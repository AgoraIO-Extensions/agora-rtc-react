var Xpe=Object.defineProperty;var Jpe=(e,r,o)=>r in e?Xpe(e,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[r]=o;var IS=(e,r,o)=>(Jpe(e,typeof r!="symbol"?r+"":r,o),o);function MW(e,r){for(var o=0;o<r.length;o++){const s=r[o];if(typeof s!="string"&&!Array.isArray(s)){for(const c in s)if(c!=="default"&&!(c in e)){const d=Object.getOwnPropertyDescriptor(s,c);d&&Object.defineProperty(e,c,d.get?d:{enumerable:!0,get:()=>s[c]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))s(c);new MutationObserver(c=>{for(const d of c)if(d.type==="childList")for(const p of d.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&s(p)}).observe(document,{childList:!0,subtree:!0});function o(c){const d={};return c.integrity&&(d.integrity=c.integrity),c.referrerPolicy&&(d.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?d.credentials="include":c.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function s(c){if(c.ep)return;c.ep=!0;const d=o(c);fetch(c.href,d)}})();var In=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ld(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Qpe(e){if(e.__esModule)return e;var r=e.default;if(typeof r=="function"){var o=function s(){return this instanceof s?Reflect.construct(r,arguments,this.constructor):r.apply(this,arguments)};o.prototype=r.prototype}else o={};return Object.defineProperty(o,"__esModule",{value:!0}),Object.keys(e).forEach(function(s){var c=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(o,s,c.get?c:{enumerable:!0,get:function(){return e[s]}})}),o}var FW={exports:{}},HC={},UW={exports:{}},hr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dv=Symbol.for("react.element"),Zpe=Symbol.for("react.portal"),efe=Symbol.for("react.fragment"),tfe=Symbol.for("react.strict_mode"),nfe=Symbol.for("react.profiler"),rfe=Symbol.for("react.provider"),ife=Symbol.for("react.context"),ofe=Symbol.for("react.forward_ref"),afe=Symbol.for("react.suspense"),sfe=Symbol.for("react.memo"),cfe=Symbol.for("react.lazy"),L8=Symbol.iterator;function lfe(e){return e===null||typeof e!="object"?null:(e=L8&&e[L8]||e["@@iterator"],typeof e=="function"?e:null)}var BW={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},VW=Object.assign,jW={};function ym(e,r,o){this.props=e,this.context=r,this.refs=jW,this.updater=o||BW}ym.prototype.isReactComponent={};ym.prototype.setState=function(e,r){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,r,"setState")};ym.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function $W(){}$W.prototype=ym.prototype;function nD(e,r,o){this.props=e,this.context=r,this.refs=jW,this.updater=o||BW}var rD=nD.prototype=new $W;rD.constructor=nD;VW(rD,ym.prototype);rD.isPureReactComponent=!0;var k8=Array.isArray,HW=Object.prototype.hasOwnProperty,iD={current:null},WW={key:!0,ref:!0,__self:!0,__source:!0};function zW(e,r,o){var s,c={},d=null,p=null;if(r!=null)for(s in r.ref!==void 0&&(p=r.ref),r.key!==void 0&&(d=""+r.key),r)HW.call(r,s)&&!WW.hasOwnProperty(s)&&(c[s]=r[s]);var v=arguments.length-2;if(v===1)c.children=o;else if(1<v){for(var m=Array(v),E=0;E<v;E++)m[E]=arguments[E+2];c.children=m}if(e&&e.defaultProps)for(s in v=e.defaultProps,v)c[s]===void 0&&(c[s]=v[s]);return{$$typeof:Dv,type:e,key:d,ref:p,props:c,_owner:iD.current}}function ufe(e,r){return{$$typeof:Dv,type:e.type,key:r,ref:e.ref,props:e.props,_owner:e._owner}}function oD(e){return typeof e=="object"&&e!==null&&e.$$typeof===Dv}function dfe(e){var r={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(o){return r[o]})}var M8=/\/+/g;function QI(e,r){return typeof e=="object"&&e!==null&&e.key!=null?dfe(""+e.key):r.toString(36)}function gy(e,r,o,s,c){var d=typeof e;(d==="undefined"||d==="boolean")&&(e=null);var p=!1;if(e===null)p=!0;else switch(d){case"string":case"number":p=!0;break;case"object":switch(e.$$typeof){case Dv:case Zpe:p=!0}}if(p)return p=e,c=c(p),e=s===""?"."+QI(p,0):s,k8(c)?(o="",e!=null&&(o=e.replace(M8,"$&/")+"/"),gy(c,r,o,"",function(E){return E})):c!=null&&(oD(c)&&(c=ufe(c,o+(!c.key||p&&p.key===c.key?"":(""+c.key).replace(M8,"$&/")+"/")+e)),r.push(c)),1;if(p=0,s=s===""?".":s+":",k8(e))for(var v=0;v<e.length;v++){d=e[v];var m=s+QI(d,v);p+=gy(d,r,o,m,c)}else if(m=lfe(e),typeof m=="function")for(e=m.call(e),v=0;!(d=e.next()).done;)d=d.value,m=s+QI(d,v++),p+=gy(d,r,o,m,c);else if(d==="object")throw r=String(e),Error("Objects are not valid as a React child (found: "+(r==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":r)+"). If you meant to render a collection of children, use an array instead.");return p}function AS(e,r,o){if(e==null)return e;var s=[],c=0;return gy(e,s,"","",function(d){return r.call(o,d,c++)}),s}function hfe(e){if(e._status===-1){var r=e._result;r=r(),r.then(function(o){(e._status===0||e._status===-1)&&(e._status=1,e._result=o)},function(o){(e._status===0||e._status===-1)&&(e._status=2,e._result=o)}),e._status===-1&&(e._status=0,e._result=r)}if(e._status===1)return e._result.default;throw e._result}var Pa={current:null},vy={transition:null},pfe={ReactCurrentDispatcher:Pa,ReactCurrentBatchConfig:vy,ReactCurrentOwner:iD};function GW(){throw Error("act(...) is not supported in production builds of React.")}hr.Children={map:AS,forEach:function(e,r,o){AS(e,function(){r.apply(this,arguments)},o)},count:function(e){var r=0;return AS(e,function(){r++}),r},toArray:function(e){return AS(e,function(r){return r})||[]},only:function(e){if(!oD(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};hr.Component=ym;hr.Fragment=efe;hr.Profiler=nfe;hr.PureComponent=nD;hr.StrictMode=tfe;hr.Suspense=afe;hr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pfe;hr.act=GW;hr.cloneElement=function(e,r,o){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=VW({},e.props),c=e.key,d=e.ref,p=e._owner;if(r!=null){if(r.ref!==void 0&&(d=r.ref,p=iD.current),r.key!==void 0&&(c=""+r.key),e.type&&e.type.defaultProps)var v=e.type.defaultProps;for(m in r)HW.call(r,m)&&!WW.hasOwnProperty(m)&&(s[m]=r[m]===void 0&&v!==void 0?v[m]:r[m])}var m=arguments.length-2;if(m===1)s.children=o;else if(1<m){v=Array(m);for(var E=0;E<m;E++)v[E]=arguments[E+2];s.children=v}return{$$typeof:Dv,type:e.type,key:c,ref:d,props:s,_owner:p}};hr.createContext=function(e){return e={$$typeof:ife,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:rfe,_context:e},e.Consumer=e};hr.createElement=zW;hr.createFactory=function(e){var r=zW.bind(null,e);return r.type=e,r};hr.createRef=function(){return{current:null}};hr.forwardRef=function(e){return{$$typeof:ofe,render:e}};hr.isValidElement=oD;hr.lazy=function(e){return{$$typeof:cfe,_payload:{_status:-1,_result:e},_init:hfe}};hr.memo=function(e,r){return{$$typeof:sfe,type:e,compare:r===void 0?null:r}};hr.startTransition=function(e){var r=vy.transition;vy.transition={};try{e()}finally{vy.transition=r}};hr.unstable_act=GW;hr.useCallback=function(e,r){return Pa.current.useCallback(e,r)};hr.useContext=function(e){return Pa.current.useContext(e)};hr.useDebugValue=function(){};hr.useDeferredValue=function(e){return Pa.current.useDeferredValue(e)};hr.useEffect=function(e,r){return Pa.current.useEffect(e,r)};hr.useId=function(){return Pa.current.useId()};hr.useImperativeHandle=function(e,r,o){return Pa.current.useImperativeHandle(e,r,o)};hr.useInsertionEffect=function(e,r){return Pa.current.useInsertionEffect(e,r)};hr.useLayoutEffect=function(e,r){return Pa.current.useLayoutEffect(e,r)};hr.useMemo=function(e,r){return Pa.current.useMemo(e,r)};hr.useReducer=function(e,r,o){return Pa.current.useReducer(e,r,o)};hr.useRef=function(e){return Pa.current.useRef(e)};hr.useState=function(e){return Pa.current.useState(e)};hr.useSyncExternalStore=function(e,r,o){return Pa.current.useSyncExternalStore(e,r,o)};hr.useTransition=function(){return Pa.current.useTransition()};hr.version="18.3.1";UW.exports=hr;var S=UW.exports;const Be=Ld(S),zh=MW({__proto__:null,default:Be},[S]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ffe=S,mfe=Symbol.for("react.element"),gfe=Symbol.for("react.fragment"),vfe=Object.prototype.hasOwnProperty,Efe=ffe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,_fe={key:!0,ref:!0,__self:!0,__source:!0};function KW(e,r,o){var s,c={},d=null,p=null;o!==void 0&&(d=""+o),r.key!==void 0&&(d=""+r.key),r.ref!==void 0&&(p=r.ref);for(s in r)vfe.call(r,s)&&!_fe.hasOwnProperty(s)&&(c[s]=r[s]);if(e&&e.defaultProps)for(s in r=e.defaultProps,r)c[s]===void 0&&(c[s]=r[s]);return{$$typeof:mfe,type:e,key:d,ref:p,props:c,_owner:Efe.current}}HC.Fragment=gfe;HC.jsx=KW;HC.jsxs=KW;FW.exports=HC;var se=FW.exports;var qW={exports:{}};(function(e,r){(function(o,s){e.exports=s()})(In,function(){function o(t,n){return n.forEach(function(i){i&&typeof i!="string"&&!Array.isArray(i)&&Object.keys(i).forEach(function(a){if(a!=="default"&&!(a in t)){var l=Object.getOwnPropertyDescriptor(i,a);Object.defineProperty(t,a,l.get?l:{enumerable:!0,get:function(){return i[a]}})}})}),Object.freeze(t)}var s=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof In<"u"?In:typeof self<"u"?self:{};function c(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var d=function(t){try{return!!t()}catch{return!0}},p=!d(function(){var t=(function(){}).bind();return typeof t!="function"||t.hasOwnProperty("prototype")}),v=p,m=Function.prototype,E=m.call,C=v&&m.bind.bind(E,E),b=v?C:function(t){return function(){return E.apply(t,arguments)}},R=b({}.isPrototypeOf),w=function(t){return t&&t.Math==Math&&t},I=w(typeof globalThis=="object"&&globalThis)||w(typeof window=="object"&&window)||w(typeof self=="object"&&self)||w(typeof s=="object"&&s)||function(){return this}()||s||Function("return this")(),O=p,x=Function.prototype,P=x.apply,N=x.call,L=typeof Reflect=="object"&&Reflect.apply||(O?N.bind(P):function(){return N.apply(P,arguments)}),M=b,j=M({}.toString),$=M("".slice),H=function(t){return $(j(t),8,-1)},G=H,Y=b,q=function(t){if(G(t)==="Function")return Y(t)},J=typeof document=="object"&&document.all,re={all:J,IS_HTMLDDA:J===void 0&&J!==void 0},Z=re.all,Q=re.IS_HTMLDDA?function(t){return typeof t=="function"||t===Z}:function(t){return typeof t=="function"},he={},oe=!d(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7}),ae=p,te=Function.prototype.call,de=ae?te.bind(te):function(){return te.apply(te,arguments)},fe={},ie={}.propertyIsEnumerable,le=Object.getOwnPropertyDescriptor,ve=le&&!ie.call({1:2},1);fe.f=ve?function(t){var n=le(this,t);return!!n&&n.enumerable}:ie;var ge,Te,we=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}},Ie=d,Me=H,Ke=Object,ke=b("".split),Ne=Ie(function(){return!Ke("z").propertyIsEnumerable(0)})?function(t){return Me(t)=="String"?ke(t,""):Ke(t)}:Ke,ze=function(t){return t==null},Qe=ze,De=TypeError,xe=function(t){if(Qe(t))throw De("Can't call method on "+t);return t},ft=Ne,Et=xe,st=function(t){return ft(Et(t))},ot=Q,Ze=re.all,je=re.IS_HTMLDDA?function(t){return typeof t=="object"?t!==null:ot(t)||t===Ze}:function(t){return typeof t=="object"?t!==null:ot(t)},ct={},lt=ct,gt=I,Ot=Q,Tt=function(t){return Ot(t)?t:void 0},Wt=function(t,n){return arguments.length<2?Tt(lt[t])||Tt(gt[t]):lt[t]&&lt[t][n]||gt[t]&&gt[t][n]},on=typeof navigator<"u"&&String(navigator.userAgent)||"",xt=I,wt=on,Pt=xt.process,Kt=xt.Deno,fn=Pt&&Pt.versions||Kt&&Kt.version,mn=fn&&fn.v8;mn&&(Te=(ge=mn.split("."))[0]>0&&ge[0]<4?1:+(ge[0]+ge[1])),!Te&&wt&&(!(ge=wt.match(/Edge\/(\d+)/))||ge[1]>=74)&&(ge=wt.match(/Chrome\/(\d+)/))&&(Te=+ge[1]);var Un=Te,Kn=Un,qn=d,mt=I.String,Nt=!!Object.getOwnPropertySymbols&&!qn(function(){var t=Symbol();return!mt(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&Kn&&Kn<41}),Sn=Nt&&!Symbol.sham&&typeof Symbol.iterator=="symbol",ur=Wt,Br=Q,dr=R,Mn=Object,Vt=Sn?function(t){return typeof t=="symbol"}:function(t){var n=ur("Symbol");return Br(n)&&dr(n.prototype,Mn(t))},yn=String,$t=function(t){try{return yn(t)}catch{return"Object"}},Ct=Q,Ht=$t,On=TypeError,rt=function(t){if(Ct(t))return t;throw On(Ht(t)+" is not a function")},St=rt,It=ze,en=function(t,n){var i=t[n];return It(i)?void 0:St(i)},En=de,Cn=Q,pr=je,Vr=TypeError,cr={exports:{}},rn=I,vi=Object.defineProperty,Wo=function(t,n){try{vi(rn,t,{value:n,configurable:!0,writable:!0})}catch{rn[t]=n}return n},po="__core-js_shared__",li=I[po]||Wo(po,{}),wi=li;(cr.exports=function(t,n){return wi[t]||(wi[t]=n!==void 0?n:{})})("versions",[]).push({version:"3.31.1",mode:"pure",copyright:"© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.31.1/LICENSE",source:"https://github.com/zloirock/core-js"});var Dt=cr.exports,Mt=xe,Qt=Object,Yn=function(t){return Qt(Mt(t))},ki=Yn,wo=b({}.hasOwnProperty),An=Object.hasOwn||function(t,n){return wo(ki(t),n)},Io=b,Ma=0,qt=Math.random(),xn=Io(1 .toString),vr=function(t){return"Symbol("+(t===void 0?"":t)+")_"+xn(++Ma+qt,36)},ti=Dt,$i=An,Ec=vr,tl=Nt,Ca=Sn,Ao=I.Symbol,Fa=ti("wks"),Ua=Ca?Ao.for||Ao:Ao&&Ao.withoutSetter||Ec,Lt=function(t){return $i(Fa,t)||(Fa[t]=tl&&$i(Ao,t)?Ao[t]:Ua("Symbol."+t)),Fa[t]},Nn=de,jn=je,bn=Vt,gn=en,Er=function(t,n){var i,a;if(n==="string"&&Cn(i=t.toString)&&!pr(a=En(i,t))||Cn(i=t.valueOf)&&!pr(a=En(i,t))||n!=="string"&&Cn(i=t.toString)&&!pr(a=En(i,t)))return a;throw Vr("Can't convert object to primitive value")},jr=TypeError,fo=Lt("toPrimitive"),mo=function(t,n){if(!jn(t)||bn(t))return t;var i,a=gn(t,fo);if(a){if(n===void 0&&(n="default"),i=Nn(a,t,n),!jn(i)||bn(i))return i;throw jr("Can't convert object to primitive value")}return n===void 0&&(n="number"),Er(t,n)},Ba=Vt,Hi=function(t){var n=mo(t,"string");return Ba(n)?n:n+""},zo=je,as=I.document,Tu=zo(as)&&zo(as.createElement),Ru=function(t){return Tu?as.createElement(t):{}},io=Ru,wu=!oe&&!d(function(){return Object.defineProperty(io("div"),"a",{get:function(){return 7}}).a!=7}),mp=oe,_c=de,Ul=fe,Iu=we,jd=st,Bm=Hi,Vm=An,jm=wu,gp=Object.getOwnPropertyDescriptor;he.f=mp?gp:function(t,n){if(t=jd(t),n=Bm(n),jm)try{return gp(t,n)}catch{}if(Vm(t,n))return Iu(!_c(Ul.f,t,n),t[n])};var zt=d,Tn=Q,Ii=/#|\.prototype\./,Ei=function(t,n){var i=vp[Ai(t)];return i==Qv||i!=$m&&(Tn(n)?zt(n):!!n)},Ai=Ei.normalize=function(t){return String(t).replace(Ii,".").toLowerCase()},vp=Ei.data={},$m=Ei.NATIVE="N",Qv=Ei.POLYFILL="P",$d=Ei,dQ=rt,hQ=p,pQ=q(q.bind),Au=function(t,n){return dQ(t),n===void 0?t:hQ?pQ(t,n):function(){return t.apply(n,arguments)}},Ls={},A2=oe&&d(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42}),fQ=je,mQ=String,gQ=TypeError,na=function(t){if(fQ(t))return t;throw gQ(mQ(t)+" is not an object")},vQ=oe,EQ=wu,_Q=A2,Zv=na,O2=Hi,SQ=TypeError,fT=Object.defineProperty,yQ=Object.getOwnPropertyDescriptor,mT="enumerable",gT="configurable",vT="writable";Ls.f=vQ?_Q?function(t,n,i){if(Zv(t),n=O2(n),Zv(i),typeof t=="function"&&n==="prototype"&&"value"in i&&vT in i&&!i[vT]){var a=yQ(t,n);a&&a[vT]&&(t[n]=i.value,i={configurable:gT in i?i[gT]:a[gT],enumerable:mT in i?i[mT]:a[mT],writable:!1})}return fT(t,n,i)}:fT:function(t,n,i){if(Zv(t),n=O2(n),Zv(i),EQ)try{return fT(t,n,i)}catch{}if("get"in i||"set"in i)throw SQ("Accessors not supported");return"value"in i&&(t[n]=i.value),t};var CQ=Ls,bQ=we,Ou=oe?function(t,n,i){return CQ.f(t,n,bQ(1,i))}:function(t,n,i){return t[n]=i,t},eE=I,TQ=L,RQ=q,wQ=Q,IQ=he.f,AQ=$d,Ep=ct,OQ=Au,_p=Ou,x2=An,xQ=function(t){var n=function(i,a,l){if(this instanceof n){switch(arguments.length){case 0:return new t;case 1:return new t(i);case 2:return new t(i,a)}return new t(i,a,l)}return TQ(t,this,arguments)};return n.prototype=t.prototype,n},ir=function(t,n){var i,a,l,u,h,f,g,_,y,T=t.target,A=t.global,D=t.stat,W=t.proto,F=A?eE:D?eE[T]:(eE[T]||{}).prototype,U=A?Ep:Ep[T]||_p(Ep,T,{})[T],z=U.prototype;for(u in n)a=!(i=AQ(A?u:T+(D?".":"#")+u,t.forced))&&F&&x2(F,u),f=U[u],a&&(g=t.dontCallGetSet?(y=IQ(F,u))&&y.value:F[u]),h=a&&g?g:n[u],a&&typeof f==typeof h||(_=t.bind&&a?OQ(h,eE):t.wrap&&a?xQ(h):W&&wQ(h)?RQ(h):h,(t.sham||h&&h.sham||f&&f.sham)&&_p(_,"sham",!0),_p(U,u,_),W&&(x2(Ep,l=T+"Prototype")||_p(Ep,l,{}),_p(Ep[l],u,h),t.real&&z&&(i||!z[u])&&_p(z,u,h)))},NQ=Math.ceil,DQ=Math.floor,PQ=Math.trunc||function(t){var n=+t;return(n>0?DQ:NQ)(n)},LQ=PQ,ET=function(t){var n=+t;return n!=n||n===0?0:LQ(n)},kQ=ET,MQ=Math.max,FQ=Math.min,_T=function(t,n){var i=kQ(t);return i<0?MQ(i+n,0):FQ(i,n)},UQ=ET,BQ=Math.min,N2=function(t){return t>0?BQ(UQ(t),9007199254740991):0},VQ=N2,Bl=function(t){return VQ(t.length)},jQ=st,$Q=_T,HQ=Bl,D2=function(t){return function(n,i,a){var l,u=jQ(n),h=HQ(u),f=$Q(a,h);if(t&&i!=i){for(;h>f;)if((l=u[f++])!=l)return!0}else for(;h>f;f++)if((t||f in u)&&u[f]===i)return t||f||0;return!t&&-1}},ST={includes:D2(!0),indexOf:D2(!1)},WQ=ST.includes;ir({target:"Array",proto:!0,forced:d(function(){return!Array(1).includes()})},{includes:function(t){return WQ(this,t,arguments.length>1?arguments[1]:void 0)}});var zQ=ct,ks=function(t){return zQ[t+"Prototype"]},GQ=ks("Array").includes,KQ=je,qQ=H,YQ=Lt("match"),P2=function(t){var n;return KQ(t)&&((n=t[YQ])!==void 0?!!n:qQ(t)=="RegExp")},XQ=P2,JQ=TypeError,L2={};L2[Lt("toStringTag")]="z";var yT=String(L2)==="[object z]",QQ=yT,ZQ=Q,tE=H,eZ=Lt("toStringTag"),tZ=Object,nZ=tE(function(){return arguments}())=="Arguments",nl=QQ?tE:function(t){var n,i,a;return t===void 0?"Undefined":t===null?"Null":typeof(i=function(l,u){try{return l[u]}catch{}}(n=tZ(t),eZ))=="string"?i:nZ?tE(n):(a=tE(n))=="Object"&&ZQ(n.callee)?"Arguments":a},rZ=nl,iZ=String,ss=function(t){if(rZ(t)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return iZ(t)},oZ=Lt("match"),aZ=ir,sZ=function(t){if(XQ(t))throw JQ("The method doesn't accept regular expressions");return t},cZ=xe,k2=ss,lZ=function(t){var n=/./;try{"/./"[t](n)}catch{try{return n[oZ]=!1,"/./"[t](n)}catch{}}return!1},uZ=b("".indexOf);aZ({target:"String",proto:!0,forced:!lZ("includes")},{includes:function(t){return!!~uZ(k2(cZ(this)),k2(sZ(t)),arguments.length>1?arguments[1]:void 0)}});var dZ=ks("String").includes,M2=R,hZ=GQ,pZ=dZ,CT=Array.prototype,bT=String.prototype,fZ=function(t){var n=t.includes;return t===CT||M2(CT,t)&&n===CT.includes?hZ:typeof t=="string"||t===bT||M2(bT,t)&&n===bT.includes?pZ:n},Ye=c(fZ),mZ=rt,gZ=Yn,vZ=Ne,EZ=Bl,_Z=TypeError,F2=function(t){return function(n,i,a,l){mZ(i);var u=gZ(n),h=vZ(u),f=EZ(u),g=t?f-1:0,_=t?-1:1;if(a<2)for(;;){if(g in h){l=h[g],g+=_;break}if(g+=_,t?g<0:f<=g)throw _Z("Reduce of empty array with no initial value")}for(;t?g>=0:f>g;g+=_)g in h&&(l=i(l,h[g],g,u));return l}},SZ={left:F2(!1),right:F2(!0)},yZ=d,nE=function(t,n){var i=[][t];return!!i&&yZ(function(){i.call(null,n||function(){return 1},1)})},Hm=typeof process<"u"&&H(process)=="process",CZ=SZ.left;ir({target:"Array",proto:!0,forced:!Hm&&Un>79&&Un<83||!nE("reduce")},{reduce:function(t){var n=arguments.length;return CZ(this,t,n,n>1?arguments[1]:void 0)}});var bZ=ks("Array").reduce,TZ=R,RZ=bZ,TT=Array.prototype,wZ=function(t){var n=t.reduce;return t===TT||TZ(TT,t)&&n===TT.reduce?RZ:n},U2=wZ,Sc=c(U2);let B2=!0,V2=!0;function rE(t,n,i){const a=t.match(n);return a&&a.length>=i&&parseInt(a[i],10)}function Hd(t,n,i){if(!t.RTCPeerConnection)return;const a=t.RTCPeerConnection.prototype,l=a.addEventListener;a.addEventListener=function(h,f){if(h!==n)return l.apply(this,arguments);const g=_=>{const y=i(_);y&&(f.handleEvent?f.handleEvent(y):f(y))};return this._eventMap=this._eventMap||{},this._eventMap[n]||(this._eventMap[n]=new Map),this._eventMap[n].set(f,g),l.apply(this,[h,g])};const u=a.removeEventListener;a.removeEventListener=function(h,f){if(h!==n||!this._eventMap||!this._eventMap[n])return u.apply(this,arguments);if(!this._eventMap[n].has(f))return u.apply(this,arguments);const g=this._eventMap[n].get(f);return this._eventMap[n].delete(f),this._eventMap[n].size===0&&delete this._eventMap[n],Object.keys(this._eventMap).length===0&&delete this._eventMap,u.apply(this,[h,g])},Object.defineProperty(a,"on"+n,{get(){return this["_on"+n]},set(h){this["_on"+n]&&(this.removeEventListener(n,this["_on"+n]),delete this["_on"+n]),h&&this.addEventListener(n,this["_on"+n]=h)},enumerable:!0,configurable:!0})}function IZ(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(B2=t,t?"adapter.js logging disabled":"adapter.js logging enabled")}function AZ(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(V2=!t,"adapter.js deprecation warnings "+(t?"disabled":"enabled"))}function j2(){if(typeof window=="object"){if(B2)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function RT(t,n){V2&&console.warn(t+" is deprecated, please use "+n+" instead.")}function $2(t){return Object.prototype.toString.call(t)==="[object Object]"}function H2(t){var n;return $2(t)?Sc(n=Object.keys(t)).call(n,function(i,a){const l=$2(t[a]),u=l?H2(t[a]):t[a],h=l&&!Object.keys(u).length;return u===void 0||h?i:Object.assign(i,{[a]:u})},{}):t}function wT(t,n,i){n&&!i.has(n.id)&&(i.set(n.id,n),Object.keys(n).forEach(a=>{a.endsWith("Id")?wT(t,t.get(n[a]),i):a.endsWith("Ids")&&n[a].forEach(l=>{wT(t,t.get(l),i)})}))}function W2(t,n,i){const a=i?"outbound-rtp":"inbound-rtp",l=new Map;if(n===null)return l;const u=[];return t.forEach(h=>{h.type==="track"&&h.trackIdentifier===n.id&&u.push(h)}),u.forEach(h=>{t.forEach(f=>{f.type===a&&f.trackId===h.id&&wT(t,f,l)})}),l}var OZ=vr,z2=Dt("keys"),iE=function(t){return z2[t]||(z2[t]=OZ(t))},xZ=!d(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}),NZ=An,DZ=Q,PZ=Yn,LZ=xZ,G2=iE("IE_PROTO"),IT=Object,kZ=IT.prototype,AT=LZ?IT.getPrototypeOf:function(t){var n=PZ(t);if(NZ(n,G2))return n[G2];var i=n.constructor;return DZ(i)&&n instanceof i?i.prototype:n instanceof IT?kZ:null},MZ=b,FZ=rt,UZ=Q,BZ=String,VZ=TypeError,jZ=function(t,n,i){try{return MZ(FZ(Object.getOwnPropertyDescriptor(t,n)[i]))}catch{}},$Z=na,HZ=function(t){if(typeof t=="object"||UZ(t))return t;throw VZ("Can't set "+BZ(t)+" as a prototype")},WZ=Object.setPrototypeOf||("__proto__"in{}?function(){var t,n=!1,i={};try{(t=jZ(Object.prototype,"__proto__","set"))(i,[]),n=i instanceof Array}catch{}return function(a,l){return $Z(a),HZ(l),n?t(a,l):a.__proto__=l,a}}():void 0),oE={},aE={},OT=An,zZ=st,GZ=ST.indexOf,KZ=aE,K2=b([].push),q2=function(t,n){var i,a=zZ(t),l=0,u=[];for(i in a)!OT(KZ,i)&&OT(a,i)&&K2(u,i);for(;n.length>l;)OT(a,i=n[l++])&&(~GZ(u,i)||K2(u,i));return u},xT=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],qZ=q2,YZ=xT.concat("length","prototype");oE.f=Object.getOwnPropertyNames||function(t){return qZ(t,YZ)};var Wm={};Wm.f=Object.getOwnPropertySymbols;var XZ=Wt,JZ=oE,QZ=Wm,ZZ=na,eee=b([].concat),tee=XZ("Reflect","ownKeys")||function(t){var n=JZ.f(ZZ(t)),i=QZ.f;return i?eee(n,i(t)):n},Y2=An,nee=tee,ree=he,iee=Ls,NT={},oee=q2,aee=xT,sE=Object.keys||function(t){return oee(t,aee)},see=oe,cee=A2,lee=Ls,uee=na,dee=st,hee=sE;NT.f=see&&!cee?Object.defineProperties:function(t,n){uee(t);for(var i,a=dee(n),l=hee(n),u=l.length,h=0;u>h;)lee.f(t,i=l[h++],a[i]);return t};var cE,X2=Wt("document","documentElement"),pee=na,fee=NT,J2=xT,mee=aE,gee=X2,vee=Ru,DT="prototype",PT="script",Q2=iE("IE_PROTO"),LT=function(){},Z2=function(t){return"<"+PT+">"+t+"</"+PT+">"},eL=function(t){t.write(Z2("")),t.close();var n=t.parentWindow.Object;return t=null,n},lE=function(){try{cE=new ActiveXObject("htmlfile")}catch{}var t,n,i;lE=typeof document<"u"?document.domain&&cE?eL(cE):(n=vee("iframe"),i="java"+PT+":",n.style.display="none",gee.appendChild(n),n.src=String(i),(t=n.contentWindow.document).open(),t.write(Z2("document.F=Object")),t.close(),t.F):eL(cE);for(var a=J2.length;a--;)delete lE[DT][J2[a]];return lE()};mee[Q2]=!0;var zm=Object.create||function(t,n){var i;return t!==null?(LT[DT]=pee(t),i=new LT,LT[DT]=null,i[Q2]=t):i=lE(),n===void 0?i:fee.f(i,n)},Eee=je,_ee=Ou,tL=Error,See=b("".replace),yee=String(tL("zxcasd").stack),nL=/\n\s*at [^:]*:[^\n]*/,Cee=nL.test(yee),bee=we,Tee=!d(function(){var t=Error("a");return!("stack"in t)||(Object.defineProperty(t,"stack",bee(1,7)),t.stack!==7)}),Ree=Ou,wee=function(t,n){if(Cee&&typeof t=="string"&&!tL.prepareStackTrace)for(;n--;)t=See(t,nL,"");return t},Iee=Tee,rL=Error.captureStackTrace,Wd={},Aee=Wd,Oee=Lt("iterator"),xee=Array.prototype,iL=function(t){return t!==void 0&&(Aee.Array===t||xee[Oee]===t)},Nee=nl,oL=en,Dee=ze,Pee=Wd,Lee=Lt("iterator"),uE=function(t){if(!Dee(t))return oL(t,Lee)||oL(t,"@@iterator")||Pee[Nee(t)]},kee=de,Mee=rt,Fee=na,Uee=$t,Bee=uE,Vee=TypeError,kT=function(t,n){var i=arguments.length<2?Bee(t):n;if(Mee(i))return Fee(kee(i,t));throw Vee(Uee(t)+" is not iterable")},jee=de,aL=na,$ee=en,sL=function(t,n,i){var a,l;aL(t);try{if(!(a=$ee(t,"return"))){if(n==="throw")throw i;return i}a=jee(a,t)}catch(u){l=!0,a=u}if(n==="throw")throw i;if(l)throw a;return aL(a),i},Hee=Au,Wee=de,zee=na,Gee=$t,Kee=iL,qee=Bl,cL=R,Yee=kT,Xee=uE,lL=sL,Jee=TypeError,dE=function(t,n){this.stopped=t,this.result=n},uL=dE.prototype,Gm=function(t,n,i){var a,l,u,h,f,g,_,y=i&&i.that,T=!(!i||!i.AS_ENTRIES),A=!(!i||!i.IS_RECORD),D=!(!i||!i.IS_ITERATOR),W=!(!i||!i.INTERRUPTED),F=Hee(n,y),U=function(X){return a&&lL(a,"normal",X),new dE(!0,X)},z=function(X){return T?(zee(X),W?F(X[0],X[1],U):F(X[0],X[1])):W?F(X,U):F(X)};if(A)a=t.iterator;else if(D)a=t;else{if(!(l=Xee(t)))throw Jee(Gee(t)+" is not iterable");if(Kee(l)){for(u=0,h=qee(t);h>u;u++)if((f=z(t[u]))&&cL(uL,f))return f;return new dE(!1)}a=Yee(t,l)}for(g=A?t.next:a.next;!(_=Wee(g,a)).done;){try{f=z(_.value)}catch(X){lL(a,"throw",X)}if(typeof f=="object"&&f&&cL(uL,f))return f}return new dE(!1)},Qee=ss,Zee=ir,ete=R,tte=AT,hE=WZ,nte=function(t,n,i){for(var a=nee(n),l=iee.f,u=ree.f,h=0;h<a.length;h++){var f=a[h];Y2(t,f)||i&&Y2(i,f)||l(t,f,u(n,f))}},dL=zm,MT=Ou,FT=we,rte=function(t,n){Eee(n)&&"cause"in n&&_ee(t,"cause",n.cause)},ite=function(t,n,i,a){Iee&&(rL?rL(t,n):Ree(t,"stack",wee(i,a)))},ote=Gm,ate=function(t,n){return t===void 0?arguments.length<2?"":n:Qee(t)},ste=Lt("toStringTag"),pE=Error,cte=[].push,Sp=function(t,n){var i,a=ete(UT,this);hE?i=hE(pE(),a?tte(this):UT):(i=a?this:dL(UT),MT(i,ste,"Error")),n!==void 0&&MT(i,"message",ate(n)),ite(i,Sp,i.stack,1),arguments.length>2&&rte(i,arguments[2]);var l=[];return ote(t,cte,{that:l}),MT(i,"errors",l),i};hE?hE(Sp,pE):nte(Sp,pE,{name:!0});var UT=Sp.prototype=dL(pE.prototype,{constructor:FT(1,Sp),message:FT(1,""),name:FT(1,"AggregateError")});Zee({global:!0,constructor:!0,arity:2},{AggregateError:Sp});var fE,Km,mE,lte=Q,hL=I.WeakMap,ute=lte(hL)&&/native code/.test(String(hL)),pL=I,dte=je,hte=Ou,BT=An,VT=li,pte=iE,fte=aE,fL="Object already initialized",jT=pL.TypeError,mte=pL.WeakMap;if(ute||VT.state){var rl=VT.state||(VT.state=new mte);rl.get=rl.get,rl.has=rl.has,rl.set=rl.set,fE=function(t,n){if(rl.has(t))throw jT(fL);return n.facade=t,rl.set(t,n),n},Km=function(t){return rl.get(t)||{}},mE=function(t){return rl.has(t)}}else{var yp=pte("state");fte[yp]=!0,fE=function(t,n){if(BT(t,yp))throw jT(fL);return n.facade=t,hte(t,yp,n),n},Km=function(t){return BT(t,yp)?t[yp]:{}},mE=function(t){return BT(t,yp)}}var zd,mL,gL,Gd={set:fE,get:Km,has:mE,enforce:function(t){return mE(t)?Km(t):fE(t,{})},getterFor:function(t){return function(n){var i;if(!dte(n)||(i=Km(n)).type!==t)throw jT("Incompatible receiver, "+t+" required");return i}}},$T=oe,gte=An,vL=Function.prototype,vte=$T&&Object.getOwnPropertyDescriptor,HT=gte(vL,"name"),EL={EXISTS:HT,PROPER:HT&&(function(){}).name==="something",CONFIGURABLE:HT&&(!$T||$T&&vte(vL,"name").configurable)},Ete=Ou,xu=function(t,n,i,a){return a&&a.enumerable?t[n]=i:Ete(t,n,i),t},_te=d,Ste=Q,yte=je,Cte=zm,_L=AT,bte=xu,WT=Lt("iterator"),SL=!1;[].keys&&("next"in(gL=[].keys())?(mL=_L(_L(gL)))!==Object.prototype&&(zd=mL):SL=!0);var Tte=!yte(zd)||_te(function(){var t={};return zd[WT].call(t)!==t});Ste((zd=Tte?{}:Cte(zd))[WT])||bte(zd,WT,function(){return this});var yL={IteratorPrototype:zd,BUGGY_SAFARI_ITERATORS:SL},Rte=nl,wte=yT?{}.toString:function(){return"[object "+Rte(this)+"]"},Ite=yT,Ate=Ls.f,Ote=Ou,xte=An,Nte=wte,CL=Lt("toStringTag"),Nu=function(t,n,i,a){if(t){var l=i?t:t.prototype;xte(l,CL)||Ate(l,CL,{configurable:!0,value:n}),a&&!Ite&&Ote(l,"toString",Nte)}},Dte=yL.IteratorPrototype,Pte=zm,Lte=we,kte=Nu,Mte=Wd,Fte=function(){return this},zT=function(t,n,i,a){var l=n+" Iterator";return t.prototype=Pte(Dte,{next:Lte(+!a,i)}),kte(t,l,!1,!0),Mte[l]=Fte,t},Ute=ir,Bte=de,Vte=EL,jte=zT,$te=AT,Hte=Nu,bL=xu,TL=Wd,Wte=yL,zte=Vte.PROPER,gE=Wte.BUGGY_SAFARI_ITERATORS,GT=Lt("iterator"),RL="keys",vE="values",wL="entries",Gte=function(){return this},IL=function(t,n,i,a,l,u,h){jte(i,n,a);var f,g,_,y=function(z){if(z===l&&F)return F;if(!gE&&z in D)return D[z];switch(z){case RL:case vE:case wL:return function(){return new i(this,z)}}return function(){return new i(this)}},T=n+" Iterator",A=!1,D=t.prototype,W=D[GT]||D["@@iterator"]||l&&D[l],F=!gE&&W||y(l),U=n=="Array"&&D.entries||W;if(U&&(f=$te(U.call(new t)))!==Object.prototype&&f.next&&(Hte(f,T,!0,!0),TL[T]=Gte),zte&&l==vE&&W&&W.name!==vE&&(A=!0,F=function(){return Bte(W,this)}),l)if(g={values:y(vE),keys:u?F:y(RL),entries:y(wL)},h)for(_ in g)(gE||A||!(_ in D))&&bL(D,_,g[_]);else Ute({target:n,proto:!0,forced:gE||A},g);return h&&D[GT]!==F&&bL(D,GT,F,{name:l}),TL[n]=F,g},KT=function(t,n){return{value:t,done:n}},Kte=st,AL=Wd,OL=Gd;Ls.f;var qte=IL,xL=KT,NL="Array Iterator",Yte=OL.set,Xte=OL.getterFor(NL);qte(Array,"Array",function(t,n){Yte(this,{type:NL,target:Kte(t),index:0,kind:n})},function(){var t=Xte(this),n=t.target,i=t.kind,a=t.index++;return!n||a>=n.length?(t.target=void 0,xL(void 0,!0)):xL(i=="keys"?a:i=="values"?n[a]:[a,n[a]],!1)},"values"),AL.Arguments=AL.Array;var Jte=Ls,EE=function(t,n,i){return Jte.f(t,n,i)},Qte=Wt,Zte=EE,ene=oe,DL=Lt("species"),tne=R,nne=TypeError,qT=function(t,n){if(tne(n,t))return t;throw nne("Incorrect invocation")},rne=Q,YT=li,ine=b(Function.toString);rne(YT.inspectSource)||(YT.inspectSource=function(t){return ine(t)});var PL=YT.inspectSource,one=b,ane=d,LL=Q,sne=nl,cne=PL,kL=function(){},lne=[],ML=Wt("Reflect","construct"),XT=/^\s*(?:class|function)\b/,une=one(XT.exec),dne=!XT.exec(kL),qm=function(t){if(!LL(t))return!1;try{return ML(kL,lne,t),!0}catch{return!1}},FL=function(t){if(!LL(t))return!1;switch(sne(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return dne||!!une(XT,cne(t))}catch{return!0}};FL.sham=!0;var Ym,Cp,UL,JT,_E=!ML||ane(function(){var t;return qm(qm.call)||!qm(Object)||!qm(function(){t=!0})||t})?FL:qm,hne=_E,pne=$t,fne=TypeError,BL=na,mne=function(t){if(hne(t))return t;throw fne(pne(t)+" is not a constructor")},gne=ze,vne=Lt("species"),QT=function(t,n){var i,a=BL(t).constructor;return a===void 0||gne(i=BL(a)[vne])?n:mne(i)},ZT=b([].slice),Ene=TypeError,SE=function(t,n){if(t<n)throw Ene("Not enough arguments");return t},VL=/(?:ipad|iphone|ipod).*applewebkit/i.test(on),cs=I,_ne=L,Sne=Au,jL=Q,yne=An,$L=d,HL=X2,Cne=ZT,WL=Ru,bne=SE,Tne=VL,Rne=Hm,eR=cs.setImmediate,tR=cs.clearImmediate,wne=cs.process,nR=cs.Dispatch,Ine=cs.Function,zL=cs.MessageChannel,Ane=cs.String,rR=0,Xm={},GL="onreadystatechange";$L(function(){Ym=cs.location});var iR=function(t){if(yne(Xm,t)){var n=Xm[t];delete Xm[t],n()}},oR=function(t){return function(){iR(t)}},KL=function(t){iR(t.data)},qL=function(t){cs.postMessage(Ane(t),Ym.protocol+"//"+Ym.host)};eR&&tR||(eR=function(t){bne(arguments.length,1);var n=jL(t)?t:Ine(t),i=Cne(arguments,1);return Xm[++rR]=function(){_ne(n,void 0,i)},Cp(rR),rR},tR=function(t){delete Xm[t]},Rne?Cp=function(t){wne.nextTick(oR(t))}:nR&&nR.now?Cp=function(t){nR.now(oR(t))}:zL&&!Tne?(JT=(UL=new zL).port2,UL.port1.onmessage=KL,Cp=Sne(JT.postMessage,JT)):cs.addEventListener&&jL(cs.postMessage)&&!cs.importScripts&&Ym&&Ym.protocol!=="file:"&&!$L(qL)?(Cp=qL,cs.addEventListener("message",KL,!1)):Cp=GL in WL("script")?function(t){HL.appendChild(WL("script"))[GL]=function(){HL.removeChild(this),iR(t)}}:function(t){setTimeout(oR(t),0)});var YL={set:eR,clear:tR},XL=function(){this.head=null,this.tail=null};XL.prototype={add:function(t){var n={item:t,next:null},i=this.tail;i?i.next=n:this.head=n,this.tail=n},get:function(){var t=this.head;if(t)return(this.head=t.next)===null&&(this.tail=null),t.item}};var bp,aR,sR,cR,JL,QL=XL,One=/ipad|iphone|ipod/i.test(on)&&typeof Pebble<"u",xne=/web0s(?!.*chrome)/i.test(on),Kd=I,ZL=Au,Nne=he.f,lR=YL.set,Dne=QL,Pne=VL,Lne=One,kne=xne,uR=Hm,ek=Kd.MutationObserver||Kd.WebKitMutationObserver,tk=Kd.document,nk=Kd.process,yE=Kd.Promise,rk=Nne(Kd,"queueMicrotask"),dR=rk&&rk.value;if(!dR){var CE=new Dne,bE=function(){var t,n;for(uR&&(t=nk.domain)&&t.exit();n=CE.get();)try{n()}catch(i){throw CE.head&&bp(),i}t&&t.enter()};Pne||uR||kne||!ek||!tk?!Lne&&yE&&yE.resolve?((cR=yE.resolve(void 0)).constructor=yE,JL=ZL(cR.then,cR),bp=function(){JL(bE)}):uR?bp=function(){nk.nextTick(bE)}:(lR=ZL(lR,Kd),bp=function(){lR(bE)}):(aR=!0,sR=tk.createTextNode(""),new ek(bE).observe(sR,{characterData:!0}),bp=function(){sR.data=aR=!aR}),dR=function(t){CE.head||bp(),CE.add(t)}}var Mne=dR,Tp=function(t){try{return{error:!1,value:t()}}catch(n){return{error:!0,value:n}}},qd=I.Promise,ik=typeof Deno=="object"&&Deno&&typeof Deno.version=="object",Fne=!ik&&!Hm&&typeof window=="object"&&typeof document=="object",Une=I,Jm=qd,Bne=Q,Vne=$d,jne=PL,$ne=Lt,Hne=Fne,Wne=ik,hR=Un,ok=Jm&&Jm.prototype,zne=$ne("species"),ak=!1,sk=Bne(Une.PromiseRejectionEvent),Gne=Vne("Promise",function(){var t=jne(Jm),n=t!==String(Jm);if(!n&&hR===66||!ok.catch||!ok.finally)return!0;if(!hR||hR<51||!/native code/.test(t)){var i=new Jm(function(l){l(1)}),a=function(l){l(function(){},function(){})};if((i.constructor={})[zne]=a,!(ak=i.then(function(){})instanceof a))return!0}return!n&&(Hne||Wne)&&!sk}),Qm={CONSTRUCTOR:Gne,REJECTION_EVENT:sk,SUBCLASSING:ak},il={},ck=rt,Kne=TypeError,qne=function(t){var n,i;this.promise=new t(function(a,l){if(n!==void 0||i!==void 0)throw Kne("Bad Promise constructor");n=a,i=l}),this.resolve=ck(n),this.reject=ck(i)};il.f=function(t){return new qne(t)};var pR,lk,Yne=ir,TE=Hm,Du=I,Zm=de,Xne=xu,Jne=Nu,Qne=function(t){var n=Qte(t);ene&&n&&!n[DL]&&Zte(n,DL,{configurable:!0,get:function(){return this}})},Zne=rt,fR=Q,ere=je,tre=qT,nre=QT,uk=YL.set,mR=Mne,rre=function(t,n){try{arguments.length==1?console.error(t):console.error(t,n)}catch{}},ire=Tp,ore=QL,dk=Gd,gR=qd,hk=Qm,pk=il,RE="Promise",fk=hk.CONSTRUCTOR,are=hk.REJECTION_EVENT,vR=dk.getterFor(RE),sre=dk.set,cre=gR&&gR.prototype,e0=gR,ER=cre,mk=Du.TypeError,_R=Du.document,SR=Du.process,yR=pk.f,lre=yR,ure=!!(_R&&_R.createEvent&&Du.dispatchEvent),gk="unhandledrejection",vk=function(t){var n;return!(!ere(t)||!fR(n=t.then))&&n},Ek=function(t,n){var i,a,l,u=n.value,h=n.state==1,f=h?t.ok:t.fail,g=t.resolve,_=t.reject,y=t.domain;try{f?(h||(n.rejection===2&&hre(n),n.rejection=1),f===!0?i=u:(y&&y.enter(),i=f(u),y&&(y.exit(),l=!0)),i===t.promise?_(mk("Promise-chain cycle")):(a=vk(i))?Zm(a,i,g,_):g(i)):_(u)}catch(T){y&&!l&&y.exit(),_(T)}},_k=function(t,n){t.notified||(t.notified=!0,mR(function(){for(var i,a=t.reactions;i=a.get();)Ek(i,t);t.notified=!1,n&&!t.rejection&&dre(t)}))},Sk=function(t,n,i){var a,l;ure?((a=_R.createEvent("Event")).promise=n,a.reason=i,a.initEvent(t,!1,!0),Du.dispatchEvent(a)):a={promise:n,reason:i},!are&&(l=Du["on"+t])?l(a):t===gk&&rre("Unhandled promise rejection",i)},dre=function(t){Zm(uk,Du,function(){var n,i=t.facade,a=t.value;if(yk(t)&&(n=ire(function(){TE?SR.emit("unhandledRejection",a,i):Sk(gk,i,a)}),t.rejection=TE||yk(t)?2:1,n.error))throw n.value})},yk=function(t){return t.rejection!==1&&!t.parent},hre=function(t){Zm(uk,Du,function(){var n=t.facade;TE?SR.emit("rejectionHandled",n):Sk("rejectionhandled",n,t.value)})},Rp=function(t,n,i){return function(a){t(n,a,i)}},wp=function(t,n,i){t.done||(t.done=!0,i&&(t=i),t.value=n,t.state=2,_k(t,!0))},CR=function(t,n,i){if(!t.done){t.done=!0,i&&(t=i);try{if(t.facade===n)throw mk("Promise can't be resolved itself");var a=vk(n);a?mR(function(){var l={done:!1};try{Zm(a,n,Rp(CR,l,t),Rp(wp,l,t))}catch(u){wp(l,u,t)}}):(t.value=n,t.state=1,_k(t,!1))}catch(l){wp({done:!1},l,t)}}};fk&&(ER=(e0=function(t){tre(this,ER),Zne(t),Zm(pR,this);var n=vR(this);try{t(Rp(CR,n),Rp(wp,n))}catch(i){wp(n,i)}}).prototype,(pR=function(t){sre(this,{type:RE,done:!1,notified:!1,parent:!1,reactions:new ore,rejection:!1,state:0,value:void 0})}).prototype=Xne(ER,"then",function(t,n){var i=vR(this),a=yR(nre(this,e0));return i.parent=!0,a.ok=!fR(t)||t,a.fail=fR(n)&&n,a.domain=TE?SR.domain:void 0,i.state==0?i.reactions.add(a):mR(function(){Ek(a,i)}),a.promise}),lk=function(){var t=new pR,n=vR(t);this.promise=t,this.resolve=Rp(CR,n),this.reject=Rp(wp,n)},pk.f=yR=function(t){return t===e0||t===void 0?new lk(t):lre(t)}),Yne({global:!0,constructor:!0,wrap:!0,forced:fk},{Promise:e0}),Jne(e0,RE,!1,!0),Qne(RE);var Ck=Lt("iterator"),bk=!1;try{var pre=0,Tk={next:function(){return{done:!!pre++}},return:function(){bk=!0}};Tk[Ck]=function(){return this},Array.from(Tk,function(){throw 2})}catch{}var fre=qd,mre=function(t,n){if(!n&&!bk)return!1;var i=!1;try{var a={};a[Ck]=function(){return{next:function(){return{done:i=!0}}}},t(a)}catch{}return i},wE=Qm.CONSTRUCTOR||!mre(function(t){fre.all(t).then(void 0,function(){})}),gre=de,vre=rt,Ere=il,_re=Tp,Sre=Gm;ir({target:"Promise",stat:!0,forced:wE},{all:function(t){var n=this,i=Ere.f(n),a=i.resolve,l=i.reject,u=_re(function(){var h=vre(n.resolve),f=[],g=0,_=1;Sre(t,function(y){var T=g++,A=!1;_++,gre(h,n,y).then(function(D){A||(A=!0,f[T]=D,--_||a(f))},l)}),--_||a(f)});return u.error&&l(u.value),i.promise}});var yre=ir,Cre=Qm.CONSTRUCTOR;qd&&qd.prototype,yre({target:"Promise",proto:!0,forced:Cre,real:!0},{catch:function(t){return this.then(void 0,t)}});var bre=de,Tre=rt,Rre=il,wre=Tp,Ire=Gm;ir({target:"Promise",stat:!0,forced:wE},{race:function(t){var n=this,i=Rre.f(n),a=i.reject,l=wre(function(){var u=Tre(n.resolve);Ire(t,function(h){bre(u,n,h).then(i.resolve,a)})});return l.error&&a(l.value),i.promise}});var Are=de,Ore=il;ir({target:"Promise",stat:!0,forced:Qm.CONSTRUCTOR},{reject:function(t){var n=Ore.f(this);return Are(n.reject,void 0,t),n.promise}});var xre=na,Nre=je,Dre=il,Rk=function(t,n){if(xre(t),Nre(n)&&n.constructor===t)return n;var i=Dre.f(t);return(0,i.resolve)(n),i.promise},Pre=ir,Lre=qd,kre=Qm.CONSTRUCTOR,Mre=Rk,Fre=Wt("Promise"),Ure=!kre;Pre({target:"Promise",stat:!0,forced:!0},{resolve:function(t){return Mre(Ure&&this===Fre?Lre:this,t)}});var Bre=de,Vre=rt,jre=il,$re=Tp,Hre=Gm;ir({target:"Promise",stat:!0,forced:wE},{allSettled:function(t){var n=this,i=jre.f(n),a=i.resolve,l=i.reject,u=$re(function(){var h=Vre(n.resolve),f=[],g=0,_=1;Hre(t,function(y){var T=g++,A=!1;_++,Bre(h,n,y).then(function(D){A||(A=!0,f[T]={status:"fulfilled",value:D},--_||a(f))},function(D){A||(A=!0,f[T]={status:"rejected",reason:D},--_||a(f))})}),--_||a(f)});return u.error&&l(u.value),i.promise}});var Wre=de,zre=rt,Gre=Wt,Kre=il,qre=Tp,Yre=Gm,wk="No one promise resolved";ir({target:"Promise",stat:!0,forced:wE},{any:function(t){var n=this,i=Gre("AggregateError"),a=Kre.f(n),l=a.resolve,u=a.reject,h=qre(function(){var f=zre(n.resolve),g=[],_=0,y=1,T=!1;Yre(t,function(A){var D=_++,W=!1;y++,Wre(f,n,A).then(function(F){W||T||(T=!0,l(F))},function(F){W||T||(W=!0,g[D]=F,--y||u(new i(g,wk)))})}),--y||u(new i(g,wk))});return h.error&&u(h.value),a.promise}});var Xre=ir,bR=qd,Jre=d,Qre=Wt,Zre=Q,eie=QT,Ik=Rk,tie=bR&&bR.prototype;Xre({target:"Promise",proto:!0,real:!0,forced:!!bR&&Jre(function(){tie.finally.call({then:function(){}},function(){})})},{finally:function(t){var n=eie(this,Qre("Promise")),i=Zre(t);return this.then(i?function(a){return Ik(n,t()).then(function(){return a})}:t,i?function(a){return Ik(n,t()).then(function(){throw a})}:t)}});var TR=b,nie=ET,rie=ss,iie=xe,oie=TR("".charAt),Ak=TR("".charCodeAt),aie=TR("".slice),Ok=function(t){return function(n,i){var a,l,u=rie(iie(n)),h=nie(i),f=u.length;return h<0||h>=f?t?"":void 0:(a=Ak(u,h))<55296||a>56319||h+1===f||(l=Ak(u,h+1))<56320||l>57343?t?oie(u,h):a:t?aie(u,h,h+2):l-56320+(a-55296<<10)+65536}},RR={codeAt:Ok(!1),charAt:Ok(!0)},sie=RR.charAt,cie=ss,xk=Gd,lie=IL,Nk=KT,Dk="String Iterator",uie=xk.set,die=xk.getterFor(Dk);lie(String,"String",function(t){uie(this,{type:Dk,string:cie(t),index:0})},function(){var t,n=die(this),i=n.string,a=n.index;return a>=i.length?Nk(void 0,!0):(t=sie(i,a),n.index+=t.length,Nk(t,!1))});var hie=ct.Promise,pie={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},fie=I,mie=nl,gie=Ou,Pk=Wd,Lk=Lt("toStringTag");for(var wR in pie){var kk=fie[wR],IR=kk&&kk.prototype;IR&&mie(IR)!==Lk&&gie(IR,Lk,wR),Pk[wR]=Pk.Array}var Mk=hie,We=c(Mk);const Fk=j2;function Uk(t,n){const i=t&&t.navigator;if(!i.mediaDevices)return;const a=function(h){if(typeof h!="object"||h.mandatory||h.optional)return h;const f={};return Object.keys(h).forEach(g=>{if(g==="require"||g==="advanced"||g==="mediaSource")return;const _=typeof h[g]=="object"?h[g]:{ideal:h[g]};_.exact!==void 0&&typeof _.exact=="number"&&(_.min=_.max=_.exact);const y=function(T,A){return T?T+A.charAt(0).toUpperCase()+A.slice(1):A==="deviceId"?"sourceId":A};if(_.ideal!==void 0){f.optional=f.optional||[];let T={};typeof _.ideal=="number"?(T[y("min",g)]=_.ideal,f.optional.push(T),T={},T[y("max",g)]=_.ideal,f.optional.push(T)):(T[y("",g)]=_.ideal,f.optional.push(T))}_.exact!==void 0&&typeof _.exact!="number"?(f.mandatory=f.mandatory||{},f.mandatory[y("",g)]=_.exact):["min","max"].forEach(T=>{_[T]!==void 0&&(f.mandatory=f.mandatory||{},f.mandatory[y(T,g)]=_[T])})}),h.advanced&&(f.optional=(f.optional||[]).concat(h.advanced)),f},l=function(h,f){if(n.version>=61)return f(h);if((h=JSON.parse(JSON.stringify(h)))&&typeof h.audio=="object"){const g=function(_,y,T){y in _&&!(T in _)&&(_[T]=_[y],delete _[y])};g((h=JSON.parse(JSON.stringify(h))).audio,"autoGainControl","googAutoGainControl"),g(h.audio,"noiseSuppression","googNoiseSuppression"),h.audio=a(h.audio)}if(h&&typeof h.video=="object"){let g=h.video.facingMode;g=g&&(typeof g=="object"?g:{ideal:g});const _=n.version<66;if(g&&(g.exact==="user"||g.exact==="environment"||g.ideal==="user"||g.ideal==="environment")&&(!i.mediaDevices.getSupportedConstraints||!i.mediaDevices.getSupportedConstraints().facingMode||_)){let y;if(delete h.video.facingMode,g.exact==="environment"||g.ideal==="environment"?y=["back","rear"]:g.exact!=="user"&&g.ideal!=="user"||(y=["front"]),y)return i.mediaDevices.enumerateDevices().then(T=>{let A=(T=T.filter(D=>D.kind==="videoinput")).find(D=>y.some(W=>{var F;return Ye(F=D.label.toLowerCase()).call(F,W)}));return!A&&T.length&&Ye(y).call(y,"back")&&(A=T[T.length-1]),A&&(h.video.deviceId=g.exact?{exact:A.deviceId}:{ideal:A.deviceId}),h.video=a(h.video),Fk("chrome: "+JSON.stringify(h)),f(h)})}h.video=a(h.video)}return Fk("chrome: "+JSON.stringify(h)),f(h)},u=function(h){return n.version>=64?h:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[h.name]||h.name,message:h.message,constraint:h.constraint||h.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(i.getUserMedia=(function(h,f,g){l(h,_=>{i.webkitGetUserMedia(_,f,y=>{g&&g(u(y))})})}).bind(i),i.mediaDevices.getUserMedia){const h=i.mediaDevices.getUserMedia.bind(i.mediaDevices);i.mediaDevices.getUserMedia=function(f){return l(f,g=>h(g).then(_=>{if(g.audio&&!_.getAudioTracks().length||g.video&&!_.getVideoTracks().length)throw _.getTracks().forEach(y=>{y.stop()}),new DOMException("","NotFoundError");return _},_=>We.reject(u(_))))}}}function Bk(t){t.MediaStream=t.MediaStream||t.webkitMediaStream}function Vk(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("ontrack"in t.RTCPeerConnection.prototype)){Object.defineProperty(t.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(i){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=i)},enumerable:!0,configurable:!0});const n=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=i=>{i.stream.addEventListener("addtrack",a=>{let l;l=t.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(h=>h.track&&h.track.id===a.track.id):{track:a.track};const u=new Event("track");u.track=a.track,u.receiver=l,u.transceiver={receiver:l},u.streams=[i.stream],this.dispatchEvent(u)}),i.stream.getTracks().forEach(a=>{let l;l=t.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(h=>h.track&&h.track.id===a.id):{track:a};const u=new Event("track");u.track=a,u.receiver=l,u.transceiver={receiver:l},u.streams=[i.stream],this.dispatchEvent(u)})},this.addEventListener("addstream",this._ontrackpoly)),n.apply(this,arguments)}}else Hd(t,"track",n=>(n.transceiver||Object.defineProperty(n,"transceiver",{value:{receiver:n.receiver}}),n))}function jk(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("getSenders"in t.RTCPeerConnection.prototype)&&"createDTMFSender"in t.RTCPeerConnection.prototype){const n=function(l,u){return{track:u,get dtmf(){return this._dtmf===void 0&&(u.kind==="audio"?this._dtmf=l.createDTMFSender(u):this._dtmf=null),this._dtmf},_pc:l}};if(!t.RTCPeerConnection.prototype.getSenders){t.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const l=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(h,f){let g=l.apply(this,arguments);return g||(g=n(this,h),this._senders.push(g)),g};const u=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(h){u.apply(this,arguments);const f=this._senders.indexOf(h);f!==-1&&this._senders.splice(f,1)}}const i=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(l){this._senders=this._senders||[],i.apply(this,[l]),l.getTracks().forEach(u=>{this._senders.push(n(this,u))})};const a=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(l){this._senders=this._senders||[],a.apply(this,[l]),l.getTracks().forEach(u=>{const h=this._senders.find(f=>f.track===u);h&&this._senders.splice(this._senders.indexOf(h),1)})}}else if(typeof t=="object"&&t.RTCPeerConnection&&"getSenders"in t.RTCPeerConnection.prototype&&"createDTMFSender"in t.RTCPeerConnection.prototype&&t.RTCRtpSender&&!("dtmf"in t.RTCRtpSender.prototype)){const n=t.RTCPeerConnection.prototype.getSenders;t.RTCPeerConnection.prototype.getSenders=function(){const i=n.apply(this,[]);return i.forEach(a=>a._pc=this),i},Object.defineProperty(t.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function $k(t){if(!t.RTCPeerConnection)return;const n=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){const[i,a,l]=arguments;if(arguments.length>0&&typeof i=="function")return n.apply(this,arguments);if(n.length===0&&(arguments.length===0||typeof i!="function"))return n.apply(this,[]);const u=function(f){const g={};return f.result().forEach(_=>{const y={id:_.id,timestamp:_.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[_.type]||_.type};_.names().forEach(T=>{y[T]=_.stat(T)}),g[y.id]=y}),g},h=function(f){return new Map(Object.keys(f).map(g=>[g,f[g]]))};if(arguments.length>=2){const f=function(g){a(h(u(g)))};return n.apply(this,[f,i])}return new We((f,g)=>{n.apply(this,[function(_){f(h(u(_)))},g])}).then(a,l)}}function Hk(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender&&t.RTCRtpReceiver))return;if(!("getStats"in t.RTCRtpSender.prototype)){const i=t.RTCPeerConnection.prototype.getSenders;i&&(t.RTCPeerConnection.prototype.getSenders=function(){const l=i.apply(this,[]);return l.forEach(u=>u._pc=this),l});const a=t.RTCPeerConnection.prototype.addTrack;a&&(t.RTCPeerConnection.prototype.addTrack=function(){const l=a.apply(this,arguments);return l._pc=this,l}),t.RTCRtpSender.prototype.getStats=function(){const l=this;return this._pc.getStats().then(u=>W2(u,l.track,!0))}}if(!("getStats"in t.RTCRtpReceiver.prototype)){const i=t.RTCPeerConnection.prototype.getReceivers;i&&(t.RTCPeerConnection.prototype.getReceivers=function(){const a=i.apply(this,[]);return a.forEach(l=>l._pc=this),a}),Hd(t,"track",a=>(a.receiver._pc=a.srcElement,a)),t.RTCRtpReceiver.prototype.getStats=function(){const a=this;return this._pc.getStats().then(l=>W2(l,a.track,!1))}}if(!("getStats"in t.RTCRtpSender.prototype)||!("getStats"in t.RTCRtpReceiver.prototype))return;const n=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof t.MediaStreamTrack){const i=arguments[0];let a,l,u;return this.getSenders().forEach(h=>{h.track===i&&(a?u=!0:a=h)}),this.getReceivers().forEach(h=>(h.track===i&&(l?u=!0:l=h),h.track===i)),u||a&&l?We.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):a?a.getStats():l?l.getStats():We.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return n.apply(this,arguments)}}function Wk(t){t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(u=>this._shimmedLocalStreams[u][0])};const n=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(u,h){if(!h)return n.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const f=n.apply(this,arguments);return this._shimmedLocalStreams[h.id]?this._shimmedLocalStreams[h.id].indexOf(f)===-1&&this._shimmedLocalStreams[h.id].push(f):this._shimmedLocalStreams[h.id]=[h,f],f};const i=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(u){this._shimmedLocalStreams=this._shimmedLocalStreams||{},u.getTracks().forEach(g=>{if(this.getSenders().find(y=>y.track===g))throw new DOMException("Track already exists.","InvalidAccessError")});const h=this.getSenders();i.apply(this,arguments);const f=this.getSenders().filter(g=>h.indexOf(g)===-1);this._shimmedLocalStreams[u.id]=[u].concat(f)};const a=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(u){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[u.id],a.apply(this,arguments)};const l=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(u){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},u&&Object.keys(this._shimmedLocalStreams).forEach(h=>{const f=this._shimmedLocalStreams[h].indexOf(u);f!==-1&&this._shimmedLocalStreams[h].splice(f,1),this._shimmedLocalStreams[h].length===1&&delete this._shimmedLocalStreams[h]}),l.apply(this,arguments)}}function zk(t,n){if(!t.RTCPeerConnection)return;if(t.RTCPeerConnection.prototype.addTrack&&n.version>=65)return Wk(t);const i=t.RTCPeerConnection.prototype.getLocalStreams;t.RTCPeerConnection.prototype.getLocalStreams=function(){const g=i.apply(this);return this._reverseStreams=this._reverseStreams||{},g.map(_=>this._reverseStreams[_.id])};const a=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(g){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},g.getTracks().forEach(_=>{if(this.getSenders().find(T=>T.track===_))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[g.id]){const _=new t.MediaStream(g.getTracks());this._streams[g.id]=_,this._reverseStreams[_.id]=g,g=_}a.apply(this,[g])};const l=t.RTCPeerConnection.prototype.removeStream;function u(g,_){let y=_.sdp;return Object.keys(g._reverseStreams||[]).forEach(T=>{const A=g._reverseStreams[T],D=g._streams[A.id];y=y.replace(new RegExp(D.id,"g"),A.id)}),new RTCSessionDescription({type:_.type,sdp:y})}t.RTCPeerConnection.prototype.removeStream=function(g){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},l.apply(this,[this._streams[g.id]||g]),delete this._reverseStreams[this._streams[g.id]?this._streams[g.id].id:g.id],delete this._streams[g.id]},t.RTCPeerConnection.prototype.addTrack=function(g,_){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const y=[].slice.call(arguments,1);if(y.length!==1||!y[0].getTracks().find(D=>D===g))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(D=>D.track===g))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const A=this._streams[_.id];if(A)A.addTrack(g),We.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const D=new t.MediaStream([g]);this._streams[_.id]=D,this._reverseStreams[D.id]=_,this.addStream(D)}return this.getSenders().find(D=>D.track===g)},["createOffer","createAnswer"].forEach(function(g){const _=t.RTCPeerConnection.prototype[g],y={[g](){const T=arguments;return arguments.length&&typeof arguments[0]=="function"?_.apply(this,[A=>{const D=u(this,A);T[0].apply(null,[D])},A=>{T[1]&&T[1].apply(null,A)},arguments[2]]):_.apply(this,arguments).then(A=>u(this,A))}};t.RTCPeerConnection.prototype[g]=y[g]});const h=t.RTCPeerConnection.prototype.setLocalDescription;t.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=function(g,_){let y=_.sdp;return Object.keys(g._reverseStreams||[]).forEach(T=>{const A=g._reverseStreams[T],D=g._streams[A.id];y=y.replace(new RegExp(A.id,"g"),D.id)}),new RTCSessionDescription({type:_.type,sdp:y})}(this,arguments[0]),h.apply(this,arguments)):h.apply(this,arguments)};const f=Object.getOwnPropertyDescriptor(t.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(t.RTCPeerConnection.prototype,"localDescription",{get(){const g=f.get.apply(this);return g.type===""?g:u(this,g)}}),t.RTCPeerConnection.prototype.removeTrack=function(g){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!g._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(g._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let _;this._streams=this._streams||{},Object.keys(this._streams).forEach(y=>{this._streams[y].getTracks().find(T=>g.track===T)&&(_=this._streams[y])}),_&&(_.getTracks().length===1?this.removeStream(this._reverseStreams[_.id]):_.removeTrack(g.track),this.dispatchEvent(new Event("negotiationneeded")))}}function AR(t,n){!t.RTCPeerConnection&&t.webkitRTCPeerConnection&&(t.RTCPeerConnection=t.webkitRTCPeerConnection),t.RTCPeerConnection&&n.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){const a=t.RTCPeerConnection.prototype[i],l={[i](){return arguments[0]=new(i==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),a.apply(this,arguments)}};t.RTCPeerConnection.prototype[i]=l[i]})}function Gk(t,n){Hd(t,"negotiationneeded",i=>{const a=i.target;if(!(n.version<72||a.getConfiguration&&a.getConfiguration().sdpSemantics==="plan-b")||a.signalingState==="stable")return i})}var Kk=Object.freeze({__proto__:null,fixNegotiationNeeded:Gk,shimAddTrackRemoveTrack:zk,shimAddTrackRemoveTrackWithNative:Wk,shimGetDisplayMedia:function(t,n){t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||t.navigator.mediaDevices&&(typeof n=="function"?t.navigator.mediaDevices.getDisplayMedia=function(i){return n(i).then(a=>{const l=i.video&&i.video.width,u=i.video&&i.video.height,h=i.video&&i.video.frameRate;return i.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:a,maxFrameRate:h||3}},l&&(i.video.mandatory.maxWidth=l),u&&(i.video.mandatory.maxHeight=u),t.navigator.mediaDevices.getUserMedia(i)})}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))},shimGetSendersWithDtmf:jk,shimGetStats:$k,shimGetUserMedia:Uk,shimMediaStream:Bk,shimOnTrack:Vk,shimPeerConnection:AR,shimSenderReceiverGetStats:Hk});function qk(t,n){const i=t&&t.navigator,a=t&&t.MediaStreamTrack;if(i.getUserMedia=function(l,u,h){RT("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),i.mediaDevices.getUserMedia(l).then(u,h)},!(n.version>55&&"autoGainControl"in i.mediaDevices.getSupportedConstraints())){const l=function(h,f,g){f in h&&!(g in h)&&(h[g]=h[f],delete h[f])},u=i.mediaDevices.getUserMedia.bind(i.mediaDevices);if(i.mediaDevices.getUserMedia=function(h){return typeof h=="object"&&typeof h.audio=="object"&&(h=JSON.parse(JSON.stringify(h)),l(h.audio,"autoGainControl","mozAutoGainControl"),l(h.audio,"noiseSuppression","mozNoiseSuppression")),u(h)},a&&a.prototype.getSettings){const h=a.prototype.getSettings;a.prototype.getSettings=function(){const f=h.apply(this,arguments);return l(f,"mozAutoGainControl","autoGainControl"),l(f,"mozNoiseSuppression","noiseSuppression"),f}}if(a&&a.prototype.applyConstraints){const h=a.prototype.applyConstraints;a.prototype.applyConstraints=function(f){return this.kind==="audio"&&typeof f=="object"&&(f=JSON.parse(JSON.stringify(f)),l(f,"autoGainControl","mozAutoGainControl"),l(f,"noiseSuppression","mozNoiseSuppression")),h.apply(this,[f])}}}}function Yk(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function OR(t,n){if(typeof t!="object"||!t.RTCPeerConnection&&!t.mozRTCPeerConnection)return;!t.RTCPeerConnection&&t.mozRTCPeerConnection&&(t.RTCPeerConnection=t.mozRTCPeerConnection),n.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(l){const u=t.RTCPeerConnection.prototype[l],h={[l](){return arguments[0]=new(l==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),u.apply(this,arguments)}};t.RTCPeerConnection.prototype[l]=h[l]});const i={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},a=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){const[l,u,h]=arguments;return a.apply(this,[l||null]).then(f=>{if(n.version<53&&!u)try{f.forEach(g=>{g.type=i[g.type]||g.type})}catch(g){if(g.name!=="TypeError")throw g;f.forEach((_,y)=>{f.set(y,Object.assign({},_,{type:i[_.type]||_.type}))})}return f}).then(u,h)}}function Xk(t){if(typeof t!="object"||!t.RTCPeerConnection||!t.RTCRtpSender||t.RTCRtpSender&&"getStats"in t.RTCRtpSender.prototype)return;const n=t.RTCPeerConnection.prototype.getSenders;n&&(t.RTCPeerConnection.prototype.getSenders=function(){const a=n.apply(this,[]);return a.forEach(l=>l._pc=this),a});const i=t.RTCPeerConnection.prototype.addTrack;i&&(t.RTCPeerConnection.prototype.addTrack=function(){const a=i.apply(this,arguments);return a._pc=this,a}),t.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):We.resolve(new Map)}}function Jk(t){if(typeof t!="object"||!t.RTCPeerConnection||!t.RTCRtpSender||t.RTCRtpSender&&"getStats"in t.RTCRtpReceiver.prototype)return;const n=t.RTCPeerConnection.prototype.getReceivers;n&&(t.RTCPeerConnection.prototype.getReceivers=function(){const i=n.apply(this,[]);return i.forEach(a=>a._pc=this),i}),Hd(t,"track",i=>(i.receiver._pc=i.srcElement,i)),t.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function Qk(t){t.RTCPeerConnection&&!("removeStream"in t.RTCPeerConnection.prototype)&&(t.RTCPeerConnection.prototype.removeStream=function(n){RT("removeStream","removeTrack"),this.getSenders().forEach(i=>{var a;i.track&&Ye(a=n.getTracks()).call(a,i.track)&&this.removeTrack(i)})})}function Zk(t){t.DataChannel&&!t.RTCDataChannel&&(t.RTCDataChannel=t.DataChannel)}function eM(t){if(typeof t!="object"||!t.RTCPeerConnection)return;const n=t.RTCPeerConnection.prototype.addTransceiver;n&&(t.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let i=arguments[1]&&arguments[1].sendEncodings;i===void 0&&(i=[]),i=[...i];const a=i.length>0;a&&i.forEach(u=>{if("rid"in u&&!/^[a-z0-9]{0,16}$/i.test(u.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in u&&!(parseFloat(u.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in u&&!(parseFloat(u.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const l=n.apply(this,arguments);if(a){const{sender:u}=l,h=u.getParameters();(!("encodings"in h)||h.encodings.length===1&&Object.keys(h.encodings[0]).length===0)&&(h.encodings=i,u.sendEncodings=i,this.setParametersPromises.push(u.setParameters(h).then(()=>{delete u.sendEncodings}).catch(()=>{delete u.sendEncodings})))}return l})}function tM(t){if(typeof t!="object"||!t.RTCRtpSender)return;const n=t.RTCRtpSender.prototype.getParameters;n&&(t.RTCRtpSender.prototype.getParameters=function(){const i=n.apply(this,arguments);return"encodings"in i||(i.encodings=[].concat(this.sendEncodings||[{}])),i})}function nM(t){if(typeof t!="object"||!t.RTCPeerConnection)return;const n=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?We.all(this.setParametersPromises).then(()=>n.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):n.apply(this,arguments)}}function rM(t){if(typeof t!="object"||!t.RTCPeerConnection)return;const n=t.RTCPeerConnection.prototype.createAnswer;t.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?We.all(this.setParametersPromises).then(()=>n.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):n.apply(this,arguments)}}var iM=Object.freeze({__proto__:null,shimAddTransceiver:eM,shimCreateAnswer:rM,shimCreateOffer:nM,shimGetDisplayMedia:function(t,n){t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||t.navigator.mediaDevices&&(t.navigator.mediaDevices.getDisplayMedia=function(i){if(!i||!i.video){const a=new DOMException("getDisplayMedia without video constraints is undefined");return a.name="NotFoundError",a.code=8,We.reject(a)}return i.video===!0?i.video={mediaSource:n}:i.video.mediaSource=n,t.navigator.mediaDevices.getUserMedia(i)})},shimGetParameters:tM,shimGetUserMedia:qk,shimOnTrack:Yk,shimPeerConnection:OR,shimRTCDataChannel:Zk,shimReceiverGetStats:Jk,shimRemoveStream:Qk,shimSenderGetStats:Xk});function oM(t){if(typeof t=="object"&&t.RTCPeerConnection){if("getLocalStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in t.RTCPeerConnection.prototype)){const n=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addStream=function(i){var a;this._localStreams||(this._localStreams=[]),Ye(a=this._localStreams).call(a,i)||this._localStreams.push(i),i.getAudioTracks().forEach(l=>n.call(this,l,i)),i.getVideoTracks().forEach(l=>n.call(this,l,i))},t.RTCPeerConnection.prototype.addTrack=function(i){for(var a=arguments.length,l=new Array(a>1?a-1:0),u=1;u<a;u++)l[u-1]=arguments[u];return l&&l.forEach(h=>{var f;this._localStreams?Ye(f=this._localStreams).call(f,h)||this._localStreams.push(h):this._localStreams=[h]}),n.apply(this,arguments)}}"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const i=this._localStreams.indexOf(n);if(i===-1)return;this._localStreams.splice(i,1);const a=n.getTracks();this.getSenders().forEach(l=>{Ye(a).call(a,l.track)&&this.removeTrack(l)})})}}function aM(t){if(typeof t=="object"&&t.RTCPeerConnection&&("getRemoteStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in t.RTCPeerConnection.prototype))){Object.defineProperty(t.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(i){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=i),this.addEventListener("track",this._onaddstreampoly=a=>{a.streams.forEach(l=>{var u;if(this._remoteStreams||(this._remoteStreams=[]),Ye(u=this._remoteStreams).call(u,l))return;this._remoteStreams.push(l);const h=new Event("addstream");h.stream=l,this.dispatchEvent(h)})})}});const n=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){const i=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(a){a.streams.forEach(l=>{if(i._remoteStreams||(i._remoteStreams=[]),i._remoteStreams.indexOf(l)>=0)return;i._remoteStreams.push(l);const u=new Event("addstream");u.stream=l,i.dispatchEvent(u)})}),n.apply(i,arguments)}}}function sM(t){if(typeof t!="object"||!t.RTCPeerConnection)return;const n=t.RTCPeerConnection.prototype,i=n.createOffer,a=n.createAnswer,l=n.setLocalDescription,u=n.setRemoteDescription,h=n.addIceCandidate;n.createOffer=function(g,_){const y=arguments.length>=2?arguments[2]:arguments[0],T=i.apply(this,[y]);return _?(T.then(g,_),We.resolve()):T},n.createAnswer=function(g,_){const y=arguments.length>=2?arguments[2]:arguments[0],T=a.apply(this,[y]);return _?(T.then(g,_),We.resolve()):T};let f=function(g,_,y){const T=l.apply(this,[g]);return y?(T.then(_,y),We.resolve()):T};n.setLocalDescription=f,f=function(g,_,y){const T=u.apply(this,[g]);return y?(T.then(_,y),We.resolve()):T},n.setRemoteDescription=f,f=function(g,_,y){const T=h.apply(this,[g]);return y?(T.then(_,y),We.resolve()):T},n.addIceCandidate=f}function cM(t){const n=t&&t.navigator;if(n.mediaDevices&&n.mediaDevices.getUserMedia){const i=n.mediaDevices,a=i.getUserMedia.bind(i);n.mediaDevices.getUserMedia=l=>a(lM(l))}!n.getUserMedia&&n.mediaDevices&&n.mediaDevices.getUserMedia&&(n.getUserMedia=(function(i,a,l){n.mediaDevices.getUserMedia(i).then(a,l)}).bind(n))}function lM(t){return t&&t.video!==void 0?Object.assign({},t,{video:H2(t.video)}):t}function uM(t){if(!t.RTCPeerConnection)return;const n=t.RTCPeerConnection;t.RTCPeerConnection=function(i,a){if(i&&i.iceServers){const l=[];for(let u=0;u<i.iceServers.length;u++){let h=i.iceServers[u];!h.hasOwnProperty("urls")&&h.hasOwnProperty("url")?(RT("RTCIceServer.url","RTCIceServer.urls"),h=JSON.parse(JSON.stringify(h)),h.urls=h.url,delete h.url,l.push(h)):l.push(i.iceServers[u])}i.iceServers=l}return new n(i,a)},t.RTCPeerConnection.prototype=n.prototype,"generateCertificate"in n&&Object.defineProperty(t.RTCPeerConnection,"generateCertificate",{get:()=>n.generateCertificate})}function dM(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function hM(t){const n=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(i){if(i){i.offerToReceiveAudio!==void 0&&(i.offerToReceiveAudio=!!i.offerToReceiveAudio);const a=this.getTransceivers().find(u=>u.receiver.track.kind==="audio");i.offerToReceiveAudio===!1&&a?a.direction==="sendrecv"?a.setDirection?a.setDirection("sendonly"):a.direction="sendonly":a.direction==="recvonly"&&(a.setDirection?a.setDirection("inactive"):a.direction="inactive"):i.offerToReceiveAudio!==!0||a||this.addTransceiver("audio",{direction:"recvonly"}),i.offerToReceiveVideo!==void 0&&(i.offerToReceiveVideo=!!i.offerToReceiveVideo);const l=this.getTransceivers().find(u=>u.receiver.track.kind==="video");i.offerToReceiveVideo===!1&&l?l.direction==="sendrecv"?l.setDirection?l.setDirection("sendonly"):l.direction="sendonly":l.direction==="recvonly"&&(l.setDirection?l.setDirection("inactive"):l.direction="inactive"):i.offerToReceiveVideo!==!0||l||this.addTransceiver("video",{direction:"recvonly"})}return n.apply(this,arguments)}}function pM(t){typeof t!="object"||t.AudioContext||(t.AudioContext=t.webkitAudioContext)}var fM=Object.freeze({__proto__:null,shimAudioContext:pM,shimCallbacksAPI:sM,shimConstraints:lM,shimCreateOfferLegacy:hM,shimGetUserMedia:cM,shimLocalStreamsAPI:oM,shimRTCIceServerUrls:uM,shimRemoteStreamsAPI:aM,shimTrackEventTransceiver:dM}),mM=`	
\v\f\r                　\u2028\u2029\uFEFF`,vie=xe,Eie=ss,xR=mM,gM=b("".replace),_ie=RegExp("^["+xR+"]+"),Sie=RegExp("(^|[^"+xR+"])["+xR+"]+$"),NR=function(t){return function(n){var i=Eie(vie(n));return 1&t&&(i=gM(i,_ie,"")),2&t&&(i=gM(i,Sie,"$1")),i}},yie={start:NR(1),end:NR(2),trim:NR(3)},Cie=EL.PROPER,bie=d,vM=mM,Tie=yie.trim;ir({target:"String",proto:!0,forced:function(t){return bie(function(){return!!vM[t]()||"​᠎"[t]()!=="​᠎"||Cie&&vM[t].name!==t})}("trim")},{trim:function(){return Tie(this)}});var Rie=ks("String").trim,wie=R,Iie=Rie,DR=String.prototype,Aie=function(t){var n=t.trim;return typeof t=="string"||t===DR||wie(DR,t)&&n===DR.trim?Iie:n},go=c(Aie),EM={exports:{}};(function(t){const n={generateIdentifier:function(){return Math.random().toString(36).substring(2,12)}};n.localCName=n.generateIdentifier(),n.splitLines=function(i){return i.trim().split(`
`).map(a=>a.trim())},n.splitSections=function(i){return i.split(`
m=`).map((a,l)=>(l>0?"m="+a:a).trim()+`\r
`)},n.getDescription=function(i){const a=n.splitSections(i);return a&&a[0]},n.getMediaSections=function(i){const a=n.splitSections(i);return a.shift(),a},n.matchPrefix=function(i,a){return n.splitLines(i).filter(l=>l.indexOf(a)===0)},n.parseCandidate=function(i){let a;a=i.indexOf("a=candidate:")===0?i.substring(12).split(" "):i.substring(10).split(" ");const l={foundation:a[0],component:{1:"rtp",2:"rtcp"}[a[1]]||a[1],protocol:a[2].toLowerCase(),priority:parseInt(a[3],10),ip:a[4],address:a[4],port:parseInt(a[5],10),type:a[7]};for(let u=8;u<a.length;u+=2)switch(a[u]){case"raddr":l.relatedAddress=a[u+1];break;case"rport":l.relatedPort=parseInt(a[u+1],10);break;case"tcptype":l.tcpType=a[u+1];break;case"ufrag":l.ufrag=a[u+1],l.usernameFragment=a[u+1];break;default:l[a[u]]===void 0&&(l[a[u]]=a[u+1])}return l},n.writeCandidate=function(i){const a=[];a.push(i.foundation);const l=i.component;l==="rtp"?a.push(1):l==="rtcp"?a.push(2):a.push(l),a.push(i.protocol.toUpperCase()),a.push(i.priority),a.push(i.address||i.ip),a.push(i.port);const u=i.type;return a.push("typ"),a.push(u),u!=="host"&&i.relatedAddress&&i.relatedPort&&(a.push("raddr"),a.push(i.relatedAddress),a.push("rport"),a.push(i.relatedPort)),i.tcpType&&i.protocol.toLowerCase()==="tcp"&&(a.push("tcptype"),a.push(i.tcpType)),(i.usernameFragment||i.ufrag)&&(a.push("ufrag"),a.push(i.usernameFragment||i.ufrag)),"candidate:"+a.join(" ")},n.parseIceOptions=function(i){return i.substring(14).split(" ")},n.parseRtpMap=function(i){let a=i.substring(9).split(" ");const l={payloadType:parseInt(a.shift(),10)};return a=a[0].split("/"),l.name=a[0],l.clockRate=parseInt(a[1],10),l.channels=a.length===3?parseInt(a[2],10):1,l.numChannels=l.channels,l},n.writeRtpMap=function(i){let a=i.payloadType;i.preferredPayloadType!==void 0&&(a=i.preferredPayloadType);const l=i.channels||i.numChannels||1;return"a=rtpmap:"+a+" "+i.name+"/"+i.clockRate+(l!==1?"/"+l:"")+`\r
`},n.parseExtmap=function(i){const a=i.substring(9).split(" ");return{id:parseInt(a[0],10),direction:a[0].indexOf("/")>0?a[0].split("/")[1]:"sendrecv",uri:a[1],attributes:a.slice(2).join(" ")}},n.writeExtmap=function(i){return"a=extmap:"+(i.id||i.preferredId)+(i.direction&&i.direction!=="sendrecv"?"/"+i.direction:"")+" "+i.uri+(i.attributes?" "+i.attributes:"")+`\r
`},n.parseFmtp=function(i){const a={};let l;const u=i.substring(i.indexOf(" ")+1).split(";");for(let h=0;h<u.length;h++)l=u[h].trim().split("="),a[l[0].trim()]=l[1];return a},n.writeFmtp=function(i){let a="",l=i.payloadType;if(i.preferredPayloadType!==void 0&&(l=i.preferredPayloadType),i.parameters&&Object.keys(i.parameters).length){const u=[];Object.keys(i.parameters).forEach(h=>{i.parameters[h]!==void 0?u.push(h+"="+i.parameters[h]):u.push(h)}),a+="a=fmtp:"+l+" "+u.join(";")+`\r
`}return a},n.parseRtcpFb=function(i){const a=i.substring(i.indexOf(" ")+1).split(" ");return{type:a.shift(),parameter:a.join(" ")}},n.writeRtcpFb=function(i){let a="",l=i.payloadType;return i.preferredPayloadType!==void 0&&(l=i.preferredPayloadType),i.rtcpFeedback&&i.rtcpFeedback.length&&i.rtcpFeedback.forEach(u=>{a+="a=rtcp-fb:"+l+" "+u.type+(u.parameter&&u.parameter.length?" "+u.parameter:"")+`\r
`}),a},n.parseSsrcMedia=function(i){const a=i.indexOf(" "),l={ssrc:parseInt(i.substring(7,a),10)},u=i.indexOf(":",a);return u>-1?(l.attribute=i.substring(a+1,u),l.value=i.substring(u+1)):l.attribute=i.substring(a+1),l},n.parseSsrcGroup=function(i){const a=i.substring(13).split(" ");return{semantics:a.shift(),ssrcs:a.map(l=>parseInt(l,10))}},n.getMid=function(i){const a=n.matchPrefix(i,"a=mid:")[0];if(a)return a.substring(6)},n.parseFingerprint=function(i){const a=i.substring(14).split(" ");return{algorithm:a[0].toLowerCase(),value:a[1].toUpperCase()}},n.getDtlsParameters=function(i,a){return{role:"auto",fingerprints:n.matchPrefix(i+a,"a=fingerprint:").map(n.parseFingerprint)}},n.writeDtlsParameters=function(i,a){let l="a=setup:"+a+`\r
`;return i.fingerprints.forEach(u=>{l+="a=fingerprint:"+u.algorithm+" "+u.value+`\r
`}),l},n.parseCryptoLine=function(i){const a=i.substring(9).split(" ");return{tag:parseInt(a[0],10),cryptoSuite:a[1],keyParams:a[2],sessionParams:a.slice(3)}},n.writeCryptoLine=function(i){return"a=crypto:"+i.tag+" "+i.cryptoSuite+" "+(typeof i.keyParams=="object"?n.writeCryptoKeyParams(i.keyParams):i.keyParams)+(i.sessionParams?" "+i.sessionParams.join(" "):"")+`\r
`},n.parseCryptoKeyParams=function(i){if(i.indexOf("inline:")!==0)return null;const a=i.substring(7).split("|");return{keyMethod:"inline",keySalt:a[0],lifeTime:a[1],mkiValue:a[2]?a[2].split(":")[0]:void 0,mkiLength:a[2]?a[2].split(":")[1]:void 0}},n.writeCryptoKeyParams=function(i){return i.keyMethod+":"+i.keySalt+(i.lifeTime?"|"+i.lifeTime:"")+(i.mkiValue&&i.mkiLength?"|"+i.mkiValue+":"+i.mkiLength:"")},n.getCryptoParameters=function(i,a){return n.matchPrefix(i+a,"a=crypto:").map(n.parseCryptoLine)},n.getIceParameters=function(i,a){const l=n.matchPrefix(i+a,"a=ice-ufrag:")[0],u=n.matchPrefix(i+a,"a=ice-pwd:")[0];return l&&u?{usernameFragment:l.substring(12),password:u.substring(10)}:null},n.writeIceParameters=function(i){let a="a=ice-ufrag:"+i.usernameFragment+`\r
a=ice-pwd:`+i.password+`\r
`;return i.iceLite&&(a+=`a=ice-lite\r
`),a},n.parseRtpParameters=function(i){const a={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},l=n.splitLines(i)[0].split(" ");a.profile=l[2];for(let h=3;h<l.length;h++){const f=l[h],g=n.matchPrefix(i,"a=rtpmap:"+f+" ")[0];if(g){const _=n.parseRtpMap(g),y=n.matchPrefix(i,"a=fmtp:"+f+" ");switch(_.parameters=y.length?n.parseFmtp(y[0]):{},_.rtcpFeedback=n.matchPrefix(i,"a=rtcp-fb:"+f+" ").map(n.parseRtcpFb),a.codecs.push(_),_.name.toUpperCase()){case"RED":case"ULPFEC":a.fecMechanisms.push(_.name.toUpperCase())}}}n.matchPrefix(i,"a=extmap:").forEach(h=>{a.headerExtensions.push(n.parseExtmap(h))});const u=n.matchPrefix(i,"a=rtcp-fb:* ").map(n.parseRtcpFb);return a.codecs.forEach(h=>{u.forEach(f=>{h.rtcpFeedback.find(g=>g.type===f.type&&g.parameter===f.parameter)||h.rtcpFeedback.push(f)})}),a},n.writeRtpDescription=function(i,a){let l="";l+="m="+i+" ",l+=a.codecs.length>0?"9":"0",l+=" "+(a.profile||"UDP/TLS/RTP/SAVPF")+" ",l+=a.codecs.map(h=>h.preferredPayloadType!==void 0?h.preferredPayloadType:h.payloadType).join(" ")+`\r
`,l+=`c=IN IP4 0.0.0.0\r
`,l+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,a.codecs.forEach(h=>{l+=n.writeRtpMap(h),l+=n.writeFmtp(h),l+=n.writeRtcpFb(h)});let u=0;return a.codecs.forEach(h=>{h.maxptime>u&&(u=h.maxptime)}),u>0&&(l+="a=maxptime:"+u+`\r
`),a.headerExtensions&&a.headerExtensions.forEach(h=>{l+=n.writeExtmap(h)}),l},n.parseRtpEncodingParameters=function(i){const a=[],l=n.parseRtpParameters(i),u=l.fecMechanisms.indexOf("RED")!==-1,h=l.fecMechanisms.indexOf("ULPFEC")!==-1,f=n.matchPrefix(i,"a=ssrc:").map(A=>n.parseSsrcMedia(A)).filter(A=>A.attribute==="cname"),g=f.length>0&&f[0].ssrc;let _;const y=n.matchPrefix(i,"a=ssrc-group:FID").map(A=>A.substring(17).split(" ").map(D=>parseInt(D,10)));y.length>0&&y[0].length>1&&y[0][0]===g&&(_=y[0][1]),l.codecs.forEach(A=>{if(A.name.toUpperCase()==="RTX"&&A.parameters.apt){let D={ssrc:g,codecPayloadType:parseInt(A.parameters.apt,10)};g&&_&&(D.rtx={ssrc:_}),a.push(D),u&&(D=JSON.parse(JSON.stringify(D)),D.fec={ssrc:g,mechanism:h?"red+ulpfec":"red"},a.push(D))}}),a.length===0&&g&&a.push({ssrc:g});let T=n.matchPrefix(i,"b=");return T.length&&(T=T[0].indexOf("b=TIAS:")===0?parseInt(T[0].substring(7),10):T[0].indexOf("b=AS:")===0?1e3*parseInt(T[0].substring(5),10)*.95-16e3:void 0,a.forEach(A=>{A.maxBitrate=T})),a},n.parseRtcpParameters=function(i){const a={},l=n.matchPrefix(i,"a=ssrc:").map(f=>n.parseSsrcMedia(f)).filter(f=>f.attribute==="cname")[0];l&&(a.cname=l.value,a.ssrc=l.ssrc);const u=n.matchPrefix(i,"a=rtcp-rsize");a.reducedSize=u.length>0,a.compound=u.length===0;const h=n.matchPrefix(i,"a=rtcp-mux");return a.mux=h.length>0,a},n.writeRtcpParameters=function(i){let a="";return i.reducedSize&&(a+=`a=rtcp-rsize\r
`),i.mux&&(a+=`a=rtcp-mux\r
`),i.ssrc!==void 0&&i.cname&&(a+="a=ssrc:"+i.ssrc+" cname:"+i.cname+`\r
`),a},n.parseMsid=function(i){let a;const l=n.matchPrefix(i,"a=msid:");if(l.length===1)return a=l[0].substring(7).split(" "),{stream:a[0],track:a[1]};const u=n.matchPrefix(i,"a=ssrc:").map(h=>n.parseSsrcMedia(h)).filter(h=>h.attribute==="msid");return u.length>0?(a=u[0].value.split(" "),{stream:a[0],track:a[1]}):void 0},n.parseSctpDescription=function(i){const a=n.parseMLine(i),l=n.matchPrefix(i,"a=max-message-size:");let u;l.length>0&&(u=parseInt(l[0].substring(19),10)),isNaN(u)&&(u=65536);const h=n.matchPrefix(i,"a=sctp-port:");if(h.length>0)return{port:parseInt(h[0].substring(12),10),protocol:a.fmt,maxMessageSize:u};const f=n.matchPrefix(i,"a=sctpmap:");if(f.length>0){const g=f[0].substring(10).split(" ");return{port:parseInt(g[0],10),protocol:g[1],maxMessageSize:u}}},n.writeSctpDescription=function(i,a){let l=[];return l=i.protocol!=="DTLS/SCTP"?["m="+i.kind+" 9 "+i.protocol+" "+a.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+a.port+`\r
`]:["m="+i.kind+" 9 "+i.protocol+" "+a.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+a.port+" "+a.protocol+` 65535\r
`],a.maxMessageSize!==void 0&&l.push("a=max-message-size:"+a.maxMessageSize+`\r
`),l.join("")},n.generateSessionId=function(){return Math.random().toString().substr(2,22)},n.writeSessionBoilerplate=function(i,a,l){let u;const h=a!==void 0?a:2;return u=i||n.generateSessionId(),`v=0\r
o=`+(l||"thisisadapterortc")+" "+u+" "+h+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},n.getDirection=function(i,a){const l=n.splitLines(i);for(let u=0;u<l.length;u++)switch(l[u]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return l[u].substring(2)}return a?n.getDirection(a):"sendrecv"},n.getKind=function(i){return n.splitLines(i)[0].split(" ")[0].substring(2)},n.isRejected=function(i){return i.split(" ",2)[1]==="0"},n.parseMLine=function(i){const a=n.splitLines(i)[0].substring(2).split(" ");return{kind:a[0],port:parseInt(a[1],10),protocol:a[2],fmt:a.slice(3).join(" ")}},n.parseOLine=function(i){const a=n.matchPrefix(i,"o=")[0].substring(2).split(" ");return{username:a[0],sessionId:a[1],sessionVersion:parseInt(a[2],10),netType:a[3],addressType:a[4],address:a[5]}},n.isValidSDP=function(i){if(typeof i!="string"||i.length===0)return!1;const a=n.splitLines(i);for(let l=0;l<a.length;l++)if(a[l].length<2||a[l].charAt(1)!=="=")return!1;return!0},t.exports=n})(EM);var _M=EM.exports,Ip=c(_M),Oie=o({__proto__:null,default:Ip},[_M]);function IE(t){if(!t.RTCIceCandidate||t.RTCIceCandidate&&"foundation"in t.RTCIceCandidate.prototype)return;const n=t.RTCIceCandidate;t.RTCIceCandidate=function(i){if(typeof i=="object"&&i.candidate&&i.candidate.indexOf("a=")===0&&((i=JSON.parse(JSON.stringify(i))).candidate=i.candidate.substr(2)),i.candidate&&i.candidate.length){const a=new n(i),l=Ip.parseCandidate(i.candidate),u=Object.assign(a,l);return u.toJSON=function(){return{candidate:u.candidate,sdpMid:u.sdpMid,sdpMLineIndex:u.sdpMLineIndex,usernameFragment:u.usernameFragment}},u}return new n(i)},t.RTCIceCandidate.prototype=n.prototype,Hd(t,"icecandidate",i=>(i.candidate&&Object.defineProperty(i,"candidate",{value:new t.RTCIceCandidate(i.candidate),writable:"false"}),i))}function PR(t){!t.RTCIceCandidate||t.RTCIceCandidate&&"relayProtocol"in t.RTCIceCandidate.prototype||Hd(t,"icecandidate",n=>{if(n.candidate){const i=Ip.parseCandidate(n.candidate.candidate);i.type==="relay"&&(n.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[i.priority>>24])}return n})}function AE(t,n){if(!t.RTCPeerConnection)return;"sctp"in t.RTCPeerConnection.prototype||Object.defineProperty(t.RTCPeerConnection.prototype,"sctp",{get(){return this._sctp===void 0?null:this._sctp}});const i=function(f){if(!f||!f.sdp)return!1;const g=Ip.splitSections(f.sdp);return g.shift(),g.some(_=>{const y=Ip.parseMLine(_);return y&&y.kind==="application"&&y.protocol.indexOf("SCTP")!==-1})},a=function(f){const g=f.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(g===null||g.length<2)return-1;const _=parseInt(g[1],10);return _!=_?-1:_},l=function(f){let g=65536;return n.browser==="firefox"&&(g=n.version<57?f===-1?16384:2147483637:n.version<60?n.version===57?65535:65536:2147483637),g},u=function(f,g){let _=65536;n.browser==="firefox"&&n.version===57&&(_=65535);const y=Ip.matchPrefix(f.sdp,"a=max-message-size:");return y.length>0?_=parseInt(y[0].substr(19),10):n.browser==="firefox"&&g!==-1&&(_=2147483637),_},h=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,n.browser==="chrome"&&n.version>=76){const{sdpSemantics:f}=this.getConfiguration();f==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return this._sctp===void 0?null:this._sctp},enumerable:!0,configurable:!0})}if(i(arguments[0])){const f=a(arguments[0]),g=l(f),_=u(arguments[0],f);let y;y=g===0&&_===0?Number.POSITIVE_INFINITY:g===0||_===0?Math.max(g,_):Math.min(g,_);const T={};Object.defineProperty(T,"maxMessageSize",{get:()=>y}),this._sctp=T}return h.apply(this,arguments)}}function OE(t){if(!t.RTCPeerConnection||!("createDataChannel"in t.RTCPeerConnection.prototype))return;function n(a,l){const u=a.send;a.send=function(){const h=arguments[0],f=h.length||h.size||h.byteLength;if(a.readyState==="open"&&l.sctp&&f>l.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+l.sctp.maxMessageSize+" bytes)");return u.apply(a,arguments)}}const i=t.RTCPeerConnection.prototype.createDataChannel;t.RTCPeerConnection.prototype.createDataChannel=function(){const a=i.apply(this,arguments);return n(a,this),a},Hd(t,"datachannel",a=>(n(a.channel,a.target),a))}function LR(t){if(!t.RTCPeerConnection||"connectionState"in t.RTCPeerConnection.prototype)return;const n=t.RTCPeerConnection.prototype;Object.defineProperty(n,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(n,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(i){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),i&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=i)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(i=>{const a=n[i];n[i]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=l=>{const u=l.target;if(u._lastConnectionState!==u.connectionState){u._lastConnectionState=u.connectionState;const h=new Event("connectionstatechange",l);u.dispatchEvent(h)}return l},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),a.apply(this,arguments)}})}function kR(t,n){if(!t.RTCPeerConnection||n.browser==="chrome"&&n.version>=71||n.browser==="safari"&&n.version>=605)return;const i=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(a){if(a&&a.sdp&&a.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const l=a.sdp.split(`
`).filter(u=>go(u).call(u)!=="a=extmap-allow-mixed").join(`
`);t.RTCSessionDescription&&a instanceof t.RTCSessionDescription?arguments[0]=new t.RTCSessionDescription({type:a.type,sdp:l}):a.sdp=l}return i.apply(this,arguments)}}function xE(t,n){if(!t.RTCPeerConnection||!t.RTCPeerConnection.prototype)return;const i=t.RTCPeerConnection.prototype.addIceCandidate;i&&i.length!==0&&(t.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(n.browser==="chrome"&&n.version<78||n.browser==="firefox"&&n.version<68||n.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?We.resolve():i.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),We.resolve())})}function NE(t,n){if(!t.RTCPeerConnection||!t.RTCPeerConnection.prototype)return;const i=t.RTCPeerConnection.prototype.setLocalDescription;i&&i.length!==0&&(t.RTCPeerConnection.prototype.setLocalDescription=function(){let a=arguments[0]||{};if(typeof a!="object"||a.type&&a.sdp)return i.apply(this,arguments);if(a={type:a.type,sdp:a.sdp},!a.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":a.type="offer";break;default:a.type="answer"}return a.sdp||a.type!=="offer"&&a.type!=="answer"?i.apply(this,[a]):(a.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(l=>i.apply(this,[l]))})}var xie=Object.freeze({__proto__:null,removeExtmapAllowMixed:kR,shimAddIceCandidateNullOrEmpty:xE,shimConnectionState:LR,shimMaxMessageSize:AE,shimParameterlessSetLocalDescription:NE,shimRTCIceCandidate:IE,shimRTCIceCandidateRelayProtocol:PR,shimSendThrowTypeError:OE});(function(){let{window:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0};const i=j2,a=function(u){const h={browser:null,version:null};if(u===void 0||!u.navigator)return h.browser="Not a browser.",h;const{navigator:f}=u;if(f.mozGetUserMedia)h.browser="firefox",h.version=rE(f.userAgent,/Firefox\/(\d+)\./,1);else if(f.webkitGetUserMedia||u.isSecureContext===!1&&u.webkitRTCPeerConnection)h.browser="chrome",h.version=rE(f.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else{if(!u.RTCPeerConnection||!f.userAgent.match(/AppleWebKit\/(\d+)\./))return h.browser="Not a supported browser.",h;h.browser="safari",h.version=rE(f.userAgent,/AppleWebKit\/(\d+)\./,1),h.supportsUnifiedPlan=u.RTCRtpTransceiver&&"currentDirection"in u.RTCRtpTransceiver.prototype}return h}(t),l={browserDetails:a,commonShim:xie,extractVersion:rE,disableLog:IZ,disableWarnings:AZ,sdp:Oie};switch(a.browser){case"chrome":if(!Kk||!AR||!n.shimChrome)return i("Chrome shim is not included in this adapter release."),l;if(a.version===null)return i("Chrome shim can not determine version, not shimming."),l;i("adapter.js shimming chrome."),l.browserShim=Kk,xE(t,a),NE(t),Uk(t,a),Bk(t),AR(t,a),Vk(t),zk(t,a),jk(t),$k(t),Hk(t),Gk(t,a),IE(t),PR(t),LR(t),AE(t,a),OE(t),kR(t,a);break;case"firefox":if(!iM||!OR||!n.shimFirefox)return i("Firefox shim is not included in this adapter release."),l;i("adapter.js shimming firefox."),l.browserShim=iM,xE(t,a),NE(t),qk(t,a),OR(t,a),Yk(t),Qk(t),Xk(t),Jk(t),Zk(t),eM(t),tM(t),nM(t),rM(t),IE(t),LR(t),AE(t,a),OE(t);break;case"safari":if(!fM||!n.shimSafari)return i("Safari shim is not included in this adapter release."),l;i("adapter.js shimming safari."),l.browserShim=fM,xE(t,a),NE(t),uM(t),hM(t),sM(t),oM(t),aM(t),dM(t),cM(t),pM(t),IE(t),PR(t),AE(t,a),OE(t),kR(t,a);break;default:i("Unsupported browser!")}})({window:typeof window>"u"?void 0:window});var Nie=ks("Array").keys,Die=nl,Pie=An,Lie=R,kie=Nie,MR=Array.prototype,Mie={DOMTokenList:!0,NodeList:!0},Fie=function(t){var n=t.keys;return t===MR||Lie(MR,t)&&n===MR.keys||Pie(Mie,Die(t))?kie:n},Va=c(Fie),SM=$t,Uie=TypeError,Bie=Hi,Vie=Ls,jie=we,DE=function(t,n,i){var a=Bie(n);a in t?Vie.f(t,a,jie(0,i)):t[a]=i},yM=_T,$ie=Bl,Hie=DE,Wie=Array,zie=Math.max,FR=function(t,n,i){for(var a=$ie(t),l=yM(n,a),u=yM(i===void 0?a:i,a),h=Wie(zie(u-l,0)),f=0;l<u;l++,f++)Hie(h,f,t[l]);return h.length=f,h},CM=FR,Gie=Math.floor,UR=function(t,n){var i=t.length,a=Gie(i/2);return i<8?Kie(t,n):qie(t,UR(CM(t,0,a),n),UR(CM(t,a),n),n)},Kie=function(t,n){for(var i,a,l=t.length,u=1;u<l;){for(a=u,i=t[u];a&&n(t[a-1],i)>0;)t[a]=t[--a];a!==u++&&(t[a]=i)}return t},qie=function(t,n,i,a){for(var l=n.length,u=i.length,h=0,f=0;h<l||f<u;)t[h+f]=h<l&&f<u?a(n[h],i[f])<=0?n[h++]:i[f++]:h<l?n[h++]:i[f++];return t},bM=UR,TM=on.match(/firefox\/(\d+)/i),Yie=!!TM&&+TM[1],Xie=/MSIE|Trident/.test(on),RM=on.match(/AppleWebKit\/(\d+)\./),Jie=!!RM&&+RM[1],Qie=ir,wM=b,Zie=rt,eoe=Yn,IM=Bl,toe=function(t,n){if(!delete t[n])throw Uie("Cannot delete property "+SM(n)+" of "+SM(t))},AM=ss,BR=d,noe=bM,roe=nE,OM=Yie,ioe=Xie,xM=Un,NM=Jie,Pu=[],DM=wM(Pu.sort),ooe=wM(Pu.push),aoe=BR(function(){Pu.sort(void 0)}),soe=BR(function(){Pu.sort(null)}),coe=roe("sort"),PM=!BR(function(){if(xM)return xM<70;if(!(OM&&OM>3)){if(ioe)return!0;if(NM)return NM<603;var t,n,i,a,l="";for(t=65;t<76;t++){switch(n=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:i=3;break;case 68:case 71:i=4;break;default:i=2}for(a=0;a<47;a++)Pu.push({k:n+a,v:i})}for(Pu.sort(function(u,h){return h.v-u.v}),a=0;a<Pu.length;a++)n=Pu[a].k.charAt(0),l.charAt(l.length-1)!==n&&(l+=n);return l!=="DGBEFHACIJK"}});Qie({target:"Array",proto:!0,forced:aoe||!soe||!coe||!PM},{sort:function(t){t!==void 0&&Zie(t);var n=eoe(this);if(PM)return t===void 0?DM(n):DM(n,t);var i,a,l=[],u=IM(n);for(a=0;a<u;a++)a in n&&ooe(l,n[a]);for(noe(l,function(h){return function(f,g){return g===void 0?-1:f===void 0?1:h!==void 0?+h(f,g)||0:AM(f)>AM(g)?1:-1}}(t)),i=IM(l),a=0;a<i;)n[a]=l[a++];for(;a<u;)toe(n,a++);return n}});var loe=ks("Array").sort,uoe=R,doe=loe,VR=Array.prototype,hoe=function(t){var n=t.sort;return t===VR||uoe(VR,t)&&n===VR.sort?doe:n},t0=c(hoe),jR={exports:{}};(function(t,n){(function(i,a){var l="function",u="undefined",h="object",f="string",g="major",_="model",y="name",T="type",A="vendor",D="version",W="architecture",F="console",U="mobile",z="tablet",X="smarttv",ue="wearable",pe="embedded",Ee="Amazon",Se="Apple",Re="ASUS",Ae="BlackBerry",Pe="Browser",tt="Chrome",ln="Firefox",Fn="Google",sr="Huawei",Jr="LG",Or="Microsoft",nc="Motorola",Oe="Opera",Ve="Samsung",at="Sharp",Ft="Sony",Pn="Xiaomi",Ge="Zebra",B="Facebook",ne="Chromium OS",ce="Mac OS",Fe=function(Gr){for(var ai={},mr=0;mr<Gr.length;mr++)ai[Gr[mr].toUpperCase()]=Gr[mr];return ai},Ut=function(Gr,ai){return typeof Gr===f&&Gn(ai).indexOf(Gn(Gr))!==-1},Gn=function(Gr){return Gr.toLowerCase()},fi=function(Gr,ai){if(typeof Gr===f)return Gr=Gr.replace(/^\s\s*/,""),typeof ai===u?Gr:Gr.substring(0,350)},ca=function(Gr,ai){for(var mr,Aa,Tl,Kr,Ln,la,ud=0;ud<ai.length&&!Ln;){var kc=ai[ud],P8=ai[ud+1];for(mr=Aa=0;mr<kc.length&&!Ln&&kc[mr];)if(Ln=kc[mr++].exec(Gr))for(Tl=0;Tl<P8.length;Tl++)la=Ln[++Aa],typeof(Kr=P8[Tl])===h&&Kr.length>0?Kr.length===2?typeof Kr[1]==l?this[Kr[0]]=Kr[1].call(this,la):this[Kr[0]]=Kr[1]:Kr.length===3?typeof Kr[1]!==l||Kr[1].exec&&Kr[1].test?this[Kr[0]]=la?la.replace(Kr[1],Kr[2]):a:this[Kr[0]]=la?Kr[1].call(this,la,Kr[2]):a:Kr.length===4&&(this[Kr[0]]=la?Kr[3].call(this,la.replace(Kr[1],Kr[2])):a):this[Kr]=la||a;ud+=2}},tu=function(Gr,ai){for(var mr in ai)if(typeof ai[mr]===h&&ai[mr].length>0){for(var Aa=0;Aa<ai[mr].length;Aa++)if(Ut(ai[mr][Aa],Gr))return mr==="?"?a:mr}else if(Ut(ai[mr],Gr))return mr==="?"?a:mr;return Gr},RS={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},wS={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[D,[y,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[D,[y,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[y,D],[/opios[\/ ]+([\w\.]+)/i],[D,[y,Oe+" Mini"]],[/\bopr\/([\w\.]+)/i],[D,[y,Oe]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[y,D],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[D,[y,"UC"+Pe]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[D,[y,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[D,[y,"WeChat"]],[/konqueror\/([\w\.]+)/i],[D,[y,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[D,[y,"IE"]],[/yabrowser\/([\w\.]+)/i],[D,[y,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[y,/(.+)/,"$1 Secure "+Pe],D],[/\bfocus\/([\w\.]+)/i],[D,[y,ln+" Focus"]],[/\bopt\/([\w\.]+)/i],[D,[y,Oe+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[D,[y,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[D,[y,"Dolphin"]],[/coast\/([\w\.]+)/i],[D,[y,Oe+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[D,[y,"MIUI "+Pe]],[/fxios\/([-\w\.]+)/i],[D,[y,ln]],[/\bqihu|(qi?ho?o?|360)browser/i],[[y,"360 "+Pe]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[y,/(.+)/,"$1 "+Pe],D],[/(comodo_dragon)\/([\w\.]+)/i],[[y,/_/g," "],D],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[y,D],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[y],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[y,B],D],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[y,D],[/\bgsa\/([\w\.]+) .*safari\//i],[D,[y,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[D,[y,tt+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[y,tt+" WebView"],D],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[D,[y,"Android "+Pe]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[y,D],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[D,[y,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[D,y],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[y,[D,tu,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[y,D],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[y,"Netscape"],D],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[D,[y,ln+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[y,D],[/(cobalt)\/([\w\.]+)/i],[y,[D,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[W,"amd64"]],[/(ia32(?=;))/i],[[W,Gn]],[/((?:i[346]|x)86)[;\)]/i],[[W,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[W,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[W,"armhf"]],[/windows (ce|mobile); ppc;/i],[[W,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[W,/ower/,"",Gn]],[/(sun4\w)[;\)]/i],[[W,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[W,Gn]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[_,[A,Ve],[T,z]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[_,[A,Ve],[T,U]],[/\((ip(?:hone|od)[\w ]*);/i],[_,[A,Se],[T,U]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[_,[A,Se],[T,z]],[/(macintosh);/i],[_,[A,Se]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[_,[A,at],[T,U]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[_,[A,sr],[T,z]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[_,[A,sr],[T,U]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[_,/_/g," "],[A,Pn],[T,U]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[_,/_/g," "],[A,Pn],[T,z]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[_,[A,"OPPO"],[T,U]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[_,[A,"Vivo"],[T,U]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[_,[A,"Realme"],[T,U]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[_,[A,nc],[T,U]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[_,[A,nc],[T,z]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[_,[A,Jr],[T,z]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[_,[A,Jr],[T,U]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[_,[A,"Lenovo"],[T,z]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[_,/_/g," "],[A,"Nokia"],[T,U]],[/(pixel c)\b/i],[_,[A,Fn],[T,z]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[_,[A,Fn],[T,U]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[_,[A,Ft],[T,U]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[_,"Xperia Tablet"],[A,Ft],[T,z]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[_,[A,"OnePlus"],[T,U]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[_,[A,Ee],[T,z]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[_,/(.+)/g,"Fire Phone $1"],[A,Ee],[T,U]],[/(playbook);[-\w\),; ]+(rim)/i],[_,A,[T,z]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[_,[A,Ae],[T,U]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[_,[A,Re],[T,z]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[_,[A,Re],[T,U]],[/(nexus 9)/i],[_,[A,"HTC"],[T,z]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[A,[_,/_/g," "],[T,U]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[_,[A,"Acer"],[T,z]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[_,[A,"Meizu"],[T,U]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[A,_,[T,U]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[A,_,[T,z]],[/(surface duo)/i],[_,[A,Or],[T,z]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[_,[A,"Fairphone"],[T,U]],[/(u304aa)/i],[_,[A,"AT&T"],[T,U]],[/\bsie-(\w*)/i],[_,[A,"Siemens"],[T,U]],[/\b(rct\w+) b/i],[_,[A,"RCA"],[T,z]],[/\b(venue[\d ]{2,7}) b/i],[_,[A,"Dell"],[T,z]],[/\b(q(?:mv|ta)\w+) b/i],[_,[A,"Verizon"],[T,z]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[_,[A,"Barnes & Noble"],[T,z]],[/\b(tm\d{3}\w+) b/i],[_,[A,"NuVision"],[T,z]],[/\b(k88) b/i],[_,[A,"ZTE"],[T,z]],[/\b(nx\d{3}j) b/i],[_,[A,"ZTE"],[T,U]],[/\b(gen\d{3}) b.+49h/i],[_,[A,"Swiss"],[T,U]],[/\b(zur\d{3}) b/i],[_,[A,"Swiss"],[T,z]],[/\b((zeki)?tb.*\b) b/i],[_,[A,"Zeki"],[T,z]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[A,"Dragon Touch"],_,[T,z]],[/\b(ns-?\w{0,9}) b/i],[_,[A,"Insignia"],[T,z]],[/\b((nxa|next)-?\w{0,9}) b/i],[_,[A,"NextBook"],[T,z]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[A,"Voice"],_,[T,U]],[/\b(lvtel\-)?(v1[12]) b/i],[[A,"LvTel"],_,[T,U]],[/\b(ph-1) /i],[_,[A,"Essential"],[T,U]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[_,[A,"Envizen"],[T,z]],[/\b(trio[-\w\. ]+) b/i],[_,[A,"MachSpeed"],[T,z]],[/\btu_(1491) b/i],[_,[A,"Rotor"],[T,z]],[/(shield[\w ]+) b/i],[_,[A,"Nvidia"],[T,z]],[/(sprint) (\w+)/i],[A,_,[T,U]],[/(kin\.[onetw]{3})/i],[[_,/\./g," "],[A,Or],[T,U]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[_,[A,Ge],[T,z]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[_,[A,Ge],[T,U]],[/smart-tv.+(samsung)/i],[A,[T,X]],[/hbbtv.+maple;(\d+)/i],[[_,/^/,"SmartTV"],[A,Ve],[T,X]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[A,Jr],[T,X]],[/(apple) ?tv/i],[A,[_,Se+" TV"],[T,X]],[/crkey/i],[[_,tt+"cast"],[A,Fn],[T,X]],[/droid.+aft(\w)( bui|\))/i],[_,[A,Ee],[T,X]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[_,[A,at],[T,X]],[/(bravia[\w ]+)( bui|\))/i],[_,[A,Ft],[T,X]],[/(mitv-\w{5}) bui/i],[_,[A,Pn],[T,X]],[/Hbbtv.*(technisat) (.*);/i],[A,_,[T,X]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[A,fi],[_,fi],[T,X]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[T,X]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[A,_,[T,F]],[/droid.+; (shield) bui/i],[_,[A,"Nvidia"],[T,F]],[/(playstation [345portablevi]+)/i],[_,[A,Ft],[T,F]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[_,[A,Or],[T,F]],[/((pebble))app/i],[A,_,[T,ue]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[_,[A,Se],[T,ue]],[/droid.+; (glass) \d/i],[_,[A,Fn],[T,ue]],[/droid.+; (wt63?0{2,3})\)/i],[_,[A,Ge],[T,ue]],[/(quest( 2| pro)?)/i],[_,[A,B],[T,ue]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[A,[T,pe]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[_,[T,U]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[_,[T,z]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[T,z]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[T,U]],[/(android[-\w\. ]{0,9});.+buil/i],[_,[A,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[D,[y,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[D,[y,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[y,D],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[D,y]],os:[[/microsoft (windows) (vista|xp)/i],[y,D],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[y,[D,tu,RS]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[y,"Windows"],[D,tu,RS]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[D,/_/g,"."],[y,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[y,ce],[D,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[D,y],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[y,D],[/\(bb(10);/i],[D,[y,Ae]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[D,[y,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[D,[y,ln+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[D,[y,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[D,[y,"watchOS"]],[/crkey\/([\d\.]+)/i],[D,[y,tt+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[y,ne],D],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[y,D],[/(sunos) ?([\w\.\d]*)/i],[[y,"Solaris"],D],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[y,D]]},Es=function(Gr,ai){if(typeof Gr===h&&(ai=Gr,Gr=a),!(this instanceof Es))return new Es(Gr,ai).getResult();var mr=typeof i!==u&&i.navigator?i.navigator:a,Aa=Gr||(mr&&mr.userAgent?mr.userAgent:""),Tl=mr&&mr.userAgentData?mr.userAgentData:a,Kr=ai?function(Ln,la){var ud={};for(var kc in Ln)la[kc]&&la[kc].length%2==0?ud[kc]=la[kc].concat(Ln[kc]):ud[kc]=Ln[kc];return ud}(wS,ai):wS;return this.getBrowser=function(){var Ln={};return Ln[y]=a,Ln[D]=a,ca.call(Ln,Aa,Kr.browser),Ln[g]=function(la){return typeof la===f?la.replace(/[^\d\.]/g,"").split(".")[0]:a}(Ln[D]),mr&&mr.brave&&typeof mr.brave.isBrave==l&&(Ln[y]="Brave"),Ln},this.getCPU=function(){var Ln={};return Ln[W]=a,ca.call(Ln,Aa,Kr.cpu),Ln},this.getDevice=function(){var Ln={};return Ln[A]=a,Ln[_]=a,Ln[T]=a,ca.call(Ln,Aa,Kr.device),!Ln[T]&&Tl&&Tl.mobile&&(Ln[T]=U),Ln[_]=="Macintosh"&&mr&&typeof mr.standalone!==u&&mr.maxTouchPoints&&mr.maxTouchPoints>2&&(Ln[_]="iPad",Ln[T]=z),Ln},this.getEngine=function(){var Ln={};return Ln[y]=a,Ln[D]=a,ca.call(Ln,Aa,Kr.engine),Ln},this.getOS=function(){var Ln={};return Ln[y]=a,Ln[D]=a,ca.call(Ln,Aa,Kr.os),!Ln[y]&&Tl&&Tl.platform!="Unknown"&&(Ln[y]=Tl.platform.replace(/chrome os/i,ne).replace(/macos/i,ce)),Ln},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return Aa},this.setUA=function(Ln){return Aa=typeof Ln===f&&Ln.length>350?fi(Ln,350):Ln,this},this.setUA(Aa),this};Es.VERSION="0.7.34",Es.BROWSER=Fe([y,D,g]),Es.CPU=Fe([W]),Es.DEVICE=Fe([_,A,T,F,U,X,z,ue,pe]),Es.ENGINE=Es.OS=Fe([y,D]),t.exports&&(n=t.exports=Es),n.UAParser=Es;var ld=typeof i!==u&&(i.jQuery||i.Zepto);if(ld&&!ld.ua){var Af=new Es;ld.ua=Af.getResult(),ld.ua.get=function(){return Af.getUA()},ld.ua.set=function(Gr){Af.setUA(Gr);var ai=Af.getResult();for(var mr in ai)ld.ua[mr]=ai[mr]}}})(typeof window=="object"?window:s)})(jR,jR.exports);var poe=c(jR.exports),foe=nl,moe=An,goe=ze,voe=Wd,Eoe=Lt("iterator"),_oe=Object,Soe=function(t){if(goe(t))return!1;var n=_oe(t);return n[Eoe]!==void 0||"@@iterator"in n||moe(voe,foe(n))},yoe=c(Soe),$R=I;ir({global:!0,forced:$R.globalThis!==$R},{globalThis:$R});var LM=c(I);function kM(t,n){return function(){return t.apply(n,arguments)}}const{toString:Coe}=Object.prototype,{getPrototypeOf:HR}=Object,PE=(WR=Object.create(null),t=>{const n=Coe.call(t);return WR[n]||(WR[n]=n.slice(8,-1).toLowerCase())});var WR;const ol=t=>(t=t.toLowerCase(),n=>PE(n)===t),LE=t=>n=>typeof n===t,{isArray:Ap}=Array,n0=LE("undefined"),MM=ol("ArrayBuffer"),boe=LE("string"),Ms=LE("function"),FM=LE("number"),kE=t=>t!==null&&typeof t=="object",ME=t=>{if(PE(t)!=="object")return!1;const n=HR(t);return!(n!==null&&n!==Object.prototype&&Object.getPrototypeOf(n)!==null||Symbol.toStringTag in t||yoe(t))},Toe=ol("Date"),Roe=ol("File"),woe=ol("Blob"),Ioe=ol("FileList"),Aoe=ol("URLSearchParams");function r0(t,n){let i,a,{allOwnKeys:l=!1}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(t!=null)if(typeof t!="object"&&(t=[t]),Ap(t))for(i=0,a=t.length;i<a;i++)n.call(null,t[i],i,t);else{const u=l?Object.getOwnPropertyNames(t):Object.keys(t),h=u.length;let f;for(i=0;i<h;i++)f=u[i],n.call(null,t[f],f,t)}}function UM(t,n){n=n.toLowerCase();const i=Object.keys(t);let a,l=i.length;for(;l-- >0;)if(a=i[l],n===a.toLowerCase())return a;return null}const BM=LM!==void 0?LM:typeof self<"u"?self:typeof window<"u"?window:In,VM=t=>!n0(t)&&t!==BM,Ooe=(zR=typeof Uint8Array<"u"&&HR(Uint8Array),t=>zR&&t instanceof zR);var zR;const xoe=ol("HTMLFormElement"),jM=(t=>{let{hasOwnProperty:n}=t;return(i,a)=>n.call(i,a)})(Object.prototype),Noe=ol("RegExp"),$M=(t,n)=>{const i=Object.getOwnPropertyDescriptors(t),a={};r0(i,(l,u)=>{let h;(h=n(l,u,t))!==!1&&(a[u]=h||l)}),Object.defineProperties(t,a)},GR="abcdefghijklmnopqrstuvwxyz",HM="0123456789",WM={DIGIT:HM,ALPHA:GR,ALPHA_DIGIT:GR+GR.toUpperCase()+HM},Doe=ol("AsyncFunction");var it={isArray:Ap,isArrayBuffer:MM,isBuffer:function(t){return t!==null&&!n0(t)&&t.constructor!==null&&!n0(t.constructor)&&Ms(t.constructor.isBuffer)&&t.constructor.isBuffer(t)},isFormData:t=>{let n;return t&&(typeof FormData=="function"&&t instanceof FormData||Ms(t.append)&&((n=PE(t))==="formdata"||n==="object"&&Ms(t.toString)&&t.toString()==="[object FormData]"))},isArrayBufferView:function(t){let n;return n=typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&MM(t.buffer),n},isString:boe,isNumber:FM,isBoolean:t=>t===!0||t===!1,isObject:kE,isPlainObject:ME,isUndefined:n0,isDate:Toe,isFile:Roe,isBlob:woe,isRegExp:Noe,isFunction:Ms,isStream:t=>kE(t)&&Ms(t.pipe),isURLSearchParams:Aoe,isTypedArray:Ooe,isFileList:Ioe,forEach:r0,merge:function t(){const{caseless:n}=VM(this)&&this||{},i={},a=(l,u)=>{const h=n&&UM(i,u)||u;ME(i[h])&&ME(l)?i[h]=t(i[h],l):ME(l)?i[h]=t({},l):Ap(l)?i[h]=l.slice():i[h]=l};for(let l=0,u=arguments.length;l<u;l++)arguments[l]&&r0(arguments[l],a);return i},extend:function(t,n,i){let{allOwnKeys:a}=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return r0(n,(l,u)=>{i&&Ms(l)?t[u]=kM(l,i):t[u]=l},{allOwnKeys:a}),t},trim:t=>go(t)?go(t).call(t):t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),inherits:(t,n,i,a)=>{t.prototype=Object.create(n.prototype,a),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:n.prototype}),i&&Object.assign(t.prototype,i)},toFlatObject:(t,n,i,a)=>{let l,u,h;const f={};if(n=n||{},t==null)return n;do{for(l=Object.getOwnPropertyNames(t),u=l.length;u-- >0;)h=l[u],a&&!a(h,t,n)||f[h]||(n[h]=t[h],f[h]=!0);t=i!==!1&&HR(t)}while(t&&(!i||i(t,n))&&t!==Object.prototype);return n},kindOf:PE,kindOfTest:ol,endsWith:(t,n,i)=>{t=String(t),(i===void 0||i>t.length)&&(i=t.length),i-=n.length;const a=t.indexOf(n,i);return a!==-1&&a===i},toArray:t=>{if(!t)return null;if(Ap(t))return t;let n=t.length;if(!FM(n))return null;const i=new Array(n);for(;n-- >0;)i[n]=t[n];return i},forEachEntry:(t,n)=>{const i=(t&&t[Symbol.iterator]).call(t);let a;for(;(a=i.next())&&!a.done;){const l=a.value;n.call(t,l[0],l[1])}},matchAll:(t,n)=>{let i;const a=[];for(;(i=t.exec(n))!==null;)a.push(i);return a},isHTMLForm:xoe,hasOwnProperty:jM,hasOwnProp:jM,reduceDescriptors:$M,freezeMethods:t=>{$M(t,(n,i)=>{if(Ms(t)&&["arguments","caller","callee"].indexOf(i)!==-1)return!1;const a=t[i];Ms(a)&&(n.enumerable=!1,"writable"in n?n.writable=!1:n.set||(n.set=()=>{throw Error("Can not rewrite read-only method '"+i+"'")}))})},toObjectSet:(t,n)=>{const i={},a=l=>{l.forEach(u=>{i[u]=!0})};return Ap(t)?a(t):a(String(t).split(n)),i},toCamelCase:t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,i,a){return i.toUpperCase()+a}),noop:()=>{},toFiniteNumber:(t,n)=>(t=+t,Number.isFinite(t)?t:n),findKey:UM,global:BM,isContextDefined:VM,ALPHABET:WM,generateString:function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:16,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:WM.ALPHA_DIGIT,i="";const{length:a}=n;for(;t--;)i+=n[Math.random()*a|0];return i},isSpecCompliantForm:function(t){return!!(t&&Ms(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])},toJSONObject:t=>{const n=new Array(10),i=(a,l)=>{if(kE(a)){if(n.indexOf(a)>=0)return;if(!("toJSON"in a)){n[l]=a;const u=Ap(a)?[]:{};return r0(a,(h,f)=>{const g=i(h,l+1);!n0(g)&&(u[f]=g)}),n[l]=void 0,u}}return a};return i(t,0)},isAsyncFn:Doe,isThenable:t=>t&&(kE(t)||Ms(t))&&Ms(t.then)&&Ms(t.catch)};function wr(t,n,i,a,l){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",n&&(this.code=n),i&&(this.config=i),a&&(this.request=a),l&&(this.response=l)}it.inherits(wr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:it.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const zM=wr.prototype,GM={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{GM[t]={value:t}}),Object.defineProperties(wr,GM),Object.defineProperty(zM,"isAxiosError",{value:!0}),wr.from=(t,n,i,a,l,u)=>{const h=Object.create(zM);return it.toFlatObject(t,h,function(f){return f!==Error.prototype},f=>f!=="isAxiosError"),wr.call(h,t.message,n,i,a,l),h.cause=t,h.name=t.name,u&&Object.assign(h,u),h};function KR(t){return it.isPlainObject(t)||it.isArray(t)}function KM(t){return it.endsWith(t,"[]")?t.slice(0,-2):t}function qM(t,n,i){return t?t.concat(n).map(function(a,l){return a=KM(a),!i&&l?"["+a+"]":a}).join(i?".":""):n}const Poe=it.toFlatObject(it,{},null,function(t){return/^is[A-Z]/.test(t)});function FE(t,n,i){if(!it.isObject(t))throw new TypeError("target must be an object");n=n||new FormData;const a=(i=it.toFlatObject(i,{metaTokens:!0,dots:!1,indexes:!1},!1,function(A,D){return!it.isUndefined(D[A])})).metaTokens,l=i.visitor||_,u=i.dots,h=i.indexes,f=(i.Blob||typeof Blob<"u"&&Blob)&&it.isSpecCompliantForm(n);if(!it.isFunction(l))throw new TypeError("visitor must be a function");function g(A){if(A===null)return"";if(it.isDate(A))return A.toISOString();if(!f&&it.isBlob(A))throw new wr("Blob is not supported. Use a Buffer instead.");return it.isArrayBuffer(A)||it.isTypedArray(A)?f&&typeof Blob=="function"?new Blob([A]):Buffer.from(A):A}function _(A,D,W){let F=A;if(A&&!W&&typeof A=="object"){if(it.endsWith(D,"{}"))D=a?D:D.slice(0,-2),A=JSON.stringify(A);else if(it.isArray(A)&&function(U){return it.isArray(U)&&!U.some(KR)}(A)||(it.isFileList(A)||it.endsWith(D,"[]"))&&(F=it.toArray(A)))return D=KM(D),F.forEach(function(U,z){!it.isUndefined(U)&&U!==null&&n.append(h===!0?qM([D],z,u):h===null?D:D+"[]",g(U))}),!1}return!!KR(A)||(n.append(qM(W,D,u),g(A)),!1)}const y=[],T=Object.assign(Poe,{defaultVisitor:_,convertValue:g,isVisitable:KR});if(!it.isObject(t))throw new TypeError("data must be an object");return function A(D,W){if(!it.isUndefined(D)){if(y.indexOf(D)!==-1)throw Error("Circular reference detected in "+W.join("."));y.push(D),it.forEach(D,function(F,U){(!(it.isUndefined(F)||F===null)&&l.call(n,F,it.isString(U)?go(U).call(U):U,W,T))===!0&&A(F,W?W.concat(U):[U])}),y.pop()}}(t),n}function YM(t){const n={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(i){return n[i]})}function qR(t,n){this._pairs=[],t&&FE(t,this,n)}const XM=qR.prototype;function Loe(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function JM(t,n,i){if(!n)return t;const a=i&&i.encode||Loe,l=i&&i.serialize;let u;if(u=l?l(n,i):it.isURLSearchParams(n)?n.toString():new qR(n,i).toString(a),u){const h=t.indexOf("#");h!==-1&&(t=t.slice(0,h)),t+=(t.indexOf("?")===-1?"?":"&")+u}return t}XM.append=function(t,n){this._pairs.push([t,n])},XM.toString=function(t){const n=t?function(i){return t.call(this,i,YM)}:YM;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};var QM=class{constructor(){this.handlers=[]}use(t,n,i){return this.handlers.push({fulfilled:t,rejected:n,synchronous:!!i&&i.synchronous,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){it.forEach(this.handlers,function(n){n!==null&&t(n)})}},ZM={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},eF={exports:{}},koe=ir,Moe=oe,tF=Ls.f;koe({target:"Object",stat:!0,forced:Object.defineProperty!==tF,sham:!Moe},{defineProperty:tF});var nF=ct.Object,Foe=eF.exports=function(t,n,i){return nF.defineProperty(t,n,i)};nF.defineProperty.sham&&(Foe.sham=!0);var rF=c(eF.exports),Uoe=H,i0=Array.isArray||function(t){return Uoe(t)=="Array"},Boe=TypeError,iF=i0,Voe=_E,joe=je,$oe=Lt("species"),oF=Array,Hoe=function(t){var n;return iF(t)&&(n=t.constructor,(Voe(n)&&(n===oF||iF(n.prototype))||joe(n)&&(n=n[$oe])===null)&&(n=void 0)),n===void 0?oF:n},aF=function(t,n){return new(Hoe(t))(n===0?0:n)},Woe=d,zoe=Un,Goe=Lt("species"),sF=function(t){return zoe>=51||!Woe(function(){var n=[];return(n.constructor={})[Goe]=function(){return{foo:1}},n[t](Boolean).foo!==1})},Koe=ir,qoe=d,Yoe=i0,Xoe=je,Joe=Yn,Qoe=Bl,cF=function(t){if(t>9007199254740991)throw Boe("Maximum allowed index exceeded");return t},lF=DE,Zoe=aF,eae=sF,tae=Un,uF=Lt("isConcatSpreadable"),nae=tae>=51||!qoe(function(){var t=[];return t[uF]=!1,t.concat()[0]!==t}),rae=function(t){if(!Xoe(t))return!1;var n=t[uF];return n!==void 0?!!n:Yoe(t)};Koe({target:"Array",proto:!0,arity:1,forced:!nae||!eae("concat")},{concat:function(t){var n,i,a,l,u,h=Joe(this),f=Zoe(h,0),g=0;for(n=-1,a=arguments.length;n<a;n++)if(rae(u=n===-1?h:arguments[n]))for(l=Qoe(u),cF(g+l),i=0;i<l;i++,g++)i in u&&lF(f,g,u[i]);else cF(g+1),lF(f,g++,u);return f.length=g,f}});var dF={},iae=H,oae=st,hF=oE.f,aae=FR,pF=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];dF.f=function(t){return pF&&iae(t)=="Window"?function(n){try{return hF(n)}catch{return aae(pF)}}(t):hF(oae(t))};var Op={},sae=Lt;Op.f=sae;var fF=ct,cae=An,lae=Op,uae=Ls.f,Wi=function(t){var n=fF.Symbol||(fF.Symbol={});cae(n,t)||uae(n,t,{value:lae.f(t)})},dae=de,hae=Wt,pae=Lt,fae=xu,mF=function(){var t=hae("Symbol"),n=t&&t.prototype,i=n&&n.valueOf,a=pae("toPrimitive");n&&!n[a]&&fae(n,a,function(l){return dae(i,this)},{arity:1})},mae=Au,gae=Ne,vae=Yn,Eae=Bl,_ae=aF,gF=b([].push),Lu=function(t){var n=t==1,i=t==2,a=t==3,l=t==4,u=t==6,h=t==7,f=t==5||u;return function(g,_,y,T){for(var A,D,W=vae(g),F=gae(W),U=mae(_,y),z=Eae(F),X=0,ue=T||_ae,pe=n?ue(g,z):i||h?ue(g,0):void 0;z>X;X++)if((f||X in F)&&(D=U(A=F[X],X,W),t))if(n)pe[X]=D;else if(D)switch(t){case 3:return!0;case 5:return A;case 6:return X;case 2:gF(pe,A)}else switch(t){case 4:return!1;case 7:gF(pe,A)}return u?-1:a||l?l:pe}},vF={forEach:Lu(0),map:Lu(1),filter:Lu(2),some:Lu(3),every:Lu(4),find:Lu(5),findIndex:Lu(6),filterReject:Lu(7)},UE=ir,YR=I,XR=de,Sae=b,xp=oe,Np=Nt,yae=d,Oo=An,Cae=R,JR=na,BE=st,QR=Hi,bae=ss,ZR=we,o0=zm,EF=sE,Tae=oE,_F=dF,Rae=Wm,SF=he,yF=Ls,wae=NT,CF=fe,bF=xu,Iae=EE,ew=Dt,TF=aE,RF=vr,Aae=Lt,Oae=Op,xae=Wi,Nae=mF,Dae=Nu,wF=Gd,VE=vF.forEach,ja=iE("hidden"),jE="Symbol",a0="prototype",Pae=wF.set,IF=wF.getterFor(jE),yc=Object[a0],Yd=YR.Symbol,$E=Yd&&Yd[a0],Lae=YR.TypeError,tw=YR.QObject,AF=SF.f,Xd=yF.f,OF=_F.f,kae=CF.f,xF=Sae([].push),Vl=ew("symbols"),s0=ew("op-symbols"),Mae=ew("wks"),nw=!tw||!tw[a0]||!tw[a0].findChild,rw=xp&&yae(function(){return o0(Xd({},"a",{get:function(){return Xd(this,"a",{value:7}).a}})).a!=7})?function(t,n,i){var a=AF(yc,n);a&&delete yc[n],Xd(t,n,i),a&&t!==yc&&Xd(yc,n,a)}:Xd,iw=function(t,n){var i=Vl[t]=o0($E);return Pae(i,{type:jE,tag:t,description:n}),xp||(i.description=n),i},HE=function(t,n,i){t===yc&&HE(s0,n,i),JR(t);var a=QR(n);return JR(i),Oo(Vl,a)?(i.enumerable?(Oo(t,ja)&&t[ja][a]&&(t[ja][a]=!1),i=o0(i,{enumerable:ZR(0,!1)})):(Oo(t,ja)||Xd(t,ja,ZR(1,{})),t[ja][a]=!0),rw(t,a,i)):Xd(t,a,i)},ow=function(t,n){JR(t);var i=BE(n),a=EF(i).concat(LF(i));return VE(a,function(l){xp&&!XR(NF,i,l)||HE(t,l,i[l])}),t},NF=function(t){var n=QR(t),i=XR(kae,this,n);return!(this===yc&&Oo(Vl,n)&&!Oo(s0,n))&&(!(i||!Oo(this,n)||!Oo(Vl,n)||Oo(this,ja)&&this[ja][n])||i)},DF=function(t,n){var i=BE(t),a=QR(n);if(i!==yc||!Oo(Vl,a)||Oo(s0,a)){var l=AF(i,a);return!l||!Oo(Vl,a)||Oo(i,ja)&&i[ja][a]||(l.enumerable=!0),l}},PF=function(t){var n=OF(BE(t)),i=[];return VE(n,function(a){Oo(Vl,a)||Oo(TF,a)||xF(i,a)}),i},LF=function(t){var n=t===yc,i=OF(n?s0:BE(t)),a=[];return VE(i,function(l){!Oo(Vl,l)||n&&!Oo(yc,l)||xF(a,Vl[l])}),a};Np||(Yd=function(){if(Cae($E,this))throw Lae("Symbol is not a constructor");var t=arguments.length&&arguments[0]!==void 0?bae(arguments[0]):void 0,n=RF(t),i=function(a){this===yc&&XR(i,s0,a),Oo(this,ja)&&Oo(this[ja],n)&&(this[ja][n]=!1),rw(this,n,ZR(1,a))};return xp&&nw&&rw(yc,n,{configurable:!0,set:i}),iw(n,t)},bF($E=Yd[a0],"toString",function(){return IF(this).tag}),bF(Yd,"withoutSetter",function(t){return iw(RF(t),t)}),CF.f=NF,yF.f=HE,wae.f=ow,SF.f=DF,Tae.f=_F.f=PF,Rae.f=LF,Oae.f=function(t){return iw(Aae(t),t)},xp&&Iae($E,"description",{configurable:!0,get:function(){return IF(this).description}})),UE({global:!0,constructor:!0,wrap:!0,forced:!Np,sham:!Np},{Symbol:Yd}),VE(EF(Mae),function(t){xae(t)}),UE({target:jE,stat:!0,forced:!Np},{useSetter:function(){nw=!0},useSimple:function(){nw=!1}}),UE({target:"Object",stat:!0,forced:!Np,sham:!xp},{create:function(t,n){return n===void 0?o0(t):ow(o0(t),n)},defineProperty:HE,defineProperties:ow,getOwnPropertyDescriptor:DF}),UE({target:"Object",stat:!0,forced:!Np},{getOwnPropertyNames:PF}),Nae(),Dae(Yd,jE),TF[ja]=!0;var kF=Nt&&!!Symbol.for&&!!Symbol.keyFor,Fae=ir,Uae=Wt,Bae=An,Vae=ss,MF=Dt,jae=kF,aw=MF("string-to-symbol-registry"),$ae=MF("symbol-to-string-registry");Fae({target:"Symbol",stat:!0,forced:!jae},{for:function(t){var n=Vae(t);if(Bae(aw,n))return aw[n];var i=Uae("Symbol")(n);return aw[n]=i,$ae[i]=n,i}});var Hae=ir,Wae=An,zae=Vt,Gae=$t,Kae=kF,FF=Dt("symbol-to-string-registry");Hae({target:"Symbol",stat:!0,forced:!Kae},{keyFor:function(t){if(!zae(t))throw TypeError(Gae(t)+" is not a symbol");if(Wae(FF,t))return FF[t]}});var UF=i0,qae=Q,BF=H,Yae=ss,VF=b([].push),Xae=ir,jF=Wt,$F=L,Jae=de,c0=b,HF=d,WF=Q,zF=Vt,GF=ZT,Qae=function(t){if(qae(t))return t;if(UF(t)){for(var n=t.length,i=[],a=0;a<n;a++){var l=t[a];typeof l=="string"?VF(i,l):typeof l!="number"&&BF(l)!="Number"&&BF(l)!="String"||VF(i,Yae(l))}var u=i.length,h=!0;return function(f,g){if(h)return h=!1,g;if(UF(this))return g;for(var _=0;_<u;_++)if(i[_]===f)return g}}},Zae=Nt,ese=String,ku=jF("JSON","stringify"),WE=c0(/./.exec),KF=c0("".charAt),tse=c0("".charCodeAt),nse=c0("".replace),rse=c0(1 .toString),ise=/[\uD800-\uDFFF]/g,qF=/^[\uD800-\uDBFF]$/,YF=/^[\uDC00-\uDFFF]$/,XF=!Zae||HF(function(){var t=jF("Symbol")();return ku([t])!="[null]"||ku({a:t})!="{}"||ku(Object(t))!="{}"}),JF=HF(function(){return ku("\uDF06\uD834")!=='"\\udf06\\ud834"'||ku("\uDEAD")!=='"\\udead"'}),ose=function(t,n){var i=GF(arguments),a=Qae(n);if(WF(a)||t!==void 0&&!zF(t))return i[1]=function(l,u){if(WF(a)&&(u=Jae(a,this,ese(l),u)),!zF(u))return u},$F(ku,null,i)},ase=function(t,n,i){var a=KF(i,n-1),l=KF(i,n+1);return WE(qF,t)&&!WE(YF,l)||WE(YF,t)&&!WE(qF,a)?"\\u"+rse(tse(t,0),16):t};ku&&Xae({target:"JSON",stat:!0,arity:3,forced:XF||JF},{stringify:function(t,n,i){var a=GF(arguments),l=$F(XF?ose:ku,null,a);return JF&&typeof l=="string"?nse(l,ise,ase):l}});var QF=Wm,sse=Yn;ir({target:"Object",stat:!0,forced:!Nt||d(function(){QF.f(1)})},{getOwnPropertySymbols:function(t){var n=QF.f;return n?n(sse(t)):[]}}),Wi("asyncIterator"),Wi("hasInstance"),Wi("isConcatSpreadable"),Wi("iterator"),Wi("match"),Wi("matchAll"),Wi("replace"),Wi("search"),Wi("species"),Wi("split");var cse=mF;Wi("toPrimitive"),cse();var lse=Wt,use=Nu;Wi("toStringTag"),use(lse("Symbol"),"Symbol"),Wi("unscopables"),Nu(I.JSON,"JSON",!0);var dse=ct.Symbol,hse=Lt,pse=Ls.f,ZF=hse("metadata"),eU=Function.prototype;eU[ZF]===void 0&&pse(eU,ZF,{value:null}),Wi("dispose"),Wi("metadata");var fse=dse;Wi("asyncDispose");var mse=b,sw=Wt("Symbol"),gse=sw.keyFor,vse=mse(sw.prototype.valueOf),tU=sw.isRegisteredSymbol||function(t){try{return gse(vse(t))!==void 0}catch{return!1}};ir({target:"Symbol",stat:!0},{isRegisteredSymbol:tU});for(var Ese=Dt,nU=Wt,_se=b,Sse=Vt,yse=Lt,zE=nU("Symbol"),rU=zE.isWellKnownSymbol,iU=nU("Object","getOwnPropertyNames"),Cse=_se(zE.prototype.valueOf),oU=Ese("wks"),cw=0,aU=iU(zE),bse=aU.length;cw<bse;cw++)try{var sU=aU[cw];Sse(zE[sU])&&yse(sU)}catch{}var cU=function(t){if(rU&&rU(t))return!0;try{for(var n=Cse(t),i=0,a=iU(oU),l=a.length;i<l;i++)if(oU[a[i]]==n)return!0}catch{}return!1};ir({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:cU}),Wi("matcher"),Wi("observable"),ir({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:tU}),ir({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:cU}),Wi("metadataKey"),Wi("patternMatch"),Wi("replaceAll");var Dp=c(fse),lU=c(Op.f("iterator"));function l0(t){return l0=typeof Dp=="function"&&typeof lU=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Dp=="function"&&n.constructor===Dp&&n!==Dp.prototype?"symbol":typeof n},l0(t)}var Tse=c(Op.f("toPrimitive"));function Rse(t){var n=function(i,a){if(l0(i)!=="object"||i===null)return i;var l=i[Tse];if(l!==void 0){var u=l.call(i,a||"default");if(l0(u)!=="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(i)}(t,"string");return l0(n)==="symbol"?n:String(n)}function V(t,n,i){return(n=Rse(n))in t?rF(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i,t}var wse=d,Ise=Lt("iterator"),lw=!wse(function(){var t=new URL("b?a=1&b=2&c=3","http://a"),n=t.searchParams,i=new URLSearchParams("a=1&a=2"),a="";return t.pathname="c%20d",n.forEach(function(l,u){n.delete("b"),a+=u+l}),i.delete("a",2),!t.toJSON||!i.has("a",1)||i.has("a",2)||!n.size&&!0||!n.sort||t.href!=="http://a/c%20d?a=1&c=3"||n.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!n[Ise]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("http://тест").host!=="xn--e1aybc"||new URL("http://a#б").hash!=="#%D0%B1"||a!=="a1c3"||new URL("http://x",void 0).host!=="x"}),Ase=xu,uw=ir,Pp=I,GE=de,al=b,Lp=oe,uU=lw,dU=xu,Ose=EE,xse=function(t,n,i){for(var a in n)i&&i.unsafe&&t[a]?t[a]=n[a]:Ase(t,a,n[a],i);return t},Nse=Nu,Dse=zT,dw=Gd,hU=qT,hw=Q,Pse=An,Lse=Au,kse=nl,Mse=na,pU=je,ba=ss,Fse=zm,fU=we,pw=kT,Use=uE,kp=SE,Bse=bM,Vse=Lt("iterator"),u0="URLSearchParams",mU=u0+"Iterator",gU=dw.set,Fs=dw.getterFor(u0),jse=dw.getterFor(mU),$se=Object.getOwnPropertyDescriptor,fw=function(t){if(!Lp)return Pp[t];var n=$se(Pp,t);return n&&n.value},vU=fw("fetch"),KE=fw("Request"),d0=fw("Headers"),mw=KE&&KE.prototype,EU=d0&&d0.prototype,Hse=Pp.RegExp,Wse=Pp.TypeError,_U=Pp.decodeURIComponent,zse=Pp.encodeURIComponent,Gse=al("".charAt),SU=al([].join),Jd=al([].push),gw=al("".replace),Kse=al([].shift),yU=al([].splice),CU=al("".split),qse=al("".slice),Yse=/\+/g,bU=Array(4),Xse=function(t){return bU[t-1]||(bU[t-1]=Hse("((?:%[\\da-f]{2}){"+t+"})","gi"))},Jse=function(t){try{return _U(t)}catch{return t}},TU=function(t){var n=gw(t,Yse," "),i=4;try{return _U(n)}catch{for(;i;)n=gw(n,Xse(i--),Jse);return n}},Qse=/[!'()~]|%20/g,Zse={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},ece=function(t){return Zse[t]},RU=function(t){return gw(zse(t),Qse,ece)},vw=Dse(function(t,n){gU(this,{type:mU,iterator:pw(Fs(t).entries),kind:n})},"Iterator",function(){var t=jse(this),n=t.kind,i=t.iterator.next(),a=i.value;return i.done||(i.value=n==="keys"?a.key:n==="values"?a.value:[a.key,a.value]),i},!0),wU=function(t){this.entries=[],this.url=null,t!==void 0&&(pU(t)?this.parseObject(t):this.parseQuery(typeof t=="string"?Gse(t,0)==="?"?qse(t,1):t:ba(t)))};wU.prototype={type:u0,bindURL:function(t){this.url=t,this.update()},parseObject:function(t){var n,i,a,l,u,h,f,g=Use(t);if(g)for(i=(n=pw(t,g)).next;!(a=GE(i,n)).done;){if(u=(l=pw(Mse(a.value))).next,(h=GE(u,l)).done||(f=GE(u,l)).done||!GE(u,l).done)throw Wse("Expected sequence with length 2");Jd(this.entries,{key:ba(h.value),value:ba(f.value)})}else for(var _ in t)Pse(t,_)&&Jd(this.entries,{key:_,value:ba(t[_])})},parseQuery:function(t){if(t)for(var n,i,a=CU(t,"&"),l=0;l<a.length;)(n=a[l++]).length&&(i=CU(n,"="),Jd(this.entries,{key:TU(Kse(i)),value:TU(SU(i,"="))}))},serialize:function(){for(var t,n=this.entries,i=[],a=0;a<n.length;)t=n[a++],Jd(i,RU(t.key)+"="+RU(t.value));return SU(i,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var qE=function(){hU(this,Mp);var t=gU(this,new wU(arguments.length>0?arguments[0]:void 0));Lp||(this.size=t.entries.length)},Mp=qE.prototype;if(xse(Mp,{append:function(t,n){var i=Fs(this);kp(arguments.length,2),Jd(i.entries,{key:ba(t),value:ba(n)}),Lp||this.length++,i.updateURL()},delete:function(t){for(var n=Fs(this),i=kp(arguments.length,1),a=n.entries,l=ba(t),u=i<2?void 0:arguments[1],h=u===void 0?u:ba(u),f=0;f<a.length;){var g=a[f];if(g.key!==l||h!==void 0&&g.value!==h)f++;else if(yU(a,f,1),h!==void 0)break}Lp||(this.size=a.length),n.updateURL()},get:function(t){var n=Fs(this).entries;kp(arguments.length,1);for(var i=ba(t),a=0;a<n.length;a++)if(n[a].key===i)return n[a].value;return null},getAll:function(t){var n=Fs(this).entries;kp(arguments.length,1);for(var i=ba(t),a=[],l=0;l<n.length;l++)n[l].key===i&&Jd(a,n[l].value);return a},has:function(t){for(var n=Fs(this).entries,i=kp(arguments.length,1),a=ba(t),l=i<2?void 0:arguments[1],u=l===void 0?l:ba(l),h=0;h<n.length;){var f=n[h++];if(f.key===a&&(u===void 0||f.value===u))return!0}return!1},set:function(t,n){var i=Fs(this);kp(arguments.length,1);for(var a,l=i.entries,u=!1,h=ba(t),f=ba(n),g=0;g<l.length;g++)(a=l[g]).key===h&&(u?yU(l,g--,1):(u=!0,a.value=f));u||Jd(l,{key:h,value:f}),Lp||(this.size=l.length),i.updateURL()},sort:function(){var t=Fs(this);Bse(t.entries,function(n,i){return n.key>i.key?1:-1}),t.updateURL()},forEach:function(t){for(var n,i=Fs(this).entries,a=Lse(t,arguments.length>1?arguments[1]:void 0),l=0;l<i.length;)a((n=i[l++]).value,n.key,this)},keys:function(){return new vw(this,"keys")},values:function(){return new vw(this,"values")},entries:function(){return new vw(this,"entries")}},{enumerable:!0}),dU(Mp,Vse,Mp.entries,{name:"entries"}),dU(Mp,"toString",function(){return Fs(this).serialize()},{enumerable:!0}),Lp&&Ose(Mp,"size",{get:function(){return Fs(this).entries.length},configurable:!0,enumerable:!0}),Nse(qE,u0),uw({global:!0,constructor:!0,forced:!uU},{URLSearchParams:qE}),!uU&&hw(d0)){var tce=al(EU.has),nce=al(EU.set),IU=function(t){if(pU(t)){var n,i=t.body;if(kse(i)===u0)return n=t.headers?new d0(t.headers):new d0,tce(n,"content-type")||nce(n,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),Fse(t,{body:fU(0,ba(i)),headers:fU(0,n)})}return t};if(hw(vU)&&uw({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(t){return vU(t,arguments.length>1?IU(arguments[1]):{})}}),hw(KE)){var Ew=function(t){return hU(this,mw),new KE(t,arguments.length>1?IU(arguments[1]):{})};mw.constructor=Ew,Ew.prototype=mw,uw({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:Ew})}}var rce={URLSearchParams:qE,getState:Fs},AU=c(ct.URLSearchParams),ice={isBrowser:!0,classes:{URLSearchParams:AU!==void 0?AU:qR,FormData:typeof FormData<"u"?FormData:null,Blob:typeof Blob<"u"?Blob:null},protocols:["http","https","file","blob","url","data"]};const OU=typeof window<"u"&&typeof document<"u",oce=(xU=typeof navigator<"u"&&navigator.product,OU&&["ReactNative","NativeScript","NS"].indexOf(xU)<0);var xU;const ace=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function";function NU(t,n){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),i.push.apply(i,a)}return i}function DU(t){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?NU(Object(i),!0).forEach(function(a){V(t,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):NU(Object(i)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(i,a))})}return t}var sl=DU(DU({},Object.freeze({__proto__:null,hasBrowserEnv:OU,hasStandardBrowserEnv:oce,hasStandardBrowserWebWorkerEnv:ace})),ice),sce=na,cce=de,lce=An,uce=R,dce=function(){var t=sce(this),n="";return t.hasIndices&&(n+="d"),t.global&&(n+="g"),t.ignoreCase&&(n+="i"),t.multiline&&(n+="m"),t.dotAll&&(n+="s"),t.unicode&&(n+="u"),t.unicodeSets&&(n+="v"),t.sticky&&(n+="y"),n},PU=RegExp.prototype,LU=function(t){var n=t.flags;return n!==void 0||"flags"in PU||lce(t,"flags")||!uce(PU,t)?n:cce(dce,t)},hce=RR.charAt,kU=de,pce=na,fce=Q,mce=H,gce=/./.exec,vce=TypeError,Ece=ir,MU=de,FU=q,_ce=zT,YE=KT,UU=xe,BU=N2,h0=ss,Sce=na,yce=ze,Cce=H,bce=P2,VU=LU,Tce=en,Rce=d,wce=QT,Ice=function(t,n,i){return n+(i?hce(t,n).length:1)},Ace=function(t,n){var i=t.exec;if(fce(i)){var a=kU(i,t,n);return a!==null&&pce(a),a}if(mce(t)==="RegExp")return kU(gce,t,n);throw vce("RegExp#exec called on incompatible receiver")},jU=Gd,Oce=Lt("matchAll"),$U="RegExp String",HU=$U+" Iterator",xce=jU.set,Nce=jU.getterFor(HU),Dce=TypeError,_w=FU("".indexOf),XE=FU("".matchAll),Sw=!!XE&&!Rce(function(){XE("a",/./)}),Pce=_ce(function(t,n,i,a){xce(this,{type:HU,regexp:t,string:n,global:i,unicode:a,done:!1})},$U,function(){var t=Nce(this);if(t.done)return YE(void 0,!0);var n=t.regexp,i=t.string,a=Ace(n,i);return a===null?(t.done=!0,YE(void 0,!0)):t.global?(h0(a[0])===""&&(n.lastIndex=Ice(i,BU(n.lastIndex),t.unicode)),YE(a,!1)):(t.done=!0,YE(a,!1))}),WU=function(t){var n,i,a,l=Sce(this),u=h0(t),h=wce(l,RegExp),f=h0(VU(l));return n=new h(h===RegExp?l.source:l,f),i=!!~_w(f,"g"),a=!!~_w(f,"u"),n.lastIndex=BU(l.lastIndex),new Pce(n,u,i,a)};Ece({target:"String",proto:!0,forced:Sw},{matchAll:function(t){var n,i,a,l,u=UU(this);if(yce(t)){if(Sw)return XE(u,t)}else{if(bce(t)&&(n=h0(UU(VU(t))),!~_w(n,"g")))throw Dce("`.matchAll` does not allow non-global regexes");if(Sw)return XE(u,t);if((a=Tce(t,Oce))===void 0&&Cce(t)=="RegExp"&&(a=WU),a)return MU(a,t,u)}return i=h0(u),l=new RegExp(t,"g"),MU(WU,l,i)}});var Lce=ks("String").matchAll,kce=R,Mce=Lce,yw=String.prototype,Fce=function(t){var n=t.matchAll;return typeof t=="string"||t===yw||kce(yw,t)&&n===yw.matchAll?Mce:n},Uce=c(Fce);function zU(t){function n(i,a,l,u){let h=i[u++];if(h==="__proto__")return!0;const f=Number.isFinite(+h),g=u>=i.length;return h=!h&&it.isArray(l)?l.length:h,g?(it.hasOwnProp(l,h)?l[h]=[l[h],a]:l[h]=a,!f):(l[h]&&it.isObject(l[h])||(l[h]=[]),n(i,a,l[h],u)&&it.isArray(l[h])&&(l[h]=function(_){const y={},T=Object.keys(_);let A;const D=T.length;let W;for(A=0;A<D;A++)W=T[A],y[W]=_[W];return y}(l[h])),!f)}if(it.isFormData(t)&&it.isFunction(t.entries)){const i={};return it.forEachEntry(t,(a,l)=>{n(function(u){return Uce(it).call(it,/\w+|\[(\w*)]/g,u).map(h=>h[0]==="[]"?"":h[1]||h[0])}(a),l,i,0)}),i}return null}const Cw={transitional:ZM,adapter:["xhr","http"],transformRequest:[function(t,n){const i=n.getContentType()||"",a=i.indexOf("application/json")>-1,l=it.isObject(t);if(l&&it.isHTMLForm(t)&&(t=new FormData(t)),it.isFormData(t))return a?JSON.stringify(zU(t)):t;if(it.isArrayBuffer(t)||it.isBuffer(t)||it.isStream(t)||it.isFile(t)||it.isBlob(t))return t;if(it.isArrayBufferView(t))return t.buffer;if(it.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let u;if(l){if(i.indexOf("application/x-www-form-urlencoded")>-1)return function(h,f){return FE(h,new sl.classes.URLSearchParams,Object.assign({visitor:function(g,_,y,T){return sl.isNode&&it.isBuffer(g)?(this.append(_,g.toString("base64")),!1):T.defaultVisitor.apply(this,arguments)}},f))}(t,this.formSerializer).toString();if((u=it.isFileList(t))||i.indexOf("multipart/form-data")>-1){const h=this.env&&this.env.FormData;return FE(u?{"files[]":t}:t,h&&new h,this.formSerializer)}}return l||a?(n.setContentType("application/json",!1),function(h,f,g){if(it.isString(h))try{return(f||JSON.parse)(h),go(it).call(it,h)}catch(_){if(_.name!=="SyntaxError")throw _}return(g||JSON.stringify)(h)}(t)):t}],transformResponse:[function(t){const n=this.transitional||Cw.transitional,i=n&&n.forcedJSONParsing,a=this.responseType==="json";if(t&&it.isString(t)&&(i&&!this.responseType||a)){const l=!(n&&n.silentJSONParsing)&&a;try{return JSON.parse(t)}catch(u){if(l)throw u.name==="SyntaxError"?wr.from(u,wr.ERR_BAD_RESPONSE,this,null,this.response):u}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:sl.classes.FormData,Blob:sl.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};it.forEach(["delete","get","head","post","put","patch"],t=>{Cw.headers[t]={}});var bw=Cw;const Bce=it.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),GU=Symbol("internals");function p0(t){var n;return t&&go(n=String(t)).call(n).toLowerCase()}function JE(t){return t===!1||t==null?t:it.isArray(t)?t.map(JE):String(t)}function Tw(t,n,i,a,l){return it.isFunction(a)?a.call(this,n,i):(l&&(n=i),it.isString(n)?it.isString(a)?n.indexOf(a)!==-1:it.isRegExp(a)?a.test(n):void 0:void 0)}class QE{constructor(n){n&&this.set(n)}set(n,i,a){const l=this;function u(g,_,y){const T=p0(_);if(!T)throw new Error("header name must be a non-empty string");const A=it.findKey(l,T);(!A||l[A]===void 0||y===!0||y===void 0&&l[A]!==!1)&&(l[A||_]=JE(g))}const h=(g,_)=>it.forEach(g,(y,T)=>u(y,T,_));var f;return it.isPlainObject(n)||n instanceof this.constructor?h(n,i):it.isString(n)&&(n=go(n).call(n))&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(go(f=n).call(f))?h((g=>{const _={};let y,T,A;return g&&g.split(`
`).forEach(function(D){var W,F;A=D.indexOf(":"),y=go(W=D.substring(0,A)).call(W).toLowerCase(),T=go(F=D.substring(A+1)).call(F),!y||_[y]&&Bce[y]||(y==="set-cookie"?_[y]?_[y].push(T):_[y]=[T]:_[y]=_[y]?_[y]+", "+T:T)}),_})(n),i):n!=null&&u(i,n,a),this}get(n,i){if(n=p0(n)){const a=it.findKey(this,n);if(a){const l=this[a];if(!i)return l;if(i===!0)return function(u){const h=Object.create(null),f=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let g;for(;g=f.exec(u);)h[g[1]]=g[2];return h}(l);if(it.isFunction(i))return i.call(this,l,a);if(it.isRegExp(i))return i.exec(l);throw new TypeError("parser must be boolean|regexp|function")}}}has(n,i){if(n=p0(n)){const a=it.findKey(this,n);return!(!a||this[a]===void 0||i&&!Tw(0,this[a],a,i))}return!1}delete(n,i){const a=this;let l=!1;function u(h){if(h=p0(h)){const f=it.findKey(a,h);!f||i&&!Tw(0,a[f],f,i)||(delete a[f],l=!0)}}return it.isArray(n)?n.forEach(u):u(n),l}clear(n){const i=Object.keys(this);let a=i.length,l=!1;for(;a--;){const u=i[a];n&&!Tw(0,this[u],u,n,!0)||(delete this[u],l=!0)}return l}normalize(n){const i=this,a={};return it.forEach(this,(l,u)=>{var h;const f=it.findKey(a,u);if(f)return i[f]=JE(l),void delete i[u];const g=n?function(_){return go(_).call(_).toLowerCase().replace(/([a-z\d])(\w*)/g,(y,T,A)=>T.toUpperCase()+A)}(u):go(h=String(u)).call(h);g!==u&&delete i[u],i[g]=JE(l),a[g]=!0}),this}concat(){for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return this.constructor.concat(this,...i)}toJSON(n){const i=Object.create(null);return it.forEach(this,(a,l)=>{a!=null&&a!==!1&&(i[l]=n&&it.isArray(a)?a.join(", "):a)}),i}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(n=>{let[i,a]=n;return i+": "+a}).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(n){return n instanceof this?n:new this(n)}static concat(n){const i=new this(n);for(var a=arguments.length,l=new Array(a>1?a-1:0),u=1;u<a;u++)l[u-1]=arguments[u];return l.forEach(h=>i.set(h)),i}static accessor(n){const i=(this[GU]=this[GU]={accessors:{}}).accessors,a=this.prototype;function l(u){const h=p0(u);i[h]||(function(f,g){const _=it.toCamelCase(" "+g);["get","set","has"].forEach(y=>{Object.defineProperty(f,y+_,{value:function(T,A,D){return this[y].call(this,g,T,A,D)},configurable:!0})})}(a,u),i[h]=!0)}return it.isArray(n)?n.forEach(l):l(n),this}}QE.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),it.reduceDescriptors(QE.prototype,(t,n)=>{let{value:i}=t,a=n[0].toUpperCase()+n.slice(1);return{get:()=>i,set(l){this[a]=l}}}),it.freezeMethods(QE);var jl=QE;function Rw(t,n){const i=this||bw,a=n||i,l=jl.from(a.headers);let u=a.data;return it.forEach(t,function(h){u=h.call(i,u,l.normalize(),n?n.status:void 0)}),l.normalize(),u}function KU(t){return!(!t||!t.__CANCEL__)}function f0(t,n,i){wr.call(this,t??"canceled",wr.ERR_CANCELED,n,i),this.name="CanceledError"}it.inherits(f0,wr,{__CANCEL__:!0});var Vce=sl.hasStandardBrowserEnv?{write(t,n,i,a,l,u){const h=[t+"="+encodeURIComponent(n)];it.isNumber(i)&&h.push("expires="+new Date(i).toGMTString()),it.isString(a)&&h.push("path="+a),it.isString(l)&&h.push("domain="+l),u===!0&&h.push("secure"),document.cookie=h.join("; ")},read(t){const n=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function qU(t,n){return t&&!function(i){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(i)}(n)?function(i,a){return a?i.replace(/\/?\/$/,"")+"/"+a.replace(/^\/+/,""):i}(t,n):n}var jce=sl.hasStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let i;function a(l){let u=l;return t&&(n.setAttribute("href",u),u=n.href),n.setAttribute("href",u),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return i=a(window.location.href),function(l){const u=it.isString(l)?a(l):l;return u.protocol===i.protocol&&u.host===i.host}}():function(){return!0};function YU(t,n){let i=0;const a=function(l,u){l=l||10;const h=new Array(l),f=new Array(l);let g,_=0,y=0;return u=u!==void 0?u:1e3,function(T){const A=Date.now(),D=f[y];g||(g=A),h[_]=T,f[_]=A;let W=y,F=0;for(;W!==_;)F+=h[W++],W%=l;if(_=(_+1)%l,_===y&&(y=(y+1)%l),A-g<u)return;const U=D&&A-D;return U?Math.round(1e3*F/U):void 0}}(50,250);return l=>{const u=l.loaded,h=l.lengthComputable?l.total:void 0,f=u-i,g=a(f);i=u;const _={loaded:u,total:h,progress:h?u/h:void 0,bytes:f,rate:g||void 0,estimated:g&&h&&u<=h?(h-u)/g:void 0,event:l};_[n?"download":"upload"]=!0,t(_)}}var $ce=typeof XMLHttpRequest<"u"&&function(t){return new We(function(n,i){let a=t.data;const l=jl.from(t.headers).normalize();let u,h,{responseType:f,withXSRFToken:g}=t;function _(){t.cancelToken&&t.cancelToken.unsubscribe(u),t.signal&&t.signal.removeEventListener("abort",u)}if(it.isFormData(a)){if(sl.hasStandardBrowserEnv||sl.hasStandardBrowserWebWorkerEnv)l.setContentType(!1);else if((h=l.getContentType())!==!1){const[W,...F]=h?h.split(";").map(U=>go(U).call(U)).filter(Boolean):[];l.setContentType([W||"multipart/form-data",...F].join("; "))}}let y=new XMLHttpRequest;if(t.auth){const W=t.auth.username||"",F=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";l.set("Authorization","Basic "+btoa(W+":"+F))}const T=qU(t.baseURL,t.url);function A(){if(!y)return;const W=jl.from("getAllResponseHeaders"in y&&y.getAllResponseHeaders());(function(F,U,z){const X=z.config.validateStatus;z.status&&X&&!X(z.status)?U(new wr("Request failed with status code "+z.status,[wr.ERR_BAD_REQUEST,wr.ERR_BAD_RESPONSE][Math.floor(z.status/100)-4],z.config,z.request,z)):F(z)})(function(F){n(F),_()},function(F){i(F),_()},{data:f&&f!=="text"&&f!=="json"?y.response:y.responseText,status:y.status,statusText:y.statusText,headers:W,config:t,request:y}),y=null}if(y.open(t.method.toUpperCase(),JM(T,t.params,t.paramsSerializer),!0),y.timeout=t.timeout,"onloadend"in y?y.onloadend=A:y.onreadystatechange=function(){y&&y.readyState===4&&(y.status!==0||y.responseURL&&y.responseURL.indexOf("file:")===0)&&setTimeout(A)},y.onabort=function(){y&&(i(new wr("Request aborted",wr.ECONNABORTED,t,y)),y=null)},y.onerror=function(){i(new wr("Network Error",wr.ERR_NETWORK,t,y)),y=null},y.ontimeout=function(){let W=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const F=t.transitional||ZM;t.timeoutErrorMessage&&(W=t.timeoutErrorMessage),i(new wr(W,F.clarifyTimeoutError?wr.ETIMEDOUT:wr.ECONNABORTED,t,y)),y=null},sl.hasStandardBrowserEnv&&(g&&it.isFunction(g)&&(g=g(t)),g||g!==!1&&jce(T))){const W=t.xsrfHeaderName&&t.xsrfCookieName&&Vce.read(t.xsrfCookieName);W&&l.set(t.xsrfHeaderName,W)}a===void 0&&l.setContentType(null),"setRequestHeader"in y&&it.forEach(l.toJSON(),function(W,F){y.setRequestHeader(F,W)}),it.isUndefined(t.withCredentials)||(y.withCredentials=!!t.withCredentials),f&&f!=="json"&&(y.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&y.addEventListener("progress",YU(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&y.upload&&y.upload.addEventListener("progress",YU(t.onUploadProgress)),(t.cancelToken||t.signal)&&(u=W=>{y&&(i(!W||W.type?new f0(null,t,y):W),y.abort(),y=null)},t.cancelToken&&t.cancelToken.subscribe(u),t.signal&&(t.signal.aborted?u():t.signal.addEventListener("abort",u)));const D=function(W){const F=/^([-+\w]{1,25})(:?\/\/|:)/.exec(W);return F&&F[1]||""}(T);D&&sl.protocols.indexOf(D)===-1?i(new wr("Unsupported protocol "+D+":",wr.ERR_BAD_REQUEST,t)):y.send(a||null)})};const ww={http:null,xhr:$ce};it.forEach(ww,(t,n)=>{if(t){try{Object.defineProperty(t,"name",{value:n})}catch{}Object.defineProperty(t,"adapterName",{value:n})}});const XU=t=>"- ".concat(t),Hce=t=>it.isFunction(t)||t===null||t===!1;var JU={getAdapter:t=>{t=it.isArray(t)?t:[t];const{length:n}=t;let i,a;const l={};for(let u=0;u<n;u++){let h;if(i=t[u],a=i,!Hce(i)&&(a=ww[(h=String(i)).toLowerCase()],a===void 0))throw new wr("Unknown adapter '".concat(h,"'"));if(a)break;l[h||"#"+u]=a}if(!a){const u=Object.entries(l).map(h=>{let[f,g]=h;return"adapter ".concat(f," ")+(g===!1?"is not supported by the environment":"is not available in the build")});throw new wr("There is no suitable adapter to dispatch the request "+(n?u.length>1?`since :
`+u.map(XU).join(`
`):" "+XU(u[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return a},adapters:ww};function Iw(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new f0(null,t)}function QU(t){return Iw(t),t.headers=jl.from(t.headers),t.data=Rw.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),JU.getAdapter(t.adapter||bw.adapter)(t).then(function(n){return Iw(t),n.data=Rw.call(t,t.transformResponse,n),n.headers=jl.from(n.headers),n},function(n){return KU(n)||(Iw(t),n&&n.response&&(n.response.data=Rw.call(t,t.transformResponse,n.response),n.response.headers=jl.from(n.response.headers))),We.reject(n)})}function ZU(t,n){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),i.push.apply(i,a)}return i}const e4=t=>t instanceof jl?function(n){for(var i=1;i<arguments.length;i++){var a=arguments[i]!=null?arguments[i]:{};i%2?ZU(Object(a),!0).forEach(function(l){V(n,l,a[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):ZU(Object(a)).forEach(function(l){Object.defineProperty(n,l,Object.getOwnPropertyDescriptor(a,l))})}return n}({},t):t;function Fp(t,n){n=n||{};const i={};function a(_,y,T){return it.isPlainObject(_)&&it.isPlainObject(y)?it.merge.call({caseless:T},_,y):it.isPlainObject(y)?it.merge({},y):it.isArray(y)?y.slice():y}function l(_,y,T){return it.isUndefined(y)?it.isUndefined(_)?void 0:a(void 0,_,T):a(_,y,T)}function u(_,y){if(!it.isUndefined(y))return a(void 0,y)}function h(_,y){return it.isUndefined(y)?it.isUndefined(_)?void 0:a(void 0,_):a(void 0,y)}function f(_,y,T){return T in n?a(_,y):T in t?a(void 0,_):void 0}const g={url:u,method:u,data:u,baseURL:h,transformRequest:h,transformResponse:h,paramsSerializer:h,timeout:h,timeoutMessage:h,withCredentials:h,withXSRFToken:h,adapter:h,responseType:h,xsrfCookieName:h,xsrfHeaderName:h,onUploadProgress:h,onDownloadProgress:h,decompress:h,maxContentLength:h,maxBodyLength:h,beforeRedirect:h,transport:h,httpAgent:h,httpsAgent:h,cancelToken:h,socketPath:h,responseEncoding:h,validateStatus:f,headers:(_,y)=>l(e4(_),e4(y),!0)};return it.forEach(Object.keys(Object.assign({},t,n)),function(_){const y=g[_]||l,T=y(t[_],n[_],_);it.isUndefined(T)&&y!==f||(i[_]=T)}),i}const t4="1.6.8",Aw={};["object","boolean","number","function","string","symbol"].forEach((t,n)=>{Aw[t]=function(i){return typeof i===t||"a"+(n<1?"n ":" ")+t}});const n4={};Aw.transitional=function(t,n,i){function a(l,u){return"[Axios v"+t4+"] Transitional option '"+l+"'"+u+(i?". "+i:"")}return(l,u,h)=>{if(t===!1)throw new wr(a(u," has been removed"+(n?" in "+n:"")),wr.ERR_DEPRECATED);return n&&!n4[u]&&(n4[u]=!0,console.warn(a(u," has been deprecated since v"+n+" and will be removed in the near future"))),!t||t(l,u,h)}};var Ow={assertOptions:function(t,n,i){if(typeof t!="object")throw new wr("options must be an object",wr.ERR_BAD_OPTION_VALUE);const a=Object.keys(t);let l=a.length;for(;l-- >0;){const u=a[l],h=n[u];if(h){const f=t[u],g=f===void 0||h(f,u,t);if(g!==!0)throw new wr("option "+u+" must be "+g,wr.ERR_BAD_OPTION_VALUE)}else if(i!==!0)throw new wr("Unknown option "+u,wr.ERR_BAD_OPTION)}},validators:Aw};const Mu=Ow.validators;let ZE=class{constructor(t){this.defaults=t,this.interceptors={request:new QM,response:new QM}}async request(t,n){try{return await this._request(t,n)}catch(i){if(i instanceof Error){let a;Error.captureStackTrace?Error.captureStackTrace(a={}):a=new Error;const l=a.stack?a.stack.replace(/^.+\n/,""):"";i.stack?l&&!String(i.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+l):i.stack=l}throw i}}_request(t,n){typeof t=="string"?(n=n||{}).url=t:n=t||{},n=Fp(this.defaults,n);const{transitional:i,paramsSerializer:a,headers:l}=n;i!==void 0&&Ow.assertOptions(i,{silentJSONParsing:Mu.transitional(Mu.boolean),forcedJSONParsing:Mu.transitional(Mu.boolean),clarifyTimeoutError:Mu.transitional(Mu.boolean)},!1),a!=null&&(it.isFunction(a)?n.paramsSerializer={serialize:a}:Ow.assertOptions(a,{encode:Mu.function,serialize:Mu.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let u=l&&it.merge(l.common,l[n.method]);l&&it.forEach(["delete","get","head","post","put","patch","common"],D=>{delete l[D]}),n.headers=jl.concat(u,l);const h=[];let f=!0;this.interceptors.request.forEach(function(D){typeof D.runWhen=="function"&&D.runWhen(n)===!1||(f=f&&D.synchronous,h.unshift(D.fulfilled,D.rejected))});const g=[];let _;this.interceptors.response.forEach(function(D){g.push(D.fulfilled,D.rejected)});let y,T=0;if(!f){const D=[QU.bind(this),void 0];for(D.unshift.apply(D,h),D.push.apply(D,g),y=D.length,_=We.resolve(n);T<y;)_=_.then(D[T++],D[T++]);return _}y=h.length;let A=n;for(T=0;T<y;){const D=h[T++],W=h[T++];try{A=D(A)}catch(F){W.call(this,F);break}}try{_=QU.call(this,A)}catch(D){return We.reject(D)}for(T=0,y=g.length;T<y;)_=_.then(g[T++],g[T++]);return _}getUri(t){return JM(qU((t=Fp(this.defaults,t)).baseURL,t.url),t.params,t.paramsSerializer)}};it.forEach(["delete","get","head","options"],function(t){ZE.prototype[t]=function(n,i){return this.request(Fp(i||{},{method:t,url:n,data:(i||{}).data}))}}),it.forEach(["post","put","patch"],function(t){function n(i){return function(a,l,u){return this.request(Fp(u||{},{method:t,headers:i?{"Content-Type":"multipart/form-data"}:{},url:a,data:l}))}}ZE.prototype[t]=n(),ZE.prototype[t+"Form"]=n(!0)});var e_=ZE;class xw{constructor(n){if(typeof n!="function")throw new TypeError("executor must be a function.");let i;this.promise=new We(function(l){i=l});const a=this;this.promise.then(l=>{if(!a._listeners)return;let u=a._listeners.length;for(;u-- >0;)a._listeners[u](l);a._listeners=null}),this.promise.then=l=>{let u;const h=new We(f=>{a.subscribe(f),u=f}).then(l);return h.cancel=function(){a.unsubscribe(u)},h},n(function(l,u,h){a.reason||(a.reason=new f0(l,u,h),i(a.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(n){this.reason?n(this.reason):this._listeners?this._listeners.push(n):this._listeners=[n]}unsubscribe(n){if(!this._listeners)return;const i=this._listeners.indexOf(n);i!==-1&&this._listeners.splice(i,1)}static source(){let n;return{token:new xw(function(i){n=i}),cancel:n}}}var Wce=xw;const Nw={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Nw).forEach(t=>{let[n,i]=t;Nw[i]=n});var zce=Nw;const oo=function t(n){const i=new e_(n),a=kM(e_.prototype.request,i);return it.extend(a,e_.prototype,i,{allOwnKeys:!0}),it.extend(a,i,null,{allOwnKeys:!0}),a.create=function(l){return t(Fp(n,l))},a}(bw);oo.Axios=e_,oo.CanceledError=f0,oo.CancelToken=Wce,oo.isCancel=KU,oo.VERSION=t4,oo.toFormData=FE,oo.AxiosError=wr,oo.Cancel=oo.CanceledError,oo.all=function(t){return We.all(t)},oo.spread=function(t){return function(n){return t.apply(null,n)}},oo.isAxiosError=function(t){return it.isObject(t)&&t.isAxiosError===!0},oo.mergeConfig=Fp,oo.AxiosHeaders=jl,oo.formToJSON=t=>zU(it.isHTMLForm(t)?new FormData(t):t),oo.getAdapter=JU.getAdapter,oo.HttpStatusCode=zce,oo.default=oo;var Go=oo;const Gce=()=>{};function m0(){const t={promise:void 0,isResolved:!1,isRejected:!1,isFinished:!1,resolve:void 0,reject:void 0,cancel:Gce};return t.promise=new We((n,i)=>{t.resolve=a=>{t.isFinished||(t.isResolved=!0,t.isFinished=!0,n(a),t.value=a)},t.reject=a=>{t.isFinished||(t.isRejected=!0,t.isFinished=!0,i(a))}}),t}const t_=new Map,n_=new Map,cl=new Map;let _i=function(t){return t.WIN_10="Windows 10",t.WIN_81="Windows 8.1",t.WIN_8="Windows 8",t.WIN_7="Windows 7",t.WIN_VISTA="Windows Vista",t.WIN_SERVER_2003="Windows Server 2003",t.WIN_XP="Windows XP",t.WIN_2000="Windows 2000",t.ANDROID="Android",t.HARMONY_OS="HarmonyOS",t.OPEN_BSD="Open BSD",t.SUN_OS="Sun OS",t.LINUX="Linux",t.IOS="iOS",t.MAC_OS="Mac OS",t.CHROMIUM_OS="Chromium OS",t.QNX="QNX",t.UNIX="UNIX",t.BEOS="BeOS",t.OS_2="OS/2",t.SEARCH_BOT="Search Bot",t}({}),Bn=function(t){return t.CHROME="Chrome",t.SAFARI="Safari",t.EDGE="Edge",t.FIREFOX="Firefox",t.OPERA="OPR",t.QQ="QQBrowser",t.WECHAT="MicroMessenger",t}({});const Dw=new poe;let Cc=Dw.getResult(),Pw=null;function _n(t){if(!Pw){t&&Dw.setUA(t),Cc=Dw.getResult();const n=function(f){if(f.engine.name==="Blink"&&f.browser.name!=="WeChat")return Bn.CHROME;switch(f.browser.name){case"Chrome Headless":case"Chrome":case"Chromium":return Bn.CHROME;case"Safari":case"Mobile Safari":return Bn.SAFARI;case"Edge":return Bn.EDGE;case"Firefox":return Bn.FIREFOX;case"QQ":case"QQBrowser":return Bn.QQ;case"Opera":return Bn.OPERA;case"WeChat":return Bn.WECHAT;default:return f.browser.name||""}}(Cc),i=r4(Cc),a=function(f){return f.os.name==="Windows"?f.os.version?f.os.name+" "+f.os.version:f.os.name:f.os.name||""}(Cc),l=Cc.os.version,u=r4(Cc,!1),h=Cc.device.type;if(!(n&&i&&a&&l))return{name:n,version:i,os:a,osVersion:l,browserVersion:u,deviceType:h};Pw={name:n,version:i,os:a,osVersion:l,browserVersion:u,deviceType:h}}return Pw}function r4(t){let n,i=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return n=t.engine.name==="Blink"?t.engine.version||"":t.browser.version||"",i?n.split(".")[0]:n}function r_(){return _n().os}function i4(){const t=_n();return"".concat(t.os," ").concat(t.osVersion)}function i_(){const t=_n();return!!(Cc.engine.name==="WebKit"&&t.os===_i.MAC_OS&&navigator.maxTouchPoints&&navigator.maxTouchPoints>0&&t.name!==Bn.SAFARI||Ji()&&t.name!==Bn.SAFARI)}function Fu(){return _n().name===Bn.CHROME}function Si(){return _n().name===Bn.SAFARI}function o4(){return _n().name===Bn.EDGE}function Zn(){return _n().name===Bn.FIREFOX}function Ji(){return _n().os===_i.IOS}function Lw(t){const n=_n();return!(n.name!==Bn.CHROME||!n.osVersion)&&Number(n.version)>=t}function a4(t){const n=_n();return!(n.name!==Bn.EDGE||!n.osVersion)&&Number(n.version)>=t}function s4(t){const n=_n();return!(n.name!==Bn.SAFARI||!n.osVersion)&&Number(n.version)>=t}function c4(t,n,i){const a=_n();if(a.os!==_i.IOS||!a.osVersion)return!1;const l=a.osVersion.split(".");return i?n&&Number(l[0])===t&&Number(l[1])<n||Number(l[0])<t:n?Number(l[0])===t&&Number(l[1])<=n||Number(l[0])<t:Number(l[0])<=t}function l4(t,n,i){const a=_n();if(a.name!==Bn.SAFARI||!a.osVersion||!a.browserVersion)return!1;const l=a.browserVersion.split(".");return i?n&&Number(l[0])===t&&Number(l[1])<n||Number(l[0])<t:n?Number(l[0])===t&&Number(l[1])<=n||Number(l[0])<t:Number(l[0])<=t}function u4(t){const n=_n();return!(n.name!==Bn.OPERA||!n.osVersion)&&Number(n.version)>=t}function d4(){const t=_n();return!(t.name!==Bn.CHROME||!t.osVersion)&&Number(t.version)<=90}function h4(){const t=_n();if(t.os!==_i.IOS||!t.osVersion)return!1;const n=t.osVersion.split(".");return Number(n[0])<14||Number(n[0])===14&&Number(n[1])<=6}function Up(){const t=_n();if(t.os!==_i.IOS||!t.osVersion)return!1;const n=t.osVersion.split(".");return Number(n[0])===15}function kw(){const t=_n();if(t.os!==_i.IOS||!t.osVersion)return!1;const n=t.osVersion.split(".");return Number(n[0])===16}function p4(){const t=_n();if(t.os!==_i.IOS||!t.osVersion)return!1;const n=t.osVersion.split(".");return Number(n[0])===15&&Number(n[1])>=1}function Us(){return Si()&&navigator.maxTouchPoints>0}function f4(){return _n().name===Bn.WECHAT}function m4(){return window.navigator.appVersion&&window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)!==null&&window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)[1]<=35}function Mw(){const t=r_();return function(){const{deviceType:n}=_n();return n==="mobile"||n==="tablet"}()||t===_i.ANDROID||t===_i.IOS||t===_i.HARMONY_OS}function Uu(){const t=_n();return t.name!==Bn.EDGE&&t.name!==Bn.SAFARI&&!!navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]./i)}function o_(){return r_()===_i.ANDROID}function g0(){const t=_n();return o_()&&(t.name===Bn.CHROME||t.name===Bn.WECHAT||/chrome|chromium/i.test(navigator.userAgent))}function g4(t,n){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),i.push.apply(i,a)}return i}function pt(t){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?g4(Object(i),!0).forEach(function(a){fr(t,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):g4(Object(i)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(i,a))})}return t}function fr(t,n,i){return(n=function(a){var l=function(u,h){if(typeof u!="object"||u===null)return u;var f=u[Symbol.toPrimitive];if(f!==void 0){var g=f.call(u,"string");if(typeof g!="object")return g;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(u)}(a);return typeof l=="symbol"?l:String(l)}(n))in t?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i,t}let K=function(t){return t.UNEXPECTED_ERROR="UNEXPECTED_ERROR",t.UNEXPECTED_RESPONSE="UNEXPECTED_RESPONSE",t.TIMEOUT="TIMEOUT",t.INVALID_PARAMS="INVALID_PARAMS",t.NOT_READABLE="NOT_READABLE",t.NOT_SUPPORTED="NOT_SUPPORTED",t.INVALID_OPERATION="INVALID_OPERATION",t.OPERATION_ABORTED="OPERATION_ABORTED",t.WEB_SECURITY_RESTRICT="WEB_SECURITY_RESTRICT",t.EXCHANGE_SDP_FAILED="EXCHANGE_SDP_FAILED",t.ADD_CANDIDATE_FAILED="ADD_CANDIDATE_FAILED",t.DATACHANNEL_FAILED="DATACHANNEL_FAILED",t.NETWORK_ERROR="NETWORK_ERROR",t.NETWORK_TIMEOUT="NETWORK_TIMEOUT",t.NETWORK_RESPONSE_ERROR="NETWORK_RESPONSE_ERROR",t.API_INVOKE_TIMEOUT="API_INVOKE_TIMEOUT",t.ENUMERATE_DEVICES_FAILED="ENUMERATE_DEVICES_FAILED",t.DEVICE_NOT_FOUND="DEVICE_NOT_FOUND",t.ELECTRON_IS_NULL="ELECTRON_IS_NULL",t.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR="ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR",t.CHROME_PLUGIN_NO_RESPONSE="CHROME_PLUGIN_NO_RESPONSE",t.CHROME_PLUGIN_NOT_INSTALL="CHROME_PLUGIN_NOT_INSTALL",t.MEDIA_OPTION_INVALID="MEDIA_OPTION_INVALID",t.PERMISSION_DENIED="PERMISSION_DENIED",t.CONSTRAINT_NOT_SATISFIED="CONSTRAINT_NOT_SATISFIED",t.TRACK_IS_DISABLED="TRACK_IS_DISABLED",t.GET_VIDEO_ELEMENT_VISIBLE_ERROR="GET_VIDEO_ELEMENT_VISIBLE_ERROR",t.SHARE_AUDIO_NOT_ALLOWED="SHARE_AUDIO_NOT_ALLOWED",t.LOW_STREAM_ENCODING_ERROR="LOW_STREAM_ENCODING_ERROR",t.SET_ENCODING_PARAMETER_ERROR="SET_ENCODING_PARAMETER_ERROR",t.TRACK_STATE_UNREACHABLE="TRACK_STATE_UNREACHABLE",t.INVALID_UINT_UID_FROM_STRING_UID="INVALID_UINT_UID_FROM_STRING_UID",t.CAN_NOT_GET_PROXY_SERVER="CAN_NOT_GET_PROXY_SERVER",t.CAN_NOT_GET_GATEWAY_SERVER="CAN_NOT_GET_GATEWAY_SERVER",t.VOID_GATEWAY_ADDRESS="VOID_GATEWAY_ADDRESS",t.UID_CONFLICT="UID_CONFLICT",t.MULTI_UNILBS_RESPONSE_ERROR="MULTI_UNILBS_RESPONSE_ERROR",t.UPDATE_TICKET_FAILED="UPDATE_TICKET_FAILED",t.INVALID_LOCAL_TRACK="INVALID_LOCAL_TRACK",t.INVALID_TRACK="INVALID_TRACK",t.SENDER_NOT_FOUND="SENDER_NOT_FOUND",t.CREATE_OFFER_FAILED="CREATE_OFFER_FAILED",t.SET_ANSWER_FAILED="SET_ANSWER_FAILED",t.ICE_FAILED="ICE_FAILED",t.PC_CLOSED="PC_CLOSED",t.SENDER_REPLACE_FAILED="SENDER_REPLACE_FAILED",t.GET_LOCAL_CAPABILITIES_FAILED="GET_LOCAL_CAPABILITIES_FAILED",t.GET_LOCAL_CONNECTION_PARAMS_FAILED="GET_LOCAL_CONNECTION_PARAMS_FAILED",t.SUBSCRIBE_FAILED="SUBSCRIBE_FAILED",t.UNSUBSCRIBE_FAILED="UNSUBSCRIBE_FAILED",t.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",t.NO_ICE_CANDIDATE="NO_ICE_CANDIDATE",t.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS="CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS",t.EXIST_DISABLED_VIDEO_TRACK="EXIST_DISABLED_VIDEO_TRACK",t.INVALID_REMOTE_USER="INVALID_REMOTE_USER",t.REMOTE_USER_IS_NOT_PUBLISHED="REMOTE_USER_IS_NOT_PUBLISHED",t.CUSTOM_REPORT_SEND_FAILED="CUSTOM_REPORT_SEND_FAILED",t.CUSTOM_REPORT_FREQUENCY_TOO_HIGH="CUSTOM_REPORT_FREQUENCY_TOO_HIGH",t.FETCH_AUDIO_FILE_FAILED="FETCH_AUDIO_FILE_FAILED",t.READ_LOCAL_AUDIO_FILE_ERROR="READ_LOCAL_AUDIO_FILE_ERROR",t.DECODE_AUDIO_FILE_FAILED="DECODE_AUDIO_FILE_FAILED",t.WS_ABORT="WS_ABORT",t.WS_DISCONNECT="WS_DISCONNECT",t.WS_ERR="WS_ERR",t.EXTERNAL_SIGNAL_ABORT="EXTERNAL_SIGNAL_ABORT",t.LIVE_STREAMING_TASK_CONFLICT="LIVE_STREAMING_TASK_CONFLICT",t.LIVE_STREAMING_INVALID_ARGUMENT="LIVE_STREAMING_INVALID_ARGUMENT",t.LIVE_STREAMING_INTERNAL_SERVER_ERROR="LIVE_STREAMING_INTERNAL_SERVER_ERROR",t.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED="LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED",t.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED="LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED",t.LIVE_STREAMING_CDN_ERROR="LIVE_STREAMING_CDN_ERROR",t.LIVE_STREAMING_INVALID_RAW_STREAM="LIVE_STREAMING_INVALID_RAW_STREAM",t.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT="LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT",t.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE="LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE",t.LIVE_STREAMING_WARN_FREQUENT_REQUEST="LIVE_STREAMING_WARN_FREQUENT_REQUEST",t.WEBGL_INTERNAL_ERROR="WEBGL_INTERNAL_ERROR",t.BEAUTY_PROCESSOR_INTERNAL_ERROR="BEAUTY_PROCESSOR_INTERNAL_ERROR",t.CROSS_CHANNEL_WAIT_STATUS_ERROR="CROSS_CHANNEL_WAIT_STATUS_ERROR",t.CROSS_CHANNEL_FAILED_JOIN_SRC="CROSS_CHANNEL_FAILED_JOIN_SEC",t.CROSS_CHANNEL_FAILED_JOIN_DEST="CROSS_CHANNEL_FAILED_JOIN_DEST",t.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST="CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST",t.CROSS_CHANNEL_SERVER_ERROR_RESPONSE="CROSS_CHANNEL_SERVER_ERROR_RESPONSE",t.METADATA_OUT_OF_RANGE="METADATA_OUT_OF_RANGE",t.LOCAL_AEC_ERROR="LOCAL_AEC_ERROR",t.INVALID_PLUGIN="INVALID_PLUGIN",t.DISCONNECT_P2P="DISCONNECT_P2P",t.INIT_WEBSOCKET_TIMEOUT="INIT_WEBSOCKET_TIMEOUT",t.CONVERTING_IMAGEDATA_TO_BLOB_FAILED="CONVERTING_IMAGEDATA_TO_BLOB_FAILED",t.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED="CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED",t.INIT_DATACHANNEL_TIMEOUT="INIT_DATACHANNEL_TIMEOUT",t.CREATE_DATACHANNEL_ERROR="CREATE_DATACHANNEL_ERROR",t.DATACHANNEL_CONNECTION_TIMEOUT="DATACHANNEL_CONNECTION_TIMEOUT",t.PROHIBITED_OPERATION="PROHIBITED_OPERATION",t.IMAGE_MODERATION_UPLOAD_FAILED="IMAGE_MODERATION_UPLOAD_FAILED",t.P2P_MESSAGE_FAILED="P2P_MESSAGE_FAILED",t}({});class Ce extends Error{constructor(n){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",a=arguments.length>2?arguments[2]:void 0;super(i),fr(this,"code",void 0),fr(this,"message",void 0),fr(this,"data",void 0),fr(this,"name","AgoraRTCException"),this.code=n,this.message="AgoraRTCError ".concat(this.code,": ").concat(i),this.data=a}toString(){return this.data?"data: ".concat(JSON.stringify(this.data),`
`).concat(this.stack):"".concat(this.stack)}print(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"error",i=arguments.length>1?arguments[1]:void 0;return n==="error"&&(i||console).error(this.toString()),n==="warning"&&(i||console).warn(this.toString()),this}throw(n){throw this.print("error",n),this}}function $l(t,n){if(typeof t!="boolean")throw new Ce(K.INVALID_PARAMS,"Invalid ".concat(n,": The value is of the boolean type."))}function pi(t,n,i){if(!Ye(i).call(i,t))throw new Ce(K.INVALID_PARAMS,"".concat(n," can only be set as ").concat(JSON.stringify(i)))}function Xn(t,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1e4;if(t<i||t>a||(!(arguments.length>4&&arguments[4]!==void 0)||arguments[4])&&!function(l){return typeof l=="number"&&l%1==0}(t))throw new Ce(K.INVALID_PARAMS,"invalid ".concat(n,": the value range is [").concat(i,", ").concat(a,"]. integer only"))}function Fw(t,n){if(typeof t!="number"){if(!(t.min||t.max||t.ideal||t.exact))throw new Ce(K.INVALID_PARAMS,"".concat(n," is not a valid ConstrainLong"));t.min!==void 0&&Xn(t.min,"".concat(n,".min"),0,1/0),t.max!==void 0&&Xn(t.max,"".concat(n,".max"),1,1/0),t.exact!==void 0&&Xn(t.exact,"".concat(n,".exact"),1,1/0),t.ideal!==void 0&&Xn(t.ideal,"".concat(n,".ideal"),1,1/0)}else Xn(t,n,1,1/0)}function Mi(t,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:255,l=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4];if(t==null)throw new Ce(K.INVALID_PARAMS,"".concat(n||"param"," cannot be empty"));if(!v4(t,i,a,l))throw new Ce(K.INVALID_PARAMS,"Invalid ".concat(n||"string param",": Length of the string: [").concat(i,",").concat(a,"].").concat(l?" ASCII characters only.":""))}function Hl(t,n){if(!Array.isArray(t))throw new Ce(K.INVALID_PARAMS,"".concat(n," should be an array"))}function xr(t){return t==null}function v4(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:255,a=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];return typeof t=="string"&&t.length<=i&&t.length>=n&&(!a||function(l){if(typeof l!="string")return!1;for(let u=0;u<l.length;u+=1){const h=l.charCodeAt(u);if(h<0||h>255)return!1}return!0}(t))}function E4(t,n,i){if("getBigUint64"in DataView.prototype)return t.getBigUint64(n,i);const a=t.getUint32(n,i),l=t.getUint32(n+4,i),u=+!!i,h=+!i;return BigInt(a*h+l*u)<<BigInt(32)|BigInt(a*u+l*h)}function _4(t,n,i,a){if("setBigUint64"in DataView.prototype)return t.setBigUint64(n,i,a);const l=Number(i>>BigInt(32)),u=Number(i&BigInt(4294967295));a?(t.setUint32(n+4,l,a),t.setUint32(n,u,a)):(t.setUint32(n,l,a),t.setUint32(n+4,u,a))}var v0=function(t){return t.COVERED="COVERED",t.POSITION="POSITION",t.SIZE="SIZE",t.STYLE="STYLE",t}(v0||{}),Uw=function(t){return t.UNMOUNTED="UNMOUNTED",t.INVALID_HTML_ELEMENT="INVALID_HTML_ELEMENT",t}(Uw||{});const S4=new class{constructor(){fr(this,"_clientSize",null),fr(this,"getClientWidth",()=>document.documentElement?document.documentElement.clientWidth:document.body.clientWidth),fr(this,"getClientHeight",()=>document.documentElement?document.documentElement.clientHeight:document.body.clientHeight),fr(this,"getStyle",t=>window.getComputedStyle(t,null)),fr(this,"checkCssVisibleProperty",t=>{var n;let i=!0;const a=this.getStyle(t),{display:l,visibility:u,opacity:h,filter:f}=a;return(l==="none"||Ye(n=["hidden","collapse"]).call(n,u)||Number(h)<.1)&&(i=!1),!!i&&(f&&f.split(" ").filter(g=>{var _;const y=g.split("(")[0];return Ye(_=["brightness","blur","opacity"]).call(_,y)}).map(g=>{const[_,y]=g.split(/\(|\)/);return[_,Number(y.match(/^[0-9\.]+/))]}).forEach(g=>{const[_,y]=g;switch(_){case"brightness":(y<.1||y>3)&&(i=!1);break;case"blur":y>3&&(i=!1);break;case"opacity":y<.1&&(i=!1)}}),i)}),fr(this,"checkPropertyUpToAllParentNodes",(t,n)=>{let i=!0,a=!0;const l=h=>n(h);let u=t;for(;u&&a;)l(u)||(i=!1,a=!1),u=u.parentElement,u||(a=!1);return i}),fr(this,"checkActualCssVisibleIncludeInherit",t=>this.checkPropertyUpToAllParentNodes(t,this.checkCssVisibleProperty)),fr(this,"getSizeAboutClient",t=>{const{width:n,height:i,left:a,right:l,top:u,bottom:h}=t.getBoundingClientRect(),f=this.getClientWidth(),g=this.getClientHeight();return{width:n,height:i,left:a,right:l,top:u,bottom:h,clientWidth:f,clientHeight:g,clientMin:Math.min(f,g)}}),fr(this,"checkActualSize",()=>{const{width:t,height:n,clientMin:i}=this._clientSize;return this.checkSizeIsVisible(t,n,i)}),fr(this,"elementFromPoint",(t,n)=>document.elementFromPoint?document.elementFromPoint(t,n):null),fr(this,"checkCoverForAPoint",(t,n,i)=>{const a=this.elementFromPoint(t,n);return a!==null&&a!==i}),fr(this,"getPointPositionList",()=>{const{width:t,height:n,left:i,top:a}=this._clientSize,l=t/6,u=n/6,h=[],f=10**6;for(let g=0;g<5;g++)for(let _=0;_<5;_++){const y=(i*f+(g===0?.1:g===4?(l*g*f-1e5)/f:l*g)*f)/f,T=(a*f+(_===0?.1:_===4?(u*_*f-1e5)/f:u*_)*f)/f;h.push({x:y,y:T})}return[...h]}),fr(this,"checkElementCover",t=>this.getPointPositionList().map(n=>this.checkCoverForAPoint(n.x,n.y,t)).filter(n=>!!n).length>6),fr(this,"checkSizeIsVisible",(t,n,i)=>(t>50||i/t<=10)&&(n>50||i/n<=10)),fr(this,"checkSizeOfPartInClient",()=>{const{left:t,right:n,top:i,bottom:a,clientHeight:l,clientWidth:u,clientMin:h}=this._clientSize;let f,g,_,y;if(t<0)f=0;else{if(!(t<u))return!1;f=t}if(n<0)return!1;if(g=n<u?n:u,i<0)_=0;else{if(!(i<l))return!1;_=i}if(a<0)return!1;y=a<l?a:l;const T=g-f,A=y-_;return this.checkSizeIsVisible(T,A,h)}),fr(this,"returnHiddenResult",t=>(this._clientSize=null,{visible:!1,reason:t})),fr(this,"checkOneElementVisible",t=>{if(t instanceof HTMLElement){if(this.checkElementIsMountedOnDom(t)){if(this.checkActualCssVisibleIncludeInherit(t)){if(this._clientSize=this.getSizeAboutClient(t),this.checkElementCover(t))return this.returnHiddenResult(v0.COVERED);{const n=this.checkActualSize(),i=this.checkSizeOfPartInClient();return n&&!i?this.returnHiddenResult(v0.POSITION):n?(this._clientSize=null,{visible:!0}):this.returnHiddenResult(v0.SIZE)}}return this.returnHiddenResult(v0.STYLE)}return this.returnHiddenResult(Uw.UNMOUNTED)}return this.returnHiddenResult(Uw.INVALID_HTML_ELEMENT)}),fr(this,"checkElementIsMountedOnDom",t=>this.checkPropertyUpToAllParentNodes(t,n=>n.nodeName.toUpperCase()!=="HTML"?n.parentElement!==null:!!document.documentElement))}};function Bw(t){return new TextEncoder().encode(t)}const y4=function(t,n){const i=new Uint8Array(t.byteLength+n.byteLength);return i.set(new Uint8Array(t),0),i.set(new Uint8Array(n),t.byteLength),i},Vw=async t=>function(n,i){let a="";return new Uint8Array(n).forEach(l=>{a+=l.toString(i).padStart(2,"0")}),a}(await crypto.subtle.digest("SHA-256",Bw(t)),16);let _r=class{constructor(){fr(this,"_events",{}),fr(this,"addListener",this.on)}getListeners(t){return this._events[t]?this._events[t].map(n=>n.listener):[]}on(t,n){this._events[t]||(this._events[t]=[]);const i=this._events[t];this._indexOfListener(i,n)===-1&&i.push({listener:n,once:!1})}once(t,n){this._events[t]||(this._events[t]=[]);const i=this._events[t];this._indexOfListener(i,n)===-1&&i.push({listener:n,once:!0})}off(t,n){if(!this._events[t])return;const i=this._events[t],a=this._indexOfListener(i,n);a!==-1&&i.splice(a,1),this._events[t].length===0&&delete this._events[t]}removeAllListeners(t){t?delete this._events[t]:this._events={}}emit(t){this._events[t]||(this._events[t]=[]);const n=this._events[t].map(u=>u);for(var i=arguments.length,a=new Array(i>1?i-1:0),l=1;l<i;l++)a[l-1]=arguments[l];for(let u=0;u<n.length;u+=1){const h=n[u];h.once&&this.off(t,h.listener),h.listener.apply(this,a||[])}}safeEmit(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];[...this._events[t]||[]].forEach(l=>{l.once&&this.off(t,l.listener);try{l.listener.apply(this,i)}catch(u){console.error("safeEmit event:".concat(t," error ").concat(u==null?void 0:u.toString()))}})}_indexOfListener(t,n){let i=t.length;for(;i--;)if(t[i].listener===n)return i;return-1}},E0=null;function C4(){if(E0)return E0;if(window.electron)return E0=window.electron;if(!window.require)return null;try{return E0=window.require("electron"),E0}catch{return null}}let ni=function(t){return t.CREATE_CLIENT="createClient",t.CHECK_SYSTEM_REQUIREMENTS="checkSystemRequirements",t.SET_AREA="setArea",t.PRELOAD="PRELOAD",t.CHECK_VIDEO_TRACK_IS_ACTIVE="checkVideoTrackIsActive",t.CHECK_AUDIO_TRACK_IS_ACTIVE="checkAudioTrackIsActive",t.CREATE_MIC_AUDIO_TRACK="createMicrophoneAudioTrack",t.CREATE_CUSTOM_AUDIO_TRACK="createCustomAudioTrack",t.CREATE_BUFFER_AUDIO_TRACK="createBufferSourceAudioTrack",t.CREATE_CAM_VIDEO_TRACK="createCameraVideoTrack",t.CREATE_CUSTOM_VIDEO_TRACK="createCustomVideoTrack",t.CREATE_MIC_AND_CAM_TRACKS="createMicrophoneAndCameraTracks",t.CREATE_SCREEN_VIDEO_TRACK="createScreenVideoTrack",t.SET_ENCRYPTION_CONFIG="Client.setEncryptionConfig",t.START_PROXY_SERVER="Client.startProxyServer",t.STOP_PROXY_SERVER="Client.stopProxyServer",t.SET_PROXY_SERVER="Client.setProxyServer",t.SET_TURN_SERVER="Client.setTurnServer",t.SET_CLIENT_ROLE="Client.setClientRole",t.SET_LOW_STREAM_PARAMETER="Client.setLowStreamParameter",t.ENABLE_DUAL_STREAM="Client.enableDualStream",t.DISABLE_DUAL_STREAM="Client.disableDualStream",t.JOIN="Client.join",t.LEAVE="Client.leave",t.PUBLISH="Client.publish",t.UNPUBLISH="Client.unpublish",t.SUBSCRIBE="Client.subscribe",t.MASS_SUBSCRIBE="Client.massSubscribe",t.MASS_UNSUBSCRIBE="Client.massUnsubscribe",t.UNSUBSCRIBE="Client.unsubscribe",t.RENEW_TOKEN="Client.renewToken",t.SET_REMOTE_VIDEO_STREAM_TYPE="Client.setRemoteVideoStreamType",t.SET_STREAM_FALLBACK_OPTION="Client.setStreamFallbackOption",t.ENABLE_AUDIO_VOLUME_INDICATOR="Client.enableAudioVolumeIndicator",t.SEND_CUSTOM_REPORT_MESSAGE="Client.sendCustomReportMessage",t.INSPECT_VIDEO_CONTENT="Client.inspectVideoContent",t.STOP_INSPECT_VIDEO_CONTENT="Client.stopInspectVideoContent",t.JOIN_FALLBACK_TO_PROXY="Client._joinFallbackToProxy",t.DATACHANNEL_FAILBACK="Client._datachannelFailback",t.ON_LIVE_STREAM_WARNING="Client.onLiveStreamWarning",t.ON_LIVE_STREAM_ERROR="Client.onLiveStreamingError",t.START_LIVE_STREAMING="Client.startLiveStreaming",t.SET_LIVE_TRANSCODING="Client.setLiveTranscoding",t.STOP_LIVE_STREAMING="Client.stopLiveStreaming",t.START_CHANNEL_MEDIA_RELAY="Client.startChannelMediaRelay",t.UPDATE_CHANNEL_MEDIA_RELAY="Client.updateChannelMediaRelay",t.STOP_CHANNEL_MEDIA_RELAY="Client.stopChannelMediaRelay",t.REQUEST_CONFIG_DISTRIBUTE="_config-distribute-request",t.SET_CONFIG_DISTRIBUTE="_configDistribute",t.LOCAL_TRACK_SET_MUTED="LocalTrack.setMute",t.LOCAL_AUDIO_TRACK_PLAY="LocalAudioTrack.play",t.LOCAL_AUDIO_TRACK_PLAY_IN_ELEMENT="LocalAudioTrack.playInElement",t.LOCAL_AUDIO_TRACK_STOP="LocalAudioTrack.stop",t.LOCAL_AUDIO_TRACK_SET_VOLUME="LocalAudioTrack.setVolume",t.MIC_AUDIO_TRACK_SET_DEVICE="MicrophoneAudioTrack.setDevice",t.BUFFER_AUDIO_TRACK_START="BufferSourceAudioTrack.startProcessAudioBuffer",t.BUFFER_AUDIO_TRACK_STOP="BufferSourceAudioTrack.stopProcessAudioBuffer",t.BUFFER_AUDIO_TRACK_PAUSE="BufferSourceAudioTrack.pauseProcessAudioBuffer",t.BUFFER_AUDIO_TRACK_RESUME="BufferSourceAudioTrack.resumeProcessAudioBuffer",t.BUFFER_AUDIO_TRACK_SEEK="BufferSourceAudioTrack.seekAudioBuffer",t.LOCAL_VIDEO_TRACK_PLAY="LocalVideoTrack.play",t.LOCAL_VIDEO_TRACK_STOP="LocalVideoTrack.stop",t.LOCAL_VIDEO_TRACK_GET_VIDEO_VISIBLE="LocalVideoTrack.getVideoElementVisibleStatus",t.LOCAL_VIDEO_TRACK_BEAUTY="LocalVideoTrack.setBeautyEffect",t.LOCAL_VIDEO_SEND_SEI_DATA="LocalVideoTrack.sendSeiData",t.CAM_VIDEO_TRACK_SET_DEVICE="CameraVideoTrack.setDevice",t.CAM_VIDEO_TRACK_SET_ENCODER_CONFIG="CameraVideoTrack.setEncoderConfiguration",t.REMOTE_VIDEO_TRACK_PLAY="RemoteVideoTrack.play",t.REMOTE_VIDEO_TRACK_STOP="RemoteVideoTrack.stop",t.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE="RemoteVideoTrack.getVideoElementVisibleStatus",t.REMOTE_AUDIO_TRACK_PLAY="RemoteAudioTrack.play",t.REMOTE_AUDIO_TRACK_STOP="RemoteAudioTrack.stop",t.REMOTE_AUDIO_SET_VOLUME="RemoteAudioTrack.setVolume",t.REMOTE_AUDIO_SET_OUTPUT_DEVICE="RemoteAudioTrack.setOutputDevice",t.GET_MEDIA_STREAM_TRACK="Track.getMediaStreamTrack",t.STREAM_TYPE_CHANGE="streamTypeChange",t.CONNECTION_STATE_CHANGE="connectionStateChange",t.LOAD_CONFIG_FROM_LOCALSTORAGE="loadConfigFromLocalStorage",t.IMAGE_MODERATION_UPLOAD="imageModerationUpload",t}({}),Nr=function(t){return t.TRACER="tracer",t}({});function b4(t){return Xn(t.timeout,"config.timeout",0,1e5),Xn(t.timeoutFactor,"config.timeoutFactor",0,100,!1),Xn(t.maxRetryCount,"config.maxRetryConfig",0,1/0),Xn(t.maxRetryTimeout,"config.maxRetryTimeout",0,1/0),!0}let Kce=function(t){return t[t.AUDIENCE_LEVEL_LOW_LATENCY=1]="AUDIENCE_LEVEL_LOW_LATENCY",t[t.AUDIENCE_LEVEL_ULTRA_LOW_LATENCY=2]="AUDIENCE_LEVEL_ULTRA_LOW_LATENCY",t[t.AUDIENCE_LEVEL_SYNC_LATENCY=3]="AUDIENCE_LEVEL_SYNC_LATENCY",t}({}),an=function(t){return t.LEAVE="LEAVE",t.NETWORK_ERROR="NETWORK_ERROR",t.SERVER_ERROR="SERVER_ERROR",t.UID_BANNED="UID_BANNED",t.IP_BANNED="IP_BANNED",t.CHANNEL_BANNED="CHANNEL_BANNED",t.FALLBACK="FALLBACK",t.LICENSE_MISSING="LICENSE_MISSING",t.LICENSE_EXPIRED="LICENSE_EXPIRED",t.LICENSE_MINUTES_EXCEEDED="LICENSE_MINUTES_EXCEEDED",t.LICENSE_PERIOD_INVALID="LICENSE_PERIOD_INVALID",t.LICENSE_MULTIPLE_SDK_SERVICE="LICENSE_MULTIPLE_SDK_SERVICE",t.LICENSE_ILLEGAL="LICENSE_ILLEGAL",t.TOKEN_EXPIRE="TOKEN_EXPIRE",t}({});function Bp(t){if(!Array.isArray(t)||t.length<1)return!1;try{t.forEach(n=>{if(!n.urls)throw Error()})}catch{return!1}return!0}function T4(t){return Mi(t.turnServerURL,"turnServerURL"),Mi(t.username,"username"),Mi(t.password,"password"),t.udpport&&Xn(t.udpport,"udpport",1,99999,!0),t.forceturn&&$l(t.forceturn,"forceturn"),t.security&&$l(t.security,"security"),t.tcpport&&Xn(t.tcpport,"tcpport",1,99999,!0),!0}function R4(t){return t.level!==void 0&&pi(t.level,"level",[1,2,3]),t.delay!==void 0&&Xn(t.delay,"delay",0,3e3,!0),!0}let sn=function(t){return t.CONNECTION_STATE_CHANGE="connection-state-change",t.MEDIA_RECONNECT_START="media-reconnect-start",t.MEDIA_RECONNECT_END="media-reconnect-end",t.IS_USING_CLOUD_PROXY="is-using-cloud-proxy",t.USER_JOINED="user-joined",t.USER_LEAVED="user-left",t.USER_PUBLISHED="user-published",t.USER_UNPUBLISHED="user-unpublished",t.USER_INFO_UPDATED="user-info-updated",t.CLIENT_BANNED="client-banned",t.CHANNEL_MEDIA_RELAY_STATE="channel-media-relay-state",t.CHANNEL_MEDIA_RELAY_EVENT="channel-media-relay-event",t.VOLUME_INDICATOR="volume-indicator",t.CRYPT_ERROR="crypt-error",t.ON_TOKEN_PRIVILEGE_WILL_EXPIRE="token-privilege-will-expire",t.ON_TOKEN_PRIVILEGE_DID_EXPIRE="token-privilege-did-expire",t.NETWORK_QUALITY="network-quality",t.STREAM_TYPE_CHANGED="stream-type-changed",t.STREAM_FALLBACK="stream-fallback",t.RECEIVE_METADATA="receive-metadata",t.STREAM_MESSAGE="stream-message",t.LIVE_STREAMING_ERROR="live-streaming-error",t.LIVE_STREAMING_WARNING="live-streaming-warning",t.INJECT_STREAM_STATUS="stream-inject-status",t.EXCEPTION="exception",t.ERROR="error",t.P2P_LOST="p2p_lost",t.JOIN_FALLBACK_TO_PROXY="join-fallback-to-proxy",t.CHANNEL_FALLBACK_TO_WEBSOCKET="channel-fallback-to-websocket",t.MEDIA_CONNECTION_TYPE_CHANGE="media-connection-type-change",t.PUBLISHED_USER_LIST="published-user-list",t.CONTENT_INSPECT_CONNECTION_STATE_CHANGE="content-inspect-connection-state-change",t.CONTENT_INSPECT_ERROR="content-inspect-error",t.CONTENT_INSPECT_RESULT="content-inspect-result",t.IMAGE_MODERATION_CONNECTION_STATE_CHANGE="image-moderation-connection-state-change",t}({}),zi=function(t){return t.NETWORK_ERROR="NETWORK_ERROR",t.SERVER_ERROR="SERVER_ERROR",t.MULTI_IP="MULTI_IP",t.TIMEOUT="TIMEOUT",t.OFFLINE="OFFLINE",t.LEAVE="LEAVE",t.P2P_FAILED="P2P_FAILED",t.FALLBACK="FALLBACK",t}({}),xo=function(t){return t.ONLINE="ONLINE",t.OFFLINE="OFFLINE",t}({}),Qd=function(t){return t.NETWORK_STATE_CHANGE="NETWORK_STATE_CHANGE",t.ONLINE="ONLINE",t.OFFLINE="OFFLINE",t}({});function ri(t,n){for(var i=arguments.length,a=new Array(i>2?i-2:0),l=2;l<i;l++)a[l-2]=arguments[l];return t.getListeners(n).length===0?We.reject(new Ce(K.UNEXPECTED_ERROR,"can not emit promise")):new We((u,h)=>{t.emit(n,...a,u,h)})}function er(t,n){if(t.getListeners(n).length===0)return We.resolve();for(var i=arguments.length,a=new Array(i>2?i-2:0),l=2;l<i;l++)a[l-2]=arguments[l];return ri(t,n,...a)}function Ta(t,n){if(t.getListeners(n).length===0)return null;for(var i=arguments.length,a=new Array(i>2?i-2:0),l=2;l<i;l++)a[l-2]=arguments[l];return Zd(t,n,...a)}function Zd(t,n){let i=null,a=null;for(var l=arguments.length,u=new Array(l>2?l-2:0),h=2;h<l;h++)u[h-2]=arguments[h];if(t.emit(n,...u,f=>{i=f},f=>{a=f}),a!==null)throw a;if(i===null)throw new Ce(K.UNEXPECTED_ERROR,"handler is not sync");return i}const Dr=new class extends _r{set networkState(t){this.emit(Qd.NETWORK_STATE_CHANGE,t,this._networkState),t===xo.ONLINE?this.emit(Qd.ONLINE):t===xo.OFFLINE&&(this.onlineWaiter=new We(n=>{this.once(Qd.ONLINE,()=>{this.onlineWaiter=void 0,n(xo.ONLINE)})}),this.emit(Qd.OFFLINE)),this._networkState=t}get networkState(){return this._networkState}get isOnline(){return this._networkState===xo.ONLINE}constructor(){super(),fr(this,"_moduleName","network-indicator"),fr(this,"_networkState",xo.ONLINE),fr(this,"onlineWaiter",void 0),window.addEventListener("online",()=>{this.networkState=xo.ONLINE}),window.addEventListener("offline",()=>{this.networkState=xo.OFFLINE})}};function a_(t,n){const i=t.indexOf(n);i!==-1&&t.splice(i,1)}function Vp(t){const n=[];return t.forEach(i=>{n.indexOf(i)===-1&&n.push(i)}),n}function s_(t){We!==void 0?We.resolve().then(t):setTimeout(t,0)}function or(t){return JSON.parse(JSON.stringify(t))}function eh(t){try{return or(t)}catch{return t}}const w4={};function Bu(t,n){w4[n]||(w4[n]=!0,t())}function th(t){const n=window.atob(t),i=new Uint8Array(new ArrayBuffer(n.length));for(let a=0;a<n.length;a+=1)i[a]=n.charCodeAt(a);return i}function Vu(t){let n="";for(let i=0;i<t.length;i+=1)n+=String.fromCharCode(t[i]);return window.btoa(n)}function I4(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:16,i=new TextEncoder().encode(t);if(i.length>n)i=i.slice(0,n);else if(i.length<n){const a=new Uint8Array(n);a.set(i),i=a}return i}function A4(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];const a=Sc(n).call(n,(h,f)=>h+f.length,0),l=new Uint8Array(new ArrayBuffer(a));let u=0;return n.forEach(h=>{l.set(h,u),u+=h.length}),l}function ll(t){return window.TextEncoder?new TextEncoder().encode(t).length:t.length}function O4(t){let n=0;return(/DingTalk/i.test(navigator.userAgent)||/AliApp/i.test(navigator.userAgent))&&t.realFormData&&(t=t.realFormData),t.forEach(i=>{n+=typeof i=="string"?ll(i):i.size}),n+138}function qce(t){const n=new Ce(K.TIMEOUT,"timeout");return new We((i,a)=>{window.setTimeout(()=>a(n),t)})}function yi(t){return new We(n=>{window.setTimeout(n,t)})}function tr(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:7,n=arguments.length>1?arguments[1]:void 0;const i=Math.random().toString(16).substr(2,t).toLowerCase();return i.length===t?"".concat(n).concat(i):"".concat(n).concat(i)+tr(t-i.length,"")}function _0(){return tr(32,"").toUpperCase()}const c_=()=>{},x4=new class{constructor(){fr(this,"fnMap",new Map)}throttleByKey(t,n,i,a){for(var l=arguments.length,u=new Array(l>4?l-4:0),h=4;h<l;h++)u[h-4]=arguments[h];if(this.fnMap.has(n)){const f=this.fnMap.get(n);if(f.threshold!==i){f.fn(...f.args),clearTimeout(f.timer);const g=window.setTimeout(()=>{const _=this.fnMap.get(n);_&&_.fn(..._.args),this.fnMap.delete(n)},i);this.fnMap.set(n,{fn:t,threshold:i,timer:g,args:u,skipFn:a})}else f.skipFn&&f.skipFn(...f.args),this.fnMap.set(n,pt(pt({},f),{},{fn:t,args:u,skipFn:a}))}else{const f=window.setTimeout(()=>{const g=this.fnMap.get(n);g&&g.fn(...g.args),this.fnMap.delete(n)},i);this.fnMap.set(n,{fn:t,threshold:i,timer:f,args:u,skipFn:a})}}},N4=x4.throttleByKey.bind(x4);function D4(t){return typeof t=="object"&&t!==null&&!(t instanceof RegExp)}function jw(t,n){if(!D4(t)||!D4(n)||Array.isArray(t)&&!Array.isArray(n)||!Array.isArray(t)&&Array.isArray(n))return n;if(Array.isArray(n)&&Array.isArray(t)){const i=[...t];for(let a=0;a<n.length;a++)i[a]=jw(t[a],n[a]);return i}{const i=pt({},t);for(const a in n)Object.prototype.hasOwnProperty.call(n,a)&&(Object.prototype.hasOwnProperty.call(t,a)?i[a]=jw(t[a],n[a]):i[a]=n[a]);return i}}function P4(t,n){let i=[0];if(n&&(i=new Array(n).fill(0)),t===0)return i;let a=0;for(;t>0&&(i[a]=255&t,t>>=8,a++,!n||a!==n););return i}function $w(t){return typeof t=="number"?t:t.exact||t.ideal||t.max||t.min||0}function L4(t){const n="0123456789abcdef";function i(ue){let pe,Ee="";for(pe=0;pe<=3;pe++)Ee+=n.charAt(ue>>8*pe+4&15)+n.charAt(ue>>8*pe&15);return Ee}function a(ue,pe){const Ee=(65535&ue)+(65535&pe);return(ue>>16)+(pe>>16)+(Ee>>16)<<16|65535&Ee}function l(ue,pe,Ee,Se,Re,Ae){return a(function(Pe,tt){return Pe<<tt|Pe>>>32-tt}(a(a(pe,ue),a(Se,Ae)),Re),Ee)}function u(ue,pe,Ee,Se,Re,Ae,Pe){return l(pe&Ee|~pe&Se,ue,pe,Re,Ae,Pe)}function h(ue,pe,Ee,Se,Re,Ae,Pe){return l(pe&Se|Ee&~Se,ue,pe,Re,Ae,Pe)}function f(ue,pe,Ee,Se,Re,Ae,Pe){return l(pe^Ee^Se,ue,pe,Re,Ae,Pe)}function g(ue,pe,Ee,Se,Re,Ae,Pe){return l(Ee^(pe|~Se),ue,pe,Re,Ae,Pe)}const _=function(ue){let pe;const Ee=1+(ue.length+8>>6),Se=new Array(16*Ee);for(pe=0;pe<16*Ee;pe++)Se[pe]=0;for(pe=0;pe<ue.length;pe++)Se[pe>>2]|=ue.charCodeAt(pe)<<pe%4*8;return Se[pe>>2]|=128<<pe%4*8,Se[16*Ee-2]=8*ue.length,Se}(t);let y,T,A,D,W,F=1732584193,U=-271733879,z=-1732584194,X=271733878;for(y=0;y<_.length;y+=16)T=F,A=U,D=z,W=X,F=u(F,U,z,X,_[y+0],7,-680876936),X=u(X,F,U,z,_[y+1],12,-389564586),z=u(z,X,F,U,_[y+2],17,606105819),U=u(U,z,X,F,_[y+3],22,-1044525330),F=u(F,U,z,X,_[y+4],7,-176418897),X=u(X,F,U,z,_[y+5],12,1200080426),z=u(z,X,F,U,_[y+6],17,-1473231341),U=u(U,z,X,F,_[y+7],22,-45705983),F=u(F,U,z,X,_[y+8],7,1770035416),X=u(X,F,U,z,_[y+9],12,-1958414417),z=u(z,X,F,U,_[y+10],17,-42063),U=u(U,z,X,F,_[y+11],22,-1990404162),F=u(F,U,z,X,_[y+12],7,1804603682),X=u(X,F,U,z,_[y+13],12,-40341101),z=u(z,X,F,U,_[y+14],17,-1502002290),U=u(U,z,X,F,_[y+15],22,1236535329),F=h(F,U,z,X,_[y+1],5,-165796510),X=h(X,F,U,z,_[y+6],9,-1069501632),z=h(z,X,F,U,_[y+11],14,643717713),U=h(U,z,X,F,_[y+0],20,-373897302),F=h(F,U,z,X,_[y+5],5,-701558691),X=h(X,F,U,z,_[y+10],9,38016083),z=h(z,X,F,U,_[y+15],14,-660478335),U=h(U,z,X,F,_[y+4],20,-405537848),F=h(F,U,z,X,_[y+9],5,568446438),X=h(X,F,U,z,_[y+14],9,-1019803690),z=h(z,X,F,U,_[y+3],14,-187363961),U=h(U,z,X,F,_[y+8],20,1163531501),F=h(F,U,z,X,_[y+13],5,-1444681467),X=h(X,F,U,z,_[y+2],9,-51403784),z=h(z,X,F,U,_[y+7],14,1735328473),U=h(U,z,X,F,_[y+12],20,-1926607734),F=f(F,U,z,X,_[y+5],4,-378558),X=f(X,F,U,z,_[y+8],11,-2022574463),z=f(z,X,F,U,_[y+11],16,1839030562),U=f(U,z,X,F,_[y+14],23,-35309556),F=f(F,U,z,X,_[y+1],4,-1530992060),X=f(X,F,U,z,_[y+4],11,1272893353),z=f(z,X,F,U,_[y+7],16,-155497632),U=f(U,z,X,F,_[y+10],23,-1094730640),F=f(F,U,z,X,_[y+13],4,681279174),X=f(X,F,U,z,_[y+0],11,-358537222),z=f(z,X,F,U,_[y+3],16,-722521979),U=f(U,z,X,F,_[y+6],23,76029189),F=f(F,U,z,X,_[y+9],4,-640364487),X=f(X,F,U,z,_[y+12],11,-421815835),z=f(z,X,F,U,_[y+15],16,530742520),U=f(U,z,X,F,_[y+2],23,-995338651),F=g(F,U,z,X,_[y+0],6,-198630844),X=g(X,F,U,z,_[y+7],10,1126891415),z=g(z,X,F,U,_[y+14],15,-1416354905),U=g(U,z,X,F,_[y+5],21,-57434055),F=g(F,U,z,X,_[y+12],6,1700485571),X=g(X,F,U,z,_[y+3],10,-1894986606),z=g(z,X,F,U,_[y+10],15,-1051523),U=g(U,z,X,F,_[y+1],21,-2054922799),F=g(F,U,z,X,_[y+8],6,1873313359),X=g(X,F,U,z,_[y+15],10,-30611744),z=g(z,X,F,U,_[y+6],15,-1560198380),U=g(U,z,X,F,_[y+13],21,1309151649),F=g(F,U,z,X,_[y+4],6,-145523070),X=g(X,F,U,z,_[y+11],10,-1120210379),z=g(z,X,F,U,_[y+2],15,718787259),U=g(U,z,X,F,_[y+9],21,-343485551),F=a(F,T),U=a(U,A),z=a(z,D),X=a(X,W);return i(F)+i(U)+i(z)+i(X)}let Yce=1,l_=console,Oi=class{static setLogger(t){l_=t}constructor(t){fr(this,"lockingPromise",We.resolve()),fr(this,"locks",0),fr(this,"name",""),fr(this,"lockId",void 0),this.lockId=Yce++,t&&(this.name=t),l_.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is created."))}get isLocked(){return this.locks>0}lock(t){let n;this.locks+=1,l_.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is locked, current queue ").concat(this.locks,". ").concat(typeof t=="string"?t:""));const i=new We(l=>{n=()=>{this.locks-=1,l_.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is not locked, current queue ").concat(this.locks,". ").concat(typeof t=="string"?t:"")),l()}}),a=this.lockingPromise.then(()=>n);return this.lockingPromise=this.lockingPromise.then(()=>i),a}};function jp(t,n){return function(i,a,l){const u=l.value;if(typeof u!="function")throw new Error("Cannot use mutex on object property.");return l.value=async function(){const h=this[n];if(!h)throw new Error("mutex property key ".concat(n," doesn't exist on ").concat(t));const f=await h.lock("From ".concat(t,".").concat(a));try{for(var g=arguments.length,_=new Array(g),y=0;y<g;y++)_[y]=arguments[y];return await u.apply(this,_)}finally{f()}},l}}const qr={timeout:500,timeoutFactor:1.5,maxRetryCount:1/0,maxRetryTimeout:1e4};function u_(t,n){const i=Math.floor(n.timeout*Math.pow(n.timeoutFactor,t));return Math.min(n.maxRetryTimeout,i)}function bc(t,n,i,a){const l=Object.assign({},qr,a);let u=l.timeout;const h=async()=>{await function(_){return new We(y=>{window.setTimeout(y,_)})}(u),u*=l.timeoutFactor,u=Math.min(l.maxRetryTimeout,u)};let f=!1;const g=new We(async(_,y)=>{n=n||(()=>!1),i=i||(()=>!0);for(let T=0;T<l.maxRetryCount;T+=1){if(f)return y(new Ce(K.OPERATION_ABORTED));try{const A=await t();if(!n(A,T)||T+1===l.maxRetryCount)return _(A);await h()}catch(A){if(!i(A,T)||T+1===l.maxRetryCount)return y(A);await h()}}});return g.cancel=()=>f=!0,g}class Hw{constructor(n){fr(this,"input",[]),fr(this,"size",void 0),this.size=n}add(n){this.input.push(n),this.input.length>this.size&&this.input.splice(0,1)}mean(){var n;return this.input.length===0?0:Sc(n=this.input).call(n,(i,a)=>i+a)/this.input.length}}let d_,h_=0,Ww=0;function zw(t,n,i,a){return new We((l,u)=>{n.responseType=n.responseType||"json",n.data&&!i?(n.data=JSON.stringify(n.data),h_+=ll(n.data)):i&&(n.data.size?h_+=n.data.size:n.data instanceof FormData?h_+=O4(n.data):h_+=ll(JSON.stringify(n.data))),n.headers=n.headers||{},n.headers["Content-Type"]=n.headers["Content-Type"]||"application/json",n.method="POST",n.url=t,Go.request(n).then(h=>{typeof h.data=="string"?Ww+=ll(h.data):h.data instanceof ArrayBuffer||h.data instanceof Uint8Array?Ww+=h.data.byteLength:Ww+=ll(JSON.stringify(h.data)),a&&l({data:h.data,headers:h.headers}),l(h.data)}).catch(h=>{Go.isCancel(h)?u(new Ce(K.OPERATION_ABORTED,"cancel token canceled")):h.code==="ECONNABORTED"?u(new Ce(K.NETWORK_TIMEOUT,h.message)):h.response?u(new Ce(K.NETWORK_RESPONSE_ERROR,h.response.status)):u(new Ce(K.NETWORK_ERROR,h.message))})})}async function Xce(t,n){const i=new Blob([n.data],{type:"buffer"});return await zw(t,pt(pt({},n),{},{data:i,headers:{"Content-Type":"application/octet-stream"}}),!0)}const k4=()=>window.isSecureContext!==void 0,ls=function(t){if(t.match(/[0-9]+\.[0-9]+\.[0-9]+$/))return t;const n=t.match(/([0-9]+\.[0-9]+\.[0-9]+)\-alpha\.([0-9]+)/);if(n&&n[1]&&n[2]){const a=n[1],l=n[2];return"".concat(a,".").concat(l)}const i=t.match(/([0-9]+\.[0-9]+\.[0-9]+)\-special\.([0-9]+)/);if(i&&i[1]&&i[2]){const a=i[1],l=i[2];return"".concat(a,".").concat(100*(Number(l)+1))}return"4.0.0.999"}("4.21.0"),Gw=function(){try{return JSON.parse("true")===!0}catch{return!0}}();let nh=function(t){return t.Default="default",t.Auto="auto",t.Relay="relay",t.SdRtn="sd-rtn",t}({});const Kw={MIN_FRAME_RATE:1,MAX_FRAME_RATE:30,MAX_THRESHOLD_FRAMERATE:30,BITRATE_MIN_THRESHOLD:100,BITRATE_MAX_THRESHOLD:100,MAX_SCALE:5,BWE_SCALE_UP_THRESHOLD:.6,BWE_SCALE_DOWN_THRESHOLD:.6,PERF_SCALE_UP_THRESHOLD:.7,PERF_SCALE_DOWN_THRESHOLD:.6,MOTION_RESOLUTION_FACTOR:.8,MOTION_BITRATE_FACTOR:.6,DETAIL_FRAMERATE_FACTOR:.8,DETAIL_BITRATE_FACTOR:.6,BALANCE_RESOLUTION_FACTOR:.9,BALANCE_FRAMERATE_FACTOR:.9,BALANCE_BITRATE_FACTOR:.6,OVERUSE_TIMES_THRESHOLD:10,UNDERUSE_TIMES_THRESHOLD:40},qw="v4.21.0-0-g16fdae2c-dirty(6/3/2024, 2:55:18 PM)",ui={PROCESS_ID:"",ENCRYPT_AES:!0,AREAS:["CHINA","GLOBAL"],WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io","webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io","webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-web-2.ap.sd-rtn.com","cds-ap-web-3.agora.io","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-web-2.ap.sd-rtn.com","sua-ap-web-3.agora.io","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-ap-web-1.agora.io","uap-web-2.ap.sd-rtn.com","uap-ap-web-3.agora.io","uap-web-4.ap.sd-rtn.com"],LOG_UPLOAD_SERVER:"logservice.agora.io",EVENT_REPORT_DOMAIN:"statscollector-1.agora.io",EVENT_REPORT_BACKUP_DOMAIN:"web-2.statscollector.sd-rtn.com",ENABLE_EVENT_REPORT:!0,GATEWAY_ADDRESS:[],GATEWAY_WSS_ADDRESS:"",LIVE_STREAMING_ADDRESS:"",HTTP_CONNECT_TIMEOUT:5e3,SIGNAL_REQUEST_TIMEOUT:1e4,REPORT_STATS:!0,UPLOAD_LOG:!1,NOT_REPORT_EVENT:[],SUBSCRIBE_TWCC:!0,PUBLISH_TWCC:!1,PING_PONG_TIME_OUT:10,WEBSOCKET_TIMEOUT_MIN:1e4,EVENT_REPORT_SEND_INTERVAL:3e3,CONFIG_DISTRIBUTE_INTERVAL:3e5,ENABLE_CONFIG_DISTRIBUTE:!0,CANDIDATE_TIMEOUT:5e3,SHOW_REPORT_INVOKER_LOG:!1,JOIN_EXTEND:"",PUB_EXTEND:"",SUB_EXTEND:"",FORCE_TURN:!1,TURN_ENABLE_TCP:!0,TURN_ENABLE_UDP:!0,MAX_UPLOAD_CACHE:50,UPLOAD_CACHE_INTERVAL:2e3,AJAX_REQUEST_CONCURRENT:3,REPORT_APP_SCENARIO:void 0,GATEWAY_DOMAINS:["edge.agora.io","edge.sd-rtn.com"],CONNECT_GATEWAY_WITHOUT_DOMAIN:!1,WORKER_DOMAIN:"edge.agora.io",TURN_DOMAIN:"edge.agora.io",EVENT_REPORT_RETRY:!0,CHROME_FORCE_PLAN_B:!1,AUDIO_SOURCE_VOLUME_UPDATE_INTERVAL:400,AUDIO_SOURCE_AVG_VOLUME_DURATION:3e3,AUDIO_VOLUME_INDICATION_INTERVAL:2e3,VOLUME_VOICE_WEIGHT:10,GET_VOLUME_OF_MUTED_AUDIO_TRACK:!1,STATS_UPDATE_INTERVAL:250,NORMAL_EVENT_QUEUE_CAPACITY:100,CUSTOM_REPORT:!0,CUSTOM_REPORT_LIMIT:20,PROXY_SERVER_TYPE2:"webnginx-proxy.agora.io",PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com","webrtc-cloud-proxy.agora.io"],CUSTOM_PUB_ANSWER_MODIFIER:null,CUSTOM_SUB_ANSWER_MODIFIER:null,CUSTOM_PUB_OFFER_MODIFIER:null,CUSTOM_SUB_OFFER_MODIFIER:null,DSCP_TYPE:"high",REMOVE_NEW_CODECS:!0,FRAGEMENT_LENGTH:3,WEBSOCKET_COMPRESS:!1,SIMULCAST:!1,PRELOAD_MEDIA_COUNT:0,USE_PUB_RTX:!0,USE_SUB_RTX:!0,USE_XR:!0,ENABLE_LOSSBASED_BWE:!0,ENABLE_AUT_CC:void 0,ENABLE_CC_FALLBACK:void 0,CHECK_VIDEO_VISIBLE_INTERVAL:3e4,CHECK_LOCAL_STATS_INTERVAL:250,PROFILE_SWITCH_INTERVAL:2e3,UNSUPPORTED_VIDEO_CODEC:[],ENUMERATE_DEVICES_INTERVAL:!1,ENUMERATE_DEVICES_INTERVAL_TIME:1e4,USE_NEW_TOKEN:!1,CLOSE_AFB_FOR_LOCAL_AP:!0,JOIN_MAX_CONCURRENCY:6,JOIN_WITH_FALLBACK_SIGNAL_PROXY:!0,JOIN_WITH_FALLBACK_MEDIA_PROXY:!0,JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE:!1,JOIN_GATEWAY_TRY_443PORT_DURATION:2e3,JOIN_GATEWAY_USE_443PORT_ONLY:!1,JOIN_GATEWAY_USE_DUAL_DOMAIN:!0,JOIN_GATEWAY_FALLBACK_PORT:443,USE_TURN_SERVER_OF_GATEWAY:!1,H264_PROFILE_LEVEL_ID:"",USE_NEW_LOG:!1,LOG_VERSION:3,MEDIA_DEVICE_CONSTRAINTS:null,ENCRYPT_PROXY_USERNAME_AND_PSW:!0,SDP_LOGGING:!1,CSP_DETECTED_HOSTNAME_LIST:["agora.io","sd-rtn.com"],REMOTE_AUDIO_TRACK_USES_WEB_AUDIO:!1,LOCAL_AUDIO_TRACK_USES_WEB_AUDIO:!1,BITRATE_ADAPTER_TYPE:"STANDARD_BITRATE",AI_DENOISER_PARAMETERS:{excludedLinks:[]},ADJUST_3A_FROM_PLUGINS:!0,RAISE_H264_BASELINE_PRIORITY:!0,FILTER_SEND_H264_BASELINE:!1,ENABLE_PUBLISHED_USER_LIST:!0,MAX_SUBSCRIPTION:50,X_GOOGLE_START_BITRATE:void 0,NEW_REPORT_SERVER:!1,NEW_REPORT_SERVER_DOMAINS:["data-reporting.agora.io","data-reporting.agora.io"],VIDEO_INSPECT_WORKER_MESSAGE_LENGTH_LIMIT:3e5,VIDEO_INSPECT_INTERVAL_MINIMUM:1e3,VIDEO_INSPECT_QUALITY_RATIO:.9,VIDEO_INSPECT_WORKER_MANAGER_HOST:"edge.agora.io",VIDEO_INSPECT_WORKER_MANAGER_PORT:"",VIDEO_INSPECT_WORKER_PORT:"",SHOW_VIDEO_INSPECT_WORKER_MESSAGE:!1,STATS_COLLECTOR_PORT:443,FORCE_TURN_TCP:!1,SUBSCRIBE_AUDIO_FILTER_TOPN:void 0,ENABLE_PUBLISH_AUDIO_FILTER:void 0,DISABLE_FEC:void 0,WEBAUDIO_INIT_OPTIONS:void 0,FILTER_VIDEO_FEC:!0,FILTER_AUDIO_FEC:!1,CHROME_DUAL_STREAM_USE_ENCODING:!0,DISABLE_DUAL_STREAM_USE_ENCODING:!1,EXTENSION_USAGE_UPLOAD_INTERVAL:1e4,ICE_RESTART:!0,ICE_RESTART_INTERVAL:1e4,NEW_ICE_RESTART:!1,ENABLE_USER_LICENSE_CHECK:!0,SIGNAL_CHANNEL:0,TRANSMITTER_INITIAL_RTT:30,TRANSMITTER_INITIAL_RTO:30,TRANSMITTER_MAX_BATCH_ACK_COUNT:2,TRANSMITTER_MAX_RTO:500,DATACHANNEL_COMPRESS:!1,FINGERPRINT:null,DC_JOIN_WITH_FAILBACK:5e3,ENABLE_VIDEO_FRAME_CALLBACK:!0,VIDEO_FREEZE_DURATION:500,SPATIALIZER_PARAMETERS:{},UPLOAD_LOG_INTERVAL:3e3,UPLOAD_LOG_REQUEST_RETRY_INTERVAL:2e3,UPLOAD_LOG_REQUEST_MAX_RETRY_INTERVAL:2e4,UPLOAD_LOG_TRY_INTERVAL_WHILE_OFF:5e3,UPLOAD_LOG_RETRY_INTERVAL_V1:1e4,UPLOAD_LOG_TWICE_RETRY_INTERVAL_V1:200,UPLOAD_LOG_LENGTH_EACH_TIME:10,APP_TYPE:0,DISABLE_WEBAUDIO:!1,CHANNEL_MEDIA_RELAY_SERVERS:void 0,KEEP_LAST_FRAME:!0,FORWARD_P2P_CREATION:!0,SYNC_GROUP:!0,BLOCK_LOCAL_CLIENT:!1,AP_AREA:!0,SVC:[],ENABLE_ENCODED_TRANSFORM:!1,ENABLE_VIDEO_SEI:!1,IMAGE_MODERATION_WORKER_HOST:"edge.agora.io",IMAGE_MODERATION_WORKER_MESSAGE_LENGTH_LIMIT:3e5,IMAGE_MODERATION_INTERVAL_MINIMUM:1e3,SHOW_IMAGE_MODERATION_WORKER_MESSAGE:!1,IMAGE_MODERATION_QUALITY_RATIO:.9,IMAGE_MODERATION_UPLOAD_REPORT_INTERVAL:5e3,SHOW_GLOBAL_CLIENT_LIST:!1,ENABLE_DATASTREAM_2:!1,DATASTREAM_MAX_RETRANSMITS:10,ENABLE_USER_AUTO_REBALANCE_CHECK:!0,ENABLE_INSTANT_VIDEO:!1,ENABLE_NTP_REPORT:!1,TCP_CANDIDATE_ONLY:!1,EXTERNAL_SIGNAL_REQUEST_TIMEOUT:3e3,SHOW_P2P_LOG:!1,MAX_P2P_TIMEOUT:3e4,P2P_TOKEN_INTERVAL:1e3,SHOW_DATASTREAM2_LOG:!1,RESTRICTION_SET_PLAYBACK_DEVICE:!0,USE_PURE_ENCRYPTION_MASTER_KEY:!1,ACCOUNT_REGISTER_RETRY_TIMEOUT:1,ACCOUNT_REGISTER_RETRY_RATIO:2,ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX:6e4,ACCOUNT_REGISTER_RETRY_COUNT_MAX:1e5,AUDIO_CONTEXT:null,WEBCS_BACKUP_CONNECT_TIMEOUT:6e3,PLAYER_STATE_DEFER:2e3,SIGNAL_REQUEST_WATCH_INTERVAL:1e3,FILEPATH_LENMAX:255,DUALSTREAM_OPERATION_CHECK:!0,MEDIA_ELEMENT_EXISTS_DEPTH:3,SHIM_CANDIDATE:!1,LEAVE_MSG_TIMEOUT:2e3,STATS_FILTER:{transportId:!0,googTrackId:!0},FILTER_VIDEO_CODEC:[],USE_NEW_NETWORK_CONFIG:!1,AUTO_RESET_AUDIO_ROUTE:!1,PLUGIN_INFO:[],OVERUSE_DETECTOR_PARAMS:Kw,ENABLE_AG_ADAPTATION:!0,FORCE_AG_HIGH_FRAMERATE:!1,FORCE_SUPPORT_AG_ADAPTATION:!1,CUSTOM_ADAPTATION_DEFAULT_MODE:"",ENCODER_CONFIG_LIMIT:{},CAMERA_CAPTURE_CONFIG:void 0,HIDE_NO_POSTER:!1,AP_CACHE_NUM:10,AP_UPDATE_INTERVAL:12e4,AP_CACHE_LIFETIME:12e4,MAX_PRELOAD_ASYNC_LENGTH:3,ENABLE_PRELOAD:!0};function Jn(t,n,i){var a,l,u;Ye(a=Object.keys(ui)).call(a,t)&&(!i&&Ye(l=Object.keys(ju)).call(l,t)||(ui[t]=n,t==="ENABLE_VIDEO_SEI"&&n===!0&&(ui.ENABLE_ENCODED_TRANSFORM=!0),t==="USE_NEW_NETWORK_CONFIG"&&n&&(u=!!n,ui.USE_NEW_NETWORK_CONFIG=u,u&&(ui.WEBCS_DOMAIN=["webrtc2-2.ap.sd-rtn.com"],ui.WEBCS_DOMAIN_BACKUP_LIST=["webrtc2-4.ap.sd-rtn.com"],ui.CDS_AP=["cds-web-2.ap.sd-rtn.com","cds-web-4.ap.sd-rtn.com"],ui.ACCOUNT_REGISTER=["sua-web-2.ap.sd-rtn.com","sua-web-4.ap.sd-rtn.com"],ui.EVENT_REPORT_DOMAIN="web-2.statscollector.sd-rtn.com",ui.EVENT_REPORT_BACKUP_DOMAIN="statscollector-1.agora.io",ui.GATEWAY_DOMAINS=["edge.sd-rtn.com"]))))}function ee(t){return ui[t]}const ju={};var tn=function(t){return t.SET_SESSION_ID="SET_SESSION_ID",t.SET_P2P_ID="SET_P2P_id",t.SET_DC_ID="SET_DC_id",t.SET_UID="SET_UID",t.SET_INT_UID="SET_INT_UID",t.SET_PUB_ID="SET_PUB_ID",t.SET_CLOUD_PROXY_SERVER_MODE="SET_CLOUD_PROXY_SERVER_MODE",t.KEY_METRIC_CLIENT_CREATED="KEY_METRIC_CLIENT_CREATED",t.KEY_METRIC_JOIN_START="KEY_METRIC_JOIN_START",t.AVOID_JOIN_START="AVOID_JOIN_START",t.KEY_METRIC_JOIN_END="KEY_METRIC_JOIN_END",t.KEY_METRIC_REQUEST_AP_START="KEY_METRIC_REQUEST_AP_START",t.KEY_METRIC_REQUEST_AP_END="KEY_METRIC_REQUEST_AP_END",t.KEY_METRIC_JOIN_GATEWAY_START="KEY_METRIC_JOIN_GATEWAY_START",t.KEY_METRIC_JOIN_GATEWAY_END="KEY_METRIC_JOIN_GATEWAY_END",t.KEY_METRIC_PEER_CONNECTION_START="KEY_METRIC_PEER_CONNECTION_START",t.KEY_METRIC_PEER_CONNECTION_END="KEY_METRIC_PEER_CONNECTION_END",t.KEY_METRIC_DESCRIPTION_START="KEY_METRIC_DESCRIPTION_START",t.KEY_METRIC_ICE_CONNECTION_END="KEY_METRIC_ICE_CONNECTION_END",t.KEY_METRIC_SIGNAL_CHANNEL_OPEN="KEY_METRIC_SIGNAL_CHANNEL_OPEN",t.KEY_METRIC_PUBLISH="KEY_METRIC_PUBLISH",t.KEY_METRIC_SUBSCRIBE="KEY_METRIC_SUBSCRIBE",t.RECORD_JOIN_CHANNEL_SERVICE="RECORD_JOIN_CHANNEL_SERVICE",t.RESET_JOIN_CHANNEL_SERVICE_RECORDS="RESET_JOIN_CHANNEL_SERVICE_RECORDS",t.RESET_KEY_METRICS="RESET_KEY_METRICS",t.SET_USE_DATACHANNEL="SET_USE_DATACHANNEL",t.SET_USE_P2P="SET_USE_P2P",t.SET_TRANSPORT_TYPE="SET_TRANSPORT_TYPE",t}(tn||{});class Jce{constructor(n,i,a,l){fr(this,"state",void 0),this.state={codec:n,audioCodec:i,mode:a,clientId:l,sessionId:null,p2pId:0,dcId:0,pubId:0,subId:0,avoidJoinStart:0,keyMetrics:{publish:[],subscribe:[]},joinChannelServiceRecords:[],cloudProxyServerMode:"disabled",useDataChannel:!1,useP2P:!1,p2pTransport:nh.Default}}dispatch(n){this.state=function(i,a){switch(a.type){case tn.SET_SESSION_ID:return pt(pt({},i),{},{sessionId:a.sessionId});case tn.SET_P2P_ID:return pt(pt({},i),{},{p2pId:a.p2pId});case tn.SET_UID:return pt(pt({},i),{},{uid:a.uid});case tn.SET_INT_UID:return pt(pt({},i),{},{intUid:a.intUid});case tn.SET_PUB_ID:return pt(pt({},i),{},{pubId:a.pubId});case tn.KEY_METRIC_CLIENT_CREATED:return pt(pt({},i),{},{keyMetrics:pt(pt({},i.keyMetrics),{},{clientCreated:a.metric})});case tn.KEY_METRIC_JOIN_START:return pt(pt({},i),{},{keyMetrics:pt(pt({},i.keyMetrics),{},{joinStart:a.metric})});case tn.AVOID_JOIN_START:return pt(pt({},i),{},{avoidJoinStart:a.avoidJoinStart});case tn.KEY_METRIC_JOIN_END:return pt(pt({},i),{},{keyMetrics:pt(pt({},i.keyMetrics),{},{joinEnd:a.metric})});case tn.KEY_METRIC_REQUEST_AP_START:return pt(pt({},i),{},{keyMetrics:pt(pt({},i.keyMetrics),{},{requestAPStart:a.metric})});case tn.KEY_METRIC_REQUEST_AP_END:return pt(pt({},i),{},{keyMetrics:pt(pt({},i.keyMetrics),{},{requestAPEnd:a.metric})});case tn.KEY_METRIC_JOIN_GATEWAY_START:return pt(pt({},i),{},{keyMetrics:pt(pt({},i.keyMetrics),{},{joinGatewayStart:a.metric})});case tn.KEY_METRIC_JOIN_GATEWAY_END:return pt(pt({},i),{},{keyMetrics:pt(pt({},i.keyMetrics),{},{joinGatewayEnd:a.metric})});case tn.KEY_METRIC_PEER_CONNECTION_START:return pt(pt({},i),{},{keyMetrics:pt(pt({},i.keyMetrics),{},{peerConnectionStart:a.metric})});case tn.KEY_METRIC_PEER_CONNECTION_END:return pt(pt({},i),{},{keyMetrics:pt(pt({},i.keyMetrics),{},{peerConnectionEnd:a.metric})});case tn.KEY_METRIC_DESCRIPTION_START:return pt(pt({},i),{},{keyMetrics:pt(pt({},i.keyMetrics),{},{descriptionStart:a.metric})});case tn.KEY_METRIC_SIGNAL_CHANNEL_OPEN:return pt(pt({},i),{},{keyMetrics:pt(pt({},i.keyMetrics),{},{signalChannelOpen:a.metric})});case tn.KEY_METRIC_ICE_CONNECTION_END:return pt(pt({},i),{},{keyMetrics:pt(pt({},i.keyMetrics),{},{iceConnectionEnd:a.metric})});case tn.KEY_METRIC_PUBLISH:{const l=i.keyMetrics.publish,u=l.findIndex(h=>h.trackId===a.metric.trackId);return u!==-1?(l[u]=pt(pt({},l[u]),a.metric),pt(pt({},i),{},{keyMetrics:pt(pt({},i.keyMetrics),{},{publish:[...l]})})):pt(pt({},i),{},{keyMetrics:pt(pt({},i.keyMetrics),{},{publish:[...i.keyMetrics.publish,a.metric]})})}case tn.KEY_METRIC_SUBSCRIBE:{const l=i.keyMetrics.subscribe,u=l.findIndex(h=>h.userId===a.metric.userId&&h.type===a.metric.type);return u!==-1?(l[u]=pt(pt({},l[u]),a.metric),pt(pt({},i),{},{keyMetrics:pt(pt({},i.keyMetrics),{},{subscribe:[...l]})})):pt(pt({},i),{},{keyMetrics:pt(pt({},i.keyMetrics),{},{subscribe:[...i.keyMetrics.subscribe,a.metric]})})}case tn.SET_CLOUD_PROXY_SERVER_MODE:return i.cloudProxyServerMode=a.mode,i;case tn.RECORD_JOIN_CHANNEL_SERVICE:return typeof a.index!="number"?i.joinChannelServiceRecords=[...i.joinChannelServiceRecords,a.record]:(i.joinChannelServiceRecords[a.index]=pt(pt({},i.joinChannelServiceRecords[a.index]),a.record),i.joinChannelServiceRecords=[...i.joinChannelServiceRecords]),i;case tn.RESET_JOIN_CHANNEL_SERVICE_RECORDS:return i.joinChannelServiceRecords=[],i;case tn.RESET_KEY_METRICS:return i.keyMetrics={publish:[],subscribe:[]},i;case tn.SET_USE_DATACHANNEL:return pt(pt({},i),{},{useDataChannel:a.val});case tn.SET_USE_P2P:return pt(pt({},i),{},{useP2P:a.val});case tn.SET_TRANSPORT_TYPE:return pt(pt({},i),{},{p2pTransport:a.val});default:return i}}(this.state,n)}set sessionId(n){this.dispatch({type:tn.SET_SESSION_ID,sessionId:n})}get sessionId(){return this.state.sessionId}set codec(n){this.state.codec=n}get codec(){return this.state.codec}get mode(){return this.state.mode}get audioCodec(){return this.state.audioCodec}get clientId(){return this.state.clientId}set p2pId(n){this.dispatch({type:tn.SET_P2P_ID,p2pId:n})}get p2pId(){return this.state.p2pId}set dcId(n){this.dispatch({type:tn.SET_DC_ID,dcId:n})}get dcId(){return this.state.dcId}set uid(n){this.dispatch({type:tn.SET_UID,uid:n})}get uid(){return this.state.uid}set intUid(n){this.dispatch({type:tn.SET_INT_UID,intUid:n})}get intUid(){return this.state.intUid}set pubId(n){this.dispatch({type:tn.SET_PUB_ID,pubId:n})}get pubId(){return this.state.pubId}set cloudProxyServerMode(n){this.dispatch({type:tn.SET_CLOUD_PROXY_SERVER_MODE,mode:n})}get cloudProxyServerMode(){return this.state.cloudProxyServerMode}set useDataChannel(n){this.dispatch({type:tn.SET_USE_DATACHANNEL,val:n})}get useDataChannel(){return this.state.useDataChannel}set useP2P(n){this.dispatch({type:tn.SET_USE_P2P,val:n})}get useP2P(){return this.state.useP2P}set p2pTransport(n){this.dispatch({type:tn.SET_TRANSPORT_TYPE,val:n})}get p2pTransport(){return this.state.p2pTransport}clientCreated(){this.dispatch({type:tn.KEY_METRIC_CLIENT_CREATED,metric:Date.now()})}joinStart(){this.dispatch({type:tn.KEY_METRIC_JOIN_START,metric:Date.now()})}joinEnd(){this.dispatch({type:tn.KEY_METRIC_JOIN_END,metric:Date.now()})}requestAPStart(){this.dispatch({type:tn.KEY_METRIC_REQUEST_AP_START,metric:Date.now()})}requestAPEnd(){this.dispatch({type:tn.KEY_METRIC_REQUEST_AP_END,metric:Date.now()})}joinGatewayStart(){this.dispatch({type:tn.KEY_METRIC_JOIN_GATEWAY_START,metric:Date.now()})}joinGatewayEnd(){this.dispatch({type:tn.KEY_METRIC_JOIN_GATEWAY_END,metric:Date.now()})}peerConnectionStart(){this.dispatch({type:tn.KEY_METRIC_PEER_CONNECTION_START,metric:Date.now()})}peerConnectionEnd(){this.dispatch({type:tn.KEY_METRIC_PEER_CONNECTION_END,metric:Date.now()})}descriptionStart(){this.dispatch({type:tn.KEY_METRIC_DESCRIPTION_START,metric:Date.now()})}signalChannelOpen(){this.dispatch({type:tn.KEY_METRIC_SIGNAL_CHANNEL_OPEN,metric:Date.now()})}iceConnectionEnd(){this.dispatch({type:tn.KEY_METRIC_ICE_CONNECTION_END,metric:Date.now()})}publish(n,i,a,l){this.dispatch({type:tn.KEY_METRIC_PUBLISH,metric:pt(pt({trackId:n,type:i},a&&{publishStart:a}),l&&{publishEnd:l})})}subscribe(n,i,a,l,u,h,f){this.dispatch({type:tn.KEY_METRIC_SUBSCRIBE,metric:pt(pt(pt(pt(pt({userId:n,type:i},a&&{subscribeStart:a}),l&&{subscribeEnd:l}),u&&{firstFrame:u}),h&&{streamAdded:h}),f&&{firstDecoded:f})})}massSubscribe(n,i,a,l){n.forEach(u=>{this.dispatch({type:tn.KEY_METRIC_SUBSCRIBE,metric:pt(pt(pt({userId:u.userId,type:u.type},i&&{subscribeStart:i}),a&&{subscribeEnd:a}),l&&{firstFrame:l})})})}get keyMetrics(){return this.state.keyMetrics}recordJoinChannelService(n,i){n.service==="gateway"&&Array.isArray(n.urls)&&(n.urls=n.urls.map(a=>a.replace(/(\d+)-\d+-\d+-(\d+)/,"$1-*-*-$2")));try{return typeof i!="number"?(this.dispatch({type:tn.RECORD_JOIN_CHANNEL_SERVICE,record:pt(pt({},n),{},{sessionId:this.sessionId,cloudProxyMode:this.cloudProxyServerMode,uid:this.uid})}),this.state.joinChannelServiceRecords.length-1):(i<0||i>=this.state.joinChannelServiceRecords.length||this.dispatch({type:tn.RECORD_JOIN_CHANNEL_SERVICE,record:n,index:i}),i)}catch{return 0}}resetJoinChannelServiceRecords(){this.dispatch({type:tn.RESET_JOIN_CHANNEL_SERVICE_RECORDS})}resetKeyMetrics(){this.dispatch({type:tn.RESET_KEY_METRICS})}get joinChannelServiceRecords(){try{return this.state.joinChannelServiceRecords}catch{return[]}}get avoidJoinStart(){return this.state.avoidJoinStart}set avoidJoinStart(n){this.dispatch({type:tn.AVOID_JOIN_START,avoidJoinStart:n})}}let $p=function(t){return t.h264="h264",t.h265="h265",t.vp8="vp8",t.vp9="vp9",t.av1="av1",t}({});(function(t){t.opus="opus",t.pcma="pcma",t.pcmu="pcmu",t.g722="g722"})({});const M4=128,Qce=96,F4=1e3,Hp=10;let Zce=0;function U4(t,n){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),i.push.apply(i,a)}return i}function Yt(t){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?U4(Object(i),!0).forEach(function(a){$r(t,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):U4(Object(i)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(i,a))})}return t}function $r(t,n,i){return(n=function(a){var l=function(u,h){if(typeof u!="object"||u===null)return u;var f=u[Symbol.toPrimitive];if(f!==void 0){var g=f.call(u,"string");if(typeof g!="object")return g;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(u)}(a);return typeof l=="symbol"?l:String(l)}(n))in t?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i,t}const B4=new class extends _r{constructor(){super(...arguments),$r(this,"currentUploadLogID",0)}reportLogUploadError(t){const{errorRange:n}=t;n[n.length-1]&&n[n.length-1]>this.currentUploadLogID&&(this.currentUploadLogID=n[n.length-1],this.emit("REPORT_LOG_UPLOAD",t))}};class ele{constructor(n){$r(this,"logger",void 0),$r(this,"prefixLists",[]),this.logger=n}debug(){for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];this.logger.debug(...this.prefixLists,...i)}info(){for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];this.logger.info(...this.prefixLists,...i)}warning(){for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];this.logger.warning(...this.prefixLists,...i)}error(){for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];this.logger.error(...this.prefixLists,...i)}prefix(n){return this.prefixLists.push(n),this}popPrefix(){return this.prefixLists.pop(),this}}function Yw(){const t=new Date;return t.toTimeString().split(" ")[0]+":"+t.getMilliseconds()}function V4(){const t=new Date,n=/((\d+:){2}\d+)/.exec(new Date().toUTCString());return n?(n==null?void 0:n[0])+":"+t.getUTCMilliseconds():t.toTimeString().split(" ")[0]+":"+t.getMilliseconds()}const us={DEBUG:0,INFO:1,WARNING:2,ERROR:3,NONE:4},p_=Date.now(),S0=t=>{for(const n in us)if(Object.prototype.hasOwnProperty.call(us,n)&&us[n]===t)return n;return"DEFAULT"},k=new class{constructor(){$r(this,"proxyServerURL",void 0),$r(this,"logLevel",us.DEBUG),$r(this,"uploadState","collecting"),$r(this,"uploadLogWaitingList",[]),$r(this,"uploadLogUploadingList",[]),$r(this,"uploadErrorCount",0),$r(this,"currentLogID",0),$r(this,"url",void 0),$r(this,"extLog",(t,n)=>{this.appendLogToWaitingList(t,...n)})}debug(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];const a=[us.DEBUG].concat(n);this.log.apply(this,a)}info(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];const a=[us.INFO].concat(n);this.log.apply(this,a)}warning(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];const a=[us.WARNING].concat(n);this.log.apply(this,a)}warn(){this.warning(...arguments)}error(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];const a=[us.ERROR].concat(n);this.log.apply(this,a)}upload(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];const a=[us.DEBUG].concat(n);this.uploadLog.apply(this,a)}setLogLevel(t){t=Math.min(Math.max(0,t),4),this.logLevel=t}enableLogUpload(){Jn("UPLOAD_LOG",!0)}disableLogUpload(){Jn("UPLOAD_LOG",!1),this.uploadLogUploadingList=[],this.uploadLogWaitingList=[]}setProxyServer(t){this.proxyServerURL=t}prefix(t){return new ele(this).prefix(t)}log(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];if(Date.now()-p_<100)return void setTimeout(()=>{this.log(...n)},Date.now()-p_);const a=Math.max(0,Math.min(4,n[0]));if(n[0]=Yw()+" Agora-SDK [".concat(S0(a),"]:"),this.appendLogToWaitingList(a,...n),a<this.logLevel)return;const l=Yw()+" %cAgora-SDK [".concat(S0(a),"]:");let u=[];if(!ee("USE_NEW_LOG"))switch(a){case us.DEBUG:u=[l,"color: #64B5F6;"].concat(n.slice(1)),console.log.apply(console,u);break;case us.INFO:u=[l,"color: #1E88E5; font-weight: bold;"].concat(n.slice(1)),console.log.apply(console,u);break;case us.WARNING:u=[l,"color: #FB8C00; font-weight: bold;"].concat(n.slice(1)),console.warn.apply(console,u);break;case us.ERROR:u=[l,"color: #B00020; font-weight: bold;"].concat(n.slice(1)),console.error.apply(console,u)}}uploadLog(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];if(Date.now()-p_<100)return void setTimeout(()=>{this.uploadLog(...n)},Date.now()-p_);const a=Math.max(0,Math.min(4,n[0]));n[0]=Yw()+" Agora-SDK [".concat(S0(a),"]:"),this.appendLogToWaitingList(a,...n)}appendLogToWaitingList(t){if(!ee("UPLOAD_LOG"))return;for(var n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];Array.isArray(i[0])?i[0][0]=V4()+" Agora-SDK [".concat(S0(t),"]:"):i[0]=V4()+" Agora-SDK [".concat(S0(t),"]:");let l="";i.forEach(u=>{typeof u=="object"&&(u=JSON.stringify(u)),l+="".concat(u," ")}),this.uploadLogWaitingList.push({payload_str:l,log_level:t,log_item_id:this.currentLogID++}),this.uploadState==="uploading"&&this.uploadLogUploadingList.length===0&&this.uploadLogInterval()}startUpload(){this.uploadState="uploading",this.uploadLogUploadingList.length===0&&this.uploadLogInterval()}async uploadLogs(){const t=this.uploadLogUploadingList,n={sdk_version:ls,process_id:ee("PROCESS_ID"),payload:JSON.stringify(t)};return bc(async()=>{const i=await Go.post(this.url||(this.proxyServerURL?"https://".concat(this.proxyServerURL,"/ls/?h=").concat(ee("LOG_UPLOAD_SERVER"),"&p=443&d=upload/v1"):"https://".concat(ee("LOG_UPLOAD_SERVER"),"/upload/v1")),n,{responseType:"text"});if(i.data!=="OK"){const a=new Error("unexpected upload log response");throw a.response=i,a}},()=>(this.uploadLogUploadingList=[],!1),i=>{const a={status:-1,message:i.message,errorRange:t.map(l=>l.log_item_id)};return i.response?(a.status=i.response.status,a.data=i.response.data,a.headers=i.response.headers):i.request&&(a.status=i.request.status),B4.reportLogUploadError(a),!0},{timeout:ee("UPLOAD_LOG_REQUEST_RETRY_INTERVAL"),maxRetryTimeout:ee("UPLOAD_LOG_REQUEST_MAX_RETRY_INTERVAL")})}uploadLogInterval(){this.uploadLogUploadingList.length===0&&this.uploadLogWaitingList.length===0||(this.uploadLogUploadingList.length===0&&(this.uploadLogUploadingList=this.uploadLogWaitingList.splice(0,ee("UPLOAD_LOG_LENGTH_EACH_TIME"))),this.uploadLogs().then(()=>{this.uploadErrorCount=0,this.uploadLogWaitingList.length>0&&window.setTimeout(()=>this.uploadLogInterval(),ee("UPLOAD_LOG_INTERVAL"))}).catch(t=>{this.uploadErrorCount+=1,this.uploadErrorCount<2?window.setTimeout(()=>this.uploadLogInterval(),ee("UPLOAD_LOG_TWICE_RETRY_INTERVAL_V1")):window.setTimeout(()=>this.uploadLogInterval(),ee("UPLOAD_LOG_RETRY_INTERVAL_V1"))}))}};var j4;function tle(t){return Mi(t.reportId,"params.reportId",0,100,!1),Mi(t.category,"params.category",0,100,!1),Mi(t.event,"params.event",0,100,!1),Mi(t.label,"params.label",0,100,!1),Xn(t.value,"params.value",Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,!1),!0}(j4={}).FREE="free",j4.UPLOADING="uploading",function(t){t[t.MISC=0]="MISC",t[t.INTERNAL_EVENT=1]="INTERNAL_EVENT",t[t.PUBLIC_EVENT=2]="PUBLIC_EVENT",t[t.WEB_EVENT=3]="WEB_EVENT",t[t.INTERNAL_API=4]="INTERNAL_API",t[t.WEB_API=5]="WEB_API",t[t.PUBLIC_API=6]="PUBLIC_API"}({});const nle={sid:"",lts:0,success:null,cname:null,uid:null,peer:null,cid:null,elapse:null,extend:null,vid:0};let xi=function(t){return t.PUBLISH="publish",t.SUBSCRIBE="subscribe",t.WS_COMPRESSOR_INIT="ws_compressor_init",t.SESSION_INIT="session_init",t.JOIN_CHOOSE_SERVER="join_choose_server",t.REQ_USER_ACCOUNT="req_user_account",t.JOIN_GATEWAY="join_gateway",t.REJOIN_GATEWAY="rejoin_gateway",t.STREAM_SWITCH="stream_switch",t.REQUEST_PROXY_WORKER_MANAGER="request_proxy_worker_manager",t.REQUEST_PROXY_APPCENTER="request_proxy_appcenter",t.FIRST_VIDEO_RECEIVED="first_video_received",t.FIRST_AUDIO_RECEIVED="first_audio_received",t.FIRST_VIDEO_DECODE="first_video_decode",t.FIRST_AUDIO_DECODE="first_audio_decode",t.ON_ADD_AUDIO_STREAM="on_add_audio_stream",t.ON_ADD_VIDEO_STREAM="on_add_video_stream",t.ON_UPDATE_STREAM="on_update_stream",t.ON_REMOVE_STREAM="on_remove_stream",t.USER_ANALYTICS="req_user_analytics",t.PC_STATS="pc_stats",t.UPDATE_REMOTE_RTPCAPABILITIES="update_remote_rtpCapabilities",t}({}),Ir=function(t){return t.SESSION="io.agora.pb.Wrtc.Session",t.JOIN_CHOOSE_SERVER="io.agora.pb.Wrtc.JoinChooseServer",t.REQ_USER_ACCOUNT="io.agora.pb.Wrtc.ReqUserAccount",t.JOIN_GATEWAY="io.agora.pb.Wrtc.JoinGateway",t.RE_JOIN_GATEWAY="io.agora.pb.Wrtc.ReJoinGateway",t.PUBLISH="io.agora.pb.Wrtc.Publish",t.SUBSCRIBE="io.agora.pb.Wrtc.Subscribe",t.WS_COMPRESSOR_INIT="io.agora.pb.Wrtc.WsCompressorInit",t.STREAM_SWITCH="io.agora.pb.Wrtc.StreamSwitch",t.AUDIO_SENDING_STOPPED="io.agora.pb.Wrtc.AudioSendingStopped",t.VIDEO_SENDING_STOPPED="io.agora.pb.Wrtc.VideoSendingStopped",t.REQUEST_PROXY_APPCENTER="io.agora.pb.Wrtc.RequestProxyAppCenter",t.REQUEST_PROXY_WORKER_MANAGER="io.agora.pb.Wrtc.RequestProxyWorkerManager",t.API_INVOKE="io.agora.pb.Wrtc.ApiInvoke",t.FIRST_VIDEO_RECEIVED="io.agora.pb.Wrtc.FirstVideoReceived",t.FIRST_AUDIO_RECEIVED="io.agora.pb.Wrtc.FirstAudioReceived",t.FIRST_VIDEO_DECODE="io.agora.pb.Wrtc.FirstVideoDecode",t.FIRST_AUDIO_DECODE="io.agora.pb.Wrtc.FirstAudioDecode",t.ON_ADD_AUDIO_STREAM="io.agora.pb.Wrtc.OnAddAudioStream",t.ON_ADD_VIDEO_STREAM="io.agora.pb.Wrtc.OnAddVideoStream",t.ON_UPDATE_STREAM="io.agora.pb.Wrtc.OnUpdateStream",t.ON_REMOVE_STREAM="io.agora.pb.Wrtc.OnRemoveStream",t.JOIN_CHANNEL_TIMEOUT="io.agora.pb.Wrtc.JoinChannelTimeout",t.PEER_PUBLISH_STATUS="io.agora.pb.Wrtc.PeerPublishStatus",t.WORKER_EVENT="io.agora.pb.Wrtc.WorkerEvent",t.AP_WORKER_EVENT="io.agora.pb.Wrtc.APWorkerEvent",t.JOIN_WEB_PROXY_AP="io.agora.pb.Wrtc.JoinWebProxyAP",t.WEBSOCKET_QUIT="io.agora.pb.Wrtc.WebSocketQuit",t.USER_ANALYTICS="io.agora.pb.Wrtc.UserAnalytics",t.AUTOPLAY_FAILED="io.agora.pb.Wrtc.AutoplayFailed",t.PC_STATS="io.agora.pb.Wrtc.PCStats",t.UPDATE_REMOTE_RTPCAPABILITIES="io.agora.pb.Wrtc.UpdateRemoteRTPCapabilities",t}({});(function(t){t[t.WORKER_EVENT=156]="WORKER_EVENT",t[t.AP_WORKER_EVENT=160]="AP_WORKER_EVENT"})({}),function(t){t[t.SESSION=26]="SESSION",t[t.JOIN_CHOOSE_SERVER=27]="JOIN_CHOOSE_SERVER",t[t.REQ_USER_ACCOUNT=196]="REQ_USER_ACCOUNT",t[t.JOIN_GATEWAY=28]="JOIN_GATEWAY",t[t.PUBLISH=30]="PUBLISH",t[t.SUBSCRIBE=29]="SUBSCRIBE",t[t.WS_COMPRESSOR_INIT=9430]="WS_COMPRESSOR_INIT",t[t.STREAM_SWITCH=32]="STREAM_SWITCH",t[t.AUDIO_SENDING_STOPPED=33]="AUDIO_SENDING_STOPPED",t[t.VIDEO_SENDING_STOPPED=34]="VIDEO_SENDING_STOPPED",t[t.REQUEST_PROXY_APPCENTER=35]="REQUEST_PROXY_APPCENTER",t[t.REQUEST_PROXY_WORKER_MANAGER=36]="REQUEST_PROXY_WORKER_MANAGER",t[t.API_INVOKE=41]="API_INVOKE",t[t.FIRST_VIDEO_RECEIVED=348]="FIRST_VIDEO_RECEIVED",t[t.FIRST_AUDIO_RECEIVED=349]="FIRST_AUDIO_RECEIVED",t[t.FIRST_VIDEO_DECODE=350]="FIRST_VIDEO_DECODE",t[t.FIRST_AUDIO_DECODE=351]="FIRST_AUDIO_DECODE",t[t.ON_ADD_AUDIO_STREAM=352]="ON_ADD_AUDIO_STREAM",t[t.ON_ADD_VIDEO_STREAM=353]="ON_ADD_VIDEO_STREAM",t[t.ON_UPDATE_STREAM=356]="ON_UPDATE_STREAM",t[t.ON_REMOVE_STREAM=355]="ON_REMOVE_STREAM",t[t.JOIN_CHANNEL_TIMEOUT=407]="JOIN_CHANNEL_TIMEOUT",t[t.PEER_PUBLISH_STATUS=408]="PEER_PUBLISH_STATUS",t[t.WORKER_EVENT=156]="WORKER_EVENT",t[t.AP_WORKER_EVENT=160]="AP_WORKER_EVENT",t[t.JOIN_WEB_PROXY_AP=700]="JOIN_WEB_PROXY_AP",t[t.WEBSOCKET_QUIT=671]="WEBSOCKET_QUIT",t[t.USER_ANALYTICS=1e4]="USER_ANALYTICS",t[t.AUTOPLAY_FAILED=9178]="AUTOPLAY_FAILED"}({});class y0{constructor(){$r(this,"baseInfoMap",new Map),$r(this,"proxyServer",void 0),$r(this,"eventUploadTimer",void 0),$r(this,"setSessionIdTimer",void 0),$r(this,"url",void 0),$r(this,"backupUrl",void 0),$r(this,"_appId",void 0),$r(this,"keyEventUploadPendingItems",[]),$r(this,"normalEventUploadPendingItems",[]),$r(this,"apiInvokeUploadPendingItems",[]),$r(this,"apiInvokeCount",0),$r(this,"ltsList",[]),$r(this,"lastSendNormalEventTime",Date.now()),$r(this,"customReportCounterTimer",void 0),$r(this,"customReportCount",0),$r(this,"extApiInvoke",async n=>{for(const i of n){const a=Yt(Yt({},i),{},{sid:null,invokeId:++this.apiInvokeCount,tag:Nr.TRACER});this.sendApiInvoke(a)}}),this.eventUploadTimer=window.setInterval(this.doSend.bind(this),ee("EVENT_REPORT_SEND_INTERVAL")),this.setSessionIdTimer=window.setInterval(this.appendSessionId.bind(this),ee("EVENT_REPORT_SEND_INTERVAL"))}getBaseInfoBySessionId(n){return this.baseInfoMap.get(n)}adjustSessionStartTime(n){if(!this.baseInfoMap.has(n)&&!this.baseInfoMap.get(n))return void k.error("adjust session ".concat(n," start time, sid is not exist or info is undefined"));const i=this.baseInfoMap.get(n),a=Date.now(),l=i.startTime;i.startTime=a,k.debug("rewrite session ".concat(n," startTime: ").concat(a," , ").concat(a-l,"ms")),this.baseInfoMap.set(n,i)}setAppId(n){this._appId=n}reportApiInvoke(n,i,a){i.timeout=i.timeout||6e4,i.reportResult=i.reportResult===void 0||i.reportResult;const l=Date.now();this.apiInvokeCount+=1;const u=this.apiInvokeCount,h=()=>({tag:i.tag,invokeId:u,sid:n,name:i.name,apiInvokeTime:l,options:i.options,states:i.states||null}),f=!!ee("SHOW_REPORT_INVOKER_LOG");f&&k.info("".concat(i.name," start"),i.options);let g=!1;yi(i.timeout).then(()=>{g||(this.sendApiInvoke(Yt(Yt({},h()),{},{error:K.API_INVOKE_TIMEOUT,success:!1})),k.debug("".concat(i.name," timeout")))});const _=new Ce(K.UNEXPECTED_ERROR,"".concat(i.name,": this api invoke is end"));return{onSuccess:y=>{const T=()=>{if(g)throw _;return g=!0,this.sendApiInvoke(Yt(Yt({},h()),{},{success:!0},i.reportResult&&{result:y})),f&&k.info("".concat(i.name," onSuccess")),y};return a?N4(T,i.name+"Success",a,()=>g=!0):T()},onError:y=>{const T=()=>{if(g)throw y;g=!0,this.sendApiInvoke(Yt(Yt({},h()),{},{success:!1,error:y})),f&&k.info("".concat(i.name," onFailure"),y.toString())};return a?N4(T,i.name+"Error",a,()=>g=!0):T()}}}sessionInit(n,i){if(this.baseInfoMap.has(n))return;const a=Date.now(),l=this.createBaseInfo(n,a);l.cname=i.cname;const u=Object.assign({},{willUploadConsoleLog:ee("UPLOAD_LOG"),maxTouchPoints:navigator.maxTouchPoints,areaVersion:Gw?"global":"oversea",areas:ee("AREAS")&&ee("AREAS").join(",")},i.extend),{stringUid:h,channelProfile:f,channelMode:g,isABTestSuccess:_,lsid:y,clientRole:T}=i,A=Date.now(),D=Yt(Yt({},l),{},{eventType:xi.SESSION_INIT,appid:i.appid,browser:navigator.userAgent,buildFormat:i.buildFormat,build:qw,lts:A,elapse:A-a,extend:JSON.stringify(u),mode:i.mode,process:ee("PROCESS_ID"),appType:ee("APP_TYPE"),success:!0,version:ls,stringUid:h,channelProfile:f,channelMode:g,isABTestSuccess:_,lsid:y,clientType:20,clientRole:T,serviceId:ee("PROCESS_ID"),extensionID:ee("PLUGIN_INFO").join(",")||"",preload:i.preload?1:0});this.send({type:Ir.SESSION,data:D},!0)}joinChooseServer(n,i){const a=this.baseInfoMap.get(n);if(!a)return;const l=a.info,u=Date.now(),h=Yt(Yt({},l),{},{eventType:xi.JOIN_CHOOSE_SERVER,lts:u,eventElapse:i.elapse||u-i.lts,chooseServerAddr:i.csAddr,errorCode:i.ec,elapse:u-a.startTime,success:i.succ,chooseServerAddrList:JSON.stringify(i.serverList),uid:i.uid?parseInt(i.uid):null,cid:i.cid?parseInt(i.cid):null,chooseServerIp:i.csIp||"",opid:i.opid,unilbsServerIds:i.unilbsServerIds,extend:i.extend||void 0,isHttp3:i.isHttp3});this.send({type:Ir.JOIN_CHOOSE_SERVER,data:h},!0)}reqUserAccount(n,i){const a=this.baseInfoMap.get(n);if(!a)return;const l=a.info,u=Date.now(),h=Yt(Yt({},l),{},{eventType:xi.REQ_USER_ACCOUNT,lts:u,success:i.success,serverAddress:i.serverAddr,stringUid:i.stringUid,uid:i.uid,errorCode:i.errorCode,elapse:i.elapse||u-a.startTime,eventElapse:u-i.lts,extend:JSON.stringify(i.extend)});this.send({type:Ir.REQ_USER_ACCOUNT,data:h},!0)}joinGateway(n,i){const a=this.baseInfoMap.get(n);if(!a)return;const l=a.info;i.vid&&(l.vid=i.vid),l.uid=i.uid,l.cid=i.cid;const u=Date.now(),{firstSuccess:h,avoidJoinStartTime:f,isProxy:g,addr:_}=i,y=u-(h&&f?f:a.startTime),T=Yt(Yt({},l),{},{eventType:xi.JOIN_GATEWAY,lts:u,gatewayAddr:i.addr,success:i.succ,errorCode:i.ec,elapse:y,eventElapse:u-i.lts,firstSuccess:h,signalChannel:i.signalChannel}),A=T.success?1:0;if(i.succ&&(a.lastJoinSuccessTime=u),h)this.send({type:Ir.JOIN_GATEWAY,data:T},!0);else{let D;if(_)if(g){const F=_.match(/h=(\d{1,3}-){3}\d{1,3}/g),U=_.match(/p=[0-9]{1,6}/g);D={isSuccess:A,gatewayIp:F&&F.length?F[0].split("=")[1].replace(/-/g,"."):"",port:U&&U.length?U[0].split("=")[1]:"",isProxy:g?1:0}}else{const F=_.match(/wss:\/\/(\d{1,3}-){3}\d{1,3}/g),U=_.match(/(:|p=)[0-9]{1,6}/g);D={isSuccess:A,gatewayIp:F&&F.length?F[0].split("//")[1].replace(/-/g,"."):"",port:U&&U.length?U[0].split(/:|p=/g)[1]:"",isProxy:g?1:0}}else D={isSuccess:A,gatewayIp:"",port:"",isProxy:g?1:0};delete T.success,delete T.eventType,delete T.firstSuccess,T.vid=Number(T.vid);const W=Object.assign({},T,D,{eventType:xi.REJOIN_GATEWAY});this.send({type:Ir.RE_JOIN_GATEWAY,data:W},!0)}}joinChannelTimeout(n,i){const a=this.baseInfoMap.get(n);if(!a)return;const l=Date.now(),u=Yt(Yt({},a.info),{},{lts:l,timeout:i,elapse:l-a.startTime});this.send({type:Ir.JOIN_CHANNEL_TIMEOUT,data:u},!0)}publish(n,i){const a=this.baseInfoMap.get(n);if(!a)return;const l=a.info,u=Date.now(),h=Yt(Yt({},l),{},{eventType:xi.PUBLISH,lts:u,eventElapse:i.eventElapse,elapse:u-a.startTime,success:i.succ,errorCode:i.ec,videoName:i.videoName,audioName:i.audioName,screenName:i.screenName,screenshare:i.screenshare,audio:i.audio,video:i.video,p2pid:i.p2pid,publishRequestid:i.publishRequestid});this.send({type:Ir.PUBLISH,data:h},!0)}subscribe(n,i,a){const l=this.baseInfoMap.get(n);if(!l)return;const u=l.info,h=Date.now(),f=Yt(Yt({},u),{},{eventType:xi.SUBSCRIBE,lts:h,eventElapse:i.eventElapse,elapse:h-l.startTime,success:i.succ,errorCode:i.ec,video:i.video,audio:i.audio,subscribeRequestid:i.subscribeRequestid,p2pid:i.p2pid},a&&{extend:JSON.stringify({isMassSubscribe:!0})});typeof i.peerid=="string"?f.peerSuid=i.peerid:f.peer=i.peerid,this.send({type:Ir.SUBSCRIBE,data:f},!0)}wsCompressorInit(n){var i;const a=[...Va(i=this.baseInfoMap).call(i)],l=a.length?a[0]:"UnableToGetSid",u=this.baseInfoMap.get(l);if(!u)return;const h=u.info,f=Date.now(),g=Yt(Yt({},h),{},{eventType:xi.WS_COMPRESSOR_INIT,lts:f,eventElapse:n.eventElapse,elapse:f-u.startTime,status:n.status?1:2});this.send({type:Ir.WS_COMPRESSOR_INIT,data:g},!0)}firstRemoteVideoDecode(n,i,a,l){const u=this.baseInfoMap.get(n);if(!u)return;const h=u.info,f=Date.now(),g=Yt(Yt(Yt({},h),l),{},{elapse:f-u.startTime,eventType:i,lts:f,firstDecodeFrame:Math.max(f-u.startTime,0),apEnd:Math.max(l.apEnd-u.startTime,0),apStart:Math.max(l.apStart-u.startTime,0),joinGwEnd:Math.max(l.joinGwEnd-u.startTime,0),joinGwStart:Math.max(l.joinGwStart-u.startTime,0),pcEnd:Math.max(l.pcEnd-u.startTime,0),pcStart:Math.max(l.pcStart-u.startTime,0),subscriberEnd:Math.max(l.subscriberEnd-u.startTime,0),subscriberStart:Math.max(l.subscriberStart-u.startTime,0),videoAddNotify:Math.max(l.videoAddNotify-u.startTime,0)});this.send({type:a,data:g},!0)}firstRemoteFrame(n,i,a,l){const u=this.baseInfoMap.get(n);if(!u)return;const h=u.info,f=Date.now(),g=Yt(Yt(Yt({},h),l),{},{elapse:f-u.startTime,eventType:i,lts:f});this.send({type:a,data:g},!0)}pcStats(n,i){const a=this.baseInfoMap.get(n);if(!a)return;const l=a.info,u=Date.now(),h=Yt(Yt(Yt({},l),i),{},{vid:l.vid===void 0?0:Number(l.vid),elapse:u-a.startTime,eventType:xi.PC_STATS,lts:u});this.send({type:Ir.PC_STATS,data:h},!0)}updateRemoteRTPCapabilities(n,i){if(n){const a=this.baseInfoMap.get(n);if(!a)return;const l=a.info,u=Date.now(),h=Yt(Yt(Yt({},l),i),{},{vid:l.vid===void 0?0:Number(l.vid),eventType:xi.UPDATE_REMOTE_RTPCAPABILITIES,lts:u});this.send({type:Ir.UPDATE_REMOTE_RTPCAPABILITIES,data:h},!0)}}onGatewayStream(n,i,a,l){const u=this.baseInfoMap.get(n);if(!u)return;const h=u.info,f=Date.now(),g=Yt(Yt(Yt({},h),l),{},{eventType:i,lts:f});this.send({type:a,data:g},!0)}streamSwitch(n,i){const a=this.baseInfoMap.get(n);if(!a)return;const l=a.info,u=Date.now(),h=Yt(Yt({},l),{},{eventType:xi.STREAM_SWITCH,lts:u,isDual:i.isdual,elapse:u-a.startTime,success:i.succ});this.send({type:Ir.STREAM_SWITCH,data:h},!0)}requestProxyAppCenter(n,i){const a=this.baseInfoMap.get(n);if(!a)return;const l=a.info,u=Date.now(),h=Yt(Yt({},l),{},{eventType:xi.REQUEST_PROXY_APPCENTER,lts:u,eventElapse:u-i.lts,elapse:u-a.startTime,APAddr:i.APAddr,workerManagerList:i.workerManagerList,response:i.response,errorCode:i.ec,success:i.succ});this.send({type:Ir.REQUEST_PROXY_APPCENTER,data:h},!0)}requestProxyWorkerManager(n,i){const a=this.baseInfoMap.get(n);if(!a)return;const l=a.info,u=Date.now(),h=Yt(Yt({},l),{},{eventType:xi.REQUEST_PROXY_WORKER_MANAGER,lts:u,eventElapse:u-i.lts,elapse:u-a.startTime,workerManagerAddr:i.workerManagerAddr,response:i.response,errorCode:i.ec,success:i.succ});this.send({type:Ir.REQUEST_PROXY_WORKER_MANAGER,data:h},!0)}setProxyServer(n){this.proxyServer=n,n?k.debug("reportProxyServerurl: ".concat(n)):k.debug("disable reportProxyServerurl: ".concat(n))}peerPublishStatus(n,i){const a=this.baseInfoMap.get(n);if(!a)return;const l=a.info,u=Date.now(),h=Yt(Yt({},l),{},{subscribeElapse:i.subscribeElapse,peer:i.peer,peerPublishDuration:Math.max(i.audioPublishDuration,i.videoPublishDuration),audiotag:i.audioPublishDuration>0?1:-1,videotag:i.videoPublishDuration>0?1:-1,lts:u,elapse:u-a.startTime,joinChannelSuccessElapse:u-(a.lastJoinSuccessTime||u),peerPublishDurationVideo:i.videoPublishDuration,peerPublishDurationAudio:i.audioPublishDuration});this.send({type:Ir.PEER_PUBLISH_STATUS,data:h},!0)}workerEvent(n,i){const a=this.baseInfoMap.get(n);if(!a)return;const l=a.info,u=Date.now();(function(h,f,g){const _=h[f];if(!_||typeof _!="string")return[h];h[f]="";const y=ll(JSON.stringify(h));let T=0;const A=[];let D=0;for(let W=0;W<_.length;W++)D+=_.charCodeAt(W)<=127?1:3,D<=g-y||(A[A.length]=pt(pt({},h),{},{[f]:_.substring(T,W)}),T=W,D=_.charCodeAt(W)<=127?1:3);return T!==_.length-1&&(A[A.length]=pt(pt({},h),{},{[f]:_.substring(T)})),A})(Yt(Yt(Yt({},l),i),{},{elapse:u-a.startTime,lts:u,productType:"WebRTC"}),"payload",1300).forEach(h=>this.send({type:Ir.WORKER_EVENT,data:h},!0))}apworkerEvent(n,i){const a=this.baseInfoMap.get(n);if(!a)return;const l=a.info,u=Date.now(),h=Yt(Yt(Yt({},l),i),{},{elapse:u-a.startTime,lts:u});this.send({type:Ir.AP_WORKER_EVENT,data:h},!0)}joinWebProxyAP(n,i){const a=this.baseInfoMap.get(n);if(!a)return;const l=a.info,u=Date.now(),h=Yt(Yt(Yt({},l),i),{},{elapse:u-a.startTime,lts:u,extend:i.extend||void 0});this.send({type:Ir.JOIN_WEB_PROXY_AP,data:h},!0)}WebSocketQuit(n,i){const a=this.baseInfoMap.get(n);if(!a)return;const l=a.info,u=Date.now(),h=Yt(Yt(Yt({},l),i),{},{elapse:u-a.startTime,lts:u});this.send({type:Ir.WEBSOCKET_QUIT,data:h},!0)}async sendCustomReportMessage(n,i){if(this.customReportCount+=i.length,this.customReportCount>ee("CUSTOM_REPORT_LIMIT"))throw new Ce(K.CUSTOM_REPORT_FREQUENCY_TOO_HIGH);this.customReportCounterTimer||(this.customReportCounterTimer=window.setInterval(()=>{this.customReportCount=0},5e3));const a=Date.now(),l=i.map(u=>({type:Ir.USER_ANALYTICS,data:Yt(Yt({sid:n},u),{},{lts:a})}));try{ee("NEW_REPORT_SERVER")?await this.postDataToStatsCollector2(l):await this.postDataToStatsCollector(l)}catch(u){throw k.error("send custom report message failed",u.toString()),new Ce(K.CUSTOM_REPORT_SEND_FAILED,u.message)}}sendApiInvoke(n){const i=ee("NOT_REPORT_EVENT");if(n.tag&&Ye(i)&&Ye(i).call(i,n.tag))return!1;if(n.sid===null)return this.apiInvokeUploadPendingItems.push(n),!1;const a=this.baseInfoMap.get(n.sid);if(!a)return this.apiInvokeUploadPendingItems.push(n),!1;const{cname:l,uid:u,cid:h}=a.info;let f;if(n.lts=n.lts||Date.now(),n.error)if(n.error instanceof Ce){const{code:_,message:y}=n.error;f=_||y||n.error.toString()}else f=n.error.toString();const g={invokeId:n.invokeId,sid:n.sid,cname:l,cid:h,uid:u,lts:n.lts,success:n.success,elapse:n.lts-a.startTime,execElapse:n.lts-n.apiInvokeTime,apiName:n.name,options:n.options?JSON.stringify(n.options):void 0,execStates:n.states?JSON.stringify(n.states):void 0,execResult:n.result?JSON.stringify(n.result):void 0,errorCode:n.error?f:void 0,errorMsg:n.error?JSON.stringify(n.error):void 0};return this.send({type:Ir.API_INVOKE,data:g},!1),!0}appendSessionId(){y0.__CLIENT_LIST__.forEach(n=>{if(n._sessionId){const i=this.apiInvokeUploadPendingItems.length;for(let a=0;a<i;a++){const l=this.apiInvokeUploadPendingItems.shift();l&&(l.sid=n._sessionId,this.sendApiInvoke(Object.assign({},l)))}}})}send(n,i){if(i)return this.keyEventUploadPendingItems.push(n),void this.sendItems(this.keyEventUploadPendingItems,!0);this.normalEventUploadPendingItems.push(n),this.normalEventUploadPendingItems.length>ee("NORMAL_EVENT_QUEUE_CAPACITY")&&this.normalEventUploadPendingItems.splice(0,1),this.normalEventUploadPendingItems.length>=10&&this.sendItems(this.normalEventUploadPendingItems,!1)}doSend(){this.keyEventUploadPendingItems.length>0&&this.sendItems(this.keyEventUploadPendingItems,!0),this.normalEventUploadPendingItems.length>0&&Date.now()-this.lastSendNormalEventTime>=5e3&&this.sendItems(this.normalEventUploadPendingItems,!1)}sendItems(n,i){const a=[],l=[];for(;n.length;){const h=n.shift();a.length<20?a.push(h):l.push(h)}n.push(...l);for(const h of[...a]){var u;this.ltsList.indexOf(h.data.lts)!==-1?(h.data.lts=this.ltsList[this.ltsList.length-1]+1,this.ltsList.push(h.data.lts)):(this.ltsList.push(h.data.lts),t0(u=this.ltsList).call(u,(f,g)=>f-g))}return i||(this.lastSendNormalEventTime=Date.now()),ee("ENABLE_EVENT_REPORT")&&a.length&&(ee("NEW_REPORT_SERVER")?this.postDataToStatsCollector2(a):this.postDataToStatsCollector(a)).catch((h=>f=>{ee("EVENT_REPORT_RETRY")&&(i?this.keyEventUploadPendingItems=this.keyEventUploadPendingItems.concat(h):(this.normalEventUploadPendingItems=this.normalEventUploadPendingItems.concat(h),this.normalEventUploadPendingItems.length>ee("NORMAL_EVENT_QUEUE_CAPACITY")&&(this.normalEventUploadPendingItems.splice(0,this.normalEventUploadPendingItems.length-ee("NORMAL_EVENT_QUEUE_CAPACITY")),k.warning("report: drop normal events"))))})(a)),n}async postDataToStatsCollector2(n){Dr.networkState===xo.OFFLINE&&await We.race([Dr.onlineWaiter,yi(2*qr.maxRetryTimeout)]);const i=u=>{let h=new Uint8Array;return u.forEach(f=>{const g=Bw(JSON.stringify(f.data)),_=new ArrayBuffer(5),y=(A=>{let D=0;return Object.entries(Ir).forEach(W=>{let[F,U]=W;U===A.type&&(D=EventNameToID[F])}),D})(f),T=new DataView(_);T.setUint16(0,g.byteLength,!0),T.setUint8(2,255&y),T.setUint8(3,y>>>8&255),T.setUint8(4,y>>>16&255),h=y4(h,new Uint8Array(_)),h=y4(h,g)}),h},a="event";let l=this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(ee("NEW_REPORT_SERVER_DOMAINS")[0],"&p=443&d=").concat(a):"https://".concat(ee("NEW_REPORT_SERVER_DOMAINS")[0],"/").concat(a);for(let u=0;u<2;u+=1){u===1&&(l=this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(ee("NEW_REPORT_SERVER_DOMAINS")[1],"&p=443&d=").concat(a):"https://".concat(ee("NEW_REPORT_SERVER_DOMAINS")[1],"/").concat(a));try{await zw(l,{timeout:1e4,data:i(n),headers:Yt(Yt({biz:"webrtc",sendts:Math.round(Date.now()/1e3),debug:"false"},this._appId&&{appid:this._appId}),{},{"Content-Type":"application/octet-stream"})},!0)}catch(h){if(u===1)throw h;continue}return}}async postDataToStatsCollector(n){let i=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const a={msgType:"EventMessages",sentTs:Math.round(Date.now()/1e3),payloads:n.map(h=>JSON.stringify(h)),vid:(h=>{const f=h&&h.data.sid&&this.baseInfoMap.get(h.data.sid);return f&&f.info.vid&&+f.info.vid||0})(n[0])};Dr.networkState===xo.OFFLINE&&await We.race([Dr.onlineWaiter,yi(2*qr.maxRetryTimeout)]);const l=i?"/events/proto-raws":"/events/messages";let u=this.url||(this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(ee("EVENT_REPORT_DOMAIN"),"&p=").concat(ee("STATS_COLLECTOR_PORT"),"&d=").concat(l):"https://".concat(ee("EVENT_REPORT_DOMAIN"),":").concat(ee("STATS_COLLECTOR_PORT")).concat(l));for(let h=0;h<2;h+=1){h===1&&(u=this.backupUrl||(this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(ee("EVENT_REPORT_BACKUP_DOMAIN"),"&p=").concat(ee("STATS_COLLECTOR_PORT"),"&d=").concat(l):"https://".concat(ee("EVENT_REPORT_BACKUP_DOMAIN"),":").concat(ee("STATS_COLLECTOR_PORT")).concat(l)));try{i?await Xce(u,{timeout:1e4,data:a}):await zw(u,{timeout:1e4,data:a})}catch(f){if(h===1)throw f;continue}return}}createBaseInfo(n,i){const a=Object.assign({},nle);return a.sid=n,this.baseInfoMap.set(n,{info:a,startTime:i}),a}reportResourceTiming(n,i){const a=performance.getEntriesByName(n),l=a[a.length-1];l&&this.reportApiInvoke(i,{name:"Client.resourceTiming",options:l,tag:Nr.TRACER}).onSuccess()}}function Rt(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return function(n,i,a){const l=a.value;if(typeof l=="function"){const u=t.className||n.__className__||(n.constructor.name==="AgoraRTCClient"?"Client":n.constructor.name);a.value=function(){for(var h=arguments.length,f=new Array(h),g=0;g<h;g++)f[g]=arguments[g];let _=f;if(t.argsMap)try{_=t.argsMap(this,...f)}catch(T){k.warning(T),_=[]}try{JSON.stringify(_)}catch{k.warning("arguments for method ".concat(u,".").concat(String(i)," not serializable for apiInvoke.")),_=[]}const y=(t.report||ht).reportApiInvoke(this._sessionId||null,{name:"".concat(u,".").concat(String(i)),options:_,tag:Nr.TRACER,reportResult:t.reportResult},t.throttleTime);try{const T=l.apply(this,f);return T instanceof We?T.then(A=>(y.onSuccess(t.reportResult&&A),A)).catch(A=>{throw y.onError(A),A}):(y.onSuccess(t.reportResult&&T),T)}catch(T){throw y.onError(T),T}}}return a}}$r(y0,"__CLIENT_LIST__",[]);const ht=new y0;B4.on("REPORT_LOG_UPLOAD",t=>{t.networkState=Dr.networkState,ht.reportApiInvoke(null,{name:"logUploadError",options:t,tag:Nr.TRACER}).onSuccess("logUploadError")});const rle=["CHINA","GLOBAL"],Gi=function(){const t="us".concat("erna","me"),n="pa".concat("sswo","rd"),i=["t","s","t"];i.splice(1,0,"e");const a=i.join(""),l=[];for(let f=0;f<6;f++)l.push("1");const u=l.join(""),h={};return h[t]=a,h[n]=u,Object.assign(h,{turnServerURL:"",tcpport:3433,udpport:3478,forceturn:!1})}();window.DEFAULT_TURN_CONFIG=Gi,Gw||(ui.WEBCS_DOMAIN=["ap-web-1-oversea.agora.io","ap-web-1-north-america.agora.io"],ui.WEBCS_DOMAIN_BACKUP_LIST=["ap-web-2-oversea.agora.io","ap-web-2-north-america.agora.io"],ui.PROXY_CS=["proxy-ap-web-oversea.agora.io","proxy-ap-web-america.agora.io"],ui.CDS_AP=["cds-ap-web-oversea.agora.io","cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],ui.ACCOUNT_REGISTER=["sua-ap-web-oversea.agora.io","sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],ui.UAP_AP=["uap-ap-web-oversea.agora.io","uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],ui.LOG_UPLOAD_SERVER="logservice-oversea.agora.io",ui.EVENT_REPORT_DOMAIN="statscollector-1-oversea.agora.io",ui.EVENT_REPORT_BACKUP_DOMAIN="statscollector-2-oversea.agora.io",ui.PROXY_SERVER_TYPE3="webrtc-cloud-proxy.agora.io",ui.AREAS=["NORTH_AMERICA","OVERSEA"]);const $4=[[0,1,2,3,4,5,5],[0,2,2,3,4,5,5],[0,3,3,3,4,5,5],[0,4,4,4,4,5,5],[0,5,5,5,5,5,5]],$u=[];function rh(t,n){return!!n&&$u.some(i=>i.uid===t&&i.channelName===n)}y0.__CLIENT_LIST__=$u;var ile=vF.forEach,H4=nE("forEach")?[].forEach:function(t){return ile(this,t,arguments.length>1?arguments[1]:void 0)};ir({target:"Array",proto:!0,forced:[].forEach!=H4},{forEach:H4});var ole=ks("Array").forEach,ale=nl,sle=An,cle=R,lle=ole,Xw=Array.prototype,ule={DOMTokenList:!0,NodeList:!0},dle=function(t){var n=t.forEach;return t===Xw||cle(Xw,t)&&n===Xw.forEach||sle(ule,ale(t))?lle:n},hle=c(dle),ple=Yn,W4=sE;ir({target:"Object",stat:!0,forced:d(function(){W4(1)})},{keys:function(t){return W4(ple(t))}});var z4=c(ct.Object.keys),fle=c(U2),mle=ir,gle=i0,vle=b([].reverse),G4=[1,2];mle({target:"Array",proto:!0,forced:String(G4)===String(G4.reverse())},{reverse:function(){return gle(this)&&(this.length=this.length),vle(this)}});var Ele=ks("Array").reverse,_le=R,Sle=Ele,Jw=Array.prototype,yle=function(t){var n=t.reverse;return t===Jw||_le(Jw,t)&&n===Jw.reverse?Sle:n},K4=yle,Cle=c(K4),ble=ir,q4=i0,Tle=_E,Rle=je,Y4=_T,wle=Bl,Ile=st,Ale=DE,Ole=Lt,xle=ZT,Nle=sF("slice"),Dle=Ole("species"),Qw=Array,Ple=Math.max;ble({target:"Array",proto:!0,forced:!Nle},{slice:function(t,n){var i,a,l,u=Ile(this),h=wle(u),f=Y4(t,h),g=Y4(n===void 0?h:n,h);if(q4(u)&&(i=u.constructor,(Tle(i)&&(i===Qw||q4(i.prototype))||Rle(i)&&(i=i[Dle])===null)&&(i=void 0),i===Qw||i===void 0))return xle(u,f,g);for(a=new(i===void 0?Qw:i)(Ple(g-f,0)),l=0;f<g;f++,l++)f in u&&Ale(a,l,u[f]);return a.length=l,a}});var Lle=ks("Array").slice,kle=R,Mle=Lle,Zw=Array.prototype,Fle=function(t){var n=t.slice;return t===Zw||kle(Zw,t)&&n===Zw.slice?Mle:n},Ule=c(Fle);function $e(t,n,i,a,l){var u,h,f,g={};return hle(u=z4(a)).call(u,function(_){g[_]=a[_]}),g.enumerable=!!g.enumerable,g.configurable=!!g.configurable,("value"in g||g.initializer)&&(g.writable=!0),g=fle(h=Cle(f=Ule(i).call(i)).call(f)).call(h,function(_,y){return y(t,n,_)||_},g),l&&g.initializer!==void 0&&(g.value=g.initializer?g.initializer.call(l):void 0,g.initializer=void 0),g.initializer===void 0&&(rF(t,n,g),g=null),g}var Ble=ks("Array").values,Vle=nl,jle=An,$le=R,Hle=Ble,e1=Array.prototype,Wle={DOMTokenList:!0,NodeList:!0},zle=function(t){var n=t.values;return t===e1||$le(e1,t)&&n===e1.values||jle(Wle,Vle(t))?Hle:n},Tc=c(zle);let Gle=function(t){return t.L1T1="L1T1",t.L1T2="L1T2",t.L1T3="L1T3",t.L2T1_KEY="L2T1_KEY",t.L2T2_KEY="L2T2_KEY",t.L2T3_KEY="L2T3_KEY",t.L3T1_KEY="L3T1_KEY",t.L3T2_KEY="L3T2_KEY",t.L3T3_KEY="L3T3_KEY",t}({}),$a=function(t){return t.CERTIFICATE="certificate",t.CODEC="codec",t.CANDIDATE_PAIR="candidate-pair",t.LOCAL_CANDIDATE="local-candidate",t.REMOTE_CANDIDATE="remote-candidate",t.INBOUND="inbound-rtp",t.TRACK="track",t.OUTBOUND="outbound-rtp",t.PC="peer-connection",t.REMOTE_INBOUND="remote-inbound-rtp",t.REMOTE_OUTBOUND="remote-outbound-rtp",t.TRANSPORT="transport",t.CSRC="csrc",t.DATA_CHANNEL="data-channel",t.STREAM="stream",t.SENDER="sender",t.RECEIVER="receiver",t}({}),f_=function(t){return t[t.ACCESS_POINT=101]="ACCESS_POINT",t[t.UNILBS=201]="UNILBS",t[t.STRING_UID_ALLOCATOR=901]="STRING_UID_ALLOCATOR",t}({}),t1=function(t){return t[t.IIIEGAL_APPID=1]="IIIEGAL_APPID",t[t.IIIEGAL_UID=2]="IIIEGAL_UID",t[t.INTERNAL_ERROR=3]="INTERNAL_ERROR",t}({}),Bs=function(t){return t[t.INVALID_VENDOR_KEY=5]="INVALID_VENDOR_KEY",t[t.INVALID_CHANNEL_NAME=7]="INVALID_CHANNEL_NAME",t[t.INTERNAL_ERROR=8]="INTERNAL_ERROR",t[t.NO_AUTHORIZED=9]="NO_AUTHORIZED",t[t.DYNAMIC_KEY_TIMEOUT=10]="DYNAMIC_KEY_TIMEOUT",t[t.NO_ACTIVE_STATUS=11]="NO_ACTIVE_STATUS",t[t.DYNAMIC_KEY_EXPIRED=13]="DYNAMIC_KEY_EXPIRED",t[t.STATIC_USE_DYNAMIC_KEY=14]="STATIC_USE_DYNAMIC_KEY",t[t.DYNAMIC_USE_STATIC_KEY=15]="DYNAMIC_USE_STATIC_KEY",t[t.USER_OVERLOAD=16]="USER_OVERLOAD",t[t.FORBIDDEN_REGION=18]="FORBIDDEN_REGION",t[t.CANNOT_MEET_AREA_DEMAND=19]="CANNOT_MEET_AREA_DEMAND",t}({}),No=function(t){return t[t.NO_FLAG_SET=100]="NO_FLAG_SET",t[t.FLAG_SET_BUT_EMPTY=101]="FLAG_SET_BUT_EMPTY",t[t.INVALID_FALG_SET=102]="INVALID_FALG_SET",t[t.FLAG_SET_BUT_NO_RE=103]="FLAG_SET_BUT_NO_RE",t[t.INVALID_SERVICE_ID=104]="INVALID_SERVICE_ID",t[t.NO_SERVICE_AVAILABLE=200]="NO_SERVICE_AVAILABLE",t[t.NO_SERVICE_AVAILABLE_P2P=201]="NO_SERVICE_AVAILABLE_P2P",t[t.NO_SERVICE_AVAILABLE_VOICE=202]="NO_SERVICE_AVAILABLE_VOICE",t[t.NO_SERVICE_AVAILABLE_WEBRTC=203]="NO_SERVICE_AVAILABLE_WEBRTC",t[t.NO_SERVICE_AVAILABLE_CDS=204]="NO_SERVICE_AVAILABLE_CDS",t[t.NO_SERVICE_AVAILABLE_CDN=205]="NO_SERVICE_AVAILABLE_CDN",t[t.NO_SERVICE_AVAILABLE_TDS=206]="NO_SERVICE_AVAILABLE_TDS",t[t.NO_SERVICE_AVAILABLE_REPORT=207]="NO_SERVICE_AVAILABLE_REPORT",t[t.NO_SERVICE_AVAILABLE_APP_CENTER=208]="NO_SERVICE_AVAILABLE_APP_CENTER",t[t.NO_SERVICE_AVAILABLE_ENV0=209]="NO_SERVICE_AVAILABLE_ENV0",t[t.NO_SERVICE_AVAILABLE_VOET=210]="NO_SERVICE_AVAILABLE_VOET",t[t.NO_SERVICE_AVAILABLE_STRING_UID=211]="NO_SERVICE_AVAILABLE_STRING_UID",t[t.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS=212]="NO_SERVICE_AVAILABLE_WEBRTC_UNILBS",t[t.NO_SERVICE_AVAILABLE_UNILBS_FLV=213]="NO_SERVICE_AVAILABLE_UNILBS_FLV",t}({}),bt=function(t){return t[t.K_TIMESTAMP_EXPIRED=2]="K_TIMESTAMP_EXPIRED",t[t.K_CHANNEL_PERMISSION_INVALID=3]="K_CHANNEL_PERMISSION_INVALID",t[t.K_CERTIFICATE_INVALID=4]="K_CERTIFICATE_INVALID",t[t.K_CHANNEL_NAME_EMPTY=5]="K_CHANNEL_NAME_EMPTY",t[t.K_CHANNEL_NOT_FOUND=6]="K_CHANNEL_NOT_FOUND",t[t.K_TICKET_INVALID=7]="K_TICKET_INVALID",t[t.K_CHANNEL_CONFLICTED=8]="K_CHANNEL_CONFLICTED",t[t.K_SERVICE_NOT_READY=9]="K_SERVICE_NOT_READY",t[t.K_SERVICE_TOO_HEAVY=10]="K_SERVICE_TOO_HEAVY",t[t.K_UID_BANNED=14]="K_UID_BANNED",t[t.K_IP_BANNED=15]="K_IP_BANNED",t[t.K_CHANNEL_BANNED=16]="K_CHANNEL_BANNED",t[t.K_AUTO_REBALANCE=28]="K_AUTO_REBALANCE",t[t.WARN_NO_AVAILABLE_CHANNEL=103]="WARN_NO_AVAILABLE_CHANNEL",t[t.WARN_LOOKUP_CHANNEL_TIMEOUT=104]="WARN_LOOKUP_CHANNEL_TIMEOUT",t[t.WARN_LOOKUP_CHANNEL_REJECTED=105]="WARN_LOOKUP_CHANNEL_REJECTED",t[t.WARN_OPEN_CHANNEL_TIMEOUT=106]="WARN_OPEN_CHANNEL_TIMEOUT",t[t.WARN_OPEN_CHANNEL_REJECTED=107]="WARN_OPEN_CHANNEL_REJECTED",t[t.WARN_REQUEST_DEFERRED=108]="WARN_REQUEST_DEFERRED",t[t.ERR_DYNAMIC_KEY_TIMEOUT=109]="ERR_DYNAMIC_KEY_TIMEOUT",t[t.ERR_NO_AUTHORIZED=110]="ERR_NO_AUTHORIZED",t[t.ERR_VOM_SERVICE_UNAVAILABLE=111]="ERR_VOM_SERVICE_UNAVAILABLE",t[t.ERR_NO_CHANNEL_AVAILABLE_CODE=112]="ERR_NO_CHANNEL_AVAILABLE_CODE",t[t.ERR_MASTER_VOCS_UNAVAILABLE=114]="ERR_MASTER_VOCS_UNAVAILABLE",t[t.ERR_INTERNAL_ERROR=115]="ERR_INTERNAL_ERROR",t[t.ERR_NO_ACTIVE_STATUS=116]="ERR_NO_ACTIVE_STATUS",t[t.ERR_INVALID_UID=117]="ERR_INVALID_UID",t[t.ERR_DYNAMIC_KEY_EXPIRED=118]="ERR_DYNAMIC_KEY_EXPIRED",t[t.ERR_STATIC_USE_DYANMIC_KE=119]="ERR_STATIC_USE_DYANMIC_KE",t[t.ERR_DYNAMIC_USE_STATIC_KE=120]="ERR_DYNAMIC_USE_STATIC_KE",t[t.ERR_NO_VOCS_AVAILABLE=2e3]="ERR_NO_VOCS_AVAILABLE",t[t.ERR_NO_VOS_AVAILABLE=2001]="ERR_NO_VOS_AVAILABLE",t[t.ERR_JOIN_CHANNEL_TIMEOUT=2002]="ERR_JOIN_CHANNEL_TIMEOUT",t[t.ERR_REPEAT_JOIN_CHANNEL=2003]="ERR_REPEAT_JOIN_CHANNEL",t[t.ERR_JOIN_BY_MULTI_IP=2004]="ERR_JOIN_BY_MULTI_IP",t[t.ERR_NOT_JOINED=2011]="ERR_NOT_JOINED",t[t.ERR_REPEAT_JOIN_REQUEST=2012]="ERR_REPEAT_JOIN_REQUEST",t[t.ERR_INVALID_VENDOR_KEY=2013]="ERR_INVALID_VENDOR_KEY",t[t.ERR_INVALID_CHANNEL_NAME=2014]="ERR_INVALID_CHANNEL_NAME",t[t.ERR_INVALID_STRINGUID=2015]="ERR_INVALID_STRINGUID",t[t.ERR_TOO_MANY_USERS=2016]="ERR_TOO_MANY_USERS",t[t.ERR_SET_CLIENT_ROLE_TIMEOUT=2017]="ERR_SET_CLIENT_ROLE_TIMEOUT",t[t.ERR_SET_CLIENT_ROLE_NO_PERMISSION=2018]="ERR_SET_CLIENT_ROLE_NO_PERMISSION",t[t.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE=2019]="ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",t[t.ERR_PUBLISH_REQUEST_INVALID=2020]="ERR_PUBLISH_REQUEST_INVALID",t[t.ERR_SUBSCRIBE_REQUEST_INVALID=2021]="ERR_SUBSCRIBE_REQUEST_INVALID",t[t.ERR_NOT_SUPPORTED_MESSAGE=2022]="ERR_NOT_SUPPORTED_MESSAGE",t[t.ERR_ILLEAGAL_PLUGIN=2023]="ERR_ILLEAGAL_PLUGIN",t[t.ERR_REJOIN_TOKEN_INVALID=2024]="ERR_REJOIN_TOKEN_INVALID",t[t.ERR_REJOIN_USER_NOT_JOINED=2025]="ERR_REJOIN_USER_NOT_JOINED",t[t.ERR_INVALID_OPTIONAL_INFO=2027]="ERR_INVALID_OPTIONAL_INFO",t[t.ILLEGAL_AES_PASSWORD=2028]="ILLEGAL_AES_PASSWORD",t[t.ILLEGAL_CLIENT_ROLE_LEVEL=2029]="ILLEGAL_CLIENT_ROLE_LEVEL",t[t.ERR_TOO_MANY_BROADCASTERS=2031]="ERR_TOO_MANY_BROADCASTERS",t[t.ERR_TOO_MANY_SUBSCRIBERS=2032]="ERR_TOO_MANY_SUBSCRIBERS",t[t.ERR_LICENSE_MISSING=32769]="ERR_LICENSE_MISSING",t[t.ERR_LICENSE_EXPIRED=32771]="ERR_LICENSE_EXPIRED",t[t.ERR_LICENSE_MINUTES_EXCEEDED=32773]="ERR_LICENSE_MINUTES_EXCEEDED",t[t.ERR_LICENSE_PERIOD_INVALID=32774]="ERR_LICENSE_PERIOD_INVALID",t[t.ERR_LICENSE_MULTIPLE_SDK_SERVICE=32778]="ERR_LICENSE_MULTIPLE_SDK_SERVICE",t[t.ERR_LICENSE_ILLEGAL=32783]="ERR_LICENSE_ILLEGAL",t[t.ERR_TEST_RECOVER=9e3]="ERR_TEST_RECOVER",t[t.ERR_TEST_TRYNEXT=9001]="ERR_TEST_TRYNEXT",t[t.ERR_TEST_RETRY=9002]="ERR_TEST_RETRY",t}({}),nn=function(t){return t.CONNECTING="connecting",t.CONNECTED="connected",t.RECONNECTING="reconnecting",t.CLOSED="closed",t}({}),nt=function(t){return t.WS_CONNECTED="ws_connected",t.WS_RECONNECTING="ws_reconnecting",t.WS_CLOSED="ws_closed",t.WS_RECONNECT_WAITTING_FINISH="ws_reconnect_waitting_finish",t.WS_RECONNECT_CREATE_CONNECTION="ws_reconnect_create_connection",t.ON_BINARY_DATA="on_binary_data",t.REQUEST_RECOVER="request_recover",t.REQUEST_JOIN_INFO="request_join_info",t.REQUEST_REJOIN_INFO="req_rejoin_info",t.IS_P2P_DISCONNECTED="is_p2p_dis",t.DISCONNECT_P2P="dis_p2p",t.ABORT_P2P_EXECUTION="abort_p2p_execution",t.NEED_RENEW_SESSION="need-sid",t.REPORT_JOIN_GATEWAY="report_join_gateway",t.REQUEST_TIMEOUT="request_timeout",t.REQUEST_SUCCESS="request_success",t.JOIN_RESPONSE="join_response",t.DATACHANNEL_PRECONNECT="datachannel_preconnect",t.DATACHANNEL_CONNECTING="datachannel_connecting",t.DATACHANNEL_FAILBACK="datachannel_failback",t.P2P_CONNECTION="p2p_connection",t.P2P_REMOTE_CANDIDATE_UPDATE="p2p_remote_candidate_update",t.P2P_SUBSCRIBE="p2p_subscribe",t.P2P_UNSUBSCRIBE="p2p_unsubscribe",t.P2P_EXCHANGE_SDP="p2p_exchange_sdp",t.P2P_ON_ADD_VIDEO_STREAM="p2p_on_add_video_stream",t.P2P_ON_ADD_AUDIO_STREAM="p2p_on_add_audio_stream",t}({}),vt=function(t){return t.PING="ping",t.PING_BACK="ping_back",t.JOIN="join_v3",t.REJOIN="rejoin_v3",t.LEAVE="leave",t.SET_CLIENT_ROLE="set_client_role",t.PUBLISH="publish",t.PUBLISH_DATASTREAM="publish_datastream",t.UNPUBLISH="unpublish",t.UNPUBLISH_DATASTREAM="unpublish_datastream",t.SUBSCRIBE="subscribe",t.PRE_SUBSCRIBE="pre_subscribe",t.SUBSCRIBE_DATASTREAM="subscribe_datastream",t.SUBSCRIBE_STREAMS="subscribe_streams",t.UNSUBSCRIBE="unsubscribe",t.UNSUBSCRIBE_DATASTREAM="unsubscribe_datastream",t.UNSUBSCRIBE_STREAMS="unsubscribe_streams",t.SUBSCRIBE_CHANGE="subscribe_change",t.TRAFFIC_STATS="traffic_stats",t.RENEW_TOKEN="renew_token",t.SWITCH_VIDEO_STREAM="switch_video_stream",t.DEFAULT_VIDEO_STREAM="default_video_stream",t.SET_FALLBACK_OPTION="set_fallback_option",t.GATEWAY_INFO="gateway_info",t.CONTROL="control",t.SEND_METADATA="send_metadata",t.DATA_STREAM="data_stream",t.PICK_SVC_LAYER="pick_svc_layer",t.RESTART_ICE="restart_ice",t.CONNECT_PC="connect_pc",t.SET_VIDEO_PROFILE="set_video_profile",t.SET_PARAMETER="set_parameter",t.SET_RTM2_FLAG="set_rtm2_flag",t}({}),ih=function(t){return t.WRTC_STATS="wrtc_stats",t.WS_INFLATE_DATA_LENGTH="ws_inflate_data_length",t.DENOISER_STATS="denoiser_stats",t.EXTENSION_USAGE_STATS="extension_usage_stats",t}({}),Bt=function(t){return t.ON_USER_ONLINE="on_user_online",t.ON_USER_OFFLINE="on_user_offline",t.ON_STREAM_FALLBACK_UPDATE="on_stream_fallback_update",t.ON_PUBLISH_STREAM="on_publish_stream",t.ON_UPLINK_STATS="on_uplink_stats",t.ON_P2P_LOST="on_p2p_lost",t.ON_REMOVE_STREAM="on_remove_stream",t.ON_ADD_AUDIO_STREAM="on_add_audio_stream",t.ON_ADD_VIDEO_STREAM="on_add_video_stream",t.ON_TOKEN_PRIVILEGE_WILL_EXPIRE="on_token_privilege_will_expire",t.ON_TOKEN_PRIVILEGE_DID_EXPIRE="on_token_privilege_did_expire",t.ON_USER_BANNED="on_user_banned",t.ON_USER_LICENSE_BANNED="on_user_license_banned",t.ON_NOTIFICATION="on_notification",t.ON_CRYPT_ERROR="on_crypt_error",t.MUTE_AUDIO="mute_audio",t.MUTE_VIDEO="mute_video",t.UNMUTE_AUDIO="unmute_audio",t.UNMUTE_VIDEO="unmute_video",t.ON_P2P_OK="on_p2p_ok",t.RECEIVE_METADATA="receive_metadata",t.ON_DATA_STREAM="on_data_stream",t.ON_RTP_CAPABILITY_CHANGE="on_rtp_capability_change",t.ON_REMOTE_DATASTREAM_UPDATE="on_remote_datastream_update",t.ON_REMOTE_FULL_DATASTREAM_INFO="on_remote_full_datastream_info",t.ENABLE_LOCAL_VIDEO="enable_local_video",t.DISABLE_LOCAL_VIDEO="disable_local_video",t.ENABLE_LOCAL_AUDIO="enable_local_audio",t.DISABLE_LOCAL_AUDIO="disable_local_audio",t.ON_PUBLISHED_USER_LIST="on_published_user_list",t}({}),Do=function(t){return t.SEND_ONLY="SEND_ONLY",t.RECEIVE_ONLY="RECEIVE_ONLY",t}({}),kt=function(t){return t.CONNECTED="websocket:connected",t.RECONNECTING="websocket:reconnecting",t.WILL_RECONNECT="websocket:will_reconnect",t.CLOSED="websocket:closed",t.FAILED="websocket:failed",t.ON_MESSAGE="websocket:on_message",t.REQUEST_NEW_URLS="websocket:request_new_urls",t.RECONNECT_WAITTING_FINISH="websocket:reconnect_waitting_finish",t.RECONNECT_CREATE_CONNECTION="websocket:reconnect_create_connection",t.ON_TOKEN_PRIVILEGE_DID_EXPIRE="websocket:on_token_privilege_did_expire",t}({});class me extends Ce{constructor(n){super(n,arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",arguments.length>2?arguments[2]:void 0),V(this,"name","AgoraRTCException")}print(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"error";return super.print(n,k)}throw(){super.throw(k)}}function m_(t){if(typeof t!="string"||!/^[a-zA-Z0-9 \!\#\$\%\&\(\)\+\-\:\;\<\=\.\>\?\@\[\]\^\_\{\}\|\~\,]{1,64}$/.test(t))throw k.error("Invalid Channel Name ".concat(t)),new me(K.INVALID_PARAMS,"The length must be within 64 bytes. The supported characters: a-z,A-Z,0-9,space,!, #, $, %, &, (, ), +, -, :, ;, <, =, ., >, ?, @, [, ], ^, _,  {, }, |, ~, ,")}function g_(t){if(!function(n){return typeof n=="number"&&Math.floor(n)===n&&0<=n&&n<=4294967295}(t)&&!v4(t,1,255))throw new me(K.INVALID_PARAMS,"[String uid] Length of the string: [1,255]. ASCII characters only. [Number uid] The value range is [0,10000]");typeof t=="string"&&k.warn("You input a string as the user ID, to ensure better end-user experience, Agora highly suggests not using a string as the user ID.")}let Ni=function(t){return t.TRANSCODE="mix_streaming",t.RAW="raw_streaming",t.INJECT="inject_streaming",t}({}),Wp=function(t){return t[t.INJECT_STREAM_STATUS_START_SUCCESS=0]="INJECT_STREAM_STATUS_START_SUCCESS",t[t.INJECT_STREAM_STATUS_START_ALREADY_EXISTS=1]="INJECT_STREAM_STATUS_START_ALREADY_EXISTS",t[t.INJECT_STREAM_STATUS_START_UNAUTHORIZED=2]="INJECT_STREAM_STATUS_START_UNAUTHORIZED",t[t.INJECT_STREAM_STATUS_START_TIMEOUT=3]="INJECT_STREAM_STATUS_START_TIMEOUT",t[t.INJECT_STREAM_STATUS_START_FAILED=4]="INJECT_STREAM_STATUS_START_FAILED",t[t.INJECT_STREAM_STATUS_STOP_SUCCESS=5]="INJECT_STREAM_STATUS_STOP_SUCCESS",t[t.INJECT_STREAM_STATUS_STOP_NOT_FOUND=6]="INJECT_STREAM_STATUS_STOP_NOT_FOUND",t[t.INJECT_STREAM_STATUS_STOP_UNAUTHORIZED=7]="INJECT_STREAM_STATUS_STOP_UNAUTHORIZED",t[t.INJECT_STREAM_STATUS_STOP_TIMEOUT=8]="INJECT_STREAM_STATUS_STOP_TIMEOUT",t[t.INJECT_STREAM_STATUS_STOP_FAILED=9]="INJECT_STREAM_STATUS_STOP_FAILED",t[t.INJECT_STREAM_STATUS_BROKEN=10]="INJECT_STREAM_STATUS_BROKEN",t}({});const Kle={alpha:1,height:640,width:360,x:0,y:0,zOrder:0,audioChannel:0},n1={x:0,y:0,width:160,height:160,zOrder:255,alpha:1};function r1(t,n){Mi(t.url,"".concat(n,".url"),1,1e3,!1),xr(t.x)||Xn(t.x,"".concat(n,".x"),0,1e4),xr(t.y)||Xn(t.y,"".concat(n,".y"),0,1e4),xr(t.width)||Xn(t.width,"".concat(n,".width"),0,1e4),xr(t.height)||Xn(t.height,"".concat(n,".height"),0,1e4),xr(t.zOrder)||Xn(t.zOrder,"".concat(n,".zOrder"),0,255),xr(t.alpha)||Xn(t.alpha,"".concat(n,".alpha"),0,1,!1)}const qle={audioBitrate:48,audioChannels:1,audioSampleRate:48e3,backgroundColor:0,height:360,lowLatency:!1,videoBitrate:400,videoCodecProfile:100,videoCodecType:1,videoFrameRate:15,videoGop:30,width:640,images:[],userConfigs:[],userConfigExtraInfo:""},Yle={audioBitrate:48,audioChannels:2,audioVolume:100,audioSampleRate:48e3,height:0,width:0,videoBitrate:400,videoFramerate:15,videoGop:30};let ul=function(t){return t.WARNING="@live_uap-warning",t.ERROR="@line_uap-error",t.PUBLISH_STREAM_STATUS="@live_uap-publish-status",t.INJECT_STREAM_STATUS="@live_uap-inject-status",t.WORKER_STATUS="@live_uap-worker-status",t.REQUEST_NEW_ADDRESS="@live_uap-request-address",t}({}),v_=function(t){return t.REQUEST_WORKER_MANAGER_LIST="@live_req_worker_manager",t}({}),di=function(t){return t[t.LIVE_STREAM_RESPONSE_SUCCEED=200]="LIVE_STREAM_RESPONSE_SUCCEED",t[t.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM=454]="LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM",t[t.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR=450]="LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR",t[t.LIVE_STREAM_RESPONSE_BAD_STREAM=451]="LIVE_STREAM_RESPONSE_BAD_STREAM",t[t.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR=400]="LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR",t[t.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST=404]="LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST",t[t.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED=456]="LIVE_STREAM_RESPONSE_NOT_AUTHORIZED",t[t.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE=457]="LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE",t[t.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN=429]="LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN",t[t.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH=452]="LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH",t[t.LIVE_STREAM_RESPONSE_NOT_SUPPORTED=453]="LIVE_STREAM_RESPONSE_NOT_SUPPORTED",t[t.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM=455]="LIVE_STREAM_RESPONSE_MAX_STREAM_NUM",t[t.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR=500]="LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR",t[t.LIVE_STREAM_RESPONSE_WORKER_LOST=501]="LIVE_STREAM_RESPONSE_WORKER_LOST",t[t.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT=502]="LIVE_STREAM_RESPONSE_RESOURCE_LIMIT",t[t.LIVE_STREAM_RESPONSE_WORKER_QUIT=503]="LIVE_STREAM_RESPONSE_WORKER_QUIT",t[t.ERROR_FAIL_SEND_MESSAGE=504]="ERROR_FAIL_SEND_MESSAGE",t[t.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE=30]="PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE",t[t.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT=31]="PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT",t[t.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH=32]="PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH",t[t.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN=33]="PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN",t}({});function X4(t){if(!t.channelName)throw new me(K.INVALID_PARAMS,"invalid channelName in info");if(typeof t.uid!="number")throw new me(K.INVALID_PARAMS,"invalid uid in info, uid must be a number");return t.token&&Mi(t.token,"info.token",1,2047),g_(t.uid),m_(t.channelName),!0}let Po=function(t){return t[t.SetSdkProfile=0]="SetSdkProfile",t[t.SetSourceChannel=1]="SetSourceChannel",t[t.SetSourceUserId=2]="SetSourceUserId",t[t.SetDestChannel=3]="SetDestChannel",t[t.StartPacketTransfer=4]="StartPacketTransfer",t[t.StopPacketTransfer=5]="StopPacketTransfer",t[t.UpdateDestChannel=6]="UpdateDestChannel",t[t.Reconnect=7]="Reconnect",t[t.SetVideoProfile=8]="SetVideoProfile",t}({}),Wl=function(t){return t.NETWORK_DISCONNECTED="NETWORK_DISCONNECTED",t.NETWORK_CONNECTED="NETWORK_CONNECTED",t.PACKET_JOINED_SRC_CHANNEL="PACKET_JOINED_SRC_CHANNEL",t.PACKET_JOINED_DEST_CHANNEL="PACKET_JOINED_DEST_CHANNEL",t.PACKET_SENT_TO_DEST_CHANNEL="PACKET_SENT_TO_DEST_CHANNEL",t.PACKET_RECEIVED_VIDEO_FROM_SRC="PACKET_RECEIVED_VIDEO_FROM_SRC",t.PACKET_RECEIVED_AUDIO_FROM_SRC="PACKET_RECEIVED_AUDIO_FROM_SRC",t.PACKET_UPDATE_DEST_CHANNEL="PACKET_UPDATE_DEST_CHANNEL",t.PACKET_UPDATE_DEST_CHANNEL_REFUSED="PACKET_UPDATE_DEST_CHANNEL_REFUSED",t.PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE="PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE",t}({}),ra=function(t){return t.RELAY_STATE_IDLE="RELAY_STATE_IDLE",t.RELAY_STATE_CONNECTING="RELAY_STATE_CONNECTING",t.RELAY_STATE_RUNNING="RELAY_STATE_RUNNING",t.RELAY_STATE_FAILURE="RELAY_STATE_FAILURE",t}({}),zp=function(t){return t.RELAY_OK="RELAY_OK",t.SERVER_CONNECTION_LOST="SERVER_CONNECTION_LOST",t.SRC_TOKEN_EXPIRED="SRC_TOKEN_EXPIRED",t.DEST_TOKEN_EXPIRED="DEST_TOKEN_EXPIRED",t}({}),Vn=function(t){return t.High="high",t.Low="low",t.Audio="audio",t.Screen="screen",t.ScreenLow="screen_low",t}({}),Hr=function(t){return t.DISCONNECT="disconnect",t.CONNECTION_STATE_CHANGE="connection-state-change",t.NETWORK_QUALITY="network-quality",t.STREAM_TYPE_CHANGE="stream-type-change",t.IS_P2P_DISCONNECTED="is-p2p-dis",t.DISCONNECT_P2P="dis-p2p",t.REQUEST_NEW_GATEWAY_LIST="req-gate-url",t.NEED_RENEW_SESSION="need-sid",t.REQUEST_P2P_CONNECTION_PARAMS="request-p2p-connection-params",t.JOIN_RESPONSE="join-response",t.REQUEST_DC_CONNECTION_PARAMS="request-dc-connection-params",t.RESET_CONNECTION_EVENTS="reset-connection-events",t.DATACHANNEL_PRECONNECT="datachannel_preconnect",t.DATACHANNEL_FAILBACK="datachannel_failback",t.RESET_SIGNAL="reset-signal",t}({}),C0=function(t){return t.P2P_DISCONNECTED="P2P_DISCONNECTED",t.A_ROUND_WS_FAILED="A_ROUND_WS_FAILED",t.TIMEOUT="TIMEOUT",t.UNKNOWN_REASON="UNKNOWN_REASON",t}({}),Ci=function(t){return t[t.Nothing=0]="Nothing",t[t.Audio=1]="Audio",t[t.LwoVideo=2]="LwoVideo",t[t.Video=4]="Video",t[t.Data=8]="Data",t[t.DataStream0=256]="DataStream0",t[t.DataStream1=512]="DataStream1",t[t.DataStream2=1024]="DataStream2",t[t.DataStream3=2048]="DataStream3",t[t.DataStream4=4096]="DataStream4",t[t.DataStream5=8192]="DataStream5",t[t.DataStream6=16384]="DataStream6",t[t.DataStream7=32768]="DataStream7",t}({}),J4=function(t){return t[t.websocket=0]="websocket",t[t.datachannel=1]="datachannel",t}({}),Dn=function(t){return t.CHINA="CHINA",t.ASIA="ASIA",t.NORTH_AMERICA="NORTH_AMERICA",t.EUROPE="EUROPE",t.JAPAN="JAPAN",t.INDIA="INDIA",t.KOREA="KOREA",t.HKMC="HKMC",t.US="US",t.OCEANIA="OCEANIA",t.SOUTH_AMERICA="SOUTH_AMERICA",t.AFRICA="AFRICA",t.OVERSEA="OVERSEA",t.GLOBAL="GLOBAL",t.EXTENSIONS="EXTENSIONS",t}({});const Q4=[Dn.AFRICA,Dn.ASIA,Dn.CHINA,Dn.EUROPE,Dn.GLOBAL,Dn.INDIA,Dn.JAPAN,Dn.NORTH_AMERICA,Dn.OCEANIA,Dn.OVERSEA,Dn.SOUTH_AMERICA];let Qi=function(t){return t.CHINA="CN",t.ASIA="AS",t.NORTH_AMERICA="NA",t.EUROPE="EU",t.JAPAN="JP",t.INDIA="IN",t.KOREA="KR",t.HKMC="HK",t.US="US",t.OCEANIA="OC",t.SOUTH_AMERICA="SA",t.AFRICA="AF",t.OVERSEA="OVERSEA",t.GLOBAL="GLOBAL",t.EXTENSIONS="GLOBAL",t}({});const E_={CHINA:{},ASIA:{CODE:Qi.ASIA,WEBCS_DOMAIN:["ap-web-1-asia.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-asia.agora.io"],PROXY_CS:["proxy-ap-web-asia.agora.io"],CDS_AP:["cds-ap-web-asia.agora.io","cds-ap-web-asia2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-asia.agora.io","sua-ap-web-asia2.agora.io"],UAP_AP:["uap-ap-web-asia.agora.io","uap-ap-web-asia2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-asia.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-asia.agora.io"],LOG_UPLOAD_SERVER:["logservice-asia.agora.io"],PROXY_SERVER_TYPE3:["southeast-asia.webrtc-cloud-proxy.sd-rtn.com"]},NORTH_AMERICA:{CODE:Qi.NORTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-north-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-north-america.agora.io"],PROXY_CS:["proxy-ap-web-america.agora.io"],CDS_AP:["cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],UAP_AP:["uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-north-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-north-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-north-america.agora.io"],PROXY_SERVER_TYPE3:["east-usa.webrtc-cloud-proxy.sd-rtn.com"]},EUROPE:{CODE:Qi.EUROPE,WEBCS_DOMAIN:["ap-web-1-europe.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-europe.agora.io"],PROXY_CS:["proxy-ap-web-europe.agora.io"],CDS_AP:["cds-ap-web-europe.agora.io","cds-ap-web-europe2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-europe.agora.io","sua-ap-web-europe.agora.io"],UAP_AP:["uap-ap-web-europe.agora.io","uap-ap-web-europe2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-europe.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-europe.agora.io"],LOG_UPLOAD_SERVER:["logservice-europe.agora.io"],PROXY_SERVER_TYPE3:["europe.webrtc-cloud-proxy.sd-rtn.com"]},JAPAN:{CODE:Qi.JAPAN,WEBCS_DOMAIN:["ap-web-1-japan.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-japan.agora.io"],PROXY_CS:["proxy-ap-web-japan.agora.io"],CDS_AP:["cds-ap-web-japan.agora.io","cds-ap-web-japan2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-japan.agora.io","sua-ap-web-japan2.agora.io"],UAP_AP:["uap-ap-web-japan.agora.io","uap-ap-web-japan2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-japan.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-japan.agora.io"],LOG_UPLOAD_SERVER:["logservice-japan.agora.io"],PROXY_SERVER_TYPE3:["japan.webrtc-cloud-proxy.sd-rtn.com"]},INDIA:{CODE:Qi.INDIA,WEBCS_DOMAIN:["ap-web-1-india.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-india.agora.io"],PROXY_CS:["proxy-ap-web-india.agora.io"],CDS_AP:["cds-ap-web-india.agora.io","cds-ap-web-india2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-india.agora.io","sua-ap-web-india2.agora.io"],UAP_AP:["uap-ap-web-india.agora.io","uap-ap-web-india2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-india.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-india.agora.io"],LOG_UPLOAD_SERVER:["logservice-india.agora.io"],PROXY_SERVER_TYPE3:["india.webrtc-cloud-proxy.sd-rtn.com"]},KOREA:{CODE:Qi.KOREA,WEBCS_DOMAIN:["ap-web-1-korea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-korea.agora.io"],PROXY_CS:["proxy-ap-web-korea.agora.io"],CDS_AP:["cds-ap-web-korea.agora.io","cds-ap-web-korea2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-korea.agora.io","sua-ap-web-korea2.agora.io"],UAP_AP:["uap-ap-web-korea.agora.io","uap-ap-web-korea2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-korea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-korea.agora.io"],LOG_UPLOAD_SERVER:["logservice-korea.agora.io"],PROXY_SERVER_TYPE3:["korea.webrtc-cloud-proxy.sd-rtn.com"]},HKMC:{CODE:Qi.HKMC,WEBCS_DOMAIN:["ap-web-1-hkmc.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-hkmc.agora.io"],PROXY_CS:["proxy-ap-web-hkmc.agora.io"],CDS_AP:["cds-ap-web-hkmc.agora.io","cds-ap-web-hkmc2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-hkmc.agora.io","sua-ap-web-hkmc2.agora.io"],UAP_AP:["uap-ap-web-hkmc.agora.io","uap-ap-web-hkmc2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-hkmc.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-hkmc.agora.io"],LOG_UPLOAD_SERVER:["logservice-hkmc.agora.io"],PROXY_SERVER_TYPE3:["hkmc.webrtc-cloud-proxy.sd-rtn.com"]},US:{CODE:Qi.US,WEBCS_DOMAIN:["ap-web-1-us.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-us.agora.io"],PROXY_CS:["proxy-ap-web-us.agora.io"],CDS_AP:["cds-ap-web-us.agora.io","cds-ap-web-us2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-us.agora.io","sua-ap-web-us2.agora.io"],UAP_AP:["uap-ap-web-us.agora.io","uap-ap-web-us2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-us.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-us.agora.io"],LOG_UPLOAD_SERVER:["logservice-us.agora.io"],PROXY_SERVER_TYPE3:["us.webrtc-cloud-proxy.sd-rtn.com"]},OVERSEA:{CODE:Qi.OVERSEA,WEBCS_DOMAIN:["ap-web-1-oversea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oversea.agora.io"],PROXY_CS:["proxy-ap-web-oversea.agora.io"],CDS_AP:["cds-ap-web-oversea.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oversea.agora.io"],UAP_AP:["uap-ap-web-oversea.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oversea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oversea.agora.io"],LOG_UPLOAD_SERVER:["logservice-oversea.agora.io"],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.agora.io"]},GLOBAL:{CODE:Qi.GLOBAL,WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-ap-web-3.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-ap-web-3.agora.io"],UAP_AP:["uap-ap-web-1.agora.io","uap-ap-web-3.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2.agora.io"],LOG_UPLOAD_SERVER:["logservice.agora.io"],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com"]},OCEANIA:{CODE:Qi.OCEANIA,WEBCS_DOMAIN:["ap-web-1-oceania.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oceania.agora.io"],PROXY_CS:["proxy-ap-web-oceania.agora.io"],CDS_AP:["cds-ap-web-oceania.agora.io","cds-ap-web-oceania2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oceania.agora.io","sua-ap-web-oceania2.agora.io"],UAP_AP:["uap-ap-web-oceania.agora.io","uap-ap-web-oceania2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oceania.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oceania.agora.io"],LOG_UPLOAD_SERVER:["logservice-oceania.agora.io"],PROXY_SERVER_TYPE3:["oceania.webrtc-cloud-proxy.sd-rtn.com"]},SOUTH_AMERICA:{CODE:Qi.SOUTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-south-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-south-america.agora.io"],PROXY_CS:["proxy-ap-web-south-america.agora.io"],CDS_AP:["cds-ap-web-south-america.agora.io","cds-ap-web-south-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-south-america.agora.io","sua-ap-web-south-america2.agora.io"],UAP_AP:["uap-ap-web-south-america.agora.io","uap-ap-web-south-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-south-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-south-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-america.agora.io"],PROXY_SERVER_TYPE3:["south-america.webrtc-cloud-proxy.sd-rtn.com"]},AFRICA:{CODE:Qi.AFRICA,WEBCS_DOMAIN:["ap-web-1-africa.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-africa.agora.io"],PROXY_CS:["proxy-ap-web-africa.agora.io"],CDS_AP:["cds-ap-web-africa.agora.io","cds-ap-web-africa2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-africa.agora.io","sua-ap-web-africa2.agora.io"],UAP_AP:["uap-ap-web-africa.agora.io","uap-ap-web-africa2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-africa.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-africa.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-africa.agora.io"],PROXY_SERVER_TYPE3:["africa.webrtc-cloud-proxy.sd-rtn.com"]},EXTENSIONS:{}};Gw&&(E_.CHINA={CODE:Qi.CHINA,WEBCS_DOMAIN:["webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["proxy-web.ap.sd-rtn.com"],CDS_AP:["cds-web-2.ap.sd-rtn.com","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-web-2.ap.sd-rtn.com","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-web-2.ap.sd-rtn.com","uap-web-4.ap.sd-rtn.com"],EVENT_REPORT_DOMAIN:["web-3.statscollector.sd-rtn.com"],EVENT_REPORT_BACKUP_DOMAIN:["web-4.statscollector.sd-rtn.com"],LOG_UPLOAD_SERVER:["logservice-china.agora.io"],PROXY_SERVER_TYPE3:["east-cn.webrtc-cloud-proxy.sd-rtn.com"]});let i1=function(t){return t.UPDATE_BITRATE_LIMIT="update_bitrate_limit",t}({});class Z4 extends _r{constructor(n,i){super(),V(this,"onICEConnectionStateChange",void 0),V(this,"onConnectionStateChange",void 0),V(this,"onDTLSTransportStateChange",void 0),V(this,"onDTLSTransportError",void 0),V(this,"onICETransportStateChange",void 0),V(this,"onFirstAudioReceived",void 0),V(this,"onFirstVideoReceived",void 0),V(this,"onFirstAudioDecoded",void 0),V(this,"onFirstVideoDecoded",void 0),V(this,"onFirstVideoDecodedTimeout",void 0),V(this,"onSelectedLocalCandidateChanged",void 0),V(this,"onSelectedRemoteCandidateChanged",void 0),V(this,"getLocalVideoStats",void 0)}}class __ extends Z4{constructor(n,i){super(n,i),V(this,"establishPromise",void 0)}}let ut=function(t){return t.VIDEO="video",t.AUDIO="audio",t}({}),vo=function(t){return t[t.UDP=0]="UDP",t[t.TCP=1]="TCP",t[t.RELAY=2]="RELAY",t}({}),zl=function(t){return t[t.FIRST_CONNECTION=0]="FIRST_CONNECTION",t[t.TCP_RESTART=1]="TCP_RESTART",t[t.RELAY_RESTART=2]="RELAY_RESTART",t[t.OLD_FIRST_CONNECTION=10]="OLD_FIRST_CONNECTION",t[t.OLD_RESTART=11]="OLD_RESTART",t[t.DISCONNECTED_OR_FAILED=20]="DISCONNECTED_OR_FAILED",t}({}),Le=function(t){return t.LocalVideoTrack="videoTrack",t.LocalAudioTrack="audioTrack",t.LocalVideoLowTrack="videoLowTrack",t}({}),$n=function(t){return t.New="new",t.Connected="connected",t.Reconnecting="reconnecting",t.Disconnected="disconnected",t}({}),At=function(t){return t.StateChange="stateChange",t.IceConnectionStateChange="iceConnectionStateChange",t.RequestMuteLocal="requestMuteLocal",t.RequestUnmuteLocal="requestUnmuteLocal",t.RequestRePublish="requestRePublish",t.RequestRePublishDataChannel="requestRePublishDataChannel",t.RequestReSubscribe="requestReSubscribe",t.RequestUploadStats="requestUploadStats",t.RequestUpload="requestUpload",t.MediaReconnectStart="MediaReconnectStart",t.MediaReconnectEnd="MediaReconnectEnd",t.NeedSignalRTT="NeedSignalRTT",t.RequestRestartICE="RequestRestartIce",t.PeerConnectionStateChange="PeerConnectionStateChange",t.RequestReconnect="RequestReconnect",t.RequestReconnectPC="RequestReconnectPC",t.RequestUnpublishForReconnectPC="RequestUnpublishForReconnectPC",t.P2PLost="P2PLost",t.UpdateVideoEncoder="UpdateVideoEncoder",t.ConnectionTypeChange="ConnectionTypeChange",t.RequestLowStreamParameter="RequestLowStreamParameter",t.QueryClientConnectionState="QueryClientConnectionState",t.LocalCandidate="LocalCandidate",t.RequestP2PMuteLocal="requestP2PMuteLocal",t.RequestP2PUnPublish="RequestP2PUnPublish",t.RequestP2PUnmuteRemote="RequestP2PUnmuteRemote",t.RequestP2PMuteRemote="RequestP2PMuteRemote",t.RequestP2PRestartICE="RequestP2PRestartICE",t}({}),Vs=function(t){return t.CONNECTING="CONNECTING",t.RECONNECTING="RECONNECTING",t.CONNECTED="CONNECTED",t.CLOSED="CLOSED",t}({}),js=function(t){return t[t.CONNECT_AP=0]="CONNECT_AP",t[t.AP_CONNECTED=1]="AP_CONNECTED",t[t.CONNECT_WORKER_MANAGER=2]="CONNECT_WORKER_MANAGER",t[t.WORKER_MANAGER_CONNECTED=3]="WORKER_MANAGER_CONNECTED",t[t.GET_WORKER_MANAGER_RESPONSE=4]="GET_WORKER_MANAGER_RESPONSE",t[t.CONNECT_WORKER=5]="CONNECT_WORKER",t[t.WORKER_CONNECTED=6]="WORKER_CONNECTED",t[t.CLOSED=7]="CLOSED",t}({}),Di=function(t){return t.CONNECTION_STATE_CHANGE="connection-state-change",t.STATE_CHANGE="state-change",t.INSPECT_RESULT="inspect-result",t.CLIENT_LOCAL_VIDEO_TRACK="client-local-video-track",t.REQUEST_NEW_WORKER_URL="request-new-worker-url",t}({}),Hu=function(t){return t.NETWORK_ERROR="NETWORK_ERROR",t.SERVER_ERROR="SERVER_ERROR",t.MULTI_IP="MULTI_IP",t.TIMEOUT="TIMEOUT",t.OFFLINE="OFFLINE",t.LEAVE="LEAVE",t.P2P_FAILED="P2P_FAILED",t.FALLBACK="FALLBACK",t}({}),ii=function(t){return t.CONNECTED="transmitter:connected",t.RECONNECTING="transmitter:reconnecting",t.WILL_RECONNECT="transmitter:will_reconnect",t.CLOSED="transmitter:closed",t.FAILED="transmitter:failed",t.ON_MESSAGE="transmitter:on_message",t.REQUEST_NEW_URLS="transmitter:request_new_urls",t.RECONNECT_WAITTING_FINISH="transmitter:reconnect_waitting_finish",t.RECONNECT_CREATE_CONNECTION="transmitter:reconnect_create_connection",t.ON_TOKEN_PRIVILEGE_DID_EXPIRE="transmitter:on_token_privilege_did_expire",t.TO_CONNECT_DATACHANNEL="transmitter:to_connect_datachannel",t.FAILBACK="transmitter:failback",t}({}),dl=function(t){return t.CAMERA_CHANGED="camera-changed",t.MICROPHONE_CHANGED="microphone-changed",t.PLAYBACK_DEVICE_CHANGED="playback-device-changed",t.AUDIO_AUTOPLAY_FAILED="audio-autoplay-failed",t.AUTOPLAY_FAILED="autoplay-failed",t.AUDIO_CONTEXT_STATE_CHANGED="audio-context-state-changed",t.SECURITY_POLICY_VIOLATION="security-policy-violation",t}({}),ds=function(t){return t.CONNECTING="CONNECTING",t.RECONNECTING="RECONNECTING",t.CONNECTED="CONNECTED",t.CLOSED="CLOSED",t}({}),Rc=function(t){return t.CONNECTION_STATE_CHANGE="connection-state-change",t.STATE_CHANGE="state-change",t.INSPECT_RESULT="inspect-result",t.CLIENT_LOCAL_VIDEO_TRACK="client-local-video-track",t.REQUEST_NEW_WORKER_URL="request-new-worker-url",t}({}),Gp=function(t){return t[t.CONNECT_AP=0]="CONNECT_AP",t[t.AP_CONNECTED=1]="AP_CONNECTED",t[t.CONNECT_WORKER_MANAGER=2]="CONNECT_WORKER_MANAGER",t[t.WORKER_MANAGER_CONNECTED=3]="WORKER_MANAGER_CONNECTED",t[t.GET_WORKER_MANAGER_RESPONSE=4]="GET_WORKER_MANAGER_RESPONSE",t[t.CONNECT_WORKER=5]="CONNECT_WORKER",t[t.WORKER_CONNECTED=6]="WORKER_CONNECTED",t[t.CLOSED=7]="CLOSED",t}({}),Wr=function(t){return t.CALL="call",t.CANDIDATE="candidate",t.PUBLISH="publish",t.UNPUBLISH="unpublish",t.CONTROL="control",t.RESTART_ICE="restart_ice",t.ACK="ack",t.RESPONSE="response",t.JOIN="join",t.CHECK="check",t}({}),Kp=function(t){return t.ABORT="abort",t}({}),Wu=function(t){return t.MUTE_LOCAL_AUDIO="mute_local_audio",t.MUTE_LOCAL_VIDEO="mute_local_video",t.UNMUTE_LOCAL_AUDIO="unmute_local_audio",t.UNMUTE_LOCAL_VIDEO="unmute_local_video",t}({}),Xle=function(t){return t.P2P_TOKEN_TIMEOUT="p2p_token_timeout",t.P2P_TOKEN_CHANGED="p2p_token_changed",t}({});const Jle={[f_.ACCESS_POINT]:{[No.NO_FLAG_SET]:{desc:"flag is zero",retry:!1},[No.FLAG_SET_BUT_EMPTY]:{desc:"flag is empty",retry:!1},[No.INVALID_FALG_SET]:{desc:"invalid flag",retry:!1},[No.FLAG_SET_BUT_NO_RE]:{desc:"flag set unilbs but no request",retry:!1},[No.INVALID_SERVICE_ID]:{desc:"invalid service id",retry:!1},[No.NO_SERVICE_AVAILABLE]:{desc:"no service available",retry:!0},[No.NO_SERVICE_AVAILABLE_P2P]:{desc:"no unilbs p2p service available",retry:!0},[No.NO_SERVICE_AVAILABLE_VOICE]:{desc:"no unilbs voice service available",retry:!0},[No.NO_SERVICE_AVAILABLE_WEBRTC]:{desc:"no unilbs webrtc service available",retry:!0},[No.NO_SERVICE_AVAILABLE_CDS]:{desc:"no cds service available",retry:!0},[No.NO_SERVICE_AVAILABLE_CDN]:{desc:"no cdn dispatcher service available",retry:!0},[No.NO_SERVICE_AVAILABLE_TDS]:{desc:"no tds service available",retry:!0},[No.NO_SERVICE_AVAILABLE_REPORT]:{desc:"no unilbs report service available",retry:!0},[No.NO_SERVICE_AVAILABLE_APP_CENTER]:{desc:"no app center service available",retry:!0},[No.NO_SERVICE_AVAILABLE_ENV0]:{desc:"no unilbs sig env0 service available",retry:!0},[No.NO_SERVICE_AVAILABLE_VOET]:{desc:"no unilbs voet service available",retry:!0},[No.NO_SERVICE_AVAILABLE_STRING_UID]:{desc:"no string uid service available",retry:!0},[No.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS]:{desc:"no webrtc unilbs service available",retry:!0}},[f_.UNILBS]:{[Bs.INVALID_VENDOR_KEY]:{desc:"invalid vendor key, can not find appid",retry:!1},[Bs.INVALID_CHANNEL_NAME]:{desc:"invalid channel name",retry:!1},[Bs.INTERNAL_ERROR]:{desc:"unilbs internal error",retry:!1},[Bs.NO_AUTHORIZED]:{desc:"invalid token, authorized failed",retry:!1},[Bs.DYNAMIC_KEY_TIMEOUT]:{desc:"dynamic key or token timeout",retry:!1},[Bs.NO_ACTIVE_STATUS]:{desc:"no active status",retry:!1},[Bs.DYNAMIC_KEY_EXPIRED]:{desc:"dynamic key expired",retry:!1},[Bs.STATIC_USE_DYNAMIC_KEY]:{desc:"static use dynamic key",retry:!1},[Bs.DYNAMIC_USE_STATIC_KEY]:{desc:"dynamic use static key",retry:!1},[Bs.USER_OVERLOAD]:{desc:"amount of users over load",retry:!1},[Bs.FORBIDDEN_REGION]:{desc:"the request is forbidden in this area",retry:!1},[Bs.CANNOT_MEET_AREA_DEMAND]:{desc:"unable to allocate services in this area",retry:!1}},[f_.STRING_UID_ALLOCATOR]:{[t1.IIIEGAL_APPID]:{desc:"invalid appid",retry:!1},[t1.IIIEGAL_UID]:{desc:"invalid string uid",retry:!1},[t1.INTERNAL_ERROR]:{desc:"string uid allocator internal error",retry:!0}}};function qp(t){const n=Jle[Math.floor(t/1e4)];if(!n)return{desc:"unknown error",retry:!1};const i=n[t%1e4];if(!i){if(Math.floor(t/1e4)===f_.ACCESS_POINT){const a=t%1e4;if(a.toString()[0]==="1")return{desc:t.toString(),retry:!1};if(a.toString()[0]==="2")return{desc:t.toString(),retry:!0}}return{desc:"unknown error",retry:!1}}return i}const Qle={[bt.K_TIMESTAMP_EXPIRED]:{desc:"K_TIMESTAMP_EXPIRED",action:"failed"},[bt.K_CHANNEL_PERMISSION_INVALID]:{desc:"K_CHANNEL_PERMISSION_INVALID",action:"failed"},[bt.K_CERTIFICATE_INVALID]:{desc:"K_CERTIFICATE_INVALID",action:"failed"},[bt.K_CHANNEL_NAME_EMPTY]:{desc:"K_CHANNEL_NAME_EMPTY",action:"failed"},[bt.K_CHANNEL_NOT_FOUND]:{desc:"K_CHANNEL_NOT_FOUND",action:"failed"},[bt.K_TICKET_INVALID]:{desc:"K_TICKET_INVALID",action:"failed"},[bt.K_CHANNEL_CONFLICTED]:{desc:"K_CHANNEL_CONFLICTED",action:"failed"},[bt.K_SERVICE_NOT_READY]:{desc:"K_SERVICE_NOT_READY",action:"tryNext"},[bt.K_SERVICE_TOO_HEAVY]:{desc:"K_SERVICE_TOO_HEAVY",action:"tryNext"},[bt.K_UID_BANNED]:{desc:"K_UID_BANNED",action:"failed"},[bt.K_IP_BANNED]:{desc:"K_IP_BANNED",action:"failed"},[bt.K_AUTO_REBALANCE]:{desc:"k_AUTO_REBALANCE",action:"recover"},[bt.ERR_INVALID_VENDOR_KEY]:{desc:"ERR_INVALID_VENDOR_KEY",action:"failed"},[bt.ERR_INVALID_CHANNEL_NAME]:{desc:"ERR_INVALID_CHANNEL_NAME",action:"failed"},[bt.WARN_NO_AVAILABLE_CHANNEL]:{desc:"WARN_NO_AVAILABLE_CHANNEL",action:"failed"},[bt.WARN_LOOKUP_CHANNEL_TIMEOUT]:{desc:"WARN_LOOKUP_CHANNEL_TIMEOUT",action:"tryNext"},[bt.WARN_LOOKUP_CHANNEL_REJECTED]:{desc:"WARN_LOOKUP_CHANNEL_REJECTED",action:"failed"},[bt.WARN_OPEN_CHANNEL_TIMEOUT]:{desc:"WARN_OPEN_CHANNEL_TIMEOUT",action:"tryNext"},[bt.WARN_OPEN_CHANNEL_REJECTED]:{desc:"WARN_OPEN_CHANNEL_REJECTED",action:"failed"},[bt.WARN_REQUEST_DEFERRED]:{desc:"WARN_REQUEST_DEFERRED",action:"failed"},[bt.ERR_DYNAMIC_KEY_TIMEOUT]:{desc:"ERR_DYNAMIC_KEY_TIMEOUT",action:"failed"},[bt.ERR_NO_AUTHORIZED]:{desc:"ERR_NO_AUTHORIZED",action:"failed"},[bt.ERR_VOM_SERVICE_UNAVAILABLE]:{desc:"ERR_VOM_SERVICE_UNAVAILABLE",action:"tryNext"},[bt.ERR_NO_CHANNEL_AVAILABLE_CODE]:{desc:"ERR_NO_CHANNEL_AVAILABLE_CODE",action:"failed"},[bt.ERR_MASTER_VOCS_UNAVAILABLE]:{desc:"ERR_MASTER_VOCS_UNAVAILABLE",action:"tryNext"},[bt.ERR_INTERNAL_ERROR]:{desc:"ERR_INTERNAL_ERROR",action:"tryNext"},[bt.ERR_NO_ACTIVE_STATUS]:{desc:"ERR_NO_ACTIVE_STATUS",action:"failed"},[bt.ERR_INVALID_UID]:{desc:"ERR_INVALID_UID",action:"failed"},[bt.ERR_DYNAMIC_KEY_EXPIRED]:{desc:"ERR_DYNAMIC_KEY_EXPIRED",action:"failed"},[bt.ERR_STATIC_USE_DYANMIC_KE]:{desc:"ERR_STATIC_USE_DYANMIC_KE",action:"failed"},[bt.ERR_DYNAMIC_USE_STATIC_KE]:{desc:"ERR_DYNAMIC_USE_STATIC_KE",action:"failed"},[bt.ERR_NO_VOCS_AVAILABLE]:{desc:"ERR_NO_VOCS_AVAILABLE",action:"tryNext"},[bt.ERR_NO_VOS_AVAILABLE]:{desc:"ERR_NO_VOS_AVAILABLE",action:"tryNext"},[bt.ERR_JOIN_CHANNEL_TIMEOUT]:{desc:"ERR_JOIN_CHANNEL_TIMEOUT",action:"tryNext"},[bt.ERR_JOIN_BY_MULTI_IP]:{desc:"ERR_JOIN_BY_MULTI_IP",action:"recover"},[bt.ERR_NOT_JOINED]:{desc:"ERR_NOT_JOINED",action:"failed"},[bt.ERR_REPEAT_JOIN_REQUEST]:{desc:"ERR_REPEAT_JOIN_REQUEST",action:"quit"},[bt.ERR_REPEAT_JOIN_CHANNEL]:{desc:"ERR_REPEAT_JOIN_CHANNEL",action:"quit"},[bt.ERR_INVALID_STRINGUID]:{desc:"ERR_INVALID_STRINGUID",action:"failed"},[bt.ERR_TOO_MANY_USERS]:{desc:"ERR_TOO_MANY_USERS",action:"tryNext"},[bt.ERR_SET_CLIENT_ROLE_TIMEOUT]:{desc:"ERR_SET_CLIENT_ROLE_TIMEOUT",action:"failed"},[bt.ERR_SET_CLIENT_ROLE_NO_PERMISSION]:{desc:"ERR_SET_CLIENT_ROLE_TIMEOUT",action:"failed"},[bt.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE]:{desc:"ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",action:"success"},[bt.ERR_PUBLISH_REQUEST_INVALID]:{desc:"ERR_PUBLISH_REQUEST_INVALID",action:"failed"},[bt.ERR_SUBSCRIBE_REQUEST_INVALID]:{desc:"ERR_SUBSCRIBE_REQUEST_INVALID",action:"failed"},[bt.ERR_NOT_SUPPORTED_MESSAGE]:{desc:"ERR_NOT_SUPPORTED_MESSAGE",action:"failed"},[bt.ERR_ILLEAGAL_PLUGIN]:{desc:"ERR_ILLEAGAL_PLUGIN",action:"failed"},[bt.ILLEGAL_CLIENT_ROLE_LEVEL]:{desc:"ILLEGAL_CLIENT_ROLE_LEVEL",action:"failed"},[bt.ERR_REJOIN_TOKEN_INVALID]:{desc:"ERR_REJOIN_TOKEN_INVALID",action:"failed"},[bt.ERR_REJOIN_USER_NOT_JOINED]:{desc:"ERR_REJOIN_NOT_JOINED",action:"failed"},[bt.ERR_INVALID_OPTIONAL_INFO]:{desc:"ERR_INVALID_OPTIONAL_INFO",action:"quit"},[bt.ERR_TEST_RECOVER]:{desc:"ERR_TEST_RECOVER",action:"recover"},[bt.ERR_TEST_TRYNEXT]:{desc:"ERR_TEST_TRYNEXT",action:"recover"},[bt.ERR_TEST_RETRY]:{desc:"ERR_TEST_RETRY",action:"recover"},[bt.ILLEGAL_AES_PASSWORD]:{desc:"ERR_TEST_RETRY",action:"failed"},[bt.ERR_TOO_MANY_BROADCASTERS]:{desc:"ERR_TOO_MANY_BROADCASTERS",action:"failed"},[bt.ERR_TOO_MANY_SUBSCRIBERS]:{desc:"ERR_TOO_MANY_SUBSCRIBERS",action:"failed"},[bt.ERR_LICENSE_ILLEGAL]:{desc:"ERR_LICENSE_ILLEGAL",action:"quit"},[bt.ERR_LICENSE_MISSING]:{desc:"ERR_LICENSE_MISSING",action:"quit"},[bt.ERR_LICENSE_EXPIRED]:{desc:"ERR_LICENSE_EXPIRED",action:"quit"},[bt.ERR_LICENSE_MINUTES_EXCEEDED]:{desc:"ERR_LICENSE_MINUTES_EXCEEDED",action:"quit"},[bt.ERR_LICENSE_PERIOD_INVALID]:{desc:"ERR_LICENSE_PERIOD_INVALID",action:"quit"},[bt.ERR_LICENSE_MULTIPLE_SDK_SERVICE]:{desc:"ERR_LICENSE_MULTIPLE_SDK_SERVICE",action:"quit"}};function oh(t){return Qle[t]||{desc:"UNKNOW_ERROR_".concat(t),action:"failed"}}function eB(t,n){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),i.push.apply(i,a)}return i}function o1(t){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?eB(Object(i),!0).forEach(function(a){V(t,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):eB(Object(i)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(i,a))})}return t}function tB(t){return t.every(n=>n.readyState===WebSocket.CLOSED||n.readyState===WebSocket.CLOSING)}function nB(t,n){if(typeof t=="string")return t;const{proxy:i,host:a,port:l}=t;if(n){const u=ee("JOIN_GATEWAY_FALLBACK_PORT")||443;return u===443?"wss://".concat(a,"/ws/?p=").concat(Number(l)+150):"wss://".concat(a,":").concat(u,"/ws/?p=").concat(Number(l)+150)}return i?"wss://".concat(i,"/ws/?h=").concat(a,"&p=").concat(l):"wss://".concat(a,":").concat(l)}const Zle=/wss:\/\/(.+)\/ws\/\?h=(.+)&p=([0-9]+)\/?/,eue=/wss:\/\/(.+)\/ws\/\?p=([0-9]+)\/?/,tue=/wss:\/\/(.+):([0-9]+)\/?/,nue=/wss:\/\/(.[^\/]+)\/?/;let rue=0;class iue{constructor(n,i){V(this,"id",0),V(this,"store",void 0),V(this,"recordIndex",void 0),V(this,"websockets",[]),V(this,"try443PortDuration",2e3),V(this,"forceCloseWSDuration",5e3),V(this,"try443PortTimeout",null),V(this,"forceCloseTimeout",null),V(this,"isTry443PortFailed",!1),V(this,"isNormalPortFailed",!1),V(this,"useDoubleDomain",!1),V(this,"useProxy",!1),V(this,"startTime",Date.now()),this.id=++rue,this.try443PortDuration=ee("JOIN_GATEWAY_TRY_443PORT_DURATION")||2e3,this.forceCloseWSDuration=n||5e3,this.store=i}closeAllWebsockets(){this.websockets.forEach(n=>{n.onopen=null,n.onclose=null,n.onmessage=null,n.close()}),this.websockets.length=0}clearTimeout(){this.forceCloseTimeout&&clearTimeout(this.forceCloseTimeout),this.try443PortTimeout&&clearTimeout(this.try443PortTimeout)}logger(){var n;const i=Date.now()-this.startTime;for(var a=arguments.length,l=new Array(a),u=0;u<a;u++)l[u]=arguments[u];k.debug("[choose-best-ws ".concat((n=this.store)===null||n===void 0?void 0:n.clientId," ").concat(this.id,"] ").concat(i,"ms:"),...l)}createWebSocket(n,i,a){this.logger("createWebSocket:",n,{isTry443Port:i,hasTimeoutDetection:a});const l=ee("GATEWAY_DOMAINS"),u=Date.now(),h=[],f=l.find(y=>{var T;return Ye(T=n.host).call(T,y)});f||(this.useDoubleDomain=!1);const g=[];if(this.useDoubleDomain)l.forEach(y=>{g.push(nB(o1(o1({},n),{},{host:n.host.replace(f,y)}),i))});else{const y=o1({},n);if(i&&f){const T=l.find(A=>A!==f);T&&(y.host=y.host.replace(f,T))}g.push(nB(y,i))}try{g.forEach(y=>{const T=new WebSocket(y);T.binaryType="arraybuffer",h.push(T),this.logger("ws is connecting:",T.url)})}catch(y){if(this.logger("ws create failed"),h.forEach(T=>T.close()),h.length=0,this.useDoubleDomain)return this.useDoubleDomain=!1,this.createWebSocket(n,i,a);if(!i&&Number(n.port)!==443)return this.createWebSocket(n,!0,a);throw new me(K.WS_ERR,"init websocket failed! Error: ".concat(y.toString()))}const _=m0();return this.store&&this.store.recordJoinChannelService({urls:h.map(y=>y.url),service:"gateway"},this.recordIndex),h.forEach(y=>{y.onopen=()=>{this.logger("onopen: ws ".concat(y.url," open cost ").concat(Date.now()-u,"ms")),this.websockets.forEach(T=>{T!==y&&(T.onopen=null,T.onclose=null,T.onmessage=null,T.close(),this.logger("close backup websocket: ".concat(T.url)))}),this.websockets.length=0,_.resolve(y)},y.onclose=T=>{this.logger("onclose: ws ".concat(y.url," closed cost ").concat(Date.now()-u,"ms state: ").concat(y.readyState)),i?this.isTry443PortFailed=tB(h):this.isNormalPortFailed=tB(h),this.logger("443: ".concat(this.useProxy?"not try":this.isTry443PortFailed?"failed":"trying"," 47xx: ").concat(this.isNormalPortFailed?"failed":"trying")),(i&&this.isTry443PortFailed||!i&&(this.isTry443PortFailed||this.useProxy)&&this.isNormalPortFailed)&&(this.logger("onclose: all websocket is closed, ".concat(T.reason)),_.reject({code:T.code,reason:C0.A_ROUND_WS_FAILED}))},y.onmessage=T=>this.logger("".concat(y.url," onmessage: ").concat(T.data))}),this.websockets.push(...h),a||(()=>{const y=()=>{this.logger("5s timeout close un-opens, isWebsocket created: ",_.isResolved),this.websockets.forEach(T=>T.readyState!==WebSocket.OPEN&&T.close())};if(i||this.useProxy)return this.logger("add 5s timeout at ".concat(i?"try-443":"proxy"," condition")),this.forceCloseTimeout=window.setTimeout(y,this.forceCloseWSDuration);this.try443PortTimeout=window.setTimeout(()=>{if(this.logger("2s timeout, isWebsocket created: ",_.isResolved),_.isResolved)return y();_n().os===_i.MAC_OS&&Zn()&&y(),this.createWebSocket(n,!0,!0).then(T=>_.resolve(T)).catch(T=>{this.isNormalPortFailed&&_.reject(T),this.logger("try 443 port to create ws failed")}),this.forceCloseTimeout=window.setTimeout(y,this.forceCloseWSDuration)},this.try443PortDuration)})(),_.promise}chooseBestWebsocket(n,i,a,l){return this.useDoubleDomain=!!i,typeof n=="string"&&(n=function(u){let h,f,g;return[,h,f,g]=u.match(Zle)||[],h||([,f,g]=u.match(eue)||[]),f&&g||([,f,g]=u.match(tue)||[]),f&&g||([,f]=u.match(nue)||[]),f||k.warning("un-destructible url: ",u),{proxy:h,host:f,port:g||"443"}}(n)),this.recordIndex=l,this.useProxy=!!n.proxy,a&&this.useProxy&&(k.warn("cannot use 443 only when use proxy"),a=!1),this.createWebSocket(n,!!a,!1).finally(()=>this.clearTimeout())}}function rB(t,n){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),i.push.apply(i,a)}return i}class iB extends _r{get url(){return this.websocket&&this.websocket.url||null}get reconnectMode(){return this._reconnectMode}set reconnectMode(n){var i;Ye(i=["tryNext","recover"]).call(i,n)&&this.resetReconnectCount(n),this._reconnectMode=n}get state(){return this._state}set state(n){n!==this._state&&(this._state=n,this._state==="reconnecting"?this.emit(kt.RECONNECTING,this.reconnectReason):this._state==="connected"?this.emit(kt.CONNECTED):this._state==="closed"?this.emit(kt.CLOSED):this._state==="failed"&&this.emit(kt.FAILED))}resetReconnectCount(n){k.debug("websocket reset reconnect count, reason: "+n),this.reconnectCount=0}constructor(n,i){let a=arguments.length>2&&arguments[2]!==void 0&&arguments[2],l=arguments.length>3&&arguments[3]!==void 0&&arguments[3],u=arguments.length>4&&arguments[4]!==void 0&&arguments[4],h=arguments.length>5?arguments[5]:void 0;super(),V(this,"connectionID",0),V(this,"currentURLIndex",0),V(this,"urls",[]),V(this,"_reconnectMode","tryNext"),V(this,"reconnectReason",void 0),V(this,"_initMutex",new Oi("websocket")),V(this,"name",void 0),V(this,"_state","closed"),V(this,"reconnectInterrupter",void 0),V(this,"websocket",void 0),V(this,"retryConfig",void 0),V(this,"reconnectCount",0),V(this,"forceCloseTimeout",5e3),V(this,"onlineReconnectListener",void 0),V(this,"useCompress",void 0),V(this,"tryDoubleDomain",!1),V(this,"use443PortOnly",!1),V(this,"wsInflateLength",0),V(this,"wsDeflateLength",0),V(this,"closeEstablishingWs",()=>{}),V(this,"store",void 0),V(this,"joinGatewayRecordIndex",void 0),this.store=h,this.name=n,this.retryConfig=function(T){for(var A=1;A<arguments.length;A++){var D=arguments[A]!=null?arguments[A]:{};A%2?rB(Object(D),!0).forEach(function(W){V(T,W,D[W])}):Object.getOwnPropertyDescriptors?Object.defineProperties(T,Object.getOwnPropertyDescriptors(D)):rB(Object(D)).forEach(function(W){Object.defineProperty(T,W,Object.getOwnPropertyDescriptor(D,W))})}return T}({},i),this.useCompress=a,this.tryDoubleDomain=l,this.use443PortOnly=u;const{timeout:f,timeoutFactor:g}=i,_=Math.max(300,Math.floor(3*f/5)),y=Math.max(1.2,Math.floor(8*g)/10);xo.ONLINE&&(this.retryConfig.timeout=_,this.retryConfig.timeoutFactor=y),Dr.on(Qd.NETWORK_STATE_CHANGE,(T,A)=>{T!==A&&(this.resetReconnectCount("network state change: ".concat(A," -> ").concat(T)),T===xo.ONLINE?(this.retryConfig.timeout=_,this.retryConfig.timeoutFactor=y):(this.retryConfig.timeout=f,this.retryConfig.timeoutFactor=g))})}getConnection(){return this.websocket||void 0}async init(n){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5e3;const a=await this._initMutex.lock();this.forceCloseTimeout=i,this.urls=n,this.state="connecting";try{const l=m0(),u=this.urls[this.currentURLIndex];this.createWebSocketConnection(u).then(l.resolve).catch(l.reject),this.once(kt.CLOSED,()=>{l.reject(new Ce(K.WS_DISCONNECT))}),this.once(kt.CONNECTED,l.resolve),await l.promise}catch{}finally{a()}}close(n,i){if(this.currentURLIndex=0,this.resetReconnectCount("close"),this.reconnectInterrupter&&this.reconnectInterrupter(),this.websocket){this.websocket.onclose=null,this.websocket.onopen=null,this.websocket.onmessage=null;const a=this.websocket;i?setTimeout(()=>a.close(),500):a.close(),this.websocket=void 0}this.state=n?"failed":"closed",this.closeEstablishingWs&&this.closeEstablishingWs()}reconnect(n,i){if(!this.websocket)return void k.warning("[".concat(this.name,"] can not reconnect, no websocket"));n!==void 0&&(this.reconnectMode=n),k.debug("[".concat(this.name,"] reconnect is triggered initiative")),typeof this.joinGatewayRecordIndex=="number"&&this.store&&this.store.recordJoinChannelService({status:"error",errors:[new Error(i)]},this.joinGatewayRecordIndex);const a=this.websocket.onclose;this.websocket.onclose=null,this.websocket.close(),a&&a.bind(this.websocket)({code:9999,reason:i})}sendMessage(n){let i=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(!this.websocket||this.websocket.readyState!==WebSocket.OPEN)throw new Ce(K.WS_ABORT,"websocket is not ready");try{i||(n=JSON.stringify(n)),this.websocket.send(n)}catch(a){throw new Ce(K.WS_ERR,"send websocket message error"+a.toString())}}setWsInflateData(n){this.wsDeflateLength=this.wsDeflateLength+n.originLength,this.wsInflateLength=this.wsInflateLength+n.compressedLength}getWsInflateData(){const n=this.wsInflateLength,i=this.wsDeflateLength;return this.clearWsInflateData(),{wsInflateLength:n,wsDeflateLength:i}}clearWsInflateData(){this.wsInflateLength=0,this.wsDeflateLength=0}async createWebSocketConnection(n){var i;const a=m0();this.connectionID+=1,this.joinGatewayRecordIndex=void 0;const l=y=>{var T;(T=this.store)===null||T===void 0||T.signalChannelOpen(),k.debug("[".concat(this.name,"] websocket opened:"),y),this.reconnectMode="retry",this.state="connected",this.resetReconnectCount("opened"),a.resolve()},u=async y=>{var T;if(k.debug("[".concat(this.name,"] websocket close ").concat((T=this.websocket)===null||T===void 0?void 0:T.url,", code: ").concat(y.code,", reason: ").concat(y.reason,", current mode: ").concat(this.reconnectMode)),this.reconnectCount>=this.retryConfig.maxRetryCount)a.reject(new Ce(K.WS_DISCONNECT,"websocket close: ".concat(y.code))),this.close();else{this.state==="connected"&&(this.reconnectReason=y.reason,this.state="reconnecting");const A=Ta(this,kt.WILL_RECONNECT,this.reconnectMode,y.reason)||this.reconnectMode,D=await this.reconnectWithAction(A);if(this.state==="closed")return void k.debug("[".concat(this.connectionID,"] ws is closed, no need to reconnect"));if(!D)return a.reject(new Ce(K.WS_DISCONNECT,"websocket reconnect failed: ".concat(y.code))),this.close(!0);a.resolve()}},h=y=>{this.emit(kt.ON_MESSAGE,y)},f=y=>{k.warn("[".concat(this.connectionID,"] ws open error ").concat(y))};this.websocket&&(this.websocket.onclose=null,this.websocket.close()),ee("GATEWAY_WSS_ADDRESS")&&this.name.startsWith("gateway")&&(n=ee("GATEWAY_WSS_ADDRESS")),k.debug("[".concat(this.name,"] start connect, url:"),n);const g=(i=this.store)===null||i===void 0?void 0:i.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"gateway"});try{var _;const y=await this.chooseBestWebsocketConnection(n);this.websocket=y,l&&l(this.websocket.url),this.websocket.onclose=u,this.websocket.onmessage=h,this.websocket.onerror=f,(_=this.store)===null||_===void 0||_.recordJoinChannelService({endTs:Date.now(),status:"success"},g),this.joinGatewayRecordIndex=g}catch(y){const T=this.state==="closed",A=y instanceof Ce,D=A&&y.code===K.WS_ABORT,W=A&&y.code===K.WS_ERR,F=A?y.message:y&&(y.reason||y.toString());k.warning("[choose-best-ws] chooseBestWebsocket error: ".concat(F)),this.store&&this.store.recordJoinChannelService({endTs:Date.now(),status:D?"aborted":"error",errors:[y]},g),T||W?(a.reject(T?new Ce(K.WS_DISCONNECT,"websocket is closed: ".concat(F)):new Ce(K.WS_ERR,"init websocket failed: ".concat(F))),W&&k.error("[".concat(this.name,"] init websocket failed: ").concat(F))):u&&u(y)}return a.promise}async reconnectWithAction(n){let i=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(this.reconnectCount>=this.retryConfig.maxRetryCount||this.urls.length===0||this.state==="closed")return!1;k.warning("[choose-best-ws] action: =>",n),this.onlineReconnectListener||Dr.isOnline||!Dr.onlineWaiter||(this.onlineReconnectListener=Dr.onlineWaiter.then(()=>{this.onlineReconnectListener=void 0}));let a=!0;if(this.reconnectInterrupter=()=>a=!1,i){const h=u_(this.reconnectCount,this.retryConfig);k.debug("[".concat(this.name,"] wait ").concat(h,"ms to reconnect websocket, mode: ").concat(n)),await We.race([yi(h),this.onlineReconnectListener||new We(()=>{})])}if(this._state==="closed"||!a)return!1;this.reconnectCount+=1;const l=async(h,f)=>{this.emit(kt.RECONNECT_CREATE_CONNECTION,f),await this.createWebSocketConnection(h)};try{if(n==="retry")this.emit(kt.RECONNECT_WAITTING_FINISH,n),await l(this.urls[this.currentURLIndex],n);else if(n==="tryNext"){if(this.currentURLIndex+=1,this.currentURLIndex>=this.urls.length)return this.reconnectWithAction("recover",!1);k.debug("[".concat(this.name,"] websocket url length: ").concat(this.urls.length," current index: ").concat(this.currentURLIndex)),this.emit(kt.RECONNECT_WAITTING_FINISH,n),await l(this.urls[this.currentURLIndex],n)}else n==="recover"&&(k.debug("[".concat(this.name,"] request new urls")),this.resetReconnectCount("recover mode"),this.emit(kt.RECONNECT_WAITTING_FINISH,n),this.urls=await ri(this,kt.REQUEST_NEW_URLS),this.currentURLIndex=0,await l(this.urls[this.currentURLIndex],n))}catch(h){var u;k.error("[".concat(this.name,"] reconnect failed ").concat(h&&h.toString()));const f=h==null||(u=h.data)===null||u===void 0?void 0:u.desc;return Array.isArray(f)&&Ye(f).call(f,"dynamic key expired")?(this.emit(kt.ON_TOKEN_PRIVILEGE_DID_EXPIRE),!1):this.reconnectWithAction(n,i)}return!0}}class b0 extends iB{constructor(n,i){super(n,i,arguments.length>2&&arguments[2]!==void 0&&arguments[2],arguments.length>3&&arguments[3]!==void 0&&arguments[3],arguments.length>4&&arguments[4]!==void 0&&arguments[4],arguments.length>5?arguments[5]:void 0)}async chooseBestWebsocketConnection(n,i){const a=m0(),l=function(h,f){return new iue(h,f)}(this.forceCloseTimeout,this.store);this.closeEstablishingWs=()=>{k.debug("[choose-best-ws] close establishing websockets"),l.closeAllWebsockets(),a.reject(new Ce(K.WS_ABORT,"choose best websocket aborted"))};const u=ee("GATEWAY_DOMAINS");return k.debug("[choose-best-ws] currentDomain: ",n,", domains: ",u,"total: ".concat(this.urls.length),"current: ".concat(this.currentURLIndex+1)),l.chooseBestWebsocket(n,this.tryDoubleDomain,this.use443PortOnly,i).then(a.resolve).catch(a.reject),a.promise.finally(()=>{this.closeEstablishingWs=void 0})}}class T0 extends iB{constructor(n,i){super(n,i,arguments.length>2&&arguments[2]!==void 0&&arguments[2],arguments.length>3&&arguments[3]!==void 0&&arguments[3],arguments.length>4&&arguments[4]!==void 0&&arguments[4],arguments.length>5?arguments[5]:void 0)}async chooseBestWebsocketConnection(n,i){return new We((a,l)=>{let u=!1;const h=[];this.closeEstablishingWs=()=>{k.debug("[choose-best-ws] close establishing websockets"),h.forEach(W=>{W.onclose=null,W.onopen=null,W.onmessage=null,W.close()}),l(new Ce(K.WS_ABORT,"choose best websocket aborted"))};const f=ee("GATEWAY_DOMAINS");let g;const _=n.indexOf("?h="),y=f.find(W=>_!==-1?Ye(n).call(n,W,_):Ye(n).call(n,W));k.debug("[choose-best-ws] currentDomain: ",y,", domains: ",f);let T=!this.tryDoubleDomain||!y;if(!T&&y){var A;const W=Date.now();try{f.forEach(F=>{const U=_===-1?n.replace(y,F):n.substr(0,_)+n.substr(_).replace(y,F),z=new WebSocket(U);z.binaryType="arraybuffer",h.push(z),k.debug("[choose-best-ws] ws is connecting:",z.url)})}catch{for(k.debug("[choose-best-ws] ws create failed, fallback to single url"),h.forEach(U=>U.close());h.length;)h.pop();T=!0}(A=this.store)===null||A===void 0||A.recordJoinChannelService({urls:h.map(F=>F.url),service:"gateway"},i),h.forEach(F=>{F.onopen=()=>{if(u)return;const U=Date.now()-W;k.debug("[choose-best-ws] ws open cost ".concat(U,"ms")),h.filter(z=>z!==F).forEach(z=>{k.debug("[choose-best-ws]close backup websocket: ".concat(z.url)),z.close()}),u=!0,a(F)},F.onclose=U=>{g=U,!u&&(h.find(z=>!(z.readyState===WebSocket.CLOSED||z.readyState===WebSocket.CLOSING))||(k.debug("[choose-best-ws] all websocket is closed"),u=!0,l(g)))},F.onmessage=U=>{k.debug("[choose-best-ws]".concat(F.url," onmessage: ").concat(U.data))}}),yi(this.forceCloseTimeout).then(()=>{h.forEach(F=>{F.readyState!==WebSocket.OPEN&&F.close()})})}if(T){var D;let W;k.debug("[choose-best-ws] use single url: ",n),(D=this.store)===null||D===void 0||D.recordJoinChannelService({urls:[n],service:"gateway"},i);try{W=new WebSocket(n),h.push(W),W.binaryType="arraybuffer"}catch(F){const U=new Ce(K.WS_ERR,"init websocket failed! Error: ".concat(F.toString()));return k.error("[".concat(this.name,"]").concat(U)),void l(U)}W.onopen=()=>{a(W)},W.onclose=F=>{l(F)},W.onmessage=F=>{k.debug("[choose-best-ws]".concat(W.url," onmessage: ").concat(F.data))},yi(this.forceCloseTimeout).then(()=>{W&&W.readyState!==WebSocket.OPEN&&W.close()})}}).then(a=>(this.closeEstablishingWs=void 0,a)).catch(a=>{throw this.closeEstablishingWs=void 0,a})}}class oB extends _r{get connectionState(){return this._connectionState}set connectionState(n){n!==this._connectionState&&(this._connectionState=n,n===nn.CONNECTED?this.emit(nt.WS_CONNECTED):n===nn.RECONNECTING?this.emit(nt.WS_RECONNECTING,this._websocketReconnectReason):n===nn.CLOSED&&this.emit(nt.WS_CLOSED,this._disconnectedReason))}get currentURLIndex(){return this.websocket.currentURLIndex}get url(){return this.websocket&&this.websocket.url||null}get rtt(){return this.rttRolling.mean()}constructor(n,i){super(),V(this,"_disconnectedReason",void 0),V(this,"_websocketReconnectReason",void 0),V(this,"_connectionState",nn.CLOSED),V(this,"reconnectToken",void 0),V(this,"websocket",void 0),V(this,"openConnectionTime",void 0),V(this,"clientId",void 0),V(this,"lastMsgTime",Date.now()),V(this,"uploadCache",[]),V(this,"uploadCacheInterval",void 0),V(this,"rttRolling",new Hw(5)),V(this,"pingpongTimer",void 0),V(this,"wsInflateDataTimer",void 0),V(this,"pingpongTimeoutCount",0),V(this,"joinResponse",void 0),V(this,"multiIpOption",void 0),V(this,"initError",void 0),V(this,"spec",void 0),V(this,"store",void 0),V(this,"onWebsocketMessage",a=>{if(a.data instanceof ArrayBuffer)return void this.emit(nt.ON_BINARY_DATA,a.data);const l=JSON.parse(a.data);if(this.lastMsgTime=Date.now(),Object.prototype.hasOwnProperty.call(l,"_id")){const u="res-@".concat(l._id);this.emit(u,l._result,l._message)}else if(Object.prototype.hasOwnProperty.call(l,"_type")){if(this.emit(l._type,l._message),l._type===Bt.ON_NOTIFICATION&&this.handleNotification(l._message),l._type===Bt.ON_USER_BANNED)switch(l._message.error_code){case 14:this.close(an.UID_BANNED);break;case 15:this.close(an.IP_BANNED);break;case 16:this.close(an.CHANNEL_BANNED)}if(l._type===Bt.ON_USER_LICENSE_BANNED)switch(l._message.error_code){case bt.ERR_LICENSE_MISSING:this.close(an.LICENSE_MISSING);break;case bt.ERR_LICENSE_EXPIRED:this.close(an.LICENSE_EXPIRED);break;case bt.ERR_LICENSE_MINUTES_EXCEEDED:this.close(an.LICENSE_MINUTES_EXCEEDED);break;case bt.ERR_LICENSE_PERIOD_INVALID:this.close(an.LICENSE_PERIOD_INVALID);break;case bt.ERR_LICENSE_MULTIPLE_SDK_SERVICE:this.close(an.LICENSE_MULTIPLE_SDK_SERVICE);break;case bt.ERR_LICENSE_ILLEGAL:this.close(an.LICENSE_ILLEGAL);break;default:this.close()}}}),this.clientId=n.clientId,this.spec=n,this.store=i,this.websocket=new b0("gateway-".concat(this.clientId),this.spec.retryConfig,!0,ee("JOIN_GATEWAY_USE_DUAL_DOMAIN"),ee("JOIN_GATEWAY_USE_443PORT_ONLY"),i),this.handleWebsocketEvents(),window.addEventListener("offline",()=>{this.connectionState===nn.CONNECTED&&this.reconnect("retry",zi.OFFLINE)})}async request(n,i,a,l){const u=tr(6,""),h={_id:u,_type:n,_message:i},f=this.websocket.connectionID,g=()=>new We((W,F)=>{if(this.connectionState===nn.CONNECTED)return W();const U=()=>{this.off(nt.WS_CLOSED,z),W()},z=()=>{this.off(nt.WS_CONNECTED,U),F(new me(K.WS_ABORT))};this.once(nt.WS_CONNECTED,U),this.once(nt.WS_CLOSED,z),n!==vt.PUBLISH&&n!==vt.PUBLISH_DATASTREAM&&n!==vt.SUBSCRIBE&&n!==vt.SUBSCRIBE_DATASTREAM&&n!==vt.UNSUBSCRIBE&&n!==vt.UNSUBSCRIBE_DATASTREAM&&n!==vt.UNPUBLISH&&n!==vt.UNPUBLISH_DATASTREAM&&n!==vt.CONTROL&&n!==vt.RESTART_ICE||this.once(nt.DISCONNECT_P2P,()=>{F(new me(K.DISCONNECT_P2P))}),n!==vt.PUBLISH&&n!==vt.RESTART_ICE||this.once(nt.ABORT_P2P_EXECUTION,()=>{F(new me(K.DISCONNECT_P2P))})});if(this.connectionState!==nn.CONNECTING&&this.connectionState!==nn.RECONNECTING||n===vt.JOIN||n===vt.REJOIN||await g(),this.websocket.sendMessage(h,!0),l)return;const _=new We((W,F)=>{let U=!1;const z=(ue,pe)=>{U=!0,W({isSuccess:ue==="success",message:pe||{}}),this.off(nt.WS_CLOSED,X),this.off(nt.WS_RECONNECTING,X),this.emit(nt.REQUEST_SUCCESS,n,i)};this.once("res-@".concat(u),z);const X=()=>{F(new me(K.WS_ABORT,"type: ".concat(n))),this.off(nt.WS_CLOSED,X),this.off(nt.WS_RECONNECTING,X),this.off("res-@".concat(u),z)};this.once(nt.WS_CLOSED,X),this.once(nt.WS_RECONNECTING,X),yi(ee("SIGNAL_REQUEST_TIMEOUT")).then(()=>{this.websocket.connectionID!==f||U||(k.warning("[".concat(this.clientId,"] ws request timeout, type: ").concat(n)),this.emit(nt.REQUEST_TIMEOUT,n,i))})});let y=null;try{y=await _}catch(W){if(this.connectionState===nn.CLOSED||n===vt.LEAVE)throw new me(K.WS_ABORT);return!this.spec.forceWaitGatewayResponse||a?W.throw():n===vt.JOIN||n===vt.REJOIN?null:(await g(),await this.request(n,i))}if(y.isSuccess)return y.message;const T=Number(y.message.error_code||y.message.code),A=oh(T),D=new me(K.UNEXPECTED_RESPONSE,"".concat(A.desc,": ").concat(y.message.error_str),{code:T,data:y.message});return A.action==="success"?y.message:(k.warning("[".concat(this.clientId,"] [").concat(this.websocket.connectionID,"] unexpected response from type ").concat(n,", error_code: ").concat(T,", message: ").concat(A.desc,", action: ").concat(A.action)),T===bt.ERR_TOO_MANY_BROADCASTERS?((n===vt.JOIN||n===vt.REJOIN)&&(this.initError=D,this.close()),D.throw()):A.action==="failed"?D.throw():A.action==="quit"?(this.initError=D,this.close(),D.throw()):(T===bt.ERR_JOIN_BY_MULTI_IP?(this.multiIpOption=y.message.option,k.warning("[".concat(this.clientId,"] detect multi ip, recover")),this.reconnect("recover",zi.MULTI_IP)):this.reconnect(A.action,zi.SERVER_ERROR),n===vt.JOIN||n===vt.REJOIN?null:await this.request(n,i)))}waitMessage(n,i){return new We(a=>{const l=u=>{(!i||i(u))&&(this.off(n,l),a(u))};this.on(n,l)})}uploadWRTCStats(n){if(!this.store.sessionId)return void k.warn("[".concat(this.clientId,"] no session id when upload wrtc stats"));const i={lts:Date.now(),sid:this.store.sessionId,uid:this.store.intUid,stats:n};this.upload(ih.WRTC_STATS,i)}upload(n,i){const a={_type:n,_message:i};try{this.websocket.sendMessage(a)}catch{const u=ee("MAX_UPLOAD_CACHE")||50;this.uploadCache.push(a),this.uploadCache.length>u&&this.uploadCache.splice(0,1),this.uploadCache.length>0&&!this.uploadCacheInterval&&(this.uploadCacheInterval=window.setInterval(()=>{if(this.connectionState!==nn.CONNECTED)return;const h=this.uploadCache.splice(0,1)[0];this.uploadCache.length===0&&(window.clearInterval(this.uploadCacheInterval),this.uploadCacheInterval=void 0),this.upload(h._type,h._message)},ee("UPLOAD_CACHE_INTERVAL")||2e3))}}send(n,i){const a={_type:n,_message:i};this.websocket.sendMessage(a)}init(n,i){return this.initError=void 0,this.multiIpOption=void 0,this.joinResponse=void 0,this.reconnectToken=void 0,this.openConnectionTime=void 0,new We((a,l)=>{this.once(nt.WS_CONNECTED,()=>a(this.joinResponse)),this.once(nt.WS_CLOSED,()=>l(this.initError||new me(K.WS_ABORT))),this.connectionState=nn.CONNECTING,this.websocket.init(n).catch(l),this.wsInflateDataTimer&&window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=window.setInterval(()=>{this.handleWsInflateData()},2e4)})}close(n){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.wsInflateDataTimer&&(this.handleWsInflateData(),window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=void 0),this.reconnectToken=void 0,this.joinResponse=void 0,this._disconnectedReason=n||an.LEAVE,this.connectionState=nn.CLOSED,k.debug("[".concat(this.clientId,"] ")+"will close websocket in signal"),this.websocket.close(),n===an.FALLBACK&&(this.websocket.removeAllListeners(),this.websocket=new b0("gateway-".concat(this.clientId),this.spec.retryConfig,!0,ee("JOIN_GATEWAY_USE_DUAL_DOMAIN"),ee("JOIN_GATEWAY_USE_443PORT_ONLY"),this.store),this.handleWebsocketEvents())}async join(){if(!this.joinResponse){this.emit(nt.ABORT_P2P_EXECUTION);const n=await ri(this,nt.REQUEST_JOIN_INFO),i=await this.request(vt.JOIN,n);if(!i)return this.emit(nt.REPORT_JOIN_GATEWAY,C0.TIMEOUT,this.url||""),!1;this.joinResponse=i,this.emit(nt.JOIN_RESPONSE,this.joinResponse),this.reconnectToken=this.joinResponse.rejoin_token}return this.connectionState=nn.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),!0}async rejoin(){if(!this.reconnectToken)throw new me(K.UNEXPECTED_ERROR,"can not rejoin, no rejoin token");const n=Zd(this,nt.REQUEST_REJOIN_INFO);n.token=this.reconnectToken;const i=await this.request(vt.REJOIN,n);return!!i&&(this.connectionState=nn.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),i.peers&&i.peers.forEach(a=>{this.emit(Bt.ON_USER_ONLINE,{uid:a.uid}),a.audio&&this.emit(Bt.ON_ADD_AUDIO_STREAM,{uid:a.uid,uint_id:a.uint_id,audio:!0,ssrcId:a.audio_ssrc}),a.video&&this.emit(Bt.ON_ADD_VIDEO_STREAM,{uid:a.uid,uint_id:a.uint_id,video:!0,ssrcId:a.video_ssrc}),a.audio_mute?this.emit(Bt.MUTE_AUDIO,{uid:a.uid}):this.emit(Bt.UNMUTE_AUDIO,{uid:a.uid}),a.video_mute?this.emit(Bt.MUTE_VIDEO,{uid:a.uid}):this.emit(Bt.UNMUTE_VIDEO,{uid:a.uid}),a.audio_enable_local?this.emit(Bt.ENABLE_LOCAL_AUDIO,{uid:a.uid}):this.emit(Bt.DISABLE_LOCAL_AUDIO,{uid:a.uid}),a.video_enable_local?this.emit(Bt.ENABLE_LOCAL_VIDEO,{uid:a.uid}):this.emit(Bt.DISABLE_LOCAL_VIDEO,{uid:a.uid}),a.audio||a.video||this.emit(Bt.ON_REMOVE_STREAM,{uid:a.uid,uint_id:a.uint_id})}),!0)}reconnect(n,i){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.websocket.reconnect(n,i)}handleNotification(n){k.debug("[".concat(this.clientId,"] receive notification: "),n);const i=oh(n.code);if(i.action!=="success"){if(i.action!=="failed")return i.action==="quit"?(i.desc==="ERR_REPEAT_JOIN_CHANNEL"&&this.close(an.UID_BANNED),void this.close()):void this.reconnect(i.action,zi.SERVER_ERROR);k.error("[".concat(this.clientId,"] ignore error: "),i.desc)}}handlePingPong(){if(!this.websocket||this.websocket.state!=="connected")return;this.pingpongTimeoutCount>0&&this.rttRolling.add(3e3),this.pingpongTimeoutCount+=1;const n=ee("PING_PONG_TIME_OUT"),i=Date.now();this.pingpongTimeoutCount>=n&&(k.warning("[".concat(this.clientId,"] PING-PONG Timeout. Last Socket Message: ").concat(i-this.lastMsgTime,"ms")),i-this.lastMsgTime>ee("WEBSOCKET_TIMEOUT_MIN"))?this.reconnect("retry",zi.TIMEOUT):this.request(vt.PING,void 0,!0).then(()=>{this.pingpongTimeoutCount=0;const a=Date.now()-i;this.rttRolling.add(a),ee("REPORT_STATS")&&this.send(vt.PING_BACK,{pingpongElapse:a})}).catch(a=>{})}handleWsInflateData(){const{wsInflateLength:n,wsDeflateLength:i}=this.websocket.getWsInflateData();n!==0&&i!==0&&this.upload(ih.WS_INFLATE_DATA_LENGTH,{ws_deflate_length:i,ws_inflate_length:n})}handleWebsocketEvents(){this.websocket.on(kt.RECONNECT_WAITTING_FINISH,n=>{this.emit(nt.WS_RECONNECT_WAITTING_FINISH,n)}),this.websocket.on(kt.RECONNECT_CREATE_CONNECTION,n=>{this.emit(nt.WS_RECONNECT_CREATE_CONNECTION,n)}),this.websocket.on(kt.ON_MESSAGE,this.onWebsocketMessage),this.websocket.on(kt.CLOSED,()=>{this.connectionState=nn.CLOSED}),this.websocket.on(kt.FAILED,()=>{this._disconnectedReason=an.NETWORK_ERROR,this.connectionState=nn.CLOSED}),this.websocket.on(kt.RECONNECTING,n=>{this._websocketReconnectReason=n,this.joinResponse=void 0,this.connectionState===nn.CONNECTED?this.connectionState=nn.RECONNECTING:this.connectionState=nn.CONNECTING}),this.websocket.on(kt.WILL_RECONNECT,(n,i,a)=>{const l=Zd(this,nt.IS_P2P_DISCONNECTED),u=l||n!=="retry";l&&n==="retry"&&(k.debug("".concat(this.clientId," reconnect mode is retry, but p2p lost, change to tryNext")),n="tryNext",i=C0.P2P_DISCONNECTED),u&&(k.debug("".concat(this.clientId," will renewSession, reconnect mode: ").concat(n)),this.emit(nt.REPORT_JOIN_GATEWAY,i||C0.UNKNOWN_REASON,this.url||""),this.reconnectToken=void 0,this.emit(nt.NEED_RENEW_SESSION,this.websocket.currentURLIndex>=this.websocket.urls.length-1?"recover":n),this.emit(nt.DISCONNECT_P2P)),a(n)}),this.websocket.on(kt.CONNECTED,()=>{this.openConnectionTime=Date.now(),this.reconnectToken?this.rejoin().catch(n=>{k.warning("[".concat(this.clientId,"] rejoin failed ").concat(n)),this.reconnect("tryNext",zi.SERVER_ERROR)}):this.join().catch(n=>{if(this.emit(nt.REPORT_JOIN_GATEWAY,n.message||n.code||C0.UNKNOWN_REASON,this.url||""),n instanceof me){if(n.code===K.UNEXPECTED_RESPONSE&&n.data.code===bt.ERR_NO_AUTHORIZED)return this.initError=new me(K.CAN_NOT_GET_GATEWAY_SERVER,"AgoraRTCError CAN_NOT_GET_GATEWAY_SERVER: dynamic key expired"),k.warning("[".concat(this.clientId,"] reconnect no authorized, recover")),void this.reconnect("recover",zi.SERVER_ERROR);k.error("[".concat(this.clientId,"] join gateway request failed"),n.toString()),this.spec.forceWaitGatewayResponse?this.reconnect("tryNext",zi.SERVER_ERROR):(this.initError=n,this.close())}})}),this.websocket.on(kt.REQUEST_NEW_URLS,(n,i)=>{ri(this,nt.REQUEST_RECOVER,this.multiIpOption).then(n).catch(i)}),this.websocket.on(kt.ON_TOKEN_PRIVILEGE_DID_EXPIRE,()=>{this.emit(Bt.ON_TOKEN_PRIVILEGE_DID_EXPIRE)})}}let Yr=function(t){return t[t.CHOOSE_SERVER=11]="CHOOSE_SERVER",t[t.CLOUD_PROXY=18]="CLOUD_PROXY",t[t.CLOUD_PROXY_5=20]="CLOUD_PROXY_5",t[t.CLOUD_PROXY_FALLBACK=26]="CLOUD_PROXY_FALLBACK",t}({});function aB(t,n){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),i.push.apply(i,a)}return i}function S_(t){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?aB(Object(i),!0).forEach(function(a){V(t,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):aB(Object(i)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(i,a))})}return t}function zu(t){return t.match(/^[\.\:\d]+$/)?"".concat(t.replace(/[^\d]/g,"-"),".").concat(ee("TURN_DOMAIN")):(k.info("Unidentified as ip: ".concat(t,", use as host")),t)}function a1(t,n){t.addresses||(t.addresses=[]);const i=function(u,h){if(ee("CONNECT_GATEWAY_WITHOUT_DOMAIN"))return u.map(_=>{let{ip:y,port:T}=_;return{address:"".concat(y,":").concat(T)}});const f=ee("GATEWAY_DOMAINS");let g=f[1]&&Ye(h).call(h,f[1])?1:0;return u.map(_=>{let{domain_prefix:y,port:T,ip:A}=_;if(y)return{address:"".concat(y,".").concat(f[g++%f.length],":").concat(T)};const D=/^[\.\:\d]+$/.test(A),W=D?"".concat(A.replace(/[^\d]/g,"-"),".").concat(f[g++%f.length],":").concat(T):"".concat(A,":").concat(T);return D||k.info("Unidentified as ip: ".concat(A,", use as host")),{ip:A,port:T,address:W}})}(t.addresses,n),a=Array.isArray(t.detail)&&t.detail[18];if(a&&typeof a=="string"){const u=a.split(";");for(let h=0;h<u.length;h++){var l;const f=go(l=u[h]).call(l);i[h]&&f&&(i[h].ip6=f)}}return{gatewayAddrs:i,uid:t.uid,cid:t.cid,cert:t.cert,vid:t.detail&&t.detail[8],uni_lbs_ip:t.detail&&t.detail[1],res:t,csIp:t.detail&&t.detail[502]}}function ia(t){return typeof t=="number"?t:t.exact||t.ideal||t.max||t.min||0}function sB(t){const n=t._encoderConfig;if(!n)return{};const i={resolution:n.width&&n.height?"".concat(ia(n.width),"x").concat(ia(n.height)):void 0,maxVideoBW:n.bitrateMax,minVideoBW:n.bitrateMin};return typeof n.frameRate=="number"?(i.maxFrameRate=n.frameRate,i.minFrameRate=n.frameRate):n.frameRate&&(i.maxFrameRate=n.frameRate.max||n.frameRate.ideal||n.frameRate.exact||n.frameRate.min,i.minFrameRate=n.frameRate.min||n.frameRate.ideal||n.frameRate.exact||n.frameRate.max),i}function cB(t){return t>=0&&t<.17?1:t>=.17&&t<.36?2:t>=.36&&t<.59?3:t>=.59&&t<=1?4:t>1?5:0}function R0(t,n){let i,a,l;switch(n){case Yr.CHOOSE_SERVER:a=4096,l="choose server";break;case Yr.CLOUD_PROXY:a=1048576,l="proxy";break;case Yr.CLOUD_PROXY_5:a=4194304,l="proxy5";break;case Yr.CLOUD_PROXY_FALLBACK:a=4194310,l="proxy fallback";break;default:throw new me(K.UNEXPECTED_ERROR,"multi unlibs response transformer get unknown service id",{csIp:t.detail&&t.detail[502],retry:!1})}if(t.response_body.forEach(u=>{u.buffer&&u.buffer.flag===a&&(i={code:u.buffer.code,addresses:(u.buffer.edges_services||[]).map(h=>S_(S_({},h),{},{ticket:u.buffer.cert})),server_ts:t.enter_ts,uid:u.buffer.uid,cid:u.buffer.cid,cname:u.buffer.cname,detail:S_(S_({},u.buffer.detail),t.detail),flag:u.buffer.flag,opid:t.opid,cert:u.buffer.cert})}),!i)throw new me(K.MULTI_UNILBS_RESPONSE_ERROR,"cannot parse response ".concat(l," from multi unilbs response"),{csIp:t.detail&&t.detail[502]});return i}async function lB(t,n){return await We.all(t.addresses.map(async i=>({address:zu(i.ip),tcpport:i.port,udpport:i.port,username:n&&ee("ENCRYPT_PROXY_USERNAME_AND_PSW")&&window.isSecureContext?n.toString():Gi.username,password:n&&ee("ENCRYPT_PROXY_USERNAME_AND_PSW")&&window.isSecureContext?await Vw(n.toString()):Gi.password})))}function s1(t,n){const i=n.getMediaStreamTrack(!0).getSettings(),a=n.videoHeight||i.height,l=n.videoWidth||i.width;return a&&l?Math.max(Math.min(a,l)/Math.min(ia(t.height),ia(t.width)),1):(k.warning("can't get ori-track's height, default scale down 4 times for low stream"),4)}function Gu(t){let{candidateType:n,relayProtocol:i,type:a,address:l,port:u,protocol:h}=t;return a==="local-candidate"?{candidateType:n,relayProtocol:i,protocol:h}:{candidateType:n,relayProtocol:i,address:l,port:u,protocol:h}}function uB(t,n){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),i.push.apply(i,a)}return i}class oue extends _r{get url(){return this._url?this._url:null}get reconnectMode(){return this._reconnectMode}set reconnectMode(n){var i;Ye(i=["tryNext","recover"]).call(i,n)&&this.resetReconnectCount(n),this._reconnectMode=n}get state(){return this._state}set state(n){n!==this._state&&(this._state=n,this._state==="reconnecting"?this.emit(ii.RECONNECTING,this.reconnectReason):this._state==="connected"?this.emit(ii.CONNECTED):this._state==="closed"?this.emit(ii.CLOSED):this._state==="failed"&&this.emit(ii.FAILED))}constructor(n,i,a,l){super(),V(this,"connectionID",0),V(this,"currentURLIndex",0),V(this,"reconnectReason",void 0),V(this,"_reconnectMode","tryNext"),V(this,"_initMutex",void 0),V(this,"_name",void 0),V(this,"_state","closed"),V(this,"_reconnectInterrupter",void 0),V(this,"_url",void 0),V(this,"_retryConfig",void 0),V(this,"_reconnectCount",0),V(this,"_forceCloseTimeout",5e3),V(this,"_onlineReconnectListener",void 0),V(this,"_closeEstablishingTransmitter",()=>{}),V(this,"_store",void 0),V(this,"_joinChannelServiceRecordIndex",void 0),V(this,"_transmitter",void 0),V(this,"_useCompress",void 0),V(this,"_inflateLength",0),V(this,"_deflateLength",0),this._store=l,this._name=n,this._retryConfig=function(u){for(var h=1;h<arguments.length;h++){var f=arguments[h]!=null?arguments[h]:{};h%2?uB(Object(f),!0).forEach(function(g){V(u,g,f[g])}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(f)):uB(Object(f)).forEach(function(g){Object.defineProperty(u,g,Object.getOwnPropertyDescriptor(f,g))})}return u}({},i),this._useCompress=a}resetReconnectCount(n){k.debug("".concat(this._name," reset reconnect count, reason: ").concat(n)),this._reconnectCount=0}close(n,i){if(this.currentURLIndex=0,this.resetReconnectCount("close"),this._reconnectInterrupter&&this._reconnectInterrupter(),this._transmitter){this._transmitter.onclose=null,this._transmitter.onopen=null,this._transmitter.onmessage=null;const a=this._transmitter;i?setTimeout(()=>a.close(),500):a.close(),this._transmitter=void 0}this.state=n?"failed":"closed",this._closeEstablishingTransmitter&&this._closeEstablishingTransmitter()}reconnect(n,i){if(!this._transmitter)return void k.warning("[".concat(this._name,"] can not reconnect, no websocket"));var a;n!==void 0&&(this.reconnectMode=n),k.debug("[".concat(this._name,"] reconnect is triggered initiative")),typeof this._joinChannelServiceRecordIndex=="number"&&((a=this._store)===null||a===void 0||a.recordJoinChannelService({status:"error",errors:[new Error(i)]},this._joinChannelServiceRecordIndex));const l=this._transmitter.onclose;this._transmitter.onclose=null,this._transmitter.close(),l&&l.bind(this._transmitter)({code:9999,reason:i})}getInflateData(){const n=this._inflateLength,i=this._deflateLength;return this.clearInflateData(),{inflateLength:n,deflateLength:i}}setInflateData(n){this._deflateLength=this._deflateLength+n.originLength,this._inflateLength=this._inflateLength+n.compressedLength}clearInflateData(){this._inflateLength=0,this._deflateLength=0}}let wc=function(t){return t[t.Default=0]="Default",t[t.Ack=1]="Ack",t}({});class aue{constructor(n,i,a){V(this,"version",1),V(this,"initialRTO",void 0),V(this,"maxBatchAckCount",void 0),V(this,"maxRTO",void 0),V(this,"initialRTT",void 0),V(this,"ID",void 0),V(this,"rtt",void 0),V(this,"packetNumber",1),V(this,"rtoRatioMap",new Map),V(this,"timeoutMap",new Map),V(this,"unorderedPacketQueue",[]),V(this,"batchAckPacketQueue",[]),V(this,"lastOrderedPacketNumber",0),V(this,"batchAckTimer",void 0),V(this,"sendImpl",void 0),V(this,"receiveImpl",void 0),this.sendImpl=n,this.receiveImpl=i,this.ID=tr(7,"transmitter-"),this.initialRTO=(a==null?void 0:a.initialRTO)!==void 0?a.initialRTO:ee("TRANSMITTER_INITIAL_RTO"),this.initialRTT=(a==null?void 0:a.initialRTT)!==void 0?a.initialRTT:ee("TRANSMITTER_INITIAL_RTT"),this.rtt=(a==null?void 0:a.initialRTT)!==void 0?a.initialRTT:ee("TRANSMITTER_INITIAL_RTT"),this.maxBatchAckCount=(a==null?void 0:a.maxBatchAckCount)!==void 0?a.maxBatchAckCount:ee("TRANSMITTER_MAX_BATCH_ACK_COUNT"),this.maxRTO=(a==null?void 0:a.maxRTO)!==void 0?a.maxRTO:ee("TRANSMITTER_MAX_RTO")}packetize(n,i){return{type:wc.Default,version:this.version,packetNumber:i,payload:n}}serialize(n){switch(n.type){case wc.Default:{let i;typeof n.payload=="string"?i=new TextEncoder().encode(n.payload):i=n.payload;const a=new ArrayBuffer(i.length+15),l=new DataView(a);return l.setUint16(0,n.version),l.setUint8(2,n.type),l.setUint32(3,n.packetNumber),_4(l,7,BigInt(n.sendTs)),new Uint8Array(l.buffer).set(i,15),a}case wc.Ack:{const i=new ArrayBuffer(16),a=new DataView(i);return a.setUint16(0,n.version),a.setUint8(2,n.type),a.setUint32(3,n.maxAckPacketNumber),a.setUint8(7,n.shift),_4(a,8,BigInt(n.ackSendTs)),i}}}deserialize(n){const i=new DataView(n),a=i.getUint16(0),l=i.getUint8(2);switch(l){case wc.Default:{const u=i.getUint32(3),h=E4(i,7),f=n.slice(15),g=new TextDecoder().decode(f);return{version:a,type:l,packetNumber:u,sendTs:Number(h),payload:g}}case wc.Ack:{const u=i.getUint32(3),h=i.getUint8(7),f=E4(i,8);return{version:a,type:l,maxAckPacketNumber:u,shift:h,ackSendTs:Number(f)}}default:throw k.error("[".concat(this.ID,"] Unrecognized packet type ").concat(l)),new Error("Unrecognized packet type ".concat(l))}}sendMessage(n){const i=this.packetize(n,this.packetNumber);this.packetNumber=this.packetNumber===4294967295?1:this.packetNumber+1;const a=this.calculateRTO(i),l=window.setTimeout(()=>{this.resendMessage(i)},a);this.timeoutMap.set(i.packetNumber,l),this.sendPacket(i)}onData(n){const i=this.deserialize(n);i.type===wc.Default?this.ack(i):i.type===wc.Ack&&(this.updateRTT(i,Math.round(performance.now())),this.clearRTO(i))}close(){this.rtt=this.initialRTT,this.packetNumber=1,Array.from(this.timeoutMap.entries()).forEach(n=>{let[i,a]=n;window.clearTimeout(a)}),this.timeoutMap=new Map,this.rtoRatioMap=new Map,this.unorderedPacketQueue=[],this.batchAckPacketQueue=[],this.lastOrderedPacketNumber=0,this.batchAckTimer!==void 0&&window.clearTimeout(this.batchAckTimer)}resendMessage(n){const i=this.calculateRTO(n),a=window.setTimeout(()=>{this.resendMessage(n)},i);this.timeoutMap.set(n.packetNumber,a),this.sendPacket(n)}calculateRTO(n){const i=this.rtoRatioMap.get(n.packetNumber);if(i===void 0)return this.rtoRatioMap.set(n.packetNumber,1),this.initialRTO;{const a=9*this.rtt/8*i;return this.rtoRatioMap.set(n.packetNumber,i+1),a>this.maxRTO?this.maxRTO:a}}updateRTT(n,i){const a=n.ackSendTs;this.rtt=this.rtt*(7/8)+(i-a-this.rtt)/8}ack(n){if(n.packetNumber===this.lastOrderedPacketNumber+1)for(this.batchAckPacketQueue.length>=this.maxBatchAckCount&&this.batchAck(),this.batchAckTimer?this.batchAckPacketQueue.push(n):(this.batchAckPacketQueue.push(n),this.batchAckTimer=window.setTimeout(()=>{this.batchAck()},this.rtt/8)),this.lastOrderedPacketNumber+=1,this.receiveImpl(n.payload);;){const i=this.unorderedPacketQueue[0];if(!i){this.unorderedPacketQueue.shift();break}this.batchAckTimer&&this.batchAck(),this.receiveImpl(i.payload),this.unorderedPacketQueue.shift(),this.lastOrderedPacketNumber+=1}else if(n.packetNumber<=this.lastOrderedPacketNumber){const i={ackSendTs:n.sendTs,maxAckPacketNumber:n.packetNumber,shift:0,type:wc.Ack,version:this.version};this.sendPacket(i)}else if(n.packetNumber>this.lastOrderedPacketNumber){this.unorderedPacketQueue[n.packetNumber-this.lastOrderedPacketNumber-2]=n;const i={ackSendTs:n.sendTs,maxAckPacketNumber:n.packetNumber,shift:0,type:wc.Ack,version:this.version};this.sendPacket(i)}}batchAck(){window.clearTimeout(this.batchAckTimer),this.batchAckTimer=void 0;const n={ackSendTs:this.batchAckPacketQueue[this.batchAckPacketQueue.length-1].sendTs,maxAckPacketNumber:this.batchAckPacketQueue[this.batchAckPacketQueue.length-1].packetNumber,shift:this.batchAckPacketQueue.length-1,type:wc.Ack,version:this.version};this.sendPacket(n),this.batchAckPacketQueue=[]}sendPacket(n){n.type===wc.Default&&(n.sendTs=Math.round(performance.now()));const i=this.serialize(n);this.sendImpl(i)}clearRTO(n){for(let i=n.maxAckPacketNumber-n.shift;i<=n.maxAckPacketNumber;i++){const a=this.timeoutMap.get(i);a!==void 0&&window.clearTimeout(a),this.timeoutMap.delete(i),this.rtoRatioMap.delete(i)}}}class dB extends oue{constructor(n,i){super(n,i,arguments.length>2&&arguments[2]!==void 0&&arguments[2],arguments.length>3?arguments[3]:void 0),V(this,"_initMutex",void 0),V(this,"_reconnectInterrupter",void 0),V(this,"_url",void 0),V(this,"_transmitter",void 0),V(this,"_addresses",void 0),V(this,"_reliableTransmission",void 0),this._initMutex=new Oi("datachannel");const{timeout:a,timeoutFactor:l}=i,u=Math.max(300,Math.floor(3*a/5)),h=Math.max(1.2,Math.floor(8*l)/10);xo.ONLINE&&(this._retryConfig.timeout=u,this._retryConfig.timeoutFactor=h),Dr.on(Qd.NETWORK_STATE_CHANGE,(f,g)=>{f!==g&&(this.resetReconnectCount("network state change: ".concat(g," -> ").concat(f)),f===xo.ONLINE?(this._retryConfig.timeout=u,this._retryConfig.timeoutFactor=h):(this._retryConfig.timeout=a,this._retryConfig.timeoutFactor=l))})}getConnection(){if(this._reliableTransmission)return this._reliableTransmission}async init(n){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5e3;this._forceCloseTimeout=i;const a=(l,u)=>{this._addresses=n,this.currentURLIndex=this._addresses.findIndex(f=>f.fingerprint||ee("FINGERPRINT"));const h=this._addresses[this.currentURLIndex];this.state="connecting",this.createTransmitterConnection(h).then(l).catch(u),this.once(ii.CLOSED,()=>u(new me(K.WS_DISCONNECT))),this.once(ii.CONNECTED,()=>l())};return this._initMutex.lock().then(l=>new We((u,h)=>{a(u,h)}).then(()=>{l()}).catch(()=>{l()}))}sendMessage(n){let i=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(!this._transmitter||!this._reliableTransmission)throw new me(K.WS_ABORT,"datachannel is not ready");try{i||(n=JSON.stringify(n)),this._reliableTransmission.sendMessage(n)}catch(a){throw new me(K.WS_ERR,"send datachannel signal message error"+a.toString())}}unbindDcCloseEventListener(){this._transmitter&&(this._transmitter.onclose=null)}sendMessageWithJSON(n){const i=JSON.stringify(n);return{compressed:i,compressedLength:i.length,origin:n}}sendMessageWithUint8Array(n){return{compressed:n,compressedLength:n.byteLength,origin:n}}createTransmitterConnection(n){return this.connectionID+=1,this._joinChannelServiceRecordIndex=void 0,this._url="dc://".concat(n.ip,":").concat(n.port),new We((i,a)=>{var l;const u=()=>{k.debug("[".concat(this._name,"] datachannel opened:"),this._url),this.reconnectMode="retry",this.state="connected",this.resetReconnectCount("opened"),i()},h=async y=>{var T;if((T=this._closeEstablishingTransmitter)===null||T===void 0||T.call(this),k.debug("[".concat(this._name,"] datachannel close ").concat(this._url,", code: ").concat(y.code,", reason: ").concat(y.reason,", current mode: ").concat(this.reconnectMode)),this._reconnectCount<this._retryConfig.maxRetryCount){this.state==="connected"&&(this.reconnectReason=y.reason,this.state="reconnecting");const A=Ta(this,ii.WILL_RECONNECT,this.reconnectMode)||this.reconnectMode,D=await this.reconnectWithAction(A);if(this.state==="closed")return void k.debug("[".concat(this.connectionID,"] dc is closed, no need to reconnect"));if(!D)return a(new me(K.WS_DISCONNECT,"datachannel reconnect failed: ".concat(y.code))),void this.close(!0);i()}else a(new me(K.WS_DISCONNECT,"datachannel close: ".concat(y.code))),this.close()},f=y=>{var T;(T=this._reliableTransmission)===null||T===void 0||T.onData(y.data)};this._transmitter&&(this._transmitter.onclose=null,this._transmitter.close()),this._reliableTransmission&&(this._reliableTransmission.close(),this._reliableTransmission=void 0),k.debug("[".concat(this._name,"] start connect, address: ").concat(JSON.stringify(n)));const g=(l=this._store)===null||l===void 0?void 0:l.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"gateway"}),_=Date.now();ri(this,ii.TO_CONNECT_DATACHANNEL,n).then(y=>{var T,A;if(!y)throw new Error("transmissonInfo not exist yet");const{transmitter:D,close:W}=y;this._transmitter=D,(T=this._store)===null||T===void 0||T.signalChannelOpen();const F=Date.now()-_;k.debug("[choose dc] dc open cost ".concat(F,"ms")),this._reliableTransmission=new aue(U=>{var z;this._transmitter&&this._transmitter.readyState==="open"&&((z=this._transmitter)===null||z===void 0||z.send(U))},U=>{typeof U=="string"&&this.emit(ii.ON_MESSAGE,U)}),this._closeEstablishingTransmitter=()=>{var U;(U=this._reliableTransmission)===null||U===void 0||U.close(),this._reliableTransmission=void 0,W()},u&&u(),D.onclose=h,D.onmessage=f,(A=this._store)===null||A===void 0||A.recordJoinChannelService({endTs:Date.now(),status:"success"},g),this._joinChannelServiceRecordIndex=g}).catch(y=>{var T;if((T=this._store)===null||T===void 0||T.recordJoinChannelService({endTs:Date.now(),status:y instanceof me&&y.code===K.WS_ABORT?"aborted":"error",errors:[y]},g),this.state!=="closed"){if(y instanceof me&&y.code===K.WS_ERR){const A=new me(K.WS_ERR,"init datachannel failed! Error: ".concat(y.toString()));return k.error("[".concat(this._name,"]").concat(A)),void a(A)}h&&h(y)}else a(new me(K.WS_DISCONNECT,"datachannel is closed: ".concat(y.toString())))})})}async reconnectWithAction(n){let i=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(this._reconnectCount>=this._retryConfig.maxRetryCount||!this._addresses||this.state==="closed")return!1;this._onlineReconnectListener||Dr.networkState!==xo.OFFLINE||(this._onlineReconnectListener=Dr.onlineWaiter&&Dr.onlineWaiter.then(()=>{this._onlineReconnectListener=void 0}));let a=!0;if(this._reconnectInterrupter=()=>{a=!1},i){const f=u_(this._reconnectCount,this._retryConfig);k.debug("[".concat(this._name,"] wait ").concat(f,"ms to reconnect datachannel, mode: ").concat(n)),await We.race([yi(f),this._onlineReconnectListener||new We(()=>{})])}if(this.state==="closed"||!a)return!1;this._reconnectCount+=1;const l=async(f,g)=>{this.emit(ii.RECONNECT_CREATE_CONNECTION,g),await this.createTransmitterConnection(f)};try{if(n==="retry"){const f=this._addresses[this.currentURLIndex];this.emit(ii.RECONNECT_WAITTING_FINISH,n),await l(f,n)}else if(n==="tryNext"){this.currentURLIndex+=1;for(let g=this.currentURLIndex;g<this._addresses.length;g++){if(this._addresses[g].fingerprint||ee("FINGERPRINT")){this.currentURLIndex=g;break}this.currentURLIndex+=1}if(this.currentURLIndex>=this._addresses.length)return k.debug("[".concat(this._name,"] the available addresses are exhausted, change to recover")),await this.reconnectWithAction("recover",!1);k.debug("[".concat(this._name,"] datachannel url length: ").concat(this._addresses.length," current index: ").concat(this.currentURLIndex));const f=this._addresses[this.currentURLIndex];this.emit(ii.RECONNECT_WAITTING_FINISH,n),await l(f,n)}else n==="recover"&&(k.debug("[".concat(this._name,"] start to failback to websocket")),this.resetReconnectCount("recover mode"),this.emit(ii.RECONNECT_WAITTING_FINISH,n),this.emit(ii.FAILBACK));return!0}catch(f){var u,h;return k.error("[".concat(this._name,"] reconnect failed"),f.toString()),f!=null&&(u=f.data)!==null&&u!==void 0&&u.desc&&Array.isArray(f.data.desc)&&f.data.desc.length&&Ye(h=f.data.desc).call(h,"dynamic key expired")?(this.emit(ii.ON_TOKEN_PRIVILEGE_DID_EXPIRE),!1):await this.reconnectWithAction(n,i)}}}class Gl extends _r{get connectionState(){return this._connectionState}set connectionState(n){n!==this._connectionState&&(this._connectionState=n,n===nn.CONNECTED?this.emit(nt.WS_CONNECTED):n===nn.RECONNECTING?this.emit(nt.WS_RECONNECTING,this._websocketReconnectReason):n===nn.CLOSED&&this.emit(nt.WS_CLOSED,this._disconnectedReason))}get currentURLIndex(){return this.websocket.currentURLIndex}get url(){return this.websocket?this.websocket.url:null}get rtt(){return this.rttRolling.mean()}constructor(n,i){super(),V(this,"_disconnectedReason",void 0),V(this,"_websocketReconnectReason",void 0),V(this,"_connectionState",nn.CLOSED),V(this,"reconnectToken",void 0),V(this,"websocket",void 0),V(this,"openConnectionTime",void 0),V(this,"clientId",void 0),V(this,"lastMsgTime",Date.now()),V(this,"uploadCache",[]),V(this,"uploadCacheInterval",void 0),V(this,"rttRolling",new Hw(5)),V(this,"pingpongTimer",void 0),V(this,"inflateDataTimer",void 0),V(this,"pingpongTimeoutCount",0),V(this,"joinResponse",void 0),V(this,"multiIpOption",void 0),V(this,"initError",void 0),V(this,"spec",void 0),V(this,"store",void 0),V(this,"onWebsocketMessage",a=>{if(a instanceof ArrayBuffer)return void this.emit(nt.ON_BINARY_DATA,a);const l=JSON.parse(a);if(this.lastMsgTime=Date.now(),Object.prototype.hasOwnProperty.call(l,"_id")){const u="res-@".concat(l._id);this.emit(u,l._result,l._message)}else if(Object.prototype.hasOwnProperty.call(l,"_type")&&(this.emit(l._type,l._message),l._type===Bt.ON_NOTIFICATION&&this.handleNotification(l._message),l._type===Bt.ON_USER_BANNED))switch(l._message.error_code){case 14:this.close(an.UID_BANNED);break;case 15:this.close(an.IP_BANNED);break;case 16:this.close(an.CHANNEL_BANNED)}}),this.clientId=n.clientId,this.spec=n,this.store=i,this.websocket=new dB("gateway-".concat(this.clientId),this.spec.retryConfig,!0,i),this.handleWebsocketEvents(),window.addEventListener("offline",()=>{this.connectionState===nn.CONNECTED&&this.reconnect("retry",Hu.OFFLINE)})}async request(n,i,a,l){const u=tr(6,""),h={_id:u,_type:n,_message:i},f=this.websocket.connectionID,g=()=>new We((W,F)=>{if(this.connectionState===nn.CONNECTED)return W();const U=()=>{this.off(nt.WS_CLOSED,z),W()},z=()=>{this.off(nt.WS_CONNECTED,U),F(new me(K.WS_ABORT))};this.once(nt.WS_CONNECTED,U),this.once(nt.WS_CLOSED,z),n!==vt.PUBLISH&&n!==vt.SUBSCRIBE&&n!==vt.UNSUBSCRIBE&&n!==vt.UNPUBLISH&&n!==vt.CONTROL&&n!==vt.RESTART_ICE||this.once(nt.DISCONNECT_P2P,()=>{F(new me(K.DISCONNECT_P2P))}),n!==vt.PUBLISH&&n!==vt.RESTART_ICE||this.once(nt.ABORT_P2P_EXECUTION,()=>{F(new me(K.DISCONNECT_P2P))})});if(this.connectionState!==nn.CONNECTING&&this.connectionState!==nn.RECONNECTING||n===vt.JOIN||n===vt.REJOIN||await g(),n===vt.LEAVE&&(this.websocket.unbindDcCloseEventListener(),l=!0),this.websocket.sendMessage(h,!0,!1),l)return;const _=new We((W,F)=>{let U=!1;const z=(ue,pe)=>{U=!0,W({isSuccess:ue==="success",message:pe||{}}),this.off(nt.WS_CLOSED,X),this.off(nt.WS_RECONNECTING,X),this.emit(nt.REQUEST_SUCCESS,n,i)};this.once("res-@".concat(u),z);const X=()=>{F(new me(K.WS_ABORT,"type: ".concat(n))),this.off(nt.WS_CLOSED,X),this.off(nt.WS_RECONNECTING,X),this.off("res-@".concat(u),z)};this.once(nt.WS_CLOSED,X),this.once(nt.WS_RECONNECTING,X),yi(ee("SIGNAL_REQUEST_TIMEOUT")).then(()=>{this.websocket.connectionID!==f||U||(k.warning("dc request timeout, type: ".concat(n)),this.emit(nt.REQUEST_TIMEOUT,n,i))})});let y=null;try{y=await _}catch(W){if(this.connectionState===nn.CLOSED||n===vt.LEAVE)throw new me(K.WS_ABORT);return!this.spec.forceWaitGatewayResponse||a?W.throw():n===vt.JOIN||n===vt.REJOIN?null:(await g(),await this.request(n,i))}if(y.isSuccess)return y.message;const T=Number(y.message.error_code||y.message.code),A=oh(T),D=new me(K.UNEXPECTED_RESPONSE,"".concat(A.desc,": ").concat(y.message.error_str),{code:T,data:y.message});return A.action==="success"?y.message:(k.warning("[".concat(this.websocket.connectionID,"] unexpected response from type ").concat(n,", error_code: ").concat(T,", message: ").concat(A.desc,", action: ").concat(A.action)),T===bt.ERR_TOO_MANY_BROADCASTERS?((n===vt.JOIN||n===vt.REJOIN)&&(this.initError=D,this.close()),D.throw()):A.action==="failed"?D.throw():A.action==="quit"?(this.initError=D,this.close(),D.throw()):(T===bt.ERR_JOIN_BY_MULTI_IP?(this.multiIpOption=y.message.option,k.warning("[".concat(this.clientId,"] detect multi ip, recover")),this.reconnect("recover",Hu.MULTI_IP)):this.reconnect(A.action,Hu.SERVER_ERROR),n===vt.JOIN||n===vt.REJOIN?null:await this.request(n,i)))}waitMessage(n,i){return new We(a=>{const l=u=>{(!i||i(u))&&(this.off(n,l),a(u))};this.on(n,l)})}uploadWRTCStats(n){if(!this.store.sessionId)return void k.warn("[".concat(this.clientId,"] no session id when upload wrtc stats"));const i={lts:Date.now(),sid:this.store.sessionId,uid:this.store.intUid,stats:n};this.upload(ih.WRTC_STATS,i)}upload(n,i){const a={_type:n,_message:i};try{this.websocket.sendMessage(a)}catch{const u=ee("MAX_UPLOAD_CACHE")||50;this.uploadCache.push(a),this.uploadCache.length>u&&this.uploadCache.splice(0,1),this.uploadCache.length>0&&!this.uploadCacheInterval&&(this.uploadCacheInterval=window.setInterval(()=>{if(this.connectionState!==nn.CONNECTED)return;const h=this.uploadCache.splice(0,1)[0];this.uploadCache.length===0&&(window.clearInterval(this.uploadCacheInterval),this.uploadCacheInterval=void 0),this.upload(h._type,h._message)},ee("UPLOAD_CACHE_INTERVAL")||2e3))}}send(n,i){const a={_type:n,_message:i};this.websocket.sendMessage(a)}init(n,i){return this.initError=void 0,this.multiIpOption=void 0,this.joinResponse=void 0,this.reconnectToken=void 0,this.openConnectionTime=void 0,new We((a,l)=>{this.once(nt.WS_CONNECTED,()=>a(this.joinResponse)),this.once(nt.WS_CLOSED,()=>l(this.initError||new me(K.WS_ABORT))),this.connectionState=nn.CONNECTING,this.websocket.init(n).catch(l),this.websocket.once(ii.FAILBACK,()=>{this.openConnectionTime===void 0&&l(new me(K.INIT_DATACHANNEL_TIMEOUT))}),this.inflateDataTimer&&window.clearInterval(this.inflateDataTimer),this.inflateDataTimer=window.setInterval(()=>{this.handleInflateData()},2e4),setTimeout(()=>{i&&this.openConnectionTime===void 0&&(k.debug("[".concat(this.clientId,"] init datachannel timeout while join with failback to websocket")),l(new me(K.INIT_DATACHANNEL_TIMEOUT)))},ee("DC_JOIN_WITH_FAILBACK"))})}close(n){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.inflateDataTimer&&(this.handleInflateData(),window.clearInterval(this.inflateDataTimer),this.inflateDataTimer=void 0),this.reconnectToken=void 0,this.joinResponse=void 0,this._disconnectedReason=n||an.LEAVE,this.connectionState=nn.CLOSED,k.debug("[".concat(this.clientId,"] ")+"will close datachannel in signal"),this.websocket.close(),n===an.FALLBACK&&(this.websocket.removeAllListeners(),this.websocket=new dB("gateway-".concat(this.clientId),this.spec.retryConfig,!0,this.store),this.handleWebsocketEvents())}async join(){if(!this.joinResponse){this.emit(nt.ABORT_P2P_EXECUTION);const n=await ri(this,nt.DATACHANNEL_CONNECTING),i=await this.request(vt.JOIN,n);if(!i)return this.emit(nt.REPORT_JOIN_GATEWAY,K.TIMEOUT,this.url||""),!1;this.joinResponse=i,this.emit(nt.JOIN_RESPONSE,this.joinResponse),this.reconnectToken=this.joinResponse.rejoin_token}return this.connectionState=nn.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),!0}async rejoin(){if(!this.reconnectToken)throw new me(K.UNEXPECTED_ERROR,"can not rejoin, no rejoin token");const n=Zd(this,nt.REQUEST_REJOIN_INFO);n.token=this.reconnectToken;const i=await this.request(vt.REJOIN,n);return!!i&&(this.connectionState=nn.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),i.peers&&i.peers.forEach(a=>{this.emit(Bt.ON_USER_ONLINE,{uid:a.uid}),a.audio&&this.emit(Bt.ON_ADD_AUDIO_STREAM,{uid:a.uid,uint_id:a.uint_id,audio:!0,ssrcId:a.audio_ssrc}),a.video&&this.emit(Bt.ON_ADD_VIDEO_STREAM,{uid:a.uid,uint_id:a.uint_id,video:!0,ssrcId:a.video_ssrc}),a.audio_mute?this.emit(Bt.MUTE_AUDIO,{uid:a.uid}):this.emit(Bt.UNMUTE_AUDIO,{uid:a.uid}),a.video_mute?this.emit(Bt.MUTE_VIDEO,{uid:a.uid}):this.emit(Bt.UNMUTE_VIDEO,{uid:a.uid}),a.audio_enable_local?this.emit(Bt.ENABLE_LOCAL_AUDIO,{uid:a.uid}):this.emit(Bt.DISABLE_LOCAL_AUDIO,{uid:a.uid}),a.video_enable_local?this.emit(Bt.ENABLE_LOCAL_VIDEO,{uid:a.uid}):this.emit(Bt.DISABLE_LOCAL_VIDEO,{uid:a.uid}),a.audio||a.video||this.emit(Bt.ON_REMOVE_STREAM,{uid:a.uid,uint_id:a.uint_id})}),!0)}reconnect(n,i){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.websocket.reconnect(n,i)}handleNotification(n){k.debug("[".concat(this.clientId,"] receive notification: "),n);const i=oh(n.code);if(i.action!=="success"){if(i.action!=="failed")return i.action==="quit"?(i.desc==="ERR_REPEAT_JOIN_CHANNEL"&&this.close(an.UID_BANNED),void this.close()):void this.reconnect(i.action,Hu.SERVER_ERROR);k.error("[".concat(this.clientId,"] ignore error: "),i.desc)}}handlePingPong(){if(!this.websocket||this.websocket.state!=="connected")return;this.pingpongTimeoutCount>0&&this.rttRolling.add(3e3),this.pingpongTimeoutCount+=1;const n=ee("PING_PONG_TIME_OUT"),i=Date.now();this.pingpongTimeoutCount>=n&&(k.warning("PINGPONG Timeout. Last Socket Message: ".concat(i-this.lastMsgTime,"ms")),i-this.lastMsgTime>ee("WEBSOCKET_TIMEOUT_MIN"))?this.reconnect("retry",Hu.TIMEOUT):this.request(vt.PING,void 0,!0).then(()=>{this.pingpongTimeoutCount=0;const a=Date.now()-i;this.rttRolling.add(a),ee("REPORT_STATS")&&this.send(vt.PING_BACK,{pingpongElapse:a})}).catch(a=>{})}handleInflateData(){const{inflateLength:n,deflateLength:i}=this.websocket.getInflateData();n!==0&&i!==0&&this.upload(ih.WS_INFLATE_DATA_LENGTH,{ws_deflate_length:i,ws_inflate_length:n})}handleWebsocketEvents(){this.websocket.on(ii.RECONNECT_WAITTING_FINISH,n=>{this.emit(nt.WS_RECONNECT_WAITTING_FINISH,n)}),this.websocket.on(ii.RECONNECT_CREATE_CONNECTION,n=>{this.emit(nt.WS_RECONNECT_CREATE_CONNECTION,n)}),this.websocket.on(ii.ON_MESSAGE,this.onWebsocketMessage),this.websocket.on(ii.CLOSED,()=>{this.connectionState=nn.CLOSED}),this.websocket.on(ii.FAILED,()=>{this._disconnectedReason=an.NETWORK_ERROR,this.connectionState=nn.CLOSED}),this.websocket.on(ii.RECONNECTING,n=>{this._websocketReconnectReason=n,this.joinResponse=void 0,this.connectionState===nn.CONNECTED?this.connectionState=nn.RECONNECTING:this.connectionState=nn.CONNECTING}),this.websocket.on(ii.WILL_RECONNECT,(n,i)=>{if(Zd(this,nt.IS_P2P_DISCONNECTED)&&n==="retry")return k.debug("".concat(this.clientId," reconnect mode is retry, but p2p lost, change to tryNext")),this.reconnectToken=void 0,this.emit(nt.NEED_RENEW_SESSION),this.emit(nt.DISCONNECT_P2P),i("tryNext");n!=="retry"&&(k.debug("".concat(this.clientId," websockt will_connect event, renewSession reconnectMode is ").concat(n)),this.reconnectToken=void 0,this.emit(nt.NEED_RENEW_SESSION),this.emit(nt.DISCONNECT_P2P)),i(n)}),this.websocket.on(ii.CONNECTED,()=>{this.openConnectionTime=Date.now(),this.reconnectToken?this.rejoin().catch(n=>{k.warning("[".concat(this.clientId,"] rejoin failed ").concat(n)),this.reconnect("tryNext",Hu.SERVER_ERROR)}):this.join().catch(n=>{if(this.emit(nt.REPORT_JOIN_GATEWAY,n.message||n.code,this.url||""),n instanceof me&&n.code===K.UNEXPECTED_RESPONSE&&n.data.code===bt.ERR_NO_AUTHORIZED)return k.warning("[".concat(this.clientId,"] reconnect no authorized, recover")),void this.reconnect("recover",Hu.SERVER_ERROR);k.error("[".concat(this.clientId,"] join gateway request failed"),n.toString()),this.spec.forceWaitGatewayResponse?this.reconnect("tryNext",Hu.SERVER_ERROR):(this.initError=n,this.close())})}),this.websocket.on(ii.REQUEST_NEW_URLS,(n,i)=>{ri(this,nt.REQUEST_RECOVER,this.multiIpOption).then(n).catch(i)}),this.websocket.on(ii.ON_TOKEN_PRIVILEGE_DID_EXPIRE,()=>{this.emit(Bt.ON_TOKEN_PRIVILEGE_DID_EXPIRE)}),this.websocket.on(ii.TO_CONNECT_DATACHANNEL,async(n,i,a)=>ri(this,nt.DATACHANNEL_PRECONNECT,n).then(i).catch(a)),this.websocket.on(ii.FAILBACK,()=>{this.openConnectionTime!==void 0&&this.emit(nt.DATACHANNEL_FAILBACK)})}}class ah extends _r{constructor(n,i){super(),V(this,"signal",void 0),V(this,"token",void 0),V(this,"tokenTimeout",void 0),V(this,"tokenInterval",void 0),V(this,"_sequence",0),V(this,"userMap",new Map),V(this,"encoder",new TextEncoder),this.signal=n,this.token=i;const a=()=>{this.signal.connectionState===nn.CONNECTED&&this.check(),this.userMap.size===0?this.tokenInterval=window.setTimeout(a,1e3):this.tokenInterval=window.setTimeout(a,3*ee("P2P_TOKEN_INTERVAL"))};a()}async send(n,i,a,l,u){var h,f,g;if(this.userMap.size===0)return;const _=Array.from(Tc(h=this.userMap).call(h))[0].token;typeof i!="string"&&(i=JSON.stringify(i)),l=(f=l)!==null&&f!==void 0?f:tr(6,""),u=(g=u)!==null&&g!==void 0?g:this._sequence++;const y={_id:l,_type:n,_seq:u,_message:i,token:"".concat(this.token,"_").concat(_)};ee("SHOW_P2P_LOG")&&k.debug("send message",y,"noNeedResponse : ".concat(a)),this.splitMessage(JSON.stringify(y)).forEach(A=>{this.signal.request(vt.DATA_STREAM,{payload:Vu(this.encoder.encode(A))})});const T=new We((A,D)=>{const W=window.setTimeout(()=>{this.off("res-@".concat(l,"_ack"),F),this.off("res-@".concat(l),z),this.off(Kp.ABORT,U),k.debug("[external-signal] request timeout, type: ".concat(n,", requestId: ").concat(l)),this.userMap.size===0?D(new Ce(K.INVALID_REMOTE_USER)):D(new Ce(K.TIMEOUT))},ee("EXTERNAL_SIGNAL_REQUEST_TIMEOUT")),F=()=>{W&&window.clearTimeout(W),this.off(Kp.ABORT,U),a&&A()},U=()=>{W&&window.clearTimeout(W),this.off("res-@".concat(l,"_ack"),F),this.off("res-@".concat(l),z),D(new Ce(K.EXTERNAL_SIGNAL_ABORT,"type: ".concat(n,", requestId: ").concat(l)))};this.once(Kp.ABORT,U),this.once("res-@".concat(l,"_ack"),F);const z=(ue,pe)=>{X=!0,W&&window.clearTimeout(W),this.off("res-@".concat(l,"_ack"),F),this.off(Kp.ABORT,U),ue==="success"?A(pe):D(new Ce(K.P2P_MESSAGE_FAILED,"request ".concat(n," failed, requestId: ").concat(l)))};let X=!1;a||(this.once("res-@".concat(l),z),yi(ee("SIGNAL_REQUEST_TIMEOUT")).then(()=>{X||k.warning("external_signal request timeout, type: ".concat(n,", requestId: ").concat(l,", ").concat(y))}))});try{return await T}catch(A){if(A.code===K.TIMEOUT)return await this.send(n,i,a,l,u);throw A}}onMessage(n){var i;const{_uid:a}=n;let l,u=this.userMap.get(a);if(u)l=u.splitMessageMap;else{if(this.userMap.size>0||!("_type"in n)||n._type!==Wr.CHECK)return;const{token:_}=n;l=new Map,u={uid:a,isStart:!0,token:_,splitMessageMap:l,nextExpectedSequenceNumber:0,receivedMessagesMap:new Map},this.userMap.set(a,u),this.signal.emit(Bt.ON_USER_ONLINE,{uid:a}),this.handleUserOnline()}if("id"in n&&"total"in n){var h;const{id:_,total:y}=n,T=(h=l.get(_))!==null&&h!==void 0?h:[];if(T.push(n),l.has(_)||l.set(_,T),T.length!==y)return;{const A=t0(T).call(T,(D,W)=>D.index-W.index).map(D=>D.payload).join("");l.delete(_),(n=JSON.parse(A))._uid=a}}const{_type:f,token:g}=n;if(Ye(i=[Wr.ACK,Wr.CHECK]).call(i,f))return f===Wr.CHECK&&this.handleCheckToken(u,g),void this.receiveMessage(n);g==="".concat(u.token,"_").concat(this.token)?this.handleReceivedMessage(n):k.debug('Receive unexpected message", '.concat(g,", cur_token: ").concat(u.token,"_").concat(this.token),n)}check(){const n={_id:tr(6,""),token:this.token,_type:Wr.CHECK};ee("SHOW_P2P_LOG")&&k.debug("send message",n),this.signal.request(vt.DATA_STREAM,{payload:Vu(this.encoder.encode(JSON.stringify(n)))})}ack(n){const i={_id:n,_type:Wr.ACK,token:this.token};ee("SHOW_P2P_LOG")&&k.debug("send message",i),this.signal.request(vt.DATA_STREAM,{payload:Vu(this.encoder.encode(JSON.stringify(i)))})}response(n,i,a){this.send(Wr.RESPONSE,JSON.stringify({success:!a,message:i}),!0,n)}handleReceivedMessage(n){const i=()=>{this.userMap.forEach(_=>{const{receivedMessagesMap:y,nextExpectedSequenceNumber:T}=_;for(;y.has(T);){const A=y.get(T);y.delete(T),this.receiveMessage(A),_.nextExpectedSequenceNumber++}})};if(!n)return void i();const{_uid:a,_seq:l}=n,u=this.userMap.get(a),{receivedMessagesMap:h,isStart:f,nextExpectedSequenceNumber:g}=u;if(l<g)return this.ack(n._id),void k.debug("[external-signal] receive old message, seq: ".concat(l,", ").concat(n._message));h.set(l,n),f&&l===g&&(this.receiveMessage(n),h.delete(g),u.nextExpectedSequenceNumber++,i())}receiveMessage(n){const{_id:i,_type:a,_message:l,_uid:u}=n;if(ee("SHOW_P2P_LOG")&&k.debug("receive message",n),i){let h;switch(n._type!==Wr.ACK&&(l&&(h=JSON.parse(l)),this.ack(n._id)),n._type){case Wr.CANDIDATE:case Wr.CONTROL:this.signal.emit(a,h,u);break;case Wr.PUBLISH:case Wr.UNPUBLISH:case Wr.RESTART_ICE:case Wr.CALL:h.uid=u,ri(this.signal,a,h).then(f=>{this.response(n._id,f)}).catch(()=>{this.response(n._id,void 0,!0)});break;case Wr.ACK:this.getListeners("res-@".concat(i,"_ack")).length>0&&this.emit("res-@".concat(i,"_ack"));break;case Wr.RESPONSE:{const{success:f,message:g}=h;this.emit("res-@".concat(i),f?"success":"failed",g);break}}}}splitMessage(n){if(n.length<ah.MAX_MESSAGE_SIZE)return[n];const i=[],{remoteToken:a}=JSON.parse(n),l=tr(6,"");let u=0,h=800;const f=Math.ceil(n.length/h);for(;n.length>0;){u++;const g={id:l,index:u,total:f,payload:n.slice(0,h),token:"".concat(this.token,"_").concat(a)};JSON.stringify(g).length>ah.MAX_MESSAGE_SIZE?h-=50:(i.push(g),n=n.slice(h))}return i.map(g=>JSON.stringify(g))}handleCheckToken(n,i){return n.token!==i?(k.debug("token changed, from ".concat(n.token," to ").concat(i)),this.reset(n.uid,i),!1):(this.tokenTimeout&&(window.clearTimeout(this.tokenTimeout),this.tokenTimeout=void 0),this.tokenTimeout=window.setTimeout(()=>{k.debug("token timeout, ".concat(i)),this.reset(n.uid)},ee("MAX_P2P_TIMEOUT")),!0)}async handleUserOnline(){const n=await ri(this.signal,Wr.CALL,void 0),i=await this.send(Wr.CALL,n);this.signal.emit(nt.P2P_CONNECTION,i,!0)}async reset(n,i){const a=this.userMap.get(n);a&&(this.emit(Kp.ABORT),this.signal.emit(Bt.ON_USER_OFFLINE,{uid:a.uid,reason:Xle.P2P_TOKEN_CHANGED}),this._sequence=0,this.userMap.clear(),i||(k.debug("change local token from ".concat(i," to ").concat(i)),this.token=tr(6,"")))}clear(){this._sequence=0,this.userMap.clear(),this.tokenInterval&&window.clearTimeout(this.tokenInterval),this.tokenInterval=void 0,this.tokenTimeout&&window.clearTimeout(this.tokenTimeout),this.tokenTimeout=void 0,this.emit(Kp.ABORT)}}V(ah,"MAX_SIZE",1),V(ah,"MAX_MESSAGE_SIZE",1024);class hB extends _r{get connectionState(){return this._connectionState}set connectionState(n){n!==this._connectionState&&(this._connectionState=n,n===nn.CONNECTED?this.emit(nt.WS_CONNECTED):n===nn.RECONNECTING?this.emit(nt.WS_RECONNECTING,this._websocketReconnectReason):n===nn.CLOSED&&this.emit(nt.WS_CLOSED,this._disconnectedReason))}get currentURLIndex(){return this.websocket.currentURLIndex}get url(){return this.websocket&&this.websocket.url||null}get rtt(){return this.rttRolling.mean()}constructor(n,i){super(),V(this,"_disconnectedReason",void 0),V(this,"_websocketReconnectReason",void 0),V(this,"_connectionState",nn.CLOSED),V(this,"reconnectToken",void 0),V(this,"p2pToken",void 0),V(this,"websocket",void 0),V(this,"openConnectionTime",void 0),V(this,"clientId",void 0),V(this,"lastMsgTime",Date.now()),V(this,"uploadCache",[]),V(this,"uploadCacheInterval",void 0),V(this,"rttRolling",new Hw(5)),V(this,"pingpongTimer",void 0),V(this,"pingpongTimeoutCount",0),V(this,"joinResponse",void 0),V(this,"multiIpOption",void 0),V(this,"initError",void 0),V(this,"spec",void 0),V(this,"store",void 0),V(this,"_external_signal",void 0),V(this,"onWebsocketMessage",a=>{if(a.data instanceof ArrayBuffer)return void this.emit(nt.ON_BINARY_DATA,a.data);const l=JSON.parse(a.data);if(this.lastMsgTime=Date.now(),Object.prototype.hasOwnProperty.call(l,"_id")){const u="res-@".concat(l._id);this.emit(u,l._result,l._message)}else if(Object.prototype.hasOwnProperty.call(l,"_type")){switch(l._type){case Bt.ON_DATA_STREAM:return void this.handleDataStream(l._message);case Bt.MUTE_AUDIO:case Bt.MUTE_VIDEO:case Bt.ON_P2P_LOST:case Bt.ON_USER_ONLINE:return;case Bt.ON_USER_OFFLINE:const{uid:u}=l._message;return k.debug("[".concat(this.clientId,"] user-offline uid: ").concat(u)),void this._external_signal.reset(u)}if(this.emit(l._type,l._message),l._type===Bt.ON_NOTIFICATION&&this.handleNotification(l._message),l._type===Bt.ON_USER_BANNED)switch(l._message.error_code){case 14:this.close(an.UID_BANNED);break;case 15:this.close(an.IP_BANNED);break;case 16:this.close(an.CHANNEL_BANNED)}if(l._type===Bt.ON_USER_LICENSE_BANNED)switch(l._message.error_code){case bt.ERR_LICENSE_MISSING:this.close(an.LICENSE_MISSING);break;case bt.ERR_LICENSE_EXPIRED:this.close(an.LICENSE_EXPIRED);break;case bt.ERR_LICENSE_MINUTES_EXCEEDED:this.close(an.LICENSE_MINUTES_EXCEEDED);break;case bt.ERR_LICENSE_PERIOD_INVALID:this.close(an.LICENSE_PERIOD_INVALID);break;case bt.ERR_LICENSE_MULTIPLE_SDK_SERVICE:this.close(an.LICENSE_MULTIPLE_SDK_SERVICE);break;case bt.ERR_LICENSE_ILLEGAL:this.close(an.LICENSE_ILLEGAL);break;default:this.close()}}}),this.clientId=n.clientId,this.spec=n,this.store=i,this.websocket=new b0("gateway-".concat(this.clientId),this.spec.retryConfig,!0,ee("JOIN_GATEWAY_USE_DUAL_DOMAIN"),ee("JOIN_GATEWAY_USE_443PORT_ONLY"),i),this.handleWebsocketEvents(),window.addEventListener("offline",()=>{this.connectionState===nn.CONNECTED&&this.reconnect("retry",zi.OFFLINE)}),this.p2pToken=tr(6,""),this._external_signal=new ah(this,this.p2pToken)}async request(n,i,a,l){const u=tr(6,""),h={_id:u,_type:n,_message:i},f=this.websocket.connectionID,g=()=>new We((W,F)=>{if(this.connectionState===nn.CONNECTED)return W();const U=()=>{this.off(nt.WS_CLOSED,z),W()},z=()=>{this.off(nt.WS_CONNECTED,U),F(new Ce(K.WS_ABORT))};this.once(nt.WS_CONNECTED,U),this.once(nt.WS_CLOSED,z)});if(this.connectionState!==nn.CONNECTING&&this.connectionState!==nn.RECONNECTING||n===vt.JOIN||n===vt.REJOIN||await g(),this.websocket.sendMessage(h,!0),l)return;const _=new We((W,F)=>{let U=!1;const z=(ue,pe)=>{U=!0,W({isSuccess:ue==="success",message:pe||{}}),this.off(nt.WS_CLOSED,X),this.off(nt.WS_RECONNECTING,X),this.emit(nt.REQUEST_SUCCESS,n,i)};this.once("res-@".concat(u),z);const X=()=>{F(new Ce(K.WS_ABORT,"type: ".concat(n))),this.off(nt.WS_CLOSED,X),this.off(nt.WS_RECONNECTING,X),this.off("res-@".concat(u),z)};this.once(nt.WS_CLOSED,X),this.once(nt.WS_RECONNECTING,X),yi(ee("SIGNAL_REQUEST_TIMEOUT")).then(()=>{this.websocket.connectionID!==f||U||(k.warning("[".concat(this.clientId,"] ws request timeout, type: ").concat(n)),this.emit(nt.REQUEST_TIMEOUT,n,i))})});let y=null;try{y=await _}catch(W){if(this.connectionState===nn.CLOSED||n===vt.LEAVE)throw new Ce(K.WS_ABORT);return!this.spec.forceWaitGatewayResponse||a?W.throw():n===vt.JOIN||n===vt.REJOIN?null:(await g(),await this.request(n,i))}if(y.isSuccess)return y.message;const T=Number(y.message.error_code||y.message.code),A=oh(T),D=new Ce(K.UNEXPECTED_RESPONSE,"".concat(A.desc,": ").concat(y.message.error_str),{code:T,data:y.message});return A.action==="success"?y.message:(k.warning("[".concat(this.clientId,"] [").concat(this.websocket.connectionID,"] unexpected response from type ").concat(n,", error_code: ").concat(T,", message: ").concat(A.desc,", action: ").concat(A.action)),T===bt.ERR_TOO_MANY_BROADCASTERS?((n===vt.JOIN||n===vt.REJOIN)&&(this.initError=D,this.close()),D.throw()):A.action==="failed"?D.throw():A.action==="quit"?(this.initError=D,this.close(),D.throw()):(T===bt.ERR_JOIN_BY_MULTI_IP?(this.multiIpOption=y.message.option,k.warning("[".concat(this.clientId,"] detect multi ip, recover")),this.reconnect("recover",zi.MULTI_IP)):this.reconnect(A.action,zi.SERVER_ERROR),n===vt.JOIN||n===vt.REJOIN?null:await this.request(n,i)))}waitMessage(n,i){return new We(a=>{const l=u=>{(!i||i(u))&&(this.off(n,l),a(u))};this.on(n,l)})}uploadWRTCStats(n){if(!this.store.sessionId)return void k.warn("[".concat(this.clientId,"] no session id when upload wrtc stats"));const i={lts:Date.now(),sid:this.store.sessionId,uid:this.store.intUid,stats:n};this.upload(ih.WRTC_STATS,i)}upload(n,i){const a={_type:n,_message:i};try{this.websocket.sendMessage(a)}catch{const u=ee("MAX_UPLOAD_CACHE")||50;this.uploadCache.push(a),this.uploadCache.length>u&&this.uploadCache.splice(0,1),this.uploadCache.length>0&&!this.uploadCacheInterval&&(this.uploadCacheInterval=window.setInterval(()=>{if(this.connectionState!==nn.CONNECTED)return;const h=this.uploadCache.splice(0,1)[0];this.uploadCache.length===0&&(window.clearInterval(this.uploadCacheInterval),this.uploadCacheInterval=void 0),this.upload(h._type,h._message)},ee("UPLOAD_CACHE_INTERVAL")||2e3))}}send(n,i){const a={_type:n,_message:i};this.websocket.sendMessage(a)}async sendExtensionMessage(n,i,a){return await this._external_signal.send(n,i,a)}init(n){return this.initError=void 0,this.multiIpOption=void 0,this.joinResponse=void 0,this.reconnectToken=void 0,this.openConnectionTime=void 0,new We((i,a)=>{this.once(nt.WS_CONNECTED,()=>i(this.joinResponse)),this.once(nt.WS_CLOSED,()=>a(this.initError||new Ce(K.WS_ABORT))),this.connectionState=nn.CONNECTING,this.websocket.init(n).catch(a)})}close(n){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.reconnectToken=void 0,this.joinResponse=void 0,this._external_signal.clear(),this._disconnectedReason=n||an.LEAVE,this.connectionState=nn.CLOSED,k.debug("[".concat(this.clientId,"] ")+"will close websocket in signal"),this.websocket.close(),n===an.FALLBACK&&(this.websocket.removeAllListeners(),this.websocket=new b0("gateway-".concat(this.clientId),this.spec.retryConfig,!0,ee("JOIN_GATEWAY_USE_DUAL_DOMAIN"),ee("JOIN_GATEWAY_USE_443PORT_ONLY"),this.store),this.handleWebsocketEvents()),this.p2pToken=tr(6,""),this._external_signal.clear(),this._external_signal=new ah(this,this.p2pToken)}async join(){if(!this.joinResponse){this.emit(nt.ABORT_P2P_EXECUTION);const n=await ri(this,nt.REQUEST_JOIN_INFO),i=await this.request(vt.JOIN,n);if(!i)return this.emit(nt.REPORT_JOIN_GATEWAY,K.TIMEOUT,this.url||""),!1;this.joinResponse=i,this.emit(nt.JOIN_RESPONSE,this.joinResponse),this.reconnectToken=this.joinResponse.rejoin_token}return this.connectionState=nn.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),!0}reconnect(n,i){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.websocket.reconnect(n,i)}handleDataStream(n){try{var i;const a=th(n.payload),l=new TextDecoder().decode(a),u=JSON.parse(l);"total"in u&&"id"in u||Ye(i=Object.values(Wr)).call(i,u._type)?(u._uid=n.uid,this._external_signal.onMessage(u)):this.emit(Bt.ON_DATA_STREAM,n)}catch{this.emit(Bt.ON_DATA_STREAM,n)}}handleNotification(n){k.debug("[".concat(this.clientId,"] receive notification: "),n);const i=oh(n.code);if(i.action!=="success"){if(i.action!=="failed")return i.action==="quit"?(i.desc==="ERR_REPEAT_JOIN_CHANNEL"&&this.close(an.UID_BANNED),void this.close()):void this.reconnect(i.action,zi.SERVER_ERROR);k.error("[".concat(this.clientId,"] ignore error: "),i.desc)}}handlePingPong(){if(!this.websocket||this.websocket.state!=="connected")return;this.pingpongTimeoutCount>0&&this.rttRolling.add(3e3),this.pingpongTimeoutCount+=1;const n=ee("PING_PONG_TIME_OUT"),i=Date.now();this.pingpongTimeoutCount>=n&&(k.warning("[".concat(this.clientId,"] PINGPONG Timeout. Last Socket Message: ").concat(i-this.lastMsgTime,"ms")),i-this.lastMsgTime>ee("WEBSOCKET_TIMEOUT_MIN"))?this.reconnect("retry",zi.TIMEOUT):this.request(vt.PING,void 0,!0).then(()=>{this.pingpongTimeoutCount=0;const a=Date.now()-i;this.rttRolling.add(a),ee("REPORT_STATS")&&this.send(vt.PING_BACK,{pingpongElapse:a})}).catch(a=>{})}handleWebsocketEvents(){this.websocket.on(kt.RECONNECT_WAITTING_FINISH,n=>{this.emit(nt.WS_RECONNECT_WAITTING_FINISH,n)}),this.websocket.on(kt.RECONNECT_CREATE_CONNECTION,n=>{this.emit(nt.WS_RECONNECT_CREATE_CONNECTION,n)}),this.websocket.on(kt.ON_MESSAGE,this.onWebsocketMessage),this.websocket.on(kt.CLOSED,()=>{this.connectionState=nn.CLOSED}),this.websocket.on(kt.FAILED,()=>{this._disconnectedReason=an.NETWORK_ERROR,this.connectionState=nn.CLOSED}),this.websocket.on(kt.RECONNECTING,n=>{this._websocketReconnectReason=n,this.joinResponse=void 0,this.connectionState===nn.CONNECTED?this.connectionState=nn.RECONNECTING:this.connectionState=nn.CONNECTING}),this.websocket.on(kt.WILL_RECONNECT,(n,i,a)=>{n!=="retry"?(k.debug("".concat(this.clientId," websocket will_connect event, renewSession reconnectMode is ").concat(n)),this.reconnectToken=void 0,this.emit(nt.NEED_RENEW_SESSION)):k.debug("".concat(this.clientId," reconnect mode is retry, no need to renew session")),a(n)}),this.websocket.on(kt.CONNECTED,()=>{this.openConnectionTime=Date.now(),this.join().catch(n=>{if(this.emit(nt.REPORT_JOIN_GATEWAY,n.message||n.code,this.url||""),n instanceof Ce&&n.code===K.UNEXPECTED_RESPONSE&&n.data.code===bt.ERR_NO_AUTHORIZED)return k.warning("[".concat(this.clientId,"] reconnect no authorized, recover")),void this.reconnect("recover",zi.SERVER_ERROR);k.error("[".concat(this.clientId,"] join gateway request failed"),n.toString()),this.spec.forceWaitGatewayResponse?this.reconnect("tryNext",zi.SERVER_ERROR):(this.initError=n,this.close())})}),this.websocket.on(kt.REQUEST_NEW_URLS,(n,i)=>{ri(this,nt.REQUEST_RECOVER,this.multiIpOption).then(n).catch(i)}),this.websocket.on(kt.ON_TOKEN_PRIVILEGE_DID_EXPIRE,()=>{this.emit(Bt.ON_TOKEN_PRIVILEGE_DID_EXPIRE)})}}function pB(t,n){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),i.push.apply(i,a)}return i}function $s(t){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?pB(Object(i),!0).forEach(function(a){V(t,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):pB(Object(i)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(i,a))})}return t}const c1=new Map;class sue extends _r{get state(){return this._state}set state(n){if(n===this._state)return;const i=this._state;this._state=n,n==="DISCONNECTED"&&this._disconnectedReason?this.emit(Hr.CONNECTION_STATE_CHANGE,n,i,this._disconnectedReason):this.emit(Hr.CONNECTION_STATE_CHANGE,n,i)}get joinGatewayStartTime(){return this._joinGatewayStartTime}set joinGatewayStartTime(n){k.debug("[".concat(this.store.clientId,"] set joinGatewayStartTime at ").concat(n)),this._joinGatewayStartTime=n}constructor(n,i){super(),V(this,"store",void 0),V(this,"joinInfo",void 0),V(this,"key",void 0),V(this,"ntpOffset",0),V(this,"signal",void 0),V(this,"role",void 0),V(this,"inChannelInfo",{joinAt:null,duration:0}),V(this,"spec",void 0),V(this,"_state","DISCONNECTED"),V(this,"_statsCollector",void 0),V(this,"_disconnectedReason",void 0),V(this,"isSignalRecover",!1),V(this,"hasChangeBGPAddress",!1),V(this,"trafficStatsInterval",void 0),V(this,"networkQualityInterval",void 0),V(this,"_joinGatewayStartTime",0),V(this,"_signalTimeout",!1),V(this,"_clientRoleOptions",void 0),V(this,"_isProactiveJoin",!1),this.store=n,this.spec=i,this.signal=this.store.useP2P?new hB($s($s({},i),{},{retryConfig:i.websocketRetryConfig}),n):this.store.useDataChannel?new Gl($s($s({},i),{},{retryConfig:i.websocketRetryConfig}),n):new oB($s($s({},i),{},{retryConfig:i.websocketRetryConfig}),n),this._statsCollector=i.statsCollector,this.role=i.role||"audience",this._clientRoleOptions=i.clientRoleOptions,this.handleSignalEvents()}async join(n,i,a){if(this.signal instanceof Gl){let g=!1;n.cloudProxyServer!=="disabled"?(k.debug("[".concat(this.store.clientId,"] Dc is not supported, because cloudProxyServer are not supported (").concat(n.cloudProxyServer,")")),g=!0):"".concat(n.apResponse.cid,"_").concat(n.apResponse.cert).length>255||"".concat(n.apResponse.cid,"_").concat(n.apResponse.cert).length<22?(k.debug("[".concat(this.store.clientId,"] Dc is not supported, because ticket length is incorrect, it has to be between 22 and 255")),g=!0):n.apResponse.addresses.some(_=>_.fingerprint)||ee("FINGERPRINT")||(k.debug("[".concat(this.store.clientId,"] Dc is not supported, because fingerprint does not exist")),g=!0),g&&this.resetSignal()}this.store.joinGatewayStart(),n.cloudProxyServer!=="disabled"&&(this.hasChangeBGPAddress=!0);const l=Date.now();let u=c1.get(n.cname);if(u||(u=new Map,c1.set(n.cname,u)),this._isProactiveJoin=!0,u.has(n.uid)){const g=new me(K.UID_CONFLICT);throw ht.joinGateway(n.sid,{lts:l,succ:!1,ec:g.message,addr:null,uid:n.uid,cid:n.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!n.proxyServer,signalChannel:this.signal instanceof Gl?"1":"0"}),this._isProactiveJoin=!1,g}u.set(n.uid,!0),this.joinInfo=n,this.key=i;let h=0;this.joinGatewayStartTime=l;const f=n.proxyServer;try{let g;if(k.debug("[".concat(this.store.clientId,"] use ").concat(this.signal instanceof Gl?"datachannel":"websocket"," join uid ").concat(h)),this.signal instanceof Gl)g=await this.signal.init(n.apResponse.addresses,a);else{const _=n.gatewayAddrs.map(y=>{let{address:T}=y;const[A,D]=T.split(":"),W={host:A,port:D};return n.proxyServer&&(W.proxy=n.proxyServer),W});g=await this.signal.init(_,a)}h=g.uid,k.debug("[".concat(this.store.clientId,"] ").concat(this.signal instanceof Gl?"datachannel":"websocket"," join uid ").concat(h," cost ").concat(Date.now()-this.joinGatewayStartTime))}catch(g){throw g&&g.code===K.INIT_WEBSOCKET_TIMEOUT?(k.warning("[".concat(this.store.clientId,"] User join failed"),g.toString()),g):g&&g.code===K.INIT_DATACHANNEL_TIMEOUT?(k.warning("[".concat(this.store.clientId,"] User join datachannel failed"),g.toString()),this.resetSignal(),g):(k.error("[".concat(this.store.clientId,"] User join failed"),g.toString()),ht.joinGateway(n.sid,{lts:l,succ:!1,ec:g.message,addr:this.signal.url,uid:n.uid,cid:n.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!f,signalChannel:this.signal instanceof Gl?"1":"0"}),this._isProactiveJoin=!1,u.delete(n.uid),this.signal.close(),g)}return this.state="CONNECTED",this.inChannelInfo.joinAt=Date.now(),k.debug("[".concat(this.store.clientId,"] Connected to gateway server")),this.trafficStatsInterval=window.setInterval(()=>{this.updateTrafficStats().catch(g=>{k.warning("[".concat(this.store.clientId,"] get traffic stats error"),g.toString())})},3e3),this.networkQualityInterval=window.setInterval(()=>{navigator&&navigator.onLine!==void 0&&!navigator.onLine?this.emit(Hr.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6}):this._signalTimeout?this.emit(Hr.NETWORK_QUALITY,{downlinkNetworkQuality:5,uplinkNetworkQuality:5}):this.state==="CONNECTED"&&this._statsCollector.trafficStats?this.emit(Hr.NETWORK_QUALITY,{uplinkNetworkQuality:cB(this._statsCollector.trafficStats.B_unq),downlinkNetworkQuality:cB(this._statsCollector.trafficStats.B_dnq)}):this.emit(Hr.NETWORK_QUALITY,{uplinkNetworkQuality:0,downlinkNetworkQuality:0})},2e3),this.store.joinGatewayEnd(),h}async leave(){let n=arguments.length>0&&arguments[0]!==void 0&&arguments[0],i=arguments.length>1?arguments[1]:void 0;if(this.state!=="DISCONNECTED"){i!==an.FALLBACK&&(this.state="DISCONNECTING");try{n||this.signal.connectionState!==nn.CONNECTED||await function(a,l){return l===1/0?a:We.race([a,qce(l)])}(this.signal.request(vt.LEAVE,void 0,!0),3e3)}catch(a){k.warning("[".concat(this.store.clientId,"] leave request failed, ignore"),a)}this.signal.close(i),i!==an.FALLBACK&&(this.state="DISCONNECTED"),this.reset()}}async publish(n,i,a){if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new me(K.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));const l={state:"offer",p2p_id:this.store.p2pId,ortc:i,mode:this.spec.mode,extend:ee("PUB_EXTEND"),twcc:!!ee("PUBLISH_TWCC"),rtx:!!ee("USE_PUB_RTX")};try{return(await this.signal.request(vt.PUBLISH,l,!0))._message}catch(u){if(a&&u.data&&u.data.code===bt.ERR_PUBLISH_REQUEST_INVALID)return k.warning("[".concat(this.store.clientId,"] receive publish error code, retry"),u.toString()),await this.tryUnpubBeforeRepub(n,i),this.publish(n,i,!1);throw u}}async publishDataChannel(n,i,a){var l;if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new me(K.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));const u={stream_id:i.streamId,ordered:i.ordered?1:0,max_retrans_times:(l=i.maxRetransmits)!==null&&l!==void 0?l:10,channel_id:i.channelId,metadata:i.metadata};try{await this.signal.request(vt.PUBLISH_DATASTREAM,u,!0)}catch(h){if(a&&h.data&&h.data.code===bt.ERR_PUBLISH_REQUEST_INVALID)return k.warning("[".concat(this.store.clientId,"] receive publish datachannels error code, retry"),h.toString()),await this.tryUnpubDataChannelBeforeRepub(n,i),this.publishDataChannel(n,i,!1);throw h}}async unpublish(n,i){try{if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new me(K.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));await this.signal.request(vt.UNPUBLISH,{stream_id:i,ortc:n},!0)}catch(a){k.warning("[".concat(this.store.clientId,"] unpublish warning: "),a)}}async unpublishDataChannel(n){try{if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new me(K.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));await We.all(n.map(i=>this.signal.request(vt.UNPUBLISH_DATASTREAM,{channel_id:i},!0)))}catch(i){k.warning("unpublish datachannels warning: ",i)}}async presubscribe(n,i,a){if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new me(K.INVALID_OPERATION,"can not presubscribe when connection state is ".concat(this.state));const l={stream_id:n,stream_type:i,mode:this.spec.mode,codec:this.spec.codec,p2p_id:this.store.p2pId,twcc:!!ee("SUBSCRIBE_TWCC"),rtx:!!ee("USE_SUB_RTX")||void 0,extend:ee("SUB_EXTEND"),svc:Array.isArray(ee("SVC"))&&ee("SVC").length!==0?ee("SVC"):void 0};try{return await this.signal.request(vt.PRE_SUBSCRIBE,l,!0)}catch(u){if(a&&u.data&&u.data.code===bt.ERR_SUBSCRIBE_REQUEST_INVALID)return k.warning("[".concat(this.store.clientId,"] pre-subscribe error, retry"),u.toString()),this.presubscribe(n,i,!1);throw u}}async subscribe(n,i,a){if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new me(K.INVALID_OPERATION,"can not subscribe when connection state is ".concat(this.state));const l={stream_id:n,stream_type:i.stream_type,mode:this.spec.mode,codec:this.spec.codec,p2p_id:this.store.p2pId,twcc:!!ee("SUBSCRIBE_TWCC"),rtx:!!ee("USE_SUB_RTX"),extend:ee("SUB_EXTEND"),ssrcId:i.ssrcId,svc:Array.isArray(ee("SVC"))&&ee("SVC").length!==0?ee("SVC"):void 0};try{return(await this.signal.request(vt.SUBSCRIBE,l,!0))._message}catch(u){if(a&&u.data&&u.data.code===bt.ERR_SUBSCRIBE_REQUEST_INVALID)return k.warning("[".concat(this.store.clientId,"] receiver subscribe error code, retry"),u.toString()),await this.tryUnsubBeforeResub(n,i),await this.subscribe(n,i,!1);throw u}}async subscribeDataChannel(n,i,a){if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new me(K.INVALID_OPERATION,"can not subscribe datachannel when connection state is ".concat(this.state));const l={uid:n,stream_id:i.id,channel_id:i.datachannelId};try{return void await this.signal.request(vt.SUBSCRIBE_DATASTREAM,l,!0)}catch(u){if(a&&u.data&&u.data.code===bt.ERR_SUBSCRIBE_REQUEST_INVALID)return k.warning("[".concat(this.store.clientId,"] receiver subscribe datachannel error code, retry"),u.toString()),await this.tryUnsubDataChannelBeforeResub(n,i),await this.subscribeDataChannel(n,i,!1);throw u}}async subscribeAll(n,i){if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new me(K.INVALID_OPERATION,"can not massSubscribe when connection state is ".concat(this.state));const a={p2p_id:this.store.p2pId,users:n,dtx:!1,rtx:!!ee("USE_SUB_RTX"),twcc:!!ee("SUBSCRIBE_TWCC"),svc:Array.isArray(ee("SVC"))&&ee("SVC").length!==0?ee("SVC"):void 0};try{return await this.signal.request(vt.SUBSCRIBE_STREAMS,a,!0)}catch(l){if(i&&l.data&&l.data.code===bt.ERR_SUBSCRIBE_REQUEST_INVALID)return k.warning("[".concat(this.store.clientId,"] receiver massSubscribe error code, retry"),l.toString()),await this.tryMassUnsubBeforeResub(n),await this.subscribeAll(n,!1);throw l}}async setVideoProfile(n){const i=function(a){if(!(a.bitrateMax&&a.bitrateMin&&a.frameRate&&a.height&&a.width))return;let l=a.frameRate,u=a.width,h=a.height,f=!0;return typeof l!="number"&&(l=l.exact||l.ideal||l.max||l.min||0,l||(f=!1)),typeof u!="number"&&(u=u.exact||u.ideal||u.max||u.min||0,u||(f=!1)),typeof h!="number"&&(h=h.exact||h.ideal||h.max||h.min||0,l||(f=!1)),f?{stream_type:0,width:u,height:h,fps:l,start_bps:1e3*a.bitrateMax,min_bps:1e3*a.bitrateMin,target_bps:1e3*a.bitrateMax}:void 0}(n);if(i)return this.signal.request(vt.SET_VIDEO_PROFILE,i);k.debug("[".concat(this.store.clientId,"] encoder config is not complete, do not report to gateway"))}async unsubscribe(n,i){try{await this.signal.request(vt.UNSUBSCRIBE,{p2p_id:this.store.p2pId,ortc:n,stream_id:i},!0)}catch(a){k.warning("[".concat(this.store.clientId,"] unsubscribe warning: "),a)}}async unsubscribeDataChannel(n,i){try{if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new me(K.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));await We.all(n.map(a=>this.signal.request(vt.UNSUBSCRIBE_DATASTREAM,{stream_id:a,uid:i},!0)))}catch(a){k.warning("unsubscribeDataChannel warning: ",a)}}async massUnsubscribe(n){try{await this.signal.request(vt.UNSUBSCRIBE_STREAMS,n,!0)}catch(i){k.warning("[".concat(this.store.clientId,"] massUnsubscribeAll warning: "),i)}}async reconnectPC(n){const{iceParameters:i,dtlsParameters:a,rtpCapabilities:l}=n;return{gatewayEstablishParams:await this.signal.request(vt.CONNECT_PC,{p2p_id:this.store.p2pId,stream_id:this.store.uid,ortc:{iceParameters:i,dtlsParameters:a,rtpCapabilities:l}},!0),gatewayAddress:this.getCurrentGatewayAddress()}}getGatewayInfo(){return this.signal.request(vt.GATEWAY_INFO)}async renewToken(n){await this.signal.request(vt.RENEW_TOKEN,n),this.key=n.token}async setClientRole(n,i){if(i&&(this._clientRoleOptions=Object.assign({},i)),this.state!=="CONNECTED")return void(this.role=n);let a,l=0;n==="audience"?this._clientRoleOptions&&this._clientRoleOptions.delay?(a=this._clientRoleOptions.delay,l=1):l=this._clientRoleOptions&&this._clientRoleOptions.level?this._clientRoleOptions.level:2:l=0,await this.signal.request(vt.SET_CLIENT_ROLE,{role:n,level:l,delay:a,client_ts:Date.now()}),this.role=n}async setRemoteVideoStreamType(n,i){await this.signal.request(vt.SWITCH_VIDEO_STREAM,{stream_id:n,stream_type:i})}async setDefaultRemoteVideoStreamType(n){await this.signal.request(vt.DEFAULT_VIDEO_STREAM,{stream_type:n})}async setStreamFallbackOption(n,i){await this.signal.request(vt.SET_FALLBACK_OPTION,{stream_id:n,fallback_type:i})}async pickSVCLayer(n,i){await this.signal.request(vt.PICK_SVC_LAYER,{stream_id:n,spatial_layer:i.spatialLayer,temporal_layer:i.temporalLayer})}async setRTM2Flag(n){await this.signal.request(vt.SET_RTM2_FLAG,{rtm2_flag:n})}async sendExtensionMessage(n,i,a){if(this.signal instanceof hB)return this.signal.sendExtensionMessage(n,i,a)}getInChannelInfo(){return this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=Date.now()-this.inChannelInfo.joinAt),$s({},this.inChannelInfo)}async getGatewayVersion(){return(await this.signal.request(vt.GATEWAY_INFO)).version}reset(){if(this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=Date.now()-this.inChannelInfo.joinAt,this.inChannelInfo.joinAt=null),this.trafficStatsInterval&&(window.clearInterval(this.trafficStatsInterval),this.trafficStatsInterval=void 0),this.joinInfo){const n=c1.get(this.joinInfo.cname);n&&n.delete(this.joinInfo.uid)}this.joinInfo=void 0,this.key=void 0,this.networkQualityInterval&&(window.clearInterval(this.networkQualityInterval),this.networkQualityInterval=void 0)}updateTurnConfigFromSignal(){if(!this.joinInfo)return;const n=function(i){let a;return a=i.startsWith("dc")?i.match(/(dc\:\/\/)?([^:]+):(\d+)/):i.match(/(wss\:\/\/)?([^:]+):(\d+)/),a?{username:Gi.username,password:Gi.password,turnServerURL:a[2],tcpport:parseInt(a[3])+30,udpport:parseInt(a[3])+30,forceturn:!1}:null}((this.joinInfo.cloudProxyServer==="disabled"?this.signal.url:this.joinInfo.gatewayAddrs[this.signal.currentURLIndex].address)||"");this.joinInfo.turnServer.serversFromGateway=[],n&&this.joinInfo.turnServer.mode!=="off"&&this.joinInfo.cloudProxyServer==="disabled"&&this.joinInfo.turnServer.serversFromGateway.push($s($s({},Gi),{},{turnServerURL:n.turnServerURL,tcpport:n.tcpport,udpport:n.udpport,username:this.joinInfo.uid.toString(),password:this.joinInfo.token}))}async updateTrafficStats(){if(this.state!=="CONNECTED")return;const n=await this.signal.request(vt.TRAFFIC_STATS,void 0,!0);n.timestamp=Date.now(),n.ntp_offset!=null&&(this.ntpOffset=n.ntp_offset),n.peer_delay.forEach(i=>{const a=this._statsCollector.trafficStats&&this._statsCollector.trafficStats.peer_delay.find(l=>l.peer_uid===i.peer_uid);a&&a.B_st!==i.B_st&&s_(()=>{this.emit(Hr.STREAM_TYPE_CHANGE,i.peer_uid,i.B_st)})}),this._statsCollector.updateTrafficStats(n)}getJoinMessage(n){if(!this.joinInfo||!this.key)throw new me(K.UNEXPECTED_ERROR,"can not generate join message, no join info");const i=Object.assign({},this.joinInfo.apResponse);let a=ee("REPORT_APP_SCENARIO");if(typeof a!="string")try{a=JSON.stringify(a)}catch{a=void 0}a&&a.length>128&&(a=void 0);const l=$s({license:this.joinInfo.license,p2p_id:this.store.p2pId,session_id:this.joinInfo.sid,app_id:this.joinInfo.appId,channel_key:this.key,channel_name:this.joinInfo.cname,sdk_version:ls,browser:navigator.userAgent,process_id:ee("PROCESS_ID"),mode:this.store.useP2P?"p2p":this.spec.mode,codec:this.spec.codec,role:this.role,has_changed_gateway:this.hasChangeBGPAddress,ap_response:i,extend:ee("JOIN_EXTEND"),details:{6:this.joinInfo.stringUid,cservice_map:this.joinInfo.cloudProxyServer==="proxy3"?"1":this.joinInfo.cloudProxyServer==="proxy5"?"2":void 0},features:{rejoin:!0},optionalInfo:this.joinInfo.optionalInfo,appScenario:a,attributes:{userAttributes:{enablePublishedUserList:ee("ENABLE_PUBLISHED_USER_LIST"),maxSubscription:ee("MAX_SUBSCRIPTION"),subscribeAudioFilterTopN:typeof ee("SUBSCRIBE_AUDIO_FILTER_TOPN")=="number"?ee("SUBSCRIBE_AUDIO_FILTER_TOPN"):void 0,enablePublishAudioFilter:typeof ee("ENABLE_PUBLISH_AUDIO_FILTER")=="boolean"?ee("ENABLE_PUBLISH_AUDIO_FILTER"):void 0,enableUserLicenseCheck:typeof ee("ENABLE_USER_LICENSE_CHECK")=="boolean"?ee("ENABLE_USER_LICENSE_CHECK"):void 0,enableRTX:ee("USE_PUB_RTX")===!0||ee("USE_SUB_RTX")===!0||void 0,disableFEC:ee("DISABLE_FEC"),enableNTPReport:!!ee("ENABLE_NTP_REPORT")||void 0,enableInstantVideo:!!ee("ENABLE_INSTANT_VIDEO")||void 0,enableDataStream2:typeof ee("ENABLE_DATASTREAM_2")=="boolean"?ee("ENABLE_DATASTREAM_2"):void 0,rtm2Flag:typeof this.joinInfo.rtmFlag=="number"?this.joinInfo.rtmFlag:void 0,enableUserAutoRebalanceCheck:!!ee("ENABLE_USER_AUTO_REBALANCE_CHECK"),enableXR:typeof ee("USE_XR")=="boolean"?ee("USE_XR"):void 0,enableLossbasedBwe:typeof ee("ENABLE_LOSSBASED_BWE")=="boolean"?ee("ENABLE_LOSSBASED_BWE"):void 0,enableAutCC:typeof ee("ENABLE_AUT_CC")=="boolean"?ee("ENABLE_AUT_CC"):void 0,enableCCFallback:typeof ee("ENABLE_CC_FALLBACK")=="boolean"?ee("ENABLE_CC_FALLBACK"):void 0}},join_ts:this.joinGatewayStartTime},n);return this.joinInfo.stringUid&&(l.string_uid=this.joinInfo.stringUid),this.joinInfo.aesmode&&this.joinInfo.aespassword&&(l.aes_mode=this.joinInfo.aesmode,ee("ENCRYPT_AES")?(l.aes_secret=this.joinInfo.aespassword,l.aes_encrypt=!0):l.aes_secret=this.joinInfo.aespassword,this.joinInfo.aessalt&&(l.aes_salt=this.joinInfo.aessalt)),i.addresses[this.signal.websocket.currentURLIndex]&&(l.ap_response.ticket=i.addresses[this.signal.websocket.currentURLIndex].ticket,delete i.addresses),this.joinInfo.defaultVideoStream!==void 0&&(l.default_video_stream=this.joinInfo.defaultVideoStream),l}getRejoinMessage(){if(!this.joinInfo)throw new me(K.UNEXPECTED_ERROR,"can not generate rejoin message, no join info");return{session_id:this.joinInfo.sid,channel_name:this.joinInfo.cname,cid:this.joinInfo.cid,uid:this.joinInfo.uid,vid:Number(this.joinInfo.vid)}}handleSignalEvents(){this.signal.on(nt.WS_RECONNECT_WAITTING_FINISH,n=>{var i;Ye(i=["tryNext","recover"]).call(i,n)&&this.joinInfo&&ht.adjustSessionStartTime(this.joinInfo.sid)}),this.signal.on(nt.WS_RECONNECT_CREATE_CONNECTION,n=>{this.joinGatewayStartTime=Date.now()}),this.signal.on(nt.WS_RECONNECTING,n=>{this.joinInfo&&ht.WebSocketQuit(this.joinInfo.sid,{lts:Date.now(),succ:-1,cname:this.joinInfo.cname,uid:this.joinInfo.uid,cid:this.joinInfo.cid,errorCode:n||zi.NETWORK_ERROR}),this.joinInfo&&(this.state="RECONNECTING",ht.sessionInit(this.joinInfo.sid,{lts:new Date().getTime(),extend:this.isSignalRecover?{recover:!0}:{rejoin:!0},cname:this.joinInfo.cname,appid:this.joinInfo.appId,mode:this.spec.mode,stringUid:this.joinInfo.stringUid,channelProfile:this.spec.mode==="live"?1:0,channelMode:0,lsid:this.joinInfo.sid,clientRole:this.role==="audience"?2:1,buildFormat:1}),this.isSignalRecover=!1,this.joinGatewayStartTime=Date.now())}),this.signal.on(nt.WS_CLOSED,n=>{let i;switch(n){case an.LEAVE:i=zi.LEAVE;break;case an.UID_BANNED:case an.IP_BANNED:case an.CHANNEL_BANNED:case an.SERVER_ERROR:i=zi.SERVER_ERROR;break;case an.FALLBACK:i=zi.FALLBACK;break;case an.LICENSE_MISSING:case an.LICENSE_EXPIRED:case an.LICENSE_MINUTES_EXCEEDED:case an.LICENSE_PERIOD_INVALID:case an.LICENSE_MULTIPLE_SDK_SERVICE:case an.LICENSE_ILLEGAL:case an.TOKEN_EXPIRE:i=n;break;default:i=zi.NETWORK_ERROR}k.debug("[".concat(this.store.clientId,"] [signal] websocket closed, reason: ").concat(i||"undefined -> "+zi.NETWORK_ERROR)),this.joinInfo&&ht.WebSocketQuit(this.joinInfo.sid,{lts:Date.now(),succ:n===an.LEAVE?1:-1,cname:this.joinInfo.cname,uid:this.joinInfo.uid,cid:this.joinInfo.cid,errorCode:i}),this._disconnectedReason=n,n!==an.FALLBACK&&(this.state="DISCONNECTED"),this.reset()}),this.signal.on(nt.WS_CONNECTED,()=>{if(this.updateTurnConfigFromSignal(),this.state="CONNECTED",this.joinInfo&&(this.role==="audience"&&this._clientRoleOptions&&(this._clientRoleOptions.level||this._clientRoleOptions.delay)&&(k.debug("[".concat(this.store.clientId,"] patch to send set client role, role: ").concat(this.role,", mode: ").concat(this.spec.mode,", level: ").concat(this._clientRoleOptions.level,", delay: ").concat(this._clientRoleOptions.delay)),this.setClientRole(this.role,this._clientRoleOptions)),ht.joinGateway(this.joinInfo.sid,{lts:this.joinGatewayStartTime,succ:!0,ec:null,vid:this.joinInfo.vid,addr:this.signal.url,uid:this.joinInfo.uid,cid:this.joinInfo.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!this.joinInfo.proxyServer,signalChannel:this.signal instanceof Gl?"1":"0"}),this._isProactiveJoin=!1,this.joinInfo.useLocalAccessPoint&&this.joinInfo.setLocalAPVersion===1)){const n=this.signal.url&&this.signal.url.match(/wss\:\/\/([^:]+):(\d+)/);if(!n)return void k.error("[".concat(this.store.clientId,"] set local access point after joined failed: ").concat(n));Jn("EVENT_REPORT_DOMAIN",n[1]),Jn("EVENT_REPORT_BACKUP_DOMAIN",n[1]),Jn("LOG_UPLOAD_SERVER","".concat(n[1],":6444"))}}),this.signal.on(Bt.ON_UPLINK_STATS,n=>{this._statsCollector.updateUplinkStats(n)}),this.signal.on(nt.REQUEST_RECOVER,(n,i,a)=>{if(!this.joinInfo)return a(new me(K.UNEXPECTED_ERROR,"gateway: can not recover, no join info"));n&&(this.joinInfo.multiIP=n,this.hasChangeBGPAddress=!0),this.isSignalRecover=!0,ri(this,Hr.REQUEST_NEW_GATEWAY_LIST).then(i).catch(a)}),this.signal.on(nt.REQUEST_JOIN_INFO,async n=>{var i;if(this.updateTurnConfigFromSignal(),this.store.useP2P)return void n(this.getJoinMessage({ortc:{}}));const{iceParameters:a,dtlsParameters:l,rtpCapabilities:u}=await ri(this,Hr.REQUEST_P2P_CONNECTION_PARAMS,{turnServer:(i=this.joinInfo)===null||i===void 0?void 0:i.turnServer});n(this.getJoinMessage({ortc:{iceParameters:a,dtlsParameters:l,rtpCapabilities:u,version:"2"}}))}),this.signal.on(nt.REQUEST_REJOIN_INFO,n=>{n(this.getRejoinMessage())}),this.signal.on(nt.REPORT_JOIN_GATEWAY,(n,i)=>{this.joinInfo&&(ht.joinGateway(this.joinInfo.sid,{lts:this.joinGatewayStartTime,succ:!1,ec:n,addr:i,uid:this.joinInfo.uid,cid:this.joinInfo.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!this.joinInfo.proxyServer,signalChannel:this.signal instanceof Gl?"1":"0"}),this._isProactiveJoin=!1)}),this.signal.on(nt.IS_P2P_DISCONNECTED,n=>{n(Zd(this,Hr.IS_P2P_DISCONNECTED))}),this.signal.on(nt.DISCONNECT_P2P,()=>{this.emit(Hr.DISCONNECT_P2P)}),this.signal.on(nt.NEED_RENEW_SESSION,n=>{this.emit(Hr.NEED_RENEW_SESSION,n)}),this.signal.on(nt.REQUEST_SUCCESS,()=>{this._signalTimeout=!1}),this.signal.on(nt.REQUEST_TIMEOUT,()=>{this._signalTimeout=!0}),this.signal.on(nt.JOIN_RESPONSE,n=>{const i=this.getCurrentGatewayAddress();this.emit(Hr.JOIN_RESPONSE,n,i)}),this.signal.on(nt.DATACHANNEL_PRECONNECT,async(n,i,a)=>{this.updateTurnConfigFromSignal();const l=this.getCurrentGatewayAddress();return ri(this,Hr.DATACHANNEL_PRECONNECT,n,l).then(i).catch(a)}),this.signal.on(nt.DATACHANNEL_CONNECTING,async n=>{const{iceParameters:i,dtlsParameters:a,rtpCapabilities:l}=await ri(this,Hr.REQUEST_DC_CONNECTION_PARAMS);n(this.getJoinMessage({ortc:{iceParameters:i,dtlsParameters:a,rtpCapabilities:l,version:"2"}}))}),this.signal.on(nt.DATACHANNEL_FAILBACK,()=>{k.warning("[".concat(this.store.clientId,"] User join datachannel failed")),this.reset(),this.resetSignal(),this.emit(Hr.DATACHANNEL_FAILBACK)})}async tryUnsubBeforeResub(n,i){try{await this.signal.request(vt.UNSUBSCRIBE,{p2p_id:this.store.p2pId,stream_id:n,ortc:[i]},!0)}catch(a){throw k.warning("[".concat(this.store.clientId,"] tryUnsubBeforeResub warning"),a),a}}async tryUnsubDataChannelBeforeResub(n,i){try{await this.signal.request(vt.UNSUBSCRIBE,{stream_id:i.id},!0)}catch(a){throw k.warning("unsubscribe datachannel warning",a),a}}async tryUnpubBeforeRepub(n,i){try{await this.signal.request(vt.UNPUBLISH,{stream_id:n,ortc:i},!0)}catch(a){throw k.warning("[".concat(this.store.clientId,"] tryUnpubBeforeRepub warning: "),a),a}}async tryUnpubDataChannelBeforeRepub(n,i){try{await this.signal.request(vt.UNPUBLISH_DATASTREAM,{channnel_id:i.channelId},!0)}catch(a){throw k.warning("unpublish datastream warning: ",a),a}}async tryMassUnsubBeforeResub(n){const i={users:n.map(a=>({stream_id:a.stream_id,stream_type:a.stream_type}))};try{await this.signal.request(vt.UNSUBSCRIBE_STREAMS,i,!0)}catch(a){throw k.warning("[".concat(this.store.clientId,"] tryMassUnsubBeforeResub warning"),a),a}}async muteLocal(n,i){const a={action:n.find(l=>l.stream_type===Vn.Audio)?"mute_local_audio":"mute_local_video",p2p_id:this.store.p2pId,ortc:n,stream_id:i};try{await this.signal.request(vt.CONTROL,a,!0,!0)}catch(l){throw k.warning("[".concat(this.store.clientId,"] gateway muteLocal warning: "),l),l}}async unmuteLocal(n,i){const a={action:n.find(l=>l.stream_type===Vn.Audio)?"unmute_local_audio":"unmute_local_video",p2p_id:this.store.p2pId,ortc:n,stream_id:i};try{await this.signal.request(vt.CONTROL,a,!0,!0)}catch(l){throw k.warning("[".concat(this.store.clientId,"] gateway unmuteLocal warning: "),l),l}}async muteRemote(n,i){const a={action:n===ut.AUDIO?"mute_remote_audio":"mute_remote_video",p2p_id:this.store.p2pId,stream_id:i};try{await this.signal.request(vt.CONTROL,a,!0,!0)}catch(l){throw k.warning("[".concat(this.store.clientId,"] gateway muteRemote warning: "),l),l}}async unmuteRemote(n,i){const a={action:n===ut.AUDIO?"unmute_remote_audio":"unmute_remote_video",p2p_id:this.store.p2pId,stream_id:i};try{await this.signal.request(vt.CONTROL,a,!0,!0)}catch(l){throw k.warning("[".concat(this.store.clientId,"] gateway unmuteRemote warning: "),l),l}}uploadWRTCStats(n){this.signal.uploadWRTCStats(n)}upload(n,i){this.signal.upload(n,i)}getSignalRTT(){return this.signal.rtt}async restartICE(n){const i={p2p_id:this.store.p2pId,stream_id:this.store.uid,ortc:n};try{return await this.signal.request(vt.RESTART_ICE,i,!0)}catch(a){throw k.warning("[".concat(this.store.clientId,"] P2PChannel.restartICE warning: "),a),a}}reconnect(){this.state==="CONNECTED"&&this.signal.reconnect(void 0,zi.P2P_FAILED)}getCurrentGatewayAddress(){var n;if(!ee("GATEWAY_WSS_ADDRESS"))return(n=this.joinInfo)!==null&&n!==void 0&&n.gatewayAddrs?this.joinInfo.gatewayAddrs[this.signal.currentURLIndex]:void 0}async setPublishAudioFilterEnabled(n){await this.signal.request(vt.SET_PARAMETER,{enablePublishAudioFilter:n})}resetSignal(){this.signal&&(this.signal.removeAllListeners(),this.signal.close(an.FALLBACK)),this.store.useDataChannel=!1,this.signal=new oB($s($s({},this.spec),{},{retryConfig:this.spec.websocketRetryConfig}),this.store),this.handleSignalEvents(),this.emit(Hr.RESET_SIGNAL,J4.websocket)}}let y_=0,l1=0;function Ic(t,n,i,a){return new We((l,u)=>{n.timeout=n.timeout||ee("HTTP_CONNECT_TIMEOUT"),n.responseType=n.responseType||"json",n.data&&!i?(n.data=JSON.stringify(n.data),y_+=ll(n.data)):i&&(n.data.size?y_+=n.data.size:n.data instanceof FormData?y_+=O4(n.data):y_+=ll(JSON.stringify(n.data))),n.headers=n.headers||{},n.headers["Content-Type"]=n.headers["Content-Type"]||"application/json",n.method="POST",n.url=t,Go.request(n).then(h=>{typeof h.data=="string"?l1+=ll(h.data):h.data instanceof ArrayBuffer||h.data instanceof Uint8Array?l1+=h.data.byteLength:l1+=ll(JSON.stringify(h.data)),a&&l({data:h.data,headers:h.headers}),l(h.data)}).catch(h=>{Go.isCancel(h)?u(new me(K.OPERATION_ABORTED,"cancel token canceled")):h.code==="ECONNABORTED"?u(new me(K.NETWORK_TIMEOUT,h.message)):h.response?u(new me(K.NETWORK_RESPONSE_ERROR,h.response.status)):u(new me(K.NETWORK_ERROR,h.message))})})}/*! formdata-polyfill. MIT License. Jimmy W?rting <https://jimmy.warting.se/opensource> */(function(){var t;function n(Oe){var Ve=0;return function(){return Ve<Oe.length?{done:!1,value:Oe[Ve++]}:{done:!0}}}var i=typeof Object.defineProperties=="function"?Object.defineProperty:function(Oe,Ve,at){return Oe==Array.prototype||Oe==Object.prototype||(Oe[Ve]=at.value),Oe},a,l=function(Oe){Oe=[typeof globalThis=="object"&&globalThis,Oe,typeof window=="object"&&window,typeof self=="object"&&self,typeof s=="object"&&s];for(var Ve=0;Ve<Oe.length;++Ve){var at=Oe[Ve];if(at&&at.Math==Math)return at}throw Error("Cannot find global object")}(this);function u(Oe,Ve){if(Ve)e:{var at=l;Oe=Oe.split(".");for(var Ft=0;Ft<Oe.length-1;Ft++){var Pn=Oe[Ft];if(!(Pn in at))break e;at=at[Pn]}(Ve=Ve(Ft=at[Oe=Oe[Oe.length-1]]))!=Ft&&Ve!=null&&i(at,Oe,{configurable:!0,writable:!0,value:Ve})}}function h(Oe){return(Oe={next:Oe})[Symbol.iterator]=function(){return this},Oe}function f(Oe){var Ve=typeof Symbol<"u"&&Symbol.iterator&&Oe[Symbol.iterator];return Ve?Ve.call(Oe):{next:n(Oe)}}if(u("Symbol",function(Oe){function Ve(Pn,Ge){this.A=Pn,i(this,"description",{configurable:!0,writable:!0,value:Ge})}if(Oe)return Oe;Ve.prototype.toString=function(){return this.A};var at="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",Ft=0;return function Pn(Ge){if(this instanceof Pn)throw new TypeError("Symbol is not a constructor");return new Ve(at+(Ge||"")+"_"+Ft++,Ge)}}),u("Symbol.iterator",function(Oe){if(Oe)return Oe;Oe=Symbol("Symbol.iterator");for(var Ve="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),at=0;at<Ve.length;at++){var Ft=l[Ve[at]];typeof Ft=="function"&&typeof Ft.prototype[Oe]!="function"&&i(Ft.prototype,Oe,{configurable:!0,writable:!0,value:function(){return h(n(this))}})}return Oe}),typeof Object.setPrototypeOf=="function")a=Object.setPrototypeOf;else{var g;e:{var _={};try{_.__proto__={a:!0},g=_.a;break e}catch{}g=!1}a=g?function(Oe,Ve){if(Oe.__proto__=Ve,Oe.__proto__!==Ve)throw new TypeError(Oe+" is not extensible");return Oe}:null}var y=a;function T(){this.m=!1,this.j=null,this.v=void 0,this.h=1,this.u=this.C=0,this.l=null}function A(Oe){if(Oe.m)throw new TypeError("Generator is already running");Oe.m=!0}function D(Oe,Ve){return Oe.h=3,{value:Ve}}function W(Oe){this.g=new T,this.G=Oe}function F(Oe,Ve,at,Ft){try{var Pn=Ve.call(Oe.g.j,at);if(!(Pn instanceof Object))throw new TypeError("Iterator result "+Pn+" is not an object");if(!Pn.done)return Oe.g.m=!1,Pn;var Ge=Pn.value}catch(B){return Oe.g.j=null,Oe.g.s(B),U(Oe)}return Oe.g.j=null,Ft.call(Oe.g,Ge),U(Oe)}function U(Oe){for(;Oe.g.h;)try{var Ve=Oe.G(Oe.g);if(Ve)return Oe.g.m=!1,{value:Ve.value,done:!1}}catch(at){Oe.g.v=void 0,Oe.g.s(at)}if(Oe.g.m=!1,Oe.g.l){if(Ve=Oe.g.l,Oe.g.l=null,Ve.F)throw Ve.D;return{value:Ve.return,done:!0}}return{value:void 0,done:!0}}function z(Oe){this.next=function(Ve){return Oe.o(Ve)},this.throw=function(Ve){return Oe.s(Ve)},this.return=function(Ve){return function(at,Ft){A(at.g);var Pn=at.g.j;return Pn?F(at,"return"in Pn?Pn.return:function(Ge){return{value:Ge,done:!0}},Ft,at.g.return):(at.g.return(Ft),U(at))}(Oe,Ve)},this[Symbol.iterator]=function(){return this}}function X(Oe,Ve){return Ve=new z(new W(Ve)),y&&Oe.prototype&&y(Ve,Oe.prototype),Ve}if(T.prototype.o=function(Oe){this.v=Oe},T.prototype.s=function(Oe){this.l={D:Oe,F:!0},this.h=this.C||this.u},T.prototype.return=function(Oe){this.l={return:Oe},this.h=this.u},W.prototype.o=function(Oe){return A(this.g),this.g.j?F(this,this.g.j.next,Oe,this.g.o):(this.g.o(Oe),U(this))},W.prototype.s=function(Oe){return A(this.g),this.g.j?F(this,this.g.j.throw,Oe,this.g.o):(this.g.s(Oe),U(this))},u("Array.prototype.entries",function(Oe){return Oe||function(){return function(Ve,at){Ve instanceof String&&(Ve+="");var Ft=0,Pn=!1,Ge={next:function(){if(!Pn&&Ft<Ve.length){var B=Ft++;return{value:at(B,Ve[B]),done:!1}}return Pn=!0,{done:!0,value:void 0}}};return Ge[Symbol.iterator]=function(){return Ge},Ge}(this,function(Ve,at){return[Ve,at]})}}),typeof Blob<"u"&&(typeof FormData>"u"||!FormData.prototype.keys)){var ue=function(Oe,Ve){for(var at=0;at<Oe.length;at++)Ve(Oe[at])},pe=function(Oe){return Oe.replace(/\r?\n|\r/g,`\r
`)},Ee=function(Oe,Ve,at){return Ve instanceof Blob?(at=at!==void 0?at+"":typeof Ve.name=="string"?Ve.name:"blob",Ve.name===at&&Object.prototype.toString.call(Ve)!=="[object Blob]"||(Ve=new File([Ve],at)),[String(Oe),Ve]):[String(Oe),String(Ve)]},Se=function(Oe,Ve){if(Oe.length<Ve)throw new TypeError(Ve+" argument required, but only "+Oe.length+" present.")},Re=typeof globalThis=="object"?globalThis:typeof window=="object"?window:typeof self=="object"?self:this,Ae=Re.FormData,Pe=Re.XMLHttpRequest&&Re.XMLHttpRequest.prototype.send,tt=Re.Request&&Re.fetch,ln=Re.navigator&&Re.navigator.sendBeacon,Fn=Re.Element&&Re.Element.prototype,sr=Re.Symbol&&Symbol.toStringTag;sr&&(Blob.prototype[sr]||(Blob.prototype[sr]="Blob"),"File"in Re&&!File.prototype[sr]&&(File.prototype[sr]="File"));try{new File([],"")}catch{Re.File=function(Ve,at,Ft){return Ve=new Blob(Ve,Ft||{}),Object.defineProperties(Ve,{name:{value:at},lastModified:{value:+(Ft&&Ft.lastModified!==void 0?new Date(Ft.lastModified):new Date)},toString:{value:function(){return"[object File]"}}}),sr&&Object.defineProperty(Ve,sr,{value:"File"}),Ve}}var Jr=function(Oe){return Oe.replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22")},Or=function(Oe){this.i=[];var Ve=this;Oe&&ue(Oe.elements,function(at){if(at.name&&!at.disabled&&at.type!=="submit"&&at.type!=="button"&&!at.matches("form fieldset[disabled] *"))if(at.type==="file"){var Ft=at.files&&at.files.length?at.files:[new File([],"",{type:"application/octet-stream"})];ue(Ft,function(Pn){Ve.append(at.name,Pn)})}else at.type==="select-multiple"||at.type==="select-one"?ue(at.options,function(Pn){!Pn.disabled&&Pn.selected&&Ve.append(at.name,Pn.value)}):at.type==="checkbox"||at.type==="radio"?at.checked&&Ve.append(at.name,at.value):(Ft=at.type==="textarea"?pe(at.value):at.value,Ve.append(at.name,Ft))})};if((t=Or.prototype).append=function(Oe,Ve,at){Se(arguments,2),this.i.push(Ee(Oe,Ve,at))},t.delete=function(Oe){Se(arguments,1);var Ve=[];Oe=String(Oe),ue(this.i,function(at){at[0]!==Oe&&Ve.push(at)}),this.i=Ve},t.entries=function Oe(){var Ve,at=this;return X(Oe,function(Ft){if(Ft.h==1&&(Ve=0),Ft.h!=3)return Ve<at.i.length?Ft=D(Ft,at.i[Ve]):(Ft.h=0,Ft=void 0),Ft;Ve++,Ft.h=2})},t.forEach=function(Oe,Ve){Se(arguments,1);for(var at=f(this),Ft=at.next();!Ft.done;Ft=at.next()){var Pn=f(Ft.value);Ft=Pn.next().value,Pn=Pn.next().value,Oe.call(Ve,Pn,Ft,this)}},t.get=function(Oe){Se(arguments,1);var Ve=this.i;Oe=String(Oe);for(var at=0;at<Ve.length;at++)if(Ve[at][0]===Oe)return Ve[at][1];return null},t.getAll=function(Oe){Se(arguments,1);var Ve=[];return Oe=String(Oe),ue(this.i,function(at){at[0]===Oe&&Ve.push(at[1])}),Ve},t.has=function(Oe){Se(arguments,1),Oe=String(Oe);for(var Ve=0;Ve<this.i.length;Ve++)if(this.i[Ve][0]===Oe)return!0;return!1},t.keys=function Oe(){var Ve,at,Ft,Pn,Ge=this;return X(Oe,function(B){if(B.h==1&&(Ve=f(Ge),at=Ve.next()),B.h!=3)return at.done?void(B.h=0):(Ft=at.value,Pn=f(Ft),D(B,Pn.next().value));at=Ve.next(),B.h=2})},t.set=function(Oe,Ve,at){Se(arguments,2),Oe=String(Oe);var Ft=[],Pn=Ee(Oe,Ve,at),Ge=!0;ue(this.i,function(B){B[0]===Oe?Ge&&(Ge=!Ft.push(Pn)):Ft.push(B)}),Ge&&Ft.push(Pn),this.i=Ft},t.values=function Oe(){var Ve,at,Ft,Pn,Ge=this;return X(Oe,function(B){if(B.h==1&&(Ve=f(Ge),at=Ve.next()),B.h!=3)return at.done?void(B.h=0):(Ft=at.value,(Pn=f(Ft)).next(),D(B,Pn.next().value));at=Ve.next(),B.h=2})},Or.prototype._asNative=function(){for(var Oe=new Ae,Ve=f(this),at=Ve.next();!at.done;at=Ve.next()){var Ft=f(at.value);at=Ft.next().value,Ft=Ft.next().value,Oe.append(at,Ft)}return Oe},Or.prototype._blob=function(){var Oe="----formdata-polyfill-"+Math.random(),Ve=[],at="--"+Oe+`\r
Content-Disposition: form-data; name="`;return this.forEach(function(Ft,Pn){return typeof Ft=="string"?Ve.push(at+Jr(pe(Pn))+`"\r
\r
`+pe(Ft)+`\r
`):Ve.push(at+Jr(pe(Pn))+'"; filename="'+Jr(Ft.name)+`"\r
Content-Type: `+(Ft.type||"application/octet-stream")+`\r
\r
`,Ft,`\r
`)}),Ve.push("--"+Oe+"--"),new Blob(Ve,{type:"multipart/form-data; boundary="+Oe})},Or.prototype[Symbol.iterator]=function(){return this.entries()},Or.prototype.toString=function(){return"[object FormData]"},Fn&&!Fn.matches&&(Fn.matches=Fn.matchesSelector||Fn.mozMatchesSelector||Fn.msMatchesSelector||Fn.oMatchesSelector||Fn.webkitMatchesSelector||function(Oe){for(var Ve=(Oe=(this.document||this.ownerDocument).querySelectorAll(Oe)).length;0<=--Ve&&Oe.item(Ve)!==this;);return-1<Ve}),sr&&(Or.prototype[sr]="FormData"),Pe){var nc=Re.XMLHttpRequest.prototype.setRequestHeader;Re.XMLHttpRequest.prototype.setRequestHeader=function(Oe,Ve){nc.call(this,Oe,Ve),Oe.toLowerCase()==="content-type"&&(this.B=!0)},Re.XMLHttpRequest.prototype.send=function(Oe){Oe instanceof Or?(Oe=Oe._blob(),this.B||this.setRequestHeader("Content-Type",Oe.type),Pe.call(this,Oe)):Pe.call(this,Oe)}}tt&&(Re.fetch=function(Oe,Ve){return Ve&&Ve.body&&Ve.body instanceof Or&&(Ve.body=Ve.body._blob()),tt.call(this,Oe,Ve)}),ln&&(Re.navigator.sendBeacon=function(Oe,Ve){return Ve instanceof Or&&(Ve=Ve._asNative()),ln.call(this,Oe,Ve)}),Re.FormData=Or}})();const w0=()=>{const t=ee("AREAS");return t.length===0&&t.push(Dn.GLOBAL),Sc(t).call(t,(n,i,a)=>{const l=fB(i);return l?a===0?l:"".concat(n,",").concat(l):n},"")},fB=t=>t===Dn.OVERSEA?"".concat(Qi.ASIA,",").concat(Qi.EUROPE,",").concat(Qi.AFRICA,",").concat(Qi.NORTH_AMERICA,",").concat(Qi.SOUTH_AMERICA,",").concat(Qi.OCEANIA):Qi[t],cue=t=>{const n={CODE:"",WEBCS_DOMAIN:[],WEBCS_DOMAIN_BACKUP_LIST:[],PROXY_CS:[],CDS_AP:[],ACCOUNT_REGISTER:[],UAP_AP:[],EVENT_REPORT_DOMAIN:[],EVENT_REPORT_BACKUP_DOMAIN:[],LOG_UPLOAD_SERVER:[],PROXY_SERVER_TYPE3:[]};return t.map(i=>{const a=E_[i],l=Object.keys(a);l&&l.map(u=>{u!=="CODE"&&(n[u]=n[u].concat(a[u]))})}),n},C_={GLOBAL:{ASIA:[Dn.CHINA,Dn.JAPAN,Dn.INDIA,Dn.KOREA,Dn.HKMC],EUROPE:[],NORTH_AMERICA:[Dn.US],SOUTH_AMERICA:[],OCEANIA:[],AFRICA:[]}},b_=Object.keys(C_[Dn.GLOBAL]),u1=[Dn.CHINA,Dn.NORTH_AMERICA,Dn.EUROPE,Dn.ASIA,Dn.JAPAN,Dn.INDIA,Dn.OCEANIA,Dn.SOUTH_AMERICA,Dn.AFRICA,Dn.KOREA,Dn.HKMC,Dn.US],lue=function(t,n){let i=[];if(Ye(t).call(t,Dn.GLOBAL)){const u=[Dn.GLOBAL,Dn.OVERSEA],h=Object.keys(E_);if(n===Dn.GLOBAL)throw new me(K.INVALID_PARAMS,"GLOBAL is an invalid excludedArea value");if(n===Dn.CHINA)i=[Dn.OVERSEA];else if(l=n,Ye(b_).call(b_,l)){const f=(a=n,C_[Dn.GLOBAL][a]||[]),g=[...u,n,...f];i=h.filter(_=>!Ye(g).call(g,_))}else if(function(f){let g=!1;return b_.forEach(_=>{var y;Ye(y=C_[Dn.GLOBAL][_]).call(y,f)&&(g=!0)}),g}(n)){const f=function(_){let y;return b_.forEach(T=>{var A;Ye(A=C_[Dn.GLOBAL][T]).call(A,_)&&(y=T)}),y}(n),g=[...u,f,n];i=h.filter(_=>!Ye(g).call(g,_))}else i=t;i=function(f){const g=[];return u1.forEach(_=>{Ye(f).call(f,_)&&g.push(_)}),g.concat(f.filter(_=>!Ye(u1).call(u1,_)))}(i)}else i=t;var a,l;return i};function mB(t){var n,i;if(!t&&Ye(n=ee("AREAS")).call(n,Dn.EXTENSIONS))return k.debug("update area from ap : reset"),void d1(rle,!0);if(!Ye(i=ee("AREAS")).call(i,Dn.GLOBAL)||!t)return;let a=E_.EXTENSIONS;a&&(a={CODE:fB(Dn.EXTENSIONS),WEBCS_DOMAIN:["ap-web-1-".concat(t,".agora.io")],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-".concat(t,".ap.sd-rtn.com")],PROXY_CS:["proxy-ap-web-".concat(t,".agora.io")],CDS_AP:["cds-ap-web-1-".concat(t,".agora.io"),"cds-ap-web-2-".concat(t,".ap.sd-rtn.com")],ACCOUNT_REGISTER:["sua-ap-web-1-".concat(t,".agora.io"),"sua-ap-web-2-".concat(t,".ap.sd-rtn.com")],UAP_AP:["uap-ap-web-1-".concat(t,".agora.io"),"uap-ap-web-2-".concat(t,".ap.sd-rtn.com")],EVENT_REPORT_DOMAIN:["statscollector-1-".concat(t,".agora.io")],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-".concat(t,".agora.io")],LOG_UPLOAD_SERVER:["logservice-".concat(t,".agora.io")],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy-".concat(t,".agora.io")]},k.debug("update area from ap success: ".concat(t,",config is "),a),Jn("AREAS",[Dn.EXTENSIONS],!0),Object.keys(a).map(l=>{l==="LOG_UPLOAD_SERVER"||l==="EVENT_REPORT_DOMAIN"||l==="EVENT_REPORT_BACKUP_DOMAIN"||l==="PROXY_SERVER_TYPE3"?Jn(l,a[l][0]):Jn(l,a[l])}))}function d1(t){let n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const i=ht.reportApiInvoke(null,{name:ni.SET_AREA,options:t,tag:Nr.TRACER});try{let a=[];if(typeof t=="string"&&(a=[t]),Array.isArray(t)&&(t.forEach(u=>{if(!Ye(Q4).call(Q4,u))throw new me(K.INVALID_PARAMS,"invalid area code")}),a=t),Object.prototype.toString.call(t)==="[object Object]"){const{areaCode:u,excludedArea:h}=t;if(!u)throw new me(K.INVALID_PARAMS,"area code is needed");let f=u;typeof u=="string"&&(f=[u]),a=h?lue(f,h):f}if(!n){if(ju.AREAS){const u=new me(K.PROHIBITED_OPERATION,"setArea is prohibited because of config-distribute");return i.onError(u),void k.warning("setArea is prohibited because of config-distribute")}if(Ye(a).call(a,Dn.GLOBAL)&&ee("AREAS")===Dn.EXTENSIONS){const u=new me(K.PROHIBITED_OPERATION,"setArea is prohibited because of ap extensions");return i.onError(u),void k.warning("setArea is prohibited because of ap extensions")}}Jn("AREAS",a,n);const l=cue(a);Object.keys(l).map(u=>{u==="LOG_UPLOAD_SERVER"||u==="EVENT_REPORT_DOMAIN"||u==="EVENT_REPORT_BACKUP_DOMAIN"||u==="PROXY_SERVER_TYPE3"?Jn(u,l[u][0]):Jn(u,l[u])}),k.debug("set area success:",a.join(","))}catch(a){throw i.onError(a),a}i.onSuccess()}function gB(t,n){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),i.push.apply(i,a)}return i}function h1(t){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?gB(Object(i),!0).forEach(function(a){V(t,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):gB(Object(i)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(i,a))})}return t}let p1=1;function uue(t,n,i,a,l){p1+=1;const u={sid:i.sid,command:"convergeAllocateEdge",uid:"666",appId:i.appId,ts:Math.floor(Date.now()/1e3),seq:p1,requestId:p1,version:ls,cname:i.cname},h={service_name:n,json_body:JSON.stringify(u)};let f,g,_=t[0];return bc(async()=>{f=Date.now();const y=await Ic(_,{data:h,cancelToken:a,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"}});if(g=Date.now()-f,y.code!==0){const D=new me(K.UNEXPECTED_RESPONSE,"live streaming ap error, code"+y.code,{retry:!0,responseTime:g});throw k.error(D.toString()),D}const T=JSON.parse(y.json_body);if(T.code!==200){const D=new me(K.UNEXPECTED_RESPONSE,"live streaming app center error, code: ".concat(T.code,", reason: ").concat(T.reason),{code:T.code,responseTime:g});throw k.error(D.toString()),D}if(!T.servers||T.servers.length===0){const D=new me(K.UNEXPECTED_RESPONSE,"live streaming app center empty server",{code:T.code,responseTime:g});throw k.error(D.toString()),D}const A=function(D,W){return{addressList:D.servers.map(F=>"wss://".concat(F.address.replace(/\./g,"-"),".").concat(ee("WORKER_DOMAIN"),":").concat(F.wss,"?serviceName=").concat(encodeURIComponent(W))),workerToken:D.workerToken,vid:D.vid}}(T,n);return ee("LIVE_STREAMING_ADDRESS")&&(A.addressList=ee("LIVE_STREAMING_ADDRESS")instanceof Array?ee("LIVE_STREAMING_ADDRESS"):[ee("LIVE_STREAMING_ADDRESS")]),h1(h1({},A),{},{responseTime:g})},(y,T)=>(ht.apworkerEvent(i.sid,{success:!0,sc:200,serviceName:n,responseDetail:JSON.stringify(y.addressList),firstSuccess:T===0,responseTime:g,serverIp:t[T%t.length]}),!1),(y,T)=>(ht.apworkerEvent(i.sid,{success:!1,sc:y.data&&y.data.code||200,serviceName:n,responseTime:g,serverIp:t[T%t.length]}),!!(y.code!==K.OPERATION_ABORTED&&y.code!==K.UNEXPECTED_RESPONSE||y.data&&y.data.retry)&&(_=t[(T+1)%t.length],!0)),l)}let f1=1;function vB(t,n,i,a){let{url:l,areaCode:u}=t;const{clientId:h,sid:f}=n,g=Date.now();let _;const[y,T]=g1(n,u,[Yr.CHOOSE_SERVER]);let A=Dr.networkState;return bc(async()=>{A&&Dr.networkState===xo.OFFLINE&&Dr.onlineWaiter&&await We.race([Dr.onlineWaiter,yi(a&&a.maxRetryTimeout||qr.maxRetryTimeout)]),A=Dr.networkState;const{data:D,headers:W}=await Ic(l,{data:y,cancelToken:i,headers:{"Content-Type":"multipart/form-data;"}},!0,!0);_=W.http3==="1"?1:-1,ht.reportResourceTiming(l,f),_B(D,l,n,g,[Yr.CHOOSE_SERVER],_);const F=R0(D,Yr.CHOOSE_SERVER);return m1(F),a1(F,l)},D=>(D&&ht.joinChooseServer(f,{lts:g,succ:!0,csAddr:l,opid:T,serverList:D.gatewayAddrs.map(W=>W.address),ec:null,cid:D.cid.toString(),uid:D.uid.toString(),csIp:D.csIp,unilbsServerIds:[Yr.CHOOSE_SERVER].toString(),isHttp3:_}),!1),D=>D.code!==K.OPERATION_ABORTED&&(D.code===K.CAN_NOT_GET_GATEWAY_SERVER?D.data.retry:(ht.joinChooseServer(f,{lts:g,succ:!1,csAddr:l,serverList:null,opid:T,ec:D.code,csIp:D.data&&D.data.csIp,unilbsServerIds:[Yr.CHOOSE_SERVER].toString(),extend:JSON.stringify({networkState:A}),isHttp3:_}),k.warning("[".concat(h||"sid-".concat(f.slice(0,6)),"] Choose server network error, retry"),D),!0)),a)}function EB(t,n,i,a){let l,{url:u,areaCode:h,serviceIds:f}=t;const g=Date.now(),[_,y]=g1(n,h,f);let T;return bc(async()=>{T&&Dr.networkState===xo.OFFLINE&&Dr.onlineWaiter&&await We.race([Dr.onlineWaiter,yi(a&&a.maxRetryTimeout||qr.maxRetryTimeout)]),T=Dr.networkState;const{data:A,headers:D}=await Ic(u,{data:_,cancelToken:i,headers:{"Content-Type":"multipart/form-data;"}},!0,!0);l=D.http3==="1"?1:-1,ht.reportResourceTiming(u,n.sid),_B(A,u,n,g,f,l);const W=R0(A,Yr.CHOOSE_SERVER),F=R0(A,n.cloudProxyServer==="proxy5"?Yr.CLOUD_PROXY_5:n.cloudProxyServer==="proxy3"||n.cloudProxyServer==="proxy4"?Yr.CLOUD_PROXY:Yr.CLOUD_PROXY_FALLBACK);return m1(W),{gatewayInfo:a1(W,u),proxyInfo:F,url:u}},A=>(A.gatewayInfo&&ht.joinChooseServer(n.sid,{lts:g,succ:!0,csAddr:u,serverList:A.gatewayInfo.gatewayAddrs.map(D=>D.address),ec:null,opid:y,cid:A.gatewayInfo.cid.toString(),uid:A.gatewayInfo.uid.toString(),csIp:A.gatewayInfo.csIp,unilbsServerIds:f.toString(),isHttp3:l}),A.proxyInfo&&ht.joinWebProxyAP(n.sid,{lts:g,sucess:1,apServerAddr:u,turnServerAddrList:A.proxyInfo.addresses.map(D=>D.ip).join(","),errorCode:null,eventType:n.cloudProxyServer,unilbsServerIds:f.toString()}),!1),A=>A.code!==K.OPERATION_ABORTED&&(A.code===K.CAN_NOT_GET_GATEWAY_SERVER?A.data.retry:(ht.joinWebProxyAP(n.sid,{lts:g,sucess:0,apServerAddr:u,turnServerAddrList:null,errorCode:A.code,eventType:n.cloudProxyServer,unilbsServerIds:f.toString(),extend:JSON.stringify({networkState:T})}),k.warning("[".concat(n.clientId,"] multi unilbs network error, retry"),A),!0)),a)}const _B=(t,n,i,a,l,u)=>{const{sid:h,clientId:f,cloudProxyServer:g}=i,_=[],y=T=>{T.flag===4096?ht.joinChooseServer(h,{lts:a,succ:!1,csAddr:n,opid:t.opid,serverList:null,ec:T.error.message,csIp:T.error.data&&T.error.data.csIp,unilbsServerIds:l.toString(),isHttp3:u}):T.flag!==1048576&&T.flag!==4194304&&T.flag!==4194310||ht.joinWebProxyAP(h,{lts:a,sucess:0,apServerAddr:n,turnServerAddrList:null,errorCode:T.error.code,eventType:g,unilbsServerIds:l.toString()})};if(t.response_body.forEach(T=>{const A=T.buffer.code;if(T.uri===23&&A===0&&!T.buffer.edges_services)if(T.buffer.flag===4194310)k.warning("no edge services in ap response of proxy fallback, will not set proxy in iceServers"),T.buffer.edges_services=[];else{const D={error:new me(K.CAN_NOT_GET_GATEWAY_SERVER,"no edge services in ap response",{retry:!0,csIp:t.detail[502]}),flag:T.buffer.flag};_.push(D),y(D)}if(A!==0){const D=qp(A),W={error:new me(K.CAN_NOT_GET_GATEWAY_SERVER,D.desc,{desc:D.desc,retry:D.retry,csIp:t.detail[502]}),flag:T.buffer.flag};T.buffer.flag===4194310?k.warning(W.error.toString()):_.push(W),y(W)}}),_.length)throw k.warning("[".concat(f||"sid-".concat(h.slice(0,6)),"] multi unilbs ").concat(n," failed, ").concat(_.map(T=>"flag: ".concat(T.flag,", message: ").concat(T.error.message,", retry: ").concat(T.error.data.retry)).join(" | "))),new me(K.CAN_NOT_GET_GATEWAY_SERVER,_.map(T=>"flag: ".concat(T.flag,", message: ").concat(T.error.message)).join(" | "),{retry:!!_.find(T=>T.error.data.retry),csIp:t.detail[502],desc:[...new Set(_.map(T=>{var A;return T==null||(A=T.error)===null||A===void 0||(A=A.data)===null||A===void 0?void 0:A.desc}).filter(T=>!!T))]})},m1=t=>{var n,i,a,l;if(t.addresses&&t.addresses.length===0&&t.code===0)throw new me(K.CAN_NOT_GET_GATEWAY_SERVER,"void gateway address",{retry:!0,csIp:t.detail&&t.detail[502]});if(ee("AP_AREA")&&((a=t.detail)!==null&&a!==void 0&&a[23]&&typeof((l=t.detail)===null||l===void 0?void 0:l[23])=="string"?mB(t.detail[23].toLowerCase()):mB()),(n=t.detail)!==null&&n!==void 0&&n[19]&&typeof((i=t.detail)===null||i===void 0?void 0:i[19])=="string"){const h=t.detail[19],f=h==null?void 0:h.split(";");for(let g=0;g<f.length;g++){var u;const _=go(u=f[g]).call(u);t.addresses[g]&&f&&(t.addresses[g].fingerprint=_)}}if(ee("GATEWAY_ADDRESS")&&ee("GATEWAY_ADDRESS").length>0){k.debug("assign gateway address to",ee("GATEWAY_ADDRESS"));const h=ee("GATEWAY_ADDRESS").map(f=>{var g,_;const y=(g=(_=t.addresses.find(T=>T.ip===f.ip&&T.port===f.port))===null||_===void 0?void 0:_.fingerprint)!==null&&g!==void 0?g:"";return{ip:f.ip,port:f.port,ticket:t.addresses[0]&&t.addresses[0].ticket,fingerprint:y}});t.addresses=h}},due=(t,n)=>{if(t.response_body&&t.response_body.length){const i=t.response_body[0];if(i.buffer.code!==0){const a=qp(i.buffer.code);throw new me(K.UPDATE_TICKET_FAILED,"[".concat(i.buffer.code,"]: ").concat(a.desc),{retry:a.retry})}return i.buffer.ticket}throw k.debug("update ticket request received ap response without response body:",n),new me(K.UPDATE_TICKET_FAILED,"cannot find response body from ap response",{retry:!1})},g1=(t,n,i)=>{const a=Math.floor(Math.random()*1e12),l={appid:t.appId,client_ts:Date.now(),opid:a,sid:t.sid,request_bodies:[{uri:22,buffer:{cname:t.cname,detail:h1({6:t.stringUid,11:n,12:ee("USE_NEW_TOKEN")?"1":void 0,22:n},t.apRTM?{26:"RTM2"}:{}),key:t.token,service_ids:i,uid:t.uid||0}}]};l.request_bodies.forEach(h=>{t.multiIP&&t.multiIP.gateway_ip&&(h.buffer.detail[5]=JSON.stringify({vocs_ip:[t.multiIP.uni_lbs_ip],vos_ip:[t.multiIP.gateway_ip]}))});const u=new FormData;return u.append("request",JSON.stringify(l)),[u,a]},hue=(t,n)=>{const i=Math.floor(Math.random()*1e12),a={appid:t.appId,client_ts:Date.now(),opid:i,sid:t.sid,request_bodies:[{uri:28,buffer:{cname:t.cname,detail:{1:"",6:t.stringUid,12:"1"},token:t.token,service_ids:n,uid:t.uid||0,edges_services:t.apResponse.addresses.map(u=>({ip:u.ip,port:u.port}))}}]},l=new FormData;return l.append("request",JSON.stringify(a)),[l,i]};let Yp=0;function Xp(t){return We.all(t.map(n=>n.then(i=>{throw i},i=>i))).then(n=>{throw n},n=>n)}const I0=async t=>{let{fragementLength:n,referenceList:i,asyncMapHandler:a,allFailedhandler:l,promisesCollector:u}=t,h=0;const f=n;let g,_=0;const y=async()=>{const T=(()=>{const A=h*f,D=A+f;return i.slice(A,D).map(a)})();u&&u.push(...T);try{g=await Xp(T)}catch(A){if(_+=f,h++,!(_>=i.length))return void await y();l(A)}T.forEach(A=>A.cancel())};return await y(),g},SB=async t=>{let{referenceList:n,asyncMapHandler:i,closeFn:a}=t;const l=n.length;let u=0;const h=async()=>{const f=i(n.shift());try{return await f}catch(g){if(u++,u>=l||a!=null&&a(g))throw g;return h()}};return h()};async function v1(t,n,i,a){return{gatewayInfo:await async function(u,h,f,g){let _=null;const y=[],T=async()=>{const D=ee("WEBCS_DOMAIN").slice(0,ee("AJAX_REQUEST_CONCURRENT")).map(U=>({url:u.proxyServer?"https://".concat(u.proxyServer,"/ap/?url=").concat(U+"/api/v2/transpond/webrtc?v=2"):"https://".concat(U,"/api/v2/transpond/webrtc?v=2"),areaCode:w0()})),W=g.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:D.map(U=>U.url)}),F=await I0({fragementLength:ee("FRAGEMENT_LENGTH"),referenceList:D,asyncMapHandler:U=>(k.debug("[".concat(u.clientId,"] Connect to choose_server:"),U.url),vB(U,u,h,f)),allFailedhandler:U=>{throw g.recordJoinChannelService({endTs:Date.now(),status:"error",errors:U},W),U[0]},promisesCollector:y});return g.recordJoinChannelService({endTs:Date.now(),status:"success"},W),F},A=async()=>{if(await yi(1e3),_!==null)return _;const D=ee("WEBCS_DOMAIN_BACKUP_LIST").map(U=>({url:u.proxyServer?"https://".concat(u.proxyServer,"/ap/?url=").concat(U+"/api/v2/transpond/webrtc?v=2"):"https://".concat(U,"/api/v2/transpond/webrtc?v=2"),areaCode:w0()})),W=g.recordJoinChannelService({endTs:void 0,startTs:Date.now(),status:"pending",service:"chooseServer",urls:D.map(U=>U.url)}),F=await I0({fragementLength:ee("FRAGEMENT_LENGTH"),referenceList:D,asyncMapHandler:U=>(k.debug("[".concat(u.clientId,"] Connect to backup choose_server:"),U.url),vB(U,u,h,f)),allFailedhandler:U=>{throw g.recordJoinChannelService({endTs:Date.now(),status:"error",errors:U},W),U[0]},promisesCollector:y});return g.recordJoinChannelService({endTs:Date.now(),status:"success"},W),F};try{return _=await Xp([T(),A()]),y.length&&y.forEach(D=>D.cancel&&typeof D.cancel=="function"&&D.cancel()),_}catch(D){throw D[0]}}(t,n,i,a)}}async function yB(t,n,i,a,l){const u=t.cloudProxyServer;if(u==="disabled"){if(!a)return;if(t.useLocalAccessPoint)return await v1(t,n,i,l);if(ee("JOIN_WITH_FALLBACK_MEDIA_PROXY")){const{gatewayInfo:A,proxyInfo:D}=await TB(t,n,i,l);if(t.turnServer&&t.turnServer.mode!=="auto")return{gatewayInfo:A};const W=D.map(F=>({turnServerURL:F.address,tcpport:F.tcpport||Gi.tcpport,udpport:F.udpport||Gi.udpport,username:F.username||Gi.username,password:F.password||Gi.password,forceturn:!1,security:!0}));if(l.useP2P){var h;const F=(h=t.uid)!==null&&h!==void 0?h:A.uid,U="glb:".concat(F.toString()),z=await Vw(U),X=D.map(ue=>({turnServerURL:ue.address,tcpport:ue.tcpport||Gi.tcpport,udpport:ue.udpport||Gi.udpport,username:U,password:z,forceturn:!1,security:!0}));W.push(...X)}return t.turnServer={mode:"manual",servers:W},{gatewayInfo:A}}return await v1(t,n,i,l)}const{proxyInfo:f,gatewayInfo:g}=await TB(t,n,i,l),_={gatewayInfo:g},y=f.map(A=>({turnServerURL:A.address,tcpport:u==="proxy3"?void 0:A.tcpport?A.tcpport:Gi.tcpport,udpport:u==="proxy4"?void 0:A.udpport?A.udpport:Gi.udpport,username:A.username||Gi.username,password:A.password||Gi.password,forceturn:u!=="proxy4",security:u==="proxy5"}));if(l.useP2P){var T;const A=(T=t.uid)!==null&&T!==void 0?T:g.uid,D="glb:".concat(A.toString()),W=await Vw(D),F=f.map(U=>({turnServerURL:U.address,tcpport:u==="proxy3"?void 0:U.tcpport||Gi.tcpport,udpport:u==="proxy4"?void 0:U.udpport||Gi.udpport,username:D,password:W,forceturn:u!=="proxy4",security:u==="proxy5"}));y.push(...F)}return t.turnServer={mode:"manual",servers:y},k.debug("[".concat(t.clientId,"] set proxy server: ").concat(t.proxyServer,", mode: ").concat(u)),_}async function CB(t,n,i,a,l){const u=ee("ACCOUNT_REGISTER").slice(0,ee("AJAX_REQUEST_CONCURRENT"));let h=[];h=n.proxyServer?u.map(g=>"https://".concat(n.proxyServer,"/ap/?url=").concat(g+"/api/v1")):u.map(g=>"https://".concat(g,"/api/v1"));const f=l==null?void 0:l.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"stringUID",urls:h});try{const g=await async function(_,y,T,A,D){const W=Date.now(),F={sid:T.sid,opid:10,appid:T.appId,string_uid:y};let U=_[0];const z=await bc(()=>Ic(U+"".concat(U.indexOf("?")===-1?"?":"&","action=stringuid"),{data:F,cancelToken:A,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":72}}),(X,ue)=>{if(X.code===0){if(X.uid<=0||X.uid>=Math.pow(2,32))throw k.error("Invalid Uint Uid ".concat(y," => ").concat(X.uid),X),ht.reqUserAccount(F.sid,{lts:W,success:!1,serverAddr:U,stringUid:F.string_uid,uid:X.uid,errorCode:K.INVALID_UINT_UID_FROM_STRING_UID,extend:F}),new me(K.INVALID_UINT_UID_FROM_STRING_UID);return ht.reqUserAccount(F.sid,{lts:W,success:!0,serverAddr:U,stringUid:F.string_uid,uid:X.uid,errorCode:null,extend:F}),!1}const pe=qp(X.code);return pe.retry&&(U=_[(ue+1)%_.length]),ht.reqUserAccount(F.sid,{lts:W,success:!1,serverAddr:U,stringUid:F.string_uid,uid:X.uid,errorCode:pe.desc,extend:F}),pe.retry},(X,ue)=>X.code!==K.OPERATION_ABORTED&&(ht.reqUserAccount(F.sid,{lts:W,success:!1,serverAddr:U,stringUid:F.string_uid,uid:null,errorCode:X.code,extend:F}),U=_[(ue+1)%_.length],!0),D);if(z.code!==0){const X=qp(z.code);throw new me(K.UNEXPECTED_RESPONSE,X.desc)}return z}(h,t,n,i,a);return l==null||l.recordJoinChannelService({status:"success",endTs:Date.now()},f),g.uid}catch(g){throw l==null||l.recordJoinChannelService({status:"error",endTs:Date.now(),errors:[g]},f),g}}async function pue(t,n,i){const a=ee("ACCOUNT_REGISTER");let l=[];l=n.proxyServer?a.map(u=>"https://".concat(n.proxyServer,"/ap/?url=").concat(u+"/api/v1")):a.map(u=>"https://".concat(u,"/api/v1"));try{return await SB({referenceList:l,asyncMapHandler:h=>async function(f,g,_,y){const T=Date.now(),A={sid:_.sid,opid:10,appid:_.appId,string_uid:g};try{const D=await Ic(f+"".concat(f.indexOf("?")===-1?"?":"&","action=stringuid"),{data:A,cancelToken:y,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":72}});if(D.code!==0){const W=qp(D.code);throw new me(K.UNEXPECTED_RESPONSE,"preload sua error:".concat(W.desc),W)}if(D.uid<=0||D.uid>=Math.pow(2,32))throw new me(K.INVALID_UINT_UID_FROM_STRING_UID);return{requestTime:T,url:f,req:A,uid:D.uid,elapse:Date.now()-T}}catch(D){throw D}}(h,t,n,i),closeFn:h=>h.code===K.OPERATION_ABORTED||h.code===K.UNEXPECTED_RESPONSE&&!h.data.retry})}catch(u){throw u}}async function fue(t,n,i){const a=ee("CDS_AP").slice(0,ee("AJAX_REQUEST_CONCURRENT")).map(g=>t.proxyServer?"https://".concat(t.proxyServer,"/ap/?url=").concat(g+"/api/v1"):"https://".concat(g,"/api/v1?action=config")),l=a.map(g=>function(_,y,T,A){const D=_n(),W={flag:64,cipher_method:0,features:{device:D.name,system:D.os,system_general:navigator.userAgent,vendor:y.appId,version:ls,cname:y.cname,sid:y.sid,session_id:y.sid,detail:"",proxyServer:y.proxyServer}};return bc(()=>Ic(_,{data:W,timeout:1e3,cancelToken:T,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":54}}),void 0,F=>F.code!==K.OPERATION_ABORTED,A)}(g,t,n,i));let u=null,h=null,f={};try{u=await Xp(l)}catch(g){if(g.code===K.OPERATION_ABORTED)throw g;h=g}if(l.forEach(g=>g.cancel()),ht.reportApiInvoke(t.sid,{name:ni.REQUEST_CONFIG_DISTRIBUTE,options:{error:h,res:u}}).onSuccess(),u&&u.test_tags)try{f=function(g){if(!g.test_tags)return{};const _=g.test_tags,y=Object.keys(_),T={};return y.forEach(A=>{var D;const W=go(D=A.slice(4)).call(D),F=JSON.parse(_[A])[1];T[W]=F}),T}(u)}catch{}return f}async function bB(t,n){const i=ee("WEBCS_DOMAIN").concat(ee("WEBCS_DOMAIN_BACKUP_LIST")).map(a=>({url:"https://".concat(a,"/api/v2/transpond/webrtc?v=2"),areaCode:w0(),serviceIds:[Yr.CHOOSE_SERVER,Yr.CLOUD_PROXY_FALLBACK]}));try{return await SB({referenceList:i,asyncMapHandler:l=>async function(u,h,f){let g,{url:_,areaCode:y,serviceIds:T}=u;const A=Date.now(),[D,W]=g1(h,y,T);let F=Dr.networkState;try{F&&Dr.networkState===xo.OFFLINE&&Dr.onlineWaiter&&await We.race([Dr.onlineWaiter,yi(qr.maxRetryTimeout)]),F=Dr.networkState;const{data:U,headers:z}=await Ic(_,{data:D,cancelToken:f,headers:{"Content-Type":"multipart/form-data;"}},!0,!0);g=z.http3==="1"?1:-1,(Ee=>{const Se=[];if(Ee.response_body.forEach(Re=>{const Ae=Re.buffer.code;if(Re.uri===23&&Ae===0&&!Re.buffer.edges_services)if(Re.buffer.flag===4194310)Re.buffer.edges_services=[];else{const Pe={error:new me(K.CAN_NOT_GET_GATEWAY_SERVER,"no edge services in ap response",{retry:!0,csIp:Ee.detail[502]}),flag:Re.buffer.flag};Se.push(Pe)}if(Ae!==0){const Pe=qp(Ae),tt={error:new me(K.CAN_NOT_GET_GATEWAY_SERVER,Pe.desc,{desc:Pe.desc,retry:Pe.retry,csIp:Ee.detail[502]}),flag:Re.buffer.flag};Re.buffer.flag===4194310?k.warning(tt.error.toString()):Se.push(tt)}}),Se.length)throw new me(K.CAN_NOT_GET_GATEWAY_SERVER,Se.map(Re=>"flag: ".concat(Re.flag,", message: ").concat(Re.error.message)).join(" | "),{retry:!!Se.find(Re=>Re.error.data.retry),csIp:Ee.detail[502],desc:[...new Set(Se.map(Re=>{var Ae;return Re==null||(Ae=Re.error)===null||Ae===void 0||(Ae=Ae.data)===null||Ae===void 0?void 0:Ae.desc}).filter(Re=>!!Re))]})})(U);const ue=R0(U,Yr.CHOOSE_SERVER),pe=R0(U,Yr.CLOUD_PROXY_FALLBACK);return m1(ue),{gatewayInfo:a1(ue,_),proxyInfo:pe,opid:W,requestTime:A,url:_,isHttp3:g,elapse:Date.now()-A}}catch(U){throw U}}(l,t,n),closeFn:l=>l.code===K.OPERATION_ABORTED||l.code===K.CAN_NOT_GET_GATEWAY_SERVER&&!l.data.retry})}catch(a){throw a}}async function TB(t,n,i,a){const l=ee("PROXY_SERVER_TYPE3"),u=(D,W,F)=>{let U=F||l;return Array.isArray(U)&&(U=W%2==0?l[1]:l[0]),"https://".concat(U,"/ap/?url=").concat(D)};let h=null;const f=[],g=async()=>{const D=ee("WEBCS_DOMAIN").slice(0,ee("AJAX_REQUEST_CONCURRENT")).map((U,z)=>{let X;return X=t.cloudProxyServer==="disabled"&&t.proxyServer?u("".concat(U,"/api/v2/transpond/webrtc?v=2"),z,t.proxyServer):t.cloudProxyServer==="disabled"||t.cloudProxyServer==="fallback"?"https://".concat(U,"/api/v2/transpond/webrtc?v=2"):u("".concat(U,"/api/v2/transpond/webrtc?v=2"),z),{url:X,areaCode:w0(),serviceIds:[Yr.CHOOSE_SERVER,t.cloudProxyServer==="proxy5"?Yr.CLOUD_PROXY_5:t.cloudProxyServer==="proxy3"||t.cloudProxyServer==="proxy4"?Yr.CLOUD_PROXY:Yr.CLOUD_PROXY_FALLBACK]}}),W=a.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:D.map(U=>U.url)}),F=await I0({fragementLength:ee("FRAGEMENT_LENGTH"),referenceList:D,asyncMapHandler:U=>(k.debug("[".concat(t.clientId,"] Connect to choose_server:"),U.url),EB(U,t,n,i)),allFailedhandler:U=>{throw a.recordJoinChannelService({endTs:Date.now(),status:"error",errors:U},W),U[0]},promisesCollector:f});return a.recordJoinChannelService({endTs:Date.now(),status:"success"},W),F},_=async()=>{if(await yi(1e3),h!==null)return h;const D=ee("WEBCS_DOMAIN_BACKUP_LIST").map((U,z)=>{let X;return X=t.cloudProxyServer==="disabled"&&t.proxyServer?u("".concat(U,"/api/v2/transpond/webrtc?v=2"),z,t.proxyServer):t.cloudProxyServer==="disabled"||t.cloudProxyServer==="fallback"?"https://".concat(U,"/api/v2/transpond/webrtc?v=2"):u("".concat(U,"/api/v2/transpond/webrtc?v=2"),z),{url:X,areaCode:w0(),serviceIds:[Yr.CHOOSE_SERVER,t.cloudProxyServer==="proxy5"?Yr.CLOUD_PROXY_5:t.cloudProxyServer==="proxy3"||t.cloudProxyServer==="proxy4"?Yr.CLOUD_PROXY:Yr.CLOUD_PROXY_FALLBACK]}}),W=a.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:D.map(U=>U.url)}),F=await I0({fragementLength:ee("FRAGEMENT_LENGTH"),referenceList:D,asyncMapHandler:U=>(k.debug("[".concat(t.clientId,"] Connect to backup choose_server:"),U.url),EB(U,t,n,i)),allFailedhandler:U=>{throw a.recordJoinChannelService({endTs:Date.now(),status:"error",errors:U},W),U[0]},promisesCollector:f});return a.recordJoinChannelService({endTs:Date.now(),status:"success"},W),F};let y,T,A;try{({gatewayInfo:y,proxyInfo:T,url:A}=await Xp([g(),_()]))}catch(D){throw D[0]}if(f.length&&f.forEach(D=>D.cancel&&typeof D.cancel=="function"&&D.cancel()),!y||!T)throw new me(K.UNEXPECTED_ERROR,"missing gateway or proxy response").print();if(t.apUrl=A,t.cloudProxyServer!=="disabled"&&Array.isArray(l)&&A){const D=/^https?:\/\/(.+?)(\/.*)?$/.exec(A)[1];Ye(l).call(l,D)&&(t.proxyServer=D,k.setProxyServer(D),ht.setProxyServer(D))}return h={gatewayInfo:y,proxyInfo:await lB(T,y.uid)},h}async function RB(t,n,i,a){const l=ee("UAP_AP").slice(0,ee("AJAX_REQUEST_CONCURRENT")).map(u=>n.proxyServer?"https://".concat(n.proxyServer,"/ap/?url=").concat(u+"/api/v1?action=uap"):"https://".concat(u,"/api/v1?action=uap"));return await uue(l,t,n,i,a)}async function mue(t,n,i){const a=ee("UAP_AP").slice(0,ee("AJAX_REQUEST_CONCURRENT")).map(u=>t.proxyServer?"https://".concat(t.proxyServer,"/ap/?url=").concat(u+"/api/v1?action=uap"):"https://".concat(u,"/api/v1?action=uap")),l=a.map(u=>function(h,f,g,_){const y={command:"convergeAllocateEdge",sid:f.sid,appId:f.appId,token:f.token,ts:Date.now(),version:ls,cname:f.cname,uid:f.uid.toString(),requestId:f1,seq:f1};f1+=1;const T={service_name:"tele_channel",json_body:JSON.stringify(y)};return bc(async()=>{const A=await Ic(h,{data:T,cancelToken:g,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":61}});if(A.code!==0){const W=new me(K.UNEXPECTED_RESPONSE,"cross channel ap error, code"+A.code,{retry:!0});throw k.error(W.toString()),W}const D=JSON.parse(A.json_body);if(D.code!==200){const W=new me(K.UNEXPECTED_RESPONSE,"cross channel app center error, code: ".concat(D.code,", reason: ").concat(D.reason));throw k.error(W.toString()),W}if(!D.servers||D.servers.length===0){const W=new me(K.UNEXPECTED_RESPONSE,"cross channel app center empty server");throw k.error(W.toString()),W}return{vid:D.vid,workerToken:D.workerToken,addressList:(ee("CHANNEL_MEDIA_RELAY_SERVERS")||D.servers).map(W=>"wss://".concat(W.address.replace(/\./g,"-"),".").concat(ee("WORKER_DOMAIN"),":").concat(W.wss))}},void 0,A=>!!(A.code!==K.OPERATION_ABORTED&&A.code!==K.UNEXPECTED_RESPONSE||A.data&&A.data.retry),_)}(u,t,n,i));try{const u=await Xp(l);return l.forEach(h=>h.cancel()),u}catch(u){throw u[0]}}async function gue(t,n,i){let a=null;const l=[],u=async h=>{const f=ee(h?"WEBCS_DOMAIN_BACKUP_LIST":"WEBCS_DOMAIN").map(g=>t.proxyServer?"https://".concat(t.proxyServer,"/ap/?url=").concat(g+"/api/v2/transpond/webrtc?v=2"):"https://".concat(g,"/api/v2/transpond/webrtc?v=2"));return h&&(await yi(1e3),a!==null)?a:await I0({fragementLength:ee("FRAGEMENT_LENGTH"),referenceList:f,asyncMapHandler:g=>(k.debug("[".concat(t.clientId,"] update ticket, Connect to ").concat(h?"backup":""," choose_server:"),g),function(_,y,T,A){const[D]=hue(y,[Yr.CHOOSE_SERVER]);let W=Dr.networkState;return bc(async()=>{W&&Dr.networkState===xo.OFFLINE&&Dr.onlineWaiter&&await We.race([Dr.onlineWaiter,yi(A&&A.maxRetryTimeout||qr.maxRetryTimeout)]),W=Dr.networkState;const F=await Ic(_,{data:D,cancelToken:T,headers:{"Content-Type":"multipart/form-data;"}},!0);return due(F,_)},()=>!1,F=>F.code!==K.OPERATION_ABORTED&&(F.code===K.UPDATE_TICKET_FAILED?F.data.retry:(k.warning("[".concat(y.clientId,"] update ticket network error, retry"),F),!0)),A)}(g,t,n,i)),allFailedhandler:g=>{throw g[0]},promisesCollector:l})};try{return a=await Xp([u(!1),u(!0)]),l.length&&l.forEach(h=>h.cancel&&typeof h.cancel=="function"&&h.cancel()),a}catch(h){throw h[0]}}function wB(t,n){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),i.push.apply(i,a)}return i}function IB(t){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?wB(Object(i),!0).forEach(function(a){V(t,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):wB(Object(i)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(i,a))})}return t}class vue extends _r{get isSuccess(){return!!this.configs}constructor(){super(),V(this,"configs",void 0),V(this,"joinInfo",void 0),V(this,"cancelToken",void 0),V(this,"retryConfig",{timeout:3e3,timeoutFactor:1.5,maxRetryCount:1,maxRetryTimeout:1e4}),V(this,"interval",void 0),V(this,"mutex",new Oi("config-distribute")),V(this,"mutableParamsRead",!1)}startGetConfigDistribute(n,i){this.joinInfo=n,this.cancelToken=i,this.interval&&this.stopGetConfigDistribute(),ee("ENABLE_CONFIG_DISTRIBUTE")&&(this.updateConfigDistribute(),this.interval=window.setInterval(()=>{this.updateConfigDistribute()},ee("CONFIG_DISTRIBUTE_INTERVAL")))}stopGetConfigDistribute(){this.interval&&clearInterval(this.interval),this.interval=void 0,this.joinInfo=void 0,this.cancelToken=void 0}async awaitConfigDistributeComplete(){this.mutex.isLocked&&(await this.mutex.lock())()}async updateConfigDistribute(){if(this.mutableParamsRead||(this.mutableParamsRead=!0,ht.reportApiInvoke(null,{options:void 0,name:ni.LOAD_CONFIG_FROM_LOCALSTORAGE,tag:Nr.TRACER}).onSuccess(JSON.stringify(ju))),!this.joinInfo||!this.cancelToken||!this.retryConfig)return void k.debug("[config-distribute] get config distribute interrupted have no joininfo");let n;const i=await this.mutex.lock();try{n=await fue(this.joinInfo,this.cancelToken,this.retryConfig),k.debug("[config-distribute] get config distribute",JSON.stringify(n)),n.limit_bitrate&&this.handleBitrateLimit(n.limit_bitrate),this.cacheGlobalParameterConfig(n),this.configs=n}catch(a){const l=new me(K.NETWORK_RESPONSE_ERROR,a);k.warning("[config-distribute] ".concat(l.toString()))}finally{i()}}getBitrateLimit(){return this.configs?this.configs.limit_bitrate:void 0}handleBitrateLimit(n){var i;(i=n)&&i.uplink&&i.id&&i.uplink.max_bitrate!==void 0&&i.uplink.min_bitrate!==void 0&&(this.configs&&this.configs.limit_bitrate?this.configs&&this.configs.limit_bitrate&&this.configs.limit_bitrate.id!==n.id&&this.emit(i1.UPDATE_BITRATE_LIMIT,n):this.emit(i1.UPDATE_BITRATE_LIMIT,n))}getLowStreamConfigDistribute(){return this.configs&&this.configs.limit_bitrate&&IB({},this.configs.limit_bitrate.low_stream_uplink)}cacheGlobalParameterConfig(n){var i;const a=t0(i=Object.keys(n).filter(u=>/^webrtc_ng_global_parameter/.test(u))).call(i);for(let u=0;u<a.length;u++)for(let h=a.length-1;h>u;h--){const f=a[h];if(typeof n[f].__priority=="number"){const g=n[f].__priority,_=a[h-1];if(typeof n[_].__priority=="number"){if(!(g>n[_].__priority))continue;{const y=f;a[h]=a[h-1],a[h-1]=y}}else{const y=f;a[h]=a[h-1],a[h-1]=y}}}const l={};a.forEach(u=>{const h=n[u],f=h.__expires;Object.keys(h).forEach(g=>{g==="__priority"||g==="__expires"||Object.prototype.hasOwnProperty.call(l,g)||(l[g]=IB({value:h[g]},f&&{expires:f}))})});try{(function(f){try{const g=Date.now();Object.keys(f).forEach(_=>{switch(_){case"ENABLE_EVENT_REPORT":case"UPLOAD_LOG":case"ENABLE_AG_ADAPTATION":case"FORCE_AG_HIGH_FRAMERATE":case"FORCE_SUPPORT_AG_ADAPTATION":case"ENCODER_CONFIG_LIMIT":case"CAMERA_CAPTURE_CONFIG":case"ENABLE_PRELOAD":if(Object.prototype.hasOwnProperty.call(ui,_)){const{value:y,expires:T}=f[_];if(T&&T<=g)return;ju[_]=y,ui[_]=y,k.debug("Update global parameters from config distribute",_,y)}}})}catch(g){k.error("Error update config immediately: ".concat(f),g.message)}})(l);const u=JSON.stringify(l),h=window.btoa(u);window.localStorage.setItem("websdk_ng_global_parameter",h),k.debug("Caching global parameters ".concat(u))}catch(u){k.error("Error caching global parameters:",u.message)}}}var Hs,Eue=c(K4),AB=oe,_ue=b,Sue=de,yue=d,E1=sE,Cue=Wm,bue=fe,Tue=Yn,Rue=Ne,Jp=Object.assign,OB=Object.defineProperty,wue=_ue([].concat),Iue=!Jp||yue(function(){if(AB&&Jp({b:1},Jp(OB({},"a",{enumerable:!0,get:function(){OB(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var t={},n={},i=Symbol(),a="abcdefghijklmnopqrst";return t[i]=7,a.split("").forEach(function(l){n[l]=l}),Jp({},t)[i]!=7||E1(Jp({},n)).join("")!=a})?function(t,n){for(var i=Tue(t),a=arguments.length,l=1,u=Cue.f,h=bue.f;a>l;)for(var f,g=Rue(arguments[l++]),_=u?wue(E1(g),u(g)):E1(g),y=_.length,T=0;y>T;)f=_[T++],AB&&!Sue(h,g,f)||(i[f]=g[f]);return i}:Jp,Aue=na,Oue=sL,xue=Au,Nue=de,Due=Yn,Pue=function(t,n,i,a){try{return a?n(Aue(i)[0],i[1]):n(i)}catch(l){Oue(t,"throw",l)}},Lue=iL,kue=_E,Mue=Bl,xB=DE,Fue=kT,Uue=uE,NB=Array,sh=b,_1=2147483647,Bue=/[^\0-\u007E]/,DB=/[.\u3002\uFF0E\uFF61]/g,PB="Overflow: input needs wider integers to process",LB=RangeError,Vue=sh(DB.exec),Qp=Math.floor,S1=String.fromCharCode,kB=sh("".charCodeAt),MB=sh([].join),Ku=sh([].push),jue=sh("".replace),$ue=sh("".split),Hue=sh("".toLowerCase),FB=function(t){return t+22+75*(t<26)},Wue=function(t,n,i){var a=0;for(t=i?Qp(t/700):t>>1,t+=Qp(t/n);t>455;)t=Qp(t/35),a+=36;return Qp(a+36*t/(t+38))},zue=function(t){var n=[];t=function(z){for(var X=[],ue=0,pe=z.length;ue<pe;){var Ee=kB(z,ue++);if(Ee>=55296&&Ee<=56319&&ue<pe){var Se=kB(z,ue++);(64512&Se)==56320?Ku(X,((1023&Ee)<<10)+(1023&Se)+65536):(Ku(X,Ee),ue--)}else Ku(X,Ee)}return X}(t);var i,a,l=t.length,u=128,h=0,f=72;for(i=0;i<t.length;i++)(a=t[i])<128&&Ku(n,S1(a));var g=n.length,_=g;for(g&&Ku(n,"-");_<l;){var y=_1;for(i=0;i<t.length;i++)(a=t[i])>=u&&a<y&&(y=a);var T=_+1;if(y-u>Qp((_1-h)/T))throw LB(PB);for(h+=(y-u)*T,u=y,i=0;i<t.length;i++){if((a=t[i])<u&&++h>_1)throw LB(PB);if(a==u){for(var A=h,D=36;;){var W=D<=f?1:D>=f+26?26:D-f;if(A<W)break;var F=A-W,U=36-W;Ku(n,S1(FB(W+F%U))),A=Qp(F/U),D+=36}Ku(n,S1(FB(A))),f=Wue(h,T,_==g),h=0,_++}}h++,u++}return MB(n,"")},Gue=ir,y1=oe,Kue=lw,C1=I,UB=Au,Ws=b,T_=xu,zs=EE,que=qT,b1=An,T1=Iue,Zp=function(t){var n=Due(t),i=kue(this),a=arguments.length,l=a>1?arguments[1]:void 0,u=l!==void 0;u&&(l=xue(l,a>2?arguments[2]:void 0));var h,f,g,_,y,T,A=Uue(n),D=0;if(!A||this===NB&&Lue(A))for(h=Mue(n),f=i?new this(h):NB(h);h>D;D++)T=u?l(n[D],D):n[D],xB(f,D,T);else for(y=(_=Fue(n,A)).next,f=i?new this:[];!(g=Nue(y,_)).done;D++)T=u?Pue(_,l,[g.value,D],!0):g.value,xB(f,D,T);return f.length=D,f},Ac=FR,Yue=RR.codeAt,Xue=function(t){var n,i,a=[],l=$ue(jue(Hue(t),DB,"."),".");for(n=0;n<l.length;n++)i=l[n],Ku(a,Vue(Bue,i)?"xn--"+zue(i):i);return MB(a,".")},Kl=ss,Jue=Nu,Que=SE,BB=rce,VB=Gd,Zue=VB.set,R_=VB.getterFor("URL"),ede=BB.URLSearchParams,tde=BB.getState,A0=C1.URL,R1=C1.TypeError,w_=C1.parseInt,nde=Math.floor,jB=Math.pow,Gs=Ws("".charAt),Oc=Ws(/./.exec),O0=Ws([].join),rde=Ws(1 .toString),ide=Ws([].pop),ef=Ws([].push),w1=Ws("".replace),ode=Ws([].shift),ade=Ws("".split),x0=Ws("".slice),I_=Ws("".toLowerCase),sde=Ws([].unshift),I1="Invalid scheme",ch="Invalid host",$B="Invalid port",HB=/[a-z]/i,cde=/[\d+-.a-z]/i,A1=/\d/,lde=/^0x/i,ude=/^[0-7]+$/,dde=/^\d+$/,WB=/^[\da-f]+$/i,hde=/[\0\t\n\r #%/:<>?@[\\\]^|]/,pde=/[\0\t\n\r #/:<>?@[\\\]^|]/,fde=/^[\u0000-\u0020]+/,mde=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,gde=/[\t\n\r]/g,N0=function(t){var n,i,a,l;if(typeof t=="number"){for(n=[],i=0;i<4;i++)sde(n,t%256),t=nde(t/256);return O0(n,".")}if(typeof t=="object"){for(n="",a=function(u){for(var h=null,f=1,g=null,_=0,y=0;y<8;y++)u[y]!==0?(_>f&&(h=g,f=_),g=null,_=0):(g===null&&(g=y),++_);return _>f&&(h=g,f=_),h}(t),i=0;i<8;i++)l&&t[i]===0||(l&&(l=!1),a===i?(n+=i?":":"::",l=!0):(n+=rde(t[i],16),i<7&&(n+=":")));return"["+n+"]"}return t},A_={},zB=T1({},A_,{" ":1,'"':1,"<":1,">":1,"`":1}),GB=T1({},zB,{"#":1,"?":1,"{":1,"}":1}),O1=T1({},GB,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),qu=function(t,n){var i=Yue(t,0);return i>32&&i<127&&!b1(n,t)?t:encodeURIComponent(t)},O_={ftp:21,file:null,http:80,https:443,ws:80,wss:443},D0=function(t,n){var i;return t.length==2&&Oc(HB,Gs(t,0))&&((i=Gs(t,1))==":"||!n&&i=="|")},KB=function(t){var n;return t.length>1&&D0(x0(t,0,2))&&(t.length==2||(n=Gs(t,2))==="/"||n==="\\"||n==="?"||n==="#")},vde=function(t){return t==="."||I_(t)==="%2e"},x1={},qB={},N1={},YB={},XB={},D1={},JB={},QB={},x_={},N_={},P1={},L1={},k1={},M1={},ZB={},F1={},tf={},hl={},e3={},lh={},ql={},U1=function(t,n,i){var a,l,u,h=Kl(t);if(n){if(l=this.parse(h))throw R1(l);this.searchParams=null}else{if(i!==void 0&&(a=new U1(i,!0)),l=this.parse(h,null,a))throw R1(l);(u=tde(new ede)).bindURL(this),this.searchParams=u}};U1.prototype={type:"URL",parse:function(t,n,i){var a,l,u,h,f,g=this,_=n||x1,y=0,T="",A=!1,D=!1,W=!1;for(t=Kl(t),n||(g.scheme="",g.username="",g.password="",g.host=null,g.port=null,g.path=[],g.query=null,g.fragment=null,g.cannotBeABaseURL=!1,t=w1(t,fde,""),t=w1(t,mde,"$1")),t=w1(t,gde,""),a=Zp(t);y<=a.length;){switch(l=a[y],_){case x1:if(!l||!Oc(HB,l)){if(n)return I1;_=N1;continue}T+=I_(l),_=qB;break;case qB:if(l&&(Oc(cde,l)||l=="+"||l=="-"||l=="."))T+=I_(l);else{if(l!=":"){if(n)return I1;T="",_=N1,y=0;continue}if(n&&(g.isSpecial()!=b1(O_,T)||T=="file"&&(g.includesCredentials()||g.port!==null)||g.scheme=="file"&&!g.host))return;if(g.scheme=T,n)return void(g.isSpecial()&&O_[g.scheme]==g.port&&(g.port=null));T="",g.scheme=="file"?_=M1:g.isSpecial()&&i&&i.scheme==g.scheme?_=YB:g.isSpecial()?_=QB:a[y+1]=="/"?(_=XB,y++):(g.cannotBeABaseURL=!0,ef(g.path,""),_=e3)}break;case N1:if(!i||i.cannotBeABaseURL&&l!="#")return I1;if(i.cannotBeABaseURL&&l=="#"){g.scheme=i.scheme,g.path=Ac(i.path),g.query=i.query,g.fragment="",g.cannotBeABaseURL=!0,_=ql;break}_=i.scheme=="file"?M1:D1;continue;case YB:if(l!="/"||a[y+1]!="/"){_=D1;continue}_=x_,y++;break;case XB:if(l=="/"){_=N_;break}_=hl;continue;case D1:if(g.scheme=i.scheme,l==Hs)g.username=i.username,g.password=i.password,g.host=i.host,g.port=i.port,g.path=Ac(i.path),g.query=i.query;else if(l=="/"||l=="\\"&&g.isSpecial())_=JB;else if(l=="?")g.username=i.username,g.password=i.password,g.host=i.host,g.port=i.port,g.path=Ac(i.path),g.query="",_=lh;else{if(l!="#"){g.username=i.username,g.password=i.password,g.host=i.host,g.port=i.port,g.path=Ac(i.path),g.path.length--,_=hl;continue}g.username=i.username,g.password=i.password,g.host=i.host,g.port=i.port,g.path=Ac(i.path),g.query=i.query,g.fragment="",_=ql}break;case JB:if(!g.isSpecial()||l!="/"&&l!="\\"){if(l!="/"){g.username=i.username,g.password=i.password,g.host=i.host,g.port=i.port,_=hl;continue}_=N_}else _=x_;break;case QB:if(_=x_,l!="/"||Gs(T,y+1)!="/")continue;y++;break;case x_:if(l!="/"&&l!="\\"){_=N_;continue}break;case N_:if(l=="@"){A&&(T="%40"+T),A=!0,u=Zp(T);for(var F=0;F<u.length;F++){var U=u[F];if(U!=":"||W){var z=qu(U,O1);W?g.password+=z:g.username+=z}else W=!0}T=""}else if(l==Hs||l=="/"||l=="?"||l=="#"||l=="\\"&&g.isSpecial()){if(A&&T=="")return"Invalid authority";y-=Zp(T).length+1,T="",_=P1}else T+=l;break;case P1:case L1:if(n&&g.scheme=="file"){_=F1;continue}if(l!=":"||D){if(l==Hs||l=="/"||l=="?"||l=="#"||l=="\\"&&g.isSpecial()){if(g.isSpecial()&&T=="")return ch;if(n&&T==""&&(g.includesCredentials()||g.port!==null))return;if(h=g.parseHost(T))return h;if(T="",_=tf,n)return;continue}l=="["?D=!0:l=="]"&&(D=!1),T+=l}else{if(T=="")return ch;if(h=g.parseHost(T))return h;if(T="",_=k1,n==L1)return}break;case k1:if(!Oc(A1,l)){if(l==Hs||l=="/"||l=="?"||l=="#"||l=="\\"&&g.isSpecial()||n){if(T!=""){var X=w_(T,10);if(X>65535)return $B;g.port=g.isSpecial()&&X===O_[g.scheme]?null:X,T=""}if(n)return;_=tf;continue}return $B}T+=l;break;case M1:if(g.scheme="file",l=="/"||l=="\\")_=ZB;else{if(!i||i.scheme!="file"){_=hl;continue}if(l==Hs)g.host=i.host,g.path=Ac(i.path),g.query=i.query;else if(l=="?")g.host=i.host,g.path=Ac(i.path),g.query="",_=lh;else{if(l!="#"){KB(O0(Ac(a,y),""))||(g.host=i.host,g.path=Ac(i.path),g.shortenPath()),_=hl;continue}g.host=i.host,g.path=Ac(i.path),g.query=i.query,g.fragment="",_=ql}}break;case ZB:if(l=="/"||l=="\\"){_=F1;break}i&&i.scheme=="file"&&!KB(O0(Ac(a,y),""))&&(D0(i.path[0],!0)?ef(g.path,i.path[0]):g.host=i.host),_=hl;continue;case F1:if(l==Hs||l=="/"||l=="\\"||l=="?"||l=="#"){if(!n&&D0(T))_=hl;else if(T==""){if(g.host="",n)return;_=tf}else{if(h=g.parseHost(T))return h;if(g.host=="localhost"&&(g.host=""),n)return;T="",_=tf}continue}T+=l;break;case tf:if(g.isSpecial()){if(_=hl,l!="/"&&l!="\\")continue}else if(n||l!="?")if(n||l!="#"){if(l!=Hs&&(_=hl,l!="/"))continue}else g.fragment="",_=ql;else g.query="",_=lh;break;case hl:if(l==Hs||l=="/"||l=="\\"&&g.isSpecial()||!n&&(l=="?"||l=="#")){if((f=I_(f=T))===".."||f==="%2e."||f===".%2e"||f==="%2e%2e"?(g.shortenPath(),l=="/"||l=="\\"&&g.isSpecial()||ef(g.path,"")):vde(T)?l=="/"||l=="\\"&&g.isSpecial()||ef(g.path,""):(g.scheme=="file"&&!g.path.length&&D0(T)&&(g.host&&(g.host=""),T=Gs(T,0)+":"),ef(g.path,T)),T="",g.scheme=="file"&&(l==Hs||l=="?"||l=="#"))for(;g.path.length>1&&g.path[0]==="";)ode(g.path);l=="?"?(g.query="",_=lh):l=="#"&&(g.fragment="",_=ql)}else T+=qu(l,GB);break;case e3:l=="?"?(g.query="",_=lh):l=="#"?(g.fragment="",_=ql):l!=Hs&&(g.path[0]+=qu(l,A_));break;case lh:n||l!="#"?l!=Hs&&(l=="'"&&g.isSpecial()?g.query+="%27":g.query+=l=="#"?"%23":qu(l,A_)):(g.fragment="",_=ql);break;case ql:l!=Hs&&(g.fragment+=qu(l,zB))}y++}},parseHost:function(t){var n,i,a;if(Gs(t,0)=="["){if(Gs(t,t.length-1)!="]"||(n=function(l){var u,h,f,g,_,y,T,A=[0,0,0,0,0,0,0,0],D=0,W=null,F=0,U=function(){return Gs(l,F)};if(U()==":"){if(Gs(l,1)!=":")return;F+=2,W=++D}for(;U();){if(D==8)return;if(U()!=":"){for(u=h=0;h<4&&Oc(WB,U());)u=16*u+w_(U(),16),F++,h++;if(U()=="."){if(h==0||(F-=h,D>6))return;for(f=0;U();){if(g=null,f>0){if(!(U()=="."&&f<4))return;F++}if(!Oc(A1,U()))return;for(;Oc(A1,U());){if(_=w_(U(),10),g===null)g=_;else{if(g==0)return;g=10*g+_}if(g>255)return;F++}A[D]=256*A[D]+g,++f!=2&&f!=4||D++}if(f!=4)return;break}if(U()==":"){if(F++,!U())return}else if(U())return;A[D++]=u}else{if(W!==null)return;F++,W=++D}}if(W!==null)for(y=D-W,D=7;D!=0&&y>0;)T=A[D],A[D--]=A[W+y-1],A[W+--y]=T;else if(D!=8)return;return A}(x0(t,1,-1)),!n))return ch;this.host=n}else if(this.isSpecial()){if(t=Xue(t),Oc(hde,t)||(n=function(l){var u,h,f,g,_,y,T,A=ade(l,".");if(A.length&&A[A.length-1]==""&&A.length--,(u=A.length)>4)return l;for(h=[],f=0;f<u;f++){if((g=A[f])=="")return l;if(_=10,g.length>1&&Gs(g,0)=="0"&&(_=Oc(lde,g)?16:8,g=x0(g,_==8?1:2)),g==="")y=0;else{if(!Oc(_==10?dde:_==8?ude:WB,g))return l;y=w_(g,_)}ef(h,y)}for(f=0;f<u;f++)if(y=h[f],f==u-1){if(y>=jB(256,5-u))return null}else if(y>255)return null;for(T=ide(h),f=0;f<h.length;f++)T+=h[f]*jB(256,3-f);return T}(t),n===null))return ch;this.host=n}else{if(Oc(pde,t))return ch;for(n="",i=Zp(t),a=0;a<i.length;a++)n+=qu(i[a],A_);this.host=n}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||this.scheme=="file"},includesCredentials:function(){return this.username!=""||this.password!=""},isSpecial:function(){return b1(O_,this.scheme)},shortenPath:function(){var t=this.path,n=t.length;!n||this.scheme=="file"&&n==1&&D0(t[0],!0)||t.length--},serialize:function(){var t=this,n=t.scheme,i=t.username,a=t.password,l=t.host,u=t.port,h=t.path,f=t.query,g=t.fragment,_=n+":";return l!==null?(_+="//",t.includesCredentials()&&(_+=i+(a?":"+a:"")+"@"),_+=N0(l),u!==null&&(_+=":"+u)):n=="file"&&(_+="//"),_+=t.cannotBeABaseURL?h[0]:h.length?"/"+O0(h,"/"):"",f!==null&&(_+="?"+f),g!==null&&(_+="#"+g),_},setHref:function(t){var n=this.parse(t);if(n)throw R1(n);this.searchParams.update()},getOrigin:function(){var t=this.scheme,n=this.port;if(t=="blob")try{return new nf(t.path[0]).origin}catch{return"null"}return t!="file"&&this.isSpecial()?t+"://"+N0(this.host)+(n!==null?":"+n:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(t){this.parse(Kl(t)+":",x1)},getUsername:function(){return this.username},setUsername:function(t){var n=Zp(Kl(t));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var i=0;i<n.length;i++)this.username+=qu(n[i],O1)}},getPassword:function(){return this.password},setPassword:function(t){var n=Zp(Kl(t));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var i=0;i<n.length;i++)this.password+=qu(n[i],O1)}},getHost:function(){var t=this.host,n=this.port;return t===null?"":n===null?N0(t):N0(t)+":"+n},setHost:function(t){this.cannotBeABaseURL||this.parse(t,P1)},getHostname:function(){var t=this.host;return t===null?"":N0(t)},setHostname:function(t){this.cannotBeABaseURL||this.parse(t,L1)},getPort:function(){var t=this.port;return t===null?"":Kl(t)},setPort:function(t){this.cannotHaveUsernamePasswordPort()||((t=Kl(t))==""?this.port=null:this.parse(t,k1))},getPathname:function(){var t=this.path;return this.cannotBeABaseURL?t[0]:t.length?"/"+O0(t,"/"):""},setPathname:function(t){this.cannotBeABaseURL||(this.path=[],this.parse(t,tf))},getSearch:function(){var t=this.query;return t?"?"+t:""},setSearch:function(t){(t=Kl(t))==""?this.query=null:(Gs(t,0)=="?"&&(t=x0(t,1)),this.query="",this.parse(t,lh)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var t=this.fragment;return t?"#"+t:""},setHash:function(t){(t=Kl(t))!=""?(Gs(t,0)=="#"&&(t=x0(t,1)),this.fragment="",this.parse(t,ql)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var nf=function(t){var n=que(this,Ra),i=Que(arguments.length,1)>1?arguments[1]:void 0,a=Zue(n,new U1(t,!1,i));y1||(n.href=a.serialize(),n.origin=a.getOrigin(),n.protocol=a.getProtocol(),n.username=a.getUsername(),n.password=a.getPassword(),n.host=a.getHost(),n.hostname=a.getHostname(),n.port=a.getPort(),n.pathname=a.getPathname(),n.search=a.getSearch(),n.searchParams=a.getSearchParams(),n.hash=a.getHash())},Ra=nf.prototype,Ks=function(t,n){return{get:function(){return R_(this)[t]()},set:n&&function(i){return R_(this)[n](i)},configurable:!0,enumerable:!0}};if(y1&&(zs(Ra,"href",Ks("serialize","setHref")),zs(Ra,"origin",Ks("getOrigin")),zs(Ra,"protocol",Ks("getProtocol","setProtocol")),zs(Ra,"username",Ks("getUsername","setUsername")),zs(Ra,"password",Ks("getPassword","setPassword")),zs(Ra,"host",Ks("getHost","setHost")),zs(Ra,"hostname",Ks("getHostname","setHostname")),zs(Ra,"port",Ks("getPort","setPort")),zs(Ra,"pathname",Ks("getPathname","setPathname")),zs(Ra,"search",Ks("getSearch","setSearch")),zs(Ra,"searchParams",Ks("getSearchParams")),zs(Ra,"hash",Ks("getHash","setHash"))),T_(Ra,"toJSON",function(){return R_(this).serialize()},{enumerable:!0}),T_(Ra,"toString",function(){return R_(this).serialize()},{enumerable:!0}),A0){var t3=A0.createObjectURL,n3=A0.revokeObjectURL;t3&&T_(nf,"createObjectURL",UB(t3,A0)),n3&&T_(nf,"revokeObjectURL",UB(n3,A0))}Jue(nf,"URL"),Gue({global:!0,constructor:!0,forced:!Kue,sham:!y1},{URL:nf});var Ede=ir,_de=d,Sde=SE,r3=ss,yde=lw,i3=Wt("URL");Ede({target:"URL",stat:!0,forced:!(yde&&_de(function(){i3.canParse()}))},{canParse:function(t){var n=Sde(arguments.length,1),i=r3(t),a=n<2||arguments[1]===void 0?void 0:r3(arguments[1]);try{return!!new i3(i,a)}catch{return!1}}});var o3=c(ct.URL),Cde=R,bde=LU,a3=RegExp.prototype,Tde=function(t){return t===a3||Cde(a3,t)?bde(t):t.flags},Eo=c(Tde);function rf(t){let n=t.length;for(;--n>=0;)t[n]=0}const B1=256,s3=286,P0=30,L0=15,V1=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),D_=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Rde=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),c3=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Yl=new Array(576);rf(Yl);const k0=new Array(60);rf(k0);const M0=new Array(512);rf(M0);const F0=new Array(256);rf(F0);const j1=new Array(29);rf(j1);const P_=new Array(P0);function $1(t,n,i,a,l){this.static_tree=t,this.extra_bits=n,this.extra_base=i,this.elems=a,this.max_length=l,this.has_stree=t&&t.length}let l3,u3,d3;function H1(t,n){this.dyn_tree=t,this.max_code=0,this.stat_desc=n}rf(P_);const h3=t=>t<256?M0[t]:M0[256+(t>>>7)],U0=(t,n)=>{t.pending_buf[t.pending++]=255&n,t.pending_buf[t.pending++]=n>>>8&255},Ha=(t,n,i)=>{t.bi_valid>16-i?(t.bi_buf|=n<<t.bi_valid&65535,U0(t,t.bi_buf),t.bi_buf=n>>16-t.bi_valid,t.bi_valid+=i-16):(t.bi_buf|=n<<t.bi_valid&65535,t.bi_valid+=i)},pl=(t,n,i)=>{Ha(t,i[2*n],i[2*n+1])},p3=(t,n)=>{let i=0;do i|=1&t,t>>>=1,i<<=1;while(--n>0);return i>>>1},f3=(t,n,i)=>{const a=new Array(16);let l,u,h=0;for(l=1;l<=L0;l++)h=h+i[l-1]<<1,a[l]=h;for(u=0;u<=n;u++){let f=t[2*u+1];f!==0&&(t[2*u]=p3(a[f]++,f))}},m3=t=>{let n;for(n=0;n<s3;n++)t.dyn_ltree[2*n]=0;for(n=0;n<P0;n++)t.dyn_dtree[2*n]=0;for(n=0;n<19;n++)t.bl_tree[2*n]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.sym_next=t.matches=0},g3=t=>{t.bi_valid>8?U0(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},v3=(t,n,i,a)=>{const l=2*n,u=2*i;return t[l]<t[u]||t[l]===t[u]&&a[n]<=a[i]},W1=(t,n,i)=>{const a=t.heap[i];let l=i<<1;for(;l<=t.heap_len&&(l<t.heap_len&&v3(n,t.heap[l+1],t.heap[l],t.depth)&&l++,!v3(n,a,t.heap[l],t.depth));)t.heap[i]=t.heap[l],i=l,l<<=1;t.heap[i]=a},E3=(t,n,i)=>{let a,l,u,h,f=0;if(t.sym_next!==0)do a=255&t.pending_buf[t.sym_buf+f++],a+=(255&t.pending_buf[t.sym_buf+f++])<<8,l=t.pending_buf[t.sym_buf+f++],a===0?pl(t,l,n):(u=F0[l],pl(t,u+B1+1,n),h=V1[u],h!==0&&(l-=j1[u],Ha(t,l,h)),a--,u=h3(a),pl(t,u,i),h=D_[u],h!==0&&(a-=P_[u],Ha(t,a,h)));while(f<t.sym_next);pl(t,256,n)},z1=(t,n)=>{const i=n.dyn_tree,a=n.stat_desc.static_tree,l=n.stat_desc.has_stree,u=n.stat_desc.elems;let h,f,g,_=-1;for(t.heap_len=0,t.heap_max=573,h=0;h<u;h++)i[2*h]!==0?(t.heap[++t.heap_len]=_=h,t.depth[h]=0):i[2*h+1]=0;for(;t.heap_len<2;)g=t.heap[++t.heap_len]=_<2?++_:0,i[2*g]=1,t.depth[g]=0,t.opt_len--,l&&(t.static_len-=a[2*g+1]);for(n.max_code=_,h=t.heap_len>>1;h>=1;h--)W1(t,i,h);g=u;do h=t.heap[1],t.heap[1]=t.heap[t.heap_len--],W1(t,i,1),f=t.heap[1],t.heap[--t.heap_max]=h,t.heap[--t.heap_max]=f,i[2*g]=i[2*h]+i[2*f],t.depth[g]=(t.depth[h]>=t.depth[f]?t.depth[h]:t.depth[f])+1,i[2*h+1]=i[2*f+1]=g,t.heap[1]=g++,W1(t,i,1);while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],((y,T)=>{const A=T.dyn_tree,D=T.max_code,W=T.stat_desc.static_tree,F=T.stat_desc.has_stree,U=T.stat_desc.extra_bits,z=T.stat_desc.extra_base,X=T.stat_desc.max_length;let ue,pe,Ee,Se,Re,Ae,Pe=0;for(Se=0;Se<=L0;Se++)y.bl_count[Se]=0;for(A[2*y.heap[y.heap_max]+1]=0,ue=y.heap_max+1;ue<573;ue++)pe=y.heap[ue],Se=A[2*A[2*pe+1]+1]+1,Se>X&&(Se=X,Pe++),A[2*pe+1]=Se,pe>D||(y.bl_count[Se]++,Re=0,pe>=z&&(Re=U[pe-z]),Ae=A[2*pe],y.opt_len+=Ae*(Se+Re),F&&(y.static_len+=Ae*(W[2*pe+1]+Re)));if(Pe!==0){do{for(Se=X-1;y.bl_count[Se]===0;)Se--;y.bl_count[Se]--,y.bl_count[Se+1]+=2,y.bl_count[X]--,Pe-=2}while(Pe>0);for(Se=X;Se!==0;Se--)for(pe=y.bl_count[Se];pe!==0;)Ee=y.heap[--ue],Ee>D||(A[2*Ee+1]!==Se&&(y.opt_len+=(Se-A[2*Ee+1])*A[2*Ee],A[2*Ee+1]=Se),pe--)}})(t,n),f3(i,_,t.bl_count)},_3=(t,n,i)=>{let a,l,u=-1,h=n[1],f=0,g=7,_=4;for(h===0&&(g=138,_=3),n[2*(i+1)+1]=65535,a=0;a<=i;a++)l=h,h=n[2*(a+1)+1],++f<g&&l===h||(f<_?t.bl_tree[2*l]+=f:l!==0?(l!==u&&t.bl_tree[2*l]++,t.bl_tree[32]++):f<=10?t.bl_tree[34]++:t.bl_tree[36]++,f=0,u=l,h===0?(g=138,_=3):l===h?(g=6,_=3):(g=7,_=4))},S3=(t,n,i)=>{let a,l,u=-1,h=n[1],f=0,g=7,_=4;for(h===0&&(g=138,_=3),a=0;a<=i;a++)if(l=h,h=n[2*(a+1)+1],!(++f<g&&l===h)){if(f<_)do pl(t,l,t.bl_tree);while(--f!=0);else l!==0?(l!==u&&(pl(t,l,t.bl_tree),f--),pl(t,16,t.bl_tree),Ha(t,f-3,2)):f<=10?(pl(t,17,t.bl_tree),Ha(t,f-3,3)):(pl(t,18,t.bl_tree),Ha(t,f-11,7));f=0,u=l,h===0?(g=138,_=3):l===h?(g=6,_=3):(g=7,_=4)}};let y3=!1;const C3=(t,n,i,a)=>{Ha(t,0+(a?1:0),3),g3(t),U0(t,i),U0(t,~i),i&&t.pending_buf.set(t.window.subarray(n,n+i),t.pending),t.pending+=i};var wde=t=>{y3||((()=>{let n,i,a,l,u;const h=new Array(16);for(a=0,l=0;l<28;l++)for(j1[l]=a,n=0;n<1<<V1[l];n++)F0[a++]=l;for(F0[a-1]=l,u=0,l=0;l<16;l++)for(P_[l]=u,n=0;n<1<<D_[l];n++)M0[u++]=l;for(u>>=7;l<P0;l++)for(P_[l]=u<<7,n=0;n<1<<D_[l]-7;n++)M0[256+u++]=l;for(i=0;i<=L0;i++)h[i]=0;for(n=0;n<=143;)Yl[2*n+1]=8,n++,h[8]++;for(;n<=255;)Yl[2*n+1]=9,n++,h[9]++;for(;n<=279;)Yl[2*n+1]=7,n++,h[7]++;for(;n<=287;)Yl[2*n+1]=8,n++,h[8]++;for(f3(Yl,287,h),n=0;n<P0;n++)k0[2*n+1]=5,k0[2*n]=p3(n,5);l3=new $1(Yl,V1,257,s3,L0),u3=new $1(k0,D_,0,P0,L0),d3=new $1(new Array(0),Rde,0,19,7)})(),y3=!0),t.l_desc=new H1(t.dyn_ltree,l3),t.d_desc=new H1(t.dyn_dtree,u3),t.bl_desc=new H1(t.bl_tree,d3),t.bi_buf=0,t.bi_valid=0,m3(t)},Ide=(t,n,i,a)=>{let l,u,h=0;t.level>0?(t.strm.data_type===2&&(t.strm.data_type=(f=>{let g,_=4093624447;for(g=0;g<=31;g++,_>>>=1)if(1&_&&f.dyn_ltree[2*g]!==0)return 0;if(f.dyn_ltree[18]!==0||f.dyn_ltree[20]!==0||f.dyn_ltree[26]!==0)return 1;for(g=32;g<B1;g++)if(f.dyn_ltree[2*g]!==0)return 1;return 0})(t)),z1(t,t.l_desc),z1(t,t.d_desc),h=(f=>{let g;for(_3(f,f.dyn_ltree,f.l_desc.max_code),_3(f,f.dyn_dtree,f.d_desc.max_code),z1(f,f.bl_desc),g=18;g>=3&&f.bl_tree[2*c3[g]+1]===0;g--);return f.opt_len+=3*(g+1)+5+5+4,g})(t),l=t.opt_len+3+7>>>3,u=t.static_len+3+7>>>3,u<=l&&(l=u)):l=u=i+5,i+4<=l&&n!==-1?C3(t,n,i,a):t.strategy===4||u===l?(Ha(t,2+(a?1:0),3),E3(t,Yl,k0)):(Ha(t,4+(a?1:0),3),((f,g,_,y)=>{let T;for(Ha(f,g-257,5),Ha(f,_-1,5),Ha(f,y-4,4),T=0;T<y;T++)Ha(f,f.bl_tree[2*c3[T]+1],3);S3(f,f.dyn_ltree,g-1),S3(f,f.dyn_dtree,_-1)})(t,t.l_desc.max_code+1,t.d_desc.max_code+1,h+1),E3(t,t.dyn_ltree,t.dyn_dtree)),m3(t),a&&g3(t)},Ade=(t,n,i)=>(t.pending_buf[t.sym_buf+t.sym_next++]=n,t.pending_buf[t.sym_buf+t.sym_next++]=n>>8,t.pending_buf[t.sym_buf+t.sym_next++]=i,n===0?t.dyn_ltree[2*i]++:(t.matches++,n--,t.dyn_ltree[2*(F0[i]+B1+1)]++,t.dyn_dtree[2*h3(n)]++),t.sym_next===t.sym_end),Ode=t=>{Ha(t,2,3),pl(t,256,Yl),(n=>{n.bi_valid===16?(U0(n,n.bi_buf),n.bi_buf=0,n.bi_valid=0):n.bi_valid>=8&&(n.pending_buf[n.pending++]=255&n.bi_buf,n.bi_buf>>=8,n.bi_valid-=8)})(t)},xde={_tr_init:wde,_tr_stored_block:C3,_tr_flush_block:Ide,_tr_tally:Ade,_tr_align:Ode},B0=(t,n,i,a)=>{let l=65535&t|0,u=t>>>16&65535|0,h=0;for(;i!==0;){h=i>2e3?2e3:i,i-=h;do l=l+n[a++]|0,u=u+l|0;while(--h);l%=65521,u%=65521}return l|u<<16|0};const Nde=new Uint32Array((()=>{let t,n=[];for(var i=0;i<256;i++){t=i;for(var a=0;a<8;a++)t=1&t?3988292384^t>>>1:t>>>1;n[i]=t}return n})());var Lo=(t,n,i,a)=>{const l=Nde,u=a+i;t^=-1;for(let h=a;h<u;h++)t=t>>>8^l[255&(t^n[h])];return-1^t},uh={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},of={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:Dde,_tr_stored_block:G1,_tr_flush_block:Pde,_tr_tally:Yu,_tr_align:Lde}=xde,{Z_NO_FLUSH:Xu,Z_PARTIAL_FLUSH:kde,Z_FULL_FLUSH:Mde,Z_FINISH:qs,Z_BLOCK:b3,Z_OK:Ko,Z_STREAM_END:T3,Z_STREAM_ERROR:fl,Z_DATA_ERROR:Fde,Z_BUF_ERROR:K1,Z_DEFAULT_COMPRESSION:Ude,Z_FILTERED:Bde,Z_HUFFMAN_ONLY:L_,Z_RLE:Vde,Z_FIXED:jde,Z_DEFAULT_STRATEGY:$de,Z_UNKNOWN:Hde,Z_DEFLATED:k_}=of,q1=286,Wde=30,zde=19,Gde=2*q1+1,Kde=15,dh=258,ml=262,af=42,hh=113,V0=666,ph=(t,n)=>(t.msg=uh[n],n),R3=t=>2*t-(t>4?9:0),Ju=t=>{let n=t.length;for(;--n>=0;)t[n]=0},qde=t=>{let n,i,a,l=t.w_size;n=t.hash_size,a=n;do i=t.head[--a],t.head[a]=i>=l?i-l:0;while(--n);n=l,a=n;do i=t.prev[--a],t.prev[a]=i>=l?i-l:0;while(--n)};let Qu=(t,n,i)=>(n<<t.hash_shift^i)&t.hash_mask;const hs=t=>{const n=t.state;let i=n.pending;i>t.avail_out&&(i=t.avail_out),i!==0&&(t.output.set(n.pending_buf.subarray(n.pending_out,n.pending_out+i),t.next_out),t.next_out+=i,n.pending_out+=i,t.total_out+=i,t.avail_out-=i,n.pending-=i,n.pending===0&&(n.pending_out=0))},ps=(t,n)=>{Pde(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,n),t.block_start=t.strstart,hs(t.strm)},Mr=(t,n)=>{t.pending_buf[t.pending++]=n},j0=(t,n)=>{t.pending_buf[t.pending++]=n>>>8&255,t.pending_buf[t.pending++]=255&n},Y1=(t,n,i,a)=>{let l=t.avail_in;return l>a&&(l=a),l===0?0:(t.avail_in-=l,n.set(t.input.subarray(t.next_in,t.next_in+l),i),t.state.wrap===1?t.adler=B0(t.adler,n,l,i):t.state.wrap===2&&(t.adler=Lo(t.adler,n,l,i)),t.next_in+=l,t.total_in+=l,l)},w3=(t,n)=>{let i,a,l=t.max_chain_length,u=t.strstart,h=t.prev_length,f=t.nice_match;const g=t.strstart>t.w_size-ml?t.strstart-(t.w_size-ml):0,_=t.window,y=t.w_mask,T=t.prev,A=t.strstart+dh;let D=_[u+h-1],W=_[u+h];t.prev_length>=t.good_match&&(l>>=2),f>t.lookahead&&(f=t.lookahead);do if(i=n,_[i+h]===W&&_[i+h-1]===D&&_[i]===_[u]&&_[++i]===_[u+1]){u+=2,i++;do;while(_[++u]===_[++i]&&_[++u]===_[++i]&&_[++u]===_[++i]&&_[++u]===_[++i]&&_[++u]===_[++i]&&_[++u]===_[++i]&&_[++u]===_[++i]&&_[++u]===_[++i]&&u<A);if(a=dh-(A-u),u=A-dh,a>h){if(t.match_start=n,h=a,a>=f)break;D=_[u+h-1],W=_[u+h]}}while((n=T[n&y])>g&&--l!=0);return h<=t.lookahead?h:t.lookahead},sf=t=>{const n=t.w_size;let i,a,l;do{if(a=t.window_size-t.lookahead-t.strstart,t.strstart>=n+(n-ml)&&(t.window.set(t.window.subarray(n,n+n-a),0),t.match_start-=n,t.strstart-=n,t.block_start-=n,t.insert>t.strstart&&(t.insert=t.strstart),qde(t),a+=n),t.strm.avail_in===0)break;if(i=Y1(t.strm,t.window,t.strstart+t.lookahead,a),t.lookahead+=i,t.lookahead+t.insert>=3)for(l=t.strstart-t.insert,t.ins_h=t.window[l],t.ins_h=Qu(t,t.ins_h,t.window[l+1]);t.insert&&(t.ins_h=Qu(t,t.ins_h,t.window[l+3-1]),t.prev[l&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=l,l++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<ml&&t.strm.avail_in!==0)},I3=(t,n)=>{let i,a,l,u=t.pending_buf_size-5>t.w_size?t.w_size:t.pending_buf_size-5,h=0,f=t.strm.avail_in;do{if(i=65535,l=t.bi_valid+42>>3,t.strm.avail_out<l||(l=t.strm.avail_out-l,a=t.strstart-t.block_start,i>a+t.strm.avail_in&&(i=a+t.strm.avail_in),i>l&&(i=l),i<u&&(i===0&&n!==qs||n===Xu||i!==a+t.strm.avail_in)))break;h=n===qs&&i===a+t.strm.avail_in?1:0,G1(t,0,0,h),t.pending_buf[t.pending-4]=i,t.pending_buf[t.pending-3]=i>>8,t.pending_buf[t.pending-2]=~i,t.pending_buf[t.pending-1]=~i>>8,hs(t.strm),a&&(a>i&&(a=i),t.strm.output.set(t.window.subarray(t.block_start,t.block_start+a),t.strm.next_out),t.strm.next_out+=a,t.strm.avail_out-=a,t.strm.total_out+=a,t.block_start+=a,i-=a),i&&(Y1(t.strm,t.strm.output,t.strm.next_out,i),t.strm.next_out+=i,t.strm.avail_out-=i,t.strm.total_out+=i)}while(h===0);return f-=t.strm.avail_in,f&&(f>=t.w_size?(t.matches=2,t.window.set(t.strm.input.subarray(t.strm.next_in-t.w_size,t.strm.next_in),0),t.strstart=t.w_size,t.insert=t.strstart):(t.window_size-t.strstart<=f&&(t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,t.insert>t.strstart&&(t.insert=t.strstart)),t.window.set(t.strm.input.subarray(t.strm.next_in-f,t.strm.next_in),t.strstart),t.strstart+=f,t.insert+=f>t.w_size-t.insert?t.w_size-t.insert:f),t.block_start=t.strstart),t.high_water<t.strstart&&(t.high_water=t.strstart),h?4:n!==Xu&&n!==qs&&t.strm.avail_in===0&&t.strstart===t.block_start?2:(l=t.window_size-t.strstart,t.strm.avail_in>l&&t.block_start>=t.w_size&&(t.block_start-=t.w_size,t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,l+=t.w_size,t.insert>t.strstart&&(t.insert=t.strstart)),l>t.strm.avail_in&&(l=t.strm.avail_in),l&&(Y1(t.strm,t.window,t.strstart,l),t.strstart+=l,t.insert+=l>t.w_size-t.insert?t.w_size-t.insert:l),t.high_water<t.strstart&&(t.high_water=t.strstart),l=t.bi_valid+42>>3,l=t.pending_buf_size-l>65535?65535:t.pending_buf_size-l,u=l>t.w_size?t.w_size:l,a=t.strstart-t.block_start,(a>=u||(a||n===qs)&&n!==Xu&&t.strm.avail_in===0&&a<=l)&&(i=a>l?l:a,h=n===qs&&t.strm.avail_in===0&&i===a?1:0,G1(t,t.block_start,i,h),t.block_start+=i,hs(t.strm)),h?3:1)},X1=(t,n)=>{let i,a;for(;;){if(t.lookahead<ml){if(sf(t),t.lookahead<ml&&n===Xu)return 1;if(t.lookahead===0)break}if(i=0,t.lookahead>=3&&(t.ins_h=Qu(t,t.ins_h,t.window[t.strstart+3-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),i!==0&&t.strstart-i<=t.w_size-ml&&(t.match_length=w3(t,i)),t.match_length>=3)if(a=Yu(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do t.strstart++,t.ins_h=Qu(t,t.ins_h,t.window[t.strstart+3-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart;while(--t.match_length!=0);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=Qu(t,t.ins_h,t.window[t.strstart+1]);else a=Yu(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(a&&(ps(t,!1),t.strm.avail_out===0))return 1}return t.insert=t.strstart<2?t.strstart:2,n===qs?(ps(t,!0),t.strm.avail_out===0?3:4):t.sym_next&&(ps(t,!1),t.strm.avail_out===0)?1:2},cf=(t,n)=>{let i,a,l;for(;;){if(t.lookahead<ml){if(sf(t),t.lookahead<ml&&n===Xu)return 1;if(t.lookahead===0)break}if(i=0,t.lookahead>=3&&(t.ins_h=Qu(t,t.ins_h,t.window[t.strstart+3-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,i!==0&&t.prev_length<t.max_lazy_match&&t.strstart-i<=t.w_size-ml&&(t.match_length=w3(t,i),t.match_length<=5&&(t.strategy===Bde||t.match_length===3&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){l=t.strstart+t.lookahead-3,a=Yu(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do++t.strstart<=l&&(t.ins_h=Qu(t,t.ins_h,t.window[t.strstart+3-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart);while(--t.prev_length!=0);if(t.match_available=0,t.match_length=2,t.strstart++,a&&(ps(t,!1),t.strm.avail_out===0))return 1}else if(t.match_available){if(a=Yu(t,0,t.window[t.strstart-1]),a&&ps(t,!1),t.strstart++,t.lookahead--,t.strm.avail_out===0)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(a=Yu(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,n===qs?(ps(t,!0),t.strm.avail_out===0?3:4):t.sym_next&&(ps(t,!1),t.strm.avail_out===0)?1:2};function gl(t,n,i,a,l){this.good_length=t,this.max_lazy=n,this.nice_length=i,this.max_chain=a,this.func=l}const $0=[new gl(0,0,0,0,I3),new gl(4,4,8,4,X1),new gl(4,5,16,8,X1),new gl(4,6,32,32,X1),new gl(4,4,16,16,cf),new gl(8,16,32,32,cf),new gl(8,16,128,128,cf),new gl(8,32,128,256,cf),new gl(32,128,258,1024,cf),new gl(32,258,258,4096,cf)];function Yde(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=k_,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(2*Gde),this.dyn_dtree=new Uint16Array(2*(2*Wde+1)),this.bl_tree=new Uint16Array(2*(2*zde+1)),Ju(this.dyn_ltree),Ju(this.dyn_dtree),Ju(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(Kde+1),this.heap=new Uint16Array(2*q1+1),Ju(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*q1+1),Ju(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const H0=t=>{if(!t)return 1;const n=t.state;return!n||n.strm!==t||n.status!==af&&n.status!==57&&n.status!==69&&n.status!==73&&n.status!==91&&n.status!==103&&n.status!==hh&&n.status!==V0?1:0},A3=t=>{if(H0(t))return ph(t,fl);t.total_in=t.total_out=0,t.data_type=Hde;const n=t.state;return n.pending=0,n.pending_out=0,n.wrap<0&&(n.wrap=-n.wrap),n.status=n.wrap===2?57:n.wrap?af:hh,t.adler=n.wrap===2?0:1,n.last_flush=-2,Dde(n),Ko},O3=t=>{const n=A3(t);return n===Ko&&(i=>{i.window_size=2*i.w_size,Ju(i.head),i.max_lazy_match=$0[i.level].max_lazy,i.good_match=$0[i.level].good_length,i.nice_match=$0[i.level].nice_length,i.max_chain_length=$0[i.level].max_chain,i.strstart=0,i.block_start=0,i.lookahead=0,i.insert=0,i.match_length=i.prev_length=2,i.match_available=0,i.ins_h=0})(t.state),n},x3=(t,n,i,a,l,u)=>{if(!t)return fl;let h=1;if(n===Ude&&(n=6),a<0?(h=0,a=-a):a>15&&(h=2,a-=16),l<1||l>9||i!==k_||a<8||a>15||n<0||n>9||u<0||u>jde||a===8&&h!==1)return ph(t,fl);a===8&&(a=9);const f=new Yde;return t.state=f,f.strm=t,f.status=af,f.wrap=h,f.gzhead=null,f.w_bits=a,f.w_size=1<<f.w_bits,f.w_mask=f.w_size-1,f.hash_bits=l+7,f.hash_size=1<<f.hash_bits,f.hash_mask=f.hash_size-1,f.hash_shift=~~((f.hash_bits+3-1)/3),f.window=new Uint8Array(2*f.w_size),f.head=new Uint16Array(f.hash_size),f.prev=new Uint16Array(f.w_size),f.lit_bufsize=1<<l+6,f.pending_buf_size=4*f.lit_bufsize,f.pending_buf=new Uint8Array(f.pending_buf_size),f.sym_buf=f.lit_bufsize,f.sym_end=3*(f.lit_bufsize-1),f.level=n,f.strategy=u,f.method=i,O3(t)};var Xde=(t,n)=>{if(H0(t)||n>b3||n<0)return t?ph(t,fl):fl;const i=t.state;if(!t.output||t.avail_in!==0&&!t.input||i.status===V0&&n!==qs)return ph(t,t.avail_out===0?K1:fl);const a=i.last_flush;if(i.last_flush=n,i.pending!==0){if(hs(t),t.avail_out===0)return i.last_flush=-1,Ko}else if(t.avail_in===0&&R3(n)<=R3(a)&&n!==qs)return ph(t,K1);if(i.status===V0&&t.avail_in!==0)return ph(t,K1);if(i.status===af&&i.wrap===0&&(i.status=hh),i.status===af){let l=k_+(i.w_bits-8<<4)<<8,u=-1;if(u=i.strategy>=L_||i.level<2?0:i.level<6?1:i.level===6?2:3,l|=u<<6,i.strstart!==0&&(l|=32),l+=31-l%31,j0(i,l),i.strstart!==0&&(j0(i,t.adler>>>16),j0(i,65535&t.adler)),t.adler=1,i.status=hh,hs(t),i.pending!==0)return i.last_flush=-1,Ko}if(i.status===57){if(t.adler=0,Mr(i,31),Mr(i,139),Mr(i,8),i.gzhead)Mr(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),Mr(i,255&i.gzhead.time),Mr(i,i.gzhead.time>>8&255),Mr(i,i.gzhead.time>>16&255),Mr(i,i.gzhead.time>>24&255),Mr(i,i.level===9?2:i.strategy>=L_||i.level<2?4:0),Mr(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(Mr(i,255&i.gzhead.extra.length),Mr(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(t.adler=Lo(t.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69;else if(Mr(i,0),Mr(i,0),Mr(i,0),Mr(i,0),Mr(i,0),Mr(i,i.level===9?2:i.strategy>=L_||i.level<2?4:0),Mr(i,3),i.status=hh,hs(t),i.pending!==0)return i.last_flush=-1,Ko}if(i.status===69){if(i.gzhead.extra){let l=i.pending,u=(65535&i.gzhead.extra.length)-i.gzindex;for(;i.pending+u>i.pending_buf_size;){let f=i.pending_buf_size-i.pending;if(i.pending_buf.set(i.gzhead.extra.subarray(i.gzindex,i.gzindex+f),i.pending),i.pending=i.pending_buf_size,i.gzhead.hcrc&&i.pending>l&&(t.adler=Lo(t.adler,i.pending_buf,i.pending-l,l)),i.gzindex+=f,hs(t),i.pending!==0)return i.last_flush=-1,Ko;l=0,u-=f}let h=new Uint8Array(i.gzhead.extra);i.pending_buf.set(h.subarray(i.gzindex,i.gzindex+u),i.pending),i.pending+=u,i.gzhead.hcrc&&i.pending>l&&(t.adler=Lo(t.adler,i.pending_buf,i.pending-l,l)),i.gzindex=0}i.status=73}if(i.status===73){if(i.gzhead.name){let l,u=i.pending;do{if(i.pending===i.pending_buf_size){if(i.gzhead.hcrc&&i.pending>u&&(t.adler=Lo(t.adler,i.pending_buf,i.pending-u,u)),hs(t),i.pending!==0)return i.last_flush=-1,Ko;u=0}l=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,Mr(i,l)}while(l!==0);i.gzhead.hcrc&&i.pending>u&&(t.adler=Lo(t.adler,i.pending_buf,i.pending-u,u)),i.gzindex=0}i.status=91}if(i.status===91){if(i.gzhead.comment){let l,u=i.pending;do{if(i.pending===i.pending_buf_size){if(i.gzhead.hcrc&&i.pending>u&&(t.adler=Lo(t.adler,i.pending_buf,i.pending-u,u)),hs(t),i.pending!==0)return i.last_flush=-1,Ko;u=0}l=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,Mr(i,l)}while(l!==0);i.gzhead.hcrc&&i.pending>u&&(t.adler=Lo(t.adler,i.pending_buf,i.pending-u,u))}i.status=103}if(i.status===103){if(i.gzhead.hcrc){if(i.pending+2>i.pending_buf_size&&(hs(t),i.pending!==0))return i.last_flush=-1,Ko;Mr(i,255&t.adler),Mr(i,t.adler>>8&255),t.adler=0}if(i.status=hh,hs(t),i.pending!==0)return i.last_flush=-1,Ko}if(t.avail_in!==0||i.lookahead!==0||n!==Xu&&i.status!==V0){let l=i.level===0?I3(i,n):i.strategy===L_?((u,h)=>{let f;for(;;){if(u.lookahead===0&&(sf(u),u.lookahead===0)){if(h===Xu)return 1;break}if(u.match_length=0,f=Yu(u,0,u.window[u.strstart]),u.lookahead--,u.strstart++,f&&(ps(u,!1),u.strm.avail_out===0))return 1}return u.insert=0,h===qs?(ps(u,!0),u.strm.avail_out===0?3:4):u.sym_next&&(ps(u,!1),u.strm.avail_out===0)?1:2})(i,n):i.strategy===Vde?((u,h)=>{let f,g,_,y;const T=u.window;for(;;){if(u.lookahead<=dh){if(sf(u),u.lookahead<=dh&&h===Xu)return 1;if(u.lookahead===0)break}if(u.match_length=0,u.lookahead>=3&&u.strstart>0&&(_=u.strstart-1,g=T[_],g===T[++_]&&g===T[++_]&&g===T[++_])){y=u.strstart+dh;do;while(g===T[++_]&&g===T[++_]&&g===T[++_]&&g===T[++_]&&g===T[++_]&&g===T[++_]&&g===T[++_]&&g===T[++_]&&_<y);u.match_length=dh-(y-_),u.match_length>u.lookahead&&(u.match_length=u.lookahead)}if(u.match_length>=3?(f=Yu(u,1,u.match_length-3),u.lookahead-=u.match_length,u.strstart+=u.match_length,u.match_length=0):(f=Yu(u,0,u.window[u.strstart]),u.lookahead--,u.strstart++),f&&(ps(u,!1),u.strm.avail_out===0))return 1}return u.insert=0,h===qs?(ps(u,!0),u.strm.avail_out===0?3:4):u.sym_next&&(ps(u,!1),u.strm.avail_out===0)?1:2})(i,n):$0[i.level].func(i,n);if(l!==3&&l!==4||(i.status=V0),l===1||l===3)return t.avail_out===0&&(i.last_flush=-1),Ko;if(l===2&&(n===kde?Lde(i):n!==b3&&(G1(i,0,0,!1),n===Mde&&(Ju(i.head),i.lookahead===0&&(i.strstart=0,i.block_start=0,i.insert=0))),hs(t),t.avail_out===0))return i.last_flush=-1,Ko}return n!==qs?Ko:i.wrap<=0?T3:(i.wrap===2?(Mr(i,255&t.adler),Mr(i,t.adler>>8&255),Mr(i,t.adler>>16&255),Mr(i,t.adler>>24&255),Mr(i,255&t.total_in),Mr(i,t.total_in>>8&255),Mr(i,t.total_in>>16&255),Mr(i,t.total_in>>24&255)):(j0(i,t.adler>>>16),j0(i,65535&t.adler)),hs(t),i.wrap>0&&(i.wrap=-i.wrap),i.pending!==0?Ko:T3)},Jde=(t,n)=>{let i=n.length;if(H0(t))return fl;const a=t.state,l=a.wrap;if(l===2||l===1&&a.status!==af||a.lookahead)return fl;if(l===1&&(t.adler=B0(t.adler,n,i,0)),a.wrap=0,i>=a.w_size){l===0&&(Ju(a.head),a.strstart=0,a.block_start=0,a.insert=0);let g=new Uint8Array(a.w_size);g.set(n.subarray(i-a.w_size,i),0),n=g,i=a.w_size}const u=t.avail_in,h=t.next_in,f=t.input;for(t.avail_in=i,t.next_in=0,t.input=n,sf(a);a.lookahead>=3;){let g=a.strstart,_=a.lookahead-2;do a.ins_h=Qu(a,a.ins_h,a.window[g+3-1]),a.prev[g&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=g,g++;while(--_);a.strstart=g,a.lookahead=2,sf(a)}return a.strstart+=a.lookahead,a.block_start=a.strstart,a.insert=a.lookahead,a.lookahead=0,a.match_length=a.prev_length=2,a.match_available=0,t.next_in=h,t.input=f,t.avail_in=u,a.wrap=l,Ko},W0={deflateInit:(t,n)=>x3(t,n,k_,15,8,$de),deflateInit2:x3,deflateReset:O3,deflateResetKeep:A3,deflateSetHeader:(t,n)=>H0(t)||t.state.wrap!==2?fl:(t.state.gzhead=n,Ko),deflate:Xde,deflateEnd:t=>{if(H0(t))return fl;const n=t.state.status;return t.state=null,n===hh?ph(t,Fde):Ko},deflateSetDictionary:Jde,deflateInfo:"pako deflate (from Nodeca project)"};const Qde=(t,n)=>Object.prototype.hasOwnProperty.call(t,n);var M_={assign:function(t){const n=Array.prototype.slice.call(arguments,1);for(;n.length;){const i=n.shift();if(i){if(typeof i!="object")throw new TypeError(i+"must be non-object");for(const a in i)Qde(i,a)&&(t[a]=i[a])}}return t},flattenChunks:t=>{let n=0;for(let a=0,l=t.length;a<l;a++)n+=t[a].length;const i=new Uint8Array(n);for(let a=0,l=0,u=t.length;a<u;a++){let h=t[a];i.set(h,l),l+=h.length}return i}};let N3=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{N3=!1}const z0=new Uint8Array(256);for(let t=0;t<256;t++)z0[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;z0[254]=z0[254]=1;var G0={string2buf:t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let n,i,a,l,u,h=t.length,f=0;for(l=0;l<h;l++)i=t.charCodeAt(l),(64512&i)==55296&&l+1<h&&(a=t.charCodeAt(l+1),(64512&a)==56320&&(i=65536+(i-55296<<10)+(a-56320),l++)),f+=i<128?1:i<2048?2:i<65536?3:4;for(n=new Uint8Array(f),u=0,l=0;u<f;l++)i=t.charCodeAt(l),(64512&i)==55296&&l+1<h&&(a=t.charCodeAt(l+1),(64512&a)==56320&&(i=65536+(i-55296<<10)+(a-56320),l++)),i<128?n[u++]=i:i<2048?(n[u++]=192|i>>>6,n[u++]=128|63&i):i<65536?(n[u++]=224|i>>>12,n[u++]=128|i>>>6&63,n[u++]=128|63&i):(n[u++]=240|i>>>18,n[u++]=128|i>>>12&63,n[u++]=128|i>>>6&63,n[u++]=128|63&i);return n},buf2string:(t,n)=>{const i=n||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,n));let a,l;const u=new Array(2*i);for(l=0,a=0;a<i;){let h=t[a++];if(h<128){u[l++]=h;continue}let f=z0[h];if(f>4)u[l++]=65533,a+=f-1;else{for(h&=f===2?31:f===3?15:7;f>1&&a<i;)h=h<<6|63&t[a++],f--;f>1?u[l++]=65533:h<65536?u[l++]=h:(h-=65536,u[l++]=55296|h>>10&1023,u[l++]=56320|1023&h)}}return((h,f)=>{if(f<65534&&h.subarray&&N3)return String.fromCharCode.apply(null,h.length===f?h:h.subarray(0,f));let g="";for(let _=0;_<f;_++)g+=String.fromCharCode(h[_]);return g})(u,l)},utf8border:(t,n)=>{(n=n||t.length)>t.length&&(n=t.length);let i=n-1;for(;i>=0&&(192&t[i])==128;)i--;return i<0||i===0?n:i+z0[t[i]]>n?i:n}},D3=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const P3=Object.prototype.toString,{Z_NO_FLUSH:Zde,Z_SYNC_FLUSH:ehe,Z_FULL_FLUSH:the,Z_FINISH:nhe,Z_OK:F_,Z_STREAM_END:rhe,Z_DEFAULT_COMPRESSION:ihe,Z_DEFAULT_STRATEGY:ohe,Z_DEFLATED:ahe}=of;function K0(t){this.options=M_.assign({level:ihe,method:ahe,chunkSize:16384,windowBits:15,memLevel:8,strategy:ohe},t||{});let n=this.options;n.raw&&n.windowBits>0?n.windowBits=-n.windowBits:n.gzip&&n.windowBits>0&&n.windowBits<16&&(n.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new D3,this.strm.avail_out=0;let i=W0.deflateInit2(this.strm,n.level,n.method,n.windowBits,n.memLevel,n.strategy);if(i!==F_)throw new Error(uh[i]);if(n.header&&W0.deflateSetHeader(this.strm,n.header),n.dictionary){let a;if(a=typeof n.dictionary=="string"?G0.string2buf(n.dictionary):P3.call(n.dictionary)==="[object ArrayBuffer]"?new Uint8Array(n.dictionary):n.dictionary,i=W0.deflateSetDictionary(this.strm,a),i!==F_)throw new Error(uh[i]);this._dict_set=!0}}function J1(t,n){const i=new K0(n);if(i.push(t,!0),i.err)throw i.msg||uh[i.err];return i.result}K0.prototype.push=function(t,n){const i=this.strm,a=this.options.chunkSize;let l,u;if(this.ended)return!1;for(u=n===~~n?n:n===!0?nhe:Zde,typeof t=="string"?i.input=G0.string2buf(t):P3.call(t)==="[object ArrayBuffer]"?i.input=new Uint8Array(t):i.input=t,i.next_in=0,i.avail_in=i.input.length;;)if(i.avail_out===0&&(i.output=new Uint8Array(a),i.next_out=0,i.avail_out=a),(u===ehe||u===the)&&i.avail_out<=6)this.onData(i.output.subarray(0,i.next_out)),i.avail_out=0;else{if(l=W0.deflate(i,u),l===rhe)return i.next_out>0&&this.onData(i.output.subarray(0,i.next_out)),l=W0.deflateEnd(this.strm),this.onEnd(l),this.ended=!0,l===F_;if(i.avail_out!==0){if(u>0&&i.next_out>0)this.onData(i.output.subarray(0,i.next_out)),i.avail_out=0;else if(i.avail_in===0)break}else this.onData(i.output)}return!0},K0.prototype.onData=function(t){this.chunks.push(t)},K0.prototype.onEnd=function(t){t===F_&&(this.result=M_.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var she={Deflate:K0,deflate:J1,deflateRaw:function(t,n){return(n=n||{}).raw=!0,J1(t,n)},gzip:function(t,n){return(n=n||{}).gzip=!0,J1(t,n)},constants:of};const U_=16209;var che=function(t,n){let i,a,l,u,h,f,g,_,y,T,A,D,W,F,U,z,X,ue,pe,Ee,Se,Re,Ae,Pe;const tt=t.state;i=t.next_in,Ae=t.input,a=i+(t.avail_in-5),l=t.next_out,Pe=t.output,u=l-(n-t.avail_out),h=l+(t.avail_out-257),f=tt.dmax,g=tt.wsize,_=tt.whave,y=tt.wnext,T=tt.window,A=tt.hold,D=tt.bits,W=tt.lencode,F=tt.distcode,U=(1<<tt.lenbits)-1,z=(1<<tt.distbits)-1;e:do{D<15&&(A+=Ae[i++]<<D,D+=8,A+=Ae[i++]<<D,D+=8),X=W[A&U];t:for(;;){if(ue=X>>>24,A>>>=ue,D-=ue,ue=X>>>16&255,ue===0)Pe[l++]=65535&X;else{if(!(16&ue)){if(!(64&ue)){X=W[(65535&X)+(A&(1<<ue)-1)];continue t}if(32&ue){tt.mode=16191;break e}t.msg="invalid literal/length code",tt.mode=U_;break e}pe=65535&X,ue&=15,ue&&(D<ue&&(A+=Ae[i++]<<D,D+=8),pe+=A&(1<<ue)-1,A>>>=ue,D-=ue),D<15&&(A+=Ae[i++]<<D,D+=8,A+=Ae[i++]<<D,D+=8),X=F[A&z];n:for(;;){if(ue=X>>>24,A>>>=ue,D-=ue,ue=X>>>16&255,!(16&ue)){if(!(64&ue)){X=F[(65535&X)+(A&(1<<ue)-1)];continue n}t.msg="invalid distance code",tt.mode=U_;break e}if(Ee=65535&X,ue&=15,D<ue&&(A+=Ae[i++]<<D,D+=8,D<ue&&(A+=Ae[i++]<<D,D+=8)),Ee+=A&(1<<ue)-1,Ee>f){t.msg="invalid distance too far back",tt.mode=U_;break e}if(A>>>=ue,D-=ue,ue=l-u,Ee>ue){if(ue=Ee-ue,ue>_&&tt.sane){t.msg="invalid distance too far back",tt.mode=U_;break e}if(Se=0,Re=T,y===0){if(Se+=g-ue,ue<pe){pe-=ue;do Pe[l++]=T[Se++];while(--ue);Se=l-Ee,Re=Pe}}else if(y<ue){if(Se+=g+y-ue,ue-=y,ue<pe){pe-=ue;do Pe[l++]=T[Se++];while(--ue);if(Se=0,y<pe){ue=y,pe-=ue;do Pe[l++]=T[Se++];while(--ue);Se=l-Ee,Re=Pe}}}else if(Se+=y-ue,ue<pe){pe-=ue;do Pe[l++]=T[Se++];while(--ue);Se=l-Ee,Re=Pe}for(;pe>2;)Pe[l++]=Re[Se++],Pe[l++]=Re[Se++],Pe[l++]=Re[Se++],pe-=3;pe&&(Pe[l++]=Re[Se++],pe>1&&(Pe[l++]=Re[Se++]))}else{Se=l-Ee;do Pe[l++]=Pe[Se++],Pe[l++]=Pe[Se++],Pe[l++]=Pe[Se++],pe-=3;while(pe>2);pe&&(Pe[l++]=Pe[Se++],pe>1&&(Pe[l++]=Pe[Se++]))}break}}break}}while(i<a&&l<h);pe=D>>3,i-=pe,D-=pe<<3,A&=(1<<D)-1,t.next_in=i,t.next_out=l,t.avail_in=i<a?a-i+5:5-(i-a),t.avail_out=l<h?h-l+257:257-(l-h),tt.hold=A,tt.bits=D};const B_=15,lhe=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),uhe=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),dhe=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),hhe=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var q0=(t,n,i,a,l,u,h,f)=>{const g=f.bits;let _,y,T,A,D,W,F=0,U=0,z=0,X=0,ue=0,pe=0,Ee=0,Se=0,Re=0,Ae=0,Pe=null;const tt=new Uint16Array(16),ln=new Uint16Array(16);let Fn,sr,Jr,Or=null;for(F=0;F<=B_;F++)tt[F]=0;for(U=0;U<a;U++)tt[n[i+U]]++;for(ue=g,X=B_;X>=1&&tt[X]===0;X--);if(ue>X&&(ue=X),X===0)return l[u++]=20971520,l[u++]=20971520,f.bits=1,0;for(z=1;z<X&&tt[z]===0;z++);for(ue<z&&(ue=z),Se=1,F=1;F<=B_;F++)if(Se<<=1,Se-=tt[F],Se<0)return-1;if(Se>0&&(t===0||X!==1))return-1;for(ln[1]=0,F=1;F<B_;F++)ln[F+1]=ln[F]+tt[F];for(U=0;U<a;U++)n[i+U]!==0&&(h[ln[n[i+U]]++]=U);if(t===0?(Pe=Or=h,W=20):t===1?(Pe=lhe,Or=uhe,W=257):(Pe=dhe,Or=hhe,W=0),Ae=0,U=0,F=z,D=u,pe=ue,Ee=0,T=-1,Re=1<<ue,A=Re-1,t===1&&Re>852||t===2&&Re>592)return 1;for(;;){Fn=F-Ee,h[U]+1<W?(sr=0,Jr=h[U]):h[U]>=W?(sr=Or[h[U]-W],Jr=Pe[h[U]-W]):(sr=96,Jr=0),_=1<<F-Ee,y=1<<pe,z=y;do y-=_,l[D+(Ae>>Ee)+y]=Fn<<24|sr<<16|Jr|0;while(y!==0);for(_=1<<F-1;Ae&_;)_>>=1;if(_!==0?(Ae&=_-1,Ae+=_):Ae=0,U++,--tt[F]==0){if(F===X)break;F=n[i+h[U]]}if(F>ue&&(Ae&A)!==T){for(Ee===0&&(Ee=ue),D+=z,pe=F-Ee,Se=1<<pe;pe+Ee<X&&(Se-=tt[pe+Ee],!(Se<=0));)pe++,Se<<=1;if(Re+=1<<pe,t===1&&Re>852||t===2&&Re>592)return 1;T=Ae&A,l[T]=ue<<24|pe<<16|D-u|0}}return Ae!==0&&(l[D+Ae]=F-Ee<<24|64<<16|0),f.bits=ue,0};const{Z_FINISH:L3,Z_BLOCK:phe,Z_TREES:V_,Z_OK:fh,Z_STREAM_END:fhe,Z_NEED_DICT:mhe,Z_STREAM_ERROR:Ys,Z_DATA_ERROR:k3,Z_MEM_ERROR:M3,Z_BUF_ERROR:ghe,Z_DEFLATED:F3}=of,j_=16180,$_=16190,Xl=16191,Q1=16192,Z1=16194,H_=16199,W_=16200,eI=16206,Pi=16209,U3=t=>(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24);function vhe(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const mh=t=>{if(!t)return 1;const n=t.state;return!n||n.strm!==t||n.mode<j_||n.mode>16211?1:0},B3=t=>{if(mh(t))return Ys;const n=t.state;return t.total_in=t.total_out=n.total=0,t.msg="",n.wrap&&(t.adler=1&n.wrap),n.mode=j_,n.last=0,n.havedict=0,n.flags=-1,n.dmax=32768,n.head=null,n.hold=0,n.bits=0,n.lencode=n.lendyn=new Int32Array(852),n.distcode=n.distdyn=new Int32Array(592),n.sane=1,n.back=-1,fh},V3=t=>{if(mh(t))return Ys;const n=t.state;return n.wsize=0,n.whave=0,n.wnext=0,B3(t)},j3=(t,n)=>{let i;if(mh(t))return Ys;const a=t.state;return n<0?(i=0,n=-n):(i=5+(n>>4),n<48&&(n&=15)),n&&(n<8||n>15)?Ys:(a.window!==null&&a.wbits!==n&&(a.window=null),a.wrap=i,a.wbits=n,V3(t))},$3=(t,n)=>{if(!t)return Ys;const i=new vhe;t.state=i,i.strm=t,i.window=null,i.mode=j_;const a=j3(t,n);return a!==fh&&(t.state=null),a};let tI,nI,H3=!0;const Ehe=t=>{if(H3){tI=new Int32Array(512),nI=new Int32Array(32);let n=0;for(;n<144;)t.lens[n++]=8;for(;n<256;)t.lens[n++]=9;for(;n<280;)t.lens[n++]=7;for(;n<288;)t.lens[n++]=8;for(q0(1,t.lens,0,288,tI,0,t.work,{bits:9}),n=0;n<32;)t.lens[n++]=5;q0(2,t.lens,0,32,nI,0,t.work,{bits:5}),H3=!1}t.lencode=tI,t.lenbits=9,t.distcode=nI,t.distbits=5},W3=(t,n,i,a)=>{let l;const u=t.state;return u.window===null&&(u.wsize=1<<u.wbits,u.wnext=0,u.whave=0,u.window=new Uint8Array(u.wsize)),a>=u.wsize?(u.window.set(n.subarray(i-u.wsize,i),0),u.wnext=0,u.whave=u.wsize):(l=u.wsize-u.wnext,l>a&&(l=a),u.window.set(n.subarray(i-a,i-a+l),u.wnext),(a-=l)?(u.window.set(n.subarray(i-a,i),0),u.wnext=a,u.whave=u.wsize):(u.wnext+=l,u.wnext===u.wsize&&(u.wnext=0),u.whave<u.wsize&&(u.whave+=l))),0};var _he=(t,n)=>{let i,a,l,u,h,f,g,_,y,T,A,D,W,F,U,z,X,ue,pe,Ee,Se,Re,Ae=0;const Pe=new Uint8Array(4);let tt,ln;const Fn=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(mh(t)||!t.output||!t.input&&t.avail_in!==0)return Ys;i=t.state,i.mode===Xl&&(i.mode=Q1),h=t.next_out,l=t.output,g=t.avail_out,u=t.next_in,a=t.input,f=t.avail_in,_=i.hold,y=i.bits,T=f,A=g,Re=fh;e:for(;;)switch(i.mode){case j_:if(i.wrap===0){i.mode=Q1;break}for(;y<16;){if(f===0)break e;f--,_+=a[u++]<<y,y+=8}if(2&i.wrap&&_===35615){i.wbits===0&&(i.wbits=15),i.check=0,Pe[0]=255&_,Pe[1]=_>>>8&255,i.check=Lo(i.check,Pe,2,0),_=0,y=0,i.mode=16181;break}if(i.head&&(i.head.done=!1),!(1&i.wrap)||(((255&_)<<8)+(_>>8))%31){t.msg="incorrect header check",i.mode=Pi;break}if((15&_)!==F3){t.msg="unknown compression method",i.mode=Pi;break}if(_>>>=4,y-=4,Se=8+(15&_),i.wbits===0&&(i.wbits=Se),Se>15||Se>i.wbits){t.msg="invalid window size",i.mode=Pi;break}i.dmax=1<<i.wbits,i.flags=0,t.adler=i.check=1,i.mode=512&_?16189:Xl,_=0,y=0;break;case 16181:for(;y<16;){if(f===0)break e;f--,_+=a[u++]<<y,y+=8}if(i.flags=_,(255&Eo(i))!==F3){t.msg="unknown compression method",i.mode=Pi;break}if(57344&Eo(i)){t.msg="unknown header flags set",i.mode=Pi;break}i.head&&(i.head.text=_>>8&1),512&Eo(i)&&4&i.wrap&&(Pe[0]=255&_,Pe[1]=_>>>8&255,i.check=Lo(i.check,Pe,2,0)),_=0,y=0,i.mode=16182;case 16182:for(;y<32;){if(f===0)break e;f--,_+=a[u++]<<y,y+=8}i.head&&(i.head.time=_),512&Eo(i)&&4&i.wrap&&(Pe[0]=255&_,Pe[1]=_>>>8&255,Pe[2]=_>>>16&255,Pe[3]=_>>>24&255,i.check=Lo(i.check,Pe,4,0)),_=0,y=0,i.mode=16183;case 16183:for(;y<16;){if(f===0)break e;f--,_+=a[u++]<<y,y+=8}i.head&&(i.head.xflags=255&_,i.head.os=_>>8),512&Eo(i)&&4&i.wrap&&(Pe[0]=255&_,Pe[1]=_>>>8&255,i.check=Lo(i.check,Pe,2,0)),_=0,y=0,i.mode=16184;case 16184:if(1024&Eo(i)){for(;y<16;){if(f===0)break e;f--,_+=a[u++]<<y,y+=8}i.length=_,i.head&&(i.head.extra_len=_),512&Eo(i)&&4&i.wrap&&(Pe[0]=255&_,Pe[1]=_>>>8&255,i.check=Lo(i.check,Pe,2,0)),_=0,y=0}else i.head&&(i.head.extra=null);i.mode=16185;case 16185:if(1024&Eo(i)&&(D=i.length,D>f&&(D=f),D&&(i.head&&(Se=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Uint8Array(i.head.extra_len)),i.head.extra.set(a.subarray(u,u+D),Se)),512&Eo(i)&&4&i.wrap&&(i.check=Lo(i.check,a,D,u)),f-=D,u+=D,i.length-=D),i.length))break e;i.length=0,i.mode=16186;case 16186:if(2048&Eo(i)){if(f===0)break e;D=0;do Se=a[u+D++],i.head&&Se&&i.length<65536&&(i.head.name+=String.fromCharCode(Se));while(Se&&D<f);if(512&Eo(i)&&4&i.wrap&&(i.check=Lo(i.check,a,D,u)),f-=D,u+=D,Se)break e}else i.head&&(i.head.name=null);i.length=0,i.mode=16187;case 16187:if(4096&Eo(i)){if(f===0)break e;D=0;do Se=a[u+D++],i.head&&Se&&i.length<65536&&(i.head.comment+=String.fromCharCode(Se));while(Se&&D<f);if(512&Eo(i)&&4&i.wrap&&(i.check=Lo(i.check,a,D,u)),f-=D,u+=D,Se)break e}else i.head&&(i.head.comment=null);i.mode=16188;case 16188:if(512&Eo(i)){for(;y<16;){if(f===0)break e;f--,_+=a[u++]<<y,y+=8}if(4&i.wrap&&_!==(65535&i.check)){t.msg="header crc mismatch",i.mode=Pi;break}_=0,y=0}i.head&&(i.head.hcrc=Eo(i)>>9&1,i.head.done=!0),t.adler=i.check=0,i.mode=Xl;break;case 16189:for(;y<32;){if(f===0)break e;f--,_+=a[u++]<<y,y+=8}t.adler=i.check=U3(_),_=0,y=0,i.mode=$_;case $_:if(i.havedict===0)return t.next_out=h,t.avail_out=g,t.next_in=u,t.avail_in=f,i.hold=_,i.bits=y,mhe;t.adler=i.check=1,i.mode=Xl;case Xl:if(n===phe||n===V_)break e;case Q1:if(i.last){_>>>=7&y,y-=7&y,i.mode=eI;break}for(;y<3;){if(f===0)break e;f--,_+=a[u++]<<y,y+=8}switch(i.last=1&_,_>>>=1,y-=1,3&_){case 0:i.mode=16193;break;case 1:if(Ehe(i),i.mode=H_,n===V_){_>>>=2,y-=2;break e}break;case 2:i.mode=16196;break;case 3:t.msg="invalid block type",i.mode=Pi}_>>>=2,y-=2;break;case 16193:for(_>>>=7&y,y-=7&y;y<32;){if(f===0)break e;f--,_+=a[u++]<<y,y+=8}if((65535&_)!=(_>>>16^65535)){t.msg="invalid stored block lengths",i.mode=Pi;break}if(i.length=65535&_,_=0,y=0,i.mode=Z1,n===V_)break e;case Z1:i.mode=16195;case 16195:if(D=i.length,D){if(D>f&&(D=f),D>g&&(D=g),D===0)break e;l.set(a.subarray(u,u+D),h),f-=D,u+=D,g-=D,h+=D,i.length-=D;break}i.mode=Xl;break;case 16196:for(;y<14;){if(f===0)break e;f--,_+=a[u++]<<y,y+=8}if(i.nlen=257+(31&_),_>>>=5,y-=5,i.ndist=1+(31&_),_>>>=5,y-=5,i.ncode=4+(15&_),_>>>=4,y-=4,i.nlen>286||i.ndist>30){t.msg="too many length or distance symbols",i.mode=Pi;break}i.have=0,i.mode=16197;case 16197:for(;i.have<i.ncode;){for(;y<3;){if(f===0)break e;f--,_+=a[u++]<<y,y+=8}i.lens[Fn[i.have++]]=7&_,_>>>=3,y-=3}for(;i.have<19;)i.lens[Fn[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,tt={bits:i.lenbits},Re=q0(0,i.lens,0,19,i.lencode,0,i.work,tt),i.lenbits=tt.bits,Re){t.msg="invalid code lengths set",i.mode=Pi;break}i.have=0,i.mode=16198;case 16198:for(;i.have<i.nlen+i.ndist;){for(;Ae=i.lencode[_&(1<<i.lenbits)-1],U=Ae>>>24,z=Ae>>>16&255,X=65535&Ae,!(U<=y);){if(f===0)break e;f--,_+=a[u++]<<y,y+=8}if(X<16)_>>>=U,y-=U,i.lens[i.have++]=X;else{if(X===16){for(ln=U+2;y<ln;){if(f===0)break e;f--,_+=a[u++]<<y,y+=8}if(_>>>=U,y-=U,i.have===0){t.msg="invalid bit length repeat",i.mode=Pi;break}Se=i.lens[i.have-1],D=3+(3&_),_>>>=2,y-=2}else if(X===17){for(ln=U+3;y<ln;){if(f===0)break e;f--,_+=a[u++]<<y,y+=8}_>>>=U,y-=U,Se=0,D=3+(7&_),_>>>=3,y-=3}else{for(ln=U+7;y<ln;){if(f===0)break e;f--,_+=a[u++]<<y,y+=8}_>>>=U,y-=U,Se=0,D=11+(127&_),_>>>=7,y-=7}if(i.have+D>i.nlen+i.ndist){t.msg="invalid bit length repeat",i.mode=Pi;break}for(;D--;)i.lens[i.have++]=Se}}if(i.mode===Pi)break;if(i.lens[256]===0){t.msg="invalid code -- missing end-of-block",i.mode=Pi;break}if(i.lenbits=9,tt={bits:i.lenbits},Re=q0(1,i.lens,0,i.nlen,i.lencode,0,i.work,tt),i.lenbits=tt.bits,Re){t.msg="invalid literal/lengths set",i.mode=Pi;break}if(i.distbits=6,i.distcode=i.distdyn,tt={bits:i.distbits},Re=q0(2,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,tt),i.distbits=tt.bits,Re){t.msg="invalid distances set",i.mode=Pi;break}if(i.mode=H_,n===V_)break e;case H_:i.mode=W_;case W_:if(f>=6&&g>=258){t.next_out=h,t.avail_out=g,t.next_in=u,t.avail_in=f,i.hold=_,i.bits=y,che(t,A),h=t.next_out,l=t.output,g=t.avail_out,u=t.next_in,a=t.input,f=t.avail_in,_=i.hold,y=i.bits,i.mode===Xl&&(i.back=-1);break}for(i.back=0;Ae=i.lencode[_&(1<<i.lenbits)-1],U=Ae>>>24,z=Ae>>>16&255,X=65535&Ae,!(U<=y);){if(f===0)break e;f--,_+=a[u++]<<y,y+=8}if(z&&!(240&z)){for(ue=U,pe=z,Ee=X;Ae=i.lencode[Ee+((_&(1<<ue+pe)-1)>>ue)],U=Ae>>>24,z=Ae>>>16&255,X=65535&Ae,!(ue+U<=y);){if(f===0)break e;f--,_+=a[u++]<<y,y+=8}_>>>=ue,y-=ue,i.back+=ue}if(_>>>=U,y-=U,i.back+=U,i.length=X,z===0){i.mode=16205;break}if(32&z){i.back=-1,i.mode=Xl;break}if(64&z){t.msg="invalid literal/length code",i.mode=Pi;break}i.extra=15&z,i.mode=16201;case 16201:if(i.extra){for(ln=i.extra;y<ln;){if(f===0)break e;f--,_+=a[u++]<<y,y+=8}i.length+=_&(1<<i.extra)-1,_>>>=i.extra,y-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=16202;case 16202:for(;Ae=i.distcode[_&(1<<i.distbits)-1],U=Ae>>>24,z=Ae>>>16&255,X=65535&Ae,!(U<=y);){if(f===0)break e;f--,_+=a[u++]<<y,y+=8}if(!(240&z)){for(ue=U,pe=z,Ee=X;Ae=i.distcode[Ee+((_&(1<<ue+pe)-1)>>ue)],U=Ae>>>24,z=Ae>>>16&255,X=65535&Ae,!(ue+U<=y);){if(f===0)break e;f--,_+=a[u++]<<y,y+=8}_>>>=ue,y-=ue,i.back+=ue}if(_>>>=U,y-=U,i.back+=U,64&z){t.msg="invalid distance code",i.mode=Pi;break}i.offset=X,i.extra=15&z,i.mode=16203;case 16203:if(i.extra){for(ln=i.extra;y<ln;){if(f===0)break e;f--,_+=a[u++]<<y,y+=8}i.offset+=_&(1<<i.extra)-1,_>>>=i.extra,y-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){t.msg="invalid distance too far back",i.mode=Pi;break}i.mode=16204;case 16204:if(g===0)break e;if(D=A-g,i.offset>D){if(D=i.offset-D,D>i.whave&&i.sane){t.msg="invalid distance too far back",i.mode=Pi;break}D>i.wnext?(D-=i.wnext,W=i.wsize-D):W=i.wnext-D,D>i.length&&(D=i.length),F=i.window}else F=l,W=h-i.offset,D=i.length;D>g&&(D=g),g-=D,i.length-=D;do l[h++]=F[W++];while(--D);i.length===0&&(i.mode=W_);break;case 16205:if(g===0)break e;l[h++]=i.length,g--,i.mode=W_;break;case eI:if(i.wrap){for(;y<32;){if(f===0)break e;f--,_|=a[u++]<<y,y+=8}if(A-=g,t.total_out+=A,i.total+=A,4&i.wrap&&A&&(t.adler=i.check=Eo(i)?Lo(i.check,l,A,h-A):B0(i.check,l,A,h-A)),A=g,4&i.wrap&&(Eo(i)?_:U3(_))!==i.check){t.msg="incorrect data check",i.mode=Pi;break}_=0,y=0}i.mode=16207;case 16207:if(i.wrap&&Eo(i)){for(;y<32;){if(f===0)break e;f--,_+=a[u++]<<y,y+=8}if(4&i.wrap&&_!==(4294967295&i.total)){t.msg="incorrect length check",i.mode=Pi;break}_=0,y=0}i.mode=16208;case 16208:Re=fhe;break e;case Pi:Re=k3;break e;case 16210:return M3;default:return Ys}return t.next_out=h,t.avail_out=g,t.next_in=u,t.avail_in=f,i.hold=_,i.bits=y,(i.wsize||A!==t.avail_out&&i.mode<Pi&&(i.mode<eI||n!==L3))&&W3(t,t.output,t.next_out,A-t.avail_out),T-=t.avail_in,A-=t.avail_out,t.total_in+=T,t.total_out+=A,i.total+=A,4&i.wrap&&A&&(t.adler=i.check=Eo(i)?Lo(i.check,l,A,t.next_out-A):B0(i.check,l,A,t.next_out-A)),t.data_type=i.bits+(i.last?64:0)+(i.mode===Xl?128:0)+(i.mode===H_||i.mode===Z1?256:0),(T===0&&A===0||n===L3)&&Re===fh&&(Re=ghe),Re},Jl={inflateReset:V3,inflateReset2:j3,inflateResetKeep:B3,inflateInit:t=>$3(t,15),inflateInit2:$3,inflate:_he,inflateEnd:t=>{if(mh(t))return Ys;let n=t.state;return n.window&&(n.window=null),t.state=null,fh},inflateGetHeader:(t,n)=>{if(mh(t))return Ys;const i=t.state;return 2&i.wrap?(i.head=n,n.done=!1,fh):Ys},inflateSetDictionary:(t,n)=>{const i=n.length;let a,l,u;return mh(t)?Ys:(a=t.state,a.wrap!==0&&a.mode!==$_?Ys:a.mode===$_&&(l=1,l=B0(l,n,i,0),l!==a.check)?k3:(u=W3(t,n,i,i),u?(a.mode=16210,M3):(a.havedict=1,fh)))},inflateInfo:"pako inflate (from Nodeca project)"},She=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const z3=Object.prototype.toString,{Z_NO_FLUSH:yhe,Z_FINISH:Che,Z_OK:Y0,Z_STREAM_END:rI,Z_NEED_DICT:iI,Z_STREAM_ERROR:bhe,Z_DATA_ERROR:G3,Z_MEM_ERROR:The}=of;function X0(t){this.options=M_.assign({chunkSize:65536,windowBits:15,to:""},t||{});const n=this.options;n.raw&&n.windowBits>=0&&n.windowBits<16&&(n.windowBits=-n.windowBits,n.windowBits===0&&(n.windowBits=-15)),!(n.windowBits>=0&&n.windowBits<16)||t&&t.windowBits||(n.windowBits+=32),n.windowBits>15&&n.windowBits<48&&!(15&n.windowBits)&&(n.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new D3,this.strm.avail_out=0;let i=Jl.inflateInit2(this.strm,n.windowBits);if(i!==Y0)throw new Error(uh[i]);if(this.header=new She,Jl.inflateGetHeader(this.strm,this.header),n.dictionary&&(typeof n.dictionary=="string"?n.dictionary=G0.string2buf(n.dictionary):z3.call(n.dictionary)==="[object ArrayBuffer]"&&(n.dictionary=new Uint8Array(n.dictionary)),n.raw&&(i=Jl.inflateSetDictionary(this.strm,n.dictionary),i!==Y0)))throw new Error(uh[i])}function oI(t,n){const i=new X0(n);if(i.push(t),i.err)throw i.msg||uh[i.err];return i.result}X0.prototype.push=function(t,n){const i=this.strm,a=this.options.chunkSize,l=this.options.dictionary;let u,h,f;if(this.ended)return!1;for(h=n===~~n?n:n===!0?Che:yhe,z3.call(t)==="[object ArrayBuffer]"?i.input=new Uint8Array(t):i.input=t,i.next_in=0,i.avail_in=i.input.length;;){for(i.avail_out===0&&(i.output=new Uint8Array(a),i.next_out=0,i.avail_out=a),u=Jl.inflate(i,h),u===iI&&l&&(u=Jl.inflateSetDictionary(i,l),u===Y0?u=Jl.inflate(i,h):u===G3&&(u=iI));i.avail_in>0&&u===rI&&i.state.wrap>0&&t[i.next_in]!==0;)Jl.inflateReset(i),u=Jl.inflate(i,h);switch(u){case bhe:case G3:case iI:case The:return this.onEnd(u),this.ended=!0,!1}if(f=i.avail_out,i.next_out&&(i.avail_out===0||u===rI))if(this.options.to==="string"){let g=G0.utf8border(i.output,i.next_out),_=i.next_out-g,y=G0.buf2string(i.output,g);i.next_out=_,i.avail_out=a-_,_&&i.output.set(i.output.subarray(g,g+_),0),this.onData(y)}else this.onData(i.output.length===i.next_out?i.output:i.output.subarray(0,i.next_out));if(u!==Y0||f!==0){if(u===rI)return u=Jl.inflateEnd(this.strm),this.onEnd(u),this.ended=!0,!0;if(i.avail_in===0)break}}return!0},X0.prototype.onData=function(t){this.chunks.push(t)},X0.prototype.onEnd=function(t){t===Y0&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=M_.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var Rhe={Inflate:X0,inflate:oI,inflateRaw:function(t,n){return(n=n||{}).raw=!0,oI(t,n)},ungzip:oI,constants:of};const{Deflate:JFe,deflate:whe,deflateRaw:QFe,gzip:ZFe}=she,{Inflate:eUe,inflate:Ihe,inflateRaw:tUe,ungzip:nUe}=Rhe;var Ahe=whe,Ohe=Ihe;const Ki={getDisplayMedia:!1,getStreamFromExtension:!1,supportUnifiedPlan:!1,supportMinBitrate:!1,supportSetRtpSenderParameters:!1,supportDualStream:!0,webAudioMediaStreamDest:!1,supportReplaceTrack:!1,supportWebGL:!1,webAudioWithAEC:!1,supportRequestFrame:!1,supportShareAudio:!1,supportDualStreamEncoding:!1,supportDataChannel:!1,supportPCSetConfiguration:!1,supportWebRTCEncodedTransform:!1,supportWebRTCInsertableStream:!1,supportRequestVideoFrameCallback:!1,supportWebCrypto:!1};function un(){return Ki}function K3(){return"setSinkId"in HTMLAudioElement.prototype&&(!ee("RESTRICTION_SET_PLAYBACK_DEVICE")||(Fu()||o4())&&!Mw())}let Fi=function(t){return t.IOS_15_16_INTERRUPTION_START="ios15_16-interruption-start",t.IOS_15_16_INTERRUPTION_END="ios15_16-interruption-end",t.IOS_INTERRUPTION_START="ios-interruption-start",t.IOS_INTERRUPTION_END="ios-interruption-end",t.STATE_CHANGE="state-change",t}({});function lf(t,n,i){return{sampleRate:t,stereo:n,bitrate:i}}function vn(t,n,i,a,l){return{width:t,height:n,frameRate:i,bitrateMin:a,bitrateMax:l}}function Xs(t,n,i,a,l){return{width:{max:t},height:{max:n},frameRate:i,bitrateMin:a,bitrateMax:l}}function aI(t,n){return{numSpatialLayers:t,numTemporalLayers:n}}const xhe={"90p":vn(160,90),"90p_1":vn(160,90),"120p":vn(160,120,15,30,65),"120p_1":vn(160,120,15,30,65),"120p_3":vn(120,120,15,30,50),"120p_4":vn(212,120),"180p":vn(320,180,15,30,140),"180p_1":vn(320,180,15,30,140),"180p_3":vn(180,180,15,30,100),"180p_4":vn(240,180,15,30,120),"240p":vn(320,240,15,40,200),"240p_1":vn(320,240,15,40,200),"240p_3":vn(240,240,15,40,140),"240p_4":vn(424,240,15,40,220),"360p":vn(640,360,15,80,400),"360p_1":vn(640,360,15,80,400),"360p_3":vn(360,360,15,80,260),"360p_4":vn(640,360,30,80,600),"360p_6":vn(360,360,30,80,400),"360p_7":vn(480,360,15,80,320),"360p_8":vn(480,360,30,80,490),"360p_9":vn(640,360,15,80,800),"360p_10":vn(640,360,24,80,800),"360p_11":vn(640,360,24,80,1e3),"480p":vn(640,480,15,100,500),"480p_1":vn(640,480,15,100,500),"480p_2":vn(640,480,30,100,1e3),"480p_3":vn(480,480,15,100,400),"480p_4":vn(640,480,30,100,750),"480p_6":vn(480,480,30,100,600),"480p_8":vn(848,480,15,100,610),"480p_9":vn(848,480,30,100,930),"480p_10":vn(640,480,10,100,400),"720p":vn(1280,720,15,120,1130),"720p_auto":vn(1280,720,30,900,3e3),"720p_1":vn(1280,720,15,120,1130),"720p_2":vn(1280,720,30,120,2e3),"720p_3":vn(1280,720,30,120,1710),"720p_5":vn(960,720,15,120,910),"720p_6":vn(960,720,30,120,1380),"1080p":vn(1920,1080,15,120,2080),"1080p_1":vn(1920,1080,15,120,2080),"1080p_2":vn(1920,1080,30,120,3e3),"1080p_3":vn(1920,1080,30,120,3150),"1080p_5":vn(1920,1080,60,120,4780),"1440p":vn(2560,1440,30,120,4850),"1440p_1":vn(2560,1440,30,120,4850),"1440p_2":vn(2560,1440,60,120,7350),"4k":vn(3840,2160,30,120,8910),"4k_1":vn(3840,2160,30,120,8910),"4k_3":vn(3840,2160,60,120,13500)},z_=[{scaleResolutionDownBy:2,width:1280,height:720,frameRate:30,bitrateMin:300,bitrateMax:900},{scaleResolutionDownBy:1.333333,width:1280,height:720,frameRate:30,bitrateMin:600,bitrateMax:2e3},{scaleResolutionDownBy:1,width:1280,height:720,frameRate:30,bitrateMin:900,bitrateMax:3e3}],Nhe={"480p":Xs(640,480,5),"480p_1":Xs(640,480,5),"480p_2":Xs(640,480,30),"480p_3":Xs(640,480,15),"720p":Xs(1280,720,5),"720p_auto":vn(1280,720,30,900,3e3),"720p_1":Xs(1280,720,5),"720p_2":Xs(1280,720,30),"720p_3":Xs(1280,720,15),"1080p":Xs(1920,1080,5),"1080p_1":Xs(1920,1080,5),"1080p_2":Xs(1920,1080,30),"1080p_3":Xs(1920,1080,15)},Dhe={"1SL1TL":aI(1,1),"3SL3TL":aI(3,3),"2SL3TL":aI(2,3)};function vl(t){return t||(t="480p_1"),typeof t=="string"?Object.assign({},xhe[t]):t}function sI(t){return typeof t=="string"?Object.assign({},Nhe[t]):t}function G_(t){return typeof t=="string"?Object.assign({},Dhe[t]):t}const Phe={speech_low_quality:lf(16e3,!1),speech_standard:lf(32e3,!1,18),music_standard:lf(48e3,!1),standard_stereo:lf(48e3,!0,56),high_quality:lf(48e3,!1,128),high_quality_stereo:lf(48e3,!0,192)};function K_(t){return typeof t=="string"?Object.assign({},Phe[t]):t}const uf=[];function q3(t){return pi(t,"mediaSource",["screen","window","application"]),!0}let et=function(t){return t.NEED_RENEGOTIATE="@need_renegotiate",t.NEED_REPLACE_TRACK="@need_replace_track",t.NEED_REPLACE_MIXING_TRACK="@need_replace_mixing_track",t.NEED_CLOSE="@need_close",t.NEED_ENABLE_TRACK="@need_enable_track",t.NEED_DISABLE_TRACK="@need_disable_track",t.NEED_SESSION_ID="@need_sid",t.SET_OPTIMIZATION_MODE="@set_optimization_mode",t.GET_STATS="@get_stats",t.GET_RTC_STATS="@get_rtc_stats",t.GET_LOW_VIDEO_TRACK="@get_low_video_track",t.NEED_RESET_REMOTE_SDP="@need_reset_remote_sdp",t.NEED_UPDATE_VIDEO_ENCODER="@need_update_video_encoder",t.NEED_UPDATE_VIDEO_SEND_PARAMETERS="@need_update_video_send_parameters",t.NEED_MUTE_TRACK="@need_mute_track",t.NEED_UNMUTE_TRACK="@need_unmute_track",t}({}),ar=function(t){return t.SCREEN_TRACK="screen_track",t.CUSTOM_TRACK="custome_track",t.LOW_STREAM="low_stream",t}({}),df=function(t){return t[t.HIGH_STREAM=0]="HIGH_STREAM",t[t.LOW_STREAM=1]="LOW_STREAM",t}({}),Lhe=function(t){return t[t.HIGH_STREAM=0]="HIGH_STREAM",t[t.LOW_STREAM=1]="LOW_STREAM",t}({}),khe=function(t){return t[t.DISABLE=0]="DISABLE",t[t.LOW_STREAM=1]="LOW_STREAM",t[t.AUDIO_ONLY=2]="AUDIO_ONLY",t}({}),gh=function(t){return t.TRANSCEIVER_UPDATED="transceiver-updated",t.SEI_TO_SEND="sei-to-send",t.SEI_RECEIVED="sei-received",t.TRACK_UPDATED="track-updated",t}({}),hf=function(t){return t.SOURCE_STATE_CHANGE="source-state-change",t.TRACK_ENDED="track-ended",t.BEAUTY_EFFECT_OVERLOAD="beauty-effect-overload",t.VIDEO_ELEMENT_VISIBLE_STATUS="video-element-visible-status",t.CLOSED="closed",t}({}),pf=function(t){return t.FIRST_FRAME_DECODED="first-frame-decoded",t.VIDEO_ELEMENT_VISIBLE_STATUS="video-element-visible-status",t.VIDEO_STATE_CHANGED="video-state-changed",t}({}),Wa=function(t){return t.AUDIO_SOURCE_STATE_CHANGE="audio_source_state_change",t.RECEIVE_TRACK_BUFFER="receive_track_buffer",t.ON_AUDIO_BUFFER="on_audio_buffer",t.UPDATE_SOURCE="update_source",t}({});(function(t){t.UPDATE_TRACK_SOURCE="update-track-source"})({});const cI={sendVolumeLevel:0,sendBitrate:0,sendBytes:0,sendPackets:0,sendPacketsLost:0,sendJitterMs:0,sendRttMs:0,currentPacketLossRate:0},lI={sendBytes:0,sendBitrate:0,sendPackets:0,sendPacketsLost:0,sendJitterMs:0,sendRttMs:0,sendResolutionHeight:0,sendResolutionWidth:0,captureResolutionHeight:0,captureResolutionWidth:0,targetSendBitrate:0,totalDuration:0,totalFreezeTime:0,currentPacketLossRate:0},Y3={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveLevel:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1},Mhe={uplinkNetworkQuality:0,downlinkNetworkQuality:0},X3={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,receiveResolutionHeight:0,receiveResolutionWidth:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1};let ko=function(t){return t.ON_TRACK="on_track",t.ON_NODE="on_node",t}({}),za=function(t){return t.REQUEST_UPDATE_CONSTRAINTS="request_update_constraints",t.REQUEST_CONSTRAINTS="request_constraints",t}({}),J0=function(t){return t.IDLE="IDLE",t.INITING="INITING",t.INITEND="INITEND",t}({}),vh=function(t){return t.STATE_CHANGE="state_change",t.RECORDING_DEVICE_CHANGED="recordingDeviceChanged",t.PLAYOUT_DEVICE_CHANGED="playoutDeviceChanged",t.CAMERA_DEVICE_CHANGED="cameraDeviceChanged",t}({}),_o=function(t){return t.NONE="none",t.INIT="init",t.CANPLAY="canplay",t.PLAYING="playing",t.PAUSED="paused",t.SUSPEND="suspend",t.STALLED="stalled",t.WAITING="waiting",t.ERROR="error",t.DESTROYED="destroyed",t.ABORT="abort",t.ENDED="ended",t.EMPTIED="emptied",t.LOADEDDATA="loadeddata",t}({}),El=function(t){return t[t.VideoStateStopped=0]="VideoStateStopped",t[t.VideoStateStarting=1]="VideoStateStarting",t[t.VideoStateDecoding=2]="VideoStateDecoding",t[t.VideoStateFrozen=3]="VideoStateFrozen",t}({});const uI={uninit:100,none:110,init:120,loadeddata:130,canplay:200,playing:210,paused:220,suspend:300,stalled:310,waiting:320,error:330,destroyed:340,abort:350,ended:360,emptied:370};let q_=function(t){return t.OPEN="open",t.MESSAGE="message",t.CLOSE="close",t.CLOSING="closing",t.ERROR="error",t}({});function J3(t,n){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),i.push.apply(i,a)}return i}function Sr(t){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?J3(Object(i),!0).forEach(function(a){be(t,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):J3(Object(i)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(i,a))})}return t}function be(t,n,i){return(n=function(a){var l=function(u,h){if(typeof u!="object"||u===null)return u;var f=u[Symbol.toPrimitive];if(f!==void 0){var g=f.call(u,"string");if(typeof g!="object")return g;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(u)}(a);return typeof l=="symbol"?l:String(l)}(n))in t?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i,t}function dn(t,n,i,a,l){var u,h,f={};return Object.keys(a).forEach(function(g){f[g]=a[g]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=Sc(u=Eue(h=i.slice()).call(h)).call(u,function(g,_){return _(t,n,g)||g},f),l&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(l):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(t,n,f),f=null),f}class Q3 extends _r{set _mediaStreamTrack(n){n!==this.mediaStreamTrack&&(this.safeEmit(gh.TRACK_UPDATED,n),this.mediaStreamTrack=n)}get _mediaStreamTrack(){return this.mediaStreamTrack}constructor(n,i){super(),be(this,"trackMediaType",void 0),be(this,"_ID",void 0),be(this,"_rtpTransceiver",void 0),be(this,"_lowRtpTransceiver",void 0),be(this,"_hints",[]),be(this,"_isClosed",!1),be(this,"_originMediaStreamTrack",void 0),be(this,"mediaStreamTrack",void 0),be(this,"_external",{}),this._ID=i||tr(8,"track-"),this._originMediaStreamTrack=n,this.mediaStreamTrack=n,function(a){Ye(uf).call(uf,a)||uf.push(a)}(this)}toString(){return this._ID}getTrackId(){return this._ID}getMediaStreamTrack(n){return n||Bu(()=>{var i;ht.reportApiInvoke(null,{name:ni.GET_MEDIA_STREAM_TRACK,options:[],tag:Nr.TRACER}).onSuccess(((i=this._mediaStreamTrack)===null||i===void 0?void 0:i.label)||"")},this.mediaStreamTrack.id||this.getTrackId()),this._mediaStreamTrack}getRTCRtpTransceiver(n){return n===df.LOW_STREAM?this._lowRtpTransceiver:this._rtpTransceiver}getMediaStreamTrackSettings(){return this.getMediaStreamTrack(!0).getSettings()}close(){this._isClosed=!0,this._lowRtpTransceiver=void 0,this._rtpTransceiver=void 0,function(n){const i=uf.indexOf(n);i!==-1&&uf.splice(i,1)}(this),this.emit(hf.CLOSED),this.removeAllListeners(gh.SEI_RECEIVED)}_updateRtpTransceiver(n,i){if(i===df.LOW_STREAM){if(this._lowRtpTransceiver===n)return;this._lowRtpTransceiver=n}else{if(this._rtpTransceiver===n)return;this._rtpTransceiver=n}this.emit(gh.TRANSCEIVER_UPDATED,n,i)}}class ff extends Q3{get isExternalTrack(){return this._isExternalTrack}get muted(){return this._muted}get enabled(){return this._enabled}get processorContext(){return this._processorContext}constructor(n,i){super(n,i),be(this,"_enabled",!0),be(this,"_muted",!1),be(this,"_isExternalTrack",!1),be(this,"_isClosed",!1),be(this,"_enabledMutex",void 0),be(this,"processor",void 0),be(this,"_processorContext",void 0),be(this,"_handleTrackEnded",()=>{this.onTrackEnded()}),this._enabledMutex=new Oi("".concat(this.getTrackId())),n.addEventListener("ended",this._handleTrackEnded)}getTrackLabel(){var n,i;return(n=(i=this._originMediaStreamTrack)===null||i===void 0?void 0:i.label)!==null&&n!==void 0?n:""}close(){this._isClosed||(this.stop(),this._originMediaStreamTrack.stop(),this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack.stop(),this._mediaStreamTrack=null),this._originMediaStreamTrack=null,this._enabledMutex=null,k.debug("[".concat(this.getTrackId(),"] close")),this.emit(et.NEED_CLOSE),super.close())}async _updateOriginMediaStreamTrack(n,i){let a=arguments.length>2&&arguments[2]!==void 0&&arguments[2];this._isExternalTrack=a,n!==this._originMediaStreamTrack&&(this._originMediaStreamTrack&&(this._originMediaStreamTrack.removeEventListener("ended",this._handleTrackEnded),i&&this._originMediaStreamTrack.stop()),n.addEventListener("ended",this._handleTrackEnded),this._originMediaStreamTrack=n,this._muted&&(this._originMediaStreamTrack.enabled=!1),this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await er(this,et.NEED_REPLACE_TRACK,this),this.processor&&this._processorContext&&this.processor.updateInput({track:this._originMediaStreamTrack,context:this._processorContext}))}_getDefaultPlayerConfig(){return{}}onTrackEnded(){k.debug("[".concat(this.getTrackId(),"] track ended")),this.safeEmit(hf.TRACK_ENDED)}stateCheck(n,i){if(k.debug("check track state, [muted: ".concat(this._muted,", enabled: ").concat(this._enabled,"] to [").concat(n,": ").concat(i,"]")),$l(i,n),this._enabled&&this._muted&&n==="enabled"&&i===!1)throw new Ce(K.TRACK_STATE_UNREACHABLE,"cannot set enabled while the track is muted").print("error",k);if(!this._enabled&&!this._muted&&n==="muted"&&i===!0)throw new Ce(K.TRACK_STATE_UNREACHABLE,"cannot set muted while the track is disabled").print("error",k)}getProcessorStats(){return this._processorContext&&this._processorContext.gatherStats()||[]}getProcessorUsage(){return this._processorContext?this._processorContext.gatherUsage():We.resolve([])}}const Z3=window.AudioContext||window.webkitAudioContext;let Ga=null;const zn=new class extends _r{constructor(){super(...arguments),be(this,"prevState",void 0),be(this,"curState",void 0),be(this,"currentTime",void 0),be(this,"currentTimeStuckAt",void 0),be(this,"interruptDetectorTrack",void 0),be(this,"onLocalAudioTrackMute",()=>{k.info("ios15-interruption-start"),this.emit(Fi.IOS_15_16_INTERRUPTION_START)}),be(this,"onLocalAudioTrackUnmute",async()=>{k.info("ios15-interruption-end"),this.curState!=="running"||this.duringInterruption?k.info("ios15-interruption-end-canceled"):(Ga&&await Ga.suspend(),this.emit(Fi.IOS_15_16_INTERRUPTION_END))})}get duringInterruption(){return this.prevState==="running"&&this.curState==="interrupted"}bindInterruptDetectorTrack(t){k.debug("webaudio bindInterruptDetectorTrack ".concat(t.getTrackId())),this.interruptDetectorTrack||(this.interruptDetectorTrack=t,this.interruptDetectorTrack._mediaStreamTrack.onmute=this.onLocalAudioTrackMute,this.interruptDetectorTrack._mediaStreamTrack.onunmute=this.onLocalAudioTrackUnmute)}unbindInterruptDetectorTrack(t){k.debug("webaudio unbindInterruptDetectorTrack ".concat(t.getTrackId())),this.interruptDetectorTrack&&this.interruptDetectorTrack===t&&(this.interruptDetectorTrack._mediaStreamTrack&&(this.interruptDetectorTrack._mediaStreamTrack.onmute=null,this.interruptDetectorTrack._mediaStreamTrack.onunmute=null),this.interruptDetectorTrack=void 0)}};function mf(){if(!Ga){if(function(){if(!Z3)return void k.error("your browser is not support web audio");k.info("create audio context");const t=Sr({},ee("WEBAUDIO_INIT_OPTIONS"));k.debug("audio context init option:",JSON.stringify(t)),Ga=new Z3(t),zn.curState=Ga.state,Ga.onstatechange=()=>{zn.prevState=zn.curState,zn.curState=Ga?Ga.state:void 0;const{prevState:n,curState:i}=zn,a=i==="running",l=i==="interrupted",u=n==="running",h=n==="suspended",f=n==="interrupted",g=_n().osVersion;(Ji()||Us())&&u&&l&&(k.info("ios".concat(g,"-interruption-start")),zn.emit(Fi.IOS_INTERRUPTION_START)),(Ji()||Us())&&(h||f)&&a&&(k.info("ios".concat(g,"-interruption-end")),zn.emit(Fi.IOS_INTERRUPTION_END)),n!==i&&zn.emit(Fi.STATE_CHANGE,i,n)},setInterval(()=>{var n;const i=(n=Ga)===null||n===void 0?void 0:n.currentTime;zn.currentTime!==i?(zn.currentTimeStuckAt&&(k.debug("AudioContext current time resume at ".concat(i)),zn.currentTimeStuckAt=void 0),zn.currentTime=i):(i!==zn.currentTimeStuckAt&&(ht.reportApiInvoke(null,{name:"WEB_AUDIO_CURRENT_TIME_STUCK",options:{currentTime:i},tag:Nr.TRACER}).onSuccess(),k.warning("AudioContext current time stuck at ".concat(i))),zn.currentTimeStuckAt=i)},5e3),async function(n){const i=["click","contextmenu","auxclick","dblclick","mousedown","mouseup","touchend","keydown","keyup"];let a,l=!1,u=!1,h=!1;function f(F){n.state==="running"?g(!1):Ji()||Us()?n.state==="suspended"&&(g(!0),F&&n.resume().then(_,_)):n.state!=="closed"&&(g(!0),F&&n.resume().then(_,_))}function g(F){if(l!==F){l=F;for(let U=0,z=i;U<z.length;U+=1){const X=z[U];F?window.addEventListener(X,y,{capture:!0,passive:!0}):window.removeEventListener(X,y,{capture:!0,passive:!0})}}}function _(){f(!1)}function y(){f(!0)}function T(F){if(!h)if(a.paused)if(F){let U;A(!1),h=!0;try{U=a.play(),U?U.then(D,D):(a.addEventListener("playing",D),a.addEventListener("abort",D),a.addEventListener("error",D))}catch{D()}}else A(!0);else A(!1)}function A(F){if(u!==F){u=F;for(let U=0,z=i;U<z.length;U++){const X=z[U];F?window.addEventListener(X,W,{capture:!0,passive:!0}):window.removeEventListener(X,W,{capture:!0,passive:!0})}}}function D(){a.removeEventListener("playing",D),a.removeEventListener("abort",D),a.removeEventListener("error",D),h=!1,T(!1)}function W(){T(!0)}if(Ji()){const F=n.createMediaStreamDestination(),U=document.createElement("div");U.innerHTML="<audio x-webkit-airplay='deny'></audio>",a=U.children.item(0),a.controls=!1,a.disableRemotePlayback=!0,a.preload="auto",a.srcObject=F.stream,T(!0)}zn.on(Fi.STATE_CHANGE,function(){f(!0)}),f(!1)}(Ga)}(),!Ga)throw new Ce(K.NOT_SUPPORTED,"can not create audio context");return Ga}return Ga}function Eh(t){if(function(){if(dI!==null)return dI;const a=mf(),l=a.createBufferSource(),u=a.createGain(),h=a.createGain();l.connect(u),l.connect(h),l.disconnect(u);let f=!1;try{l.disconnect(u)}catch{f=!0}return l.disconnect(),dI=f,f}())return;const n=t.connect,i=t.disconnect;t.connect=(a,l,u)=>{var h;return t._inputNodes||(t._inputNodes=[]),Ye(h=t._inputNodes).call(h,a)||(a instanceof AudioNode?(t._inputNodes.push(a),n.call(t,a,l,u)):n.call(t,a,l)),t},t.disconnect=(a,l,u)=>{i.call(t),a?a_(t._inputNodes,a):t._inputNodes=[];for(const h of t._inputNodes)n.call(t,h)}}let dI=null;function hI(t,n){let i=!1;const a=1/n;if(ee("DISABLE_WEBAUDIO")){const l=window.setInterval(()=>{i?window.clearInterval(l):t(performance.now()/1e3)},1e3*a)}else{const l=mf();let u=l.createGain();u.gain.value=0,u.connect(l.destination);const h=()=>{if(i)return void(u=null);const f=l.createOscillator();f.onended=h,f.connect(u),f.start(0),f.stop(l.currentTime+a),t(l.currentTime)};h()}return()=>{i=!0}}class e5{constructor(){be(this,"context",void 0),be(this,"analyserNode",void 0),be(this,"sourceNode",void 0),this.context=mf(),this.analyserNode=this.context.createAnalyser(),this.analyserNode.fftSize=2048,this.analyserNode.smoothingTimeConstant=.4}updateSource(n){if(n!==this.sourceNode){if(this.sourceNode)try{this.sourceNode.disconnect(this.analyserNode)}catch{}this.sourceNode=n,n==null||n.connect(this.analyserNode)}}getVolumeLevel(){if(!this.sourceNode||(!this.context||Ji()||Us()||this.context.state!=="running"&&this.context.resume(),!this.analyserNode))return 0;const n=new Float32Array(this.analyserNode.fftSize);if(this.analyserNode.getFloatTimeDomainData)this.analyserNode.getFloatTimeDomainData(n);else{const a=new Uint8Array(this.analyserNode.fftSize);this.analyserNode.getByteTimeDomainData(a);for(let l=0;l<n.length;++l)n[l]=a[l]/128-1}const i=Sc(n).call(n,(a,l)=>a+l*l,0)/n.length;return Math.max(10*Math.log10(i)+100,0)/100}getAnalyserNode(){return this.analyserNode}rebuildAnalyser(){try{var n,i;(n=this.sourceNode)===null||n===void 0||n.disconnect(this.analyserNode),this.analyserNode=this.context.createAnalyser(),this.analyserNode.fftSize=2048,this.analyserNode.smoothingTimeConstant=.4,(i=this.sourceNode)===null||i===void 0||i.connect(this.analyserNode)}catch{k.warning("rebuild analyser node failed.")}}destroy(){this.updateSource(void 0)}}class t5 extends _r{get processSourceNode(){return this.sourceNode}set processedNode(n){var i;if(!this.isDestroyed&&this._processedNode!==n){try{var a;(a=this.sourceNode)===null||a===void 0||a.disconnect(this.outputNode)}catch{}(i=this._processedNode)===null||i===void 0||i.disconnect(),this._processedNode=n,this.connect()}}get processedNode(){return this._processedNode}constructor(){super(),be(this,"outputNode",void 0),be(this,"outputTrack",void 0),be(this,"isPlayed",!1),be(this,"sourceNode",void 0),be(this,"context",void 0),be(this,"audioBufferNode",void 0),be(this,"destNode",void 0),be(this,"audioOutputLevel",0),be(this,"volumeLevelAnalyser",void 0),be(this,"_processedNode",void 0),be(this,"playNode",void 0),be(this,"isDestroyed",!1),be(this,"onNoAudioInput",void 0),be(this,"isNoAudioInput",!1),be(this,"_noAudioInputCount",0),this.context=mf(),this.playNode=this.context.destination,this.outputNode=this.context.createGain(),Eh(this.outputNode),this.volumeLevelAnalyser=new e5}startGetAudioBuffer(n){this.audioBufferNode||(this.audioBufferNode=this.context.createScriptProcessor(n),this.outputNode.connect(this.audioBufferNode),this.audioBufferNode.connect(this.context.destination),this.audioBufferNode.onaudioprocess=i=>{this.emit(Wa.ON_AUDIO_BUFFER,function(a){for(let l=0;l<a.outputBuffer.numberOfChannels;l+=1){const u=a.outputBuffer.getChannelData(l);for(let h=0;h<u.length;h+=1)u[h]=0}return a.inputBuffer}(i))})}stopGetAudioBuffer(){this.audioBufferNode&&(this.audioBufferNode.onaudioprocess=null,this.outputNode.disconnect(this.audioBufferNode),this.audioBufferNode=void 0)}createOutputTrack(){if(!un().webAudioMediaStreamDest)throw new Ce(K.NOT_SUPPORTED,"your browser is not support audio processor");return this.destNode&&this.outputTrack||(this.destNode=this.context.createMediaStreamDestination(),this.outputNode.connect(this.destNode),this.outputTrack=this.destNode.stream.getAudioTracks()[0]),this.outputTrack}play(n){this.context.state!=="running"&&s_(()=>{zn.emit("autoplay-failed")}),this.isPlayed=!0,this.playNode=n||this.context.destination,this.outputNode.connect(this.playNode)}stop(){if(this.isPlayed)try{this.outputNode.disconnect(this.playNode)}catch{}this.isPlayed=!1}getAccurateVolumeLevel(){return this.volumeLevelAnalyser.getVolumeLevel()}async checkHasAudioInput(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;if(n>5)return this.isNoAudioInput=!0,this.onNoAudioInput&&this.onNoAudioInput(),!1;Ji()||Us()?this.context.state==="suspended"&&this.context.resume():this.context.state!=="running"&&this.context.resume();const i=this.volumeLevelAnalyser.getAnalyserNode();let a;i.getFloatTimeDomainData?(a=new Float32Array(i.fftSize),i.getFloatTimeDomainData(a)):(a=new Uint8Array(i.fftSize),i.getByteTimeDomainData(a));let l=!1;for(let u=0;u<a.length;u++)a[u]!==0&&(l=!0);return l?(this.isNoAudioInput=!1,!0):(await yi(200),await this.checkHasAudioInput(n?n+1:1)&&l)}getAudioVolume(){return this.outputNode.gain.value}setVolume(n){this.outputNode.gain.setValueAtTime(n,this.context.currentTime)}destroy(){this.disconnect(),this.stop(),this.isDestroyed=!0,this.onNoAudioInput=void 0}disconnect(){var n,i;(n=this.processedNode)===null||n===void 0||n.disconnect(),(i=this.sourceNode)===null||i===void 0||i.disconnect(),this.outputNode&&this.outputNode.disconnect()}connect(){var n;this.processedNode?(n=this.processedNode)===null||n===void 0||n.connect(this.outputNode):this.sourceNode&&this.sourceNode.connect(this.outputNode),this.volumeLevelAnalyser.updateSource(this.outputNode)}}class n5 extends t5{get isFreeze(){return!1}constructor(n,i,a){var l;if(super(),be(this,"sourceNode",void 0),be(this,"track",void 0),be(this,"clonedTrack",void 0),be(this,"audioElement",void 0),be(this,"isCurrentTrackCloned",!1),be(this,"isRemoteTrack",!1),be(this,"originVolumeLevelAnalyser",void 0),be(this,"rebuildWebAudio",async()=>{if(k.debug("ready to rebuild web audio, state:",this.context.state),this.isNoAudioInput&&await this.checkHasAudioInput(),!this.isNoAudioInput||this.isDestroyed)return document.body.removeEventListener("click",this.rebuildWebAudio,!0),void k.debug("rebuild web audio success, current volume status",this.getAccurateVolumeLevel());this.context.resume().then(()=>k.info("resume success")),k.debug("rebuild web audio because of ios 12 bugs"),this.disconnect();const f=this.track;this.track=this.track.clone(),this.isCurrentTrackCloned?f.stop():this.isCurrentTrackCloned=!0;const g=new MediaStream([this.track]);this.sourceNode=this.context.createMediaStreamSource(g),Eh(this.sourceNode),this.volumeLevelAnalyser.rebuildAnalyser();const _=this.outputNode.gain.value;this.outputNode=this.context.createGain(),this.outputNode.gain.setValueAtTime(_,this.context.currentTime),Eh(this.outputNode),this.emit(Wa.UPDATE_SOURCE),this.connect(),this.audioElement.srcObject=g,this.isPlayed&&this.play(this.playNode),this.checkHasAudioInput()}),n.kind!=="audio")throw new Ce(K.UNEXPECTED_ERROR);this.track=n;const u=new MediaStream([this.track]);if(this.isRemoteTrack=!!i,this.sourceNode=this.context.createMediaStreamSource(u),Eh(this.sourceNode),a){const f=a.clone();f.enabled=!0,this.clonedTrack=f,k.debug("create an unmuted track ".concat(f.id," from the original track ").concat(a.id," to get the volume"));const g=this.context.createMediaStreamSource(new MediaStream([f]));Eh(g),this.originVolumeLevelAnalyser=new e5,this.originVolumeLevelAnalyser.updateSource(g)}this.connect(),this.audioElement=document.createElement("audio"),this.audioElement.srcObject=u;const h=_n();i&&h.os===_i.IOS&&Number((l=h.osVersion)===null||l===void 0?void 0:l.split(".")[0])<15&&(zn.on(Fi.STATE_CHANGE,()=>{this.context.state==="suspended"?document.body.addEventListener("click",this.rebuildWebAudio,!0):this.context.state==="running"&&this.rebuildWebAudio()}),this.checkHasAudioInput().then(f=>{f||document.body.addEventListener("click",this.rebuildWebAudio,!0)}))}updateTrack(n){this.sourceNode.disconnect(),this.track=n,this.isCurrentTrackCloned=!1;const i=new MediaStream([n]);this.sourceNode=this.context.createMediaStreamSource(i),Eh(this.sourceNode),this.processedNode||this.sourceNode.connect(this.outputNode),this.emit(Wa.UPDATE_SOURCE),this.audioElement.srcObject=i}destroy(){var n;this.audioElement.srcObject=null,this.audioElement.remove(),zn.off("state-change",this.rebuildWebAudio),(n=this.originVolumeLevelAnalyser)===null||n===void 0||n.destroy(),this.clonedTrack=void 0,super.destroy()}createMediaStreamSourceNode(n){return this.context.createMediaStreamSource(new MediaStream([n]))}updateOriginTrack(n){const i=n.clone();i.enabled=!0,this.clonedTrack&&(this.clonedTrack.stop(),this.clonedTrack=i),k.debug("create an unmuted track ".concat(i.id," from the original track ").concat(n.id," to get the volume"));const a=this.context.createMediaStreamSource(new MediaStream([i]));Eh(a),this.originVolumeLevelAnalyser&&this.originVolumeLevelAnalyser.updateSource(a)}getOriginVolumeLevel(){return this.originVolumeLevelAnalyser?this.originVolumeLevelAnalyser.getVolumeLevel():this.getAccurateVolumeLevel()}}async function r5(t,n,i){const a=(u,h)=>u?typeof u!="number"?u.max||u.exact||u.ideal||u.min||h:u:h,l={audio:!!i&&{mandatory:{chromeMediaSource:"desktop"}},video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxHeight:a(n.height,1080),maxWidth:a(n.width,1920)}}};return n.frameRate&&typeof n.frameRate!="number"?(l.video.mandatory.maxFrameRate=n.frameRate.max,l.video.mandatory.minFrameRate=n.frameRate.min):typeof n.frameRate=="number"&&(l.video.mandatory.maxFrameRate=n.frameRate),await navigator.mediaDevices.getUserMedia(l)}async function Fhe(t,n){const i=await i5(t.mediaSource),{sourceId:a,audio:l}=await function(u){let h=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return new We((f,g)=>{const _=document.createElement("div");_.innerText="share screen",_.setAttribute("style","text-align: center; height: 25px; line-height: 25px; border-radius: 4px 4px 0 0; background: #D4D2D4; border-bottom:  solid 1px #B9B8B9;");const y=document.createElement("div");y.setAttribute("style","width: 100%; height: 500px; padding: 15px 25px ; box-sizing: border-box;");const T=document.createElement("div");T.innerText="Agora Web Screensharing wants to share the contents of your screen with webdemo.agorabeckon.com. Choose what you'd like to share.",T.setAttribute("style","height: 12%;");const A=document.createElement("div");A.setAttribute("style","width: 100%; height: 80%; background: #FFF; border:  solid 1px #CBCBCB; display: flex; flex-wrap: wrap; justify-content: space-around; overflow-y: scroll; padding: 0 15px; box-sizing: border-box;");const D=document.createElement("div");D.setAttribute("style","display: flex; justify-content: space-between; padding: 16px 0;");const W=document.createElement("button");W.innerHTML="cancel",W.setAttribute("style","width: 85px;"),W.onclick=()=>{document.body.removeChild(z);const X=new Error("NotAllowedError");X.name="NotAllowedError",g(X)};let F=h;const U=document.createElement("div");if(h){const X=document.createElement("input");X.setAttribute("type","checkbox");const ue=document.createElement("span");X.setAttribute("style","margin-right: 6px;"),ue.innerText="Share audio",X.checked=F,X.onchange=()=>{F=X.checked},U.appendChild(X),U.appendChild(ue)}D.appendChild(U),D.appendChild(W),y.appendChild(T),y.appendChild(A),y.appendChild(D);const z=document.createElement("div");z.setAttribute("style","position: fixed; z-index: 99999999; top: 50%; left: 50%; width: 620px; height: 525px; background: #ECECEC; border-radius: 4px; -webkit-transform: translate(-50%,-50%); transform: translate(-50%,-50%);"),z.appendChild(_),z.appendChild(y),document.body.appendChild(z),u.map(X=>{if(X.id){const ue=document.createElement("div");ue.setAttribute("style","width: 30%; height: 160px; padding: 20px 0; text-align: center;box-sizing: content-box;");let pe=X.thumbnail;try{const{width:Ee}=pe.getSize();Ee>1920&&(pe=pe.resize({width:1920}))}catch(Ee){throw Ee&&Ee.message.startsWith("Illegal invocation")&&console.error("Operate thumbnail error, please try to set contextIsolation: false. (https://github.com/electron/electron/issues/34953)"),Ee}ue.innerHTML='<div style="height: 120px; display: table-cell; vertical-align: middle;"><img style="width: 100%; background: #333333; box-shadow: 1px 1px 1px 1px rgba(0, 0, 0, 0.2);" src='+pe.toDataURL()+' /></div><span style="	height: 40px; line-height: 40px; display: inline-block; width: 70%; word-break: keep-all; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">'+X.name.replace(/[\u00A0-\u9999<>\&]/g,function(Ee){return"&#"+Ee.charCodeAt(0)+";"})+"</span>",ue.onclick=()=>{document.body.removeChild(z),f({sourceId:X.id,audio:F})},A.appendChild(ue)}})})}(i,n);return await r5(a,t,l)}async function i5(t){let n=["window","screen"];t!=="application"&&t!=="window"||(n=["window"]),t==="screen"&&(n=["screen"]);const i=C4();if(!i)throw console.error("failed to fetch electron, please mount it to window"),new Ce(K.ELECTRON_IS_NULL);let a=null;try{var l;a=((l=i.desktopCapturer)===null||l===void 0?void 0:l.getSources({types:n}))||i.ipcRenderer.invoke("DESKTOP_CAPTURER_GET_SOURCES",{types:n})}catch{a=null}a&&a.then||(a=new We((u,h)=>{i.desktopCapturer.getSources({types:n},(f,g)=>{f?h(f):u(g)})}));try{return await a}catch(u){throw new Ce(K.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR,u.toString())}}const pI=new Oi("safari");let o5=!1,a5=!1;async function Ka(t,n){let i=0,a=null;for(;i<2;)try{a=await Uhe(t,n,i>0);break}catch(l){if(l instanceof Ce)throw k.error("[".concat(n,"] ").concat(l.toString())),l;const u=Y_(l.name||l.code||l,l.message);if(u.code===K.MEDIA_OPTION_INVALID){k.debug("[".concat(n,"] detect media option invalid, retry")),i+=1,await yi(500);continue}throw k.error("[".concat(n,"] ").concat(u.toString())),u}if(!a)throw new Ce(K.UNEXPECTED_ERROR,"can not find stream after getUserMedia");return a}async function Uhe(t,n,i){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Ce(K.NOT_SUPPORTED,"can not find getUserMedia");i&&(t.video&&(delete t.video.width,delete t.video.height),t.screen&&(delete t.screen.width,delete t.screen.height));const a=un(),l=new MediaStream;if(t.audioSource&&l.addTrack(t.audioSource),t.videoSource&&l.addTrack(t.videoSource),!t.audio&&!t.video&&!t.screen)return k.debug("Using Video Source/ Audio Source"),l;if(t.screen)if(C4())t.screen.sourceId?gf(l,await r5(t.screen.sourceId,t.screen,t.screenAudio)):gf(l,await Fhe(t.screen,t.screenAudio));else if(Fu()&&t.screen.extensionId&&t.screen.mandatory){if(!a.getStreamFromExtension)throw new Ce(K.NOT_SUPPORTED,"This browser does not support screen sharing");k.debug("[".concat(n,'] Screen access on chrome stable, looking for extension"'));const A=await(h=t.screen.extensionId,f=n,new We((D,W)=>{try{chrome.runtime.sendMessage(h,{getStream:!0},F=>{if(!F||!F.streamId)return k.error("[".concat(f,"] No response from Chrome Plugin. Plugin not installed properly"),F),void W(new Ce(K.CHROME_PLUGIN_NO_RESPONSE,"No response from Chrome Plugin. Plugin not installed properly"));D(F.streamId)})}catch(F){k.error("[".concat(f,"] AgoraRTC screensharing plugin is not accessible(").concat(h,")"),F.toString()),W(new Ce(K.CHROME_PLUGIN_NOT_INSTALL))}}));t.screen.mandatory.chromeMediaSourceId=A,gf(l,await navigator.mediaDevices.getUserMedia({video:{mandatory:t.screen.mandatory}}))}else if(a.getDisplayMedia){var u;t.screen.mediaSource&&q3(t.screen.mediaSource);const A={width:t.screen.width,height:t.screen.height,frameRate:t.screen.frameRate,displaySurface:(u=t.screen.displaySurface)!==null&&u!==void 0?u:t.screen.mediaSource==="screen"?"monitor":t.screen.mediaSource},{selfBrowserSurface:D,surfaceSwitching:W,systemAudio:F}=t.screen,U={selfBrowserSurface:D,surfaceSwitching:W,systemAudio:F};!D&&delete U.selfBrowserSurface,!W&&delete U.surfaceSwitching,!F&&delete U.systemAudio,k.debug("[".concat(n,"] getDisplayMedia:"),JSON.stringify({video:A,audio:!!t.screenAudio,controls:U})),gf(l,await navigator.mediaDevices.getDisplayMedia(Sr({video:A,audio:!!t.screenAudio},U)))}else{if(!Zn())throw k.error("[".concat(n,"] This browser does not support screenSharing")),new Ce(K.NOT_SUPPORTED,"This browser does not support screen sharing");{t.screen.mediaSource&&q3(t.screen.mediaSource);const A={video:{mediaSource:t.screen.mediaSource,width:t.screen.width,height:t.screen.height,frameRate:t.screen.frameRate}};k.debug("[".concat(n,"] getUserMedia: ").concat(JSON.stringify(A))),gf(l,await navigator.mediaDevices.getUserMedia(A))}}var h,f;if(!t.video&&!t.audio)return l;let g={video:t.video,audio:t.audio},_=ee("MEDIA_DEVICE_CONSTRAINTS");if(_)try{typeof _=="string"&&(_=JSON.parse(_)),g=jw(g,_)}catch{}k.debug("[".concat(n,"] GetUserMedia"),JSON.stringify(g)),_n();let y,T=null;(Si()||Ji()||i_())&&(T=await pI.lock());try{y=await navigator.mediaDevices.getUserMedia(g)}catch(A){throw T&&T(),A}return g.audio&&(o5=!0),g.video&&(a5=!0),gf(l,y),T&&T(),l}function Y_(t,n){switch(t){case"Starting video failed":case"OverconstrainedError":case"TrackStartError":return new Ce(K.MEDIA_OPTION_INVALID,"".concat(t,": ").concat(n));case"NotFoundError":case"DevicesNotFoundError":return new Ce(K.DEVICE_NOT_FOUND,"".concat(t,": ").concat(n));case"NotSupportedError":return new Ce(K.NOT_SUPPORTED,"".concat(t,": ").concat(n));case"NotReadableError":return new Ce(K.NOT_READABLE,"".concat(t,": ").concat(n));case"InvalidStateError":case"NotAllowedError":case"PERMISSION_DENIED":case"PermissionDeniedError":return new Ce(K.PERMISSION_DENIED,"".concat(t,": ").concat(n));case"ConstraintNotSatisfiedError":return new Ce(K.CONSTRAINT_NOT_SATISFIED,"".concat(t,": ").concat(n));default:return k.error("getUserMedia unexpected error",t),new Ce(K.UNEXPECTED_ERROR,"".concat(t,": ").concat(n))}}function gf(t,n){const i=t.getVideoTracks()[0],a=t.getAudioTracks()[0],l=n.getVideoTracks()[0],u=n.getAudioTracks()[0];u&&(a&&t.removeTrack(a),t.addTrack(u)),l&&(i&&t.removeTrack(i),t.addTrack(l))}const qa=new class extends _r{get state(){return this._state}set state(t){t!==this._state&&(this.emit(vh.STATE_CHANGE,t),this._state=t)}constructor(){super(),be(this,"_state",J0.IDLE),be(this,"isAccessMicrophonePermission",!1),be(this,"isAccessCameraPermission",!1),be(this,"lastAccessMicrophonePermission",!1),be(this,"lastAccessCameraPermission",!1),be(this,"checkdeviceMatched",!1),be(this,"deviceInfoMap",new Map),this.init().then(()=>{navigator.mediaDevices.addEventListener&&navigator.mediaDevices.addEventListener("devicechange",this.updateDevicesInfo.bind(this)),window.setInterval(()=>{(ee("ENUMERATE_DEVICES_INTERVAL")||(o_()||r_()===_i.HARMONY_OS)&&Uu())&&this.updateDevicesInfo()},ee("ENUMERATE_DEVICES_INTERVAL_TIME"))}).catch(t=>k.error(t.toString()))}async enumerateDevices(t,n){let i=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return new Ce(K.NOT_SUPPORTED,"enumerateDevices() not supported.").throw();const a=await navigator.mediaDevices.enumerateDevices(),l=this.checkMediaDeviceInfoIsOk(a);let u=!this.isAccessMicrophonePermission&&t,h=!this.isAccessCameraPermission&&n;l.audio&&(u=!1),l.video&&(h=!1);let f=null,g=null,_=null;if(!i&&(u||h)){if(pI.isLocked&&(k.debug("[device manager] wait GUM lock"),(await pI.lock())(),k.debug("[device manager] GUM unlock")),o5&&(u=!1,this.isAccessMicrophonePermission=!0),a5&&(h=!1,this.isAccessCameraPermission=!0),k.debug("[device manager] check media device permissions",t,n,u,h),u&&h){try{_=await navigator.mediaDevices.getUserMedia({audio:!0,video:!0})}catch(y){const T=Y_(y.name||y.code||y,y.message);if(T.code===K.PERMISSION_DENIED)throw T;k.warning("getUserMedia failed in getDevices",T)}this.isAccessCameraPermission=!0,this.isAccessMicrophonePermission=!0}else if(u){try{f=await navigator.mediaDevices.getUserMedia({audio:t})}catch(y){const T=Y_(y.name||y.code||y,y.message);if(T.code===K.PERMISSION_DENIED)throw T;k.warning("getUserMedia failed in getDevices",T)}this.isAccessMicrophonePermission=!0}else if(h){try{g=await navigator.mediaDevices.getUserMedia({video:n})}catch(y){const T=Y_(y.name||y.code||y,y.message);if(T.code===K.PERMISSION_DENIED)throw T;k.warning("getUserMedia failed in getDevices",T)}this.isAccessCameraPermission=!0}k.debug("[device manager] mic permission",t,"cam permission",n)}try{const y=await navigator.mediaDevices.enumerateDevices();return f&&f.getTracks().forEach(T=>T.stop()),g&&g.getTracks().forEach(T=>T.stop()),_&&_.getTracks().forEach(T=>T.stop()),f=null,g=null,_=null,y}catch(y){return f&&f.getTracks().forEach(T=>T.stop()),g&&g.getTracks().forEach(T=>T.stop()),_&&_.getTracks().forEach(T=>T.stop()),f=null,g=null,_=null,new Ce(K.ENUMERATE_DEVICES_FAILED,y.toString()).throw()}}async getRecordingDevices(){let t=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return(await this.enumerateDevices(!0,!1,t)).filter(n=>n.kind==="audioinput")}async getCamerasDevices(){let t=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return(await this.enumerateDevices(!1,!0,t)).filter(n=>n.kind==="videoinput")}async getSpeakers(){let t=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return(await this.enumerateDevices(!0,!1,t)).filter(n=>n.kind==="audiooutput")}searchDeviceIdByName(t){let n=null;return this.deviceInfoMap.forEach(i=>{i.device.label===t&&(n=i.device.deviceId)}),n}async getDeviceById(t){const n=(await this.enumerateDevices(!0,!0,!0)).find(i=>i.deviceId===t);if(!n)throw new Ce(K.DEVICE_NOT_FOUND,"deviceId: ".concat(t));return n}async init(){this.state=J0.INITING;try{await this.updateDevicesInfo(),this.state=J0.INITEND}catch(t){throw k.warning("Device Detection functionality cannot start properly.",t.toString()),this.state=J0.IDLE,(typeof isSecureContext=="boolean"?isSecureContext:location.protocol==="https:"||location.protocol==="file:"||location.hostname==="localhost"||location.hostname==="127.0.0.1"||location.hostname==="::1")||new Ce(K.WEB_SECURITY_RESTRICT,"Your context is limited by web security, please try using https protocol or localhost.").throw(),t}}async updateDevicesInfo(){const t=await this.enumerateDevices(!0,!0,!0),n=Date.now(),i=[];if(t[0]&&t[0].label&&this.checkdeviceMatched===!1){this.checkdeviceMatched=!0;const l=t.find(h=>h.kind==="audioinput"&&h.deviceId==="default"),u=t.find(h=>h.kind==="audiooutput"&&h.deviceId==="default");l&&u?u.groupId===l.groupId?k.debug("[device-check] default input ".concat(l.label," and output ").concat(u.label," is the same group")):k.warning("[device-check] default input ".concat(l.label," and output ").concat(u.label," is not the same group")):k.debug("[device-check] default input or output not found")}const a=this.checkMediaDeviceInfoIsOk(t);if(t.forEach(l=>{if(!l.deviceId)return;const u=this.deviceInfoMap.get("".concat(l.kind,"_").concat(l.deviceId));if((u?u.state:"INACTIVE")!=="ACTIVE"){const h={initAt:n,updateAt:n,device:l,state:"ACTIVE"};this.deviceInfoMap.set("".concat(l.kind,"_").concat(l.deviceId),h),i.push(h)}u&&(u.updateAt=n)}),this.deviceInfoMap.forEach((l,u)=>{l.state==="ACTIVE"&&l.updateAt!==n&&(l.state="INACTIVE",i.push(l))}),this.state!==J0.INITEND)return a.audio&&(this.lastAccessMicrophonePermission=!0,this.isAccessMicrophonePermission=!0),void(a.video&&(this.lastAccessCameraPermission=!0,this.isAccessCameraPermission=!0));i.forEach(l=>{switch(l.device.kind){case"audioinput":this.lastAccessMicrophonePermission&&this.isAccessMicrophonePermission&&this.emit(vh.RECORDING_DEVICE_CHANGED,l);break;case"videoinput":this.lastAccessCameraPermission&&this.isAccessCameraPermission&&this.emit(vh.CAMERA_DEVICE_CHANGED,l);break;case"audiooutput":this.lastAccessMicrophonePermission&&this.isAccessMicrophonePermission&&this.emit(vh.PLAYOUT_DEVICE_CHANGED,l)}}),a.audio&&(this.lastAccessMicrophonePermission=!0,this.isAccessMicrophonePermission=!0),a.video&&(this.lastAccessCameraPermission=!0,this.isAccessCameraPermission=!0)}checkMediaDeviceInfoIsOk(t){const n=t.filter(l=>l.kind==="audioinput"),i=t.filter(l=>l.kind==="videoinput"),a={audio:!1,video:!1};for(const l of n)if(l.label&&l.deviceId){a.audio=!0;break}for(const l of i)if(l.label&&l.deviceId){a.video=!0;break}return a}};let fI=!1;const Ya=new class extends _r{constructor(){super(...arguments),be(this,"onAutoplayFailed",void 0),be(this,"onAudioAutoplayFailed",void 0)}};function s5(){if(_n(),!fI){const t=n=>{n.preventDefault(),fI=!1,g0()?document.body.removeEventListener("click",t,!0):(document.body.removeEventListener("touchstart",t,!0),document.body.removeEventListener("mousedown",t,!0))};fI=!0,g0()?document.body.addEventListener("click",t,!0):(document.body.addEventListener("touchstart",t,!0),document.body.addEventListener("mousedown",t,!0)),k.info("detect media autoplay failed, document: https://docs.agora.io/cn/Voice/autoplay_policy_web_ng?platform=Web"),Ya.onAutoplayFailed?Ya.onAutoplayFailed():Ya.onAudioAutoplayFailed?k.warning(`AgoraRTC.onAudioAutoplayFailed has been deprecated in favor of AgoraRTC.onAutoplayFailed.

  Please refer to the Agora document to migrate the newer API, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web .`):k.warning(`We have detected a media autoplay failed event, and found out that you haven't implemented AgoraRTC.onAutoplayFailed callback yet.

  It will cause audio/video element not playing automatically on some browsers without user interaction, possibly hurting user experiences.

  Please refer to the Agora document to properly handle autoplay failed event, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web .`),Ya.emit("autoplay-failed")}}function c5(t,n,i,a){if(!t)return;const l=ht.getBaseInfoBySessionId(t);if(!l)return;const u=l.info,h=Date.now(),f=Sr(Sr({},u),{},{vid:u.vid===void 0?0:Number(u.vid),lts:h,elapse:h-l.startTime,cbRegistered:Ya.onAutoplayFailed||Ya.onAudioAutoplayFailed?1:-1,errorMsg:i,mediaType:n,trackId:a,extend:void 0});ht.send({type:Ir.AUTOPLAY_FAILED,data:f},!0)}const Bhe=["play","playing","loadeddata","canplay","pause","stalled","suspend","waiting","abort","emptied","ended","error"],qo=new class{constructor(){be(this,"onAutoplayFailed",void 0),be(this,"elementMap",new Map),be(this,"elementStateMap",new Map),be(this,"elementsNeedToResume",[]),be(this,"sinkIdMap",new Map),be(this,"autoResumeAfterInterruption",t=>{Array.from(this.elementMap.entries()).forEach(n=>{let[i,a]=n;const l=this.elementStateMap.get(i),u=a.srcObject.getAudioTracks()[0],h=u&&u.readyState;if(k.debug("resume after interrupted, ele: ".concat(l," audio: ").concat(h," ").concat(t)),h==="live"){if(t)return a.pause(),void a.play();if(zn.curState==="running")return Up()?(a.pause(),void a.play()):void(l&&l==="paused"&&a.play())}})}),be(this,"autoResumeAfterInterruptionOnIOS15_16",()=>{Array.from(this.elementMap.entries()).forEach(t=>{let[n,i]=t;const a=i.srcObject.getAudioTracks()[0];a&&a.readyState==="live"&&(k.debug("auto resume after interruption inside autoResumeAfterInterruptionOnIOS15"),i.pause(),i.play())})}),this.autoResumeAudioElement(),zn.on(Fi.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),zn.on(Fi.IOS_15_16_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15_16),zn.on(Fi.STATE_CHANGE,()=>{Ji()&&zn.prevState==="suspended"&&zn.curState==="running"&&this.autoResumeAfterInterruption()})}async setSinkID(t,n){const i=this.elementMap.get(t);if(this.sinkIdMap.set(t,n),i)try{await i.setSinkId(n)}catch(a){throw new Ce(K.PERMISSION_DENIED,"can not set sink id: "+a.toString())}}play(t,n,i,a){if(this.elementMap.has(n))return;const l=document.createElement("audio");l.autoplay=!0,l.srcObject=new MediaStream([t]),this.bindAudioElementEvents(n,l),this.elementMap.set(n,l),this.elementStateMap.set(n,_o.INIT),this.setVolume(n,i);const u=this.sinkIdMap.get(n);if(u)try{l.setSinkId(u).catch(f=>{k.warning("[".concat(n,"] set sink id failed"),f.toString())})}catch(f){k.warning("[".concat(n,"] set sink id failed"),f.toString())}const h=l.play();h&&h.then&&h.catch(f=>{a&&c5(a,"audio",f.message,n),k.warning("audio element play warning",f.toString()),this.elementMap.has(n)&&f.name==="NotAllowedError"&&(k.warning("detected audio element autoplay failed"),this.elementsNeedToResume.push(l),s_(()=>{this.onAutoplayFailed&&this.onAutoplayFailed(),s5()}))})}updateTrack(t,n){const i=this.elementMap.get(t);i&&(i.srcObject=new MediaStream([n]))}isPlaying(t){return this.elementMap.has(t)&&this.elementStateMap.get(t)==="playing"}setVolume(t,n){const i=this.elementMap.get(t);i&&(n=Math.max(0,Math.min(100,n)),i.volume=n/100)}stop(t){const n=this.elementMap.get(t);if(this.sinkIdMap.delete(t),!n)return;const i=this.elementsNeedToResume.indexOf(n);this.elementsNeedToResume.splice(i,1),n.srcObject=null,n.remove(),this.elementMap.delete(t),this.elementStateMap.delete(t)}bindAudioElementEvents(t,n){Bhe.forEach(i=>{n.addEventListener(i,a=>{const l=this.elementStateMap.get(t),u=a.type==="pause"?"paused":a.type;if(k.debug("[".concat(t,"] audio-element-status change ").concat(l," => ").concat(u)),a.type==="error"){const h=n==null?void 0:n.error;h&&k.error("[".concat(t,"] media error, code: ").concat(h.code,", message: ").concat(h.message))}this.elementStateMap.set(t,u)})})}getPlayerState(t){return this.elementStateMap.get(t)||"uninit"}autoResumeAudioElement(){const t=()=>{this.elementsNeedToResume.forEach(n=>{n.play().then(i=>{k.debug("Auto resume audio element success")}).catch(i=>{k.warning("Auto resume audio element failed!",i)})}),this.elementsNeedToResume=[]};new We(n=>{document.body?n():window.addEventListener("load",()=>n())}).then(()=>{g0()?document.body.addEventListener("click",t,!0):(document.body.addEventListener("touchstart",t,!0),document.body.addEventListener("mousedown",t,!0))})}};function zr(){return function(t,n,i){const a=i.value;return typeof a=="function"&&(i.value=function(){this._isClosed&&new Ce(K.INVALID_OPERATION,"[".concat(this.getTrackId(),"] cannot operate a closed track")).print("warning",k);for(var l=arguments.length,u=new Array(l),h=0;h<l;h++)u[h]=arguments[h];const f=a.apply(this,u);return f instanceof We?new We((g,_)=>{f.then(g).catch(_)}):f}),i}}class l5 extends _r{constructor(n){super(),be(this,"name","VideoProcessorDestination"),be(this,"ID","0"),be(this,"_source",void 0),be(this,"videoContext",void 0),be(this,"inputTrack",void 0),this.videoContext=n}get kind(){return"video"}get enabled(){return!0}pipe(){throw new Ce(K.NOT_SUPPORTED,"VideoProcessor cannot pipe to any other Processor")}unpipe(){throw new Ce(K.NOT_SUPPORTED,"VideoProcessor cannot unpipe to any other Processor")}enable(){}disable(){}updateInput(n){if(n.context!==this.videoContext)throw new Error(`ProcessorContext passed to VideoTrack.processorDestination doesn't match it's belonging VideoTrack's context.
Probably you are making pipeline like this:
videoTrack1.pipe(processor).pipe(videoTrack2.processorDestination).`);n.track&&n.track!==this.inputTrack&&(this.videoContext.chained=!0,this.inputTrack=n.track,this.emit(ko.ON_TRACK,n.track))}reset(){this.inputTrack=void 0,this.videoContext.chained=!1,this.emit(ko.ON_TRACK,void 0)}}class u5 extends _r{set chained(n){this._chained=n}get chained(){return this._chained}constructor(n,i){super(),be(this,"constraintsMap",new Map),be(this,"statsRegistry",[]),be(this,"usageRegistry",[]),be(this,"trackId",void 0),be(this,"direction",void 0),be(this,"_chained",!1),this.trackId=n,this.direction=i}async getConstraints(){return await ri(this,za.REQUEST_CONSTRAINTS)}async requestApplyConstraints(n,i){var a;return k.info("processor ".concat(i.name," requestApplyConstraints for ").concat(this.trackId)),n&&this.constraintsMap.set(i,n),er(this,za.REQUEST_UPDATE_CONSTRAINTS,Array.from(Tc(a=this.constraintsMap).call(a)))}async requestRevertConstraints(n){var i;if(this.constraintsMap.has(n))return k.info("processor ".concat(n.name," requestRevertConstraints for ").concat(this.trackId)),this.constraintsMap.delete(n),er(this,za.REQUEST_UPDATE_CONSTRAINTS,Array.from(Tc(i=this.constraintsMap).call(i)))}registerStats(n,i,a){this.statsRegistry.find(l=>l.processorID===n.ID&&l.processorName===n.name&&l.type===i)||this.statsRegistry.push({processorName:n.name,processorID:n.ID,type:i,cb:a})}unregisterStats(n,i){const a=this.statsRegistry.findIndex(l=>l.processorID===n.ID&&l.processorName===n.name&&l.type===i);a!==-1&&this.statsRegistry.splice(a,1)}gatherStats(){const n=[];for(const{processorID:i,processorName:a,type:l,cb:u}of this.statsRegistry)try{const h=u();n.push({processorID:i,processorName:a,type:l,stats:h})}catch(h){k.error(new Ce(K.UNEXPECTED_ERROR,h.message))}return n}registerUsage(n,i){this.usageRegistry.find(a=>a.processorID===n.ID&&a.processorName===n.name)||this.usageRegistry.push({processorID:n.ID,processorName:n.name,cb:i})}unregisterUsage(n){const i=this.usageRegistry.findIndex(a=>a.processorID===n.ID&&a.processorName===n.name);i!==-1&&this.usageRegistry.splice(i,1)}async gatherUsage(){const n=[];if(!this.chained)return[];for(const{cb:i}of this.usageRegistry)try{let a=i();a instanceof We&&(a=await a),n.push(Sr(Sr({},a),{},{direction:this.direction}))}catch(a){k.error("gather extension usage error",a)}return n}getDirection(){return this.direction}}class d5 extends _r{constructor(n){super(),be(this,"name","AudioProcessorDestination"),be(this,"ID","0"),be(this,"inputTrack",void 0),be(this,"inputNode",void 0),be(this,"audioProcessorContext",void 0),be(this,"_source",void 0),this.audioProcessorContext=n}get kind(){return"audio"}get enabled(){return!0}pipe(){throw new Ce(K.NOT_SUPPORTED,"AudioProcessorDestination cannot pipe to any other Processor")}unpipe(){throw new Ce(K.NOT_SUPPORTED,"AudioProcessor cannot unpipe to any other Processor")}enable(){}disable(){}reset(){this.inputTrack=void 0,this.inputNode=void 0,this.audioProcessorContext.chained=!1,this.emit(ko.ON_TRACK,void 0),this.emit(ko.ON_NODE,void 0)}updateInput(n){if(n.context!==this.audioProcessorContext)throw new Error(`ProcessorContext passed to AudioTrack.processorDestination doesn't match it's belonging AudioTrack's context.
        Probably you are making pipeline like this: audioTrack1.pipe(processor).pipe(audioTrack2.processorDestination).`);n.track&&this.inputTrack!==n.track&&(this.audioProcessorContext.chained=!0,this.inputTrack=n.track,this.emit(ko.ON_TRACK,this.inputTrack)),n.node&&this.inputNode!==n.node&&(this.audioProcessorContext.chained=!0,this.inputNode=n.node,this.emit(ko.ON_NODE,this.inputNode))}}class h5 extends _r{set chained(n){this._chained=n}get chained(){return this._chained}constructor(n,i,a){super(),be(this,"constraintsMap",new Map),be(this,"statsRegistry",[]),be(this,"audioContext",void 0),be(this,"trackId",void 0),be(this,"direction",void 0),be(this,"usageRegistry",[]),be(this,"_chained",!1),this.audioContext=n,this.trackId=i,this.direction=a}async getConstraints(){return ri(this,za.REQUEST_CONSTRAINTS)}getAudioContext(){return this.audioContext}async requestApplyConstraints(n,i){var a;return k.info("processor ".concat(i.name," requestApplyConstraints for ").concat(this.trackId)),n&&this.constraintsMap.set(i,n),er(this,za.REQUEST_UPDATE_CONSTRAINTS,Array.from(Tc(a=this.constraintsMap).call(a)))}async requestRevertConstraints(n){var i;if(this.constraintsMap.has(n))return this.constraintsMap.delete(n),er(this,za.REQUEST_UPDATE_CONSTRAINTS,Array.from(Tc(i=this.constraintsMap).call(i)))}registerStats(n,i,a){this.statsRegistry.find(l=>l.processorID===n.ID&&l.processorName===n.name&&l.type===i)||this.statsRegistry.push({processorName:n.name,processorID:n.ID,type:i,cb:a})}unregisterStats(n,i){const a=this.statsRegistry.findIndex(l=>l.processorID===n.ID&&l.processorName===n.name&&l.type===i);a!==-1&&this.statsRegistry.splice(a,1)}gatherStats(){const n=[];for(const{processorID:i,processorName:a,type:l,cb:u}of this.statsRegistry)try{const h=u();n.push({processorID:i,processorName:a,type:l,stats:h})}catch(h){k.error(new Ce(K.UNEXPECTED_ERROR,h.message))}return n}registerUsage(n,i){this.usageRegistry.find(a=>a.processorID===n.ID&&a.processorName===n.name)||this.usageRegistry.push({processorID:n.ID,processorName:n.name,cb:i})}unregisterUsage(n){const i=this.usageRegistry.findIndex(a=>a.processorID===n.ID&&a.processorName===n.name);i!==-1&&this.usageRegistry.splice(i,1)}async gatherUsage(){const n=[];if(!this.chained)return[];for(const{cb:i}of this.usageRegistry)try{let a=i();a instanceof We&&(a=await a),n.push(Sr(Sr({},a),{},{direction:this.direction}))}catch(a){k.error("gather extension usage error",a)}return n}getDirection(){return this.direction}}class mI extends _r{get isPlayed(){return!0}get isFreeze(){return!1}constructor(){super(),be(this,"context",void 0),be(this,"processSourceNode",void 0),be(this,"outputTrack",void 0),be(this,"processedNode",void 0),be(this,"clonedTrack",void 0),be(this,"outputNode",void 0),this.outputNode=new Vhe}setVolume(){}createOutputTrack(){throw new Ce(K.NOT_SUPPORTED,"can not create output MediaStreamTrack when WebAudio disabled")}getOriginVolumeLevel(){return 0}getAccurateVolumeLevel(){return 0}stopGetAudioBuffer(){}startGetAudioBuffer(){}play(){}stop(){}destroy(){}updateTrack(){}updateOriginTrack(){}createMediaStreamSourceNode(){}}class Vhe{disconnect(){}connect(){}}function p5(t){return new We((n,i)=>{let a=!1;const l=document.createElement("video");l.setAttribute("autoplay",""),l.setAttribute("muted",""),l.muted=!0,l.autoplay=!0,l.setAttribute("playsinline",""),l.setAttribute("style","position: fixed; top: 0; left: 0; width: 1px; height: 1px"),document.body.appendChild(l);const u=Ji()?"canplay":"playing";l.addEventListener(u,()=>{const h=l.videoWidth,f=l.videoHeight;!h&&Zn()||(a=!0,l.srcObject=null,l.remove(),n([h,f]))}),l.srcObject=new MediaStream([t]),l.play().catch(c_),setTimeout(()=>{a||(l.srcObject=null,l.remove(),n([l.videoWidth,l.videoHeight]))},4e3)})}function X_(t){const n={};t.facingMode&&(n.facingMode=t.facingMode),t.cameraId&&(n.deviceId={exact:t.cameraId});const i=vl(t.encoderConfig);return i.width!=null&&(n.width=i.width),i.height!=null&&(n.height=i.height),!m4()&&i.frameRate&&(n.frameRate=i.frameRate),o4()&&typeof n.frameRate=="object"&&(n.frameRate.max=60),Zn()&&(n.frameRate={ideal:30,max:30}),n}function f5(t){const n={};if(m4()||(t.AGC!==void 0&&(n.autoGainControl=t.AGC),t.AEC!==void 0&&(n.echoCancellation=t.AEC),t.ANS!==void 0&&(n.noiseSuppression=t.ANS,Fu()&&t.ANS&&(n.googHighpassFilter=t.ANS))),t.encoderConfig){const i=K_(t.encoderConfig);n.channelCount=i.stereo?2:1,n.sampleRate=i.sampleRate,n.sampleSize=i.sampleSize}return t.microphoneId&&(n.deviceId={exact:t.microphoneId}),o_()&&(n.sampleRate=void 0),n}const jhe=t=>{const n=t._encoderConfig;if(!n)return;const{frameRate:i,width:a,height:l}=t.getMediaStreamTrackSettings();let{frameRate:u=i,width:h=a,height:f=l}=n;if(!u||!h||!f)return;h=$w(h),f=$w(f),u=$w(u);const{max:g,min:_}=function(D,W,F){const U=200*Math.pow(F/15,.6)*Math.pow(D*W/640/360,.75);return{min:Math.floor(U),max:Math.floor(4*U)}}(h,f,u),{bitrateMax:y,bitrateMin:T}=n||{};y||k.debug("calculate bitrate: [w: ".concat(h,", h: ").concat(f,", fps: ").concat(u,"] => [brMax: ").concat(y,", brMin: ").concat(T,"]"));const{maxFramerate:A}=ee("ENCODER_CONFIG_LIMIT");return A&&typeof A=="number"&&(u=Math.min(u,A)),{frameRate:u,bitrateMax:y||g,bitrateMin:T||_,scaleResolutionDownBy:1,scale:0}},m5=async(t,n,i)=>await(async(a,l,u)=>{const h=function(_){const y=[];for(let T=0;T<_.length;T+=2)y.push(parseInt(_.slice(T,T+2),16));return Uint8Array.from(y)}(L4(""+l+u)).slice(0,16),f=h.slice(0,12),g=await window.crypto.subtle.importKey("raw",h,"AES-GCM",!0,["encrypt"]);return new Uint8Array(await window.crypto.subtle.encrypt({name:"AES-GCM",iv:f},g,a))})(t.buffer,n,i),gI=t=>{const n=document.createElement("canvas");return n.width=2,n.height=2,new We((i,a)=>{n.toBlob(async l=>{if(n.remove(),l){const u=await g5(l);i({buffer:u,width:n.width,height:n.height})}else a(new Ce(K.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED))},t,1)})},g5=async t=>{const n=await t.arrayBuffer();return new Uint8Array(n)};var v5,E5,_5,S5,y5,C5,b5,T5,R5,w5,I5,A5,O5,x5,N5,D5,P5,L5,Ar,k5,M5,F5,U5,B5,V5,_l,j5,$5,H5,W5,z5,G5,K5,q5,Y5,X5,J5,Q5,Z5,qi;let Lr=(v5=Rt({argsMap:(t,n)=>[t.getTrackId(),n],throttleTime:300}),E5=Rt({argsMap:(t,n)=>[t.getTrackId(),n]}),_5=zr(),S5=jp("LocalAudioTrack","_enabledMutex"),y5=Rt({argsMap:(t,n)=>[t.getTrackId(),n]}),C5=zr(),b5=jp("LocalAudioTrack","_enabledMutex"),T5=Rt({argsMap:(t,n)=>[t.getTrackId(),n]}),R5=zr(),w5=zr(),I5=zr(),A5=Rt({argsMap:t=>[t.getTrackId()]}),O5=zr(),x5=Rt({argsMap:t=>[t.getTrackId()]}),N5=zr(),D5=Rt({argsMap:t=>[t.getTrackId()]}),P5=Rt({argsMap:(t,n)=>[t.getTrackId(),n.name]}),L5=Rt({argsMap:t=>[t.getTrackId()]}),dn((Ar=class extends ff{get _source(){return this.initWebAudio()}set _source(t){this._trackSource=t}get processorContext(){return this._processorContext||(this._processorContext=this.initProcessor().processorContext),this._processorContext}get processorDestination(){return this._processorDestination||(this._processorDestination=this.initProcessor().processorDestination),this._processorDestination}get isPlaying(){return this._useAudioElement?qo.isPlaying(this.getTrackId()):this._source.isPlayed}get __className__(){return"LocalAudioTrack"}constructor(t,n,i,a){super(t,i),be(this,"trackMediaType","audio"),be(this,"_encoderConfig",void 0),be(this,"_trackSource",void 0),be(this,"_enabled",!0),be(this,"_volume",100),be(this,"_useAudioElement",!0),be(this,"_bypassWebAudio",!1),be(this,"processor",void 0),be(this,"_processorContext",void 0),be(this,"_processorDestination",void 0),be(this,"_getOriginVolumeLevel",void 0),this._encoderConfig=n,this._getOriginVolumeLevel=!!a,this._trackSource=new mI,ee("DISABLE_WEBAUDIO")&&(this._bypassWebAudio=!0),ee("LOCAL_AUDIO_TRACK_USES_WEB_AUDIO")&&(this._useAudioElement=!1),Si()&&!Ga?setTimeout(()=>this.initWebAudio()):this.initWebAudio()}setVolume(t){Xn(t,"volume",0,1e3),this._volume=t,this._source.setVolume(t/100),this._useAudioElement&&qo.setVolume(this.getTrackId(),t);try{if(this._bypassWebAudio)return void k.debug("[".concat(this.getTrackId(),"] setVolume returned because no pass through WebAudio."));const n=this._source.createOutputTrack();this._mediaStreamTrack!==n&&(this._mediaStreamTrack=n,er(this,et.NEED_REPLACE_TRACK,this).then(()=>{k.debug("[".concat(this.getTrackId(),"] replace web audio track success"))}).catch(i=>{k.warning("[".concat(this.getTrackId(),"] replace web audio track failed"),i)}))}catch{}}getVolumeLevel(){return this._muted&&this.enabled&&this._getOriginVolumeLevel?this._source.getOriginVolumeLevel():this._source.getAccurateVolumeLevel()}async setPlaybackDevice(t){if(!this._useAudioElement||!K3())throw new Ce(K.NOT_SUPPORTED,"your browser does not support setting the audio output device");await qo.setSinkID(this.getTrackId(),t)}async setEnabled(t,n,i){return this._setEnabled(t,n,i)}async _setEnabled(t,n,i){if(!i){if(t===this._enabled)return;this.stateCheck("enabled",t)}if(k.info("[".concat(this.getTrackId(),"] start setEnabled"),t),t){this._originMediaStreamTrack.enabled=!0;try{i||(this._enabled=!0),await er(this,et.NEED_ENABLE_TRACK,this),k.info("[".concat(this.getTrackId(),"] setEnabled to ").concat(t," success"))}catch(a){throw i||(this._enabled=!1),k.error("[".concat(this.getTrackId(),"] setEnabled to true error"),a.toString()),a}}else{this._originMediaStreamTrack.enabled=!1,i||(this._enabled=!1);try{await er(this,et.NEED_DISABLE_TRACK,this)}catch(a){throw i||(this._enabled=!0),k.error("[".concat(this.getTrackId(),"] setEnabled to false error"),a.toString()),a}}}async setMuted(t){t!==this._muted&&(this.stateCheck("muted",t),this._muted=t,this._originMediaStreamTrack.enabled=!t,k.debug("[".concat(this.getTrackId(),"] start set muted: ").concat(t)),t?await er(this,et.NEED_MUTE_TRACK,this):await er(this,et.NEED_UNMUTE_TRACK,this))}getStats(){return Bu(()=>{k.warning("[deprecated] LocalAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalAudioStats instead")},"localAudioTrackGetStatsWarning"),Ta(this,et.GET_STATS)||Sr({},cI)}setAudioFrameCallback(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:4096;if(!t)return this._source.removeAllListeners(Wa.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(n),this._source.removeAllListeners(Wa.ON_AUDIO_BUFFER),this._source.on(Wa.ON_AUDIO_BUFFER,i=>t(i))}play(){k.debug("[".concat(this.getTrackId(),"] start audio playback")),this._useAudioElement?(k.debug("[".concat(this.getTrackId(),"] start audio playback in element")),qo.play(this._mediaStreamTrack,this.getTrackId(),this._volume)):this._source.play()}stop(){k.debug("[".concat(this.getTrackId(),"] stop audio playback")),this._useAudioElement?qo.stop(this.getTrackId()):this._source.stop()}close(){super.close(),this._processorDestination&&this.unbindProcessorDestinationEvents(this._processorDestination),this._processorContext&&this.unbindProcessorContextEvents(this._processorContext),this.unpipe(),this._processorDestination&&this._processorDestination._source&&this._processorDestination._source.unpipe(),this._source.destroy()}_updatePlayerSource(){let t=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];k.debug("[".concat(this.getTrackId(),"] update player source track")),t&&this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&qo.updateTrack(this.getTrackId(),this._mediaStreamTrack)}async _updateOriginMediaStreamTrack(t,n){this._originMediaStreamTrack!==t&&(this._originMediaStreamTrack&&(this._originMediaStreamTrack.removeEventListener("ended",this._handleTrackEnded),n&&this._originMediaStreamTrack.stop()),t.addEventListener("ended",this._handleTrackEnded),this._originMediaStreamTrack=t,this._muted&&(this._originMediaStreamTrack.enabled=!1),this.processor&&this._processorContext&&this.processor.updateInput({track:t,context:this._processorContext}),this._mediaStreamTrack!==this._source.outputTrack?(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await er(this,et.NEED_REPLACE_TRACK,this)):this._source.updateTrack(this._originMediaStreamTrack),this._getOriginVolumeLevel&&this._source.updateOriginTrack(t))}renewMediaStreamTrack(t){return We.resolve(void 0)}pipe(t){if(this._bypassWebAudio)throw new Ce(K.INVALID_OPERATION,"Can not process AudioTrack when bypassWebAudio set to true.");if(this.processor===t)return t;if(t._source)throw new Ce(K.INVALID_OPERATION,"Processor ".concat(t.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=t,this.processor._source=this,t.updateInput({track:this._originMediaStreamTrack,node:this._source.processSourceNode,context:this.processorContext}),t}unpipe(){var t;if(!this.processor)return;const n=this.processor;(t=this._source.processSourceNode)===null||t===void 0||t.disconnect(),this.processor._source=!1,this.processor=void 0,n.reset()}bindProcessorDestinationEvents(t){t.on(ko.ON_TRACK,async n=>{n?n!==this._mediaStreamTrack&&(this._mediaStreamTrack=n,this._updatePlayerSource(!1),this._source.processedNode=this._source.createMediaStreamSourceNode(n),await er(this,et.NEED_REPLACE_TRACK,this)):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await er(this,et.NEED_REPLACE_TRACK,this))}),t.on(ko.ON_NODE,n=>{this._source.processedNode=n})}unbindProcessorDestinationEvents(t){t.removeAllListeners(ko.ON_TRACK),t.removeAllListeners(ko.ON_NODE)}bindProcessorContextEvents(t){t.on(za.REQUEST_CONSTRAINTS,async n=>{n(this._originMediaStreamTrack.getSettings())})}unbindProcessorContextEvents(t){t.removeAllListeners(za.REQUEST_CONSTRAINTS)}initWebAudio(){return this._trackSource instanceof mI&&(this._trackSource=new n5(this._mediaStreamTrack,!1,this._getOriginVolumeLevel?this._mediaStreamTrack:void 0)),this._trackSource}initProcessor(){const t=new h5(this._source.context,this.getTrackId(),"local"),n=new d5(t);return this._processorContext=t,this._processorDestination=n,this.bindProcessorContextEvents(t),this.bindProcessorDestinationEvents(n),this._source.on(Wa.UPDATE_SOURCE,()=>{this.processor&&this.processor.updateInput({node:this._source.processSourceNode,context:t})}),this._useAudioElement&&(this._useAudioElement=!1,this.isPlaying&&(qo.stop(this.getTrackId()),this._source.play()),er(this,et.NEED_REPLACE_MIXING_TRACK,this).then(()=>{k.debug("[".concat(this.getTrackId(),"] replace from origin track to web audio track success"))}).catch(i=>{k.warning("[".concat(this.getTrackId(),"] replace from origin track to web audio track failed"),i)})),{processorContext:t,processorDestination:n}}}).prototype,"setVolume",[v5],Object.getOwnPropertyDescriptor(Ar.prototype,"setVolume"),Ar.prototype),dn(Ar.prototype,"setPlaybackDevice",[E5,_5],Object.getOwnPropertyDescriptor(Ar.prototype,"setPlaybackDevice"),Ar.prototype),dn(Ar.prototype,"setEnabled",[S5,y5,C5],Object.getOwnPropertyDescriptor(Ar.prototype,"setEnabled"),Ar.prototype),dn(Ar.prototype,"setMuted",[b5,T5,R5],Object.getOwnPropertyDescriptor(Ar.prototype,"setMuted"),Ar.prototype),dn(Ar.prototype,"getStats",[w5],Object.getOwnPropertyDescriptor(Ar.prototype,"getStats"),Ar.prototype),dn(Ar.prototype,"setAudioFrameCallback",[I5],Object.getOwnPropertyDescriptor(Ar.prototype,"setAudioFrameCallback"),Ar.prototype),dn(Ar.prototype,"play",[A5,O5],Object.getOwnPropertyDescriptor(Ar.prototype,"play"),Ar.prototype),dn(Ar.prototype,"stop",[x5,N5],Object.getOwnPropertyDescriptor(Ar.prototype,"stop"),Ar.prototype),dn(Ar.prototype,"close",[D5],Object.getOwnPropertyDescriptor(Ar.prototype,"close"),Ar.prototype),dn(Ar.prototype,"pipe",[P5],Object.getOwnPropertyDescriptor(Ar.prototype,"pipe"),Ar.prototype),dn(Ar.prototype,"unpipe",[L5],Object.getOwnPropertyDescriptor(Ar.prototype,"unpipe"),Ar.prototype),Ar),J_=(k5=Rt({argsMap:(t,n)=>[t.getTrackId(),n]}),M5=zr(),F5=jp("MicrophoneAudioTrack","_enabledMutex"),U5=Rt({argsMap:(t,n,i)=>[t.getTrackId(),n,i]}),B5=zr(),V5=Rt({argsMap:t=>[t.getTrackId()]}),dn((_l=class extends Lr{get __className__(){return"MicrophoneAudioTrack"}constructor(t,n,i,a){super(t,n.encoderConfig?K_(n.encoderConfig):{},a,ee("GET_VOLUME_OF_MUTED_AUDIO_TRACK")),be(this,"_config",void 0),be(this,"_deviceName","default"),be(this,"_constraints",void 0),be(this,"_originalConstraints",void 0),be(this,"_enabled",!0),this._config=n,this._constraints=i,this._originalConstraints=i,this._deviceName=t.label,typeof n.bypassWebAudio=="boolean"&&(this._bypassWebAudio=n.bypassWebAudio),(Up()||kw())&&zn.bindInterruptDetectorTrack(this)}async setDevice(t){if(k.info("[".concat(this.getTrackId(),"] start set device to ").concat(t)),this._enabled)try{const n=await qa.getDeviceById(t),i={};i.audio=Sr({},this._constraints),i.audio.deviceId={exact:t},this._originMediaStreamTrack.stop();let a=null;try{a=await Ka(i,this.getTrackId())}catch(l){throw k.error("[".concat(this.getTrackId(),"] setDevice failed"),l.toString()),a=await Ka({audio:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(a.getAudioTracks()[0],!1),l}await this._updateOriginMediaStreamTrack(a.getAudioTracks()[0],!1),this._deviceName=n.label,this._config.microphoneId=t,this._constraints.deviceId={exact:t}}catch(n){throw k.error("[".concat(this.getTrackId(),"] setDevice error"),n.toString()),n}else try{const n=await qa.getDeviceById(t);this._deviceName=n.label,this._config.microphoneId=t,this._constraints.deviceId={exact:t}}catch(n){throw k.error("[".concat(this.getTrackId(),"] setDevice error"),n.toString()),n}k.info("[".concat(this.getTrackId(),"] set device to ").concat(t," success"))}async setEnabled(t,n,i){if(n)return k.debug("[".concat(this.getTrackId(),"] setEnabled false (do not close microphone)")),await super._setEnabled(t);if(!i){if(t===this._enabled)return;this.stateCheck("enabled",t)}if(k.info("[".concat(this.getTrackId(),"] start setEnabled"),t),ee("AUTO_RESET_AUDIO_ROUTE")&&(Ji()||Us())){const h=navigator.audioSession;h&&(t||(h.type="playback"),h.type="auto")}if(!t){var a;this._originMediaStreamTrack.onended=null,this._originMediaStreamTrack.stop(),(a=this._source.clonedTrack)===null||a===void 0||a.stop(),i||(this._enabled=!1);try{await er(this,et.NEED_DISABLE_TRACK,this)}catch(h){throw k.error("[".concat(this.getTrackId(),"] setEnabled false failed"),h.toString()),h}return}const l=Sr({},this._constraints),u=qa.searchDeviceIdByName(this._deviceName);u&&!l.deviceId&&(l.deviceId=u);try{i||(this._enabled=!0);const h=await Ka({audio:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(h.getAudioTracks()[0],!1),await er(this,et.NEED_ENABLE_TRACK,this)}catch(h){throw i||(this._enabled=!1),k.error("[".concat(this.getTrackId(),"] setEnabled true failed"),h.toString()),h}k.info("[".concat(this.getTrackId(),"] setEnabled success"))}close(){super.close(),(Up()||kw())&&zn.unbindInterruptDetectorTrack(this)}onTrackEnded(){if((Ji()||Us())&&this._enabled&&!this._isClosed&&zn.duringInterruption){const t=async()=>{zn.off(Fi.IOS_INTERRUPTION_END,t),this._enabled&&!this._isClosed&&(k.debug("[".concat(this.getTrackId(),"] try capture microphone media device for interrupted iOS device.")),await this.setEnabled(!1),await this.setEnabled(!0))};zn.on(Fi.IOS_INTERRUPTION_END,t)}else k.debug("[".concat(this.getTrackId(),"] track ended")),this.safeEmit(hf.TRACK_ENDED)}async renewMediaStreamTrack(t){const n=t||this._constraints,i=qa.searchDeviceIdByName(this._deviceName);if(i&&!n.deviceId&&(n.deviceId=i),this._constraints=n,this._enabled){this._originMediaStreamTrack.stop();const a=await Ka({audio:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(a.getAudioTracks()[0],!0)}}bindProcessorContextEvents(t){super.bindProcessorContextEvents(t),t.on(za.REQUEST_UPDATE_CONSTRAINTS,async(n,i,a)=>{try{const l=Object.assign({},this._originalConstraints,...n);await this.renewMediaStreamTrack(l),i()}catch(l){a(l)}})}unbindProcessorContextEvents(t){super.unbindProcessorContextEvents(t),t.removeAllListeners(za.REQUEST_UPDATE_CONSTRAINTS)}}).prototype,"setDevice",[k5,M5],Object.getOwnPropertyDescriptor(_l.prototype,"setDevice"),_l.prototype),dn(_l.prototype,"setEnabled",[F5,U5,B5],Object.getOwnPropertyDescriptor(_l.prototype,"setEnabled"),_l.prototype),dn(_l.prototype,"close",[V5],Object.getOwnPropertyDescriptor(_l.prototype,"close"),_l.prototype),_l),$he=(j5=Rt({argsMap:(t,n)=>[t.getTrackId(),n,t.duration]}),$5=zr(),H5=Rt({argsMap:t=>[t.getTrackId()]}),W5=zr(),z5=Rt({argsMap:t=>[t.getTrackId()]}),G5=zr(),K5=Rt({argsMap:t=>[t.getTrackId()]}),q5=zr(),Y5=Rt({argsMap:t=>[t.getTrackId()]}),X5=zr(),J5=Rt({argsMap:t=>[t.getTrackId()]}),Q5=Rt({argsMap:t=>[t.getTrackId()]}),Z5=zr(),dn((qi=class extends Lr{get __className__(){return"BufferSourceAudioTrack"}constructor(t,n,i,a){super(n.createOutputTrack(),i,a),be(this,"source",void 0),be(this,"_bufferSource",void 0),this._useAudioElement=!1,this.source=t,this._bufferSource=n,this._bufferSource.on(Wa.AUDIO_SOURCE_STATE_CHANGE,l=>{this.safeEmit(hf.SOURCE_STATE_CHANGE,l)});try{this._mediaStreamTrack=this._source.createOutputTrack()}catch{}}get currentState(){return this._bufferSource.currentState}get duration(){return this._bufferSource.duration}get playbackSpeed(){return this._bufferSource.playbackSpeed}getCurrentTime(){return this._bufferSource.currentTime}startProcessAudioBuffer(t){t&&this._bufferSource.updateOptions(t),this._bufferSource.startProcessAudioBuffer()}pauseProcessAudioBuffer(){this._bufferSource.pauseProcessAudioBuffer()}seekAudioBuffer(t){this._bufferSource.seekAudioBuffer(t)}resumeProcessAudioBuffer(){this._bufferSource.resumeProcessAudioBuffer()}stopProcessAudioBuffer(){this._bufferSource.stopProcessAudioBuffer()}close(){this.source=null,this._bufferSource.destroy(),super.close()}setAudioBufferPlaybackSpeed(t){Xn(t,"speed",0),this._bufferSource.setAudioBufferPlaybackSpeed(t)}}).prototype,"startProcessAudioBuffer",[j5,$5],Object.getOwnPropertyDescriptor(qi.prototype,"startProcessAudioBuffer"),qi.prototype),dn(qi.prototype,"pauseProcessAudioBuffer",[H5,W5],Object.getOwnPropertyDescriptor(qi.prototype,"pauseProcessAudioBuffer"),qi.prototype),dn(qi.prototype,"seekAudioBuffer",[z5,G5],Object.getOwnPropertyDescriptor(qi.prototype,"seekAudioBuffer"),qi.prototype),dn(qi.prototype,"resumeProcessAudioBuffer",[K5,q5],Object.getOwnPropertyDescriptor(qi.prototype,"resumeProcessAudioBuffer"),qi.prototype),dn(qi.prototype,"stopProcessAudioBuffer",[Y5,X5],Object.getOwnPropertyDescriptor(qi.prototype,"stopProcessAudioBuffer"),qi.prototype),dn(qi.prototype,"close",[J5],Object.getOwnPropertyDescriptor(qi.prototype,"close"),qi.prototype),dn(qi.prototype,"setAudioBufferPlaybackSpeed",[Q5,Z5],Object.getOwnPropertyDescriptor(qi.prototype,"setAudioBufferPlaybackSpeed"),qi.prototype),qi);class hi extends Lr{get __className__(){return"MixingAudioTrack"}get isActive(){for(const n of this.trackList)if(n._enabled&&!n._isClosed&&!n.muted)return!0;return!1}constructor(){const n=mf().createMediaStreamDestination();super(n.stream.getAudioTracks()[0],void 0,tr(8,"track-mix-")),be(this,"trackList",void 0),be(this,"destNode",void 0),this._useAudioElement=!1;try{this._mediaStreamTrack=this._source.createOutputTrack()}catch{}this.destNode=n,this.trackList=[]}hasAudioTrack(n){return this.trackList.indexOf(n)!==-1}addAudioTrack(n){this.trackList.indexOf(n)===-1?(k.debug("add ".concat(n.getTrackId()," to mixing track")),n._source.outputNode.connect(this.destNode),this.trackList.push(n),this.updateEncoderConfig()):k.debug("track ".concat(n.getTrackId()," is already added"))}removeAudioTrack(n){if(this.trackList.indexOf(n)!==-1){k.debug("remove ".concat(n.getTrackId()," from mixing track"));try{n._source.outputNode.disconnect(this.destNode)}catch{}a_(this.trackList,n),this.updateEncoderConfig()}}updateEncoderConfig(){const n={};this.trackList.forEach(i=>{i._encoderConfig&&((i._encoderConfig.bitrate||0)>(n.bitrate||0)&&(n.bitrate=i._encoderConfig.bitrate),(i._encoderConfig.sampleRate||0)>(n.sampleRate||0)&&(n.sampleRate=i._encoderConfig.sampleRate),(i._encoderConfig.sampleSize||0)>(n.sampleSize||0)&&(n.sampleSize=i._encoderConfig.sampleSize),i._encoderConfig.stereo&&(n.stereo=!0))}),this._encoderConfig=n}_updateRtpTransceiver(n){this._rtpTransceiver!==n&&(this._rtpTransceiver=n,this.trackList.forEach(i=>{i instanceof hi?i.emit(gh.TRANSCEIVER_UPDATED,n):i._updateRtpTransceiver(n)}))}}class Hhe extends t5{set currentState(n){n!==this._currentState&&(this._currentState=n,this.safeEmit(Wa.AUDIO_SOURCE_STATE_CHANGE,this._currentState))}get currentState(){return this._currentState}constructor(n){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),be(this,"audioBuffer",void 0),be(this,"sourceNode",void 0),be(this,"startPlayTime",0),be(this,"startPlayOffset",0),be(this,"pausePlayTime",0),be(this,"options",void 0),be(this,"currentLoopCount",0),be(this,"currentPlaybackSpeed",100),be(this,"_currentState","stopped"),this.audioBuffer=n,this.options=i,this.startPlayOffset=this.options.startPlayTime||0}createWebAudioDiagram(){return this.context.createGain()}get duration(){return this.audioBuffer?this.audioBuffer.duration:0}get playbackSpeed(){return this.currentPlaybackSpeed}get currentTime(){return this.audioBuffer?this.currentState==="stopped"?0:this.currentState==="paused"?this.pausePlayTime:((this.context.currentTime-this.startPlayTime)*(this.playbackSpeed/100)+this.startPlayOffset)%this.audioBuffer.duration:0}updateOptions(n){this.currentState==="stopped"?(this.options=n,this.startPlayOffset=this.options.startPlayTime||0):k.warning("can not set audio source options")}startProcessAudioBuffer(){this.sourceNode&&this.stopProcessAudioBuffer(),this.sourceNode=this.createSourceNode(),this.startSourceNode(),this.currentState="playing"}pauseProcessAudioBuffer(){this.sourceNode&&this.currentState==="playing"&&(this.pausePlayTime=this.currentTime,this.sourceNode.onended=null,this.sourceNode.stop(),this.sourceNode.buffer=null,this.sourceNode=this.createSourceNode(),this.currentState="paused")}seekAudioBuffer(n){this.sourceNode&&(this.sourceNode.onended=null,this.currentState==="playing"&&this.sourceNode.stop(),this.sourceNode=this.createSourceNode(),this.currentState==="playing"?(this.startPlayOffset=n,this.startSourceNode()):this.currentState==="paused"&&(this.pausePlayTime=n))}resumeProcessAudioBuffer(){this.currentState==="paused"&&this.sourceNode&&(this.startPlayOffset=this.pausePlayTime,this.pausePlayTime=0,this.startSourceNode(),this.currentState="playing")}stopProcessAudioBuffer(){if(this.sourceNode){this.sourceNode.onended=null;try{this.sourceNode.stop()}catch{}this.reset()}}destroy(){this.audioBuffer=null,super.destroy()}setAudioBufferPlaybackSpeed(n){this.sourceNode&&(this.currentState==="playing"&&(this.startPlayOffset=this.currentTime,this.startPlayTime=this.context.currentTime),this.sourceNode.playbackRate.value=n/100),this.currentPlaybackSpeed=n}startSourceNode(){this.sourceNode&&this.sourceNode.buffer&&(this.sourceNode.start(0,this.startPlayOffset),this.startPlayTime=this.context.currentTime,this.sourceNode.onended=this.handleSourceNodeEnded.bind(this))}createSourceNode(){const n=this.context.createBufferSource();return n.buffer=this.audioBuffer,n.loop=!!this.options.loop,n.connect(this.outputNode),n.playbackRate.value=this.currentPlaybackSpeed/100,n}handleSourceNodeEnded(){if(this.currentLoopCount+=1,this.options.cycle&&this.options.cycle>this.currentLoopCount)return this.startPlayOffset=0,this.sourceNode=void 0,void this.startProcessAudioBuffer();this.reset()}reset(){this.startPlayOffset=this.options.startPlayTime||0,this.currentState="stopped",this.sourceNode&&(this.sourceNode.disconnect(),this.sourceNode=void 0),this.currentLoopCount=0}}const eV=new Map;class vI{get rendFrameRate(){if(this.renderStats&&this.renderStats.curTs!==this.renderStats.lastTs){const n=this.renderStats.curTs-this.renderStats.lastTs,i=(this.renderStats.renderNum-this.renderStats.lastRenderNum)/n;return this.renderStats.lastRenderNum=this.renderStats.renderNum,this.renderStats.lastTs=this.renderStats.curTs,i}return 0}get videoElementStatus(){return this._videoElementStatus}set videoElementStatus(n){n!==this._videoElementStatus&&(k.debug("[".concat(this.trackId,"] video-element-status change ").concat(this._videoElementStatus," => ").concat(n)),this._videoElementStatus=n)}get videoState(){return this._videoState}set videoState(n){var i;n!==this._videoState&&(this._videoState=n,(i=this.onVideoStateChanged)===null||i===void 0||i.call(this,this.videoState))}constructor(n){be(this,"trackId",void 0),be(this,"config",void 0),be(this,"onFirstVideoFrameDecoded",void 0),be(this,"onVideoStateChanged",void 0),be(this,"freezeTimeCounterList",[]),be(this,"renderFreezeAccTime",0),be(this,"isKeepLastFrame",!1),be(this,"timeUpdatedCount",0),be(this,"freezeTime",0),be(this,"playbackTime",0),be(this,"lastTimeUpdatedTime",0),be(this,"autoplayFailed",!1),be(this,"videoTrack",void 0),be(this,"videoElement",void 0),be(this,"cacheVideoElement",void 0),be(this,"renderStats",void 0),be(this,"_videoState",El.VideoStateStopped),be(this,"videoElementCheckInterval",void 0),be(this,"videoElementFreezeTimeout",void 0),be(this,"_videoElementStatus",_o.NONE),be(this,"isGettingVideoDimensions",!1),be(this,"startGetVideoDimensions",()=>{const i=()=>{if(this.isGettingVideoDimensions=!0,this.videoElement.videoWidth*this.videoElement.videoHeight>4)return k.debug("[".concat(this.trackId,"] current video dimensions:"),this.videoElement.videoWidth,this.videoElement.videoHeight),void(this.isGettingVideoDimensions=!1);setTimeout(i,500)};!this.isGettingVideoDimensions&&i()}),be(this,"autoResumeAfterInterruption",()=>{this.videoTrack&&this.videoTrack.readyState==="live"&&zn.curState==="running"&&(k.debug("[track-".concat(this.trackId,"] video element paused, auto resume for ").concat(i4())),p4()?(this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):(this.videoElement.pause(),this.videoElement.play()))}),be(this,"handleVideoEvents",i=>{switch(i.type){case"play":case"playing":this.startGetVideoDimensions(),this.videoElementStatus=_o.PLAYING;break;case"loadeddata":if(this.videoState=El.VideoStateStarting,this.onFirstVideoFrameDecoded&&this.onFirstVideoFrameDecoded(),this.cacheVideoElement){try{this.cacheVideoElement.srcObject=null,this.cacheVideoElement.remove()}catch{}this.cacheVideoElement=void 0}break;case"canplay":this.videoElementStatus=_o.CANPLAY;break;case"stalled":this.videoElementStatus=_o.STALLED;break;case"suspend":this.videoElementStatus=_o.SUSPEND;break;case"pause":this.videoElementStatus=_o.PAUSED,Ji()||Us()||Si()&&this.autoplayFailed||!this.videoTrack||this.videoTrack.readyState!=="live"||(k.debug("[track-".concat(this.trackId,"] video element paused, auto resume")),this.videoElement.play());break;case"waiting":this.videoElementStatus=_o.WAITING;break;case"abort":this.videoElementStatus=_o.ABORT;break;case"ended":this.videoElementStatus=_o.ENDED;break;case"emptied":this.videoElementStatus=_o.EMPTIED;break;case"error":{const a=this.videoElement.error;a?(this.videoElementStatus=_o.ERROR,k.error("[".concat(this.trackId,"] media error: ").concat(a.message," (").concat(a.code,")"))):k.debug("[".concat(this.trackId,"] media not been an error."));break}case"timeupdate":{const a=performance.now();if(this.timeUpdatedCount+=1,this.timeUpdatedCount<10)return void(this.lastTimeUpdatedTime=a);const l=a-this.lastTimeUpdatedTime,u=this.lastTimeUpdatedTime;if(this.lastTimeUpdatedTime=a,Ql.lastVisibleTime<Ql.lastHiddenTime||u<Ql.lastHiddenTime||u<Ql.lastVisibleTime)return;for(l>ee("VIDEO_FREEZE_DURATION")&&(this.freezeTime+=l),this.playbackTime+=l;this.playbackTime>=6e3;){this.playbackTime-=6e3;const h=Math.min(6e3,this.freezeTime);this.freezeTimeCounterList.push(h),this.freezeTime=Math.max(0,this.freezeTime-6e3)}break}}}),be(this,"autoResumeAfterInterruptionOnIOS15_16",()=>{this.videoTrack&&this.videoTrack.readyState==="live"&&(k.debug("[track-".concat(this.trackId,"] video element paused, auto resume for ").concat(i4())),p4()?(this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):(this.videoElement.pause(),this.videoElement.play()))}),this.trackId=n.trackId,this.config=n,n.element instanceof HTMLVideoElement?this.videoElement=n.element:this.videoElement=document.createElement("video"),zn.on(Fi.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),zn.on(Fi.IOS_15_16_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15_16)}getVideoElement(){return this.videoElement}getContainerElement(){var n;return(n=this.videoElement.parentElement)!==null&&n!==void 0?n:void 0}updateConfig(n){this.config=n,this.trackId=n.trackId,n.element!==this.videoElement&&(this.destroy(),this.videoElement=n.element),this.videoTrack&&this.initVideoElement()}updateVideoTrack(n){this.videoTrack!==n&&(this.videoTrack=n,this.initVideoElement())}play(n){const i=this.videoElement.play();i&&i.catch&&i.catch(l=>{n&&c5(n,"video",l.message,this.trackId),l.name==="NotAllowedError"?(k.warning("detected video element autoplay failed",l),this.autoplayFailed=!0,this.handleAutoPlayFailed()):k.warning("[".concat(this.trackId,"] play warning: "),l)});const a=_n();if((a.name==="Safari"&&Number(a.version)===15||Up())&&i&&i.then){const l=()=>{this.config.mirror&&(this.videoElement.style.transform="rotateY(180deg)")};i.then(l).catch(l)}}getCurrentFrame(){const n=document.createElement("canvas");n.width=this.videoElement.videoWidth,n.height=this.videoElement.videoHeight;const i=n.getContext("2d");if(!i)return k.error("create canvas context failed!"),new ImageData(2,2);i.drawImage(this.videoElement,0,0,n.width,n.height);const a=i.getImageData(0,0,n.width,n.height);return n.remove(),a}async getCurrentFrameToUint8Array(n){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const a=document.createElement("canvas");a.width=this.videoElement.videoWidth,a.height=this.videoElement.videoHeight;const l=a.getContext("2d");return l?(l.drawImage(this.videoElement,0,0,a.width,a.height),new We((u,h)=>{a.toBlob(async f=>{if(a.remove(),f){const g=await g5(f);u({buffer:g,width:a.width,height:a.height})}else h(new Ce(K.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED))},n,i<0?.1:i>1?1:i)})):await gI(n)}destroy(){this.renderStats=void 0,zn.off(Fi.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),zn.off(Fi.IOS_15_16_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15_16),this.videoElement.srcObject=null,this.resetVideoElement(),this.freezeTimeCounterList=[],this.videoState=El.VideoStateStopped}initVideoElement(){if(this.videoElementStatus=_o.INIT,!this.videoElementCheckInterval&&(tV.forEach(u=>{this.videoElement.addEventListener(u,this.handleVideoEvents)}),this.videoElementCheckInterval=window.setInterval(()=>{(function(u){return u!==document.body&&document.body.contains(u)})(this.videoElement)||(this.videoElementStatus=_o.DESTROYED)},1e3),ee("ENABLE_VIDEO_FRAME_CALLBACK"))){var n,i;let u;const h=()=>{document.visibilityState==="visible"&&(document.removeEventListener("visibilitychange",h),this.videoElementFreezeTimeout=window.setTimeout(f,ee("VIDEO_FREEZE_DURATION")))},f=()=>{this.videoElementFreezeTimeout=void 0,this.videoState===El.VideoStateDecoding&&(document.visibilityState==="visible"?this.videoState=El.VideoStateFrozen:document.addEventListener("visibilitychange",h))},g=(_,y)=>{if(this.videoElementStatus===_o.PLAYING){if(this.renderStats?(this.renderStats.renderNum++,this.renderStats.curTs=y.mediaTime):this.renderStats={lastTs:y.mediaTime,curTs:y.mediaTime,lastRenderNum:0,renderNum:0},u){const D=y.presentationTime-u.presentationTime;this.videoState===El.VideoStateStarting&&(this.videoState=El.VideoStateDecoding),this.videoState===El.VideoStateDecoding&&this.onVideoStateChanged&&(this.videoElementFreezeTimeout&&window.clearTimeout(this.videoElementFreezeTimeout),this.videoElementFreezeTimeout=window.setTimeout(f,ee("VIDEO_FREEZE_DURATION"))),D<ee("VIDEO_FREEZE_DURATION")&&this.videoState===El.VideoStateFrozen&&(this.videoState=El.VideoStateDecoding),D>ee("VIDEO_FREEZE_DURATION")&&Ql.lastVisibleTime>=Ql.lastHiddenTime&&u.timestamp>Ql.lastVisibleTime&&u.timestamp>Ql.lastHiddenTime&&(this.renderFreezeAccTime+=D)}u=Sr(Sr({},y),{},{timestamp:_})}var T,A;ee("ENABLE_VIDEO_FRAME_CALLBACK")&&((T=(A=this.videoElement).requestVideoFrameCallback)===null||T===void 0||T.call(A,g))};(n=(i=this.videoElement).requestVideoFrameCallback)===null||n===void 0||n.call(i,g)}this.videoElement.controls=!1,this.videoElement.setAttribute("playsinline",""),o_()&&!ee("HIDE_NO_POSTER")&&(this.videoElement.poster="noposter");const a=_n();a.name==="Safari"&&Number(a.version)===15||Up()||!this.config.mirror||(this.videoElement.style.transform="rotateY(180deg)"),this.config.fit?this.videoElement.style.objectFit=this.config.fit:this.videoElement.style.objectFit="cover",this.videoElement.setAttribute("muted",""),this.videoElement.muted=!0,this.videoElement.srcObject&&this.videoElement.srcObject instanceof MediaStream?this.videoElement.srcObject.getVideoTracks()[0]!==this.videoTrack&&(this.videoElement.srcObject=this.videoTrack?new MediaStream([this.videoTrack]):null,Zn()&&this.videoElement.load()):(this.videoElement.srcObject=this.videoTrack?new MediaStream([this.videoTrack]):null,Zn()&&this.videoElement.load());const l=this.videoElement.play();l!==void 0&&l.catch(u=>{k.debug("[".concat(this.trackId,"] playback interrupted"),u.toString())})}resetVideoElement(){tV.forEach(n=>{this.videoElement&&this.videoElement.removeEventListener(n,this.handleVideoEvents)}),this.videoElementCheckInterval&&(window.clearInterval(this.videoElementCheckInterval),this.videoElementCheckInterval=void 0),this.videoElementStatus=_o.NONE}handleAutoPlayFailed(){const n=i=>{i.preventDefault(),this.videoElement.play().then(()=>{k.debug("[".concat(this.trackId,"] Video element for trackId:").concat(this.trackId," autoplay resumed."))}).catch(a=>{k.error(a)}),this.autoplayFailed=!1,g0()?document.body.removeEventListener("click",n,!0):(document.body.removeEventListener("touchstart",n,!0),document.body.removeEventListener("mousedown",n,!0))};g0()?document.body.addEventListener("click",n,!0):(document.body.addEventListener("touchstart",n,!0),document.body.addEventListener("mousedown",n,!0)),s5()}}const tV=["play","playing","loadeddata","canplay","pause","stalled","suspend","waiting","abort","emptied","ended","timeupdate","error"];class nV extends vI{constructor(n){super(n),be(this,"container",void 0),be(this,"slot",void 0),this.slot=n.element,this.updateConfig(n)}updateConfig(n){this.config=n,this.trackId=n.trackId;const i=n.element;i!==this.slot&&(this.destroy(),this.slot=i),this.createElements()}updateVideoTrack(n){this.videoTrack!==n&&(this.videoTrack=n,this.createElements())}play(n){var i;(i=this.container)!==null&&i!==void 0&&i.contains(this.videoElement)&&super.play(n)}getCurrentFrame(){var n;return(n=this.container)!==null&&n!==void 0&&n.contains(this.videoElement)?super.getCurrentFrame():new ImageData(2,2)}async getCurrentFrameToUint8Array(n){var i;let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return(i=this.container)!==null&&i!==void 0&&i.contains(this.videoElement)?await super.getCurrentFrameToUint8Array(n,a):await gI(n)}destroy(){if(super.destroy(),this.videoElement.remove(),this.videoElement=document.createElement("video"),this.container){try{this.container.remove(),this.slot.removeChild(this.container)}catch{}this.container=void 0}}createElements(){this.container||(this.container=document.createElement("div")),this.container.id="agora-video-player-".concat(this.trackId),this.container.style.width="100%",this.container.style.height="100%",this.container.style.position="relative",this.container.style.overflow="hidden",this.videoTrack?(this.container.style.backgroundColor="black",ee("KEEP_LAST_FRAME")&&this.isKeepLastFrame&&this.videoElement.paused&&this.resetVideoElement(),this.mountedVideoElement()):this.unmountedVideoElement(),this.slot.appendChild(this.container)}mountedVideoElement(){var n;!this.container||(n=this.container)!==null&&n!==void 0&&n.contains(this.videoElement)||this.container.appendChild(this.videoElement),super.initVideoElement(),this.videoElement.id="video_".concat(this.trackId),this.videoElement.className="agora_video_player",this.videoElement.style.width="100%",this.videoElement.style.height="100%",this.videoElement.style.position="absolute",this.videoElement.style.left="0",this.videoElement.style.top="0"}unmountedVideoElement(){var n;if((n=this.container)!==null&&n!==void 0&&n.contains(this.videoElement)){super.resetVideoElement();try{this.container&&this.container.removeChild(this.videoElement)}catch{}this.videoElement=document.createElement("video")}}resetVideoElement(){var n;(n=this.container)!==null&&n!==void 0&&n.contains(this.videoElement)&&(super.resetVideoElement(),this.cacheVideoElement=this.videoElement,this.videoElement=document.createElement("video"))}getContainerElement(){return this.container}}var rV,iV,oV,aV,sV,cV,lV,uV,dV,hV,pV,fV,mV,gV,vV,EV,_V,SV,yV,CV,bV,TV,RV,wV,IV,cn,AV,OV,xV,NV,DV,PV,LV,kV,Xa;let nr=(rV=Rt({argsMap:(t,n,i)=>[t.getTrackId(),typeof n=="string"?n:n instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement",i]}),iV=zr(),oV=Rt({argsMap:t=>[t.getTrackId()]}),aV=jp("LocalVideoTrack","_enabledMutex"),sV=Rt({argsMap:(t,n)=>[t.getTrackId(),n]}),cV=zr(),lV=jp("LocalVideoTrack","_enabledMutex"),uV=Rt({argsMap:(t,n)=>[t.getTrackId(),n]}),dV=zr(),hV=Rt({argsMap:(t,n)=>[t.getTrackId(),n]}),pV=zr(),fV=zr(),mV=Rt({argsMap:(t,n,i)=>[t.getTrackId(),n,i]}),gV=zr(),vV=zr(),EV=zr(),_V=zr(),SV=zr(),yV=zr(),CV=zr(),bV=Rt({argsMap:(t,n)=>[t.getTrackId(),n.name]}),TV=Rt({argsMap:t=>[t.getTrackId()]}),RV=Rt({argsMap:t=>[t.getTrackId()]}),wV=Rt({argsMap:(t,n,i)=>[t.getTrackId(),n.label,i]}),IV=Rt(),cn=class YW extends ff{get videoHeight(){if(Si()){const{height:n}=this._mediaStreamTrack.getSettings();return this._videoHeight=n,this._videoHeight}return this._videoHeight}get videoWidth(){if(Si()){const{width:n}=this._mediaStreamTrack.getSettings();return this._videoWidth=n,this._videoWidth}return this._videoWidth}get isPlaying(){return!(!this._player||this._player.videoElementStatus!==_o.PLAYING)}get processorDestination(){return this._processorDestination}get processorContext(){return this._processorContext}set processorContext(n){this._processorContext=n}get __className__(){return"LocalVideoTrack"}constructor(n,i,a,l,u,h){if(super(n,u),be(this,"trackMediaType","video"),be(this,"_player",void 0),be(this,"isUseScaleResolutionDownBy",!1),be(this,"_videoVisibleTimer",null),be(this,"_statsTimer",null),be(this,"_previousVideoVisibleStatus",void 0),be(this,"_clearPreviousVideoVisibleStatus",()=>this._previousVideoVisibleStatus=void 0),be(this,"_encoderConfig",void 0),be(this,"_scalabilityMode",{numSpatialLayers:1,numTemporalLayers:1}),be(this,"_optimizationMode",void 0),be(this,"_videoHeight",void 0),be(this,"_videoWidth",void 0),be(this,"_forceBitrateLimit",void 0),be(this,"_enabled",!0),be(this,"_processorDestination",void 0),be(this,"_processorContext",void 0),Si()){const{width:f,height:g}=n.getSettings();this._videoWidth=f,this._videoHeight=g}else this.updateMediaStreamTrackResolution();if(this._encoderConfig=i,this._scalabilityMode=a,this._optimizationMode=l,this._hints=h||[],this._hints.indexOf(ar.SCREEN_TRACK)===-1)this.updateBitrateFromProfile();else if(function(f,g,_){const y=_n();return!(y.name!==f||!y.osVersion)&&(_?Number(y.version)>=g&&Number(y.version)<=_:Number(y.version)===g)}(Bn.CHROME,115)&&r_().indexOf("Windows")!==-1){const f=function(g,_){if("VideoFrame"in window&&"TransformStream"in window&&un().supportWebRTCInsertableStream){const y=new MediaStreamTrackProcessor(g),T=new MediaStreamTrackGenerator({kind:"video"});let A,D,W=Date.now();const F=()=>{U&&(clearInterval(U),U=void 0),A&&(A.close(),A=void 0),g.stop(),D=void 0,T.removeEventListener("ended",F)};let U=window.setInterval(()=>{if(D&&A&&Date.now()-W>(_??1e3))try{T.readyState==="live"?D.enqueue(A.clone()):F()}catch{F()}},_??1e3);const z=new TransformStream({transform:(X,ue)=>{T.readyState==="live"?(D=ue,W=Date.now(),A===void 0?(A=X,ue.enqueue(X.clone())):(ue.enqueue(A),A=X)):X.close()}});return T.addEventListener("ended",F),y.readable.pipeThrough(z).pipeTo(T.writable),T}}(n);f&&(k.info("local screen video track begin to inject frame"),this._mediaStreamTrack=f)}i&&this._hints.indexOf(ar.CUSTOM_TRACK)!==-1&&this.setEncoderConfiguration(i),this._processorContext=new u5(this.getTrackId(),"local"),this._processorDestination=new l5(this.processorContext),this.bindProcessorDestinationEvents()}play(n){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof n=="string"){const l=document.getElementById(n);l?n=l:(k.warning("[".concat(this.getTrackId(),'] can not find "#').concat(n,'" element, use document.body')),n=document.body)}k.debug("[".concat(this.getTrackId(),"] start video playback in ").concat(n instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement"),JSON.stringify(i));const a=Sr(Sr(Sr({},this._getDefaultPlayerConfig()),i),{},{trackId:this.getTrackId(),element:n});this._player?this._player.updateConfig(a):(n instanceof HTMLVideoElement?this._player=new vI(a):this._player=new nV(a),this._player.updateVideoTrack(this._mediaStreamTrack)),this._player.play(),this._videoVisibleTimer&&window.clearInterval(this._videoVisibleTimer),this._clearPreviousVideoVisibleStatus(),this._videoVisibleTimer=window.setInterval(()=>{try{const l=this.getVideoElementVisibleStatus();this.safeEmit(hf.VIDEO_ELEMENT_VISIBLE_STATUS,l)}catch{}},ee("CHECK_VIDEO_VISIBLE_INTERVAL"))}stop(){this._player&&(this._videoVisibleTimer&&(window.clearInterval(this._videoVisibleTimer),this._videoVisibleTimer=null),this._statsTimer&&(this.isUseScaleResolutionDownBy=!1,window.clearInterval(this._statsTimer),this._statsTimer=null),this._clearPreviousVideoVisibleStatus(),this._player.destroy(),this._player=void 0,k.debug("[".concat(this.getTrackId(),"] stop video playback")))}async setEnabled(n,i){if(!i){if(n===this._enabled)return;this.stateCheck("enabled",n)}if(k.info("[".concat(this.getTrackId(),"] start setEnabled"),n),!n){this._originMediaStreamTrack.enabled=!1;try{await er(this,et.NEED_DISABLE_TRACK,this)}catch(a){throw k.error("[".concat(this.getTrackId(),"] setEnabled to false error"),a.toString()),a}return i||(this._enabled=!1),void k.info("[".concat(this.getTrackId(),"] setEnabled to false success"))}this._originMediaStreamTrack.enabled=!0;try{await er(this,et.NEED_ENABLE_TRACK,this)}catch(a){throw k.error("[".concat(this.getTrackId(),"] setEnabled to true error"),a.toString()),a}k.info("[".concat(this.getTrackId(),"] setEnabled to true success")),i||(this._enabled=!0)}async setMuted(n){n!==this._muted&&(this.stateCheck("muted",n),this._muted=n,this._originMediaStreamTrack.enabled=!n,k.debug("[".concat(this.getTrackId(),"] start set muted: ").concat(n)),n?await er(this,et.NEED_MUTE_TRACK,this):await er(this,et.NEED_UNMUTE_TRACK,this))}async setEncoderConfiguration(n,i){if(!this._enabled)throw new Ce(K.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled");if(n==="720p_auto"?this.startMonitorStats():this._statsTimer&&(window.clearInterval(this._statsTimer),this._statsTimer=null),n=vl(n),this._forceBitrateLimit&&(n.bitrateMax=this._forceBitrateLimit.max_bitrate?this._forceBitrateLimit.max_bitrate:n.bitrateMax,n.bitrateMin=this._forceBitrateLimit.min_bitrate?this._forceBitrateLimit.min_bitrate:n.bitrateMin),n.width||n.height||n.frameRate){const a=X_({encoderConfig:n});(Si()||Ji()||Us())&&(a.deviceId=void 0),k.debug("[".concat(this.getTrackId(),"] setEncoderConfiguration applyConstraints"),JSON.stringify(n),JSON.stringify(a));try{await this._originMediaStreamTrack.applyConstraints(a),this.updateMediaStreamTrackResolution()}catch(l){const u=new Ce(K.UNEXPECTED_ERROR,l.toString());throw k.error("[".concat(this.getTrackId(),"] applyConstraints error"),u.toString()),u}}this._encoderConfig=n,this._hints.indexOf(ar.SCREEN_TRACK)===-1&&this.updateBitrateFromProfile();try{await er(this,et.NEED_UPDATE_VIDEO_ENCODER,this)}catch(a){return a.throw(k)}}getStats(){return Bu(()=>{k.warning("[deprecated] LocalVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalVideoStats instead")},"localVideoTrackGetStatsWarning"),Ta(this,et.GET_STATS)||Sr({},lI)}async setBeautyEffect(n){k.error("LocalVideoTrack.setBeautyEffect was deprecated, please migrate to agora-extension-beauty-effect")}getCurrentFrameData(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}async getCurrentFrameImage(n){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return this._player?this._player.getCurrentFrameToUint8Array(n,i):await gI(n)}async setBitrateLimit(n){if(k.debug("[".concat(this.getTrackId(),"] set bitrate limit, ").concat(JSON.stringify(n))),n){this._forceBitrateLimit=n,this._encoderConfig&&(this._encoderConfig.bitrateMax?this._encoderConfig.bitrateMax=this._encoderConfig.bitrateMax<n.max_bitrate?this._encoderConfig.bitrateMax:n.max_bitrate:this._encoderConfig.bitrateMax=n.max_bitrate,this._encoderConfig.bitrateMin,this._encoderConfig.bitrateMin=n.min_bitrate);try{await er(this,et.NEED_UPDATE_VIDEO_ENCODER,this)}catch(i){return i.throw(k)}}}async setOptimizationMode(n){if(n!=="motion"&&n!=="detail"&&n!=="balanced")return void k.error(K.INVALID_PARAMS,"optimization mode must be motion, detail or balanced");const i=this._optimizationMode;try{this._optimizationMode=n,await er(this,et.NEED_UPDATE_VIDEO_SEND_PARAMETERS,this)}catch(a){throw this._optimizationMode=i,k.error("[".concat(this.getTrackId(),"] set optimization mode failed"),a.toString()),a}k.info("[".concat(this.getTrackId(),"] set optimization mode success (").concat(n,")"))}setScalabiltyMode(n){if(n.numSpatialLayers===1&&n.numTemporalLayers!==1)return k.error(K.INVALID_PARAMS,"scalability mode currently not supported, no SVC."),void(this._scalabilityMode={numSpatialLayers:1,numTemporalLayers:1});this._scalabilityMode=n,k.info("[".concat(this.getTrackId(),"] set scalability mode success (").concat(n,")"))}updateMediaStreamTrackResolution(){p5(this._originMediaStreamTrack).then(n=>{let[i,a]=n;this._videoHeight=a,this._videoWidth=i}).catch(c_)}_updatePlayerSource(){this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}_getDefaultPlayerConfig(){return{fit:"contain"}}async setSenderConfiguration(n){if(!this._enabled)throw new Ce(K.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled");k.debug("[".concat(this.getTrackId(),"] setSenderConfiguration applyConstraints"),JSON.stringify(n)),n=vl(n),this._forceBitrateLimit&&(n.bitrateMax=this._forceBitrateLimit.max_bitrate?this._forceBitrateLimit.max_bitrate:n.bitrateMax,n.bitrateMin=this._forceBitrateLimit.min_bitrate?this._forceBitrateLimit.min_bitrate:n.bitrateMin),this._encoderConfig=n,this._hints.indexOf(ar.SCREEN_TRACK)===-1&&this.updateBitrateFromProfile();try{await er(this,et.NEED_UPDATE_VIDEO_ENCODER,this)}catch(i){return i.throw(k)}}updateBitrateFromProfile(){if(!this._encoderConfig)return;const{width:n,height:i,frameRate:a}=this.getMediaStreamTrackSettings();if(!n||!i||!a)return;const{bitrateMax:l,bitrateMin:u}=this._encoderConfig;if(u==null||l==null){const{max:h,min:f}=function(g,_,y,T,A){const D=ee("BITRATE_ADAPTER_TYPE");if(D==="DEFAULT_BITRATE")return{min:T,max:A};if(A===void 0){var W;const U=Math.floor(200*Math.pow(y/15,.6)*Math.pow(g*_/640/360,.75));A=D==="STANDARD_BITRATE"?4*U:2*U,T=(W=T)!==null&&W!==void 0?W:U}else{var F;T=(F=T)!==null&&F!==void 0?F:Math.floor(A/10)}return{min:T,max:A}}(n,i,a,u,l);this._encoderConfig.bitrateMin=f,this._encoderConfig.bitrateMax=h,k.debug("[".concat(this.getTrackId(),"] update bitrate from profile, [w: ").concat(n,", h: ").concat(i,", fps: ").concat(a,"] => [brMax: ").concat(h,", brMin: ").concat(f,"]"))}}getVideoElementVisibleStatus(){try{var n,i;const a=this==null||(n=this._player)===null||n===void 0?void 0:n.getContainerElement(),l={track:this,element:this==null||(i=this._player)===null||i===void 0?void 0:i.getVideoElement(),slot:a==null?void 0:a.parentElement},{element:u,slot:h}=l;if(this.isPlaying&&u instanceof HTMLVideoElement&&h instanceof HTMLElement){const f=S4.checkOneElementVisible(u),g=Object.assign({},f);if(g.visible!==this._previousVideoVisibleStatus){this._previousVideoVisibleStatus=g.visible;const _=ht.reportApiInvoke(null,{tag:Nr.TRACER,name:ni.LOCAL_VIDEO_TRACK_GET_VIDEO_VISIBLE,options:[this.getTrackId()]});g.visible?_.onSuccess("Video is visible"):_.onSuccess("Invisible because of ".concat(g.reason))}return g}return}catch(a){throw new Ce(K.GET_VIDEO_ELEMENT_VISIBLE_ERROR,a.message)}}async renewMediaStreamTrack(n){}pipe(n){if(this.processor===n)return n;if(n._source)throw new Ce(K.INVALID_OPERATION,"Processor ".concat(n.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=n,this.processor._source=this,n.updateInput({track:this._originMediaStreamTrack,context:this.processorContext}),n}unpipe(){if(!this.processor)return;const n=this.processor;this.processor._source=void 0,this.processor=void 0,n.reset()}close(){super.close(),this.unbindProcessorDestinationEvents(),this.unbindProcessorContextEvents(),this.unpipe(),this.processorDestination._source&&this.processorDestination._source.unpipe()}clone(n){let i=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],a=this._encoderConfig;n&&(a=Sr(Sr({},a),vl(n))),a=eh(a);const l=tr(8,"track-video-cloned-"),u=new YW(i?this._mediaStreamTrack.clone():this._mediaStreamTrack,a,eh(this._scalabilityMode),this._optimizationMode,l,eh(this._hints));return n&&a&&u.setEncoderConfiguration(a),k.debug("clone video track from ".concat(this.getTrackId()," to ").concat(l,", clone ").concat(i)),u}async replaceTrack(n,i){if(!(n instanceof MediaStreamTrack))throw new Ce(K.INVALID_PARAMS,"track should be an instance of MediaStreamTrack");if(n.kind!=="video")throw new Ce(K.INVALID_PARAMS,"track should be a video MediaStreamTrack");await this._updateOriginMediaStreamTrack(n,i,!0),this.updateMediaStreamTrackResolution()}startMonitorStats(){if(!Si()&&!Ji())return;this._statsTimer&&window.clearInterval(this._statsTimer);let n=2,i=z_[n],a=-1,l=Date.now();const u=h=>{h>2||h<0||(l=Date.now(),i=z_[h],this.setSenderConfiguration(i))};this.isUseScaleResolutionDownBy=!0,this._statsTimer=window.setInterval(()=>{const h=this.getStats(),f=Ta(this,et.GET_RTC_STATS);if(h.sendPackets>0&&f){a===-1&&(a=Date.now());const g=Date.now();if(g-a<1e3||g-l<ee("PROFILE_SWITCH_INTERVAL"))return;const _=h.sendFrameRate,y=.6*i.frameRate,T=.9*i.frameRate;typeof _=="number"&&_>0&&_<y?n>0&&(n--,u(n),k.debug("[".concat(this.getTrackId(),"] step down for fps ").concat(_,", switchProfile to ").concat(n))):f.OutgoingAvailableBandwidth<i.bitrateMin?n>0&&(n--,u(n),k.debug("[".concat(this.getTrackId(),"] step down for OutgoingAvailableBandwidth ").concat(f.OutgoingAvailableBandwidth,", bitrateMin ").concat(i.bitrateMin,", switchProfile to ").concat(n))):typeof _=="number"&&_>T&&n<z_.length-1&&f.OutgoingAvailableBandwidth>1.2*z_[n+1].bitrateMin&&(n++,u(n),k.debug("[".concat(this.getTrackId(),"] step up for fps ").concat(_,", OutgoingAvailableBandwidth ").concat(f.OutgoingAvailableBandwidth,", switchProfile to ").concat(n)))}},ee("CHECK_LOCAL_STATS_INTERVAL"))}sendSeiData(n){if(Bu(()=>{ht.reportApiInvoke(null,{name:ni.LOCAL_VIDEO_SEND_SEI_DATA,options:[],tag:Nr.TRACER}).onSuccess("")},this._mediaStreamTrack.id||this.getTrackId()),!ee("ENABLE_VIDEO_SEI")||!ee("ENABLE_ENCODED_TRANSFORM"))return void k.warning('To send/receive SEI, please call AgoraRTC.setParameter("ENABLE_VIDEO_SEI", true) before instantiate IAgoraRtcClient');if(n instanceof Uint8Array==0)return new Ce(K.INVALID_PARAMS,"Invalid argument type, ILocalVideoTrack.sendSeiData() only accept Uint8Array argument.").throw();const i=this.getRTCRtpTransceiver();if(!i)return void k.warning("Video track is not published, SEI can not be send");const a=i.sender.getParameters();if(a.codecs.length===0)return;const l=a.codecs[0].mimeType.toLocaleLowerCase();l==="video/h264"?this.safeEmit("sei-to-send",n):k.warning("SEI is not supported by ".concat(l))}bindProcessorDestinationEvents(){this.processorDestination.on(ko.ON_TRACK,async n=>{n?n!==this._mediaStreamTrack&&(this._mediaStreamTrack=n,this._updatePlayerSource(),await er(this,et.NEED_REPLACE_TRACK,this)):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await er(this,et.NEED_REPLACE_TRACK,this))})}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(ko.ON_TRACK)}unbindProcessorContextEvents(){this.processorContext.removeAllListeners(za.REQUEST_UPDATE_CONSTRAINTS),this.processorContext.removeAllListeners(za.REQUEST_CONSTRAINTS)}},dn(cn.prototype,"play",[rV,iV],Object.getOwnPropertyDescriptor(cn.prototype,"play"),cn.prototype),dn(cn.prototype,"stop",[oV],Object.getOwnPropertyDescriptor(cn.prototype,"stop"),cn.prototype),dn(cn.prototype,"setEnabled",[aV,sV,cV],Object.getOwnPropertyDescriptor(cn.prototype,"setEnabled"),cn.prototype),dn(cn.prototype,"setMuted",[lV,uV,dV],Object.getOwnPropertyDescriptor(cn.prototype,"setMuted"),cn.prototype),dn(cn.prototype,"setEncoderConfiguration",[hV,pV],Object.getOwnPropertyDescriptor(cn.prototype,"setEncoderConfiguration"),cn.prototype),dn(cn.prototype,"getStats",[fV],Object.getOwnPropertyDescriptor(cn.prototype,"getStats"),cn.prototype),dn(cn.prototype,"setBeautyEffect",[mV,gV],Object.getOwnPropertyDescriptor(cn.prototype,"setBeautyEffect"),cn.prototype),dn(cn.prototype,"getCurrentFrameData",[vV],Object.getOwnPropertyDescriptor(cn.prototype,"getCurrentFrameData"),cn.prototype),dn(cn.prototype,"getCurrentFrameImage",[EV],Object.getOwnPropertyDescriptor(cn.prototype,"getCurrentFrameImage"),cn.prototype),dn(cn.prototype,"setBitrateLimit",[_V],Object.getOwnPropertyDescriptor(cn.prototype,"setBitrateLimit"),cn.prototype),dn(cn.prototype,"setOptimizationMode",[SV],Object.getOwnPropertyDescriptor(cn.prototype,"setOptimizationMode"),cn.prototype),dn(cn.prototype,"setScalabiltyMode",[yV],Object.getOwnPropertyDescriptor(cn.prototype,"setScalabiltyMode"),cn.prototype),dn(cn.prototype,"updateMediaStreamTrackResolution",[CV],Object.getOwnPropertyDescriptor(cn.prototype,"updateMediaStreamTrackResolution"),cn.prototype),dn(cn.prototype,"pipe",[bV],Object.getOwnPropertyDescriptor(cn.prototype,"pipe"),cn.prototype),dn(cn.prototype,"unpipe",[TV],Object.getOwnPropertyDescriptor(cn.prototype,"unpipe"),cn.prototype),dn(cn.prototype,"close",[RV],Object.getOwnPropertyDescriptor(cn.prototype,"close"),cn.prototype),dn(cn.prototype,"replaceTrack",[wV],Object.getOwnPropertyDescriptor(cn.prototype,"replaceTrack"),cn.prototype),dn(cn.prototype,"startMonitorStats",[IV],Object.getOwnPropertyDescriptor(cn.prototype,"startMonitorStats"),cn.prototype),cn),EI=(AV=Rt({argsMap:(t,n)=>[t.getTrackId(),n]}),OV=zr(),xV=jp("CameraVideoTrack","_enabledMutex"),NV=Rt({argsMap:(t,n)=>[t.getTrackId(),n]}),DV=zr(),PV=Rt({argsMap:(t,n)=>[t.getTrackId(),n]}),LV=zr(),kV=Rt({argsMap:t=>[t.getTrackId()]}),Xa=class XW extends nr{get __className__(){return"CameraVideoTrack"}constructor(n,i,a,l,u,h){super(n,vl(i.encoderConfig),l,u,h),be(this,"_config",void 0),be(this,"_originalConstraints",void 0),be(this,"_constraints",void 0),be(this,"_enabled",!0),be(this,"_deviceName","default"),be(this,"tryResumeVideoForIOS15_16WeChat",async()=>{(Up()||kw())&&!function(){const f=_n();if(f.os!==_i.IOS||!f.osVersion)return!1;const g=f.osVersion.split(".");return Number(g[0])===15&&Number(g[1])>=2}()&&f4()&&this._enabled&&!this._isClosed&&(k.debug("[".concat(this.getTrackId(),"] try capture camera media device for interrupted iOS 15 device on WeChat.")),await this.renewMediaStreamTrack())}),this._config=i,this._originalConstraints=a,this._constraints=a,this._deviceName=n.label,this._encoderConfig=vl(this._config.encoderConfig),zn.on(Fi.IOS_15_16_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat),zn.on(Fi.IOS_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat),this.bindProcessorContextEvents()}async setDevice(n){return typeof n=="string"?this._setDeviceById(n):n.deviceId?this._setDeviceById(n.deviceId):n.facingMode?this._setDeviceByFacingModel(n.facingMode):void 0}async _setDeviceById(n){if(k.info("[".concat(this.getTrackId(),"] set device to ").concat(n)),this._enabled)try{const i=await qa.getDeviceById(n),a={};a.video=Sr({},this._constraints),a.video.deviceId={exact:n},a.video.facingMode=void 0,this._originMediaStreamTrack.stop();let l=null;try{l=await Ka(a,this.getTrackId())}catch(u){throw k.error("[".concat(this.getTrackId(),"] setDevice failed"),u.toString()),l=await Ka({video:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(l.getVideoTracks()[0],!1),u}await this._updateOriginMediaStreamTrack(l.getVideoTracks()[0],!1),this.updateMediaStreamTrackResolution(),this._deviceName=i.label,this._config.cameraId=n,this._constraints.deviceId={exact:n}}catch(i){throw k.error("[".concat(this.getTrackId(),"] setDevice error"),i.toString()),i}else try{const i=await qa.getDeviceById(n);this._deviceName=i.label,this._config.cameraId=n,this._constraints.deviceId={exact:n}}catch(i){throw k.error("[".concat(this.getTrackId(),"] setDevice error"),i.toString()),i}k.info("[".concat(this.getTrackId(),"] setDevice success"))}async _setDeviceByFacingModel(n){k.info("[".concat(this.getTrackId(),"] set facingMode ").concat(n));const i={video:Sr(Sr({},this._constraints),{},{deviceId:void 0,facingMode:{exact:n}})};if(this._enabled){this._originMediaStreamTrack.stop();let a=null;try{a=await Ka(i,this.getTrackId())}catch(l){throw k.error("[".concat(this.getTrackId(),"] setDeviceByFacingModel failed"),l.toString()),a=await Ka({video:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(a.getVideoTracks()[0],!1),l}await this._updateOriginMediaStreamTrack(a.getVideoTracks()[0],!1),this.updateMediaStreamTrackResolution()}this._deviceName="",this._config.facingMode=n,this._config.cameraId=void 0,this._constraints=Sr({},i.video),k.info("[".concat(this.getTrackId(),"] setDeviceByFacingModel success"))}async setEnabled(n,i){if(!i){if(n===this._enabled)return;this.stateCheck("enabled",n)}if(k.info("[".concat(this.getTrackId(),"] start setEnabled"),n),n){try{if(this.isExternalTrack)this._originMediaStreamTrack.enabled=!0;else{const a=await Ka({video:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(a.getVideoTracks()[0],!1)}await er(this,et.NEED_ENABLE_TRACK,this)}catch(a){throw k.error("[".concat(this.getTrackId(),"] setEnabled true error"),a.toString()),a}this.updateMediaStreamTrackResolution(),k.info("[".concat(this.getTrackId(),"] setEnabled to true success")),i||(this._enabled=!0)}else{this.isExternalTrack?this._originMediaStreamTrack.enabled=!1:(this._originMediaStreamTrack.onended=null,this._originMediaStreamTrack.stop()),i||(this._enabled=!1);try{await er(this,et.NEED_DISABLE_TRACK,this)}catch(a){throw k.error("[".concat(this.getTrackId(),"] setEnabled to false error"),a.toString()),a}k.info("[".concat(this.getTrackId(),"] setEnabled to false success"))}}async setEncoderConfiguration(n,i){if(!this._enabled)throw new Ce(K.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled");n==="720p_auto"?this.startMonitorStats():this._statsTimer&&(window.clearInterval(this._statsTimer),this._statsTimer=null),n=vl(n),this._forceBitrateLimit&&(n.bitrateMax=this._forceBitrateLimit.max_bitrate||n.bitrateMax,n.bitrateMin=this._forceBitrateLimit.min_bitrate||n.bitrateMin);const a=or(this._config);a.encoderConfig=n;const l=X_(a);(Si()||Ji()||Us())&&(l.deviceId=void 0),k.debug("[".concat(this.getTrackId(),"] setEncoderConfiguration applyConstraints"),JSON.stringify(n),JSON.stringify(l));try{await this._originMediaStreamTrack.applyConstraints(l),this.updateMediaStreamTrackResolution()}catch(u){const h=new Ce(K.UNEXPECTED_ERROR,u.toString());throw k.error("[".concat(this.getTrackId(),"] applyConstraints error"),h.toString()),h}this._config=a,this._constraints=l,this._originalConstraints=l,this._encoderConfig=n,this._hints.indexOf(ar.SCREEN_TRACK)===-1&&this.updateBitrateFromProfile();try{await er(this,et.NEED_UPDATE_VIDEO_ENCODER,this)}catch(u){return u.throw(k)}}_getDefaultPlayerConfig(){return{mirror:!0,fit:"cover"}}onTrackEnded(){if((Ji()||Us())&&this._enabled&&!this._isClosed&&zn.duringInterruption){const n=async()=>{zn.off(Fi.IOS_INTERRUPTION_END,n),this._enabled&&!this._isClosed&&(k.debug("[".concat(this.getTrackId(),"] try capture camera media device for interrupted iOS device.")),await this.setEnabled(!1),await this.setEnabled(!0))};zn.on(Fi.IOS_INTERRUPTION_END,n)}else k.debug("[".concat(this.getTrackId(),"] track ended")),this.safeEmit(hf.TRACK_ENDED)}async renewMediaStreamTrack(n){const i=n||this._constraints,a=qa.searchDeviceIdByName(this._deviceName);if(a&&!i.deviceId&&(i.deviceId={exact:a}),this._enabled){const l=await Ka({video:i},this.getTrackId());this._constraints=i,await this._updateOriginMediaStreamTrack(l.getVideoTracks()[0],!0),this.updateMediaStreamTrackResolution()}}close(){super.close(),zn.off(Fi.IOS_15_16_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat),zn.off(Fi.IOS_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat)}clone(n){let i=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],a=this._encoderConfig;n&&(a=Sr(Sr({},a),vl(n))),a=eh(a);const l=tr(8,"track-cam-cloned-"),u=new XW(i?this._mediaStreamTrack.clone():this._mediaStreamTrack,eh(Sr(Sr({},this._config),{},{encoderConfig:a})),eh(this._constraints),eh(this._scalabilityMode),this._optimizationMode,l);return n&&a&&u.setEncoderConfiguration(a),k.debug("clone track from ".concat(this.getTrackId()," to ").concat(l,", clone ").concat(i)),u}bindProcessorContextEvents(){this.processorContext.on(za.REQUEST_UPDATE_CONSTRAINTS,async(n,i,a)=>{try{const l=Object.assign({},this._originalConstraints,...n);await this.renewMediaStreamTrack(l),i()}catch(l){a(l)}}),this.processorContext.on(za.REQUEST_CONSTRAINTS,async n=>{n(this._originMediaStreamTrack.getSettings())})}},dn(Xa.prototype,"setDevice",[AV,OV],Object.getOwnPropertyDescriptor(Xa.prototype,"setDevice"),Xa.prototype),dn(Xa.prototype,"setEnabled",[xV,NV,DV],Object.getOwnPropertyDescriptor(Xa.prototype,"setEnabled"),Xa.prototype),dn(Xa.prototype,"setEncoderConfiguration",[PV,LV],Object.getOwnPropertyDescriptor(Xa.prototype,"setEncoderConfiguration"),Xa.prototype),dn(Xa.prototype,"close",[kV],Object.getOwnPropertyDescriptor(Xa.prototype,"close"),Xa.prototype),Xa);function _I(t,n,i,a){i.optimizationMode&&(a&&a.width&&a.height?(i.encoderConfig=Sr(Sr({},a),{},{bitrateMin:a.bitrateMin,bitrateMax:a.bitrateMax}),i.optimizationMode!=="motion"&&i.optimizationMode!=="detail"||(n.contentHint=i.optimizationMode,n.contentHint===i.optimizationMode?k.debug("[".concat(t,"] set content hint to"),i.optimizationMode):k.debug("[".concat(t,"] set content hint failed")))):k.warning("[".concat(t,"] can not apply optimization mode bitrate config, no encoderConfig")))}var MV,FV,UV,BV,fs,VV,jV,$V,HV,WV,zV,So;class GV extends Q3{getUserId(){return this._userId}constructor(n,i,a,l){super(n,"track-".concat(n.kind,"-").concat(i,"-").concat(l.clientId,"_").concat(tr(5,""))),be(this,"_userId",void 0),be(this,"_uintId",void 0),be(this,"_isDestroyed",!1),be(this,"store",void 0),be(this,"processor",void 0),be(this,"processorContext",void 0),this._userId=i,this._uintId=a,this.store=l}_updateOriginMediaStreamTrack(n){this._originMediaStreamTrack=n,this._mediaStreamTrack=n,this._updatePlayerSource(),this.processor&&this.processor.updateInput({track:this._originMediaStreamTrack,context:this.processorContext})}_destroy(){this._isDestroyed=!0,k.info("[".concat(this.getTrackId(),"] is destroyed")),this.stop(),super.close()}getProcessorStats(){return this.processorContext.gatherStats()}getProcessorUsage(){return this.processorContext.gatherUsage()}}let vf=(MV=Rt({argsMap:(t,n,i)=>[t.getTrackId(),typeof n=="string"?n:n instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement",i]}),FV=Rt({argsMap:t=>[t.getTrackId()]}),UV=Rt({argsMap:(t,n)=>[t.getTrackId(),n.name]}),BV=Rt({argsMap:t=>[t.getTrackId()]}),dn((fs=class extends GV{get isPlaying(){return!(!this._player||this._player.videoElementStatus!==_o.PLAYING)}get __className__(){return"RemoteVideoTrack"}constructor(t,n,i,a){super(t,n,i,a),be(this,"_videoVisibleTimer",null),be(this,"_previousVideoVisibleStatus",void 0),be(this,"_clearPreviousVideoVisibleStatus",()=>this._previousVideoVisibleStatus=void 0),be(this,"trackMediaType","video"),be(this,"_videoWidth",void 0),be(this,"_videoHeight",void 0),be(this,"_player",void 0),be(this,"processorDestination",void 0),be(this,"processorContext",void 0),this.updateMediaStreamTrackResolution(),this.processorContext=new u5(this.getTrackId(),"remote"),this.processorDestination=new l5(this.processorContext),this.bindProcessorDestinationEvents()}getStats(){return Bu(()=>{k.warning("[deprecated] RemoteVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteVideoStats instead")},"remoteVideoTrackGetStatsWarning"),Ta(this,et.GET_STATS)||Sr({},X3)}play(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof t=="string"){const a=document.getElementById(t);a?t=a:(k.warning("[".concat(this.getTrackId(),'] can not find "#').concat(t,'" element, use document.body')),t=document.body)}k.debug("[".concat(this.getTrackId(),"] start video playback in ").concat(t instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement"),JSON.stringify(n));const i=Sr(Sr({fit:"cover"},n),{},{trackId:this.getTrackId(),element:t});this._player?this._player.updateConfig(i):(t instanceof HTMLVideoElement?this._player=new vI(i):this._player=new nV(i),this._player.updateVideoTrack(this._mediaStreamTrack),this._player.onFirstVideoFrameDecoded=()=>{this.store.subscribe(this.getUserId(),"video",void 0,void 0,Date.now()),this.safeEmit(pf.FIRST_FRAME_DECODED)},this._player.onVideoStateChanged=a=>{this.safeEmit(pf.VIDEO_STATE_CHANGED,a)}),this._player.play(this.store.sessionId||void 0),this._videoVisibleTimer&&window.clearInterval(this._videoVisibleTimer),this._clearPreviousVideoVisibleStatus(),this._videoVisibleTimer=window.setInterval(()=>{try{const a=this.getVideoElementVisibleStatus();this.safeEmit(pf.VIDEO_ELEMENT_VISIBLE_STATUS,a)}catch{}},ee("CHECK_VIDEO_VISIBLE_INTERVAL"))}stop(){this._player&&(this._videoVisibleTimer&&(window.clearInterval(this._videoVisibleTimer),this._videoVisibleTimer=null),this._clearPreviousVideoVisibleStatus(),this._player.destroy(),this._player=void 0,k.debug("[".concat(this.getTrackId(),"] stop video playback")))}getCurrentFrameData(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}updateMediaStreamTrackResolution(){p5(this._originMediaStreamTrack).then(t=>{let[n,i]=t;this._videoHeight=i,this._videoWidth=n}).catch(c_)}_updatePlayerSource(){k.debug("[".concat(this.getTrackId(),"] update player source track")),this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}getVideoElementVisibleStatus(){try{var t,n;const i=this==null||(t=this._player)===null||t===void 0?void 0:t.getContainerElement(),a={track:this,element:this==null||(n=this._player)===null||n===void 0?void 0:n.getVideoElement(),slot:i==null?void 0:i.parentElement},{element:l,slot:u}=a;if(this.isPlaying&&l instanceof HTMLVideoElement&&u instanceof HTMLElement){const h=S4.checkOneElementVisible(l),f=Object.assign({},h);if(f.visible!==this._previousVideoVisibleStatus){this._previousVideoVisibleStatus=f.visible;const g=ht.reportApiInvoke(null,{tag:Nr.TRACER,name:ni.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE,options:[this.getTrackId()]});f.visible?g.onSuccess("Video is visible"):g.onSuccess("Invisible because of ".concat(f.reason))}return f}return}catch(i){throw new Ce(K.GET_VIDEO_ELEMENT_VISIBLE_ERROR,i.message)}}pipe(t){if(this.processor===t)return t;if(t._source)throw new Ce(K.INVALID_OPERATION,"Processor ".concat(t.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=t,this.processor._source=this,t.updateInput({track:this._originMediaStreamTrack,context:this.processorContext}),t}unpipe(){if(!this.processor)return;const t=this.processor;this.processor._source=void 0,this.processor=void 0,t.reset()}bindProcessorDestinationEvents(){this.processorDestination.on(ko.ON_TRACK,async t=>{t?t!==this._mediaStreamTrack&&(this._mediaStreamTrack=t,this._updatePlayerSource()):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource())})}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(ko.ON_TRACK)}_destroy(){super._destroy(),this.unbindProcessorDestinationEvents()}_onSei(t){this.emit(gh.SEI_RECEIVED,t)}}).prototype,"play",[MV],Object.getOwnPropertyDescriptor(fs.prototype,"play"),fs.prototype),dn(fs.prototype,"stop",[FV],Object.getOwnPropertyDescriptor(fs.prototype,"stop"),fs.prototype),dn(fs.prototype,"pipe",[UV],Object.getOwnPropertyDescriptor(fs.prototype,"pipe"),fs.prototype),dn(fs.prototype,"unpipe",[BV],Object.getOwnPropertyDescriptor(fs.prototype,"unpipe"),fs.prototype),fs),Ef=(VV=Rt({argsMap:(t,n)=>[t.getTrackId(),n],throttleTime:300}),jV=Rt({argsMap:(t,n)=>[t.getTrackId(),n]}),$V=Rt({argsMap:t=>[t.getTrackId()]}),HV=Rt({argsMap:t=>[t.getTrackId()]}),WV=Rt({argsMap:(t,n)=>[t.getTrackId(),n.name]}),zV=Rt({argsMap:t=>[t.getTrackId()]}),dn((So=class extends GV{get isPlaying(){return this._useAudioElement?qo.isPlaying(this.getTrackId()):this._source.isPlayed}get __className__(){return"RemoteAudioTrack"}constructor(t,n,i,a){super(t,n,i,a),be(this,"trackMediaType","audio"),be(this,"_source",void 0),be(this,"_useAudioElement",!0),be(this,"_volume",100),be(this,"processorContext",void 0),be(this,"processorDestination",void 0),be(this,"_played",!1),be(this,"_bypassWebAudio",!1),ee("DISABLE_WEBAUDIO")?(this._source=new mI,this._bypassWebAudio=!0,this._useAudioElement=!0):(this._source=new n5(t,!0),ee("REMOTE_AUDIO_TRACK_USES_WEB_AUDIO")&&(this._useAudioElement=!1)),this._source.once(Wa.RECEIVE_TRACK_BUFFER,()=>{this.safeEmit(pf.FIRST_FRAME_DECODED)}),this.processorContext=new h5(this._source.context,this.getTrackId(),"remote"),this.processorDestination=new d5(this.processorContext),this.bindProcessorDestinationEvents(),this._source.on(Wa.UPDATE_SOURCE,()=>{this.processor&&this.processor.updateInput({node:this._source.processSourceNode,context:this.processorContext})})}setAudioFrameCallback(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:4096;if(!t)return this._source.removeAllListeners(Wa.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(n),this._source.removeAllListeners(Wa.ON_AUDIO_BUFFER),this._source.on(Wa.ON_AUDIO_BUFFER,i=>t(i))}setVolume(t){this._volume=t,this._useAudioElement?qo.setVolume(this.getTrackId(),t):this._source.setVolume(t/100)}async setPlaybackDevice(t){if(!this._useAudioElement||!K3())throw new Ce(K.NOT_SUPPORTED,"your browser does not support setting the audio output device");await qo.setSinkID(this.getTrackId(),t)}getVolumeLevel(){return this._source.getAccurateVolumeLevel()}getStats(){return Bu(()=>{k.warning("[deprecated] RemoteAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteAudioStats instead")},"remoteAudioTrackGetStatsWarning"),Ta(this,et.GET_STATS)||Sr({},Y3)}play(){k.debug("[".concat(this.getTrackId(),"] start audio playback")),this._played=!0,this._useAudioElement?(k.debug("[".concat(this.getTrackId(),"] use audio element to play")),qo.play(this._mediaStreamTrack,this.getTrackId(),this._volume,this.store.sessionId||void 0)):this._source.play()}stop(){k.debug("[".concat(this.getTrackId(),"] stop audio playback")),this._played=!1,this._useAudioElement?qo.stop(this.getTrackId()):this._source.stop()}_destroy(){super._destroy(),this._played=!1,this.unbindProcessorDestinationEvents(),this._source.destroy()}_isFreeze(){return this._source.isFreeze}_updatePlayerSource(){let t=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];k.debug("[".concat(this.getTrackId(),"] update player source track")),t&&this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&qo.updateTrack(this.getTrackId(),this._mediaStreamTrack)}pipe(t){if(this._bypassWebAudio)throw new Ce(K.NOT_SUPPORTED,"can not pipe extension when WebAudio disabled");if(this.processor===t)return t;if(t._source)throw new Ce(K.INVALID_OPERATION,"Processor ".concat(t.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=t,this.processor._source=this,t.updateInput({track:this._originMediaStreamTrack,node:this._source.processSourceNode,context:this.processorContext}),t}unpipe(){var t;if(this._bypassWebAudio)throw new Ce(K.NOT_SUPPORTED,"can not unpipe extension when WebAudio disabled");if(!this.processor)return;const n=this.processor;(t=this._source.processSourceNode)===null||t===void 0||t.disconnect(),this.processor._source=!1,this.processor=void 0,n.reset()}bindProcessorDestinationEvents(){this.processorDestination.on(ko.ON_TRACK,async t=>{t?t!==this._mediaStreamTrack&&(this._mediaStreamTrack=t,this._updatePlayerSource(!1),this._source.processedNode=this._source.createMediaStreamSourceNode(t)):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource())}),this.processorDestination.on(ko.ON_NODE,t=>{this._source.processedNode=t;const n=!t;this._useAudioElement!==n&&(this._played?(this.stop(),this._useAudioElement=n,this.play()):this._useAudioElement=n)})}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(ko.ON_TRACK),this.processorDestination.removeAllListeners(ko.ON_NODE)}}).prototype,"setVolume",[VV],Object.getOwnPropertyDescriptor(So.prototype,"setVolume"),So.prototype),dn(So.prototype,"setPlaybackDevice",[jV],Object.getOwnPropertyDescriptor(So.prototype,"setPlaybackDevice"),So.prototype),dn(So.prototype,"play",[$V],Object.getOwnPropertyDescriptor(So.prototype,"play"),So.prototype),dn(So.prototype,"stop",[HV],Object.getOwnPropertyDescriptor(So.prototype,"stop"),So.prototype),dn(So.prototype,"pipe",[WV],Object.getOwnPropertyDescriptor(So.prototype,"pipe"),So.prototype),dn(So.prototype,"unpipe",[zV],Object.getOwnPropertyDescriptor(So.prototype,"unpipe"),So.prototype),So);const Ql=new class extends _r{get visibility(){return document.visibilityState}get lastHiddenTime(){return this._lastHiddenTime}get lastVisibleTime(){return this._lastVisibleTime}constructor(){super(),be(this,"_lastHiddenTime",0),be(this,"_lastVisibleTime",0),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"?this._lastHiddenTime=performance.now():this._lastVisibleTime=performance.now(),k.debug("document visibility went ".concat(document.visibilityState)),this.emit("VISIBILITY_CHANGE",document.visibilityState)})}};var KV=function(t){return t[t.ONE_BYTE=0]="ONE_BYTE",t[t.TWO_BYTE=1]="TWO_BYTE",t}(KV||{});class Whe{constructor(){be(this,"_sequence",0),be(this,"_startTime",Date.now()),be(this,"isUseOneByte",!0)}get startTime(){const n=Date.now()-this._startTime;return n<Math.pow(2,16)?n:(this._startTime+=Math.pow(2,16),this.startTime)}get sequence(){return this._sequence<Math.pow(2,32)?this._sequence++:(this._sequence-=Math.pow(2,32),this.sequence)}serialize(n){const i={commonPacketHeader:{length:0,reserved:0,extension:0,sequence:this.sequence},commonStreamHeader:this.startTime,extension:void 0,payload:n};if(n.byteLength>128){const f=new Uint8Array(4);f.set([1,0,0,0]);const g={id:0,length:4,data:f.buffer},_={profile:this.isUseOneByte?0:1,length:this.isUseOneByte?5:6,datas:[g]};i.commonPacketHeader.extension=1,i.extension=_,i.payload=this.compress(n),i.commonPacketHeader.length=8+(i.extension.length+2)+i.payload.byteLength}else i.commonPacketHeader.length=8+i.payload.byteLength;ee("SHOW_DATASTREAM2_LOG")&&k.debug("send data header: ".concat(JSON.stringify(i.commonPacketHeader)));const a=new ArrayBuffer(i.commonPacketHeader.length),l=new Uint8Array(a),u=new DataView(a);let h=0;if(u.setUint16(h,i.commonPacketHeader.extension<<15|i.commonPacketHeader.reserved<<14|i.commonPacketHeader.length,!0),h+=2,u.setUint32(h,i.commonPacketHeader.sequence,!0),h+=4,u.setUint16(h,i.commonStreamHeader,!0),h+=2,i.extension){const f=this.serializeExtension(i.extension);l.set(new Uint8Array(f),h),h+=f.byteLength}if(l.set(new Uint8Array(i.payload),h),h+=i.payload.byteLength,h!==i.commonPacketHeader.length)throw Error("serialize error!");return a}deserialize(n){if(n.byteLength<4)return new ArrayBuffer(0);const i=new DataView(n);let a=0;const l=i.getUint16(a,!0);a+=2;const u={length:16383&l,reserved:(16384&l)>>14,extension:(32768&l)>>15,sequence:i.getUint16(a+2,!0)<<16|i.getUint16(a,!0)};let h,f;if(a+=4,ee("SHOW_DATASTREAM2_LOG")&&k.debug("receive data header: ".concat(JSON.stringify(u))),i.getUint16(a,!0),a+=2,u.extension){f=this.deserializeExtension(n.slice(a)),a+=2+f.length,h=n.slice(a);let g=!1;if(f.datas.length>0){const _=f.datas.find(y=>y.id===0);_&&(g=(1&new DataView(_.data).getUint32(0,!0))==1)}h=g?this.decompress(h):h}else h=n.slice(8);return h}serializeExtension(n){const{profile:i,length:a,datas:l}=n,u=new ArrayBuffer(a+2),h=new Uint8Array(u),f=new DataView(u);let g=0;if(f.setUint8(g++,i),f.setUint8(g++,a),l.forEach(_=>{i?(f.setUint8(g++,_.id),f.setUint8(g++,_.length),h.set(new Uint8Array(_.data),g),g+=_.data.byteLength):(f.setUint8(g++,_.id|_.length<<4),h.set(new Uint8Array(_.data),g),g+=_.data.byteLength)}),g!==a+2)throw Error("serialize extension error, is ".concat(g,"!==").concat(a+2));return u}deserializeExtension(n){const i=new DataView(n);let a=0;const l=i.getUint8(a);a++;const u=i.getUint8(a);a++;const h=l===KV.TWO_BYTE,f=[],g=new DataView(n,2);let _=0;for(;_<u;){let y=0,T=0,A=new ArrayBuffer(0);h?(y=g.getUint8(_),_++,T=g.getUint8(_),_++):(y=15&g.getUint8(_),T=g.getUint8(_)>>4,_++),T>0&&(A=g.buffer.slice(_+2,_+2+T),_+=A.byteLength),f.push({id:y,length:T,data:A})}if(_!==u)throw Error("parse error");return{profile:l,length:u,datas:f}}decompress(n){return Ohe(new Uint8Array(n))}compress(n){return Ahe(new Uint8Array(n))}}class qV extends _r{constructor(n,i){super(),be(this,"_version",1),be(this,"_type",3),be(this,"_config",void 0),be(this,"_originDataChannel",void 0),be(this,"_dataStreamPacketHeader",new ArrayBuffer(4)),be(this,"_dataStreamPacketHandler",void 0),be(this,"_datachannelEventMap",new Map),this._config=n,i&&(this._originDataChannel=i,this._bandDataChannelEvents(i)),this._initPacketHeader(),this._dataStreamPacketHandler=new Whe}get id(){return this._config.id}get ordered(){return this._config.ordered}get maxRetransmits(){return ee("DATASTREAM_MAX_RETRANSMITS")}get metadata(){return this._config.metadata}get readyState(){var n,i;return(n=(i=this._originDataChannel)===null||i===void 0?void 0:i.readyState)!==null&&n!==void 0?n:"connecting"}get _originDataChannelId(){var n,i;return(n=(i=this._originDataChannel)===null||i===void 0?void 0:i.id)!==null&&n!==void 0?n:null}getChannelId(){return this.id}getConfig(){return this._config}_close(){this._originDataChannel&&(this._unbindDataChannelEvents(this._originDataChannel),this._originDataChannel=void 0)}async _waitTillOpen(){return new We((n,i)=>{if(this._originDataChannel){this._originDataChannel.readyState==="open"&&n();const a=setTimeout(()=>{var l;i(new Ce(K.DATACHANNEL_CONNECTION_TIMEOUT,"Cannot create datachannel, id: ".concat((l=this._originDataChannel)===null||l===void 0?void 0:l.id)))},1e4);this._originDataChannel.onopen=()=>{clearTimeout(a),this._originDataChannel&&this._bandDataChannelEvents(this._originDataChannel),n()},this._originDataChannel.onerror=()=>{throw clearTimeout(a),new Ce(K.DATACHANNEL_CONNECTION_TIMEOUT)}}else i(new Ce(K.DATACHANNEL_CONNECTION_TIMEOUT,"cannot find dataChannel"))})}_updateOriginDataChannel(n){this._originDataChannel=n,this._bandDataChannelEvents(n)}_initPacketHeader(){const n=new DataView(this._dataStreamPacketHeader);n.setUint16(0,this._version),n.setUint8(2,this._type),n.setUint8(3,this._config.id)}_bandDataChannelEvents(n){this._unbindDataChannelEvents(n),[q_.OPEN,q_.CLOSE,q_.ERROR].forEach(i=>{const a=()=>{this.emit(i)};this._datachannelEventMap.set(i,a),n.addEventListener(i,a)})}_unbindDataChannelEvents(n){Array.from(this._datachannelEventMap.entries()).forEach(i=>{let[a,l]=i;n.removeEventListener(a,l)}),this._datachannelEventMap.clear()}}class zhe extends qV{constructor(n){super(n),be(this,"_messageListener",void 0),this._messageListener=i=>{if(i.data.byteLength<this._dataStreamPacketHeader.byteLength)throw Error("invalid byteLength: the byte length must exceed "+this._dataStreamPacketHeader.byteLength);const a=i.data.slice(0,this._dataStreamPacketHeader.byteLength),l=new DataView(a).getUint8(3);if(l!==this.id)return void(ee("SHOW_DATASTREAM2_LOG")&&k.debug("invalid datachannel id: ".concat(l," !== ").concat(this.id)));let u=i.data.slice(this._dataStreamPacketHeader.byteLength);u=this._dataStreamPacketHandler.deserialize(u),this.emit(q_.MESSAGE,u)}}_updateOriginDataChannel(n){super._updateOriginDataChannel(n),this._bandRemoteDataChannelEvents()}_close(){this._originDataChannel&&(this._originDataChannel.removeEventListener("message",this._messageListener),super._close())}_bandRemoteDataChannelEvents(){this._originDataChannel&&this._originDataChannel.addEventListener("message",this._messageListener)}}class YV extends qV{send(n){if(this._originDataChannel){let i=n;i=this._dataStreamPacketHandler.serialize(n);const a=new Uint8Array(this._dataStreamPacketHeader.byteLength+i.byteLength);a.set(new Uint8Array(this._dataStreamPacketHeader),0),a.set(new Uint8Array(i),this._dataStreamPacketHeader.byteLength),this._originDataChannel.send(a.buffer)}}}function Q_(){const t=new Blob([atob("ZnVuY3Rpb24gZShlKXtjb25zdCB0PW5ldyBEYXRhVmlldyhlLmRhdGEpO2lmKDA9PT10LmdldFVpbnQ4KDApJiYwPT09dC5nZXRVaW50OCgxKSYmMD09PXQuZ2V0VWludDgoMikmJjE9PT10LmdldFVpbnQ4KDMpJiY2PT09dC5nZXRVaW50OCg0KSl7bGV0IG49NixyPTAsbz0wO2Zvcig7MjU1PT09KG89dC5nZXRVaW50OChuKyspKTspcis9MjU1O3IrPW87Y29uc3QgYT1mdW5jdGlvbihlLHQsbil7bGV0IHI9bmV3IFVpbnQ4QXJyYXkoZSx0LG4pLG89W10sYT0wO2Zvcig7YTxuOylhKzM8biYmMD09PXJbYV0mJjA9PT1yW2ErMV0mJjM9PT1yW2ErMl0mJigwPT09clthKzNdfHwxPT09clthKzNdfHwyPT09clthKzNdfHwzPT09clthKzNdKT8oby5wdXNoKHJbYV0sclthKzFdLHJbYSszXSksYSs9NCk6KG8ucHVzaChyW2FdKSxhKyspO3JldHVybiBuZXcgVWludDhBcnJheShvKX0oZS5kYXRhLG4scik7cmV0dXJuIG5ldyBVaW50OEFycmF5KGEpfXJldHVybiBudWxsfWZ1bmN0aW9uIHQoZSx0KXtjb25zdCBuPWZ1bmN0aW9uKGUpe2NvbnN0IHQ9ZS5sZW5ndGg7bGV0IG49W10scj0wO2Zvcig7cjx0OylyKzI8dCYmMD09PWVbcl0mJjA9PT1lW3IrMV0mJigwPT09ZVtyKzJdfHwxPT09ZVtyKzJdfHwyPT09ZVtyKzJdfHwzPT09ZVtyKzJdKT8obi5wdXNoKGVbcl0sZVtyKzFdLDMsZVtyKzJdKSxyKz0zKToobi5wdXNoKGVbcl0pLHIrKyk7cmV0dXJuIG5ldyBVaW50OEFycmF5KG4pfSh0KSxyPW4ubGVuZ3RoLG89TWF0aC5mbG9vcihyLzI1NSksYT1yJTI1NSxzPW5ldyBVaW50OEFycmF5KDYrbysxK3IrZS5ieXRlTGVuZ3RoKTtzWzBdPTAsc1sxXT0wLHNbMl09MCxzWzNdPTEsc1s0XT02LHNbNV09MTAxO2xldCBpPTA7Zm9yKDtpPG87KXNbNitpXT0yNTUsaSsrO3JldHVybiBzWzYraV09YSxpKysscy5zZXQobiw2K2kpLHMuc2V0KG5ldyBVaW50OEFycmF5KGUpLDYraStyKSxzLmJ1ZmZlcn1uYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoIlNhZmFyaSIpPi0xJiYtMT09PW5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigiQ2hyb21lIikmJihzZWxmLm9ucnRjdHJhbnNmb3JtPW49Pntjb25zdCByPW4udHJhbnNmb3JtZXI7bGV0IG89W107ci5vcHRpb25zLnBvcnQub25tZXNzYWdlPWU9PntlLmRhdGEuc2VpJiZvLnB1c2goZS5kYXRhLnNlaSl9LHNlbGYucG9zdE1lc3NhZ2UoInN0YXJ0ZWQiKTtjb25zdCBhPXIucmVhZGFibGUuZ2V0UmVhZGVyKCkscz1yLndyaXRhYmxlLmdldFdyaXRlcigpOyJyeCI9PT1yLm9wdGlvbnMubmFtZT9mdW5jdGlvbiB0KG4pe2EucmVhZCgpLnRoZW4oKHI9PntpZighci5kb25lKXtpZihyLnZhbHVlIGluc3RhbmNlb2YgUlRDRW5jb2RlZFZpZGVvRnJhbWUpe2NvbnN0IHQ9ZShyLnZhbHVlKTt0JiZuLm9wdGlvbnMucG9ydC5wb3N0TWVzc2FnZSh7c2VpOnR9KX1zLndyaXRlKHIudmFsdWUpLG4ub3B0aW9ucy5wb3J0LnBvc3RNZXNzYWdlKHt0cmFuc2Zvcm1lZDohMH0pLHQobil9fSkpfShyKToidHgiPT09ci5vcHRpb25zLm5hbWUmJmZ1bmN0aW9uIGUobil7YS5yZWFkKCkudGhlbigocj0+e2lmKCFyLmRvbmUpe2lmKHIudmFsdWUgaW5zdGFuY2VvZiBSVENFbmNvZGVkVmlkZW9GcmFtZSl7Y29uc3QgZT1vLnNoaWZ0KCk7ZSYmKHIudmFsdWUuZGF0YT10KHIudmFsdWUuZGF0YSxlKSl9cy53cml0ZShyLnZhbHVlKSxuLm9wdGlvbnMucG9ydC5wb3N0TWVzc2FnZSh7dHJhbnNmb3JtZWQ6ITB9KSxlKG4pfX0pKX0ocil9LHNlbGYucG9zdE1lc3NhZ2UoInJlZ2lzdGVyZWQiKSk7Cg==")],{type:"text/javascript"});return setTimeout(()=>o3.revokeObjectURL(t),0),new Worker(o3.createObjectURL(t))}const Z_=new Map,eS=new Map,tS=new Map;async function Ghe(t,n){if(!un().supportWebRTCEncodedTransform)return void k.warning("browser not support video encoded transform");if(tS.has(t)||!t.track)return;const i={track:t.track};if(Fu()){if(!t.createEncodedStreams)return void k.warning("browser not support createEncodedStreams() API");let l=null;try{l=t.createEncodedStreams()}catch(f){return void k.error("create video-encoded-streams error",f&&f.message)}let u=[];n.on("sei-to-send",f=>{u.push(f)});const h=new TransformStream({transform(f,g){i.controller||(i.controller=g),t.track&&t.track.id!==i.track.id&&(k.debug("video track changed: ".concat(i.track.id," => ").concat(t.track.id)),i.track.removeEventListener("ended",a),i.track=t.track,i.track.addEventListener("ended",a));const _=u.shift();_&&(f.data=function(y,T){const A=function(X){const ue=X.length;let pe=[],Ee=0;for(;Ee<ue;)Ee+2<ue&&X[Ee]===0&&X[Ee+1]===0&&(X[Ee+2]===0||X[Ee+2]===1||X[Ee+2]===2||X[Ee+2]===3)?(pe.push(X[Ee],X[Ee+1],3,X[Ee+2]),Ee+=3):(pe.push(X[Ee]),Ee++);return new Uint8Array(pe)}(T),D=A.length,W=Math.floor(D/255),F=D%255,U=new Uint8Array(6+W+1+D+y.byteLength);U[0]=0,U[1]=0,U[2]=0,U[3]=1,U[4]=6,U[5]=101;let z=0;for(;z<W;)U[6+z]=255,z++;return U[6+z]=F,z++,U.set(A,6+z),U.set(new Uint8Array(y),6+z+D),U.buffer}(f.data,_)),g.enqueue(f)}});l.readable.pipeThrough(h).pipeTo(l.writable)}else{if(!Si())return;{if(typeof RTCRtpScriptTransform>"u")return void k.warning("browser not support RTCRtpScriptTransform");const l=Q_(),u=new MessageChannel;await new We(f=>l.onmessage=g=>{g.data==="registered"&&f(void 0)});const h=new RTCRtpScriptTransform(l,{name:"tx",port:u.port2},[u.port2]);t.transform=h,await new We(f=>l.onmessage=g=>{g.data==="started"&&f(void 0)}),n.on("sei-to-send",f=>{u.port1.postMessage({sei:f})}),u.port1.onmessage=f=>{var g;f.data.transformed&&t.track&&((g=t.track)===null||g===void 0?void 0:g.id)!==i.track.id&&(k.debug("video track changed: ".concat(i.track.id," => ").concat(t.track.id)),i.track.removeEventListener("ended",a),i.track=t.track,i.track.addEventListener("ended",a))},i.worker=l}}function a(){if(t.track){if(this.id!==t.track.id)return;t.track.removeEventListener("ended",a)}const l=tS.get(t);if(l){tS.delete(t);try{var u,h;(u=l.controller)===null||u===void 0||u.terminate(),(h=l.worker)===null||h===void 0||h.terminate()}catch(f){k.warning(f&&f.message)}}}tS.set(t,i),t.track.addEventListener("ended",a)}const Q0=new Map;async function Khe(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!un().supportWebRTCEncodedTransform)return void k.warning("browser not support video encoded transform");if(!t.track)return;if(Q0.has(t)){const l=Q0.get(t);return void(l&&(l.onSei=n.onSei))}const i={track:t.track,onSei:n.onSei};if(Fu()){if(!t.createEncodedStreams)return void k.warning("browser not support createEncodedStreams() API");let l=null;try{l=t.createEncodedStreams()}catch(h){return void k.error("create video-encoded-streams error",h&&h.message)}const u=new TransformStream({transform(h,f){i.controller||(i.controller=f),t.track&&t.track.id!==i.track.id&&(k.debug("video track changed: ".concat(i.track.id," => ").concat(t.track.id)),i.track.removeEventListener("ended",a),i.track=t.track,i.track.addEventListener("ended",a));const g=function(_){const y=new DataView(_.data);if(y.getUint8(0)===0&&y.getUint8(1)===0&&y.getUint8(2)===0&&y.getUint8(3)===1&&y.getUint8(4)===6){let T=6,A=0,D=0;for(;(D=y.getUint8(T++))===255;)A+=255;A+=D;const W=function(F,U,z){let X=new Uint8Array(F,U,z),ue=[],pe=0;for(;pe<z;)pe+3<z&&X[pe]===0&&X[pe+1]===0&&X[pe+2]===3&&(X[pe+3]===0||X[pe+3]===1||X[pe+3]===2||X[pe+3]===3)?(ue.push(X[pe],X[pe+1],X[pe+3]),pe+=4):(ue.push(X[pe]),pe++);return new Uint8Array(ue)}(_.data,T,A);return new Uint8Array(W)}return null}(h);g&&i.onSei&&i.onSei(g),f.enqueue(h)}});l.readable.pipeThrough(u).pipeTo(l.writable)}else if(Si()){if(typeof RTCRtpScriptTransform>"u")return void k.warning("browser not support RTCRtpScriptTransform");const l=Q_(),u=new MessageChannel;await new We(f=>l.onmessage=g=>{g.data==="registered"&&f(void 0)});const h=new RTCRtpScriptTransform(l,{name:"rx",port:u.port2},[u.port2]);t.transform=h,await new We(f=>l.onmessage=g=>{g.data==="started"&&f(void 0)}),u.port1.onmessage=f=>{var g;f.data.transformed&&t.track&&((g=t.track)===null||g===void 0?void 0:g.id)!==i.track.id?(k.debug("video track changed: ".concat(i.track.id," => ").concat(t.track.id)),i.track.removeEventListener("ended",a),i.track=t.track,i.track.addEventListener("ended",a)):f.data.sei&&i.onSei&&i.onSei(f.data.sei)},i.worker=l}function a(){if(t.track){if(this.id!==t.track.id)return;t.track.removeEventListener("ended",a)}(function(l){const u=Q0.get(l);if(u){Q0.delete(l);try{var h,f;(h=u.controller)===null||h===void 0||h.terminate(),(f=u.worker)===null||f===void 0||f.terminate()}catch(g){k.warning(g&&g.message)}}})(t)}Q0.set(t,i),t.track.addEventListener("ended",a)}(function(){const t=_n();Ki.getDisplayMedia=!(!navigator.mediaDevices||!navigator.mediaDevices.getDisplayMedia),Ki.getStreamFromExtension=t.name===Bn.CHROME&&Number(t.version)>34,Ki.supportUnifiedPlan=function(){if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;const n=new RTCPeerConnection;let i=!1;try{n.addTransceiver("audio"),i=!0}catch{}return n.close(),i}(),Ki.supportMinBitrate=t.name===Bn.CHROME||t.name===Bn.EDGE,Ki.supportSetRtpSenderParameters=function(){const n=_n();return!!(window.RTCRtpSender&&window.RTCRtpSender.prototype.setParameters&&window.RTCRtpSender.prototype.getParameters)&&(!!Uu()||!(!Si()&&!i_())||n.name===Bn.FIREFOX&&Number(n.version)>=64)}(),t.name===Bn.SAFARI&&(Number(t.version)>=14?Ki.supportDualStream=!0:Ki.supportDualStream=!1),Ki.webAudioMediaStreamDest=function(){const n=_n();return!(n.name===Bn.SAFARI&&Number(n.version)<12)}(),Ki.supportReplaceTrack=!!window.RTCRtpSender&&typeof RTCRtpSender.prototype.replaceTrack=="function",Ki.supportWebGL=typeof WebGLRenderingContext<"u",Ki.supportRequestFrame=!!window.CanvasCaptureMediaStreamTrack,Uu()||(Ki.webAudioWithAEC=!0),Ki.supportShareAudio=function(){const n=_n();return(n.os===_i.WIN_10||n.os===_i.WIN_81||n.os===_i.WIN_7||n.os===_i.LINUX||n.os===_i.MAC_OS||n.os===_i.CHROMIUM_OS)&&n.name===Bn.CHROME&&Number(n.version)>=74}(),Ki.supportDataChannel=!!(Lw(76)||function(n){const i=_n();return!(i.name!==Bn.FIREFOX||!i.osVersion)&&Number(i.version)>=n}(68)||s4(14)),Ki.supportPCSetConfiguration=function(){const n=window.RTCPeerConnection;return!Zn()&&!!n&&n.prototype.setConfiguration instanceof Function}(),Ki.supportWebRTCEncodedTransform=function(){const n=_n();return n.name==="Chrome"&&Number(n.version)>=86||n.name==="Safari"&&Number(n.version)>=15}(),Ki.supportWebRTCInsertableStream=function(){const n=_n();return(n.name===Bn.CHROME||n.name===Bn.EDGE)&&Number(n.version)>=94&&"MediaStreamTrackGenerator"in window&&"MediaStreamTrackProcessor"in window}(),Ki.supportRequestVideoFrameCallback="requestVideoFrameCallback"in HTMLVideoElement.prototype,Ki.supportWebCrypto=typeof window<"u"&&window.crypto!==void 0&&window.crypto.subtle!==void 0,s_(()=>{Ki.supportDualStreamEncoding=function(){const n=_n();return!!ee("DISABLE_WEBAUDIO")||n.name==="Safari"&&Number(n.version)>=14||!!(n.name==="Chrome"&&/Windows/i.test(n.os||"")&&Number(n.version)>=100&&ee("CHROME_DUAL_STREAM_USE_ENCODING"))}(),k.info("browser compatibility",JSON.stringify(Ki),JSON.stringify(t))})})();class qhe extends _r{constructor(){super(...arguments),V(this,"resultStorage",new Map)}setLocalAudioStats(n,i,a){this.record("AUDIO_INPUT_LEVEL_TOO_LOW",n,this.checkAudioInputLevel(a,i)),this.record("SEND_AUDIO_BITRATE_TOO_LOW",n,this.checkSendAudioBitrate(a,i))}setLocalVideoStats(n,i,a){this.record("SEND_VIDEO_BITRATE_TOO_LOW",n,this.checkSendVideoBitrate(a,i)),this.record("FRAMERATE_INPUT_TOO_LOW",n,this.checkFramerateInput(a,i)),this.record("FRAMERATE_SENT_TOO_LOW",n,this.checkFramerateSent(a))}setRemoteAudioStats(n,i){const a=n.getUserId();this.record("AUDIO_OUTPUT_LEVEL_TOO_LOW",a,this.checkAudioOutputLevel(i))}setRemoteVideoStats(n,i){const a=n.getUserId();this.record("RECV_VIDEO_DECODE_FAILED",a,this.checkVideoDecode(i))}record(n,i,a){if(ee("STATS_UPDATE_INTERVAL")>500)return;this.resultStorage.has(n)||this.resultStorage.set(n,{result:[],isPrevNormal:!0});const l=this.resultStorage.get(n);if(l&&(l.result.push(a),l.result.length>=5)){var u;const h=Ye(u=l.result).call(u,!0);l.isPrevNormal&&!h&&this.emit("exception",XV[n],n,i),!l.isPrevNormal&&h&&this.emit("exception",XV[n]+2e3,n+"_RECOVER",i),l.isPrevNormal=h,l.result=[]}}checkAudioOutputLevel(n){return!(n.receiveBitrate>0&&n.receiveLevel===0)}checkAudioInputLevel(n,i){return i instanceof hi&&!i.isActive||!!i.muted||n.sendVolumeLevel!==0}checkFramerateInput(n,i){let a=null;i._encoderConfig&&i._encoderConfig.frameRate&&(a=ia(i._encoderConfig.frameRate));const l=n.captureFrameRate;return!a||!l||!(a>10&&l<5||a<10&&a>=5&&l<=1)}checkFramerateSent(n){return!(n.captureFrameRate&&n.sendFrameRate&&n.captureFrameRate>5&&n.sendFrameRate<=1)}checkSendVideoBitrate(n,i){return!!i.muted||n.sendBitrate!==0}checkSendAudioBitrate(n,i){return i instanceof hi&&!i.isActive||!!i.muted||n.sendBitrate!==0}checkVideoDecode(n){return n.receiveBitrate===0||n.decodeFrameRate!==0}}const XV={FRAMERATE_INPUT_TOO_LOW:1001,FRAMERATE_SENT_TOO_LOW:1002,SEND_VIDEO_BITRATE_TOO_LOW:1003,RECV_VIDEO_DECODE_FAILED:1005,AUDIO_INPUT_LEVEL_TOO_LOW:2001,AUDIO_OUTPUT_LEVEL_TOO_LOW:2002,SEND_AUDIO_BITRATE_TOO_LOW:2003},Zi=new class{markSubscribeStart(t,n){performance.mark("agora-web-sdk/".concat(t,"/subscribe-").concat(n))}markPublishStart(t,n){performance.mark("agora-web-sdk/".concat(t,"/publish-").concat(n))}measureFromSubscribeStart(t,n){const i=performance.getEntriesByName("agora-web-sdk/".concat(t,"/subscribe-").concat(n));if(i.length>0){const a=i[i.length-1];return Math.round(performance.now()-a.startTime)}return 0}measureFromPublishStart(t,n){const i=performance.getEntriesByName("agora-web-sdk/".concat(t,"/publish-").concat(n));if(i.length>0){const a=i[i.length-1];return Math.round(performance.now()-a.startTime)}return 0}};function SI(t,n){this.v=t,this.k=n}function Xt(t){return new SI(t,0)}var Yhe=Mk,Xhe=il;ir({target:"Promise",stat:!0,forced:!0},{withResolvers:function(){var t=Xhe.f(this);return{promise:t.promise,resolve:t.resolve,reject:t.reject}}});var Jhe=il,Qhe=Tp;ir({target:"Promise",stat:!0,forced:!0},{try:function(t){var n=Jhe.f(this),i=Qhe(t);return(i.error?n.reject:n.resolve)(i.value),n.promise}});var yI=c(Yhe),JV=Op.f("asyncIterator"),Zhe=c(JV);function Z0(t){var n,i;function a(u,h){try{var f=t[u](h),g=f.value,_=g instanceof SI;yI.resolve(_?g.v:g).then(function(y){if(_){var T=u==="return"?"return":"next";if(!g.k||y.done)return a(T,y);y=t[T](y).value}l(f.done?"return":"normal",y)},function(y){a("throw",y)})}catch(y){l("throw",y)}}function l(u,h){switch(u){case"return":n.resolve({value:h,done:!0});break;case"throw":n.reject(h);break;default:n.resolve({value:h,done:!1})}(n=n.next)?a(n.key,n.arg):i=null}this._invoke=function(u,h){return new yI(function(f,g){var _={key:u,arg:h,resolve:f,reject:g,next:null};i?i=i.next=_:(n=i=_,a(u,h))})},typeof t.return!="function"&&(this.return=void 0)}function wa(t){return function(){return new Z0(t.apply(this,arguments))}}Z0.prototype[typeof Dp=="function"&&Zhe||"@@asyncIterator"]=function(){return this},Z0.prototype.next=function(t){return this._invoke("next",t)},Z0.prototype.throw=function(t){return this._invoke("throw",t)},Z0.prototype.return=function(t){return this._invoke("return",t)};var QV=c(ct.Object.getOwnPropertySymbols),epe=ir,tpe=ST.indexOf,npe=nE,CI=q([].indexOf),ZV=!!CI&&1/CI([1],1,-0)<0;epe({target:"Array",proto:!0,forced:ZV||!npe("indexOf")},{indexOf:function(t){var n=arguments.length>1?arguments[1]:void 0;return ZV?CI(this,t,n)||0:tpe(this,t,n)}});var rpe=ks("Array").indexOf,ipe=R,ope=rpe,bI=Array.prototype,ape=function(t){var n=t.indexOf;return t===bI||ipe(bI,t)&&n===bI.indexOf?ope:n},e6=c(ape);function spe(t,n){if(t==null)return{};var i,a,l=function(h,f){if(h==null)return{};var g,_,y={},T=z4(h);for(_=0;_<T.length;_++)g=T[_],e6(f).call(f,g)>=0||(y[g]=h[g]);return y}(t,n);if(QV){var u=QV(t);for(a=0;a<u.length;a++)i=u[a],e6(n).call(n,i)>=0||Object.prototype.propertyIsEnumerable.call(t,i)&&(l[i]=t[i])}return l}var t6={exports:{}};(function(t,n){t.exports=(()=>{var i={8:(u,h,f)=>{f.r(h),f.d(h,{Parser:()=>ln,Printer:()=>nc,parse:()=>Ft,print:()=>Pn});const g=`
`,_="".concat("\r").concat(g),y=" ";let T;function A(Ge){return Ge>="0"&&Ge<="9"}function D(Ge){return Ge>="!"&&Ge<="~"}function W(Ge){return D(Ge)||Ge>=""&&Ge<="ÿ"}function F(Ge){return Ge==="!"||Ge>="#"&&Ge<="'"||Ge>="*"&&Ge<="+"||Ge>="-"&&Ge<="."||Ge>="0"&&Ge<="9"||Ge>="A"&&Ge<="Z"||Ge>="^"&&Ge<="~"}function U(Ge){return Ge>="1"&&Ge<="9"}function z(Ge){return Ge>="A"&&Ge<="Z"||Ge>="a"&&Ge<="z"}function X(Ge){return Ge==="d"||Ge==="h"||Ge==="m"||Ge==="s"}function ue(Ge){return Ge>""&&Ge<"	"||Ge>"\v"&&Ge<"\f"||Ge>""&&Ge<"ÿ"}function pe(Ge){return z(Ge)||A(Ge)||Ge==="+"||Ge==="/"}function Ee(Ge){return A(Ge)||z(Ge)||Ge==="+"||Ge==="/"||Ge==="-"||Ge==="_"}function Se(Ge){return z(Ge)||A(Ge)||Ge==="+"||Ge==="/"}function Re(Ge,B){var ne=Object.keys(Ge);if(Object.getOwnPropertySymbols){var ce=Object.getOwnPropertySymbols(Ge);B&&(ce=ce.filter(function(Fe){return Object.getOwnPropertyDescriptor(Ge,Fe).enumerable})),ne.push.apply(ne,ce)}return ne}function Ae(Ge){for(var B=1;B<arguments.length;B++){var ne=arguments[B]!=null?arguments[B]:{};B%2?Re(Object(ne),!0).forEach(function(ce){Pe(Ge,ce,ne[ce])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Ge,Object.getOwnPropertyDescriptors(ne)):Re(Object(ne)).forEach(function(ce){Object.defineProperty(Ge,ce,Object.getOwnPropertyDescriptor(ne,ce))})}return Ge}function Pe(Ge,B,ne){return B in Ge?Object.defineProperty(Ge,B,{value:ne,enumerable:!0,configurable:!0,writable:!0}):Ge[B]=ne,Ge}(function(Ge){Ge.VERSION="v",Ge.ORIGIN="o",Ge.SESSION_NAME="s",Ge.INFORMATION="i",Ge.URI="u",Ge.EMAIL="e",Ge.PHONE="p",Ge.CONNECTION="c",Ge.BANDWIDTH="b",Ge.TIME="t",Ge.REPEAT="r",Ge.ZONE_ADJUSTMENTS="z",Ge.KEY="k",Ge.ATTRIBUTE="a",Ge.MEDIA="m"})(T||(T={}));class tt{consumeText(B,ne){let ce=ne;for(;ce<B.length;){const Fe=B[ce];if(Fe==="\0"||Fe==="\r"||Fe===g)break;ce+=1}if(ce-ne==0)throw new Error("Invalid text, at ".concat(B));return ce}consumeUnicastAddress(B,ne,ce){return this.consumeTill(B,ne,y)}consumeOneOrMore(B,ne,ce){let Fe=ne;for(;ce(B[Fe]);)Fe++;if(Fe-ne==0)throw new Error("Invalid rule at ".concat(ne,"."));return Fe}consumeSpace(B,ne){if(B[ne]===y)return ne+1;throw new Error("Invalid space at ".concat(ne,"."))}consumeIP4Address(B,ne){let ce=ne;for(let Fe=0;Fe<4;Fe++)if(ce=this.consumeDecimalUChar(B,ce),Fe!==3){if(B[ce]!==".")throw new Error("Invalid IP4 address.");ce++}return ce}consumeDecimalUChar(B,ne){let ce=ne;for(let Ut=0;Ut<3&&A(B[ce]);Ut++,ce++);if(ce-ne==0)throw new Error("Invalid decimal uchar.");const Fe=parseInt(B.slice(ne,ce));if(Fe>=0&&Fe<=255)return ce;throw new Error("Invalid decimal uchar")}consumeIP6Address(B,ne){let ce=this.consumeHexpart(B,ne);return B[ce]===":"&&(ce+=1,ce=this.consumeIP4Address(B,ce)),ce}consumeHexpart(B,ne){let ce=ne;if(B[ce]===":"&&B[ce+1]===":"){ce+=2;try{ce=this.consumeHexseq(B,ce)}catch{}return ce}if(ce=this.consumeHexseq(B,ce),B[ce]===":"&&B[ce+1]===":"){ce+=2;try{ce=this.consumeHexseq(B,ce)}catch{}return ce}return ce}consumeHexseq(B,ne){let ce=ne;for(;ce=this.consumeHex4(B,ce),B[ce]===":"&&B[ce+1]!==":";)ce+=1;return ce}consumeHex4(B,ne){let ce=0;for(;ce<4;ce++)if(!((Fe=B[ne+ce])>="0"&&Fe<="9"||Fe>="a"&&Fe<="f"||Fe>="A"&&Fe<="F")){if(ce===0)throw new Error("Invalid hex 4");break}var Fe;return ne+ce}consumeFQDN(B,ne){let ce=ne;for(;A(B[ce])||z(B[ce])||B[ce]==="-"||B[ce]===".";)ce+=1;if(ce-ne<4)throw new Error("Invalid FQDN");return ce}consumeExtnAddr(B,ne){return this.consumeOneOrMore(B,ne,W)}consumeMulticastAddress(B,ne,ce){switch(ce){case"IP4":case"ip4":return this.consumeIP4MulticastAddress(B,ne);case"IP6":case"ip6":return this.consumeIP6MulticastAddress(B,ne);default:try{return this.consumeFQDN(B,ne)}catch{return this.consumeExtnAddr(B,ne)}}}consumeIP6MulticastAddress(B,ne){const ce=this.consumeHexpart(B,ne);return B[ce]==="/"?this.consumeInteger(B,ce+1):ce}consumeIP4MulticastAddress(B,ne){let ce=ne+3;const Fe=B.slice(ne,ce),Ut=parseInt(Fe);if(Ut<224||Ut>239)throw new Error("Invalid IP4 multicast address, IPv4 multicast addresses may be in the range 224.0.0.0 to 239.255.255.255.");for(let Gn=0;Gn<3;Gn++){if(B[ce]!==".")throw new Error("Invalid IP4 multicast address.");ce+=1,ce=this.consumeDecimalUChar(B,ce)}return B[ce]==="/"&&(ce+=1),ce=this.consumeTTL(B,ce),B[ce]==="/"&&(ce=this.consumeInteger(B,ce)),ce}consumeInteger(B,ne){if(!U(B[ne]))throw new Error("Invalid integer.");for(ne+=1;A(B[ne]);)ne+=1;return ne}consumeTTL(B,ne){if(B[ne]==="0")return ne+1;if(!U(B[ne]))throw new Error("Invalid TTL.");ne+=1;for(let ce=0;ce<2&&A(B[ne]);ce++)ne+=1;return ne}consumeToken(B,ne){return this.consumeOneOrMore(B,ne,F)}consumeTime(B,ne){let ce=ne;if(B[ce]==="0")return ce+1;for(U(B[ce])&&(ce+=1);A(B[ce]);)ce++;if(ce-ne<10)throw new Error("Invalid time");return ce}consumeAddress(B,ne){return this.consumeTill(B,ne,y)}consumeTypedTime(B,ne){let ce=ne;return ce=this.consumeOneOrMore(B,ce,A),X(B[ce])?ce+1:ce}consumeRepeatInterval(B,ne){if(!U(B[ne]))throw new Error("Invalid repeat interval");for(ne+=1;A(B[ne]);)ne+=1;return X(B[ne])&&(ne+=1),ne}consumePort(B,ne){return this.consumeOneOrMore(B,ne,A)}consume(B,ne,ce){for(let Fe=0;Fe<ce.length;Fe++){if(ne+Fe>=B.length)throw new Error("consume exceeding value length");if(B[ne+Fe]!==ce[Fe])throw new Error("consume ".concat(ce," failed at ").concat(Fe))}return ne+ce.length}consumeTill(B,ne,ce){let Fe=ne;for(;Fe<B.length&&(typeof ce!="string"||B[Fe]!==ce)&&(typeof ce!="function"||!ce(B[Fe]));)Fe++;return Fe}}class ln extends tt{constructor(){super(),Pe(this,"records",[]),Pe(this,"currentLine",0)}parse(B){const ne=this.probeEOL(B);this.records=B.split(ne).filter(ai=>!!go(ai).call(ai)).map(this.parseLine),this.currentLine=0;const ce=this.parseVersion(),Fe=this.parseOrigin(),Ut=this.parseSessionName(),Gn=this.parseInformation(),fi=this.parseUri(),ca=this.parseEmail(),tu=this.parsePhone(),RS=this.parseConnection(),wS=this.parseBandWidth(),Es=this.parseTimeFields(),ld=this.parseKey(),Af=this.parseSessionAttribute(),Gr=this.parseMediaDescription();if(this.currentLine!==this.records.length)throw new Error("parsing failed, non exhaustive sdp lines.");return{version:ce,origin:Fe,sessionName:Ut,information:Gn,uri:fi,emails:ca,phones:tu,connection:RS,bandwidths:wS,timeFields:Es,key:ld,attributes:Af,mediaDescriptions:Gr}}getCurrentRecord(){const B=this.records[this.currentLine];if(!B)throw new Error("Record doesn't exit.");return B}probeEOL(B){for(let ne=0;ne<B.length;ne++)if(B[ne]===g)return B[ne-1]==="\r"?_:g;throw new Error("Invalid newline character.")}parseLine(B,ne){if(B.length<2)throw new Error("Invalid sdp line, sdp line should be of form <type>=<value>.");const ce=B[0];if(B[1]!=="=")throw new Error('Invalid sdp line, <type> should be a single character followed by an "=" sign.');return{type:ce,value:B.slice(2),line:ne,cur:0}}parseSessionAttribute(){const B=new sr;for(;this.currentLine<this.records.length;){const ne=this.getCurrentRecord();if(ne.type!==T.ATTRIBUTE)break;const ce={attField:this.extractOneOrMore(ne,Fe=>F(Fe)&&Fe!==":"),_cur:0};ne.value[ne.cur]===":"&&(ne.cur+=1,ce.attValue=this.extractOneOrMore(ne,ue)),B.parse(ce),this.currentLine++}return B.digest()}parseMediaAttributes(B){const ne=new Jr(B);for(;this.currentLine<this.records.length;){const ce=this.getCurrentRecord();if(ce.type!==T.ATTRIBUTE)break;const Fe={attField:this.extractOneOrMore(ce,Ut=>F(Ut)&&Ut!==":"),_cur:0};ce.value[ce.cur]===":"&&(ce.cur+=1,Fe.attValue=this.extractOneOrMore(ce,ue)),ne.parse(Fe),this.currentLine++}return ne.digest()}parseKey(){const B=this.getCurrentRecord();if(B.type===T.KEY){if(B.value==="prompt"||B.value==="clear:"||B.value==="base64:"||B.value==="uri:")return B.value;throw this.currentLine++,new Error("Invalid key.")}}parseZone(){const B=this.getCurrentRecord();if(B.type===T.ZONE_ADJUSTMENTS){const ne=[];for(;;)try{const ce=this.extract(B,this.consumeTime);this.consumeSpaceForRecord(B);let Fe=!1;B.value[B.cur]==="-"&&(Fe=!0,B.cur+=1);const Ut=this.extract(B,this.consumeTypedTime);ne.push({time:ce,typedTime:Ut,back:Fe})}catch{break}if(ne.length===0)throw new Error("Invalid zone adjustments");return this.currentLine++,ne}return[]}parseRepeat(){const B=[];for(;;){const ne=this.getCurrentRecord();if(ne.type!==T.REPEAT)break;{const ce=this.extract(ne,this.consumeRepeatInterval),Fe=this.parseTypedTime(ne);B.push({repeatInterval:ce,typedTimes:Fe}),this.currentLine++}}return B}parseTypedTime(B){const ne=[];for(;;)try{this.consumeSpaceForRecord(B),ne.push(this.extract(B,this.consumeTypedTime))}catch{break}if(ne.length===0)throw new Error("Invalid typed time.");return ne}parseTime(){const B=this.getCurrentRecord(),ne=this.extract(B,this.consumeTime);this.consumeSpaceForRecord(B);const ce=this.extract(B,this.consumeTime);return this.currentLine++,{startTime:ne,stopTime:ce}}parseBandWidth(){const B=[];for(;this.currentLine<this.records.length;){const ne=this.getCurrentRecord();if(ne.type!==T.BANDWIDTH)break;{const ce=this.extractOneOrMore(ne,F);if(ne.value[ne.cur]!==":")throw new Error("Invalid bandwidth field.");ne.cur++;const Fe=this.extractOneOrMore(ne,A);B.push({bwtype:ce,bandwidth:Fe}),this.currentLine++}}return B}parseVersion(){const B=this.getCurrentRecord();if(B.type!==T.VERSION)throw new Error("first sdp record must be version");const ne=B.value.slice(0,this.consumeOneOrMore(B.value,0,A));if(ne.length!==B.value.length)throw new Error('invalid proto version, "v='.concat(B.value,'"'));return this.currentLine++,ne}parseOrigin(){const B=this.getCurrentRecord();if(B.type!==T.ORIGIN)throw new Error("second line of sdp must be origin");const ne=this.extractOneOrMore(B,W);this.consumeSpaceForRecord(B);const ce=this.extractOneOrMore(B,A);this.consumeSpaceForRecord(B);const Fe=this.extractOneOrMore(B,A);this.consumeSpaceForRecord(B);const Ut=this.extractOneOrMore(B,F);this.consumeSpaceForRecord(B);const Gn=this.extractOneOrMore(B,F);this.consumeSpaceForRecord(B);const fi=this.extract(B,this.consumeUnicastAddress);return this.currentLine++,{username:ne,sessId:ce,sessVersion:Fe,nettype:Ut,addrtype:Gn,unicastAddress:fi}}parseSessionName(){const B=this.getCurrentRecord();if(B.type===T.SESSION_NAME){const ne=this.extract(B,this.consumeText);return this.currentLine++,ne}}parseInformation(){const B=this.getCurrentRecord();if(B.type!==T.INFORMATION)return;const ne=this.extract(B,this.consumeText);return this.currentLine++,ne}parseUri(){const B=this.getCurrentRecord();if(B.type===T.URI)return this.currentLine++,B.value}parseEmail(){const B=[];for(;;){const ne=this.getCurrentRecord();if(ne.type!==T.EMAIL)break;B.push(ne.value),this.currentLine++}return B}parsePhone(){const B=[];for(;;){const ne=this.getCurrentRecord();if(ne.type!==T.PHONE)break;B.push(ne.value),this.currentLine++}return B}parseConnection(){const B=this.getCurrentRecord();if(B.type===T.CONNECTION){const ne=this.extractOneOrMore(B,F);this.consumeSpaceForRecord(B);const ce=this.extractOneOrMore(B,F);this.consumeSpaceForRecord(B);const Fe=this.extract(B,this.consumeAddress);return this.currentLine++,{nettype:ne,addrtype:ce,address:Fe}}}parseMedia(){const B=this.getCurrentRecord(),ne=this.extract(B,this.consumeToken);this.consumeSpaceForRecord(B);let ce=this.extract(B,this.consumePort);B.value[B.cur]==="/"&&(B.cur+=1,ce+=this.extract(B,this.consumeInteger)),this.consumeSpaceForRecord(B);const Fe=[];for(Fe.push(this.extract(B,this.consumeToken));B.value[B.cur]==="/";)B.cur+=1,Fe.push(this.extract(B,this.consumeToken));if(Fe.length===0)throw new Error("Invalid proto");const Ut=this.parseFmt(B);return this.currentLine++,{mediaType:ne,port:ce,protos:Fe,fmts:Ut}}parseTimeFields(){const B=[];for(;this.getCurrentRecord().type===T.TIME;){const ne=this.parseTime(),ce=this.parseRepeat(),Fe=this.parseZone();B.push({time:ne,repeats:ce,zones:Fe})}return B}parseMediaDescription(){const B=[];for(;this.currentLine<this.records.length&&this.getCurrentRecord().type===T.MEDIA;){const ne=this.parseMedia(),ce=this.parseInformation(),Fe=this.parseConnections(),Ut=this.parseBandWidth(),Gn=this.parseKey(),fi=this.parseMediaAttributes(ne);B.push({media:ne,information:ce,connections:Fe,bandwidths:Ut,key:Gn,attributes:fi})}return B}parseConnections(){const B=[];for(;this.currentLine<this.records.length&&this.getCurrentRecord().type===T.CONNECTION;)B.push(this.parseConnection());return B}parseFmt(B){const ne=[];for(;;)try{this.consumeSpaceForRecord(B),ne.push(this.extract(B,this.consumeToken))}catch{break}if(ne.length===0)throw new Error("Invalid fmts");return ne}extract(B,ne){for(var ce=arguments.length,Fe=new Array(ce>2?ce-2:0),Ut=2;Ut<ce;Ut++)Fe[Ut-2]=arguments[Ut];const Gn=ne.call(this,B.value,B.cur,...Fe),fi=B.value.slice(B.cur,Gn);return B.cur=Gn,fi}extractOneOrMore(B,ne){const ce=this.consumeOneOrMore(B.value,B.cur,ne),Fe=B.value.slice(B.cur,ce);return B.cur=ce,Fe}consumeSpaceForRecord(B){if(B.value[B.cur]!==y)throw new Error("Invalid space at ".concat(B.cur,"."));B.cur+=1}}class Fn extends tt{constructor(){super(...arguments),Pe(this,"attributes",void 0),Pe(this,"digested",!1)}extractOneOrMore(B,ne,ce){const Fe=this.consumeOneOrMore(B.attValue,B._cur,ne),Ut=B.attValue.slice(B._cur,Fe),[Gn,fi]=ce||[];if(typeof Gn=="number"&&Ut.length<Gn)throw new Error("error in length, should be more or equal than ".concat(Gn," characters."));if(typeof fi=="number"&&Ut.length>fi)throw new Error("error in length, should be less or equal than ".concat(fi," characters."));return B._cur=Fe,Ut}consumeAttributeSpace(B){if(B.attValue[B._cur]!==y)throw new Error("Invalid space at ".concat(B._cur,"."));B._cur+=1}extract(B,ne){if(!B.attValue)throw new Error("Nothing to extract from attValue.");for(var ce=arguments.length,Fe=new Array(ce>2?ce-2:0),Ut=2;Ut<ce;Ut++)Fe[Ut-2]=arguments[Ut];const Gn=ne.call(this,B.attValue,B._cur,...Fe),fi=B.attValue.slice(B._cur,Gn);return B._cur=Gn,fi}atEnd(B){if(!B.attValue)throw new Error;return B._cur>=B.attValue.length}peekChar(B){if(!B.attValue)throw new Error;return B.attValue[B._cur]}peek(B,ne){if(!B.attValue)throw new Error;for(let ce=0;ce<ne.length;ce++)if(ne[ce]!==B.attValue[B._cur+ce])return!1;return!0}parseIceUfrag(B){if(this.attributes.iceUfrag)throw new Error("Invalid ice-ufrag, should be only a single line if 'a=ice-ufrag'");this.attributes.iceUfrag=this.extractOneOrMore(B,pe,[4,256])}parseIcePwd(B){if(this.attributes.icePwd)throw new Error("Invalid ice-pwd, should be only a single line if 'a=ice-pwd'");this.attributes.icePwd=this.extractOneOrMore(B,pe,[22,256])}parseIceOptions(B){if(this.attributes.iceOptions)throw new Error("Invalid ice-options, should be only one 'ice-options' line");const ne=[];for(;!this.atEnd(B);){ne.push(this.extractOneOrMore(B,pe));try{this.consumeAttributeSpace(B)}catch(ce){if(this.atEnd(B))break;throw ce}}this.attributes.iceOptions=ne}parseFingerprint(B){const ne=this.extract(B,this.consumeToken);this.consumeAttributeSpace(B);const ce=this.extract(B,this.consumeTill);this.attributes.fingerprints.push({hashFunction:ne,fingerprint:ce})}parseExtmap(B){const ne=this.extractOneOrMore(B,A);let ce;this.peekChar(B)==="/"&&(this.extract(B,this.consume,"/"),ce=this.extract(B,this.consumeToken)),this.consumeAttributeSpace(B);const Fe=this.extract(B,this.consumeTill,y),Ut=Ae(Ae({entry:parseInt(ne,10)},ce&&{direction:ce}),{},{extensionName:Fe});this.peekChar(B)===y&&(this.consumeAttributeSpace(B),Ut.extensionAttributes=this.extract(B,this.consumeTill)),this.attributes.extmaps.push(Ut)}parseSetup(B){if(this.attributes.setup)throw new Error("must only be one single 'a=setup' line.");const ne=this.extract(B,this.consumeTill);if(ne!=="active"&&ne!=="passive"&&ne!=="actpass"&&ne!=="holdconn")throw new Error("role must be one of 'active', 'passive', 'actpass', 'holdconn'.");this.attributes.setup=ne}}class sr extends Fn{constructor(){super(...arguments),Pe(this,"attributes",{unrecognized:[],groups:[],extmaps:[],fingerprints:[],identities:[]})}parse(B){if(this.digested)throw new Error("already digested");try{switch(B.attField){case"group":this.parseGroup(B);break;case"ice-lite":this.parseIceLite();break;case"ice-ufrag":this.parseIceUfrag(B);break;case"ice-pwd":this.parseIcePwd(B);break;case"ice-options":this.parseIceOptions(B);break;case"fingerprint":this.parseFingerprint(B);break;case"setup":this.parseSetup(B);break;case"tls-id":this.parseTlsId(B);break;case"identity":this.parseIdentity(B);break;case"extmap":this.parseExtmap(B);break;case"msid-semantic":this.parseMsidSemantic(B);break;default:B.ignored=!0,this.attributes.unrecognized.push(B)}}catch(ne){throw console.error("parsing session attribute ".concat(B.attField,' error, "a=').concat(B.attField,":").concat(B.attValue,'"')),ne}if(!B.ignored&&B.attValue&&!this.atEnd(B))throw new Error("attribute parsing error")}digest(){return this.digested=!0,this.attributes}parseGroup(B){const ne=this.extract(B,this.consumeToken),ce=[];for(;!this.atEnd(B)&&this.peekChar(B)===y;)this.consumeAttributeSpace(B),ce.push(this.extract(B,this.consumeToken));this.attributes.groups.push({semantic:ne,identificationTag:ce})}parseIceLite(){if(this.attributes.iceLite)throw new Error("Invalid ice-lite, should be only a single line of 'a=ice-lite'");this.attributes.iceLite=!0}parseTlsId(B){if(this.attributes.tlsId)throw new Error("must be only one tld-id line");this.attributes.tlsId=this.extractOneOrMore(B,Ee)}parseIdentity(B){const ne=this.extractOneOrMore(B,Se),ce=[];for(;!this.atEnd(B)&&this.peekChar(B)===y;){this.consumeAttributeSpace(B);const Fe=this.extract(B,this.consumeToken);this.extract(B,this.consume,"=");const Ut=this.extractOneOrMore(B,Gn=>Gn!==y&&ue(Gn));ce.push({name:Fe,value:Ut})}this.attributes.identities.push({assertionValue:ne,extensions:ce})}parseMsidSemantic(B){this.peekChar(B)===y&&this.consumeAttributeSpace(B);const ne={semantic:this.extract(B,this.consumeToken),identifierList:[]};for(;;){try{this.consumeAttributeSpace(B)}catch{break}if(this.peekChar(B)==="*"){this.extract(B,this.consume,"*"),ne.applyForAll=!0;break}{const ce=this.extract(B,this.consumeTill,y);ne.identifierList.push(ce)}}this.attributes.msidSemantic=ne}}class Jr extends Fn{constructor(B){super(),Pe(this,"attributes",void 0),B.protos.indexOf("RTP")!==-1||B.protos.indexOf("rtp"),this.attributes={unrecognized:[],candidates:[],extmaps:[],fingerprints:[],imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:[],ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:[]}}parse(B){if(this.digested)throw new Error("already digested");try{switch(B.attField){case"extmap":this.parseExtmap(B);break;case"setup":this.parseSetup(B);break;case"ice-ufrag":this.parseIceUfrag(B);break;case"ice-pwd":this.parseIcePwd(B);break;case"ice-options":this.parseIceOptions(B);break;case"candidate":this.parseCandidate(B);break;case"remote-candidate":this.parseRemoteCandidate(B);break;case"end-of-candidates":this.parseEndOfCandidates();break;case"fingerprint":this.parseFingerprint(B);break;case"rtpmap":this.parseRtpmap(B);break;case"ptime":this.parsePtime(B);break;case"maxptime":this.parseMaxPtime(B);break;case"sendrecv":case"recvonly":case"sendonly":case"inactive":this.parseDirection(B);break;case"ssrc":this.parseSSRC(B);break;case"fmtp":this.parseFmtp(B);break;case"rtcp-fb":this.parseRtcpFb(B);break;case"rtcp-mux":this.parseRTCPMux();break;case"rtcp-mux-only":this.parseRTCPMuxOnly();break;case"rtcp-rsize":this.parseRTCPRsize();break;case"rtcp":this.parseRTCP(B);break;case"mid":this.parseMid(B);break;case"msid":this.parseMsid(B);break;case"imageattr":this.parseImageAttr(B);break;case"rid":this.parseRid(B);break;case"simulcast":this.parseSimulcast(B);break;case"sctp-port":this.parseSctpPort(B);break;case"max-message-size":this.parseMaxMessageSize(B);break;case"ssrc-group":this.parseSSRCGroup(B);break;default:B.ignored=!0,this.attributes.unrecognized.push(B)}}catch(ne){throw console.error("parsing media attribute ".concat(B.attField,' error, "a=').concat(B.attField,":").concat(B.attValue,'"')),ne}if(!B.ignored&&B.attValue&&!this.atEnd(B))throw new Error("attribute parsing error")}parseCandidate(B){const ne=this.extractOneOrMore(B,pe,[1,32]);this.consumeAttributeSpace(B);const ce=this.extractOneOrMore(B,A,[1,5]);this.consumeAttributeSpace(B);const Fe=this.extract(B,this.consumeToken);this.consumeAttributeSpace(B);const Ut=this.extractOneOrMore(B,A,[1,10]);this.consumeAttributeSpace(B);const Gn=this.extract(B,this.consumeAddress);this.consumeAttributeSpace(B);const fi=this.extract(B,this.consumePort);this.consumeAttributeSpace(B),this.extract(B,this.consume,"typ"),this.consumeAttributeSpace(B);const ca={foundation:ne,componentId:ce,transport:Fe,priority:Ut,connectionAddress:Gn,port:fi,type:this.extract(B,this.consumeToken),extension:{}};for(this.peek(B," raddr")&&(this.extract(B,this.consume," raddr"),this.consumeAttributeSpace(B),ca.relAddr=this.extract(B,this.consumeAddress)),this.peek(B," rport")&&(this.extract(B,this.consume," rport"),this.consumeAttributeSpace(B),ca.relPort=this.extract(B,this.consumePort));this.peekChar(B)===y;){this.consumeAttributeSpace(B);const tu=this.extract(B,this.consumeToken);this.consumeAttributeSpace(B),ca.extension[tu]=this.extractOneOrMore(B,D)}this.attributes.candidates.push(ca)}parseRemoteCandidate(B){const ne=[];for(;;){const ce=this.extractOneOrMore(B,A,[1,5]);this.consumeAttributeSpace(B);const Fe=this.extract(B,this.consumeAddress);this.consumeAttributeSpace(B);const Ut=this.extract(B,this.consumePort);ne.push({componentId:ce,connectionAddress:Fe,port:Ut});try{this.consumeAttributeSpace(B)}catch{break}}this.attributes.remoteCandidatesList.push(ne)}parseEndOfCandidates(){if(this.attributes.endOfCandidates)throw new Error("must be only one line of end-of-candidates");this.attributes.endOfCandidates=!0}parseRtpmap(B){const ne=this.extract(B,this.consumeToken);this.consumeAttributeSpace(B);const ce=this.extract(B,this.consumeTill,"/");this.extract(B,this.consume,"/");const Fe={encodingName:ce,clockRate:this.extractOneOrMore(B,A)};this.atEnd(B)||this.peekChar(B)!=="/"||(this.extract(B,this.consume,"/"),Fe.encodingParameters=parseInt(this.extract(B,this.consumeTill),10));const Ut=this.attributes.payloads.find(Gn=>Gn.payloadType===parseInt(ne,10));Ut?Ut.rtpMap=Fe:this.attributes.payloads.push({payloadType:parseInt(ne,10),rtpMap:Fe,rtcpFeedbacks:[]})}parsePtime(B){if(this.attributes.ptime)throw new Error("must be only one line of ptime");this.attributes.ptime=this.extract(B,this.consumeTill)}parseMaxPtime(B){if(this.attributes.maxPtime)throw new Error("must be only one line of ptime");this.attributes.maxPtime=this.extract(B,this.consumeTill)}parseDirection(B){if(this.attributes.direction)throw new Error("must be only one line of direction info");this.attributes.direction=B.attField}parseSSRC(B){const ne=this.extractOneOrMore(B,A);this.consumeAttributeSpace(B);const ce=this.extract(B,this.consumeTill,":");let Fe;this.peekChar(B)===":"&&(this.extract(B,this.consume,":"),Fe=this.extract(B,this.consumeTill));const Ut=this.attributes.ssrcs.find(Gn=>Gn.ssrcId===parseInt(ne,10));Ut?Ut.attributes[ce]=Fe:this.attributes.ssrcs.push({ssrcId:parseInt(ne,10),attributes:{[ce]:Fe}})}parseFmtp(B){const ne=this.extract(B,this.consumeTill,y);this.consumeAttributeSpace(B);const ce=this.extract(B,this.consumeTill),Fe={};ce.split(";").forEach(Gn=>{let[fi,ca]=Gn.split("=");fi=go(fi).call(fi);const tu=typeof ca=="string"?go(ca).call(ca):null;typeof fi=="string"&&fi.length>0&&(Fe[fi]=tu)});const Ut=this.attributes.payloads.find(Gn=>Gn.payloadType===parseInt(ne,10));Ut?Ut.fmtp={parameters:Fe}:this.attributes.payloads.push({payloadType:parseInt(ne,10),rtcpFeedbacks:[],fmtp:{parameters:Fe}})}parseFmtParameters(B){const ne={},ce=this.extract(B,this.consumeTill,"=");B._cur++;const Fe=this.extract(B,this.consumeTill,";");for(ne[ce]=Fe;B.attValue[B._cur]===";";){const Ut=this.extract(B,this.consumeTill,"=");B._cur++;const Gn=this.extract(B,this.consumeTill,";");ne[Ut]=Gn}return ne}parseRtcpFb(B){let ne="";ne=this.peekChar(B)==="*"?this.extract(B,this.consume,"*"):this.extract(B,this.consumeTill,y),this.consumeAttributeSpace(B);const ce=this.extract(B,this.consumeTill,y);let Fe;if(ce==="trr-int")Fe={type:ce,interval:this.extract(B,this.consumeTill)};else{const Ut={type:ce};this.peekChar(B)===y&&(this.consumeAttributeSpace(B),Ut.parameter=this.extract(B,this.consumeToken),this.peekChar(B)===y&&(Ut.additional=this.extract(B,this.consumeTill))),Fe=Ut}if(ne==="*")this.attributes.rtcpFeedbackWildcards.push(Fe);else{const Ut=this.attributes.payloads.find(Gn=>Gn.payloadType===parseInt(ne,10));Ut?Ut.rtcpFeedbacks.push(Fe):this.attributes.payloads.push({payloadType:parseInt(ne,10),rtcpFeedbacks:[Fe]})}}parseRTCPMux(){if(this.attributes.rtcpMux)throw new Error("must be single line of rtcp-mux");this.attributes.rtcpMux=!0}parseRTCPMuxOnly(){if(this.attributes.rtcpMuxOnly)throw new Error("must be single line of rtcp-only");this.attributes.rtcpMuxOnly=!0}parseRTCPRsize(){if(this.attributes.rtcpRsize)throw new Error("must be single line of rtcp-rsize");this.attributes.rtcpRsize=!0}parseRTCP(B){if(this.attributes.rtcp)throw new Error("must be single line of rtcp");const ne={port:this.extract(B,this.consumePort)};this.peekChar(B)===y&&(this.consumeAttributeSpace(B),ne.netType=this.extractOneOrMore(B,F),this.consumeAttributeSpace(B),ne.addressType=this.extractOneOrMore(B,F),this.consumeAttributeSpace(B),ne.address=this.extract(B,this.consumeAddress)),this.attributes.rtcp=ne}parseMsid(B){const ne={id:this.extractOneOrMore(B,F,[1,64])};this.peekChar(B)===y&&(this.consumeAttributeSpace(B),ne.appdata=this.extractOneOrMore(B,F,[1,64])),this.attributes.msids.push(ne)}parseImageAttr(B){this.attributes.imageattr.push(B.attValue)}parseRid(B){const ne=this.extractOneOrMore(B,Fe=>z(Fe)||A(Fe)||Fe==="_"||Fe==="-");this.consumeAttributeSpace(B);const ce={id:ne,direction:this.extract(B,this.consumeToken),params:[]};if(this.peekChar(B)===y){if(this.consumeAttributeSpace(B),this.peek(B,"pt=")){this.extract(B,this.consume,"pt=");const Fe=[];for(;;){const Ut=this.extract(B,this.consumeToken);Fe.push(Ut);try{this.extract(B,this.consume,",")}catch{break}}ce.payloads=Fe,this.peekChar(B)===y&&this.extract(B,this.consume,y)}for(;;){const Fe=this.extract(B,this.consumeToken);switch(Fe){case"depend":{const Ut={type:Fe,rids:this.extract(B,this.consume,"=").split(",")};ce.params.push(Ut);break}default:{const Ut={type:Fe};this.peekChar(B)==="="&&(this.extract(B,this.consume,"="),Ut.val=this.extract(B,this.consumeTill,";")),ce.params.push(Ut)}}try{this.extract(B,this.consume,";")}catch{break}}}this.attributes.rids.push(ce)}parseSimulcast(B){if(this.attributes.simulcast)throw new Error("must be single line of simulcast");this.attributes.simulcast=B.attValue,this.extract(B,this.consumeTill)}parseSctpPort(B){this.attributes.sctpPort=this.extractOneOrMore(B,A,[1,5])}parseMaxMessageSize(B){this.attributes.maxMessageSize=this.extractOneOrMore(B,A,[1,void 0])}digest(){return this.digested=!0,this.attributes}parseMid(B){this.attributes.mid=this.extract(B,this.consumeToken)}parseSSRCGroup(B){const ne=this.extract(B,this.consumeToken),ce=[];for(;;)try{this.consumeAttributeSpace(B);const Fe=this.extract(B,this.consumeInteger);ce.push(parseInt(Fe,10))}catch{break}this.attributes.ssrcGroups.push({semantic:ne,ssrcIds:ce})}}function Or(Ge,B,ne){return B in Ge?Object.defineProperty(Ge,B,{value:ne,enumerable:!0,configurable:!0,writable:!0}):Ge[B]=ne,Ge}class nc{constructor(){Or(this,"eol",_)}print(B,ne){let ce="";return ne&&(this.eol=ne),ce+=this.printVersion(B.version),ce+=this.printOrigin(B.origin),ce+=this.printSessionName(B.sessionName),ce+=this.printInformation(B.information),ce+=this.printUri(B.uri),ce+=this.printEmail(B.emails),ce+=this.printPhone(B.phones),ce+=this.printConnection(B.connection),ce+=this.printBandwidth(B.bandwidths),ce+=this.printTimeFields(B.timeFields),ce+=this.printKey(B.key),ce+=this.printSessionAttributes(B.attributes),ce+=this.printMediaDescription(B.mediaDescriptions),ce}printVersion(B){return"v=".concat(B).concat(this.eol)}printOrigin(B){return"o=".concat(B.username," ").concat(B.sessId," ").concat(B.sessVersion," ").concat(B.nettype," ").concat(B.addrtype," ").concat(B.unicastAddress).concat(this.eol)}printSessionName(B){return B?"s=".concat(B).concat(this.eol):""}printInformation(B){return B?"i=".concat(B).concat(this.eol):""}printUri(B){return B?"u=".concat(B).concat(this.eol):""}printEmail(B){let ne="";for(const ce of B)ne+="e=".concat(ce).concat(this.eol);return ne}printPhone(B){let ne="";for(const ce of B)ne+="e=".concat(ce).concat(this.eol);return ne}printConnection(B){return B?"c=".concat(B.nettype," ").concat(B.addrtype," ").concat(B.address).concat(this.eol):""}printBandwidth(B){let ne="";for(const ce of B)ne+="b=".concat(ce.bwtype,":").concat(ce.bandwidth).concat(this.eol);return ne}printTimeFields(B){let ne="";for(const ce of B){ne+="t=".concat(ce.time.startTime," ").concat(ce.time.startTime).concat(this.eol);for(const Fe of ce.repeats)ne+="r=".concat(Fe.repeatInterval," ").concat(Fe.typedTimes.join(" ")).concat(this.eol);ce.zoneAdjustments&&(ne+="z=",ne+="z=".concat(ce.zoneAdjustments.map(Fe=>"".concat(Fe.time," ").concat(Fe.back?"-":""," ").concat(Fe.typedTime)).join(" ")).concat(this.eol),ne+=this.eol)}return ne}printKey(B){return B?"k=".concat(B).concat(this.eol):""}printAttributes(B){let ne="";for(const ce of B)ne+="a=".concat(ce.attField).concat(ce.attValue?":".concat(ce.attValue):"").concat(this.eol);return ne}printMediaDescription(B){let ne="";for(const ce of B)ne+=this.printMedia(ce.media),ne+=this.printInformation(ce.information),ne+=this.printConnections(ce.connections),ne+=this.printBandwidth(ce.bandwidths),ne+=this.printKey(ce.key),ne+=this.printMediaAttributes(ce);return ne}printConnections(B){let ne="";for(const ce of B)ne+=this.printConnection(ce);return ne}printMedia(B){return"m=".concat(B.mediaType," ").concat(B.port," ").concat(B.protos.join("/")," ").concat(B.fmts.join(" ")).concat(this.eol)}printSessionAttributes(B){return new Ve(this.eol).print(B)}printMediaAttributes(B){return new at(this.eol).print(B)}}class Oe{constructor(B){Or(this,"eol",void 0),this.eol=B}printIceUfrag(B){return B===void 0?"":"a=ice-ufrag:".concat(B).concat(this.eol)}printIcePwd(B){return B===void 0?"":"a=ice-pwd:".concat(B).concat(this.eol)}printIceOptions(B){return B===void 0?"":"a=ice-options:".concat(B.join(y)).concat(this.eol)}printFingerprints(B){return B.length>0?B.map(ne=>"a=fingerprint:".concat(ne.hashFunction).concat(y).concat(ne.fingerprint)).join(this.eol)+this.eol:""}printExtmap(B){return B.map(ne=>"a=extmap:".concat(ne.entry).concat(ne.direction?"/".concat(ne.direction):"").concat(y).concat(ne.extensionName).concat(ne.extensionAttributes?"".concat(y).concat(ne.extensionAttributes):"").concat(this.eol)).join("")}printSetup(B){return B===void 0?"":"a=setup:".concat(B).concat(this.eol)}printUnrecognized(B){return B.map(ne=>"a=".concat(ne.attField).concat(ne.attValue?":".concat(ne.attValue):"").concat(this.eol)).join("")}}class Ve extends Oe{print(B){let ne="";return ne+=this.printGroups(B.groups),ne+=this.printMsidSemantic(B.msidSemantic),ne+=this.printIceLite(B.iceLite),ne+=this.printIceUfrag(B.iceUfrag),ne+=this.printIcePwd(B.icePwd),ne+=this.printIceOptions(B.iceOptions),ne+=this.printFingerprints(B.fingerprints),ne+=this.printSetup(B.setup),ne+=this.printTlsId(B.tlsId),ne+=this.printIdentity(B.identities),ne+=this.printExtmap(B.extmaps),ne+=this.printUnrecognized(B.unrecognized),ne}printGroups(B){let ne="";return B.length>0&&(ne+=B.map(ce=>"a=group:".concat(ce.semantic).concat(ce.identificationTag.map(Fe=>"".concat(y).concat(Fe)).join("")).concat(this.eol)).join("")),ne}printIceLite(B){return B===void 0?"":"a=ice-lite"+this.eol}printTlsId(B){return B?"a=tls-id:".concat(B).concat(this.eol):""}printIdentity(B){return B.length===0?"":B.map(ne=>"a=identity:".concat(ne.assertionValue).concat(ne.extensions.map(ce=>"".concat(y).concat(ce.name).concat(ce.value?"=".concat(ce.value):"")))).join(this.eol)+this.eol}printMsidSemantic(B){if(!B)return"";let ne="a=msid-semantic:".concat(B.semantic);return B.applyForAll?ne+="".concat(y,"*"):B.identifierList.length>0&&(ne+=B.identifierList.map(ce=>"".concat(y).concat(ce))),ne+this.eol}}class at extends Oe{print(B){const ne=B.attributes;let ce="";return ce+=this.printRTCP(ne.rtcp),ce+=this.printIceUfrag(ne.iceUfrag),ce+=this.printIcePwd(ne.icePwd),ce+=this.printIceOptions(ne.iceOptions),ce+=this.printCandidates(ne.candidates),ce+=this.printRemoteCandidatesList(ne.remoteCandidatesList),ce+=this.printEndOfCandidates(ne.endOfCandidates),ce+=this.printFingerprints(ne.fingerprints),ce+=this.printSetup(ne.setup),ce+=this.printMid(ne.mid),ce+=this.printExtmap(ne.extmaps),ce+=this.printRTPRelated(ne),ce+=this.printPtime(ne.ptime),ce+=this.printMaxPtime(ne.maxPtime),ce+=this.printDirection(ne.direction),ce+=this.printSSRCGroups(ne.ssrcGroups),ce+=this.printSSRC(ne.ssrcs),ce+=this.printRTCPMux(ne.rtcpMux),ce+=this.printRTCPMuxOnly(ne.rtcpMuxOnly),ce+=this.printRTCPRsize(ne.rtcpRsize),ce+=this.printMSId(ne.msids),ce+=this.printImageattr(ne.imageattr),ce+=this.printRid(ne.rids),ce+=this.printSimulcast(ne.simulcast),ce+=this.printSCTPPort(ne.sctpPort),ce+=this.printMaxMessageSize(ne.maxMessageSize),ce+=this.printUnrecognized(ne.unrecognized),ce}printCandidates(B){return B.map(ne=>"a=candidate:".concat(ne.foundation).concat(y).concat(ne.componentId).concat(y).concat(ne.transport).concat(y).concat(ne.priority).concat(y).concat(ne.connectionAddress).concat(y).concat(ne.port).concat(y,"typ").concat(y).concat(ne.type).concat(ne.relAddr?"".concat(y,"raddr").concat(y).concat(ne.relAddr):"").concat(ne.relPort?"".concat(y,"rport").concat(y).concat(ne.relPort):"").concat(Object.keys(ne.extension).map(ce=>"".concat(y).concat(ce).concat(y).concat(ne.extension[ce])).join("")).concat(this.eol)).join("")}printRemoteCandidatesList(B){return B.map(ne=>"a=remote-candidates:".concat(ne.join(y)).concat(this.eol)).join("")}printEndOfCandidates(B){return B===void 0?"":"a=end-of-candidates"+this.eol}printRTPRelated(B){if(!B.payloads)return"";const ne=B.payloads;let ce="";ce+=B.rtcpFeedbackWildcards.map(Fe=>this.printRTCPFeedback("*",Fe)).join("");for(const Fe of ne)ce+=this.printRtpMap(Fe.payloadType,Fe.rtpMap),ce+=this.printFmtp(Fe.payloadType,Fe.fmtp),ce+=Fe.rtcpFeedbacks.map(Ut=>this.printRTCPFeedback(Fe.payloadType,Ut)).join("");return ce}printFmtp(B,ne){if(!ne)return"";const ce=Object.keys(ne.parameters);return ce.length===1&&ne.parameters[ce[0]]===null?"a=fmtp:".concat(B).concat(y).concat(ce[0]).concat(this.eol):"a=fmtp:".concat(B).concat(y).concat(Object.keys(ne.parameters).map(Fe=>"".concat(Fe,"=").concat(ne.parameters[Fe])).join(";")).concat(this.eol)}printRtpMap(B,ne){return ne?"a=rtpmap:".concat(B).concat(y).concat(ne.encodingName,"/").concat(ne.clockRate).concat(ne.encodingParameters?"/".concat(ne.encodingParameters):"").concat(this.eol):""}printRTCPFeedback(B,ne){let ce="a=rtcp-fb:".concat(B).concat(y),Fe=ne;return Fe.type==="trr-int"?ce+="ttr-int".concat(y).concat(Fe.interval):(ce+="".concat(Fe.type),Fe.parameter&&(ce+="".concat(y).concat(Fe.parameter),Fe.additional&&(ce+="".concat(y).concat(Fe.additional)))),ce+this.eol}printPtime(B){return B===void 0?"":"a=ptime:".concat(B).concat(this.eol)}printMaxPtime(B){return B===void 0?"":"a=maxptime:".concat(B).concat(this.eol)}printDirection(B){return B===void 0?"":"a=".concat(B).concat(this.eol)}printSSRC(B){return B.map(ne=>Object.keys(ne.attributes).map(ce=>"a=ssrc:".concat(ne.ssrcId.toString(10)).concat(y).concat(ce).concat(ne.attributes[ce]?":".concat(ne.attributes[ce]):"").concat(this.eol)).join("")).join("")}printRTCPMux(B){return B===void 0?"":"a=rtcp-mux".concat(this.eol)}printRTCPMuxOnly(B){return B===void 0?"":"a=rtcp-mux-only".concat(this.eol)}printRTCPRsize(B){return B===void 0?"":"a=rtcp-rsize".concat(this.eol)}printRTCP(B){if(B===void 0)return"";let ne="a=rtcp:".concat(B.port);return B.netType&&(ne+="".concat(y).concat(B.netType)),B.addressType&&(ne+="".concat(y).concat(B.addressType)),B.address&&(ne+="".concat(y).concat(B.address)),ne+this.eol}printMSId(B){return B.map(ne=>"a=msid:".concat(ne.id).concat(ne.appdata?"".concat(y).concat(ne.appdata):"").concat(this.eol)).join("")}printImageattr(B){return B.map(ne=>"a=imageattr:".concat(ne).concat(this.eol)).join("")}printRid(B){return B.map(ne=>{let ce="a=rid:".concat(ne.id).concat(y).concat(ne.direction);return ne.payloads&&(ce+="".concat(y,"pt=").concat(ne.payloads.join(","))),ne.params.length>0&&(ce+="".concat(y).concat(ne.params.map(Fe=>Fe.type==="depend"?"depend=".concat(Fe.rids.join(",")):"".concat(Fe.type,"=").concat(Fe.val)).join(";"))),ce+this.eol}).join("")}printSimulcast(B){return B===void 0?"":"a=simulcast:".concat(B).concat(this.eol)}printSCTPPort(B){return B===void 0?"":"a=sctp-port:".concat(B).concat(this.eol)}printMaxMessageSize(B){return B===void 0?"":"a=max-message-size:".concat(B).concat(this.eol)}printMid(B){return B===void 0?"":"a=mid:".concat(B).concat(this.eol)}printSSRCGroups(B){return B.map(ne=>"a=ssrc-group:".concat(ne.semantic).concat(ne.ssrcIds.map(ce=>"".concat(y).concat(ce.toString(10))).join("")).concat(this.eol)).join("")}}function Ft(Ge){return new ln().parse(Ge)}function Pn(Ge,B){return new nc().print(Ge,B)}}},a={};function l(u){if(a[u])return a[u].exports;var h=a[u]={exports:{}};return i[u](h,h.exports,l),h.exports}return l.d=(u,h)=>{for(var f in h)l.o(h,f)&&!l.o(u,f)&&Object.defineProperty(u,f,{enumerable:!0,get:h[f]})},l.o=(u,h)=>Object.prototype.hasOwnProperty.call(u,h),l.r=u=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(u,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(u,"__esModule",{value:!0})},l(8)})()})(t6);var yr=t6.exports;function Js(t){if(Array.isArray(t))return t.map(i=>i);if(!n6(t))return t;const n={};for(const i in t){const a=t[i];n6(a)||Array.isArray(a)?n[i]=Js(a):n[i]=a}return n}function n6(t){return!(typeof t!="object"||Array.isArray(t)||!t)}class TI{constructor(n){V(this,"input",[]),V(this,"size",void 0),this.size=n}add(n){this.input.push(n),this.input.length>this.size&&this.input.splice(0,1)}diffMean(){return this.input.length===0?0:(this.input[this.input.length-1]-this.input[0])/this.input.length}}const Sl={address:"unknown",candidateType:"unknown",id:"unknown",port:0,priority:0,protocol:"unknown",type:"unknown"},eg={timestamp:0,bitrate:{actualEncoded:0,transmit:0},sendPacketLossRate:0,recvPacketLossRate:0,videoRecv:[],videoSend:[],audioRecv:[],audioSend:[],selectedCandidatePair:{id:"unknown",localCandidate:Sl,remoteCandidate:Sl}},r6={firsCount:0,nacksCount:0,plisCount:0,framesDecodeCount:0,framesDecodeInterval:0,framesDecodeFreezeTime:0,decodeFrameRate:0,bytes:0,packetsLost:0,packetLostRate:0,packets:0,ssrc:0,qpSumPerFrame:0,framesDroppedCount:0,outputFrameRate:0},i6={firsCount:0,nacksCount:0,plisCount:0,frameCount:0,bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0,jitterMs:0,qpSumPerFrame:0},o6={bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0,jitterMs:0},a6={jitterBufferMs:0,jitterMs:0,bytes:0,packetsLost:0,packetLostRate:0,packets:0,ssrc:0,receivedFrames:0,droppedFrames:0,concealedSamples:0};function s6(t,n){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),i.push.apply(i,a)}return i}function c6(t){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?s6(Object(i),!0).forEach(function(a){V(t,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):s6(Object(i)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(i,a))})}return t}class RI{constructor(n,i){V(this,"onFirstVideoReceived",void 0),V(this,"onFirstVideoDecoded",void 0),V(this,"onFirstAudioReceived",void 0),V(this,"onFirstVideoDecodedTimeout",void 0),V(this,"onFirstAudioDecoded",void 0),V(this,"onSelectedLocalCandidateChanged",void 0),V(this,"onSelectedRemoteCandidateChanged",void 0),V(this,"videoIsReady",!1),V(this,"videoIsReady2",{}),V(this,"pc",void 0),V(this,"options",void 0),V(this,"intervalTimer",void 0),V(this,"stats",Js(eg)),V(this,"isFirstVideoReceived",{}),V(this,"isFirstVideoDecoded",{}),V(this,"isFirstAudioReceived",{}),V(this,"isFirstAudioDecoded",{}),V(this,"isFirstVideoDecodedTimeout",{}),V(this,"lossRateWindowStats",[]),this.pc=n,this.options=i,this.intervalTimer=window.setInterval(async()=>{this.updateStats()},this.options.updateInterval)}getStats(){return this.stats}getSelectedCandidatePair(){return new We(n=>{n({local:c6({},Sl),remote:c6({},Sl)})})}setVideoIsReady(n){this.videoIsReady=n}setVideoIsReady2(n,i){this.videoIsReady2[n]=i}getVideoIsReady(n){return this.videoIsReady2[n]||!1}setIsFirstAudioDecoded(n){}destroy(){window.clearInterval(this.intervalTimer),this.pc=void 0}calcLossRate(n){this.lossRateWindowStats.push(n),this.lossRateWindowStats.length>this.options.lossRateInterval&&this.lossRateWindowStats.splice(0,1);const i=this.lossRateWindowStats.length,a=["videoSend","audioSend","videoRecv","audioRecv"];let l=0,u=0,h=0,f=0;for(const g of a)n[g].forEach((_,y)=>{if(!this.lossRateWindowStats[i-1][g][y]||!this.lossRateWindowStats[0][g][y])return;const T=this.lossRateWindowStats[i-1][g][y].packets-this.lossRateWindowStats[0][g][y].packets,A=this.lossRateWindowStats[i-1][g][y].packetsLost-this.lossRateWindowStats[0][g][y].packetsLost;g==="videoSend"||g==="audioSend"?(l+=T,h+=A):(u+=T,f+=A),Number.isNaN(T)||Number.isNaN(T)?_.packetLostRate=0:_.packetLostRate=T<=0||A<=0?0:A/(T+A)});n.sendPacketLossRate=l<=0||h<=0?0:h/(l+h),n.recvPacketLossRate=u<=0||f<=0?0:f/(u+f)}}function l6(t,n){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),i.push.apply(i,a)}return i}function cpe(t){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?l6(Object(i),!0).forEach(function(a){V(t,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):l6(Object(i)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(i,a))})}return t}class lpe extends RI{constructor(){super(...arguments),V(this,"_stats",eg),V(this,"lastDecodeVideoReceiverStats",new Map)}async updateStats(){const n=await this._getStats(),i=this.statsResponsesToObjects(n);this._stats=Js(eg);const a=i.filter(u=>u.type==="ssrc");this.processSSRCStats(a);const l=i.find(u=>u.type==="VideoBwe");l&&this.processBandwidthStats(l),this._stats.timestamp=Date.now(),this.calcLossRate(this._stats),this.stats=this._stats}processBandwidthStats(n){this._stats.bitrate={actualEncoded:Number(n.googActualEncBitrate),targetEncoded:Number(n.googTargetEncBitrate),retransmit:Number(n.googRetransmitBitrate),transmit:Number(n.googTransmitBitrate)},this._stats.sendBandwidth=Number(n.googAvailableSendBandwidth)}processSSRCStats(n){n.forEach(i=>{var a;const l=Ye(a=i.id).call(a,"send");switch("".concat(i.mediaType,"_").concat(l?"send":"recv")){case"video_send":{const u=Js(i6);u.codec=i.googCodecName,u.adaptionChangeReason="none",i.googCpuLimitedResolution&&(u.adaptionChangeReason="cpu"),i.googBandwidthLimitedResolution&&(u.adaptionChangeReason="bandwidth"),u.avgEncodeMs=Number(i.googAvgEncodeMs),u.inputFrame={width:Number(i.googFrameWidthInput)||Number(i.googFrameWidthSent),height:Number(i.googFrameHeightInput)||Number(i.googFrameHeightSent),frameRate:Number(i.googFrameRateInput)},u.sentFrame={width:Number(i.googFrameWidthSent),height:Number(i.googFrameHeightSent),frameRate:Number(i.googFrameRateInput)},u.firsCount=Number(i.googFirReceived),u.nacksCount=Number(i.googNacksReceived),u.plisCount=Number(i.googPlisReceived),u.frameCount=Number(i.framesEncoded),u.bytes=Number(i.bytesSent),u.packets=Number(i.packetsSent),u.packetsLost=Number(i.packetsLost),u.ssrc=Number(i.ssrc),u.rttMs=Number(i.googRtt||0),this._stats.videoSend.push(u),this._stats.rtt=u.rttMs;break}case"video_recv":{const u=Js(r6),h=this.lastDecodeVideoReceiverStats.get(Number(i.ssrc));if(u.codec=i.googCodecName,u.targetDelayMs=Number(i.googTargetDelayMs),u.renderDelayMs=Number(i.googRenderDelayMs),u.currentDelayMs=Number(i.googCurrentDelayMs),u.minPlayoutDelayMs=Number(i.googMinPlayoutDelayMs),u.decodeMs=Number(i.googDecodeMs),u.maxDecodeMs=Number(i.googMaxDecodeMs),u.receivedFrame={width:Number(i.googFrameWidthReceived),height:Number(i.googFrameHeightReceived),frameRate:Number(i.googFrameRateReceived)},u.decodedFrame={width:Number(i.googFrameWidthReceived),height:Number(i.googFrameHeightReceived),frameRate:Number(i.googFrameRateDecoded)},u.decodeFrameRate=Number(i.googFrameRateDecoded),u.outputFrame={width:Number(i.googFrameWidthReceived),height:Number(i.googFrameHeightReceived),frameRate:Number(i.googFrameRateOutput)},u.jitterBufferMs=Number(i.googJitterBufferMs),u.firsCount=Number(i.googFirsSent),u.nacksCount=Number(i.googNacksSent),u.plisCount=Number(i.googPlisSent),u.framesDecodeCount=Number(i.framesDecoded),u.bytes=Number(i.bytesReceived),u.packets=Number(i.packetsReceived),u.packetsLost=Number(i.packetsLost),u.ssrc=Number(i.ssrc),u.packets>0&&!this.isFirstVideoReceived[u.ssrc]&&(this.onFirstVideoReceived&&this.onFirstVideoReceived(u.ssrc),this.isFirstVideoReceived[u.ssrc]=!0),u.framesDecodeCount>0&&!this.isFirstVideoDecoded[u.ssrc]&&(this.onFirstVideoDecoded&&this.onFirstVideoDecoded(u.ssrc,u.decodedFrame.width,u.decodedFrame.height),this.isFirstVideoDecoded[u.ssrc]=!0),h){const f=h.stats,g=Date.now()-h.lts;u.framesDecodeFreezeTime=f.framesDecodeFreezeTime,u.framesDecodeInterval=f.framesDecodeInterval,u.framesDecodeCount>f.framesDecodeCount&&this.isFirstVideoDecoded[u.ssrc]?(h.lts=Date.now(),u.framesDecodeInterval=g,u.framesDecodeInterval>=this.options.freezeRateLimit&&(this.getVideoIsReady(parseInt(i.ssrc,10))?u.framesDecodeFreezeTime+=u.framesDecodeInterval:this.setVideoIsReady2(parseInt(i.ssrc,10),!0))):u.framesDecodeCount<h.stats.framesDecodeCount&&(u.framesDecodeInterval=0)}this.lastDecodeVideoReceiverStats.set(u.ssrc,{stats:cpe({},u),lts:Date.now()}),this._stats.videoRecv.push(u);break}case"audio_recv":{const u=Js(a6);u.codec=i.googCodecName,u.outputLevel=Math.abs(Number(i.audioOutputLevel))/32767,u.decodingCNG=Number(i.googDecodingCNG),u.decodingCTN=Number(i.googDecodingCTN),u.decodingCTSG=Number(i.googDecodingCTSG),u.decodingNormal=Number(i.googDecodingNormal),u.decodingPLC=Number(i.googDecodingPLC),u.decodingPLCCNG=Number(i.googDecodingPLCCNG),u.expandRate=Number(i.googExpandRate),u.accelerateRate=Number(i.googAccelerateRate),u.preemptiveExpandRate=Number(i.googPreemptiveExpandRate),u.secondaryDecodedRate=Number(i.googSecondaryDecodedRate),u.speechExpandRate=Number(i.googSpeechExpandRate),u.preferredJitterBufferMs=Number(i.googPreferredJitterBufferMs),u.jitterBufferMs=Number(i.googJitterBufferMs),u.jitterMs=Number(i.googJitterReceived),u.bytes=Number(i.bytesReceived),u.packets=Number(i.packetsReceived),u.packetsLost=Number(i.packetsLost),u.ssrc=Number(i.ssrc),u.receivedFrames=Number(i.googDecodingCTN)||Number(i.packetsReceived),u.droppedFrames=Number(i.googDecodingPLC)+Number(i.googDecodingPLCCNG)||Number(i.packetsLost),u.receivedFrames>0&&!this.isFirstAudioReceived[u.ssrc]&&(this.onFirstAudioReceived&&this.onFirstAudioReceived(u.ssrc),this.isFirstAudioReceived[u.ssrc]=!0),u.decodingNormal>0&&!this.isFirstAudioDecoded[u.ssrc]&&(this.onFirstAudioDecoded&&this.onFirstAudioDecoded(u.ssrc),this.isFirstAudioDecoded[u.ssrc]=!0),this._stats.audioRecv.push(u);break}case"audio_send":{const u=Js(o6);u.codec=i.googCodecName,u.inputLevel=Math.abs(Number(i.audioInputLevel))/32767,u.aecReturnLoss=Number(i.googEchoCancellationReturnLoss||0),u.aecReturnLossEnhancement=Number(i.googEchoCancellationReturnLossEnhancement||0),u.residualEchoLikelihood=Number(i.googResidualEchoLikelihood||0),u.residualEchoLikelihoodRecentMax=Number(i.googResidualEchoLikelihoodRecentMax||0),u.bytes=Number(i.bytesSent),u.packets=Number(i.packetsSent),u.packetsLost=Number(i.packetsLost),u.ssrc=Number(i.ssrc),u.rttMs=Number(i.googRtt||0),this._stats.rtt=u.rttMs,this._stats.audioSend.push(u);break}}})}_getStats(){return new We((n,i)=>{this.pc.getStats(n,i)})}statsResponsesToObjects(n){const i=[];return n.result().forEach(a=>{const l={id:a.id,timestamp:a.timestamp.valueOf().toString(),type:a.type};a.names().forEach(u=>{l[u]=a.stat(u)}),i.push(l)}),i}}function u6(t,n){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),i.push.apply(i,a)}return i}function _h(t){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?u6(Object(i),!0).forEach(function(a){V(t,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):u6(Object(i)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(i,a))})}return t}class d6 extends RI{constructor(){super(...arguments),V(this,"_stats",eg),V(this,"report",void 0),V(this,"lastDecodeVideoReceiverStats",new Map),V(this,"lastVideoFramesRecv",new Map),V(this,"lastVideoFramesSent",new Map),V(this,"lastVideoFramesDecode",new Map),V(this,"lastVideoFramesOutput",new Map),V(this,"lastVideoJBDelay",new Map),V(this,"lastAudioJBDelay",new Map),V(this,"mediaBytesSent",new Map),V(this,"mediaBytesRetransmit",new Map),V(this,"mediaBytesTargetEncode",new Map),V(this,"lastEncoderMs",new Map)}async updateStats(){this.report=await this.pc.getStats(),this._stats=Js(eg),this.report.forEach(n=>{switch(n.type){case $a.OUTBOUND:case $a.INBOUND:{const i=n.mediaType||n.kind,a=!i&&"frameWidth"in n,l=!i&&!("frameWidth"in n);n.type===$a.OUTBOUND?i==="audio"||l?this.processAudioOutboundStats(n):(i==="video"||a)&&this.processVideoOutboundStats(n):n.type===$a.INBOUND&&(i==="audio"||l?this.processAudioInboundStats(n):(i==="video"||a)&&this.processVideoInboundStats(n));break}case $a.TRANSPORT:{const i=this.report.get(n.selectedCandidatePairId);i&&this.processCandidatePairStats(i);break}case $a.CANDIDATE_PAIR:n.selected&&this.processCandidatePairStats(n)}}),this.updateSendBitrate(),this._stats.timestamp=Date.now(),this.calcLossRate(this._stats),this.stats=this._stats}async getSelectedCandidatePair(){const n=await this.pc.getStats(),i={local:_h({},Sl),remote:_h({},Sl)};return n.forEach(a=>{let l;if(a.type===$a.TRANSPORT&&(l=n.get(a.selectedCandidatePairId)),a.type===$a.CANDIDATE_PAIR&&a.selected&&(l=a),l){const u=(h,f)=>{h.type=f.type,h.id=f.id,f.address&&(h.address=f.address),f.candidateType&&(h.candidateType=f.candidateType),f.port&&(h.port=f.port),f.priority&&(h.priority=f.priority),f.protocol&&(h.protocol=f.protocol),f.relayProtocol&&(h.relayProtocol=f.relayProtocol)};if(l.localCandidateId){const h=n.get(l.localCandidateId);h&&u(i.local,h)}if(l.remoteCandidateId){const h=n.get(l.remoteCandidateId);h&&u(i.remote,h)}}}),i}processCandidatePairStats(n){if(this._stats.sendBandwidth=n.availableOutgoingBitrate||0,n.currentRoundTripTime&&(this._stats.rtt=1e3*n.currentRoundTripTime),this._stats.videoSend.forEach(i=>{n.currentRoundTripTime&&(i.rttMs=1e3*n.currentRoundTripTime)}),this._stats.audioSend.forEach(i=>{n.currentRoundTripTime&&(i.rttMs=1e3*n.currentRoundTripTime)}),this._stats.selectedCandidatePair.id=n.id,n.localCandidateId){const i=this.report.get(n.localCandidateId);i&&this.processCandidateStats(i)}if(n.remoteCandidateId){const i=this.report.get(n.remoteCandidateId);i&&this.processCandidateStats(i)}}processCandidateStats(n){let i;n.type===$a.LOCAL_CANDIDATE&&(i=this._stats.selectedCandidatePair.localCandidate),n.type===$a.REMOTE_CANDIDATE&&(i=this._stats.selectedCandidatePair.remoteCandidate),i&&(i.type=n.type,i.id=n.id,n.address&&(i.address=n.address),n.candidateType&&(i.candidateType=n.candidateType),n.port&&(i.port=n.port),n.priority&&(i.priority=n.priority),n.protocol&&(i.protocol=n.protocol),n.relayProtocol&&(i.relayProtocol=n.relayProtocol),n.type===$a.LOCAL_CANDIDATE&&this.stats.selectedCandidatePair.localCandidate.id!==i.id&&this.onSelectedLocalCandidateChanged&&this.onSelectedLocalCandidateChanged(_h({},i),_h({},this.stats.selectedCandidatePair.localCandidate)),n.type===$a.REMOTE_CANDIDATE&&this.stats.selectedCandidatePair.remoteCandidate.id!==i.id&&this.onSelectedRemoteCandidateChanged&&this.onSelectedRemoteCandidateChanged(_h({},i),_h({},this.stats.selectedCandidatePair.remoteCandidate)))}processAudioInboundStats(n){let i=this._stats.audioRecv.find(a=>a.ssrc===n.ssrc);i||(i=Js(a6),this._stats.audioRecv.push(i)),i.ssrc=n.ssrc,i.packets=n.packetsReceived,i.packetsLost=n.packetsLost,i.bytes=n.bytesReceived,i.jitterMs=1e3*n.jitter,this.processAudioTrackReceiverStats(n,n.trackId,i),n.codecId&&(i.codec=this.getCodecFromCodecStats(n.codecId)),i.receivedFrames||(i.receivedFrames=n.packetsReceived),i.droppedFrames||(i.droppedFrames=n.packetsLost),i.receivedFrames>0&&!this.isFirstAudioReceived[i.ssrc]&&(this.onFirstAudioReceived&&this.onFirstAudioReceived(i.ssrc),this.isFirstAudioReceived[i.ssrc]=!0),i.outputLevel&&i.outputLevel>0&&!this.isFirstAudioDecoded[i.ssrc]&&(this.onFirstAudioDecoded&&this.onFirstAudioDecoded(i.ssrc),this.isFirstAudioDecoded[i.ssrc]=!0),typeof n.concealedSamples=="number"&&(i.concealedSamples=n.concealedSamples)}processVideoInboundStats(n){let i=this._stats.videoRecv.find(f=>f.ssrc===n.ssrc);i||(i=Js(r6),this._stats.videoRecv.push(i)),i.ssrc=n.ssrc,i.packets=n.packetsReceived,i.packetsLost=n.packetsLost,i.bytes=n.bytesReceived,i.firsCount=n.firCount,i.nacksCount=n.nackCount,i.plisCount=n.pliCount,i.framesDecodeCount=n.framesDecoded,i.framesDroppedCount=n.framesDropped,i.totalInterFrameDelay=n.totalInterFrameDelay,i.totalSquaredInterFrameDelay=n.totalSquaredInterFrameDelay,i.totalFreezesDuration=n.totalFreezesDuration;const a=this.lastDecodeVideoReceiverStats.get(i.ssrc),l=this.lastVideoFramesDecode.get(i.ssrc),u=this.lastVideoFramesOutput.get(i.ssrc),h=Date.now();if(i.framesDecodeCount>0&&!this.isFirstVideoDecoded[i.ssrc]){const f=i.decodedFrame?i.decodedFrame.width:0,g=i.decodedFrame?i.decodedFrame.height:0;this.onFirstVideoDecoded&&this.onFirstVideoDecoded(i.ssrc,f,g),this.isFirstVideoDecoded[i.ssrc]=!0}if(a){const f=a.stats,g=h-a.lts;i.framesDecodeFreezeTime=f.framesDecodeFreezeTime,i.framesDecodeInterval=f.framesDecodeInterval,!this.isFirstVideoDecoded[i.ssrc]&&g>this.options.firstVideoDecodedTimeout&&!this.isFirstVideoDecodedTimeout[i.ssrc]&&(this.onFirstVideoDecodedTimeout&&this.onFirstVideoDecodedTimeout(i.ssrc),this.isFirstVideoDecodedTimeout[i.ssrc]=!0),i.framesDecodeCount>f.framesDecodeCount&&this.isFirstVideoDecoded[i.ssrc]?(a.lts=Date.now(),i.framesDecodeInterval=g,i.framesDecodeInterval>=this.options.freezeRateLimit&&(this.getVideoIsReady(parseInt(n.ssrc))?i.framesDecodeFreezeTime+=i.framesDecodeInterval:this.setVideoIsReady2(parseInt(n.ssrc,10),!0))):i.framesDecodeCount<f.framesDecodeCount&&(i.framesDecodeInterval=0),n.framesDecoded&&n.qpSum&&(a.stats.framesDecodeCount>n.framesDecoded?i.qpSumPerFrame=n.qpSum/n.framesDecoded:i.qpSumPerFrame=(n.qpSum-a.qpSum)/(n.framesDecoded-a.stats.framesDecodeCount))}l&&h-l.lts>=800?(i.decodeFrameRate=Math.round((i.framesDecodeCount-l.count)/((h-l.lts)/1e3)),this.lastVideoFramesDecode.set(i.ssrc,{count:i.framesDecodeCount,lts:h,rate:i.decodeFrameRate})):l?i.decodeFrameRate=l.rate:this.lastVideoFramesDecode.set(i.ssrc,{count:i.framesDecodeCount,lts:h,rate:0}),i.framesDroppedCount&&n.framesReceived&&(u&&h-u.lts>=800?(i.outputFrameRate=Math.round((n.framesReceived-i.framesDroppedCount-u.count)/((h-u.lts)/1e3)),this.lastVideoFramesOutput.set(i.ssrc,{count:n.framesReceived-i.framesDroppedCount,lts:h,rate:Math.max(i.outputFrameRate,0)})):u?i.outputFrameRate=u.rate:this.lastVideoFramesOutput.set(i.ssrc,{count:n.framesReceived-i.framesDroppedCount,lts:h,rate:0})),n.totalDecodeTime&&(i.decodeMs=1e3*n.totalDecodeTime),this.processVideoTrackReceiverStats(n,n.trackId,i),n.codecId&&(i.codec=this.getCodecFromCodecStats(n.codecId)),n.framerateMean&&(i.framesRateFirefox=n.framerateMean),i.packets>0&&!this.isFirstVideoReceived[i.ssrc]&&(this.onFirstVideoReceived&&this.onFirstVideoReceived(i.ssrc),this.isFirstVideoReceived[i.ssrc]=!0),this.lastDecodeVideoReceiverStats.set(i.ssrc,{stats:_h({},i),lts:a?a.lts:Date.now(),qpSum:n.qpSum})}processVideoOutboundStats(n){let i=this._stats.videoSend.find(l=>l.ssrc===n.ssrc);i||(i=Js(i6),this._stats.videoSend.push(i));const a=this.mediaBytesSent.get(n.ssrc);if(a)a.add(n.bytesSent);else{const l=new TI(10);l.add(n.bytesSent),this.mediaBytesSent.set(n.ssrc,l)}if(n.retransmittedBytesSent!==void 0){const l=this.mediaBytesRetransmit.get(n.ssrc);if(l)l.add(n.retransmittedBytesSent);else{const u=new TI(10);u.add(n.retransmittedBytesSent),this.mediaBytesRetransmit.set(n.ssrc,u)}}if(n.totalEncodedBytesTarget){const l=this.mediaBytesTargetEncode.get(n.ssrc);if(l)l.add(n.totalEncodedBytesTarget);else{const u=new TI(10);u.add(n.totalEncodedBytesTarget),this.mediaBytesTargetEncode.set(n.ssrc,u)}}if(i.ssrc=n.ssrc,i.bytes=n.bytesSent,i.packets=n.packetsSent,i.firsCount=n.firCount,i.nacksCount=n.nackCount,i.plisCount=n.pliCount,i.frameCount=n.framesEncoded,i.adaptionChangeReason=n.qualityLimitationReason,i.scalabilityMode=n.scalabilityMode,n.totalEncodeTime&&n.framesEncoded){const l=this.lastEncoderMs.get(n.ssrc);if(!l||l.lastFrameCount>n.framesEncoded)i.avgEncodeMs=1e3*n.totalEncodeTime/n.framesEncoded;else{const u=n.framesEncoded-l.lastFrameCount,h=n.totalEncodeTime-l.lastEncoderTime;i.avgEncodeMs=1e3*h/u}}if(n.framesEncoded&&n.qpSum){const l=this.lastEncoderMs.get(n.ssrc);!l||l.lastFrameCount>n.framesEncoded?i.qpSumPerFrame=n.qpSum/n.framesEncoded:i.qpSumPerFrame=(n.qpSum-l.lastQpSum)/(n.framesEncoded-l.lastFrameCount)}if(this.lastEncoderMs.set(n.ssrc,{lastFrameCount:n.framesEncoded,lastEncoderTime:n.totalEncodeTime,lastQpSum:n.qpSum,lts:Date.now()}),n.codecId&&(i.codec=this.getCodecFromCodecStats(n.codecId)),n.mediaSourceId&&this.processVideoMediaSource(n.mediaSourceId,i),this.processVideoTrackSenderStats(n,n.trackId,i),n.remoteId)this.processRemoteInboundStats(n.remoteId,i);else{const l=this.findRemoteStatsId(n.ssrc,$a.REMOTE_INBOUND);l&&this.processRemoteInboundStats(l,i)}}processAudioOutboundStats(n){let i=this._stats.audioSend.find(a=>a.ssrc===n.ssrc);if(i||(i=Js(o6),this._stats.audioSend.push(i)),i.ssrc=n.ssrc,i.packets=n.packetsSent,i.bytes=n.bytesSent,n.mediaSourceId&&this.processAudioMediaSource(n.mediaSourceId,i),n.codecId&&(i.codec=this.getCodecFromCodecStats(n.codecId)),this.processAudioTrackSenderStats(n,n.trackId,i),n.remoteId)this.processRemoteInboundStats(n.remoteId,i);else{const a=this.findRemoteStatsId(n.ssrc,$a.REMOTE_INBOUND);a&&this.processRemoteInboundStats(a,i)}}findRemoteStatsId(n,i){var a;const l=Array.from(Tc(a=this.report).call(a)).find(u=>u.type===i&&u.ssrc===n);return l?l.id:null}processVideoMediaSource(n,i){const a=this.report.get(n);a&&a.width&&a.height&&a.framesPerSecond&&(i.inputFrame={width:a.width,height:a.height,frameRate:a.framesPerSecond})}processAudioMediaSource(n,i){const a=this.report.get(n);a&&(i.inputLevel=a.audioLevel)}processVideoTrackSenderStats(n,i,a){var l,u,h,f;const g=i?this.report.get(i):void 0,_=(l=g==null?void 0:g.framesSent)!==null&&l!==void 0?l:n.framesSent;if(typeof _!="number")return;let y=(u=g==null?void 0:g.frameWidth)!==null&&u!==void 0?u:n.frameWidth,T=(h=g==null?void 0:g.frameHeight)!==null&&h!==void 0?h:n.frameHeight,A=(f=g==null?void 0:g.framesPerSecond)!==null&&f!==void 0?f:n.framesPerSecond;if(typeof y=="number"&&typeof T=="number"||(y=0,T=0),A==null){const D=Date.now(),W=this.lastVideoFramesSent.get(a.ssrc);W&&D-W.lts>=800?(A=Math.round((_-W.count)/((D-W.lts)/1e3)),this.lastVideoFramesSent.set(a.ssrc,{count:_,lts:D,rate:A})):W?A=W.rate:this.lastVideoFramesSent.set(a.ssrc,{count:_,lts:D,rate:0})}a.sentFrame={width:y,height:T,frameRate:Math.max(0,A)}}processVideoTrackReceiverStats(n,i,a){var l,u,h,f,g;const _=i?this.report.get(i):void 0,y=(l=_==null?void 0:_.framesReceived)!==null&&l!==void 0?l:n.framesReceived,T=(u=_==null?void 0:_.frameWidth)!==null&&u!==void 0?u:n.frameWidth,A=(h=_==null?void 0:_.frameHeight)!==null&&h!==void 0?h:n.frameHeight,D=(f=_==null?void 0:_.jitterBufferDelay)!==null&&f!==void 0?f:n.jitterBufferDelay,W=(g=_==null?void 0:_.jitterBufferEmittedCount)!==null&&g!==void 0?g:n.jitterBufferEmittedCount;if(typeof y=="number"){const F=this.lastVideoFramesRecv.get(a.ssrc),U=Date.now();a.framesReceivedCount=y;let z=0;F&&U-F.lts>=800?(z=Math.round((y-F.count)/((U-F.lts)/1e3)),this.lastVideoFramesRecv.set(a.ssrc,{count:y,lts:U,rate:z})):F?z=F.rate:this.lastVideoFramesRecv.set(a.ssrc,{count:y,lts:U,rate:0}),a.receivedFrame={width:T||0,height:A||0,frameRate:z||0},a.decodedFrame={width:T||0,height:A||0,frameRate:a.decodeFrameRate||0},a.outputFrame={width:T||0,height:A||0,frameRate:a.outputFrameRate||a.decodeFrameRate||0}}if(D&&W){const F=this.lastVideoJBDelay.get(a.ssrc)||{jitterBufferDelay:0,jitterBufferEmittedCount:0,jitterBufferMs:0};let U=F.jitterBufferMs;const z=W-F.jitterBufferEmittedCount;z>0&&(U=1e3*(D-F.jitterBufferDelay)/z),a.jitterBufferMs=U,a.currentDelayMs=Math.round(U),this.lastVideoJBDelay.set(a.ssrc,{jitterBufferDelay:D,jitterBufferEmittedCount:W,jitterBufferMs:a.currentDelayMs})}}processAudioTrackSenderStats(n,i,a){var l,u,h,f;const g=i?this.report.get(i):void 0,_=(l=(u=g==null?void 0:g.echoReturnLoss)!==null&&u!==void 0?u:n.echoReturnLoss)!==null&&l!==void 0?l:0,y=(h=(f=g==null?void 0:g.echoReturnLossEnhancement)!==null&&f!==void 0?f:n.echoReturnLossEnhancement)!==null&&h!==void 0?h:0;a.aecReturnLoss=_,a.aecReturnLossEnhancement=y}processAudioTrackReceiverStats(n,i,a){var l,u,h,f,g,_,y;const T=i?this.report.get(i):void 0,A=(l=T==null?void 0:T.removedSamplesForAcceleration)!==null&&l!==void 0?l:n.removedSamplesForAcceleration,D=(u=T==null?void 0:T.totalSamplesReceived)!==null&&u!==void 0?u:n.totalSamplesReceived,W=(h=T==null?void 0:T.jitterBufferDelay)!==null&&h!==void 0?h:n.jitterBufferDelay,F=(f=T==null?void 0:T.jitterBufferEmittedCount)!==null&&f!==void 0?f:n.jitterBufferEmittedCount,U=(g=T==null?void 0:T.audioLevel)!==null&&g!==void 0?g:n==null?void 0:n.audioLevel,z=(_=T==null?void 0:T.totalSamplesDuration)!==null&&_!==void 0?_:n==null?void 0:n.totalSamplesDuration,X=(y=T==null?void 0:T.concealedSamples)!==null&&y!==void 0?y:n.concealedSamples;if(A&&D&&(a.accelerateRate=A/D),W&&F){const pe=this.lastAudioJBDelay.get(a.ssrc)||{jitterBufferDelay:0,jitterBufferEmittedCount:0,jitterBufferMs:0};let Ee=pe.jitterBufferMs;const Se=F-pe.jitterBufferEmittedCount;Se>0&&(Ee=1e3*(W-pe.jitterBufferDelay)/Se),a.jitterBufferMs=Math.round(Ee),this.lastAudioJBDelay.set(a.ssrc,{jitterBufferDelay:W,jitterBufferEmittedCount:F,jitterBufferMs:a.jitterBufferMs})}a.outputLevel=U;let ue=1920;z&&D&&(ue=D/z/50,a.receivedFrames=Math.round(D/ue)),X&&(a.droppedFrames=Math.round(X/ue))}processRemoteInboundStats(n,i){const a=this.report.get(n);a&&(i.packetsLost=a.packetsLost,a.roundTripTime&&(i.rttMs=1e3*a.roundTripTime),a.jitter&&(i.jitterMs=1e3*a.jitter),a.timestamp&&(i.timestamp=a.timestamp))}getCodecFromCodecStats(n){const i=this.report.get(n);if(!i)return"";const a=i.mimeType.match(/\/(.*)$/);return a&&a[1]?a[1]:""}updateSendBitrate(){let n=0,i=null,a=null;this.mediaBytesSent.forEach(u=>{n+=u.diffMean()}),this.mediaBytesRetransmit.forEach(u=>{i=i===null?u.diffMean():i+u.diffMean()}),this.mediaBytesTargetEncode.forEach(u=>{a=a===null?u.diffMean():a+u.diffMean()});const l=i!==null?n-i:n;this._stats.bitrate={actualEncoded:8*l/(this.options.updateInterval/1e3),transmit:8*n/(this.options.updateInterval/1e3)},i!==null&&(this._stats.bitrate.retransmit=8*i/(this.options.updateInterval/1e3)),a!==null&&(this._stats.bitrate.targetEncoded=8*a/(this.options.updateInterval/1e3))}}class upe extends RI{updateStats(){return We.resolve()}}function nS(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:250,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:8,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:500,l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1e4;const u=function(){const h=navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]*/i);return h&&h[0]?Number(h[0].split("/")[1]):null}();return u?u<76?new lpe(t,{updateInterval:n,lossRateInterval:i,freezeRateLimit:a,firstVideoDecodedTimeout:l}):new d6(t,{updateInterval:n,lossRateInterval:i,freezeRateLimit:a,firstVideoDecodedTimeout:l}):function(h){return!!window.RTCStatsReport&&h.getStats()instanceof We}(t)?new d6(t,{updateInterval:n,lossRateInterval:i,freezeRateLimit:a,firstVideoDecodedTimeout:l}):new upe(t,{updateInterval:n,lossRateInterval:i,freezeRateLimit:a,firstVideoDecodedTimeout:l})}function h6(t,n){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),i.push.apply(i,a)}return i}function p6(t){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?h6(Object(i),!0).forEach(function(a){V(t,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):h6(Object(i)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(i,a))})}return t}function tg(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=arguments.length>3?arguments[3]:void 0;const{filterRTX:l,filterVideoFec:u,filterAudioFec:h,filterAudioCodec:f,filterVideoCodec:g}=n,{useXR:_}=i;let y=[],T=[],A=[],D=[],W=!1,F=!1;if(yr.parse(t).mediaDescriptions.forEach(z=>{a&&a!==z.attributes.direction||(z.media.mediaType!=="video"||W||(T=z.attributes.payloads,D=z.attributes.extmaps,W=!0),z.media.mediaType!=="audio"||F||(y=z.attributes.payloads,A=z.attributes.extmaps,F=!0))}),!D||T.length===0)throw new Error("Cannot get video capabilities from SDP.");if(!A||y.length===0)throw new Error("Cannot get audio capabilities from SDP.");if(T.forEach(z=>{var X;(X=z.rtpMap)!==null&&X!==void 0&&X.clockRate&&(z.rtpMap.clockRate=parseInt(z.rtpMap.clockRate)),_&&z.rtcpFeedbacks.push({type:"rrtr"})}),y.forEach(z=>{var X;(X=z.rtpMap)!==null&&X!==void 0&&X.clockRate&&(z.rtpMap.clockRate=parseInt(z.rtpMap.clockRate)),_&&z.rtcpFeedbacks.push({type:"rrtr"})}),l&&(y=y.filter(z=>{var X;return((X=z.rtpMap)===null||X===void 0?void 0:X.encodingName.toLowerCase())!=="rtx"}),T=T.filter(z=>{var X;return((X=z.rtpMap)===null||X===void 0?void 0:X.encodingName.toLowerCase())!=="rtx"})),u&&(T=T.filter(z=>{var X;return!/(red)|(ulpfec)|(flexfec)/i.test(((X=z.rtpMap)===null||X===void 0?void 0:X.encodingName)||"")})),h&&(y=y.filter(z=>{var X;return!/(red)|(ulpfec)|(flexfec)/i.test(((X=z.rtpMap)===null||X===void 0?void 0:X.encodingName)||"")})),f&&(f==null?void 0:f.length)>0&&(y=y.filter(z=>{var X;return Ye(f).call(f,((X=z.rtpMap)===null||X===void 0?void 0:X.encodingName.toLowerCase())||"")})),g&&(g==null?void 0:g.length)>0){const z=T.filter(X=>{var ue;return Ye(g).call(g,((ue=X.rtpMap)===null||ue===void 0?void 0:ue.encodingName.toLowerCase())||"")});T=z.concat(l?[]:xI(z,T))}const U=ee("UNSUPPORTED_VIDEO_CODEC");return U&&U.length>0&&(T=T.filter(z=>!(z.rtpMap&&Ye(U).call(U,z.rtpMap.encodingName.toLowerCase())))),{audioCodecs:y,videoCodecs:T,audioExtensions:A,videoExtensions:D}}function xc(t){const n=yr.parse(t);let i,a;for(const l of n.mediaDescriptions){if(!i){const u=l.attributes.iceUfrag,h=l.attributes.icePwd;if(!u||!h)throw new Error("Cannot get iceUfrag or icePwd from SDP.");i={iceUfrag:u,icePwd:h}}if(!a){const u=l.attributes.fingerprints;u.length>0&&(a={fingerprints:u})}}if(!a&&n.attributes.fingerprints.length>0&&(a={fingerprints:n.attributes.fingerprints}),!a||!i)throw new Error("Cannot get iceParameters or dtlsParameters from SDP.");return{iceParameters:i,dtlsParameters:a}}function wI(t,n){const i=[],a=t.attributes.ssrcGroups.filter(h=>h.semantic==="FID"),l=t.attributes.ssrcGroups.find(h=>h.semantic==="SIM"),u=t.attributes.ssrcs;if(l)l.ssrcIds.forEach(h=>{var f;const g=(f=a.find(_=>_.ssrcIds[0]===h))===null||f===void 0?void 0:f.ssrcIds[1];i.push({ssrcId:h,rtx:n?g:void 0})});else if(a.length>0){const h=a[0].ssrcIds[0],f=a[0].ssrcIds[1];i.push({ssrcId:h,rtx:n?f:void 0})}else{if(u.length===0)throw new Error("No ssrcs found on local media description.");i.push({ssrcId:u[0].ssrcId})}return i}function f6(t,n){const{cname:i}=t;let a;n&&n.ip&&typeof n.port=="number"?(a=[{foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:n.ip,port:n.port.toString(),type:"host",extension:{}}],k.debug("Using remote candidate from AP ".concat(n.ip,":").concat(n.port)),n.ip6&&(a.push({foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:n.ip6,port:n.port.toString(),type:"host",extension:{}}),k.debug("Using IPV6 remote candidate from AP ".concat(n.ip6,":").concat(n.port)))):a=t.iceParameters.candidates.map(f=>({foundation:f.foundation,componentId:"1",transport:f.protocol,priority:f.priority.toString(),connectionAddress:f.ip,port:f.port.toString(),type:f.type,extension:{}}));const l={fingerprints:t.dtlsParameters.fingerprints.map(f=>({hashFunction:f.algorithm,fingerprint:f.fingerprint}))},u={iceUfrag:t.iceParameters.iceUfrag,icePwd:t.iceParameters.icePwd};let h;switch(t.dtlsParameters.role){case"server":h="passive";break;case"client":h="active";break;case"auto":h="actpass"}return{dtlsParameters:l,iceParameters:u,candidates:a,rtpCapabilities:Sf(t.rtpCapabilities),setup:h,cname:i}}function Ja(t,n,i){const a=[],l=[];return t.forEach(u=>{let{ssrcId:h,rtx:f}=u;const g=tr(8,"track-"),_={ssrcId:h,attributes:p6({label:g,mslabel:i=i||tr(10,""),msid:"".concat(i," ").concat(g)},n&&{cname:n})};if(a.push(_),f!==void 0){const y={ssrcId:f,attributes:p6({label:g,mslabel:i,msid:"".concat(i," ").concat(g)},n&&{cname:n})};a.push(y),l.push({semantic:"FID",ssrcIds:[h,f]})}}),t.length>1&&l.push({semantic:"SIM",ssrcIds:t.map(u=>{let{ssrcId:h}=u;return h})}),{ssrcs:a,ssrcGroups:l}}function Zu(t,n){n instanceof Lr&&t.attributes.payloads.forEach(i=>{var a;const l=(a=i.rtpMap)===null||a===void 0?void 0:a.encodingName.toLowerCase();if(!l||["opus","pcmu","pcma","g722"].indexOf(l)===-1)return;i.fmtp||(i.fmtp={parameters:{}}),i.fmtp.parameters.minptime="10",i.fmtp.parameters.useinbandfec="1";const u=n._encoderConfig;u&&l!=="pcmu"&&l!=="pcma"&&l!=="g722"&&(u.bitrate&&!Zn()&&(i.fmtp.parameters.maxaveragebitrate="".concat(Math.floor(1e3*u.bitrate))),u.sampleRate&&(i.fmtp.parameters.maxplaybackrate="".concat(u.sampleRate),i.fmtp.parameters["sprop-maxcapturerate"]="".concat(u.sampleRate)),u.stereo&&(i.fmtp.parameters.stereo="1",i.fmtp.parameters["sprop-stereo"]="1"))})}function rS(t){const n=t.attributes.unrecognized.findIndex(i=>i.attField==="x-google-flag"&&i.attValue==="conference");n!==-1&&t.attributes.unrecognized.splice(n,1)}function iS(t,n){var i;if(!(n instanceof nr&&n._encoderConfig&&n._hints.indexOf(ar.SCREEN_TRACK)===-1))return;const a=n._encoderConfig;un().supportMinBitrate&&a.bitrateMin&&t.attributes.payloads.forEach(l=>{var u,h;Ye(u=["h264","h265","vp8","vp9","av1"]).call(u,((h=l.rtpMap)===null||h===void 0?void 0:h.encodingName.toLowerCase())||"")&&(l.fmtp||(l.fmtp={parameters:{}}),l.fmtp.parameters["x-google-min-bitrate"]="".concat(a.bitrateMin))}),un().supportMinBitrate&&!Ye(i=n._hints).call(i,ar.LOW_STREAM)&&a.bitrateMax&&t.attributes.payloads.forEach(l=>{var u,h;Ye(u=["h264","h265","vp8","vp9","av1"]).call(u,((h=l.rtpMap)===null||h===void 0?void 0:h.encodingName.toLowerCase())||"")&&(l.fmtp||(l.fmtp={parameters:{}}),l.fmtp.parameters["x-google-start-bitrate"]="".concat(ee("X_GOOGLE_START_BITRATE")||Math.floor(a.bitrateMax)))})}function II(t){if(t.media.mediaType!=="video")return;const n=_n();if(n.name!==Bn.SAFARI&&n.os!==_i.IOS)return;const i=t.attributes.extmaps.findIndex(a=>/video-orientation/g.test(a.extensionName));i!==-1&&t.attributes.extmaps.splice(i,1)}function _f(t,n,i){if(!n)return;let a,l;if(t.media.mediaType==="video"?(a=i.videoExtensions,l=i.videoCodecs):(a=i.audioExtensions,l=i.audioCodecs),n.twcc===!0){const u=a.find(h=>h.extensionName==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01");u&&(t.attributes.extmaps.find(f=>f.extensionName==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01")||t.attributes.extmaps.push({entry:u.entry,extensionName:"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"}),function(f,g){return g.filter(_=>!!f.find(y=>y.payloadType===_.payloadType&&!!y.rtcpFeedbacks.find(T=>T.type==="transport-cc")))}(l,t.attributes.payloads).forEach(f=>{f.rtcpFeedbacks.find(g=>g.type==="transport-cc")||f.rtcpFeedbacks.push({type:"transport-cc"})}))}else if(n.twcc===!1){const u=t.attributes.extmaps.findIndex(h=>h.extensionName==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01");u!==-1&&t.attributes.extmaps.splice(u,1),t.attributes.payloads.forEach(h=>{const f=h.rtcpFeedbacks.findIndex(g=>g.type==="transport-cc");f!==-1&&h.rtcpFeedbacks.splice(f,1)})}if(n.remb===!0){const u=a.find(h=>h.extensionName==="http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time");u&&(t.attributes.extmaps.find(f=>f.extensionName==="http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time")||t.attributes.extmaps.push({entry:u.entry,extensionName:"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"}),function(f,g){return g.filter(_=>!!f.find(y=>y.payloadType===_.payloadType&&!!y.rtcpFeedbacks.find(T=>T.type==="goog-remb")))}(l,t.attributes.payloads).forEach(f=>{f.rtcpFeedbacks.find(g=>g.type==="goog-remb")||f.rtcpFeedbacks.push({type:"goog-remb"})}))}else if(n.remb===!1){const u=t.attributes.extmaps.findIndex(h=>h.extensionName==="http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time");u!==-1&&t.attributes.extmaps.splice(u,1),t.attributes.payloads.forEach(h=>{const f=h.rtcpFeedbacks.findIndex(g=>g.type==="goog-remb");f!==-1&&h.rtcpFeedbacks.splice(f,1)})}}function AI(t,n,i){if(Zn()||t.media.mediaType!=="video"||!(n instanceof nr)||i!=="vp9"&&i!=="vp8"||i==="vp8"&&!ee("SIMULCAST")||n._scalabilityMode===void 0||n._scalabilityMode.numSpatialLayers<=1)return;const a=i==="vp8"?2:n._scalabilityMode.numSpatialLayers,l=t.attributes.ssrcs[0],u=t.attributes.ssrcGroups.find(f=>f.semantic==="FID"&&f.ssrcIds[0]===l.ssrcId),h={semantic:"SIM",ssrcIds:[l.ssrcId]};for(let f=1;f<a;f++)t.attributes.ssrcs.push({ssrcId:l.ssrcId+f,attributes:or(l.attributes)}),h.ssrcIds.push(l.ssrcId+f),u&&(t.attributes.ssrcs.push({ssrcId:u.ssrcIds[1]+f,attributes:or(l.attributes)}),t.attributes.ssrcGroups.push({semantic:"FID",ssrcIds:[l.ssrcId+f,u.ssrcIds[1]+f]}));t.attributes.ssrcGroups.unshift(h)}async function OI(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=new RTCPeerConnection;i.addTransceiver("video",{direction:"sendonly"}),i.addTransceiver("audio",{direction:"sendonly"}),i.addTransceiver("video",{direction:"recvonly"}),i.addTransceiver("audio",{direction:"recvonly"});const a=(await i.createOffer()).sdp,{send:l,recv:u,sendrecv:h}=function(){let f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},_=arguments.length>2?arguments[2]:void 0;const y=tg(_,f,g,"sendonly"),T=tg(_,f,g,"recvonly"),A={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},D={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},W={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]};if(Qs(y,T,"videoExtensions",A,D,W),Qs(y,T,"videoCodecs",A,D,W),Qs(y,T,"audioExtensions",A,D,W),Qs(y,T,"audioCodecs",A,D,W),ee("RAISE_H264_BASELINE_PRIORITY")){const F=W.videoCodecs.findIndex(U=>{var z,X;return((z=U.rtpMap)===null||z===void 0?void 0:z.encodingName.toLocaleLowerCase())==="h264"&&((X=U.fmtp)===null||X===void 0?void 0:X.parameters["profile-level-id"])==="42001f"});if(F!==-1){const U=W.videoCodecs.findIndex(z=>{var X;return((X=z.rtpMap)===null||X===void 0?void 0:X.encodingName.toLocaleLowerCase())==="h264"});if(U<F){k.debug("raising H264 baseline profile priority");const z=W.videoCodecs[F];W.videoCodecs.splice(F,1),W.videoCodecs.splice(U,0,z)}U!==-1&&(D.videoCodecs=D.videoCodecs.filter(z=>{var X,ue;return!(((X=z.rtpMap)===null||X===void 0?void 0:X.encodingName.toLocaleLowerCase())==="h264"&&((ue=z.fmtp)===null||ue===void 0?void 0:ue.parameters["profile-level-id"])!=="42001f")})),U!==-1&&ee("FILTER_SEND_H264_BASELINE")&&(A.videoCodecs=A.videoCodecs.filter(z=>{var X,ue;return!(((X=z.rtpMap)===null||X===void 0?void 0:X.encodingName.toLocaleLowerCase())==="h264"&&((ue=z.fmtp)===null||ue===void 0?void 0:ue.parameters["profile-level-id"])!=="42001f")}))}}return{send:A,recv:D,sendrecv:W}}(t,n,a);try{i.close()}catch{}return{send:l,recv:u,sendrecv:h}}function m6(){const t={audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]},n=tg(arguments.length>2?arguments[2]:void 0,arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},"recvonly"),i={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},a={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},l={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]};if(Qs(t,n,"videoExtensions",i,a,l),Qs(t,n,"videoCodecs",i,a,l),Qs(t,n,"audioExtensions",i,a,l),Qs(t,n,"audioCodecs",i,a,l),ee("RAISE_H264_BASELINE_PRIORITY")){const u=l.videoCodecs.findIndex(h=>h.rtpMap&&h.rtpMap.encodingName.toLocaleLowerCase()==="h264"&&h.fmtp&&h.fmtp.parameters["profile-level-id"]==="42001f");if(u!==-1){const h=l.videoCodecs.findIndex(f=>f.rtpMap&&f.rtpMap.encodingName.toLocaleLowerCase()==="h264");if(h<u){k.debug("raising H264 baseline profile priority");const f=l.videoCodecs[u];l.videoCodecs.splice(u,1),l.videoCodecs.splice(h,0,f)}h!==-1&&(a.videoCodecs=a.videoCodecs.filter(f=>!(f.rtpMap&&f.rtpMap.encodingName.toLocaleLowerCase()==="h264"&&f.fmtp&&f.fmtp.parameters["profile-level-id"]!=="42001f")))}}return{send:i,recv:a,sendrecv:l}}function Qs(t,n,i,a,l,u){if(i==="videoExtensions"||i==="audioExtensions"){const h=[];return t[i].forEach(f=>{n[i].some((g,_)=>{if(f.entry===g.entry&&f.extensionName===g.extensionName)return h.push(_),!0})?u[i].push(f):a[i].push(f)}),void n[i].forEach((f,g)=>{h.indexOf(g)===-1&&l[i].push(f)})}if(i==="videoCodecs"||i==="audioCodecs"){const h=[];return t[i].forEach(f=>{n[i].some((g,_)=>{if(f.payloadType===g.payloadType&&JSON.stringify(f)===JSON.stringify(g))return h.push(_),!0})?u[i].push(f):a[i].push(f)}),void n[i].forEach((f,g)=>{h.indexOf(g)===-1&&l[i].push(f)})}}function Sf(t){const{send:n,recv:i,sendrecv:a}=t;if(!a){if(!n||!i)throw new Error("cannot merge rtp capabilities because one of send or recv is empty!");return{send:n,recv:i}}let l,u;return n?(l={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},l.audioCodecs=[...n.audioCodecs,...a.audioCodecs],l.videoCodecs=[...n.videoCodecs,...a.videoCodecs],l.audioExtensions=[...n.audioExtensions,...a.audioExtensions],l.videoExtensions=[...n.videoExtensions,...a.videoExtensions]):l=a,i?(u={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},u.audioCodecs=[...i.audioCodecs,...a.audioCodecs],u.videoCodecs=[...i.videoCodecs,...a.videoCodecs],u.audioExtensions=[...i.audioExtensions,...a.audioExtensions],u.videoExtensions=[...i.videoExtensions,...a.videoExtensions]):u=a,{send:l,recv:u}}function Nc(t){t.media.mediaType==="audio"&&t.attributes.payloads.filter(n=>{var i;return((i=n.rtpMap)===null||i===void 0?void 0:i.encodingName.toLowerCase())==="opus"}).forEach(n=>{n.fmtp||(n.fmtp={parameters:{}}),n.fmtp.parameters.stereo="1",n.fmtp.parameters["sprop-stereo"]="1"})}function oS(t){t.mediaDescriptions.forEach(n=>{n.media.mediaType!=="video"&&n.media.mediaType!=="audio"||n.attributes.payloads.forEach(i=>{i.rtcpFeedbacks.findIndex(a=>a.type==="rrtr")===-1&&i.rtcpFeedbacks.push({type:"rrtr"})})})}function Sh(t,n,i,a){let l=[];if(t===ut.VIDEO){if(ee("H264_PROFILE_LEVEL_ID")&&a==="h264"&&(l=n.videoCodecs.filter(u=>{var h;return Ye(h=u.rtpMap&&u.rtpMap.encodingName.toLowerCase()||"").call(h,a)&&u&&u.fmtp&&u.fmtp.parameters["profile-level-id"]===ee("H264_PROFILE_LEVEL_ID")})),!Array.isArray(l)||l.length===0){let u=[];const h=[],f=[],g=[];if(i.videoCodecs.forEach(_=>{const y=_.rtpMap&&_.rtpMap.encodingName.toLowerCase()||"";Ye(y).call(y,a)?u.push(_):Ye(y).call(y,"vp9")?h.push(_):Ye(y).call(y,"vp8")?f.push(_):Ye(y).call(y,"h264")&&g.push(_)}),u.length===0){let _="";h.length!==0?(u=h,_="vp9"):f.length!==0?(u=f,_="vp8"):g.length!==0&&(u=g,_="h264"),k.warning("codec ".concat(a," not included in rtpCapabilities, fallback to default payloads: ").concat(_))}u.length!==0&&(l=n.videoCodecs.filter(_=>u.some(y=>y.payloadType===_.payloadType)))}if(l.length===0&&(k.warning("codec ".concat(a," not included in rtpCapabilities, fallback to default payloads: ").concat(n.videoCodecs[0].rtpMap&&n.videoCodecs[0].rtpMap.encodingName)),l=n.videoCodecs),ee("USE_PUB_RTX")||ee("USE_SUB_RTX")){const u=xI(l,n.videoCodecs);l=[...l,...u]}}else l=n.audioCodecs.filter(u=>{var h;return Ye(h=u.rtpMap&&u.rtpMap.encodingName.toLowerCase()||"").call(h,a)}),l.length===0&&(k.warning("codec ".concat(a," not included in rtpCapabilities, fallback to opus")),l=n.audioCodecs.filter(u=>{var h;return Ye(h=u.rtpMap&&u.rtpMap.encodingName.toLowerCase()||"").call(h,"opus")}));return l}function xI(t,n){const i=t.map(a=>a.payloadType.toString());return n.filter(a=>a.rtpMap&&a.rtpMap.encodingName==="rtx"&&a.fmtp&&a.fmtp.parameters.apt&&Ye(i).call(i,a.fmtp&&a.fmtp.parameters.apt))}let g6=class{get localCapabilities(){return or(this._localCapabilities)}get rtpCapabilities(){return or(this._rtpCapabilities)}get candidates(){return or(this._candidates)}get iceParameters(){return or(this._iceParameters)}get dtlsParameters(){return or(this._dtlsParameters)}constructor(t){V(this,"sessionDesc",void 0),V(this,"_localCapabilities",void 0),V(this,"_rtpCapabilities",void 0),V(this,"_candidates",void 0),V(this,"_iceParameters",void 0),V(this,"_dtlsParameters",void 0),V(this,"setup",void 0),V(this,"currentMidIndex",void 0),V(this,"cname","o/i14u9pJrxRKAsu"),V(this,"firefoxSsrcMidMap",new Map),t=or(t);const{remoteIceParameters:n,remoteDtlsParameters:i,candidates:a,remoteRTPCapabilities:l,localCapabilities:u,direction:h,setup:f,videoCodec:g,audioCodec:_}=t;let y;this.setup=f,y=h===Do.RECEIVE_ONLY?yr.parse(`v=0
o=- 0 0 IN IP4 127.0.0.1
s=AgoraGateway
t=0 0
a=group:BUNDLE 0 1
a=msid-semantic: WMS
a=extmap-allow-mixed
m=video 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendonly
a=rtcp-mux
a=rtcp-rsize
a=mid:0
m=audio 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendonly
a=rtcp-mux
a=rtcp-rsize
a=mid:1
`):yr.parse(`v=0
o=- 0 0 IN IP4 127.0.0.1
s=AgoraGateway
t=0 0
a=group:BUNDLE 0 1
a=msid-semantic: WMS
a=extmap-allow-mixed
m=video 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=recvonly
a=rtcp-mux
a=rtcp-rsize
a=mid:0
m=audio 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=recvonly
a=rtcp-mux
a=rtcp-rsize
a=mid:1
`),this._rtpCapabilities=l,this._candidates=a,this._iceParameters=n,this._dtlsParameters=i,this._localCapabilities=u;const T=h===Do.RECEIVE_ONLY?this.rtpCapabilities.send:this.rtpCapabilities.recv,A=h===Do.RECEIVE_ONLY?this._localCapabilities.recv:this._localCapabilities.send,D=h===Do.RECEIVE_ONLY?l.send.videoCodecs:Sh(ut.VIDEO,T,A,g),W=h===Do.RECEIVE_ONLY?l.send.audioCodecs:Sh(ut.AUDIO,T,A,_);for(const F of y.mediaDescriptions)F.attributes.iceUfrag=n.iceUfrag,F.attributes.icePwd=n.icePwd,F.attributes.fingerprints=i.fingerprints,F.attributes.candidates=a,F.attributes.setup=this.setup,F.media.mediaType==="application"&&(F.attributes.sctpPort="5000"),F.media.mediaType==="video"&&(F.media.fmts=D.map(U=>U.payloadType.toString(10)),F.attributes.payloads=D,F.attributes.extmaps=T.videoExtensions),F.media.mediaType==="audio"&&(F.media.fmts=W.map(U=>U.payloadType.toString(10)),F.attributes.payloads=W,F.attributes.extmaps=T.audioExtensions,Nc(F));this.sessionDesc=y,this.currentMidIndex=y.mediaDescriptions.length-1}toString(){return yr.print(this.sessionDesc)}hasMid(t){return Array.isArray(t)?t.every(n=>this.hasMid(n)):this.sessionDesc.mediaDescriptions.some(n=>n.attributes.mid===t)}send(t,n,i,a,l){i=i.replace(/ /g,"-");const{ssrcs:u,ssrcGroups:h}=Ja(n,this.cname,ee("SYNC_GROUP")?i:void 0),f=this.findPreloadMediaDesc(u);if(f){if(Zn()&&this.firefoxSsrcMidMap.set(u[0].ssrcId,f.attributes.mid),l&&(l.twcc||l.remb)){const g=this.sessionDesc.mediaDescriptions.indexOf(f);return this.sessionDesc.mediaDescriptions[g]=this.mungSendMediaDesc(f,l),{mid:f.attributes.mid,needExchangeSDP:!0}}return{mid:f.attributes.mid,needExchangeSDP:!1}}{const g=this.findAvailableMediaIndex(t,u,a);let _;return g===-1?(_=this.createOrRecycleSendMedia(t,u,h,"sendonly",a,l),this.updateBundleMids()):(_=or(this.sessionDesc.mediaDescriptions[g]),_.attributes.direction="sendonly",_.attributes.ssrcs=u,_.attributes.ssrcGroups=h,this.sessionDesc.mediaDescriptions[g]=this.mungSendMediaDesc(_,l)),Zn()&&this.firefoxSsrcMidMap.set(u[0].ssrcId,_.attributes.mid),{needExchangeSDP:!0,mid:_.attributes.mid}}}stopSending(t){const n=this.sessionDesc.mediaDescriptions.filter(i=>i.attributes.mid&&t.indexOf(i.attributes.mid)!==-1);if(n.length!==t.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.stopSending.");n.forEach(i=>{i.attributes.ssrcs=[]}),this.updateBundleMids()}receive(t,n,i){const a=[];return t.forEach(l=>{const u=l._mediaStreamTrack.kind,h=this.findAvailableRecvMediaIndex(u);let f,g=!1;h===-1?(g=!0,f=this.createOrRecycleRecvMedia(l,[],"recvonly",n,i),this.updateBundleMids()):(f=or(this.sessionDesc.mediaDescriptions[h]),f.attributes.direction="recvonly"),a.push({mid:f.attributes.mid,needCreateTransceiver:g})}),a}stopReceiving(t){const n=this.sessionDesc.mediaDescriptions.filter(i=>t.indexOf(i.attributes.mid)!==-1);if(n.length!==t.length)throw new Error("MediaDescriptions' length doesn't match mids's length when calling RemoteSDP.receive.");n.forEach(i=>{i.media.port="0",i.attributes.direction="inactive"}),this.updateBundleMids()}addRemoteCandidate(t){const{foundation:n,protocol:i,address:a,port:l,type:u,relatedAddress:h,relatedPort:f,priority:g}=new RTCIceCandidate(t),_={foundation:n??"",componentId:"1",transport:i??"",priority:g?g+"":"",connectionAddress:a??"",port:l?l+"":"",type:u?u+"":"",relAddr:h??"",relPort:f?f+"":"",extension:{}};this.candidates.some(y=>y.priority===_.priority&&y.connectionAddress===_.connectionAddress&&y.port===_.port)||(this._candidates.push(_),this.sessionDesc.mediaDescriptions.forEach(y=>{y.attributes.candidates=this.candidates}))}clearRemoteCandidate(){this._candidates=[],this.sessionDesc.mediaDescriptions[0].attributes.candidates=this._candidates}createOrRecycleRecvMedia(t,n,i,a,l){const u=t._mediaStreamTrack.kind,h=this.rtpCapabilities.recv,f=Sh(u,h,this.localCapabilities.send,u===ut.AUDIO?l:a),g=u===ut.VIDEO?h.videoExtensions:h.audioExtensions,_="".concat(++this.currentMidIndex);let y={media:{mediaType:u,port:"9",protos:["UDP","TLS","RTP","SAVPF"],fmts:f.map(A=>A.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:[],extmaps:g,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:n,ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:f,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:i,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(_)}};y=this.mungRecvMediaDsec(y,t);const T=this.findFirstClosedMedia(u);if(T){const A=this.sessionDesc.mediaDescriptions.indexOf(T);this.sessionDesc.mediaDescriptions[A]=y}else this.sessionDesc.mediaDescriptions.push(y);return y}muteRemote(t){const n=this.sessionDesc.mediaDescriptions.filter(i=>Ye(t).call(t,i.attributes.mid||""));if(n.length!==t.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");n.forEach(i=>{i.attributes.direction="inactive"})}unmuteRemote(t){const n=this.sessionDesc.mediaDescriptions.filter(i=>Ye(t).call(t,i.attributes.mid||""));if(n.length!==t.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");n.forEach(i=>{i.attributes.direction="recvonly"})}findAvailableMediaIndex(t,n,i){return this.sessionDesc.mediaDescriptions.findIndex(a=>{const l=a.media.mediaType===t&&a.media.port!=="0"&&(a.attributes.direction==="sendonly"||a.attributes.direction==="sendrecv")&&a.attributes.ssrcs.length===0;if(Zn()){if(l){const u=this.firefoxSsrcMidMap.get(n[0].ssrcId);return!(u||a.attributes.mid!=="0"&&a.attributes.mid!=="1")||!(!u||u!==a.attributes.mid)}return!1}return l&&a.attributes.mid===i})}findAvailableRecvMediaIndex(t){return this.sessionDesc.mediaDescriptions.findIndex(n=>{const i=n.media.mediaType===t&&n.media.port!=="0"&&(n.attributes.direction==="recvonly"||n.attributes.direction==="sendrecv");return n.attributes.mid!=="0"&&n.attributes.mid!=="1"&&i})}predictReceivingMids(t){const n=[];for(let i=0;i<t;i++)n.push((this.currentMidIndex+i+1).toString(10));return n}restartICE(t){t=or(t),this._iceParameters=t,this.sessionDesc.mediaDescriptions.forEach(n=>{n.attributes.iceUfrag=t.iceUfrag,n.attributes.icePwd=t.icePwd})}createOrRecycleSendMedia(t,n,i,a,l,u){const h=this.rtpCapabilities.send,f=t===ut.VIDEO?h.videoCodecs:h.audioCodecs,g=t===ut.VIDEO?h.videoExtensions:h.audioExtensions;Zn()&&(l="".concat(++this.currentMidIndex));let _={media:{mediaType:t,port:"9",protos:["UDP","TLS","RTP","SAVPF"],fmts:f.map(T=>T.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:[],extmaps:g,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:n,ssrcGroups:i,rtcpFeedbackWildcards:[],payloads:f,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:a,rtcpMux:!0,rtcpRsize:!0,mid:l}};_=this.mungSendMediaDesc(_,u);const y=this.findFirstClosedMedia(t);if(y){const T=this.sessionDesc.mediaDescriptions.indexOf(y);this.sessionDesc.mediaDescriptions[T]=_}else this.sessionDesc.mediaDescriptions.push(_);return _}mungRecvMediaDsec(t,n,i){const a=or(t);return rS(a),Zu(a,n),iS(a,n),II(a),_f(a,i,this.localCapabilities.send),a}mungSendMediaDesc(t,n){const i=or(t);return _f(i,n,this.localCapabilities.recv),Nc(i),i}updateRecvMedia(t,n){const i=this.sessionDesc.mediaDescriptions.findIndex(a=>a.attributes.mid===t);if(i!==-1){const a=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[i],n);this.sessionDesc.mediaDescriptions[i]=a}}updateBundleMids(){this.sessionDesc.attributes.groups[0].identificationTag=this.sessionDesc.mediaDescriptions.filter(t=>t.media.port!=="0").map(t=>t.attributes.mid)}findPreloadMediaDesc(t){return this.sessionDesc.mediaDescriptions.find(n=>{var i;return((i=n.attributes)===null||i===void 0||(i=i.ssrcs[0])===null||i===void 0?void 0:i.ssrcId)===t[0].ssrcId})}findFirstClosedMedia(t){return this.sessionDesc.mediaDescriptions.find(n=>Zn()?n.media.port==="0"&&n.media.mediaType===t:n.media.port==="0")}};const dpe=["sdp"];var lr;function v6(t,n){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),i.push.apply(i,a)}return i}function ed(t){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?v6(Object(i),!0).forEach(function(a){V(t,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):v6(Object(i)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(i,a))})}return t}let E6=(lr=class Uf extends Z4{get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get dtlsTransportState(){var n,i;return(n=(i=this.peerConnection.getReceivers()[0])===null||i===void 0||(i=i.transport)===null||i===void 0?void 0:i.state)!==null&&n!==void 0?n:null}get localCodecs(){return[]}set isInRestartIce(n){this._isInRestartIce=n}get isInRestartIce(){return this._isInRestartIce}constructor(n,i,a){super(n,i),V(this,"direction",void 0),V(this,"name",void 0),V(this,"store",void 0),V(this,"spec",void 0),V(this,"peerConnection",void 0),V(this,"initialOffer",void 0),V(this,"transport",void 0),V(this,"statsFilter",void 0),V(this,"localCandidateCount",0),V(this,"_isInRestartIce",!1),V(this,"mutex",new Oi("P2PConnection-mutex")),V(this,"onLocalCandidate",void 0),V(this,"remoteSDP",void 0),V(this,"pendingCandidates",[]),V(this,"localCapabilities",void 0),V(this,"isReady",!1),V(this,"restartCnt",0),V(this,"curTurnServerIndex",0),this.store=i,this.spec=n,this.peerConnection=new RTCPeerConnection(Uf.resolvePCConfiguration(n,i.p2pTransport),{optional:[{googDscp:!0}]}),this.direction=a??Do.SEND_ONLY,this.name=this.direction===Do.SEND_ONLY?"sendP2PConnection":"recvP2PConnection",this.statsFilter=nS(this.peerConnection,ee("STATS_UPDATE_INTERVAL"),void 0,Zn()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1}async establish(n){try{const i=await OI();if(this.localCapabilities=Sf(i),n){const{sdp:a}=n,l=spe(n,dpe),u=function(){const y={audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]},T=tg(arguments.length>2?arguments[2]:void 0,arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},"sendonly"),A={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},D={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},W={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]};if(Qs(T,y,"videoExtensions",A,D,W),Qs(T,y,"videoCodecs",A,D,W),Qs(T,y,"audioExtensions",A,D,W),Qs(T,y,"audioCodecs",A,D,W),ee("RAISE_H264_BASELINE_PRIORITY")){const F=W.videoCodecs.findIndex(U=>U.rtpMap&&U.rtpMap.encodingName.toLocaleLowerCase()==="h264"&&U.fmtp&&U.fmtp.parameters["profile-level-id"]==="42001f");if(F!==-1){const U=W.videoCodecs.findIndex(z=>z.rtpMap&&z.rtpMap.encodingName.toLocaleLowerCase()==="h264");if(U<F){k.debug("raising H264 baseline profile priority");const z=W.videoCodecs[F];W.videoCodecs.splice(F,1),W.videoCodecs.splice(U,0,z)}U!==-1&&ee("FILTER_SEND_H264_BASELINE")&&(A.videoCodecs=A.videoCodecs.filter(z=>!(z.rtpMap&&z.rtpMap.encodingName.toLocaleLowerCase()==="h264"&&z.fmtp&&z.fmtp.parameters["profile-level-id"]!=="42001f")))}}return{send:A,recv:D,sendrecv:W}}({},{},a);this.remoteSDP=new g6({remoteIceParameters:l.iceParameters,remoteDtlsParameters:l.dtlsParameters,candidates:[],remoteRTPCapabilities:u,localCapabilities:this.localCapabilities,direction:this.direction,setup:"actpass",videoCodec:this.store.codec,audioCodec:this.store.audioCodec}),await this.setRemoteDescription({type:"offer",sdp:this.remoteSDP.toString()}),this.isReady=!0;const h=await this.peerConnection.createAnswer();if(!h.sdp)throw new Error("Cannot get answer sdp when trying to establish PeerConnection.");const f=xc(h.sdp);await this.peerConnection.setLocalDescription(h);const g=await m6({},{},h.sdp);this.localCapabilities=Sf(g);const _=this.peerConnection.getTransceivers()[0];return _!=null&&_.receiver&&_.receiver.transport&&this.tryBindTransportEvents(_.receiver.transport),ed(ed({},f),{},{sdp:h.sdp})}{this.peerConnection.addTransceiver("video",{direction:"sendonly"}),this.peerConnection.addTransceiver("audio",{direction:"sendonly"});const a=await this.peerConnection.createOffer();if(!a.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const l=xc(a.sdp);return this.initialOffer=a,ed(ed({},l),{},{sdp:a.sdp})}}catch(i){throw new Ce(K.GET_LOCAL_CONNECTION_PARAMS_FAILED,i.toString())}}async connect(n){try{if(!this.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");await this.peerConnection.setLocalDescription(this.initialOffer);const{sdp:i,iceParameters:a,dtlsParameters:l}=n,u=await m6({},{},i);this.remoteSDP=new g6({remoteIceParameters:a,remoteDtlsParameters:l,candidates:[],remoteRTPCapabilities:u,localCapabilities:this.localCapabilities,direction:this.direction,setup:"active",videoCodec:this.store.codec,audioCodec:this.store.audioCodec}),await this.setRemoteDescription({type:"answer",sdp:this.remoteSDP.toString()});const h=this.peerConnection.getTransceivers()[0];h!=null&&h.sender&&h.sender.transport&&this.tryBindTransportEvents(h.sender.transport)}catch(i){throw new Ce(K.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(i.toString()))}}async addRemoteCandidate(n){try{n&&this.pendingCandidates.push(n),this.peerConnection.remoteDescription&&this.isReady&&(this.pendingCandidates.forEach(i=>{this.peerConnection.addIceCandidate(i)}),this.pendingCandidates=[])}catch(i){throw new Ce(K.ADD_CANDIDATE_FAILED,"P2PConnection.addRemoteCandidate failed; ".concat(i.toString()))}}send(n,i,a){var l=this;return wa(function*(){const u=yield Xt(l.mutex.lock("From P2PConnection.send"));try{if(!l.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");const h=[],f=l.remoteSDP.receive(n,i,a);n.forEach((U,z)=>{if(f[z].needCreateTransceiver){const X=l.peerConnection.addTransceiver(U._mediaStreamTrack,{direction:"sendonly"});h.push(X),U._updateRtpTransceiver(X)}else{const X=l.peerConnection.getTransceivers().find(ue=>ue.mid===f[z].mid);if(!X)throw new Error("cannot find transceiver when sendPeerconnection send, mid is ".concat(f[z].mid));h.push(X),U._updateRtpTransceiver(X)}}),Zn()&&ee("SIMULCAST")===!0&&(yield Xt(l.applySimulcastForFirefox(h,n)));const g=f.map(U=>U.mid),_=yield Xt(l.peerConnection.createOffer()),y=l.mungSendOfferSDP(_.sdp,n,g),T=yr.parse(y),A=g.map(U=>{const z=T.mediaDescriptions.find(X=>X.attributes.mid===U);if(!z)throw new Error("Cannot extract ssrc from mediaDescription.");return wI(z,ee("USE_PUB_RTX"))}),D=h.map((U,z)=>{const X=g[z];return{localSSRC:A[z],id:X}});yield Xt(l.peerConnection.setLocalDescription({type:"offer",sdp:y}));try{yield D}catch(U){const z=l.remoteSDP.toString();throw yield Xt(l.peerConnection.setLocalDescription({type:"offer",sdp:y})),yield Xt(l.peerConnection.setRemoteDescription({type:"answer",sdp:z})),yield Xt(l.stopSending(g,!0)),U}yield Xt(l.applySimulcastEncodings(h,n)),yield Xt(l.applySendEncodings(h,n));const W=l.remoteSDP.toString(),F=l.logSDPExchange(y,"offer","local","send");return F==null||F(W),yield Xt(l.setRemoteDescription({type:"answer",sdp:W})),h.map((U,z)=>{const X=g[z];return{localSSRC:A[z],id:X}})}catch(h){throw h instanceof Ce?h:new Ce(K.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(h.toString()))}finally{u()}})()}async stopSending(n,i){const a=i?void 0:await this.mutex.lock("From P2PConnection.stopSending");try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");const l=this.peerConnection.getTransceivers().filter(g=>n.indexOf(g.mid)!==-1);if(l.length!==n.length)throw new Error("Transceivers' length (".concat(l.length,") doesn't match mids' length (").concat(n.length,") when trying to call P2PConnection.stopSending."));l.map(g=>{var _;g.direction="inactive",(_=g.stop)===null||_===void 0||_.call(g)});const u=await this.peerConnection.createOffer(),h=this.logSDPExchange(u.sdp||"","offer","local","stopSending");await this.peerConnection.setLocalDescription(u),this.remoteSDP.stopReceiving(n);const f=this.remoteSDP.toString();h==null||h(f),await this.setRemoteDescription({type:"answer",sdp:f})}catch(l){throw new Ce(K.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(l.toString()))}finally{a&&a()}}async receive(n,i,a,l){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(n," before remoteSDP created."));const{mid:u,needExchangeSDP:h}=this.remoteSDP.send(n,i,a,l);if(h){const g=this.remoteSDP.toString(),_=this.logSDPExchange(g,"offer","remote","receive");await this.setRemoteDescription({type:"offer",sdp:g});const y=await this.peerConnection.createAnswer(),T=this.mungReceiveAnswerSDP(y.sdp,u,n);_==null||_(T||""),await this.peerConnection.setLocalDescription({type:"answer",sdp:T}),k.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(n," by exchanging SDP."))}else k.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(n," no need to exchange SDP."));const f=this.peerConnection.getTransceivers().find(g=>g.mid===u);if(!f||f.mid===null)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:f.receiver.track,mid:f.mid,transceiver:f}}catch(u){throw new Ce(K.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(u.toString()))}}async mockReceive(n,i,a,l){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(n," before remoteSDP created."));const{mid:u,needExchangeSDP:h}=this.remoteSDP.send(n,i,a,l);if(h){const f=this.remoteSDP.toString(),g=this.logSDPExchange(f,"offer","remote","receive");await this.setRemoteDescription({type:"offer",sdp:f});const _=await this.peerConnection.createAnswer(),y=this.mungReceiveAnswerSDP(_.sdp,u,n);g==null||g(y||""),await this.peerConnection.setLocalDescription({type:"answer",sdp:y}),k.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(n," by exchanging SDP."))}else k.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(n," no need to exchange SDP."))}catch(u){throw new Ce(K.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(u.toString()))}}async stopReceiving(n){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");this.remoteSDP.stopSending(n);const i=this.remoteSDP.toString(),a=this.logSDPExchange(i,"offer","remote","stopReceiving");await this.setRemoteDescription({type:"offer",sdp:i});const l=await this.peerConnection.createAnswer();a==null||a(l.sdp||""),await this.peerConnection.setLocalDescription(l)}catch(i){throw new Ce(K.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(i.toString()))}}async restartICE(n){try{if(this.store.p2pTransport===nh.Auto&&(this.store.p2pTransport=nh.SdRtn,un().supportPCSetConfiguration&&this.peerConnection.setConfiguration(Uf.resolvePCConfiguration(this.spec,this.store.p2pTransport))),this.restartCnt>3&&(this.restartCnt=0,un().supportPCSetConfiguration&&this.peerConnection.setConfiguration(Uf.resolvePCConfiguration(this.spec,this.store.p2pTransport,++this.curTurnServerIndex))),!n){this.restartCnt++,this.isReady=!1;const i=await this.peerConnection.createOffer({iceRestart:!0});if(!i.sdp)throw new Error("Cannot restartICE because restart offer SDP does not exist.");const{iceParameters:a}=xc(i.sdp);return this.store.descriptionStart(),this.direction===Do.SEND_ONLY&&await this.peerConnection.setLocalDescription(i),a}if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");if(this.remoteSDP.restartICE(n),this.store.descriptionStart(),this.direction===Do.RECEIVE_ONLY){this.restartCnt++,await this.setRemoteDescription({type:"offer",sdp:this.remoteSDP.toString()});const i=await this.peerConnection.createAnswer();if(!i.sdp)throw new Error("Cannot get answer sdp when trying to iceRestart.");const{iceParameters:a}=xc(i.sdp);return await this.peerConnection.setLocalDescription(i),a}await this.setRemoteDescription({type:"answer",sdp:this.remoteSDP.toString()}),this.isReady=!0}catch(i){throw new Ce(K.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(i.toString()))}}close(){var n;this.peerConnection.close(),this.peerConnection.onicecandidate=null,(n=this.onConnectionStateChange)===null||n===void 0||n.call(this,"closed"),this.tryUnbindTransportEvents(),this.unbindPCEvents(),this.unbindStatsEvents(),this.transport=void 0,this.statsFilter.destroy()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(n){return this.statsFilter.getVideoIsReady(n)}async updateEncoderConfig(n,i){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");const a=await this.peerConnection.createOffer(),l=this.mungSendOfferSDP(a.sdp,[i],[n]);this.remoteSDP.updateRecvMedia(n,i);const u=this.remoteSDP.toString(),h=this.logSDPExchange(l,"offer","local","updateEncoderConfig");await this.peerConnection.setLocalDescription({type:"offer",sdp:l}),h==null||h(u),await this.peerConnection.setRemoteDescription({type:"answer",sdp:u})}catch(a){throw new Ce(K.EXCHANGE_SDP_FAILED,a.toString())}}async updateSendParameters(n,i){const a=this.peerConnection.getTransceivers().filter(l=>l.mid===n);a.length===1&&(this.isVP8Simulcast(i)?Zn()||await this.applySimulcastEncodings(a,[i]):await this.applySendEncodings(a,[i]))}setStatsRemoteVideoIsReady(n,i){this.statsFilter.setVideoIsReady2(n,i)}async replaceTrack(n,i){const a=this.peerConnection.getTransceivers().find(l=>l.mid===i);a&&await a.sender.replaceTrack(n._mediaStreamTrack)}async getSelectedCandidatePair(){const n=this.peerConnection.getReceivers();if(n.length>0&&n[0].transport&&n[0].transport.iceTransport&&n[0].transport.iceTransport.getSelectedCandidatePair&&n[0].transport.iceTransport.getSelectedCandidatePair()){const i=n[0].transport.iceTransport,{local:a,remote:l}=i.getSelectedCandidatePair();return{local:ed(ed({},Sl),{},{candidateType:a.type,protocol:a.protocol,address:a.address,port:a.port}),remote:ed(ed({},Sl),{},{candidateType:l.type,protocol:l.protocol,address:l.address,port:l.port})}}return this.statsFilter.getSelectedCandidatePair()}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var n,i;Ye(n=["connected","completed"]).call(n,this.peerConnection.iceConnectionState)&&(this.isReady=!1),(i=this.onICEConnectionStateChange)===null||i===void 0||i.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var n;this.peerConnection.connectionState==="connected"&&(this.restartCnt=0),(n=this.onConnectionStateChange)===null||n===void 0||n.call(this,this.peerConnection.connectionState)},this.startICECandidate()}startICECandidate(){this.peerConnection.onicecandidate||(this.localCandidateCount=0,this.peerConnection.onicecandidate=n=>{if(n.candidate){var i;n.candidate.candidate&&((i=this.onLocalCandidate)===null||i===void 0||i.call(this,n.candidate.toJSON())),this.localCandidateCount+=1}else k.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount)})}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(n,i){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;const l={iceServers:[]};var u;return n.iceServers?l.iceServers=n.iceServers:n.turnServer&&n.turnServer.mode!=="off"&&(Bp(n.turnServer.servers)?l.iceServers=n.turnServer.servers:(l.iceServers&&l.iceServers.push(...Uf.turnServerConfigToIceServers(n.turnServer.servers,i,a)),ee("USE_TURN_SERVER_OF_GATEWAY")&&l.iceServers&&n.turnServer.serversFromGateway&&l.iceServers.push(...Uf.turnServerConfigToIceServers(n.turnServer.serversFromGateway,i,a)),Ye(u=[nh.Relay,nh.SdRtn]).call(u,i)&&(l.iceTransportPolicy="relay"),ee("FORCE_TURN_TCP")?l.iceTransportPolicy="relay":n.turnServer.servers.concat(n.turnServer.serversFromGateway||[]).forEach(h=>{h.forceturn&&(l.iceTransportPolicy="relay")}))),ee("ENABLE_ENCODED_TRANSFORM")&&un().supportWebRTCEncodedTransform&&(l.encodedInsertableStreams=!0),k.debug("P2PConnection p2pTransport is ".concat(i)),l}static turnServerConfigToIceServers(n,i){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;const l=[],u=n.filter(f=>f.tcpport);k.debug("P2PConnection turnServers is ".concat(u,", current index is ").concat(a));const h=u.length>a?u[a]:u[0];switch(i){case nh.SdRtn:const f=n.filter(_=>{var y;return Ye(y=_.username).call(y,"glb:")&&_.turnServerURL==_.turnServerURL}),g=f.length>a?f[a]:f[0];g&&(l.push({username:g.username,credential:g.password,credentialType:"password",urls:"turn:".concat(zu(g.turnServerURL),":").concat(g.tcpport,"?transport=udp")}),l.push({username:g.username,credential:g.password,credentialType:"password",urls:"turns:".concat(zu(g.turnServerURL),":").concat(g.tcpport,"?transport=tcp")}));break;case nh.Relay:h&&(l.push({username:h.username,credential:h.password,credentialType:"password",urls:"turn:".concat(h.turnServerURL,":").concat(h.tcpport,"?transport=udp")}),l.push({username:h.username,credential:h.password,credentialType:"password",urls:"turns:".concat(zu(h.turnServerURL),":").concat(h.tcpport,"?transport=tcp")}));break;default:h&&(l.push({username:h.username,credential:h.password,credentialType:"password",urls:"turn:".concat(h.turnServerURL,":").concat(h.tcpport,"?transport=udp")}),l.push({username:h.username,credential:h.password,credentialType:"password",urls:"turns:".concat(zu(h.turnServerURL),":").concat(h.tcpport,"?transport=tcp")}),l.push({username:h.username,credential:h.password,credentialType:"password",urls:"stun:".concat(h.turnServerURL,":").concat(h.tcpport)}))}return l}tryBindTransportEvents(n){if(n){this.transport=n,n.onstatechange=()=>{var a;n!=null&&n.state&&((a=this.onDTLSTransportStateChange)===null||a===void 0||a.call(this,n.state))},n.onerror=a=>{var l;(l=this.onDTLSTransportError)===null||l===void 0||l.call(this,"error"in a?a.error:a)};const i=n.iceTransport;i&&(i.onstatechange=()=>{const a=n==null?void 0:n.iceTransport.state;var l;a&&((l=this.onICETransportStateChange)===null||l===void 0||l.call(this,a))},i.getSelectedCandidatePair&&(i.onselectedcandidatepairchange=()=>{if(i.getSelectedCandidatePair()){const{local:a,remote:l}=i.getSelectedCandidatePair();k.info("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] selectedcandidatepairchange: local ").concat(JSON.stringify({candidateType:a.type,protocol:a.protocol}),", remote ").concat(JSON.stringify({candidateType:l.type,protocol:l.protocol,address:l.address,port:l.port})," )"))}}))}}tryUnbindTransportEvents(){this.transport&&(this.transport.onstatechange=null,this.transport.onerror=null,this.transport.iceTransport&&(this.transport.iceTransport.onstatechange=null))}async updateRtpSenderEncodings(n,i){var a;if(i||(i=this.peerConnection.getSenders().find(y=>y.track===n._mediaStreamTrack)),!i)return k.warn("[".concat(n.getTrackId(),"] no rtpSender found}"));if(this.isVP8Simulcast(n))return k.warn("[updateRtpSenderEncodings] Track is VP8 simulcast, please apply simulcast encodings");if(!un().supportSetRtpSenderParameters)return k.warn("[updateRtpSenderEncodings] Browser not support set rtp-sender parameters");const l={},u={};switch(n._optimizationMode){case"motion":l.degradationPreference="maintain-framerate";break;case"detail":l.degradationPreference="maintain-resolution";break;default:l.degradationPreference="balanced"}if(n._encoderConfig){var h;const{bitrateMax:y,frameRate:T,scaleResolutionDownBy:A}=n._encoderConfig;y&&(u.maxBitrate=1e3*y),Ye(h=n._hints).call(h,ar.LOW_STREAM)&&(T&&(u.maxFramerate=ia(T)),A&&A>=1&&(u.scaleResolutionDownBy=A))}if(ee("DSCP_TYPE")&&Uu()){var f;const y=ee("DSCP_TYPE");Ye(f=["very-low","low","medium","high"]).call(f,y)&&(u.networkPriority=y)}const g=i.getParameters(),_=(a=g.encodings)===null||a===void 0?void 0:a[0];Zn()&&!_&&(l.encodings=[u]),_&&Object.assign(_,u),Object.assign(g,l),k.debug("[".concat(n.getTrackId(),"] updateRtpSenderEncodings: ").concat(JSON.stringify(g.encodings))),await i.setParameters(g)}async applySendEncodings(n,i){try{if(!un().supportSetRtpSenderParameters||n.length!==i.length)return;for(let a=0;a<n.length;a++){const l=n[a],u=i[a];u instanceof nr&&!this.isVP8Simulcast(u)&&await this.updateRtpSenderEncodings(u,l.sender)}}catch{k.debug("[".concat(this.store.clientId,"] Apply RTPSendEncodings failed."))}}mungSendOfferSDP(n,i,a){const l=yr.parse(n);return i.forEach((u,h)=>{const f=a[h],g=l.mediaDescriptions.find(_=>_.attributes.mid===f);g&&(Zu(g,u),AI(g,u,this.store.codec))}),yr.print(l)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=n=>{var i;(i=this.onFirstAudioReceived)===null||i===void 0||i.call(this,n)},this.statsFilter.onFirstVideoReceived=n=>{var i;(i=this.onFirstVideoReceived)===null||i===void 0||i.call(this,n)},this.statsFilter.onFirstAudioDecoded=n=>{var i;(i=this.onFirstAudioDecoded)===null||i===void 0||i.call(this,n)},this.statsFilter.onFirstVideoDecoded=(n,i,a)=>{var l;(l=this.onFirstVideoDecoded)===null||l===void 0||l.call(this,n,i,a)},this.statsFilter.onSelectedLocalCandidateChanged=(n,i)=>{var a;(a=this.onSelectedLocalCandidateChanged)===null||a===void 0||a.call(this,n,i)},this.statsFilter.onSelectedRemoteCandidateChanged=(n,i)=>{var a;(a=this.onSelectedRemoteCandidateChanged)===null||a===void 0||a.call(this,n,i)},this.statsFilter.onFirstVideoDecodedTimeout=n=>{var i;(i=this.onFirstVideoDecodedTimeout)===null||i===void 0||i.call(this,n)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0,this.statsFilter.onFirstVideoDecodedTimeout=void 0}async applySimulcastForFirefox(n,i){if(n.length===i.length)for(let g=0;g<n.length;g++){var a,l,u,h,f;const _=n[g],y=i[g];if(y instanceof nr&&!Ye(a=y._hints).call(a,ar.LOW_STREAM)&&(l=y._encoderConfig)!==null&&l!==void 0&&l.bitrateMax&&((u=y._encoderConfig)===null||u===void 0?void 0:u.bitrateMax)>200&&(h=y._scalabilityMode)!==null&&h!==void 0&&h.numSpatialLayers&&((f=y._scalabilityMode)===null||f===void 0?void 0:f.numSpatialLayers)>1&&this.store.codec==="vp8"){const T={},A={high:1e3*(y._encoderConfig.bitrateMax-50),medium:5e4};T.encodings=[{rid:"m",active:!0,maxBitrate:A.medium,scaleResolutionDownBy:4},{rid:"h",active:!0,maxBitrate:A.high}];const D=_.sender.getParameters();await _.sender.setParameters(Object.assign(D,T))}}}async applySimulcastEncodings(n,i){if(!Zn()&&n.length===i.length)for(let a=0;a<n.length;a++){const l=i[a];if(l instanceof nr&&this.isVP8Simulcast(l)){const u=n[a],h={},f={high:1e3*(l._encoderConfig.bitrateMax-50),medium:5e4};h.encodings=[{active:!0,adaptivePtime:!1,networkPriority:"high",priority:"high",maxBitrate:f.high},{active:!0,adaptivePtime:!1,networkPriority:"low",priority:"low",maxBitrate:f.medium,scaleResolutionDownBy:4}];const g=u.sender.getParameters();await u.sender.setParameters(Object.assign(g,h))}}}isVP8Simulcast(n){var i,a,l,u,h;return!!(n instanceof nr&&ee("SIMULCAST")&&this.store.codec==="vp8"&&!Ye(i=n._hints).call(i,ar.LOW_STREAM)&&(a=n._encoderConfig)!==null&&a!==void 0&&a.bitrateMax&&((l=n._encoderConfig)===null||l===void 0?void 0:l.bitrateMax)>200&&(u=n._scalabilityMode)!==null&&u!==void 0&&u.numSpatialLayers&&((h=n._scalabilityMode)===null||h===void 0?void 0:h.numSpatialLayers)>1)}logSDPExchange(n,i,a,l){if(ee("SDP_LOGGING"))return k.upload("[".concat(this.store.clientId,"] exchanging ").concat(a," ").concat(i," SDP during P2PConnection.").concat(l,`
`),n),i==="offer"?u=>{this.logSDPExchange(u,"answer",a==="local"?"remote":"local",l)}:void 0}async muteLocal(n){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");const i=this.peerConnection.getTransceivers().filter(h=>h.mid&&n.indexOf(h.mid)!==-1);if(i.length!==n.length)throw new Error("Transceivers' length doesn't match mids' length.");i.map(h=>{h.direction="inactive"});const a=await this.peerConnection.createOffer(),l=this.logSDPExchange(a.sdp||"","offer","local","muteLocal");await this.peerConnection.setLocalDescription(a),this.remoteSDP.muteRemote(n);const u=this.remoteSDP.toString();l==null||l(u),await this.setRemoteDescription({type:"answer",sdp:u})}catch(i){throw new Ce(K.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(i.toString()))}}async unmuteLocal(n){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");const i=this.peerConnection.getTransceivers().filter(h=>h.mid&&n.indexOf(h.mid)!==-1);if(i.length!==n.length)throw new Error("Transceivers' length doesn't match mids' length.");i.map(async h=>{h.direction="sendonly"});const a=await this.peerConnection.createOffer(),l=this.logSDPExchange(a.sdp||"","offer","local","unmuteLocal");await this.peerConnection.setLocalDescription(a),this.remoteSDP.unmuteRemote(n);const u=this.remoteSDP.toString();l==null||l(u),await this.setRemoteDescription({type:"answer",sdp:u})}catch(i){throw new Ce(K.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(i.toString()))}}async getRemoteSSRC(n,i){var a,l;if(i=(a=i)!==null&&a!==void 0?a:(l=this.currentRemoteDescription)===null||l===void 0?void 0:l.sdp){var u;const h=(u=yr.parse(i).mediaDescriptions.find(f=>f.attributes.mid===n))===null||u===void 0?void 0:u.attributes.ssrcs;return h==null?void 0:h[0].ssrcId}}async setRemoteDescription(n){var i;await this.peerConnection.setRemoteDescription(n),Ye(i=["connected","completed"]).call(i,this.peerConnection.iceConnectionState)||(this.isReady=!0,this.addRemoteCandidate())}mungReceiveAnswerSDP(n,i,a){const l=yr.parse(n),u=l.mediaDescriptions.find(h=>h.attributes.mid===i);return u&&a===ut.AUDIO&&u.media.mediaType==="audio"&&Nc(u),yr.print(l)}},$e(lr.prototype,"establish",[Zs],Object.getOwnPropertyDescriptor(lr.prototype,"establish"),lr.prototype),$e(lr.prototype,"connect",[Zs],Object.getOwnPropertyDescriptor(lr.prototype,"connect"),lr.prototype),$e(lr.prototype,"receive",[Zs],Object.getOwnPropertyDescriptor(lr.prototype,"receive"),lr.prototype),$e(lr.prototype,"mockReceive",[Zs],Object.getOwnPropertyDescriptor(lr.prototype,"mockReceive"),lr.prototype),$e(lr.prototype,"stopReceiving",[Zs],Object.getOwnPropertyDescriptor(lr.prototype,"stopReceiving"),lr.prototype),$e(lr.prototype,"restartICE",[Zs],Object.getOwnPropertyDescriptor(lr.prototype,"restartICE"),lr.prototype),$e(lr.prototype,"close",[Zs],Object.getOwnPropertyDescriptor(lr.prototype,"close"),lr.prototype),$e(lr.prototype,"updateEncoderConfig",[Zs],Object.getOwnPropertyDescriptor(lr.prototype,"updateEncoderConfig"),lr.prototype),$e(lr.prototype,"updateSendParameters",[Zs],Object.getOwnPropertyDescriptor(lr.prototype,"updateSendParameters"),lr.prototype),$e(lr.prototype,"replaceTrack",[Zs],Object.getOwnPropertyDescriptor(lr.prototype,"replaceTrack"),lr.prototype),$e(lr.prototype,"muteLocal",[Zs],Object.getOwnPropertyDescriptor(lr.prototype,"muteLocal"),lr.prototype),$e(lr.prototype,"unmuteLocal",[Zs],Object.getOwnPropertyDescriptor(lr.prototype,"unmuteLocal"),lr.prototype),lr);function Zs(t,n,i){const a=t[n];if(typeof a!="function")throw new Error("Cannot use mutex on object property.");return i.value=async function(){const l=this.mutex,u=await l.lock("From P2PConnection.".concat(n));try{for(var h=arguments.length,f=new Array(h),g=0;g<h;g++)f[g]=arguments[g];return await a.apply(this,f)}finally{u()}},i}function NI(t,n){let i=document.createElement("video"),a=document.createElement("canvas");i.setAttribute("style","display:none"),a.setAttribute("style","display:none"),i.setAttribute("muted",""),i.muted=!0,i.setAttribute("autoplay",""),i.autoplay=!0,i.setAttribute("playsinline",""),a.width=ia(n.width),a.height=ia(n.height);const l=ia(n.framerate||15);document.body.append(i),document.body.append(a);let u=t._mediaStreamTrack;i.srcObject=new MediaStream([u]),i.play();const h=a.getContext("2d");if(!h)throw new me(K.UNEXPECTED_ERROR,"can not get canvas context");const f=un(),g=a.captureStream(f.supportRequestFrame?0:l).getVideoTracks()[0];g.canvas||(g.canvas=a),a.startCapture=()=>{if(!i)return a.stopCapture&&a.stopCapture();if(i.paused&&i.play(),i.videoHeight>2&&i.videoWidth>2){const y=i.videoWidth,T=i.videoHeight/y,A=a.width*T;Math.abs(A-a.height)>=2&&(k.debug("adjust low stream resolution","".concat(a.width,"x").concat(a.height," -> ").concat(a.width,"x").concat(A)),a.height=A)}h.drawImage(i,0,0,a.width,a.height),g.requestFrame&&g.requestFrame(),u!==t._mediaStreamTrack&&(u=t._mediaStreamTrack,i.srcObject=new MediaStream([u]))},a.stopCapture=hI(()=>a.startCapture&&a.startCapture(),l);const _=g.stop;return g.stop=()=>{_.call(g),i&&(i.remove(),i.srcObject=null,i=null),a&&(a.width=0,a.remove(),a.stopCapture&&a.stopCapture(),a.startCapture=void 0,a.stopCapture=void 0,a=null),k.debug("clean low stream renderer")},g}var aS=function(t){return t[t.HEIGHT=2033]="HEIGHT",t[t.FRAME_RATE=2034]="FRAME_RATE",t[t.WIDTH=2035]="WIDTH",t}(aS||{}),bi=function(t){return t[t.FRAME_RATE=2002]="FRAME_RATE",t[t.WIDTH=2003]="WIDTH",t[t.HEIGHT=2004]="HEIGHT",t[t.PACKAGE_LOST=2005]="PACKAGE_LOST",t[t.AVG_ENCODE=2007]="AVG_ENCODE",t[t.NACKS=2009]="NACKS",t[t.PLIS=2010]="PLIS",t[t.FIRS=2011]="FIRS",t[t.BITRATE=2012]="BITRATE",t[t.PACKAGE_RATE=2031]="PACKAGE_RATE",t[t.ADAPTATION=2032]="ADAPTATION",t[t.ACTUAL_ENCODED=2060]="ACTUAL_ENCODED",t[t.BANDWIDTH=2061]="BANDWIDTH",t[t.RETRANSMIT=2062]="RETRANSMIT",t[t.TARGET_ENCODED=2064]="TARGET_ENCODED",t[t.TRANSMIT=2066]="TRANSMIT",t[t.FREEZE=2082]="FREEZE",t[t.DISABLED=2095]="DISABLED",t[t.PLAYER_STATUS=2128]="PLAYER_STATUS",t[t.QP_SUM=2143]="QP_SUM",t}(bi||{}),yh=function(t){return t[t.BITRATE=2069]="BITRATE",t[t.PACKAGE_LOST=2070]="PACKAGE_LOST",t[t.PACKAGE_RATE=2071]="PACKAGE_RATE",t[t.HEIGHT=2073]="HEIGHT",t[t.FRAME_RATE=2075]="FRAME_RATE",t[t.WIDTH=2077]="WIDTH",t}(yh||{}),ao=function(t){return t[t.JITTER=-1]="JITTER",t[t.PACKAGE_LOST=2014]="PACKAGE_LOST",t[t.WIDTH=2018]="WIDTH",t[t.HEIGHT=2019]="HEIGHT",t[t.FRAME_RATE=2020]="FRAME_RATE",t[t.JITTER_BUFFER=2023]="JITTER_BUFFER",t[t.CURRENT_DELAY=2024]="CURRENT_DELAY",t[t.NACKS=2026]="NACKS",t[t.PLIS=2027]="PLIS",t[t.FIRS=2028]="FIRS",t[t.BITRATE=2029]="BITRATE",t[t.PACKAGE_RATE=2078]="PACKAGE_RATE",t[t.FREEZE=2084]="FREEZE",t[t.DISABLED=2101]="DISABLED",t[t.PLAYER_STATUS=2129]="PLAYER_STATUS",t[t.QP_SUM=2144]="QP_SUM",t[t.I_FRAME_DELAY=2149]="I_FRAME_DELAY",t}(ao||{}),Ch=function(t){return t[t.FRAME_RATE_DECODE=2021]="FRAME_RATE_DECODE",t[t.FRAME_RATE_RENDER=2022]="FRAME_RATE_RENDER",t[t.FRAME_RATE_OUTPUT=2155]="FRAME_RATE_OUTPUT",t[t.FREEZE_TIME=2109]="FREEZE_TIME",t[t.FREEZE_TIME_RENDER=2147]="FREEZE_TIME_RENDER",t[t.FREEZE_DURATION=2156]="FREEZE_DURATION",t}(Ch||{}),_6=function(t){return t[t.PCM_LEVEL=2104]="PCM_LEVEL",t}(_6||{}),td=function(t){return t[t.PACKAGE_LOST=-1]="PACKAGE_LOST",t[t.LEVEL=2038]="LEVEL",t[t.BITRATE=2039]="BITRATE",t[t.PACKAGE_RATE=2040]="PACKAGE_RATE",t[t.AEC_RETURN_LOSS=2041]="AEC_RETURN_LOSS",t[t.AEC_RETURN_LOSS_ENH=2042]="AEC_RETURN_LOSS_ENH",t[t.FREEZE=2081]="FREEZE",t[t.DISABLED=2096]="DISABLED",t}(td||{}),ec=function(t){return t[t.BITRATE=2044]="BITRATE",t[t.PACKAGE_LOST=2045]="PACKAGE_LOST",t[t.PACKAGE_RATE=2046]="PACKAGE_RATE",t[t.CURRENT_DELAY=2047]="CURRENT_DELAY",t[t.JITTER_BUFFER=2054]="JITTER_BUFFER",t[t.JITTER=2055]="JITTER",t[t.FREEZE=2083]="FREEZE",t[t.DISABLED=2102]="DISABLED",t[t.PCM_LEVEL=2105]="PCM_LEVEL",t[t.PLAYER_STATUS=2130]="PLAYER_STATUS",t[t.CONCEALED_SAMPLES=2148]="CONCEALED_SAMPLES",t}(ec||{}),S6=function(t){return t[t.FREEZE_TIME=-1]="FREEZE_TIME",t[t.LEVEL=2043]="LEVEL",t}(S6||{}),ms=function(t){return t[t.RTT=2006]="RTT",t[t.CONN_TYPE=801]="CONN_TYPE",t}(ms||{});const Zl=1e3,bh=3;function Zt(t,n,i){i!=null&&Number.isFinite(i)&&(t[n]=Math.round(Math.max(0,i)))}function y6(t){const n={[ms.CONN_TYPE]:0,[ms.RTT]:t.rtt};switch(t.selectedCandidatePair.localCandidate.candidateType){case"relay":{const i=t.selectedCandidatePair.localCandidate.relayProtocol;i==="udp"&&(n[ms.CONN_TYPE]=1),i==="tcp"&&(n[ms.CONN_TYPE]=3),i==="tls"&&(n[ms.CONN_TYPE]=4);break}case"srflx":n[ms.CONN_TYPE]=2}return n}function C6(t){let n=0;switch(t){case"none":n=0;break;case"cpu":n=1;break;case"bandwidth":n=2;break;case"other":n=3}return n}class b6 extends _r{constructor(n){super(),V(this,"store",void 0),V(this,"uploadWRTCStatsTimer",void 0),V(this,"uploadOutboundDenoiserStatsTimer",void 0),V(this,"uploadExtStatsTimer",void 0),V(this,"uploadExtUsageStatsTimer",void 0),V(this,"uploadInboundExtStatsTimer",void 0),V(this,"requestStats",void 0),V(this,"requestTransportStats",void 0),V(this,"requestLocalMedia",void 0),V(this,"requestRemoteMedia",void 0),V(this,"requestAllTracks",void 0),V(this,"requestVideoIsReady",void 0),V(this,"requestUploadStats",void 0),V(this,"requestUpload",void 0),V(this,"uploadOutboundStarted",!1),V(this,"uploadInboundStarted",!1),V(this,"uploadTransportStarted",!1),V(this,"uploadExtensionUsageStarted",!1),V(this,"lastRecvStats",void 0),V(this,"lastSendStats",void 0),V(this,"lastFullRecvStats",void 0),V(this,"lastFullSendStats",void 0),V(this,"needUploadRenderFreezeTime",!0),this.store=n}uploadWRTCStats(n){if(!this.requestStats||!this.requestUploadStats)return;let i,a;if(this.uploadTransportStarted&&(i=this.requestStats(),this.store.useP2P&&(a=this.requestStats(!0))),!i&&this.uploadOutboundStarted&&(i=this.requestStats()),!a&&this.uploadInboundStarted&&(a=this.requestStats(!0)),i||a){const l={};if(this.uploadTransportStarted&&i){const u=this.getTransportStats(i,a,n);u&&(l.misc=[u])}if(this.uploadOutboundStarted&&i){const u=this.getOutboundStats(i,n?this.lastSendStats:this.lastFullSendStats,n);u&&(l.outbound=[u])}if(this.uploadInboundStarted&&a){const u=this.getInboundStats(a,n?this.lastRecvStats:this.lastFullRecvStats,n);u&&(l.inbound=u)}this.requestUploadStats(l)}this.lastRecvStats=a,this.lastSendStats=i,n||(this.lastFullRecvStats=a,this.lastFullSendStats=i)}startUploadWRTCStats(){if(this.uploadWRTCStatsTimer)return;let n=1;this.uploadWRTCStatsTimer=window.setInterval(()=>{if(!this.uploadTransportStarted&&!this.uploadInboundStarted&&!this.uploadOutboundStarted)return this.stopUploadWRTCStats();this.uploadWRTCStats(n!==bh),++n===bh+1&&(n=1)},Zl)}stopUploadWRTCStats(){window.clearInterval(this.uploadWRTCStatsTimer),this.uploadWRTCStatsTimer=void 0,this.lastSendStats&&(this.lastSendStats.videoSend=[],this.lastSendStats.audioSend=[],this.lastSendStats=void 0),this.lastRecvStats&&(this.lastRecvStats.videoRecv=[],this.lastRecvStats.audioRecv=[],this.lastRecvStats=void 0)}getTransportStats(n,i,a){if(!this.requestStats)return;if(a)return n.rtt==null?void 0:{addition:{[ms.RTT]:n.rtt,[ms.CONN_TYPE]:void 0}};const l=y6(n);if(this.store.useP2P){if(i){const u=y6(i);l[ms.CONN_TYPE]+=u[ms.CONN_TYPE]<<3}l[ms.CONN_TYPE]+=110}else l[ms.CONN_TYPE]+=100;return{addition:l}}getOutboundStats(n,i,a){if(!this.requestUploadStats||!this.requestLocalMedia)return;const l=this.requestLocalMedia();if(!l||l.length===0)return;let u,h,f;return l.forEach(g=>{let[_,{track:y,ssrcs:T}]=g;switch(_){case Le.LocalVideoLowTrack:case Le.LocalVideoTrack:if(_===Le.LocalVideoTrack){const A=function(F,U,z,X,ue){const pe=U.videoSend.find(tt=>tt.ssrc===F);if(!pe)return;const Ee={},{sentFrame:Se,inputFrame:Re}=pe;if(Re&&Se){const tt=Re.frameRate,ln=Se.frameRate;Ee[bi.FREEZE]=function(Fn,sr){let Jr=!0;return Jr=!(Fn<=5)&&(Fn<=10?sr<3:Fn<=20?sr<4:sr<5),Jr}(tt,ln)?1:0}if(Zt(Ee,bi.QP_SUM,pe.qpSumPerFrame),ue)return Ee;switch(Se&&(Zt(Ee,bi.HEIGHT,Se.height),Zt(Ee,bi.WIDTH,Se.width),Zt(Ee,bi.FRAME_RATE,Se.frameRate)),Ee[bi.DISABLED]=X._originMediaStreamTrack&&!X._originMediaStreamTrack.enabled||X._mediaStreamTrack&&!X._mediaStreamTrack.enabled?1:0,pe.adaptionChangeReason){case"none":Ee[bi.ADAPTATION]=0;break;case"cpu":Ee[bi.ADAPTATION]=1;break;case"bandwidth":Ee[bi.ADAPTATION]=2;break;case"other":Ee[bi.ADAPTATION]=3}let Ae=0;pe.adaptionChangeReason&&(Ae+=C6(pe.adaptionChangeReason)),U.qualityLimitationReason&&(Ae+=C6(U.qualityLimitationReason)<<3),Ee[bi.ADAPTATION]=Ae,Ee[bi.PLAYER_STATUS]=uI[X._player?X._player.videoElementStatus:"uninit"],Zt(Ee,bi.NACKS,pe.nacksCount),Zt(Ee,bi.PLIS,pe.plisCount),Zt(Ee,bi.FIRS,pe.firsCount),Zt(Ee,bi.AVG_ENCODE,pe.avgEncodeMs);const Pe=z&&z.videoSend.find(tt=>tt.ssrc===F);if(Pe){let tt=ue?Zl:Zl*bh;Pe.timestamp&&pe.timestamp&&(tt=pe.timestamp-Pe.timestamp),Pe.packets!=null&&pe.packets!=null&&Zt(Ee,bi.PACKAGE_RATE,1e3*(pe.packets-Pe.packets)/tt),pe.packetsLost!=null&&Pe.packetsLost!=null&&Zt(Ee,bi.PACKAGE_LOST,pe.packetsLost-Pe.packetsLost),Pe.bytes!=null&&pe.bytes!=null&&Zt(Ee,bi.BITRATE,8*(pe.bytes-Pe.bytes)/tt)}return Ee}(T[0].ssrcId,n,i,y,a),D=a?null:function(F,U,z){const X=U.videoSend.find(Ae=>Ae.ssrc===F);if(!X)return null;const ue={},pe=X.inputFrame,Ee=pe&&pe.height||z&&z.videoHeight||0,Se=pe&&pe.width||z&&z.videoWidth||0,Re=pe&&pe.frameRate||0;return Zt(ue,aS.HEIGHT,Ee),Zt(ue,aS.WIDTH,Se),Zt(ue,aS.FRAME_RATE,Re),ue}(T[0].ssrcId,n,y),W=a?null:function(F){const U={};return Zt(U,bi.RETRANSMIT,F.bitrate.retransmit),Zt(U,bi.TARGET_ENCODED,F.bitrate.targetEncoded),Zt(U,bi.ACTUAL_ENCODED,F.bitrate.actualEncoded),Zt(U,bi.TRANSMIT,F.bitrate.transmit),Zt(U,bi.BANDWIDTH,F.sendBandwidth),U}(n);h=Object.assign({},A,D,W)}else f=a?void 0:function(A,D,W){const F=D.videoSend.find(X=>X.ssrc===A);if(!F)return;const U={},z=F.sentFrame;if(z&&(Zt(U,yh.HEIGHT,z.height),Zt(U,yh.WIDTH,z.width),Zt(U,yh.FRAME_RATE,z.frameRate)),W){const X=W.videoSend.find(ue=>ue.ssrc===A);if(X){let ue=Zl*bh;X.timestamp&&F.timestamp&&(ue=F.timestamp-X.timestamp),X.packets!=null&&F.packets!=null&&Zt(U,yh.PACKAGE_RATE,1e3*(F.packets-X.packets)/ue),F.packetsLost!=null&&X.packetsLost!=null&&Zt(U,yh.PACKAGE_LOST,F.packetsLost-X.packetsLost),X.bytes!=null&&F.bytes!=null&&Zt(U,yh.BITRATE,8*(F.bytes-X.bytes)/ue)}}return U}(T[0].ssrcId,n,i);break;case Le.LocalAudioTrack:u=a?void 0:function(A,D,W,F){const U=D.audioSend.find(Ee=>Ee.ssrc===A);if(!U)return;const z={};z[td.DISABLED]=F._originMediaStreamTrack&&!F._originMediaStreamTrack.enabled||F._mediaStreamTrack&&!F._mediaStreamTrack.enabled?1:0;const X=100*F._source.getAccurateVolumeLevel(),ue=U.inputLevel;if(ue!=null){const Ee=Math.ceil(50*Math.log10(100*ue+1));Zt(z,td.LEVEL,Ee)}Zt(z,_6.PCM_LEVEL,X),Zt(z,td.AEC_RETURN_LOSS,U.aecReturnLoss),Zt(z,td.AEC_RETURN_LOSS_ENH,U.aecReturnLossEnhancement),z[td.FREEZE]=0;const pe=W&&W.audioSend.find(Ee=>Ee.ssrc===A);if(pe){let Ee=Zl*bh;pe.timestamp&&U.timestamp&&(Ee=U.timestamp-pe.timestamp),pe.bytes!=null&&U.bytes!=null&&Zt(z,td.BITRATE,8*(U.bytes-pe.bytes)/Ee),pe.packets!=null&&U.packets!=null&&Zt(z,td.PACKAGE_RATE,1e3*(U.packets-pe.packets)/Ee)}return z}(T[0].ssrcId,n,i,y)}}),{high:h,low:f,audio:u}}getInboundStats(n,i,a){if(!this.requestRemoteMedia)return;const l=this.requestRemoteMedia()||[],u=[];return l.forEach(h=>{let[f,g]=h;const _={peer:f.uid};if(g.has(ut.VIDEO)&&f.videoTrack){const y=f._videoSSRC&&this.requestVideoIsReady&&this.requestVideoIsReady(f._videoSSRC)||!1,T=f.videoTrack?function(A,D,W,F,U,z,X){var ue;const pe=D.videoRecv.find(ln=>ln.ssrc===A);if(!pe)return;const Ee={},{receivedFrame:Se,outputFrame:Re,decodeFrameRate:Ae}=pe,Pe=W&&W.videoRecv.find(ln=>ln.ssrc===A);if(Ee[ao.FREEZE]=U&&ng.isRemoteVideoFreeze(F,pe,Pe)?1:0,Zt(Ee,Ch.FRAME_RATE_DECODE,Ae),Zt(Ee,ao.QP_SUM,pe.qpSumPerFrame),pe.framesRateFirefox&&Zt(Ee,ao.FRAME_RATE,pe.framesRateFirefox),Se&&Zt(Ee,ao.FRAME_RATE,Se.frameRate),Pe){const ln=D.timestamp-W.timestamp||(X?Zl:bh*Zl);pe.packetsLost!=null&&Pe.packetsLost!=null&&Zt(Ee,ao.PACKAGE_LOST,pe.packetsLost-Pe.packetsLost),Pe.bytes!=null&&pe.bytes!=null&&Zt(Ee,ao.BITRATE,8*(pe.bytes-Pe.bytes)/ln),Pe.packets!=null&&pe.packets!=null&&Zt(Ee,ao.PACKAGE_RATE,1e3*(pe.packets-Pe.packets)/ln)}if(X)return Ee;Se?(Zt(Ee,ao.HEIGHT,Se.height),Zt(Ee,ao.WIDTH,Se.width)):F&&(Zt(Ee,ao.HEIGHT,F._videoHeight||0),Zt(Ee,ao.WIDTH,F._videoWidth||0)),Re&&Zt(Ee,Ch.FRAME_RATE_OUTPUT,Re.frameRate);const tt=(ue=F._player)===null||ue===void 0?void 0:ue.rendFrameRate.toFixed(0);if(tt&&Zt(Ee,Ch.FRAME_RATE_RENDER,+tt),Zt(Ee,ao.JITTER_BUFFER,pe.jitterBufferMs),Zt(Ee,ao.CURRENT_DELAY,pe.currentDelayMs),Zt(Ee,ao.FIRS,pe.firsCount),Zt(Ee,ao.NACKS,pe.nacksCount),Zt(Ee,ao.PLIS,pe.plisCount),F){Ee[ao.DISABLED]=F._originMediaStreamTrack.enabled&&F._mediaStreamTrack.enabled?0:1;const ln=F._player;if(ln){const{freezeTimeCounterList:Fn,renderFreezeAccTime:sr,videoElementStatus:Jr}=ln;if(Fn&&Fn.length>0&&Zt(Ee,Ch.FREEZE_TIME,Fn.splice(0,1)[0]),z&&Ql.visibility==="visible"&&Jr===_o.PLAYING&&un().supportRequestVideoFrameCallback){const Or=Math.min(6e3,sr);ln.renderFreezeAccTime=Math.max(0,sr-Or),Zt(Ee,Ch.FREEZE_TIME_RENDER,Or)}if(typeof pe.totalFreezesDuration=="number"){const Or=Pe&&Pe.totalFreezesDuration?pe.totalFreezesDuration-Pe.totalFreezesDuration:pe.totalFreezesDuration;Zt(Ee,Ch.FREEZE_DURATION,1e3*Or)}}}if(Ee[ao.PLAYER_STATUS]=uI[F._player?F._player.videoElementStatus:"uninit"],Pe&&pe.totalInterFrameDelay!==void 0&&pe.totalSquaredInterFrameDelay!==void 0&&Pe.totalInterFrameDelay!==void 0&&Pe.totalSquaredInterFrameDelay!==void 0){const ln=pe.totalInterFrameDelay-Pe.totalInterFrameDelay,Fn=pe.totalSquaredInterFrameDelay-Pe.totalSquaredInterFrameDelay,sr=pe.framesDecodeCount-Pe.framesDecodeCount,Jr=ln/sr*1e3,Or=Math.round(1e3*Math.sqrt((Fn-Math.pow(ln,2)/sr)/sr));!isNaN(Or)&&Jr+Or>Math.max(3*Jr,Jr+150)&&(Ee[ao.I_FRAME_DELAY]=Or)}return Ee}(f._videoSSRC,n,i,f.videoTrack,y===!0,this.needUploadRenderFreezeTime,a):void 0;T&&(_.video=T)}if(g.has(ut.AUDIO)&&f.audioTrack){const y=f.audioTrack?function(T,A,D,W,F){const U=A.audioRecv.find(Pe=>Pe.ssrc===T);if(!U)return;const z={},X=D&&D.audioRecv.find(Pe=>Pe.ssrc===T),{receivedFrames:ue,droppedFrames:pe}=U;var Ee,Se;if(Zt(z,ec.JITTER,U.jitterMs),ue!=null&&pe!=null&&(z[ec.FREEZE]=(Se=pe,(Ee=ue)===0||100*Se/Ee>20?1:0)),X){const Pe=A.timestamp-D.timestamp||(F?Zl:Zl*bh);U.packets!=null&&X.packets!=null&&Zt(z,ec.PACKAGE_RATE,1e3*(U.packets-X.packets)/Pe),X.bytes!=null&&U.bytes!=null&&Zt(z,ec.BITRATE,8*(U.bytes-X.bytes)/Pe),U.packetsLost!=null&&X.packetsLost!=null&&Zt(z,ec.PACKAGE_LOST,U.packetsLost-X.packetsLost)}if(F)return z;const Re=100*W._source.getAccurateVolumeLevel(),Ae=U.outputLevel;if(Ae!=null){const Pe=Math.ceil(50*Math.log10(100*Ae+1));Zt(z,S6.LEVEL,Pe)}if(Zt(z,ec.PCM_LEVEL,Re),W&&(z[ec.DISABLED]=W._originMediaStreamTrack.enabled&&W._mediaStreamTrack.enabled?0:1),Zt(z,ec.JITTER_BUFFER,U.jitterBufferMs),Zt(z,ec.CURRENT_DELAY,U.jitterBufferMs),z[ec.PLAYER_STATUS]=uI[qo.getPlayerState(W.getTrackId())],X){const Pe=U.concealedSamples-X.concealedSamples;Pe>0&&Zt(z,ec.CONCEALED_SAMPLES,Pe)}return z}(f._audioSSRC,n,i,f.audioTrack,a):void 0;y&&(_.audio=y)}(_.video||_.audio)&&u.push(_)}),this.needUploadRenderFreezeTime=!this.needUploadRenderFreezeTime,u}startUploadTransportStats(){this.uploadTransportStarted=!0,this.uploadWRTCStatsTimer||this.startUploadWRTCStats()}stopUploadTransportStats(){this.uploadTransportStarted=!1}startUploadOutboundStats(){this.uploadOutboundStarted||(this.uploadOutboundStarted=!0,this.uploadWRTCStatsTimer||this.startUploadWRTCStats(),this.uploadOutboundDenoiserStatsTimer&&window.clearInterval(this.uploadOutboundDenoiserStatsTimer),this.uploadOutboundDenoiserStatsTimer=window.setInterval(()=>{if(!this.requestAllTracks||!this.requestUpload)return;const n=(this.requestAllTracks()||[]).find(i=>i instanceof J_);if(n&&n._external.getDenoiserStats){const i=n._external.getDenoiserStats();i&&this.requestUpload(ih.DENOISER_STATS,i)}},2e3),this.uploadExtStatsTimer&&window.clearInterval(this.uploadExtStatsTimer),this.uploadExtStatsTimer=window.setInterval(()=>{!this.requestAllTracks||!this.requestUpload||this.requestAllTracks().forEach(n=>{n.getProcessorStats().forEach(i=>{this.requestUpload&&this.requestUpload(i.type,i.stats)})})},2e3))}stopUploadOutboundStats(){this.uploadOutboundStarted&&(this.uploadOutboundStarted=!1,this.lastSendStats&&(this.lastSendStats.videoSend=[],this.lastSendStats.audioSend=[],this.lastSendStats=void 0),this.uploadOutboundDenoiserStatsTimer&&window.clearInterval(this.uploadOutboundDenoiserStatsTimer),this.uploadOutboundDenoiserStatsTimer=void 0)}startUploadInboundStats(){this.uploadInboundStarted||(this.uploadInboundStarted=!0,this.uploadWRTCStatsTimer||this.startUploadWRTCStats(),this.uploadInboundExtStatsTimer&&window.clearInterval(this.uploadInboundExtStatsTimer),this.uploadInboundExtStatsTimer=window.setInterval(()=>{!this.requestUpload||!this.requestRemoteMedia||(this.requestRemoteMedia()||[]).forEach(n=>{let[i,a]=n;a.has(ut.VIDEO)&&i.videoTrack&&i.videoTrack.getProcessorStats().forEach(l=>{this.requestUpload&&this.requestUpload(l.type,l.stats)}),a.has(ut.AUDIO)&&i.audioTrack&&i.audioTrack.getProcessorStats().forEach(l=>{this.requestUpload&&this.requestUpload(l.type,l.stats)})})},2e3))}stopUploadInboundStats(){this.uploadInboundStarted&&(this.uploadInboundStarted=!1,this.lastRecvStats&&(this.lastRecvStats.videoRecv=[],this.lastRecvStats.audioRecv=[],this.lastRecvStats=void 0))}startUploadExtensionUsageStats(){if(this.uploadExtensionUsageStarted)return;this.uploadExtensionUsageStarted=!0,this.uploadExtUsageStatsTimer&&window.clearInterval(this.uploadExtUsageStatsTimer);const n=new Map;this.uploadExtUsageStatsTimer=window.setInterval(async()=>{const i=Date.now(),a={connectionInterval:ee("EXTENSION_USAGE_UPLOAD_INTERVAL")/1e3,details:[],lts:i};let l=[];const u=this.requestAllTracks&&this.requestAllTracks()||[];for(const _ of u)!_.muted&&_.enabled&&(l=l.concat(await _.getProcessorUsage()));const h=this.requestRemoteMedia&&this.requestRemoteMedia()||[];for(const[_,y]of h)y.has(ut.VIDEO)&&_.videoTrack&&(l=l.concat(await _.videoTrack.getProcessorUsage())),y.has(ut.AUDIO)&&_.audioTrack&&(l=l.concat(await _.audioTrack.getProcessorUsage()));if(l.length===0)return;a.details=function(_,y){const T={};for(const{id:F,value:U,level:z,direction:X}of _){var A;const ue=(A=y.get(F))!==null&&A!==void 0?A:0,pe=U===2?ue+ee("EXTENSION_USAGE_UPLOAD_INTERVAL")/1e3:ue;var D,W;y.set(F,pe),T[F]?(U===2&&(T[F].value=U),z>T[F].level&&(T[F].level=z),X==="remote"&&(T[F].remoteUidCount+=1),T[F].totalTs=(D=y.get(F))!==null&&D!==void 0?D:0):T[F]={value:U,level:z,remoteUidCount:X==="local"?0:1,totalTs:(W=y.get(F))!==null&&W!==void 0?W:0}}return Object.keys(T).map(F=>{const{level:U,value:z,totalTs:X}=T[F];return{id:F,level:U,value:z,totalTs:X}})}(l,n);const f=Date.now(),g=f>i?f:i+1;this.requestUpload&&this.requestUpload(ih.EXTENSION_USAGE_STATS,{usageStats:a,sendTs:g})},ee("EXTENSION_USAGE_UPLOAD_INTERVAL"))}stopUploadExtensionUsageStats(){this.uploadExtensionUsageStarted&&(this.uploadExtensionUsageStarted=!1,this.uploadExtUsageStatsTimer&&window.clearInterval(this.uploadExtUsageStatsTimer),this.uploadExtUsageStatsTimer=void 0)}}class nd{get hasVideo(){return this._video_enabled_&&!this._video_muted_&&this._video_added_}get hasAudio(){return this._audio_enabled_&&!this._audio_muted_&&this._audio_added_}get audioTrack(){if(this.hasAudio||this._audio_pre_subscribed)return this._audioTrack}get videoTrack(){if(this.hasVideo||this._video_pre_subscribed)return this._videoTrack}get dataChannels(){return this._dataChannels}constructor(n,i){V(this,"uid",void 0),V(this,"_uintid",void 0),V(this,"_trust_in_room_",!0),V(this,"_trust_audio_enabled_state_",!0),V(this,"_trust_video_enabled_state_",!0),V(this,"_trust_audio_mute_state_",!0),V(this,"_trust_video_mute_state_",!0),V(this,"_audio_muted_",!1),V(this,"_video_muted_",!1),V(this,"_audio_enabled_",!0),V(this,"_video_enabled_",!0),V(this,"_audio_added_",!1),V(this,"_video_added_",!1),V(this,"_is_pre_created",!1),V(this,"_video_pre_subscribed",!1),V(this,"_audio_pre_subscribed",!1),V(this,"_trust_video_stream_added_state_",!0),V(this,"_trust_audio_stream_added_state_",!0),V(this,"_audioTrack",void 0),V(this,"_videoTrack",void 0),V(this,"_dataChannels",[]),V(this,"_audioSSRC",void 0),V(this,"_videoSSRC",void 0),V(this,"_audioOrtc",void 0),V(this,"_videoOrtc",void 0),V(this,"_cname",void 0),V(this,"_rtxSsrcId",void 0),V(this,"_videoMid",void 0),V(this,"_audioMid",void 0),this.uid=n,this._uintid=i}}let Dc=function(t){return t.SEND_ONLY="SEND_ONLY",t.RECEIVE_ONLY="RECEIVE_ONLY",t}({});function hpe(t,n){var i;let a;switch(n){case Le.LocalAudioTrack:a=Vn.Audio;break;case Le.LocalVideoTrack:a=Ye(i=t._hints).call(i,ar.SCREEN_TRACK)?Vn.Screen:Vn.High;break;case Le.LocalVideoLowTrack:a=Vn.Low}return a}function DI(t){const n=un();if(t.some(i=>i._bypassWebAudio))throw new Ce(K.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");if(!n.webAudioMediaStreamDest)throw new Ce(K.NOT_SUPPORTED,"cannot publish multiple tracks because your browser does not support audio mixing")}function PI(t,n){DI(t);const i=n||new hi;return t.forEach(a=>i.addAudioTrack(a)),i}var T6,R6,w6,I6,A6,O6,x6,N6,D6,P6,L6,Cr;function k6(t,n){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),i.push.apply(i,a)}return i}function sS(t){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?k6(Object(i),!0).forEach(function(a){V(t,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):k6(Object(i)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(i,a))})}return t}let Ia=(T6=Pc(Dc.SEND_ONLY),R6=Pc(Dc.SEND_ONLY),w6=Pc(),I6=Pc(Dc.RECEIVE_ONLY),A6=Pc(Dc.RECEIVE_ONLY),O6=Pc(Dc.RECEIVE_ONLY),x6=Pc(Dc.RECEIVE_ONLY),N6=Pc(Dc.RECEIVE_ONLY),D6=Pc(Dc.RECEIVE_ONLY),P6=Pc(),L6=Pc(Dc.RECEIVE_ONLY),Cr=class extends _r{get state(){return this._state}set state(t){const n=this._state;this._state=t,this.emit(At.StateChange,n,this._state)}constructor(t,n){super(),V(this,"store",void 0),V(this,"statsUploader",void 0),V(this,"sendConnection",void 0),V(this,"recvConnection",void 0),V(this,"localTrackMap",new Map),V(this,"remoteUserMap",new Map),V(this,"localDataChannels",[]),V(this,"pendingLocalTracks",[]),V(this,"pendingRemoteTracks",[]),V(this,"statsCollector",void 0),V(this,"dtlsFailedCount",0),V(this,"sendMutex",new Oi("P2PChannel2-send-mutex")),V(this,"recvMutex",new Oi("P2PChannel2-recv-mutex")),V(this,"_state",$n.Disconnected),V(this,"_restartStates",["disconnected","failed"]),V(this,"reconnectInterval",void 0),V(this,"uploadUnplinkStarted",!1),V(this,"uploadDownlinkStarted",!1),V(this,"uplinkStateUploadInterval",void 0),V(this,"downlinkStatsUploadInterval",void 0),V(this,"handleMuteLocalTrack",async(i,a,l)=>{const u=await this.sendMutex.lock("Locking from P2PChannel2.handleMuteLocalTrack");try{if(!this.sendConnection||this.state!==$n.Connected)return void l(new Ce(K.INVALID_OPERATION,"Cannot call P2PChannel2.handleMuteLocalTrack before sendConnection established."));const g=this.filterTobeMutedTracks(i);if(g.length===0)return void a();const _=g.find(D=>D[0]==="videoLowTrack");_&&_[1].track._originMediaStreamTrack.stop(),await this.sendConnection.muteLocal(g.map(D=>{let[,{id:W}]=D;return W}));let y=!1;var h,f;i.trackMediaType==="video"?y=!((h=this.localTrackMap.get(Le.LocalAudioTrack))===null||h===void 0||!h.track._muted):y=((f=this.localTrackMap.get(Le.LocalVideoTrack))===null||f===void 0?void 0:f.id)===void 0;const T=this.createMuteMessage(g);await er(this,At.RequestMuteLocal,T);const A=i.trackMediaType==="video"?Wu.MUTE_LOCAL_VIDEO:Wu.MUTE_LOCAL_AUDIO;await er(this,At.RequestP2PMuteLocal,{action:A,message:T,isMuteAll:y}),a()}catch(g){l(g)}finally{u()}}),V(this,"handleUnmuteLocalTrack",async(i,a,l)=>{const u=await this.sendMutex.lock("Locking from P2PChannel2.handleUnmuteLocalTrack");try{if(!this.sendConnection||this.state!==$n.Connected)return void l(new Ce(K.INVALID_OPERATION,"Cannot call P2PChannel2.handleUnmuteLocalTrack before sendConnection established."));const h=this.filterTobeUnmutedTracks(i);if(h.length===0)return void a();await this.sendConnection.unmuteLocal(h.map(_=>{let[,{id:y}]=_;return y}));const f=this.createUnmuteMessage(h),g=i.trackMediaType==="video"?Wu.UNMUTE_LOCAL_VIDEO:Wu.UNMUTE_LOCAL_AUDIO;await er(this,At.RequestP2PMuteLocal,{action:g,message:f}),a()}catch(h){l(h)}finally{u()}}),V(this,"handleUpdateVideoEncoder",async(i,a,l)=>{const u=await this.sendMutex.lock("Locking from P2PChannel2.handleSetVideoEncoder");try{const h=this.localTrackMap.get(Le.LocalVideoTrack);if(!this.sendConnection||!h||h.track!==i||this.state!==$n.Connected)return void a();const{id:f,track:g}=h;f&&(await this.sendConnection.updateSendParameters(f,g),await this.sendConnection.updateEncoderConfig(f,g),this.emit(At.UpdateVideoEncoder,g)),a()}catch(h){l(h)}finally{u()}}),V(this,"handleUpdateVideoSendParameters",async(i,a,l)=>{const u=await this.sendMutex.lock("Locking from P2PChannel2.handleUpdateVideoSendParameters");try{const h=this.localTrackMap.get(Le.LocalVideoTrack);if(!this.sendConnection||!h||h.track!==i||this.state!==$n.Connected)return void a();const{id:f,track:g}=h;f&&await this.sendConnection.updateSendParameters(f,g),a()}catch(h){l(h)}finally{u()}}),V(this,"handleReplaceTrack",async(i,a,l,u)=>{let h;k.debug("[".concat(this.store.clientId,"] P2PChannel2 handleReplaceTrack for [track-id-").concat(i.getTrackId(),"]")),typeof u=="boolean"&&u||(h=await this.sendMutex.lock("From P2PChannel2.handleReplaceTrack"));try{var f;const _=Array.from(this.localTrackMap.entries()).find(y=>{let[,{track:T}]=y;return i===T});if(!this.sendConnection||!_||_[1].id===void 0||this.state!==$n.Connected)return void a();if(await((f=this.sendConnection)===null||f===void 0?void 0:f.replaceTrack(i,_[1].id)),_[0]===Le.LocalVideoTrack&&un().supportDualStreamEncoding){const y=this.localTrackMap.get(Le.LocalVideoLowTrack);if(y){const T=i._mediaStreamTrack.clone();y.track._originMediaStreamTrack.stop(),y.track._mediaStreamTrack=T,y.track._originMediaStreamTrack=T,await new We((A,D)=>{this.handleReplaceTrack(y.track,A,D,!0)})}}a()}catch(_){l(_)}finally{var g;(g=h)===null||g===void 0||g()}}),V(this,"handleGetLocalVideoStats",i=>{i(this.statsCollector.getLocalVideoTrackStats())}),V(this,"handleGetLocalAudioStats",i=>{i(this.statsCollector.getLocalAudioTrackStats())}),V(this,"handleGetRemoteVideoStats",i=>this.statsCollector.getRemoteVideoTrackStats(i.uid)[i.uid]),V(this,"handleGetRemoteAudioStats",i=>this.statsCollector.getRemoteAudioTrackStats(i.uid)[i.uid]),this.store=t,this.statsCollector=n,this.statsCollector.addP2PChannel(this),this.statsUploader=new b6(t),this.bindStatsUploaderEvents(),this.reconnectInterval=window.setInterval(()=>{[this.sendConnection,this.recvConnection].forEach(i=>{i&&(i.iceConnectionState!=="disconnected"&&i.iceConnectionState!=="failed"||this.handleDisconnect(i.direction))})},ee("ICE_RESTART_INTERVAL"))}async startP2PConnection(t,n){throw new Ce(K.NOT_SUPPORTED,"p2p mode does not support startP2PConnection.")}async connect(t,n,i,a,l,u){throw new Ce(K.NOT_SUPPORTED,"p2p mode does not support connect.")}async startP2P(t,n){let i;try{if(n){this.recvConnection&&(k.warning("[".concat(this.store.clientId,"] P2PChannel.startP2P reset recvConnection.")),this.recvConnection.close(),this.unbindConnectionEvents(this.recvConnection)),i=await this.recvMutex.lock("From P2PChannel.startP2P"),this.recvConnection=new E6(t,this.store,Do.RECEIVE_ONLY),this.bindConnectionEvents(this.recvConnection);const a=await this.recvConnection.establish(n);return{iceParameters:a.iceParameters,dtlsParameters:a.dtlsParameters,sdp:a.sdp}}{this.state=$n.New,this.sendConnection&&(k.warning("[".concat(this.store.clientId,"] P2PChannel.startP2P reset sendConnection.")),this.sendConnection.close(),this.unbindConnectionEvents(this.sendConnection)),i=await this.sendMutex.lock("From P2PChannel.startP2P"),this.sendConnection=new E6(t,this.store),this.store.peerConnectionStart(),this.bindConnectionEvents(this.sendConnection);const a=await this.sendConnection.establish();return{iceParameters:a.iceParameters,dtlsParameters:a.dtlsParameters,sdp:a.sdp}}}finally{i&&i()}}async p2pConnect(t){if(!this.sendConnection)throw new Ce(K.UNEXPECTED_ERROR,"Cannot P2PChannel2.p2pConnect before P2PChannel2.startP2PConnection .");this.store.peerConnectionStart(),await this.sendConnection.connect(t),this.statsUploader.startUploadTransportStats(),this.statsUploader.startUploadExtensionUsageStats(),this.state=$n.Connected}async addRemoteCandidate(t,n){if(n===Do.RECEIVE_ONLY){if(!this.sendConnection)throw new Ce(K.UNEXPECTED_ERROR,"Cannot P2PChannel2.connect before P2PChannel2.addRemoteCandidate .");await this.sendConnection.addRemoteCandidate(t)}else{if(!this.recvConnection)throw new Ce(K.UNEXPECTED_ERROR,"Cannot P2PChannel2.connect before P2PChannel2.addRemoteCandidate .");await this.recvConnection.addRemoteCandidate(t)}}publish(t,n,i){var a=this;return wa(function*(){const l=yield Xt(a.sendMutex.lock("From P2PChannel.publish"));try{if(!a.sendConnection||a.state!==$n.Connected){a.throwIfTrackTypeNotMatch(t);const _=t.filter(y=>a.pendingLocalTracks.indexOf(y)===-1);return void(a.pendingLocalTracks=a.pendingLocalTracks.concat(_))}a.store.pubId=a.store.pubId+1,Zi.markPublishStart(a.store.clientId,a.store.pubId);const u=a.filterTobePublishedTracks(t,n,i);if(u.length===0)return void(yield Xt(a.tryToUnmuteAudio(t)));u.forEach(_=>{let{track:y,type:T}=_;const A=Date.now();a.store.publish(y.getTrackId(),T===Le.LocalAudioTrack?"audio":"video",A)}),a.bindLocalTrackEvents(u);const h=yield Xt(a.sendConnection.send(u.map(_=>{let{track:y}=_;return y}),a.store.codec,a.store.audioCodec)),f=(yield Xt(h.next())).value,g=a.createGatewayPublishMessage(u,f);try{yield g}catch(_){throw h.throw(_),(_==null?void 0:_.code)===K.WS_ABORT&&u.forEach(y=>{let{track:T}=y;a.pendingLocalTracks.indexOf(T)===-1&&a.pendingLocalTracks.push(T)}),a.unbindLocalTrackEvents(u),_}yield Xt(h.next()),u.forEach(_=>{let{type:y}=_;a.statsCollector.addLocalStats(y)}),a.statsUploader.startUploadOutboundStats(),a.assignLocalTracks(u,f),u.forEach(_=>{let{track:y,type:T}=_;const A=Date.now();a.store.publish(y.getTrackId(),T===Le.LocalAudioTrack?"audio":"video",void 0,A)}),a.startUploadUplinkState()}finally{l()}})()}async unpublish(t){if(!this.sendConnection||this.state!==$n.Connected)return void(t.length===0?this.pendingLocalTracks.length=0:this.pendingLocalTracks=this.pendingLocalTracks.filter(l=>!Ye(t).call(t,l)));const n=this.filterTobeUnpublishedTracks(t);if(n.length===0)return;const i=n.find(l=>l[0]==="videoLowTrack");i&&i[1].track.close();const a=this.createGatewayUnpublishMessage(n);if(await this.sendConnection.stopSending(n.map(l=>{let[,{id:u}]=l;return u})),this.withdrawLocalTracks(n),this.unbindLocalTrackEvents(n.map(l=>{let[u,{track:h}]=l;return{type:u,track:h}})),n.forEach(l=>{let[u]=l;this.statsCollector.removeLocalStats(u)}),this.localTrackMap.size===0&&(this.statsUploader.stopUploadOutboundStats(),this.stopUploadUplinkState()),this.sendConnection&&this.state===$n.Connected)return i&&i[1].track.close(),a;t.forEach(l=>{const u=this.pendingLocalTracks.indexOf(l);u!==-1&&this.pendingLocalTracks.splice(u,1)})}startUploadUplinkState(){if(this.uploadUnplinkStarted)return;this.uploadUnplinkStarted=!0,this.uplinkStateUploadInterval&&window.clearInterval(this.uplinkStateUploadInterval);const t=()=>{const n=[],i=[];Array.from(this.localTrackMap.entries()).forEach(a=>{let[l,{track:u,ssrcs:h}]=a;const f={stream_type:hpe(u,l),ssrcs:h};u._muted||!u._enabled?n.push(f):i.push(f)}),n.length>0&&n.forEach(a=>{er(this,At.RequestMuteLocal,[a])}),i.length>0&&i.forEach(a=>{er(this,At.RequestUnmuteLocal,[a])})};t(),this.uplinkStateUploadInterval=window.setInterval(()=>{t()},3e3)}stopUploadUplinkState(){this.uploadUnplinkStarted&&(this.uploadUnplinkStarted=!1,this.uplinkStateUploadInterval&&window.clearInterval(this.uplinkStateUploadInterval))}publishLowStream(t){return wa(function*(){throw new Ce(K.NOT_SUPPORTED,"p2p mode does not support publishLowStream.")})()}async republish(){this.pendingLocalTracks.length>0&&(k.debug("[".concat(this.store.clientId,"] Emit P2PChannelEvents.RequestRePublish to republish tracks.")),await ri(this,At.RequestRePublish,this.pendingLocalTracks),this.emit(At.MediaReconnectEnd,this.store.uid),this.pendingLocalTracks=[])}async unpublishLowStream(){throw new Ce(K.NOT_SUPPORTED,"p2p mode does not support unpublishLowStream.")}async subscribe(t,n,i,a){var l;if(!this.recvConnection)throw new Ce(K.INVALID_OPERATION,"Cannot subscribe remote user when recvConnection disconnected.");if((l=this.remoteUserMap.get(t))!==null&&l!==void 0&&l.has(n))return;const{track:u,mid:h,transceiver:f}=await this.recvConnection.receive(n,[{ssrcId:i}],String(t.uid),a);n===ut.AUDIO?(t._audioTrack?t._audioTrack._updateOriginMediaStreamTrack(u):(t._audioTrack=new Ef(u,t.uid,t._uintid,this.store),k.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote audio track: ").concat(t._audioTrack.getTrackId()))),f&&t._audioTrack._updateRtpTransceiver(f),this.bindRemoteTrackEvents(t,t._audioTrack)):(t._videoSSRC=i,t._videoTrack?t._videoTrack._updateOriginMediaStreamTrack(u):(t._videoTrack=new vf(u,t.uid,t._uintid,this.store),k.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote video track: ").concat(t._videoTrack.getTrackId()))),f&&t._videoTrack._updateRtpTransceiver(f),this.bindRemoteTrackEvents(t,t._videoTrack));const g=this.remoteUserMap.get(t);g?g.set(n,h):this.remoteUserMap.set(t,new Map([[n,h]])),this.statsCollector.addRemoteStats(t.uid),this.statsUploader.startUploadInboundStats(),this.startUploadDownlinkState();const _=this.pendingRemoteTracks.findIndex(y=>{let{user:T,kind:A}=y;return T.uid===t.uid&&n===A});_!==-1&&(this.pendingRemoteTracks.splice(_,1),this.emit(At.MediaReconnectEnd,t.uid))}async mockSubscribe(t,n,i,a){if(!this.recvConnection)throw new Ce(K.INVALID_OPERATION,"Cannot subscribe remote user when recvConnection disconnected.");await this.recvConnection.mockReceive(n,[{ssrcId:i}],String(t.uid),a)}async unsubscribe(t,n,i){const a=this.pendingRemoteTracks.filter(u=>{let{user:h,kind:f}=u;return n!==void 0?h.uid===t.uid&&n===f:h.uid===t.uid});if(a.forEach(u=>{const h=this.pendingRemoteTracks.indexOf(u);this.pendingRemoteTracks.splice(h,1)}),this.recvConnection||i||a.forEach(u=>{let{kind:h}=u;var f;if(h===ut.AUDIO)(f=t._audioTrack)===null||f===void 0||f._destroy(),t._audioTrack=void 0;else if(h===ut.VIDEO){var g;(g=t._videoTrack)===null||g===void 0||g._destroy(),t._videoTrack=void 0}}),!this.recvConnection)return;const l=this.filterTobeUnSubscribedTracks(t,n);l.length!==0&&(await this.recvConnection.stopReceiving(l.map(u=>{let[,{id:h}]=u;return h})),this.withdrawRemoteTracks(l),this.remoteUserMap.size===0&&(this.statsUploader.stopUploadInboundStats(),this.stopUploadDownlinkState()),l.forEach(u=>{let[h,{kind:f}]=u;var g,_;if(f===ut.VIDEO&&h._videoSSRC&&((g=this.recvConnection)===null||g===void 0||g.setStatsRemoteVideoIsReady(h._videoSSRC,!1)),f===ut.VIDEO)this.unbindRemoteTrackEvents(h._videoTrack),i||((_=h._videoTrack)===null||_===void 0||_._destroy(),h._videoTrack=void 0);else if(f===ut.AUDIO){var y;this.unbindRemoteTrackEvents(h._audioTrack),!i&&((y=h._audioTrack)===null||y===void 0||y._destroy(),h._audioTrack=void 0)}}),l.forEach(u=>{let[,{kind:h}]=u;er(this,At.RequestP2PMuteRemote,h)}))}startUploadDownlinkState(){if(this.uploadDownlinkStarted)return;this.uploadDownlinkStarted=!0,this.downlinkStatsUploadInterval&&window.clearInterval(this.downlinkStatsUploadInterval);const t=()=>Array.from(this.remoteUserMap.entries()).forEach(n=>{let[,i]=n;[ut.VIDEO,ut.AUDIO].forEach(a=>{i.has(a)?er(this,At.RequestP2PUnmuteRemote,a):er(this,At.RequestP2PMuteRemote,a)})});t(),this.downlinkStatsUploadInterval=window.setInterval(()=>{t()},3e3)}stopUploadDownlinkState(){this.uploadDownlinkStarted&&(this.uploadDownlinkStarted=!1,this.downlinkStatsUploadInterval&&window.clearInterval(this.downlinkStatsUploadInterval))}getAllDataChannels(){return this.localDataChannels}async massSubscribe(t){throw new Ce(K.NOT_SUPPORTED,"p2p mode does not support massSubscribe.")}async massSubscribeNoLock(t){throw new Ce(K.NOT_SUPPORTED,"p2p mode does not support massSubscribeNoLock.")}async massUnsubscribe(t){throw new Ce(K.NOT_SUPPORTED,"p2p mode does not support massUnsubscribe.")}async massUnsubscribeNoLock(t){throw new Ce(K.NOT_SUPPORTED,"p2p mode does not support massUnsubscribeNoLock.")}async muteRemote(t,n){if(!this.recvConnection)return;const i=this.remoteUserMap.get(t);if(!i)return void k.warning("[".concat(this.store.clientId,"] P2PChannel2.muteRemote has no remote user ").concat(t.uid,"."));if(!i.get(n))return void k.warning("[".concat(this.store.clientId,"] P2PChannel2.muteRemote has no remote user ").concat(t.uid," media type ").concat(n,"."));const a=n===ut.VIDEO?t._videoSSRC:t._audioSSRC;a!==void 0&&this.recvConnection.setStatsRemoteVideoIsReady(a,!1)}async unmuteRemote(t,n){return this.unmuteRemoteNoLock(t,n)}async unmuteRemoteNoLock(t,n){if(!this.recvConnection)return;const i=this.remoteUserMap.get(t);if(!i)return void k.warning("[".concat(this.store.clientId,"] P2PChannel2.unmuteRemote has no remote user ").concat(t.uid,"."));i.get(n)||k.warning("[".concat(this.store.clientId,"] P2PChannel2.unmuteRemote has no remote user ").concat(t.uid," media type ").concat(n,"."))}getAllTracks(t){const n=this.localTrackMap.get(Le.LocalAudioTrack);if((n==null?void 0:n.track)instanceof hi){const i=n.track;return Array.from(this.localTrackMap.entries()).filter(a=>{let[l]=a;return l!==Le.LocalAudioTrack}).filter(a=>{let[l]=a;return!(t&&l===Le.LocalVideoLowTrack)}).map(a=>{let[,{track:l}]=a;return l}).concat(i.trackList)}return Array.from(this.localTrackMap.entries()).filter(i=>{let[a]=i;return!(t&&a===Le.LocalVideoLowTrack)}).map(i=>{let[,{track:a}]=i;return a})}reportPublishEvent(t,n,i,a,l){if(t){const h=this.localTrackMap.get(Le.LocalAudioTrack),f=a?this.localTrackMap.get(Le.LocalVideoLowTrack):this.localTrackMap.get(Le.LocalVideoTrack);ht.publish(this.store.sessionId,{eventElapse:Zi.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:t,ec:n,audioName:h==null?void 0:h.track.getTrackLabel(),videoName:f==null?void 0:f.track.getTrackLabel(),screenshare:(f==null?void 0:f.track._hints.indexOf(ar.SCREEN_TRACK))!==-1,audio:!!h,video:!!f,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:l})}else{var u;i||(i=[]);const h=i.find(g=>g instanceof Lr),f=a?(u=this.localTrackMap.get(Le.LocalVideoTrack))===null||u===void 0?void 0:u.track:i.find(g=>g instanceof nr);ht.publish(this.store.sessionId,{eventElapse:Zi.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:t,ec:n,audioName:h==null?void 0:h.getTrackLabel(),videoName:f==null?void 0:f.getTrackLabel(),screenshare:(f==null?void 0:f._hints.indexOf(ar.SCREEN_TRACK))!==-1,audio:!!h,video:!!f,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:l})}}reportSubscribeEvent(t,n,i,a){const l=a===ut.VIDEO?i._videoSSRC:i._audioSSRC;l&&ht.subscribe(this.store.sessionId,{succ:t,ec:n,video:a===ut.VIDEO,audio:a===ut.AUDIO,peerid:i.uid,subscribeRequestid:a===ut.VIDEO?i._videoSSRC:i._audioSSRC,p2pid:this.store.p2pId,eventElapse:Zi.measureFromSubscribeStart(this.store.clientId,l)})}reset(){k.debug("[".concat(this.store.clientId,"] P2PChannel2.reset")),this.sendMutex=new Oi("P2PChannel2-send-mutex"),this.sendMutex=new Oi("P2PChannel2-recv-mutex"),this.sendConnection&&(this.sendConnection.close(),this.unbindConnectionEvents(this.sendConnection),this.sendConnection=void 0),this.recvConnection&&(this.recvConnection.close(),this.unbindConnectionEvents(this.recvConnection),this.recvConnection=void 0),this.statsUploader.stopUploadOutboundStats(),this.statsUploader.stopUploadInboundStats(),this.statsUploader.stopUploadTransportStats(),this.statsUploader.stopUploadExtensionUsageStats(),this.stopUploadUplinkState(),this.stopUploadDownlinkState(),this.unbindLocalTrackEvents(),this.unbindAllRemoteTrackEvents(),this.unbindRtpTransceiver();const t=this.localTrackMap.get(Le.LocalAudioTrack);if((t==null?void 0:t.track)instanceof hi){if(t.track.trackList.length>0){const n=t.track;t.track.trackList.forEach(i=>{n.removeAudioTrack(i)})}t.track.close()}this.localTrackMap.clear(),this.remoteUserMap.clear(),this.statsCollector.removeRemoteStats(),this.statsCollector.removeLocalStats(),this.dtlsFailedCount=0,this.pendingLocalTracks=[],this.pendingRemoteTracks=[],this.reconnectInterval&&(window.clearInterval(this.reconnectInterval),this.reconnectInterval=void 0),this.state=$n.Disconnected}getStats(t){var n,i;return t?(i=this.recvConnection)===null||i===void 0?void 0:i.getStats():(n=this.sendConnection)===null||n===void 0?void 0:n.getStats()}getRemoteVideoIsReady(t){var n;return((n=this.recvConnection)===null||n===void 0?void 0:n.getRemoteVideoIsReady(t))||!1}getLocalAudioVolume(){const t=this.localTrackMap.get(Le.LocalAudioTrack);if(t)return t.track.getVolumeLevel()}getLocalVideoSize(){const t=this.localTrackMap.get(Le.LocalVideoTrack);if(t)return{width:t.track.videoWidth||0,height:t.track.videoHeight||0}}getEncoderConfig(t){const n=this.localTrackMap.get(t);return n&&n.track instanceof nr||n&&n.track instanceof Lr?n.track._encoderConfig:void 0}getLocalMedia(t){return this.localTrackMap.get(t)}hasLocalMedia(){return this.localTrackMap.size>0}hasRemoteMedia(t,n){if(!t)return this.remoteUserMap.size>0;const i=this.remoteUserMap.get(t);return!!i&&(!n||i.has(n))}async hasRemoteMediaWithLock(t,n){if(!t)return this.remoteUserMap.size>0;const i=this.remoteUserMap.get(t);return!!i&&(!n||i.has(n))}getRemoteMedia(t){var n;const i=Array.from(Va(n=this.remoteUserMap).call(n)).find(a=>a.uid===t);return i?{audioTrack:i.audioTrack,audioSSRC:i._audioSSRC,videoTrack:i.videoTrack,videoSSRC:i._videoSSRC}:{}}getAudioLevels(){let t=Array.from(this.remoteUserMap.entries()).map(i=>{let[a]=i;return{uid:a.uid,level:a.audioTrack?100*a.audioTrack._source.getAccurateVolumeLevel():0}});const n=this.localTrackMap.get(Le.LocalAudioTrack);return n&&t.push({level:100*n.track._source.getAccurateVolumeLevel(),uid:this.store.uid}),t=t0(t).call(t,(i,a)=>i.level-a.level),t}async disconnectForReconnect(){this.sendConnection&&this.recvConnection&&(k.debug("[".concat(this.store.clientId,"] P2PChannel2.disconnectForReconnect closing P2PConnection")),this.state=$n.Reconnecting,ee("KEEP_LAST_FRAME")&&this.remoteUserMap.size!==0&&Array.from(this.remoteUserMap.entries()).forEach(t=>{let[n]=t;var i;n._videoTrack&&n._videoTrack._player&&((i=n._videoTrack._player.getVideoElement())===null||i===void 0||i.pause(),n._videoTrack._player.isKeepLastFrame=!0,n._videoTrack._originMediaStreamTrack.stop())}),this.sendConnection.close(),this.unbindConnectionEvents(this.sendConnection),this.sendConnection=void 0,this.recvConnection.close(),this.unbindConnectionEvents(this.recvConnection),this.recvConnection=void 0,this.localTrackMap.size!==0&&(Array.from(this.localTrackMap.entries()).forEach(t=>{var n;let[i,{track:a}]=t;switch(i){case Le.LocalVideoTrack:Ye(n=a._hints).call(n,ar.LOW_STREAM)?a.close():this.pendingLocalTracks.push(a);break;case Le.LocalAudioTrack:a instanceof hi?this.pendingLocalTracks=this.pendingLocalTracks.concat(a.trackList):this.pendingLocalTracks.push(a);case Le.LocalVideoLowTrack:}}),this.emit(At.MediaReconnectStart,this.store.uid)),this.unbindLocalTrackEvents(),this.localTrackMap.clear(),this.remoteUserMap.size!==0&&Array.from(this.remoteUserMap.entries()).forEach(t=>{let[n,i]=t;Array.from(Va(i).call(i)).forEach(a=>{this.setPendingRemoteMedia(n,a)}),this.emit(At.MediaReconnectStart,n.uid)}),this.unbindAllRemoteTrackEvents(),this.remoteUserMap.clear(),this.stopUploadUplinkState(),this.stopUploadDownlinkState(),this.statsUploader.stopUploadOutboundStats(),this.statsUploader.stopUploadInboundStats(),this.statsUploader.stopUploadTransportStats(),k.debug("[".concat(this.store.clientId,"] P2PChannel2 disconnected, waiting to reconnect.")))}hasPendingRemoteMedia(t,n){for(const i of this.pendingRemoteTracks){const{user:a,kind:l}=i;if((t instanceof nd?t.uid:t)===a.uid&&n===l)return!0}return!1}setPendingRemoteMedia(t,n){this.hasPendingRemoteMedia(t,n)||this.pendingRemoteTracks.push({user:t,kind:n})}async restartICE(t,n){let i,a;if(t===Do.SEND_ONLY){if(!this.sendConnection)throw new Ce(K.INVALID_OPERATION,"Cannot call P2PChannel2.handleMuteLocalTrack before sendConnection established.");i=await this.sendMutex.lock("From P2PChannel.restartICE"),a=this.sendConnection}else{if(!this.recvConnection)throw new Ce(K.INVALID_OPERATION,"Cannot call P2PChannel2.handleMuteLocalTrack before recvConnection established.");i=await this.recvMutex.lock("From P2PChannel.restartICE"),a=this.recvConnection}try{if(n){const l=await a.restartICE(n);return a.isInRestartIce=!1,l}{const l=await a.restartICE();if(l){const u=await ri(this,At.RequestP2PRestartICE,{direction:Do.RECEIVE_ONLY,iceParameter:l});await a.restartICE(u),a.isInRestartIce=!1}}}finally{i()}}getUplinkNetworkQuality(){if(!this.sendConnection)return 0;const t=this.sendConnection.getStats(),n=this.localTrackMap.get(Le.LocalVideoTrack),i=this.localTrackMap.get(Le.LocalAudioTrack),a=t.videoSend.find(D=>{var W;return D.ssrc===(n==null||(W=n.ssrcs)===null||W===void 0?void 0:W[0].ssrcId)}),l=t.audioSend.find(D=>{var W;return D.ssrc===(i==null||(W=i.ssrcs)===null||W===void 0?void 0:W[0].ssrcId)});if(!a||!l)return 1;const u=Ta(this,At.NeedSignalRTT),h=a?a.rttMs:void 0,f=l?l.rttMs:void 0,g=h&&f?(h+f)/2:h||f,_=(g&&u?(g+u)/2:g||u)||0,y=100*t.sendPacketLossRate*.7/50+.3*_/1500,T=y<.17?1:y<.36?2:y<.59?3:y<.1?4:5,A=n==null?void 0:n.track;if(A&&A._encoderConfig&&A._hints.indexOf(ar.SCREEN_TRACK)===-1){const D=A._encoderConfig.bitrateMax,W=t.bitrate.actualEncoded;if(D&&W){const F=(1e3*D-W)/(1e3*D);return $4[F<.15?0:F<.3?1:F<.45?2:F<.6?3:4][T]}}return T}getDownlinkNetworkQuality(){if(!this.recvConnection)return 0;const t=this.recvConnection.getStats();let n=0;return Array.from(this.remoteUserMap.entries()).forEach(i=>{let[a]=i;const l=a._audioSSRC,u=a._videoSSRC,h=t.audioRecv.find(W=>W.ssrc===l),f=t.videoRecv.find(W=>W.ssrc===u);if(!h&&!f)return void(n+=1);const g=Ta(this,At.NeedSignalRTT),_=t.rtt,y=(_&&g?(_+g)/2:_||g)||0,T=h?h.jitterMs:void 0,A=t.recvPacketLossRate;let D=.7*A*100/50+.3*y/1500;T&&(D=.6*A*100/50+.2*y/1500+.2*T/400),n+=D<.1?1:D<.17?2:D<.36?3:D<.59?4:5}),this.remoteUserMap.size>0?Math.round(n/this.remoteUserMap.size):n}async muteLocalTrack(t){return new We((n,i)=>{this.handleMuteLocalTrack(t,n,i)})}filterTobePublishedTracks(t,n,i){const a=[],l=un(),u=this.getAllTracks();t=Vp(t=t.filter(g=>u.indexOf(g)===-1));let h=!1,f=!1;for(const g of t){if(g instanceof nr&&(this.localTrackMap.has(Le.LocalVideoTrack)||h?new Ce(K.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS).throw():(a.push({track:g,type:Le.LocalVideoTrack}),h=!0),n)){const _=this.getLowVideoTrack(g,i);a.push({track:_,type:Le.LocalVideoLowTrack})}if(g instanceof Lr){const _=this.localTrackMap.get(Le.LocalAudioTrack);if(_){if(!(_.track instanceof hi))throw new Ce(K.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing");if(g._bypassWebAudio)throw new Ce(K.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");_.track.addAudioTrack(g),this.bindLocalAudioTrackEvents(g,!0)}else if(f){const y=a.find(T=>{let{type:A}=T;return A===Le.LocalAudioTrack});if(!(y.track instanceof hi))throw new Ce(K.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing");if(g._bypassWebAudio)throw new Ce(K.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");y.track.addAudioTrack(g)}else{if(!l.webAudioMediaStreamDest||g instanceof hi||g._bypassWebAudio)a.push({track:g,type:Le.LocalAudioTrack});else{const y=new hi;y.addAudioTrack(g),a.push({track:y,type:Le.LocalAudioTrack})}f=!0}}}return a}filterTobeUnpublishedTracks(t){const n=[],i=this.getAllTracks();t=Vp(t=t.filter(a=>i.indexOf(a)!==-1));for(const a of t){if(a instanceof Lr){const l=this.localTrackMap.get(Le.LocalAudioTrack);if(!l)continue;l.track instanceof hi?(l.track.removeAudioTrack(a),this.unbindLocalAudioTrackEvents(a),l.track.trackList.length===0&&(n.push([Le.LocalAudioTrack,l]),l.track.close())):n.push([Le.LocalAudioTrack,l])}if(a instanceof nr){const l=this.localTrackMap.get(Le.LocalVideoTrack);if(!l)continue;n.push([Le.LocalVideoTrack,l]);const u=this.localTrackMap.get(Le.LocalVideoLowTrack);u&&n.push([Le.LocalVideoLowTrack,u])}}return n}bindLocalTrackEvents(t){t.forEach(n=>{let{track:i,type:a}=n;switch(a){case Le.LocalVideoTrack:i.addListener(et.GET_STATS,this.handleGetLocalVideoStats),i.addListener(et.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),i.addListener(et.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),i.addListener(et.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),i.addListener(et.NEED_UPDATE_VIDEO_SEND_PARAMETERS,this.handleUpdateVideoSendParameters),i.addListener(et.NEED_REPLACE_TRACK,this.handleReplaceTrack),i.addListener(et.NEED_MUTE_TRACK,this.handleMuteLocalTrack),i.addListener(et.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case Le.LocalAudioTrack:this.bindLocalAudioTrackEvents(i);case Le.LocalVideoLowTrack:}})}bindLocalAudioTrackEvents(t,n){t instanceof hi?t.trackList.forEach(i=>{i.addListener(et.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),i.addListener(et.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),i.addListener(et.GET_STATS,this.handleGetLocalAudioStats),i.addListener(et.NEED_MUTE_TRACK,this.handleMuteLocalTrack),i.addListener(et.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)}):(t.addListener(et.GET_STATS,this.handleGetLocalAudioStats),t.addListener(et.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),t.addListener(et.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),t.addListener(et.NEED_MUTE_TRACK,this.handleMuteLocalTrack),t.addListener(et.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack),n||t.addListener(et.NEED_REPLACE_TRACK,this.handleReplaceTrack))}unbindLocalTrackEvents(t){t||(t=Array.from(this.localTrackMap.entries()).map(n=>{let[i,{track:a}]=n;return{track:a,type:i}})),t.forEach(n=>{let{track:i,type:a}=n;switch(a){case Le.LocalVideoTrack:i.off(et.GET_STATS,this.handleGetLocalVideoStats),i.off(et.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),i.off(et.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),i.off(et.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),i.off(et.NEED_UPDATE_VIDEO_SEND_PARAMETERS,this.handleUpdateVideoSendParameters),i.off(et.NEED_REPLACE_TRACK,this.handleReplaceTrack),i.off(et.NEED_MUTE_TRACK,this.handleMuteLocalTrack),i.off(et.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case Le.LocalAudioTrack:this.unbindLocalAudioTrackEvents(i);case Le.LocalVideoLowTrack:}})}unbindLocalAudioTrackEvents(t){t instanceof hi?t.trackList.forEach(n=>{n.off(et.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),n.off(et.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),n.off(et.GET_STATS,this.handleGetLocalAudioStats),n.off(et.NEED_MUTE_TRACK,this.handleMuteLocalTrack),n.off(et.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)}):(t.off(et.GET_STATS,this.handleGetLocalAudioStats),t.off(et.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),t.off(et.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),t.off(et.NEED_REPLACE_TRACK,this.handleReplaceTrack),t.off(et.NEED_MUTE_TRACK,this.handleMuteLocalTrack),t.off(et.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack))}bindRemoteTrackEvents(t,n){n instanceof vf&&n.addListener(et.GET_STATS,i=>{i(this.handleGetRemoteVideoStats(t))}),n instanceof Ef&&n.addListener(et.GET_STATS,i=>{i(this.handleGetRemoteAudioStats(t))})}unbindRemoteTrackEvents(t){t&&t.removeAllListeners(et.GET_STATS)}unbindAllRemoteTrackEvents(){Array.from(this.remoteUserMap.entries()).forEach(t=>{let[n,i]=t;i.has(ut.AUDIO)&&this.unbindRemoteTrackEvents(n._audioTrack),i.has(ut.VIDEO)&&this.unbindRemoteTrackEvents(n._videoTrack)})}createGatewayPublishMessage(t,n){return t.map((i,a)=>{var l;let u,{track:h,type:f}=i;switch(f){case Le.LocalAudioTrack:u=Vn.Audio;break;case Le.LocalVideoTrack:u=Ye(l=h._hints).call(l,ar.SCREEN_TRACK)?Vn.Screen:Vn.High;break;case Le.LocalVideoLowTrack:u=Vn.Low}return{kind:f===Le.LocalAudioTrack?ut.AUDIO:ut.VIDEO,stream_type:u,mid:n[a].id,ssrcs:n[a].localSSRC,isMuted:h.muted||!h.enabled}})}createGatewayUnpublishMessage(t){return t.map(n=>{var i;let a,[l,{track:u,ssrcs:h,id:f}]=n;switch(l){case Le.LocalVideoTrack:a=Ye(i=u._hints).call(i,ar.SCREEN_TRACK)?Vn.Screen:Vn.High;break;case Le.LocalAudioTrack:a=Vn.Audio;break;case Le.LocalVideoLowTrack:a=Vn.Low}return{stream_type:a,ssrcs:h,mid:f}})}assignLocalTracks(t,n){t.forEach((i,a)=>{let{track:l,type:u}=i;this.localTrackMap.set(u,{track:l,id:n[a].id,ssrcs:n[a].localSSRC})})}withdrawLocalTracks(t){t.forEach(n=>{let[i]=n;this.localTrackMap.delete(i)})}bindConnectionEvents(t){t.onConnectionStateChange=async n=>{var i;k.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: ").concat(t.name,".onConnectionStateChange(").concat(n,")")),this.emit(At.PeerConnectionStateChange,n),n!=="connected"||this.store.keyMetrics.peerConnectionEnd||this.store.peerConnectionEnd(),n==="connected"&&(t.isInRestartIce=!1),Ye(i=this._restartStates).call(i,n)&&!t.isInRestartIce&&(n==="disconnected"&&await yi(800),t.iceConnectionState!=="disconnected"&&t.iceConnectionState!=="failed"||this.handleDisconnect(t.direction))},t.onICEConnectionStateChange=n=>{n!=="connected"||this.store.keyMetrics.iceConnectionEnd||this.store.iceConnectionEnd(),k.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICEConnectionStateChange(").concat(n,")")),ht.reportApiInvoke(this.store.sessionId,{name:"ICEConnectionStateChange",options:n,tag:Nr.TRACER}).onSuccess(),this.emit(At.IceConnectionStateChange,n)},t.onICETransportStateChange=n=>{k.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICETransportStateChange(").concat(n,")"))},t.onDTLSTransportStateChange=n=>{k.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportStateChange(").concat(n,")"))},t.onDTLSTransportError=n=>{k.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportError(").concat(n,")"))},t.onFirstAudioDecoded=n=>{var i;const a=Array.from(Va(i=this.remoteUserMap).call(i)).find(u=>u._audioSSRC===n);var l;a&&(this.store.subscribe(a.uid,"audio",void 0,void 0,void 0,Date.now()),(l=a.audioTrack)===null||l===void 0||l.emit(pf.FIRST_FRAME_DECODED),ht.firstRemoteFrame(this.store.sessionId,xi.FIRST_AUDIO_DECODE,Ir.FIRST_AUDIO_DECODE,{peer:a._uintid,subscribeElapse:Zi.measureFromSubscribeStart(this.store.clientId,n),subscribeRequestid:n,p2pid:this.store.p2pId}))},t.onFirstAudioReceived=n=>{var i;const a=Array.from(Va(i=this.remoteUserMap).call(i)).find(l=>l._audioSSRC===n);a&&ht.firstRemoteFrame(this.store.sessionId,xi.FIRST_AUDIO_RECEIVED,Ir.FIRST_AUDIO_RECEIVED,{peer:a._uintid,subscribeElapse:Zi.measureFromSubscribeStart(this.store.clientId,n),subscribeRequestid:n,p2pid:this.store.p2pId})},t.onFirstVideoDecoded=(n,i,a)=>{this.reportVideoFirstFrameDecoded(n,i,a)},t.onFirstVideoReceived=n=>{var i;const a=Array.from(Va(i=this.remoteUserMap).call(i)).find(l=>l._videoSSRC===n);a&&ht.firstRemoteFrame(this.store.sessionId,xi.FIRST_VIDEO_RECEIVED,Ir.FIRST_VIDEO_RECEIVED,{peer:a._uintid,subscribeElapse:Zi.measureFromSubscribeStart(this.store.clientId,n),subscribeRequestid:n,p2pid:this.store.p2pId})},t.onSelectedLocalCandidateChanged=(n,i)=>{const a=n.candidateType==="relay",l=i.candidateType==="relay";i.candidateType!=="unknown"&&a===l||this.emit(At.ConnectionTypeChange,a),k.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.SelectedLocalCandidateChanged(").concat(JSON.stringify(Gu(i))," -> ").concat(JSON.stringify(Gu(n)),")"))},t.onSelectedRemoteCandidateChanged=(n,i)=>{k.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.SelectedRemoteCandidateChanged(").concat(JSON.stringify(Gu(i))," -> ").concat(JSON.stringify(Gu(n)),")"))},t.onFirstVideoDecodedTimeout=n=>{this.reportVideoFirstFrameDecoded(n,void 0,void 0,!0)},t.onLocalCandidate=n=>{this.emit(At.LocalCandidate,{candidate:n,direction:t.direction})}}unbindConnectionEvents(t){t.onConnectionStateChange=void 0,t.onICEConnectionStateChange=void 0,t.onICETransportStateChange=void 0,t.onDTLSTransportStateChange=void 0,t.onDTLSTransportError=void 0,t.onFirstAudioDecoded=void 0,t.onFirstAudioReceived=void 0,t.onFirstVideoDecoded=void 0,t.onFirstVideoReceived=void 0,t.onSelectedLocalCandidateChanged=void 0,t.onSelectedRemoteCandidateChanged=void 0,t.onFirstVideoDecodedTimeout=void 0,t.onLocalCandidate=void 0}async handleDisconnect(t){const n=t===Do.SEND_ONLY?this.sendConnection:this.recvConnection;n&&!n.isInRestartIce&&(n.isInRestartIce=!0,k.debug("[".concat(this.store.clientId,"] [P2PChannel-").concat(n.name,"] start use restartICE")),t===Do.SEND_ONLY?this.restartICE(t):ri(this,At.RequestP2PRestartICE,{direction:Do.SEND_ONLY}))}filterTobeMutedTracks(t){const n=[];if(this.getAllTracks().indexOf(t)===-1)return n;const i=this.localTrackMap.get(Le.LocalAudioTrack);if(t instanceof Lr&&(i==null?void 0:i.track)instanceof hi)return i.track.isActive||n.push([Le.LocalAudioTrack,i]),n;const a=Array.from(this.localTrackMap.entries()).find(l=>{let[,{track:u}]=l;return t===u});if(a&&(n.push(a),a[0]===Le.LocalVideoTrack)){const l=this.localTrackMap.get(Le.LocalVideoLowTrack);l&&n.push([Le.LocalVideoLowTrack,l])}return n}filterTobeUnmutedTracks(t){const n=[],i=this.localTrackMap.get(Le.LocalAudioTrack);if(t instanceof Lr&&(i==null?void 0:i.track)instanceof hi)return i.track.isActive&&n.push([Le.LocalAudioTrack,i]),n;const a=Array.from(this.localTrackMap.entries()).find(l=>{let[,{track:u}]=l;return t===u});if(a)if(a[0]===Le.LocalVideoTrack){n.push(a);const l=this.localTrackMap.get(Le.LocalVideoLowTrack);l&&n.push([Le.LocalVideoLowTrack,l])}else n.push(a);return n}createMuteMessage(t){return t.map(n=>{var i;let a,[l,{track:u,ssrcs:h,id:f}]=n;switch(l){case Le.LocalAudioTrack:a=Vn.Audio;break;case Le.LocalVideoTrack:a=Ye(i=u._hints).call(i,ar.SCREEN_TRACK)?Vn.Screen:Vn.High;break;case Le.LocalVideoLowTrack:a=Vn.Low}return{stream_type:a,ssrcs:h,mid:f}})}createUnmuteMessage(t){return t.map(n=>{var i;let a,[l,{track:u,ssrcs:h,id:f}]=n;switch(l){case Le.LocalAudioTrack:a=Vn.Audio;break;case Le.LocalVideoTrack:a=Ye(i=u._hints).call(i,ar.SCREEN_TRACK)?Vn.Screen:Vn.High;break;case Le.LocalVideoLowTrack:a=Vn.Low}return{stream_type:a,ssrcs:h,mid:f}})}filterTobeUnSubscribedTracks(t,n){const i=[],a=this.remoteUserMap.get(t);if(!a)return i;if(n){const l=a.get(n);if(!l)return i;i.push([t,{kind:n,id:l}])}else Array.from(a.entries()).forEach(l=>{let[u,h]=l;i.push([t,{kind:u,id:h}])});return i}createUnsubscribeMessage(t){const n=[];return t.forEach(i=>{let[a,{kind:l,id:u}]=i;switch(l){case ut.VIDEO:return void(a._videoSSRC&&n.push({stream_type:ut.VIDEO,ssrcId:a._videoSSRC}));case ut.AUDIO:return void(a._audioSSRC&&n.push({stream_type:ut.AUDIO,ssrcId:a._audioSSRC}))}}),n}withdrawRemoteTracks(t){t.forEach(n=>{let[i,{kind:a}]=n;const l=this.remoteUserMap.get(i);l&&(l.delete(a),Array.from(l.entries()).length===0&&this.remoteUserMap.delete(i))})}async updateBitrateLimit(t){const n=this.localTrackMap.get(Le.LocalVideoTrack),i=this.localTrackMap.get(Le.LocalVideoLowTrack);n&&await n.track.setBitrateLimit(t.uplink),i&&t.low_stream_uplink&&await i.track.setBitrateLimit({max_bitrate:t.low_stream_uplink.bitrate,min_bitrate:t.low_stream_uplink.bitrate||0})}isP2PDisconnected(){if(this.sendConnection&&this.recvConnection){const t=this.sendConnection.peerConnectionState,n=this.recvConnection.peerConnectionState;return t!=="connected"&&n!=="connected"}return!0}async tryToUnmuteAudio(t){for(let n=0;n<t.length;n++)if(t[n]instanceof Lr){const i=this.filterTobeUnmutedTracks(t[n]);if(i.length===0)continue;const a=this.createUnmuteMessage(i);return void await er(this,At.RequestUnmuteLocal,a)}}bindStatsUploaderEvents(){this.statsUploader.requestStats=t=>this.getStats(t),this.statsUploader.requestLocalMedia=()=>Array.from(this.localTrackMap.entries()).filter(t=>{let[,{ssrcs:n}]=t;return!!n}),this.statsUploader.requestRemoteMedia=()=>Array.from(this.remoteUserMap.entries()),this.statsUploader.requestVideoIsReady=t=>{var n;return!((n=this.recvConnection)===null||n===void 0||!n.getRemoteVideoIsReady(t))},this.statsUploader.requestUpload=(t,n)=>this.emit(At.RequestUpload,t,n),this.statsUploader.requestUploadStats=t=>this.emit(At.RequestUploadStats,t),this.statsUploader.requestAllTracks=()=>this.getAllTracks()}unbindStatsUploaderEvents(){this.statsUploader.requestStats=void 0,this.statsUploader.requestLocalMedia=void 0,this.statsUploader.requestRemoteMedia=void 0,this.statsUploader.requestVideoIsReady=void 0}async requestReconnect(){this.dtlsFailedCount+=1,await yi(u_(this.dtlsFailedCount,qr)),this.emit(At.RequestReconnect)}async reconnectP2P(){}canPublishLowStream(){return this.localTrackMap.has(Le.LocalVideoTrack)||this.pendingLocalTracks.some(t=>t instanceof nr)}throwIfTrackTypeNotMatch(t){if(t.filter(n=>n instanceof nr).length>1)throw new Ce(K.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(t.filter(n=>n instanceof Lr).length>1&&(t.some(n=>n instanceof Lr&&n._bypassWebAudio)||!un().webAudioMediaStreamDest))throw new Ce(K.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode");for(const n of t){if(n instanceof nr&&this.pendingLocalTracks.some(i=>i instanceof nr))throw new Ce(K.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(n instanceof Lr&&this.pendingLocalTracks.some(i=>i instanceof Lr)&&(!un().webAudioMediaStreamDest||n._bypassWebAudio||this.pendingLocalTracks.some(i=>i instanceof Lr&&i._bypassWebAudio)))throw new Ce(K.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode")}}getLowVideoTrack(t,n){const i=!ee("DISABLE_DUAL_STREAM_USE_ENCODING")&&un().supportDualStreamEncoding,a=sS(sS({},{width:160,height:120,framerate:15,bitrate:50}),n);let l;l=i?t._mediaStreamTrack.clone():NI(t,a);const u=tr(8,"track-low-"),h=new nr(l,sS(sS({},i&&{scaleResolutionDownBy:s1(a,t)}),{},{frameRate:a.framerate,bitrateMax:a.bitrate,bitrateMin:a.bitrate}),void 0,void 0,u);return h.on(gh.TRANSCEIVER_UPDATED,f=>{t._updateRtpTransceiver(f,df.LOW_STREAM)}),h._hints.push(ar.LOW_STREAM),t.addListener(et.NEED_CLOSE,()=>{h.close()}),h}async globalLock(){return this.recvMutex.lock("From P2PChannel2.globalLock")}reportVideoFirstFrameDecoded(t,n,i,a){var l;const u=Array.from(Va(l=this.remoteUserMap).call(l)).find(h=>h._videoSSRC===t);if(u){a||this.store.subscribe(u.uid,"video",void 0,void 0,void 0,void 0,Date.now());const h=this.store.keyMetrics,f=h.subscribe.find(g=>g.userId===u.uid&&g.type==="video");ht.firstRemoteVideoDecode(this.store.sessionId,xi.FIRST_VIDEO_DECODE,Ir.FIRST_VIDEO_DECODE,{peer:u._uintid,videowidth:n,videoheight:i,subscribeElapse:Zi.measureFromSubscribeStart(this.store.clientId,t),subscribeRequestid:t,p2pid:this.store.p2pId,apEnd:h.requestAPEnd||0,apStart:h.requestAPStart||0,joinGwEnd:h.joinGatewayEnd||0,joinGwStart:h.joinGatewayStart||0,pcEnd:h.peerConnectionEnd||0,pcStart:h.peerConnectionStart||0,subscriberEnd:(f==null?void 0:f.subscribeEnd)||0,subscriberStart:(f==null?void 0:f.subscribeStart)||0,videoAddNotify:(f==null?void 0:f.streamAdded)||0,state:a?1:0})}}async remoteMediaSsrcChanged(t,n,i){if(!this.recvConnection)return!1;const a=this.remoteUserMap.get(t);if(!a)return!1;const l=a.get(n);if(!l)return!1;const u=await this.recvConnection.getRemoteSSRC(l);return u!==void 0&&u!==i}resetConnection(t){k.debug("[".concat(this.store.clientId,"] [P2PChannel2] reset connection to ").concat(t)),this.state===$n.Connected?(k.debug("[".concat(this.store.clientId,"] [P2PChannel2] fallback to websocket but P2PChannel2 state still connected, disconnect first")),this.disconnectForReconnect()):(this.sendConnection&&(this.sendConnection.close(),this.unbindConnectionEvents(this.sendConnection),this.sendConnection=void 0),this.recvConnection&&(this.recvConnection.close(),this.unbindConnectionEvents(this.recvConnection),this.recvConnection=void 0))}async publishDataChannel(t){throw new Ce(K.NOT_SUPPORTED)}async unpublishDataChannel(t){throw new Ce(K.NOT_SUPPORTED)}async subscribeDataChannel(t,n){throw new Ce(K.NOT_SUPPORTED)}async unsubscribeDataChannel(t,n){throw new Ce(K.NOT_SUPPORTED)}hasPendingRemoteDataChannel(t,n){throw new Ce(K.NOT_SUPPORTED)}setPendingRemoteDataChannel(t,n){throw new Ce(K.NOT_SUPPORTED)}async preConnect(t,n,i,a,l,u){throw new Ce(K.NOT_SUPPORTED)}getEstablishParams(){throw new Ce(K.NOT_SUPPORTED)}async reSubscribe(t){throw new Ce(K.NOT_SUPPORTED)}async updateVideoStreamParameter(t,n){throw new Ce(K.NOT_SUPPORTED)}unbindRtpTransceiver(){this.localTrackMap.size!==0&&Array.from(this.localTrackMap.entries()).forEach(t=>{let[n,{track:i}]=t;n===Le.LocalVideoLowTrack?i._updateRtpTransceiver(void 0,df.LOW_STREAM):i._updateRtpTransceiver(void 0)})}},$e(Cr.prototype,"p2pConnect",[T6],Object.getOwnPropertyDescriptor(Cr.prototype,"p2pConnect"),Cr.prototype),$e(Cr.prototype,"unpublish",[R6],Object.getOwnPropertyDescriptor(Cr.prototype,"unpublish"),Cr.prototype),$e(Cr.prototype,"unpublishLowStream",[w6],Object.getOwnPropertyDescriptor(Cr.prototype,"unpublishLowStream"),Cr.prototype),$e(Cr.prototype,"subscribe",[I6],Object.getOwnPropertyDescriptor(Cr.prototype,"subscribe"),Cr.prototype),$e(Cr.prototype,"mockSubscribe",[A6],Object.getOwnPropertyDescriptor(Cr.prototype,"mockSubscribe"),Cr.prototype),$e(Cr.prototype,"unsubscribe",[O6],Object.getOwnPropertyDescriptor(Cr.prototype,"unsubscribe"),Cr.prototype),$e(Cr.prototype,"muteRemote",[x6],Object.getOwnPropertyDescriptor(Cr.prototype,"muteRemote"),Cr.prototype),$e(Cr.prototype,"unmuteRemote",[N6],Object.getOwnPropertyDescriptor(Cr.prototype,"unmuteRemote"),Cr.prototype),$e(Cr.prototype,"hasRemoteMediaWithLock",[D6],Object.getOwnPropertyDescriptor(Cr.prototype,"hasRemoteMediaWithLock"),Cr.prototype),$e(Cr.prototype,"disconnectForReconnect",[P6],Object.getOwnPropertyDescriptor(Cr.prototype,"disconnectForReconnect"),Cr.prototype),$e(Cr.prototype,"remoteMediaSsrcChanged",[L6],Object.getOwnPropertyDescriptor(Cr.prototype,"remoteMediaSsrcChanged"),Cr.prototype),Cr);function Pc(t){return function(n,i,a){const l=n[i];if(typeof l!="function")throw new Error("Cannot use mutex on object property.");return a.value=async function(){for(var u=arguments.length,h=new Array(u),f=0;f<u;f++)h[f]=arguments[f];switch(t){case Dc.SEND_ONLY:{const g=await this.sendMutex.lock("From P2PChannel2.".concat(i));try{return await l.apply(this,h)}finally{g()}}case Dc.RECEIVE_ONLY:{const g=await this.recvMutex.lock("From P2PChannel2.".concat(i));try{return await l.apply(this,h)}finally{g()}}default:{const g=await this.sendMutex.lock("From P2PChannel2.".concat(i)),_=await this.recvMutex.lock("From P2PChannel2.".concat(i));try{return await l.apply(this,h)}finally{g(),_()}}}},a}}function M6(t,n){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),i.push.apply(i,a)}return i}function Th(t){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?M6(Object(i),!0).forEach(function(a){V(t,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):M6(Object(i)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(i,a))})}return t}class ng{constructor(n){V(this,"store",void 0),V(this,"onStatsException",void 0),V(this,"onUploadPublishDuration",void 0),V(this,"onStatsChanged",void 0),V(this,"localStats",new Map),V(this,"remoteStats",new Map),V(this,"updateStatsInterval",void 0),V(this,"trafficStats",void 0),V(this,"trafficStatsPeerList",[]),V(this,"uplinkStats",void 0),V(this,"exceptionMonitor",void 0),V(this,"p2pChannel",void 0),V(this,"scalabilityMode",Gle.L1T1),V(this,"updateStats",()=>{this.p2pChannel&&(this.updateRemoteStats(this.p2pChannel),this.updateLocalStats(this.p2pChannel))}),this.store=n,this.exceptionMonitor=new qhe,this.exceptionMonitor.on("exception",(i,a,l)=>{this.onStatsException&&this.onStatsException(i,a,l)})}startUpdateStats(){this.updateStatsInterval||(this.updateStatsInterval=window.setInterval(this.updateStats,1e3))}stopUpdateStats(){this.updateStatsInterval&&(window.clearInterval(this.updateStatsInterval),this.updateStatsInterval=void 0)}reset(){this.localStats=new Map,this.remoteStats=new Map,this.trafficStats=void 0,this.trafficStatsPeerList=[],this.uplinkStats=void 0}getLocalAudioTrackStats(){return this.localStats.get(Le.LocalAudioTrack)||Th({},cI)}getLocalVideoTrackStats(){return this.localStats.get(Le.LocalVideoTrack)||Th({},lI)}getRemoteAudioTrackStats(n){const i=(u,h)=>{if(!this.trafficStats)return h;const f=this.trafficStats.peer_delay.find(g=>g.peer_uid===u);return f&&(h.publishDuration=f.B_ppad+(Date.now()-this.trafficStats.timestamp)),h},a={};if(n){var l;const u=(l=this.remoteStats.get(n))===null||l===void 0?void 0:l.audioStats;u&&(a[n]=i(n,u))}else Array.from(this.remoteStats.entries()).forEach(u=>{let[h,{audioStats:f}]=u;f&&(a[h]=i(h,f))});return a}getRemoteNetworkQualityStats(n){const i={};if(n){var a;const l=(a=this.remoteStats.get(n))===null||a===void 0?void 0:a.networkStats;l&&(i[n]=l)}else Array.from(this.remoteStats.entries()).forEach(l=>{let[u,{networkStats:h}]=l;h&&(i[u]=h)});return i}getRemoteVideoTrackStats(n){const i=(u,h)=>{if(!this.trafficStats)return h;const f=this.trafficStats.peer_delay.find(g=>g.peer_uid===u);return f&&(h.publishDuration=f.B_ppvd+(Date.now()-this.trafficStats.timestamp)),h},a={};if(n){var l;const u=(l=this.remoteStats.get(n))===null||l===void 0?void 0:l.videoStats;u&&(a[n]=i(n,u))}else Array.from(this.remoteStats.entries()).forEach(u=>{let[h,{videoStats:f}]=u;f&&(a[h]=i(h,f))});return a}getRTCStats(){let n=0,i=0,a=0,l=0;const u=this.localStats.get(Le.LocalAudioTrack);u&&(n+=u.sendBytes,i+=u.sendBitrate);const h=this.localStats.get(Le.LocalVideoTrack);h&&(n+=h.sendBytes,i+=h.sendBitrate);const f=this.localStats.get(Le.LocalVideoLowTrack);f&&(n+=f.sendBytes,i+=f.sendBitrate),this.remoteStats.forEach(_=>{let{audioStats:y,videoStats:T}=_;y&&(a+=y.receiveBytes,l+=y.receiveBitrate),T&&(a+=T.receiveBytes,l+=T.receiveBitrate)});let g=1;return this.trafficStats&&(g+=this.trafficStats.peer_delay.length),{Duration:0,UserCount:g,SendBitrate:i,SendBytes:n,RecvBytes:a,RecvBitrate:l,OutgoingAvailableBandwidth:this.uplinkStats?this.uplinkStats.B_uab/1e3:0,RTT:this.trafficStats?2*this.trafficStats.B_acd:0}}addLocalStats(n){this.localStats.set(n,void 0)}removeLocalStats(n){n?this.localStats.delete(n):this.localStats.clear()}addRemoteStats(n){this.remoteStats.set(n,{})}removeRemoteStats(n){n?this.remoteStats.delete(n):this.remoteStats.clear()}addP2PChannel(n){this.p2pChannel=n}updateTrafficStats(n){n.peer_delay=n.peer_delay.filter(i=>i.B_ppad!==void 0||i.B_ppvd!==void 0),n.peer_delay.filter(i=>this.trafficStatsPeerList.indexOf(i.peer_uid)===-1).forEach(i=>{var a;const l=(a=this.p2pChannel)===null||a===void 0?void 0:a.getRemoteMedia(i.peer_uid),u=l!=null&&l.videoSSRC?Zi.measureFromSubscribeStart(this.store.clientId,l.videoSSRC):0,h=l!=null&&l.audioSSRC?Zi.measureFromSubscribeStart(this.store.clientId,l.audioSSRC):0;i.B_ppad!==void 0&&i.B_ppvd!==void 0&&(this.onUploadPublishDuration&&this.onUploadPublishDuration(i.peer_uid,i.B_ppad,i.B_ppvd,u>h?u:h),this.trafficStatsPeerList.push(i.peer_uid))}),this.trafficStats=n}updateUplinkStats(n){this.uplinkStats&&this.uplinkStats.B_fir!==n.B_fir&&k.debug("[".concat(this.store.clientId,"]: Period fir changes to ").concat(n.B_fir)),this.uplinkStats=n}static isRemoteVideoFreeze(n,i,a){if(!n)return!1;const l=!!a&&i.framesDecodeFreezeTime>a.framesDecodeFreezeTime,u=!a||i.framesDecodeCount>a.framesDecodeCount;return l||!u}static isRemoteAudioFreeze(n){return!!n&&n._isFreeze()}isLocalVideoFreeze(n){return!(!n.inputFrame||!n.sentFrame)&&n.inputFrame.frameRate>5&&n.sentFrame.frameRate<3}updateLocalStats(n){Array.from(this.localStats.entries()).forEach(i=>{let[a,l]=i;switch(a){case Le.LocalVideoTrack:case Le.LocalVideoLowTrack:{const h=l,f=Th({},lI),g=n.getStats(),_=n.getLocalMedia(a);if(g){const y=g.videoSend.find(T=>T.ssrc===(_==null?void 0:_.ssrcs[0].ssrcId));if(y){const T=n.getLocalVideoSize(),A=n.getEncoderConfig(Le.LocalVideoTrack);y.codec!=="H264"&&y.codec!=="H265"&&y.codec!=="VP8"&&y.codec!=="VP9"&&y.codec!=="AV1X"&&y.codec!=="AV1"||(f.codecType=y.codec),f.sendBytes=y.bytes,f.sendBitrate=h?8*Math.max(0,f.sendBytes-h.sendBytes):0,y.inputFrame?(f.captureFrameRate=y.inputFrame.frameRate,f.captureResolutionHeight=y.inputFrame.height,f.captureResolutionWidth=y.inputFrame.width):T&&(f.captureResolutionWidth=T.width,f.captureResolutionHeight=T.height),y.sentFrame?(f.sendFrameRate=y.sentFrame.frameRate,f.sendResolutionHeight=y.sentFrame.height,f.sendResolutionWidth=y.sentFrame.width):T&&(f.sendResolutionWidth=T.width,f.sendResolutionHeight=T.height),y.avgEncodeMs&&(f.encodeDelay=y.avgEncodeMs),A&&A.bitrateMax&&(f.targetSendBitrate=1e3*A.bitrateMax),f.sendPackets=y.packets,f.sendPacketsLost=y.packetsLost,f.sendJitterMs=y.jitterMs,f.sendRttMs=y.rttMs,f.totalDuration=h?h.totalDuration+1:1,f.totalFreezeTime=h?h.totalFreezeTime:0,this.isLocalVideoFreeze(y)&&(f.totalFreezeTime+=1),y.scalabilityMode&&this.scalabilityMode!==y.scalabilityMode&&(k.debug("[".concat(this.store.clientId,"]: The scalabilityMode of the video sending stream is ").concat(y.scalabilityMode)),this.scalabilityMode=y.scalabilityMode)}this.trafficStats&&(f.currentPacketLossRate=(this.trafficStats.B_pvlr4||0)/100)}var u;this.localStats.set(a,f),((h==null?void 0:h.sendResolutionWidth)!==f.sendResolutionWidth||(h==null?void 0:h.sendResolutionHeight)!==f.sendResolutionHeight)&&((u=this.onStatsChanged)===null||u===void 0||u.call(this,"resolution",{width:f.sendResolutionWidth,height:f.sendResolutionHeight})),f&&_&&this.exceptionMonitor.setLocalVideoStats(this.store.uid,_.track,f);break}case Le.LocalAudioTrack:{const h=l,f=Th({},cI),g=n.getStats(),_=n.getLocalMedia(a);if(g){const y=g.audioSend.find(T=>T.ssrc===(_==null?void 0:_.ssrcs[0].ssrcId));if(y){if(y.codec!=="opus"&&y.codec!=="aac"&&y.codec!=="PCMU"&&y.codec!=="PCMA"&&y.codec!=="G722"||(f.codecType=y.codec),y.inputLevel)f.sendVolumeLevel=Math.round(32767*y.inputLevel);else{const T=n.getLocalAudioVolume();T&&(f.sendVolumeLevel=Math.round(32767*T))}f.sendBytes=y.bytes,f.sendPackets=y.packets,f.sendPacketsLost=y.packetsLost,f.sendJitterMs=y.jitterMs,f.sendRttMs=y.rttMs,f.sendBitrate=h?8*Math.max(0,f.sendBytes-h.sendBytes):0}}this.trafficStats&&(f.currentPacketLossRate=(this.trafficStats.B_palr4||0)/100),this.localStats.set(Le.LocalAudioTrack,f),f&&_&&this.exceptionMonitor.setLocalAudioStats(this.store.uid,_.track,f);break}}})}updateRemoteStats(n){Array.from(this.remoteStats.entries()).forEach(i=>{var a,l;let[u,{videoStats:h,audioStats:f,videoPcStats:g}]=i;const _=f,y=h,T=g,A=Th({},Y3),D=Th({},X3),W=Th({},Mhe),{audioTrack:F,videoTrack:U,audioSSRC:z,videoSSRC:X}=n.getRemoteMedia(u);let ue;ue=n instanceof Ia?n.getStats(!0):n.getStats();const pe=(a=ue)===null||a===void 0?void 0:a.audioRecv.find(Re=>Re.ssrc===z),Ee=(l=ue)===null||l===void 0?void 0:l.videoRecv.find(Re=>Re.ssrc===X),Se=this.trafficStats&&this.trafficStats.peer_delay.find(Re=>Re.peer_uid===u);if(pe&&(pe.codec!=="opus"&&pe.codec!=="aac"&&pe.codec!=="PCMU"&&pe.codec!=="PCMA"&&pe.codec!=="G722"||(A.codecType=pe.codec),pe.outputLevel?A.receiveLevel=Math.round(32767*pe.outputLevel):F&&(A.receiveLevel=Math.round(32767*F.getVolumeLevel())),A.receiveBytes=pe.bytes,A.receivePackets=pe.packets,A.receivePacketsLost=pe.packetsLost,A.packetLossRate=A.receivePacketsLost/(A.receivePackets+A.receivePacketsLost),A.receiveBitrate=_?8*Math.max(0,A.receiveBytes-_.receiveBytes):0,A.totalDuration=_?_.totalDuration+1:1,A.totalFreezeTime=_?_.totalFreezeTime:0,A.freezeRate=A.totalFreezeTime/A.totalDuration,A.receiveDelay=pe.jitterBufferMs,A.totalDuration>10&&ng.isRemoteAudioFreeze(F)&&(A.totalFreezeTime+=1)),Ee){Ee.codec!=="H264"&&Ee.codec!=="H265"&&Ee.codec!=="VP8"&&Ee.codec!=="VP9"&&Ee.codec!=="AV1X"&&Ee.codec!=="AV1"||(D.codecType=Ee.codec),D.receiveBytes=Ee.bytes,D.receiveBitrate=y?8*Math.max(0,D.receiveBytes-y.receiveBytes):0,D.decodeFrameRate=Ee.decodeFrameRate<0?0:Ee.decodeFrameRate,D.renderFrameRate=Ee.decodeFrameRate<0?0:Ee.decodeFrameRate,Ee.outputFrame&&(D.renderFrameRate=Ee.outputFrame.frameRate),Ee.receivedFrame?(D.receiveFrameRate=Ee.receivedFrame.frameRate,D.receiveResolutionHeight=Ee.receivedFrame.height,D.receiveResolutionWidth=Ee.receivedFrame.width):U&&(D.receiveResolutionHeight=U._videoHeight||0,D.receiveResolutionWidth=U._videoWidth||0),Ee.framesRateFirefox!==void 0&&(D.receiveFrameRate=Math.round(Ee.framesRateFirefox)),D.receivePackets=Ee.packets,D.receivePacketsLost=Ee.packetsLost,D.packetLossRate=D.receivePacketsLost/(D.receivePackets+D.receivePacketsLost),D.totalDuration=y?y.totalDuration+1:1,D.totalFreezeTime=y?y.totalFreezeTime:0,D.receiveDelay=Ee.jitterBufferMs||0;const Re=!!X&&n.getRemoteVideoIsReady(X);U&&Re&&ng.isRemoteVideoFreeze(U,Ee,T)&&(D.totalFreezeTime+=1),D.freezeRate=D.totalFreezeTime/D.totalDuration}Se&&(A.end2EndDelay=Se.B_ad,D.end2EndDelay=Se.B_vd,A.transportDelay=Se.B_ed,D.transportDelay=Se.B_ed,A.currentPacketLossRate=Se.B_ealr4/100,D.currentPacketLossRate=Se.B_evlr4/100,W.uplinkNetworkQuality=Se.B_punq?Se.B_punq:0,W.downlinkNetworkQuality=Se.B_pdnq?Se.B_pdnq:0),this.remoteStats.set(u,{audioStats:A,videoStats:D,videoPcStats:Ee,networkStats:W}),F&&this.exceptionMonitor.setRemoteAudioStats(F,A),U&&this.exceptionMonitor.setRemoteVideoStats(U,D)})}}function F6(t,n){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),i.push.apply(i,a)}return i}function rg(t){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?F6(Object(i),!0).forEach(function(a){V(t,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):F6(Object(i)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(i,a))})}return t}class ppe extends _r{constructor(n,i,a,l){super(),V(this,"spec",void 0),V(this,"token",void 0),V(this,"websocket",void 0),V(this,"pingpongTimer",void 0),V(this,"reconnectMode","retry"),V(this,"serviceMode",void 0),V(this,"reqId",0),V(this,"commandReqId",0),V(this,"handleWebSocketOpen",()=>{this.reconnectMode="retry",this.startPingPong()}),V(this,"handleWebSocketMessage",u=>{if(!u.data)return;const h=JSON.parse(u.data);h.requestId?this.emit("@".concat(h.requestId,"-").concat(h.sid),h):this.serviceMode===Ni.INJECT?this.emit(ul.INJECT_STREAM_STATUS,h):(ht.workerEvent(this.spec.sid,{actionType:"status",serverCode:h.code,workerType:this.serviceMode===Ni.TRANSCODE?1:2}),this.emit(ul.PUBLISH_STREAM_STATUS,h))}),this.spec=i,this.token=n,this.serviceMode=l,this.websocket=new T0("live-streaming",a),this.websocket.on(kt.CONNECTED,this.handleWebSocketOpen),this.websocket.on(kt.ON_MESSAGE,this.handleWebSocketMessage),this.websocket.on(kt.REQUEST_NEW_URLS,(u,h)=>{ri(this,ul.REQUEST_NEW_ADDRESS).then(u).catch(h)}),this.websocket.on(kt.RECONNECTING,()=>{this.websocket.reconnectMode=this.reconnectMode})}init(n){return this.websocket.init(n)}async request(n,i,a,l){this.reqId+=1,n==="request"&&(this.commandReqId+=1);const u=this.commandReqId,h=this.reqId;if(!h||!this.websocket)throw new me(K.UNEXPECTED_ERROR);const f=rg({command:n,sdkVersion:ls==="4.21.0"?"0.0.1":ls,seq:h,requestId:h,allocate:a,cname:this.spec.cname,appId:this.spec.appId,sid:this.spec.sid,uid:this.spec.uid.toString(),ts:Math.floor(Date.now()/1e3)},i);if(this.websocket.state==="closed")throw new me(K.WS_DISCONNECT);const g=()=>new We((A,D)=>{this.websocket.once(kt.CLOSED,()=>D(new me(K.WS_ABORT))),this.websocket.once(kt.CONNECTED,A)});this.websocket.state!=="connected"&&await g(),f.clientRequest&&(f.clientRequest.workerToken=this.token);const _=new We((A,D)=>{const W=()=>{D(new me(K.WS_ABORT))};this.websocket.once(kt.RECONNECTING,W),this.websocket.once(kt.CLOSED,W),this.once("@".concat(h,"-").concat(this.spec.sid),F=>{A(F)})});l&&ht.workerEvent(this.spec.sid,rg(rg({},l),{},{requestId:u,actionType:"request",payload:JSON.stringify(i.clientRequest),serverCode:0,code:0}));const y=Date.now();this.websocket.sendMessage(f);let T=null;try{T=await _}catch(A){if(this.websocket.state==="closed")throw A;return await g(),await this.request(n,i,a)}return l&&ht.workerEvent(this.spec.sid,rg(rg({},l),{},{requestId:u,actionType:"response",payload:JSON.stringify(T.serverResponse),serverCode:T.code,success:T.code===200,responseTime:Date.now()-y})),T.code!==200&&this.handleResponseError(T),T}tryNextAddress(){this.reconnectMode="tryNext",this.websocket.reconnect("tryNext")}close(){const n=ls==="4.21.0"?"0.0.1":ls;this.reqId+=1,this.websocket.state==="connected"?(this.websocket.sendMessage({command:"request",appId:this.spec.appId,cname:this.spec.cname,uid:this.spec.uid.toString(),sdkVersion:n,sid:this.spec.sid,seq:this.reqId,ts:Math.floor(Date.now()/1e3),requestId:this.reqId,clientRequest:{command:"DestroyWorker"}}),this.websocket.close(!1,!0)):this.websocket.close(!1),this.pingpongTimer&&(window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0)}handleResponseError(n){switch(n.code){case di.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM:return void k.warning("live stream response already exists stream");case di.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR:case di.LIVE_STREAM_RESPONSE_BAD_STREAM:case di.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR:return new me(K.LIVE_STREAMING_INVALID_ARGUMENT,"",{code:n.code}).throw();case di.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST:if(n.serverResponse.command==="UnpublishStream"||n.serverResponse.command==="UninjectStream")return;throw new me(K.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case di.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED:return new me(K.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED,"",{code:n.code}).throw();case di.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:{const i=new me(K.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE);return this.emit(ul.WARNING,i,n.serverResponse.url)}case di.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN:{const i=new me(K.LIVE_STREAMING_WARN_FREQUENT_REQUEST);return this.emit(ul.WARNING,i,n.serverResponse.url)}case di.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH:throw new me(K.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case di.LIVE_STREAM_RESPONSE_NOT_SUPPORTED:return new me(K.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED,"",{code:n.code}).throw();case di.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM:{const i=new me(K.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT);return this.emit(ul.WARNING,i,n.serverResponse.url)}case di.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR:return new me(K.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:n.code}).throw();case di.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT:throw new me(K.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream resource limit",{retry:!0,changeAddress:!0});case di.LIVE_STREAM_RESPONSE_WORKER_LOST:case di.LIVE_STREAM_RESPONSE_WORKER_QUIT:if(n.serverResponse.command==="UnpublishStream"||n.serverResponse.command==="UninjectStream")return;throw new me(K.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case di.ERROR_FAIL_SEND_MESSAGE:if(n.serverResponse.command==="UnpublishStream"||n.serverResponse.command==="UninjectStream")return;if(n.serverResponse.command==="UpdateTranscoding"||n.serverResponse.command==="ControlStream")return new me(K.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{code:n.code}).throw();throw new me(K.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case di.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case di.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case di.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case di.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:return new me(K.LIVE_STREAMING_CDN_ERROR,"",{code:n.code}).throw()}}startPingPong(){this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(()=>{this.websocket.state==="connected"&&this.request("ping",{}).catch(c_)},6e3)}}function U6(t,n){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),i.push.apply(i,a)}return i}function Yo(t){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?U6(Object(i),!0).forEach(function(a){V(t,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):U6(Object(i)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(i,a))})}return t}class fpe extends _r{constructor(n){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:qr,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:qr;super(),V(this,"onLiveStreamWarning",void 0),V(this,"onLiveStreamError",void 0),V(this,"onInjectStatusChange",void 0),V(this,"spec",void 0),V(this,"retryTimeout",1e4),V(this,"connection",void 0),V(this,"httpRetryConfig",void 0),V(this,"wsRetryConfig",void 0),V(this,"streamingTasks",new Map),V(this,"isStartingStreamingTask",!1),V(this,"taskMutex",new Oi("live-streaming")),V(this,"cancelToken",Go.CancelToken.source()),V(this,"transcodingConfig",void 0),V(this,"injectConfig",Yo({},Yle)),V(this,"injectLoopTimes",0),V(this,"uapResponse",void 0),V(this,"lastTaskId",1),V(this,"statusError",new Map),this.spec=n,this.httpRetryConfig=a,this.wsRetryConfig=i}async setTranscodingConfig(n){const i=Yo(Yo({},qle),n);i.videoCodecProfile!==66&&i.videoCodecProfile!==77&&i.videoCodecProfile!==100&&(k.debug("[".concat(this.spec.clientId,"] set transcoding config, fix video codec profile: ").concat(i.videoCodecProfile," -> 100")),i.videoCodecProfile=100),i.transcodingUsers||(i.transcodingUsers=i.userConfigs),i.transcodingUsers&&(i.transcodingUsers=i.transcodingUsers.map(h=>Yo(Yo(Yo({},Kle),h),{},{zOrder:h.zOrder?h.zOrder+1:1}))),function(h){xr(h.width)||Xn(h.width,"config.width",0,1e4),xr(h.height)||Xn(h.height,"config.height",0,1e4),xr(h.videoBitrate)||Xn(h.videoBitrate,"config.videoBitrate",1,1e6),xr(h.videoFrameRate)||Xn(h.videoFrameRate,"config.videoFrameRate"),xr(h.lowLatency)||$l(h.lowLatency,"config.lowLatency"),xr(h.audioSampleRate)||pi(h.audioSampleRate,"config.audioSampleRate",[32e3,44100,48e3]),xr(h.audioBitrate)||Xn(h.audioBitrate,"config.audioBitrate",1,128),xr(h.audioChannels)||pi(h.audioChannels,"config.audioChannels",[1,2,3,4,5]),xr(h.videoGop)||Xn(h.videoGop,"config.videoGop"),xr(h.videoCodecProfile)||pi(h.videoCodecProfile,"config.videoCodecProfile",[66,77,100]),xr(h.userCount)||Xn(h.userCount,"config.userCount",0,17),xr(h.backgroundColor)||Xn(h.backgroundColor,"config.backgroundColor",0,16777215),xr(h.userConfigExtraInfo)||Mi(h.userConfigExtraInfo,"config.userConfigExtraInfo",0,4096,!1),h.transcodingUsers&&!xr(h.transcodingUsers)&&(Hl(h.transcodingUsers,"config.transcodingUsers"),h.transcodingUsers.forEach((f,g)=>{g_(f.uid),xr(f.x)||Xn(f.x,"transcodingUser[".concat(g,"].x"),0,1e4),xr(f.y)||Xn(f.y,"transcodingUser[".concat(g,"].y"),0,1e4),xr(f.width)||Xn(f.width,"transcodingUser[".concat(g,"].width"),0,1e4),xr(f.height)||Xn(f.height,"transcodingUser[".concat(g,"].height"),0,1e4),xr(f.zOrder)||Xn(f.zOrder-1,"transcodingUser[".concat(g,"].zOrder"),0,100),xr(f.alpha)||Xn(f.alpha,"transcodingUser[".concat(g,"].alpha"),0,1,!1)})),xr(h.watermark)||r1(h.watermark,"watermark"),xr(h.backgroundImage)||r1(h.backgroundImage,"backgroundImage"),h.images&&!xr(h.images)&&(Hl(h.images,"config.images"),h.images.forEach((f,g)=>{r1(f,"images[".concat(g,"]"))}))}(i);const a=[];i.images&&a.push(...i.images.map(h=>Yo(Yo(Yo({},n1),h),{},{zOrder:255}))),i.backgroundImage&&(a.push(Yo(Yo(Yo({},n1),i.backgroundImage),{},{zOrder:0})),delete i.backgroundImage),i.watermark&&(a.push(Yo(Yo(Yo({},n1),i.watermark),{},{zOrder:255})),delete i.watermark),i.images=a,i.transcodingUsers&&(i.userConfigs=i.transcodingUsers.map(h=>Yo({},h)),i.userCount=i.transcodingUsers.length,delete i.transcodingUsers);const l=(i.userConfigs||[]).map(h=>typeof h.uid=="number"?We.resolve(h.uid):CB(h.uid,this.spec,this.cancelToken.token,this.httpRetryConfig));if((await We.all(l)).forEach((h,f)=>{i.userConfigs&&i.userConfigs[f]&&(i.userConfigs[f].uid=h)}),this.transcodingConfig=i,this.connection)try{var u;const h=await this.connection.request("request",{clientRequest:{command:"UpdateTranscoding",transcodingConfig:this.transcodingConfig}},!1,{command:"UpdateTranscoding",workerType:1,requestByUser:!0,tid:Array.from(Tc(u=this.streamingTasks).call(u)).map(f=>f.taskId).join("#")});k.debug("[".concat(this.spec.clientId,"] update live transcoding config success, code: ").concat(h.code,", config:"),JSON.stringify(this.transcodingConfig))}catch(h){if(!h.data||!h.data.retry)throw h;h.data.changeAddress&&this.connection.tryNextAddress(),this.streamingTasks.forEach(f=>{k.warning("[".concat(this.spec.clientId,"] live streaming receive error"),h.toString(),"try to republish",f.url),this.startLiveStreamingTask(f.url,f.mode,h).then(()=>{k.debug("[".concat(this.spec.clientId,"] live streaming republish ").concat(f.url," success"))}).catch(g=>{k.error("[".concat(this.spec.clientId,"] live streaming republish failed"),f.url,g.toString()),this.onLiveStreamError&&this.onLiveStreamError(f.url,g)})})}}setInjectStreamConfig(n,i){this.injectConfig=Object.assign({},this.injectConfig,n),this.injectLoopTimes=i}async startLiveStreamingTask(n,i,a){var l;if(Array.from(Tc(l=this.streamingTasks).call(l)).find(_=>_.mode===Ni.INJECT)&&i===Ni.INJECT)return new me(K.LIVE_STREAMING_TASK_CONFLICT,"inject stream over limit").throw();if(!this.transcodingConfig&&i===Ni.TRANSCODE)throw new me(K.INVALID_OPERATION,"[LiveStreaming] no transcoding config found, can not start transcoding streaming task");let h={command:"PublishStream",ts:Date.now(),url:n,uid:this.spec.uid.toString(),autoDestroyTime:100,acceptImageTimeout:!0};k.debug("[".concat(this.spec.clientId,"] start live streaming ").concat(n,", mode: ").concat(i));const f=await this.taskMutex.lock();if(!this.connection&&a)return void f();if(this.streamingTasks.get(n)&&!a)return f(),new me(K.LIVE_STREAMING_TASK_CONFLICT).throw();try{this.connection||(this.connection=await this.connect(i))}catch(_){throw f(),_}switch(i){case Ni.TRANSCODE:h.transcodingConfig=Yo({},this.transcodingConfig);break;case Ni.RAW:break;case Ni.INJECT:h={cname:this.spec.cname,command:"InjectStream",sid:this.spec.sid,transcodingConfig:this.injectConfig,ts:Date.now(),url:n,loopTimes:this.injectLoopTimes}}this.uapResponse&&this.uapResponse.vid&&(h.vid=this.uapResponse.vid),this.isStartingStreamingTask=!0;const g=this.lastTaskId++;try{const _=new We((T,A)=>{yi(this.retryTimeout).then(()=>{if(a)return A(a);const D=this.statusError.get(n);return D?(this.statusError.delete(n),A(D)):void 0})}),y=await We.race([this.connection.request("request",{clientRequest:h},!0,{url:n,command:"PublishStream",workerType:i===Ni.TRANSCODE?1:2,requestByUser:!a,tid:g.toString()}),_]);this.isStartingStreamingTask=!1,k.debug("[".concat(this.spec.clientId,"] live streaming started, code: ").concat(y.code)),this.streamingTasks.set(n,{clientRequest:h,mode:i,url:n,taskId:g}),f()}catch(_){if(f(),this.isStartingStreamingTask=!1,!_.data||!_.data.retry||a)throw _;return _.data.changeAddress?(this.connection.tryNextAddress(),await this.startLiveStreamingTask(n,i,_)):await this.startLiveStreamingTask(n,i,_)}}stopLiveStreamingTask(n){return new We((i,a)=>{const l=this.streamingTasks.get(n);if(!l||!this.connection)return new me(K.UNEXPECTED_ERROR,"can not find streaming task to stop").throw();const u=l.mode;l.abortTask=()=>{k.debug("[".concat(this.spec.clientId,"] stop live streaming success(worker exception)")),this.streamingTasks.delete(n),i()},this.connection.request("request",{clientRequest:{command:u===Ni.INJECT?"UninjectStream":"UnpublishStream",url:l.url}},!1,{url:n,command:"UnPublishStream",workerType:u===Ni.TRANSCODE?1:2,requestByUser:!0,tid:(this.lastTaskId++).toString()}).then(h=>{k.debug("[".concat(this.spec.clientId,"] stop live streaming success, code: ").concat(h.code)),this.streamingTasks.delete(n),this.streamingTasks.size===0&&u!==Ni.INJECT&&(this.connection&&this.connection.close(),this.connection=void 0),i(),u===Ni.INJECT&&this.onInjectStatusChange&&this.onInjectStatusChange(Wp.INJECT_STREAM_STATUS_STOP_SUCCESS,this.spec.uid,n)}).catch(a)})}async controlInjectStream(n,i,a,l){const u=this.streamingTasks.get(n);if(!u||!this.connection||u.mode!==Ni.INJECT)throw new me(K.INVALID_OPERATION,"can not find inject stream task to control");return(await this.connection.request("request",{clientRequest:{command:"ControlStream",url:n,control:i,audioVolume:a,position:l}})).serverResponse}resetAllTask(){var n;const i=Array.from(Tc(n=this.streamingTasks).call(n));this.terminate();for(const a of i)this.startLiveStreamingTask(a.url,a.mode).catch(l=>{this.onLiveStreamError&&this.onLiveStreamError(a.url,l)})}terminate(){this.cancelToken&&this.cancelToken.cancel(),this.streamingTasks=new Map,this.isStartingStreamingTask=!1,this.statusError=new Map,this.cancelToken=Go.CancelToken.source(),this.uapResponse=void 0,this.connection&&this.connection.close(),this.connection=void 0}async connect(n){if(this.connection)throw new me(K.UNEXPECTED_ERROR,"live streaming connection has already connected");const i=await ri(this,v_.REQUEST_WORKER_MANAGER_LIST,n);return this.uapResponse=i,this.connection=new ppe(i.workerToken,this.spec,this.wsRetryConfig,n),this.connection.on(ul.WARNING,(a,l)=>this.onLiveStreamWarning&&this.onLiveStreamWarning(l,a)),this.connection.on(ul.PUBLISH_STREAM_STATUS,a=>this.handlePublishStreamServer(a)),this.connection.on(ul.INJECT_STREAM_STATUS,a=>this.handleInjectStreamServerStatus(a)),this.connection.on(ul.REQUEST_NEW_ADDRESS,(a,l)=>{if(!this.connection)return l(new me(K.UNEXPECTED_ERROR,"can not get new live streaming address list"));ri(this,v_.REQUEST_WORKER_MANAGER_LIST,n).then(u=>{this.uapResponse=u,a(u.addressList)}).catch(l)}),await this.connection.init(i.addressList),this.connection}handlePublishStreamServer(n){const i=n.serverStatus&&n.serverStatus.url||"empty_url",a=this.streamingTasks.get(i),l=n.reason;switch(n.code){case di.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case di.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case di.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case di.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:{const h=new me(K.LIVE_STREAMING_CDN_ERROR,"",{code:n.code});if(a)return k.error(h.toString()),this.onLiveStreamError&&this.onLiveStreamError(i,h);if(!this.isStartingStreamingTask)return;this.statusError.set(i,h)}case di.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:{const h=new me(K.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE,l);return this.onLiveStreamWarning&&this.onLiveStreamWarning(i,h)}case di.LIVE_STREAM_RESPONSE_WORKER_LOST:case di.LIVE_STREAM_RESPONSE_WORKER_QUIT:{var u;if(!this.connection)return;this.connection.tryNextAddress();const h=Array.from(Tc(u=this.streamingTasks).call(u));for(const f of h)f.abortTask?f.abortTask():(k.warning("[".concat(this.spec.clientId,"] publish stream status code"),n.code,"try to republish",f.url),this.startLiveStreamingTask(f.url,f.mode,new me(K.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:n.code})).then(()=>{k.debug("[".concat(this.spec.clientId,"] republish live stream success"),f.url)}).catch(g=>{k.error(g.toString()),this.onLiveStreamError&&this.onLiveStreamError(f.url,g)}));return}}}handleInjectStreamServerStatus(n){const i=Number(n.uid),a=n.serverStatus&&n.serverStatus.url;switch(n.code){case 200:return void(this.onInjectStatusChange&&this.onInjectStatusChange(Wp.INJECT_STREAM_STATUS_START_SUCCESS,i,a));case 451:return this.onInjectStatusChange&&this.onInjectStatusChange(Wp.INJECT_STREAM_STATUS_START_ALREADY_EXISTS,i,a),void this.streamingTasks.delete(a);case 453:return this.onInjectStatusChange&&this.onInjectStatusChange(Wp.INJECT_STREAM_STATUS_START_UNAUTHORIZED,i,a),void this.streamingTasks.delete(a);case 470:return this.onInjectStatusChange&&this.onInjectStatusChange(Wp.INJECT_STREAM_STATUS_BROKEN,i,a),void this.streamingTasks.delete(a);case 499:return this.onInjectStatusChange&&this.onInjectStatusChange(Wp.INJECT_STREAM_STATUS_START_TIMEOUT,i,a),void this.streamingTasks.delete(a);default:return void k.debug("inject stream server status",n)}}hasUrl(n){return this.streamingTasks.has(n)}}class B6{constructor(){V(this,"destChannelMediaInfos",new Map),V(this,"srcChannelMediaInfo",void 0)}setSrcChannelInfo(n){X4(n),this.srcChannelMediaInfo=n}addDestChannelInfo(n){X4(n),this.destChannelMediaInfos.set(n.channelName,n)}removeDestChannelInfo(n){m_(n),this.destChannelMediaInfos.delete(n)}getSrcChannelMediaInfo(){return this.srcChannelMediaInfo}getDestChannelMediaInfo(){return this.destChannelMediaInfos}}function V6(t){if(!(t instanceof B6))return new me(K.INVALID_PARAMS,"Config should be instance of [ChannelMediaRelayConfiguration]").throw();const n=t.getSrcChannelMediaInfo(),i=t.getDestChannelMediaInfo();if(!n)return new me(K.INVALID_PARAMS,"srcChannelMediaInfo should not be empty").throw();if(i.size===0)return new me(K.INVALID_PARAMS,"destChannelMediaInfo should not be empty").throw()}class mpe extends _r{constructor(n,i,a){super(),V(this,"ws",void 0),V(this,"requestId",1),V(this,"heartBeatTimer",void 0),V(this,"joinInfo",void 0),V(this,"clientId",void 0),V(this,"onOpen",()=>{this.emit("open"),this.startHeartBeatCheck()}),V(this,"onClose",l=>{this.emit("close"),this.dispose()}),V(this,"onMessage",l=>{const u=JSON.parse(l.data);if(!u||u.command!=="serverResponse"||!u.requestId)return u&&u.command==="serverStatus"&&u.serverStatus&&u.serverStatus.command?(this.emit("status",u.serverStatus),void this.emit(u.serverStatus.command,u.serverStatus)):void 0;this.emit("req_".concat(u.requestId),u)}),this.joinInfo=n,this.clientId=i,this.ws=new T0("cross-channel-".concat(this.clientId),a),this.ws.on(kt.RECONNECTING,()=>{this.ws.reconnectMode="retry",this.emit("reconnecting")}),this.ws.on(kt.CONNECTED,this.onOpen),this.ws.on(kt.ON_MESSAGE,this.onMessage),this.ws.on(kt.CLOSED,this.onClose)}isConnect(){return this.ws.state==="connected"}sendMessage(n){const i=this.requestId++;return n.requestId=i,n.seq=i,this.ws.sendMessage(n),i}waitStatus(n){return new We((i,a)=>{const l=window.setTimeout(()=>{a(new me(K.TIMEOUT,"wait status timeout, status: ".concat(n)))},5e3);this.once(n,u=>{window.clearTimeout(l),u.state&&u.state!==0?a(new me(K.CROSS_CHANNEL_WAIT_STATUS_ERROR,"wait status error, status: ".concat(n))):i(void 0)}),this.once("dispose",()=>{window.clearTimeout(l),a(new me(K.WS_ABORT))})})}async request(n){if(this.ws.state==="closed")throw new me(K.WS_DISCONNECT);const i=()=>new We((h,f)=>{this.ws.once(kt.CLOSED,()=>f(new me(K.WS_ABORT))),this.ws.once(kt.CONNECTED,h)});this.ws.state!=="connected"&&await i();const a=this.sendMessage(n),l=new We((h,f)=>{const g=()=>{f(new me(K.WS_ABORT))};this.ws.once(kt.RECONNECTING,g),this.ws.once(kt.CLOSED,g),this.once("req_".concat(a),h),yi(3e3).then(()=>{this.removeAllListeners("req_".concat(a)),this.ws.off(kt.RECONNECTING,g),this.ws.off(kt.CLOSED,g),f(new me(K.TIMEOUT,"cross channel ws request timeout"))})}),u=await l;if(!u||u.code!==200)throw new me(K.CROSS_CHANNEL_SERVER_ERROR_RESPONSE,"response: ".concat(JSON.stringify(u)));return u}async connect(n){this.ws.removeAllListeners(kt.REQUEST_NEW_URLS),this.ws.on(kt.REQUEST_NEW_URLS,i=>{i(n)}),await this.ws.init(n)}dispose(){this.clearHeartBeatCheck(),this.emit("dispose"),this.removeAllListeners(),this.ws.close()}sendPing(n){const i=this.requestId++;return n.requestId=i,this.ws.sendMessage(n),i}startHeartBeatCheck(){this.heartBeatTimer&&window.clearInterval(this.heartBeatTimer),this.heartBeatTimer=window.setInterval(()=>{this.sendPing({command:"ping",appId:this.joinInfo.appId,cname:this.joinInfo.cname,uid:this.joinInfo.uid.toString(),sid:this.joinInfo.sid,ts:+new Date,requestId:0})},3e3)}clearHeartBeatCheck(){window.clearInterval(this.heartBeatTimer),this.heartBeatTimer=void 0}}class gpe extends _r{set state(n){n!==this._state&&(n!==ra.RELAY_STATE_FAILURE&&(this.errorCode=zp.RELAY_OK),this.emit("state",n,this.errorCode),this._state=n)}get state(){return this._state}constructor(n,i,a,l,u){super(),V(this,"joinInfo",void 0),V(this,"sid",void 0),V(this,"clientId",void 0),V(this,"cancelToken",Go.CancelToken.source()),V(this,"workerToken",void 0),V(this,"requestId",0),V(this,"signal",void 0),V(this,"prevChannelMediaConfig",void 0),V(this,"httpRetryConfig",void 0),V(this,"_resolution",void 0),V(this,"_state",ra.RELAY_STATE_IDLE),V(this,"errorCode",zp.RELAY_OK),V(this,"onStatus",h=>{k.debug("[".concat(this.clientId,"] ChannelMediaStatus: ").concat(JSON.stringify(h))),h&&h.command&&(h.command==="onAudioPacketReceived"&&this.emit("event",Wl.PACKET_RECEIVED_AUDIO_FROM_SRC),h.command==="onVideoPacketReceived"&&this.emit("event",Wl.PACKET_RECEIVED_VIDEO_FROM_SRC),h.command==="onSrcTokenPrivilegeDidExpire"&&(this.errorCode=zp.SRC_TOKEN_EXPIRED,this.state=ra.RELAY_STATE_FAILURE),h.command==="onDestTokenPrivilegeDidExpire"&&(this.errorCode=zp.DEST_TOKEN_EXPIRED,this.state=ra.RELAY_STATE_FAILURE))}),V(this,"onReconnect",async()=>{k.debug("[".concat(this.clientId,"] ChannelMediaSocket disconnect, reconnecting")),this.emit("event",Wl.NETWORK_DISCONNECTED),this.state=ra.RELAY_STATE_IDLE,this.prevChannelMediaConfig&&this.sendStartRelayMessage(this.prevChannelMediaConfig).catch(h=>{this.state!==ra.RELAY_STATE_IDLE&&(k.error("auto restart channel media relay failed",h.toString()),this.errorCode=zp.SERVER_CONNECTION_LOST,this.state=ra.RELAY_STATE_FAILURE)})}),this.joinInfo=n,this.clientId=i,this.sid=_0(),this.signal=new mpe(this.joinInfo,this.clientId,a),this.httpRetryConfig=l,this._resolution=u}async startChannelMediaRelay(n){if(this.state!==ra.RELAY_STATE_IDLE)throw new me(K.INVALID_OPERATION);this.state=ra.RELAY_STATE_CONNECTING,await this.connect(),k.debug("[".concat(this.clientId,"] startChannelMediaRelay: connect success"));try{await this.sendStartRelayMessage(n)}catch(i){throw i.data&&i.data.serverResponse&&i.data.serverResponse.command==="SetSourceChannel"?new me(K.CROSS_CHANNEL_FAILED_JOIN_SRC):i.data&&i.data.serverResponse&&i.serverResponse.command==="SetDestChannelStatus"?new me(K.CROSS_CHANNEL_FAILED_JOIN_DEST):i.data&&i.data.serverResponse&&i.serverResponse.command==="StartPacketTransfer"?new me(K.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST):i}this.prevChannelMediaConfig=n}async updateChannelMediaRelay(n){if(this.state!==ra.RELAY_STATE_RUNNING)throw new me(K.INVALID_OPERATION);await this.sendUpdateMessage(n),this.prevChannelMediaConfig=n}async setVideoProfile(n){if(this._resolution=n,this.state!==ra.RELAY_STATE_RUNNING)throw new me(K.INVALID_OPERATION);const i=this.genMessage(Po.SetVideoProfile);await this.signal.request(i),k.debug("[".concat(this.clientId,"] startChannelMediaRelay: setVideoProfile success"))}async stopChannelMediaRelay(){await this.sendStopRelayMessage(),k.debug("[".concat(this.clientId,"] stopChannelMediaRelay: send stop message success")),this.state=ra.RELAY_STATE_IDLE,this.dispose()}dispose(){k.debug("[".concat(this.clientId,"] disposeChannelMediaRelay")),this.cancelToken.cancel(),this.cancelToken=Go.CancelToken.source(),this.state=ra.RELAY_STATE_IDLE,this.emit("dispose"),this.signal.dispose(),this.prevChannelMediaConfig=void 0}async connect(){const n=await mue(this.joinInfo,this.cancelToken.token,this.httpRetryConfig);this.workerToken=n.workerToken,await this.signal.connect(n.addressList),this.emit("event",Wl.NETWORK_CONNECTED),this.signal.on("status",this.onStatus),this.signal.on("reconnecting",this.onReconnect)}async sendStartRelayMessage(n){const i=this.genMessage(Po.StopPacketTransfer);await this.signal.request(i),await this.signal.waitStatus("Normal Quit"),k.debug("[".concat(this.clientId,"] startChannelMediaRelay: StopPacketTransfer success"));const a=this.genMessage(Po.SetSdkProfile,n);await this.signal.request(a),k.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSdkProfile success"));const l=this.genMessage(Po.SetSourceChannel,n);await this.signal.request(l),await this.signal.waitStatus("SetSourceChannelStatus"),this.emit("event",Wl.PACKET_JOINED_SRC_CHANNEL),k.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSourceChannel success"));const u=this.genMessage(Po.SetSourceUserId,n);await this.signal.request(u),k.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSourceUserId success"));const h=this.genMessage(Po.SetDestChannel,n);await this.signal.request(h),await this.signal.waitStatus("SetDestChannelStatus"),this.emit("event",Wl.PACKET_JOINED_DEST_CHANNEL),k.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetDestChannel success"));const f=this.genMessage(Po.StartPacketTransfer,n);await this.signal.request(f),this.emit("event",Wl.PACKET_SENT_TO_DEST_CHANNEL),this.state=ra.RELAY_STATE_RUNNING,k.debug("[".concat(this.clientId,"] startChannelMediaRelay: StartPacketTransfer success")),this.setVideoProfile(this._resolution)}async sendUpdateMessage(n){const i=this.genMessage(Po.UpdateDestChannel,n);await this.signal.request(i),this.emit("event",Wl.PACKET_UPDATE_DEST_CHANNEL),k.debug("[".concat(this.clientId,"] sendUpdateMessage: UpdateDestChannel success"))}async sendStopRelayMessage(){const n=this.genMessage(Po.StopPacketTransfer);await this.signal.request(n),k.debug("[".concat(this.clientId,"] sendStopRelayMessage: StopPacketTransfer success"))}genMessage(n,i){const a=[],l=[],u=[];this.requestId+=1;const h={appId:this.joinInfo.appId,cname:this.joinInfo.cname,uid:this.joinInfo.uid.toString(),sdkVersion:ls,sid:this.sid,ts:Date.now(),requestId:this.requestId,seq:this.requestId,allocate:!0,clientRequest:{}};h.sdkVersion==="4.21.0"&&(h.sdkVersion="0.0.1");let f=null,g=null;switch(n){case Po.SetSdkProfile:return h.clientRequest={command:"SetSdkProfile",type:"multi_channel"},h;case Po.SetSourceChannel:if(g=i&&i.getSrcChannelMediaInfo(),!g)throw new me(K.UNEXPECTED_ERROR,"can not find source config");return h.clientRequest={command:"SetSourceChannel",uid:"0",channelName:g.channelName,token:g.token||this.joinInfo.appId},h;case Po.SetSourceUserId:if(g=i&&i.getSrcChannelMediaInfo(),!g)throw new me(K.UNEXPECTED_ERROR,"can not find source config");return h.clientRequest={command:"SetSourceUserId",uid:g.uid+""},h;case Po.SetDestChannel:if(f=i&&i.getDestChannelMediaInfo(),!f)throw new me(K.UNEXPECTED_ERROR,"can not find dest config");return f.forEach(_=>{a.push(_.channelName),l.push(_.uid+""),u.push(_.token||this.joinInfo.appId)}),h.clientRequest={command:"SetDestChannel",channelName:a,uid:l,token:u},h;case Po.StartPacketTransfer:return h.clientRequest={command:"StartPacketTransfer"},h;case Po.Reconnect:return h.clientRequest={command:"Reconnect"},h;case Po.StopPacketTransfer:return h.clientRequest={command:"StopPacketTransfer"},h;case Po.UpdateDestChannel:if(f=i&&i.getDestChannelMediaInfo(),!f)throw new me(K.UNEXPECTED_ERROR,"can not find dest config");return f.forEach(_=>{a.push(_.channelName),l.push(_.uid+""),u.push(_.token||this.joinInfo.appId)}),h.clientRequest={command:"UpdateDestChannel",channelName:a,uid:l,token:u},h;case Po.SetVideoProfile:h.clientRequest={command:"SetVideoProfile",width:this._resolution.width,height:this._resolution.height}}return h}}function cS(t){var n={},i=!1;function a(l,u){return i=!0,{done:!1,value:new SI(u=new yI(function(h){h(t[l](u))}),1)}}return n[Dp!==void 0&&lU||"@@iterator"]=function(){return this},n.next=function(l){return i?(i=!1,l):a("next",l)},typeof t.throw=="function"&&(n.throw=function(l){if(i)throw i=!1,l;return a("throw",l)}),typeof t.return=="function"&&(n.return=function(l){return i?(i=!1,l):a("return",l)}),n}var j6=c(JV);function $6(t,n){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),i.push.apply(i,a)}return i}function H6(t){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?$6(Object(i),!0).forEach(function(a){V(t,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):$6(Object(i)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(i,a))})}return t}var rr;function W6(t,n){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),i.push.apply(i,a)}return i}function z6(t){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?W6(Object(i),!0).forEach(function(a){V(t,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):W6(Object(i)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(i,a))})}return t}let yf=(rr=class wg extends __{get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get localCodecs(){return[...new Set(this.localCapabilities&&this.localCapabilities.videoCodecs.map(n=>n.rtpMap&&n.rtpMap.encodingName.toLowerCase()||"").filter(n=>{var i;return Ye(i=Object.keys($p)).call(i,n)}))]}constructor(n,i){super(n,i),V(this,"store",void 0),V(this,"peerConnection",void 0),V(this,"remoteSDP",void 0),V(this,"initialOffer",void 0),V(this,"statsFilter",void 0),V(this,"useRTX",!1),V(this,"localCapabilities",void 0),V(this,"localCandidateCount",0),V(this,"allCandidatesReceived",!1),V(this,"establishPromise",void 0),V(this,"mutex",new Oi("P2PConnection-mutex")),this.store=i,this.peerConnection=new RTCPeerConnection(wg.resolvePCConfiguration(n),{optional:[{googDscp:!0}]}),this.statsFilter=nS(this.peerConnection,ee("STATS_UPDATE_INTERVAL"),void 0,Zn()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1,this.establishPromise=this.establish()}async establish(){try{const n=await this.peerConnection.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});if(!n.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const i=xc(n.sdp),a=tg(n.sdp,{filterRTX:!this.useRTX,filterVideoFec:ee("FILTER_VIDEO_FEC"),filterAudioFec:ee("FILTER_AUDIO_FEC"),filterAudioCodec:["opus"]});return this.localCapabilities=a,this.initialOffer=n,z6(z6({},i),{},{rtpCapabilities:{send:{audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},recv:{audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},sendrecv:a},offerSDP:n.sdp})}catch(n){throw new Ce(K.GET_LOCAL_CONNECTION_PARAMS_FAILED,n.toString())}}async connect(n,i,a,l,u,h){try{if(!this.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");this.remoteSDP=new class{constructor(g){V(this,"sessionDesc",void 0),V(this,"localCapabilities",void 0),V(this,"rtpCapabilities",void 0),V(this,"candidates",void 0),V(this,"iceParameters",void 0),V(this,"dtlsParameters",void 0),V(this,"setup",void 0),V(this,"currentMidIndex",void 0),V(this,"cname",void 0),g=or(g);const{remoteIceParameters:_,remoteDtlsParameters:y,candidates:T,remoteRTPCapabilities:A,remoteSetup:D,localCapabilities:W,sdkCodec:F,cname:U}=g,z=yr.parse(`v=0
o=- 0 0 IN IP4 127.0.0.1
s=AgoraGateway
t=0 0
a=group:BUNDLE audio video
a=msid-semantic: WMS
a=ice-lite
m=audio 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendrecv
a=rtcp-mux
a=rtcp-rsize
a=mid:audio
m=video 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendrecv
a=rtcp-mux
a=rtcp-rsize
a=mid:video
`);this.rtpCapabilities=A,this.candidates=T,this.iceParameters=_,this.dtlsParameters=y,this.setup=D,this.localCapabilities=W,this.cname=U;for(let X=0;X<z.mediaDescriptions.length;X++){const ue=z.mediaDescriptions[X];if(ue.attributes.iceUfrag=_.iceUfrag,ue.attributes.icePwd=_.icePwd,ue.attributes.fingerprints=y.fingerprints,ue.attributes.candidates=T,ue.attributes.setup=D,ue.media.mediaType==="video"){ue.media.fmts=A.videoCodecs.map(Ee=>Ee.payloadType.toString(10));let pe=A.videoCodecs.filter(Ee=>{var Se,Re;return(Se=Ee.rtpMap)===null||Se===void 0?void 0:Ye(Re=Se.encodingName.toLowerCase()).call(Re,F)});pe.length===0&&(pe=A.videoCodecs),ue.attributes.payloads=pe,ue.attributes.extmaps=A.videoExtensions}ue.media.mediaType==="audio"&&(ue.media.fmts=A.audioCodecs.map(pe=>pe.payloadType.toString(10)),ue.attributes.payloads=A.audioCodecs,ue.attributes.extmaps=A.audioExtensions),z.mediaDescriptions[X]=this.mungMediaDesc(ue)}this.sessionDesc=z,this.currentMidIndex=z.mediaDescriptions.length-1}toString(){return yr.print(this.sessionDesc)}send(g,_,y){const{ssrcs:T,ssrcGroups:A}=Ja(_,this.cname),D=this.sessionDesc.mediaDescriptions.find(U=>g===ut.VIDEO?U.media.mediaType==="video":U.media.mediaType==="audio"),W=T[0].attributes.label,F=T[0].attributes.mslabel;return D.attributes.ssrcs=D.attributes.ssrcs.concat(T),D.attributes.ssrcGroups=D.attributes.ssrcGroups.concat(A),{id:W,mslabel:F}}batchSend(g){return g.map(_=>{let{kind:y,ssrcMsg:T}=_;return this.send(y,T,void 0)})}stopSending(g){this.sessionDesc.mediaDescriptions.forEach(_=>{const y=[],T=[],A=[];_.attributes.ssrcs.forEach(D=>{Ye(g).call(g,D.attributes.label||"")?A.push(D):y.push(D)}),_.attributes.ssrcGroups.forEach(D=>{var W;Ye(W=A.map(F=>F.ssrcId)).call(W,D.ssrcIds[0])||T.push(D)}),_.attributes.ssrcs=y,_.attributes.ssrcGroups=T})}mute(g){const _=this.sessionDesc.mediaDescriptions.find(y=>y.attributes.mid===g);if(!_)throw new Error("mediaDescription not found with ".concat(g," in remote SDP when calling RemoteSDP.mute."));_.attributes.direction="inactive"}unmute(g){const _=this.sessionDesc.mediaDescriptions.find(y=>y.attributes.mid===g);if(!_)throw new Error("mediaDescription not found with ".concat(g," in remote SDP when calling RemoteSDP.unmute."));_.attributes.direction="sendonly"}receive(g,_,y){g.forEach((T,A)=>{const D=T._mediaStreamTrack,W=this.sessionDesc.mediaDescriptions.findIndex(U=>U.attributes.mid===D.kind),F=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[W],T);this.sessionDesc.mediaDescriptions[W]=F})}stopReceiving(g){}updateCandidates(g){g===vo.TCP?this.candidates.forEach(_=>{this.candidates.findIndex(y=>y.transport==="tcp"&&y.connectionAddress===_.connectionAddress&&y.port===_.port)===-1&&this.candidates.push(H6(H6({},_),{},{foundation:"tcpcandidate",priority:Number(_.priority)-1+"",transport:"tcp",port:Number(_.port)+90+""}))}):this.candidates=this.candidates.filter(_=>_.transport!=="tcp");for(const _ of this.sessionDesc.mediaDescriptions)_.attributes.candidates=this.candidates}restartICE(g){g=or(g),this.iceParameters=g,this.sessionDesc.mediaDescriptions.forEach(_=>{_.attributes.iceUfrag=g.iceUfrag,_.attributes.icePwd=g.icePwd})}predictReceivingMids(g){const _=[];for(let y=0;y<g;y++)_.push((this.currentMidIndex+y+1).toString(10));return _}mungRecvMediaDsec(g,_){const y=or(g);return Zu(y,_),iS(y,_),y}updateRecvMedia(g,_){const y=this.sessionDesc.mediaDescriptions.findIndex(T=>T.attributes.mid===g);if(y!==-1){const T=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[y],_);this.sessionDesc.mediaDescriptions[y]=T}}bumpMid(g){this.currentMidIndex+=g}updateTrackLabel(g,_,y){const T=this.sessionDesc.mediaDescriptions.find(D=>g===ut.VIDEO?D.attributes.mid==="video":D.attributes.mid==="audio");if(T){const D=T.attributes.ssrcs.find(W=>W.attributes.label===_);var A;D&&(D.attributes.label=y,(A=D.attributes.msid)===null||A===void 0||A.replace(_,y))}}mungMediaDesc(g){const _=or(g);return rS(_),function(y){const T=y.attributes.extmaps.find(A=>A.extensionName==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01");T&&y.attributes.extmaps.splice(y.attributes.extmaps.indexOf(T),1),y.attributes.payloads.forEach(A=>{const D=A.rtcpFeedbacks.findIndex(W=>W.type==="transport-cc");D!==-1&&A.rtcpFeedbacks.splice(D,1)})}(_),_}getSSRC(g){for(const _ of this.sessionDesc.mediaDescriptions)for(const y of _.attributes.ssrcs)if(y.attributes.label===g)return[y]}}({remoteIceParameters:n,remoteDtlsParameters:i,candidates:a,remoteRTPCapabilities:l.send,remoteSetup:u,localCapabilities:this.localCapabilities,sdkCodec:this.store.codec,cname:h});const f=this.remoteSDP.toString();await this.peerConnection.setLocalDescription(this.initialOffer),await this.peerConnection.setRemoteDescription({type:"answer",sdp:f})}catch(f){throw new Ce(K.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(f.toString()))}}async updateRemoteRTPCapabilities(n,i){throw new Ce(K.NOT_SUPPORTED,"Planb mode does not support createDataChannels.")}send(n,i){var a=this;return wa(function*(){const l=yield Xt(a.mutex.lock());try{if(!a.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");const u=n.map(A=>a.peerConnection.addTrack(A._mediaStreamTrack)),h=yield Xt(a.peerConnection.createOffer()),f=yr.parse(h.sdp),g=n.map(A=>{const D=A._mediaStreamTrack,W=f.mediaDescriptions.find(F=>F.attributes.mid===D.kind);if(!W)throw new Error("Cannot extract ssrc from mediaDescription.");return function(F,U,z){const X=F.attributes.ssrcs.filter(pe=>pe.attributes.label===U),ue=F.attributes.ssrcGroups;if(X.length===0)throw new Error("Cannot extract ssrc from plan-b SDP.");if(ue&&X.length>1){const pe=ue.find(Ee=>Ee.ssrcIds.indexOf(X[0].ssrcId)!==-1);return pe?[{ssrcId:pe.ssrcIds[0],rtx:z?pe.ssrcIds[1]:void 0}]:[{ssrcId:X[0].ssrcId}]}return[{ssrcId:X[0].ssrcId}]}(W,D.id,a.useRTX)});let _;try{_=yield g}catch(A){throw u.forEach(D=>{Si()&&D.replaceTrack(null),a.peerConnection.removeTrack(D)}),A}const y=a.mungSendOfferSDP(h.sdp,n);a.remoteSDP.receive(n,i,_);const T=a.remoteSDP.toString();return yield Xt(a.peerConnection.setLocalDescription({type:"offer",sdp:y})),yield Xt(a.applySendEncodings(u,n)),yield Xt(a.peerConnection.setRemoteDescription({type:"answer",sdp:T})),n.map((A,D)=>{const W=A._mediaStreamTrack.id;return{localSSRC:g[D],id:W}})}catch(u){throw new Ce(K.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(u.toString()))}finally{l()}})()}async stopSending(n){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");const i=this.peerConnection.getSenders().filter(u=>{var h;return n.indexOf(((h=u.track)===null||h===void 0?void 0:h.id)||"")!==-1});if(i.length!==n.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.");i.map(u=>{Si()&&u.replaceTrack(null),this.peerConnection.removeTrack(u)});const a=await this.peerConnection.createOffer();await this.peerConnection.setLocalDescription(a),this.remoteSDP.stopReceiving(n);const l=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"answer",sdp:l})}catch(i){throw new Ce(K.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(i.toString()))}}async receive(n,i,a,l){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(n," before remoteSDP created."));const{id:u,mslabel:h}=this.remoteSDP.send(n,i,l),f=new We((y,T)=>{const A=setTimeout(()=>{T(new Error("Cannot receive track, id: ".concat(u)))},1e4),D=W=>{const F=_n();if((F.name==="Safari"&&Number(F.version)===11||Ji())&&W.track.id!==u&&W.streams[0].id===h){var U;const z=W.streams[0].getTracks()[0];return(U=this.remoteSDP)===null||U===void 0||U.updateTrackLabel(n,u,W.track.id),this.peerConnection.removeEventListener("track",D),clearTimeout(A),void y(z)}if(W.track.id===u)return this.peerConnection.removeEventListener("track",D),clearTimeout(A),void y(W.track)};this.peerConnection.addEventListener("track",D)}),g=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:g});const _=await this.peerConnection.createAnswer();return await this.peerConnection.setLocalDescription(_),{track:await f,id:u}}catch(u){throw new Ce(K.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(u.toString()))}}async stopReceiving(n){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");this.remoteSDP.stopSending(n);const i=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:i});const a=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(a)}catch(i){throw new Ce(K.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(i.toString()))}}async muteRemote(n){}async unmuteRemote(n){}async muteLocal(n){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");const i=this.peerConnection.getSenders().filter(a=>{var l;return n.indexOf(((l=a.track)===null||l===void 0?void 0:l.id)||"")!==-1});if(i.length!==n.length)throw new Error("sender' length doesn't match mids' length.");i.map(a=>{if(Si()&&a.track)a.track.enabled=!1;else{const l=a.getParameters();l.encodings.forEach(u=>u.active=!1),a.setParameters(l)}})}catch(i){throw new Ce(K.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(i.toString()))}}async unmuteLocal(n){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");const i=this.peerConnection.getSenders().filter(u=>{var h;return n.indexOf(((h=u.track)===null||h===void 0?void 0:h.id)||"")!==-1});if(i.length!==n.length)throw new Error("Senders' length doesn't match mids' length.");i.map(async u=>{if(Si()&&u.track)u.track.enabled=!0;else{const h=u.getParameters();h.encodings.forEach(f=>f.active=!0),await u.setParameters(h)}});const a=await this.peerConnection.createOffer();await this.peerConnection.setLocalDescription(a);const l=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"answer",sdp:l})}catch(i){throw new Ce(K.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(i.toString()))}}restartICE(n){var i=this;return wa(function*(){const a=yield Xt(i.mutex.lock("From P2PConnection.restartICE"));try{if(!i.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");if(un().supportPCSetConfiguration){const g=i.peerConnection.getConfiguration(),_=n===vo.RELAY?"relay":"all";g.iceTransportPolicy!==_&&(k.debug("[".concat(i.store.clientId,"] restartICE change iceTransportPolicy from [").concat(g.iceTransportPolicy,"] to [").concat(_,"]")),g.iceTransportPolicy=_,i.peerConnection.setConfiguration(g))}else if(n===vo.RELAY)return;n!==vo.RELAY&&i.remoteSDP.updateCandidates(n);const l=yield Xt(i.peerConnection.createOffer({iceRestart:!0}));if(!l.sdp)throw new Error("Cannot restartICE because restart offer SDP does not exist.");const u=xc(l.sdp),{remoteIceParameters:h}=yield u.iceParameters;i.remoteSDP.restartICE(h);const f=i.remoteSDP.toString();yield Xt(i.peerConnection.setLocalDescription(l)),yield Xt(i.peerConnection.setRemoteDescription({type:"answer",sdp:f}))}catch(l){k.warning("[".concat(i.store.clientId,"] restart ICE failed, abort operation"),l)}finally{a()}})()}close(){var n;this.peerConnection.close(),(n=this.onConnectionStateChange)===null||n===void 0||n.call(this,"closed"),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.statsFilter.destroy()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(n){return this.statsFilter.getVideoIsReady(n)}async updateEncoderConfig(n,i){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");const a=await this.peerConnection.createOffer(),l=this.mungSendOfferSDP(a.sdp,[i]);this.remoteSDP.updateRecvMedia(i._mediaStreamTrack.kind,i);const u=this.remoteSDP.toString();await this.peerConnection.setLocalDescription({type:"offer",sdp:l}),await this.peerConnection.setRemoteDescription({type:"answer",sdp:u})}catch(a){throw new Ce(K.EXCHANGE_SDP_FAILED,a.toString())}}async updateSendParameters(n,i){const a=this.peerConnection.getSenders().filter(l=>{var u;return((u=l.track)===null||u===void 0?void 0:u.id)===n});a.length===1&&await this.applySendEncodings(a,[i])}setStatsRemoteVideoIsReady(n,i){this.statsFilter.setVideoIsReady2(n,i)}async replaceTrack(n,i){const a=this.peerConnection.getSenders().find(l=>{var u;return((u=l.track)===null||u===void 0?void 0:u.id)===i});a&&await a.replaceTrack(n._mediaStreamTrack)}createDataChannels(n,i){throw new Ce(K.NOT_SUPPORTED,"Planb mode does not support createDataChannels.")}stopDataChannels(n){throw new Ce(K.NOT_SUPPORTED,"Planb mode does not support stopDataChannels.")}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var n;(n=this.onICEConnectionStateChange)===null||n===void 0||n.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var n;(n=this.onConnectionStateChange)===null||n===void 0||n.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidate=n=>{n.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,k.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},setTimeout(()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,k.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))},ee("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(n){const i={iceServers:[],sdpSemantics:"plan-b"};return n.iceServers?i.iceServers=n.iceServers:n.turnServer&&n.turnServer.mode!=="off"&&(Bp(n.turnServer.servers)?i.iceServers=n.turnServer.servers:(i.iceServers&&i.iceServers.push(...wg.turnServerConfigToIceServers(n.turnServer.servers)),ee("USE_TURN_SERVER_OF_GATEWAY")&&i.iceServers&&n.turnServer.serversFromGateway&&i.iceServers.push(...wg.turnServerConfigToIceServers(n.turnServer.serversFromGateway)),n.turnServer.servers.concat(n.turnServer.serversFromGateway||[]).forEach(a=>{a.forceturn&&(i.iceTransportPolicy="relay")}))),i}static turnServerConfigToIceServers(n){const i=[];return n.forEach(a=>{a.security?a.tcpport&&i.push({username:a.username,credential:a.password,credentialType:"password",urls:"turns:".concat(a.turnServerURL,":").concat(a.tcpport,"?transport=tcp")}):(a.udpport&&i.push({username:a.username,credential:a.password,credentialType:"password",urls:"turn:".concat(a.turnServerURL,":").concat(a.udpport,"?transport=udp")}),a.tcpport&&i.push({username:a.username,credential:a.password,credentialType:"password",urls:"turn:".concat(a.turnServerURL,":").concat(a.tcpport,"?transport=tcp")}))}),i}async updateRtpSenderEncodings(n,i){var a;if(i||(i=this.peerConnection.getSenders().find(_=>{var y;return((y=_.track)===null||y===void 0?void 0:y.id)===n._mediaStreamTrack.id})),!i)return k.warn("[".concat(n.getTrackId(),"] no rtpSender found}"));if(!un().supportSetRtpSenderParameters)return k.warn("Browser not support set rtp-sender parameters");const l={},u={};if(n instanceof nr)switch(n._optimizationMode){case"motion":l.degradationPreference="maintain-framerate";break;case"detail":l.degradationPreference="maintain-resolution";break;default:l.degradationPreference="balanced"}if(ee("DSCP_TYPE")&&Uu()){var h;const _=ee("DSCP_TYPE");Ye(h=["very-low","low","medium","high"]).call(h,_)&&(u.networkPriority=_)}const f=i.getParameters(),g=(a=f.encodings)===null||a===void 0?void 0:a[0];g&&Object.assign(g,u),Object.assign(f,l),k.debug("[".concat(n.getTrackId(),"] updateRtpSenderEncodings: ").concat(JSON.stringify(f.encodings))),await i.setParameters(f)}async applySendEncodings(n,i){try{if(!un().supportSetRtpSenderParameters||n.length!==i.length)return;for(let a=0;a<n.length;a++){const l=n[a],u=i[a];l&&u&&await this.updateRtpSenderEncodings(u,l)}}catch{k.debug("[".concat(this.store.clientId,"] Apply RTPSendEncodings failed."))}}mungSendOfferSDP(n,i){const a=yr.parse(n);return i.forEach((l,u)=>{const h=l._mediaStreamTrack,f=a.mediaDescriptions.find(g=>g.attributes.mid===h.kind);f&&Zu(f,l)}),yr.print(a)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=n=>{var i;(i=this.onFirstAudioReceived)===null||i===void 0||i.call(this,n)},this.statsFilter.onFirstVideoReceived=n=>{var i;(i=this.onFirstVideoReceived)===null||i===void 0||i.call(this,n)},this.statsFilter.onFirstAudioDecoded=n=>{var i;(i=this.onFirstAudioDecoded)===null||i===void 0||i.call(this,n)},this.statsFilter.onFirstVideoDecoded=(n,i,a)=>{var l;(l=this.onFirstVideoDecoded)===null||l===void 0||l.call(this,n,i,a)},this.statsFilter.onSelectedLocalCandidateChanged=(n,i)=>{var a;(a=this.onSelectedLocalCandidateChanged)===null||a===void 0||a.call(this,n,i)},this.statsFilter.onSelectedRemoteCandidateChanged=(n,i)=>{var a;(a=this.onSelectedRemoteCandidateChanged)===null||a===void 0||a.call(this,n,i)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0}async batchReceive(n){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.batchReceive before remoteSDP created.");const i=this.remoteSDP.batchSend(n).map((u,h)=>{let{id:f,mslabel:g}=u;const{kind:_}=n[h];return new We((y,T)=>{const A=setTimeout(()=>{T(new Error("Cannot receive track, id: ".concat(f)))},1e4),D=W=>{const F=_n();if(F.name==="Safari"&&Number(F.version)===11&&W.track.id!==f&&W.streams[0].id===g){var U;const z=W.streams[0].getTracks()[0];return(U=this.remoteSDP)===null||U===void 0||U.updateTrackLabel(_,f,W.track.id),this.peerConnection.removeEventListener("track",D),clearTimeout(A),void y({track:z,id:f})}if(W.track.id===f)return this.peerConnection.removeEventListener("track",D),clearTimeout(A),void y({track:W.track,id:f})};this.peerConnection.addEventListener("track",D)})}),a=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:a});const l=await this.peerConnection.createAnswer();return await this.peerConnection.setLocalDescription(l),await We.all(i)}catch(i){throw new Ce(K.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(i.toString()))}}async getRemoteSSRC(n){if(!this.remoteSDP)return;const i=this.remoteSDP.getSSRC(n);return i==null?void 0:i[0].ssrcId}setConfiguration(n){if(un().supportPCSetConfiguration){const i=wg.resolvePCConfiguration(n);this.peerConnection.setConfiguration(i)}}},$e(rr.prototype,"connect",[gs],Object.getOwnPropertyDescriptor(rr.prototype,"connect"),rr.prototype),$e(rr.prototype,"stopSending",[gs],Object.getOwnPropertyDescriptor(rr.prototype,"stopSending"),rr.prototype),$e(rr.prototype,"receive",[gs],Object.getOwnPropertyDescriptor(rr.prototype,"receive"),rr.prototype),$e(rr.prototype,"stopReceiving",[gs],Object.getOwnPropertyDescriptor(rr.prototype,"stopReceiving"),rr.prototype),$e(rr.prototype,"muteRemote",[gs],Object.getOwnPropertyDescriptor(rr.prototype,"muteRemote"),rr.prototype),$e(rr.prototype,"unmuteRemote",[gs],Object.getOwnPropertyDescriptor(rr.prototype,"unmuteRemote"),rr.prototype),$e(rr.prototype,"muteLocal",[gs],Object.getOwnPropertyDescriptor(rr.prototype,"muteLocal"),rr.prototype),$e(rr.prototype,"unmuteLocal",[gs],Object.getOwnPropertyDescriptor(rr.prototype,"unmuteLocal"),rr.prototype),$e(rr.prototype,"close",[gs],Object.getOwnPropertyDescriptor(rr.prototype,"close"),rr.prototype),$e(rr.prototype,"updateEncoderConfig",[gs],Object.getOwnPropertyDescriptor(rr.prototype,"updateEncoderConfig"),rr.prototype),$e(rr.prototype,"updateSendParameters",[gs],Object.getOwnPropertyDescriptor(rr.prototype,"updateSendParameters"),rr.prototype),$e(rr.prototype,"replaceTrack",[gs],Object.getOwnPropertyDescriptor(rr.prototype,"replaceTrack"),rr.prototype),$e(rr.prototype,"getRemoteSSRC",[gs],Object.getOwnPropertyDescriptor(rr.prototype,"getRemoteSSRC"),rr.prototype),rr);function gs(t,n,i){const a=t[n];if(typeof a!="function")throw new Error("Cannot use mutex on object property.");return i.value=async function(){const l=this.mutex,u=await l.lock("Locking from P2PConnection.".concat(n));try{for(var h=arguments.length,f=new Array(h),g=0;g<h;g++)f[g]=arguments[g];return await a.apply(this,f)}finally{u()}},i}function G6(t,n){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),i.push.apply(i,a)}return i}function rd(t){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?G6(Object(i),!0).forEach(function(a){V(t,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):G6(Object(i)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(i,a))})}return t}const ig="9",K6=4e4;function q6(t,n){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),i.push.apply(i,a)}return i}function eu(t){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?q6(Object(i),!0).forEach(function(a){V(t,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):q6(Object(i)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(i,a))})}return t}let lS=function(t){return t.BANDWIDTH="bandwidth",t.CPU="cpu",t.NONE="none",t.OTHER="other",t}({});var Cf=function(t){return t[t.DOWN=0]="DOWN",t[t.UP=1]="UP",t}(Cf||{});const uS=new Map;function Y6(t,n,i,a){let{scale:l}=t;if(l===0&&a===Cf.UP||l>=n.length-1&&a===Cf.DOWN)return t;let u=eu(eu({},t),{},{scale:a===Cf.DOWN?++l:--l});switch(i){case"maintain-framerate":u=eu(eu({},u),n[l].motion);break;case"maintain-resolution":u=eu(eu({},u),n[l].detail);break;case"balanced":u=eu(eu({},u),n[l].balanced)}return u}function X6(t,n){if(n){const i={overUse:0,underUse:0,adaptationList:J6(n)};uS.set(t,i)}else uS.delete(t)}function J6(t){const n=eu({},t),{bitrateMax:i,frameRate:a,scaleResolutionDownBy:l,bitrateMin:u}=n,{MIN_FRAME_RATE:h,MAX_THRESHOLD_FRAMERATE:f,MAX_SCALE:g,BITRATE_MIN_THRESHOLD:_,BITRATE_MAX_THRESHOLD:y,BWE_SCALE_UP_THRESHOLD:T,BWE_SCALE_DOWN_THRESHOLD:A,PERF_SCALE_DOWN_THRESHOLD:D,PERF_SCALE_UP_THRESHOLD:W,BALANCE_BITRATE_FACTOR:F,BALANCE_FRAMERATE_FACTOR:U,BALANCE_RESOLUTION_FACTOR:z,MOTION_RESOLUTION_FACTOR:X,MOTION_BITRATE_FACTOR:ue,DETAIL_FRAMERATE_FACTOR:pe,DETAIL_BITRATE_FACTOR:Ee}=Kw,Se=Math.min(n.frameRate,f),Re=[{scale:0,threshold:{bwe_down:Math.round(Math.pow(A,1)*i),bwe_up:i,fps_down:Math.round(Math.pow(D,1)*Se),fps_up:a},balanced:{scaleResolutionDownBy:1,frameRate:a,bitrateMax:i,bitrateMin:u},motion:{scaleResolutionDownBy:1,frameRate:a,bitrateMax:i,bitrateMin:u},detail:{scaleResolutionDownBy:1,frameRate:a,bitrateMax:i,bitrateMin:u}}];for(let Ae=1;Ae<=g;Ae++){const Pe={bwe_up:Math.round(Math.pow(T,Ae)*i),bwe_down:Math.round(Math.pow(A,Ae+1)*i),fps_up:Math.round(Math.pow(W,Ae)*Se),fps_down:Math.round(Math.pow(D,Ae+1)*Se)},tt={scaleResolutionDownBy:l/Math.pow(z,Ae),frameRate:Math.max(Math.round(Math.pow(U,Ae)*a),h),bitrateMax:Math.max(Math.round(Math.pow(F,Ae)*i),y),bitrateMin:Math.max(Math.round(Math.pow(F,Ae)*u),_)},ln={scaleResolutionDownBy:l/Math.pow(X,Ae),frameRate:a,bitrateMax:Math.max(Math.round(Math.pow(ue,Ae)*i),y),bitrateMin:Math.max(Math.round(Math.pow(ue,Ae)*u),_)},Fn={scaleResolutionDownBy:1,frameRate:Math.max(Math.round(Math.pow(pe,Ae)*a),h),bitrateMax:Math.max(Math.round(Math.pow(Ee,Ae)*i),y),bitrateMin:Math.max(Math.round(Math.pow(Ee,Ae)*u),_)};Re.push({scale:Ae,threshold:Pe,balanced:tt,motion:ln,detail:Fn})}return Re}function vpe(t,n,i,a,l,u){const h=uS.get(t)||{overUse:0,underUse:0,adaptationList:J6(l)},{adaptationList:f}=h;uS.set(t,h);const{OVERUSE_TIMES_THRESHOLD:g,UNDERUSE_TIMES_THRESHOLD:_}=Kw,{scale:y}=a;let T,A;return typeof n=="number"&&n>0&&function(D,W,F,U){if(W>=F.length)return!1;let{threshold:{fps_down:z}}=F[W];return ee("FORCE_AG_HIGH_FRAMERATE")&&U==="maintain-framerate"&&(z=F[0].threshold.fps_down),D<z}(n,y,f,u)&&(h.overUse++,A=lS.CPU,h.overUse>g)||typeof i=="number"&&i>0&&function(D,W,F){if(W>=F.length)return!1;const{threshold:{bwe_down:U}}=F[W];return D<U}(i,y,f)&&(h.overUse++,A=lS.BANDWIDTH,h.overUse>g)?(h.overUse=0,h.underUse=0,T=Y6(a,f,u,Cf.DOWN),[T,A]):(typeof n=="number"&&n>0&&typeof i=="number"&&i>0&&function(D,W,F,U){if(W===0)return;let{threshold:{fps_up:z}}=F[W];return ee("FORCE_AG_HIGH_FRAMERATE")&&U==="maintain-framerate"&&(z=F[1].threshold.fps_up),D>z}(n,y,f,u)&&function(D,W,F){if(W===0)return;const{threshold:{bwe_up:U}}=F[W];return D>U}(i,y,f)&&(h.underUse++,h.underUse>_&&(h.overUse=0,h.underUse=0,T=Y6(a,f,u,Cf.UP),T.scale===0&&(A=lS.NONE))),[T,A])}function Q6(t,n){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),i.push.apply(i,a)}return i}function LI(t){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?Q6(Object(i),!0).forEach(function(a){V(t,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Q6(Object(i)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(i,a))})}return t}function Epe(t){var n;return!!ee("ENABLE_AG_ADAPTATION")&&!!(t instanceof EI||Ye(n=t._hints).call(n,ar.CUSTOM_TRACK))&&(!!ee("FORCE_SUPPORT_AG_ADAPTATION")||!!(function(i){const a=_n();if(a.os!==_i.IOS||!a.osVersion)return!1;const l=a.osVersion.split(".");return Number(l[0])>=i}(14)&&c4(17,4,!0)||s4(14)&&l4(17,4,!0)))}const dS=new Map;function hS(t){const n=dS.get(t);if(n){const{timer:i,adaptationFunc:a,originConfig:l}=n;window.clearTimeout(i),a(l),dS.delete(t)}X6(t)}var Rn;function Z6(t,n){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),i.push.apply(i,a)}return i}function id(t){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?Z6(Object(i),!0).forEach(function(a){V(t,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Z6(Object(i)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(i,a))})}return t}let Lc=(Rn=class Ig extends __{get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get dtlsTransportState(){var n,i;return(n=(i=this.peerConnection.getReceivers()[0])===null||i===void 0||(i=i.transport)===null||i===void 0?void 0:i.state)!==null&&n!==void 0?n:null}get localCodecs(){return[...new Set(this.localCapabilities&&this.localCapabilities.send.videoCodecs.map(n=>n.rtpMap&&n.rtpMap.encodingName.toLowerCase()||"").filter(n=>{var i;return Ye(i=Object.keys($p)).call(i,n)}))]}constructor(n,i){super(n,i),V(this,"store",void 0),V(this,"peerConnection",void 0),V(this,"id",tr(5,"connection-")),V(this,"remoteSDP",void 0),V(this,"initialOffer",void 0),V(this,"transportEventReceiver",void 0),V(this,"statsFilter",void 0),V(this,"useXR",ee("USE_XR")),V(this,"localCapabilities",void 0),V(this,"remoteCodecs",void 0),V(this,"localCandidateCount",0),V(this,"allCandidatesReceived",!1),V(this,"dataStreamChannelMap",new Map),V(this,"establishPromise",void 0),V(this,"recoveredDataChannelIds",[]),V(this,"currentDataChannelId",1),V(this,"mutex",new Oi("P2PConnection-mutex")),V(this,"qualityLimitationReason",lS.NONE),this.store=i,this.peerConnection=new RTCPeerConnection(Ig.resolvePCConfiguration(n),{optional:[{googDscp:!0}]}),this.statsFilter=nS(this.peerConnection,ee("STATS_UPDATE_INTERVAL"),void 0,Zn()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1,this.establishPromise=this.establish()}async updateRemoteRTPCapabilities(n,i){if(this.remoteCodecs=i,!this.remoteSDP)return void k.debug("[P2PConnection] cannot updateRemoteRTPCapabilities before remote SDP created, local codecs: ".concat(this.localCodecs,", codecs: ").concat(i));if(this.remoteSDP.updateRemoteCodec(n,i,this.store.codec)){const a=await this.peerConnection.createOffer(),l=this.logSDPExchange(a.sdp||"","offer","local","muteLocal");await this.peerConnection.setLocalDescription(a);const u=this.remoteSDP.toString();l==null||l(u),await this.peerConnection.setRemoteDescription({type:"answer",sdp:u})}else k.debug("[P2PConnection] updateRemoteRTPCapabilities no need to exchange SDP.")}async establish(){try{this.peerConnection.addTransceiver("video",{direction:"recvonly"}),this.peerConnection.addTransceiver("audio",{direction:"recvonly"});const n=await this.peerConnection.createOffer();if(!n.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const i=xc(n.sdp),a=await OI({filterRTX:!ee("USE_PUB_RTX")&&!ee("USE_SUB_RTX"),filterVideoFec:ee("FILTER_VIDEO_FEC"),filterAudioFec:ee("FILTER_AUDIO_FEC"),filterVideoCodec:ee("FILTER_VIDEO_CODEC")},{useXR:this.useXR});return this.localCapabilities=Sf(a),this.initialOffer=n,id(id({},i),{},{rtpCapabilities:a,offerSDP:n.sdp})}catch(n){throw new Ce(K.GET_LOCAL_CONNECTION_PARAMS_FAILED,n.toString())}}async connect(n,i,a,l,u,h){try{if(!this.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");this.remoteSDP=new class{get localCapabilities(){return or(this._localCapabilities)}get rtpCapabilities(){return or(this._rtpCapabilities)}get candidates(){return or(this._candidates)}get iceParameters(){return or(this._iceParameters)}get dtlsParameters(){return or(this._dtlsParameters)}constructor(D){V(this,"sessionDesc",void 0),V(this,"_localCapabilities",void 0),V(this,"_rtpCapabilities",void 0),V(this,"_candidates",void 0),V(this,"_iceParameters",void 0),V(this,"_dtlsParameters",void 0),V(this,"setup",void 0),V(this,"currentMidIndex",void 0),V(this,"cname",void 0),V(this,"firefoxSsrcMidMap",new Map),D=or(D);const{remoteIceParameters:W,remoteDtlsParameters:F,candidates:U,remoteRTPCapabilities:z,remoteSetup:X,localCapabilities:ue,cname:pe}=D,Ee=yr.parse(`v=0
o=- 0 0 IN IP4 127.0.0.1
s=AgoraGateway
t=0 0
a=group:BUNDLE 0 1
a=msid-semantic: WMS
a=ice-lite
m=video 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendonly
a=rtcp-mux
a=rtcp-rsize
a=mid:0
m=audio 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendonly
a=rtcp-mux
a=rtcp-rsize
a=mid:1
`);this._rtpCapabilities=z,this._candidates=U,this._iceParameters=W,this._dtlsParameters=F,this._localCapabilities=ue,this.setup=X,this.cname=pe;const Se=this.rtpCapabilities.send;for(const Re of Ee.mediaDescriptions){if(Re.attributes.iceUfrag=W.iceUfrag,Re.attributes.icePwd=W.icePwd,Re.attributes.fingerprints=F.fingerprints,Re.attributes.candidates=U,Re.attributes.setup=X,Re.media.mediaType==="video"&&(Re.media.fmts=Se.videoCodecs.map(Ae=>Ae.payloadType.toString(10)),Re.attributes.payloads=Se.videoCodecs,Re.attributes.extmaps=Se.videoExtensions,ee("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:Ae,ssrcGroups:Pe}=Ja([{ssrcId:K6,rtx:ee("USE_SUB_RTX")?40001:void 0}],this.cname);Re.attributes.ssrcs=Ae,Re.attributes.ssrcGroups=Pe}if(Re.media.mediaType==="audio"&&(Re.media.fmts=Se.audioCodecs.map(Ae=>Ae.payloadType.toString(10)),Re.attributes.payloads=Se.audioCodecs,Re.attributes.extmaps=Se.audioExtensions,Nc(Re),ee("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:Ae,ssrcGroups:Pe}=Ja([{ssrcId:2e4}],this.cname);Re.attributes.ssrcs=Ae,Re.attributes.ssrcGroups=Pe}}this.sessionDesc=Ee,this.currentMidIndex=Ee.mediaDescriptions.length-1}preloadRemoteMedia(){const D=ee("PRELOAD_MEDIA_COUNT");this.rtpCapabilities;const W=this.candidates,F=this.dtlsParameters,U=this.iceParameters,z=this.rtpCapabilities.send;for(let X=1;X<D;X++){const ue=2*X+2e4,pe=2*X+K6,{ssrcs:Ee,ssrcGroups:Se}=Ja([{ssrcId:ue}],this.cname),{ssrcs:Re,ssrcGroups:Ae}=Ja([{ssrcId:pe,rtx:ee("USE_SUB_RTX")?pe+1:void 0}],this.cname);this.sessionDesc.mediaDescriptions.push({media:{mediaType:"video",port:ig,protos:["UDP","TLS","RTP","SAVPF"],fmts:z.videoCodecs.map(Pe=>Pe.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:U.iceUfrag,icePwd:U.icePwd,unrecognized:[],candidates:W,extmaps:z.videoExtensions,fingerprints:F.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:Re,ssrcGroups:Ae,rtcpFeedbackWildcards:[],payloads:z.videoCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*X)}}),this.sessionDesc.mediaDescriptions.push({media:{mediaType:"audio",port:ig,protos:["UDP","TLS","RTP","SAVPF"],fmts:z.audioCodecs.map(Pe=>Pe.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:U.iceUfrag,icePwd:U.icePwd,unrecognized:[],candidates:W,extmaps:z.audioExtensions,fingerprints:F.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:Ee,ssrcGroups:Se,rtcpFeedbackWildcards:[],payloads:z.audioCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*X+1)}}),this.currentMidIndex+=2}this.updateBundleMids()}toString(){return yr.print(this.sessionDesc)}send(D,W,F,U){const{ssrcs:z,ssrcGroups:X}=Ja(W,this.cname,ee("SYNC_GROUP")?F:void 0),ue=this.findPreloadMediaDesc(z);if(ue){if(Zn()&&this.firefoxSsrcMidMap.set(z[0].ssrcId,ue.attributes.mid),U&&(U.twcc||U.remb)){const pe=this.sessionDesc.mediaDescriptions.indexOf(ue);return this.sessionDesc.mediaDescriptions[pe]=this.mungSendMediaDesc(ue,U),{mid:ue.attributes.mid,needExchangeSDP:!0}}return{mid:ue.attributes.mid,needExchangeSDP:!1}}{const pe=this.findAvailableMediaIndex(D,z);let Ee;return pe===-1||pe===1&&(Si()||d4())||pe===0&&ee("USE_SUB_RTX")||h4()?(Ee=this.createOrRecycleSendMedia(D,z,X,"sendonly",U),this.updateBundleMids()):(Ee=or(this.sessionDesc.mediaDescriptions[pe]),Ee.attributes.direction="sendonly",Ee.attributes.ssrcs=z,Ee.attributes.ssrcGroups=X,this.sessionDesc.mediaDescriptions[pe]=this.mungSendMediaDesc(Ee,U)),Zn()&&this.firefoxSsrcMidMap.set(z[0].ssrcId,Ee.attributes.mid),{mid:Ee.attributes.mid,needExchangeSDP:!0}}}sendDataChannel(){const{mediaDesc:D,needExchangeSDP:W}=this.createOrRecycleDataChannel();return this.updateBundleMids(),{mid:D.attributes.mid,needExchangeSDP:W}}batchSend(D){const W=D.map(z=>{let{kind:X,ssrcMsg:ue,mslabel:pe}=z;return this.send(X,ue,pe)}),F=[];let U=!1;return W.forEach(z=>{let{mid:X,needExchangeSDP:ue}=z;ue&&(U=!0),F.push(X)}),{mids:F,needExchangeSDP:U}}stopSending(D){const W=this.sessionDesc.mediaDescriptions.filter(F=>F.attributes.mid&&D.indexOf(F.attributes.mid)!==-1);if(W.length!==D.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.stopSending.");W.forEach(F=>{F.attributes.mid==="0"||Zn()||h4()?F.attributes.ssrcs=[]:(F.attributes.ssrcs=[],F.attributes.direction="inactive",F.media.port="0")}),this.updateBundleMids()}mute(D){const W=this.sessionDesc.mediaDescriptions.find(F=>F.attributes.mid===D);if(!W)throw new Error("mediaDescription not found with ".concat(D," in remote SDP when calling RemoteSDP.mute."));W.attributes.direction="inactive"}unmute(D){const W=this.sessionDesc.mediaDescriptions.find(F=>F.attributes.mid===D);if(!W)throw new Error("mediaDescription not found with ".concat(D," in remote SDP when calling RemoteSDP.unmute."));W.attributes.direction="sendonly"}muteRemote(D){const W=this.sessionDesc.mediaDescriptions.filter(F=>Ye(D).call(D,F.attributes.mid||""));if(W.length!==D.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");W.forEach(F=>{F.attributes.direction="inactive"})}unmuteRemote(D){const W=this.sessionDesc.mediaDescriptions.filter(F=>Ye(D).call(D,F.attributes.mid||""));if(W.length!==D.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");W.forEach(F=>{F.attributes.direction="recvonly"})}receive(D,W,F,U){D.forEach((z,X)=>{this.createOrRecycleRecvMedia(z,[],"recvonly",W,F,U[X])}),this.updateBundleMids()}stopReceiving(D){const W=this.sessionDesc.mediaDescriptions.filter(F=>D.indexOf(F.attributes.mid)!==-1);if(W.length!==D.length)throw new Error("MediaDescriptions' length doesn't match mids's length when calling RemoteSDP.receive.");W.forEach(F=>{F.media.port="0",F.attributes.direction="inactive"}),this.updateBundleMids()}updateCandidates(D){const W=this._candidates.filter(F=>F.transport==="udp");if(D===vo.TCP){if(W.length===0)return;if(ee("TCP_CANDIDATE_ONLY")){const F=this._candidates.filter(U=>U.transport==="tcp");W.forEach(U=>{F.findIndex(z=>z.connectionAddress===U.connectionAddress)===-1&&F.push(rd(rd({},U),{},{foundation:"tcpcandidate",priority:Number(U.priority)-1+"",transport:"tcp",port:Number(U.port)+90+""}))}),this._candidates=F}else{const F=[];W.forEach(U=>{F.push(rd(rd({},U),{},{foundation:"tcpcandidate",priority:Number(U.priority)-1+"",transport:"tcp",port:Number(U.port)+90+""}))}),this._candidates=[...W,...F]}}else if(D===vo.RELAY){if(W.length!==0)return;{const F=this._candidates.filter(U=>U.transport==="tcp");F.forEach(U=>{W.push(rd(rd({},U),{},{foundation:"udpcandidate",priority:Number(U.priority)+1+"",transport:"udp",port:Number(U.port)-90+""}))}),this._candidates=[...W,...F]}}else W.length===0?(this._candidates.filter(F=>F.transport==="tcp").forEach(F=>{W.push(rd(rd({},F),{},{foundation:"udpcandidate",priority:Number(F.priority)+1+"",transport:"udp",port:Number(F.port)-90+""}))}),this._candidates=W):this._candidates=this._candidates.filter(F=>F.transport!=="tcp");for(const F of this.sessionDesc.mediaDescriptions)F.attributes.candidates=this.candidates}restartICE(D){D=or(D),this._iceParameters=D,this.sessionDesc.mediaDescriptions.forEach(W=>{W.attributes.iceUfrag=D.iceUfrag,W.attributes.icePwd=D.icePwd})}predictReceivingMids(D){const W=[];for(let F=0;F<D;F++)W.push((this.currentMidIndex+F+1).toString(10));return W}findAvailableMediaIndex(D,W){return this.sessionDesc.mediaDescriptions.findIndex(F=>{const U=F.media.mediaType===D&&F.media.port!=="0"&&(F.attributes.direction==="sendonly"||F.attributes.direction==="sendrecv")&&F.attributes.ssrcs.length===0;if(Zn()){if(U){const z=this.firefoxSsrcMidMap.get(W[0].ssrcId);return!(z||F.attributes.mid!=="0"&&F.attributes.mid!=="1")||!(!z||z!==F.attributes.mid)}return!1}return U})}createOrRecycleDataChannel(){for(const F of this.sessionDesc.mediaDescriptions)if(F.media.mediaType==="application")return{mediaDesc:F,needExchangeSDP:!1};this.currentMidIndex+=1;const D="".concat(this.currentMidIndex),W={media:{mediaType:"application",port:ig,protos:["UDP","DTLS","SCTP"],fmts:["webrtc-datachannel"]},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:[],fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:[],ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:[],rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,mid:"".concat(D),sctpPort:"5000"}};return this.sessionDesc.mediaDescriptions.push(W),{mediaDesc:W,needExchangeSDP:!0}}createOrRecycleRecvMedia(D,W,F,U,z,X){const ue=D._mediaStreamTrack.kind,pe=this.rtpCapabilities.recv,Ee=Sh(ue,pe,this.localCapabilities.send,ue===ut.VIDEO?U:z),Se=ue===ut.VIDEO?pe.videoExtensions:pe.audioExtensions;this.currentMidIndex+=1;const Re="".concat(this.currentMidIndex);let Ae={media:{mediaType:ue,port:ig,protos:["UDP","TLS","RTP","SAVPF"],fmts:Ee.map(tt=>tt.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:Se,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:W,ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:Ee,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:F,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(Re)}};Ae=this.mungRecvMediaDsec(Ae,D,X);const Pe=this.findFirstClosedMedia(ue);if(Pe){const tt=this.sessionDesc.mediaDescriptions.indexOf(Pe);this.sessionDesc.mediaDescriptions[tt]=Ae}else this.sessionDesc.mediaDescriptions.push(Ae);return Ae}updateRemoteCodec(D,W,F){const U=[...new Set(this._rtpCapabilities.recv.videoCodecs.map(Ae=>Ae.rtpMap&&Ae.rtpMap.encodingName.toLowerCase()||"").filter(Ae=>{var Pe;return Ye(Pe=Object.keys($p)).call(Pe,Ae)}))],z=new Set(W);if(U.every(Ae=>z.has(Ae)))return k.debug("codecs has not changed, no need to updateRemoteCodec, codecs: ".concat(W)),!1;const X=this._rtpCapabilities.recv.videoCodecs.filter(Ae=>W.some(Pe=>{var tt;return Ye(tt=Ae.rtpMap&&Ae.rtpMap.encodingName.toLowerCase()||"").call(tt,Pe)}));if(X.length===0)return k.debug("updateRemoteCodec failed, because cannot find matched codec, remoteCapabilities codecs: ".concat(U," codecs: ").concat(W)),!1;const ue=[...new Set(X.map(Ae=>Ae.rtpMap&&Ae.rtpMap.encodingName.toLowerCase()||""))];let pe;if(k.debug("updateRemoteCodec, from ".concat(U," to ").concat(ue)),D.length===0)pe=this.sessionDesc.mediaDescriptions.filter(Ae=>Ae.media.mediaType==="video"&&Ae.attributes.direction==="recvonly");else if(pe=this.sessionDesc.mediaDescriptions.filter(Ae=>Ae.attributes.mid&&Ye(D).call(D,Ae.attributes.mid)&&Ae.attributes.direction==="recvonly"),pe.length!==D.length)return k.debug("updateRemoteCodec failed, because cannot find mids, mids: ".concat(D,", codecs: ").concat(W)),!1;if(ee("USE_PUB_RTX")||ee("USE_SUB_RTX")){const Ae=xI(X,this.rtpCapabilities.recv.videoCodecs);X.push(...Ae)}this._rtpCapabilities.recv.videoCodecs=X;const Ee=this.localCapabilities.send,Se=this.rtpCapabilities.recv,Re=Sh(ut.VIDEO,Se,Ee,F);return pe.forEach(Ae=>{const Pe=Re.map(tt=>tt.payloadType.toString(10));k.debug("updateRemoteCodec mid: ".concat(Ae.attributes.mid,", from ").concat(Ae.attributes.payloads," to ").concat(Re)),Ae.attributes.payloads=Re,Ae.media.fmts=Pe}),!0}createOrRecycleSendMedia(D,W,F,U,z){const X=this.rtpCapabilities.send,ue=D===ut.VIDEO?X.videoCodecs:X.audioCodecs,pe=D===ut.VIDEO?X.videoExtensions:X.audioExtensions;this.currentMidIndex+=1;const Ee="".concat(this.currentMidIndex);let Se={media:{mediaType:D,port:ig,protos:["UDP","TLS","RTP","SAVPF"],fmts:ue.map(Ae=>Ae.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:pe,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:W,ssrcGroups:F,rtcpFeedbackWildcards:[],payloads:ue,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:U,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(Ee)}};Se=this.mungSendMediaDesc(Se,z);const Re=this.findFirstClosedMedia(D);if(Re){const Ae=this.sessionDesc.mediaDescriptions.indexOf(Re);this.sessionDesc.mediaDescriptions[Ae]=Se}else this.sessionDesc.mediaDescriptions.push(Se);return Se}updateBundleMids(){this.sessionDesc.attributes.groups[0].identificationTag=this.sessionDesc.mediaDescriptions.filter(D=>D.media.port!=="0").map(D=>D.attributes.mid)}mungRecvMediaDsec(D,W,F){const U=or(D);return rS(U),Zu(U,W),iS(U,W),II(U),_f(U,F,this.localCapabilities.send),U}mungSendMediaDesc(D,W){const F=or(D);return _f(F,W,this.localCapabilities.recv),Nc(F),F}updateRecvMedia(D,W){const F=this.sessionDesc.mediaDescriptions.findIndex(U=>U.attributes.mid===D);if(F!==-1){const U=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[F],W);this.sessionDesc.mediaDescriptions[F]=U}}bumpMid(D){this.currentMidIndex+=D}findFirstClosedMedia(D){return this.sessionDesc.mediaDescriptions.find(W=>Zn()?W.media.port==="0"&&W.media.mediaType===D:W.media.port==="0")}findPreloadMediaDesc(D){return this.sessionDesc.mediaDescriptions.find(W=>{var F;return((F=W.attributes)===null||F===void 0||(F=F.ssrcs[0])===null||F===void 0?void 0:F.ssrcId)===D[0].ssrcId})}getSSRC(D){var W;return(W=this.sessionDesc.mediaDescriptions.find(F=>F.attributes.mid===D))===null||W===void 0?void 0:W.attributes.ssrcs}}({remoteIceParameters:n,remoteDtlsParameters:i,candidates:a,remoteRTPCapabilities:l,remoteSetup:u,localCapabilities:this.localCapabilities,cname:h}),Array.isArray(this.remoteCodecs)&&this.remoteCodecs.length>0&&this.remoteSDP.updateRemoteCodec([],this.remoteCodecs,this.store.codec);const f=this.remoteSDP.toString(),g=yr.parse(this.initialOffer.sdp),_=g.mediaDescriptions.find(D=>D.media.mediaType==="audio");_&&Nc(_),this.useXR&&oS(g);const y=yr.print(g),T=this.logSDPExchange(y||"","offer","local","connect");this.store.descriptionStart(),await this.peerConnection.setLocalDescription({type:"offer",sdp:y}),T==null||T(f),await this.peerConnection.setRemoteDescription({type:"answer",sdp:f});const A=this.peerConnection.getTransceivers()[0];if(A!=null&&A.receiver&&this.tryBindTransportEvents(A.receiver),ee("PRELOAD_MEDIA_COUNT")>0){this.remoteSDP.preloadRemoteMedia();const D=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:D});const W=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(W)}}catch(f){throw new Ce(K.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(f.toString()))}}send(n,i,a){var l=this;return wa(function*(){const u=yield Xt(l.mutex.lock("From P2PConnection.send"));try{if(!l.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");const h=[];n.forEach(F=>{const U=l.peerConnection.addTransceiver(F._mediaStreamTrack,{direction:"sendonly"});h.push(U),F._updateRtpTransceiver(U)}),Zn()&&ee("SIMULCAST")===!0&&(yield Xt(l.applySimulcastForFirefox(h,n)));const f=yield Xt(l.peerConnection.createOffer()),g=l.remoteSDP.predictReceivingMids(n.length),_=l.mungSendOfferSDP(f.sdp,n,g),y=yr.parse(_),T=g.map(F=>{const U=y.mediaDescriptions.find(z=>z.attributes.mid===F);if(!U)throw new Error("Cannot extract ssrc from mediaDescription.");return wI(U,ee("USE_PUB_RTX"))});let A;try{A=yield T}catch(F){A=[],l.remoteSDP.receive(n,i,a,A);const U=l.remoteSDP.toString();throw yield Xt(l.peerConnection.setLocalDescription({type:"offer",sdp:_})),yield Xt(l.peerConnection.setRemoteDescription({type:"answer",sdp:U})),yield Xt(l.stopSending(g,!0)),F}l.remoteSDP.receive(n,i,a,A);const D=l.remoteSDP.toString(),W=l.logSDPExchange(_,"offer","local","send");return yield Xt(l.peerConnection.setLocalDescription({type:"offer",sdp:_})),yield Xt(l.applySimulcastEncodings(h,n)),yield Xt(l.applySendEncodings(h,n)),W==null||W(D),yield Xt(l.peerConnection.setRemoteDescription({type:"answer",sdp:D})),h.map((F,U)=>{const z=g[U];return{localSSRC:T[U],id:z,transceiver:F}})}catch(h){throw h instanceof Ce?h:new Ce(K.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(h.toString()))}finally{u()}})()}async createDataChannels(n,i){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.createDataChannels before remote SDP created");let a=this.dataStreamChannelMap.get(n);if(a&&a.readyState==="open")k.debug("[P2PConnection] Channels are already available and can be reused directly.");else{const u=this.currentDataChannelId<1023?this.currentDataChannelId++:this.recoveredDataChannelIds.shift();if(typeof u!="number")throw new Error("create DataChannel error, because cannot get dc id");a=this.peerConnection.createDataChannel("datastream-channel",{id:u,negotiated:!0,ordered:!1,maxRetransmits:ee("DATASTREAM_MAX_RETRANSMITS")}),a.binaryType="arraybuffer",this.dataStreamChannelMap.set(n,a)}i.forEach(u=>{u._updateOriginDataChannel(a)});const{needExchangeSDP:l}=this.remoteSDP.sendDataChannel();if(l){const u=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:u});const h=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(h),k.debug("[P2PConnection] createDataChannels by exchanging SDP.")}else k.debug("[P2PConnection] createDataChannels no need to exchange SDP.");return}catch(a){throw a instanceof Ce?a:new Ce(K.EXCHANGE_SDP_FAILED,"P2PConnection.createDataChannels failed; ".concat(a.toString()))}}async stopDataChannels(n){try{const i=this.dataStreamChannelMap.get(n);return i&&(i.id&&this.recoveredDataChannelIds.push(i.id),i.close()),void this.dataStreamChannelMap.delete(n)}catch(i){throw i instanceof Ce?i:new Ce(K.DATACHANNEL_FAILED,"P2PConnection.stopDataChannels failed; ".concat(i.toString()))}}async stopSending(n,i){const a=i?void 0:await this.mutex.lock("From P2PConnection.stopSending");try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");const l=this.peerConnection.getTransceivers().filter(g=>n.indexOf(g.mid)!==-1);if(l.length!==n.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.");l.map(g=>{var _;hS(this.id+g.mid),g.direction="inactive",(_=g.stop)===null||_===void 0||_.call(g)});const u=await this.peerConnection.createOffer(),h=this.logSDPExchange(u.sdp||"","offer","local","stopSending");await this.peerConnection.setLocalDescription(u),this.remoteSDP.stopReceiving(n);const f=this.remoteSDP.toString();h==null||h(f),await this.peerConnection.setRemoteDescription({type:"answer",sdp:f})}catch(l){throw new Ce(K.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(l.toString()))}finally{a&&a()}}async receive(n,i,a,l){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(n," before remoteSDP created."));const{mid:u,needExchangeSDP:h}=this.remoteSDP.send(n,i,a,l);if(h){const g=this.remoteSDP.toString(),_=this.logSDPExchange(g,"offer","remote","receive");await this.peerConnection.setRemoteDescription({type:"offer",sdp:g});const y=await this.peerConnection.createAnswer(),T=this.mungReceiveAnswerSDP(y.sdp,u,n);_==null||_(T||""),await this.peerConnection.setLocalDescription({type:"answer",sdp:T}),k.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(n," by exchanging SDP."))}else k.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(n," no need to exchange SDP."));const f=this.peerConnection.getTransceivers().find(g=>g.mid===u);if(!f)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:f.receiver.track,id:u,transceiver:f}}catch(u){throw new Ce(K.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(u.toString()))}}async batchReceive(n){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.batchReceive before remoteSDP created.");const{mids:i,needExchangeSDP:a}=this.remoteSDP.batchSend(n);if(a){const l=this.remoteSDP.toString(),u=this.logSDPExchange(l,"offer","remote","receive");await this.peerConnection.setRemoteDescription({type:"offer",sdp:l});const h=await this.peerConnection.createAnswer();u==null||u(h.sdp||""),await this.peerConnection.setLocalDescription(h),k.debug("[".concat(this.store.clientId,"] [P2PConnection] batchReceive by exchanging SDP."))}else k.debug("[".concat(this.store.clientId,"] [P2PConnection] batchReceive no need to exchange SDP."));return i.map(l=>{const u=this.peerConnection.getTransceivers().find(h=>h.mid===l);if(!u)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:u.receiver.track,id:l,transceiver:u}})}catch(i){throw new Ce(K.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(i.toString()))}}async stopReceiving(n){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");this.remoteSDP.stopSending(n);const i=this.remoteSDP.toString(),a=this.logSDPExchange(i,"offer","remote","stopReceiving");await this.peerConnection.setRemoteDescription({type:"offer",sdp:i});const l=await this.peerConnection.createAnswer();a==null||a(l.sdp||""),await this.peerConnection.setLocalDescription(l)}catch(i){throw new Ce(K.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(i.toString()))}}async muteRemote(n){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteRemote mid=".concat(n," before remote SDP created."));this.remoteSDP.mute(n);const i=this.remoteSDP.toString(),a=this.logSDPExchange(i,"offer","remote","muteRemote");await this.peerConnection.setRemoteDescription({type:"offer",sdp:i});const l=await this.peerConnection.createAnswer();a==null||a(l.sdp||""),await this.peerConnection.setLocalDescription(l)}catch(i){throw new Ce(K.EXCHANGE_SDP_FAILED,"P2PConnection.muteRemote failed; ".concat(i.toString()))}}async unmuteRemote(n){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteRemote mid=".concat(n," before remote SDP created."));this.remoteSDP.unmute(n);const i=this.remoteSDP.toString(),a=this.logSDPExchange(i,"offer","remote","unmuteRemote");await this.peerConnection.setRemoteDescription({type:"offer",sdp:i});const l=await this.peerConnection.createAnswer();a==null||a(l.sdp||""),await this.peerConnection.setLocalDescription(l)}catch(i){throw new Ce(K.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteRemote failed; ".concat(i.toString()))}}async muteLocal(n){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");const i=this.peerConnection.getTransceivers().filter(h=>h.mid&&n.indexOf(h.mid)!==-1);if(i.length!==n.length)throw new Error("Transceivers' length doesn't match mids' length.");i.map(h=>{h.direction="inactive"});const a=await this.peerConnection.createOffer(),l=this.logSDPExchange(a.sdp||"","offer","local","muteLocal");await this.peerConnection.setLocalDescription(a),this.remoteSDP.muteRemote(n);const u=this.remoteSDP.toString();l==null||l(u),await this.peerConnection.setRemoteDescription({type:"answer",sdp:u})}catch(i){throw new Ce(K.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(i.toString()))}}async unmuteLocal(n){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");const i=this.peerConnection.getTransceivers().filter(h=>h.mid&&n.indexOf(h.mid)!==-1);if(i.length!==n.length)throw new Error("Transceivers' length doesn't match mids' length.");i.map(async(h,f)=>{h.direction="sendonly"});const a=await this.peerConnection.createOffer(),l=this.logSDPExchange(a.sdp||"","offer","local","unmuteLocal");await this.peerConnection.setLocalDescription(a),this.remoteSDP.unmuteRemote(n);const u=this.remoteSDP.toString();l==null||l(u),await this.peerConnection.setRemoteDescription({type:"answer",sdp:u})}catch(i){throw new Ce(K.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(i.toString()))}}restartICE(n){var i=this;return wa(function*(){const a=yield Xt(i.mutex.lock("From P2PConnection.restartICE"));try{if(!i.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");if(un().supportPCSetConfiguration){const _=i.peerConnection.getConfiguration(),y=n===vo.RELAY?"relay":"all";_.iceTransportPolicy!==y&&(k.debug("[".concat(i.store.clientId,"] restartICE change iceTransportPolicy from [").concat(_.iceTransportPolicy,"] to [").concat(y,"]")),_.iceTransportPolicy=y,i.peerConnection.setConfiguration(_))}else if(n===vo.RELAY)return;i.remoteSDP.updateCandidates(n);const l=yield Xt(i.peerConnection.createOffer({iceRestart:!0}));if(!l.sdp)throw new Error("Cannot restartICE because restart offer SDP does not exist.");const u=xc(l.sdp),{remoteIceParameters:h}=yield u.iceParameters;i.remoteSDP.restartICE(h);const f=i.remoteSDP.toString(),g=i.logSDPExchange(l.sdp||"","offer","local","restartICE");i.store.descriptionStart(),yield Xt(i.peerConnection.setLocalDescription(l)),g==null||g(f),yield Xt(i.peerConnection.setRemoteDescription({type:"answer",sdp:f}))}catch(l){k.warning("[".concat(i.store.clientId,"] restart ICE failed, abort operation"),l)}finally{a()}})()}close(){var n;this.peerConnection.getTransceivers().forEach(i=>{hS(this.id+i.mid)}),this.peerConnection.close(),(n=this.onConnectionStateChange)===null||n===void 0||n.call(this,"closed"),this.tryUnbindTransportEvents(),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.transportEventReceiver=void 0,this.statsFilter.destroy(),this.dataStreamChannelMap.clear(),this.recoveredDataChannelIds=[],this.currentDataChannelId=1}getStats(){return id(id({},this.statsFilter.getStats()),{},{qualityLimitationReason:this.qualityLimitationReason})}getRemoteVideoIsReady(n){return this.statsFilter.getVideoIsReady(n)}async updateEncoderConfig(n,i){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");const a=await this.peerConnection.createOffer(),l=this.mungSendOfferSDP(a.sdp,[i],[n]);this.remoteSDP.updateRecvMedia(n,i);const u=this.remoteSDP.toString(),h=this.logSDPExchange(l,"offer","local","updateEncoderConfig");await this.peerConnection.setLocalDescription({type:"offer",sdp:l}),h==null||h(u),await this.peerConnection.setRemoteDescription({type:"answer",sdp:u})}catch(a){throw new Ce(K.EXCHANGE_SDP_FAILED,a.toString())}}async updateSendParameters(n,i){const a=this.peerConnection.getTransceivers().filter(l=>l.mid===n);a.length===1&&(this.isVP8Simulcast(i)?Zn()||await this.applySimulcastEncodings(a,[i]):await this.applySendEncodings(a,[i]))}setStatsRemoteVideoIsReady(n,i){this.statsFilter.setVideoIsReady2(n,i)}async replaceTrack(n,i){const a=this.peerConnection.getTransceivers().find(l=>l.mid===i);a&&await a.sender.replaceTrack(n._mediaStreamTrack)}async getSelectedCandidatePair(){const n=this.peerConnection.getReceivers();if(n.length>0&&n[0].transport&&n[0].transport.iceTransport&&n[0].transport.iceTransport.getSelectedCandidatePair&&n[0].transport.iceTransport.getSelectedCandidatePair()){const i=n[0].transport.iceTransport,{local:a,remote:l}=i.getSelectedCandidatePair();return{local:id(id({},Sl),{},{candidateType:a.type,protocol:a.protocol,address:a.address,port:a.port}),remote:id(id({},Sl),{},{candidateType:l.type,protocol:l.protocol,address:l.address,port:l.port})}}return this.statsFilter.getSelectedCandidatePair()}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var n;(n=this.onICEConnectionStateChange)===null||n===void 0||n.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var n;(n=this.onConnectionStateChange)===null||n===void 0||n.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidate=n=>{n.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,k.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},setTimeout(()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,k.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))},ee("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(n){const i={iceServers:[]};return n.iceServers?i.iceServers=n.iceServers:n.turnServer&&n.turnServer.mode!=="off"&&(Bp(n.turnServer.servers)?i.iceServers=n.turnServer.servers:(i.iceServers&&i.iceServers.push(...Ig.turnServerConfigToIceServers(n.turnServer.servers)),ee("USE_TURN_SERVER_OF_GATEWAY")&&i.iceServers&&n.turnServer.serversFromGateway&&i.iceServers.push(...Ig.turnServerConfigToIceServers(n.turnServer.serversFromGateway)),ee("FORCE_TURN_TCP")?i.iceTransportPolicy="relay":n.turnServer.servers.concat(n.turnServer.serversFromGateway||[]).forEach(a=>{a.forceturn&&(i.iceTransportPolicy="relay")}))),ee("ENABLE_ENCODED_TRANSFORM")&&un().supportWebRTCEncodedTransform&&(i.encodedInsertableStreams=!0),i}static turnServerConfigToIceServers(n){const i=[];return n.forEach(a=>{a.security?a.tcpport&&i.push({username:a.username,credential:a.password,credentialType:"password",urls:"turns:".concat(zu(a.turnServerURL),":").concat(a.tcpport,"?transport=tcp")}):(a.udpport&&!ee("FORCE_TURN_TCP")&&i.push({username:a.username,credential:a.password,credentialType:"password",urls:"turn:".concat(a.turnServerURL,":").concat(a.udpport,"?transport=udp")}),a.tcpport&&i.push({username:a.username,credential:a.password,credentialType:"password",urls:"turn:".concat(a.turnServerURL,":").concat(a.tcpport,"?transport=tcp")}))}),i}tryBindTransportEvents(n){const i=n.transport;if(i){this.transportEventReceiver=n,i.onstatechange=()=>{var l;i!=null&&i.state&&((l=this.onDTLSTransportStateChange)===null||l===void 0||l.call(this,i.state))},i.onerror=l=>{var u;(u=this.onDTLSTransportError)===null||u===void 0||u.call(this,"error"in l?l.error:l)};const a=i.iceTransport;a&&(a.onstatechange=()=>{const l=i==null?void 0:i.iceTransport.state;var u;l&&((u=this.onICETransportStateChange)===null||u===void 0||u.call(this,l))},a.getSelectedCandidatePair&&(a.onselectedcandidatepairchange=()=>{if(a.getSelectedCandidatePair()){const{local:l,remote:u}=a.getSelectedCandidatePair();k.info("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] selectedcandidatepairchange: local ").concat(JSON.stringify({candidateType:l.type,protocol:l.protocol}),", remote ").concat(JSON.stringify({candidateType:u.type,protocol:u.protocol,address:u.address,port:u.port})," )"))}}))}}tryUnbindTransportEvents(){this.transportEventReceiver&&this.transportEventReceiver.transport&&(this.transportEventReceiver.transport.onstatechange=null,this.transportEventReceiver.transport.onerror=null,this.transportEventReceiver.transport.iceTransport&&(this.transportEventReceiver.transport.iceTransport.onstatechange=null))}async updateRtpSenderEncodings(n,i){var a,l;if(i||(i=this.peerConnection.getSenders().find(U=>U.track===n._mediaStreamTrack)),!i)return k.warn("[".concat(n.getTrackId(),"] no rtpSender found}"));if(this.isVP8Simulcast(n))return k.warn("[updateRtpSenderEncodings] Track is VP8 simulcast, please apply simulcast encodings");if(!un().supportSetRtpSenderParameters)return k.warn("[updateRtpSenderEncodings] Browser not support set rtp-sender parameters");const u={},h={};switch(n._optimizationMode){case"motion":u.degradationPreference="maintain-framerate";break;case"detail":u.degradationPreference="maintain-resolution";break;case"balanced":u.degradationPreference="balanced"}const f=function(F,U){return F.getTransceivers().find(z=>z.sender.track===U||z.receiver.track===U)}(this.peerConnection,n._mediaStreamTrack),g=jhe(n);if(Epe(n)&&f&&i&&g&&this.getLocalVideoStats&&Ye(a=["vp8","vp9"]).call(a,this.store.codec)){var _;const F=u.degradationPreference||(Ye(_=n._hints).call(_,ar.CUSTOM_TRACK)?ee("CUSTOM_ADAPTATION_DEFAULT_MODE"):"maintain-framerate");(function(U,z,X,ue,pe,Ee){if(hS(U),ue!=="balanced"&&ue!=="maintain-framerate"&&ue!=="maintain-resolution")return;let Se=-1;X6(U,z);const Re=window.setInterval(()=>{const Pe=dS.get(U);if(!ee("ENABLE_AG_ADAPTATION")||!Pe)return void hS(U);const tt=Ee();if(tt.sendPackets>0&&tt.OutgoingAvailableBandwidth>0){if(Se===-1)return void(Se=Date.now());if(Date.now()-Se<1e3)return;const ln=tt.sendFrameRate,Fn=tt.OutgoingAvailableBandwidth,[sr,Jr]=vpe(U,ln,Fn,Pe.adaptationConfig,z,ue);Jr&&(X.qualityLimitationReason=Jr),sr&&Pe.adaptationConfig.scale!==sr.scale&&(k.debug("[".concat(U,"] applyAdaptation: ").concat(X.qualityLimitationReason,`
           sendFps `).concat(ln,", bwe ").concat(Fn,", switch from ").concat(Pe.adaptationConfig.scale," to ").concat(sr.scale," ")),Pe.adaptationConfig=LI(LI({},Pe.adaptationConfig),sr),pe(sr))}},ee("CHECK_LOCAL_STATS_INTERVAL")),Ae=LI({},z);dS.set(U,{timer:Re,adaptationConfig:Ae,originConfig:z,adaptationFunc:pe}),k.debug("[".concat(U,"] start adaptation, originConfig: ").concat(JSON.stringify(z),", degradationPreference: ").concat(ue))})(this.id+f.mid,g,this,F,U=>{i&&this.updateAdaptation(i,U)},this.getLocalVideoStats.bind(this))}if(n._encoderConfig){var y;const{bitrateMax:F,frameRate:U,scaleResolutionDownBy:z}=n._encoderConfig;F&&(h.maxBitrate=1e3*F),(Ye(y=n._hints).call(y,ar.LOW_STREAM)||n.isUseScaleResolutionDownBy)&&(U&&(h.maxFramerate=ia(U)),z&&z>=1&&(h.scaleResolutionDownBy=z))}const{maxFramerate:T}=ee("ENCODER_CONFIG_LIMIT");if(T&&typeof T=="number"&&(h.maxFramerate=h.maxFramerate?Math.min(h.maxFramerate,T):T),ee("DSCP_TYPE")&&Uu()){var A;const F=ee("DSCP_TYPE");Ye(A=["very-low","low","medium","high"]).call(A,F)&&(h.networkPriority=F)}const D=i.getParameters(),W=(l=D.encodings)===null||l===void 0?void 0:l[0];Zn()&&!W&&(u.encodings=[h]),W&&Object.assign(W,h),Object.assign(D,u),k.debug("[".concat(n.getTrackId(),"] updateRtpSenderEncodings: ").concat(JSON.stringify(D.encodings))),await i.setParameters(D)}async updateAdaptation(n,i){var a,l;if(!n)return k.debug("[updateAdaptation] no rtpSender found");if(!un().supportSetRtpSenderParameters)return k.debug("[updateAdaptation] Browser not support set rtp-sender parameters");const u={},{bitrateMax:h,frameRate:f,scaleResolutionDownBy:g}=i;h&&(u.maxBitrate=1e3*h),f&&(u.maxFramerate=ia(f)),g&&g>=1&&Ye(a=["vp8","vp9"]).call(a,this.store.codec)&&(u.scaleResolutionDownBy=g);const _=n.getParameters(),y=(l=_.encodings)===null||l===void 0?void 0:l[0];y&&Object.assign(y,u),Object.assign(_,{});try{await n.setParameters(_),k.debug("[updateAdaptation] updateRtpSenderEncodings: ".concat(JSON.stringify(_.encodings)))}catch(T){!("transport"in n)||n.transport&&n.transport.state==="connected"?this.peerConnectionState!=="connected"?k.debug("[updateAdaptation] peerConnection not connected}"):k.debug("[updateAdaptation] updateRtpSenderEncodings failed",T):k.debug("[updateAdaptation] rtpSender transport not connected}")}}async applySendEncodings(n,i){try{if(!un().supportSetRtpSenderParameters||n.length!==i.length)return;for(let a=0;a<n.length;a++){const l=n[a],u=i[a];u instanceof nr&&!this.isVP8Simulcast(u)&&await this.updateRtpSenderEncodings(u,l.sender)}}catch{k.debug("[".concat(this.store.clientId,"] Apply RTPSendEncodings failed."))}}mungSendOfferSDP(n,i,a){const l=yr.parse(n);return i.forEach((u,h)=>{const f=a[h],g=l.mediaDescriptions.find(_=>_.attributes.mid===f);g&&(Zu(g,u),AI(g,u,this.store.codec))}),yr.print(l)}mungReceiveAnswerSDP(n,i,a){const l=yr.parse(n),u=l.mediaDescriptions.find(h=>h.attributes.mid===i);return u&&(a===ut.AUDIO&&u.media.mediaType==="audio"&&Nc(u),this.useXR&&oS(l)),yr.print(l)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=n=>{var i;(i=this.onFirstAudioReceived)===null||i===void 0||i.call(this,n)},this.statsFilter.onFirstVideoReceived=n=>{var i;(i=this.onFirstVideoReceived)===null||i===void 0||i.call(this,n)},this.statsFilter.onFirstAudioDecoded=n=>{var i;(i=this.onFirstAudioDecoded)===null||i===void 0||i.call(this,n)},this.statsFilter.onFirstVideoDecoded=(n,i,a)=>{var l;(l=this.onFirstVideoDecoded)===null||l===void 0||l.call(this,n,i,a)},this.statsFilter.onSelectedLocalCandidateChanged=(n,i)=>{var a;(a=this.onSelectedLocalCandidateChanged)===null||a===void 0||a.call(this,n,i)},this.statsFilter.onSelectedRemoteCandidateChanged=(n,i)=>{var a;(a=this.onSelectedRemoteCandidateChanged)===null||a===void 0||a.call(this,n,i)},this.statsFilter.onFirstVideoDecodedTimeout=n=>{var i;(i=this.onFirstVideoDecodedTimeout)===null||i===void 0||i.call(this,n)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0,this.statsFilter.onFirstVideoDecodedTimeout=void 0}async applySimulcastForFirefox(n,i){if(n.length===i.length)for(let g=0;g<n.length;g++){var a,l,u,h,f;const _=n[g],y=i[g];if(y instanceof nr&&!Ye(a=y._hints).call(a,ar.LOW_STREAM)&&(l=y._encoderConfig)!==null&&l!==void 0&&l.bitrateMax&&((u=y._encoderConfig)===null||u===void 0?void 0:u.bitrateMax)>200&&(h=y._scalabilityMode)!==null&&h!==void 0&&h.numSpatialLayers&&((f=y._scalabilityMode)===null||f===void 0?void 0:f.numSpatialLayers)>1&&this.store.codec==="vp8"){const T={},A={high:1e3*(y._encoderConfig.bitrateMax-50),medium:5e4};T.encodings=[{rid:"m",active:!0,maxBitrate:A.medium,scaleResolutionDownBy:4},{rid:"h",active:!0,maxBitrate:A.high}];const D=_.sender.getParameters();await _.sender.setParameters(Object.assign(D,T))}}}async applySimulcastEncodings(n,i){if(!Zn()&&n.length===i.length)for(let a=0;a<n.length;a++){const l=i[a];if(l instanceof nr&&this.isVP8Simulcast(l)){const u=n[a],h={},f={high:1e3*(l._encoderConfig.bitrateMax-50),medium:5e4};h.encodings=[{active:!0,adaptivePtime:!1,networkPriority:"high",priority:"high",maxBitrate:f.high},{active:!0,adaptivePtime:!1,networkPriority:"low",priority:"low",maxBitrate:f.medium,scaleResolutionDownBy:4}];const g=u.sender.getParameters();await u.sender.setParameters(Object.assign(g,h))}}}isVP8Simulcast(n){var i,a,l,u,h;return!!(n instanceof nr&&ee("SIMULCAST")&&this.store.codec==="vp8"&&!Ye(i=n._hints).call(i,ar.LOW_STREAM)&&(a=n._encoderConfig)!==null&&a!==void 0&&a.bitrateMax&&((l=n._encoderConfig)===null||l===void 0?void 0:l.bitrateMax)>200&&(u=n._scalabilityMode)!==null&&u!==void 0&&u.numSpatialLayers&&((h=n._scalabilityMode)===null||h===void 0?void 0:h.numSpatialLayers)>1)}logSDPExchange(n,i,a,l){if(ee("SDP_LOGGING"))return k.upload("[".concat(this.store.clientId,"] exchanging ").concat(a," ").concat(i," SDP during P2PConnection.").concat(l,`
`),n),i==="offer"?u=>{this.logSDPExchange(u,"answer",a==="local"?"remote":"local",l)}:void 0}async getRemoteSSRC(n){if(!this.remoteSDP)return;const i=this.remoteSDP.getSSRC(n);return i==null?void 0:i[0].ssrcId}setConfiguration(n){if(un().supportPCSetConfiguration){const i=Ig.resolvePCConfiguration(n);this.peerConnection.setConfiguration(i)}}},$e(Rn.prototype,"updateRemoteRTPCapabilities",[oa],Object.getOwnPropertyDescriptor(Rn.prototype,"updateRemoteRTPCapabilities"),Rn.prototype),$e(Rn.prototype,"connect",[oa],Object.getOwnPropertyDescriptor(Rn.prototype,"connect"),Rn.prototype),$e(Rn.prototype,"createDataChannels",[oa],Object.getOwnPropertyDescriptor(Rn.prototype,"createDataChannels"),Rn.prototype),$e(Rn.prototype,"receive",[oa],Object.getOwnPropertyDescriptor(Rn.prototype,"receive"),Rn.prototype),$e(Rn.prototype,"batchReceive",[oa],Object.getOwnPropertyDescriptor(Rn.prototype,"batchReceive"),Rn.prototype),$e(Rn.prototype,"stopReceiving",[oa],Object.getOwnPropertyDescriptor(Rn.prototype,"stopReceiving"),Rn.prototype),$e(Rn.prototype,"muteRemote",[oa],Object.getOwnPropertyDescriptor(Rn.prototype,"muteRemote"),Rn.prototype),$e(Rn.prototype,"unmuteRemote",[oa],Object.getOwnPropertyDescriptor(Rn.prototype,"unmuteRemote"),Rn.prototype),$e(Rn.prototype,"muteLocal",[oa],Object.getOwnPropertyDescriptor(Rn.prototype,"muteLocal"),Rn.prototype),$e(Rn.prototype,"unmuteLocal",[oa],Object.getOwnPropertyDescriptor(Rn.prototype,"unmuteLocal"),Rn.prototype),$e(Rn.prototype,"close",[oa],Object.getOwnPropertyDescriptor(Rn.prototype,"close"),Rn.prototype),$e(Rn.prototype,"updateEncoderConfig",[oa],Object.getOwnPropertyDescriptor(Rn.prototype,"updateEncoderConfig"),Rn.prototype),$e(Rn.prototype,"updateSendParameters",[oa],Object.getOwnPropertyDescriptor(Rn.prototype,"updateSendParameters"),Rn.prototype),$e(Rn.prototype,"replaceTrack",[oa],Object.getOwnPropertyDescriptor(Rn.prototype,"replaceTrack"),Rn.prototype),$e(Rn.prototype,"updateAdaptation",[oa],Object.getOwnPropertyDescriptor(Rn.prototype,"updateAdaptation"),Rn.prototype),$e(Rn.prototype,"getRemoteSSRC",[oa],Object.getOwnPropertyDescriptor(Rn.prototype,"getRemoteSSRC"),Rn.prototype),Rn);function oa(t,n,i){const a=t[n];if(typeof a!="function")throw new Error("Cannot use mutex on object property.");return i.value=async function(){const l=this.mutex,u=await l.lock("From P2PConnection.".concat(n));try{for(var h=arguments.length,f=new Array(h),g=0;g<h;g++)f[g]=arguments[g];return await a.apply(this,f)}finally{u()}},i}function ej(t,n){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),i.push.apply(i,a)}return i}function tj(t){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?ej(Object(i),!0).forEach(function(a){V(t,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):ej(Object(i)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(i,a))})}return t}const nj=`v=0
o=- 0 0 IN IP4 127.0.0.1
s=AgoraGateway
t=0 0
a=group:BUNDLE 0
a=msid-semantic: WMS
a=ice-lite
m=application 9 UDP/DTLS/SCTP webrtc-datachannel
c=IN IP4 127.0.0.1
a=mid:0
`,pS="9",kI=2e4,MI=4e4;class _pe{get localCapabilities(){return or(this._localCapabilities)}get rtpCapabilities(){return or(this._rtpCapabilities)}get candidates(){return or(this._candidates)}get iceParameters(){return or(this._iceParameters)}get dtlsParameters(){return or(this._dtlsParameters)}constructor(n){V(this,"sessionDesc",void 0),V(this,"_localCapabilities",void 0),V(this,"_rtpCapabilities",void 0),V(this,"_candidates",void 0),V(this,"_iceParameters",void 0),V(this,"_dtlsParameters",void 0),V(this,"setup",void 0),V(this,"currentMidIndex",void 0),V(this,"cname",void 0),V(this,"firefoxSsrcMidMap",new Map),n=or(n);const{remoteIceParameters:i,remoteDtlsParameters:a,candidates:l,remoteRTPCapabilities:u,remoteSetup:h,localCapabilities:f,cname:g}=n,_=yr.parse(nj);this._rtpCapabilities=u,this._candidates=l,this._iceParameters=i,this._dtlsParameters=a,this._localCapabilities=f,this.setup=h,this.cname=g;const y=this.rtpCapabilities.send;for(const T of _.mediaDescriptions){if(T.attributes.iceUfrag=i.iceUfrag,T.attributes.icePwd=i.icePwd,T.attributes.fingerprints=a.fingerprints,T.attributes.candidates=l,T.attributes.setup=h,T.media.mediaType==="application"&&(T.attributes.sctpPort="5000"),T.media.mediaType==="video"&&(T.media.fmts=y.videoCodecs.map(A=>A.payloadType.toString(10)),T.attributes.payloads=y.videoCodecs,T.attributes.extmaps=y.videoExtensions,ee("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:A,ssrcGroups:D}=Ja([{ssrcId:MI,rtx:ee("USE_SUB_RTX")?40001:void 0}],this.cname);T.attributes.ssrcs=A,T.attributes.ssrcGroups=D}if(T.media.mediaType==="audio"&&(T.media.fmts=y.audioCodecs.map(A=>A.payloadType.toString(10)),T.attributes.payloads=y.audioCodecs,T.attributes.extmaps=y.audioExtensions,Nc(T),ee("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:A,ssrcGroups:D}=Ja([{ssrcId:kI}],this.cname);T.attributes.ssrcs=A,T.attributes.ssrcGroups=D}}this.sessionDesc=_,this.currentMidIndex=_.mediaDescriptions.length-1}updateRemoteRTPCapabilities(n){const i=yr.parse(nj);this._rtpCapabilities=n;const a=this.rtpCapabilities.send;for(const l of i.mediaDescriptions){if(l.attributes.iceUfrag=this._iceParameters.iceUfrag,l.attributes.icePwd=this._iceParameters.icePwd,l.attributes.fingerprints=this._dtlsParameters.fingerprints,l.attributes.candidates=this._candidates,l.attributes.setup=this.setup,l.media.mediaType==="application"&&(l.attributes.sctpPort="5000"),l.media.mediaType==="video"&&(l.media.fmts=a.videoCodecs.map(u=>u.payloadType.toString(10)),l.attributes.payloads=a.videoCodecs,l.attributes.extmaps=a.videoExtensions,ee("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:u,ssrcGroups:h}=Ja([{ssrcId:MI,rtx:ee("USE_SUB_RTX")?40001:void 0}],this.cname);l.attributes.ssrcs=u,l.attributes.ssrcGroups=h}if(l.media.mediaType==="audio"&&(l.media.fmts=a.audioCodecs.map(u=>u.payloadType.toString(10)),l.attributes.payloads=a.audioCodecs,l.attributes.extmaps=a.audioExtensions,ee("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:u,ssrcGroups:h}=Ja([{ssrcId:kI}],this.cname);l.attributes.ssrcs=u,l.attributes.ssrcGroups=h}}this.sessionDesc=i,this.currentMidIndex=i.mediaDescriptions.length-1}preloadRemoteMedia(n){this.rtpCapabilities;const i=this.candidates,a=this.dtlsParameters,l=this.iceParameters,u=this.rtpCapabilities.send;for(let h=1;h<n;h++){const f=2*h+kI,g=2*h+MI,{ssrcs:_,ssrcGroups:y}=Ja([{ssrcId:f}],this.cname),{ssrcs:T,ssrcGroups:A}=Ja([{ssrcId:g,rtx:ee("USE_SUB_RTX")?g+1:void 0}],this.cname);this.sessionDesc.mediaDescriptions.push({media:{mediaType:"video",port:pS,protos:["UDP","TLS","RTP","SAVPF"],fmts:u.videoCodecs.map(D=>D.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:l.iceUfrag,icePwd:l.icePwd,unrecognized:[],candidates:i,extmaps:u.videoExtensions,fingerprints:a.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:T,ssrcGroups:A,rtcpFeedbackWildcards:[],payloads:u.videoCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*h-1)}}),this.sessionDesc.mediaDescriptions.push({media:{mediaType:"audio",port:pS,protos:["UDP","TLS","RTP","SAVPF"],fmts:u.audioCodecs.map(D=>D.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:l.iceUfrag,icePwd:l.icePwd,unrecognized:[],candidates:i,extmaps:u.audioExtensions,fingerprints:a.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:_,ssrcGroups:y,rtcpFeedbackWildcards:[],payloads:u.audioCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*h)}}),this.currentMidIndex+=2}this.updateBundleMids()}toString(){return yr.print(this.sessionDesc)}send(n,i,a,l){const{ssrcs:u,ssrcGroups:h}=Ja(i,this.cname,ee("SYNC_GROUP")?a:void 0),f=this.findPreloadMediaDesc(u);if(f){if(Zn()&&this.firefoxSsrcMidMap.set(u[0].ssrcId,f.attributes.mid),l&&(l.twcc||l.remb)){const g=this.sessionDesc.mediaDescriptions.indexOf(f);return this.sessionDesc.mediaDescriptions[g]=this.mungSendMediaDesc(f,l),{mid:f.attributes.mid,needExchangeSDP:!0}}return{mid:f.attributes.mid,needExchangeSDP:!1}}{const g=this.findAvailableMediaIndex(n,u);let _;return g===-1||Si()||Ji()||d4()||g===0&&ee("USE_SUB_RTX")?(_=this.createOrRecycleSendMedia(n,u,h,"sendonly",l),this.updateBundleMids()):(_=or(this.sessionDesc.mediaDescriptions[g]),_.attributes.direction="sendonly",_.attributes.ssrcs=u,_.attributes.ssrcGroups=h,this.sessionDesc.mediaDescriptions[g]=this.mungSendMediaDesc(_,l)),Zn()&&this.firefoxSsrcMidMap.set(u[0].ssrcId,_.attributes.mid),{mid:_.attributes.mid,needExchangeSDP:!0}}}batchSend(n){const i=n.map(u=>{let{kind:h,ssrcMsg:f,mslabel:g}=u;return this.send(h,f,g)}),a=[];let l=!1;return i.forEach(u=>{let{mid:h,needExchangeSDP:f}=u;f&&(l=!0),a.push(h)}),{mids:a,needExchangeSDP:l}}stopSending(n){const i=this.sessionDesc.mediaDescriptions.filter(a=>a.attributes.mid&&n.indexOf(a.attributes.mid)!==-1);if(i.length!==n.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.stopSending.");i.forEach(a=>{a.attributes.mid==="0"||Zn()||Si()||Ji()?a.attributes.ssrcs=[]:(a.attributes.ssrcs=[],a.attributes.direction="inactive",a.media.port="0")}),this.updateBundleMids()}mute(n){const i=this.sessionDesc.mediaDescriptions.find(a=>a.attributes.mid===n);if(!i)throw new Error("mediaDescription not found with ".concat(n," in remote SDP when calling RemoteSDP.mute."));i.attributes.direction="inactive"}unmute(n){const i=this.sessionDesc.mediaDescriptions.find(a=>a.attributes.mid===n);if(!i)throw new Error("mediaDescription not found with ".concat(n," in remote SDP when calling RemoteSDP.unmute."));i.attributes.direction="sendonly"}muteRemote(n){const i=this.sessionDesc.mediaDescriptions.filter(a=>Ye(n).call(n,a.attributes.mid||""));if(i.length!==n.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");i.forEach(a=>{a.attributes.direction="inactive"})}unmuteRemote(n){const i=this.sessionDesc.mediaDescriptions.filter(a=>Ye(n).call(n,a.attributes.mid||""));if(i.length!==n.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");i.forEach(a=>{a.attributes.direction="recvonly"})}receive(n,i,a,l){n.forEach((u,h)=>{this.createOrRecycleRecvMedia(u,[],"recvonly",i,a,l[h])}),this.updateBundleMids()}stopReceiving(n){const i=this.sessionDesc.mediaDescriptions.filter(a=>n.indexOf(a.attributes.mid)!==-1);if(i.length!==n.length)throw new Error("MediaDescriptions' length doesn't match mids's length when calling RemoteSDP.receive.");i.forEach(a=>{a.media.port="0",a.attributes.direction="inactive"}),this.updateBundleMids()}updateCandidates(n){n===vo.TCP?this._candidates.forEach(i=>{this._candidates.findIndex(a=>a.transport==="tcp"&&a.connectionAddress===i.connectionAddress&&a.port===i.port)===-1&&this._candidates.push(tj(tj({},i),{},{foundation:"tcpcandidate",priority:Number(i.priority)-1+"",transport:"tcp",port:Number(i.port)+90+""}))}):this._candidates=this._candidates.filter(i=>i.transport!=="tcp");for(const i of this.sessionDesc.mediaDescriptions)i.attributes.candidates=this.candidates}restartICE(n){n=or(n),this._iceParameters=n,this.sessionDesc.mediaDescriptions.forEach(i=>{i.attributes.iceUfrag=n.iceUfrag,i.attributes.icePwd=n.icePwd})}predictReceivingMids(n){const i=[];for(let a=0;a<n;a++)i.push((this.currentMidIndex+a+1).toString(10));return i}findAvailableMediaIndex(n,i){return this.sessionDesc.mediaDescriptions.findIndex(a=>{const l=a.media.mediaType===n&&a.media.port!=="0"&&(a.attributes.direction==="sendonly"||a.attributes.direction==="sendrecv")&&a.attributes.ssrcs.length===0;if(Zn()){if(l){const u=this.firefoxSsrcMidMap.get(i[0].ssrcId);return!(u||a.attributes.mid!=="0"&&a.attributes.mid!=="1")||!(!u||u!==a.attributes.mid)}return!1}return l})}createOrRecycleRecvMedia(n,i,a,l,u,h){const f=n._mediaStreamTrack.kind,g=this.rtpCapabilities.recv,_=Sh(f,g,this.localCapabilities.send,f===ut.VIDEO?l:u),y=f===ut.VIDEO?g.videoExtensions:g.audioExtensions;this.currentMidIndex+=1;const T="".concat(this.currentMidIndex);let A={media:{mediaType:f,port:pS,protos:["UDP","TLS","RTP","SAVPF"],fmts:_.map(W=>W.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:y,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:i,ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:_,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:a,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(T)}};A=this.mungRecvMediaDsec(A,n,h);const D=this.findFirstClosedMedia(f);if(D){const W=this.sessionDesc.mediaDescriptions.indexOf(D);this.sessionDesc.mediaDescriptions[W]=A}else this.sessionDesc.mediaDescriptions.push(A);return A}updateRemoteCodec(n,i,a){const l=[...new Set(this._rtpCapabilities.recv.videoCodecs.map(A=>A.rtpMap&&A.rtpMap.encodingName.toLowerCase()||"").filter(A=>{var D;return Ye(D=Object.keys($p)).call(D,A)}))],u=new Set(i);if(l.every(A=>u.has(A)))return k.debug("codecs has not changed, no need to updateRemoteCodec, codecs: ".concat(i)),!1;const h=this._rtpCapabilities.recv.videoCodecs.filter(A=>i.some(D=>{var W;return Ye(W=A.rtpMap&&A.rtpMap.encodingName.toLowerCase()||"").call(W,D)}));if(h.length===0)return k.debug("updateRemoteCodec failed, because cannot find matched codec, remoteCapabilities codecs: ".concat(l," codecs: ").concat(i)),!1;const f=[...new Set(h.map(A=>A.rtpMap&&A.rtpMap.encodingName.toLowerCase()||""))];let g;if(k.debug("updateRemoteCodec, from ".concat(l," to ").concat(f)),n.length===0)g=this.sessionDesc.mediaDescriptions.filter(A=>A.media.mediaType==="video"&&A.attributes.direction==="recvonly");else if(g=this.sessionDesc.mediaDescriptions.filter(A=>A.attributes.mid&&Ye(n).call(n,A.attributes.mid)&&A.attributes.direction==="recvonly"),g.length!==n.length)return k.debug("updateRemoteCodec failed, because cannot find mids, mids: ".concat(n,", codecs: ").concat(i)),!1;this._rtpCapabilities.recv.videoCodecs=h;const _=this.localCapabilities.send,y=this.rtpCapabilities.recv,T=Sh(ut.VIDEO,y,_,a);return g.forEach(A=>{const D=T.map(W=>W.payloadType.toString(10));k.debug("updateRemoteCodec mid: ".concat(A.attributes.mid,", from ").concat(A.attributes.payloads," to ").concat(T)),A.attributes.payloads=T,A.media.fmts=D}),!0}createOrRecycleSendMedia(n,i,a,l,u){const h=this.rtpCapabilities.send,f=n===ut.VIDEO?h.videoCodecs:h.audioCodecs,g=n===ut.VIDEO?h.videoExtensions:h.audioExtensions;this.currentMidIndex+=1;const _="".concat(this.currentMidIndex);let y={media:{mediaType:n,port:pS,protos:["UDP","TLS","RTP","SAVPF"],fmts:f.map(A=>A.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:g,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:i,ssrcGroups:a,rtcpFeedbackWildcards:[],payloads:f,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:l,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(_)}};y=this.mungSendMediaDesc(y,u);const T=this.findFirstClosedMedia(n);if(T){const A=this.sessionDesc.mediaDescriptions.indexOf(T);this.sessionDesc.mediaDescriptions[A]=y}else this.sessionDesc.mediaDescriptions.push(y);return y}updateBundleMids(){this.sessionDesc.attributes.groups[0].identificationTag=this.sessionDesc.mediaDescriptions.filter(n=>n.media.port!=="0").map(n=>n.attributes.mid)}mungRecvMediaDsec(n,i,a){const l=or(n);return rS(l),Zu(l,i),iS(l,i),II(l),_f(l,a,this.localCapabilities.send),l}mungSendMediaDesc(n,i){const a=or(n);return _f(a,i,this.localCapabilities.recv),Nc(a),a}updateRecvMedia(n,i){const a=this.sessionDesc.mediaDescriptions.findIndex(l=>l.attributes.mid===n);if(a!==-1){const l=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[a],i);this.sessionDesc.mediaDescriptions[a]=l}}bumpMid(n){this.currentMidIndex+=n}findFirstClosedMedia(n){return this.sessionDesc.mediaDescriptions.find(i=>Zn()?i.media.port==="0"&&i.media.mediaType===n:i.media.port==="0")}findPreloadMediaDesc(n){return this.sessionDesc.mediaDescriptions.find(i=>{var a;return((a=i.attributes)===null||a===void 0||(a=a.ssrcs[0])===null||a===void 0?void 0:a.ssrcId)===n[0].ssrcId})}getSSRC(n){var i;return(i=this.sessionDesc.mediaDescriptions.find(a=>a.attributes.mid===n))===null||i===void 0?void 0:i.attributes.ssrcs}}var wn;function rj(t,n){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),i.push.apply(i,a)}return i}function fS(t){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?rj(Object(i),!0).forEach(function(a){V(t,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):rj(Object(i)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(i,a))})}return t}let Spe=(wn=class Ey extends __{get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get localCodecs(){let n;return this.localCapabilities&&(n=Sf(this.localCapabilities)),[...new Set(n&&n.send.videoCodecs.map(i=>i.rtpMap&&i.rtpMap.encodingName.toLowerCase()||"").filter(i=>{var a;return Ye(a=Object.keys($p)).call(a,i)}))]}constructor(n,i,a){super(n,i),V(this,"store",void 0),V(this,"peerConnection",void 0),V(this,"remoteSDP",void 0),V(this,"initialOffer",void 0),V(this,"transportEventReceiver",void 0),V(this,"statsFilter",void 0),V(this,"useXR",ee("USE_XR")),V(this,"localCapabilities",void 0),V(this,"localCandidateCount",0),V(this,"allCandidatesReceived",!1),V(this,"remoteCodecs",void 0),V(this,"dataStreamChannelMap",new Map),V(this,"establishPromise",void 0),V(this,"mutex",new Oi("NVExtentionsConnection-mutex")),V(this,"rtcMedia",void 0),this.store=i,this.peerConnection=a,this.statsFilter=nS(this.peerConnection,ee("STATS_UPDATE_INTERVAL"),void 0,Zn()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1,this.establishPromise=this.establish()}async establish(n){try{const i=await this.peerConnection.createOffer();if(!i.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const a=xc(i.sdp),l=await OI({filterRTX:!ee("USE_PUB_RTX")&&!ee("USE_SUB_RTX"),filterVideoFec:ee("FILTER_VIDEO_FEC"),filterAudioFec:ee("FILTER_AUDIO_FEC"),filterVideoCodec:ee("FILTER_VIDEO_CODEC")},{useXR:this.useXR});return this.localCapabilities=l,this.initialOffer=i,fS(fS({},a),{},{rtpCapabilities:l,offerSDP:i.sdp})}catch(i){throw new me(K.GET_LOCAL_CONNECTION_PARAMS_FAILED,i.toString())}}async connect(n,i,a,l,u,h){try{if(!this.initialOffer)throw new Error("Cannot establish NVConnection without initial offer.");this.remoteSDP=new _pe({remoteIceParameters:n,remoteDtlsParameters:i,candidates:a,remoteRTPCapabilities:l,remoteSetup:u,localCapabilities:Sf(this.localCapabilities),cname:h});const f=this.remoteSDP.toString(),g=yr.parse(this.initialOffer.sdp),_=g.mediaDescriptions.find(A=>A.media.mediaType==="audio");_&&Nc(_),this.useXR&&oS(g);const y=yr.print(g),T=this.logSDPExchange(y||"","offer","local","connect");await this.peerConnection.setLocalDescription({type:"offer",sdp:y}),T==null||T(f),await this.peerConnection.setRemoteDescription({type:"answer",sdp:f})}catch(f){throw new me(K.EXCHANGE_SDP_FAILED,"NV.connect failed; ".concat(f.toString()))}}async updateRemoteRTPCapabilities(n,i){if(this.remoteCodecs=i,!this.remoteSDP)return void k.debug("[P2PConnection] cannot updateRemoteRTPCapabilities before remote SDP created, local codecs: ".concat(this.localCodecs,", codecs: ").concat(i));if(this.remoteSDP.updateRemoteCodec(n,i,this.store.codec)){const a=await this.peerConnection.createOffer(),l=this.logSDPExchange(a.sdp||"","offer","local","muteLocal");await this.peerConnection.setLocalDescription(a);const u=this.remoteSDP.toString();l==null||l(u),await this.peerConnection.setRemoteDescription({type:"answer",sdp:u})}else k.debug("[P2PConnection] updateRemoteRTPCapabilities no need to exchange SDP.")}async updateRemoteConnect(n){var i,a,l,u;(i=this.remoteSDP)===null||i===void 0||i.updateRemoteRTPCapabilities(n),Array.isArray(this.remoteCodecs)&&this.remoteCodecs.length>0&&((u=this.remoteSDP)===null||u===void 0||u.updateRemoteCodec([],this.remoteCodecs,this.store.codec)),(a=this.remoteSDP)===null||a===void 0||a.preloadRemoteMedia(2);const h=(l=this.remoteSDP)===null||l===void 0?void 0:l.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:h});const f=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(f),k.debug("[NVExtentionsConnection] updateRemoteRTPCapabilities by exchanging SDP.")}send(n,i,a){var l=this;return wa(function*(){const u=yield Xt(l.mutex.lock("From NVExtentionsConnection.send"));try{if(!l.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.send before remote SDP created");const h=[];n.forEach(F=>{const U=l.peerConnection.addTransceiver(F._mediaStreamTrack,{direction:"sendonly"});h.push(U)}),Zn()&&ee("SIMULCAST")===!0&&(yield Xt(l.applySimulcastForFirefox(h,n)));const f=yield Xt(l.peerConnection.createOffer()),g=l.remoteSDP.predictReceivingMids(n.length),_=l.mungSendOfferSDP(f.sdp,n,g),y=yr.parse(_),T=g.map(F=>{const U=y.mediaDescriptions.find(z=>z.attributes.mid===F);if(!U)throw new Error("Cannot extract ssrc from mediaDescription.");return wI(U,ee("USE_PUB_RTX"))});let A;try{A=yield T}catch(F){A=[],l.remoteSDP.receive(n,i,a,A);const U=l.remoteSDP.toString();throw yield Xt(l.peerConnection.setLocalDescription({type:"offer",sdp:_})),yield Xt(l.peerConnection.setRemoteDescription({type:"answer",sdp:U})),yield Xt(l.stopSending(g,!0)),F}l.remoteSDP.receive(n,i,a,A);const D=l.remoteSDP.toString(),W=l.logSDPExchange(_,"offer","local","send");return yield Xt(l.peerConnection.setLocalDescription({type:"offer",sdp:_})),yield Xt(l.applySimulcastEncodings(h,n)),yield Xt(l.applySendEncodings(h,n)),W==null||W(D),yield Xt(l.peerConnection.setRemoteDescription({type:"answer",sdp:D})),h.map((F,U)=>{const z=g[U];return{localSSRC:T[U],id:z,transceiver:F}})}catch(h){throw h instanceof me?h:new me(K.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.send failed; ".concat(h.toString()))}finally{u()}})()}async stopSending(n,i){const a=i?void 0:await this.mutex.lock("From NVExtentionsConnection.stopSending");try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.stopSending before remote SDP created");const l=this.peerConnection.getTransceivers().filter(g=>n.indexOf(g.mid)!==-1);if(l.length!==n.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call NVExtentionsConnection.stopSending.");l.map(g=>{var _;g.direction="inactive",(_=g.stop)===null||_===void 0||_.call(g)});const u=await this.peerConnection.createOffer(),h=this.logSDPExchange(u.sdp||"","offer","local","stopSending");await this.peerConnection.setLocalDescription(u),this.remoteSDP.stopReceiving(n);const f=this.remoteSDP.toString();h==null||h(f),await this.peerConnection.setRemoteDescription({type:"answer",sdp:f})}catch(l){throw new me(K.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.stopSending failed; ".concat(l.toString()))}finally{a&&a()}}async createDataChannels(n,i){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.createDataChannels before remote SDP created");let a=this.dataStreamChannelMap.get(n);return a&&a.readyState==="open"?k.debug("[P2PConnection] Channels are already available and can be reused directly."):(a=this.peerConnection.createDataChannel("datastream-channel",{ordered:!1,maxRetransmits:ee("DATASTREAM_MAX_RETRANSMITS")}),a.binaryType="arraybuffer",this.dataStreamChannelMap.set(n,a)),void i.forEach(l=>{l._updateOriginDataChannel(a)})}catch(a){throw a instanceof me?a:new me(K.DATACHANNEL_FAILED,"NVExtentionsConnection.createDataChannels failed; ".concat(a.toString()))}}async stopDataChannels(n){try{const i=this.dataStreamChannelMap.get(n);return i==null||i.close(),void this.dataStreamChannelMap.delete(n)}catch(i){throw i instanceof me?i:new me(K.DATACHANNEL_FAILED,"NVExtentionsConnection.stopDataChannels failed; ".concat(i.toString()))}}async receive(n,i,a,l){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.receive ".concat(n," before remoteSDP created."));const{mid:u,needExchangeSDP:h}=this.remoteSDP.send(n,i,a,l);if(h){const g=this.remoteSDP.toString(),_=this.logSDPExchange(g,"offer","remote","receive");await this.peerConnection.setRemoteDescription({type:"offer",sdp:g});const y=await this.peerConnection.createAnswer(),T=this.mungReceiveAnswerSDP(y.sdp,u,n);_==null||_(T||""),await this.peerConnection.setLocalDescription({type:"answer",sdp:T}),k.debug("[NVExtentionsConnection] receive ".concat(n," by exchanging SDP."))}else k.debug("[NVExtentionsConnection] receive ".concat(n," no need to exchange SDP."));const f=this.peerConnection.getTransceivers().find(g=>g.mid===u);if(!f)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:f.receiver.track,id:u}}catch(u){throw new me(K.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.receive failed; ".concat(u.toString()))}}async batchReceive(n){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.batchReceive before remoteSDP created.");const{mids:i,needExchangeSDP:a}=this.remoteSDP.batchSend(n);if(a){const l=this.remoteSDP.toString(),u=this.logSDPExchange(l,"offer","remote","receive");await this.peerConnection.setRemoteDescription({type:"offer",sdp:l});const h=await this.peerConnection.createAnswer();u==null||u(h.sdp||""),await this.peerConnection.setLocalDescription(h),k.debug("[NVExtentionsConnection] batchReceive by exchanging SDP.")}else k.debug("[NVExtentionsConnection] batchReceive no need to exchange SDP.");return i.map(l=>{const u=this.peerConnection.getTransceivers().find(h=>h.mid===l);if(!u)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:u.receiver.track,id:l}})}catch(i){throw new me(K.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.receive failed; ".concat(i.toString()))}}async stopReceiving(n){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.stopReceiving before remote SDP created.");this.remoteSDP.stopSending(n);const i=this.remoteSDP.toString(),a=this.logSDPExchange(i,"offer","remote","stopReceiving");await this.peerConnection.setRemoteDescription({type:"offer",sdp:i});const l=await this.peerConnection.createAnswer();a==null||a(l.sdp||""),await this.peerConnection.setLocalDescription(l)}catch(i){throw new me(K.EXCHANGE_SDP_FAILED,"NVExtentionsConnection stopReceiving failed; ".concat(i.toString()))}}async muteRemote(n){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.muteRemote mid=".concat(n," before remote SDP created."));this.remoteSDP.mute(n);const i=this.remoteSDP.toString(),a=this.logSDPExchange(i,"offer","remote","muteRemote");await this.peerConnection.setRemoteDescription({type:"offer",sdp:i});const l=await this.peerConnection.createAnswer();a==null||a(l.sdp||""),await this.peerConnection.setLocalDescription(l)}catch(i){throw new me(K.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.muteRemote failed; ".concat(i.toString()))}}async unmuteRemote(n){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.unmuteRemote mid=".concat(n," before remote SDP created."));this.remoteSDP.unmute(n);const i=this.remoteSDP.toString(),a=this.logSDPExchange(i,"offer","remote","unmuteRemote");await this.peerConnection.setRemoteDescription({type:"offer",sdp:i});const l=await this.peerConnection.createAnswer();a==null||a(l.sdp||""),await this.peerConnection.setLocalDescription(l)}catch(i){throw new me(K.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.unmuteRemote failed; ".concat(i.toString()))}}async muteLocal(n){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.muteLocal before remote SDP created.");const i=this.peerConnection.getTransceivers().filter(h=>h.mid&&n.indexOf(h.mid)!==-1);if(i.length!==n.length)throw new Error("Transceivers' length doesn't match mids' length.");i.map(h=>{h.direction="inactive"});const a=await this.peerConnection.createOffer(),l=this.logSDPExchange(a.sdp||"","offer","local","muteLocal");await this.peerConnection.setLocalDescription(a),this.remoteSDP.muteRemote(n);const u=this.remoteSDP.toString();l==null||l(u),await this.peerConnection.setRemoteDescription({type:"answer",sdp:u})}catch(i){throw new me(K.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.muteLocal failed; ".concat(i.toString()))}}async unmuteLocal(n){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.unmuteLocal before remote SDP created.");const i=this.peerConnection.getTransceivers().filter(h=>h.mid&&n.indexOf(h.mid)!==-1);if(i.length!==n.length)throw new Error("Transceivers' length doesn't match mids' length.");i.map(async(h,f)=>{h.direction="sendonly"});const a=await this.peerConnection.createOffer(),l=this.logSDPExchange(a.sdp||"","offer","local","unmuteLocal");await this.peerConnection.setLocalDescription(a),this.remoteSDP.unmuteRemote(n);const u=this.remoteSDP.toString();l==null||l(u),await this.peerConnection.setRemoteDescription({type:"answer",sdp:u})}catch(i){throw new me(K.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.unmuteLocal failed; ".concat(i.toString()))}}restartICE(n){var i=this;return wa(function*(){const a=yield Xt(i.mutex.lock("From NVExtentionsConnection.restartICE"));try{if(!i.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");if(un().supportPCSetConfiguration){const _=i.peerConnection.getConfiguration(),y=n===vo.RELAY?"relay":"all";_.iceTransportPolicy!==y&&(k.debug("restartICE change iceTransportPolicy from [".concat(_.iceTransportPolicy,"] to [").concat(y,"]")),_.iceTransportPolicy=y,i.peerConnection.setConfiguration(_))}else if(n===vo.RELAY)return;n!==vo.RELAY&&i.remoteSDP.updateCandidates(n);const l=yield Xt(i.peerConnection.createOffer({iceRestart:!0}));if(!l.sdp)throw new Error("Cannot restartICE because restart offer SDP does not exist.");const u=xc(l.sdp),{remoteIceParameters:h}=yield u.iceParameters;i.remoteSDP.restartICE(h);const f=i.remoteSDP.toString(),g=i.logSDPExchange(l.sdp||"","offer","local","restartICE");yield Xt(i.peerConnection.setLocalDescription(l)),g==null||g(f),yield Xt(i.peerConnection.setRemoteDescription({type:"answer",sdp:f}))}catch(l){k.warning("restart ICE failed, abort operation",l)}finally{a()}})()}close(){var n;(n=this.onConnectionStateChange)===null||n===void 0||n.call(this,"closed"),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.transportEventReceiver=void 0,this.statsFilter.destroy(),this.dataStreamChannelMap.clear()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(n){return this.statsFilter.getVideoIsReady(n)}async updateEncoderConfig(n,i){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.updateEncoderConfig before remote SDP created.");const a=await this.peerConnection.createOffer(),l=this.mungSendOfferSDP(a.sdp,[i],[n]);this.remoteSDP.updateRecvMedia(n,i);const u=this.remoteSDP.toString(),h=this.logSDPExchange(l,"offer","local","updateEncoderConfig");await this.peerConnection.setLocalDescription({type:"offer",sdp:l}),h==null||h(u),await this.peerConnection.setRemoteDescription({type:"answer",sdp:u})}catch(a){throw new me(K.EXCHANGE_SDP_FAILED,a.toString())}}async updateSendParameters(n,i){const a=this.peerConnection.getTransceivers().filter(l=>l.mid===n);a.length===1&&(this.isVP8Simulcast(i)?Zn()||await this.applySimulcastEncodings(a,[i]):await this.applySendEncodings(a,[i]))}setStatsRemoteVideoIsReady(n,i){this.statsFilter.setVideoIsReady2(n,i)}async replaceTrack(n,i){const a=this.peerConnection.getTransceivers().find(l=>l.mid===i);a&&await a.sender.replaceTrack(n._mediaStreamTrack)}getP2PConnectionParams(){var n;if((n=this.peerConnection.currentLocalDescription)===null||n===void 0||!n.sdp||!this.localCapabilities)throw new Error;return fS(fS({},xc(this.peerConnection.currentLocalDescription.sdp)),{},{rtpCapabilities:this.localCapabilities})}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var n;(n=this.onICEConnectionStateChange)===null||n===void 0||n.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var n;(n=this.onConnectionStateChange)===null||n===void 0||n.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidate=n=>{n.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,k.debug("[pc-".concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},setTimeout(()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,k.debug("[pc-".concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))},ee("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(n){const i={iceServers:[]};return n.iceServers?i.iceServers=n.iceServers:n.turnServer&&n.turnServer.mode!=="off"&&(Bp(n.turnServer.servers)?i.iceServers=n.turnServer.servers:(i.iceServers&&i.iceServers.push(...Ey.turnServerConfigToIceServers(n.turnServer.servers)),ee("USE_TURN_SERVER_OF_GATEWAY")&&i.iceServers&&n.turnServer.serversFromGateway&&i.iceServers.push(...Ey.turnServerConfigToIceServers(n.turnServer.serversFromGateway)),ee("FORCE_TURN_TCP")?i.iceTransportPolicy="relay":n.turnServer.servers.concat(n.turnServer.serversFromGateway||[]).forEach(a=>{a.forceturn&&(i.iceTransportPolicy="relay")}))),i}static turnServerConfigToIceServers(n){const i=[];return n.forEach(a=>{a.security?a.tcpport&&i.push({username:a.username,credential:a.password,credentialType:"password",urls:"turns:".concat(zu(a.turnServerURL),":").concat(a.tcpport,"?transport=tcp")}):(a.udpport&&!ee("FORCE_TURN_TCP")&&i.push({username:a.username,credential:a.password,credentialType:"password",urls:"turn:".concat(a.turnServerURL,":").concat(a.udpport,"?transport=udp")}),a.tcpport&&i.push({username:a.username,credential:a.password,credentialType:"password",urls:"turn:".concat(a.turnServerURL,":").concat(a.tcpport,"?transport=tcp")}))}),i}async applySendEncodings(n,i){try{if(!un().supportSetRtpSenderParameters||n.length!==i.length)return;for(let T=0;T<n.length;T++){const A=n[T],D=i[T];if(D&&D instanceof nr){var a,l,u;if(this.isVP8Simulcast(D))continue;const W={},F={};switch(D._optimizationMode){case"motion":W.degradationPreference="maintain-framerate";break;case"detail":W.degradationPreference="maintain-resolution";break;default:W.degradationPreference="balanced"}var h,f,g,_;if((a=D._encoderConfig)!==null&&a!==void 0&&a.bitrateMax&&(F.maxBitrate=1e3*((h=D._encoderConfig)===null||h===void 0?void 0:h.bitrateMax)),Ye(l=D._hints).call(l,ar.LOW_STREAM)&&((f=D._encoderConfig)!==null&&f!==void 0&&f.frameRate&&(F.maxFramerate=ia(D._encoderConfig.frameRate)),(g=D._encoderConfig)!==null&&g!==void 0&&g.scaleResolutionDownBy&&((_=D._encoderConfig)===null||_===void 0?void 0:_.scaleResolutionDownBy)>1&&(F.scaleResolutionDownBy=D._encoderConfig.scaleResolutionDownBy)),ee("DSCP_TYPE")&&Uu()){var y;const X=ee("DSCP_TYPE");Ye(y=["very-low","low","medium","high"]).call(y,X)&&(F.networkPriority=X)}const U=A.sender.getParameters(),z=(u=U.encodings)===null||u===void 0?void 0:u[0];Zn()&&!z&&(W.encodings=[F]),z&&Object.assign(z,F),Object.assign(U,W),await A.sender.setParameters(U)}}}catch{k.debug("Apply RTPSendEncodings failed.")}}mungSendOfferSDP(n,i,a){const l=yr.parse(n);return i.forEach((u,h)=>{const f=a[h],g=l.mediaDescriptions.find(_=>_.attributes.mid===f);g&&(Zu(g,u),AI(g,u,this.store.codec))}),yr.print(l)}mungReceiveAnswerSDP(n,i,a){const l=yr.parse(n),u=l.mediaDescriptions.find(h=>h.attributes.mid===i);return u&&a===ut.AUDIO&&u.media.mediaType==="audio"&&Nc(u),this.useXR&&oS(l),yr.print(l)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=n=>{var i;(i=this.onFirstAudioReceived)===null||i===void 0||i.call(this,n)},this.statsFilter.onFirstVideoReceived=n=>{var i;(i=this.onFirstVideoReceived)===null||i===void 0||i.call(this,n)},this.statsFilter.onFirstAudioDecoded=n=>{var i;(i=this.onFirstAudioDecoded)===null||i===void 0||i.call(this,n)},this.statsFilter.onFirstVideoDecoded=(n,i,a)=>{var l;(l=this.onFirstVideoDecoded)===null||l===void 0||l.call(this,n,i,a)},this.statsFilter.onSelectedLocalCandidateChanged=(n,i)=>{var a;(a=this.onSelectedLocalCandidateChanged)===null||a===void 0||a.call(this,n,i)},this.statsFilter.onSelectedRemoteCandidateChanged=(n,i)=>{var a;(a=this.onSelectedRemoteCandidateChanged)===null||a===void 0||a.call(this,n,i)},this.statsFilter.onFirstVideoDecodedTimeout=n=>{var i;(i=this.onFirstVideoDecodedTimeout)===null||i===void 0||i.call(this,n)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0,this.statsFilter.onFirstVideoDecodedTimeout=void 0}async applySimulcastForFirefox(n,i){if(n.length===i.length)for(let g=0;g<n.length;g++){var a,l,u,h,f;const _=n[g],y=i[g];if(y instanceof nr&&!Ye(a=y._hints).call(a,ar.LOW_STREAM)&&(l=y._encoderConfig)!==null&&l!==void 0&&l.bitrateMax&&((u=y._encoderConfig)===null||u===void 0?void 0:u.bitrateMax)>200&&(h=y._scalabilityMode)!==null&&h!==void 0&&h.numSpatialLayers&&((f=y._scalabilityMode)===null||f===void 0?void 0:f.numSpatialLayers)>1&&this.store.codec==="vp8"){const T={},A={high:1e3*(y._encoderConfig.bitrateMax-50),medium:5e4};T.encodings=[{rid:"m",active:!0,maxBitrate:A.medium,scaleResolutionDownBy:4},{rid:"h",active:!0,maxBitrate:A.high}];const D=_.sender.getParameters();await _.sender.setParameters(Object.assign(D,T))}}}async applySimulcastEncodings(n,i){if(!Zn()&&n.length===i.length)for(let a=0;a<n.length;a++){const l=i[a];if(l instanceof nr&&this.isVP8Simulcast(l)){const u=n[a],h={},f={high:1e3*(l._encoderConfig.bitrateMax-50),medium:5e4};h.encodings=[{active:!0,adaptivePtime:!1,networkPriority:"high",priority:"high",maxBitrate:f.high},{active:!0,adaptivePtime:!1,networkPriority:"low",priority:"low",maxBitrate:f.medium,scaleResolutionDownBy:4}];const g=u.sender.getParameters();await u.sender.setParameters(Object.assign(g,h))}}}isVP8Simulcast(n){var i,a,l,u,h;return!!(n instanceof nr&&ee("SIMULCAST")&&this.store.codec==="vp8"&&!Ye(i=n._hints).call(i,ar.LOW_STREAM)&&(a=n._encoderConfig)!==null&&a!==void 0&&a.bitrateMax&&((l=n._encoderConfig)===null||l===void 0?void 0:l.bitrateMax)>200&&(u=n._scalabilityMode)!==null&&u!==void 0&&u.numSpatialLayers&&((h=n._scalabilityMode)===null||h===void 0?void 0:h.numSpatialLayers)>1)}logSDPExchange(n,i,a,l){if(ee("SDP_LOGGING"))return k.upload("exchanging ".concat(a," ").concat(i," SDP during NVExtentionsConnection.").concat(l,`
`),n),i==="offer"?u=>{this.logSDPExchange(u,"answer",a==="local"?"remote":"local",l)}:void 0}async getRemoteSSRC(n){if(!this.remoteSDP)return;const i=this.remoteSDP.getSSRC(n);return i==null?void 0:i[0].ssrcId}setConfiguration(n){if(un().supportPCSetConfiguration){const i=Ey.resolvePCConfiguration(n);this.peerConnection.setConfiguration(i)}}},$e(wn.prototype,"connect",[aa],Object.getOwnPropertyDescriptor(wn.prototype,"connect"),wn.prototype),$e(wn.prototype,"updateRemoteRTPCapabilities",[aa],Object.getOwnPropertyDescriptor(wn.prototype,"updateRemoteRTPCapabilities"),wn.prototype),$e(wn.prototype,"updateRemoteConnect",[aa],Object.getOwnPropertyDescriptor(wn.prototype,"updateRemoteConnect"),wn.prototype),$e(wn.prototype,"createDataChannels",[aa],Object.getOwnPropertyDescriptor(wn.prototype,"createDataChannels"),wn.prototype),$e(wn.prototype,"receive",[aa],Object.getOwnPropertyDescriptor(wn.prototype,"receive"),wn.prototype),$e(wn.prototype,"batchReceive",[aa],Object.getOwnPropertyDescriptor(wn.prototype,"batchReceive"),wn.prototype),$e(wn.prototype,"stopReceiving",[aa],Object.getOwnPropertyDescriptor(wn.prototype,"stopReceiving"),wn.prototype),$e(wn.prototype,"muteRemote",[aa],Object.getOwnPropertyDescriptor(wn.prototype,"muteRemote"),wn.prototype),$e(wn.prototype,"unmuteRemote",[aa],Object.getOwnPropertyDescriptor(wn.prototype,"unmuteRemote"),wn.prototype),$e(wn.prototype,"muteLocal",[aa],Object.getOwnPropertyDescriptor(wn.prototype,"muteLocal"),wn.prototype),$e(wn.prototype,"unmuteLocal",[aa],Object.getOwnPropertyDescriptor(wn.prototype,"unmuteLocal"),wn.prototype),$e(wn.prototype,"close",[aa],Object.getOwnPropertyDescriptor(wn.prototype,"close"),wn.prototype),$e(wn.prototype,"updateEncoderConfig",[aa],Object.getOwnPropertyDescriptor(wn.prototype,"updateEncoderConfig"),wn.prototype),$e(wn.prototype,"updateSendParameters",[aa],Object.getOwnPropertyDescriptor(wn.prototype,"updateSendParameters"),wn.prototype),$e(wn.prototype,"replaceTrack",[aa],Object.getOwnPropertyDescriptor(wn.prototype,"replaceTrack"),wn.prototype),$e(wn.prototype,"getRemoteSSRC",[aa],Object.getOwnPropertyDescriptor(wn.prototype,"getRemoteSSRC"),wn.prototype),wn);function aa(t,n,i){const a=t[n];if(typeof a!="function")throw new Error("Cannot use mutex on object property.");return i.value=async function(){const l=this.mutex,u=await l.lock("From NVExtentionsConnection.".concat(n));try{for(var h=arguments.length,f=new Array(h),g=0;g<h;g++)f[g]=arguments[g];return await a.apply(this,f)}finally{u()}},i}var Hn;function ij(t){var n,i,a,l=2;for(typeof Symbol<"u"&&(i=j6,a=Symbol.iterator);l--;){if(i&&(n=t[i])!=null)return n.call(t);if(a&&(n=t[a])!=null)return new mS(n.call(t));i="@@asyncIterator",a="@@iterator"}throw new TypeError("Object is not async iterable")}function mS(t){function n(i){if(Object(i)!==i)return We.reject(new TypeError(i+" is not an object."));var a=i.done;return We.resolve(i.value).then(function(l){return{value:l,done:a}})}return mS=function(i){this.s=i,this.n=i.next},mS.prototype={s:null,n:null,next:function(){return n(this.n.apply(this.s,arguments))},return:function(i){var a=this.s.return;return a===void 0?We.resolve({value:i,done:!0}):n(a.apply(this.s,arguments))},throw:function(i){var a=this.s.return;return a===void 0?We.reject(i):n(a.apply(this.s,arguments))}},new mS(t)}let od=(Hn=class _y extends __{get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get localCodecs(){return this._p2pConnection.localCodecs}constructor(n,i){super(n,i),V(this,"store",void 0),V(this,"peerConnection",void 0),V(this,"cname",void 0),V(this,"mutex",new Oi("DataChannelConnection-mutex")),V(this,"dataChannel",void 0),V(this,"_p2pConnection",void 0),V(this,"establishPromise",void 0),V(this,"_nvMedia",void 0),this.store=i,this.store.dcId=this.store.dcId+1,this.peerConnection=new RTCPeerConnection(_y.resolvePCConfiguration(n),{optional:[{googDscp:!0}]}),this.dataChannel=this.peerConnection.createDataChannel("agora-signal",{ordered:!1,maxPacketLifeTime:50}),this.dataChannel.binaryType="arraybuffer",this._p2pConnection=new Spe(n,i,this.peerConnection),this.bindPCEvents(),this.establishPromise=this._p2pConnection.establishPromise}async establish(){var n;const i=(n=this._nvMedia)===null||n===void 0?void 0:n.getLocalRtpCapabilities();return await this._p2pConnection.establish(i)}getP2PConnectionParams(){return this._p2pConnection.getP2PConnectionParams()}async connect(n,i,a,l,u,h){return this.cname=h,await this._p2pConnection.connect(n,i,a,l,u,h),await new We((f,g)=>{const _=setTimeout(()=>{this.closeSignal(),g(new me(K.DATACHANNEL_CONNECTION_TIMEOUT,"Datachannel connection timed out, candidates: ".concat(JSON.stringify(a))))},2e3);this.dataChannel.onopen=()=>{if(this.dataChannel.readyState==="open")return clearTimeout(_),void f()},this.dataChannel.onerror=y=>{this.closeSignal(),g(y)}}),{transmitter:this.dataChannel,close:this.closeSignal.bind(this)}}async updateRemoteRTPCapabilities(n,i){return this._p2pConnection.updateRemoteRTPCapabilities(n,i)}send(n,i,a){var l=this;return wa(function*(){const u=yield Xt(l.mutex.lock("From DataChannelConnection.send"));try{return yield*cS(ij(l._p2pConnection.send(n,i,a)))}finally{u()}})()}async stopSending(n,i){return this._p2pConnection.stopSending(n,i)}async createDataChannels(n,i){return this._p2pConnection.createDataChannels(n,i)}async stopDataChannels(n){return this._p2pConnection.stopDataChannels(n)}async receive(n,i,a,l){return this._nvMedia?(k.debug("[DataChannelConnection] receive ".concat(n," by DataChannel.")),await this._nvMedia.reveiveByRTCMedia(n,i,this.cname)):(k.debug("[DataChannelConnection] receive ".concat(n," by WebRTC.")),await this._p2pConnection.receive(n,i,a,l))}async batchReceive(n){return[...await this._p2pConnection.batchReceive(n)]}async stopReceiving(n){return await this._p2pConnection.stopReceiving(n)}async muteRemote(n){return await this._p2pConnection.muteRemote(n)}async unmuteRemote(n){return await this._p2pConnection.unmuteRemote(n)}async muteLocal(n){return await this._p2pConnection.muteLocal(n)}async unmuteLocal(n){return await this._p2pConnection.unmuteLocal(n)}restartICE(n){var i=this;return wa(function*(){return yield*cS(ij(i._p2pConnection.restartICE(n)))})()}close(){var n;(n=this._nvMedia)===null||n===void 0||n.close(),this._p2pConnection.close(),this.unbindConnectionEvents(this._p2pConnection)}getStats(){return this._p2pConnection.getStats()}getRemoteVideoIsReady(n){return this._p2pConnection.getRemoteVideoIsReady(n)}updateRemoteConnect(n){var i;(i=this._nvMedia)===null||i===void 0||i.setRemoteRtpCapabilities(n),this._p2pConnection.updateRemoteConnect(n)}async updateEncoderConfig(n,i){return await this._p2pConnection.updateEncoderConfig(n,i)}async updateSendParameters(n,i){return await this._p2pConnection.updateSendParameters(n,i)}setStatsRemoteVideoIsReady(n,i){this._p2pConnection.setStatsRemoteVideoIsReady(n,i)}async replaceTrack(n,i){return await this._p2pConnection.replaceTrack(n,i)}async getRemoteSSRC(n){return this._p2pConnection.getRemoteSSRC(n)}logSDPExchange(n,i,a,l){if(ee("SDP_LOGGING"))return k.upload("exchanging ".concat(a," ").concat(i," SDP during DataChannelConnection.").concat(l,`
`),n),i==="offer"?u=>{this.logSDPExchange(u,"answer",a==="local"?"remote":"local",l)}:void 0}static resolvePCConfiguration(n){const i={iceServers:[]};return n.iceServers?i.iceServers=n.iceServers:n.turnServer&&n.turnServer.mode!=="off"&&(Bp(n.turnServer.servers)?i.iceServers=n.turnServer.servers:(i.iceServers&&i.iceServers.push(..._y.turnServerConfigToIceServers(n.turnServer.servers)),ee("USE_TURN_SERVER_OF_GATEWAY")&&i.iceServers&&n.turnServer.serversFromGateway&&i.iceServers.push(..._y.turnServerConfigToIceServers(n.turnServer.serversFromGateway)),ee("FORCE_TURN_TCP")?i.iceTransportPolicy="relay":n.turnServer.servers.concat(n.turnServer.serversFromGateway||[]).forEach(a=>{a.forceturn&&(i.iceTransportPolicy="relay")}))),i}static turnServerConfigToIceServers(n){const i=[];return n.forEach(a=>{a.security?a.tcpport&&i.push({username:a.username,credential:a.password,credentialType:"password",urls:"turns:".concat(zu(a.turnServerURL),":").concat(a.tcpport,"?transport=tcp")}):(a.udpport&&!ee("FORCE_TURN_TCP")&&i.push({username:a.username,credential:a.password,credentialType:"password",urls:"turn:".concat(a.turnServerURL,":").concat(a.udpport,"?transport=udp")}),a.tcpport&&i.push({username:a.username,credential:a.password,credentialType:"password",urls:"turn:".concat(a.turnServerURL,":").concat(a.tcpport,"?transport=tcp")}))}),i}bindPCEvents(){this._p2pConnection.onICEConnectionStateChange=n=>{var i;return(i=this.onICEConnectionStateChange)===null||i===void 0?void 0:i.call(this,n)},this._p2pConnection.onConnectionStateChange=n=>{var i;return(i=this.onConnectionStateChange)===null||i===void 0?void 0:i.call(this,n)},this._p2pConnection.onDTLSTransportStateChange=n=>{var i;return(i=this.onDTLSTransportStateChange)===null||i===void 0?void 0:i.call(this,n)},this._p2pConnection.onDTLSTransportError=n=>{var i;return(i=this.onDTLSTransportError)===null||i===void 0?void 0:i.call(this,n)},this._p2pConnection.onICETransportStateChange=n=>{var i;return(i=this.onICETransportStateChange)===null||i===void 0?void 0:i.call(this,n)},this._p2pConnection.onFirstAudioReceived=n=>{var i;return(i=this.onFirstAudioReceived)===null||i===void 0?void 0:i.call(this,n)},this._p2pConnection.onFirstVideoReceived=n=>{var i;return(i=this.onFirstVideoReceived)===null||i===void 0?void 0:i.call(this,n)},this._p2pConnection.onFirstAudioDecoded=n=>{var i;return(i=this.onFirstAudioDecoded)===null||i===void 0?void 0:i.call(this,n)},this._p2pConnection.onFirstVideoDecoded=(n,i,a)=>{var l;return(l=this.onFirstVideoDecoded)===null||l===void 0?void 0:l.call(this,n,i,a)},this._p2pConnection.onFirstVideoDecodedTimeout=n=>{var i;return(i=this.onFirstVideoDecodedTimeout)===null||i===void 0?void 0:i.call(this,n)},this._p2pConnection.onSelectedLocalCandidateChanged=(n,i)=>{var a;return(a=this.onSelectedLocalCandidateChanged)===null||a===void 0?void 0:a.call(this,n,i)},this._p2pConnection.onSelectedRemoteCandidateChanged=(n,i)=>{var a;return(a=this.onSelectedRemoteCandidateChanged)===null||a===void 0?void 0:a.call(this,n,i)}}closeSignal(){this.dataChannel.close(),this.peerConnection.close()}unbindConnectionEvents(n){n.onConnectionStateChange=void 0,n.onICEConnectionStateChange=void 0,n.onICETransportStateChange=void 0,n.onDTLSTransportStateChange=void 0,n.onDTLSTransportError=void 0,n.onFirstAudioDecoded=void 0,n.onFirstAudioReceived=void 0,n.onFirstVideoDecoded=void 0,n.onFirstVideoReceived=void 0,n.onSelectedLocalCandidateChanged=void 0,n.onSelectedRemoteCandidateChanged=void 0,n.onFirstVideoDecodedTimeout=void 0}setConfiguration(n){this._p2pConnection.setConfiguration(n)}},$e(Hn.prototype,"connect",[Qa],Object.getOwnPropertyDescriptor(Hn.prototype,"connect"),Hn.prototype),$e(Hn.prototype,"updateRemoteRTPCapabilities",[Qa],Object.getOwnPropertyDescriptor(Hn.prototype,"updateRemoteRTPCapabilities"),Hn.prototype),$e(Hn.prototype,"createDataChannels",[Qa],Object.getOwnPropertyDescriptor(Hn.prototype,"createDataChannels"),Hn.prototype),$e(Hn.prototype,"receive",[Qa],Object.getOwnPropertyDescriptor(Hn.prototype,"receive"),Hn.prototype),$e(Hn.prototype,"stopReceiving",[Qa],Object.getOwnPropertyDescriptor(Hn.prototype,"stopReceiving"),Hn.prototype),$e(Hn.prototype,"muteRemote",[Qa],Object.getOwnPropertyDescriptor(Hn.prototype,"muteRemote"),Hn.prototype),$e(Hn.prototype,"unmuteRemote",[Qa],Object.getOwnPropertyDescriptor(Hn.prototype,"unmuteRemote"),Hn.prototype),$e(Hn.prototype,"muteLocal",[Qa],Object.getOwnPropertyDescriptor(Hn.prototype,"muteLocal"),Hn.prototype),$e(Hn.prototype,"unmuteLocal",[Qa],Object.getOwnPropertyDescriptor(Hn.prototype,"unmuteLocal"),Hn.prototype),$e(Hn.prototype,"close",[Qa],Object.getOwnPropertyDescriptor(Hn.prototype,"close"),Hn.prototype),$e(Hn.prototype,"updateEncoderConfig",[Qa],Object.getOwnPropertyDescriptor(Hn.prototype,"updateEncoderConfig"),Hn.prototype),$e(Hn.prototype,"updateSendParameters",[Qa],Object.getOwnPropertyDescriptor(Hn.prototype,"updateSendParameters"),Hn.prototype),$e(Hn.prototype,"replaceTrack",[Qa],Object.getOwnPropertyDescriptor(Hn.prototype,"replaceTrack"),Hn.prototype),$e(Hn.prototype,"getRemoteSSRC",[Qa],Object.getOwnPropertyDescriptor(Hn.prototype,"getRemoteSSRC"),Hn.prototype),Hn);function Qa(t,n,i){const a=t[n];if(typeof a!="function")throw new Error("Cannot use mutex on object property.");return i.value=async function(){const l=this.mutex,u=await l.lock("From DataChannelConnection.".concat(n));try{for(var h=arguments.length,f=new Array(h),g=0;g<h;g++)f[g]=arguments[g];return await a.apply(this,f)}finally{u()}},i}var Jt;function oj(t,n){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),i.push.apply(i,a)}return i}function yl(t){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?oj(Object(i),!0).forEach(function(a){V(t,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):oj(Object(i)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(i,a))})}return t}function aj(t){var n,i,a,l=2;for(typeof Symbol<"u"&&(i=j6,a=Symbol.iterator);l--;){if(i&&(n=t[i])!=null)return n.call(t);if(a&&(n=t[a])!=null)return new gS(n.call(t));i="@@asyncIterator",a="@@iterator"}throw new TypeError("Object is not async iterable")}function gS(t){function n(i){if(Object(i)!==i)return We.reject(new TypeError(i+" is not an object."));var a=i.done;return We.resolve(i.value).then(function(l){return{value:l,done:a}})}return gS=function(i){this.s=i,this.n=i.next},gS.prototype={s:null,n:null,next:function(){return n(this.n.apply(this.s,arguments))},return:function(i){var a=this.s.return;return a===void 0?We.resolve({value:i,done:!0}):n(a.apply(this.s,arguments))},throw:function(i){var a=this.s.return;return a===void 0?We.reject(i):n(a.apply(this.s,arguments))}},new gS(t)}let vS=(Jt=class extends _r{get state(){return this._state}set state(t){const n=this._state;this._state=t,this.emit(At.StateChange,n,this._state)}constructor(t,n){super(),V(this,"store",void 0),V(this,"statsUploader",void 0),V(this,"connection",void 0),V(this,"localTrackMap",new Map),V(this,"remoteUserMap",new Map),V(this,"localDataChannels",[]),V(this,"remoteDataChannelMap",new Map),V(this,"pendingLocalTracks",[]),V(this,"pendingRemoteTracks",[]),V(this,"pendingLocalDataChannels",[]),V(this,"pendingRemoteDataChannels",[]),V(this,"statsCollector",void 0),V(this,"isPlanB",!1),V(this,"shouldForwardP2PCreation",void 0),V(this,"iceFailedCount",0),V(this,"dtlsFailedCount",0),V(this,"mutex",new Oi("P2PChannel-mutex")),V(this,"_state",$n.Disconnected),V(this,"_pcStatsUploadType",ee("NEW_ICE_RESTART")?zl.FIRST_CONNECTION:zl.OLD_FIRST_CONNECTION),V(this,"_isInRestartIce",!1),V(this,"_isStartRestartIce",!1),V(this,"_restartStates",["disconnected","failed"]),V(this,"_restartTimer",void 0),V(this,"_isFirstConnected",!0),V(this,"handleMuteLocalTrack",async(i,a,l)=>{const u=await this.mutex.lock("Locking from P2PChannel.handleMuteLocalTrack");try{if(!this.connection||this.state!==$n.Connected)return void l(new Ce(K.INVALID_OPERATION,"Cannot call P2PChannel.handleMuteLocalTrack before connection established."));const h=this.filterTobeMutedTracks(i);if(h.length===0)return void a();const f=h.find(_=>_[0]==="videoLowTrack");f&&f[1].track._originMediaStreamTrack.stop(),await this.connection.muteLocal(h.map(_=>{let[,{id:y}]=_;return y}));const g=this.createMuteMessage(h);await er(this,At.RequestMuteLocal,g),a()}catch(h){l(h)}finally{u()}}),V(this,"handleUnmuteLocalTrack",async(i,a,l)=>{const u=await this.mutex.lock("Locking from P2PChannel.handleUnmuteLocalTrack");try{if(!this.connection||this.state!==$n.Connected)return void l(new Ce(K.INVALID_OPERATION,"Cannot call P2PChannel.handleUnmuteLocalTrack before connection established."));const h=this.filterTobeUnmutedTracks(i);if(h.length===0)return void a();const f=h.find(_=>_[0]==="videoLowTrack");if(f){const _=f[1];if(_.track._originMediaStreamTrack.stop(),!ee("DISABLE_DUAL_STREAM_USE_ENCODING")&&un().supportDualStreamEncoding){const y=i._mediaStreamTrack.clone();_.track._mediaStreamTrack=y,_.track._originMediaStreamTrack=y}else{const y=NI(i,Zd(this,At.RequestLowStreamParameter));_.track._mediaStreamTrack=y,_.track._originMediaStreamTrack=y}await new We((y,T)=>{this.handleReplaceTrack(_.track,y,T,!0)})}await this.connection.unmuteLocal(h.map(_=>{let[,{id:y}]=_;return y}));const g=this.createUnmuteMessage(h);await er(this,At.RequestUnmuteLocal,g),a()}catch(h){l(h)}finally{u()}}),V(this,"handleUpdateVideoEncoder",async(i,a,l)=>{const u=await this.mutex.lock("Locking from P2PChannel.handleSetVideoEncoder");try{const h=this.localTrackMap.get(Le.LocalVideoTrack);if(!this.connection||!h||h.track!==i||this.state!==$n.Connected)return void a();const{id:f,track:g}=h;await this.connection.updateSendParameters(f,g),await this.connection.updateEncoderConfig(f,g),this.emit(At.UpdateVideoEncoder,g),a()}catch(h){l(h)}finally{u()}}),V(this,"handleUpdateVideoSendParameters",async(i,a,l)=>{const u=await this.mutex.lock("Locking from P2PChannel.handleUpdateVideoSendParameters");try{const h=this.localTrackMap.get(Le.LocalVideoTrack);if(!this.connection||!h||h.track!==i||this.state!==$n.Connected)return void a();const{id:f,track:g}=h;await this.connection.updateSendParameters(f,g),a()}catch(h){l(h)}finally{u()}}),V(this,"handleReplaceMixingTrack",async(i,a,l,u)=>{if(!this.connection||this.state!==$n.Connected)return void a();const h=PI([i]);let f;k.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection will replace audioTrack [").concat(h.getTrackId(),"]")),typeof u=="boolean"&&u||(f=await this.mutex.lock("From P2PChannel.handleReplaceMixingTrack"));try{await this.replaceTrack(i,h),a()}catch(_){l(_)}finally{var g;(g=f)===null||g===void 0||g()}}),V(this,"handleReplaceTrack",async(i,a,l,u)=>{let h;k.debug("[".concat(this.store.clientId,"] P2PChannel handleReplaceTrack for [track-id-").concat(i.getTrackId(),"]")),typeof u=="boolean"&&u||(h=await this.mutex.lock("From P2PChannel.handleReplaceTrack"));try{var f;const _=Array.from(this.localTrackMap.entries()).find(y=>{let[,{track:T}]=y;return i===T});if(!this.connection||!_||this.state!==$n.Connected)return void a();if(await((f=this.connection)===null||f===void 0?void 0:f.replaceTrack(i,_[1].id)),this.isPlanB){const y=_[1];y.id=i._mediaStreamTrack.id,this.localTrackMap.set(_[0],y)}if(_[0]===Le.LocalVideoTrack&&!ee("DISABLE_DUAL_STREAM_USE_ENCODING")&&un().supportDualStreamEncoding){const y=this.localTrackMap.get(Le.LocalVideoLowTrack);if(y){const T=i._mediaStreamTrack.clone();y.track._originMediaStreamTrack.stop(),y.track._mediaStreamTrack=T,y.track._originMediaStreamTrack=T,await new We((A,D)=>{this.handleReplaceTrack(y.track,A,D,!0)})}}a()}catch(_){l(_)}finally{var g;(g=h)===null||g===void 0||g()}}),V(this,"handleGetRTCStats",i=>{i(this.statsCollector.getRTCStats())}),V(this,"handleGetLocalVideoStats",i=>{i(this.statsCollector.getLocalVideoTrackStats())}),V(this,"handleGetLocalAudioStats",i=>{i(this.statsCollector.getLocalAudioTrackStats())}),V(this,"handleGetRemoteVideoStats",i=>this.statsCollector.getRemoteVideoTrackStats(i.uid)[i.uid]),V(this,"handleGetRemoteAudioStats",i=>this.statsCollector.getRemoteAudioTrackStats(i.uid)[i.uid]),this.store=t,this.statsCollector=n,this.statsCollector.addP2PChannel(this),this.statsUploader=new b6(this.store),this.bindStatsUploaderEvents(),this.isPlanB=!un().supportUnifiedPlan||ee("CHROME_FORCE_PLAN_B")&&Uu(),this.shouldForwardP2PCreation=ee("FORWARD_P2P_CREATION")&&un().supportPCSetConfiguration&&Mw(),this.shouldForwardP2PCreation&&(this.connection=this.store.useDataChannel?new od({},this.store):this.isPlanB?new yf({},this.store):new Lc({},this.store),this.bindConnectionEvents(this.connection))}async startP2PConnection(t,n){var i;this.state=$n.New;const a=this.shouldForwardP2PCreation&&((i=this.connection)===null||i===void 0?void 0:i.peerConnectionState)==="closed";if(this.shouldForwardP2PCreation&&!a||(a&&this.connection&&(k.warning("[".concat(this.store.clientId,"] P2PChannel.startP2PConnection ForwardP2P closed.")),this.connection.close(),this.unbindConnectionEvents(this.connection)),this.connection=this.store.useDataChannel?new od(t,this.store):this.isPlanB?new yf(t,this.store):new Lc(t,this.store),this.bindConnectionEvents(this.connection)),!this.connection)throw new Ce(K.UNEXPECTED_ERROR,"Cannot P2PChannel.startConnection before P2PConnection initialization .");return this._pcStatsUploadType=ee("NEW_ICE_RESTART")?zl.FIRST_CONNECTION:zl.OLD_FIRST_CONNECTION,this._isFirstConnected=!0,this._isInRestartIce=!1,this._isStartRestartIce=!1,this.connection.setConfiguration(t),this.connection.establishPromise}async connect(t,n,i,a,l,u){if(!this.connection)throw new Ce(K.UNEXPECTED_ERROR,"Cannot P2PChannel.connect before P2PChannel.startP2PConnection .");this.connection instanceof od?this.connection.updateRemoteConnect(a):(this.store.peerConnectionStart(),await this.connection.connect(t,n,i,a,l,u),this.statsUploader.startUploadTransportStats(),this.statsUploader.startUploadExtensionUsageStats(),this.state=$n.Connected)}updateRemoteRTPCapabilities(t){const n=Array.from(this.localTrackMap.entries()).filter(l=>{var u;let[h]=l;return Ye(u=[Le.LocalVideoLowTrack,Le.LocalVideoTrack]).call(u,h)}),i=n.map(l=>{let[,{id:u}]=l;return u}),a=n.map(l=>{let[u]=l;return u});if(this.connection instanceof Lc){if(ht.updateRemoteRTPCapabilities(this.store.sessionId,{trackTypes:JSON.stringify(a),localCodecs:JSON.stringify(this.connection.localCodecs),remoteCodecs:JSON.stringify(t)}),!Ye(t).call(t,this.store.codec)){const l=["vp9","vp8","h264"].find(u=>Ye(t).call(t,u));l&&(this.store.codec=l,k.debug("[".concat(this.store.clientId,"] [").concat(this.store.p2pId," updateRemoteRTPCapabilities] default codec is not available, hence the fallback to ").concat(l,".")))}this.connection.updateRemoteRTPCapabilities(i,t)}}async preConnect(t,n,i,a,l,u){if(!this.connection)throw new Ce(K.UNEXPECTED_ERROR,"Cannot P2PChannel.connect before P2PChannel.startP2PConnection .");this.store.peerConnectionStart();const h=await this.connection.connect(t,n,i,a,l,u);return this.statsUploader.startUploadTransportStats(),this.statsUploader.startUploadExtensionUsageStats(),this.state=$n.Connected,h}getEstablishParams(){if(this.connection instanceof od)return this.connection.getP2PConnectionParams();throw new Error("Only DataChannelConnection needs to obtain establishParams")}async publishDataChannel(t){if(!this.connection||this.state!==$n.Connected){if(this.state===$n.Disconnected)throw new Ce(K.UNEXPECTED_ERROR,"PeerConnection already disconnected.");return void t.forEach(i=>{var a;Ye(a=this.pendingLocalDataChannels).call(a,i)||this.pendingLocalDataChannels.push(i)})}const n=this.filterTobePublishedDataChannels(t);n.length!==0&&(n.forEach(i=>{const a=Date.now();this.store.publish(i.id.toString(),"datachannel",a)}),await this.connection.createDataChannels(this.store.uid,n),n.forEach(i=>{this.localDataChannels.push(i);const a=Date.now();this.store.publish(i.id+"","datachannel",void 0,a)}))}publish(t,n,i){var a=this;return wa(function*(){const l=yield Xt(a.mutex.lock("From P2PChannel.publish"));try{if(!a.connection||a.state!==$n.Connected){if(a.state===$n.Disconnected)throw new Ce(K.UNEXPECTED_ERROR,"PeerConnection already disconnected.");a.throwIfTrackTypeNotMatch(t);const h=t.filter(f=>a.pendingLocalTracks.indexOf(f)===-1);return void(a.pendingLocalTracks=a.pendingLocalTracks.concat(h))}a.store.pubId=a.store.pubId+1,Zi.markPublishStart(a.store.clientId,a.store.pubId);const u=a.filterTobePublishedTracks(t,n,i);if(u.length===0)return void(yield Xt(a.tryToUnmuteAudio(t)));yield*cS(aj(a.doPublish(a.connection,u)))}finally{l()}})()}doPublish(t,n){var i=this;return wa(function*(){n.forEach(T=>{let{track:A,type:D}=T;const W=Date.now();i.store.publish(A.getTrackId(),D===Le.LocalAudioTrack?"audio":"video",W)}),i.bindLocalTrackEvents(n);const a=n.map(T=>{let{track:A}=T;return A}),l=yield Xt(t.send(n.map(T=>{let{track:A}=T;return A}),i.store.codec,i.store.audioCodec)),u=(yield Xt(l.next())).value,h=i.createGatewayPublishMessage(n,u);let f;try{f=yield h}catch(T){throw l.throw(T),(T==null?void 0:T.code)===K.WS_ABORT&&n.forEach(A=>{let{track:D}=A;i.pendingLocalTracks.indexOf(D)===-1&&i.pendingLocalTracks.push(D)}),i.unbindLocalTrackEvents(n),T}const g=i.mapPubResToRemoteConfig(h,f),_=(yield Xt(l.next(g))).value,y=ee("ENABLE_VIDEO_SEI");a.forEach(async T=>{const A=T.getRTCRtpTransceiver();A&&y&&(T.trackMediaType===ut.VIDEO?await Ghe(A.sender,T):T.trackMediaType===ut.AUDIO&&await async function(D){if(!un().supportWebRTCEncodedTransform)return void k.warning("browser not support audio encoded transform");if(Z_.has(D)||!D.track)return;const W={track:D.track};if(Fu()){if(!D.createEncodedStreams)return void k.warning("browser not support createEncodedStreams() API");let U=null;try{U=D.createEncodedStreams()}catch(X){return void k.error("create audio-encoded-streams error",X&&X.message)}const z=new TransformStream({transform(X,ue){W.controller||(W.controller=ue),D.track&&D.track.id!==W.track.id&&(k.debug("audio track changed: ".concat(W.track.id," => ").concat(D.track.id)),W.track.removeEventListener("ended",F),W.track=D.track,W.track.addEventListener("ended",F)),ue.enqueue(X)}});U.readable.pipeThrough(z).pipeTo(U.writable)}else if(Si()){if(typeof RTCRtpScriptTransform>"u")return void k.warning("browser not support RTCRtpScriptTransform");const U=Q_(),z=new MessageChannel;await new We(ue=>U.onmessage=pe=>{pe.data==="registered"&&ue(void 0)});const X=new RTCRtpScriptTransform(U,{name:"tx",port:z.port2},[z.port2]);D.transform=X,await new We(ue=>U.onmessage=pe=>{pe.data==="started"&&ue(void 0)}),z.port1.onmessage=ue=>{var pe;ue.data.transformed&&D.track&&((pe=D.track)===null||pe===void 0?void 0:pe.id)!==W.track.id&&(k.debug("audio track changed: ".concat(W.track.id," => ").concat(D.track.id)),W.track.removeEventListener("ended",F),W.track=D.track,W.track.addEventListener("ended",F))},W.worker=U}function F(){if(D.track){if(this.id!==D.track.id)return;D.track.removeEventListener("ended",F)}const U=Z_.get(D);if(U){Z_.delete(D);try{var z,X;(z=U.controller)===null||z===void 0||z.terminate(),(X=U.worker)===null||X===void 0||X.terminate()}catch(ue){k.warning(ue&&ue.message)}}}Z_.set(D,W),D.track.addEventListener("ended",F)}(A.sender))}),n.forEach(T=>{let{type:A}=T;i.statsCollector.addLocalStats(A)}),i.assignLocalTracks(n,_),i.statsUploader.startUploadOutboundStats(),n.forEach(T=>{let{track:A,type:D}=T;const W=Date.now();i.store.publish(A.getTrackId(),D===Le.LocalAudioTrack?"audio":"video",void 0,W)})})()}async updateVideoStreamParameter(t,n){const i=this.localTrackMap.get(n);if(!i)return;if(!(i.track instanceof nr))return k.warn("[updateVideoStreamParameter]: track is not an instance of LocalVideoTrack");if(!(this.connection instanceof Lc||this.connection instanceof yf))return k.warn("[updateVideoStreamParameter]: connection is not P2PConnection or P2PConnectionPlanB");const{track:a}=i,l=function(u,h){const f={};return u.height&&u.width&&(f.scaleResolutionDownBy=s1(u,h)),f.maxFramerate=u.framerate?ia(u.framerate):void 0,f.maxBitrate=u.bitrate?1e3*u.bitrate:void 0,f}(t,a);if(a._encoderConfig||(a._encoderConfig={}),n!==Le.LocalVideoLowTrack||!ee("DISABLE_DUAL_STREAM_USE_ENCODING")&&un().supportDualStreamEncoding)l.scaleResolutionDownBy!=null&&(a._encoderConfig.scaleResolutionDownBy=l.scaleResolutionDownBy);else{const u=a._originMediaStreamTrack;if(!u.canvas)return k.warn("[".concat(a.getTrackId(),"] no canvas on track"));(function(h,f){const g=h.canvas;f.width&&(g.width=ia(f.width)),f.height&&(g.height=ia(f.height)),f.framerate&&(g.stopCapture&&g.stopCapture(),g.stopCapture=hI(()=>{!g.startCapture&&g.stopCapture&&g.stopCapture(),g.startCapture&&g.startCapture()},ia(f.framerate)))})(u,t)}l.maxBitrate!=null&&(a._encoderConfig.bitrateMax=l.maxBitrate/1e3),l.maxFramerate!=null&&(a._encoderConfig.frameRate&&typeof a._encoderConfig.frameRate=="object"?a._encoderConfig.frameRate.max=l.maxFramerate:a._encoderConfig.frameRate={max:l.maxFramerate}),k.debug("[".concat(a.getTrackId(),"] LowStreamEncoderConfig: , ").concat(JSON.stringify(a._encoderConfig))),await this.connection.updateRtpSenderEncodings(a)}publishLowStream(t){var n=this;return wa(function*(){if(!n.connection||n.state!==$n.Connected)return;const i=yield Xt(n.mutex.lock("Locking from P2PChannel.publishLowStream"));try{const l=n.localTrackMap.get(Le.LocalVideoTrack);if(!l)throw new Ce(K.UNEXPECTED_ERROR,"Could not find high stream");if(n.localTrackMap.has(Le.LocalVideoLowTrack))throw new Ce(K.UNEXPECTED_ERROR,"[".concat(n.store.clientId,"] Can't publish low stream when stream already publish"));const u=[{track:n.getLowVideoTrack(l.track,t),type:Le.LocalVideoLowTrack}];if(yield*cS(aj(n.doPublish(n.connection,u))),l.track.muted||!l.track.enabled){var a;const h=(a=n.localTrackMap.get(Le.LocalVideoLowTrack))===null||a===void 0?void 0:a.id;h!==void 0&&(yield Xt(n.connection.muteLocal([h])))}}finally{i()}})()}async republish(){this.pendingLocalTracks.length>0&&(k.debug("[".concat(this.store.clientId,"] Emit P2PChannelEvents.RequestRePublish to republish tracks.")),await ri(this,At.RequestRePublish,this.pendingLocalTracks),this.emit(At.MediaReconnectEnd,this.store.uid),this.pendingLocalTracks=[]),this.pendingLocalDataChannels.length>0&&(k.debug("Emit P2PChannelEvents.RequestRePublishDataChannel to republish datachannels."),await ri(this,At.RequestRePublishDataChannel,this.pendingLocalDataChannels),this.pendingLocalDataChannels=[])}async reSubscribe(t){for(let n=this.pendingRemoteTracks.length-1;n>=0;n--){const{user:i,kind:a}=this.pendingRemoteTracks[n];(a!==ut.AUDIO||i._audio_added_&&i._audioSSRC)&&(a!==ut.VIDEO||i._video_added_&&i._videoSSRC)||this.pendingRemoteTracks.splice(n,1)}if(t)await ri(this,At.RequestReSubscribe,this.pendingRemoteTracks);else for(const{user:n,kind:i}of this.pendingRemoteTracks)await this.subscribe(n,i,i===ut.VIDEO?n._videoSSRC:n._audioSSRC);this.pendingRemoteTracks.forEach(n=>{let{user:i}=n;this.emit(At.MediaReconnectEnd,i.uid)}),this.pendingRemoteTracks=[]}async unpublish(t){if(!this.connection||this.state!==$n.Connected)return void t.forEach(a=>{const l=this.pendingLocalTracks.indexOf(a);l!==-1&&this.pendingLocalTracks.splice(l,1)});const n=this.filterTobeUnpublishedTracks(t);if(n.length===0)return;const i=n.find(a=>a[0]==="videoLowTrack");return i&&i[1].track.close(),this.doUnpublish(this.connection,n)}async unpublishDataChannel(t){if(!this.connection||this.state!==$n.Connected)return void t.forEach(i=>{const a=this.pendingLocalDataChannels.indexOf(i);a!==-1&&this.pendingLocalDataChannels.splice(a,1)});const n=this.filterTobeUnpublishedDataChannels(t);return n.length!==0?(n.forEach(i=>{const a=this.localDataChannels.indexOf(i);a!==-1&&this.localDataChannels.splice(a,1)}),this.localDataChannels.length===0&&await this.connection.stopDataChannels(this.store.uid),n.map(i=>i.id)):void 0}async unpublishLowStream(){if(!this.connection||this.state!==$n.Connected)return;const t=this.localTrackMap.get(Le.LocalVideoLowTrack);if(!t)return;t.track.close();const n=[[Le.LocalVideoLowTrack,t]];return this.doUnpublish(this.connection,n)}async doUnpublish(t,n){const i=this.createGatewayUnpublishMessage(n);return await t.stopSending(n.map(a=>{let[,{id:l}]=a;return l})),this.withdrawLocalTracks(n),this.unbindLocalTrackEvents(n.map(a=>{let[l,{track:u}]=a;return{type:l,track:u}})),n.forEach(a=>{let[l]=a;this.statsCollector.removeLocalStats(l)}),this.localTrackMap.size===0&&this.statsUploader.stopUploadOutboundStats(),i}async subscribeDataChannel(t,n){if(!this.connection||this.state!==$n.Connected)throw new Ce(K.INVALID_OPERATION,"Cannot subscribe remote user when peerConnection disconnected.");const i=n.filter(a=>{var l;return!((l=this.remoteDataChannelMap.get(t))!==null&&l!==void 0&&l.get(a.id))});if(i.length!==0)return await this.connection.createDataChannels(t.uid,i),i.forEach(a=>{var l;this.remoteDataChannelMap.has(t)?(l=this.remoteDataChannelMap.get(t))===null||l===void 0||l.set(a.id,a):this.remoteDataChannelMap.set(t,new Map([[a.id,a]]));const u=this.pendingRemoteDataChannels.findIndex(h=>{let{user:f,id:g}=h;return f.uid===t.uid&&g===a.id});u!==-1&&this.pendingRemoteDataChannels.splice(u,1)}),i.map(a=>a.id)}async subscribe(t,n,i,a,l){var u;if(!this.connection||this.state!==$n.Connected)throw new Ce(K.INVALID_OPERATION,"Cannot subscribe remote user when peerConnection disconnected.");if((u=this.remoteUserMap.get(t))!==null&&u!==void 0&&u.has(n))return;let h,f,g;if(l){const T=l.find(D=>{let{stream_type:W}=D;return W===n});if(!T)throw new Ce(K.UNEXPECTED_ERROR,"Cannot subscribe to remote ".concat(n," for user: ").concat(t.uid," because subscribe answer from gateway does not contain stream_type: ").concat(n,"."));const A=await this.connection.receive(n,T.ssrcs,String(t._uintid),T.attributes);this.connection instanceof Lc&&(g=A.transceiver),h=A.track,f=A.id}else{const T=await this.connection.receive(n,[{ssrcId:i,rtx:a}],String(t._uintid),void 0);this.connection instanceof Lc&&(g=T.transceiver),h=T.track,f=T.id}n===ut.AUDIO?(t._audioTrack?t._audioTrack._updateOriginMediaStreamTrack(h):(t._audioTrack=new Ef(h,t.uid,t._uintid,this.store),k.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote audio track: ").concat(t._audioTrack.getTrackId()))),g&&t._audioTrack._updateRtpTransceiver(g),this.bindRemoteTrackEvents(t,t._audioTrack)):(t._videoTrack?t._videoTrack._updateOriginMediaStreamTrack(h):(t._videoTrack=new vf(h,t.uid,t._uintid,this.store),k.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote video track: ").concat(t._videoTrack.getTrackId()))),g&&t._videoTrack._updateRtpTransceiver(g),this.bindRemoteTrackEvents(t,t._videoTrack)),ee("ENABLE_VIDEO_SEI")&&g&&(n==ut.VIDEO?await Khe(g.receiver,{onSei:T=>{var A;(A=t._videoTrack)===null||A===void 0||A._onSei(T)}}):n==ut.AUDIO&&await async function(T){if(!un().supportWebRTCEncodedTransform)return void k.warning("browser not support audio encoded transform");if(eS.has(T))return;const A={track:T.track};if(Fu()){if(!T.createEncodedStreams)return void k.warning("browser not support createEncodedStreams() API");let W=null;try{W=T.createEncodedStreams()}catch(U){return void k.error("create audio-encoded-streams error",U&&U.message)}const F=new TransformStream({transform(U,z){A.controller||(A.controller=z),T.track&&T.track.id!==A.track.id&&(k.debug("audio track changed: ".concat(A.track.id," => ").concat(T.track.id)),A.track.removeEventListener("ended",D),A.track=T.track,A.track.addEventListener("ended",D)),z.enqueue(U)}});W.readable.pipeThrough(F).pipeTo(W.writable)}else if(Si()){if(typeof RTCRtpScriptTransform>"u")return void k.warning("browser not support RTCRtpScriptTransform");const W=Q_(),F=new MessageChannel;await new We(z=>W.onmessage=X=>{X.data==="registered"&&z(void 0)});const U=new RTCRtpScriptTransform(W,{name:"rx",port:F.port2},[F.port2]);T.transform=U,await new We(z=>W.onmessage=X=>{X.data==="started"&&z(void 0)}),F.port1.onmessage=z=>{var X;z.data.transformed&&T.track&&((X=T.track)===null||X===void 0?void 0:X.id)!==A.track.id&&(k.debug("audio track changed: ".concat(A.track.id," => ").concat(T.track.id)),A.track.removeEventListener("ended",D),A.track=T.track,A.track.addEventListener("ended",D))},A.worker=W}function D(){T.track.removeEventListener("ended",D),function(W){const F=eS.get(W);if(F){eS.delete(W);try{var U,z;(U=F.controller)===null||U===void 0||U.terminate(),(z=F.worker)===null||z===void 0||z.terminate()}catch(X){k.warning(X&&X.message)}}}(T)}eS.set(T,A),T.track.addEventListener("ended",D)}(g.receiver));const _=this.remoteUserMap.get(t);_?_.set(n,f):this.remoteUserMap.set(t,new Map([[n,f]])),this.statsCollector.addRemoteStats(t.uid),this.statsUploader.startUploadInboundStats();const y=this.pendingRemoteTracks.findIndex(T=>{let{user:A,kind:D}=T;return A.uid===t.uid&&n===D});y!==-1&&(this.pendingRemoteTracks.splice(y,1),this.emit(At.MediaReconnectEnd,t.uid))}async massSubscribe(t){return this.massSubscribeNoLock(t)}async massSubscribeNoLock(t){if(!this.connection||this.state!==$n.Connected)throw new Ce(K.INVALID_OPERATION,"Cannot subscribeAll remote users when peerConnection disconnected.");t=t.filter(i=>{var a;let{user:l,mediaType:u}=i;return!((a=this.remoteUserMap.get(l))!==null&&a!==void 0&&a.has(u))});const n=await this.connection.batchReceive(t.map(i=>{let{user:a,mediaType:l,ssrcId:u,rtxSsrcId:h}=i;return{kind:l,ssrcMsg:[{ssrcId:u,rtx:h}],mslabel:String(a._uintid)}}));t.forEach((i,a)=>{let{user:l,mediaType:u}=i;const{track:h,id:f,transceiver:g}=n[a];u===ut.AUDIO?(l._audioTrack?l._audioTrack._updateOriginMediaStreamTrack(h):(l._audioTrack=new Ef(h,l.uid,l._uintid,this.store),k.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote audio track: ").concat(l._audioTrack.getTrackId()))),g&&l._audioTrack._updateRtpTransceiver(g),this.bindRemoteTrackEvents(l,l._audioTrack)):(l._videoTrack?l._videoTrack._updateOriginMediaStreamTrack(h):(l._videoTrack=new vf(h,l.uid,l._uintid,this.store),k.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote video track: ").concat(l._videoTrack.getTrackId()))),g&&l._videoTrack._updateRtpTransceiver(g),this.bindRemoteTrackEvents(l,l._videoTrack));const _=this.remoteUserMap.get(l);_?_.set(u,f):this.remoteUserMap.set(l,new Map([[u,f]])),this.statsCollector.addRemoteStats(l.uid),this.statsUploader.startUploadInboundStats();const y=this.pendingRemoteTracks.findIndex(T=>{let{user:A,kind:D}=T;return A.uid===l.uid&&u===D});y!==-1&&(this.pendingRemoteTracks.splice(y,1),this.emit(At.MediaReconnectEnd,l.uid))})}async unsubscribe(t,n,i){const a=this.pendingRemoteTracks.filter(h=>{let{user:f,kind:g}=h;return n!==void 0?f.uid===t.uid&&n===g:f.uid===t.uid});if(a.forEach(h=>{const f=this.pendingRemoteTracks.indexOf(h);this.pendingRemoteTracks.splice(f,1)}),this.connection&&this.state===$n.Connected||i||a.forEach(h=>{let{kind:f}=h;var g;if(f===ut.AUDIO)(g=t._audioTrack)===null||g===void 0||g._destroy(),t._audioTrack=void 0;else if(f===ut.VIDEO){var _;(_=t._videoTrack)===null||_===void 0||_._destroy(),t._videoTrack=void 0}}),!this.connection||this.state!==$n.Connected)return;const l=this.filterTobeUnSubscribedTracks(t,n);if(l.length===0)return;await this.connection.stopReceiving(l.map(h=>{let[,{id:f}]=h;return f}));const u=this.createUnsubscribeMessage(l);return this.withdrawRemoteTracks(l),this.remoteUserMap.size===0&&this.statsUploader.stopUploadInboundStats(),l.forEach(h=>{let[f,{kind:g}]=h;var _,y;if(g===ut.VIDEO&&f._videoSSRC&&((_=this.connection)===null||_===void 0||_.setStatsRemoteVideoIsReady(f._videoSSRC,!1)),g===ut.VIDEO)this.unbindRemoteTrackEvents(f._videoTrack),i||((y=f._videoTrack)===null||y===void 0||y._destroy(),f._videoTrack=void 0);else if(g===ut.AUDIO){var T;this.unbindRemoteTrackEvents(f._audioTrack),!i&&((T=f._audioTrack)===null||T===void 0||T._destroy(),f._audioTrack=void 0)}}),u}async unsubscribeDataChannel(t,n){if(n.forEach(l=>{const u=this.pendingRemoteDataChannels.findIndex(h=>h.id===l.id);u!==-1&&this.pendingRemoteDataChannels.splice(u,1)}),!this.connection)return;const i=this.filterTobeUnSubscribedDataChannels(t,n);if(i.length===0)return;n.forEach(l=>{l._close()});const a=this.remoteDataChannelMap.get(t);return i.forEach(l=>{a&&a.delete(l.id)}),a&&a.size===0&&(this.remoteDataChannelMap.delete(t),await this.connection.stopDataChannels(t.uid)),i.map(l=>l.id)}async massUnsubscribe(t){return this.massUnsubscribeNoLock(t)}async massUnsubscribeNoLock(t){let n=[];for(const{user:l,mediaType:u}of t){const h=this.pendingRemoteTracks.filter(f=>{let{user:g,kind:_}=f;return u!==void 0?g.uid===l.uid&&u===_:g.uid===l.uid});h.forEach(f=>{const g=this.pendingRemoteTracks.indexOf(f);this.pendingRemoteTracks.splice(g,1)}),n=n.concat(h)}if(!this.connection||this.state!==$n.Connected)return void n.forEach(l=>{let{user:u,kind:h}=l;var f;if(h===ut.AUDIO)(f=u._audioTrack)===null||f===void 0||f._destroy(),u._audioTrack=void 0;else if(h===ut.VIDEO){var g;(g=u._videoTrack)===null||g===void 0||g._destroy(),u._videoTrack=void 0}});const i=Sc(t).call(t,(l,u)=>{let{user:h,mediaType:f}=u;const g=this.filterTobeUnSubscribedTracks(h,f);return l.concat(g)},[]);if(i.length===0)return;await this.connection.stopReceiving(i.map(l=>{let[,{id:u}]=l;return u}));const a=this.createUnsubscribeAllMessage(i);return this.withdrawRemoteTracks(i),this.remoteUserMap.size===0&&this.statsUploader.stopUploadInboundStats(),i.forEach(l=>{let[u,{kind:h}]=l;var f,g;if(h===ut.VIDEO&&u._videoSSRC&&((f=this.connection)===null||f===void 0||f.setStatsRemoteVideoIsReady(u._videoSSRC,!1)),h===ut.VIDEO)this.unbindRemoteTrackEvents(u._videoTrack),(g=u._videoTrack)===null||g===void 0||g._destroy(),u._videoTrack=void 0;else if(h===ut.AUDIO){var _;this.unbindRemoteTrackEvents(u._audioTrack),(_=u._audioTrack)===null||_===void 0||_._destroy(),u._audioTrack=void 0}}),a}async muteRemote(t,n){if(!this.connection)return;const i=this.remoteUserMap.get(t);if(!i)return void k.warning("[".concat(this.store.clientId,"] P2PChannel.muteRemote has no remote user ").concat(t.uid,"."));if(!i.get(n))return void k.warning("[".concat(this.store.clientId,"] P2PChannel.muteRemote has no remote user ").concat(t.uid," media type ").concat(n,"."));const a=n===ut.VIDEO?t._videoSSRC:t._audioSSRC;a!==void 0&&this.connection.setStatsRemoteVideoIsReady(a,!1)}async unmuteRemote(t,n){return this.unmuteRemoteNoLock(t,n)}async unmuteRemoteNoLock(t,n){if(!this.connection)return;const i=this.remoteUserMap.get(t);if(!i)return void k.warning("[".concat(this.store.clientId,"] P2PChannel.unmuteRemote has no remote user ").concat(t.uid,"."));i.get(n)||k.warning("[".concat(this.store.clientId,"] P2PChannel.unmuteRemote has no remote user ").concat(t.uid," media type ").concat(n,"."))}getAllTracks(t){const n=this.localTrackMap.get(Le.LocalAudioTrack);if((n==null?void 0:n.track)instanceof hi){const i=n.track;return Array.from(this.localTrackMap.entries()).filter(a=>{let[l]=a;return l!==Le.LocalAudioTrack}).filter(a=>{let[l]=a;return!(t&&l===Le.LocalVideoLowTrack)}).map(a=>{let[,{track:l}]=a;return l}).concat(i.trackList)}return Array.from(this.localTrackMap.entries()).filter(i=>{let[a]=i;return!(t&&a===Le.LocalVideoLowTrack)}).map(i=>{let[,{track:a}]=i;return a})}getAllDataChannels(){return this.localDataChannels}reportPublishEvent(t,n,i,a,l){if(t){const h=this.localTrackMap.get(Le.LocalAudioTrack),f=a?this.localTrackMap.get(Le.LocalVideoLowTrack):this.localTrackMap.get(Le.LocalVideoTrack);ht.publish(this.store.sessionId,{eventElapse:Zi.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:t,ec:n,audioName:h==null?void 0:h.track.getTrackLabel(),videoName:f==null?void 0:f.track.getTrackLabel(),screenshare:(f==null?void 0:f.track._hints.indexOf(ar.SCREEN_TRACK))!==-1,audio:!!h,video:!!f,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:l})}else{var u;i||(i=[]);const h=i.find(g=>g instanceof Lr),f=a?(u=this.localTrackMap.get(Le.LocalVideoTrack))===null||u===void 0?void 0:u.track:i.find(g=>g instanceof nr);ht.publish(this.store.sessionId,{eventElapse:Zi.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:t,ec:n,audioName:h==null?void 0:h.getTrackLabel(),videoName:f==null?void 0:f.getTrackLabel(),screenshare:(f==null?void 0:f._hints.indexOf(ar.SCREEN_TRACK))!==-1,audio:!!h,video:!!f,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:l})}}reportSubscribeEvent(t,n,i,a){const l=a===ut.VIDEO?i._videoSSRC:i._audioSSRC;l&&ht.subscribe(this.store.sessionId,{succ:t,ec:n,video:a===ut.VIDEO,audio:a===ut.AUDIO,peerid:i.uid,subscribeRequestid:a===ut.VIDEO?i._videoSSRC:i._audioSSRC,p2pid:this.store.p2pId,eventElapse:Zi.measureFromSubscribeStart(this.store.clientId,l)})}reset(){k.debug("[".concat(this.store.clientId,"] P2PChannel.reset")),this.mutex=new Oi("P2PChannel-mutex"),this.connection&&(this.connection.close(),this.unbindConnectionEvents(this.connection),this.connection=void 0),this.shouldForwardP2PCreation&&(this.connection=this.store.useDataChannel?new od({},this.store):this.isPlanB?new yf({},this.store):new Lc({},this.store),this.bindConnectionEvents(this.connection)),this.statsUploader.stopUploadOutboundStats(),this.statsUploader.stopUploadInboundStats(),this.statsUploader.stopUploadTransportStats(),this.statsUploader.stopUploadExtensionUsageStats(),this.unbindLocalTrackEvents(),this.unbindAllRemoteTrackEvents(),this.unbindRtpTransceiver();const t=this.localTrackMap.get(Le.LocalAudioTrack);if((t==null?void 0:t.track)instanceof hi){if(t.track.trackList.length>0){const n=t.track;t.track.trackList.forEach(i=>{n.removeAudioTrack(i)})}t.track.close()}this.localTrackMap.clear(),this.remoteUserMap.clear(),this.statsCollector.removeRemoteStats(),this.statsCollector.removeLocalStats(),this.iceFailedCount=0,this.dtlsFailedCount=0,this.pendingLocalTracks=[],this.pendingRemoteTracks=[],this.localDataChannels=[],this.remoteDataChannelMap.clear(),this.pendingLocalDataChannels=[],this.pendingRemoteDataChannels=[],this.state=$n.Disconnected}getStats(){var t;return(t=this.connection)===null||t===void 0?void 0:t.getStats()}getRemoteVideoIsReady(t){var n;return((n=this.connection)===null||n===void 0?void 0:n.getRemoteVideoIsReady(t))||!1}getLocalAudioVolume(){const t=this.localTrackMap.get(Le.LocalAudioTrack);if(t)return t.track.getVolumeLevel()}getLocalVideoSize(){const t=this.localTrackMap.get(Le.LocalVideoTrack);if(t)return{width:t.track.videoWidth||0,height:t.track.videoHeight||0}}getEncoderConfig(t){const n=this.localTrackMap.get(t);return n&&n.track instanceof nr||n&&n.track instanceof Lr?n.track._encoderConfig:void 0}getLocalMedia(t){return this.localTrackMap.get(t)}hasLocalMedia(){return this.localTrackMap.size>0}hasRemoteMedia(t,n){if(!t)return this.remoteUserMap.size>0;const i=this.remoteUserMap.get(t);return!!i&&(!n||i.has(n))}async hasRemoteMediaWithLock(t,n){if(!t)return this.remoteUserMap.size>0;const i=this.remoteUserMap.get(t);return!!i&&(!n||i.has(n))}getRemoteMedia(t){var n;const i=Array.from(Va(n=this.remoteUserMap).call(n)).find(a=>a.uid===t);return i?{audioTrack:i.audioTrack,audioSSRC:i._audioSSRC,videoTrack:i.videoTrack,videoSSRC:i._videoSSRC}:{}}getAudioLevels(){let t=Array.from(this.remoteUserMap.entries()).map(i=>{let[a]=i;return{uid:a.uid,level:a.audioTrack?100*a.audioTrack._source.getAccurateVolumeLevel():0}});const n=this.localTrackMap.get(Le.LocalAudioTrack);return n&&t.push({level:100*n.track._source.getAccurateVolumeLevel(),uid:this.store.uid}),t=t0(t).call(t,(i,a)=>i.level-a.level),t}async disconnectForReconnect(){this.connection&&(k.debug("[".concat(this.store.clientId,"] P2PChannel.disconnectForReconnect closing P2PConnection")),this.state=$n.Reconnecting,ee("KEEP_LAST_FRAME")&&this.remoteUserMap.size!==0&&Array.from(this.remoteUserMap.entries()).forEach(t=>{let[n]=t;var i;n._videoTrack&&n._videoTrack._player&&((i=n._videoTrack._player.getVideoElement())===null||i===void 0||i.pause(),n._videoTrack._player.isKeepLastFrame=!0,n._videoTrack._originMediaStreamTrack.stop())}),this.connection.close(),this.unbindConnectionEvents(this.connection),this.connection=void 0,this.shouldForwardP2PCreation&&(this.connection=this.store.useDataChannel?new od({},this.store):this.isPlanB?new yf({},this.store):new Lc({},this.store),this.bindConnectionEvents(this.connection)),this.localTrackMap.size!==0&&(Array.from(this.localTrackMap.entries()).forEach(t=>{var n;let[i,{track:a}]=t;switch(i){case Le.LocalVideoTrack:Ye(n=a._hints).call(n,ar.LOW_STREAM)?a.close():this.pendingLocalTracks.push(a);break;case Le.LocalAudioTrack:a instanceof hi?this.pendingLocalTracks=this.pendingLocalTracks.concat(a.trackList):this.pendingLocalTracks.push(a);case Le.LocalVideoLowTrack:}}),this.emit(At.MediaReconnectStart,this.store.uid)),this.unbindLocalTrackEvents(),this.localTrackMap.clear(),this.remoteUserMap.size!==0&&Array.from(this.remoteUserMap.entries()).forEach(t=>{let[n,i]=t;Array.from(Va(i).call(i)).forEach(a=>{this.setPendingRemoteMedia(n,a)}),this.emit(At.MediaReconnectStart,n.uid)}),this.unbindAllRemoteTrackEvents(),this.remoteUserMap.clear(),this.localDataChannels.length!==0&&(this.localDataChannels.forEach(t=>{this.pendingLocalDataChannels.push(t)}),this.localDataChannels.length=0),this.remoteDataChannelMap.size!==0&&(Array.from(this.remoteDataChannelMap.entries()).forEach(t=>{let[n,i]=t;Array.from(Va(i).call(i)).forEach(a=>{this.setPendingRemoteDataChannel(n,a)})}),this.remoteDataChannelMap.clear()),this.statsUploader.stopUploadOutboundStats(),this.statsUploader.stopUploadInboundStats(),this.statsUploader.stopUploadTransportStats(),k.debug("[".concat(this.store.clientId,"] P2PChannel disconnected, waiting to reconnect.")))}hasPendingRemoteDataChannel(t,n){for(const i of this.pendingRemoteDataChannels){const{user:a,id:l}=i;if((t instanceof nd?t.uid:t)===a.uid&&l===n)return!0}return!1}setPendingRemoteDataChannel(t,n){this.hasPendingRemoteDataChannel(t,n)||this.pendingRemoteDataChannels.push({user:t,id:n})}hasPendingRemoteMedia(t,n){for(const i of this.pendingRemoteTracks){const{user:a,kind:l}=i;if((t instanceof nd?t.uid:t)===a.uid&&n===l)return!0}return!1}setPendingRemoteMedia(t,n){this.hasPendingRemoteMedia(t,n)||this.pendingRemoteTracks.push({user:t,kind:n})}restartICE(t){var n=this;return wa(function*(){if(!n.connection||n.state!==$n.Connected||n.connection instanceof od)return;const i=yield Xt(n.mutex.lock("From P2PChannel.restartICE"));let a;try{a=yield Xt(n.connection.restartICE(t));const u=yield Xt(a.next());if(u.done)return;const h=u.value,f=yield h;switch(n.reportPCDisconnectedOrFailed(t),t){case vo.TCP:n._pcStatsUploadType=zl.TCP_RESTART;break;case vo.RELAY:n._pcStatsUploadType=zl.RELAY_RESTART;break;default:n._pcStatsUploadType=zl.OLD_RESTART}n._isInRestartIce=!0,a.next(f)}catch(u){var l;(l=a)===null||l===void 0||l.throw(u)}finally{i()}})()}getUplinkNetworkQuality(){if(!this.connection)return 0;const t=this.connection.getStats(),n=this.localTrackMap.get(Le.LocalVideoTrack),i=this.localTrackMap.get(Le.LocalAudioTrack),a=t.videoSend.find(D=>D.ssrc===(n==null?void 0:n.ssrcs[0].ssrcId)),l=t.audioSend.find(D=>D.ssrc===(i==null?void 0:i.ssrcs[0].ssrcId));if(!a||!l)return 1;const u=Ta(this,At.NeedSignalRTT),h=a?a.rttMs:void 0,f=l?l.rttMs:void 0,g=h&&f?(h+f)/2:h||f,_=(g&&u?(g+u)/2:g||u)||0,y=100*t.sendPacketLossRate*.7/50+.3*_/1500,T=y<.17?1:y<.36?2:y<.59?3:y<.1?4:5,A=n==null?void 0:n.track;if(A&&A._encoderConfig&&A._hints.indexOf(ar.SCREEN_TRACK)===-1){const D=A._encoderConfig.bitrateMax,W=t.bitrate.actualEncoded;if(D&&W){const F=(1e3*D-W)/(1e3*D);return $4[F<.15?0:F<.3?1:F<.45?2:F<.6?3:4][T]}}return T}getDownlinkNetworkQuality(){if(!this.connection)return 0;const t=this.connection.getStats();let n=0;return Array.from(this.remoteUserMap.entries()).forEach(i=>{let[a]=i;const l=a._audioSSRC,u=a._videoSSRC,h=t.audioRecv.find(W=>W.ssrc===l),f=t.videoRecv.find(W=>W.ssrc===u);if(!h&&!f)return void(n+=1);const g=Ta(this,At.NeedSignalRTT),_=t.rtt,y=(_&&g?(_+g)/2:_||g)||0,T=h?h.jitterMs:void 0,A=t.recvPacketLossRate;let D=.7*A*100/50+.3*y/1500;T&&(D=.6*A*100/50+.2*y/1500+.2*T/400),n+=D<.1?1:D<.17?2:D<.36?3:D<.59?4:5}),this.remoteUserMap.size>0?Math.round(n/this.remoteUserMap.size):n}async muteLocalTrack(t){return new We((n,i)=>{this.handleMuteLocalTrack(t,n,i)})}async replaceTrack(t,n){var i;if(k.debug("[".concat(this.store.clientId,"] P2PChannel replaceTrack from [").concat(t.getTrackId(),"] to [").concat(n.getTrackId(),"]")),!this.connection||this.state!==$n.Connected)return;const a=Array.from(this.localTrackMap.entries()).find(u=>{let[,{track:h}]=u;return t===h});if(!a)return;const l=a[0];if(t!==n&&(this.unbindLocalTrackEvents([{track:t,type:l}]),this.bindLocalTrackEvents([{track:n,type:l}]),a[1].track=n),await((i=this.connection)===null||i===void 0?void 0:i.replaceTrack(n,a[1].id)),this.isPlanB){const u=a[1];u.id=n._mediaStreamTrack.id,this.localTrackMap.set(l,u)}if(l===Le.LocalVideoTrack&&!ee("DISABLE_DUAL_STREAM_USE_ENCODING")&&un().supportDualStreamEncoding){const u=this.localTrackMap.get(Le.LocalVideoLowTrack);if(u){const h=t._mediaStreamTrack.clone();u.track._originMediaStreamTrack.stop(),u.track._mediaStreamTrack=h,u.track._originMediaStreamTrack=h,await new We((f,g)=>{this.handleReplaceTrack(u.track,f,g,!0)})}}}filterTobePublishedTracks(t,n,i){const a=[],l=this.getAllTracks();t=Vp(t=t.filter(g=>l.indexOf(g)===-1));let u,h=!1;const f=this.localTrackMap.get(Le.LocalAudioTrack);for(const g of t){if(g instanceof nr&&(this.localTrackMap.has(Le.LocalVideoTrack)||h?new Ce(K.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS).throw():(a.push({track:g,type:Le.LocalVideoTrack}),h=!0),n)){const _=this.getLowVideoTrack(g,i);a.push({track:_,type:Le.LocalVideoLowTrack})}if(g instanceof Lr)if(f){const _=f.track;if(_ instanceof hi)DI([g]),_.addAudioTrack(g),this.bindLocalAudioTrackEvents(g,!0);else{const y=PI([_,g]);k.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection will replace audioTrack [").concat(y.getTrackId(),"]")),this.replaceTrack(_,y)}}else u instanceof hi?(DI([g]),u.addAudioTrack(g)):u||!g._useAudioElement&&un().webAudioMediaStreamDest&&!g._bypassWebAudio?u=PI(u?[g,u]:[g]):u=g}return u&&(k.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection will send audioTrack [").concat(u.getTrackId(),"]")),a.push({track:u,type:Le.LocalAudioTrack})),a}filterTobeUnpublishedTracks(t){const n=[],i=this.getAllTracks();t=Vp(t=t.filter(a=>i.indexOf(a)!==-1));for(const a of t){if(a instanceof Lr){const l=this.localTrackMap.get(Le.LocalAudioTrack);if(!l)continue;l.track instanceof hi?(l.track.removeAudioTrack(a),this.unbindLocalAudioTrackEvents(a),l.track.trackList.length===0&&(n.push([Le.LocalAudioTrack,l]),l.track.close())):n.push([Le.LocalAudioTrack,l])}if(a instanceof nr){const l=this.localTrackMap.get(Le.LocalVideoTrack);if(!l)continue;n.push([Le.LocalVideoTrack,l]);const u=this.localTrackMap.get(Le.LocalVideoLowTrack);u&&n.push([Le.LocalVideoLowTrack,u])}}return n}filterTobePublishedDataChannels(t){return t=(t=Vp(t)).filter(n=>this.localDataChannels.findIndex(i=>i.id===n.id)===-1)}filterTobeUnpublishedDataChannels(t){return t=(t=(t=Vp(t)).filter(n=>this.localDataChannels.indexOf(n)!==-1)).filter(n=>n._originDataChannel)}bindLocalTrackEvents(t){t.forEach(n=>{let{track:i,type:a}=n;switch(a){case Le.LocalVideoTrack:i.addListener(et.GET_STATS,this.handleGetLocalVideoStats),i.addListener(et.GET_RTC_STATS,this.handleGetRTCStats),i.addListener(et.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),i.addListener(et.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),i.addListener(et.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),i.addListener(et.NEED_UPDATE_VIDEO_SEND_PARAMETERS,this.handleUpdateVideoSendParameters),i.addListener(et.NEED_REPLACE_TRACK,this.handleReplaceTrack),i.addListener(et.NEED_MUTE_TRACK,this.handleMuteLocalTrack),i.addListener(et.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case Le.LocalAudioTrack:this.bindLocalAudioTrackEvents(i);case Le.LocalVideoLowTrack:}})}bindLocalAudioTrackEvents(t,n){t instanceof hi?t.trackList.forEach(i=>{i.addListener(et.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),i.addListener(et.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),i.addListener(et.GET_STATS,this.handleGetLocalAudioStats),i.addListener(et.NEED_MUTE_TRACK,this.handleMuteLocalTrack),i.addListener(et.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)}):(t.addListener(et.GET_STATS,this.handleGetLocalAudioStats),t.addListener(et.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),t.addListener(et.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),t.addListener(et.NEED_MUTE_TRACK,this.handleMuteLocalTrack),t.addListener(et.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack),n||(t.addListener(et.NEED_REPLACE_TRACK,this.handleReplaceTrack),t.addListener(et.NEED_REPLACE_MIXING_TRACK,this.handleReplaceMixingTrack)))}unbindLocalTrackEvents(t){t||(t=Array.from(this.localTrackMap.entries()).map(n=>{let[i,{track:a}]=n;return{track:a,type:i}})),t.forEach(n=>{let{track:i,type:a}=n;switch(a){case Le.LocalVideoTrack:i.off(et.GET_STATS,this.handleGetLocalVideoStats),i.off(et.GET_RTC_STATS,this.handleGetRTCStats),i.off(et.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),i.off(et.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),i.off(et.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),i.off(et.NEED_UPDATE_VIDEO_SEND_PARAMETERS,this.handleUpdateVideoSendParameters),i.off(et.NEED_REPLACE_TRACK,this.handleReplaceTrack),i.off(et.NEED_MUTE_TRACK,this.handleMuteLocalTrack),i.off(et.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case Le.LocalAudioTrack:this.unbindLocalAudioTrackEvents(i);case Le.LocalVideoLowTrack:}})}unbindLocalAudioTrackEvents(t){t instanceof hi?t.trackList.forEach(n=>{n.off(et.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),n.off(et.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),n.off(et.GET_STATS,this.handleGetLocalAudioStats),n.off(et.NEED_MUTE_TRACK,this.handleMuteLocalTrack),n.off(et.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)}):(t.off(et.GET_STATS,this.handleGetLocalAudioStats),t.off(et.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),t.off(et.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),t.off(et.NEED_REPLACE_TRACK,this.handleReplaceTrack),t.off(et.NEED_REPLACE_MIXING_TRACK,this.handleReplaceMixingTrack),t.off(et.NEED_MUTE_TRACK,this.handleMuteLocalTrack),t.off(et.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack))}bindRemoteTrackEvents(t,n){n instanceof vf&&n.addListener(et.GET_STATS,i=>{i(this.handleGetRemoteVideoStats(t))}),n instanceof Ef&&n.addListener(et.GET_STATS,i=>{i(this.handleGetRemoteAudioStats(t))})}unbindRemoteTrackEvents(t){t&&t.removeAllListeners(et.GET_STATS)}unbindAllRemoteTrackEvents(){Array.from(this.remoteUserMap.entries()).forEach(t=>{let[n,i]=t;i.has(ut.AUDIO)&&this.unbindRemoteTrackEvents(n._audioTrack),i.has(ut.VIDEO)&&this.unbindRemoteTrackEvents(n._videoTrack)})}createGatewayPublishMessage(t,n){return t.map((i,a)=>{var l;let u,h,{track:f,type:g}=i;switch(g){case Le.LocalAudioTrack:u=Vn.Audio,h={dtx:f instanceof J_&&f._config.DTX,hq:!1,lq:!1,stereo:!1,speech:!1};break;case Le.LocalVideoTrack:u=Ye(l=f._hints).call(l,ar.SCREEN_TRACK)?Vn.Screen:Vn.High,h=yl(yl({},sB(f)),{},{codec:this.store.codec});break;case Le.LocalVideoLowTrack:u=Vn.Low,h=yl(yl({},sB(f)),{},{codec:this.store.codec})}return{stream_type:u,attributes:h,ssrcs:n[a]}})}createGatewayUnpublishMessage(t){return t.map(n=>{var i;let a,[l,{track:u,ssrcs:h,id:f}]=n;switch(l){case Le.LocalVideoTrack:a=Ye(i=u._hints).call(i,ar.SCREEN_TRACK)?Vn.Screen:Vn.High;break;case Le.LocalAudioTrack:a=Vn.Audio;break;case Le.LocalVideoLowTrack:a=Vn.Low}return{stream_type:a,ssrcs:h,mid:f}})}assignLocalTracks(t,n){t.forEach((i,a)=>{let{track:l,type:u}=i;this.localTrackMap.set(u,{track:l,id:n[a].id,ssrcs:n[a].localSSRC})})}withdrawLocalTracks(t){t.forEach(n=>{let[i]=n;this.localTrackMap.delete(i)})}bindConnectionEvents(t){t.onConnectionStateChange=async n=>{if(k.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onConnectionStateChange(").concat(n,")")),this.emit(At.PeerConnectionStateChange,n),n!=="connected"||this.store.keyMetrics.peerConnectionEnd||this.store.peerConnectionEnd(),n==="connected"&&(this._restartTimer&&(clearTimeout(this._restartTimer),this._restartTimer=void 0),(this._isFirstConnected||this._isInRestartIce)&&this.reportPCStats(Date.now(),!0,this._pcStatsUploadType),this._isInRestartIce=!1,this._isFirstConnected=!1,this._isStartRestartIce=!1),ee("NEW_ICE_RESTART")){var i;if(Ye(i=this._restartStates).call(i,n)){if(this._isStartRestartIce)return;this._isStartRestartIce=!0;const a=h=>{(t.iceConnectionState==="disconnected"||t.iceConnectionState==="checking"||t.iceConnectionState==="failed")&&(k.debug("[".concat(this.store.clientId,"] [P2PChannel] start use restartICE, type is ").concat(h)),Ta(this,At.QueryClientConnectionState)==="CONNECTED"&&this.emit(At.RequestRestartICE,h))},l=()=>{t.iceConnectionState!=="disconnected"&&t.iceConnectionState!=="checking"&&t.iceConnectionState!=="failed"||(this.reportPCStats(Date.now(),!1,this._pcStatsUploadType),k.debug("[".concat(this.store.clientId,"] P2PConnection disconnected timeout, force reconnect")),setTimeout(()=>this.emit(At.P2PLost),0),this.iceFailedCount+=1,this.requestReconnect())},u=ee("ICE_RESTART_INTERVAL");return void(this._restartTimer=window.setTimeout(()=>{if(ee("JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE")&&un().supportPCSetConfiguration)a(vo.RELAY),this._restartTimer=window.setTimeout(l,u);else if(Zn())a(vo.UDP),this._restartTimer=window.setTimeout(l,4e3);else{if(a(vo.TCP),un().supportPCSetConfiguration)return void(this._restartTimer=window.setTimeout(()=>{a(vo.RELAY),this._restartTimer=window.setTimeout(l,u)},u));this._restartTimer=window.setTimeout(l,u)}},800))}}else{if(n==="disconnected"&&t.iceConnectionState==="disconnected")return setTimeout(()=>{t.iceConnectionState==="disconnected"&&ee("ICE_RESTART")&&Ta(this,At.QueryClientConnectionState)==="CONNECTED"&&this.emit(At.RequestRestartICE)},800),void setTimeout(()=>{t.peerConnectionState==="disconnected"&&(k.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection disconnected timeout 4000ms, force reconnect")),this.reportPCStats(Date.now(),!1,this._pcStatsUploadType),this._isInRestartIce=!1,setTimeout(()=>this.emit(At.P2PLost),0),this.iceFailedCount+=1,this.requestReconnect())},4e3);n==="failed"&&(k.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection state failed, force reconnect")),this.reportPCDisconnectedOrFailed(),setTimeout(()=>this.emit(At.P2PLost),0),this.iceFailedCount+=1,await this.requestReconnect())}},t.onICEConnectionStateChange=n=>{n!=="connected"||this.store.keyMetrics.iceConnectionEnd||this.store.iceConnectionEnd(),k.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICEConnectionStateChange(").concat(n,")")),ht.reportApiInvoke(this.store.sessionId,{name:"ICEConnectionStateChange",options:n,tag:Nr.TRACER}).onSuccess(),this.emit(At.IceConnectionStateChange,n)},t.onICETransportStateChange=n=>{k.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICETransportStateChange(").concat(n,")"))},t.onDTLSTransportStateChange=n=>{k.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportStateChange(").concat(n,")"))},t.onDTLSTransportError=n=>{k.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportError(").concat(n,")"))},t.onFirstAudioDecoded=n=>{var i;const a=Array.from(Va(i=this.remoteUserMap).call(i)).find(u=>u._audioSSRC===n);var l;a&&(this.store.subscribe(a.uid,"audio",void 0,void 0,void 0,Date.now()),(l=a.audioTrack)===null||l===void 0||l.emit(pf.FIRST_FRAME_DECODED),ht.firstRemoteFrame(this.store.sessionId,xi.FIRST_AUDIO_DECODE,Ir.FIRST_AUDIO_DECODE,{peer:a._uintid,subscribeElapse:Zi.measureFromSubscribeStart(this.store.clientId,n),subscribeRequestid:n,p2pid:this.store.p2pId}))},t.onFirstAudioReceived=n=>{var i;const a=Array.from(Va(i=this.remoteUserMap).call(i)).find(l=>l._audioSSRC===n);a&&ht.firstRemoteFrame(this.store.sessionId,xi.FIRST_AUDIO_RECEIVED,Ir.FIRST_AUDIO_RECEIVED,{peer:a._uintid,subscribeElapse:Zi.measureFromSubscribeStart(this.store.clientId,n),subscribeRequestid:n,p2pid:this.store.p2pId})},t.onFirstVideoDecoded=(n,i,a)=>{this.reportVideoFirstFrameDecoded(n,i,a)},t.onFirstVideoReceived=n=>{var i;const a=Array.from(Va(i=this.remoteUserMap).call(i)).find(l=>l._videoSSRC===n);a&&ht.firstRemoteFrame(this.store.sessionId,xi.FIRST_VIDEO_RECEIVED,Ir.FIRST_VIDEO_RECEIVED,{peer:a._uintid,subscribeElapse:Zi.measureFromSubscribeStart(this.store.clientId,n),subscribeRequestid:n,p2pid:this.store.p2pId})},t.onSelectedLocalCandidateChanged=(n,i)=>{const a=n.candidateType==="relay",l=i.candidateType==="relay";i.candidateType!=="unknown"&&a===l||this.emit(At.ConnectionTypeChange,a),k.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.SelectedLocalCandidateChanged(").concat(JSON.stringify(Gu(i))," -> ").concat(JSON.stringify(Gu(n)),")"))},t.onSelectedRemoteCandidateChanged=(n,i)=>{k.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.SelectedRemoteCandidateChanged(").concat(JSON.stringify(Gu(i))," -> ").concat(JSON.stringify(Gu(n)),")"))},t.onFirstVideoDecodedTimeout=n=>{this.reportVideoFirstFrameDecoded(n,void 0,void 0,!0)},t.getLocalVideoStats=()=>{const n=this.statsCollector.getLocalVideoTrackStats(),i=this.statsCollector.getRTCStats();return yl(yl({},n),i)}}unbindConnectionEvents(t){t.onConnectionStateChange=void 0,t.onICEConnectionStateChange=void 0,t.onICETransportStateChange=void 0,t.onDTLSTransportStateChange=void 0,t.onDTLSTransportError=void 0,t.onFirstAudioDecoded=void 0,t.onFirstAudioReceived=void 0,t.onFirstVideoDecoded=void 0,t.onFirstVideoReceived=void 0,t.onSelectedLocalCandidateChanged=void 0,t.onSelectedRemoteCandidateChanged=void 0,t.onFirstVideoDecodedTimeout=void 0,t.getLocalVideoStats=void 0}filterTobeMutedTracks(t){const n=[];if(this.getAllTracks().indexOf(t)===-1)return n;const i=this.localTrackMap.get(Le.LocalAudioTrack);if(t instanceof Lr&&(i==null?void 0:i.track)instanceof hi)return i.track.isActive||n.push([Le.LocalAudioTrack,i]),n;const a=Array.from(this.localTrackMap.entries()).find(l=>{let[,{track:u}]=l;return t===u});if(a&&(n.push(a),a[0]===Le.LocalVideoTrack)){const l=this.localTrackMap.get(Le.LocalVideoLowTrack);l&&n.push([Le.LocalVideoLowTrack,l])}return n}filterTobeUnmutedTracks(t){const n=[],i=this.localTrackMap.get(Le.LocalAudioTrack);if(t instanceof Lr&&(i==null?void 0:i.track)instanceof hi)return i.track.isActive&&n.push([Le.LocalAudioTrack,i]),n;const a=Array.from(this.localTrackMap.entries()).find(l=>{let[,{track:u}]=l;return t===u});if(a)if(a[0]===Le.LocalVideoTrack){n.push(a);const l=this.localTrackMap.get(Le.LocalVideoLowTrack);l&&n.push([Le.LocalVideoLowTrack,l])}else n.push(a);return n}createMuteMessage(t){return t.map(n=>{var i;let a,[l,{track:u,ssrcs:h,id:f}]=n;switch(l){case Le.LocalAudioTrack:a=Vn.Audio;break;case Le.LocalVideoTrack:a=Ye(i=u._hints).call(i,ar.SCREEN_TRACK)?Vn.Screen:Vn.High;break;case Le.LocalVideoLowTrack:a=Vn.Low}return{stream_type:a,ssrcs:h,mid:f}})}createUnmuteMessage(t){return t.map(n=>{var i;let a,[l,{track:u,ssrcs:h,id:f}]=n;switch(l){case Le.LocalAudioTrack:a=Vn.Audio;break;case Le.LocalVideoTrack:a=Ye(i=u._hints).call(i,ar.SCREEN_TRACK)?Vn.Screen:Vn.High;break;case Le.LocalVideoLowTrack:a=Vn.Low}return{stream_type:a,ssrcs:h,mid:f}})}filterTobeUnSubscribedTracks(t,n){const i=[],a=this.remoteUserMap.get(t);if(!a)return i;if(n){const l=a.get(n);if(!l)return i;i.push([t,{kind:n,id:l}])}else Array.from(a.entries()).forEach(l=>{let[u,h]=l;i.push([t,{kind:u,id:h}])});return i}filterTobeUnSubscribedDataChannels(t,n){const i=[];return n.forEach(a=>{var l;(l=this.remoteDataChannelMap.get(t))!==null&&l!==void 0&&l.has(a.id)&&i.push(a)}),i}createUnsubscribeMessage(t){const n=[];return t.forEach(i=>{let[a,{kind:l,id:u}]=i;switch(l){case ut.VIDEO:return void(a._videoSSRC&&n.push({stream_type:ut.VIDEO,ssrcId:a._videoSSRC}));case ut.AUDIO:return void(a._audioSSRC&&n.push({stream_type:ut.AUDIO,ssrcId:a._audioSSRC}))}}),n}createUnsubscribeAllMessage(t){const n=new Map;return t.forEach(i=>{let[a,{kind:l}]=i;if(n.has(a)){let u=n.get(a);l===ut.VIDEO?u|=Ci.Video:u|=Ci.Audio,n.set(a,u)}else l===ut.VIDEO?n.set(a,Ci.Video):n.set(a,Ci.Audio)}),{users:Array.from(n.entries()).map(i=>{let[a,l]=i;return{stream_id:a.uid,stream_type:l}})}}withdrawRemoteTracks(t){t.forEach(n=>{let[i,{kind:a}]=n;const l=this.remoteUserMap.get(i);l&&(l.delete(a),Array.from(l.entries()).length===0&&this.remoteUserMap.delete(i))})}async updateBitrateLimit(t){const n=this.localTrackMap.get(Le.LocalVideoTrack),i=this.localTrackMap.get(Le.LocalVideoLowTrack);n&&await n.track.setBitrateLimit(t.uplink),i&&t.low_stream_uplink&&await i.track.setBitrateLimit({max_bitrate:t.low_stream_uplink.bitrate,min_bitrate:t.low_stream_uplink.bitrate||0})}isP2PDisconnected(){return this.connection?this.connection.peerConnectionState!=="connected":!0}mapPubResToRemoteConfig(t,n){return t.map((i,a)=>{var l;let{stream_type:u}=i;return(l=n.find(h=>{let{stream_type:f}=h;return u===f}))===null||l===void 0?void 0:l.attributes})}async tryToUnmuteAudio(t){for(let i=0;i<t.length;i++)if(t[i]instanceof Lr){var n;const a=this.filterTobeUnmutedTracks(t[i]);if(a.length===0)continue;await((n=this.connection)===null||n===void 0?void 0:n.unmuteLocal(a.map(u=>{let[,{id:h}]=u;return h})));const l=this.createUnmuteMessage(a);return void await er(this,At.RequestUnmuteLocal,l)}}bindStatsUploaderEvents(){this.statsUploader.requestStats=()=>this.getStats(),this.statsUploader.requestLocalMedia=()=>Array.from(this.localTrackMap.entries()),this.statsUploader.requestRemoteMedia=()=>Array.from(this.remoteUserMap.entries()),this.statsUploader.requestVideoIsReady=t=>{var n;return!((n=this.connection)===null||n===void 0||!n.getRemoteVideoIsReady(t))},this.statsUploader.requestUpload=(t,n)=>this.emit(At.RequestUpload,t,n),this.statsUploader.requestUploadStats=t=>this.emit(At.RequestUploadStats,t),this.statsUploader.requestAllTracks=()=>this.getAllTracks()}unbindStatsUploaderEvents(){this.statsUploader.requestStats=void 0,this.statsUploader.requestLocalMedia=void 0,this.statsUploader.requestRemoteMedia=void 0,this.statsUploader.requestVideoIsReady=void 0}async requestReconnect(){this.dtlsFailedCount+=1,await yi(u_(this.dtlsFailedCount,qr)),this.emit(At.RequestReconnect)}async reconnectP2P(){const t=Array.from(this.localTrackMap.entries()),n=this.createGatewayUnpublishMessage(t);Array.from(this.remoteUserMap.entries()),n.length>0&&await ri(this,At.RequestUnpublishForReconnectPC,n),this.disconnectForReconnect(),this.emit(At.RequestReconnectPC)}canPublishLowStream(){return this.localTrackMap.has(Le.LocalVideoTrack)||this.pendingLocalTracks.some(t=>t instanceof nr)}throwIfTrackTypeNotMatch(t){if(t.filter(n=>n instanceof nr).length>1)throw new Ce(K.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(t.filter(n=>n instanceof Lr).length>1&&(t.some(n=>n instanceof Lr&&n._bypassWebAudio)||!un().webAudioMediaStreamDest))throw new Ce(K.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode");for(const n of t){if(n instanceof nr&&this.pendingLocalTracks.some(i=>i instanceof nr))throw new Ce(K.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(n instanceof Lr&&this.pendingLocalTracks.some(i=>i instanceof Lr)&&(!un().webAudioMediaStreamDest||n._bypassWebAudio||this.pendingLocalTracks.some(i=>i instanceof Lr&&i._bypassWebAudio)))throw new Ce(K.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode")}}getLowVideoTrack(t,n){const i=!ee("DISABLE_DUAL_STREAM_USE_ENCODING")&&un().supportDualStreamEncoding,a=yl(yl({},{width:160,height:120,framerate:15,bitrate:50}),n);let l;l=i?t._mediaStreamTrack.clone():NI(t,a);const u=tr(8,"track-low-"),h=new nr(l,yl(yl({},i&&{scaleResolutionDownBy:s1(a,t)}),{},{frameRate:a.framerate,bitrateMax:a.bitrate,bitrateMin:a.bitrate}),void 0,void 0,u);return h.on(gh.TRANSCEIVER_UPDATED,f=>{t._updateRtpTransceiver(f,df.LOW_STREAM)}),h._hints.push(ar.LOW_STREAM),t.on("sei-to-send",f=>{h.emit("sei-to-send",f)}),t.addListener(et.NEED_CLOSE,()=>{h.close()}),h}async globalLock(){return this.mutex.lock("From P2PChannel.globalLock")}async reportPCStats(t,n,i){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;if(this.connection&&this.connection instanceof Lc){var l,u,h,f;const g=this.store.keyMetrics.descriptionStart||0,{iceConnectionState:_,dtlsTransportState:y,peerConnectionState:T}=this.connection,{local:A,remote:D}=await this.connection.getSelectedCandidatePair();ht.pcStats(this.store.sessionId,{startTime:g,eventElapse:t-g||0,iceconnectionsate:_,dtlsstate:y,connectionstate:T,intSucc:n?1:2,error:a,selectedLocalCandidateProtocol:(l=A==null?void 0:A.protocol)!==null&&l!==void 0?l:"",selectedLocalCandidateType:(u=A.candidateType)!==null&&u!==void 0?u:"",selectedLocalCandidateAddress:"".concat(A.address,":").concat(A.port),selectedRemoteCandidateProtocol:(h=D.protocol)!==null&&h!==void 0?h:"",selectedRemoteCandidateType:(f=D.candidateType)!==null&&f!==void 0?f:"",selectedRemoteCandidateAddress:"".concat(D.address,":").concat(D.port),restartCnt:i})}}reportVideoFirstFrameDecoded(t,n,i,a){var l;const u=Array.from(Va(l=this.remoteUserMap).call(l)).find(h=>h._videoSSRC===t);if(u){a||this.store.subscribe(u.uid,"video",void 0,void 0,void 0,void 0,Date.now());const h=this.store.keyMetrics,f=h.subscribe.find(g=>g.userId===u.uid&&g.type==="video");ht.firstRemoteVideoDecode(this.store.sessionId,xi.FIRST_VIDEO_DECODE,Ir.FIRST_VIDEO_DECODE,{peer:u._uintid,videowidth:n,videoheight:i,subscribeElapse:Zi.measureFromSubscribeStart(this.store.clientId,t),subscribeRequestid:t,p2pid:this.store.p2pId,apEnd:h.requestAPEnd||0,apStart:h.requestAPStart||0,joinGwEnd:h.joinGatewayEnd||0,joinGwStart:h.joinGatewayStart||0,pcEnd:h.peerConnectionEnd||0,pcStart:h.peerConnectionStart||0,subscriberEnd:(f==null?void 0:f.subscribeEnd)||0,subscriberStart:(f==null?void 0:f.subscribeStart)||0,videoAddNotify:(f==null?void 0:f.streamAdded)||0,state:a?1:0})}}async remoteMediaSsrcChanged(t,n,i){if(!this.connection)return!1;const a=this.remoteUserMap.get(t);if(!a)return!1;const l=a.get(n);if(!l)return!1;const u=await this.connection.getRemoteSSRC(l);return u!==void 0&&u!==i}resetConnection(t){k.debug("[".concat(this.store.clientId,"] [P2PChannel] reset connection to ").concat(t)),this.state===$n.Connected?(k.debug("[".concat(this.store.clientId,"] [P2PChannel] fallback to websocket but P2PChannel state still connected, disconnect first")),this.disconnectForReconnect()):(this.connection&&(this.connection.close(),this.unbindConnectionEvents(this.connection),this.connection=void 0),this.shouldForwardP2PCreation&&(this.connection=t===J4.datachannel?new od({},this.store):this.isPlanB?new yf({},this.store):new Lc({},this.store),this.bindConnectionEvents(this.connection)))}unbindRtpTransceiver(){this.localTrackMap.size!==0&&Array.from(this.localTrackMap.entries()).forEach(t=>{let[n,{track:i}]=t;n===Le.LocalVideoLowTrack?i._updateRtpTransceiver(void 0,df.LOW_STREAM):i._updateRtpTransceiver(void 0)})}reportPCDisconnectedOrFailed(t){this.connection&&this.connection instanceof Lc&&(this.connection.iceConnectionState!=="disconnected"&&this.connection.iceConnectionState!=="checking"&&this.connection.iceConnectionState!=="failed"||(this._isFirstConnected?(this.reportPCStats(Date.now(),!1,this._pcStatsUploadType),this._isFirstConnected=!1):this._pcStatsUploadType===zl.TCP_RESTART&&t===vo.RELAY?this.reportPCStats(Date.now(),!1,this._pcStatsUploadType):this.reportPCStats(Date.now(),!1,zl.DISCONNECTED_OR_FAILED)))}},$e(Jt.prototype,"startP2PConnection",[so],Object.getOwnPropertyDescriptor(Jt.prototype,"startP2PConnection"),Jt.prototype),$e(Jt.prototype,"connect",[so],Object.getOwnPropertyDescriptor(Jt.prototype,"connect"),Jt.prototype),$e(Jt.prototype,"updateRemoteRTPCapabilities",[so],Object.getOwnPropertyDescriptor(Jt.prototype,"updateRemoteRTPCapabilities"),Jt.prototype),$e(Jt.prototype,"preConnect",[so],Object.getOwnPropertyDescriptor(Jt.prototype,"preConnect"),Jt.prototype),$e(Jt.prototype,"publishDataChannel",[so],Object.getOwnPropertyDescriptor(Jt.prototype,"publishDataChannel"),Jt.prototype),$e(Jt.prototype,"unpublish",[so],Object.getOwnPropertyDescriptor(Jt.prototype,"unpublish"),Jt.prototype),$e(Jt.prototype,"unpublishDataChannel",[so],Object.getOwnPropertyDescriptor(Jt.prototype,"unpublishDataChannel"),Jt.prototype),$e(Jt.prototype,"unpublishLowStream",[so],Object.getOwnPropertyDescriptor(Jt.prototype,"unpublishLowStream"),Jt.prototype),$e(Jt.prototype,"subscribeDataChannel",[so],Object.getOwnPropertyDescriptor(Jt.prototype,"subscribeDataChannel"),Jt.prototype),$e(Jt.prototype,"subscribe",[so],Object.getOwnPropertyDescriptor(Jt.prototype,"subscribe"),Jt.prototype),$e(Jt.prototype,"massSubscribe",[so],Object.getOwnPropertyDescriptor(Jt.prototype,"massSubscribe"),Jt.prototype),$e(Jt.prototype,"unsubscribe",[so],Object.getOwnPropertyDescriptor(Jt.prototype,"unsubscribe"),Jt.prototype),$e(Jt.prototype,"unsubscribeDataChannel",[so],Object.getOwnPropertyDescriptor(Jt.prototype,"unsubscribeDataChannel"),Jt.prototype),$e(Jt.prototype,"massUnsubscribe",[so],Object.getOwnPropertyDescriptor(Jt.prototype,"massUnsubscribe"),Jt.prototype),$e(Jt.prototype,"muteRemote",[so],Object.getOwnPropertyDescriptor(Jt.prototype,"muteRemote"),Jt.prototype),$e(Jt.prototype,"unmuteRemote",[so],Object.getOwnPropertyDescriptor(Jt.prototype,"unmuteRemote"),Jt.prototype),$e(Jt.prototype,"hasRemoteMediaWithLock",[so],Object.getOwnPropertyDescriptor(Jt.prototype,"hasRemoteMediaWithLock"),Jt.prototype),$e(Jt.prototype,"disconnectForReconnect",[so],Object.getOwnPropertyDescriptor(Jt.prototype,"disconnectForReconnect"),Jt.prototype),$e(Jt.prototype,"updateBitrateLimit",[so],Object.getOwnPropertyDescriptor(Jt.prototype,"updateBitrateLimit"),Jt.prototype),$e(Jt.prototype,"remoteMediaSsrcChanged",[so],Object.getOwnPropertyDescriptor(Jt.prototype,"remoteMediaSsrcChanged"),Jt.prototype),Jt);function so(t,n,i){const a=t[n];if(typeof a!="function")throw new Error("Cannot use mutex on object property.");return i.value=async function(){const l=this.mutex,u=await l.lock("From P2PChannel.".concat(n));try{for(var h=arguments.length,f=new Array(h),g=0;g<h;g++)f[g]=arguments[g];return await a.apply(this,f)}finally{u()}},i}function ype(t){let n=lj();return function(i,a){let l=i.appId;l!==void 0&&(Wn(a,10),Cl(a,l));let u=i.cid;u!==void 0&&(Wn(a,16),Wn(a,u));let h=i.cname;h!==void 0&&(Wn(a,26),Cl(a,h));let f=i.deviceId;f!==void 0&&(Wn(a,34),Cl(a,f));let g=i.elapse;g!==void 0&&(Wn(a,40),ad(a,g));let _=i.fileSize;_!==void 0&&(Wn(a,48),ad(a,bf(_)));let y=i.height;y!==void 0&&(Wn(a,56),ad(a,bf(y)));let T=i.jpg;T!==void 0&&(Wn(a,66),Wn(a,T.length),function(nc,Oe){let Ve=Tf(nc,Oe.length);nc.bytes.set(Oe,Ve)}(a,T));let A=i.networkType;A!==void 0&&(Wn(a,72),ad(a,bf(A)));let D=i.osType;D!==void 0&&(Wn(a,80),ad(a,bf(D)));let W=i.requestId;W!==void 0&&(Wn(a,90),Cl(a,W));let F=i.sdkVersion;F!==void 0&&(Wn(a,98),Cl(a,F));let U=i.sequence;U!==void 0&&(Wn(a,104),ad(a,bf(U)));let z=i.sid;z!==void 0&&(Wn(a,114),Cl(a,z));let X=i.timestamp;X!==void 0&&(Wn(a,120),ad(a,X));let ue=i.uid;ue!==void 0&&(Wn(a,128),Wn(a,ue));let pe=i.vid;pe!==void 0&&(Wn(a,136),Wn(a,pe));let Ee=i.width;Ee!==void 0&&(Wn(a,144),ad(a,bf(Ee)));let Se=i.service;Se!==void 0&&(Wn(a,152),Wn(a,Se));let Re=i.callbackData;Re!==void 0&&(Wn(a,162),Cl(a,Re));let Ae=i.jpgEncryption;Ae!==void 0&&(Wn(a,168),Wn(a,Ae));let Pe=i.requestType;Pe!==void 0&&(Wn(a,176),Wn(a,Pe));let tt=i.scorePorn;tt!==void 0&&(Wn(a,185),jI(a,tt));let ln=i.scoreSexy;ln!==void 0&&(Wn(a,193),jI(a,ln));let Fn=i.scoreNeutral;Fn!==void 0&&(Wn(a,201),jI(a,Fn));let sr=i.scene;sr!==void 0&&(Wn(a,208),Wn(a,sr));let Jr=i.ossFilePrefix;Jr!==void 0&&(Wn(a,218),Cl(a,Jr));let Or=i.serviceVendor;if(Or!==void 0)for(let nc of Or){Wn(a,226);let Oe=lj();Tpe(nc,Oe),Wn(a,Oe.limit),Ape(a,Oe),Ipe(Oe)}}(t,n),function(i){let a=i.bytes,l=i.limit;return a.length===l?a:a.subarray(0,l)}(n)}function Cpe(t){return function(i){let a={};e:for(;!uj(i);){let l=bl(i);switch(l>>>3){case 0:break e;case 1:a.code=bl(i);break;case 2:a.msg=dj(i,bl(i));break;case 3:{let u=Rpe(i);a.data=bpe(i),i.limit=u;break}default:sj(i,7&l)}}return a}({bytes:n=t,offset:0,limit:n.length});var n}function bpe(t){let n={};e:for(;!uj(t);){let i=bl(t);switch(i>>>3){case 0:break e;case 1:n.requestId=dj(t,bl(t));break;case 2:n.requestType=bl(t)>>>0;break;case 3:n.scorePorn=VI(t);break;case 4:n.scoreSexy=VI(t);break;case 5:n.scoreNeutral=VI(t);break;case 6:n.requestScene=bl(t)>>>0;break;case 7:n.scene=bl(t)>>>0;break;default:sj(t,7&i)}}return n}function Tpe(t,n){let i=t.service;i!==void 0&&(Wn(n,8),Wn(n,i));let a=t.vendor;a!==void 0&&(Wn(n,16),Wn(n,a));let l=t.token;l!==void 0&&(Wn(n,26),Cl(n,l));let u=t.callbackUrl;u!==void 0&&(Wn(n,34),Cl(n,u))}function Rpe(t){let n=bl(t),i=t.limit;return t.limit=t.offset+n,i}function sj(t,n){switch(n){case 0:for(;128&hj(t););break;case 2:UI(t,bl(t));break;case 5:UI(t,4);break;case 1:UI(t,8);break;default:throw new Error("Unimplemented type: "+n)}}let wpe=new Float32Array(1);new Uint8Array(wpe.buffer);let FI=new Float64Array(1),sa=new Uint8Array(FI.buffer);function bf(t){return{low:t|=0,high:t>>31,unsigned:t>=0}}let cj=[];function lj(){const t=cj.pop();return t?(t.offset=t.limit=0,t):{bytes:new Uint8Array(64),offset:0,limit:0}}function Ipe(t){cj.push(t)}function UI(t,n){if(t.offset+n>t.limit)throw new Error("Skip past limit");t.offset+=n}function uj(t){return t.offset>=t.limit}function Tf(t,n){let i=t.bytes,a=t.offset,l=t.limit,u=a+n;if(u>i.length){let h=new Uint8Array(2*u);h.set(i),t.bytes=h}return t.offset=u,u>l&&(t.limit=u),a}function BI(t,n){let i=t.offset;if(i+n>t.limit)throw new Error("Read past limit");return t.offset+=n,i}function dj(t,n){let i=BI(t,n),a=String.fromCharCode,l=t.bytes,u="�",h="";for(let f=0;f<n;f++){let g,_,y,T,A=l[f+i];128&A?(224&A)==192?f+1>=n?h+=u:(g=l[f+i+1],(192&g)!=128?h+=u:(T=(31&A)<<6|63&g,T<128?h+=u:(h+=a(T),f++))):(240&A)==224?f+2>=n?h+=u:(g=l[f+i+1],_=l[f+i+2],(49344&(g|_<<8))!=32896?h+=u:(T=(15&A)<<12|(63&g)<<6|63&_,T<2048||T>=55296&&T<=57343?h+=u:(h+=a(T),f+=2))):(248&A)==240?f+3>=n?h+=u:(g=l[f+i+1],_=l[f+i+2],y=l[f+i+3],(12632256&(g|_<<8|y<<16))!=8421504?h+=u:(T=(7&A)<<18|(63&g)<<12|(63&_)<<6|63&y,T<65536||T>1114111?h+=u:(T-=65536,h+=a(55296+(T>>10),56320+(1023&T)),f+=3))):h+=u:h+=a(A)}return h}function Cl(t,n){let i=n.length,a=0;for(let h=0;h<i;h++){let f=n.charCodeAt(h);f>=55296&&f<=56319&&h+1<i&&(f=(f<<10)+n.charCodeAt(++h)-56613888),a+=f<128?1:f<2048?2:f<65536?3:4}Wn(t,a);let l=Tf(t,a),u=t.bytes;for(let h=0;h<i;h++){let f=n.charCodeAt(h);f>=55296&&f<=56319&&h+1<i&&(f=(f<<10)+n.charCodeAt(++h)-56613888),f<128?u[l++]=f:(f<2048?u[l++]=f>>6&31|192:(f<65536?u[l++]=f>>12&15|224:(u[l++]=f>>18&7|240,u[l++]=f>>12&63|128),u[l++]=f>>6&63|128),u[l++]=63&f|128)}}function Ape(t,n){let i=Tf(t,n.limit),a=t.bytes,l=n.bytes;for(let u=0,h=n.limit;u<h;u++)a[u+i]=l[u]}function hj(t){return t.bytes[BI(t,1)]}function pj(t,n){let i=Tf(t,1);t.bytes[i]=n}function VI(t){let n=BI(t,8),i=t.bytes;return sa[0]=i[n++],sa[1]=i[n++],sa[2]=i[n++],sa[3]=i[n++],sa[4]=i[n++],sa[5]=i[n++],sa[6]=i[n++],sa[7]=i[n++],FI[0]}function jI(t,n){let i=Tf(t,8),a=t.bytes;FI[0]=n,a[i++]=sa[0],a[i++]=sa[1],a[i++]=sa[2],a[i++]=sa[3],a[i++]=sa[4],a[i++]=sa[5],a[i++]=sa[6],a[i++]=sa[7]}function bl(t){let n,i=0,a=0;do n=hj(t),i<32&&(a|=(127&n)<<i),i+=7;while(128&n);return a}function Wn(t,n){for(n>>>=0;n>=128;)pj(t,127&n|128),n>>>=7;pj(t,n)}function ad(t,n){let i=n.low>>>0,a=(n.low>>>28|n.high<<4)>>>0,l=n.high>>>24,u=l===0?a===0?i<16384?i<128?1:2:i<1<<21?3:4:a<16384?a<128?5:6:a<1<<21?7:8:l<128?9:10,h=Tf(t,u),f=t.bytes;switch(u){case 10:f[h+9]=l>>>7&1;case 9:f[h+8]=u!==9?128|l:127&l;case 8:f[h+7]=u!==8?a>>>21|128:a>>>21&127;case 7:f[h+6]=u!==7?a>>>14|128:a>>>14&127;case 6:f[h+5]=u!==6?a>>>7|128:a>>>7&127;case 5:f[h+4]=u!==5?128|a:127&a;case 4:f[h+3]=u!==4?i>>>21|128:i>>>21&127;case 3:f[h+2]=u!==3?i>>>14|128:i>>>14&127;case 2:f[h+1]=u!==2?i>>>7|128:i>>>7&127;case 1:f[h]=u!==1?128|i:127&i}}function fj(t,n){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),i.push.apply(i,a)}return i}const Ope=new Map([["moderation",1],["supervise",2]]);class ES extends _r{get connectionState(){return this._connectionState}set connectionState(n){if(this._connectionState===n)return;const i=this._connectionState;this._connectionState=n,this.emit(Di.CONNECTION_STATE_CHANGE,i,n)}get inspectType(){return this._inspectType}set inspectType(n){var i;this._inspectMode=Sc(i=n.map(a=>Ope.get(a)||0)).call(i,(a,l)=>a+l),this._inspectType=n}get quality(){return this._quality}set quality(n){this._quality=n>1?1:n<.1?.1:n,this.qualityTimer&&(window.clearTimeout(this.qualityTimer),this.qualityTimer=null),this._quality>=1||(this.qualityTimer=window.setTimeout(()=>{this.quality=this._quality/this.qualityRatio},6e4))}constructor(n){super(),V(this,"name","AgoraRTCVideoContentInspect"),V(this,"_connectionState",Vs.CONNECTING),V(this,"_innerConnectionState",void 0),V(this,"sequence",0),V(this,"inspectStartTime",void 0),V(this,"workerManagerConnection",void 0),V(this,"workerConnection",void 0),V(this,"workerMessageLengthLimit",void 0),V(this,"inspectIntervalMinimum",void 0),V(this,"qualityRatio",void 0),V(this,"_connectInfo",void 0),V(this,"_cancelTokenSource",Go.CancelToken.source()),V(this,"_retryConfig",void 0),V(this,"wmSequence",0),V(this,"inspectInterval",void 0),V(this,"inspectTimer",null),V(this,"ossFilePrefix",void 0),V(this,"extraInfo",void 0),V(this,"_inspectType",void 0),V(this,"_inspectMode",void 0),V(this,"_quality",1),V(this,"qualityTimer",null),V(this,"_inspectId",void 0),V(this,"_needWorkUrlOnly",!1),V(this,"inspectImage",()=>{if(this.connectionState!==Vs.CONNECTED)throw new me(K.OPERATION_ABORTED,"content inspect service connection status is ".concat(this.connectionState));this.inspectTimer&&(window.clearInterval(this.inspectTimer),this.inspectTimer=null),this.inspectTimer=window.setInterval(()=>{this.connectionState===Vs.CONNECTED?this.requestToInspectImage():k.debug("[".concat(this._inspectId,"] Inspect State is not connected , "),this.connectionState)},this.inspectInterval<this.inspectIntervalMinimum?this.inspectIntervalMinimum:this.inspectInterval),this.requestToInspectImage()}),this._inspectId=tr(5,"inspect-"),this.workerMessageLengthLimit=ee("VIDEO_INSPECT_WORKER_MESSAGE_LENGTH_LIMIT"),this.inspectIntervalMinimum=ee("VIDEO_INSPECT_INTERVAL_MINIMUM"),this.qualityRatio=ee("VIDEO_INSPECT_QUALITY_RATIO"),this.inspectInterval=n.interval,this.ossFilePrefix=n.ossFilePrefix,this.extraInfo=n.extraInfo,this.inspectType=n.inspectType,this.inspectStartTime=Number(Date.now()),this.workerManagerConnection=new T0("worker-manager-"+this._inspectId,qr),this.on(Di.STATE_CHANGE,(i,a)=>{this._innerConnectionState=i,k.debug("[".concat(this._inspectId,"] Inspect operation :").concat(js[i]," ").concat(a||""))}),this.handleWorkerManagerEvents(),this.workerConnection=new T0("worker-"+this._inspectId,qr),this.handleWorkerEvents()}async init(n,i){this.emit(Di.STATE_CHANGE,js.CONNECT_AP),this._connectInfo=n;const a=this._cancelTokenSource.token;return this._retryConfig=i,new We((l,u)=>{this.on(Di.CONNECTION_STATE_CHANGE,(h,f)=>{f===Vs.CONNECTED&&l()}),this.requestAP(n,a,i).then(h=>{this.connectWorkerManager(h)}).catch(h=>{u(h)})})}async requestAP(n,i,a){const l=ee("WEBCS_DOMAIN").map(f=>"https://".concat(f,"/api/v1")),u=await function(f,g,_,y){let{appId:T,areaCode:A,cname:D,sid:W,token:F,uid:U}=g;Yp++;const z="image_moderation_api",X={service_name:z,json_body:JSON.stringify({appId:T,areaCode:A,cname:D,command:"allocateEdge",requestId:Yp,seq:Yp,sid:W,token:F,ts:Date.now(),uid:U+""})};let ue,pe,Ee=f[0];return bc(async()=>{ue=Date.now();const Se=await Ic(Ee,{data:X,cancelToken:_,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"},params:{action:"wrtc_gateway"}});if(pe=Date.now()-ue,Se.code!==0){const tt=new me(K.UNEXPECTED_RESPONSE,"image inspect ap error, code"+Se.code,{retry:!0,responseTime:pe});throw k.error(tt.toString()),tt}const Re=JSON.parse(Se.json_body);if(Re.code!==200){const tt=new me(K.UNEXPECTED_RESPONSE,"image inspect ap error, code: ".concat(Re.code,", reason: ").concat(Re.reason),{code:Re.code,responseTime:pe});throw k.error(tt.toString()),tt}if(!Re.servers||!Array.isArray(Re.servers)||Re.servers.length===0){const tt=new me(K.UNEXPECTED_RESPONSE,"image inspect ap empty server",{code:Re.code,responseTime:pe});throw k.error(tt.toString()),tt}const Ae=ee("VIDEO_INSPECT_WORKER_MANAGER_HOST"),Pe=ee("VIDEO_INSPECT_WORKER_MANAGER_PORT");return{addressList:Re.servers.map(tt=>{let{address:ln,wss:Fn}=tt;if(ln&&Fn)return"wss://".concat(ln.replace(/\./g,"-"),".").concat(Ae,":").concat(Pe||Fn)}).filter(tt=>!!tt),workerToken:Re.workerToken,vid:Re.vid,responseTime:pe}},(Se,Re)=>(ht.apworkerEvent(W,{success:!0,sc:200,serviceName:z,responseDetail:JSON.stringify(Se.addressList),firstSuccess:Re===0,responseTime:pe,serverIp:f[Re%f.length]}),!1),(Se,Re)=>(ht.apworkerEvent(W,{success:!1,sc:Se.data&&Se.data.code||200,serviceName:z,responseTime:pe,serverIp:f[Re%f.length]}),!!(Se.code!==K.OPERATION_ABORTED&&Se.code!==K.UNEXPECTED_RESPONSE||Se.data&&Se.data.retry)&&(Ee=f[(Re+1)%f.length],!0)),y)}(l,n,i,a);this.emit(Di.STATE_CHANGE,js.AP_CONNECTED);const{addressList:h}=u;return this.wmSequence++,h}async connectWorkerManager(n){let i=arguments.length>1&&arguments[1]!==void 0&&arguments[1];this._needWorkUrlOnly=i,this.emit(Di.STATE_CHANGE,js.CONNECT_WORKER_MANAGER),await this.workerManagerConnection.init(n,1e4)}async connectWorker(n){await this.workerConnection.init([n])}handleWorkerManagerEvents(){this.workerManagerConnection.on(kt.CONNECTED,async()=>{this.emit(Di.STATE_CHANGE,js.WORKER_MANAGER_CONNECTED,this.workerManagerConnection.url),this.workerManagerConnection.sendMessage({appId:this._connectInfo.appId,cname:this._connectInfo.cname,uid:this._connectInfo.uid+"",sdkVersion:"4.21.0",sid:this._connectInfo.sid,seq:this.wmSequence,ts:Number(Date.now()),requestId:Math.floor(1e12*Math.random()),allocate:!0,clientRequest:{command:"join"}},!0)}),this.workerManagerConnection.on(kt.CLOSED,()=>{this._innerConnectionState<js.GET_WORKER_MANAGER_RESPONSE&&k.debug("[".concat(this._inspectId,"] Inspect worker manager is closed before connecting worker"))}),this.workerManagerConnection.on(kt.FAILED,()=>{this._innerConnectionState<js.GET_WORKER_MANAGER_RESPONSE&&k.debug("[".concat(this._inspectId,"] Connecting inspect worker manager is failed before connecting worker"))}),this.workerManagerConnection.on(kt.RECONNECTING,()=>{this._innerConnectionState<js.GET_WORKER_MANAGER_RESPONSE&&k.debug("[".concat(this._inspectId,"] Inspect worker manager is reconnecting before connecting worker"))}),this.workerManagerConnection.on(kt.ON_MESSAGE,async n=>{this.emit(Di.STATE_CHANGE,js.GET_WORKER_MANAGER_RESPONSE);const i=this.workerManagerConnection.url;this.workerManagerConnection.close();const a=JSON.parse(n.data);if(a.code!==200)throw k.error("[".concat(this._inspectId,"] Unexpected code ").concat(a.code," from worker manager")),new me(K.UNEXPECTED_RESPONSE,"response code of worker is unexpected",a);if(!(a.serverResponse&&a.serverResponse.portWss&&i))throw k.error("[".concat(this._inspectId,"] Unexpected content from worker manager : ").concat(JSON.stringify(a))),new me(K.UNEXPECTED_RESPONSE,"response content of worker is unexpected",a);{const l=ee("VIDEO_INSPECT_WORKER_PORT")||a.serverResponse.portWss,u=i.replace(/:\d+\/?$/,":".concat(l));this.emit(Di.STATE_CHANGE,js.CONNECT_WORKER,u),this._needWorkUrlOnly?this.emit(Di.REQUEST_NEW_WORKER_URL,u):await this.connectWorker(u)}}),this.workerManagerConnection.on(kt.WILL_RECONNECT,(n,i,a)=>{a(n)}),this.workerManagerConnection.on(kt.REQUEST_NEW_URLS,(n,i)=>{this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then(n).catch(i)})}handleWorkerEvents(){this.workerConnection.on(kt.CONNECTED,async()=>{this.emit(Di.STATE_CHANGE,js.WORKER_CONNECTED,this.workerConnection.url),this.connectionState=Vs.CONNECTED}),this.workerConnection.on(kt.ON_MESSAGE,async n=>{if(n.data instanceof ArrayBuffer){const a=Cpe(new Uint8Array(n.data));if(ee("SHOW_VIDEO_INSPECT_WORKER_MESSAGE")&&k.debug("[".concat(this._inspectId,"] Response message for worker of inspect content "),JSON.stringify(a)),a.code===200){if(Array.isArray(this.inspectType)&&this.inspectType.length===1&&this.inspectType[0]==="supervise")return void this.emit(Di.INSPECT_RESULT,void 0,void 0);if(a.data&&a.data.scorePorn&&a.data.scoreSexy&&a.data.scoreNeutral){var i;const l={porn:a.data.scorePorn,sexy:a.data.scoreSexy,neutral:a.data.scoreNeutral},u=Sc(i=Object.keys(l)).call(i,(f,g)=>l[f]>l[g]?f:g,"porn"),h=Object.keys(l).find(f=>f===u);this.emit(Di.INSPECT_RESULT,h)}else this.emit(Di.INSPECT_RESULT,void 0,new me(K.UNEXPECTED_RESPONSE,a.code+"","There is an unexpected data on message"))}else this.emit(Di.INSPECT_RESULT,void 0,new me(K.UNEXPECTED_RESPONSE,a.code+"",a.msg))}else k.error("[".concat(this._inspectId,"] Unexpected message type from worker")),this.emit(Di.INSPECT_RESULT,void 0,new me(K.UNEXPECTED_RESPONSE,"invalid worker message type"))}),this.workerConnection.on(kt.CLOSED,()=>{this.connectionState=Vs.CLOSED}),this.workerConnection.on(kt.FAILED,()=>{this.connectionState=Vs.CLOSED}),this.workerConnection.on(kt.RECONNECTING,()=>{this.connectionState=this.connectionState===Vs.CONNECTED?Vs.RECONNECTING:Vs.CONNECTING}),this.workerConnection.on(kt.WILL_RECONNECT,(n,i,a)=>{n==="recover"&&a(n),a("tryNext")}),this.workerConnection.on(kt.REQUEST_NEW_URLS,(n,i)=>{this.workerManagerConnection.close(),this.once(Di.REQUEST_NEW_WORKER_URL,a=>{n([a])}),this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then(a=>{this.connectWorkerManager(a,!0)}).catch(a=>{i(a)})})}static intToLong(n){return{low:n|=0,high:n>>31,unsigned:n>=0}}async requestToInspectImage(){this.sequence++;const n=Ta(this,Di.CLIENT_LOCAL_VIDEO_TRACK),i={appId:this._connectInfo.appId,cname:this._connectInfo.cname,cid:this._connectInfo.cid,sid:this._connectInfo.sid,uid:this._connectInfo.uid,vid:this._connectInfo.vid};if(n){if(!n.isPlaying)return void this.emit(Di.INSPECT_RESULT,void 0,new me(K.INVALID_OPERATION,"Only the track being played can be inspected"));const a=await this.generateRequestData(n,i);this.workerConnection.sendMessage(a,!0,!0)}else this.emit(Di.INSPECT_RESULT,void 0,new me(K.INVALID_OPERATION,"Only the track being published can be inspected"))}async generateRequestData(n,i){let{appId:a,cname:l,cid:u,vid:h,sid:f,uid:g}=i;const _=Date.now(),y=await n.getCurrentFrameImage("image/jpeg",this.quality),T=await m5(y,a,l),A=this.sequence+"-"+u+"-"+g+"-"+_+"-"+tr(12,""),D={appId:a,cid:u,cname:l,deviceId:"",elapse:ES.intToLong(Number(_-this.inspectStartTime)),fileSize:T.byteLength,jpgEncryption:2,height:y.height,width:y.width,jpg:T,networkType:6,osType:7,requestId:A,sdkVersion:"4.21.0",sequence:this.sequence,sid:f,timestamp:ES.intToLong(_),uid:g,vid:h,service:this._inspectMode,callbackData:this.extraInfo,ossFilePrefix:this.ossFilePrefix};this.extraInfo===void 0&&delete D.callbackData,this.ossFilePrefix===void 0&&delete D.ossFilePrefix;const W=ype(D);if(W.byteLength<this.workerMessageLengthLimit){if(ee("SHOW_VIDEO_INSPECT_WORKER_MESSAGE")){const F=function(U){for(var z=1;z<arguments.length;z++){var X=arguments[z]!=null?arguments[z]:{};z%2?fj(Object(X),!0).forEach(function(ue){V(U,ue,X[ue])}):Object.getOwnPropertyDescriptors?Object.defineProperties(U,Object.getOwnPropertyDescriptors(X)):fj(Object(X)).forEach(function(ue){Object.defineProperty(U,ue,Object.getOwnPropertyDescriptor(X,ue))})}return U}({},D);delete F.jpg,k.debug("[".concat(this._inspectId,"] Request message for worker of inspect content "),JSON.stringify(F))}return W}{const F=this.quality*this.qualityRatio;return this.quality=F,await this.generateRequestData(n,{appId:a,cname:l,cid:u,vid:h,sid:f,uid:g})}}close(){this._cancelTokenSource.cancel(),this._cancelTokenSource=Go.CancelToken.source(),this.workerManagerConnection&&this.workerManagerConnection.close(),this.workerConnection&&this.workerConnection.close(),this.inspectTimer&&window.clearInterval(this.inspectTimer),this.inspectTimer=null,this.connectionState=Vs.CLOSED,this.emit(Di.STATE_CHANGE,js.CLOSED)}}function xpe(t){let n=function(){const i=Ppe.pop();return i?(i.offset=i.limit=0,i):{bytes:new Uint8Array(64),offset:0,limit:0}}();return function(i,a){let l=i.appId;l!==void 0&&(Xr(a,10),sd(a,l));let u=i.cid;u!==void 0&&(Xr(a,16),Xr(a,u));let h=i.cname;h!==void 0&&(Xr(a,26),sd(a,h));let f=i.deviceId;f!==void 0&&(Xr(a,34),sd(a,f));let g=i.elapse;g!==void 0&&(Xr(a,40),cd(a,g));let _=i.fileSize;_!==void 0&&(Xr(a,48),cd(a,Rf(_)));let y=i.height;y!==void 0&&(Xr(a,56),cd(a,Rf(y)));let T=i.jpg;T!==void 0&&(Xr(a,66),Xr(a,T.length),gj(a,T));let A=i.networkType;A!==void 0&&(Xr(a,72),cd(a,Rf(A)));let D=i.osType;D!==void 0&&(Xr(a,80),cd(a,Rf(D)));let W=i.requestId;W!==void 0&&(Xr(a,90),sd(a,W));let F=i.sdkVersion;F!==void 0&&(Xr(a,98),sd(a,F));let U=i.sequence;U!==void 0&&(Xr(a,104),cd(a,Rf(U)));let z=i.sid;z!==void 0&&(Xr(a,114),sd(a,z));let X=i.timestamp;X!==void 0&&(Xr(a,120),cd(a,X));let ue=i.uid;ue!==void 0&&(Xr(a,128),Xr(a,ue));let pe=i.vid;pe!==void 0&&(Xr(a,136),Xr(a,pe));let Ee=i.width;Ee!==void 0&&(Xr(a,144),cd(a,Rf(Ee)));let Se=i.service;Se!==void 0&&(Xr(a,152),Xr(a,Se));let Re=i.callbackData;Re!==void 0&&(Xr(a,162),Xr(a,Re.length),gj(a,Re));let Ae=i.ticket;Ae!==void 0&&(Xr(a,170),sd(a,Ae));let Pe=i.vendorConfigs;Pe!==void 0&&(Xr(a,178),sd(a,Pe))}(t,n),function(i){let a=i.bytes,l=i.limit;return a.length===l?a:a.subarray(0,l)}(n)}function Npe(t){return function(i){let a={};e:for(;!Lpe(i);){let l=og(i);switch(l>>>3){case 0:break e;case 1:a.code=og(i);break;case 2:a.msg=vj(i,og(i));break;case 3:a.requestId=vj(i,og(i));break;case 4:a.timestamp=kpe(i,!1);break;default:Dpe(i,7&l)}}return a}({bytes:n=t,offset:0,limit:n.length});var n}function Dpe(t,n){switch(n){case 0:for(;128&tc(t););break;case 2:$I(t,og(t));break;case 5:$I(t,4);break;case 1:$I(t,8);break;default:throw new Error("Unimplemented type: "+n)}}function Rf(t){return{low:t|=0,high:t>>31,unsigned:t>=0}}let Ppe=[];function $I(t,n){if(t.offset+n>t.limit)throw new Error("Skip past limit");t.offset+=n}function Lpe(t){return t.offset>=t.limit}function _S(t,n){let i=t.bytes,a=t.offset,l=t.limit,u=a+n;if(u>i.length){let h=new Uint8Array(2*u);h.set(i),t.bytes=h}return t.offset=u,u>l&&(t.limit=u),a}function mj(t,n){let i=t.offset;if(i+n>t.limit)throw new Error("Read past limit");return t.offset+=n,i}function gj(t,n){let i=_S(t,n.length);t.bytes.set(n,i)}function vj(t,n){let i=mj(t,n),a=String.fromCharCode,l=t.bytes,u="�",h="";for(let f=0;f<n;f++){let g,_,y,T,A=l[f+i];128&A?(224&A)==192?f+1>=n?h+=u:(g=l[f+i+1],(192&g)!=128?h+=u:(T=(31&A)<<6|63&g,T<128?h+=u:(h+=a(T),f++))):(240&A)==224?f+2>=n?h+=u:(g=l[f+i+1],_=l[f+i+2],(49344&(g|_<<8))!=32896?h+=u:(T=(15&A)<<12|(63&g)<<6|63&_,T<2048||T>=55296&&T<=57343?h+=u:(h+=a(T),f+=2))):(248&A)==240?f+3>=n?h+=u:(g=l[f+i+1],_=l[f+i+2],y=l[f+i+3],(12632256&(g|_<<8|y<<16))!=8421504?h+=u:(T=(7&A)<<18|(63&g)<<12|(63&_)<<6|63&y,T<65536||T>1114111?h+=u:(T-=65536,h+=a(55296+(T>>10),56320+(1023&T)),f+=3))):h+=u:h+=a(A)}return h}function sd(t,n){let i=n.length,a=0;for(let h=0;h<i;h++){let f=n.charCodeAt(h);f>=55296&&f<=56319&&h+1<i&&(f=(f<<10)+n.charCodeAt(++h)-56613888),a+=f<128?1:f<2048?2:f<65536?3:4}Xr(t,a);let l=_S(t,a),u=t.bytes;for(let h=0;h<i;h++){let f=n.charCodeAt(h);f>=55296&&f<=56319&&h+1<i&&(f=(f<<10)+n.charCodeAt(++h)-56613888),f<128?u[l++]=f:(f<2048?u[l++]=f>>6&31|192:(f<65536?u[l++]=f>>12&15|224:(u[l++]=f>>18&7|240,u[l++]=f>>12&63|128),u[l++]=f>>6&63|128),u[l++]=63&f|128)}}function tc(t){return t.bytes[mj(t,1)]}function Ej(t,n){let i=_S(t,1);t.bytes[i]=n}function og(t){let n,i=0,a=0;do n=tc(t),i<32&&(a|=(127&n)<<i),i+=7;while(128&n);return a}function Xr(t,n){for(n>>>=0;n>=128;)Ej(t,127&n|128),n>>>=7;Ej(t,n)}function kpe(t,n){let i,a=0,l=0,u=0;return i=tc(t),a=127&i,128&i&&(i=tc(t),a|=(127&i)<<7,128&i&&(i=tc(t),a|=(127&i)<<14,128&i&&(i=tc(t),a|=(127&i)<<21,128&i&&(i=tc(t),l=127&i,128&i&&(i=tc(t),l|=(127&i)<<7,128&i&&(i=tc(t),l|=(127&i)<<14,128&i&&(i=tc(t),l|=(127&i)<<21,128&i&&(i=tc(t),u=127&i,128&i&&(i=tc(t),u|=(127&i)<<7))))))))),{low:a|l<<28,high:l>>>4|u<<24,unsigned:n}}function cd(t,n){let i=n.low>>>0,a=(n.low>>>28|n.high<<4)>>>0,l=n.high>>>24,u=l===0?a===0?i<16384?i<128?1:2:i<1<<21?3:4:a<16384?a<128?5:6:a<1<<21?7:8:l<128?9:10,h=_S(t,u),f=t.bytes;switch(u){case 10:f[h+9]=l>>>7&1;case 9:f[h+8]=u!==9?128|l:127&l;case 8:f[h+7]=u!==8?a>>>21|128:a>>>21&127;case 7:f[h+6]=u!==7?a>>>14|128:a>>>14&127;case 6:f[h+5]=u!==6?a>>>7|128:a>>>7&127;case 5:f[h+4]=u!==5?128|a:127&a;case 4:f[h+3]=u!==4?i>>>21|128:i>>>21&127;case 3:f[h+2]=u!==3?i>>>14|128:i>>>14&127;case 2:f[h+1]=u!==2?i>>>7|128:i>>>7&127;case 1:f[h]=u!==1?128|i:127&i}}const _j={},Sj={},SS=4294967296,yj=SS*SS,Cj=yj/2,HI=Tj(0,!0),bj=Tj(0),Mpe=wf(0,-2147483648,!1),Fpe=wf(-1,2147483647,!1),Upe=wf(-1,-1,!0);function Tj(t,n){let i,a,l;return n?(l=0<=(t>>>=0)&&t<256)&&(a=Sj[t],a)?a:(i=wf(t,0,!0),l&&(Sj[t]=i),i):(l=-128<=(t|=0)&&t<128)&&(a=_j[t],a)?a:(i=wf(t,t<0?-1:0,!1),l&&(_j[t]=i),i)}function wf(t,n,i){return{low:0|t,high:0|n,unsigned:!!i}}function Bpe(t,n){if(isNaN(t))return n?HI:bj;if(n){if(t<0)return HI;if(t>=yj)return Upe}else{if(t<=-Cj)return Mpe;if(t+1>=Cj)return Fpe}return t<0?n?HI:bj:wf(t%SS|0,t/SS|0,n)}function Rj(t,n){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),i.push.apply(i,a)}return i}class WI extends _r{get connectionState(){return this._connectionState}set connectionState(n){if(this._connectionState===n)return;const i=this._connectionState;this._connectionState=n,this.emit(Rc.CONNECTION_STATE_CHANGE,n,i)}get quality(){return this._quality}set quality(n){this._quality=n>1?1:n<.1?.1:n,this._qualityTimer&&(window.clearTimeout(this._qualityTimer),this._qualityTimer=null),this._quality>=1||(this._qualityTimer=window.setTimeout(()=>{this.quality=this._quality/this._qualityRatio},6e4))}constructor(n){var i;super(),V(this,"name","AgoraRTCImageModeration"),V(this,"_connectionState",ds.CONNECTING),V(this,"_sequence",0),V(this,"_moderationStartTime",void 0),V(this,"_workerConnection",void 0),V(this,"_workerMessageLengthLimit",void 0),V(this,"_qualityRatio",void 0),V(this,"_connectInfo",void 0),V(this,"_cancelTokenSource",Go.CancelToken.source()),V(this,"_retryConfig",void 0),V(this,"_moderationInterval",void 0),V(this,"_moderationTimer",null),V(this,"_moderationMode",1),V(this,"_quality",1),V(this,"_qualityTimer",null),V(this,"_ticket",void 0),V(this,"_moderationIntervalMinimum",void 0),V(this,"_uploadFailedNum",0),V(this,"_uploadNum",0),V(this,"_uploadTimer",null),V(this,"_extraInfo",void 0),V(this,"_vendor",""),V(this,"_encoder",new TextEncoder),V(this,"_moderationId",void 0),V(this,"inspectImage",()=>{if(this.connectionState!==ds.CONNECTED)throw new me(K.OPERATION_ABORTED,"image moderation service connection status is ".concat(this.connectionState));this._moderationTimer&&(window.clearInterval(this._moderationTimer),this._moderationTimer=null),this._moderationTimer=window.setInterval(()=>{this.connectionState===ds.CONNECTED?this.requestToInspectImage():k.debug("[".concat(this._moderationId,"] Moderation State is not connected , "),this.connectionState)},this._moderationInterval<this._moderationIntervalMinimum?this._moderationIntervalMinimum:this._moderationInterval),this.requestToInspectImage()}),this._moderationId=tr(5,"image-moderation-"),this._workerMessageLengthLimit=ee("IMAGE_MODERATION_WORKER_MESSAGE_LENGTH_LIMIT"),this._moderationIntervalMinimum=ee("IMAGE_MODERATION_INTERVAL_MINIMUM"),this._moderationInterval=(i=n.interval)!==null&&i!==void 0?i:1e3,n.extraInfo&&(this._extraInfo=this._encoder.encode(n.extraInfo)),n.vendor&&(this._vendor=n.vendor),this._qualityRatio=ee("IMAGE_MODERATION_QUALITY_RATIO"),this._moderationStartTime=Number(Date.now()),this._workerConnection=new T0("worker-"+this._moderationId,qr),this.on(Rc.STATE_CHANGE,(a,l)=>{k.debug("[".concat(this._moderationId,"] Moderation operation :").concat(Gp[a]," ").concat(l||""))}),this.handleWorkerEvents()}async init(n,i){this.emit(Rc.STATE_CHANGE,Gp.CONNECT_AP),this._connectInfo=n;const a=this._cancelTokenSource.token;return this._retryConfig=i,new We((l,u)=>{this.on(Rc.CONNECTION_STATE_CHANGE,(h,f)=>{h===ds.CONNECTED&&l()}),this.requestAP(n,a,i).then(h=>{this.connectWorker(h)}).catch(h=>{u(h)})})}updateConfig(n){var i;this._moderationInterval=(i=n.interval)!==null&&i!==void 0?i:1e3,n.extraInfo&&(this._extraInfo=this._encoder.encode(n.extraInfo)),n.vendor&&(this._vendor=n.vendor),k.debug("[".concat(this._moderationId,"] updateConfig: ").concat(JSON.stringify(n))),this.connectionState===ds.CONNECTED&&this.inspectImage()}async requestAP(n,i,a){const l=ee("WEBCS_DOMAIN").map(g=>"https://".concat(g,"/api/v1")),u=await function(g,_,y,T){let{appId:A,areaCode:D,cname:W,sid:F,token:U,uid:z}=_;Yp++;const X="moderation_plugin",ue={service_name:X,json_body:JSON.stringify({appId:A,areaCode:D,cname:W,command:"allocateEdge",requestId:Yp,seq:Yp,sid:F,appToken:U,ts:Date.now(),uid:z+""})};let pe,Ee,Se=g[0];return bc(async()=>{pe=Date.now();const Re=await Ic(Se,{data:ue,cancelToken:y,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"},params:{action:"wrtc_gateway"}});if(Ee=Date.now()-pe,Re.code!==0){const tt=new me(K.UNEXPECTED_RESPONSE,"moderation plugin ap error, code"+Re.code,{retry:!0,responseTime:Ee});throw k.error(tt.toString()),tt}const Ae=JSON.parse(Re.json_body);if(Ae.code!==200){const tt=new me(K.UNEXPECTED_RESPONSE,"moderation plugin ap error, code: ".concat(Ae.code,", reason: ").concat(Ae.reason),{code:Ae.code,responseTime:Ee});throw k.error(tt.toString()),tt}if(!Ae.servers||!Array.isArray(Ae.servers)||Ae.servers.length===0){const tt=new me(K.UNEXPECTED_RESPONSE,"moderation plugin ap empty server",{code:Ae.code,responseTime:Ee});throw k.error(tt.toString()),tt}if(!Ae.servers.some(tt=>!!tt.wss)){const tt=new me(K.UNEXPECTED_RESPONSE,"moderation plugin ap empty port",{code:Ae.code,responseTime:Ee});throw k.error(tt.toString()),tt}const Pe=ee("IMAGE_MODERATION_WORKER_HOST");return{addressList:Ae.servers.map(tt=>{let{address:ln,wss:Fn}=tt;if(ln&&Fn)return"wss://".concat(ln.replace(/\./g,"-"),".").concat(Pe,":").concat(Fn,"/moderation")}).filter(tt=>!!tt),workerToken:Ae.workerToken,vid:Ae.vid,ticket:Ae.appTicket,responseTime:Ee}},(Re,Ae)=>(ht.apworkerEvent(F,{success:!0,sc:200,serviceName:X,responseDetail:JSON.stringify(Re.addressList),firstSuccess:Ae===0,responseTime:Ee,serverIp:g[Ae%g.length]}),!1),(Re,Ae)=>(ht.apworkerEvent(F,{success:!1,sc:Re.data&&Re.data.code||200,serviceName:X,responseTime:Ee,serverIp:g[Ae%g.length]}),!!(Re.code!==K.OPERATION_ABORTED&&Re.code!==K.UNEXPECTED_RESPONSE||Re.data&&Re.data.retry)&&(Se=g[(Ae+1)%g.length],!0)),T)}(l,n,i,a);this.emit(Rc.STATE_CHANGE,Gp.AP_CONNECTED);const{addressList:h,ticket:f}=u;return this._ticket=f,h}async connectWorker(n){this.emit(Rc.STATE_CHANGE,Gp.CONNECT_WORKER),await this._workerConnection.init(n,1e4)}handleWorkerEvents(){this._workerConnection.on(kt.CONNECTED,async()=>{this.emit(Rc.STATE_CHANGE,Gp.WORKER_CONNECTED,this._workerConnection.url),this.connectionState=ds.CONNECTED}),this._workerConnection.on(kt.CLOSED,()=>{this.connectionState=ds.CLOSED}),this._workerConnection.on(kt.FAILED,()=>{this.connectionState=ds.CLOSED}),this._workerConnection.on(kt.RECONNECTING,()=>{this.connectionState=this.connectionState===ds.CONNECTED?ds.RECONNECTING:ds.CONNECTING}),this._workerConnection.on(kt.ON_MESSAGE,async n=>{if(n.data instanceof ArrayBuffer){const i=Npe(new Uint8Array(n.data));ee("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")&&k.debug("[".concat(this._moderationId,"] Response message for worker of image moderation "),JSON.stringify(i)),this._uploadNum++,i.code===void 0||i.code===0||(this._uploadFailedNum++,k.error("[".concat(this._moderationId,"] Error response from worke, code is ").concat(i.code,", msg is ").concat(i.msg)),this._uploadTimer||(this._uploadTimer=window.setTimeout(()=>{ht.reportApiInvoke(this._connectInfo.sid||null,{name:ni.IMAGE_MODERATION_UPLOAD,options:[this._uploadFailedNum,this._uploadNum,i.code],tag:Nr.TRACER}).onError(new me(K.IMAGE_MODERATION_UPLOAD_FAILED,i.msg)),this._uploadTimer=null},ee("IMAGE_MODERATION_UPLOAD_REPORT_INTERVAL"))))}else k.error("[".concat(this._moderationId,"] Unexpected message type from worker"))}),this._workerConnection.on(kt.WILL_RECONNECT,(n,i,a)=>{n==="recover"&&a(n),a("tryNext")}),this._workerConnection.on(kt.REQUEST_NEW_URLS,(n,i)=>{this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then(n).catch(i)})}static intToLong(n){return{low:n|=0,high:n>>31,unsigned:n>=0}}async requestToInspectImage(){const n=Ta(this,Rc.CLIENT_LOCAL_VIDEO_TRACK),i={appId:this._connectInfo.appId,cname:this._connectInfo.cname,cid:this._connectInfo.cid,sid:this._connectInfo.sid,uid:this._connectInfo.uid,vid:this._connectInfo.vid};if(n){if(!n.isPlaying)return void(ee("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")&&k.debug("Only the track being played can be inspected"));this._sequence++;const a=await this.generateRequestData(n,i);this._workerConnection.sendMessage(a,!0,!0)}else ee("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")&&k.debug("Only the track being published can be inspected")}async generateRequestData(n,i){let{appId:a,cname:l,cid:u,vid:h,sid:f,uid:g}=i;const _=Date.now(),y=await n.getCurrentFrameImage("image/jpeg",this.quality),T=await m5(y,a,l),A=this._sequence+"-"+u+"-"+g+"-"+_+"-"+tr(12,""),D={appId:a,cid:u,cname:l,deviceId:"",elapse:WI.intToLong(Number(_-this._moderationStartTime)),fileSize:y.buffer.byteLength,height:y.height,width:y.width,jpg:T,networkType:6,osType:7,requestId:A,sdkVersion:"4.21.0",sequence:this._sequence,sid:f,timestamp:Bpe(_),uid:g,vid:h,service:this._moderationMode,ticket:this._ticket,callbackData:this._extraInfo,vendorConfigs:this._vendor};this._extraInfo===void 0&&delete D.callbackData;const W=xpe(D);if(W.byteLength<this._workerMessageLengthLimit){if(ee("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")){const F=function(U){for(var z=1;z<arguments.length;z++){var X=arguments[z]!=null?arguments[z]:{};z%2?Rj(Object(X),!0).forEach(function(ue){V(U,ue,X[ue])}):Object.getOwnPropertyDescriptors?Object.defineProperties(U,Object.getOwnPropertyDescriptors(X)):Rj(Object(X)).forEach(function(ue){Object.defineProperty(U,ue,Object.getOwnPropertyDescriptor(X,ue))})}return U}({},D);delete F.jpg,k.debug("[".concat(this._moderationId,"] Request message for worker of image moderation service: "),JSON.stringify(F))}return W}{const F=this.quality*this._qualityRatio;return this.quality=F,await this.generateRequestData(n,{appId:a,cname:l,cid:u,vid:h,sid:f,uid:g})}}close(){this._cancelTokenSource.cancel(),this._cancelTokenSource=Go.CancelToken.source(),this._workerConnection&&this._workerConnection.close(),this._moderationTimer&&window.clearInterval(this._moderationTimer),this._moderationTimer=null,this._uploadTimer&&window.clearTimeout(this._uploadTimer),this._uploadTimer=null,this.connectionState=ds.CLOSED,this.emit(Rc.STATE_CHANGE,Gp.CLOSED)}}function wj(t,n){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),i.push.apply(i,a)}return i}function Ij(t){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?wj(Object(i),!0).forEach(function(a){V(t,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):wj(Object(i)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(i,a))})}return t}const Vpe=Date.now(),jpe=20,zI=new Map,yS=new Map;async function Aj(t){const n=zI.get(t),i=Array.isArray(n)&&n[n.length-1],a=yS.get(t);if(!i)return void(a.isSyncing=!1);const l={uid:i.uid,payload:i.payload};a.firstRecvTs===0&&(a.firstRecvTs=i.recvTs,a.firstSendTs=i.sendTs);const u=i.sendTs-a.firstSendTs,h=u-(Date.now()-a.firstRecvTs);h>0&&(a.firstRecvTs=Date.now()-u);let f=i.mediaDelay+h;f<=0?(n.pop(),Oj(i.context,l),f=0):f=Math.min(f,jpe),setTimeout(()=>n.length&&Aj(t),f)}function Oj(t,n){t.safeEmit(sn.STREAM_MESSAGE,n.uid,n.payload),t.onStreamMessage&&t.onStreamMessage(n)}function $pe(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0;if(!t.syncWithAudio)return Oj(i,{uid:t.uid,payload:t.payload});const a="".concat(i.id,"-").concat(t.uid),l=zI.get(a)||[],u=l.findIndex(_=>t.sendTs>=_.sendTs),h=Ij(Ij({},t),{},{context:i,mediaDelay:n,recvTs:Date.now()});u===-1?l.push(h):l.splice(u,0,h),zI.set(a,l);let f=!1;var g;yS.has(a)?f=!((g=yS.get(a))===null||g===void 0||!g.isSyncing):yS.set(a,{isSyncing:f,firstRecvTs:0,firstSendTs:0}),f||Aj(a)}const Hpe=_n().name;function xj(t,n){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),i.push.apply(i,a)}return i}function Nj(t){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?xj(Object(i),!0).forEach(function(a){V(t,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):xj(Object(i)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(i,a))})}return t}const If="websdk_ng_cache_parameter",Wpe=ee("MAX_PRELOAD_ASYNC_LENGTH"),zpe=1e4,Rh=new Map,wh=[];let GI=null,KI=0,qI=0;const CS=new Map,Gpe=function(t,n){const i=[];let a=0;const l=async()=>{const u=i.shift();u&&await u(),i.length>0&&a<n?l():a--};return async function(){for(var u=arguments.length,h=new Array(u),f=0;f<u;f++)h[f]=arguments[f];return new We(async(g,_)=>{i.push(async()=>{try{const y=await t(...h);g(y)}catch(y){_(y)}}),a<n&&(a++,l())})}}(Dj,Wpe),YI=Go.CancelToken.source();async function Dj(t,n,i,a,l){try{if(!ee("ENABLE_PRELOAD"))return;if(!un().supportWebCrypto)return void Bu(()=>{k.warn("Your browser does not support preloading, this feature  be run in a secure environment")},"preload_webcrypto_not_supported");if(!i&&i!==null)throw new Ce(K.INVALID_PARAMS,"Invalid token: ".concat(i,". If you don not use token, set it to null"));i&&Mi(i,"token",1,2047),Mi(t,"appid",1,2047),m_(n),a&&g_(a);const u=_0();k.debug("preload channel ".concat(n,", uid is ").concat(a));const h={appId:t,cname:n,token:i||t,uid:typeof a!="string"?a:null,sid:u,proxyServer:l};let f,g;typeof a=="string"?(h.stringUid=a,[g,f]=await We.all([pue(a,{sid:u,appId:t},YI.token),bB(Nj(Nj({},h),{},{token:i||t,uid:0}),YI.token)]),h.uid=g.uid,f.gatewayInfo.uid=h.uid,f.gatewayInfo.res.uid=h.uid):f=await bB(h,YI.token);const _={sid:u,appId:t,cname:n,token:i||t,uid:h.stringUid||a,intUid:h.uid||f.gatewayInfo.uid,stringUid:h.stringUid,ts:Date.now(),sua:g,ap:f};await async function(y){let T;try{y.uid&&Lj({appId:y.appId,cname:y.cname,token:y.token,uid:y.uid,stringUid:y.stringUid});const A=Uj(y),D=await async function(F,U){try{const z=await window.crypto.subtle.importKey("raw",I4(U),"AES-GCM",!1,["encrypt"]),X=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:new Uint8Array(1)},z,th(window.btoa(JSON.stringify(F))));return Vu(new Uint8Array(X))}catch{return}}(y,y.token||y.appId);if(!D)return;T=Fj(If);const W=T?JSON.parse(T):[];W.push({[A]:D}),W.length>ee("AP_CACHE_NUM")&&W.shift(),bS(If,JSON.stringify(W))}catch(A){k.warn("Error caching server parameters:",A.message),bS(If,"")}}(_),KI++}catch(u){throw qI++,function(h){GI||(GI=window.setTimeout(()=>{let g="";CS.forEach((_,y)=>{g+="".concat(y,": ").concat(_," ;")}),ht.reportApiInvoke(null,{name:ni.PRELOAD,options:{success:KI,failed:qI,err:g}}).onError(h),KI=0,qI=0,CS.clear(),GI=null},zpe));const f=CS.get(h.code)||0;CS.set(h.code,f+1)}(u),u}}async function Pj(t){try{const n=Lj(t);if(!n||t.cloudProxyServer!=="disabled")return;const i=await async function(a,l){try{const u=await window.crypto.subtle.importKey("raw",I4(l),"AES-GCM",!1,["decrypt"]),h=await window.crypto.subtle.decrypt({name:"AES-GCM",iv:new Uint8Array(1)},u,th(a));return JSON.parse(window.atob(Vu(new Uint8Array(h))))}catch{return}}(n,t.token||t.appId);if(!i||!function(a,l){return a.cname===l.cname&&a.appId===l.appId&&a.token===l.token?l.stringUid?a.stringUid===l.stringUid:typeof l.uid=="number"?a.uid===l.uid:a.uid==l.uid:!1}(i,t))return;if(i&&Date.now()-i.ts<ee("AP_CACHE_LIFETIME"))return i}catch(n){k.warn("Error get preloadInfo",n.message)}}function Lj(t){let n;try{if(n=Fj(If),!n)return;const i=JSON.parse(n),a=Uj(t),l=function(h,f){for(let g=h.length-1;g>=0;g--)if(f(h[g]))return g;return-1}(i,h=>a in h);if(l===-1)return;const u=i.splice(l,1)[0];return bS(If,JSON.stringify(i)),u[a]}catch(i){k.warn("Error delete preload info: ".concat(n),i.message),bS(If,"")}}function XI(t){if(t){let n=Rh.get(t);n&&(window.clearTimeout(n),n=null,Rh.delete(t)),Ye(wh).call(wh,t)||t.cloudProxyServer!=="disabled"||wh.push(t)}if(Rh.size<ee("AP_CACHE_NUM")&&wh.length>0){const n=wh.shift();Rh.set(n,window.setTimeout(async()=>{const{appId:i,cname:a,token:l,uid:u,proxyServer:h}=n;try{await Gpe(i,a,l,u,h),Rh.has(n)&&XI(n)}catch(f){k.warn("update preload failed",f.message),kj(n)}},ee("AP_UPDATE_INTERVAL")))}}function kj(t){const n=wh.indexOf(t);n!==-1&&wh.splice(n,1);let i=Rh.get(t);i&&(window.clearTimeout(i),i=null,Rh.delete(t),XI())}function Mj(t,n){const i=t.sua,a=t.ap;n&&i&&ht.reqUserAccount(t.sid,{lts:i.requestTime,elapse:i.elapse,success:!0,serverAddr:i.url,stringUid:n,uid:t.intUid,errorCode:null,extend:i.req}),ht.reportResourceTiming(t.ap.url,t.sid),ht.joinWebProxyAP(t.sid,{lts:a.requestTime,elapse:a.elapse,sucess:1,apServerAddr:a.url,turnServerAddrList:a.proxyInfo.addresses.map(l=>l.ip).join(","),eventType:"disabled",unilbsServerIds:[Yr.CHOOSE_SERVER,Yr.CLOUD_PROXY_FALLBACK].toString()}),ht.joinChooseServer(t.sid,{lts:a.requestTime,elapse:a.elapse,succ:!0,csAddr:a.url,opid:a.opid,serverList:a.gatewayInfo.gatewayAddrs.map(l=>l.address),ec:null,cid:a.gatewayInfo.cid.toString(),uid:a.gatewayInfo.uid.toString(),csIp:a.gatewayInfo.csIp,unilbsServerIds:[Yr.CHOOSE_SERVER].toString(),isHttp3:a.isHttp3})}function Fj(t){return window.atob(window.localStorage.getItem(t)||"")}function bS(t,n){window.localStorage.setItem(t,window.btoa(n))}function Uj(t){let n="".concat(t.appId,"_").concat(t.cname);return typeof t.uid=="string"&&(n+="_s_".concat(t.uid)),typeof t.uid=="number"&&(n+="_".concat(t.uid)),t.token&&(n+="_".concat(t.token)),L4(n)}var Bj,Vj,jj,$j,Hj,Wj,zj,Gj,Kj,qj,Yj,Xj,Jj,Qj,Zj,e8,t8,n8,r8,i8,o8,a8,s8,c8,l8,u8,d8,h8,p8,f8,m8,g8,v8,E8,_8,S8,y8,C8,b8,T8,R8,w8,Xe;function I8(t,n){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),i.push.apply(i,a)}return i}function vs(t){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?I8(Object(i),!0).forEach(function(a){V(t,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):I8(Object(i)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(i,a))})}return t}Oi.setLogger(k);let Kpe=(Bj=Rt(),Vj=Rt({argsMap:(t,n)=>{if(!Array.isArray(n)){if(!(n instanceof ff))return[n];n=[n]}return n.map(i=>i?Object(i).toString():"null")}}),jj=Rt({argsMap:(t,n)=>(n||(n=[]),n instanceof YV?[n.getChannelId()]:(Array.isArray(n)||(n=[n]),n.map(i=>i.getTrackId())))}),$j=Rt({argsMap:(t,n,i,a)=>[typeof n=="object"?n.uid:n,i,a]}),Hj=Rt({argsMap:(t,n,i)=>[n,i]}),Wj=Rt({argsMap:(t,n)=>n.map(i=>{let{user:a,mediaType:l}=i;return[a==null?void 0:a.uid,l]})}),zj=Rt({argsMap:(t,n,i,a)=>[typeof n=="object"?n.uid:n,i,a]}),Gj=Rt({argsMap:(t,n)=>n.map(i=>{let{user:a,mediaType:l}=i;return{uid:a==null?void 0:a.uid,mediaType:l}})}),Kj=Rt(),qj=Rt(),Yj=Rt(),Xj=Rt(),Jj=Rt(),Qj=Rt(),Zj=Rt(),e8=Rt(),t8=Rt(),n8=Rt(),r8=Rt(),i8=Rt(),o8=Rt(),a8=Rt(),s8=Rt({argsMap:(t,n)=>[n]}),c8=Rt(),l8=Rt(),u8=Rt(),d8=Rt(),h8=Rt(),p8=Rt(),f8=Rt(),m8=Rt(),g8=Rt(),v8=Rt(),E8=Rt({argsMap:(t,n)=>(Array.isArray(n)||(n=[n]),[JSON.stringify(n)])}),_8=Rt(),S8=Rt(),y8=Rt(),C8=Rt(),b8=Rt(),T8=Rt(),R8=Rt({reportResult:!0}),w8=Rt(),Xe=class extends _r{get connectionState(){return this._gateway.state}get remoteUsers(){return this._users}get localTracks(){return this._p2pChannel.getAllTracks(!0)}get uid(){return this._uid}get channelName(){return this._channelName}get localDataChannels(){return this._p2pChannel.getAllDataChannels()}get mode(){return this._config.mode}get role(){var t;return((t=this._config)===null||t===void 0?void 0:t.role)||"audience"}get codec(){return this._config.codec}get audioCodec(){return this._config.audioCodec||"opus"}get isStringUID(){return!!this._joinInfo&&!!this._joinInfo.stringUid}get __className__(){return"Client"}constructor(t){let n;if(super(),V(this,"store",void 0),V(this,"_uid",void 0),V(this,"_channelName",void 0),V(this,"_uintUid",void 0),V(this,"_users",[]),V(this,"_config",void 0),V(this,"_clientId",void 0),V(this,"_appId",void 0),V(this,"_sessionId",null),V(this,"_key",void 0),V(this,"_rtmConfig",{}),V(this,"_joinInfo",void 0),V(this,"_gateway",void 0),V(this,"_statsCollector",void 0),V(this,"_configDistribute",void 0),V(this,"_leaveMutex",new Oi("client-leave")),V(this,"_publishMutex",new Oi("client-publish")),V(this,"_renewTokenMutex",new Oi("client-renewtoken")),V(this,"_subscribeMutex",new Oi("client-subscribe")),V(this,"_encryptionMode","none"),V(this,"_encryptionSecret",null),V(this,"_encryptionSalt",null),V(this,"_encryptDataStream",!1),V(this,"_encryptDataStreamKey",null),V(this,"_encryptDataStreamIv",null),V(this,"_proxyServer",void 0),V(this,"_turnServer",{servers:[],mode:"auto"}),V(this,"_cloudProxyServerMode","disabled"),V(this,"_isDualStreamEnabled",!1),V(this,"_defaultStreamFallbackType",void 0),V(this,"_lowStreamParameter",void 0),V(this,"_streamFallbackTypeCacheMap",new Map),V(this,"_remoteStreamTypeCacheMap",new Map),V(this,"_axiosCancelSource",Go.CancelToken.source()),V(this,"_audioVolumeIndicationInterval",void 0),V(this,"_networkQualityInterval",void 0),V(this,"_userOfflineTimeout",void 0),V(this,"_streamRemovedTimeout",void 0),V(this,"_injectStreamingClient",void 0),V(this,"_liveTranscodeStreamingClient",void 0),V(this,"_liveRawStreamingClient",void 0),V(this,"_channelMediaRelayClient",void 0),V(this,"_networkQualitySensitivity","normal"),V(this,"_p2pChannel",void 0),V(this,"_useLocalAccessPoint",!1),V(this,"_setLocalAPVersion",void 0),V(this,"_joinAndNotLeaveYet",!1),V(this,"_numberOfJoinCount",0),V(this,"_remoteDefaultVideoStreamType",void 0),V(this,"_inspect",void 0),V(this,"_moderation",void 0),V(this,"_license",void 0),V(this,"_pendingPublishedUsers",[]),V(this,"ntpAlignErrorCount",0),V(this,"remoteInboundOffset",0),V(this,"_handleLocalTrackEnable",(i,a,l)=>{this.publish(i,!1).then(a).catch(l)}),V(this,"_handleLocalTrackDisable",(i,a,l)=>{this.unpublish(i).then(a).catch(l)}),V(this,"_handleUserOnline",i=>{if(ee("BLOCK_LOCAL_CLIENT")&&rh(i.uid,this.channelName))return void k.debug("[".concat(i.uid,"] will be ignored in local"));this.isStringUID&&typeof i.uid!="string"&&k.error("[".concat(this._clientId,"] StringUID is Mixed with UintUID"));const a=this._users.find(l=>l.uid===i.uid);if(a)a._trust_in_room_=!0,a._is_pre_created&&(a._is_pre_created=!1,this.safeEmit(sn.USER_JOINED,a));else{const l=new nd(i.uid,i.uint_id||i.uid);this._users.push(l),k.debug("[".concat(this._clientId,"] user online"),i.uid),this.safeEmit(sn.USER_JOINED,l)}}),V(this,"_handleUserOffline",i=>{if(ee("BLOCK_LOCAL_CLIENT")&&rh(i.uid,this.channelName))return;const a=this._users.find(l=>l.uid===i.uid);a&&(this._handleRemoveStream(i),this._handleRemoveDataChannels(i),a._audio_pre_subscribed||a._video_pre_subscribed?a._is_pre_created=!0:a_(this._users,a),this._remoteStreamTypeCacheMap.delete(a.uid),this._streamFallbackTypeCacheMap.delete(a.uid),k.debug("[".concat(this._clientId,"] user offline"),i.uid,"reason:",i.reason),this.safeEmit(sn.USER_LEAVED,a,i.reason))}),V(this,"_handleAddAudioOrVideoStream",(i,a,l,u,h,f,g)=>{if(ee("BLOCK_LOCAL_CLIENT")&&rh(a,this.channelName))return;const _=this._users.find(T=>T.uid===a);if(!_)return void k.error("[".concat(this._clientId,"] can not find target user!(on_add_stream)"));k.debug("[".concat(this._clientId,"] stream added with uid ").concat(a,", type ").concat(i)),this.store.subscribe(_.uid,i,void 0,void 0,void 0,Date.now());const y=i==="audio"?_.hasAudio:_.hasVideo;_._uintid||(_._uintid=h||a),i==="audio"?_._trust_audio_stream_added_state_=!0:_._trust_video_stream_added_state_=!0,i==="audio"?(_._audio_added_=!0,l!==void 0&&(_._audioSSRC=l),u!==void 0&&(_._cname=u),f&&(_._audioOrtc=f)):(_._video_added_=!0,l!==void 0&&(_._videoSSRC=l),u!==void 0&&(_._cname=u),g!==void 0&&(_._rtxSsrcId=g),f&&(_._videoOrtc=f)),(i==="audio"?_.hasAudio:_.hasVideo)&&!y&&(k.info("[".concat(this._clientId,"] remote user ").concat(_.uid," published ").concat(i)),this.safeEmit(sn.USER_PUBLISHED,_,i)),i==="video"?ht.onGatewayStream(this._sessionId,xi.ON_ADD_VIDEO_STREAM,Ir.ON_ADD_VIDEO_STREAM,{peer:h||a,ssrc:_._videoSSRC}):ht.onGatewayStream(this._sessionId,xi.ON_ADD_AUDIO_STREAM,Ir.ON_ADD_AUDIO_STREAM,{peer:h||a,ssrc:_._audioSSRC}),this._p2pChannel.remoteMediaSsrcChanged(_,i,l).then(T=>{if(T&&(k.debug("[".concat(this._clientId,"] resubscribe ").concat(i," for user ").concat(_.uid," after rejoin because SSRC id changed.")),this._p2pChannel instanceof vS))return this._p2pChannel.unsubscribe(_,i,!0).then(()=>this._subscribe(_,i,!0).catch(A=>{k.error("[".concat(this._clientId,"] resubscribe error"),A.toString())}))}),this._p2pChannel.hasPendingRemoteMedia(_,i)&&(k.debug("[".concat(this._clientId,"] resubscribe ").concat(i," for user ").concat(_.uid," after reconnect.")),this._subscribe(_,i,!0).catch(T=>{k.error("[".concat(this._clientId,"] resubscribe error"),T.toString())}))}),V(this,"_handleRemoveStream",i=>{if(ee("BLOCK_LOCAL_CLIENT")&&rh(i.uid,this.channelName))return;const a=this._users.find(u=>u.uid===i.uid);if(!a)return void k.warning("[".concat(this._clientId,"] can not find target user!(on_remove_stream)"));k.debug("[".concat(this._clientId,"] stream removed with uid ").concat(i.uid));let l=()=>{};a.hasAudio&&a.hasVideo?l=()=>{k.info("[".concat(this._clientId,"] remote user ").concat(a.uid," unpublished audio track")),this.safeEmit(sn.USER_UNPUBLISHED,a,"audio"),k.info("[".concat(this._clientId,"] remote user ").concat(a.uid," unpublished video track")),this.safeEmit(sn.USER_UNPUBLISHED,a,"video")}:a.hasVideo?l=()=>{k.info("[".concat(this._clientId,"] remote user ").concat(a.uid," unpublished video track")),this.safeEmit(sn.USER_UNPUBLISHED,a,"video")}:a.hasAudio&&(l=()=>{k.info("[".concat(this._clientId,"] remote user ").concat(a.uid," unpublished audio track")),this.safeEmit(sn.USER_UNPUBLISHED,a,"audio")}),a._video_pre_subscribed||a._audio_pre_subscribed||(a._trust_audio_stream_added_state_=!0,a._trust_video_stream_added_state_=!0,a._audio_added_=!1,a._video_added_=!1,this._p2pChannel instanceof vS&&this._p2pChannel.unsubscribe(a).then(u=>{if(u)return this._gateway.unsubscribe(u,a.uid)}),a._audioSSRC=void 0,a._videoSSRC=void 0,a._audioOrtc=void 0,a._videoOrtc=void 0,a._rtxSsrcId=void 0),ht.onGatewayStream(this._sessionId,xi.ON_REMOVE_STREAM,Ir.ON_REMOVE_STREAM,{peer:i.uint_id||i.uid}),l()}),V(this,"_handleSetStreamLocalEnable",(i,a,l)=>{if(ee("BLOCK_LOCAL_CLIENT")&&rh(a,this.channelName))return;const u=this._users.find(g=>g.uid===a);if(!u)return void k.error("[".concat(this._clientId,"] can not find target user!(disable_local)"));k.debug("[".concat(this._clientId,"] local ").concat(i," ").concat(l?"enabled":"disabled"," with uid ").concat(a));const h=i==="audio"?u.hasAudio:u.hasVideo;if(i==="audio"){u._trust_audio_enabled_state_=!0;const g=u._audio_enabled_;if(u._audio_enabled_=l,u._audio_enabled_===g)return;{const _=u._audio_enabled_?"enable-local-audio":"disable-local-audio";k.debug("[".concat(this._clientId,"] user-info-updated, uid: ").concat(a,", msg: ").concat(_)),this.safeEmit(sn.USER_INFO_UPDATED,a,_)}}else{u._trust_video_enabled_state_=!0;const g=u._video_enabled_;if(u._video_enabled_=l,u._video_enabled_===g)return;{const _=u._video_enabled_?"enable-local-video":"disable-local-video";k.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(a,", msg: ").concat(_)),this.safeEmit(sn.USER_INFO_UPDATED,a,_)}}const f=i==="audio"?u.hasAudio:u.hasVideo;return h!==f?!h&&f?(k.info("[".concat(this._clientId,"] remote user ").concat(a," published ").concat(i)),void this.safeEmit(sn.USER_PUBLISHED,u,i)):(i==="video"&&u._videoTrack&&u._videoTrack._destroy(),i==="audio"&&u._audioTrack,this._p2pChannel.muteRemote(u,i),k.info("[".concat(this._clientId,"] remote user ").concat(a," unpublished ").concat(i)),void this.safeEmit(sn.USER_UNPUBLISHED,u,i)):void 0}),V(this,"_handleMuteStream",(i,a,l)=>{if(ee("BLOCK_LOCAL_CLIENT")&&rh(i,this.channelName))return;k.debug("[".concat(this._clientId,"] receive mute message"),i,a,l);const u=this._users.find(g=>g.uid===i);if(!u)return void k.warning("[".concat(this._clientId,"] can not find remote user, ignore mute event, uid: ").concat(i));const h=a==="audio"?u.hasAudio:u.hasVideo;if(a==="audio"){u._trust_audio_mute_state_=!0;const g=u._audio_muted_;if(u._audio_muted_=l,u._audio_muted_===g)return;{const _=u._audio_muted_?"mute-audio":"unmute-audio";k.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(i,", msg: ").concat(_)),this.safeEmit(sn.USER_INFO_UPDATED,i,_)}}else{u._trust_video_mute_state_=!0;const g=u._video_muted_;if(u._video_muted_=l,u._video_muted_===g)return;{const _=u._video_muted_?"mute-video":"unmute-video";k.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(i,", msg: ").concat(_)),this.safeEmit(sn.USER_INFO_UPDATED,i,_)}}const f=a==="audio"?u.hasAudio:u.hasVideo;if(h!==f){if(!h&&f)return(a==="audio"?u._audioSSRC:u._videoSSRC)?(k.info("[".concat(this._clientId,"] remote user ").concat(i," published ").concat(a)),void this.safeEmit(sn.USER_PUBLISHED,u,a)):void k.warning("[".concat(this._clientId,"] remote user ").concat(i," receive ").concat(a," unmute message  before add stream message, ").concat(a," SSRC doesn't exist yet."));a==="video"&&u._videoTrack&&!u._video_pre_subscribed&&u._videoTrack._destroy(),a==="audio"&&u._audioTrack,this._p2pChannel.muteRemote(u,a),k.info("[".concat(this._clientId,"] remote user ").concat(i," unpublished ").concat(a)),this.safeEmit(sn.USER_UNPUBLISHED,u,a)}}),V(this,"_handleP2PLost",async i=>{k.debug("[".concat(this._clientId,"] receive p2p lost"),i),parseInt(i.p2pid,10)===this.store.p2pId?await this._p2pChannel.requestReconnect():k.warning("[".concat(this._clientId,"] P2PLost stream not found"),i)}),V(this,"_handleTokenWillExpire",()=>{k.debug("[".concat(this._clientId,"] received message onTokenPrivilegeWillExpire")),this.safeEmit(sn.ON_TOKEN_PRIVILEGE_WILL_EXPIRE)}),V(this,"_handleBeforeUnload",i=>{i.type==="beforeunload"&&i.returnValue!==void 0&&i.returnValue!==""||(this.leave(),k.info("[".concat(this._clientId,"] auto leave onbeforeunload or pagehide")))}),V(this,"_handleUpdateNetworkQuality",()=>{if(this._networkQualitySensitivity==="normal")return;if(navigator&&navigator.onLine!==void 0&&!navigator.onLine)return void this.safeEmit(sn.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6});const i={downlinkNetworkQuality:0,uplinkNetworkQuality:0};i.uplinkNetworkQuality=this._p2pChannel.getUplinkNetworkQuality(),i.downlinkNetworkQuality=this._p2pChannel.getDownlinkNetworkQuality(),this.safeEmit(sn.NETWORK_QUALITY,i)}),V(this,"_handleP2PAddAudioOrVideoStream",(i,a,l,u)=>{const h=this._users.find(g=>g.uid===a);if(!h)return void k.error("[".concat(this._clientId,"] can not find target user!(on_add_stream)"));k.debug("[".concat(this._clientId,"] stream added with uid ").concat(a,", type ").concat(i)),this.store.subscribe(h.uid,i,void 0,void 0,void 0,Date.now());const f=i==="audio"?h.hasAudio:h.hasVideo;i==="audio"?h._trust_audio_stream_added_state_=!0:h._trust_video_stream_added_state_=!0,i==="audio"?(h._audio_added_=!0,l!==void 0&&(h._audioSSRC=l),u!==void 0&&(h._audioMid=u)):(h._video_added_=!0,l!==void 0&&(h._videoSSRC=l),u!==void 0&&(h._videoMid=u)),(i==="audio"?h.hasAudio:h.hasVideo)&&!f&&(k.info("[".concat(this._clientId,"] remote user ").concat(h.uid," published ").concat(i)),this.safeEmit(sn.USER_PUBLISHED,h,i)),this._p2pChannel.hasPendingRemoteMedia(h,i)&&(k.debug("[".concat(this._clientId,"] resubscribe ").concat(i," for user ").concat(h.uid," after reconnect.")),this._subscribe(h,i,!0).catch(g=>{k.error("[".concat(this._clientId,"] resubscribe error"),g.toString())}))}),this._config=t,this._clientId=tr(5,"client-"),this.store=new Jce(t.codec,t.audioCodec,t.mode,this._clientId),this.store.clientCreated(),t.proxyServer&&this.setProxyServer(t.proxyServer,!0),t.turnServer&&this.setTurnServer(t.turnServer,!0),k.info("[".concat(this._clientId,"] Initializing AgoraRTC client v").concat(ls," build: ").concat(qw,", mode: ").concat(this.mode,", codec: ").concat(this.codec)),t.clientRoleOptions)try{R4(t.clientRoleOptions),n=Object.assign({},t.clientRoleOptions)}catch(i){k.warning("[".concat(this._clientId,"] ").concat(i.toString()))}this._statsCollector=new ng(this.store),this._statsCollector.onStatsException=(i,a,l)=>{k.debug("[".concat(this._clientId,"] receive exception msg, code: ").concat(i,", msg: ").concat(a,", uid: ").concat(l)),this.safeEmit(sn.EXCEPTION,{code:i,msg:a,uid:l})},this._statsCollector.onUploadPublishDuration=(i,a,l,u)=>{const h=this._users.find(f=>f.uid===i);h&&ht.peerPublishStatus(this._sessionId,{subscribeElapse:u,audioPublishDuration:a,videoPublishDuration:l,peer:h._uintid})},this.store.useDataChannel=un().supportDataChannel&&ee("SIGNAL_CHANNEL"),this.store.useP2P=t.mode==="p2p",this._gateway=new sue(this.store,{clientId:this._clientId,mode:this.mode,codec:this.codec,websocketRetryConfig:t.websocketRetryConfig||qr,httpRetryConfig:t.httpRetryConfig||qr,forceWaitGatewayResponse:t.forceWaitGatewayResponse===void 0||t.forceWaitGatewayResponse,statsCollector:this._statsCollector,role:t.role,clientRoleOptions:n}),this._configDistribute=new vue,this.store.useP2P?(this._p2pChannel=new Ia(this.store,this._statsCollector),this._handleP2PEvents()):this._p2pChannel=new vS(this.store,this._statsCollector),this._handleP2PChannelEvents(),this._handleGatewayEvents(),this._handleGatewaySignalEvents()}async joinMeta(t,n,i,a,l){let u=!(arguments.length>5&&arguments[5]!==void 0)||arguments[5],h=arguments.length>6&&arguments[6]!==void 0&&arguments[6];Jn("JOIN_GATEWAY_USE_443PORT_ONLY",u),Jn("JOIN_GATEWAY_USE_DUAL_DOMAIN",h);const f=this._gateway.signal.websocket;return f instanceof b0&&(f.use443PortOnly=u,f.tryDoubleDomain=h),async function(g,_,y){t_.get(g)||t_.set(g,[]),n_.get(g)||n_.set(g,_),cl.get(g)||cl.set(g,0);const T=t_.get(g),A=n_.get(g);if(!T||!A)throw new Error("concurrent: deferQueue or maxConcurrency is null");if(cl.get(g)===A){const z=m0();T.push(z),await z.promise}cl.set(g,cl.get(g)+1);for(var D=arguments.length,W=new Array(D>3?D-3:0),F=3;F<D;F++)W[F-3]=arguments[F];const U=await y(...W);return cl.set(g,cl.get(g)-1),cl.get(g)===A-1&&T.length>0&&(T[0].resolve(),T.shift()),cl.get(g)===0&&(t_.set(g,[]),n_.set(g,0),cl.set(g,0)),U}("client.join",ee("JOIN_MAX_CONCURRENCY"),this.join.bind(this),t,n,i,a,l)}async join(t,n,i,a,l){const u=++this._numberOfJoinCount;this.store.joinStart(),a&&(this.store.uid=a);const h=(d_||d_||(d_=(window.location.protocol.split(":")[0]||"").toUpperCase(),d_))==="HTTPS",f=k4()?window.isSecureContext:"Browser Not Support";if(!k4()&&!h||!window.isSecureContext){const F="The website must be running in a secure context (About secure context: https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts ), otherwise the media collection will be restricted by the browser";k.warning(F)}this.connectionState==="DISCONNECTED"&&(this.store.avoidJoinStart=Math.round(Date.now()),k.debug("[".concat(this._clientId,"] set avoidJoinStart to ").concat(this.store.avoidJoinStart))),ht.setAppId(t);try{if(!i&&i!==null)throw new me(K.INVALID_PARAMS,"Invalid token: ".concat(i,". If you don not use token, set it to null"));i&&Mi(i,"token",1,2047),Mi(t,"appid",1,2047),m_(n),a&&g_(a),l&&Mi(l,"optionalInfo",1,2047)}catch(F){throw ht.reportApiInvoke(_0(),{name:ni.JOIN,options:[t,n,i,a],states:{isHttps:h,isSecureContext:f},tag:Nr.TRACER}).onError(F),F}const g=await Pj({appId:t,cname:n,uid:a,stringUid:typeof a=="string"?a:void 0,token:i||t,cloudProxyServer:this._cloudProxyServerMode}),_=(g==null?void 0:g.sid)||_0(),y=ht.reportApiInvoke(_,{name:ni.JOIN,options:[t,n,i,a],states:{isHttps:h,isSecureContext:f},tag:Nr.TRACER});if(k.info("[".concat(this._clientId,"] start join channel ").concat(n,", join number: ").concat(u)),this._leaveMutex.isLocked&&(k.debug("[".concat(this._clientId,"] join: waiting leave operation")),(await this._leaveMutex.lock())(),k.debug("[".concat(this._clientId,"] join: continue"))),this._joinAndNotLeaveYet=!0,this.connectionState!=="DISCONNECTED"){const F=new me(K.INVALID_OPERATION,"[".concat(this._clientId,"] Client already in connecting/connected state"));throw y.onError(F),F}this._sessionId||(this._sessionId=_,this.store.sessionId=this._sessionId),this._gateway.state="CONNECTING";const T=vs(vs({},this._rtmConfig),{},{clientId:this._clientId,appId:t,sid:this._sessionId,cname:n,uid:typeof a!="string"?a:null,turnServer:this._turnServer,proxyServer:this._proxyServer,token:i||t,cloudProxyServer:this._cloudProxyServerMode,optionalInfo:l,license:this._license,useLocalAccessPoint:this._useLocalAccessPoint,preload:!!g},this._remoteDefaultVideoStreamType!==void 0&&{defaultVideoStream:this._remoteDefaultVideoStreamType});if(this._useLocalAccessPoint&&(T.setLocalAPVersion=this._setLocalAPVersion),typeof a=="string"&&(T.stringUid=a,this._uintUid?(T.uid=this._uintUid,this._uintUid=void 0):T.uid=0),this._encryptionMode!=="none"&&this._encryptionSecret){if(T.aesmode=this._encryptionMode,T.aespassword=await(async F=>{const U=function(pe){const Ee=window.atob(`MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDCMnXAHkKIGAM+x4N22gCI+Wyu
STM9ztkT3uYslTT2PuKmZfPzhH6kVdO7PTjGCOZnAsyb3oTtWat0KcxQ4jxvqQV+
HvYl3iI1Yd4vl2c3qRMJPLtRDfNxa2Mcxgq7e9aEUibzdd0st+OJAy3tOj/Y0aVy
xQiYDz3vqa6bP29adwIDAQAB`),Se=new Uint8Array(new ArrayBuffer(Ee.length));for(let Re=0;Re<Ee.length;Re+=1)Se[Re]=Ee.charCodeAt(Re);return Se}(),z=await window.crypto.subtle.importKey("spki",U,{name:"RSA-OAEP",hash:"SHA-256"},!0,["encrypt"]),X=Bw(F),ue=await window.crypto.subtle.encrypt({name:"RSA-OAEP"},z,X);return function(pe){let Ee="";for(let Se=0;Se<pe.length;Se+=1)Ee+=String.fromCharCode(pe[Se]);return window.btoa(Ee)}(new Uint8Array(ue))})(this._encryptionSecret),!this._joinAndNotLeaveYet)throw new me(K.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));this._encryptionSalt&&(T.aessalt=this._encryptionSalt)}if(this._encryptDataStream&&(this._encryptionMode==="aes-128-gcm2"||this._encryptionMode==="aes-256-gcm2"))if(this._encryptionSalt&&this._encryptionSecret)if(window.crypto.subtle){const F=new TextEncoder,U=ee("USE_PURE_ENCRYPTION_MASTER_KEY")?F.encode(T.appId+this._encryptionSecret+this._encryptionSecret):F.encode(T.appId+T.cname+this._encryptionSecret);this._encryptDataStreamIv=await async function(z,X,ue){const pe=await window.crypto.subtle.importKey("raw",X,"PBKDF2",!1,["deriveBits","deriveKey"]),Ee=z==="aes-128-gcm2"?128:256,Se=await window.crypto.subtle.deriveBits({name:"PBKDF2",iterations:F4,hash:"SHA-256",salt:ue},pe,Ee+Qce);return new Uint8Array(Se).subarray(Ee/8)}(this._encryptionMode,U,th(this._encryptionSalt)),this._encryptDataStreamKey=await async function(z,X,ue){const pe=await window.crypto.subtle.importKey("raw",X,"PBKDF2",!1,["deriveBits","deriveKey"]),Ee=z==="aes-128-gcm2"?128:256;return await window.crypto.subtle.deriveKey({name:"PBKDF2",iterations:F4,hash:"SHA-256",salt:ue},pe,{name:"AES-GCM",length:Ee},!0,["encrypt","decrypt"])}(this._encryptionMode,U,th(this._encryptionSalt))}else f?k.warning("[".concat(this._clientId,"] encrypt datastream must be running in a secure context, fallback to plain data stream")):k.warning("[".concat(this._clientId,"] current browser do not support WebCrypto ,fallback to plain data stream")),this._encryptDataStream=!1;else this._encryptDataStream=!1,k.debug("[".concat(this._clientId,"] no salt / secret, cannot support encrypt data stream, fallback to plain data stream"));this._startSession(this._sessionId,{channel:n,appId:t,stringUid:T.stringUid,preload:T.preload});const A=this._sessionId;setTimeout(()=>{this.connectionState==="CONNECTING"&&A===this._sessionId&&ht.joinChannelTimeout(this._sessionId,5)},5e3);try{var D;let F;const U=T.cloudProxyServer;if(Ye(D=["proxy3","proxy4","proxy5"]).call(D,U)){const Ee=ee("PROXY_SERVER_TYPE3");Array.isArray(Ee)?T.proxyServer=Ee[0]:T.proxyServer=Ee}if(ht.setProxyServer(T.proxyServer),k.setProxyServer(T.proxyServer),this.store.requestAPStart(),g){if(k.debug("[".concat(this._clientId,"] get serverInfo Success from Preload Cache ").concat(T.stringUid?", ".concat(T.stringUid," => ").concat(g.intUid):""," ")),T.stringUid&&!T.uid&&(T.uid=g.intUid),F={gatewayInfo:g.ap.gatewayInfo},ee("JOIN_WITH_FALLBACK_MEDIA_PROXY")&&T.turnServer.mode==="auto")if(g.ap.proxyInfo.addresses.length===0)k.warning("no edge services in ap response of proxy fallback, will not set proxy in iceServers");else{const Ee=(await lB(g.ap.proxyInfo,g.ap.gatewayInfo.uid)).map(Se=>({turnServerURL:Se.address,tcpport:Se.tcpport||Gi.tcpport,udpport:Se.udpport||Gi.udpport,username:Se.username||Gi.username,password:Se.password||Gi.password,forceturn:!1,security:!0}));T.turnServer={mode:"manual",servers:Ee}}Mj(g,T.stringUid)}else{if(T.stringUid&&!T.uid){let Ee;[Ee,F]=await We.all([CB(T.stringUid,T,this._axiosCancelSource.token,this._config.httpRetryConfig||qr,this.store),yB(T,this._axiosCancelSource.token,this._config.httpRetryConfig||qr,!0,this.store)]),k.debug("[".concat(this._clientId,"] getUserAccount Success ").concat(T.stringUid," => ").concat(Ee)),T.uid=Ee,F.gatewayInfo.uid=Ee,F.gatewayInfo.res.uid=Ee}else F=await yB(T,this._axiosCancelSource.token,this._config.httpRetryConfig||qr,!0,this.store);if(!this._joinAndNotLeaveYet)throw new me(K.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"))}this.store.requestAPEnd(),setTimeout(()=>{this._configDistribute.startGetConfigDistribute(T,this._axiosCancelSource.token),this._configDistribute.on(i1.UPDATE_BITRATE_LIMIT,Ee=>{this._p2pChannel.updateBitrateLimit(Ee)})},0),this._key=i||t;const z=F.gatewayInfo,X=T.uid?T.uid:z.uid;this._joinInfo=vs(vs({},T),{},{cid:z.cid,uid:X,vid:z.vid,apResponse:z.res,uni_lbs_ip:z.uni_lbs_ip,gatewayAddrs:z.gatewayAddrs}),this.store.intUid=X;const ue=await this._joinGateway();if(!this._joinAndNotLeaveYet)throw new me(K.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));y.onSuccess(ue),this._appId=t,this._channelName=T.cname,this._uid=ue,this.store.uid=ue,setTimeout(()=>{this._networkQualityInterval&&window.clearInterval(this._networkQualityInterval),this._networkQualityInterval=window.setInterval(this._handleUpdateNetworkQuality,2e3),window.addEventListener(Si()?"beforeunload":"pagehide",this._handleBeforeUnload),this._statsCollector.startUpdateStats()},0);const pe=T.stringUid?"string uid: ".concat(T.stringUid,",uid: ").concat(T.uid):"uid: ".concat(this._uid);return k.info("[".concat(this._clientId,"] Joining channel success: channel: ").concat(n,",").concat(pe)),setTimeout(()=>{k.startUpload()},5e3),this.store.joinEnd(),W=this,Ye($u).call($u,W)||$u.push(W),this._cloudProxyServerMode==="disabled"&&un().supportWebCrypto&&ee("ENABLE_PRELOAD")&&XI(this._joinInfo),ue}catch(F){const U=Array.isArray(F)?F[0]:F;throw U&&U.code===K.OPERATION_ABORTED?k.warning("[".concat(this._clientId,"] join number: ").concat(u,", Joining channel failed, rollback"),U):k.error("[".concat(this._clientId,"] join number: ").concat(u,", Joining channel failed, rollback"),U),U.code!==K.OPERATION_ABORTED&&this._numberOfJoinCount===u&&(this._gateway.state="DISCONNECTED",this._reset()),y.onError(U),U}var W}_joinGateway(){if(!this._joinInfo||!this._key)throw new me(K.INVALID_OPERATION);return this._gateway.join(this._joinInfo,this._key,!(this._joinInfo.cloudProxyServer!=="disabled"||this._joinInfo.proxyServer||!ee("JOIN_WITH_FALLBACK_SIGNAL_PROXY"))).then(t=>t).catch(t=>{if(t.code===K.INIT_WEBSOCKET_TIMEOUT)return this._gateway.leave(!0,an.FALLBACK),t;if(t.code===K.INIT_DATACHANNEL_TIMEOUT)return this._gateway.leave(!0,an.FALLBACK),t;throw t}).then(t=>{if(t instanceof me){if(t.code===K.INIT_WEBSOCKET_TIMEOUT){if(k.info("[".concat(this._clientId,"] join timeout, fallback to proxy")),!this._joinInfo||!this._key)throw new me(K.INVALID_OPERATION);this._joinInfo.cloudProxyServer="fallback",this._cloudProxyServerMode="fallback",this.store.cloudProxyServerMode="fallback";const n=ee("PROXY_SERVER_TYPE3");if(Array.isArray(n))if(this._joinInfo.apUrl){const a=/^https?:\/\/(.+?)(\/.*)?$/.exec(this._joinInfo.apUrl)[1].split("."),l=a.slice(a.length-2).join(".");n.forEach(u=>{this._joinInfo&&Ye(u).call(u,l)&&(this._joinInfo.proxyServer=u)}),this._joinInfo.proxyServer||(this._joinInfo.proxyServer=n[0])}else this._joinInfo.proxyServer=n[0];else this._joinInfo.proxyServer=n;const i=ee("LOG_UPLOAD_SERVER").match(/.+:(\d{1,5})$/);return i&&i[1]&&i[1]!=="443"&&k.setProxyServer(this._joinInfo.proxyServer),ee("STATS_COLLECTOR_PORT").toString()!=="443"&&ht.setProxyServer(this._joinInfo.proxyServer),ht.reportApiInvoke(this._sessionId,{name:ni.JOIN_FALLBACK_TO_PROXY,options:[this._joinInfo.proxyServer],tag:Nr.TRACER}).onSuccess(),this.safeEmit(sn.JOIN_FALLBACK_TO_PROXY,this._joinInfo.proxyServer),ee("JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE")&&this._joinInfo.turnServer.servers.forEach(a=>{"forceturn"in a&&(a.forceturn=!0)}),this._gateway.join(this._joinInfo,this._key)}if(k.info("[".concat(this._clientId,"] join by datachannel timeout, fallback to websocket")),!this._joinInfo||!this._key)throw new me(K.INVALID_OPERATION);return ht.reportApiInvoke(this._sessionId,{name:ni.DATACHANNEL_FAILBACK,options:[this.store.clientId],tag:Nr.TRACER}).onSuccess(),this._joinGateway()}return t}).then(t=>t)}async leave(){k.info("[".concat(this._clientId,"] Leaving channel")),window.removeEventListener(Si()?"beforeunload":"pagehide",this._handleBeforeUnload),this._reset(),function(n){const i=$u.indexOf(n);i!==-1&&$u.splice(i,1)}(this),this._statsCollector.stopUpdateStats();const t=await this._leaveMutex.lock();if(this.connectionState==="DISCONNECTED")return k.info("[".concat(this._clientId,"] Leaving channel repeated, success")),void t();await this._gateway.leave(this.connectionState!=="CONNECTED"),k.info("[".concat(this._clientId,"] Leaving channel success")),this._joinAndNotLeaveYet=!1,this.store.resetJoinChannelServiceRecords(),t()}async publish(t){let n=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(!Array.isArray(t)){if(!(t instanceof ff))return this._publishDataChannel(t);t=[t]}if(t.length===0)throw new me(K.INVALID_PARAMS,"param list is empty");const i=t;if(this._gateway.role==="audience")throw new me(K.INVALID_OPERATION,"audience can not publish stream");for(const l of i){if(!(l instanceof ff))throw new me(K.INVALID_PARAMS,"parameter is not local track");if(!l._enabled&&n)throw new me(K.TRACK_IS_DISABLED,"can not publish a disabled track: ".concat(l.getTrackId()))}k.info("[".concat(this._clientId,"] Publishing tracks, id ").concat(i.map(l=>"".concat(l.getTrackId()," "))));const a=await this._publishMutex.lock();await this._configDistribute.awaitConfigDistributeComplete(),n&&i.forEach(l=>{const u=this._configDistribute.getBitrateLimit();l instanceof nr&&u&&l.setBitrateLimit(u.uplink)});try{await this._publishHighStream(i),k.info("[".concat(this._clientId,"] Publish success, id ").concat(i.map(l=>"".concat(l.getTrackId()," "))))}catch(l){throw k.error("[".concat(this._clientId,"] publish error"),l.toString()),l}finally{a()}}async _publishDataChannel(t){Xn(t.id,"id",0,65535,!0),$l(t.ordered,"ordered"),Mi(t.metadata,"metadata",0,512),k.info("[".concat(this._clientId,"] Publishing datachannels, id ").concat(t.id));const n=await this._publishMutex.lock();try{if(this._p2pChannel.getAllDataChannels().findIndex(a=>a.id===t.id)!==-1)throw new me(K.INVALID_PARAMS,"Invalid id: ".concat(t.id,". If you want to republish the datachannel, unpublish first"));if(!this._joinInfo||this._uid===void 0)throw new me(K.INVALID_OPERATION,"Can't publish datachannel, haven't joined yet!");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new me(K.INVALID_OPERATION,"can not publish datachannel in ".concat(this.connectionState," state"));if(this._turnServer.mode==="auto"&&ee("FORCE_TURN")&&!ee("TURN_ENABLE_TCP")&&!ee("TURN_ENABLE_UDP"))throw new me(K.UNEXPECTED_ERROR,"force TURN With No TURN Configuration");const i=new YV(t);if(await this._p2pChannel.publishDataChannel([i]),!this._p2pChannel.isP2PDisconnected()){if(typeof i._originDataChannelId!="number")throw k.error("[".concat(this._clientId,"] can not publish with mediaType datachannel, cannot get RTCDatachannel id")),new me(K.CREATE_DATACHANNEL_ERROR);try{const a={streamId:t.id,ordered:t.ordered,maxRetransmits:ee("DATASTREAM_MAX_RETRANSMITS"),metadata:t.metadata,channelId:i._originDataChannelId};await this._gateway.publishDataChannel(this._uid,a,!0),await i._waitTillOpen()}catch(a){if(a.code!==K.DISCONNECT_P2P)throw a}}return k.info("[".concat(this._clientId,"] Publish dataChannels success, id ").concat(i.id)),i}catch(i){throw k.error("[".concat(this._clientId,"] publish datachannels error"),i.toString()),i}finally{n()}}async unpublish(t){if(!this._joinInfo||this._uid===void 0)throw new me(K.INVALID_OPERATION,"Can't unpublish stream, haven't joined yet!");let n=[];if(t)if(Array.isArray(t))n=t;else{if(!(t instanceof ff))return this._unpublishDataChannel([t]);n=[t]}else this.store.useP2P||await this._unpublishDataChannel(),n=this._p2pChannel.getAllTracks(!0);k.info("[".concat(this._clientId,"] Unpublish tracks, tracks ").concat(n.map(a=>"".concat(a.getTrackId()," "))," "));const i=await this._publishMutex.lock();try{if(this._p2pChannel instanceof Ia){const a=await this._p2pChannel.unpublish(n);a&&await this._gateway.sendExtensionMessage(Wr.UNPUBLISH,{unpubMsg:a},!0)}else{const a=await this._p2pChannel.unpublish(n);a&&await this._gateway.unpublish(a,this._uid),k.info("[".concat(this._clientId,"] Unpublish success,tracks ").concat(n.map(l=>"".concat(l.getTrackId()))))}}catch(a){throw k.error("[".concat(this._clientId,"] unpublish error"),a.toString()),a}finally{i&&i()}}async _unpublishDataChannel(t){t!==void 0&&t.length!==0||(t=this._p2pChannel.getAllDataChannels()),k.info("[".concat(this._clientId,"] Unpublish datachannels, datachannels ").concat(t.map(i=>"".concat(i.id," "))," "));const n=await this._publishMutex.lock();try{const i=await this._p2pChannel.unpublishDataChannel(t);i&&await this._gateway.unpublishDataChannel(i),k.info("[".concat(this._clientId,"] Unpublish dataChannel success,dataChannel ").concat(t.map(a=>"".concat(a.id))))}catch(i){throw k.error("[".concat(this._clientId,"] unpublish dataChannel error"),i.toString()),i}finally{n&&n()}}async subscribe(t,n,i){if(!(t instanceof nd)){const a=this.remoteUsers.find(l=>l.uid===t);if(!a)throw new me(K.INVALID_REMOTE_USER,"user is not in the channel");t=a}return n==="datachannel"?this._subscribeDataChannel(t,i):this._subscribe(t,n)}async presubscribe(t,n){if(pi(n,"mediaType",["audio","video"]),this._p2pChannel instanceof Ia)throw new me(K.INVALID_OPERATION,"can't presub at p2p mode");if(!this._joinInfo)throw new me(K.INVALID_OPERATION,"can't presub when not join");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new me(K.INVALID_OPERATION,"can't presub in ".concat(this.connectionState," state"));const i=n===ut.AUDIO,a=n===ut.VIDEO,l=await this._subscribeMutex.lock();try{const{ssrcId:u,ortc:h,rtxSsrcId:f,cname:g,uint_id:_}=await this._gateway.presubscribe(t,n,!0);if(u==null)throw new me(K.UNEXPECTED_RESPONSE,"no ssrc id");let y=this._users.find(A=>A.uid===t);y||(y=new nd(t,_||t),y._is_pre_created=!0,this._users.push(y)),g&&(y._cname=g),y._uintid||(y._uintid=_||t),i&&(y._audioSSRC=u,y._audio_pre_subscribed=!0,h&&(y._audioOrtc=h)),a&&(y._videoSSRC=u,y._video_pre_subscribed=!0,h&&(y._videoOrtc=h),f!=null&&(y._rtxSsrcId=f)),k.info("[".concat(this._clientId,"] presub succeed ssrc: ").concat(u)),await this._p2pChannel.subscribe(y,n,u,f,h);const T=i?y._audioTrack:y._videoTrack;if(!T)throw new me(K.UNEXPECTED_ERROR,"can not find remote track in user");return i&&(y._trust_audio_stream_added_state_=!0,y._audio_added_=!0),a&&(y._trust_video_stream_added_state_=!0,y._video_added_=!0),T}catch(u){throw k.error("[".concat(this._clientId,"] presub user ").concat(t," error"),u),u}finally{l()}}async _subscribeDataChannel(t,n){var i;if(Xn(n,"channelId",0,65535,!0),!this._joinInfo)throw new me(K.INVALID_OPERATION,"Can't subscribe datachannel, not joined");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new me(K.INVALID_OPERATION,"Can't subscribe datachannel in ".concat(this.connectionState," state"));if(!this._users.find(f=>f===t))throw k.error("[".concat(this._clientId,"] can not subscribe ").concat(t.uid,", this user is not in the channel")),new me(K.INVALID_REMOTE_USER,"user is not in the channel");if(!t.hasAudio&&!t.hasVideo&&t._dataChannels.length===0)throw k.error("[".concat(this._clientId,"] can not subscribe ").concat(t.uid,", user is not published")),new me(K.INVALID_REMOTE_USER,"user is not published");const l=(i=t._dataChannels)===null||i===void 0?void 0:i.find(f=>f.id===n);if(!l)throw k.error("[".concat(this._clientId,"] can not subscribe ").concat(t.uid," with mediaType datachannel, remote datachannel is not published")),new me(K.REMOTE_USER_IS_NOT_PUBLISHED);const u=await this._subscribeMutex.lock();k.info("[".concat(this._clientId,"] subscribe user ").concat(t.uid,", mediaType: datachannel"));try{const f=await this._p2pChannel.subscribeDataChannel(t,[l]);if(f&&Ye(f).call(f,l.id))try{var h;if(typeof l._originDataChannelId!="number")throw k.error("[".concat(this._clientId,"] can not subscribe ").concat(t.uid," with mediaType datachannel, cannot get RTCDatachannel")),new me(K.CREATE_DATACHANNEL_ERROR);const g={id:l.id,datachannelId:l._originDataChannelId,ordered:l.ordered,maxRetransmits:l.maxRetransmits,metadata:(h=l.metadata)!==null&&h!==void 0?h:""};await this._gateway.subscribeDataChannel(t.uid,g,!0),await l._waitTillOpen()}catch(g){if((g==null?void 0:g.code)!==K.WS_ABORT)throw await this._p2pChannel.unsubscribeDataChannel(t,[l]),g;await this._p2pChannel.unsubscribeDataChannel(t,[l]),this._p2pChannel.setPendingRemoteDataChannel(t,l.id)}return k.info("[".concat(this._clientId,"] subscribe success user ").concat(t.uid,", mediaType: datachannel")),l}finally{u()}}async _p2pSubscribe(t,n,i){if(pi(n,"mediaType",["audio","video"]),!this._joinInfo)throw new me(K.INVALID_OPERATION,"Can't subscribe stream, not joined");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new me(K.INVALID_OPERATION,"Can't subscribe stream in ".concat(this.connectionState," state"));if(!this._users.find(u=>u===t)){const u=new me(K.INVALID_REMOTE_USER,"user is not in the channel");throw k.error("[".concat(this._clientId,"] can not subscribe ").concat(t.uid,", this user is not in the channel")),u}if(!t.hasAudio&&!t.hasVideo){const u=new me(K.INVALID_REMOTE_USER,"user is not published");throw k.error("[".concat(this._clientId,"] can not subscribe ").concat(t.uid,", user is not published")),u}if(!i&&(n==="audio"&&!t.hasAudio||n==="video"&&!t.hasVideo)){const u=new me(K.REMOTE_USER_IS_NOT_PUBLISHED);throw k.error("[".concat(this._clientId,"] can not subscribe ").concat(t.uid," with mediaType ").concat(n,", remote track is not published")),u}const l=await this._subscribeMutex.lock();k.info("[".concat(this._clientId,"] subscribe user ").concat(t.uid,", mediaType: ").concat(n));try{if(await this._p2pChannel.hasRemoteMediaWithLock(t,n))await this._p2pChannel.unmuteRemote(t,n);else try{const h=n==="audio"?t._audioSSRC:t._videoSSRC,f=n==="audio"?t._audioMid:t._videoMid;this.store.subscribe(t.uid,n,Date.now()),this._p2pChannel instanceof Ia&&await this._p2pChannel.subscribe(t,n,h,f)}catch(h){throw h}k.info("[".concat(this._clientId,"] subscribe success user ").concat(t.uid,", mediaType: ").concat(n)),this._defaultStreamFallbackType&&this.setStreamFallbackOption(t.uid,this._defaultStreamFallbackType).catch(h=>{k.warning("[".concat(this._clientId,"] auto set fallback failed"),h)});const u=n==="audio"?t._audioTrack:t._videoTrack;if(!u)throw new me(K.UNEXPECTED_ERROR,"can not find remote track in user object");return u}catch(u){throw k.error("[".concat(this._clientId,"] subscribe user ").concat(t.uid," error"),u),u}finally{l()}}async _subscribe(t,n,i){if(this._p2pChannel instanceof Ia)return this._p2pSubscribe(t,n);if(pi(n,"mediaType",["audio","video"]),!this._joinInfo)throw new me(K.INVALID_OPERATION,"Can't subscribe stream, not joined");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new me(K.INVALID_OPERATION,"Can't subscribe stream in ".concat(this.connectionState," state"));if(!this._users.find(_=>_===t)){const _=new me(K.INVALID_REMOTE_USER,"user is not in the channel");throw k.error("[".concat(this._clientId,"] can not subscribe ").concat(t.uid,", this user is not in the channel")),_}if(!t.hasAudio&&!t.hasVideo){const _=new me(K.INVALID_REMOTE_USER,"user is not published");throw k.error("[".concat(this._clientId,"] can not subscribe ").concat(t.uid,", user is not published")),_}if(!(i||(n!=="audio"||t.hasAudio&&t._audioSSRC!==void 0)&&(n!=="video"||t.hasVideo&&t._videoSSRC!==void 0))){const _=new me(K.REMOTE_USER_IS_NOT_PUBLISHED);throw k.error("[".concat(this._clientId,"] can not subscribe ").concat(t.uid," with mediaType ").concat(n,", remote track is not published")),_}let l=n==="audio"?t._audioSSRC:t._videoSSRC,u=n==="audio"?t._audioOrtc:t._videoOrtc,h=n==="video"?t._rtxSsrcId:void 0,f={stream_type:n==="audio"?ut.AUDIO:ut.VIDEO,ssrcId:l};const g=await this._subscribeMutex.lock();k.info("[".concat(this._clientId,"] subscribe user ").concat(t.uid,", mediaType: ").concat(n));try{if(await this._p2pChannel.hasRemoteMediaWithLock(t,n))await this._p2pChannel.unmuteRemote(t,n);else try{const y=n==="audio"?t._audioSSRC:t._videoSSRC;y!==void 0&&y!==l&&(l=y,u=n==="audio"?t._audioOrtc:t._videoOrtc,h=n==="video"?t._rtxSsrcId:void 0,f={stream_type:n==="audio"?ut.AUDIO:ut.VIDEO,ssrcId:l}),Zi.markSubscribeStart(this.store.clientId,l),this.store.subscribe(t.uid,n,Date.now()),await this._p2pChannel.subscribe(t,n,l,h,u);try{await this._gateway.subscribe(t.uid,f,!0)}catch(T){if((T==null?void 0:T.code)!==K.WS_ABORT)throw await this._p2pChannel.unsubscribe(t,n),T;await this._p2pChannel.unsubscribe(t,n,!0),this._p2pChannel.setPendingRemoteMedia(t,n)}this.store.subscribe(t.uid,n,void 0,Date.now()),this._p2pChannel.reportSubscribeEvent(!0,null,t,n)}catch(y){throw this._p2pChannel.reportSubscribeEvent(!1,y==null?void 0:y.code,t,n),y}k.info("[".concat(this._clientId,"] subscribe success user ").concat(t.uid,", mediaType: ").concat(n)),this._defaultStreamFallbackType&&this.setStreamFallbackOption(t.uid,this._defaultStreamFallbackType).catch(y=>{k.warning("[".concat(this._clientId,"] auto set fallback failed"),y)});const _=n==="audio"?t._audioTrack:t._videoTrack;if(!_)throw new me(K.UNEXPECTED_ERROR,"can not find remote track in user object");return _}catch(_){throw k.error("[".concat(this._clientId,"] subscribe user ").concat(t.uid," error"),_),_}finally{g()}}async massSubscribe(t){if(Hl(t,"subscribeList"),!this._joinInfo)throw new me(K.INVALID_OPERATION,"Can't subscribe stream, not joined");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new me(K.INVALID_OPERATION,"Can't subscribe stream in ".concat(this.connectionState," state"));const n=Date.now(),i=new Map,a=await this._subscribeMutex.lock();k.info("[".concat(this._clientId,"]start massSubscribe user ").concat(t.map(f=>{let{user:g,mediaType:_}=f;return"user: ".concat(g==null?void 0:g.uid,", mediaType: ").concat(_)}).join("; ")));const l=(t=[...t]).map(f=>{let{user:g,mediaType:_}=f;return{user:g,mediaType:_}}),u=await this._p2pChannel.globalLock();try{var h;for(let g=t.length-1;g>=0;g--){const _=t[g],{user:y,mediaType:T}=_;if(pi(T,"mediaType",["audio","video"]),!y){const F=new me(K.INVALID_PARAMS,"user property does not exist in subscribeList item");throw k.error("[".concat(this._clientId,"] user property does not exist in subscribeList item")),F}if(!this._users.find(F=>F===y)){const F=new me(K.INVALID_REMOTE_USER,"user is not in the channel");k.error("[".concat(this._clientId,"] can not massSubscribe ").concat(y.uid,", this user is not in the channel")),l[g].error=F,t.splice(g,1);continue}if(T==="audio"&&(!y.hasAudio||y._audioSSRC===void 0)||T==="video"&&(!y.hasVideo||y._videoSSRC===void 0)){const F=new me(K.REMOTE_USER_IS_NOT_PUBLISHED);k.error("[".concat(this._clientId,"] can not subscribe ").concat(y.uid," with mediaType ").concat(T,", remote user is not published")),l[g].error=F,t.splice(g,1);continue}const D=Ci.Video|Ci.LwoVideo,W=i.get(y);if(W){if(T==="video"?W&D:W&Ci.Audio){t.splice(g,1),k.warning("[".concat(this._clientId,"] repeat massSubscribe user:").concat(y.uid,", mediaType:").concat(T," twice"));continue}i.set(y,W|(T==="video"?D:Ci.Audio))}else i.set(y,T==="video"?D:Ci.Audio)}for(let g=t.length-1;g>=0;g--){const _=t[g],{user:y,mediaType:T}=_,A=Ci.Video|Ci.LwoVideo;if(this._p2pChannel.hasRemoteMedia(y,T)){await this._p2pChannel.unmuteRemoteNoLock(y,T);const D=i.get(y);i.set(y,T==="video"?D^A:D^Ci.Audio),t.splice(g,1)}}this.store.massSubscribe(t.map(g=>({userId:g.user.uid,type:g.mediaType})),n);const f=Sc(h=Array.from(i.entries())).call(h,(g,_)=>{let[y,T]=_;if(T===0)return g;const A={stream_id:y.uid,stream_type:T};return T&Ci.Audio&&(A.audio_ssrc=y._audioSSRC),T&Ci.Video&&(A.video_ssrc=y._videoSSRC),g.push(A),g},[]);try{t.length>0&&await this._p2pChannel.massSubscribeNoLock(t.map(_=>{let{user:y,mediaType:T}=_;return{user:y,mediaType:T,ssrcId:T===ut.VIDEO?y._videoSSRC:y._audioSSRC,rtxSsrcId:T===ut.VIDEO?y._rtxSsrcId:void 0}}));const g=new Map;if(f.length>0){const _=await this._gateway.subscribeAll(f,!0);((_==null?void 0:_.users)||[]).forEach(y=>{let{stream_id:T,video_error_code:A,audio_error_code:D,error_code:W}=y;(A||D||W)&&g.set(T,{video_error_code:A,audio_error_code:D,error_code:W})})}if(Array.from(g.entries()).length>0){const _=[];Array.from(g.entries()).forEach(y=>{let[T,A]=y;const D=this.remoteUsers.find(W=>W.uid===T);if(D){let W;A.error_code||A.video_error_code&&A.audio_error_code?W=void 0:A.video_error_code?W=ut.VIDEO:A.audio_error_code&&(W=ut.AUDIO),_.push({user:D,mediaType:W})}}),_.length>0&&await this._p2pChannel.massUnsubscribeNoLock(_)}for(const _ of l){const y=g.get(_.user.uid);if(y){const T=y.error_code||_.mediaType==="audio"&&y.audio_error_code||_.mediaType==="video"&&y.video_error_code;if(T){const A=oh(T);k.error("user:".concat(_.user.uid," mediaType:").concat(_.mediaType," has massSubscribe error ").concat(A.desc)),_.error=new me(K.SUBSCRIBE_FAILED,"code ".concat(T,": ").concat(A.desc))}}_.error||(_.mediaType==="video"?_.track=_.user.videoTrack:_.track=_.user.audioTrack)}return this.store.massSubscribe(l.filter(_=>!_.error).map(_=>({userId:_.user.uid,type:_.mediaType})),void 0,Date.now()),l.forEach(_=>{var y;ht.subscribe(this.store.sessionId,{succ:!!_.error,ec:((y=_.error)===null||y===void 0?void 0:y.code)||null,video:_.mediaType===ut.VIDEO,audio:_.mediaType===ut.AUDIO,peerid:_.user.uid,subscribeRequestid:_.mediaType===ut.VIDEO?_.user._videoSSRC:_.user._audioSSRC,p2pid:this.store.p2pId,eventElapse:Math.floor(performance.now()-n)},!0)}),k.info("[".concat(this._clientId,"] massSubscribe success ").concat(t.map(_=>{let{user:y,mediaType:T}=_;return"user: ".concat(y==null?void 0:y.uid,", mediaType: ").concat(T)}).join("; "))),l}catch(g){throw await this._p2pChannel.massUnsubscribeNoLock(t),g}}finally{u(),a()}}async unsubscribe(t,n,i){if(!(t instanceof nd)){const u=this.remoteUsers.find(h=>h.uid===t);if(!u)throw new me(K.INVALID_REMOTE_USER,"user is not in the channel");t=u}if(n||this.store.useP2P){if(n==="datachannel")return this._unsubscribeDataChannel(t,i)}else await this._unsubscribeDataChannel(t,i);if(n&&pi(n,"mediaType",["audio","video"]),!this._joinInfo)throw new me(K.INVALID_OPERATION,"Can't unsubscribe stream, haven't joined yet!");if(!this._users.find(u=>u===t)){const u=new me(K.INVALID_REMOTE_USER,"user is not in the channel");throw k.error("[".concat(this._clientId,"] can not unsubscribe ").concat(t.uid,", user is not in the channel")),u}k.info("[".concat(this._clientId,"] unsubscribe uid: ").concat(t.uid,", mediaType: ").concat(n));const l=await this._subscribeMutex.lock();try{if(this._p2pChannel instanceof Ia)await this._p2pChannel.unsubscribe(t,n);else{const u=await this._p2pChannel.unsubscribe(t,n);u&&await this._gateway.unsubscribe(u,t.uid),n&&n!=="audio"||(t._audio_pre_subscribed=!1),n&&n!=="video"||(t._video_pre_subscribed=!1),t._is_pre_created&&a_(this._users,t),k.info("[".concat(this._clientId,"] unsubscribe success uid: ").concat(t.uid,", mediaType: ").concat(n))}}catch(u){if(u.code===K.DISCONNECT_P2P)return void k.warning("disconnecting p2p, abort unsubscribe request.");throw k.error("[".concat(this._clientId,"] unsubscribe user ").concat(t.uid," error"),u.toString()),u}finally{l()}}async _unsubscribeDataChannel(t,n){if(n&&Xn(n,"id",0,65535,!0),!this._joinInfo)throw new me(K.INVALID_OPERATION,"Can't unsubscribe datachannel, haven't joined yet!");if(!this._users.find(l=>l===t)){const l=new me(K.INVALID_REMOTE_USER,"user is not in the channel");throw k.error("[".concat(this._clientId,"] can not unsubscribe ").concat(t.uid,", user is not in the channel")),l}let a;if(typeof n=="number"){const l=t._dataChannels.find(u=>u.id===n);l&&(a=[l])}else a=t._dataChannels;if(a===void 0){const l=new me(K.REMOTE_USER_IS_NOT_PUBLISHED);throw k.error("[".concat(this._clientId,"] can not unsubscribe ").concat(t.uid," with channelId ").concat(n,", remote datachannel is not published")),l}k.info("[".concat(this._clientId,"] unsubscribe uid: ").concat(t.uid,", mediaType: datachannel, ids: ").concat(a.map(l=>l.id)));try{const l=await this._p2pChannel.unsubscribeDataChannel(t,a);l&&await this._gateway.unsubscribeDataChannel(l,t.uid),k.info("[".concat(this._clientId,"] unsubscribe datachannel success uid: ").concat(t.uid,", mediaType: datachannel, ids: ").concat(l))}catch(l){if(l.code===K.DISCONNECT_P2P)return void k.warning("disconnecting p2p, abort unsubscribe request.");throw k.error("[".concat(this._clientId,"] unsubscribe user ").concat(t.uid," error"),l.toString()),l}}async massUnsubscribe(t){if(Hl(t,"unsubscribeList"),!this._joinInfo)throw new me(K.INVALID_OPERATION,"Can't unsubscribeAll stream, haven't joined yet!");k.info("[".concat(this._clientId,"] start massUnsubscribe ").concat(t.map(i=>{let{user:a,mediaType:l}=i;return"user: ".concat(a==null?void 0:a.uid,", mediaType: ").concat(l,";")}).join())),t=[...t];const n=new Map;for(let i=t.length-1;i>=0;i--){const{user:a,mediaType:l}=t[i];if(!a){const f=new me(K.INVALID_PARAMS,"user property does not exist in unsubscribeList item");throw k.error("[".concat(this._clientId,"] user property does not exist in unsubscribeList item")),f}if(pi(l,"mediaType",["video","audio",void 0]),!this._users.find(f=>f===a)){k.warning("[".concat(this._clientId,"] can not unsubscribe ").concat(a.uid,", user is not in the channel")),t.splice(i,1);continue}const h=Ci.Video|Ci.LwoVideo;if(n.has(a)){const f=n.get(a);let g;switch(l){case"video":g=f&h;break;case"audio":g=f&Ci.Audio;break;default:g=f&(Ci.Audio|h)}if(g){k.warning("[".concat(this._clientId,"] repeat massUnsubscribe user:").concat(a.uid,",mediaType:").concat(l," twice.")),t.splice(i,1);continue}l?l==="audio"?n.set(a,f|Ci.Audio):l==="video"&&n.set(a,f|h):n.set(a,f|Ci.Audio|h)}else l?l==="audio"?n.set(a,Ci.Audio):l==="video"&&n.set(a,h):n.set(a,Ci.Audio|h)}try{const i=await this._p2pChannel.massUnsubscribe(t);i&&await this._gateway.massUnsubscribe(i),k.info("[".concat(this._clientId,"] massUnsubscribe success ").concat(t.map(a=>{let{user:l,mediaType:u}=a;return"user: ".concat(l==null?void 0:l.uid,", mediaType: ").concat(u,";")}).join()))}catch(i){if(i.code===K.DISCONNECT_P2P)return void k.warning("[".concat(this._clientId,"] disconnecting p2p, abort unsubscribe request."));throw k.error("[".concat(this._clientId,"] massUnsubscribe error"),i.toString()),i}}async setLowStreamParameter(t){(function(i){if(!i)throw new Ce(K.INVALID_PARAMS);xr(i.width)||Fw(i.width,"streamParameter.width"),xr(i.height)||Fw(i.height,"streamParameter.height"),xr(i.framerate)||Fw(i.framerate,"streamParameter.framerate"),xr(i.bitrate)||Xn(i.bitrate,"streamParameter.bitrate")})(t),(!t.width&&t.height||t.width&&!t.height)&&k.warning("[".concat(this._clientId,"] The width and height parameters take effect only when both are set")),k.info("[".concat(this._clientId,"] set low stream parameter to"),JSON.stringify(t));const n=this._configDistribute.getLowStreamConfigDistribute();if(n&&n.bitrate&&t.bitrate&&n.bitrate<t.bitrate&&(t.bitrate=n.bitrate),this._lowStreamParameter=t,this._isDualStreamEnabled)return this._p2pChannel.updateVideoStreamParameter(t,Le.LocalVideoLowTrack)}async enableDualStream(){if(!un().supportDualStream)throw ht.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!1}),new me(K.NOT_SUPPORTED,"Your browser is not support dual stream");if(this._isDualStreamEnabled)throw new me(K.INVALID_OPERATION,"Dual stream is already enabled");if(this._p2pChannel.canPublishLowStream())try{await this._publishLowStream()}catch(t){throw ht.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!1}),t}this._isDualStreamEnabled=!0,ht.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!0}),k.info("[".concat(this._clientId,"] enable dual stream"))}async disableDualStream(){if(this._isDualStreamEnabled){if(!this._joinInfo)throw new me(K.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if(this._p2pChannel.getLocalMedia(Le.LocalVideoLowTrack))try{const t=await this._p2pChannel.unpublishLowStream();t&&await this._gateway.unpublish(t,this._joinInfo.stringUid||this._joinInfo.uid)}catch(t){throw ht.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!1,succ:!1}),t}this._isDualStreamEnabled=!1,ht.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!1,succ:!0}),k.info("[".concat(this._clientId,"] disable dual stream"))}}async setClientRole(t,n){if(function(i){pi(i,"role",["audience","host"])}(t),n&&R4(n),this.mode==="rtc"||this.mode==="p2p")throw k.warning("[".concat(this._clientId,"]").concat(this.mode," mode can not use setClientRole")),new me(K.INVALID_OPERATION,"".concat(this.mode," mode can not use setClientRole"));if(n&&n.level&&t==="host")throw new me(K.INVALID_OPERATION,"host mode can not set audience latency level");if(t==="audience"&&this._p2pChannel.hasLocalMedia())throw new me(K.INVALID_OPERATION,"can not set client role to audience when publishing stream");await this._gateway.setClientRole(t,n),this._config.role=t,k.info("[".concat(this._clientId,"] set client role to ").concat(t,", level: ").concat(n&&n.level))}getRemoteInboundOffset(){var t;const n=(t=this._p2pChannel.getStats())===null||t===void 0?void 0:t.audioSend[0];if(!n||!n.timestamp)return 0;const i=n.timestamp-Date.now();return Math.abs(i)>1e3+n.rttMs+100?this.ntpAlignErrorCount+=1:this.ntpAlignErrorCount=0,this.ntpAlignErrorCount>=3?i:0}getNtpWallTimeInMs(){return document.visibilityState==="visible"&&(this.remoteInboundOffset=this.getRemoteInboundOffset()),this.remoteInboundOffset+Date.now()+this._gateway.ntpOffset}setProxyServer(t,n){if(Mi(t,"proxyServer"),!n){if(this.connectionState!=="DISCONNECTED")throw new me(K.INVALID_OPERATION,"Set proxy server before join channel");if(this._cloudProxyServerMode!=="disabled"||this._useLocalAccessPoint)throw new me(K.INVALID_OPERATION,"You have already set the proxy")}this._proxyServer=t,ht.setProxyServer(this._proxyServer),k.setProxyServer(this._proxyServer),k.info("[".concat(this._clientId,"] Set proxy server ").concat(n?"by initialize call":""," success."))}setTurnServer(t,n){if(Array.isArray(t)||(t=[t]),!n){if(this.connectionState!=="DISCONNECTED")throw new me(K.INVALID_OPERATION,"Set turn server before join channel");if(this._cloudProxyServerMode!=="disabled"||this._useLocalAccessPoint)throw new me(K.INVALID_OPERATION,"You have already set the proxy")}if(Bp(t))return this._turnServer={servers:t,mode:"original-manual"},void k.info("[".concat(this._clientId,"] Set original turnserver ").concat(n?"by initialize call":""," success: ").concat(t.map(i=>i.urls).join(","),"."));t.forEach(i=>T4(i)),this._turnServer={servers:t,mode:"manual"},k.info("[".concat(this._clientId,"] Set turnserver ").concat(n?"by initialize call":""," success."))}setLicense(t){if(this.connectionState!=="DISCONNECTED")throw new me(K.INVALID_OPERATION,"you should set license before join channel");if(Mi(t,"license",32,32),!/^[A-Za-z\d]+$/.test(t))throw new me(K.INVALID_PARAMS,"license should only contains characters from A-Z a-z 0-9");this._license=t,k.info("[".concat(this._clientId,"] set license success"),t)}startProxyServer(t){if(this.connectionState!=="DISCONNECTED")throw new me(K.INVALID_OPERATION,"Start proxy server before join channel");if(this._proxyServer||this._turnServer.mode==="manual"||this._useLocalAccessPoint)throw new me(K.INVALID_OPERATION,"You have already set the proxy");const n=[3,4,5];let i;switch(t===void 0&&(t=3),t){case 1:case 2:throw new me(K.NOT_SUPPORTED,"proxy mode 1/2 has been deprecated and not supported.");case 3:i="proxy3";break;case 4:i="proxy4";break;case 5:i="proxy5";break;default:throw new me(K.INVALID_PARAMS,"proxy server mode must be ".concat(n.join("|")))}this._cloudProxyServerMode=i,this.store.cloudProxyServerMode=i,k.info("[".concat(this._clientId,"] set cloud proxy server mode to"),this._cloudProxyServerMode)}stopProxyServer(){if(this.connectionState!=="DISCONNECTED")throw new me(K.INVALID_OPERATION,"Stop proxy server after leave channel");ht.setProxyServer(),k.setProxyServer(),this._cloudProxyServerMode="disabled",this.store.cloudProxyServerMode="disabled",k.info("[".concat(this._clientId,"] set cloud proxy server mode to"),this._cloudProxyServerMode),this._proxyServer=void 0,this._turnServer={mode:"auto",servers:[]}}setLocalAccessPointsV2(t){if(!t.accessPoints)throw new me(K.INVALID_PARAMS,"accessPoints is required.");Hl(t.accessPoints.serverList,"accessPoints.serverList"),Mi(t.accessPoints.domain,"accessPoints.domain");const n=(A,D)=>{Xn(A,D,0,65535,!0)};let i=443;if(t.accessPoints.port&&(n(t.accessPoints.port,"accessPoints.port"),i=t.accessPoints.port),this._proxyServer||this._cloudProxyServerMode!=="disabled")throw new me(K.INVALID_OPERATION,"set local access point failed, You have already set the cloud proxy");ee("CLOSE_AFB_FOR_LOCAL_AP")&&(Jn("JOIN_WITH_FALLBACK_SIGNAL_PROXY",!1),Jn("JOIN_WITH_FALLBACK_MEDIA_PROXY",!1));const a=/^((\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.){3}(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/,l=t.accessPoints.domain,u=t.accessPoints.serverList.map(A=>a.test(A)?"".concat(A.replace(/\./g,"-"),".").concat(l):A),h=u.map(A=>"".concat(A,":").concat(i));this._useLocalAccessPoint=!0,this._setLocalAPVersion=2,Jn("WEBCS_DOMAIN",h),Jn("WEBCS_DOMAIN_BACKUP_LIST",h),Jn("GATEWAY_DOMAINS",[l]),t.report&&t.report.hostname&&Array.isArray(t.report.hostname)&&t.report.hostname.length?(Hl(t.report.hostname,"report.hostname"),Jn("EVENT_REPORT_DOMAIN",t.report.hostname[0]),Jn("EVENT_REPORT_BACKUP_DOMAIN",t.report.hostname[1]||t.report.hostname[0])):(Jn("EVENT_REPORT_DOMAIN",u[0]),Jn("EVENT_REPORT_BACKUP_DOMAIN",u[1]||u[0]));let f=6443;t.report&&t.report.port&&(n(t.report.port,"report.port"),f=t.report.port),Jn("STATS_COLLECTOR_PORT",f),t.report?Jn("ENABLE_EVENT_REPORT",!0):Jn("ENABLE_EVENT_REPORT",!1);let g="";t.log&&t.log.hostname&&Array.isArray(t.log.hostname)&&t.log.hostname.length?(Hl(t.log.hostname,"log.hostname"),g=t.log.hostname[0]):g=u[0];let _=6444;t.log&&t.log.port&&(n(t.log.port,"log.port"),_=t.log.port),Jn("LOG_UPLOAD_SERVER","".concat(g,":").concat(_));let y=[];t.cds&&t.cds.hostname&&Array.isArray(t.cds.hostname)&&t.cds.hostname.length?(Hl(t.cds.hostname,"cds.hostname"),y=t.cds.hostname):y=u;let T=443;t.cds&&t.cds.port&&(n(t.cds.port,"cds.port"),T=t.cds.port),Jn("CDS_AP",y.map(A=>"".concat(A,":").concat(T))),t.cds?Jn("ENABLE_CONFIG_DISTRIBUTE",!0):Jn("ENABLE_CONFIG_DISTRIBUTE",!1),k.info("set local access point v2 success")}setLocalAccessPoints(t,n){if(Hl(t,"serverList"),Mi(n,"domain"),this._proxyServer||this._cloudProxyServerMode!=="disabled")throw new me(K.INVALID_OPERATION,"set local access point failed, You have already set the cloud proxy");const i=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/;t=t.map(a=>i.test(a)?"".concat(a.replace(/\./g,"-"),".").concat(n):a),this._useLocalAccessPoint=!0,this._setLocalAPVersion=1,Jn("WEBCS_DOMAIN",t),Jn("WEBCS_DOMAIN_BACKUP_LIST",t),Jn("GATEWAY_DOMAINS",[n]),Jn("EVENT_REPORT_DOMAIN",t[0]),Jn("EVENT_REPORT_BACKUP_DOMAIN",t[1]||t[0]),Jn("LOG_UPLOAD_SERVER","".concat(t[0],":6444")),k.info("[".concat(this._clientId,"] set local access point success"))}async setRemoteDefaultVideoStreamType(t){if(pi(t,"streamType",[0,1]),this._remoteDefaultVideoStreamType=t,this._joinInfo)try{await this._gateway.setDefaultRemoteVideoStreamType(t),this._joinInfo.defaultVideoStream=this._remoteDefaultVideoStreamType}catch(n){throw k.error("[".concat(this._clientId,"] set default remote video stream type error"),n.toString()),n}else k.debug("[".concat(this._clientId,"] haven't joined yet, cache remoteDefaultVideoStreamType ").concat(t))}async setRemoteVideoStreamType(t,n){pi(n,"streamType",[0,1]);try{await this._gateway.setRemoteVideoStreamType(t,n),setTimeout(()=>{const i=this._users.find(a=>a.uid===t);i&&i.videoTrack&&i.videoTrack.updateMediaStreamTrackResolution()},2e3)}catch(i){throw k.error("[".concat(this._clientId,"] set remote video stream type error"),i.toString()),i}k.info("[".concat(this._clientId,"] set remote ").concat(t," video stream type to ").concat(n)),this._remoteStreamTypeCacheMap.set(t,n)}async setStreamFallbackOption(t,n){pi(n,"fallbackType",[0,1,2]);try{await this._gateway.setStreamFallbackOption(t,n)}catch(i){throw k.error("[".concat(this._clientId,"] set stream fallback option"),i.toString()),i}k.info("[".concat(this._clientId,"] set remote ").concat(t," stream fallback type to ").concat(n)),this._streamFallbackTypeCacheMap.set(t,n)}setEncryptionConfig(t,n,i,a){(function(u){pi(u,"encryptionMode",["aes-128-xts","aes-256-xts","aes-128-ecb","sm4-128-ecb","aes-128-gcm","aes-256-gcm","aes-128-gcm2","aes-256-gcm2","none"])})(t),Mi(n,"secret");const l=["aes-128-gcm2","aes-256-gcm2"];if(Ye(l).call(l,t)){if(!i||!(i instanceof Uint8Array&&i.length===32))throw new me(K.INVALID_PARAMS,"salt must be an Uint8Array and exactly equal to 32 bytes")}else if(i)throw new me(K.INVALID_PARAMS,"current encrypt mode does not need salt");if(a){if($l(a,"encryptDataStream"),!Ye(l).call(l,t))throw new me(K.INVALID_PARAMS,"current encrypt mode does not support data stream");this._encryptDataStream=!0}new RegExp(`^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*,.<>?/:;'"|{}\\[\\]])(?=.{8,})`).test(n)||k.warning(`The secret is not strong:
      The secret must contain at least 1 lowercase alphabetical character,
      The secret must contain at least 1 uppercase alphabetical character,
      The secret must contain at least 1 numeric character,
      The secret must contain at least one special character,
      The secret must be eight characters or longer.
      `),this._encryptionMode=t,this._encryptionSecret=n,i&&(this._encryptionSalt=Vu(i))}async renewToken(t){if(Mi(t,"token",1,2047),!this._key||!this._joinInfo)throw new me(K.INVALID_OPERATION,"renewToken should not be called before user join");const n=this._key;this._key=t,this._joinInfo&&(this._joinInfo.token=t);const i=await this._renewTokenMutex.lock();try{if(ee("USE_NEW_TOKEN")){k.debug("[".concat(this._clientId,"] start renew token with ticket from unilbs"));const a=await gue(this._joinInfo,this._axiosCancelSource.token,this._config.httpRetryConfig||qr);k.debug("[".concat(this._clientId,"] get ticket from unilbs success")),await this._gateway.renewToken({token:t,ticket:a})}else k.debug("[".concat(this._clientId,"] start renew token without ticket")),await this._gateway.renewToken({token:t});k.debug("[".concat(this._clientId,"] renewToken success"))}catch(a){throw this._key=n,this._joinInfo.token=n,k.error("[".concat(this._clientId,"] renewToken failed"),a.toString()),a}finally{i()}}enableAudioVolumeIndicator(){this._audioVolumeIndicationInterval?k.warning("you have already enabled audio volume indicator!"):this._audioVolumeIndicationInterval=window.setInterval(()=>{const t=this._p2pChannel.getAudioLevels();this.safeEmit(sn.VOLUME_INDICATOR,t)},ee("AUDIO_VOLUME_INDICATION_INTERVAL")||2e3)}getRTCStats(){const t=this._statsCollector.getRTCStats(),n=this._gateway.getInChannelInfo();return t.Duration=Math.round(n.duration/1e3),t}async startLiveStreaming(t,n){if(!n){if(this.codec!=="h264")throw new me(K.LIVE_STREAMING_INVALID_RAW_STREAM,"raw streaming is only support h264");if(!this._p2pChannel.hasLocalMedia())throw new me(K.LIVE_STREAMING_INVALID_RAW_STREAM,"can not find stream to raw streaming")}if(this._liveRawStreamingClient&&this._liveRawStreamingClient.hasUrl(t)||this._liveTranscodeStreamingClient&&this._liveTranscodeStreamingClient.hasUrl(t))throw new me(K.LIVE_STREAMING_TASK_CONFLICT);const i=n?Ni.TRANSCODE:Ni.RAW;return this._createLiveStreamingClient(i).startLiveStreamingTask(t,i)}setLiveTranscoding(t){return this._createLiveStreamingClient(Ni.TRANSCODE).setTranscodingConfig(t)}async stopLiveStreaming(t){const n=[this._liveRawStreamingClient,this._liveTranscodeStreamingClient].filter(i=>i&&i.hasUrl(t));if(!n.length)throw new me(K.INVALID_PARAMS,"can not find live streaming url to stop");await We.all(n.map(i=>i&&i.stopLiveStreamingTask(t)))}async addInjectStreamUrl(t,n){if(!this._joinInfo)throw new me(K.INVALID_OPERATION,"can not addInjectStreamUrl, no joininfo");const i=this._createLiveStreamingClient(Ni.INJECT);i.setInjectStreamConfig(n,0),await i.startLiveStreamingTask(t,Ni.INJECT)}async removeInjectStreamUrl(){var t;const n=this._createLiveStreamingClient(Ni.INJECT),i=Array.from(Tc(t=n.streamingTasks).call(t)).find(a=>a.mode===Ni.INJECT);if(!this._joinInfo||!i)throw new me(K.INVALID_OPERATION,"can remove addInjectStreamUrl, no joininfo or inject task");await n.stopLiveStreamingTask(i.url)}async startChannelMediaRelay(t){V6(t),await this._createChannelMediaRelayClient().startChannelMediaRelay(t)}async updateChannelMediaRelay(t){V6(t),await this._createChannelMediaRelayClient().updateChannelMediaRelay(t)}async stopChannelMediaRelay(){await this._createChannelMediaRelayClient().stopChannelMediaRelay(),this._statsCollector.onStatsChanged&&(this._statsCollector.onStatsChanged=void 0)}async sendStreamMessage(t){var n;let i=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(!this._joinInfo)throw new me(K.INVALID_OPERATION,"can not send data stream, not joined");if((typeof t=="string"||t instanceof Uint8Array)&&(t={payload:t}),typeof t.payload=="string"){const l=new TextEncoder;t.payload=l.encode(t.payload)}let a=!1;if(this._encryptDataStream&&this._encryptDataStreamIv&&this._encryptDataStreamKey&&window.crypto.subtle&&Ye(n=["aes-128-gcm2","aes-256-gcm2"]).call(n,this._encryptionMode)&&(a=!0,t.payload=await async function(l,u,h){var f;const g=Sc(f=Array.from(h)).call(f,(F,U)=>F+U,0),_={serverTs:0,seq:Zce++,length:h.length,checkSum:g},y=new Uint8Array(P4(g,2)),T=new ArrayBuffer(Hp),A=new DataView(T);A.setUint32(0,_.serverTs),A.setUint16(4,_.seq),A.setUint16(6,_.length),A.setUint16(8,_.checkSum);const D=16-h.length%16;h=A4(h,new Uint8Array(D));const W=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:l,tagLength:M4,additionalData:y},u,h);return A4(new Uint8Array(T),new Uint8Array(W))}(this._encryptDataStreamIv,this._encryptDataStreamKey,t.payload)),new Blob([t.payload]).size>1024)throw new me(K.INVALID_PARAMS,a?"encrypted stream message out of range.":"stream message out of range.");return this._gateway.signal.request(vt.DATA_STREAM,{payload:Vu(t.payload),syncWithAudio:t.syncWithAudio,sendTs:Date.now()-Vpe},!i)}sendMetadata(t){if(!this._joinInfo)throw new me(K.INVALID_OPERATION,"can not send metadata, not joined");if(new Blob([t]).size>1024)throw new me(K.METADATA_OUT_OF_RANGE);return this._gateway.signal.request(vt.SEND_METADATA,{session_id:this._joinInfo.sid,metadata:Vu(t)})}async sendCustomReportMessage(t){if(Array.isArray(t)||(t=[t]),t.forEach(tle),!this._joinInfo)throw new me(K.INVALID_OPERATION,"can not send custom report, not joined");await ht.sendCustomReportMessage(this._joinInfo.sid,t)}getLocalAudioStats(){return this._statsCollector.getLocalAudioTrackStats()}getRemoteAudioStats(){return this._statsCollector.getRemoteAudioTrackStats()}getLocalVideoStats(){return this._statsCollector.getLocalVideoTrackStats()}getRemoteVideoStats(){return this._statsCollector.getRemoteVideoTrackStats()}getRemoteNetworkQuality(){return this._statsCollector.getRemoteNetworkQualityStats()}async pickSVCLayer(t,n){pi(n.spatialLayer,"spatialLayer",[0,1,2,3]),pi(n.temporalLayer,"temporalLayer",[0,1,2,3]);try{await this._gateway.pickSVCLayer(t,n)}catch(i){throw k.error("[".concat(this._clientId,"] pick SVC layer failed"),i.toString()),i}}async setRTMConfig(t){const{apRTM:n=!1,rtmFlag:i}=t;if($l(n,"apRTM"),Xn(i,"rtmFlag",0),this._rtmConfig.apRTM=n,this._rtmConfig.rtmFlag=i,k.debug("[".concat(this._clientId,"] setRTMconfig ").concat(JSON.stringify(t)," in ").concat(this.connectionState," state")),(this.connectionState==="CONNECTED"||this.connectionState==="RECONNECTING")&&this._joinInfo)return this._joinInfo.apRTM=n,this._joinInfo.rtmFlag=i,this._gateway.setRTM2Flag(i)}_reset(){if(k.debug("[".concat(this._clientId,"] reset client")),this._axiosCancelSource.cancel(),this._axiosCancelSource=Go.CancelToken.source(),this._streamFallbackTypeCacheMap=new Map,this._remoteStreamTypeCacheMap=new Map,this._configDistribute.stopGetConfigDistribute(),this._joinInfo&&kj(this._joinInfo),this._joinInfo=void 0,this._proxyServer=void 0,this._defaultStreamFallbackType=void 0,this._sessionId=null,this.store.sessionId=null,this._statsCollector.reset(),this._key=void 0,this._appId=void 0,this._uid=void 0,this.store.uid=void 0,this._channelName=void 0,this._encryptionMode="none",this._encryptionSecret=null,this._encryptionSalt=null,this._encryptDataStreamKey=null,this._encryptDataStreamIv=null,this._pendingPublishedUsers=[],this._users.forEach(t=>{t._audioTrack&&t._audioTrack._destroy(),t._videoTrack&&t._videoTrack._destroy(),t._dataChannels&&(t._dataChannels.forEach(n=>n._close()),t._dataChannels.length=0)}),this._users=[],this._audioVolumeIndicationInterval&&(window.clearInterval(this._audioVolumeIndicationInterval),this._audioVolumeIndicationInterval=void 0),this._cloudProxyServerMode==="fallback"&&(this._cloudProxyServerMode="disabled",this.store.cloudProxyServerMode="disabled"),this._p2pChannel.reset(),this._publishMutex=new Oi("client-publish"),this._subscribeMutex=new Oi("client-subscribe"),this._networkQualityInterval&&(window.clearInterval(this._networkQualityInterval),this._networkQualityInterval=void 0),this._injectStreamingClient&&(this._injectStreamingClient.terminate(),this._injectStreamingClient.removeAllListeners(),this._injectStreamingClient=void 0),this._liveRawStreamingClient&&(this._liveRawStreamingClient.terminate(),this._liveRawStreamingClient.removeAllListeners(),this._liveRawStreamingClient=void 0),this._liveTranscodeStreamingClient&&(this._liveTranscodeStreamingClient.terminate(),this._liveTranscodeStreamingClient.removeAllListeners(),this._liveTranscodeStreamingClient=void 0),this._channelMediaRelayClient&&(this._channelMediaRelayClient.dispose(),this._channelMediaRelayClient=void 0),this._inspect)try{this._inspect.close(),this._inspect=void 0}catch{}if(this._moderation)try{this.setImageModeration(!1)}catch{}}_startSession(t,n){var i;const a=t||_0();t?k.debug("[".concat(this._clientId,"] new Session ").concat(a)):k.debug("[".concat(this._clientId,"] renewSession ").concat(this._sessionId," => ").concat(a));const l=t?"":this._sessionId||"";this._sessionId=a,this.store.sessionId=a;const u={lts:new Date().getTime(),mode:this.mode,buildFormat:1,stringUid:(n==null?void 0:n.stringUid)||((i=this._joinInfo)===null||i===void 0?void 0:i.stringUid),channelProfile:this.mode==="live"?1:0,channelMode:0,isABTestSuccess:Number(this._configDistribute.isSuccess),lsid:l,clientRole:this.role==="audience"?2:1};n?ht.sessionInit(this._sessionId,vs({cname:n.channel,appid:n.appId,preload:n.preload},u)):this._joinInfo?ht.sessionInit(this._sessionId,vs({cname:this._joinInfo.cname,appid:this._joinInfo.appId,preload:!!this._joinInfo.recoverPreloadCache},u)):this._gateway.joinInfo&&ht.sessionInit(this._sessionId,vs({cname:this._gateway.joinInfo.cname,appid:this._gateway.joinInfo.appId},u)),this._joinInfo&&(this._joinInfo.sid=a),this._gateway.joinInfo&&(this._gateway.joinInfo.sid=a)}async _publishHighStream(t){if(!this._joinInfo||this._uid===void 0)throw new me(K.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new me(K.INVALID_OPERATION,"can not publish stream in ".concat(this.connectionState," state"));if(this._turnServer.mode==="auto"&&ee("FORCE_TURN")&&!ee("TURN_ENABLE_TCP")&&!ee("TURN_ENABLE_UDP"))throw new me(K.UNEXPECTED_ERROR,"force TURN With No TURN Configuration");k.debug("[".concat(this._clientId,"] publish high stream"));try{const i=await this._p2pChannel.publish(t,this._isDualStreamEnabled,this._lowStreamParameter);if(this._p2pChannel instanceof Ia){const a=(await i.next()).value;if(a){try{await this._gateway.sendExtensionMessage(Wr.PUBLISH,a,!0)}catch(l){throw i.throw(l),l}await i.next()}this._p2pChannel.reportPublishEvent(!0,null)}else{const a=(await i.next()).value;if(a){var n;let l;try{l=await this._gateway.publish(this._uid,a,!0)}catch(u){if(u.code!==K.DISCONNECT_P2P)throw i.throw(u),u}await i.next(((n=l)===null||n===void 0?void 0:n.ortc)||[])}this._p2pChannel.reportPublishEvent(!0,null);for(const l of t)l instanceof nr&&l._encoderConfig&&this._gateway.setVideoProfile(l._encoderConfig),!l.muted&&l.enabled||await this._p2pChannel.muteLocalTrack(l)}}catch(i){if(this._p2pChannel.reportPublishEvent(!1,i==null?void 0:i.code,t),(i==null?void 0:i.code)===K.WS_ABORT)return;throw i}}async _publishLowStream(){if(!this._joinInfo||this._uid===void 0)throw new me(K.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new me(K.INVALID_OPERATION,"can not publish stream in ".concat(this.connectionState," state"));k.debug("[".concat(this._clientId,"] publish low stream"));const t=this._configDistribute.getLowStreamConfigDistribute();t&&t.bitrate&&(this._lowStreamParameter||(this._lowStreamParameter={width:160,height:120,framerate:15,bitrate:50}),this._lowStreamParameter&&this._lowStreamParameter.bitrate&&t.bitrate<this._lowStreamParameter.bitrate&&(this._lowStreamParameter.bitrate=t.bitrate));try{const i=await this._p2pChannel.publishLowStream(this._lowStreamParameter),a=(await i.next()).value;if(a){var n;let l;try{l=await this._gateway.publish(this._uid,a,!0)}catch(u){if(u.code!==K.DISCONNECT_P2P)throw i.throw(u),u}i.next(((n=l)===null||n===void 0?void 0:n.ortc)||[]),this._p2pChannel.reportPublishEvent(!0,null,void 0,!0)}}catch(i){if(this._p2pChannel.reportPublishEvent(!1,i==null?void 0:i.code,void 0,!0),(i==null?void 0:i.code)===K.WS_ABORT)return;throw i}}_createLiveStreamingClient(t){if(!this._joinInfo||!this._appId)return new me(K.INVALID_OPERATION,"can not create live streaming client, please join channel first").throw();const n=()=>new fpe(this._joinInfo,this._config.websocketRetryConfig||qr,this._config.httpRetryConfig||qr),i=a=>{a.onLiveStreamError=(l,u)=>{ht.reportApiInvoke(this._sessionId,{name:ni.ON_LIVE_STREAM_ERROR,options:[l,u],tag:Nr.TRACER}).onSuccess(),this.safeEmit(sn.LIVE_STREAMING_ERROR,l,u)},a.onLiveStreamWarning=(l,u)=>{ht.reportApiInvoke(this._sessionId,{name:ni.ON_LIVE_STREAM_WARNING,options:[l,u],tag:Nr.TRACER}).onSuccess(),this.safeEmit(sn.LIVE_STREAMING_WARNING,l,u)},a.on(v_.REQUEST_WORKER_MANAGER_LIST,(l,u,h)=>{if(!this._joinInfo)return h(new me(K.INVALID_OPERATION,"can not find join info to get worker manager"));RB(l,this._joinInfo,this._axiosCancelSource.token,qr).then(u).catch(h)})};switch(t){case Ni.RAW:return this._liveRawStreamingClient||(this._liveRawStreamingClient=n(),i(this._liveRawStreamingClient)),this._liveRawStreamingClient;case Ni.TRANSCODE:return this._liveTranscodeStreamingClient||(this._liveTranscodeStreamingClient=n(),i(this._liveTranscodeStreamingClient)),this._liveTranscodeStreamingClient;case Ni.INJECT:return this._injectStreamingClient||(this._injectStreamingClient=n(),this._injectStreamingClient.on(v_.REQUEST_WORKER_MANAGER_LIST,(a,l,u)=>{if(!this._joinInfo)return u(new me(K.INVALID_OPERATION,"can not find join info to get worker manager"));RB(a,this._joinInfo,this._axiosCancelSource.token,qr).then(l).catch(u)}),this._injectStreamingClient.onInjectStatusChange=(a,l,u)=>{this.safeEmit(sn.INJECT_STREAM_STATUS,a,l,u)}),this._injectStreamingClient}}_createChannelMediaRelayClient(){if(!this._joinInfo)return new me(K.INVALID_OPERATION,"can not create channel media relay client, please join channel first").throw();if(!this._channelMediaRelayClient){const{sendResolutionWidth:t,sendResolutionHeight:n}=this.getLocalVideoStats(),i={width:t,height:n};this._channelMediaRelayClient=new gpe(this._joinInfo,this._clientId,this._config.websocketRetryConfig||qr,this._config.httpRetryConfig||qr,i),this._channelMediaRelayClient.on("state",a=>{a===ra.RELAY_STATE_FAILURE&&this._channelMediaRelayClient&&this._channelMediaRelayClient.dispose(),this.safeEmit(sn.CHANNEL_MEDIA_RELAY_STATE,a)}),this._channelMediaRelayClient.on("event",a=>{this.safeEmit(sn.CHANNEL_MEDIA_RELAY_EVENT,a)}),this._statsCollector.onStatsChanged=(a,l)=>{var u;a==="resolution"&&((u=this._channelMediaRelayClient)===null||u===void 0||u.setVideoProfile(l))}}return this._channelMediaRelayClient}_handleUpdateDataChannel(t,n){const{added:i,deleted:a}=t,l=[];Array.isArray(i)&&i.length>0&&i.forEach(u=>{const{uid:h,stream_id:f,ordered:g,max_retrans_times:_,metadata:y}=u,T=this._users.find(A=>A._uintid===h);if(!T)return void k.error("[".concat(this._clientId,"] can not find target user!(on_add_data_channel)"));if(k.debug("[".concat(this._clientId,"] data_channel added with uid ").concat(h)),Ye(l).call(l,T)||l.push(T),T._uintid||(T._uintid=h),T._dataChannels.findIndex(A=>A.id===u.stream_id)===-1){const A={id:f,ordered:!!g,maxRetransmits:_,metadata:y},D=new zhe(A);T._dataChannels.push(D),k.info("[".concat(this._clientId,"] remote user ").concat(T.uid," published datachannel")),n||this.safeEmit(sn.USER_PUBLISHED,T,"datachannel",A)}this._p2pChannel.hasPendingRemoteDataChannel(T,u.stream_id)&&(k.debug("[".concat(this._clientId,"] resubscribe datachannel for user ").concat(T.uid," after reconnect.")),this._subscribeDataChannel(T,u.stream_id).catch(A=>{k.error("[".concat(this._clientId,"] resubscribe datachannel error"),A.toString())}))}),n&&(this.safeEmit(sn.PUBLISHED_USER_LIST,this._pendingPublishedUsers),this._pendingPublishedUsers=[]),Array.isArray(a)&&a.length>0&&a.forEach(u=>{const{uid:h,stream_id:f}=u,g=this._users.find(y=>y._uintid===h);if(!g)return void k.error("[".concat(this._clientId,"] can not find target user!(on_delete_data_channel)"));const _=g._dataChannels.find(y=>y.id===u.stream_id);_&&(k.debug("[".concat(this._clientId,"] data_stream delete with uid ").concat(h)),this._p2pChannel.unsubscribeDataChannel(g,[_]).then(y=>{if(g._dataChannels=g._dataChannels.filter(T=>T!==_),y)return this._gateway.unsubscribeDataChannel(y,g.uid)}),k.info("[".concat(this._clientId,"] remote user ").concat(h," unpublished datachannel ,id:").concat(_.id)),this.safeEmit(sn.USER_UNPUBLISHED,g,"datachannel",_._config))})}_handleRemoveDataChannels(t){const n=this._users.find(i=>i.uid===t.uid);if(n){if(n._dataChannels!==void 0&&n._dataChannels.length>0){k.debug("[".concat(this._clientId,"] datachannel removed with uid ").concat(t.uid));const i=()=>{k.info("[".concat(this._clientId,"] remote user ").concat(n.uid," unpublished datachannel")),n._dataChannels.forEach(a=>{this.safeEmit(sn.USER_UNPUBLISHED,n,"datachannel",a._config)})};this._p2pChannel.unsubscribeDataChannel(n,n._dataChannels).then(a=>{if(a)return this._gateway.unsubscribeDataChannel(a,n.uid)}),i()}}else k.warning("[".concat(this._clientId,"] can not find target user!(on_remove_datachannel)"))}_handleGatewayEvents(){this._gateway.on(Hr.DISCONNECT_P2P,async()=>{await this._p2pChannel.disconnectForReconnect()}),this._gateway.on(Hr.CONNECTION_STATE_CHANGE,(t,n,i)=>{var a;if(i===an.FALLBACK)return;const l=()=>{this.safeEmit(sn.CONNECTION_STATE_CHANGE,t,n,i)};if(ht.reportApiInvoke(this._sessionId||((a=this._gateway.joinInfo)===null||a===void 0?void 0:a.sid)||null,{name:ni.CONNECTION_STATE_CHANGE,options:[t,n,i],tag:Nr.TRACER}).onSuccess(JSON.stringify({cur:t,prev:n,reason:i})),k.info("[".concat(this._clientId,"] connection state change: ").concat(n," -> ").concat(t)),t==="DISCONNECTED")return this._reset(),void l();if(t==="RECONNECTING")this._users.forEach(h=>{h._trust_in_room_=!1,h._trust_audio_enabled_state_=!1,h._trust_video_enabled_state_=!1,h._trust_audio_mute_state_=!1,h._trust_video_mute_state_=!1,h._trust_audio_stream_added_state_=!1,h._trust_video_stream_added_state_=!1,h._is_pre_created||(h._audio_pre_subscribed||(h._audioSSRC=void 0,h._audioOrtc=void 0),h._video_pre_subscribed||(h._videoSSRC=void 0,h._videoOrtc=void 0,h._rtxSsrcId=void 0),h._cname=void 0)}),this._userOfflineTimeout&&window.clearTimeout(this._userOfflineTimeout),this._streamRemovedTimeout&&window.clearTimeout(this._streamRemovedTimeout),this._userOfflineTimeout=void 0,this._streamRemovedTimeout=void 0;else if(t==="CONNECTED"){var u;this._streamFallbackTypeCacheMap.forEach((h,f)=>{this._gateway.setStreamFallbackOption(f,h).catch(g=>{k.warning("[".concat(this._clientId,"] auto set stream fallback option failed"),g)})}),this._remoteStreamTypeCacheMap.forEach((h,f)=>{this._gateway.setRemoteVideoStreamType(f,h).catch(g=>{k.warning("[".concat(this._clientId,"] auto set remote stream type failed"),g)})}),this._remoteDefaultVideoStreamType!==void 0&&((u=this._joinInfo)===null||u===void 0?void 0:u.defaultVideoStream)===void 0&&this.setRemoteDefaultVideoStreamType(this._remoteDefaultVideoStreamType).then(()=>{k.debug("[".concat(this._clientId,"] setRemoteDefaultVideoStreamType after gateway connected"))}).catch(h=>{k.error("[".concat(this._clientId,"] setRemoteDefaultVideoStreamType after gateway failed, ").concat(h))}),this.store.useP2P||(this._p2pChannel.republish(),this._userOfflineTimeout=window.setTimeout(()=>{this.connectionState==="CONNECTED"&&(this._userOfflineTimeout=void 0,this._users.filter(h=>!h._trust_in_room_).forEach(h=>{k.debug("[".concat(this._clientId,"] user offline timeout, emit user offline ").concat(h.uid)),this._handleUserOffline({uid:h.uid})}))},3e3),this._streamRemovedTimeout=window.setTimeout(()=>{this.connectionState==="CONNECTED"&&(this._streamRemovedTimeout=void 0,this._users.forEach(h=>{h._trust_audio_mute_state_||(k.debug("[".concat(this._clientId,"] auto dispatch audio unmute event ").concat(h.uid)),this._handleMuteStream(h.uid,ut.AUDIO,!1)),h._trust_video_mute_state_||(k.debug("[".concat(this._clientId,"] auto dispatch video unmute event ").concat(h.uid)),this._handleMuteStream(h.uid,ut.VIDEO,!1)),h._trust_audio_enabled_state_||(k.debug("[".concat(this._clientId,"] auto dispatch enable local audio ").concat(h.uid)),this._handleSetStreamLocalEnable("audio",h.uid,!0)),h._trust_video_enabled_state_||(k.debug("[".concat(this._clientId,"] auto dispatch enable local video ").concat(h.uid)),this._handleSetStreamLocalEnable("video",h.uid,!0)),h._trust_video_stream_added_state_||(k.debug("[".concat(this._clientId,"] auto dispatch reset video stream added ").concat(h.uid)),this._handleResetAddStream(h,"video")),h._trust_audio_stream_added_state_||(k.debug("[".concat(this._clientId,"] auto dispatch reset audio stream added ").concat(h.uid)),this._handleResetAddStream(h,"audio")),h._video_added_||h._audio_added_||(k.debug("[".concat(this._clientId,"] auto dispatch stream remove ").concat(h.uid)),this._handleRemoveStream({uid:h.uid,uint_id:h._uintid}))}))},1e3))}l()}),this._gateway.on(Hr.REQUEST_NEW_GATEWAY_LIST,async(t,n)=>{if(!this._joinInfo)return n(new me(K.UNEXPECTED_ERROR,"can not recover, no join info"));try{let i;this._joinInfo.recoverPreloadCache?(i=this._joinInfo.recoverPreloadCache.ap,Mj(this._joinInfo.recoverPreloadCache),this._joinInfo.recoverPreloadCache=void 0):i=await v1(this._joinInfo,this._axiosCancelSource.token,this._config.httpRetryConfig||qr,this.store),this._joinInfo&&(this._joinInfo.apResponse=i.gatewayInfo.res,this._joinInfo.gatewayAddrs=i.gatewayInfo.gatewayAddrs,this._joinInfo.uni_lbs_ip=i.gatewayInfo.uni_lbs_ip);const a=[];i.gatewayInfo.gatewayAddrs.forEach(l=>{let{address:u}=l;const[h,f]=u.split(":");this._joinInfo&&this._joinInfo.proxyServer?a.push({proxy:this._joinInfo.proxyServer,host:h,port:f}):a.push({host:h,port:f})}),t(a)}catch(i){n(i)}}),this._gateway.on(Hr.NETWORK_QUALITY,t=>{this._networkQualitySensitivity==="normal"&&this.safeEmit(sn.NETWORK_QUALITY,t)}),this._gateway.on(Hr.STREAM_TYPE_CHANGE,(t,n)=>{this.safeEmit(sn.STREAM_TYPE_CHANGED,t,n),ht.reportApiInvoke(this._sessionId,{name:ni.STREAM_TYPE_CHANGE,options:[t,n],tag:Nr.TRACER}).onSuccess(JSON.stringify({uid:t,streamType:n}))}),this._gateway.on(Hr.IS_P2P_DISCONNECTED,t=>{this._p2pChannel.isP2PDisconnected()?t(!0):this._p2pChannel.hasLocalMedia()||this._p2pChannel.hasRemoteMedia()?t(!1):t(!0)}),this._gateway.on(Hr.NEED_RENEW_SESSION,async t=>{if(t==="recover"&&this._joinInfo){const n=await Pj(vs(vs({},this._joinInfo),{},{uid:this._joinInfo.uid,stringUid:void 0}));this._joinInfo.recoverPreloadCache=n,this._startSession(n==null?void 0:n.sid)}else this._startSession()}),this._gateway.on(Hr.REQUEST_P2P_CONNECTION_PARAMS,async(t,n,i)=>{try{n(await this._p2pChannel.startP2PConnection(t))}catch(a){i(a)}}),this._gateway.on(Hr.JOIN_RESPONSE,(t,n)=>{if(this.store.useP2P)return;const{dtlsParameters:i,iceParameters:a,candidates:l,rtpCapabilities:u,setup:h,cname:f}=f6(t.ortc,n);this._p2pChannel.connect(a,i,l,u,h,f)}),this._gateway.on(Hr.REQUEST_DC_CONNECTION_PARAMS,t=>{t(this._p2pChannel.getEstablishParams())}),this._gateway.on(Hr.RESET_SIGNAL,t=>{this._p2pChannel.resetConnection(t),this._handleGatewaySignalEvents()}),this._gateway.on(Hr.DATACHANNEL_FAILBACK,()=>{this._joinGateway()}),this._gateway.on(Hr.DATACHANNEL_PRECONNECT,async(t,n,i,a)=>{var l,u,h,f,g,_;await this._p2pChannel.startP2PConnection({turnServer:(l=this._joinInfo)===null||l===void 0?void 0:l.turnServer},!0);const y=function(T,A){let D;return A&&A.ip&&typeof A.port=="number"?(D=[{foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:A.ip,port:A.port.toString(),type:"host",extension:{}}],k.debug("Using remote candidate from AP ".concat(A.ip,":").concat(A.port)),A.ip6&&(D.push({foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:A.ip6,port:A.port.toString(),type:"host",extension:{}}),k.debug("Using IPV6 remote candidate from AP ".concat(A.ip6,":").concat(A.port)))):D=[{foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:T.ip,port:T.port.toString(),type:"host",extension:{}}],D}(t,n);return this._p2pChannel.preConnect({iceUfrag:"".concat((u=this._joinInfo)===null||u===void 0?void 0:u.apResponse.cid,"_").concat((h=this._joinInfo)===null||h===void 0?void 0:h.apResponse.cert),icePwd:"".concat((f=this._joinInfo)===null||f===void 0?void 0:f.apResponse.cid,"_").concat((g=this._joinInfo)===null||g===void 0?void 0:g.apResponse.cert)},{fingerprints:[{hashFunction:"sha-256",fingerprint:(_=ee("FINGERPRINT"))!==null&&_!==void 0?_:t.fingerprint}]},y,{send:{audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]},recv:{audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]}},"active","o/i14u9pJrxRKAsu").then(i).catch(a)})}_handleGatewaySignalEvents(){this._gateway.signal.on(Bt.ON_USER_ONLINE,this._handleUserOnline),this._gateway.signal.on(Bt.ON_USER_OFFLINE,this._handleUserOffline),this._gateway.signal.on(Bt.ON_ADD_AUDIO_STREAM,t=>this._handleAddAudioOrVideoStream("audio",t.uid,t.ssrcId,t.cname,t.uint_id,t.ortc)),this._gateway.signal.on(Bt.ON_ADD_VIDEO_STREAM,t=>this._handleAddAudioOrVideoStream("video",t.uid,t.ssrcId,t.cname,t.uint_id,t.ortc,t.rtxSsrcId)),this._gateway.signal.on(Bt.ON_REMOTE_DATASTREAM_UPDATE,t=>{this._handleUpdateDataChannel(t)}),this._gateway.signal.on(Bt.ON_REMOTE_FULL_DATASTREAM_INFO,t=>{this._handleUpdateDataChannel({added:t.datastreams,deleted:[]},!0)}),this._gateway.signal.on(Bt.ON_REMOVE_STREAM,this._handleRemoveStream),this._gateway.signal.on(Bt.ON_P2P_LOST,this._handleP2PLost),this._gateway.signal.on(Bt.MUTE_AUDIO,t=>this._handleMuteStream(t.uid,ut.AUDIO,!0)),this._gateway.signal.on(Bt.UNMUTE_AUDIO,t=>this._handleMuteStream(t.uid,ut.AUDIO,!1)),this._gateway.signal.on(Bt.MUTE_VIDEO,t=>this._handleMuteStream(t.uid,ut.VIDEO,!0)),this._gateway.signal.on(Bt.UNMUTE_VIDEO,t=>this._handleMuteStream(t.uid,ut.VIDEO,!1)),this._gateway.signal.on(Bt.RECEIVE_METADATA,t=>{const n=th(t.metadata);this.safeEmit(sn.RECEIVE_METADATA,t.uid,n)}),this._gateway.signal.on(Bt.ON_DATA_STREAM,async t=>{var n;if(!t)return;let i=th(t.payload);if(this._encryptDataStream&&this._encryptDataStreamIv&&this._encryptDataStreamKey&&window.crypto.subtle&&Ye(n=["aes-128-gcm2","aes-256-gcm2"]).call(n,this._encryptionMode)){if(t.payload.length<Hp)throw new me(K.UNEXPECTED_RESPONSE,"payload length ".concat(t.payload.length," is less than header length ").concat(Hp));i=await async function(u,h,f){const g=f.subarray(0,Hp),_=g.slice(8,Hp),y=(_[0]<<8)+_[1],T=(g[6]<<8)+g[7],A=await window.crypto.subtle.decrypt({name:"AES-GCM",iv:u,tagLength:M4,additionalData:new Uint8Array(P4(y,2))},h,f.subarray(Hp));return new Uint8Array(A).subarray(0,T)}(this._encryptDataStreamIv,this._encryptDataStreamKey,i)}let a=0;if(t.ordered||t.syncWithAudio){const l=this._p2pChannel.getStats(),u=this.remoteUsers.find(f=>f.uid===t.uid),h=l==null?void 0:l.audioRecv.find(f=>f.ssrc===(u==null?void 0:u._audioSSRC));a=h==null?void 0:h.jitterBufferMs}a==null&&(a=0),$pe(vs(vs({},t),{},{payload:i}),a,{id:this._clientId,onStreamMessage:typeof this.onStreamMessage=="function"?this.onStreamMessage.bind(this):void 0,safeEmit:this.safeEmit.bind(this)})}),this._gateway.signal.on(Bt.ON_CRYPT_ERROR,()=>{Bu(()=>{k.warning("[".concat(this._clientId,"] on crypt error")),this.safeEmit(sn.CRYPT_ERROR)},this._sessionId)}),this._gateway.signal.on(Bt.ON_TOKEN_PRIVILEGE_WILL_EXPIRE,this._handleTokenWillExpire),this._gateway.signal.on(Bt.ON_TOKEN_PRIVILEGE_DID_EXPIRE,()=>{k.warning("[".concat(this._clientId,"] received message onTokenPrivilegeDidExpire, please get new token and join again")),this._gateway.leave(!0,an.TOKEN_EXPIRE),this.safeEmit(sn.ON_TOKEN_PRIVILEGE_DID_EXPIRE),this._reset()}),this._gateway.signal.on(Bt.ON_STREAM_FALLBACK_UPDATE,t=>{k.debug("[".concat(this._clientId,"] stream fallback peerId: ").concat(t.stream_id,", attr: ").concat(t.stream_type)),this.safeEmit(sn.STREAM_FALLBACK,t.stream_id,t.stream_type===1?"fallback":"recover")}),this._gateway.signal.on(Bt.ON_PUBLISH_STREAM,t=>{this.uid===this._uid&&(this._p2pChannel.reportPublishEvent(!0,null,void 0,!1,JSON.stringify({proxy:t.proxy})),k.info("[".concat(this._clientId,"] on publish stream, ").concat(JSON.stringify(t))))}),this._gateway.signal.on(Bt.ENABLE_LOCAL_VIDEO,t=>{this._handleSetStreamLocalEnable("video",t.uid,!0)}),this._gateway.signal.on(Bt.DISABLE_LOCAL_VIDEO,t=>{this._handleSetStreamLocalEnable("video",t.uid,!1)}),this._gateway.signal.on(nt.REQUEST_TIMEOUT,(t,n)=>{if(this._joinInfo)switch(t){case vt.PUBLISH:{if(!n)return;const l=n.ortc;if(l){var i,a;const u=l.some(g=>{let{stream_type:_}=g;return _===Vn.Audio}),h=l.some(g=>{let{stream_type:_}=g;return _!==Vn.Audio}),f=l.some(g=>{let{stream_type:_}=g;return _===Vn.Screen||_===Vn.ScreenLow});n.state==="offer"&&ht.publish(this._joinInfo.sid,{eventElapse:Zi.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:!1,ec:K.TIMEOUT,audio:u,video:h,p2pid:n.p2p_id,publishRequestid:this.store.pubId,screenshare:f,audioName:u?(i=l.find(g=>{let{stream_type:_}=g;return _===Vn.Audio}))===null||i===void 0||(i=i.ssrcs[0])===null||i===void 0?void 0:i.ssrcId.toString():void 0,videoName:h?(a=l.find(g=>{let{stream_type:_}=g;return _!==Vn.Audio}))===null||a===void 0||(a=a.ssrcs[0])===null||a===void 0?void 0:a.ssrcId.toString():void 0})}break}case vt.SUBSCRIBE:n&&ht.subscribe(this._joinInfo.sid,{succ:!1,ec:K.TIMEOUT,audio:n.stream_type===ut.AUDIO,video:n.stream_type===ut.VIDEO,peerid:n.stream_id,subscribeRequestid:n.ssrcId,p2pid:this.store.p2pId,eventElapse:Zi.measureFromSubscribeStart(this.store.clientId,n.ssrcId)})}}),this._gateway.signal.on(Bt.ON_P2P_OK,t=>{this.uid,this._uid}),this._gateway.signal.on(Bt.ON_PUBLISHED_USER_LIST,t=>{if(t==null||!t.users)return;ee("BLOCK_LOCAL_CLIENT")&&(t.users=t.users.filter(a=>!rh(a.string_id||a.stream_id,this.channelName)));const n=[],i=[];for(const a of t.users){let l=this._users.find(y=>y._uintid===a.stream_id);l?l._trust_in_room_=!0:(l=new nd(a.string_id||a.stream_id,a.stream_id),this._users.push(l),this.getListeners(sn.PUBLISHED_USER_LIST).length===0&&(k.debug("[".concat(this._clientId,"] user online"),a.stream_id),this.safeEmit(sn.USER_JOINED,l)));const u=Ci.Audio&a.stream_type,h=(Ci.Video|Ci.LwoVideo)&a.stream_type,f=(65280&a.stream_type)!=0,g=u&&l.hasAudio,_=h&&l.hasVideo;h&&(l._trust_video_stream_added_state_=!0,l._video_added_=!0,l._videoSSRC=a.video_ssrc,l._rtxSsrcId=a.video_rtx),u&&(l._trust_audio_stream_added_state_=!0,l._audio_added_=!0,l._audioSSRC=a.audio_ssrc),u&&!g&&this.getListeners(sn.PUBLISHED_USER_LIST).length===0&&(k.info("[".concat(this._clientId,"] remote user ").concat(l.uid," published audio")),this.safeEmit(sn.USER_PUBLISHED,l,"audio")),h&&!_&&this.getListeners(sn.PUBLISHED_USER_LIST).length===0&&(k.info("[".concat(this._clientId,"] remote user ").concat(l.uid," published video")),this.safeEmit(sn.USER_PUBLISHED,l,"video")),(u&&!g||h&&!_||f)&&n.push(l),h&&this._p2pChannel.hasPendingRemoteMedia(l,"video")&&i.push({user:l,mediaType:"video"}),u&&this._p2pChannel.hasPendingRemoteMedia(l,"audio")&&i.push({user:l,mediaType:"audio"})}i.length>0&&(k.debug("[".concat(this._clientId,"] RE massSubscribe after reconnect ").concat(i.map(a=>"user: ".concat(a.user.uid,", mediaType: ").concat(a.mediaType)).join("; ")," ")),this.massSubscribe(i).catch(a=>{k.error("[".concat(this._clientId,"] mass resubscribe error"),a.toString())})),this.getListeners(sn.PUBLISHED_USER_LIST).length>0?ee("ENABLE_DATASTREAM_2")?this._pendingPublishedUsers=n:(k.info("[".concat(this._clientId,"] client emit user-list event, users: ").concat(n.map(a=>a.uid).join(", "))),this.safeEmit(sn.PUBLISHED_USER_LIST,n)):k.info("[".concat(this._clientId,"] client not emit user-list event case there is no user-list listener, users: ").concat(n.map(a=>a.uid).join(", ")))}),this._gateway.signal.on(Bt.ON_RTP_CAPABILITY_CHANGE,t=>{const{video_codec:n}=t;this._p2pChannel instanceof vS&&this._p2pChannel.updateRemoteRTPCapabilities(n.map(i=>i.toLowerCase()).filter(i=>{var a;return Ye(a=Object.keys($p)).call(a,i)}))})}_handleP2PEvents(){this._gateway.signal.on(Bt.ON_USER_OFFLINE,()=>{this._p2pChannel.disconnectForReconnect()}),this._gateway.signal.on(Wr.PUBLISH,(t,n,i)=>{const{uid:a}=t;t.forEach(l=>{const{kind:u,ssrcs:h,mid:f,isMuted:g}=l;this._handleP2PAddAudioOrVideoStream(u,a,h[0].ssrcId,f);const _=this._users.find(y=>y.uid===a);return _&&this._p2pChannel instanceof Ia?this._p2pChannel.mockSubscribe(_,u,h[0].ssrcId,f).then(()=>{n()}).catch(i):n(),this._handleMuteStream(a,u,!!g)})}),this._gateway.signal.on(Wr.CALL,async(t,n,i)=>{if(this._p2pChannel instanceof Ia)try{var a;n(await this._p2pChannel.startP2P({turnServer:(a=this._joinInfo)===null||a===void 0?void 0:a.turnServer},t))}catch(l){i(l)}}),this._gateway.signal.on(nt.P2P_CONNECTION,async t=>{this._p2pChannel instanceof Ia&&await this._p2pChannel.p2pConnect(t)}),this._gateway.signal.on(Wr.UNPUBLISH,async(t,n,i)=>{if(this._p2pChannel instanceof Ia){const{unpubMsg:a,uid:l}=t,u=this._users.find(h=>h.uid===l);if(!u)return k.warning("[".concat(this._clientId,"] can not find remote user, ignore mute event, uid: ").concat(l)),void n();try{a.forEach(async h=>{let{stream_type:f}=h;const g=f===Vn.Audio?ut.AUDIO:ut.VIDEO;await this._p2pChannel.unsubscribe(u,g),this._handleMuteStream(l,g,!0)}),n()}catch(h){i(h)}}}),this._gateway.signal.on(Wr.CONTROL,async(t,n)=>{const{action:i}=t;switch(i){case Wu.MUTE_LOCAL_VIDEO:this._handleMuteStream(n,ut.VIDEO,!0);break;case Wu.MUTE_LOCAL_AUDIO:this._handleMuteStream(n,ut.AUDIO,!0);break;case Wu.UNMUTE_LOCAL_VIDEO:this._handleP2PAddAudioOrVideoStream("video",n),this._handleMuteStream(n,ut.VIDEO,!1);break;case Wu.UNMUTE_LOCAL_AUDIO:this._handleP2PAddAudioOrVideoStream("audio",n),this._handleMuteStream(n,ut.AUDIO,!1)}}),this._gateway.signal.on(Wr.RESTART_ICE,async(t,n,i)=>{if(this._p2pChannel instanceof Ia)try{const{direction:a,iceParameter:l}=t;a!==Do.SEND_ONLY||l?n(await this._p2pChannel.restartICE(a,l)):(this._p2pChannel.handleDisconnect(a),n())}catch(a){i(a)}}),this._gateway.signal.on(Wr.CANDIDATE,t=>{if(this._p2pChannel instanceof Ia){const{candidate:n,direction:i}=t;this._p2pChannel.addRemoteCandidate(n,i)}}),this._p2pChannel.on(At.RequestP2PRestartICE,async(t,n,i)=>{try{const{direction:a}=t;n(await this._gateway.sendExtensionMessage(Wr.RESTART_ICE,t,a===Do.SEND_ONLY))}catch(a){i(a)}}),this._p2pChannel.on(At.LocalCandidate,t=>{this._gateway.sendExtensionMessage(Wr.CANDIDATE,JSON.stringify(t),!0)}),this._p2pChannel.on(At.RequestP2PMuteLocal,async(t,n,i)=>{try{await this._gateway.sendExtensionMessage(Wr.CONTROL,t,!0),n()}catch(a){i(a)}}),this._p2pChannel.on(At.RequestP2PUnmuteRemote,async(t,n,i)=>{if(this._joinInfo)try{await this._gateway.unmuteRemote(t,this._joinInfo.stringUid||this._joinInfo.uid),n()}catch(a){a.code===K.DISCONNECT_P2P?n():i(a)}else n()}),this._p2pChannel.on(At.RequestP2PMuteRemote,async(t,n,i)=>{if(this._joinInfo)try{await this._gateway.muteRemote(t,this._joinInfo.stringUid||this._joinInfo.uid),n()}catch(a){a.code===K.DISCONNECT_P2P?n():i(a)}else n()}),this._p2pChannel.on(At.StateChange,(t,n)=>{n===$n.Connected&&this._p2pChannel.republish()})}_handleP2PChannelEvents(){this._p2pChannel.on(At.RequestMuteLocal,async(t,n,i)=>{if(this._joinInfo)try{await this._gateway.muteLocal(t,this._joinInfo.stringUid||this._joinInfo.uid),n()}catch(a){a.code===K.DISCONNECT_P2P?n():i(a)}else n()}),this._p2pChannel.on(At.RequestUnmuteLocal,async(t,n,i)=>{if(this._joinInfo)try{await this._gateway.unmuteLocal(t,this._joinInfo.stringUid||this._joinInfo.uid),n()}catch(a){a.code===K.DISCONNECT_P2P?n():i(a)}else n()}),this._p2pChannel.on(At.RequestRePublish,(t,n,i)=>{this.publish(t,!1).then(n).catch(i)}),this._p2pChannel.on(At.RequestRePublishDataChannel,(t,n,i)=>{We.all(t.map(async a=>{await this._p2pChannel.publishDataChannel([a]);const l={streamId:a.id,ordered:a.ordered,maxRetransmits:a.maxRetransmits,metadata:a.metadata,channelId:a._originDataChannelId};try{await this._gateway.publishDataChannel(this._uid,l,!0)}catch(u){if(u.code!==K.DISCONNECT_P2P)throw u}})).then(n).catch(i)}),this._p2pChannel.on(At.RequestReSubscribe,async(t,n,i)=>{try{for(const{user:a,kind:l}of t)l===ut.VIDEO?await this.subscribe(a,"video"):await this.subscribe(a,"audio");n()}catch(a){i(a)}}),this._p2pChannel.on(At.RequestUpload,(t,n)=>{this._gateway.upload(t,n)}),this._p2pChannel.on(At.RequestUploadStats,t=>{this._gateway.uploadWRTCStats(t)}),this._p2pChannel.on(At.MediaReconnectStart,t=>{this.safeEmit(sn.MEDIA_RECONNECT_START,t)}),this._p2pChannel.on(At.MediaReconnectEnd,t=>{this.safeEmit(sn.MEDIA_RECONNECT_END,t)}),this._p2pChannel.on(At.NeedSignalRTT,t=>{t(this._gateway.getSignalRTT())}),this._p2pChannel.on(At.RequestRestartICE,async t=>{if(this._p2pChannel instanceof Ia)return;const n=await this._p2pChannel.restartICE(t),i=await n.next();if(i.done)return;const a=i.value;let l;try{l=await this._gateway.restartICE({iceParameters:a})}catch(h){return void n.throw(h)}const{iceParameters:u}=function(h){const f=h.iceParameters;return{iceParameters:{iceUfrag:f.iceUfrag,icePwd:f.icePwd}}}(l);await n.next({remoteIceParameters:u})}),this._p2pChannel.on(At.RequestReconnect,async()=>{this._gateway.reconnect()}),this._p2pChannel.on(At.RequestReconnectPC,async()=>{var t;const{iceParameters:n,dtlsParameters:i,rtpCapabilities:a}=await this._p2pChannel.startP2PConnection({turnServer:(t=this._joinInfo)===null||t===void 0?void 0:t.turnServer}),{gatewayEstablishParams:l,gatewayAddress:u}=await this._gateway.reconnectPC({iceParameters:n,dtlsParameters:i,rtpCapabilities:a}),{dtlsParameters:h,iceParameters:f,candidates:g,rtpCapabilities:_,setup:y,cname:T}=f6(l,u);await this._p2pChannel.connect(f,h,g,_,y,T),await this._p2pChannel.republish(),await this._p2pChannel.reSubscribe()}),this._p2pChannel.on(At.RequestUnpublishForReconnectPC,async(t,n,i)=>{this._joinInfo&&this._uid!==void 0?(await this._gateway.unpublish(t,this._uid),n()):i()}),this._p2pChannel.on(At.P2PLost,()=>{this.safeEmit(sn.P2P_LOST,this.store.uid)}),this._p2pChannel.on(At.UpdateVideoEncoder,t=>{t._encoderConfig&&this._gateway.setVideoProfile(t._encoderConfig)}),this._p2pChannel.on(At.ConnectionTypeChange,t=>{this.safeEmit(sn.IS_USING_CLOUD_PROXY,t)}),this._p2pChannel.on(At.RequestLowStreamParameter,t=>{t(this._lowStreamParameter||{width:160,height:120,framerate:15,bitrate:50})}),this._p2pChannel.on(At.QueryClientConnectionState,t=>{t(this.connectionState)})}getKeyMetrics(){return this.store.keyMetrics}async enableContentInspect(t){if(this.connectionState!=="CONNECTED"||!this._joinInfo)throw new me(K.INVALID_OPERATION,"[".concat(this._clientId,"] Client did not join channel"));if(this._inspect)throw new me(K.INVALID_OPERATION,"[".concat(this._clientId,"] Inspect content service already in connecting/connected state"));if(!t)throw new me(K.INVALID_PARAMS,"[".concat(this._clientId,"] inspectConfig is necessary"));if(!t.inspectType||!Array.isArray(t.inspectType))throw new me(K.INVALID_PARAMS,"[".concat(this._clientId,"] inspectConfig.inspectType is necessary and is an instance of Array."));{const n=[...new Set(t.inspectType)];n.forEach(i=>{var a;if(!Ye(a=["supervise","moderation"]).call(a,i))throw new me(K.INVALID_PARAMS,"[".concat(this._clientId,"] ").concat(i," is not a valid inspect type."))}),t.inspectType=n}if(t&&t.extraInfo&&t.extraInfo.length>1024)throw new me(K.INVALID_PARAMS,"[".concat(this._clientId,"] inspectConfig.extraInfo length cannot exceed 1024 bytes"));try{const n=new ES(t);this._inspect=n,this.handleVideoInspectEvents(this._inspect),await n.init({appId:this._joinInfo.appId,areaCode:"",cname:this._joinInfo.cname,sid:this._joinInfo.sid,token:this._joinInfo.token,uid:this._joinInfo.uid,cid:this._joinInfo.cid,vid:this._joinInfo.vid?Number(this._joinInfo.vid):0},qr)}catch(n){throw Array.isArray(n)?n[0]:n}}async disableContentInspect(){if(!this._inspect)throw new me(K.INVALID_OPERATION,"[".concat(this._clientId,"] inspectVideoContent not started"));try{this._inspect.close(),this._inspect=void 0}catch(t){throw Array.isArray(t)?t[0]:t}}async setImageModeration(t,n){if($l(t,"enabled"),t){if(!n)throw new me(K.INVALID_PARAMS,"[".concat(this._clientId,"] config is necessary"));if(Xn(n.interval,"interval",1e3,1/0),n&&n.extraInfo&&n.extraInfo.length>1024)throw new me(K.INVALID_PARAMS,"[".concat(this._clientId,"] config.extraInfo length cannot exceed 1024 bytes"));if(n&&n.vendor&&n.vendor.length>1024)throw new me(K.INVALID_PARAMS,"[".concat(this._clientId,"] config.vendor length cannot exceed 1024 bytes"));if(this.connectionState!=="CONNECTED"||!this._joinInfo)throw new me(K.INVALID_OPERATION,"[".concat(this._clientId,'] can not enable image moderation, not joined"'));try{if(this._moderation)return void this._moderation.updateConfig(n);const i=new WI(n);this._moderation=i,this.handleImageModerationEvents(this._moderation),await i.init({appId:this._joinInfo.appId,areaCode:"",cname:this._joinInfo.cname,sid:this._joinInfo.sid,token:this._joinInfo.token,uid:this._joinInfo.uid,cid:this._joinInfo.cid,vid:this._joinInfo.vid?Number(this._joinInfo.vid):0},qr)}catch(i){throw Array.isArray(i)?i[0]:i}}else{if(!this._moderation)throw new me(K.INVALID_OPERATION,"[".concat(this._clientId,"] image moderation not started"));try{this._moderation.close(),this._moderation.removeAllListeners(),this._moderation=void 0}catch(i){throw Array.isArray(i)?i[0]:i}}}setP2PTransport(t){if(function(n){pi(n,"transport",["default","auto","relay","sd-rtn"])}(t),this.mode!=="p2p")throw new me(K.INVALID_OPERATION,"only p2p mode can set p2pTransport");this.store.p2pTransport=t,k.info("[".concat(this._clientId,"] set client p2pTransport to ").concat(t))}handleImageModerationEvents(t){t.on(Rc.CONNECTION_STATE_CHANGE,(n,i)=>{if(this.safeEmit(sn.IMAGE_MODERATION_CONNECTION_STATE_CHANGE,n,i),n===ds.CONNECTED){if(this.connectionState!=="CONNECTED")throw this.setImageModeration(!1),new me(K.OPERATION_ABORTED,"Image moderation was cancelled because it left the channel");t.inspectImage()}}),t.on(Rc.CLIENT_LOCAL_VIDEO_TRACK,n=>{n(this.localTracks.filter(i=>i.trackMediaType==="video")[0])})}handleVideoInspectEvents(t){t.on(Di.CONNECTION_STATE_CHANGE,(n,i)=>{if(this.safeEmit(sn.CONTENT_INSPECT_CONNECTION_STATE_CHANGE,n,i),i===Vs.CONNECTED){if(this.connectionState!=="CONNECTED")return void this.safeEmit(sn.CONTENT_INSPECT_ERROR,new me(K.OPERATION_ABORTED,"Content inspect was cancelled because it left the channel"));t.inspectImage()}}),t.on(Di.INSPECT_RESULT,(n,i)=>{var a;if((i==null?void 0:i.code)===K.INVALID_OPERATION&&this.connectionState==="DISCONNECTED")return k.debug("Stop inspect content because that has left channel"),this==null||(a=this._inspect)===null||a===void 0||a.close(),void(this._inspect=void 0);this.safeEmit(sn.CONTENT_INSPECT_RESULT,n,i)}),t.on(Di.CLIENT_LOCAL_VIDEO_TRACK,n=>{n(this.localTracks.filter(i=>i.trackMediaType==="video")[0])})}getJoinChannelServiceRecords(){return k.debug("getJoinChannelServiceRecords"),this.store.joinChannelServiceRecords}async setPublishAudioFilterEnabled(t){$l(t,"enabled"),Jn("ENABLE_PUBLISH_AUDIO_FILTER",t),this._joinInfo&&await this._gateway.setPublishAudioFilterEnabled(t)}_handleResetAddStream(t,n){switch(n){case"audio":t._audio_added_=!1,t._trust_audio_stream_added_state_=!0;break;case"video":t._video_added_=!1,t._trust_video_stream_added_state_=!0}}},$e(Xe.prototype,"leave",[Bj],Object.getOwnPropertyDescriptor(Xe.prototype,"leave"),Xe.prototype),$e(Xe.prototype,"publish",[Vj],Object.getOwnPropertyDescriptor(Xe.prototype,"publish"),Xe.prototype),$e(Xe.prototype,"unpublish",[jj],Object.getOwnPropertyDescriptor(Xe.prototype,"unpublish"),Xe.prototype),$e(Xe.prototype,"subscribe",[$j],Object.getOwnPropertyDescriptor(Xe.prototype,"subscribe"),Xe.prototype),$e(Xe.prototype,"presubscribe",[Hj],Object.getOwnPropertyDescriptor(Xe.prototype,"presubscribe"),Xe.prototype),$e(Xe.prototype,"massSubscribe",[Wj],Object.getOwnPropertyDescriptor(Xe.prototype,"massSubscribe"),Xe.prototype),$e(Xe.prototype,"unsubscribe",[zj],Object.getOwnPropertyDescriptor(Xe.prototype,"unsubscribe"),Xe.prototype),$e(Xe.prototype,"massUnsubscribe",[Gj],Object.getOwnPropertyDescriptor(Xe.prototype,"massUnsubscribe"),Xe.prototype),$e(Xe.prototype,"setLowStreamParameter",[Kj],Object.getOwnPropertyDescriptor(Xe.prototype,"setLowStreamParameter"),Xe.prototype),$e(Xe.prototype,"enableDualStream",[qj],Object.getOwnPropertyDescriptor(Xe.prototype,"enableDualStream"),Xe.prototype),$e(Xe.prototype,"disableDualStream",[Yj],Object.getOwnPropertyDescriptor(Xe.prototype,"disableDualStream"),Xe.prototype),$e(Xe.prototype,"setClientRole",[Xj],Object.getOwnPropertyDescriptor(Xe.prototype,"setClientRole"),Xe.prototype),$e(Xe.prototype,"setProxyServer",[Jj],Object.getOwnPropertyDescriptor(Xe.prototype,"setProxyServer"),Xe.prototype),$e(Xe.prototype,"setTurnServer",[Qj],Object.getOwnPropertyDescriptor(Xe.prototype,"setTurnServer"),Xe.prototype),$e(Xe.prototype,"setLicense",[Zj],Object.getOwnPropertyDescriptor(Xe.prototype,"setLicense"),Xe.prototype),$e(Xe.prototype,"startProxyServer",[e8],Object.getOwnPropertyDescriptor(Xe.prototype,"startProxyServer"),Xe.prototype),$e(Xe.prototype,"stopProxyServer",[t8],Object.getOwnPropertyDescriptor(Xe.prototype,"stopProxyServer"),Xe.prototype),$e(Xe.prototype,"setLocalAccessPointsV2",[n8],Object.getOwnPropertyDescriptor(Xe.prototype,"setLocalAccessPointsV2"),Xe.prototype),$e(Xe.prototype,"setLocalAccessPoints",[r8],Object.getOwnPropertyDescriptor(Xe.prototype,"setLocalAccessPoints"),Xe.prototype),$e(Xe.prototype,"setRemoteDefaultVideoStreamType",[i8],Object.getOwnPropertyDescriptor(Xe.prototype,"setRemoteDefaultVideoStreamType"),Xe.prototype),$e(Xe.prototype,"setRemoteVideoStreamType",[o8],Object.getOwnPropertyDescriptor(Xe.prototype,"setRemoteVideoStreamType"),Xe.prototype),$e(Xe.prototype,"setStreamFallbackOption",[a8],Object.getOwnPropertyDescriptor(Xe.prototype,"setStreamFallbackOption"),Xe.prototype),$e(Xe.prototype,"setEncryptionConfig",[s8],Object.getOwnPropertyDescriptor(Xe.prototype,"setEncryptionConfig"),Xe.prototype),$e(Xe.prototype,"renewToken",[c8],Object.getOwnPropertyDescriptor(Xe.prototype,"renewToken"),Xe.prototype),$e(Xe.prototype,"enableAudioVolumeIndicator",[l8],Object.getOwnPropertyDescriptor(Xe.prototype,"enableAudioVolumeIndicator"),Xe.prototype),$e(Xe.prototype,"startLiveStreaming",[u8],Object.getOwnPropertyDescriptor(Xe.prototype,"startLiveStreaming"),Xe.prototype),$e(Xe.prototype,"setLiveTranscoding",[d8],Object.getOwnPropertyDescriptor(Xe.prototype,"setLiveTranscoding"),Xe.prototype),$e(Xe.prototype,"stopLiveStreaming",[h8],Object.getOwnPropertyDescriptor(Xe.prototype,"stopLiveStreaming"),Xe.prototype),$e(Xe.prototype,"addInjectStreamUrl",[p8],Object.getOwnPropertyDescriptor(Xe.prototype,"addInjectStreamUrl"),Xe.prototype),$e(Xe.prototype,"removeInjectStreamUrl",[f8],Object.getOwnPropertyDescriptor(Xe.prototype,"removeInjectStreamUrl"),Xe.prototype),$e(Xe.prototype,"startChannelMediaRelay",[m8],Object.getOwnPropertyDescriptor(Xe.prototype,"startChannelMediaRelay"),Xe.prototype),$e(Xe.prototype,"updateChannelMediaRelay",[g8],Object.getOwnPropertyDescriptor(Xe.prototype,"updateChannelMediaRelay"),Xe.prototype),$e(Xe.prototype,"stopChannelMediaRelay",[v8],Object.getOwnPropertyDescriptor(Xe.prototype,"stopChannelMediaRelay"),Xe.prototype),$e(Xe.prototype,"sendCustomReportMessage",[E8],Object.getOwnPropertyDescriptor(Xe.prototype,"sendCustomReportMessage"),Xe.prototype),$e(Xe.prototype,"pickSVCLayer",[_8],Object.getOwnPropertyDescriptor(Xe.prototype,"pickSVCLayer"),Xe.prototype),$e(Xe.prototype,"setRTMConfig",[S8],Object.getOwnPropertyDescriptor(Xe.prototype,"setRTMConfig"),Xe.prototype),$e(Xe.prototype,"enableContentInspect",[y8],Object.getOwnPropertyDescriptor(Xe.prototype,"enableContentInspect"),Xe.prototype),$e(Xe.prototype,"disableContentInspect",[C8],Object.getOwnPropertyDescriptor(Xe.prototype,"disableContentInspect"),Xe.prototype),$e(Xe.prototype,"setImageModeration",[b8],Object.getOwnPropertyDescriptor(Xe.prototype,"setImageModeration"),Xe.prototype),$e(Xe.prototype,"setP2PTransport",[T8],Object.getOwnPropertyDescriptor(Xe.prototype,"setP2PTransport"),Xe.prototype),$e(Xe.prototype,"getJoinChannelServiceRecords",[R8],Object.getOwnPropertyDescriptor(Xe.prototype,"getJoinChannelServiceRecords"),Xe.prototype),$e(Xe.prototype,"setPublishAudioFilterEnabled",[w8],Object.getOwnPropertyDescriptor(Xe.prototype,"setPublishAudioFilterEnabled"),Xe.prototype),Xe);class ag{constructor(n,i){V(this,"id",0),V(this,"element",void 0),V(this,"peerPair",void 0),V(this,"context",void 0),V(this,"audioPlayerElement",void 0),V(this,"audioTrack",void 0),ag.count+=1,this.id=ag.count,this.element=n,this.context=i}initPeers(){this.peerPair=[new RTCPeerConnection,new RTCPeerConnection],this.peerPair[1].ontrack=n=>{const i=document.createElement("audio");i.srcObject=new MediaStream([n.track]),i.play(),this.audioPlayerElement=i}}async switchSdp(){if(!this.peerPair)return;const n=async(a,l)=>{const u=l==="offer"?await a.createOffer():await a.createAnswer();return await a.setLocalDescription(u),a.iceGatheringState==="complete"?a.localDescription:new We(h=>{a.onicegatheringstatechange=()=>{a.iceGatheringState==="complete"&&h(a.localDescription)}})},i=async(a,l)=>await a.setRemoteDescription(l);try{const a=await n(this.peerPair[0],"offer");await i(this.peerPair[1],a);const l=await n(this.peerPair[1],"answer");await i(this.peerPair[0],l)}catch(a){throw new me(K.LOCAL_AEC_ERROR,a.toString()).print()}}async getTracksFromMediaElement(n){if(this.audioTrack)return this.audioTrack;let i;try{n instanceof HTMLVideoElement&&(n.captureStream?n.captureStream():n.mozCaptureStream()),i=this.context.createMediaStreamDestination(),this.context.createMediaElementSource(n).connect(i)}catch(l){throw new me(K.LOCAL_AEC_ERROR,l.toString()).print()}if(!i)throw new me(K.LOCAL_AEC_ERROR,"no dest node when local aec").print();const a=i.stream.getAudioTracks()[0];return this.audioTrack=a,a}getElement(){return this.element}async startEchoCancellation(){this.context.resume(),this.peerPair&&this.close(),this.initPeers();const n=this.element,i=await this.getTracksFromMediaElement(n);this.peerPair&&this.peerPair[0].addTrack(i),await this.switchSdp()}close(){k.debug("close echo cancellation unit, id is",this.id),this.audioPlayerElement&&this.audioPlayerElement.pause(),this.peerPair&&this.peerPair.forEach(n=>{n.close()}),this.peerPair=void 0,this.audioPlayerElement=void 0}}var A8,TS;V(ag,"count",0);const qpe=window.AudioContext||window.webkitAudioContext,Ype=new(A8=Rt({report:ht}),$e((TS=class{constructor(){V(this,"units",[]),V(this,"context",void 0)}processExternalMediaAEC(t){if(!this._doesEnvironmentNeedAEC())return k.debug("the system does not need to process local aec"),-1;this.context||(this.context=new qpe);let n=this.units.find(i=>i&&i.getElement()===t);return n||(n=new ag(t,this.context),this.units.push(n)),n.startEchoCancellation(),k.debug("start processing local audio echo cancellation, id is",n.id),n.id}_doesEnvironmentNeedAEC(){return _n().name!==Bn.SAFARI}}).prototype,"processExternalMediaAEC",[A8],Object.getOwnPropertyDescriptor(TS.prototype,"processExternalMediaAEC"),TS.prototype),TS);function O8(t,n){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),i.push.apply(i,a)}return i}function x8(t){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?O8(Object(i),!0).forEach(function(a){V(t,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):O8(Object(i)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(i,a))})}return t}const JI=window||document;function N8(t){let n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!JI)return;const i=oi._cspEventHandlerPointer;if(i&&n)return void console.error(i,n);const a=l=>{if(!(l&&l.blockedURI&&(oi.onSecurityPolicyViolation||oi.getListeners(dl.SECURITY_POLICY_VIOLATION).length>0)))return;const u=l.blockedURI;ee("CSP_DETECTED_HOSTNAME_LIST").some(h=>Ye(u).call(u,h))&&(oi.onSecurityPolicyViolation&&typeof oi.onSecurityPolicyViolation=="function"&&oi.onSecurityPolicyViolation(l),oi.getListeners(dl.SECURITY_POLICY_VIOLATION).length>0&&oi.safeEmit(dl.SECURITY_POLICY_VIOLATION,l))};i&&JI.removeEventListener("securitypolicyviolation",i),(n||t&&typeof t=="function"||oi.getListeners(dl.SECURITY_POLICY_VIOLATION).length>0)&&JI.addEventListener("securitypolicyviolation",a),oi._cspEventHandlerPointer=a}Jn("PROCESS_ID","process-".concat(tr(8,""),"-").concat(tr(4,""),"-").concat(tr(4,""),"-").concat(tr(4,""),"-").concat(tr(12,""))),function(){let t;try{t=window.localStorage.getItem("websdk_ng_global_parameter")}catch(n){return void k.error("Error loading sdk config",n.message)}if(t)try{const n=JSON.parse(window.atob(t)),i=Date.now();k.debug("Loading global parameters from cache",n),Object.keys(n).forEach(a=>{if(Object.prototype.hasOwnProperty.call(ui,a)){const{value:l,expires:u}=n[a];if(u&&u<=i)return;ju[a]=l,ui[a]=l}})}catch(n){k.error("Error loading mutableParamsCache: ".concat(t),n.message)}}(),Array.isArray(ju.AREAS)&&ju.AREAS.length>0&&d1(ju.AREAS,!0);const D8=(t,n,i)=>{k.debug("setParameter key:".concat(t,", value:").concat(JSON.stringify(n))),Jn(t,n,i)},oi=function(t){const n=new _r,i=t,a={getListeners:n.getListeners.bind(n),on:(l,u)=>(function(h,f){h===dl.SECURITY_POLICY_VIOLATION&&N8(f,!0)}(l,u),n.on.bind(n)(l,u)),addListener:n.addListener.bind(n),once:n.once.bind(n),off:n.off.bind(n),removeAllListeners:n.removeAllListeners.bind(n),emit:n.emit.bind(n),safeEmit:n.safeEmit.bind(n)};return x8(x8({},i),a)}({__TRACK_LIST__:uf,VERSION:ls,BUILD:qw,ESM_BUNDLER:!1,ESM:!1,UMD:!0,DEV:!1,setParameter:D8,getParameter:ee,getSupportedCodec:async function(){let t={audio:[],video:[]};try{let n=new RTCPeerConnection;const i=await async function(a){let l;return un().supportUnifiedPlan?(a.addTransceiver("video",{direction:"recvonly"}),a.addTransceiver("audio",{direction:"recvonly"}),l=(await a.createOffer()).sdp):l=(await a.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0})).sdp,l}(n);if(!i)return t;n.close(),n=null,t=function(a){const l={video:[],audio:[]};return a.match(/ VP8/i)&&l.video.push("VP8"),a.match(/ VP9/i)&&l.video.push("VP9"),a.match(/ AV1/i)&&l.video.push("AV1"),a.match(/ H264/i)&&l.video.push("H264"),a.match(/ H265/i)&&l.video.push("H265"),a.match(/ opus/i)&&l.audio.push("OPUS"),a.match(/ PCMU/i)&&l.audio.push("PCMU"),a.match(/ PCMA/i)&&l.audio.push("PCMA"),a.match(/ G722/i)&&l.audio.push("G722"),l}(i)}catch(n){throw new me(K.CREATE_OFFER_FAILED,n.toString&&n.toString()).print()}return t},checkSystemRequirements:function(){const t=ht.reportApiInvoke(null,{name:ni.CHECK_SYSTEM_REQUIREMENTS,options:[],tag:Nr.TRACER});let n=!1;try{const u=window.RTCPeerConnection,h=navigator.mediaDevices&&navigator.mediaDevices.getUserMedia,f=window.WebSocket;n=!!(u&&h&&f),n&&Mw()&&function(g){const _=_n();return!(_.name!==Bn.CHROME||!_.osVersion)&&Number(_.version)<g}(75)&&new u().close()}catch(u){return k.error("check system requirement failed: ",u),!1}let i=!1;const a=_n();a.name===Bn.CHROME&&Number(a.version)>=58&&(Cc.engine.name!=="WebKit"||function(){const u=_n();if(i_()){if(u.os===_i.MAC_OS)return!0;if(u.os===_i.IOS){const h=Cc.os.version&&Cc.os.version.split(".");if(h&&Number(h[0])===14&&h[1]&&Number(h[1])>=3||h&&Number(h[0])>14)return!0}}return!1}())&&(i=!0),(a.name===Bn.FIREFOX&&Number(a.version)>=56||a.name===Bn.OPERA&&Number(a.version)>=45||a.name===Bn.SAFARI&&Number(a.version)>=11||a.name==="WebKit"&&(Ji()||Us())&&a.osVersion&&Number(a.osVersion.split(".")[0])>=11||f4()||_n().name===Bn.QQ)&&(i=!0),k.debug("checkSystemRequirements, api:",n,"browser",i);const l=n&&i;return t.onSuccess(l),l},getDevices:function(t){return qa.enumerateDevices(!0,!0,t)},getMicrophones:function(t){return qa.getRecordingDevices(t)},getCameras:function(t){return qa.getCamerasDevices(t)},getElectronScreenSources:i5,getPlaybackDevices:function(t){return qa.getSpeakers(t)},createClient:function(){var t;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{codec:"vp8",audioCodec:"opus",mode:"rtc"};const i=ht.reportApiInvoke(null,{name:ni.CREATE_CLIENT,options:[n],tag:Nr.TRACER});try{(function(a){pi(a.codec,"config.codec",["vp8","vp9","av1","h264","h265"]),pi(a.mode,"config.mode",["rtc","live","p2p"]),a.audioCodec!==void 0&&pi(a.audioCodec,"config.audioCodec",["opus","pcmu","pcma","g722"]),a.proxyServer!==void 0&&Mi(a.proxyServer,"config.proxyServer",1,1e4),a.turnServer!==void 0&&T4(a.turnServer),a.httpRetryConfig!==void 0&&b4(a.httpRetryConfig),a.websocketRetryConfig!==void 0&&b4(a.websocketRetryConfig)})(n)}catch(a){throw i.onError(a),a}return(c4(16,0,!0)||l4(16,0,!0))&&(n.codec==="vp9"&&(n.codec="vp8",k.debug("browser not support vp9, force use vp8")),Jn("UNSUPPORTED_VIDEO_CODEC",["vp9"])),n.audioCodec===void 0&&(n.audioCodec="opus"),i.onSuccess(),new Kpe(vs(vs({forceWaitGatewayResponse:!0},n),{},{role:Ye(t=["rtc","p2p"]).call(t,n.mode)?"host":n.role||"audience"}))},createCameraVideoTrack:async function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=ee("CAMERA_CAPTURE_CONFIG"),i=ht.reportApiInvoke(null,{tag:Nr.TRACER,name:ni.CREATE_CAM_VIDEO_TRACK,options:[Sr({},t),n]});n&&(t.encoderConfig=n);const a=X_(t),l=tr(8,"track-cam-");let u=null;const h=t.encoderConfig==="720p_auto";k.info("start create camera video track with config",JSON.stringify(t),"trackId",l);try{u=(await Ka({video:a},l)).getVideoTracks()[0]||null}catch(g){throw i.onError(g),g}if(!u){const g=new Ce(K.UNEXPECTED_ERROR,"can not find track in media stream");return i.onError(g),g.throw(k)}t.optimizationMode&&_I(l,u,t,vl(t.encoderConfig));const f=new EI(u,t,a,t.scalabiltyMode?G_(t.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},t.optimizationMode,l);return h&&f.startMonitorStats(),i.onSuccess(f.getTrackId()),k.info("create camera video success, trackId:",l),f},createCustomVideoTrack:function(t){const n=ht.reportApiInvoke(null,{tag:Nr.TRACER,name:ni.CREATE_CUSTOM_VIDEO_TRACK,options:[t]}),i=new nr(t.mediaStreamTrack,{width:t.width,height:t.height,frameRate:t.frameRate,bitrateMax:t.bitrateMax,bitrateMin:t.bitrateMin},t.scalabiltyMode?G_(t.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},t.optimizationMode,tr(8,"track-cus-"),[ar.CUSTOM_TRACK]);return n.onSuccess(i.getTrackId()),k.info("create custom video track success with config",t,"trackId",i.getTrackId()),i},createScreenVideoTrack:async function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"disable";const i=ht.reportApiInvoke(null,{tag:Nr.TRACER,name:ni.CREATE_SCREEN_VIDEO_TRACK,options:[Sr({},t),n]}),a=t.encoderConfig==="720p_auto";t.encoderConfig?typeof t.encoderConfig=="string"||t.encoderConfig.width&&t.encoderConfig.height||(t.encoderConfig.width={max:1920},t.encoderConfig.height={max:1080}):t.encoderConfig="1080p_2";const l=function(T){const A={};T.screenSourceType&&(A.mediaSource=T.screenSourceType),T.extensionId&&Fu()&&(A.extensionId=T.extensionId);const{displaySurface:D,selfBrowserSurface:W,surfaceSwitching:F,systemAudio:U}=T;(Lw(107)||a4(107)||u4(93))&&(D&&(pi(D,"displaySurface",["browser","window","monitor"]),A.displaySurface=D),W?(pi(W,"selfBrowserSurface",["exclude","include"]),A.selfBrowserSurface=W):A.selfBrowserSurface="include",F&&(pi(F,"surfaceSwitching",["exclude","include"]),A.surfaceSwitching=F)),(Lw(105)||a4(105)||u4(91))&&U&&(pi(U,"systemAudio",["exclude","include"]),A.systemAudio=U),T.electronScreenSourceId&&(A.sourceId=T.electronScreenSourceId);const z=T.encoderConfig?sI(T.encoderConfig):null;return A.mandatory={chromeMediaSource:"desktop",maxWidth:z?z.width:void 0,maxHeight:z?z.height:void 0},z&&(z.frameRate&&(typeof z.frameRate=="number"?(A.mandatory.maxFrameRate=z.frameRate,A.mandatory.minFrameRate=z.frameRate):(A.mandatory.maxFrameRate=z.frameRate.max||z.frameRate.ideal||z.frameRate.exact||void 0,A.mandatory.minFrameRate=z.frameRate.min||z.frameRate.ideal||z.frameRate.exact||void 0),A.frameRate=z.frameRate),z.width&&(A.width=z.width),z.height&&(A.height=z.height)),A}(t),u=tr(8,"track-scr-v-");let h=null,f=null;const g=un();if(!g.supportShareAudio&&n==="enable"){const T=new Ce(K.NOT_SUPPORTED,"your browser or platform is not support share-screen with audio");return i.onError(T),T.throw(k)}k.info("start create screen video track with config",t,"withAudio",n,"trackId",u);try{const T=await Ka({screen:l,screenAudio:n==="auto"?g.supportShareAudio:n==="enable"},u);h=T.getVideoTracks()[0]||null,f=T.getAudioTracks()[0]||null}catch(T){throw i.onError(T),T}if(!h){const T=new Ce(K.UNEXPECTED_ERROR,"can not find track in media stream");return i.onError(T),T.throw(k)}if(!f&&n==="enable"){h&&h.stop();const T=new Ce(K.SHARE_AUDIO_NOT_ALLOWED);return i.onError(T),T.throw(k)}t.optimizationMode||(t.optimizationMode="detail"),t.optimizationMode&&(_I(u,h,t,t.encoderConfig&&sI(t.encoderConfig)||void 0),t.encoderConfig&&typeof t.encoderConfig!="string"&&(t.encoderConfig.bitrateMin=t.encoderConfig.bitrateMax));const _=new nr(h,t.encoderConfig?sI(t.encoderConfig):{},t.scalabiltyMode?G_(t.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},t.optimizationMode,u,[ar.SCREEN_TRACK]);if(a&&_.startMonitorStats(),!f)return i.onSuccess(_.getTrackId()),k.info("create screen video track success","video:",_.getTrackId()),_;const y=new Lr(f,void 0,tr(8,"track-scr-a-"),!1);return i.onSuccess([_.getTrackId(),y.getTrackId()]),k.info("create screen video track success","video:",_.getTrackId(),"audio:",y.getTrackId()),[_,y]},createMicrophoneAndCameraTracks:async function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=ee("CAMERA_CAPTURE_CONFIG"),a=ht.reportApiInvoke(null,{tag:Nr.TRACER,name:ni.CREATE_MIC_AND_CAM_TRACKS,options:[t,n,i]});i&&(n.encoderConfig=i);const l=n.encoderConfig==="720p_auto",u=X_(n),h=f5(t),f=tr(8,"track-mic-"),g=tr(8,"track-cam-");let _=null,y=null;k.info("start create camera video track(".concat(g,") and microphone audio track(").concat(f,") with config, audio: ").concat(JSON.stringify(t),", video: ").concat(JSON.stringify(n)));try{const D=await Ka({audio:h,video:u},"".concat(f,"-").concat(g));_=D.getAudioTracks()[0],y=D.getVideoTracks()[0]}catch(D){throw a.onError(D),D}if(!_||!y){const D=new Ce(K.UNEXPECTED_ERROR,"can not find tracks in media stream");return a.onError(D),D.throw(k)}n.optimizationMode&&_I(g,y,n,vl(n.encoderConfig));const T=new J_(_,t,h,f),A=new EI(y,n,u,n.scalabiltyMode?G_(n.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},n.optimizationMode,g);return l&&A.startMonitorStats(),a.onSuccess([T.getTrackId(),A.getTrackId()]),k.info("create camera video track(".concat(g,") and microphone audio track(").concat(f,") success")),[T,A]},createMicrophoneAudioTrack:async function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=ht.reportApiInvoke(null,{tag:Nr.TRACER,name:ni.CREATE_MIC_AUDIO_TRACK,options:[t]}),i=f5(t),a=tr(8,"track-mic-");let l=null;k.info("start create microphone audio track with config",JSON.stringify(t),"trackId",a);try{l=(await Ka({audio:i},a)).getAudioTracks()[0]||null}catch(h){throw n.onError(h),h}if(!l){const h=new Ce(K.UNEXPECTED_ERROR,"can not find track in media stream");return n.onError(h),h.throw(k)}const u=new J_(l,t,i,a);return n.onSuccess(u.getTrackId()),k.info("create microphone audio track success, trackId:",a),u},createCustomAudioTrack:function(t){const n=ht.reportApiInvoke(null,{tag:Nr.TRACER,name:ni.CREATE_CUSTOM_AUDIO_TRACK,options:[t]}),i=new Lr(t.mediaStreamTrack,t.encoderConfig?K_(t.encoderConfig):{},tr(8,"track-cus-"),!1);return k.info("create custom audio track success with config",t,"trackId",i.getTrackId()),n.onSuccess(i.getTrackId()),i},createBufferSourceAudioTrack:async function(t){var n;const{cacheOnlineFile:i,encoderConfig:a}=t;let{source:l}=t;const u={source:l instanceof AudioBuffer?"AudioBuffer":l instanceof File?(n=File.name)!==null&&n!==void 0?n:"File":l,cacheOnlineFile:i,encoderConfig:a},h=ht.reportApiInvoke(null,{tag:Nr.TRACER,name:ni.CREATE_BUFFER_AUDIO_TRACK,options:[u]});if(ee("DISABLE_WEBAUDIO"))throw new Ce(K.NOT_SUPPORTED,"can not create BufferSourceAudioTrack when WebAudio disabled");const f=tr(8,"track-buf-");k.info("start create buffer source audio track with config",JSON.stringify(u),"trackId",f);const g=l;if(!(l instanceof AudioBuffer))try{l=await async function(T,A){let D=null;if(typeof T=="string"){const F=eV.get(T);if(F)return k.debug("use cached audio resource: ",T),F;try{D=(await bc(()=>Go.get(T,{responseType:"arraybuffer"}),void 0,void 0,{maxRetryCount:3})).data}catch(U){throw new Ce(K.FETCH_AUDIO_FILE_FAILED,U.toString())}}else D=await new We((U,z)=>{const X=new FileReader;X.onload=ue=>{ue.target?U(ue.target.result):z(new Ce(K.READ_LOCAL_AUDIO_FILE_ERROR))},X.onerror=()=>{z(new Ce(K.READ_LOCAL_AUDIO_FILE_ERROR))},X.readAsArrayBuffer(T)});const W=await function(F){const U=mf();return new We((z,X)=>{U.decodeAudioData(F,ue=>{z(ue)},ue=>{X(new Ce(K.DECODE_AUDIO_FILE_FAILED,ue.toString()))})})}(D);return typeof T=="string"&&A&&eV.set(T,W),W}(l,i)}catch(T){return h.onError(T),T.throw(k)}const _=new Hhe(l),y=new $he(g,_,a?K_(a):{},f);return k.info("create buffer source audio track success, trackId:",f),h.onSuccess(y.getTrackId()),y},setAppType:function(t){if(k.debug("setAppType: ".concat(t)),!(Number.isInteger(t)&&t>=0))throw k.debug("Invalid appType"),new me(K.INVALID_PARAMS,"invalid app type",t);Jn("APP_TYPE",Math.floor(t))},setLogLevel:function(t){k.setLogLevel(t)},enableLogUpload:function(){ee("USE_NEW_LOG")?Jn("UPLOAD_LOG",!0):k.enableLogUpload()},disableLogUpload:function(){ee("USE_NEW_LOG")?Jn("UPLOAD_LOG",!1):k.disableLogUpload()},createChannelMediaRelayConfiguration:function(){return new B6},checkAudioTrackIsActive:async function(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5e3;const i=ht.reportApiInvoke(null,{tag:Nr.TRACER,name:ni.CHECK_AUDIO_TRACK_IS_ACTIVE,options:[n]});if(!(t instanceof Lr||t instanceof Ef)){const g=new me(K.INVALID_TRACK,"the parameter is not a audio track");return i.onError(g),g.throw()}n&&n<1e3&&(n=1e3);const a=t instanceof Lr?t.getTrackLabel():"remote_track",l=t.getVolumeLevel();let u=l,h=l;const f=Date.now();return new We(g=>{const _=setInterval(()=>{const y=t.getVolumeLevel();u=y>u?y:u,h=y<h?y:h;const T=u-h>1e-4,A=Date.now()-f;if(T||A>n){clearInterval(_);const D=T,W={duration:A,deviceLabel:a,maxVolumeLevel:u,result:D};k.info("[track-".concat(t.getTrackId(),"] check audio track active completed. ").concat(JSON.stringify(W))),i.onSuccess(W),g(D)}},200)})},checkVideoTrackIsActive:async function(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5e3;const i=ht.reportApiInvoke(null,{tag:Nr.TRACER,name:ni.CHECK_VIDEO_TRACK_IS_ACTIVE,options:[n]});if(!(t instanceof nr||t instanceof vf)){const T=new me(K.INVALID_TRACK,"the parameter is not a video track");return i.onError(T),T.throw()}n&&n<1e3&&(n=1e3);const a=t instanceof nr?t.getTrackLabel():"remote_track",l=t.getMediaStreamTrack(!0),u=document.createElement("video");u.style.width="1px",u.style.height="1px",u.setAttribute("muted",""),u.muted=!0,u.setAttribute("playsinline",""),u.controls=!1,(Si()||i_())&&(u.style.opacity="0.01",u.style.position="fixed",u.style.left="0",u.style.top="0",document.body.appendChild(u)),u.srcObject=new MediaStream([l]),u.play();const h=document.createElement("canvas");h.width=160,h.height=120;let f=0,g=0;try{const T=Date.now();f=await function(A,D,W,F){let U,z=0,X=null;return new We((ue,pe)=>{function Ee(){z>F&&U&&(U(),ue(z));const Se=W.getContext("2d");if(!Se){const Pe=new me(K.UNEXPECTED_ERROR,"can not get canvas 2d context.");return k.error(Pe.toString()),void pe(Pe)}Se.drawImage(A,0,0,160,120);const Re=Se.getImageData(0,0,W.width,W.height),Ae=Math.floor(Re.data.length/3);if(X){for(let Pe=0;Pe<Ae;Pe+=3)if(Re.data[Pe]!==X[Pe])return z+=1,void(X=Re.data);X=Re.data}else X=Re.data}setTimeout(()=>{U&&(U(),ue(z))},D),U=hI(()=>{Ee()},30)})}(u,n,h,4),g=Date.now()-T}catch(T){throw i.onError(T),T}Hpe===Bn.SAFARI&&(u.pause(),u.remove()),u.srcObject=null;const _=f>4,y={duration:g,changedPicNum:f,deviceLabel:a,result:_};return k.info("[track-".concat(t.getTrackId(),"] check video track active completed. ").concat(JSON.stringify(y))),i.onSuccess(y),_},setArea:d1,audioElementPlayCenter:qo,resumeAudioContext:function(){qo.autoResumeAfterInterruption(!0)},processExternalMediaAEC:function(t){Ype.processExternalMediaAEC(t)},registerExtensions:function(t){const n=ee("PLUGIN_INFO")||[];t.forEach(i=>{"name"in i&&!Ye(n).call(n,i.name)&&n.push(i.name);const a=i;a.__registered__=!0,a.logger.hookLog=k.extLog,a.reporter.hookApiInvoke=ht.extApiInvoke,a.parameters&&Object.keys(a.parameters).forEach(l=>{a.parameters[l]=ee(l)})}),D8("PLUGIN_INFO",n)},ChannelMediaRelayError:zp,ChannelMediaRelayEvent:Wl,ChannelMediaRelayState:ra,RemoteStreamFallbackType:khe,RemoteStreamType:Lhe,ConnectionDisconnectedReason:an,AudienceLatencyLevelType:Kce,AREAS:Dn,preload:async function(t,n,i,a){return Dj(t,n,i,a)}});return Object.defineProperties(oi,{onAudioAutoplayFailed:{get:()=>Ya.onAudioAutoplayFailed,set:t=>{Ya.onAudioAutoplayFailed=t}},onAutoplayFailed:{get:()=>Ya.onAutoplayFailed,set:t=>{Ya.onAutoplayFailed=t}},_onSecurityPolicyViolation:{value:void 0,writable:!0},_cspEventHandlerPointer:{value:void 0,writable:!0},onSecurityPolicyViolation:{get:()=>oi._onSecurityPolicyViolation,set(t){oi._onSecurityPolicyViolation=t,N8(t)}},__CLIENT_LIST__:{get:()=>ee("SHOW_GLOBAL_CLIENT_LIST")?$u:[]}}),qa.on(vh.CAMERA_DEVICE_CHANGED,t=>{k.info("camera device changed",JSON.stringify(t)),oi.onCameraChanged&&oi.onCameraChanged(t),oi.safeEmit(dl.CAMERA_CHANGED,t)}),qa.on(vh.RECORDING_DEVICE_CHANGED,t=>{k.info("microphone device changed",JSON.stringify(t)),oi.onMicrophoneChanged&&oi.onMicrophoneChanged(t),oi.safeEmit(dl.MICROPHONE_CHANGED,t)}),qa.on(vh.PLAYOUT_DEVICE_CHANGED,t=>{k.debug("playout device changed",JSON.stringify(t)),oi.onPlaybackDeviceChanged&&oi.onPlaybackDeviceChanged(t),oi.safeEmit(dl.PLAYBACK_DEVICE_CHANGED,t)}),qo.onAutoplayFailed=()=>{k.info("detect audio element autoplay failed"),Ya.onAudioAutoplayFailed&&Ya.onAudioAutoplayFailed()},zn.on("autoplay-failed",()=>{k.info("detect webaudio autoplay failed"),Ya.onAudioAutoplayFailed&&Ya.onAudioAutoplayFailed(),oi.safeEmit(dl.AUTOPLAY_FAILED)}),zn.on(Fi.STATE_CHANGE,(t,n)=>{k.info("audio context state changed: ".concat(n," => ").concat(t)),oi.onAudioContextStateChanged&&oi.onAudioContextStateChanged(t,n),oi.safeEmit(dl.AUDIO_CONTEXT_STATE_CHANGED,t,n)}),Dr.on(Qd.NETWORK_STATE_CHANGE,(t,n)=>{k.info("[network-indicator] network state changed, ".concat(n," => ").concat(t))}),window&&(window.__ARTC__=oi),oi})})(qW);var Sfe=qW.exports;const du=Ld(Sfe);function ma(e,r,o){return e.on(r,o),()=>e.off(r,o)}function yfe(e){try{return e()}catch(r){console.error(r)}}function rp(e){return()=>e.forEach(yfe)}function aD(e,r){const o=setTimeout(e,r);return()=>clearTimeout(o)}function sD(){let e,r,o;function s(){if(r){const E=r;r=void 0,E()}}async function c(){if(o){const E=o;o=void 0;try{await E()}catch(C){console.error(C)}}}async function d(E){e=!0,await c();try{o=await E()}catch(C){console.error(C)}e=!1,s()}async function p(){e=!0,await c(),e=!1,s()}function v(E){e?r=()=>d(E):d(E)}function m(){e?r=p:p()}return{run:v,dispose:m}}const WC=typeof document<"u"?S.useLayoutEffect:S.useEffect;function Cfe(e){return e!=null&&typeof e.then=="function"}function kd(){const e=S.useRef(!1);return S.useEffect(()=>(e.current=!1,()=>{e.current=!0}),[]),e}function bfe(){const e=kd();function r(o,s){return new Promise(async(c,d)=>{try{const p=await o;e.current||c(p)}catch(p){e.current?s&&s(p):d(p)}})}return S.useCallback(r,[e])}function zC(e){const r=bfe(),[o,s]=S.useState();return WC(()=>{Cfe(e)?r(e).then(s):s(e)},[e,r]),o}function ip(e,r){const o=S.useRef();S.useEffect(()=>{const{run:s,dispose:c}=o.current||(o.current=sD());return s(e),c},r)}function Tfe(e,r){const o=e.split("."),s=r.split("."),c=Math.max(o.length,s.length);for(let d=0;d<c;d++){const p=parseInt(o[d]||"0"),v=parseInt(s[d]||"0");if(p>v)return 1;if(p<v)return-1}return 0}function Rfe(e,r,o){const s=S.useRef(o);WC(()=>{s.current=o},[o]),S.useEffect(()=>{if(e)return ma(e,r,(...c)=>{s.current&&s.current(...c)})},[r,e])}function JW(e,r,o){const s=S.useRef(o);WC(()=>{s.current=o},[o]),S.useEffect(()=>{if(e)return ma(e,r,(...c)=>{s.current&&s.current(...c)})},[r,e])}const QW=S.createContext(null);function ZW({client:e,children:r}){return se.jsx(QW.Provider,{value:e,children:r})}function wfe(e){const r=S.useContext(QW);return e||r}function Os(e){const r=wfe(e);if(!r)throw new Error("Agora RTC client not found. Should be wrapped in <AgoraRTCProvider value={client} />");return r}const Ife=S.createContext(null);function Afe({client:e,children:r}){return se.jsx(Ife.Provider,{value:e,children:r})}function Ofe(e){const r=Os(e),[o,s]=S.useState(r?r.connectionState:"DISCONNECTED");return S.useEffect(()=>{if(r){s(r.connectionState);let c;return rp([ma(r,"connection-state-change",d=>{c==null||c(),d==="CONNECTED"?c=aD(()=>s(d),0):s(d)}),()=>c==null?void 0:c()])}else s("DISCONNECTED")},[r]),o}function mc(e){const r=Os(e),[o,s]=S.useState(r?r.connectionState==="CONNECTED":!1);return S.useEffect(()=>{if(r){s(r.connectionState==="CONNECTED");let c;return rp([ma(r,"connection-state-change",d=>{c==null||c(),c=aD(()=>s(d==="CONNECTED"),0)}),()=>c==null?void 0:c()])}else s(!1)},[r]),o}function GC(e){const r=Os(e),[o,s]=S.useState(r==null?void 0:r.uid);return S.useEffect(()=>{if(r)return ma(r,"connection-state-change",c=>{if(c==="CONNECTED")return aD(()=>s(r.uid),0);c==="DISCONNECTED"&&s(void 0)})},[r]),o}class ts extends Error{constructor(o,s){var r=(...args)=>{super(...args);IS(this,"rtcMethod");IS(this,"rtcError");IS(this,"name","AgoraRTCReactException")};r(typeof s=="string"?s:s.message),this.rtcMethod=o,this.rtcError=s}log(o){console[o](this)}}function no(e,r=!0,o){const s=Os(o),c=mc(o),d=S.useRef(),[p,v]=S.useState(!1),[m,E]=S.useState(0),[C,b]=S.useState(null),R=kd();return ip(async()=>{if(R.current||(b(null),E(0),v(!1)),r&&s){try{R.current||v(!0);const{appid:I,channel:O,token:x,uid:P}=typeof e=="function"?await e():e,N=await s.join(I,O,x,P);R.current||E(N)}catch(I){console.error(I),R.current||b(new ts("IAgoraRTCClient.join",I))}R.current||v(!1);const w=d.current||(d.current=sD());return rp([()=>{w.dispose()},()=>{w.run(()=>s.unpublish(s.localTracks))},()=>{for(const I of s.localTracks)I.isPlaying&&I.stop(),I.close();w.run(()=>s.leave())}])}},[r,o]),{data:m,isLoading:p,isConnected:c,error:C}}const F8=()=>({uplinkNetworkQuality:0,downlinkNetworkQuality:0,delay:0});function xfe(e){const r=Os(e),[o,s]=S.useState(F8);return S.useEffect(()=>{if(r)return ma(r,"network-quality",c=>s({uplinkNetworkQuality:c.uplinkNetworkQuality,downlinkNetworkQuality:c.downlinkNetworkQuality,delay:r.getRTCStats().RTT??0}));s(F8())},[r]),o}function Md(e,r=!0,o){const s=Os(o),c=mc(o),d=S.useRef([]),[p,v]=S.useState(!1),[m,E]=S.useState(null),C=kd();return ip(async()=>{if(C.current||(v(!1),E(null)),!s||!c||!r)return;const b=e.filter(Boolean),R=O=>{const x=Tfe(du.VERSION,"4.18.2")>=0;return x||new ts("usePublish","please check your agora-rtc-sdk-ng version in package.json, it's recommend upgrade to >= 4.18.2").log("warn"),x?s.mode!=="live"||s.role!=="audience":!0},w=O=>d.current.some(x=>x&&x.getTrackId()===O.getTrackId()),I=O=>R()&&O.enabled&&r&&!w(O);for(let O=0;O<b.length;O++){const x=b[O];if(x&&I(x)){await s.unpublish(d.current.filter(P=>(P==null?void 0:P.trackMediaType)===x.trackMediaType));try{C.current||v(!0),await s.publish(x)}catch(P){console.error(P),C.current||E(new ts("IAgoraRTCClient.publish",P))}C.current||v(!1)}}d.current=b},[c,r,s,e]),{isLoading:p,error:m}}function Cm(e=!0,r={ANS:!0,AEC:!0},o){const s=mc(o),[c,d]=S.useState(null),[p,v]=S.useState(!1),[m,E]=S.useState(null),C=kd();return ip(async()=>{if(C.current||(v(!1),E(null)),s&&e&&!c){try{C.current||v(!0);const b=await du.createMicrophoneAudioTrack(r);C.current||d(b)}catch(b){console.error(b),C.current||E(new ts("IAgoraRTC.createMicrophoneAudioTrack",b))}C.current||v(!1)}!s&&!C.current&&d(null)},[s,e]),{localMicrophoneTrack:c,isLoading:p,error:m}}function bm(e=!0,r,o){const s=mc(o),[c,d]=S.useState(null),[p,v]=S.useState(!1),[m,E]=S.useState(null),C=kd();return ip(async()=>{if(C.current||(v(!1),E(null)),s&&e&&!c){try{C.current||v(!0);const b=await du.createCameraVideoTrack(r);C.current||d(b)}catch(b){console.error(b),C.current||E(new ts("IAgoraRTC.createCameraVideoTrack",b))}C.current||v(!1)}!s&&!C.current&&d(null)},[s,e]),{localCameraTrack:c,isLoading:p,error:m}}function Tm(e,r){const o=Os(r),[s,c]=S.useState([]),d=mc(),p=S.useRef([]),[v,m]=S.useState(!1),[E,C]=S.useState(null),b=kd();return ip(async()=>{if(b.current||C(null),!Array.isArray(e)||!d)return;const R=async O=>{if(!O.audioTrack&&e.some(({uid:x})=>O.uid===x)){try{b.current||m(!0),await o.subscribe(O,"audio")}catch(x){console.error(x),b.current||C(new ts("IAgoraRTCClient.subscribe",x))}O.audioTrack&&!p.current.some(x=>x.getUserId()===O.uid)&&p.current.push(O.audioTrack),p.current=p.current.map(x=>O.audioTrack&&x.getUserId()===O.uid&&x.getTrackId()!==O.audioTrack.getTrackId()?O.audioTrack:x),b.current||(c([...p.current]),m(!1))}},w=async O=>{if(e.some(({uid:x})=>O.uid===x)){b.current||(p.current=p.current.filter(x=>x.getUserId()!==O.uid),c([...p.current]));try{b.current||m(!0),await o.unsubscribe(O,"audio")}catch(x){console.error(x),b.current||C(new ts("IAgoraRTCClient.unsubscribe",x))}b.current||m(!1)}};e.map(O=>{!O.audioTrack&&O.hasAudio&&R(O)});const I=[];for(let O=0;O<p.current.length;O++){const x=p.current[O];if(!e.some(P=>P.uid===x.getUserId())){const P=o.remoteUsers.find(N=>N.uid===x.getUserId());P&&I.push({user:P,mediaType:"audio"}),p.current.splice(O,1),O--}}if(I.length>0){try{b.current||m(!0),await o.massUnsubscribe(I)}catch(O){console.error(O),b.current||C(new ts("IAgoraRTCClient.massUnsubscribe",O))}b.current||(c(p.current.slice()),m(!1))}return rp([ma(o,"user-published",(O,x)=>{e.find(P=>P.uid===O.uid)&&x==="audio"&&R(O)}),ma(o,"user-unpublished",(O,x)=>{e.find(P=>P.uid===O.uid)&&x==="audio"&&w(O)})])},[d,o,e]),{audioTracks:s,isLoading:v,error:E}}function Rm(e,r){const o=Os(r),[s,c]=S.useState([]),d=mc(),p=S.useRef([]),[v,m]=S.useState(!1),[E,C]=S.useState(null),b=kd();return ip(async()=>{if(b.current||C(null),!Array.isArray(e)||!d)return;const R=async O=>{if(!O.videoTrack&&e.some(({uid:x})=>O.uid===x)){try{b.current||m(!0),await o.subscribe(O,"video")}catch(x){console.error(x),b.current||C(new ts("IAgoraRTCClient.subscribe",x))}O.videoTrack&&!p.current.some(x=>x.getUserId()===O.uid)&&p.current.push(O.videoTrack),p.current=p.current.map(x=>O.videoTrack&&x.getUserId()===O.uid&&x.getTrackId()!==O.videoTrack.getTrackId()?O.videoTrack:x),b.current||(c([...p.current]),m(!1))}},w=async O=>{if(e.some(({uid:x})=>O.uid===x)){b.current||(p.current=p.current.filter(x=>x.getUserId()!==O.uid),c([...p.current]));try{b.current||m(!0),await o.unsubscribe(O,"video")}catch(x){console.error(x),b.current||C(new ts("IAgoraRTCClient.unsubscribe",x))}b.current||m(!1)}};e.map(O=>{!O.videoTrack&&O.hasVideo&&R(O)});const I=[];for(let O=0;O<p.current.length;O++){const x=p.current[O];if(!e.some(P=>P.uid===x.getUserId())){const P=o.remoteUsers.find(N=>N.uid===x.getUserId());P&&I.push({user:P,mediaType:"video"}),p.current.splice(O,1),O--}}if(I.length>0){try{b.current||m(!0),await o.massUnsubscribe(I)}catch(O){console.error(O),b.current||C(new ts("IAgoraRTCClient.massUnsubscribe",O))}b.current||(c(p.current.slice()),m(!1))}return rp([ma(o,"user-published",(O,x)=>{e.find(P=>P.uid===O.uid)&&x==="video"&&R(O)}),ma(o,"user-unpublished",(O,x)=>{e.find(P=>P.uid===O.uid)&&x==="video"&&w(O)})])},[d,o,e]),{videoTracks:s,isLoading:v,error:E}}function U8(e,r,o){const s=Os(o),c=r==="audio"?"audioTrack":"videoTrack",[d,p]=S.useState(e&&e[c]),v=mc(),m=S.useRef(),[E,C]=S.useState(!1),[b,R]=S.useState(null);return S.useEffect(()=>{if(!e||!v)return;let w=!1;w||R(null);const I=r==="audio"?"hasAudio":"hasVideo",O=e.uid,x=async(L,M)=>{if(L[c]&&s.remoteUsers.some(({uid:j})=>L.uid===j))try{w||C(!0),await s.unsubscribe(L,M)}catch(j){w||R(new ts("IAgoraRTCClient.unsubscribe",j)),console.error(j)}w||(p(void 0),C(!1))},P=async(L,M)=>{try{!L[c]&&s.remoteUsers.some(({uid:j})=>L.uid===j)&&(w||C(!0),await s.subscribe(L,M)),w||p(L[c])}catch(j){w||R(new ts("IAgoraRTCClient.subscribe",j)),console.error(j)}w||C(!1)},N=m.current||(m.current=sD());return!e[c]&&e[I]?N.run(()=>P(e,r)):p(e[c]),rp([()=>{w=!0,N.dispose()},ma(s,"user-published",(L,M)=>{L.uid===O&&M===r&&N.run(()=>P(L,r))}),ma(s,"user-unpublished",(L,M)=>{L.uid===O&&M===r&&N.run(()=>x(L,r))})])},[v,s,e,r,c]),{track:d,isLoading:E,error:b}}function el(e){const r=Os(e),[o,s]=S.useState(r?r.remoteUsers:[]);return S.useEffect(()=>{if(r){const c=()=>s(r.remoteUsers.slice());return rp([ma(r,"user-joined",c),ma(r,"user-left",c),ma(r,"user-published",c),ma(r,"user-unpublished",c)])}},[r]),o}function ez(e=!0,r,o,s){const c=mc(s),[d,p]=S.useState(null),[v,m]=S.useState(!1),[E,C]=S.useState(null),b=kd();return ip(async()=>{if(b.current||(m(!1),C(null)),c&&e&&!d){try{b.current||m(!0);const R=await du.createScreenVideoTrack(r,o);b.current||p(R)}catch(R){console.error(R),b.current||C(new ts("IAgoraRTC.createScreenVideoTrack",R))}b.current||m(!1)}(!c||!e)&&!b.current&&p(null)},[c,e]),{screenTrack:d,isLoading:v,error:E}}const tz=S.createContext(void 0);function cD(e,r,o,s){const c=S.useContext(tz);S.useEffect(()=>{if(e)return s&&r?e.play(s,o||void 0):e.stop(),c?(c.onMount(e),()=>c.onUnmount(e)):()=>{e.isPlaying&&e.stop()}},[e,s,r,c,o])}function lD(e,r){const o=S.useContext(tz);WC(()=>{if(e)return r?e.play():e.stop(),o?(o.onMount(e),()=>o.onUnmount(e)):()=>{e.isPlaying&&e.stop()}},[e,r,o])}function KC({track:e,play:r=!1,volume:o,disabled:s,muted:c,children:d}){const p=zC(e);return lD(p,r),S.useEffect(()=>{p&&o!=null&&p.setVolume(o)},[p,o]),S.useEffect(()=>{p&&s!=null&&p.setEnabled(!s).catch(console.warn)},[s,p]),S.useEffect(()=>{p&&c!=null&&p.setMuted(c).catch(console.warn)},[c,p]),d?se.jsx(se.Fragment,{children:d}):null}const qC={position:"relative",width:"100%",height:"100%",overflow:"hidden",background:"#000"},nz={width:"100%",height:"100%"},Pv={position:"absolute",top:0,left:0,width:"100%",height:"100%",overflow:"hidden",zIndex:2},wm=(e,r)=>S.useMemo(()=>({...e,...r}),[e,r]);function Lv({track:e,play:r,disabled:o,muted:s,style:c,videoPlayerConfig:d,...p}){const v=wm(nz,c),[m,E]=S.useState(null),C=zC(e);return cD(C,r,d,m),S.useEffect(()=>{C&&o!=null&&C.setEnabled(!o).catch(console.warn)},[o,C]),S.useEffect(()=>{C&&s!=null&&C.setMuted(s).catch(console.warn)},[s,C]),se.jsx("div",{...p,ref:E,style:v})}const Nfe={width:"100%",height:"100%",background:"#1a1e21 center/cover no-repeat",filter:"blur(16px) brightness(0.4)"},Dfe={position:"absolute",top:"50%",left:"50%",maxWidth:"50%",maxHeight:"50%",aspectRatio:"1",transform:"translate(-50%, -50%)",borderRadius:"50%",overflow:"hidden",objectFit:"cover"};function YC({cover:e}){return se.jsx("div",{style:Pv,children:typeof e=="string"?se.jsxs(se.Fragment,{children:[se.jsx("div",{style:{...Nfe,backgroundImage:`url(${e})`}}),se.jsx("img",{src:e,style:Dfe})]}):e()})}function rz({micOn:e,cameraOn:r,audioTrack:o,videoTrack:s,playAudio:c,playVideo:d,volume:p,cover:v,children:m,style:E,...C}){const b=wm(qC,E);return d=d??!!r,c=c??!!e,se.jsxs("div",{...C,style:b,children:[se.jsx(Lv,{disabled:!r,play:d,track:s}),se.jsx(KC,{disabled:!e,play:c,track:o,volume:p}),v&&!r&&se.jsx(YC,{cover:v}),se.jsx("div",{style:Pv,children:m})]})}function iz({track:e,play:r=!1,playbackDeviceId:o,volume:s,children:c}){return lD(e,r),S.useEffect(()=>{e&&o!=null&&e.setPlaybackDevice(o).catch(console.warn)},[e,o]),S.useEffect(()=>{e&&s!=null&&e.setVolume(s)},[e,s]),c?se.jsx(se.Fragment,{children:c}):null}function uD({track:e,play:r,style:o,videoPlayerConfig:s,...c}){const d=wm(nz,o),[p,v]=S.useState(null);return cD(e,r,s,p),se.jsx("div",{...c,ref:v,style:d})}function dD({user:e,playVideo:r,playAudio:o,playbackDeviceId:s,volume:c,cover:d,style:p,children:v,videoPlayerConfig:m,...E}){const C=wm(qC,p),{track:b}=U8(e,"video"),{track:R}=U8(e,"audio");return r=r??(e==null?void 0:e.hasVideo),o=o??(e==null?void 0:e.hasAudio),se.jsxs("div",{...E,style:C,children:[se.jsx(uD,{play:r,track:b,videoPlayerConfig:m}),se.jsx(iz,{play:o,playbackDeviceId:s,track:R,volume:c}),d&&!r&&se.jsx(YC,{cover:d}),se.jsx("div",{style:Pv,children:v})]})}var nx={},oz={exports:{}},xs={},az={exports:{}},sz={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function r(te,de){var fe=te.length;te.push(de);e:for(;0<fe;){var ie=fe-1>>>1,le=te[ie];if(0<c(le,de))te[ie]=de,te[fe]=le,fe=ie;else break e}}function o(te){return te.length===0?null:te[0]}function s(te){if(te.length===0)return null;var de=te[0],fe=te.pop();if(fe!==de){te[0]=fe;e:for(var ie=0,le=te.length,ve=le>>>1;ie<ve;){var ge=2*(ie+1)-1,Te=te[ge],we=ge+1,Ie=te[we];if(0>c(Te,fe))we<le&&0>c(Ie,Te)?(te[ie]=Ie,te[we]=fe,ie=we):(te[ie]=Te,te[ge]=fe,ie=ge);else if(we<le&&0>c(Ie,fe))te[ie]=Ie,te[we]=fe,ie=we;else break e}}return de}function c(te,de){var fe=te.sortIndex-de.sortIndex;return fe!==0?fe:te.id-de.id}if(typeof performance=="object"&&typeof performance.now=="function"){var d=performance;e.unstable_now=function(){return d.now()}}else{var p=Date,v=p.now();e.unstable_now=function(){return p.now()-v}}var m=[],E=[],C=1,b=null,R=3,w=!1,I=!1,O=!1,x=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function L(te){for(var de=o(E);de!==null;){if(de.callback===null)s(E);else if(de.startTime<=te)s(E),de.sortIndex=de.expirationTime,r(m,de);else break;de=o(E)}}function M(te){if(O=!1,L(te),!I)if(o(m)!==null)I=!0,oe(j);else{var de=o(E);de!==null&&ae(M,de.startTime-te)}}function j(te,de){I=!1,O&&(O=!1,P(G),G=-1),w=!0;var fe=R;try{for(L(de),b=o(m);b!==null&&(!(b.expirationTime>de)||te&&!J());){var ie=b.callback;if(typeof ie=="function"){b.callback=null,R=b.priorityLevel;var le=ie(b.expirationTime<=de);de=e.unstable_now(),typeof le=="function"?b.callback=le:b===o(m)&&s(m),L(de)}else s(m);b=o(m)}if(b!==null)var ve=!0;else{var ge=o(E);ge!==null&&ae(M,ge.startTime-de),ve=!1}return ve}finally{b=null,R=fe,w=!1}}var $=!1,H=null,G=-1,Y=5,q=-1;function J(){return!(e.unstable_now()-q<Y)}function re(){if(H!==null){var te=e.unstable_now();q=te;var de=!0;try{de=H(!0,te)}finally{de?Z():($=!1,H=null)}}else $=!1}var Z;if(typeof N=="function")Z=function(){N(re)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,he=Q.port2;Q.port1.onmessage=re,Z=function(){he.postMessage(null)}}else Z=function(){x(re,0)};function oe(te){H=te,$||($=!0,Z())}function ae(te,de){G=x(function(){te(e.unstable_now())},de)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(te){te.callback=null},e.unstable_continueExecution=function(){I||w||(I=!0,oe(j))},e.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Y=0<te?Math.floor(1e3/te):5},e.unstable_getCurrentPriorityLevel=function(){return R},e.unstable_getFirstCallbackNode=function(){return o(m)},e.unstable_next=function(te){switch(R){case 1:case 2:case 3:var de=3;break;default:de=R}var fe=R;R=de;try{return te()}finally{R=fe}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(te,de){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var fe=R;R=te;try{return de()}finally{R=fe}},e.unstable_scheduleCallback=function(te,de,fe){var ie=e.unstable_now();switch(typeof fe=="object"&&fe!==null?(fe=fe.delay,fe=typeof fe=="number"&&0<fe?ie+fe:ie):fe=ie,te){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=fe+le,te={id:C++,callback:de,priorityLevel:te,startTime:fe,expirationTime:le,sortIndex:-1},fe>ie?(te.sortIndex=fe,r(E,te),o(m)===null&&te===o(E)&&(O?(P(G),G=-1):O=!0,ae(M,fe-ie))):(te.sortIndex=le,r(m,te),I||w||(I=!0,oe(j))),te},e.unstable_shouldYield=J,e.unstable_wrapCallback=function(te){var de=R;return function(){var fe=R;R=de;try{return te.apply(this,arguments)}finally{R=fe}}}})(sz);az.exports=sz;var Pfe=az.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lfe=S,Is=Pfe;function yt(e){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+e,o=1;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+e+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var cz=new Set,Jg={};function op(e,r){lm(e,r),lm(e+"Capture",r)}function lm(e,r){for(Jg[e]=r,e=0;e<r.length;e++)cz.add(r[e])}var hu=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),rx=Object.prototype.hasOwnProperty,kfe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,B8={},V8={};function Mfe(e){return rx.call(V8,e)?!0:rx.call(B8,e)?!1:kfe.test(e)?V8[e]=!0:(B8[e]=!0,!1)}function Ffe(e,r,o,s){if(o!==null&&o.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return s?!1:o!==null?!o.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Ufe(e,r,o,s){if(r===null||typeof r>"u"||Ffe(e,r,o,s))return!0;if(s)return!1;if(o!==null)switch(o.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function La(e,r,o,s,c,d,p){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=s,this.attributeNamespace=c,this.mustUseProperty=o,this.propertyName=e,this.type=r,this.sanitizeURL=d,this.removeEmptyString=p}var ta={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ta[e]=new La(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var r=e[0];ta[r]=new La(r,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ta[e]=new La(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ta[e]=new La(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ta[e]=new La(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ta[e]=new La(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ta[e]=new La(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ta[e]=new La(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ta[e]=new La(e,5,!1,e.toLowerCase(),null,!1,!1)});var hD=/[\-:]([a-z])/g;function pD(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var r=e.replace(hD,pD);ta[r]=new La(r,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var r=e.replace(hD,pD);ta[r]=new La(r,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var r=e.replace(hD,pD);ta[r]=new La(r,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ta[e]=new La(e,1,!1,e.toLowerCase(),null,!1,!1)});ta.xlinkHref=new La("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ta[e]=new La(e,1,!1,e.toLowerCase(),null,!0,!0)});function fD(e,r,o,s){var c=ta.hasOwnProperty(r)?ta[r]:null;(c!==null?c.type!==0:s||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(Ufe(r,o,c,s)&&(o=null),s||c===null?Mfe(r)&&(o===null?e.removeAttribute(r):e.setAttribute(r,""+o)):c.mustUseProperty?e[c.propertyName]=o===null?c.type===3?!1:"":o:(r=c.attributeName,s=c.attributeNamespace,o===null?e.removeAttribute(r):(c=c.type,o=c===3||c===4&&o===!0?"":""+o,s?e.setAttributeNS(s,r,o):e.setAttribute(r,o))))}var _u=Lfe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,OS=Symbol.for("react.element"),Vf=Symbol.for("react.portal"),jf=Symbol.for("react.fragment"),mD=Symbol.for("react.strict_mode"),ix=Symbol.for("react.profiler"),lz=Symbol.for("react.provider"),uz=Symbol.for("react.context"),gD=Symbol.for("react.forward_ref"),ox=Symbol.for("react.suspense"),ax=Symbol.for("react.suspense_list"),vD=Symbol.for("react.memo"),fd=Symbol.for("react.lazy"),dz=Symbol.for("react.offscreen"),j8=Symbol.iterator;function sg(e){return e===null||typeof e!="object"?null:(e=j8&&e[j8]||e["@@iterator"],typeof e=="function"?e:null)}var Vi=Object.assign,ZI;function Ag(e){if(ZI===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);ZI=r&&r[1]||""}return`
`+ZI+e}var eA=!1;function tA(e,r){if(!e||eA)return"";eA=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(E){var s=E}Reflect.construct(e,[],r)}else{try{r.call()}catch(E){s=E}e.call(r.prototype)}else{try{throw Error()}catch(E){s=E}e()}}catch(E){if(E&&s&&typeof E.stack=="string"){for(var c=E.stack.split(`
`),d=s.stack.split(`
`),p=c.length-1,v=d.length-1;1<=p&&0<=v&&c[p]!==d[v];)v--;for(;1<=p&&0<=v;p--,v--)if(c[p]!==d[v]){if(p!==1||v!==1)do if(p--,v--,0>v||c[p]!==d[v]){var m=`
`+c[p].replace(" at new "," at ");return e.displayName&&m.includes("<anonymous>")&&(m=m.replace("<anonymous>",e.displayName)),m}while(1<=p&&0<=v);break}}}finally{eA=!1,Error.prepareStackTrace=o}return(e=e?e.displayName||e.name:"")?Ag(e):""}function Bfe(e){switch(e.tag){case 5:return Ag(e.type);case 16:return Ag("Lazy");case 13:return Ag("Suspense");case 19:return Ag("SuspenseList");case 0:case 2:case 15:return e=tA(e.type,!1),e;case 11:return e=tA(e.type.render,!1),e;case 1:return e=tA(e.type,!0),e;default:return""}}function sx(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case jf:return"Fragment";case Vf:return"Portal";case ix:return"Profiler";case mD:return"StrictMode";case ox:return"Suspense";case ax:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case uz:return(e.displayName||"Context")+".Consumer";case lz:return(e._context.displayName||"Context")+".Provider";case gD:var r=e.render;return e=e.displayName,e||(e=r.displayName||r.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case vD:return r=e.displayName||null,r!==null?r:sx(e.type)||"Memo";case fd:r=e._payload,e=e._init;try{return sx(e(r))}catch{}}return null}function Vfe(e){var r=e.type;switch(e.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=r.render,e=e.displayName||e.name||"",r.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return sx(r);case 8:return r===mD?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function Dd(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function hz(e){var r=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function jfe(e){var r=hz(e)?"checked":"value",o=Object.getOwnPropertyDescriptor(e.constructor.prototype,r),s=""+e[r];if(!e.hasOwnProperty(r)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var c=o.get,d=o.set;return Object.defineProperty(e,r,{configurable:!0,get:function(){return c.call(this)},set:function(p){s=""+p,d.call(this,p)}}),Object.defineProperty(e,r,{enumerable:o.enumerable}),{getValue:function(){return s},setValue:function(p){s=""+p},stopTracking:function(){e._valueTracker=null,delete e[r]}}}}function xS(e){e._valueTracker||(e._valueTracker=jfe(e))}function pz(e){if(!e)return!1;var r=e._valueTracker;if(!r)return!0;var o=r.getValue(),s="";return e&&(s=hz(e)?e.checked?"true":"false":e.value),e=s,e!==o?(r.setValue(e),!0):!1}function zy(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function cx(e,r){var o=r.checked;return Vi({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??e._wrapperState.initialChecked})}function $8(e,r){var o=r.defaultValue==null?"":r.defaultValue,s=r.checked!=null?r.checked:r.defaultChecked;o=Dd(r.value!=null?r.value:o),e._wrapperState={initialChecked:s,initialValue:o,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function fz(e,r){r=r.checked,r!=null&&fD(e,"checked",r,!1)}function lx(e,r){fz(e,r);var o=Dd(r.value),s=r.type;if(o!=null)s==="number"?(o===0&&e.value===""||e.value!=o)&&(e.value=""+o):e.value!==""+o&&(e.value=""+o);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}r.hasOwnProperty("value")?ux(e,r.type,o):r.hasOwnProperty("defaultValue")&&ux(e,r.type,Dd(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(e.defaultChecked=!!r.defaultChecked)}function H8(e,r,o){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var s=r.type;if(!(s!=="submit"&&s!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+e._wrapperState.initialValue,o||r===e.value||(e.value=r),e.defaultValue=r}o=e.name,o!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,o!==""&&(e.name=o)}function ux(e,r,o){(r!=="number"||zy(e.ownerDocument)!==e)&&(o==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+o&&(e.defaultValue=""+o))}var Og=Array.isArray;function tm(e,r,o,s){if(e=e.options,r){r={};for(var c=0;c<o.length;c++)r["$"+o[c]]=!0;for(o=0;o<e.length;o++)c=r.hasOwnProperty("$"+e[o].value),e[o].selected!==c&&(e[o].selected=c),c&&s&&(e[o].defaultSelected=!0)}else{for(o=""+Dd(o),r=null,c=0;c<e.length;c++){if(e[c].value===o){e[c].selected=!0,s&&(e[c].defaultSelected=!0);return}r!==null||e[c].disabled||(r=e[c])}r!==null&&(r.selected=!0)}}function dx(e,r){if(r.dangerouslySetInnerHTML!=null)throw Error(yt(91));return Vi({},r,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function W8(e,r){var o=r.value;if(o==null){if(o=r.children,r=r.defaultValue,o!=null){if(r!=null)throw Error(yt(92));if(Og(o)){if(1<o.length)throw Error(yt(93));o=o[0]}r=o}r==null&&(r=""),o=r}e._wrapperState={initialValue:Dd(o)}}function mz(e,r){var o=Dd(r.value),s=Dd(r.defaultValue);o!=null&&(o=""+o,o!==e.value&&(e.value=o),r.defaultValue==null&&e.defaultValue!==o&&(e.defaultValue=o)),s!=null&&(e.defaultValue=""+s)}function z8(e){var r=e.textContent;r===e._wrapperState.initialValue&&r!==""&&r!==null&&(e.value=r)}function gz(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function hx(e,r){return e==null||e==="http://www.w3.org/1999/xhtml"?gz(r):e==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var NS,vz=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,o,s,c){MSApp.execUnsafeLocalFunction(function(){return e(r,o,s,c)})}:e}(function(e,r){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=r;else{for(NS=NS||document.createElement("div"),NS.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=NS.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;r.firstChild;)e.appendChild(r.firstChild)}});function Qg(e,r){if(r){var o=e.firstChild;if(o&&o===e.lastChild&&o.nodeType===3){o.nodeValue=r;return}}e.textContent=r}var Lg={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$fe=["Webkit","ms","Moz","O"];Object.keys(Lg).forEach(function(e){$fe.forEach(function(r){r=r+e.charAt(0).toUpperCase()+e.substring(1),Lg[r]=Lg[e]})});function Ez(e,r,o){return r==null||typeof r=="boolean"||r===""?"":o||typeof r!="number"||r===0||Lg.hasOwnProperty(e)&&Lg[e]?(""+r).trim():r+"px"}function _z(e,r){e=e.style;for(var o in r)if(r.hasOwnProperty(o)){var s=o.indexOf("--")===0,c=Ez(o,r[o],s);o==="float"&&(o="cssFloat"),s?e.setProperty(o,c):e[o]=c}}var Hfe=Vi({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function px(e,r){if(r){if(Hfe[e]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(yt(137,e));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(yt(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(yt(61))}if(r.style!=null&&typeof r.style!="object")throw Error(yt(62))}}function fx(e,r){if(e.indexOf("-")===-1)return typeof r.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mx=null;function ED(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var gx=null,nm=null,rm=null;function G8(e){if(e=Fv(e)){if(typeof gx!="function")throw Error(yt(280));var r=e.stateNode;r&&(r=eb(r),gx(e.stateNode,e.type,r))}}function Sz(e){nm?rm?rm.push(e):rm=[e]:nm=e}function yz(){if(nm){var e=nm,r=rm;if(rm=nm=null,G8(e),r)for(e=0;e<r.length;e++)G8(r[e])}}function Cz(e,r){return e(r)}function bz(){}var nA=!1;function Tz(e,r,o){if(nA)return e(r,o);nA=!0;try{return Cz(e,r,o)}finally{nA=!1,(nm!==null||rm!==null)&&(bz(),yz())}}function Zg(e,r){var o=e.stateNode;if(o===null)return null;var s=eb(o);if(s===null)return null;o=s[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(o&&typeof o!="function")throw Error(yt(231,r,typeof o));return o}var vx=!1;if(hu)try{var cg={};Object.defineProperty(cg,"passive",{get:function(){vx=!0}}),window.addEventListener("test",cg,cg),window.removeEventListener("test",cg,cg)}catch{vx=!1}function Wfe(e,r,o,s,c,d,p,v,m){var E=Array.prototype.slice.call(arguments,3);try{r.apply(o,E)}catch(C){this.onError(C)}}var kg=!1,Gy=null,Ky=!1,Ex=null,zfe={onError:function(e){kg=!0,Gy=e}};function Gfe(e,r,o,s,c,d,p,v,m){kg=!1,Gy=null,Wfe.apply(zfe,arguments)}function Kfe(e,r,o,s,c,d,p,v,m){if(Gfe.apply(this,arguments),kg){if(kg){var E=Gy;kg=!1,Gy=null}else throw Error(yt(198));Ky||(Ky=!0,Ex=E)}}function ap(e){var r=e,o=e;if(e.alternate)for(;r.return;)r=r.return;else{e=r;do r=e,r.flags&4098&&(o=r.return),e=r.return;while(e)}return r.tag===3?o:null}function Rz(e){if(e.tag===13){var r=e.memoizedState;if(r===null&&(e=e.alternate,e!==null&&(r=e.memoizedState)),r!==null)return r.dehydrated}return null}function K8(e){if(ap(e)!==e)throw Error(yt(188))}function qfe(e){var r=e.alternate;if(!r){if(r=ap(e),r===null)throw Error(yt(188));return r!==e?null:e}for(var o=e,s=r;;){var c=o.return;if(c===null)break;var d=c.alternate;if(d===null){if(s=c.return,s!==null){o=s;continue}break}if(c.child===d.child){for(d=c.child;d;){if(d===o)return K8(c),e;if(d===s)return K8(c),r;d=d.sibling}throw Error(yt(188))}if(o.return!==s.return)o=c,s=d;else{for(var p=!1,v=c.child;v;){if(v===o){p=!0,o=c,s=d;break}if(v===s){p=!0,s=c,o=d;break}v=v.sibling}if(!p){for(v=d.child;v;){if(v===o){p=!0,o=d,s=c;break}if(v===s){p=!0,s=d,o=c;break}v=v.sibling}if(!p)throw Error(yt(189))}}if(o.alternate!==s)throw Error(yt(190))}if(o.tag!==3)throw Error(yt(188));return o.stateNode.current===o?e:r}function wz(e){return e=qfe(e),e!==null?Iz(e):null}function Iz(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var r=Iz(e);if(r!==null)return r;e=e.sibling}return null}var Az=Is.unstable_scheduleCallback,q8=Is.unstable_cancelCallback,Yfe=Is.unstable_shouldYield,Xfe=Is.unstable_requestPaint,to=Is.unstable_now,Jfe=Is.unstable_getCurrentPriorityLevel,_D=Is.unstable_ImmediatePriority,Oz=Is.unstable_UserBlockingPriority,qy=Is.unstable_NormalPriority,Qfe=Is.unstable_LowPriority,xz=Is.unstable_IdlePriority,XC=null,Nl=null;function Zfe(e){if(Nl&&typeof Nl.onCommitFiberRoot=="function")try{Nl.onCommitFiberRoot(XC,e,void 0,(e.current.flags&128)===128)}catch{}}var zc=Math.clz32?Math.clz32:nme,eme=Math.log,tme=Math.LN2;function nme(e){return e>>>=0,e===0?32:31-(eme(e)/tme|0)|0}var DS=64,PS=4194304;function xg(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Yy(e,r){var o=e.pendingLanes;if(o===0)return 0;var s=0,c=e.suspendedLanes,d=e.pingedLanes,p=o&268435455;if(p!==0){var v=p&~c;v!==0?s=xg(v):(d&=p,d!==0&&(s=xg(d)))}else p=o&~c,p!==0?s=xg(p):d!==0&&(s=xg(d));if(s===0)return 0;if(r!==0&&r!==s&&!(r&c)&&(c=s&-s,d=r&-r,c>=d||c===16&&(d&4194240)!==0))return r;if(s&4&&(s|=o&16),r=e.entangledLanes,r!==0)for(e=e.entanglements,r&=s;0<r;)o=31-zc(r),c=1<<o,s|=e[o],r&=~c;return s}function rme(e,r){switch(e){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ime(e,r){for(var o=e.suspendedLanes,s=e.pingedLanes,c=e.expirationTimes,d=e.pendingLanes;0<d;){var p=31-zc(d),v=1<<p,m=c[p];m===-1?(!(v&o)||v&s)&&(c[p]=rme(v,r)):m<=r&&(e.expiredLanes|=v),d&=~v}}function _x(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Nz(){var e=DS;return DS<<=1,!(DS&4194240)&&(DS=64),e}function rA(e){for(var r=[],o=0;31>o;o++)r.push(e);return r}function kv(e,r,o){e.pendingLanes|=r,r!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,r=31-zc(r),e[r]=o}function ome(e,r){var o=e.pendingLanes&~r;e.pendingLanes=r,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=r,e.mutableReadLanes&=r,e.entangledLanes&=r,r=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<o;){var c=31-zc(o),d=1<<c;r[c]=0,s[c]=-1,e[c]=-1,o&=~d}}function SD(e,r){var o=e.entangledLanes|=r;for(e=e.entanglements;o;){var s=31-zc(o),c=1<<s;c&r|e[s]&r&&(e[s]|=r),o&=~c}}var Qr=0;function Dz(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Pz,yD,Lz,kz,Mz,Sx=!1,LS=[],Td=null,Rd=null,wd=null,ev=new Map,tv=new Map,gd=[],ame="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Y8(e,r){switch(e){case"focusin":case"focusout":Td=null;break;case"dragenter":case"dragleave":Rd=null;break;case"mouseover":case"mouseout":wd=null;break;case"pointerover":case"pointerout":ev.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":tv.delete(r.pointerId)}}function lg(e,r,o,s,c,d){return e===null||e.nativeEvent!==d?(e={blockedOn:r,domEventName:o,eventSystemFlags:s,nativeEvent:d,targetContainers:[c]},r!==null&&(r=Fv(r),r!==null&&yD(r)),e):(e.eventSystemFlags|=s,r=e.targetContainers,c!==null&&r.indexOf(c)===-1&&r.push(c),e)}function sme(e,r,o,s,c){switch(r){case"focusin":return Td=lg(Td,e,r,o,s,c),!0;case"dragenter":return Rd=lg(Rd,e,r,o,s,c),!0;case"mouseover":return wd=lg(wd,e,r,o,s,c),!0;case"pointerover":var d=c.pointerId;return ev.set(d,lg(ev.get(d)||null,e,r,o,s,c)),!0;case"gotpointercapture":return d=c.pointerId,tv.set(d,lg(tv.get(d)||null,e,r,o,s,c)),!0}return!1}function Fz(e){var r=Lh(e.target);if(r!==null){var o=ap(r);if(o!==null){if(r=o.tag,r===13){if(r=Rz(o),r!==null){e.blockedOn=r,Mz(e.priority,function(){Lz(o)});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){e.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Sy(e){if(e.blockedOn!==null)return!1;for(var r=e.targetContainers;0<r.length;){var o=yx(e.domEventName,e.eventSystemFlags,r[0],e.nativeEvent);if(o===null){o=e.nativeEvent;var s=new o.constructor(o.type,o);mx=s,o.target.dispatchEvent(s),mx=null}else return r=Fv(o),r!==null&&yD(r),e.blockedOn=o,!1;r.shift()}return!0}function X8(e,r,o){Sy(e)&&o.delete(r)}function cme(){Sx=!1,Td!==null&&Sy(Td)&&(Td=null),Rd!==null&&Sy(Rd)&&(Rd=null),wd!==null&&Sy(wd)&&(wd=null),ev.forEach(X8),tv.forEach(X8)}function ug(e,r){e.blockedOn===r&&(e.blockedOn=null,Sx||(Sx=!0,Is.unstable_scheduleCallback(Is.unstable_NormalPriority,cme)))}function nv(e){function r(c){return ug(c,e)}if(0<LS.length){ug(LS[0],e);for(var o=1;o<LS.length;o++){var s=LS[o];s.blockedOn===e&&(s.blockedOn=null)}}for(Td!==null&&ug(Td,e),Rd!==null&&ug(Rd,e),wd!==null&&ug(wd,e),ev.forEach(r),tv.forEach(r),o=0;o<gd.length;o++)s=gd[o],s.blockedOn===e&&(s.blockedOn=null);for(;0<gd.length&&(o=gd[0],o.blockedOn===null);)Fz(o),o.blockedOn===null&&gd.shift()}var im=_u.ReactCurrentBatchConfig,Xy=!0;function lme(e,r,o,s){var c=Qr,d=im.transition;im.transition=null;try{Qr=1,CD(e,r,o,s)}finally{Qr=c,im.transition=d}}function ume(e,r,o,s){var c=Qr,d=im.transition;im.transition=null;try{Qr=4,CD(e,r,o,s)}finally{Qr=c,im.transition=d}}function CD(e,r,o,s){if(Xy){var c=yx(e,r,o,s);if(c===null)pA(e,r,s,Jy,o),Y8(e,s);else if(sme(c,e,r,o,s))s.stopPropagation();else if(Y8(e,s),r&4&&-1<ame.indexOf(e)){for(;c!==null;){var d=Fv(c);if(d!==null&&Pz(d),d=yx(e,r,o,s),d===null&&pA(e,r,s,Jy,o),d===c)break;c=d}c!==null&&s.stopPropagation()}else pA(e,r,s,null,o)}}var Jy=null;function yx(e,r,o,s){if(Jy=null,e=ED(s),e=Lh(e),e!==null)if(r=ap(e),r===null)e=null;else if(o=r.tag,o===13){if(e=Rz(r),e!==null)return e;e=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;e=null}else r!==e&&(e=null);return Jy=e,null}function Uz(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Jfe()){case _D:return 1;case Oz:return 4;case qy:case Qfe:return 16;case xz:return 536870912;default:return 16}default:return 16}}var Ed=null,bD=null,yy=null;function Bz(){if(yy)return yy;var e,r=bD,o=r.length,s,c="value"in Ed?Ed.value:Ed.textContent,d=c.length;for(e=0;e<o&&r[e]===c[e];e++);var p=o-e;for(s=1;s<=p&&r[o-s]===c[d-s];s++);return yy=c.slice(e,1<s?1-s:void 0)}function Cy(e){var r=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&r===13&&(e=13)):e=r,e===10&&(e=13),32<=e||e===13?e:0}function kS(){return!0}function J8(){return!1}function Ns(e){function r(o,s,c,d,p){this._reactName=o,this._targetInst=c,this.type=s,this.nativeEvent=d,this.target=p,this.currentTarget=null;for(var v in e)e.hasOwnProperty(v)&&(o=e[v],this[v]=o?o(d):d[v]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?kS:J8,this.isPropagationStopped=J8,this}return Vi(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=kS)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=kS)},persist:function(){},isPersistent:kS}),r}var Im={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},TD=Ns(Im),Mv=Vi({},Im,{view:0,detail:0}),dme=Ns(Mv),iA,oA,dg,JC=Vi({},Mv,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:RD,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==dg&&(dg&&e.type==="mousemove"?(iA=e.screenX-dg.screenX,oA=e.screenY-dg.screenY):oA=iA=0,dg=e),iA)},movementY:function(e){return"movementY"in e?e.movementY:oA}}),Q8=Ns(JC),hme=Vi({},JC,{dataTransfer:0}),pme=Ns(hme),fme=Vi({},Mv,{relatedTarget:0}),aA=Ns(fme),mme=Vi({},Im,{animationName:0,elapsedTime:0,pseudoElement:0}),gme=Ns(mme),vme=Vi({},Im,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Eme=Ns(vme),_me=Vi({},Im,{data:0}),Z8=Ns(_me),Sme={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yme={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Cme={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bme(e){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(e):(e=Cme[e])?!!r[e]:!1}function RD(){return bme}var Tme=Vi({},Mv,{key:function(e){if(e.key){var r=Sme[e.key]||e.key;if(r!=="Unidentified")return r}return e.type==="keypress"?(e=Cy(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?yme[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:RD,charCode:function(e){return e.type==="keypress"?Cy(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Cy(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Rme=Ns(Tme),wme=Vi({},JC,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),e$=Ns(wme),Ime=Vi({},Mv,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:RD}),Ame=Ns(Ime),Ome=Vi({},Im,{propertyName:0,elapsedTime:0,pseudoElement:0}),xme=Ns(Ome),Nme=Vi({},JC,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dme=Ns(Nme),Pme=[9,13,27,32],wD=hu&&"CompositionEvent"in window,Mg=null;hu&&"documentMode"in document&&(Mg=document.documentMode);var Lme=hu&&"TextEvent"in window&&!Mg,Vz=hu&&(!wD||Mg&&8<Mg&&11>=Mg),t$=String.fromCharCode(32),n$=!1;function jz(e,r){switch(e){case"keyup":return Pme.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $z(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var $f=!1;function kme(e,r){switch(e){case"compositionend":return $z(r);case"keypress":return r.which!==32?null:(n$=!0,t$);case"textInput":return e=r.data,e===t$&&n$?null:e;default:return null}}function Mme(e,r){if($f)return e==="compositionend"||!wD&&jz(e,r)?(e=Bz(),yy=bD=Ed=null,$f=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Vz&&r.locale!=="ko"?null:r.data;default:return null}}var Fme={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function r$(e){var r=e&&e.nodeName&&e.nodeName.toLowerCase();return r==="input"?!!Fme[e.type]:r==="textarea"}function Hz(e,r,o,s){Sz(s),r=Qy(r,"onChange"),0<r.length&&(o=new TD("onChange","change",null,o,s),e.push({event:o,listeners:r}))}var Fg=null,rv=null;function Ume(e){eG(e,0)}function QC(e){var r=zf(e);if(pz(r))return e}function Bme(e,r){if(e==="change")return r}var Wz=!1;if(hu){var sA;if(hu){var cA="oninput"in document;if(!cA){var i$=document.createElement("div");i$.setAttribute("oninput","return;"),cA=typeof i$.oninput=="function"}sA=cA}else sA=!1;Wz=sA&&(!document.documentMode||9<document.documentMode)}function o$(){Fg&&(Fg.detachEvent("onpropertychange",zz),rv=Fg=null)}function zz(e){if(e.propertyName==="value"&&QC(rv)){var r=[];Hz(r,rv,e,ED(e)),Tz(Ume,r)}}function Vme(e,r,o){e==="focusin"?(o$(),Fg=r,rv=o,Fg.attachEvent("onpropertychange",zz)):e==="focusout"&&o$()}function jme(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return QC(rv)}function $me(e,r){if(e==="click")return QC(r)}function Hme(e,r){if(e==="input"||e==="change")return QC(r)}function Wme(e,r){return e===r&&(e!==0||1/e===1/r)||e!==e&&r!==r}var Xc=typeof Object.is=="function"?Object.is:Wme;function iv(e,r){if(Xc(e,r))return!0;if(typeof e!="object"||e===null||typeof r!="object"||r===null)return!1;var o=Object.keys(e),s=Object.keys(r);if(o.length!==s.length)return!1;for(s=0;s<o.length;s++){var c=o[s];if(!rx.call(r,c)||!Xc(e[c],r[c]))return!1}return!0}function a$(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function s$(e,r){var o=a$(e);e=0;for(var s;o;){if(o.nodeType===3){if(s=e+o.textContent.length,e<=r&&s>=r)return{node:o,offset:r-e};e=s}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=a$(o)}}function Gz(e,r){return e&&r?e===r?!0:e&&e.nodeType===3?!1:r&&r.nodeType===3?Gz(e,r.parentNode):"contains"in e?e.contains(r):e.compareDocumentPosition?!!(e.compareDocumentPosition(r)&16):!1:!1}function Kz(){for(var e=window,r=zy();r instanceof e.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)e=r.contentWindow;else break;r=zy(e.document)}return r}function ID(e){var r=e&&e.nodeName&&e.nodeName.toLowerCase();return r&&(r==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||r==="textarea"||e.contentEditable==="true")}function zme(e){var r=Kz(),o=e.focusedElem,s=e.selectionRange;if(r!==o&&o&&o.ownerDocument&&Gz(o.ownerDocument.documentElement,o)){if(s!==null&&ID(o)){if(r=s.start,e=s.end,e===void 0&&(e=r),"selectionStart"in o)o.selectionStart=r,o.selectionEnd=Math.min(e,o.value.length);else if(e=(r=o.ownerDocument||document)&&r.defaultView||window,e.getSelection){e=e.getSelection();var c=o.textContent.length,d=Math.min(s.start,c);s=s.end===void 0?d:Math.min(s.end,c),!e.extend&&d>s&&(c=s,s=d,d=c),c=s$(o,d);var p=s$(o,s);c&&p&&(e.rangeCount!==1||e.anchorNode!==c.node||e.anchorOffset!==c.offset||e.focusNode!==p.node||e.focusOffset!==p.offset)&&(r=r.createRange(),r.setStart(c.node,c.offset),e.removeAllRanges(),d>s?(e.addRange(r),e.extend(p.node,p.offset)):(r.setEnd(p.node,p.offset),e.addRange(r)))}}for(r=[],e=o;e=e.parentNode;)e.nodeType===1&&r.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<r.length;o++)e=r[o],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Gme=hu&&"documentMode"in document&&11>=document.documentMode,Hf=null,Cx=null,Ug=null,bx=!1;function c$(e,r,o){var s=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;bx||Hf==null||Hf!==zy(s)||(s=Hf,"selectionStart"in s&&ID(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Ug&&iv(Ug,s)||(Ug=s,s=Qy(Cx,"onSelect"),0<s.length&&(r=new TD("onSelect","select",null,r,o),e.push({event:r,listeners:s}),r.target=Hf)))}function MS(e,r){var o={};return o[e.toLowerCase()]=r.toLowerCase(),o["Webkit"+e]="webkit"+r,o["Moz"+e]="moz"+r,o}var Wf={animationend:MS("Animation","AnimationEnd"),animationiteration:MS("Animation","AnimationIteration"),animationstart:MS("Animation","AnimationStart"),transitionend:MS("Transition","TransitionEnd")},lA={},qz={};hu&&(qz=document.createElement("div").style,"AnimationEvent"in window||(delete Wf.animationend.animation,delete Wf.animationiteration.animation,delete Wf.animationstart.animation),"TransitionEvent"in window||delete Wf.transitionend.transition);function ZC(e){if(lA[e])return lA[e];if(!Wf[e])return e;var r=Wf[e],o;for(o in r)if(r.hasOwnProperty(o)&&o in qz)return lA[e]=r[o];return e}var Yz=ZC("animationend"),Xz=ZC("animationiteration"),Jz=ZC("animationstart"),Qz=ZC("transitionend"),Zz=new Map,l$="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Fd(e,r){Zz.set(e,r),op(r,[e])}for(var uA=0;uA<l$.length;uA++){var dA=l$[uA],Kme=dA.toLowerCase(),qme=dA[0].toUpperCase()+dA.slice(1);Fd(Kme,"on"+qme)}Fd(Yz,"onAnimationEnd");Fd(Xz,"onAnimationIteration");Fd(Jz,"onAnimationStart");Fd("dblclick","onDoubleClick");Fd("focusin","onFocus");Fd("focusout","onBlur");Fd(Qz,"onTransitionEnd");lm("onMouseEnter",["mouseout","mouseover"]);lm("onMouseLeave",["mouseout","mouseover"]);lm("onPointerEnter",["pointerout","pointerover"]);lm("onPointerLeave",["pointerout","pointerover"]);op("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));op("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));op("onBeforeInput",["compositionend","keypress","textInput","paste"]);op("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));op("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));op("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ng="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Yme=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ng));function u$(e,r,o){var s=e.type||"unknown-event";e.currentTarget=o,Kfe(s,r,void 0,e),e.currentTarget=null}function eG(e,r){r=(r&4)!==0;for(var o=0;o<e.length;o++){var s=e[o],c=s.event;s=s.listeners;e:{var d=void 0;if(r)for(var p=s.length-1;0<=p;p--){var v=s[p],m=v.instance,E=v.currentTarget;if(v=v.listener,m!==d&&c.isPropagationStopped())break e;u$(c,v,E),d=m}else for(p=0;p<s.length;p++){if(v=s[p],m=v.instance,E=v.currentTarget,v=v.listener,m!==d&&c.isPropagationStopped())break e;u$(c,v,E),d=m}}}if(Ky)throw e=Ex,Ky=!1,Ex=null,e}function Ti(e,r){var o=r[Ax];o===void 0&&(o=r[Ax]=new Set);var s=e+"__bubble";o.has(s)||(tG(r,e,2,!1),o.add(s))}function hA(e,r,o){var s=0;r&&(s|=4),tG(o,e,s,r)}var FS="_reactListening"+Math.random().toString(36).slice(2);function ov(e){if(!e[FS]){e[FS]=!0,cz.forEach(function(o){o!=="selectionchange"&&(Yme.has(o)||hA(o,!1,e),hA(o,!0,e))});var r=e.nodeType===9?e:e.ownerDocument;r===null||r[FS]||(r[FS]=!0,hA("selectionchange",!1,r))}}function tG(e,r,o,s){switch(Uz(r)){case 1:var c=lme;break;case 4:c=ume;break;default:c=CD}o=c.bind(null,r,o,e),c=void 0,!vx||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(c=!0),s?c!==void 0?e.addEventListener(r,o,{capture:!0,passive:c}):e.addEventListener(r,o,!0):c!==void 0?e.addEventListener(r,o,{passive:c}):e.addEventListener(r,o,!1)}function pA(e,r,o,s,c){var d=s;if(!(r&1)&&!(r&2)&&s!==null)e:for(;;){if(s===null)return;var p=s.tag;if(p===3||p===4){var v=s.stateNode.containerInfo;if(v===c||v.nodeType===8&&v.parentNode===c)break;if(p===4)for(p=s.return;p!==null;){var m=p.tag;if((m===3||m===4)&&(m=p.stateNode.containerInfo,m===c||m.nodeType===8&&m.parentNode===c))return;p=p.return}for(;v!==null;){if(p=Lh(v),p===null)return;if(m=p.tag,m===5||m===6){s=d=p;continue e}v=v.parentNode}}s=s.return}Tz(function(){var E=d,C=ED(o),b=[];e:{var R=Zz.get(e);if(R!==void 0){var w=TD,I=e;switch(e){case"keypress":if(Cy(o)===0)break e;case"keydown":case"keyup":w=Rme;break;case"focusin":I="focus",w=aA;break;case"focusout":I="blur",w=aA;break;case"beforeblur":case"afterblur":w=aA;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=Q8;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=pme;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=Ame;break;case Yz:case Xz:case Jz:w=gme;break;case Qz:w=xme;break;case"scroll":w=dme;break;case"wheel":w=Dme;break;case"copy":case"cut":case"paste":w=Eme;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=e$}var O=(r&4)!==0,x=!O&&e==="scroll",P=O?R!==null?R+"Capture":null:R;O=[];for(var N=E,L;N!==null;){L=N;var M=L.stateNode;if(L.tag===5&&M!==null&&(L=M,P!==null&&(M=Zg(N,P),M!=null&&O.push(av(N,M,L)))),x)break;N=N.return}0<O.length&&(R=new w(R,I,null,o,C),b.push({event:R,listeners:O}))}}if(!(r&7)){e:{if(R=e==="mouseover"||e==="pointerover",w=e==="mouseout"||e==="pointerout",R&&o!==mx&&(I=o.relatedTarget||o.fromElement)&&(Lh(I)||I[pu]))break e;if((w||R)&&(R=C.window===C?C:(R=C.ownerDocument)?R.defaultView||R.parentWindow:window,w?(I=o.relatedTarget||o.toElement,w=E,I=I?Lh(I):null,I!==null&&(x=ap(I),I!==x||I.tag!==5&&I.tag!==6)&&(I=null)):(w=null,I=E),w!==I)){if(O=Q8,M="onMouseLeave",P="onMouseEnter",N="mouse",(e==="pointerout"||e==="pointerover")&&(O=e$,M="onPointerLeave",P="onPointerEnter",N="pointer"),x=w==null?R:zf(w),L=I==null?R:zf(I),R=new O(M,N+"leave",w,o,C),R.target=x,R.relatedTarget=L,M=null,Lh(C)===E&&(O=new O(P,N+"enter",I,o,C),O.target=L,O.relatedTarget=x,M=O),x=M,w&&I)t:{for(O=w,P=I,N=0,L=O;L;L=Of(L))N++;for(L=0,M=P;M;M=Of(M))L++;for(;0<N-L;)O=Of(O),N--;for(;0<L-N;)P=Of(P),L--;for(;N--;){if(O===P||P!==null&&O===P.alternate)break t;O=Of(O),P=Of(P)}O=null}else O=null;w!==null&&d$(b,R,w,O,!1),I!==null&&x!==null&&d$(b,x,I,O,!0)}}e:{if(R=E?zf(E):window,w=R.nodeName&&R.nodeName.toLowerCase(),w==="select"||w==="input"&&R.type==="file")var j=Bme;else if(r$(R))if(Wz)j=Hme;else{j=jme;var $=Vme}else(w=R.nodeName)&&w.toLowerCase()==="input"&&(R.type==="checkbox"||R.type==="radio")&&(j=$me);if(j&&(j=j(e,E))){Hz(b,j,o,C);break e}$&&$(e,R,E),e==="focusout"&&($=R._wrapperState)&&$.controlled&&R.type==="number"&&ux(R,"number",R.value)}switch($=E?zf(E):window,e){case"focusin":(r$($)||$.contentEditable==="true")&&(Hf=$,Cx=E,Ug=null);break;case"focusout":Ug=Cx=Hf=null;break;case"mousedown":bx=!0;break;case"contextmenu":case"mouseup":case"dragend":bx=!1,c$(b,o,C);break;case"selectionchange":if(Gme)break;case"keydown":case"keyup":c$(b,o,C)}var H;if(wD)e:{switch(e){case"compositionstart":var G="onCompositionStart";break e;case"compositionend":G="onCompositionEnd";break e;case"compositionupdate":G="onCompositionUpdate";break e}G=void 0}else $f?jz(e,o)&&(G="onCompositionEnd"):e==="keydown"&&o.keyCode===229&&(G="onCompositionStart");G&&(Vz&&o.locale!=="ko"&&($f||G!=="onCompositionStart"?G==="onCompositionEnd"&&$f&&(H=Bz()):(Ed=C,bD="value"in Ed?Ed.value:Ed.textContent,$f=!0)),$=Qy(E,G),0<$.length&&(G=new Z8(G,e,null,o,C),b.push({event:G,listeners:$}),H?G.data=H:(H=$z(o),H!==null&&(G.data=H)))),(H=Lme?kme(e,o):Mme(e,o))&&(E=Qy(E,"onBeforeInput"),0<E.length&&(C=new Z8("onBeforeInput","beforeinput",null,o,C),b.push({event:C,listeners:E}),C.data=H))}eG(b,r)})}function av(e,r,o){return{instance:e,listener:r,currentTarget:o}}function Qy(e,r){for(var o=r+"Capture",s=[];e!==null;){var c=e,d=c.stateNode;c.tag===5&&d!==null&&(c=d,d=Zg(e,o),d!=null&&s.unshift(av(e,d,c)),d=Zg(e,r),d!=null&&s.push(av(e,d,c))),e=e.return}return s}function Of(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function d$(e,r,o,s,c){for(var d=r._reactName,p=[];o!==null&&o!==s;){var v=o,m=v.alternate,E=v.stateNode;if(m!==null&&m===s)break;v.tag===5&&E!==null&&(v=E,c?(m=Zg(o,d),m!=null&&p.unshift(av(o,m,v))):c||(m=Zg(o,d),m!=null&&p.push(av(o,m,v)))),o=o.return}p.length!==0&&e.push({event:r,listeners:p})}var Xme=/\r\n?/g,Jme=/\u0000|\uFFFD/g;function h$(e){return(typeof e=="string"?e:""+e).replace(Xme,`
`).replace(Jme,"")}function US(e,r,o){if(r=h$(r),h$(e)!==r&&o)throw Error(yt(425))}function Zy(){}var Tx=null,Rx=null;function wx(e,r){return e==="textarea"||e==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Ix=typeof setTimeout=="function"?setTimeout:void 0,Qme=typeof clearTimeout=="function"?clearTimeout:void 0,p$=typeof Promise=="function"?Promise:void 0,Zme=typeof queueMicrotask=="function"?queueMicrotask:typeof p$<"u"?function(e){return p$.resolve(null).then(e).catch(e0e)}:Ix;function e0e(e){setTimeout(function(){throw e})}function fA(e,r){var o=r,s=0;do{var c=o.nextSibling;if(e.removeChild(o),c&&c.nodeType===8)if(o=c.data,o==="/$"){if(s===0){e.removeChild(c),nv(r);return}s--}else o!=="$"&&o!=="$?"&&o!=="$!"||s++;o=c}while(o);nv(r)}function Id(e){for(;e!=null;e=e.nextSibling){var r=e.nodeType;if(r===1||r===3)break;if(r===8){if(r=e.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return e}function f$(e){e=e.previousSibling;for(var r=0;e;){if(e.nodeType===8){var o=e.data;if(o==="$"||o==="$!"||o==="$?"){if(r===0)return e;r--}else o==="/$"&&r++}e=e.previousSibling}return null}var Am=Math.random().toString(36).slice(2),Ol="__reactFiber$"+Am,sv="__reactProps$"+Am,pu="__reactContainer$"+Am,Ax="__reactEvents$"+Am,t0e="__reactListeners$"+Am,n0e="__reactHandles$"+Am;function Lh(e){var r=e[Ol];if(r)return r;for(var o=e.parentNode;o;){if(r=o[pu]||o[Ol]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(e=f$(e);e!==null;){if(o=e[Ol])return o;e=f$(e)}return r}e=o,o=e.parentNode}return null}function Fv(e){return e=e[Ol]||e[pu],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function zf(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(yt(33))}function eb(e){return e[sv]||null}var Ox=[],Gf=-1;function Ud(e){return{current:e}}function Ri(e){0>Gf||(e.current=Ox[Gf],Ox[Gf]=null,Gf--)}function mi(e,r){Gf++,Ox[Gf]=e.current,e.current=r}var Pd={},Ea=Ud(Pd),ns=Ud(!1),Gh=Pd;function um(e,r){var o=e.type.contextTypes;if(!o)return Pd;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===r)return s.__reactInternalMemoizedMaskedChildContext;var c={},d;for(d in o)c[d]=r[d];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=c),c}function rs(e){return e=e.childContextTypes,e!=null}function eC(){Ri(ns),Ri(Ea)}function m$(e,r,o){if(Ea.current!==Pd)throw Error(yt(168));mi(Ea,r),mi(ns,o)}function nG(e,r,o){var s=e.stateNode;if(r=r.childContextTypes,typeof s.getChildContext!="function")return o;s=s.getChildContext();for(var c in s)if(!(c in r))throw Error(yt(108,Vfe(e)||"Unknown",c));return Vi({},o,s)}function tC(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Pd,Gh=Ea.current,mi(Ea,e),mi(ns,ns.current),!0}function g$(e,r,o){var s=e.stateNode;if(!s)throw Error(yt(169));o?(e=nG(e,r,Gh),s.__reactInternalMemoizedMergedChildContext=e,Ri(ns),Ri(Ea),mi(Ea,e)):Ri(ns),mi(ns,o)}var ou=null,tb=!1,mA=!1;function rG(e){ou===null?ou=[e]:ou.push(e)}function r0e(e){tb=!0,rG(e)}function Bd(){if(!mA&&ou!==null){mA=!0;var e=0,r=Qr;try{var o=ou;for(Qr=1;e<o.length;e++){var s=o[e];do s=s(!0);while(s!==null)}ou=null,tb=!1}catch(c){throw ou!==null&&(ou=ou.slice(e+1)),Az(_D,Bd),c}finally{Qr=r,mA=!1}}return null}var Kf=[],qf=0,nC=null,rC=0,ac=[],sc=0,Kh=null,su=1,cu="";function Oh(e,r){Kf[qf++]=rC,Kf[qf++]=nC,nC=e,rC=r}function iG(e,r,o){ac[sc++]=su,ac[sc++]=cu,ac[sc++]=Kh,Kh=e;var s=su;e=cu;var c=32-zc(s)-1;s&=~(1<<c),o+=1;var d=32-zc(r)+c;if(30<d){var p=c-c%5;d=(s&(1<<p)-1).toString(32),s>>=p,c-=p,su=1<<32-zc(r)+c|o<<c|s,cu=d+e}else su=1<<d|o<<c|s,cu=e}function AD(e){e.return!==null&&(Oh(e,1),iG(e,1,0))}function OD(e){for(;e===nC;)nC=Kf[--qf],Kf[qf]=null,rC=Kf[--qf],Kf[qf]=null;for(;e===Kh;)Kh=ac[--sc],ac[sc]=null,cu=ac[--sc],ac[sc]=null,su=ac[--sc],ac[sc]=null}var Rs=null,bs=null,Li=!1,Hc=null;function oG(e,r){var o=cc(5,null,null,0);o.elementType="DELETED",o.stateNode=r,o.return=e,r=e.deletions,r===null?(e.deletions=[o],e.flags|=16):r.push(o)}function v$(e,r){switch(e.tag){case 5:var o=e.type;return r=r.nodeType!==1||o.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(e.stateNode=r,Rs=e,bs=Id(r.firstChild),!0):!1;case 6:return r=e.pendingProps===""||r.nodeType!==3?null:r,r!==null?(e.stateNode=r,Rs=e,bs=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(o=Kh!==null?{id:su,overflow:cu}:null,e.memoizedState={dehydrated:r,treeContext:o,retryLane:1073741824},o=cc(18,null,null,0),o.stateNode=r,o.return=e,e.child=o,Rs=e,bs=null,!0):!1;default:return!1}}function xx(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Nx(e){if(Li){var r=bs;if(r){var o=r;if(!v$(e,r)){if(xx(e))throw Error(yt(418));r=Id(o.nextSibling);var s=Rs;r&&v$(e,r)?oG(s,o):(e.flags=e.flags&-4097|2,Li=!1,Rs=e)}}else{if(xx(e))throw Error(yt(418));e.flags=e.flags&-4097|2,Li=!1,Rs=e}}}function E$(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Rs=e}function BS(e){if(e!==Rs)return!1;if(!Li)return E$(e),Li=!0,!1;var r;if((r=e.tag!==3)&&!(r=e.tag!==5)&&(r=e.type,r=r!=="head"&&r!=="body"&&!wx(e.type,e.memoizedProps)),r&&(r=bs)){if(xx(e))throw aG(),Error(yt(418));for(;r;)oG(e,r),r=Id(r.nextSibling)}if(E$(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(yt(317));e:{for(e=e.nextSibling,r=0;e;){if(e.nodeType===8){var o=e.data;if(o==="/$"){if(r===0){bs=Id(e.nextSibling);break e}r--}else o!=="$"&&o!=="$!"&&o!=="$?"||r++}e=e.nextSibling}bs=null}}else bs=Rs?Id(e.stateNode.nextSibling):null;return!0}function aG(){for(var e=bs;e;)e=Id(e.nextSibling)}function dm(){bs=Rs=null,Li=!1}function xD(e){Hc===null?Hc=[e]:Hc.push(e)}var i0e=_u.ReactCurrentBatchConfig;function hg(e,r,o){if(e=o.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(yt(309));var s=o.stateNode}if(!s)throw Error(yt(147,e));var c=s,d=""+e;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===d?r.ref:(r=function(p){var v=c.refs;p===null?delete v[d]:v[d]=p},r._stringRef=d,r)}if(typeof e!="string")throw Error(yt(284));if(!o._owner)throw Error(yt(290,e))}return e}function VS(e,r){throw e=Object.prototype.toString.call(r),Error(yt(31,e==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":e))}function _$(e){var r=e._init;return r(e._payload)}function sG(e){function r(P,N){if(e){var L=P.deletions;L===null?(P.deletions=[N],P.flags|=16):L.push(N)}}function o(P,N){if(!e)return null;for(;N!==null;)r(P,N),N=N.sibling;return null}function s(P,N){for(P=new Map;N!==null;)N.key!==null?P.set(N.key,N):P.set(N.index,N),N=N.sibling;return P}function c(P,N){return P=Nd(P,N),P.index=0,P.sibling=null,P}function d(P,N,L){return P.index=L,e?(L=P.alternate,L!==null?(L=L.index,L<N?(P.flags|=2,N):L):(P.flags|=2,N)):(P.flags|=1048576,N)}function p(P){return e&&P.alternate===null&&(P.flags|=2),P}function v(P,N,L,M){return N===null||N.tag!==6?(N=CA(L,P.mode,M),N.return=P,N):(N=c(N,L),N.return=P,N)}function m(P,N,L,M){var j=L.type;return j===jf?C(P,N,L.props.children,M,L.key):N!==null&&(N.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===fd&&_$(j)===N.type)?(M=c(N,L.props),M.ref=hg(P,N,L),M.return=P,M):(M=Oy(L.type,L.key,L.props,null,P.mode,M),M.ref=hg(P,N,L),M.return=P,M)}function E(P,N,L,M){return N===null||N.tag!==4||N.stateNode.containerInfo!==L.containerInfo||N.stateNode.implementation!==L.implementation?(N=bA(L,P.mode,M),N.return=P,N):(N=c(N,L.children||[]),N.return=P,N)}function C(P,N,L,M,j){return N===null||N.tag!==7?(N=Vh(L,P.mode,M,j),N.return=P,N):(N=c(N,L),N.return=P,N)}function b(P,N,L){if(typeof N=="string"&&N!==""||typeof N=="number")return N=CA(""+N,P.mode,L),N.return=P,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case OS:return L=Oy(N.type,N.key,N.props,null,P.mode,L),L.ref=hg(P,null,N),L.return=P,L;case Vf:return N=bA(N,P.mode,L),N.return=P,N;case fd:var M=N._init;return b(P,M(N._payload),L)}if(Og(N)||sg(N))return N=Vh(N,P.mode,L,null),N.return=P,N;VS(P,N)}return null}function R(P,N,L,M){var j=N!==null?N.key:null;if(typeof L=="string"&&L!==""||typeof L=="number")return j!==null?null:v(P,N,""+L,M);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case OS:return L.key===j?m(P,N,L,M):null;case Vf:return L.key===j?E(P,N,L,M):null;case fd:return j=L._init,R(P,N,j(L._payload),M)}if(Og(L)||sg(L))return j!==null?null:C(P,N,L,M,null);VS(P,L)}return null}function w(P,N,L,M,j){if(typeof M=="string"&&M!==""||typeof M=="number")return P=P.get(L)||null,v(N,P,""+M,j);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case OS:return P=P.get(M.key===null?L:M.key)||null,m(N,P,M,j);case Vf:return P=P.get(M.key===null?L:M.key)||null,E(N,P,M,j);case fd:var $=M._init;return w(P,N,L,$(M._payload),j)}if(Og(M)||sg(M))return P=P.get(L)||null,C(N,P,M,j,null);VS(N,M)}return null}function I(P,N,L,M){for(var j=null,$=null,H=N,G=N=0,Y=null;H!==null&&G<L.length;G++){H.index>G?(Y=H,H=null):Y=H.sibling;var q=R(P,H,L[G],M);if(q===null){H===null&&(H=Y);break}e&&H&&q.alternate===null&&r(P,H),N=d(q,N,G),$===null?j=q:$.sibling=q,$=q,H=Y}if(G===L.length)return o(P,H),Li&&Oh(P,G),j;if(H===null){for(;G<L.length;G++)H=b(P,L[G],M),H!==null&&(N=d(H,N,G),$===null?j=H:$.sibling=H,$=H);return Li&&Oh(P,G),j}for(H=s(P,H);G<L.length;G++)Y=w(H,P,G,L[G],M),Y!==null&&(e&&Y.alternate!==null&&H.delete(Y.key===null?G:Y.key),N=d(Y,N,G),$===null?j=Y:$.sibling=Y,$=Y);return e&&H.forEach(function(J){return r(P,J)}),Li&&Oh(P,G),j}function O(P,N,L,M){var j=sg(L);if(typeof j!="function")throw Error(yt(150));if(L=j.call(L),L==null)throw Error(yt(151));for(var $=j=null,H=N,G=N=0,Y=null,q=L.next();H!==null&&!q.done;G++,q=L.next()){H.index>G?(Y=H,H=null):Y=H.sibling;var J=R(P,H,q.value,M);if(J===null){H===null&&(H=Y);break}e&&H&&J.alternate===null&&r(P,H),N=d(J,N,G),$===null?j=J:$.sibling=J,$=J,H=Y}if(q.done)return o(P,H),Li&&Oh(P,G),j;if(H===null){for(;!q.done;G++,q=L.next())q=b(P,q.value,M),q!==null&&(N=d(q,N,G),$===null?j=q:$.sibling=q,$=q);return Li&&Oh(P,G),j}for(H=s(P,H);!q.done;G++,q=L.next())q=w(H,P,G,q.value,M),q!==null&&(e&&q.alternate!==null&&H.delete(q.key===null?G:q.key),N=d(q,N,G),$===null?j=q:$.sibling=q,$=q);return e&&H.forEach(function(re){return r(P,re)}),Li&&Oh(P,G),j}function x(P,N,L,M){if(typeof L=="object"&&L!==null&&L.type===jf&&L.key===null&&(L=L.props.children),typeof L=="object"&&L!==null){switch(L.$$typeof){case OS:e:{for(var j=L.key,$=N;$!==null;){if($.key===j){if(j=L.type,j===jf){if($.tag===7){o(P,$.sibling),N=c($,L.props.children),N.return=P,P=N;break e}}else if($.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===fd&&_$(j)===$.type){o(P,$.sibling),N=c($,L.props),N.ref=hg(P,$,L),N.return=P,P=N;break e}o(P,$);break}else r(P,$);$=$.sibling}L.type===jf?(N=Vh(L.props.children,P.mode,M,L.key),N.return=P,P=N):(M=Oy(L.type,L.key,L.props,null,P.mode,M),M.ref=hg(P,N,L),M.return=P,P=M)}return p(P);case Vf:e:{for($=L.key;N!==null;){if(N.key===$)if(N.tag===4&&N.stateNode.containerInfo===L.containerInfo&&N.stateNode.implementation===L.implementation){o(P,N.sibling),N=c(N,L.children||[]),N.return=P,P=N;break e}else{o(P,N);break}else r(P,N);N=N.sibling}N=bA(L,P.mode,M),N.return=P,P=N}return p(P);case fd:return $=L._init,x(P,N,$(L._payload),M)}if(Og(L))return I(P,N,L,M);if(sg(L))return O(P,N,L,M);VS(P,L)}return typeof L=="string"&&L!==""||typeof L=="number"?(L=""+L,N!==null&&N.tag===6?(o(P,N.sibling),N=c(N,L),N.return=P,P=N):(o(P,N),N=CA(L,P.mode,M),N.return=P,P=N),p(P)):o(P,N)}return x}var hm=sG(!0),cG=sG(!1),iC=Ud(null),oC=null,Yf=null,ND=null;function DD(){ND=Yf=oC=null}function PD(e){var r=iC.current;Ri(iC),e._currentValue=r}function Dx(e,r,o){for(;e!==null;){var s=e.alternate;if((e.childLanes&r)!==r?(e.childLanes|=r,s!==null&&(s.childLanes|=r)):s!==null&&(s.childLanes&r)!==r&&(s.childLanes|=r),e===o)break;e=e.return}}function om(e,r){oC=e,ND=Yf=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&r&&(es=!0),e.firstContext=null)}function dc(e){var r=e._currentValue;if(ND!==e)if(e={context:e,memoizedValue:r,next:null},Yf===null){if(oC===null)throw Error(yt(308));Yf=e,oC.dependencies={lanes:0,firstContext:e}}else Yf=Yf.next=e;return r}var kh=null;function LD(e){kh===null?kh=[e]:kh.push(e)}function lG(e,r,o,s){var c=r.interleaved;return c===null?(o.next=o,LD(r)):(o.next=c.next,c.next=o),r.interleaved=o,fu(e,s)}function fu(e,r){e.lanes|=r;var o=e.alternate;for(o!==null&&(o.lanes|=r),o=e,e=e.return;e!==null;)e.childLanes|=r,o=e.alternate,o!==null&&(o.childLanes|=r),o=e,e=e.return;return o.tag===3?o.stateNode:null}var md=!1;function kD(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function uG(e,r){e=e.updateQueue,r.updateQueue===e&&(r.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function lu(e,r){return{eventTime:e,lane:r,tag:0,payload:null,callback:null,next:null}}function Ad(e,r,o){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,Pr&2){var c=s.pending;return c===null?r.next=r:(r.next=c.next,c.next=r),s.pending=r,fu(e,o)}return c=s.interleaved,c===null?(r.next=r,LD(s)):(r.next=c.next,c.next=r),s.interleaved=r,fu(e,o)}function by(e,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194240)!==0)){var s=r.lanes;s&=e.pendingLanes,o|=s,r.lanes=o,SD(e,o)}}function S$(e,r){var o=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,o===s)){var c=null,d=null;if(o=o.firstBaseUpdate,o!==null){do{var p={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};d===null?c=d=p:d=d.next=p,o=o.next}while(o!==null);d===null?c=d=r:d=d.next=r}else c=d=r;o={baseState:s.baseState,firstBaseUpdate:c,lastBaseUpdate:d,shared:s.shared,effects:s.effects},e.updateQueue=o;return}e=o.lastBaseUpdate,e===null?o.firstBaseUpdate=r:e.next=r,o.lastBaseUpdate=r}function aC(e,r,o,s){var c=e.updateQueue;md=!1;var d=c.firstBaseUpdate,p=c.lastBaseUpdate,v=c.shared.pending;if(v!==null){c.shared.pending=null;var m=v,E=m.next;m.next=null,p===null?d=E:p.next=E,p=m;var C=e.alternate;C!==null&&(C=C.updateQueue,v=C.lastBaseUpdate,v!==p&&(v===null?C.firstBaseUpdate=E:v.next=E,C.lastBaseUpdate=m))}if(d!==null){var b=c.baseState;p=0,C=E=m=null,v=d;do{var R=v.lane,w=v.eventTime;if((s&R)===R){C!==null&&(C=C.next={eventTime:w,lane:0,tag:v.tag,payload:v.payload,callback:v.callback,next:null});e:{var I=e,O=v;switch(R=r,w=o,O.tag){case 1:if(I=O.payload,typeof I=="function"){b=I.call(w,b,R);break e}b=I;break e;case 3:I.flags=I.flags&-65537|128;case 0:if(I=O.payload,R=typeof I=="function"?I.call(w,b,R):I,R==null)break e;b=Vi({},b,R);break e;case 2:md=!0}}v.callback!==null&&v.lane!==0&&(e.flags|=64,R=c.effects,R===null?c.effects=[v]:R.push(v))}else w={eventTime:w,lane:R,tag:v.tag,payload:v.payload,callback:v.callback,next:null},C===null?(E=C=w,m=b):C=C.next=w,p|=R;if(v=v.next,v===null){if(v=c.shared.pending,v===null)break;R=v,v=R.next,R.next=null,c.lastBaseUpdate=R,c.shared.pending=null}}while(1);if(C===null&&(m=b),c.baseState=m,c.firstBaseUpdate=E,c.lastBaseUpdate=C,r=c.shared.interleaved,r!==null){c=r;do p|=c.lane,c=c.next;while(c!==r)}else d===null&&(c.shared.lanes=0);Yh|=p,e.lanes=p,e.memoizedState=b}}function y$(e,r,o){if(e=r.effects,r.effects=null,e!==null)for(r=0;r<e.length;r++){var s=e[r],c=s.callback;if(c!==null){if(s.callback=null,s=o,typeof c!="function")throw Error(yt(191,c));c.call(s)}}}var Uv={},Dl=Ud(Uv),cv=Ud(Uv),lv=Ud(Uv);function Mh(e){if(e===Uv)throw Error(yt(174));return e}function MD(e,r){switch(mi(lv,r),mi(cv,e),mi(Dl,Uv),e=r.nodeType,e){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:hx(null,"");break;default:e=e===8?r.parentNode:r,r=e.namespaceURI||null,e=e.tagName,r=hx(r,e)}Ri(Dl),mi(Dl,r)}function pm(){Ri(Dl),Ri(cv),Ri(lv)}function dG(e){Mh(lv.current);var r=Mh(Dl.current),o=hx(r,e.type);r!==o&&(mi(cv,e),mi(Dl,o))}function FD(e){cv.current===e&&(Ri(Dl),Ri(cv))}var Ui=Ud(0);function sC(e){for(var r=e;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if(r.flags&128)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var gA=[];function UD(){for(var e=0;e<gA.length;e++)gA[e]._workInProgressVersionPrimary=null;gA.length=0}var Ty=_u.ReactCurrentDispatcher,vA=_u.ReactCurrentBatchConfig,qh=0,Bi=null,yo=null,Mo=null,cC=!1,Bg=!1,uv=0,o0e=0;function ua(){throw Error(yt(321))}function BD(e,r){if(r===null)return!1;for(var o=0;o<r.length&&o<e.length;o++)if(!Xc(e[o],r[o]))return!1;return!0}function VD(e,r,o,s,c,d){if(qh=d,Bi=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Ty.current=e===null||e.memoizedState===null?l0e:u0e,e=o(s,c),Bg){d=0;do{if(Bg=!1,uv=0,25<=d)throw Error(yt(301));d+=1,Mo=yo=null,r.updateQueue=null,Ty.current=d0e,e=o(s,c)}while(Bg)}if(Ty.current=lC,r=yo!==null&&yo.next!==null,qh=0,Mo=yo=Bi=null,cC=!1,r)throw Error(yt(300));return e}function jD(){var e=uv!==0;return uv=0,e}function wl(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mo===null?Bi.memoizedState=Mo=e:Mo=Mo.next=e,Mo}function hc(){if(yo===null){var e=Bi.alternate;e=e!==null?e.memoizedState:null}else e=yo.next;var r=Mo===null?Bi.memoizedState:Mo.next;if(r!==null)Mo=r,yo=e;else{if(e===null)throw Error(yt(310));yo=e,e={memoizedState:yo.memoizedState,baseState:yo.baseState,baseQueue:yo.baseQueue,queue:yo.queue,next:null},Mo===null?Bi.memoizedState=Mo=e:Mo=Mo.next=e}return Mo}function dv(e,r){return typeof r=="function"?r(e):r}function EA(e){var r=hc(),o=r.queue;if(o===null)throw Error(yt(311));o.lastRenderedReducer=e;var s=yo,c=s.baseQueue,d=o.pending;if(d!==null){if(c!==null){var p=c.next;c.next=d.next,d.next=p}s.baseQueue=c=d,o.pending=null}if(c!==null){d=c.next,s=s.baseState;var v=p=null,m=null,E=d;do{var C=E.lane;if((qh&C)===C)m!==null&&(m=m.next={lane:0,action:E.action,hasEagerState:E.hasEagerState,eagerState:E.eagerState,next:null}),s=E.hasEagerState?E.eagerState:e(s,E.action);else{var b={lane:C,action:E.action,hasEagerState:E.hasEagerState,eagerState:E.eagerState,next:null};m===null?(v=m=b,p=s):m=m.next=b,Bi.lanes|=C,Yh|=C}E=E.next}while(E!==null&&E!==d);m===null?p=s:m.next=v,Xc(s,r.memoizedState)||(es=!0),r.memoizedState=s,r.baseState=p,r.baseQueue=m,o.lastRenderedState=s}if(e=o.interleaved,e!==null){c=e;do d=c.lane,Bi.lanes|=d,Yh|=d,c=c.next;while(c!==e)}else c===null&&(o.lanes=0);return[r.memoizedState,o.dispatch]}function _A(e){var r=hc(),o=r.queue;if(o===null)throw Error(yt(311));o.lastRenderedReducer=e;var s=o.dispatch,c=o.pending,d=r.memoizedState;if(c!==null){o.pending=null;var p=c=c.next;do d=e(d,p.action),p=p.next;while(p!==c);Xc(d,r.memoizedState)||(es=!0),r.memoizedState=d,r.baseQueue===null&&(r.baseState=d),o.lastRenderedState=d}return[d,s]}function hG(){}function pG(e,r){var o=Bi,s=hc(),c=r(),d=!Xc(s.memoizedState,c);if(d&&(s.memoizedState=c,es=!0),s=s.queue,$D(gG.bind(null,o,s,e),[e]),s.getSnapshot!==r||d||Mo!==null&&Mo.memoizedState.tag&1){if(o.flags|=2048,hv(9,mG.bind(null,o,s,c,r),void 0,null),Uo===null)throw Error(yt(349));qh&30||fG(o,r,c)}return c}function fG(e,r,o){e.flags|=16384,e={getSnapshot:r,value:o},r=Bi.updateQueue,r===null?(r={lastEffect:null,stores:null},Bi.updateQueue=r,r.stores=[e]):(o=r.stores,o===null?r.stores=[e]:o.push(e))}function mG(e,r,o,s){r.value=o,r.getSnapshot=s,vG(r)&&EG(e)}function gG(e,r,o){return o(function(){vG(r)&&EG(e)})}function vG(e){var r=e.getSnapshot;e=e.value;try{var o=r();return!Xc(e,o)}catch{return!0}}function EG(e){var r=fu(e,1);r!==null&&Gc(r,e,1,-1)}function C$(e){var r=wl();return typeof e=="function"&&(e=e()),r.memoizedState=r.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:dv,lastRenderedState:e},r.queue=e,e=e.dispatch=c0e.bind(null,Bi,e),[r.memoizedState,e]}function hv(e,r,o,s){return e={tag:e,create:r,destroy:o,deps:s,next:null},r=Bi.updateQueue,r===null?(r={lastEffect:null,stores:null},Bi.updateQueue=r,r.lastEffect=e.next=e):(o=r.lastEffect,o===null?r.lastEffect=e.next=e:(s=o.next,o.next=e,e.next=s,r.lastEffect=e)),e}function _G(){return hc().memoizedState}function Ry(e,r,o,s){var c=wl();Bi.flags|=e,c.memoizedState=hv(1|r,o,void 0,s===void 0?null:s)}function nb(e,r,o,s){var c=hc();s=s===void 0?null:s;var d=void 0;if(yo!==null){var p=yo.memoizedState;if(d=p.destroy,s!==null&&BD(s,p.deps)){c.memoizedState=hv(r,o,d,s);return}}Bi.flags|=e,c.memoizedState=hv(1|r,o,d,s)}function b$(e,r){return Ry(8390656,8,e,r)}function $D(e,r){return nb(2048,8,e,r)}function SG(e,r){return nb(4,2,e,r)}function yG(e,r){return nb(4,4,e,r)}function CG(e,r){if(typeof r=="function")return e=e(),r(e),function(){r(null)};if(r!=null)return e=e(),r.current=e,function(){r.current=null}}function bG(e,r,o){return o=o!=null?o.concat([e]):null,nb(4,4,CG.bind(null,r,e),o)}function HD(){}function TG(e,r){var o=hc();r=r===void 0?null:r;var s=o.memoizedState;return s!==null&&r!==null&&BD(r,s[1])?s[0]:(o.memoizedState=[e,r],e)}function RG(e,r){var o=hc();r=r===void 0?null:r;var s=o.memoizedState;return s!==null&&r!==null&&BD(r,s[1])?s[0]:(e=e(),o.memoizedState=[e,r],e)}function wG(e,r,o){return qh&21?(Xc(o,r)||(o=Nz(),Bi.lanes|=o,Yh|=o,e.baseState=!0),r):(e.baseState&&(e.baseState=!1,es=!0),e.memoizedState=o)}function a0e(e,r){var o=Qr;Qr=o!==0&&4>o?o:4,e(!0);var s=vA.transition;vA.transition={};try{e(!1),r()}finally{Qr=o,vA.transition=s}}function IG(){return hc().memoizedState}function s0e(e,r,o){var s=xd(e);if(o={lane:s,action:o,hasEagerState:!1,eagerState:null,next:null},AG(e))OG(r,o);else if(o=lG(e,r,o,s),o!==null){var c=xa();Gc(o,e,s,c),xG(o,r,s)}}function c0e(e,r,o){var s=xd(e),c={lane:s,action:o,hasEagerState:!1,eagerState:null,next:null};if(AG(e))OG(r,c);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=r.lastRenderedReducer,d!==null))try{var p=r.lastRenderedState,v=d(p,o);if(c.hasEagerState=!0,c.eagerState=v,Xc(v,p)){var m=r.interleaved;m===null?(c.next=c,LD(r)):(c.next=m.next,m.next=c),r.interleaved=c;return}}catch{}finally{}o=lG(e,r,c,s),o!==null&&(c=xa(),Gc(o,e,s,c),xG(o,r,s))}}function AG(e){var r=e.alternate;return e===Bi||r!==null&&r===Bi}function OG(e,r){Bg=cC=!0;var o=e.pending;o===null?r.next=r:(r.next=o.next,o.next=r),e.pending=r}function xG(e,r,o){if(o&4194240){var s=r.lanes;s&=e.pendingLanes,o|=s,r.lanes=o,SD(e,o)}}var lC={readContext:dc,useCallback:ua,useContext:ua,useEffect:ua,useImperativeHandle:ua,useInsertionEffect:ua,useLayoutEffect:ua,useMemo:ua,useReducer:ua,useRef:ua,useState:ua,useDebugValue:ua,useDeferredValue:ua,useTransition:ua,useMutableSource:ua,useSyncExternalStore:ua,useId:ua,unstable_isNewReconciler:!1},l0e={readContext:dc,useCallback:function(e,r){return wl().memoizedState=[e,r===void 0?null:r],e},useContext:dc,useEffect:b$,useImperativeHandle:function(e,r,o){return o=o!=null?o.concat([e]):null,Ry(4194308,4,CG.bind(null,r,e),o)},useLayoutEffect:function(e,r){return Ry(4194308,4,e,r)},useInsertionEffect:function(e,r){return Ry(4,2,e,r)},useMemo:function(e,r){var o=wl();return r=r===void 0?null:r,e=e(),o.memoizedState=[e,r],e},useReducer:function(e,r,o){var s=wl();return r=o!==void 0?o(r):r,s.memoizedState=s.baseState=r,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},s.queue=e,e=e.dispatch=s0e.bind(null,Bi,e),[s.memoizedState,e]},useRef:function(e){var r=wl();return e={current:e},r.memoizedState=e},useState:C$,useDebugValue:HD,useDeferredValue:function(e){return wl().memoizedState=e},useTransition:function(){var e=C$(!1),r=e[0];return e=a0e.bind(null,e[1]),wl().memoizedState=e,[r,e]},useMutableSource:function(){},useSyncExternalStore:function(e,r,o){var s=Bi,c=wl();if(Li){if(o===void 0)throw Error(yt(407));o=o()}else{if(o=r(),Uo===null)throw Error(yt(349));qh&30||fG(s,r,o)}c.memoizedState=o;var d={value:o,getSnapshot:r};return c.queue=d,b$(gG.bind(null,s,d,e),[e]),s.flags|=2048,hv(9,mG.bind(null,s,d,o,r),void 0,null),o},useId:function(){var e=wl(),r=Uo.identifierPrefix;if(Li){var o=cu,s=su;o=(s&~(1<<32-zc(s)-1)).toString(32)+o,r=":"+r+"R"+o,o=uv++,0<o&&(r+="H"+o.toString(32)),r+=":"}else o=o0e++,r=":"+r+"r"+o.toString(32)+":";return e.memoizedState=r},unstable_isNewReconciler:!1},u0e={readContext:dc,useCallback:TG,useContext:dc,useEffect:$D,useImperativeHandle:bG,useInsertionEffect:SG,useLayoutEffect:yG,useMemo:RG,useReducer:EA,useRef:_G,useState:function(){return EA(dv)},useDebugValue:HD,useDeferredValue:function(e){var r=hc();return wG(r,yo.memoizedState,e)},useTransition:function(){var e=EA(dv)[0],r=hc().memoizedState;return[e,r]},useMutableSource:hG,useSyncExternalStore:pG,useId:IG,unstable_isNewReconciler:!1},d0e={readContext:dc,useCallback:TG,useContext:dc,useEffect:$D,useImperativeHandle:bG,useInsertionEffect:SG,useLayoutEffect:yG,useMemo:RG,useReducer:_A,useRef:_G,useState:function(){return _A(dv)},useDebugValue:HD,useDeferredValue:function(e){var r=hc();return yo===null?r.memoizedState=e:wG(r,yo.memoizedState,e)},useTransition:function(){var e=_A(dv)[0],r=hc().memoizedState;return[e,r]},useMutableSource:hG,useSyncExternalStore:pG,useId:IG,unstable_isNewReconciler:!1};function Uc(e,r){if(e&&e.defaultProps){r=Vi({},r),e=e.defaultProps;for(var o in e)r[o]===void 0&&(r[o]=e[o]);return r}return r}function Px(e,r,o,s){r=e.memoizedState,o=o(s,r),o=o==null?r:Vi({},r,o),e.memoizedState=o,e.lanes===0&&(e.updateQueue.baseState=o)}var rb={isMounted:function(e){return(e=e._reactInternals)?ap(e)===e:!1},enqueueSetState:function(e,r,o){e=e._reactInternals;var s=xa(),c=xd(e),d=lu(s,c);d.payload=r,o!=null&&(d.callback=o),r=Ad(e,d,c),r!==null&&(Gc(r,e,c,s),by(r,e,c))},enqueueReplaceState:function(e,r,o){e=e._reactInternals;var s=xa(),c=xd(e),d=lu(s,c);d.tag=1,d.payload=r,o!=null&&(d.callback=o),r=Ad(e,d,c),r!==null&&(Gc(r,e,c,s),by(r,e,c))},enqueueForceUpdate:function(e,r){e=e._reactInternals;var o=xa(),s=xd(e),c=lu(o,s);c.tag=2,r!=null&&(c.callback=r),r=Ad(e,c,s),r!==null&&(Gc(r,e,s,o),by(r,e,s))}};function T$(e,r,o,s,c,d,p){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,d,p):r.prototype&&r.prototype.isPureReactComponent?!iv(o,s)||!iv(c,d):!0}function NG(e,r,o){var s=!1,c=Pd,d=r.contextType;return typeof d=="object"&&d!==null?d=dc(d):(c=rs(r)?Gh:Ea.current,s=r.contextTypes,d=(s=s!=null)?um(e,c):Pd),r=new r(o,d),e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=rb,e.stateNode=r,r._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=c,e.__reactInternalMemoizedMaskedChildContext=d),r}function R$(e,r,o,s){e=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,s),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,s),r.state!==e&&rb.enqueueReplaceState(r,r.state,null)}function Lx(e,r,o,s){var c=e.stateNode;c.props=o,c.state=e.memoizedState,c.refs={},kD(e);var d=r.contextType;typeof d=="object"&&d!==null?c.context=dc(d):(d=rs(r)?Gh:Ea.current,c.context=um(e,d)),c.state=e.memoizedState,d=r.getDerivedStateFromProps,typeof d=="function"&&(Px(e,r,d,o),c.state=e.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(r=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),r!==c.state&&rb.enqueueReplaceState(c,c.state,null),aC(e,o,c,s),c.state=e.memoizedState),typeof c.componentDidMount=="function"&&(e.flags|=4194308)}function fm(e,r){try{var o="",s=r;do o+=Bfe(s),s=s.return;while(s);var c=o}catch(d){c=`
Error generating stack: `+d.message+`
`+d.stack}return{value:e,source:r,stack:c,digest:null}}function SA(e,r,o){return{value:e,source:null,stack:o??null,digest:r??null}}function kx(e,r){try{console.error(r.value)}catch(o){setTimeout(function(){throw o})}}var h0e=typeof WeakMap=="function"?WeakMap:Map;function DG(e,r,o){o=lu(-1,o),o.tag=3,o.payload={element:null};var s=r.value;return o.callback=function(){dC||(dC=!0,zx=s),kx(e,r)},o}function PG(e,r,o){o=lu(-1,o),o.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var c=r.value;o.payload=function(){return s(c)},o.callback=function(){kx(e,r)}}var d=e.stateNode;return d!==null&&typeof d.componentDidCatch=="function"&&(o.callback=function(){kx(e,r),typeof s!="function"&&(Od===null?Od=new Set([this]):Od.add(this));var p=r.stack;this.componentDidCatch(r.value,{componentStack:p!==null?p:""})}),o}function w$(e,r,o){var s=e.pingCache;if(s===null){s=e.pingCache=new h0e;var c=new Set;s.set(r,c)}else c=s.get(r),c===void 0&&(c=new Set,s.set(r,c));c.has(o)||(c.add(o),e=w0e.bind(null,e,r,o),r.then(e,e))}function I$(e){do{var r;if((r=e.tag===13)&&(r=e.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return e;e=e.return}while(e!==null);return null}function A$(e,r,o,s,c){return e.mode&1?(e.flags|=65536,e.lanes=c,e):(e===r?e.flags|=65536:(e.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(r=lu(-1,1),r.tag=2,Ad(o,r,1))),o.lanes|=1),e)}var p0e=_u.ReactCurrentOwner,es=!1;function Oa(e,r,o,s){r.child=e===null?cG(r,null,o,s):hm(r,e.child,o,s)}function O$(e,r,o,s,c){o=o.render;var d=r.ref;return om(r,c),s=VD(e,r,o,s,d,c),o=jD(),e!==null&&!es?(r.updateQueue=e.updateQueue,r.flags&=-2053,e.lanes&=~c,mu(e,r,c)):(Li&&o&&AD(r),r.flags|=1,Oa(e,r,s,c),r.child)}function x$(e,r,o,s,c){if(e===null){var d=o.type;return typeof d=="function"&&!JD(d)&&d.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(r.tag=15,r.type=d,LG(e,r,d,s,c)):(e=Oy(o.type,null,s,r,r.mode,c),e.ref=r.ref,e.return=r,r.child=e)}if(d=e.child,!(e.lanes&c)){var p=d.memoizedProps;if(o=o.compare,o=o!==null?o:iv,o(p,s)&&e.ref===r.ref)return mu(e,r,c)}return r.flags|=1,e=Nd(d,s),e.ref=r.ref,e.return=r,r.child=e}function LG(e,r,o,s,c){if(e!==null){var d=e.memoizedProps;if(iv(d,s)&&e.ref===r.ref)if(es=!1,r.pendingProps=s=d,(e.lanes&c)!==0)e.flags&131072&&(es=!0);else return r.lanes=e.lanes,mu(e,r,c)}return Mx(e,r,o,s,c)}function kG(e,r,o){var s=r.pendingProps,c=s.children,d=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(r.mode&1))r.memoizedState={baseLanes:0,cachePool:null,transitions:null},mi(Jf,Cs),Cs|=o;else{if(!(o&1073741824))return e=d!==null?d.baseLanes|o:o,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:e,cachePool:null,transitions:null},r.updateQueue=null,mi(Jf,Cs),Cs|=e,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=d!==null?d.baseLanes:o,mi(Jf,Cs),Cs|=s}else d!==null?(s=d.baseLanes|o,r.memoizedState=null):s=o,mi(Jf,Cs),Cs|=s;return Oa(e,r,c,o),r.child}function MG(e,r){var o=r.ref;(e===null&&o!==null||e!==null&&e.ref!==o)&&(r.flags|=512,r.flags|=2097152)}function Mx(e,r,o,s,c){var d=rs(o)?Gh:Ea.current;return d=um(r,d),om(r,c),o=VD(e,r,o,s,d,c),s=jD(),e!==null&&!es?(r.updateQueue=e.updateQueue,r.flags&=-2053,e.lanes&=~c,mu(e,r,c)):(Li&&s&&AD(r),r.flags|=1,Oa(e,r,o,c),r.child)}function N$(e,r,o,s,c){if(rs(o)){var d=!0;tC(r)}else d=!1;if(om(r,c),r.stateNode===null)wy(e,r),NG(r,o,s),Lx(r,o,s,c),s=!0;else if(e===null){var p=r.stateNode,v=r.memoizedProps;p.props=v;var m=p.context,E=o.contextType;typeof E=="object"&&E!==null?E=dc(E):(E=rs(o)?Gh:Ea.current,E=um(r,E));var C=o.getDerivedStateFromProps,b=typeof C=="function"||typeof p.getSnapshotBeforeUpdate=="function";b||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(v!==s||m!==E)&&R$(r,p,s,E),md=!1;var R=r.memoizedState;p.state=R,aC(r,s,p,c),m=r.memoizedState,v!==s||R!==m||ns.current||md?(typeof C=="function"&&(Px(r,o,C,s),m=r.memoizedState),(v=md||T$(r,o,v,s,R,m,E))?(b||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(r.flags|=4194308)):(typeof p.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=s,r.memoizedState=m),p.props=s,p.state=m,p.context=E,s=v):(typeof p.componentDidMount=="function"&&(r.flags|=4194308),s=!1)}else{p=r.stateNode,uG(e,r),v=r.memoizedProps,E=r.type===r.elementType?v:Uc(r.type,v),p.props=E,b=r.pendingProps,R=p.context,m=o.contextType,typeof m=="object"&&m!==null?m=dc(m):(m=rs(o)?Gh:Ea.current,m=um(r,m));var w=o.getDerivedStateFromProps;(C=typeof w=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(v!==b||R!==m)&&R$(r,p,s,m),md=!1,R=r.memoizedState,p.state=R,aC(r,s,p,c);var I=r.memoizedState;v!==b||R!==I||ns.current||md?(typeof w=="function"&&(Px(r,o,w,s),I=r.memoizedState),(E=md||T$(r,o,E,s,R,I,m)||!1)?(C||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(s,I,m),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(s,I,m)),typeof p.componentDidUpdate=="function"&&(r.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof p.componentDidUpdate!="function"||v===e.memoizedProps&&R===e.memoizedState||(r.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&R===e.memoizedState||(r.flags|=1024),r.memoizedProps=s,r.memoizedState=I),p.props=s,p.state=I,p.context=m,s=E):(typeof p.componentDidUpdate!="function"||v===e.memoizedProps&&R===e.memoizedState||(r.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&R===e.memoizedState||(r.flags|=1024),s=!1)}return Fx(e,r,o,s,d,c)}function Fx(e,r,o,s,c,d){MG(e,r);var p=(r.flags&128)!==0;if(!s&&!p)return c&&g$(r,o,!1),mu(e,r,d);s=r.stateNode,p0e.current=r;var v=p&&typeof o.getDerivedStateFromError!="function"?null:s.render();return r.flags|=1,e!==null&&p?(r.child=hm(r,e.child,null,d),r.child=hm(r,null,v,d)):Oa(e,r,v,d),r.memoizedState=s.state,c&&g$(r,o,!0),r.child}function FG(e){var r=e.stateNode;r.pendingContext?m$(e,r.pendingContext,r.pendingContext!==r.context):r.context&&m$(e,r.context,!1),MD(e,r.containerInfo)}function D$(e,r,o,s,c){return dm(),xD(c),r.flags|=256,Oa(e,r,o,s),r.child}var Ux={dehydrated:null,treeContext:null,retryLane:0};function Bx(e){return{baseLanes:e,cachePool:null,transitions:null}}function UG(e,r,o){var s=r.pendingProps,c=Ui.current,d=!1,p=(r.flags&128)!==0,v;if((v=p)||(v=e!==null&&e.memoizedState===null?!1:(c&2)!==0),v?(d=!0,r.flags&=-129):(e===null||e.memoizedState!==null)&&(c|=1),mi(Ui,c&1),e===null)return Nx(r),e=r.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(r.mode&1?e.data==="$!"?r.lanes=8:r.lanes=1073741824:r.lanes=1,null):(p=s.children,e=s.fallback,d?(s=r.mode,d=r.child,p={mode:"hidden",children:p},!(s&1)&&d!==null?(d.childLanes=0,d.pendingProps=p):d=ab(p,s,0,null),e=Vh(e,s,o,null),d.return=r,e.return=r,d.sibling=e,r.child=d,r.child.memoizedState=Bx(o),r.memoizedState=Ux,e):WD(r,p));if(c=e.memoizedState,c!==null&&(v=c.dehydrated,v!==null))return f0e(e,r,p,s,v,c,o);if(d){d=s.fallback,p=r.mode,c=e.child,v=c.sibling;var m={mode:"hidden",children:s.children};return!(p&1)&&r.child!==c?(s=r.child,s.childLanes=0,s.pendingProps=m,r.deletions=null):(s=Nd(c,m),s.subtreeFlags=c.subtreeFlags&14680064),v!==null?d=Nd(v,d):(d=Vh(d,p,o,null),d.flags|=2),d.return=r,s.return=r,s.sibling=d,r.child=s,s=d,d=r.child,p=e.child.memoizedState,p=p===null?Bx(o):{baseLanes:p.baseLanes|o,cachePool:null,transitions:p.transitions},d.memoizedState=p,d.childLanes=e.childLanes&~o,r.memoizedState=Ux,s}return d=e.child,e=d.sibling,s=Nd(d,{mode:"visible",children:s.children}),!(r.mode&1)&&(s.lanes=o),s.return=r,s.sibling=null,e!==null&&(o=r.deletions,o===null?(r.deletions=[e],r.flags|=16):o.push(e)),r.child=s,r.memoizedState=null,s}function WD(e,r){return r=ab({mode:"visible",children:r},e.mode,0,null),r.return=e,e.child=r}function jS(e,r,o,s){return s!==null&&xD(s),hm(r,e.child,null,o),e=WD(r,r.pendingProps.children),e.flags|=2,r.memoizedState=null,e}function f0e(e,r,o,s,c,d,p){if(o)return r.flags&256?(r.flags&=-257,s=SA(Error(yt(422))),jS(e,r,p,s)):r.memoizedState!==null?(r.child=e.child,r.flags|=128,null):(d=s.fallback,c=r.mode,s=ab({mode:"visible",children:s.children},c,0,null),d=Vh(d,c,p,null),d.flags|=2,s.return=r,d.return=r,s.sibling=d,r.child=s,r.mode&1&&hm(r,e.child,null,p),r.child.memoizedState=Bx(p),r.memoizedState=Ux,d);if(!(r.mode&1))return jS(e,r,p,null);if(c.data==="$!"){if(s=c.nextSibling&&c.nextSibling.dataset,s)var v=s.dgst;return s=v,d=Error(yt(419)),s=SA(d,s,void 0),jS(e,r,p,s)}if(v=(p&e.childLanes)!==0,es||v){if(s=Uo,s!==null){switch(p&-p){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}c=c&(s.suspendedLanes|p)?0:c,c!==0&&c!==d.retryLane&&(d.retryLane=c,fu(e,c),Gc(s,e,c,-1))}return XD(),s=SA(Error(yt(421))),jS(e,r,p,s)}return c.data==="$?"?(r.flags|=128,r.child=e.child,r=I0e.bind(null,e),c._reactRetry=r,null):(e=d.treeContext,bs=Id(c.nextSibling),Rs=r,Li=!0,Hc=null,e!==null&&(ac[sc++]=su,ac[sc++]=cu,ac[sc++]=Kh,su=e.id,cu=e.overflow,Kh=r),r=WD(r,s.children),r.flags|=4096,r)}function P$(e,r,o){e.lanes|=r;var s=e.alternate;s!==null&&(s.lanes|=r),Dx(e.return,r,o)}function yA(e,r,o,s,c){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:s,tail:o,tailMode:c}:(d.isBackwards=r,d.rendering=null,d.renderingStartTime=0,d.last=s,d.tail=o,d.tailMode=c)}function BG(e,r,o){var s=r.pendingProps,c=s.revealOrder,d=s.tail;if(Oa(e,r,s.children,o),s=Ui.current,s&2)s=s&1|2,r.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=r.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&P$(e,o,r);else if(e.tag===19)P$(e,o,r);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===r)break e;for(;e.sibling===null;){if(e.return===null||e.return===r)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(mi(Ui,s),!(r.mode&1))r.memoizedState=null;else switch(c){case"forwards":for(o=r.child,c=null;o!==null;)e=o.alternate,e!==null&&sC(e)===null&&(c=o),o=o.sibling;o=c,o===null?(c=r.child,r.child=null):(c=o.sibling,o.sibling=null),yA(r,!1,c,o,d);break;case"backwards":for(o=null,c=r.child,r.child=null;c!==null;){if(e=c.alternate,e!==null&&sC(e)===null){r.child=c;break}e=c.sibling,c.sibling=o,o=c,c=e}yA(r,!0,o,null,d);break;case"together":yA(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function wy(e,r){!(r.mode&1)&&e!==null&&(e.alternate=null,r.alternate=null,r.flags|=2)}function mu(e,r,o){if(e!==null&&(r.dependencies=e.dependencies),Yh|=r.lanes,!(o&r.childLanes))return null;if(e!==null&&r.child!==e.child)throw Error(yt(153));if(r.child!==null){for(e=r.child,o=Nd(e,e.pendingProps),r.child=o,o.return=r;e.sibling!==null;)e=e.sibling,o=o.sibling=Nd(e,e.pendingProps),o.return=r;o.sibling=null}return r.child}function m0e(e,r,o){switch(r.tag){case 3:FG(r),dm();break;case 5:dG(r);break;case 1:rs(r.type)&&tC(r);break;case 4:MD(r,r.stateNode.containerInfo);break;case 10:var s=r.type._context,c=r.memoizedProps.value;mi(iC,s._currentValue),s._currentValue=c;break;case 13:if(s=r.memoizedState,s!==null)return s.dehydrated!==null?(mi(Ui,Ui.current&1),r.flags|=128,null):o&r.child.childLanes?UG(e,r,o):(mi(Ui,Ui.current&1),e=mu(e,r,o),e!==null?e.sibling:null);mi(Ui,Ui.current&1);break;case 19:if(s=(o&r.childLanes)!==0,e.flags&128){if(s)return BG(e,r,o);r.flags|=128}if(c=r.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),mi(Ui,Ui.current),s)break;return null;case 22:case 23:return r.lanes=0,kG(e,r,o)}return mu(e,r,o)}var VG,Vx,jG,$G;VG=function(e,r){for(var o=r.child;o!==null;){if(o.tag===5||o.tag===6)e.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return;o=o.return}o.sibling.return=o.return,o=o.sibling}};Vx=function(){};jG=function(e,r,o,s){var c=e.memoizedProps;if(c!==s){e=r.stateNode,Mh(Dl.current);var d=null;switch(o){case"input":c=cx(e,c),s=cx(e,s),d=[];break;case"select":c=Vi({},c,{value:void 0}),s=Vi({},s,{value:void 0}),d=[];break;case"textarea":c=dx(e,c),s=dx(e,s),d=[];break;default:typeof c.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=Zy)}px(o,s);var p;o=null;for(E in c)if(!s.hasOwnProperty(E)&&c.hasOwnProperty(E)&&c[E]!=null)if(E==="style"){var v=c[E];for(p in v)v.hasOwnProperty(p)&&(o||(o={}),o[p]="")}else E!=="dangerouslySetInnerHTML"&&E!=="children"&&E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&E!=="autoFocus"&&(Jg.hasOwnProperty(E)?d||(d=[]):(d=d||[]).push(E,null));for(E in s){var m=s[E];if(v=c!=null?c[E]:void 0,s.hasOwnProperty(E)&&m!==v&&(m!=null||v!=null))if(E==="style")if(v){for(p in v)!v.hasOwnProperty(p)||m&&m.hasOwnProperty(p)||(o||(o={}),o[p]="");for(p in m)m.hasOwnProperty(p)&&v[p]!==m[p]&&(o||(o={}),o[p]=m[p])}else o||(d||(d=[]),d.push(E,o)),o=m;else E==="dangerouslySetInnerHTML"?(m=m?m.__html:void 0,v=v?v.__html:void 0,m!=null&&v!==m&&(d=d||[]).push(E,m)):E==="children"?typeof m!="string"&&typeof m!="number"||(d=d||[]).push(E,""+m):E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&(Jg.hasOwnProperty(E)?(m!=null&&E==="onScroll"&&Ti("scroll",e),d||v===m||(d=[])):(d=d||[]).push(E,m))}o&&(d=d||[]).push("style",o);var E=d;(r.updateQueue=E)&&(r.flags|=4)}};$G=function(e,r,o,s){o!==s&&(r.flags|=4)};function pg(e,r){if(!Li)switch(e.tailMode){case"hidden":r=e.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?e.tail=null:o.sibling=null;break;case"collapsed":o=e.tail;for(var s=null;o!==null;)o.alternate!==null&&(s=o),o=o.sibling;s===null?r||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function da(e){var r=e.alternate!==null&&e.alternate.child===e.child,o=0,s=0;if(r)for(var c=e.child;c!==null;)o|=c.lanes|c.childLanes,s|=c.subtreeFlags&14680064,s|=c.flags&14680064,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)o|=c.lanes|c.childLanes,s|=c.subtreeFlags,s|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=s,e.childLanes=o,r}function g0e(e,r,o){var s=r.pendingProps;switch(OD(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return da(r),null;case 1:return rs(r.type)&&eC(),da(r),null;case 3:return s=r.stateNode,pm(),Ri(ns),Ri(Ea),UD(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(BS(r)?r.flags|=4:e===null||e.memoizedState.isDehydrated&&!(r.flags&256)||(r.flags|=1024,Hc!==null&&(qx(Hc),Hc=null))),Vx(e,r),da(r),null;case 5:FD(r);var c=Mh(lv.current);if(o=r.type,e!==null&&r.stateNode!=null)jG(e,r,o,s,c),e.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!s){if(r.stateNode===null)throw Error(yt(166));return da(r),null}if(e=Mh(Dl.current),BS(r)){s=r.stateNode,o=r.type;var d=r.memoizedProps;switch(s[Ol]=r,s[sv]=d,e=(r.mode&1)!==0,o){case"dialog":Ti("cancel",s),Ti("close",s);break;case"iframe":case"object":case"embed":Ti("load",s);break;case"video":case"audio":for(c=0;c<Ng.length;c++)Ti(Ng[c],s);break;case"source":Ti("error",s);break;case"img":case"image":case"link":Ti("error",s),Ti("load",s);break;case"details":Ti("toggle",s);break;case"input":$8(s,d),Ti("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!d.multiple},Ti("invalid",s);break;case"textarea":W8(s,d),Ti("invalid",s)}px(o,d),c=null;for(var p in d)if(d.hasOwnProperty(p)){var v=d[p];p==="children"?typeof v=="string"?s.textContent!==v&&(d.suppressHydrationWarning!==!0&&US(s.textContent,v,e),c=["children",v]):typeof v=="number"&&s.textContent!==""+v&&(d.suppressHydrationWarning!==!0&&US(s.textContent,v,e),c=["children",""+v]):Jg.hasOwnProperty(p)&&v!=null&&p==="onScroll"&&Ti("scroll",s)}switch(o){case"input":xS(s),H8(s,d,!0);break;case"textarea":xS(s),z8(s);break;case"select":case"option":break;default:typeof d.onClick=="function"&&(s.onclick=Zy)}s=c,r.updateQueue=s,s!==null&&(r.flags|=4)}else{p=c.nodeType===9?c:c.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=gz(o)),e==="http://www.w3.org/1999/xhtml"?o==="script"?(e=p.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=p.createElement(o,{is:s.is}):(e=p.createElement(o),o==="select"&&(p=e,s.multiple?p.multiple=!0:s.size&&(p.size=s.size))):e=p.createElementNS(e,o),e[Ol]=r,e[sv]=s,VG(e,r,!1,!1),r.stateNode=e;e:{switch(p=fx(o,s),o){case"dialog":Ti("cancel",e),Ti("close",e),c=s;break;case"iframe":case"object":case"embed":Ti("load",e),c=s;break;case"video":case"audio":for(c=0;c<Ng.length;c++)Ti(Ng[c],e);c=s;break;case"source":Ti("error",e),c=s;break;case"img":case"image":case"link":Ti("error",e),Ti("load",e),c=s;break;case"details":Ti("toggle",e),c=s;break;case"input":$8(e,s),c=cx(e,s),Ti("invalid",e);break;case"option":c=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},c=Vi({},s,{value:void 0}),Ti("invalid",e);break;case"textarea":W8(e,s),c=dx(e,s),Ti("invalid",e);break;default:c=s}px(o,c),v=c;for(d in v)if(v.hasOwnProperty(d)){var m=v[d];d==="style"?_z(e,m):d==="dangerouslySetInnerHTML"?(m=m?m.__html:void 0,m!=null&&vz(e,m)):d==="children"?typeof m=="string"?(o!=="textarea"||m!=="")&&Qg(e,m):typeof m=="number"&&Qg(e,""+m):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Jg.hasOwnProperty(d)?m!=null&&d==="onScroll"&&Ti("scroll",e):m!=null&&fD(e,d,m,p))}switch(o){case"input":xS(e),H8(e,s,!1);break;case"textarea":xS(e),z8(e);break;case"option":s.value!=null&&e.setAttribute("value",""+Dd(s.value));break;case"select":e.multiple=!!s.multiple,d=s.value,d!=null?tm(e,!!s.multiple,d,!1):s.defaultValue!=null&&tm(e,!!s.multiple,s.defaultValue,!0);break;default:typeof c.onClick=="function"&&(e.onclick=Zy)}switch(o){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return da(r),null;case 6:if(e&&r.stateNode!=null)$G(e,r,e.memoizedProps,s);else{if(typeof s!="string"&&r.stateNode===null)throw Error(yt(166));if(o=Mh(lv.current),Mh(Dl.current),BS(r)){if(s=r.stateNode,o=r.memoizedProps,s[Ol]=r,(d=s.nodeValue!==o)&&(e=Rs,e!==null))switch(e.tag){case 3:US(s.nodeValue,o,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&US(s.nodeValue,o,(e.mode&1)!==0)}d&&(r.flags|=4)}else s=(o.nodeType===9?o:o.ownerDocument).createTextNode(s),s[Ol]=r,r.stateNode=s}return da(r),null;case 13:if(Ri(Ui),s=r.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Li&&bs!==null&&r.mode&1&&!(r.flags&128))aG(),dm(),r.flags|=98560,d=!1;else if(d=BS(r),s!==null&&s.dehydrated!==null){if(e===null){if(!d)throw Error(yt(318));if(d=r.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(yt(317));d[Ol]=r}else dm(),!(r.flags&128)&&(r.memoizedState=null),r.flags|=4;da(r),d=!1}else Hc!==null&&(qx(Hc),Hc=null),d=!0;if(!d)return r.flags&65536?r:null}return r.flags&128?(r.lanes=o,r):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(r.child.flags|=8192,r.mode&1&&(e===null||Ui.current&1?Co===0&&(Co=3):XD())),r.updateQueue!==null&&(r.flags|=4),da(r),null);case 4:return pm(),Vx(e,r),e===null&&ov(r.stateNode.containerInfo),da(r),null;case 10:return PD(r.type._context),da(r),null;case 17:return rs(r.type)&&eC(),da(r),null;case 19:if(Ri(Ui),d=r.memoizedState,d===null)return da(r),null;if(s=(r.flags&128)!==0,p=d.rendering,p===null)if(s)pg(d,!1);else{if(Co!==0||e!==null&&e.flags&128)for(e=r.child;e!==null;){if(p=sC(e),p!==null){for(r.flags|=128,pg(d,!1),s=p.updateQueue,s!==null&&(r.updateQueue=s,r.flags|=4),r.subtreeFlags=0,s=o,o=r.child;o!==null;)d=o,e=s,d.flags&=14680066,p=d.alternate,p===null?(d.childLanes=0,d.lanes=e,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=p.childLanes,d.lanes=p.lanes,d.child=p.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=p.memoizedProps,d.memoizedState=p.memoizedState,d.updateQueue=p.updateQueue,d.type=p.type,e=p.dependencies,d.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),o=o.sibling;return mi(Ui,Ui.current&1|2),r.child}e=e.sibling}d.tail!==null&&to()>mm&&(r.flags|=128,s=!0,pg(d,!1),r.lanes=4194304)}else{if(!s)if(e=sC(p),e!==null){if(r.flags|=128,s=!0,o=e.updateQueue,o!==null&&(r.updateQueue=o,r.flags|=4),pg(d,!0),d.tail===null&&d.tailMode==="hidden"&&!p.alternate&&!Li)return da(r),null}else 2*to()-d.renderingStartTime>mm&&o!==1073741824&&(r.flags|=128,s=!0,pg(d,!1),r.lanes=4194304);d.isBackwards?(p.sibling=r.child,r.child=p):(o=d.last,o!==null?o.sibling=p:r.child=p,d.last=p)}return d.tail!==null?(r=d.tail,d.rendering=r,d.tail=r.sibling,d.renderingStartTime=to(),r.sibling=null,o=Ui.current,mi(Ui,s?o&1|2:o&1),r):(da(r),null);case 22:case 23:return YD(),s=r.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(r.flags|=8192),s&&r.mode&1?Cs&1073741824&&(da(r),r.subtreeFlags&6&&(r.flags|=8192)):da(r),null;case 24:return null;case 25:return null}throw Error(yt(156,r.tag))}function v0e(e,r){switch(OD(r),r.tag){case 1:return rs(r.type)&&eC(),e=r.flags,e&65536?(r.flags=e&-65537|128,r):null;case 3:return pm(),Ri(ns),Ri(Ea),UD(),e=r.flags,e&65536&&!(e&128)?(r.flags=e&-65537|128,r):null;case 5:return FD(r),null;case 13:if(Ri(Ui),e=r.memoizedState,e!==null&&e.dehydrated!==null){if(r.alternate===null)throw Error(yt(340));dm()}return e=r.flags,e&65536?(r.flags=e&-65537|128,r):null;case 19:return Ri(Ui),null;case 4:return pm(),null;case 10:return PD(r.type._context),null;case 22:case 23:return YD(),null;case 24:return null;default:return null}}var $S=!1,fa=!1,E0e=typeof WeakSet=="function"?WeakSet:Set,Gt=null;function Xf(e,r){var o=e.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(s){Yi(e,r,s)}else o.current=null}function jx(e,r,o){try{o()}catch(s){Yi(e,r,s)}}var L$=!1;function _0e(e,r){if(Tx=Xy,e=Kz(),ID(e)){if("selectionStart"in e)var o={start:e.selectionStart,end:e.selectionEnd};else e:{o=(o=e.ownerDocument)&&o.defaultView||window;var s=o.getSelection&&o.getSelection();if(s&&s.rangeCount!==0){o=s.anchorNode;var c=s.anchorOffset,d=s.focusNode;s=s.focusOffset;try{o.nodeType,d.nodeType}catch{o=null;break e}var p=0,v=-1,m=-1,E=0,C=0,b=e,R=null;t:for(;;){for(var w;b!==o||c!==0&&b.nodeType!==3||(v=p+c),b!==d||s!==0&&b.nodeType!==3||(m=p+s),b.nodeType===3&&(p+=b.nodeValue.length),(w=b.firstChild)!==null;)R=b,b=w;for(;;){if(b===e)break t;if(R===o&&++E===c&&(v=p),R===d&&++C===s&&(m=p),(w=b.nextSibling)!==null)break;b=R,R=b.parentNode}b=w}o=v===-1||m===-1?null:{start:v,end:m}}else o=null}o=o||{start:0,end:0}}else o=null;for(Rx={focusedElem:e,selectionRange:o},Xy=!1,Gt=r;Gt!==null;)if(r=Gt,e=r.child,(r.subtreeFlags&1028)!==0&&e!==null)e.return=r,Gt=e;else for(;Gt!==null;){r=Gt;try{var I=r.alternate;if(r.flags&1024)switch(r.tag){case 0:case 11:case 15:break;case 1:if(I!==null){var O=I.memoizedProps,x=I.memoizedState,P=r.stateNode,N=P.getSnapshotBeforeUpdate(r.elementType===r.type?O:Uc(r.type,O),x);P.__reactInternalSnapshotBeforeUpdate=N}break;case 3:var L=r.stateNode.containerInfo;L.nodeType===1?L.textContent="":L.nodeType===9&&L.documentElement&&L.removeChild(L.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(yt(163))}}catch(M){Yi(r,r.return,M)}if(e=r.sibling,e!==null){e.return=r.return,Gt=e;break}Gt=r.return}return I=L$,L$=!1,I}function Vg(e,r,o){var s=r.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var c=s=s.next;do{if((c.tag&e)===e){var d=c.destroy;c.destroy=void 0,d!==void 0&&jx(r,o,d)}c=c.next}while(c!==s)}}function ib(e,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&e)===e){var s=o.create;o.destroy=s()}o=o.next}while(o!==r)}}function $x(e){var r=e.ref;if(r!==null){var o=e.stateNode;switch(e.tag){case 5:e=o;break;default:e=o}typeof r=="function"?r(e):r.current=e}}function HG(e){var r=e.alternate;r!==null&&(e.alternate=null,HG(r)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(r=e.stateNode,r!==null&&(delete r[Ol],delete r[sv],delete r[Ax],delete r[t0e],delete r[n0e])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function WG(e){return e.tag===5||e.tag===3||e.tag===4}function k$(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||WG(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Hx(e,r,o){var s=e.tag;if(s===5||s===6)e=e.stateNode,r?o.nodeType===8?o.parentNode.insertBefore(e,r):o.insertBefore(e,r):(o.nodeType===8?(r=o.parentNode,r.insertBefore(e,o)):(r=o,r.appendChild(e)),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=Zy));else if(s!==4&&(e=e.child,e!==null))for(Hx(e,r,o),e=e.sibling;e!==null;)Hx(e,r,o),e=e.sibling}function Wx(e,r,o){var s=e.tag;if(s===5||s===6)e=e.stateNode,r?o.insertBefore(e,r):o.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(Wx(e,r,o),e=e.sibling;e!==null;)Wx(e,r,o),e=e.sibling}var Xo=null,Bc=!1;function dd(e,r,o){for(o=o.child;o!==null;)zG(e,r,o),o=o.sibling}function zG(e,r,o){if(Nl&&typeof Nl.onCommitFiberUnmount=="function")try{Nl.onCommitFiberUnmount(XC,o)}catch{}switch(o.tag){case 5:fa||Xf(o,r);case 6:var s=Xo,c=Bc;Xo=null,dd(e,r,o),Xo=s,Bc=c,Xo!==null&&(Bc?(e=Xo,o=o.stateNode,e.nodeType===8?e.parentNode.removeChild(o):e.removeChild(o)):Xo.removeChild(o.stateNode));break;case 18:Xo!==null&&(Bc?(e=Xo,o=o.stateNode,e.nodeType===8?fA(e.parentNode,o):e.nodeType===1&&fA(e,o),nv(e)):fA(Xo,o.stateNode));break;case 4:s=Xo,c=Bc,Xo=o.stateNode.containerInfo,Bc=!0,dd(e,r,o),Xo=s,Bc=c;break;case 0:case 11:case 14:case 15:if(!fa&&(s=o.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){c=s=s.next;do{var d=c,p=d.destroy;d=d.tag,p!==void 0&&(d&2||d&4)&&jx(o,r,p),c=c.next}while(c!==s)}dd(e,r,o);break;case 1:if(!fa&&(Xf(o,r),s=o.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=o.memoizedProps,s.state=o.memoizedState,s.componentWillUnmount()}catch(v){Yi(o,r,v)}dd(e,r,o);break;case 21:dd(e,r,o);break;case 22:o.mode&1?(fa=(s=fa)||o.memoizedState!==null,dd(e,r,o),fa=s):dd(e,r,o);break;default:dd(e,r,o)}}function M$(e){var r=e.updateQueue;if(r!==null){e.updateQueue=null;var o=e.stateNode;o===null&&(o=e.stateNode=new E0e),r.forEach(function(s){var c=A0e.bind(null,e,s);o.has(s)||(o.add(s),s.then(c,c))})}}function Mc(e,r){var o=r.deletions;if(o!==null)for(var s=0;s<o.length;s++){var c=o[s];try{var d=e,p=r,v=p;e:for(;v!==null;){switch(v.tag){case 5:Xo=v.stateNode,Bc=!1;break e;case 3:Xo=v.stateNode.containerInfo,Bc=!0;break e;case 4:Xo=v.stateNode.containerInfo,Bc=!0;break e}v=v.return}if(Xo===null)throw Error(yt(160));zG(d,p,c),Xo=null,Bc=!1;var m=c.alternate;m!==null&&(m.return=null),c.return=null}catch(E){Yi(c,r,E)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)GG(r,e),r=r.sibling}function GG(e,r){var o=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Mc(r,e),Rl(e),s&4){try{Vg(3,e,e.return),ib(3,e)}catch(O){Yi(e,e.return,O)}try{Vg(5,e,e.return)}catch(O){Yi(e,e.return,O)}}break;case 1:Mc(r,e),Rl(e),s&512&&o!==null&&Xf(o,o.return);break;case 5:if(Mc(r,e),Rl(e),s&512&&o!==null&&Xf(o,o.return),e.flags&32){var c=e.stateNode;try{Qg(c,"")}catch(O){Yi(e,e.return,O)}}if(s&4&&(c=e.stateNode,c!=null)){var d=e.memoizedProps,p=o!==null?o.memoizedProps:d,v=e.type,m=e.updateQueue;if(e.updateQueue=null,m!==null)try{v==="input"&&d.type==="radio"&&d.name!=null&&fz(c,d),fx(v,p);var E=fx(v,d);for(p=0;p<m.length;p+=2){var C=m[p],b=m[p+1];C==="style"?_z(c,b):C==="dangerouslySetInnerHTML"?vz(c,b):C==="children"?Qg(c,b):fD(c,C,b,E)}switch(v){case"input":lx(c,d);break;case"textarea":mz(c,d);break;case"select":var R=c._wrapperState.wasMultiple;c._wrapperState.wasMultiple=!!d.multiple;var w=d.value;w!=null?tm(c,!!d.multiple,w,!1):R!==!!d.multiple&&(d.defaultValue!=null?tm(c,!!d.multiple,d.defaultValue,!0):tm(c,!!d.multiple,d.multiple?[]:"",!1))}c[sv]=d}catch(O){Yi(e,e.return,O)}}break;case 6:if(Mc(r,e),Rl(e),s&4){if(e.stateNode===null)throw Error(yt(162));c=e.stateNode,d=e.memoizedProps;try{c.nodeValue=d}catch(O){Yi(e,e.return,O)}}break;case 3:if(Mc(r,e),Rl(e),s&4&&o!==null&&o.memoizedState.isDehydrated)try{nv(r.containerInfo)}catch(O){Yi(e,e.return,O)}break;case 4:Mc(r,e),Rl(e);break;case 13:Mc(r,e),Rl(e),c=e.child,c.flags&8192&&(d=c.memoizedState!==null,c.stateNode.isHidden=d,!d||c.alternate!==null&&c.alternate.memoizedState!==null||(KD=to())),s&4&&M$(e);break;case 22:if(C=o!==null&&o.memoizedState!==null,e.mode&1?(fa=(E=fa)||C,Mc(r,e),fa=E):Mc(r,e),Rl(e),s&8192){if(E=e.memoizedState!==null,(e.stateNode.isHidden=E)&&!C&&e.mode&1)for(Gt=e,C=e.child;C!==null;){for(b=Gt=C;Gt!==null;){switch(R=Gt,w=R.child,R.tag){case 0:case 11:case 14:case 15:Vg(4,R,R.return);break;case 1:Xf(R,R.return);var I=R.stateNode;if(typeof I.componentWillUnmount=="function"){s=R,o=R.return;try{r=s,I.props=r.memoizedProps,I.state=r.memoizedState,I.componentWillUnmount()}catch(O){Yi(s,o,O)}}break;case 5:Xf(R,R.return);break;case 22:if(R.memoizedState!==null){U$(b);continue}}w!==null?(w.return=R,Gt=w):U$(b)}C=C.sibling}e:for(C=null,b=e;;){if(b.tag===5){if(C===null){C=b;try{c=b.stateNode,E?(d=c.style,typeof d.setProperty=="function"?d.setProperty("display","none","important"):d.display="none"):(v=b.stateNode,m=b.memoizedProps.style,p=m!=null&&m.hasOwnProperty("display")?m.display:null,v.style.display=Ez("display",p))}catch(O){Yi(e,e.return,O)}}}else if(b.tag===6){if(C===null)try{b.stateNode.nodeValue=E?"":b.memoizedProps}catch(O){Yi(e,e.return,O)}}else if((b.tag!==22&&b.tag!==23||b.memoizedState===null||b===e)&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===e)break e;for(;b.sibling===null;){if(b.return===null||b.return===e)break e;C===b&&(C=null),b=b.return}C===b&&(C=null),b.sibling.return=b.return,b=b.sibling}}break;case 19:Mc(r,e),Rl(e),s&4&&M$(e);break;case 21:break;default:Mc(r,e),Rl(e)}}function Rl(e){var r=e.flags;if(r&2){try{e:{for(var o=e.return;o!==null;){if(WG(o)){var s=o;break e}o=o.return}throw Error(yt(160))}switch(s.tag){case 5:var c=s.stateNode;s.flags&32&&(Qg(c,""),s.flags&=-33);var d=k$(e);Wx(e,d,c);break;case 3:case 4:var p=s.stateNode.containerInfo,v=k$(e);Hx(e,v,p);break;default:throw Error(yt(161))}}catch(m){Yi(e,e.return,m)}e.flags&=-3}r&4096&&(e.flags&=-4097)}function S0e(e,r,o){Gt=e,KG(e)}function KG(e,r,o){for(var s=(e.mode&1)!==0;Gt!==null;){var c=Gt,d=c.child;if(c.tag===22&&s){var p=c.memoizedState!==null||$S;if(!p){var v=c.alternate,m=v!==null&&v.memoizedState!==null||fa;v=$S;var E=fa;if($S=p,(fa=m)&&!E)for(Gt=c;Gt!==null;)p=Gt,m=p.child,p.tag===22&&p.memoizedState!==null?B$(c):m!==null?(m.return=p,Gt=m):B$(c);for(;d!==null;)Gt=d,KG(d),d=d.sibling;Gt=c,$S=v,fa=E}F$(e)}else c.subtreeFlags&8772&&d!==null?(d.return=c,Gt=d):F$(e)}}function F$(e){for(;Gt!==null;){var r=Gt;if(r.flags&8772){var o=r.alternate;try{if(r.flags&8772)switch(r.tag){case 0:case 11:case 15:fa||ib(5,r);break;case 1:var s=r.stateNode;if(r.flags&4&&!fa)if(o===null)s.componentDidMount();else{var c=r.elementType===r.type?o.memoizedProps:Uc(r.type,o.memoizedProps);s.componentDidUpdate(c,o.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var d=r.updateQueue;d!==null&&y$(r,d,s);break;case 3:var p=r.updateQueue;if(p!==null){if(o=null,r.child!==null)switch(r.child.tag){case 5:o=r.child.stateNode;break;case 1:o=r.child.stateNode}y$(r,p,o)}break;case 5:var v=r.stateNode;if(o===null&&r.flags&4){o=v;var m=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":m.autoFocus&&o.focus();break;case"img":m.src&&(o.src=m.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var E=r.alternate;if(E!==null){var C=E.memoizedState;if(C!==null){var b=C.dehydrated;b!==null&&nv(b)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(yt(163))}fa||r.flags&512&&$x(r)}catch(R){Yi(r,r.return,R)}}if(r===e){Gt=null;break}if(o=r.sibling,o!==null){o.return=r.return,Gt=o;break}Gt=r.return}}function U$(e){for(;Gt!==null;){var r=Gt;if(r===e){Gt=null;break}var o=r.sibling;if(o!==null){o.return=r.return,Gt=o;break}Gt=r.return}}function B$(e){for(;Gt!==null;){var r=Gt;try{switch(r.tag){case 0:case 11:case 15:var o=r.return;try{ib(4,r)}catch(m){Yi(r,o,m)}break;case 1:var s=r.stateNode;if(typeof s.componentDidMount=="function"){var c=r.return;try{s.componentDidMount()}catch(m){Yi(r,c,m)}}var d=r.return;try{$x(r)}catch(m){Yi(r,d,m)}break;case 5:var p=r.return;try{$x(r)}catch(m){Yi(r,p,m)}}}catch(m){Yi(r,r.return,m)}if(r===e){Gt=null;break}var v=r.sibling;if(v!==null){v.return=r.return,Gt=v;break}Gt=r.return}}var y0e=Math.ceil,uC=_u.ReactCurrentDispatcher,zD=_u.ReactCurrentOwner,lc=_u.ReactCurrentBatchConfig,Pr=0,Uo=null,uo=null,Zo=0,Cs=0,Jf=Ud(0),Co=0,pv=null,Yh=0,ob=0,GD=0,jg=null,Za=null,KD=0,mm=1/0,iu=null,dC=!1,zx=null,Od=null,HS=!1,_d=null,hC=0,$g=0,Gx=null,Iy=-1,Ay=0;function xa(){return Pr&6?to():Iy!==-1?Iy:Iy=to()}function xd(e){return e.mode&1?Pr&2&&Zo!==0?Zo&-Zo:i0e.transition!==null?(Ay===0&&(Ay=Nz()),Ay):(e=Qr,e!==0||(e=window.event,e=e===void 0?16:Uz(e.type)),e):1}function Gc(e,r,o,s){if(50<$g)throw $g=0,Gx=null,Error(yt(185));kv(e,o,s),(!(Pr&2)||e!==Uo)&&(e===Uo&&(!(Pr&2)&&(ob|=o),Co===4&&vd(e,Zo)),is(e,s),o===1&&Pr===0&&!(r.mode&1)&&(mm=to()+500,tb&&Bd()))}function is(e,r){var o=e.callbackNode;ime(e,r);var s=Yy(e,e===Uo?Zo:0);if(s===0)o!==null&&q8(o),e.callbackNode=null,e.callbackPriority=0;else if(r=s&-s,e.callbackPriority!==r){if(o!=null&&q8(o),r===1)e.tag===0?r0e(V$.bind(null,e)):rG(V$.bind(null,e)),Zme(function(){!(Pr&6)&&Bd()}),o=null;else{switch(Dz(s)){case 1:o=_D;break;case 4:o=Oz;break;case 16:o=qy;break;case 536870912:o=xz;break;default:o=qy}o=tK(o,qG.bind(null,e))}e.callbackPriority=r,e.callbackNode=o}}function qG(e,r){if(Iy=-1,Ay=0,Pr&6)throw Error(yt(327));var o=e.callbackNode;if(am()&&e.callbackNode!==o)return null;var s=Yy(e,e===Uo?Zo:0);if(s===0)return null;if(s&30||s&e.expiredLanes||r)r=pC(e,s);else{r=s;var c=Pr;Pr|=2;var d=XG();(Uo!==e||Zo!==r)&&(iu=null,mm=to()+500,Bh(e,r));do try{T0e();break}catch(v){YG(e,v)}while(1);DD(),uC.current=d,Pr=c,uo!==null?r=0:(Uo=null,Zo=0,r=Co)}if(r!==0){if(r===2&&(c=_x(e),c!==0&&(s=c,r=Kx(e,c))),r===1)throw o=pv,Bh(e,0),vd(e,s),is(e,to()),o;if(r===6)vd(e,s);else{if(c=e.current.alternate,!(s&30)&&!C0e(c)&&(r=pC(e,s),r===2&&(d=_x(e),d!==0&&(s=d,r=Kx(e,d))),r===1))throw o=pv,Bh(e,0),vd(e,s),is(e,to()),o;switch(e.finishedWork=c,e.finishedLanes=s,r){case 0:case 1:throw Error(yt(345));case 2:xh(e,Za,iu);break;case 3:if(vd(e,s),(s&130023424)===s&&(r=KD+500-to(),10<r)){if(Yy(e,0)!==0)break;if(c=e.suspendedLanes,(c&s)!==s){xa(),e.pingedLanes|=e.suspendedLanes&c;break}e.timeoutHandle=Ix(xh.bind(null,e,Za,iu),r);break}xh(e,Za,iu);break;case 4:if(vd(e,s),(s&4194240)===s)break;for(r=e.eventTimes,c=-1;0<s;){var p=31-zc(s);d=1<<p,p=r[p],p>c&&(c=p),s&=~d}if(s=c,s=to()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*y0e(s/1960))-s,10<s){e.timeoutHandle=Ix(xh.bind(null,e,Za,iu),s);break}xh(e,Za,iu);break;case 5:xh(e,Za,iu);break;default:throw Error(yt(329))}}}return is(e,to()),e.callbackNode===o?qG.bind(null,e):null}function Kx(e,r){var o=jg;return e.current.memoizedState.isDehydrated&&(Bh(e,r).flags|=256),e=pC(e,r),e!==2&&(r=Za,Za=o,r!==null&&qx(r)),e}function qx(e){Za===null?Za=e:Za.push.apply(Za,e)}function C0e(e){for(var r=e;;){if(r.flags&16384){var o=r.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var s=0;s<o.length;s++){var c=o[s],d=c.getSnapshot;c=c.value;try{if(!Xc(d(),c))return!1}catch{return!1}}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function vd(e,r){for(r&=~GD,r&=~ob,e.suspendedLanes|=r,e.pingedLanes&=~r,e=e.expirationTimes;0<r;){var o=31-zc(r),s=1<<o;e[o]=-1,r&=~s}}function V$(e){if(Pr&6)throw Error(yt(327));am();var r=Yy(e,0);if(!(r&1))return is(e,to()),null;var o=pC(e,r);if(e.tag!==0&&o===2){var s=_x(e);s!==0&&(r=s,o=Kx(e,s))}if(o===1)throw o=pv,Bh(e,0),vd(e,r),is(e,to()),o;if(o===6)throw Error(yt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=r,xh(e,Za,iu),is(e,to()),null}function qD(e,r){var o=Pr;Pr|=1;try{return e(r)}finally{Pr=o,Pr===0&&(mm=to()+500,tb&&Bd())}}function Xh(e){_d!==null&&_d.tag===0&&!(Pr&6)&&am();var r=Pr;Pr|=1;var o=lc.transition,s=Qr;try{if(lc.transition=null,Qr=1,e)return e()}finally{Qr=s,lc.transition=o,Pr=r,!(Pr&6)&&Bd()}}function YD(){Cs=Jf.current,Ri(Jf)}function Bh(e,r){e.finishedWork=null,e.finishedLanes=0;var o=e.timeoutHandle;if(o!==-1&&(e.timeoutHandle=-1,Qme(o)),uo!==null)for(o=uo.return;o!==null;){var s=o;switch(OD(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&eC();break;case 3:pm(),Ri(ns),Ri(Ea),UD();break;case 5:FD(s);break;case 4:pm();break;case 13:Ri(Ui);break;case 19:Ri(Ui);break;case 10:PD(s.type._context);break;case 22:case 23:YD()}o=o.return}if(Uo=e,uo=e=Nd(e.current,null),Zo=Cs=r,Co=0,pv=null,GD=ob=Yh=0,Za=jg=null,kh!==null){for(r=0;r<kh.length;r++)if(o=kh[r],s=o.interleaved,s!==null){o.interleaved=null;var c=s.next,d=o.pending;if(d!==null){var p=d.next;d.next=c,s.next=p}o.pending=s}kh=null}return e}function YG(e,r){do{var o=uo;try{if(DD(),Ty.current=lC,cC){for(var s=Bi.memoizedState;s!==null;){var c=s.queue;c!==null&&(c.pending=null),s=s.next}cC=!1}if(qh=0,Mo=yo=Bi=null,Bg=!1,uv=0,zD.current=null,o===null||o.return===null){Co=1,pv=r,uo=null;break}e:{var d=e,p=o.return,v=o,m=r;if(r=Zo,v.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){var E=m,C=v,b=C.tag;if(!(C.mode&1)&&(b===0||b===11||b===15)){var R=C.alternate;R?(C.updateQueue=R.updateQueue,C.memoizedState=R.memoizedState,C.lanes=R.lanes):(C.updateQueue=null,C.memoizedState=null)}var w=I$(p);if(w!==null){w.flags&=-257,A$(w,p,v,d,r),w.mode&1&&w$(d,E,r),r=w,m=E;var I=r.updateQueue;if(I===null){var O=new Set;O.add(m),r.updateQueue=O}else I.add(m);break e}else{if(!(r&1)){w$(d,E,r),XD();break e}m=Error(yt(426))}}else if(Li&&v.mode&1){var x=I$(p);if(x!==null){!(x.flags&65536)&&(x.flags|=256),A$(x,p,v,d,r),xD(fm(m,v));break e}}d=m=fm(m,v),Co!==4&&(Co=2),jg===null?jg=[d]:jg.push(d),d=p;do{switch(d.tag){case 3:d.flags|=65536,r&=-r,d.lanes|=r;var P=DG(d,m,r);S$(d,P);break e;case 1:v=m;var N=d.type,L=d.stateNode;if(!(d.flags&128)&&(typeof N.getDerivedStateFromError=="function"||L!==null&&typeof L.componentDidCatch=="function"&&(Od===null||!Od.has(L)))){d.flags|=65536,r&=-r,d.lanes|=r;var M=PG(d,v,r);S$(d,M);break e}}d=d.return}while(d!==null)}QG(o)}catch(j){r=j,uo===o&&o!==null&&(uo=o=o.return);continue}break}while(1)}function XG(){var e=uC.current;return uC.current=lC,e===null?lC:e}function XD(){(Co===0||Co===3||Co===2)&&(Co=4),Uo===null||!(Yh&268435455)&&!(ob&268435455)||vd(Uo,Zo)}function pC(e,r){var o=Pr;Pr|=2;var s=XG();(Uo!==e||Zo!==r)&&(iu=null,Bh(e,r));do try{b0e();break}catch(c){YG(e,c)}while(1);if(DD(),Pr=o,uC.current=s,uo!==null)throw Error(yt(261));return Uo=null,Zo=0,Co}function b0e(){for(;uo!==null;)JG(uo)}function T0e(){for(;uo!==null&&!Yfe();)JG(uo)}function JG(e){var r=eK(e.alternate,e,Cs);e.memoizedProps=e.pendingProps,r===null?QG(e):uo=r,zD.current=null}function QG(e){var r=e;do{var o=r.alternate;if(e=r.return,r.flags&32768){if(o=v0e(o,r),o!==null){o.flags&=32767,uo=o;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Co=6,uo=null;return}}else if(o=g0e(o,r,Cs),o!==null){uo=o;return}if(r=r.sibling,r!==null){uo=r;return}uo=r=e}while(r!==null);Co===0&&(Co=5)}function xh(e,r,o){var s=Qr,c=lc.transition;try{lc.transition=null,Qr=1,R0e(e,r,o,s)}finally{lc.transition=c,Qr=s}return null}function R0e(e,r,o,s){do am();while(_d!==null);if(Pr&6)throw Error(yt(327));o=e.finishedWork;var c=e.finishedLanes;if(o===null)return null;if(e.finishedWork=null,e.finishedLanes=0,o===e.current)throw Error(yt(177));e.callbackNode=null,e.callbackPriority=0;var d=o.lanes|o.childLanes;if(ome(e,d),e===Uo&&(uo=Uo=null,Zo=0),!(o.subtreeFlags&2064)&&!(o.flags&2064)||HS||(HS=!0,tK(qy,function(){return am(),null})),d=(o.flags&15990)!==0,o.subtreeFlags&15990||d){d=lc.transition,lc.transition=null;var p=Qr;Qr=1;var v=Pr;Pr|=4,zD.current=null,_0e(e,o),GG(o,e),zme(Rx),Xy=!!Tx,Rx=Tx=null,e.current=o,S0e(o),Xfe(),Pr=v,Qr=p,lc.transition=d}else e.current=o;if(HS&&(HS=!1,_d=e,hC=c),d=e.pendingLanes,d===0&&(Od=null),Zfe(o.stateNode),is(e,to()),r!==null)for(s=e.onRecoverableError,o=0;o<r.length;o++)c=r[o],s(c.value,{componentStack:c.stack,digest:c.digest});if(dC)throw dC=!1,e=zx,zx=null,e;return hC&1&&e.tag!==0&&am(),d=e.pendingLanes,d&1?e===Gx?$g++:($g=0,Gx=e):$g=0,Bd(),null}function am(){if(_d!==null){var e=Dz(hC),r=lc.transition,o=Qr;try{if(lc.transition=null,Qr=16>e?16:e,_d===null)var s=!1;else{if(e=_d,_d=null,hC=0,Pr&6)throw Error(yt(331));var c=Pr;for(Pr|=4,Gt=e.current;Gt!==null;){var d=Gt,p=d.child;if(Gt.flags&16){var v=d.deletions;if(v!==null){for(var m=0;m<v.length;m++){var E=v[m];for(Gt=E;Gt!==null;){var C=Gt;switch(C.tag){case 0:case 11:case 15:Vg(8,C,d)}var b=C.child;if(b!==null)b.return=C,Gt=b;else for(;Gt!==null;){C=Gt;var R=C.sibling,w=C.return;if(HG(C),C===E){Gt=null;break}if(R!==null){R.return=w,Gt=R;break}Gt=w}}}var I=d.alternate;if(I!==null){var O=I.child;if(O!==null){I.child=null;do{var x=O.sibling;O.sibling=null,O=x}while(O!==null)}}Gt=d}}if(d.subtreeFlags&2064&&p!==null)p.return=d,Gt=p;else e:for(;Gt!==null;){if(d=Gt,d.flags&2048)switch(d.tag){case 0:case 11:case 15:Vg(9,d,d.return)}var P=d.sibling;if(P!==null){P.return=d.return,Gt=P;break e}Gt=d.return}}var N=e.current;for(Gt=N;Gt!==null;){p=Gt;var L=p.child;if(p.subtreeFlags&2064&&L!==null)L.return=p,Gt=L;else e:for(p=N;Gt!==null;){if(v=Gt,v.flags&2048)try{switch(v.tag){case 0:case 11:case 15:ib(9,v)}}catch(j){Yi(v,v.return,j)}if(v===p){Gt=null;break e}var M=v.sibling;if(M!==null){M.return=v.return,Gt=M;break e}Gt=v.return}}if(Pr=c,Bd(),Nl&&typeof Nl.onPostCommitFiberRoot=="function")try{Nl.onPostCommitFiberRoot(XC,e)}catch{}s=!0}return s}finally{Qr=o,lc.transition=r}}return!1}function j$(e,r,o){r=fm(o,r),r=DG(e,r,1),e=Ad(e,r,1),r=xa(),e!==null&&(kv(e,1,r),is(e,r))}function Yi(e,r,o){if(e.tag===3)j$(e,e,o);else for(;r!==null;){if(r.tag===3){j$(r,e,o);break}else if(r.tag===1){var s=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Od===null||!Od.has(s))){e=fm(o,e),e=PG(r,e,1),r=Ad(r,e,1),e=xa(),r!==null&&(kv(r,1,e),is(r,e));break}}r=r.return}}function w0e(e,r,o){var s=e.pingCache;s!==null&&s.delete(r),r=xa(),e.pingedLanes|=e.suspendedLanes&o,Uo===e&&(Zo&o)===o&&(Co===4||Co===3&&(Zo&130023424)===Zo&&500>to()-KD?Bh(e,0):GD|=o),is(e,r)}function ZG(e,r){r===0&&(e.mode&1?(r=PS,PS<<=1,!(PS&130023424)&&(PS=4194304)):r=1);var o=xa();e=fu(e,r),e!==null&&(kv(e,r,o),is(e,o))}function I0e(e){var r=e.memoizedState,o=0;r!==null&&(o=r.retryLane),ZG(e,o)}function A0e(e,r){var o=0;switch(e.tag){case 13:var s=e.stateNode,c=e.memoizedState;c!==null&&(o=c.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(yt(314))}s!==null&&s.delete(r),ZG(e,o)}var eK;eK=function(e,r,o){if(e!==null)if(e.memoizedProps!==r.pendingProps||ns.current)es=!0;else{if(!(e.lanes&o)&&!(r.flags&128))return es=!1,m0e(e,r,o);es=!!(e.flags&131072)}else es=!1,Li&&r.flags&1048576&&iG(r,rC,r.index);switch(r.lanes=0,r.tag){case 2:var s=r.type;wy(e,r),e=r.pendingProps;var c=um(r,Ea.current);om(r,o),c=VD(null,r,s,e,c,o);var d=jD();return r.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,rs(s)?(d=!0,tC(r)):d=!1,r.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,kD(r),c.updater=rb,r.stateNode=c,c._reactInternals=r,Lx(r,s,e,o),r=Fx(null,r,s,!0,d,o)):(r.tag=0,Li&&d&&AD(r),Oa(null,r,c,o),r=r.child),r;case 16:s=r.elementType;e:{switch(wy(e,r),e=r.pendingProps,c=s._init,s=c(s._payload),r.type=s,c=r.tag=x0e(s),e=Uc(s,e),c){case 0:r=Mx(null,r,s,e,o);break e;case 1:r=N$(null,r,s,e,o);break e;case 11:r=O$(null,r,s,e,o);break e;case 14:r=x$(null,r,s,Uc(s.type,e),o);break e}throw Error(yt(306,s,""))}return r;case 0:return s=r.type,c=r.pendingProps,c=r.elementType===s?c:Uc(s,c),Mx(e,r,s,c,o);case 1:return s=r.type,c=r.pendingProps,c=r.elementType===s?c:Uc(s,c),N$(e,r,s,c,o);case 3:e:{if(FG(r),e===null)throw Error(yt(387));s=r.pendingProps,d=r.memoizedState,c=d.element,uG(e,r),aC(r,s,null,o);var p=r.memoizedState;if(s=p.element,d.isDehydrated)if(d={element:s,isDehydrated:!1,cache:p.cache,pendingSuspenseBoundaries:p.pendingSuspenseBoundaries,transitions:p.transitions},r.updateQueue.baseState=d,r.memoizedState=d,r.flags&256){c=fm(Error(yt(423)),r),r=D$(e,r,s,o,c);break e}else if(s!==c){c=fm(Error(yt(424)),r),r=D$(e,r,s,o,c);break e}else for(bs=Id(r.stateNode.containerInfo.firstChild),Rs=r,Li=!0,Hc=null,o=cG(r,null,s,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(dm(),s===c){r=mu(e,r,o);break e}Oa(e,r,s,o)}r=r.child}return r;case 5:return dG(r),e===null&&Nx(r),s=r.type,c=r.pendingProps,d=e!==null?e.memoizedProps:null,p=c.children,wx(s,c)?p=null:d!==null&&wx(s,d)&&(r.flags|=32),MG(e,r),Oa(e,r,p,o),r.child;case 6:return e===null&&Nx(r),null;case 13:return UG(e,r,o);case 4:return MD(r,r.stateNode.containerInfo),s=r.pendingProps,e===null?r.child=hm(r,null,s,o):Oa(e,r,s,o),r.child;case 11:return s=r.type,c=r.pendingProps,c=r.elementType===s?c:Uc(s,c),O$(e,r,s,c,o);case 7:return Oa(e,r,r.pendingProps,o),r.child;case 8:return Oa(e,r,r.pendingProps.children,o),r.child;case 12:return Oa(e,r,r.pendingProps.children,o),r.child;case 10:e:{if(s=r.type._context,c=r.pendingProps,d=r.memoizedProps,p=c.value,mi(iC,s._currentValue),s._currentValue=p,d!==null)if(Xc(d.value,p)){if(d.children===c.children&&!ns.current){r=mu(e,r,o);break e}}else for(d=r.child,d!==null&&(d.return=r);d!==null;){var v=d.dependencies;if(v!==null){p=d.child;for(var m=v.firstContext;m!==null;){if(m.context===s){if(d.tag===1){m=lu(-1,o&-o),m.tag=2;var E=d.updateQueue;if(E!==null){E=E.shared;var C=E.pending;C===null?m.next=m:(m.next=C.next,C.next=m),E.pending=m}}d.lanes|=o,m=d.alternate,m!==null&&(m.lanes|=o),Dx(d.return,o,r),v.lanes|=o;break}m=m.next}}else if(d.tag===10)p=d.type===r.type?null:d.child;else if(d.tag===18){if(p=d.return,p===null)throw Error(yt(341));p.lanes|=o,v=p.alternate,v!==null&&(v.lanes|=o),Dx(p,o,r),p=d.sibling}else p=d.child;if(p!==null)p.return=d;else for(p=d;p!==null;){if(p===r){p=null;break}if(d=p.sibling,d!==null){d.return=p.return,p=d;break}p=p.return}d=p}Oa(e,r,c.children,o),r=r.child}return r;case 9:return c=r.type,s=r.pendingProps.children,om(r,o),c=dc(c),s=s(c),r.flags|=1,Oa(e,r,s,o),r.child;case 14:return s=r.type,c=Uc(s,r.pendingProps),c=Uc(s.type,c),x$(e,r,s,c,o);case 15:return LG(e,r,r.type,r.pendingProps,o);case 17:return s=r.type,c=r.pendingProps,c=r.elementType===s?c:Uc(s,c),wy(e,r),r.tag=1,rs(s)?(e=!0,tC(r)):e=!1,om(r,o),NG(r,s,c),Lx(r,s,c,o),Fx(null,r,s,!0,e,o);case 19:return BG(e,r,o);case 22:return kG(e,r,o)}throw Error(yt(156,r.tag))};function tK(e,r){return Az(e,r)}function O0e(e,r,o,s){this.tag=e,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function cc(e,r,o,s){return new O0e(e,r,o,s)}function JD(e){return e=e.prototype,!(!e||!e.isReactComponent)}function x0e(e){if(typeof e=="function")return JD(e)?1:0;if(e!=null){if(e=e.$$typeof,e===gD)return 11;if(e===vD)return 14}return 2}function Nd(e,r){var o=e.alternate;return o===null?(o=cc(e.tag,r,e.key,e.mode),o.elementType=e.elementType,o.type=e.type,o.stateNode=e.stateNode,o.alternate=e,e.alternate=o):(o.pendingProps=r,o.type=e.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=e.flags&14680064,o.childLanes=e.childLanes,o.lanes=e.lanes,o.child=e.child,o.memoizedProps=e.memoizedProps,o.memoizedState=e.memoizedState,o.updateQueue=e.updateQueue,r=e.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=e.sibling,o.index=e.index,o.ref=e.ref,o}function Oy(e,r,o,s,c,d){var p=2;if(s=e,typeof e=="function")JD(e)&&(p=1);else if(typeof e=="string")p=5;else e:switch(e){case jf:return Vh(o.children,c,d,r);case mD:p=8,c|=8;break;case ix:return e=cc(12,o,r,c|2),e.elementType=ix,e.lanes=d,e;case ox:return e=cc(13,o,r,c),e.elementType=ox,e.lanes=d,e;case ax:return e=cc(19,o,r,c),e.elementType=ax,e.lanes=d,e;case dz:return ab(o,c,d,r);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case lz:p=10;break e;case uz:p=9;break e;case gD:p=11;break e;case vD:p=14;break e;case fd:p=16,s=null;break e}throw Error(yt(130,e==null?e:typeof e,""))}return r=cc(p,o,r,c),r.elementType=e,r.type=s,r.lanes=d,r}function Vh(e,r,o,s){return e=cc(7,e,s,r),e.lanes=o,e}function ab(e,r,o,s){return e=cc(22,e,s,r),e.elementType=dz,e.lanes=o,e.stateNode={isHidden:!1},e}function CA(e,r,o){return e=cc(6,e,null,r),e.lanes=o,e}function bA(e,r,o){return r=cc(4,e.children!==null?e.children:[],e.key,r),r.lanes=o,r.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},r}function N0e(e,r,o,s,c){this.tag=r,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=rA(0),this.expirationTimes=rA(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=rA(0),this.identifierPrefix=s,this.onRecoverableError=c,this.mutableSourceEagerHydrationData=null}function QD(e,r,o,s,c,d,p,v,m){return e=new N0e(e,r,o,v,m),r===1?(r=1,d===!0&&(r|=8)):r=0,d=cc(3,null,null,r),e.current=d,d.stateNode=e,d.memoizedState={element:s,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},kD(d),e}function D0e(e,r,o){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Vf,key:s==null?null:""+s,children:e,containerInfo:r,implementation:o}}function nK(e){if(!e)return Pd;e=e._reactInternals;e:{if(ap(e)!==e||e.tag!==1)throw Error(yt(170));var r=e;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(rs(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(yt(171))}if(e.tag===1){var o=e.type;if(rs(o))return nG(e,o,r)}return r}function rK(e,r,o,s,c,d,p,v,m){return e=QD(o,s,!0,e,c,d,p,v,m),e.context=nK(null),o=e.current,s=xa(),c=xd(o),d=lu(s,c),d.callback=r??null,Ad(o,d,c),e.current.lanes=c,kv(e,c,s),is(e,s),e}function sb(e,r,o,s){var c=r.current,d=xa(),p=xd(c);return o=nK(o),r.context===null?r.context=o:r.pendingContext=o,r=lu(d,p),r.payload={element:e},s=s===void 0?null:s,s!==null&&(r.callback=s),e=Ad(c,r,p),e!==null&&(Gc(e,c,p,d),by(e,c,p)),p}function fC(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function $$(e,r){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var o=e.retryLane;e.retryLane=o!==0&&o<r?o:r}}function ZD(e,r){$$(e,r),(e=e.alternate)&&$$(e,r)}function P0e(){return null}var iK=typeof reportError=="function"?reportError:function(e){console.error(e)};function eP(e){this._internalRoot=e}cb.prototype.render=eP.prototype.render=function(e){var r=this._internalRoot;if(r===null)throw Error(yt(409));sb(e,r,null,null)};cb.prototype.unmount=eP.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var r=e.containerInfo;Xh(function(){sb(null,e,null,null)}),r[pu]=null}};function cb(e){this._internalRoot=e}cb.prototype.unstable_scheduleHydration=function(e){if(e){var r=kz();e={blockedOn:null,target:e,priority:r};for(var o=0;o<gd.length&&r!==0&&r<gd[o].priority;o++);gd.splice(o,0,e),o===0&&Fz(e)}};function tP(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function lb(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function H$(){}function L0e(e,r,o,s,c){if(c){if(typeof s=="function"){var d=s;s=function(){var E=fC(p);d.call(E)}}var p=rK(r,s,e,0,null,!1,!1,"",H$);return e._reactRootContainer=p,e[pu]=p.current,ov(e.nodeType===8?e.parentNode:e),Xh(),p}for(;c=e.lastChild;)e.removeChild(c);if(typeof s=="function"){var v=s;s=function(){var E=fC(m);v.call(E)}}var m=QD(e,0,!1,null,null,!1,!1,"",H$);return e._reactRootContainer=m,e[pu]=m.current,ov(e.nodeType===8?e.parentNode:e),Xh(function(){sb(r,m,o,s)}),m}function ub(e,r,o,s,c){var d=o._reactRootContainer;if(d){var p=d;if(typeof c=="function"){var v=c;c=function(){var m=fC(p);v.call(m)}}sb(r,p,e,c)}else p=L0e(o,r,e,c,s);return fC(p)}Pz=function(e){switch(e.tag){case 3:var r=e.stateNode;if(r.current.memoizedState.isDehydrated){var o=xg(r.pendingLanes);o!==0&&(SD(r,o|1),is(r,to()),!(Pr&6)&&(mm=to()+500,Bd()))}break;case 13:Xh(function(){var s=fu(e,1);if(s!==null){var c=xa();Gc(s,e,1,c)}}),ZD(e,1)}};yD=function(e){if(e.tag===13){var r=fu(e,134217728);if(r!==null){var o=xa();Gc(r,e,134217728,o)}ZD(e,134217728)}};Lz=function(e){if(e.tag===13){var r=xd(e),o=fu(e,r);if(o!==null){var s=xa();Gc(o,e,r,s)}ZD(e,r)}};kz=function(){return Qr};Mz=function(e,r){var o=Qr;try{return Qr=e,r()}finally{Qr=o}};gx=function(e,r,o){switch(r){case"input":if(lx(e,o),r=o.name,o.type==="radio"&&r!=null){for(o=e;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<o.length;r++){var s=o[r];if(s!==e&&s.form===e.form){var c=eb(s);if(!c)throw Error(yt(90));pz(s),lx(s,c)}}}break;case"textarea":mz(e,o);break;case"select":r=o.value,r!=null&&tm(e,!!o.multiple,r,!1)}};Cz=qD;bz=Xh;var k0e={usingClientEntryPoint:!1,Events:[Fv,zf,eb,Sz,yz,qD]},fg={findFiberByHostInstance:Lh,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},M0e={bundleType:fg.bundleType,version:fg.version,rendererPackageName:fg.rendererPackageName,rendererConfig:fg.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_u.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=wz(e),e===null?null:e.stateNode},findFiberByHostInstance:fg.findFiberByHostInstance||P0e,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var WS=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!WS.isDisabled&&WS.supportsFiber)try{XC=WS.inject(M0e),Nl=WS}catch{}}xs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=k0e;xs.createPortal=function(e,r){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!tP(r))throw Error(yt(200));return D0e(e,r,null,o)};xs.createRoot=function(e,r){if(!tP(e))throw Error(yt(299));var o=!1,s="",c=iK;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(c=r.onRecoverableError)),r=QD(e,1,!1,null,null,o,!1,s,c),e[pu]=r.current,ov(e.nodeType===8?e.parentNode:e),new eP(r)};xs.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var r=e._reactInternals;if(r===void 0)throw typeof e.render=="function"?Error(yt(188)):(e=Object.keys(e).join(","),Error(yt(268,e)));return e=wz(r),e=e===null?null:e.stateNode,e};xs.flushSync=function(e){return Xh(e)};xs.hydrate=function(e,r,o){if(!lb(r))throw Error(yt(200));return ub(null,e,r,!0,o)};xs.hydrateRoot=function(e,r,o){if(!tP(e))throw Error(yt(405));var s=o!=null&&o.hydratedSources||null,c=!1,d="",p=iK;if(o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onRecoverableError!==void 0&&(p=o.onRecoverableError)),r=rK(r,null,e,1,o??null,c,!1,d,p),e[pu]=r.current,ov(e),s)for(e=0;e<s.length;e++)o=s[e],c=o._getVersion,c=c(o._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[o,c]:r.mutableSourceEagerHydrationData.push(o,c);return new cb(r)};xs.render=function(e,r,o){if(!lb(r))throw Error(yt(200));return ub(null,e,r,!1,o)};xs.unmountComponentAtNode=function(e){if(!lb(e))throw Error(yt(40));return e._reactRootContainer?(Xh(function(){ub(null,null,e,!1,function(){e._reactRootContainer=null,e[pu]=null})}),!0):!1};xs.unstable_batchedUpdates=qD;xs.unstable_renderSubtreeIntoContainer=function(e,r,o,s){if(!lb(o))throw Error(yt(200));if(e==null||e._reactInternals===void 0)throw Error(yt(38));return ub(e,r,o,!1,s)};xs.version="18.3.1-next-f1338f8080-20240426";function oK(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(oK)}catch(e){console.error(e)}}oK(),oz.exports=xs;var kl=oz.exports;const Yx=Ld(kl),F0e=MW({__proto__:null,default:Yx},[kl]);var W$=kl;nx.createRoot=W$.createRoot,nx.hydrateRoot=W$.hydrateRoot;/**
 * @remix-run/router v1.16.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fv(){return fv=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var o=arguments[r];for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(e[s]=o[s])}return e},fv.apply(this,arguments)}var Sd;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Sd||(Sd={}));const z$="popstate";function U0e(e){e===void 0&&(e={});function r(c,d){let{pathname:p="/",search:v="",hash:m=""}=sp(c.location.hash.substr(1));return!p.startsWith("/")&&!p.startsWith(".")&&(p="/"+p),Xx("",{pathname:p,search:v,hash:m},d.state&&d.state.usr||null,d.state&&d.state.key||"default")}function o(c,d){let p=c.document.querySelector("base"),v="";if(p&&p.getAttribute("href")){let m=c.location.href,E=m.indexOf("#");v=E===-1?m:m.slice(0,E)}return v+"#"+(typeof d=="string"?d:aK(d))}function s(c,d){nP(c.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(d)+")")}return V0e(r,o,s,e)}function To(e,r){if(e===!1||e===null||typeof e>"u")throw new Error(r)}function nP(e,r){if(!e){typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}function B0e(){return Math.random().toString(36).substr(2,8)}function G$(e,r){return{usr:e.state,key:e.key,idx:r}}function Xx(e,r,o,s){return o===void 0&&(o=null),fv({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof r=="string"?sp(r):r,{state:o,key:r&&r.key||s||B0e()})}function aK(e){let{pathname:r="/",search:o="",hash:s=""}=e;return o&&o!=="?"&&(r+=o.charAt(0)==="?"?o:"?"+o),s&&s!=="#"&&(r+=s.charAt(0)==="#"?s:"#"+s),r}function sp(e){let r={};if(e){let o=e.indexOf("#");o>=0&&(r.hash=e.substr(o),e=e.substr(0,o));let s=e.indexOf("?");s>=0&&(r.search=e.substr(s),e=e.substr(0,s)),e&&(r.pathname=e)}return r}function V0e(e,r,o,s){s===void 0&&(s={});let{window:c=document.defaultView,v5Compat:d=!1}=s,p=c.history,v=Sd.Pop,m=null,E=C();E==null&&(E=0,p.replaceState(fv({},p.state,{idx:E}),""));function C(){return(p.state||{idx:null}).idx}function b(){v=Sd.Pop;let x=C(),P=x==null?null:x-E;E=x,m&&m({action:v,location:O.location,delta:P})}function R(x,P){v=Sd.Push;let N=Xx(O.location,x,P);o&&o(N,x),E=C()+1;let L=G$(N,E),M=O.createHref(N);try{p.pushState(L,"",M)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;c.location.assign(M)}d&&m&&m({action:v,location:O.location,delta:1})}function w(x,P){v=Sd.Replace;let N=Xx(O.location,x,P);o&&o(N,x),E=C();let L=G$(N,E),M=O.createHref(N);p.replaceState(L,"",M),d&&m&&m({action:v,location:O.location,delta:0})}function I(x){let P=c.location.origin!=="null"?c.location.origin:c.location.href,N=typeof x=="string"?x:aK(x);return N=N.replace(/ $/,"%20"),To(P,"No window.location.(origin|href) available to create URL for href: "+N),new URL(N,P)}let O={get action(){return v},get location(){return e(c,p)},listen(x){if(m)throw new Error("A history only accepts one active listener");return c.addEventListener(z$,b),m=x,()=>{c.removeEventListener(z$,b),m=null}},createHref(x){return r(c,x)},createURL:I,encodeLocation(x){let P=I(x);return{pathname:P.pathname,search:P.search,hash:P.hash}},push:R,replace:w,go(x){return p.go(x)}};return O}var K$;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(K$||(K$={}));function j0e(e,r,o){o===void 0&&(o="/");let s=typeof r=="string"?sp(r):r,c=lK(s.pathname||"/",o);if(c==null)return null;let d=sK(e);$0e(d);let p=null;for(let v=0;p==null&&v<d.length;++v){let m=ege(c);p=J0e(d[v],m)}return p}function sK(e,r,o,s){r===void 0&&(r=[]),o===void 0&&(o=[]),s===void 0&&(s="");let c=(d,p,v)=>{let m={relativePath:v===void 0?d.path||"":v,caseSensitive:d.caseSensitive===!0,childrenIndex:p,route:d};m.relativePath.startsWith("/")&&(To(m.relativePath.startsWith(s),'Absolute route path "'+m.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),m.relativePath=m.relativePath.slice(s.length));let E=jh([s,m.relativePath]),C=o.concat(m);d.children&&d.children.length>0&&(To(d.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+E+'".')),sK(d.children,r,C,E)),!(d.path==null&&!d.index)&&r.push({path:E,score:Y0e(E,d.index),routesMeta:C})};return e.forEach((d,p)=>{var v;if(d.path===""||!((v=d.path)!=null&&v.includes("?")))c(d,p);else for(let m of cK(d.path))c(d,p,m)}),r}function cK(e){let r=e.split("/");if(r.length===0)return[];let[o,...s]=r,c=o.endsWith("?"),d=o.replace(/\?$/,"");if(s.length===0)return c?[d,""]:[d];let p=cK(s.join("/")),v=[];return v.push(...p.map(m=>m===""?d:[d,m].join("/"))),c&&v.push(...p),v.map(m=>e.startsWith("/")&&m===""?"/":m)}function $0e(e){e.sort((r,o)=>r.score!==o.score?o.score-r.score:X0e(r.routesMeta.map(s=>s.childrenIndex),o.routesMeta.map(s=>s.childrenIndex)))}const H0e=/^:[\w-]+$/,W0e=3,z0e=2,G0e=1,K0e=10,q0e=-2,q$=e=>e==="*";function Y0e(e,r){let o=e.split("/"),s=o.length;return o.some(q$)&&(s+=q0e),r&&(s+=z0e),o.filter(c=>!q$(c)).reduce((c,d)=>c+(H0e.test(d)?W0e:d===""?G0e:K0e),s)}function X0e(e,r){return e.length===r.length&&e.slice(0,-1).every((s,c)=>s===r[c])?e[e.length-1]-r[r.length-1]:0}function J0e(e,r){let{routesMeta:o}=e,s={},c="/",d=[];for(let p=0;p<o.length;++p){let v=o[p],m=p===o.length-1,E=c==="/"?r:r.slice(c.length)||"/",C=Q0e({path:v.relativePath,caseSensitive:v.caseSensitive,end:m},E);if(!C)return null;Object.assign(s,C.params);let b=v.route;d.push({params:s,pathname:jh([c,C.pathname]),pathnameBase:age(jh([c,C.pathnameBase])),route:b}),C.pathnameBase!=="/"&&(c=jh([c,C.pathnameBase]))}return d}function Q0e(e,r){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[o,s]=Z0e(e.path,e.caseSensitive,e.end),c=r.match(o);if(!c)return null;let d=c[0],p=d.replace(/(.)\/+$/,"$1"),v=c.slice(1);return{params:s.reduce((E,C,b)=>{let{paramName:R,isOptional:w}=C;if(R==="*"){let O=v[b]||"";p=d.slice(0,d.length-O.length).replace(/(.)\/+$/,"$1")}const I=v[b];return w&&!I?E[R]=void 0:E[R]=(I||"").replace(/%2F/g,"/"),E},{}),pathname:d,pathnameBase:p,pattern:e}}function Z0e(e,r,o){r===void 0&&(r=!1),o===void 0&&(o=!0),nP(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let s=[],c="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(p,v,m)=>(s.push({paramName:v,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(s.push({paramName:"*"}),c+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):o?c+="\\/*$":e!==""&&e!=="/"&&(c+="(?:(?=\\/|$))"),[new RegExp(c,r?void 0:"i"),s]}function ege(e){try{return e.split("/").map(r=>decodeURIComponent(r).replace(/\//g,"%2F")).join("/")}catch(r){return nP(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+r+").")),e}}function lK(e,r){if(r==="/")return e;if(!e.toLowerCase().startsWith(r.toLowerCase()))return null;let o=r.endsWith("/")?r.length-1:r.length,s=e.charAt(o);return s&&s!=="/"?null:e.slice(o)||"/"}function tge(e,r){r===void 0&&(r="/");let{pathname:o,search:s="",hash:c=""}=typeof e=="string"?sp(e):e;return{pathname:o?o.startsWith("/")?o:nge(o,r):r,search:sge(s),hash:cge(c)}}function nge(e,r){let o=r.replace(/\/+$/,"").split("/");return e.split("/").forEach(c=>{c===".."?o.length>1&&o.pop():c!=="."&&o.push(c)}),o.length>1?o.join("/"):"/"}function TA(e,r,o,s){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+r+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+o+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function rge(e){return e.filter((r,o)=>o===0||r.route.path&&r.route.path.length>0)}function ige(e,r){let o=rge(e);return r?o.map((s,c)=>c===e.length-1?s.pathname:s.pathnameBase):o.map(s=>s.pathnameBase)}function oge(e,r,o,s){s===void 0&&(s=!1);let c;typeof e=="string"?c=sp(e):(c=fv({},e),To(!c.pathname||!c.pathname.includes("?"),TA("?","pathname","search",c)),To(!c.pathname||!c.pathname.includes("#"),TA("#","pathname","hash",c)),To(!c.search||!c.search.includes("#"),TA("#","search","hash",c)));let d=e===""||c.pathname==="",p=d?"/":c.pathname,v;if(p==null)v=o;else{let b=r.length-1;if(!s&&p.startsWith("..")){let R=p.split("/");for(;R[0]==="..";)R.shift(),b-=1;c.pathname=R.join("/")}v=b>=0?r[b]:"/"}let m=tge(c,v),E=p&&p!=="/"&&p.endsWith("/"),C=(d||p===".")&&o.endsWith("/");return!m.pathname.endsWith("/")&&(E||C)&&(m.pathname+="/"),m}const jh=e=>e.join("/").replace(/\/\/+/g,"/"),age=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),sge=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,cge=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function lge(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const uK=["post","put","patch","delete"];new Set(uK);const uge=["get",...uK];new Set(uge);/**
 * React Router v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function mv(){return mv=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var o=arguments[r];for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(e[s]=o[s])}return e},mv.apply(this,arguments)}const rP=S.createContext(null),dge=S.createContext(null),db=S.createContext(null),hb=S.createContext(null),Om=S.createContext({outlet:null,matches:[],isDataRoute:!1}),dK=S.createContext(null);function pb(){return S.useContext(hb)!=null}function hK(){return pb()||To(!1),S.useContext(hb).location}function pK(e){S.useContext(db).static||S.useLayoutEffect(e)}function hge(){let{isDataRoute:e}=S.useContext(Om);return e?Rge():pge()}function pge(){pb()||To(!1);let e=S.useContext(rP),{basename:r,future:o,navigator:s}=S.useContext(db),{matches:c}=S.useContext(Om),{pathname:d}=hK(),p=JSON.stringify(ige(c,o.v7_relativeSplatPath)),v=S.useRef(!1);return pK(()=>{v.current=!0}),S.useCallback(function(E,C){if(C===void 0&&(C={}),!v.current)return;if(typeof E=="number"){s.go(E);return}let b=oge(E,JSON.parse(p),d,C.relative==="path");e==null&&r!=="/"&&(b.pathname=b.pathname==="/"?r:jh([r,b.pathname])),(C.replace?s.replace:s.push)(b,C.state,C)},[r,s,p,d,e])}function fge(e,r){return mge(e,r)}function mge(e,r,o,s){pb()||To(!1);let{navigator:c}=S.useContext(db),{matches:d}=S.useContext(Om),p=d[d.length-1],v=p?p.params:{};p&&p.pathname;let m=p?p.pathnameBase:"/";p&&p.route;let E=hK(),C;if(r){var b;let x=typeof r=="string"?sp(r):r;m==="/"||(b=x.pathname)!=null&&b.startsWith(m)||To(!1),C=x}else C=E;let R=C.pathname||"/",w=R;if(m!=="/"){let x=m.replace(/^\//,"").split("/");w="/"+R.replace(/^\//,"").split("/").slice(x.length).join("/")}let I=j0e(e,{pathname:w}),O=Sge(I&&I.map(x=>Object.assign({},x,{params:Object.assign({},v,x.params),pathname:jh([m,c.encodeLocation?c.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?m:jh([m,c.encodeLocation?c.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),d,o,s);return r&&O?S.createElement(hb.Provider,{value:{location:mv({pathname:"/",search:"",hash:"",state:null,key:"default"},C),navigationType:Sd.Pop}},O):O}function gge(){let e=Tge(),r=lge(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),o=e instanceof Error?e.stack:null,c={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},d=null;return S.createElement(S.Fragment,null,S.createElement("h2",null,"Unexpected Application Error!"),S.createElement("h3",{style:{fontStyle:"italic"}},r),o?S.createElement("pre",{style:c},o):null,d)}const vge=S.createElement(gge,null);class Ege extends S.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,o){return o.location!==r.location||o.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:o.error,location:o.location,revalidation:r.revalidation||o.revalidation}}componentDidCatch(r,o){console.error("React Router caught the following error during render",r,o)}render(){return this.state.error!==void 0?S.createElement(Om.Provider,{value:this.props.routeContext},S.createElement(dK.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function _ge(e){let{routeContext:r,match:o,children:s}=e,c=S.useContext(rP);return c&&c.static&&c.staticContext&&(o.route.errorElement||o.route.ErrorBoundary)&&(c.staticContext._deepestRenderedBoundaryId=o.route.id),S.createElement(Om.Provider,{value:r},s)}function Sge(e,r,o,s){var c;if(r===void 0&&(r=[]),o===void 0&&(o=null),s===void 0&&(s=null),e==null){var d;if((d=o)!=null&&d.errors)e=o.matches;else return null}let p=e,v=(c=o)==null?void 0:c.errors;if(v!=null){let C=p.findIndex(b=>b.route.id&&(v==null?void 0:v[b.route.id])!==void 0);C>=0||To(!1),p=p.slice(0,Math.min(p.length,C+1))}let m=!1,E=-1;if(o&&s&&s.v7_partialHydration)for(let C=0;C<p.length;C++){let b=p[C];if((b.route.HydrateFallback||b.route.hydrateFallbackElement)&&(E=C),b.route.id){let{loaderData:R,errors:w}=o,I=b.route.loader&&R[b.route.id]===void 0&&(!w||w[b.route.id]===void 0);if(b.route.lazy||I){m=!0,E>=0?p=p.slice(0,E+1):p=[p[0]];break}}}return p.reduceRight((C,b,R)=>{let w,I=!1,O=null,x=null;o&&(w=v&&b.route.id?v[b.route.id]:void 0,O=b.route.errorElement||vge,m&&(E<0&&R===0?(wge("route-fallback",!1),I=!0,x=null):E===R&&(I=!0,x=b.route.hydrateFallbackElement||null)));let P=r.concat(p.slice(0,R+1)),N=()=>{let L;return w?L=O:I?L=x:b.route.Component?L=S.createElement(b.route.Component,null):b.route.element?L=b.route.element:L=C,S.createElement(_ge,{match:b,routeContext:{outlet:C,matches:P,isDataRoute:o!=null},children:L})};return o&&(b.route.ErrorBoundary||b.route.errorElement||R===0)?S.createElement(Ege,{location:o.location,revalidation:o.revalidation,component:O,error:w,children:N(),routeContext:{outlet:null,matches:P,isDataRoute:!0}}):N()},null)}var fK=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(fK||{}),mC=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(mC||{});function yge(e){let r=S.useContext(rP);return r||To(!1),r}function Cge(e){let r=S.useContext(dge);return r||To(!1),r}function bge(e){let r=S.useContext(Om);return r||To(!1),r}function mK(e){let r=bge(),o=r.matches[r.matches.length-1];return o.route.id||To(!1),o.route.id}function Tge(){var e;let r=S.useContext(dK),o=Cge(mC.UseRouteError),s=mK(mC.UseRouteError);return r!==void 0?r:(e=o.errors)==null?void 0:e[s]}function Rge(){let{router:e}=yge(fK.UseNavigateStable),r=mK(mC.UseNavigateStable),o=S.useRef(!1);return pK(()=>{o.current=!0}),S.useCallback(function(c,d){d===void 0&&(d={}),o.current&&(typeof c=="number"?e.navigate(c):e.navigate(c,mv({fromRouteId:r},d)))},[e,r])}const Y$={};function wge(e,r,o){!r&&!Y$[e]&&(Y$[e]=!0)}function Nh(e){To(!1)}function Ige(e){let{basename:r="/",children:o=null,location:s,navigationType:c=Sd.Pop,navigator:d,static:p=!1,future:v}=e;pb()&&To(!1);let m=r.replace(/^\/*/,"/"),E=S.useMemo(()=>({basename:m,navigator:d,static:p,future:mv({v7_relativeSplatPath:!1},v)}),[m,v,d,p]);typeof s=="string"&&(s=sp(s));let{pathname:C="/",search:b="",hash:R="",state:w=null,key:I="default"}=s,O=S.useMemo(()=>{let x=lK(C,m);return x==null?null:{location:{pathname:x,search:b,hash:R,state:w,key:I},navigationType:c}},[m,C,b,R,w,I,c]);return O==null?null:S.createElement(db.Provider,{value:E},S.createElement(hb.Provider,{children:o,value:O}))}function Age(e){let{children:r,location:o}=e;return fge(Jx(r),o)}new Promise(()=>{});function Jx(e,r){r===void 0&&(r=[]);let o=[];return S.Children.forEach(e,(s,c)=>{if(!S.isValidElement(s))return;let d=[...r,c];if(s.type===S.Fragment){o.push.apply(o,Jx(s.props.children,d));return}s.type!==Nh&&To(!1),!s.props.index||!s.props.children||To(!1);let p={id:s.props.id||d.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(p.children=Jx(s.props.children,d)),o.push(p)}),o}/**
 * React Router DOM v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const Oge="6";try{window.__reactRouterVersion=Oge}catch{}const xge="startTransition",X$=zh[xge];function Nge(e){let{basename:r,children:o,future:s,window:c}=e,d=S.useRef();d.current==null&&(d.current=U0e({window:c,v5Compat:!0}));let p=d.current,[v,m]=S.useState({action:p.action,location:p.location}),{v7_startTransition:E}=s||{},C=S.useCallback(b=>{E&&X$?X$(()=>m(b)):m(b)},[m,E]);return S.useLayoutEffect(()=>p.listen(C),[p,C]),S.createElement(Ige,{basename:r,children:o,location:v.location,navigationType:v.action,navigator:p,future:s})}var J$;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(J$||(J$={}));var Q$;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Q$||(Q$={}));var gK={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var r={}.hasOwnProperty;function o(){for(var d="",p=0;p<arguments.length;p++){var v=arguments[p];v&&(d=c(d,s(v)))}return d}function s(d){if(typeof d=="string"||typeof d=="number")return d;if(typeof d!="object")return"";if(Array.isArray(d))return o.apply(null,d);if(d.toString!==Object.prototype.toString&&!d.toString.toString().includes("[native code]"))return d.toString();var p="";for(var v in d)r.call(d,v)&&d[v]&&(p=c(p,v));return p}function c(d,p){return p?d?d+" "+p:d+p:d}e.exports?(o.default=o,e.exports=o):window.classNames=o})()})(gK);var Dge=gK.exports;const He=Ld(Dge);function Je(){return Je=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var o=arguments[r];for(var s in o)({}).hasOwnProperty.call(o,s)&&(e[s]=o[s])}return e},Je.apply(null,arguments)}var vK={exports:{}},Zr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iP=Symbol.for("react.element"),oP=Symbol.for("react.portal"),fb=Symbol.for("react.fragment"),mb=Symbol.for("react.strict_mode"),gb=Symbol.for("react.profiler"),vb=Symbol.for("react.provider"),Eb=Symbol.for("react.context"),Pge=Symbol.for("react.server_context"),_b=Symbol.for("react.forward_ref"),Sb=Symbol.for("react.suspense"),yb=Symbol.for("react.suspense_list"),Cb=Symbol.for("react.memo"),bb=Symbol.for("react.lazy"),Lge=Symbol.for("react.offscreen"),EK;EK=Symbol.for("react.module.reference");function gc(e){if(typeof e=="object"&&e!==null){var r=e.$$typeof;switch(r){case iP:switch(e=e.type,e){case fb:case gb:case mb:case Sb:case yb:return e;default:switch(e=e&&e.$$typeof,e){case Pge:case Eb:case _b:case bb:case Cb:case vb:return e;default:return r}}case oP:return r}}}Zr.ContextConsumer=Eb;Zr.ContextProvider=vb;Zr.Element=iP;Zr.ForwardRef=_b;Zr.Fragment=fb;Zr.Lazy=bb;Zr.Memo=Cb;Zr.Portal=oP;Zr.Profiler=gb;Zr.StrictMode=mb;Zr.Suspense=Sb;Zr.SuspenseList=yb;Zr.isAsyncMode=function(){return!1};Zr.isConcurrentMode=function(){return!1};Zr.isContextConsumer=function(e){return gc(e)===Eb};Zr.isContextProvider=function(e){return gc(e)===vb};Zr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===iP};Zr.isForwardRef=function(e){return gc(e)===_b};Zr.isFragment=function(e){return gc(e)===fb};Zr.isLazy=function(e){return gc(e)===bb};Zr.isMemo=function(e){return gc(e)===Cb};Zr.isPortal=function(e){return gc(e)===oP};Zr.isProfiler=function(e){return gc(e)===gb};Zr.isStrictMode=function(e){return gc(e)===mb};Zr.isSuspense=function(e){return gc(e)===Sb};Zr.isSuspenseList=function(e){return gc(e)===yb};Zr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===fb||e===gb||e===mb||e===Sb||e===yb||e===Lge||typeof e=="object"&&e!==null&&(e.$$typeof===bb||e.$$typeof===Cb||e.$$typeof===vb||e.$$typeof===Eb||e.$$typeof===_b||e.$$typeof===EK||e.getModuleId!==void 0)};Zr.typeOf=gc;vK.exports=Zr;var xy=vK.exports;function Jc(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=[];return Be.Children.forEach(e,function(s){s==null&&!r.keepEmpty||(Array.isArray(s)?o=o.concat(Jc(s)):xy.isFragment(s)&&s.props?o=o.concat(Jc(s.props.children,r)):o.push(s))}),o}var Qx={},kge=function(r){};function Mge(e,r){}function Fge(e,r){}function Uge(){Qx={}}function _K(e,r,o){!r&&!Qx[o]&&(e(!1,o),Qx[o]=!0)}function ga(e,r){_K(Mge,e,r)}function Bge(e,r){_K(Fge,e,r)}ga.preMessage=kge;ga.resetWarned=Uge;ga.noteOnce=Bge;function pn(e){"@babel/helpers - typeof";return pn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},pn(e)}function Vge(e,r){if(pn(e)!="object"||!e)return e;var o=e[Symbol.toPrimitive];if(o!==void 0){var s=o.call(e,r||"default");if(pn(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function SK(e){var r=Vge(e,"string");return pn(r)=="symbol"?r:r+""}function ye(e,r,o){return(r=SK(r))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o,e}function Z$(e,r){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),o.push.apply(o,s)}return o}function _e(e){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?Z$(Object(o),!0).forEach(function(s){ye(e,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):Z$(Object(o)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(o,s))})}return e}function gv(e){return e instanceof HTMLElement||e instanceof SVGElement}function yK(e){return e&&pn(e)==="object"&&gv(e.nativeElement)?e.nativeElement:gv(e)?e:null}function Hg(e){var r=yK(e);if(r)return r;if(e instanceof Be.Component){var o;return(o=Yx.findDOMNode)===null||o===void 0?void 0:o.call(Yx,e)}return null}function Bv(e,r,o){var s=S.useRef({});return(!("value"in s.current)||o(s.current.condition,r))&&(s.current.value=e(),s.current.condition=r),s.current.value}var aP=function(r,o){typeof r=="function"?r(o):pn(r)==="object"&&r&&"current"in r&&(r.current=o)},vc=function(){for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];var c=o.filter(Boolean);return c.length<=1?c[0]:function(d){o.forEach(function(p){aP(p,d)})}},Vv=function(){for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return Bv(function(){return vc.apply(void 0,o)},o,function(c,d){return c.length!==d.length||c.every(function(p,v){return p!==d[v]})})},xm=function(r){var o,s,c=xy.isMemo(r)?r.type.type:r.type;return!(typeof c=="function"&&!((o=c.prototype)!==null&&o!==void 0&&o.render)&&c.$$typeof!==xy.ForwardRef||typeof r=="function"&&!((s=r.prototype)!==null&&s!==void 0&&s.render)&&r.$$typeof!==xy.ForwardRef)},Zx=S.createContext(null);function jge(e){var r=e.children,o=e.onBatchResize,s=S.useRef(0),c=S.useRef([]),d=S.useContext(Zx),p=S.useCallback(function(v,m,E){s.current+=1;var C=s.current;c.current.push({size:v,element:m,data:E}),Promise.resolve().then(function(){C===s.current&&(o==null||o(c.current),c.current=[])}),d==null||d(v,m,E)},[o,d]);return S.createElement(Zx.Provider,{value:p},r)}var CK=function(){if(typeof Map<"u")return Map;function e(r,o){var s=-1;return r.some(function(c,d){return c[0]===o?(s=d,!0):!1}),s}return function(){function r(){this.__entries__=[]}return Object.defineProperty(r.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),r.prototype.get=function(o){var s=e(this.__entries__,o),c=this.__entries__[s];return c&&c[1]},r.prototype.set=function(o,s){var c=e(this.__entries__,o);~c?this.__entries__[c][1]=s:this.__entries__.push([o,s])},r.prototype.delete=function(o){var s=this.__entries__,c=e(s,o);~c&&s.splice(c,1)},r.prototype.has=function(o){return!!~e(this.__entries__,o)},r.prototype.clear=function(){this.__entries__.splice(0)},r.prototype.forEach=function(o,s){s===void 0&&(s=null);for(var c=0,d=this.__entries__;c<d.length;c++){var p=d[c];o.call(s,p[1],p[0])}},r}()}(),eN=typeof window<"u"&&typeof document<"u"&&window.document===document,gC=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),$ge=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(gC):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)}}(),Hge=2;function Wge(e,r){var o=!1,s=!1,c=0;function d(){o&&(o=!1,e()),s&&v()}function p(){$ge(d)}function v(){var m=Date.now();if(o){if(m-c<Hge)return;s=!0}else o=!0,s=!1,setTimeout(p,r);c=m}return v}var zge=20,Gge=["top","right","bottom","left","width","height","size","weight"],Kge=typeof MutationObserver<"u",qge=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=Wge(this.refresh.bind(this),zge)}return e.prototype.addObserver=function(r){~this.observers_.indexOf(r)||this.observers_.push(r),this.connected_||this.connect_()},e.prototype.removeObserver=function(r){var o=this.observers_,s=o.indexOf(r);~s&&o.splice(s,1),!o.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){var r=this.updateObservers_();r&&this.refresh()},e.prototype.updateObservers_=function(){var r=this.observers_.filter(function(o){return o.gatherActive(),o.hasActive()});return r.forEach(function(o){return o.broadcastActive()}),r.length>0},e.prototype.connect_=function(){!eN||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),Kge?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){!eN||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(r){var o=r.propertyName,s=o===void 0?"":o,c=Gge.some(function(d){return!!~s.indexOf(d)});c&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),bK=function(e,r){for(var o=0,s=Object.keys(r);o<s.length;o++){var c=s[o];Object.defineProperty(e,c,{value:r[c],enumerable:!1,writable:!1,configurable:!0})}return e},gm=function(e){var r=e&&e.ownerDocument&&e.ownerDocument.defaultView;return r||gC},TK=Tb(0,0,0,0);function vC(e){return parseFloat(e)||0}function eH(e){for(var r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];return r.reduce(function(s,c){var d=e["border-"+c+"-width"];return s+vC(d)},0)}function Yge(e){for(var r=["top","right","bottom","left"],o={},s=0,c=r;s<c.length;s++){var d=c[s],p=e["padding-"+d];o[d]=vC(p)}return o}function Xge(e){var r=e.getBBox();return Tb(0,0,r.width,r.height)}function Jge(e){var r=e.clientWidth,o=e.clientHeight;if(!r&&!o)return TK;var s=gm(e).getComputedStyle(e),c=Yge(s),d=c.left+c.right,p=c.top+c.bottom,v=vC(s.width),m=vC(s.height);if(s.boxSizing==="border-box"&&(Math.round(v+d)!==r&&(v-=eH(s,"left","right")+d),Math.round(m+p)!==o&&(m-=eH(s,"top","bottom")+p)),!Zge(e)){var E=Math.round(v+d)-r,C=Math.round(m+p)-o;Math.abs(E)!==1&&(v-=E),Math.abs(C)!==1&&(m-=C)}return Tb(c.left,c.top,v,m)}var Qge=function(){return typeof SVGGraphicsElement<"u"?function(e){return e instanceof gm(e).SVGGraphicsElement}:function(e){return e instanceof gm(e).SVGElement&&typeof e.getBBox=="function"}}();function Zge(e){return e===gm(e).document.documentElement}function eve(e){return eN?Qge(e)?Xge(e):Jge(e):TK}function tve(e){var r=e.x,o=e.y,s=e.width,c=e.height,d=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,p=Object.create(d.prototype);return bK(p,{x:r,y:o,width:s,height:c,top:o,right:r+s,bottom:c+o,left:r}),p}function Tb(e,r,o,s){return{x:e,y:r,width:o,height:s}}var nve=function(){function e(r){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=Tb(0,0,0,0),this.target=r}return e.prototype.isActive=function(){var r=eve(this.target);return this.contentRect_=r,r.width!==this.broadcastWidth||r.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var r=this.contentRect_;return this.broadcastWidth=r.width,this.broadcastHeight=r.height,r},e}(),rve=function(){function e(r,o){var s=tve(o);bK(this,{target:r,contentRect:s})}return e}(),ive=function(){function e(r,o,s){if(this.activeObservations_=[],this.observations_=new CK,typeof r!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=r,this.controller_=o,this.callbackCtx_=s}return e.prototype.observe=function(r){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(r instanceof gm(r).Element))throw new TypeError('parameter 1 is not of type "Element".');var o=this.observations_;o.has(r)||(o.set(r,new nve(r)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(r){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(r instanceof gm(r).Element))throw new TypeError('parameter 1 is not of type "Element".');var o=this.observations_;o.has(r)&&(o.delete(r),o.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var r=this;this.clearActive(),this.observations_.forEach(function(o){o.isActive()&&r.activeObservations_.push(o)})},e.prototype.broadcastActive=function(){if(this.hasActive()){var r=this.callbackCtx_,o=this.activeObservations_.map(function(s){return new rve(s.target,s.broadcastRect())});this.callback_.call(r,o,r),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),RK=typeof WeakMap<"u"?new WeakMap:new CK,wK=function(){function e(r){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var o=qge.getInstance(),s=new ive(r,o,this);RK.set(this,s)}return e}();["observe","unobserve","disconnect"].forEach(function(e){wK.prototype[e]=function(){var r;return(r=RK.get(this))[e].apply(r,arguments)}});var ove=function(){return typeof gC.ResizeObserver<"u"?gC.ResizeObserver:wK}(),yd=new Map;function ave(e){e.forEach(function(r){var o,s=r.target;(o=yd.get(s))===null||o===void 0||o.forEach(function(c){return c(s)})})}var IK=new ove(ave);function sve(e,r){yd.has(e)||(yd.set(e,new Set),IK.observe(e)),yd.get(e).add(r)}function cve(e,r){yd.has(e)&&(yd.get(e).delete(r),yd.get(e).size||(IK.unobserve(e),yd.delete(e)))}function Bo(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function tH(e,r){for(var o=0;o<r.length;o++){var s=r[o];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,SK(s.key),s)}}function Vo(e,r,o){return r&&tH(e.prototype,r),o&&tH(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}function vv(e,r){return vv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,s){return o.__proto__=s,o},vv(e,r)}function Su(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),r&&vv(e,r)}function Jh(e){return Jh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Jh(e)}function Rb(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Rb=function(){return!!e})()}function br(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function AK(e,r){if(r&&(pn(r)=="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return br(e)}function cp(e){var r=Rb();return function(){var o,s=Jh(e);if(r){var c=Jh(this).constructor;o=Reflect.construct(s,arguments,c)}else o=s.apply(this,arguments);return AK(this,o)}}var lve=function(e){Su(o,e);var r=cp(o);function o(){return Bo(this,o),r.apply(this,arguments)}return Vo(o,[{key:"render",value:function(){return this.props.children}}]),o}(S.Component);function uve(e,r){var o=e.children,s=e.disabled,c=S.useRef(null),d=S.useRef(null),p=S.useContext(Zx),v=typeof o=="function",m=v?o(c):o,E=S.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),C=!v&&S.isValidElement(m)&&xm(m),b=C?m.ref:null,R=Vv(b,c),w=function(){var P;return Hg(c.current)||(c.current&&pn(c.current)==="object"?Hg((P=c.current)===null||P===void 0?void 0:P.nativeElement):null)||Hg(d.current)};S.useImperativeHandle(r,function(){return w()});var I=S.useRef(e);I.current=e;var O=S.useCallback(function(x){var P=I.current,N=P.onResize,L=P.data,M=x.getBoundingClientRect(),j=M.width,$=M.height,H=x.offsetWidth,G=x.offsetHeight,Y=Math.floor(j),q=Math.floor($);if(E.current.width!==Y||E.current.height!==q||E.current.offsetWidth!==H||E.current.offsetHeight!==G){var J={width:Y,height:q,offsetWidth:H,offsetHeight:G};E.current=J;var re=H===Math.round(j)?j:H,Z=G===Math.round($)?$:G,Q=_e(_e({},J),{},{offsetWidth:re,offsetHeight:Z});p==null||p(Q,x,L),N&&Promise.resolve().then(function(){N(Q,x)})}},[]);return S.useEffect(function(){var x=w();return x&&!s&&sve(x,O),function(){return cve(x,O)}},[c.current,s]),S.createElement(lve,{ref:d},C?S.cloneElement(m,{ref:R}):m)}var dve=S.forwardRef(uve),hve="rc-observer-key";function pve(e,r){var o=e.children,s=typeof o=="function"?[o]:Jc(o);return s.map(function(c,d){var p=(c==null?void 0:c.key)||"".concat(hve,"-").concat(d);return S.createElement(dve,Je({},e,{key:p,ref:d===0?r:void 0}),c)})}var yu=S.forwardRef(pve);yu.Collection=jge;function Sa(e,r){var o=_e({},e);return Array.isArray(r)&&r.forEach(function(s){delete o[s]}),o}function tN(e,r){(r==null||r>e.length)&&(r=e.length);for(var o=0,s=Array(r);o<r;o++)s[o]=e[o];return s}function fve(e){if(Array.isArray(e))return tN(e)}function OK(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function sP(e,r){if(e){if(typeof e=="string")return tN(e,r);var o={}.toString.call(e).slice(8,-1);return o==="Object"&&e.constructor&&(o=e.constructor.name),o==="Map"||o==="Set"?Array.from(e):o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?tN(e,r):void 0}}function mve(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _t(e){return fve(e)||OK(e)||sP(e)||mve()}var xK=function(r){return+setTimeout(r,16)},NK=function(r){return clearTimeout(r)};typeof window<"u"&&"requestAnimationFrame"in window&&(xK=function(r){return window.requestAnimationFrame(r)},NK=function(r){return window.cancelAnimationFrame(r)});var nH=0,cP=new Map;function DK(e){cP.delete(e)}var ci=function(r){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;nH+=1;var s=nH;function c(d){if(d===0)DK(s),r();else{var p=xK(function(){c(d-1)});cP.set(s,p)}}return c(o),s};ci.cancel=function(e){var r=cP.get(e);return DK(e),NK(r)};function PK(e){if(Array.isArray(e))return e}function gve(e,r){var o=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(o!=null){var s,c,d,p,v=[],m=!0,E=!1;try{if(d=(o=o.call(e)).next,r===0){if(Object(o)!==o)return;m=!1}else for(;!(m=(s=d.call(o)).done)&&(v.push(s.value),v.length!==r);m=!0);}catch(C){E=!0,c=C}finally{try{if(!m&&o.return!=null&&(p=o.return(),Object(p)!==p))return}finally{if(E)throw c}}return v}}function LK(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ue(e,r){return PK(e)||gve(e,r)||sP(e,r)||LK()}function Ev(e){for(var r=0,o,s=0,c=e.length;c>=4;++s,c-=4)o=e.charCodeAt(s)&255|(e.charCodeAt(++s)&255)<<8|(e.charCodeAt(++s)&255)<<16|(e.charCodeAt(++s)&255)<<24,o=(o&65535)*1540483477+((o>>>16)*59797<<16),o^=o>>>24,r=(o&65535)*1540483477+((o>>>16)*59797<<16)^(r&65535)*1540483477+((r>>>16)*59797<<16);switch(c){case 3:r^=(e.charCodeAt(s+2)&255)<<16;case 2:r^=(e.charCodeAt(s+1)&255)<<8;case 1:r^=e.charCodeAt(s)&255,r=(r&65535)*1540483477+((r>>>16)*59797<<16)}return r^=r>>>13,r=(r&65535)*1540483477+((r>>>16)*59797<<16),((r^r>>>15)>>>0).toString(36)}function Na(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function vve(e,r){if(!e)return!1;if(e.contains)return e.contains(r);for(var o=r;o;){if(o===e)return!0;o=o.parentNode}return!1}var rH="data-rc-order",iH="data-rc-priority",Eve="rc-util-key",nN=new Map;function kK(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=e.mark;return r?r.startsWith("data-")?r:"data-".concat(r):Eve}function wb(e){if(e.attachTo)return e.attachTo;var r=document.querySelector("head");return r||document.body}function _ve(e){return e==="queue"?"prependQueue":e?"prepend":"append"}function lP(e){return Array.from((nN.get(e)||e).children).filter(function(r){return r.tagName==="STYLE"})}function MK(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Na())return null;var o=r.csp,s=r.prepend,c=r.priority,d=c===void 0?0:c,p=_ve(s),v=p==="prependQueue",m=document.createElement("style");m.setAttribute(rH,p),v&&d&&m.setAttribute(iH,"".concat(d)),o!=null&&o.nonce&&(m.nonce=o==null?void 0:o.nonce),m.innerHTML=e;var E=wb(r),C=E.firstChild;if(s){if(v){var b=(r.styles||lP(E)).filter(function(R){if(!["prepend","prependQueue"].includes(R.getAttribute(rH)))return!1;var w=Number(R.getAttribute(iH)||0);return d>=w});if(b.length)return E.insertBefore(m,b[b.length-1].nextSibling),m}E.insertBefore(m,C)}else E.appendChild(m);return m}function FK(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=wb(r);return(r.styles||lP(o)).find(function(s){return s.getAttribute(kK(r))===e})}function _v(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=FK(e,r);if(o){var s=wb(r);s.removeChild(o)}}function Sve(e,r){var o=nN.get(e);if(!o||!vve(document,o)){var s=MK("",r),c=s.parentNode;nN.set(e,c),e.removeChild(s)}}function uu(e,r){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=wb(o),c=lP(s),d=_e(_e({},o),{},{styles:c});Sve(s,d);var p=FK(r,d);if(p){var v,m;if((v=d.csp)!==null&&v!==void 0&&v.nonce&&p.nonce!==((m=d.csp)===null||m===void 0?void 0:m.nonce)){var E;p.nonce=(E=d.csp)===null||E===void 0?void 0:E.nonce}return p.innerHTML!==e&&(p.innerHTML=e),p}var C=MK(e,d);return C.setAttribute(kK(d),r),C}function yve(e,r){if(e==null)return{};var o={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(r.indexOf(s)>=0)continue;o[s]=e[s]}return o}function kn(e,r){if(e==null)return{};var o,s,c=yve(e,r);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(s=0;s<d.length;s++)o=d[s],r.indexOf(o)>=0||{}.propertyIsEnumerable.call(e,o)&&(c[o]=e[o])}return c}function Sv(e,r){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=new Set;function c(d,p){var v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,m=s.has(d);if(ga(!m,"Warning: There may be circular references"),m)return!1;if(d===p)return!0;if(o&&v>1)return!1;s.add(d);var E=v+1;if(Array.isArray(d)){if(!Array.isArray(p)||d.length!==p.length)return!1;for(var C=0;C<d.length;C++)if(!c(d[C],p[C],E))return!1;return!0}if(d&&p&&pn(d)==="object"&&pn(p)==="object"){var b=Object.keys(d);return b.length!==Object.keys(p).length?!1:b.every(function(R){return c(d[R],p[R],E)})}return!1}return c(e,r)}var Cve="%";function rN(e){return e.join(Cve)}var bve=function(){function e(r){Bo(this,e),ye(this,"instanceId",void 0),ye(this,"cache",new Map),this.instanceId=r}return Vo(e,[{key:"get",value:function(o){return this.opGet(rN(o))}},{key:"opGet",value:function(o){return this.cache.get(o)||null}},{key:"update",value:function(o,s){return this.opUpdate(rN(o),s)}},{key:"opUpdate",value:function(o,s){var c=this.cache.get(o),d=s(c);d===null?this.cache.delete(o):this.cache.set(o,d)}}]),e}(),vm="data-token-hash",Kc="data-css-hash",Cd="__cssinjs_instance__";function Tve(){var e=Math.random().toString(12).slice(2);if(typeof document<"u"&&document.head&&document.body){var r=document.body.querySelectorAll("style[".concat(Kc,"]"))||[],o=document.head.firstChild;Array.from(r).forEach(function(c){c[Cd]=c[Cd]||e,c[Cd]===e&&document.head.insertBefore(c,o)});var s={};Array.from(document.querySelectorAll("style[".concat(Kc,"]"))).forEach(function(c){var d=c.getAttribute(Kc);if(s[d]){if(c[Cd]===e){var p;(p=c.parentNode)===null||p===void 0||p.removeChild(c)}}else s[d]=!0})}return new bve(e)}var Ib=S.createContext({hashPriority:"low",cache:Tve(),defaultCache:!0});function Rve(e,r){if(e.length!==r.length)return!1;for(var o=0;o<e.length;o++)if(e[o]!==r[o])return!1;return!0}var uP=function(){function e(){Bo(this,e),ye(this,"cache",void 0),ye(this,"keys",void 0),ye(this,"cacheCallTimes",void 0),this.cache=new Map,this.keys=[],this.cacheCallTimes=0}return Vo(e,[{key:"size",value:function(){return this.keys.length}},{key:"internalGet",value:function(o){var s,c,d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,p={map:this.cache};return o.forEach(function(v){if(!p)p=void 0;else{var m;p=(m=p)===null||m===void 0||(m=m.map)===null||m===void 0?void 0:m.get(v)}}),(s=p)!==null&&s!==void 0&&s.value&&d&&(p.value[1]=this.cacheCallTimes++),(c=p)===null||c===void 0?void 0:c.value}},{key:"get",value:function(o){var s;return(s=this.internalGet(o,!0))===null||s===void 0?void 0:s[0]}},{key:"has",value:function(o){return!!this.internalGet(o)}},{key:"set",value:function(o,s){var c=this;if(!this.has(o)){if(this.size()+1>e.MAX_CACHE_SIZE+e.MAX_CACHE_OFFSET){var d=this.keys.reduce(function(E,C){var b=Ue(E,2),R=b[1];return c.internalGet(C)[1]<R?[C,c.internalGet(C)[1]]:E},[this.keys[0],this.cacheCallTimes]),p=Ue(d,1),v=p[0];this.delete(v)}this.keys.push(o)}var m=this.cache;o.forEach(function(E,C){if(C===o.length-1)m.set(E,{value:[s,c.cacheCallTimes++]});else{var b=m.get(E);b?b.map||(b.map=new Map):m.set(E,{map:new Map}),m=m.get(E).map}})}},{key:"deleteByPath",value:function(o,s){var c=o.get(s[0]);if(s.length===1){var d;return c.map?o.set(s[0],{map:c.map}):o.delete(s[0]),(d=c.value)===null||d===void 0?void 0:d[0]}var p=this.deleteByPath(c.map,s.slice(1));return(!c.map||c.map.size===0)&&!c.value&&o.delete(s[0]),p}},{key:"delete",value:function(o){if(this.has(o))return this.keys=this.keys.filter(function(s){return!Rve(s,o)}),this.deleteByPath(this.cache,o)}}]),e}();ye(uP,"MAX_CACHE_SIZE",20);ye(uP,"MAX_CACHE_OFFSET",5);var oH=0,UK=function(){function e(r){Bo(this,e),ye(this,"derivatives",void 0),ye(this,"id",void 0),this.derivatives=Array.isArray(r)?r:[r],this.id=oH,r.length===0&&(r.length>0,void 0),oH+=1}return Vo(e,[{key:"getDerivativeToken",value:function(o){return this.derivatives.reduce(function(s,c){return c(o,s)},void 0)}}]),e}(),RA=new uP;function iN(e){var r=Array.isArray(e)?e:[e];return RA.has(r)||RA.set(r,new UK(r)),RA.get(r)}var wve=new WeakMap,wA={};function Ive(e,r){for(var o=wve,s=0;s<r.length;s+=1){var c=r[s];o.has(c)||o.set(c,new WeakMap),o=o.get(c)}return o.has(wA)||o.set(wA,e()),o.get(wA)}var aH=new WeakMap;function Wg(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,o=aH.get(e)||"";return o||(Object.keys(e).forEach(function(s){var c=e[s];o+=s,c instanceof UK?o+=c.id:c&&pn(c)==="object"?o+=Wg(c,r):o+=c}),r&&(o=Ev(o)),aH.set(e,o)),o}function sH(e,r){return Ev("".concat(r,"_").concat(Wg(e,!0)))}var oN=Na();function qe(e){return typeof e=="number"?"".concat(e,"px"):e}function EC(e,r,o){var s,c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},d=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(d)return e;var p=_e(_e({},c),{},(s={},ye(s,vm,r),ye(s,Kc,o),s)),v=Object.keys(p).map(function(m){var E=p[m];return E?"".concat(m,'="').concat(E,'"'):null}).filter(function(m){return m}).join(" ");return"<style ".concat(v,">").concat(e,"</style>")}var BK=function(r){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return"--".concat(o?"".concat(o,"-"):"").concat(r).replace(/([a-z0-9])([A-Z])/g,"$1-$2").replace(/([A-Z]+)([A-Z][a-z0-9]+)/g,"$1-$2").replace(/([a-z])([A-Z0-9])/g,"$1-$2").toLowerCase()},Ave=function(r,o,s){return Object.keys(r).length?".".concat(o).concat(s!=null&&s.scope?".".concat(s.scope):"","{").concat(Object.entries(r).map(function(c){var d=Ue(c,2),p=d[0],v=d[1];return"".concat(p,":").concat(v,";")}).join(""),"}"):""},VK=function(r,o,s){var c={},d={};return Object.entries(r).forEach(function(p){var v,m,E=Ue(p,2),C=E[0],b=E[1];if(s!=null&&(v=s.preserve)!==null&&v!==void 0&&v[C])d[C]=b;else if((typeof b=="string"||typeof b=="number")&&!(s!=null&&(m=s.ignore)!==null&&m!==void 0&&m[C])){var R,w=BK(C,s==null?void 0:s.prefix);c[w]=typeof b=="number"&&!(s!=null&&(R=s.unitless)!==null&&R!==void 0&&R[C])?"".concat(b,"px"):String(b),d[C]="var(".concat(w,")")}}),[d,Ave(c,o,{scope:s==null?void 0:s.scope})]},cH=Na()?S.useLayoutEffect:S.useEffect,kr=function(r,o){var s=S.useRef(!0);cH(function(){return r(s.current)},o),cH(function(){return s.current=!1,function(){s.current=!0}},[])},lH=function(r,o){kr(function(s){if(!s)return r()},o)},Ove=_e({},zh),uH=Ove.useInsertionEffect,xve=function(r,o,s){S.useMemo(r,s),kr(function(){return o(!0)},s)},Nve=uH?function(e,r,o){return uH(function(){return e(),r()},o)}:xve,Dve=_e({},zh),Pve=Dve.useInsertionEffect,Lve=function(r){var o=[],s=!1;function c(d){s||o.push(d)}return S.useEffect(function(){return s=!1,function(){s=!0,o.length&&o.forEach(function(d){return d()})}},r),c},kve=function(){return function(r){r()}},Mve=typeof Pve<"u"?Lve:kve;function dP(e,r,o,s,c){var d=S.useContext(Ib),p=d.cache,v=[e].concat(_t(r)),m=rN(v),E=Mve([m]),C=function(I){p.opUpdate(m,function(O){var x=O||[void 0,void 0],P=Ue(x,2),N=P[0],L=N===void 0?0:N,M=P[1],j=M,$=j||o(),H=[L,$];return I?I(H):H})};S.useMemo(function(){C()},[m]);var b=p.opGet(m),R=b[1];return Nve(function(){c==null||c(R)},function(w){return C(function(I){var O=Ue(I,2),x=O[0],P=O[1];return w&&x===0&&(c==null||c(R)),[x+1,P]}),function(){p.opUpdate(m,function(I){var O=I||[],x=Ue(O,2),P=x[0],N=P===void 0?0:P,L=x[1],M=N-1;return M===0?(E(function(){(w||!p.opGet(m))&&(s==null||s(L,!1))}),null):[N-1,L]})}},[m]),R}var Fve={},Uve="css",Ph=new Map;function Bve(e){Ph.set(e,(Ph.get(e)||0)+1)}function Vve(e,r){if(typeof document<"u"){var o=document.querySelectorAll("style[".concat(vm,'="').concat(e,'"]'));o.forEach(function(s){if(s[Cd]===r){var c;(c=s.parentNode)===null||c===void 0||c.removeChild(s)}})}}var jve=0;function $ve(e,r){Ph.set(e,(Ph.get(e)||0)-1);var o=Array.from(Ph.keys()),s=o.filter(function(c){var d=Ph.get(c)||0;return d<=0});o.length-s.length>jve&&s.forEach(function(c){Vve(c,r),Ph.delete(c)})}var Hve=function(r,o,s,c){var d=s.getDerivativeToken(r),p=_e(_e({},d),o);return c&&(p=c(p)),p},jK="token";function Wve(e,r){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=S.useContext(Ib),c=s.cache.instanceId,d=s.container,p=o.salt,v=p===void 0?"":p,m=o.override,E=m===void 0?Fve:m,C=o.formatToken,b=o.getComputedToken,R=o.cssVar,w=Ive(function(){return Object.assign.apply(Object,[{}].concat(_t(r)))},r),I=Wg(w),O=Wg(E),x=R?Wg(R):"",P=dP(jK,[v,e.id,I,O,x],function(){var N,L=b?b(w,E,e):Hve(w,E,e,C),M=_e({},L),j="";if(R){var $=VK(L,R.key,{prefix:R.prefix,ignore:R.ignore,unitless:R.unitless,preserve:R.preserve}),H=Ue($,2);L=H[0],j=H[1]}var G=sH(L,v);L._tokenKey=G,M._tokenKey=sH(M,v);var Y=(N=R==null?void 0:R.key)!==null&&N!==void 0?N:G;L._themeKey=Y,Bve(Y);var q="".concat(Uve,"-").concat(Ev(G));return L._hashId=q,[L,q,M,j,(R==null?void 0:R.key)||""]},function(N){$ve(N[0]._themeKey,c)},function(N){var L=Ue(N,4),M=L[0],j=L[3];if(R&&j){var $=uu(j,Ev("css-variables-".concat(M._themeKey)),{mark:Kc,prepend:"queue",attachTo:d,priority:-999});$[Cd]=c,$.setAttribute(vm,M._themeKey)}});return P}var zve=function(r,o,s){var c=Ue(r,5),d=c[2],p=c[3],v=c[4],m=s||{},E=m.plain;if(!p)return null;var C=d._tokenKey,b=-999,R={"data-rc-order":"prependQueue","data-rc-priority":"".concat(b)},w=EC(p,v,C,R,E);return[b,C,w]},Gve={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},$K="comm",HK="rule",WK="decl",Kve="@import",qve="@keyframes",Yve="@layer",zK=Math.abs,hP=String.fromCharCode;function GK(e){return e.trim()}function Ny(e,r,o){return e.replace(r,o)}function Xve(e,r,o){return e.indexOf(r,o)}function yv(e,r){return e.charCodeAt(r)|0}function Cv(e,r,o){return e.slice(r,o)}function au(e){return e.length}function Jve(e){return e.length}function zS(e,r){return r.push(e),e}var Ab=1,Em=1,KK=0,pc=0,co=0,Nm="";function pP(e,r,o,s,c,d,p,v){return{value:e,root:r,parent:o,type:s,props:c,children:d,line:Ab,column:Em,length:p,return:"",siblings:v}}function Qve(){return co}function Zve(){return co=pc>0?yv(Nm,--pc):0,Em--,co===10&&(Em=1,Ab--),co}function qc(){return co=pc<KK?yv(Nm,pc++):0,Em++,co===10&&(Em=1,Ab++),co}function $h(){return yv(Nm,pc)}function Dy(){return pc}function Ob(e,r){return Cv(Nm,e,r)}function aN(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function eEe(e){return Ab=Em=1,KK=au(Nm=e),pc=0,[]}function tEe(e){return Nm="",e}function IA(e){return GK(Ob(pc-1,sN(e===91?e+2:e===40?e+1:e)))}function nEe(e){for(;(co=$h())&&co<33;)qc();return aN(e)>2||aN(co)>3?"":" "}function rEe(e,r){for(;--r&&qc()&&!(co<48||co>102||co>57&&co<65||co>70&&co<97););return Ob(e,Dy()+(r<6&&$h()==32&&qc()==32))}function sN(e){for(;qc();)switch(co){case e:return pc;case 34:case 39:e!==34&&e!==39&&sN(co);break;case 40:e===41&&sN(e);break;case 92:qc();break}return pc}function iEe(e,r){for(;qc()&&e+co!==47+10;)if(e+co===42+42&&$h()===47)break;return"/*"+Ob(r,pc-1)+"*"+hP(e===47?e:qc())}function oEe(e){for(;!aN($h());)qc();return Ob(e,pc)}function aEe(e){return tEe(Py("",null,null,null,[""],e=eEe(e),0,[0],e))}function Py(e,r,o,s,c,d,p,v,m){for(var E=0,C=0,b=p,R=0,w=0,I=0,O=1,x=1,P=1,N=0,L="",M=c,j=d,$=s,H=L;x;)switch(I=N,N=qc()){case 40:if(I!=108&&yv(H,b-1)==58){Xve(H+=Ny(IA(N),"&","&\f"),"&\f",zK(E?v[E-1]:0))!=-1&&(P=-1);break}case 34:case 39:case 91:H+=IA(N);break;case 9:case 10:case 13:case 32:H+=nEe(I);break;case 92:H+=rEe(Dy()-1,7);continue;case 47:switch($h()){case 42:case 47:zS(sEe(iEe(qc(),Dy()),r,o,m),m);break;default:H+="/"}break;case 123*O:v[E++]=au(H)*P;case 125*O:case 59:case 0:switch(N){case 0:case 125:x=0;case 59+C:P==-1&&(H=Ny(H,/\f/g,"")),w>0&&au(H)-b&&zS(w>32?hH(H+";",s,o,b-1,m):hH(Ny(H," ","")+";",s,o,b-2,m),m);break;case 59:H+=";";default:if(zS($=dH(H,r,o,E,C,c,v,L,M=[],j=[],b,d),d),N===123)if(C===0)Py(H,r,$,$,M,d,b,v,j);else switch(R===99&&yv(H,3)===110?100:R){case 100:case 108:case 109:case 115:Py(e,$,$,s&&zS(dH(e,$,$,0,0,c,v,L,c,M=[],b,j),j),c,j,b,v,s?M:j);break;default:Py(H,$,$,$,[""],j,0,v,j)}}E=C=w=0,O=P=1,L=H="",b=p;break;case 58:b=1+au(H),w=I;default:if(O<1){if(N==123)--O;else if(N==125&&O++==0&&Zve()==125)continue}switch(H+=hP(N),N*O){case 38:P=C>0?1:(H+="\f",-1);break;case 44:v[E++]=(au(H)-1)*P,P=1;break;case 64:$h()===45&&(H+=IA(qc())),R=$h(),C=b=au(L=H+=oEe(Dy())),N++;break;case 45:I===45&&au(H)==2&&(O=0)}}return d}function dH(e,r,o,s,c,d,p,v,m,E,C,b){for(var R=c-1,w=c===0?d:[""],I=Jve(w),O=0,x=0,P=0;O<s;++O)for(var N=0,L=Cv(e,R+1,R=zK(x=p[O])),M=e;N<I;++N)(M=GK(x>0?w[N]+" "+L:Ny(L,/&\f/g,w[N])))&&(m[P++]=M);return pP(e,r,o,c===0?HK:v,m,E,C,b)}function sEe(e,r,o,s){return pP(e,r,o,$K,hP(Qve()),Cv(e,2,-2),0,s)}function hH(e,r,o,s,c){return pP(e,r,o,WK,Cv(e,0,s),Cv(e,s+1,-1),s,c)}function cN(e,r){for(var o="",s=0;s<e.length;s++)o+=r(e[s],s,e,r)||"";return o}function cEe(e,r,o,s){switch(e.type){case Yve:if(e.children.length)break;case Kve:case WK:return e.return=e.return||e.value;case $K:return"";case qve:return e.return=e.value+"{"+cN(e.children,s)+"}";case HK:if(!au(e.value=e.props.join(",")))return""}return au(o=cN(e.children,s))?e.return=e.value+"{"+o+"}":""}var pH="data-ant-cssinjs-cache-path",qK="_FILE_STYLE__",Hh,YK=!0;function lEe(){if(!Hh&&(Hh={},Na())){var e=document.createElement("div");e.className=pH,e.style.position="fixed",e.style.visibility="hidden",e.style.top="-9999px",document.body.appendChild(e);var r=getComputedStyle(e).content||"";r=r.replace(/^"/,"").replace(/"$/,""),r.split(";").forEach(function(c){var d=c.split(":"),p=Ue(d,2),v=p[0],m=p[1];Hh[v]=m});var o=document.querySelector("style[".concat(pH,"]"));if(o){var s;YK=!1,(s=o.parentNode)===null||s===void 0||s.removeChild(o)}document.body.removeChild(e)}}function uEe(e){return lEe(),!!Hh[e]}function dEe(e){var r=Hh[e],o=null;if(r&&Na())if(YK)o=qK;else{var s=document.querySelector("style[".concat(Kc,'="').concat(Hh[e],'"]'));s?o=s.innerHTML:delete Hh[e]}return[o,r]}var hEe="_skip_check_",XK="_multi_value_";function Ly(e){var r=cN(aEe(e),cEe);return r.replace(/\{%%%\:[^;];}/g,";")}function pEe(e){return pn(e)==="object"&&e&&(hEe in e||XK in e)}function fEe(e,r,o){if(!r)return e;var s=".".concat(r),c=o==="low"?":where(".concat(s,")"):s,d=e.split(",").map(function(p){var v,m=p.trim().split(/\s+/),E=m[0]||"",C=((v=E.match(/^\w+/))===null||v===void 0?void 0:v[0])||"";return E="".concat(C).concat(c).concat(E.slice(C.length)),[E].concat(_t(m.slice(1))).join(" ")});return d.join(",")}var mEe=function e(r){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{root:!0,parentSelectors:[]},c=s.root,d=s.injectHash,p=s.parentSelectors,v=o.hashId,m=o.layer;o.path;var E=o.hashPriority,C=o.transformers,b=C===void 0?[]:C;o.linters;var R="",w={};function I(P){var N=P.getName(v);if(!w[N]){var L=e(P.style,o,{root:!1,parentSelectors:p}),M=Ue(L,1),j=M[0];w[N]="@keyframes ".concat(P.getName(v)).concat(j)}}function O(P){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return P.forEach(function(L){Array.isArray(L)?O(L,N):L&&N.push(L)}),N}var x=O(Array.isArray(r)?r:[r]);return x.forEach(function(P){var N=typeof P=="string"&&!c?{}:P;if(typeof N=="string")R+="".concat(N,`
`);else if(N._keyframe)I(N);else{var L=b.reduce(function(M,j){var $;return(j==null||($=j.visit)===null||$===void 0?void 0:$.call(j,M))||M},N);Object.keys(L).forEach(function(M){var j=L[M];if(pn(j)==="object"&&j&&(M!=="animationName"||!j._keyframe)&&!pEe(j)){var $=!1,H=M.trim(),G=!1;(c||d)&&v?H.startsWith("@")?$=!0:H=fEe(M,v,E):c&&!v&&(H==="&"||H==="")&&(H="",G=!0);var Y=e(j,o,{root:G,injectHash:$,parentSelectors:[].concat(_t(p),[H])}),q=Ue(Y,2),J=q[0],re=q[1];w=_e(_e({},w),re),R+="".concat(H).concat(J)}else{let oe=function(ae,te){var de=ae.replace(/[A-Z]/g,function(ie){return"-".concat(ie.toLowerCase())}),fe=te;!Gve[ae]&&typeof fe=="number"&&fe!==0&&(fe="".concat(fe,"px")),ae==="animationName"&&te!==null&&te!==void 0&&te._keyframe&&(I(te),fe=te.getName(v)),R+="".concat(de,":").concat(fe,";")};var he=oe,Z,Q=(Z=j==null?void 0:j.value)!==null&&Z!==void 0?Z:j;pn(j)==="object"&&j!==null&&j!==void 0&&j[XK]&&Array.isArray(Q)?Q.forEach(function(ae){oe(M,ae)}):oe(M,Q)}})}}),c?m&&(R="@layer ".concat(m.name," {").concat(R,"}"),m.dependencies&&(w["@layer ".concat(m.name)]=m.dependencies.map(function(P){return"@layer ".concat(P,", ").concat(m.name,";")}).join(`
`))):R="{".concat(R,"}"),[R,w]};function JK(e,r){return Ev("".concat(e.join("%")).concat(r))}function gEe(){return null}var QK="style";function lN(e,r){var o=e.token,s=e.path,c=e.hashId,d=e.layer,p=e.nonce,v=e.clientOnly,m=e.order,E=m===void 0?0:m,C=S.useContext(Ib),b=C.autoClear;C.mock;var R=C.defaultCache,w=C.hashPriority,I=C.container,O=C.ssrInline,x=C.transformers,P=C.linters,N=C.cache,L=C.layer,M=o._tokenKey,j=[M];L&&j.push("layer"),j.push.apply(j,_t(s));var $=oN,H=dP(QK,j,function(){var re=j.join("|");if(uEe(re)){var Z=dEe(re),Q=Ue(Z,2),he=Q[0],oe=Q[1];if(he)return[he,M,oe,{},v,E]}var ae=r(),te=mEe(ae,{hashId:c,hashPriority:w,layer:L?d:void 0,path:s.join("-"),transformers:x,linters:P}),de=Ue(te,2),fe=de[0],ie=de[1],le=Ly(fe),ve=JK(j,le);return[le,M,ve,ie,v,E]},function(re,Z){var Q=Ue(re,3),he=Q[2];(Z||b)&&oN&&_v(he,{mark:Kc})},function(re){var Z=Ue(re,4),Q=Z[0];Z[1];var he=Z[2],oe=Z[3];if($&&Q!==qK){var ae={mark:Kc,prepend:L?!1:"queue",attachTo:I,priority:E},te=typeof p=="function"?p():p;te&&(ae.csp={nonce:te});var de=[],fe=[];Object.keys(oe).forEach(function(le){le.startsWith("@layer")?de.push(le):fe.push(le)}),de.forEach(function(le){uu(Ly(oe[le]),"_layer-".concat(le),_e(_e({},ae),{},{prepend:!0}))});var ie=uu(Q,he,ae);ie[Cd]=N.instanceId,ie.setAttribute(vm,M),fe.forEach(function(le){uu(Ly(oe[le]),"_effect-".concat(le),ae)})}}),G=Ue(H,3),Y=G[0],q=G[1],J=G[2];return function(re){var Z;if(!O||$||!R)Z=S.createElement(gEe,null);else{var Q;Z=S.createElement("style",Je({},(Q={},ye(Q,vm,q),ye(Q,Kc,J),Q),{dangerouslySetInnerHTML:{__html:Y}}))}return S.createElement(S.Fragment,null,Z,re)}}var vEe=function(r,o,s){var c=Ue(r,6),d=c[0],p=c[1],v=c[2],m=c[3],E=c[4],C=c[5],b=s||{},R=b.plain;if(E)return null;var w=d,I={"data-rc-order":"prependQueue","data-rc-priority":"".concat(C)};return w=EC(d,p,v,I,R),m&&Object.keys(m).forEach(function(O){if(!o[O]){o[O]=!0;var x=Ly(m[O]),P=EC(x,p,"_effect-".concat(O),I,R);O.startsWith("@layer")?w=P+w:w+=P}}),[C,v,w]},ZK="cssVar",EEe=function(r,o){var s=r.key,c=r.prefix,d=r.unitless,p=r.ignore,v=r.token,m=r.scope,E=m===void 0?"":m,C=S.useContext(Ib),b=C.cache.instanceId,R=C.container,w=v._tokenKey,I=[].concat(_t(r.path),[s,E,w]),O=dP(ZK,I,function(){var x=o(),P=VK(x,s,{prefix:c,unitless:d,ignore:p,scope:E}),N=Ue(P,2),L=N[0],M=N[1],j=JK(I,M);return[L,M,j,s]},function(x){var P=Ue(x,3),N=P[2];oN&&_v(N,{mark:Kc})},function(x){var P=Ue(x,3),N=P[1],L=P[2];if(N){var M=uu(N,L,{mark:Kc,prepend:"queue",attachTo:R,priority:-999});M[Cd]=b,M.setAttribute(vm,s)}});return O},_Ee=function(r,o,s){var c=Ue(r,4),d=c[1],p=c[2],v=c[3],m=s||{},E=m.plain;if(!d)return null;var C=-999,b={"data-rc-order":"prependQueue","data-rc-priority":"".concat(C)},R=EC(d,v,p,b,E);return[C,p,R]},mg;mg={},ye(mg,QK,vEe),ye(mg,jK,zve),ye(mg,ZK,_Ee);var Tr=function(){function e(r,o){Bo(this,e),ye(this,"name",void 0),ye(this,"style",void 0),ye(this,"_keyframe",!0),this.name=r,this.style=o}return Vo(e,[{key:"getName",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return o?"".concat(o,"-").concat(this.name):this.name}}]),e}();function xf(e){return e.notSplit=!0,e}xf(["borderTop","borderBottom"]),xf(["borderTop"]),xf(["borderBottom"]),xf(["borderLeft","borderRight"]),xf(["borderLeft"]),xf(["borderRight"]);var SEe=S.createContext({});const fP=SEe;function eq(e){return PK(e)||OK(e)||sP(e)||LK()}function xl(e,r){for(var o=e,s=0;s<r.length;s+=1){if(o==null)return;o=o[r[s]]}return o}function tq(e,r,o,s){if(!r.length)return o;var c=eq(r),d=c[0],p=c.slice(1),v;return!e&&typeof d=="number"?v=[]:Array.isArray(e)?v=_t(e):v=_e({},e),s&&o===void 0&&p.length===1?delete v[d][p[0]]:v[d]=tq(v[d],p,o,s),v}function Vc(e,r,o){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return r.length&&s&&o===void 0&&!xl(e,r.slice(0,-1))?e:tq(e,r,o,s)}function yEe(e){return pn(e)==="object"&&e!==null&&Object.getPrototypeOf(e)===Object.prototype}function fH(e){return Array.isArray(e)?[]:{}}var CEe=typeof Reflect>"u"?Object.keys:Reflect.ownKeys;function Qf(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];var s=fH(r[0]);return r.forEach(function(c){function d(p,v){var m=new Set(v),E=xl(c,p),C=Array.isArray(E);if(C||yEe(E)){if(!m.has(E)){m.add(E);var b=xl(s,p);C?s=Vc(s,p,[]):(!b||pn(b)!=="object")&&(s=Vc(s,p,fH(E))),CEe(E).forEach(function(R){d([].concat(_t(p),[R]),m)})}}else s=Vc(s,p,E)}d([])}),s}function bEe(){}const TEe=S.createContext({}),xb=()=>{const e=()=>{};return e.deprecated=bEe,e},nq=S.createContext(void 0);var rq={items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"},REe={locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"OK",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"};const wEe={placeholder:"Select time",rangePlaceholder:["Start time","End time"]},iq=wEe,IEe={lang:Object.assign({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeQuarterPlaceholder:["Start quarter","End quarter"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},REe),timePickerLocale:Object.assign({},iq)},mH=IEe,_s="${label} is not a valid ${type}",AEe={locale:"en",Pagination:rq,DatePicker:mH,TimePicker:iq,Calendar:mH,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",filterCheckall:"Select all items",filterSearchPlaceholder:"Search in filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Tour:{Next:"Next",Previous:"Previous",Finish:"Finish"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",deselectAll:"Deselect all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand",collapse:"Collapse"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:_s,method:_s,array:_s,object:_s,number:_s,date:_s,boolean:_s,integer:_s,float:_s,regexp:_s,email:_s,url:_s,hex:_s},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"},QRCode:{expired:"QR code expired",refresh:"Refresh",scanned:"Scanned"},ColorPicker:{presetEmpty:"Empty"}},Qh=AEe;Object.assign({},Qh.Modal);let ky=[];const gH=()=>ky.reduce((e,r)=>Object.assign(Object.assign({},e),r),Qh.Modal);function OEe(e){if(e){const r=Object.assign({},e);return ky.push(r),gH(),()=>{ky=ky.filter(o=>o!==r),gH()}}Object.assign({},Qh.Modal)}const xEe=S.createContext(void 0),mP=xEe,NEe=(e,r)=>{const o=S.useContext(mP),s=S.useMemo(()=>{var d;const p=r||Qh[e],v=(d=o==null?void 0:o[e])!==null&&d!==void 0?d:{};return Object.assign(Object.assign({},typeof p=="function"?p():p),v||{})},[e,r,o]),c=S.useMemo(()=>{const d=o==null?void 0:o.locale;return o!=null&&o.exist&&!d?Qh.locale:d},[o]);return[s,c]},Nb=NEe,DEe="internalMark",PEe=e=>{const{locale:r={},children:o,_ANT_MARK__:s}=e;S.useEffect(()=>OEe(r&&r.Modal),[r]);const c=S.useMemo(()=>Object.assign(Object.assign({},r),{exist:!0}),[r]);return S.createElement(mP.Provider,{value:c},o)},LEe=PEe;function ea(e,r){kEe(e)&&(e="100%");var o=MEe(e);return e=r===360?e:Math.min(r,Math.max(0,parseFloat(e))),o&&(e=parseInt(String(e*r),10)/100),Math.abs(e-r)<1e-6?1:(r===360?e=(e<0?e%r+r:e%r)/parseFloat(String(r)):e=e%r/parseFloat(String(r)),e)}function GS(e){return Math.min(1,Math.max(0,e))}function kEe(e){return typeof e=="string"&&e.indexOf(".")!==-1&&parseFloat(e)===1}function MEe(e){return typeof e=="string"&&e.indexOf("%")!==-1}function oq(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function KS(e){return e<=1?"".concat(Number(e)*100,"%"):e}function Fh(e){return e.length===1?"0"+e:String(e)}function FEe(e,r,o){return{r:ea(e,255)*255,g:ea(r,255)*255,b:ea(o,255)*255}}function vH(e,r,o){e=ea(e,255),r=ea(r,255),o=ea(o,255);var s=Math.max(e,r,o),c=Math.min(e,r,o),d=0,p=0,v=(s+c)/2;if(s===c)p=0,d=0;else{var m=s-c;switch(p=v>.5?m/(2-s-c):m/(s+c),s){case e:d=(r-o)/m+(r<o?6:0);break;case r:d=(o-e)/m+2;break;case o:d=(e-r)/m+4;break}d/=6}return{h:d,s:p,l:v}}function AA(e,r,o){return o<0&&(o+=1),o>1&&(o-=1),o<1/6?e+(r-e)*(6*o):o<1/2?r:o<2/3?e+(r-e)*(2/3-o)*6:e}function UEe(e,r,o){var s,c,d;if(e=ea(e,360),r=ea(r,100),o=ea(o,100),r===0)c=o,d=o,s=o;else{var p=o<.5?o*(1+r):o+r-o*r,v=2*o-p;s=AA(v,p,e+1/3),c=AA(v,p,e),d=AA(v,p,e-1/3)}return{r:s*255,g:c*255,b:d*255}}function uN(e,r,o){e=ea(e,255),r=ea(r,255),o=ea(o,255);var s=Math.max(e,r,o),c=Math.min(e,r,o),d=0,p=s,v=s-c,m=s===0?0:v/s;if(s===c)d=0;else{switch(s){case e:d=(r-o)/v+(r<o?6:0);break;case r:d=(o-e)/v+2;break;case o:d=(e-r)/v+4;break}d/=6}return{h:d,s:m,v:p}}function BEe(e,r,o){e=ea(e,360)*6,r=ea(r,100),o=ea(o,100);var s=Math.floor(e),c=e-s,d=o*(1-r),p=o*(1-c*r),v=o*(1-(1-c)*r),m=s%6,E=[o,p,d,d,v,o][m],C=[v,o,o,p,d,d][m],b=[d,d,v,o,o,p][m];return{r:E*255,g:C*255,b:b*255}}function dN(e,r,o,s){var c=[Fh(Math.round(e).toString(16)),Fh(Math.round(r).toString(16)),Fh(Math.round(o).toString(16))];return s&&c[0].startsWith(c[0].charAt(1))&&c[1].startsWith(c[1].charAt(1))&&c[2].startsWith(c[2].charAt(1))?c[0].charAt(0)+c[1].charAt(0)+c[2].charAt(0):c.join("")}function VEe(e,r,o,s,c){var d=[Fh(Math.round(e).toString(16)),Fh(Math.round(r).toString(16)),Fh(Math.round(o).toString(16)),Fh(jEe(s))];return c&&d[0].startsWith(d[0].charAt(1))&&d[1].startsWith(d[1].charAt(1))&&d[2].startsWith(d[2].charAt(1))&&d[3].startsWith(d[3].charAt(1))?d[0].charAt(0)+d[1].charAt(0)+d[2].charAt(0)+d[3].charAt(0):d.join("")}function jEe(e){return Math.round(parseFloat(e)*255).toString(16)}function EH(e){return ys(e)/255}function ys(e){return parseInt(e,16)}function $Ee(e){return{r:e>>16,g:(e&65280)>>8,b:e&255}}var hN={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function Bf(e){var r={r:0,g:0,b:0},o=1,s=null,c=null,d=null,p=!1,v=!1;return typeof e=="string"&&(e=zEe(e)),typeof e=="object"&&(nu(e.r)&&nu(e.g)&&nu(e.b)?(r=FEe(e.r,e.g,e.b),p=!0,v=String(e.r).substr(-1)==="%"?"prgb":"rgb"):nu(e.h)&&nu(e.s)&&nu(e.v)?(s=KS(e.s),c=KS(e.v),r=BEe(e.h,s,c),p=!0,v="hsv"):nu(e.h)&&nu(e.s)&&nu(e.l)&&(s=KS(e.s),d=KS(e.l),r=UEe(e.h,s,d),p=!0,v="hsl"),Object.prototype.hasOwnProperty.call(e,"a")&&(o=e.a)),o=oq(o),{ok:p,format:e.format||v,r:Math.min(255,Math.max(r.r,0)),g:Math.min(255,Math.max(r.g,0)),b:Math.min(255,Math.max(r.b,0)),a:o}}var HEe="[-\\+]?\\d+%?",WEe="[-\\+]?\\d*\\.\\d+%?",bd="(?:".concat(WEe,")|(?:").concat(HEe,")"),OA="[\\s|\\(]+(".concat(bd,")[,|\\s]+(").concat(bd,")[,|\\s]+(").concat(bd,")\\s*\\)?"),xA="[\\s|\\(]+(".concat(bd,")[,|\\s]+(").concat(bd,")[,|\\s]+(").concat(bd,")[,|\\s]+(").concat(bd,")\\s*\\)?"),Fc={CSS_UNIT:new RegExp(bd),rgb:new RegExp("rgb"+OA),rgba:new RegExp("rgba"+xA),hsl:new RegExp("hsl"+OA),hsla:new RegExp("hsla"+xA),hsv:new RegExp("hsv"+OA),hsva:new RegExp("hsva"+xA),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function zEe(e){if(e=e.trim().toLowerCase(),e.length===0)return!1;var r=!1;if(hN[e])e=hN[e],r=!0;else if(e==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var o=Fc.rgb.exec(e);return o?{r:o[1],g:o[2],b:o[3]}:(o=Fc.rgba.exec(e),o?{r:o[1],g:o[2],b:o[3],a:o[4]}:(o=Fc.hsl.exec(e),o?{h:o[1],s:o[2],l:o[3]}:(o=Fc.hsla.exec(e),o?{h:o[1],s:o[2],l:o[3],a:o[4]}:(o=Fc.hsv.exec(e),o?{h:o[1],s:o[2],v:o[3]}:(o=Fc.hsva.exec(e),o?{h:o[1],s:o[2],v:o[3],a:o[4]}:(o=Fc.hex8.exec(e),o?{r:ys(o[1]),g:ys(o[2]),b:ys(o[3]),a:EH(o[4]),format:r?"name":"hex8"}:(o=Fc.hex6.exec(e),o?{r:ys(o[1]),g:ys(o[2]),b:ys(o[3]),format:r?"name":"hex"}:(o=Fc.hex4.exec(e),o?{r:ys(o[1]+o[1]),g:ys(o[2]+o[2]),b:ys(o[3]+o[3]),a:EH(o[4]+o[4]),format:r?"name":"hex8"}:(o=Fc.hex3.exec(e),o?{r:ys(o[1]+o[1]),g:ys(o[2]+o[2]),b:ys(o[3]+o[3]),format:r?"name":"hex"}:!1)))))))))}function nu(e){return!!Fc.CSS_UNIT.exec(String(e))}var bo=function(){function e(r,o){r===void 0&&(r=""),o===void 0&&(o={});var s;if(r instanceof e)return r;typeof r=="number"&&(r=$Ee(r)),this.originalInput=r;var c=Bf(r);this.originalInput=r,this.r=c.r,this.g=c.g,this.b=c.b,this.a=c.a,this.roundA=Math.round(100*this.a)/100,this.format=(s=o.format)!==null&&s!==void 0?s:c.format,this.gradientType=o.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=c.ok}return e.prototype.isDark=function(){return this.getBrightness()<128},e.prototype.isLight=function(){return!this.isDark()},e.prototype.getBrightness=function(){var r=this.toRgb();return(r.r*299+r.g*587+r.b*114)/1e3},e.prototype.getLuminance=function(){var r=this.toRgb(),o,s,c,d=r.r/255,p=r.g/255,v=r.b/255;return d<=.03928?o=d/12.92:o=Math.pow((d+.055)/1.055,2.4),p<=.03928?s=p/12.92:s=Math.pow((p+.055)/1.055,2.4),v<=.03928?c=v/12.92:c=Math.pow((v+.055)/1.055,2.4),.2126*o+.7152*s+.0722*c},e.prototype.getAlpha=function(){return this.a},e.prototype.setAlpha=function(r){return this.a=oq(r),this.roundA=Math.round(100*this.a)/100,this},e.prototype.isMonochrome=function(){var r=this.toHsl().s;return r===0},e.prototype.toHsv=function(){var r=uN(this.r,this.g,this.b);return{h:r.h*360,s:r.s,v:r.v,a:this.a}},e.prototype.toHsvString=function(){var r=uN(this.r,this.g,this.b),o=Math.round(r.h*360),s=Math.round(r.s*100),c=Math.round(r.v*100);return this.a===1?"hsv(".concat(o,", ").concat(s,"%, ").concat(c,"%)"):"hsva(".concat(o,", ").concat(s,"%, ").concat(c,"%, ").concat(this.roundA,")")},e.prototype.toHsl=function(){var r=vH(this.r,this.g,this.b);return{h:r.h*360,s:r.s,l:r.l,a:this.a}},e.prototype.toHslString=function(){var r=vH(this.r,this.g,this.b),o=Math.round(r.h*360),s=Math.round(r.s*100),c=Math.round(r.l*100);return this.a===1?"hsl(".concat(o,", ").concat(s,"%, ").concat(c,"%)"):"hsla(".concat(o,", ").concat(s,"%, ").concat(c,"%, ").concat(this.roundA,")")},e.prototype.toHex=function(r){return r===void 0&&(r=!1),dN(this.r,this.g,this.b,r)},e.prototype.toHexString=function(r){return r===void 0&&(r=!1),"#"+this.toHex(r)},e.prototype.toHex8=function(r){return r===void 0&&(r=!1),VEe(this.r,this.g,this.b,this.a,r)},e.prototype.toHex8String=function(r){return r===void 0&&(r=!1),"#"+this.toHex8(r)},e.prototype.toHexShortString=function(r){return r===void 0&&(r=!1),this.a===1?this.toHexString(r):this.toHex8String(r)},e.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},e.prototype.toRgbString=function(){var r=Math.round(this.r),o=Math.round(this.g),s=Math.round(this.b);return this.a===1?"rgb(".concat(r,", ").concat(o,", ").concat(s,")"):"rgba(".concat(r,", ").concat(o,", ").concat(s,", ").concat(this.roundA,")")},e.prototype.toPercentageRgb=function(){var r=function(o){return"".concat(Math.round(ea(o,255)*100),"%")};return{r:r(this.r),g:r(this.g),b:r(this.b),a:this.a}},e.prototype.toPercentageRgbString=function(){var r=function(o){return Math.round(ea(o,255)*100)};return this.a===1?"rgb(".concat(r(this.r),"%, ").concat(r(this.g),"%, ").concat(r(this.b),"%)"):"rgba(".concat(r(this.r),"%, ").concat(r(this.g),"%, ").concat(r(this.b),"%, ").concat(this.roundA,")")},e.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var r="#"+dN(this.r,this.g,this.b,!1),o=0,s=Object.entries(hN);o<s.length;o++){var c=s[o],d=c[0],p=c[1];if(r===p)return d}return!1},e.prototype.toString=function(r){var o=!!r;r=r??this.format;var s=!1,c=this.a<1&&this.a>=0,d=!o&&c&&(r.startsWith("hex")||r==="name");return d?r==="name"&&this.a===0?this.toName():this.toRgbString():(r==="rgb"&&(s=this.toRgbString()),r==="prgb"&&(s=this.toPercentageRgbString()),(r==="hex"||r==="hex6")&&(s=this.toHexString()),r==="hex3"&&(s=this.toHexString(!0)),r==="hex4"&&(s=this.toHex8String(!0)),r==="hex8"&&(s=this.toHex8String()),r==="name"&&(s=this.toName()),r==="hsl"&&(s=this.toHslString()),r==="hsv"&&(s=this.toHsvString()),s||this.toHexString())},e.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},e.prototype.clone=function(){return new e(this.toString())},e.prototype.lighten=function(r){r===void 0&&(r=10);var o=this.toHsl();return o.l+=r/100,o.l=GS(o.l),new e(o)},e.prototype.brighten=function(r){r===void 0&&(r=10);var o=this.toRgb();return o.r=Math.max(0,Math.min(255,o.r-Math.round(255*-(r/100)))),o.g=Math.max(0,Math.min(255,o.g-Math.round(255*-(r/100)))),o.b=Math.max(0,Math.min(255,o.b-Math.round(255*-(r/100)))),new e(o)},e.prototype.darken=function(r){r===void 0&&(r=10);var o=this.toHsl();return o.l-=r/100,o.l=GS(o.l),new e(o)},e.prototype.tint=function(r){return r===void 0&&(r=10),this.mix("white",r)},e.prototype.shade=function(r){return r===void 0&&(r=10),this.mix("black",r)},e.prototype.desaturate=function(r){r===void 0&&(r=10);var o=this.toHsl();return o.s-=r/100,o.s=GS(o.s),new e(o)},e.prototype.saturate=function(r){r===void 0&&(r=10);var o=this.toHsl();return o.s+=r/100,o.s=GS(o.s),new e(o)},e.prototype.greyscale=function(){return this.desaturate(100)},e.prototype.spin=function(r){var o=this.toHsl(),s=(o.h+r)%360;return o.h=s<0?360+s:s,new e(o)},e.prototype.mix=function(r,o){o===void 0&&(o=50);var s=this.toRgb(),c=new e(r).toRgb(),d=o/100,p={r:(c.r-s.r)*d+s.r,g:(c.g-s.g)*d+s.g,b:(c.b-s.b)*d+s.b,a:(c.a-s.a)*d+s.a};return new e(p)},e.prototype.analogous=function(r,o){r===void 0&&(r=6),o===void 0&&(o=30);var s=this.toHsl(),c=360/o,d=[this];for(s.h=(s.h-(c*r>>1)+720)%360;--r;)s.h=(s.h+c)%360,d.push(new e(s));return d},e.prototype.complement=function(){var r=this.toHsl();return r.h=(r.h+180)%360,new e(r)},e.prototype.monochromatic=function(r){r===void 0&&(r=6);for(var o=this.toHsv(),s=o.h,c=o.s,d=o.v,p=[],v=1/r;r--;)p.push(new e({h:s,s:c,v:d})),d=(d+v)%1;return p},e.prototype.splitcomplement=function(){var r=this.toHsl(),o=r.h;return[this,new e({h:(o+72)%360,s:r.s,l:r.l}),new e({h:(o+216)%360,s:r.s,l:r.l})]},e.prototype.onBackground=function(r){var o=this.toRgb(),s=new e(r).toRgb(),c=o.a+s.a*(1-o.a);return new e({r:(o.r*o.a+s.r*s.a*(1-o.a))/c,g:(o.g*o.a+s.g*s.a*(1-o.a))/c,b:(o.b*o.a+s.b*s.a*(1-o.a))/c,a:c})},e.prototype.triad=function(){return this.polyad(3)},e.prototype.tetrad=function(){return this.polyad(4)},e.prototype.polyad=function(r){for(var o=this.toHsl(),s=o.h,c=[this],d=360/r,p=1;p<r;p++)c.push(new e({h:(s+p*d)%360,s:o.s,l:o.l}));return c},e.prototype.equals=function(r){return this.toRgbString()===new e(r).toRgbString()},e}(),qS=2,_H=.16,GEe=.05,KEe=.05,qEe=.15,aq=5,sq=4,YEe=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function SH(e){var r=e.r,o=e.g,s=e.b,c=uN(r,o,s);return{h:c.h*360,s:c.s,v:c.v}}function YS(e){var r=e.r,o=e.g,s=e.b;return"#".concat(dN(r,o,s,!1))}function XEe(e,r,o){var s=o/100,c={r:(r.r-e.r)*s+e.r,g:(r.g-e.g)*s+e.g,b:(r.b-e.b)*s+e.b};return c}function yH(e,r,o){var s;return Math.round(e.h)>=60&&Math.round(e.h)<=240?s=o?Math.round(e.h)-qS*r:Math.round(e.h)+qS*r:s=o?Math.round(e.h)+qS*r:Math.round(e.h)-qS*r,s<0?s+=360:s>=360&&(s-=360),s}function CH(e,r,o){if(e.h===0&&e.s===0)return e.s;var s;return o?s=e.s-_H*r:r===sq?s=e.s+_H:s=e.s+GEe*r,s>1&&(s=1),o&&r===aq&&s>.1&&(s=.1),s<.06&&(s=.06),Number(s.toFixed(2))}function bH(e,r,o){var s;return o?s=e.v+KEe*r:s=e.v-qEe*r,s>1&&(s=1),Number(s.toFixed(2))}function Zh(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=[],s=Bf(e),c=aq;c>0;c-=1){var d=SH(s),p=YS(Bf({h:yH(d,c,!0),s:CH(d,c,!0),v:bH(d,c,!0)}));o.push(p)}o.push(YS(s));for(var v=1;v<=sq;v+=1){var m=SH(s),E=YS(Bf({h:yH(m,v),s:CH(m,v),v:bH(m,v)}));o.push(E)}return r.theme==="dark"?YEe.map(function(C){var b=C.index,R=C.opacity,w=YS(XEe(Bf(r.backgroundColor||"#141414"),Bf(o[b]),R*100));return w}):o}var NA={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1677FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},zg={},DA={};Object.keys(NA).forEach(function(e){zg[e]=Zh(NA[e]),zg[e].primary=zg[e][5],DA[e]=Zh(NA[e],{theme:"dark",backgroundColor:"#141414"}),DA[e].primary=DA[e][5]});var JEe=zg.gold,QEe=zg.blue;const cq={blue:"#1677ff",purple:"#722ED1",cyan:"#13C2C2",green:"#52C41A",magenta:"#EB2F96",pink:"#eb2f96",red:"#F5222D",orange:"#FA8C16",yellow:"#FADB14",volcano:"#FA541C",geekblue:"#2F54EB",gold:"#FAAD14",lime:"#A0D911"},ZEe=Object.assign(Object.assign({},cq),{colorPrimary:"#1677ff",colorSuccess:"#52c41a",colorWarning:"#faad14",colorError:"#ff4d4f",colorInfo:"#1677ff",colorLink:"",colorTextBase:"",colorBgBase:"",fontFamily:`-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial,
'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',
'Noto Color Emoji'`,fontFamilyCode:"'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace",fontSize:14,lineWidth:1,lineType:"solid",motionUnit:.1,motionBase:0,motionEaseOutCirc:"cubic-bezier(0.08, 0.82, 0.17, 1)",motionEaseInOutCirc:"cubic-bezier(0.78, 0.14, 0.15, 0.86)",motionEaseOut:"cubic-bezier(0.215, 0.61, 0.355, 1)",motionEaseInOut:"cubic-bezier(0.645, 0.045, 0.355, 1)",motionEaseOutBack:"cubic-bezier(0.12, 0.4, 0.29, 1.46)",motionEaseInBack:"cubic-bezier(0.71, -0.46, 0.88, 0.6)",motionEaseInQuint:"cubic-bezier(0.755, 0.05, 0.855, 0.06)",motionEaseOutQuint:"cubic-bezier(0.23, 1, 0.32, 1)",borderRadius:6,sizeUnit:4,sizeStep:4,sizePopupArrow:16,controlHeight:32,zIndexBase:0,zIndexPopupBase:1e3,opacityImage:1,wireframe:!1,motion:!0}),bv=ZEe;function e_e(e,r){let{generateColorPalettes:o,generateNeutralColorPalettes:s}=r;const{colorSuccess:c,colorWarning:d,colorError:p,colorInfo:v,colorPrimary:m,colorBgBase:E,colorTextBase:C}=e,b=o(m),R=o(c),w=o(d),I=o(p),O=o(v),x=s(E,C),P=e.colorLink||e.colorInfo,N=o(P);return Object.assign(Object.assign({},x),{colorPrimaryBg:b[1],colorPrimaryBgHover:b[2],colorPrimaryBorder:b[3],colorPrimaryBorderHover:b[4],colorPrimaryHover:b[5],colorPrimary:b[6],colorPrimaryActive:b[7],colorPrimaryTextHover:b[8],colorPrimaryText:b[9],colorPrimaryTextActive:b[10],colorSuccessBg:R[1],colorSuccessBgHover:R[2],colorSuccessBorder:R[3],colorSuccessBorderHover:R[4],colorSuccessHover:R[4],colorSuccess:R[6],colorSuccessActive:R[7],colorSuccessTextHover:R[8],colorSuccessText:R[9],colorSuccessTextActive:R[10],colorErrorBg:I[1],colorErrorBgHover:I[2],colorErrorBgActive:I[3],colorErrorBorder:I[3],colorErrorBorderHover:I[4],colorErrorHover:I[5],colorError:I[6],colorErrorActive:I[7],colorErrorTextHover:I[8],colorErrorText:I[9],colorErrorTextActive:I[10],colorWarningBg:w[1],colorWarningBgHover:w[2],colorWarningBorder:w[3],colorWarningBorderHover:w[4],colorWarningHover:w[4],colorWarning:w[6],colorWarningActive:w[7],colorWarningTextHover:w[8],colorWarningText:w[9],colorWarningTextActive:w[10],colorInfoBg:O[1],colorInfoBgHover:O[2],colorInfoBorder:O[3],colorInfoBorderHover:O[4],colorInfoHover:O[4],colorInfo:O[6],colorInfoActive:O[7],colorInfoTextHover:O[8],colorInfoText:O[9],colorInfoTextActive:O[10],colorLinkHover:N[4],colorLink:N[6],colorLinkActive:N[7],colorBgMask:new bo("#000").setAlpha(.45).toRgbString(),colorWhite:"#fff"})}const t_e=e=>{let r=e,o=e,s=e,c=e;return e<6&&e>=5?r=e+1:e<16&&e>=6?r=e+2:e>=16&&(r=16),e<7&&e>=5?o=4:e<8&&e>=7?o=5:e<14&&e>=8?o=6:e<16&&e>=14?o=7:e>=16&&(o=8),e<6&&e>=2?s=1:e>=6&&(s=2),e>4&&e<8?c=4:e>=8&&(c=6),{borderRadius:e,borderRadiusXS:s,borderRadiusSM:o,borderRadiusLG:r,borderRadiusOuter:c}},n_e=t_e;function r_e(e){const{motionUnit:r,motionBase:o,borderRadius:s,lineWidth:c}=e;return Object.assign({motionDurationFast:`${(o+r).toFixed(1)}s`,motionDurationMid:`${(o+r*2).toFixed(1)}s`,motionDurationSlow:`${(o+r*3).toFixed(1)}s`,lineWidthBold:c+1},n_e(s))}const i_e=e=>{const{controlHeight:r}=e;return{controlHeightSM:r*.75,controlHeightXS:r*.5,controlHeightLG:r*1.25}},o_e=i_e;function My(e){return(e+8)/e}function a_e(e){const r=new Array(10).fill(null).map((o,s)=>{const c=s-1,d=e*Math.pow(2.71828,c/5),p=s>1?Math.floor(d):Math.ceil(d);return Math.floor(p/2)*2});return r[1]=e,r.map(o=>({size:o,lineHeight:My(o)}))}const s_e=e=>{const r=a_e(e),o=r.map(C=>C.size),s=r.map(C=>C.lineHeight),c=o[1],d=o[0],p=o[2],v=s[1],m=s[0],E=s[2];return{fontSizeSM:d,fontSize:c,fontSizeLG:p,fontSizeXL:o[3],fontSizeHeading1:o[6],fontSizeHeading2:o[5],fontSizeHeading3:o[4],fontSizeHeading4:o[3],fontSizeHeading5:o[2],lineHeight:v,lineHeightLG:E,lineHeightSM:m,fontHeight:Math.round(v*c),fontHeightLG:Math.round(E*p),fontHeightSM:Math.round(m*d),lineHeightHeading1:s[6],lineHeightHeading2:s[5],lineHeightHeading3:s[4],lineHeightHeading4:s[3],lineHeightHeading5:s[2]}},c_e=s_e;function l_e(e){const{sizeUnit:r,sizeStep:o}=e;return{sizeXXL:r*(o+8),sizeXL:r*(o+4),sizeLG:r*(o+2),sizeMD:r*(o+1),sizeMS:r*o,size:r*o,sizeSM:r*(o-1),sizeXS:r*(o-2),sizeXXS:r*(o-3)}}const ru=(e,r)=>new bo(e).setAlpha(r).toRgbString(),gg=(e,r)=>new bo(e).darken(r).toHexString(),u_e=e=>{const r=Zh(e);return{1:r[0],2:r[1],3:r[2],4:r[3],5:r[4],6:r[5],7:r[6],8:r[4],9:r[5],10:r[6]}},d_e=(e,r)=>{const o=e||"#fff",s=r||"#000";return{colorBgBase:o,colorTextBase:s,colorText:ru(s,.88),colorTextSecondary:ru(s,.65),colorTextTertiary:ru(s,.45),colorTextQuaternary:ru(s,.25),colorFill:ru(s,.15),colorFillSecondary:ru(s,.06),colorFillTertiary:ru(s,.04),colorFillQuaternary:ru(s,.02),colorBgLayout:gg(o,4),colorBgContainer:gg(o,0),colorBgElevated:gg(o,0),colorBgSpotlight:ru(s,.85),colorBgBlur:"transparent",colorBorder:gg(o,15),colorBorderSecondary:gg(o,6)}};function h_e(e){const r=Object.keys(cq).map(o=>{const s=Zh(e[o]);return new Array(10).fill(1).reduce((c,d,p)=>(c[`${o}-${p+1}`]=s[p],c[`${o}${p+1}`]=s[p],c),{})}).reduce((o,s)=>(o=Object.assign(Object.assign({},o),s),o),{});return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},e),r),e_e(e,{generateColorPalettes:u_e,generateNeutralColorPalettes:d_e})),c_e(e.fontSize)),l_e(e)),o_e(e)),r_e(e))}const lq=iN(h_e),pN={token:bv,override:{override:bv},hashed:!0},uq=Be.createContext(pN),gP="anticon",p_e=(e,r)=>r||(e?`ant-${e}`:"ant"),Qn=S.createContext({getPrefixCls:p_e,iconPrefixCls:gP}),f_e=`-ant-${Date.now()}-${Math.random()}`;function m_e(e,r){const o={},s=(p,v)=>{let m=p.clone();return m=(v==null?void 0:v(m))||m,m.toRgbString()},c=(p,v)=>{const m=new bo(p),E=Zh(m.toRgbString());o[`${v}-color`]=s(m),o[`${v}-color-disabled`]=E[1],o[`${v}-color-hover`]=E[4],o[`${v}-color-active`]=E[6],o[`${v}-color-outline`]=m.clone().setAlpha(.2).toRgbString(),o[`${v}-color-deprecated-bg`]=E[0],o[`${v}-color-deprecated-border`]=E[2]};if(r.primaryColor){c(r.primaryColor,"primary");const p=new bo(r.primaryColor),v=Zh(p.toRgbString());v.forEach((E,C)=>{o[`primary-${C+1}`]=E}),o["primary-color-deprecated-l-35"]=s(p,E=>E.lighten(35)),o["primary-color-deprecated-l-20"]=s(p,E=>E.lighten(20)),o["primary-color-deprecated-t-20"]=s(p,E=>E.tint(20)),o["primary-color-deprecated-t-50"]=s(p,E=>E.tint(50)),o["primary-color-deprecated-f-12"]=s(p,E=>E.setAlpha(E.getAlpha()*.12));const m=new bo(v[0]);o["primary-color-active-deprecated-f-30"]=s(m,E=>E.setAlpha(E.getAlpha()*.3)),o["primary-color-active-deprecated-d-02"]=s(m,E=>E.darken(2))}return r.successColor&&c(r.successColor,"success"),r.warningColor&&c(r.warningColor,"warning"),r.errorColor&&c(r.errorColor,"error"),r.infoColor&&c(r.infoColor,"info"),`
  :root {
    ${Object.keys(o).map(p=>`--${e}-${p}: ${o[p]};`).join(`
`)}
  }
  `.trim()}function g_e(e,r){const o=m_e(e,r);Na()&&uu(o,`${f_e}-dynamic-theme`)}const fN=S.createContext(!1),dq=e=>{let{children:r,disabled:o}=e;const s=S.useContext(fN);return S.createElement(fN.Provider,{value:o??s},r)},Dm=fN,mN=S.createContext(void 0),v_e=e=>{let{children:r,size:o}=e;const s=S.useContext(mN);return S.createElement(mN.Provider,{value:o||s},r)},jv=mN;function E_e(){const e=S.useContext(Dm),r=S.useContext(jv);return{componentDisabled:e,componentSize:r}}const _C=["blue","purple","cyan","green","magenta","pink","red","orange","yellow","volcano","geekblue","lime","gold"],__e="5.18.0";function PA(e){return e>=0&&e<=255}function XS(e,r){const{r:o,g:s,b:c,a:d}=new bo(e).toRgb();if(d<1)return e;const{r:p,g:v,b:m}=new bo(r).toRgb();for(let E=.01;E<=1;E+=.01){const C=Math.round((o-p*(1-E))/E),b=Math.round((s-v*(1-E))/E),R=Math.round((c-m*(1-E))/E);if(PA(C)&&PA(b)&&PA(R))return new bo({r:C,g:b,b:R,a:Math.round(E*100)/100}).toRgbString()}return new bo({r:o,g:s,b:c,a:1}).toRgbString()}var S_e=globalThis&&globalThis.__rest||function(e,r){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};function hq(e){const{override:r}=e,o=S_e(e,["override"]),s=Object.assign({},r);Object.keys(bv).forEach(R=>{delete s[R]});const c=Object.assign(Object.assign({},o),s),d=480,p=576,v=768,m=992,E=1200,C=1600;if(c.motion===!1){const R="0s";c.motionDurationFast=R,c.motionDurationMid=R,c.motionDurationSlow=R}return Object.assign(Object.assign(Object.assign({},c),{colorFillContent:c.colorFillSecondary,colorFillContentHover:c.colorFill,colorFillAlter:c.colorFillQuaternary,colorBgContainerDisabled:c.colorFillTertiary,colorBorderBg:c.colorBgContainer,colorSplit:XS(c.colorBorderSecondary,c.colorBgContainer),colorTextPlaceholder:c.colorTextQuaternary,colorTextDisabled:c.colorTextQuaternary,colorTextHeading:c.colorText,colorTextLabel:c.colorTextSecondary,colorTextDescription:c.colorTextTertiary,colorTextLightSolid:c.colorWhite,colorHighlight:c.colorError,colorBgTextHover:c.colorFillSecondary,colorBgTextActive:c.colorFill,colorIcon:c.colorTextTertiary,colorIconHover:c.colorText,colorErrorOutline:XS(c.colorErrorBg,c.colorBgContainer),colorWarningOutline:XS(c.colorWarningBg,c.colorBgContainer),fontSizeIcon:c.fontSizeSM,lineWidthFocus:c.lineWidth*4,lineWidth:c.lineWidth,controlOutlineWidth:c.lineWidth*2,controlInteractiveSize:c.controlHeight/2,controlItemBgHover:c.colorFillTertiary,controlItemBgActive:c.colorPrimaryBg,controlItemBgActiveHover:c.colorPrimaryBgHover,controlItemBgActiveDisabled:c.colorFill,controlTmpOutline:c.colorFillQuaternary,controlOutline:XS(c.colorPrimaryBg,c.colorBgContainer),lineType:c.lineType,borderRadius:c.borderRadius,borderRadiusXS:c.borderRadiusXS,borderRadiusSM:c.borderRadiusSM,borderRadiusLG:c.borderRadiusLG,fontWeightStrong:600,opacityLoading:.65,linkDecoration:"none",linkHoverDecoration:"none",linkFocusDecoration:"none",controlPaddingHorizontal:12,controlPaddingHorizontalSM:8,paddingXXS:c.sizeXXS,paddingXS:c.sizeXS,paddingSM:c.sizeSM,padding:c.size,paddingMD:c.sizeMD,paddingLG:c.sizeLG,paddingXL:c.sizeXL,paddingContentHorizontalLG:c.sizeLG,paddingContentVerticalLG:c.sizeMS,paddingContentHorizontal:c.sizeMS,paddingContentVertical:c.sizeSM,paddingContentHorizontalSM:c.size,paddingContentVerticalSM:c.sizeXS,marginXXS:c.sizeXXS,marginXS:c.sizeXS,marginSM:c.sizeSM,margin:c.size,marginMD:c.sizeMD,marginLG:c.sizeLG,marginXL:c.sizeXL,marginXXL:c.sizeXXL,boxShadow:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowSecondary:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTertiary:`
      0 1px 2px 0 rgba(0, 0, 0, 0.03),
      0 1px 6px -1px rgba(0, 0, 0, 0.02),
      0 2px 4px 0 rgba(0, 0, 0, 0.02)
    `,screenXS:d,screenXSMin:d,screenXSMax:p-1,screenSM:p,screenSMMin:p,screenSMMax:v-1,screenMD:v,screenMDMin:v,screenMDMax:m-1,screenLG:m,screenLGMin:m,screenLGMax:E-1,screenXL:E,screenXLMin:E,screenXLMax:C-1,screenXXL:C,screenXXLMin:C,boxShadowPopoverArrow:"2px 2px 5px rgba(0, 0, 0, 0.05)",boxShadowCard:`
      0 1px 2px -2px ${new bo("rgba(0, 0, 0, 0.16)").toRgbString()},
      0 3px 6px 0 ${new bo("rgba(0, 0, 0, 0.12)").toRgbString()},
      0 5px 12px 4px ${new bo("rgba(0, 0, 0, 0.09)").toRgbString()}
    `,boxShadowDrawerRight:`
      -6px 0 16px 0 rgba(0, 0, 0, 0.08),
      -3px 0 6px -4px rgba(0, 0, 0, 0.12),
      -9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerLeft:`
      6px 0 16px 0 rgba(0, 0, 0, 0.08),
      3px 0 6px -4px rgba(0, 0, 0, 0.12),
      9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerUp:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerDown:`
      0 -6px 16px 0 rgba(0, 0, 0, 0.08),
      0 -3px 6px -4px rgba(0, 0, 0, 0.12),
      0 -9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTabsOverflowLeft:"inset 10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowRight:"inset -10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowTop:"inset 0 10px 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowBottom:"inset 0 -10px 8px -8px rgba(0, 0, 0, 0.08)"}),s)}var TH=globalThis&&globalThis.__rest||function(e,r){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};const pq={lineHeight:!0,lineHeightSM:!0,lineHeightLG:!0,lineHeightHeading1:!0,lineHeightHeading2:!0,lineHeightHeading3:!0,lineHeightHeading4:!0,lineHeightHeading5:!0,opacityLoading:!0,fontWeightStrong:!0,zIndexPopupBase:!0,zIndexBase:!0},fq={size:!0,sizeSM:!0,sizeLG:!0,sizeMD:!0,sizeXS:!0,sizeXXS:!0,sizeMS:!0,sizeXL:!0,sizeXXL:!0,sizeUnit:!0,sizeStep:!0,motionBase:!0,motionUnit:!0},y_e={screenXS:!0,screenXSMin:!0,screenXSMax:!0,screenSM:!0,screenSMMin:!0,screenSMMax:!0,screenMD:!0,screenMDMin:!0,screenMDMax:!0,screenLG:!0,screenLGMin:!0,screenLGMax:!0,screenXL:!0,screenXLMin:!0,screenXLMax:!0,screenXXL:!0,screenXXLMin:!0},mq=(e,r,o)=>{const s=o.getDerivativeToken(e),{override:c}=r,d=TH(r,["override"]);let p=Object.assign(Object.assign({},s),{override:c});return p=hq(p),d&&Object.entries(d).forEach(v=>{let[m,E]=v;const{theme:C}=E,b=TH(E,["theme"]);let R=b;C&&(R=mq(Object.assign(Object.assign({},p),b),{override:b},C)),p[m]=R}),p};function _a(){const{token:e,hashed:r,theme:o,override:s,cssVar:c}=Be.useContext(uq),d=`${__e}-${r||""}`,p=o||lq,[v,m,E]=Wve(p,[bv,e],{salt:d,override:s,getComputedToken:mq,formatToken:hq,cssVar:c&&{prefix:c.prefix,key:c.key,unitless:pq,ignore:fq,preserve:y_e}});return[p,E,r?m:"",v,c]}function gq(e,r,o){return r=Jh(r),AK(e,Rb()?Reflect.construct(r,o||[],Jh(e).constructor):r.apply(e,o))}let C_e=Vo(function e(){Bo(this,e)});const vq=C_e,Eq="CALC_UNIT",b_e=new RegExp(Eq,"g");function LA(e){return typeof e=="number"?`${e}${Eq}`:e}let T_e=function(e){function r(o){var s;return Bo(this,r),s=gq(this,r),s.result="",o instanceof r?s.result=`(${o.result})`:typeof o=="number"?s.result=LA(o):typeof o=="string"&&(s.result=o),s}return Su(r,e),Vo(r,[{key:"add",value:function(s){return s instanceof r?this.result=`${this.result} + ${s.getResult()}`:(typeof s=="number"||typeof s=="string")&&(this.result=`${this.result} + ${LA(s)}`),this.lowPriority=!0,this}},{key:"sub",value:function(s){return s instanceof r?this.result=`${this.result} - ${s.getResult()}`:(typeof s=="number"||typeof s=="string")&&(this.result=`${this.result} - ${LA(s)}`),this.lowPriority=!0,this}},{key:"mul",value:function(s){return this.lowPriority&&(this.result=`(${this.result})`),s instanceof r?this.result=`${this.result} * ${s.getResult(!0)}`:(typeof s=="number"||typeof s=="string")&&(this.result=`${this.result} * ${s}`),this.lowPriority=!1,this}},{key:"div",value:function(s){return this.lowPriority&&(this.result=`(${this.result})`),s instanceof r?this.result=`${this.result} / ${s.getResult(!0)}`:(typeof s=="number"||typeof s=="string")&&(this.result=`${this.result} / ${s}`),this.lowPriority=!1,this}},{key:"getResult",value:function(s){return this.lowPriority||s?`(${this.result})`:this.result}},{key:"equal",value:function(s){const{unit:c=!0}=s||{};return this.result=this.result.replace(b_e,c?"px":""),typeof this.lowPriority<"u"?`calc(${this.result})`:this.result}}])}(vq),R_e=function(e){function r(o){var s;return Bo(this,r),s=gq(this,r),s.result=0,o instanceof r?s.result=o.result:typeof o=="number"&&(s.result=o),s}return Su(r,e),Vo(r,[{key:"add",value:function(s){return s instanceof r?this.result+=s.result:typeof s=="number"&&(this.result+=s),this}},{key:"sub",value:function(s){return s instanceof r?this.result-=s.result:typeof s=="number"&&(this.result-=s),this}},{key:"mul",value:function(s){return s instanceof r?this.result*=s.result:typeof s=="number"&&(this.result*=s),this}},{key:"div",value:function(s){return s instanceof r?this.result/=s.result:typeof s=="number"&&(this.result/=s),this}},{key:"equal",value:function(){return this.result}}])}(vq);const w_e=e=>{const r=e==="css"?T_e:R_e;return o=>new r(o)},I_e=w_e;function Fo(e){var r=S.useRef();r.current=e;var o=S.useCallback(function(){for(var s,c=arguments.length,d=new Array(c),p=0;p<c;p++)d[p]=arguments[p];return(s=r.current)===null||s===void 0?void 0:s.call.apply(s,[r].concat(d))},[]);return o}function Wh(e){var r=S.useRef(!1),o=S.useState(e),s=Ue(o,2),c=s[0],d=s[1];S.useEffect(function(){return r.current=!1,function(){r.current=!0}},[]);function p(v,m){m&&r.current||d(v)}return[c,p]}function kA(e){return e!==void 0}function va(e,r){var o=r||{},s=o.defaultValue,c=o.value,d=o.onChange,p=o.postState,v=Wh(function(){return kA(c)?c:kA(s)?typeof s=="function"?s():s:typeof e=="function"?e():e}),m=Ue(v,2),E=m[0],C=m[1],b=c!==void 0?c:E,R=p?p(b):b,w=Fo(d),I=Wh([b]),O=Ue(I,2),x=O[0],P=O[1];lH(function(){var L=x[0];E!==L&&w(E,L)},[x]),lH(function(){kA(c)||C(c)},[c]);var N=Fo(function(L,M){C(L,M),P([b],M)});return[R,N]}const _q=e=>({color:e.colorLink,textDecoration:"none",outline:"none",cursor:"pointer",transition:`color ${e.motionDurationSlow}`,"&:focus, &:hover":{color:e.colorLinkHover},"&:active":{color:e.colorLinkActive}}),SC={overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},Ds=function(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return{boxSizing:"border-box",margin:0,padding:0,color:e.colorText,fontSize:e.fontSize,lineHeight:e.lineHeight,listStyle:"none",fontFamily:r?"inherit":e.fontFamily}},Db=()=>({display:"inline-flex",alignItems:"center",color:"inherit",fontStyle:"normal",lineHeight:0,textAlign:"center",textTransform:"none",verticalAlign:"-0.125em",textRendering:"optimizeLegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","> *":{lineHeight:1},svg:{display:"inline-block"}}),gN=()=>({"&::before":{display:"table",content:'""'},"&::after":{display:"table",clear:"both",content:'""'}}),A_e=e=>({a:{color:e.colorLink,textDecoration:e.linkDecoration,backgroundColor:"transparent",outline:"none",cursor:"pointer",transition:`color ${e.motionDurationSlow}`,"-webkit-text-decoration-skip":"objects","&:hover":{color:e.colorLinkHover},"&:active":{color:e.colorLinkActive},"&:active,\n  &:hover":{textDecoration:e.linkHoverDecoration,outline:0},"&:focus":{textDecoration:e.linkFocusDecoration,outline:0},"&[disabled]":{color:e.colorTextDisabled,cursor:"not-allowed"}}}),O_e=(e,r,o,s)=>{const c=`[class^="${r}"], [class*=" ${r}"]`,d=o?`.${o}`:c,p={boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"}};let v={};return s!==!1&&(v={fontFamily:e.fontFamily,fontSize:e.fontSize}),{[d]:Object.assign(Object.assign(Object.assign({},v),p),{[c]:p})}},yC=e=>({outline:`${qe(e.lineWidthFocus)} solid ${e.colorPrimaryBorder}`,outlineOffset:1,transition:"outline-offset 0s, outline 0s"}),vP=e=>({"&:focus-visible":Object.assign({},yC(e))});function x_e(e){return e==="js"?{max:Math.max,min:Math.min}:{max:function(){for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return`max(${o.map(c=>qe(c)).join(",")})`},min:function(){for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return`min(${o.map(c=>qe(c)).join(",")})`}}}const Sq=typeof CSSINJS_STATISTIC<"u";let vN=!0;function gi(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];if(!Sq)return Object.assign.apply(Object,[{}].concat(r));vN=!1;const s={};return r.forEach(c=>{Object.keys(c).forEach(p=>{Object.defineProperty(s,p,{configurable:!0,enumerable:!0,get:()=>c[p]})})}),vN=!0,s}const RH={};function N_e(){}const D_e=e=>{let r,o=e,s=N_e;return Sq&&typeof Proxy<"u"&&(r=new Set,o=new Proxy(e,{get(c,d){return vN&&r.add(d),c[d]}}),s=(c,d)=>{var p;RH[c]={global:Array.from(r),component:Object.assign(Object.assign({},(p=RH[c])===null||p===void 0?void 0:p.component),d)}}),{token:o,keys:r,flush:s}},P_e=(e,r)=>{const[o,s]=_a();return lN({theme:o,token:s,hashId:"",path:["ant-design-icons",e],nonce:()=>r==null?void 0:r.nonce,layer:{name:"antd"}},()=>[{[`.${e}`]:Object.assign(Object.assign({},Db()),{[`.${e} .${e}-icon`]:{display:"block"}})}])},yq=P_e,Cq=(e,r,o)=>{var s;return typeof o=="function"?o(gi(r,(s=r[e])!==null&&s!==void 0?s:{})):o??{}},bq=(e,r,o,s)=>{const c=Object.assign({},r[e]);if(s!=null&&s.deprecatedTokens){const{deprecatedTokens:p}=s;p.forEach(v=>{let[m,E]=v;var C;(c!=null&&c[m]||c!=null&&c[E])&&((C=c[E])!==null&&C!==void 0||(c[E]=c==null?void 0:c[m]))})}const d=Object.assign(Object.assign({},o),c);return Object.keys(d).forEach(p=>{d[p]===r[p]&&delete d[p]}),d},L_e=(e,r)=>`${[r,e.replace(/([A-Z]+)([A-Z][a-z]+)/g,"$1-$2").replace(/([a-z])([A-Z])/g,"$1-$2")].filter(Boolean).join("-")}`;function EP(e,r,o){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const c=Array.isArray(e)?e:[e,e],[d]=c,p=c.join("-");return function(v){let m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:v;const[E,C,b,R,w]=_a(),{getPrefixCls:I,iconPrefixCls:O,csp:x}=S.useContext(Qn),P=I(),N=w?"css":"js",L=I_e(N),{max:M,min:j}=x_e(N),$={theme:E,token:R,hashId:b,nonce:()=>x==null?void 0:x.nonce,clientOnly:s.clientOnly,layer:{name:"antd"},order:s.order||-999};return lN(Object.assign(Object.assign({},$),{clientOnly:!1,path:["Shared",P]}),()=>[{"&":A_e(R)}]),yq(O,x),[lN(Object.assign(Object.assign({},$),{path:[p,v,O]}),()=>{if(s.injectStyle===!1)return[];const{token:G,flush:Y}=D_e(R),q=Cq(d,C,o),J=`.${v}`,re=bq(d,C,q,{deprecatedTokens:s.deprecatedTokens});w&&Object.keys(q).forEach(he=>{q[he]=`var(${BK(he,L_e(d,w.prefix))})`});const Z=gi(G,{componentCls:J,prefixCls:v,iconCls:`.${O}`,antCls:`.${P}`,calc:L,max:M,min:j},w?q:re),Q=r(Z,{hashId:b,prefixCls:v,rootPrefixCls:P,iconPrefixCls:O});return Y(d,re),[s.resetStyle===!1?null:O_e(Z,v,m,s.resetFont),Q]}),b]}}const Pb=(e,r,o,s)=>{const c=EP(e,r,o,Object.assign({resetStyle:!1,order:-998},s));return p=>{let{prefixCls:v,rootCls:m=v}=p;return c(v,m),null}},k_e=(e,r,o)=>{function s(E){return`${e}${E.slice(0,1).toUpperCase()}${E.slice(1)}`}const{unitless:c={},injectStyle:d=!0}=o??{},p={[s("zIndexPopup")]:!0};Object.keys(c).forEach(E=>{p[s(E)]=c[E]});const v=E=>{let{rootCls:C,cssVar:b}=E;const[,R]=_a();return EEe({path:[e],prefix:b.prefix,key:b==null?void 0:b.key,unitless:Object.assign(Object.assign({},pq),p),ignore:fq,token:R,scope:C},()=>{const w=Cq(e,R,r),I=bq(e,R,w,{deprecatedTokens:o==null?void 0:o.deprecatedTokens});return Object.keys(w).forEach(O=>{I[s(O)]=I[O],delete I[O]}),I}),null};return E=>{const[,,,,C]=_a();return[b=>d&&C?Be.createElement(Be.Fragment,null,Be.createElement(v,{rootCls:E,cssVar:C,component:e}),b):b,C==null?void 0:C.key]}},ya=(e,r,o,s)=>{const c=EP(e,r,o,s),d=k_e(Array.isArray(e)?e[0]:e,o,s);return function(p){let v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:p;const[,m]=c(p,v),[E,C]=d(v);return[E,m,C]}};function M_e(e,r){return _C.reduce((o,s)=>{const c=e[`${s}1`],d=e[`${s}3`],p=e[`${s}6`],v=e[`${s}7`];return Object.assign(Object.assign({},o),r(s,{lightColor:c,lightBorderColor:d,darkColor:p,textColor:v}))},{})}const F_e=Object.assign({},zh),{useId:wH}=F_e,U_e=()=>"",B_e=typeof wH>"u"?U_e:wH,V_e=B_e;function j_e(e,r,o){var s;xb();const c=e||{},d=c.inherit===!1||!r?Object.assign(Object.assign({},pN),{hashed:(s=r==null?void 0:r.hashed)!==null&&s!==void 0?s:pN.hashed,cssVar:r==null?void 0:r.cssVar}):r,p=V_e();return Bv(()=>{var v,m;if(!e)return r;const E=Object.assign({},d.components);Object.keys(e.components||{}).forEach(R=>{E[R]=Object.assign(Object.assign({},E[R]),e.components[R])});const C=`css-var-${p.replace(/:/g,"")}`,b=((v=c.cssVar)!==null&&v!==void 0?v:d.cssVar)&&Object.assign(Object.assign(Object.assign({prefix:o==null?void 0:o.prefixCls},typeof d.cssVar=="object"?d.cssVar:{}),typeof c.cssVar=="object"?c.cssVar:{}),{key:typeof c.cssVar=="object"&&((m=c.cssVar)===null||m===void 0?void 0:m.key)||C});return Object.assign(Object.assign(Object.assign({},d),c),{token:Object.assign(Object.assign({},d.token),c.token),components:E,cssVar:b})},[c,d],(v,m)=>v.some((E,C)=>{const b=m[C];return!Sv(E,b,!0)}))}var $_e=["children"],Tq=S.createContext({});function H_e(e){var r=e.children,o=kn(e,$_e);return S.createElement(Tq.Provider,{value:o},r)}var W_e=function(e){Su(o,e);var r=cp(o);function o(){return Bo(this,o),r.apply(this,arguments)}return Vo(o,[{key:"render",value:function(){return this.props.children}}]),o}(S.Component),pd="none",JS="appear",QS="enter",ZS="leave",IH="none",jc="prepare",Zf="start",em="active",_P="end",Rq="prepared";function AH(e,r){var o={};return o[e.toLowerCase()]=r.toLowerCase(),o["Webkit".concat(e)]="webkit".concat(r),o["Moz".concat(e)]="moz".concat(r),o["ms".concat(e)]="MS".concat(r),o["O".concat(e)]="o".concat(r.toLowerCase()),o}function z_e(e,r){var o={animationend:AH("Animation","AnimationEnd"),transitionend:AH("Transition","TransitionEnd")};return e&&("AnimationEvent"in r||delete o.animationend.animation,"TransitionEvent"in r||delete o.transitionend.transition),o}var G_e=z_e(Na(),typeof window<"u"?window:{}),wq={};if(Na()){var K_e=document.createElement("div");wq=K_e.style}var ey={};function Iq(e){if(ey[e])return ey[e];var r=G_e[e];if(r)for(var o=Object.keys(r),s=o.length,c=0;c<s;c+=1){var d=o[c];if(Object.prototype.hasOwnProperty.call(r,d)&&d in wq)return ey[e]=r[d],ey[e]}return""}var Aq=Iq("animationend"),Oq=Iq("transitionend"),xq=!!(Aq&&Oq),OH=Aq||"animationend",xH=Oq||"transitionend";function NH(e,r){if(!e)return null;if(pn(e)==="object"){var o=r.replace(/-\w/g,function(s){return s[1].toUpperCase()});return e[o]}return"".concat(e,"-").concat(r)}const q_e=function(e){var r=S.useRef();function o(c){c&&(c.removeEventListener(xH,e),c.removeEventListener(OH,e))}function s(c){r.current&&r.current!==c&&o(r.current),c&&c!==r.current&&(c.addEventListener(xH,e),c.addEventListener(OH,e),r.current=c)}return S.useEffect(function(){return function(){o(r.current)}},[]),[s,o]};var Nq=Na()?S.useLayoutEffect:S.useEffect;const Y_e=function(){var e=S.useRef(null);function r(){ci.cancel(e.current)}function o(s){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;r();var d=ci(function(){c<=1?s({isCanceled:function(){return d!==e.current}}):o(s,c-1)});e.current=d}return S.useEffect(function(){return function(){r()}},[]),[o,r]};var X_e=[jc,Zf,em,_P],J_e=[jc,Rq],Dq=!1,Q_e=!0;function Pq(e){return e===em||e===_P}const Z_e=function(e,r,o){var s=Wh(IH),c=Ue(s,2),d=c[0],p=c[1],v=Y_e(),m=Ue(v,2),E=m[0],C=m[1];function b(){p(jc,!0)}var R=r?J_e:X_e;return Nq(function(){if(d!==IH&&d!==_P){var w=R.indexOf(d),I=R[w+1],O=o(d);O===Dq?p(I,!0):I&&E(function(x){function P(){x.isCanceled()||p(I,!0)}O===!0?P():Promise.resolve(O).then(P)})}},[e,d]),S.useEffect(function(){return function(){C()}},[]),[b,d]};function eSe(e,r,o,s){var c=s.motionEnter,d=c===void 0?!0:c,p=s.motionAppear,v=p===void 0?!0:p,m=s.motionLeave,E=m===void 0?!0:m,C=s.motionDeadline,b=s.motionLeaveImmediately,R=s.onAppearPrepare,w=s.onEnterPrepare,I=s.onLeavePrepare,O=s.onAppearStart,x=s.onEnterStart,P=s.onLeaveStart,N=s.onAppearActive,L=s.onEnterActive,M=s.onLeaveActive,j=s.onAppearEnd,$=s.onEnterEnd,H=s.onLeaveEnd,G=s.onVisibleChanged,Y=Wh(),q=Ue(Y,2),J=q[0],re=q[1],Z=Wh(pd),Q=Ue(Z,2),he=Q[0],oe=Q[1],ae=Wh(null),te=Ue(ae,2),de=te[0],fe=te[1],ie=S.useRef(!1),le=S.useRef(null);function ve(){return o()}var ge=S.useRef(!1);function Te(){oe(pd,!0),fe(null,!0)}var we=Fo(function(ot){if(he!==pd){var Ze=ve();if(!(ot&&!ot.deadline&&ot.target!==Ze)){var je=ge.current,ct;he===JS&&je?ct=j==null?void 0:j(Ze,ot):he===QS&&je?ct=$==null?void 0:$(Ze,ot):he===ZS&&je&&(ct=H==null?void 0:H(Ze,ot)),je&&ct!==!1&&Te()}}}),Ie=q_e(we),Me=Ue(Ie,1),Ke=Me[0],ke=function(Ze){switch(Ze){case JS:return ye(ye(ye({},jc,R),Zf,O),em,N);case QS:return ye(ye(ye({},jc,w),Zf,x),em,L);case ZS:return ye(ye(ye({},jc,I),Zf,P),em,M);default:return{}}},Ne=S.useMemo(function(){return ke(he)},[he]),ze=Z_e(he,!e,function(ot){if(ot===jc){var Ze=Ne[jc];return Ze?Ze(ve()):Dq}if(xe in Ne){var je;fe(((je=Ne[xe])===null||je===void 0?void 0:je.call(Ne,ve(),null))||null)}return xe===em&&he!==pd&&(Ke(ve()),C>0&&(clearTimeout(le.current),le.current=setTimeout(function(){we({deadline:!0})},C))),xe===Rq&&Te(),Q_e}),Qe=Ue(ze,2),De=Qe[0],xe=Qe[1],ft=Pq(xe);ge.current=ft,Nq(function(){re(r);var ot=ie.current;ie.current=!0;var Ze;!ot&&r&&v&&(Ze=JS),ot&&r&&d&&(Ze=QS),(ot&&!r&&E||!ot&&b&&!r&&E)&&(Ze=ZS);var je=ke(Ze);Ze&&(e||je[jc])?(oe(Ze),De()):oe(pd)},[r]),S.useEffect(function(){(he===JS&&!v||he===QS&&!d||he===ZS&&!E)&&oe(pd)},[v,d,E]),S.useEffect(function(){return function(){ie.current=!1,clearTimeout(le.current)}},[]);var Et=S.useRef(!1);S.useEffect(function(){J&&(Et.current=!0),J!==void 0&&he===pd&&((Et.current||J)&&(G==null||G(J)),Et.current=!0)},[J,he]);var st=de;return Ne[jc]&&xe===Zf&&(st=_e({transition:"none"},st)),[he,xe,st,J??r]}function tSe(e){var r=e;pn(e)==="object"&&(r=e.transitionSupport);function o(c,d){return!!(c.motionName&&r&&d!==!1)}var s=S.forwardRef(function(c,d){var p=c.visible,v=p===void 0?!0:p,m=c.removeOnLeave,E=m===void 0?!0:m,C=c.forceRender,b=c.children,R=c.motionName,w=c.leavedClassName,I=c.eventProps,O=S.useContext(Tq),x=O.motion,P=o(c,x),N=S.useRef(),L=S.useRef();function M(){try{return N.current instanceof HTMLElement?N.current:Hg(L.current)}catch{return null}}var j=eSe(P,v,M,c),$=Ue(j,4),H=$[0],G=$[1],Y=$[2],q=$[3],J=S.useRef(q);q&&(J.current=!0);var re=S.useCallback(function(de){N.current=de,aP(d,de)},[d]),Z,Q=_e(_e({},I),{},{visible:v});if(!b)Z=null;else if(H===pd)q?Z=b(_e({},Q),re):!E&&J.current&&w?Z=b(_e(_e({},Q),{},{className:w}),re):C||!E&&!w?Z=b(_e(_e({},Q),{},{style:{display:"none"}}),re):Z=null;else{var he;G===jc?he="prepare":Pq(G)?he="active":G===Zf&&(he="start");var oe=NH(R,"".concat(H,"-").concat(he));Z=b(_e(_e({},Q),{},{className:He(NH(R,H),ye(ye({},oe,oe&&he),R,typeof R=="string")),style:Y}),re)}if(S.isValidElement(Z)&&xm(Z)){var ae=Z,te=ae.ref;te||(Z=S.cloneElement(Z,{ref:re}))}return S.createElement(W_e,{ref:L},Z)});return s.displayName="CSSMotion",s}const lp=tSe(xq);var EN="add",_N="keep",SN="remove",MA="removed";function nSe(e){var r;return e&&pn(e)==="object"&&"key"in e?r=e:r={key:e},_e(_e({},r),{},{key:String(r.key)})}function yN(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return e.map(nSe)}function rSe(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],o=[],s=0,c=r.length,d=yN(e),p=yN(r);d.forEach(function(E){for(var C=!1,b=s;b<c;b+=1){var R=p[b];if(R.key===E.key){s<b&&(o=o.concat(p.slice(s,b).map(function(w){return _e(_e({},w),{},{status:EN})})),s=b),o.push(_e(_e({},R),{},{status:_N})),s+=1,C=!0;break}}C||o.push(_e(_e({},E),{},{status:SN}))}),s<c&&(o=o.concat(p.slice(s).map(function(E){return _e(_e({},E),{},{status:EN})})));var v={};o.forEach(function(E){var C=E.key;v[C]=(v[C]||0)+1});var m=Object.keys(v).filter(function(E){return v[E]>1});return m.forEach(function(E){o=o.filter(function(C){var b=C.key,R=C.status;return b!==E||R!==SN}),o.forEach(function(C){C.key===E&&(C.status=_N)})}),o}var iSe=["component","children","onVisibleChanged","onAllRemoved"],oSe=["status"],aSe=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearPrepare","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];function sSe(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:lp,o=function(s){Su(d,s);var c=cp(d);function d(){var p;Bo(this,d);for(var v=arguments.length,m=new Array(v),E=0;E<v;E++)m[E]=arguments[E];return p=c.call.apply(c,[this].concat(m)),ye(br(p),"state",{keyEntities:[]}),ye(br(p),"removeKey",function(C){var b=p.state.keyEntities,R=b.map(function(w){return w.key!==C?w:_e(_e({},w),{},{status:MA})});return p.setState({keyEntities:R}),R.filter(function(w){var I=w.status;return I!==MA}).length}),p}return Vo(d,[{key:"render",value:function(){var v=this,m=this.state.keyEntities,E=this.props,C=E.component,b=E.children,R=E.onVisibleChanged,w=E.onAllRemoved,I=kn(E,iSe),O=C||S.Fragment,x={};return aSe.forEach(function(P){x[P]=I[P],delete I[P]}),delete I.keys,S.createElement(O,I,m.map(function(P,N){var L=P.status,M=kn(P,oSe),j=L===EN||L===_N;return S.createElement(r,Je({},x,{key:M.key,visible:j,eventProps:M,onVisibleChanged:function(H){if(R==null||R(H,{key:M.key}),!H){var G=v.removeKey(M.key);G===0&&w&&w()}}}),function($,H){return b(_e(_e({},$),{},{index:N}),H)})}))}}],[{key:"getDerivedStateFromProps",value:function(v,m){var E=v.keys,C=m.keyEntities,b=yN(E),R=rSe(C,b);return{keyEntities:R.filter(function(w){var I=C.find(function(O){var x=O.key;return w.key===x});return!(I&&I.status===MA&&w.status===SN)})}}}]),d}(S.Component);return ye(o,"defaultProps",{component:"div"}),o}const Lq=sSe(xq);function cSe(e){const{children:r}=e,[,o]=_a(),{motion:s}=o,c=S.useRef(!1);return c.current=c.current||s===!1,c.current?S.createElement(H_e,{motion:s},r):r}const lSe=()=>null;var uSe=globalThis&&globalThis.__rest||function(e,r){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};const dSe=["getTargetContainer","getPopupContainer","renderEmpty","input","pagination","form","select","button"],hSe="ant";let CC,kq,Mq,Fq;function Fy(){return CC||hSe}function pSe(){return kq||gP}function fSe(e){return Object.keys(e).some(r=>r.endsWith("Color"))}const mSe=e=>{const{prefixCls:r,iconPrefixCls:o,theme:s,holderRender:c}=e;r!==void 0&&(CC=r),o!==void 0&&(kq=o),"holderRender"in e&&(Fq=c),s&&(fSe(s)?g_e(Fy(),s):Mq=s)},gSe=()=>({getPrefixCls:(e,r)=>r||(e?`${Fy()}-${e}`:Fy()),getIconPrefixCls:pSe,getRootPrefixCls:()=>CC||Fy(),getTheme:()=>Mq,holderRender:Fq}),vSe=e=>{const{children:r,csp:o,autoInsertSpaceInButton:s,alert:c,anchor:d,form:p,locale:v,componentSize:m,direction:E,space:C,virtual:b,dropdownMatchSelectWidth:R,popupMatchSelectWidth:w,popupOverflow:I,legacyLocale:O,parentContext:x,iconPrefixCls:P,theme:N,componentDisabled:L,segmented:M,statistic:j,spin:$,calendar:H,carousel:G,cascader:Y,collapse:q,typography:J,checkbox:re,descriptions:Z,divider:Q,drawer:he,skeleton:oe,steps:ae,image:te,layout:de,list:fe,mentions:ie,modal:le,progress:ve,result:ge,slider:Te,breadcrumb:we,menu:Ie,pagination:Me,input:Ke,textArea:ke,empty:Ne,badge:ze,radio:Qe,rate:De,switch:xe,transfer:ft,avatar:Et,message:st,tag:ot,table:Ze,card:je,tabs:ct,timeline:lt,timePicker:gt,upload:Ot,notification:Tt,tree:Wt,colorPicker:on,datePicker:xt,rangePicker:wt,flex:Pt,wave:Kt,dropdown:fn,warning:mn,tour:Un,floatButtonGroup:Kn}=e,qn=S.useCallback((Ct,Ht)=>{const{prefixCls:On}=e;if(Ht)return Ht;const rt=On||x.getPrefixCls("");return Ct?`${rt}-${Ct}`:rt},[x.getPrefixCls,e.prefixCls]),mt=P||x.iconPrefixCls||gP,Nt=o||x.csp;yq(mt,Nt);const Sn=j_e(N,x.theme,{prefixCls:qn("")}),ur={csp:Nt,autoInsertSpaceInButton:s,alert:c,anchor:d,locale:v||O,direction:E,space:C,virtual:b,popupMatchSelectWidth:w??R,popupOverflow:I,getPrefixCls:qn,iconPrefixCls:mt,theme:Sn,segmented:M,statistic:j,spin:$,calendar:H,carousel:G,cascader:Y,collapse:q,typography:J,checkbox:re,descriptions:Z,divider:Q,drawer:he,skeleton:oe,steps:ae,image:te,input:Ke,textArea:ke,layout:de,list:fe,mentions:ie,modal:le,progress:ve,result:ge,slider:Te,breadcrumb:we,menu:Ie,pagination:Me,empty:Ne,badge:ze,radio:Qe,rate:De,switch:xe,transfer:ft,avatar:Et,message:st,tag:ot,table:Ze,card:je,tabs:ct,timeline:lt,timePicker:gt,upload:Ot,notification:Tt,tree:Wt,colorPicker:on,datePicker:xt,rangePicker:wt,flex:Pt,wave:Kt,dropdown:fn,warning:mn,tour:Un,floatButtonGroup:Kn},Br=Object.assign({},x);Object.keys(ur).forEach(Ct=>{ur[Ct]!==void 0&&(Br[Ct]=ur[Ct])}),dSe.forEach(Ct=>{const Ht=e[Ct];Ht&&(Br[Ct]=Ht)}),typeof s<"u"&&(Br.button=Object.assign({autoInsertSpace:s},Br.button));const dr=Bv(()=>Br,Br,(Ct,Ht)=>{const On=Object.keys(Ct),rt=Object.keys(Ht);return On.length!==rt.length||On.some(St=>Ct[St]!==Ht[St])}),Mn=S.useMemo(()=>({prefixCls:mt,csp:Nt}),[mt,Nt]);let Vt=S.createElement(S.Fragment,null,S.createElement(lSe,{dropdownMatchSelectWidth:R}),r);const yn=S.useMemo(()=>{var Ct,Ht,On,rt;return Qf(((Ct=Qh.Form)===null||Ct===void 0?void 0:Ct.defaultValidateMessages)||{},((On=(Ht=dr.locale)===null||Ht===void 0?void 0:Ht.Form)===null||On===void 0?void 0:On.defaultValidateMessages)||{},((rt=dr.form)===null||rt===void 0?void 0:rt.validateMessages)||{},(p==null?void 0:p.validateMessages)||{})},[dr,p==null?void 0:p.validateMessages]);Object.keys(yn).length>0&&(Vt=S.createElement(nq.Provider,{value:yn},Vt)),v&&(Vt=S.createElement(LEe,{locale:v,_ANT_MARK__:DEe},Vt)),(mt||Nt)&&(Vt=S.createElement(fP.Provider,{value:Mn},Vt)),m&&(Vt=S.createElement(v_e,{size:m},Vt)),Vt=S.createElement(cSe,null,Vt);const $t=S.useMemo(()=>{const Ct=Sn||{},{algorithm:Ht,token:On,components:rt,cssVar:St}=Ct,It=uSe(Ct,["algorithm","token","components","cssVar"]),en=Ht&&(!Array.isArray(Ht)||Ht.length>0)?iN(Ht):lq,En={};Object.entries(rt||{}).forEach(pr=>{let[Vr,cr]=pr;const rn=Object.assign({},cr);"algorithm"in rn&&(rn.algorithm===!0?rn.theme=en:(Array.isArray(rn.algorithm)||typeof rn.algorithm=="function")&&(rn.theme=iN(rn.algorithm)),delete rn.algorithm),En[Vr]=rn});const Cn=Object.assign(Object.assign({},bv),On);return Object.assign(Object.assign({},It),{theme:en,token:Cn,components:En,override:Object.assign({override:Cn},En),cssVar:St})},[Sn]);return N&&(Vt=S.createElement(uq.Provider,{value:$t},Vt)),dr.warning&&(Vt=S.createElement(TEe.Provider,{value:dr.warning},Vt)),L!==void 0&&(Vt=S.createElement(dq,{disabled:L},Vt)),S.createElement(Qn.Provider,{value:dr},Vt)},up=e=>{const r=S.useContext(Qn),o=S.useContext(mP);return S.createElement(vSe,Object.assign({parentContext:r,legacyLocale:o},e))};up.ConfigContext=Qn;up.SizeContext=jv;up.config=mSe;up.useConfig=E_e;Object.defineProperty(up,"SizeContext",{get:()=>jv});var ESe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"}}]},name:"check-circle",theme:"filled"};const _Se=ESe;function Uq(e){var r;return e==null||(r=e.getRootNode)===null||r===void 0?void 0:r.call(e)}function SSe(e){return Uq(e)instanceof ShadowRoot}function bC(e){return SSe(e)?Uq(e):null}function ySe(e){return e.replace(/-(.)/g,function(r,o){return o.toUpperCase()})}function CSe(e,r){ga(e,"[@ant-design/icons] ".concat(r))}function DH(e){return pn(e)==="object"&&typeof e.name=="string"&&typeof e.theme=="string"&&(pn(e.icon)==="object"||typeof e.icon=="function")}function PH(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.keys(e).reduce(function(r,o){var s=e[o];switch(o){case"class":r.className=s,delete r.class;break;default:delete r[o],r[ySe(o)]=s}return r},{})}function CN(e,r,o){return o?Be.createElement(e.tag,_e(_e({key:r},PH(e.attrs)),o),(e.children||[]).map(function(s,c){return CN(s,"".concat(r,"-").concat(e.tag,"-").concat(c))})):Be.createElement(e.tag,_e({key:r},PH(e.attrs)),(e.children||[]).map(function(s,c){return CN(s,"".concat(r,"-").concat(e.tag,"-").concat(c))}))}function Bq(e){return Zh(e)[0]}function Vq(e){return e?Array.isArray(e)?e:[e]:[]}var bSe=`
.anticon {
  display: inline-flex;
  align-items: center;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`,TSe=function(r){var o=S.useContext(fP),s=o.csp,c=o.prefixCls,d=bSe;c&&(d=d.replace(/anticon/g,c)),S.useEffect(function(){var p=r.current,v=bC(p);uu(d,"@ant-design-icons",{prepend:!0,csp:s,attachTo:v})},[])},RSe=["icon","className","onClick","style","primaryColor","secondaryColor"],Gg={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};function wSe(e){var r=e.primaryColor,o=e.secondaryColor;Gg.primaryColor=r,Gg.secondaryColor=o||Bq(r),Gg.calculated=!!o}function ISe(){return _e({},Gg)}var Lb=function(r){var o=r.icon,s=r.className,c=r.onClick,d=r.style,p=r.primaryColor,v=r.secondaryColor,m=kn(r,RSe),E=S.useRef(),C=Gg;if(p&&(C={primaryColor:p,secondaryColor:v||Bq(p)}),TSe(E),CSe(DH(o),"icon should be icon definiton, but got ".concat(o)),!DH(o))return null;var b=o;return b&&typeof b.icon=="function"&&(b=_e(_e({},b),{},{icon:b.icon(C.primaryColor,C.secondaryColor)})),CN(b.icon,"svg-".concat(b.name),_e(_e({className:s,onClick:c,style:d,"data-icon":b.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},m),{},{ref:E}))};Lb.displayName="IconReact";Lb.getTwoToneColors=ISe;Lb.setTwoToneColors=wSe;const SP=Lb;function jq(e){var r=Vq(e),o=Ue(r,2),s=o[0],c=o[1];return SP.setTwoToneColors({primaryColor:s,secondaryColor:c})}function ASe(){var e=SP.getTwoToneColors();return e.calculated?[e.primaryColor,e.secondaryColor]:e.primaryColor}var OSe=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];jq(QEe.primary);var kb=S.forwardRef(function(e,r){var o=e.className,s=e.icon,c=e.spin,d=e.rotate,p=e.tabIndex,v=e.onClick,m=e.twoToneColor,E=kn(e,OSe),C=S.useContext(fP),b=C.prefixCls,R=b===void 0?"anticon":b,w=C.rootClassName,I=He(w,R,ye(ye({},"".concat(R,"-").concat(s.name),!!s.name),"".concat(R,"-spin"),!!c||s.name==="loading"),o),O=p;O===void 0&&v&&(O=-1);var x=d?{msTransform:"rotate(".concat(d,"deg)"),transform:"rotate(".concat(d,"deg)")}:void 0,P=Vq(m),N=Ue(P,2),L=N[0],M=N[1];return S.createElement("span",Je({role:"img","aria-label":s.name},E,{ref:r,tabIndex:O,onClick:v,className:I}),S.createElement(SP,{icon:s,primaryColor:L,secondaryColor:M,style:x}))});kb.displayName="AntdIcon";kb.getTwoToneColor=ASe;kb.setTwoToneColor=jq;const ro=kb;var xSe=function(r,o){return S.createElement(ro,Je({},r,{ref:o,icon:_Se}))},NSe=S.forwardRef(xSe);const $q=NSe;var DSe={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm127.98 274.82h-.04l-.08.06L512 466.75 384.14 338.88c-.04-.05-.06-.06-.08-.06a.12.12 0 00-.07 0c-.03 0-.05.01-.09.05l-45.02 45.02a.2.2 0 00-.05.09.12.12 0 000 .07v.02a.27.27 0 00.06.06L466.75 512 338.88 639.86c-.05.04-.06.06-.06.08a.12.12 0 000 .07c0 .03.01.05.05.09l45.02 45.02a.2.2 0 00.09.05.12.12 0 00.07 0c.02 0 .04-.01.08-.05L512 557.25l127.86 127.87c.04.04.06.05.08.05a.12.12 0 00.07 0c.03 0 .05-.01.09-.05l45.02-45.02a.2.2 0 00.05-.09.12.12 0 000-.07v-.02a.27.27 0 00-.05-.06L557.25 512l127.87-127.86c.04-.04.05-.06.05-.08a.12.12 0 000-.07c0-.03-.01-.05-.05-.09l-45.02-45.02a.2.2 0 00-.09-.05.12.12 0 00-.07 0z"}}]},name:"close-circle",theme:"filled"};const PSe=DSe;var LSe=function(r,o){return S.createElement(ro,Je({},r,{ref:o,icon:PSe}))},kSe=S.forwardRef(LSe);const Mb=kSe;var MSe={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M799.86 166.31c.02 0 .04.02.08.06l57.69 57.7c.04.03.05.05.06.08a.12.12 0 010 .06c0 .03-.02.05-.06.09L569.93 512l287.7 287.7c.04.04.05.06.06.09a.12.12 0 010 .07c0 .02-.02.04-.06.08l-57.7 57.69c-.03.04-.05.05-.07.06a.12.12 0 01-.07 0c-.03 0-.05-.02-.09-.06L512 569.93l-287.7 287.7c-.04.04-.06.05-.09.06a.12.12 0 01-.07 0c-.02 0-.04-.02-.08-.06l-57.69-57.7c-.04-.03-.05-.05-.06-.07a.12.12 0 010-.07c0-.03.02-.05.06-.09L454.07 512l-287.7-287.7c-.04-.04-.05-.06-.06-.09a.12.12 0 010-.07c0-.02.02-.04.06-.08l57.7-57.69c.03-.04.05-.05.07-.06a.12.12 0 01.07 0c.03 0 .05.02.09.06L512 454.07l287.7-287.7c.04-.04.06-.05.09-.06a.12.12 0 01.07 0z"}}]},name:"close",theme:"outlined"};const FSe=MSe;var USe=function(r,o){return S.createElement(ro,Je({},r,{ref:o,icon:FSe}))},BSe=S.forwardRef(USe);const Hq=BSe;var VSe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm-32 232c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296zm32 440a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"exclamation-circle",theme:"filled"};const jSe=VSe;var $Se=function(r,o){return S.createElement(ro,Je({},r,{ref:o,icon:jSe}))},HSe=S.forwardRef($Se);const Wq=HSe;var WSe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"info-circle",theme:"filled"};const zSe=WSe;var GSe=function(r,o){return S.createElement(ro,Je({},r,{ref:o,icon:zSe}))},KSe=S.forwardRef(GSe);const qSe=KSe;var YSe=`accept acceptCharset accessKey action allowFullScreen allowTransparency
    alt async autoComplete autoFocus autoPlay capture cellPadding cellSpacing challenge
    charSet checked classID className colSpan cols content contentEditable contextMenu
    controls coords crossOrigin data dateTime default defer dir disabled download draggable
    encType form formAction formEncType formMethod formNoValidate formTarget frameBorder
    headers height hidden high href hrefLang htmlFor httpEquiv icon id inputMode integrity
    is keyParams keyType kind label lang list loop low manifest marginHeight marginWidth max maxLength media
    mediaGroup method min minLength multiple muted name noValidate nonce open
    optimum pattern placeholder poster preload radioGroup readOnly rel required
    reversed role rowSpan rows sandbox scope scoped scrolling seamless selected
    shape size sizes span spellCheck src srcDoc srcLang srcSet start step style
    summary tabIndex target title type useMap value width wmode wrap`,XSe=`onCopy onCut onPaste onCompositionEnd onCompositionStart onCompositionUpdate onKeyDown
    onKeyPress onKeyUp onFocus onBlur onChange onInput onSubmit onClick onContextMenu onDoubleClick
    onDrag onDragEnd onDragEnter onDragExit onDragLeave onDragOver onDragStart onDrop onMouseDown
    onMouseEnter onMouseLeave onMouseMove onMouseOut onMouseOver onMouseUp onSelect onTouchCancel
    onTouchEnd onTouchMove onTouchStart onScroll onWheel onAbort onCanPlay onCanPlayThrough
    onDurationChange onEmptied onEncrypted onEnded onError onLoadedData onLoadedMetadata
    onLoadStart onPause onPlay onPlaying onProgress onRateChange onSeeked onSeeking onStalled onSuspend onTimeUpdate onVolumeChange onWaiting onLoad onError`,JSe="".concat(YSe," ").concat(XSe).split(/[\s\n]+/),QSe="aria-",ZSe="data-";function LH(e,r){return e.indexOf(r)===0}function ep(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,o;r===!1?o={aria:!0,data:!0,attr:!0}:r===!0?o={aria:!0}:o=_e({},r);var s={};return Object.keys(e).forEach(function(c){(o.aria&&(c==="role"||LH(c,QSe))||o.data&&LH(c,ZSe)||o.attr&&JSe.includes(c))&&(s[c]=e[c])}),s}function zq(e){return e&&Be.isValidElement(e)&&e.type===Be.Fragment}const eye=(e,r,o)=>Be.isValidElement(e)?Be.cloneElement(e,typeof o=="function"?o(e.props||{}):o):r;function fc(e,r){return eye(e,e,r)}const kH=e=>typeof e=="object"&&e!=null&&e.nodeType===1,MH=(e,r)=>(!r||e!=="hidden")&&e!=="visible"&&e!=="clip",FA=(e,r)=>{if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){const o=getComputedStyle(e,null);return MH(o.overflowY,r)||MH(o.overflowX,r)||(s=>{const c=(d=>{if(!d.ownerDocument||!d.ownerDocument.defaultView)return null;try{return d.ownerDocument.defaultView.frameElement}catch{return null}})(s);return!!c&&(c.clientHeight<s.scrollHeight||c.clientWidth<s.scrollWidth)})(e)}return!1},ty=(e,r,o,s,c,d,p,v)=>d<e&&p>r||d>e&&p<r?0:d<=e&&v<=o||p>=r&&v>=o?d-e-s:p>r&&v<o||d<e&&v>o?p-r+c:0,tye=e=>{const r=e.parentElement;return r??(e.getRootNode().host||null)},FH=(e,r)=>{var o,s,c,d;if(typeof document>"u")return[];const{scrollMode:p,block:v,inline:m,boundary:E,skipOverflowHiddenElements:C}=r,b=typeof E=="function"?E:oe=>oe!==E;if(!kH(e))throw new TypeError("Invalid target");const R=document.scrollingElement||document.documentElement,w=[];let I=e;for(;kH(I)&&b(I);){if(I=tye(I),I===R){w.push(I);break}I!=null&&I===document.body&&FA(I)&&!FA(document.documentElement)||I!=null&&FA(I,C)&&w.push(I)}const O=(s=(o=window.visualViewport)==null?void 0:o.width)!=null?s:innerWidth,x=(d=(c=window.visualViewport)==null?void 0:c.height)!=null?d:innerHeight,{scrollX:P,scrollY:N}=window,{height:L,width:M,top:j,right:$,bottom:H,left:G}=e.getBoundingClientRect(),{top:Y,right:q,bottom:J,left:re}=(oe=>{const ae=window.getComputedStyle(oe);return{top:parseFloat(ae.scrollMarginTop)||0,right:parseFloat(ae.scrollMarginRight)||0,bottom:parseFloat(ae.scrollMarginBottom)||0,left:parseFloat(ae.scrollMarginLeft)||0}})(e);let Z=v==="start"||v==="nearest"?j-Y:v==="end"?H+J:j+L/2-Y+J,Q=m==="center"?G+M/2-re+q:m==="end"?$+q:G-re;const he=[];for(let oe=0;oe<w.length;oe++){const ae=w[oe],{height:te,width:de,top:fe,right:ie,bottom:le,left:ve}=ae.getBoundingClientRect();if(p==="if-needed"&&j>=0&&G>=0&&H<=x&&$<=O&&j>=fe&&H<=le&&G>=ve&&$<=ie)return he;const ge=getComputedStyle(ae),Te=parseInt(ge.borderLeftWidth,10),we=parseInt(ge.borderTopWidth,10),Ie=parseInt(ge.borderRightWidth,10),Me=parseInt(ge.borderBottomWidth,10);let Ke=0,ke=0;const Ne="offsetWidth"in ae?ae.offsetWidth-ae.clientWidth-Te-Ie:0,ze="offsetHeight"in ae?ae.offsetHeight-ae.clientHeight-we-Me:0,Qe="offsetWidth"in ae?ae.offsetWidth===0?0:de/ae.offsetWidth:0,De="offsetHeight"in ae?ae.offsetHeight===0?0:te/ae.offsetHeight:0;if(R===ae)Ke=v==="start"?Z:v==="end"?Z-x:v==="nearest"?ty(N,N+x,x,we,Me,N+Z,N+Z+L,L):Z-x/2,ke=m==="start"?Q:m==="center"?Q-O/2:m==="end"?Q-O:ty(P,P+O,O,Te,Ie,P+Q,P+Q+M,M),Ke=Math.max(0,Ke+N),ke=Math.max(0,ke+P);else{Ke=v==="start"?Z-fe-we:v==="end"?Z-le+Me+ze:v==="nearest"?ty(fe,le,te,we,Me+ze,Z,Z+L,L):Z-(fe+te/2)+ze/2,ke=m==="start"?Q-ve-Te:m==="center"?Q-(ve+de/2)+Ne/2:m==="end"?Q-ie+Ie+Ne:ty(ve,ie,de,Te,Ie+Ne,Q,Q+M,M);const{scrollLeft:xe,scrollTop:ft}=ae;Ke=De===0?0:Math.max(0,Math.min(ft+Ke/De,ae.scrollHeight-te/De+ze)),ke=Qe===0?0:Math.max(0,Math.min(xe+ke/Qe,ae.scrollWidth-de/Qe+Ne)),Z+=ft-Ke,Q+=xe-ke}he.push({el:ae,top:Ke,left:ke})}return he},nye=e=>e===!1?{block:"end",inline:"nearest"}:(r=>r===Object(r)&&Object.keys(r).length!==0)(e)?e:{block:"start",inline:"nearest"};function rye(e,r){if(!e.isConnected||!(c=>{let d=c;for(;d&&d.parentNode;){if(d.parentNode===document)return!0;d=d.parentNode instanceof ShadowRoot?d.parentNode.host:d.parentNode}return!1})(e))return;const o=(c=>{const d=window.getComputedStyle(c);return{top:parseFloat(d.scrollMarginTop)||0,right:parseFloat(d.scrollMarginRight)||0,bottom:parseFloat(d.scrollMarginBottom)||0,left:parseFloat(d.scrollMarginLeft)||0}})(e);if((c=>typeof c=="object"&&typeof c.behavior=="function")(r))return r.behavior(FH(e,r));const s=typeof r=="boolean"||r==null?void 0:r.behavior;for(const{el:c,top:d,left:p}of FH(e,nye(r))){const v=d-o.top+o.bottom,m=p-o.left+o.right;c.scroll({top:v,left:m,behavior:s})}}const iye=e=>{const[,,,,r]=_a();return r?`${e}-css-var`:""},Fl=iye;var dt={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(r){var o=r.keyCode;if(r.altKey&&!r.ctrlKey||r.metaKey||o>=dt.F1&&o<=dt.F12)return!1;switch(o){case dt.ALT:case dt.CAPS_LOCK:case dt.CONTEXT_MENU:case dt.CTRL:case dt.DOWN:case dt.END:case dt.ESC:case dt.HOME:case dt.INSERT:case dt.LEFT:case dt.MAC_FF_META:case dt.META:case dt.NUMLOCK:case dt.NUM_CENTER:case dt.PAGE_DOWN:case dt.PAGE_UP:case dt.PAUSE:case dt.PRINT_SCREEN:case dt.RIGHT:case dt.SHIFT:case dt.UP:case dt.WIN_KEY:case dt.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(r){if(r>=dt.ZERO&&r<=dt.NINE||r>=dt.NUM_ZERO&&r<=dt.NUM_MULTIPLY||r>=dt.A&&r<=dt.Z||window.navigator.userAgent.indexOf("WebKit")!==-1&&r===0)return!0;switch(r){case dt.SPACE:case dt.QUESTION_MARK:case dt.NUM_PLUS:case dt.NUM_MINUS:case dt.NUM_PERIOD:case dt.NUM_DIVISION:case dt.SEMICOLON:case dt.DASH:case dt.EQUALS:case dt.COMMA:case dt.PERIOD:case dt.SLASH:case dt.APOSTROPHE:case dt.SINGLE_QUOTE:case dt.OPEN_SQUARE_BRACKET:case dt.BACKSLASH:case dt.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},Gq=S.forwardRef(function(e,r){var o=e.prefixCls,s=e.style,c=e.className,d=e.duration,p=d===void 0?4.5:d,v=e.showProgress,m=e.pauseOnHover,E=m===void 0?!0:m,C=e.eventKey,b=e.content,R=e.closable,w=e.closeIcon,I=w===void 0?"x":w,O=e.props,x=e.onClick,P=e.onNoticeClose,N=e.times,L=e.hovering,M=S.useState(!1),j=Ue(M,2),$=j[0],H=j[1],G=S.useState(0),Y=Ue(G,2),q=Y[0],J=Y[1],re=S.useState(0),Z=Ue(re,2),Q=Z[0],he=Z[1],oe=L||$,ae=p>0&&v,te=function(){P(C)},de=function(Te){(Te.key==="Enter"||Te.code==="Enter"||Te.keyCode===dt.ENTER)&&te()};S.useEffect(function(){if(!oe&&p>0){var ge=Date.now()-Q,Te=setTimeout(function(){te()},p*1e3-Q);return function(){E&&clearTimeout(Te),he(Date.now()-ge)}}},[p,oe,N]),S.useEffect(function(){if(!oe&&ae&&(E||Q===0)){var ge=performance.now(),Te,we=function Ie(){cancelAnimationFrame(Te),Te=requestAnimationFrame(function(Me){var Ke=Me+Q-ge,ke=Math.min(Ke/(p*1e3),1);J(ke*100),ke<1&&Ie()})};return we(),function(){E&&cancelAnimationFrame(Te)}}},[p,Q,oe,ae,N]);var fe=S.useMemo(function(){return pn(R)==="object"&&R!==null?R:R?{closeIcon:I}:{}},[R,I]),ie=ep(fe,!0),le=100-(!q||q<0?0:q>100?100:q),ve="".concat(o,"-notice");return S.createElement("div",Je({},O,{ref:r,className:He(ve,c,ye({},"".concat(ve,"-closable"),R)),style:s,onMouseEnter:function(Te){var we;H(!0),O==null||(we=O.onMouseEnter)===null||we===void 0||we.call(O,Te)},onMouseLeave:function(Te){var we;H(!1),O==null||(we=O.onMouseLeave)===null||we===void 0||we.call(O,Te)},onClick:x}),S.createElement("div",{className:"".concat(ve,"-content")},b),R&&S.createElement("a",Je({tabIndex:0,className:"".concat(ve,"-close"),onKeyDown:de,"aria-label":"Close"},ie,{onClick:function(Te){Te.preventDefault(),Te.stopPropagation(),te()}}),fe.closeIcon),ae&&S.createElement("progress",{className:"".concat(ve,"-progress"),max:"100",value:le},le+"%"))}),Kq=Be.createContext({}),oye=function(r){var o=r.children,s=r.classNames;return Be.createElement(Kq.Provider,{value:{classNames:s}},o)},UH=8,BH=3,VH=16,aye=function(r){var o={offset:UH,threshold:BH,gap:VH};if(r&&pn(r)==="object"){var s,c,d;o.offset=(s=r.offset)!==null&&s!==void 0?s:UH,o.threshold=(c=r.threshold)!==null&&c!==void 0?c:BH,o.gap=(d=r.gap)!==null&&d!==void 0?d:VH}return[!!r,o]},sye=["className","style","classNames","styles"],cye=function(r){var o=r.configList,s=r.placement,c=r.prefixCls,d=r.className,p=r.style,v=r.motion,m=r.onAllNoticeRemoved,E=r.onNoticeClose,C=r.stack,b=S.useContext(Kq),R=b.classNames,w=S.useRef({}),I=S.useState(null),O=Ue(I,2),x=O[0],P=O[1],N=S.useState([]),L=Ue(N,2),M=L[0],j=L[1],$=o.map(function(oe){return{config:oe,key:String(oe.key)}}),H=aye(C),G=Ue(H,2),Y=G[0],q=G[1],J=q.offset,re=q.threshold,Z=q.gap,Q=Y&&(M.length>0||$.length<=re),he=typeof v=="function"?v(s):v;return S.useEffect(function(){Y&&M.length>1&&j(function(oe){return oe.filter(function(ae){return $.some(function(te){var de=te.key;return ae===de})})})},[M,$,Y]),S.useEffect(function(){var oe;if(Y&&w.current[(oe=$[$.length-1])===null||oe===void 0?void 0:oe.key]){var ae;P(w.current[(ae=$[$.length-1])===null||ae===void 0?void 0:ae.key])}},[$,Y]),Be.createElement(Lq,Je({key:s,className:He(c,"".concat(c,"-").concat(s),R==null?void 0:R.list,d,ye(ye({},"".concat(c,"-stack"),!!Y),"".concat(c,"-stack-expanded"),Q)),style:p,keys:$,motionAppear:!0},he,{onAllRemoved:function(){m(s)}}),function(oe,ae){var te=oe.config,de=oe.className,fe=oe.style,ie=oe.index,le=te,ve=le.key,ge=le.times,Te=String(ve),we=te,Ie=we.className,Me=we.style,Ke=we.classNames,ke=we.styles,Ne=kn(we,sye),ze=$.findIndex(function(gt){return gt.key===Te}),Qe={};if(Y){var De=$.length-1-(ze>-1?ze:ie-1),xe=s==="top"||s==="bottom"?"-50%":"0";if(De>0){var ft,Et,st;Qe.height=Q?(ft=w.current[Te])===null||ft===void 0?void 0:ft.offsetHeight:x==null?void 0:x.offsetHeight;for(var ot=0,Ze=0;Ze<De;Ze++){var je;ot+=((je=w.current[$[$.length-1-Ze].key])===null||je===void 0?void 0:je.offsetHeight)+Z}var ct=(Q?ot:De*J)*(s.startsWith("top")?1:-1),lt=!Q&&x!==null&&x!==void 0&&x.offsetWidth&&(Et=w.current[Te])!==null&&Et!==void 0&&Et.offsetWidth?((x==null?void 0:x.offsetWidth)-J*2*(De<3?De:3))/((st=w.current[Te])===null||st===void 0?void 0:st.offsetWidth):1;Qe.transform="translate3d(".concat(xe,", ").concat(ct,"px, 0) scaleX(").concat(lt,")")}else Qe.transform="translate3d(".concat(xe,", 0, 0)")}return Be.createElement("div",{ref:ae,className:He("".concat(c,"-notice-wrapper"),de,Ke==null?void 0:Ke.wrapper),style:_e(_e(_e({},fe),Qe),ke==null?void 0:ke.wrapper),onMouseEnter:function(){return j(function(Ot){return Ot.includes(Te)?Ot:[].concat(_t(Ot),[Te])})},onMouseLeave:function(){return j(function(Ot){return Ot.filter(function(Tt){return Tt!==Te})})}},Be.createElement(Gq,Je({},Ne,{ref:function(Ot){ze>-1?w.current[Te]=Ot:delete w.current[Te]},prefixCls:c,classNames:Ke,styles:ke,className:He(Ie,R==null?void 0:R.notice),style:Me,times:ge,key:ve,eventKey:ve,onNoticeClose:E,hovering:Y&&M.length>0})))})},lye=S.forwardRef(function(e,r){var o=e.prefixCls,s=o===void 0?"rc-notification":o,c=e.container,d=e.motion,p=e.maxCount,v=e.className,m=e.style,E=e.onAllRemoved,C=e.stack,b=e.renderNotifications,R=S.useState([]),w=Ue(R,2),I=w[0],O=w[1],x=function(Y){var q,J=I.find(function(re){return re.key===Y});J==null||(q=J.onClose)===null||q===void 0||q.call(J),O(function(re){return re.filter(function(Z){return Z.key!==Y})})};S.useImperativeHandle(r,function(){return{open:function(Y){O(function(q){var J=_t(q),re=J.findIndex(function(he){return he.key===Y.key}),Z=_e({},Y);if(re>=0){var Q;Z.times=(((Q=q[re])===null||Q===void 0?void 0:Q.times)||0)+1,J[re]=Z}else Z.times=0,J.push(Z);return p>0&&J.length>p&&(J=J.slice(-p)),J})},close:function(Y){x(Y)},destroy:function(){O([])}}});var P=S.useState({}),N=Ue(P,2),L=N[0],M=N[1];S.useEffect(function(){var G={};I.forEach(function(Y){var q=Y.placement,J=q===void 0?"topRight":q;J&&(G[J]=G[J]||[],G[J].push(Y))}),Object.keys(L).forEach(function(Y){G[Y]=G[Y]||[]}),M(G)},[I]);var j=function(Y){M(function(q){var J=_e({},q),re=J[Y]||[];return re.length||delete J[Y],J})},$=S.useRef(!1);if(S.useEffect(function(){Object.keys(L).length>0?$.current=!0:$.current&&(E==null||E(),$.current=!1)},[L]),!c)return null;var H=Object.keys(L);return kl.createPortal(S.createElement(S.Fragment,null,H.map(function(G){var Y=L[G],q=S.createElement(cye,{key:G,configList:Y,placement:G,prefixCls:s,className:v==null?void 0:v(G),style:m==null?void 0:m(G),motion:d,onNoticeClose:x,onAllNoticeRemoved:j,stack:C});return b?b(q,{prefixCls:s,key:G}):q})),c)}),uye=["getContainer","motion","prefixCls","maxCount","className","style","onAllRemoved","stack","renderNotifications"],dye=function(){return document.body},jH=0;function hye(){for(var e={},r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return o.forEach(function(c){c&&Object.keys(c).forEach(function(d){var p=c[d];p!==void 0&&(e[d]=p)})}),e}function pye(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=e.getContainer,o=r===void 0?dye:r,s=e.motion,c=e.prefixCls,d=e.maxCount,p=e.className,v=e.style,m=e.onAllRemoved,E=e.stack,C=e.renderNotifications,b=kn(e,uye),R=S.useState(),w=Ue(R,2),I=w[0],O=w[1],x=S.useRef(),P=S.createElement(lye,{container:I,ref:x,prefixCls:c,motion:s,maxCount:d,className:p,style:v,onAllRemoved:m,stack:E,renderNotifications:C}),N=S.useState([]),L=Ue(N,2),M=L[0],j=L[1],$=S.useMemo(function(){return{open:function(G){var Y=hye(b,G);(Y.key===null||Y.key===void 0)&&(Y.key="rc-notification-".concat(jH),jH+=1),j(function(q){return[].concat(_t(q),[{type:"open",config:Y}])})},close:function(G){j(function(Y){return[].concat(_t(Y),[{type:"close",key:G}])})},destroy:function(){j(function(G){return[].concat(_t(G),[{type:"destroy"}])})}}},[]);return S.useEffect(function(){O(o())}),S.useEffect(function(){x.current&&M.length&&(M.forEach(function(H){switch(H.type){case"open":x.current.open(H.config);break;case"close":x.current.close(H.key);break;case"destroy":x.current.destroy();break}}),j(function(H){return H.filter(function(G){return!M.includes(G)})}))},[M]),[$,P]}var fye={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"};const mye=fye;var gye=function(r,o){return S.createElement(ro,Je({},r,{ref:o,icon:mye}))},vye=S.forwardRef(gye);const Fb=vye,Eye=Be.createContext(void 0),qq=Eye,Dh=100,_ye=10,Yq=Dh*_ye,Xq={Modal:Dh,Drawer:Dh,Popover:Dh,Popconfirm:Dh,Tooltip:Dh,Tour:Dh},Sye={SelectLike:50,Dropdown:50,DatePicker:50,Menu:50,ImagePreview:1};function yye(e){return e in Xq}function yP(e,r){const[,o]=_a(),s=Be.useContext(qq),c=yye(e);if(r!==void 0)return[r,r];let d=s??0;return c?(d+=(s?0:o.zIndexPopupBase)+Xq[e],d=Math.min(d,o.zIndexPopupBase+Yq)):d+=Sye[e],[s===void 0?r:d,d]}function Da(){Da=function(){return r};var e,r={},o=Object.prototype,s=o.hasOwnProperty,c=Object.defineProperty||function(oe,ae,te){oe[ae]=te.value},d=typeof Symbol=="function"?Symbol:{},p=d.iterator||"@@iterator",v=d.asyncIterator||"@@asyncIterator",m=d.toStringTag||"@@toStringTag";function E(oe,ae,te){return Object.defineProperty(oe,ae,{value:te,enumerable:!0,configurable:!0,writable:!0}),oe[ae]}try{E({},"")}catch{E=function(te,de,fe){return te[de]=fe}}function C(oe,ae,te,de){var fe=ae&&ae.prototype instanceof P?ae:P,ie=Object.create(fe.prototype),le=new Q(de||[]);return c(ie,"_invoke",{value:q(oe,te,le)}),ie}function b(oe,ae,te){try{return{type:"normal",arg:oe.call(ae,te)}}catch(de){return{type:"throw",arg:de}}}r.wrap=C;var R="suspendedStart",w="suspendedYield",I="executing",O="completed",x={};function P(){}function N(){}function L(){}var M={};E(M,p,function(){return this});var j=Object.getPrototypeOf,$=j&&j(j(he([])));$&&$!==o&&s.call($,p)&&(M=$);var H=L.prototype=P.prototype=Object.create(M);function G(oe){["next","throw","return"].forEach(function(ae){E(oe,ae,function(te){return this._invoke(ae,te)})})}function Y(oe,ae){function te(fe,ie,le,ve){var ge=b(oe[fe],oe,ie);if(ge.type!=="throw"){var Te=ge.arg,we=Te.value;return we&&pn(we)=="object"&&s.call(we,"__await")?ae.resolve(we.__await).then(function(Ie){te("next",Ie,le,ve)},function(Ie){te("throw",Ie,le,ve)}):ae.resolve(we).then(function(Ie){Te.value=Ie,le(Te)},function(Ie){return te("throw",Ie,le,ve)})}ve(ge.arg)}var de;c(this,"_invoke",{value:function(ie,le){function ve(){return new ae(function(ge,Te){te(ie,le,ge,Te)})}return de=de?de.then(ve,ve):ve()}})}function q(oe,ae,te){var de=R;return function(fe,ie){if(de===I)throw Error("Generator is already running");if(de===O){if(fe==="throw")throw ie;return{value:e,done:!0}}for(te.method=fe,te.arg=ie;;){var le=te.delegate;if(le){var ve=J(le,te);if(ve){if(ve===x)continue;return ve}}if(te.method==="next")te.sent=te._sent=te.arg;else if(te.method==="throw"){if(de===R)throw de=O,te.arg;te.dispatchException(te.arg)}else te.method==="return"&&te.abrupt("return",te.arg);de=I;var ge=b(oe,ae,te);if(ge.type==="normal"){if(de=te.done?O:w,ge.arg===x)continue;return{value:ge.arg,done:te.done}}ge.type==="throw"&&(de=O,te.method="throw",te.arg=ge.arg)}}}function J(oe,ae){var te=ae.method,de=oe.iterator[te];if(de===e)return ae.delegate=null,te==="throw"&&oe.iterator.return&&(ae.method="return",ae.arg=e,J(oe,ae),ae.method==="throw")||te!=="return"&&(ae.method="throw",ae.arg=new TypeError("The iterator does not provide a '"+te+"' method")),x;var fe=b(de,oe.iterator,ae.arg);if(fe.type==="throw")return ae.method="throw",ae.arg=fe.arg,ae.delegate=null,x;var ie=fe.arg;return ie?ie.done?(ae[oe.resultName]=ie.value,ae.next=oe.nextLoc,ae.method!=="return"&&(ae.method="next",ae.arg=e),ae.delegate=null,x):ie:(ae.method="throw",ae.arg=new TypeError("iterator result is not an object"),ae.delegate=null,x)}function re(oe){var ae={tryLoc:oe[0]};1 in oe&&(ae.catchLoc=oe[1]),2 in oe&&(ae.finallyLoc=oe[2],ae.afterLoc=oe[3]),this.tryEntries.push(ae)}function Z(oe){var ae=oe.completion||{};ae.type="normal",delete ae.arg,oe.completion=ae}function Q(oe){this.tryEntries=[{tryLoc:"root"}],oe.forEach(re,this),this.reset(!0)}function he(oe){if(oe||oe===""){var ae=oe[p];if(ae)return ae.call(oe);if(typeof oe.next=="function")return oe;if(!isNaN(oe.length)){var te=-1,de=function fe(){for(;++te<oe.length;)if(s.call(oe,te))return fe.value=oe[te],fe.done=!1,fe;return fe.value=e,fe.done=!0,fe};return de.next=de}}throw new TypeError(pn(oe)+" is not iterable")}return N.prototype=L,c(H,"constructor",{value:L,configurable:!0}),c(L,"constructor",{value:N,configurable:!0}),N.displayName=E(L,m,"GeneratorFunction"),r.isGeneratorFunction=function(oe){var ae=typeof oe=="function"&&oe.constructor;return!!ae&&(ae===N||(ae.displayName||ae.name)==="GeneratorFunction")},r.mark=function(oe){return Object.setPrototypeOf?Object.setPrototypeOf(oe,L):(oe.__proto__=L,E(oe,m,"GeneratorFunction")),oe.prototype=Object.create(H),oe},r.awrap=function(oe){return{__await:oe}},G(Y.prototype),E(Y.prototype,v,function(){return this}),r.AsyncIterator=Y,r.async=function(oe,ae,te,de,fe){fe===void 0&&(fe=Promise);var ie=new Y(C(oe,ae,te,de),fe);return r.isGeneratorFunction(ae)?ie:ie.next().then(function(le){return le.done?le.value:ie.next()})},G(H),E(H,m,"Generator"),E(H,p,function(){return this}),E(H,"toString",function(){return"[object Generator]"}),r.keys=function(oe){var ae=Object(oe),te=[];for(var de in ae)te.push(de);return te.reverse(),function fe(){for(;te.length;){var ie=te.pop();if(ie in ae)return fe.value=ie,fe.done=!1,fe}return fe.done=!0,fe}},r.values=he,Q.prototype={constructor:Q,reset:function(ae){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(Z),!ae)for(var te in this)te.charAt(0)==="t"&&s.call(this,te)&&!isNaN(+te.slice(1))&&(this[te]=e)},stop:function(){this.done=!0;var ae=this.tryEntries[0].completion;if(ae.type==="throw")throw ae.arg;return this.rval},dispatchException:function(ae){if(this.done)throw ae;var te=this;function de(Te,we){return le.type="throw",le.arg=ae,te.next=Te,we&&(te.method="next",te.arg=e),!!we}for(var fe=this.tryEntries.length-1;fe>=0;--fe){var ie=this.tryEntries[fe],le=ie.completion;if(ie.tryLoc==="root")return de("end");if(ie.tryLoc<=this.prev){var ve=s.call(ie,"catchLoc"),ge=s.call(ie,"finallyLoc");if(ve&&ge){if(this.prev<ie.catchLoc)return de(ie.catchLoc,!0);if(this.prev<ie.finallyLoc)return de(ie.finallyLoc)}else if(ve){if(this.prev<ie.catchLoc)return de(ie.catchLoc,!0)}else{if(!ge)throw Error("try statement without catch or finally");if(this.prev<ie.finallyLoc)return de(ie.finallyLoc)}}}},abrupt:function(ae,te){for(var de=this.tryEntries.length-1;de>=0;--de){var fe=this.tryEntries[de];if(fe.tryLoc<=this.prev&&s.call(fe,"finallyLoc")&&this.prev<fe.finallyLoc){var ie=fe;break}}ie&&(ae==="break"||ae==="continue")&&ie.tryLoc<=te&&te<=ie.finallyLoc&&(ie=null);var le=ie?ie.completion:{};return le.type=ae,le.arg=te,ie?(this.method="next",this.next=ie.finallyLoc,x):this.complete(le)},complete:function(ae,te){if(ae.type==="throw")throw ae.arg;return ae.type==="break"||ae.type==="continue"?this.next=ae.arg:ae.type==="return"?(this.rval=this.arg=ae.arg,this.method="return",this.next="end"):ae.type==="normal"&&te&&(this.next=te),x},finish:function(ae){for(var te=this.tryEntries.length-1;te>=0;--te){var de=this.tryEntries[te];if(de.finallyLoc===ae)return this.complete(de.completion,de.afterLoc),Z(de),x}},catch:function(ae){for(var te=this.tryEntries.length-1;te>=0;--te){var de=this.tryEntries[te];if(de.tryLoc===ae){var fe=de.completion;if(fe.type==="throw"){var ie=fe.arg;Z(de)}return ie}}throw Error("illegal catch attempt")},delegateYield:function(ae,te,de){return this.delegate={iterator:he(ae),resultName:te,nextLoc:de},this.method==="next"&&(this.arg=e),x}},r}function $H(e,r,o,s,c,d,p){try{var v=e[d](p),m=v.value}catch(E){return void o(E)}v.done?r(m):Promise.resolve(m).then(s,c)}function dp(e){return function(){var r=this,o=arguments;return new Promise(function(s,c){var d=e.apply(r,o);function p(m){$H(d,s,c,p,v,"next",m)}function v(m){$H(d,s,c,p,v,"throw",m)}p(void 0)})}}var $v=_e({},F0e),Cye=$v.version,bye=$v.render,Tye=$v.unmountComponentAtNode,Ub;try{var Rye=Number((Cye||"").split(".")[0]);Rye>=18&&(Ub=$v.createRoot)}catch{}function HH(e){var r=$v.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;r&&pn(r)==="object"&&(r.usingClientEntryPoint=e)}var TC="__rc_react_root__";function wye(e,r){HH(!0);var o=r[TC]||Ub(r);HH(!1),o.render(e),r[TC]=o}function Iye(e,r){bye(e,r)}function Jq(e,r){if(Ub){wye(e,r);return}Iye(e,r)}function Aye(e){return bN.apply(this,arguments)}function bN(){return bN=dp(Da().mark(function e(r){return Da().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",Promise.resolve().then(function(){var c;(c=r[TC])===null||c===void 0||c.unmount(),delete r[TC]}));case 1:case"end":return s.stop()}},e)})),bN.apply(this,arguments)}function Oye(e){Tye(e)}function xye(e){return TN.apply(this,arguments)}function TN(){return TN=dp(Da().mark(function e(r){return Da().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(Ub===void 0){s.next=2;break}return s.abrupt("return",Aye(r));case 2:Oye(r);case 3:case"end":return s.stop()}},e)})),TN.apply(this,arguments)}const UA=()=>({height:0,opacity:0}),WH=e=>{const{scrollHeight:r}=e;return{height:r,opacity:1}},Nye=e=>({height:e?e.offsetHeight:0}),BA=(e,r)=>(r==null?void 0:r.deadline)===!0||r.propertyName==="height",Dye=function(){return{motionName:`${arguments.length>0&&arguments[0]!==void 0?arguments[0]:"ant"}-motion-collapse`,onAppearStart:UA,onEnterStart:UA,onAppearActive:WH,onEnterActive:WH,onLeaveStart:Nye,onLeaveActive:UA,onAppearEnd:BA,onEnterEnd:BA,onLeaveEnd:BA,motionDeadline:500}},Qq=(e,r,o)=>o!==void 0?o:`${e}-${r}`,RN=Dye,Bb=function(e){if(!e)return!1;if(e instanceof Element){if(e.offsetParent)return!0;if(e.getBBox){var r=e.getBBox(),o=r.width,s=r.height;if(o||s)return!0}if(e.getBoundingClientRect){var c=e.getBoundingClientRect(),d=c.width,p=c.height;if(d||p)return!0}}return!1},Pye=e=>{const{componentCls:r,colorPrimary:o}=e;return{[r]:{position:"absolute",background:"transparent",pointerEvents:"none",boxSizing:"border-box",color:`var(--wave-color, ${o})`,boxShadow:"0 0 0 0 currentcolor",opacity:.2,"&.wave-motion-appear":{transition:[`box-shadow 0.4s ${e.motionEaseOutCirc}`,`opacity 2s ${e.motionEaseOutCirc}`].join(","),"&-active":{boxShadow:"0 0 0 6px currentcolor",opacity:0},"&.wave-quick":{transition:[`box-shadow ${e.motionDurationSlow} ${e.motionEaseInOut}`,`opacity ${e.motionDurationSlow} ${e.motionEaseInOut}`].join(",")}}}}},Lye=EP("Wave",e=>[Pye(e)]),Zq="ant-wave-target";function kye(e){const r=(e||"").match(/rgba?\((\d*), (\d*), (\d*)(, [\d.]*)?\)/);return r&&r[1]&&r[2]&&r[3]?!(r[1]===r[2]&&r[2]===r[3]):!0}function VA(e){return e&&e!=="#fff"&&e!=="#ffffff"&&e!=="rgb(255, 255, 255)"&&e!=="rgba(255, 255, 255, 1)"&&kye(e)&&!/rgba\((?:\d*, ){3}0\)/.test(e)&&e!=="transparent"}function Mye(e){const{borderTopColor:r,borderColor:o,backgroundColor:s}=getComputedStyle(e);return VA(r)?r:VA(o)?o:VA(s)?s:null}function jA(e){return Number.isNaN(e)?0:e}const Fye=e=>{const{className:r,target:o,component:s}=e,c=S.useRef(null),[d,p]=S.useState(null),[v,m]=S.useState([]),[E,C]=S.useState(0),[b,R]=S.useState(0),[w,I]=S.useState(0),[O,x]=S.useState(0),[P,N]=S.useState(!1),L={left:E,top:b,width:w,height:O,borderRadius:v.map($=>`${$}px`).join(" ")};d&&(L["--wave-color"]=d);function M(){const $=getComputedStyle(o);p(Mye(o));const H=$.position==="static",{borderLeftWidth:G,borderTopWidth:Y}=$;C(H?o.offsetLeft:jA(-parseFloat(G))),R(H?o.offsetTop:jA(-parseFloat(Y))),I(o.offsetWidth),x(o.offsetHeight);const{borderTopLeftRadius:q,borderTopRightRadius:J,borderBottomLeftRadius:re,borderBottomRightRadius:Z}=$;m([q,J,Z,re].map(Q=>jA(parseFloat(Q))))}if(S.useEffect(()=>{if(o){const $=ci(()=>{M(),N(!0)});let H;return typeof ResizeObserver<"u"&&(H=new ResizeObserver(M),H.observe(o)),()=>{ci.cancel($),H==null||H.disconnect()}}},[]),!P)return null;const j=(s==="Checkbox"||s==="Radio")&&(o==null?void 0:o.classList.contains(Zq));return S.createElement(lp,{visible:!0,motionAppear:!0,motionName:"wave-motion",motionDeadline:5e3,onAppearEnd:($,H)=>{var G;if(H.deadline||H.propertyName==="opacity"){const Y=(G=c.current)===null||G===void 0?void 0:G.parentElement;xye(Y).then(()=>{Y==null||Y.remove()})}return!1}},($,H)=>{let{className:G}=$;return S.createElement("div",{ref:vc(c,H),className:He(r,{"wave-quick":j},G),style:L})})},Uye=(e,r)=>{var o;const{component:s}=r;if(s==="Checkbox"&&!(!((o=e.querySelector("input"))===null||o===void 0)&&o.checked))return;const c=document.createElement("div");c.style.position="absolute",c.style.left="0px",c.style.top="0px",e==null||e.insertBefore(c,e==null?void 0:e.firstChild),Jq(S.createElement(Fye,Object.assign({},r,{target:e})),c)},Bye=Uye,Vye=(e,r,o)=>{const{wave:s}=S.useContext(Qn),[,c,d]=_a(),p=Fo(E=>{const C=e.current;if(s!=null&&s.disabled||!C)return;const b=C.querySelector(`.${Zq}`)||C,{showEffect:R}=s||{};(R||Bye)(b,{className:r,token:c,component:o,event:E,hashId:d})}),v=S.useRef();return E=>{ci.cancel(v.current),v.current=ci(()=>{p(E)})}},jye=Vye,$ye=e=>{const{children:r,disabled:o,component:s}=e,{getPrefixCls:c}=S.useContext(Qn),d=S.useRef(null),p=c("wave"),[,v]=Lye(p),m=jye(d,He(p,v),s);if(Be.useEffect(()=>{const C=d.current;if(!C||C.nodeType!==1||o)return;const b=R=>{!Bb(R.target)||!C.getAttribute||C.getAttribute("disabled")||C.disabled||C.className.includes("disabled")||C.className.includes("-leave")||m(R)};return C.addEventListener("click",b,!0),()=>{C.removeEventListener("click",b,!0)}},[o]),!Be.isValidElement(r))return r??null;const E=xm(r)?vc(r.ref,d):d;return fc(r,{ref:E})},Hye=$ye,Wye=e=>{const r=Be.useContext(jv);return Be.useMemo(()=>e?typeof e=="string"?e??r:e instanceof Function?e(r):r:r,[e,r])},Cu=Wye;globalThis&&globalThis.__rest;const eY=S.createContext(null),Vb=(e,r)=>{const o=S.useContext(eY),s=S.useMemo(()=>{if(!o)return"";const{compactDirection:c,isFirstItem:d,isLastItem:p}=o,v=c==="vertical"?"-vertical-":"-";return He(`${e}-compact${v}item`,{[`${e}-compact${v}first-item`]:d,[`${e}-compact${v}last-item`]:p,[`${e}-compact${v}item-rtl`]:r==="rtl"})},[e,r,o]);return{compactSize:o==null?void 0:o.compactSize,compactDirection:o==null?void 0:o.compactDirection,compactItemClassnames:s}},tY=e=>{let{children:r}=e;return S.createElement(eY.Provider,{value:null},r)};var zye=globalThis&&globalThis.__rest||function(e,r){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};const nY=S.createContext(void 0),Gye=e=>{const{getPrefixCls:r,direction:o}=S.useContext(Qn),{prefixCls:s,size:c,className:d}=e,p=zye(e,["prefixCls","size","className"]),v=r("btn-group",s),[,,m]=_a();let E="";switch(c){case"large":E="lg";break;case"small":E="sm";break}const C=He(v,{[`${v}-${E}`]:E,[`${v}-rtl`]:o==="rtl"},d,m);return S.createElement(nY.Provider,{value:c},S.createElement("div",Object.assign({},p,{className:C})))},Kye=Gye,zH=/^[\u4e00-\u9fa5]{2}$/,wN=zH.test.bind(zH);function GH(e){return typeof e=="string"}function $A(e){return e==="text"||e==="link"}function qye(e,r){if(e==null)return;const o=r?" ":"";return typeof e!="string"&&typeof e!="number"&&GH(e.type)&&wN(e.props.children)?fc(e,{children:e.props.children.split("").join(o)}):GH(e)?wN(e)?Be.createElement("span",null,e.split("").join(o)):Be.createElement("span",null,e):zq(e)?Be.createElement("span",null,e):e}function Yye(e,r){let o=!1;const s=[];return Be.Children.forEach(e,c=>{const d=typeof c,p=d==="string"||d==="number";if(o&&p){const v=s.length-1,m=s[v];s[v]=`${m}${c}`}else s.push(c);o=p}),Be.Children.map(s,c=>qye(c,r))}const Xye=S.forwardRef((e,r)=>{const{className:o,style:s,children:c,prefixCls:d}=e,p=He(`${d}-icon`,o);return Be.createElement("span",{ref:r,className:p,style:s},c)}),rY=Xye,KH=S.forwardRef((e,r)=>{const{prefixCls:o,className:s,style:c,iconClassName:d}=e,p=He(`${o}-loading-icon`,s);return Be.createElement(rY,{prefixCls:o,className:p,style:c,ref:r},Be.createElement(Fb,{className:d}))}),HA=()=>({width:0,opacity:0,transform:"scale(0)"}),WA=e=>({width:e.scrollWidth,opacity:1,transform:"scale(1)"}),Jye=e=>{const{prefixCls:r,loading:o,existIcon:s,className:c,style:d}=e,p=!!o;return s?Be.createElement(KH,{prefixCls:r,className:c,style:d}):Be.createElement(lp,{visible:p,motionName:`${r}-loading-icon-motion`,motionLeave:p,removeOnLeave:!0,onAppearStart:HA,onAppearActive:WA,onEnterStart:HA,onEnterActive:WA,onLeaveStart:WA,onLeaveActive:HA},(v,m)=>{let{className:E,style:C}=v;return Be.createElement(KH,{prefixCls:r,className:c,style:Object.assign(Object.assign({},d),C),ref:m,iconClassName:E})})},Qye=Jye,qH=(e,r)=>({[`> span, > ${e}`]:{"&:not(:last-child)":{[`&, & > ${e}`]:{"&:not(:disabled)":{borderInlineEndColor:r}}},"&:not(:first-child)":{[`&, & > ${e}`]:{"&:not(:disabled)":{borderInlineStartColor:r}}}}}),Zye=e=>{const{componentCls:r,fontSize:o,lineWidth:s,groupBorderColor:c,colorErrorHover:d}=e;return{[`${r}-group`]:[{position:"relative",display:"inline-flex",[`> span, > ${r}`]:{"&:not(:last-child)":{[`&, & > ${r}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},"&:not(:first-child)":{marginInlineStart:e.calc(s).mul(-1).equal(),[`&, & > ${r}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}},[r]:{position:"relative",zIndex:1,"&:hover,\n          &:focus,\n          &:active":{zIndex:2},"&[disabled]":{zIndex:0}},[`${r}-icon-only`]:{fontSize:o}},qH(`${r}-primary`,c),qH(`${r}-danger`,d)]}},eCe=Zye,iY=e=>{const{paddingInline:r,onlyIconSize:o,paddingBlock:s}=e;return gi(e,{buttonPaddingHorizontal:r,buttonPaddingVertical:s,buttonIconOnlyFontSize:o})},oY=e=>{var r,o,s,c,d,p;const v=(r=e.contentFontSize)!==null&&r!==void 0?r:e.fontSize,m=(o=e.contentFontSizeSM)!==null&&o!==void 0?o:e.fontSize,E=(s=e.contentFontSizeLG)!==null&&s!==void 0?s:e.fontSizeLG,C=(c=e.contentLineHeight)!==null&&c!==void 0?c:My(v),b=(d=e.contentLineHeightSM)!==null&&d!==void 0?d:My(m),R=(p=e.contentLineHeightLG)!==null&&p!==void 0?p:My(E);return{fontWeight:400,defaultShadow:`0 ${e.controlOutlineWidth}px 0 ${e.controlTmpOutline}`,primaryShadow:`0 ${e.controlOutlineWidth}px 0 ${e.controlOutline}`,dangerShadow:`0 ${e.controlOutlineWidth}px 0 ${e.colorErrorOutline}`,primaryColor:e.colorTextLightSolid,dangerColor:e.colorTextLightSolid,borderColorDisabled:e.colorBorder,defaultGhostColor:e.colorBgContainer,ghostBg:"transparent",defaultGhostBorderColor:e.colorBgContainer,paddingInline:e.paddingContentHorizontal-e.lineWidth,paddingInlineLG:e.paddingContentHorizontal-e.lineWidth,paddingInlineSM:8-e.lineWidth,onlyIconSize:e.fontSizeLG,onlyIconSizeSM:e.fontSizeLG-2,onlyIconSizeLG:e.fontSizeLG+2,groupBorderColor:e.colorPrimaryHover,linkHoverBg:"transparent",textHoverBg:e.colorBgTextHover,defaultColor:e.colorText,defaultBg:e.colorBgContainer,defaultBorderColor:e.colorBorder,defaultBorderColorDisabled:e.colorBorder,defaultHoverBg:e.colorBgContainer,defaultHoverColor:e.colorPrimaryHover,defaultHoverBorderColor:e.colorPrimaryHover,defaultActiveBg:e.colorBgContainer,defaultActiveColor:e.colorPrimaryActive,defaultActiveBorderColor:e.colorPrimaryActive,contentFontSize:v,contentFontSizeSM:m,contentFontSizeLG:E,contentLineHeight:C,contentLineHeightSM:b,contentLineHeightLG:R,paddingBlock:Math.max((e.controlHeight-v*C)/2-e.lineWidth,0),paddingBlockSM:Math.max((e.controlHeightSM-m*b)/2-e.lineWidth,0),paddingBlockLG:Math.max((e.controlHeightLG-E*R)/2-e.lineWidth,0)}},tCe=e=>{const{componentCls:r,iconCls:o,fontWeight:s}=e;return{[r]:{outline:"none",position:"relative",display:"inline-flex",gap:e.marginXS,alignItems:"center",justifyContent:"center",fontWeight:s,whiteSpace:"nowrap",textAlign:"center",backgroundImage:"none",background:"transparent",border:`${qe(e.lineWidth)} ${e.lineType} transparent`,cursor:"pointer",transition:`all ${e.motionDurationMid} ${e.motionEaseInOut}`,userSelect:"none",touchAction:"manipulation",color:e.colorText,"&:disabled > *":{pointerEvents:"none"},"> span":{display:"inline-block"},[`${r}-icon`]:{lineHeight:1},"> a":{color:"currentColor"},"&:not(:disabled)":Object.assign({},vP(e)),[`&${r}-two-chinese-chars::first-letter`]:{letterSpacing:"0.34em"},[`&${r}-two-chinese-chars > *:not(${o})`]:{marginInlineEnd:"-0.34em",letterSpacing:"0.34em"},"&-icon-end":{flexDirection:"row-reverse"}}}},gu=(e,r,o)=>({[`&:not(:disabled):not(${e}-disabled)`]:{"&:hover":r,"&:active":o}}),nCe=e=>({minWidth:e.controlHeight,paddingInlineStart:0,paddingInlineEnd:0,borderRadius:"50%"}),rCe=e=>({borderRadius:e.controlHeight,paddingInlineStart:e.calc(e.controlHeight).div(2).equal(),paddingInlineEnd:e.calc(e.controlHeight).div(2).equal()}),iCe=e=>({cursor:"not-allowed",borderColor:e.borderColorDisabled,color:e.colorTextDisabled,background:e.colorBgContainerDisabled,boxShadow:"none"}),Tv=(e,r,o,s,c,d,p,v)=>({[`&${e}-background-ghost`]:Object.assign(Object.assign({color:o||void 0,background:r,borderColor:s||void 0,boxShadow:"none"},gu(e,Object.assign({background:r},p),Object.assign({background:r},v))),{"&:disabled":{cursor:"not-allowed",color:c||void 0,borderColor:d||void 0}})}),CP=e=>({[`&:disabled, &${e.componentCls}-disabled`]:Object.assign({},iCe(e))}),aY=e=>Object.assign({},CP(e)),RC=e=>({[`&:disabled, &${e.componentCls}-disabled`]:{cursor:"not-allowed",color:e.colorTextDisabled}}),sY=e=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},aY(e)),{background:e.defaultBg,borderColor:e.defaultBorderColor,color:e.defaultColor,boxShadow:e.defaultShadow}),gu(e.componentCls,{color:e.defaultHoverColor,borderColor:e.defaultHoverBorderColor,background:e.defaultHoverBg},{color:e.defaultActiveColor,borderColor:e.defaultActiveBorderColor,background:e.defaultActiveBg})),Tv(e.componentCls,e.ghostBg,e.defaultGhostColor,e.defaultGhostBorderColor,e.colorTextDisabled,e.colorBorder)),{[`&${e.componentCls}-dangerous`]:Object.assign(Object.assign(Object.assign({color:e.colorError,borderColor:e.colorError},gu(e.componentCls,{color:e.colorErrorHover,borderColor:e.colorErrorBorderHover},{color:e.colorErrorActive,borderColor:e.colorErrorActive})),Tv(e.componentCls,e.ghostBg,e.colorError,e.colorError,e.colorTextDisabled,e.colorBorder)),CP(e))}),oCe=e=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},aY(e)),{color:e.primaryColor,background:e.colorPrimary,boxShadow:e.primaryShadow}),gu(e.componentCls,{color:e.colorTextLightSolid,background:e.colorPrimaryHover},{color:e.colorTextLightSolid,background:e.colorPrimaryActive})),Tv(e.componentCls,e.ghostBg,e.colorPrimary,e.colorPrimary,e.colorTextDisabled,e.colorBorder,{color:e.colorPrimaryHover,borderColor:e.colorPrimaryHover},{color:e.colorPrimaryActive,borderColor:e.colorPrimaryActive})),{[`&${e.componentCls}-dangerous`]:Object.assign(Object.assign(Object.assign({background:e.colorError,boxShadow:e.dangerShadow,color:e.dangerColor},gu(e.componentCls,{background:e.colorErrorHover},{background:e.colorErrorActive})),Tv(e.componentCls,e.ghostBg,e.colorError,e.colorError,e.colorTextDisabled,e.colorBorder,{color:e.colorErrorHover,borderColor:e.colorErrorHover},{color:e.colorErrorActive,borderColor:e.colorErrorActive})),CP(e))}),aCe=e=>Object.assign(Object.assign({},sY(e)),{borderStyle:"dashed"}),sCe=e=>Object.assign(Object.assign(Object.assign({color:e.colorLink},gu(e.componentCls,{color:e.colorLinkHover,background:e.linkHoverBg},{color:e.colorLinkActive})),RC(e)),{[`&${e.componentCls}-dangerous`]:Object.assign(Object.assign({color:e.colorError},gu(e.componentCls,{color:e.colorErrorHover},{color:e.colorErrorActive})),RC(e))}),cCe=e=>Object.assign(Object.assign(Object.assign({},gu(e.componentCls,{color:e.colorText,background:e.textHoverBg},{color:e.colorText,background:e.colorBgTextActive})),RC(e)),{[`&${e.componentCls}-dangerous`]:Object.assign(Object.assign({color:e.colorError},RC(e)),gu(e.componentCls,{color:e.colorErrorHover,background:e.colorErrorBg},{color:e.colorErrorHover,background:e.colorErrorBgActive}))}),lCe=e=>{const{componentCls:r}=e;return{[`${r}-default`]:sY(e),[`${r}-primary`]:oCe(e),[`${r}-dashed`]:aCe(e),[`${r}-link`]:sCe(e),[`${r}-text`]:cCe(e),[`${r}-ghost`]:Tv(e.componentCls,e.ghostBg,e.colorBgContainer,e.colorBgContainer,e.colorTextDisabled,e.colorBorder)}},bP=function(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const{componentCls:o,controlHeight:s,fontSize:c,lineHeight:d,borderRadius:p,buttonPaddingHorizontal:v,iconCls:m,buttonPaddingVertical:E}=e,C=`${o}-icon-only`;return[{[`${r}`]:{fontSize:c,lineHeight:d,height:s,padding:`${qe(E)} ${qe(v)}`,borderRadius:p,[`&${C}`]:{width:s,paddingInline:0,[`&${o}-compact-item`]:{flex:"none"},[`&${o}-round`]:{width:"auto"},[m]:{fontSize:e.buttonIconOnlyFontSize}},[`&${o}-loading`]:{opacity:e.opacityLoading,cursor:"default"},[`${o}-loading-icon`]:{transition:`width ${e.motionDurationSlow} ${e.motionEaseInOut}, opacity ${e.motionDurationSlow} ${e.motionEaseInOut}`}}},{[`${o}${o}-circle${r}`]:nCe(e)},{[`${o}${o}-round${r}`]:rCe(e)}]},uCe=e=>{const r=gi(e,{fontSize:e.contentFontSize,lineHeight:e.contentLineHeight});return bP(r,e.componentCls)},dCe=e=>{const r=gi(e,{controlHeight:e.controlHeightSM,fontSize:e.contentFontSizeSM,lineHeight:e.contentLineHeightSM,padding:e.paddingXS,buttonPaddingHorizontal:e.paddingInlineSM,buttonPaddingVertical:e.paddingBlockSM,borderRadius:e.borderRadiusSM,buttonIconOnlyFontSize:e.onlyIconSizeSM});return bP(r,`${e.componentCls}-sm`)},hCe=e=>{const r=gi(e,{controlHeight:e.controlHeightLG,fontSize:e.contentFontSizeLG,lineHeight:e.contentLineHeightLG,buttonPaddingHorizontal:e.paddingInlineLG,buttonPaddingVertical:e.paddingBlockLG,borderRadius:e.borderRadiusLG,buttonIconOnlyFontSize:e.onlyIconSizeLG});return bP(r,`${e.componentCls}-lg`)},pCe=e=>{const{componentCls:r}=e;return{[r]:{[`&${r}-block`]:{width:"100%"}}}},fCe=ya("Button",e=>{const r=iY(e);return[tCe(r),uCe(r),dCe(r),hCe(r),pCe(r),lCe(r),eCe(r)]},oY,{unitless:{fontWeight:!0,contentLineHeight:!0,contentLineHeightSM:!0,contentLineHeightLG:!0}});function mCe(e,r,o){const{focusElCls:s,focus:c,borderElCls:d}=o,p=d?"> *":"",v=["hover",c?"focus":null,"active"].filter(Boolean).map(m=>`&:${m} ${p}`).join(",");return{[`&-item:not(${r}-last-item)`]:{marginInlineEnd:e.calc(e.lineWidth).mul(-1).equal()},"&-item":Object.assign(Object.assign({[v]:{zIndex:2}},s?{[`&${s}`]:{zIndex:2}}:{}),{[`&[disabled] ${p}`]:{zIndex:0}})}}function gCe(e,r,o){const{borderElCls:s}=o,c=s?`> ${s}`:"";return{[`&-item:not(${r}-first-item):not(${r}-last-item) ${c}`]:{borderRadius:0},[`&-item:not(${r}-last-item)${r}-first-item`]:{[`& ${c}, &${e}-sm ${c}, &${e}-lg ${c}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&-item:not(${r}-first-item)${r}-last-item`]:{[`& ${c}, &${e}-sm ${c}, &${e}-lg ${c}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}}}function TP(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{focus:!0};const{componentCls:o}=e,s=`${o}-compact`;return{[s]:Object.assign(Object.assign({},mCe(e,s,r)),gCe(o,s,r))}}function vCe(e,r){return{[`&-item:not(${r}-last-item)`]:{marginBottom:e.calc(e.lineWidth).mul(-1).equal()},"&-item":{"&:hover,&:focus,&:active":{zIndex:2},"&[disabled]":{zIndex:0}}}}function ECe(e,r){return{[`&-item:not(${r}-first-item):not(${r}-last-item)`]:{borderRadius:0},[`&-item${r}-first-item:not(${r}-last-item)`]:{[`&, &${e}-sm, &${e}-lg`]:{borderEndEndRadius:0,borderEndStartRadius:0}},[`&-item${r}-last-item:not(${r}-first-item)`]:{[`&, &${e}-sm, &${e}-lg`]:{borderStartStartRadius:0,borderStartEndRadius:0}}}}function _Ce(e){const r=`${e.componentCls}-compact-vertical`;return{[r]:Object.assign(Object.assign({},vCe(e,r)),ECe(e.componentCls,r))}}const SCe=e=>{const{componentCls:r,calc:o}=e;return{[r]:{[`&-compact-item${r}-primary`]:{[`&:not([disabled]) + ${r}-compact-item${r}-primary:not([disabled])`]:{position:"relative","&:before":{position:"absolute",top:o(e.lineWidth).mul(-1).equal(),insetInlineStart:o(e.lineWidth).mul(-1).equal(),display:"inline-block",width:e.lineWidth,height:`calc(100% + ${qe(e.lineWidth)} * 2)`,backgroundColor:e.colorPrimaryHover,content:'""'}}},"&-compact-vertical-item":{[`&${r}-primary`]:{[`&:not([disabled]) + ${r}-compact-vertical-item${r}-primary:not([disabled])`]:{position:"relative","&:before":{position:"absolute",top:o(e.lineWidth).mul(-1).equal(),insetInlineStart:o(e.lineWidth).mul(-1).equal(),display:"inline-block",width:`calc(100% + ${qe(e.lineWidth)} * 2)`,height:e.lineWidth,backgroundColor:e.colorPrimaryHover,content:'""'}}}}}}},yCe=Pb(["Button","compact"],e=>{const r=iY(e);return[TP(r),_Ce(r),SCe(r)]},oY);var CCe=globalThis&&globalThis.__rest||function(e,r){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};function bCe(e){if(typeof e=="object"&&e){let r=e==null?void 0:e.delay;return r=!Number.isNaN(r)&&typeof r=="number"?r:0,{loading:r<=0,delay:r}}return{loading:!!e,delay:0}}const TCe=Be.forwardRef((e,r)=>{var o,s,c;const{loading:d=!1,prefixCls:p,type:v,danger:m=!1,shape:E="default",size:C,styles:b,disabled:R,className:w,rootClassName:I,children:O,icon:x,iconPosition:P="start",ghost:N=!1,block:L=!1,htmlType:M="button",classNames:j,style:$={},autoInsertSpace:H}=e,G=CCe(e,["loading","prefixCls","type","danger","shape","size","styles","disabled","className","rootClassName","children","icon","iconPosition","ghost","block","htmlType","classNames","style","autoInsertSpace"]),Y=v||"default",{getPrefixCls:q,direction:J,button:re}=S.useContext(Qn),Z=(o=H??(re==null?void 0:re.autoInsertSpace))!==null&&o!==void 0?o:!0,Q=q("btn",p),[he,oe,ae]=fCe(Q),te=S.useContext(Dm),de=R??te,fe=S.useContext(nY),ie=S.useMemo(()=>bCe(d),[d]),[le,ve]=S.useState(ie.loading),[ge,Te]=S.useState(!1),Ie=vc(r,S.createRef()),Me=S.Children.count(O)===1&&!x&&!$A(Y);S.useEffect(()=>{let gt=null;ie.delay>0?gt=setTimeout(()=>{gt=null,ve(!0)},ie.delay):ve(ie.loading);function Ot(){gt&&(clearTimeout(gt),gt=null)}return Ot},[ie]),S.useEffect(()=>{if(!Ie||!Ie.current||!Z)return;const gt=Ie.current.textContent;Me&&wN(gt)?ge||Te(!0):ge&&Te(!1)},[Ie]);const Ke=gt=>{const{onClick:Ot}=e;if(le||de){gt.preventDefault();return}Ot==null||Ot(gt)},{compactSize:ke,compactItemClassnames:Ne}=Vb(Q,J),ze={large:"lg",small:"sm",middle:void 0},Qe=Cu(gt=>{var Ot,Tt;return(Tt=(Ot=C??ke)!==null&&Ot!==void 0?Ot:fe)!==null&&Tt!==void 0?Tt:gt}),De=Qe&&ze[Qe]||"",xe=le?"loading":x,ft=Sa(G,["navigate"]),Et=He(Q,oe,ae,{[`${Q}-${E}`]:E!=="default"&&E,[`${Q}-${Y}`]:Y,[`${Q}-${De}`]:De,[`${Q}-icon-only`]:!O&&O!==0&&!!xe,[`${Q}-background-ghost`]:N&&!$A(Y),[`${Q}-loading`]:le,[`${Q}-two-chinese-chars`]:ge&&Z&&!le,[`${Q}-block`]:L,[`${Q}-dangerous`]:m,[`${Q}-rtl`]:J==="rtl",[`${Q}-icon-end`]:P==="end"},Ne,w,I,re==null?void 0:re.className),st=Object.assign(Object.assign({},re==null?void 0:re.style),$),ot=He(j==null?void 0:j.icon,(s=re==null?void 0:re.classNames)===null||s===void 0?void 0:s.icon),Ze=Object.assign(Object.assign({},(b==null?void 0:b.icon)||{}),((c=re==null?void 0:re.styles)===null||c===void 0?void 0:c.icon)||{}),je=x&&!le?Be.createElement(rY,{prefixCls:Q,className:ot,style:Ze},x):Be.createElement(Qye,{existIcon:!!x,prefixCls:Q,loading:le}),ct=O||O===0?Yye(O,Me&&Z):null;if(ft.href!==void 0)return he(Be.createElement("a",Object.assign({},ft,{className:He(Et,{[`${Q}-disabled`]:de}),href:de?void 0:ft.href,style:st,onClick:Ke,ref:Ie,tabIndex:de?-1:0}),je,ct));let lt=Be.createElement("button",Object.assign({},G,{type:M,className:Et,style:st,onClick:Ke,disabled:de,ref:Ie}),je,ct,!!Ne&&Be.createElement(yCe,{key:"compact",prefixCls:Q}));return $A(Y)||(lt=Be.createElement(Hye,{component:"Button",disabled:le},lt)),he(lt)}),RP=TCe;RP.Group=Kye;RP.__ANT_BUTTON=!0;const ho=RP;var cY=S.createContext(null),YH=[];function RCe(e,r){var o=S.useState(function(){if(!Na())return null;var I=document.createElement("div");return I}),s=Ue(o,1),c=s[0],d=S.useRef(!1),p=S.useContext(cY),v=S.useState(YH),m=Ue(v,2),E=m[0],C=m[1],b=p||(d.current?void 0:function(I){C(function(O){var x=[I].concat(_t(O));return x})});function R(){c.parentElement||document.body.appendChild(c),d.current=!0}function w(){var I;(I=c.parentElement)===null||I===void 0||I.removeChild(c),d.current=!1}return kr(function(){return e?p?p(R):R():w(),w},[e]),kr(function(){E.length&&(E.forEach(function(I){return I()}),C(YH))},[E]),[c,b]}function wCe(e){var r="rc-scrollbar-measure-".concat(Math.random().toString(36).substring(7)),o=document.createElement("div");o.id=r;var s=o.style;s.position="absolute",s.left="0",s.top="0",s.width="100px",s.height="100px",s.overflow="scroll";var c,d;if(e){var p=getComputedStyle(e);s.scrollbarColor=p.scrollbarColor,s.scrollbarWidth=p.scrollbarWidth;var v=getComputedStyle(e,"::-webkit-scrollbar"),m=parseInt(v.width,10),E=parseInt(v.height,10);try{var C=m?"width: ".concat(v.width,";"):"",b=E?"height: ".concat(v.height,";"):"";uu(`
#`.concat(r,`::-webkit-scrollbar {
`).concat(C,`
`).concat(b,`
}`),r)}catch(I){console.error(I),c=m,d=E}}document.body.appendChild(o);var R=e&&c&&!isNaN(c)?c:o.offsetWidth-o.clientWidth,w=e&&d&&!isNaN(d)?d:o.offsetHeight-o.clientHeight;return document.body.removeChild(o),_v(r),{width:R,height:w}}function ICe(e){return typeof document>"u"||!e||!(e instanceof Element)?{width:0,height:0}:wCe(e)}function ACe(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth}var OCe="rc-util-locker-".concat(Date.now()),XH=0;function xCe(e){var r=!!e,o=S.useState(function(){return XH+=1,"".concat(OCe,"_").concat(XH)}),s=Ue(o,1),c=s[0];kr(function(){if(r){var d=ICe(document.body).width,p=ACe();uu(`
html body {
  overflow-y: hidden;
  `.concat(p?"width: calc(100% - ".concat(d,"px);"):"",`
}`),c)}else _v(c);return function(){_v(c)}},[r,c])}var JH=!1;function NCe(e){return typeof e=="boolean"&&(JH=e),JH}var QH=function(r){return r===!1?!1:!Na()||!r?null:typeof r=="string"?document.querySelector(r):typeof r=="function"?r():r},lY=S.forwardRef(function(e,r){var o=e.open,s=e.autoLock,c=e.getContainer;e.debug;var d=e.autoDestroy,p=d===void 0?!0:d,v=e.children,m=S.useState(o),E=Ue(m,2),C=E[0],b=E[1],R=C||o;S.useEffect(function(){(p||o)&&b(o)},[o,p]);var w=S.useState(function(){return QH(c)}),I=Ue(w,2),O=I[0],x=I[1];S.useEffect(function(){var J=QH(c);x(J??null)});var P=RCe(R&&!O),N=Ue(P,2),L=N[0],M=N[1],j=O??L;xCe(s&&o&&Na()&&(j===L||j===document.body));var $=null;if(v&&xm(v)&&r){var H=v;$=H.ref}var G=Vv($,r);if(!R||!Na()||O===void 0)return null;var Y=j===!1||NCe(),q=v;return r&&(q=S.cloneElement(v,{ref:G})),S.createElement(cY.Provider,{value:M},Y?q:kl.createPortal(q,j))});function DCe(){var e=_e({},zh);return e.useId}var ZH=0,e7=DCe();const PCe=e7?function(r){var o=e7();return r||o}:function(r){var o=S.useState("ssr-id"),s=Ue(o,2),c=s[0],d=s[1];return S.useEffect(function(){var p=ZH;ZH+=1,d("rc_unique_".concat(p))},[]),r||c};var uY=function(r){if(Na()&&window.document.documentElement){var o=Array.isArray(r)?r:[r],s=window.document.documentElement;return o.some(function(c){return c in s.style})}return!1},LCe=function(r,o){if(!uY(r))return!1;var s=document.createElement("div"),c=s.style[r];return s.style[r]=o,s.style[r]!==c};function t7(e,r){return!Array.isArray(e)&&r!==void 0?LCe(e,r):uY(e)}var Uh="RC_FORM_INTERNAL_HOOKS",si=function(){ga(!1,"Can not find FormContext. Please make sure you wrap Field under Form.")},tp=S.createContext({getFieldValue:si,getFieldsValue:si,getFieldError:si,getFieldWarning:si,getFieldsError:si,isFieldsTouched:si,isFieldTouched:si,isFieldValidating:si,isFieldsValidating:si,resetFields:si,setFields:si,setFieldValue:si,setFieldsValue:si,validateFields:si,submit:si,getInternalHooks:function(){return si(),{dispatch:si,initEntityValue:si,registerField:si,useSubscribe:si,setInitialValues:si,destroyForm:si,setCallbacks:si,registerWatch:si,getFields:si,setValidateMessages:si,setPreserve:si,getInitialValue:si}}}),Rv=S.createContext(null);function IN(e){return e==null?[]:Array.isArray(e)?e:[e]}function kCe(e){return e&&!!e._init}function AN(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var r=JSON.parse(JSON.stringify(this));return r.clone=this.clone,r}}}var ON=AN();function MCe(e){try{return Function.toString.call(e).indexOf("[native code]")!==-1}catch{return typeof e=="function"}}function FCe(e,r,o){if(Rb())return Reflect.construct.apply(null,arguments);var s=[null];s.push.apply(s,r);var c=new(e.bind.apply(e,s));return o&&vv(c,o.prototype),c}function xN(e){var r=typeof Map=="function"?new Map:void 0;return xN=function(s){if(s===null||!MCe(s))return s;if(typeof s!="function")throw new TypeError("Super expression must either be null or a function");if(r!==void 0){if(r.has(s))return r.get(s);r.set(s,c)}function c(){return FCe(s,arguments,Jh(this).constructor)}return c.prototype=Object.create(s.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),vv(c,s)},xN(e)}var UCe=/%[sdj%]/g,BCe=function(){};typeof process<"u"&&process.env;function NN(e){if(!e||!e.length)return null;var r={};return e.forEach(function(o){var s=o.field;r[s]=r[s]||[],r[s].push(o)}),r}function Ts(e){for(var r=arguments.length,o=new Array(r>1?r-1:0),s=1;s<r;s++)o[s-1]=arguments[s];var c=0,d=o.length;if(typeof e=="function")return e.apply(null,o);if(typeof e=="string"){var p=e.replace(UCe,function(v){if(v==="%%")return"%";if(c>=d)return v;switch(v){case"%s":return String(o[c++]);case"%d":return Number(o[c++]);case"%j":try{return JSON.stringify(o[c++])}catch{return"[Circular]"}break;default:return v}});return p}return e}function VCe(e){return e==="string"||e==="url"||e==="hex"||e==="email"||e==="date"||e==="pattern"}function Ro(e,r){return!!(e==null||r==="array"&&Array.isArray(e)&&!e.length||VCe(r)&&typeof e=="string"&&!e)}function jCe(e,r,o){var s=[],c=0,d=e.length;function p(v){s.push.apply(s,_t(v||[])),c++,c===d&&o(s)}e.forEach(function(v){r(v,p)})}function n7(e,r,o){var s=0,c=e.length;function d(p){if(p&&p.length){o(p);return}var v=s;s=s+1,v<c?r(e[v],d):o([])}d([])}function $Ce(e){var r=[];return Object.keys(e).forEach(function(o){r.push.apply(r,_t(e[o]||[]))}),r}var r7=function(e){Su(o,e);var r=cp(o);function o(s,c){var d;return Bo(this,o),d=r.call(this,"Async Validation Error"),ye(br(d),"errors",void 0),ye(br(d),"fields",void 0),d.errors=s,d.fields=c,d}return Vo(o)}(xN(Error));function HCe(e,r,o,s,c){if(r.first){var d=new Promise(function(R,w){var I=function(P){return s(P),P.length?w(new r7(P,NN(P))):R(c)},O=$Ce(e);n7(O,o,I)});return d.catch(function(R){return R}),d}var p=r.firstFields===!0?Object.keys(e):r.firstFields||[],v=Object.keys(e),m=v.length,E=0,C=[],b=new Promise(function(R,w){var I=function(x){if(C.push.apply(C,x),E++,E===m)return s(C),C.length?w(new r7(C,NN(C))):R(c)};v.length||(s(C),R(c)),v.forEach(function(O){var x=e[O];p.indexOf(O)!==-1?n7(x,o,I):jCe(x,o,I)})});return b.catch(function(R){return R}),b}function WCe(e){return!!(e&&e.message!==void 0)}function zCe(e,r){for(var o=e,s=0;s<r.length;s++){if(o==null)return o;o=o[r[s]]}return o}function i7(e,r){return function(o){var s;return e.fullFields?s=zCe(r,e.fullFields):s=r[o.field||e.fullField],WCe(o)?(o.field=o.field||e.fullField,o.fieldValue=s,o):{message:typeof o=="function"?o():o,fieldValue:s,field:o.field||e.fullField}}}function o7(e,r){if(r){for(var o in r)if(r.hasOwnProperty(o)){var s=r[o];pn(s)==="object"&&pn(e[o])==="object"?e[o]=_e(_e({},e[o]),s):e[o]=s}}return e}var Nf="enum",GCe=function(r,o,s,c,d){r[Nf]=Array.isArray(r[Nf])?r[Nf]:[],r[Nf].indexOf(o)===-1&&c.push(Ts(d.messages[Nf],r.fullField,r[Nf].join(", ")))},KCe=function(r,o,s,c,d){if(r.pattern){if(r.pattern instanceof RegExp)r.pattern.lastIndex=0,r.pattern.test(o)||c.push(Ts(d.messages.pattern.mismatch,r.fullField,o,r.pattern));else if(typeof r.pattern=="string"){var p=new RegExp(r.pattern);p.test(o)||c.push(Ts(d.messages.pattern.mismatch,r.fullField,o,r.pattern))}}},qCe=function(r,o,s,c,d){var p=typeof r.len=="number",v=typeof r.min=="number",m=typeof r.max=="number",E=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,C=o,b=null,R=typeof o=="number",w=typeof o=="string",I=Array.isArray(o);if(R?b="number":w?b="string":I&&(b="array"),!b)return!1;I&&(C=o.length),w&&(C=o.replace(E,"_").length),p?C!==r.len&&c.push(Ts(d.messages[b].len,r.fullField,r.len)):v&&!m&&C<r.min?c.push(Ts(d.messages[b].min,r.fullField,r.min)):m&&!v&&C>r.max?c.push(Ts(d.messages[b].max,r.fullField,r.max)):v&&m&&(C<r.min||C>r.max)&&c.push(Ts(d.messages[b].range,r.fullField,r.min,r.max))},dY=function(r,o,s,c,d,p){r.required&&(!s.hasOwnProperty(r.field)||Ro(o,p||r.type))&&c.push(Ts(d.messages.required,r.fullField))},ny;const YCe=function(){if(ny)return ny;var e="[a-fA-F\\d:]",r=function($){return $&&$.includeBoundaries?"(?:(?<=\\s|^)(?=".concat(e,")|(?<=").concat(e,")(?=\\s|$))"):""},o="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",s="[a-fA-F\\d]{1,4}",c=["(?:".concat(s,":){7}(?:").concat(s,"|:)"),"(?:".concat(s,":){6}(?:").concat(o,"|:").concat(s,"|:)"),"(?:".concat(s,":){5}(?::").concat(o,"|(?::").concat(s,"){1,2}|:)"),"(?:".concat(s,":){4}(?:(?::").concat(s,"){0,1}:").concat(o,"|(?::").concat(s,"){1,3}|:)"),"(?:".concat(s,":){3}(?:(?::").concat(s,"){0,2}:").concat(o,"|(?::").concat(s,"){1,4}|:)"),"(?:".concat(s,":){2}(?:(?::").concat(s,"){0,3}:").concat(o,"|(?::").concat(s,"){1,5}|:)"),"(?:".concat(s,":){1}(?:(?::").concat(s,"){0,4}:").concat(o,"|(?::").concat(s,"){1,6}|:)"),"(?::(?:(?::".concat(s,"){0,5}:").concat(o,"|(?::").concat(s,"){1,7}|:))")],d="(?:%[0-9a-zA-Z]{1,})?",p="(?:".concat(c.join("|"),")").concat(d),v=new RegExp("(?:^".concat(o,"$)|(?:^").concat(p,"$)")),m=new RegExp("^".concat(o,"$")),E=new RegExp("^".concat(p,"$")),C=function($){return $&&$.exact?v:new RegExp("(?:".concat(r($)).concat(o).concat(r($),")|(?:").concat(r($)).concat(p).concat(r($),")"),"g")};C.v4=function(j){return j&&j.exact?m:new RegExp("".concat(r(j)).concat(o).concat(r(j)),"g")},C.v6=function(j){return j&&j.exact?E:new RegExp("".concat(r(j)).concat(p).concat(r(j)),"g")};var b="(?:(?:[a-z]+:)?//)",R="(?:\\S+(?::\\S*)?@)?",w=C.v4().source,I=C.v6().source,O="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",x="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",P="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",N="(?::\\d{2,5})?",L='(?:[/?#][^\\s"]*)?',M="(?:".concat(b,"|www\\.)").concat(R,"(?:localhost|").concat(w,"|").concat(I,"|").concat(O).concat(x).concat(P,")").concat(N).concat(L);return ny=new RegExp("(?:^".concat(M,"$)"),"i"),ny};var a7={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},Dg={integer:function(r){return Dg.number(r)&&parseInt(r,10)===r},float:function(r){return Dg.number(r)&&!Dg.integer(r)},array:function(r){return Array.isArray(r)},regexp:function(r){if(r instanceof RegExp)return!0;try{return!!new RegExp(r)}catch{return!1}},date:function(r){return typeof r.getTime=="function"&&typeof r.getMonth=="function"&&typeof r.getYear=="function"&&!isNaN(r.getTime())},number:function(r){return isNaN(r)?!1:typeof r=="number"},object:function(r){return pn(r)==="object"&&!Dg.array(r)},method:function(r){return typeof r=="function"},email:function(r){return typeof r=="string"&&r.length<=320&&!!r.match(a7.email)},url:function(r){return typeof r=="string"&&r.length<=2048&&!!r.match(YCe())},hex:function(r){return typeof r=="string"&&!!r.match(a7.hex)}},XCe=function(r,o,s,c,d){if(r.required&&o===void 0){dY(r,o,s,c,d);return}var p=["integer","float","array","regexp","object","method","email","number","date","url","hex"],v=r.type;p.indexOf(v)>-1?Dg[v](o)||c.push(Ts(d.messages.types[v],r.fullField,r.type)):v&&pn(o)!==r.type&&c.push(Ts(d.messages.types[v],r.fullField,r.type))},JCe=function(r,o,s,c,d){(/^\s+$/.test(o)||o==="")&&c.push(Ts(d.messages.whitespace,r.fullField))};const gr={required:dY,whitespace:JCe,type:XCe,range:qCe,enum:GCe,pattern:KCe};var QCe=function(r,o,s,c,d){var p=[],v=r.required||!r.required&&c.hasOwnProperty(r.field);if(v){if(Ro(o)&&!r.required)return s();gr.required(r,o,c,p,d)}s(p)},ZCe=function(r,o,s,c,d){var p=[],v=r.required||!r.required&&c.hasOwnProperty(r.field);if(v){if(o==null&&!r.required)return s();gr.required(r,o,c,p,d,"array"),o!=null&&(gr.type(r,o,c,p,d),gr.range(r,o,c,p,d))}s(p)},ebe=function(r,o,s,c,d){var p=[],v=r.required||!r.required&&c.hasOwnProperty(r.field);if(v){if(Ro(o)&&!r.required)return s();gr.required(r,o,c,p,d),o!==void 0&&gr.type(r,o,c,p,d)}s(p)},tbe=function(r,o,s,c,d){var p=[],v=r.required||!r.required&&c.hasOwnProperty(r.field);if(v){if(Ro(o,"date")&&!r.required)return s();if(gr.required(r,o,c,p,d),!Ro(o,"date")){var m;o instanceof Date?m=o:m=new Date(o),gr.type(r,m,c,p,d),m&&gr.range(r,m.getTime(),c,p,d)}}s(p)},nbe="enum",rbe=function(r,o,s,c,d){var p=[],v=r.required||!r.required&&c.hasOwnProperty(r.field);if(v){if(Ro(o)&&!r.required)return s();gr.required(r,o,c,p,d),o!==void 0&&gr[nbe](r,o,c,p,d)}s(p)},ibe=function(r,o,s,c,d){var p=[],v=r.required||!r.required&&c.hasOwnProperty(r.field);if(v){if(Ro(o)&&!r.required)return s();gr.required(r,o,c,p,d),o!==void 0&&(gr.type(r,o,c,p,d),gr.range(r,o,c,p,d))}s(p)},obe=function(r,o,s,c,d){var p=[],v=r.required||!r.required&&c.hasOwnProperty(r.field);if(v){if(Ro(o)&&!r.required)return s();gr.required(r,o,c,p,d),o!==void 0&&(gr.type(r,o,c,p,d),gr.range(r,o,c,p,d))}s(p)},abe=function(r,o,s,c,d){var p=[],v=r.required||!r.required&&c.hasOwnProperty(r.field);if(v){if(Ro(o)&&!r.required)return s();gr.required(r,o,c,p,d),o!==void 0&&gr.type(r,o,c,p,d)}s(p)},sbe=function(r,o,s,c,d){var p=[],v=r.required||!r.required&&c.hasOwnProperty(r.field);if(v){if(o===""&&(o=void 0),Ro(o)&&!r.required)return s();gr.required(r,o,c,p,d),o!==void 0&&(gr.type(r,o,c,p,d),gr.range(r,o,c,p,d))}s(p)},cbe=function(r,o,s,c,d){var p=[],v=r.required||!r.required&&c.hasOwnProperty(r.field);if(v){if(Ro(o)&&!r.required)return s();gr.required(r,o,c,p,d),o!==void 0&&gr.type(r,o,c,p,d)}s(p)},lbe=function(r,o,s,c,d){var p=[],v=r.required||!r.required&&c.hasOwnProperty(r.field);if(v){if(Ro(o,"string")&&!r.required)return s();gr.required(r,o,c,p,d),Ro(o,"string")||gr.pattern(r,o,c,p,d)}s(p)},ube=function(r,o,s,c,d){var p=[],v=r.required||!r.required&&c.hasOwnProperty(r.field);if(v){if(Ro(o)&&!r.required)return s();gr.required(r,o,c,p,d),Ro(o)||gr.type(r,o,c,p,d)}s(p)},dbe=function(r,o,s,c,d){var p=[],v=Array.isArray(o)?"array":pn(o);gr.required(r,o,c,p,d,v),s(p)},hbe=function(r,o,s,c,d){var p=[],v=r.required||!r.required&&c.hasOwnProperty(r.field);if(v){if(Ro(o,"string")&&!r.required)return s();gr.required(r,o,c,p,d,"string"),Ro(o,"string")||(gr.type(r,o,c,p,d),gr.range(r,o,c,p,d),gr.pattern(r,o,c,p,d),r.whitespace===!0&&gr.whitespace(r,o,c,p,d))}s(p)},zA=function(r,o,s,c,d){var p=r.type,v=[],m=r.required||!r.required&&c.hasOwnProperty(r.field);if(m){if(Ro(o,p)&&!r.required)return s();gr.required(r,o,c,v,d,p),Ro(o,p)||gr.type(r,o,c,v,d)}s(v)};const Kg={string:hbe,method:abe,number:sbe,boolean:ebe,regexp:ube,integer:obe,float:ibe,array:ZCe,object:cbe,enum:rbe,pattern:lbe,date:tbe,url:zA,hex:zA,email:zA,required:dbe,any:QCe};var Hv=function(){function e(r){Bo(this,e),ye(this,"rules",null),ye(this,"_messages",ON),this.define(r)}return Vo(e,[{key:"define",value:function(o){var s=this;if(!o)throw new Error("Cannot configure a schema with no rules");if(pn(o)!=="object"||Array.isArray(o))throw new Error("Rules must be an object");this.rules={},Object.keys(o).forEach(function(c){var d=o[c];s.rules[c]=Array.isArray(d)?d:[d]})}},{key:"messages",value:function(o){return o&&(this._messages=o7(AN(),o)),this._messages}},{key:"validate",value:function(o){var s=this,c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){},p=o,v=c,m=d;if(typeof v=="function"&&(m=v,v={}),!this.rules||Object.keys(this.rules).length===0)return m&&m(null,p),Promise.resolve(p);function E(I){var O=[],x={};function P(L){if(Array.isArray(L)){var M;O=(M=O).concat.apply(M,_t(L))}else O.push(L)}for(var N=0;N<I.length;N++)P(I[N]);O.length?(x=NN(O),m(O,x)):m(null,p)}if(v.messages){var C=this.messages();C===ON&&(C=AN()),o7(C,v.messages),v.messages=C}else v.messages=this.messages();var b={},R=v.keys||Object.keys(this.rules);R.forEach(function(I){var O=s.rules[I],x=p[I];O.forEach(function(P){var N=P;typeof N.transform=="function"&&(p===o&&(p=_e({},p)),x=p[I]=N.transform(x),x!=null&&(N.type=N.type||(Array.isArray(x)?"array":pn(x)))),typeof N=="function"?N={validator:N}:N=_e({},N),N.validator=s.getValidationMethod(N),N.validator&&(N.field=I,N.fullField=N.fullField||I,N.type=s.getType(N),b[I]=b[I]||[],b[I].push({rule:N,value:x,source:p,field:I}))})});var w={};return HCe(b,v,function(I,O){var x=I.rule,P=(x.type==="object"||x.type==="array")&&(pn(x.fields)==="object"||pn(x.defaultField)==="object");P=P&&(x.required||!x.required&&I.value),x.field=I.field;function N(H,G){return _e(_e({},G),{},{fullField:"".concat(x.fullField,".").concat(H),fullFields:x.fullFields?[].concat(_t(x.fullFields),[H]):[H]})}function L(){var H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],G=Array.isArray(H)?H:[H];!v.suppressWarning&&G.length&&e.warning("async-validator:",G),G.length&&x.message!==void 0&&(G=[].concat(x.message));var Y=G.map(i7(x,p));if(v.first&&Y.length)return w[x.field]=1,O(Y);if(!P)O(Y);else{if(x.required&&!I.value)return x.message!==void 0?Y=[].concat(x.message).map(i7(x,p)):v.error&&(Y=[v.error(x,Ts(v.messages.required,x.field))]),O(Y);var q={};x.defaultField&&Object.keys(I.value).map(function(Z){q[Z]=x.defaultField}),q=_e(_e({},q),I.rule.fields);var J={};Object.keys(q).forEach(function(Z){var Q=q[Z],he=Array.isArray(Q)?Q:[Q];J[Z]=he.map(N.bind(null,Z))});var re=new e(J);re.messages(v.messages),I.rule.options&&(I.rule.options.messages=v.messages,I.rule.options.error=v.error),re.validate(I.value,I.rule.options||v,function(Z){var Q=[];Y&&Y.length&&Q.push.apply(Q,_t(Y)),Z&&Z.length&&Q.push.apply(Q,_t(Z)),O(Q.length?Q:null)})}}var M;if(x.asyncValidator)M=x.asyncValidator(x,I.value,L,I.source,v);else if(x.validator){try{M=x.validator(x,I.value,L,I.source,v)}catch(H){var j,$;(j=($=console).error)===null||j===void 0||j.call($,H),v.suppressValidatorError||setTimeout(function(){throw H},0),L(H.message)}M===!0?L():M===!1?L(typeof x.message=="function"?x.message(x.fullField||x.field):x.message||"".concat(x.fullField||x.field," fails")):M instanceof Array?L(M):M instanceof Error&&L(M.message)}M&&M.then&&M.then(function(){return L()},function(H){return L(H)})},function(I){E(I)},p)}},{key:"getType",value:function(o){if(o.type===void 0&&o.pattern instanceof RegExp&&(o.type="pattern"),typeof o.validator!="function"&&o.type&&!Kg.hasOwnProperty(o.type))throw new Error(Ts("Unknown rule type %s",o.type));return o.type||"string"}},{key:"getValidationMethod",value:function(o){if(typeof o.validator=="function")return o.validator;var s=Object.keys(o),c=s.indexOf("message");return c!==-1&&s.splice(c,1),s.length===1&&s[0]==="required"?Kg.required:Kg[this.getType(o)]||void 0}}]),e}();ye(Hv,"register",function(r,o){if(typeof o!="function")throw new Error("Cannot register a validator by type, validator is not a function");Kg[r]=o});ye(Hv,"warning",BCe);ye(Hv,"messages",ON);ye(Hv,"validators",Kg);var Ss="'${name}' is not a valid ${type}",hY={default:"Validation error on field '${name}'",required:"'${name}' is required",enum:"'${name}' must be one of [${enum}]",whitespace:"'${name}' cannot be empty",date:{format:"'${name}' is invalid for format date",parse:"'${name}' could not be parsed as date",invalid:"'${name}' is invalid date"},types:{string:Ss,method:Ss,array:Ss,object:Ss,number:Ss,date:Ss,boolean:Ss,integer:Ss,float:Ss,regexp:Ss,email:Ss,url:Ss,hex:Ss},string:{len:"'${name}' must be exactly ${len} characters",min:"'${name}' must be at least ${min} characters",max:"'${name}' cannot be longer than ${max} characters",range:"'${name}' must be between ${min} and ${max} characters"},number:{len:"'${name}' must equal ${len}",min:"'${name}' cannot be less than ${min}",max:"'${name}' cannot be greater than ${max}",range:"'${name}' must be between ${min} and ${max}"},array:{len:"'${name}' must be exactly ${len} in length",min:"'${name}' cannot be less than ${min} in length",max:"'${name}' cannot be greater than ${max} in length",range:"'${name}' must be between ${min} and ${max} in length"},pattern:{mismatch:"'${name}' does not match pattern ${pattern}"}},s7=Hv;function pbe(e,r){return e.replace(/\$\{\w+\}/g,function(o){var s=o.slice(2,-1);return r[s]})}var c7="CODE_LOGIC_ERROR";function DN(e,r,o,s,c){return PN.apply(this,arguments)}function PN(){return PN=dp(Da().mark(function e(r,o,s,c,d){var p,v,m,E,C,b,R,w,I;return Da().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return p=_e({},s),delete p.ruleIndex,s7.warning=function(){},p.validator&&(v=p.validator,p.validator=function(){try{return v.apply(void 0,arguments)}catch(P){return console.error(P),Promise.reject(c7)}}),m=null,p&&p.type==="array"&&p.defaultField&&(m=p.defaultField,delete p.defaultField),E=new s7(ye({},r,[p])),C=Qf(hY,c.validateMessages),E.messages(C),b=[],x.prev=10,x.next=13,Promise.resolve(E.validate(ye({},r,o),_e({},c)));case 13:x.next=18;break;case 15:x.prev=15,x.t0=x.catch(10),x.t0.errors&&(b=x.t0.errors.map(function(P,N){var L=P.message,M=L===c7?C.default:L;return S.isValidElement(M)?S.cloneElement(M,{key:"error_".concat(N)}):M}));case 18:if(!(!b.length&&m)){x.next=23;break}return x.next=21,Promise.all(o.map(function(P,N){return DN("".concat(r,".").concat(N),P,m,c,d)}));case 21:return R=x.sent,x.abrupt("return",R.reduce(function(P,N){return[].concat(_t(P),_t(N))},[]));case 23:return w=_e(_e({},s),{},{name:r,enum:(s.enum||[]).join(", ")},d),I=b.map(function(P){return typeof P=="string"?pbe(P,w):P}),x.abrupt("return",I);case 26:case"end":return x.stop()}},e,null,[[10,15]])})),PN.apply(this,arguments)}function fbe(e,r,o,s,c,d){var p=e.join("."),v=o.map(function(C,b){var R=C.validator,w=_e(_e({},C),{},{ruleIndex:b});return R&&(w.validator=function(I,O,x){var P=!1,N=function(){for(var j=arguments.length,$=new Array(j),H=0;H<j;H++)$[H]=arguments[H];Promise.resolve().then(function(){ga(!P,"Your validator function has already return a promise. `callback` will be ignored."),P||x.apply(void 0,$)})},L=R(I,O,N);P=L&&typeof L.then=="function"&&typeof L.catch=="function",ga(P,"`callback` is deprecated. Please return a promise instead."),P&&L.then(function(){x()}).catch(function(M){x(M||" ")})}),w}).sort(function(C,b){var R=C.warningOnly,w=C.ruleIndex,I=b.warningOnly,O=b.ruleIndex;return!!R==!!I?w-O:R?1:-1}),m;if(c===!0)m=new Promise(function(){var C=dp(Da().mark(function b(R,w){var I,O,x;return Da().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:I=0;case 1:if(!(I<v.length)){N.next=12;break}return O=v[I],N.next=5,DN(p,r,O,s,d);case 5:if(x=N.sent,!x.length){N.next=9;break}return w([{errors:x,rule:O}]),N.abrupt("return");case 9:I+=1,N.next=1;break;case 12:R([]);case 13:case"end":return N.stop()}},b)}));return function(b,R){return C.apply(this,arguments)}}());else{var E=v.map(function(C){return DN(p,r,C,s,d).then(function(b){return{errors:b,rule:C}})});m=(c?gbe(E):mbe(E)).then(function(C){return Promise.reject(C)})}return m.catch(function(C){return C}),m}function mbe(e){return LN.apply(this,arguments)}function LN(){return LN=dp(Da().mark(function e(r){return Da().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",Promise.all(r).then(function(c){var d,p=(d=[]).concat.apply(d,_t(c));return p}));case 1:case"end":return s.stop()}},e)})),LN.apply(this,arguments)}function gbe(e){return kN.apply(this,arguments)}function kN(){return kN=dp(Da().mark(function e(r){var o;return Da().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return o=0,c.abrupt("return",new Promise(function(d){r.forEach(function(p){p.then(function(v){v.errors.length&&d([v]),o+=1,o===r.length&&d([])})})}));case 2:case"end":return c.stop()}},e)})),kN.apply(this,arguments)}function eo(e){return IN(e)}function l7(e,r){var o={};return r.forEach(function(s){var c=xl(e,s);o=Vc(o,s,c)}),o}function sm(e,r){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return e&&e.some(function(s){return pY(r,s,o)})}function pY(e,r){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return!e||!r||!o&&e.length!==r.length?!1:r.every(function(s,c){return e[c]===s})}function vbe(e,r){if(e===r)return!0;if(!e&&r||e&&!r||!e||!r||pn(e)!=="object"||pn(r)!=="object")return!1;var o=Object.keys(e),s=Object.keys(r),c=new Set([].concat(o,s));return _t(c).every(function(d){var p=e[d],v=r[d];return typeof p=="function"&&typeof v=="function"?!0:p===v})}function Ebe(e){var r=arguments.length<=1?void 0:arguments[1];return r&&r.target&&pn(r.target)==="object"&&e in r.target?r.target[e]:r}function u7(e,r,o){var s=e.length;if(r<0||r>=s||o<0||o>=s)return e;var c=e[r],d=r-o;return d>0?[].concat(_t(e.slice(0,o)),[c],_t(e.slice(o,r)),_t(e.slice(r+1,s))):d<0?[].concat(_t(e.slice(0,r)),_t(e.slice(r+1,o+1)),[c],_t(e.slice(o+1,s))):e}var _be=["name"],rc=[];function d7(e,r,o,s,c,d){return typeof e=="function"?e(r,o,"source"in d?{source:d.source}:{}):s!==c}var wP=function(e){Su(o,e);var r=cp(o);function o(s){var c;if(Bo(this,o),c=r.call(this,s),ye(br(c),"state",{resetCount:0}),ye(br(c),"cancelRegisterFunc",null),ye(br(c),"mounted",!1),ye(br(c),"touched",!1),ye(br(c),"dirty",!1),ye(br(c),"validatePromise",void 0),ye(br(c),"prevValidating",void 0),ye(br(c),"errors",rc),ye(br(c),"warnings",rc),ye(br(c),"cancelRegister",function(){var m=c.props,E=m.preserve,C=m.isListField,b=m.name;c.cancelRegisterFunc&&c.cancelRegisterFunc(C,E,eo(b)),c.cancelRegisterFunc=null}),ye(br(c),"getNamePath",function(){var m=c.props,E=m.name,C=m.fieldContext,b=C.prefixName,R=b===void 0?[]:b;return E!==void 0?[].concat(_t(R),_t(E)):[]}),ye(br(c),"getRules",function(){var m=c.props,E=m.rules,C=E===void 0?[]:E,b=m.fieldContext;return C.map(function(R){return typeof R=="function"?R(b):R})}),ye(br(c),"refresh",function(){c.mounted&&c.setState(function(m){var E=m.resetCount;return{resetCount:E+1}})}),ye(br(c),"metaCache",null),ye(br(c),"triggerMetaEvent",function(m){var E=c.props.onMetaChange;if(E){var C=_e(_e({},c.getMeta()),{},{destroy:m});Sv(c.metaCache,C)||E(C),c.metaCache=C}else c.metaCache=null}),ye(br(c),"onStoreChange",function(m,E,C){var b=c.props,R=b.shouldUpdate,w=b.dependencies,I=w===void 0?[]:w,O=b.onReset,x=C.store,P=c.getNamePath(),N=c.getValue(m),L=c.getValue(x),M=E&&sm(E,P);switch(C.type==="valueUpdate"&&C.source==="external"&&!Sv(N,L)&&(c.touched=!0,c.dirty=!0,c.validatePromise=null,c.errors=rc,c.warnings=rc,c.triggerMetaEvent()),C.type){case"reset":if(!E||M){c.touched=!1,c.dirty=!1,c.validatePromise=void 0,c.errors=rc,c.warnings=rc,c.triggerMetaEvent(),O==null||O(),c.refresh();return}break;case"remove":{if(R){c.reRender();return}break}case"setField":{var j=C.data;if(M){"touched"in j&&(c.touched=j.touched),"validating"in j&&!("originRCField"in j)&&(c.validatePromise=j.validating?Promise.resolve([]):null),"errors"in j&&(c.errors=j.errors||rc),"warnings"in j&&(c.warnings=j.warnings||rc),c.dirty=!0,c.triggerMetaEvent(),c.reRender();return}else if("value"in j&&sm(E,P,!0)){c.reRender();return}if(R&&!P.length&&d7(R,m,x,N,L,C)){c.reRender();return}break}case"dependenciesUpdate":{var $=I.map(eo);if($.some(function(H){return sm(C.relatedFields,H)})){c.reRender();return}break}default:if(M||(!I.length||P.length||R)&&d7(R,m,x,N,L,C)){c.reRender();return}break}R===!0&&c.reRender()}),ye(br(c),"validateRules",function(m){var E=c.getNamePath(),C=c.getValue(),b=m||{},R=b.triggerName,w=b.validateOnly,I=w===void 0?!1:w,O=Promise.resolve().then(dp(Da().mark(function x(){var P,N,L,M,j,$,H;return Da().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:if(c.mounted){Y.next=2;break}return Y.abrupt("return",[]);case 2:if(P=c.props,N=P.validateFirst,L=N===void 0?!1:N,M=P.messageVariables,j=P.validateDebounce,$=c.getRules(),R&&($=$.filter(function(q){return q}).filter(function(q){var J=q.validateTrigger;if(!J)return!0;var re=IN(J);return re.includes(R)})),!(j&&R)){Y.next=10;break}return Y.next=8,new Promise(function(q){setTimeout(q,j)});case 8:if(c.validatePromise===O){Y.next=10;break}return Y.abrupt("return",[]);case 10:return H=fbe(E,C,$,m,L,M),H.catch(function(q){return q}).then(function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:rc;if(c.validatePromise===O){var J;c.validatePromise=null;var re=[],Z=[];(J=q.forEach)===null||J===void 0||J.call(q,function(Q){var he=Q.rule.warningOnly,oe=Q.errors,ae=oe===void 0?rc:oe;he?Z.push.apply(Z,_t(ae)):re.push.apply(re,_t(ae))}),c.errors=re,c.warnings=Z,c.triggerMetaEvent(),c.reRender()}}),Y.abrupt("return",H);case 13:case"end":return Y.stop()}},x)})));return I||(c.validatePromise=O,c.dirty=!0,c.errors=rc,c.warnings=rc,c.triggerMetaEvent(),c.reRender()),O}),ye(br(c),"isFieldValidating",function(){return!!c.validatePromise}),ye(br(c),"isFieldTouched",function(){return c.touched}),ye(br(c),"isFieldDirty",function(){if(c.dirty||c.props.initialValue!==void 0)return!0;var m=c.props.fieldContext,E=m.getInternalHooks(Uh),C=E.getInitialValue;return C(c.getNamePath())!==void 0}),ye(br(c),"getErrors",function(){return c.errors}),ye(br(c),"getWarnings",function(){return c.warnings}),ye(br(c),"isListField",function(){return c.props.isListField}),ye(br(c),"isList",function(){return c.props.isList}),ye(br(c),"isPreserve",function(){return c.props.preserve}),ye(br(c),"getMeta",function(){c.prevValidating=c.isFieldValidating();var m={touched:c.isFieldTouched(),validating:c.prevValidating,errors:c.errors,warnings:c.warnings,name:c.getNamePath(),validated:c.validatePromise===null};return m}),ye(br(c),"getOnlyChild",function(m){if(typeof m=="function"){var E=c.getMeta();return _e(_e({},c.getOnlyChild(m(c.getControlled(),E,c.props.fieldContext))),{},{isFunction:!0})}var C=Jc(m);return C.length!==1||!S.isValidElement(C[0])?{child:C,isFunction:!1}:{child:C[0],isFunction:!1}}),ye(br(c),"getValue",function(m){var E=c.props.fieldContext.getFieldsValue,C=c.getNamePath();return xl(m||E(!0),C)}),ye(br(c),"getControlled",function(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},E=c.props,C=E.name,b=E.trigger,R=E.validateTrigger,w=E.getValueFromEvent,I=E.normalize,O=E.valuePropName,x=E.getValueProps,P=E.fieldContext,N=R!==void 0?R:P.validateTrigger,L=c.getNamePath(),M=P.getInternalHooks,j=P.getFieldsValue,$=M(Uh),H=$.dispatch,G=c.getValue(),Y=x||function(Q){return ye({},O,Q)},q=m[b],J=C!==void 0?Y(G):{},re=_e(_e({},m),J);re[b]=function(){c.touched=!0,c.dirty=!0,c.triggerMetaEvent();for(var Q,he=arguments.length,oe=new Array(he),ae=0;ae<he;ae++)oe[ae]=arguments[ae];w?Q=w.apply(void 0,oe):Q=Ebe.apply(void 0,[O].concat(oe)),I&&(Q=I(Q,G,j(!0))),H({type:"updateValue",namePath:L,value:Q}),q&&q.apply(void 0,oe)};var Z=IN(N||[]);return Z.forEach(function(Q){var he=re[Q];re[Q]=function(){he&&he.apply(void 0,arguments);var oe=c.props.rules;oe&&oe.length&&H({type:"validateField",namePath:L,triggerName:Q})}}),re}),s.fieldContext){var d=s.fieldContext.getInternalHooks,p=d(Uh),v=p.initEntityValue;v(br(c))}return c}return Vo(o,[{key:"componentDidMount",value:function(){var c=this.props,d=c.shouldUpdate,p=c.fieldContext;if(this.mounted=!0,p){var v=p.getInternalHooks,m=v(Uh),E=m.registerField;this.cancelRegisterFunc=E(this)}d===!0&&this.reRender()}},{key:"componentWillUnmount",value:function(){this.cancelRegister(),this.triggerMetaEvent(!0),this.mounted=!1}},{key:"reRender",value:function(){this.mounted&&this.forceUpdate()}},{key:"render",value:function(){var c=this.state.resetCount,d=this.props.children,p=this.getOnlyChild(d),v=p.child,m=p.isFunction,E;return m?E=v:S.isValidElement(v)?E=S.cloneElement(v,this.getControlled(v.props)):(ga(!v,"`children` of Field is not validate ReactElement."),E=v),S.createElement(S.Fragment,{key:c},E)}}]),o}(S.Component);ye(wP,"contextType",tp);ye(wP,"defaultProps",{trigger:"onChange",valuePropName:"value"});function IP(e){var r=e.name,o=kn(e,_be),s=S.useContext(tp),c=S.useContext(Rv),d=r!==void 0?eo(r):void 0,p="keep";return o.isListField||(p="_".concat((d||[]).join("_"))),S.createElement(wP,Je({key:p,name:d,isListField:!!c},o,{fieldContext:s}))}function fY(e){var r=e.name,o=e.initialValue,s=e.children,c=e.rules,d=e.validateTrigger,p=e.isListField,v=S.useContext(tp),m=S.useContext(Rv),E=S.useRef({keys:[],id:0}),C=E.current,b=S.useMemo(function(){var O=eo(v.prefixName)||[];return[].concat(_t(O),_t(eo(r)))},[v.prefixName,r]),R=S.useMemo(function(){return _e(_e({},v),{},{prefixName:b})},[v,b]),w=S.useMemo(function(){return{getKey:function(x){var P=b.length,N=x[P];return[C.keys[N],x.slice(P+1)]}}},[b]);if(typeof s!="function")return ga(!1,"Form.List only accepts function as children."),null;var I=function(x,P,N){var L=N.source;return L==="internal"?!1:x!==P};return S.createElement(Rv.Provider,{value:w},S.createElement(tp.Provider,{value:R},S.createElement(IP,{name:[],shouldUpdate:I,rules:c,validateTrigger:d,initialValue:o,isList:!0,isListField:p??!!m},function(O,x){var P=O.value,N=P===void 0?[]:P,L=O.onChange,M=v.getFieldValue,j=function(){var Y=M(b||[]);return Y||[]},$={add:function(Y,q){var J=j();q>=0&&q<=J.length?(C.keys=[].concat(_t(C.keys.slice(0,q)),[C.id],_t(C.keys.slice(q))),L([].concat(_t(J.slice(0,q)),[Y],_t(J.slice(q))))):(C.keys=[].concat(_t(C.keys),[C.id]),L([].concat(_t(J),[Y]))),C.id+=1},remove:function(Y){var q=j(),J=new Set(Array.isArray(Y)?Y:[Y]);J.size<=0||(C.keys=C.keys.filter(function(re,Z){return!J.has(Z)}),L(q.filter(function(re,Z){return!J.has(Z)})))},move:function(Y,q){if(Y!==q){var J=j();Y<0||Y>=J.length||q<0||q>=J.length||(C.keys=u7(C.keys,Y,q),L(u7(J,Y,q)))}}},H=N||[];return Array.isArray(H)||(H=[]),s(H.map(function(G,Y){var q=C.keys[Y];return q===void 0&&(C.keys[Y]=C.id,q=C.keys[Y],C.id+=1),{name:Y,key:q,isListField:!0}}),$,x)})))}function Sbe(e){var r=!1,o=e.length,s=[];return e.length?new Promise(function(c,d){e.forEach(function(p,v){p.catch(function(m){return r=!0,m}).then(function(m){o-=1,s[v]=m,!(o>0)&&(r&&d(s),c(s))})})}):Promise.resolve([])}var mY="__@field_split__";function GA(e){return e.map(function(r){return"".concat(pn(r),":").concat(r)}).join(mY)}var Df=function(){function e(){Bo(this,e),ye(this,"kvs",new Map)}return Vo(e,[{key:"set",value:function(o,s){this.kvs.set(GA(o),s)}},{key:"get",value:function(o){return this.kvs.get(GA(o))}},{key:"update",value:function(o,s){var c=this.get(o),d=s(c);d?this.set(o,d):this.delete(o)}},{key:"delete",value:function(o){this.kvs.delete(GA(o))}},{key:"map",value:function(o){return _t(this.kvs.entries()).map(function(s){var c=Ue(s,2),d=c[0],p=c[1],v=d.split(mY);return o({key:v.map(function(m){var E=m.match(/^([^:]*):(.*)$/),C=Ue(E,3),b=C[1],R=C[2];return b==="number"?Number(R):R}),value:p})})}},{key:"toJSON",value:function(){var o={};return this.map(function(s){var c=s.key,d=s.value;return o[c.join(".")]=d,null}),o}}]),e}(),ybe=["name"],Cbe=Vo(function e(r){var o=this;Bo(this,e),ye(this,"formHooked",!1),ye(this,"forceRootUpdate",void 0),ye(this,"subscribable",!0),ye(this,"store",{}),ye(this,"fieldEntities",[]),ye(this,"initialValues",{}),ye(this,"callbacks",{}),ye(this,"validateMessages",null),ye(this,"preserve",null),ye(this,"lastValidatePromise",null),ye(this,"getForm",function(){return{getFieldValue:o.getFieldValue,getFieldsValue:o.getFieldsValue,getFieldError:o.getFieldError,getFieldWarning:o.getFieldWarning,getFieldsError:o.getFieldsError,isFieldsTouched:o.isFieldsTouched,isFieldTouched:o.isFieldTouched,isFieldValidating:o.isFieldValidating,isFieldsValidating:o.isFieldsValidating,resetFields:o.resetFields,setFields:o.setFields,setFieldValue:o.setFieldValue,setFieldsValue:o.setFieldsValue,validateFields:o.validateFields,submit:o.submit,_init:!0,getInternalHooks:o.getInternalHooks}}),ye(this,"getInternalHooks",function(s){return s===Uh?(o.formHooked=!0,{dispatch:o.dispatch,initEntityValue:o.initEntityValue,registerField:o.registerField,useSubscribe:o.useSubscribe,setInitialValues:o.setInitialValues,destroyForm:o.destroyForm,setCallbacks:o.setCallbacks,setValidateMessages:o.setValidateMessages,getFields:o.getFields,setPreserve:o.setPreserve,getInitialValue:o.getInitialValue,registerWatch:o.registerWatch}):(ga(!1,"`getInternalHooks` is internal usage. Should not call directly."),null)}),ye(this,"useSubscribe",function(s){o.subscribable=s}),ye(this,"prevWithoutPreserves",null),ye(this,"setInitialValues",function(s,c){if(o.initialValues=s||{},c){var d,p=Qf(s,o.store);(d=o.prevWithoutPreserves)===null||d===void 0||d.map(function(v){var m=v.key;p=Vc(p,m,xl(s,m))}),o.prevWithoutPreserves=null,o.updateStore(p)}}),ye(this,"destroyForm",function(s){if(s)o.updateStore({});else{var c=new Df;o.getFieldEntities(!0).forEach(function(d){o.isMergedPreserve(d.isPreserve())||c.set(d.getNamePath(),!0)}),o.prevWithoutPreserves=c}}),ye(this,"getInitialValue",function(s){var c=xl(o.initialValues,s);return s.length?Qf(c):c}),ye(this,"setCallbacks",function(s){o.callbacks=s}),ye(this,"setValidateMessages",function(s){o.validateMessages=s}),ye(this,"setPreserve",function(s){o.preserve=s}),ye(this,"watchList",[]),ye(this,"registerWatch",function(s){return o.watchList.push(s),function(){o.watchList=o.watchList.filter(function(c){return c!==s})}}),ye(this,"notifyWatch",function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];if(o.watchList.length){var c=o.getFieldsValue(),d=o.getFieldsValue(!0);o.watchList.forEach(function(p){p(c,d,s)})}}),ye(this,"timeoutId",null),ye(this,"warningUnhooked",function(){}),ye(this,"updateStore",function(s){o.store=s}),ye(this,"getFieldEntities",function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return s?o.fieldEntities.filter(function(c){return c.getNamePath().length}):o.fieldEntities}),ye(this,"getFieldsMap",function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,c=new Df;return o.getFieldEntities(s).forEach(function(d){var p=d.getNamePath();c.set(p,d)}),c}),ye(this,"getFieldEntitiesForNamePathList",function(s){if(!s)return o.getFieldEntities(!0);var c=o.getFieldsMap(!0);return s.map(function(d){var p=eo(d);return c.get(p)||{INVALIDATE_NAME_PATH:eo(d)}})}),ye(this,"getFieldsValue",function(s,c){o.warningUnhooked();var d,p,v;if(s===!0||Array.isArray(s)?(d=s,p=c):s&&pn(s)==="object"&&(v=s.strict,p=s.filter),d===!0&&!p)return o.store;var m=o.getFieldEntitiesForNamePathList(Array.isArray(d)?d:null),E=[];return m.forEach(function(C){var b,R,w="INVALIDATE_NAME_PATH"in C?C.INVALIDATE_NAME_PATH:C.getNamePath();if(v){var I,O;if((I=(O=C).isList)!==null&&I!==void 0&&I.call(O))return}else if(!d&&(b=(R=C).isListField)!==null&&b!==void 0&&b.call(R))return;if(!p)E.push(w);else{var x="getMeta"in C?C.getMeta():null;p(x)&&E.push(w)}}),l7(o.store,E.map(eo))}),ye(this,"getFieldValue",function(s){o.warningUnhooked();var c=eo(s);return xl(o.store,c)}),ye(this,"getFieldsError",function(s){o.warningUnhooked();var c=o.getFieldEntitiesForNamePathList(s);return c.map(function(d,p){return d&&!("INVALIDATE_NAME_PATH"in d)?{name:d.getNamePath(),errors:d.getErrors(),warnings:d.getWarnings()}:{name:eo(s[p]),errors:[],warnings:[]}})}),ye(this,"getFieldError",function(s){o.warningUnhooked();var c=eo(s),d=o.getFieldsError([c])[0];return d.errors}),ye(this,"getFieldWarning",function(s){o.warningUnhooked();var c=eo(s),d=o.getFieldsError([c])[0];return d.warnings}),ye(this,"isFieldsTouched",function(){o.warningUnhooked();for(var s=arguments.length,c=new Array(s),d=0;d<s;d++)c[d]=arguments[d];var p=c[0],v=c[1],m,E=!1;c.length===0?m=null:c.length===1?Array.isArray(p)?(m=p.map(eo),E=!1):(m=null,E=p):(m=p.map(eo),E=v);var C=o.getFieldEntities(!0),b=function(x){return x.isFieldTouched()};if(!m)return E?C.every(function(O){return b(O)||O.isList()}):C.some(b);var R=new Df;m.forEach(function(O){R.set(O,[])}),C.forEach(function(O){var x=O.getNamePath();m.forEach(function(P){P.every(function(N,L){return x[L]===N})&&R.update(P,function(N){return[].concat(_t(N),[O])})})});var w=function(x){return x.some(b)},I=R.map(function(O){var x=O.value;return x});return E?I.every(w):I.some(w)}),ye(this,"isFieldTouched",function(s){return o.warningUnhooked(),o.isFieldsTouched([s])}),ye(this,"isFieldsValidating",function(s){o.warningUnhooked();var c=o.getFieldEntities();if(!s)return c.some(function(p){return p.isFieldValidating()});var d=s.map(eo);return c.some(function(p){var v=p.getNamePath();return sm(d,v)&&p.isFieldValidating()})}),ye(this,"isFieldValidating",function(s){return o.warningUnhooked(),o.isFieldsValidating([s])}),ye(this,"resetWithFieldInitialValue",function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=new Df,d=o.getFieldEntities(!0);d.forEach(function(m){var E=m.props.initialValue,C=m.getNamePath();if(E!==void 0){var b=c.get(C)||new Set;b.add({entity:m,value:E}),c.set(C,b)}});var p=function(E){E.forEach(function(C){var b=C.props.initialValue;if(b!==void 0){var R=C.getNamePath(),w=o.getInitialValue(R);if(w!==void 0)ga(!1,"Form already set 'initialValues' with path '".concat(R.join("."),"'. Field can not overwrite it."));else{var I=c.get(R);if(I&&I.size>1)ga(!1,"Multiple Field with path '".concat(R.join("."),"' set 'initialValue'. Can not decide which one to pick."));else if(I){var O=o.getFieldValue(R),x=C.isListField();!x&&(!s.skipExist||O===void 0)&&o.updateStore(Vc(o.store,R,_t(I)[0].value))}}}})},v;s.entities?v=s.entities:s.namePathList?(v=[],s.namePathList.forEach(function(m){var E=c.get(m);if(E){var C;(C=v).push.apply(C,_t(_t(E).map(function(b){return b.entity})))}})):v=d,p(v)}),ye(this,"resetFields",function(s){o.warningUnhooked();var c=o.store;if(!s){o.updateStore(Qf(o.initialValues)),o.resetWithFieldInitialValue(),o.notifyObservers(c,null,{type:"reset"}),o.notifyWatch();return}var d=s.map(eo);d.forEach(function(p){var v=o.getInitialValue(p);o.updateStore(Vc(o.store,p,v))}),o.resetWithFieldInitialValue({namePathList:d}),o.notifyObservers(c,d,{type:"reset"}),o.notifyWatch(d)}),ye(this,"setFields",function(s){o.warningUnhooked();var c=o.store,d=[];s.forEach(function(p){var v=p.name,m=kn(p,ybe),E=eo(v);d.push(E),"value"in m&&o.updateStore(Vc(o.store,E,m.value)),o.notifyObservers(c,[E],{type:"setField",data:p})}),o.notifyWatch(d)}),ye(this,"getFields",function(){var s=o.getFieldEntities(!0),c=s.map(function(d){var p=d.getNamePath(),v=d.getMeta(),m=_e(_e({},v),{},{name:p,value:o.getFieldValue(p)});return Object.defineProperty(m,"originRCField",{value:!0}),m});return c}),ye(this,"initEntityValue",function(s){var c=s.props.initialValue;if(c!==void 0){var d=s.getNamePath(),p=xl(o.store,d);p===void 0&&o.updateStore(Vc(o.store,d,c))}}),ye(this,"isMergedPreserve",function(s){var c=s!==void 0?s:o.preserve;return c??!0}),ye(this,"registerField",function(s){o.fieldEntities.push(s);var c=s.getNamePath();if(o.notifyWatch([c]),s.props.initialValue!==void 0){var d=o.store;o.resetWithFieldInitialValue({entities:[s],skipExist:!0}),o.notifyObservers(d,[s.getNamePath()],{type:"valueUpdate",source:"internal"})}return function(p,v){var m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(o.fieldEntities=o.fieldEntities.filter(function(b){return b!==s}),!o.isMergedPreserve(v)&&(!p||m.length>1)){var E=p?void 0:o.getInitialValue(c);if(c.length&&o.getFieldValue(c)!==E&&o.fieldEntities.every(function(b){return!pY(b.getNamePath(),c)})){var C=o.store;o.updateStore(Vc(C,c,E,!0)),o.notifyObservers(C,[c],{type:"remove"}),o.triggerDependenciesUpdate(C,c)}}o.notifyWatch([c])}}),ye(this,"dispatch",function(s){switch(s.type){case"updateValue":{var c=s.namePath,d=s.value;o.updateValue(c,d);break}case"validateField":{var p=s.namePath,v=s.triggerName;o.validateFields([p],{triggerName:v});break}}}),ye(this,"notifyObservers",function(s,c,d){if(o.subscribable){var p=_e(_e({},d),{},{store:o.getFieldsValue(!0)});o.getFieldEntities().forEach(function(v){var m=v.onStoreChange;m(s,c,p)})}else o.forceRootUpdate()}),ye(this,"triggerDependenciesUpdate",function(s,c){var d=o.getDependencyChildrenFields(c);return d.length&&o.validateFields(d),o.notifyObservers(s,d,{type:"dependenciesUpdate",relatedFields:[c].concat(_t(d))}),d}),ye(this,"updateValue",function(s,c){var d=eo(s),p=o.store;o.updateStore(Vc(o.store,d,c)),o.notifyObservers(p,[d],{type:"valueUpdate",source:"internal"}),o.notifyWatch([d]);var v=o.triggerDependenciesUpdate(p,d),m=o.callbacks.onValuesChange;if(m){var E=l7(o.store,[d]);m(E,o.getFieldsValue())}o.triggerOnFieldsChange([d].concat(_t(v)))}),ye(this,"setFieldsValue",function(s){o.warningUnhooked();var c=o.store;if(s){var d=Qf(o.store,s);o.updateStore(d)}o.notifyObservers(c,null,{type:"valueUpdate",source:"external"}),o.notifyWatch()}),ye(this,"setFieldValue",function(s,c){o.setFields([{name:s,value:c}])}),ye(this,"getDependencyChildrenFields",function(s){var c=new Set,d=[],p=new Df;o.getFieldEntities().forEach(function(m){var E=m.props.dependencies;(E||[]).forEach(function(C){var b=eo(C);p.update(b,function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Set;return R.add(m),R})})});var v=function m(E){var C=p.get(E)||new Set;C.forEach(function(b){if(!c.has(b)){c.add(b);var R=b.getNamePath();b.isFieldDirty()&&R.length&&(d.push(R),m(R))}})};return v(s),d}),ye(this,"triggerOnFieldsChange",function(s,c){var d=o.callbacks.onFieldsChange;if(d){var p=o.getFields();if(c){var v=new Df;c.forEach(function(E){var C=E.name,b=E.errors;v.set(C,b)}),p.forEach(function(E){E.errors=v.get(E.name)||E.errors})}var m=p.filter(function(E){var C=E.name;return sm(s,C)});m.length&&d(m,p)}}),ye(this,"validateFields",function(s,c){o.warningUnhooked();var d,p;Array.isArray(s)||typeof s=="string"||typeof c=="string"?(d=s,p=c):p=s;var v=!!d,m=v?d.map(eo):[],E=[],C=String(Date.now()),b=new Set,R=p||{},w=R.recursive,I=R.dirty;o.getFieldEntities(!0).forEach(function(N){if(v||m.push(N.getNamePath()),!(!N.props.rules||!N.props.rules.length)&&!(I&&!N.isFieldDirty())){var L=N.getNamePath();if(b.add(L.join(C)),!v||sm(m,L,w)){var M=N.validateRules(_e({validateMessages:_e(_e({},hY),o.validateMessages)},p));E.push(M.then(function(){return{name:L,errors:[],warnings:[]}}).catch(function(j){var $,H=[],G=[];return($=j.forEach)===null||$===void 0||$.call(j,function(Y){var q=Y.rule.warningOnly,J=Y.errors;q?G.push.apply(G,_t(J)):H.push.apply(H,_t(J))}),H.length?Promise.reject({name:L,errors:H,warnings:G}):{name:L,errors:H,warnings:G}}))}}});var O=Sbe(E);o.lastValidatePromise=O,O.catch(function(N){return N}).then(function(N){var L=N.map(function(M){var j=M.name;return j});o.notifyObservers(o.store,L,{type:"validateFinish"}),o.triggerOnFieldsChange(L,N)});var x=O.then(function(){return o.lastValidatePromise===O?Promise.resolve(o.getFieldsValue(m)):Promise.reject([])}).catch(function(N){var L=N.filter(function(M){return M&&M.errors.length});return Promise.reject({values:o.getFieldsValue(m),errorFields:L,outOfDate:o.lastValidatePromise!==O})});x.catch(function(N){return N});var P=m.filter(function(N){return b.has(N.join(C))});return o.triggerOnFieldsChange(P),x}),ye(this,"submit",function(){o.warningUnhooked(),o.validateFields().then(function(s){var c=o.callbacks.onFinish;if(c)try{c(s)}catch(d){console.error(d)}}).catch(function(s){var c=o.callbacks.onFinishFailed;c&&c(s)})}),this.forceRootUpdate=r});function AP(e){var r=S.useRef(),o=S.useState({}),s=Ue(o,2),c=s[1];if(!r.current)if(e)r.current=e;else{var d=function(){c({})},p=new Cbe(d);r.current=p.getForm()}return[r.current]}var MN=S.createContext({triggerFormChange:function(){},triggerFormFinish:function(){},registerForm:function(){},unregisterForm:function(){}}),gY=function(r){var o=r.validateMessages,s=r.onFormChange,c=r.onFormFinish,d=r.children,p=S.useContext(MN),v=S.useRef({});return S.createElement(MN.Provider,{value:_e(_e({},p),{},{validateMessages:_e(_e({},p.validateMessages),o),triggerFormChange:function(E,C){s&&s(E,{changedFields:C,forms:v.current}),p.triggerFormChange(E,C)},triggerFormFinish:function(E,C){c&&c(E,{values:C,forms:v.current}),p.triggerFormFinish(E,C)},registerForm:function(E,C){E&&(v.current=_e(_e({},v.current),{},ye({},E,C))),p.registerForm(E,C)},unregisterForm:function(E){var C=_e({},v.current);delete C[E],v.current=C,p.unregisterForm(E)}})},d)},bbe=["name","initialValues","fields","form","preserve","children","component","validateMessages","validateTrigger","onValuesChange","onFieldsChange","onFinish","onFinishFailed","clearOnDestroy"],Tbe=function(r,o){var s=r.name,c=r.initialValues,d=r.fields,p=r.form,v=r.preserve,m=r.children,E=r.component,C=E===void 0?"form":E,b=r.validateMessages,R=r.validateTrigger,w=R===void 0?"onChange":R,I=r.onValuesChange,O=r.onFieldsChange,x=r.onFinish,P=r.onFinishFailed,N=r.clearOnDestroy,L=kn(r,bbe),M=S.useRef(null),j=S.useContext(MN),$=AP(p),H=Ue($,1),G=H[0],Y=G.getInternalHooks(Uh),q=Y.useSubscribe,J=Y.setInitialValues,re=Y.setCallbacks,Z=Y.setValidateMessages,Q=Y.setPreserve,he=Y.destroyForm;S.useImperativeHandle(o,function(){return _e(_e({},G),{},{nativeElement:M.current})}),S.useEffect(function(){return j.registerForm(s,G),function(){j.unregisterForm(s)}},[j,G,s]),Z(_e(_e({},j.validateMessages),b)),re({onValuesChange:I,onFieldsChange:function(ge){if(j.triggerFormChange(s,ge),O){for(var Te=arguments.length,we=new Array(Te>1?Te-1:0),Ie=1;Ie<Te;Ie++)we[Ie-1]=arguments[Ie];O.apply(void 0,[ge].concat(we))}},onFinish:function(ge){j.triggerFormFinish(s,ge),x&&x(ge)},onFinishFailed:P}),Q(v);var oe=S.useRef(null);J(c,!oe.current),oe.current||(oe.current=!0),S.useEffect(function(){return function(){return he(N)}},[]);var ae,te=typeof m=="function";if(te){var de=G.getFieldsValue(!0);ae=m(de,G)}else ae=m;q(!te);var fe=S.useRef();S.useEffect(function(){vbe(fe.current||[],d||[])||G.setFields(d||[]),fe.current=d},[d,G]);var ie=S.useMemo(function(){return _e(_e({},G),{},{validateTrigger:w})},[G,w]),le=S.createElement(Rv.Provider,{value:null},S.createElement(tp.Provider,{value:ie},ae));return C===!1?le:S.createElement(C,Je({},L,{ref:M,onSubmit:function(ge){ge.preventDefault(),ge.stopPropagation(),G.submit()},onReset:function(ge){var Te;ge.preventDefault(),G.resetFields(),(Te=L.onReset)===null||Te===void 0||Te.call(L,ge)}}),le)};function h7(e){try{return JSON.stringify(e)}catch{return Math.random()}}function vY(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];var s=r[0],c=r[1],d=c===void 0?{}:c,p=kCe(d)?{form:d}:d,v=p.form,m=S.useState(),E=Ue(m,2),C=E[0],b=E[1],R=S.useMemo(function(){return h7(C)},[C]),w=S.useRef(R);w.current=R;var I=S.useContext(tp),O=v||I,x=O&&O._init,P=eo(s),N=S.useRef(P);return N.current=P,S.useEffect(function(){if(x){var L=O.getFieldsValue,M=O.getInternalHooks,j=M(Uh),$=j.registerWatch,H=function(J,re){var Z=p.preserve?re:J;return typeof s=="function"?s(Z):xl(Z,N.current)},G=$(function(q,J){var re=H(q,J),Z=h7(re);w.current!==Z&&(w.current=Z,b(re))}),Y=H(L(),L(!0));return C!==Y&&b(Y),G}},[x]),C}var Rbe=S.forwardRef(Tbe),Pm=Rbe;Pm.FormProvider=gY;Pm.Field=IP;Pm.List=fY;Pm.useForm=AP;Pm.useWatch=vY;const vu=S.createContext({labelAlign:"right",vertical:!1,itemRef:()=>{}}),EY=S.createContext(null),_Y=e=>{const r=Sa(e,["prefixCls"]);return S.createElement(gY,Object.assign({},r))},OP=S.createContext({prefixCls:""}),As=S.createContext({}),wbe=e=>{let{children:r,status:o,override:s}=e;const c=S.useContext(As),d=S.useMemo(()=>{const p=Object.assign({},c);return s&&delete p.isFormItemInput,o&&(delete p.status,delete p.hasFeedback,delete p.feedbackIcon),p},[o,s,c]);return S.createElement(As.Provider,{value:d},r)},SY=S.createContext(void 0),Ibe=e=>({[e.componentCls]:{[`${e.antCls}-motion-collapse-legacy`]:{overflow:"hidden","&-active":{transition:`height ${e.motionDurationMid} ${e.motionEaseInOut},
        opacity ${e.motionDurationMid} ${e.motionEaseInOut} !important`}},[`${e.antCls}-motion-collapse`]:{overflow:"hidden",transition:`height ${e.motionDurationMid} ${e.motionEaseInOut},
        opacity ${e.motionDurationMid} ${e.motionEaseInOut} !important`}}}),yY=Ibe,Abe=e=>({animationDuration:e,animationFillMode:"both"}),Obe=e=>({animationDuration:e,animationFillMode:"both"}),xP=function(e,r,o,s){const d=(arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1)?"&":"";return{[`
      ${d}${e}-enter,
      ${d}${e}-appear
    `]:Object.assign(Object.assign({},Abe(s)),{animationPlayState:"paused"}),[`${d}${e}-leave`]:Object.assign(Object.assign({},Obe(s)),{animationPlayState:"paused"}),[`
      ${d}${e}-enter${e}-enter-active,
      ${d}${e}-appear${e}-appear-active
    `]:{animationName:r,animationPlayState:"running"},[`${d}${e}-leave${e}-leave-active`]:{animationName:o,animationPlayState:"running",pointerEvents:"none"}}},xbe=new Tr("antMoveDownIn",{"0%":{transform:"translate3d(0, 100%, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),Nbe=new Tr("antMoveDownOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(0, 100%, 0)",transformOrigin:"0 0",opacity:0}}),Dbe=new Tr("antMoveLeftIn",{"0%":{transform:"translate3d(-100%, 0, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),Pbe=new Tr("antMoveLeftOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(-100%, 0, 0)",transformOrigin:"0 0",opacity:0}}),Lbe=new Tr("antMoveRightIn",{"0%":{transform:"translate3d(100%, 0, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),kbe=new Tr("antMoveRightOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(100%, 0, 0)",transformOrigin:"0 0",opacity:0}}),Mbe=new Tr("antMoveUpIn",{"0%":{transform:"translate3d(0, -100%, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),Fbe=new Tr("antMoveUpOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(0, -100%, 0)",transformOrigin:"0 0",opacity:0}}),Ube={"move-up":{inKeyframes:Mbe,outKeyframes:Fbe},"move-down":{inKeyframes:xbe,outKeyframes:Nbe},"move-left":{inKeyframes:Dbe,outKeyframes:Pbe},"move-right":{inKeyframes:Lbe,outKeyframes:kbe}},p7=(e,r)=>{const{antCls:o}=e,s=`${o}-${r}`,{inKeyframes:c,outKeyframes:d}=Ube[r];return[xP(s,c,d,e.motionDurationMid),{[`
        ${s}-enter,
        ${s}-appear
      `]:{opacity:0,animationTimingFunction:e.motionEaseOutCirc},[`${s}-leave`]:{animationTimingFunction:e.motionEaseInOutCirc}}]},CY=new Tr("antSlideUpIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1}}),bY=new Tr("antSlideUpOut",{"0%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0}}),TY=new Tr("antSlideDownIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1}}),RY=new Tr("antSlideDownOut",{"0%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0}}),Bbe=new Tr("antSlideLeftIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1}}),Vbe=new Tr("antSlideLeftOut",{"0%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0}}),jbe=new Tr("antSlideRightIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1}}),$be=new Tr("antSlideRightOut",{"0%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0}}),Hbe={"slide-up":{inKeyframes:CY,outKeyframes:bY},"slide-down":{inKeyframes:TY,outKeyframes:RY},"slide-left":{inKeyframes:Bbe,outKeyframes:Vbe},"slide-right":{inKeyframes:jbe,outKeyframes:$be}},wC=(e,r)=>{const{antCls:o}=e,s=`${o}-${r}`,{inKeyframes:c,outKeyframes:d}=Hbe[r];return[xP(s,c,d,e.motionDurationMid),{[`
      ${s}-enter,
      ${s}-appear
    `]:{transform:"scale(0)",transformOrigin:"0% 0%",opacity:0,animationTimingFunction:e.motionEaseOutQuint,"&-prepare":{transform:"scale(1)"}},[`${s}-leave`]:{animationTimingFunction:e.motionEaseInQuint}}]},NP=new Tr("antZoomIn",{"0%":{transform:"scale(0.2)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),Wbe=new Tr("antZoomOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.2)",opacity:0}}),f7=new Tr("antZoomBigIn",{"0%":{transform:"scale(0.8)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),m7=new Tr("antZoomBigOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.8)",opacity:0}}),zbe=new Tr("antZoomUpIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 0%"}}),Gbe=new Tr("antZoomUpOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 0%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0}}),Kbe=new Tr("antZoomLeftIn",{"0%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"0% 50%"}}),qbe=new Tr("antZoomLeftOut",{"0%":{transform:"scale(1)",transformOrigin:"0% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0}}),Ybe=new Tr("antZoomRightIn",{"0%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"100% 50%"}}),Xbe=new Tr("antZoomRightOut",{"0%":{transform:"scale(1)",transformOrigin:"100% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0}}),Jbe=new Tr("antZoomDownIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 100%"}}),Qbe=new Tr("antZoomDownOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 100%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0}}),Zbe={zoom:{inKeyframes:NP,outKeyframes:Wbe},"zoom-big":{inKeyframes:f7,outKeyframes:m7},"zoom-big-fast":{inKeyframes:f7,outKeyframes:m7},"zoom-left":{inKeyframes:Kbe,outKeyframes:qbe},"zoom-right":{inKeyframes:Ybe,outKeyframes:Xbe},"zoom-up":{inKeyframes:zbe,outKeyframes:Gbe},"zoom-down":{inKeyframes:Jbe,outKeyframes:Qbe}},wY=(e,r)=>{const{antCls:o}=e,s=`${o}-${r}`,{inKeyframes:c,outKeyframes:d}=Zbe[r];return[xP(s,c,d,r==="zoom-big-fast"?e.motionDurationFast:e.motionDurationMid),{[`
        ${s}-enter,
        ${s}-appear
      `]:{transform:"scale(0)",opacity:0,animationTimingFunction:e.motionEaseOutCirc,"&-prepare":{transform:"none"}},[`${s}-leave`]:{animationTimingFunction:e.motionEaseInOutCirc}}]},eTe=e=>{const{componentCls:r,notificationMarginEdge:o,animationMaxHeight:s}=e,c=`${r}-notice`,d=new Tr("antNotificationFadeIn",{"0%":{transform:"translate3d(100%, 0, 0)",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",opacity:1}}),p=new Tr("antNotificationTopFadeIn",{"0%":{top:-s,opacity:0},"100%":{top:0,opacity:1}}),v=new Tr("antNotificationBottomFadeIn",{"0%":{bottom:e.calc(s).mul(-1).equal(),opacity:0},"100%":{bottom:0,opacity:1}}),m=new Tr("antNotificationLeftFadeIn",{"0%":{transform:"translate3d(-100%, 0, 0)",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",opacity:1}});return{[r]:{[`&${r}-top, &${r}-bottom`]:{marginInline:0,[c]:{marginInline:"auto auto"}},[`&${r}-top`]:{[`${r}-fade-enter${r}-fade-enter-active, ${r}-fade-appear${r}-fade-appear-active`]:{animationName:p}},[`&${r}-bottom`]:{[`${r}-fade-enter${r}-fade-enter-active, ${r}-fade-appear${r}-fade-appear-active`]:{animationName:v}},[`&${r}-topRight, &${r}-bottomRight`]:{[`${r}-fade-enter${r}-fade-enter-active, ${r}-fade-appear${r}-fade-appear-active`]:{animationName:d}},[`&${r}-topLeft, &${r}-bottomLeft`]:{marginRight:{value:0,_skip_check_:!0},marginLeft:{value:o,_skip_check_:!0},[c]:{marginInlineEnd:"auto",marginInlineStart:0},[`${r}-fade-enter${r}-fade-enter-active, ${r}-fade-appear${r}-fade-appear-active`]:{animationName:m}}}}},tTe=eTe,nTe=["top","topLeft","topRight","bottom","bottomLeft","bottomRight"],rTe={topLeft:"left",topRight:"right",bottomLeft:"left",bottomRight:"right",top:"left",bottom:"left"},iTe=(e,r)=>{const{componentCls:o}=e;return{[`${o}-${r}`]:{[`&${o}-stack > ${o}-notice-wrapper`]:{[r.startsWith("top")?"top":"bottom"]:0,[rTe[r]]:{value:0,_skip_check_:!0}}}}},oTe=e=>{const r={};for(let o=1;o<e.notificationStackLayer;o++)r[`&:nth-last-child(${o+1})`]={overflow:"hidden",[`& > ${e.componentCls}-notice`]:{opacity:0,transition:`opacity ${e.motionDurationMid}`}};return Object.assign({[`&:not(:nth-last-child(-n+${e.notificationStackLayer}))`]:{opacity:0,overflow:"hidden",color:"transparent",pointerEvents:"none"}},r)},aTe=e=>{const r={};for(let o=1;o<e.notificationStackLayer;o++)r[`&:nth-last-child(${o+1})`]={background:e.colorBgBlur,backdropFilter:"blur(10px)","-webkit-backdrop-filter":"blur(10px)"};return Object.assign({},r)},sTe=e=>{const{componentCls:r}=e;return Object.assign({[`${r}-stack`]:{[`& > ${r}-notice-wrapper`]:Object.assign({transition:`all ${e.motionDurationSlow}, backdrop-filter 0s`,position:"absolute"},oTe(e))},[`${r}-stack:not(${r}-stack-expanded)`]:{[`& > ${r}-notice-wrapper`]:Object.assign({},aTe(e))},[`${r}-stack${r}-stack-expanded`]:{[`& > ${r}-notice-wrapper`]:{"&:not(:nth-last-child(-n + 1))":{opacity:1,overflow:"unset",color:"inherit",pointerEvents:"auto",[`& > ${e.componentCls}-notice`]:{opacity:1}},"&:after":{content:'""',position:"absolute",height:e.margin,width:"100%",insetInline:0,bottom:e.calc(e.margin).mul(-1).equal(),background:"transparent",pointerEvents:"auto"}}}},nTe.map(o=>iTe(e,o)).reduce((o,s)=>Object.assign(Object.assign({},o),s),{}))},cTe=sTe,IY=e=>{const{iconCls:r,componentCls:o,boxShadow:s,fontSizeLG:c,notificationMarginBottom:d,borderRadiusLG:p,colorSuccess:v,colorInfo:m,colorWarning:E,colorError:C,colorTextHeading:b,notificationBg:R,notificationPadding:w,notificationMarginEdge:I,notificationProgressBg:O,notificationProgressHeight:x,fontSize:P,lineHeight:N,width:L,notificationIconSize:M,colorText:j}=e,$=`${o}-notice`;return{position:"relative",marginBottom:d,marginInlineStart:"auto",background:R,borderRadius:p,boxShadow:s,[$]:{padding:w,width:L,maxWidth:`calc(100vw - ${qe(e.calc(I).mul(2).equal())})`,overflow:"hidden",lineHeight:N,wordWrap:"break-word"},[`${$}-message`]:{marginBottom:e.marginXS,color:b,fontSize:c,lineHeight:e.lineHeightLG},[`${$}-description`]:{fontSize:P,color:j},[`${$}-closable ${$}-message`]:{paddingInlineEnd:e.paddingLG},[`${$}-with-icon ${$}-message`]:{marginBottom:e.marginXS,marginInlineStart:e.calc(e.marginSM).add(M).equal(),fontSize:c},[`${$}-with-icon ${$}-description`]:{marginInlineStart:e.calc(e.marginSM).add(M).equal(),fontSize:P},[`${$}-icon`]:{position:"absolute",fontSize:M,lineHeight:1,[`&-success${r}`]:{color:v},[`&-info${r}`]:{color:m},[`&-warning${r}`]:{color:E},[`&-error${r}`]:{color:C}},[`${$}-close`]:Object.assign({position:"absolute",top:e.notificationPaddingVertical,insetInlineEnd:e.notificationPaddingHorizontal,color:e.colorIcon,outline:"none",width:e.notificationCloseButtonSize,height:e.notificationCloseButtonSize,borderRadius:e.borderRadiusSM,transition:`background-color ${e.motionDurationMid}, color ${e.motionDurationMid}`,display:"flex",alignItems:"center",justifyContent:"center","&:hover":{color:e.colorIconHover,backgroundColor:e.colorBgTextHover},"&:active":{backgroundColor:e.colorBgTextActive}},vP(e)),[`${$}-progress`]:{position:"absolute",display:"block",appearance:"none",WebkitAppearance:"none",inlineSize:`calc(100% - ${qe(p)} * 2)`,left:{_skip_check_:!0,value:p},right:{_skip_check_:!0,value:p},bottom:0,blockSize:x,border:0,"&, &::-webkit-progress-bar":{borderRadius:p,backgroundColor:"rgba(0, 0, 0, 0.04)"},"&::-moz-progress-bar":{background:O},"&::-webkit-progress-value":{borderRadius:p,background:O}},[`${$}-btn`]:{float:"right",marginTop:e.marginSM}}},lTe=e=>{const{componentCls:r,notificationMarginBottom:o,notificationMarginEdge:s,motionDurationMid:c,motionEaseInOut:d}=e,p=`${r}-notice`,v=new Tr("antNotificationFadeOut",{"0%":{maxHeight:e.animationMaxHeight,marginBottom:o},"100%":{maxHeight:0,marginBottom:0,paddingTop:0,paddingBottom:0,opacity:0}});return[{[r]:Object.assign(Object.assign({},Ds(e)),{position:"fixed",zIndex:e.zIndexPopup,marginRight:{value:s,_skip_check_:!0},[`${r}-hook-holder`]:{position:"relative"},[`${r}-fade-appear-prepare`]:{opacity:"0 !important"},[`${r}-fade-enter, ${r}-fade-appear`]:{animationDuration:e.motionDurationMid,animationTimingFunction:d,animationFillMode:"both",opacity:0,animationPlayState:"paused"},[`${r}-fade-leave`]:{animationTimingFunction:d,animationFillMode:"both",animationDuration:c,animationPlayState:"paused"},[`${r}-fade-enter${r}-fade-enter-active, ${r}-fade-appear${r}-fade-appear-active`]:{animationPlayState:"running"},[`${r}-fade-leave${r}-fade-leave-active`]:{animationName:v,animationPlayState:"running"},"&-rtl":{direction:"rtl",[`${p}-btn`]:{float:"left"}}})},{[r]:{[`${p}-wrapper`]:Object.assign({},IY(e))}}]},AY=e=>({zIndexPopup:e.zIndexPopupBase+Yq+50,width:384}),OY=e=>{const r=e.paddingMD,o=e.paddingLG;return gi(e,{notificationBg:e.colorBgElevated,notificationPaddingVertical:r,notificationPaddingHorizontal:o,notificationIconSize:e.calc(e.fontSizeLG).mul(e.lineHeightLG).equal(),notificationCloseButtonSize:e.calc(e.controlHeightLG).mul(.55).equal(),notificationMarginBottom:e.margin,notificationPadding:`${qe(e.paddingMD)} ${qe(e.paddingContentHorizontalLG)}`,notificationMarginEdge:e.marginLG,animationMaxHeight:150,notificationStackLayer:3,notificationProgressHeight:2,notificationProgressBg:`linear-gradient(90deg, ${e.colorPrimaryBorderHover}, ${e.colorPrimary})`})},xY=ya("Notification",e=>{const r=OY(e);return[lTe(r),tTe(r),cTe(r)]},AY),uTe=Pb(["Notification","PurePanel"],e=>{const r=`${e.componentCls}-notice`,o=OY(e);return{[`${r}-pure-panel`]:Object.assign(Object.assign({},IY(o)),{width:o.width,maxWidth:`calc(100vw - ${qe(e.calc(o.notificationMarginEdge).mul(2).equal())})`,margin:0})}},AY);var dTe=globalThis&&globalThis.__rest||function(e,r){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};function DP(e,r){return r===null||r===!1?null:r||S.createElement(Hq,{className:`${e}-close-icon`})}const hTe={success:$q,info:qSe,error:Mb,warning:Wq},NY=e=>{const{prefixCls:r,icon:o,type:s,message:c,description:d,btn:p,role:v="alert"}=e;let m=null;return o?m=S.createElement("span",{className:`${r}-icon`},o):s&&(m=S.createElement(hTe[s]||null,{className:He(`${r}-icon`,`${r}-icon-${s}`)})),S.createElement("div",{className:He({[`${r}-with-icon`]:m}),role:v},m,S.createElement("div",{className:`${r}-message`},c),S.createElement("div",{className:`${r}-description`},d),p&&S.createElement("div",{className:`${r}-btn`},p))},pTe=e=>{const{prefixCls:r,className:o,icon:s,type:c,message:d,description:p,btn:v,closable:m=!0,closeIcon:E,className:C}=e,b=dTe(e,["prefixCls","className","icon","type","message","description","btn","closable","closeIcon","className"]),{getPrefixCls:R}=S.useContext(Qn),w=r||R("notification"),I=`${w}-notice`,O=Fl(w),[x,P,N]=xY(w,O);return x(S.createElement("div",{className:He(`${I}-pure-panel`,P,o,N,O)},S.createElement(uTe,{prefixCls:w}),S.createElement(Gq,Object.assign({},b,{prefixCls:w,eventKey:"pure",duration:null,closable:m,className:He({notificationClassName:C}),closeIcon:DP(w,E),content:S.createElement(NY,{prefixCls:I,icon:s,type:c,message:d,description:p,btn:v})}))))},fTe=pTe;function mTe(e,r,o){let s;switch(e){case"top":s={left:"50%",transform:"translateX(-50%)",right:"auto",top:r,bottom:"auto"};break;case"topLeft":s={left:0,top:r,bottom:"auto"};break;case"topRight":s={right:0,top:r,bottom:"auto"};break;case"bottom":s={left:"50%",transform:"translateX(-50%)",right:"auto",top:"auto",bottom:o};break;case"bottomLeft":s={left:0,top:"auto",bottom:o};break;default:s={right:0,top:"auto",bottom:o};break}return s}function gTe(e){return{motionName:`${e}-fade`}}var vTe=globalThis&&globalThis.__rest||function(e,r){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};const g7=24,ETe=4.5,_Te="topRight",STe=e=>{let{children:r,prefixCls:o}=e;const s=Fl(o),[c,d,p]=xY(o,s);return c(Be.createElement(oye,{classNames:{list:He(d,p,s)}},r))},yTe=(e,r)=>{let{prefixCls:o,key:s}=r;return Be.createElement(STe,{prefixCls:o,key:s},e)},CTe=Be.forwardRef((e,r)=>{const{top:o,bottom:s,prefixCls:c,getContainer:d,maxCount:p,rtl:v,onAllRemoved:m,stack:E,duration:C}=e,{getPrefixCls:b,getPopupContainer:R,notification:w,direction:I}=S.useContext(Qn),[,O]=_a(),x=c||b("notification"),P=$=>mTe($,o??g7,s??g7),N=()=>He({[`${x}-rtl`]:v??I==="rtl"}),L=()=>gTe(x),[M,j]=pye({prefixCls:x,style:P,className:N,motion:L,closable:!0,closeIcon:DP(x),duration:C??ETe,pauseOnHover:!0,getContainer:()=>(d==null?void 0:d())||(R==null?void 0:R())||document.body,maxCount:p,onAllRemoved:m,renderNotifications:yTe,stack:E===!1?!1:{threshold:typeof E=="object"?E==null?void 0:E.threshold:void 0,offset:8,gap:O.margin}});return Be.useImperativeHandle(r,()=>Object.assign(Object.assign({},M),{prefixCls:x,notification:w})),j});function DY(e){const r=Be.useRef(null);return xb(),[Be.useMemo(()=>{const s=v=>{var m;if(!r.current)return;const{open:E,prefixCls:C,notification:b}=r.current,R=`${C}-notice`,{message:w,description:I,icon:O,type:x,btn:P,className:N,style:L,role:M="alert",closeIcon:j,closable:$}=v,H=vTe(v,["message","description","icon","type","btn","className","style","role","closeIcon","closable"]),G=DP(R,typeof j<"u"?j:b==null?void 0:b.closeIcon);return E(Object.assign(Object.assign({placement:(m=e==null?void 0:e.placement)!==null&&m!==void 0?m:_Te},H),{content:Be.createElement(NY,{prefixCls:R,icon:O,type:x,message:w,description:I,btn:P,role:M}),className:He(x&&`${R}-${x}`,N,b==null?void 0:b.className),style:Object.assign(Object.assign({},b==null?void 0:b.style),L),closeIcon:G,closable:$??!!G}))},d={open:s,destroy:v=>{var m,E;v!==void 0?(m=r.current)===null||m===void 0||m.close(v):(E=r.current)===null||E===void 0||E.destroy()}};return["success","info","warning","error"].forEach(v=>{d[v]=m=>s(Object.assign(Object.assign({},m),{type:v}))}),d},[]),Be.createElement(CTe,Object.assign({key:"notification-holder"},e,{ref:r}))]}function bTe(e){return DY(e)}const TTe=Be.createContext({});function RTe(e){return r=>S.createElement(up,{theme:{token:{motion:!1,zIndexPopupBase:0}}},S.createElement(e,Object.assign({},r)))}const wTe=(e,r,o,s)=>RTe(d=>{const{prefixCls:p,style:v}=d,m=S.useRef(null),[E,C]=S.useState(0),[b,R]=S.useState(0),[w,I]=va(!1,{value:d.open}),{getPrefixCls:O}=S.useContext(Qn),x=O(r||"select",p);S.useEffect(()=>{if(I(!0),typeof ResizeObserver<"u"){const L=new ResizeObserver(j=>{const $=j[0].target;C($.offsetHeight+8),R($.offsetWidth)}),M=setInterval(()=>{var j;const $=o?`.${o(x)}`:`.${x}-dropdown`,H=(j=m.current)===null||j===void 0?void 0:j.querySelector($);H&&(clearInterval(M),L.observe(H))},10);return()=>{clearInterval(M),L.disconnect()}}},[]);let P=Object.assign(Object.assign({},d),{style:Object.assign(Object.assign({},v),{margin:0}),open:w,visible:w,getPopupContainer:()=>m.current});s&&(P=s(P));const N={paddingBottom:E,position:"relative",minWidth:b};return S.createElement("div",{ref:m,style:N},S.createElement(e,Object.assign({},P)))}),ITe=wTe,PY=function(){if(typeof navigator>"u"||typeof window>"u")return!1;var e=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(e==null?void 0:e.substr(0,4))};var jb=function(r){var o=r.className,s=r.customizeIcon,c=r.customizeIconProps,d=r.children,p=r.onMouseDown,v=r.onClick,m=typeof s=="function"?s(c):s;return S.createElement("span",{className:o,onMouseDown:function(C){C.preventDefault(),p==null||p(C)},style:{userSelect:"none",WebkitUserSelect:"none"},unselectable:"on",onClick:v,"aria-hidden":!0},m!==void 0?m:S.createElement("span",{className:He(o.split(/\s+/).map(function(E){return"".concat(E,"-icon")}))},d))},ATe=function(r,o,s,c,d){var p=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1,v=arguments.length>6?arguments[6]:void 0,m=arguments.length>7?arguments[7]:void 0,E=Be.useMemo(function(){if(pn(c)==="object")return c.clearIcon;if(d)return d},[c,d]),C=Be.useMemo(function(){return!!(!p&&c&&(s.length||v)&&!(m==="combobox"&&v===""))},[c,p,s.length,v,m]);return{allowClear:C,clearIcon:Be.createElement(jb,{className:"".concat(r,"-clear"),onMouseDown:o,customizeIcon:E},"×")}},LY=S.createContext(null);function OTe(){return S.useContext(LY)}function xTe(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:10,r=S.useState(!1),o=Ue(r,2),s=o[0],c=o[1],d=S.useRef(null),p=function(){window.clearTimeout(d.current)};S.useEffect(function(){return p},[]);var v=function(E,C){p(),d.current=window.setTimeout(function(){c(E),C&&C()},e)};return[s,v,p]}function kY(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:250,r=S.useRef(null),o=S.useRef(null);S.useEffect(function(){return function(){window.clearTimeout(o.current)}},[]);function s(c){(c||r.current===null)&&(r.current=c),window.clearTimeout(o.current),o.current=window.setTimeout(function(){r.current=null},e)}return[function(){return r.current},s]}function NTe(e,r,o,s){var c=S.useRef(null);c.current={open:r,triggerOpen:o,customizedTrigger:s},S.useEffect(function(){function d(p){var v;if(!((v=c.current)!==null&&v!==void 0&&v.customizedTrigger)){var m=p.target;m.shadowRoot&&p.composed&&(m=p.composedPath()[0]||m),c.current.open&&e().filter(function(E){return E}).every(function(E){return!E.contains(m)&&E!==m})&&c.current.triggerOpen(!1)}}return window.addEventListener("mousedown",d),function(){return window.removeEventListener("mousedown",d)}},[])}function DTe(e){return![dt.ESC,dt.SHIFT,dt.BACKSPACE,dt.TAB,dt.WIN_KEY,dt.ALT,dt.META,dt.WIN_KEY_RIGHT,dt.CTRL,dt.SEMICOLON,dt.EQUALS,dt.CAPS_LOCK,dt.CONTEXT_MENU,dt.F1,dt.F2,dt.F3,dt.F4,dt.F5,dt.F6,dt.F7,dt.F8,dt.F9,dt.F10,dt.F11,dt.F12].includes(e)}var PTe=["prefixCls","invalidate","item","renderItem","responsive","responsiveDisabled","registerSize","itemKey","className","style","children","display","order","component"],Pf=void 0;function LTe(e,r){var o=e.prefixCls,s=e.invalidate,c=e.item,d=e.renderItem,p=e.responsive,v=e.responsiveDisabled,m=e.registerSize,E=e.itemKey,C=e.className,b=e.style,R=e.children,w=e.display,I=e.order,O=e.component,x=O===void 0?"div":O,P=kn(e,PTe),N=p&&!w;function L(G){m(E,G)}S.useEffect(function(){return function(){L(null)}},[]);var M=d&&c!==Pf?d(c):R,j;s||(j={opacity:N?0:1,height:N?0:Pf,overflowY:N?"hidden":Pf,order:p?I:Pf,pointerEvents:N?"none":Pf,position:N?"absolute":Pf});var $={};N&&($["aria-hidden"]=!0);var H=S.createElement(x,Je({className:He(!s&&o,C),style:_e(_e({},j),b)},$,P,{ref:r}),M);return p&&(H=S.createElement(yu,{onResize:function(Y){var q=Y.offsetWidth;L(q)},disabled:v},H)),H}var qg=S.forwardRef(LTe);qg.displayName="Item";function kTe(e){if(typeof MessageChannel>"u")ci(e);else{var r=new MessageChannel;r.port1.onmessage=function(){return e()},r.port2.postMessage(void 0)}}function MTe(){var e=S.useRef(null),r=function(s){e.current||(e.current=[],kTe(function(){kl.unstable_batchedUpdates(function(){e.current.forEach(function(c){c()}),e.current=null})})),e.current.push(s)};return r}function vg(e,r){var o=S.useState(r),s=Ue(o,2),c=s[0],d=s[1],p=Fo(function(v){e(function(){d(v)})});return[c,p]}var IC=Be.createContext(null),FTe=["component"],UTe=["className"],BTe=["className"],VTe=function(r,o){var s=S.useContext(IC);if(!s){var c=r.component,d=c===void 0?"div":c,p=kn(r,FTe);return S.createElement(d,Je({},p,{ref:o}))}var v=s.className,m=kn(s,UTe),E=r.className,C=kn(r,BTe);return S.createElement(IC.Provider,{value:null},S.createElement(qg,Je({ref:o,className:He(v,E)},m,C)))},MY=S.forwardRef(VTe);MY.displayName="RawItem";var jTe=["prefixCls","data","renderItem","renderRawItem","itemKey","itemWidth","ssr","style","className","maxCount","renderRest","renderRawRest","suffix","component","itemComponent","onVisibleChange"],FY="responsive",UY="invalidate";function $Te(e){return"+ ".concat(e.length," ...")}function HTe(e,r){var o=e.prefixCls,s=o===void 0?"rc-overflow":o,c=e.data,d=c===void 0?[]:c,p=e.renderItem,v=e.renderRawItem,m=e.itemKey,E=e.itemWidth,C=E===void 0?10:E,b=e.ssr,R=e.style,w=e.className,I=e.maxCount,O=e.renderRest,x=e.renderRawRest,P=e.suffix,N=e.component,L=N===void 0?"div":N,M=e.itemComponent,j=e.onVisibleChange,$=kn(e,jTe),H=b==="full",G=MTe(),Y=vg(G,null),q=Ue(Y,2),J=q[0],re=q[1],Z=J||0,Q=vg(G,new Map),he=Ue(Q,2),oe=he[0],ae=he[1],te=vg(G,0),de=Ue(te,2),fe=de[0],ie=de[1],le=vg(G,0),ve=Ue(le,2),ge=ve[0],Te=ve[1],we=vg(G,0),Ie=Ue(we,2),Me=Ie[0],Ke=Ie[1],ke=S.useState(null),Ne=Ue(ke,2),ze=Ne[0],Qe=Ne[1],De=S.useState(null),xe=Ue(De,2),ft=xe[0],Et=xe[1],st=S.useMemo(function(){return ft===null&&H?Number.MAX_SAFE_INTEGER:ft||0},[ft,J]),ot=S.useState(!1),Ze=Ue(ot,2),je=Ze[0],ct=Ze[1],lt="".concat(s,"-item"),gt=Math.max(fe,ge),Ot=I===FY,Tt=d.length&&Ot,Wt=I===UY,on=Tt||typeof I=="number"&&d.length>I,xt=S.useMemo(function(){var $t=d;return Tt?J===null&&H?$t=d:$t=d.slice(0,Math.min(d.length,Z/C)):typeof I=="number"&&($t=d.slice(0,I)),$t},[d,C,J,I,Tt]),wt=S.useMemo(function(){return Tt?d.slice(st+1):d.slice(xt.length)},[d,xt,Tt,st]),Pt=S.useCallback(function($t,Ct){var Ht;return typeof m=="function"?m($t):(Ht=m&&($t==null?void 0:$t[m]))!==null&&Ht!==void 0?Ht:Ct},[m]),Kt=S.useCallback(p||function($t){return $t},[p]);function fn($t,Ct,Ht){ft===$t&&(Ct===void 0||Ct===ze)||(Et($t),Ht||(ct($t<d.length-1),j==null||j($t)),Ct!==void 0&&Qe(Ct))}function mn($t,Ct){re(Ct.clientWidth)}function Un($t,Ct){ae(function(Ht){var On=new Map(Ht);return Ct===null?On.delete($t):On.set($t,Ct),On})}function Kn($t,Ct){Te(Ct),ie(ge)}function qn($t,Ct){Ke(Ct)}function mt($t){return oe.get(Pt(xt[$t],$t))}kr(function(){if(Z&&typeof gt=="number"&&xt){var $t=Me,Ct=xt.length,Ht=Ct-1;if(!Ct){fn(0,null);return}for(var On=0;On<Ct;On+=1){var rt=mt(On);if(H&&(rt=rt||0),rt===void 0){fn(On-1,void 0,!0);break}if($t+=rt,Ht===0&&$t<=Z||On===Ht-1&&$t+mt(Ht)<=Z){fn(Ht,null);break}else if($t+gt>Z){fn(On-1,$t-rt-Me+ge);break}}P&&mt(0)+Me>Z&&Qe(null)}},[Z,oe,ge,Me,Pt,xt]);var Nt=je&&!!wt.length,Sn={};ze!==null&&Tt&&(Sn={position:"absolute",left:ze,top:0});var ur={prefixCls:lt,responsive:Tt,component:M,invalidate:Wt},Br=v?function($t,Ct){var Ht=Pt($t,Ct);return S.createElement(IC.Provider,{key:Ht,value:_e(_e({},ur),{},{order:Ct,item:$t,itemKey:Ht,registerSize:Un,display:Ct<=st})},v($t,Ct))}:function($t,Ct){var Ht=Pt($t,Ct);return S.createElement(qg,Je({},ur,{order:Ct,key:Ht,item:$t,renderItem:Kt,itemKey:Ht,registerSize:Un,display:Ct<=st}))},dr,Mn={order:Nt?st:Number.MAX_SAFE_INTEGER,className:"".concat(lt,"-rest"),registerSize:Kn,display:Nt};if(x)x&&(dr=S.createElement(IC.Provider,{value:_e(_e({},ur),Mn)},x(wt)));else{var Vt=O||$Te;dr=S.createElement(qg,Je({},ur,Mn),typeof Vt=="function"?Vt(wt):Vt)}var yn=S.createElement(L,Je({className:He(!Wt&&s,w),style:R,ref:r},$),xt.map(Br),on?dr:null,P&&S.createElement(qg,Je({},ur,{responsive:Ot,responsiveDisabled:!Tt,order:st,className:"".concat(lt,"-suffix"),registerSize:qn,display:!0,style:Sn}),P));return Ot&&(yn=S.createElement(yu,{onResize:mn,disabled:!Tt},yn)),yn}var Pl=S.forwardRef(HTe);Pl.displayName="Overflow";Pl.Item=MY;Pl.RESPONSIVE=FY;Pl.INVALIDATE=UY;var WTe=function(r,o){var s,c=r.prefixCls,d=r.id,p=r.inputElement,v=r.disabled,m=r.tabIndex,E=r.autoFocus,C=r.autoComplete,b=r.editable,R=r.activeDescendantId,w=r.value,I=r.maxLength,O=r.onKeyDown,x=r.onMouseDown,P=r.onChange,N=r.onPaste,L=r.onCompositionStart,M=r.onCompositionEnd,j=r.open,$=r.attrs,H=p||S.createElement("input",null),G=H,Y=G.ref,q=G.props,J=q.onKeyDown,re=q.onChange,Z=q.onMouseDown,Q=q.onCompositionStart,he=q.onCompositionEnd,oe=q.style;return"maxLength"in H.props,H=S.cloneElement(H,_e(_e(_e({type:"search"},q),{},{id:d,ref:vc(o,Y),disabled:v,tabIndex:m,autoComplete:C||"off",autoFocus:E,className:He("".concat(c,"-selection-search-input"),(s=H)===null||s===void 0||(s=s.props)===null||s===void 0?void 0:s.className),role:"combobox","aria-expanded":j||!1,"aria-haspopup":"listbox","aria-owns":"".concat(d,"_list"),"aria-autocomplete":"list","aria-controls":"".concat(d,"_list"),"aria-activedescendant":j?R:void 0},$),{},{value:b?w:"",maxLength:I,readOnly:!b,unselectable:b?null:"on",style:_e(_e({},oe),{},{opacity:b?null:0}),onKeyDown:function(te){O(te),J&&J(te)},onMouseDown:function(te){x(te),Z&&Z(te)},onChange:function(te){P(te),re&&re(te)},onCompositionStart:function(te){L(te),Q&&Q(te)},onCompositionEnd:function(te){M(te),he&&he(te)},onPaste:N})),H},BY=S.forwardRef(WTe);function VY(e){return Array.isArray(e)?e:e!==void 0?[e]:[]}var zTe=typeof window<"u"&&window.document&&window.document.documentElement,GTe=zTe;function KTe(e){return e!=null}function qTe(e){return!e&&e!==0}function v7(e){return["string","number"].includes(pn(e))}function jY(e){var r=void 0;return e&&(v7(e.title)?r=e.title.toString():v7(e.label)&&(r=e.label.toString())),r}function YTe(e,r){GTe?S.useLayoutEffect(e,r):S.useEffect(e,r)}function XTe(e){var r;return(r=e.key)!==null&&r!==void 0?r:e.value}var E7=function(r){r.preventDefault(),r.stopPropagation()},JTe=function(r){var o=r.id,s=r.prefixCls,c=r.values,d=r.open,p=r.searchValue,v=r.autoClearSearchValue,m=r.inputRef,E=r.placeholder,C=r.disabled,b=r.mode,R=r.showSearch,w=r.autoFocus,I=r.autoComplete,O=r.activeDescendantId,x=r.tabIndex,P=r.removeIcon,N=r.maxTagCount,L=r.maxTagTextLength,M=r.maxTagPlaceholder,j=M===void 0?function(Qe){return"+ ".concat(Qe.length," ...")}:M,$=r.tagRender,H=r.onToggleOpen,G=r.onRemove,Y=r.onInputChange,q=r.onInputPaste,J=r.onInputKeyDown,re=r.onInputMouseDown,Z=r.onInputCompositionStart,Q=r.onInputCompositionEnd,he=S.useRef(null),oe=S.useState(0),ae=Ue(oe,2),te=ae[0],de=ae[1],fe=S.useState(!1),ie=Ue(fe,2),le=ie[0],ve=ie[1],ge="".concat(s,"-selection"),Te=d||b==="multiple"&&v===!1||b==="tags"?p:"",we=b==="tags"||b==="multiple"&&v===!1||R&&(d||le);YTe(function(){de(he.current.scrollWidth)},[Te]);var Ie=function(De,xe,ft,Et,st){return S.createElement("span",{title:jY(De),className:He("".concat(ge,"-item"),ye({},"".concat(ge,"-item-disabled"),ft))},S.createElement("span",{className:"".concat(ge,"-item-content")},xe),Et&&S.createElement(jb,{className:"".concat(ge,"-item-remove"),onMouseDown:E7,onClick:st,customizeIcon:P},"×"))},Me=function(De,xe,ft,Et,st,ot){var Ze=function(ct){E7(ct),H(!d)};return S.createElement("span",{onMouseDown:Ze},$({label:xe,value:De,disabled:ft,closable:Et,onClose:st,isMaxTag:!!ot}))},Ke=function(De){var xe=De.disabled,ft=De.label,Et=De.value,st=!C&&!xe,ot=ft;if(typeof L=="number"&&(typeof ft=="string"||typeof ft=="number")){var Ze=String(ot);Ze.length>L&&(ot="".concat(Ze.slice(0,L),"..."))}var je=function(lt){lt&&lt.stopPropagation(),G(De)};return typeof $=="function"?Me(Et,ot,xe,st,je):Ie(De,ot,xe,st,je)},ke=function(De){var xe=typeof j=="function"?j(De):j;return typeof $=="function"?Me(void 0,xe,!1,!1,void 0,!0):Ie({title:xe},xe,!1)},Ne=S.createElement("div",{className:"".concat(ge,"-search"),style:{width:te},onFocus:function(){ve(!0)},onBlur:function(){ve(!1)}},S.createElement(BY,{ref:m,open:d,prefixCls:s,id:o,inputElement:null,disabled:C,autoFocus:w,autoComplete:I,editable:we,activeDescendantId:O,value:Te,onKeyDown:J,onMouseDown:re,onChange:Y,onPaste:q,onCompositionStart:Z,onCompositionEnd:Q,tabIndex:x,attrs:ep(r,!0)}),S.createElement("span",{ref:he,className:"".concat(ge,"-search-mirror"),"aria-hidden":!0},Te," ")),ze=S.createElement(Pl,{prefixCls:"".concat(ge,"-overflow"),data:c,renderItem:Ke,renderRest:ke,suffix:Ne,itemKey:XTe,maxCount:N});return S.createElement(S.Fragment,null,ze,!c.length&&!Te&&S.createElement("span",{className:"".concat(ge,"-placeholder")},E))},QTe=function(r){var o=r.inputElement,s=r.prefixCls,c=r.id,d=r.inputRef,p=r.disabled,v=r.autoFocus,m=r.autoComplete,E=r.activeDescendantId,C=r.mode,b=r.open,R=r.values,w=r.placeholder,I=r.tabIndex,O=r.showSearch,x=r.searchValue,P=r.activeValue,N=r.maxLength,L=r.onInputKeyDown,M=r.onInputMouseDown,j=r.onInputChange,$=r.onInputPaste,H=r.onInputCompositionStart,G=r.onInputCompositionEnd,Y=r.title,q=S.useState(!1),J=Ue(q,2),re=J[0],Z=J[1],Q=C==="combobox",he=Q||O,oe=R[0],ae=x||"";Q&&P&&!re&&(ae=P),S.useEffect(function(){Q&&Z(!1)},[Q,P]);var te=C!=="combobox"&&!b&&!O?!1:!!ae,de=Y===void 0?jY(oe):Y,fe=S.useMemo(function(){return oe?null:S.createElement("span",{className:"".concat(s,"-selection-placeholder"),style:te?{visibility:"hidden"}:void 0},w)},[oe,te,w,s]);return S.createElement(S.Fragment,null,S.createElement("span",{className:"".concat(s,"-selection-search")},S.createElement(BY,{ref:d,prefixCls:s,id:c,open:b,inputElement:o,disabled:p,autoFocus:v,autoComplete:m,editable:he,activeDescendantId:E,value:ae,onKeyDown:L,onMouseDown:M,onChange:function(le){Z(!0),j(le)},onPaste:$,onCompositionStart:H,onCompositionEnd:G,tabIndex:I,attrs:ep(r,!0),maxLength:Q?N:void 0})),!Q&&oe?S.createElement("span",{className:"".concat(s,"-selection-item"),title:de,style:te?{visibility:"hidden"}:void 0},oe.label):null,fe)},ZTe=function(r,o){var s=S.useRef(null),c=S.useRef(!1),d=r.prefixCls,p=r.open,v=r.mode,m=r.showSearch,E=r.tokenWithEnter,C=r.disabled,b=r.autoClearSearchValue,R=r.onSearch,w=r.onSearchSubmit,I=r.onToggleOpen,O=r.onInputKeyDown,x=r.domRef;S.useImperativeHandle(o,function(){return{focus:function(te){s.current.focus(te)},blur:function(){s.current.blur()}}});var P=kY(0),N=Ue(P,2),L=N[0],M=N[1],j=function(te){var de=te.which;(de===dt.UP||de===dt.DOWN)&&te.preventDefault(),O&&O(te),de===dt.ENTER&&v==="tags"&&!c.current&&!p&&(w==null||w(te.target.value)),DTe(de)&&I(!0)},$=function(){M(!0)},H=S.useRef(null),G=function(te){R(te,!0,c.current)!==!1&&I(!0)},Y=function(){c.current=!0},q=function(te){c.current=!1,v!=="combobox"&&G(te.target.value)},J=function(te){var de=te.target.value;if(E&&H.current&&/[\r\n]/.test(H.current)){var fe=H.current.replace(/[\r\n]+$/,"").replace(/\r\n/g," ").replace(/[\r\n]/g," ");de=de.replace(fe,H.current)}H.current=null,G(de)},re=function(te){var de=te.clipboardData,fe=de==null?void 0:de.getData("text");H.current=fe||""},Z=function(te){var de=te.target;if(de!==s.current){var fe=document.body.style.msTouchAction!==void 0;fe?setTimeout(function(){s.current.focus()}):s.current.focus()}},Q=function(te){var de=L();te.target!==s.current&&!de&&!(v==="combobox"&&C)&&te.preventDefault(),(v!=="combobox"&&(!m||!de)||!p)&&(p&&b!==!1&&R("",!0,!1),I())},he={inputRef:s,onInputKeyDown:j,onInputMouseDown:$,onInputChange:J,onInputPaste:re,onInputCompositionStart:Y,onInputCompositionEnd:q},oe=v==="multiple"||v==="tags"?S.createElement(JTe,Je({},r,he)):S.createElement(QTe,Je({},r,he));return S.createElement("div",{ref:x,className:"".concat(d,"-selector"),onClick:Z,onMouseDown:Q},oe)},eRe=S.forwardRef(ZTe);function tRe(e){var r=e.prefixCls,o=e.align,s=e.arrow,c=e.arrowPos,d=s||{},p=d.className,v=d.content,m=c.x,E=m===void 0?0:m,C=c.y,b=C===void 0?0:C,R=S.useRef();if(!o||!o.points)return null;var w={position:"absolute"};if(o.autoArrow!==!1){var I=o.points[0],O=o.points[1],x=I[0],P=I[1],N=O[0],L=O[1];x===N||!["t","b"].includes(x)?w.top=b:x==="t"?w.top=0:w.bottom=0,P===L||!["l","r"].includes(P)?w.left=E:P==="l"?w.left=0:w.right=0}return S.createElement("div",{ref:R,className:He("".concat(r,"-arrow"),p),style:w},v)}function nRe(e){var r=e.prefixCls,o=e.open,s=e.zIndex,c=e.mask,d=e.motion;return c?S.createElement(lp,Je({},d,{motionAppear:!0,visible:o,removeOnLeave:!0}),function(p){var v=p.className;return S.createElement("div",{style:{zIndex:s},className:He("".concat(r,"-mask"),v)})}):null}var rRe=S.memo(function(e){var r=e.children;return r},function(e,r){return r.cache}),iRe=S.forwardRef(function(e,r){var o=e.popup,s=e.className,c=e.prefixCls,d=e.style,p=e.target,v=e.onVisibleChanged,m=e.open,E=e.keepDom,C=e.fresh,b=e.onClick,R=e.mask,w=e.arrow,I=e.arrowPos,O=e.align,x=e.motion,P=e.maskMotion,N=e.forceRender,L=e.getPopupContainer,M=e.autoDestroy,j=e.portal,$=e.zIndex,H=e.onMouseEnter,G=e.onMouseLeave,Y=e.onPointerEnter,q=e.ready,J=e.offsetX,re=e.offsetY,Z=e.offsetR,Q=e.offsetB,he=e.onAlign,oe=e.onPrepare,ae=e.stretch,te=e.targetWidth,de=e.targetHeight,fe=typeof o=="function"?o():o,ie=m||E,le=(L==null?void 0:L.length)>0,ve=S.useState(!L||!le),ge=Ue(ve,2),Te=ge[0],we=ge[1];if(kr(function(){!Te&&le&&p&&we(!0)},[Te,le,p]),!Te)return null;var Ie="auto",Me={left:"-1000vw",top:"-1000vh",right:Ie,bottom:Ie};if(q||!m){var Ke,ke=O.points,Ne=O.dynamicInset||((Ke=O._experimental)===null||Ke===void 0?void 0:Ke.dynamicInset),ze=Ne&&ke[0][1]==="r",Qe=Ne&&ke[0][0]==="b";ze?(Me.right=Z,Me.left=Ie):(Me.left=J,Me.right=Ie),Qe?(Me.bottom=Q,Me.top=Ie):(Me.top=re,Me.bottom=Ie)}var De={};return ae&&(ae.includes("height")&&de?De.height=de:ae.includes("minHeight")&&de&&(De.minHeight=de),ae.includes("width")&&te?De.width=te:ae.includes("minWidth")&&te&&(De.minWidth=te)),m||(De.pointerEvents="none"),S.createElement(j,{open:N||ie,getContainer:L&&function(){return L(p)},autoDestroy:M},S.createElement(nRe,{prefixCls:c,open:m,zIndex:$,mask:R,motion:P}),S.createElement(yu,{onResize:he,disabled:!m},function(xe){return S.createElement(lp,Je({motionAppear:!0,motionEnter:!0,motionLeave:!0,removeOnLeave:!1,forceRender:N,leavedClassName:"".concat(c,"-hidden")},x,{onAppearPrepare:oe,onEnterPrepare:oe,visible:m,onVisibleChanged:function(Et){var st;x==null||(st=x.onVisibleChanged)===null||st===void 0||st.call(x,Et),v(Et)}}),function(ft,Et){var st=ft.className,ot=ft.style,Ze=He(c,st,s);return S.createElement("div",{ref:vc(xe,r,Et),className:Ze,style:_e(_e(_e(_e({"--arrow-x":"".concat(I.x||0,"px"),"--arrow-y":"".concat(I.y||0,"px")},Me),De),ot),{},{boxSizing:"border-box",zIndex:$},d),onMouseEnter:H,onMouseLeave:G,onPointerEnter:Y,onClick:b},w&&S.createElement(tRe,{prefixCls:c,arrow:w,arrowPos:I,align:O}),S.createElement(rRe,{cache:!m&&!C},fe))})}))}),oRe=S.forwardRef(function(e,r){var o=e.children,s=e.getTriggerDOMNode,c=xm(o),d=S.useCallback(function(v){aP(r,s?s(v):v)},[s]),p=Vv(d,o.ref);return c?S.cloneElement(o,{ref:p}):o}),_7=S.createContext(null);function S7(e){return e?Array.isArray(e)?e:[e]:[]}function aRe(e,r,o,s){return S.useMemo(function(){var c=S7(o??r),d=S7(s??r),p=new Set(c),v=new Set(d);return e&&(p.has("hover")&&(p.delete("hover"),p.add("click")),v.has("hover")&&(v.delete("hover"),v.add("click"))),[p,v]},[e,r,o,s])}function sRe(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],o=arguments.length>2?arguments[2]:void 0;return o?e[0]===r[0]:e[0]===r[0]&&e[1]===r[1]}function cRe(e,r,o,s){for(var c=o.points,d=Object.keys(e),p=0;p<d.length;p+=1){var v,m=d[p];if(sRe((v=e[m])===null||v===void 0?void 0:v.points,c,s))return"".concat(r,"-placement-").concat(m)}return""}function y7(e,r,o,s){return r||(o?{motionName:"".concat(e,"-").concat(o)}:s?{motionName:s}:null)}function Wv(e){return e.ownerDocument.defaultView}function FN(e){for(var r=[],o=e==null?void 0:e.parentElement,s=["hidden","scroll","clip","auto"];o;){var c=Wv(o).getComputedStyle(o),d=c.overflowX,p=c.overflowY,v=c.overflow;[d,p,v].some(function(m){return s.includes(m)})&&r.push(o),o=o.parentElement}return r}function wv(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return Number.isNaN(e)?r:e}function Eg(e){return wv(parseFloat(e),0)}function C7(e,r){var o=_e({},e);return(r||[]).forEach(function(s){if(!(s instanceof HTMLBodyElement||s instanceof HTMLHtmlElement)){var c=Wv(s).getComputedStyle(s),d=c.overflow,p=c.overflowClipMargin,v=c.borderTopWidth,m=c.borderBottomWidth,E=c.borderLeftWidth,C=c.borderRightWidth,b=s.getBoundingClientRect(),R=s.offsetHeight,w=s.clientHeight,I=s.offsetWidth,O=s.clientWidth,x=Eg(v),P=Eg(m),N=Eg(E),L=Eg(C),M=wv(Math.round(b.width/I*1e3)/1e3),j=wv(Math.round(b.height/R*1e3)/1e3),$=(I-O-N-L)*M,H=(R-w-x-P)*j,G=x*j,Y=P*j,q=N*M,J=L*M,re=0,Z=0;if(d==="clip"){var Q=Eg(p);re=Q*M,Z=Q*j}var he=b.x+q-re,oe=b.y+G-Z,ae=he+b.width+2*re-q-J-$,te=oe+b.height+2*Z-G-Y-H;o.left=Math.max(o.left,he),o.top=Math.max(o.top,oe),o.right=Math.min(o.right,ae),o.bottom=Math.min(o.bottom,te)}}),o}function b7(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o="".concat(r),s=o.match(/^(.*)\%$/);return s?e*(parseFloat(s[1])/100):parseFloat(o)}function T7(e,r){var o=r||[],s=Ue(o,2),c=s[0],d=s[1];return[b7(e.width,c),b7(e.height,d)]}function R7(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return[e[0],e[1]]}function Lf(e,r){var o=r[0],s=r[1],c,d;return o==="t"?d=e.y:o==="b"?d=e.y+e.height:d=e.y+e.height/2,s==="l"?c=e.x:s==="r"?c=e.x+e.width:c=e.x+e.width/2,{x:c,y:d}}function hd(e,r){var o={t:"b",b:"t",l:"r",r:"l"};return e.map(function(s,c){return c===r?o[s]||"c":s}).join("")}function lRe(e,r,o,s,c,d,p){var v=S.useState({ready:!1,offsetX:0,offsetY:0,offsetR:0,offsetB:0,arrowX:0,arrowY:0,scaleX:1,scaleY:1,align:c[s]||{}}),m=Ue(v,2),E=m[0],C=m[1],b=S.useRef(0),R=S.useMemo(function(){return r?FN(r):[]},[r]),w=S.useRef({}),I=function(){w.current={}};e||I();var O=Fo(function(){if(r&&o&&e){let io=function(mp,_c){var Ul=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ze,Iu=fe.x+mp,jd=fe.y+_c,Bm=Iu+Ke,Vm=jd+Me,jm=Math.max(Iu,Ul.left),gp=Math.max(jd,Ul.top),zt=Math.min(Bm,Ul.right),Tn=Math.min(Vm,Ul.bottom);return Math.max(0,(zt-jm)*(Tn-gp))},wu=function(){Vr=fe.y+Vt,cr=Vr+Me,rn=fe.x+Mn,vi=rn+Ke};var Tu=io,Ru=wu,N,L,M=r,j=M.ownerDocument,$=Wv(M),H=$.getComputedStyle(M),G=H.width,Y=H.height,q=H.position,J=M.style.left,re=M.style.top,Z=M.style.right,Q=M.style.bottom,he=M.style.overflow,oe=_e(_e({},c[s]),d),ae=j.createElement("div");(N=M.parentElement)===null||N===void 0||N.appendChild(ae),ae.style.left="".concat(M.offsetLeft,"px"),ae.style.top="".concat(M.offsetTop,"px"),ae.style.position=q,ae.style.height="".concat(M.offsetHeight,"px"),ae.style.width="".concat(M.offsetWidth,"px"),M.style.left="0",M.style.top="0",M.style.right="auto",M.style.bottom="auto",M.style.overflow="hidden";var te;if(Array.isArray(o))te={x:o[0],y:o[1],width:0,height:0};else{var de=o.getBoundingClientRect();te={x:de.x,y:de.y,width:de.width,height:de.height}}var fe=M.getBoundingClientRect(),ie=j.documentElement,le=ie.clientWidth,ve=ie.clientHeight,ge=ie.scrollWidth,Te=ie.scrollHeight,we=ie.scrollTop,Ie=ie.scrollLeft,Me=fe.height,Ke=fe.width,ke=te.height,Ne=te.width,ze={left:0,top:0,right:le,bottom:ve},Qe={left:-Ie,top:-we,right:ge-Ie,bottom:Te-we},De=oe.htmlRegion,xe="visible",ft="visibleFirst";De!=="scroll"&&De!==ft&&(De=xe);var Et=De===ft,st=C7(Qe,R),ot=C7(ze,R),Ze=De===xe?ot:st,je=Et?ot:Ze;M.style.left="auto",M.style.top="auto",M.style.right="0",M.style.bottom="0";var ct=M.getBoundingClientRect();M.style.left=J,M.style.top=re,M.style.right=Z,M.style.bottom=Q,M.style.overflow=he,(L=M.parentElement)===null||L===void 0||L.removeChild(ae);var lt=wv(Math.round(Ke/parseFloat(G)*1e3)/1e3),gt=wv(Math.round(Me/parseFloat(Y)*1e3)/1e3);if(lt===0||gt===0||gv(o)&&!Bb(o))return;var Ot=oe.offset,Tt=oe.targetOffset,Wt=T7(fe,Ot),on=Ue(Wt,2),xt=on[0],wt=on[1],Pt=T7(te,Tt),Kt=Ue(Pt,2),fn=Kt[0],mn=Kt[1];te.x-=fn,te.y-=mn;var Un=oe.points||[],Kn=Ue(Un,2),qn=Kn[0],mt=Kn[1],Nt=R7(mt),Sn=R7(qn),ur=Lf(te,Nt),Br=Lf(fe,Sn),dr=_e({},oe),Mn=ur.x-Br.x+xt,Vt=ur.y-Br.y+wt,yn=io(Mn,Vt),$t=io(Mn,Vt,ot),Ct=Lf(te,["t","l"]),Ht=Lf(fe,["t","l"]),On=Lf(te,["b","r"]),rt=Lf(fe,["b","r"]),St=oe.overflow||{},It=St.adjustX,en=St.adjustY,En=St.shiftX,Cn=St.shiftY,pr=function(_c){return typeof _c=="boolean"?_c:_c>=0},Vr,cr,rn,vi;wu();var Wo=pr(en),po=Sn[0]===Nt[0];if(Wo&&Sn[0]==="t"&&(cr>je.bottom||w.current.bt)){var li=Vt;po?li-=Me-ke:li=Ct.y-rt.y-wt;var wi=io(Mn,li),Dt=io(Mn,li,ot);wi>yn||wi===yn&&(!Et||Dt>=$t)?(w.current.bt=!0,Vt=li,wt=-wt,dr.points=[hd(Sn,0),hd(Nt,0)]):w.current.bt=!1}if(Wo&&Sn[0]==="b"&&(Vr<je.top||w.current.tb)){var Mt=Vt;po?Mt+=Me-ke:Mt=On.y-Ht.y-wt;var Qt=io(Mn,Mt),Yn=io(Mn,Mt,ot);Qt>yn||Qt===yn&&(!Et||Yn>=$t)?(w.current.tb=!0,Vt=Mt,wt=-wt,dr.points=[hd(Sn,0),hd(Nt,0)]):w.current.tb=!1}var ki=pr(It),wo=Sn[1]===Nt[1];if(ki&&Sn[1]==="l"&&(vi>je.right||w.current.rl)){var An=Mn;wo?An-=Ke-Ne:An=Ct.x-rt.x-xt;var Io=io(An,Vt),Ma=io(An,Vt,ot);Io>yn||Io===yn&&(!Et||Ma>=$t)?(w.current.rl=!0,Mn=An,xt=-xt,dr.points=[hd(Sn,1),hd(Nt,1)]):w.current.rl=!1}if(ki&&Sn[1]==="r"&&(rn<je.left||w.current.lr)){var qt=Mn;wo?qt+=Ke-Ne:qt=On.x-Ht.x-xt;var xn=io(qt,Vt),vr=io(qt,Vt,ot);xn>yn||xn===yn&&(!Et||vr>=$t)?(w.current.lr=!0,Mn=qt,xt=-xt,dr.points=[hd(Sn,1),hd(Nt,1)]):w.current.lr=!1}wu();var ti=En===!0?0:En;typeof ti=="number"&&(rn<ot.left&&(Mn-=rn-ot.left-xt,te.x+Ne<ot.left+ti&&(Mn+=te.x-ot.left+Ne-ti)),vi>ot.right&&(Mn-=vi-ot.right-xt,te.x>ot.right-ti&&(Mn+=te.x-ot.right+ti)));var $i=Cn===!0?0:Cn;typeof $i=="number"&&(Vr<ot.top&&(Vt-=Vr-ot.top-wt,te.y+ke<ot.top+$i&&(Vt+=te.y-ot.top+ke-$i)),cr>ot.bottom&&(Vt-=cr-ot.bottom-wt,te.y>ot.bottom-$i&&(Vt+=te.y-ot.bottom+$i)));var Ec=fe.x+Mn,tl=Ec+Ke,Ca=fe.y+Vt,Ao=Ca+Me,Fa=te.x,Ua=Fa+Ne,Lt=te.y,Nn=Lt+ke,jn=Math.max(Ec,Fa),bn=Math.min(tl,Ua),gn=(jn+bn)/2,Er=gn-Ec,jr=Math.max(Ca,Lt),fo=Math.min(Ao,Nn),mo=(jr+fo)/2,Ba=mo-Ca;p==null||p(r,dr);var Hi=ct.right-fe.x-(Mn+fe.width),zo=ct.bottom-fe.y-(Vt+fe.height);lt===1&&(Mn=Math.round(Mn),Hi=Math.round(Hi)),gt===1&&(Vt=Math.round(Vt),zo=Math.round(zo));var as={ready:!0,offsetX:Mn/lt,offsetY:Vt/gt,offsetR:Hi/lt,offsetB:zo/gt,arrowX:Er/lt,arrowY:Ba/gt,scaleX:lt,scaleY:gt,align:dr};C(as)}}),x=function(){b.current+=1;var L=b.current;Promise.resolve().then(function(){b.current===L&&O()})},P=function(){C(function(L){return _e(_e({},L),{},{ready:!1})})};return kr(P,[s]),kr(function(){e||P()},[e]),[E.ready,E.offsetX,E.offsetY,E.offsetR,E.offsetB,E.arrowX,E.arrowY,E.scaleX,E.scaleY,E.align,x]}function uRe(e,r,o,s,c){kr(function(){if(e&&r&&o){let R=function(){s(),c()};var b=R,d=r,p=o,v=FN(d),m=FN(p),E=Wv(p),C=new Set([E].concat(_t(v),_t(m)));return C.forEach(function(w){w.addEventListener("scroll",R,{passive:!0})}),E.addEventListener("resize",R,{passive:!0}),s(),function(){C.forEach(function(w){w.removeEventListener("scroll",R),E.removeEventListener("resize",R)})}}},[e,r,o])}function dRe(e,r,o,s,c,d,p,v){var m=S.useRef(e);m.current=e,S.useEffect(function(){if(r&&s&&(!c||d)){var E=function(w){var I=w.target;m.current&&!p(I)&&v(!1)},C=Wv(s);C.addEventListener("mousedown",E,!0),C.addEventListener("contextmenu",E,!0);var b=bC(o);return b&&(b.addEventListener("mousedown",E,!0),b.addEventListener("contextmenu",E,!0)),function(){C.removeEventListener("mousedown",E,!0),C.removeEventListener("contextmenu",E,!0),b&&(b.removeEventListener("mousedown",E,!0),b.removeEventListener("contextmenu",E,!0))}}},[r,o,s,c,d])}var hRe=["prefixCls","children","action","showAction","hideAction","popupVisible","defaultPopupVisible","onPopupVisibleChange","afterPopupVisibleChange","mouseEnterDelay","mouseLeaveDelay","focusDelay","blurDelay","mask","maskClosable","getPopupContainer","forceRender","autoDestroy","destroyPopupOnHide","popup","popupClassName","popupStyle","popupPlacement","builtinPlacements","popupAlign","zIndex","stretch","getPopupClassNameFromAlign","fresh","alignPoint","onPopupClick","onPopupAlign","arrow","popupMotion","maskMotion","popupTransitionName","popupAnimation","maskTransitionName","maskAnimation","className","getTriggerDOMNode"];function pRe(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:lY,r=S.forwardRef(function(o,s){var c=o.prefixCls,d=c===void 0?"rc-trigger-popup":c,p=o.children,v=o.action,m=v===void 0?"hover":v,E=o.showAction,C=o.hideAction,b=o.popupVisible,R=o.defaultPopupVisible,w=o.onPopupVisibleChange,I=o.afterPopupVisibleChange,O=o.mouseEnterDelay,x=o.mouseLeaveDelay,P=x===void 0?.1:x,N=o.focusDelay,L=o.blurDelay,M=o.mask,j=o.maskClosable,$=j===void 0?!0:j,H=o.getPopupContainer,G=o.forceRender,Y=o.autoDestroy,q=o.destroyPopupOnHide,J=o.popup,re=o.popupClassName,Z=o.popupStyle,Q=o.popupPlacement,he=o.builtinPlacements,oe=he===void 0?{}:he,ae=o.popupAlign,te=o.zIndex,de=o.stretch,fe=o.getPopupClassNameFromAlign,ie=o.fresh,le=o.alignPoint,ve=o.onPopupClick,ge=o.onPopupAlign,Te=o.arrow,we=o.popupMotion,Ie=o.maskMotion,Me=o.popupTransitionName,Ke=o.popupAnimation,ke=o.maskTransitionName,Ne=o.maskAnimation,ze=o.className,Qe=o.getTriggerDOMNode,De=kn(o,hRe),xe=Y||q||!1,ft=S.useState(!1),Et=Ue(ft,2),st=Et[0],ot=Et[1];kr(function(){ot(PY())},[]);var Ze=S.useRef({}),je=S.useContext(_7),ct=S.useMemo(function(){return{registerSubPopup:function(Tn,Ii){Ze.current[Tn]=Ii,je==null||je.registerSubPopup(Tn,Ii)}}},[je]),lt=PCe(),gt=S.useState(null),Ot=Ue(gt,2),Tt=Ot[0],Wt=Ot[1],on=S.useRef(null),xt=Fo(function(zt){on.current=zt,gv(zt)&&Tt!==zt&&Wt(zt),je==null||je.registerSubPopup(lt,zt)}),wt=S.useState(null),Pt=Ue(wt,2),Kt=Pt[0],fn=Pt[1],mn=S.useRef(null),Un=Fo(function(zt){gv(zt)&&Kt!==zt&&(fn(zt),mn.current=zt)}),Kn=S.Children.only(p),qn=(Kn==null?void 0:Kn.props)||{},mt={},Nt=Fo(function(zt){var Tn,Ii,Ei=Kt;return(Ei==null?void 0:Ei.contains(zt))||((Tn=bC(Ei))===null||Tn===void 0?void 0:Tn.host)===zt||zt===Ei||(Tt==null?void 0:Tt.contains(zt))||((Ii=bC(Tt))===null||Ii===void 0?void 0:Ii.host)===zt||zt===Tt||Object.values(Ze.current).some(function(Ai){return(Ai==null?void 0:Ai.contains(zt))||zt===Ai})}),Sn=y7(d,we,Ke,Me),ur=y7(d,Ie,Ne,ke),Br=S.useState(R||!1),dr=Ue(Br,2),Mn=dr[0],Vt=dr[1],yn=b??Mn,$t=Fo(function(zt){b===void 0&&Vt(zt)});kr(function(){Vt(b||!1)},[b]);var Ct=S.useRef(yn);Ct.current=yn;var Ht=S.useRef([]);Ht.current=[];var On=Fo(function(zt){var Tn;$t(zt),((Tn=Ht.current[Ht.current.length-1])!==null&&Tn!==void 0?Tn:yn)!==zt&&(Ht.current.push(zt),w==null||w(zt))}),rt=S.useRef(),St=function(){clearTimeout(rt.current)},It=function(Tn){var Ii=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;St(),Ii===0?On(Tn):rt.current=setTimeout(function(){On(Tn)},Ii*1e3)};S.useEffect(function(){return St},[]);var en=S.useState(!1),En=Ue(en,2),Cn=En[0],pr=En[1];kr(function(zt){(!zt||yn)&&pr(!0)},[yn]);var Vr=S.useState(null),cr=Ue(Vr,2),rn=cr[0],vi=cr[1],Wo=S.useState([0,0]),po=Ue(Wo,2),li=po[0],wi=po[1],Dt=function(Tn){wi([Tn.clientX,Tn.clientY])},Mt=lRe(yn,Tt,le?li:Kt,Q,oe,ae,ge),Qt=Ue(Mt,11),Yn=Qt[0],ki=Qt[1],wo=Qt[2],An=Qt[3],Io=Qt[4],Ma=Qt[5],qt=Qt[6],xn=Qt[7],vr=Qt[8],ti=Qt[9],$i=Qt[10],Ec=aRe(st,m,E,C),tl=Ue(Ec,2),Ca=tl[0],Ao=tl[1],Fa=Ca.has("click"),Ua=Ao.has("click")||Ao.has("contextMenu"),Lt=Fo(function(){Cn||$i()}),Nn=function(){Ct.current&&le&&Ua&&It(!1)};uRe(yn,Kt,Tt,Lt,Nn),kr(function(){Lt()},[li,Q]),kr(function(){yn&&!(oe!=null&&oe[Q])&&Lt()},[JSON.stringify(ae)]);var jn=S.useMemo(function(){var zt=cRe(oe,d,ti,le);return He(zt,fe==null?void 0:fe(ti))},[ti,fe,oe,d,le]);S.useImperativeHandle(s,function(){return{nativeElement:mn.current,popupElement:on.current,forceAlign:Lt}});var bn=S.useState(0),gn=Ue(bn,2),Er=gn[0],jr=gn[1],fo=S.useState(0),mo=Ue(fo,2),Ba=mo[0],Hi=mo[1],zo=function(){if(de&&Kt){var Tn=Kt.getBoundingClientRect();jr(Tn.width),Hi(Tn.height)}},as=function(){zo(),Lt()},Tu=function(Tn){pr(!1),$i(),I==null||I(Tn)},Ru=function(){return new Promise(function(Tn){zo(),vi(function(){return Tn})})};kr(function(){rn&&($i(),rn(),vi(null))},[rn]);function io(zt,Tn,Ii,Ei){mt[zt]=function(Ai){var vp;Ei==null||Ei(Ai),It(Tn,Ii);for(var $m=arguments.length,Qv=new Array($m>1?$m-1:0),$d=1;$d<$m;$d++)Qv[$d-1]=arguments[$d];(vp=qn[zt])===null||vp===void 0||vp.call.apply(vp,[qn,Ai].concat(Qv))}}(Fa||Ua)&&(mt.onClick=function(zt){var Tn;Ct.current&&Ua?It(!1):!Ct.current&&Fa&&(Dt(zt),It(!0));for(var Ii=arguments.length,Ei=new Array(Ii>1?Ii-1:0),Ai=1;Ai<Ii;Ai++)Ei[Ai-1]=arguments[Ai];(Tn=qn.onClick)===null||Tn===void 0||Tn.call.apply(Tn,[qn,zt].concat(Ei))}),dRe(yn,Ua,Kt,Tt,M,$,Nt,It);var wu=Ca.has("hover"),mp=Ao.has("hover"),_c,Ul;wu&&(io("onMouseEnter",!0,O,function(zt){Dt(zt)}),io("onPointerEnter",!0,O,function(zt){Dt(zt)}),_c=function(Tn){(yn||Cn)&&Tt!==null&&Tt!==void 0&&Tt.contains(Tn.target)&&It(!0,O)},le&&(mt.onMouseMove=function(zt){var Tn;(Tn=qn.onMouseMove)===null||Tn===void 0||Tn.call(qn,zt)})),mp&&(io("onMouseLeave",!1,P),io("onPointerLeave",!1,P),Ul=function(){It(!1,P)}),Ca.has("focus")&&io("onFocus",!0,N),Ao.has("focus")&&io("onBlur",!1,L),Ca.has("contextMenu")&&(mt.onContextMenu=function(zt){var Tn;Ct.current&&Ao.has("contextMenu")?It(!1):(Dt(zt),It(!0)),zt.preventDefault();for(var Ii=arguments.length,Ei=new Array(Ii>1?Ii-1:0),Ai=1;Ai<Ii;Ai++)Ei[Ai-1]=arguments[Ai];(Tn=qn.onContextMenu)===null||Tn===void 0||Tn.call.apply(Tn,[qn,zt].concat(Ei))}),ze&&(mt.className=He(qn.className,ze));var Iu=_e(_e({},qn),mt),jd={},Bm=["onContextMenu","onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur"];Bm.forEach(function(zt){De[zt]&&(jd[zt]=function(){for(var Tn,Ii=arguments.length,Ei=new Array(Ii),Ai=0;Ai<Ii;Ai++)Ei[Ai]=arguments[Ai];(Tn=Iu[zt])===null||Tn===void 0||Tn.call.apply(Tn,[Iu].concat(Ei)),De[zt].apply(De,Ei)})});var Vm=S.cloneElement(Kn,_e(_e({},Iu),jd)),jm={x:Ma,y:qt},gp=Te?_e({},Te!==!0?Te:{}):null;return S.createElement(S.Fragment,null,S.createElement(yu,{disabled:!yn,ref:Un,onResize:as},S.createElement(oRe,{getTriggerDOMNode:Qe},Vm)),S.createElement(_7.Provider,{value:ct},S.createElement(iRe,{portal:e,ref:xt,prefixCls:d,popup:J,className:He(re,jn),style:Z,target:Kt,onMouseEnter:_c,onMouseLeave:Ul,onPointerEnter:_c,zIndex:te,open:yn,keepDom:Cn,fresh:ie,onClick:ve,mask:M,motion:Sn,maskMotion:ur,onVisibleChanged:Tu,onPrepare:Ru,forceRender:G,autoDestroy:xe,getPopupContainer:H,align:ti,arrow:gp,arrowPos:jm,ready:Yn,offsetX:ki,offsetY:wo,offsetR:An,offsetB:Io,onAlign:Lt,stretch:de,targetWidth:Er/xn,targetHeight:Ba/vr})))});return r}const PP=pRe(lY);var fRe=["prefixCls","disabled","visible","children","popupElement","animation","transitionName","dropdownStyle","dropdownClassName","direction","placement","builtinPlacements","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","getPopupContainer","empty","getTriggerDOMNode","onPopupVisibleChange","onPopupMouseEnter"],mRe=function(r){var o=r===!0?0:1;return{bottomLeft:{points:["tl","bl"],offset:[0,4],overflow:{adjustX:o,adjustY:1},htmlRegion:"scroll"},bottomRight:{points:["tr","br"],offset:[0,4],overflow:{adjustX:o,adjustY:1},htmlRegion:"scroll"},topLeft:{points:["bl","tl"],offset:[0,-4],overflow:{adjustX:o,adjustY:1},htmlRegion:"scroll"},topRight:{points:["br","tr"],offset:[0,-4],overflow:{adjustX:o,adjustY:1},htmlRegion:"scroll"}}},gRe=function(r,o){var s=r.prefixCls;r.disabled;var c=r.visible,d=r.children,p=r.popupElement,v=r.animation,m=r.transitionName,E=r.dropdownStyle,C=r.dropdownClassName,b=r.direction,R=b===void 0?"ltr":b,w=r.placement,I=r.builtinPlacements,O=r.dropdownMatchSelectWidth,x=r.dropdownRender,P=r.dropdownAlign,N=r.getPopupContainer,L=r.empty,M=r.getTriggerDOMNode,j=r.onPopupVisibleChange,$=r.onPopupMouseEnter,H=kn(r,fRe),G="".concat(s,"-dropdown"),Y=p;x&&(Y=x(p));var q=S.useMemo(function(){return I||mRe(O)},[I,O]),J=v?"".concat(G,"-").concat(v):m,re=typeof O=="number",Z=S.useMemo(function(){return re?null:O===!1?"minWidth":"width"},[O,re]),Q=E;re&&(Q=_e(_e({},Q),{},{width:O}));var he=S.useRef(null);return S.useImperativeHandle(o,function(){return{getPopupElement:function(){var ae;return(ae=he.current)===null||ae===void 0?void 0:ae.popupElement}}}),S.createElement(PP,Je({},H,{showAction:j?["click"]:[],hideAction:j?["click"]:[],popupPlacement:w||(R==="rtl"?"bottomRight":"bottomLeft"),builtinPlacements:q,prefixCls:G,popupTransitionName:J,popup:S.createElement("div",{onMouseEnter:$},Y),ref:he,stretch:Z,popupAlign:P,popupVisible:c,getPopupContainer:N,popupClassName:He(C,ye({},"".concat(G,"-empty"),L)),popupStyle:Q,getTriggerDOMNode:M,onPopupVisibleChange:j}),d)},vRe=S.forwardRef(gRe);function w7(e,r){var o=e.key,s;return"value"in e&&(s=e.value),o??(s!==void 0?s:"rc-index-key-".concat(r))}function UN(e){return typeof e<"u"&&!Number.isNaN(e)}function $Y(e,r){var o=e||{},s=o.label,c=o.value,d=o.options,p=o.groupLabel,v=s||(r?"children":"label");return{label:v,value:c||"value",options:d||"options",groupLabel:p||v}}function ERe(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=r.fieldNames,s=r.childrenAsData,c=[],d=$Y(o,!1),p=d.label,v=d.value,m=d.options,E=d.groupLabel;function C(b,R){Array.isArray(b)&&b.forEach(function(w){if(R||!(m in w)){var I=w[v];c.push({key:w7(w,c.length),groupOption:R,data:w,label:w[p],value:I})}else{var O=w[E];O===void 0&&s&&(O=w.label),c.push({key:w7(w,c.length),group:!0,data:w,label:O}),C(w[m],!0)}})}return C(e,!1),c}function BN(e){var r=_e({},e);return"props"in r||Object.defineProperty(r,"props",{get:function(){return ga(!1,"Return type is option instead of Option instance. Please read value directly instead of reading from `props`."),r}}),r}var _Re=function(r,o,s){if(!o||!o.length)return null;var c=!1,d=function v(m,E){var C=eq(E),b=C[0],R=C.slice(1);if(!b)return[m];var w=m.split(b);return c=c||w.length>1,w.reduce(function(I,O){return[].concat(_t(I),_t(v(O,R)))},[]).filter(Boolean)},p=d(r,o);return c?typeof s<"u"?p.slice(0,s):p:null},LP=S.createContext(null);function SRe(e){var r=e.visible,o=e.values;if(!r)return null;var s=50;return S.createElement("span",{"aria-live":"polite",style:{width:0,height:0,position:"absolute",overflow:"hidden",opacity:0}},"".concat(o.slice(0,s).map(function(c){var d=c.label,p=c.value;return["number","string"].includes(pn(d))?d:p}).join(", ")),o.length>s?", ...":null)}var yRe=["id","prefixCls","className","showSearch","tagRender","direction","omitDomProps","displayValues","onDisplayValuesChange","emptyOptions","notFoundContent","onClear","mode","disabled","loading","getInputElement","getRawInputElement","open","defaultOpen","onDropdownVisibleChange","activeValue","onActiveValueChange","activeDescendantId","searchValue","autoClearSearchValue","onSearch","onSearchSplit","tokenSeparators","allowClear","suffixIcon","clearIcon","OptionList","animation","transitionName","dropdownStyle","dropdownClassName","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","placement","builtinPlacements","getPopupContainer","showAction","onFocus","onBlur","onKeyUp","onKeyDown","onMouseDown"],CRe=["value","onChange","removeIcon","placeholder","autoFocus","maxTagCount","maxTagTextLength","maxTagPlaceholder","choiceTransitionName","onInputKeyDown","onPopupScroll","tabIndex"],VN=function(r){return r==="tags"||r==="multiple"},bRe=S.forwardRef(function(e,r){var o,s=e.id,c=e.prefixCls,d=e.className,p=e.showSearch,v=e.tagRender,m=e.direction,E=e.omitDomProps,C=e.displayValues,b=e.onDisplayValuesChange,R=e.emptyOptions,w=e.notFoundContent,I=w===void 0?"Not Found":w,O=e.onClear,x=e.mode,P=e.disabled,N=e.loading,L=e.getInputElement,M=e.getRawInputElement,j=e.open,$=e.defaultOpen,H=e.onDropdownVisibleChange,G=e.activeValue,Y=e.onActiveValueChange,q=e.activeDescendantId,J=e.searchValue,re=e.autoClearSearchValue,Z=e.onSearch,Q=e.onSearchSplit,he=e.tokenSeparators,oe=e.allowClear,ae=e.suffixIcon,te=e.clearIcon,de=e.OptionList,fe=e.animation,ie=e.transitionName,le=e.dropdownStyle,ve=e.dropdownClassName,ge=e.dropdownMatchSelectWidth,Te=e.dropdownRender,we=e.dropdownAlign,Ie=e.placement,Me=e.builtinPlacements,Ke=e.getPopupContainer,ke=e.showAction,Ne=ke===void 0?[]:ke,ze=e.onFocus,Qe=e.onBlur,De=e.onKeyUp,xe=e.onKeyDown,ft=e.onMouseDown,Et=kn(e,yRe),st=VN(x),ot=(p!==void 0?p:st)||x==="combobox",Ze=_e({},Et);CRe.forEach(function(Lt){delete Ze[Lt]}),E==null||E.forEach(function(Lt){delete Ze[Lt]});var je=S.useState(!1),ct=Ue(je,2),lt=ct[0],gt=ct[1];S.useEffect(function(){gt(PY())},[]);var Ot=S.useRef(null),Tt=S.useRef(null),Wt=S.useRef(null),on=S.useRef(null),xt=S.useRef(null),wt=S.useRef(!1),Pt=xTe(),Kt=Ue(Pt,3),fn=Kt[0],mn=Kt[1],Un=Kt[2];S.useImperativeHandle(r,function(){var Lt,Nn;return{focus:(Lt=on.current)===null||Lt===void 0?void 0:Lt.focus,blur:(Nn=on.current)===null||Nn===void 0?void 0:Nn.blur,scrollTo:function(bn){var gn;return(gn=xt.current)===null||gn===void 0?void 0:gn.scrollTo(bn)},nativeElement:Ot.current||Tt.current}});var Kn=S.useMemo(function(){var Lt;if(x!=="combobox")return J;var Nn=(Lt=C[0])===null||Lt===void 0?void 0:Lt.value;return typeof Nn=="string"||typeof Nn=="number"?String(Nn):""},[J,x,C]),qn=x==="combobox"&&typeof L=="function"&&L()||null,mt=typeof M=="function"&&M(),Nt=Vv(Tt,mt==null||(o=mt.props)===null||o===void 0?void 0:o.ref),Sn=S.useState(!1),ur=Ue(Sn,2),Br=ur[0],dr=ur[1];kr(function(){dr(!0)},[]);var Mn=va(!1,{defaultValue:$,value:j}),Vt=Ue(Mn,2),yn=Vt[0],$t=Vt[1],Ct=Br?yn:!1,Ht=!I&&R;(P||Ht&&Ct&&x==="combobox")&&(Ct=!1);var On=Ht?!1:Ct,rt=S.useCallback(function(Lt){var Nn=Lt!==void 0?Lt:!Ct;P||($t(Nn),Ct!==Nn&&(H==null||H(Nn)))},[P,Ct,$t,H]),St=S.useMemo(function(){return(he||[]).some(function(Lt){return[`
`,`\r
`].includes(Lt)})},[he]),It=S.useContext(LP)||{},en=It.maxCount,En=It.rawValues,Cn=function(Nn,jn,bn){if(!(st&&UN(en)&&(En==null?void 0:En.size)>=en)){var gn=!0,Er=Nn;Y==null||Y(null);var jr=_Re(Nn,he,UN(en)?en-En.size:void 0),fo=bn?null:jr;return x!=="combobox"&&fo&&(Er="",Q==null||Q(fo),rt(!1),gn=!1),Z&&Kn!==Er&&Z(Er,{source:jn?"typing":"effect"}),gn}},pr=function(Nn){!Nn||!Nn.trim()||Z(Nn,{source:"submit"})};S.useEffect(function(){!Ct&&!st&&x!=="combobox"&&Cn("",!1,!1)},[Ct]),S.useEffect(function(){yn&&P&&$t(!1),P&&!wt.current&&mn(!1)},[P]);var Vr=kY(),cr=Ue(Vr,2),rn=cr[0],vi=cr[1],Wo=function(Nn){var jn=rn(),bn=Nn.which;if(bn===dt.ENTER&&(x!=="combobox"&&Nn.preventDefault(),Ct||rt(!0)),vi(!!Kn),bn===dt.BACKSPACE&&!jn&&st&&!Kn&&C.length){for(var gn=_t(C),Er=null,jr=gn.length-1;jr>=0;jr-=1){var fo=gn[jr];if(!fo.disabled){gn.splice(jr,1),Er=fo;break}}Er&&b(gn,{type:"remove",values:[Er]})}for(var mo=arguments.length,Ba=new Array(mo>1?mo-1:0),Hi=1;Hi<mo;Hi++)Ba[Hi-1]=arguments[Hi];if(Ct){var zo;(zo=xt.current)===null||zo===void 0||zo.onKeyDown.apply(zo,[Nn].concat(Ba))}xe==null||xe.apply(void 0,[Nn].concat(Ba))},po=function(Nn){for(var jn=arguments.length,bn=new Array(jn>1?jn-1:0),gn=1;gn<jn;gn++)bn[gn-1]=arguments[gn];if(Ct){var Er;(Er=xt.current)===null||Er===void 0||Er.onKeyUp.apply(Er,[Nn].concat(bn))}De==null||De.apply(void 0,[Nn].concat(bn))},li=function(Nn){var jn=C.filter(function(bn){return bn!==Nn});b(jn,{type:"remove",values:[Nn]})},wi=S.useRef(!1),Dt=function(){mn(!0),P||(ze&&!wi.current&&ze.apply(void 0,arguments),Ne.includes("focus")&&rt(!0)),wi.current=!0},Mt=function(){wt.current=!0,mn(!1,function(){wi.current=!1,wt.current=!1,rt(!1)}),!P&&(Kn&&(x==="tags"?Z(Kn,{source:"submit"}):x==="multiple"&&Z("",{source:"blur"})),Qe&&Qe.apply(void 0,arguments))},Qt=[];S.useEffect(function(){return function(){Qt.forEach(function(Lt){return clearTimeout(Lt)}),Qt.splice(0,Qt.length)}},[]);var Yn=function(Nn){var jn,bn=Nn.target,gn=(jn=Wt.current)===null||jn===void 0?void 0:jn.getPopupElement();if(gn&&gn.contains(bn)){var Er=setTimeout(function(){var Ba=Qt.indexOf(Er);if(Ba!==-1&&Qt.splice(Ba,1),Un(),!lt&&!gn.contains(document.activeElement)){var Hi;(Hi=on.current)===null||Hi===void 0||Hi.focus()}});Qt.push(Er)}for(var jr=arguments.length,fo=new Array(jr>1?jr-1:0),mo=1;mo<jr;mo++)fo[mo-1]=arguments[mo];ft==null||ft.apply(void 0,[Nn].concat(fo))},ki=S.useState({}),wo=Ue(ki,2),An=wo[1];function Io(){An({})}var Ma;mt&&(Ma=function(Nn){rt(Nn)}),NTe(function(){var Lt;return[Ot.current,(Lt=Wt.current)===null||Lt===void 0?void 0:Lt.getPopupElement()]},On,rt,!!mt);var qt=S.useMemo(function(){return _e(_e({},e),{},{notFoundContent:I,open:Ct,triggerOpen:On,id:s,showSearch:ot,multiple:st,toggleOpen:rt})},[e,I,On,Ct,s,ot,st,rt]),xn=!!ae||N,vr;xn&&(vr=S.createElement(jb,{className:He("".concat(c,"-arrow"),ye({},"".concat(c,"-arrow-loading"),N)),customizeIcon:ae,customizeIconProps:{loading:N,searchValue:Kn,open:Ct,focused:fn,showSearch:ot}}));var ti=function(){var Nn;O==null||O(),(Nn=on.current)===null||Nn===void 0||Nn.focus(),b([],{type:"clear",values:C}),Cn("",!1,!1)},$i=ATe(c,ti,C,oe,te,P,Kn,x),Ec=$i.allowClear,tl=$i.clearIcon,Ca=S.createElement(de,{ref:xt}),Ao=He(c,d,ye(ye(ye(ye(ye(ye(ye(ye(ye(ye({},"".concat(c,"-focused"),fn),"".concat(c,"-multiple"),st),"".concat(c,"-single"),!st),"".concat(c,"-allow-clear"),oe),"".concat(c,"-show-arrow"),xn),"".concat(c,"-disabled"),P),"".concat(c,"-loading"),N),"".concat(c,"-open"),Ct),"".concat(c,"-customize-input"),qn),"".concat(c,"-show-search"),ot)),Fa=S.createElement(vRe,{ref:Wt,disabled:P,prefixCls:c,visible:On,popupElement:Ca,animation:fe,transitionName:ie,dropdownStyle:le,dropdownClassName:ve,direction:m,dropdownMatchSelectWidth:ge,dropdownRender:Te,dropdownAlign:we,placement:Ie,builtinPlacements:Me,getPopupContainer:Ke,empty:R,getTriggerDOMNode:function(Nn){return Tt.current||Nn},onPopupVisibleChange:Ma,onPopupMouseEnter:Io},mt?S.cloneElement(mt,{ref:Nt}):S.createElement(eRe,Je({},e,{domRef:Tt,prefixCls:c,inputElement:qn,ref:on,id:s,showSearch:ot,autoClearSearchValue:re,mode:x,activeDescendantId:q,tagRender:v,values:C,open:Ct,onToggleOpen:rt,activeValue:G,searchValue:Kn,onSearch:Cn,onSearchSubmit:pr,onRemove:li,tokenWithEnter:St}))),Ua;return mt?Ua=Fa:Ua=S.createElement("div",Je({className:Ao},Ze,{ref:Ot,onMouseDown:Yn,onKeyDown:Wo,onKeyUp:po,onFocus:Dt,onBlur:Mt}),S.createElement(SRe,{visible:fn&&!Ct,values:C}),Fa,vr,Ec&&tl),S.createElement(LY.Provider,{value:qt},Ua)}),kP=function(){return null};kP.isSelectOptGroup=!0;var MP=function(){return null};MP.isSelectOption=!0;var HY=S.forwardRef(function(e,r){var o=e.height,s=e.offsetY,c=e.offsetX,d=e.children,p=e.prefixCls,v=e.onInnerResize,m=e.innerProps,E=e.rtl,C=e.extra,b={},R={display:"flex",flexDirection:"column"};return s!==void 0&&(b={height:o,position:"relative",overflow:"hidden"},R=_e(_e({},R),{},ye(ye(ye(ye(ye({transform:"translateY(".concat(s,"px)")},E?"marginRight":"marginLeft",-c),"position","absolute"),"left",0),"right",0),"top",0))),S.createElement("div",{style:b},S.createElement(yu,{onResize:function(I){var O=I.offsetHeight;O&&v&&v()}},S.createElement("div",Je({style:R,className:He(ye({},"".concat(p,"-holder-inner"),p)),ref:r},m),d,C)))});HY.displayName="Filler";function TRe(e){var r=e.children,o=e.setRef,s=S.useCallback(function(c){o(c)},[]);return S.cloneElement(r,{ref:s})}function RRe(e,r,o,s,c,d,p,v){var m=v.getKey;return e.slice(r,o+1).map(function(E,C){var b=r+C,R=p(E,b,{style:{width:s},offsetX:c}),w=m(E);return S.createElement(TRe,{key:w,setRef:function(O){return d(E,O)}},R)})}function wRe(e,r,o){var s=e.length,c=r.length,d,p;if(s===0&&c===0)return null;s<c?(d=e,p=r):(d=r,p=e);var v={__EMPTY_ITEM__:!0};function m(I){return I!==void 0?o(I):v}for(var E=null,C=Math.abs(s-c)!==1,b=0;b<p.length;b+=1){var R=m(d[b]),w=m(p[b]);if(R!==w){E=b,C=C||R!==m(p[b+1]);break}}return E===null?null:{index:E,multiple:C}}function IRe(e,r,o){var s=S.useState(e),c=Ue(s,2),d=c[0],p=c[1],v=S.useState(null),m=Ue(v,2),E=m[0],C=m[1];return S.useEffect(function(){var b=wRe(d||[],e||[],r);(b==null?void 0:b.index)!==void 0&&(o==null||o(b.index),C(e[b.index])),p(e)},[e]),[E]}var I7=(typeof navigator>"u"?"undefined":pn(navigator))==="object"&&/Firefox/i.test(navigator.userAgent);const WY=function(e,r,o,s){var c=S.useRef(!1),d=S.useRef(null);function p(){clearTimeout(d.current),c.current=!0,d.current=setTimeout(function(){c.current=!1},50)}var v=S.useRef({top:e,bottom:r,left:o,right:s});return v.current.top=e,v.current.bottom=r,v.current.left=o,v.current.right=s,function(m,E){var C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,b=m?E<0&&v.current.left||E>0&&v.current.right:E<0&&v.current.top||E>0&&v.current.bottom;return C&&b?(clearTimeout(d.current),c.current=!1):(!b||c.current)&&p(),!c.current&&b}};function ARe(e,r,o,s,c,d,p){var v=S.useRef(0),m=S.useRef(null),E=S.useRef(null),C=S.useRef(!1),b=WY(r,o,s,c);function R(N,L){ci.cancel(m.current),v.current+=L,E.current=L,!b(!1,L)&&(I7||N.preventDefault(),m.current=ci(function(){var M=C.current?10:1;p(v.current*M),v.current=0}))}function w(N,L){p(L,!0),I7||N.preventDefault()}var I=S.useRef(null),O=S.useRef(null);function x(N){if(e){ci.cancel(O.current),O.current=ci(function(){I.current=null},2);var L=N.deltaX,M=N.deltaY,j=N.shiftKey,$=L,H=M;(I.current==="sx"||!I.current&&j&&M&&!L)&&($=M,H=0,I.current="sx");var G=Math.abs($),Y=Math.abs(H);I.current===null&&(I.current=d&&G>Y?"x":"y"),I.current==="y"?R(N,H):w(N,$)}}function P(N){e&&(C.current=N.detail===E.current)}return[x,P]}function ORe(e,r,o,s){var c=S.useMemo(function(){return[new Map,[]]},[e,o.id,s]),d=Ue(c,2),p=d[0],v=d[1],m=function(C){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:C,R=p.get(C),w=p.get(b);if(R===void 0||w===void 0)for(var I=e.length,O=v.length;O<I;O+=1){var x,P=e[O],N=r(P);p.set(N,O);var L=(x=o.get(N))!==null&&x!==void 0?x:s;if(v[O]=(v[O-1]||0)+L,N===C&&(R=O),N===b&&(w=O),R!==void 0&&w!==void 0)break}return{top:v[R-1]||0,bottom:v[w]}};return m}var xRe=function(){function e(){Bo(this,e),ye(this,"maps",void 0),ye(this,"id",0),this.maps=Object.create(null)}return Vo(e,[{key:"set",value:function(o,s){this.maps[o]=s,this.id+=1}},{key:"get",value:function(o){return this.maps[o]}}]),e}();function NRe(e,r,o){var s=S.useState(0),c=Ue(s,2),d=c[0],p=c[1],v=S.useRef(new Map),m=S.useRef(new xRe),E=S.useRef();function C(){ci.cancel(E.current)}function b(){var w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;C();var I=function(){v.current.forEach(function(x,P){if(x&&x.offsetParent){var N=Hg(x),L=N.offsetHeight;m.current.get(P)!==L&&m.current.set(P,N.offsetHeight)}}),p(function(x){return x+1})};w?I():E.current=ci(I)}function R(w,I){var O=e(w),x=v.current.get(O);I?(v.current.set(O,I),b()):v.current.delete(O),!x!=!I&&(I?r==null||r(w):o==null||o(w))}return S.useEffect(function(){return C},[]),[R,b,m.current,d]}var A7=14/15;function DRe(e,r,o){var s=S.useRef(!1),c=S.useRef(0),d=S.useRef(0),p=S.useRef(null),v=S.useRef(null),m,E=function(w){if(s.current){var I=Math.ceil(w.touches[0].pageX),O=Math.ceil(w.touches[0].pageY),x=c.current-I,P=d.current-O,N=Math.abs(x)>Math.abs(P);N?c.current=I:d.current=O,o(N,N?x:P)&&w.preventDefault(),clearInterval(v.current),v.current=setInterval(function(){N?x*=A7:P*=A7;var L=Math.floor(N?x:P);(!o(N,L,!0)||Math.abs(L)<=.1)&&clearInterval(v.current)},16)}},C=function(){s.current=!1,m()},b=function(w){m(),w.touches.length===1&&!s.current&&(s.current=!0,c.current=Math.ceil(w.touches[0].pageX),d.current=Math.ceil(w.touches[0].pageY),p.current=w.target,p.current.addEventListener("touchmove",E),p.current.addEventListener("touchend",C))};m=function(){p.current&&(p.current.removeEventListener("touchmove",E),p.current.removeEventListener("touchend",C))},kr(function(){return e&&r.current.addEventListener("touchstart",b),function(){var R;(R=r.current)===null||R===void 0||R.removeEventListener("touchstart",b),m(),clearInterval(v.current)}},[e])}var PRe=10;function LRe(e,r,o,s,c,d,p,v){var m=S.useRef(),E=S.useState(null),C=Ue(E,2),b=C[0],R=C[1];return kr(function(){if(b&&b.times<PRe){if(!e.current){R(function(de){return _e({},de)});return}d();var w=b.targetAlign,I=b.originAlign,O=b.index,x=b.offset,P=e.current.clientHeight,N=!1,L=w,M=null;if(P){for(var j=w||I,$=0,H=0,G=0,Y=Math.min(r.length-1,O),q=0;q<=Y;q+=1){var J=c(r[q]);H=$;var re=o.get(J);G=H+(re===void 0?s:re),$=G}for(var Z=j==="top"?x:P-x,Q=Y;Q>=0;Q-=1){var he=c(r[Q]),oe=o.get(he);if(oe===void 0){N=!0;break}if(Z-=oe,Z<=0)break}switch(j){case"top":M=H-x;break;case"bottom":M=G-P+x;break;default:{var ae=e.current.scrollTop,te=ae+P;H<ae?L="top":G>te&&(L="bottom")}}M!==null&&p(M),M!==b.lastTop&&(N=!0)}N&&R(_e(_e({},b),{},{times:b.times+1,targetAlign:L,lastTop:M}))}},[b,e.current]),function(w){if(w==null){v();return}if(ci.cancel(m.current),typeof w=="number")p(w);else if(w&&pn(w)==="object"){var I,O=w.align;"index"in w?I=w.index:I=r.findIndex(function(N){return c(N)===w.key});var x=w.offset,P=x===void 0?0:x;R({times:0,index:I,offset:P,originAlign:O})}}}function O7(e,r){var o="touches"in e?e.touches[0]:e;return o[r?"pageX":"pageY"]}var x7=S.forwardRef(function(e,r){var o=e.prefixCls,s=e.rtl,c=e.scrollOffset,d=e.scrollRange,p=e.onStartMove,v=e.onStopMove,m=e.onScroll,E=e.horizontal,C=e.spinSize,b=e.containerSize,R=e.style,w=e.thumbStyle,I=S.useState(!1),O=Ue(I,2),x=O[0],P=O[1],N=S.useState(null),L=Ue(N,2),M=L[0],j=L[1],$=S.useState(null),H=Ue($,2),G=H[0],Y=H[1],q=!s,J=S.useRef(),re=S.useRef(),Z=S.useState(!1),Q=Ue(Z,2),he=Q[0],oe=Q[1],ae=S.useRef(),te=function(){clearTimeout(ae.current),oe(!0),ae.current=setTimeout(function(){oe(!1)},3e3)},de=d-b||0,fe=b-C||0,ie=S.useMemo(function(){if(c===0||de===0)return 0;var ke=c/de;return ke*fe},[c,de,fe]),le=function(Ne){Ne.stopPropagation(),Ne.preventDefault()},ve=S.useRef({top:ie,dragging:x,pageY:M,startTop:G});ve.current={top:ie,dragging:x,pageY:M,startTop:G};var ge=function(Ne){P(!0),j(O7(Ne,E)),Y(ve.current.top),p(),Ne.stopPropagation(),Ne.preventDefault()};S.useEffect(function(){var ke=function(De){De.preventDefault()},Ne=J.current,ze=re.current;return Ne.addEventListener("touchstart",ke),ze.addEventListener("touchstart",ge),function(){Ne.removeEventListener("touchstart",ke),ze.removeEventListener("touchstart",ge)}},[]);var Te=S.useRef();Te.current=de;var we=S.useRef();we.current=fe,S.useEffect(function(){if(x){var ke,Ne=function(De){var xe=ve.current,ft=xe.dragging,Et=xe.pageY,st=xe.startTop;if(ci.cancel(ke),ft){var ot=O7(De,E)-Et,Ze=st;!q&&E?Ze-=ot:Ze+=ot;var je=Te.current,ct=we.current,lt=ct?Ze/ct:0,gt=Math.ceil(lt*je);gt=Math.max(gt,0),gt=Math.min(gt,je),ke=ci(function(){m(gt,E)})}},ze=function(){P(!1),v()};return window.addEventListener("mousemove",Ne),window.addEventListener("touchmove",Ne),window.addEventListener("mouseup",ze),window.addEventListener("touchend",ze),function(){window.removeEventListener("mousemove",Ne),window.removeEventListener("touchmove",Ne),window.removeEventListener("mouseup",ze),window.removeEventListener("touchend",ze),ci.cancel(ke)}}},[x]),S.useEffect(function(){te()},[c]),S.useImperativeHandle(r,function(){return{delayHidden:te}});var Ie="".concat(o,"-scrollbar"),Me={position:"absolute",visibility:he?null:"hidden"},Ke={position:"absolute",background:"rgba(0, 0, 0, 0.5)",borderRadius:99,cursor:"pointer",userSelect:"none"};return E?(Me.height=8,Me.left=0,Me.right=0,Me.bottom=0,Ke.height="100%",Ke.width=C,q?Ke.left=ie:Ke.right=ie):(Me.width=8,Me.top=0,Me.bottom=0,q?Me.right=0:Me.left=0,Ke.width="100%",Ke.height=C,Ke.top=ie),S.createElement("div",{ref:J,className:He(Ie,ye(ye(ye({},"".concat(Ie,"-horizontal"),E),"".concat(Ie,"-vertical"),!E),"".concat(Ie,"-visible"),he)),style:_e(_e({},Me),R),onMouseDown:le,onMouseMove:te},S.createElement("div",{ref:re,className:He("".concat(Ie,"-thumb"),ye({},"".concat(Ie,"-thumb-moving"),x)),style:_e(_e({},Ke),w),onMouseDown:ge}))}),kRe=20;function N7(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=e/r*e;return isNaN(o)&&(o=0),o=Math.max(o,kRe),Math.floor(o)}var MRe=["prefixCls","className","height","itemHeight","fullHeight","style","data","children","itemKey","virtual","direction","scrollWidth","component","onScroll","onVirtualScroll","onVisibleChange","innerProps","extraRender","styles"],FRe=[],URe={overflowY:"auto",overflowAnchor:"none"};function BRe(e,r){var o=e.prefixCls,s=o===void 0?"rc-virtual-list":o,c=e.className,d=e.height,p=e.itemHeight,v=e.fullHeight,m=v===void 0?!0:v,E=e.style,C=e.data,b=e.children,R=e.itemKey,w=e.virtual,I=e.direction,O=e.scrollWidth,x=e.component,P=x===void 0?"div":x,N=e.onScroll,L=e.onVirtualScroll,M=e.onVisibleChange,j=e.innerProps,$=e.extraRender,H=e.styles,G=kn(e,MRe),Y=S.useCallback(function(Dt){return typeof R=="function"?R(Dt):Dt==null?void 0:Dt[R]},[R]),q=NRe(Y,null,null),J=Ue(q,4),re=J[0],Z=J[1],Q=J[2],he=J[3],oe=!!(w!==!1&&d&&p),ae=S.useMemo(function(){return Object.values(Q.maps).reduce(function(Dt,Mt){return Dt+Mt},0)},[Q.id,Q.maps]),te=oe&&C&&(Math.max(p*C.length,ae)>d||!!O),de=I==="rtl",fe=He(s,ye({},"".concat(s,"-rtl"),de),c),ie=C||FRe,le=S.useRef(),ve=S.useRef(),ge=S.useRef(),Te=S.useState(0),we=Ue(Te,2),Ie=we[0],Me=we[1],Ke=S.useState(0),ke=Ue(Ke,2),Ne=ke[0],ze=ke[1],Qe=S.useState(!1),De=Ue(Qe,2),xe=De[0],ft=De[1],Et=function(){ft(!0)},st=function(){ft(!1)},ot={getKey:Y};function Ze(Dt){Me(function(Mt){var Qt;typeof Dt=="function"?Qt=Dt(Mt):Qt=Dt;var Yn=Br(Qt);return le.current.scrollTop=Yn,Yn})}var je=S.useRef({start:0,end:ie.length}),ct=S.useRef(),lt=IRe(ie,Y),gt=Ue(lt,1),Ot=gt[0];ct.current=Ot;var Tt=S.useMemo(function(){if(!oe)return{scrollHeight:void 0,start:0,end:ie.length-1,offset:void 0};if(!te){var Dt;return{scrollHeight:((Dt=ve.current)===null||Dt===void 0?void 0:Dt.offsetHeight)||0,start:0,end:ie.length-1,offset:void 0}}for(var Mt=0,Qt,Yn,ki,wo=ie.length,An=0;An<wo;An+=1){var Io=ie[An],Ma=Y(Io),qt=Q.get(Ma),xn=Mt+(qt===void 0?p:qt);xn>=Ie&&Qt===void 0&&(Qt=An,Yn=Mt),xn>Ie+d&&ki===void 0&&(ki=An),Mt=xn}return Qt===void 0&&(Qt=0,Yn=0,ki=Math.ceil(d/p)),ki===void 0&&(ki=ie.length-1),ki=Math.min(ki+1,ie.length-1),{scrollHeight:Mt,start:Qt,end:ki,offset:Yn}},[te,oe,Ie,ie,he,d]),Wt=Tt.scrollHeight,on=Tt.start,xt=Tt.end,wt=Tt.offset;je.current.start=on,je.current.end=xt;var Pt=S.useState({width:0,height:d}),Kt=Ue(Pt,2),fn=Kt[0],mn=Kt[1],Un=function(Mt){mn({width:Mt.width||Mt.offsetWidth,height:Mt.height||Mt.offsetHeight})},Kn=S.useRef(),qn=S.useRef(),mt=S.useMemo(function(){return N7(fn.width,O)},[fn.width,O]),Nt=S.useMemo(function(){return N7(fn.height,Wt)},[fn.height,Wt]),Sn=Wt-d,ur=S.useRef(Sn);ur.current=Sn;function Br(Dt){var Mt=Dt;return Number.isNaN(ur.current)||(Mt=Math.min(Mt,ur.current)),Mt=Math.max(Mt,0),Mt}var dr=Ie<=0,Mn=Ie>=Sn,Vt=Ne<=0,yn=Ne>=O,$t=WY(dr,Mn,Vt,yn),Ct=function(){return{x:de?-Ne:Ne,y:Ie}},Ht=S.useRef(Ct()),On=Fo(function(Dt){if(L){var Mt=_e(_e({},Ct()),Dt);(Ht.current.x!==Mt.x||Ht.current.y!==Mt.y)&&(L(Mt),Ht.current=Mt)}});function rt(Dt,Mt){var Qt=Dt;Mt?(kl.flushSync(function(){ze(Qt)}),On()):Ze(Qt)}function St(Dt){var Mt=Dt.currentTarget.scrollTop;Mt!==Ie&&Ze(Mt),N==null||N(Dt),On()}var It=function(Mt){var Qt=Mt,Yn=O?O-fn.width:0;return Qt=Math.max(Qt,0),Qt=Math.min(Qt,Yn),Qt},en=Fo(function(Dt,Mt){Mt?(kl.flushSync(function(){ze(function(Qt){var Yn=Qt+(de?-Dt:Dt);return It(Yn)})}),On()):Ze(function(Qt){var Yn=Qt+Dt;return Yn})}),En=ARe(oe,dr,Mn,Vt,yn,!!O,en),Cn=Ue(En,2),pr=Cn[0],Vr=Cn[1];DRe(oe,le,function(Dt,Mt,Qt){return $t(Dt,Mt,Qt)?!1:(pr({preventDefault:function(){},deltaX:Dt?Mt:0,deltaY:Dt?0:Mt}),!0)}),kr(function(){function Dt(Qt){oe&&Qt.preventDefault()}var Mt=le.current;return Mt.addEventListener("wheel",pr),Mt.addEventListener("DOMMouseScroll",Vr),Mt.addEventListener("MozMousePixelScroll",Dt),function(){Mt.removeEventListener("wheel",pr),Mt.removeEventListener("DOMMouseScroll",Vr),Mt.removeEventListener("MozMousePixelScroll",Dt)}},[oe]),kr(function(){if(O){var Dt=It(Ne);ze(Dt),On({x:Dt})}},[fn.width,O]);var cr=function(){var Mt,Qt;(Mt=Kn.current)===null||Mt===void 0||Mt.delayHidden(),(Qt=qn.current)===null||Qt===void 0||Qt.delayHidden()},rn=LRe(le,ie,Q,p,Y,function(){return Z(!0)},Ze,cr);S.useImperativeHandle(r,function(){return{nativeElement:ge.current,getScrollInfo:Ct,scrollTo:function(Mt){function Qt(Yn){return Yn&&pn(Yn)==="object"&&("left"in Yn||"top"in Yn)}Qt(Mt)?(Mt.left!==void 0&&ze(It(Mt.left)),rn(Mt.top)):rn(Mt)}}}),kr(function(){if(M){var Dt=ie.slice(on,xt+1);M(Dt,ie)}},[on,xt,ie]);var vi=ORe(ie,Y,Q,p),Wo=$==null?void 0:$({start:on,end:xt,virtual:te,offsetX:Ne,offsetY:wt,rtl:de,getSize:vi}),po=RRe(ie,on,xt,O,Ne,re,b,ot),li=null;d&&(li=_e(ye({},m?"height":"maxHeight",d),URe),oe&&(li.overflowY="hidden",O&&(li.overflowX="hidden"),xe&&(li.pointerEvents="none")));var wi={};return de&&(wi.dir="rtl"),S.createElement("div",Je({ref:ge,style:_e(_e({},E),{},{position:"relative"}),className:fe},wi,G),S.createElement(yu,{onResize:Un},S.createElement(P,{className:"".concat(s,"-holder"),style:li,ref:le,onScroll:St,onMouseEnter:cr},S.createElement(HY,{prefixCls:s,height:Wt,offsetX:Ne,offsetY:wt,scrollWidth:O,onInnerResize:Z,ref:ve,innerProps:j,rtl:de,extra:Wo},po))),te&&Wt>d&&S.createElement(x7,{ref:Kn,prefixCls:s,scrollOffset:Ie,scrollRange:Wt,rtl:de,onScroll:rt,onStartMove:Et,onStopMove:st,spinSize:Nt,containerSize:fn.height,style:H==null?void 0:H.verticalScrollBar,thumbStyle:H==null?void 0:H.verticalScrollBarThumb}),te&&O>fn.width&&S.createElement(x7,{ref:qn,prefixCls:s,scrollOffset:Ne,scrollRange:O,rtl:de,onScroll:rt,onStartMove:Et,onStopMove:st,spinSize:mt,containerSize:fn.width,horizontal:!0,style:H==null?void 0:H.horizontalScrollBar,thumbStyle:H==null?void 0:H.horizontalScrollBarThumb}))}var zY=S.forwardRef(BRe);zY.displayName="List";function VRe(){return/(mac\sos|macintosh)/i.test(navigator.appVersion)}var jRe=["disabled","title","children","style","className"];function D7(e){return typeof e=="string"||typeof e=="number"}var $Re=function(r,o){var s=OTe(),c=s.prefixCls,d=s.id,p=s.open,v=s.multiple,m=s.mode,E=s.searchValue,C=s.toggleOpen,b=s.notFoundContent,R=s.onPopupScroll,w=S.useContext(LP),I=w.maxCount,O=w.flattenOptions,x=w.onActiveValue,P=w.defaultActiveFirstOption,N=w.onSelect,L=w.menuItemSelectedIcon,M=w.rawValues,j=w.fieldNames,$=w.virtual,H=w.direction,G=w.listHeight,Y=w.listItemHeight,q=w.optionRender,J="".concat(c,"-item"),re=Bv(function(){return O},[p,O],function(ke,Ne){return Ne[0]&&ke[1]!==Ne[1]}),Z=S.useRef(null),Q=S.useMemo(function(){return v&&UN(I)&&(M==null?void 0:M.size)>=I},[v,I,M==null?void 0:M.size]),he=function(Ne){Ne.preventDefault()},oe=function(Ne){var ze;(ze=Z.current)===null||ze===void 0||ze.scrollTo(typeof Ne=="number"?{index:Ne}:Ne)},ae=function(Ne){for(var ze=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,Qe=re.length,De=0;De<Qe;De+=1){var xe=(Ne+De*ze+Qe)%Qe,ft=re[xe]||{},Et=ft.group,st=ft.data;if(!Et&&!(st!=null&&st.disabled)&&!Q)return xe}return-1},te=S.useState(function(){return ae(0)}),de=Ue(te,2),fe=de[0],ie=de[1],le=function(Ne){var ze=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;ie(Ne);var Qe={source:ze?"keyboard":"mouse"},De=re[Ne];if(!De){x(null,-1,Qe);return}x(De.value,Ne,Qe)};S.useEffect(function(){le(P!==!1?ae(0):-1)},[re.length,E]);var ve=S.useCallback(function(ke){return M.has(ke)&&m!=="combobox"},[m,_t(M).toString(),M.size]);S.useEffect(function(){var ke=setTimeout(function(){if(!v&&p&&M.size===1){var ze=Array.from(M)[0],Qe=re.findIndex(function(De){var xe=De.data;return xe.value===ze});Qe!==-1&&(le(Qe),oe(Qe))}});if(p){var Ne;(Ne=Z.current)===null||Ne===void 0||Ne.scrollTo(void 0)}return function(){return clearTimeout(ke)}},[p,E]);var ge=function(Ne){Ne!==void 0&&N(Ne,{selected:!M.has(Ne)}),v||C(!1)};if(S.useImperativeHandle(o,function(){return{onKeyDown:function(Ne){var ze=Ne.which,Qe=Ne.ctrlKey;switch(ze){case dt.N:case dt.P:case dt.UP:case dt.DOWN:{var De=0;if(ze===dt.UP?De=-1:ze===dt.DOWN?De=1:VRe()&&Qe&&(ze===dt.N?De=1:ze===dt.P&&(De=-1)),De!==0){var xe=ae(fe+De,De);oe(xe),le(xe,!0)}break}case dt.ENTER:{var ft,Et=re[fe];Et&&!(Et!=null&&(ft=Et.data)!==null&&ft!==void 0&&ft.disabled)&&!Q?ge(Et.value):ge(void 0),p&&Ne.preventDefault();break}case dt.ESC:C(!1),p&&Ne.stopPropagation()}},onKeyUp:function(){},scrollTo:function(Ne){oe(Ne)}}}),re.length===0)return S.createElement("div",{role:"listbox",id:"".concat(d,"_list"),className:"".concat(J,"-empty"),onMouseDown:he},b);var Te=Object.keys(j).map(function(ke){return j[ke]}),we=function(Ne){return Ne.label};function Ie(ke,Ne){var ze=ke.group;return{role:ze?"presentation":"option",id:"".concat(d,"_list_").concat(Ne)}}var Me=function(Ne){var ze=re[Ne];if(!ze)return null;var Qe=ze.data||{},De=Qe.value,xe=ze.group,ft=ep(Qe,!0),Et=we(ze);return ze?S.createElement("div",Je({"aria-label":typeof Et=="string"&&!xe?Et:null},ft,{key:Ne},Ie(ze,Ne),{"aria-selected":ve(De)}),De):null},Ke={role:"listbox",id:"".concat(d,"_list")};return S.createElement(S.Fragment,null,$&&S.createElement("div",Je({},Ke,{style:{height:0,width:0,overflow:"hidden"}}),Me(fe-1),Me(fe),Me(fe+1)),S.createElement(zY,{itemKey:"key",ref:Z,data:re,height:G,itemHeight:Y,fullHeight:!1,onMouseDown:he,onScroll:R,virtual:$,direction:H,innerProps:$?null:Ke},function(ke,Ne){var ze=ke.group,Qe=ke.groupOption,De=ke.data,xe=ke.label,ft=ke.value,Et=De.key;if(ze){var st,ot=(st=De.title)!==null&&st!==void 0?st:D7(xe)?xe.toString():void 0;return S.createElement("div",{className:He(J,"".concat(J,"-group"),De.className),title:ot},xe!==void 0?xe:Et)}var Ze=De.disabled,je=De.title;De.children;var ct=De.style,lt=De.className,gt=kn(De,jRe),Ot=Sa(gt,Te),Tt=ve(ft),Wt=Ze||!Tt&&Q,on="".concat(J,"-option"),xt=He(J,on,lt,ye(ye(ye(ye({},"".concat(on,"-grouped"),Qe),"".concat(on,"-active"),fe===Ne&&!Wt),"".concat(on,"-disabled"),Wt),"".concat(on,"-selected"),Tt)),wt=we(ke),Pt=!L||typeof L=="function"||Tt,Kt=typeof wt=="number"?wt:wt||ft,fn=D7(Kt)?Kt.toString():void 0;return je!==void 0&&(fn=je),S.createElement("div",Je({},ep(Ot),$?{}:Ie(ke,Ne),{"aria-selected":Tt,className:xt,title:fn,onMouseMove:function(){fe===Ne||Wt||le(Ne)},onClick:function(){Wt||ge(ft)},style:ct}),S.createElement("div",{className:"".concat(on,"-content")},typeof q=="function"?q(ke,{index:Ne}):Kt),S.isValidElement(L)||Tt,Pt&&S.createElement(jb,{className:"".concat(J,"-option-state"),customizeIcon:L,customizeIconProps:{value:ft,disabled:Wt,isSelected:Tt}},Tt?"✓":null))}))},HRe=S.forwardRef($Re);const WRe=function(e,r){var o=S.useRef({values:new Map,options:new Map}),s=S.useMemo(function(){var d=o.current,p=d.values,v=d.options,m=e.map(function(b){if(b.label===void 0){var R;return _e(_e({},b),{},{label:(R=p.get(b.value))===null||R===void 0?void 0:R.label})}return b}),E=new Map,C=new Map;return m.forEach(function(b){E.set(b.value,b),C.set(b.value,r.get(b.value)||v.get(b.value))}),o.current.values=E,o.current.options=C,m},[e,r]),c=S.useCallback(function(d){return r.get(d)||o.current.options.get(d)},[r]);return[s,c]};function KA(e,r){return VY(e).join("").toUpperCase().includes(r)}const zRe=function(e,r,o,s,c){return S.useMemo(function(){if(!o||s===!1)return e;var d=r.options,p=r.label,v=r.value,m=[],E=typeof s=="function",C=o.toUpperCase(),b=E?s:function(w,I){return c?KA(I[c],C):I[d]?KA(I[p!=="children"?p:"label"],C):KA(I[v],C)},R=E?function(w){return BN(w)}:function(w){return w};return e.forEach(function(w){if(w[d]){var I=b(o,R(w));if(I)m.push(w);else{var O=w[d].filter(function(x){return b(o,R(x))});O.length&&m.push(_e(_e({},w),{},ye({},d,O)))}return}b(o,R(w))&&m.push(w)}),m},[e,s,c,o,r])};var P7=0,GRe=Na();function KRe(){var e;return GRe?(e=P7,P7+=1):e="TEST_OR_SSR",e}function qRe(e){var r=S.useState(),o=Ue(r,2),s=o[0],c=o[1];return S.useEffect(function(){c("rc_select_".concat(KRe()))},[]),e||s}var YRe=["children","value"],XRe=["children"];function JRe(e){var r=e,o=r.key,s=r.props,c=s.children,d=s.value,p=kn(s,YRe);return _e({key:o,value:d!==void 0?d:o,children:c},p)}function GY(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return Jc(e).map(function(o,s){if(!S.isValidElement(o)||!o.type)return null;var c=o,d=c.type.isSelectOptGroup,p=c.key,v=c.props,m=v.children,E=kn(v,XRe);return r||!d?JRe(o):_e(_e({key:"__RC_SELECT_GRP__".concat(p===null?s:p,"__"),label:p},E),{},{options:GY(m)})}).filter(function(o){return o})}var QRe=function(r,o,s,c,d){return S.useMemo(function(){var p=r,v=!r;v&&(p=GY(o));var m=new Map,E=new Map,C=function(w,I,O){O&&typeof O=="string"&&w.set(I[O],I)},b=function R(w){for(var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,O=0;O<w.length;O+=1){var x=w[O];!x[s.options]||I?(m.set(x[s.value],x),C(E,x,s.label),C(E,x,c),C(E,x,d)):R(x[s.options],!0)}};return b(p),{options:p,valueOptions:m,labelOptions:E}},[r,o,s,c,d])};function L7(e){var r=S.useRef();r.current=e;var o=S.useCallback(function(){return r.current.apply(r,arguments)},[]);return o}var ZRe=["id","mode","prefixCls","backfill","fieldNames","inputValue","searchValue","onSearch","autoClearSearchValue","onSelect","onDeselect","dropdownMatchSelectWidth","filterOption","filterSort","optionFilterProp","optionLabelProp","options","optionRender","children","defaultActiveFirstOption","menuItemSelectedIcon","virtual","direction","listHeight","listItemHeight","labelRender","value","defaultValue","labelInValue","onChange","maxCount"],ewe=["inputValue"];function twe(e){return!e||pn(e)!=="object"}var nwe=S.forwardRef(function(e,r){var o=e.id,s=e.mode,c=e.prefixCls,d=c===void 0?"rc-select":c,p=e.backfill,v=e.fieldNames,m=e.inputValue,E=e.searchValue,C=e.onSearch,b=e.autoClearSearchValue,R=b===void 0?!0:b,w=e.onSelect,I=e.onDeselect,O=e.dropdownMatchSelectWidth,x=O===void 0?!0:O,P=e.filterOption,N=e.filterSort,L=e.optionFilterProp,M=e.optionLabelProp,j=e.options,$=e.optionRender,H=e.children,G=e.defaultActiveFirstOption,Y=e.menuItemSelectedIcon,q=e.virtual,J=e.direction,re=e.listHeight,Z=re===void 0?200:re,Q=e.listItemHeight,he=Q===void 0?20:Q,oe=e.labelRender,ae=e.value,te=e.defaultValue,de=e.labelInValue,fe=e.onChange,ie=e.maxCount,le=kn(e,ZRe),ve=qRe(o),ge=VN(s),Te=!!(!j&&H),we=S.useMemo(function(){return P===void 0&&s==="combobox"?!1:P},[P,s]),Ie=S.useMemo(function(){return $Y(v,Te)},[JSON.stringify(v),Te]),Me=va("",{value:E!==void 0?E:m,postState:function(St){return St||""}}),Ke=Ue(Me,2),ke=Ke[0],Ne=Ke[1],ze=QRe(j,H,Ie,L,M),Qe=ze.valueOptions,De=ze.labelOptions,xe=ze.options,ft=S.useCallback(function(rt){var St=VY(rt);return St.map(function(It){var en,En,Cn,pr,Vr;if(twe(It))en=It;else{var cr;Cn=It.key,En=It.label,en=(cr=It.value)!==null&&cr!==void 0?cr:Cn}var rn=Qe.get(en);if(rn){var vi;En===void 0&&(En=rn==null?void 0:rn[M||Ie.label]),Cn===void 0&&(Cn=(vi=rn==null?void 0:rn.key)!==null&&vi!==void 0?vi:en),pr=rn==null?void 0:rn.disabled,Vr=rn==null?void 0:rn.title}return{label:En,value:en,key:Cn,disabled:pr,title:Vr}})},[Ie,M,Qe]),Et=va(te,{value:ae}),st=Ue(Et,2),ot=st[0],Ze=st[1],je=S.useMemo(function(){var rt,St=ge&&ot===null?[]:ot,It=ft(St);return s==="combobox"&&qTe((rt=It[0])===null||rt===void 0?void 0:rt.value)?[]:It},[ot,ft,s,ge]),ct=WRe(je,Qe),lt=Ue(ct,2),gt=lt[0],Ot=lt[1],Tt=S.useMemo(function(){if(!s&&gt.length===1){var rt=gt[0];if(rt.value===null&&(rt.label===null||rt.label===void 0))return[]}return gt.map(function(St){var It;return _e(_e({},St),{},{label:(It=typeof oe=="function"?oe(St):St.label)!==null&&It!==void 0?It:St.value})})},[s,gt,oe]),Wt=S.useMemo(function(){return new Set(gt.map(function(rt){return rt.value}))},[gt]);S.useEffect(function(){if(s==="combobox"){var rt,St=(rt=gt[0])===null||rt===void 0?void 0:rt.value;Ne(KTe(St)?String(St):"")}},[gt]);var on=L7(function(rt,St){var It=St??rt;return ye(ye({},Ie.value,rt),Ie.label,It)}),xt=S.useMemo(function(){if(s!=="tags")return xe;var rt=_t(xe),St=function(en){return Qe.has(en)};return _t(gt).sort(function(It,en){return It.value<en.value?-1:1}).forEach(function(It){var en=It.value;St(en)||rt.push(on(en,It.label))}),rt},[on,xe,Qe,gt,s]),wt=zRe(xt,Ie,ke,we,L),Pt=S.useMemo(function(){return s!=="tags"||!ke||wt.some(function(rt){return rt[L||"value"]===ke})||wt.some(function(rt){return rt[Ie.value]===ke})?wt:[on(ke)].concat(_t(wt))},[on,L,s,wt,ke,Ie]),Kt=S.useMemo(function(){return N?_t(Pt).sort(function(rt,St){return N(rt,St)}):Pt},[Pt,N]),fn=S.useMemo(function(){return ERe(Kt,{fieldNames:Ie,childrenAsData:Te})},[Kt,Ie,Te]),mn=function(St){var It=ft(St);if(Ze(It),fe&&(It.length!==gt.length||It.some(function(Cn,pr){var Vr;return((Vr=gt[pr])===null||Vr===void 0?void 0:Vr.value)!==(Cn==null?void 0:Cn.value)}))){var en=de?It:It.map(function(Cn){return Cn.value}),En=It.map(function(Cn){return BN(Ot(Cn.value))});fe(ge?en:en[0],ge?En:En[0])}},Un=S.useState(null),Kn=Ue(Un,2),qn=Kn[0],mt=Kn[1],Nt=S.useState(0),Sn=Ue(Nt,2),ur=Sn[0],Br=Sn[1],dr=G!==void 0?G:s!=="combobox",Mn=S.useCallback(function(rt,St){var It=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},en=It.source,En=en===void 0?"keyboard":en;Br(St),p&&s==="combobox"&&rt!==null&&En==="keyboard"&&mt(String(rt))},[p,s]),Vt=function(St,It,en){var En=function(){var wi,Dt=Ot(St);return[de?{label:Dt==null?void 0:Dt[Ie.label],value:St,key:(wi=Dt==null?void 0:Dt.key)!==null&&wi!==void 0?wi:St}:St,BN(Dt)]};if(It&&w){var Cn=En(),pr=Ue(Cn,2),Vr=pr[0],cr=pr[1];w(Vr,cr)}else if(!It&&I&&en!=="clear"){var rn=En(),vi=Ue(rn,2),Wo=vi[0],po=vi[1];I(Wo,po)}},yn=L7(function(rt,St){var It,en=ge?St.selected:!0;en?It=ge?[].concat(_t(gt),[rt]):[rt]:It=gt.filter(function(En){return En.value!==rt}),mn(It),Vt(rt,en),s==="combobox"?mt(""):(!VN||R)&&(Ne(""),mt(""))}),$t=function(St,It){mn(St);var en=It.type,En=It.values;(en==="remove"||en==="clear")&&En.forEach(function(Cn){Vt(Cn.value,!1,en)})},Ct=function(St,It){if(Ne(St),mt(null),It.source==="submit"){var en=(St||"").trim();if(en){var En=Array.from(new Set([].concat(_t(Wt),[en])));mn(En),Vt(en,!0),Ne("")}return}It.source!=="blur"&&(s==="combobox"&&mn(St),C==null||C(St))},Ht=function(St){var It=St;s!=="tags"&&(It=St.map(function(En){var Cn=De.get(En);return Cn==null?void 0:Cn.value}).filter(function(En){return En!==void 0}));var en=Array.from(new Set([].concat(_t(Wt),_t(It))));mn(en),en.forEach(function(En){Vt(En,!0)})},On=S.useMemo(function(){var rt=q!==!1&&x!==!1;return _e(_e({},ze),{},{flattenOptions:fn,onActiveValue:Mn,defaultActiveFirstOption:dr,onSelect:yn,menuItemSelectedIcon:Y,rawValues:Wt,fieldNames:Ie,virtual:rt,direction:J,listHeight:Z,listItemHeight:he,childrenAsData:Te,maxCount:ie,optionRender:$})},[ie,ze,fn,Mn,dr,yn,Y,Wt,Ie,q,x,J,Z,he,Te,$]);return S.createElement(LP.Provider,{value:On},S.createElement(bRe,Je({},le,{id:ve,prefixCls:d,ref:r,omitDomProps:ewe,mode:s,displayValues:Tt,onDisplayValuesChange:$t,direction:J,searchValue:ke,onSearch:Ct,autoClearSearchValue:R,onSearchSplit:Ht,dropdownMatchSelectWidth:x,OptionList:HRe,emptyOptions:!fn.length,activeValue:qn,activeDescendantId:"".concat(ve,"_list_").concat(ur)})))}),FP=nwe;FP.Option=MP;FP.OptGroup=kP;function AC(e,r,o){return He({[`${e}-status-success`]:r==="success",[`${e}-status-warning`]:r==="warning",[`${e}-status-error`]:r==="error",[`${e}-status-validating`]:r==="validating",[`${e}-has-feedback`]:o})}const $b=(e,r)=>r||e,rwe=()=>{const[,e]=_a(),o=new bo(e.colorBgBase).toHsl().l<.5?{opacity:.65}:{};return S.createElement("svg",{style:o,width:"184",height:"152",viewBox:"0 0 184 152",xmlns:"http://www.w3.org/2000/svg"},S.createElement("g",{fill:"none",fillRule:"evenodd"},S.createElement("g",{transform:"translate(24 31.67)"},S.createElement("ellipse",{fillOpacity:".8",fill:"#F5F5F7",cx:"67.797",cy:"106.89",rx:"67.797",ry:"12.668"}),S.createElement("path",{d:"M122.034 69.674L98.109 40.229c-1.148-1.386-2.826-2.225-4.593-2.225h-51.44c-1.766 0-3.444.839-4.592 2.225L13.56 69.674v15.383h108.475V69.674z",fill:"#AEB8C2"}),S.createElement("path",{d:"M101.537 86.214L80.63 61.102c-1.001-1.207-2.507-1.867-4.048-1.867H31.724c-1.54 0-3.047.66-4.048 1.867L6.769 86.214v13.792h94.768V86.214z",fill:"url(#linearGradient-1)",transform:"translate(13.56)"}),S.createElement("path",{d:"M33.83 0h67.933a4 4 0 0 1 4 4v93.344a4 4 0 0 1-4 4H33.83a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4z",fill:"#F5F5F7"}),S.createElement("path",{d:"M42.678 9.953h50.237a2 2 0 0 1 2 2V36.91a2 2 0 0 1-2 2H42.678a2 2 0 0 1-2-2V11.953a2 2 0 0 1 2-2zM42.94 49.767h49.713a2.262 2.262 0 1 1 0 4.524H42.94a2.262 2.262 0 0 1 0-4.524zM42.94 61.53h49.713a2.262 2.262 0 1 1 0 4.525H42.94a2.262 2.262 0 0 1 0-4.525zM121.813 105.032c-.775 3.071-3.497 5.36-6.735 5.36H20.515c-3.238 0-5.96-2.29-6.734-5.36a7.309 7.309 0 0 1-.222-1.79V69.675h26.318c2.907 0 5.25 2.448 5.25 5.42v.04c0 2.971 2.37 5.37 5.277 5.37h34.785c2.907 0 5.277-2.421 5.277-5.393V75.1c0-2.972 2.343-5.426 5.25-5.426h26.318v33.569c0 .617-.077 1.216-.221 1.789z",fill:"#DCE0E6"})),S.createElement("path",{d:"M149.121 33.292l-6.83 2.65a1 1 0 0 1-1.317-1.23l1.937-6.207c-2.589-2.944-4.109-6.534-4.109-10.408C138.802 8.102 148.92 0 161.402 0 173.881 0 184 8.102 184 18.097c0 9.995-10.118 18.097-22.599 18.097-4.528 0-8.744-1.066-12.28-2.902z",fill:"#DCE0E6"}),S.createElement("g",{transform:"translate(149.65 15.383)",fill:"#FFF"},S.createElement("ellipse",{cx:"20.654",cy:"3.167",rx:"2.849",ry:"2.815"}),S.createElement("path",{d:"M5.698 5.63H0L2.898.704zM9.259.704h4.985V5.63H9.259z"}))))},iwe=rwe,owe=()=>{const[,e]=_a(),{colorFill:r,colorFillTertiary:o,colorFillQuaternary:s,colorBgContainer:c}=e,{borderColor:d,shadowColor:p,contentColor:v}=S.useMemo(()=>({borderColor:new bo(r).onBackground(c).toHexShortString(),shadowColor:new bo(o).onBackground(c).toHexShortString(),contentColor:new bo(s).onBackground(c).toHexShortString()}),[r,o,s,c]);return S.createElement("svg",{width:"64",height:"41",viewBox:"0 0 64 41",xmlns:"http://www.w3.org/2000/svg"},S.createElement("g",{transform:"translate(0 1)",fill:"none",fillRule:"evenodd"},S.createElement("ellipse",{fill:p,cx:"32",cy:"33",rx:"32",ry:"7"}),S.createElement("g",{fillRule:"nonzero",stroke:d},S.createElement("path",{d:"M55 12.76L44.854 1.258C44.367.474 43.656 0 42.907 0H21.093c-.749 0-1.46.474-1.947 1.257L9 12.761V22h46v-9.24z"}),S.createElement("path",{d:"M41.613 15.931c0-1.605.994-2.93 2.227-2.931H55v18.137C55 33.26 53.68 35 52.05 35h-40.1C10.32 35 9 33.259 9 31.137V13h11.16c1.233 0 2.227 1.323 2.227 2.928v.022c0 1.605 1.005 2.901 2.237 2.901h14.752c1.232 0 2.237-1.308 2.237-2.913v-.007z",fill:v}))))},awe=owe,swe=e=>{const{componentCls:r,margin:o,marginXS:s,marginXL:c,fontSize:d,lineHeight:p}=e;return{[r]:{marginInline:s,fontSize:d,lineHeight:p,textAlign:"center",[`${r}-image`]:{height:e.emptyImgHeight,marginBottom:s,opacity:e.opacityImage,img:{height:"100%"},svg:{maxWidth:"100%",height:"100%",margin:"auto"}},[`${r}-description`]:{color:e.colorText},[`${r}-footer`]:{marginTop:o},"&-normal":{marginBlock:c,color:e.colorTextDescription,[`${r}-description`]:{color:e.colorTextDescription},[`${r}-image`]:{height:e.emptyImgHeightMD}},"&-small":{marginBlock:s,color:e.colorTextDescription,[`${r}-image`]:{height:e.emptyImgHeightSM}}}}},cwe=ya("Empty",e=>{const{componentCls:r,controlHeightLG:o,calc:s}=e,c=gi(e,{emptyImgCls:`${r}-img`,emptyImgHeight:s(o).mul(2.5).equal(),emptyImgHeightMD:o,emptyImgHeightSM:s(o).mul(.875).equal()});return[swe(c)]});var lwe=globalThis&&globalThis.__rest||function(e,r){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};const KY=S.createElement(iwe,null),qY=S.createElement(awe,null),UP=e=>{var{className:r,rootClassName:o,prefixCls:s,image:c=KY,description:d,children:p,imageStyle:v,style:m}=e,E=lwe(e,["className","rootClassName","prefixCls","image","description","children","imageStyle","style"]);const{getPrefixCls:C,direction:b,empty:R}=S.useContext(Qn),w=C("empty",s),[I,O,x]=cwe(w),[P]=Nb("Empty"),N=typeof d<"u"?d:P==null?void 0:P.description,L=typeof N=="string"?N:"empty";let M=null;return typeof c=="string"?M=S.createElement("img",{alt:L,src:c}):M=c,I(S.createElement("div",Object.assign({className:He(O,x,w,R==null?void 0:R.className,{[`${w}-normal`]:c===qY,[`${w}-rtl`]:b==="rtl"},r,o),style:Object.assign(Object.assign({},R==null?void 0:R.style),m)},E),S.createElement("div",{className:`${w}-image`,style:v},M),N&&S.createElement("div",{className:`${w}-description`},N),p&&S.createElement("div",{className:`${w}-footer`},p)))};UP.PRESENTED_IMAGE_DEFAULT=KY;UP.PRESENTED_IMAGE_SIMPLE=qY;const _g=UP,uwe=e=>{const{componentName:r}=e,{getPrefixCls:o}=S.useContext(Qn),s=o("empty");switch(r){case"Table":case"List":return Be.createElement(_g,{image:_g.PRESENTED_IMAGE_SIMPLE});case"Select":case"TreeSelect":case"Cascader":case"Transfer":case"Mentions":return Be.createElement(_g,{image:_g.PRESENTED_IMAGE_SIMPLE,className:`${s}-small`});default:return Be.createElement(_g,null)}},YY=uwe,dwe=["outlined","borderless","filled"],hwe=function(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;const o=S.useContext(SY);let s;typeof e<"u"?s=e:r===!1?s="borderless":s=o??"outlined";const c=dwe.includes(s);return[s,c]},BP=hwe,pwe=e=>{const o={overflow:{adjustX:!0,adjustY:!0,shiftY:!0},htmlRegion:e==="scroll"?"scroll":"visible",dynamicInset:!0};return{bottomLeft:Object.assign(Object.assign({},o),{points:["tl","bl"],offset:[0,4]}),bottomRight:Object.assign(Object.assign({},o),{points:["tr","br"],offset:[0,4]}),topLeft:Object.assign(Object.assign({},o),{points:["bl","tl"],offset:[0,-4]}),topRight:Object.assign(Object.assign({},o),{points:["br","tr"],offset:[0,-4]})}};function fwe(e,r){return e||pwe(r)}const k7=e=>{const{optionHeight:r,optionFontSize:o,optionLineHeight:s,optionPadding:c}=e;return{position:"relative",display:"block",minHeight:r,padding:c,color:e.colorText,fontWeight:"normal",fontSize:o,lineHeight:s,boxSizing:"border-box"}},mwe=e=>{const{antCls:r,componentCls:o}=e,s=`${o}-item`,c=`&${r}-slide-up-enter${r}-slide-up-enter-active`,d=`&${r}-slide-up-appear${r}-slide-up-appear-active`,p=`&${r}-slide-up-leave${r}-slide-up-leave-active`,v=`${o}-dropdown-placement-`;return[{[`${o}-dropdown`]:Object.assign(Object.assign({},Ds(e)),{position:"absolute",top:-9999,zIndex:e.zIndexPopup,boxSizing:"border-box",padding:e.paddingXXS,overflow:"hidden",fontSize:e.fontSize,fontVariant:"initial",backgroundColor:e.colorBgElevated,borderRadius:e.borderRadiusLG,outline:"none",boxShadow:e.boxShadowSecondary,[`
          ${c}${v}bottomLeft,
          ${d}${v}bottomLeft
        `]:{animationName:CY},[`
          ${c}${v}topLeft,
          ${d}${v}topLeft,
          ${c}${v}topRight,
          ${d}${v}topRight
        `]:{animationName:TY},[`${p}${v}bottomLeft`]:{animationName:bY},[`
          ${p}${v}topLeft,
          ${p}${v}topRight
        `]:{animationName:RY},"&-hidden":{display:"none"},[`${s}`]:Object.assign(Object.assign({},k7(e)),{cursor:"pointer",transition:`background ${e.motionDurationSlow} ease`,borderRadius:e.borderRadiusSM,"&-group":{color:e.colorTextDescription,fontSize:e.fontSizeSM,cursor:"default"},"&-option":{display:"flex","&-content":Object.assign({flex:"auto"},SC),"&-state":{flex:"none",display:"flex",alignItems:"center"},[`&-active:not(${s}-option-disabled)`]:{backgroundColor:e.optionActiveBg},[`&-selected:not(${s}-option-disabled)`]:{color:e.optionSelectedColor,fontWeight:e.optionSelectedFontWeight,backgroundColor:e.optionSelectedBg,[`${s}-option-state`]:{color:e.colorPrimary},[`&:has(+ ${s}-option-selected:not(${s}-option-disabled))`]:{borderEndStartRadius:0,borderEndEndRadius:0,[`& + ${s}-option-selected:not(${s}-option-disabled)`]:{borderStartStartRadius:0,borderStartEndRadius:0}}},"&-disabled":{[`&${s}-option-selected`]:{backgroundColor:e.colorBgContainerDisabled},color:e.colorTextDisabled,cursor:"not-allowed"},"&-grouped":{paddingInlineStart:e.calc(e.controlPaddingHorizontal).mul(2).equal()}},"&-empty":Object.assign(Object.assign({},k7(e)),{color:e.colorTextDisabled})}),"&-rtl":{direction:"rtl"}})},wC(e,"slide-up"),wC(e,"slide-down"),p7(e,"move-up"),p7(e,"move-down")]},gwe=mwe,vwe=e=>{const{multipleSelectItemHeight:r,paddingXXS:o,lineWidth:s,INTERNAL_FIXED_ITEM_MARGIN:c}=e,d=e.max(e.calc(o).sub(s).equal(),0),p=e.max(e.calc(d).sub(c).equal(),0);return{basePadding:d,containerPadding:p,itemHeight:qe(r),itemLineHeight:qe(e.calc(r).sub(e.calc(e.lineWidth).mul(2)).equal())}},Ewe=e=>{const{multipleSelectItemHeight:r,selectHeight:o,lineWidth:s}=e;return e.calc(o).sub(r).div(2).sub(s).equal()},_we=e=>{const{componentCls:r,iconCls:o,borderRadiusSM:s,motionDurationSlow:c,paddingXS:d,multipleItemColorDisabled:p,multipleItemBorderColorDisabled:v,colorIcon:m,colorIconHover:E,INTERNAL_FIXED_ITEM_MARGIN:C}=e;return{[`${r}-selection-overflow`]:{position:"relative",display:"flex",flex:"auto",flexWrap:"wrap",maxWidth:"100%","&-item":{flex:"none",alignSelf:"center",maxWidth:"100%",display:"inline-flex"},[`${r}-selection-item`]:{display:"flex",alignSelf:"center",flex:"none",boxSizing:"border-box",maxWidth:"100%",marginBlock:C,borderRadius:s,cursor:"default",transition:`font-size ${c}, line-height ${c}, height ${c}`,marginInlineEnd:e.calc(C).mul(2).equal(),paddingInlineStart:d,paddingInlineEnd:e.calc(d).div(2).equal(),[`${r}-disabled&`]:{color:p,borderColor:v,cursor:"not-allowed"},"&-content":{display:"inline-block",marginInlineEnd:e.calc(d).div(2).equal(),overflow:"hidden",whiteSpace:"pre",textOverflow:"ellipsis"},"&-remove":Object.assign(Object.assign({},Db()),{display:"inline-flex",alignItems:"center",color:m,fontWeight:"bold",fontSize:10,lineHeight:"inherit",cursor:"pointer",[`> ${o}`]:{verticalAlign:"-0.2em"},"&:hover":{color:E}})}}}},Swe=(e,r)=>{const{componentCls:o,INTERNAL_FIXED_ITEM_MARGIN:s}=e,c=`${o}-selection-overflow`,d=e.multipleSelectItemHeight,p=Ewe(e),v=r?`${o}-${r}`:"",m=vwe(e);return{[`${o}-multiple${v}`]:Object.assign(Object.assign({},_we(e)),{[`${o}-selector`]:{display:"flex",flexWrap:"wrap",alignItems:"center",height:"100%",paddingInline:m.basePadding,paddingBlock:m.containerPadding,borderRadius:e.borderRadius,[`${o}-disabled&`]:{background:e.multipleSelectorBgDisabled,cursor:"not-allowed"},"&:after":{display:"inline-block",width:0,margin:`${qe(s)} 0`,lineHeight:qe(d),visibility:"hidden",content:'"\\a0"'}},[`${o}-selection-item`]:{height:m.itemHeight,lineHeight:qe(m.itemLineHeight)},[`${c}-item + ${c}-item`]:{[`${o}-selection-search`]:{marginInlineStart:0}},[`${c}-item-suffix`]:{height:"100%"},[`${o}-selection-search`]:{display:"inline-flex",position:"relative",maxWidth:"100%",marginInlineStart:e.calc(e.inputPaddingHorizontalBase).sub(p).equal(),"\n          &-input,\n          &-mirror\n        ":{height:d,fontFamily:e.fontFamily,lineHeight:qe(d),transition:`all ${e.motionDurationSlow}`},"&-input":{width:"100%",minWidth:4.1},"&-mirror":{position:"absolute",top:0,insetInlineStart:0,insetInlineEnd:"auto",zIndex:999,whiteSpace:"pre",visibility:"hidden"}},[`${o}-selection-placeholder`]:{position:"absolute",top:"50%",insetInlineStart:e.inputPaddingHorizontalBase,insetInlineEnd:e.inputPaddingHorizontalBase,transform:"translateY(-50%)",transition:`all ${e.motionDurationSlow}`}})}};function qA(e,r){const{componentCls:o}=e,s=r?`${o}-${r}`:"",c={[`${o}-multiple${s}`]:{fontSize:e.fontSize,[`${o}-selector`]:{[`${o}-show-search&`]:{cursor:"text"}},[`
        &${o}-show-arrow ${o}-selector,
        &${o}-allow-clear ${o}-selector
      `]:{paddingInlineEnd:e.calc(e.fontSizeIcon).add(e.controlPaddingHorizontal).equal()}}};return[Swe(e,r),c]}const ywe=e=>{const{componentCls:r}=e,o=gi(e,{selectHeight:e.controlHeightSM,multipleSelectItemHeight:e.multipleItemHeightSM,borderRadius:e.borderRadiusSM,borderRadiusSM:e.borderRadiusXS}),s=gi(e,{fontSize:e.fontSizeLG,selectHeight:e.controlHeightLG,multipleSelectItemHeight:e.multipleItemHeightLG,borderRadius:e.borderRadiusLG,borderRadiusSM:e.borderRadius});return[qA(e),qA(o,"sm"),{[`${r}-multiple${r}-sm`]:{[`${r}-selection-placeholder`]:{insetInline:e.calc(e.controlPaddingHorizontalSM).sub(e.lineWidth).equal()},[`${r}-selection-search`]:{marginInlineStart:2}}},qA(s,"lg")]},Cwe=ywe;function YA(e,r){const{componentCls:o,inputPaddingHorizontalBase:s,borderRadius:c}=e,d=e.calc(e.controlHeight).sub(e.calc(e.lineWidth).mul(2)).equal(),p=r?`${o}-${r}`:"";return{[`${o}-single${p}`]:{fontSize:e.fontSize,height:e.controlHeight,[`${o}-selector`]:Object.assign(Object.assign({},Ds(e,!0)),{display:"flex",borderRadius:c,[`${o}-selection-search`]:{position:"absolute",top:0,insetInlineStart:s,insetInlineEnd:s,bottom:0,"&-input":{width:"100%",WebkitAppearance:"textfield"}},[`
          ${o}-selection-item,
          ${o}-selection-placeholder
        `]:{padding:0,lineHeight:qe(d),transition:`all ${e.motionDurationSlow}, visibility 0s`,alignSelf:"center"},[`${o}-selection-placeholder`]:{transition:"none",pointerEvents:"none"},[["&:after",`${o}-selection-item:empty:after`,`${o}-selection-placeholder:empty:after`].join(",")]:{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'}}),[`
        &${o}-show-arrow ${o}-selection-item,
        &${o}-show-arrow ${o}-selection-placeholder
      `]:{paddingInlineEnd:e.showArrowPaddingInlineEnd},[`&${o}-open ${o}-selection-item`]:{color:e.colorTextPlaceholder},[`&:not(${o}-customize-input)`]:{[`${o}-selector`]:{width:"100%",height:"100%",padding:`0 ${qe(s)}`,[`${o}-selection-search-input`]:{height:d},"&:after":{lineHeight:qe(d)}}},[`&${o}-customize-input`]:{[`${o}-selector`]:{"&:after":{display:"none"},[`${o}-selection-search`]:{position:"static",width:"100%"},[`${o}-selection-placeholder`]:{position:"absolute",insetInlineStart:0,insetInlineEnd:0,padding:`0 ${qe(s)}`,"&:after":{display:"none"}}}}}}}function bwe(e){const{componentCls:r}=e,o=e.calc(e.controlPaddingHorizontalSM).sub(e.lineWidth).equal();return[YA(e),YA(gi(e,{controlHeight:e.controlHeightSM,borderRadius:e.borderRadiusSM}),"sm"),{[`${r}-single${r}-sm`]:{[`&:not(${r}-customize-input)`]:{[`${r}-selection-search`]:{insetInlineStart:o,insetInlineEnd:o},[`${r}-selector`]:{padding:`0 ${qe(o)}`},[`&${r}-show-arrow ${r}-selection-search`]:{insetInlineEnd:e.calc(o).add(e.calc(e.fontSize).mul(1.5)).equal()},[`
            &${r}-show-arrow ${r}-selection-item,
            &${r}-show-arrow ${r}-selection-placeholder
          `]:{paddingInlineEnd:e.calc(e.fontSize).mul(1.5).equal()}}}},YA(gi(e,{controlHeight:e.singleItemHeightLG,fontSize:e.fontSizeLG,borderRadius:e.borderRadiusLG}),"lg")]}const Twe=e=>{const{fontSize:r,lineHeight:o,lineWidth:s,controlHeight:c,controlHeightSM:d,controlHeightLG:p,paddingXXS:v,controlPaddingHorizontal:m,zIndexPopupBase:E,colorText:C,fontWeightStrong:b,controlItemBgActive:R,controlItemBgHover:w,colorBgContainer:I,colorFillSecondary:O,colorBgContainerDisabled:x,colorTextDisabled:P}=e,N=v*2,L=s*2,M=Math.min(c-N,c-L),j=Math.min(d-N,d-L),$=Math.min(p-N,p-L);return{INTERNAL_FIXED_ITEM_MARGIN:Math.floor(v/2),zIndexPopup:E+50,optionSelectedColor:C,optionSelectedFontWeight:b,optionSelectedBg:R,optionActiveBg:w,optionPadding:`${(c-r*o)/2}px ${m}px`,optionFontSize:r,optionLineHeight:o,optionHeight:c,selectorBg:I,clearBg:I,singleItemHeightLG:p,multipleItemBg:O,multipleItemBorderColor:"transparent",multipleItemHeight:M,multipleItemHeightSM:j,multipleItemHeightLG:$,multipleSelectorBgDisabled:x,multipleItemColorDisabled:P,multipleItemBorderColorDisabled:"transparent",showArrowPaddingInlineEnd:Math.ceil(e.fontSize*1.25)}},XY=(e,r)=>{const{componentCls:o,antCls:s,controlOutlineWidth:c}=e;return{[`&:not(${o}-customize-input) ${o}-selector`]:{border:`${qe(e.lineWidth)} ${e.lineType} ${r.borderColor}`,background:e.selectorBg},[`&:not(${o}-disabled):not(${o}-customize-input):not(${s}-pagination-size-changer)`]:{[`&:hover ${o}-selector`]:{borderColor:r.hoverBorderHover},[`${o}-focused& ${o}-selector`]:{borderColor:r.activeBorderColor,boxShadow:`0 0 0 ${qe(c)} ${r.activeShadowColor}`,outline:0}}}},M7=(e,r)=>({[`&${e.componentCls}-status-${r.status}`]:Object.assign({},XY(e,r))}),Rwe=e=>({"&-outlined":Object.assign(Object.assign(Object.assign(Object.assign({},XY(e,{borderColor:e.colorBorder,hoverBorderHover:e.colorPrimaryHover,activeBorderColor:e.colorPrimary,activeShadowColor:e.controlOutline})),M7(e,{status:"error",borderColor:e.colorError,hoverBorderHover:e.colorErrorHover,activeBorderColor:e.colorError,activeShadowColor:e.colorErrorOutline})),M7(e,{status:"warning",borderColor:e.colorWarning,hoverBorderHover:e.colorWarningHover,activeBorderColor:e.colorWarning,activeShadowColor:e.colorWarningOutline})),{[`&${e.componentCls}-disabled`]:{[`&:not(${e.componentCls}-customize-input) ${e.componentCls}-selector`]:{background:e.colorBgContainerDisabled,color:e.colorTextDisabled}},[`&${e.componentCls}-multiple ${e.componentCls}-selection-item`]:{background:e.multipleItemBg,border:`${qe(e.lineWidth)} ${e.lineType} ${e.multipleItemBorderColor}`}})}),JY=(e,r)=>{const{componentCls:o,antCls:s}=e;return{[`&:not(${o}-customize-input) ${o}-selector`]:{background:r.bg,border:`${qe(e.lineWidth)} ${e.lineType} transparent`,color:r.color},[`&:not(${o}-disabled):not(${o}-customize-input):not(${s}-pagination-size-changer)`]:{[`&:hover ${o}-selector`]:{background:r.hoverBg},[`${o}-focused& ${o}-selector`]:{background:e.selectorBg,borderColor:r.activeBorderColor,outline:0}}}},F7=(e,r)=>({[`&${e.componentCls}-status-${r.status}`]:Object.assign({},JY(e,r))}),wwe=e=>({"&-filled":Object.assign(Object.assign(Object.assign(Object.assign({},JY(e,{bg:e.colorFillTertiary,hoverBg:e.colorFillSecondary,activeBorderColor:e.colorPrimary,color:e.colorText})),F7(e,{status:"error",bg:e.colorErrorBg,hoverBg:e.colorErrorBgHover,activeBorderColor:e.colorError,color:e.colorError})),F7(e,{status:"warning",bg:e.colorWarningBg,hoverBg:e.colorWarningBgHover,activeBorderColor:e.colorWarning,color:e.colorWarning})),{[`&${e.componentCls}-disabled`]:{[`&:not(${e.componentCls}-customize-input) ${e.componentCls}-selector`]:{borderColor:e.colorBorder,background:e.colorBgContainerDisabled,color:e.colorTextDisabled}},[`&${e.componentCls}-multiple ${e.componentCls}-selection-item`]:{background:e.colorBgContainer,border:`${qe(e.lineWidth)} ${e.lineType} ${e.colorSplit}`}})}),Iwe=e=>({"&-borderless":{[`${e.componentCls}-selector`]:{background:"transparent",borderColor:"transparent"},[`&${e.componentCls}-disabled`]:{[`&:not(${e.componentCls}-customize-input) ${e.componentCls}-selector`]:{color:e.colorTextDisabled}},[`&${e.componentCls}-multiple ${e.componentCls}-selection-item`]:{background:e.multipleItemBg,border:`${qe(e.lineWidth)} ${e.lineType} ${e.multipleItemBorderColor}`}}}),Awe=e=>({[e.componentCls]:Object.assign(Object.assign(Object.assign({},Rwe(e)),wwe(e)),Iwe(e))}),Owe=Awe,xwe=e=>{const{componentCls:r}=e;return{position:"relative",transition:`all ${e.motionDurationMid} ${e.motionEaseInOut}`,input:{cursor:"pointer"},[`${r}-show-search&`]:{cursor:"text",input:{cursor:"auto",color:"inherit",height:"100%"}},[`${r}-disabled&`]:{cursor:"not-allowed",input:{cursor:"not-allowed"}}}},Nwe=e=>{const{componentCls:r}=e;return{[`${r}-selection-search-input`]:{margin:0,padding:0,background:"transparent",border:"none",outline:"none",appearance:"none",fontFamily:"inherit","&::-webkit-search-cancel-button":{display:"none","-webkit-appearance":"none"}}}},Dwe=e=>{const{antCls:r,componentCls:o,inputPaddingHorizontalBase:s,iconCls:c}=e;return{[o]:Object.assign(Object.assign({},Ds(e)),{position:"relative",display:"inline-block",cursor:"pointer",[`&:not(${o}-customize-input) ${o}-selector`]:Object.assign(Object.assign({},xwe(e)),Nwe(e)),[`${o}-selection-item`]:Object.assign(Object.assign({flex:1,fontWeight:"normal",position:"relative",userSelect:"none"},SC),{[`> ${r}-typography`]:{display:"inline"}}),[`${o}-selection-placeholder`]:Object.assign(Object.assign({},SC),{flex:1,color:e.colorTextPlaceholder,pointerEvents:"none"}),[`${o}-arrow`]:Object.assign(Object.assign({},Db()),{position:"absolute",top:"50%",insetInlineStart:"auto",insetInlineEnd:s,height:e.fontSizeIcon,marginTop:e.calc(e.fontSizeIcon).mul(-1).div(2).equal(),color:e.colorTextQuaternary,fontSize:e.fontSizeIcon,lineHeight:1,textAlign:"center",pointerEvents:"none",display:"flex",alignItems:"center",transition:`opacity ${e.motionDurationSlow} ease`,[c]:{verticalAlign:"top",transition:`transform ${e.motionDurationSlow}`,"> svg":{verticalAlign:"top"},[`&:not(${o}-suffix)`]:{pointerEvents:"auto"}},[`${o}-disabled &`]:{cursor:"not-allowed"},"> *:not(:last-child)":{marginInlineEnd:8}}),[`${o}-clear`]:{position:"absolute",top:"50%",insetInlineStart:"auto",insetInlineEnd:s,zIndex:1,display:"inline-block",width:e.fontSizeIcon,height:e.fontSizeIcon,marginTop:e.calc(e.fontSizeIcon).mul(-1).div(2).equal(),color:e.colorTextQuaternary,fontSize:e.fontSizeIcon,fontStyle:"normal",lineHeight:1,textAlign:"center",textTransform:"none",cursor:"pointer",opacity:0,transition:`color ${e.motionDurationMid} ease, opacity ${e.motionDurationSlow} ease`,textRendering:"auto","&:before":{display:"block"},"&:hover":{color:e.colorTextTertiary}},"&:hover":{[`${o}-clear`]:{opacity:1},[`${o}-arrow:not(:last-child)`]:{opacity:0}}}),[`${o}-has-feedback`]:{[`${o}-clear`]:{insetInlineEnd:e.calc(s).add(e.fontSize).add(e.paddingXS).equal()}}}},Pwe=e=>{const{componentCls:r}=e;return[{[r]:{[`&${r}-in-form-item`]:{width:"100%"}}},Dwe(e),bwe(e),Cwe(e),gwe(e),{[`${r}-rtl`]:{direction:"rtl"}},TP(e,{borderElCls:`${r}-selector`,focusElCls:`${r}-focused`})]},Lwe=ya("Select",(e,r)=>{let{rootPrefixCls:o}=r;const s=gi(e,{rootPrefixCls:o,inputPaddingHorizontalBase:e.calc(e.paddingSM).sub(1).equal(),multipleSelectItemHeight:e.multipleItemHeight,selectHeight:e.controlHeight});return[Pwe(s),Owe(s)]},Twe,{unitless:{optionLineHeight:!0,optionSelectedFontWeight:!0}});var kwe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"};const Mwe=kwe;var Fwe=function(r,o){return S.createElement(ro,Je({},r,{ref:o,icon:Mwe}))},Uwe=S.forwardRef(Fwe);const QY=Uwe;var Bwe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"}}]},name:"down",theme:"outlined"};const Vwe=Bwe;var jwe=function(r,o){return S.createElement(ro,Je({},r,{ref:o,icon:Vwe}))},$we=S.forwardRef(jwe);const Hwe=$we;var Wwe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"}}]},name:"search",theme:"outlined"};const zwe=Wwe;var Gwe=function(r,o){return S.createElement(ro,Je({},r,{ref:o,icon:zwe}))},Kwe=S.forwardRef(Gwe);const ZY=Kwe;function qwe(e){let{suffixIcon:r,clearIcon:o,menuItemSelectedIcon:s,removeIcon:c,loading:d,multiple:p,hasFeedback:v,prefixCls:m,showSuffixIcon:E,feedbackIcon:C,showArrow:b,componentName:R}=e;const w=o??S.createElement(Mb,null),I=N=>r===null&&!v&&!b?null:S.createElement(S.Fragment,null,E!==!1&&N,v&&C);let O=null;if(r!==void 0)O=I(r);else if(d)O=I(S.createElement(Fb,{spin:!0}));else{const N=`${m}-suffix`;O=L=>{let{open:M,showSearch:j}=L;return I(M&&j?S.createElement(ZY,{className:N}):S.createElement(Hwe,{className:N}))}}let x=null;s!==void 0?x=s:p?x=S.createElement(QY,null):x=null;let P=null;return c!==void 0?P=c:P=S.createElement(Hq,null),{clearIcon:w,suffixIcon:O,itemIcon:x,removeIcon:P}}function Ywe(e,r){return r!==void 0?r:e!==null}var Xwe=globalThis&&globalThis.__rest||function(e,r){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};const eX="SECRET_COMBOBOX_MODE_DO_NOT_USE",Jwe=(e,r)=>{var o;const{prefixCls:s,bordered:c,className:d,rootClassName:p,getPopupContainer:v,popupClassName:m,dropdownClassName:E,listHeight:C=256,placement:b,listItemHeight:R,size:w,disabled:I,notFoundContent:O,status:x,builtinPlacements:P,dropdownMatchSelectWidth:N,popupMatchSelectWidth:L,direction:M,style:j,allowClear:$,variant:H,dropdownStyle:G,transitionName:Y,tagRender:q,maxCount:J}=e,re=Xwe(e,["prefixCls","bordered","className","rootClassName","getPopupContainer","popupClassName","dropdownClassName","listHeight","placement","listItemHeight","size","disabled","notFoundContent","status","builtinPlacements","dropdownMatchSelectWidth","popupMatchSelectWidth","direction","style","allowClear","variant","dropdownStyle","transitionName","tagRender","maxCount"]),{getPopupContainer:Z,getPrefixCls:Q,renderEmpty:he,direction:oe,virtual:ae,popupMatchSelectWidth:te,popupOverflow:de,select:fe}=S.useContext(Qn),[,ie]=_a(),le=R??(ie==null?void 0:ie.controlHeight),ve=Q("select",s),ge=Q(),Te=M??oe,{compactSize:we,compactItemClassnames:Ie}=Vb(ve,Te),[Me,Ke]=BP(H,c),ke=Fl(ve),[Ne,ze,Qe]=Lwe(ve,ke),De=S.useMemo(()=>{const{mode:qn}=e;if(qn!=="combobox")return qn===eX?"combobox":qn},[e.mode]),xe=De==="multiple"||De==="tags",ft=Ywe(e.suffixIcon,e.showArrow),Et=(o=L??N)!==null&&o!==void 0?o:te,{status:st,hasFeedback:ot,isFormItemInput:Ze,feedbackIcon:je}=S.useContext(As),ct=$b(st,x);let lt;O!==void 0?lt=O:De==="combobox"?lt=null:lt=(he==null?void 0:he("Select"))||S.createElement(YY,{componentName:"Select"});const{suffixIcon:gt,itemIcon:Ot,removeIcon:Tt,clearIcon:Wt}=qwe(Object.assign(Object.assign({},re),{multiple:xe,hasFeedback:ot,feedbackIcon:je,showSuffixIcon:ft,prefixCls:ve,componentName:"Select"})),on=$===!0?{clearIcon:Wt}:$,xt=Sa(re,["suffixIcon","itemIcon"]),wt=He(m||E,{[`${ve}-dropdown-${Te}`]:Te==="rtl"},p,Qe,ke,ze),Pt=Cu(qn=>{var mt;return(mt=w??we)!==null&&mt!==void 0?mt:qn}),Kt=S.useContext(Dm),fn=I??Kt,mn=He({[`${ve}-lg`]:Pt==="large",[`${ve}-sm`]:Pt==="small",[`${ve}-rtl`]:Te==="rtl",[`${ve}-${Me}`]:Ke,[`${ve}-in-form-item`]:Ze},AC(ve,ct,ot),Ie,fe==null?void 0:fe.className,d,p,Qe,ke,ze),Un=S.useMemo(()=>b!==void 0?b:Te==="rtl"?"bottomRight":"bottomLeft",[b,Te]),[Kn]=yP("SelectLike",G==null?void 0:G.zIndex);return Ne(S.createElement(FP,Object.assign({ref:r,virtual:ae,showSearch:fe==null?void 0:fe.showSearch},xt,{style:Object.assign(Object.assign({},fe==null?void 0:fe.style),j),dropdownMatchSelectWidth:Et,transitionName:Qq(ge,"slide-up",Y),builtinPlacements:fwe(P,de),listHeight:C,listItemHeight:le,mode:De,prefixCls:ve,placement:Un,direction:Te,suffixIcon:gt,menuItemSelectedIcon:Ot,removeIcon:Tt,allowClear:on,notFoundContent:lt,className:mn,getPopupContainer:v||Z,dropdownClassName:wt,disabled:fn,dropdownStyle:Object.assign(Object.assign({},G),{zIndex:Kn}),maxCount:xe?J:void 0,tagRender:xe?q:void 0})))},Lm=S.forwardRef(Jwe),Qwe=ITe(Lm);Lm.SECRET_COMBOBOX_MODE_DO_NOT_USE=eX;Lm.Option=MP;Lm.OptGroup=kP;Lm._InternalPanelDoNotUseOrYouWillBeFired=Qwe;const Hb=Lm,np=["xxl","xl","lg","md","sm","xs"],Zwe=e=>({xs:`(max-width: ${e.screenXSMax}px)`,sm:`(min-width: ${e.screenSM}px)`,md:`(min-width: ${e.screenMD}px)`,lg:`(min-width: ${e.screenLG}px)`,xl:`(min-width: ${e.screenXL}px)`,xxl:`(min-width: ${e.screenXXL}px)`}),e1e=e=>{const r=e,o=[].concat(np).reverse();return o.forEach((s,c)=>{const d=s.toUpperCase(),p=`screen${d}Min`,v=`screen${d}`;if(!(r[p]<=r[v]))throw new Error(`${p}<=${v} fails : !(${r[p]}<=${r[v]})`);if(c<o.length-1){const m=`screen${d}Max`;if(!(r[v]<=r[m]))throw new Error(`${v}<=${m} fails : !(${r[v]}<=${r[m]})`);const C=`screen${o[c+1].toUpperCase()}Min`;if(!(r[m]<=r[C]))throw new Error(`${m}<=${C} fails : !(${r[m]}<=${r[C]})`)}}),e};function tX(){const[,e]=_a(),r=Zwe(e1e(e));return Be.useMemo(()=>{const o=new Map;let s=-1,c={};return{matchHandlers:{},dispatch(d){return c=d,o.forEach(p=>p(c)),o.size>=1},subscribe(d){return o.size||this.register(),s+=1,o.set(s,d),d(c),s},unsubscribe(d){o.delete(d),o.size||this.unregister()},unregister(){Object.keys(r).forEach(d=>{const p=r[d],v=this.matchHandlers[p];v==null||v.mql.removeListener(v==null?void 0:v.listener)}),o.clear()},register(){Object.keys(r).forEach(d=>{const p=r[d],v=E=>{let{matches:C}=E;this.dispatch(Object.assign(Object.assign({},c),{[d]:C}))},m=window.matchMedia(p);m.addListener(v),this.matchHandlers[p]={mql:m,listener:v},v(m)})},responsiveMap:r}},[e])}function t1e(){const[,e]=S.useReducer(r=>r+1,0);return e}function nX(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;const r=S.useRef({}),o=t1e(),s=tX();return kr(()=>{const c=s.subscribe(d=>{r.current=d,e&&o()});return()=>s.unsubscribe(c)},[]),r.current}function rX(e){var r=e.children,o=e.prefixCls,s=e.id,c=e.overlayInnerStyle,d=e.className,p=e.style;return S.createElement("div",{className:He("".concat(o,"-content"),d),style:p},S.createElement("div",{className:"".concat(o,"-inner"),id:s,role:"tooltip",style:c},typeof r=="function"?r():r))}var kf={shiftX:64,adjustY:1},Mf={adjustX:1,shiftY:!0},ic=[0,0],n1e={left:{points:["cr","cl"],overflow:Mf,offset:[-4,0],targetOffset:ic},right:{points:["cl","cr"],overflow:Mf,offset:[4,0],targetOffset:ic},top:{points:["bc","tc"],overflow:kf,offset:[0,-4],targetOffset:ic},bottom:{points:["tc","bc"],overflow:kf,offset:[0,4],targetOffset:ic},topLeft:{points:["bl","tl"],overflow:kf,offset:[0,-4],targetOffset:ic},leftTop:{points:["tr","tl"],overflow:Mf,offset:[-4,0],targetOffset:ic},topRight:{points:["br","tr"],overflow:kf,offset:[0,-4],targetOffset:ic},rightTop:{points:["tl","tr"],overflow:Mf,offset:[4,0],targetOffset:ic},bottomRight:{points:["tr","br"],overflow:kf,offset:[0,4],targetOffset:ic},rightBottom:{points:["bl","br"],overflow:Mf,offset:[4,0],targetOffset:ic},bottomLeft:{points:["tl","bl"],overflow:kf,offset:[0,4],targetOffset:ic},leftBottom:{points:["br","bl"],overflow:Mf,offset:[-4,0],targetOffset:ic}},r1e=["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","afterVisibleChange","transitionName","animation","motion","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer","overlayInnerStyle","arrowContent","overlay","id","showArrow"],i1e=function(r,o){var s=r.overlayClassName,c=r.trigger,d=c===void 0?["hover"]:c,p=r.mouseEnterDelay,v=p===void 0?0:p,m=r.mouseLeaveDelay,E=m===void 0?.1:m,C=r.overlayStyle,b=r.prefixCls,R=b===void 0?"rc-tooltip":b,w=r.children,I=r.onVisibleChange,O=r.afterVisibleChange,x=r.transitionName,P=r.animation,N=r.motion,L=r.placement,M=L===void 0?"right":L,j=r.align,$=j===void 0?{}:j,H=r.destroyTooltipOnHide,G=H===void 0?!1:H,Y=r.defaultVisible,q=r.getTooltipContainer,J=r.overlayInnerStyle;r.arrowContent;var re=r.overlay,Z=r.id,Q=r.showArrow,he=Q===void 0?!0:Q,oe=kn(r,r1e),ae=S.useRef(null);S.useImperativeHandle(o,function(){return ae.current});var te=_e({},oe);"visible"in r&&(te.popupVisible=r.visible);var de=function(){return S.createElement(rX,{key:"content",prefixCls:R,id:Z,overlayInnerStyle:J},re)};return S.createElement(PP,Je({popupClassName:s,prefixCls:R,popup:de,action:d,builtinPlacements:n1e,popupPlacement:M,ref:ae,popupAlign:$,getPopupContainer:q,onPopupVisibleChange:I,afterPopupVisibleChange:O,popupTransitionName:x,popupAnimation:P,popupMotion:N,defaultPopupVisible:Y,autoDestroy:G,mouseLeaveDelay:E,popupStyle:C,mouseEnterDelay:v,arrow:he},te),w)};const o1e=S.forwardRef(i1e);function a1e(e){const{sizePopupArrow:r,borderRadiusXS:o,borderRadiusOuter:s}=e,c=r/2,d=0,p=c,v=s*1/Math.sqrt(2),m=c-s*(1-1/Math.sqrt(2)),E=c-o*(1/Math.sqrt(2)),C=s*(Math.sqrt(2)-1)+o*(1/Math.sqrt(2)),b=2*c-E,R=C,w=2*c-v,I=m,O=2*c-d,x=p,P=c*Math.sqrt(2)+s*(Math.sqrt(2)-2),N=s*(Math.sqrt(2)-1),L=`polygon(${N}px 100%, 50% ${N}px, ${2*c-N}px 100%, ${N}px 100%)`,M=`path('M ${d} ${p} A ${s} ${s} 0 0 0 ${v} ${m} L ${E} ${C} A ${o} ${o} 0 0 1 ${b} ${R} L ${w} ${I} A ${s} ${s} 0 0 0 ${O} ${x} Z')`;return{arrowShadowWidth:P,arrowPath:M,arrowPolygon:L}}const s1e=(e,r,o)=>{const{sizePopupArrow:s,arrowPolygon:c,arrowPath:d,arrowShadowWidth:p,borderRadiusXS:v,calc:m}=e;return{pointerEvents:"none",width:s,height:s,overflow:"hidden","&::before":{position:"absolute",bottom:0,insetInlineStart:0,width:s,height:m(s).div(2).equal(),background:r,clipPath:{_multi_value_:!0,value:[c,d]},content:'""'},"&::after":{content:'""',position:"absolute",width:p,height:p,bottom:0,insetInline:0,margin:"auto",borderRadius:{_skip_check_:!0,value:`0 0 ${qe(v)} 0`},transform:"translateY(50%) rotate(-135deg)",boxShadow:o,zIndex:0,background:"transparent"}}},iX=8;function oX(e){const{contentRadius:r,limitVerticalRadius:o}=e,s=r>12?r+2:12;return{arrowOffsetHorizontal:s,arrowOffsetVertical:o?iX:s}}function ry(e,r){return e?r:{}}function c1e(e,r,o){const{componentCls:s,boxShadowPopoverArrow:c,arrowOffsetVertical:d,arrowOffsetHorizontal:p}=e,{arrowDistance:v=0,arrowPlacement:m={left:!0,right:!0,top:!0,bottom:!0}}=o||{};return{[s]:Object.assign(Object.assign(Object.assign(Object.assign({[`${s}-arrow`]:[Object.assign(Object.assign({position:"absolute",zIndex:1,display:"block"},s1e(e,r,c)),{"&:before":{background:r}})]},ry(!!m.top,{[[`&-placement-top > ${s}-arrow`,`&-placement-topLeft > ${s}-arrow`,`&-placement-topRight > ${s}-arrow`].join(",")]:{bottom:v,transform:"translateY(100%) rotate(180deg)"},[`&-placement-top > ${s}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(100%) rotate(180deg)"},[`&-placement-topLeft > ${s}-arrow`]:{left:{_skip_check_:!0,value:p}},[`&-placement-topRight > ${s}-arrow`]:{right:{_skip_check_:!0,value:p}}})),ry(!!m.bottom,{[[`&-placement-bottom > ${s}-arrow`,`&-placement-bottomLeft > ${s}-arrow`,`&-placement-bottomRight > ${s}-arrow`].join(",")]:{top:v,transform:"translateY(-100%)"},[`&-placement-bottom > ${s}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(-100%)"},[`&-placement-bottomLeft > ${s}-arrow`]:{left:{_skip_check_:!0,value:p}},[`&-placement-bottomRight > ${s}-arrow`]:{right:{_skip_check_:!0,value:p}}})),ry(!!m.left,{[[`&-placement-left > ${s}-arrow`,`&-placement-leftTop > ${s}-arrow`,`&-placement-leftBottom > ${s}-arrow`].join(",")]:{right:{_skip_check_:!0,value:v},transform:"translateX(100%) rotate(90deg)"},[`&-placement-left > ${s}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(100%) rotate(90deg)"},[`&-placement-leftTop > ${s}-arrow`]:{top:d},[`&-placement-leftBottom > ${s}-arrow`]:{bottom:d}})),ry(!!m.right,{[[`&-placement-right > ${s}-arrow`,`&-placement-rightTop > ${s}-arrow`,`&-placement-rightBottom > ${s}-arrow`].join(",")]:{left:{_skip_check_:!0,value:v},transform:"translateX(-100%) rotate(-90deg)"},[`&-placement-right > ${s}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(-100%) rotate(-90deg)"},[`&-placement-rightTop > ${s}-arrow`]:{top:d},[`&-placement-rightBottom > ${s}-arrow`]:{bottom:d}}))}}function l1e(e,r,o,s){if(s===!1)return{adjustX:!1,adjustY:!1};const c=s&&typeof s=="object"?s:{},d={};switch(e){case"top":case"bottom":d.shiftX=r.arrowOffsetHorizontal*2+o,d.shiftY=!0,d.adjustY=!0;break;case"left":case"right":d.shiftY=r.arrowOffsetVertical*2+o,d.shiftX=!0,d.adjustX=!0;break}const p=Object.assign(Object.assign({},d),c);return p.shiftX||(p.adjustX=!0),p.shiftY||(p.adjustY=!0),p}const U7={left:{points:["cr","cl"]},right:{points:["cl","cr"]},top:{points:["bc","tc"]},bottom:{points:["tc","bc"]},topLeft:{points:["bl","tl"]},leftTop:{points:["tr","tl"]},topRight:{points:["br","tr"]},rightTop:{points:["tl","tr"]},bottomRight:{points:["tr","br"]},rightBottom:{points:["bl","br"]},bottomLeft:{points:["tl","bl"]},leftBottom:{points:["br","bl"]}},u1e={topLeft:{points:["bl","tc"]},leftTop:{points:["tr","cl"]},topRight:{points:["br","tc"]},rightTop:{points:["tl","cr"]},bottomRight:{points:["tr","bc"]},rightBottom:{points:["bl","cr"]},bottomLeft:{points:["tl","bc"]},leftBottom:{points:["br","cl"]}},d1e=new Set(["topLeft","topRight","bottomLeft","bottomRight","leftTop","leftBottom","rightTop","rightBottom"]);function h1e(e){const{arrowWidth:r,autoAdjustOverflow:o,arrowPointAtCenter:s,offset:c,borderRadius:d,visibleFirst:p}=e,v=r/2,m={};return Object.keys(U7).forEach(E=>{const C=s&&u1e[E]||U7[E],b=Object.assign(Object.assign({},C),{offset:[0,0],dynamicInset:!0});switch(m[E]=b,d1e.has(E)&&(b.autoArrow=!1),E){case"top":case"topLeft":case"topRight":b.offset[1]=-v-c;break;case"bottom":case"bottomLeft":case"bottomRight":b.offset[1]=v+c;break;case"left":case"leftTop":case"leftBottom":b.offset[0]=-v-c;break;case"right":case"rightTop":case"rightBottom":b.offset[0]=v+c;break}const R=oX({contentRadius:d,limitVerticalRadius:!0});if(s)switch(E){case"topLeft":case"bottomLeft":b.offset[0]=-R.arrowOffsetHorizontal-v;break;case"topRight":case"bottomRight":b.offset[0]=R.arrowOffsetHorizontal+v;break;case"leftTop":case"rightTop":b.offset[1]=-R.arrowOffsetHorizontal-v;break;case"leftBottom":case"rightBottom":b.offset[1]=R.arrowOffsetHorizontal+v;break}b.overflow=l1e(E,R,r,o),p&&(b.htmlRegion="visibleFirst")}),m}const p1e=e=>{const{componentCls:r,tooltipMaxWidth:o,tooltipColor:s,tooltipBg:c,tooltipBorderRadius:d,zIndexPopup:p,controlHeight:v,boxShadowSecondary:m,paddingSM:E,paddingXS:C}=e;return[{[r]:Object.assign(Object.assign(Object.assign(Object.assign({},Ds(e)),{position:"absolute",zIndex:p,display:"block",width:"max-content",maxWidth:o,visibility:"visible",transformOrigin:"var(--arrow-x, 50%) var(--arrow-y, 50%)","&-hidden":{display:"none"},"--antd-arrow-background-color":c,[`${r}-inner`]:{minWidth:"1em",minHeight:v,padding:`${qe(e.calc(E).div(2).equal())} ${qe(C)}`,color:s,textAlign:"start",textDecoration:"none",wordWrap:"break-word",backgroundColor:c,borderRadius:d,boxShadow:m,boxSizing:"border-box"},[["&-placement-left","&-placement-leftTop","&-placement-leftBottom","&-placement-right","&-placement-rightTop","&-placement-rightBottom"].join(",")]:{[`${r}-inner`]:{borderRadius:e.min(d,iX)}},[`${r}-content`]:{position:"relative"}}),M_e(e,(b,R)=>{let{darkColor:w}=R;return{[`&${r}-${b}`]:{[`${r}-inner`]:{backgroundColor:w},[`${r}-arrow`]:{"--antd-arrow-background-color":w}}}})),{"&-rtl":{direction:"rtl"}})},c1e(e,"var(--antd-arrow-background-color)"),{[`${r}-pure`]:{position:"relative",maxWidth:"none",margin:e.sizePopupArrow}}]},f1e=e=>Object.assign(Object.assign({zIndexPopup:e.zIndexPopupBase+70},oX({contentRadius:e.borderRadius,limitVerticalRadius:!0})),a1e(gi(e,{borderRadiusOuter:Math.min(e.borderRadiusOuter,4)}))),aX=function(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return ya("Tooltip",s=>{const{borderRadius:c,colorTextLightSolid:d,colorBgSpotlight:p}=s,v=gi(s,{tooltipMaxWidth:250,tooltipColor:d,tooltipBorderRadius:c,tooltipBg:p});return[p1e(v),wY(s,"zoom-big-fast")]},f1e,{resetStyle:!1,injectStyle:r})(e)},m1e=_C.map(e=>`${e}-inverse`);function g1e(e){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0)?[].concat(_t(m1e),_t(_C)).includes(e):_C.includes(e)}function sX(e,r){const o=g1e(r),s=He({[`${e}-${r}`]:r&&o}),c={},d={};return r&&!o&&(c.background=r,d["--antd-arrow-background-color"]=r),{className:s,overlayStyle:c,arrowStyle:d}}const v1e=e=>{const{prefixCls:r,className:o,placement:s="top",title:c,color:d,overlayInnerStyle:p}=e,{getPrefixCls:v}=S.useContext(Qn),m=v("tooltip",r),[E,C,b]=aX(m),R=sX(m,d),w=R.arrowStyle,I=Object.assign(Object.assign({},p),R.overlayStyle),O=He(C,b,m,`${m}-pure`,`${m}-placement-${s}`,o,R.className);return E(S.createElement("div",{className:O,style:w},S.createElement("div",{className:`${m}-arrow`}),S.createElement(rX,Object.assign({},e,{className:C,prefixCls:m,overlayInnerStyle:I}),c)))},E1e=v1e;var _1e=globalThis&&globalThis.__rest||function(e,r){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};const S1e=S.forwardRef((e,r)=>{var o,s;const{prefixCls:c,openClassName:d,getTooltipContainer:p,overlayClassName:v,color:m,overlayInnerStyle:E,children:C,afterOpenChange:b,afterVisibleChange:R,destroyTooltipOnHide:w,arrow:I=!0,title:O,overlay:x,builtinPlacements:P,arrowPointAtCenter:N=!1,autoAdjustOverflow:L=!0}=e,M=!!I,[,j]=_a(),{getPopupContainer:$,getPrefixCls:H,direction:G}=S.useContext(Qn),Y=xb(),q=S.useRef(null),J=()=>{var lt;(lt=q.current)===null||lt===void 0||lt.forceAlign()};S.useImperativeHandle(r,()=>{var lt;return{forceAlign:J,forcePopupAlign:()=>{Y.deprecated(!1,"forcePopupAlign","forceAlign"),J()},nativeElement:(lt=q.current)===null||lt===void 0?void 0:lt.nativeElement}});const[re,Z]=va(!1,{value:(o=e.open)!==null&&o!==void 0?o:e.visible,defaultValue:(s=e.defaultOpen)!==null&&s!==void 0?s:e.defaultVisible}),Q=!O&&!x&&O!==0,he=lt=>{var gt,Ot;Z(Q?!1:lt),Q||((gt=e.onOpenChange)===null||gt===void 0||gt.call(e,lt),(Ot=e.onVisibleChange)===null||Ot===void 0||Ot.call(e,lt))},oe=S.useMemo(()=>{var lt,gt;let Ot=N;return typeof I=="object"&&(Ot=(gt=(lt=I.pointAtCenter)!==null&&lt!==void 0?lt:I.arrowPointAtCenter)!==null&&gt!==void 0?gt:N),P||h1e({arrowPointAtCenter:Ot,autoAdjustOverflow:L,arrowWidth:M?j.sizePopupArrow:0,borderRadius:j.borderRadius,offset:j.marginXXS,visibleFirst:!0})},[N,I,P,j]),ae=S.useMemo(()=>O===0?O:x||O||"",[x,O]),te=S.createElement(tY,null,typeof ae=="function"?ae():ae),{getPopupContainer:de,placement:fe="top",mouseEnterDelay:ie=.1,mouseLeaveDelay:le=.1,overlayStyle:ve,rootClassName:ge}=e,Te=_1e(e,["getPopupContainer","placement","mouseEnterDelay","mouseLeaveDelay","overlayStyle","rootClassName"]),we=H("tooltip",c),Ie=H(),Me=e["data-popover-inject"];let Ke=re;!("open"in e)&&!("visible"in e)&&Q&&(Ke=!1);const ke=S.isValidElement(C)&&!zq(C)?C:S.createElement("span",null,C),Ne=ke.props,ze=!Ne.className||typeof Ne.className=="string"?He(Ne.className,d||`${we}-open`):Ne.className,[Qe,De,xe]=aX(we,!Me),ft=sX(we,m),Et=ft.arrowStyle,st=Object.assign(Object.assign({},E),ft.overlayStyle),ot=He(v,{[`${we}-rtl`]:G==="rtl"},ft.className,ge,De,xe),[Ze,je]=yP("Tooltip",Te.zIndex),ct=S.createElement(o1e,Object.assign({},Te,{zIndex:Ze,showArrow:M,placement:fe,mouseEnterDelay:ie,mouseLeaveDelay:le,prefixCls:we,overlayClassName:ot,overlayStyle:Object.assign(Object.assign({},Et),ve),getTooltipContainer:de||p||$,ref:q,builtinPlacements:oe,overlay:te,visible:Ke,onVisibleChange:he,afterVisibleChange:b??R,overlayInnerStyle:st,arrowContent:S.createElement("span",{className:`${we}-arrow-content`}),motion:{motionName:Qq(Ie,"zoom-big-fast",e.transitionName),motionDeadline:1e3},destroyTooltipOnHide:!!w}),Ke?fc(ke,{className:ze}):ke);return Qe(S.createElement(qq.Provider,{value:je},ct))}),cX=S1e;cX._InternalPanelDoNotUseOrYouWillBeFired=E1e;const zv=cX;var y1e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M765.7 486.8L314.9 134.7A7.97 7.97 0 00302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 000-50.4z"}}]},name:"right",theme:"outlined"};const C1e=y1e;var b1e=function(r,o){return S.createElement(ro,Je({},r,{ref:o,icon:C1e}))},T1e=S.forwardRef(b1e);const OC=T1e;var lX=S.createContext(null);function uX(e,r){return e===void 0?null:"".concat(e,"-").concat(r)}function dX(e){var r=S.useContext(lX);return uX(r,e)}var R1e=["children","locked"],Qc=S.createContext(null);function w1e(e,r){var o=_e({},e);return Object.keys(r).forEach(function(s){var c=r[s];c!==void 0&&(o[s]=c)}),o}function Iv(e){var r=e.children,o=e.locked,s=kn(e,R1e),c=S.useContext(Qc),d=Bv(function(){return w1e(c,s)},[c,s],function(p,v){return!o&&(p[0]!==v[0]||!Sv(p[1],v[1],!0))});return S.createElement(Qc.Provider,{value:d},r)}var I1e=[],hX=S.createContext(null);function Wb(){return S.useContext(hX)}var pX=S.createContext(I1e);function km(e){var r=S.useContext(pX);return S.useMemo(function(){return e!==void 0?[].concat(_t(r),[e]):r},[r,e])}var fX=S.createContext(null),VP=S.createContext({});function B7(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(Bb(e)){var o=e.nodeName.toLowerCase(),s=["input","select","textarea","button"].includes(o)||e.isContentEditable||o==="a"&&!!e.getAttribute("href"),c=e.getAttribute("tabindex"),d=Number(c),p=null;return c&&!Number.isNaN(d)?p=d:s&&p===null&&(p=0),s&&e.disabled&&(p=null),p!==null&&(p>=0||r&&p<0)}return!1}function A1e(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,o=_t(e.querySelectorAll("*")).filter(function(s){return B7(s,r)});return B7(e,r)&&o.unshift(e),o}var jN=dt.LEFT,$N=dt.RIGHT,HN=dt.UP,Uy=dt.DOWN,By=dt.ENTER,mX=dt.ESC,Sg=dt.HOME,yg=dt.END,V7=[HN,Uy,jN,$N];function O1e(e,r,o,s){var c,d="prev",p="next",v="children",m="parent";if(e==="inline"&&s===By)return{inlineTrigger:!0};var E=ye(ye({},HN,d),Uy,p),C=ye(ye(ye(ye({},jN,o?p:d),$N,o?d:p),Uy,v),By,v),b=ye(ye(ye(ye(ye(ye({},HN,d),Uy,p),By,v),mX,m),jN,o?v:m),$N,o?m:v),R={inline:E,horizontal:C,vertical:b,inlineSub:E,horizontalSub:b,verticalSub:b},w=(c=R["".concat(e).concat(r?"":"Sub")])===null||c===void 0?void 0:c[s];switch(w){case d:return{offset:-1,sibling:!0};case p:return{offset:1,sibling:!0};case m:return{offset:-1,sibling:!1};case v:return{offset:1,sibling:!1};default:return null}}function x1e(e){for(var r=e;r;){if(r.getAttribute("data-menu-list"))return r;r=r.parentElement}return null}function N1e(e,r){for(var o=e||document.activeElement;o;){if(r.has(o))return o;o=o.parentElement}return null}function jP(e,r){var o=A1e(e,!0);return o.filter(function(s){return r.has(s)})}function j7(e,r,o){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;if(!e)return null;var c=jP(e,r),d=c.length,p=c.findIndex(function(v){return o===v});return s<0?p===-1?p=d-1:p-=1:s>0&&(p+=1),p=(p+d)%d,c[p]}var WN=function(r,o){var s=new Set,c=new Map,d=new Map;return r.forEach(function(p){var v=document.querySelector("[data-menu-id='".concat(uX(o,p),"']"));v&&(s.add(v),d.set(v,p),c.set(p,v))}),{elements:s,key2element:c,element2key:d}};function D1e(e,r,o,s,c,d,p,v,m,E){var C=S.useRef(),b=S.useRef();b.current=r;var R=function(){ci.cancel(C.current)};return S.useEffect(function(){return function(){R()}},[]),function(w){var I=w.which;if([].concat(V7,[By,mX,Sg,yg]).includes(I)){var O=d(),x=WN(O,s),P=x,N=P.elements,L=P.key2element,M=P.element2key,j=L.get(r),$=N1e(j,N),H=M.get($),G=O1e(e,p(H,!0).length===1,o,I);if(!G&&I!==Sg&&I!==yg)return;(V7.includes(I)||[Sg,yg].includes(I))&&w.preventDefault();var Y=function(ae){if(ae){var te=ae,de=ae.querySelector("a");de!=null&&de.getAttribute("href")&&(te=de);var fe=M.get(ae);v(fe),R(),C.current=ci(function(){b.current===fe&&te.focus()})}};if([Sg,yg].includes(I)||G.sibling||!$){var q;!$||e==="inline"?q=c.current:q=x1e($);var J,re=jP(q,N);I===Sg?J=re[0]:I===yg?J=re[re.length-1]:J=j7(q,N,$,G.offset),Y(J)}else if(G.inlineTrigger)m(H);else if(G.offset>0)m(H,!0),R(),C.current=ci(function(){x=WN(O,s);var oe=$.getAttribute("aria-controls"),ae=document.getElementById(oe),te=j7(ae,x.elements);Y(te)},5);else if(G.offset<0){var Z=p(H,!0),Q=Z[Z.length-2],he=L.get(Q);m(Q,!1),Y(he)}}E==null||E(w)}}function P1e(e){Promise.resolve().then(e)}var $P="__RC_UTIL_PATH_SPLIT__",$7=function(r){return r.join($P)},L1e=function(r){return r.split($P)},zN="rc-menu-more";function k1e(){var e=S.useState({}),r=Ue(e,2),o=r[1],s=S.useRef(new Map),c=S.useRef(new Map),d=S.useState([]),p=Ue(d,2),v=p[0],m=p[1],E=S.useRef(0),C=S.useRef(!1),b=function(){C.current||o({})},R=S.useCallback(function(L,M){var j=$7(M);c.current.set(j,L),s.current.set(L,j),E.current+=1;var $=E.current;P1e(function(){$===E.current&&b()})},[]),w=S.useCallback(function(L,M){var j=$7(M);c.current.delete(j),s.current.delete(L)},[]),I=S.useCallback(function(L){m(L)},[]),O=S.useCallback(function(L,M){var j=s.current.get(L)||"",$=L1e(j);return M&&v.includes($[0])&&$.unshift(zN),$},[v]),x=S.useCallback(function(L,M){return L.some(function(j){var $=O(j,!0);return $.includes(M)})},[O]),P=function(){var M=_t(s.current.keys());return v.length&&M.push(zN),M},N=S.useCallback(function(L){var M="".concat(s.current.get(L)).concat($P),j=new Set;return _t(c.current.keys()).forEach(function($){$.startsWith(M)&&j.add(c.current.get($))}),j},[]);return S.useEffect(function(){return function(){C.current=!0}},[]),{registerPath:R,unregisterPath:w,refreshOverflowKeys:I,isSubPathKey:x,getKeyPath:O,getKeys:P,getSubPathKeys:N}}function Pg(e){var r=S.useRef(e);r.current=e;var o=S.useCallback(function(){for(var s,c=arguments.length,d=new Array(c),p=0;p<c;p++)d[p]=arguments[p];return(s=r.current)===null||s===void 0?void 0:s.call.apply(s,[r].concat(d))},[]);return e?o:void 0}var M1e=Math.random().toFixed(5).toString().slice(2),H7=0;function F1e(e){var r=va(e,{value:e}),o=Ue(r,2),s=o[0],c=o[1];return S.useEffect(function(){H7+=1;var d="".concat(M1e,"-").concat(H7);c("rc-menu-uuid-".concat(d))},[]),s}function gX(e,r,o,s){var c=S.useContext(Qc),d=c.activeKey,p=c.onActive,v=c.onInactive,m={active:d===e};return r||(m.onMouseEnter=function(E){o==null||o({key:e,domEvent:E}),p(e)},m.onMouseLeave=function(E){s==null||s({key:e,domEvent:E}),v(e)}),m}function vX(e){var r=S.useContext(Qc),o=r.mode,s=r.rtl,c=r.inlineIndent;if(o!=="inline")return null;var d=e;return s?{paddingRight:d*c}:{paddingLeft:d*c}}function EX(e){var r=e.icon,o=e.props,s=e.children,c;return r===null||r===!1?null:(typeof r=="function"?c=S.createElement(r,_e({},o)):typeof r!="boolean"&&(c=r),c||s||null)}var U1e=["item"];function xC(e){var r=e.item,o=kn(e,U1e);return Object.defineProperty(o,"item",{get:function(){return ga(!1,"`info.item` is deprecated since we will move to function component that not provides React Node instance in future."),r}}),o}var B1e=["title","attribute","elementRef"],V1e=["style","className","eventKey","warnKey","disabled","itemIcon","children","role","onMouseEnter","onMouseLeave","onClick","onKeyDown","onFocus"],j1e=["active"],$1e=function(e){Su(o,e);var r=cp(o);function o(){return Bo(this,o),r.apply(this,arguments)}return Vo(o,[{key:"render",value:function(){var c=this.props,d=c.title,p=c.attribute,v=c.elementRef,m=kn(c,B1e),E=Sa(m,["eventKey","popupClassName","popupOffset","onTitleClick"]);return ga(!p,"`attribute` of Menu.Item is deprecated. Please pass attribute directly."),S.createElement(Pl.Item,Je({},p,{title:typeof d=="string"?d:void 0},E,{ref:v}))}}]),o}(S.Component),H1e=S.forwardRef(function(e,r){var o=e.style,s=e.className,c=e.eventKey;e.warnKey;var d=e.disabled,p=e.itemIcon,v=e.children,m=e.role,E=e.onMouseEnter,C=e.onMouseLeave,b=e.onClick,R=e.onKeyDown,w=e.onFocus,I=kn(e,V1e),O=dX(c),x=S.useContext(Qc),P=x.prefixCls,N=x.onItemClick,L=x.disabled,M=x.overflowDisabled,j=x.itemIcon,$=x.selectedKeys,H=x.onActive,G=S.useContext(VP),Y=G._internalRenderMenuItem,q="".concat(P,"-item"),J=S.useRef(),re=S.useRef(),Z=L||d,Q=Vv(r,re),he=km(c),oe=function(Ke){return{key:c,keyPath:_t(he).reverse(),item:J.current,domEvent:Ke}},ae=p||j,te=gX(c,Z,E,C),de=te.active,fe=kn(te,j1e),ie=$.includes(c),le=vX(he.length),ve=function(Ke){if(!Z){var ke=oe(Ke);b==null||b(xC(ke)),N(ke)}},ge=function(Ke){if(R==null||R(Ke),Ke.which===dt.ENTER){var ke=oe(Ke);b==null||b(xC(ke)),N(ke)}},Te=function(Ke){H(c),w==null||w(Ke)},we={};e.role==="option"&&(we["aria-selected"]=ie);var Ie=S.createElement($1e,Je({ref:J,elementRef:Q,role:m===null?"none":m||"menuitem",tabIndex:d?null:-1,"data-menu-id":M&&O?null:O},I,fe,we,{component:"li","aria-disabled":d,style:_e(_e({},le),o),className:He(q,ye(ye(ye({},"".concat(q,"-active"),de),"".concat(q,"-selected"),ie),"".concat(q,"-disabled"),Z),s),onClick:ve,onKeyDown:ge,onFocus:Te}),v,S.createElement(EX,{props:_e(_e({},e),{},{isSelected:ie}),icon:ae}));return Y&&(Ie=Y(Ie,e,{selected:ie})),Ie});function W1e(e,r){var o=e.eventKey,s=Wb(),c=km(o);return S.useEffect(function(){if(s)return s.registerPath(o,c),function(){s.unregisterPath(o,c)}},[c]),s?null:S.createElement(H1e,Je({},e,{ref:r}))}const zb=S.forwardRef(W1e);var z1e=["className","children"],G1e=function(r,o){var s=r.className,c=r.children,d=kn(r,z1e),p=S.useContext(Qc),v=p.prefixCls,m=p.mode,E=p.rtl;return S.createElement("ul",Je({className:He(v,E&&"".concat(v,"-rtl"),"".concat(v,"-sub"),"".concat(v,"-").concat(m==="inline"?"inline":"vertical"),s),role:"menu"},d,{"data-menu-list":!0,ref:o}),c)},HP=S.forwardRef(G1e);HP.displayName="SubMenuList";function WP(e,r){return Jc(e).map(function(o,s){if(S.isValidElement(o)){var c,d,p=o.key,v=(c=(d=o.props)===null||d===void 0?void 0:d.eventKey)!==null&&c!==void 0?c:p,m=v==null;m&&(v="tmp_key-".concat([].concat(_t(r),[s]).join("-")));var E={key:v,eventKey:v};return S.cloneElement(o,E)}return o})}var pa={adjustX:1,adjustY:1},K1e={topLeft:{points:["bl","tl"],overflow:pa},topRight:{points:["br","tr"],overflow:pa},bottomLeft:{points:["tl","bl"],overflow:pa},bottomRight:{points:["tr","br"],overflow:pa},leftTop:{points:["tr","tl"],overflow:pa},leftBottom:{points:["br","bl"],overflow:pa},rightTop:{points:["tl","tr"],overflow:pa},rightBottom:{points:["bl","br"],overflow:pa}},q1e={topLeft:{points:["bl","tl"],overflow:pa},topRight:{points:["br","tr"],overflow:pa},bottomLeft:{points:["tl","bl"],overflow:pa},bottomRight:{points:["tr","br"],overflow:pa},rightTop:{points:["tr","tl"],overflow:pa},rightBottom:{points:["br","bl"],overflow:pa},leftTop:{points:["tl","tr"],overflow:pa},leftBottom:{points:["bl","br"],overflow:pa}};function _X(e,r,o){if(r)return r;if(o)return o[e]||o.other}var Y1e={horizontal:"bottomLeft",vertical:"rightTop","vertical-left":"rightTop","vertical-right":"leftTop"};function X1e(e){var r=e.prefixCls,o=e.visible,s=e.children,c=e.popup,d=e.popupStyle,p=e.popupClassName,v=e.popupOffset,m=e.disabled,E=e.mode,C=e.onVisibleChange,b=S.useContext(Qc),R=b.getPopupContainer,w=b.rtl,I=b.subMenuOpenDelay,O=b.subMenuCloseDelay,x=b.builtinPlacements,P=b.triggerSubMenuAction,N=b.forceSubMenuRender,L=b.rootClassName,M=b.motion,j=b.defaultMotions,$=S.useState(!1),H=Ue($,2),G=H[0],Y=H[1],q=_e(w?_e({},q1e):_e({},K1e),x),J=Y1e[E],re=_X(E,M,j),Z=S.useRef(re);E!=="inline"&&(Z.current=re);var Q=_e(_e({},Z.current),{},{leavedClassName:"".concat(r,"-hidden"),removeOnLeave:!1,motionAppear:!0}),he=S.useRef();return S.useEffect(function(){return he.current=ci(function(){Y(o)}),function(){ci.cancel(he.current)}},[o]),S.createElement(PP,{prefixCls:r,popupClassName:He("".concat(r,"-popup"),ye({},"".concat(r,"-rtl"),w),p,L),stretch:E==="horizontal"?"minWidth":null,getPopupContainer:R,builtinPlacements:q,popupPlacement:J,popupVisible:G,popup:c,popupStyle:d,popupAlign:v&&{offset:v},action:m?[]:[P],mouseEnterDelay:I,mouseLeaveDelay:O,onPopupVisibleChange:C,forceRender:N,popupMotion:Q,fresh:!0},s)}function J1e(e){var r=e.id,o=e.open,s=e.keyPath,c=e.children,d="inline",p=S.useContext(Qc),v=p.prefixCls,m=p.forceSubMenuRender,E=p.motion,C=p.defaultMotions,b=p.mode,R=S.useRef(!1);R.current=b===d;var w=S.useState(!R.current),I=Ue(w,2),O=I[0],x=I[1],P=R.current?o:!1;S.useEffect(function(){R.current&&x(!1)},[b]);var N=_e({},_X(d,E,C));s.length>1&&(N.motionAppear=!1);var L=N.onVisibleChanged;return N.onVisibleChanged=function(M){return!R.current&&!M&&x(!0),L==null?void 0:L(M)},O?null:S.createElement(Iv,{mode:d,locked:!R.current},S.createElement(lp,Je({visible:P},N,{forceRender:m,removeOnLeave:!1,leavedClassName:"".concat(v,"-hidden")}),function(M){var j=M.className,$=M.style;return S.createElement(HP,{id:r,className:j,style:$},c)}))}var Q1e=["style","className","title","eventKey","warnKey","disabled","internalPopupClose","children","itemIcon","expandIcon","popupClassName","popupOffset","popupStyle","onClick","onMouseEnter","onMouseLeave","onTitleClick","onTitleMouseEnter","onTitleMouseLeave"],Z1e=["active"],eIe=S.forwardRef(function(e,r){var o=e.style,s=e.className,c=e.title,d=e.eventKey;e.warnKey;var p=e.disabled,v=e.internalPopupClose,m=e.children,E=e.itemIcon,C=e.expandIcon,b=e.popupClassName,R=e.popupOffset,w=e.popupStyle,I=e.onClick,O=e.onMouseEnter,x=e.onMouseLeave,P=e.onTitleClick,N=e.onTitleMouseEnter,L=e.onTitleMouseLeave,M=kn(e,Q1e),j=dX(d),$=S.useContext(Qc),H=$.prefixCls,G=$.mode,Y=$.openKeys,q=$.disabled,J=$.overflowDisabled,re=$.activeKey,Z=$.selectedKeys,Q=$.itemIcon,he=$.expandIcon,oe=$.onItemClick,ae=$.onOpenChange,te=$.onActive,de=S.useContext(VP),fe=de._internalRenderSubMenuItem,ie=S.useContext(fX),le=ie.isSubPathKey,ve=km(),ge="".concat(H,"-submenu"),Te=q||p,we=S.useRef(),Ie=S.useRef(),Me=E??Q,Ke=C??he,ke=Y.includes(d),Ne=!J&&ke,ze=le(Z,d),Qe=gX(d,Te,N,L),De=Qe.active,xe=kn(Qe,Z1e),ft=S.useState(!1),Et=Ue(ft,2),st=Et[0],ot=Et[1],Ze=function(Un){Te||ot(Un)},je=function(Un){Ze(!0),O==null||O({key:d,domEvent:Un})},ct=function(Un){Ze(!1),x==null||x({key:d,domEvent:Un})},lt=S.useMemo(function(){return De||(G!=="inline"?st||le([re],d):!1)},[G,De,re,st,d,le]),gt=vX(ve.length),Ot=function(Un){Te||(P==null||P({key:d,domEvent:Un}),G==="inline"&&ae(d,!ke))},Tt=Pg(function(mn){I==null||I(xC(mn)),oe(mn)}),Wt=function(Un){G!=="inline"&&ae(d,Un)},on=function(){te(d)},xt=j&&"".concat(j,"-popup"),wt=S.createElement("div",Je({role:"menuitem",style:gt,className:"".concat(ge,"-title"),tabIndex:Te?null:-1,ref:we,title:typeof c=="string"?c:null,"data-menu-id":J&&j?null:j,"aria-expanded":Ne,"aria-haspopup":!0,"aria-controls":xt,"aria-disabled":Te,onClick:Ot,onFocus:on},xe),c,S.createElement(EX,{icon:G!=="horizontal"?Ke:void 0,props:_e(_e({},e),{},{isOpen:Ne,isSubMenu:!0})},S.createElement("i",{className:"".concat(ge,"-arrow")}))),Pt=S.useRef(G);if(G!=="inline"&&ve.length>1?Pt.current="vertical":Pt.current=G,!J){var Kt=Pt.current;wt=S.createElement(X1e,{mode:Kt,prefixCls:ge,visible:!v&&Ne&&G!=="inline",popupClassName:b,popupOffset:R,popupStyle:w,popup:S.createElement(Iv,{mode:Kt==="horizontal"?"vertical":Kt},S.createElement(HP,{id:xt,ref:Ie},m)),disabled:Te,onVisibleChange:Wt},wt)}var fn=S.createElement(Pl.Item,Je({ref:r,role:"none"},M,{component:"li",style:o,className:He(ge,"".concat(ge,"-").concat(G),s,ye(ye(ye(ye({},"".concat(ge,"-open"),Ne),"".concat(ge,"-active"),lt),"".concat(ge,"-selected"),ze),"".concat(ge,"-disabled"),Te)),onMouseEnter:je,onMouseLeave:ct}),wt,!J&&S.createElement(J1e,{id:xt,open:Ne,keyPath:ve},m));return fe&&(fn=fe(fn,e,{selected:ze,active:lt,open:Ne,disabled:Te})),S.createElement(Iv,{onItemClick:Tt,mode:G==="horizontal"?"vertical":G,itemIcon:Me,expandIcon:Ke},fn)}),Gb=S.forwardRef(function(e,r){var o=e.eventKey,s=e.children,c=km(o),d=WP(s,c),p=Wb();S.useEffect(function(){if(p)return p.registerPath(o,c),function(){p.unregisterPath(o,c)}},[c]);var v;return p?v=d:v=S.createElement(eIe,Je({ref:r},e),d),S.createElement(pX.Provider,{value:c},v)});function zP(e){var r=e.className,o=e.style,s=S.useContext(Qc),c=s.prefixCls,d=Wb();return d?null:S.createElement("li",{role:"separator",className:He("".concat(c,"-item-divider"),r),style:o})}var tIe=["className","title","eventKey","children"],nIe=S.forwardRef(function(e,r){var o=e.className,s=e.title;e.eventKey;var c=e.children,d=kn(e,tIe),p=S.useContext(Qc),v=p.prefixCls,m="".concat(v,"-item-group");return S.createElement("li",Je({ref:r,role:"presentation"},d,{onClick:function(C){return C.stopPropagation()},className:He(m,o)}),S.createElement("div",{role:"presentation",className:"".concat(m,"-title"),title:typeof s=="string"?s:void 0},s),S.createElement("ul",{role:"group",className:"".concat(m,"-list")},c))}),GP=S.forwardRef(function(e,r){var o=e.eventKey,s=e.children,c=km(o),d=WP(s,c),p=Wb();return p?d:S.createElement(nIe,Je({ref:r},Sa(e,["warnKey"])),d)}),rIe=["label","children","key","type"];function GN(e,r){var o=r.item,s=r.group,c=r.submenu,d=r.divider;return(e||[]).map(function(p,v){if(p&&pn(p)==="object"){var m=p,E=m.label,C=m.children,b=m.key,R=m.type,w=kn(m,rIe),I=b??"tmp-".concat(v);return C||R==="group"?R==="group"?S.createElement(s,Je({key:I},w,{title:E}),GN(C,r)):S.createElement(c,Je({key:I},w,{title:E}),GN(C,r)):R==="divider"?S.createElement(d,Je({key:I},w)):S.createElement(o,Je({key:I},w),E)}return null}).filter(function(p){return p})}function W7(e,r,o,s){var c=e,d=_e({divider:zP,item:zb,group:GP,submenu:Gb},s);return r&&(c=GN(r,d)),WP(c,o)}var iIe=["prefixCls","rootClassName","style","className","tabIndex","items","children","direction","id","mode","inlineCollapsed","disabled","disabledOverflow","subMenuOpenDelay","subMenuCloseDelay","forceSubMenuRender","defaultOpenKeys","openKeys","activeKey","defaultActiveFirst","selectable","multiple","defaultSelectedKeys","selectedKeys","onSelect","onDeselect","inlineIndent","motion","defaultMotions","triggerSubMenuAction","builtinPlacements","itemIcon","expandIcon","overflowedIndicator","overflowedIndicatorPopupClassName","getPopupContainer","onClick","onOpenChange","onKeyDown","openAnimation","openTransitionName","_internalRenderMenuItem","_internalRenderSubMenuItem","_internalComponents"],Ih=[],oIe=S.forwardRef(function(e,r){var o,s=e,c=s.prefixCls,d=c===void 0?"rc-menu":c,p=s.rootClassName,v=s.style,m=s.className,E=s.tabIndex,C=E===void 0?0:E,b=s.items,R=s.children,w=s.direction,I=s.id,O=s.mode,x=O===void 0?"vertical":O,P=s.inlineCollapsed,N=s.disabled,L=s.disabledOverflow,M=s.subMenuOpenDelay,j=M===void 0?.1:M,$=s.subMenuCloseDelay,H=$===void 0?.1:$,G=s.forceSubMenuRender,Y=s.defaultOpenKeys,q=s.openKeys,J=s.activeKey,re=s.defaultActiveFirst,Z=s.selectable,Q=Z===void 0?!0:Z,he=s.multiple,oe=he===void 0?!1:he,ae=s.defaultSelectedKeys,te=s.selectedKeys,de=s.onSelect,fe=s.onDeselect,ie=s.inlineIndent,le=ie===void 0?24:ie,ve=s.motion,ge=s.defaultMotions,Te=s.triggerSubMenuAction,we=Te===void 0?"hover":Te,Ie=s.builtinPlacements,Me=s.itemIcon,Ke=s.expandIcon,ke=s.overflowedIndicator,Ne=ke===void 0?"...":ke,ze=s.overflowedIndicatorPopupClassName,Qe=s.getPopupContainer,De=s.onClick,xe=s.onOpenChange,ft=s.onKeyDown;s.openAnimation,s.openTransitionName;var Et=s._internalRenderMenuItem,st=s._internalRenderSubMenuItem,ot=s._internalComponents,Ze=kn(s,iIe),je=S.useMemo(function(){return[W7(R,b,Ih,ot),W7(R,b,Ih,{})]},[R,b,ot]),ct=Ue(je,2),lt=ct[0],gt=ct[1],Ot=S.useState(!1),Tt=Ue(Ot,2),Wt=Tt[0],on=Tt[1],xt=S.useRef(),wt=F1e(I),Pt=w==="rtl",Kt=va(Y,{value:q,postState:function(bn){return bn||Ih}}),fn=Ue(Kt,2),mn=fn[0],Un=fn[1],Kn=function(bn){var gn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;function Er(){Un(bn),xe==null||xe(bn)}gn?kl.flushSync(Er):Er()},qn=S.useState(mn),mt=Ue(qn,2),Nt=mt[0],Sn=mt[1],ur=S.useRef(!1),Br=S.useMemo(function(){return(x==="inline"||x==="vertical")&&P?["vertical",P]:[x,!1]},[x,P]),dr=Ue(Br,2),Mn=dr[0],Vt=dr[1],yn=Mn==="inline",$t=S.useState(Mn),Ct=Ue($t,2),Ht=Ct[0],On=Ct[1],rt=S.useState(Vt),St=Ue(rt,2),It=St[0],en=St[1];S.useEffect(function(){On(Mn),en(Vt),ur.current&&(yn?Un(Nt):Kn(Ih))},[Mn,Vt]);var En=S.useState(0),Cn=Ue(En,2),pr=Cn[0],Vr=Cn[1],cr=pr>=lt.length-1||Ht!=="horizontal"||L;S.useEffect(function(){yn&&Sn(mn)},[mn]),S.useEffect(function(){return ur.current=!0,function(){ur.current=!1}},[]);var rn=k1e(),vi=rn.registerPath,Wo=rn.unregisterPath,po=rn.refreshOverflowKeys,li=rn.isSubPathKey,wi=rn.getKeyPath,Dt=rn.getKeys,Mt=rn.getSubPathKeys,Qt=S.useMemo(function(){return{registerPath:vi,unregisterPath:Wo}},[vi,Wo]),Yn=S.useMemo(function(){return{isSubPathKey:li}},[li]);S.useEffect(function(){po(cr?Ih:lt.slice(pr+1).map(function(jn){return jn.key}))},[pr,cr]);var ki=va(J||re&&((o=lt[0])===null||o===void 0?void 0:o.key),{value:J}),wo=Ue(ki,2),An=wo[0],Io=wo[1],Ma=Pg(function(jn){Io(jn)}),qt=Pg(function(){Io(void 0)});S.useImperativeHandle(r,function(){return{list:xt.current,focus:function(bn){var gn,Er=Dt(),jr=WN(Er,wt),fo=jr.elements,mo=jr.key2element,Ba=jr.element2key,Hi=jP(xt.current,fo),zo=An??(Hi[0]?Ba.get(Hi[0]):(gn=lt.find(function(Ru){return!Ru.props.disabled}))===null||gn===void 0?void 0:gn.key),as=mo.get(zo);if(zo&&as){var Tu;as==null||(Tu=as.focus)===null||Tu===void 0||Tu.call(as,bn)}}}});var xn=va(ae||[],{value:te,postState:function(bn){return Array.isArray(bn)?bn:bn==null?Ih:[bn]}}),vr=Ue(xn,2),ti=vr[0],$i=vr[1],Ec=function(bn){if(Q){var gn=bn.key,Er=ti.includes(gn),jr;oe?Er?jr=ti.filter(function(mo){return mo!==gn}):jr=[].concat(_t(ti),[gn]):jr=[gn],$i(jr);var fo=_e(_e({},bn),{},{selectedKeys:jr});Er?fe==null||fe(fo):de==null||de(fo)}!oe&&mn.length&&Ht!=="inline"&&Kn(Ih)},tl=Pg(function(jn){De==null||De(xC(jn)),Ec(jn)}),Ca=Pg(function(jn,bn){var gn=mn.filter(function(jr){return jr!==jn});if(bn)gn.push(jn);else if(Ht!=="inline"){var Er=Mt(jn);gn=gn.filter(function(jr){return!Er.has(jr)})}Sv(mn,gn,!0)||Kn(gn,!0)}),Ao=function(bn,gn){var Er=gn??!mn.includes(bn);Ca(bn,Er)},Fa=D1e(Ht,An,Pt,wt,xt,Dt,wi,Io,Ao,ft);S.useEffect(function(){on(!0)},[]);var Ua=S.useMemo(function(){return{_internalRenderMenuItem:Et,_internalRenderSubMenuItem:st}},[Et,st]),Lt=Ht!=="horizontal"||L?lt:lt.map(function(jn,bn){return S.createElement(Iv,{key:jn.key,overflowDisabled:bn>pr},jn)}),Nn=S.createElement(Pl,Je({id:I,ref:xt,prefixCls:"".concat(d,"-overflow"),component:"ul",itemComponent:zb,className:He(d,"".concat(d,"-root"),"".concat(d,"-").concat(Ht),m,ye(ye({},"".concat(d,"-inline-collapsed"),It),"".concat(d,"-rtl"),Pt),p),dir:w,style:v,role:"menu",tabIndex:C,data:Lt,renderRawItem:function(bn){return bn},renderRawRest:function(bn){var gn=bn.length,Er=gn?lt.slice(-gn):null;return S.createElement(Gb,{eventKey:zN,title:Ne,disabled:cr,internalPopupClose:gn===0,popupClassName:ze},Er)},maxCount:Ht!=="horizontal"||L?Pl.INVALIDATE:Pl.RESPONSIVE,ssr:"full","data-menu-list":!0,onVisibleChange:function(bn){Vr(bn)},onKeyDown:Fa},Ze));return S.createElement(VP.Provider,{value:Ua},S.createElement(lX.Provider,{value:wt},S.createElement(Iv,{prefixCls:d,rootClassName:p,mode:Ht,openKeys:mn,rtl:Pt,disabled:N,motion:Wt?ve:null,defaultMotions:Wt?ge:null,activeKey:An,onActive:Ma,onInactive:qt,selectedKeys:ti,inlineIndent:le,subMenuOpenDelay:j,subMenuCloseDelay:H,forceSubMenuRender:G,builtinPlacements:Ie,triggerSubMenuAction:we,getPopupContainer:Qe,itemIcon:Me,expandIcon:Ke,onItemClick:tl,onOpenChange:Ca},S.createElement(fX.Provider,{value:Yn},Nn),S.createElement("div",{style:{display:"none"},"aria-hidden":!0},S.createElement(hX.Provider,{value:Qt},gt)))))}),Gv=oIe;Gv.Item=zb;Gv.SubMenu=Gb;Gv.ItemGroup=GP;Gv.Divider=zP;var aIe={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM104 228a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"bars",theme:"outlined"};const sIe=aIe;var cIe=function(r,o){return S.createElement(ro,Je({},r,{ref:o,icon:sIe}))},lIe=S.forwardRef(cIe);const uIe=lIe;var dIe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 000 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"}}]},name:"left",theme:"outlined"};const hIe=dIe;var pIe=function(r,o){return S.createElement(ro,Je({},r,{ref:o,icon:hIe}))},fIe=S.forwardRef(pIe);const NC=fIe,mIe=e=>!isNaN(parseFloat(e))&&isFinite(e),gIe=mIe,SX=S.createContext({siderHook:{addSider:()=>null,removeSider:()=>null}});var vIe=globalThis&&globalThis.__rest||function(e,r){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};const z7={xs:"479.98px",sm:"575.98px",md:"767.98px",lg:"991.98px",xl:"1199.98px",xxl:"1599.98px"},Kb=S.createContext({}),EIe=(()=>{let e=0;return function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return e+=1,`${r}${e}`}})(),_Ie=S.forwardRef((e,r)=>{const{prefixCls:o,className:s,trigger:c,children:d,defaultCollapsed:p=!1,theme:v="dark",style:m={},collapsible:E=!1,reverseArrow:C=!1,width:b=200,collapsedWidth:R=80,zeroWidthTriggerStyle:w,breakpoint:I,onCollapse:O,onBreakpoint:x}=e,P=vIe(e,["prefixCls","className","trigger","children","defaultCollapsed","theme","style","collapsible","reverseArrow","width","collapsedWidth","zeroWidthTriggerStyle","breakpoint","onCollapse","onBreakpoint"]),{siderHook:N}=S.useContext(SX),[L,M]=S.useState("collapsed"in e?e.collapsed:p),[j,$]=S.useState(!1);S.useEffect(()=>{"collapsed"in e&&M(e.collapsed)},[e.collapsed]);const H=(Z,Q)=>{"collapsed"in e||M(Z),O==null||O(Z,Q)},G=S.useRef();G.current=Z=>{$(Z.matches),x==null||x(Z.matches),L!==Z.matches&&H(Z.matches,"responsive")},S.useEffect(()=>{function Z(he){return G.current(he)}let Q;if(typeof window<"u"){const{matchMedia:he}=window;if(he&&I&&I in z7){Q=he(`screen and (max-width: ${z7[I]})`);try{Q.addEventListener("change",Z)}catch{Q.addListener(Z)}Z(Q)}}return()=>{try{Q==null||Q.removeEventListener("change",Z)}catch{Q==null||Q.removeListener(Z)}}},[I]),S.useEffect(()=>{const Z=EIe("ant-sider-");return N.addSider(Z),()=>N.removeSider(Z)},[]);const Y=()=>{H(!L,"clickTrigger")},{getPrefixCls:q}=S.useContext(Qn),J=()=>{const Z=q("layout-sider",o),Q=Sa(P,["collapsed"]),he=L?R:b,oe=gIe(he)?`${he}px`:String(he),ae=parseFloat(String(R||0))===0?S.createElement("span",{onClick:Y,className:He(`${Z}-zero-width-trigger`,`${Z}-zero-width-trigger-${C?"right":"left"}`),style:w},c||S.createElement(uIe,null)):null,fe={expanded:C?S.createElement(OC,null):S.createElement(NC,null),collapsed:C?S.createElement(NC,null):S.createElement(OC,null)}[L?"collapsed":"expanded"],ie=c!==null?ae||S.createElement("div",{className:`${Z}-trigger`,onClick:Y,style:{width:oe}},c||fe):null,le=Object.assign(Object.assign({},m),{flex:`0 0 ${oe}`,maxWidth:oe,minWidth:oe,width:oe}),ve=He(Z,`${Z}-${v}`,{[`${Z}-collapsed`]:!!L,[`${Z}-has-trigger`]:E&&c!==null&&!ae,[`${Z}-below`]:!!j,[`${Z}-zero-width`]:parseFloat(oe)===0},s);return S.createElement("aside",Object.assign({className:ve},Q,{style:le,ref:r}),S.createElement("div",{className:`${Z}-children`},d),E||j&&ae?ie:null)},re=S.useMemo(()=>({siderCollapsed:L}),[L]);return S.createElement(Kb.Provider,{value:re},J())}),yX=_Ie;var SIe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M176 511a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"ellipsis",theme:"outlined"};const yIe=SIe;var CIe=function(r,o){return S.createElement(ro,Je({},r,{ref:o,icon:yIe}))},bIe=S.forwardRef(CIe);const TIe=bIe;var RIe=globalThis&&globalThis.__rest||function(e,r){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};const wIe=e=>{const{prefixCls:r,className:o,dashed:s}=e,c=RIe(e,["prefixCls","className","dashed"]),{getPrefixCls:d}=S.useContext(Qn),p=d("menu",r),v=He({[`${p}-item-divider-dashed`]:!!s},o);return S.createElement(zP,Object.assign({className:v},c))},CX=wIe,IIe=S.createContext({prefixCls:"",firstLevel:!0,inlineCollapsed:!1}),DC=IIe,AIe=e=>{var r;const{className:o,children:s,icon:c,title:d,danger:p}=e,{prefixCls:v,firstLevel:m,direction:E,disableMenuItemTitleTooltip:C,inlineCollapsed:b}=S.useContext(DC),R=N=>{const L=S.createElement("span",{className:`${v}-title-content`},s);return(!c||S.isValidElement(s)&&s.type==="span")&&s&&N&&m&&typeof s=="string"?S.createElement("div",{className:`${v}-inline-collapsed-noicon`},s.charAt(0)):L},{siderCollapsed:w}=S.useContext(Kb);let I=d;typeof d>"u"?I=m?s:"":d===!1&&(I="");const O={title:I};!w&&!b&&(O.title=null,O.open=!1);const x=Jc(s).length;let P=S.createElement(zb,Object.assign({},Sa(e,["title","icon","danger"]),{className:He({[`${v}-item-danger`]:p,[`${v}-item-only-child`]:(c?x+1:x)===1},o),title:typeof d=="string"?d:void 0}),fc(c,{className:He(S.isValidElement(c)?(r=c.props)===null||r===void 0?void 0:r.className:"",`${v}-item-icon`)}),R(b));return C||(P=S.createElement(zv,Object.assign({},O,{placement:E==="rtl"?"left":"right",overlayClassName:`${v}-inline-collapsed-tooltip`}),P)),P},bX=AIe;globalThis&&globalThis.__rest;const OIe=S.createContext(null),G7=OIe,xIe=e=>{const{componentCls:r,motionDurationSlow:o,horizontalLineHeight:s,colorSplit:c,lineWidth:d,lineType:p,itemPaddingInline:v}=e;return{[`${r}-horizontal`]:{lineHeight:s,border:0,borderBottom:`${qe(d)} ${p} ${c}`,boxShadow:"none","&::after":{display:"block",clear:"both",height:0,content:'"\\20"'},[`${r}-item, ${r}-submenu`]:{position:"relative",display:"inline-block",verticalAlign:"bottom",paddingInline:v},[`> ${r}-item:hover,
        > ${r}-item-active,
        > ${r}-submenu ${r}-submenu-title:hover`]:{backgroundColor:"transparent"},[`${r}-item, ${r}-submenu-title`]:{transition:[`border-color ${o}`,`background ${o}`].join(",")},[`${r}-submenu-arrow`]:{display:"none"}}}},NIe=xIe,DIe=e=>{let{componentCls:r,menuArrowOffset:o,calc:s}=e;return{[`${r}-rtl`]:{direction:"rtl"},[`${r}-submenu-rtl`]:{transformOrigin:"100% 0"},[`${r}-rtl${r}-vertical,
    ${r}-submenu-rtl ${r}-vertical`]:{[`${r}-submenu-arrow`]:{"&::before":{transform:`rotate(-45deg) translateY(${qe(s(o).mul(-1).equal())})`},"&::after":{transform:`rotate(45deg) translateY(${qe(o)})`}}}}},PIe=DIe,K7=e=>Object.assign({},yC(e)),LIe=(e,r)=>{const{componentCls:o,itemColor:s,itemSelectedColor:c,groupTitleColor:d,itemBg:p,subMenuItemBg:v,itemSelectedBg:m,activeBarHeight:E,activeBarWidth:C,activeBarBorderWidth:b,motionDurationSlow:R,motionEaseInOut:w,motionEaseOut:I,itemPaddingInline:O,motionDurationMid:x,itemHoverColor:P,lineType:N,colorSplit:L,itemDisabledColor:M,dangerItemColor:j,dangerItemHoverColor:$,dangerItemSelectedColor:H,dangerItemActiveBg:G,dangerItemSelectedBg:Y,popupBg:q,itemHoverBg:J,itemActiveBg:re,menuSubMenuBg:Z,horizontalItemSelectedColor:Q,horizontalItemSelectedBg:he,horizontalItemBorderRadius:oe,horizontalItemHoverBg:ae}=e;return{[`${o}-${r}, ${o}-${r} > ${o}`]:{color:s,background:p,[`&${o}-root:focus-visible`]:Object.assign({},K7(e)),[`${o}-item-group-title`]:{color:d},[`${o}-submenu-selected`]:{[`> ${o}-submenu-title`]:{color:c}},[`${o}-item, ${o}-submenu-title`]:{color:s,[`&:not(${o}-item-disabled):focus-visible`]:Object.assign({},K7(e))},[`${o}-item-disabled, ${o}-submenu-disabled`]:{color:`${M} !important`},[`${o}-item:not(${o}-item-selected):not(${o}-submenu-selected)`]:{[`&:hover, > ${o}-submenu-title:hover`]:{color:P}},[`&:not(${o}-horizontal)`]:{[`${o}-item:not(${o}-item-selected)`]:{"&:hover":{backgroundColor:J},"&:active":{backgroundColor:re}},[`${o}-submenu-title`]:{"&:hover":{backgroundColor:J},"&:active":{backgroundColor:re}}},[`${o}-item-danger`]:{color:j,[`&${o}-item:hover`]:{[`&:not(${o}-item-selected):not(${o}-submenu-selected)`]:{color:$}},[`&${o}-item:active`]:{background:G}},[`${o}-item a`]:{"&, &:hover":{color:"inherit"}},[`${o}-item-selected`]:{color:c,[`&${o}-item-danger`]:{color:H},"a, a:hover":{color:"inherit"}},[`& ${o}-item-selected`]:{backgroundColor:m,[`&${o}-item-danger`]:{backgroundColor:Y}},[`&${o}-submenu > ${o}`]:{backgroundColor:Z},[`&${o}-popup > ${o}`]:{backgroundColor:q},[`&${o}-submenu-popup > ${o}`]:{backgroundColor:q},[`&${o}-horizontal`]:Object.assign(Object.assign({},r==="dark"?{borderBottom:0}:{}),{[`> ${o}-item, > ${o}-submenu`]:{top:b,marginTop:e.calc(b).mul(-1).equal(),marginBottom:0,borderRadius:oe,"&::after":{position:"absolute",insetInline:O,bottom:0,borderBottom:`${qe(E)} solid transparent`,transition:`border-color ${R} ${w}`,content:'""'},"&:hover, &-active, &-open":{background:ae,"&::after":{borderBottomWidth:E,borderBottomColor:Q}},"&-selected":{color:Q,backgroundColor:he,"&:hover":{backgroundColor:he},"&::after":{borderBottomWidth:E,borderBottomColor:Q}}}}),[`&${o}-root`]:{[`&${o}-inline, &${o}-vertical`]:{borderInlineEnd:`${qe(b)} ${N} ${L}`}},[`&${o}-inline`]:{[`${o}-sub${o}-inline`]:{background:v},[`${o}-item`]:{position:"relative","&::after":{position:"absolute",insetBlock:0,insetInlineEnd:0,borderInlineEnd:`${qe(C)} solid ${c}`,transform:"scaleY(0.0001)",opacity:0,transition:[`transform ${x} ${I}`,`opacity ${x} ${I}`].join(","),content:'""'},[`&${o}-item-danger`]:{"&::after":{borderInlineEndColor:H}}},[`${o}-selected, ${o}-item-selected`]:{"&::after":{transform:"scaleY(1)",opacity:1,transition:[`transform ${x} ${w}`,`opacity ${x} ${w}`].join(",")}}}}}},q7=LIe,Y7=e=>{const{componentCls:r,itemHeight:o,itemMarginInline:s,padding:c,menuArrowSize:d,marginXS:p,itemMarginBlock:v,itemWidth:m}=e,E=e.calc(d).add(c).add(p).equal();return{[`${r}-item`]:{position:"relative",overflow:"hidden"},[`${r}-item, ${r}-submenu-title`]:{height:o,lineHeight:qe(o),paddingInline:c,overflow:"hidden",textOverflow:"ellipsis",marginInline:s,marginBlock:v,width:m},[`> ${r}-item,
            > ${r}-submenu > ${r}-submenu-title`]:{height:o,lineHeight:qe(o)},[`${r}-item-group-list ${r}-submenu-title,
            ${r}-submenu-title`]:{paddingInlineEnd:E}}},kIe=e=>{const{componentCls:r,iconCls:o,itemHeight:s,colorTextLightSolid:c,dropdownWidth:d,controlHeightLG:p,motionDurationMid:v,motionEaseOut:m,paddingXL:E,itemMarginInline:C,fontSizeLG:b,motionDurationSlow:R,paddingXS:w,boxShadowSecondary:I,collapsedWidth:O,collapsedIconSize:x}=e,P={height:s,lineHeight:qe(s),listStylePosition:"inside",listStyleType:"disc"};return[{[r]:{"&-inline, &-vertical":Object.assign({[`&${r}-root`]:{boxShadow:"none"}},Y7(e))},[`${r}-submenu-popup`]:{[`${r}-vertical`]:Object.assign(Object.assign({},Y7(e)),{boxShadow:I})}},{[`${r}-submenu-popup ${r}-vertical${r}-sub`]:{minWidth:d,maxHeight:`calc(100vh - ${qe(e.calc(p).mul(2.5).equal())})`,padding:"0",overflow:"hidden",borderInlineEnd:0,"&:not([class*='-active'])":{overflowX:"hidden",overflowY:"auto"}}},{[`${r}-inline`]:{width:"100%",[`&${r}-root`]:{[`${r}-item, ${r}-submenu-title`]:{display:"flex",alignItems:"center",transition:[`border-color ${R}`,`background ${R}`,`padding ${v} ${m}`,`padding-inline calc(50% - ${qe(e.calc(b).div(2).equal())} - ${qe(C)})`].join(","),[`> ${r}-title-content`]:{flex:"auto",minWidth:0,overflow:"hidden",textOverflow:"ellipsis"},"> *":{flex:"none"}}},[`${r}-sub${r}-inline`]:{padding:0,border:0,borderRadius:0,boxShadow:"none",[`& > ${r}-submenu > ${r}-submenu-title`]:P,[`& ${r}-item-group-title`]:{paddingInlineStart:E}},[`${r}-item`]:P}},{[`${r}-inline-collapsed`]:{width:O,[`&${r}-root`]:{[`${r}-item, ${r}-submenu ${r}-submenu-title`]:{[`> ${r}-inline-collapsed-noicon`]:{fontSize:b,textAlign:"center"}}},[`> ${r}-item,
          > ${r}-item-group > ${r}-item-group-list > ${r}-item,
          > ${r}-item-group > ${r}-item-group-list > ${r}-submenu > ${r}-submenu-title,
          > ${r}-submenu > ${r}-submenu-title`]:{insetInlineStart:0,paddingInline:`calc(50% - ${qe(e.calc(b).div(2).equal())} - ${qe(C)})`,textOverflow:"clip",[`
            ${r}-submenu-arrow,
            ${r}-submenu-expand-icon
          `]:{opacity:0},[`${r}-item-icon, ${o}`]:{margin:0,fontSize:x,lineHeight:qe(s),"+ span":{display:"inline-block",opacity:0}}},[`${r}-item-icon, ${o}`]:{display:"inline-block"},"&-tooltip":{pointerEvents:"none",[`${r}-item-icon, ${o}`]:{display:"none"},"a, a:hover":{color:c}},[`${r}-item-group-title`]:Object.assign(Object.assign({},SC),{paddingInline:w})}}]},MIe=kIe,X7=e=>{const{componentCls:r,motionDurationSlow:o,motionDurationMid:s,motionEaseInOut:c,motionEaseOut:d,iconCls:p,iconSize:v,iconMarginInlineEnd:m}=e;return{[`${r}-item, ${r}-submenu-title`]:{position:"relative",display:"block",margin:0,whiteSpace:"nowrap",cursor:"pointer",transition:[`border-color ${o}`,`background ${o}`,`padding ${o} ${c}`].join(","),[`${r}-item-icon, ${p}`]:{minWidth:v,fontSize:v,transition:[`font-size ${s} ${d}`,`margin ${o} ${c}`,`color ${o}`].join(","),"+ span":{marginInlineStart:m,opacity:1,transition:[`opacity ${o} ${c}`,`margin ${o}`,`color ${o}`].join(",")}},[`${r}-item-icon`]:Object.assign({},Db()),[`&${r}-item-only-child`]:{[`> ${p}, > ${r}-item-icon`]:{marginInlineEnd:0}}},[`${r}-item-disabled, ${r}-submenu-disabled`]:{background:"none !important",cursor:"not-allowed","&::after":{borderColor:"transparent !important"},a:{color:"inherit !important"},[`> ${r}-submenu-title`]:{color:"inherit !important",cursor:"not-allowed"}}}},J7=e=>{const{componentCls:r,motionDurationSlow:o,motionEaseInOut:s,borderRadius:c,menuArrowSize:d,menuArrowOffset:p}=e;return{[`${r}-submenu`]:{"&-expand-icon, &-arrow":{position:"absolute",top:"50%",insetInlineEnd:e.margin,width:d,color:"currentcolor",transform:"translateY(-50%)",transition:`transform ${o} ${s}, opacity ${o}`},"&-arrow":{"&::before, &::after":{position:"absolute",width:e.calc(d).mul(.6).equal(),height:e.calc(d).mul(.15).equal(),backgroundColor:"currentcolor",borderRadius:c,transition:[`background ${o} ${s}`,`transform ${o} ${s}`,`top ${o} ${s}`,`color ${o} ${s}`].join(","),content:'""'},"&::before":{transform:`rotate(45deg) translateY(${qe(e.calc(p).mul(-1).equal())})`},"&::after":{transform:`rotate(-45deg) translateY(${qe(p)})`}}}}},FIe=e=>{const{antCls:r,componentCls:o,fontSize:s,motionDurationSlow:c,motionDurationMid:d,motionEaseInOut:p,paddingXS:v,padding:m,colorSplit:E,lineWidth:C,zIndexPopup:b,borderRadiusLG:R,subMenuItemBorderRadius:w,menuArrowSize:I,menuArrowOffset:O,lineType:x,groupTitleLineHeight:P,groupTitleFontSize:N}=e;return[{"":{[`${o}`]:Object.assign(Object.assign({},gN()),{"&-hidden":{display:"none"}})},[`${o}-submenu-hidden`]:{display:"none"}},{[o]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Ds(e)),gN()),{marginBottom:0,paddingInlineStart:0,fontSize:s,lineHeight:0,listStyle:"none",outline:"none",transition:`width ${c} cubic-bezier(0.2, 0, 0, 1) 0s`,"ul, ol":{margin:0,padding:0,listStyle:"none"},"&-overflow":{display:"flex",[`${o}-item`]:{flex:"none"}},[`${o}-item, ${o}-submenu, ${o}-submenu-title`]:{borderRadius:e.itemBorderRadius},[`${o}-item-group-title`]:{padding:`${qe(v)} ${qe(m)}`,fontSize:N,lineHeight:P,transition:`all ${c}`},[`&-horizontal ${o}-submenu`]:{transition:[`border-color ${c} ${p}`,`background ${c} ${p}`].join(",")},[`${o}-submenu, ${o}-submenu-inline`]:{transition:[`border-color ${c} ${p}`,`background ${c} ${p}`,`padding ${d} ${p}`].join(",")},[`${o}-submenu ${o}-sub`]:{cursor:"initial",transition:[`background ${c} ${p}`,`padding ${c} ${p}`].join(",")},[`${o}-title-content`]:{transition:`color ${c}`,[`> ${r}-typography-ellipsis-single-line`]:{display:"inline",verticalAlign:"unset"}},[`${o}-item a`]:{"&::before":{position:"absolute",inset:0,backgroundColor:"transparent",content:'""'}},[`${o}-item-divider`]:{overflow:"hidden",lineHeight:0,borderColor:E,borderStyle:x,borderWidth:0,borderTopWidth:C,marginBlock:C,padding:0,"&-dashed":{borderStyle:"dashed"}}}),X7(e)),{[`${o}-item-group`]:{[`${o}-item-group-list`]:{margin:0,padding:0,[`${o}-item, ${o}-submenu-title`]:{paddingInline:`${qe(e.calc(s).mul(2).equal())} ${qe(m)}`}}},"&-submenu":{"&-popup":{position:"absolute",zIndex:b,borderRadius:R,boxShadow:"none",transformOrigin:"0 0",[`&${o}-submenu`]:{background:"transparent"},"&::before":{position:"absolute",inset:0,zIndex:-1,width:"100%",height:"100%",opacity:0,content:'""'},[`> ${o}`]:Object.assign(Object.assign(Object.assign({borderRadius:R},X7(e)),J7(e)),{[`${o}-item, ${o}-submenu > ${o}-submenu-title`]:{borderRadius:w},[`${o}-submenu-title::after`]:{transition:`transform ${c} ${p}`}})},"\n          &-placement-leftTop,\n          &-placement-bottomRight,\n          ":{transformOrigin:"100% 0"},"\n          &-placement-leftBottom,\n          &-placement-topRight,\n          ":{transformOrigin:"100% 100%"},"\n          &-placement-rightBottom,\n          &-placement-topLeft,\n          ":{transformOrigin:"0 100%"},"\n          &-placement-bottomLeft,\n          &-placement-rightTop,\n          ":{transformOrigin:"0 0"},"\n          &-placement-leftTop,\n          &-placement-leftBottom\n          ":{paddingInlineEnd:e.paddingXS},"\n          &-placement-rightTop,\n          &-placement-rightBottom\n          ":{paddingInlineStart:e.paddingXS},"\n          &-placement-topRight,\n          &-placement-topLeft\n          ":{paddingBottom:e.paddingXS},"\n          &-placement-bottomRight,\n          &-placement-bottomLeft\n          ":{paddingTop:e.paddingXS}}}),J7(e)),{[`&-inline-collapsed ${o}-submenu-arrow,
        &-inline ${o}-submenu-arrow`]:{"&::before":{transform:`rotate(-45deg) translateX(${qe(O)})`},"&::after":{transform:`rotate(45deg) translateX(${qe(e.calc(O).mul(-1).equal())})`}},[`${o}-submenu-open${o}-submenu-inline > ${o}-submenu-title > ${o}-submenu-arrow`]:{transform:`translateY(${qe(e.calc(I).mul(.2).mul(-1).equal())})`,"&::after":{transform:`rotate(-45deg) translateX(${qe(e.calc(O).mul(-1).equal())})`},"&::before":{transform:`rotate(45deg) translateX(${qe(O)})`}}})},{[`${r}-layout-header`]:{[o]:{lineHeight:"inherit"}}}]},UIe=e=>{var r,o,s;const{colorPrimary:c,colorError:d,colorTextDisabled:p,colorErrorBg:v,colorText:m,colorTextDescription:E,colorBgContainer:C,colorFillAlter:b,colorFillContent:R,lineWidth:w,lineWidthBold:I,controlItemBgActive:O,colorBgTextHover:x,controlHeightLG:P,lineHeight:N,colorBgElevated:L,marginXXS:M,padding:j,fontSize:$,controlHeightSM:H,fontSizeLG:G,colorTextLightSolid:Y,colorErrorHover:q}=e,J=(r=e.activeBarWidth)!==null&&r!==void 0?r:0,re=(o=e.activeBarBorderWidth)!==null&&o!==void 0?o:w,Z=(s=e.itemMarginInline)!==null&&s!==void 0?s:e.marginXXS,Q=new bo(Y).setAlpha(.65).toRgbString();return{dropdownWidth:160,zIndexPopup:e.zIndexPopupBase+50,radiusItem:e.borderRadiusLG,itemBorderRadius:e.borderRadiusLG,radiusSubMenuItem:e.borderRadiusSM,subMenuItemBorderRadius:e.borderRadiusSM,colorItemText:m,itemColor:m,colorItemTextHover:m,itemHoverColor:m,colorItemTextHoverHorizontal:c,horizontalItemHoverColor:c,colorGroupTitle:E,groupTitleColor:E,colorItemTextSelected:c,itemSelectedColor:c,colorItemTextSelectedHorizontal:c,horizontalItemSelectedColor:c,colorItemBg:C,itemBg:C,colorItemBgHover:x,itemHoverBg:x,colorItemBgActive:R,itemActiveBg:O,colorSubItemBg:b,subMenuItemBg:b,colorItemBgSelected:O,itemSelectedBg:O,colorItemBgSelectedHorizontal:"transparent",horizontalItemSelectedBg:"transparent",colorActiveBarWidth:0,activeBarWidth:J,colorActiveBarHeight:I,activeBarHeight:I,colorActiveBarBorderSize:w,activeBarBorderWidth:re,colorItemTextDisabled:p,itemDisabledColor:p,colorDangerItemText:d,dangerItemColor:d,colorDangerItemTextHover:d,dangerItemHoverColor:d,colorDangerItemTextSelected:d,dangerItemSelectedColor:d,colorDangerItemBgActive:v,dangerItemActiveBg:v,colorDangerItemBgSelected:v,dangerItemSelectedBg:v,itemMarginInline:Z,horizontalItemBorderRadius:0,horizontalItemHoverBg:"transparent",itemHeight:P,groupTitleLineHeight:N,collapsedWidth:P*2,popupBg:L,itemMarginBlock:M,itemPaddingInline:j,horizontalLineHeight:`${P*1.15}px`,iconSize:$,iconMarginInlineEnd:H-$,collapsedIconSize:G,groupTitleFontSize:$,darkItemDisabledColor:new bo(Y).setAlpha(.25).toRgbString(),darkItemColor:Q,darkDangerItemColor:d,darkItemBg:"#001529",darkPopupBg:"#001529",darkSubMenuItemBg:"#000c17",darkItemSelectedColor:Y,darkItemSelectedBg:c,darkDangerItemSelectedBg:d,darkItemHoverBg:"transparent",darkGroupTitleColor:Q,darkItemHoverColor:Y,darkDangerItemHoverColor:q,darkDangerItemSelectedColor:Y,darkDangerItemActiveBg:d,itemWidth:J?`calc(100% + ${re}px)`:`calc(100% - ${Z*2}px)`}},BIe=function(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return ya("Menu",c=>{const{colorBgElevated:d,controlHeightLG:p,fontSize:v,darkItemColor:m,darkDangerItemColor:E,darkItemBg:C,darkSubMenuItemBg:b,darkItemSelectedColor:R,darkItemSelectedBg:w,darkDangerItemSelectedBg:I,darkItemHoverBg:O,darkGroupTitleColor:x,darkItemHoverColor:P,darkItemDisabledColor:N,darkDangerItemHoverColor:L,darkDangerItemSelectedColor:M,darkDangerItemActiveBg:j,popupBg:$,darkPopupBg:H}=c,G=c.calc(v).div(7).mul(5).equal(),Y=gi(c,{menuArrowSize:G,menuHorizontalHeight:c.calc(p).mul(1.15).equal(),menuArrowOffset:c.calc(G).mul(.25).equal(),menuSubMenuBg:d,calc:c.calc,popupBg:$}),q=gi(Y,{itemColor:m,itemHoverColor:P,groupTitleColor:x,itemSelectedColor:R,itemBg:C,popupBg:H,subMenuItemBg:b,itemActiveBg:"transparent",itemSelectedBg:w,activeBarHeight:0,activeBarBorderWidth:0,itemHoverBg:O,itemDisabledColor:N,dangerItemColor:E,dangerItemHoverColor:L,dangerItemSelectedColor:M,dangerItemActiveBg:j,dangerItemSelectedBg:I,menuSubMenuBg:b,horizontalItemSelectedColor:R,horizontalItemSelectedBg:w});return[FIe(Y),NIe(Y),MIe(Y),q7(Y,"light"),q7(q,"dark"),PIe(Y),yY(Y),wC(Y,"slide-up"),wC(Y,"slide-down"),wY(Y,"zoom-big")]},UIe,{deprecatedTokens:[["colorGroupTitle","groupTitleColor"],["radiusItem","itemBorderRadius"],["radiusSubMenuItem","subMenuItemBorderRadius"],["colorItemText","itemColor"],["colorItemTextHover","itemHoverColor"],["colorItemTextHoverHorizontal","horizontalItemHoverColor"],["colorItemTextSelected","itemSelectedColor"],["colorItemTextSelectedHorizontal","horizontalItemSelectedColor"],["colorItemTextDisabled","itemDisabledColor"],["colorDangerItemText","dangerItemColor"],["colorDangerItemTextHover","dangerItemHoverColor"],["colorDangerItemTextSelected","dangerItemSelectedColor"],["colorDangerItemBgActive","dangerItemActiveBg"],["colorDangerItemBgSelected","dangerItemSelectedBg"],["colorItemBg","itemBg"],["colorItemBgHover","itemHoverBg"],["colorSubItemBg","subMenuItemBg"],["colorItemBgActive","itemActiveBg"],["colorItemBgSelectedHorizontal","horizontalItemSelectedBg"],["colorActiveBarWidth","activeBarWidth"],["colorActiveBarHeight","activeBarHeight"],["colorActiveBarBorderSize","activeBarBorderWidth"],["colorItemBgSelected","itemSelectedBg"]],injectStyle:o,unitless:{groupTitleLineHeight:!0}})(e,r)},VIe=e=>{var r;const{popupClassName:o,icon:s,title:c,theme:d}=e,p=S.useContext(DC),{prefixCls:v,inlineCollapsed:m,theme:E}=p,C=km();let b;if(!s)b=m&&!C.length&&c&&typeof c=="string"?S.createElement("div",{className:`${v}-inline-collapsed-noicon`},c.charAt(0)):S.createElement("span",{className:`${v}-title-content`},c);else{const I=S.isValidElement(c)&&c.type==="span";b=S.createElement(S.Fragment,null,fc(s,{className:He(S.isValidElement(s)?(r=s.props)===null||r===void 0?void 0:r.className:"",`${v}-item-icon`)}),I?c:S.createElement("span",{className:`${v}-title-content`},c))}const R=S.useMemo(()=>Object.assign(Object.assign({},p),{firstLevel:!1}),[p]),[w]=yP("Menu");return S.createElement(DC.Provider,{value:R},S.createElement(Gb,Object.assign({},Sa(e,["icon"]),{title:b,popupClassName:He(v,o,`${v}-${d||E}`),popupStyle:{zIndex:w}})))},TX=VIe;var jIe=globalThis&&globalThis.__rest||function(e,r){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};function XA(e){return e===null||e===!1}const $Ie={item:bX,submenu:TX,divider:CX},HIe=S.forwardRef((e,r)=>{var o;const s=S.useContext(G7),c=s||{},{getPrefixCls:d,getPopupContainer:p,direction:v,menu:m}=S.useContext(Qn),E=d(),{prefixCls:C,className:b,style:R,theme:w="light",expandIcon:I,_internalDisableMenuItemTitleTooltip:O,inlineCollapsed:x,siderCollapsed:P,rootClassName:N,mode:L,selectable:M,onClick:j,overflowedIndicatorPopupClassName:$}=e,H=jIe(e,["prefixCls","className","style","theme","expandIcon","_internalDisableMenuItemTitleTooltip","inlineCollapsed","siderCollapsed","rootClassName","mode","selectable","onClick","overflowedIndicatorPopupClassName"]),G=Sa(H,["collapsedWidth"]);(o=c.validator)===null||o===void 0||o.call(c,{mode:L});const Y=Fo(function(){var le;j==null||j.apply(void 0,arguments),(le=c.onClick)===null||le===void 0||le.call(c)}),q=c.mode||L,J=M??c.selectable,re=S.useMemo(()=>P!==void 0?P:x,[x,P]),Z={horizontal:{motionName:`${E}-slide-up`},inline:RN(E),other:{motionName:`${E}-zoom-big`}},Q=d("menu",C||c.prefixCls),he=Fl(Q),[oe,ae,te]=BIe(Q,he,!s),de=He(`${Q}-${w}`,m==null?void 0:m.className,b),fe=S.useMemo(()=>{var le,ve;if(typeof I=="function"||XA(I))return I||null;if(typeof c.expandIcon=="function"||XA(c.expandIcon))return c.expandIcon||null;if(typeof(m==null?void 0:m.expandIcon)=="function"||XA(m==null?void 0:m.expandIcon))return(m==null?void 0:m.expandIcon)||null;const ge=(le=I??(c==null?void 0:c.expandIcon))!==null&&le!==void 0?le:m==null?void 0:m.expandIcon;return fc(ge,{className:He(`${Q}-submenu-expand-icon`,S.isValidElement(ge)?(ve=ge.props)===null||ve===void 0?void 0:ve.className:void 0)})},[I,c==null?void 0:c.expandIcon,m==null?void 0:m.expandIcon,Q]),ie=S.useMemo(()=>({prefixCls:Q,inlineCollapsed:re||!1,direction:v,firstLevel:!0,theme:w,mode:q,disableMenuItemTitleTooltip:O}),[Q,re,v,O,w]);return oe(S.createElement(G7.Provider,{value:null},S.createElement(DC.Provider,{value:ie},S.createElement(Gv,Object.assign({getPopupContainer:p,overflowedIndicator:S.createElement(TIe,null),overflowedIndicatorPopupClassName:He(Q,`${Q}-${w}`,$),mode:q,selectable:J,onClick:Y},G,{inlineCollapsed:re,style:Object.assign(Object.assign({},m==null?void 0:m.style),R),className:de,prefixCls:Q,direction:v,defaultMotions:Z,expandIcon:fe,ref:r,rootClassName:He(N,ae,c.rootClassName,te,he),_internalComponents:$Ie})))))}),WIe=HIe,Kv=S.forwardRef((e,r)=>{const o=S.useRef(null),s=S.useContext(Kb);return S.useImperativeHandle(r,()=>({menu:o.current,focus:c=>{var d;(d=o.current)===null||d===void 0||d.focus(c)}})),S.createElement(WIe,Object.assign({ref:o},e,s))});Kv.Item=bX;Kv.SubMenu=TX;Kv.Divider=CX;Kv.ItemGroup=GP;const zIe=Kv;function KP(e){return gi(e,{inputAffixPadding:e.paddingXXS})}const qP=e=>{const{controlHeight:r,fontSize:o,lineHeight:s,lineWidth:c,controlHeightSM:d,controlHeightLG:p,fontSizeLG:v,lineHeightLG:m,paddingSM:E,controlPaddingHorizontalSM:C,controlPaddingHorizontal:b,colorFillAlter:R,colorPrimaryHover:w,colorPrimary:I,controlOutlineWidth:O,controlOutline:x,colorErrorOutline:P,colorWarningOutline:N,colorBgContainer:L}=e;return{paddingBlock:Math.max(Math.round((r-o*s)/2*10)/10-c,0),paddingBlockSM:Math.max(Math.round((d-o*s)/2*10)/10-c,0),paddingBlockLG:Math.ceil((p-v*m)/2*10)/10-c,paddingInline:E-c,paddingInlineSM:C-c,paddingInlineLG:b-c,addonBg:R,activeBorderColor:I,hoverBorderColor:w,activeShadow:`0 0 0 ${O}px ${x}`,errorActiveShadow:`0 0 0 ${O}px ${P}`,warningActiveShadow:`0 0 0 ${O}px ${N}`,hoverBg:L,activeBg:L,inputFontSize:o,inputFontSizeLG:v,inputFontSizeSM:o}},GIe=e=>({borderColor:e.hoverBorderColor,backgroundColor:e.hoverBg}),qb=e=>({color:e.colorTextDisabled,backgroundColor:e.colorBgContainerDisabled,borderColor:e.colorBorder,boxShadow:"none",cursor:"not-allowed",opacity:1,"input[disabled], textarea[disabled]":{cursor:"not-allowed"},"&:hover:not([disabled])":Object.assign({},GIe(gi(e,{hoverBorderColor:e.colorBorder,hoverBg:e.colorBgContainerDisabled})))}),YP=(e,r)=>({background:e.colorBgContainer,borderWidth:e.lineWidth,borderStyle:e.lineType,borderColor:r.borderColor,"&:hover":{borderColor:r.hoverBorderColor,backgroundColor:e.hoverBg},"&:focus, &:focus-within":{borderColor:r.activeBorderColor,boxShadow:r.activeShadow,outline:0,backgroundColor:e.activeBg}}),Q7=(e,r)=>({[`&${e.componentCls}-status-${r.status}:not(${e.componentCls}-disabled)`]:Object.assign(Object.assign({},YP(e,r)),{[`${e.componentCls}-prefix, ${e.componentCls}-suffix`]:{color:r.affixColor}}),[`&${e.componentCls}-status-${r.status}${e.componentCls}-disabled`]:{borderColor:r.borderColor}}),KIe=(e,r)=>({"&-outlined":Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},YP(e,{borderColor:e.colorBorder,hoverBorderColor:e.hoverBorderColor,activeBorderColor:e.activeBorderColor,activeShadow:e.activeShadow})),{[`&${e.componentCls}-disabled, &[disabled]`]:Object.assign({},qb(e))}),Q7(e,{status:"error",borderColor:e.colorError,hoverBorderColor:e.colorErrorBorderHover,activeBorderColor:e.colorError,activeShadow:e.errorActiveShadow,affixColor:e.colorError})),Q7(e,{status:"warning",borderColor:e.colorWarning,hoverBorderColor:e.colorWarningBorderHover,activeBorderColor:e.colorWarning,activeShadow:e.warningActiveShadow,affixColor:e.colorWarning})),r)}),Z7=(e,r)=>({[`&${e.componentCls}-group-wrapper-status-${r.status}`]:{[`${e.componentCls}-group-addon`]:{borderColor:r.addonBorderColor,color:r.addonColor}}}),qIe=e=>({"&-outlined":Object.assign(Object.assign(Object.assign({[`${e.componentCls}-group`]:{"&-addon":{background:e.addonBg,border:`${qe(e.lineWidth)} ${e.lineType} ${e.colorBorder}`},"&-addon:first-child":{borderInlineEnd:0},"&-addon:last-child":{borderInlineStart:0}}},Z7(e,{status:"error",addonBorderColor:e.colorError,addonColor:e.colorErrorText})),Z7(e,{status:"warning",addonBorderColor:e.colorWarning,addonColor:e.colorWarningText})),{[`&${e.componentCls}-group-wrapper-disabled`]:{[`${e.componentCls}-group-addon`]:Object.assign({},qb(e))}})}),YIe=(e,r)=>({"&-borderless":Object.assign({background:"transparent",border:"none","&:focus, &:focus-within":{outline:"none"},[`&${e.componentCls}-disabled, &[disabled]`]:{color:e.colorTextDisabled}},r)}),RX=(e,r)=>({background:r.bg,borderWidth:e.lineWidth,borderStyle:e.lineType,borderColor:"transparent","input&, & input, textarea&, & textarea":{color:r==null?void 0:r.inputColor},"&:hover":{background:r.hoverBg},"&:focus, &:focus-within":{outline:0,borderColor:r.activeBorderColor,backgroundColor:e.activeBg}}),e9=(e,r)=>({[`&${e.componentCls}-status-${r.status}:not(${e.componentCls}-disabled)`]:Object.assign(Object.assign({},RX(e,r)),{[`${e.componentCls}-prefix, ${e.componentCls}-suffix`]:{color:r.affixColor}})}),XIe=(e,r)=>({"&-filled":Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},RX(e,{bg:e.colorFillTertiary,hoverBg:e.colorFillSecondary,activeBorderColor:e.colorPrimary})),{[`&${e.componentCls}-disabled, &[disabled]`]:Object.assign({},qb(e))}),e9(e,{status:"error",bg:e.colorErrorBg,hoverBg:e.colorErrorBgHover,activeBorderColor:e.colorError,inputColor:e.colorErrorText,affixColor:e.colorError})),e9(e,{status:"warning",bg:e.colorWarningBg,hoverBg:e.colorWarningBgHover,activeBorderColor:e.colorWarning,inputColor:e.colorWarningText,affixColor:e.colorWarning})),r)}),t9=(e,r)=>({[`&${e.componentCls}-group-wrapper-status-${r.status}`]:{[`${e.componentCls}-group-addon`]:{background:r.addonBg,color:r.addonColor}}}),JIe=e=>({"&-filled":Object.assign(Object.assign(Object.assign({[`${e.componentCls}-group`]:{"&-addon":{background:e.colorFillTertiary},[`${e.componentCls}-filled:not(:focus):not(:focus-within)`]:{"&:not(:first-child)":{borderInlineStart:`${qe(e.lineWidth)} ${e.lineType} ${e.colorSplit}`},"&:not(:last-child)":{borderInlineEnd:`${qe(e.lineWidth)} ${e.lineType} ${e.colorSplit}`}}}},t9(e,{status:"error",addonBg:e.colorErrorBg,addonColor:e.colorErrorText})),t9(e,{status:"warning",addonBg:e.colorWarningBg,addonColor:e.colorWarningText})),{[`&${e.componentCls}-group-wrapper-disabled`]:{[`${e.componentCls}-group`]:{"&-addon":{background:e.colorFillTertiary,color:e.colorTextDisabled},"&-addon:first-child":{borderInlineStart:`${qe(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderTop:`${qe(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderBottom:`${qe(e.lineWidth)} ${e.lineType} ${e.colorBorder}`},"&-addon:last-child":{borderInlineEnd:`${qe(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderTop:`${qe(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderBottom:`${qe(e.lineWidth)} ${e.lineType} ${e.colorBorder}`}}}})}),QIe=e=>({"&::-moz-placeholder":{opacity:1},"&::placeholder":{color:e,userSelect:"none"},"&:placeholder-shown":{textOverflow:"ellipsis"}}),wX=e=>{const{paddingBlockLG:r,lineHeightLG:o,borderRadiusLG:s,paddingInlineLG:c}=e;return{padding:`${qe(r)} ${qe(c)}`,fontSize:e.inputFontSizeLG,lineHeight:o,borderRadius:s}},XP=e=>({padding:`${qe(e.paddingBlockSM)} ${qe(e.paddingInlineSM)}`,fontSize:e.inputFontSizeSM,borderRadius:e.borderRadiusSM}),JP=e=>Object.assign(Object.assign({position:"relative",display:"inline-block",width:"100%",minWidth:0,padding:`${qe(e.paddingBlock)} ${qe(e.paddingInline)}`,color:e.colorText,fontSize:e.inputFontSize,lineHeight:e.lineHeight,borderRadius:e.borderRadius,transition:`all ${e.motionDurationMid}`},QIe(e.colorTextPlaceholder)),{"textarea&":{maxWidth:"100%",height:"auto",minHeight:e.controlHeight,lineHeight:e.lineHeight,verticalAlign:"bottom",transition:`all ${e.motionDurationSlow}, height 0s`,resize:"vertical"},"&-lg":Object.assign({},wX(e)),"&-sm":Object.assign({},XP(e)),"&-rtl, &-textarea-rtl":{direction:"rtl"}}),ZIe=e=>{const{componentCls:r,antCls:o}=e;return{position:"relative",display:"table",width:"100%",borderCollapse:"separate",borderSpacing:0,"&[class*='col-']":{paddingInlineEnd:e.paddingXS,"&:last-child":{paddingInlineEnd:0}},[`&-lg ${r}, &-lg > ${r}-group-addon`]:Object.assign({},wX(e)),[`&-sm ${r}, &-sm > ${r}-group-addon`]:Object.assign({},XP(e)),[`&-lg ${o}-select-single ${o}-select-selector`]:{height:e.controlHeightLG},[`&-sm ${o}-select-single ${o}-select-selector`]:{height:e.controlHeightSM},[`> ${r}`]:{display:"table-cell","&:not(:first-child):not(:last-child)":{borderRadius:0}},[`${r}-group`]:{"&-addon, &-wrap":{display:"table-cell",width:1,whiteSpace:"nowrap",verticalAlign:"middle","&:not(:first-child):not(:last-child)":{borderRadius:0}},"&-wrap > *":{display:"block !important"},"&-addon":{position:"relative",padding:`0 ${qe(e.paddingInline)}`,color:e.colorText,fontWeight:"normal",fontSize:e.inputFontSize,textAlign:"center",borderRadius:e.borderRadius,transition:`all ${e.motionDurationSlow}`,lineHeight:1,[`${o}-select`]:{margin:`${qe(e.calc(e.paddingBlock).add(1).mul(-1).equal())} ${qe(e.calc(e.paddingInline).mul(-1).equal())}`,[`&${o}-select-single:not(${o}-select-customize-input):not(${o}-pagination-size-changer)`]:{[`${o}-select-selector`]:{backgroundColor:"inherit",border:`${qe(e.lineWidth)} ${e.lineType} transparent`,boxShadow:"none"}},"&-open, &-focused":{[`${o}-select-selector`]:{color:e.colorPrimary}}},[`${o}-cascader-picker`]:{margin:`-9px ${qe(e.calc(e.paddingInline).mul(-1).equal())}`,backgroundColor:"transparent",[`${o}-cascader-input`]:{textAlign:"start",border:0,boxShadow:"none"}}}},[`${r}`]:{width:"100%",marginBottom:0,textAlign:"inherit","&:focus":{zIndex:1,borderInlineEndWidth:1},"&:hover":{zIndex:1,borderInlineEndWidth:1,[`${r}-search-with-button &`]:{zIndex:0}}},[`> ${r}:first-child, ${r}-group-addon:first-child`]:{borderStartEndRadius:0,borderEndEndRadius:0,[`${o}-select ${o}-select-selector`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${r}-affix-wrapper`]:{[`&:not(:first-child) ${r}`]:{borderStartStartRadius:0,borderEndStartRadius:0},[`&:not(:last-child) ${r}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${r}:last-child, ${r}-group-addon:last-child`]:{borderStartStartRadius:0,borderEndStartRadius:0,[`${o}-select ${o}-select-selector`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`${r}-affix-wrapper`]:{"&:not(:last-child)":{borderStartEndRadius:0,borderEndEndRadius:0,[`${r}-search &`]:{borderStartStartRadius:e.borderRadius,borderEndStartRadius:e.borderRadius}},[`&:not(:first-child), ${r}-search &:not(:first-child)`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`&${r}-group-compact`]:Object.assign(Object.assign({display:"block"},gN()),{[`${r}-group-addon, ${r}-group-wrap, > ${r}`]:{"&:not(:first-child):not(:last-child)":{borderInlineEndWidth:e.lineWidth,"&:hover, &:focus":{zIndex:1}}},"& > *":{display:"inline-flex",float:"none",verticalAlign:"top",borderRadius:0},[`
        & > ${r}-affix-wrapper,
        & > ${r}-number-affix-wrapper,
        & > ${o}-picker-range
      `]:{display:"inline-flex"},"& > *:not(:last-child)":{marginInlineEnd:e.calc(e.lineWidth).mul(-1).equal(),borderInlineEndWidth:e.lineWidth},[`${r}`]:{float:"none"},[`& > ${o}-select > ${o}-select-selector,
      & > ${o}-select-auto-complete ${r},
      & > ${o}-cascader-picker ${r},
      & > ${r}-group-wrapper ${r}`]:{borderInlineEndWidth:e.lineWidth,borderRadius:0,"&:hover, &:focus":{zIndex:1}},[`& > ${o}-select-focused`]:{zIndex:1},[`& > ${o}-select > ${o}-select-arrow`]:{zIndex:1},[`& > *:first-child,
      & > ${o}-select:first-child > ${o}-select-selector,
      & > ${o}-select-auto-complete:first-child ${r},
      & > ${o}-cascader-picker:first-child ${r}`]:{borderStartStartRadius:e.borderRadius,borderEndStartRadius:e.borderRadius},[`& > *:last-child,
      & > ${o}-select:last-child > ${o}-select-selector,
      & > ${o}-cascader-picker:last-child ${r},
      & > ${o}-cascader-picker-focused:last-child ${r}`]:{borderInlineEndWidth:e.lineWidth,borderStartEndRadius:e.borderRadius,borderEndEndRadius:e.borderRadius},[`& > ${o}-select-auto-complete ${r}`]:{verticalAlign:"top"},[`${r}-group-wrapper + ${r}-group-wrapper`]:{marginInlineStart:e.calc(e.lineWidth).mul(-1).equal(),[`${r}-affix-wrapper`]:{borderRadius:0}},[`${r}-group-wrapper:not(:last-child)`]:{[`&${r}-search > ${r}-group`]:{[`& > ${r}-group-addon > ${r}-search-button`]:{borderRadius:0},[`& > ${r}`]:{borderStartStartRadius:e.borderRadius,borderStartEndRadius:0,borderEndEndRadius:0,borderEndStartRadius:e.borderRadius}}}})}},eAe=e=>{const{componentCls:r,controlHeightSM:o,lineWidth:s,calc:c}=e,d=16,p=c(o).sub(c(s).mul(2)).sub(d).div(2).equal();return{[r]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Ds(e)),JP(e)),KIe(e)),XIe(e)),YIe(e)),{'&[type="color"]':{height:e.controlHeight,[`&${r}-lg`]:{height:e.controlHeightLG},[`&${r}-sm`]:{height:o,paddingTop:p,paddingBottom:p}},'&[type="search"]::-webkit-search-cancel-button, &[type="search"]::-webkit-search-decoration':{"-webkit-appearance":"none"}})}},tAe=e=>{const{componentCls:r}=e;return{[`${r}-clear-icon`]:{margin:0,color:e.colorTextQuaternary,fontSize:e.fontSizeIcon,verticalAlign:-1,cursor:"pointer",transition:`color ${e.motionDurationSlow}`,"&:hover":{color:e.colorTextTertiary},"&:active":{color:e.colorText},"&-hidden":{visibility:"hidden"},"&-has-suffix":{margin:`0 ${qe(e.inputAffixPadding)}`}}}},nAe=e=>{const{componentCls:r,inputAffixPadding:o,colorTextDescription:s,motionDurationSlow:c,colorIcon:d,colorIconHover:p,iconCls:v}=e;return{[`${r}-affix-wrapper`]:Object.assign(Object.assign(Object.assign(Object.assign({},JP(e)),{display:"inline-flex",[`&:not(${r}-disabled):hover`]:{zIndex:1,[`${r}-search-with-button &`]:{zIndex:0}},"&-focused, &:focus":{zIndex:1},[`> input${r}`]:{padding:0},[`> input${r}, > textarea${r}`]:{fontSize:"inherit",border:"none",borderRadius:0,outline:"none",background:"transparent",color:"inherit","&::-ms-reveal":{display:"none"},"&:focus":{boxShadow:"none !important"}},"&::before":{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'},[`${r}`]:{"&-prefix, &-suffix":{display:"flex",flex:"none",alignItems:"center","> *:not(:last-child)":{marginInlineEnd:e.paddingXS}},"&-show-count-suffix":{color:s},"&-show-count-has-suffix":{marginInlineEnd:e.paddingXXS},"&-prefix":{marginInlineEnd:o},"&-suffix":{marginInlineStart:o}}}),tAe(e)),{[`${v}${r}-password-icon`]:{color:d,cursor:"pointer",transition:`all ${c}`,"&:hover":{color:p}}})}},rAe=e=>{const{componentCls:r,borderRadiusLG:o,borderRadiusSM:s}=e;return{[`${r}-group`]:Object.assign(Object.assign(Object.assign({},Ds(e)),ZIe(e)),{"&-rtl":{direction:"rtl"},"&-wrapper":Object.assign(Object.assign(Object.assign({display:"inline-block",width:"100%",textAlign:"start",verticalAlign:"top","&-rtl":{direction:"rtl"},"&-lg":{[`${r}-group-addon`]:{borderRadius:o,fontSize:e.inputFontSizeLG}},"&-sm":{[`${r}-group-addon`]:{borderRadius:s}}},qIe(e)),JIe(e)),{[`&:not(${r}-compact-first-item):not(${r}-compact-last-item)${r}-compact-item`]:{[`${r}, ${r}-group-addon`]:{borderRadius:0}},[`&:not(${r}-compact-last-item)${r}-compact-first-item`]:{[`${r}, ${r}-group-addon`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&:not(${r}-compact-first-item)${r}-compact-last-item`]:{[`${r}, ${r}-group-addon`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`&:not(${r}-compact-last-item)${r}-compact-item`]:{[`${r}-affix-wrapper`]:{borderStartEndRadius:0,borderEndEndRadius:0}}})})}},iAe=e=>{const{componentCls:r,antCls:o}=e,s=`${r}-search`;return{[s]:{[`${r}`]:{"&:hover, &:focus":{borderColor:e.colorPrimaryHover,[`+ ${r}-group-addon ${s}-button:not(${o}-btn-primary)`]:{borderInlineStartColor:e.colorPrimaryHover}}},[`${r}-affix-wrapper`]:{borderRadius:0},[`${r}-lg`]:{lineHeight:e.calc(e.lineHeightLG).sub(2e-4).equal({unit:!1})},[`> ${r}-group`]:{[`> ${r}-group-addon:last-child`]:{insetInlineStart:-1,padding:0,border:0,[`${s}-button`]:{marginInlineEnd:-1,paddingTop:0,paddingBottom:0,borderStartStartRadius:0,borderStartEndRadius:e.borderRadius,borderEndEndRadius:e.borderRadius,borderEndStartRadius:0,boxShadow:"none"},[`${s}-button:not(${o}-btn-primary)`]:{color:e.colorTextDescription,"&:hover":{color:e.colorPrimaryHover},"&:active":{color:e.colorPrimaryActive},[`&${o}-btn-loading::before`]:{insetInlineStart:0,insetInlineEnd:0,insetBlockStart:0,insetBlockEnd:0}}}},[`${s}-button`]:{height:e.controlHeight,"&:hover, &:focus":{zIndex:1}},[`&-large ${s}-button`]:{height:e.controlHeightLG},[`&-small ${s}-button`]:{height:e.controlHeightSM},"&-rtl":{direction:"rtl"},[`&${r}-compact-item`]:{[`&:not(${r}-compact-last-item)`]:{[`${r}-group-addon`]:{[`${r}-search-button`]:{marginInlineEnd:e.calc(e.lineWidth).mul(-1).equal(),borderRadius:0}}},[`&:not(${r}-compact-first-item)`]:{[`${r},${r}-affix-wrapper`]:{borderRadius:0}},[`> ${r}-group-addon ${r}-search-button,
        > ${r},
        ${r}-affix-wrapper`]:{"&:hover, &:focus, &:active":{zIndex:2}},[`> ${r}-affix-wrapper-focused`]:{zIndex:2}}}}},oAe=e=>{const{componentCls:r,paddingLG:o}=e,s=`${r}-textarea`;return{[s]:{position:"relative","&-show-count":{[`> ${r}`]:{height:"100%"},[`${r}-data-count`]:{position:"absolute",bottom:e.calc(e.fontSize).mul(e.lineHeight).mul(-1).equal(),insetInlineEnd:0,color:e.colorTextDescription,whiteSpace:"nowrap",pointerEvents:"none"}},[`
        &-allow-clear > ${r},
        &-affix-wrapper${s}-has-feedback ${r}
      `]:{paddingInlineEnd:o},[`&-affix-wrapper${r}-affix-wrapper`]:{padding:0,[`> textarea${r}`]:{fontSize:"inherit",border:"none",outline:"none",background:"transparent","&:focus":{boxShadow:"none !important"}},[`${r}-suffix`]:{margin:0,"> *:not(:last-child)":{marginInline:0},[`${r}-clear-icon`]:{position:"absolute",insetInlineEnd:e.paddingXS,insetBlockStart:e.paddingXS},[`${s}-suffix`]:{position:"absolute",top:0,insetInlineEnd:e.paddingInline,bottom:0,zIndex:1,display:"inline-flex",alignItems:"center",margin:"auto",pointerEvents:"none"}}}}}},aAe=e=>{const{componentCls:r}=e;return{[`${r}-out-of-range`]:{[`&, & input, & textarea, ${r}-show-count-suffix, ${r}-data-count`]:{color:e.colorError}}}},QP=ya("Input",e=>{const r=gi(e,KP(e));return[eAe(r),oAe(r),nAe(r),rAe(r),iAe(r),aAe(r),TP(r)]},qP,{resetFont:!1});function sAe(e,r,o){var s=o||{},c=s.noTrailing,d=c===void 0?!1:c,p=s.noLeading,v=p===void 0?!1:p,m=s.debounceMode,E=m===void 0?void 0:m,C,b=!1,R=0;function w(){C&&clearTimeout(C)}function I(x){var P=x||{},N=P.upcomingOnly,L=N===void 0?!1:N;w(),b=!L}function O(){for(var x=arguments.length,P=new Array(x),N=0;N<x;N++)P[N]=arguments[N];var L=this,M=Date.now()-R;if(b)return;function j(){R=Date.now(),r.apply(L,P)}function $(){C=void 0}!v&&E&&!C&&j(),w(),E===void 0&&M>e?v?(R=Date.now(),d||(C=setTimeout(E?$:j,e))):j():d!==!0&&(C=setTimeout(E?$:j,E===void 0?e-M:e))}return O.cancel=I,O}function cAe(e,r,o){var s=o||{},c=s.atBegin,d=c===void 0?!1:c;return sAe(e,r,{debounceMode:d!==!1})}const lAe=S.createContext({}),IX=lAe,uAe=e=>{const{componentCls:r}=e;return{[r]:{display:"flex",flexFlow:"row wrap",minWidth:0,"&::before, &::after":{display:"flex"},"&-no-wrap":{flexWrap:"nowrap"},"&-start":{justifyContent:"flex-start"},"&-center":{justifyContent:"center"},"&-end":{justifyContent:"flex-end"},"&-space-between":{justifyContent:"space-between"},"&-space-around":{justifyContent:"space-around"},"&-space-evenly":{justifyContent:"space-evenly"},"&-top":{alignItems:"flex-start"},"&-middle":{alignItems:"center"},"&-bottom":{alignItems:"flex-end"}}}},dAe=e=>{const{componentCls:r}=e;return{[r]:{position:"relative",maxWidth:"100%",minHeight:1}}},hAe=(e,r)=>{const{prefixCls:o,componentCls:s,gridColumns:c}=e,d={};for(let p=c;p>=0;p--)p===0?(d[`${s}${r}-${p}`]={display:"none"},d[`${s}-push-${p}`]={insetInlineStart:"auto"},d[`${s}-pull-${p}`]={insetInlineEnd:"auto"},d[`${s}${r}-push-${p}`]={insetInlineStart:"auto"},d[`${s}${r}-pull-${p}`]={insetInlineEnd:"auto"},d[`${s}${r}-offset-${p}`]={marginInlineStart:0},d[`${s}${r}-order-${p}`]={order:0}):(d[`${s}${r}-${p}`]=[{"--ant-display":"block",display:"block"},{display:"var(--ant-display)",flex:`0 0 ${p/c*100}%`,maxWidth:`${p/c*100}%`}],d[`${s}${r}-push-${p}`]={insetInlineStart:`${p/c*100}%`},d[`${s}${r}-pull-${p}`]={insetInlineEnd:`${p/c*100}%`},d[`${s}${r}-offset-${p}`]={marginInlineStart:`${p/c*100}%`},d[`${s}${r}-order-${p}`]={order:p});return d[`${s}${r}-flex`]={flex:`var(--${o}${r}-flex)`},d},KN=(e,r)=>hAe(e,r),pAe=(e,r,o)=>({[`@media (min-width: ${qe(r)})`]:Object.assign({},KN(e,o))}),fAe=()=>({}),mAe=()=>({}),gAe=ya("Grid",uAe,fAe),vAe=ya("Grid",e=>{const r=gi(e,{gridColumns:24}),o={"-sm":r.screenSMMin,"-md":r.screenMDMin,"-lg":r.screenLGMin,"-xl":r.screenXLMin,"-xxl":r.screenXXLMin};return[dAe(r),KN(r,""),KN(r,"-xs"),Object.keys(o).map(s=>pAe(r,o[s],s)).reduce((s,c)=>Object.assign(Object.assign({},s),c),{})]},mAe);var EAe=globalThis&&globalThis.__rest||function(e,r){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};function n9(e){return typeof e=="number"?`${e} ${e} auto`:/^\d+(\.\d+)?(px|em|rem|%)$/.test(e)?`0 0 ${e}`:e}const _Ae=["xs","sm","md","lg","xl","xxl"],SAe=S.forwardRef((e,r)=>{const{getPrefixCls:o,direction:s}=S.useContext(Qn),{gutter:c,wrap:d}=S.useContext(IX),{prefixCls:p,span:v,order:m,offset:E,push:C,pull:b,className:R,children:w,flex:I,style:O}=e,x=EAe(e,["prefixCls","span","order","offset","push","pull","className","children","flex","style"]),P=o("col",p),[N,L,M]=vAe(P),j={};let $={};_Ae.forEach(Y=>{let q={};const J=e[Y];typeof J=="number"?q.span=J:typeof J=="object"&&(q=J||{}),delete x[Y],$=Object.assign(Object.assign({},$),{[`${P}-${Y}-${q.span}`]:q.span!==void 0,[`${P}-${Y}-order-${q.order}`]:q.order||q.order===0,[`${P}-${Y}-offset-${q.offset}`]:q.offset||q.offset===0,[`${P}-${Y}-push-${q.push}`]:q.push||q.push===0,[`${P}-${Y}-pull-${q.pull}`]:q.pull||q.pull===0,[`${P}-rtl`]:s==="rtl"}),q.flex&&($[`${P}-${Y}-flex`]=!0,j[`--${P}-${Y}-flex`]=n9(q.flex))});const H=He(P,{[`${P}-${v}`]:v!==void 0,[`${P}-order-${m}`]:m,[`${P}-offset-${E}`]:E,[`${P}-push-${C}`]:C,[`${P}-pull-${b}`]:b},R,$,L,M),G={};if(c&&c[0]>0){const Y=c[0]/2;G.paddingLeft=Y,G.paddingRight=Y}return I&&(G.flex=n9(I),d===!1&&!G.minWidth&&(G.minWidth=0)),N(S.createElement("div",Object.assign({},x,{style:Object.assign(Object.assign(Object.assign({},G),O),j),className:H,ref:r}),w))}),ZP=SAe;var yAe=globalThis&&globalThis.__rest||function(e,r){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};function r9(e,r){const[o,s]=S.useState(typeof e=="string"?e:""),c=()=>{if(typeof e=="string"&&s(e),typeof e=="object")for(let d=0;d<np.length;d++){const p=np[d];if(!r[p])continue;const v=e[p];if(v!==void 0){s(v);return}}};return S.useEffect(()=>{c()},[JSON.stringify(e),r]),o}const CAe=S.forwardRef((e,r)=>{const{prefixCls:o,justify:s,align:c,className:d,style:p,children:v,gutter:m=0,wrap:E}=e,C=yAe(e,["prefixCls","justify","align","className","style","children","gutter","wrap"]),{getPrefixCls:b,direction:R}=S.useContext(Qn),[w,I]=S.useState({xs:!0,sm:!0,md:!0,lg:!0,xl:!0,xxl:!0}),[O,x]=S.useState({xs:!1,sm:!1,md:!1,lg:!1,xl:!1,xxl:!1}),P=r9(c,O),N=r9(s,O),L=S.useRef(m),M=tX();S.useEffect(()=>{const ae=M.subscribe(te=>{x(te);const de=L.current||0;(!Array.isArray(de)&&typeof de=="object"||Array.isArray(de)&&(typeof de[0]=="object"||typeof de[1]=="object"))&&I(te)});return()=>M.unsubscribe(ae)},[]);const j=()=>{const ae=[void 0,void 0];return(Array.isArray(m)?m:[m,void 0]).forEach((de,fe)=>{if(typeof de=="object")for(let ie=0;ie<np.length;ie++){const le=np[ie];if(w[le]&&de[le]!==void 0){ae[fe]=de[le];break}}else ae[fe]=de}),ae},$=b("row",o),[H,G,Y]=gAe($),q=j(),J=He($,{[`${$}-no-wrap`]:E===!1,[`${$}-${N}`]:N,[`${$}-${P}`]:P,[`${$}-rtl`]:R==="rtl"},d,G,Y),re={},Z=q[0]!=null&&q[0]>0?q[0]/-2:void 0;Z&&(re.marginLeft=Z,re.marginRight=Z);const[Q,he]=q;re.rowGap=he;const oe=S.useMemo(()=>({gutter:[Q,he],wrap:E}),[Q,he,E]);return H(S.createElement(IX.Provider,{value:oe},S.createElement("div",Object.assign({},C,{className:J,style:Object.assign(Object.assign({},re),p),ref:r}),v)))}),AX=CAe;function bAe(e){return!!(e.addonBefore||e.addonAfter)}function TAe(e){return!!(e.prefix||e.suffix||e.allowClear)}function i9(e,r,o){var s=r.cloneNode(!0),c=Object.create(e,{target:{value:s},currentTarget:{value:s}});return s.value=o,typeof r.selectionStart=="number"&&typeof r.selectionEnd=="number"&&(s.selectionStart=r.selectionStart,s.selectionEnd=r.selectionEnd),s.setSelectionRange=function(){r.setSelectionRange.apply(r,arguments)},c}function PC(e,r,o,s){if(o){var c=r;if(r.type==="click"){c=i9(r,e,""),o(c);return}if(e.type!=="file"&&s!==void 0){c=i9(r,e,s),o(c);return}o(c)}}function RAe(e,r){if(e){e.focus(r);var o=r||{},s=o.cursor;if(s){var c=e.value.length;switch(s){case"start":e.setSelectionRange(0,0);break;case"end":e.setSelectionRange(c,c);break;default:e.setSelectionRange(0,c)}}}}var OX=Be.forwardRef(function(e,r){var o,s,c=e.inputElement,d=e.children,p=e.prefixCls,v=e.prefix,m=e.suffix,E=e.addonBefore,C=e.addonAfter,b=e.className,R=e.style,w=e.disabled,I=e.readOnly,O=e.focused,x=e.triggerFocus,P=e.allowClear,N=e.value,L=e.handleReset,M=e.hidden,j=e.classes,$=e.classNames,H=e.dataAttrs,G=e.styles,Y=e.components,q=d??c,J=(Y==null?void 0:Y.affixWrapper)||"span",re=(Y==null?void 0:Y.groupWrapper)||"span",Z=(Y==null?void 0:Y.wrapper)||"span",Q=(Y==null?void 0:Y.groupAddon)||"span",he=S.useRef(null),oe=function(xe){var ft;(ft=he.current)!==null&&ft!==void 0&&ft.contains(xe.target)&&(x==null||x())},ae=TAe(e),te=S.cloneElement(q,{value:N,className:He(q.props.className,!ae&&($==null?void 0:$.variant))||null}),de=S.useRef(null);if(Be.useImperativeHandle(r,function(){return{nativeElement:de.current||he.current}}),ae){var fe,ie=null;if(P){var le,ve=!w&&!I&&N,ge="".concat(p,"-clear-icon"),Te=pn(P)==="object"&&P!==null&&P!==void 0&&P.clearIcon?P.clearIcon:"✖";ie=Be.createElement("span",{onClick:L,onMouseDown:function(xe){return xe.preventDefault()},className:He(ge,(le={},ye(le,"".concat(ge,"-hidden"),!ve),ye(le,"".concat(ge,"-has-suffix"),!!m),le)),role:"button",tabIndex:-1},Te)}var we="".concat(p,"-affix-wrapper"),Ie=He(we,(fe={},ye(fe,"".concat(p,"-disabled"),w),ye(fe,"".concat(we,"-disabled"),w),ye(fe,"".concat(we,"-focused"),O),ye(fe,"".concat(we,"-readonly"),I),ye(fe,"".concat(we,"-input-with-clear-btn"),m&&P&&N),fe),j==null?void 0:j.affixWrapper,$==null?void 0:$.affixWrapper,$==null?void 0:$.variant),Me=(m||P)&&Be.createElement("span",{className:He("".concat(p,"-suffix"),$==null?void 0:$.suffix),style:G==null?void 0:G.suffix},ie,m);te=Be.createElement(J,Je({className:Ie,style:G==null?void 0:G.affixWrapper,onClick:oe},H==null?void 0:H.affixWrapper,{ref:he}),v&&Be.createElement("span",{className:He("".concat(p,"-prefix"),$==null?void 0:$.prefix),style:G==null?void 0:G.prefix},v),te,Me)}if(bAe(e)){var Ke="".concat(p,"-group"),ke="".concat(Ke,"-addon"),Ne="".concat(Ke,"-wrapper"),ze=He("".concat(p,"-wrapper"),Ke,j==null?void 0:j.wrapper,$==null?void 0:$.wrapper),Qe=He(Ne,ye({},"".concat(Ne,"-disabled"),w),j==null?void 0:j.group,$==null?void 0:$.groupWrapper);te=Be.createElement(re,{className:Qe,ref:de},Be.createElement(Z,{className:ze},E&&Be.createElement(Q,{className:ke},E),te,C&&Be.createElement(Q,{className:ke},C)))}return Be.cloneElement(te,{className:He((o=te.props)===null||o===void 0?void 0:o.className,b)||null,style:_e(_e({},(s=te.props)===null||s===void 0?void 0:s.style),R),hidden:M})}),wAe=["show"];function xX(e,r){return S.useMemo(function(){var o={};r&&(o.show=pn(r)==="object"&&r.formatter?r.formatter:!!r),o=_e(_e({},o),e);var s=o,c=s.show,d=kn(s,wAe);return _e(_e({},d),{},{show:!!c,showFormatter:typeof c=="function"?c:void 0,strategy:d.strategy||function(p){return p.length}})},[e,r])}var IAe=["autoComplete","onChange","onFocus","onBlur","onPressEnter","onKeyDown","prefixCls","disabled","htmlSize","className","maxLength","suffix","showCount","count","type","classes","classNames","styles","onCompositionStart","onCompositionEnd"],AAe=S.forwardRef(function(e,r){var o=e.autoComplete,s=e.onChange,c=e.onFocus,d=e.onBlur,p=e.onPressEnter,v=e.onKeyDown,m=e.prefixCls,E=m===void 0?"rc-input":m,C=e.disabled,b=e.htmlSize,R=e.className,w=e.maxLength,I=e.suffix,O=e.showCount,x=e.count,P=e.type,N=P===void 0?"text":P,L=e.classes,M=e.classNames,j=e.styles,$=e.onCompositionStart,H=e.onCompositionEnd,G=kn(e,IAe),Y=S.useState(!1),q=Ue(Y,2),J=q[0],re=q[1],Z=S.useRef(!1),Q=S.useRef(null),he=S.useRef(null),oe=function(je){Q.current&&RAe(Q.current,je)},ae=va(e.defaultValue,{value:e.value}),te=Ue(ae,2),de=te[0],fe=te[1],ie=de==null?"":String(de),le=S.useState(null),ve=Ue(le,2),ge=ve[0],Te=ve[1],we=xX(x,O),Ie=we.max||w,Me=we.strategy(ie),Ke=!!Ie&&Me>Ie;S.useImperativeHandle(r,function(){var Ze;return{focus:oe,blur:function(){var ct;(ct=Q.current)===null||ct===void 0||ct.blur()},setSelectionRange:function(ct,lt,gt){var Ot;(Ot=Q.current)===null||Ot===void 0||Ot.setSelectionRange(ct,lt,gt)},select:function(){var ct;(ct=Q.current)===null||ct===void 0||ct.select()},input:Q.current,nativeElement:((Ze=he.current)===null||Ze===void 0?void 0:Ze.nativeElement)||Q.current}}),S.useEffect(function(){re(function(Ze){return Ze&&C?!1:Ze})},[C]);var ke=function(je,ct,lt){var gt=ct;if(!Z.current&&we.exceedFormatter&&we.max&&we.strategy(ct)>we.max){if(gt=we.exceedFormatter(ct,{max:we.max}),ct!==gt){var Ot,Tt;Te([((Ot=Q.current)===null||Ot===void 0?void 0:Ot.selectionStart)||0,((Tt=Q.current)===null||Tt===void 0?void 0:Tt.selectionEnd)||0])}}else if(lt.source==="compositionEnd")return;fe(gt),Q.current&&PC(Q.current,je,s,gt)};S.useEffect(function(){if(ge){var Ze;(Ze=Q.current)===null||Ze===void 0||Ze.setSelectionRange.apply(Ze,_t(ge))}},[ge]);var Ne=function(je){ke(je,je.target.value,{source:"change"})},ze=function(je){Z.current=!1,ke(je,je.currentTarget.value,{source:"compositionEnd"}),H==null||H(je)},Qe=function(je){p&&je.key==="Enter"&&p(je),v==null||v(je)},De=function(je){re(!0),c==null||c(je)},xe=function(je){re(!1),d==null||d(je)},ft=function(je){fe(""),oe(),Q.current&&PC(Q.current,je,s)},Et=Ke&&"".concat(E,"-out-of-range"),st=function(){var je=Sa(e,["prefixCls","onPressEnter","addonBefore","addonAfter","prefix","suffix","allowClear","defaultValue","showCount","count","classes","htmlSize","styles","classNames"]);return Be.createElement("input",Je({autoComplete:o},je,{onChange:Ne,onFocus:De,onBlur:xe,onKeyDown:Qe,className:He(E,ye({},"".concat(E,"-disabled"),C),M==null?void 0:M.input),style:j==null?void 0:j.input,ref:Q,size:b,type:N,onCompositionStart:function(lt){Z.current=!0,$==null||$(lt)},onCompositionEnd:ze}))},ot=function(){var je=Number(Ie)>0;if(I||we.show){var ct=we.showFormatter?we.showFormatter({value:ie,count:Me,maxLength:Ie}):"".concat(Me).concat(je?" / ".concat(Ie):"");return Be.createElement(Be.Fragment,null,we.show&&Be.createElement("span",{className:He("".concat(E,"-show-count-suffix"),ye({},"".concat(E,"-show-count-has-suffix"),!!I),M==null?void 0:M.count),style:_e({},j==null?void 0:j.count)},ct),I)}return null};return Be.createElement(OX,Je({},G,{prefixCls:E,className:He(R,Et),handleReset:ft,value:ie,focused:J,triggerFocus:oe,suffix:ot(),disabled:C,classes:L,classNames:M,styles:j}),st())});const OAe=e=>{const{getPrefixCls:r,direction:o}=S.useContext(Qn),{prefixCls:s,className:c}=e,d=r("input-group",s),p=r("input"),[v,m]=QP(p),E=He(d,{[`${d}-lg`]:e.size==="large",[`${d}-sm`]:e.size==="small",[`${d}-compact`]:e.compact,[`${d}-rtl`]:o==="rtl"},m,c),C=S.useContext(As),b=S.useMemo(()=>Object.assign(Object.assign({},C),{isFormItemInput:!1}),[C]);return v(S.createElement("span",{className:E,style:e.style,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,onFocus:e.onFocus,onBlur:e.onBlur},S.createElement(As.Provider,{value:b},e.children)))},xAe=OAe,NAe=e=>{let r;return typeof e=="object"&&(e!=null&&e.clearIcon)?r=e:e&&(r={clearIcon:Be.createElement(Mb,null)}),r},NX=NAe;function DX(e,r){const o=S.useRef([]),s=()=>{o.current.push(setTimeout(()=>{var c,d,p,v;!((c=e.current)===null||c===void 0)&&c.input&&((d=e.current)===null||d===void 0?void 0:d.input.getAttribute("type"))==="password"&&(!((p=e.current)===null||p===void 0)&&p.input.hasAttribute("value"))&&((v=e.current)===null||v===void 0||v.input.removeAttribute("value"))}))};return S.useEffect(()=>(r&&s(),()=>o.current.forEach(c=>{c&&clearTimeout(c)})),[]),s}function DAe(e){return!!(e.prefix||e.suffix||e.allowClear||e.showCount)}var PAe=globalThis&&globalThis.__rest||function(e,r){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};function LAe(e,r){if(!e)return;e.focus(r);const{cursor:o}=r||{};if(o){const s=e.value.length;switch(o){case"start":e.setSelectionRange(0,0);break;case"end":e.setSelectionRange(s,s);break;default:e.setSelectionRange(0,s)}}}const kAe=S.forwardRef((e,r)=>{var o;const{prefixCls:s,bordered:c=!0,status:d,size:p,disabled:v,onBlur:m,onFocus:E,suffix:C,allowClear:b,addonAfter:R,addonBefore:w,className:I,style:O,styles:x,rootClassName:P,onChange:N,classNames:L,variant:M}=e,j=PAe(e,["prefixCls","bordered","status","size","disabled","onBlur","onFocus","suffix","allowClear","addonAfter","addonBefore","className","style","styles","rootClassName","onChange","classNames","variant"]),{getPrefixCls:$,direction:H,input:G}=Be.useContext(Qn),Y=$("input",s),q=S.useRef(null),J=Fl(Y),[re,Z,Q]=QP(Y,J),{compactSize:he,compactItemClassnames:oe}=Vb(Y,H),ae=Cu(De=>{var xe;return(xe=p??he)!==null&&xe!==void 0?xe:De}),te=Be.useContext(Dm),de=v??te,{status:fe,hasFeedback:ie,feedbackIcon:le}=S.useContext(As),ve=$b(fe,d),ge=DAe(e)||!!ie;S.useRef(ge);const Te=DX(q,!0),we=De=>{Te(),m==null||m(De)},Ie=De=>{Te(),E==null||E(De)},Me=De=>{Te(),N==null||N(De)},Ke=(ie||C)&&Be.createElement(Be.Fragment,null,C,ie&&le),ke=De=>De&&Be.createElement(tY,null,Be.createElement(wbe,{override:!0,status:!0},De)),Ne=NX(b??(G==null?void 0:G.allowClear)),[ze,Qe]=BP(M,c);return re(Be.createElement(AAe,Object.assign({ref:vc(r,q),prefixCls:Y,autoComplete:G==null?void 0:G.autoComplete},j,{disabled:de,onBlur:we,onFocus:Ie,style:Object.assign(Object.assign({},G==null?void 0:G.style),O),styles:Object.assign(Object.assign({},G==null?void 0:G.styles),x),suffix:Ke,allowClear:Ne,className:He(I,P,Q,J,oe,G==null?void 0:G.className),onChange:Me,addonBefore:ke(w),addonAfter:ke(R),classNames:Object.assign(Object.assign(Object.assign({},L),G==null?void 0:G.classNames),{input:He({[`${Y}-sm`]:ae==="small",[`${Y}-lg`]:ae==="large",[`${Y}-rtl`]:H==="rtl"},L==null?void 0:L.input,(o=G==null?void 0:G.classNames)===null||o===void 0?void 0:o.input,Z),variant:He({[`${Y}-${ze}`]:Qe},AC(Y,ve)),affixWrapper:He({[`${Y}-affix-wrapper-sm`]:ae==="small",[`${Y}-affix-wrapper-lg`]:ae==="large",[`${Y}-affix-wrapper-rtl`]:H==="rtl"},Z),wrapper:He({[`${Y}-group-rtl`]:H==="rtl"},Z),groupWrapper:He({[`${Y}-group-wrapper-sm`]:ae==="small",[`${Y}-group-wrapper-lg`]:ae==="large",[`${Y}-group-wrapper-rtl`]:H==="rtl",[`${Y}-group-wrapper-${ze}`]:Qe},AC(`${Y}-group-wrapper`,ve,ie),Z)})})))}),Yb=kAe,MAe=e=>{const{componentCls:r,paddingXS:o}=e;return{[`${r}`]:{display:"inline-flex",alignItems:"center",flexWrap:"nowrap",columnGap:o,"&-rtl":{direction:"rtl"},[`${r}-input`]:{textAlign:"center",paddingInline:e.paddingXXS},[`&${r}-sm ${r}-input`]:{paddingInline:e.calc(e.paddingXXS).div(2).equal()},[`&${r}-lg ${r}-input`]:{paddingInline:e.paddingXS}}}},FAe=ya(["Input","OTP"],e=>{const r=gi(e,KP(e));return[MAe(r)]},qP);var UAe=globalThis&&globalThis.__rest||function(e,r){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};const BAe=S.forwardRef((e,r)=>{const{value:o,onChange:s,onActiveChange:c,index:d,mask:p}=e,v=UAe(e,["value","onChange","onActiveChange","index","mask"]),m=o&&typeof p=="string"?p:o,E=I=>{s(d,I.target.value)},C=S.useRef(null);S.useImperativeHandle(r,()=>C.current);const b=()=>{ci(()=>{var I;const O=(I=C.current)===null||I===void 0?void 0:I.input;document.activeElement===O&&O&&O.select()})},R=I=>{let{key:O}=I;O==="ArrowLeft"?c(d-1):O==="ArrowRight"&&c(d+1),b()},w=I=>{I.key==="Backspace"&&!o&&c(d-1),b()};return S.createElement(Yb,Object.assign({},v,{ref:C,value:m,onInput:E,onFocus:b,onKeyDown:R,onKeyUp:w,onMouseDown:b,onMouseUp:b,type:p===!0?"password":"text"}))}),VAe=BAe;var jAe=globalThis&&globalThis.__rest||function(e,r){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};function iy(e){return(e||"").split("")}const $Ae=S.forwardRef((e,r)=>{const{prefixCls:o,length:s=6,size:c,defaultValue:d,value:p,onChange:v,formatter:m,variant:E,disabled:C,status:b,autoFocus:R,mask:w}=e,I=jAe(e,["prefixCls","length","size","defaultValue","value","onChange","formatter","variant","disabled","status","autoFocus","mask"]),{getPrefixCls:O,direction:x}=S.useContext(Qn),P=O("otp",o),N=ep(I,{aria:!0,data:!0,attr:!0}),L=Fl(P),[M,j,$]=FAe(P,L),H=Cu(ie=>c??ie),G=S.useContext(As),Y=$b(G.status,b),q=S.useMemo(()=>Object.assign(Object.assign({},G),{status:Y,hasFeedback:!1,feedbackIcon:null}),[G,Y]),J=S.useRef(null),re=S.useRef({});S.useImperativeHandle(r,()=>({focus:()=>{var ie;(ie=re.current[0])===null||ie===void 0||ie.focus()},blur:()=>{var ie;for(let le=0;le<s;le+=1)(ie=re.current[le])===null||ie===void 0||ie.blur()},nativeElement:J.current}));const Z=ie=>m?m(ie):ie,[Q,he]=S.useState(iy(Z(d||"")));S.useEffect(()=>{p!==void 0&&he(iy(p))},[p]);const oe=Fo(ie=>{he(ie),v&&ie.length===s&&ie.every(le=>le)&&ie.some((le,ve)=>Q[ve]!==le)&&v(ie.join(""))}),ae=Fo((ie,le)=>{let ve=_t(Q);for(let Te=0;Te<ie;Te+=1)ve[Te]||(ve[Te]="");le.length<=1?ve[ie]=le:ve=ve.slice(0,ie).concat(iy(le)),ve=ve.slice(0,s);for(let Te=ve.length-1;Te>=0&&!ve[Te];Te-=1)ve.pop();const ge=Z(ve.map(Te=>Te||" ").join(""));return ve=iy(ge).map((Te,we)=>Te===" "&&!ve[we]?ve[we]:Te),ve}),te=(ie,le)=>{var ve;const ge=ae(ie,le),Te=Math.min(ie+le.length,s-1);Te!==ie&&((ve=re.current[Te])===null||ve===void 0||ve.focus()),oe(ge)},de=ie=>{var le;(le=re.current[ie])===null||le===void 0||le.focus()},fe={variant:E,disabled:C,status:Y,mask:w};return M(S.createElement("div",Object.assign({},N,{ref:J,className:He(P,{[`${P}-sm`]:H==="small",[`${P}-lg`]:H==="large",[`${P}-rtl`]:x==="rtl"},$,j)}),S.createElement(As.Provider,{value:q},Array.from({length:s}).map((ie,le)=>{const ve=`otp-${le}`,ge=Q[le]||"";return S.createElement(VAe,Object.assign({ref:Te=>{re.current[le]=Te},key:ve,index:le,size:H,htmlSize:1,className:`${P}-input`,onChange:te,value:ge,onActiveChange:de,autoFocus:le===0&&R},fe))}))))}),HAe=$Ae;var WAe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2Q889.47 375.11 816.7 305l-50.88 50.88C807.31 395.53 843.45 447.4 874.7 512 791.5 684.2 673.4 766 512 766q-72.67 0-133.87-22.38L323 798.75Q408 838 512 838q288.3 0 430.2-300.3a60.29 60.29 0 000-51.5zm-63.57-320.64L836 122.88a8 8 0 00-11.32 0L715.31 232.2Q624.86 186 512 186q-288.3 0-430.2 300.3a60.3 60.3 0 000 51.5q56.69 119.4 136.5 191.41L112.48 835a8 8 0 000 11.31L155.17 889a8 8 0 0011.31 0l712.15-712.12a8 8 0 000-11.32zM149.3 512C232.6 339.8 350.7 258 512 258c54.54 0 104.13 9.36 149.12 28.39l-70.3 70.3a176 176 0 00-238.13 238.13l-83.42 83.42C223.1 637.49 183.3 582.28 149.3 512zm246.7 0a112.11 112.11 0 01146.2-106.69L401.31 546.2A112 112 0 01396 512z"}},{tag:"path",attrs:{d:"M508 624c-3.46 0-6.87-.16-10.25-.47l-52.82 52.82a176.09 176.09 0 00227.42-227.42l-52.82 52.82c.31 3.38.47 6.79.47 10.25a111.94 111.94 0 01-112 112z"}}]},name:"eye-invisible",theme:"outlined"};const zAe=WAe;var GAe=function(r,o){return S.createElement(ro,Je({},r,{ref:o,icon:zAe}))},KAe=S.forwardRef(GAe);const qAe=KAe;var YAe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"}}]},name:"eye",theme:"outlined"};const XAe=YAe;var JAe=function(r,o){return S.createElement(ro,Je({},r,{ref:o,icon:XAe}))},QAe=S.forwardRef(JAe);const ZAe=QAe;var eOe=globalThis&&globalThis.__rest||function(e,r){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};const tOe=e=>e?S.createElement(ZAe,null):S.createElement(qAe,null),nOe={click:"onClick",hover:"onMouseOver"},rOe=S.forwardRef((e,r)=>{const{disabled:o,action:s="click",visibilityToggle:c=!0,iconRender:d=tOe}=e,p=typeof c=="object"&&c.visible!==void 0,[v,m]=S.useState(()=>p?c.visible:!1),E=S.useRef(null);S.useEffect(()=>{p&&m(c.visible)},[p,c]);const C=DX(E),b=()=>{o||(v&&C(),m(G=>{var Y;const q=!G;return typeof c=="object"&&((Y=c.onVisibleChange)===null||Y===void 0||Y.call(c,q)),q}))},R=G=>{const Y=nOe[s]||"",q=d(v),J={[Y]:b,className:`${G}-icon`,key:"passwordIcon",onMouseDown:re=>{re.preventDefault()},onMouseUp:re=>{re.preventDefault()}};return S.cloneElement(S.isValidElement(q)?q:S.createElement("span",null,q),J)},{className:w,prefixCls:I,inputPrefixCls:O,size:x}=e,P=eOe(e,["className","prefixCls","inputPrefixCls","size"]),{getPrefixCls:N}=S.useContext(Qn),L=N("input",O),M=N("input-password",I),j=c&&R(M),$=He(M,w,{[`${M}-${x}`]:!!x}),H=Object.assign(Object.assign({},Sa(P,["suffix","iconRender","visibilityToggle"])),{type:v?"text":"password",className:$,prefixCls:L,suffix:j});return x&&(H.size=x),S.createElement(Yb,Object.assign({ref:vc(r,E)},H))}),iOe=rOe;var oOe=globalThis&&globalThis.__rest||function(e,r){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};const aOe=S.forwardRef((e,r)=>{const{prefixCls:o,inputPrefixCls:s,className:c,size:d,suffix:p,enterButton:v=!1,addonAfter:m,loading:E,disabled:C,onSearch:b,onChange:R,onCompositionStart:w,onCompositionEnd:I}=e,O=oOe(e,["prefixCls","inputPrefixCls","className","size","suffix","enterButton","addonAfter","loading","disabled","onSearch","onChange","onCompositionStart","onCompositionEnd"]),{getPrefixCls:x,direction:P}=S.useContext(Qn),N=S.useRef(!1),L=x("input-search",o),M=x("input",s),{compactSize:j}=Vb(L,P),$=Cu(fe=>{var ie;return(ie=d??j)!==null&&ie!==void 0?ie:fe}),H=S.useRef(null),G=fe=>{fe&&fe.target&&fe.type==="click"&&b&&b(fe.target.value,fe,{source:"clear"}),R&&R(fe)},Y=fe=>{var ie;document.activeElement===((ie=H.current)===null||ie===void 0?void 0:ie.input)&&fe.preventDefault()},q=fe=>{var ie,le;b&&b((le=(ie=H.current)===null||ie===void 0?void 0:ie.input)===null||le===void 0?void 0:le.value,fe,{source:"input"})},J=fe=>{N.current||E||q(fe)},re=typeof v=="boolean"?S.createElement(ZY,null):null,Z=`${L}-button`;let Q;const he=v||{},oe=he.type&&he.type.__ANT_BUTTON===!0;oe||he.type==="button"?Q=fc(he,Object.assign({onMouseDown:Y,onClick:fe=>{var ie,le;(le=(ie=he==null?void 0:he.props)===null||ie===void 0?void 0:ie.onClick)===null||le===void 0||le.call(ie,fe),q(fe)},key:"enterButton"},oe?{className:Z,size:$}:{})):Q=S.createElement(ho,{className:Z,type:v?"primary":void 0,size:$,disabled:C,key:"enterButton",onMouseDown:Y,onClick:q,loading:E,icon:re},v),m&&(Q=[Q,fc(m,{key:"addonAfter"})]);const ae=He(L,{[`${L}-rtl`]:P==="rtl",[`${L}-${$}`]:!!$,[`${L}-with-button`]:!!v},c),te=fe=>{N.current=!0,w==null||w(fe)},de=fe=>{N.current=!1,I==null||I(fe)};return S.createElement(Yb,Object.assign({ref:vc(H,r),onPressEnter:J},O,{size:$,onCompositionStart:te,onCompositionEnd:de,prefixCls:M,addonAfter:Q,suffix:p,onChange:G,className:ae,disabled:C}))}),sOe=aOe;var cOe=`
  min-height:0 !important;
  max-height:none !important;
  height:0 !important;
  visibility:hidden !important;
  overflow:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
  pointer-events: none !important;
`,lOe=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","font-variant","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break","white-space"],JA={},oc;function uOe(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,o=e.getAttribute("id")||e.getAttribute("data-reactid")||e.getAttribute("name");if(r&&JA[o])return JA[o];var s=window.getComputedStyle(e),c=s.getPropertyValue("box-sizing")||s.getPropertyValue("-moz-box-sizing")||s.getPropertyValue("-webkit-box-sizing"),d=parseFloat(s.getPropertyValue("padding-bottom"))+parseFloat(s.getPropertyValue("padding-top")),p=parseFloat(s.getPropertyValue("border-bottom-width"))+parseFloat(s.getPropertyValue("border-top-width")),v=lOe.map(function(E){return"".concat(E,":").concat(s.getPropertyValue(E))}).join(";"),m={sizingStyle:v,paddingSize:d,borderSize:p,boxSizing:c};return r&&o&&(JA[o]=m),m}function dOe(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;oc||(oc=document.createElement("textarea"),oc.setAttribute("tab-index","-1"),oc.setAttribute("aria-hidden","true"),document.body.appendChild(oc)),e.getAttribute("wrap")?oc.setAttribute("wrap",e.getAttribute("wrap")):oc.removeAttribute("wrap");var c=uOe(e,r),d=c.paddingSize,p=c.borderSize,v=c.boxSizing,m=c.sizingStyle;oc.setAttribute("style","".concat(m,";").concat(cOe)),oc.value=e.value||e.placeholder||"";var E=void 0,C=void 0,b,R=oc.scrollHeight;if(v==="border-box"?R+=p:v==="content-box"&&(R-=d),o!==null||s!==null){oc.value=" ";var w=oc.scrollHeight-d;o!==null&&(E=w*o,v==="border-box"&&(E=E+d+p),R=Math.max(E,R)),s!==null&&(C=w*s,v==="border-box"&&(C=C+d+p),b=R>C?"":"hidden",R=Math.min(C,R))}var I={height:R,overflowY:b,resize:"none"};return E&&(I.minHeight=E),C&&(I.maxHeight=C),I}var hOe=["prefixCls","onPressEnter","defaultValue","value","autoSize","onResize","className","style","disabled","onChange","onInternalAutoSize"],QA=0,ZA=1,eO=2,pOe=S.forwardRef(function(e,r){var o=e,s=o.prefixCls;o.onPressEnter;var c=o.defaultValue,d=o.value,p=o.autoSize,v=o.onResize,m=o.className,E=o.style,C=o.disabled,b=o.onChange;o.onInternalAutoSize;var R=kn(o,hOe),w=va(c,{value:d,postState:function(ge){return ge??""}}),I=Ue(w,2),O=I[0],x=I[1],P=function(ge){x(ge.target.value),b==null||b(ge)},N=S.useRef();S.useImperativeHandle(r,function(){return{textArea:N.current}});var L=S.useMemo(function(){return p&&pn(p)==="object"?[p.minRows,p.maxRows]:[]},[p]),M=Ue(L,2),j=M[0],$=M[1],H=!!p,G=function(){try{if(document.activeElement===N.current){var ge=N.current,Te=ge.selectionStart,we=ge.selectionEnd,Ie=ge.scrollTop;N.current.setSelectionRange(Te,we),N.current.scrollTop=Ie}}catch{}},Y=S.useState(eO),q=Ue(Y,2),J=q[0],re=q[1],Z=S.useState(),Q=Ue(Z,2),he=Q[0],oe=Q[1],ae=function(){re(QA)};kr(function(){H&&ae()},[d,j,$,H]),kr(function(){if(J===QA)re(ZA);else if(J===ZA){var ve=dOe(N.current,!1,j,$);re(eO),oe(ve)}else G()},[J]);var te=S.useRef(),de=function(){ci.cancel(te.current)},fe=function(ge){J===eO&&(v==null||v(ge),p&&(de(),te.current=ci(function(){ae()})))};S.useEffect(function(){return de},[]);var ie=H?he:null,le=_e(_e({},E),ie);return(J===QA||J===ZA)&&(le.overflowY="hidden",le.overflowX="hidden"),S.createElement(yu,{onResize:fe,disabled:!(p||v)},S.createElement("textarea",Je({},R,{ref:N,style:le,className:He(s,m,ye({},"".concat(s,"-disabled"),C)),disabled:C,value:O,onChange:P})))}),fOe=["defaultValue","value","onFocus","onBlur","onChange","allowClear","maxLength","onCompositionStart","onCompositionEnd","suffix","prefixCls","showCount","count","className","style","disabled","hidden","classNames","styles","onResize","readOnly"],mOe=Be.forwardRef(function(e,r){var o,s=e.defaultValue,c=e.value,d=e.onFocus,p=e.onBlur,v=e.onChange,m=e.allowClear,E=e.maxLength,C=e.onCompositionStart,b=e.onCompositionEnd,R=e.suffix,w=e.prefixCls,I=w===void 0?"rc-textarea":w,O=e.showCount,x=e.count,P=e.className,N=e.style,L=e.disabled,M=e.hidden,j=e.classNames,$=e.styles,H=e.onResize,G=e.readOnly,Y=kn(e,fOe),q=va(s,{value:c,defaultValue:s}),J=Ue(q,2),re=J[0],Z=J[1],Q=re==null?"":String(re),he=Be.useState(!1),oe=Ue(he,2),ae=oe[0],te=oe[1],de=Be.useRef(!1),fe=Be.useState(null),ie=Ue(fe,2),le=ie[0],ve=ie[1],ge=S.useRef(null),Te=S.useRef(null),we=function(){var wt;return(wt=Te.current)===null||wt===void 0?void 0:wt.textArea},Ie=function(){we().focus()};S.useImperativeHandle(r,function(){var xt;return{resizableTextArea:Te.current,focus:Ie,blur:function(){we().blur()},nativeElement:((xt=ge.current)===null||xt===void 0?void 0:xt.nativeElement)||we()}}),S.useEffect(function(){te(function(xt){return!L&&xt})},[L]);var Me=Be.useState(null),Ke=Ue(Me,2),ke=Ke[0],Ne=Ke[1];Be.useEffect(function(){if(ke){var xt;(xt=we()).setSelectionRange.apply(xt,_t(ke))}},[ke]);var ze=xX(x,O),Qe=(o=ze.max)!==null&&o!==void 0?o:E,De=Number(Qe)>0,xe=ze.strategy(Q),ft=!!Qe&&xe>Qe,Et=function(wt,Pt){var Kt=Pt;!de.current&&ze.exceedFormatter&&ze.max&&ze.strategy(Pt)>ze.max&&(Kt=ze.exceedFormatter(Pt,{max:ze.max}),Pt!==Kt&&Ne([we().selectionStart||0,we().selectionEnd||0])),Z(Kt),PC(wt.currentTarget,wt,v,Kt)},st=function(wt){de.current=!0,C==null||C(wt)},ot=function(wt){de.current=!1,Et(wt,wt.currentTarget.value),b==null||b(wt)},Ze=function(wt){Et(wt,wt.target.value)},je=function(wt){var Pt=Y.onPressEnter,Kt=Y.onKeyDown;wt.key==="Enter"&&Pt&&Pt(wt),Kt==null||Kt(wt)},ct=function(wt){te(!0),d==null||d(wt)},lt=function(wt){te(!1),p==null||p(wt)},gt=function(wt){Z(""),Ie(),PC(we(),wt,v)},Ot=R,Tt;ze.show&&(ze.showFormatter?Tt=ze.showFormatter({value:Q,count:xe,maxLength:Qe}):Tt="".concat(xe).concat(De?" / ".concat(Qe):""),Ot=Be.createElement(Be.Fragment,null,Ot,Be.createElement("span",{className:He("".concat(I,"-data-count"),j==null?void 0:j.count),style:$==null?void 0:$.count},Tt)));var Wt=function(wt){var Pt;H==null||H(wt),(Pt=we())!==null&&Pt!==void 0&&Pt.style.height&&ve(!0)},on=!Y.autoSize&&!O&&!m;return Be.createElement(OX,{ref:ge,value:Q,allowClear:m,handleReset:gt,suffix:Ot,prefixCls:I,classNames:_e(_e({},j),{},{affixWrapper:He(j==null?void 0:j.affixWrapper,ye(ye({},"".concat(I,"-show-count"),O),"".concat(I,"-textarea-allow-clear"),m))}),disabled:L,focused:ae,className:He(P,ft&&"".concat(I,"-out-of-range")),style:_e(_e({},N),le&&!on?{height:"auto"}:{}),dataAttrs:{affixWrapper:{"data-count":typeof Tt=="string"?Tt:void 0}},hidden:M,readOnly:G},Be.createElement(pOe,Je({},Y,{maxLength:E,onKeyDown:je,onChange:Ze,onFocus:ct,onBlur:lt,onCompositionStart:st,onCompositionEnd:ot,className:He(j==null?void 0:j.textarea),style:_e(_e({},$==null?void 0:$.textarea),{},{resize:N==null?void 0:N.resize}),disabled:L,prefixCls:I,onResize:Wt,ref:Te,readOnly:G})))}),gOe=globalThis&&globalThis.__rest||function(e,r){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};const vOe=S.forwardRef((e,r)=>{var o,s;const{prefixCls:c,bordered:d=!0,size:p,disabled:v,status:m,allowClear:E,classNames:C,rootClassName:b,className:R,style:w,styles:I,variant:O}=e,x=gOe(e,["prefixCls","bordered","size","disabled","status","allowClear","classNames","rootClassName","className","style","styles","variant"]),{getPrefixCls:P,direction:N,textArea:L}=S.useContext(Qn),M=Cu(p),j=S.useContext(Dm),$=v??j,{status:H,hasFeedback:G,feedbackIcon:Y}=S.useContext(As),q=$b(H,m),J=S.useRef(null);S.useImperativeHandle(r,()=>{var fe;return{resizableTextArea:(fe=J.current)===null||fe===void 0?void 0:fe.resizableTextArea,focus:ie=>{var le,ve;LAe((ve=(le=J.current)===null||le===void 0?void 0:le.resizableTextArea)===null||ve===void 0?void 0:ve.textArea,ie)},blur:()=>{var ie;return(ie=J.current)===null||ie===void 0?void 0:ie.blur()}}});const re=P("input",c),Z=Fl(re),[Q,he,oe]=QP(re,Z),[ae,te]=BP(O,d),de=NX(E??(L==null?void 0:L.allowClear));return Q(S.createElement(mOe,Object.assign({autoComplete:L==null?void 0:L.autoComplete},x,{style:Object.assign(Object.assign({},L==null?void 0:L.style),w),styles:Object.assign(Object.assign({},L==null?void 0:L.styles),I),disabled:$,allowClear:de,className:He(oe,Z,R,b,L==null?void 0:L.className),classNames:Object.assign(Object.assign(Object.assign({},C),L==null?void 0:L.classNames),{textarea:He({[`${re}-sm`]:M==="small",[`${re}-lg`]:M==="large"},he,C==null?void 0:C.textarea,(o=L==null?void 0:L.classNames)===null||o===void 0?void 0:o.textarea),variant:He({[`${re}-${ae}`]:te},AC(re,q)),affixWrapper:He(`${re}-textarea-affix-wrapper`,{[`${re}-affix-wrapper-rtl`]:N==="rtl",[`${re}-affix-wrapper-sm`]:M==="small",[`${re}-affix-wrapper-lg`]:M==="large",[`${re}-textarea-show-count`]:e.showCount||((s=e.count)===null||s===void 0?void 0:s.show)},he)}),prefixCls:re,suffix:G&&S.createElement("span",{className:`${re}-textarea-suffix`},Y),ref:J})))}),PX=vOe,Mm=Yb;Mm.Group=xAe;Mm.Search=sOe;Mm.TextArea=PX;Mm.Password=iOe;Mm.OTP=HAe;const EOe=Mm;function LC(e){const[r,o]=S.useState(e);return S.useEffect(()=>{const s=setTimeout(()=>{o(e)},e.length?0:10);return()=>{clearTimeout(s)}},[e]),r}const _Oe=e=>{const{componentCls:r}=e,o=`${r}-show-help`,s=`${r}-show-help-item`;return{[o]:{transition:`opacity ${e.motionDurationSlow} ${e.motionEaseInOut}`,"&-appear, &-enter":{opacity:0,"&-active":{opacity:1}},"&-leave":{opacity:1,"&-active":{opacity:0}},[s]:{overflow:"hidden",transition:`height ${e.motionDurationSlow} ${e.motionEaseInOut},
                     opacity ${e.motionDurationSlow} ${e.motionEaseInOut},
                     transform ${e.motionDurationSlow} ${e.motionEaseInOut} !important`,[`&${s}-appear, &${s}-enter`]:{transform:"translateY(-5px)",opacity:0,"&-active":{transform:"translateY(0)",opacity:1}},[`&${s}-leave-active`]:{transform:"translateY(-5px)"}}}}},SOe=_Oe,yOe=e=>({legend:{display:"block",width:"100%",marginBottom:e.marginLG,padding:0,color:e.colorTextDescription,fontSize:e.fontSizeLG,lineHeight:"inherit",border:0,borderBottom:`${qe(e.lineWidth)} ${e.lineType} ${e.colorBorder}`},'input[type="search"]':{boxSizing:"border-box"},'input[type="radio"], input[type="checkbox"]':{lineHeight:"normal"},'input[type="file"]':{display:"block"},'input[type="range"]':{display:"block",width:"100%"},"select[multiple], select[size]":{height:"auto"},"input[type='file']:focus,\n  input[type='radio']:focus,\n  input[type='checkbox']:focus":{outline:0,boxShadow:`0 0 0 ${qe(e.controlOutlineWidth)} ${e.controlOutline}`},output:{display:"block",paddingTop:15,color:e.colorText,fontSize:e.fontSize,lineHeight:e.lineHeight}}),o9=(e,r)=>{const{formItemCls:o}=e;return{[o]:{[`${o}-label > label`]:{height:r},[`${o}-control-input`]:{minHeight:r}}}},COe=e=>{const{componentCls:r}=e;return{[e.componentCls]:Object.assign(Object.assign(Object.assign({},Ds(e)),yOe(e)),{[`${r}-text`]:{display:"inline-block",paddingInlineEnd:e.paddingSM},"&-small":Object.assign({},o9(e,e.controlHeightSM)),"&-large":Object.assign({},o9(e,e.controlHeightLG))})}},bOe=e=>{const{formItemCls:r,iconCls:o,componentCls:s,rootPrefixCls:c,antCls:d,labelRequiredMarkColor:p,labelColor:v,labelFontSize:m,labelHeight:E,labelColonMarginInlineStart:C,labelColonMarginInlineEnd:b,itemMarginBottom:R}=e;return{[r]:Object.assign(Object.assign({},Ds(e)),{marginBottom:R,verticalAlign:"top","&-with-help":{transition:"none"},[`&-hidden,
        &-hidden${d}-row`]:{display:"none"},"&-has-warning":{[`${r}-split`]:{color:e.colorError}},"&-has-error":{[`${r}-split`]:{color:e.colorWarning}},[`${r}-label`]:{flexGrow:0,overflow:"hidden",whiteSpace:"nowrap",textAlign:"end",verticalAlign:"middle","&-left":{textAlign:"start"},"&-wrap":{overflow:"unset",lineHeight:e.lineHeight,whiteSpace:"unset"},"> label":{position:"relative",display:"inline-flex",alignItems:"center",maxWidth:"100%",height:E,color:v,fontSize:m,[`> ${o}`]:{fontSize:e.fontSize,verticalAlign:"top"},[`&${r}-required:not(${r}-required-mark-optional)::before`]:{display:"inline-block",marginInlineEnd:e.marginXXS,color:p,fontSize:e.fontSize,fontFamily:"SimSun, sans-serif",lineHeight:1,content:'"*"',[`${s}-hide-required-mark &`]:{display:"none"}},[`${r}-optional`]:{display:"inline-block",marginInlineStart:e.marginXXS,color:e.colorTextDescription,[`${s}-hide-required-mark &`]:{display:"none"}},[`${r}-tooltip`]:{color:e.colorTextDescription,cursor:"help",writingMode:"horizontal-tb",marginInlineStart:e.marginXXS},"&::after":{content:'":"',position:"relative",marginBlock:0,marginInlineStart:C,marginInlineEnd:b},[`&${r}-no-colon::after`]:{content:'"\\a0"'}}},[`${r}-control`]:{"--ant-display":"flex",flexDirection:"column",flexGrow:1,[`&:first-child:not([class^="'${c}-col-'"]):not([class*="' ${c}-col-'"])`]:{width:"100%"},"&-input":{position:"relative",display:"flex",alignItems:"center",minHeight:e.controlHeight,"&-content":{flex:"auto",maxWidth:"100%"}}},[r]:{"&-explain, &-extra":{clear:"both",color:e.colorTextDescription,fontSize:e.fontSize,lineHeight:e.lineHeight},"&-explain-connected":{width:"100%"},"&-extra":{minHeight:e.controlHeightSM,transition:`color ${e.motionDurationMid} ${e.motionEaseOut}`},"&-explain":{"&-error":{color:e.colorError},"&-warning":{color:e.colorWarning}}},[`&-with-help ${r}-explain`]:{height:"auto",opacity:1},[`${r}-feedback-icon`]:{fontSize:e.fontSize,textAlign:"center",visibility:"visible",animationName:NP,animationDuration:e.motionDurationMid,animationTimingFunction:e.motionEaseOutBack,pointerEvents:"none","&-success":{color:e.colorSuccess},"&-error":{color:e.colorError},"&-warning":{color:e.colorWarning},"&-validating":{color:e.colorPrimary}}})}},a9=(e,r)=>{const{formItemCls:o}=e;return{[`${r}-horizontal`]:{[`${o}-label`]:{flexGrow:0},[`${o}-control`]:{flex:"1 1 0",minWidth:0},[`${o}-label[class$='-24'], ${o}-label[class*='-24 ']`]:{[`& + ${o}-control`]:{minWidth:"unset"}}}}},TOe=e=>{const{componentCls:r,formItemCls:o,inlineItemMarginBottom:s}=e;return{[`${r}-inline`]:{display:"flex",flexWrap:"wrap",[o]:{flex:"none",marginInlineEnd:e.margin,marginBottom:s,"&-row":{flexWrap:"nowrap"},[`> ${o}-label,
        > ${o}-control`]:{display:"inline-block",verticalAlign:"top"},[`> ${o}-label`]:{flex:"none"},[`${r}-text`]:{display:"inline-block"},[`${o}-has-feedback`]:{display:"inline-block"}}}}},Wc=e=>({padding:e.verticalLabelPadding,margin:e.verticalLabelMargin,whiteSpace:"initial",textAlign:"start","> label":{margin:0,"&::after":{visibility:"hidden"}}}),LX=e=>{const{componentCls:r,formItemCls:o,rootPrefixCls:s}=e;return{[`${o} ${o}-label`]:Wc(e),[`${r}:not(${r}-inline)`]:{[o]:{flexWrap:"wrap",[`${o}-label, ${o}-control`]:{[`&:not([class*=" ${s}-col-xs"])`]:{flex:"0 0 100%",maxWidth:"100%"}}}}}},ROe=e=>{const{componentCls:r,formItemCls:o,antCls:s}=e;return{[`${r}-vertical`]:{[`${o}:not(${o}-horizontal)`]:{[`${o}-row`]:{flexDirection:"column"},[`${o}-label > label`]:{height:"auto"},[`${o}-control`]:{width:"100%"},[`${o}-label,
        ${s}-col-24${o}-label,
        ${s}-col-xl-24${o}-label`]:Wc(e)}},[`@media (max-width: ${qe(e.screenXSMax)})`]:[LX(e),{[r]:{[`${o}:not(${o}-horizontal)`]:{[`${s}-col-xs-24${o}-label`]:Wc(e)}}}],[`@media (max-width: ${qe(e.screenSMMax)})`]:{[r]:{[`${o}:not(${o}-horizontal)`]:{[`${s}-col-sm-24${o}-label`]:Wc(e)}}},[`@media (max-width: ${qe(e.screenMDMax)})`]:{[r]:{[`${o}:not(${o}-horizontal)`]:{[`${s}-col-md-24${o}-label`]:Wc(e)}}},[`@media (max-width: ${qe(e.screenLGMax)})`]:{[r]:{[`${o}:not(${o}-horizontal)`]:{[`${s}-col-lg-24${o}-label`]:Wc(e)}}}}},wOe=e=>{const{formItemCls:r,antCls:o}=e;return{[`${r}-vertical`]:{[`${r}-row`]:{flexDirection:"column"},[`${r}-label > label`]:{height:"auto"},[`${r}-control`]:{width:"100%"}},[`${r}-vertical ${r}-label,
      ${o}-col-24${r}-label,
      ${o}-col-xl-24${r}-label`]:Wc(e),[`@media (max-width: ${qe(e.screenXSMax)})`]:[LX(e),{[r]:{[`${o}-col-xs-24${r}-label`]:Wc(e)}}],[`@media (max-width: ${qe(e.screenSMMax)})`]:{[r]:{[`${o}-col-sm-24${r}-label`]:Wc(e)}},[`@media (max-width: ${qe(e.screenMDMax)})`]:{[r]:{[`${o}-col-md-24${r}-label`]:Wc(e)}},[`@media (max-width: ${qe(e.screenLGMax)})`]:{[r]:{[`${o}-col-lg-24${r}-label`]:Wc(e)}}}},IOe=e=>({labelRequiredMarkColor:e.colorError,labelColor:e.colorTextHeading,labelFontSize:e.fontSize,labelHeight:e.controlHeight,labelColonMarginInlineStart:e.marginXXS/2,labelColonMarginInlineEnd:e.marginXS,itemMarginBottom:e.marginLG,verticalLabelPadding:`0 0 ${e.paddingXS}px`,verticalLabelMargin:0,inlineItemMarginBottom:0}),kX=(e,r)=>gi(e,{formItemCls:`${e.componentCls}-item`,rootPrefixCls:r}),e2=ya("Form",(e,r)=>{let{rootPrefixCls:o}=r;const s=kX(e,o);return[COe(s),bOe(s),SOe(s),a9(s,s.componentCls),a9(s,s.formItemCls),TOe(s),ROe(s),wOe(s),yY(s),NP]},IOe,{order:-1e3}),s9=[];function tO(e,r,o){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;return{key:typeof e=="string"?e:`${r}-${s}`,error:e,errorStatus:o}}const AOe=e=>{let{help:r,helpStatus:o,errors:s=s9,warnings:c=s9,className:d,fieldId:p,onVisibleChanged:v}=e;const{prefixCls:m}=S.useContext(OP),E=`${m}-item-explain`,C=Fl(m),[b,R,w]=e2(m,C),I=S.useMemo(()=>RN(m),[m]),O=LC(s),x=LC(c),P=S.useMemo(()=>r!=null?[tO(r,"help",o)]:[].concat(_t(O.map((L,M)=>tO(L,"error","error",M))),_t(x.map((L,M)=>tO(L,"warning","warning",M)))),[r,o,O,x]),N={};return p&&(N.id=`${p}_help`),b(S.createElement(lp,{motionDeadline:I.motionDeadline,motionName:`${m}-show-help`,visible:!!P.length,onVisibleChanged:v},L=>{const{className:M,style:j}=L;return S.createElement("div",Object.assign({},N,{className:He(E,M,w,C,d,R),style:j,role:"alert"}),S.createElement(Lq,Object.assign({keys:P},RN(m),{motionName:`${m}-show-help-item`,component:!1}),$=>{const{key:H,error:G,errorStatus:Y,className:q,style:J}=$;return S.createElement("div",{key:H,className:He(q,{[`${E}-${Y}`]:Y}),style:J},G)}))}))},MX=AOe,OOe=["parentNode"],xOe="form_item";function Yg(e){return e===void 0||e===!1?[]:Array.isArray(e)?e:[e]}function FX(e,r){if(!e.length)return;const o=e.join("_");return r?`${r}_${o}`:OOe.includes(o)?`${xOe}_${o}`:o}function UX(e,r,o,s,c,d){let p=s;return d!==void 0?p=d:o.validating?p="validating":e.length?p="error":r.length?p="warning":(o.touched||c&&o.validated)&&(p="success"),p}function c9(e){return Yg(e).join("_")}function NOe(e,r){const o=r.getFieldInstance(e),s=yK(o);if(s)return s;const c=FX(Yg(e),r.__INTERNAL__.name);if(c)return document.getElementById(c)}function BX(e){const[r]=AP(),o=S.useRef({}),s=S.useMemo(()=>e??Object.assign(Object.assign({},r),{__INTERNAL__:{itemRef:c=>d=>{const p=c9(c);d?o.current[p]=d:delete o.current[p]}},scrollToField:function(c){let d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const p=NOe(c,s);p&&rye(p,Object.assign({scrollMode:"if-needed",block:"nearest"},d))},getFieldInstance:c=>{const d=c9(c);return o.current[d]}}),[e,r]);return[s]}var DOe=globalThis&&globalThis.__rest||function(e,r){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};const POe=(e,r)=>{const o=S.useContext(Dm),{getPrefixCls:s,direction:c,form:d}=S.useContext(Qn),{prefixCls:p,className:v,rootClassName:m,size:E,disabled:C=o,form:b,colon:R,labelAlign:w,labelWrap:I,labelCol:O,wrapperCol:x,hideRequiredMark:P,layout:N="horizontal",scrollToFirstError:L,requiredMark:M,onFinishFailed:j,name:$,style:H,feedbackIcons:G,variant:Y}=e,q=DOe(e,["prefixCls","className","rootClassName","size","disabled","form","colon","labelAlign","labelWrap","labelCol","wrapperCol","hideRequiredMark","layout","scrollToFirstError","requiredMark","onFinishFailed","name","style","feedbackIcons","variant"]),J=Cu(E),re=S.useContext(nq),Z=S.useMemo(()=>M!==void 0?M:P?!1:d&&d.requiredMark!==void 0?d.requiredMark:!0,[P,M,d]),Q=R??(d==null?void 0:d.colon),he=s("form",p),oe=Fl(he),[ae,te,de]=e2(he,oe),fe=He(he,`${he}-${N}`,{[`${he}-hide-required-mark`]:Z===!1,[`${he}-rtl`]:c==="rtl",[`${he}-${J}`]:J},de,oe,te,d==null?void 0:d.className,v,m),[ie]=BX(b),{__INTERNAL__:le}=ie;le.name=$;const ve=S.useMemo(()=>({name:$,labelAlign:w,labelCol:O,labelWrap:I,wrapperCol:x,vertical:N==="vertical",colon:Q,requiredMark:Z,itemRef:le.itemRef,form:ie,feedbackIcons:G}),[$,w,O,x,N,Q,Z,ie,G]),ge=S.useRef(null);S.useImperativeHandle(r,()=>{var Ie;return Object.assign(Object.assign({},ie),{nativeElement:(Ie=ge.current)===null||Ie===void 0?void 0:Ie.nativeElement})});const Te=(Ie,Me)=>{if(Ie){let Ke={block:"nearest"};typeof Ie=="object"&&(Ke=Ie),ie.scrollToField(Me,Ke)}},we=Ie=>{if(j==null||j(Ie),Ie.errorFields.length){const Me=Ie.errorFields[0].name;if(L!==void 0){Te(L,Me);return}d&&d.scrollToFirstError!==void 0&&Te(d.scrollToFirstError,Me)}};return ae(S.createElement(SY.Provider,{value:Y},S.createElement(dq,{disabled:C},S.createElement(jv.Provider,{value:J},S.createElement(_Y,{validateMessages:re},S.createElement(vu.Provider,{value:ve},S.createElement(Pm,Object.assign({id:$},q,{name:$,onFinishFailed:we,form:ie,ref:ge,style:Object.assign(Object.assign({},d==null?void 0:d.style),H),className:fe}))))))))},LOe=S.forwardRef(POe),kOe=LOe;function MOe(e){if(typeof e=="function")return e;const r=Jc(e);return r.length<=1?r[0]:r}const VX=()=>{const{status:e,errors:r=[],warnings:o=[]}=S.useContext(As);return{status:e,errors:r,warnings:o}};VX.Context=As;const FOe=VX;function UOe(e){const[r,o]=S.useState(e),s=S.useRef(null),c=S.useRef([]),d=S.useRef(!1);S.useEffect(()=>(d.current=!1,()=>{d.current=!0,ci.cancel(s.current),s.current=null}),[]);function p(v){d.current||(s.current===null&&(c.current=[],s.current=ci(()=>{s.current=null,o(m=>{let E=m;return c.current.forEach(C=>{E=C(E)}),E})})),c.current.push(v))}return[r,p]}function BOe(){const{itemRef:e}=S.useContext(vu),r=S.useRef({});function o(s,c){const d=c&&typeof c=="object"&&c.ref,p=s.join("_");return(r.current.name!==p||r.current.originRef!==d)&&(r.current.name=p,r.current.originRef=d,r.current.ref=vc(e(s),d)),r.current.ref}return o}const VOe=e=>{const{formItemCls:r}=e;return{"@media screen and (-ms-high-contrast: active), (-ms-high-contrast: none)":{[`${r}-control`]:{display:"flex"}}}},jOe=Pb(["Form","item-item"],(e,r)=>{let{rootPrefixCls:o}=r;const s=kX(e,o);return[VOe(s)]}),$Oe=e=>{const{prefixCls:r,status:o,wrapperCol:s,children:c,errors:d,warnings:p,_internalItemRender:v,extra:m,help:E,fieldId:C,marginBottom:b,onErrorVisibleChanged:R}=e,w=`${r}-item`,I=S.useContext(vu),O=s||I.wrapperCol||{},x=He(`${w}-control`,O.className),P=S.useMemo(()=>Object.assign({},I),[I]);delete P.labelCol,delete P.wrapperCol;const N=S.createElement("div",{className:`${w}-control-input`},S.createElement("div",{className:`${w}-control-input-content`},c)),L=S.useMemo(()=>({prefixCls:r,status:o}),[r,o]),M=b!==null||d.length||p.length?S.createElement("div",{style:{display:"flex",flexWrap:"nowrap"}},S.createElement(OP.Provider,{value:L},S.createElement(MX,{fieldId:C,errors:d,warnings:p,help:E,helpStatus:o,className:`${w}-explain-connected`,onVisibleChanged:R})),!!b&&S.createElement("div",{style:{width:0,height:b}})):null,j={};C&&(j.id=`${C}_extra`);const $=m?S.createElement("div",Object.assign({},j,{className:`${w}-extra`}),m):null,H=v&&v.mark==="pro_table_render"&&v.render?v.render(e,{input:N,errorList:M,extra:$}):S.createElement(S.Fragment,null,N,M,$);return S.createElement(vu.Provider,{value:P},S.createElement(ZP,Object.assign({},O,{className:x}),H),S.createElement(jOe,{prefixCls:r}))},HOe=$Oe;var WOe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M623.6 316.7C593.6 290.4 554 276 512 276s-81.6 14.5-111.6 40.7C369.2 344 352 380.7 352 420v7.6c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V420c0-44.1 43.1-80 96-80s96 35.9 96 80c0 31.1-22 59.6-56.1 72.7-21.2 8.1-39.2 22.3-52.1 40.9-13.1 19-19.9 41.8-19.9 64.9V620c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-22.7a48.3 48.3 0 0130.9-44.8c59-22.7 97.1-74.7 97.1-132.5.1-39.3-17.1-76-48.3-103.3zM472 732a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"question-circle",theme:"outlined"};const zOe=WOe;var GOe=function(r,o){return S.createElement(ro,Je({},r,{ref:o,icon:zOe}))},KOe=S.forwardRef(GOe);const qOe=KOe;var YOe=globalThis&&globalThis.__rest||function(e,r){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};function XOe(e){return e?typeof e=="object"&&!S.isValidElement(e)?e:{title:e}:null}const JOe=e=>{let{prefixCls:r,label:o,htmlFor:s,labelCol:c,labelAlign:d,colon:p,required:v,requiredMark:m,tooltip:E,vertical:C}=e;var b;const[R]=Nb("Form"),{labelAlign:w,labelCol:I,labelWrap:O,colon:x}=S.useContext(vu);if(!o)return null;const P=c||I||{},N=d||w,L=`${r}-item-label`,M=He(L,N==="left"&&`${L}-left`,P.className,{[`${L}-wrap`]:!!O});let j=o;const $=p===!0||x!==!1&&p!==!1;$&&!C&&typeof o=="string"&&o.trim()!==""&&(j=o.replace(/[:|：]\s*$/,""));const G=XOe(E);if(G){const{icon:re=S.createElement(qOe,null)}=G,Z=YOe(G,["icon"]),Q=S.createElement(zv,Object.assign({},Z),S.cloneElement(re,{className:`${r}-item-tooltip`,title:"",onClick:he=>{he.preventDefault()},tabIndex:null}));j=S.createElement(S.Fragment,null,j,Q)}const Y=m==="optional",q=typeof m=="function";q?j=m(j,{required:!!v}):Y&&!v&&(j=S.createElement(S.Fragment,null,j,S.createElement("span",{className:`${r}-item-optional`,title:""},(R==null?void 0:R.optional)||((b=Qh.Form)===null||b===void 0?void 0:b.optional))));const J=He({[`${r}-item-required`]:v,[`${r}-item-required-mark-optional`]:Y||q,[`${r}-item-no-colon`]:!$});return S.createElement(ZP,Object.assign({},P,{className:M}),S.createElement("label",{htmlFor:s,className:J,title:typeof o=="string"?o:""},j))},QOe=JOe,ZOe={success:$q,warning:Wq,error:Mb,validating:Fb};function jX(e){let{children:r,errors:o,warnings:s,hasFeedback:c,validateStatus:d,prefixCls:p,meta:v,noStyle:m}=e;const E=`${p}-item`,{feedbackIcons:C}=S.useContext(vu),b=UX(o,s,v,null,!!c,d),{isFormItemInput:R,status:w,hasFeedback:I,feedbackIcon:O}=S.useContext(As),x=S.useMemo(()=>{var P;let N;if(c){const M=c!==!0&&c.icons||C,j=b&&((P=M==null?void 0:M({status:b,errors:o,warnings:s}))===null||P===void 0?void 0:P[b]),$=b&&ZOe[b];N=j!==!1&&$?S.createElement("span",{className:He(`${E}-feedback-icon`,`${E}-feedback-icon-${b}`)},j||S.createElement($,null)):null}const L={status:b||"",errors:o,warnings:s,hasFeedback:!!c,feedbackIcon:N,isFormItemInput:!0};return m&&(L.status=(b??w)||"",L.isFormItemInput=R,L.hasFeedback=!!(c??I),L.feedbackIcon=c!==void 0?L.feedbackIcon:O),L},[b,c,m,R,w]);return S.createElement(As.Provider,{value:x},r)}var exe=globalThis&&globalThis.__rest||function(e,r){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};function txe(e){const{prefixCls:r,className:o,rootClassName:s,style:c,help:d,errors:p,warnings:v,validateStatus:m,meta:E,hasFeedback:C,hidden:b,children:R,fieldId:w,required:I,isRequired:O,onSubItemMetaChange:x,layout:P}=e,N=exe(e,["prefixCls","className","rootClassName","style","help","errors","warnings","validateStatus","meta","hasFeedback","hidden","children","fieldId","required","isRequired","onSubItemMetaChange","layout"]),L=`${r}-item`,{requiredMark:M,vertical:j}=S.useContext(vu),$=j||P==="vertical",H=S.useRef(null),G=LC(p),Y=LC(v),q=d!=null,J=!!(q||p.length||v.length),re=!!H.current&&Bb(H.current),[Z,Q]=S.useState(null);kr(()=>{if(J&&H.current){const de=getComputedStyle(H.current);Q(parseInt(de.marginBottom,10))}},[J,re]);const he=de=>{de||Q(null)},ae=function(){let de=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const fe=de?G:E.errors,ie=de?Y:E.warnings;return UX(fe,ie,E,"",!!C,m)}(),te=He(L,o,s,{[`${L}-with-help`]:q||G.length||Y.length,[`${L}-has-feedback`]:ae&&C,[`${L}-has-success`]:ae==="success",[`${L}-has-warning`]:ae==="warning",[`${L}-has-error`]:ae==="error",[`${L}-is-validating`]:ae==="validating",[`${L}-hidden`]:b,[`${L}-${P}`]:P});return S.createElement("div",{className:te,style:c,ref:H},S.createElement(AX,Object.assign({className:`${L}-row`},Sa(N,["_internalItemRender","colon","dependencies","extra","fieldKey","getValueFromEvent","getValueProps","htmlFor","id","initialValue","isListField","label","labelAlign","labelCol","labelWrap","messageVariables","name","normalize","noStyle","preserve","requiredMark","rules","shouldUpdate","trigger","tooltip","validateFirst","validateTrigger","valuePropName","wrapperCol","validateDebounce"])),S.createElement(QOe,Object.assign({htmlFor:w},e,{requiredMark:M,required:I??O,prefixCls:r,vertical:$})),S.createElement(HOe,Object.assign({},e,E,{errors:G,warnings:Y,prefixCls:r,status:ae,help:d,marginBottom:Z,onErrorVisibleChanged:he}),S.createElement(EY.Provider,{value:x},S.createElement(jX,{prefixCls:r,meta:E,errors:E.errors,warnings:E.warnings,hasFeedback:C,validateStatus:ae},R)))),!!Z&&S.createElement("div",{className:`${L}-margin-offset`,style:{marginBottom:-Z}}))}const nxe="__SPLIT__";function rxe(e,r){const o=Object.keys(e),s=Object.keys(r);return o.length===s.length&&o.every(c=>{const d=e[c],p=r[c];return d===p||typeof d=="function"||typeof p=="function"})}const ixe=S.memo(e=>{let{children:r}=e;return r},(e,r)=>rxe(e.control,r.control)&&e.update===r.update&&e.childProps.length===r.childProps.length&&e.childProps.every((o,s)=>o===r.childProps[s]));function l9(){return{errors:[],warnings:[],touched:!1,validating:!1,name:[],validated:!1}}function oxe(e){const{name:r,noStyle:o,className:s,dependencies:c,prefixCls:d,shouldUpdate:p,rules:v,children:m,required:E,label:C,messageVariables:b,trigger:R="onChange",validateTrigger:w,hidden:I,help:O,layout:x}=e,{getPrefixCls:P}=S.useContext(Qn),{name:N}=S.useContext(vu),L=MOe(m),M=typeof L=="function",j=S.useContext(EY),{validateTrigger:$}=S.useContext(tp),H=w!==void 0?w:$,G=r!=null,Y=P("form",d),q=Fl(Y),[J,re,Z]=e2(Y,q);xb();const Q=S.useContext(Rv),he=S.useRef(),[oe,ae]=UOe({}),[te,de]=Wh(()=>l9()),fe=Ie=>{const Me=Q==null?void 0:Q.getKey(Ie.name);if(de(Ie.destroy?l9():Ie,!0),o&&O!==!1&&j){let Ke=Ie.name;if(Ie.destroy)Ke=he.current||Ke;else if(Me!==void 0){const[ke,Ne]=Me;Ke=[ke].concat(_t(Ne)),he.current=Ke}j(Ie,Ke)}},ie=(Ie,Me)=>{ae(Ke=>{const ke=Object.assign({},Ke),ze=[].concat(_t(Ie.name.slice(0,-1)),_t(Me)).join(nxe);return Ie.destroy?delete ke[ze]:ke[ze]=Ie,ke})},[le,ve]=S.useMemo(()=>{const Ie=_t(te.errors),Me=_t(te.warnings);return Object.values(oe).forEach(Ke=>{Ie.push.apply(Ie,_t(Ke.errors||[])),Me.push.apply(Me,_t(Ke.warnings||[]))}),[Ie,Me]},[oe,te.errors,te.warnings]),ge=BOe();function Te(Ie,Me,Ke){return o&&!I?S.createElement(jX,{prefixCls:Y,hasFeedback:e.hasFeedback,validateStatus:e.validateStatus,meta:te,errors:le,warnings:ve,noStyle:!0},Ie):S.createElement(txe,Object.assign({key:"row"},e,{className:He(s,Z,q,re),prefixCls:Y,fieldId:Me,isRequired:Ke,errors:le,warnings:ve,meta:te,onSubItemMetaChange:ie,layout:x}),Ie)}if(!G&&!M&&!c)return J(Te(L));let we={};return typeof C=="string"?we.label=C:r&&(we.label=String(r)),b&&(we=Object.assign(Object.assign({},we),b)),J(S.createElement(IP,Object.assign({},e,{messageVariables:we,trigger:R,validateTrigger:H,onMetaChange:fe}),(Ie,Me,Ke)=>{const ke=Yg(r).length&&Me?Me.name:[],Ne=FX(ke,N),ze=E!==void 0?E:!!(v&&v.some(xe=>{if(xe&&typeof xe=="object"&&xe.required&&!xe.warningOnly)return!0;if(typeof xe=="function"){const ft=xe(Ke);return ft&&ft.required&&!ft.warningOnly}return!1})),Qe=Object.assign({},Ie);let De=null;if(Array.isArray(L)&&G)De=L;else if(!(M&&(!(p||c)||G))){if(!(c&&!M&&!G))if(S.isValidElement(L)){const xe=Object.assign(Object.assign({},L.props),Qe);if(xe.id||(xe.id=Ne),O||le.length>0||ve.length>0||e.extra){const st=[];(O||le.length>0)&&st.push(`${Ne}_help`),e.extra&&st.push(`${Ne}_extra`),xe["aria-describedby"]=st.join(" ")}le.length>0&&(xe["aria-invalid"]="true"),ze&&(xe["aria-required"]="true"),xm(L)&&(xe.ref=ge(ke,L)),new Set([].concat(_t(Yg(R)),_t(Yg(H)))).forEach(st=>{xe[st]=function(){for(var ot,Ze,je,ct,lt,gt=arguments.length,Ot=new Array(gt),Tt=0;Tt<gt;Tt++)Ot[Tt]=arguments[Tt];(je=Qe[st])===null||je===void 0||(ot=je).call.apply(ot,[Qe].concat(Ot)),(lt=(ct=L.props)[st])===null||lt===void 0||(Ze=lt).call.apply(Ze,[ct].concat(Ot))}});const Et=[xe["aria-required"],xe["aria-invalid"],xe["aria-describedby"]];De=S.createElement(ixe,{control:Qe,update:L,childProps:Et},fc(L,xe))}else M&&(p||c)&&!G?De=L(Ke):De=L}return Te(De,Ne,ze)}))}const $X=oxe;$X.useStatus=FOe;const axe=$X;var sxe=globalThis&&globalThis.__rest||function(e,r){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};const cxe=e=>{var{prefixCls:r,children:o}=e,s=sxe(e,["prefixCls","children"]);const{getPrefixCls:c}=S.useContext(Qn),d=c("form",r),p=S.useMemo(()=>({prefixCls:d,status:"error"}),[d]);return S.createElement(fY,Object.assign({},s),(v,m,E)=>S.createElement(OP.Provider,{value:p},o(v.map(C=>Object.assign(Object.assign({},C),{fieldKey:C.key})),m,{errors:E.errors,warnings:E.warnings})))},lxe=cxe;function uxe(){const{form:e}=S.useContext(vu);return e}const bu=kOe;bu.Item=axe;bu.List=lxe;bu.ErrorList=MX;bu.useForm=BX;bu.useFormInstance=uxe;bu.useWatch=vY;bu.Provider=_Y;bu.create=()=>{};const u9=bu;function dxe(e,r,o){return typeof o=="boolean"?o:e.length?!0:Jc(r).some(c=>c.type===yX)}const hxe=e=>{const{componentCls:r,bodyBg:o,lightSiderBg:s,lightTriggerBg:c,lightTriggerColor:d}=e;return{[`${r}-sider-light`]:{background:s,[`${r}-sider-trigger`]:{color:d,background:c},[`${r}-sider-zero-width-trigger`]:{color:d,background:c,border:`1px solid ${o}`,borderInlineStart:0}}}},pxe=hxe,fxe=e=>{const{antCls:r,componentCls:o,colorText:s,triggerColor:c,footerBg:d,triggerBg:p,headerHeight:v,headerPadding:m,headerColor:E,footerPadding:C,triggerHeight:b,zeroTriggerHeight:R,zeroTriggerWidth:w,motionDurationMid:I,motionDurationSlow:O,fontSize:x,borderRadius:P,bodyBg:N,headerBg:L,siderBg:M}=e;return{[o]:Object.assign(Object.assign({display:"flex",flex:"auto",flexDirection:"column",minHeight:0,background:N,"&, *":{boxSizing:"border-box"},[`&${o}-has-sider`]:{flexDirection:"row",[`> ${o}, > ${o}-content`]:{width:0}},[`${o}-header, &${o}-footer`]:{flex:"0 0 auto"},[`${o}-sider`]:{position:"relative",minWidth:0,background:M,transition:`all ${I}, background 0s`,"&-children":{height:"100%",marginTop:-.1,paddingTop:.1,[`${r}-menu${r}-menu-inline-collapsed`]:{width:"auto"}},"&-has-trigger":{paddingBottom:b},"&-right":{order:1},"&-trigger":{position:"fixed",bottom:0,zIndex:1,height:b,color:c,lineHeight:qe(b),textAlign:"center",background:p,cursor:"pointer",transition:`all ${I}`},"&-zero-width":{"> *":{overflow:"hidden"},"&-trigger":{position:"absolute",top:v,insetInlineEnd:e.calc(w).mul(-1).equal(),zIndex:1,width:w,height:R,color:c,fontSize:e.fontSizeXL,display:"flex",alignItems:"center",justifyContent:"center",background:M,borderStartStartRadius:0,borderStartEndRadius:P,borderEndEndRadius:P,borderEndStartRadius:0,cursor:"pointer",transition:`background ${O} ease`,"&::after":{position:"absolute",inset:0,background:"transparent",transition:`all ${O}`,content:'""'},"&:hover::after":{background:"rgba(255, 255, 255, 0.2)"},"&-right":{insetInlineStart:e.calc(w).mul(-1).equal(),borderStartStartRadius:P,borderStartEndRadius:0,borderEndEndRadius:0,borderEndStartRadius:P}}}}},pxe(e)),{"&-rtl":{direction:"rtl"}}),[`${o}-header`]:{height:v,padding:m,color:E,lineHeight:qe(v),background:L,[`${r}-menu`]:{lineHeight:"inherit"}},[`${o}-footer`]:{padding:C,color:s,fontSize:x,background:d},[`${o}-content`]:{flex:"auto",color:s,minHeight:0}}},mxe=e=>{const{colorBgLayout:r,controlHeight:o,controlHeightLG:s,colorText:c,controlHeightSM:d,marginXXS:p,colorTextLightSolid:v,colorBgContainer:m}=e,E=s*1.25;return{colorBgHeader:"#001529",colorBgBody:r,colorBgTrigger:"#002140",bodyBg:r,headerBg:"#001529",headerHeight:o*2,headerPadding:`0 ${E}px`,headerColor:c,footerPadding:`${d}px ${E}px`,footerBg:r,siderBg:"#001529",triggerHeight:s+p*2,triggerBg:"#002140",triggerColor:v,zeroTriggerWidth:s,zeroTriggerHeight:s,lightSiderBg:m,lightTriggerBg:m,lightTriggerColor:c}},HX=ya("Layout",e=>[fxe(e)],mxe,{deprecatedTokens:[["colorBgBody","bodyBg"],["colorBgHeader","headerBg"],["colorBgTrigger","triggerBg"]]});var WX=globalThis&&globalThis.__rest||function(e,r){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};function Xb(e){let{suffixCls:r,tagName:o,displayName:s}=e;return c=>S.forwardRef((p,v)=>S.createElement(c,Object.assign({ref:v,suffixCls:r,tagName:o},p)))}const t2=S.forwardRef((e,r)=>{const{prefixCls:o,suffixCls:s,className:c,tagName:d}=e,p=WX(e,["prefixCls","suffixCls","className","tagName"]),{getPrefixCls:v}=S.useContext(Qn),m=v("layout",o),[E,C,b]=HX(m),R=s?`${m}-${s}`:m;return E(S.createElement(d,Object.assign({className:He(o||R,c,C,b),ref:r},p)))}),gxe=S.forwardRef((e,r)=>{const{direction:o}=S.useContext(Qn),[s,c]=S.useState([]),{prefixCls:d,className:p,rootClassName:v,children:m,hasSider:E,tagName:C,style:b}=e,R=WX(e,["prefixCls","className","rootClassName","children","hasSider","tagName","style"]),w=Sa(R,["suffixCls"]),{getPrefixCls:I,layout:O}=S.useContext(Qn),x=I("layout",d),P=dxe(s,m,E),[N,L,M]=HX(x),j=He(x,{[`${x}-has-sider`]:P,[`${x}-rtl`]:o==="rtl"},O==null?void 0:O.className,p,v,L,M),$=S.useMemo(()=>({siderHook:{addSider:H=>{c(G=>[].concat(_t(G),[H]))},removeSider:H=>{c(G=>G.filter(Y=>Y!==H))}}}),[]);return N(S.createElement(SX.Provider,{value:$},S.createElement(C,Object.assign({ref:r,className:j,style:Object.assign(Object.assign({},O==null?void 0:O.style),b)},w),m)))}),vxe=Xb({tagName:"div",displayName:"Layout"})(gxe),Exe=Xb({suffixCls:"header",tagName:"header",displayName:"Header"})(t2),_xe=Xb({suffixCls:"footer",tagName:"footer",displayName:"Footer"})(t2),Sxe=Xb({suffixCls:"content",tagName:"main",displayName:"Content"})(t2),yxe=vxe,Fm=yxe;Fm.Header=Exe;Fm.Footer=_xe;Fm.Content=Sxe;Fm.Sider=yX;Fm._InternalSiderContext=Kb;const qN=Fm,Cxe=function(){const e=Object.assign({},arguments.length<=0?void 0:arguments[0]);for(let r=1;r<arguments.length;r++){const o=r<0||arguments.length<=r?void 0:arguments[r];o&&Object.keys(o).forEach(s=>{const c=o[s];c!==void 0&&(e[s]=c)})}return e},bxe=Cxe;var Txe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M272.9 512l265.4-339.1c4.1-5.2.4-12.9-6.3-12.9h-77.3c-4.9 0-9.6 2.3-12.6 6.1L186.8 492.3a31.99 31.99 0 000 39.5l255.3 326.1c3 3.9 7.7 6.1 12.6 6.1H532c6.7 0 10.4-7.7 6.3-12.9L272.9 512zm304 0l265.4-339.1c4.1-5.2.4-12.9-6.3-12.9h-77.3c-4.9 0-9.6 2.3-12.6 6.1L490.8 492.3a31.99 31.99 0 000 39.5l255.3 326.1c3 3.9 7.7 6.1 12.6 6.1H836c6.7 0 10.4-7.7 6.3-12.9L576.9 512z"}}]},name:"double-left",theme:"outlined"};const Rxe=Txe;var wxe=function(r,o){return S.createElement(ro,Je({},r,{ref:o,icon:Rxe}))},Ixe=S.forwardRef(wxe);const d9=Ixe;var Axe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M533.2 492.3L277.9 166.1c-3-3.9-7.7-6.1-12.6-6.1H188c-6.7 0-10.4 7.7-6.3 12.9L447.1 512 181.7 851.1A7.98 7.98 0 00188 864h77.3c4.9 0 9.6-2.3 12.6-6.1l255.3-326.1c9.1-11.7 9.1-27.9 0-39.5zm304 0L581.9 166.1c-3-3.9-7.7-6.1-12.6-6.1H492c-6.7 0-10.4 7.7-6.3 12.9L751.1 512 485.7 851.1A7.98 7.98 0 00492 864h77.3c4.9 0 9.6-2.3 12.6-6.1l255.3-326.1c9.1-11.7 9.1-27.9 0-39.5z"}}]},name:"double-right",theme:"outlined"};const Oxe=Axe;var xxe=function(r,o){return S.createElement(ro,Je({},r,{ref:o,icon:Oxe}))},Nxe=S.forwardRef(xxe);const h9=Nxe;var Dxe={items_per_page:"条/页",jump_to:"跳至",jump_to_confirm:"确定",page:"页",prev_page:"上一页",next_page:"下一页",prev_5:"向前 5 页",next_5:"向后 5 页",prev_3:"向前 3 页",next_3:"向后 3 页",page_size:"页码"},Pxe=["10","20","50","100"],Lxe=function(r){var o=r.pageSizeOptions,s=o===void 0?Pxe:o,c=r.locale,d=r.changeSize,p=r.pageSize,v=r.goButton,m=r.quickGo,E=r.rootPrefixCls,C=r.selectComponentClass,b=r.selectPrefixCls,R=r.disabled,w=r.buildOptionText,I=Be.useState(""),O=Ue(I,2),x=O[0],P=O[1],N=function(){return!x||Number.isNaN(x)?void 0:Number(x)},L=typeof w=="function"?w:function(Q){return"".concat(Q," ").concat(c.items_per_page)},M=function(he){d==null||d(Number(he))},j=function(he){P(he.target.value)},$=function(he){v||x===""||(P(""),!(he.relatedTarget&&(he.relatedTarget.className.indexOf("".concat(E,"-item-link"))>=0||he.relatedTarget.className.indexOf("".concat(E,"-item"))>=0))&&(m==null||m(N())))},H=function(he){x!==""&&(he.keyCode===dt.ENTER||he.type==="click")&&(P(""),m==null||m(N()))},G=function(){return s.some(function(he){return he.toString()===p.toString()})?s:s.concat([p.toString()]).sort(function(he,oe){var ae=Number.isNaN(Number(he))?0:Number(he),te=Number.isNaN(Number(oe))?0:Number(oe);return ae-te})},Y="".concat(E,"-options");if(!d&&!m)return null;var q=null,J=null,re=null;if(d&&C){var Z=G().map(function(Q,he){return Be.createElement(C.Option,{key:he,value:Q.toString()},L(Q))});q=Be.createElement(C,{disabled:R,prefixCls:b,showSearch:!1,className:"".concat(Y,"-size-changer"),optionLabelProp:"children",popupMatchSelectWidth:!1,value:(p||s[0]).toString(),onChange:M,getPopupContainer:function(he){return he.parentNode},"aria-label":c.page_size,defaultOpen:!1},Z)}return m&&(v&&(re=typeof v=="boolean"?Be.createElement("button",{type:"button",onClick:H,onKeyUp:H,disabled:R,className:"".concat(Y,"-quick-jumper-button")},c.jump_to_confirm):Be.createElement("span",{onClick:H,onKeyUp:H},v)),J=Be.createElement("div",{className:"".concat(Y,"-quick-jumper")},c.jump_to,Be.createElement("input",{disabled:R,type:"text",value:x,onChange:j,onKeyUp:H,onBlur:$,"aria-label":c.page}),c.page,re)),Be.createElement("li",{className:Y},q,J)},Cg=function(r){var o,s=r.rootPrefixCls,c=r.page,d=r.active,p=r.className,v=r.showTitle,m=r.onClick,E=r.onKeyPress,C=r.itemRender,b="".concat(s,"-item"),R=He(b,"".concat(b,"-").concat(c),(o={},ye(o,"".concat(b,"-active"),d),ye(o,"".concat(b,"-disabled"),!c),o),p),w=function(){m(c)},I=function(P){E(P,m,c)},O=C(c,"page",Be.createElement("a",{rel:"nofollow"},c));return O?Be.createElement("li",{title:v?String(c):null,className:R,onClick:w,onKeyDown:I,tabIndex:0},O):null},kxe=function(r,o,s){return s};function p9(){}function f9(e){var r=Number(e);return typeof r=="number"&&!Number.isNaN(r)&&isFinite(r)&&Math.floor(r)===r}function Ah(e,r,o){var s=typeof e>"u"?r:e;return Math.floor((o-1)/s)+1}var Mxe=function(r){var o,s=r.prefixCls,c=s===void 0?"rc-pagination":s,d=r.selectPrefixCls,p=d===void 0?"rc-select":d,v=r.className,m=r.selectComponentClass,E=r.current,C=r.defaultCurrent,b=C===void 0?1:C,R=r.total,w=R===void 0?0:R,I=r.pageSize,O=r.defaultPageSize,x=O===void 0?10:O,P=r.onChange,N=P===void 0?p9:P,L=r.hideOnSinglePage,M=r.showPrevNextJumpers,j=M===void 0?!0:M,$=r.showQuickJumper,H=r.showLessItems,G=r.showTitle,Y=G===void 0?!0:G,q=r.onShowSizeChange,J=q===void 0?p9:q,re=r.locale,Z=re===void 0?Dxe:re,Q=r.style,he=r.totalBoundaryShowSizeChanger,oe=he===void 0?50:he,ae=r.disabled,te=r.simple,de=r.showTotal,fe=r.showSizeChanger,ie=r.pageSizeOptions,le=r.itemRender,ve=le===void 0?kxe:le,ge=r.jumpPrevIcon,Te=r.jumpNextIcon,we=r.prevIcon,Ie=r.nextIcon,Me=Be.useRef(null),Ke=va(10,{value:I,defaultValue:x}),ke=Ue(Ke,2),Ne=ke[0],ze=ke[1],Qe=va(1,{value:E,defaultValue:b,postState:function(xn){return Math.max(1,Math.min(xn,Ah(void 0,Ne,w)))}}),De=Ue(Qe,2),xe=De[0],ft=De[1],Et=Be.useState(xe),st=Ue(Et,2),ot=st[0],Ze=st[1];S.useEffect(function(){Ze(xe)},[xe]);var je=Math.max(1,xe-(H?3:5)),ct=Math.min(Ah(void 0,Ne,w),xe+(H?3:5));function lt(qt,xn){var vr=qt||Be.createElement("button",{type:"button","aria-label":xn,className:"".concat(c,"-item-link")});return typeof qt=="function"&&(vr=Be.createElement(qt,_e({},r))),vr}function gt(qt){var xn=qt.target.value,vr=Ah(void 0,Ne,w),ti;return xn===""?ti=xn:Number.isNaN(Number(xn))?ti=ot:xn>=vr?ti=vr:ti=Number(xn),ti}function Ot(qt){return f9(qt)&&qt!==xe&&f9(w)&&w>0}var Tt=w>Ne?$:!1;function Wt(qt){(qt.keyCode===dt.UP||qt.keyCode===dt.DOWN)&&qt.preventDefault()}function on(qt){var xn=gt(qt);switch(xn!==ot&&Ze(xn),qt.keyCode){case dt.ENTER:Pt(xn);break;case dt.UP:Pt(xn-1);break;case dt.DOWN:Pt(xn+1);break}}function xt(qt){Pt(gt(qt))}function wt(qt){var xn=Ah(qt,Ne,w),vr=xe>xn&&xn!==0?xn:xe;ze(qt),Ze(vr),J==null||J(xe,qt),ft(vr),N==null||N(vr,qt)}function Pt(qt){if(Ot(qt)&&!ae){var xn=Ah(void 0,Ne,w),vr=qt;return qt>xn?vr=xn:qt<1&&(vr=1),vr!==ot&&Ze(vr),ft(vr),N==null||N(vr,Ne),vr}return xe}var Kt=xe>1,fn=xe<Ah(void 0,Ne,w),mn=fe??w>oe;function Un(){Kt&&Pt(xe-1)}function Kn(){fn&&Pt(xe+1)}function qn(){Pt(je)}function mt(){Pt(ct)}function Nt(qt,xn){if(qt.key==="Enter"||qt.charCode===dt.ENTER||qt.keyCode===dt.ENTER){for(var vr=arguments.length,ti=new Array(vr>2?vr-2:0),$i=2;$i<vr;$i++)ti[$i-2]=arguments[$i];xn.apply(void 0,ti)}}function Sn(qt){Nt(qt,Un)}function ur(qt){Nt(qt,Kn)}function Br(qt){Nt(qt,qn)}function dr(qt){Nt(qt,mt)}function Mn(qt){var xn=ve(qt,"prev",lt(we,"prev page"));return Be.isValidElement(xn)?Be.cloneElement(xn,{disabled:!Kt}):xn}function Vt(qt){var xn=ve(qt,"next",lt(Ie,"next page"));return Be.isValidElement(xn)?Be.cloneElement(xn,{disabled:!fn}):xn}function yn(qt){(qt.type==="click"||qt.keyCode===dt.ENTER)&&Pt(ot)}var $t=null,Ct=ep(r,{aria:!0,data:!0}),Ht=de&&Be.createElement("li",{className:"".concat(c,"-total-text")},de(w,[w===0?0:(xe-1)*Ne+1,xe*Ne>w?w:xe*Ne])),On=null,rt=Ah(void 0,Ne,w);if(L&&w<=Ne)return null;var St=[],It={rootPrefixCls:c,onClick:Pt,onKeyPress:Nt,showTitle:Y,itemRender:ve,page:-1},en=xe-1>0?xe-1:0,En=xe+1<rt?xe+1:rt,Cn=$&&$.goButton,pr=Cn,Vr=null;te&&(Cn&&(typeof Cn=="boolean"?pr=Be.createElement("button",{type:"button",onClick:yn,onKeyUp:yn},Z.jump_to_confirm):pr=Be.createElement("span",{onClick:yn,onKeyUp:yn},Cn),pr=Be.createElement("li",{title:Y?"".concat(Z.jump_to).concat(xe,"/").concat(rt):null,className:"".concat(c,"-simple-pager")},pr)),Vr=Be.createElement("li",{title:Y?"".concat(xe,"/").concat(rt):null,className:"".concat(c,"-simple-pager")},Be.createElement("input",{type:"text",value:ot,disabled:ae,onKeyDown:Wt,onKeyUp:on,onChange:on,onBlur:xt,size:3}),Be.createElement("span",{className:"".concat(c,"-slash")},"/"),rt));var cr=H?1:2;if(rt<=3+cr*2){rt||St.push(Be.createElement(Cg,Je({},It,{key:"noPager",page:1,className:"".concat(c,"-item-disabled")})));for(var rn=1;rn<=rt;rn+=1)St.push(Be.createElement(Cg,Je({},It,{key:rn,page:rn,active:xe===rn})))}else{var vi=H?Z.prev_3:Z.prev_5,Wo=H?Z.next_3:Z.next_5,po=ve(je,"jump-prev",lt(ge,"prev page")),li=ve(ct,"jump-next",lt(Te,"next page"));j&&($t=po?Be.createElement("li",{title:Y?vi:null,key:"prev",onClick:qn,tabIndex:0,onKeyDown:Br,className:He("".concat(c,"-jump-prev"),ye({},"".concat(c,"-jump-prev-custom-icon"),!!ge))},po):null,On=li?Be.createElement("li",{title:Y?Wo:null,key:"next",onClick:mt,tabIndex:0,onKeyDown:dr,className:He("".concat(c,"-jump-next"),ye({},"".concat(c,"-jump-next-custom-icon"),!!Te))},li):null);var wi=Math.max(1,xe-cr),Dt=Math.min(xe+cr,rt);xe-1<=cr&&(Dt=1+cr*2),rt-xe<=cr&&(wi=rt-cr*2);for(var Mt=wi;Mt<=Dt;Mt+=1)St.push(Be.createElement(Cg,Je({},It,{key:Mt,page:Mt,active:xe===Mt})));if(xe-1>=cr*2&&xe!==1+2&&(St[0]=Be.cloneElement(St[0],{className:He("".concat(c,"-item-after-jump-prev"),St[0].props.className)}),St.unshift($t)),rt-xe>=cr*2&&xe!==rt-2){var Qt=St[St.length-1];St[St.length-1]=Be.cloneElement(Qt,{className:He("".concat(c,"-item-before-jump-next"),Qt.props.className)}),St.push(On)}wi!==1&&St.unshift(Be.createElement(Cg,Je({},It,{key:1,page:1}))),Dt!==rt&&St.push(Be.createElement(Cg,Je({},It,{key:rt,page:rt})))}var Yn=Mn(en);if(Yn){var ki=!Kt||!rt;Yn=Be.createElement("li",{title:Y?Z.prev_page:null,onClick:Un,tabIndex:ki?null:0,onKeyDown:Sn,className:He("".concat(c,"-prev"),ye({},"".concat(c,"-disabled"),ki)),"aria-disabled":ki},Yn)}var wo=Vt(En);if(wo){var An,Io;te?(An=!fn,Io=Kt?0:null):(An=!fn||!rt,Io=An?null:0),wo=Be.createElement("li",{title:Y?Z.next_page:null,onClick:Kn,tabIndex:Io,onKeyDown:ur,className:He("".concat(c,"-next"),ye({},"".concat(c,"-disabled"),An)),"aria-disabled":An},wo)}var Ma=He(c,v,(o={},ye(o,"".concat(c,"-simple"),te),ye(o,"".concat(c,"-disabled"),ae),o));return Be.createElement("ul",Je({className:Ma,style:Q,ref:Me},Ct),Ht,Yn,te?Vr:St,wo,Be.createElement(Lxe,{locale:Z,rootPrefixCls:c,disabled:ae,selectComponentClass:m,selectPrefixCls:p,changeSize:mn?wt:null,pageSize:Ne,pageSizeOptions:ie,quickGo:Tt?Pt:null,goButton:pr}))};const zX=e=>S.createElement(Hb,Object.assign({},e,{showSearch:!0,size:"small"})),GX=e=>S.createElement(Hb,Object.assign({},e,{showSearch:!0,size:"middle"}));zX.Option=Hb.Option;GX.Option=Hb.Option;const Fxe=e=>{const{componentCls:r}=e;return{[`${r}-disabled`]:{"&, &:hover":{cursor:"not-allowed",[`${r}-item-link`]:{color:e.colorTextDisabled,cursor:"not-allowed"}},"&:focus-visible":{cursor:"not-allowed",[`${r}-item-link`]:{color:e.colorTextDisabled,cursor:"not-allowed"}}},[`&${r}-disabled`]:{cursor:"not-allowed",[`${r}-item`]:{cursor:"not-allowed","&:hover, &:active":{backgroundColor:"transparent"},a:{color:e.colorTextDisabled,backgroundColor:"transparent",border:"none",cursor:"not-allowed"},"&-active":{borderColor:e.colorBorder,backgroundColor:e.itemActiveBgDisabled,"&:hover, &:active":{backgroundColor:e.itemActiveBgDisabled},a:{color:e.itemActiveColorDisabled}}},[`${r}-item-link`]:{color:e.colorTextDisabled,cursor:"not-allowed","&:hover, &:active":{backgroundColor:"transparent"},[`${r}-simple&`]:{backgroundColor:"transparent","&:hover, &:active":{backgroundColor:"transparent"}}},[`${r}-simple-pager`]:{color:e.colorTextDisabled},[`${r}-jump-prev, ${r}-jump-next`]:{[`${r}-item-link-icon`]:{opacity:0},[`${r}-item-ellipsis`]:{opacity:1}}},[`&${r}-simple`]:{[`${r}-prev, ${r}-next`]:{[`&${r}-disabled ${r}-item-link`]:{"&:hover, &:active":{backgroundColor:"transparent"}}}}}},Uxe=e=>{const{componentCls:r}=e;return{[`&${r}-mini ${r}-total-text, &${r}-mini ${r}-simple-pager`]:{height:e.itemSizeSM,lineHeight:qe(e.itemSizeSM)},[`&${r}-mini ${r}-item`]:{minWidth:e.itemSizeSM,height:e.itemSizeSM,margin:0,lineHeight:qe(e.calc(e.itemSizeSM).sub(2).equal())},[`&${r}-mini:not(${r}-disabled) ${r}-item:not(${r}-item-active)`]:{backgroundColor:"transparent",borderColor:"transparent","&:hover":{backgroundColor:e.colorBgTextHover},"&:active":{backgroundColor:e.colorBgTextActive}},[`&${r}-mini ${r}-prev, &${r}-mini ${r}-next`]:{minWidth:e.itemSizeSM,height:e.itemSizeSM,margin:0,lineHeight:qe(e.itemSizeSM)},[`&${r}-mini:not(${r}-disabled)`]:{[`${r}-prev, ${r}-next`]:{[`&:hover ${r}-item-link`]:{backgroundColor:e.colorBgTextHover},[`&:active ${r}-item-link`]:{backgroundColor:e.colorBgTextActive},[`&${r}-disabled:hover ${r}-item-link`]:{backgroundColor:"transparent"}}},[`
    &${r}-mini ${r}-prev ${r}-item-link,
    &${r}-mini ${r}-next ${r}-item-link
    `]:{backgroundColor:"transparent",borderColor:"transparent","&::after":{height:e.itemSizeSM,lineHeight:qe(e.itemSizeSM)}},[`&${r}-mini ${r}-jump-prev, &${r}-mini ${r}-jump-next`]:{height:e.itemSizeSM,marginInlineEnd:0,lineHeight:qe(e.itemSizeSM)},[`&${r}-mini ${r}-options`]:{marginInlineStart:e.paginationMiniOptionsMarginInlineStart,"&-size-changer":{top:e.miniOptionsSizeChangerTop},"&-quick-jumper":{height:e.itemSizeSM,lineHeight:qe(e.itemSizeSM),input:Object.assign(Object.assign({},XP(e)),{width:e.paginationMiniQuickJumperInputWidth,height:e.controlHeightSM})}}}},Bxe=e=>{const{componentCls:r}=e;return{[`
    &${r}-simple ${r}-prev,
    &${r}-simple ${r}-next
    `]:{height:e.itemSizeSM,lineHeight:qe(e.itemSizeSM),verticalAlign:"top",[`${r}-item-link`]:{height:e.itemSizeSM,backgroundColor:"transparent",border:0,"&:hover":{backgroundColor:e.colorBgTextHover},"&:active":{backgroundColor:e.colorBgTextActive},"&::after":{height:e.itemSizeSM,lineHeight:qe(e.itemSizeSM)}}},[`&${r}-simple ${r}-simple-pager`]:{display:"inline-block",height:e.itemSizeSM,marginInlineEnd:e.marginXS,input:{boxSizing:"border-box",height:"100%",marginInlineEnd:e.marginXS,padding:`0 ${qe(e.paginationItemPaddingInline)}`,textAlign:"center",backgroundColor:e.itemInputBg,border:`${qe(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderRadius:e.borderRadius,outline:"none",transition:`border-color ${e.motionDurationMid}`,color:"inherit","&:hover":{borderColor:e.colorPrimary},"&:focus":{borderColor:e.colorPrimaryHover,boxShadow:`${qe(e.inputOutlineOffset)} 0 ${qe(e.controlOutlineWidth)} ${e.controlOutline}`},"&[disabled]":{color:e.colorTextDisabled,backgroundColor:e.colorBgContainerDisabled,borderColor:e.colorBorder,cursor:"not-allowed"}}}}},Vxe=e=>{const{componentCls:r}=e;return{[`${r}-jump-prev, ${r}-jump-next`]:{outline:0,[`${r}-item-container`]:{position:"relative",[`${r}-item-link-icon`]:{color:e.colorPrimary,fontSize:e.fontSizeSM,opacity:0,transition:`all ${e.motionDurationMid}`,"&-svg":{top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,margin:"auto"}},[`${r}-item-ellipsis`]:{position:"absolute",top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,display:"block",margin:"auto",color:e.colorTextDisabled,fontFamily:"Arial, Helvetica, sans-serif",letterSpacing:e.paginationEllipsisLetterSpacing,textAlign:"center",textIndent:e.paginationEllipsisTextIndent,opacity:1,transition:`all ${e.motionDurationMid}`}},"&:hover":{[`${r}-item-link-icon`]:{opacity:1},[`${r}-item-ellipsis`]:{opacity:0}}},[`
    ${r}-prev,
    ${r}-jump-prev,
    ${r}-jump-next
    `]:{marginInlineEnd:e.marginXS},[`
    ${r}-prev,
    ${r}-next,
    ${r}-jump-prev,
    ${r}-jump-next
    `]:{display:"inline-block",minWidth:e.itemSize,height:e.itemSize,color:e.colorText,fontFamily:e.fontFamily,lineHeight:`${qe(e.itemSize)}`,textAlign:"center",verticalAlign:"middle",listStyle:"none",borderRadius:e.borderRadius,cursor:"pointer",transition:`all ${e.motionDurationMid}`},[`${r}-prev, ${r}-next`]:{fontFamily:"Arial, Helvetica, sans-serif",outline:0,button:{color:e.colorText,cursor:"pointer",userSelect:"none"},[`${r}-item-link`]:{display:"block",width:"100%",height:"100%",padding:0,fontSize:e.fontSizeSM,textAlign:"center",backgroundColor:"transparent",border:`${qe(e.lineWidth)} ${e.lineType} transparent`,borderRadius:e.borderRadius,outline:"none",transition:`all ${e.motionDurationMid}`},[`&:hover ${r}-item-link`]:{backgroundColor:e.colorBgTextHover},[`&:active ${r}-item-link`]:{backgroundColor:e.colorBgTextActive},[`&${r}-disabled:hover`]:{[`${r}-item-link`]:{backgroundColor:"transparent"}}},[`${r}-slash`]:{marginInlineEnd:e.paginationSlashMarginInlineEnd,marginInlineStart:e.paginationSlashMarginInlineStart},[`${r}-options`]:{display:"inline-block",marginInlineStart:e.margin,verticalAlign:"middle","&-size-changer":{display:"inline-block",width:"auto"},"&-quick-jumper":{display:"inline-block",height:e.controlHeight,marginInlineStart:e.marginXS,lineHeight:qe(e.controlHeight),verticalAlign:"top",input:Object.assign(Object.assign(Object.assign({},JP(e)),YP(e,{borderColor:e.colorBorder,hoverBorderColor:e.colorPrimaryHover,activeBorderColor:e.colorPrimary,activeShadow:e.activeShadow})),{"&[disabled]":Object.assign({},qb(e)),width:e.calc(e.controlHeightLG).mul(1.25).equal(),height:e.controlHeight,boxSizing:"border-box",margin:0,marginInlineStart:e.marginXS,marginInlineEnd:e.marginXS})}}}},jxe=e=>{const{componentCls:r}=e;return{[`${r}-item`]:{display:"inline-block",minWidth:e.itemSize,height:e.itemSize,marginInlineEnd:e.marginXS,fontFamily:e.fontFamily,lineHeight:qe(e.calc(e.itemSize).sub(2).equal()),textAlign:"center",verticalAlign:"middle",listStyle:"none",backgroundColor:"transparent",border:`${qe(e.lineWidth)} ${e.lineType} transparent`,borderRadius:e.borderRadius,outline:0,cursor:"pointer",userSelect:"none",a:{display:"block",padding:`0 ${qe(e.paginationItemPaddingInline)}`,color:e.colorText,"&:hover":{textDecoration:"none"}},[`&:not(${r}-item-active)`]:{"&:hover":{transition:`all ${e.motionDurationMid}`,backgroundColor:e.colorBgTextHover},"&:active":{backgroundColor:e.colorBgTextActive}},"&-active":{fontWeight:e.fontWeightStrong,backgroundColor:e.itemActiveBg,borderColor:e.colorPrimary,a:{color:e.colorPrimary},"&:hover":{borderColor:e.colorPrimaryHover},"&:hover a":{color:e.colorPrimaryHover}}}}},$xe=e=>{const{componentCls:r}=e;return{[r]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Ds(e)),{"ul, ol":{margin:0,padding:0,listStyle:"none"},"&::after":{display:"block",clear:"both",height:0,overflow:"hidden",visibility:"hidden",content:'""'},[`${r}-total-text`]:{display:"inline-block",height:e.itemSize,marginInlineEnd:e.marginXS,lineHeight:qe(e.calc(e.itemSize).sub(2).equal()),verticalAlign:"middle"}}),jxe(e)),Vxe(e)),Bxe(e)),Uxe(e)),Fxe(e)),{[`@media only screen and (max-width: ${e.screenLG}px)`]:{[`${r}-item`]:{"&-after-jump-prev, &-before-jump-next":{display:"none"}}},[`@media only screen and (max-width: ${e.screenSM}px)`]:{[`${r}-options`]:{display:"none"}}}),[`&${e.componentCls}-rtl`]:{direction:"rtl"}}},Hxe=e=>{const{componentCls:r}=e;return{[`${r}:not(${r}-disabled)`]:{[`${r}-item`]:Object.assign({},vP(e)),[`${r}-jump-prev, ${r}-jump-next`]:{"&:focus-visible":Object.assign({[`${r}-item-link-icon`]:{opacity:1},[`${r}-item-ellipsis`]:{opacity:0}},yC(e))},[`${r}-prev, ${r}-next`]:{[`&:focus-visible ${r}-item-link`]:Object.assign({},yC(e))}}}},KX=e=>Object.assign({itemBg:e.colorBgContainer,itemSize:e.controlHeight,itemSizeSM:e.controlHeightSM,itemActiveBg:e.colorBgContainer,itemLinkBg:e.colorBgContainer,itemActiveColorDisabled:e.colorTextDisabled,itemActiveBgDisabled:e.controlItemBgActiveDisabled,itemInputBg:e.colorBgContainer,miniOptionsSizeChangerTop:0},qP(e)),qX=e=>gi(e,{inputOutlineOffset:0,paginationMiniOptionsMarginInlineStart:e.calc(e.marginXXS).div(2).equal(),paginationMiniQuickJumperInputWidth:e.calc(e.controlHeightLG).mul(1.1).equal(),paginationItemPaddingInline:e.calc(e.marginXXS).mul(1.5).equal(),paginationEllipsisLetterSpacing:e.calc(e.marginXXS).div(2).equal(),paginationSlashMarginInlineStart:e.marginXXS,paginationSlashMarginInlineEnd:e.marginSM,paginationEllipsisTextIndent:"0.13em"},KP(e)),Wxe=ya("Pagination",e=>{const r=qX(e);return[$xe(r),Hxe(r)]},KX),zxe=e=>{const{componentCls:r}=e;return{[`${r}${r}-bordered${r}-disabled:not(${r}-mini)`]:{"&, &:hover":{[`${r}-item-link`]:{borderColor:e.colorBorder}},"&:focus-visible":{[`${r}-item-link`]:{borderColor:e.colorBorder}},[`${r}-item, ${r}-item-link`]:{backgroundColor:e.colorBgContainerDisabled,borderColor:e.colorBorder,[`&:hover:not(${r}-item-active)`]:{backgroundColor:e.colorBgContainerDisabled,borderColor:e.colorBorder,a:{color:e.colorTextDisabled}},[`&${r}-item-active`]:{backgroundColor:e.itemActiveBgDisabled}},[`${r}-prev, ${r}-next`]:{"&:hover button":{backgroundColor:e.colorBgContainerDisabled,borderColor:e.colorBorder,color:e.colorTextDisabled},[`${r}-item-link`]:{backgroundColor:e.colorBgContainerDisabled,borderColor:e.colorBorder}}},[`${r}${r}-bordered:not(${r}-mini)`]:{[`${r}-prev, ${r}-next`]:{"&:hover button":{borderColor:e.colorPrimaryHover,backgroundColor:e.itemBg},[`${r}-item-link`]:{backgroundColor:e.itemLinkBg,borderColor:e.colorBorder},[`&:hover ${r}-item-link`]:{borderColor:e.colorPrimary,backgroundColor:e.itemBg,color:e.colorPrimary},[`&${r}-disabled`]:{[`${r}-item-link`]:{borderColor:e.colorBorder,color:e.colorTextDisabled}}},[`${r}-item`]:{backgroundColor:e.itemBg,border:`${qe(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,[`&:hover:not(${r}-item-active)`]:{borderColor:e.colorPrimary,backgroundColor:e.itemBg,a:{color:e.colorPrimary}},"&-active":{borderColor:e.colorPrimary}}}}},Gxe=Pb(["Pagination","bordered"],e=>{const r=qX(e);return[zxe(r)]},KX);var Kxe=globalThis&&globalThis.__rest||function(e,r){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};const qxe=e=>{const{prefixCls:r,selectPrefixCls:o,className:s,rootClassName:c,style:d,size:p,locale:v,selectComponentClass:m,responsive:E,showSizeChanger:C}=e,b=Kxe(e,["prefixCls","selectPrefixCls","className","rootClassName","style","size","locale","selectComponentClass","responsive","showSizeChanger"]),{xs:R}=nX(E),[,w]=_a(),{getPrefixCls:I,direction:O,pagination:x={}}=S.useContext(Qn),P=I("pagination",r),[N,L,M]=Wxe(P),j=C??x.showSizeChanger,$=S.useMemo(()=>{const Q=S.createElement("span",{className:`${P}-item-ellipsis`},"•••"),he=S.createElement("button",{className:`${P}-item-link`,type:"button",tabIndex:-1},O==="rtl"?S.createElement(OC,null):S.createElement(NC,null)),oe=S.createElement("button",{className:`${P}-item-link`,type:"button",tabIndex:-1},O==="rtl"?S.createElement(NC,null):S.createElement(OC,null)),ae=S.createElement("a",{className:`${P}-item-link`},S.createElement("div",{className:`${P}-item-container`},O==="rtl"?S.createElement(h9,{className:`${P}-item-link-icon`}):S.createElement(d9,{className:`${P}-item-link-icon`}),Q)),te=S.createElement("a",{className:`${P}-item-link`},S.createElement("div",{className:`${P}-item-container`},O==="rtl"?S.createElement(d9,{className:`${P}-item-link-icon`}):S.createElement(h9,{className:`${P}-item-link-icon`}),Q));return{prevIcon:he,nextIcon:oe,jumpPrevIcon:ae,jumpNextIcon:te}},[O,P]),[H]=Nb("Pagination",rq),G=Object.assign(Object.assign({},H),v),Y=Cu(p),q=Y==="small"||!!(R&&!Y&&E),J=I("select",o),re=He({[`${P}-mini`]:q,[`${P}-rtl`]:O==="rtl",[`${P}-bordered`]:w.wireframe},x==null?void 0:x.className,s,c,L,M),Z=Object.assign(Object.assign({},x==null?void 0:x.style),d);return N(S.createElement(S.Fragment,null,w.wireframe&&S.createElement(Gxe,{prefixCls:P}),S.createElement(Mxe,Object.assign({},$,b,{style:Z,prefixCls:P,selectPrefixCls:J,className:re,selectComponentClass:m||(q?zX:GX),locale:G,showSizeChanger:j}))))},Yxe=qxe;function Xxe(e){let{percent:r,prefixCls:o}=e;const s=`${o}-dot`,c=`${s}-holder`,d=`${c}-hidden`,[p,v]=S.useState(!1);kr(()=>{r!==0&&v(!0)},[r!==0]);const m=Math.max(Math.min(r,100),0),E=100,C=E/5,b=E/2-C/2,R=b*2*Math.PI,w=(I,O)=>S.createElement("circle",{className:He(I,`${s}-circle`),r:b,cx:"50",cy:"50",strokeWidth:C,style:O});return p?S.createElement("span",{className:He(c,`${s}-progress`,m<=0&&d)},S.createElement("svg",{viewBox:`0 0 ${E} ${E}`,role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":m},w(`${s}-circle-bg`),w("",{strokeDasharray:`${R*m/100} ${R*(100-m)/100}`,strokeDashoffset:`${R/4}`}))):null}function Jxe(e){const{prefixCls:r,percent:o=0}=e,s=`${r}-dot`,c=`${s}-holder`,d=`${c}-hidden`;return S.createElement(S.Fragment,null,S.createElement("span",{className:He(c,o>0&&d)},S.createElement("span",{className:He(s,`${r}-dot-spin`)},[1,2,3,4].map(p=>S.createElement("i",{className:`${r}-dot-item`,key:p})))),S.createElement(Xxe,{prefixCls:r,percent:o}))}function Qxe(e){const{prefixCls:r,indicator:o,percent:s}=e,c=`${r}-dot`;return o&&S.isValidElement(o)?fc(o,{className:He(o.props.className,c)}):S.createElement(Jxe,{prefixCls:r,percent:s})}const Zxe=new Tr("antSpinMove",{to:{opacity:1}}),eNe=new Tr("antRotate",{to:{transform:"rotate(405deg)"}}),tNe=e=>{const{componentCls:r,calc:o}=e;return{[`${r}`]:Object.assign(Object.assign({},Ds(e)),{position:"absolute",display:"none",color:e.colorPrimary,fontSize:0,textAlign:"center",verticalAlign:"middle",opacity:0,transition:`transform ${e.motionDurationSlow} ${e.motionEaseInOutCirc}`,"&-spinning":{position:"relative",display:"inline-block",opacity:1},[`${r}-text`]:{fontSize:e.fontSize,paddingTop:o(o(e.dotSize).sub(e.fontSize)).div(2).add(2).equal()},"&-fullscreen":{position:"fixed",width:"100vw",height:"100vh",backgroundColor:e.colorBgMask,zIndex:e.zIndexPopupBase,inset:0,display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center",opacity:0,visibility:"hidden",transition:`all ${e.motionDurationMid}`,"&-show":{opacity:1,visibility:"visible"},[r]:{[`${r}-dot-holder`]:{color:e.colorWhite},[`${r}-text`]:{color:e.colorTextLightSolid}}},"&-nested-loading":{position:"relative",[`> div > ${r}`]:{position:"absolute",top:0,insetInlineStart:0,zIndex:4,display:"block",width:"100%",height:"100%",maxHeight:e.contentHeight,[`${r}-dot`]:{position:"absolute",top:"50%",insetInlineStart:"50%",margin:o(e.dotSize).mul(-1).div(2).equal()},[`${r}-text`]:{position:"absolute",top:"50%",width:"100%",textShadow:`0 1px 2px ${e.colorBgContainer}`},[`&${r}-show-text ${r}-dot`]:{marginTop:o(e.dotSize).div(2).mul(-1).sub(10).equal()},"&-sm":{[`${r}-dot`]:{margin:o(e.dotSizeSM).mul(-1).div(2).equal()},[`${r}-text`]:{paddingTop:o(o(e.dotSizeSM).sub(e.fontSize)).div(2).add(2).equal()},[`&${r}-show-text ${r}-dot`]:{marginTop:o(e.dotSizeSM).div(2).mul(-1).sub(10).equal()}},"&-lg":{[`${r}-dot`]:{margin:o(e.dotSizeLG).mul(-1).div(2).equal()},[`${r}-text`]:{paddingTop:o(o(e.dotSizeLG).sub(e.fontSize)).div(2).add(2).equal()},[`&${r}-show-text ${r}-dot`]:{marginTop:o(e.dotSizeLG).div(2).mul(-1).sub(10).equal()}}},[`${r}-container`]:{position:"relative",transition:`opacity ${e.motionDurationSlow}`,"&::after":{position:"absolute",top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,zIndex:10,width:"100%",height:"100%",background:e.colorBgContainer,opacity:0,transition:`all ${e.motionDurationSlow}`,content:'""',pointerEvents:"none"}},[`${r}-blur`]:{clear:"both",opacity:.5,userSelect:"none",pointerEvents:"none","&::after":{opacity:.4,pointerEvents:"auto"}}},"&-tip":{color:e.spinDotDefault},[`${r}-dot-progress`]:{position:"absolute",top:0,insetInlineStart:0},[`${r}-dot-holder`]:{width:"1em",height:"1em",fontSize:e.dotSize,display:"inline-block",transition:`transform ${e.motionDurationSlow} ease, opacity ${e.motionDurationSlow} ease`,transformOrigin:"50% 50%",lineHeight:1,color:e.colorPrimary,"&-hidden":{transform:"scale(0.3)",opacity:0}},[`${r}-dot-progress`]:{position:"absolute",top:0,insetInlineStart:0},[`${r}-dot`]:{position:"relative",display:"inline-block",width:"1em",height:"1em","&-item":{position:"absolute",display:"block",width:o(e.dotSize).sub(o(e.marginXXS).div(2)).div(2).equal(),height:o(e.dotSize).sub(o(e.marginXXS).div(2)).div(2).equal(),background:"currentColor",borderRadius:"100%",transform:"scale(0.75)",transformOrigin:"50% 50%",opacity:.3,animationName:Zxe,animationDuration:"1s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDirection:"alternate","&:nth-child(1)":{top:0,insetInlineStart:0,animationDelay:"0s"},"&:nth-child(2)":{top:0,insetInlineEnd:0,animationDelay:"0.4s"},"&:nth-child(3)":{insetInlineEnd:0,bottom:0,animationDelay:"0.8s"},"&:nth-child(4)":{bottom:0,insetInlineStart:0,animationDelay:"1.2s"}},"&-spin":{transform:"rotate(45deg)",animationName:eNe,animationDuration:"1.2s",animationIterationCount:"infinite",animationTimingFunction:"linear"},"&-circle":{strokeLinecap:"round",transition:["stroke-dashoffset","stroke-dasharray","stroke","stroke-width","opacity"].map(s=>`${s} ${e.motionDurationSlow} ease`).join(","),fillOpacity:0,stroke:"currentcolor"},"&-circle-bg":{stroke:e.colorFillSecondary}},[`&-sm ${r}-dot-holder`]:{fontSize:e.dotSizeSM,i:{width:o(o(e.dotSizeSM).sub(o(e.marginXXS).div(2))).div(2).equal(),height:o(o(e.dotSizeSM).sub(o(e.marginXXS).div(2))).div(2).equal()}},[`&-lg ${r}-dot-holder`]:{fontSize:e.dotSizeLG,i:{width:o(o(e.dotSizeLG).sub(e.marginXXS)).div(2).equal(),height:o(o(e.dotSizeLG).sub(e.marginXXS)).div(2).equal()}},[`&${r}-show-text ${r}-text`]:{display:"block"}})}},nNe=e=>{const{controlHeightLG:r,controlHeight:o}=e;return{contentHeight:400,dotSize:r/2,dotSizeSM:r*.35,dotSizeLG:o}},rNe=ya("Spin",e=>{const r=gi(e,{spinDotDefault:e.colorTextDescription});return[tNe(r)]},nNe),iNe=200,m9=[[30,.05],[70,.03],[96,.01]];function oNe(e,r){const[o,s]=S.useState(0),c=S.useRef(),d=r==="auto";return S.useEffect(()=>(d&&e&&(s(0),c.current=setInterval(()=>{s(p=>{const v=100-p;for(let m=0;m<m9.length;m+=1){const[E,C]=m9[m];if(p<=E)return p+v*C}return p})},iNe)),()=>{clearInterval(c.current)}),[d,e]),d?o:r}var aNe=globalThis&&globalThis.__rest||function(e,r){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};let YX;function sNe(e,r){return!!e&&!!r&&!isNaN(Number(r))}const XX=e=>{const{prefixCls:r,spinning:o=!0,delay:s=0,className:c,rootClassName:d,size:p="default",tip:v,wrapperClassName:m,style:E,children:C,fullscreen:b=!1,indicator:R,percent:w}=e,I=aNe(e,["prefixCls","spinning","delay","className","rootClassName","size","tip","wrapperClassName","style","children","fullscreen","indicator","percent"]),{getPrefixCls:O}=S.useContext(Qn),x=O("spin",r),[P,N,L]=rNe(x),[M,j]=S.useState(()=>o&&!sNe(o,s)),$=oNe(M,w);S.useEffect(()=>{if(o){const Q=cAe(s,()=>{j(!0)});return Q(),()=>{var he;(he=Q==null?void 0:Q.cancel)===null||he===void 0||he.call(Q)}}j(!1)},[s,o]);const H=S.useMemo(()=>typeof C<"u"&&!b,[C,b]),{direction:G,spin:Y}=S.useContext(Qn),q=He(x,Y==null?void 0:Y.className,{[`${x}-sm`]:p==="small",[`${x}-lg`]:p==="large",[`${x}-spinning`]:M,[`${x}-show-text`]:!!v,[`${x}-rtl`]:G==="rtl"},c,!b&&d,N,L),J=He(`${x}-container`,{[`${x}-blur`]:M}),re=Object.assign(Object.assign({},Y==null?void 0:Y.style),E),Z=S.createElement("div",Object.assign({},I,{style:re,className:q,"aria-live":"polite","aria-busy":M}),S.createElement(Qxe,{prefixCls:x,indicator:R??YX,percent:$}),v&&(H||b)?S.createElement("div",{className:`${x}-text`},v):null);return P(H?S.createElement("div",Object.assign({},I,{className:He(`${x}-nested-loading`,m,N,L)}),M&&S.createElement("div",{key:"loading"},Z),S.createElement("div",{className:J,key:"container"},C)):b?S.createElement("div",{className:He(`${x}-fullscreen`,{[`${x}-fullscreen-show`]:M},d,N,L)},Z):Z)};XX.setDefaultIndicator=e=>{YX=e};const cNe=XX,n2=Be.createContext({});n2.Consumer;var JX=globalThis&&globalThis.__rest||function(e,r){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};const lNe=e=>{var{prefixCls:r,className:o,avatar:s,title:c,description:d}=e,p=JX(e,["prefixCls","className","avatar","title","description"]);const{getPrefixCls:v}=S.useContext(Qn),m=v("list",r),E=He(`${m}-item-meta`,o),C=Be.createElement("div",{className:`${m}-item-meta-content`},c&&Be.createElement("h4",{className:`${m}-item-meta-title`},c),d&&Be.createElement("div",{className:`${m}-item-meta-description`},d));return Be.createElement("div",Object.assign({},p,{className:E}),s&&Be.createElement("div",{className:`${m}-item-meta-avatar`},s),(c||d)&&C)},uNe=Be.forwardRef((e,r)=>{const{prefixCls:o,children:s,actions:c,extra:d,styles:p,className:v,classNames:m,colStyle:E}=e,C=JX(e,["prefixCls","children","actions","extra","styles","className","classNames","colStyle"]),{grid:b,itemLayout:R}=S.useContext(n2),{getPrefixCls:w,list:I}=S.useContext(Qn),O=H=>{var G,Y;return He((Y=(G=I==null?void 0:I.item)===null||G===void 0?void 0:G.classNames)===null||Y===void 0?void 0:Y[H],m==null?void 0:m[H])},x=H=>{var G,Y;return Object.assign(Object.assign({},(Y=(G=I==null?void 0:I.item)===null||G===void 0?void 0:G.styles)===null||Y===void 0?void 0:Y[H]),p==null?void 0:p[H])},P=()=>{let H;return S.Children.forEach(s,G=>{typeof G=="string"&&(H=!0)}),H&&S.Children.count(s)>1},N=()=>R==="vertical"?!!d:!P(),L=w("list",o),M=c&&c.length>0&&Be.createElement("ul",{className:He(`${L}-item-action`,O("actions")),key:"actions",style:x("actions")},c.map((H,G)=>Be.createElement("li",{key:`${L}-item-action-${G}`},H,G!==c.length-1&&Be.createElement("em",{className:`${L}-item-action-split`})))),j=b?"div":"li",$=Be.createElement(j,Object.assign({},C,b?{}:{ref:r},{className:He(`${L}-item`,{[`${L}-item-no-flex`]:!N()},v)}),R==="vertical"&&d?[Be.createElement("div",{className:`${L}-item-main`,key:"content"},s,M),Be.createElement("div",{className:He(`${L}-item-extra`,O("extra")),key:"extra",style:x("extra")},d)]:[s,M,fc(d,{key:"extra"})]);return b?Be.createElement(ZP,{ref:r,flex:1,style:E},$):$}),QX=uNe;QX.Meta=lNe;const dNe=QX,hNe=e=>{const{listBorderedCls:r,componentCls:o,paddingLG:s,margin:c,itemPaddingSM:d,itemPaddingLG:p,marginLG:v,borderRadiusLG:m}=e;return{[`${r}`]:{border:`${qe(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderRadius:m,[`${o}-header,${o}-footer,${o}-item`]:{paddingInline:s},[`${o}-pagination`]:{margin:`${qe(c)} ${qe(v)}`}},[`${r}${o}-sm`]:{[`${o}-item,${o}-header,${o}-footer`]:{padding:d}},[`${r}${o}-lg`]:{[`${o}-item,${o}-header,${o}-footer`]:{padding:p}}}},pNe=e=>{const{componentCls:r,screenSM:o,screenMD:s,marginLG:c,marginSM:d,margin:p}=e;return{[`@media screen and (max-width:${s}px)`]:{[`${r}`]:{[`${r}-item`]:{[`${r}-item-action`]:{marginInlineStart:c}}},[`${r}-vertical`]:{[`${r}-item`]:{[`${r}-item-extra`]:{marginInlineStart:c}}}},[`@media screen and (max-width: ${o}px)`]:{[`${r}`]:{[`${r}-item`]:{flexWrap:"wrap",[`${r}-action`]:{marginInlineStart:d}}},[`${r}-vertical`]:{[`${r}-item`]:{flexWrap:"wrap-reverse",[`${r}-item-main`]:{minWidth:e.contentWidth},[`${r}-item-extra`]:{margin:`auto auto ${qe(p)}`}}}}}},fNe=e=>{const{componentCls:r,antCls:o,controlHeight:s,minHeight:c,paddingSM:d,marginLG:p,padding:v,itemPadding:m,colorPrimary:E,itemPaddingSM:C,itemPaddingLG:b,paddingXS:R,margin:w,colorText:I,colorTextDescription:O,motionDurationSlow:x,lineWidth:P,headerBg:N,footerBg:L,emptyTextPadding:M,metaMarginBottom:j,avatarMarginRight:$,titleMarginBottom:H,descriptionFontSize:G}=e,Y={};return["start","center","end"].forEach(q=>{Y[`&-align-${q}`]={textAlign:q}}),{[`${r}`]:Object.assign(Object.assign({},Ds(e)),{position:"relative","*":{outline:"none"},[`${r}-header`]:{background:N},[`${r}-footer`]:{background:L},[`${r}-header, ${r}-footer`]:{paddingBlock:d},[`${r}-pagination`]:Object.assign(Object.assign({marginBlockStart:p},Y),{[`${o}-pagination-options`]:{textAlign:"start"}}),[`${r}-spin`]:{minHeight:c,textAlign:"center"},[`${r}-items`]:{margin:0,padding:0,listStyle:"none"},[`${r}-item`]:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:m,color:I,[`${r}-item-meta`]:{display:"flex",flex:1,alignItems:"flex-start",maxWidth:"100%",[`${r}-item-meta-avatar`]:{marginInlineEnd:$},[`${r}-item-meta-content`]:{flex:"1 0",width:0,color:I},[`${r}-item-meta-title`]:{margin:`0 0 ${qe(e.marginXXS)} 0`,color:I,fontSize:e.fontSize,lineHeight:e.lineHeight,"> a":{color:I,transition:`all ${x}`,"&:hover":{color:E}}},[`${r}-item-meta-description`]:{color:O,fontSize:G,lineHeight:e.lineHeight}},[`${r}-item-action`]:{flex:"0 0 auto",marginInlineStart:e.marginXXL,padding:0,fontSize:0,listStyle:"none","& > li":{position:"relative",display:"inline-block",padding:`0 ${qe(R)}`,color:O,fontSize:e.fontSize,lineHeight:e.lineHeight,textAlign:"center","&:first-child":{paddingInlineStart:0}},[`${r}-item-action-split`]:{position:"absolute",insetBlockStart:"50%",insetInlineEnd:0,width:P,height:e.calc(e.fontHeight).sub(e.calc(e.marginXXS).mul(2)).equal(),transform:"translateY(-50%)",backgroundColor:e.colorSplit}}},[`${r}-empty`]:{padding:`${qe(v)} 0`,color:O,fontSize:e.fontSizeSM,textAlign:"center"},[`${r}-empty-text`]:{padding:M,color:e.colorTextDisabled,fontSize:e.fontSize,textAlign:"center"},[`${r}-item-no-flex`]:{display:"block"}}),[`${r}-grid ${o}-col > ${r}-item`]:{display:"block",maxWidth:"100%",marginBlockEnd:w,paddingBlock:0,borderBlockEnd:"none"},[`${r}-vertical ${r}-item`]:{alignItems:"initial",[`${r}-item-main`]:{display:"block",flex:1},[`${r}-item-extra`]:{marginInlineStart:p},[`${r}-item-meta`]:{marginBlockEnd:j,[`${r}-item-meta-title`]:{marginBlockStart:0,marginBlockEnd:H,color:I,fontSize:e.fontSizeLG,lineHeight:e.lineHeightLG}},[`${r}-item-action`]:{marginBlockStart:v,marginInlineStart:"auto","> li":{padding:`0 ${qe(v)}`,"&:first-child":{paddingInlineStart:0}}}},[`${r}-split ${r}-item`]:{borderBlockEnd:`${qe(e.lineWidth)} ${e.lineType} ${e.colorSplit}`,"&:last-child":{borderBlockEnd:"none"}},[`${r}-split ${r}-header`]:{borderBlockEnd:`${qe(e.lineWidth)} ${e.lineType} ${e.colorSplit}`},[`${r}-split${r}-empty ${r}-footer`]:{borderTop:`${qe(e.lineWidth)} ${e.lineType} ${e.colorSplit}`},[`${r}-loading ${r}-spin-nested-loading`]:{minHeight:s},[`${r}-split${r}-something-after-last-item ${o}-spin-container > ${r}-items > ${r}-item:last-child`]:{borderBlockEnd:`${qe(e.lineWidth)} ${e.lineType} ${e.colorSplit}`},[`${r}-lg ${r}-item`]:{padding:b},[`${r}-sm ${r}-item`]:{padding:C},[`${r}:not(${r}-vertical)`]:{[`${r}-item-no-flex`]:{[`${r}-item-action`]:{float:"right"}}}}},mNe=e=>({contentWidth:220,itemPadding:`${qe(e.paddingContentVertical)} 0`,itemPaddingSM:`${qe(e.paddingContentVerticalSM)} ${qe(e.paddingContentHorizontal)}`,itemPaddingLG:`${qe(e.paddingContentVerticalLG)} ${qe(e.paddingContentHorizontalLG)}`,headerBg:"transparent",footerBg:"transparent",emptyTextPadding:e.padding,metaMarginBottom:e.padding,avatarMarginRight:e.padding,titleMarginBottom:e.paddingSM,descriptionFontSize:e.fontSize}),gNe=ya("List",e=>{const r=gi(e,{listBorderedCls:`${e.componentCls}-bordered`,minHeight:e.controlHeightLG});return[fNe(r),hNe(r),pNe(r)]},mNe);var vNe=globalThis&&globalThis.__rest||function(e,r){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};function YN(e){var r,{pagination:o=!1,prefixCls:s,bordered:c=!1,split:d=!0,className:p,rootClassName:v,style:m,children:E,itemLayout:C,loadMore:b,grid:R,dataSource:w=[],size:I,header:O,footer:x,loading:P=!1,rowKey:N,renderItem:L,locale:M}=e,j=vNe(e,["pagination","prefixCls","bordered","split","className","rootClassName","style","children","itemLayout","loadMore","grid","dataSource","size","header","footer","loading","rowKey","renderItem","locale"]);const $=o&&typeof o=="object"?o:{},[H,G]=S.useState($.defaultCurrent||1),[Y,q]=S.useState($.defaultPageSize||10),{getPrefixCls:J,renderEmpty:re,direction:Z,list:Q}=S.useContext(Qn),he={current:1,total:0},oe=je=>(ct,lt)=>{var gt;G(ct),q(lt),o&&o[je]&&((gt=o==null?void 0:o[je])===null||gt===void 0||gt.call(o,ct,lt))},ae=oe("onChange"),te=oe("onShowSizeChange"),de=(je,ct)=>{if(!L)return null;let lt;return typeof N=="function"?lt=N(je):N?lt=je[N]:lt=je.key,lt||(lt=`list-item-${ct}`),S.createElement(S.Fragment,{key:lt},L(je,ct))},fe=()=>!!(b||o||x),ie=J("list",s),[le,ve,ge]=gNe(ie);let Te=P;typeof Te=="boolean"&&(Te={spinning:Te});const we=Te&&Te.spinning,Ie=Cu(I);let Me="";switch(Ie){case"large":Me="lg";break;case"small":Me="sm";break}const Ke=He(ie,{[`${ie}-vertical`]:C==="vertical",[`${ie}-${Me}`]:Me,[`${ie}-split`]:d,[`${ie}-bordered`]:c,[`${ie}-loading`]:we,[`${ie}-grid`]:!!R,[`${ie}-something-after-last-item`]:fe(),[`${ie}-rtl`]:Z==="rtl"},Q==null?void 0:Q.className,p,v,ve,ge),ke=bxe(he,{total:w.length,current:H,pageSize:Y},o||{}),Ne=Math.ceil(ke.total/ke.pageSize);ke.current>Ne&&(ke.current=Ne);const ze=o?S.createElement("div",{className:He(`${ie}-pagination`,`${ie}-pagination-align-${(r=ke==null?void 0:ke.align)!==null&&r!==void 0?r:"end"}`)},S.createElement(Yxe,Object.assign({},ke,{onChange:ae,onShowSizeChange:te}))):null;let Qe=_t(w);o&&w.length>(ke.current-1)*ke.pageSize&&(Qe=_t(w).splice((ke.current-1)*ke.pageSize,ke.pageSize));const De=Object.keys(R||{}).some(je=>["xs","sm","md","lg","xl","xxl"].includes(je)),xe=nX(De),ft=S.useMemo(()=>{for(let je=0;je<np.length;je+=1){const ct=np[je];if(xe[ct])return ct}},[xe]),Et=S.useMemo(()=>{if(!R)return;const je=ft&&R[ft]?R[ft]:R.column;if(je)return{width:`${100/je}%`,maxWidth:`${100/je}%`}},[JSON.stringify(R),ft]);let st=we&&S.createElement("div",{style:{minHeight:53}});if(Qe.length>0){const je=Qe.map((ct,lt)=>de(ct,lt));st=R?S.createElement(AX,{gutter:R.gutter},S.Children.map(je,ct=>S.createElement("div",{key:ct==null?void 0:ct.key,style:Et},ct))):S.createElement("ul",{className:`${ie}-items`},je)}else!E&&!we&&(st=S.createElement("div",{className:`${ie}-empty-text`},M&&M.emptyText||(re==null?void 0:re("List"))||S.createElement(YY,{componentName:"List"})));const ot=ke.position||"bottom",Ze=S.useMemo(()=>({grid:R,itemLayout:C}),[JSON.stringify(R),C]);return le(S.createElement(n2.Provider,{value:Ze},S.createElement("div",Object.assign({style:Object.assign(Object.assign({},Q==null?void 0:Q.style),m),className:Ke},j),(ot==="top"||ot==="both")&&ze,O&&S.createElement("div",{className:`${ie}-header`},O),S.createElement(cNe,Object.assign({},Te),st,E),x&&S.createElement("div",{className:`${ie}-footer`},x),b||(ot==="bottom"||ot==="both")&&ze)))}YN.Item=dNe;let $c=null,Vy=e=>e(),kC=[],Av={};function g9(){const{getContainer:e,rtl:r,maxCount:o,top:s,bottom:c}=Av,d=(e==null?void 0:e())||document.body;return{getContainer:()=>d,rtl:r,maxCount:o,top:s,bottom:c}}const ENe=Be.forwardRef((e,r)=>{const{notificationConfig:o,sync:s}=e,{getPrefixCls:c}=S.useContext(Qn),d=Av.prefixCls||c("notification"),p=S.useContext(TTe),[v,m]=DY(Object.assign(Object.assign(Object.assign({},o),{prefixCls:d}),p.notification));return Be.useEffect(s,[]),Be.useImperativeHandle(r,()=>{const E=Object.assign({},v);return Object.keys(E).forEach(C=>{E[C]=function(){return s(),v[C].apply(v,arguments)}}),{instance:E,sync:s}}),m}),_Ne=Be.forwardRef((e,r)=>{const[o,s]=Be.useState(g9),c=()=>{s(g9)};Be.useEffect(c,[]);const d=gSe(),p=d.getRootPrefixCls(),v=d.getIconPrefixCls(),m=d.getTheme(),E=Be.createElement(ENe,{ref:r,sync:c,notificationConfig:o});return Be.createElement(up,{prefixCls:p,iconPrefixCls:v,theme:m},d.holderRender?d.holderRender(E):E)});function r2(){if(!$c){const e=document.createDocumentFragment(),r={fragment:e};$c=r,Vy(()=>{Jq(Be.createElement(_Ne,{ref:o=>{const{instance:s,sync:c}=o||{};Promise.resolve().then(()=>{!r.instance&&s&&(r.instance=s,r.sync=c,r2())})}}),e)});return}$c.instance&&(kC.forEach(e=>{switch(e.type){case"open":{Vy(()=>{$c.instance.open(Object.assign(Object.assign({},Av),e.config))});break}case"destroy":Vy(()=>{$c==null||$c.instance.destroy(e.key)});break}}),kC=[])}function SNe(e){Av=Object.assign(Object.assign({},Av),e),Vy(()=>{var r;(r=$c==null?void 0:$c.sync)===null||r===void 0||r.call($c)})}function ZX(e){kC.push({type:"open",config:e}),r2()}const yNe=e=>{kC.push({type:"destroy",key:e}),r2()},CNe=["success","info","warning","error"],bNe={open:ZX,destroy:yNe,config:SNe,useNotification:bTe,_InternalPanelDoNotUseOrYouWillBeFired:fTe},eJ=bNe;CNe.forEach(e=>{eJ[e]=r=>ZX(Object.assign(Object.assign({},r),{type:e}))});const TNe=eJ;var RNe=globalThis&&globalThis.__rest||function(e,r){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};const wNe={border:0,background:"transparent",padding:0,lineHeight:"inherit",display:"inline-block"},INe=S.forwardRef((e,r)=>{const o=C=>{const{keyCode:b}=C;b===dt.ENTER&&C.preventDefault()},s=C=>{const{keyCode:b}=C,{onClick:R}=e;b===dt.ENTER&&R&&R()},{style:c,noStyle:d,disabled:p,tabIndex:v=0}=e,m=RNe(e,["style","noStyle","disabled","tabIndex"]);let E={};return d||(E=Object.assign({},wNe)),p&&(E.pointerEvents="none"),E=Object.assign(Object.assign({},E),c),S.createElement("div",Object.assign({role:"button",tabIndex:v,ref:r},m,{onKeyDown:o,onKeyUp:s,style:E}))}),tJ=INe;var ANe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"};const ONe=ANe;var xNe=function(r,o){return S.createElement(ro,Je({},r,{ref:o,icon:ONe}))},NNe=S.forwardRef(xNe);const DNe=NNe;var PNe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 170h-60c-4.4 0-8 3.6-8 8v518H310v-73c0-6.7-7.8-10.5-13-6.3l-141.9 112a8 8 0 000 12.6l141.9 112c5.3 4.2 13 .4 13-6.3v-75h498c35.3 0 64-28.7 64-64V178c0-4.4-3.6-8-8-8z"}}]},name:"enter",theme:"outlined"};const LNe=PNe;var kNe=function(r,o){return S.createElement(ro,Je({},r,{ref:o,icon:LNe}))},MNe=S.forwardRef(kNe);const FNe=MNe,UNe=(e,r,o,s)=>{const{titleMarginBottom:c,fontWeightStrong:d}=s;return{marginBottom:c,color:o,fontWeight:d,fontSize:e,lineHeight:r}},BNe=e=>{const r=[1,2,3,4,5],o={};return r.forEach(s=>{o[`
      h${s}&,
      div&-h${s},
      div&-h${s} > textarea,
      h${s}
    `]=UNe(e[`fontSizeHeading${s}`],e[`lineHeightHeading${s}`],e.colorTextHeading,e)}),o},VNe=e=>{const{componentCls:r}=e;return{"a&, a":Object.assign(Object.assign({},_q(e)),{textDecoration:e.linkDecoration,"&:active, &:hover":{textDecoration:e.linkHoverDecoration},[`&[disabled], &${r}-disabled`]:{color:e.colorTextDisabled,cursor:"not-allowed","&:active, &:hover":{color:e.colorTextDisabled},"&:active":{pointerEvents:"none"}}})}},jNe=e=>({code:{margin:"0 0.2em",paddingInline:"0.4em",paddingBlock:"0.2em 0.1em",fontSize:"85%",fontFamily:e.fontFamilyCode,background:"rgba(150, 150, 150, 0.1)",border:"1px solid rgba(100, 100, 100, 0.2)",borderRadius:3},kbd:{margin:"0 0.2em",paddingInline:"0.4em",paddingBlock:"0.15em 0.1em",fontSize:"90%",fontFamily:e.fontFamilyCode,background:"rgba(150, 150, 150, 0.06)",border:"1px solid rgba(100, 100, 100, 0.2)",borderBottomWidth:2,borderRadius:3},mark:{padding:0,backgroundColor:JEe[2]},"u, ins":{textDecoration:"underline",textDecorationSkipInk:"auto"},"s, del":{textDecoration:"line-through"},strong:{fontWeight:600},"ul, ol":{marginInline:0,marginBlock:"0 1em",padding:0,li:{marginInline:"20px 0",marginBlock:0,paddingInline:"4px 0",paddingBlock:0}},ul:{listStyleType:"circle",ul:{listStyleType:"disc"}},ol:{listStyleType:"decimal"},"pre, blockquote":{margin:"1em 0"},pre:{padding:"0.4em 0.6em",whiteSpace:"pre-wrap",wordWrap:"break-word",background:"rgba(150, 150, 150, 0.1)",border:"1px solid rgba(100, 100, 100, 0.2)",borderRadius:3,fontFamily:e.fontFamilyCode,code:{display:"inline",margin:0,padding:0,fontSize:"inherit",fontFamily:"inherit",background:"transparent",border:0}},blockquote:{paddingInline:"0.6em 0",paddingBlock:0,borderInlineStart:"4px solid rgba(100, 100, 100, 0.2)",opacity:.85}}),$Ne=e=>{const{componentCls:r,paddingSM:o}=e,s=o;return{"&-edit-content":{position:"relative","div&":{insetInlineStart:e.calc(e.paddingSM).mul(-1).equal(),marginTop:e.calc(s).mul(-1).equal(),marginBottom:`calc(1em - ${qe(s)})`},[`${r}-edit-content-confirm`]:{position:"absolute",insetInlineEnd:e.calc(e.marginXS).add(2).equal(),insetBlockEnd:e.marginXS,color:e.colorTextDescription,fontWeight:"normal",fontSize:e.fontSize,fontStyle:"normal",pointerEvents:"none"},textarea:{margin:"0!important",MozTransition:"none",height:"1em"}}}},HNe=e=>({[`${e.componentCls}-copy-success`]:{"\n    &,\n    &:hover,\n    &:focus":{color:e.colorSuccess}},[`${e.componentCls}-copy-icon-only`]:{marginInlineStart:0}}),WNe=()=>({"\n  a&-ellipsis,\n  span&-ellipsis\n  ":{display:"inline-block",maxWidth:"100%"},"&-single-line":{whiteSpace:"nowrap"},"&-ellipsis-single-line":{overflow:"hidden",textOverflow:"ellipsis","a&, span&":{verticalAlign:"bottom"},"> code":{paddingBlock:0,maxWidth:"calc(100% - 1.2em)",display:"inline-block",overflow:"hidden",textOverflow:"ellipsis",verticalAlign:"bottom",boxSizing:"content-box"}},"&-ellipsis-multiple-line":{display:"-webkit-box",overflow:"hidden",WebkitLineClamp:3,WebkitBoxOrient:"vertical"}}),zNe=e=>{const{componentCls:r,titleMarginTop:o}=e;return{[r]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:e.colorText,wordBreak:"break-word",lineHeight:e.lineHeight,[`&${r}-secondary`]:{color:e.colorTextDescription},[`&${r}-success`]:{color:e.colorSuccess},[`&${r}-warning`]:{color:e.colorWarning},[`&${r}-danger`]:{color:e.colorError,"a&:active, a&:focus":{color:e.colorErrorActive},"a&:hover":{color:e.colorErrorHover}},[`&${r}-disabled`]:{color:e.colorTextDisabled,cursor:"not-allowed",userSelect:"none"},"\n        div&,\n        p\n      ":{marginBottom:"1em"}},BNe(e)),{[`
      & + h1${r},
      & + h2${r},
      & + h3${r},
      & + h4${r},
      & + h5${r}
      `]:{marginTop:o},"\n      div,\n      ul,\n      li,\n      p,\n      h1,\n      h2,\n      h3,\n      h4,\n      h5":{"\n        + h1,\n        + h2,\n        + h3,\n        + h4,\n        + h5\n        ":{marginTop:o}}}),jNe(e)),VNe(e)),{[`
        ${r}-expand,
        ${r}-collapse,
        ${r}-edit,
        ${r}-copy
      `]:Object.assign(Object.assign({},_q(e)),{marginInlineStart:e.marginXXS})}),$Ne(e)),HNe(e)),WNe()),{"&-rtl":{direction:"rtl"}})}},GNe=()=>({titleMarginTop:"1.2em",titleMarginBottom:"0.5em"}),nJ=ya("Typography",e=>[zNe(e)],GNe),KNe=e=>{const{prefixCls:r,"aria-label":o,className:s,style:c,direction:d,maxLength:p,autoSize:v=!0,value:m,onSave:E,onCancel:C,onEnd:b,component:R,enterIcon:w=S.createElement(FNe,null)}=e,I=S.useRef(null),O=S.useRef(!1),x=S.useRef(),[P,N]=S.useState(m);S.useEffect(()=>{N(m)},[m]),S.useEffect(()=>{if(I.current&&I.current.resizableTextArea){const{textArea:he}=I.current.resizableTextArea;he.focus();const{length:oe}=he.value;he.setSelectionRange(oe,oe)}},[]);const L=he=>{let{target:oe}=he;N(oe.value.replace(/[\n\r]/g,""))},M=()=>{O.current=!0},j=()=>{O.current=!1},$=he=>{let{keyCode:oe}=he;O.current||(x.current=oe)},H=()=>{E(P.trim())},G=he=>{let{keyCode:oe,ctrlKey:ae,altKey:te,metaKey:de,shiftKey:fe}=he;x.current===oe&&!O.current&&!ae&&!te&&!de&&!fe&&(oe===dt.ENTER?(H(),b==null||b()):oe===dt.ESC&&C())},Y=()=>{H()},q=R?`${r}-${R}`:"",[J,re,Z]=nJ(r),Q=He(r,`${r}-edit-content`,{[`${r}-rtl`]:d==="rtl"},s,q,re,Z);return J(S.createElement("div",{className:Q,style:c},S.createElement(PX,{ref:I,maxLength:p,value:P,onChange:L,onKeyDown:$,onKeyUp:G,onCompositionStart:M,onCompositionEnd:j,onBlur:Y,"aria-label":o,rows:1,autoSize:v}),w!==null?fc(w,{className:`${r}-edit-content-confirm`}):null))},qNe=KNe;var YNe=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var r=document.activeElement,o=[],s=0;s<e.rangeCount;s++)o.push(e.getRangeAt(s));switch(r.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":r.blur();break;default:r=null;break}return e.removeAllRanges(),function(){e.type==="Caret"&&e.removeAllRanges(),e.rangeCount||o.forEach(function(c){e.addRange(c)}),r&&r.focus()}},XNe=YNe,v9={"text/plain":"Text","text/html":"Url",default:"Text"},JNe="Copy to clipboard: #{key}, Enter";function QNe(e){var r=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,r)}function ZNe(e,r){var o,s,c,d,p,v,m=!1;r||(r={}),o=r.debug||!1;try{c=XNe(),d=document.createRange(),p=document.getSelection(),v=document.createElement("span"),v.textContent=e,v.ariaHidden="true",v.style.all="unset",v.style.position="fixed",v.style.top=0,v.style.clip="rect(0, 0, 0, 0)",v.style.whiteSpace="pre",v.style.webkitUserSelect="text",v.style.MozUserSelect="text",v.style.msUserSelect="text",v.style.userSelect="text",v.addEventListener("copy",function(C){if(C.stopPropagation(),r.format)if(C.preventDefault(),typeof C.clipboardData>"u"){o&&console.warn("unable to use e.clipboardData"),o&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var b=v9[r.format]||v9.default;window.clipboardData.setData(b,e)}else C.clipboardData.clearData(),C.clipboardData.setData(r.format,e);r.onCopy&&(C.preventDefault(),r.onCopy(C.clipboardData))}),document.body.appendChild(v),d.selectNodeContents(v),p.addRange(d);var E=document.execCommand("copy");if(!E)throw new Error("copy command was unsuccessful");m=!0}catch(C){o&&console.error("unable to copy using execCommand: ",C),o&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(r.format||"text",e),r.onCopy&&r.onCopy(window.clipboardData),m=!0}catch(b){o&&console.error("unable to copy using clipboardData: ",b),o&&console.error("falling back to prompt"),s=QNe("message"in r?r.message:JNe),window.prompt(s,e)}}finally{p&&(typeof p.removeRange=="function"?p.removeRange(d):p.removeAllRanges()),v&&document.body.removeChild(v),c()}return m}var eDe=ZNe;const tDe=Ld(eDe);var nDe=globalThis&&globalThis.__awaiter||function(e,r,o,s){function c(d){return d instanceof o?d:new o(function(p){p(d)})}return new(o||(o=Promise))(function(d,p){function v(C){try{E(s.next(C))}catch(b){p(b)}}function m(C){try{E(s.throw(C))}catch(b){p(b)}}function E(C){C.done?d(C.value):c(C.value).then(v,m)}E((s=s.apply(e,r||[])).next())})};const rDe=e=>{let{copyConfig:r,children:o}=e;const[s,c]=S.useState(!1),[d,p]=S.useState(!1),v=S.useRef(null),m=()=>{v.current&&clearTimeout(v.current)},E={};r.format&&(E.format=r.format),S.useEffect(()=>m,[]);const C=Fo(b=>nDe(void 0,void 0,void 0,function*(){var R;b==null||b.preventDefault(),b==null||b.stopPropagation(),p(!0);try{const w=typeof r.text=="function"?yield r.text():r.text;tDe(w||String(o)||"",E),p(!1),c(!0),m(),v.current=setTimeout(()=>{c(!1)},3e3),(R=r.onCopy)===null||R===void 0||R.call(r,b)}catch(w){throw p(!1),w}}));return{copied:s,copyLoading:d,onClick:C}},iDe=rDe;function nO(e,r){return S.useMemo(()=>{const o=!!e;return[o,Object.assign(Object.assign({},r),o&&typeof e=="object"?e:null)]},[e])}const oDe=(e,r)=>{const o=S.useRef(!1);S.useEffect(()=>{o.current?e():o.current=!0},r)},aDe=oDe,sDe=e=>{const r=S.useRef();return S.useEffect(()=>{r.current=e}),r.current},cDe=sDe;var lDe=globalThis&&globalThis.__rest||function(e,r){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};const uDe=S.forwardRef((e,r)=>{const{prefixCls:o,component:s="article",className:c,rootClassName:d,setContentRef:p,children:v,direction:m,style:E}=e,C=lDe(e,["prefixCls","component","className","rootClassName","setContentRef","children","direction","style"]),{getPrefixCls:b,direction:R,typography:w}=S.useContext(Qn),I=m??R;let O=r;p&&(O=vc(r,p));const x=b("typography",o),[P,N,L]=nJ(x),M=He(x,w==null?void 0:w.className,{[`${x}-rtl`]:I==="rtl"},c,d,N,L),j=Object.assign(Object.assign({},w==null?void 0:w.style),E);return P(S.createElement(s,Object.assign({className:M,style:j,ref:O},C),v))}),rJ=uDe;var dDe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"}}]},name:"copy",theme:"outlined"};const hDe=dDe;var pDe=function(r,o){return S.createElement(ro,Je({},r,{ref:o,icon:hDe}))},fDe=S.forwardRef(pDe);const mDe=fDe;function E9(e){return e===!1?[!1,!1]:Array.isArray(e)?e:[e]}function oy(e,r,o){return e===!0||e===void 0?r:e||o&&r}const gDe=e=>{const{prefixCls:r,copied:o,locale:s,iconOnly:c,tooltips:d,icon:p,loading:v,tabIndex:m,onCopy:E}=e,C=E9(d),b=E9(p),{copied:R,copy:w}=s??{},I=o?oy(C[1],R):oy(C[0],w),x=typeof I=="string"?I:o?R:w;return S.createElement(zv,{key:"copy",title:I},S.createElement(tJ,{className:He(`${r}-copy`,{[`${r}-copy-success`]:o,[`${r}-copy-icon-only`]:c}),onClick:E,"aria-label":x,tabIndex:m},o?oy(b[1],S.createElement(QY,null),!0):oy(b[0],v?S.createElement(Fb,null):S.createElement(mDe,null),!0)))},vDe=gDe,ay=S.forwardRef((e,r)=>{let{style:o,children:s}=e;const c=S.useRef(null);return S.useImperativeHandle(r,()=>({isExceed:()=>{const d=c.current;return d.scrollHeight>d.clientHeight},getHeight:()=>c.current.clientHeight})),S.createElement("span",{"aria-hidden":!0,ref:c,style:Object.assign({position:"fixed",display:"block",left:0,top:0,pointerEvents:"none",backgroundColor:"rgba(255, 0, 0, 0.65)"},o)},s)});function iJ(e){const r=typeof e;return r==="string"||r==="number"}function EDe(e){let r=0;return e.forEach(o=>{iJ(o)?r+=String(o).length:r+=1}),r}function _9(e,r){let o=0;const s=[];for(let c=0;c<e.length;c+=1){if(o===r)return s;const d=e[c],v=iJ(d)?String(d).length:1,m=o+v;if(m>r){const E=r-o;return s.push(String(d).slice(0,E)),s}s.push(d),o=m}return e}const rO=0,iO=1,oO=2,S9=3,sy={display:"-webkit-box",overflow:"hidden",WebkitBoxOrient:"vertical"};function _De(e){const{enableMeasure:r,width:o,text:s,children:c,rows:d,expanded:p,miscDeps:v,onEllipsis:m}=e,E=S.useMemo(()=>Jc(s),[s]),C=S.useMemo(()=>EDe(E),[s]),b=S.useMemo(()=>c(E,!1),[s]),[R,w]=S.useState(null),I=S.useRef(null),O=S.useRef(null),x=S.useRef(null),P=S.useRef(null),[N,L]=S.useState(!1),[M,j]=S.useState(rO),[$,H]=S.useState(0);kr(()=>{j(r&&o&&C?iO:rO)},[o,s,d,r,E]),kr(()=>{var J,re,Z,Q;if(M===iO){const he=!!(!((J=O.current)===null||J===void 0)&&J.isExceed());j(he?oO:S9),w(he?[0,C]:null),L(he);const oe=((re=O.current)===null||re===void 0?void 0:re.getHeight())||0,ae=d===1?0:((Z=x.current)===null||Z===void 0?void 0:Z.getHeight())||0,te=((Q=P.current)===null||Q===void 0?void 0:Q.getHeight())||0,de=ae+te,fe=Math.max(oe,de);H(fe+1),m(he)}},[M]);const G=R?Math.ceil((R[0]+R[1])/2):0;kr(()=>{var J;const[re,Z]=R||[0,0];if(re!==Z){const he=(((J=I.current)===null||J===void 0?void 0:J.getHeight())||0)>$;let oe=G;Z-re===1&&(oe=he?re:Z),w(he?[re,oe]:[oe,Z])}},[R,G]);const Y=S.useMemo(()=>{if(M!==oO||!R||R[0]!==R[1]){const J=c(E,!1);return M!==S9&&M!==rO?S.createElement("span",{style:Object.assign(Object.assign({},sy),{WebkitLineClamp:d})},J):J}return c(p?E:_9(E,R[0]),N)},[p,M,R,E].concat(_t(v))),q={width:o,whiteSpace:"normal",margin:0,padding:0};return S.createElement(S.Fragment,null,Y,M===iO&&S.createElement(S.Fragment,null,S.createElement(ay,{style:Object.assign(Object.assign(Object.assign({},q),sy),{WebkitLineClamp:d}),ref:O},b),S.createElement(ay,{style:Object.assign(Object.assign(Object.assign({},q),sy),{WebkitLineClamp:d-1}),ref:x},b),S.createElement(ay,{style:Object.assign(Object.assign(Object.assign({},q),sy),{WebkitLineClamp:1}),ref:P},c([],!0))),M===oO&&R&&R[0]!==R[1]&&S.createElement(ay,{style:Object.assign(Object.assign({},q),{top:400}),ref:I},c(_9(E,G),!0)))}const SDe=e=>{let{enableEllipsis:r,isEllipsis:o,children:s,tooltipProps:c}=e;return!(c!=null&&c.title)||!r?s:S.createElement(zv,Object.assign({open:o?void 0:!1},c),s)},yDe=SDe;var CDe=globalThis&&globalThis.__rest||function(e,r){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};function bDe(e,r){let{mark:o,code:s,underline:c,delete:d,strong:p,keyboard:v,italic:m}=e,E=r;function C(b,R){R&&(E=S.createElement(b,{},E))}return C("strong",p),C("u",c),C("del",d),C("code",s),C("mark",o),C("kbd",v),C("i",m),E}const TDe="...",RDe=S.forwardRef((e,r)=>{var o,s,c;const{prefixCls:d,className:p,style:v,type:m,disabled:E,children:C,ellipsis:b,editable:R,copyable:w,component:I,title:O}=e,x=CDe(e,["prefixCls","className","style","type","disabled","children","ellipsis","editable","copyable","component","title"]),{getPrefixCls:P,direction:N}=S.useContext(Qn),[L]=Nb("Text"),M=S.useRef(null),j=S.useRef(null),$=P("typography",d),H=Sa(x,["mark","code","delete","underline","strong","keyboard","italic"]),[G,Y]=nO(R),[q,J]=va(!1,{value:Y.editing}),{triggerType:re=["icon"]}=Y,Z=mt=>{var Nt;mt&&((Nt=Y.onStart)===null||Nt===void 0||Nt.call(Y)),J(mt)},Q=cDe(q);aDe(()=>{var mt;!q&&Q&&((mt=j.current)===null||mt===void 0||mt.focus())},[q]);const he=mt=>{mt==null||mt.preventDefault(),Z(!0)},oe=mt=>{var Nt;(Nt=Y.onChange)===null||Nt===void 0||Nt.call(Y,mt),Z(!1)},ae=()=>{var mt;(mt=Y.onCancel)===null||mt===void 0||mt.call(Y),Z(!1)},[te,de]=nO(w),{copied:fe,copyLoading:ie,onClick:le}=iDe({copyConfig:de,children:C}),[ve,ge]=S.useState(!1),[Te,we]=S.useState(!1),[Ie,Me]=S.useState(!1),[Ke,ke]=S.useState(!1),[Ne,ze]=S.useState(!0),[Qe,De]=nO(b,{expandable:!1,symbol:mt=>mt?L==null?void 0:L.collapse:L==null?void 0:L.expand}),[xe,ft]=va(De.defaultExpanded||!1,{value:De.expanded}),Et=Qe&&(!xe||De.expandable==="collapsible"),{rows:st=1}=De,ot=S.useMemo(()=>Et&&(De.suffix!==void 0||De.onEllipsis||De.expandable||G||te),[Et,De,G,te]);kr(()=>{Qe&&!ot&&(ge(t7("webkitLineClamp")),we(t7("textOverflow")))},[ot,Qe]);const[Ze,je]=S.useState(Et),ct=S.useMemo(()=>ot?!1:st===1?Te:ve,[ot,Te,ve]);kr(()=>{je(ct&&Et)},[ct,Et]);const lt=Et&&(Ze?Ke:Ie),gt=Et&&st===1&&Ze,Ot=Et&&st>1&&Ze,Tt=(mt,Nt)=>{var Sn;ft(Nt.expanded),(Sn=De.onExpand)===null||Sn===void 0||Sn.call(De,mt,Nt)},[Wt,on]=S.useState(0),xt=mt=>{let{offsetWidth:Nt}=mt;on(Nt)},wt=mt=>{var Nt;Me(mt),Ie!==mt&&((Nt=De.onEllipsis)===null||Nt===void 0||Nt.call(De,mt))};S.useEffect(()=>{const mt=M.current;if(Qe&&Ze&&mt){const Nt=Ot?mt.offsetHeight<mt.scrollHeight:mt.offsetWidth<mt.scrollWidth;Ke!==Nt&&ke(Nt)}},[Qe,Ze,C,Ot,Ne,Wt]),S.useEffect(()=>{const mt=M.current;if(typeof IntersectionObserver>"u"||!mt||!Ze||!Et)return;const Nt=new IntersectionObserver(()=>{ze(!!mt.offsetParent)});return Nt.observe(mt),()=>{Nt.disconnect()}},[Ze,Et]);let Pt={};De.tooltip===!0?Pt={title:(o=Y.text)!==null&&o!==void 0?o:C}:S.isValidElement(De.tooltip)?Pt={title:De.tooltip}:typeof De.tooltip=="object"?Pt=Object.assign({title:(s=Y.text)!==null&&s!==void 0?s:C},De.tooltip):Pt={title:De.tooltip};const Kt=S.useMemo(()=>{const mt=Nt=>["string","number"].includes(typeof Nt);if(!(!Qe||Ze)){if(mt(Y.text))return Y.text;if(mt(C))return C;if(mt(O))return O;if(mt(Pt.title))return Pt.title}},[Qe,Ze,O,Pt.title,lt]);if(q)return S.createElement(qNe,{value:(c=Y.text)!==null&&c!==void 0?c:typeof C=="string"?C:"",onSave:oe,onCancel:ae,onEnd:Y.onEnd,prefixCls:$,className:p,style:v,direction:N,component:I,maxLength:Y.maxLength,autoSize:Y.autoSize,enterIcon:Y.enterIcon});const fn=()=>{const{expandable:mt,symbol:Nt}=De;return!mt||xe&&mt!=="collapsible"?null:S.createElement("a",{key:"expand",className:`${$}-${xe?"collapse":"expand"}`,onClick:Sn=>Tt(Sn,{expanded:!xe}),"aria-label":xe?L.collapse:L==null?void 0:L.expand},typeof Nt=="function"?Nt(xe):Nt)},mn=()=>{if(!G)return;const{icon:mt,tooltip:Nt,tabIndex:Sn}=Y,ur=Jc(Nt)[0]||(L==null?void 0:L.edit),Br=typeof ur=="string"?ur:"";return re.includes("icon")?S.createElement(zv,{key:"edit",title:Nt===!1?"":ur},S.createElement(tJ,{ref:j,className:`${$}-edit`,onClick:he,"aria-label":Br,tabIndex:Sn},mt||S.createElement(DNe,{role:"button"}))):null},Un=()=>te?S.createElement(vDe,Object.assign({key:"copy"},de,{prefixCls:$,copied:fe,locale:L,onCopy:le,loading:ie,iconOnly:C==null})):null,Kn=mt=>[mt&&fn(),mn(),Un()],qn=mt=>[mt&&!xe&&S.createElement("span",{"aria-hidden":!0,key:"ellipsis"},TDe),De.suffix,Kn(mt)];return S.createElement(yu,{onResize:xt,disabled:!Et},mt=>S.createElement(yDe,{tooltipProps:Pt,enableEllipsis:Et,isEllipsis:lt},S.createElement(rJ,Object.assign({className:He({[`${$}-${m}`]:m,[`${$}-disabled`]:E,[`${$}-ellipsis`]:Qe,[`${$}-single-line`]:Et&&st===1&&!xe,[`${$}-ellipsis-single-line`]:gt,[`${$}-ellipsis-multiple-line`]:Ot},p),prefixCls:d,style:Object.assign(Object.assign({},v),{WebkitLineClamp:Ot?st:void 0}),component:I,ref:vc(mt,M,r),direction:N,onClick:re.includes("text")?he:void 0,"aria-label":Kt==null?void 0:Kt.toString(),title:O},H),S.createElement(_De,{enableMeasure:Et&&!Ze,text:C,rows:st,width:Wt,onEllipsis:wt,expanded:xe,miscDeps:[fe,xe,ie,G,te]},(Nt,Sn)=>bDe(e,S.createElement(S.Fragment,null,Nt.length>0&&Sn&&!xe&&Kt?S.createElement("span",{key:"show-content","aria-hidden":!0},Nt):Nt,qn(Sn)))))))}),Jb=RDe;var wDe=globalThis&&globalThis.__rest||function(e,r){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};const IDe=S.forwardRef((e,r)=>{var{ellipsis:o,rel:s}=e,c=wDe(e,["ellipsis","rel"]);const d=Object.assign(Object.assign({},c),{rel:s===void 0&&c.target==="_blank"?"noopener noreferrer":s});return delete d.navigate,S.createElement(Jb,Object.assign({},d,{ref:r,ellipsis:!!o,component:"a"}))}),ADe=IDe,ODe=S.forwardRef((e,r)=>S.createElement(Jb,Object.assign({ref:r},e,{component:"div"}))),xDe=ODe;var NDe=globalThis&&globalThis.__rest||function(e,r){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};const DDe=(e,r)=>{var{ellipsis:o}=e,s=NDe(e,["ellipsis"]);const c=S.useMemo(()=>o&&typeof o=="object"?Sa(o,["expandable","rows"]):o,[o]);return S.createElement(Jb,Object.assign({ref:r},s,{ellipsis:c,component:"span"}))},PDe=S.forwardRef(DDe);var LDe=globalThis&&globalThis.__rest||function(e,r){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};const kDe=[1,2,3,4,5],MDe=S.forwardRef((e,r)=>{const{level:o=1}=e,s=LDe(e,["level"]);let c;return kDe.includes(o)?c=`h${o}`:c="h1",S.createElement(Jb,Object.assign({ref:r},s,{component:c}))}),FDe=MDe,qv=rJ;qv.Text=PDe;qv.Link=ADe;qv.Title=FDe;qv.Paragraph=xDe;const jo=qv;function oJ(e){var r,o,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e))for(r=0;r<e.length;r++)e[r]&&(o=oJ(e[r]))&&(s&&(s+=" "),s+=o);else for(r in e)e[r]&&(s&&(s+=" "),s+=r);return s}function i2(){for(var e,r,o=0,s="";o<arguments.length;)(e=arguments[o++])&&(r=oJ(e))&&(s&&(s+=" "),s+=r);return s}const UDe=S.forwardRef(({className:e,children:r},o)=>se.jsx("div",{className:i2(e,"b-1 b-solid b-coolgray-6 rd of-hidden relative"),ref:o,style:{width:288,height:216},children:r})),uc=Object.assign(S.forwardRef(({className:e,children:r},o)=>se.jsx("div",{className:i2(e,"flex-1 p-10 p-t-4 flex gap-5"),ref:o,children:r})),{Item:UDe}),ji=({children:e})=>se.jsx("div",{className:"h-screen flex flex-col",children:e}),Eu=({children:e})=>se.jsx("samp",{className:"z-2 inline-flex items-center gap-1 absolute bottom-0 bg-black c-white px-1 text-sm",children:e}),cy=14,ly=8,aO=8,sO=4;function BDe({volumeLevel:e=0,noise:r=.075,...o}){const[s,c]=S.useState(0);return S.useEffect(()=>{if(e&&r){const d=Math.max(0,Math.min(1,r)),p=setInterval(()=>{c(e+Math.random()*d*(Math.random()>.5?1:-1))},50);return()=>clearInterval(p)}},[e,r]),se.jsxs("svg",{fill:"none",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",...o,children:[se.jsx("defs",{children:se.jsx("clipPath",{id:"icon-mic-v-clip",children:se.jsx("rect",{height:cy,rx:ly/2,width:ly,x:aO,y:sO})})}),se.jsx("path",{d:"M0 0h24v24H0z",fill:"#999CA3",opacity:".01"}),se.jsx("rect",{clipPath:"url(#icon-mic-v-clip)",fill:"#fff",height:cy,width:ly,x:aO,y:sO}),se.jsx("path",{d:"M4 16.625h2v-1.25H4v1.25Zm6 4h4v-1.25h-4v1.25Zm8-4h2v-1.25h-2v1.25Zm-4 4A4.625 4.625 0 0 0 18.625 16h-1.25A3.375 3.375 0 0 1 14 19.375v1.25ZM5.375 16A4.625 4.625 0 0 0 10 20.625v-1.25A3.375 3.375 0 0 1 6.625 16h-1.25Z",fill:"#fff"}),se.jsx("g",{clipPath:"url(#icon-mic-v-clip)",children:se.jsx("rect",{fill:"#44AD00",height:cy*2,style:{transform:`translateY(${(1-s)*cy}px)`,transition:"transform .1s"},width:ly,x:aO,y:sO})})]})}const VDe=S.memo(function(r){return se.jsxs("svg",{fill:"none",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",...r,children:[se.jsx("path",{d:"m5 5 14 14",stroke:"rgb(225, 225, 225, 0.35)",strokeLinejoin:"round",strokeWidth:"1.25"}),se.jsx("path",{clipRule:"evenodd",d:"M19.277 16.625H20v-1.25h-1.973l1.25 1.25Zm-3.239 2.065.89.89a4.602 4.602 0 0 1-2.716 1.04l-.212.005h-4a4.626 4.626 0 0 1-4.55-3.787l-.033-.213H4v-1.25h2c.345 0 .625.28.625.625a3.375 3.375 0 0 0 3.19 3.37l.185.005h4a3.36 3.36 0 0 0 2.038-.685Zm.587-4.717V8a4.625 4.625 0 0 0-8.5-2.526l.911.91a3.374 3.374 0 0 1 6.281.991H14v1.25h1.375v.75H14v1.25h1.375v.75h-1.348l1.25 1.25h.098v.098l1.25 1.25Zm-2.587 2.717.89.89A4.625 4.625 0 0 1 7.375 14v-3.973l1.25 1.25v.098h.098l1.25 1.25H8.625V14a3.375 3.375 0 0 0 5.413 2.69Z",fill:"rgb(225, 225, 225, 0.35)",fillRule:"evenodd"})]})}),jDe=S.memo(function(r){return se.jsxs("svg",{fill:"none",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",...r,children:[se.jsx("circle",{cx:"12",cy:"11",r:"7",stroke:"#fff",strokeLinejoin:"round",strokeWidth:"1.25"}),se.jsx("circle",{cx:"12",cy:"11",r:"3",stroke:"#fff",strokeLinejoin:"round",strokeWidth:"1.25"}),se.jsx("circle",{cx:"14.625",cy:"6.625",fill:"#fff",r:".625"}),se.jsx("path",{d:"M7 18.25a8.004 8.004 0 0 0 10 0",stroke:"#fff",strokeLinejoin:"round",strokeWidth:"1.25"})]})}),$De=S.memo(function(r){return se.jsxs("svg",{fill:"none",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",...r,children:[se.jsx("path",{d:"m5 5 14 14",stroke:"rgb(225, 225, 225, 0.35)",strokeLinejoin:"round",strokeWidth:"1.25"}),se.jsx("path",{clipRule:"evenodd",d:"m15.72 18.373.91.909a8.63 8.63 0 0 1-9.788-.364l-.232-.18.78-.976a7.38 7.38 0 0 0 8.33.61Zm2.434-2.87A7.625 7.625 0 0 0 7.497 4.846l.897.896a6.375 6.375 0 0 1 8.864 8.864l.896.897Zm-3.857 1.446.952.951A7.625 7.625 0 0 1 5.1 7.751l.951.952a6.375 6.375 0 0 0 8.246 8.246Zm.956-4.348a3.625 3.625 0 0 0-4.854-4.854l.964.964a2.378 2.378 0 0 1 2.926 2.926l.964.964Zm-.628-5.351a.625.625 0 1 0 0-1.25.625.625 0 0 0 0 1.25Z",fill:"rgb(225, 225, 225, 0.35)",fillRule:"evenodd"})]})});function HDe({track:e,deviceId:r,...o}){const s=zC(e);return S.useEffect(()=>{s&&r!=null&&s.setDevice(r).catch(console.warn)},[r,s]),se.jsx(KC,{track:e,...o})}function WDe({track:e,deviceId:r,videoPlayerConfig:o,...s}){const c=zC(e);return S.useEffect(()=>{c&&r!=null&&c.setDevice(r).catch(console.warn)},[r,c]),se.jsx(Lv,{track:e,videoPlayerConfig:o,...s})}function o2({micOn:e,cameraOn:r,audioTrack:o,videoTrack:s,playAudio:c=!1,playVideo:d,micDeviceId:p,cameraDeviceId:v,volume:m,cover:E,children:C,videoPlayerConfig:b,style:R,...w}){const I=wm(qC,R);return d=d??!!r,c=c??!!e,se.jsxs("div",{...w,style:I,children:[se.jsx(WDe,{deviceId:v,disabled:!r,play:d,track:s,videoPlayerConfig:b}),se.jsx(HDe,{deviceId:p,disabled:!e,play:c,track:o,volume:m}),E&&!r&&se.jsx(YC,{cover:E}),se.jsx("div",{style:Pv,children:C})]})}function Yv({track:e,playVideo:r,cover:o,client:s,style:c,children:d,videoPlayerConfig:p,...v}){var b,R;const m=wm(qC,c),C=(R=(b=Os(s).remoteUsers)==null?void 0:b.find(w=>w.uid===(e==null?void 0:e.getUserId())))==null?void 0:R.hasVideo;return r=r??C,se.jsxs("div",{...v,style:m,children:[se.jsx(uD,{play:r,track:e,videoPlayerConfig:p}),o&&!r&&se.jsx(YC,{cover:o}),se.jsx("div",{style:Pv,children:d})]})}const a2=({published:e,total:r})=>se.jsx("div",{className:"p-4 text-xl",children:se.jsxs("span",{className:"inline-flex items-center gap-1 py-2 px-3 rd b-1 b-solid",children:[se.jsx("i",{className:"i-lucide-users"}),se.jsxs("samp",{className:"text-base",children:[e,"/",r]})]})});var s2={exports:{}};s2.exports;(function(e){(function(r,o,s){function c(m){var E=this,C=v();E.next=function(){var b=2091639*E.s0+E.c*23283064365386963e-26;return E.s0=E.s1,E.s1=E.s2,E.s2=b-(E.c=b|0)},E.c=1,E.s0=C(" "),E.s1=C(" "),E.s2=C(" "),E.s0-=C(m),E.s0<0&&(E.s0+=1),E.s1-=C(m),E.s1<0&&(E.s1+=1),E.s2-=C(m),E.s2<0&&(E.s2+=1),C=null}function d(m,E){return E.c=m.c,E.s0=m.s0,E.s1=m.s1,E.s2=m.s2,E}function p(m,E){var C=new c(m),b=E&&E.state,R=C.next;return R.int32=function(){return C.next()*4294967296|0},R.double=function(){return R()+(R()*2097152|0)*11102230246251565e-32},R.quick=R,b&&(typeof b=="object"&&d(b,C),R.state=function(){return d(C,{})}),R}function v(){var m=4022871197,E=function(C){C=String(C);for(var b=0;b<C.length;b++){m+=C.charCodeAt(b);var R=.02519603282416938*m;m=R>>>0,R-=m,R*=m,m=R>>>0,R-=m,m+=R*4294967296}return(m>>>0)*23283064365386963e-26};return E}o&&o.exports?o.exports=p:s&&s.amd?s(function(){return p}):this.alea=p})(In,e,!1)})(s2);var zDe=s2.exports,c2={exports:{}};c2.exports;(function(e){(function(r,o,s){function c(v){var m=this,E="";m.x=0,m.y=0,m.z=0,m.w=0,m.next=function(){var b=m.x^m.x<<11;return m.x=m.y,m.y=m.z,m.z=m.w,m.w^=m.w>>>19^b^b>>>8},v===(v|0)?m.x=v:E+=v;for(var C=0;C<E.length+64;C++)m.x^=E.charCodeAt(C)|0,m.next()}function d(v,m){return m.x=v.x,m.y=v.y,m.z=v.z,m.w=v.w,m}function p(v,m){var E=new c(v),C=m&&m.state,b=function(){return(E.next()>>>0)/4294967296};return b.double=function(){do var R=E.next()>>>11,w=(E.next()>>>0)/4294967296,I=(R+w)/(1<<21);while(I===0);return I},b.int32=E.next,b.quick=b,C&&(typeof C=="object"&&d(C,E),b.state=function(){return d(E,{})}),b}o&&o.exports?o.exports=p:s&&s.amd?s(function(){return p}):this.xor128=p})(In,e,!1)})(c2);var GDe=c2.exports,l2={exports:{}};l2.exports;(function(e){(function(r,o,s){function c(v){var m=this,E="";m.next=function(){var b=m.x^m.x>>>2;return m.x=m.y,m.y=m.z,m.z=m.w,m.w=m.v,(m.d=m.d+362437|0)+(m.v=m.v^m.v<<4^(b^b<<1))|0},m.x=0,m.y=0,m.z=0,m.w=0,m.v=0,v===(v|0)?m.x=v:E+=v;for(var C=0;C<E.length+64;C++)m.x^=E.charCodeAt(C)|0,C==E.length&&(m.d=m.x<<10^m.x>>>4),m.next()}function d(v,m){return m.x=v.x,m.y=v.y,m.z=v.z,m.w=v.w,m.v=v.v,m.d=v.d,m}function p(v,m){var E=new c(v),C=m&&m.state,b=function(){return(E.next()>>>0)/4294967296};return b.double=function(){do var R=E.next()>>>11,w=(E.next()>>>0)/4294967296,I=(R+w)/(1<<21);while(I===0);return I},b.int32=E.next,b.quick=b,C&&(typeof C=="object"&&d(C,E),b.state=function(){return d(E,{})}),b}o&&o.exports?o.exports=p:s&&s.amd?s(function(){return p}):this.xorwow=p})(In,e,!1)})(l2);var KDe=l2.exports,u2={exports:{}};u2.exports;(function(e){(function(r,o,s){function c(v){var m=this;m.next=function(){var C=m.x,b=m.i,R,w;return R=C[b],R^=R>>>7,w=R^R<<24,R=C[b+1&7],w^=R^R>>>10,R=C[b+3&7],w^=R^R>>>3,R=C[b+4&7],w^=R^R<<7,R=C[b+7&7],R=R^R<<13,w^=R^R<<9,C[b]=w,m.i=b+1&7,w};function E(C,b){var R,w=[];if(b===(b|0))w[0]=b;else for(b=""+b,R=0;R<b.length;++R)w[R&7]=w[R&7]<<15^b.charCodeAt(R)+w[R+1&7]<<13;for(;w.length<8;)w.push(0);for(R=0;R<8&&w[R]===0;++R);for(R==8?w[7]=-1:w[R],C.x=w,C.i=0,R=256;R>0;--R)C.next()}E(m,v)}function d(v,m){return m.x=v.x.slice(),m.i=v.i,m}function p(v,m){v==null&&(v=+new Date);var E=new c(v),C=m&&m.state,b=function(){return(E.next()>>>0)/4294967296};return b.double=function(){do var R=E.next()>>>11,w=(E.next()>>>0)/4294967296,I=(R+w)/(1<<21);while(I===0);return I},b.int32=E.next,b.quick=b,C&&(C.x&&d(C,E),b.state=function(){return d(E,{})}),b}o&&o.exports?o.exports=p:s&&s.amd?s(function(){return p}):this.xorshift7=p})(In,e,!1)})(u2);var qDe=u2.exports,d2={exports:{}};d2.exports;(function(e){(function(r,o,s){function c(v){var m=this;m.next=function(){var C=m.w,b=m.X,R=m.i,w,I;return m.w=C=C+1640531527|0,I=b[R+34&127],w=b[R=R+1&127],I^=I<<13,w^=w<<17,I^=I>>>15,w^=w>>>12,I=b[R]=I^w,m.i=R,I+(C^C>>>16)|0};function E(C,b){var R,w,I,O,x,P=[],N=128;for(b===(b|0)?(w=b,b=null):(b=b+"\0",w=0,N=Math.max(N,b.length)),I=0,O=-32;O<N;++O)b&&(w^=b.charCodeAt((O+32)%b.length)),O===0&&(x=w),w^=w<<10,w^=w>>>15,w^=w<<4,w^=w>>>13,O>=0&&(x=x+1640531527|0,R=P[O&127]^=w+x,I=R==0?I+1:0);for(I>=128&&(P[(b&&b.length||0)&127]=-1),I=127,O=4*128;O>0;--O)w=P[I+34&127],R=P[I=I+1&127],w^=w<<13,R^=R<<17,w^=w>>>15,R^=R>>>12,P[I]=w^R;C.w=x,C.X=P,C.i=I}E(m,v)}function d(v,m){return m.i=v.i,m.w=v.w,m.X=v.X.slice(),m}function p(v,m){v==null&&(v=+new Date);var E=new c(v),C=m&&m.state,b=function(){return(E.next()>>>0)/4294967296};return b.double=function(){do var R=E.next()>>>11,w=(E.next()>>>0)/4294967296,I=(R+w)/(1<<21);while(I===0);return I},b.int32=E.next,b.quick=b,C&&(C.X&&d(C,E),b.state=function(){return d(E,{})}),b}o&&o.exports?o.exports=p:s&&s.amd?s(function(){return p}):this.xor4096=p})(In,e,!1)})(d2);var YDe=d2.exports,h2={exports:{}};h2.exports;(function(e){(function(r,o,s){function c(v){var m=this,E="";m.next=function(){var b=m.b,R=m.c,w=m.d,I=m.a;return b=b<<25^b>>>7^R,R=R-w|0,w=w<<24^w>>>8^I,I=I-b|0,m.b=b=b<<20^b>>>12^R,m.c=R=R-w|0,m.d=w<<16^R>>>16^I,m.a=I-b|0},m.a=0,m.b=0,m.c=-1640531527,m.d=1367130551,v===Math.floor(v)?(m.a=v/4294967296|0,m.b=v|0):E+=v;for(var C=0;C<E.length+20;C++)m.b^=E.charCodeAt(C)|0,m.next()}function d(v,m){return m.a=v.a,m.b=v.b,m.c=v.c,m.d=v.d,m}function p(v,m){var E=new c(v),C=m&&m.state,b=function(){return(E.next()>>>0)/4294967296};return b.double=function(){do var R=E.next()>>>11,w=(E.next()>>>0)/4294967296,I=(R+w)/(1<<21);while(I===0);return I},b.int32=E.next,b.quick=b,C&&(typeof C=="object"&&d(C,E),b.state=function(){return d(E,{})}),b}o&&o.exports?o.exports=p:s&&s.amd?s(function(){return p}):this.tychei=p})(In,e,!1)})(h2);var XDe=h2.exports,aJ={exports:{}};(function(e){(function(r,o,s){var c=256,d=6,p=52,v="random",m=s.pow(c,d),E=s.pow(2,p),C=E*2,b=c-1,R;function w(M,j,$){var H=[];j=j==!0?{entropy:!0}:j||{};var G=P(x(j.entropy?[M,L(o)]:M??N(),3),H),Y=new I(H),q=function(){for(var J=Y.g(d),re=m,Z=0;J<E;)J=(J+Z)*c,re*=c,Z=Y.g(1);for(;J>=C;)J/=2,re/=2,Z>>>=1;return(J+Z)/re};return q.int32=function(){return Y.g(4)|0},q.quick=function(){return Y.g(4)/4294967296},q.double=q,P(L(Y.S),o),(j.pass||$||function(J,re,Z,Q){return Q&&(Q.S&&O(Q,Y),J.state=function(){return O(Y,{})}),Z?(s[v]=J,re):J})(q,G,"global"in j?j.global:this==s,j.state)}function I(M){var j,$=M.length,H=this,G=0,Y=H.i=H.j=0,q=H.S=[];for($||(M=[$++]);G<c;)q[G]=G++;for(G=0;G<c;G++)q[G]=q[Y=b&Y+M[G%$]+(j=q[G])],q[Y]=j;(H.g=function(J){for(var re,Z=0,Q=H.i,he=H.j,oe=H.S;J--;)re=oe[Q=b&Q+1],Z=Z*c+oe[b&(oe[Q]=oe[he=b&he+re])+(oe[he]=re)];return H.i=Q,H.j=he,Z})(c)}function O(M,j){return j.i=M.i,j.j=M.j,j.S=M.S.slice(),j}function x(M,j){var $=[],H=typeof M,G;if(j&&H=="object")for(G in M)try{$.push(x(M[G],j-1))}catch{}return $.length?$:H=="string"?M:M+"\0"}function P(M,j){for(var $=M+"",H,G=0;G<$.length;)j[b&G]=b&(H^=j[b&G]*19)+$.charCodeAt(G++);return L(j)}function N(){try{var M;return R&&(M=R.randomBytes)||(M=new Uint8Array(c),(r.crypto||r.msCrypto).getRandomValues(M)),L(M)}catch{var j=r.navigator,$=j&&j.plugins;return[+new Date,r,$,r.screen,L(o)]}}function L(M){return String.fromCharCode.apply(0,M)}P(s.random(),o),e.exports?e.exports=w:s["seed"+v]=w})(typeof self<"u"?self:In,[],Math)})(aJ);var JDe=aJ.exports,QDe=zDe,ZDe=GDe,ePe=KDe,tPe=qDe,nPe=YDe,rPe=XDe,hp=JDe;hp.alea=QDe;hp.xor128=ZDe;hp.xorwow=ePe;hp.xorshift7=tPe;hp.xor4096=nPe;hp.tychei=rPe;var iPe=hp;const sJ=Ld(iPe);let cJ=sJ();function oPe(){return cJ()}function y9(e){cJ=sJ(e)}function lJ(e,r){const o=Array.isArray(e)?()=>aPe(e):e;return(r==null?void 0:r.length)===void 0?o(0):Array.from({length:r.length},(s,c)=>o(c))}function aPe(e){return e[Math.floor(oPe()*e.length)]}function sPe(e,r){return lJ(e,r)}var C9={withAccents:{male:["Adrián","Ægir","Álvaro","André","Andrés","Árni","Asbjørn","Björn","César","Daníel","Davíð","Emílio","Fañch","François","František","Gísli","Götz","Guðjón","Guðmundur","Günter","Halldór","Hans-Jörg","Hans-Jürgen","Hüseyin","Iñaki","János","Jesús","Jiří","Jóhann","Jóhannes","Jokūbas","Jón","José","Jörn","Julião","Jürgen","Kristján","Maël","Magnús","Mathéo","Mátyás","Michał","Noël","Nuñez","Ólafur","Óscar","Øyvind","Páll","Paweł","Pétur","Ramón","Raúl","René","Ruairí","Rubén","Seán","Sérgio","Sigurður","Sönke","Stefán","Tomáš","Þorsteinn"],female:["Ædel","Agnès","Alícia","Änne","Antónia","Ásta","Auður","Cäcilia","Chloë","Claúdia","Dörte","Elín","Elísabet","Eliška","Františka","Glória","Grażyna","Guðbjörg","Guðný","Guðrún","Henriëtte","Ingibjörg","Íris","Jóhanna","Jóna","Júlia","Käte","Katrín","Kolbrún","Kristín","KŠthe","Letícia","Lídia","Lúcia","Małgorzata","Margrét","María","Mónica","Natália","Ólöf","Patrícia","Ragnheiður","Renée","Ružena","Siân","Sigríður","Sigrún","Sílvia","Sørina","Věra","Virgínia","Zoë","Þóra","Þórunn"]},withoutAccents:{male:["Abdul","Abdullahi","Abubakar","Adam","Adamu","Adiy","Ahmad","Ajay","Akira","Alan","Alberto","Alejandro","Aleksander","Aleksandr","Aleksey","Alex","Alexander","Alexey","Ali","Aliyu","Aminu","Amit","Amiyr","Amiyt","Amnuai","Amphon","Anah","Anan","Andreas","Andrew","Andrey","Andri","Andries","Andrzej","Anil","Anthony","Anton","Antonio","Arnar","Artur","Artyom","Arun","Ashok","Atli","Avraham","Bartosz","Bello","Bernd","Bin","Birgir","Bjarni","Blessing","Bongani","Brian","Bunmi","Carlos","Carol","Chan","Chao","Charles","Charoen","Chen","Cheng","Christian","Christopher","Colin","Daniel","Daniyel","Dariusz","David","Denis","Dennis","Diego","Dieter","Dilip","Dinesh","Dmitriy","Dmitry","Einar","Eliyahu","Emmanuel","Evgeniy","Fernando","Fran","Francis","Francisco","Francisco-Javier","Frank","Franz","Gang","Gareth","Gary","George","Gerhard","Graham","Grzegorz","Gunnar","Guy","Haim","Haiyan","Hans","Hans-Ulrich","Haruna","Hassan","Heike","Heinz","Helgi","Helmut","Hendrik","Herbert","Hideo","Hiromi","Hiroshi","Hong","Horst","Hui","Ian","Ibrahim","Idris","Igor","Ilya","Isa","Isaac","Isah","Ivan","Jabulani","Jacek","Jacobus","Jakub","James","Jan","Janusz","Javier","Jean","Jerzy","Jesus","Jason","Jianguo","Jianhua","Jianjun","Jianping","Jin","Joan","Johan","Johannes","John","Jonathan","Jorge","Jose","Jose-Antonio","Jose-Luis","Jose-Manuel","Jose-Maria","Josef","Joseph","Joyce","Juan","Kabiru","Kai","Kamil","Karen","Karl","Karl-Heinz","Katsumi","Kazuo","Kelvin","Kenji","Kenneth","Kevin","Kiran","Kirill","Kiyoshi","Kjartan","Klaus","Ko","Koichi","Koji","Konstantin","Koshi","Krishna","Kristinn","Krzysztof","Kun","Lakshmi","Lan","Laxmi","Lei","Li","Lihua","Lijun","Lilian","Lin","Ling","Liping","Liyor","Luis","Lukasz","Maciej","Mahmood","Maksim","Manfred","Manoj","Manuel","Marcin","Mardkhay","Marek","Mariusz","Mark","Martin","Masami","Masao","Mateusz","Matt","Matthew","Meiyr","Michael","Michal","Miguel","Miguel-Angel","Mikhail","Min","Ming","Mitsuo","Miykhael","Miykhal","Mo","Mohamed","Mohammad","Mohammed","Mohan","Moses","Moshe","Mpho","Muhammad","Muhammed","Mukesh","Musa","Narong","Nathan","Nicola","Nikita","Nikolay","Ning","Nkosinathi","Noam","Oleg","Omer","Otieno","Pablo","Patrick","Paul","Pavel","Pawel","Pedro","Peng","Peter","Petrus","Philip","Pieter","Ping","Piotr","Prasit","Prasoet","Pricha","Pushpa","Qiang","Qing","Radha","Rafael","Ragnar","Raj","Rajendra","Rajesh","Raju","Rakesh","Ram","Ramesh","Raphael","Rattana","Ravi","Richard","Robert","Roman","Rong","Roy","Ryan","Salisu","Saman","Samran","Samuel","Sani","Sanjay","Santosh","Sam","Sammy","Sawat","Sebastian","Sergey","Sergio","Shankar","Shay","Shigeru","Shimon","Shlomo","Shoji","Sibusiso","Simon","Sipho","Sombat","Sombun","Somchai","Somchit","Somkhit","Somkiat","Sommai","Somnuek","Somphon","Somphong","Somsak","Sri","Stefan","Stephen","Steve","Steven","Suman","Sunday","Sunil","Sunthon","Suresh","Sushila","Suwit","Sveinn","Tadashi","Takashi","Takeshi","Tal","Tebogo","Thabo","Thawi","Themba","Thomas","Thulani","Tomasz","Toshio","Udom","Umar","Uriy","Usman","Uwe","Victor","Vijay","Viktor","Vincent","Vinod","Vladimir","Walter","Wanchai","Waraphon","Wei","Werner","Wichai","Wichian","Willem","William","Winai","Wirat","Wirot","Wojciech","Wolfgang","Xiang","Xiaohong","Xiaoli","Xiaoping","Xiaoyan","Xin","Xolani","Yaakv","Yahaya","Yakubu","Yan","Yasuo","Yhudah","Ying","Yisrael","Yong","Yosef","Yoshie","Yoshimi","Yoshio","Yu","Yue","Yukio","Yun","Yuriy","Yusuf","Yuval","Zbigniew","Zhen","Zhiqiang"],female:["Agata","Agnieszka","Aisha","Akira","Aleksandra","Alina","Alyona","Amina","Amnuai","Ana","Ana-Maria","Anah","Anan","Anastasiya","Andrea","Angela","Anita","Ann","Anna","Anong","Antonia","Asha","Barbara","Beata","Berglind","Bin","Birgit","Birna","Blessing","Brigitte","Bunmi","Busisiwe","Carmen","Carol","Caroline","Catherine","Chan","Chanah","Chao","Charoen","Chayah","Chen","Cheng","Christa","Christine","Claire","Claudia","Cristina","Darya","Dolores","Dorota","Edda","Ekaterina","Elena","Elisabeth","Elizabeth","Elke","Emiko","Emma","Erika","Erla","Erna","Ester","Esther","Eunice","Eva","Eugenia","Ewa","Faith","Fatima","Fiona","Fran","Francisca","Fumiko","Galina","Gabra","Gisela","Gita","Grace","Hadiza","Haiyan","Hanna","Haruna","Hauwa","Heike","Helen","Helga","Hildur","Hiroko","Hiromi","Hisako","Hong","Hui","Hulda","Inga","Ingrid","Irina","Isa","Isabel","Isah","Iwona","Jackline","Jan","Jane","Janet","Jean","Jennifer","Jianhua","Jianping","Jin","Joan","Joanna","Johanna","Josefa","Joy","Joyce","Juan","Julie","Justyna","Kai","Kanchana","Karen","Karin","Karolina","Kasia","Katarzyna","Katsumi","Keiko","Kiran","Kiyoko","Kristina","Kseniya","Kun","Lakshmi","Lalita","Lan","Latda","Laura","Laxmi","Leah","Lei","Li","Lihua","Lijun","Lilian","Lilja","Lin","Linda","Lindiwe","Ling","Liping","Lisa","Lucia","Lucy","Lyubov","Lyudmila","Magda","Magdalena","Mali","Manju","Margaret","Maria","Maria-Isabel","Maria-Jose","Maria-Pilar","Marina","Mariya","Marta","Martha","Mary","Maryam","Masako","Masami","Mei","Mercy","Michal","Michiko","Mieko","Min","Mina","Ming","Miriam","Miyoko","Mo","Monika","Mpho","Na","Nadezhda","Nan","Nancy","Natalya","Ngozi","Nicola","Ning","Nittaya","Noam","Nobuko","Nokuthula","Nonhlanhla","Noriko","Nushi","Olga","Omer","Patricia","Paula","Paulina","Peng","Petra","Phonthip","Pilar","Ping","Prani","Purity","Pushpa","Qing","Rachel","Radha","Rattana","Rebecca","Reiko","Rekha","Renate","Rita","Rong","Rosa","Rose","Rut","Ruth","Ryoko","Sabine","Sachiko","Samran","Santosh","Sara","Sarah","Sam","Sammy","Sawat","Shanti","Sharon","Shay","Shizuko","Shoshanah","Sibongile","Sita","Sombat","Sombun","Somchit","Somkhit","Sommai","Somnuek","Somphon","Somphong","Sri","Steinunn","Sukanya","Suman","Sunday","Sunita","Suphaphon","Susan","Susanne","Sushila","Svetlana","Takako","Tamar","Tatyana","Tal","Tebogo","Teruko","Thawi","Tomiko","Toshiko","Unnur","Urai","Urmila","Ursula","Usha","Valentina","Victoria","Wanjiru","Wanphen","Watsana","Wei","Wilai","Xiang","Xiaohong","Xiaoli","Xiaoping","Xiaoyan","Xin","Yael","Yan","Yasuko","Yelena","Yhudiyt","Ying","Yoko","Yong","Yoshie","Yoshiko","Yoshimi","Yu","Yue","Yuko","Yuliya","Yun","Yuval","Zainab","Zandile","Zanele","Zhen"]}};function cPe(e){var r,o;const s=(r=e==null?void 0:e.withAccents)!=null&&r,c=(o=e==null?void 0:e.gender)!=null?o:sPe(["male","female"]),d=e==null?void 0:e.locale;return lJ(s?d?d==null?void 0:d.withAccents[c]:C9.withAccents[c]:d?d==null?void 0:d.withoutAccents[c]:C9.withoutAccents[c],e)}var lPe={china:["Peking roasted duck","Kung pao chicken","Sweet and sour pork","Hot pot","Dim sum","Dumplings","Ma po tofu","Char siu","Chicken chow mein","Beef chow mein","vegetable chow mein","Chicken fried rice","Beef fried rice","Vegetable fried Rice","Special fried Rice","Sichuan pork","Xiaolongbao","Zhajiangmian","Wonton soup","Sweet and sour pork","Duck spring Rolls","Vegetable spring Rolls","Wonton","Peking duck","Lamb hot pot","Spicy crayfish","Guilin rice noodles","Lanzhou hand-pulled noodles","Steamed crab","Shredded pork with garlic sauce","Red braised pork","Sweet and sour Ribs","Xinjiang","Braised pork with vermicelli"],italy:["Butternut squash risotto","Mushroom risotto","Beetroot risotto","Courgette risotto","Pizza","Gnocchi","Spaghetti bolognese","Spaghetti carbonara","Pesto alla Genovese","Beef lasagne","Vegetable lasagne","Gelato","Prosciutto di Parma","Ribollita","Bagna cauda","Polenta","Tortelli and ravioli","Focaccia","Garlic bread","Arancini","Il tartufo","Panzerotto fritto","Fiorentina","Minestrone","Frico","Arrosticini","Olive ascolante","Fritto misto piemontes","Tiramisù"],india:["Biryani","Dosa","Tandoori chicken","Samosas","Chaat","Plain naan","Garlic naan","Pilau rice","Steamed rice","Chicken madras","Vegetable madras","Chicken vindaloo","Chicken jalfrezi","Chicken roghan josh","Lamb roghan josh","Beef roghan josh","Butter chicken","Dosa","Gulab jamun","Chicken korma","Mutter paneer","Papadum","Paratha","Raita","Saag paneer","Tandoori chicken","Chicken tikka masala","Pakora","Dal","Chapati","Pasanda","Aloo gobi","Kofta","Chicken makhani","Paneer naan","Chana Aloo Curry"],mexico:["Chilaquiles","Pozole","Tacos al pastor","Tostadas","Chiles en nogada","Elote","Enchiladas","Mole","Guacamole","Tamales","Huevos rancheros","Machaca","Discada","Beef Burrito","Chicken Burrito","Pozole de pollo o duajolote","Menudo","Cochinita pibil","Tamale","Quesadilla","Frijoles puercos","Chile en nogada","Esquites","Alegria de amaranto","Pipián","Aguachile","Ceviche","Pescado zarandeado","Camarones a la diabla","Birria de chivo","Tlayuda","Guacamole con chapulines","Flautas","Torta Ahogada","Carnitas","Caldo Azteca","Gorditas de Nata"],japan:["Sushi","Udon","Tofu","Tempura","Yakitori","Sashimi","Ramen","Donburi","Natto","Oden","Tamagoyaki","Soba","Tonkatsu","Kashipan","Sukiyaki","Miso soup","Okonomiyaki","Mentaiko","Nikujaga","Unagi no kabayaki","Shabu Shabu","Onigiri","Gyoza","Takoyaki","aiseki ryori","Edamame","Yakisoba","Chawanmushi","Wagashi"],france:["Foie gras","Huîtres","Cassoulet","Poulet basquaise","Escargots au beurre persillé","Mouclade charentaise","Galettes bretonnes","Flemish carbonnade","Quiche lorraine","Raclette","Cheese fondue","Beef fondue","Gratin dauphinois","Tartiflette","Bouillabaisse","Ratatouille","Boeuf bourguignon","Blanquette de veau","Pot-au-feu","Coq-au-vin","Hachis parmentier","Steak tartare","Choucroute","Soufflé au fromage","Cuisses de grenouilles","Soupe à l’oignon","Baguette","Croissant","French cheeses","Fondant au chocolat","Tarte tatin","Macarons","Crème brûlée","Île flottante","Profiteroles","Pain au chocolat"],lebanon:["Kibbeh","Kafta","Kanafeh","Hummus","Rice pilaf","Fattoush","Manakish","Tabbouleh","Sfeeha","Fattoush","Labneh","Muhammara","Lahm bi ajin","Kaak","Chanklich","Mssabaha","Shawarma","Kebbe","Falafel","Halewit el jeben","Namoura","Maamoul","Foul mdammas","Balila","Kawarma","Fattouch"],thailand:["Pad kra pao moo","Tom kha gai","Khao Pad","Chicken pad Thai","Vegetable pad Thai","Moo satay","Tom yum goong","Khao niew mamuang","Kai yad sai","Khao soi","Pad see ew","Laab moo","Gaeng panang","Gai pad med ma muang","Som tam","Poh pia tod","Gaeng massaman","Pla kapung nueng manao","Tod mun pla","Gaeng ped","Gaeng garee","Gaeng keow wan","Moo ping","Durian","Sai ooah","Hoy tod","Kuay teow reua","Mu kratha","Kao ka moo","Yam nua"],greece:["Moussaka","Papoutsakia","Pastitsio","Souvlaki","Soutzoukakia","Stifado","Tomatokeftedes","Tzatziki","Kolokithokeftedes","Giouvetsi","Choriatiki","Kleftiko","Gemista","Fasolada","Bougatsa","Tiropita","Spanakopita","Feta Cheese with Honey","Horta","Tirokroketes","Briam","Saganaki","Gigantes","Dolmades","Fasolatha","Koulouri","Loukoumades","Gyros","Galaktoboureko","Baklava"],turkey:["Şiş kebap","Döner","Köfte","Pide","Kumpir","Meze","Mantı","Lahmacun","Menemen","Şiş kebap","İskender kebab","Corba","Kuzu tandir","Çiğ Köfte","Pilav","Yaprak sarma","Dolma","İmam bayıldı","Borek","Durum","Kumpir","Balik ekmek","Simit","Kunefe","Baklava","Lokum","Halva","Mozzaik pasta","Güllaç","Mercimek Köftesi","Haydari","Tursu suyu","Kahvalti","Kazan dibi","Hunkar begendi","Islak burgers","Salep","Yogurtlu kebab"],spain:["Tortilla de patatas","Fabada asturiana","Calçots","Boquerones al vinagre","Empanada gallega","Paella","Gazpacho","Gachas","Migas","Bocadillo de calamares","Pulpo a feira","Caldo gallego","Lentejas con chorizo","Cocido madrileño","Cachopo","Caracoles"],venezuela:["Pabellón criollo","Arepa","Mondongo","Empanadas","Quesillo","Chicha andina","Tequeños","Cachapa","Hallaca","Perico","Pasticho","Mandocas","Caraotas negras","Patacones","Dulce de leche","Pan de Jamón"],chile:["Humitas","Empanadas","Porotos con riendas","Completos","Manjar","Cordero al palo","Pastel de choclo","Mote con huesillos","Sopaipillas","Curanto"],argentina:["Milanesas","Empanadas","Pizza fugazeta","Asado","Choripan","Bondiola","Bife de chorizo"],colombia:["Bandeja paisa","Chuleta valluna","Sancocho trifásico","Empanada valluna","Salpicon de frutas","Pastel de garbanzo","Ajiaco","Arepas","Arroz de lisa","Sancocho","Pan de bono","Cuchuco","Oblea","Cazuela de mariscos","Pan de yuca","Bollo Limpio","Almojábana","Empanadas","Arroz con Coco","Sopa de mondongo","Cazuela de Mariscos","Arroz con Pollo","Arepa de Huevo","Mote de Queso"],ecuador:["Encebollado","Ceviche","Tigrillo","Bolon de verde","Llapingacho","Mote pillo","Locro de papa","Churrasco"],peru:["Ceviche","Arroz con pollo","Aji de gallina","Llunca de gallina"],"el salvador":["Pupusa","Sopa de patas","Rigua","Flor de izote con huevo","Gallo en chicha"],romania:["Sarmale","Mici","Pomana porcului","Ciorbă de fasole cu ciolan","Ciorbă de burtă","Ciorbă rădăuțeană","Plăcintă cu brânză","Ciorbă de potroace","Mămăligă cu brânză și smântână","Tochitură","Piftie","Iahnie de fasole","Slănină afumată","Cârnați afumați","Varză a la Cluj","Gulaș de cartofi cu afumătură","Cozonac de casă","Ciorbă ardelenească de porc","Mucenici moldovenești","Salată de boeuf","Dovleac copt","Papanași cu brânză de vacă și afine","Drob de miel","Pârjoale moldovenești","Zacuscă de vinete","Zacuscă de fasole","Turtă dulce","Clătitele cu gem","Clătitele cu brânza de vacă","Balmoș","Cozonac","Chiftele"]},b9;(b9=Object.keys(lPe))==null||b9.length;var T9,uPe={olympic:["Archery","Artistic Gymnastics","Artistic Swimming","Athletics","Badminton","Baseball Softball","Basketball","Beach Volleyball","BMX Freestyle","BMX Racing","Boxing","Kayak Flatwater","Kayak Slalom","Diving","Equestrian","Fencing","Football","Golf","Handball","Hockey","Judo","Karate","Marathon Swimming","Modern Pentathlon","Mountain Bike","Rhythmic Gymnastics","Road Cycling","Rowing","Rugby","Sailing","Shooting","Skateboarding","Sport Climbing","Surfing","Swimming","Table Tennis","Taekwondo","Tennis","Track Cycling","Trampoline","Triathlon","Volleyball","Water Polo","Weightlifting","Wrestling"],winterOlympic:["Alpine Skiing","Biathlon","Bobsleigh","Cross-Country Skiing","Curling","Figure Skating","Freestyle Skiing","Ice Hockey","Luge","Nordic Combined","Short Track Speed Skating","Skeleton","Ski Jumping","Snowboard","Speed Skating"],outdoor:["Archery","Athletics","Badminton","Baseball","Basketball","Bowling","Boxing","Camping","Canoeing","Climbing","Cricket","Curling","Cycling","Equestrian","Fencing","Football","Golf","Gymnastics","Handball","Hang Gliding","High Jumping","Hockey","Ice Hockey","Judo","Karate","Kite Flying","Monkey Bars","Motorsports","Netball","Rowing","Rugby","Running","Sailing","Skateboarding","Slide","Snow Skiing","Soccer","Street Hockey","Surfing","Swimming","Table Tennis","Tennis","Trekking","Triathlon","Volleyball","Weightlifting","Wrestling"]};(T9=Object.keys(uPe))==null||T9.length;var uJ={exports:{}};function dPe(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var cO={exports:{}};const hPe={},pPe=Object.freeze(Object.defineProperty({__proto__:null,default:hPe},Symbol.toStringTag,{value:"Module"})),fPe=Qpe(pPe);var R9;function Rr(){return R9||(R9=1,function(e,r){(function(o,s){e.exports=s()})(In,function(){var o=o||function(s,c){var d;if(typeof window<"u"&&window.crypto&&(d=window.crypto),typeof self<"u"&&self.crypto&&(d=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(d=globalThis.crypto),!d&&typeof window<"u"&&window.msCrypto&&(d=window.msCrypto),!d&&typeof In<"u"&&In.crypto&&(d=In.crypto),!d&&typeof dPe=="function")try{d=fPe}catch{}var p=function(){if(d){if(typeof d.getRandomValues=="function")try{return d.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof d.randomBytes=="function")try{return d.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},v=Object.create||function(){function N(){}return function(L){var M;return N.prototype=L,M=new N,N.prototype=null,M}}(),m={},E=m.lib={},C=E.Base=function(){return{extend:function(N){var L=v(this);return N&&L.mixIn(N),(!L.hasOwnProperty("init")||this.init===L.init)&&(L.init=function(){L.$super.init.apply(this,arguments)}),L.init.prototype=L,L.$super=this,L},create:function(){var N=this.extend();return N.init.apply(N,arguments),N},init:function(){},mixIn:function(N){for(var L in N)N.hasOwnProperty(L)&&(this[L]=N[L]);N.hasOwnProperty("toString")&&(this.toString=N.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),b=E.WordArray=C.extend({init:function(N,L){N=this.words=N||[],L!=c?this.sigBytes=L:this.sigBytes=N.length*4},toString:function(N){return(N||w).stringify(this)},concat:function(N){var L=this.words,M=N.words,j=this.sigBytes,$=N.sigBytes;if(this.clamp(),j%4)for(var H=0;H<$;H++){var G=M[H>>>2]>>>24-H%4*8&255;L[j+H>>>2]|=G<<24-(j+H)%4*8}else for(var Y=0;Y<$;Y+=4)L[j+Y>>>2]=M[Y>>>2];return this.sigBytes+=$,this},clamp:function(){var N=this.words,L=this.sigBytes;N[L>>>2]&=4294967295<<32-L%4*8,N.length=s.ceil(L/4)},clone:function(){var N=C.clone.call(this);return N.words=this.words.slice(0),N},random:function(N){for(var L=[],M=0;M<N;M+=4)L.push(p());return new b.init(L,N)}}),R=m.enc={},w=R.Hex={stringify:function(N){for(var L=N.words,M=N.sigBytes,j=[],$=0;$<M;$++){var H=L[$>>>2]>>>24-$%4*8&255;j.push((H>>>4).toString(16)),j.push((H&15).toString(16))}return j.join("")},parse:function(N){for(var L=N.length,M=[],j=0;j<L;j+=2)M[j>>>3]|=parseInt(N.substr(j,2),16)<<24-j%8*4;return new b.init(M,L/2)}},I=R.Latin1={stringify:function(N){for(var L=N.words,M=N.sigBytes,j=[],$=0;$<M;$++){var H=L[$>>>2]>>>24-$%4*8&255;j.push(String.fromCharCode(H))}return j.join("")},parse:function(N){for(var L=N.length,M=[],j=0;j<L;j++)M[j>>>2]|=(N.charCodeAt(j)&255)<<24-j%4*8;return new b.init(M,L)}},O=R.Utf8={stringify:function(N){try{return decodeURIComponent(escape(I.stringify(N)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(N){return I.parse(unescape(encodeURIComponent(N)))}},x=E.BufferedBlockAlgorithm=C.extend({reset:function(){this._data=new b.init,this._nDataBytes=0},_append:function(N){typeof N=="string"&&(N=O.parse(N)),this._data.concat(N),this._nDataBytes+=N.sigBytes},_process:function(N){var L,M=this._data,j=M.words,$=M.sigBytes,H=this.blockSize,G=H*4,Y=$/G;N?Y=s.ceil(Y):Y=s.max((Y|0)-this._minBufferSize,0);var q=Y*H,J=s.min(q*4,$);if(q){for(var re=0;re<q;re+=H)this._doProcessBlock(j,re);L=j.splice(0,q),M.sigBytes-=J}return new b.init(L,J)},clone:function(){var N=C.clone.call(this);return N._data=this._data.clone(),N},_minBufferSize:0});E.Hasher=x.extend({cfg:C.extend(),init:function(N){this.cfg=this.cfg.extend(N),this.reset()},reset:function(){x.reset.call(this),this._doReset()},update:function(N){return this._append(N),this._process(),this},finalize:function(N){N&&this._append(N);var L=this._doFinalize();return L},blockSize:16,_createHelper:function(N){return function(L,M){return new N.init(M).finalize(L)}},_createHmacHelper:function(N){return function(L,M){return new P.HMAC.init(N,M).finalize(L)}}});var P=m.algo={};return m}(Math);return o})}(cO)),cO.exports}var lO={exports:{}},w9;function Qb(){return w9||(w9=1,function(e,r){(function(o,s){e.exports=s(Rr())})(In,function(o){return function(s){var c=o,d=c.lib,p=d.Base,v=d.WordArray,m=c.x64={};m.Word=p.extend({init:function(E,C){this.high=E,this.low=C}}),m.WordArray=p.extend({init:function(E,C){E=this.words=E||[],C!=s?this.sigBytes=C:this.sigBytes=E.length*8},toX32:function(){for(var E=this.words,C=E.length,b=[],R=0;R<C;R++){var w=E[R];b.push(w.high),b.push(w.low)}return v.create(b,this.sigBytes)},clone:function(){for(var E=p.clone.call(this),C=E.words=this.words.slice(0),b=C.length,R=0;R<b;R++)C[R]=C[R].clone();return E}})}(),o})}(lO)),lO.exports}var uO={exports:{}},I9;function mPe(){return I9||(I9=1,function(e,r){(function(o,s){e.exports=s(Rr())})(In,function(o){return function(){if(typeof ArrayBuffer=="function"){var s=o,c=s.lib,d=c.WordArray,p=d.init,v=d.init=function(m){if(m instanceof ArrayBuffer&&(m=new Uint8Array(m)),(m instanceof Int8Array||typeof Uint8ClampedArray<"u"&&m instanceof Uint8ClampedArray||m instanceof Int16Array||m instanceof Uint16Array||m instanceof Int32Array||m instanceof Uint32Array||m instanceof Float32Array||m instanceof Float64Array)&&(m=new Uint8Array(m.buffer,m.byteOffset,m.byteLength)),m instanceof Uint8Array){for(var E=m.byteLength,C=[],b=0;b<E;b++)C[b>>>2]|=m[b]<<24-b%4*8;p.call(this,C,E)}else p.apply(this,arguments)};v.prototype=d}}(),o.lib.WordArray})}(uO)),uO.exports}var dO={exports:{}},A9;function gPe(){return A9||(A9=1,function(e,r){(function(o,s){e.exports=s(Rr())})(In,function(o){return function(){var s=o,c=s.lib,d=c.WordArray,p=s.enc;p.Utf16=p.Utf16BE={stringify:function(m){for(var E=m.words,C=m.sigBytes,b=[],R=0;R<C;R+=2){var w=E[R>>>2]>>>16-R%4*8&65535;b.push(String.fromCharCode(w))}return b.join("")},parse:function(m){for(var E=m.length,C=[],b=0;b<E;b++)C[b>>>1]|=m.charCodeAt(b)<<16-b%2*16;return d.create(C,E*2)}},p.Utf16LE={stringify:function(m){for(var E=m.words,C=m.sigBytes,b=[],R=0;R<C;R+=2){var w=v(E[R>>>2]>>>16-R%4*8&65535);b.push(String.fromCharCode(w))}return b.join("")},parse:function(m){for(var E=m.length,C=[],b=0;b<E;b++)C[b>>>1]|=v(m.charCodeAt(b)<<16-b%2*16);return d.create(C,E*2)}};function v(m){return m<<8&4278255360|m>>>8&16711935}}(),o.enc.Utf16})}(dO)),dO.exports}var hO={exports:{}},O9;function pp(){return O9||(O9=1,function(e,r){(function(o,s){e.exports=s(Rr())})(In,function(o){return function(){var s=o,c=s.lib,d=c.WordArray,p=s.enc;p.Base64={stringify:function(m){var E=m.words,C=m.sigBytes,b=this._map;m.clamp();for(var R=[],w=0;w<C;w+=3)for(var I=E[w>>>2]>>>24-w%4*8&255,O=E[w+1>>>2]>>>24-(w+1)%4*8&255,x=E[w+2>>>2]>>>24-(w+2)%4*8&255,P=I<<16|O<<8|x,N=0;N<4&&w+N*.75<C;N++)R.push(b.charAt(P>>>6*(3-N)&63));var L=b.charAt(64);if(L)for(;R.length%4;)R.push(L);return R.join("")},parse:function(m){var E=m.length,C=this._map,b=this._reverseMap;if(!b){b=this._reverseMap=[];for(var R=0;R<C.length;R++)b[C.charCodeAt(R)]=R}var w=C.charAt(64);if(w){var I=m.indexOf(w);I!==-1&&(E=I)}return v(m,E,b)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function v(m,E,C){for(var b=[],R=0,w=0;w<E;w++)if(w%4){var I=C[m.charCodeAt(w-1)]<<w%4*2,O=C[m.charCodeAt(w)]>>>6-w%4*2,x=I|O;b[R>>>2]|=x<<24-R%4*8,R++}return d.create(b,R)}}(),o.enc.Base64})}(hO)),hO.exports}var pO={exports:{}},x9;function vPe(){return x9||(x9=1,function(e,r){(function(o,s){e.exports=s(Rr())})(In,function(o){return function(){var s=o,c=s.lib,d=c.WordArray,p=s.enc;p.Base64url={stringify:function(m,E){E===void 0&&(E=!0);var C=m.words,b=m.sigBytes,R=E?this._safe_map:this._map;m.clamp();for(var w=[],I=0;I<b;I+=3)for(var O=C[I>>>2]>>>24-I%4*8&255,x=C[I+1>>>2]>>>24-(I+1)%4*8&255,P=C[I+2>>>2]>>>24-(I+2)%4*8&255,N=O<<16|x<<8|P,L=0;L<4&&I+L*.75<b;L++)w.push(R.charAt(N>>>6*(3-L)&63));var M=R.charAt(64);if(M)for(;w.length%4;)w.push(M);return w.join("")},parse:function(m,E){E===void 0&&(E=!0);var C=m.length,b=E?this._safe_map:this._map,R=this._reverseMap;if(!R){R=this._reverseMap=[];for(var w=0;w<b.length;w++)R[b.charCodeAt(w)]=w}var I=b.charAt(64);if(I){var O=m.indexOf(I);O!==-1&&(C=O)}return v(m,C,R)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function v(m,E,C){for(var b=[],R=0,w=0;w<E;w++)if(w%4){var I=C[m.charCodeAt(w-1)]<<w%4*2,O=C[m.charCodeAt(w)]>>>6-w%4*2,x=I|O;b[R>>>2]|=x<<24-R%4*8,R++}return d.create(b,R)}}(),o.enc.Base64url})}(pO)),pO.exports}var fO={exports:{}},N9;function fp(){return N9||(N9=1,function(e,r){(function(o,s){e.exports=s(Rr())})(In,function(o){return function(s){var c=o,d=c.lib,p=d.WordArray,v=d.Hasher,m=c.algo,E=[];(function(){for(var O=0;O<64;O++)E[O]=s.abs(s.sin(O+1))*4294967296|0})();var C=m.MD5=v.extend({_doReset:function(){this._hash=new p.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(O,x){for(var P=0;P<16;P++){var N=x+P,L=O[N];O[N]=(L<<8|L>>>24)&16711935|(L<<24|L>>>8)&4278255360}var M=this._hash.words,j=O[x+0],$=O[x+1],H=O[x+2],G=O[x+3],Y=O[x+4],q=O[x+5],J=O[x+6],re=O[x+7],Z=O[x+8],Q=O[x+9],he=O[x+10],oe=O[x+11],ae=O[x+12],te=O[x+13],de=O[x+14],fe=O[x+15],ie=M[0],le=M[1],ve=M[2],ge=M[3];ie=b(ie,le,ve,ge,j,7,E[0]),ge=b(ge,ie,le,ve,$,12,E[1]),ve=b(ve,ge,ie,le,H,17,E[2]),le=b(le,ve,ge,ie,G,22,E[3]),ie=b(ie,le,ve,ge,Y,7,E[4]),ge=b(ge,ie,le,ve,q,12,E[5]),ve=b(ve,ge,ie,le,J,17,E[6]),le=b(le,ve,ge,ie,re,22,E[7]),ie=b(ie,le,ve,ge,Z,7,E[8]),ge=b(ge,ie,le,ve,Q,12,E[9]),ve=b(ve,ge,ie,le,he,17,E[10]),le=b(le,ve,ge,ie,oe,22,E[11]),ie=b(ie,le,ve,ge,ae,7,E[12]),ge=b(ge,ie,le,ve,te,12,E[13]),ve=b(ve,ge,ie,le,de,17,E[14]),le=b(le,ve,ge,ie,fe,22,E[15]),ie=R(ie,le,ve,ge,$,5,E[16]),ge=R(ge,ie,le,ve,J,9,E[17]),ve=R(ve,ge,ie,le,oe,14,E[18]),le=R(le,ve,ge,ie,j,20,E[19]),ie=R(ie,le,ve,ge,q,5,E[20]),ge=R(ge,ie,le,ve,he,9,E[21]),ve=R(ve,ge,ie,le,fe,14,E[22]),le=R(le,ve,ge,ie,Y,20,E[23]),ie=R(ie,le,ve,ge,Q,5,E[24]),ge=R(ge,ie,le,ve,de,9,E[25]),ve=R(ve,ge,ie,le,G,14,E[26]),le=R(le,ve,ge,ie,Z,20,E[27]),ie=R(ie,le,ve,ge,te,5,E[28]),ge=R(ge,ie,le,ve,H,9,E[29]),ve=R(ve,ge,ie,le,re,14,E[30]),le=R(le,ve,ge,ie,ae,20,E[31]),ie=w(ie,le,ve,ge,q,4,E[32]),ge=w(ge,ie,le,ve,Z,11,E[33]),ve=w(ve,ge,ie,le,oe,16,E[34]),le=w(le,ve,ge,ie,de,23,E[35]),ie=w(ie,le,ve,ge,$,4,E[36]),ge=w(ge,ie,le,ve,Y,11,E[37]),ve=w(ve,ge,ie,le,re,16,E[38]),le=w(le,ve,ge,ie,he,23,E[39]),ie=w(ie,le,ve,ge,te,4,E[40]),ge=w(ge,ie,le,ve,j,11,E[41]),ve=w(ve,ge,ie,le,G,16,E[42]),le=w(le,ve,ge,ie,J,23,E[43]),ie=w(ie,le,ve,ge,Q,4,E[44]),ge=w(ge,ie,le,ve,ae,11,E[45]),ve=w(ve,ge,ie,le,fe,16,E[46]),le=w(le,ve,ge,ie,H,23,E[47]),ie=I(ie,le,ve,ge,j,6,E[48]),ge=I(ge,ie,le,ve,re,10,E[49]),ve=I(ve,ge,ie,le,de,15,E[50]),le=I(le,ve,ge,ie,q,21,E[51]),ie=I(ie,le,ve,ge,ae,6,E[52]),ge=I(ge,ie,le,ve,G,10,E[53]),ve=I(ve,ge,ie,le,he,15,E[54]),le=I(le,ve,ge,ie,$,21,E[55]),ie=I(ie,le,ve,ge,Z,6,E[56]),ge=I(ge,ie,le,ve,fe,10,E[57]),ve=I(ve,ge,ie,le,J,15,E[58]),le=I(le,ve,ge,ie,te,21,E[59]),ie=I(ie,le,ve,ge,Y,6,E[60]),ge=I(ge,ie,le,ve,oe,10,E[61]),ve=I(ve,ge,ie,le,H,15,E[62]),le=I(le,ve,ge,ie,Q,21,E[63]),M[0]=M[0]+ie|0,M[1]=M[1]+le|0,M[2]=M[2]+ve|0,M[3]=M[3]+ge|0},_doFinalize:function(){var O=this._data,x=O.words,P=this._nDataBytes*8,N=O.sigBytes*8;x[N>>>5]|=128<<24-N%32;var L=s.floor(P/4294967296),M=P;x[(N+64>>>9<<4)+15]=(L<<8|L>>>24)&16711935|(L<<24|L>>>8)&4278255360,x[(N+64>>>9<<4)+14]=(M<<8|M>>>24)&16711935|(M<<24|M>>>8)&4278255360,O.sigBytes=(x.length+1)*4,this._process();for(var j=this._hash,$=j.words,H=0;H<4;H++){var G=$[H];$[H]=(G<<8|G>>>24)&16711935|(G<<24|G>>>8)&4278255360}return j},clone:function(){var O=v.clone.call(this);return O._hash=this._hash.clone(),O}});function b(O,x,P,N,L,M,j){var $=O+(x&P|~x&N)+L+j;return($<<M|$>>>32-M)+x}function R(O,x,P,N,L,M,j){var $=O+(x&N|P&~N)+L+j;return($<<M|$>>>32-M)+x}function w(O,x,P,N,L,M,j){var $=O+(x^P^N)+L+j;return($<<M|$>>>32-M)+x}function I(O,x,P,N,L,M,j){var $=O+(P^(x|~N))+L+j;return($<<M|$>>>32-M)+x}c.MD5=v._createHelper(C),c.HmacMD5=v._createHmacHelper(C)}(Math),o.MD5})}(fO)),fO.exports}var mO={exports:{}},D9;function dJ(){return D9||(D9=1,function(e,r){(function(o,s){e.exports=s(Rr())})(In,function(o){return function(){var s=o,c=s.lib,d=c.WordArray,p=c.Hasher,v=s.algo,m=[],E=v.SHA1=p.extend({_doReset:function(){this._hash=new d.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(C,b){for(var R=this._hash.words,w=R[0],I=R[1],O=R[2],x=R[3],P=R[4],N=0;N<80;N++){if(N<16)m[N]=C[b+N]|0;else{var L=m[N-3]^m[N-8]^m[N-14]^m[N-16];m[N]=L<<1|L>>>31}var M=(w<<5|w>>>27)+P+m[N];N<20?M+=(I&O|~I&x)+1518500249:N<40?M+=(I^O^x)+1859775393:N<60?M+=(I&O|I&x|O&x)-1894007588:M+=(I^O^x)-899497514,P=x,x=O,O=I<<30|I>>>2,I=w,w=M}R[0]=R[0]+w|0,R[1]=R[1]+I|0,R[2]=R[2]+O|0,R[3]=R[3]+x|0,R[4]=R[4]+P|0},_doFinalize:function(){var C=this._data,b=C.words,R=this._nDataBytes*8,w=C.sigBytes*8;return b[w>>>5]|=128<<24-w%32,b[(w+64>>>9<<4)+14]=Math.floor(R/4294967296),b[(w+64>>>9<<4)+15]=R,C.sigBytes=b.length*4,this._process(),this._hash},clone:function(){var C=p.clone.call(this);return C._hash=this._hash.clone(),C}});s.SHA1=p._createHelper(E),s.HmacSHA1=p._createHmacHelper(E)}(),o.SHA1})}(mO)),mO.exports}var gO={exports:{}},P9;function p2(){return P9||(P9=1,function(e,r){(function(o,s){e.exports=s(Rr())})(In,function(o){return function(s){var c=o,d=c.lib,p=d.WordArray,v=d.Hasher,m=c.algo,E=[],C=[];(function(){function w(P){for(var N=s.sqrt(P),L=2;L<=N;L++)if(!(P%L))return!1;return!0}function I(P){return(P-(P|0))*4294967296|0}for(var O=2,x=0;x<64;)w(O)&&(x<8&&(E[x]=I(s.pow(O,1/2))),C[x]=I(s.pow(O,1/3)),x++),O++})();var b=[],R=m.SHA256=v.extend({_doReset:function(){this._hash=new p.init(E.slice(0))},_doProcessBlock:function(w,I){for(var O=this._hash.words,x=O[0],P=O[1],N=O[2],L=O[3],M=O[4],j=O[5],$=O[6],H=O[7],G=0;G<64;G++){if(G<16)b[G]=w[I+G]|0;else{var Y=b[G-15],q=(Y<<25|Y>>>7)^(Y<<14|Y>>>18)^Y>>>3,J=b[G-2],re=(J<<15|J>>>17)^(J<<13|J>>>19)^J>>>10;b[G]=q+b[G-7]+re+b[G-16]}var Z=M&j^~M&$,Q=x&P^x&N^P&N,he=(x<<30|x>>>2)^(x<<19|x>>>13)^(x<<10|x>>>22),oe=(M<<26|M>>>6)^(M<<21|M>>>11)^(M<<7|M>>>25),ae=H+oe+Z+C[G]+b[G],te=he+Q;H=$,$=j,j=M,M=L+ae|0,L=N,N=P,P=x,x=ae+te|0}O[0]=O[0]+x|0,O[1]=O[1]+P|0,O[2]=O[2]+N|0,O[3]=O[3]+L|0,O[4]=O[4]+M|0,O[5]=O[5]+j|0,O[6]=O[6]+$|0,O[7]=O[7]+H|0},_doFinalize:function(){var w=this._data,I=w.words,O=this._nDataBytes*8,x=w.sigBytes*8;return I[x>>>5]|=128<<24-x%32,I[(x+64>>>9<<4)+14]=s.floor(O/4294967296),I[(x+64>>>9<<4)+15]=O,w.sigBytes=I.length*4,this._process(),this._hash},clone:function(){var w=v.clone.call(this);return w._hash=this._hash.clone(),w}});c.SHA256=v._createHelper(R),c.HmacSHA256=v._createHmacHelper(R)}(Math),o.SHA256})}(gO)),gO.exports}var vO={exports:{}},L9;function EPe(){return L9||(L9=1,function(e,r){(function(o,s,c){e.exports=s(Rr(),p2())})(In,function(o){return function(){var s=o,c=s.lib,d=c.WordArray,p=s.algo,v=p.SHA256,m=p.SHA224=v.extend({_doReset:function(){this._hash=new d.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var E=v._doFinalize.call(this);return E.sigBytes-=4,E}});s.SHA224=v._createHelper(m),s.HmacSHA224=v._createHmacHelper(m)}(),o.SHA224})}(vO)),vO.exports}var EO={exports:{}},k9;function hJ(){return k9||(k9=1,function(e,r){(function(o,s,c){e.exports=s(Rr(),Qb())})(In,function(o){return function(){var s=o,c=s.lib,d=c.Hasher,p=s.x64,v=p.Word,m=p.WordArray,E=s.algo;function C(){return v.create.apply(v,arguments)}var b=[C(1116352408,3609767458),C(1899447441,602891725),C(3049323471,3964484399),C(3921009573,2173295548),C(961987163,4081628472),C(1508970993,3053834265),C(2453635748,2937671579),C(2870763221,3664609560),C(3624381080,2734883394),C(310598401,1164996542),C(607225278,1323610764),C(1426881987,3590304994),C(1925078388,4068182383),C(2162078206,991336113),C(2614888103,633803317),C(3248222580,3479774868),C(3835390401,2666613458),C(4022224774,944711139),C(264347078,2341262773),C(604807628,2007800933),C(770255983,1495990901),C(1249150122,1856431235),C(1555081692,3175218132),C(1996064986,2198950837),C(2554220882,3999719339),C(2821834349,766784016),C(2952996808,2566594879),C(3210313671,3203337956),C(3336571891,1034457026),C(3584528711,2466948901),C(113926993,3758326383),C(338241895,168717936),C(666307205,1188179964),C(773529912,1546045734),C(1294757372,1522805485),C(1396182291,2643833823),C(1695183700,2343527390),C(1986661051,1014477480),C(2177026350,1206759142),C(2456956037,344077627),C(2730485921,1290863460),C(2820302411,3158454273),C(3259730800,3505952657),C(3345764771,106217008),C(3516065817,3606008344),C(3600352804,1432725776),C(4094571909,1467031594),C(275423344,851169720),C(430227734,3100823752),C(506948616,1363258195),C(659060556,3750685593),C(883997877,3785050280),C(958139571,3318307427),C(1322822218,3812723403),C(1537002063,2003034995),C(1747873779,3602036899),C(1955562222,1575990012),C(2024104815,1125592928),C(2227730452,2716904306),C(2361852424,442776044),C(2428436474,593698344),C(2756734187,3733110249),C(3204031479,2999351573),C(3329325298,3815920427),C(3391569614,3928383900),C(3515267271,566280711),C(3940187606,3454069534),C(4118630271,4000239992),C(116418474,1914138554),C(174292421,2731055270),C(289380356,3203993006),C(460393269,320620315),C(685471733,587496836),C(852142971,1086792851),C(1017036298,365543100),C(1126000580,2618297676),C(1288033470,3409855158),C(1501505948,4234509866),C(1607167915,987167468),C(1816402316,1246189591)],R=[];(function(){for(var I=0;I<80;I++)R[I]=C()})();var w=E.SHA512=d.extend({_doReset:function(){this._hash=new m.init([new v.init(1779033703,4089235720),new v.init(3144134277,2227873595),new v.init(1013904242,4271175723),new v.init(2773480762,1595750129),new v.init(1359893119,2917565137),new v.init(2600822924,725511199),new v.init(528734635,4215389547),new v.init(1541459225,327033209)])},_doProcessBlock:function(I,O){for(var x=this._hash.words,P=x[0],N=x[1],L=x[2],M=x[3],j=x[4],$=x[5],H=x[6],G=x[7],Y=P.high,q=P.low,J=N.high,re=N.low,Z=L.high,Q=L.low,he=M.high,oe=M.low,ae=j.high,te=j.low,de=$.high,fe=$.low,ie=H.high,le=H.low,ve=G.high,ge=G.low,Te=Y,we=q,Ie=J,Me=re,Ke=Z,ke=Q,Ne=he,ze=oe,Qe=ae,De=te,xe=de,ft=fe,Et=ie,st=le,ot=ve,Ze=ge,je=0;je<80;je++){var ct,lt,gt=R[je];if(je<16)lt=gt.high=I[O+je*2]|0,ct=gt.low=I[O+je*2+1]|0;else{var Ot=R[je-15],Tt=Ot.high,Wt=Ot.low,on=(Tt>>>1|Wt<<31)^(Tt>>>8|Wt<<24)^Tt>>>7,xt=(Wt>>>1|Tt<<31)^(Wt>>>8|Tt<<24)^(Wt>>>7|Tt<<25),wt=R[je-2],Pt=wt.high,Kt=wt.low,fn=(Pt>>>19|Kt<<13)^(Pt<<3|Kt>>>29)^Pt>>>6,mn=(Kt>>>19|Pt<<13)^(Kt<<3|Pt>>>29)^(Kt>>>6|Pt<<26),Un=R[je-7],Kn=Un.high,qn=Un.low,mt=R[je-16],Nt=mt.high,Sn=mt.low;ct=xt+qn,lt=on+Kn+(ct>>>0<xt>>>0?1:0),ct=ct+mn,lt=lt+fn+(ct>>>0<mn>>>0?1:0),ct=ct+Sn,lt=lt+Nt+(ct>>>0<Sn>>>0?1:0),gt.high=lt,gt.low=ct}var ur=Qe&xe^~Qe&Et,Br=De&ft^~De&st,dr=Te&Ie^Te&Ke^Ie&Ke,Mn=we&Me^we&ke^Me&ke,Vt=(Te>>>28|we<<4)^(Te<<30|we>>>2)^(Te<<25|we>>>7),yn=(we>>>28|Te<<4)^(we<<30|Te>>>2)^(we<<25|Te>>>7),$t=(Qe>>>14|De<<18)^(Qe>>>18|De<<14)^(Qe<<23|De>>>9),Ct=(De>>>14|Qe<<18)^(De>>>18|Qe<<14)^(De<<23|Qe>>>9),Ht=b[je],On=Ht.high,rt=Ht.low,St=Ze+Ct,It=ot+$t+(St>>>0<Ze>>>0?1:0),St=St+Br,It=It+ur+(St>>>0<Br>>>0?1:0),St=St+rt,It=It+On+(St>>>0<rt>>>0?1:0),St=St+ct,It=It+lt+(St>>>0<ct>>>0?1:0),en=yn+Mn,En=Vt+dr+(en>>>0<yn>>>0?1:0);ot=Et,Ze=st,Et=xe,st=ft,xe=Qe,ft=De,De=ze+St|0,Qe=Ne+It+(De>>>0<ze>>>0?1:0)|0,Ne=Ke,ze=ke,Ke=Ie,ke=Me,Ie=Te,Me=we,we=St+en|0,Te=It+En+(we>>>0<St>>>0?1:0)|0}q=P.low=q+we,P.high=Y+Te+(q>>>0<we>>>0?1:0),re=N.low=re+Me,N.high=J+Ie+(re>>>0<Me>>>0?1:0),Q=L.low=Q+ke,L.high=Z+Ke+(Q>>>0<ke>>>0?1:0),oe=M.low=oe+ze,M.high=he+Ne+(oe>>>0<ze>>>0?1:0),te=j.low=te+De,j.high=ae+Qe+(te>>>0<De>>>0?1:0),fe=$.low=fe+ft,$.high=de+xe+(fe>>>0<ft>>>0?1:0),le=H.low=le+st,H.high=ie+Et+(le>>>0<st>>>0?1:0),ge=G.low=ge+Ze,G.high=ve+ot+(ge>>>0<Ze>>>0?1:0)},_doFinalize:function(){var I=this._data,O=I.words,x=this._nDataBytes*8,P=I.sigBytes*8;O[P>>>5]|=128<<24-P%32,O[(P+128>>>10<<5)+30]=Math.floor(x/4294967296),O[(P+128>>>10<<5)+31]=x,I.sigBytes=O.length*4,this._process();var N=this._hash.toX32();return N},clone:function(){var I=d.clone.call(this);return I._hash=this._hash.clone(),I},blockSize:1024/32});s.SHA512=d._createHelper(w),s.HmacSHA512=d._createHmacHelper(w)}(),o.SHA512})}(EO)),EO.exports}var _O={exports:{}},M9;function _Pe(){return M9||(M9=1,function(e,r){(function(o,s,c){e.exports=s(Rr(),Qb(),hJ())})(In,function(o){return function(){var s=o,c=s.x64,d=c.Word,p=c.WordArray,v=s.algo,m=v.SHA512,E=v.SHA384=m.extend({_doReset:function(){this._hash=new p.init([new d.init(3418070365,3238371032),new d.init(1654270250,914150663),new d.init(2438529370,812702999),new d.init(355462360,4144912697),new d.init(1731405415,4290775857),new d.init(2394180231,1750603025),new d.init(3675008525,1694076839),new d.init(1203062813,3204075428)])},_doFinalize:function(){var C=m._doFinalize.call(this);return C.sigBytes-=16,C}});s.SHA384=m._createHelper(E),s.HmacSHA384=m._createHmacHelper(E)}(),o.SHA384})}(_O)),_O.exports}var SO={exports:{}},F9;function SPe(){return F9||(F9=1,function(e,r){(function(o,s,c){e.exports=s(Rr(),Qb())})(In,function(o){return function(s){var c=o,d=c.lib,p=d.WordArray,v=d.Hasher,m=c.x64,E=m.Word,C=c.algo,b=[],R=[],w=[];(function(){for(var x=1,P=0,N=0;N<24;N++){b[x+5*P]=(N+1)*(N+2)/2%64;var L=P%5,M=(2*x+3*P)%5;x=L,P=M}for(var x=0;x<5;x++)for(var P=0;P<5;P++)R[x+5*P]=P+(2*x+3*P)%5*5;for(var j=1,$=0;$<24;$++){for(var H=0,G=0,Y=0;Y<7;Y++){if(j&1){var q=(1<<Y)-1;q<32?G^=1<<q:H^=1<<q-32}j&128?j=j<<1^113:j<<=1}w[$]=E.create(H,G)}})();var I=[];(function(){for(var x=0;x<25;x++)I[x]=E.create()})();var O=C.SHA3=v.extend({cfg:v.cfg.extend({outputLength:512}),_doReset:function(){for(var x=this._state=[],P=0;P<25;P++)x[P]=new E.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(x,P){for(var N=this._state,L=this.blockSize/2,M=0;M<L;M++){var j=x[P+2*M],$=x[P+2*M+1];j=(j<<8|j>>>24)&16711935|(j<<24|j>>>8)&4278255360,$=($<<8|$>>>24)&16711935|($<<24|$>>>8)&4278255360;var H=N[M];H.high^=$,H.low^=j}for(var G=0;G<24;G++){for(var Y=0;Y<5;Y++){for(var q=0,J=0,re=0;re<5;re++){var H=N[Y+5*re];q^=H.high,J^=H.low}var Z=I[Y];Z.high=q,Z.low=J}for(var Y=0;Y<5;Y++)for(var Q=I[(Y+4)%5],he=I[(Y+1)%5],oe=he.high,ae=he.low,q=Q.high^(oe<<1|ae>>>31),J=Q.low^(ae<<1|oe>>>31),re=0;re<5;re++){var H=N[Y+5*re];H.high^=q,H.low^=J}for(var te=1;te<25;te++){var q,J,H=N[te],de=H.high,fe=H.low,ie=b[te];ie<32?(q=de<<ie|fe>>>32-ie,J=fe<<ie|de>>>32-ie):(q=fe<<ie-32|de>>>64-ie,J=de<<ie-32|fe>>>64-ie);var le=I[R[te]];le.high=q,le.low=J}var ve=I[0],ge=N[0];ve.high=ge.high,ve.low=ge.low;for(var Y=0;Y<5;Y++)for(var re=0;re<5;re++){var te=Y+5*re,H=N[te],Te=I[te],we=I[(Y+1)%5+5*re],Ie=I[(Y+2)%5+5*re];H.high=Te.high^~we.high&Ie.high,H.low=Te.low^~we.low&Ie.low}var H=N[0],Me=w[G];H.high^=Me.high,H.low^=Me.low}},_doFinalize:function(){var x=this._data,P=x.words;this._nDataBytes*8;var N=x.sigBytes*8,L=this.blockSize*32;P[N>>>5]|=1<<24-N%32,P[(s.ceil((N+1)/L)*L>>>5)-1]|=128,x.sigBytes=P.length*4,this._process();for(var M=this._state,j=this.cfg.outputLength/8,$=j/8,H=[],G=0;G<$;G++){var Y=M[G],q=Y.high,J=Y.low;q=(q<<8|q>>>24)&16711935|(q<<24|q>>>8)&4278255360,J=(J<<8|J>>>24)&16711935|(J<<24|J>>>8)&4278255360,H.push(J),H.push(q)}return new p.init(H,j)},clone:function(){for(var x=v.clone.call(this),P=x._state=this._state.slice(0),N=0;N<25;N++)P[N]=P[N].clone();return x}});c.SHA3=v._createHelper(O),c.HmacSHA3=v._createHmacHelper(O)}(Math),o.SHA3})}(SO)),SO.exports}var yO={exports:{}},U9;function yPe(){return U9||(U9=1,function(e,r){(function(o,s){e.exports=s(Rr())})(In,function(o){/** @preserve
			(c) 2012 by Cédric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return function(s){var c=o,d=c.lib,p=d.WordArray,v=d.Hasher,m=c.algo,E=p.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),C=p.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),b=p.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),R=p.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),w=p.create([0,1518500249,1859775393,2400959708,2840853838]),I=p.create([1352829926,1548603684,1836072691,2053994217,0]),O=m.RIPEMD160=v.extend({_doReset:function(){this._hash=p.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function($,H){for(var G=0;G<16;G++){var Y=H+G,q=$[Y];$[Y]=(q<<8|q>>>24)&16711935|(q<<24|q>>>8)&4278255360}var J=this._hash.words,re=w.words,Z=I.words,Q=E.words,he=C.words,oe=b.words,ae=R.words,te,de,fe,ie,le,ve,ge,Te,we,Ie;ve=te=J[0],ge=de=J[1],Te=fe=J[2],we=ie=J[3],Ie=le=J[4];for(var Me,G=0;G<80;G+=1)Me=te+$[H+Q[G]]|0,G<16?Me+=x(de,fe,ie)+re[0]:G<32?Me+=P(de,fe,ie)+re[1]:G<48?Me+=N(de,fe,ie)+re[2]:G<64?Me+=L(de,fe,ie)+re[3]:Me+=M(de,fe,ie)+re[4],Me=Me|0,Me=j(Me,oe[G]),Me=Me+le|0,te=le,le=ie,ie=j(fe,10),fe=de,de=Me,Me=ve+$[H+he[G]]|0,G<16?Me+=M(ge,Te,we)+Z[0]:G<32?Me+=L(ge,Te,we)+Z[1]:G<48?Me+=N(ge,Te,we)+Z[2]:G<64?Me+=P(ge,Te,we)+Z[3]:Me+=x(ge,Te,we)+Z[4],Me=Me|0,Me=j(Me,ae[G]),Me=Me+Ie|0,ve=Ie,Ie=we,we=j(Te,10),Te=ge,ge=Me;Me=J[1]+fe+we|0,J[1]=J[2]+ie+Ie|0,J[2]=J[3]+le+ve|0,J[3]=J[4]+te+ge|0,J[4]=J[0]+de+Te|0,J[0]=Me},_doFinalize:function(){var $=this._data,H=$.words,G=this._nDataBytes*8,Y=$.sigBytes*8;H[Y>>>5]|=128<<24-Y%32,H[(Y+64>>>9<<4)+14]=(G<<8|G>>>24)&16711935|(G<<24|G>>>8)&4278255360,$.sigBytes=(H.length+1)*4,this._process();for(var q=this._hash,J=q.words,re=0;re<5;re++){var Z=J[re];J[re]=(Z<<8|Z>>>24)&16711935|(Z<<24|Z>>>8)&4278255360}return q},clone:function(){var $=v.clone.call(this);return $._hash=this._hash.clone(),$}});function x($,H,G){return $^H^G}function P($,H,G){return $&H|~$&G}function N($,H,G){return($|~H)^G}function L($,H,G){return $&G|H&~G}function M($,H,G){return $^(H|~G)}function j($,H){return $<<H|$>>>32-H}c.RIPEMD160=v._createHelper(O),c.HmacRIPEMD160=v._createHmacHelper(O)}(),o.RIPEMD160})}(yO)),yO.exports}var CO={exports:{}},B9;function f2(){return B9||(B9=1,function(e,r){(function(o,s){e.exports=s(Rr())})(In,function(o){(function(){var s=o,c=s.lib,d=c.Base,p=s.enc,v=p.Utf8,m=s.algo;m.HMAC=d.extend({init:function(E,C){E=this._hasher=new E.init,typeof C=="string"&&(C=v.parse(C));var b=E.blockSize,R=b*4;C.sigBytes>R&&(C=E.finalize(C)),C.clamp();for(var w=this._oKey=C.clone(),I=this._iKey=C.clone(),O=w.words,x=I.words,P=0;P<b;P++)O[P]^=1549556828,x[P]^=909522486;w.sigBytes=I.sigBytes=R,this.reset()},reset:function(){var E=this._hasher;E.reset(),E.update(this._iKey)},update:function(E){return this._hasher.update(E),this},finalize:function(E){var C=this._hasher,b=C.finalize(E);C.reset();var R=C.finalize(this._oKey.clone().concat(b));return R}})})()})}(CO)),CO.exports}var bO={exports:{}},V9;function CPe(){return V9||(V9=1,function(e,r){(function(o,s,c){e.exports=s(Rr(),p2(),f2())})(In,function(o){return function(){var s=o,c=s.lib,d=c.Base,p=c.WordArray,v=s.algo,m=v.SHA256,E=v.HMAC,C=v.PBKDF2=d.extend({cfg:d.extend({keySize:128/32,hasher:m,iterations:25e4}),init:function(b){this.cfg=this.cfg.extend(b)},compute:function(b,R){for(var w=this.cfg,I=E.create(w.hasher,b),O=p.create(),x=p.create([1]),P=O.words,N=x.words,L=w.keySize,M=w.iterations;P.length<L;){var j=I.update(R).finalize(x);I.reset();for(var $=j.words,H=$.length,G=j,Y=1;Y<M;Y++){G=I.finalize(G),I.reset();for(var q=G.words,J=0;J<H;J++)$[J]^=q[J]}O.concat(j),N[0]++}return O.sigBytes=L*4,O}});s.PBKDF2=function(b,R,w){return C.create(w).compute(b,R)}}(),o.PBKDF2})}(bO)),bO.exports}var TO={exports:{}},j9;function Vd(){return j9||(j9=1,function(e,r){(function(o,s,c){e.exports=s(Rr(),dJ(),f2())})(In,function(o){return function(){var s=o,c=s.lib,d=c.Base,p=c.WordArray,v=s.algo,m=v.MD5,E=v.EvpKDF=d.extend({cfg:d.extend({keySize:128/32,hasher:m,iterations:1}),init:function(C){this.cfg=this.cfg.extend(C)},compute:function(C,b){for(var R,w=this.cfg,I=w.hasher.create(),O=p.create(),x=O.words,P=w.keySize,N=w.iterations;x.length<P;){R&&I.update(R),R=I.update(C).finalize(b),I.reset();for(var L=1;L<N;L++)R=I.finalize(R),I.reset();O.concat(R)}return O.sigBytes=P*4,O}});s.EvpKDF=function(C,b,R){return E.create(R).compute(C,b)}}(),o.EvpKDF})}(TO)),TO.exports}var RO={exports:{}},$9;function $o(){return $9||($9=1,function(e,r){(function(o,s,c){e.exports=s(Rr(),Vd())})(In,function(o){o.lib.Cipher||function(s){var c=o,d=c.lib,p=d.Base,v=d.WordArray,m=d.BufferedBlockAlgorithm,E=c.enc;E.Utf8;var C=E.Base64,b=c.algo,R=b.EvpKDF,w=d.Cipher=m.extend({cfg:p.extend(),createEncryptor:function(q,J){return this.create(this._ENC_XFORM_MODE,q,J)},createDecryptor:function(q,J){return this.create(this._DEC_XFORM_MODE,q,J)},init:function(q,J,re){this.cfg=this.cfg.extend(re),this._xformMode=q,this._key=J,this.reset()},reset:function(){m.reset.call(this),this._doReset()},process:function(q){return this._append(q),this._process()},finalize:function(q){q&&this._append(q);var J=this._doFinalize();return J},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function q(J){return typeof J=="string"?Y:$}return function(J){return{encrypt:function(re,Z,Q){return q(Z).encrypt(J,re,Z,Q)},decrypt:function(re,Z,Q){return q(Z).decrypt(J,re,Z,Q)}}}}()});d.StreamCipher=w.extend({_doFinalize:function(){var q=this._process(!0);return q},blockSize:1});var I=c.mode={},O=d.BlockCipherMode=p.extend({createEncryptor:function(q,J){return this.Encryptor.create(q,J)},createDecryptor:function(q,J){return this.Decryptor.create(q,J)},init:function(q,J){this._cipher=q,this._iv=J}}),x=I.CBC=function(){var q=O.extend();q.Encryptor=q.extend({processBlock:function(re,Z){var Q=this._cipher,he=Q.blockSize;J.call(this,re,Z,he),Q.encryptBlock(re,Z),this._prevBlock=re.slice(Z,Z+he)}}),q.Decryptor=q.extend({processBlock:function(re,Z){var Q=this._cipher,he=Q.blockSize,oe=re.slice(Z,Z+he);Q.decryptBlock(re,Z),J.call(this,re,Z,he),this._prevBlock=oe}});function J(re,Z,Q){var he,oe=this._iv;oe?(he=oe,this._iv=s):he=this._prevBlock;for(var ae=0;ae<Q;ae++)re[Z+ae]^=he[ae]}return q}(),P=c.pad={},N=P.Pkcs7={pad:function(q,J){for(var re=J*4,Z=re-q.sigBytes%re,Q=Z<<24|Z<<16|Z<<8|Z,he=[],oe=0;oe<Z;oe+=4)he.push(Q);var ae=v.create(he,Z);q.concat(ae)},unpad:function(q){var J=q.words[q.sigBytes-1>>>2]&255;q.sigBytes-=J}};d.BlockCipher=w.extend({cfg:w.cfg.extend({mode:x,padding:N}),reset:function(){var q;w.reset.call(this);var J=this.cfg,re=J.iv,Z=J.mode;this._xformMode==this._ENC_XFORM_MODE?q=Z.createEncryptor:(q=Z.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==q?this._mode.init(this,re&&re.words):(this._mode=q.call(Z,this,re&&re.words),this._mode.__creator=q)},_doProcessBlock:function(q,J){this._mode.processBlock(q,J)},_doFinalize:function(){var q,J=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(J.pad(this._data,this.blockSize),q=this._process(!0)):(q=this._process(!0),J.unpad(q)),q},blockSize:128/32});var L=d.CipherParams=p.extend({init:function(q){this.mixIn(q)},toString:function(q){return(q||this.formatter).stringify(this)}}),M=c.format={},j=M.OpenSSL={stringify:function(q){var J,re=q.ciphertext,Z=q.salt;return Z?J=v.create([1398893684,1701076831]).concat(Z).concat(re):J=re,J.toString(C)},parse:function(q){var J,re=C.parse(q),Z=re.words;return Z[0]==1398893684&&Z[1]==1701076831&&(J=v.create(Z.slice(2,4)),Z.splice(0,4),re.sigBytes-=16),L.create({ciphertext:re,salt:J})}},$=d.SerializableCipher=p.extend({cfg:p.extend({format:j}),encrypt:function(q,J,re,Z){Z=this.cfg.extend(Z);var Q=q.createEncryptor(re,Z),he=Q.finalize(J),oe=Q.cfg;return L.create({ciphertext:he,key:re,iv:oe.iv,algorithm:q,mode:oe.mode,padding:oe.padding,blockSize:q.blockSize,formatter:Z.format})},decrypt:function(q,J,re,Z){Z=this.cfg.extend(Z),J=this._parse(J,Z.format);var Q=q.createDecryptor(re,Z).finalize(J.ciphertext);return Q},_parse:function(q,J){return typeof q=="string"?J.parse(q,this):q}}),H=c.kdf={},G=H.OpenSSL={execute:function(q,J,re,Z,Q){if(Z||(Z=v.random(64/8)),Q)var he=R.create({keySize:J+re,hasher:Q}).compute(q,Z);else var he=R.create({keySize:J+re}).compute(q,Z);var oe=v.create(he.words.slice(J),re*4);return he.sigBytes=J*4,L.create({key:he,iv:oe,salt:Z})}},Y=d.PasswordBasedCipher=$.extend({cfg:$.cfg.extend({kdf:G}),encrypt:function(q,J,re,Z){Z=this.cfg.extend(Z);var Q=Z.kdf.execute(re,q.keySize,q.ivSize,Z.salt,Z.hasher);Z.iv=Q.iv;var he=$.encrypt.call(this,q,J,Q.key,Z);return he.mixIn(Q),he},decrypt:function(q,J,re,Z){Z=this.cfg.extend(Z),J=this._parse(J,Z.format);var Q=Z.kdf.execute(re,q.keySize,q.ivSize,J.salt,Z.hasher);Z.iv=Q.iv;var he=$.decrypt.call(this,q,J,Q.key,Z);return he}})}()})}(RO)),RO.exports}var wO={exports:{}},H9;function bPe(){return H9||(H9=1,function(e,r){(function(o,s,c){e.exports=s(Rr(),$o())})(In,function(o){return o.mode.CFB=function(){var s=o.lib.BlockCipherMode.extend();s.Encryptor=s.extend({processBlock:function(d,p){var v=this._cipher,m=v.blockSize;c.call(this,d,p,m,v),this._prevBlock=d.slice(p,p+m)}}),s.Decryptor=s.extend({processBlock:function(d,p){var v=this._cipher,m=v.blockSize,E=d.slice(p,p+m);c.call(this,d,p,m,v),this._prevBlock=E}});function c(d,p,v,m){var E,C=this._iv;C?(E=C.slice(0),this._iv=void 0):E=this._prevBlock,m.encryptBlock(E,0);for(var b=0;b<v;b++)d[p+b]^=E[b]}return s}(),o.mode.CFB})}(wO)),wO.exports}var IO={exports:{}},W9;function TPe(){return W9||(W9=1,function(e,r){(function(o,s,c){e.exports=s(Rr(),$o())})(In,function(o){return o.mode.CTR=function(){var s=o.lib.BlockCipherMode.extend(),c=s.Encryptor=s.extend({processBlock:function(d,p){var v=this._cipher,m=v.blockSize,E=this._iv,C=this._counter;E&&(C=this._counter=E.slice(0),this._iv=void 0);var b=C.slice(0);v.encryptBlock(b,0),C[m-1]=C[m-1]+1|0;for(var R=0;R<m;R++)d[p+R]^=b[R]}});return s.Decryptor=c,s}(),o.mode.CTR})}(IO)),IO.exports}var AO={exports:{}},z9;function RPe(){return z9||(z9=1,function(e,r){(function(o,s,c){e.exports=s(Rr(),$o())})(In,function(o){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return o.mode.CTRGladman=function(){var s=o.lib.BlockCipherMode.extend();function c(v){if((v>>24&255)===255){var m=v>>16&255,E=v>>8&255,C=v&255;m===255?(m=0,E===255?(E=0,C===255?C=0:++C):++E):++m,v=0,v+=m<<16,v+=E<<8,v+=C}else v+=1<<24;return v}function d(v){return(v[0]=c(v[0]))===0&&(v[1]=c(v[1])),v}var p=s.Encryptor=s.extend({processBlock:function(v,m){var E=this._cipher,C=E.blockSize,b=this._iv,R=this._counter;b&&(R=this._counter=b.slice(0),this._iv=void 0),d(R);var w=R.slice(0);E.encryptBlock(w,0);for(var I=0;I<C;I++)v[m+I]^=w[I]}});return s.Decryptor=p,s}(),o.mode.CTRGladman})}(AO)),AO.exports}var OO={exports:{}},G9;function wPe(){return G9||(G9=1,function(e,r){(function(o,s,c){e.exports=s(Rr(),$o())})(In,function(o){return o.mode.OFB=function(){var s=o.lib.BlockCipherMode.extend(),c=s.Encryptor=s.extend({processBlock:function(d,p){var v=this._cipher,m=v.blockSize,E=this._iv,C=this._keystream;E&&(C=this._keystream=E.slice(0),this._iv=void 0),v.encryptBlock(C,0);for(var b=0;b<m;b++)d[p+b]^=C[b]}});return s.Decryptor=c,s}(),o.mode.OFB})}(OO)),OO.exports}var xO={exports:{}},K9;function IPe(){return K9||(K9=1,function(e,r){(function(o,s,c){e.exports=s(Rr(),$o())})(In,function(o){return o.mode.ECB=function(){var s=o.lib.BlockCipherMode.extend();return s.Encryptor=s.extend({processBlock:function(c,d){this._cipher.encryptBlock(c,d)}}),s.Decryptor=s.extend({processBlock:function(c,d){this._cipher.decryptBlock(c,d)}}),s}(),o.mode.ECB})}(xO)),xO.exports}var NO={exports:{}},q9;function APe(){return q9||(q9=1,function(e,r){(function(o,s,c){e.exports=s(Rr(),$o())})(In,function(o){return o.pad.AnsiX923={pad:function(s,c){var d=s.sigBytes,p=c*4,v=p-d%p,m=d+v-1;s.clamp(),s.words[m>>>2]|=v<<24-m%4*8,s.sigBytes+=v},unpad:function(s){var c=s.words[s.sigBytes-1>>>2]&255;s.sigBytes-=c}},o.pad.Ansix923})}(NO)),NO.exports}var DO={exports:{}},Y9;function OPe(){return Y9||(Y9=1,function(e,r){(function(o,s,c){e.exports=s(Rr(),$o())})(In,function(o){return o.pad.Iso10126={pad:function(s,c){var d=c*4,p=d-s.sigBytes%d;s.concat(o.lib.WordArray.random(p-1)).concat(o.lib.WordArray.create([p<<24],1))},unpad:function(s){var c=s.words[s.sigBytes-1>>>2]&255;s.sigBytes-=c}},o.pad.Iso10126})}(DO)),DO.exports}var PO={exports:{}},X9;function xPe(){return X9||(X9=1,function(e,r){(function(o,s,c){e.exports=s(Rr(),$o())})(In,function(o){return o.pad.Iso97971={pad:function(s,c){s.concat(o.lib.WordArray.create([2147483648],1)),o.pad.ZeroPadding.pad(s,c)},unpad:function(s){o.pad.ZeroPadding.unpad(s),s.sigBytes--}},o.pad.Iso97971})}(PO)),PO.exports}var LO={exports:{}},J9;function NPe(){return J9||(J9=1,function(e,r){(function(o,s,c){e.exports=s(Rr(),$o())})(In,function(o){return o.pad.ZeroPadding={pad:function(s,c){var d=c*4;s.clamp(),s.sigBytes+=d-(s.sigBytes%d||d)},unpad:function(s){for(var c=s.words,d=s.sigBytes-1,d=s.sigBytes-1;d>=0;d--)if(c[d>>>2]>>>24-d%4*8&255){s.sigBytes=d+1;break}}},o.pad.ZeroPadding})}(LO)),LO.exports}var kO={exports:{}},Q9;function DPe(){return Q9||(Q9=1,function(e,r){(function(o,s,c){e.exports=s(Rr(),$o())})(In,function(o){return o.pad.NoPadding={pad:function(){},unpad:function(){}},o.pad.NoPadding})}(kO)),kO.exports}var MO={exports:{}},Z9;function PPe(){return Z9||(Z9=1,function(e,r){(function(o,s,c){e.exports=s(Rr(),$o())})(In,function(o){return function(s){var c=o,d=c.lib,p=d.CipherParams,v=c.enc,m=v.Hex,E=c.format;E.Hex={stringify:function(C){return C.ciphertext.toString(m)},parse:function(C){var b=m.parse(C);return p.create({ciphertext:b})}}}(),o.format.Hex})}(MO)),MO.exports}var FO={exports:{}},eW;function LPe(){return eW||(eW=1,function(e,r){(function(o,s,c){e.exports=s(Rr(),pp(),fp(),Vd(),$o())})(In,function(o){return function(){var s=o,c=s.lib,d=c.BlockCipher,p=s.algo,v=[],m=[],E=[],C=[],b=[],R=[],w=[],I=[],O=[],x=[];(function(){for(var L=[],M=0;M<256;M++)M<128?L[M]=M<<1:L[M]=M<<1^283;for(var j=0,$=0,M=0;M<256;M++){var H=$^$<<1^$<<2^$<<3^$<<4;H=H>>>8^H&255^99,v[j]=H,m[H]=j;var G=L[j],Y=L[G],q=L[Y],J=L[H]*257^H*16843008;E[j]=J<<24|J>>>8,C[j]=J<<16|J>>>16,b[j]=J<<8|J>>>24,R[j]=J;var J=q*16843009^Y*65537^G*257^j*16843008;w[H]=J<<24|J>>>8,I[H]=J<<16|J>>>16,O[H]=J<<8|J>>>24,x[H]=J,j?(j=G^L[L[L[q^G]]],$^=L[L[$]]):j=$=1}})();var P=[0,1,2,4,8,16,32,64,128,27,54],N=p.AES=d.extend({_doReset:function(){var L;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var M=this._keyPriorReset=this._key,j=M.words,$=M.sigBytes/4,H=this._nRounds=$+6,G=(H+1)*4,Y=this._keySchedule=[],q=0;q<G;q++)q<$?Y[q]=j[q]:(L=Y[q-1],q%$?$>6&&q%$==4&&(L=v[L>>>24]<<24|v[L>>>16&255]<<16|v[L>>>8&255]<<8|v[L&255]):(L=L<<8|L>>>24,L=v[L>>>24]<<24|v[L>>>16&255]<<16|v[L>>>8&255]<<8|v[L&255],L^=P[q/$|0]<<24),Y[q]=Y[q-$]^L);for(var J=this._invKeySchedule=[],re=0;re<G;re++){var q=G-re;if(re%4)var L=Y[q];else var L=Y[q-4];re<4||q<=4?J[re]=L:J[re]=w[v[L>>>24]]^I[v[L>>>16&255]]^O[v[L>>>8&255]]^x[v[L&255]]}}},encryptBlock:function(L,M){this._doCryptBlock(L,M,this._keySchedule,E,C,b,R,v)},decryptBlock:function(L,M){var j=L[M+1];L[M+1]=L[M+3],L[M+3]=j,this._doCryptBlock(L,M,this._invKeySchedule,w,I,O,x,m);var j=L[M+1];L[M+1]=L[M+3],L[M+3]=j},_doCryptBlock:function(L,M,j,$,H,G,Y,q){for(var J=this._nRounds,re=L[M]^j[0],Z=L[M+1]^j[1],Q=L[M+2]^j[2],he=L[M+3]^j[3],oe=4,ae=1;ae<J;ae++){var te=$[re>>>24]^H[Z>>>16&255]^G[Q>>>8&255]^Y[he&255]^j[oe++],de=$[Z>>>24]^H[Q>>>16&255]^G[he>>>8&255]^Y[re&255]^j[oe++],fe=$[Q>>>24]^H[he>>>16&255]^G[re>>>8&255]^Y[Z&255]^j[oe++],ie=$[he>>>24]^H[re>>>16&255]^G[Z>>>8&255]^Y[Q&255]^j[oe++];re=te,Z=de,Q=fe,he=ie}var te=(q[re>>>24]<<24|q[Z>>>16&255]<<16|q[Q>>>8&255]<<8|q[he&255])^j[oe++],de=(q[Z>>>24]<<24|q[Q>>>16&255]<<16|q[he>>>8&255]<<8|q[re&255])^j[oe++],fe=(q[Q>>>24]<<24|q[he>>>16&255]<<16|q[re>>>8&255]<<8|q[Z&255])^j[oe++],ie=(q[he>>>24]<<24|q[re>>>16&255]<<16|q[Z>>>8&255]<<8|q[Q&255])^j[oe++];L[M]=te,L[M+1]=de,L[M+2]=fe,L[M+3]=ie},keySize:256/32});s.AES=d._createHelper(N)}(),o.AES})}(FO)),FO.exports}var UO={exports:{}},tW;function kPe(){return tW||(tW=1,function(e,r){(function(o,s,c){e.exports=s(Rr(),pp(),fp(),Vd(),$o())})(In,function(o){return function(){var s=o,c=s.lib,d=c.WordArray,p=c.BlockCipher,v=s.algo,m=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],E=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],C=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],b=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],R=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],w=v.DES=p.extend({_doReset:function(){for(var P=this._key,N=P.words,L=[],M=0;M<56;M++){var j=m[M]-1;L[M]=N[j>>>5]>>>31-j%32&1}for(var $=this._subKeys=[],H=0;H<16;H++){for(var G=$[H]=[],Y=C[H],M=0;M<24;M++)G[M/6|0]|=L[(E[M]-1+Y)%28]<<31-M%6,G[4+(M/6|0)]|=L[28+(E[M+24]-1+Y)%28]<<31-M%6;G[0]=G[0]<<1|G[0]>>>31;for(var M=1;M<7;M++)G[M]=G[M]>>>(M-1)*4+3;G[7]=G[7]<<5|G[7]>>>27}for(var q=this._invSubKeys=[],M=0;M<16;M++)q[M]=$[15-M]},encryptBlock:function(P,N){this._doCryptBlock(P,N,this._subKeys)},decryptBlock:function(P,N){this._doCryptBlock(P,N,this._invSubKeys)},_doCryptBlock:function(P,N,L){this._lBlock=P[N],this._rBlock=P[N+1],I.call(this,4,252645135),I.call(this,16,65535),O.call(this,2,858993459),O.call(this,8,16711935),I.call(this,1,1431655765);for(var M=0;M<16;M++){for(var j=L[M],$=this._lBlock,H=this._rBlock,G=0,Y=0;Y<8;Y++)G|=b[Y][((H^j[Y])&R[Y])>>>0];this._lBlock=H,this._rBlock=$^G}var q=this._lBlock;this._lBlock=this._rBlock,this._rBlock=q,I.call(this,1,1431655765),O.call(this,8,16711935),O.call(this,2,858993459),I.call(this,16,65535),I.call(this,4,252645135),P[N]=this._lBlock,P[N+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function I(P,N){var L=(this._lBlock>>>P^this._rBlock)&N;this._rBlock^=L,this._lBlock^=L<<P}function O(P,N){var L=(this._rBlock>>>P^this._lBlock)&N;this._lBlock^=L,this._rBlock^=L<<P}s.DES=p._createHelper(w);var x=v.TripleDES=p.extend({_doReset:function(){var P=this._key,N=P.words;if(N.length!==2&&N.length!==4&&N.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var L=N.slice(0,2),M=N.length<4?N.slice(0,2):N.slice(2,4),j=N.length<6?N.slice(0,2):N.slice(4,6);this._des1=w.createEncryptor(d.create(L)),this._des2=w.createEncryptor(d.create(M)),this._des3=w.createEncryptor(d.create(j))},encryptBlock:function(P,N){this._des1.encryptBlock(P,N),this._des2.decryptBlock(P,N),this._des3.encryptBlock(P,N)},decryptBlock:function(P,N){this._des3.decryptBlock(P,N),this._des2.encryptBlock(P,N),this._des1.decryptBlock(P,N)},keySize:192/32,ivSize:64/32,blockSize:64/32});s.TripleDES=p._createHelper(x)}(),o.TripleDES})}(UO)),UO.exports}var BO={exports:{}},nW;function MPe(){return nW||(nW=1,function(e,r){(function(o,s,c){e.exports=s(Rr(),pp(),fp(),Vd(),$o())})(In,function(o){return function(){var s=o,c=s.lib,d=c.StreamCipher,p=s.algo,v=p.RC4=d.extend({_doReset:function(){for(var C=this._key,b=C.words,R=C.sigBytes,w=this._S=[],I=0;I<256;I++)w[I]=I;for(var I=0,O=0;I<256;I++){var x=I%R,P=b[x>>>2]>>>24-x%4*8&255;O=(O+w[I]+P)%256;var N=w[I];w[I]=w[O],w[O]=N}this._i=this._j=0},_doProcessBlock:function(C,b){C[b]^=m.call(this)},keySize:256/32,ivSize:0});function m(){for(var C=this._S,b=this._i,R=this._j,w=0,I=0;I<4;I++){b=(b+1)%256,R=(R+C[b])%256;var O=C[b];C[b]=C[R],C[R]=O,w|=C[(C[b]+C[R])%256]<<24-I*8}return this._i=b,this._j=R,w}s.RC4=d._createHelper(v);var E=p.RC4Drop=v.extend({cfg:v.cfg.extend({drop:192}),_doReset:function(){v._doReset.call(this);for(var C=this.cfg.drop;C>0;C--)m.call(this)}});s.RC4Drop=d._createHelper(E)}(),o.RC4})}(BO)),BO.exports}var VO={exports:{}},rW;function FPe(){return rW||(rW=1,function(e,r){(function(o,s,c){e.exports=s(Rr(),pp(),fp(),Vd(),$o())})(In,function(o){return function(){var s=o,c=s.lib,d=c.StreamCipher,p=s.algo,v=[],m=[],E=[],C=p.Rabbit=d.extend({_doReset:function(){for(var R=this._key.words,w=this.cfg.iv,I=0;I<4;I++)R[I]=(R[I]<<8|R[I]>>>24)&16711935|(R[I]<<24|R[I]>>>8)&4278255360;var O=this._X=[R[0],R[3]<<16|R[2]>>>16,R[1],R[0]<<16|R[3]>>>16,R[2],R[1]<<16|R[0]>>>16,R[3],R[2]<<16|R[1]>>>16],x=this._C=[R[2]<<16|R[2]>>>16,R[0]&4294901760|R[1]&65535,R[3]<<16|R[3]>>>16,R[1]&4294901760|R[2]&65535,R[0]<<16|R[0]>>>16,R[2]&4294901760|R[3]&65535,R[1]<<16|R[1]>>>16,R[3]&4294901760|R[0]&65535];this._b=0;for(var I=0;I<4;I++)b.call(this);for(var I=0;I<8;I++)x[I]^=O[I+4&7];if(w){var P=w.words,N=P[0],L=P[1],M=(N<<8|N>>>24)&16711935|(N<<24|N>>>8)&4278255360,j=(L<<8|L>>>24)&16711935|(L<<24|L>>>8)&4278255360,$=M>>>16|j&4294901760,H=j<<16|M&65535;x[0]^=M,x[1]^=$,x[2]^=j,x[3]^=H,x[4]^=M,x[5]^=$,x[6]^=j,x[7]^=H;for(var I=0;I<4;I++)b.call(this)}},_doProcessBlock:function(R,w){var I=this._X;b.call(this),v[0]=I[0]^I[5]>>>16^I[3]<<16,v[1]=I[2]^I[7]>>>16^I[5]<<16,v[2]=I[4]^I[1]>>>16^I[7]<<16,v[3]=I[6]^I[3]>>>16^I[1]<<16;for(var O=0;O<4;O++)v[O]=(v[O]<<8|v[O]>>>24)&16711935|(v[O]<<24|v[O]>>>8)&4278255360,R[w+O]^=v[O]},blockSize:128/32,ivSize:64/32});function b(){for(var R=this._X,w=this._C,I=0;I<8;I++)m[I]=w[I];w[0]=w[0]+1295307597+this._b|0,w[1]=w[1]+3545052371+(w[0]>>>0<m[0]>>>0?1:0)|0,w[2]=w[2]+886263092+(w[1]>>>0<m[1]>>>0?1:0)|0,w[3]=w[3]+1295307597+(w[2]>>>0<m[2]>>>0?1:0)|0,w[4]=w[4]+3545052371+(w[3]>>>0<m[3]>>>0?1:0)|0,w[5]=w[5]+886263092+(w[4]>>>0<m[4]>>>0?1:0)|0,w[6]=w[6]+1295307597+(w[5]>>>0<m[5]>>>0?1:0)|0,w[7]=w[7]+3545052371+(w[6]>>>0<m[6]>>>0?1:0)|0,this._b=w[7]>>>0<m[7]>>>0?1:0;for(var I=0;I<8;I++){var O=R[I]+w[I],x=O&65535,P=O>>>16,N=((x*x>>>17)+x*P>>>15)+P*P,L=((O&4294901760)*O|0)+((O&65535)*O|0);E[I]=N^L}R[0]=E[0]+(E[7]<<16|E[7]>>>16)+(E[6]<<16|E[6]>>>16)|0,R[1]=E[1]+(E[0]<<8|E[0]>>>24)+E[7]|0,R[2]=E[2]+(E[1]<<16|E[1]>>>16)+(E[0]<<16|E[0]>>>16)|0,R[3]=E[3]+(E[2]<<8|E[2]>>>24)+E[1]|0,R[4]=E[4]+(E[3]<<16|E[3]>>>16)+(E[2]<<16|E[2]>>>16)|0,R[5]=E[5]+(E[4]<<8|E[4]>>>24)+E[3]|0,R[6]=E[6]+(E[5]<<16|E[5]>>>16)+(E[4]<<16|E[4]>>>16)|0,R[7]=E[7]+(E[6]<<8|E[6]>>>24)+E[5]|0}s.Rabbit=d._createHelper(C)}(),o.Rabbit})}(VO)),VO.exports}var jO={exports:{}},iW;function UPe(){return iW||(iW=1,function(e,r){(function(o,s,c){e.exports=s(Rr(),pp(),fp(),Vd(),$o())})(In,function(o){return function(){var s=o,c=s.lib,d=c.StreamCipher,p=s.algo,v=[],m=[],E=[],C=p.RabbitLegacy=d.extend({_doReset:function(){var R=this._key.words,w=this.cfg.iv,I=this._X=[R[0],R[3]<<16|R[2]>>>16,R[1],R[0]<<16|R[3]>>>16,R[2],R[1]<<16|R[0]>>>16,R[3],R[2]<<16|R[1]>>>16],O=this._C=[R[2]<<16|R[2]>>>16,R[0]&4294901760|R[1]&65535,R[3]<<16|R[3]>>>16,R[1]&4294901760|R[2]&65535,R[0]<<16|R[0]>>>16,R[2]&4294901760|R[3]&65535,R[1]<<16|R[1]>>>16,R[3]&4294901760|R[0]&65535];this._b=0;for(var x=0;x<4;x++)b.call(this);for(var x=0;x<8;x++)O[x]^=I[x+4&7];if(w){var P=w.words,N=P[0],L=P[1],M=(N<<8|N>>>24)&16711935|(N<<24|N>>>8)&4278255360,j=(L<<8|L>>>24)&16711935|(L<<24|L>>>8)&4278255360,$=M>>>16|j&4294901760,H=j<<16|M&65535;O[0]^=M,O[1]^=$,O[2]^=j,O[3]^=H,O[4]^=M,O[5]^=$,O[6]^=j,O[7]^=H;for(var x=0;x<4;x++)b.call(this)}},_doProcessBlock:function(R,w){var I=this._X;b.call(this),v[0]=I[0]^I[5]>>>16^I[3]<<16,v[1]=I[2]^I[7]>>>16^I[5]<<16,v[2]=I[4]^I[1]>>>16^I[7]<<16,v[3]=I[6]^I[3]>>>16^I[1]<<16;for(var O=0;O<4;O++)v[O]=(v[O]<<8|v[O]>>>24)&16711935|(v[O]<<24|v[O]>>>8)&4278255360,R[w+O]^=v[O]},blockSize:128/32,ivSize:64/32});function b(){for(var R=this._X,w=this._C,I=0;I<8;I++)m[I]=w[I];w[0]=w[0]+1295307597+this._b|0,w[1]=w[1]+3545052371+(w[0]>>>0<m[0]>>>0?1:0)|0,w[2]=w[2]+886263092+(w[1]>>>0<m[1]>>>0?1:0)|0,w[3]=w[3]+1295307597+(w[2]>>>0<m[2]>>>0?1:0)|0,w[4]=w[4]+3545052371+(w[3]>>>0<m[3]>>>0?1:0)|0,w[5]=w[5]+886263092+(w[4]>>>0<m[4]>>>0?1:0)|0,w[6]=w[6]+1295307597+(w[5]>>>0<m[5]>>>0?1:0)|0,w[7]=w[7]+3545052371+(w[6]>>>0<m[6]>>>0?1:0)|0,this._b=w[7]>>>0<m[7]>>>0?1:0;for(var I=0;I<8;I++){var O=R[I]+w[I],x=O&65535,P=O>>>16,N=((x*x>>>17)+x*P>>>15)+P*P,L=((O&4294901760)*O|0)+((O&65535)*O|0);E[I]=N^L}R[0]=E[0]+(E[7]<<16|E[7]>>>16)+(E[6]<<16|E[6]>>>16)|0,R[1]=E[1]+(E[0]<<8|E[0]>>>24)+E[7]|0,R[2]=E[2]+(E[1]<<16|E[1]>>>16)+(E[0]<<16|E[0]>>>16)|0,R[3]=E[3]+(E[2]<<8|E[2]>>>24)+E[1]|0,R[4]=E[4]+(E[3]<<16|E[3]>>>16)+(E[2]<<16|E[2]>>>16)|0,R[5]=E[5]+(E[4]<<8|E[4]>>>24)+E[3]|0,R[6]=E[6]+(E[5]<<16|E[5]>>>16)+(E[4]<<16|E[4]>>>16)|0,R[7]=E[7]+(E[6]<<8|E[6]>>>24)+E[5]|0}s.RabbitLegacy=d._createHelper(C)}(),o.RabbitLegacy})}(jO)),jO.exports}var $O={exports:{}},oW;function BPe(){return oW||(oW=1,function(e,r){(function(o,s,c){e.exports=s(Rr(),pp(),fp(),Vd(),$o())})(In,function(o){return function(){var s=o,c=s.lib,d=c.BlockCipher,p=s.algo;const v=16,m=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],E=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var C={pbox:[],sbox:[]};function b(x,P){let N=P>>24&255,L=P>>16&255,M=P>>8&255,j=P&255,$=x.sbox[0][N]+x.sbox[1][L];return $=$^x.sbox[2][M],$=$+x.sbox[3][j],$}function R(x,P,N){let L=P,M=N,j;for(let $=0;$<v;++$)L=L^x.pbox[$],M=b(x,L)^M,j=L,L=M,M=j;return j=L,L=M,M=j,M=M^x.pbox[v],L=L^x.pbox[v+1],{left:L,right:M}}function w(x,P,N){let L=P,M=N,j;for(let $=v+1;$>1;--$)L=L^x.pbox[$],M=b(x,L)^M,j=L,L=M,M=j;return j=L,L=M,M=j,M=M^x.pbox[1],L=L^x.pbox[0],{left:L,right:M}}function I(x,P,N){for(let H=0;H<4;H++){x.sbox[H]=[];for(let G=0;G<256;G++)x.sbox[H][G]=E[H][G]}let L=0;for(let H=0;H<v+2;H++)x.pbox[H]=m[H]^P[L],L++,L>=N&&(L=0);let M=0,j=0,$=0;for(let H=0;H<v+2;H+=2)$=R(x,M,j),M=$.left,j=$.right,x.pbox[H]=M,x.pbox[H+1]=j;for(let H=0;H<4;H++)for(let G=0;G<256;G+=2)$=R(x,M,j),M=$.left,j=$.right,x.sbox[H][G]=M,x.sbox[H][G+1]=j;return!0}var O=p.Blowfish=d.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var x=this._keyPriorReset=this._key,P=x.words,N=x.sigBytes/4;I(C,P,N)}},encryptBlock:function(x,P){var N=R(C,x[P],x[P+1]);x[P]=N.left,x[P+1]=N.right},decryptBlock:function(x,P){var N=w(C,x[P],x[P+1]);x[P]=N.left,x[P+1]=N.right},blockSize:64/32,keySize:128/32,ivSize:64/32});s.Blowfish=d._createHelper(O)}(),o.Blowfish})}($O)),$O.exports}(function(e,r){(function(o,s,c){e.exports=s(Rr(),Qb(),mPe(),gPe(),pp(),vPe(),fp(),dJ(),p2(),EPe(),hJ(),_Pe(),SPe(),yPe(),f2(),CPe(),Vd(),$o(),bPe(),TPe(),RPe(),wPe(),IPe(),APe(),OPe(),xPe(),NPe(),DPe(),PPe(),LPe(),kPe(),MPe(),FPe(),UPe(),BPe())})(In,function(o){return o})})(uJ);var VPe=uJ.exports;const aW=Ld(VPe);let pJ="U2FsdGVkX1/nIO3//tPu/+LNS4S4tsxT3MzmKKuvXDxFFYxlol+eYrZkKcLoUBHMNoDedcuF62hF/qfPSSy59Q==";const jPe=10;{const e=aW.AES.decrypt("U2FsdGVkX1/nIO3//tPu/+LNS4S4tsxT3MzmKKuvXDxFFYxlol+eYrZkKcLoUBHMNoDedcuF62hF/qfPSSy59Q==","U2FsdGVkX1/fp5K6GAphzVxz");pJ=JSON.parse(e.toString(aW.enc.Utf8))}const jt={appId:pJ,channel:{}.AGORA_CHANNEL||"test",token:{}.AGORA_TOKEN?{}.AGORA_TOKEN:null,ShareScreenUID:jPe};function $Pe(){return[{channel:{}.AGORA_CHANNEL_0||"test0",token:{}.AGORA_TOKEN_0},{channel:{}.AGORA_CHANNEL_1||"test1",token:{}.AGORA_TOKEN_1},{channel:{}.AGORA_CHANNEL_2||"test2",token:{}.AGORA_TOKEN_2},{channel:{}.AGORA_CHANNEL_3||"test3",token:{}.AGORA_TOKEN_3},{channel:{}.AGORA_CHANNEL_4||"test4",token:{}.AGORA_TOKEN_4},{channel:{}.AGORA_CHANNEL_5||"test5",token:{}.AGORA_TOKEN_5},{channel:{}.AGORA_CHANNEL_6||"test6",token:{}.AGORA_TOKEN_6},{channel:{}.AGORA_CHANNEL_7||"test7",token:{}.AGORA_TOKEN_7},{channel:{}.AGORA_CHANNEL_8||"test8",token:{}.AGORA_TOKEN_8},{channel:{}.AGORA_CHANNEL_9||"test9",token:{}.AGORA_TOKEN_9}]}const Zc=e=>{y9(String(e));const r=cPe();return y9(),r},Ml=()=>"https://www.agora.io/en/wp-content/uploads/2022/10/3d-spatial-audio-icon.svg";function Xv({micOn:e,cameraOn:r,renderAction:o,renderLocalUser:s,renderRemoteUsers:c,showUserInfo:d=!0}){const p=mc(),v=GC()||0,m=S.useMemo(()=>Zc(v),[v]),E=S.useMemo(()=>Ml(),[]),C=el(),b=C.filter(O=>O.hasAudio||O.hasVideo),R=e||r,{localMicrophoneTrack:w}=Cm(e),{localCameraTrack:I}=bm(r);return Md([w,I]),se.jsxs(se.Fragment,{children:[o?o():void 0,d&&se.jsx(a2,{published:b.length+(R?1:0),total:C.length+1}),se.jsxs(uc,{children:[p&&(s?s():se.jsx(uc.Item,{children:se.jsx(o2,{audioTrack:w,cameraOn:r,cover:E,micOn:e,videoTrack:I,children:se.jsx(Eu,{children:`${m}{${v}}`})})})),c?c():void 0]})]})}const uy=({children:e,clientConfig:r={mode:"rtc",codec:"vp8"}})=>{const[o]=S.useState(()=>du.createClient(r));return se.jsx(ZW,{client:o,children:e})},ka=({calling:e,micOn:r,cameraOn:o,setMic:s,setCamera:c,setCalling:d})=>se.jsx(se.Fragment,{children:se.jsxs("div",{className:"inset-0 top-a flex justify-center items-center gap-3 px-6 py-3 bg-#21242c c-coolgray-3",children:[se.jsxs("div",{className:"flex-1 flex top-0 left-0 h-full items-center gap-3 px-6 py-3",children:[s&&se.jsx("button",{className:"btn",onClick:()=>s(),children:r?se.jsx(BDe,{}):se.jsx(VDe,{})}),c&&se.jsx("button",{className:"btn",onClick:()=>c(),children:o?se.jsx(jDe,{}):se.jsx($De,{})})]}),d&&se.jsx("button",{className:i2("btn btn-phone",{"btn-phone-active":e}),onClick:()=>d(),children:e?se.jsx("i",{className:"i-mdi-phone-hangup"}):se.jsx("i",{className:"i-mdi-phone"})})]})}),HPe=({screenShareOn:e,screenTrack:r,onCloseScreenShare:o})=>{const[s]=S.useState(()=>du.createClient({mode:"rtc",codec:"vp8"})),[c,d]=S.useState(null),[p,v]=S.useState(null);return no({appid:jt.appId,channel:jt.channel,token:jt.token,uid:jt.ShareScreenUID},e,s),S.useEffect(()=>{r?Array.isArray(r)?(d(r.filter(m=>m.trackMediaType==="video")[0]),v(r.filter(m=>m.trackMediaType==="audio")[0])):d(r):(v(null),d(null))},[r]),Md([c,p],e,s),JW(c,"track-ended",()=>{console.log("screen sharing ended"),o&&o()}),se.jsxs(Afe,{client:s,children:[e&&c&&se.jsx(Lv,{disabled:!e,play:e,style:{width:"300px",height:"300px"},track:c}),p&&se.jsx(KC,{disabled:!e,track:p})]})},sW=e=>{let r;const o=new Set,s=(C,b)=>{const R=typeof C=="function"?C(r):C;if(!Object.is(R,r)){const w=r;r=b??(typeof R!="object"||R===null)?R:Object.assign({},r,R),o.forEach(I=>I(r,w))}},c=()=>r,m={setState:s,getState:c,getInitialState:()=>E,subscribe:C=>(o.add(C),()=>o.delete(C)),destroy:()=>{o.clear()}},E=r=e(s,c,m);return m},WPe=e=>e?sW(e):sW;var fJ={exports:{}},mJ={},gJ={exports:{}},vJ={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _m=S;function zPe(e,r){return e===r&&(e!==0||1/e===1/r)||e!==e&&r!==r}var GPe=typeof Object.is=="function"?Object.is:zPe,KPe=_m.useState,qPe=_m.useEffect,YPe=_m.useLayoutEffect,XPe=_m.useDebugValue;function JPe(e,r){var o=r(),s=KPe({inst:{value:o,getSnapshot:r}}),c=s[0].inst,d=s[1];return YPe(function(){c.value=o,c.getSnapshot=r,HO(c)&&d({inst:c})},[e,o,r]),qPe(function(){return HO(c)&&d({inst:c}),e(function(){HO(c)&&d({inst:c})})},[e]),XPe(o),o}function HO(e){var r=e.getSnapshot;e=e.value;try{var o=r();return!GPe(e,o)}catch{return!0}}function QPe(e,r){return r()}var ZPe=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?QPe:JPe;vJ.useSyncExternalStore=_m.useSyncExternalStore!==void 0?_m.useSyncExternalStore:ZPe;gJ.exports=vJ;var e2e=gJ.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zb=S,t2e=e2e;function n2e(e,r){return e===r&&(e!==0||1/e===1/r)||e!==e&&r!==r}var r2e=typeof Object.is=="function"?Object.is:n2e,i2e=t2e.useSyncExternalStore,o2e=Zb.useRef,a2e=Zb.useEffect,s2e=Zb.useMemo,c2e=Zb.useDebugValue;mJ.useSyncExternalStoreWithSelector=function(e,r,o,s,c){var d=o2e(null);if(d.current===null){var p={hasValue:!1,value:null};d.current=p}else p=d.current;d=s2e(function(){function m(w){if(!E){if(E=!0,C=w,w=s(w),c!==void 0&&p.hasValue){var I=p.value;if(c(I,w))return b=I}return b=w}if(I=b,r2e(C,w))return I;var O=s(w);return c!==void 0&&c(I,O)?I:(C=w,b=O)}var E=!1,C,b,R=o===void 0?null:o;return[function(){return m(r())},R===null?void 0:function(){return m(R())}]},[r,o,s,c]);var v=i2e(e,d[0],d[1]);return a2e(function(){p.hasValue=!0,p.value=v},[v]),c2e(v),v};fJ.exports=mJ;var l2e=fJ.exports;const u2e=Ld(l2e),{useDebugValue:d2e}=Be,{useSyncExternalStoreWithSelector:h2e}=u2e;const p2e=e=>e;function f2e(e,r=p2e,o){const s=h2e(e.subscribe,e.getState,e.getServerState||e.getInitialState,r,o);return d2e(s),s}const cW=e=>{const r=typeof e=="function"?WPe(e):e,o=(s,c)=>f2e(r,s,c);return Object.assign(o,r),o},m2e=e=>e?cW(e):cW,g2e=jt.appId,v2e=$Pe(),Xg=m2e((e,r)=>({getRooms:()=>{let{rooms:o}=r();o=v2e.map(({token:s,channel:c})=>{const d=du.createClient({mode:"live",codec:"vp8"});return d.join(g2e,c,s||null,null),{channel:c,token:s,client:d}}),e({rooms:o})},selectChannel:async o=>{let{hostRoom:s,localTracks:c}=r();const{rooms:d}=r();if(!o){s&&(c&&s.client.localTracks.length>0&&await s.client.unpublish(c),s.client.setClientRole("audience"),s=null,e({hostRoom:s,localTracks:c}));return}if(s){if(s.client.channelName===o)return;c&&await s.client.unpublish(c),await s.client.setClientRole("audience")}s=d==null?void 0:d.find(p=>p.client.channelName===o),s&&(await s.client.setClientRole("host"),c||(c=await du.createMicrophoneAndCameraTracks()),await s.client.publish(c)),e({localTracks:c,hostRoom:s})},dispose:()=>{const{rooms:o,hostRoom:s}=r();if(s==null||s.client.leave(),o)for(const c of o)c.client.leave()}}));var E2e=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function _2e(e){var r=e.defaultInputValue,o=r===void 0?"":r,s=e.defaultMenuIsOpen,c=s===void 0?!1:s,d=e.defaultValue,p=d===void 0?null:d,v=e.inputValue,m=e.menuIsOpen,E=e.onChange,C=e.onInputChange,b=e.onMenuClose,R=e.onMenuOpen,w=e.value,I=kn(e,E2e),O=S.useState(v!==void 0?v:o),x=Ue(O,2),P=x[0],N=x[1],L=S.useState(m!==void 0?m:c),M=Ue(L,2),j=M[0],$=M[1],H=S.useState(w!==void 0?w:p),G=Ue(H,2),Y=G[0],q=G[1],J=S.useCallback(function(te,de){typeof E=="function"&&E(te,de),q(te)},[E]),re=S.useCallback(function(te,de){var fe;typeof C=="function"&&(fe=C(te,de)),N(fe!==void 0?fe:te)},[C]),Z=S.useCallback(function(){typeof R=="function"&&R(),$(!0)},[R]),Q=S.useCallback(function(){typeof b=="function"&&b(),$(!1)},[b]),he=v!==void 0?v:P,oe=m!==void 0?m:j,ae=w!==void 0?w:Y;return _e(_e({},I),{},{inputValue:he,menuIsOpen:oe,onChange:J,onInputChange:re,onMenuClose:Q,onMenuOpen:Z,value:ae})}function S2e(e){if(e.sheet)return e.sheet;for(var r=0;r<document.styleSheets.length;r++)if(document.styleSheets[r].ownerNode===e)return document.styleSheets[r]}function y2e(e){var r=document.createElement("style");return r.setAttribute("data-emotion",e.key),e.nonce!==void 0&&r.setAttribute("nonce",e.nonce),r.appendChild(document.createTextNode("")),r.setAttribute("data-s",""),r}var C2e=function(){function e(o){var s=this;this._insertTag=function(c){var d;s.tags.length===0?s.insertionPoint?d=s.insertionPoint.nextSibling:s.prepend?d=s.container.firstChild:d=s.before:d=s.tags[s.tags.length-1].nextSibling,s.container.insertBefore(c,d),s.tags.push(c)},this.isSpeedy=o.speedy===void 0?!0:o.speedy,this.tags=[],this.ctr=0,this.nonce=o.nonce,this.key=o.key,this.container=o.container,this.prepend=o.prepend,this.insertionPoint=o.insertionPoint,this.before=null}var r=e.prototype;return r.hydrate=function(s){s.forEach(this._insertTag)},r.insert=function(s){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(y2e(this));var c=this.tags[this.tags.length-1];if(this.isSpeedy){var d=S2e(c);try{d.insertRule(s,d.cssRules.length)}catch{}}else c.appendChild(document.createTextNode(s));this.ctr++},r.flush=function(){this.tags.forEach(function(s){return s.parentNode&&s.parentNode.removeChild(s)}),this.tags=[],this.ctr=0},e}(),ha="-ms-",MC="-moz-",Fr="-webkit-",EJ="comm",m2="rule",g2="decl",b2e="@import",_J="@keyframes",T2e="@layer",R2e=Math.abs,eT=String.fromCharCode,w2e=Object.assign;function I2e(e,r){return Qo(e,0)^45?(((r<<2^Qo(e,0))<<2^Qo(e,1))<<2^Qo(e,2))<<2^Qo(e,3):0}function SJ(e){return e.trim()}function A2e(e,r){return(e=r.exec(e))?e[0]:e}function Ur(e,r,o){return e.replace(r,o)}function XN(e,r){return e.indexOf(r)}function Qo(e,r){return e.charCodeAt(r)|0}function Ov(e,r,o){return e.slice(r,o)}function Il(e){return e.length}function v2(e){return e.length}function dy(e,r){return r.push(e),e}function O2e(e,r){return e.map(r).join("")}var tT=1,Sm=1,yJ=0,os=0,lo=0,Um="";function nT(e,r,o,s,c,d,p){return{value:e,root:r,parent:o,type:s,props:c,children:d,line:tT,column:Sm,length:p,return:""}}function bg(e,r){return w2e(nT("",null,null,"",null,null,0),e,{length:-e.length},r)}function x2e(){return lo}function N2e(){return lo=os>0?Qo(Um,--os):0,Sm--,lo===10&&(Sm=1,tT--),lo}function ws(){return lo=os<yJ?Qo(Um,os++):0,Sm++,lo===10&&(Sm=1,tT++),lo}function Ll(){return Qo(Um,os)}function jy(){return os}function Jv(e,r){return Ov(Um,e,r)}function xv(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function CJ(e){return tT=Sm=1,yJ=Il(Um=e),os=0,[]}function bJ(e){return Um="",e}function $y(e){return SJ(Jv(os-1,JN(e===91?e+2:e===40?e+1:e)))}function D2e(e){for(;(lo=Ll())&&lo<33;)ws();return xv(e)>2||xv(lo)>3?"":" "}function P2e(e,r){for(;--r&&ws()&&!(lo<48||lo>102||lo>57&&lo<65||lo>70&&lo<97););return Jv(e,jy()+(r<6&&Ll()==32&&ws()==32))}function JN(e){for(;ws();)switch(lo){case e:return os;case 34:case 39:e!==34&&e!==39&&JN(lo);break;case 40:e===41&&JN(e);break;case 92:ws();break}return os}function L2e(e,r){for(;ws()&&e+lo!==47+10;)if(e+lo===42+42&&Ll()===47)break;return"/*"+Jv(r,os-1)+"*"+eT(e===47?e:ws())}function k2e(e){for(;!xv(Ll());)ws();return Jv(e,os)}function M2e(e){return bJ(Hy("",null,null,null,[""],e=CJ(e),0,[0],e))}function Hy(e,r,o,s,c,d,p,v,m){for(var E=0,C=0,b=p,R=0,w=0,I=0,O=1,x=1,P=1,N=0,L="",M=c,j=d,$=s,H=L;x;)switch(I=N,N=ws()){case 40:if(I!=108&&Qo(H,b-1)==58){XN(H+=Ur($y(N),"&","&\f"),"&\f")!=-1&&(P=-1);break}case 34:case 39:case 91:H+=$y(N);break;case 9:case 10:case 13:case 32:H+=D2e(I);break;case 92:H+=P2e(jy()-1,7);continue;case 47:switch(Ll()){case 42:case 47:dy(F2e(L2e(ws(),jy()),r,o),m);break;default:H+="/"}break;case 123*O:v[E++]=Il(H)*P;case 125*O:case 59:case 0:switch(N){case 0:case 125:x=0;case 59+C:P==-1&&(H=Ur(H,/\f/g,"")),w>0&&Il(H)-b&&dy(w>32?uW(H+";",s,o,b-1):uW(Ur(H," ","")+";",s,o,b-2),m);break;case 59:H+=";";default:if(dy($=lW(H,r,o,E,C,c,v,L,M=[],j=[],b),d),N===123)if(C===0)Hy(H,r,$,$,M,d,b,v,j);else switch(R===99&&Qo(H,3)===110?100:R){case 100:case 108:case 109:case 115:Hy(e,$,$,s&&dy(lW(e,$,$,0,0,c,v,L,c,M=[],b),j),c,j,b,v,s?M:j);break;default:Hy(H,$,$,$,[""],j,0,v,j)}}E=C=w=0,O=P=1,L=H="",b=p;break;case 58:b=1+Il(H),w=I;default:if(O<1){if(N==123)--O;else if(N==125&&O++==0&&N2e()==125)continue}switch(H+=eT(N),N*O){case 38:P=C>0?1:(H+="\f",-1);break;case 44:v[E++]=(Il(H)-1)*P,P=1;break;case 64:Ll()===45&&(H+=$y(ws())),R=Ll(),C=b=Il(L=H+=k2e(jy())),N++;break;case 45:I===45&&Il(H)==2&&(O=0)}}return d}function lW(e,r,o,s,c,d,p,v,m,E,C){for(var b=c-1,R=c===0?d:[""],w=v2(R),I=0,O=0,x=0;I<s;++I)for(var P=0,N=Ov(e,b+1,b=R2e(O=p[I])),L=e;P<w;++P)(L=SJ(O>0?R[P]+" "+N:Ur(N,/&\f/g,R[P])))&&(m[x++]=L);return nT(e,r,o,c===0?m2:v,m,E,C)}function F2e(e,r,o){return nT(e,r,o,EJ,eT(x2e()),Ov(e,2,-2),0)}function uW(e,r,o,s){return nT(e,r,o,g2,Ov(e,0,s),Ov(e,s+1,-1),s)}function cm(e,r){for(var o="",s=v2(e),c=0;c<s;c++)o+=r(e[c],c,e,r)||"";return o}function U2e(e,r,o,s){switch(e.type){case T2e:if(e.children.length)break;case b2e:case g2:return e.return=e.return||e.value;case EJ:return"";case _J:return e.return=e.value+"{"+cm(e.children,s)+"}";case m2:e.value=e.props.join(",")}return Il(o=cm(e.children,s))?e.return=e.value+"{"+o+"}":""}function B2e(e){var r=v2(e);return function(o,s,c,d){for(var p="",v=0;v<r;v++)p+=e[v](o,s,c,d)||"";return p}}function V2e(e){return function(r){r.root||(r=r.return)&&e(r)}}function j2e(e){var r=Object.create(null);return function(o){return r[o]===void 0&&(r[o]=e(o)),r[o]}}var $2e=function(r,o,s){for(var c=0,d=0;c=d,d=Ll(),c===38&&d===12&&(o[s]=1),!xv(d);)ws();return Jv(r,os)},H2e=function(r,o){var s=-1,c=44;do switch(xv(c)){case 0:c===38&&Ll()===12&&(o[s]=1),r[s]+=$2e(os-1,o,s);break;case 2:r[s]+=$y(c);break;case 4:if(c===44){r[++s]=Ll()===58?"&\f":"",o[s]=r[s].length;break}default:r[s]+=eT(c)}while(c=ws());return r},W2e=function(r,o){return bJ(H2e(CJ(r),o))},dW=new WeakMap,z2e=function(r){if(!(r.type!=="rule"||!r.parent||r.length<1)){for(var o=r.value,s=r.parent,c=r.column===s.column&&r.line===s.line;s.type!=="rule";)if(s=s.parent,!s)return;if(!(r.props.length===1&&o.charCodeAt(0)!==58&&!dW.get(s))&&!c){dW.set(r,!0);for(var d=[],p=W2e(o,d),v=s.props,m=0,E=0;m<p.length;m++)for(var C=0;C<v.length;C++,E++)r.props[E]=d[m]?p[m].replace(/&\f/g,v[C]):v[C]+" "+p[m]}}},G2e=function(r){if(r.type==="decl"){var o=r.value;o.charCodeAt(0)===108&&o.charCodeAt(2)===98&&(r.return="",r.value="")}};function TJ(e,r){switch(I2e(e,r)){case 5103:return Fr+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Fr+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Fr+e+MC+e+ha+e+e;case 6828:case 4268:return Fr+e+ha+e+e;case 6165:return Fr+e+ha+"flex-"+e+e;case 5187:return Fr+e+Ur(e,/(\w+).+(:[^]+)/,Fr+"box-$1$2"+ha+"flex-$1$2")+e;case 5443:return Fr+e+ha+"flex-item-"+Ur(e,/flex-|-self/,"")+e;case 4675:return Fr+e+ha+"flex-line-pack"+Ur(e,/align-content|flex-|-self/,"")+e;case 5548:return Fr+e+ha+Ur(e,"shrink","negative")+e;case 5292:return Fr+e+ha+Ur(e,"basis","preferred-size")+e;case 6060:return Fr+"box-"+Ur(e,"-grow","")+Fr+e+ha+Ur(e,"grow","positive")+e;case 4554:return Fr+Ur(e,/([^-])(transform)/g,"$1"+Fr+"$2")+e;case 6187:return Ur(Ur(Ur(e,/(zoom-|grab)/,Fr+"$1"),/(image-set)/,Fr+"$1"),e,"")+e;case 5495:case 3959:return Ur(e,/(image-set\([^]*)/,Fr+"$1$`$1");case 4968:return Ur(Ur(e,/(.+:)(flex-)?(.*)/,Fr+"box-pack:$3"+ha+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Fr+e+e;case 4095:case 3583:case 4068:case 2532:return Ur(e,/(.+)-inline(.+)/,Fr+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Il(e)-1-r>6)switch(Qo(e,r+1)){case 109:if(Qo(e,r+4)!==45)break;case 102:return Ur(e,/(.+:)(.+)-([^]+)/,"$1"+Fr+"$2-$3$1"+MC+(Qo(e,r+3)==108?"$3":"$2-$3"))+e;case 115:return~XN(e,"stretch")?TJ(Ur(e,"stretch","fill-available"),r)+e:e}break;case 4949:if(Qo(e,r+1)!==115)break;case 6444:switch(Qo(e,Il(e)-3-(~XN(e,"!important")&&10))){case 107:return Ur(e,":",":"+Fr)+e;case 101:return Ur(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Fr+(Qo(e,14)===45?"inline-":"")+"box$3$1"+Fr+"$2$3$1"+ha+"$2box$3")+e}break;case 5936:switch(Qo(e,r+11)){case 114:return Fr+e+ha+Ur(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Fr+e+ha+Ur(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Fr+e+ha+Ur(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Fr+e+ha+e+e}return e}var K2e=function(r,o,s,c){if(r.length>-1&&!r.return)switch(r.type){case g2:r.return=TJ(r.value,r.length);break;case _J:return cm([bg(r,{value:Ur(r.value,"@","@"+Fr)})],c);case m2:if(r.length)return O2e(r.props,function(d){switch(A2e(d,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return cm([bg(r,{props:[Ur(d,/:(read-\w+)/,":"+MC+"$1")]})],c);case"::placeholder":return cm([bg(r,{props:[Ur(d,/:(plac\w+)/,":"+Fr+"input-$1")]}),bg(r,{props:[Ur(d,/:(plac\w+)/,":"+MC+"$1")]}),bg(r,{props:[Ur(d,/:(plac\w+)/,ha+"input-$1")]})],c)}return""})}},q2e=[K2e],Y2e=function(r){var o=r.key;if(o==="css"){var s=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(s,function(O){var x=O.getAttribute("data-emotion");x.indexOf(" ")!==-1&&(document.head.appendChild(O),O.setAttribute("data-s",""))})}var c=r.stylisPlugins||q2e,d={},p,v=[];p=r.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+o+' "]'),function(O){for(var x=O.getAttribute("data-emotion").split(" "),P=1;P<x.length;P++)d[x[P]]=!0;v.push(O)});var m,E=[z2e,G2e];{var C,b=[U2e,V2e(function(O){C.insert(O)})],R=B2e(E.concat(c,b)),w=function(x){return cm(M2e(x),R)};m=function(x,P,N,L){C=N,w(x?x+"{"+P.styles+"}":P.styles),L&&(I.inserted[P.name]=!0)}}var I={key:o,sheet:new C2e({key:o,container:p,nonce:r.nonce,speedy:r.speedy,prepend:r.prepend,insertionPoint:r.insertionPoint}),nonce:r.nonce,inserted:d,registered:{},insert:m};return I.sheet.hydrate(v),I},RJ={exports:{}},ei={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ho=typeof Symbol=="function"&&Symbol.for,E2=Ho?Symbol.for("react.element"):60103,_2=Ho?Symbol.for("react.portal"):60106,rT=Ho?Symbol.for("react.fragment"):60107,iT=Ho?Symbol.for("react.strict_mode"):60108,oT=Ho?Symbol.for("react.profiler"):60114,aT=Ho?Symbol.for("react.provider"):60109,sT=Ho?Symbol.for("react.context"):60110,S2=Ho?Symbol.for("react.async_mode"):60111,cT=Ho?Symbol.for("react.concurrent_mode"):60111,lT=Ho?Symbol.for("react.forward_ref"):60112,uT=Ho?Symbol.for("react.suspense"):60113,X2e=Ho?Symbol.for("react.suspense_list"):60120,dT=Ho?Symbol.for("react.memo"):60115,hT=Ho?Symbol.for("react.lazy"):60116,J2e=Ho?Symbol.for("react.block"):60121,Q2e=Ho?Symbol.for("react.fundamental"):60117,Z2e=Ho?Symbol.for("react.responder"):60118,eLe=Ho?Symbol.for("react.scope"):60119;function Ps(e){if(typeof e=="object"&&e!==null){var r=e.$$typeof;switch(r){case E2:switch(e=e.type,e){case S2:case cT:case rT:case oT:case iT:case uT:return e;default:switch(e=e&&e.$$typeof,e){case sT:case lT:case hT:case dT:case aT:return e;default:return r}}case _2:return r}}}function wJ(e){return Ps(e)===cT}ei.AsyncMode=S2;ei.ConcurrentMode=cT;ei.ContextConsumer=sT;ei.ContextProvider=aT;ei.Element=E2;ei.ForwardRef=lT;ei.Fragment=rT;ei.Lazy=hT;ei.Memo=dT;ei.Portal=_2;ei.Profiler=oT;ei.StrictMode=iT;ei.Suspense=uT;ei.isAsyncMode=function(e){return wJ(e)||Ps(e)===S2};ei.isConcurrentMode=wJ;ei.isContextConsumer=function(e){return Ps(e)===sT};ei.isContextProvider=function(e){return Ps(e)===aT};ei.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===E2};ei.isForwardRef=function(e){return Ps(e)===lT};ei.isFragment=function(e){return Ps(e)===rT};ei.isLazy=function(e){return Ps(e)===hT};ei.isMemo=function(e){return Ps(e)===dT};ei.isPortal=function(e){return Ps(e)===_2};ei.isProfiler=function(e){return Ps(e)===oT};ei.isStrictMode=function(e){return Ps(e)===iT};ei.isSuspense=function(e){return Ps(e)===uT};ei.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===rT||e===cT||e===oT||e===iT||e===uT||e===X2e||typeof e=="object"&&e!==null&&(e.$$typeof===hT||e.$$typeof===dT||e.$$typeof===aT||e.$$typeof===sT||e.$$typeof===lT||e.$$typeof===Q2e||e.$$typeof===Z2e||e.$$typeof===eLe||e.$$typeof===J2e)};ei.typeOf=Ps;RJ.exports=ei;var tLe=RJ.exports,IJ=tLe,nLe={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},rLe={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},AJ={};AJ[IJ.ForwardRef]=nLe;AJ[IJ.Memo]=rLe;var iLe=!0;function oLe(e,r,o){var s="";return o.split(" ").forEach(function(c){e[c]!==void 0?r.push(e[c]+";"):s+=c+" "}),s}var OJ=function(r,o,s){var c=r.key+"-"+o.name;(s===!1||iLe===!1)&&r.registered[c]===void 0&&(r.registered[c]=o.styles)},aLe=function(r,o,s){OJ(r,o,s);var c=r.key+"-"+o.name;if(r.inserted[o.name]===void 0){var d=o;do r.insert(o===d?"."+c:"",d,r.sheet,!0),d=d.next;while(d!==void 0)}};function sLe(e){for(var r=0,o,s=0,c=e.length;c>=4;++s,c-=4)o=e.charCodeAt(s)&255|(e.charCodeAt(++s)&255)<<8|(e.charCodeAt(++s)&255)<<16|(e.charCodeAt(++s)&255)<<24,o=(o&65535)*1540483477+((o>>>16)*59797<<16),o^=o>>>24,r=(o&65535)*1540483477+((o>>>16)*59797<<16)^(r&65535)*1540483477+((r>>>16)*59797<<16);switch(c){case 3:r^=(e.charCodeAt(s+2)&255)<<16;case 2:r^=(e.charCodeAt(s+1)&255)<<8;case 1:r^=e.charCodeAt(s)&255,r=(r&65535)*1540483477+((r>>>16)*59797<<16)}return r^=r>>>13,r=(r&65535)*1540483477+((r>>>16)*59797<<16),((r^r>>>15)>>>0).toString(36)}var cLe={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},lLe=/[A-Z]|^ms/g,uLe=/_EMO_([^_]+?)_([^]*?)_EMO_/g,xJ=function(r){return r.charCodeAt(1)===45},hW=function(r){return r!=null&&typeof r!="boolean"},WO=j2e(function(e){return xJ(e)?e:e.replace(lLe,"-$&").toLowerCase()}),pW=function(r,o){switch(r){case"animation":case"animationName":if(typeof o=="string")return o.replace(uLe,function(s,c,d){return Al={name:c,styles:d,next:Al},c})}return cLe[r]!==1&&!xJ(r)&&typeof o=="number"&&o!==0?o+"px":o};function Nv(e,r,o){if(o==null)return"";if(o.__emotion_styles!==void 0)return o;switch(typeof o){case"boolean":return"";case"object":{if(o.anim===1)return Al={name:o.name,styles:o.styles,next:Al},o.name;if(o.styles!==void 0){var s=o.next;if(s!==void 0)for(;s!==void 0;)Al={name:s.name,styles:s.styles,next:Al},s=s.next;var c=o.styles+";";return c}return dLe(e,r,o)}case"function":{if(e!==void 0){var d=Al,p=o(e);return Al=d,Nv(e,r,p)}break}}if(r==null)return o;var v=r[o];return v!==void 0?v:o}function dLe(e,r,o){var s="";if(Array.isArray(o))for(var c=0;c<o.length;c++)s+=Nv(e,r,o[c])+";";else for(var d in o){var p=o[d];if(typeof p!="object")r!=null&&r[p]!==void 0?s+=d+"{"+r[p]+"}":hW(p)&&(s+=WO(d)+":"+pW(d,p)+";");else if(Array.isArray(p)&&typeof p[0]=="string"&&(r==null||r[p[0]]===void 0))for(var v=0;v<p.length;v++)hW(p[v])&&(s+=WO(d)+":"+pW(d,p[v])+";");else{var m=Nv(e,r,p);switch(d){case"animation":case"animationName":{s+=WO(d)+":"+m+";";break}default:s+=d+"{"+m+"}"}}}return s}var fW=/label:\s*([^\s;\n{]+)\s*(;|$)/g,Al,NJ=function(r,o,s){if(r.length===1&&typeof r[0]=="object"&&r[0]!==null&&r[0].styles!==void 0)return r[0];var c=!0,d="";Al=void 0;var p=r[0];p==null||p.raw===void 0?(c=!1,d+=Nv(s,o,p)):d+=p[0];for(var v=1;v<r.length;v++)d+=Nv(s,o,r[v]),c&&(d+=p[v]);fW.lastIndex=0;for(var m="",E;(E=fW.exec(d))!==null;)m+="-"+E[1];var C=sLe(d)+m;return{name:C,styles:d,next:Al}},hLe=function(r){return r()},pLe=zh["useInsertionEffect"]?zh["useInsertionEffect"]:!1,fLe=pLe||hLe,y2={}.hasOwnProperty,DJ=S.createContext(typeof HTMLElement<"u"?Y2e({key:"css"}):null);DJ.Provider;var mLe=function(r){return S.forwardRef(function(o,s){var c=S.useContext(DJ);return r(o,c,s)})},gLe=S.createContext({}),QN="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",vLe=function(r,o){var s={};for(var c in o)y2.call(o,c)&&(s[c]=o[c]);return s[QN]=r,s},ELe=function(r){var o=r.cache,s=r.serialized,c=r.isStringTag;return OJ(o,s,c),fLe(function(){return aLe(o,s,c)}),null},_Le=mLe(function(e,r,o){var s=e.css;typeof s=="string"&&r.registered[s]!==void 0&&(s=r.registered[s]);var c=e[QN],d=[s],p="";typeof e.className=="string"?p=oLe(r.registered,d,e.className):e.className!=null&&(p=e.className+" ");var v=NJ(d,void 0,S.useContext(gLe));p+=r.key+"-"+v.name;var m={};for(var E in e)y2.call(e,E)&&E!=="css"&&E!==QN&&(m[E]=e[E]);return m.ref=o,m.className=p,S.createElement(S.Fragment,null,S.createElement(ELe,{cache:r,serialized:v,isStringTag:typeof c=="string"}),S.createElement(c,m))}),SLe=_Le,hn=function(r,o){var s=arguments;if(o==null||!y2.call(o,"css"))return S.createElement.apply(void 0,s);var c=s.length,d=new Array(c);d[0]=SLe,d[1]=vLe(r,o);for(var p=2;p<c;p++)d[p]=s[p];return S.createElement.apply(null,d)};function C2(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return NJ(r)}var yLe=function(){var r=C2.apply(void 0,arguments),o="animation-"+r.name;return{name:o,styles:"@keyframes "+o+"{"+r.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};function CLe(e,r){return r||(r=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(r)}}))}const bLe=Math.min,TLe=Math.max,FC=Math.round,hy=Math.floor,UC=e=>({x:e,y:e});function RLe(e){const{x:r,y:o,width:s,height:c}=e;return{width:s,height:c,top:o,left:r,right:r+s,bottom:o+c,x:r,y:o}}function PJ(e){return kJ(e)?(e.nodeName||"").toLowerCase():"#document"}function Yc(e){var r;return(e==null||(r=e.ownerDocument)==null?void 0:r.defaultView)||window}function LJ(e){var r;return(r=(kJ(e)?e.ownerDocument:e.document)||window.document)==null?void 0:r.documentElement}function kJ(e){return e instanceof Node||e instanceof Yc(e).Node}function ZN(e){return e instanceof Element||e instanceof Yc(e).Element}function b2(e){return e instanceof HTMLElement||e instanceof Yc(e).HTMLElement}function mW(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Yc(e).ShadowRoot}function MJ(e){const{overflow:r,overflowX:o,overflowY:s,display:c}=T2(e);return/auto|scroll|overlay|hidden|clip/.test(r+s+o)&&!["inline","contents"].includes(c)}function wLe(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function ILe(e){return["html","body","#document"].includes(PJ(e))}function T2(e){return Yc(e).getComputedStyle(e)}function ALe(e){if(PJ(e)==="html")return e;const r=e.assignedSlot||e.parentNode||mW(e)&&e.host||LJ(e);return mW(r)?r.host:r}function FJ(e){const r=ALe(e);return ILe(r)?e.ownerDocument?e.ownerDocument.body:e.body:b2(r)&&MJ(r)?r:FJ(r)}function BC(e,r,o){var s;r===void 0&&(r=[]),o===void 0&&(o=!0);const c=FJ(e),d=c===((s=e.ownerDocument)==null?void 0:s.body),p=Yc(c);return d?r.concat(p,p.visualViewport||[],MJ(c)?c:[],p.frameElement&&o?BC(p.frameElement):[]):r.concat(c,BC(c,[],o))}function OLe(e){const r=T2(e);let o=parseFloat(r.width)||0,s=parseFloat(r.height)||0;const c=b2(e),d=c?e.offsetWidth:o,p=c?e.offsetHeight:s,v=FC(o)!==d||FC(s)!==p;return v&&(o=d,s=p),{width:o,height:s,$:v}}function R2(e){return ZN(e)?e:e.contextElement}function zO(e){const r=R2(e);if(!b2(r))return UC(1);const o=r.getBoundingClientRect(),{width:s,height:c,$:d}=OLe(r);let p=(d?FC(o.width):o.width)/s,v=(d?FC(o.height):o.height)/c;return(!p||!Number.isFinite(p))&&(p=1),(!v||!Number.isFinite(v))&&(v=1),{x:p,y:v}}const xLe=UC(0);function NLe(e){const r=Yc(e);return!wLe()||!r.visualViewport?xLe:{x:r.visualViewport.offsetLeft,y:r.visualViewport.offsetTop}}function DLe(e,r,o){return r===void 0&&(r=!1),!o||r&&o!==Yc(e)?!1:r}function gW(e,r,o,s){r===void 0&&(r=!1),o===void 0&&(o=!1);const c=e.getBoundingClientRect(),d=R2(e);let p=UC(1);r&&(s?ZN(s)&&(p=zO(s)):p=zO(e));const v=DLe(d,o,s)?NLe(d):UC(0);let m=(c.left+v.x)/p.x,E=(c.top+v.y)/p.y,C=c.width/p.x,b=c.height/p.y;if(d){const R=Yc(d),w=s&&ZN(s)?Yc(s):s;let I=R,O=I.frameElement;for(;O&&s&&w!==I;){const x=zO(O),P=O.getBoundingClientRect(),N=T2(O),L=P.left+(O.clientLeft+parseFloat(N.paddingLeft))*x.x,M=P.top+(O.clientTop+parseFloat(N.paddingTop))*x.y;m*=x.x,E*=x.y,C*=x.x,b*=x.y,m+=L,E+=M,I=Yc(O),O=I.frameElement}}return RLe({width:C,height:b,x:m,y:E})}function PLe(e,r){let o=null,s;const c=LJ(e);function d(){var v;clearTimeout(s),(v=o)==null||v.disconnect(),o=null}function p(v,m){v===void 0&&(v=!1),m===void 0&&(m=1),d();const{left:E,top:C,width:b,height:R}=e.getBoundingClientRect();if(v||r(),!b||!R)return;const w=hy(C),I=hy(c.clientWidth-(E+b)),O=hy(c.clientHeight-(C+R)),x=hy(E),N={rootMargin:-w+"px "+-I+"px "+-O+"px "+-x+"px",threshold:TLe(0,bLe(1,m))||1};let L=!0;function M(j){const $=j[0].intersectionRatio;if($!==m){if(!L)return p();$?p(!1,$):s=setTimeout(()=>{p(!1,1e-7)},1e3)}L=!1}try{o=new IntersectionObserver(M,{...N,root:c.ownerDocument})}catch{o=new IntersectionObserver(M,N)}o.observe(e)}return p(!0),d}function LLe(e,r,o,s){s===void 0&&(s={});const{ancestorScroll:c=!0,ancestorResize:d=!0,elementResize:p=typeof ResizeObserver=="function",layoutShift:v=typeof IntersectionObserver=="function",animationFrame:m=!1}=s,E=R2(e),C=c||d?[...E?BC(E):[],...BC(r)]:[];C.forEach(P=>{c&&P.addEventListener("scroll",o,{passive:!0}),d&&P.addEventListener("resize",o)});const b=E&&v?PLe(E,o):null;let R=-1,w=null;p&&(w=new ResizeObserver(P=>{let[N]=P;N&&N.target===E&&w&&(w.unobserve(r),cancelAnimationFrame(R),R=requestAnimationFrame(()=>{var L;(L=w)==null||L.observe(r)})),o()}),E&&!m&&w.observe(E),w.observe(r));let I,O=m?gW(e):null;m&&x();function x(){const P=gW(e);O&&(P.x!==O.x||P.y!==O.y||P.width!==O.width||P.height!==O.height)&&o(),O=P,I=requestAnimationFrame(x)}return o(),()=>{var P;C.forEach(N=>{c&&N.removeEventListener("scroll",o),d&&N.removeEventListener("resize",o)}),b==null||b(),(P=w)==null||P.disconnect(),w=null,m&&cancelAnimationFrame(I)}}var eD=S.useLayoutEffect,kLe=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],VC=function(){};function MLe(e,r){return r?r[0]==="-"?e+r:e+"__"+r:e}function FLe(e,r){for(var o=arguments.length,s=new Array(o>2?o-2:0),c=2;c<o;c++)s[c-2]=arguments[c];var d=[].concat(s);if(r&&e)for(var p in r)r.hasOwnProperty(p)&&r[p]&&d.push("".concat(MLe(e,p)));return d.filter(function(v){return v}).map(function(v){return String(v).trim()}).join(" ")}var vW=function(r){return GLe(r)?r.filter(Boolean):pn(r)==="object"&&r!==null?[r]:[]},UJ=function(r){r.className,r.clearValue,r.cx,r.getStyles,r.getClassNames,r.getValue,r.hasValue,r.isMulti,r.isRtl,r.options,r.selectOption,r.selectProps,r.setValue,r.theme;var o=kn(r,kLe);return _e({},o)},Xi=function(r,o,s){var c=r.cx,d=r.getStyles,p=r.getClassNames,v=r.className;return{css:d(o,r),className:c(s??{},p(o,r),v)}};function pT(e){return[document.documentElement,document.body,window].indexOf(e)>-1}function ULe(e){return pT(e)?window.innerHeight:e.clientHeight}function BJ(e){return pT(e)?window.pageYOffset:e.scrollTop}function jC(e,r){if(pT(e)){window.scrollTo(0,r);return}e.scrollTop=r}function BLe(e){var r=getComputedStyle(e),o=r.position==="absolute",s=/(auto|scroll)/;if(r.position==="fixed")return document.documentElement;for(var c=e;c=c.parentElement;)if(r=getComputedStyle(c),!(o&&r.position==="static")&&s.test(r.overflow+r.overflowY+r.overflowX))return c;return document.documentElement}function VLe(e,r,o,s){return o*((e=e/s-1)*e*e+1)+r}function py(e,r){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:VC,c=BJ(e),d=r-c,p=10,v=0;function m(){v+=p;var E=VLe(v,c,d,o);jC(e,E),v<o?window.requestAnimationFrame(m):s(e)}m()}function EW(e,r){var o=e.getBoundingClientRect(),s=r.getBoundingClientRect(),c=r.offsetHeight/3;s.bottom+c>o.bottom?jC(e,Math.min(r.offsetTop+r.clientHeight-e.offsetHeight+c,e.scrollHeight)):s.top-c<o.top&&jC(e,Math.max(r.offsetTop-c,0))}function jLe(e){var r=e.getBoundingClientRect();return{bottom:r.bottom,height:r.height,left:r.left,right:r.right,top:r.top,width:r.width}}function _W(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function $Le(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var VJ=!1,HLe={get passive(){return VJ=!0}},fy=typeof window<"u"?window:{};fy.addEventListener&&fy.removeEventListener&&(fy.addEventListener("p",VC,HLe),fy.removeEventListener("p",VC,!1));var WLe=VJ;function zLe(e){return e!=null}function GLe(e){return Array.isArray(e)}function my(e,r,o){return e?r:o}var KLe=function(r){for(var o=arguments.length,s=new Array(o>1?o-1:0),c=1;c<o;c++)s[c-1]=arguments[c];var d=Object.entries(r).filter(function(p){var v=Ue(p,1),m=v[0];return!s.includes(m)});return d.reduce(function(p,v){var m=Ue(v,2),E=m[0],C=m[1];return p[E]=C,p},{})},qLe=["children","innerProps"],YLe=["children","innerProps"];function XLe(e){var r=e.maxHeight,o=e.menuEl,s=e.minHeight,c=e.placement,d=e.shouldScroll,p=e.isFixedPosition,v=e.controlHeight,m=BLe(o),E={placement:"bottom",maxHeight:r};if(!o||!o.offsetParent)return E;var C=m.getBoundingClientRect(),b=C.height,R=o.getBoundingClientRect(),w=R.bottom,I=R.height,O=R.top,x=o.offsetParent.getBoundingClientRect(),P=x.top,N=p?window.innerHeight:ULe(m),L=BJ(m),M=parseInt(getComputedStyle(o).marginBottom,10),j=parseInt(getComputedStyle(o).marginTop,10),$=P-j,H=N-O,G=$+L,Y=b-L-O,q=w-N+L+M,J=L+O-j,re=160;switch(c){case"auto":case"bottom":if(H>=I)return{placement:"bottom",maxHeight:r};if(Y>=I&&!p)return d&&py(m,q,re),{placement:"bottom",maxHeight:r};if(!p&&Y>=s||p&&H>=s){d&&py(m,q,re);var Z=p?H-M:Y-M;return{placement:"bottom",maxHeight:Z}}if(c==="auto"||p){var Q=r,he=p?$:G;return he>=s&&(Q=Math.min(he-M-v,r)),{placement:"top",maxHeight:Q}}if(c==="bottom")return d&&jC(m,q),{placement:"bottom",maxHeight:r};break;case"top":if($>=I)return{placement:"top",maxHeight:r};if(G>=I&&!p)return d&&py(m,J,re),{placement:"top",maxHeight:r};if(!p&&G>=s||p&&$>=s){var oe=r;return(!p&&G>=s||p&&$>=s)&&(oe=p?$-j:G-j),d&&py(m,J,re),{placement:"top",maxHeight:oe}}return{placement:"bottom",maxHeight:r};default:throw new Error('Invalid placement provided "'.concat(c,'".'))}return E}function JLe(e){var r={bottom:"top",top:"bottom"};return e?r[e]:"bottom"}var jJ=function(r){return r==="auto"?"bottom":r},QLe=function(r,o){var s,c=r.placement,d=r.theme,p=d.borderRadius,v=d.spacing,m=d.colors;return _e((s={label:"menu"},ye(s,JLe(c),"100%"),ye(s,"position","absolute"),ye(s,"width","100%"),ye(s,"zIndex",1),s),o?{}:{backgroundColor:m.neutral0,borderRadius:p,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:v.menuGutter,marginTop:v.menuGutter})},$J=S.createContext(null),ZLe=function(r){var o=r.children,s=r.minMenuHeight,c=r.maxMenuHeight,d=r.menuPlacement,p=r.menuPosition,v=r.menuShouldScrollIntoView,m=r.theme,E=S.useContext($J)||{},C=E.setPortalPlacement,b=S.useRef(null),R=S.useState(c),w=Ue(R,2),I=w[0],O=w[1],x=S.useState(null),P=Ue(x,2),N=P[0],L=P[1],M=m.spacing.controlHeight;return eD(function(){var j=b.current;if(j){var $=p==="fixed",H=v&&!$,G=XLe({maxHeight:c,menuEl:j,minHeight:s,placement:d,shouldScroll:H,isFixedPosition:$,controlHeight:M});O(G.maxHeight),L(G.placement),C==null||C(G.placement)}},[c,d,p,v,s,C,M]),o({ref:b,placerProps:_e(_e({},r),{},{placement:N||jJ(d),maxHeight:I})})},eke=function(r){var o=r.children,s=r.innerRef,c=r.innerProps;return hn("div",Je({},Xi(r,"menu",{menu:!0}),{ref:s},c),o)},tke=eke,nke=function(r,o){var s=r.maxHeight,c=r.theme.spacing.baseUnit;return _e({maxHeight:s,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},o?{}:{paddingBottom:c,paddingTop:c})},rke=function(r){var o=r.children,s=r.innerProps,c=r.innerRef,d=r.isMulti;return hn("div",Je({},Xi(r,"menuList",{"menu-list":!0,"menu-list--is-multi":d}),{ref:c},s),o)},HJ=function(r,o){var s=r.theme,c=s.spacing.baseUnit,d=s.colors;return _e({textAlign:"center"},o?{}:{color:d.neutral40,padding:"".concat(c*2,"px ").concat(c*3,"px")})},ike=HJ,oke=HJ,ake=function(r){var o=r.children,s=o===void 0?"No options":o,c=r.innerProps,d=kn(r,qLe);return hn("div",Je({},Xi(_e(_e({},d),{},{children:s,innerProps:c}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),c),s)},ske=function(r){var o=r.children,s=o===void 0?"Loading...":o,c=r.innerProps,d=kn(r,YLe);return hn("div",Je({},Xi(_e(_e({},d),{},{children:s,innerProps:c}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),c),s)},cke=function(r){var o=r.rect,s=r.offset,c=r.position;return{left:o.left,position:c,top:s,width:o.width,zIndex:1}},lke=function(r){var o=r.appendTo,s=r.children,c=r.controlElement,d=r.innerProps,p=r.menuPlacement,v=r.menuPosition,m=S.useRef(null),E=S.useRef(null),C=S.useState(jJ(p)),b=Ue(C,2),R=b[0],w=b[1],I=S.useMemo(function(){return{setPortalPlacement:w}},[]),O=S.useState(null),x=Ue(O,2),P=x[0],N=x[1],L=S.useCallback(function(){if(c){var H=jLe(c),G=v==="fixed"?0:window.pageYOffset,Y=H[R]+G;(Y!==(P==null?void 0:P.offset)||H.left!==(P==null?void 0:P.rect.left)||H.width!==(P==null?void 0:P.rect.width))&&N({offset:Y,rect:H})}},[c,v,R,P==null?void 0:P.offset,P==null?void 0:P.rect.left,P==null?void 0:P.rect.width]);eD(function(){L()},[L]);var M=S.useCallback(function(){typeof E.current=="function"&&(E.current(),E.current=null),c&&m.current&&(E.current=LLe(c,m.current,L,{elementResize:"ResizeObserver"in window}))},[c,L]);eD(function(){M()},[M]);var j=S.useCallback(function(H){m.current=H,M()},[M]);if(!o&&v!=="fixed"||!P)return null;var $=hn("div",Je({ref:j},Xi(_e(_e({},r),{},{offset:P.offset,position:v,rect:P.rect}),"menuPortal",{"menu-portal":!0}),d),s);return hn($J.Provider,{value:I},o?kl.createPortal($,o):$)},uke=function(r){var o=r.isDisabled,s=r.isRtl;return{label:"container",direction:s?"rtl":void 0,pointerEvents:o?"none":void 0,position:"relative"}},dke=function(r){var o=r.children,s=r.innerProps,c=r.isDisabled,d=r.isRtl;return hn("div",Je({},Xi(r,"container",{"--is-disabled":c,"--is-rtl":d}),s),o)},hke=function(r,o){var s=r.theme.spacing,c=r.isMulti,d=r.hasValue,p=r.selectProps.controlShouldRenderValue;return _e({alignItems:"center",display:c&&d&&p?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},o?{}:{padding:"".concat(s.baseUnit/2,"px ").concat(s.baseUnit*2,"px")})},pke=function(r){var o=r.children,s=r.innerProps,c=r.isMulti,d=r.hasValue;return hn("div",Je({},Xi(r,"valueContainer",{"value-container":!0,"value-container--is-multi":c,"value-container--has-value":d}),s),o)},fke=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},mke=function(r){var o=r.children,s=r.innerProps;return hn("div",Je({},Xi(r,"indicatorsContainer",{indicators:!0}),s),o)},SW,gke=["size"],vke=["innerProps","isRtl","size"],Eke={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},WJ=function(r){var o=r.size,s=kn(r,gke);return hn("svg",Je({height:o,width:o,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:Eke},s))},w2=function(r){return hn(WJ,Je({size:20},r),hn("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},zJ=function(r){return hn(WJ,Je({size:20},r),hn("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},GJ=function(r,o){var s=r.isFocused,c=r.theme,d=c.spacing.baseUnit,p=c.colors;return _e({label:"indicatorContainer",display:"flex",transition:"color 150ms"},o?{}:{color:s?p.neutral60:p.neutral20,padding:d*2,":hover":{color:s?p.neutral80:p.neutral40}})},_ke=GJ,Ske=function(r){var o=r.children,s=r.innerProps;return hn("div",Je({},Xi(r,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),s),o||hn(zJ,null))},yke=GJ,Cke=function(r){var o=r.children,s=r.innerProps;return hn("div",Je({},Xi(r,"clearIndicator",{indicator:!0,"clear-indicator":!0}),s),o||hn(w2,null))},bke=function(r,o){var s=r.isDisabled,c=r.theme,d=c.spacing.baseUnit,p=c.colors;return _e({label:"indicatorSeparator",alignSelf:"stretch",width:1},o?{}:{backgroundColor:s?p.neutral10:p.neutral20,marginBottom:d*2,marginTop:d*2})},Tke=function(r){var o=r.innerProps;return hn("span",Je({},o,Xi(r,"indicatorSeparator",{"indicator-separator":!0})))},Rke=yLe(SW||(SW=CLe([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),wke=function(r,o){var s=r.isFocused,c=r.size,d=r.theme,p=d.colors,v=d.spacing.baseUnit;return _e({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:c,lineHeight:1,marginRight:c,textAlign:"center",verticalAlign:"middle"},o?{}:{color:s?p.neutral60:p.neutral20,padding:v*2})},GO=function(r){var o=r.delay,s=r.offset;return hn("span",{css:C2({animation:"".concat(Rke," 1s ease-in-out ").concat(o,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:s?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},Ike=function(r){var o=r.innerProps,s=r.isRtl,c=r.size,d=c===void 0?4:c,p=kn(r,vke);return hn("div",Je({},Xi(_e(_e({},p),{},{innerProps:o,isRtl:s,size:d}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),o),hn(GO,{delay:0,offset:s}),hn(GO,{delay:160,offset:!0}),hn(GO,{delay:320,offset:!s}))},Ake=function(r,o){var s=r.isDisabled,c=r.isFocused,d=r.theme,p=d.colors,v=d.borderRadius,m=d.spacing;return _e({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:m.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},o?{}:{backgroundColor:s?p.neutral5:p.neutral0,borderColor:s?p.neutral10:c?p.primary:p.neutral20,borderRadius:v,borderStyle:"solid",borderWidth:1,boxShadow:c?"0 0 0 1px ".concat(p.primary):void 0,"&:hover":{borderColor:c?p.primary:p.neutral30}})},Oke=function(r){var o=r.children,s=r.isDisabled,c=r.isFocused,d=r.innerRef,p=r.innerProps,v=r.menuIsOpen;return hn("div",Je({ref:d},Xi(r,"control",{control:!0,"control--is-disabled":s,"control--is-focused":c,"control--menu-is-open":v}),p,{"aria-disabled":s||void 0}),o)},xke=Oke,Nke=["data"],Dke=function(r,o){var s=r.theme.spacing;return o?{}:{paddingBottom:s.baseUnit*2,paddingTop:s.baseUnit*2}},Pke=function(r){var o=r.children,s=r.cx,c=r.getStyles,d=r.getClassNames,p=r.Heading,v=r.headingProps,m=r.innerProps,E=r.label,C=r.theme,b=r.selectProps;return hn("div",Je({},Xi(r,"group",{group:!0}),m),hn(p,Je({},v,{selectProps:b,theme:C,getStyles:c,getClassNames:d,cx:s}),E),hn("div",null,o))},Lke=function(r,o){var s=r.theme,c=s.colors,d=s.spacing;return _e({label:"group",cursor:"default",display:"block"},o?{}:{color:c.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:d.baseUnit*3,paddingRight:d.baseUnit*3,textTransform:"uppercase"})},kke=function(r){var o=UJ(r);o.data;var s=kn(o,Nke);return hn("div",Je({},Xi(r,"groupHeading",{"group-heading":!0}),s))},Mke=Pke,Fke=["innerRef","isDisabled","isHidden","inputClassName"],Uke=function(r,o){var s=r.isDisabled,c=r.value,d=r.theme,p=d.spacing,v=d.colors;return _e(_e({visibility:s?"hidden":"visible",transform:c?"translateZ(0)":""},Bke),o?{}:{margin:p.baseUnit/2,paddingBottom:p.baseUnit/2,paddingTop:p.baseUnit/2,color:v.neutral80})},KJ={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},Bke={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":_e({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},KJ)},Vke=function(r){return _e({label:"input",color:"inherit",background:0,opacity:r?0:1,width:"100%"},KJ)},jke=function(r){var o=r.cx,s=r.value,c=UJ(r),d=c.innerRef,p=c.isDisabled,v=c.isHidden,m=c.inputClassName,E=kn(c,Fke);return hn("div",Je({},Xi(r,"input",{"input-container":!0}),{"data-value":s||""}),hn("input",Je({className:o({input:!0},m),ref:d,style:Vke(v),disabled:p},E)))},$ke=jke,Hke=function(r,o){var s=r.theme,c=s.spacing,d=s.borderRadius,p=s.colors;return _e({label:"multiValue",display:"flex",minWidth:0},o?{}:{backgroundColor:p.neutral10,borderRadius:d/2,margin:c.baseUnit/2})},Wke=function(r,o){var s=r.theme,c=s.borderRadius,d=s.colors,p=r.cropWithEllipsis;return _e({overflow:"hidden",textOverflow:p||p===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},o?{}:{borderRadius:c/2,color:d.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},zke=function(r,o){var s=r.theme,c=s.spacing,d=s.borderRadius,p=s.colors,v=r.isFocused;return _e({alignItems:"center",display:"flex"},o?{}:{borderRadius:d/2,backgroundColor:v?p.dangerLight:void 0,paddingLeft:c.baseUnit,paddingRight:c.baseUnit,":hover":{backgroundColor:p.dangerLight,color:p.danger}})},qJ=function(r){var o=r.children,s=r.innerProps;return hn("div",s,o)},Gke=qJ,Kke=qJ;function qke(e){var r=e.children,o=e.innerProps;return hn("div",Je({role:"button"},o),r||hn(w2,{size:14}))}var Yke=function(r){var o=r.children,s=r.components,c=r.data,d=r.innerProps,p=r.isDisabled,v=r.removeProps,m=r.selectProps,E=s.Container,C=s.Label,b=s.Remove;return hn(E,{data:c,innerProps:_e(_e({},Xi(r,"multiValue",{"multi-value":!0,"multi-value--is-disabled":p})),d),selectProps:m},hn(C,{data:c,innerProps:_e({},Xi(r,"multiValueLabel",{"multi-value__label":!0})),selectProps:m},o),hn(b,{data:c,innerProps:_e(_e({},Xi(r,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(o||"option")},v),selectProps:m}))},Xke=Yke,Jke=function(r,o){var s=r.isDisabled,c=r.isFocused,d=r.isSelected,p=r.theme,v=p.spacing,m=p.colors;return _e({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},o?{}:{backgroundColor:d?m.primary:c?m.primary25:"transparent",color:s?m.neutral20:d?m.neutral0:"inherit",padding:"".concat(v.baseUnit*2,"px ").concat(v.baseUnit*3,"px"),":active":{backgroundColor:s?void 0:d?m.primary:m.primary50}})},Qke=function(r){var o=r.children,s=r.isDisabled,c=r.isFocused,d=r.isSelected,p=r.innerRef,v=r.innerProps;return hn("div",Je({},Xi(r,"option",{option:!0,"option--is-disabled":s,"option--is-focused":c,"option--is-selected":d}),{ref:p,"aria-disabled":s},v),o)},Zke=Qke,eMe=function(r,o){var s=r.theme,c=s.spacing,d=s.colors;return _e({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},o?{}:{color:d.neutral50,marginLeft:c.baseUnit/2,marginRight:c.baseUnit/2})},tMe=function(r){var o=r.children,s=r.innerProps;return hn("div",Je({},Xi(r,"placeholder",{placeholder:!0}),s),o)},nMe=tMe,rMe=function(r,o){var s=r.isDisabled,c=r.theme,d=c.spacing,p=c.colors;return _e({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},o?{}:{color:s?p.neutral40:p.neutral80,marginLeft:d.baseUnit/2,marginRight:d.baseUnit/2})},iMe=function(r){var o=r.children,s=r.isDisabled,c=r.innerProps;return hn("div",Je({},Xi(r,"singleValue",{"single-value":!0,"single-value--is-disabled":s}),c),o)},oMe=iMe,aMe={ClearIndicator:Cke,Control:xke,DropdownIndicator:Ske,DownChevron:zJ,CrossIcon:w2,Group:Mke,GroupHeading:kke,IndicatorsContainer:mke,IndicatorSeparator:Tke,Input:$ke,LoadingIndicator:Ike,Menu:tke,MenuList:rke,MenuPortal:lke,LoadingMessage:ske,NoOptionsMessage:ake,MultiValue:Xke,MultiValueContainer:Gke,MultiValueLabel:Kke,MultiValueRemove:qke,Option:Zke,Placeholder:nMe,SelectContainer:dke,SingleValue:oMe,ValueContainer:pke},sMe=function(r){return _e(_e({},aMe),r.components)},yW=Number.isNaN||function(r){return typeof r=="number"&&r!==r};function cMe(e,r){return!!(e===r||yW(e)&&yW(r))}function lMe(e,r){if(e.length!==r.length)return!1;for(var o=0;o<e.length;o++)if(!cMe(e[o],r[o]))return!1;return!0}function uMe(e,r){r===void 0&&(r=lMe);var o=null;function s(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];if(o&&o.lastThis===this&&r(c,o.lastArgs))return o.lastResult;var p=e.apply(this,c);return o={lastResult:p,lastArgs:c,lastThis:this},p}return s.clear=function(){o=null},s}var dMe={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},hMe=function(r){return hn("span",Je({css:dMe},r))},CW=hMe,pMe={guidance:function(r){var o=r.isSearchable,s=r.isMulti,c=r.tabSelectsValue,d=r.context,p=r.isInitialFocus;switch(d){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(c?", press Tab to select the option and exit the menu":"",".");case"input":return p?"".concat(r["aria-label"]||"Select"," is focused ").concat(o?",type to refine list":"",", press Down to open the menu, ").concat(s?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(r){var o=r.action,s=r.label,c=s===void 0?"":s,d=r.labels,p=r.isDisabled;switch(o){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(c,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(d.length>1?"s":""," ").concat(d.join(","),", selected.");case"select-option":return p?"option ".concat(c," is disabled. Select another option."):"option ".concat(c,", selected.");default:return""}},onFocus:function(r){var o=r.context,s=r.focused,c=r.options,d=r.label,p=d===void 0?"":d,v=r.selectValue,m=r.isDisabled,E=r.isSelected,C=r.isAppleDevice,b=function(O,x){return O&&O.length?"".concat(O.indexOf(x)+1," of ").concat(O.length):""};if(o==="value"&&v)return"value ".concat(p," focused, ").concat(b(v,s),".");if(o==="menu"&&C){var R=m?" disabled":"",w="".concat(E?" selected":"").concat(R);return"".concat(p).concat(w,", ").concat(b(c,s),".")}return""},onFilter:function(r){var o=r.inputValue,s=r.resultsMessage;return"".concat(s).concat(o?" for search term "+o:"",".")}},fMe=function(r){var o=r.ariaSelection,s=r.focusedOption,c=r.focusedValue,d=r.focusableOptions,p=r.isFocused,v=r.selectValue,m=r.selectProps,E=r.id,C=r.isAppleDevice,b=m.ariaLiveMessages,R=m.getOptionLabel,w=m.inputValue,I=m.isMulti,O=m.isOptionDisabled,x=m.isSearchable,P=m.menuIsOpen,N=m.options,L=m.screenReaderStatus,M=m.tabSelectsValue,j=m.isLoading,$=m["aria-label"],H=m["aria-live"],G=S.useMemo(function(){return _e(_e({},pMe),b||{})},[b]),Y=S.useMemo(function(){var he="";if(o&&G.onChange){var oe=o.option,ae=o.options,te=o.removedValue,de=o.removedValues,fe=o.value,ie=function(Me){return Array.isArray(Me)?null:Me},le=te||oe||ie(fe),ve=le?R(le):"",ge=ae||de||void 0,Te=ge?ge.map(R):[],we=_e({isDisabled:le&&O(le,v),label:ve,labels:Te},o);he=G.onChange(we)}return he},[o,G,O,v,R]),q=S.useMemo(function(){var he="",oe=s||c,ae=!!(s&&v&&v.includes(s));if(oe&&G.onFocus){var te={focused:oe,label:R(oe),isDisabled:O(oe,v),isSelected:ae,options:d,context:oe===s?"menu":"value",selectValue:v,isAppleDevice:C};he=G.onFocus(te)}return he},[s,c,R,O,G,d,v,C]),J=S.useMemo(function(){var he="";if(P&&N.length&&!j&&G.onFilter){var oe=L({count:d.length});he=G.onFilter({inputValue:w,resultsMessage:oe})}return he},[d,w,P,G,N,L,j]),re=(o==null?void 0:o.action)==="initial-input-focus",Z=S.useMemo(function(){var he="";if(G.guidance){var oe=c?"value":P?"menu":"input";he=G.guidance({"aria-label":$,context:oe,isDisabled:s&&O(s,v),isMulti:I,isSearchable:x,tabSelectsValue:M,isInitialFocus:re})}return he},[$,s,c,I,O,x,P,G,v,M,re]),Q=hn(S.Fragment,null,hn("span",{id:"aria-selection"},Y),hn("span",{id:"aria-focused"},q),hn("span",{id:"aria-results"},J),hn("span",{id:"aria-guidance"},Z));return hn(S.Fragment,null,hn(CW,{id:E},re&&Q),hn(CW,{"aria-live":H,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},p&&!re&&Q))},mMe=fMe,tD=[{base:"A",letters:"AⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",letters:"Ꜳ"},{base:"AE",letters:"ÆǼǢ"},{base:"AO",letters:"Ꜵ"},{base:"AU",letters:"Ꜷ"},{base:"AV",letters:"ꜸꜺ"},{base:"AY",letters:"Ꜽ"},{base:"B",letters:"BⒷＢḂḄḆɃƂƁ"},{base:"C",letters:"CⒸＣĆĈĊČÇḈƇȻꜾ"},{base:"D",letters:"DⒹＤḊĎḌḐḒḎĐƋƊƉꝹ"},{base:"DZ",letters:"ǱǄ"},{base:"Dz",letters:"ǲǅ"},{base:"E",letters:"EⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎ"},{base:"F",letters:"FⒻＦḞƑꝻ"},{base:"G",letters:"GⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾ"},{base:"H",letters:"HⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",letters:"IⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",letters:"JⒿＪĴɈ"},{base:"K",letters:"KⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",letters:"LⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",letters:"Ǉ"},{base:"Lj",letters:"ǈ"},{base:"M",letters:"MⓂＭḾṀṂⱮƜ"},{base:"N",letters:"NⓃＮǸŃÑṄŇṆŅṊṈȠƝꞐꞤ"},{base:"NJ",letters:"Ǌ"},{base:"Nj",letters:"ǋ"},{base:"O",letters:"OⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OI",letters:"Ƣ"},{base:"OO",letters:"Ꝏ"},{base:"OU",letters:"Ȣ"},{base:"P",letters:"PⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",letters:"QⓆＱꝖꝘɊ"},{base:"R",letters:"RⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",letters:"SⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",letters:"TⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"TZ",letters:"Ꜩ"},{base:"U",letters:"UⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",letters:"VⓋＶṼṾƲꝞɅ"},{base:"VY",letters:"Ꝡ"},{base:"W",letters:"WⓌＷẀẂŴẆẄẈⱲ"},{base:"X",letters:"XⓍＸẊẌ"},{base:"Y",letters:"YⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",letters:"ZⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",letters:"aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐ"},{base:"aa",letters:"ꜳ"},{base:"ae",letters:"æǽǣ"},{base:"ao",letters:"ꜵ"},{base:"au",letters:"ꜷ"},{base:"av",letters:"ꜹꜻ"},{base:"ay",letters:"ꜽ"},{base:"b",letters:"bⓑｂḃḅḇƀƃɓ"},{base:"c",letters:"cⓒｃćĉċčçḉƈȼꜿↄ"},{base:"d",letters:"dⓓｄḋďḍḑḓḏđƌɖɗꝺ"},{base:"dz",letters:"ǳǆ"},{base:"e",letters:"eⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇɛǝ"},{base:"f",letters:"fⓕｆḟƒꝼ"},{base:"g",letters:"gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ"},{base:"h",letters:"hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",letters:"ƕ"},{base:"i",letters:"iⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",letters:"jⓙｊĵǰɉ"},{base:"k",letters:"kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",letters:"lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ"},{base:"lj",letters:"ǉ"},{base:"m",letters:"mⓜｍḿṁṃɱɯ"},{base:"n",letters:"nⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥ"},{base:"nj",letters:"ǌ"},{base:"o",letters:"oⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿɔꝋꝍɵ"},{base:"oi",letters:"ƣ"},{base:"ou",letters:"ȣ"},{base:"oo",letters:"ꝏ"},{base:"p",letters:"pⓟｐṕṗƥᵽꝑꝓꝕ"},{base:"q",letters:"qⓠｑɋꝗꝙ"},{base:"r",letters:"rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",letters:"sⓢｓßśṥŝṡšṧṣṩșşȿꞩꞅẛ"},{base:"t",letters:"tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"tz",letters:"ꜩ"},{base:"u",letters:"uⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",letters:"vⓥｖṽṿʋꝟʌ"},{base:"vy",letters:"ꝡ"},{base:"w",letters:"wⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",letters:"xⓧｘẋẍ"},{base:"y",letters:"yⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",letters:"zⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],gMe=new RegExp("["+tD.map(function(e){return e.letters}).join("")+"]","g"),YJ={};for(var KO=0;KO<tD.length;KO++)for(var qO=tD[KO],YO=0;YO<qO.letters.length;YO++)YJ[qO.letters[YO]]=qO.base;var XJ=function(r){return r.replace(gMe,function(o){return YJ[o]})},vMe=uMe(XJ),bW=function(r){return r.replace(/^\s+|\s+$/g,"")},EMe=function(r){return"".concat(r.label," ").concat(r.value)},_Me=function(r){return function(o,s){if(o.data.__isNew__)return!0;var c=_e({ignoreCase:!0,ignoreAccents:!0,stringify:EMe,trim:!0,matchFrom:"any"},r),d=c.ignoreCase,p=c.ignoreAccents,v=c.stringify,m=c.trim,E=c.matchFrom,C=m?bW(s):s,b=m?bW(v(o)):v(o);return d&&(C=C.toLowerCase(),b=b.toLowerCase()),p&&(C=vMe(C),b=XJ(b)),E==="start"?b.substr(0,C.length)===C:b.indexOf(C)>-1}},SMe=["innerRef"];function yMe(e){var r=e.innerRef,o=kn(e,SMe),s=KLe(o,"onExited","in","enter","exit","appear");return hn("input",Je({ref:r},s,{css:C2({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var CMe=function(r){r.cancelable&&r.preventDefault(),r.stopPropagation()};function bMe(e){var r=e.isEnabled,o=e.onBottomArrive,s=e.onBottomLeave,c=e.onTopArrive,d=e.onTopLeave,p=S.useRef(!1),v=S.useRef(!1),m=S.useRef(0),E=S.useRef(null),C=S.useCallback(function(x,P){if(E.current!==null){var N=E.current,L=N.scrollTop,M=N.scrollHeight,j=N.clientHeight,$=E.current,H=P>0,G=M-j-L,Y=!1;G>P&&p.current&&(s&&s(x),p.current=!1),H&&v.current&&(d&&d(x),v.current=!1),H&&P>G?(o&&!p.current&&o(x),$.scrollTop=M,Y=!0,p.current=!0):!H&&-P>L&&(c&&!v.current&&c(x),$.scrollTop=0,Y=!0,v.current=!0),Y&&CMe(x)}},[o,s,c,d]),b=S.useCallback(function(x){C(x,x.deltaY)},[C]),R=S.useCallback(function(x){m.current=x.changedTouches[0].clientY},[]),w=S.useCallback(function(x){var P=m.current-x.changedTouches[0].clientY;C(x,P)},[C]),I=S.useCallback(function(x){if(x){var P=WLe?{passive:!1}:!1;x.addEventListener("wheel",b,P),x.addEventListener("touchstart",R,P),x.addEventListener("touchmove",w,P)}},[w,R,b]),O=S.useCallback(function(x){x&&(x.removeEventListener("wheel",b,!1),x.removeEventListener("touchstart",R,!1),x.removeEventListener("touchmove",w,!1))},[w,R,b]);return S.useEffect(function(){if(r){var x=E.current;return I(x),function(){O(x)}}},[r,I,O]),function(x){E.current=x}}var TW=["boxSizing","height","overflow","paddingRight","position"],RW={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function wW(e){e.preventDefault()}function IW(e){e.stopPropagation()}function AW(){var e=this.scrollTop,r=this.scrollHeight,o=e+this.offsetHeight;e===0?this.scrollTop=1:o===r&&(this.scrollTop=e-1)}function OW(){return"ontouchstart"in window||navigator.maxTouchPoints}var xW=!!(typeof window<"u"&&window.document&&window.document.createElement),Tg=0,Ff={capture:!1,passive:!1};function TMe(e){var r=e.isEnabled,o=e.accountForScrollbars,s=o===void 0?!0:o,c=S.useRef({}),d=S.useRef(null),p=S.useCallback(function(m){if(xW){var E=document.body,C=E&&E.style;if(s&&TW.forEach(function(I){var O=C&&C[I];c.current[I]=O}),s&&Tg<1){var b=parseInt(c.current.paddingRight,10)||0,R=document.body?document.body.clientWidth:0,w=window.innerWidth-R+b||0;Object.keys(RW).forEach(function(I){var O=RW[I];C&&(C[I]=O)}),C&&(C.paddingRight="".concat(w,"px"))}E&&OW()&&(E.addEventListener("touchmove",wW,Ff),m&&(m.addEventListener("touchstart",AW,Ff),m.addEventListener("touchmove",IW,Ff))),Tg+=1}},[s]),v=S.useCallback(function(m){if(xW){var E=document.body,C=E&&E.style;Tg=Math.max(Tg-1,0),s&&Tg<1&&TW.forEach(function(b){var R=c.current[b];C&&(C[b]=R)}),E&&OW()&&(E.removeEventListener("touchmove",wW,Ff),m&&(m.removeEventListener("touchstart",AW,Ff),m.removeEventListener("touchmove",IW,Ff)))}},[s]);return S.useEffect(function(){if(r){var m=d.current;return p(m),function(){v(m)}}},[r,p,v]),function(m){d.current=m}}var RMe=function(r){var o=r.target;return o.ownerDocument.activeElement&&o.ownerDocument.activeElement.blur()},wMe={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function IMe(e){var r=e.children,o=e.lockEnabled,s=e.captureEnabled,c=s===void 0?!0:s,d=e.onBottomArrive,p=e.onBottomLeave,v=e.onTopArrive,m=e.onTopLeave,E=bMe({isEnabled:c,onBottomArrive:d,onBottomLeave:p,onTopArrive:v,onTopLeave:m}),C=TMe({isEnabled:o}),b=function(w){E(w),C(w)};return hn(S.Fragment,null,o&&hn("div",{onClick:RMe,css:wMe}),r(b))}var AMe={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},OMe=function(r){var o=r.name,s=r.onFocus;return hn("input",{required:!0,name:o,tabIndex:-1,"aria-hidden":"true",onFocus:s,css:AMe,value:"",onChange:function(){}})},xMe=OMe;function I2(e){var r;return typeof window<"u"&&window.navigator!=null?e.test(((r=window.navigator.userAgentData)===null||r===void 0?void 0:r.platform)||window.navigator.platform):!1}function NMe(){return I2(/^iPhone/i)}function JJ(){return I2(/^Mac/i)}function DMe(){return I2(/^iPad/i)||JJ()&&navigator.maxTouchPoints>1}function PMe(){return NMe()||DMe()}function LMe(){return JJ()||PMe()}var kMe=function(r){return r.label},MMe=function(r){return r.label},FMe=function(r){return r.value},UMe=function(r){return!!r.isDisabled},BMe={clearIndicator:yke,container:uke,control:Ake,dropdownIndicator:_ke,group:Dke,groupHeading:Lke,indicatorsContainer:fke,indicatorSeparator:bke,input:Uke,loadingIndicator:wke,loadingMessage:oke,menu:QLe,menuList:nke,menuPortal:cke,multiValue:Hke,multiValueLabel:Wke,multiValueRemove:zke,noOptionsMessage:ike,option:Jke,placeholder:eMe,singleValue:rMe,valueContainer:hke},VMe={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},jMe=4,QJ=4,$Me=38,HMe=QJ*2,WMe={baseUnit:QJ,controlHeight:$Me,menuGutter:HMe},XO={borderRadius:jMe,colors:VMe,spacing:WMe},zMe={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:_W(),captureMenuScroll:!_W(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:_Me(),formatGroupLabel:kMe,getOptionLabel:MMe,getOptionValue:FMe,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:UMe,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!$Le(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(r){var o=r.count;return"".concat(o," result").concat(o!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function NW(e,r,o,s){var c=tQ(e,r,o),d=nQ(e,r,o),p=eQ(e,r),v=$C(e,r);return{type:"option",data:r,isDisabled:c,isSelected:d,label:p,value:v,index:s}}function Wy(e,r){return e.options.map(function(o,s){if("options"in o){var c=o.options.map(function(p,v){return NW(e,p,r,v)}).filter(function(p){return PW(e,p)});return c.length>0?{type:"group",data:o,options:c,index:s}:void 0}var d=NW(e,o,r,s);return PW(e,d)?d:void 0}).filter(zLe)}function ZJ(e){return e.reduce(function(r,o){return o.type==="group"?r.push.apply(r,_t(o.options.map(function(s){return s.data}))):r.push(o.data),r},[])}function DW(e,r){return e.reduce(function(o,s){return s.type==="group"?o.push.apply(o,_t(s.options.map(function(c){return{data:c.data,id:"".concat(r,"-").concat(s.index,"-").concat(c.index)}}))):o.push({data:s.data,id:"".concat(r,"-").concat(s.index)}),o},[])}function GMe(e,r){return ZJ(Wy(e,r))}function PW(e,r){var o=e.inputValue,s=o===void 0?"":o,c=r.data,d=r.isSelected,p=r.label,v=r.value;return(!iQ(e)||!d)&&rQ(e,{label:p,value:v,data:c},s)}function KMe(e,r){var o=e.focusedValue,s=e.selectValue,c=s.indexOf(o);if(c>-1){var d=r.indexOf(o);if(d>-1)return o;if(c<r.length)return r[c]}return null}function qMe(e,r){var o=e.focusedOption;return o&&r.indexOf(o)>-1?o:r[0]}var JO=function(r,o){var s,c=(s=r.find(function(d){return d.data===o}))===null||s===void 0?void 0:s.id;return c||null},eQ=function(r,o){return r.getOptionLabel(o)},$C=function(r,o){return r.getOptionValue(o)};function tQ(e,r,o){return typeof e.isOptionDisabled=="function"?e.isOptionDisabled(r,o):!1}function nQ(e,r,o){if(o.indexOf(r)>-1)return!0;if(typeof e.isOptionSelected=="function")return e.isOptionSelected(r,o);var s=$C(e,r);return o.some(function(c){return $C(e,c)===s})}function rQ(e,r,o){return e.filterOption?e.filterOption(r,o):!0}var iQ=function(r){var o=r.hideSelectedOptions,s=r.isMulti;return o===void 0?s:o},YMe=1,oQ=function(e){Su(o,e);var r=cp(o);function o(s){var c;if(Bo(this,o),c=r.call(this,s),c.state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:""},c.blockOptionHover=!1,c.isComposing=!1,c.commonProps=void 0,c.initialTouchX=0,c.initialTouchY=0,c.openAfterFocus=!1,c.scrollToFocusedOptionOnUpdate=!1,c.userIsDragging=void 0,c.isAppleDevice=LMe(),c.controlRef=null,c.getControlRef=function(m){c.controlRef=m},c.focusedOptionRef=null,c.getFocusedOptionRef=function(m){c.focusedOptionRef=m},c.menuListRef=null,c.getMenuListRef=function(m){c.menuListRef=m},c.inputRef=null,c.getInputRef=function(m){c.inputRef=m},c.focus=c.focusInput,c.blur=c.blurInput,c.onChange=function(m,E){var C=c.props,b=C.onChange,R=C.name;E.name=R,c.ariaOnChange(m,E),b(m,E)},c.setValue=function(m,E,C){var b=c.props,R=b.closeMenuOnSelect,w=b.isMulti,I=b.inputValue;c.onInputChange("",{action:"set-value",prevInputValue:I}),R&&(c.setState({inputIsHiddenAfterUpdate:!w}),c.onMenuClose()),c.setState({clearFocusValueOnUpdate:!0}),c.onChange(m,{action:E,option:C})},c.selectOption=function(m){var E=c.props,C=E.blurInputOnSelect,b=E.isMulti,R=E.name,w=c.state.selectValue,I=b&&c.isOptionSelected(m,w),O=c.isOptionDisabled(m,w);if(I){var x=c.getOptionValue(m);c.setValue(w.filter(function(P){return c.getOptionValue(P)!==x}),"deselect-option",m)}else if(!O)b?c.setValue([].concat(_t(w),[m]),"select-option",m):c.setValue(m,"select-option");else{c.ariaOnChange(m,{action:"select-option",option:m,name:R});return}C&&c.blurInput()},c.removeValue=function(m){var E=c.props.isMulti,C=c.state.selectValue,b=c.getOptionValue(m),R=C.filter(function(I){return c.getOptionValue(I)!==b}),w=my(E,R,R[0]||null);c.onChange(w,{action:"remove-value",removedValue:m}),c.focusInput()},c.clearValue=function(){var m=c.state.selectValue;c.onChange(my(c.props.isMulti,[],null),{action:"clear",removedValues:m})},c.popValue=function(){var m=c.props.isMulti,E=c.state.selectValue,C=E[E.length-1],b=E.slice(0,E.length-1),R=my(m,b,b[0]||null);c.onChange(R,{action:"pop-value",removedValue:C})},c.getFocusedOptionId=function(m){return JO(c.state.focusableOptionsWithIds,m)},c.getFocusableOptionsWithIds=function(){return DW(Wy(c.props,c.state.selectValue),c.getElementId("option"))},c.getValue=function(){return c.state.selectValue},c.cx=function(){for(var m=arguments.length,E=new Array(m),C=0;C<m;C++)E[C]=arguments[C];return FLe.apply(void 0,[c.props.classNamePrefix].concat(E))},c.getOptionLabel=function(m){return eQ(c.props,m)},c.getOptionValue=function(m){return $C(c.props,m)},c.getStyles=function(m,E){var C=c.props.unstyled,b=BMe[m](E,C);b.boxSizing="border-box";var R=c.props.styles[m];return R?R(b,E):b},c.getClassNames=function(m,E){var C,b;return(C=(b=c.props.classNames)[m])===null||C===void 0?void 0:C.call(b,E)},c.getElementId=function(m){return"".concat(c.state.instancePrefix,"-").concat(m)},c.getComponents=function(){return sMe(c.props)},c.buildCategorizedOptions=function(){return Wy(c.props,c.state.selectValue)},c.getCategorizedOptions=function(){return c.props.menuIsOpen?c.buildCategorizedOptions():[]},c.buildFocusableOptions=function(){return ZJ(c.buildCategorizedOptions())},c.getFocusableOptions=function(){return c.props.menuIsOpen?c.buildFocusableOptions():[]},c.ariaOnChange=function(m,E){c.setState({ariaSelection:_e({value:m},E)})},c.onMenuMouseDown=function(m){m.button===0&&(m.stopPropagation(),m.preventDefault(),c.focusInput())},c.onMenuMouseMove=function(m){c.blockOptionHover=!1},c.onControlMouseDown=function(m){if(!m.defaultPrevented){var E=c.props.openMenuOnClick;c.state.isFocused?c.props.menuIsOpen?m.target.tagName!=="INPUT"&&m.target.tagName!=="TEXTAREA"&&c.onMenuClose():E&&c.openMenu("first"):(E&&(c.openAfterFocus=!0),c.focusInput()),m.target.tagName!=="INPUT"&&m.target.tagName!=="TEXTAREA"&&m.preventDefault()}},c.onDropdownIndicatorMouseDown=function(m){if(!(m&&m.type==="mousedown"&&m.button!==0)&&!c.props.isDisabled){var E=c.props,C=E.isMulti,b=E.menuIsOpen;c.focusInput(),b?(c.setState({inputIsHiddenAfterUpdate:!C}),c.onMenuClose()):c.openMenu("first"),m.preventDefault()}},c.onClearIndicatorMouseDown=function(m){m&&m.type==="mousedown"&&m.button!==0||(c.clearValue(),m.preventDefault(),c.openAfterFocus=!1,m.type==="touchend"?c.focusInput():setTimeout(function(){return c.focusInput()}))},c.onScroll=function(m){typeof c.props.closeMenuOnScroll=="boolean"?m.target instanceof HTMLElement&&pT(m.target)&&c.props.onMenuClose():typeof c.props.closeMenuOnScroll=="function"&&c.props.closeMenuOnScroll(m)&&c.props.onMenuClose()},c.onCompositionStart=function(){c.isComposing=!0},c.onCompositionEnd=function(){c.isComposing=!1},c.onTouchStart=function(m){var E=m.touches,C=E&&E.item(0);C&&(c.initialTouchX=C.clientX,c.initialTouchY=C.clientY,c.userIsDragging=!1)},c.onTouchMove=function(m){var E=m.touches,C=E&&E.item(0);if(C){var b=Math.abs(C.clientX-c.initialTouchX),R=Math.abs(C.clientY-c.initialTouchY),w=5;c.userIsDragging=b>w||R>w}},c.onTouchEnd=function(m){c.userIsDragging||(c.controlRef&&!c.controlRef.contains(m.target)&&c.menuListRef&&!c.menuListRef.contains(m.target)&&c.blurInput(),c.initialTouchX=0,c.initialTouchY=0)},c.onControlTouchEnd=function(m){c.userIsDragging||c.onControlMouseDown(m)},c.onClearIndicatorTouchEnd=function(m){c.userIsDragging||c.onClearIndicatorMouseDown(m)},c.onDropdownIndicatorTouchEnd=function(m){c.userIsDragging||c.onDropdownIndicatorMouseDown(m)},c.handleInputChange=function(m){var E=c.props.inputValue,C=m.currentTarget.value;c.setState({inputIsHiddenAfterUpdate:!1}),c.onInputChange(C,{action:"input-change",prevInputValue:E}),c.props.menuIsOpen||c.onMenuOpen()},c.onInputFocus=function(m){c.props.onFocus&&c.props.onFocus(m),c.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(c.openAfterFocus||c.props.openMenuOnFocus)&&c.openMenu("first"),c.openAfterFocus=!1},c.onInputBlur=function(m){var E=c.props.inputValue;if(c.menuListRef&&c.menuListRef.contains(document.activeElement)){c.inputRef.focus();return}c.props.onBlur&&c.props.onBlur(m),c.onInputChange("",{action:"input-blur",prevInputValue:E}),c.onMenuClose(),c.setState({focusedValue:null,isFocused:!1})},c.onOptionHover=function(m){if(!(c.blockOptionHover||c.state.focusedOption===m)){var E=c.getFocusableOptions(),C=E.indexOf(m);c.setState({focusedOption:m,focusedOptionId:C>-1?c.getFocusedOptionId(m):null})}},c.shouldHideSelectedOptions=function(){return iQ(c.props)},c.onValueInputFocus=function(m){m.preventDefault(),m.stopPropagation(),c.focus()},c.onKeyDown=function(m){var E=c.props,C=E.isMulti,b=E.backspaceRemovesValue,R=E.escapeClearsValue,w=E.inputValue,I=E.isClearable,O=E.isDisabled,x=E.menuIsOpen,P=E.onKeyDown,N=E.tabSelectsValue,L=E.openMenuOnFocus,M=c.state,j=M.focusedOption,$=M.focusedValue,H=M.selectValue;if(!O&&!(typeof P=="function"&&(P(m),m.defaultPrevented))){switch(c.blockOptionHover=!0,m.key){case"ArrowLeft":if(!C||w)return;c.focusValue("previous");break;case"ArrowRight":if(!C||w)return;c.focusValue("next");break;case"Delete":case"Backspace":if(w)return;if($)c.removeValue($);else{if(!b)return;C?c.popValue():I&&c.clearValue()}break;case"Tab":if(c.isComposing||m.shiftKey||!x||!N||!j||L&&c.isOptionSelected(j,H))return;c.selectOption(j);break;case"Enter":if(m.keyCode===229)break;if(x){if(!j||c.isComposing)return;c.selectOption(j);break}return;case"Escape":x?(c.setState({inputIsHiddenAfterUpdate:!1}),c.onInputChange("",{action:"menu-close",prevInputValue:w}),c.onMenuClose()):I&&R&&c.clearValue();break;case" ":if(w)return;if(!x){c.openMenu("first");break}if(!j)return;c.selectOption(j);break;case"ArrowUp":x?c.focusOption("up"):c.openMenu("last");break;case"ArrowDown":x?c.focusOption("down"):c.openMenu("first");break;case"PageUp":if(!x)return;c.focusOption("pageup");break;case"PageDown":if(!x)return;c.focusOption("pagedown");break;case"Home":if(!x)return;c.focusOption("first");break;case"End":if(!x)return;c.focusOption("last");break;default:return}m.preventDefault()}},c.state.instancePrefix="react-select-"+(c.props.instanceId||++YMe),c.state.selectValue=vW(s.value),s.menuIsOpen&&c.state.selectValue.length){var d=c.getFocusableOptionsWithIds(),p=c.buildFocusableOptions(),v=p.indexOf(c.state.selectValue[0]);c.state.focusableOptionsWithIds=d,c.state.focusedOption=p[v],c.state.focusedOptionId=JO(d,p[v])}return c}return Vo(o,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&EW(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(c){var d=this.props,p=d.isDisabled,v=d.menuIsOpen,m=this.state.isFocused;(m&&!p&&c.isDisabled||m&&v&&!c.menuIsOpen)&&this.focusInput(),m&&p&&!c.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!m&&!p&&c.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(EW(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(c,d){this.props.onInputChange(c,d)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(c){var d=this,p=this.state,v=p.selectValue,m=p.isFocused,E=this.buildFocusableOptions(),C=c==="first"?0:E.length-1;if(!this.props.isMulti){var b=E.indexOf(v[0]);b>-1&&(C=b)}this.scrollToFocusedOptionOnUpdate=!(m&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:E[C],focusedOptionId:this.getFocusedOptionId(E[C])},function(){return d.onMenuOpen()})}},{key:"focusValue",value:function(c){var d=this.state,p=d.selectValue,v=d.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var m=p.indexOf(v);v||(m=-1);var E=p.length-1,C=-1;if(p.length){switch(c){case"previous":m===0?C=0:m===-1?C=E:C=m-1;break;case"next":m>-1&&m<E&&(C=m+1);break}this.setState({inputIsHidden:C!==-1,focusedValue:p[C]})}}}},{key:"focusOption",value:function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",d=this.props.pageSize,p=this.state.focusedOption,v=this.getFocusableOptions();if(v.length){var m=0,E=v.indexOf(p);p||(E=-1),c==="up"?m=E>0?E-1:v.length-1:c==="down"?m=(E+1)%v.length:c==="pageup"?(m=E-d,m<0&&(m=0)):c==="pagedown"?(m=E+d,m>v.length-1&&(m=v.length-1)):c==="last"&&(m=v.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:v[m],focusedValue:null,focusedOptionId:this.getFocusedOptionId(v[m])})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(XO):_e(_e({},XO),this.props.theme):XO}},{key:"getCommonProps",value:function(){var c=this.clearValue,d=this.cx,p=this.getStyles,v=this.getClassNames,m=this.getValue,E=this.selectOption,C=this.setValue,b=this.props,R=b.isMulti,w=b.isRtl,I=b.options,O=this.hasValue();return{clearValue:c,cx:d,getStyles:p,getClassNames:v,getValue:m,hasValue:O,isMulti:R,isRtl:w,options:I,selectOption:E,selectProps:b,setValue:C,theme:this.getTheme()}}},{key:"hasValue",value:function(){var c=this.state.selectValue;return c.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var c=this.props,d=c.isClearable,p=c.isMulti;return d===void 0?p:d}},{key:"isOptionDisabled",value:function(c,d){return tQ(this.props,c,d)}},{key:"isOptionSelected",value:function(c,d){return nQ(this.props,c,d)}},{key:"filterOption",value:function(c,d){return rQ(this.props,c,d)}},{key:"formatOptionLabel",value:function(c,d){if(typeof this.props.formatOptionLabel=="function"){var p=this.props.inputValue,v=this.state.selectValue;return this.props.formatOptionLabel(c,{context:d,inputValue:p,selectValue:v})}else return this.getOptionLabel(c)}},{key:"formatGroupLabel",value:function(c){return this.props.formatGroupLabel(c)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var c=this.props,d=c.isDisabled,p=c.isSearchable,v=c.inputId,m=c.inputValue,E=c.tabIndex,C=c.form,b=c.menuIsOpen,R=c.required,w=this.getComponents(),I=w.Input,O=this.state,x=O.inputIsHidden,P=O.ariaSelection,N=this.commonProps,L=v||this.getElementId("input"),M=_e(_e(_e({"aria-autocomplete":"list","aria-expanded":b,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":R,role:"combobox","aria-activedescendant":this.isAppleDevice?void 0:this.state.focusedOptionId||""},b&&{"aria-controls":this.getElementId("listbox")}),!p&&{"aria-readonly":!0}),this.hasValue()?(P==null?void 0:P.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return p?S.createElement(I,Je({},N,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:L,innerRef:this.getInputRef,isDisabled:d,isHidden:x,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:E,form:C,type:"text",value:m},M)):S.createElement(yMe,Je({id:L,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:VC,onFocus:this.onInputFocus,disabled:d,tabIndex:E,inputMode:"none",form:C,value:""},M))}},{key:"renderPlaceholderOrValue",value:function(){var c=this,d=this.getComponents(),p=d.MultiValue,v=d.MultiValueContainer,m=d.MultiValueLabel,E=d.MultiValueRemove,C=d.SingleValue,b=d.Placeholder,R=this.commonProps,w=this.props,I=w.controlShouldRenderValue,O=w.isDisabled,x=w.isMulti,P=w.inputValue,N=w.placeholder,L=this.state,M=L.selectValue,j=L.focusedValue,$=L.isFocused;if(!this.hasValue()||!I)return P?null:S.createElement(b,Je({},R,{key:"placeholder",isDisabled:O,isFocused:$,innerProps:{id:this.getElementId("placeholder")}}),N);if(x)return M.map(function(G,Y){var q=G===j,J="".concat(c.getOptionLabel(G),"-").concat(c.getOptionValue(G));return S.createElement(p,Je({},R,{components:{Container:v,Label:m,Remove:E},isFocused:q,isDisabled:O,key:J,index:Y,removeProps:{onClick:function(){return c.removeValue(G)},onTouchEnd:function(){return c.removeValue(G)},onMouseDown:function(Z){Z.preventDefault()}},data:G}),c.formatOptionLabel(G,"value"))});if(P)return null;var H=M[0];return S.createElement(C,Je({},R,{data:H,isDisabled:O}),this.formatOptionLabel(H,"value"))}},{key:"renderClearIndicator",value:function(){var c=this.getComponents(),d=c.ClearIndicator,p=this.commonProps,v=this.props,m=v.isDisabled,E=v.isLoading,C=this.state.isFocused;if(!this.isClearable()||!d||m||!this.hasValue()||E)return null;var b={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return S.createElement(d,Je({},p,{innerProps:b,isFocused:C}))}},{key:"renderLoadingIndicator",value:function(){var c=this.getComponents(),d=c.LoadingIndicator,p=this.commonProps,v=this.props,m=v.isDisabled,E=v.isLoading,C=this.state.isFocused;if(!d||!E)return null;var b={"aria-hidden":"true"};return S.createElement(d,Je({},p,{innerProps:b,isDisabled:m,isFocused:C}))}},{key:"renderIndicatorSeparator",value:function(){var c=this.getComponents(),d=c.DropdownIndicator,p=c.IndicatorSeparator;if(!d||!p)return null;var v=this.commonProps,m=this.props.isDisabled,E=this.state.isFocused;return S.createElement(p,Je({},v,{isDisabled:m,isFocused:E}))}},{key:"renderDropdownIndicator",value:function(){var c=this.getComponents(),d=c.DropdownIndicator;if(!d)return null;var p=this.commonProps,v=this.props.isDisabled,m=this.state.isFocused,E={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return S.createElement(d,Je({},p,{innerProps:E,isDisabled:v,isFocused:m}))}},{key:"renderMenu",value:function(){var c=this,d=this.getComponents(),p=d.Group,v=d.GroupHeading,m=d.Menu,E=d.MenuList,C=d.MenuPortal,b=d.LoadingMessage,R=d.NoOptionsMessage,w=d.Option,I=this.commonProps,O=this.state.focusedOption,x=this.props,P=x.captureMenuScroll,N=x.inputValue,L=x.isLoading,M=x.loadingMessage,j=x.minMenuHeight,$=x.maxMenuHeight,H=x.menuIsOpen,G=x.menuPlacement,Y=x.menuPosition,q=x.menuPortalTarget,J=x.menuShouldBlockScroll,re=x.menuShouldScrollIntoView,Z=x.noOptionsMessage,Q=x.onMenuScrollToTop,he=x.onMenuScrollToBottom;if(!H)return null;var oe=function(ve,ge){var Te=ve.type,we=ve.data,Ie=ve.isDisabled,Me=ve.isSelected,Ke=ve.label,ke=ve.value,Ne=O===we,ze=Ie?void 0:function(){return c.onOptionHover(we)},Qe=Ie?void 0:function(){return c.selectOption(we)},De="".concat(c.getElementId("option"),"-").concat(ge),xe={id:De,onClick:Qe,onMouseMove:ze,onMouseOver:ze,tabIndex:-1,role:"option","aria-selected":c.isAppleDevice?void 0:Me};return S.createElement(w,Je({},I,{innerProps:xe,data:we,isDisabled:Ie,isSelected:Me,key:De,label:Ke,type:Te,value:ke,isFocused:Ne,innerRef:Ne?c.getFocusedOptionRef:void 0}),c.formatOptionLabel(ve.data,"menu"))},ae;if(this.hasOptions())ae=this.getCategorizedOptions().map(function(le){if(le.type==="group"){var ve=le.data,ge=le.options,Te=le.index,we="".concat(c.getElementId("group"),"-").concat(Te),Ie="".concat(we,"-heading");return S.createElement(p,Je({},I,{key:we,data:ve,options:ge,Heading:v,headingProps:{id:Ie,data:le.data},label:c.formatGroupLabel(le.data)}),le.options.map(function(Me){return oe(Me,"".concat(Te,"-").concat(Me.index))}))}else if(le.type==="option")return oe(le,"".concat(le.index))});else if(L){var te=M({inputValue:N});if(te===null)return null;ae=S.createElement(b,I,te)}else{var de=Z({inputValue:N});if(de===null)return null;ae=S.createElement(R,I,de)}var fe={minMenuHeight:j,maxMenuHeight:$,menuPlacement:G,menuPosition:Y,menuShouldScrollIntoView:re},ie=S.createElement(ZLe,Je({},I,fe),function(le){var ve=le.ref,ge=le.placerProps,Te=ge.placement,we=ge.maxHeight;return S.createElement(m,Je({},I,fe,{innerRef:ve,innerProps:{onMouseDown:c.onMenuMouseDown,onMouseMove:c.onMenuMouseMove},isLoading:L,placement:Te}),S.createElement(IMe,{captureEnabled:P,onTopArrive:Q,onBottomArrive:he,lockEnabled:J},function(Ie){return S.createElement(E,Je({},I,{innerRef:function(Ke){c.getMenuListRef(Ke),Ie(Ke)},innerProps:{role:"listbox","aria-multiselectable":I.isMulti,id:c.getElementId("listbox")},isLoading:L,maxHeight:we,focusedOption:O}),ae)}))});return q||Y==="fixed"?S.createElement(C,Je({},I,{appendTo:q,controlElement:this.controlRef,menuPlacement:G,menuPosition:Y}),ie):ie}},{key:"renderFormField",value:function(){var c=this,d=this.props,p=d.delimiter,v=d.isDisabled,m=d.isMulti,E=d.name,C=d.required,b=this.state.selectValue;if(C&&!this.hasValue()&&!v)return S.createElement(xMe,{name:E,onFocus:this.onValueInputFocus});if(!(!E||v))if(m)if(p){var R=b.map(function(O){return c.getOptionValue(O)}).join(p);return S.createElement("input",{name:E,type:"hidden",value:R})}else{var w=b.length>0?b.map(function(O,x){return S.createElement("input",{key:"i-".concat(x),name:E,type:"hidden",value:c.getOptionValue(O)})}):S.createElement("input",{name:E,type:"hidden",value:""});return S.createElement("div",null,w)}else{var I=b[0]?this.getOptionValue(b[0]):"";return S.createElement("input",{name:E,type:"hidden",value:I})}}},{key:"renderLiveRegion",value:function(){var c=this.commonProps,d=this.state,p=d.ariaSelection,v=d.focusedOption,m=d.focusedValue,E=d.isFocused,C=d.selectValue,b=this.getFocusableOptions();return S.createElement(mMe,Je({},c,{id:this.getElementId("live-region"),ariaSelection:p,focusedOption:v,focusedValue:m,isFocused:E,selectValue:C,focusableOptions:b,isAppleDevice:this.isAppleDevice}))}},{key:"render",value:function(){var c=this.getComponents(),d=c.Control,p=c.IndicatorsContainer,v=c.SelectContainer,m=c.ValueContainer,E=this.props,C=E.className,b=E.id,R=E.isDisabled,w=E.menuIsOpen,I=this.state.isFocused,O=this.commonProps=this.getCommonProps();return S.createElement(v,Je({},O,{className:C,innerProps:{id:b,onKeyDown:this.onKeyDown},isDisabled:R,isFocused:I}),this.renderLiveRegion(),S.createElement(d,Je({},O,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:R,isFocused:I,menuIsOpen:w}),S.createElement(m,Je({},O,{isDisabled:R}),this.renderPlaceholderOrValue(),this.renderInput()),S.createElement(p,Je({},O,{isDisabled:R}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(c,d){var p=d.prevProps,v=d.clearFocusValueOnUpdate,m=d.inputIsHiddenAfterUpdate,E=d.ariaSelection,C=d.isFocused,b=d.prevWasFocused,R=d.instancePrefix,w=c.options,I=c.value,O=c.menuIsOpen,x=c.inputValue,P=c.isMulti,N=vW(I),L={};if(p&&(I!==p.value||w!==p.options||O!==p.menuIsOpen||x!==p.inputValue)){var M=O?GMe(c,N):[],j=O?DW(Wy(c,N),"".concat(R,"-option")):[],$=v?KMe(d,N):null,H=qMe(d,M),G=JO(j,H);L={selectValue:N,focusedOption:H,focusedOptionId:G,focusableOptionsWithIds:j,focusedValue:$,clearFocusValueOnUpdate:!1}}var Y=m!=null&&c!==p?{inputIsHidden:m,inputIsHiddenAfterUpdate:void 0}:{},q=E,J=C&&b;return C&&!J&&(q={value:my(P,N,N[0]||null),options:N,action:"initial-input-focus"},J=!b),(E==null?void 0:E.action)==="initial-input-focus"&&(q=null),_e(_e(_e({},L),Y),{},{prevProps:c,ariaSelection:q,prevWasFocused:J})}}]),o}(S.Component);oQ.defaultProps=zMe;var XMe=S.forwardRef(function(e,r){var o=_2e(e);return S.createElement(oQ,Je({ref:r},o))}),JMe=XMe;const{Title:QMe,Paragraph:ZMe}=jo,eFe=S.memo(function({label:r}){const s=el().filter(m=>m.hasAudio||m.hasVideo),c=Xg(m=>m.localTracks),d=Xg(m=>m.hostRoom),p=mc(),v=Os();return se.jsxs("div",{className:"room-selector-item",children:[se.jsx("i",{className:"i-mdi-chat-processing-outline text-5 color-zinc"}),se.jsx("code",{className:"bg-rose color-white px-2 rounded",children:r}),p&&c&&v.uid&&(d==null?void 0:d.client.channelName)===v.channelName&&se.jsxs("div",{className:"user",children:[se.jsx(rz,{audioTrack:c[0],cameraOn:!0,micOn:!0,videoTrack:c[1]}),se.jsx("div",{className:"mask"}),se.jsx("label",{className:"label",children:Zc(v.uid)})]},v.uid),se.jsx(se.Fragment,{children:s.map(m=>se.jsxs("div",{className:"user",children:[se.jsx(dD,{user:m}),se.jsx("div",{className:"mask"}),se.jsx("label",{className:"label",children:Zc(m.uid)})]},m.uid))})]})}),tFe=({innerProps:e,isDisabled:r,label:o,data:s})=>{const{client:c}=s.value;return r?null:se.jsx("div",{...e,children:se.jsx(ZW,{client:c,children:se.jsx(eFe,{label:o})})})},nFe=()=>{const e=Xg(p=>p.getRooms),[r,o]=S.useState(!1);S.useEffect(()=>{e()},[]);const s=Xg(p=>p.rooms),c=Xg(p=>p.selectChannel),d=S.useMemo(()=>s==null?void 0:s.map(p=>({label:p.channel.replace(/[^0-9]*/,"Room"),value:p})),[s]);return se.jsx(ji,{children:r?se.jsx("div",{className:"max-w-lg p-10",children:se.jsx(JMe,{components:{Option:tFe},isMulti:!1,menuIsOpen:!0,onChange:p=>{var v;return c((v=p==null?void 0:p.value)==null?void 0:v.channel)},options:d})}):se.jsxs("div",{className:"h-screen p-3",children:[se.jsx(QMe,{children:"multi-channel"}),se.jsx(ZMe,{children:"This is multi-channel example. By create multi Agora Client. You can join multi-channel"}),se.jsx("div",{className:"text-xl",children:se.jsx(ho,{onClick:()=>o(!0),type:"primary",children:"show demo"})})]})})};function aQ({videoTracks:e}){return se.jsx(se.Fragment,{children:e.map(r=>se.jsxs(uc.Item,{children:[se.jsx(Yv,{cover:Ml(),track:r},r.getUserId()),se.jsx(Eu,{children:`${Zc(r.getUserId())}{${r.getUserId()}}`})]},r.getUserId()))})}const rFe=()=>{const[e,r]=S.useState(!1);no({appid:jt.appId,channel:jt.channel,token:jt.token},e);const[o,s]=S.useState(!1),[c,d]=S.useState(!1),[p,v]=S.useState(!1),{screenTrack:m,error:E}=ez(p,{},"auto");S.useEffect(()=>{v(!1)},[E]);const C=el(),{videoTracks:b}=Rm(C.filter(w=>w.uid!==jt.ShareScreenUID)),{audioTracks:R}=Tm(C.filter(w=>w.uid!==jt.ShareScreenUID));return R.map(w=>w.play()),se.jsxs(ji,{children:[se.jsx("div",{className:"h-screen p-3",children:e&&se.jsxs(se.Fragment,{children:[se.jsx(ho,{onClick:()=>v(w=>!w),type:"primary",children:p?"stop share screen":"start share screen"}),p&&se.jsx(HPe,{onCloseScreenShare:()=>{v(!1)},screenShareOn:p,screenTrack:m}),se.jsx(Xv,{cameraOn:c,micOn:o,renderRemoteUsers:()=>se.jsx(aQ,{videoTracks:b})})]})}),se.jsx(ka,{calling:e,cameraOn:c,micOn:o,setCalling:()=>{r(w=>!w),v(!1)},setCamera:()=>{d(w=>!w)},setMic:()=>{s(w=>!w)}})]})};const{Title:iFe,Paragraph:oFe,Text:aFe}=jo,sFe=()=>{const[e,r]=S.useState(!1);no({appid:jt.appId,channel:jt.channel,token:jt.token},e);const[o,s]=S.useState(!1),[c,d]=S.useState(!1),p=el(),[v,m]=S.useState(!0),{videoTracks:E}=Rm(v?p:p.filter((w,I)=>I==0)),{audioTracks:C}=Tm(p);C.map(w=>w.play());const b=()=>se.jsx("div",{className:"p-4 text-xl",children:se.jsx(ho,{onClick:()=>m(w=>!w),type:"primary",children:`switch to layout ${v?2:1}`})}),R=()=>se.jsx(se.Fragment,{children:v?se.jsx(cFe,{videoTracks:E}):se.jsx(lFe,{videoTracks:E})});return se.jsxs(ji,{children:[e?se.jsx(Xv,{cameraOn:c,micOn:o,renderAction:b,renderRemoteUsers:R}):se.jsxs("div",{className:"h-screen p-3",children:[se.jsx(iFe,{children:"SwitchLayout"}),se.jsxs(oFe,{children:["By using ",se.jsx(aFe,{keyboard:!0,children:"useRemoteVideoTracks"})," hook to dynamically switch the camera track, this will not generate a new track, but only dynamically subscribe and unsubscribe the track according to your needs."]})]}),se.jsx(ka,{calling:e,cameraOn:c,micOn:o,setCalling:()=>{r(w=>!w)},setCamera:()=>{d(w=>!w)},setMic:()=>{s(w=>!w)}})]})};function cFe({videoTracks:e}){return se.jsx(se.Fragment,{children:e.map(r=>se.jsxs(uc.Item,{children:[se.jsx(Yv,{cover:Ml(),track:r},r.getUserId()),se.jsx(Eu,{children:`Layout1 ${Zc(r.getUserId())}{${r.getUserId()}}`})]},r.getUserId()))})}function lFe({videoTracks:e}){return se.jsx(se.Fragment,{children:e.map(r=>se.jsxs(uc.Item,{children:[se.jsx(Yv,{cover:Ml(),track:r},r.getUserId()),se.jsx(Eu,{children:`Layout2 ${Zc(r.getUserId())}{${r.getUserId()}}`})]},r.getUserId()))})}const sQ=[{label:"switch-layout",component:sFe},{label:"multi-channel",component:nFe},{label:"share-screen",component:rFe}],uFe=()=>{const[e,r]=S.useState(!1);no({appid:jt.appId,channel:jt.channel,token:jt.token},e);const[o,s]=S.useState(!1),[c,d]=S.useState(!1),p=el(),{videoTracks:v}=Rm(p),{audioTracks:m}=Tm(p);return m.map(E=>E.play()),se.jsxs(ji,{children:[e?se.jsx(Xv,{cameraOn:c,micOn:o,renderRemoteUsers:()=>se.jsx(aQ,{videoTracks:v})}):se.jsx(ji,{}),se.jsx(ka,{calling:e,cameraOn:c,micOn:o,setCalling:()=>{r(E=>!E)},setCamera:()=>{d(E=>!E)},setMic:()=>{s(E=>!E)}})]})},cQ=[{label:"overview",component:uFe}],{Title:dFe,Paragraph:QO}=jo,hFe=()=>{no({appid:jt.appId,channel:jt.channel,token:jt.token},!0);const[e,r]=S.useState(!1),[o,s]=S.useState(),{localMicrophoneTrack:c}=Cm(e);return Md([c]),S.useEffect(()=>{c&&s({muted:c.muted,isPlaying:c.isPlaying,enabled:c.enabled})},[e,c]),se.jsxs(ji,{children:[se.jsxs("div",{className:"h-screen p-3",children:[se.jsx(dFe,{children:"local audio track status"}),o&&se.jsxs(se.Fragment,{children:[se.jsx(QO,{children:`muted: ${o==null?void 0:o.muted}`}),se.jsx(QO,{children:`isPlaying: ${o.isPlaying}`}),se.jsx(QO,{children:`enabled: ${o==null?void 0:o.enabled}`})]}),se.jsx(KC,{disabled:!e,track:c})]}),se.jsx(ka,{micOn:e,setMic:()=>{r(d=>!d)}})]})},{Title:pFe}=jo,fFe=()=>{no({appid:jt.appId,channel:jt.channel,token:jt.token},!0);const[e,r]=S.useState(!1),[o,s]=S.useState(!1),[c,d]=S.useState(!1),[p,v]=S.useState(!1),{localMicrophoneTrack:m}=Cm(e),{localCameraTrack:E}=bm(o);return Md([m,E]),se.jsxs(ji,{children:[se.jsxs("div",{className:"h-screen p-3 overflow-auto",children:[se.jsx(pFe,{children:"local user status"}),se.jsxs(ho,{className:"m-2",onClick:()=>{v(C=>!C)},type:p?"primary":"default",children:["playAudio : ",JSON.stringify(p)]}),se.jsxs(ho,{className:"m-2",onClick:()=>{d(C=>!C)},type:c?"primary":"default",children:["playVideo : ",JSON.stringify(c)]}),se.jsx(ho,{className:"m-2",onClick:()=>{d(!0),s(!1)},type:"primary",children:"cameraOn=false playVideo=true"}),se.jsx(ho,{className:"m-2",onClick:()=>{d(!1),s(!0)},type:"primary",children:"cameraOn=true playVideo=false"}),se.jsx(rz,{audioTrack:m,cameraOn:o,className:"m-2",micOn:e,playAudio:p,playVideo:c,style:{width:"300px",height:"300px"},videoTrack:E})]}),se.jsx(ka,{cameraOn:o,micOn:e,setCamera:()=>{s(C=>!C)},setMic:()=>{r(C=>!C)}})]})},{Title:mFe}=jo,gFe=()=>{no({appid:jt.appId,channel:jt.channel,token:jt.token},!0);const[e,r]=S.useState(!1),{localCameraTrack:o}=bm();return Md([o]),se.jsxs(ji,{children:[se.jsxs("div",{className:"h-screen p-3",children:[se.jsx(mFe,{children:"local video track"}),se.jsx(Lv,{disabled:!e,play:e,style:{width:"300px",height:"300px"},track:o,videoPlayerConfig:{mirror:!0,fit:"contain"}})]}),se.jsx(ka,{cameraOn:e,setCamera:()=>{r(s=>!s)}})]})},{Title:vFe}=jo,EFe=()=>{const[e,r]=S.useState(!1);no({appid:jt.appId,channel:jt.channel,token:jt.token},e);const[o,s]=S.useState(),c=el(),{audioTracks:d}=Tm(c);return S.useEffect(()=>{if(d&&d.length>0){const p=[];d.map(v=>{p.push({isPlay:v.isPlaying,id:v.getTrackId(),track:v})}),s(p)}else s([])},[d]),S.useEffect(()=>{e||s([])},[e]),se.jsxs(ji,{children:[se.jsxs("div",{className:"h-screen p-3",children:[se.jsx(vFe,{children:"remote audio track status"}),o&&o.length>0&&o.map(p=>se.jsxs("div",{children:[se.jsx("div",{className:"p-4 text-xl",children:se.jsx(ho,{onClick:()=>{p.isPlay=!p.isPlay,s([...o])},type:"primary",children:"switch this remote audio track play status"})}),p.isPlay,se.jsx(iz,{play:p.isPlay,track:p.track})]},p.id))]}),se.jsx(ka,{calling:e,setCalling:()=>{r(p=>!p)}})]})},{Title:_Fe}=jo,SFe=()=>{const[e,r]=S.useState(!1),o=S.useMemo(()=>Ml(),[]);no({appid:jt.appId,channel:jt.channel,token:jt.token},e);const[s,c]=S.useState(),d=el();return S.useEffect(()=>{if(d.length>0){const p=[];d.map(v=>{p.push({playVideo:!0,playAudio:!0,id:v.uid,user:v})}),c(p)}else c([])},[d]),S.useEffect(()=>{e||c([])},[e]),se.jsxs(ji,{children:[se.jsxs("div",{className:"h-screen p-3",children:[se.jsx(_Fe,{children:"RemoteUser"}),s&&s.length>0&&s.map(p=>se.jsxs("div",{children:[se.jsxs("div",{className:"text-xl",children:[se.jsx(ho,{className:"m-2",onClick:()=>{p.playVideo=!p.playVideo,c([...s])},type:p.playVideo?"default":"primary",children:`${p.playVideo?"stop":"play"} RemoteUser Video`}),se.jsx(ho,{className:"m-2",onClick:()=>{p.playAudio=!p.playAudio,c([...s])},type:p.playAudio?"default":"primary",children:`${p.playAudio?"stop":"play"} RemoteUser Audio`})]}),se.jsx("div",{className:"p-4 text-xl",children:se.jsx(dD,{cover:o,playAudio:p.playAudio,playVideo:p.playVideo,style:{width:"150px",height:"100px"},user:p.user})})]},p.id))]}),se.jsx(ka,{calling:e,setCalling:()=>{r(p=>!p)}})]})},{Title:yFe}=jo,CFe=()=>{const[e,r]=S.useState(!1);no({appid:jt.appId,channel:jt.channel,token:jt.token},e);const[o,s]=S.useState(),c=el(),{videoTracks:d}=Rm(c);return S.useEffect(()=>{if(d&&d.length>0){const p=[];d.map(v=>{p.push({isPlay:!0,id:v.getTrackId(),track:v})}),s(p)}else s([])},[d]),S.useEffect(()=>{e||s([])},[e]),se.jsxs(ji,{children:[se.jsxs("div",{className:"h-screen p-3",children:[se.jsx(yFe,{children:"remote video track status"}),o&&o.length>0&&o.map(p=>se.jsxs("div",{children:[se.jsx("div",{className:"p-4 text-xl",children:se.jsx(ho,{onClick:()=>{p.isPlay=!p.isPlay,s([...o])},type:"primary",children:"switch this remote video track play status"})}),se.jsx("div",{className:"p-4 text-xl",children:se.jsx(uD,{play:p.isPlay,style:{width:"150px",height:"100px"},track:p.track})})]},p.id))]}),se.jsx(ka,{calling:e,setCalling:()=>{r(p=>!p)}})]})},lQ=[{label:"LocalAudioTrack",component:hFe},{label:"RemoteAudioTrack",component:EFe},{label:"LocalVideoTrack",component:gFe},{label:"RemoteVideoTrack",component:CFe},{label:"LocalUser",component:fFe},{label:"RemoteUser",component:SFe}],{Title:bFe}=jo,TFe=()=>{no({appid:jt.appId,channel:jt.channel,token:jt.token},!0);const[e,r]=S.useState(!1),{localMicrophoneTrack:o}=Cm();return lD(o,e),se.jsxs(ji,{children:[se.jsx("div",{className:"h-screen p-3",children:se.jsx(bFe,{children:"useAutoPlayAudioTrack"})}),se.jsx(ka,{micOn:e,setMic:()=>{r(s=>!s)}})]})},{Title:RFe}=jo,wFe=()=>{no({appid:jt.appId,channel:jt.channel,token:jt.token},!0);const[e,r]=S.useState(!1),o=S.useRef(null),{localCameraTrack:s}=bm();return cD(s,e,o.current),se.jsxs(ji,{children:[se.jsxs("div",{className:"h-screen p-3",children:[se.jsx(RFe,{children:"useAutoPlayVideoTrack"}),se.jsx("div",{className:"p-4 text-xl",children:se.jsx("div",{ref:c=>o.current=c,style:{width:"150px",height:"100px"}})})]}),se.jsx(ka,{cameraOn:e,setCamera:()=>{r(c=>!c)}})]})},{Title:IFe}=jo,AFe=()=>{const[e,r]=S.useState(!1),[o,s]=S.useState([]),c=Os();Rfe(c,"connection-state-change",(p,v,m)=>{console.log(`connection-state-change,curState: ${p},revState: ${v},reason: ${m}`),s(E=>E.concat({eventName:"connection-state-change",value:`curState: ${p},revState: ${v},reason: ${m}`}))}),no({appid:jt.appId,channel:jt.channel,token:jt.token},e);const d=()=>se.jsx(se.Fragment,{});return se.jsxs(ji,{children:[se.jsxs("div",{className:"h-screen p-3",children:[se.jsx(IFe,{children:"UseClientEvent"}),se.jsx(YN,{bordered:!0,dataSource:o,renderItem:p=>se.jsxs(YN.Item,{children:[se.jsxs(jo.Text,{mark:!0,children:["[",p.eventName,"]"]})," ",p.value]}),style:{height:"300px",overflow:"auto"}})]}),e&&se.jsx(Xv,{cameraOn:!1,micOn:!1,renderLocalUser:d,showUserInfo:!1}),se.jsx(ka,{calling:e,setCalling:()=>{r(p=>!p)}})]})},{Title:OFe,Paragraph:ZO,Text:xFe}=jo,NFe=()=>{const[e,r]=S.useState(!1),o=Ofe();return no({appid:jt.appId,channel:jt.channel,token:jt.token},e),se.jsx(ji,{children:se.jsxs("div",{className:"h-screen p-3",children:[se.jsx(OFe,{children:"useConnectionState"}),se.jsxs(ZO,{children:["By using ",se.jsx(xFe,{keyboard:!0,children:"useConnectionState"})," hook to get the current connection state of the client."]}),se.jsx(ZO,{children:`result: ${o}`}),se.jsxs(ZO,{children:[se.jsx(ho,{className:"m-1",onClick:()=>r(!0),type:"primary",children:"Join"}),se.jsx(ho,{className:"m-1",onClick:()=>r(!1),type:"default",children:"Leave"})]})]})})},{Title:DFe,Paragraph:ex,Text:PFe}=jo,LFe=()=>{const[e,r]=S.useState(!1),o=GC();return no({appid:jt.appId,channel:jt.channel,token:jt.token},e),se.jsx(ji,{children:se.jsxs("div",{className:"h-screen p-3",children:[se.jsx(DFe,{children:"useCurrentUID"}),se.jsxs(ex,{children:["By using ",se.jsx(PFe,{keyboard:!0,children:"useCurrentUID"})," hook to get the UID of the current user."]}),se.jsx(ex,{children:`result: ${o}`}),se.jsxs(ex,{children:[se.jsx(ho,{className:"m-1",onClick:()=>r(!0),type:"primary",children:"Join"}),se.jsx(ho,{className:"m-1",onClick:()=>r(!1),type:"default",children:"Leave"})]})]})})},{Title:kFe,Paragraph:tx,Text:MFe}=jo,FFe=()=>{const[e,r]=S.useState(!1),o=mc();return no({appid:jt.appId,channel:jt.channel,token:jt.token},e),se.jsx(ji,{children:se.jsxs("div",{className:"h-screen p-3",children:[se.jsx(kFe,{children:"useIsConnected"}),se.jsxs(tx,{children:["By using ",se.jsx(MFe,{keyboard:!0,children:"useIsConnected"})," hook to determines whether the client is successfully connected to Agora server."]}),se.jsx(tx,{children:`result: ${o}`}),se.jsxs(tx,{children:[se.jsx(ho,{className:"m-1",onClick:()=>r(!0),type:"primary",children:"Join"}),se.jsx(ho,{className:"m-1",onClick:()=>r(!1),type:"default",children:"Leave"})]})]})})},{Title:UFe,Paragraph:LW,Text:Rg}=jo,BFe=()=>{const[e,r]=S.useState(!1),{data:o,isLoading:s,isConnected:c,error:d}=no({appid:jt.appId,channel:jt.channel,token:jt.token},e),[p,v]=S.useState(!1),[m,E]=S.useState(!1),C=el(),{videoTracks:b}=Rm(C),{audioTracks:R}=Tm(C);R.map(I=>I.play());const w=()=>se.jsx(se.Fragment,{children:b.map(I=>se.jsxs(uc.Item,{children:[se.jsx(Yv,{cover:Ml(),track:I},I.getUserId()),se.jsx(Eu,{children:`${Zc(I.getUserId())}{${I.getUserId()}}`})]},I.getUserId()))});return se.jsxs(ji,{children:[se.jsxs("div",{className:"h-screen p-3",children:[se.jsx(UFe,{children:"UseJoin"}),se.jsxs(LW,{children:["By using ",se.jsx(Rg,{keyboard:!0,children:"UseJoin"})," hook to join room."]}),se.jsxs(LW,{children:["You can do some actions like fetching token before calling join.",se.jsx("br",{}),"Below is the returned data."]}),se.jsxs(Rg,{children:["data: ",o]}),se.jsxs(Rg,{className:"pl-3",children:["isLoading: ",`${s}`]}),se.jsxs(Rg,{className:"pl-3",children:["isConnected: ",`${c}`]}),se.jsxs(Rg,{className:"pl-3",children:["error: ",`${JSON.stringify(d)}`]})]}),e&&se.jsx(Xv,{cameraOn:m,micOn:p,renderRemoteUsers:w}),se.jsx(ka,{calling:e,cameraOn:m,micOn:p,setCalling:()=>{r(I=>!I)},setCamera:()=>{E(I=>!I)},setMic:()=>{v(I=>!I)}})]})},{Title:VFe}=jo,jFe=()=>{const[e,r]=S.useState(!1),[o,s]=S.useState(null),[c,d]=S.useState(null);no({appid:jt.appId,channel:jt.channel,token:jt.token,uid:jt.ShareScreenUID},e);const{screenTrack:p,error:v}=ez(e,{},"auto");return S.useEffect(()=>{p?Array.isArray(p)?(s(p.filter(m=>m.trackMediaType==="video")[0]),d(p.filter(m=>m.trackMediaType==="audio")[0])):s(p):(d(null),s(null))},[p]),Md([o,c],e),S.useEffect(()=>{r(!1)},[v]),JW(o,"track-ended",()=>{console.log("screen sharing ended"),r(!1)}),se.jsx(ji,{children:se.jsxs("div",{className:"h-screen p-3",children:[se.jsx(VFe,{children:"useLocalScreenTrack"}),se.jsx(ho,{onClick:()=>r(m=>!m),type:"primary",children:e?"stop share screen":"start share screen"}),e&&o&&se.jsx(Lv,{disabled:!e,play:e,style:{width:"600px",height:"400px"},track:o})]})})},{Title:$Fe,Paragraph:HFe}=jo,WFe=()=>{const e=xfe();return no({appid:jt.appId,channel:jt.channel,token:jt.token},!0),se.jsx(ji,{children:se.jsxs("div",{className:"h-screen p-3",children:[se.jsx($Fe,{children:"useNetworkQuality"}),se.jsx(HFe,{children:`result: ${JSON.stringify(e)}`})]})})},zFe=()=>{const[e,r]=S.useState(!1),o=GC()||0,s=S.useMemo(()=>Zc(o),[o]),c=S.useMemo(()=>Ml(),[]),{isConnected:d}=no({appid:jt.appId,channel:jt.channel,token:jt.token},e),[p,v]=S.useState(!1),[m,E]=S.useState(!1),{localMicrophoneTrack:C}=Cm(p),{localCameraTrack:b}=bm(m);Md([C,b]);const R=el(),w=R.filter(P=>P.hasAudio||P.hasVideo),{videoTracks:I}=Rm(R),{audioTracks:O}=Tm(R);O.map(P=>P.play());const x=()=>se.jsx(se.Fragment,{children:I.map(P=>se.jsxs(uc.Item,{children:[se.jsx(Yv,{cover:Ml(),track:P},P.getUserId()),se.jsx(Eu,{children:`Layout1 ${Zc(P.getUserId())}{${P.getUserId()}}`})]},P.getUserId()))});return se.jsxs(ji,{children:[se.jsxs(se.Fragment,{children:[se.jsx(a2,{published:w.length+(p||m?1:0),total:R.length+1}),se.jsxs(uc,{children:[d&&se.jsx(uc.Item,{children:se.jsx(o2,{audioTrack:C,cameraOn:m,cover:c,micOn:p,videoTrack:b,children:se.jsx(Eu,{children:`${s}{${o}}`})})}),x?x():void 0]})]}),se.jsx(ka,{calling:e,cameraOn:m,micOn:p,setCalling:()=>r(P=>!P),setCamera:()=>{E(P=>!P)},setMic:()=>{v(P=>!P)}})]})},GFe=()=>{const[e,r]=S.useState(!1),o=mc(),s=GC()||0,c=S.useMemo(()=>Zc(s),[s]),d=S.useMemo(()=>Ml(),[]);no({appid:jt.appId,channel:jt.channel,token:jt.token},e);const[p,v]=S.useState(!1),[m,E]=S.useState(!1),{localMicrophoneTrack:C}=Cm(p),{localCameraTrack:b}=bm(m);Md([C,b]);const R=el(),w=R.filter(I=>I.hasAudio||I.hasVideo);return se.jsxs(ji,{children:[se.jsxs(se.Fragment,{children:[se.jsx(a2,{published:w.length+(p||m?1:0),total:R.length+1}),se.jsxs(uc,{children:[o&&se.jsx(uc.Item,{children:se.jsx(o2,{audioTrack:C,cameraOn:m,cover:d,micOn:p,videoTrack:b,children:se.jsx(Eu,{children:`${c}{${s}}`})})}),R.map(I=>se.jsxs(uc.Item,{children:[se.jsx(dD,{cover:Ml(),user:I}),se.jsx(Eu,{children:`${Zc(I.uid)}{${I.uid}}`})]},I.uid))]})]}),se.jsx(ka,{calling:e,cameraOn:m,micOn:p,setCalling:()=>r(I=>!I),setCamera:()=>{E(I=>!I)},setMic:()=>{v(I=>!I)}})]})},uQ=[{label:"useJoin",component:BFe},{label:"usePublish",component:zFe},{label:"useRemoteUsers",component:GFe},{label:"useConnectionState",component:NFe},{label:"useIsConnected",component:FFe},{label:"useCurrentUID",component:LFe},{label:"useAutoPlayAudioTrack",component:TFe},{label:"useAutoPlayVideoTrack",component:wFe},{label:"useNetworkQuality",component:WFe},{label:"useLocalScreenTrack",component:jFe},{label:"UseClientEvent",component:AFe}],kW=()=>{const[e,r]=S.useState(jt.channel),o=m=>{r(m.target.value)},[s,c]=TNe.useNotification(),d=m=>{s[m]({message:"Configuration Saved",description:"Go to other pages and try it now!"})},p=()=>{jt.channel=e,d("success")},v={wrapperCol:{span:14,offset:4}};return se.jsxs(ji,{children:[c,se.jsx("div",{className:"p-4",children:se.jsx(u9.Item,{label:"Channel Name",children:se.jsx(EOe,{onChange:o,style:{width:"200px"},value:e})})}),se.jsx(u9.Item,{...v,children:se.jsx(ho,{onClick:p,type:"primary",children:"Save configuration"})})]})},{Content:KFe,Sider:qFe}=qN,Jo=["Basic","Hooks","Components","Advanced","Setting"],YFe=[{label:Jo[0],key:Jo[0],children:cQ.map(e=>({key:`/${Jo[0]}/${e.label}`,label:e.label}))},{label:Jo[1],key:Jo[1],children:uQ.map(e=>({key:`/${Jo[1]}/${e.label}`,label:e.label}))},{label:Jo[2],key:Jo[2],children:lQ.map(e=>({key:`/${Jo[2]}/${e.label}`,label:e.label}))},{label:Jo[3],key:Jo[3],children:sQ.map(e=>({key:`/${Jo[3]}/${e.label}`,label:e.label}))},{label:"settings",key:"/setting"}];function XFe(){const[e,r]=S.useState(!1),[o,s]=S.useState([window.location.hash.slice(1).split("/")[1]]),c=p=>{const v=p.find(m=>o.indexOf(m)===-1);v&&Jo.indexOf(v)===-1?s(p):s(v?[v]:[])},d=hge();return se.jsx(se.Fragment,{children:se.jsxs(qN,{children:[se.jsx(qFe,{collapsed:e,collapsible:!0,onCollapse:p=>r(p),style:{overflow:"auto",height:"100vh",position:"fixed",left:0,top:0,bottom:0},children:se.jsx(zIe,{items:YFe,mode:"inline",onClick:p=>{d(p.key)},onOpenChange:c,openKeys:o,selectedKeys:[window.location.hash.slice(1)],theme:"dark"})}),se.jsx(qN,{style:{marginLeft:e?80:200},children:se.jsxs(KFe,{children:[se.jsxs(Age,{children:[se.jsx(Nh,{Component:()=>se.jsx(kW,{}),path:"/*"}),se.jsx(Nh,{Component:()=>se.jsx(kW,{}),path:"/setting"}),cQ.map(({label:p,component:v})=>{const m=v;return se.jsx(Nh,{Component:()=>se.jsx(uy,{children:se.jsx(m,{})}),path:`/${Jo[0]}/${p}`},p)}),uQ.map(({label:p,component:v})=>{const m=v;return se.jsx(Nh,{Component:()=>se.jsx(uy,{children:se.jsx(m,{})}),path:`/${Jo[1]}/${p}`},p)}),lQ.map(({label:p,component:v})=>{const m=v;return se.jsx(Nh,{Component:()=>se.jsx(uy,{children:se.jsx(m,{})}),path:`/${Jo[2]}/${p}`},p)}),sQ.map(({label:p,component:v})=>{const m=v;return se.jsx(Nh,{Component:()=>se.jsx(uy,{children:se.jsx(m,{})}),path:`/${Jo[3]}/${p}`},p)})]}),se.jsx("a",{"aria-label":"View source on GitHub",className:"github-corner",href:"https://github.com/AgoraIO-Extensions/agora-rtc-react",rel:"noreferrer",target:"_blank",children:se.jsxs("svg",{"aria-hidden":"true",className:"github-corner-svg",height:"80",viewBox:"0 0 250 250",width:"80",children:[se.jsx("path",{d:"M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"}),se.jsx("path",{className:"github-corner-svg-arm",d:"M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2",fill:"currentColor"}),se.jsx("path",{className:"github-corner-svg-body",d:"M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z",fill:"currentColor"})]})})]})})]})})}du.setLogLevel(0);nx.createRoot(document.getElementById("root")).render(se.jsx(S.StrictMode,{children:se.jsx(Nge,{children:se.jsx(XFe,{})})}));
