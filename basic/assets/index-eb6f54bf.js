var hQ=Object.defineProperty;var fQ=(e,t,n)=>t in e?hQ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ov=(e,t,n)=>(fQ(e,typeof t!="symbol"?t+"":t,n),n);function M8(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var Ht=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function jd(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function pQ(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var F8={exports:{}},py={},U8={exports:{}},fn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sg=Symbol.for("react.element"),mQ=Symbol.for("react.portal"),gQ=Symbol.for("react.fragment"),vQ=Symbol.for("react.strict_mode"),EQ=Symbol.for("react.profiler"),_Q=Symbol.for("react.provider"),SQ=Symbol.for("react.context"),yQ=Symbol.for("react.forward_ref"),CQ=Symbol.for("react.suspense"),bQ=Symbol.for("react.memo"),TQ=Symbol.for("react.lazy"),r2=Symbol.iterator;function RQ(e){return e===null||typeof e!="object"?null:(e=r2&&e[r2]||e["@@iterator"],typeof e=="function"?e:null)}var B8={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$8=Object.assign,V8={};function ip(e,t,n){this.props=e,this.context=t,this.refs=V8,this.updater=n||B8}ip.prototype.isReactComponent={};ip.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ip.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function j8(){}j8.prototype=ip.prototype;function px(e,t,n){this.props=e,this.context=t,this.refs=V8,this.updater=n||B8}var mx=px.prototype=new j8;mx.constructor=px;$8(mx,ip.prototype);mx.isPureReactComponent=!0;var i2=Array.isArray,H8=Object.prototype.hasOwnProperty,gx={current:null},z8={key:!0,ref:!0,__self:!0,__source:!0};function W8(e,t,n){var r,i={},o=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(o=""+t.key),t)H8.call(t,r)&&!z8.hasOwnProperty(r)&&(i[r]=t[r]);var s=arguments.length-2;if(s===1)i.children=n;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];i.children=c}if(e&&e.defaultProps)for(r in s=e.defaultProps,s)i[r]===void 0&&(i[r]=s[r]);return{$$typeof:Sg,type:e,key:o,ref:a,props:i,_owner:gx.current}}function wQ(e,t){return{$$typeof:Sg,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function vx(e){return typeof e=="object"&&e!==null&&e.$$typeof===Sg}function IQ(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var o2=/\/+/g;function bb(e,t){return typeof e=="object"&&e!==null&&e.key!=null?IQ(""+e.key):t.toString(36)}function HE(e,t,n,r,i){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Sg:case mQ:a=!0}}if(a)return a=e,i=i(a),e=r===""?"."+bb(a,0):r,i2(i)?(n="",e!=null&&(n=e.replace(o2,"$&/")+"/"),HE(i,t,n,"",function(l){return l})):i!=null&&(vx(i)&&(i=wQ(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(o2,"$&/")+"/")+e)),t.push(i)),1;if(a=0,r=r===""?".":r+":",i2(e))for(var s=0;s<e.length;s++){o=e[s];var c=r+bb(o,s);a+=HE(o,t,n,c,i)}else if(c=RQ(e),typeof c=="function")for(e=c.call(e),s=0;!(o=e.next()).done;)o=o.value,c=r+bb(o,s++),a+=HE(o,t,n,c,i);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function av(e,t,n){if(e==null)return e;var r=[],i=0;return HE(e,r,"","",function(o){return t.call(n,o,i++)}),r}function AQ(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Do={current:null},zE={transition:null},OQ={ReactCurrentDispatcher:Do,ReactCurrentBatchConfig:zE,ReactCurrentOwner:gx};function G8(){throw Error("act(...) is not supported in production builds of React.")}fn.Children={map:av,forEach:function(e,t,n){av(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return av(e,function(){t++}),t},toArray:function(e){return av(e,function(t){return t})||[]},only:function(e){if(!vx(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};fn.Component=ip;fn.Fragment=gQ;fn.Profiler=EQ;fn.PureComponent=px;fn.StrictMode=vQ;fn.Suspense=CQ;fn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=OQ;fn.act=G8;fn.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=$8({},e.props),i=e.key,o=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,a=gx.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)H8.call(t,c)&&!z8.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&s!==void 0?s[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];r.children=s}return{$$typeof:Sg,type:e.type,key:i,ref:o,props:r,_owner:a}};fn.createContext=function(e){return e={$$typeof:SQ,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:_Q,_context:e},e.Consumer=e};fn.createElement=W8;fn.createFactory=function(e){var t=W8.bind(null,e);return t.type=e,t};fn.createRef=function(){return{current:null}};fn.forwardRef=function(e){return{$$typeof:yQ,render:e}};fn.isValidElement=vx;fn.lazy=function(e){return{$$typeof:TQ,_payload:{_status:-1,_result:e},_init:AQ}};fn.memo=function(e,t){return{$$typeof:bQ,type:e,compare:t===void 0?null:t}};fn.startTransition=function(e){var t=zE.transition;zE.transition={};try{e()}finally{zE.transition=t}};fn.unstable_act=G8;fn.useCallback=function(e,t){return Do.current.useCallback(e,t)};fn.useContext=function(e){return Do.current.useContext(e)};fn.useDebugValue=function(){};fn.useDeferredValue=function(e){return Do.current.useDeferredValue(e)};fn.useEffect=function(e,t){return Do.current.useEffect(e,t)};fn.useId=function(){return Do.current.useId()};fn.useImperativeHandle=function(e,t,n){return Do.current.useImperativeHandle(e,t,n)};fn.useInsertionEffect=function(e,t){return Do.current.useInsertionEffect(e,t)};fn.useLayoutEffect=function(e,t){return Do.current.useLayoutEffect(e,t)};fn.useMemo=function(e,t){return Do.current.useMemo(e,t)};fn.useReducer=function(e,t,n){return Do.current.useReducer(e,t,n)};fn.useRef=function(e){return Do.current.useRef(e)};fn.useState=function(e){return Do.current.useState(e)};fn.useSyncExternalStore=function(e,t,n){return Do.current.useSyncExternalStore(e,t,n)};fn.useTransition=function(){return Do.current.useTransition()};fn.version="18.3.1";U8.exports=fn;var v=U8.exports;const le=jd(v),Rd=M8({__proto__:null,default:le},[v]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xQ=v,NQ=Symbol.for("react.element"),PQ=Symbol.for("react.fragment"),DQ=Object.prototype.hasOwnProperty,LQ=xQ.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,kQ={key:!0,ref:!0,__self:!0,__source:!0};function K8(e,t,n){var r,i={},o=null,a=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)DQ.call(t,r)&&!kQ.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:NQ,type:e,key:o,ref:a,props:i,_owner:LQ.current}}py.Fragment=PQ;py.jsx=K8;py.jsxs=K8;F8.exports=py;var G=F8.exports;function MQ(e,t){return t.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(r){if(r!=="default"&&!(r in e)){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(e,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}})}),Object.freeze(e)}var mf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Kn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var hr=function(e){try{return!!e()}catch{return!0}},my=!hr(function(){var e=(function(){}).bind();return typeof e!="function"||e.hasOwnProperty("prototype")}),q8=my,Y8=Function.prototype,tI=Y8.call,FQ=q8&&Y8.bind.bind(tI,tI),cr=q8?FQ:function(e){return function(){return tI.apply(e,arguments)}},Fi=cr({}.isPrototypeOf),sv=function(e){return e&&e.Math==Math&&e},Yr=sv(typeof globalThis=="object"&&globalThis)||sv(typeof window=="object"&&window)||sv(typeof self=="object"&&self)||sv(typeof mf=="object"&&mf)||function(){return this}()||mf||Function("return this")(),UQ=my,X8=Function.prototype,a2=X8.apply,s2=X8.call,Ex=typeof Reflect=="object"&&Reflect.apply||(UQ?s2.bind(a2):function(){return s2.apply(a2,arguments)}),J8=cr,BQ=J8({}.toString),$Q=J8("".slice),Nc=function(e){return $Q(BQ(e),8,-1)},VQ=Nc,jQ=cr,p0=function(e){if(VQ(e)==="Function")return jQ(e)},Tb=typeof document=="object"&&document.all,gy={all:Tb,IS_HTMLDDA:Tb===void 0&&Tb!==void 0},HQ=gy.all,Xr=gy.IS_HTMLDDA?function(e){return typeof e=="function"||e===HQ}:function(e){return typeof e=="function"},yg={},Ta=!hr(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7}),zQ=my,cv=Function.prototype.call,Jr=zQ?cv.bind(cv):function(){return cv.apply(cv,arguments)},vy={},Q8={}.propertyIsEnumerable,Z8=Object.getOwnPropertyDescriptor,WQ=Z8&&!Q8.call({1:2},1);vy.f=WQ?function(e){var t=Z8(this,e);return!!t&&t.enumerable}:Q8;var Tl,WE,bu=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},GQ=hr,KQ=Nc,Rb=Object,qQ=cr("".split),Ey=GQ(function(){return!Rb("z").propertyIsEnumerable(0)})?function(e){return KQ(e)=="String"?qQ(e,""):Rb(e)}:Rb,op=function(e){return e==null},YQ=op,XQ=TypeError,ap=function(e){if(YQ(e))throw XQ("Can't call method on "+e);return e},JQ=Ey,QQ=ap,Tu=function(e){return JQ(QQ(e))},c2=Xr,ZQ=gy.all,na=gy.IS_HTMLDDA?function(e){return typeof e=="object"?e!==null:c2(e)||e===ZQ}:function(e){return typeof e=="object"?e!==null:c2(e)},Ks={},wb=Ks,Ib=Yr,eZ=Xr,l2=function(e){return eZ(e)?e:void 0},Lo=function(e,t){return arguments.length<2?l2(wb[e])||l2(Ib[e]):wb[e]&&wb[e][t]||Ib[e]&&Ib[e][t]},Hd=typeof navigator<"u"&&String(navigator.userAgent)||"",ej=Yr,Ab=Hd,u2=ej.process,d2=ej.Deno,h2=u2&&u2.versions||d2&&d2.version,f2=h2&&h2.v8;f2&&(WE=(Tl=f2.split("."))[0]>0&&Tl[0]<4?1:+(Tl[0]+Tl[1])),!WE&&Ab&&(!(Tl=Ab.match(/Edge\/(\d+)/))||Tl[1]>=74)&&(Tl=Ab.match(/Chrome\/(\d+)/))&&(WE=+Tl[1]);var wd=WE,p2=wd,tZ=hr,nZ=Yr.String,sp=!!Object.getOwnPropertySymbols&&!tZ(function(){var e=Symbol();return!nZ(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&p2&&p2<41}),tj=sp&&!Symbol.sham&&typeof Symbol.iterator=="symbol",rZ=Lo,iZ=Xr,oZ=Fi,aZ=Object,Cg=tj?function(e){return typeof e=="symbol"}:function(e){var t=rZ("Symbol");return iZ(t)&&oZ(t.prototype,aZ(e))},sZ=String,cp=function(e){try{return sZ(e)}catch{return"Object"}},cZ=Xr,lZ=cp,uZ=TypeError,us=function(e){if(cZ(e))return e;throw uZ(lZ(e)+" is not a function")},dZ=us,hZ=op,_y=function(e,t){var n=e[t];return hZ(n)?void 0:dZ(n)},Ob=Jr,xb=Xr,Nb=na,fZ=TypeError,nj={exports:{}},m2=Yr,pZ=Object.defineProperty,mZ=function(e,t){try{pZ(m2,e,{value:t,configurable:!0,writable:!0})}catch{m2[e]=t}return t},g2="__core-js_shared__",_x=Yr[g2]||mZ(g2,{}),v2=_x;(nj.exports=function(e,t){return v2[e]||(v2[e]=t!==void 0?t:{})})("versions",[]).push({version:"3.31.1",mode:"pure",copyright:"© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.31.1/LICENSE",source:"https://github.com/zloirock/core-js"});var lp=nj.exports,gZ=ap,vZ=Object,Pc=function(e){return vZ(gZ(e))},EZ=Pc,_Z=cr({}.hasOwnProperty),oi=Object.hasOwn||function(e,t){return _Z(EZ(e),t)},SZ=cr,yZ=0,CZ=Math.random(),bZ=SZ(1 .toString),Sx=function(e){return"Symbol("+(e===void 0?"":e)+")_"+bZ(++yZ+CZ,36)},TZ=lp,E2=oi,RZ=Sx,wZ=sp,IZ=tj,jh=Yr.Symbol,Pb=TZ("wks"),AZ=IZ?jh.for||jh:jh&&jh.withoutSetter||RZ,Zn=function(e){return E2(Pb,e)||(Pb[e]=wZ&&E2(jh,e)?jh[e]:AZ("Symbol."+e)),Pb[e]},OZ=Jr,_2=na,S2=Cg,xZ=_y,NZ=function(e,t){var n,r;if(t==="string"&&xb(n=e.toString)&&!Nb(r=Ob(n,e))||xb(n=e.valueOf)&&!Nb(r=Ob(n,e))||t!=="string"&&xb(n=e.toString)&&!Nb(r=Ob(n,e)))return r;throw fZ("Can't convert object to primitive value")},PZ=TypeError,DZ=Zn("toPrimitive"),LZ=function(e,t){if(!_2(e)||S2(e))return e;var n,r=xZ(e,DZ);if(r){if(t===void 0&&(t="default"),n=OZ(r,e,t),!_2(n)||S2(n))return n;throw PZ("Can't convert object to primitive value")}return t===void 0&&(t="number"),NZ(e,t)},kZ=Cg,Sy=function(e){var t=LZ(e,"string");return kZ(t)?t:t+""},y2=na,nI=Yr.document,MZ=y2(nI)&&y2(nI.createElement),yx=function(e){return MZ?nI.createElement(e):{}},FZ=yx,rj=!Ta&&!hr(function(){return Object.defineProperty(FZ("div"),"a",{get:function(){return 7}}).a!=7}),UZ=Ta,BZ=Jr,$Z=vy,VZ=bu,jZ=Tu,HZ=Sy,zZ=oi,WZ=rj,C2=Object.getOwnPropertyDescriptor;yg.f=UZ?C2:function(e,t){if(e=jZ(e),t=HZ(t),WZ)try{return C2(e,t)}catch{}if(zZ(e,t))return VZ(!BZ($Z.f,e,t),e[t])};var GZ=hr,KZ=Xr,qZ=/#|\.prototype\./,bg=function(e,t){var n=XZ[YZ(e)];return n==QZ||n!=JZ&&(KZ(t)?GZ(t):!!t)},YZ=bg.normalize=function(e){return String(e).replace(qZ,".").toLowerCase()},XZ=bg.data={},JZ=bg.NATIVE="N",QZ=bg.POLYFILL="P",ij=bg,ZZ=us,eee=my,tee=p0(p0.bind),Ru=function(e,t){return ZZ(e),t===void 0?e:eee?tee(e,t):function(){return e.apply(t,arguments)}},ds={},oj=Ta&&hr(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42}),nee=na,ree=String,iee=TypeError,_o=function(e){if(nee(e))return e;throw iee(ree(e)+" is not an object")},oee=Ta,aee=rj,see=oj,lv=_o,b2=Sy,cee=TypeError,Db=Object.defineProperty,lee=Object.getOwnPropertyDescriptor,Lb="enumerable",kb="configurable",Mb="writable";ds.f=oee?see?function(e,t,n){if(lv(e),t=b2(t),lv(n),typeof e=="function"&&t==="prototype"&&"value"in n&&Mb in n&&!n[Mb]){var r=lee(e,t);r&&r[Mb]&&(e[t]=n.value,n={configurable:kb in n?n[kb]:r[kb],enumerable:Lb in n?n[Lb]:r[Lb],writable:!1})}return Db(e,t,n)}:Db:function(e,t,n){if(lv(e),t=b2(t),lv(n),aee)try{return Db(e,t,n)}catch{}if("get"in n||"set"in n)throw cee("Accessors not supported");return"value"in n&&(e[t]=n.value),e};var uee=ds,dee=bu,wu=Ta?function(e,t,n){return uee.f(e,t,dee(1,n))}:function(e,t,n){return e[t]=n,e},uv=Yr,hee=Ex,fee=p0,pee=Xr,mee=yg.f,gee=ij,ch=Ks,vee=Ru,lh=wu,T2=oi,Eee=function(e){var t=function(n,r,i){if(this instanceof t){switch(arguments.length){case 0:return new e;case 1:return new e(n);case 2:return new e(n,r)}return new e(n,r,i)}return hee(e,this,arguments)};return t.prototype=e.prototype,t},ln=function(e,t){var n,r,i,o,a,s,c,l,u,d=e.target,h=e.global,f=e.stat,g=e.proto,p=h?uv:f?uv[d]:(uv[d]||{}).prototype,m=h?ch:ch[d]||lh(ch,d,{})[d],_=m.prototype;for(o in t)r=!(n=gee(h?o:d+(f?".":"#")+o,e.forced))&&p&&T2(p,o),s=m[o],r&&(c=e.dontCallGetSet?(u=mee(p,o))&&u.value:p[o]),a=r&&c?c:t[o],r&&typeof s==typeof a||(l=e.bind&&r?vee(a,uv):e.wrap&&r?Eee(a):g&&pee(a)?fee(a):a,(e.sham||a&&a.sham||s&&s.sham)&&lh(l,"sham",!0),lh(m,o,l),g&&(T2(ch,i=d+"Prototype")||lh(ch,i,{}),lh(ch[i],o,a),e.real&&_&&(n||!_[o])&&lh(_,o,a)))},_ee=Math.ceil,See=Math.floor,yee=Math.trunc||function(e){var t=+e;return(t>0?See:_ee)(t)},Cee=yee,Cx=function(e){var t=+e;return t!=t||t===0?0:Cee(t)},bee=Cx,Tee=Math.max,Ree=Math.min,bx=function(e,t){var n=bee(e);return n<0?Tee(n+t,0):Ree(n,t)},wee=Cx,Iee=Math.min,aj=function(e){return e>0?Iee(wee(e),9007199254740991):0},Aee=aj,vl=function(e){return Aee(e.length)},Oee=Tu,xee=bx,Nee=vl,R2=function(e){return function(t,n,r){var i,o=Oee(t),a=Nee(o),s=xee(r,a);if(e&&n!=n){for(;a>s;)if((i=o[s++])!=i)return!0}else for(;a>s;s++)if((e||s in o)&&o[s]===n)return e||s||0;return!e&&-1}},Tx={includes:R2(!0),indexOf:R2(!1)},Pee=Tx.includes;ln({target:"Array",proto:!0,forced:hr(function(){return!Array(1).includes()})},{includes:function(e){return Pee(this,e,arguments.length>1?arguments[1]:void 0)}});var Dee=Ks,hs=function(e){return Dee[e+"Prototype"]},Lee=hs("Array").includes,kee=na,Mee=Nc,Fee=Zn("match"),sj=function(e){var t;return kee(e)&&((t=e[Fee])!==void 0?!!t:Mee(e)=="RegExp")},Uee=sj,Bee=TypeError,cj={};cj[Zn("toStringTag")]="z";var Rx=String(cj)==="[object z]",$ee=Rx,Vee=Xr,GE=Nc,jee=Zn("toStringTag"),Hee=Object,zee=GE(function(){return arguments}())=="Arguments",Dc=$ee?GE:function(e){var t,n,r;return e===void 0?"Undefined":e===null?"Null":typeof(n=function(i,o){try{return i[o]}catch{}}(t=Hee(e),jee))=="string"?n:zee?GE(t):(r=GE(t))=="Object"&&Vee(t.callee)?"Arguments":r},Wee=Dc,Gee=String,Ra=function(e){if(Wee(e)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return Gee(e)},Kee=Zn("match"),qee=ln,Yee=function(e){if(Uee(e))throw Bee("The method doesn't accept regular expressions");return e},Xee=ap,w2=Ra,Jee=function(e){var t=/./;try{"/./"[e](t)}catch{try{return t[Kee]=!1,"/./"[e](t)}catch{}}return!1},Qee=cr("".indexOf);qee({target:"String",proto:!0,forced:!Jee("includes")},{includes:function(e){return!!~Qee(w2(Xee(this)),w2(Yee(e)),arguments.length>1?arguments[1]:void 0)}});var Zee=hs("String").includes,I2=Fi,ete=Lee,tte=Zee,Fb=Array.prototype,Ub=String.prototype,nte=function(e){var t=e.includes;return e===Fb||I2(Fb,e)&&t===Fb.includes?ete:typeof e=="string"||e===Ub||I2(Ub,e)&&t===Ub.includes?tte:t},Ce=Kn(nte),rte=us,ite=Pc,ote=Ey,ate=vl,ste=TypeError,A2=function(e){return function(t,n,r,i){rte(n);var o=ite(t),a=ote(o),s=ate(o),c=e?s-1:0,l=e?-1:1;if(r<2)for(;;){if(c in a){i=a[c],c+=l;break}if(c+=l,e?c<0:s<=c)throw ste("Reduce of empty array with no initial value")}for(;e?c>=0:s>c;c+=l)c in a&&(i=n(i,a[c],c,o));return i}},cte={left:A2(!1),right:A2(!0)},lte=hr,yy=function(e,t){var n=[][e];return!!n&&lte(function(){n.call(null,t||function(){return 1},1)})},Tg=typeof process<"u"&&Nc(process)=="process",ute=cte.left;ln({target:"Array",proto:!0,forced:!Tg&&wd>79&&wd<83||!yy("reduce")},{reduce:function(e){var t=arguments.length;return ute(this,e,t,t>1?arguments[1]:void 0)}});var dte=hs("Array").reduce,hte=Fi,fte=dte,Bb=Array.prototype,pte=function(e){var t=e.reduce;return e===Bb||hte(Bb,e)&&t===Bb.reduce?fte:t},lj=pte,js=Kn(lj);let uj=!0,dj=!0;function dv(e,t,n){const r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)}function zd(e,t,n){if(!e.RTCPeerConnection)return;const r=e.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(a,s){if(a!==t)return i.apply(this,arguments);const c=l=>{const u=n(l);u&&(s.handleEvent?s.handleEvent(u):s(u))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(s,c),i.apply(this,[a,c])};const o=r.removeEventListener;r.removeEventListener=function(a,s){if(a!==t||!this._eventMap||!this._eventMap[t])return o.apply(this,arguments);if(!this._eventMap[t].has(s))return o.apply(this,arguments);const c=this._eventMap[t].get(s);return this._eventMap[t].delete(s),this._eventMap[t].size===0&&delete this._eventMap[t],Object.keys(this._eventMap).length===0&&delete this._eventMap,o.apply(this,[a,c])},Object.defineProperty(r,"on"+t,{get(){return this["_on"+t]},set(a){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),a&&this.addEventListener(t,this["_on"+t]=a)},enumerable:!0,configurable:!0})}function mte(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(uj=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function gte(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(dj=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function hj(){if(typeof window=="object"){if(uj)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function wx(e,t){dj&&console.warn(e+" is deprecated, please use "+t+" instead.")}function O2(e){return Object.prototype.toString.call(e)==="[object Object]"}function fj(e){var t;return O2(e)?js(t=Object.keys(e)).call(t,function(n,r){const i=O2(e[r]),o=i?fj(e[r]):e[r],a=i&&!Object.keys(o).length;return o===void 0||a?n:Object.assign(n,{[r]:o})},{}):e}function rI(e,t,n){t&&!n.has(t.id)&&(n.set(t.id,t),Object.keys(t).forEach(r=>{r.endsWith("Id")?rI(e,e.get(t[r]),n):r.endsWith("Ids")&&t[r].forEach(i=>{rI(e,e.get(i),n)})}))}function x2(e,t,n){const r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(t===null)return i;const o=[];return e.forEach(a=>{a.type==="track"&&a.trackIdentifier===t.id&&o.push(a)}),o.forEach(a=>{e.forEach(s=>{s.type===r&&s.trackId===a.id&&rI(e,s,i)})}),i}var vte=Sx,N2=lp("keys"),Cy=function(e){return N2[e]||(N2[e]=vte(e))},Ete=!hr(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),_te=oi,Ste=Xr,yte=Pc,Cte=Ete,P2=Cy("IE_PROTO"),iI=Object,bte=iI.prototype,Ix=Cte?iI.getPrototypeOf:function(e){var t=yte(e);if(_te(t,P2))return t[P2];var n=t.constructor;return Ste(n)&&t instanceof n?n.prototype:t instanceof iI?bte:null},Tte=cr,Rte=us,wte=Xr,Ite=String,Ate=TypeError,Ote=function(e,t,n){try{return Tte(Rte(Object.getOwnPropertyDescriptor(e,t)[n]))}catch{}},xte=_o,Nte=function(e){if(typeof e=="object"||wte(e))return e;throw Ate("Can't set "+Ite(e)+" as a prototype")},Pte=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Ote(Object.prototype,"__proto__","set"))(n,[]),t=n instanceof Array}catch{}return function(r,i){return xte(r),Nte(i),t?e(r,i):r.__proto__=i,r}}():void 0),by={},Ty={},$b=oi,Dte=Tu,Lte=Tx.indexOf,kte=Ty,D2=cr([].push),pj=function(e,t){var n,r=Dte(e),i=0,o=[];for(n in r)!$b(kte,n)&&$b(r,n)&&D2(o,n);for(;t.length>i;)$b(r,n=t[i++])&&(~Lte(o,n)||D2(o,n));return o},Ax=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Mte=pj,Fte=Ax.concat("length","prototype");by.f=Object.getOwnPropertyNames||function(e){return Mte(e,Fte)};var Rg={};Rg.f=Object.getOwnPropertySymbols;var Ute=Lo,Bte=by,$te=Rg,Vte=_o,jte=cr([].concat),Hte=Ute("Reflect","ownKeys")||function(e){var t=Bte.f(Vte(e)),n=$te.f;return n?jte(t,n(e)):t},L2=oi,zte=Hte,Wte=yg,Gte=ds,Ox={},Kte=pj,qte=Ax,Ry=Object.keys||function(e){return Kte(e,qte)},Yte=Ta,Xte=oj,Jte=ds,Qte=_o,Zte=Tu,ene=Ry;Ox.f=Yte&&!Xte?Object.defineProperties:function(e,t){Qte(e);for(var n,r=Zte(t),i=ene(t),o=i.length,a=0;o>a;)Jte.f(e,n=i[a++],r[n]);return e};var hv,mj=Lo("document","documentElement"),tne=_o,nne=Ox,k2=Ax,rne=Ty,ine=mj,one=yx,oI="prototype",aI="script",gj=Cy("IE_PROTO"),Vb=function(){},vj=function(e){return"<"+aI+">"+e+"</"+aI+">"},M2=function(e){e.write(vj("")),e.close();var t=e.parentWindow.Object;return e=null,t},KE=function(){try{hv=new ActiveXObject("htmlfile")}catch{}var e,t,n;KE=typeof document<"u"?document.domain&&hv?M2(hv):(t=one("iframe"),n="java"+aI+":",t.style.display="none",ine.appendChild(t),t.src=String(n),(e=t.contentWindow.document).open(),e.write(vj("document.F=Object")),e.close(),e.F):M2(hv);for(var r=k2.length;r--;)delete KE[oI][k2[r]];return KE()};rne[gj]=!0;var wg=Object.create||function(e,t){var n;return e!==null?(Vb[oI]=tne(e),n=new Vb,Vb[oI]=null,n[gj]=e):n=KE(),t===void 0?n:nne.f(n,t)},ane=na,sne=wu,Ej=Error,cne=cr("".replace),lne=String(Ej("zxcasd").stack),_j=/\n\s*at [^:]*:[^\n]*/,une=_j.test(lne),dne=bu,hne=!hr(function(){var e=Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",dne(1,7)),e.stack!==7)}),fne=wu,pne=function(e,t){if(une&&typeof e=="string"&&!Ej.prepareStackTrace)for(;t--;)e=cne(e,_j,"");return e},mne=hne,F2=Error.captureStackTrace,Wd={},gne=Wd,vne=Zn("iterator"),Ene=Array.prototype,Sj=function(e){return e!==void 0&&(gne.Array===e||Ene[vne]===e)},_ne=Dc,U2=_y,Sne=op,yne=Wd,Cne=Zn("iterator"),wy=function(e){if(!Sne(e))return U2(e,Cne)||U2(e,"@@iterator")||yne[_ne(e)]},bne=Jr,Tne=us,Rne=_o,wne=cp,Ine=wy,Ane=TypeError,xx=function(e,t){var n=arguments.length<2?Ine(e):t;if(Tne(n))return Rne(bne(n,e));throw Ane(wne(e)+" is not iterable")},One=Jr,B2=_o,xne=_y,yj=function(e,t,n){var r,i;B2(e);try{if(!(r=xne(e,"return"))){if(t==="throw")throw n;return n}r=One(r,e)}catch(o){i=!0,r=o}if(t==="throw")throw n;if(i)throw r;return B2(r),n},Nne=Ru,Pne=Jr,Dne=_o,Lne=cp,kne=Sj,Mne=vl,$2=Fi,Fne=xx,Une=wy,V2=yj,Bne=TypeError,qE=function(e,t){this.stopped=e,this.result=t},j2=qE.prototype,Ig=function(e,t,n){var r,i,o,a,s,c,l,u=n&&n.that,d=!(!n||!n.AS_ENTRIES),h=!(!n||!n.IS_RECORD),f=!(!n||!n.IS_ITERATOR),g=!(!n||!n.INTERRUPTED),p=Nne(t,u),m=function(E){return r&&V2(r,"normal",E),new qE(!0,E)},_=function(E){return d?(Dne(E),g?p(E[0],E[1],m):p(E[0],E[1])):g?p(E,m):p(E)};if(h)r=e.iterator;else if(f)r=e;else{if(!(i=Une(e)))throw Bne(Lne(e)+" is not iterable");if(kne(i)){for(o=0,a=Mne(e);a>o;o++)if((s=_(e[o]))&&$2(j2,s))return s;return new qE(!1)}r=Fne(e,i)}for(c=h?e.next:r.next;!(l=Pne(c,r)).done;){try{s=_(l.value)}catch(E){V2(r,"throw",E)}if(typeof s=="object"&&s&&$2(j2,s))return s}return new qE(!1)},$ne=Ra,Vne=ln,jne=Fi,Hne=Ix,H_=Pte,zne=function(e,t,n){for(var r=zte(t),i=Gte.f,o=Wte.f,a=0;a<r.length;a++){var s=r[a];L2(e,s)||n&&L2(n,s)||i(e,s,o(t,s))}},Cj=wg,jb=wu,Hb=bu,Wne=function(e,t){ane(t)&&"cause"in t&&sne(e,"cause",t.cause)},Gne=function(e,t,n,r){mne&&(F2?F2(e,t):fne(e,"stack",pne(n,r)))},Kne=Ig,qne=function(e,t){return e===void 0?arguments.length<2?"":t:$ne(e)},Yne=Zn("toStringTag"),z_=Error,Xne=[].push,Df=function(e,t){var n,r=jne(zb,this);H_?n=H_(z_(),r?Hne(this):zb):(n=r?this:Cj(zb),jb(n,Yne,"Error")),t!==void 0&&jb(n,"message",qne(t)),Gne(n,Df,n.stack,1),arguments.length>2&&Wne(n,arguments[2]);var i=[];return Kne(e,Xne,{that:i}),jb(n,"errors",i),n};H_?H_(Df,z_):zne(Df,z_,{name:!0});var zb=Df.prototype=Cj(z_.prototype,{constructor:Hb(1,Df),message:Hb(1,""),name:Hb(1,"AggregateError")});Vne({global:!0,constructor:!0,arity:2},{AggregateError:Df});var W_,Mm,G_,Jne=Xr,H2=Yr.WeakMap,Qne=Jne(H2)&&/native code/.test(String(H2)),bj=Yr,Zne=na,ere=wu,Wb=oi,Gb=_x,tre=Cy,nre=Ty,z2="Object already initialized",sI=bj.TypeError,rre=bj.WeakMap;if(Qne||Gb.state){var Qs=Gb.state||(Gb.state=new rre);Qs.get=Qs.get,Qs.has=Qs.has,Qs.set=Qs.set,W_=function(e,t){if(Qs.has(e))throw sI(z2);return t.facade=e,Qs.set(e,t),t},Mm=function(e){return Qs.get(e)||{}},G_=function(e){return Qs.has(e)}}else{var uh=tre("state");nre[uh]=!0,W_=function(e,t){if(Wb(e,uh))throw sI(z2);return t.facade=e,ere(e,uh,t),t},Mm=function(e){return Wb(e,uh)?e[uh]:{}},G_=function(e){return Wb(e,uh)}}var md,W2,G2,Gd={set:W_,get:Mm,has:G_,enforce:function(e){return G_(e)?Mm(e):W_(e,{})},getterFor:function(e){return function(t){var n;if(!Zne(t)||(n=Mm(t)).type!==e)throw sI("Incompatible receiver, "+e+" required");return n}}},cI=Ta,ire=oi,Tj=Function.prototype,ore=cI&&Object.getOwnPropertyDescriptor,Kb=ire(Tj,"name"),Rj={EXISTS:Kb,PROPER:Kb&&(function(){}).name==="something",CONFIGURABLE:Kb&&(!cI||cI&&ore(Tj,"name").configurable)},are=wu,Iu=function(e,t,n,r){return r&&r.enumerable?e[t]=n:are(e,t,n),e},sre=hr,cre=Xr,lre=na,ure=wg,K2=Ix,dre=Iu,lI=Zn("iterator"),wj=!1;[].keys&&("next"in(G2=[].keys())?(W2=K2(K2(G2)))!==Object.prototype&&(md=W2):wj=!0);var hre=!lre(md)||sre(function(){var e={};return md[lI].call(e)!==e});cre((md=hre?{}:ure(md))[lI])||dre(md,lI,function(){return this});var Ij={IteratorPrototype:md,BUGGY_SAFARI_ITERATORS:wj},fre=Dc,pre=Rx?{}.toString:function(){return"[object "+fre(this)+"]"},mre=Rx,gre=ds.f,vre=wu,Ere=oi,_re=pre,q2=Zn("toStringTag"),Au=function(e,t,n,r){if(e){var i=n?e:e.prototype;Ere(i,q2)||gre(i,q2,{configurable:!0,value:t}),r&&!mre&&vre(i,"toString",_re)}},Sre=Ij.IteratorPrototype,yre=wg,Cre=bu,bre=Au,Tre=Wd,Rre=function(){return this},Nx=function(e,t,n,r){var i=t+" Iterator";return e.prototype=yre(Sre,{next:Cre(+!r,n)}),bre(e,i,!1,!0),Tre[i]=Rre,e},wre=ln,Ire=Jr,Are=Rj,Ore=Nx,xre=Ix,Nre=Au,Y2=Iu,X2=Wd,Pre=Ij,Dre=Are.PROPER,fv=Pre.BUGGY_SAFARI_ITERATORS,qb=Zn("iterator"),J2="keys",pv="values",Q2="entries",Lre=function(){return this},Aj=function(e,t,n,r,i,o,a){Ore(n,t,r);var s,c,l,u=function(_){if(_===i&&p)return p;if(!fv&&_ in f)return f[_];switch(_){case J2:case pv:case Q2:return function(){return new n(this,_)}}return function(){return new n(this)}},d=t+" Iterator",h=!1,f=e.prototype,g=f[qb]||f["@@iterator"]||i&&f[i],p=!fv&&g||u(i),m=t=="Array"&&f.entries||g;if(m&&(s=xre(m.call(new e)))!==Object.prototype&&s.next&&(Nre(s,d,!0,!0),X2[d]=Lre),Dre&&i==pv&&g&&g.name!==pv&&(h=!0,p=function(){return Ire(g,this)}),i)if(c={values:u(pv),keys:o?p:u(J2),entries:u(Q2)},a)for(l in c)(fv||h||!(l in f))&&Y2(f,l,c[l]);else wre({target:t,proto:!0,forced:fv||h},c);return a&&f[qb]!==p&&Y2(f,qb,p,{name:i}),X2[t]=p,c},Px=function(e,t){return{value:e,done:t}},kre=Tu,Z2=Wd,Oj=Gd;ds.f;var Mre=Aj,eL=Px,xj="Array Iterator",Fre=Oj.set,Ure=Oj.getterFor(xj);Mre(Array,"Array",function(e,t){Fre(this,{type:xj,target:kre(e),index:0,kind:t})},function(){var e=Ure(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,eL(void 0,!0)):eL(n=="keys"?r:n=="values"?t[r]:[r,t[r]],!1)},"values"),Z2.Arguments=Z2.Array;var Bre=ds,Iy=function(e,t,n){return Bre.f(e,t,n)},$re=Lo,Vre=Iy,jre=Ta,tL=Zn("species"),Hre=Fi,zre=TypeError,Dx=function(e,t){if(Hre(t,e))return e;throw zre("Incorrect invocation")},Wre=Xr,uI=_x,Gre=cr(Function.toString);Wre(uI.inspectSource)||(uI.inspectSource=function(e){return Gre(e)});var Nj=uI.inspectSource,Kre=cr,qre=hr,Pj=Xr,Yre=Dc,Xre=Nj,Dj=function(){},Jre=[],Lj=Lo("Reflect","construct"),Lx=/^\s*(?:class|function)\b/,Qre=Kre(Lx.exec),Zre=!Lx.exec(Dj),Up=function(e){if(!Pj(e))return!1;try{return Lj(Dj,Jre,e),!0}catch{return!1}},kj=function(e){if(!Pj(e))return!1;switch(Yre(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Zre||!!Qre(Lx,Xre(e))}catch{return!0}};kj.sham=!0;var m0,dh,nL,Yb,Ay=!Lj||qre(function(){var e;return Up(Up.call)||!Up(Object)||!Up(function(){e=!0})||e})?kj:Up,eie=Ay,tie=cp,nie=TypeError,rL=_o,rie=function(e){if(eie(e))return e;throw nie(tie(e)+" is not a constructor")},iie=op,oie=Zn("species"),kx=function(e,t){var n,r=rL(e).constructor;return r===void 0||iie(n=rL(r)[oie])?t:rie(n)},Mx=cr([].slice),aie=TypeError,Oy=function(e,t){if(e<t)throw aie("Not enough arguments");return e},Mj=/(?:ipad|iphone|ipod).*applewebkit/i.test(Hd),ma=Yr,sie=Ex,cie=Ru,iL=Xr,lie=oi,Fj=hr,oL=mj,uie=Mx,aL=yx,die=Oy,hie=Mj,fie=Tg,dI=ma.setImmediate,hI=ma.clearImmediate,pie=ma.process,Xb=ma.Dispatch,mie=ma.Function,sL=ma.MessageChannel,gie=ma.String,Jb=0,Fm={},cL="onreadystatechange";Fj(function(){m0=ma.location});var Fx=function(e){if(lie(Fm,e)){var t=Fm[e];delete Fm[e],t()}},Qb=function(e){return function(){Fx(e)}},lL=function(e){Fx(e.data)},uL=function(e){ma.postMessage(gie(e),m0.protocol+"//"+m0.host)};dI&&hI||(dI=function(e){die(arguments.length,1);var t=iL(e)?e:mie(e),n=uie(arguments,1);return Fm[++Jb]=function(){sie(t,void 0,n)},dh(Jb),Jb},hI=function(e){delete Fm[e]},fie?dh=function(e){pie.nextTick(Qb(e))}:Xb&&Xb.now?dh=function(e){Xb.now(Qb(e))}:sL&&!hie?(Yb=(nL=new sL).port2,nL.port1.onmessage=lL,dh=cie(Yb.postMessage,Yb)):ma.addEventListener&&iL(ma.postMessage)&&!ma.importScripts&&m0&&m0.protocol!=="file:"&&!Fj(uL)?(dh=uL,ma.addEventListener("message",lL,!1)):dh=cL in aL("script")?function(e){oL.appendChild(aL("script"))[cL]=function(){oL.removeChild(this),Fx(e)}}:function(e){setTimeout(Qb(e),0)});var Uj={set:dI,clear:hI},Bj=function(){this.head=null,this.tail=null};Bj.prototype={add:function(e){var t={item:e,next:null},n=this.tail;n?n.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return(this.head=e.next)===null&&(this.tail=null),e.item}};var hh,Zb,e1,t1,dL,$j=Bj,vie=/ipad|iphone|ipod/i.test(Hd)&&typeof Pebble<"u",Eie=/web0s(?!.*chrome)/i.test(Hd),Id=Yr,hL=Ru,_ie=yg.f,n1=Uj.set,Sie=$j,yie=Mj,Cie=vie,bie=Eie,r1=Tg,fL=Id.MutationObserver||Id.WebKitMutationObserver,pL=Id.document,mL=Id.process,mv=Id.Promise,gL=_ie(Id,"queueMicrotask"),fI=gL&&gL.value;if(!fI){var gv=new Sie,vv=function(){var e,t;for(r1&&(e=mL.domain)&&e.exit();t=gv.get();)try{t()}catch(n){throw gv.head&&hh(),n}e&&e.enter()};yie||r1||bie||!fL||!pL?!Cie&&mv&&mv.resolve?((t1=mv.resolve(void 0)).constructor=mv,dL=hL(t1.then,t1),hh=function(){dL(vv)}):r1?hh=function(){mL.nextTick(vv)}:(n1=hL(n1,Id),hh=function(){n1(vv)}):(Zb=!0,e1=pL.createTextNode(""),new fL(vv).observe(e1,{characterData:!0}),hh=function(){e1.data=Zb=!Zb}),fI=function(e){gv.head||hh(),gv.add(e)}}var Tie=fI,up=function(e){try{return{error:!1,value:e()}}catch(t){return{error:!0,value:t}}},Ad=Yr.Promise,Vj=typeof Deno=="object"&&Deno&&typeof Deno.version=="object",Rie=!Vj&&!Tg&&typeof window=="object"&&typeof document=="object",wie=Yr,Um=Ad,Iie=Xr,Aie=ij,Oie=Nj,xie=Zn,Nie=Rie,Pie=Vj,i1=wd,vL=Um&&Um.prototype,Die=xie("species"),jj=!1,Hj=Iie(wie.PromiseRejectionEvent),Lie=Aie("Promise",function(){var e=Oie(Um),t=e!==String(Um);if(!t&&i1===66||!vL.catch||!vL.finally)return!0;if(!i1||i1<51||!/native code/.test(e)){var n=new Um(function(i){i(1)}),r=function(i){i(function(){},function(){})};if((n.constructor={})[Die]=r,!(jj=n.then(function(){})instanceof r))return!0}return!t&&(Nie||Pie)&&!Hj}),Ag={CONSTRUCTOR:Lie,REJECTION_EVENT:Hj,SUBCLASSING:jj},Lc={},EL=us,kie=TypeError,Mie=function(e){var t,n;this.promise=new e(function(r,i){if(t!==void 0||n!==void 0)throw kie("Bad Promise constructor");t=r,n=i}),this.resolve=EL(t),this.reject=EL(n)};Lc.f=function(e){return new Mie(e)};var o1,_L,Fie=ln,K_=Tg,Eu=Yr,Og=Jr,Uie=Iu,Bie=Au,$ie=function(e){var t=$re(e);jre&&t&&!t[tL]&&Vre(t,tL,{configurable:!0,get:function(){return this}})},Vie=us,pI=Xr,jie=na,Hie=Dx,zie=kx,zj=Uj.set,Ux=Tie,Wie=function(e,t){try{arguments.length==1?console.error(e):console.error(e,t)}catch{}},Gie=up,Kie=$j,Wj=Gd,mI=Ad,Gj=Ag,Kj=Lc,YE="Promise",SL=Gj.CONSTRUCTOR,qie=Gj.REJECTION_EVENT,a1=Wj.getterFor(YE),Yie=Wj.set,Xie=mI&&mI.prototype,Bp=mI,s1=Xie,qj=Eu.TypeError,gI=Eu.document,Bx=Eu.process,vI=Kj.f,Jie=vI,Qie=!!(gI&&gI.createEvent&&Eu.dispatchEvent),Yj="unhandledrejection",Xj=function(e){var t;return!(!jie(e)||!pI(t=e.then))&&t},Jj=function(e,t){var n,r,i,o=t.value,a=t.state==1,s=a?e.ok:e.fail,c=e.resolve,l=e.reject,u=e.domain;try{s?(a||(t.rejection===2&&eoe(t),t.rejection=1),s===!0?n=o:(u&&u.enter(),n=s(o),u&&(u.exit(),i=!0)),n===e.promise?l(qj("Promise-chain cycle")):(r=Xj(n))?Og(r,n,c,l):c(n)):l(o)}catch(d){u&&!i&&u.exit(),l(d)}},Qj=function(e,t){e.notified||(e.notified=!0,Ux(function(){for(var n,r=e.reactions;n=r.get();)Jj(n,e);e.notified=!1,t&&!e.rejection&&Zie(e)}))},Zj=function(e,t,n){var r,i;Qie?((r=gI.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),Eu.dispatchEvent(r)):r={promise:t,reason:n},!qie&&(i=Eu["on"+e])?i(r):e===Yj&&Wie("Unhandled promise rejection",n)},Zie=function(e){Og(zj,Eu,function(){var t,n=e.facade,r=e.value;if(yL(e)&&(t=Gie(function(){K_?Bx.emit("unhandledRejection",r,n):Zj(Yj,n,r)}),e.rejection=K_||yL(e)?2:1,t.error))throw t.value})},yL=function(e){return e.rejection!==1&&!e.parent},eoe=function(e){Og(zj,Eu,function(){var t=e.facade;K_?Bx.emit("rejectionHandled",t):Zj("rejectionhandled",t,e.value)})},Hh=function(e,t,n){return function(r){e(t,r,n)}},gf=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,Qj(e,!0))},EI=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw qj("Promise can't be resolved itself");var r=Xj(t);r?Ux(function(){var i={done:!1};try{Og(r,t,Hh(EI,i,e),Hh(gf,i,e))}catch(o){gf(i,o,e)}}):(e.value=t,e.state=1,Qj(e,!1))}catch(i){gf({done:!1},i,e)}}};SL&&(s1=(Bp=function(e){Hie(this,s1),Vie(e),Og(o1,this);var t=a1(this);try{e(Hh(EI,t),Hh(gf,t))}catch(n){gf(t,n)}}).prototype,(o1=function(e){Yie(this,{type:YE,done:!1,notified:!1,parent:!1,reactions:new Kie,rejection:!1,state:0,value:void 0})}).prototype=Uie(s1,"then",function(e,t){var n=a1(this),r=vI(zie(this,Bp));return n.parent=!0,r.ok=!pI(e)||e,r.fail=pI(t)&&t,r.domain=K_?Bx.domain:void 0,n.state==0?n.reactions.add(r):Ux(function(){Jj(r,n)}),r.promise}),_L=function(){var e=new o1,t=a1(e);this.promise=e,this.resolve=Hh(EI,t),this.reject=Hh(gf,t)},Kj.f=vI=function(e){return e===Bp||e===void 0?new _L(e):Jie(e)}),Fie({global:!0,constructor:!0,wrap:!0,forced:SL},{Promise:Bp}),Bie(Bp,YE,!1,!0),$ie(YE);var eH=Zn("iterator"),tH=!1;try{var toe=0,CL={next:function(){return{done:!!toe++}},return:function(){tH=!0}};CL[eH]=function(){return this},Array.from(CL,function(){throw 2})}catch{}var noe=Ad,roe=function(e,t){if(!t&&!tH)return!1;var n=!1;try{var r={};r[eH]=function(){return{next:function(){return{done:n=!0}}}},e(r)}catch{}return n},xy=Ag.CONSTRUCTOR||!roe(function(e){noe.all(e).then(void 0,function(){})}),ioe=Jr,ooe=us,aoe=Lc,soe=up,coe=Ig;ln({target:"Promise",stat:!0,forced:xy},{all:function(e){var t=this,n=aoe.f(t),r=n.resolve,i=n.reject,o=soe(function(){var a=ooe(t.resolve),s=[],c=0,l=1;coe(e,function(u){var d=c++,h=!1;l++,ioe(a,t,u).then(function(f){h||(h=!0,s[d]=f,--l||r(s))},i)}),--l||r(s)});return o.error&&i(o.value),n.promise}});var loe=ln,uoe=Ag.CONSTRUCTOR;Ad&&Ad.prototype,loe({target:"Promise",proto:!0,forced:uoe,real:!0},{catch:function(e){return this.then(void 0,e)}});var doe=Jr,hoe=us,foe=Lc,poe=up,moe=Ig;ln({target:"Promise",stat:!0,forced:xy},{race:function(e){var t=this,n=foe.f(t),r=n.reject,i=poe(function(){var o=hoe(t.resolve);moe(e,function(a){doe(o,t,a).then(n.resolve,r)})});return i.error&&r(i.value),n.promise}});var goe=Jr,voe=Lc;ln({target:"Promise",stat:!0,forced:Ag.CONSTRUCTOR},{reject:function(e){var t=voe.f(this);return goe(t.reject,void 0,e),t.promise}});var Eoe=_o,_oe=na,Soe=Lc,nH=function(e,t){if(Eoe(e),_oe(t)&&t.constructor===e)return t;var n=Soe.f(e);return(0,n.resolve)(t),n.promise},yoe=ln,Coe=Ad,boe=Ag.CONSTRUCTOR,Toe=nH,Roe=Lo("Promise"),woe=!boe;yoe({target:"Promise",stat:!0,forced:!0},{resolve:function(e){return Toe(woe&&this===Roe?Coe:this,e)}});var Ioe=Jr,Aoe=us,Ooe=Lc,xoe=up,Noe=Ig;ln({target:"Promise",stat:!0,forced:xy},{allSettled:function(e){var t=this,n=Ooe.f(t),r=n.resolve,i=n.reject,o=xoe(function(){var a=Aoe(t.resolve),s=[],c=0,l=1;Noe(e,function(u){var d=c++,h=!1;l++,Ioe(a,t,u).then(function(f){h||(h=!0,s[d]={status:"fulfilled",value:f},--l||r(s))},function(f){h||(h=!0,s[d]={status:"rejected",reason:f},--l||r(s))})}),--l||r(s)});return o.error&&i(o.value),n.promise}});var Poe=Jr,Doe=us,Loe=Lo,koe=Lc,Moe=up,Foe=Ig,bL="No one promise resolved";ln({target:"Promise",stat:!0,forced:xy},{any:function(e){var t=this,n=Loe("AggregateError"),r=koe.f(t),i=r.resolve,o=r.reject,a=Moe(function(){var s=Doe(t.resolve),c=[],l=0,u=1,d=!1;Foe(e,function(h){var f=l++,g=!1;u++,Poe(s,t,h).then(function(p){g||d||(d=!0,i(p))},function(p){g||d||(g=!0,c[f]=p,--u||o(new n(c,bL)))})}),--u||o(new n(c,bL))});return a.error&&o(a.value),r.promise}});var Uoe=ln,_I=Ad,Boe=hr,$oe=Lo,Voe=Xr,joe=kx,TL=nH,Hoe=_I&&_I.prototype;Uoe({target:"Promise",proto:!0,real:!0,forced:!!_I&&Boe(function(){Hoe.finally.call({then:function(){}},function(){})})},{finally:function(e){var t=joe(this,$oe("Promise")),n=Voe(e);return this.then(n?function(r){return TL(t,e()).then(function(){return r})}:e,n?function(r){return TL(t,e()).then(function(){throw r})}:e)}});var $x=cr,zoe=Cx,Woe=Ra,Goe=ap,Koe=$x("".charAt),RL=$x("".charCodeAt),qoe=$x("".slice),wL=function(e){return function(t,n){var r,i,o=Woe(Goe(t)),a=zoe(n),s=o.length;return a<0||a>=s?e?"":void 0:(r=RL(o,a))<55296||r>56319||a+1===s||(i=RL(o,a+1))<56320||i>57343?e?Koe(o,a):r:e?qoe(o,a,a+2):i-56320+(r-55296<<10)+65536}},Vx={codeAt:wL(!1),charAt:wL(!0)},Yoe=Vx.charAt,Xoe=Ra,rH=Gd,Joe=Aj,IL=Px,iH="String Iterator",Qoe=rH.set,Zoe=rH.getterFor(iH);Joe(String,"String",function(e){Qoe(this,{type:iH,string:Xoe(e),index:0})},function(){var e,t=Zoe(this),n=t.string,r=t.index;return r>=n.length?IL(void 0,!0):(e=Yoe(n,r),t.index+=e.length,IL(e,!1))});var eae=Ks.Promise,tae={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},nae=Yr,rae=Dc,iae=wu,AL=Wd,OL=Zn("toStringTag");for(var c1 in tae){var xL=nae[c1],l1=xL&&xL.prototype;l1&&rae(l1)!==OL&&iae(l1,OL,c1),AL[c1]=AL.Array}var oH=eae,_e=Kn(oH);const NL=hj;function aH(e,t){const n=e&&e.navigator;if(!n.mediaDevices)return;const r=function(a){if(typeof a!="object"||a.mandatory||a.optional)return a;const s={};return Object.keys(a).forEach(c=>{if(c==="require"||c==="advanced"||c==="mediaSource")return;const l=typeof a[c]=="object"?a[c]:{ideal:a[c]};l.exact!==void 0&&typeof l.exact=="number"&&(l.min=l.max=l.exact);const u=function(d,h){return d?d+h.charAt(0).toUpperCase()+h.slice(1):h==="deviceId"?"sourceId":h};if(l.ideal!==void 0){s.optional=s.optional||[];let d={};typeof l.ideal=="number"?(d[u("min",c)]=l.ideal,s.optional.push(d),d={},d[u("max",c)]=l.ideal,s.optional.push(d)):(d[u("",c)]=l.ideal,s.optional.push(d))}l.exact!==void 0&&typeof l.exact!="number"?(s.mandatory=s.mandatory||{},s.mandatory[u("",c)]=l.exact):["min","max"].forEach(d=>{l[d]!==void 0&&(s.mandatory=s.mandatory||{},s.mandatory[u(d,c)]=l[d])})}),a.advanced&&(s.optional=(s.optional||[]).concat(a.advanced)),s},i=function(a,s){if(t.version>=61)return s(a);if((a=JSON.parse(JSON.stringify(a)))&&typeof a.audio=="object"){const c=function(l,u,d){u in l&&!(d in l)&&(l[d]=l[u],delete l[u])};c((a=JSON.parse(JSON.stringify(a))).audio,"autoGainControl","googAutoGainControl"),c(a.audio,"noiseSuppression","googNoiseSuppression"),a.audio=r(a.audio)}if(a&&typeof a.video=="object"){let c=a.video.facingMode;c=c&&(typeof c=="object"?c:{ideal:c});const l=t.version<66;if(c&&(c.exact==="user"||c.exact==="environment"||c.ideal==="user"||c.ideal==="environment")&&(!n.mediaDevices.getSupportedConstraints||!n.mediaDevices.getSupportedConstraints().facingMode||l)){let u;if(delete a.video.facingMode,c.exact==="environment"||c.ideal==="environment"?u=["back","rear"]:c.exact!=="user"&&c.ideal!=="user"||(u=["front"]),u)return n.mediaDevices.enumerateDevices().then(d=>{let h=(d=d.filter(f=>f.kind==="videoinput")).find(f=>u.some(g=>{var p;return Ce(p=f.label.toLowerCase()).call(p,g)}));return!h&&d.length&&Ce(u).call(u,"back")&&(h=d[d.length-1]),h&&(a.video.deviceId=c.exact?{exact:h.deviceId}:{ideal:h.deviceId}),a.video=r(a.video),NL("chrome: "+JSON.stringify(a)),s(a)})}a.video=r(a.video)}return NL("chrome: "+JSON.stringify(a)),s(a)},o=function(a){return t.version>=64?a:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[a.name]||a.name,message:a.message,constraint:a.constraint||a.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(n.getUserMedia=(function(a,s,c){i(a,l=>{n.webkitGetUserMedia(l,s,u=>{c&&c(o(u))})})}).bind(n),n.mediaDevices.getUserMedia){const a=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(s){return i(s,c=>a(c).then(l=>{if(c.audio&&!l.getAudioTracks().length||c.video&&!l.getVideoTracks().length)throw l.getTracks().forEach(u=>{u.stop()}),new DOMException("","NotFoundError");return l},l=>_e.reject(o(l))))}}}function sH(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function cH(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=n=>{n.stream.addEventListener("addtrack",r=>{let i;i=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(a=>a.track&&a.track.id===r.track.id):{track:r.track};const o=new Event("track");o.track=r.track,o.receiver=i,o.transceiver={receiver:i},o.streams=[n.stream],this.dispatchEvent(o)}),n.stream.getTracks().forEach(r=>{let i;i=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(a=>a.track&&a.track.id===r.id):{track:r};const o=new Event("track");o.track=r,o.receiver=i,o.transceiver={receiver:i},o.streams=[n.stream],this.dispatchEvent(o)})},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else zd(e,"track",t=>(t.transceiver||Object.defineProperty(t,"transceiver",{value:{receiver:t.receiver}}),t))}function lH(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(i,o){return{track:o,get dtmf(){return this._dtmf===void 0&&(o.kind==="audio"?this._dtmf=i.createDTMFSender(o):this._dtmf=null),this._dtmf},_pc:i}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const i=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(a,s){let c=i.apply(this,arguments);return c||(c=t(this,a),this._senders.push(c)),c};const o=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(a){o.apply(this,arguments);const s=this._senders.indexOf(a);s!==-1&&this._senders.splice(s,1)}}const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(i){this._senders=this._senders||[],n.apply(this,[i]),i.getTracks().forEach(o=>{this._senders.push(t(this,o))})};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(i){this._senders=this._senders||[],r.apply(this,[i]),i.getTracks().forEach(o=>{const a=this._senders.find(s=>s.track===o);a&&this._senders.splice(this._senders.indexOf(a),1)})}}else if(typeof e=="object"&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const n=t.apply(this,[]);return n.forEach(r=>r._pc=this),n},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function uH(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[n,r,i]=arguments;if(arguments.length>0&&typeof n=="function")return t.apply(this,arguments);if(t.length===0&&(arguments.length===0||typeof n!="function"))return t.apply(this,[]);const o=function(s){const c={};return s.result().forEach(l=>{const u={id:l.id,timestamp:l.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[l.type]||l.type};l.names().forEach(d=>{u[d]=l.stat(d)}),c[u.id]=u}),c},a=function(s){return new Map(Object.keys(s).map(c=>[c,s[c]]))};if(arguments.length>=2){const s=function(c){r(a(o(c)))};return t.apply(this,[s,n])}return new _e((s,c)=>{t.apply(this,[function(l){s(a(o(l)))},c])}).then(r,i)}}function dH(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const n=e.RTCPeerConnection.prototype.getSenders;n&&(e.RTCPeerConnection.prototype.getSenders=function(){const i=n.apply(this,[]);return i.forEach(o=>o._pc=this),i});const r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){const i=r.apply(this,arguments);return i._pc=this,i}),e.RTCRtpSender.prototype.getStats=function(){const i=this;return this._pc.getStats().then(o=>x2(o,i.track,!0))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const n=e.RTCPeerConnection.prototype.getReceivers;n&&(e.RTCPeerConnection.prototype.getReceivers=function(){const r=n.apply(this,[]);return r.forEach(i=>i._pc=this),r}),zd(e,"track",r=>(r.receiver._pc=r.srcElement,r)),e.RTCRtpReceiver.prototype.getStats=function(){const r=this;return this._pc.getStats().then(i=>x2(i,r.track,!1))}}if(!("getStats"in e.RTCRtpSender.prototype)||!("getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const n=arguments[0];let r,i,o;return this.getSenders().forEach(a=>{a.track===n&&(r?o=!0:r=a)}),this.getReceivers().forEach(a=>(a.track===n&&(i?o=!0:i=a),a.track===n)),o||r&&i?_e.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):r?r.getStats():i?i.getStats():_e.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function hH(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(o=>this._shimmedLocalStreams[o][0])};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(o,a){if(!a)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const s=t.apply(this,arguments);return this._shimmedLocalStreams[a.id]?this._shimmedLocalStreams[a.id].indexOf(s)===-1&&this._shimmedLocalStreams[a.id].push(s):this._shimmedLocalStreams[a.id]=[a,s],s};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(o){this._shimmedLocalStreams=this._shimmedLocalStreams||{},o.getTracks().forEach(c=>{if(this.getSenders().find(u=>u.track===c))throw new DOMException("Track already exists.","InvalidAccessError")});const a=this.getSenders();n.apply(this,arguments);const s=this.getSenders().filter(c=>a.indexOf(c)===-1);this._shimmedLocalStreams[o.id]=[o].concat(s)};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(o){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[o.id],r.apply(this,arguments)};const i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(o){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},o&&Object.keys(this._shimmedLocalStreams).forEach(a=>{const s=this._shimmedLocalStreams[a].indexOf(o);s!==-1&&this._shimmedLocalStreams[a].splice(s,1),this._shimmedLocalStreams[a].length===1&&delete this._shimmedLocalStreams[a]}),i.apply(this,arguments)}}function fH(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return hH(e);const n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const c=n.apply(this);return this._reverseStreams=this._reverseStreams||{},c.map(l=>this._reverseStreams[l.id])};const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(c){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},c.getTracks().forEach(l=>{if(this.getSenders().find(d=>d.track===l))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[c.id]){const l=new e.MediaStream(c.getTracks());this._streams[c.id]=l,this._reverseStreams[l.id]=c,c=l}r.apply(this,[c])};const i=e.RTCPeerConnection.prototype.removeStream;function o(c,l){let u=l.sdp;return Object.keys(c._reverseStreams||[]).forEach(d=>{const h=c._reverseStreams[d],f=c._streams[h.id];u=u.replace(new RegExp(f.id,"g"),h.id)}),new RTCSessionDescription({type:l.type,sdp:u})}e.RTCPeerConnection.prototype.removeStream=function(c){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[c.id]||c]),delete this._reverseStreams[this._streams[c.id]?this._streams[c.id].id:c.id],delete this._streams[c.id]},e.RTCPeerConnection.prototype.addTrack=function(c,l){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const u=[].slice.call(arguments,1);if(u.length!==1||!u[0].getTracks().find(f=>f===c))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(f=>f.track===c))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const h=this._streams[l.id];if(h)h.addTrack(c),_e.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const f=new e.MediaStream([c]);this._streams[l.id]=f,this._reverseStreams[f.id]=l,this.addStream(f)}return this.getSenders().find(f=>f.track===c)},["createOffer","createAnswer"].forEach(function(c){const l=e.RTCPeerConnection.prototype[c],u={[c](){const d=arguments;return arguments.length&&typeof arguments[0]=="function"?l.apply(this,[h=>{const f=o(this,h);d[0].apply(null,[f])},h=>{d[1]&&d[1].apply(null,h)},arguments[2]]):l.apply(this,arguments).then(h=>o(this,h))}};e.RTCPeerConnection.prototype[c]=u[c]});const a=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=function(c,l){let u=l.sdp;return Object.keys(c._reverseStreams||[]).forEach(d=>{const h=c._reverseStreams[d],f=c._streams[h.id];u=u.replace(new RegExp(h.id,"g"),f.id)}),new RTCSessionDescription({type:l.type,sdp:u})}(this,arguments[0]),a.apply(this,arguments)):a.apply(this,arguments)};const s=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const c=s.get.apply(this);return c.type===""?c:o(this,c)}}),e.RTCPeerConnection.prototype.removeTrack=function(c){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!c._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(c._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let l;this._streams=this._streams||{},Object.keys(this._streams).forEach(u=>{this._streams[u].getTracks().find(d=>c.track===d)&&(l=this._streams[u])}),l&&(l.getTracks().length===1?this.removeStream(this._reverseStreams[l.id]):l.removeTrack(c.track),this.dispatchEvent(new Event("negotiationneeded")))}}function SI(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const r=e.RTCPeerConnection.prototype[n],i={[n](){return arguments[0]=new(n==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};e.RTCPeerConnection.prototype[n]=i[n]})}function pH(e,t){zd(e,"negotiationneeded",n=>{const r=n.target;if(!(t.version<72||r.getConfiguration&&r.getConfiguration().sdpSemantics==="plan-b")||r.signalingState==="stable")return n})}var PL=Object.freeze({__proto__:null,fixNegotiationNeeded:pH,shimAddTrackRemoveTrack:fH,shimAddTrackRemoveTrackWithNative:hH,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(typeof t=="function"?e.navigator.mediaDevices.getDisplayMedia=function(n){return t(n).then(r=>{const i=n.video&&n.video.width,o=n.video&&n.video.height,a=n.video&&n.video.frameRate;return n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:r,maxFrameRate:a||3}},i&&(n.video.mandatory.maxWidth=i),o&&(n.video.mandatory.maxHeight=o),e.navigator.mediaDevices.getUserMedia(n)})}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))},shimGetSendersWithDtmf:lH,shimGetStats:uH,shimGetUserMedia:aH,shimMediaStream:sH,shimOnTrack:cH,shimPeerConnection:SI,shimSenderReceiverGetStats:dH});function mH(e,t){const n=e&&e.navigator,r=e&&e.MediaStreamTrack;if(n.getUserMedia=function(i,o,a){wx("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(i).then(o,a)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const i=function(a,s,c){s in a&&!(c in a)&&(a[c]=a[s],delete a[s])},o=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(a){return typeof a=="object"&&typeof a.audio=="object"&&(a=JSON.parse(JSON.stringify(a)),i(a.audio,"autoGainControl","mozAutoGainControl"),i(a.audio,"noiseSuppression","mozNoiseSuppression")),o(a)},r&&r.prototype.getSettings){const a=r.prototype.getSettings;r.prototype.getSettings=function(){const s=a.apply(this,arguments);return i(s,"mozAutoGainControl","autoGainControl"),i(s,"mozNoiseSuppression","noiseSuppression"),s}}if(r&&r.prototype.applyConstraints){const a=r.prototype.applyConstraints;r.prototype.applyConstraints=function(s){return this.kind==="audio"&&typeof s=="object"&&(s=JSON.parse(JSON.stringify(s)),i(s,"autoGainControl","mozAutoGainControl"),i(s,"noiseSuppression","mozNoiseSuppression")),a.apply(this,[s])}}}}function gH(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function yI(e,t){if(typeof e!="object"||!e.RTCPeerConnection&&!e.mozRTCPeerConnection)return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){const o=e.RTCPeerConnection.prototype[i],a={[i](){return arguments[0]=new(i==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),o.apply(this,arguments)}};e.RTCPeerConnection.prototype[i]=a[i]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[i,o,a]=arguments;return r.apply(this,[i||null]).then(s=>{if(t.version<53&&!o)try{s.forEach(c=>{c.type=n[c.type]||c.type})}catch(c){if(c.name!=="TypeError")throw c;s.forEach((l,u)=>{s.set(u,Object.assign({},l,{type:n[l.type]||l.type}))})}return s}).then(o,a)}}function vH(e){if(typeof e!="object"||!e.RTCPeerConnection||!e.RTCRtpSender||e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const r=t.apply(this,[]);return r.forEach(i=>i._pc=this),r});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const r=n.apply(this,arguments);return r._pc=this,r}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):_e.resolve(new Map)}}function EH(e){if(typeof e!="object"||!e.RTCPeerConnection||!e.RTCRtpSender||e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const n=t.apply(this,[]);return n.forEach(r=>r._pc=this),n}),zd(e,"track",n=>(n.receiver._pc=n.srcElement,n)),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function _H(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(t){wx("removeStream","removeTrack"),this.getSenders().forEach(n=>{var r;n.track&&Ce(r=t.getTracks()).call(r,n.track)&&this.removeTrack(n)})})}function SH(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function yH(e){if(typeof e!="object"||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let n=arguments[1]&&arguments[1].sendEncodings;n===void 0&&(n=[]),n=[...n];const r=n.length>0;r&&n.forEach(o=>{if("rid"in o&&!/^[a-z0-9]{0,16}$/i.test(o.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in o&&!(parseFloat(o.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in o&&!(parseFloat(o.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const i=t.apply(this,arguments);if(r){const{sender:o}=i,a=o.getParameters();(!("encodings"in a)||a.encodings.length===1&&Object.keys(a.encodings[0]).length===0)&&(a.encodings=n,o.sendEncodings=n,this.setParametersPromises.push(o.setParameters(a).then(()=>{delete o.sendEncodings}).catch(()=>{delete o.sendEncodings})))}return i})}function CH(e){if(typeof e!="object"||!e.RTCRtpSender)return;const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const n=t.apply(this,arguments);return"encodings"in n||(n.encodings=[].concat(this.sendEncodings||[{}])),n})}function bH(e){if(typeof e!="object"||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?_e.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}function TH(e){if(typeof e!="object"||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?_e.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}var DL=Object.freeze({__proto__:null,shimAddTransceiver:yH,shimCreateAnswer:TH,shimCreateOffer:bH,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(n){if(!n||!n.video){const r=new DOMException("getDisplayMedia without video constraints is undefined");return r.name="NotFoundError",r.code=8,_e.reject(r)}return n.video===!0?n.video={mediaSource:t}:n.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(n)})},shimGetParameters:CH,shimGetUserMedia:mH,shimOnTrack:gH,shimPeerConnection:yI,shimRTCDataChannel:SH,shimReceiverGetStats:EH,shimRemoveStream:_H,shimSenderGetStats:vH});function RH(e){if(typeof e=="object"&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(n){var r;this._localStreams||(this._localStreams=[]),Ce(r=this._localStreams).call(r,n)||this._localStreams.push(n),n.getAudioTracks().forEach(i=>t.call(this,i,n)),n.getVideoTracks().forEach(i=>t.call(this,i,n))},e.RTCPeerConnection.prototype.addTrack=function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return i&&i.forEach(a=>{var s;this._localStreams?Ce(s=this._localStreams).call(s,a)||this._localStreams.push(a):this._localStreams=[a]}),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(t){this._localStreams||(this._localStreams=[]);const n=this._localStreams.indexOf(t);if(n===-1)return;this._localStreams.splice(n,1);const r=t.getTracks();this.getSenders().forEach(i=>{Ce(r).call(r,i.track)&&this.removeTrack(i)})})}}function wH(e){if(typeof e=="object"&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=r=>{r.streams.forEach(i=>{var o;if(this._remoteStreams||(this._remoteStreams=[]),Ce(o=this._remoteStreams).call(o,i))return;this._remoteStreams.push(i);const a=new Event("addstream");a.stream=i,this.dispatchEvent(a)})})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const n=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(r){r.streams.forEach(i=>{if(n._remoteStreams||(n._remoteStreams=[]),n._remoteStreams.indexOf(i)>=0)return;n._remoteStreams.push(i);const o=new Event("addstream");o.stream=i,n.dispatchEvent(o)})}),t.apply(n,arguments)}}}function IH(e){if(typeof e!="object"||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,i=t.setLocalDescription,o=t.setRemoteDescription,a=t.addIceCandidate;t.createOffer=function(c,l){const u=arguments.length>=2?arguments[2]:arguments[0],d=n.apply(this,[u]);return l?(d.then(c,l),_e.resolve()):d},t.createAnswer=function(c,l){const u=arguments.length>=2?arguments[2]:arguments[0],d=r.apply(this,[u]);return l?(d.then(c,l),_e.resolve()):d};let s=function(c,l,u){const d=i.apply(this,[c]);return u?(d.then(l,u),_e.resolve()):d};t.setLocalDescription=s,s=function(c,l,u){const d=o.apply(this,[c]);return u?(d.then(l,u),_e.resolve()):d},t.setRemoteDescription=s,s=function(c,l,u){const d=a.apply(this,[c]);return u?(d.then(l,u),_e.resolve()):d},t.addIceCandidate=s}function AH(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const n=t.mediaDevices,r=n.getUserMedia.bind(n);t.mediaDevices.getUserMedia=i=>r(OH(i))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=(function(n,r,i){t.mediaDevices.getUserMedia(n).then(r,i)}).bind(t))}function OH(e){return e&&e.video!==void 0?Object.assign({},e,{video:fj(e.video)}):e}function xH(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection;e.RTCPeerConnection=function(n,r){if(n&&n.iceServers){const i=[];for(let o=0;o<n.iceServers.length;o++){let a=n.iceServers[o];!a.hasOwnProperty("urls")&&a.hasOwnProperty("url")?(wx("RTCIceServer.url","RTCIceServer.urls"),a=JSON.parse(JSON.stringify(a)),a.urls=a.url,delete a.url,i.push(a)):i.push(n.iceServers[o])}n.iceServers=i}return new t(n,r)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:()=>t.generateCertificate})}function NH(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function PH(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(n){if(n){n.offerToReceiveAudio!==void 0&&(n.offerToReceiveAudio=!!n.offerToReceiveAudio);const r=this.getTransceivers().find(o=>o.receiver.track.kind==="audio");n.offerToReceiveAudio===!1&&r?r.direction==="sendrecv"?r.setDirection?r.setDirection("sendonly"):r.direction="sendonly":r.direction==="recvonly"&&(r.setDirection?r.setDirection("inactive"):r.direction="inactive"):n.offerToReceiveAudio!==!0||r||this.addTransceiver("audio",{direction:"recvonly"}),n.offerToReceiveVideo!==void 0&&(n.offerToReceiveVideo=!!n.offerToReceiveVideo);const i=this.getTransceivers().find(o=>o.receiver.track.kind==="video");n.offerToReceiveVideo===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):n.offerToReceiveVideo!==!0||i||this.addTransceiver("video",{direction:"recvonly"})}return t.apply(this,arguments)}}function DH(e){typeof e!="object"||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}var LL=Object.freeze({__proto__:null,shimAudioContext:DH,shimCallbacksAPI:IH,shimConstraints:OH,shimCreateOfferLegacy:PH,shimGetUserMedia:AH,shimLocalStreamsAPI:RH,shimRTCIceServerUrls:xH,shimRemoteStreamsAPI:wH,shimTrackEventTransceiver:NH}),LH=`	
\v\f\r                　\u2028\u2029\uFEFF`,oae=ap,aae=Ra,CI=LH,kL=cr("".replace),sae=RegExp("^["+CI+"]+"),cae=RegExp("(^|[^"+CI+"])["+CI+"]+$"),u1=function(e){return function(t){var n=aae(oae(t));return 1&e&&(n=kL(n,sae,"")),2&e&&(n=kL(n,cae,"$1")),n}},lae={start:u1(1),end:u1(2),trim:u1(3)},uae=Rj.PROPER,dae=hr,ML=LH,hae=lae.trim;ln({target:"String",proto:!0,forced:function(e){return dae(function(){return!!ML[e]()||"​᠎"[e]()!=="​᠎"||uae&&ML[e].name!==e})}("trim")},{trim:function(){return hae(this)}});var fae=hs("String").trim,pae=Fi,mae=fae,d1=String.prototype,gae=function(e){var t=e.trim;return typeof e=="string"||e===d1||pae(d1,e)&&t===d1.trim?mae:t},yi=Kn(gae),kH={exports:{}};(function(e){const t={generateIdentifier:function(){return Math.random().toString(36).substring(2,12)}};t.localCName=t.generateIdentifier(),t.splitLines=function(n){return n.trim().split(`
`).map(r=>r.trim())},t.splitSections=function(n){return n.split(`
m=`).map((r,i)=>(i>0?"m="+r:r).trim()+`\r
`)},t.getDescription=function(n){const r=t.splitSections(n);return r&&r[0]},t.getMediaSections=function(n){const r=t.splitSections(n);return r.shift(),r},t.matchPrefix=function(n,r){return t.splitLines(n).filter(i=>i.indexOf(r)===0)},t.parseCandidate=function(n){let r;r=n.indexOf("a=candidate:")===0?n.substring(12).split(" "):n.substring(10).split(" ");const i={foundation:r[0],component:{1:"rtp",2:"rtcp"}[r[1]]||r[1],protocol:r[2].toLowerCase(),priority:parseInt(r[3],10),ip:r[4],address:r[4],port:parseInt(r[5],10),type:r[7]};for(let o=8;o<r.length;o+=2)switch(r[o]){case"raddr":i.relatedAddress=r[o+1];break;case"rport":i.relatedPort=parseInt(r[o+1],10);break;case"tcptype":i.tcpType=r[o+1];break;case"ufrag":i.ufrag=r[o+1],i.usernameFragment=r[o+1];break;default:i[r[o]]===void 0&&(i[r[o]]=r[o+1])}return i},t.writeCandidate=function(n){const r=[];r.push(n.foundation);const i=n.component;i==="rtp"?r.push(1):i==="rtcp"?r.push(2):r.push(i),r.push(n.protocol.toUpperCase()),r.push(n.priority),r.push(n.address||n.ip),r.push(n.port);const o=n.type;return r.push("typ"),r.push(o),o!=="host"&&n.relatedAddress&&n.relatedPort&&(r.push("raddr"),r.push(n.relatedAddress),r.push("rport"),r.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(r.push("tcptype"),r.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(r.push("ufrag"),r.push(n.usernameFragment||n.ufrag)),"candidate:"+r.join(" ")},t.parseIceOptions=function(n){return n.substring(14).split(" ")},t.parseRtpMap=function(n){let r=n.substring(9).split(" ");const i={payloadType:parseInt(r.shift(),10)};return r=r[0].split("/"),i.name=r[0],i.clockRate=parseInt(r[1],10),i.channels=r.length===3?parseInt(r[2],10):1,i.numChannels=i.channels,i},t.writeRtpMap=function(n){let r=n.payloadType;n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType);const i=n.channels||n.numChannels||1;return"a=rtpmap:"+r+" "+n.name+"/"+n.clockRate+(i!==1?"/"+i:"")+`\r
`},t.parseExtmap=function(n){const r=n.substring(9).split(" ");return{id:parseInt(r[0],10),direction:r[0].indexOf("/")>0?r[0].split("/")[1]:"sendrecv",uri:r[1],attributes:r.slice(2).join(" ")}},t.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+(n.attributes?" "+n.attributes:"")+`\r
`},t.parseFmtp=function(n){const r={};let i;const o=n.substring(n.indexOf(" ")+1).split(";");for(let a=0;a<o.length;a++)i=o[a].trim().split("="),r[i[0].trim()]=i[1];return r},t.writeFmtp=function(n){let r="",i=n.payloadType;if(n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){const o=[];Object.keys(n.parameters).forEach(a=>{n.parameters[a]!==void 0?o.push(a+"="+n.parameters[a]):o.push(a)}),r+="a=fmtp:"+i+" "+o.join(";")+`\r
`}return r},t.parseRtcpFb=function(n){const r=n.substring(n.indexOf(" ")+1).split(" ");return{type:r.shift(),parameter:r.join(" ")}},t.writeRtcpFb=function(n){let r="",i=n.payloadType;return n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(o=>{r+="a=rtcp-fb:"+i+" "+o.type+(o.parameter&&o.parameter.length?" "+o.parameter:"")+`\r
`}),r},t.parseSsrcMedia=function(n){const r=n.indexOf(" "),i={ssrc:parseInt(n.substring(7,r),10)},o=n.indexOf(":",r);return o>-1?(i.attribute=n.substring(r+1,o),i.value=n.substring(o+1)):i.attribute=n.substring(r+1),i},t.parseSsrcGroup=function(n){const r=n.substring(13).split(" ");return{semantics:r.shift(),ssrcs:r.map(i=>parseInt(i,10))}},t.getMid=function(n){const r=t.matchPrefix(n,"a=mid:")[0];if(r)return r.substring(6)},t.parseFingerprint=function(n){const r=n.substring(14).split(" ");return{algorithm:r[0].toLowerCase(),value:r[1].toUpperCase()}},t.getDtlsParameters=function(n,r){return{role:"auto",fingerprints:t.matchPrefix(n+r,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(n,r){let i="a=setup:"+r+`\r
`;return n.fingerprints.forEach(o=>{i+="a=fingerprint:"+o.algorithm+" "+o.value+`\r
`}),i},t.parseCryptoLine=function(n){const r=n.substring(9).split(" ");return{tag:parseInt(r[0],10),cryptoSuite:r[1],keyParams:r[2],sessionParams:r.slice(3)}},t.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?t.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},t.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;const r=n.substring(7).split("|");return{keyMethod:"inline",keySalt:r[0],lifeTime:r[1],mkiValue:r[2]?r[2].split(":")[0]:void 0,mkiLength:r[2]?r[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},t.getCryptoParameters=function(n,r){return t.matchPrefix(n+r,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(n,r){const i=t.matchPrefix(n+r,"a=ice-ufrag:")[0],o=t.matchPrefix(n+r,"a=ice-pwd:")[0];return i&&o?{usernameFragment:i.substring(12),password:o.substring(10)}:null},t.writeIceParameters=function(n){let r="a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`;return n.iceLite&&(r+=`a=ice-lite\r
`),r},t.parseRtpParameters=function(n){const r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},i=t.splitLines(n)[0].split(" ");r.profile=i[2];for(let a=3;a<i.length;a++){const s=i[a],c=t.matchPrefix(n,"a=rtpmap:"+s+" ")[0];if(c){const l=t.parseRtpMap(c),u=t.matchPrefix(n,"a=fmtp:"+s+" ");switch(l.parameters=u.length?t.parseFmtp(u[0]):{},l.rtcpFeedback=t.matchPrefix(n,"a=rtcp-fb:"+s+" ").map(t.parseRtcpFb),r.codecs.push(l),l.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(l.name.toUpperCase())}}}t.matchPrefix(n,"a=extmap:").forEach(a=>{r.headerExtensions.push(t.parseExtmap(a))});const o=t.matchPrefix(n,"a=rtcp-fb:* ").map(t.parseRtcpFb);return r.codecs.forEach(a=>{o.forEach(s=>{a.rtcpFeedback.find(c=>c.type===s.type&&c.parameter===s.parameter)||a.rtcpFeedback.push(s)})}),r},t.writeRtpDescription=function(n,r){let i="";i+="m="+n+" ",i+=r.codecs.length>0?"9":"0",i+=" "+(r.profile||"UDP/TLS/RTP/SAVPF")+" ",i+=r.codecs.map(a=>a.preferredPayloadType!==void 0?a.preferredPayloadType:a.payloadType).join(" ")+`\r
`,i+=`c=IN IP4 0.0.0.0\r
`,i+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,r.codecs.forEach(a=>{i+=t.writeRtpMap(a),i+=t.writeFmtp(a),i+=t.writeRtcpFb(a)});let o=0;return r.codecs.forEach(a=>{a.maxptime>o&&(o=a.maxptime)}),o>0&&(i+="a=maxptime:"+o+`\r
`),r.headerExtensions&&r.headerExtensions.forEach(a=>{i+=t.writeExtmap(a)}),i},t.parseRtpEncodingParameters=function(n){const r=[],i=t.parseRtpParameters(n),o=i.fecMechanisms.indexOf("RED")!==-1,a=i.fecMechanisms.indexOf("ULPFEC")!==-1,s=t.matchPrefix(n,"a=ssrc:").map(h=>t.parseSsrcMedia(h)).filter(h=>h.attribute==="cname"),c=s.length>0&&s[0].ssrc;let l;const u=t.matchPrefix(n,"a=ssrc-group:FID").map(h=>h.substring(17).split(" ").map(f=>parseInt(f,10)));u.length>0&&u[0].length>1&&u[0][0]===c&&(l=u[0][1]),i.codecs.forEach(h=>{if(h.name.toUpperCase()==="RTX"&&h.parameters.apt){let f={ssrc:c,codecPayloadType:parseInt(h.parameters.apt,10)};c&&l&&(f.rtx={ssrc:l}),r.push(f),o&&(f=JSON.parse(JSON.stringify(f)),f.fec={ssrc:c,mechanism:a?"red+ulpfec":"red"},r.push(f))}}),r.length===0&&c&&r.push({ssrc:c});let d=t.matchPrefix(n,"b=");return d.length&&(d=d[0].indexOf("b=TIAS:")===0?parseInt(d[0].substring(7),10):d[0].indexOf("b=AS:")===0?1e3*parseInt(d[0].substring(5),10)*.95-16e3:void 0,r.forEach(h=>{h.maxBitrate=d})),r},t.parseRtcpParameters=function(n){const r={},i=t.matchPrefix(n,"a=ssrc:").map(s=>t.parseSsrcMedia(s)).filter(s=>s.attribute==="cname")[0];i&&(r.cname=i.value,r.ssrc=i.ssrc);const o=t.matchPrefix(n,"a=rtcp-rsize");r.reducedSize=o.length>0,r.compound=o.length===0;const a=t.matchPrefix(n,"a=rtcp-mux");return r.mux=a.length>0,r},t.writeRtcpParameters=function(n){let r="";return n.reducedSize&&(r+=`a=rtcp-rsize\r
`),n.mux&&(r+=`a=rtcp-mux\r
`),n.ssrc!==void 0&&n.cname&&(r+="a=ssrc:"+n.ssrc+" cname:"+n.cname+`\r
`),r},t.parseMsid=function(n){let r;const i=t.matchPrefix(n,"a=msid:");if(i.length===1)return r=i[0].substring(7).split(" "),{stream:r[0],track:r[1]};const o=t.matchPrefix(n,"a=ssrc:").map(a=>t.parseSsrcMedia(a)).filter(a=>a.attribute==="msid");return o.length>0?(r=o[0].value.split(" "),{stream:r[0],track:r[1]}):void 0},t.parseSctpDescription=function(n){const r=t.parseMLine(n),i=t.matchPrefix(n,"a=max-message-size:");let o;i.length>0&&(o=parseInt(i[0].substring(19),10)),isNaN(o)&&(o=65536);const a=t.matchPrefix(n,"a=sctp-port:");if(a.length>0)return{port:parseInt(a[0].substring(12),10),protocol:r.fmt,maxMessageSize:o};const s=t.matchPrefix(n,"a=sctpmap:");if(s.length>0){const c=s[0].substring(10).split(" ");return{port:parseInt(c[0],10),protocol:c[1],maxMessageSize:o}}},t.writeSctpDescription=function(n,r){let i=[];return i=n.protocol!=="DTLS/SCTP"?["m="+n.kind+" 9 "+n.protocol+" "+r.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+r.port+`\r
`]:["m="+n.kind+" 9 "+n.protocol+" "+r.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+r.port+" "+r.protocol+` 65535\r
`],r.maxMessageSize!==void 0&&i.push("a=max-message-size:"+r.maxMessageSize+`\r
`),i.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,22)},t.writeSessionBoilerplate=function(n,r,i){let o;const a=r!==void 0?r:2;return o=n||t.generateSessionId(),`v=0\r
o=`+(i||"thisisadapterortc")+" "+o+" "+a+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},t.getDirection=function(n,r){const i=t.splitLines(n);for(let o=0;o<i.length;o++)switch(i[o]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[o].substring(2)}return r?t.getDirection(r):"sendrecv"},t.getKind=function(n){return t.splitLines(n)[0].split(" ")[0].substring(2)},t.isRejected=function(n){return n.split(" ",2)[1]==="0"},t.parseMLine=function(n){const r=t.splitLines(n)[0].substring(2).split(" ");return{kind:r[0],port:parseInt(r[1],10),protocol:r[2],fmt:r.slice(3).join(" ")}},t.parseOLine=function(n){const r=t.matchPrefix(n,"o=")[0].substring(2).split(" ");return{username:r[0],sessionId:r[1],sessionVersion:parseInt(r[2],10),netType:r[3],addressType:r[4],address:r[5]}},t.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;const r=t.splitLines(n);for(let i=0;i<r.length;i++)if(r[i].length<2||r[i].charAt(1)!=="=")return!1;return!0},e.exports=t})(kH);var MH=kH.exports,vf=Kn(MH),vae=MQ({__proto__:null,default:vf},[MH]);function XE(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(n){if(typeof n=="object"&&n.candidate&&n.candidate.indexOf("a=")===0&&((n=JSON.parse(JSON.stringify(n))).candidate=n.candidate.substr(2)),n.candidate&&n.candidate.length){const r=new t(n),i=vf.parseCandidate(n.candidate),o=Object.assign(r,i);return o.toJSON=function(){return{candidate:o.candidate,sdpMid:o.sdpMid,sdpMLineIndex:o.sdpMLineIndex,usernameFragment:o.usernameFragment}},o}return new t(n)},e.RTCIceCandidate.prototype=t.prototype,zd(e,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new e.RTCIceCandidate(n.candidate),writable:"false"}),n))}function bI(e){!e.RTCIceCandidate||e.RTCIceCandidate&&"relayProtocol"in e.RTCIceCandidate.prototype||zd(e,"icecandidate",t=>{if(t.candidate){const n=vf.parseCandidate(t.candidate.candidate);n.type==="relay"&&(t.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[n.priority>>24])}return t})}function JE(e,t){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return this._sctp===void 0?null:this._sctp}});const n=function(s){if(!s||!s.sdp)return!1;const c=vf.splitSections(s.sdp);return c.shift(),c.some(l=>{const u=vf.parseMLine(l);return u&&u.kind==="application"&&u.protocol.indexOf("SCTP")!==-1})},r=function(s){const c=s.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(c===null||c.length<2)return-1;const l=parseInt(c[1],10);return l!=l?-1:l},i=function(s){let c=65536;return t.browser==="firefox"&&(c=t.version<57?s===-1?16384:2147483637:t.version<60?t.version===57?65535:65536:2147483637),c},o=function(s,c){let l=65536;t.browser==="firefox"&&t.version===57&&(l=65535);const u=vf.matchPrefix(s.sdp,"a=max-message-size:");return u.length>0?l=parseInt(u[0].substr(19),10):t.browser==="firefox"&&c!==-1&&(l=2147483637),l},a=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,t.browser==="chrome"&&t.version>=76){const{sdpSemantics:s}=this.getConfiguration();s==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return this._sctp===void 0?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const s=r(arguments[0]),c=i(s),l=o(arguments[0],s);let u;u=c===0&&l===0?Number.POSITIVE_INFINITY:c===0||l===0?Math.max(c,l):Math.min(c,l);const d={};Object.defineProperty(d,"maxMessageSize",{get:()=>u}),this._sctp=d}return a.apply(this,arguments)}}function QE(e){if(!e.RTCPeerConnection||!("createDataChannel"in e.RTCPeerConnection.prototype))return;function t(r,i){const o=r.send;r.send=function(){const a=arguments[0],s=a.length||a.size||a.byteLength;if(r.readyState==="open"&&i.sctp&&s>i.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+i.sctp.maxMessageSize+" bytes)");return o.apply(r,arguments)}}const n=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const r=n.apply(this,arguments);return t(r,this),r},zd(e,"datachannel",r=>(t(r.channel,r.target),r))}function TI(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const r=t[n];t[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=i=>{const o=i.target;if(o._lastConnectionState!==o.connectionState){o._lastConnectionState=o.connectionState;const a=new Event("connectionstatechange",i);o.dispatchEvent(a)}return i},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}function RI(e,t){if(!e.RTCPeerConnection||t.browser==="chrome"&&t.version>=71||t.browser==="safari"&&t.version>=605)return;const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(r){if(r&&r.sdp&&r.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const i=r.sdp.split(`
`).filter(o=>yi(o).call(o)!=="a=extmap-allow-mixed").join(`
`);e.RTCSessionDescription&&r instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:r.type,sdp:i}):r.sdp=i}return n.apply(this,arguments)}}function ZE(e,t){if(!e.RTCPeerConnection||!e.RTCPeerConnection.prototype)return;const n=e.RTCPeerConnection.prototype.addIceCandidate;n&&n.length!==0&&(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(t.browser==="chrome"&&t.version<78||t.browser==="firefox"&&t.version<68||t.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?_e.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),_e.resolve())})}function e_(e,t){if(!e.RTCPeerConnection||!e.RTCPeerConnection.prototype)return;const n=e.RTCPeerConnection.prototype.setLocalDescription;n&&n.length!==0&&(e.RTCPeerConnection.prototype.setLocalDescription=function(){let r=arguments[0]||{};if(typeof r!="object"||r.type&&r.sdp)return n.apply(this,arguments);if(r={type:r.type,sdp:r.sdp},!r.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":r.type="offer";break;default:r.type="answer"}return r.sdp||r.type!=="offer"&&r.type!=="answer"?n.apply(this,[r]):(r.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(i=>n.apply(this,[i]))})}var Eae=Object.freeze({__proto__:null,removeExtmapAllowMixed:RI,shimAddIceCandidateNullOrEmpty:ZE,shimConnectionState:TI,shimMaxMessageSize:JE,shimParameterlessSetLocalDescription:e_,shimRTCIceCandidate:XE,shimRTCIceCandidateRelayProtocol:bI,shimSendThrowTypeError:QE});(function(){let{window:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0};const n=hj,r=function(o){const a={browser:null,version:null};if(o===void 0||!o.navigator)return a.browser="Not a browser.",a;const{navigator:s}=o;if(s.mozGetUserMedia)a.browser="firefox",a.version=dv(s.userAgent,/Firefox\/(\d+)\./,1);else if(s.webkitGetUserMedia||o.isSecureContext===!1&&o.webkitRTCPeerConnection)a.browser="chrome",a.version=dv(s.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else{if(!o.RTCPeerConnection||!s.userAgent.match(/AppleWebKit\/(\d+)\./))return a.browser="Not a supported browser.",a;a.browser="safari",a.version=dv(s.userAgent,/AppleWebKit\/(\d+)\./,1),a.supportsUnifiedPlan=o.RTCRtpTransceiver&&"currentDirection"in o.RTCRtpTransceiver.prototype}return a}(e),i={browserDetails:r,commonShim:Eae,extractVersion:dv,disableLog:mte,disableWarnings:gte,sdp:vae};switch(r.browser){case"chrome":if(!PL||!SI||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),i;if(r.version===null)return n("Chrome shim can not determine version, not shimming."),i;n("adapter.js shimming chrome."),i.browserShim=PL,ZE(e,r),e_(e),aH(e,r),sH(e),SI(e,r),cH(e),fH(e,r),lH(e),uH(e),dH(e),pH(e,r),XE(e),bI(e),TI(e),JE(e,r),QE(e),RI(e,r);break;case"firefox":if(!DL||!yI||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),i;n("adapter.js shimming firefox."),i.browserShim=DL,ZE(e,r),e_(e),mH(e,r),yI(e,r),gH(e),_H(e),vH(e),EH(e),SH(e),yH(e),CH(e),bH(e),TH(e),XE(e),TI(e),JE(e,r),QE(e);break;case"safari":if(!LL||!t.shimSafari)return n("Safari shim is not included in this adapter release."),i;n("adapter.js shimming safari."),i.browserShim=LL,ZE(e,r),e_(e),xH(e),PH(e),IH(e),RH(e),wH(e),NH(e),AH(e),DH(e),XE(e),bI(e),JE(e,r),QE(e),RI(e,r);break;default:n("Unsupported browser!")}})({window:typeof window>"u"?void 0:window});var _ae=hs("Array").keys,Sae=Dc,yae=oi,Cae=Fi,bae=_ae,h1=Array.prototype,Tae={DOMTokenList:!0,NodeList:!0},Rae=function(e){var t=e.keys;return e===h1||Cae(h1,e)&&t===h1.keys||yae(Tae,Sae(e))?bae:t},jo=Kn(Rae),FL=cp,wae=TypeError,Iae=Sy,Aae=ds,Oae=bu,Ny=function(e,t,n){var r=Iae(t);r in e?Aae.f(e,r,Oae(0,n)):e[r]=n},UL=bx,xae=vl,Nae=Ny,Pae=Array,Dae=Math.max,jx=function(e,t,n){for(var r=xae(e),i=UL(t,r),o=UL(n===void 0?r:n,r),a=Pae(Dae(o-i,0)),s=0;i<o;i++,s++)Nae(a,s,e[i]);return a.length=s,a},BL=jx,Lae=Math.floor,wI=function(e,t){var n=e.length,r=Lae(n/2);return n<8?kae(e,t):Mae(e,wI(BL(e,0,r),t),wI(BL(e,r),t),t)},kae=function(e,t){for(var n,r,i=e.length,o=1;o<i;){for(r=o,n=e[o];r&&t(e[r-1],n)>0;)e[r]=e[--r];r!==o++&&(e[r]=n)}return e},Mae=function(e,t,n,r){for(var i=t.length,o=n.length,a=0,s=0;a<i||s<o;)e[a+s]=a<i&&s<o?r(t[a],n[s])<=0?t[a++]:n[s++]:a<i?t[a++]:n[s++];return e},FH=wI,$L=Hd.match(/firefox\/(\d+)/i),Fae=!!$L&&+$L[1],Uae=/MSIE|Trident/.test(Hd),VL=Hd.match(/AppleWebKit\/(\d+)\./),Bae=!!VL&&+VL[1],$ae=ln,UH=cr,Vae=us,jae=Pc,jL=vl,Hae=function(e,t){if(!delete e[t])throw wae("Cannot delete property "+FL(t)+" of "+FL(e))},HL=Ra,Hx=hr,zae=FH,Wae=yy,zL=Fae,Gae=Uae,WL=wd,GL=Bae,Kl=[],KL=UH(Kl.sort),Kae=UH(Kl.push),qae=Hx(function(){Kl.sort(void 0)}),Yae=Hx(function(){Kl.sort(null)}),Xae=Wae("sort"),qL=!Hx(function(){if(WL)return WL<70;if(!(zL&&zL>3)){if(Gae)return!0;if(GL)return GL<603;var e,t,n,r,i="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(r=0;r<47;r++)Kl.push({k:t+r,v:n})}for(Kl.sort(function(o,a){return a.v-o.v}),r=0;r<Kl.length;r++)t=Kl[r].k.charAt(0),i.charAt(i.length-1)!==t&&(i+=t);return i!=="DGBEFHACIJK"}});$ae({target:"Array",proto:!0,forced:qae||!Yae||!Xae||!qL},{sort:function(e){e!==void 0&&Vae(e);var t=jae(this);if(qL)return e===void 0?KL(t):KL(t,e);var n,r,i=[],o=jL(t);for(r=0;r<o;r++)r in t&&Kae(i,t[r]);for(zae(i,function(a){return function(s,c){return c===void 0?-1:s===void 0?1:a!==void 0?+a(s,c)||0:HL(s)>HL(c)?1:-1}}(e)),n=jL(i),r=0;r<n;)t[r]=i[r++];for(;r<o;)Hae(t,r++);return t}});var f1,p1,Jae=hs("Array").sort,Qae=Fi,Zae=Jae,m1=Array.prototype,ese=function(e){var t=e.sort;return e===m1||Qae(m1,e)&&t===m1.sort?Zae:t},xg=Kn(ese),II={exports:{}};f1=II,p1=II.exports,function(e,t){var n="function",r="undefined",i="object",o="string",a="major",s="model",c="name",l="type",u="vendor",d="version",h="architecture",f="console",g="mobile",p="tablet",m="smarttv",_="wearable",E="embedded",S="Amazon",C="Apple",b="ASUS",T="BlackBerry",R="Browser",A="Chrome",O="Firefox",x="Google",M="Huawei",$="LG",U="Microsoft",V="Motorola",W="Opera",z="Samsung",L="Sharp",D="Sony",j="Xiaomi",F="Zebra",y="Facebook",I="Chromium OS",N="Mac OS",B=function(te){for(var ge={},pe=0;pe<te.length;pe++)ge[te[pe].toUpperCase()]=te[pe];return ge},K=function(te,ge){return typeof te===o&&X(ge).indexOf(X(te))!==-1},X=function(te){return te.toLowerCase()},ee=function(te,ge){if(typeof te===o)return te=te.replace(/^\s\s*/,""),typeof ge===r?te:te.substring(0,350)},ne=function(te,ge){for(var pe,be,Se,ue,re,Re,we=0;we<ge.length&&!re;){var xe=ge[we],We=ge[we+1];for(pe=be=0;pe<xe.length&&!re&&xe[pe];)if(re=xe[pe++].exec(te))for(Se=0;Se<We.length;Se++)Re=re[++be],typeof(ue=We[Se])===i&&ue.length>0?ue.length===2?typeof ue[1]==n?this[ue[0]]=ue[1].call(this,Re):this[ue[0]]=ue[1]:ue.length===3?typeof ue[1]!==n||ue[1].exec&&ue[1].test?this[ue[0]]=Re?Re.replace(ue[1],ue[2]):t:this[ue[0]]=Re?ue[1].call(this,Re,ue[2]):t:ue.length===4&&(this[ue[0]]=Re?ue[3].call(this,Re.replace(ue[1],ue[2])):t):this[ue]=Re||t;we+=2}},fe=function(te,ge){for(var pe in ge)if(typeof ge[pe]===i&&ge[pe].length>0){for(var be=0;be<ge[pe].length;be++)if(K(ge[pe][be],te))return pe==="?"?t:pe}else if(K(ge[pe],te))return pe==="?"?t:pe;return te},ae={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},oe={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[d,[c,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[d,[c,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[c,d],[/opios[\/ ]+([\w\.]+)/i],[d,[c,W+" Mini"]],[/\bopr\/([\w\.]+)/i],[d,[c,W]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[c,d],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[d,[c,"UC"+R]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[d,[c,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[d,[c,"WeChat"]],[/konqueror\/([\w\.]+)/i],[d,[c,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[d,[c,"IE"]],[/yabrowser\/([\w\.]+)/i],[d,[c,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[c,/(.+)/,"$1 Secure "+R],d],[/\bfocus\/([\w\.]+)/i],[d,[c,O+" Focus"]],[/\bopt\/([\w\.]+)/i],[d,[c,W+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[d,[c,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[d,[c,"Dolphin"]],[/coast\/([\w\.]+)/i],[d,[c,W+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[d,[c,"MIUI "+R]],[/fxios\/([-\w\.]+)/i],[d,[c,O]],[/\bqihu|(qi?ho?o?|360)browser/i],[[c,"360 "+R]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[c,/(.+)/,"$1 "+R],d],[/(comodo_dragon)\/([\w\.]+)/i],[[c,/_/g," "],d],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[c,d],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[c],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[c,y],d],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[c,d],[/\bgsa\/([\w\.]+) .*safari\//i],[d,[c,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[d,[c,A+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[c,A+" WebView"],d],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[d,[c,"Android "+R]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[c,d],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[d,[c,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[d,c],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[c,[d,fe,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[c,d],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[c,"Netscape"],d],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[d,[c,O+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[c,d],[/(cobalt)\/([\w\.]+)/i],[c,[d,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[h,"amd64"]],[/(ia32(?=;))/i],[[h,X]],[/((?:i[346]|x)86)[;\)]/i],[[h,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[h,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[h,"armhf"]],[/windows (ce|mobile); ppc;/i],[[h,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[h,/ower/,"",X]],[/(sun4\w)[;\)]/i],[[h,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[h,X]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[s,[u,z],[l,p]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[s,[u,z],[l,g]],[/\((ip(?:hone|od)[\w ]*);/i],[s,[u,C],[l,g]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[s,[u,C],[l,p]],[/(macintosh);/i],[s,[u,C]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[s,[u,L],[l,g]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[s,[u,M],[l,p]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[s,[u,M],[l,g]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[s,/_/g," "],[u,j],[l,g]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[s,/_/g," "],[u,j],[l,p]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[s,[u,"OPPO"],[l,g]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[s,[u,"Vivo"],[l,g]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[s,[u,"Realme"],[l,g]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[s,[u,V],[l,g]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[s,[u,V],[l,p]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[s,[u,$],[l,p]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[s,[u,$],[l,g]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[s,[u,"Lenovo"],[l,p]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[s,/_/g," "],[u,"Nokia"],[l,g]],[/(pixel c)\b/i],[s,[u,x],[l,p]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[s,[u,x],[l,g]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[s,[u,D],[l,g]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[s,"Xperia Tablet"],[u,D],[l,p]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[s,[u,"OnePlus"],[l,g]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[s,[u,S],[l,p]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[s,/(.+)/g,"Fire Phone $1"],[u,S],[l,g]],[/(playbook);[-\w\),; ]+(rim)/i],[s,u,[l,p]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[s,[u,T],[l,g]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[s,[u,b],[l,p]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[s,[u,b],[l,g]],[/(nexus 9)/i],[s,[u,"HTC"],[l,p]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[u,[s,/_/g," "],[l,g]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[s,[u,"Acer"],[l,p]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[s,[u,"Meizu"],[l,g]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[u,s,[l,g]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[u,s,[l,p]],[/(surface duo)/i],[s,[u,U],[l,p]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[s,[u,"Fairphone"],[l,g]],[/(u304aa)/i],[s,[u,"AT&T"],[l,g]],[/\bsie-(\w*)/i],[s,[u,"Siemens"],[l,g]],[/\b(rct\w+) b/i],[s,[u,"RCA"],[l,p]],[/\b(venue[\d ]{2,7}) b/i],[s,[u,"Dell"],[l,p]],[/\b(q(?:mv|ta)\w+) b/i],[s,[u,"Verizon"],[l,p]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[s,[u,"Barnes & Noble"],[l,p]],[/\b(tm\d{3}\w+) b/i],[s,[u,"NuVision"],[l,p]],[/\b(k88) b/i],[s,[u,"ZTE"],[l,p]],[/\b(nx\d{3}j) b/i],[s,[u,"ZTE"],[l,g]],[/\b(gen\d{3}) b.+49h/i],[s,[u,"Swiss"],[l,g]],[/\b(zur\d{3}) b/i],[s,[u,"Swiss"],[l,p]],[/\b((zeki)?tb.*\b) b/i],[s,[u,"Zeki"],[l,p]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[u,"Dragon Touch"],s,[l,p]],[/\b(ns-?\w{0,9}) b/i],[s,[u,"Insignia"],[l,p]],[/\b((nxa|next)-?\w{0,9}) b/i],[s,[u,"NextBook"],[l,p]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[u,"Voice"],s,[l,g]],[/\b(lvtel\-)?(v1[12]) b/i],[[u,"LvTel"],s,[l,g]],[/\b(ph-1) /i],[s,[u,"Essential"],[l,g]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[s,[u,"Envizen"],[l,p]],[/\b(trio[-\w\. ]+) b/i],[s,[u,"MachSpeed"],[l,p]],[/\btu_(1491) b/i],[s,[u,"Rotor"],[l,p]],[/(shield[\w ]+) b/i],[s,[u,"Nvidia"],[l,p]],[/(sprint) (\w+)/i],[u,s,[l,g]],[/(kin\.[onetw]{3})/i],[[s,/\./g," "],[u,U],[l,g]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[s,[u,F],[l,p]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[s,[u,F],[l,g]],[/smart-tv.+(samsung)/i],[u,[l,m]],[/hbbtv.+maple;(\d+)/i],[[s,/^/,"SmartTV"],[u,z],[l,m]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[u,$],[l,m]],[/(apple) ?tv/i],[u,[s,C+" TV"],[l,m]],[/crkey/i],[[s,A+"cast"],[u,x],[l,m]],[/droid.+aft(\w)( bui|\))/i],[s,[u,S],[l,m]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[s,[u,L],[l,m]],[/(bravia[\w ]+)( bui|\))/i],[s,[u,D],[l,m]],[/(mitv-\w{5}) bui/i],[s,[u,j],[l,m]],[/Hbbtv.*(technisat) (.*);/i],[u,s,[l,m]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[u,ee],[s,ee],[l,m]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[l,m]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[u,s,[l,f]],[/droid.+; (shield) bui/i],[s,[u,"Nvidia"],[l,f]],[/(playstation [345portablevi]+)/i],[s,[u,D],[l,f]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[s,[u,U],[l,f]],[/((pebble))app/i],[u,s,[l,_]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[s,[u,C],[l,_]],[/droid.+; (glass) \d/i],[s,[u,x],[l,_]],[/droid.+; (wt63?0{2,3})\)/i],[s,[u,F],[l,_]],[/(quest( 2| pro)?)/i],[s,[u,y],[l,_]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[u,[l,E]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[s,[l,g]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[s,[l,p]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[l,p]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[l,g]],[/(android[-\w\. ]{0,9});.+buil/i],[s,[u,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[d,[c,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[d,[c,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[c,d],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[d,c]],os:[[/microsoft (windows) (vista|xp)/i],[c,d],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[c,[d,fe,ae]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[c,"Windows"],[d,fe,ae]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[d,/_/g,"."],[c,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[c,N],[d,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[d,c],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[c,d],[/\(bb(10);/i],[d,[c,T]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[d,[c,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[d,[c,O+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[d,[c,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[d,[c,"watchOS"]],[/crkey\/([\d\.]+)/i],[d,[c,A+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[c,I],d],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[c,d],[/(sunos) ?([\w\.\d]*)/i],[[c,"Solaris"],d],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[c,d]]},he=function(te,ge){if(typeof te===i&&(ge=te,te=t),!(this instanceof he))return new he(te,ge).getResult();var pe=typeof e!==r&&e.navigator?e.navigator:t,be=te||(pe&&pe.userAgent?pe.userAgent:""),Se=pe&&pe.userAgentData?pe.userAgentData:t,ue=ge?function(re,Re){var we={};for(var xe in re)Re[xe]&&Re[xe].length%2==0?we[xe]=Re[xe].concat(re[xe]):we[xe]=re[xe];return we}(oe,ge):oe;return this.getBrowser=function(){var re={};return re[c]=t,re[d]=t,ne.call(re,be,ue.browser),re[a]=function(Re){return typeof Re===o?Re.replace(/[^\d\.]/g,"").split(".")[0]:t}(re[d]),pe&&pe.brave&&typeof pe.brave.isBrave==n&&(re[c]="Brave"),re},this.getCPU=function(){var re={};return re[h]=t,ne.call(re,be,ue.cpu),re},this.getDevice=function(){var re={};return re[u]=t,re[s]=t,re[l]=t,ne.call(re,be,ue.device),!re[l]&&Se&&Se.mobile&&(re[l]=g),re[s]=="Macintosh"&&pe&&typeof pe.standalone!==r&&pe.maxTouchPoints&&pe.maxTouchPoints>2&&(re[s]="iPad",re[l]=p),re},this.getEngine=function(){var re={};return re[c]=t,re[d]=t,ne.call(re,be,ue.engine),re},this.getOS=function(){var re={};return re[c]=t,re[d]=t,ne.call(re,be,ue.os),!re[c]&&Se&&Se.platform!="Unknown"&&(re[c]=Se.platform.replace(/chrome os/i,I).replace(/macos/i,N)),re},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return be},this.setUA=function(re){return be=typeof re===o&&re.length>350?ee(re,350):re,this},this.setUA(be),this};he.VERSION="0.7.34",he.BROWSER=B([c,d,a]),he.CPU=B([h]),he.DEVICE=B([s,u,l,f,g,m,p,_,E]),he.ENGINE=he.OS=B([c,d]),f1.exports&&(p1=f1.exports=he),p1.UAParser=he;var me=typeof e!==r&&(e.jQuery||e.Zepto);if(me&&!me.ua){var ie=new he;me.ua=ie.getResult(),me.ua.get=function(){return ie.getUA()},me.ua.set=function(te){ie.setUA(te);var ge=ie.getResult();for(var pe in ge)me.ua[pe]=ge[pe]}}}(typeof window=="object"?window:mf);var tse=Kn(II.exports),nse=Dc,rse=oi,ise=op,ose=Wd,ase=Zn("iterator"),sse=Object,cse=function(e){if(ise(e))return!1;var t=sse(e);return t[ase]!==void 0||"@@iterator"in t||rse(ose,nse(t))},lse=Kn(cse),g1=Yr;ln({global:!0,forced:g1.globalThis!==g1},{globalThis:g1});var YL=Kn(Yr);function BH(e,t){return function(){return e.apply(t,arguments)}}const{toString:use}=Object.prototype,{getPrototypeOf:zx}=Object,q_=(v1=Object.create(null),e=>{const t=use.call(e);return v1[t]||(v1[t]=t.slice(8,-1).toLowerCase())});var v1;const kc=e=>(e=e.toLowerCase(),t=>q_(t)===e),Py=e=>t=>typeof t===e,{isArray:Mh}=Array,vm=Py("undefined"),XL=kc("ArrayBuffer"),dse=Py("string"),La=Py("function"),JL=Py("number"),Ev=e=>e!==null&&typeof e=="object",_v=e=>{if(q_(e)!=="object")return!1;const t=zx(e);return!(t!==null&&t!==Object.prototype&&Object.getPrototypeOf(t)!==null||Symbol.toStringTag in e||lse(e))},hse=kc("Date"),fse=kc("File"),pse=kc("Blob"),mse=kc("FileList"),gse=kc("URLSearchParams");function Em(e,t){let n,r,{allOwnKeys:i=!1}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(e!=null)if(typeof e!="object"&&(e=[e]),Mh(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{const o=i?Object.getOwnPropertyNames(e):Object.keys(e),a=o.length;let s;for(n=0;n<a;n++)s=o[n],t.call(null,e[s],s,e)}}function QL(e,t){t=t.toLowerCase();const n=Object.keys(e);let r,i=n.length;for(;i-- >0;)if(r=n[i],t===r.toLowerCase())return r;return null}const $H=YL!==void 0?YL:typeof self<"u"?self:typeof window<"u"?window:global,ZL=e=>!vm(e)&&e!==$H,vse=(E1=typeof Uint8Array<"u"&&zx(Uint8Array),e=>E1&&e instanceof E1);var E1;const Ese=kc("HTMLFormElement"),ek=(e=>{let{hasOwnProperty:t}=e;return(n,r)=>t.call(n,r)})(Object.prototype),_se=kc("RegExp"),tk=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};Em(n,(i,o)=>{let a;(a=t(i,o,e))!==!1&&(r[o]=a||i)}),Object.defineProperties(e,r)},_1="abcdefghijklmnopqrstuvwxyz",nk="0123456789",rk={DIGIT:nk,ALPHA:_1,ALPHA_DIGIT:_1+_1.toUpperCase()+nk},Sse=kc("AsyncFunction");var Ie={isArray:Mh,isArrayBuffer:XL,isBuffer:function(e){return e!==null&&!vm(e)&&e.constructor!==null&&!vm(e.constructor)&&La(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||La(e.append)&&((t=q_(e))==="formdata"||t==="object"&&La(e.toString)&&e.toString()==="[object FormData]"))},isArrayBufferView:function(e){let t;return t=typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&XL(e.buffer),t},isString:dse,isNumber:JL,isBoolean:e=>e===!0||e===!1,isObject:Ev,isPlainObject:_v,isUndefined:vm,isDate:hse,isFile:fse,isBlob:pse,isRegExp:_se,isFunction:La,isStream:e=>Ev(e)&&La(e.pipe),isURLSearchParams:gse,isTypedArray:vse,isFileList:mse,forEach:Em,merge:function e(){const{caseless:t}=ZL(this)&&this||{},n={},r=(i,o)=>{const a=t&&QL(n,o)||o;_v(n[a])&&_v(i)?n[a]=e(n[a],i):_v(i)?n[a]=e({},i):Mh(i)?n[a]=i.slice():n[a]=i};for(let i=0,o=arguments.length;i<o;i++)arguments[i]&&Em(arguments[i],r);return n},extend:function(e,t,n){let{allOwnKeys:r}=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return Em(t,(i,o)=>{n&&La(i)?e[o]=BH(i,n):e[o]=i},{allOwnKeys:r}),e},trim:e=>yi(e)?yi(e).call(e):e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let i,o,a;const s={};if(t=t||{},e==null)return t;do{for(i=Object.getOwnPropertyNames(e),o=i.length;o-- >0;)a=i[o],r&&!r(a,e,t)||s[a]||(t[a]=e[a],s[a]=!0);e=n!==!1&&zx(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:q_,kindOfTest:kc,endsWith:(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},toArray:e=>{if(!e)return null;if(Mh(e))return e;let t=e.length;if(!JL(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let r;for(;(r=n.next())&&!r.done;){const i=r.value;t.call(e,i[0],i[1])}},matchAll:(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},isHTMLForm:Ese,hasOwnProperty:ek,hasOwnProp:ek,reduceDescriptors:tk,freezeMethods:e=>{tk(e,(t,n)=>{if(La(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];La(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))})},toObjectSet:(e,t)=>{const n={},r=i=>{i.forEach(o=>{n[o]=!0})};return Mh(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,n,r){return n.toUpperCase()+r}),noop:()=>{},toFiniteNumber:(e,t)=>(e=+e,Number.isFinite(e)?e:t),findKey:QL,global:$H,isContextDefined:ZL,ALPHABET:rk,generateString:function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:16,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:rk.ALPHA_DIGIT,n="";const{length:r}=t;for(;e--;)n+=t[Math.random()*r|0];return n},isSpecCompliantForm:function(e){return!!(e&&La(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),n=(r,i)=>{if(Ev(r)){if(t.indexOf(r)>=0)return;if(!("toJSON"in r)){t[i]=r;const o=Mh(r)?[]:{};return Em(r,(a,s)=>{const c=n(a,i+1);!vm(c)&&(o[s]=c)}),t[i]=void 0,o}}return r};return n(e,0)},isAsyncFn:Sse,isThenable:e=>e&&(Ev(e)||La(e))&&La(e.then)&&La(e.catch)};function In(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}Ie.inherits(In,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ie.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const ik=In.prototype,ok={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{ok[e]={value:e}}),Object.defineProperties(In,ok),Object.defineProperty(ik,"isAxiosError",{value:!0}),In.from=(e,t,n,r,i,o)=>{const a=Object.create(ik);return Ie.toFlatObject(e,a,function(s){return s!==Error.prototype},s=>s!=="isAxiosError"),In.call(a,e.message,t,n,r,i),a.cause=e,a.name=e.name,o&&Object.assign(a,o),a};function S1(e){return Ie.isPlainObject(e)||Ie.isArray(e)}function VH(e){return Ie.endsWith(e,"[]")?e.slice(0,-2):e}function ak(e,t,n){return e?e.concat(t).map(function(r,i){return r=VH(r),!n&&i?"["+r+"]":r}).join(n?".":""):t}const yse=Ie.toFlatObject(Ie,{},null,function(e){return/^is[A-Z]/.test(e)});function Y_(e,t,n){if(!Ie.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=Ie.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(h,f){return!Ie.isUndefined(f[h])})).metaTokens,i=n.visitor||l,o=n.dots,a=n.indexes,s=(n.Blob||typeof Blob<"u"&&Blob)&&Ie.isSpecCompliantForm(t);if(!Ie.isFunction(i))throw new TypeError("visitor must be a function");function c(h){if(h===null)return"";if(Ie.isDate(h))return h.toISOString();if(!s&&Ie.isBlob(h))throw new In("Blob is not supported. Use a Buffer instead.");return Ie.isArrayBuffer(h)||Ie.isTypedArray(h)?s&&typeof Blob=="function"?new Blob([h]):Buffer.from(h):h}function l(h,f,g){let p=h;if(h&&!g&&typeof h=="object"){if(Ie.endsWith(f,"{}"))f=r?f:f.slice(0,-2),h=JSON.stringify(h);else if(Ie.isArray(h)&&function(m){return Ie.isArray(m)&&!m.some(S1)}(h)||(Ie.isFileList(h)||Ie.endsWith(f,"[]"))&&(p=Ie.toArray(h)))return f=VH(f),p.forEach(function(m,_){!Ie.isUndefined(m)&&m!==null&&t.append(a===!0?ak([f],_,o):a===null?f:f+"[]",c(m))}),!1}return!!S1(h)||(t.append(ak(g,f,o),c(h)),!1)}const u=[],d=Object.assign(yse,{defaultVisitor:l,convertValue:c,isVisitable:S1});if(!Ie.isObject(e))throw new TypeError("data must be an object");return function h(f,g){if(!Ie.isUndefined(f)){if(u.indexOf(f)!==-1)throw Error("Circular reference detected in "+g.join("."));u.push(f),Ie.forEach(f,function(p,m){(!(Ie.isUndefined(p)||p===null)&&i.call(t,p,Ie.isString(m)?yi(m).call(m):m,g,d))===!0&&h(p,g?g.concat(m):[m])}),u.pop()}}(e),t}function sk(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function Wx(e,t){this._pairs=[],e&&Y_(e,this,t)}const ck=Wx.prototype;function Cse(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function jH(e,t,n){if(!t)return e;const r=n&&n.encode||Cse,i=n&&n.serialize;let o;if(o=i?i(t,n):Ie.isURLSearchParams(t)?t.toString():new Wx(t,n).toString(r),o){const a=e.indexOf("#");a!==-1&&(e=e.slice(0,a)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e}ck.append=function(e,t){this._pairs.push([e,t])},ck.toString=function(e){const t=e?function(n){return e.call(this,n,sk)}:sk;return this._pairs.map(function(n){return t(n[0])+"="+t(n[1])},"").join("&")};var lk=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Ie.forEach(this.handlers,function(t){t!==null&&e(t)})}},HH={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},zH={exports:{}},bse=ln,Tse=Ta,uk=ds.f;bse({target:"Object",stat:!0,forced:Object.defineProperty!==uk,sham:!Tse},{defineProperty:uk});var WH=Ks.Object,Rse=zH.exports=function(e,t,n){return WH.defineProperty(e,t,n)};WH.defineProperty.sham&&(Rse.sham=!0);var GH=Kn(zH.exports),wse=Nc,Ng=Array.isArray||function(e){return wse(e)=="Array"},Ise=TypeError,dk=Ng,Ase=Ay,Ose=na,xse=Zn("species"),hk=Array,Nse=function(e){var t;return dk(e)&&(t=e.constructor,(Ase(t)&&(t===hk||dk(t.prototype))||Ose(t)&&(t=t[xse])===null)&&(t=void 0)),t===void 0?hk:t},KH=function(e,t){return new(Nse(e))(t===0?0:t)},Pse=hr,Dse=wd,Lse=Zn("species"),qH=function(e){return Dse>=51||!Pse(function(){var t=[];return(t.constructor={})[Lse]=function(){return{foo:1}},t[e](Boolean).foo!==1})},kse=ln,Mse=hr,Fse=Ng,Use=na,Bse=Pc,$se=vl,fk=function(e){if(e>9007199254740991)throw Ise("Maximum allowed index exceeded");return e},pk=Ny,Vse=KH,jse=qH,Hse=wd,YH=Zn("isConcatSpreadable"),zse=Hse>=51||!Mse(function(){var e=[];return e[YH]=!1,e.concat()[0]!==e}),Wse=function(e){if(!Use(e))return!1;var t=e[YH];return t!==void 0?!!t:Fse(e)};kse({target:"Array",proto:!0,arity:1,forced:!zse||!jse("concat")},{concat:function(e){var t,n,r,i,o,a=Bse(this),s=Vse(a,0),c=0;for(t=-1,r=arguments.length;t<r;t++)if(Wse(o=t===-1?a:arguments[t]))for(i=$se(o),fk(c+i),n=0;n<i;n++,c++)n in o&&pk(s,c,o[n]);else fk(c+1),pk(s,c++,o);return s.length=c,s}});var XH={},Gse=Nc,Kse=Tu,mk=by.f,qse=jx,gk=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];XH.f=function(e){return gk&&Gse(e)=="Window"?function(t){try{return mk(t)}catch{return qse(gk)}}(e):mk(Kse(e))};var dp={},Yse=Zn;dp.f=Yse;var vk=Ks,Xse=oi,Jse=dp,Qse=ds.f,Hr=function(e){var t=vk.Symbol||(vk.Symbol={});Xse(t,e)||Qse(t,e,{value:Jse.f(e)})},Zse=Jr,ece=Lo,tce=Zn,nce=Iu,JH=function(){var e=ece("Symbol"),t=e&&e.prototype,n=t&&t.valueOf,r=tce("toPrimitive");t&&!t[r]&&nce(t,r,function(i){return Zse(n,this)},{arity:1})},rce=Ru,ice=Ey,oce=Pc,ace=vl,sce=KH,Ek=cr([].push),Rl=function(e){var t=e==1,n=e==2,r=e==3,i=e==4,o=e==6,a=e==7,s=e==5||o;return function(c,l,u,d){for(var h,f,g=oce(c),p=ice(g),m=rce(l,u),_=ace(p),E=0,S=d||sce,C=t?S(c,_):n||a?S(c,0):void 0;_>E;E++)if((s||E in p)&&(f=m(h=p[E],E,g),e))if(t)C[E]=f;else if(f)switch(e){case 3:return!0;case 5:return h;case 6:return E;case 2:Ek(C,h)}else switch(e){case 4:return!1;case 7:Ek(C,h)}return o?-1:r||i?i:C}},QH={forEach:Rl(0),map:Rl(1),filter:Rl(2),some:Rl(3),every:Rl(4),find:Rl(5),findIndex:Rl(6),filterReject:Rl(7)},Sv=ln,Gx=Yr,Kx=Jr,cce=cr,Ef=Ta,fh=sp,lce=hr,Di=oi,uce=Fi,AI=_o,Dy=Tu,qx=Sy,dce=Ra,OI=bu,g0=wg,ZH=Ry,hce=by,e7=XH,fce=Rg,t7=yg,n7=ds,pce=Ox,r7=vy,_k=Iu,mce=Iy,Yx=lp,i7=Ty,Sk=Sx,gce=Zn,vce=dp,Ece=Hr,_ce=JH,Sce=Au,o7=Gd,Ly=QH.forEach,Ho=Cy("hidden"),X_="Symbol",v0="prototype",yce=o7.set,yk=o7.getterFor(X_),ks=Object[v0],zh=Gx.Symbol,t_=zh&&zh[v0],Cce=Gx.TypeError,y1=Gx.QObject,a7=t7.f,Qu=n7.f,s7=e7.f,bce=r7.f,c7=cce([].push),ll=Yx("symbols"),Pg=Yx("op-symbols"),Tce=Yx("wks"),C1=!y1||!y1[v0]||!y1[v0].findChild,xI=Ef&&lce(function(){return g0(Qu({},"a",{get:function(){return Qu(this,"a",{value:7}).a}})).a!=7})?function(e,t,n){var r=a7(ks,t);r&&delete ks[t],Qu(e,t,n),r&&e!==ks&&Qu(ks,t,r)}:Qu,b1=function(e,t){var n=ll[e]=g0(t_);return yce(n,{type:X_,tag:e,description:t}),Ef||(n.description=t),n},J_=function(e,t,n){e===ks&&J_(Pg,t,n),AI(e);var r=qx(t);return AI(n),Di(ll,r)?(n.enumerable?(Di(e,Ho)&&e[Ho][r]&&(e[Ho][r]=!1),n=g0(n,{enumerable:OI(0,!1)})):(Di(e,Ho)||Qu(e,Ho,OI(1,{})),e[Ho][r]=!0),xI(e,r,n)):Qu(e,r,n)},T1=function(e,t){AI(e);var n=Dy(t),r=ZH(n).concat(u7(n));return Ly(r,function(i){Ef&&!Kx(l7,n,i)||J_(e,i,n[i])}),e},l7=function(e){var t=qx(e),n=Kx(bce,this,t);return!(this===ks&&Di(ll,t)&&!Di(Pg,t))&&(!(n||!Di(this,t)||!Di(ll,t)||Di(this,Ho)&&this[Ho][t])||n)},Ck=function(e,t){var n=Dy(e),r=qx(t);if(n!==ks||!Di(ll,r)||Di(Pg,r)){var i=a7(n,r);return!i||!Di(ll,r)||Di(n,Ho)&&n[Ho][r]||(i.enumerable=!0),i}},bk=function(e){var t=s7(Dy(e)),n=[];return Ly(t,function(r){Di(ll,r)||Di(i7,r)||c7(n,r)}),n},u7=function(e){var t=e===ks,n=s7(t?Pg:Dy(e)),r=[];return Ly(n,function(i){!Di(ll,i)||t&&!Di(ks,i)||c7(r,ll[i])}),r};fh||(_k(t_=(zh=function(){if(uce(t_,this))throw Cce("Symbol is not a constructor");var e=arguments.length&&arguments[0]!==void 0?dce(arguments[0]):void 0,t=Sk(e),n=function(r){this===ks&&Kx(n,Pg,r),Di(this,Ho)&&Di(this[Ho],t)&&(this[Ho][t]=!1),xI(this,t,OI(1,r))};return Ef&&C1&&xI(ks,t,{configurable:!0,set:n}),b1(t,e)})[v0],"toString",function(){return yk(this).tag}),_k(zh,"withoutSetter",function(e){return b1(Sk(e),e)}),r7.f=l7,n7.f=J_,pce.f=T1,t7.f=Ck,hce.f=e7.f=bk,fce.f=u7,vce.f=function(e){return b1(gce(e),e)},Ef&&mce(t_,"description",{configurable:!0,get:function(){return yk(this).description}})),Sv({global:!0,constructor:!0,wrap:!0,forced:!fh,sham:!fh},{Symbol:zh}),Ly(ZH(Tce),function(e){Ece(e)}),Sv({target:X_,stat:!0,forced:!fh},{useSetter:function(){C1=!0},useSimple:function(){C1=!1}}),Sv({target:"Object",stat:!0,forced:!fh,sham:!Ef},{create:function(e,t){return t===void 0?g0(e):T1(g0(e),t)},defineProperty:J_,defineProperties:T1,getOwnPropertyDescriptor:Ck}),Sv({target:"Object",stat:!0,forced:!fh},{getOwnPropertyNames:bk}),_ce(),Sce(zh,X_),i7[Ho]=!0;var d7=sp&&!!Symbol.for&&!!Symbol.keyFor,Rce=ln,wce=Lo,Ice=oi,Ace=Ra,h7=lp,Oce=d7,R1=h7("string-to-symbol-registry"),xce=h7("symbol-to-string-registry");Rce({target:"Symbol",stat:!0,forced:!Oce},{for:function(e){var t=Ace(e);if(Ice(R1,t))return R1[t];var n=wce("Symbol")(t);return R1[t]=n,xce[n]=t,n}});var Nce=ln,Pce=oi,Dce=Cg,Lce=cp,kce=d7,Tk=lp("symbol-to-string-registry");Nce({target:"Symbol",stat:!0,forced:!kce},{keyFor:function(e){if(!Dce(e))throw TypeError(Lce(e)+" is not a symbol");if(Pce(Tk,e))return Tk[e]}});var Rk=Ng,Mce=Xr,wk=Nc,Fce=Ra,Ik=cr([].push),Uce=ln,f7=Lo,p7=Ex,Bce=Jr,Dg=cr,m7=hr,Ak=Xr,Ok=Cg,g7=Mx,$ce=function(e){if(Mce(e))return e;if(Rk(e)){for(var t=e.length,n=[],r=0;r<t;r++){var i=e[r];typeof i=="string"?Ik(n,i):typeof i!="number"&&wk(i)!="Number"&&wk(i)!="String"||Ik(n,Fce(i))}var o=n.length,a=!0;return function(s,c){if(a)return a=!1,c;if(Rk(this))return c;for(var l=0;l<o;l++)if(n[l]===s)return c}}},Vce=sp,jce=String,iu=f7("JSON","stringify"),yv=Dg(/./.exec),xk=Dg("".charAt),Hce=Dg("".charCodeAt),zce=Dg("".replace),Wce=Dg(1 .toString),Gce=/[\uD800-\uDFFF]/g,Nk=/^[\uD800-\uDBFF]$/,Pk=/^[\uDC00-\uDFFF]$/,Dk=!Vce||m7(function(){var e=f7("Symbol")();return iu([e])!="[null]"||iu({a:e})!="{}"||iu(Object(e))!="{}"}),Lk=m7(function(){return iu("\uDF06\uD834")!=='"\\udf06\\ud834"'||iu("\uDEAD")!=='"\\udead"'}),Kce=function(e,t){var n=g7(arguments),r=$ce(t);if(Ak(r)||e!==void 0&&!Ok(e))return n[1]=function(i,o){if(Ak(r)&&(o=Bce(r,this,jce(i),o)),!Ok(o))return o},p7(iu,null,n)},qce=function(e,t,n){var r=xk(n,t-1),i=xk(n,t+1);return yv(Nk,e)&&!yv(Pk,i)||yv(Pk,e)&&!yv(Nk,r)?"\\u"+Wce(Hce(e,0),16):e};iu&&Uce({target:"JSON",stat:!0,arity:3,forced:Dk||Lk},{stringify:function(e,t,n){var r=g7(arguments),i=p7(Dk?Kce:iu,null,r);return Lk&&typeof i=="string"?zce(i,Gce,qce):i}});var kk=Rg,Yce=Pc;ln({target:"Object",stat:!0,forced:!sp||hr(function(){kk.f(1)})},{getOwnPropertySymbols:function(e){var t=kk.f;return t?t(Yce(e)):[]}}),Hr("asyncIterator"),Hr("hasInstance"),Hr("isConcatSpreadable"),Hr("iterator"),Hr("match"),Hr("matchAll"),Hr("replace"),Hr("search"),Hr("species"),Hr("split");var Xce=JH;Hr("toPrimitive"),Xce();var Jce=Lo,Qce=Au;Hr("toStringTag"),Qce(Jce("Symbol"),"Symbol"),Hr("unscopables"),Au(Yr.JSON,"JSON",!0);var Zce=Ks.Symbol,ele=Zn,tle=ds.f,Mk=ele("metadata"),Fk=Function.prototype;Fk[Mk]===void 0&&tle(Fk,Mk,{value:null}),Hr("dispose"),Hr("metadata");var nle=Zce;Hr("asyncDispose");var rle=cr,Xx=Lo("Symbol"),ile=Xx.keyFor,ole=rle(Xx.prototype.valueOf),v7=Xx.isRegisteredSymbol||function(e){try{return ile(ole(e))!==void 0}catch{return!1}};ln({target:"Symbol",stat:!0},{isRegisteredSymbol:v7});for(var ale=lp,Uk=Lo,sle=cr,cle=Cg,lle=Zn,Cv=Uk("Symbol"),Bk=Cv.isWellKnownSymbol,E7=Uk("Object","getOwnPropertyNames"),ule=sle(Cv.prototype.valueOf),$k=ale("wks"),w1=0,Vk=E7(Cv),dle=Vk.length;w1<dle;w1++)try{var jk=Vk[w1];cle(Cv[jk])&&lle(jk)}catch{}var Hk=function(e){if(Bk&&Bk(e))return!0;try{for(var t=ule(e),n=0,r=E7($k),i=r.length;n<i;n++)if($k[r[n]]==t)return!0}catch{}return!1};ln({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:Hk}),Hr("matcher"),Hr("observable"),ln({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:v7}),ln({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:Hk}),Hr("metadataKey"),Hr("patternMatch"),Hr("replaceAll");var Wh=Kn(nle),_7=Kn(dp.f("iterator"));function Bm(e){return Bm=typeof Wh=="function"&&typeof _7=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Wh=="function"&&t.constructor===Wh&&t!==Wh.prototype?"symbol":typeof t},Bm(e)}var hle=Kn(dp.f("toPrimitive"));function fle(e){var t=function(n,r){if(Bm(n)!=="object"||n===null)return n;var i=n[hle];if(i!==void 0){var o=i.call(n,r||"default");if(Bm(o)!=="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(n)}(e,"string");return Bm(t)==="symbol"?t:String(t)}function P(e,t,n){return(t=fle(t))in e?GH(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ple=hr,mle=Zn("iterator"),Jx=!ple(function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,n=new URLSearchParams("a=1&a=2"),r="";return e.pathname="c%20d",t.forEach(function(i,o){t.delete("b"),r+=o+i}),n.delete("a",2),!e.toJSON||!n.has("a",1)||n.has("a",2)||!t.size&&!0||!t.sort||e.href!=="http://a/c%20d?a=1&c=3"||t.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!t[mle]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("http://тест").host!=="xn--e1aybc"||new URL("http://a#б").hash!=="#%D0%B1"||r!=="a1c3"||new URL("http://x",void 0).host!=="x"}),gle=Iu,I1=ln,Lf=Yr,bv=Jr,Ic=cr,Gh=Ta,zk=Jx,Wk=Iu,vle=Iy,Ele=function(e,t,n){for(var r in t)n&&n.unsafe&&e[r]?e[r]=t[r]:gle(e,r,t[r],n);return e},_le=Au,Sle=Nx,Qx=Gd,S7=Dx,A1=Xr,yle=oi,Cle=Ru,ble=Dc,Tle=_o,y7=na,Ro=Ra,Rle=wg,Gk=bu,NI=xx,wle=wy,ph=Oy,Ile=FH,Ale=Zn("iterator"),E0="URLSearchParams",C7=E0+"Iterator",b7=Qx.set,Ka=Qx.getterFor(E0),Ole=Qx.getterFor(C7),xle=Object.getOwnPropertyDescriptor,Zx=function(e){if(!Gh)return Lf[e];var t=xle(Lf,e);return t&&t.value},Kk=Zx("fetch"),Q_=Zx("Request"),$m=Zx("Headers"),O1=Q_&&Q_.prototype,qk=$m&&$m.prototype,Nle=Lf.RegExp,Ple=Lf.TypeError,T7=Lf.decodeURIComponent,Dle=Lf.encodeURIComponent,Lle=Ic("".charAt),Yk=Ic([].join),rd=Ic([].push),PI=Ic("".replace),kle=Ic([].shift),Xk=Ic([].splice),Jk=Ic("".split),Mle=Ic("".slice),Fle=/\+/g,Qk=Array(4),Ule=function(e){return Qk[e-1]||(Qk[e-1]=Nle("((?:%[\\da-f]{2}){"+e+"})","gi"))},Ble=function(e){try{return T7(e)}catch{return e}},Zk=function(e){var t=PI(e,Fle," "),n=4;try{return T7(t)}catch{for(;n;)t=PI(t,Ule(n--),Ble);return t}},$le=/[!'()~]|%20/g,Vle={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},jle=function(e){return Vle[e]},eM=function(e){return PI(Dle(e),$le,jle)},x1=Sle(function(e,t){b7(this,{type:C7,iterator:NI(Ka(e).entries),kind:t})},"Iterator",function(){var e=Ole(this),t=e.kind,n=e.iterator.next(),r=n.value;return n.done||(n.value=t==="keys"?r.key:t==="values"?r.value:[r.key,r.value]),n},!0),R7=function(e){this.entries=[],this.url=null,e!==void 0&&(y7(e)?this.parseObject(e):this.parseQuery(typeof e=="string"?Lle(e,0)==="?"?Mle(e,1):e:Ro(e)))};R7.prototype={type:E0,bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t,n,r,i,o,a,s,c=wle(e);if(c)for(n=(t=NI(e,c)).next;!(r=bv(n,t)).done;){if(o=(i=NI(Tle(r.value))).next,(a=bv(o,i)).done||(s=bv(o,i)).done||!bv(o,i).done)throw Ple("Expected sequence with length 2");rd(this.entries,{key:Ro(a.value),value:Ro(s.value)})}else for(var l in e)yle(e,l)&&rd(this.entries,{key:l,value:Ro(e[l])})},parseQuery:function(e){if(e)for(var t,n,r=Jk(e,"&"),i=0;i<r.length;)(t=r[i++]).length&&(n=Jk(t,"="),rd(this.entries,{key:Zk(kle(n)),value:Zk(Yk(n,"="))}))},serialize:function(){for(var e,t=this.entries,n=[],r=0;r<t.length;)e=t[r++],rd(n,eM(e.key)+"="+eM(e.value));return Yk(n,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var Z_=function(){S7(this,Fh);var e=b7(this,new R7(arguments.length>0?arguments[0]:void 0));Gh||(this.size=e.entries.length)},Fh=Z_.prototype;if(Ele(Fh,{append:function(e,t){var n=Ka(this);ph(arguments.length,2),rd(n.entries,{key:Ro(e),value:Ro(t)}),Gh||this.length++,n.updateURL()},delete:function(e){for(var t=Ka(this),n=ph(arguments.length,1),r=t.entries,i=Ro(e),o=n<2?void 0:arguments[1],a=o===void 0?o:Ro(o),s=0;s<r.length;){var c=r[s];if(c.key!==i||a!==void 0&&c.value!==a)s++;else if(Xk(r,s,1),a!==void 0)break}Gh||(this.size=r.length),t.updateURL()},get:function(e){var t=Ka(this).entries;ph(arguments.length,1);for(var n=Ro(e),r=0;r<t.length;r++)if(t[r].key===n)return t[r].value;return null},getAll:function(e){var t=Ka(this).entries;ph(arguments.length,1);for(var n=Ro(e),r=[],i=0;i<t.length;i++)t[i].key===n&&rd(r,t[i].value);return r},has:function(e){for(var t=Ka(this).entries,n=ph(arguments.length,1),r=Ro(e),i=n<2?void 0:arguments[1],o=i===void 0?i:Ro(i),a=0;a<t.length;){var s=t[a++];if(s.key===r&&(o===void 0||s.value===o))return!0}return!1},set:function(e,t){var n=Ka(this);ph(arguments.length,1);for(var r,i=n.entries,o=!1,a=Ro(e),s=Ro(t),c=0;c<i.length;c++)(r=i[c]).key===a&&(o?Xk(i,c--,1):(o=!0,r.value=s));o||rd(i,{key:a,value:s}),Gh||(this.size=i.length),n.updateURL()},sort:function(){var e=Ka(this);Ile(e.entries,function(t,n){return t.key>n.key?1:-1}),e.updateURL()},forEach:function(e){for(var t,n=Ka(this).entries,r=Cle(e,arguments.length>1?arguments[1]:void 0),i=0;i<n.length;)r((t=n[i++]).value,t.key,this)},keys:function(){return new x1(this,"keys")},values:function(){return new x1(this,"values")},entries:function(){return new x1(this,"entries")}},{enumerable:!0}),Wk(Fh,Ale,Fh.entries,{name:"entries"}),Wk(Fh,"toString",function(){return Ka(this).serialize()},{enumerable:!0}),Gh&&vle(Fh,"size",{get:function(){return Ka(this).entries.length},configurable:!0,enumerable:!0}),_le(Z_,E0),I1({global:!0,constructor:!0,forced:!zk},{URLSearchParams:Z_}),!zk&&A1($m)){var Hle=Ic(qk.has),zle=Ic(qk.set),tM=function(e){if(y7(e)){var t,n=e.body;if(ble(n)===E0)return t=e.headers?new $m(e.headers):new $m,Hle(t,"content-type")||zle(t,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),Rle(e,{body:Gk(0,Ro(n)),headers:Gk(0,t)})}return e};if(A1(Kk)&&I1({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(e){return Kk(e,arguments.length>1?tM(arguments[1]):{})}}),A1(Q_)){var N1=function(e){return S7(this,O1),new Q_(e,arguments.length>1?tM(arguments[1]):{})};O1.constructor=N1,N1.prototype=O1,I1({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:N1})}}var Wle={URLSearchParams:Z_,getState:Ka},nM=Kn(Ks.URLSearchParams),Gle={isBrowser:!0,classes:{URLSearchParams:nM!==void 0?nM:Wx,FormData:typeof FormData<"u"?FormData:null,Blob:typeof Blob<"u"?Blob:null},protocols:["http","https","file","blob","url","data"]};const w7=typeof window<"u"&&typeof document<"u",Kle=(rM=typeof navigator<"u"&&navigator.product,w7&&["ReactNative","NativeScript","NS"].indexOf(rM)<0);var rM;const qle=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function";function iM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function oM(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?iM(Object(n),!0).forEach(function(r){P(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var vc=oM(oM({},Object.freeze({__proto__:null,hasBrowserEnv:w7,hasStandardBrowserEnv:Kle,hasStandardBrowserWebWorkerEnv:qle})),Gle),Yle=_o,Xle=Jr,Jle=oi,Qle=Fi,Zle=function(){var e=Yle(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t},aM=RegExp.prototype,I7=function(e){var t=e.flags;return t!==void 0||"flags"in aM||Jle(e,"flags")||!Qle(aM,e)?t:Xle(Zle,e)},eue=Vx.charAt,sM=Jr,tue=_o,nue=Xr,rue=Nc,iue=/./.exec,oue=TypeError,aue=ln,cM=Jr,A7=p0,sue=Nx,Tv=Px,lM=ap,O7=aj,_0=Ra,cue=_o,lue=op,uue=Nc,due=sj,x7=I7,hue=_y,fue=hr,pue=kx,mue=function(e,t,n){return t+(n?eue(e,t).length:1)},gue=function(e,t){var n=e.exec;if(nue(n)){var r=sM(n,e,t);return r!==null&&tue(r),r}if(rue(e)==="RegExp")return sM(iue,e,t);throw oue("RegExp#exec called on incompatible receiver")},N7=Gd,vue=Zn("matchAll"),P7="RegExp String",D7=P7+" Iterator",Eue=N7.set,_ue=N7.getterFor(D7),Sue=TypeError,DI=A7("".indexOf),eS=A7("".matchAll),P1=!!eS&&!fue(function(){eS("a",/./)}),yue=sue(function(e,t,n,r){Eue(this,{type:D7,regexp:e,string:t,global:n,unicode:r,done:!1})},P7,function(){var e=_ue(this);if(e.done)return Tv(void 0,!0);var t=e.regexp,n=e.string,r=gue(t,n);return r===null?(e.done=!0,Tv(void 0,!0)):e.global?(_0(r[0])===""&&(t.lastIndex=mue(n,O7(t.lastIndex),e.unicode)),Tv(r,!1)):(e.done=!0,Tv(r,!1))}),uM=function(e){var t,n,r,i=cue(this),o=_0(e),a=pue(i,RegExp),s=_0(x7(i));return t=new a(a===RegExp?i.source:i,s),n=!!~DI(s,"g"),r=!!~DI(s,"u"),t.lastIndex=O7(i.lastIndex),new yue(t,o,n,r)};aue({target:"String",proto:!0,forced:P1},{matchAll:function(e){var t,n,r,i,o=lM(this);if(lue(e)){if(P1)return eS(o,e)}else{if(due(e)&&(t=_0(lM(x7(e))),!~DI(t,"g")))throw Sue("`.matchAll` does not allow non-global regexes");if(P1)return eS(o,e);if((r=hue(e,vue))===void 0&&uue(e)=="RegExp"&&(r=uM),r)return cM(r,e,o)}return n=_0(o),i=new RegExp(e,"g"),cM(uM,i,n)}});var Cue=hs("String").matchAll,bue=Fi,Tue=Cue,D1=String.prototype,Rue=function(e){var t=e.matchAll;return typeof e=="string"||e===D1||bue(D1,e)&&t===D1.matchAll?Tue:t},wue=Kn(Rue);function L7(e){function t(n,r,i,o){let a=n[o++];if(a==="__proto__")return!0;const s=Number.isFinite(+a),c=o>=n.length;return a=!a&&Ie.isArray(i)?i.length:a,c?(Ie.hasOwnProp(i,a)?i[a]=[i[a],r]:i[a]=r,!s):(i[a]&&Ie.isObject(i[a])||(i[a]=[]),t(n,r,i[a],o)&&Ie.isArray(i[a])&&(i[a]=function(l){const u={},d=Object.keys(l);let h;const f=d.length;let g;for(h=0;h<f;h++)g=d[h],u[g]=l[g];return u}(i[a])),!s)}if(Ie.isFormData(e)&&Ie.isFunction(e.entries)){const n={};return Ie.forEachEntry(e,(r,i)=>{t(function(o){return wue(Ie).call(Ie,/\w+|\[(\w*)]/g,o).map(a=>a[0]==="[]"?"":a[1]||a[0])}(r),i,n,0)}),n}return null}const eN={transitional:HH,adapter:["xhr","http"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,i=Ie.isObject(e);if(i&&Ie.isHTMLForm(e)&&(e=new FormData(e)),Ie.isFormData(e))return r?JSON.stringify(L7(e)):e;if(Ie.isArrayBuffer(e)||Ie.isBuffer(e)||Ie.isStream(e)||Ie.isFile(e)||Ie.isBlob(e))return e;if(Ie.isArrayBufferView(e))return e.buffer;if(Ie.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(a,s){return Y_(a,new vc.classes.URLSearchParams,Object.assign({visitor:function(c,l,u,d){return vc.isNode&&Ie.isBuffer(c)?(this.append(l,c.toString("base64")),!1):d.defaultVisitor.apply(this,arguments)}},s))}(e,this.formSerializer).toString();if((o=Ie.isFileList(e))||n.indexOf("multipart/form-data")>-1){const a=this.env&&this.env.FormData;return Y_(o?{"files[]":e}:e,a&&new a,this.formSerializer)}}return i||r?(t.setContentType("application/json",!1),function(a,s,c){if(Ie.isString(a))try{return(s||JSON.parse)(a),yi(Ie).call(Ie,a)}catch(l){if(l.name!=="SyntaxError")throw l}return(c||JSON.stringify)(a)}(e)):e}],transformResponse:[function(e){const t=this.transitional||eN.transitional,n=t&&t.forcedJSONParsing,r=this.responseType==="json";if(e&&Ie.isString(e)&&(n&&!this.responseType||r)){const i=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(o){if(i)throw o.name==="SyntaxError"?In.from(o,In.ERR_BAD_RESPONSE,this,null,this.response):o}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:vc.classes.FormData,Blob:vc.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Ie.forEach(["delete","get","head","post","put","patch"],e=>{eN.headers[e]={}});var tN=eN;const Iue=Ie.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),dM=Symbol("internals");function $p(e){var t;return e&&yi(t=String(e)).call(t).toLowerCase()}function n_(e){return e===!1||e==null?e:Ie.isArray(e)?e.map(n_):String(e)}function L1(e,t,n,r,i){return Ie.isFunction(r)?r.call(this,t,n):(i&&(t=n),Ie.isString(t)?Ie.isString(r)?t.indexOf(r)!==-1:Ie.isRegExp(r)?r.test(t):void 0:void 0)}class r_{constructor(t){t&&this.set(t)}set(t,n,r){const i=this;function o(c,l,u){const d=$p(l);if(!d)throw new Error("header name must be a non-empty string");const h=Ie.findKey(i,d);(!h||i[h]===void 0||u===!0||u===void 0&&i[h]!==!1)&&(i[h||l]=n_(c))}const a=(c,l)=>Ie.forEach(c,(u,d)=>o(u,d,l));var s;return Ie.isPlainObject(t)||t instanceof this.constructor?a(t,n):Ie.isString(t)&&(t=yi(t).call(t))&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(yi(s=t).call(s))?a((c=>{const l={};let u,d,h;return c&&c.split(`
`).forEach(function(f){var g,p;h=f.indexOf(":"),u=yi(g=f.substring(0,h)).call(g).toLowerCase(),d=yi(p=f.substring(h+1)).call(p),!u||l[u]&&Iue[u]||(u==="set-cookie"?l[u]?l[u].push(d):l[u]=[d]:l[u]=l[u]?l[u]+", "+d:d)}),l})(t),n):t!=null&&o(n,t,r),this}get(t,n){if(t=$p(t)){const r=Ie.findKey(this,t);if(r){const i=this[r];if(!n)return i;if(n===!0)return function(o){const a=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let c;for(;c=s.exec(o);)a[c[1]]=c[2];return a}(i);if(Ie.isFunction(n))return n.call(this,i,r);if(Ie.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=$p(t)){const r=Ie.findKey(this,t);return!(!r||this[r]===void 0||n&&!L1(0,this[r],r,n))}return!1}delete(t,n){const r=this;let i=!1;function o(a){if(a=$p(a)){const s=Ie.findKey(r,a);!s||n&&!L1(0,r[s],s,n)||(delete r[s],i=!0)}}return Ie.isArray(t)?t.forEach(o):o(t),i}clear(t){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const o=n[r];t&&!L1(0,this[o],o,t,!0)||(delete this[o],i=!0)}return i}normalize(t){const n=this,r={};return Ie.forEach(this,(i,o)=>{var a;const s=Ie.findKey(r,o);if(s)return n[s]=n_(i),void delete n[o];const c=t?function(l){return yi(l).call(l).toLowerCase().replace(/([a-z\d])(\w*)/g,(u,d,h)=>d.toUpperCase()+h)}(o):yi(a=String(o)).call(a);c!==o&&delete n[o],n[c]=n_(i),r[c]=!0}),this}concat(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.constructor.concat(this,...n)}toJSON(t){const n=Object.create(null);return Ie.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=t&&Ie.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(t=>{let[n,r]=t;return n+": "+r}).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t){const n=new this(t);for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return i.forEach(a=>n.set(a)),n}static accessor(t){const n=(this[dM]=this[dM]={accessors:{}}).accessors,r=this.prototype;function i(o){const a=$p(o);n[a]||(function(s,c){const l=Ie.toCamelCase(" "+c);["get","set","has"].forEach(u=>{Object.defineProperty(s,u+l,{value:function(d,h,f){return this[u].call(this,c,d,h,f)},configurable:!0})})}(r,o),n[a]=!0)}return Ie.isArray(t)?t.forEach(i):i(t),this}}r_.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Ie.reduceDescriptors(r_.prototype,(e,t)=>{let{value:n}=e,r=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(i){this[r]=i}}}),Ie.freezeMethods(r_);var ol=r_;function k1(e,t){const n=this||tN,r=t||n,i=ol.from(r.headers);let o=r.data;return Ie.forEach(e,function(a){o=a.call(n,o,i.normalize(),t?t.status:void 0)}),i.normalize(),o}function k7(e){return!(!e||!e.__CANCEL__)}function Lg(e,t,n){In.call(this,e??"canceled",In.ERR_CANCELED,t,n),this.name="CanceledError"}Ie.inherits(Lg,In,{__CANCEL__:!0});var Aue=vc.hasStandardBrowserEnv?{write(e,t,n,r,i,o){const a=[e+"="+encodeURIComponent(t)];Ie.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),Ie.isString(r)&&a.push("path="+r),Ie.isString(i)&&a.push("domain="+i),o===!0&&a.push("secure"),document.cookie=a.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function M7(e,t){return e&&!function(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}(t)?function(n,r){return r?n.replace(/\/?\/$/,"")+"/"+r.replace(/^\/+/,""):n}(e,t):t}var Oue=vc.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let n;function r(i){let o=i;return e&&(t.setAttribute("href",o),o=t.href),t.setAttribute("href",o),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:t.pathname.charAt(0)==="/"?t.pathname:"/"+t.pathname}}return n=r(window.location.href),function(i){const o=Ie.isString(i)?r(i):i;return o.protocol===n.protocol&&o.host===n.host}}():function(){return!0};function hM(e,t){let n=0;const r=function(i,o){i=i||10;const a=new Array(i),s=new Array(i);let c,l=0,u=0;return o=o!==void 0?o:1e3,function(d){const h=Date.now(),f=s[u];c||(c=h),a[l]=d,s[l]=h;let g=u,p=0;for(;g!==l;)p+=a[g++],g%=i;if(l=(l+1)%i,l===u&&(u=(u+1)%i),h-c<o)return;const m=f&&h-f;return m?Math.round(1e3*p/m):void 0}}(50,250);return i=>{const o=i.loaded,a=i.lengthComputable?i.total:void 0,s=o-n,c=r(s);n=o;const l={loaded:o,total:a,progress:a?o/a:void 0,bytes:s,rate:c||void 0,estimated:c&&a&&o<=a?(a-o)/c:void 0,event:i};l[t?"download":"upload"]=!0,e(l)}}var xue=typeof XMLHttpRequest<"u"&&function(e){return new _e(function(t,n){let r=e.data;const i=ol.from(e.headers).normalize();let o,a,{responseType:s,withXSRFToken:c}=e;function l(){e.cancelToken&&e.cancelToken.unsubscribe(o),e.signal&&e.signal.removeEventListener("abort",o)}if(Ie.isFormData(r)){if(vc.hasStandardBrowserEnv||vc.hasStandardBrowserWebWorkerEnv)i.setContentType(!1);else if((a=i.getContentType())!==!1){const[g,...p]=a?a.split(";").map(m=>yi(m).call(m)).filter(Boolean):[];i.setContentType([g||"multipart/form-data",...p].join("; "))}}let u=new XMLHttpRequest;if(e.auth){const g=e.auth.username||"",p=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";i.set("Authorization","Basic "+btoa(g+":"+p))}const d=M7(e.baseURL,e.url);function h(){if(!u)return;const g=ol.from("getAllResponseHeaders"in u&&u.getAllResponseHeaders());(function(p,m,_){const E=_.config.validateStatus;_.status&&E&&!E(_.status)?m(new In("Request failed with status code "+_.status,[In.ERR_BAD_REQUEST,In.ERR_BAD_RESPONSE][Math.floor(_.status/100)-4],_.config,_.request,_)):p(_)})(function(p){t(p),l()},function(p){n(p),l()},{data:s&&s!=="text"&&s!=="json"?u.response:u.responseText,status:u.status,statusText:u.statusText,headers:g,config:e,request:u}),u=null}if(u.open(e.method.toUpperCase(),jH(d,e.params,e.paramsSerializer),!0),u.timeout=e.timeout,"onloadend"in u?u.onloadend=h:u.onreadystatechange=function(){u&&u.readyState===4&&(u.status!==0||u.responseURL&&u.responseURL.indexOf("file:")===0)&&setTimeout(h)},u.onabort=function(){u&&(n(new In("Request aborted",In.ECONNABORTED,e,u)),u=null)},u.onerror=function(){n(new In("Network Error",In.ERR_NETWORK,e,u)),u=null},u.ontimeout=function(){let g=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const p=e.transitional||HH;e.timeoutErrorMessage&&(g=e.timeoutErrorMessage),n(new In(g,p.clarifyTimeoutError?In.ETIMEDOUT:In.ECONNABORTED,e,u)),u=null},vc.hasStandardBrowserEnv&&(c&&Ie.isFunction(c)&&(c=c(e)),c||c!==!1&&Oue(d))){const g=e.xsrfHeaderName&&e.xsrfCookieName&&Aue.read(e.xsrfCookieName);g&&i.set(e.xsrfHeaderName,g)}r===void 0&&i.setContentType(null),"setRequestHeader"in u&&Ie.forEach(i.toJSON(),function(g,p){u.setRequestHeader(p,g)}),Ie.isUndefined(e.withCredentials)||(u.withCredentials=!!e.withCredentials),s&&s!=="json"&&(u.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&u.addEventListener("progress",hM(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&u.upload&&u.upload.addEventListener("progress",hM(e.onUploadProgress)),(e.cancelToken||e.signal)&&(o=g=>{u&&(n(!g||g.type?new Lg(null,e,u):g),u.abort(),u=null)},e.cancelToken&&e.cancelToken.subscribe(o),e.signal&&(e.signal.aborted?o():e.signal.addEventListener("abort",o)));const f=function(g){const p=/^([-+\w]{1,25})(:?\/\/|:)/.exec(g);return p&&p[1]||""}(d);f&&vc.protocols.indexOf(f)===-1?n(new In("Unsupported protocol "+f+":",In.ERR_BAD_REQUEST,e)):u.send(r||null)})};const LI={http:null,xhr:xue};Ie.forEach(LI,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const fM=e=>"- ".concat(e),Nue=e=>Ie.isFunction(e)||e===null||e===!1;var F7={getAdapter:e=>{e=Ie.isArray(e)?e:[e];const{length:t}=e;let n,r;const i={};for(let o=0;o<t;o++){let a;if(n=e[o],r=n,!Nue(n)&&(r=LI[(a=String(n)).toLowerCase()],r===void 0))throw new In("Unknown adapter '".concat(a,"'"));if(r)break;i[a||"#"+o]=r}if(!r){const o=Object.entries(i).map(a=>{let[s,c]=a;return"adapter ".concat(s," ")+(c===!1?"is not supported by the environment":"is not available in the build")});throw new In("There is no suitable adapter to dispatch the request "+(t?o.length>1?`since :
`+o.map(fM).join(`
`):" "+fM(o[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return r},adapters:LI};function M1(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Lg(null,e)}function pM(e){return M1(e),e.headers=ol.from(e.headers),e.data=k1.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),F7.getAdapter(e.adapter||tN.adapter)(e).then(function(t){return M1(e),t.data=k1.call(e,e.transformResponse,t),t.headers=ol.from(t.headers),t},function(t){return k7(t)||(M1(e),t&&t.response&&(t.response.data=k1.call(e,e.transformResponse,t.response),t.response.headers=ol.from(t.response.headers))),_e.reject(t)})}function mM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}const gM=e=>e instanceof ol?function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?mM(Object(r),!0).forEach(function(i){P(t,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):mM(Object(r)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(r,i))})}return t}({},e):e;function kf(e,t){t=t||{};const n={};function r(l,u,d){return Ie.isPlainObject(l)&&Ie.isPlainObject(u)?Ie.merge.call({caseless:d},l,u):Ie.isPlainObject(u)?Ie.merge({},u):Ie.isArray(u)?u.slice():u}function i(l,u,d){return Ie.isUndefined(u)?Ie.isUndefined(l)?void 0:r(void 0,l,d):r(l,u,d)}function o(l,u){if(!Ie.isUndefined(u))return r(void 0,u)}function a(l,u){return Ie.isUndefined(u)?Ie.isUndefined(l)?void 0:r(void 0,l):r(void 0,u)}function s(l,u,d){return d in t?r(l,u):d in e?r(void 0,l):void 0}const c={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:s,headers:(l,u)=>i(gM(l),gM(u),!0)};return Ie.forEach(Object.keys(Object.assign({},e,t)),function(l){const u=c[l]||i,d=u(e[l],t[l],l);Ie.isUndefined(d)&&u!==s||(n[l]=d)}),n}const U7="1.6.8",nN={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{nN[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const vM={};nN.transitional=function(e,t,n){function r(i,o){return"[Axios v"+U7+"] Transitional option '"+i+"'"+o+(n?". "+n:"")}return(i,o,a)=>{if(e===!1)throw new In(r(o," has been removed"+(t?" in "+t:"")),In.ERR_DEPRECATED);return t&&!vM[o]&&(vM[o]=!0,console.warn(r(o," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(i,o,a)}};var kI={assertOptions:function(e,t,n){if(typeof e!="object")throw new In("options must be an object",In.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const o=r[i],a=t[o];if(a){const s=e[o],c=s===void 0||a(s,o,e);if(c!==!0)throw new In("option "+o+" must be "+c,In.ERR_BAD_OPTION_VALUE)}else if(n!==!0)throw new In("Unknown option "+o,In.ERR_BAD_OPTION)}},validators:nN};const wl=kI.validators;let i_=class{constructor(e){this.defaults=e,this.interceptors={request:new lk,response:new lk}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let r;Error.captureStackTrace?Error.captureStackTrace(r={}):r=new Error;const i=r.stack?r.stack.replace(/^.+\n/,""):"";n.stack?i&&!String(n.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+i):n.stack=i}throw n}}_request(e,t){typeof e=="string"?(t=t||{}).url=e:t=e||{},t=kf(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:i}=t;n!==void 0&&kI.assertOptions(n,{silentJSONParsing:wl.transitional(wl.boolean),forcedJSONParsing:wl.transitional(wl.boolean),clarifyTimeoutError:wl.transitional(wl.boolean)},!1),r!=null&&(Ie.isFunction(r)?t.paramsSerializer={serialize:r}:kI.assertOptions(r,{encode:wl.function,serialize:wl.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=i&&Ie.merge(i.common,i[t.method]);i&&Ie.forEach(["delete","get","head","post","put","patch","common"],f=>{delete i[f]}),t.headers=ol.concat(o,i);const a=[];let s=!0;this.interceptors.request.forEach(function(f){typeof f.runWhen=="function"&&f.runWhen(t)===!1||(s=s&&f.synchronous,a.unshift(f.fulfilled,f.rejected))});const c=[];let l;this.interceptors.response.forEach(function(f){c.push(f.fulfilled,f.rejected)});let u,d=0;if(!s){const f=[pM.bind(this),void 0];for(f.unshift.apply(f,a),f.push.apply(f,c),u=f.length,l=_e.resolve(t);d<u;)l=l.then(f[d++],f[d++]);return l}u=a.length;let h=t;for(d=0;d<u;){const f=a[d++],g=a[d++];try{h=f(h)}catch(p){g.call(this,p);break}}try{l=pM.call(this,h)}catch(f){return _e.reject(f)}for(d=0,u=c.length;d<u;)l=l.then(c[d++],c[d++]);return l}getUri(e){return jH(M7((e=kf(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}};Ie.forEach(["delete","get","head","options"],function(e){i_.prototype[e]=function(t,n){return this.request(kf(n||{},{method:e,url:t,data:(n||{}).data}))}}),Ie.forEach(["post","put","patch"],function(e){function t(n){return function(r,i,o){return this.request(kf(o||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:r,data:i}))}}i_.prototype[e]=t(),i_.prototype[e+"Form"]=t(!0)});var o_=i_;class rN{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new _e(function(i){n=i});const r=this;this.promise.then(i=>{if(!r._listeners)return;let o=r._listeners.length;for(;o-- >0;)r._listeners[o](i);r._listeners=null}),this.promise.then=i=>{let o;const a=new _e(s=>{r.subscribe(s),o=s}).then(i);return a.cancel=function(){r.unsubscribe(o)},a},t(function(i,o,a){r.reason||(r.reason=new Lg(i,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){this.reason?t(this.reason):this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}static source(){let t;return{token:new rN(function(n){t=n}),cancel:t}}}var Pue=rN;const MI={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(MI).forEach(e=>{let[t,n]=e;MI[n]=t});var Due=MI;const ci=function e(t){const n=new o_(t),r=BH(o_.prototype.request,n);return Ie.extend(r,o_.prototype,n,{allOwnKeys:!0}),Ie.extend(r,n,null,{allOwnKeys:!0}),r.create=function(i){return e(kf(t,i))},r}(tN);ci.Axios=o_,ci.CanceledError=Lg,ci.CancelToken=Pue,ci.isCancel=k7,ci.VERSION=U7,ci.toFormData=Y_,ci.AxiosError=In,ci.Cancel=ci.CanceledError,ci.all=function(e){return _e.all(e)},ci.spread=function(e){return function(t){return e.apply(null,t)}},ci.isAxiosError=function(e){return Ie.isObject(e)&&e.isAxiosError===!0},ci.mergeConfig=kf,ci.AxiosHeaders=ol,ci.formToJSON=e=>L7(Ie.isHTMLForm(e)?new FormData(e):e),ci.getAdapter=F7.getAdapter,ci.HttpStatusCode=Due,ci.default=ci;var eo=ci;const Lue=()=>{};function S0(){const e={promise:void 0,isResolved:!1,isRejected:!1,isFinished:!1,resolve:void 0,reject:void 0,cancel:Lue};return e.promise=new _e((t,n)=>{e.resolve=r=>{e.isFinished||(e.isResolved=!0,e.isFinished=!0,t(r),e.value=r)},e.reject=r=>{e.isFinished||(e.isRejected=!0,e.isFinished=!0,n(r))}}),e}const Rv=new Map,wv=new Map,Zs=new Map;let yr=function(e){return e.WIN_10="Windows 10",e.WIN_81="Windows 8.1",e.WIN_8="Windows 8",e.WIN_7="Windows 7",e.WIN_VISTA="Windows Vista",e.WIN_SERVER_2003="Windows Server 2003",e.WIN_XP="Windows XP",e.WIN_2000="Windows 2000",e.ANDROID="Android",e.HARMONY_OS="HarmonyOS",e.OPEN_BSD="Open BSD",e.SUN_OS="Sun OS",e.LINUX="Linux",e.IOS="iOS",e.MAC_OS="Mac OS",e.CHROMIUM_OS="Chromium OS",e.QNX="QNX",e.UNIX="UNIX",e.BEOS="BeOS",e.OS_2="OS/2",e.SEARCH_BOT="Search Bot",e}({}),Kt=function(e){return e.CHROME="Chrome",e.SAFARI="Safari",e.EDGE="Edge",e.FIREFOX="Firefox",e.OPERA="OPR",e.QQ="QQBrowser",e.WECHAT="MicroMessenger",e}({});const FI=new tse;let As=FI.getResult(),F1=null;function Tt(e){if(!F1){e&&FI.setUA(e),As=FI.getResult();const t=function(s){if(s.engine.name==="Blink"&&s.browser.name!=="WeChat")return Kt.CHROME;switch(s.browser.name){case"Chrome Headless":case"Chrome":case"Chromium":return Kt.CHROME;case"Safari":case"Mobile Safari":return Kt.SAFARI;case"Edge":return Kt.EDGE;case"Firefox":return Kt.FIREFOX;case"QQ":case"QQBrowser":return Kt.QQ;case"Opera":return Kt.OPERA;case"WeChat":return Kt.WECHAT;default:return s.browser.name||""}}(As),n=EM(As),r=function(s){return s.os.name==="Windows"?s.os.version?s.os.name+" "+s.os.version:s.os.name:s.os.name||""}(As),i=As.os.version,o=EM(As,!1),a=As.device.type;if(!(t&&n&&r&&i))return{name:t,version:n,os:r,osVersion:i,browserVersion:o,deviceType:a};F1={name:t,version:n,os:r,osVersion:i,browserVersion:o,deviceType:a}}return F1}function EM(e){let t,n=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return t=e.engine.name==="Blink"?e.engine.version||"":e.browser.version||"",n?t.split(".")[0]:t}function ky(){return Tt().os}function _M(){const e=Tt();return"".concat(e.os," ").concat(e.osVersion)}function tS(){const e=Tt();return!!(As.engine.name==="WebKit"&&e.os===yr.MAC_OS&&navigator.maxTouchPoints&&navigator.maxTouchPoints>0&&e.name!==Kt.SAFARI||Li()&&e.name!==Kt.SAFARI)}function ou(){return Tt().name===Kt.CHROME}function Gr(){return Tt().name===Kt.SAFARI}function B7(){return Tt().name===Kt.EDGE}function Fn(){return Tt().name===Kt.FIREFOX}function Li(){return Tt().os===yr.IOS}function UI(e){const t=Tt();return!(t.name!==Kt.CHROME||!t.osVersion)&&Number(t.version)>=e}function $7(e){const t=Tt();return!(t.name!==Kt.CHROME||!t.osVersion)&&Number(t.version)<e}function SM(e){const t=Tt();return!(t.name!==Kt.EDGE||!t.osVersion)&&Number(t.version)>=e}function V7(e){const t=Tt();return!(t.name!==Kt.SAFARI||!t.osVersion)&&Number(t.version)>=e}function j7(e,t,n){const r=Tt();if(r.os!==yr.IOS||!r.osVersion)return!1;const i=r.osVersion.split(".");return n?t&&Number(i[0])===e&&Number(i[1])<t||Number(i[0])<e:t?Number(i[0])===e&&Number(i[1])<=t||Number(i[0])<e:Number(i[0])<=e}function H7(e,t,n){const r=Tt();if(r.name!==Kt.SAFARI||!r.osVersion||!r.browserVersion)return!1;const i=r.browserVersion.split(".");return n?t&&Number(i[0])===e&&Number(i[1])<t||Number(i[0])<e:t?Number(i[0])===e&&Number(i[1])<=t||Number(i[0])<e:Number(i[0])<=e}function yM(e){const t=Tt();return!(t.name!==Kt.OPERA||!t.osVersion)&&Number(t.version)>=e}function CM(){const e=Tt();if(e.os!==yr.IOS||!e.osVersion)return!1;const t=e.osVersion.split(".");return Number(t[0])<14||Number(t[0])===14&&Number(t[1])<=6}function Mf(){const e=Tt();if(e.os!==yr.IOS||!e.osVersion)return!1;const t=e.osVersion.split(".");return Number(t[0])===15}function BI(){const e=Tt();if(e.os!==yr.IOS||!e.osVersion)return!1;const t=e.osVersion.split(".");return Number(t[0])===16}function bM(){const e=Tt();if(e.os!==yr.IOS||!e.osVersion)return!1;const t=e.osVersion.split(".");return Number(t[0])===15&&Number(t[1])>=1}function rs(){return Gr()&&navigator.maxTouchPoints>0}function z7(){return Tt().name===Kt.WECHAT}function W7(){return window.navigator.appVersion&&window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)!==null&&window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)[1]<=35}function iN(){const e=ky();return function(){const{deviceType:t}=Tt();return t==="mobile"||t==="tablet"}()||e===yr.ANDROID||e===yr.IOS||e===yr.HARMONY_OS}function _u(){const e=Tt();return e.name!==Kt.EDGE&&e.name!==Kt.SAFARI&&!!navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]./i)}function My(){return ky()===yr.ANDROID}function y0(){const e=Tt();return My()&&(e.name===Kt.CHROME||e.name===Kt.WECHAT||/chrome|chromium/i.test(navigator.userAgent))}function pn(e,t,n){return(t=function(r){var i=function(o,a){if(typeof o!="object"||!o)return o;var s=o[Symbol.toPrimitive];if(s!==void 0){var c=s.call(o,"string");if(typeof c!="object")return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(o)}(r);return typeof i=="symbol"?i:i+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function TM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ne(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?TM(Object(n),!0).forEach(function(r){pn(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}let k=function(e){return e.UNEXPECTED_ERROR="UNEXPECTED_ERROR",e.UNEXPECTED_RESPONSE="UNEXPECTED_RESPONSE",e.TIMEOUT="TIMEOUT",e.INVALID_PARAMS="INVALID_PARAMS",e.NOT_READABLE="NOT_READABLE",e.NOT_SUPPORTED="NOT_SUPPORTED",e.INVALID_OPERATION="INVALID_OPERATION",e.OPERATION_ABORTED="OPERATION_ABORTED",e.WEB_SECURITY_RESTRICT="WEB_SECURITY_RESTRICT",e.EXCHANGE_SDP_FAILED="EXCHANGE_SDP_FAILED",e.ADD_CANDIDATE_FAILED="ADD_CANDIDATE_FAILED",e.DATACHANNEL_FAILED="DATACHANNEL_FAILED",e.NETWORK_ERROR="NETWORK_ERROR",e.NETWORK_TIMEOUT="NETWORK_TIMEOUT",e.NETWORK_RESPONSE_ERROR="NETWORK_RESPONSE_ERROR",e.API_INVOKE_TIMEOUT="API_INVOKE_TIMEOUT",e.ENUMERATE_DEVICES_FAILED="ENUMERATE_DEVICES_FAILED",e.DEVICE_NOT_FOUND="DEVICE_NOT_FOUND",e.ELECTRON_IS_NULL="ELECTRON_IS_NULL",e.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR="ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR",e.CHROME_PLUGIN_NO_RESPONSE="CHROME_PLUGIN_NO_RESPONSE",e.CHROME_PLUGIN_NOT_INSTALL="CHROME_PLUGIN_NOT_INSTALL",e.MEDIA_OPTION_INVALID="MEDIA_OPTION_INVALID",e.PERMISSION_DENIED="PERMISSION_DENIED",e.CONSTRAINT_NOT_SATISFIED="CONSTRAINT_NOT_SATISFIED",e.TRACK_IS_DISABLED="TRACK_IS_DISABLED",e.GET_VIDEO_ELEMENT_VISIBLE_ERROR="GET_VIDEO_ELEMENT_VISIBLE_ERROR",e.SHARE_AUDIO_NOT_ALLOWED="SHARE_AUDIO_NOT_ALLOWED",e.LOW_STREAM_ENCODING_ERROR="LOW_STREAM_ENCODING_ERROR",e.SET_ENCODING_PARAMETER_ERROR="SET_ENCODING_PARAMETER_ERROR",e.TRACK_STATE_UNREACHABLE="TRACK_STATE_UNREACHABLE",e.INVALID_UINT_UID_FROM_STRING_UID="INVALID_UINT_UID_FROM_STRING_UID",e.CAN_NOT_GET_PROXY_SERVER="CAN_NOT_GET_PROXY_SERVER",e.CAN_NOT_GET_GATEWAY_SERVER="CAN_NOT_GET_GATEWAY_SERVER",e.VOID_GATEWAY_ADDRESS="VOID_GATEWAY_ADDRESS",e.UID_CONFLICT="UID_CONFLICT",e.MULTI_UNILBS_RESPONSE_ERROR="MULTI_UNILBS_RESPONSE_ERROR",e.UPDATE_TICKET_FAILED="UPDATE_TICKET_FAILED",e.INVALID_LOCAL_TRACK="INVALID_LOCAL_TRACK",e.INVALID_TRACK="INVALID_TRACK",e.SENDER_NOT_FOUND="SENDER_NOT_FOUND",e.CREATE_OFFER_FAILED="CREATE_OFFER_FAILED",e.SET_ANSWER_FAILED="SET_ANSWER_FAILED",e.ICE_FAILED="ICE_FAILED",e.PC_CLOSED="PC_CLOSED",e.SENDER_REPLACE_FAILED="SENDER_REPLACE_FAILED",e.GET_LOCAL_CAPABILITIES_FAILED="GET_LOCAL_CAPABILITIES_FAILED",e.GET_LOCAL_CONNECTION_PARAMS_FAILED="GET_LOCAL_CONNECTION_PARAMS_FAILED",e.SUBSCRIBE_FAILED="SUBSCRIBE_FAILED",e.UNSUBSCRIBE_FAILED="UNSUBSCRIBE_FAILED",e.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",e.NO_ICE_CANDIDATE="NO_ICE_CANDIDATE",e.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS="CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS",e.EXIST_DISABLED_VIDEO_TRACK="EXIST_DISABLED_VIDEO_TRACK",e.INVALID_REMOTE_USER="INVALID_REMOTE_USER",e.REMOTE_USER_IS_NOT_PUBLISHED="REMOTE_USER_IS_NOT_PUBLISHED",e.CUSTOM_REPORT_SEND_FAILED="CUSTOM_REPORT_SEND_FAILED",e.CUSTOM_REPORT_FREQUENCY_TOO_HIGH="CUSTOM_REPORT_FREQUENCY_TOO_HIGH",e.FETCH_AUDIO_FILE_FAILED="FETCH_AUDIO_FILE_FAILED",e.READ_LOCAL_AUDIO_FILE_ERROR="READ_LOCAL_AUDIO_FILE_ERROR",e.DECODE_AUDIO_FILE_FAILED="DECODE_AUDIO_FILE_FAILED",e.WS_ABORT="WS_ABORT",e.WS_DISCONNECT="WS_DISCONNECT",e.WS_ERR="WS_ERR",e.EXTERNAL_SIGNAL_ABORT="EXTERNAL_SIGNAL_ABORT",e.LIVE_STREAMING_TASK_CONFLICT="LIVE_STREAMING_TASK_CONFLICT",e.LIVE_STREAMING_INVALID_ARGUMENT="LIVE_STREAMING_INVALID_ARGUMENT",e.LIVE_STREAMING_INTERNAL_SERVER_ERROR="LIVE_STREAMING_INTERNAL_SERVER_ERROR",e.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED="LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED",e.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED="LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED",e.LIVE_STREAMING_CDN_ERROR="LIVE_STREAMING_CDN_ERROR",e.LIVE_STREAMING_INVALID_RAW_STREAM="LIVE_STREAMING_INVALID_RAW_STREAM",e.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT="LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT",e.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE="LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE",e.LIVE_STREAMING_WARN_FREQUENT_REQUEST="LIVE_STREAMING_WARN_FREQUENT_REQUEST",e.WEBGL_INTERNAL_ERROR="WEBGL_INTERNAL_ERROR",e.BEAUTY_PROCESSOR_INTERNAL_ERROR="BEAUTY_PROCESSOR_INTERNAL_ERROR",e.CROSS_CHANNEL_WAIT_STATUS_ERROR="CROSS_CHANNEL_WAIT_STATUS_ERROR",e.CROSS_CHANNEL_FAILED_JOIN_SRC="CROSS_CHANNEL_FAILED_JOIN_SEC",e.CROSS_CHANNEL_FAILED_JOIN_DEST="CROSS_CHANNEL_FAILED_JOIN_DEST",e.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST="CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST",e.CROSS_CHANNEL_SERVER_ERROR_RESPONSE="CROSS_CHANNEL_SERVER_ERROR_RESPONSE",e.METADATA_OUT_OF_RANGE="METADATA_OUT_OF_RANGE",e.LOCAL_AEC_ERROR="LOCAL_AEC_ERROR",e.INVALID_PLUGIN="INVALID_PLUGIN",e.DISCONNECT_P2P="DISCONNECT_P2P",e.CONVERTING_IMAGEDATA_TO_BLOB_FAILED="CONVERTING_IMAGEDATA_TO_BLOB_FAILED",e.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED="CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED",e.INIT_DATACHANNEL_TIMEOUT="INIT_DATACHANNEL_TIMEOUT",e.CREATE_DATACHANNEL_ERROR="CREATE_DATACHANNEL_ERROR",e.DATACHANNEL_CONNECTION_TIMEOUT="DATACHANNEL_CONNECTION_TIMEOUT",e.PROHIBITED_OPERATION="PROHIBITED_OPERATION",e.IMAGE_MODERATION_UPLOAD_FAILED="IMAGE_MODERATION_UPLOAD_FAILED",e.P2P_MESSAGE_FAILED="P2P_MESSAGE_FAILED",e}({}),Q=class extends Error{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0;super(t),pn(this,"code",void 0),pn(this,"message",void 0),pn(this,"data",void 0),pn(this,"name","AgoraRTCException"),this.code=e,this.message="AgoraRTCError ".concat(this.code,": ").concat(t),this.data=n}toString(){return this.data?"data: ".concat(JSON.stringify(this.data),`
`).concat(this.stack):"".concat(this.stack)}print(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"error",t=arguments.length>1?arguments[1]:void 0;return e==="error"&&(t||console).error(this.toString()),e==="warning"&&(t||console).warn(this.toString()),this}throw(e){throw this.print("error",e),this}};function nl(e,t){if(typeof e!="boolean")throw new Q(k.INVALID_PARAMS,"Invalid ".concat(t,": The value is of the boolean type."))}function pr(e,t,n){if(!Ce(n).call(n,e))throw new Q(k.INVALID_PARAMS,"".concat(t," can only be set as ").concat(JSON.stringify(n)))}function Zt(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1e4;if(e<n||e>r||(!(arguments.length>4&&arguments[4]!==void 0)||arguments[4])&&!function(i){return typeof i=="number"&&i%1==0}(e))throw new Q(k.INVALID_PARAMS,"invalid ".concat(t,": the value range is [").concat(n,", ").concat(r,"]. integer only"))}function U1(e,t){if(typeof e!="number"){if(!(e.min||e.max||e.ideal||e.exact))throw new Q(k.INVALID_PARAMS,"".concat(t," is not a valid ConstrainLong"));e.min!==void 0&&Zt(e.min,"".concat(t,".min"),0,1/0),e.max!==void 0&&Zt(e.max,"".concat(t,".max"),1,1/0),e.exact!==void 0&&Zt(e.exact,"".concat(t,".exact"),1,1/0),e.ideal!==void 0&&Zt(e.ideal,"".concat(t,".ideal"),1,1/0)}else Zt(e,t,1,1/0)}function xr(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:255,i=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4];if(e==null)throw new Q(k.INVALID_PARAMS,"".concat(t||"param"," cannot be empty"));if(!G7(e,n,r,i))throw new Q(k.INVALID_PARAMS,"Invalid ".concat(t||"string param",": Length of the string: [").concat(n,",").concat(r,"].").concat(i?" ASCII characters only.":""))}function Xc(e,t){if(!Array.isArray(e))throw new Q(k.INVALID_PARAMS,"".concat(t," should be an array"))}function On(e){return e==null}function G7(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:255,r=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];return typeof e=="string"&&e.length<=n&&e.length>=t&&(!r||function(i){if(typeof i!="string")return!1;for(let o=0;o<i.length;o+=1){const a=i.charCodeAt(o);if(a<0||a>255)return!1}return!0}(e))}var _m=function(e){return e.COVERED="COVERED",e.POSITION="POSITION",e.SIZE="SIZE",e.STYLE="STYLE",e}(_m||{}),$I=function(e){return e.UNMOUNTED="UNMOUNTED",e.INVALID_HTML_ELEMENT="INVALID_HTML_ELEMENT",e}($I||{});const K7=new class{constructor(){pn(this,"_clientSize",null),pn(this,"getClientWidth",()=>document.documentElement?document.documentElement.clientWidth:document.body.clientWidth),pn(this,"getClientHeight",()=>document.documentElement?document.documentElement.clientHeight:document.body.clientHeight),pn(this,"getStyle",e=>window.getComputedStyle(e,null)),pn(this,"checkCssVisibleProperty",e=>{var t;let n=!0;const r=this.getStyle(e),{display:i,visibility:o,opacity:a,filter:s}=r;return(i==="none"||Ce(t=["hidden","collapse"]).call(t,o)||Number(a)<.1)&&(n=!1),!!n&&(s&&s.split(" ").filter(c=>{var l;const u=c.split("(")[0];return Ce(l=["brightness","blur","opacity"]).call(l,u)}).map(c=>{const[l,u]=c.split(/\(|\)/);return[l,Number(u.match(/^[0-9\.]+/))]}).forEach(c=>{const[l,u]=c;switch(l){case"brightness":(u<.1||u>3)&&(n=!1);break;case"blur":u>3&&(n=!1);break;case"opacity":u<.1&&(n=!1)}}),n)}),pn(this,"checkPropertyUpToAllParentNodes",(e,t)=>{let n=!0,r=!0;const i=a=>t(a);let o=e;for(;o&&r;)i(o)||(n=!1,r=!1),o=o.parentElement,o||(r=!1);return n}),pn(this,"checkActualCssVisibleIncludeInherit",e=>this.checkPropertyUpToAllParentNodes(e,this.checkCssVisibleProperty)),pn(this,"getSizeAboutClient",e=>{const{width:t,height:n,left:r,right:i,top:o,bottom:a}=e.getBoundingClientRect(),s=this.getClientWidth(),c=this.getClientHeight();return{width:t,height:n,left:r,right:i,top:o,bottom:a,clientWidth:s,clientHeight:c,clientMin:Math.min(s,c)}}),pn(this,"checkActualSize",()=>{const{width:e,height:t,clientMin:n}=this._clientSize;return this.checkSizeIsVisible(e,t,n)}),pn(this,"elementFromPoint",(e,t)=>document.elementFromPoint?document.elementFromPoint(e,t):null),pn(this,"checkCoverForAPoint",(e,t,n)=>{const r=this.elementFromPoint(e,t);return r!==null&&r!==n}),pn(this,"getPointPositionList",()=>{const{width:e,height:t,left:n,top:r}=this._clientSize,i=e/6,o=t/6,a=[],s=10**6;for(let c=0;c<5;c++)for(let l=0;l<5;l++){const u=(n*s+(c===0?.1:c===4?(i*c*s-1e5)/s:i*c)*s)/s,d=(r*s+(l===0?.1:l===4?(o*l*s-1e5)/s:o*l)*s)/s;a.push({x:u,y:d})}return[...a]}),pn(this,"checkElementCover",e=>this.getPointPositionList().map(t=>this.checkCoverForAPoint(t.x,t.y,e)).filter(t=>!!t).length>6),pn(this,"checkSizeIsVisible",(e,t,n)=>(e>50||n/e<=10)&&(t>50||n/t<=10)),pn(this,"checkSizeOfPartInClient",()=>{const{left:e,right:t,top:n,bottom:r,clientHeight:i,clientWidth:o,clientMin:a}=this._clientSize;let s,c,l,u;if(e<0)s=0;else{if(!(e<o))return!1;s=e}if(t<0)return!1;if(c=t<o?t:o,n<0)l=0;else{if(!(n<i))return!1;l=n}if(r<0)return!1;u=r<i?r:i;const d=c-s,h=u-l;return this.checkSizeIsVisible(d,h,a)}),pn(this,"returnHiddenResult",e=>(this._clientSize=null,{visible:!1,reason:e})),pn(this,"checkOneElementVisible",e=>{if(e instanceof HTMLElement){if(this.checkElementIsMountedOnDom(e)){if(this.checkActualCssVisibleIncludeInherit(e)){if(this._clientSize=this.getSizeAboutClient(e),this.checkElementCover(e))return this.returnHiddenResult(_m.COVERED);{const t=this.checkActualSize(),n=this.checkSizeOfPartInClient();return t&&!n?this.returnHiddenResult(_m.POSITION):t?(this._clientSize=null,{visible:!0}):this.returnHiddenResult(_m.SIZE)}}return this.returnHiddenResult(_m.STYLE)}return this.returnHiddenResult($I.UNMOUNTED)}return this.returnHiddenResult($I.INVALID_HTML_ELEMENT)}),pn(this,"checkElementIsMountedOnDom",e=>this.checkPropertyUpToAllParentNodes(e,t=>t.nodeName.toUpperCase()!=="HTML"?t.parentElement!==null:!!document.documentElement))}};function oN(e){return new TextEncoder().encode(e)}const RM=function(e,t){const n=new Uint8Array(e.byteLength+t.byteLength);return n.set(new Uint8Array(e),0),n.set(new Uint8Array(t),e.byteLength),n},VI=async e=>function(t,n){let r="";return new Uint8Array(t).forEach(i=>{r+=i.toString(n).padStart(2,"0")}),r}(await crypto.subtle.digest("SHA-256",oN(e)),16);let Pn=class{constructor(){pn(this,"_events",{}),pn(this,"addListener",this.on)}getListeners(e){return this._events[e]?this._events[e].map(t=>t.listener):[]}on(e,t){this._events[e]||(this._events[e]=[]);const n=this._events[e];this._indexOfListener(n,t)===-1&&n.push({listener:t,once:!1})}once(e,t){this._events[e]||(this._events[e]=[]);const n=this._events[e];this._indexOfListener(n,t)===-1&&n.push({listener:t,once:!0})}off(e,t){if(!this._events[e])return;const n=this._events[e],r=this._indexOfListener(n,t);r!==-1&&n.splice(r,1),this._events[e].length===0&&delete this._events[e]}removeAllListeners(e){e?delete this._events[e]:this._events={}}emit(e){this._events[e]||(this._events[e]=[]);const t=this._events[e].map(o=>o);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(let o=0;o<t.length;o+=1){const a=t[o];a.once&&this.off(e,a.listener),a.listener.apply(this,r||[])}}safeEmit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];[...this._events[e]||[]].forEach(i=>{i.once&&this.off(e,i.listener);try{i.listener.apply(this,n)}catch(o){console.error("safeEmit event:".concat(e," error ").concat(o==null?void 0:o.toString()))}})}_indexOfListener(e,t){let n=e.length;for(;n--;)if(e[n].listener===t)return n;return-1}},Vp=null;function q7(){if(Vp)return Vp;if(window.electron)return Vp=window.electron;if(!window.require)return null;try{return Vp=window.require("electron"),Vp}catch{return null}}let dr=function(e){return e.CREATE_CLIENT="createClient",e.CHECK_SYSTEM_REQUIREMENTS="checkSystemRequirements",e.SET_AREA="setArea",e.PRELOAD="PRELOAD",e.CHECK_VIDEO_TRACK_IS_ACTIVE="checkVideoTrackIsActive",e.CHECK_AUDIO_TRACK_IS_ACTIVE="checkAudioTrackIsActive",e.CREATE_MIC_AUDIO_TRACK="createMicrophoneAudioTrack",e.CREATE_CUSTOM_AUDIO_TRACK="createCustomAudioTrack",e.CREATE_BUFFER_AUDIO_TRACK="createBufferSourceAudioTrack",e.CREATE_CAM_VIDEO_TRACK="createCameraVideoTrack",e.CREATE_CUSTOM_VIDEO_TRACK="createCustomVideoTrack",e.CREATE_MIC_AND_CAM_TRACKS="createMicrophoneAndCameraTracks",e.CREATE_SCREEN_VIDEO_TRACK="createScreenVideoTrack",e.SET_ENCRYPTION_CONFIG="Client.setEncryptionConfig",e.START_PROXY_SERVER="Client.startProxyServer",e.STOP_PROXY_SERVER="Client.stopProxyServer",e.SET_PROXY_SERVER="Client.setProxyServer",e.SET_TURN_SERVER="Client.setTurnServer",e.SET_CLIENT_ROLE="Client.setClientRole",e.SET_LOW_STREAM_PARAMETER="Client.setLowStreamParameter",e.ENABLE_DUAL_STREAM="Client.enableDualStream",e.DISABLE_DUAL_STREAM="Client.disableDualStream",e.JOIN="Client.join",e.LEAVE="Client.leave",e.PUBLISH="Client.publish",e.UNPUBLISH="Client.unpublish",e.SUBSCRIBE="Client.subscribe",e.MASS_SUBSCRIBE="Client.massSubscribe",e.MASS_UNSUBSCRIBE="Client.massUnsubscribe",e.UNSUBSCRIBE="Client.unsubscribe",e.RENEW_TOKEN="Client.renewToken",e.SET_REMOTE_VIDEO_STREAM_TYPE="Client.setRemoteVideoStreamType",e.SET_STREAM_FALLBACK_OPTION="Client.setStreamFallbackOption",e.ENABLE_AUDIO_VOLUME_INDICATOR="Client.enableAudioVolumeIndicator",e.SEND_CUSTOM_REPORT_MESSAGE="Client.sendCustomReportMessage",e.INSPECT_VIDEO_CONTENT="Client.inspectVideoContent",e.STOP_INSPECT_VIDEO_CONTENT="Client.stopInspectVideoContent",e.JOIN_FALLBACK_TO_PROXY="Client._joinFallbackToProxy",e.ON_LIVE_STREAM_WARNING="Client.onLiveStreamWarning",e.ON_LIVE_STREAM_ERROR="Client.onLiveStreamingError",e.START_LIVE_STREAMING="Client.startLiveStreaming",e.SET_LIVE_TRANSCODING="Client.setLiveTranscoding",e.STOP_LIVE_STREAMING="Client.stopLiveStreaming",e.START_CHANNEL_MEDIA_RELAY="Client.startChannelMediaRelay",e.UPDATE_CHANNEL_MEDIA_RELAY="Client.updateChannelMediaRelay",e.STOP_CHANNEL_MEDIA_RELAY="Client.stopChannelMediaRelay",e.REQUEST_CONFIG_DISTRIBUTE="_config-distribute-request",e.SET_CONFIG_DISTRIBUTE="_configDistribute",e.LOCAL_TRACK_SET_MUTED="LocalTrack.setMute",e.LOCAL_AUDIO_TRACK_PLAY="LocalAudioTrack.play",e.LOCAL_AUDIO_TRACK_PLAY_IN_ELEMENT="LocalAudioTrack.playInElement",e.LOCAL_AUDIO_TRACK_STOP="LocalAudioTrack.stop",e.LOCAL_AUDIO_TRACK_SET_VOLUME="LocalAudioTrack.setVolume",e.MIC_AUDIO_TRACK_SET_DEVICE="MicrophoneAudioTrack.setDevice",e.BUFFER_AUDIO_TRACK_START="BufferSourceAudioTrack.startProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_STOP="BufferSourceAudioTrack.stopProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_PAUSE="BufferSourceAudioTrack.pauseProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_RESUME="BufferSourceAudioTrack.resumeProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_SEEK="BufferSourceAudioTrack.seekAudioBuffer",e.LOCAL_VIDEO_TRACK_PLAY="LocalVideoTrack.play",e.LOCAL_VIDEO_TRACK_STOP="LocalVideoTrack.stop",e.LOCAL_VIDEO_TRACK_GET_VIDEO_VISIBLE="LocalVideoTrack.getVideoElementVisibleStatus",e.LOCAL_VIDEO_TRACK_BEAUTY="LocalVideoTrack.setBeautyEffect",e.LOCAL_VIDEO_SEND_SEI_DATA="LocalVideoTrack.sendSeiData",e.CAM_VIDEO_TRACK_SET_DEVICE="CameraVideoTrack.setDevice",e.CAM_VIDEO_TRACK_SET_ENCODER_CONFIG="CameraVideoTrack.setEncoderConfiguration",e.REMOTE_VIDEO_TRACK_PLAY="RemoteVideoTrack.play",e.REMOTE_VIDEO_TRACK_STOP="RemoteVideoTrack.stop",e.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE="RemoteVideoTrack.getVideoElementVisibleStatus",e.REMOTE_AUDIO_TRACK_PLAY="RemoteAudioTrack.play",e.REMOTE_AUDIO_TRACK_STOP="RemoteAudioTrack.stop",e.REMOTE_AUDIO_SET_VOLUME="RemoteAudioTrack.setVolume",e.REMOTE_AUDIO_SET_OUTPUT_DEVICE="RemoteAudioTrack.setOutputDevice",e.GET_MEDIA_STREAM_TRACK="Track.getMediaStreamTrack",e.STREAM_TYPE_CHANGE="streamTypeChange",e.CONNECTION_STATE_CHANGE="connectionStateChange",e.LOAD_CONFIG_FROM_LOCALSTORAGE="loadConfigFromLocalStorage",e.IMAGE_MODERATION_UPLOAD="imageModerationUpload",e}({}),kn=function(e){return e.TRACER="tracer",e}({});function wM(e){return Zt(e.timeout,"config.timeout",0,1e5),Zt(e.timeoutFactor,"config.timeoutFactor",0,100,!1),Zt(e.maxRetryCount,"config.maxRetryConfig",0,1/0),Zt(e.maxRetryTimeout,"config.maxRetryTimeout",0,1/0),!0}let kue=function(e){return e[e.AUDIENCE_LEVEL_LOW_LATENCY=1]="AUDIENCE_LEVEL_LOW_LATENCY",e[e.AUDIENCE_LEVEL_ULTRA_LOW_LATENCY=2]="AUDIENCE_LEVEL_ULTRA_LOW_LATENCY",e[e.AUDIENCE_LEVEL_SYNC_LATENCY=3]="AUDIENCE_LEVEL_SYNC_LATENCY",e}({}),Xt=function(e){return e.LEAVE="LEAVE",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.UID_BANNED="UID_BANNED",e.FALLBACK="FALLBACK",e.IP_BANNED="IP_BANNED",e.CHANNEL_BANNED="CHANNEL_BANNED",e.LICENSE_MISSING="LICENSE_MISSING",e.LICENSE_EXPIRED="LICENSE_EXPIRED",e.LICENSE_MINUTES_EXCEEDED="LICENSE_MINUTES_EXCEEDED",e.LICENSE_PERIOD_INVALID="LICENSE_PERIOD_INVALID",e.LICENSE_MULTIPLE_SDK_SERVICE="LICENSE_MULTIPLE_SDK_SERVICE",e.LICENSE_ILLEGAL="LICENSE_ILLEGAL",e.TOKEN_EXPIRE="TOKEN_EXPIRE",e}({});function Fy(e){if(!Array.isArray(e)||e.length<1)return!1;try{e.forEach(t=>{if(!t.urls)throw Error()})}catch{return!1}return!0}function Y7(e){return xr(e.turnServerURL,"turnServerURL"),xr(e.username,"username"),xr(e.password,"password"),e.udpport&&Zt(e.udpport,"udpport",1,99999,!0),e.forceturn&&nl(e.forceturn,"forceturn"),e.security&&nl(e.security,"security"),e.tcpport&&Zt(e.tcpport,"tcpport",1,99999,!0),!0}function IM(e){return e.level!==void 0&&pr(e.level,"level",[1,2,3]),e.delay!==void 0&&Zt(e.delay,"delay",0,3e3,!0),!0}let vt=function(e){return e.CONNECTION_STATE_CHANGE="connection-state-change",e.MEDIA_RECONNECT_START="media-reconnect-start",e.MEDIA_RECONNECT_END="media-reconnect-end",e.IS_USING_CLOUD_PROXY="is-using-cloud-proxy",e.USER_JOINED="user-joined",e.USER_LEAVED="user-left",e.USER_PUBLISHED="user-published",e.USER_UNPUBLISHED="user-unpublished",e.USER_INFO_UPDATED="user-info-updated",e.CLIENT_BANNED="client-banned",e.CHANNEL_MEDIA_RELAY_STATE="channel-media-relay-state",e.CHANNEL_MEDIA_RELAY_EVENT="channel-media-relay-event",e.VOLUME_INDICATOR="volume-indicator",e.CRYPT_ERROR="crypt-error",e.ON_TOKEN_PRIVILEGE_WILL_EXPIRE="token-privilege-will-expire",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE="token-privilege-did-expire",e.NETWORK_QUALITY="network-quality",e.STREAM_TYPE_CHANGED="stream-type-changed",e.STREAM_FALLBACK="stream-fallback",e.RECEIVE_METADATA="receive-metadata",e.STREAM_MESSAGE="stream-message",e.LIVE_STREAMING_ERROR="live-streaming-error",e.LIVE_STREAMING_WARNING="live-streaming-warning",e.EXCEPTION="exception",e.ERROR="error",e.P2P_LOST="p2p_lost",e.JOIN_FALLBACK_TO_PROXY="join-fallback-to-proxy",e.CHANNEL_FALLBACK_TO_WEBSOCKET="channel-fallback-to-websocket",e.MEDIA_CONNECTION_TYPE_CHANGE="media-connection-type-change",e.PUBLISHED_USER_LIST="published-user-list",e.CONTENT_INSPECT_CONNECTION_STATE_CHANGE="content-inspect-connection-state-change",e.CONTENT_INSPECT_ERROR="content-inspect-error",e.CONTENT_INSPECT_RESULT="content-inspect-result",e.IMAGE_MODERATION_CONNECTION_STATE_CHANGE="image-moderation-connection-state-change",e}({}),Wr=function(e){return e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.MULTI_IP="MULTI_IP",e.TIMEOUT="TIMEOUT",e.OFFLINE="OFFLINE",e.LEAVE="LEAVE",e.P2P_FAILED="P2P_FAILED",e.FALLBACK="FALLBACK",e}({}),Io=function(e){return e.ONLINE="ONLINE",e.OFFLINE="OFFLINE",e}({}),Kh=function(e){return e.NETWORK_STATE_CHANGE="NETWORK_STATE_CHANGE",e.ONLINE="ONLINE",e.OFFLINE="OFFLINE",e}({});function Kr(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return e.getListeners(t).length===0?_e.reject(new Q(k.UNEXPECTED_ERROR,"can not emit promise")):new _e((o,a)=>{e.emit(t,...r,o,a)})}function rn(e,t){if(e.getListeners(t).length===0)return _e.resolve();for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return Kr(e,t,...r)}function ga(e,t){if(e.getListeners(t).length===0)return null;for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return C0(e,t,...r)}function C0(e,t){let n=null,r=null;for(var i=arguments.length,o=new Array(i>2?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];if(e.emit(t,...o,s=>{n=s},s=>{r=s}),r!==null)throw r;if(n===null)throw new Q(k.UNEXPECTED_ERROR,"handler is not sync");return n}const Jn=new class extends Pn{set networkState(e){this.emit(Kh.NETWORK_STATE_CHANGE,e,this._networkState),e===Io.ONLINE?this.emit(Kh.ONLINE):e===Io.OFFLINE&&(this.onlineWaiter=new _e(t=>{this.once(Kh.ONLINE,()=>{this.onlineWaiter=void 0,t(Io.ONLINE)})}),this.emit(Kh.OFFLINE)),this._networkState=e}get networkState(){return this._networkState}get isOnline(){return this._networkState===Io.ONLINE}constructor(){super(),pn(this,"_moduleName","network-indicator"),pn(this,"_networkState",Io.ONLINE),pn(this,"onlineWaiter",void 0),window.addEventListener("online",()=>{this.networkState=Io.ONLINE}),window.addEventListener("offline",()=>{this.networkState=Io.OFFLINE})}};function nS(e,t){const n=e.indexOf(t);n!==-1&&e.splice(n,1)}function qh(e){const t=[];return e.forEach(n=>{t.indexOf(n)===-1&&t.push(n)}),t}function Uy(e){_e!==void 0?_e.resolve().then(e):setTimeout(e,0)}function Yn(e){return JSON.parse(JSON.stringify(e))}function id(e){try{return Yn(e)}catch{return e}}const AM={};function Su(e,t){AM[t]||(AM[t]=!0,e())}function od(e){const t=window.atob(e),n=new Uint8Array(new ArrayBuffer(t.length));for(let r=0;r<t.length;r+=1)n[r]=t.charCodeAt(r);return n}function au(e){let t="";for(let n=0;n<e.length;n+=1)t+=String.fromCharCode(e[n]);return window.btoa(t)}function X7(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:16,n=new TextEncoder().encode(e);if(n.length>t)n=n.slice(0,t);else if(n.length<t){const r=new Uint8Array(t);r.set(n),n=r}return n}function OM(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=js(t).call(t,(a,s)=>a+s.length,0),i=new Uint8Array(new ArrayBuffer(r));let o=0;return t.forEach(a=>{i.set(a,o),o+=a.length}),i}function Ec(e){return window.TextEncoder?new TextEncoder().encode(e).length:e.length}function J7(e){let t=0;return(/DingTalk/i.test(navigator.userAgent)||/AliApp/i.test(navigator.userAgent))&&e.realFormData&&(e=e.realFormData),e.forEach(n=>{t+=typeof n=="string"?Ec(n):n.size}),t+138}function Mue(e){const t=new Q(k.TIMEOUT,"timeout");return new _e((n,r)=>{window.setTimeout(()=>r(t),e)})}function Lr(e){return new _e(t=>{window.setTimeout(t,e)})}function cn(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:7,t=arguments.length>1?arguments[1]:void 0;const n=Math.random().toString(16).substr(2,e).toLowerCase();return n.length===e?"".concat(t).concat(n):"".concat(t).concat(n)+cn(e-n.length,"")}function Yh(){return cn(32,"").toUpperCase()}const By=()=>{},xM=new class{constructor(){pn(this,"fnMap",new Map)}throttleByKey(e,t,n,r){for(var i=arguments.length,o=new Array(i>4?i-4:0),a=4;a<i;a++)o[a-4]=arguments[a];if(this.fnMap.has(t)){const s=this.fnMap.get(t);if(s.threshold!==n){s.fn(...s.args),clearTimeout(s.timer);const c=window.setTimeout(()=>{const l=this.fnMap.get(t);l&&l.fn(...l.args),this.fnMap.delete(t)},n);this.fnMap.set(t,{fn:e,threshold:n,timer:c,args:o,skipFn:r})}else s.skipFn&&s.skipFn(...s.args),this.fnMap.set(t,Ne(Ne({},s),{},{fn:e,args:o,skipFn:r}))}else{const s=window.setTimeout(()=>{const c=this.fnMap.get(t);c&&c.fn(...c.args),this.fnMap.delete(t)},n);this.fnMap.set(t,{fn:e,threshold:n,timer:s,args:o,skipFn:r})}}},NM=xM.throttleByKey.bind(xM);function PM(e){return typeof e=="object"&&e!==null&&!(e instanceof RegExp)}function jI(e,t){if(!PM(e)||!PM(t)||Array.isArray(e)&&!Array.isArray(t)||!Array.isArray(e)&&Array.isArray(t))return t;if(Array.isArray(t)&&Array.isArray(e)){const n=[...e];for(let r=0;r<t.length;r++)n[r]=jI(e[r],t[r]);return n}{const n=Ne({},e);for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(Object.prototype.hasOwnProperty.call(e,r)?n[r]=jI(e[r],t[r]):n[r]=t[r]);return n}}function DM(e,t){let n=[0];if(t&&(n=new Array(t).fill(0)),e===0)return n;let r=0;for(;e>0&&(n[r]=255&e,e>>=8,r++,!t||r!==t););return n}function B1(e){return typeof e=="number"?e:e.exact||e.ideal||e.max||e.min||0}function Q7(e){const t="0123456789abcdef";function n(S){let C,b="";for(C=0;C<=3;C++)b+=t.charAt(S>>8*C+4&15)+t.charAt(S>>8*C&15);return b}function r(S,C){const b=(65535&S)+(65535&C);return(S>>16)+(C>>16)+(b>>16)<<16|65535&b}function i(S,C,b,T,R,A){return r(function(O,x){return O<<x|O>>>32-x}(r(r(C,S),r(T,A)),R),b)}function o(S,C,b,T,R,A,O){return i(C&b|~C&T,S,C,R,A,O)}function a(S,C,b,T,R,A,O){return i(C&T|b&~T,S,C,R,A,O)}function s(S,C,b,T,R,A,O){return i(C^b^T,S,C,R,A,O)}function c(S,C,b,T,R,A,O){return i(b^(C|~T),S,C,R,A,O)}const l=function(S){let C;const b=1+(S.length+8>>6),T=new Array(16*b);for(C=0;C<16*b;C++)T[C]=0;for(C=0;C<S.length;C++)T[C>>2]|=S.charCodeAt(C)<<C%4*8;return T[C>>2]|=128<<C%4*8,T[16*b-2]=8*S.length,T}(e);let u,d,h,f,g,p=1732584193,m=-271733879,_=-1732584194,E=271733878;for(u=0;u<l.length;u+=16)d=p,h=m,f=_,g=E,p=o(p,m,_,E,l[u+0],7,-680876936),E=o(E,p,m,_,l[u+1],12,-389564586),_=o(_,E,p,m,l[u+2],17,606105819),m=o(m,_,E,p,l[u+3],22,-1044525330),p=o(p,m,_,E,l[u+4],7,-176418897),E=o(E,p,m,_,l[u+5],12,1200080426),_=o(_,E,p,m,l[u+6],17,-1473231341),m=o(m,_,E,p,l[u+7],22,-45705983),p=o(p,m,_,E,l[u+8],7,1770035416),E=o(E,p,m,_,l[u+9],12,-1958414417),_=o(_,E,p,m,l[u+10],17,-42063),m=o(m,_,E,p,l[u+11],22,-1990404162),p=o(p,m,_,E,l[u+12],7,1804603682),E=o(E,p,m,_,l[u+13],12,-40341101),_=o(_,E,p,m,l[u+14],17,-1502002290),m=o(m,_,E,p,l[u+15],22,1236535329),p=a(p,m,_,E,l[u+1],5,-165796510),E=a(E,p,m,_,l[u+6],9,-1069501632),_=a(_,E,p,m,l[u+11],14,643717713),m=a(m,_,E,p,l[u+0],20,-373897302),p=a(p,m,_,E,l[u+5],5,-701558691),E=a(E,p,m,_,l[u+10],9,38016083),_=a(_,E,p,m,l[u+15],14,-660478335),m=a(m,_,E,p,l[u+4],20,-405537848),p=a(p,m,_,E,l[u+9],5,568446438),E=a(E,p,m,_,l[u+14],9,-1019803690),_=a(_,E,p,m,l[u+3],14,-187363961),m=a(m,_,E,p,l[u+8],20,1163531501),p=a(p,m,_,E,l[u+13],5,-1444681467),E=a(E,p,m,_,l[u+2],9,-51403784),_=a(_,E,p,m,l[u+7],14,1735328473),m=a(m,_,E,p,l[u+12],20,-1926607734),p=s(p,m,_,E,l[u+5],4,-378558),E=s(E,p,m,_,l[u+8],11,-2022574463),_=s(_,E,p,m,l[u+11],16,1839030562),m=s(m,_,E,p,l[u+14],23,-35309556),p=s(p,m,_,E,l[u+1],4,-1530992060),E=s(E,p,m,_,l[u+4],11,1272893353),_=s(_,E,p,m,l[u+7],16,-155497632),m=s(m,_,E,p,l[u+10],23,-1094730640),p=s(p,m,_,E,l[u+13],4,681279174),E=s(E,p,m,_,l[u+0],11,-358537222),_=s(_,E,p,m,l[u+3],16,-722521979),m=s(m,_,E,p,l[u+6],23,76029189),p=s(p,m,_,E,l[u+9],4,-640364487),E=s(E,p,m,_,l[u+12],11,-421815835),_=s(_,E,p,m,l[u+15],16,530742520),m=s(m,_,E,p,l[u+2],23,-995338651),p=c(p,m,_,E,l[u+0],6,-198630844),E=c(E,p,m,_,l[u+7],10,1126891415),_=c(_,E,p,m,l[u+14],15,-1416354905),m=c(m,_,E,p,l[u+5],21,-57434055),p=c(p,m,_,E,l[u+12],6,1700485571),E=c(E,p,m,_,l[u+3],10,-1894986606),_=c(_,E,p,m,l[u+10],15,-1051523),m=c(m,_,E,p,l[u+1],21,-2054922799),p=c(p,m,_,E,l[u+8],6,1873313359),E=c(E,p,m,_,l[u+15],10,-30611744),_=c(_,E,p,m,l[u+6],15,-1560198380),m=c(m,_,E,p,l[u+13],21,1309151649),p=c(p,m,_,E,l[u+4],6,-145523070),E=c(E,p,m,_,l[u+11],10,-1120210379),_=c(_,E,p,m,l[u+2],15,718787259),m=c(m,_,E,p,l[u+9],21,-343485551),p=r(p,d),m=r(m,h),_=r(_,f),E=r(E,g);return n(p)+n(m)+n(_)+n(E)}let Fue=1,Iv=console,ri=class{static setLogger(e){Iv=e}constructor(e){pn(this,"lockingPromise",_e.resolve()),pn(this,"locks",0),pn(this,"name",""),pn(this,"lockId",void 0),this.lockId=Fue++,e&&(this.name=e),Iv.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is created."))}get isLocked(){return this.locks>0}lock(e){let t;this.locks+=1,Iv.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is locked, current queue ").concat(this.locks,". ").concat(typeof e=="string"?e:""));const n=new _e(i=>{t=()=>{this.locks-=1,Iv.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is not locked, current queue ").concat(this.locks,". ").concat(typeof e=="string"?e:"")),i()}}),r=this.lockingPromise.then(()=>t);return this.lockingPromise=this.lockingPromise.then(()=>n),r}};function Ff(e,t){return function(n,r,i){const o=i.value;if(typeof o!="function")throw new Error("Cannot use mutex on object property.");return i.value=async function(){const a=this[t];if(!a)throw new Error("mutex property key ".concat(t," doesn't exist on ").concat(e));const s=await a.lock("From ".concat(e,".").concat(r));try{for(var c=arguments.length,l=new Array(c),u=0;u<c;u++)l[u]=arguments[u];return await o.apply(this,l)}finally{s()}},i}}const ar={timeout:500,timeoutFactor:1.5,maxRetryCount:1/0,maxRetryTimeout:1e4};function aN(e,t){const n=Math.floor(t.timeout*Math.pow(t.timeoutFactor,e));return Math.min(t.maxRetryTimeout,n)}function qs(e,t,n,r){const i=Object.assign({},ar,r);let o=i.timeout;const a=async()=>{await function(l){return new _e(u=>{window.setTimeout(u,l)})}(o),o*=i.timeoutFactor,o=Math.min(i.maxRetryTimeout,o)};let s=!1;const c=new _e(async(l,u)=>{t=t||(()=>!1),n=n||(()=>!0);for(let d=0;d<i.maxRetryCount;d+=1){if(s)return u(new Q(k.OPERATION_ABORTED));try{const h=await e();if(!t(h,d)||d+1===i.maxRetryCount)return l(h);await a()}catch(h){if(!n(h,d)||d+1===i.maxRetryCount)return u(h);await a()}}});return c.cancel=()=>s=!0,c}class Z7{constructor(t){pn(this,"input",[]),pn(this,"size",void 0),this.size=t}add(t){this.input.push(t),this.input.length>this.size&&this.input.splice(0,1)}mean(){var t;return this.input.length===0?0:js(t=this.input).call(t,(n,r)=>n+r)/this.input.length}}let Av,Ov=0,$1=0;function HI(e,t,n,r){return new _e((i,o)=>{t.responseType=t.responseType||"json",t.data&&!n?(t.data=JSON.stringify(t.data),Ov+=Ec(t.data)):n&&(t.data.size?Ov+=t.data.size:t.data instanceof FormData?Ov+=J7(t.data):Ov+=Ec(JSON.stringify(t.data))),t.headers=t.headers||{},t.headers["Content-Type"]=t.headers["Content-Type"]||"application/json",t.method="POST",t.url=e,eo.request(t).then(a=>{typeof a.data=="string"?$1+=Ec(a.data):a.data instanceof ArrayBuffer||a.data instanceof Uint8Array?$1+=a.data.byteLength:$1+=Ec(JSON.stringify(a.data)),r&&i({data:a.data,headers:a.headers}),i(a.data)}).catch(a=>{eo.isCancel(a)?o(new Q(k.OPERATION_ABORTED,"cancel token canceled")):a.code==="ECONNABORTED"?o(new Q(k.NETWORK_TIMEOUT,a.message)):a.response?o(new Q(k.NETWORK_RESPONSE_ERROR,a.response.status)):o(new Q(k.NETWORK_ERROR,a.message))})})}async function Uue(e,t){const n=new Blob([t.data],{type:"buffer"});return await HI(e,Ne(Ne({},t),{},{data:n,headers:{"Content-Type":"application/octet-stream"}}),!0)}const LM=()=>window.isSecureContext!==void 0,va=function(e){if(e.match(/[0-9]+\.[0-9]+\.[0-9]+$/))return e;const t=e.match(/([0-9]+\.[0-9]+\.[0-9]+)\-alpha\.([0-9]+)/);if(t&&t[1]&&t[2]){const r=t[1],i=t[2];return"".concat(r,".").concat(i)}const n=e.match(/([0-9]+\.[0-9]+\.[0-9]+)\-special\.([0-9]+)/);if(n&&n[1]&&n[2]){const r=n[1],i=n[2];return"".concat(r,".").concat(100*(Number(i)+1))}return"4.0.0.999"}("4.22.0"),sN=function(){try{return JSON.parse("true")===!0}catch{return!0}}();let zu=function(e){return e.Default="default",e.Auto="auto",e.Relay="relay",e.SdRtn="sd-rtn",e}({});const cN={MIN_FRAME_RATE:1,MAX_FRAME_RATE:30,MAX_THRESHOLD_FRAMERATE:30,BITRATE_MIN_THRESHOLD:100,BITRATE_MAX_THRESHOLD:100,MAX_SCALE:5,BWE_SCALE_UP_THRESHOLD:.6,BWE_SCALE_DOWN_THRESHOLD:.6,PERF_SCALE_UP_THRESHOLD:.7,PERF_SCALE_DOWN_THRESHOLD:.6,MOTION_RESOLUTION_FACTOR:.8,MOTION_BITRATE_FACTOR:.6,DETAIL_FRAMERATE_FACTOR:.8,DETAIL_BITRATE_FACTOR:.6,BALANCE_RESOLUTION_FACTOR:.9,BALANCE_FRAMERATE_FACTOR:.9,BALANCE_BITRATE_FACTOR:.6,OVERUSE_TIMES_THRESHOLD:10,UNDERUSE_TIMES_THRESHOLD:40},lN="v4.22.0-0-g8569241d-dirty(8/15/2024, 7:04:06 PM)",Wn=Ne(Ne({PROCESS_ID:"",ENCRYPT_AES:!0,AREAS:["CHINA","GLOBAL"],WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io","webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io","webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-web-2.ap.sd-rtn.com","cds-ap-web-3.agora.io","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-web-2.ap.sd-rtn.com","sua-ap-web-3.agora.io","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-ap-web-1.agora.io","uap-web-2.ap.sd-rtn.com","uap-ap-web-3.agora.io","uap-web-4.ap.sd-rtn.com"],LOG_UPLOAD_SERVER:"logservice.agora.io",EVENT_REPORT_DOMAIN:"statscollector-1.agora.io",EVENT_REPORT_BACKUP_DOMAIN:"web-2.statscollector.sd-rtn.com",ENABLE_EVENT_REPORT:!0,GATEWAY_ADDRESS:[],GATEWAY_WSS_ADDRESS:"",LIVE_STREAMING_ADDRESS:"",HTTP_CONNECT_TIMEOUT:5e3,SIGNAL_REQUEST_TIMEOUT:1e4,REPORT_STATS:!0,UPLOAD_LOG:!1,NOT_REPORT_EVENT:[],PING_PONG_TIME_OUT:10,WEBSOCKET_TIMEOUT_MIN:1e4,EVENT_REPORT_SEND_INTERVAL:3e3,CONFIG_DISTRIBUTE_INTERVAL:3e5,ENABLE_CONFIG_DISTRIBUTE:!0,CANDIDATE_TIMEOUT:5e3,SHOW_REPORT_INVOKER_LOG:!1,JOIN_EXTEND:"",PUB_EXTEND:"",SUB_EXTEND:"",FORCE_TURN:!1,TURN_ENABLE_TCP:!0,TURN_ENABLE_UDP:!0,MAX_UPLOAD_CACHE:50,UPLOAD_CACHE_INTERVAL:2e3,AJAX_REQUEST_CONCURRENT:3,REPORT_APP_SCENARIO:void 0,GATEWAY_DOMAINS:["edge.agora.io","edge.sd-rtn.com"],CONNECT_GATEWAY_WITHOUT_DOMAIN:!1,WORKER_DOMAIN:"edge.agora.io",TURN_DOMAIN:"edge.agora.io",EVENT_REPORT_RETRY:!0,CHROME_FORCE_PLAN_B:!1,AUDIO_SOURCE_VOLUME_UPDATE_INTERVAL:400,AUDIO_SOURCE_AVG_VOLUME_DURATION:3e3,AUDIO_VOLUME_INDICATION_INTERVAL:2e3,VOLUME_VOICE_WEIGHT:10,GET_VOLUME_OF_MUTED_AUDIO_TRACK:!1,STATS_UPDATE_INTERVAL:250,NORMAL_EVENT_QUEUE_CAPACITY:100,CUSTOM_REPORT:!0,CUSTOM_REPORT_LIMIT:20,PROXY_SERVER_TYPE2:"webnginx-proxy.agora.io",PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com","webrtc-cloud-proxy.agora.io"],CUSTOM_PUB_ANSWER_MODIFIER:null,CUSTOM_SUB_ANSWER_MODIFIER:null,CUSTOM_PUB_OFFER_MODIFIER:null,CUSTOM_SUB_OFFER_MODIFIER:null,DSCP_TYPE:"high",REMOVE_NEW_CODECS:!0,FRAGEMENT_LENGTH:3,WEBSOCKET_COMPRESS:!1,SIMULCAST:!1,PRELOAD_MEDIA_COUNT:0,CHECK_VIDEO_VISIBLE_INTERVAL:3e4,CHECK_LOCAL_STATS_INTERVAL:250,PROFILE_SWITCH_INTERVAL:2e3,UNSUPPORTED_VIDEO_CODEC:[],ENUMERATE_DEVICES_INTERVAL:!1,ENUMERATE_DEVICES_INTERVAL_TIME:1e4,USE_NEW_TOKEN:!1,CLOSE_AFB_FOR_LOCAL_AP:!0,JOIN_MAX_CONCURRENCY:6,JOIN_WITH_FALLBACK_SIGNAL_PROXY:!0,JOIN_WITH_FALLBACK_MEDIA_PROXY:!0,JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE:!1,JOIN_GATEWAY_TRY_443PORT_DURATION:2e3,JOIN_GATEWAY_USE_443PORT_ONLY:!1,JOIN_GATEWAY_USE_DUAL_DOMAIN:!0,JOIN_GATEWAY_FALLBACK_PORT:443,USE_TURN_SERVER_OF_GATEWAY:!1,H264_PROFILE_LEVEL_ID:"",USE_NEW_LOG:!1,LOG_VERSION:3,MEDIA_DEVICE_CONSTRAINTS:null,ENCRYPT_PROXY_USERNAME_AND_PSW:!0,SDP_LOGGING:!1,CSP_DETECTED_HOSTNAME_LIST:["agora.io","sd-rtn.com"],REMOTE_AUDIO_TRACK_USES_WEB_AUDIO:!1,LOCAL_AUDIO_TRACK_USES_WEB_AUDIO:!1,BITRATE_ADAPTER_TYPE:"STANDARD_BITRATE",AI_DENOISER_PARAMETERS:{excludedLinks:[]},ADJUST_3A_FROM_PLUGINS:!0,RAISE_H264_BASELINE_PRIORITY:!0,FILTER_SEND_H264_BASELINE:!1,X_GOOGLE_START_BITRATE:void 0,NEW_REPORT_SERVER:!1,NEW_REPORT_SERVER_DOMAINS:["data-reporting.agora.io","data-reporting.agora.io"],VIDEO_INSPECT_WORKER_MESSAGE_LENGTH_LIMIT:3e5,VIDEO_INSPECT_INTERVAL_MINIMUM:1e3,VIDEO_INSPECT_QUALITY_RATIO:.9,VIDEO_INSPECT_WORKER_MANAGER_HOST:"edge.agora.io",VIDEO_INSPECT_WORKER_MANAGER_PORT:"",VIDEO_INSPECT_WORKER_PORT:"",SHOW_VIDEO_INSPECT_WORKER_MESSAGE:!1,STATS_COLLECTOR_PORT:443,FORCE_TURN_TCP:!1,WEBAUDIO_INIT_OPTIONS:void 0,FILTER_VIDEO_FEC:!0,FILTER_AUDIO_FEC:!1,CHROME_DUAL_STREAM_USE_ENCODING:!0,DISABLE_DUAL_STREAM_USE_ENCODING:!1,EXTENSION_USAGE_UPLOAD_INTERVAL:1e4,ICE_RESTART:!0,ICE_RESTART_INTERVAL:1e4,NEW_ICE_RESTART:!1,TRANSMITTER_INITIAL_RTT:30,TRANSMITTER_INITIAL_RTO:30,TRANSMITTER_MAX_BATCH_ACK_COUNT:2,TRANSMITTER_MAX_RTO:500,DATACHANNEL_COMPRESS:!1,FINGERPRINT:null,DC_JOIN_WITH_FAILBACK:5e3,ENABLE_VIDEO_FRAME_CALLBACK:!0,VIDEO_FREEZE_DURATION:500,SPATIALIZER_PARAMETERS:{},UPLOAD_LOG_INTERVAL:3e3,UPLOAD_LOG_REQUEST_RETRY_INTERVAL:2e3,UPLOAD_LOG_REQUEST_MAX_RETRY_INTERVAL:2e4,UPLOAD_LOG_TRY_INTERVAL_WHILE_OFF:5e3,UPLOAD_LOG_RETRY_INTERVAL_V1:1e4,UPLOAD_LOG_TWICE_RETRY_INTERVAL_V1:200,UPLOAD_LOG_LENGTH_EACH_TIME:10,APP_TYPE:0,DISABLE_WEBAUDIO:!1,CHANNEL_MEDIA_RELAY_SERVERS:void 0,KEEP_LAST_FRAME:!0,FORWARD_P2P_CREATION:!0,SYNC_GROUP:!0,BLOCK_LOCAL_CLIENT:!1,AP_AREA:!0,ENABLE_ENCODED_TRANSFORM:!1,ENABLE_VIDEO_SEI:!1,IMAGE_MODERATION_WORKER_HOST:"edge.agora.io",IMAGE_MODERATION_WORKER_MESSAGE_LENGTH_LIMIT:3e5,IMAGE_MODERATION_INTERVAL_MINIMUM:1e3,SHOW_IMAGE_MODERATION_WORKER_MESSAGE:!1,IMAGE_MODERATION_QUALITY_RATIO:.9,IMAGE_MODERATION_UPLOAD_REPORT_INTERVAL:5e3,SHOW_GLOBAL_CLIENT_LIST:!1,DATASTREAM_MAX_RETRANSMITS:10,TCP_CANDIDATE_ONLY:!1,EXTERNAL_SIGNAL_REQUEST_TIMEOUT:3e3,SHOW_P2P_LOG:!1,MAX_P2P_TIMEOUT:3e4,P2P_TOKEN_INTERVAL:1e3,SHOW_DATASTREAM2_LOG:!1,RESTRICTION_SET_PLAYBACK_DEVICE:!0,USE_PURE_ENCRYPTION_MASTER_KEY:!1,ACCOUNT_REGISTER_RETRY_TIMEOUT:1,ACCOUNT_REGISTER_RETRY_RATIO:2,ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX:6e4,ACCOUNT_REGISTER_RETRY_COUNT_MAX:1e5,AUDIO_CONTEXT:null,WEBCS_BACKUP_CONNECT_TIMEOUT:6e3,PLAYER_STATE_DEFER:2e3,SIGNAL_REQUEST_WATCH_INTERVAL:1e3,FILEPATH_LENMAX:255,DUALSTREAM_OPERATION_CHECK:!0,MEDIA_ELEMENT_EXISTS_DEPTH:3,SHIM_CANDIDATE:!1,LEAVE_MSG_TIMEOUT:2e3,STATS_FILTER:{transportId:!0,googTrackId:!0},FILTER_VIDEO_CODEC:[],USE_NEW_NETWORK_CONFIG:!1,AUTO_RESET_AUDIO_ROUTE:!1,PLUGIN_INFO:[],OVERUSE_DETECTOR_PARAMS:cN,ENABLE_AG_ADAPTATION:!0,FORCE_AG_HIGH_FRAMERATE:!1,FORCE_SUPPORT_AG_ADAPTATION:!1,CUSTOM_ADAPTATION_DEFAULT_MODE:"",ENCODER_CONFIG_LIMIT:{},CAMERA_CAPTURE_CONFIG:void 0,HIDE_NO_POSTER:!1,AP_CACHE_NUM:10,AP_UPDATE_INTERVAL:12e4,AP_CACHE_LIFETIME:12e4,MAX_PRELOAD_ASYNC_LENGTH:3,ENABLE_PRELOAD:!0},{ENABLE_PUBLISHED_USER_LIST:!0,MAX_SUBSCRIPTION:50,SUBSCRIBE_AUDIO_FILTER_TOPN:void 0,ENABLE_PUBLISH_AUDIO_FILTER:void 0,ENABLE_USER_LICENSE_CHECK:!0,USE_PUB_RTX:!0,USE_SUB_RTX:!0,DISABLE_FEC:void 0,ENABLE_NTP_REPORT:!1,ENABLE_INSTANT_VIDEO:!1,ENABLE_DATASTREAM_2:!1,ENABLE_USER_AUTO_REBALANCE_CHECK:!0,USE_XR:!0,ENABLE_LOSSBASED_BWE:!0,ENABLE_AUT_CC:!1,ENABLE_CC_FALLBACK:void 0,ENABLE_PREALLOC_PC:!1,SUBSCRIBE_TWCC:!0,PUBLISH_TWCC:!1,ENABLE_SVC:!1,ENABLE_SVC_DEFAULT_CODECS:["H264","VP8","VP9","AV1"],SVC:[],ENABLE_FULL_LINK_AV_SYNC:!1,SVC_MODE:null,PRE_SUB_NUM:2,ENABLE_PRE_SUB:!1,ENABLE_AUT_FEEDBACK:!1}),{},{USE_CANDIDATE_FROM_AP_DETAIL:!1});function Qt(e,t,n){var r,i,o;Ce(r=Object.keys(Wn)).call(r,e)&&(!n&&Ce(i=Object.keys(ql)).call(i,e)||(Wn[e]=t,e==="ENABLE_VIDEO_SEI"&&t===!0&&(Wn.ENABLE_ENCODED_TRANSFORM=!0),e==="USE_NEW_NETWORK_CONFIG"&&t&&(o=!!t,Wn.USE_NEW_NETWORK_CONFIG=o,o&&(Wn.WEBCS_DOMAIN=["webrtc2-2.ap.sd-rtn.com"],Wn.WEBCS_DOMAIN_BACKUP_LIST=["webrtc2-4.ap.sd-rtn.com"],Wn.CDS_AP=["cds-web-2.ap.sd-rtn.com","cds-web-4.ap.sd-rtn.com"],Wn.ACCOUNT_REGISTER=["sua-web-2.ap.sd-rtn.com","sua-web-4.ap.sd-rtn.com"],Wn.EVENT_REPORT_DOMAIN="web-2.statscollector.sd-rtn.com",Wn.EVENT_REPORT_BACKUP_DOMAIN="statscollector-1.agora.io",Wn.GATEWAY_DOMAINS=["edge.sd-rtn.com"])),e==="ENABLE_PRE_SUB"&&t&&(Wn.ENABLE_INSTANT_VIDEO=!0,Wn.ENABLE_PREALLOC_PC=!0),e==="ENABLE_SVC"&&t&&(Wn.ENABLE_AUT_CC=!0)))}function H(e){return Wn[e]}const ql={};var ft=function(e){return e.SET_SESSION_ID="SET_SESSION_ID",e.SET_P2P_ID="SET_P2P_id",e.SET_DC_ID="SET_DC_id",e.SET_UID="SET_UID",e.SET_INT_UID="SET_INT_UID",e.SET_PUB_ID="SET_PUB_ID",e.SET_CLOUD_PROXY_SERVER_MODE="SET_CLOUD_PROXY_SERVER_MODE",e.KEY_METRIC_CLIENT_CREATED="KEY_METRIC_CLIENT_CREATED",e.KEY_METRIC_JOIN_START="KEY_METRIC_JOIN_START",e.AVOID_JOIN_START="AVOID_JOIN_START",e.KEY_METRIC_JOIN_END="KEY_METRIC_JOIN_END",e.KEY_METRIC_REQUEST_AP_START="KEY_METRIC_REQUEST_AP_START",e.KEY_METRIC_REQUEST_AP_END="KEY_METRIC_REQUEST_AP_END",e.KEY_METRIC_JOIN_GATEWAY_START="KEY_METRIC_JOIN_GATEWAY_START",e.KEY_METRIC_JOIN_GATEWAY_END="KEY_METRIC_JOIN_GATEWAY_END",e.KEY_METRIC_PEER_CONNECTION_START="KEY_METRIC_PEER_CONNECTION_START",e.KEY_METRIC_PEER_CONNECTION_END="KEY_METRIC_PEER_CONNECTION_END",e.KEY_METRIC_DESCRIPTION_START="KEY_METRIC_DESCRIPTION_START",e.KEY_METRIC_ICE_CONNECTION_END="KEY_METRIC_ICE_CONNECTION_END",e.KEY_METRIC_SIGNAL_CHANNEL_OPEN="KEY_METRIC_SIGNAL_CHANNEL_OPEN",e.KEY_METRIC_PUBLISH="KEY_METRIC_PUBLISH",e.KEY_METRIC_SUBSCRIBE="KEY_METRIC_SUBSCRIBE",e.RECORD_JOIN_CHANNEL_SERVICE="RECORD_JOIN_CHANNEL_SERVICE",e.RESET_JOIN_CHANNEL_SERVICE_RECORDS="RESET_JOIN_CHANNEL_SERVICE_RECORDS",e.RESET_KEY_METRICS="RESET_KEY_METRICS",e.SET_USE_P2P="SET_USE_P2P",e.SET_TRANSPORT_TYPE="SET_TRANSPORT_TYPE",e}(ft||{});class Bue{constructor(t,n,r,i){pn(this,"state",void 0),this.state={codec:t,audioCodec:n,mode:r,clientId:i,sessionId:null,p2pId:0,dcId:0,pubId:0,subId:0,avoidJoinStart:0,keyMetrics:{publish:[],subscribe:[]},joinChannelServiceRecords:[],cloudProxyServerMode:"disabled",useP2P:!1,p2pTransport:zu.Default}}dispatch(t){this.state=function(n,r){switch(r.type){case ft.SET_SESSION_ID:return Ne(Ne({},n),{},{sessionId:r.sessionId});case ft.SET_P2P_ID:return Ne(Ne({},n),{},{p2pId:r.p2pId});case ft.SET_UID:return Ne(Ne({},n),{},{uid:r.uid});case ft.SET_INT_UID:return Ne(Ne({},n),{},{intUid:r.intUid});case ft.SET_PUB_ID:return Ne(Ne({},n),{},{pubId:r.pubId});case ft.KEY_METRIC_CLIENT_CREATED:return Ne(Ne({},n),{},{keyMetrics:Ne(Ne({},n.keyMetrics),{},{clientCreated:r.metric})});case ft.KEY_METRIC_JOIN_START:return Ne(Ne({},n),{},{keyMetrics:Ne(Ne({},n.keyMetrics),{},{joinStart:r.metric})});case ft.AVOID_JOIN_START:return Ne(Ne({},n),{},{avoidJoinStart:r.avoidJoinStart});case ft.KEY_METRIC_JOIN_END:return Ne(Ne({},n),{},{keyMetrics:Ne(Ne({},n.keyMetrics),{},{joinEnd:r.metric})});case ft.KEY_METRIC_REQUEST_AP_START:return Ne(Ne({},n),{},{keyMetrics:Ne(Ne({},n.keyMetrics),{},{requestAPStart:r.metric})});case ft.KEY_METRIC_REQUEST_AP_END:return Ne(Ne({},n),{},{keyMetrics:Ne(Ne({},n.keyMetrics),{},{requestAPEnd:r.metric})});case ft.KEY_METRIC_JOIN_GATEWAY_START:return Ne(Ne({},n),{},{keyMetrics:Ne(Ne({},n.keyMetrics),{},{joinGatewayStart:r.metric})});case ft.KEY_METRIC_JOIN_GATEWAY_END:return Ne(Ne({},n),{},{keyMetrics:Ne(Ne({},n.keyMetrics),{},{joinGatewayEnd:r.metric})});case ft.KEY_METRIC_PEER_CONNECTION_START:return Ne(Ne({},n),{},{keyMetrics:Ne(Ne({},n.keyMetrics),{},{peerConnectionStart:r.metric})});case ft.KEY_METRIC_PEER_CONNECTION_END:return Ne(Ne({},n),{},{keyMetrics:Ne(Ne({},n.keyMetrics),{},{peerConnectionEnd:r.metric})});case ft.KEY_METRIC_DESCRIPTION_START:return Ne(Ne({},n),{},{keyMetrics:Ne(Ne({},n.keyMetrics),{},{descriptionStart:r.metric})});case ft.KEY_METRIC_SIGNAL_CHANNEL_OPEN:return Ne(Ne({},n),{},{keyMetrics:Ne(Ne({},n.keyMetrics),{},{signalChannelOpen:r.metric})});case ft.KEY_METRIC_ICE_CONNECTION_END:return Ne(Ne({},n),{},{keyMetrics:Ne(Ne({},n.keyMetrics),{},{iceConnectionEnd:r.metric})});case ft.KEY_METRIC_PUBLISH:{const i=n.keyMetrics.publish,o=i.findIndex(a=>a.trackId===r.metric.trackId);return o!==-1?(i[o]=Ne(Ne({},i[o]),r.metric),Ne(Ne({},n),{},{keyMetrics:Ne(Ne({},n.keyMetrics),{},{publish:[...i]})})):Ne(Ne({},n),{},{keyMetrics:Ne(Ne({},n.keyMetrics),{},{publish:[...n.keyMetrics.publish,r.metric]})})}case ft.KEY_METRIC_SUBSCRIBE:{const i=n.keyMetrics.subscribe,o=i.findIndex(a=>a.userId===r.metric.userId&&a.type===r.metric.type);return o!==-1?(i[o]=Ne(Ne({},i[o]),r.metric),Ne(Ne({},n),{},{keyMetrics:Ne(Ne({},n.keyMetrics),{},{subscribe:[...i]})})):Ne(Ne({},n),{},{keyMetrics:Ne(Ne({},n.keyMetrics),{},{subscribe:[...n.keyMetrics.subscribe,r.metric]})})}case ft.SET_CLOUD_PROXY_SERVER_MODE:return n.cloudProxyServerMode=r.mode,n;case ft.RECORD_JOIN_CHANNEL_SERVICE:return typeof r.index!="number"?n.joinChannelServiceRecords=[...n.joinChannelServiceRecords,r.record]:(n.joinChannelServiceRecords[r.index]=Ne(Ne({},n.joinChannelServiceRecords[r.index]),r.record),n.joinChannelServiceRecords=[...n.joinChannelServiceRecords]),n;case ft.RESET_JOIN_CHANNEL_SERVICE_RECORDS:return n.joinChannelServiceRecords=[],n;case ft.RESET_KEY_METRICS:return n.keyMetrics={publish:[],subscribe:[]},n;case ft.SET_USE_P2P:return Ne(Ne({},n),{},{useP2P:r.val});case ft.SET_TRANSPORT_TYPE:return Ne(Ne({},n),{},{p2pTransport:r.val});default:return n}}(this.state,t)}set sessionId(t){this.dispatch({type:ft.SET_SESSION_ID,sessionId:t})}get sessionId(){return this.state.sessionId}set codec(t){this.state.codec=t}get codec(){return this.state.codec}get mode(){return this.state.mode}get audioCodec(){return this.state.audioCodec}get clientId(){return this.state.clientId}set p2pId(t){this.dispatch({type:ft.SET_P2P_ID,p2pId:t})}get p2pId(){return this.state.p2pId}set dcId(t){this.dispatch({type:ft.SET_DC_ID,dcId:t})}get dcId(){return this.state.dcId}set uid(t){this.dispatch({type:ft.SET_UID,uid:t})}get uid(){return this.state.uid}set intUid(t){this.dispatch({type:ft.SET_INT_UID,intUid:t})}get intUid(){return this.state.intUid}set pubId(t){this.dispatch({type:ft.SET_PUB_ID,pubId:t})}get pubId(){return this.state.pubId}set cloudProxyServerMode(t){this.dispatch({type:ft.SET_CLOUD_PROXY_SERVER_MODE,mode:t})}get cloudProxyServerMode(){return this.state.cloudProxyServerMode}set useP2P(t){this.dispatch({type:ft.SET_USE_P2P,val:t})}get useP2P(){return this.state.useP2P}set p2pTransport(t){this.dispatch({type:ft.SET_TRANSPORT_TYPE,val:t})}get p2pTransport(){return this.state.p2pTransport}clientCreated(){this.dispatch({type:ft.KEY_METRIC_CLIENT_CREATED,metric:Date.now()})}joinStart(){this.dispatch({type:ft.KEY_METRIC_JOIN_START,metric:Date.now()})}joinEnd(){this.dispatch({type:ft.KEY_METRIC_JOIN_END,metric:Date.now()})}requestAPStart(){this.dispatch({type:ft.KEY_METRIC_REQUEST_AP_START,metric:Date.now()})}requestAPEnd(){this.dispatch({type:ft.KEY_METRIC_REQUEST_AP_END,metric:Date.now()})}joinGatewayStart(){this.dispatch({type:ft.KEY_METRIC_JOIN_GATEWAY_START,metric:Date.now()})}joinGatewayEnd(){this.dispatch({type:ft.KEY_METRIC_JOIN_GATEWAY_END,metric:Date.now()})}peerConnectionStart(){this.dispatch({type:ft.KEY_METRIC_PEER_CONNECTION_START,metric:Date.now()})}peerConnectionEnd(){this.dispatch({type:ft.KEY_METRIC_PEER_CONNECTION_END,metric:Date.now()})}descriptionStart(){this.dispatch({type:ft.KEY_METRIC_DESCRIPTION_START,metric:Date.now()})}signalChannelOpen(){this.dispatch({type:ft.KEY_METRIC_SIGNAL_CHANNEL_OPEN,metric:Date.now()})}iceConnectionEnd(){this.dispatch({type:ft.KEY_METRIC_ICE_CONNECTION_END,metric:Date.now()})}publish(t,n,r,i){this.dispatch({type:ft.KEY_METRIC_PUBLISH,metric:Ne(Ne({trackId:t,type:n},r&&{publishStart:r}),i&&{publishEnd:i})})}subscribe(t,n,r,i,o,a,s){this.dispatch({type:ft.KEY_METRIC_SUBSCRIBE,metric:Ne(Ne(Ne(Ne(Ne({userId:t,type:n},r&&{subscribeStart:r}),i&&{subscribeEnd:i}),o&&{firstFrame:o}),a&&{streamAdded:a}),s&&{firstDecoded:s})})}massSubscribe(t,n,r,i){t.forEach(o=>{this.dispatch({type:ft.KEY_METRIC_SUBSCRIBE,metric:Ne(Ne(Ne({userId:o.userId,type:o.type},n&&{subscribeStart:n}),r&&{subscribeEnd:r}),i&&{firstFrame:i})})})}get keyMetrics(){return this.state.keyMetrics}recordJoinChannelService(t,n){t.service==="gateway"&&Array.isArray(t.urls)&&(t.urls=t.urls.map(r=>r.replace(/(\d+)-\d+-\d+-(\d+)/,"$1-*-*-$2")));try{return typeof n!="number"?(this.dispatch({type:ft.RECORD_JOIN_CHANNEL_SERVICE,record:Ne(Ne({},t),{},{sessionId:this.sessionId,cloudProxyMode:this.cloudProxyServerMode,uid:this.uid})}),this.state.joinChannelServiceRecords.length-1):(n<0||n>=this.state.joinChannelServiceRecords.length||this.dispatch({type:ft.RECORD_JOIN_CHANNEL_SERVICE,record:t,index:n}),n)}catch{return 0}}resetJoinChannelServiceRecords(){this.dispatch({type:ft.RESET_JOIN_CHANNEL_SERVICE_RECORDS})}resetKeyMetrics(){this.dispatch({type:ft.RESET_KEY_METRICS})}get joinChannelServiceRecords(){try{return this.state.joinChannelServiceRecords}catch{return[]}}get avoidJoinStart(){return this.state.avoidJoinStart}set avoidJoinStart(t){this.dispatch({type:ft.AVOID_JOIN_START,avoidJoinStart:t})}}let $y=function(e){return e.h264="h264",e.h265="h265",e.vp8="vp8",e.vp9="vp9",e.av1="av1",e}({});(function(e){e.opus="opus",e.pcma="pcma",e.pcmu="pcmu",e.g722="g722"})({});const kM=128,$ue=96,MM=1e3,mh=10;let Vue=0;function zn(e,t,n){return(t=function(r){var i=function(o,a){if(typeof o!="object"||!o)return o;var s=o[Symbol.toPrimitive];if(s!==void 0){var c=s.call(o,"string");if(typeof c!="object")return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(o)}(r);return typeof i=="symbol"?i:i+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function FM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function at(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?FM(Object(n),!0).forEach(function(r){zn(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}const e9=new class extends Pn{constructor(){super(...arguments),zn(this,"currentUploadLogID",0)}reportLogUploadError(e){const{errorRange:t}=e;t[t.length-1]&&t[t.length-1]>this.currentUploadLogID&&(this.currentUploadLogID=t[t.length-1],this.emit("REPORT_LOG_UPLOAD",e))}};class jue{constructor(t){zn(this,"logger",void 0),zn(this,"prefixLists",[]),this.logger=t}debug(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this.logger.debug(...this.prefixLists,...n)}info(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this.logger.info(...this.prefixLists,...n)}warning(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this.logger.warning(...this.prefixLists,...n)}error(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this.logger.error(...this.prefixLists,...n)}prefix(t){return this.prefixLists.push(t),this}popPrefix(){return this.prefixLists.pop(),this}}function V1(){const e=new Date;return e.toTimeString().split(" ")[0]+":"+e.getMilliseconds()}function UM(){const e=new Date,t=/((\d+:){2}\d+)/.exec(new Date().toUTCString());return t?(t==null?void 0:t[0])+":"+e.getUTCMilliseconds():e.toTimeString().split(" ")[0]+":"+e.getMilliseconds()}const ua={DEBUG:0,INFO:1,WARNING:2,ERROR:3,NONE:4},xv=Date.now(),jp=e=>{for(const t in ua)if(Object.prototype.hasOwnProperty.call(ua,t)&&ua[t]===e)return t;return"DEFAULT"},w=new class{constructor(){zn(this,"proxyServerURL",void 0),zn(this,"logLevel",ua.DEBUG),zn(this,"uploadState","collecting"),zn(this,"uploadLogWaitingList",[]),zn(this,"uploadLogUploadingList",[]),zn(this,"uploadErrorCount",0),zn(this,"currentLogID",0),zn(this,"url",void 0),zn(this,"extLog",(e,t)=>{this.appendLogToWaitingList(e,...t)})}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=[ua.DEBUG].concat(t);this.log.apply(this,r)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=[ua.INFO].concat(t);this.log.apply(this,r)}warning(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=[ua.WARNING].concat(t);this.log.apply(this,r)}warn(){this.warning(...arguments)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=[ua.ERROR].concat(t);this.log.apply(this,r)}upload(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=[ua.DEBUG].concat(t);this.uploadLog.apply(this,r)}setLogLevel(e){e=Math.min(Math.max(0,e),4),this.logLevel=e}enableLogUpload(){Qt("UPLOAD_LOG",!0)}disableLogUpload(){Qt("UPLOAD_LOG",!1),this.uploadLogUploadingList=[],this.uploadLogWaitingList=[]}setProxyServer(e){this.proxyServerURL=e}prefix(e){return new jue(this).prefix(e)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(Date.now()-xv<100)return void setTimeout(()=>{this.log(...t)},Date.now()-xv);const r=Math.max(0,Math.min(4,t[0]));if(t[0]=V1()+" Agora-SDK [".concat(jp(r),"]:"),this.appendLogToWaitingList(r,...t),r<this.logLevel)return;const i=V1()+" %cAgora-SDK [".concat(jp(r),"]:");let o=[];if(!H("USE_NEW_LOG"))switch(r){case ua.DEBUG:o=[i,"color: #64B5F6;"].concat(t.slice(1)),console.log.apply(console,o);break;case ua.INFO:o=[i,"color: #1E88E5; font-weight: bold;"].concat(t.slice(1)),console.log.apply(console,o);break;case ua.WARNING:o=[i,"color: #FB8C00; font-weight: bold;"].concat(t.slice(1)),console.warn.apply(console,o);break;case ua.ERROR:o=[i,"color: #B00020; font-weight: bold;"].concat(t.slice(1)),console.error.apply(console,o)}}uploadLog(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(Date.now()-xv<100)return void setTimeout(()=>{this.uploadLog(...t)},Date.now()-xv);const r=Math.max(0,Math.min(4,t[0]));t[0]=V1()+" Agora-SDK [".concat(jp(r),"]:"),this.appendLogToWaitingList(r,...t)}appendLogToWaitingList(e){if(!H("UPLOAD_LOG"))return;for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Array.isArray(n[0])?n[0][0]=UM()+" Agora-SDK [".concat(jp(e),"]:"):n[0]=UM()+" Agora-SDK [".concat(jp(e),"]:");let i="";n.forEach(o=>{typeof o=="object"&&(o=JSON.stringify(o)),i+="".concat(o," ")}),this.uploadLogWaitingList.push({payload_str:i,log_level:e,log_item_id:this.currentLogID++}),this.uploadState==="uploading"&&this.uploadLogUploadingList.length===0&&this.uploadLogInterval()}startUpload(){this.uploadState="uploading",this.uploadLogUploadingList.length===0&&this.uploadLogInterval()}async uploadLogs(){const e=this.uploadLogUploadingList,t={sdk_version:va,process_id:H("PROCESS_ID"),payload:JSON.stringify(e)};return qs(async()=>{const n=await eo.post(this.url||(this.proxyServerURL?"https://".concat(this.proxyServerURL,"/ls/?h=").concat(H("LOG_UPLOAD_SERVER"),"&p=443&d=upload/v1"):"https://".concat(H("LOG_UPLOAD_SERVER"),"/upload/v1")),t,{responseType:"text"});if(n.data!=="OK"){const r=new Error("unexpected upload log response");throw r.response=n,r}},()=>(this.uploadLogUploadingList=[],!1),n=>{const r={status:-1,message:n.message,errorRange:e.map(i=>i.log_item_id)};return n.response?(r.status=n.response.status,r.data=n.response.data,r.headers=n.response.headers):n.request&&(r.status=n.request.status),e9.reportLogUploadError(r),!0},{timeout:H("UPLOAD_LOG_REQUEST_RETRY_INTERVAL"),maxRetryTimeout:H("UPLOAD_LOG_REQUEST_MAX_RETRY_INTERVAL")})}uploadLogInterval(){this.uploadLogUploadingList.length===0&&this.uploadLogWaitingList.length===0||(this.uploadLogUploadingList.length===0&&(this.uploadLogUploadingList=this.uploadLogWaitingList.splice(0,H("UPLOAD_LOG_LENGTH_EACH_TIME"))),this.uploadLogs().then(()=>{this.uploadErrorCount=0,this.uploadLogWaitingList.length>0&&window.setTimeout(()=>this.uploadLogInterval(),H("UPLOAD_LOG_INTERVAL"))}).catch(e=>{this.uploadErrorCount+=1,this.uploadErrorCount<2?window.setTimeout(()=>this.uploadLogInterval(),H("UPLOAD_LOG_TWICE_RETRY_INTERVAL_V1")):window.setTimeout(()=>this.uploadLogInterval(),H("UPLOAD_LOG_RETRY_INTERVAL_V1"))}))}};var BM;function Hue(e){return xr(e.reportId,"params.reportId",0,100,!1),xr(e.category,"params.category",0,100,!1),xr(e.event,"params.event",0,100,!1),xr(e.label,"params.label",0,100,!1),Zt(e.value,"params.value",Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,!1),!0}(BM={}).FREE="free",BM.UPLOADING="uploading",function(e){e[e.MISC=0]="MISC",e[e.INTERNAL_EVENT=1]="INTERNAL_EVENT",e[e.PUBLIC_EVENT=2]="PUBLIC_EVENT",e[e.WEB_EVENT=3]="WEB_EVENT",e[e.INTERNAL_API=4]="INTERNAL_API",e[e.WEB_API=5]="WEB_API",e[e.PUBLIC_API=6]="PUBLIC_API"}({});const zue={sid:"",lts:0,success:null,cname:null,uid:null,peer:null,cid:null,elapse:null,extend:null,vid:0};let Or=function(e){return e.PUBLISH="publish",e.SUBSCRIBE="subscribe",e.WS_COMPRESSOR_INIT="ws_compressor_init",e.SESSION_INIT="session_init",e.JOIN_CHOOSE_SERVER="join_choose_server",e.REQ_USER_ACCOUNT="req_user_account",e.JOIN_GATEWAY="join_gateway",e.REJOIN_GATEWAY="rejoin_gateway",e.STREAM_SWITCH="stream_switch",e.REQUEST_PROXY_WORKER_MANAGER="request_proxy_worker_manager",e.REQUEST_PROXY_APPCENTER="request_proxy_appcenter",e.FIRST_VIDEO_RECEIVED="first_video_received",e.FIRST_AUDIO_RECEIVED="first_audio_received",e.FIRST_VIDEO_DECODE="first_video_decode",e.FIRST_AUDIO_DECODE="first_audio_decode",e.ON_ADD_AUDIO_STREAM="on_add_audio_stream",e.ON_ADD_VIDEO_STREAM="on_add_video_stream",e.ON_UPDATE_STREAM="on_update_stream",e.ON_REMOVE_STREAM="on_remove_stream",e.USER_ANALYTICS="req_user_analytics",e.PC_STATS="pc_stats",e.UPDATE_REMOTE_RTPCAPABILITIES="update_remote_rtpCapabilities",e}({}),xn=function(e){return e.SESSION="io.agora.pb.Wrtc.Session",e.JOIN_CHOOSE_SERVER="io.agora.pb.Wrtc.JoinChooseServer",e.REQ_USER_ACCOUNT="io.agora.pb.Wrtc.ReqUserAccount",e.JOIN_GATEWAY="io.agora.pb.Wrtc.JoinGateway",e.RE_JOIN_GATEWAY="io.agora.pb.Wrtc.ReJoinGateway",e.PUBLISH="io.agora.pb.Wrtc.Publish",e.SUBSCRIBE="io.agora.pb.Wrtc.Subscribe",e.WS_COMPRESSOR_INIT="io.agora.pb.Wrtc.WsCompressorInit",e.STREAM_SWITCH="io.agora.pb.Wrtc.StreamSwitch",e.AUDIO_SENDING_STOPPED="io.agora.pb.Wrtc.AudioSendingStopped",e.VIDEO_SENDING_STOPPED="io.agora.pb.Wrtc.VideoSendingStopped",e.REQUEST_PROXY_APPCENTER="io.agora.pb.Wrtc.RequestProxyAppCenter",e.REQUEST_PROXY_WORKER_MANAGER="io.agora.pb.Wrtc.RequestProxyWorkerManager",e.API_INVOKE="io.agora.pb.Wrtc.ApiInvoke",e.FIRST_VIDEO_RECEIVED="io.agora.pb.Wrtc.FirstVideoReceived",e.FIRST_AUDIO_RECEIVED="io.agora.pb.Wrtc.FirstAudioReceived",e.FIRST_VIDEO_DECODE="io.agora.pb.Wrtc.FirstVideoDecode",e.FIRST_AUDIO_DECODE="io.agora.pb.Wrtc.FirstAudioDecode",e.ON_ADD_AUDIO_STREAM="io.agora.pb.Wrtc.OnAddAudioStream",e.ON_ADD_VIDEO_STREAM="io.agora.pb.Wrtc.OnAddVideoStream",e.ON_UPDATE_STREAM="io.agora.pb.Wrtc.OnUpdateStream",e.ON_REMOVE_STREAM="io.agora.pb.Wrtc.OnRemoveStream",e.JOIN_CHANNEL_TIMEOUT="io.agora.pb.Wrtc.JoinChannelTimeout",e.PEER_PUBLISH_STATUS="io.agora.pb.Wrtc.PeerPublishStatus",e.WORKER_EVENT="io.agora.pb.Wrtc.WorkerEvent",e.AP_WORKER_EVENT="io.agora.pb.Wrtc.APWorkerEvent",e.JOIN_WEB_PROXY_AP="io.agora.pb.Wrtc.JoinWebProxyAP",e.WEBSOCKET_QUIT="io.agora.pb.Wrtc.WebSocketQuit",e.USER_ANALYTICS="io.agora.pb.Wrtc.UserAnalytics",e.AUTOPLAY_FAILED="io.agora.pb.Wrtc.AutoplayFailed",e.PC_STATS="io.agora.pb.Wrtc.PCStats",e.UPDATE_REMOTE_RTPCAPABILITIES="io.agora.pb.Wrtc.UpdateRemoteRTPCapabilities",e}({});(function(e){e[e.WORKER_EVENT=156]="WORKER_EVENT",e[e.AP_WORKER_EVENT=160]="AP_WORKER_EVENT"})({});let Wue=function(e){return e[e.SESSION=26]="SESSION",e[e.JOIN_CHOOSE_SERVER=27]="JOIN_CHOOSE_SERVER",e[e.REQ_USER_ACCOUNT=196]="REQ_USER_ACCOUNT",e[e.JOIN_GATEWAY=28]="JOIN_GATEWAY",e[e.PUBLISH=30]="PUBLISH",e[e.SUBSCRIBE=29]="SUBSCRIBE",e[e.WS_COMPRESSOR_INIT=9430]="WS_COMPRESSOR_INIT",e[e.STREAM_SWITCH=32]="STREAM_SWITCH",e[e.AUDIO_SENDING_STOPPED=33]="AUDIO_SENDING_STOPPED",e[e.VIDEO_SENDING_STOPPED=34]="VIDEO_SENDING_STOPPED",e[e.REQUEST_PROXY_APPCENTER=35]="REQUEST_PROXY_APPCENTER",e[e.REQUEST_PROXY_WORKER_MANAGER=36]="REQUEST_PROXY_WORKER_MANAGER",e[e.API_INVOKE=41]="API_INVOKE",e[e.FIRST_VIDEO_RECEIVED=348]="FIRST_VIDEO_RECEIVED",e[e.FIRST_AUDIO_RECEIVED=349]="FIRST_AUDIO_RECEIVED",e[e.FIRST_VIDEO_DECODE=350]="FIRST_VIDEO_DECODE",e[e.FIRST_AUDIO_DECODE=351]="FIRST_AUDIO_DECODE",e[e.ON_ADD_AUDIO_STREAM=352]="ON_ADD_AUDIO_STREAM",e[e.ON_ADD_VIDEO_STREAM=353]="ON_ADD_VIDEO_STREAM",e[e.ON_UPDATE_STREAM=356]="ON_UPDATE_STREAM",e[e.ON_REMOVE_STREAM=355]="ON_REMOVE_STREAM",e[e.JOIN_CHANNEL_TIMEOUT=407]="JOIN_CHANNEL_TIMEOUT",e[e.PEER_PUBLISH_STATUS=408]="PEER_PUBLISH_STATUS",e[e.WORKER_EVENT=156]="WORKER_EVENT",e[e.AP_WORKER_EVENT=160]="AP_WORKER_EVENT",e[e.JOIN_WEB_PROXY_AP=700]="JOIN_WEB_PROXY_AP",e[e.WEBSOCKET_QUIT=671]="WEBSOCKET_QUIT",e[e.USER_ANALYTICS=1e4]="USER_ANALYTICS",e[e.AUTOPLAY_FAILED=9178]="AUTOPLAY_FAILED",e}({});class kg{constructor(){zn(this,"baseInfoMap",new Map),zn(this,"proxyServer",void 0),zn(this,"eventUploadTimer",void 0),zn(this,"setSessionIdTimer",void 0),zn(this,"url",void 0),zn(this,"backupUrl",void 0),zn(this,"_appId",void 0),zn(this,"keyEventUploadPendingItems",[]),zn(this,"normalEventUploadPendingItems",[]),zn(this,"apiInvokeUploadPendingItems",[]),zn(this,"apiInvokeCount",0),zn(this,"ltsList",[]),zn(this,"lastSendNormalEventTime",Date.now()),zn(this,"customReportCounterTimer",void 0),zn(this,"customReportCount",0),zn(this,"extApiInvoke",async t=>{for(const n of t){const r=at(at({},n),{},{sid:null,invokeId:++this.apiInvokeCount,tag:kn.TRACER});this.sendApiInvoke(r)}}),this.eventUploadTimer=window.setInterval(this.doSend.bind(this),H("EVENT_REPORT_SEND_INTERVAL")),this.setSessionIdTimer=window.setInterval(this.appendSessionId.bind(this),H("EVENT_REPORT_SEND_INTERVAL"))}getBaseInfoBySessionId(t){return this.baseInfoMap.get(t)}adjustSessionStartTime(t){if(!this.baseInfoMap.has(t)&&!this.baseInfoMap.get(t))return void w.error("adjust session ".concat(t," start time, sid is not exist or info is undefined"));const n=this.baseInfoMap.get(t),r=Date.now(),i=n.startTime;n.startTime=r,w.debug("rewrite session ".concat(t," startTime: ").concat(r," , ").concat(r-i,"ms")),this.baseInfoMap.set(t,n)}setAppId(t){this._appId=t}reportApiInvoke(t,n,r){n.timeout=n.timeout||6e4,n.reportResult=n.reportResult===void 0||n.reportResult;const i=Date.now();this.apiInvokeCount+=1;const o=this.apiInvokeCount,a=()=>({tag:n.tag,invokeId:o,sid:t,name:n.name,apiInvokeTime:i,options:n.options,states:n.states||null}),s=!!H("SHOW_REPORT_INVOKER_LOG");s&&w.info("".concat(n.name," start"),n.options);let c=!1;Lr(n.timeout).then(()=>{c||(this.sendApiInvoke(at(at({},a()),{},{error:k.API_INVOKE_TIMEOUT,success:!1})),w.debug("".concat(n.name," timeout")))});const l=new Q(k.UNEXPECTED_ERROR,"".concat(n.name,": this api invoke is end"));return{onSuccess:u=>{const d=()=>{if(c)throw l;return c=!0,this.sendApiInvoke(at(at({},a()),{},{success:!0},n.reportResult&&{result:u})),s&&w.info("".concat(n.name," onSuccess")),u};return r?NM(d,n.name+"Success",r,()=>c=!0):d()},onError:u=>{const d=()=>{if(c)throw u;c=!0,this.sendApiInvoke(at(at({},a()),{},{success:!1,error:u})),s&&w.info("".concat(n.name," onFailure"),u.toString())};return r?NM(d,n.name+"Error",r,()=>c=!0):d()}}}sessionInit(t,n){if(this.baseInfoMap.has(t))return;const r=Date.now(),i=this.createBaseInfo(t,r);i.cname=n.cname;const o=Object.assign({},{willUploadConsoleLog:H("UPLOAD_LOG"),maxTouchPoints:navigator.maxTouchPoints,areaVersion:sN?"global":"oversea",areas:H("AREAS")&&H("AREAS").join(",")},n.extend),{stringUid:a,channelProfile:s,channelMode:c,isABTestSuccess:l,lsid:u,clientRole:d}=n,h=Date.now(),f=at(at({},i),{},{eventType:Or.SESSION_INIT,appid:n.appid,browser:navigator.userAgent,buildFormat:n.buildFormat,build:lN,lts:h,elapse:h-r,extend:JSON.stringify(o),mode:n.mode,process:H("PROCESS_ID"),appType:H("APP_TYPE"),success:!0,version:va,stringUid:a,channelProfile:s,channelMode:c,isABTestSuccess:l,lsid:u,clientType:Ce(g=window.navigator.userAgent).call(g,"AgoraWebView")?42:20,clientRole:d,serviceId:H("PROCESS_ID"),extensionID:H("PLUGIN_INFO").join(",")||""});var g;this.send({type:xn.SESSION,data:f},!0)}joinChooseServer(t,n){const r=this.baseInfoMap.get(t);if(!r)return;const i=r.info,o=Date.now(),a=at(at({},i),{},{eventType:Or.JOIN_CHOOSE_SERVER,lts:o,eventElapse:n.elapse||o-n.lts,chooseServerAddr:n.csAddr,errorCode:n.ec,elapse:o-r.startTime,success:n.succ,chooseServerAddrList:JSON.stringify(n.serverList),uid:n.uid?parseInt(n.uid):null,cid:n.cid?parseInt(n.cid):null,chooseServerIp:n.csIp||"",opid:n.opid,unilbsServerIds:n.unilbsServerIds,extend:n.extend||void 0,isHttp3:n.isHttp3});this.send({type:xn.JOIN_CHOOSE_SERVER,data:a},!0)}reqUserAccount(t,n){const r=this.baseInfoMap.get(t);if(!r)return;const i=r.info,o=Date.now(),a=at(at({},i),{},{eventType:Or.REQ_USER_ACCOUNT,lts:o,success:n.success,serverAddress:n.serverAddr,stringUid:n.stringUid,uid:n.uid,errorCode:n.errorCode,elapse:n.elapse||o-r.startTime,eventElapse:o-n.lts,extend:JSON.stringify(n.extend)});this.send({type:xn.REQ_USER_ACCOUNT,data:a},!0)}joinGateway(t,n){const r=this.baseInfoMap.get(t);if(!r)return;const i=r.info;n.vid&&(i.vid=n.vid),i.uid=n.uid,i.cid=n.cid;const o=Date.now(),{firstSuccess:a,avoidJoinStartTime:s}=n,c=o-(a&&s?s:r.startTime),l=at(at({},i),{},{eventType:Or.JOIN_GATEWAY,lts:o,gatewayAddr:n.addr,success:n.succ,errorCode:n.ec,errorMsg:n.errorMsg||"",elapse:c,eventElapse:o-n.lts,firstSuccess:a,signalChannel:n.signalChannel,preload:n.preload?1:0});n.succ&&(r.lastJoinSuccessTime=o),this.send({type:xn.JOIN_GATEWAY,data:l},!0)}joinChannelTimeout(t,n){const r=this.baseInfoMap.get(t);if(!r)return;const i=Date.now(),o=at(at({},r.info),{},{lts:i,timeout:n,elapse:i-r.startTime});this.send({type:xn.JOIN_CHANNEL_TIMEOUT,data:o},!0)}publish(t,n){const r=this.baseInfoMap.get(t);if(!r)return;const i=r.info,o=Date.now(),a=at(at({},i),{},{eventType:Or.PUBLISH,lts:o,eventElapse:n.eventElapse,elapse:o-r.startTime,success:n.succ,errorCode:n.ec,videoName:n.videoName,audioName:n.audioName,screenName:n.screenName,screenshare:n.screenshare,audio:n.audio,video:n.video,p2pid:n.p2pid,publishRequestid:n.publishRequestid});this.send({type:xn.PUBLISH,data:a},!0)}subscribe(t,n,r){const i=this.baseInfoMap.get(t);if(!i)return;const o=i.info,a=Date.now(),s=at(at({},o),{},{eventType:Or.SUBSCRIBE,lts:a,eventElapse:n.eventElapse,elapse:a-i.startTime,success:n.succ,errorCode:n.ec,video:n.video,audio:n.audio,subscribeRequestid:n.subscribeRequestid,p2pid:n.p2pid,preSsrc:n.preSsrc?1:0},r&&{extend:JSON.stringify({isMassSubscribe:!0})});typeof n.peerid=="string"?s.peerSuid=n.peerid:s.peer=n.peerid,this.send({type:xn.SUBSCRIBE,data:s},!0)}wsCompressorInit(t){var n;const r=[...jo(n=this.baseInfoMap).call(n)],i=r.length?r[0]:"UnableToGetSid",o=this.baseInfoMap.get(i);if(!o)return;const a=o.info,s=Date.now(),c=at(at({},a),{},{eventType:Or.WS_COMPRESSOR_INIT,lts:s,eventElapse:t.eventElapse,elapse:s-o.startTime,status:t.status?1:2});this.send({type:xn.WS_COMPRESSOR_INIT,data:c},!0)}firstRemoteVideoDecode(t,n,r,i){const o=this.baseInfoMap.get(t);if(!o)return;const a=o.info,s=Date.now(),c=at(at(at({},a),i),{},{elapse:s-o.startTime,eventType:n,lts:s,firstDecodeFrame:Math.max((i.firstFrame||s)-o.startTime,0),apEnd:Math.max(i.apEnd-o.startTime,0),apStart:Math.max(i.apStart-o.startTime,0),joinGwEnd:Math.max(i.joinGwEnd-o.startTime,0),joinGwStart:Math.max(i.joinGwStart-o.startTime,0),pcEnd:Math.max(i.pcEnd-o.startTime,0),pcStart:Math.max(i.pcStart-o.startTime,0),subscriberEnd:Math.max(i.subscriberEnd-o.startTime,0),subscriberStart:Math.max(i.subscriberStart-o.startTime,0),videoAddNotify:Math.max(i.videoAddNotify-o.startTime,0)});this.send({type:r,data:c},!0)}firstRemoteFrame(t,n,r,i){const o=this.baseInfoMap.get(t);if(!o)return;const a=o.info,s=Date.now(),c=at(at(at({},a),i),{},{elapse:s-o.startTime,eventType:n,lts:s});this.send({type:r,data:c},!0)}pcStats(t,n){const r=this.baseInfoMap.get(t);if(!r)return;const i=r.info,o=Date.now(),a=at(at(at({},i),n),{},{vid:i.vid===void 0?0:Number(i.vid),elapse:o-r.startTime,eventType:Or.PC_STATS,lts:o,preallocation:n.preallocation?1:0});this.send({type:xn.PC_STATS,data:a},!0)}updateRemoteRTPCapabilities(t,n){if(t){const r=this.baseInfoMap.get(t);if(!r)return;const i=r.info,o=Date.now(),a=at(at(at({},i),n),{},{vid:i.vid===void 0?0:Number(i.vid),eventType:Or.UPDATE_REMOTE_RTPCAPABILITIES,lts:o});this.send({type:xn.UPDATE_REMOTE_RTPCAPABILITIES,data:a},!0)}}onGatewayStream(t,n,r,i){const o=this.baseInfoMap.get(t);if(!o)return;const a=o.info,s=Date.now(),c=at(at(at({},a),i),{},{eventType:n,lts:s});this.send({type:r,data:c},!0)}streamSwitch(t,n){const r=this.baseInfoMap.get(t);if(!r)return;const i=r.info,o=Date.now(),a=at(at({},i),{},{eventType:Or.STREAM_SWITCH,lts:o,isDual:n.isdual,elapse:o-r.startTime,success:n.succ});this.send({type:xn.STREAM_SWITCH,data:a},!0)}requestProxyAppCenter(t,n){const r=this.baseInfoMap.get(t);if(!r)return;const i=r.info,o=Date.now(),a=at(at({},i),{},{eventType:Or.REQUEST_PROXY_APPCENTER,lts:o,eventElapse:o-n.lts,elapse:o-r.startTime,APAddr:n.APAddr,workerManagerList:n.workerManagerList,response:n.response,errorCode:n.ec,success:n.succ});this.send({type:xn.REQUEST_PROXY_APPCENTER,data:a},!0)}requestProxyWorkerManager(t,n){const r=this.baseInfoMap.get(t);if(!r)return;const i=r.info,o=Date.now(),a=at(at({},i),{},{eventType:Or.REQUEST_PROXY_WORKER_MANAGER,lts:o,eventElapse:o-n.lts,elapse:o-r.startTime,workerManagerAddr:n.workerManagerAddr,response:n.response,errorCode:n.ec,success:n.succ});this.send({type:xn.REQUEST_PROXY_WORKER_MANAGER,data:a},!0)}setProxyServer(t){this.proxyServer=t,t?w.debug("reportProxyServerurl: ".concat(t)):w.debug("disable reportProxyServerurl: ".concat(t))}peerPublishStatus(t,n){const r=this.baseInfoMap.get(t);if(!r)return;const i=r.info,o=Date.now(),a=at(at({},i),{},{subscribeElapse:n.subscribeElapse,peer:n.peer,peerPublishDuration:Math.max(n.audioPublishDuration,n.videoPublishDuration),audiotag:n.audioPublishDuration>0?1:-1,videotag:n.videoPublishDuration>0?1:-1,lts:o,elapse:o-r.startTime,joinChannelSuccessElapse:o-(r.lastJoinSuccessTime||o),peerPublishDurationVideo:n.videoPublishDuration,peerPublishDurationAudio:n.audioPublishDuration});this.send({type:xn.PEER_PUBLISH_STATUS,data:a},!0)}workerEvent(t,n){const r=this.baseInfoMap.get(t);if(!r)return;const i=r.info,o=Date.now();(function(a,s,c){const l=a[s];if(!l||typeof l!="string")return[a];a[s]="";const u=Ec(JSON.stringify(a));let d=0;const h=[];let f=0;for(let g=0;g<l.length;g++)f+=l.charCodeAt(g)<=127?1:3,f<=c-u||(h[h.length]=Ne(Ne({},a),{},{[s]:l.substring(d,g)}),d=g,f=l.charCodeAt(g)<=127?1:3);return d!==l.length-1&&(h[h.length]=Ne(Ne({},a),{},{[s]:l.substring(d)})),h})(at(at(at({},i),n),{},{elapse:o-r.startTime,lts:o,productType:"WebRTC"}),"payload",1300).forEach(a=>this.send({type:xn.WORKER_EVENT,data:a},!0))}apworkerEvent(t,n){const r=this.baseInfoMap.get(t);if(!r)return;const i=r.info,o=Date.now(),a=at(at(at({},i),n),{},{elapse:o-r.startTime,lts:o});this.send({type:xn.AP_WORKER_EVENT,data:a},!0)}joinWebProxyAP(t,n){const r=this.baseInfoMap.get(t);if(!r)return;const i=r.info,o=Date.now(),a=at(at(at({},i),n),{},{elapse:o-r.startTime,lts:o,extend:n.extend||void 0});this.send({type:xn.JOIN_WEB_PROXY_AP,data:a},!0)}WebSocketQuit(t,n){const r=this.baseInfoMap.get(t);if(!r)return;const i=r.info,o=Date.now(),a=at(at(at({},i),n),{},{elapse:o-r.startTime,lts:o});this.send({type:xn.WEBSOCKET_QUIT,data:a},!0)}async sendCustomReportMessage(t,n){if(this.customReportCount+=n.length,this.customReportCount>H("CUSTOM_REPORT_LIMIT"))throw new Q(k.CUSTOM_REPORT_FREQUENCY_TOO_HIGH);this.customReportCounterTimer||(this.customReportCounterTimer=window.setInterval(()=>{this.customReportCount=0},5e3));const r=Date.now(),i=n.map(o=>({type:xn.USER_ANALYTICS,data:at(at({sid:t},o),{},{lts:r})}));try{H("NEW_REPORT_SERVER")?await this.postDataToStatsCollector2(i):await this.postDataToStatsCollector(i)}catch(o){throw w.error("send custom report message failed",o.toString()),new Q(k.CUSTOM_REPORT_SEND_FAILED,o.message)}}sendApiInvoke(t){const n=H("NOT_REPORT_EVENT");if(t.tag&&Ce(n)&&Ce(n).call(n,t.tag))return!1;if(t.sid===null)return this.apiInvokeUploadPendingItems.push(t),!1;const r=this.baseInfoMap.get(t.sid);if(!r)return this.apiInvokeUploadPendingItems.push(t),!1;const{cname:i,uid:o,cid:a}=r.info;let s;if(t.lts=t.lts||Date.now(),t.error)if(t.error instanceof Q){const{code:l,message:u}=t.error;s=l||u||t.error.toString()}else s=t.error.toString();const c={invokeId:t.invokeId,sid:t.sid,cname:i,cid:a,uid:o,lts:t.lts,success:t.success,elapse:t.lts-r.startTime,execElapse:t.lts-t.apiInvokeTime,apiName:t.name,options:t.options?JSON.stringify(t.options):void 0,execStates:t.states?JSON.stringify(t.states):void 0,execResult:t.result?JSON.stringify(t.result):void 0,errorCode:t.error?s:void 0,errorMsg:t.error?JSON.stringify(t.error):void 0};return this.send({type:xn.API_INVOKE,data:c},!1),!0}appendSessionId(){kg.__CLIENT_LIST__.forEach(t=>{if(t._sessionId){const n=this.apiInvokeUploadPendingItems.length;for(let r=0;r<n;r++){const i=this.apiInvokeUploadPendingItems.shift();i&&(i.sid=t._sessionId,this.sendApiInvoke(Object.assign({},i)))}}})}send(t,n){if(n)return this.keyEventUploadPendingItems.push(t),void this.sendItems(this.keyEventUploadPendingItems,!0);this.normalEventUploadPendingItems.push(t),this.normalEventUploadPendingItems.length>H("NORMAL_EVENT_QUEUE_CAPACITY")&&this.normalEventUploadPendingItems.splice(0,1),this.normalEventUploadPendingItems.length>=10&&this.sendItems(this.normalEventUploadPendingItems,!1)}doSend(){this.keyEventUploadPendingItems.length>0&&this.sendItems(this.keyEventUploadPendingItems,!0),this.normalEventUploadPendingItems.length>0&&Date.now()-this.lastSendNormalEventTime>=5e3&&this.sendItems(this.normalEventUploadPendingItems,!1)}sendItems(t,n){const r=[],i=[];for(;t.length;){const a=t.shift();r.length<20?r.push(a):i.push(a)}t.push(...i);for(const a of[...r]){var o;this.ltsList.indexOf(a.data.lts)!==-1?(a.data.lts=this.ltsList[this.ltsList.length-1]+1,this.ltsList.push(a.data.lts)):(this.ltsList.push(a.data.lts),xg(o=this.ltsList).call(o,(s,c)=>s-c))}return n||(this.lastSendNormalEventTime=Date.now()),H("ENABLE_EVENT_REPORT")&&r.length&&(H("NEW_REPORT_SERVER")?this.postDataToStatsCollector2(r):this.postDataToStatsCollector(r)).catch((a=>s=>{H("EVENT_REPORT_RETRY")&&(n?this.keyEventUploadPendingItems=this.keyEventUploadPendingItems.concat(a):(this.normalEventUploadPendingItems=this.normalEventUploadPendingItems.concat(a),this.normalEventUploadPendingItems.length>H("NORMAL_EVENT_QUEUE_CAPACITY")&&(this.normalEventUploadPendingItems.splice(0,this.normalEventUploadPendingItems.length-H("NORMAL_EVENT_QUEUE_CAPACITY")),w.warning("report: drop normal events"))))})(r)),t}async postDataToStatsCollector2(t){Jn.networkState===Io.OFFLINE&&await _e.race([Jn.onlineWaiter,Lr(2*ar.maxRetryTimeout)]);const n=o=>{let a=new Uint8Array;return o.forEach(s=>{const c=oN(JSON.stringify(s.data)),l=new ArrayBuffer(5),u=(h=>{let f=0;return Object.entries(xn).forEach(g=>{let[p,m]=g;m===h.type&&(f=Wue[p])}),f})(s),d=new DataView(l);d.setUint16(0,c.byteLength,!0),d.setUint8(2,255&u),d.setUint8(3,u>>>8&255),d.setUint8(4,u>>>16&255),a=RM(a,new Uint8Array(l)),a=RM(a,c)}),a},r="event";let i=this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(H("NEW_REPORT_SERVER_DOMAINS")[0],"&p=443&d=").concat(r):"https://".concat(H("NEW_REPORT_SERVER_DOMAINS")[0],"/").concat(r);for(let o=0;o<2;o+=1){o===1&&(i=this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(H("NEW_REPORT_SERVER_DOMAINS")[1],"&p=443&d=").concat(r):"https://".concat(H("NEW_REPORT_SERVER_DOMAINS")[1],"/").concat(r));try{await HI(i,{timeout:1e4,data:n(t),headers:at(at({biz:"webrtc",sendts:Math.round(Date.now()/1e3),debug:"false"},this._appId&&{appid:this._appId}),{},{"Content-Type":"application/octet-stream"})},!0)}catch(a){if(o===1)throw a;continue}return}}async postDataToStatsCollector(t){let n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const r={msgType:"EventMessages",sentTs:Math.round(Date.now()/1e3),payloads:t.map(a=>JSON.stringify(a)),vid:(a=>{const s=a&&a.data.sid&&this.baseInfoMap.get(a.data.sid);return s&&s.info.vid&&+s.info.vid||0})(t[0])};Jn.networkState===Io.OFFLINE&&await _e.race([Jn.onlineWaiter,Lr(2*ar.maxRetryTimeout)]);const i=n?"/events/proto-raws":"/events/messages";let o=this.url||(this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(H("EVENT_REPORT_DOMAIN"),"&p=").concat(H("STATS_COLLECTOR_PORT"),"&d=").concat(i):"https://".concat(H("EVENT_REPORT_DOMAIN"),":").concat(H("STATS_COLLECTOR_PORT")).concat(i));for(let a=0;a<2;a+=1){a===1&&(o=this.backupUrl||(this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(H("EVENT_REPORT_BACKUP_DOMAIN"),"&p=").concat(H("STATS_COLLECTOR_PORT"),"&d=").concat(i):"https://".concat(H("EVENT_REPORT_BACKUP_DOMAIN"),":").concat(H("STATS_COLLECTOR_PORT")).concat(i)));try{n?await Uue(o,{timeout:1e4,data:r}):await HI(o,{timeout:1e4,data:r})}catch(s){if(a===1)throw s;continue}return}}createBaseInfo(t,n){const r=Object.assign({},zue);return r.sid=t,this.baseInfoMap.set(t,{info:r,startTime:n}),r}reportResourceTiming(t,n){const r=performance.getEntriesByName(t),i=r[r.length-1];i&&this.reportApiInvoke(n,{name:"Client.resourceTiming",options:i,tag:kn.TRACER}).onSuccess()}}function je(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return function(t,n,r){const i=r.value;if(typeof i=="function"){const o=e.className||t.__className__||(t.constructor.name==="AgoraRTCClient"?"Client":t.constructor.name);r.value=function(){for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];let l=s;if(e.argsMap)try{l=e.argsMap(this,...s)}catch(d){w.warning(d),l=[]}try{JSON.stringify(l)}catch{w.warning("arguments for method ".concat(o,".").concat(String(n)," not serializable for apiInvoke.")),l=[]}const u=(e.report||Pe).reportApiInvoke(this._sessionId||null,{name:"".concat(o,".").concat(String(n)),options:l,tag:kn.TRACER,reportResult:e.reportResult},e.throttleTime);try{const d=i.apply(this,s);return d instanceof _e?d.then(h=>(u.onSuccess(e.reportResult&&h),h)).catch(h=>{throw u.onError(h),h}):(u.onSuccess(e.reportResult&&d),d)}catch(d){throw u.onError(d),d}}}return r}}zn(kg,"__CLIENT_LIST__",[]);const Pe=new kg;e9.on("REPORT_LOG_UPLOAD",e=>{e.networkState=Jn.networkState,Pe.reportApiInvoke(null,{name:"logUploadError",options:e,tag:kn.TRACER}).onSuccess("logUploadError")});const Gue=["CHINA","GLOBAL"],jr=function(){const e="us".concat("erna","me"),t="pa".concat("sswo","rd"),n=["t","s","t"];n.splice(1,0,"e");const r=n.join(""),i=[];for(let s=0;s<6;s++)i.push("1");const o=i.join(""),a={};return a[e]=r,a[t]=o,Object.assign(a,{turnServerURL:"",tcpport:3433,udpport:3478,forceturn:!1})}();window.DEFAULT_TURN_CONFIG=jr,sN||(Wn.WEBCS_DOMAIN=["ap-web-1-oversea.agora.io","ap-web-1-north-america.agora.io"],Wn.WEBCS_DOMAIN_BACKUP_LIST=["ap-web-2-oversea.agora.io","ap-web-2-north-america.agora.io"],Wn.PROXY_CS=["proxy-ap-web-oversea.agora.io","proxy-ap-web-america.agora.io"],Wn.CDS_AP=["cds-ap-web-oversea.agora.io","cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],Wn.ACCOUNT_REGISTER=["sua-ap-web-oversea.agora.io","sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],Wn.UAP_AP=["uap-ap-web-oversea.agora.io","uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],Wn.LOG_UPLOAD_SERVER="logservice-oversea.agora.io",Wn.EVENT_REPORT_DOMAIN="statscollector-1-oversea.agora.io",Wn.EVENT_REPORT_BACKUP_DOMAIN="statscollector-2-oversea.agora.io",Wn.PROXY_SERVER_TYPE3="webrtc-cloud-proxy.agora.io",Wn.AREAS=["NORTH_AMERICA","OVERSEA"]);const t9=[[0,1,2,3,4,5,5],[0,2,2,3,4,5,5],[0,3,3,3,4,5,5],[0,4,4,4,4,5,5],[0,5,5,5,5,5,5]],Vl=[];function Mu(e,t){return!!t&&Vl.some(n=>n.uid===e&&n.channelName===t)}kg.__CLIENT_LIST__=Vl;var Kue=QH.forEach,$M=yy("forEach")?[].forEach:function(e){return Kue(this,e,arguments.length>1?arguments[1]:void 0)};ln({target:"Array",proto:!0,forced:[].forEach!=$M},{forEach:$M});var que=hs("Array").forEach,Yue=Dc,Xue=oi,Jue=Fi,Que=que,j1=Array.prototype,Zue={DOMTokenList:!0,NodeList:!0},ede=function(e){var t=e.forEach;return e===j1||Jue(j1,e)&&t===j1.forEach||Xue(Zue,Yue(e))?Que:t},tde=Kn(ede),nde=Pc,VM=Ry;ln({target:"Object",stat:!0,forced:hr(function(){VM(1)})},{keys:function(e){return VM(nde(e))}});var n9=Kn(Ks.Object.keys),rde=Kn(lj),ide=ln,ode=Ng,ade=cr([].reverse),jM=[1,2];ide({target:"Array",proto:!0,forced:String(jM)===String(jM.reverse())},{reverse:function(){return ode(this)&&(this.length=this.length),ade(this)}});var sde=hs("Array").reverse,cde=Fi,lde=sde,H1=Array.prototype,ude=function(e){var t=e.reverse;return e===H1||cde(H1,e)&&t===H1.reverse?lde:t},r9=ude,dde=Kn(r9),hde=ln,HM=Ng,fde=Ay,pde=na,zM=bx,mde=vl,gde=Tu,vde=Ny,Ede=Zn,_de=Mx,Sde=qH("slice"),yde=Ede("species"),z1=Array,Cde=Math.max;hde({target:"Array",proto:!0,forced:!Sde},{slice:function(e,t){var n,r,i,o=gde(this),a=mde(o),s=zM(e,a),c=zM(t===void 0?a:t,a);if(HM(o)&&(n=o.constructor,(fde(n)&&(n===z1||HM(n.prototype))||pde(n)&&(n=n[yde])===null)&&(n=void 0),n===z1||n===void 0))return _de(o,s,c);for(r=new(n===void 0?z1:n)(Cde(c-s,0)),i=0;s<c;s++,i++)s in o&&vde(r,i,o[s]);return r.length=i,r}});var bde=hs("Array").slice,Tde=Fi,Rde=bde,W1=Array.prototype,wde=function(e){var t=e.slice;return e===W1||Tde(W1,e)&&t===W1.slice?Rde:t},Ide=Kn(wde);function Ae(e,t,n,r,i){var o,a,s,c={};return tde(o=n9(r)).call(o,function(l){c[l]=r[l]}),c.enumerable=!!c.enumerable,c.configurable=!!c.configurable,("value"in c||c.initializer)&&(c.writable=!0),c=rde(a=dde(s=Ide(n).call(n)).call(s)).call(a,function(l,u){return u(e,t,l)||l},c),i&&c.initializer!==void 0&&(c.value=c.initializer?c.initializer.call(i):void 0,c.initializer=void 0),c.initializer===void 0&&(GH(e,t,c),c=null),c}let zI=function(e){return e.L1T1="L1T1",e.L1T2="L1T2",e.L1T3="L1T3",e.L1T3_KEY="L1T3_KEY",e.L2T1_KEY="L2T1_KEY",e.L2T2_KEY="L2T2_KEY",e.L2T3_KEY="L2T3_KEY",e.L3T1_KEY="L3T1_KEY",e.L3T2_KEY="L3T2_KEY",e.L3T3_KEY="L3T3_KEY",e}({}),Uo=function(e){return e.CERTIFICATE="certificate",e.CODEC="codec",e.CANDIDATE_PAIR="candidate-pair",e.LOCAL_CANDIDATE="local-candidate",e.REMOTE_CANDIDATE="remote-candidate",e.INBOUND="inbound-rtp",e.TRACK="track",e.OUTBOUND="outbound-rtp",e.PC="peer-connection",e.REMOTE_INBOUND="remote-inbound-rtp",e.REMOTE_OUTBOUND="remote-outbound-rtp",e.TRANSPORT="transport",e.CSRC="csrc",e.DATA_CHANNEL="data-channel",e.STREAM="stream",e.SENDER="sender",e.RECEIVER="receiver",e}({}),a_=function(e){return e[e.ACCESS_POINT=101]="ACCESS_POINT",e[e.UNILBS=201]="UNILBS",e[e.STRING_UID_ALLOCATOR=901]="STRING_UID_ALLOCATOR",e}({}),G1=function(e){return e[e.IIIEGAL_APPID=1]="IIIEGAL_APPID",e[e.IIIEGAL_UID=2]="IIIEGAL_UID",e[e.INTERNAL_ERROR=3]="INTERNAL_ERROR",e}({}),ka=function(e){return e[e.INVALID_VENDOR_KEY=5]="INVALID_VENDOR_KEY",e[e.INVALID_CHANNEL_NAME=7]="INVALID_CHANNEL_NAME",e[e.INTERNAL_ERROR=8]="INTERNAL_ERROR",e[e.NO_AUTHORIZED=9]="NO_AUTHORIZED",e[e.DYNAMIC_KEY_TIMEOUT=10]="DYNAMIC_KEY_TIMEOUT",e[e.NO_ACTIVE_STATUS=11]="NO_ACTIVE_STATUS",e[e.DYNAMIC_KEY_EXPIRED=13]="DYNAMIC_KEY_EXPIRED",e[e.STATIC_USE_DYNAMIC_KEY=14]="STATIC_USE_DYNAMIC_KEY",e[e.DYNAMIC_USE_STATIC_KEY=15]="DYNAMIC_USE_STATIC_KEY",e[e.USER_OVERLOAD=16]="USER_OVERLOAD",e[e.FORBIDDEN_REGION=18]="FORBIDDEN_REGION",e[e.CANNOT_MEET_AREA_DEMAND=19]="CANNOT_MEET_AREA_DEMAND",e}({}),Ii=function(e){return e[e.NO_FLAG_SET=100]="NO_FLAG_SET",e[e.FLAG_SET_BUT_EMPTY=101]="FLAG_SET_BUT_EMPTY",e[e.INVALID_FALG_SET=102]="INVALID_FALG_SET",e[e.FLAG_SET_BUT_NO_RE=103]="FLAG_SET_BUT_NO_RE",e[e.INVALID_SERVICE_ID=104]="INVALID_SERVICE_ID",e[e.NO_SERVICE_AVAILABLE=200]="NO_SERVICE_AVAILABLE",e[e.NO_SERVICE_AVAILABLE_P2P=201]="NO_SERVICE_AVAILABLE_P2P",e[e.NO_SERVICE_AVAILABLE_VOICE=202]="NO_SERVICE_AVAILABLE_VOICE",e[e.NO_SERVICE_AVAILABLE_WEBRTC=203]="NO_SERVICE_AVAILABLE_WEBRTC",e[e.NO_SERVICE_AVAILABLE_CDS=204]="NO_SERVICE_AVAILABLE_CDS",e[e.NO_SERVICE_AVAILABLE_CDN=205]="NO_SERVICE_AVAILABLE_CDN",e[e.NO_SERVICE_AVAILABLE_TDS=206]="NO_SERVICE_AVAILABLE_TDS",e[e.NO_SERVICE_AVAILABLE_REPORT=207]="NO_SERVICE_AVAILABLE_REPORT",e[e.NO_SERVICE_AVAILABLE_APP_CENTER=208]="NO_SERVICE_AVAILABLE_APP_CENTER",e[e.NO_SERVICE_AVAILABLE_ENV0=209]="NO_SERVICE_AVAILABLE_ENV0",e[e.NO_SERVICE_AVAILABLE_VOET=210]="NO_SERVICE_AVAILABLE_VOET",e[e.NO_SERVICE_AVAILABLE_STRING_UID=211]="NO_SERVICE_AVAILABLE_STRING_UID",e[e.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS=212]="NO_SERVICE_AVAILABLE_WEBRTC_UNILBS",e[e.NO_SERVICE_AVAILABLE_UNILBS_FLV=213]="NO_SERVICE_AVAILABLE_UNILBS_FLV",e}({}),$e=function(e){return e[e.K_TIMESTAMP_EXPIRED=2]="K_TIMESTAMP_EXPIRED",e[e.K_CHANNEL_PERMISSION_INVALID=3]="K_CHANNEL_PERMISSION_INVALID",e[e.K_CERTIFICATE_INVALID=4]="K_CERTIFICATE_INVALID",e[e.K_CHANNEL_NAME_EMPTY=5]="K_CHANNEL_NAME_EMPTY",e[e.K_CHANNEL_NOT_FOUND=6]="K_CHANNEL_NOT_FOUND",e[e.K_TICKET_INVALID=7]="K_TICKET_INVALID",e[e.K_CHANNEL_CONFLICTED=8]="K_CHANNEL_CONFLICTED",e[e.K_SERVICE_NOT_READY=9]="K_SERVICE_NOT_READY",e[e.K_SERVICE_TOO_HEAVY=10]="K_SERVICE_TOO_HEAVY",e[e.K_UID_BANNED=14]="K_UID_BANNED",e[e.K_IP_BANNED=15]="K_IP_BANNED",e[e.K_CHANNEL_BANNED=16]="K_CHANNEL_BANNED",e[e.K_AUTO_REBALANCE=28]="K_AUTO_REBALANCE",e[e.WARN_NO_AVAILABLE_CHANNEL=103]="WARN_NO_AVAILABLE_CHANNEL",e[e.WARN_LOOKUP_CHANNEL_TIMEOUT=104]="WARN_LOOKUP_CHANNEL_TIMEOUT",e[e.WARN_LOOKUP_CHANNEL_REJECTED=105]="WARN_LOOKUP_CHANNEL_REJECTED",e[e.WARN_OPEN_CHANNEL_TIMEOUT=106]="WARN_OPEN_CHANNEL_TIMEOUT",e[e.WARN_OPEN_CHANNEL_REJECTED=107]="WARN_OPEN_CHANNEL_REJECTED",e[e.WARN_REQUEST_DEFERRED=108]="WARN_REQUEST_DEFERRED",e[e.ERR_DYNAMIC_KEY_TIMEOUT=109]="ERR_DYNAMIC_KEY_TIMEOUT",e[e.ERR_NO_AUTHORIZED=110]="ERR_NO_AUTHORIZED",e[e.ERR_VOM_SERVICE_UNAVAILABLE=111]="ERR_VOM_SERVICE_UNAVAILABLE",e[e.ERR_NO_CHANNEL_AVAILABLE_CODE=112]="ERR_NO_CHANNEL_AVAILABLE_CODE",e[e.ERR_MASTER_VOCS_UNAVAILABLE=114]="ERR_MASTER_VOCS_UNAVAILABLE",e[e.ERR_INTERNAL_ERROR=115]="ERR_INTERNAL_ERROR",e[e.ERR_NO_ACTIVE_STATUS=116]="ERR_NO_ACTIVE_STATUS",e[e.ERR_INVALID_UID=117]="ERR_INVALID_UID",e[e.ERR_DYNAMIC_KEY_EXPIRED=118]="ERR_DYNAMIC_KEY_EXPIRED",e[e.ERR_STATIC_USE_DYANMIC_KE=119]="ERR_STATIC_USE_DYANMIC_KE",e[e.ERR_DYNAMIC_USE_STATIC_KE=120]="ERR_DYNAMIC_USE_STATIC_KE",e[e.ERR_NO_VOCS_AVAILABLE=2e3]="ERR_NO_VOCS_AVAILABLE",e[e.ERR_NO_VOS_AVAILABLE=2001]="ERR_NO_VOS_AVAILABLE",e[e.ERR_JOIN_CHANNEL_TIMEOUT=2002]="ERR_JOIN_CHANNEL_TIMEOUT",e[e.ERR_REPEAT_JOIN_CHANNEL=2003]="ERR_REPEAT_JOIN_CHANNEL",e[e.ERR_JOIN_BY_MULTI_IP=2004]="ERR_JOIN_BY_MULTI_IP",e[e.ERR_NOT_JOINED=2011]="ERR_NOT_JOINED",e[e.ERR_REPEAT_JOIN_REQUEST=2012]="ERR_REPEAT_JOIN_REQUEST",e[e.ERR_INVALID_VENDOR_KEY=2013]="ERR_INVALID_VENDOR_KEY",e[e.ERR_INVALID_CHANNEL_NAME=2014]="ERR_INVALID_CHANNEL_NAME",e[e.ERR_INVALID_STRINGUID=2015]="ERR_INVALID_STRINGUID",e[e.ERR_TOO_MANY_USERS=2016]="ERR_TOO_MANY_USERS",e[e.ERR_SET_CLIENT_ROLE_TIMEOUT=2017]="ERR_SET_CLIENT_ROLE_TIMEOUT",e[e.ERR_SET_CLIENT_ROLE_NO_PERMISSION=2018]="ERR_SET_CLIENT_ROLE_NO_PERMISSION",e[e.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE=2019]="ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",e[e.ERR_PUBLISH_REQUEST_INVALID=2020]="ERR_PUBLISH_REQUEST_INVALID",e[e.ERR_SUBSCRIBE_REQUEST_INVALID=2021]="ERR_SUBSCRIBE_REQUEST_INVALID",e[e.ERR_NOT_SUPPORTED_MESSAGE=2022]="ERR_NOT_SUPPORTED_MESSAGE",e[e.ERR_ILLEAGAL_PLUGIN=2023]="ERR_ILLEAGAL_PLUGIN",e[e.ERR_REJOIN_TOKEN_INVALID=2024]="ERR_REJOIN_TOKEN_INVALID",e[e.ERR_REJOIN_USER_NOT_JOINED=2025]="ERR_REJOIN_USER_NOT_JOINED",e[e.ERR_INVALID_OPTIONAL_INFO=2027]="ERR_INVALID_OPTIONAL_INFO",e[e.ILLEGAL_AES_PASSWORD=2028]="ILLEGAL_AES_PASSWORD",e[e.ILLEGAL_CLIENT_ROLE_LEVEL=2029]="ILLEGAL_CLIENT_ROLE_LEVEL",e[e.ERR_TOO_MANY_BROADCASTERS=2031]="ERR_TOO_MANY_BROADCASTERS",e[e.ERR_TOO_MANY_SUBSCRIBERS=2032]="ERR_TOO_MANY_SUBSCRIBERS",e[e.ERR_LICENSE_MISSING=32769]="ERR_LICENSE_MISSING",e[e.ERR_LICENSE_EXPIRED=32771]="ERR_LICENSE_EXPIRED",e[e.ERR_LICENSE_MINUTES_EXCEEDED=32773]="ERR_LICENSE_MINUTES_EXCEEDED",e[e.ERR_LICENSE_PERIOD_INVALID=32774]="ERR_LICENSE_PERIOD_INVALID",e[e.ERR_LICENSE_MULTIPLE_SDK_SERVICE=32778]="ERR_LICENSE_MULTIPLE_SDK_SERVICE",e[e.ERR_LICENSE_ILLEGAL=32783]="ERR_LICENSE_ILLEGAL",e[e.ERR_TEST_RECOVER=9e3]="ERR_TEST_RECOVER",e[e.ERR_TEST_TRYNEXT=9001]="ERR_TEST_TRYNEXT",e[e.ERR_TEST_RETRY=9002]="ERR_TEST_RETRY",e}({}),sn=function(e){return e.CONNECTING="connecting",e.CONNECTED="connected",e.RECONNECTING="reconnecting",e.CLOSED="closed",e}({}),qe=function(e){return e.WS_CONNECTED="ws_connected",e.WS_RECONNECTING="ws_reconnecting",e.WS_CLOSED="ws_closed",e.WS_RECONNECT_WAITTING_FINISH="ws_reconnect_waitting_finish",e.WS_RECONNECT_CREATE_CONNECTION="ws_reconnect_create_connection",e.ON_BINARY_DATA="on_binary_data",e.REQUEST_RECOVER="request_recover",e.REQUEST_JOIN_INFO="request_join_info",e.REQUEST_REJOIN_INFO="req_rejoin_info",e.IS_P2P_DISCONNECTED="is_p2p_dis",e.DISCONNECT_P2P="dis_p2p",e.ABORT_P2P_EXECUTION="abort_p2p_execution",e.NEED_RENEW_SESSION="need-sid",e.REPORT_JOIN_GATEWAY="report_join_gateway",e.REQUEST_TIMEOUT="request_timeout",e.REQUEST_SUCCESS="request_success",e.JOIN_RESPONSE="join_response",e.PRE_CONNECT_PC="pre_connect_pc",e.P2P_CONNECTION="p2p_connection",e.P2P_REMOTE_CANDIDATE_UPDATE="p2p_remote_candidate_update",e.P2P_SUBSCRIBE="p2p_subscribe",e.P2P_UNSUBSCRIBE="p2p_unsubscribe",e.P2P_EXCHANGE_SDP="p2p_exchange_sdp",e.P2P_ON_ADD_VIDEO_STREAM="p2p_on_add_video_stream",e.P2P_ON_ADD_AUDIO_STREAM="p2p_on_add_audio_stream",e}({}),Ke=function(e){return e.PING="ping",e.PING_BACK="ping_back",e.JOIN="join_v3",e.REJOIN="rejoin_v3",e.LEAVE="leave",e.SET_CLIENT_ROLE="set_client_role",e.PUBLISH="publish",e.PUBLISH_DATASTREAM="publish_datastream",e.UNPUBLISH="unpublish",e.UNPUBLISH_DATASTREAM="unpublish_datastream",e.SUBSCRIBE="subscribe",e.PRE_SUBSCRIBE="pre_subscribe",e.SUBSCRIBE_DATASTREAM="subscribe_datastream",e.SUBSCRIBE_STREAMS="subscribe_streams",e.UNSUBSCRIBE="unsubscribe",e.UNSUBSCRIBE_DATASTREAM="unsubscribe_datastream",e.UNSUBSCRIBE_STREAMS="unsubscribe_streams",e.SUBSCRIBE_CHANGE="subscribe_change",e.TRAFFIC_STATS="traffic_stats",e.RENEW_TOKEN="renew_token",e.SWITCH_VIDEO_STREAM="switch_video_stream",e.DEFAULT_VIDEO_STREAM="default_video_stream",e.SET_FALLBACK_OPTION="set_fallback_option",e.GATEWAY_INFO="gateway_info",e.CONTROL="control",e.SEND_METADATA="send_metadata",e.DATA_STREAM="data_stream",e.PICK_SVC_LAYER="pick_svc_layer",e.RESTART_ICE="restart_ice",e.CONNECT_PC="connect_pc",e.SET_VIDEO_PROFILE="set_video_profile",e.SET_PARAMETER="set_parameter",e.SET_RTM2_FLAG="set_rtm2_flag",e}({}),b0=function(e){return e.WRTC_STATS="wrtc_stats",e.WS_INFLATE_DATA_LENGTH="ws_inflate_data_length",e.DENOISER_STATS="denoiser_stats",e.EXTENSION_USAGE_STATS="extension_usage_stats",e}({}),pt=function(e){return e.ON_USER_ONLINE="on_user_online",e.ON_USER_OFFLINE="on_user_offline",e.ON_STREAM_FALLBACK_UPDATE="on_stream_fallback_update",e.ON_PUBLISH_STREAM="on_publish_stream",e.ON_UPLINK_STATS="on_uplink_stats",e.ON_P2P_LOST="on_p2p_lost",e.ON_REMOVE_STREAM="on_remove_stream",e.ON_ADD_AUDIO_STREAM="on_add_audio_stream",e.ON_ADD_VIDEO_STREAM="on_add_video_stream",e.ON_TOKEN_PRIVILEGE_WILL_EXPIRE="on_token_privilege_will_expire",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE="on_token_privilege_did_expire",e.ON_USER_BANNED="on_user_banned",e.ON_USER_LICENSE_BANNED="on_user_license_banned",e.ON_NOTIFICATION="on_notification",e.ON_CRYPT_ERROR="on_crypt_error",e.MUTE_AUDIO="mute_audio",e.MUTE_VIDEO="mute_video",e.UNMUTE_AUDIO="unmute_audio",e.UNMUTE_VIDEO="unmute_video",e.ON_P2P_OK="on_p2p_ok",e.RECEIVE_METADATA="receive_metadata",e.ON_DATA_STREAM="on_data_stream",e.ON_RTP_CAPABILITY_CHANGE="on_rtp_capability_change",e.ON_REMOTE_DATASTREAM_UPDATE="on_remote_datastream_update",e.ON_REMOTE_FULL_DATASTREAM_INFO="on_remote_full_datastream_info",e.ENABLE_LOCAL_VIDEO="enable_local_video",e.DISABLE_LOCAL_VIDEO="disable_local_video",e.ENABLE_LOCAL_AUDIO="enable_local_audio",e.DISABLE_LOCAL_AUDIO="disable_local_audio",e.ON_PUBLISHED_USER_LIST="on_published_user_list",e}({}),Ni=function(e){return e.SEND_ONLY="SEND_ONLY",e.RECEIVE_ONLY="RECEIVE_ONLY",e}({}),Ye=function(e){return e.CONNECTED="websocket:connected",e.RECONNECTING="websocket:reconnecting",e.WILL_RECONNECT="websocket:will_reconnect",e.CLOSED="websocket:closed",e.FAILED="websocket:failed",e.ON_MESSAGE="websocket:on_message",e.REQUEST_NEW_URLS="websocket:request_new_urls",e.RECONNECT_WAITTING_FINISH="websocket:reconnect_waitting_finish",e.RECONNECT_CREATE_CONNECTION="websocket:reconnect_create_connection",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE="websocket:on_token_privilege_did_expire",e}({}),q=class extends Q{constructor(t){super(t,arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",arguments.length>2?arguments[2]:void 0),P(this,"name","AgoraRTCException")}print(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"error";return super.print(t,w)}throw(){super.throw(w)}};function Vy(e){if(typeof e!="string"||!/^[a-zA-Z0-9 \!\#\$\%\&\(\)\+\-\:\;\<\=\.\>\?\@\[\]\^\_\{\}\|\~\,]{1,64}$/.test(e))throw w.error("Invalid Channel Name ".concat(e)),new q(k.INVALID_PARAMS,"The length must be within 64 bytes. The supported characters: a-z,A-Z,0-9,space,!, #, $, %, &, (, ), +, -, :, ;, <, =, ., >, ?, @, [, ], ^, _,  {, }, |, ~, ,")}function jy(e){if(!function(t){return typeof t=="number"&&Math.floor(t)===t&&0<=t&&t<=4294967295}(e)&&!G7(e,1,255))throw new q(k.INVALID_PARAMS,"[String uid] Length of the string: [1,255]. ASCII characters only. [Number uid] The value range is [0,10000]");typeof e=="string"&&w.warn("You input a string as the user ID, to ensure better end-user experience, Agora highly suggests not using a string as the user ID.")}let hc=function(e){return e.TRANSCODE="mix_streaming",e.RAW="raw_streaming",e}({});const Ade={alpha:1,height:640,width:360,x:0,y:0,zOrder:0,audioChannel:0},K1={x:0,y:0,width:160,height:160,zOrder:255,alpha:1};function q1(e,t){xr(e.url,"".concat(t,".url"),1,1e3,!1),On(e.x)||Zt(e.x,"".concat(t,".x"),0,1e4),On(e.y)||Zt(e.y,"".concat(t,".y"),0,1e4),On(e.width)||Zt(e.width,"".concat(t,".width"),0,1e4),On(e.height)||Zt(e.height,"".concat(t,".height"),0,1e4),On(e.zOrder)||Zt(e.zOrder,"".concat(t,".zOrder"),0,255),On(e.alpha)||Zt(e.alpha,"".concat(t,".alpha"),0,1,!1)}const Ode={audioBitrate:48,audioChannels:1,audioSampleRate:48e3,backgroundColor:0,height:360,lowLatency:!1,videoBitrate:400,videoCodecProfile:100,videoCodecType:1,videoFrameRate:15,videoGop:30,width:640,images:[],userConfigs:[],userConfigExtraInfo:""};let jl=function(e){return e.WARNING="@live_uap-warning",e.ERROR="@line_uap-error",e.PUBLISH_STREAM_STATUS="@live_uap-publish-status",e.WORKER_STATUS="@live_uap-worker-status",e.REQUEST_NEW_ADDRESS="@live_uap-request-address",e}({}),WI=function(e){return e.REQUEST_WORKER_MANAGER_LIST="@live_req_worker_manager",e}({}),ur=function(e){return e[e.LIVE_STREAM_RESPONSE_SUCCEED=200]="LIVE_STREAM_RESPONSE_SUCCEED",e[e.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM=454]="LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM",e[e.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR=450]="LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR",e[e.LIVE_STREAM_RESPONSE_BAD_STREAM=451]="LIVE_STREAM_RESPONSE_BAD_STREAM",e[e.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR=400]="LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR",e[e.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST=404]="LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST",e[e.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED=456]="LIVE_STREAM_RESPONSE_NOT_AUTHORIZED",e[e.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE=457]="LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE",e[e.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN=429]="LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN",e[e.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH=452]="LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH",e[e.LIVE_STREAM_RESPONSE_NOT_SUPPORTED=453]="LIVE_STREAM_RESPONSE_NOT_SUPPORTED",e[e.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM=455]="LIVE_STREAM_RESPONSE_MAX_STREAM_NUM",e[e.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR=500]="LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR",e[e.LIVE_STREAM_RESPONSE_WORKER_LOST=501]="LIVE_STREAM_RESPONSE_WORKER_LOST",e[e.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT=502]="LIVE_STREAM_RESPONSE_RESOURCE_LIMIT",e[e.LIVE_STREAM_RESPONSE_WORKER_QUIT=503]="LIVE_STREAM_RESPONSE_WORKER_QUIT",e[e.ERROR_FAIL_SEND_MESSAGE=504]="ERROR_FAIL_SEND_MESSAGE",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE=30]="PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT=31]="PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH=32]="PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH",e[e.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN=33]="PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN",e}({});function WM(e){if(!e.channelName)throw new q(k.INVALID_PARAMS,"invalid channelName in info");if(typeof e.uid!="number")throw new q(k.INVALID_PARAMS,"invalid uid in info, uid must be a number");return e.token&&xr(e.token,"info.token",1,2047),jy(e.uid),Vy(e.channelName),!0}let Ai=function(e){return e[e.SetSdkProfile=0]="SetSdkProfile",e[e.SetSourceChannel=1]="SetSourceChannel",e[e.SetSourceUserId=2]="SetSourceUserId",e[e.SetDestChannel=3]="SetDestChannel",e[e.StartPacketTransfer=4]="StartPacketTransfer",e[e.StopPacketTransfer=5]="StopPacketTransfer",e[e.UpdateDestChannel=6]="UpdateDestChannel",e[e.Reconnect=7]="Reconnect",e[e.SetVideoProfile=8]="SetVideoProfile",e}({}),Gc=function(e){return e.NETWORK_DISCONNECTED="NETWORK_DISCONNECTED",e.NETWORK_CONNECTED="NETWORK_CONNECTED",e.PACKET_JOINED_SRC_CHANNEL="PACKET_JOINED_SRC_CHANNEL",e.PACKET_JOINED_DEST_CHANNEL="PACKET_JOINED_DEST_CHANNEL",e.PACKET_SENT_TO_DEST_CHANNEL="PACKET_SENT_TO_DEST_CHANNEL",e.PACKET_RECEIVED_VIDEO_FROM_SRC="PACKET_RECEIVED_VIDEO_FROM_SRC",e.PACKET_RECEIVED_AUDIO_FROM_SRC="PACKET_RECEIVED_AUDIO_FROM_SRC",e.PACKET_UPDATE_DEST_CHANNEL="PACKET_UPDATE_DEST_CHANNEL",e.PACKET_UPDATE_DEST_CHANNEL_REFUSED="PACKET_UPDATE_DEST_CHANNEL_REFUSED",e.PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE="PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE",e}({}),lo=function(e){return e.RELAY_STATE_IDLE="RELAY_STATE_IDLE",e.RELAY_STATE_CONNECTING="RELAY_STATE_CONNECTING",e.RELAY_STATE_RUNNING="RELAY_STATE_RUNNING",e.RELAY_STATE_FAILURE="RELAY_STATE_FAILURE",e}({}),Uh=function(e){return e.RELAY_OK="RELAY_OK",e.SERVER_CONNECTION_LOST="SERVER_CONNECTION_LOST",e.SRC_TOKEN_EXPIRED="SRC_TOKEN_EXPIRED",e.DEST_TOKEN_EXPIRED="DEST_TOKEN_EXPIRED",e}({}),Gt=function(e){return e.High="high",e.Low="low",e.Audio="audio",e.Screen="screen",e.ScreenLow="screen_low",e}({}),Vr=function(e){return e.DISCONNECT="disconnect",e.CONNECTION_STATE_CHANGE="connection-state-change",e.NETWORK_QUALITY="network-quality",e.STREAM_TYPE_CHANGE="stream-type-change",e.IS_P2P_DISCONNECTED="is-p2p-dis",e.DISCONNECT_P2P="dis-p2p",e.REQUEST_NEW_GATEWAY_LIST="req-gate-url",e.NEED_RENEW_SESSION="need-sid",e.REQUEST_P2P_CONNECTION_PARAMS="request-p2p-connection-params",e.JOIN_RESPONSE="join-response",e.RESET_CONNECTION_EVENTS="reset-connection-events",e.PRE_CONNECT_PC="pre-connect_pc",e}({}),s_=function(e){return e.P2P_DISCONNECTED="P2P_DISCONNECTED",e.A_ROUND_WS_FAILED="A_ROUND_WS_FAILED",e.TIMEOUT="TIMEOUT",e.UNKNOWN_REASON="UNKNOWN_REASON",e}({}),_r=function(e){return e[e.Nothing=0]="Nothing",e[e.Audio=1]="Audio",e[e.LwoVideo=2]="LwoVideo",e[e.Video=4]="Video",e[e.Data=8]="Data",e[e.DataStream0=256]="DataStream0",e[e.DataStream1=512]="DataStream1",e[e.DataStream2=1024]="DataStream2",e[e.DataStream3=2048]="DataStream3",e[e.DataStream4=4096]="DataStream4",e[e.DataStream5=8192]="DataStream5",e[e.DataStream6=16384]="DataStream6",e[e.DataStream7=32768]="DataStream7",e}({}),Lt=function(e){return e.CHINA="CHINA",e.ASIA="ASIA",e.NORTH_AMERICA="NORTH_AMERICA",e.EUROPE="EUROPE",e.JAPAN="JAPAN",e.INDIA="INDIA",e.KOREA="KOREA",e.HKMC="HKMC",e.US="US",e.OCEANIA="OCEANIA",e.SOUTH_AMERICA="SOUTH_AMERICA",e.AFRICA="AFRICA",e.OVERSEA="OVERSEA",e.GLOBAL="GLOBAL",e.EXTENSIONS="EXTENSIONS",e}({});const GM=[Lt.AFRICA,Lt.ASIA,Lt.CHINA,Lt.EUROPE,Lt.GLOBAL,Lt.INDIA,Lt.JAPAN,Lt.NORTH_AMERICA,Lt.OCEANIA,Lt.OVERSEA,Lt.SOUTH_AMERICA];let ti=function(e){return e.CHINA="CN",e.ASIA="AS",e.NORTH_AMERICA="NA",e.EUROPE="EU",e.JAPAN="JP",e.INDIA="IN",e.KOREA="KR",e.HKMC="HK",e.US="US",e.OCEANIA="OC",e.SOUTH_AMERICA="SA",e.AFRICA="AF",e.OVERSEA="OVERSEA",e.GLOBAL="GLOBAL",e.EXTENSIONS="GLOBAL",e}({});const Hy={CHINA:{},ASIA:{CODE:ti.ASIA,WEBCS_DOMAIN:["ap-web-1-asia.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-asia.agora.io"],PROXY_CS:["proxy-ap-web-asia.agora.io"],CDS_AP:["cds-ap-web-asia.agora.io","cds-ap-web-asia2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-asia.agora.io","sua-ap-web-asia2.agora.io"],UAP_AP:["uap-ap-web-asia.agora.io","uap-ap-web-asia2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-asia.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-asia.agora.io"],LOG_UPLOAD_SERVER:["logservice-asia.agora.io"],PROXY_SERVER_TYPE3:["southeast-asia.webrtc-cloud-proxy.sd-rtn.com"]},NORTH_AMERICA:{CODE:ti.NORTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-north-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-north-america.agora.io"],PROXY_CS:["proxy-ap-web-america.agora.io"],CDS_AP:["cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],UAP_AP:["uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-north-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-north-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-north-america.agora.io"],PROXY_SERVER_TYPE3:["east-usa.webrtc-cloud-proxy.sd-rtn.com"]},EUROPE:{CODE:ti.EUROPE,WEBCS_DOMAIN:["ap-web-1-europe.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-europe.agora.io"],PROXY_CS:["proxy-ap-web-europe.agora.io"],CDS_AP:["cds-ap-web-europe.agora.io","cds-ap-web-europe2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-europe.agora.io","sua-ap-web-europe.agora.io"],UAP_AP:["uap-ap-web-europe.agora.io","uap-ap-web-europe2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-europe.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-europe.agora.io"],LOG_UPLOAD_SERVER:["logservice-europe.agora.io"],PROXY_SERVER_TYPE3:["europe.webrtc-cloud-proxy.sd-rtn.com"]},JAPAN:{CODE:ti.JAPAN,WEBCS_DOMAIN:["ap-web-1-japan.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-japan.agora.io"],PROXY_CS:["proxy-ap-web-japan.agora.io"],CDS_AP:["cds-ap-web-japan.agora.io","cds-ap-web-japan2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-japan.agora.io","sua-ap-web-japan2.agora.io"],UAP_AP:["uap-ap-web-japan.agora.io","uap-ap-web-japan2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-japan.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-japan.agora.io"],LOG_UPLOAD_SERVER:["logservice-japan.agora.io"],PROXY_SERVER_TYPE3:["japan.webrtc-cloud-proxy.sd-rtn.com"]},INDIA:{CODE:ti.INDIA,WEBCS_DOMAIN:["ap-web-1-india.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-india.agora.io"],PROXY_CS:["proxy-ap-web-india.agora.io"],CDS_AP:["cds-ap-web-india.agora.io","cds-ap-web-india2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-india.agora.io","sua-ap-web-india2.agora.io"],UAP_AP:["uap-ap-web-india.agora.io","uap-ap-web-india2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-india.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-india.agora.io"],LOG_UPLOAD_SERVER:["logservice-india.agora.io"],PROXY_SERVER_TYPE3:["india.webrtc-cloud-proxy.sd-rtn.com"]},KOREA:{CODE:ti.KOREA,WEBCS_DOMAIN:["ap-web-1-korea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-korea.agora.io"],PROXY_CS:["proxy-ap-web-korea.agora.io"],CDS_AP:["cds-ap-web-korea.agora.io","cds-ap-web-korea2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-korea.agora.io","sua-ap-web-korea2.agora.io"],UAP_AP:["uap-ap-web-korea.agora.io","uap-ap-web-korea2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-korea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-korea.agora.io"],LOG_UPLOAD_SERVER:["logservice-korea.agora.io"],PROXY_SERVER_TYPE3:["korea.webrtc-cloud-proxy.sd-rtn.com"]},HKMC:{CODE:ti.HKMC,WEBCS_DOMAIN:["ap-web-1-hkmc.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-hkmc.agora.io"],PROXY_CS:["proxy-ap-web-hkmc.agora.io"],CDS_AP:["cds-ap-web-hkmc.agora.io","cds-ap-web-hkmc2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-hkmc.agora.io","sua-ap-web-hkmc2.agora.io"],UAP_AP:["uap-ap-web-hkmc.agora.io","uap-ap-web-hkmc2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-hkmc.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-hkmc.agora.io"],LOG_UPLOAD_SERVER:["logservice-hkmc.agora.io"],PROXY_SERVER_TYPE3:["hkmc.webrtc-cloud-proxy.sd-rtn.com"]},US:{CODE:ti.US,WEBCS_DOMAIN:["ap-web-1-us.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-us.agora.io"],PROXY_CS:["proxy-ap-web-us.agora.io"],CDS_AP:["cds-ap-web-us.agora.io","cds-ap-web-us2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-us.agora.io","sua-ap-web-us2.agora.io"],UAP_AP:["uap-ap-web-us.agora.io","uap-ap-web-us2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-us.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-us.agora.io"],LOG_UPLOAD_SERVER:["logservice-us.agora.io"],PROXY_SERVER_TYPE3:["us.webrtc-cloud-proxy.sd-rtn.com"]},OVERSEA:{CODE:ti.OVERSEA,WEBCS_DOMAIN:["ap-web-1-oversea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oversea.agora.io"],PROXY_CS:["proxy-ap-web-oversea.agora.io"],CDS_AP:["cds-ap-web-oversea.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oversea.agora.io"],UAP_AP:["uap-ap-web-oversea.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oversea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oversea.agora.io"],LOG_UPLOAD_SERVER:["logservice-oversea.agora.io"],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.agora.io"]},GLOBAL:{CODE:ti.GLOBAL,WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-ap-web-3.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-ap-web-3.agora.io"],UAP_AP:["uap-ap-web-1.agora.io","uap-ap-web-3.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2.agora.io"],LOG_UPLOAD_SERVER:["logservice.agora.io"],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com"]},OCEANIA:{CODE:ti.OCEANIA,WEBCS_DOMAIN:["ap-web-1-oceania.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oceania.agora.io"],PROXY_CS:["proxy-ap-web-oceania.agora.io"],CDS_AP:["cds-ap-web-oceania.agora.io","cds-ap-web-oceania2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oceania.agora.io","sua-ap-web-oceania2.agora.io"],UAP_AP:["uap-ap-web-oceania.agora.io","uap-ap-web-oceania2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oceania.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oceania.agora.io"],LOG_UPLOAD_SERVER:["logservice-oceania.agora.io"],PROXY_SERVER_TYPE3:["oceania.webrtc-cloud-proxy.sd-rtn.com"]},SOUTH_AMERICA:{CODE:ti.SOUTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-south-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-south-america.agora.io"],PROXY_CS:["proxy-ap-web-south-america.agora.io"],CDS_AP:["cds-ap-web-south-america.agora.io","cds-ap-web-south-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-south-america.agora.io","sua-ap-web-south-america2.agora.io"],UAP_AP:["uap-ap-web-south-america.agora.io","uap-ap-web-south-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-south-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-south-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-america.agora.io"],PROXY_SERVER_TYPE3:["south-america.webrtc-cloud-proxy.sd-rtn.com"]},AFRICA:{CODE:ti.AFRICA,WEBCS_DOMAIN:["ap-web-1-africa.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-africa.agora.io"],PROXY_CS:["proxy-ap-web-africa.agora.io"],CDS_AP:["cds-ap-web-africa.agora.io","cds-ap-web-africa2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-africa.agora.io","sua-ap-web-africa2.agora.io"],UAP_AP:["uap-ap-web-africa.agora.io","uap-ap-web-africa2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-africa.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-africa.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-africa.agora.io"],PROXY_SERVER_TYPE3:["africa.webrtc-cloud-proxy.sd-rtn.com"]},EXTENSIONS:{}};sN&&(Hy.CHINA={CODE:ti.CHINA,WEBCS_DOMAIN:["webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["proxy-web.ap.sd-rtn.com"],CDS_AP:["cds-web-2.ap.sd-rtn.com","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-web-2.ap.sd-rtn.com","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-web-2.ap.sd-rtn.com","uap-web-4.ap.sd-rtn.com"],EVENT_REPORT_DOMAIN:["web-3.statscollector.sd-rtn.com"],EVENT_REPORT_BACKUP_DOMAIN:["web-4.statscollector.sd-rtn.com"],LOG_UPLOAD_SERVER:["logservice-china.agora.io"],PROXY_SERVER_TYPE3:["east-cn.webrtc-cloud-proxy.sd-rtn.com"]});let GI=function(e){return e.UPDATE_BITRATE_LIMIT="update_bitrate_limit",e}({}),i9=class extends Pn{constructor(t,n){super(),P(this,"onICEConnectionStateChange",void 0),P(this,"onConnectionStateChange",void 0),P(this,"onDTLSTransportStateChange",void 0),P(this,"onDTLSTransportError",void 0),P(this,"onICETransportStateChange",void 0),P(this,"onFirstAudioReceived",void 0),P(this,"onFirstVideoReceived",void 0),P(this,"onFirstAudioDecoded",void 0),P(this,"onFirstVideoDecoded",void 0),P(this,"onFirstVideoDecodedTimeout",void 0),P(this,"onSelectedLocalCandidateChanged",void 0),P(this,"onSelectedRemoteCandidateChanged",void 0),P(this,"getLocalVideoStats",void 0)}},o9=class extends i9{constructor(t,n){super(t,n),P(this,"establishPromise",void 0)}},De=function(e){return e.VIDEO="video",e.AUDIO="audio",e}({}),Ao=function(e){return e[e.UDP=0]="UDP",e[e.TCP=1]="TCP",e[e.RELAY=2]="RELAY",e}({}),$c=function(e){return e[e.FIRST_CONNECTION=0]="FIRST_CONNECTION",e[e.TCP_RESTART=1]="TCP_RESTART",e[e.RELAY_RESTART=2]="RELAY_RESTART",e[e.OLD_FIRST_CONNECTION=10]="OLD_FIRST_CONNECTION",e[e.OLD_RESTART=11]="OLD_RESTART",e[e.DISCONNECTED_OR_FAILED=20]="DISCONNECTED_OR_FAILED",e}({}),se=function(e){return e.LocalVideoTrack="videoTrack",e.LocalAudioTrack="audioTrack",e.LocalVideoLowTrack="videoLowTrack",e}({}),Wt=function(e){return e.New="new",e.Connected="connected",e.Reconnecting="reconnecting",e.Disconnected="disconnected",e}({}),He=function(e){return e.StateChange="stateChange",e.IceConnectionStateChange="iceConnectionStateChange",e.RequestMuteLocal="requestMuteLocal",e.RequestUnmuteLocal="requestUnmuteLocal",e.RequestRePublish="requestRePublish",e.RequestRePublishDataChannel="requestRePublishDataChannel",e.RequestReSubscribe="requestReSubscribe",e.RequestUploadStats="requestUploadStats",e.RequestUpload="requestUpload",e.MediaReconnectStart="MediaReconnectStart",e.MediaReconnectEnd="MediaReconnectEnd",e.NeedSignalRTT="NeedSignalRTT",e.RequestRestartICE="RequestRestartIce",e.PeerConnectionStateChange="PeerConnectionStateChange",e.RequestReconnect="RequestReconnect",e.RequestReconnectPC="RequestReconnectPC",e.RequestUnpublishForReconnectPC="RequestUnpublishForReconnectPC",e.P2PLost="P2PLost",e.UpdateVideoEncoder="UpdateVideoEncoder",e.ConnectionTypeChange="ConnectionTypeChange",e.RequestLowStreamParameter="RequestLowStreamParameter",e.QueryClientConnectionState="QueryClientConnectionState",e.LocalCandidate="LocalCandidate",e.RequestP2PMuteLocal="requestP2PMuteLocal",e.RequestP2PUnPublish="RequestP2PUnPublish",e.RequestP2PUnmuteRemote="RequestP2PUnmuteRemote",e.RequestP2PMuteRemote="RequestP2PMuteRemote",e.RequestP2PRestartICE="RequestP2PRestartICE",e}({}),Wa=function(e){return e.CONNECTING="CONNECTING",e.RECONNECTING="RECONNECTING",e.CONNECTED="CONNECTED",e.CLOSED="CLOSED",e}({}),Ma=function(e){return e[e.CONNECT_AP=0]="CONNECT_AP",e[e.AP_CONNECTED=1]="AP_CONNECTED",e[e.CONNECT_WORKER_MANAGER=2]="CONNECT_WORKER_MANAGER",e[e.WORKER_MANAGER_CONNECTED=3]="WORKER_MANAGER_CONNECTED",e[e.GET_WORKER_MANAGER_RESPONSE=4]="GET_WORKER_MANAGER_RESPONSE",e[e.CONNECT_WORKER=5]="CONNECT_WORKER",e[e.WORKER_CONNECTED=6]="WORKER_CONNECTED",e[e.CLOSED=7]="CLOSED",e}({}),Tr=function(e){return e.CONNECTION_STATE_CHANGE="connection-state-change",e.STATE_CHANGE="state-change",e.INSPECT_RESULT="inspect-result",e.CLIENT_LOCAL_VIDEO_TRACK="client-local-video-track",e.REQUEST_NEW_WORKER_URL="request-new-worker-url",e}({}),a9=function(e){return e.CONNECTED="transmitter:connected",e.RECONNECTING="transmitter:reconnecting",e.WILL_RECONNECT="transmitter:will_reconnect",e.CLOSED="transmitter:closed",e.FAILED="transmitter:failed",e.ON_MESSAGE="transmitter:on_message",e.REQUEST_NEW_URLS="transmitter:request_new_urls",e.RECONNECT_WAITTING_FINISH="transmitter:reconnect_waitting_finish",e.RECONNECT_CREATE_CONNECTION="transmitter:reconnect_create_connection",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE="transmitter:on_token_privilege_did_expire",e.TO_CONNECT_DATACHANNEL="transmitter:to_connect_datachannel",e.FAILBACK="transmitter:failback",e.PRE_CONNECT_PC="transmitter:pre_connect_pc",e}({}),fc=function(e){return e.CAMERA_CHANGED="camera-changed",e.MICROPHONE_CHANGED="microphone-changed",e.PLAYBACK_DEVICE_CHANGED="playback-device-changed",e.AUDIO_AUTOPLAY_FAILED="audio-autoplay-failed",e.AUTOPLAY_FAILED="autoplay-failed",e.AUDIO_CONTEXT_STATE_CHANGED="audio-context-state-changed",e.SECURITY_POLICY_VIOLATION="security-policy-violation",e}({}),ca=function(e){return e.CONNECTING="CONNECTING",e.RECONNECTING="RECONNECTING",e.CONNECTED="CONNECTED",e.CLOSED="CLOSED",e}({}),Ts=function(e){return e.CONNECTION_STATE_CHANGE="connection-state-change",e.STATE_CHANGE="state-change",e.INSPECT_RESULT="inspect-result",e.CLIENT_LOCAL_VIDEO_TRACK="client-local-video-track",e.REQUEST_NEW_WORKER_URL="request-new-worker-url",e}({}),gh=function(e){return e[e.CONNECT_AP=0]="CONNECT_AP",e[e.AP_CONNECTED=1]="AP_CONNECTED",e[e.CONNECT_WORKER_MANAGER=2]="CONNECT_WORKER_MANAGER",e[e.WORKER_MANAGER_CONNECTED=3]="WORKER_MANAGER_CONNECTED",e[e.GET_WORKER_MANAGER_RESPONSE=4]="GET_WORKER_MANAGER_RESPONSE",e[e.CONNECT_WORKER=5]="CONNECT_WORKER",e[e.WORKER_CONNECTED=6]="WORKER_CONNECTED",e[e.CLOSED=7]="CLOSED",e}({}),Hn=function(e){return e.CALL="call",e.CANDIDATE="candidate",e.PUBLISH="publish",e.UNPUBLISH="unpublish",e.CONTROL="control",e.RESTART_ICE="restart_ice",e.ACK="ack",e.RESPONSE="response",e.JOIN="join",e.CHECK="check",e}({}),vh=function(e){return e.ABORT="abort",e}({}),Yl=function(e){return e.MUTE_LOCAL_AUDIO="mute_local_audio",e.MUTE_LOCAL_VIDEO="mute_local_video",e.UNMUTE_LOCAL_AUDIO="unmute_local_audio",e.UNMUTE_LOCAL_VIDEO="unmute_local_video",e}({}),xde=function(e){return e.P2P_TOKEN_TIMEOUT="p2p_token_timeout",e.P2P_TOKEN_CHANGED="p2p_token_changed",e}({});const Nde={[a_.ACCESS_POINT]:{[Ii.NO_FLAG_SET]:{desc:"flag is zero",retry:!1},[Ii.FLAG_SET_BUT_EMPTY]:{desc:"flag is empty",retry:!1},[Ii.INVALID_FALG_SET]:{desc:"invalid flag",retry:!1},[Ii.FLAG_SET_BUT_NO_RE]:{desc:"flag set unilbs but no request",retry:!1},[Ii.INVALID_SERVICE_ID]:{desc:"invalid service id",retry:!1},[Ii.NO_SERVICE_AVAILABLE]:{desc:"no service available",retry:!0},[Ii.NO_SERVICE_AVAILABLE_P2P]:{desc:"no unilbs p2p service available",retry:!0},[Ii.NO_SERVICE_AVAILABLE_VOICE]:{desc:"no unilbs voice service available",retry:!0},[Ii.NO_SERVICE_AVAILABLE_WEBRTC]:{desc:"no unilbs webrtc service available",retry:!0},[Ii.NO_SERVICE_AVAILABLE_CDS]:{desc:"no cds service available",retry:!0},[Ii.NO_SERVICE_AVAILABLE_CDN]:{desc:"no cdn dispatcher service available",retry:!0},[Ii.NO_SERVICE_AVAILABLE_TDS]:{desc:"no tds service available",retry:!0},[Ii.NO_SERVICE_AVAILABLE_REPORT]:{desc:"no unilbs report service available",retry:!0},[Ii.NO_SERVICE_AVAILABLE_APP_CENTER]:{desc:"no app center service available",retry:!0},[Ii.NO_SERVICE_AVAILABLE_ENV0]:{desc:"no unilbs sig env0 service available",retry:!0},[Ii.NO_SERVICE_AVAILABLE_VOET]:{desc:"no unilbs voet service available",retry:!0},[Ii.NO_SERVICE_AVAILABLE_STRING_UID]:{desc:"no string uid service available",retry:!0},[Ii.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS]:{desc:"no webrtc unilbs service available",retry:!0}},[a_.UNILBS]:{[ka.INVALID_VENDOR_KEY]:{desc:"invalid vendor key, can not find appid",retry:!1},[ka.INVALID_CHANNEL_NAME]:{desc:"invalid channel name",retry:!1},[ka.INTERNAL_ERROR]:{desc:"unilbs internal error",retry:!1},[ka.NO_AUTHORIZED]:{desc:"invalid token, authorized failed",retry:!1},[ka.DYNAMIC_KEY_TIMEOUT]:{desc:"dynamic key or token timeout",retry:!1},[ka.NO_ACTIVE_STATUS]:{desc:"no active status",retry:!1},[ka.DYNAMIC_KEY_EXPIRED]:{desc:"dynamic key expired",retry:!1},[ka.STATIC_USE_DYNAMIC_KEY]:{desc:"static use dynamic key",retry:!1},[ka.DYNAMIC_USE_STATIC_KEY]:{desc:"dynamic use static key",retry:!1},[ka.USER_OVERLOAD]:{desc:"amount of users over load",retry:!1},[ka.FORBIDDEN_REGION]:{desc:"the request is forbidden in this area",retry:!1},[ka.CANNOT_MEET_AREA_DEMAND]:{desc:"unable to allocate services in this area",retry:!1}},[a_.STRING_UID_ALLOCATOR]:{[G1.IIIEGAL_APPID]:{desc:"invalid appid",retry:!1},[G1.IIIEGAL_UID]:{desc:"invalid string uid",retry:!1},[G1.INTERNAL_ERROR]:{desc:"string uid allocator internal error",retry:!0}}};function Uf(e){const t=Nde[Math.floor(e/1e4)];if(!t)return{desc:"unknown error",retry:!1};const n=t[e%1e4];if(!n){if(Math.floor(e/1e4)===a_.ACCESS_POINT){const r=e%1e4;if(r.toString()[0]==="1")return{desc:e.toString(),retry:!1};if(r.toString()[0]==="2")return{desc:e.toString(),retry:!0}}return{desc:"unknown error",retry:!1}}return n}const Pde={[$e.K_TIMESTAMP_EXPIRED]:{desc:"K_TIMESTAMP_EXPIRED",action:"failed"},[$e.K_CHANNEL_PERMISSION_INVALID]:{desc:"K_CHANNEL_PERMISSION_INVALID",action:"failed"},[$e.K_CERTIFICATE_INVALID]:{desc:"K_CERTIFICATE_INVALID",action:"failed"},[$e.K_CHANNEL_NAME_EMPTY]:{desc:"K_CHANNEL_NAME_EMPTY",action:"failed"},[$e.K_CHANNEL_NOT_FOUND]:{desc:"K_CHANNEL_NOT_FOUND",action:"failed"},[$e.K_TICKET_INVALID]:{desc:"K_TICKET_INVALID",action:"failed"},[$e.K_CHANNEL_CONFLICTED]:{desc:"K_CHANNEL_CONFLICTED",action:"failed"},[$e.K_SERVICE_NOT_READY]:{desc:"K_SERVICE_NOT_READY",action:"tryNext"},[$e.K_SERVICE_TOO_HEAVY]:{desc:"K_SERVICE_TOO_HEAVY",action:"tryNext"},[$e.K_UID_BANNED]:{desc:"K_UID_BANNED",action:"failed"},[$e.K_IP_BANNED]:{desc:"K_IP_BANNED",action:"failed"},[$e.K_AUTO_REBALANCE]:{desc:"k_AUTO_REBALANCE",action:"recover"},[$e.ERR_INVALID_VENDOR_KEY]:{desc:"ERR_INVALID_VENDOR_KEY",action:"failed"},[$e.ERR_INVALID_CHANNEL_NAME]:{desc:"ERR_INVALID_CHANNEL_NAME",action:"failed"},[$e.WARN_NO_AVAILABLE_CHANNEL]:{desc:"WARN_NO_AVAILABLE_CHANNEL",action:"failed"},[$e.WARN_LOOKUP_CHANNEL_TIMEOUT]:{desc:"WARN_LOOKUP_CHANNEL_TIMEOUT",action:"tryNext"},[$e.WARN_LOOKUP_CHANNEL_REJECTED]:{desc:"WARN_LOOKUP_CHANNEL_REJECTED",action:"failed"},[$e.WARN_OPEN_CHANNEL_TIMEOUT]:{desc:"WARN_OPEN_CHANNEL_TIMEOUT",action:"tryNext"},[$e.WARN_OPEN_CHANNEL_REJECTED]:{desc:"WARN_OPEN_CHANNEL_REJECTED",action:"failed"},[$e.WARN_REQUEST_DEFERRED]:{desc:"WARN_REQUEST_DEFERRED",action:"failed"},[$e.ERR_DYNAMIC_KEY_TIMEOUT]:{desc:"ERR_DYNAMIC_KEY_TIMEOUT",action:"failed"},[$e.ERR_NO_AUTHORIZED]:{desc:"ERR_NO_AUTHORIZED",action:"failed"},[$e.ERR_VOM_SERVICE_UNAVAILABLE]:{desc:"ERR_VOM_SERVICE_UNAVAILABLE",action:"tryNext"},[$e.ERR_NO_CHANNEL_AVAILABLE_CODE]:{desc:"ERR_NO_CHANNEL_AVAILABLE_CODE",action:"failed"},[$e.ERR_MASTER_VOCS_UNAVAILABLE]:{desc:"ERR_MASTER_VOCS_UNAVAILABLE",action:"tryNext"},[$e.ERR_INTERNAL_ERROR]:{desc:"ERR_INTERNAL_ERROR",action:"tryNext"},[$e.ERR_NO_ACTIVE_STATUS]:{desc:"ERR_NO_ACTIVE_STATUS",action:"failed"},[$e.ERR_INVALID_UID]:{desc:"ERR_INVALID_UID",action:"failed"},[$e.ERR_DYNAMIC_KEY_EXPIRED]:{desc:"ERR_DYNAMIC_KEY_EXPIRED",action:"failed"},[$e.ERR_STATIC_USE_DYANMIC_KE]:{desc:"ERR_STATIC_USE_DYANMIC_KE",action:"failed"},[$e.ERR_DYNAMIC_USE_STATIC_KE]:{desc:"ERR_DYNAMIC_USE_STATIC_KE",action:"failed"},[$e.ERR_NO_VOCS_AVAILABLE]:{desc:"ERR_NO_VOCS_AVAILABLE",action:"tryNext"},[$e.ERR_NO_VOS_AVAILABLE]:{desc:"ERR_NO_VOS_AVAILABLE",action:"tryNext"},[$e.ERR_JOIN_CHANNEL_TIMEOUT]:{desc:"ERR_JOIN_CHANNEL_TIMEOUT",action:"tryNext"},[$e.ERR_JOIN_BY_MULTI_IP]:{desc:"ERR_JOIN_BY_MULTI_IP",action:"recover"},[$e.ERR_NOT_JOINED]:{desc:"ERR_NOT_JOINED",action:"failed"},[$e.ERR_REPEAT_JOIN_REQUEST]:{desc:"ERR_REPEAT_JOIN_REQUEST",action:"quit"},[$e.ERR_REPEAT_JOIN_CHANNEL]:{desc:"ERR_REPEAT_JOIN_CHANNEL",action:"quit"},[$e.ERR_INVALID_STRINGUID]:{desc:"ERR_INVALID_STRINGUID",action:"failed"},[$e.ERR_TOO_MANY_USERS]:{desc:"ERR_TOO_MANY_USERS",action:"tryNext"},[$e.ERR_SET_CLIENT_ROLE_TIMEOUT]:{desc:"ERR_SET_CLIENT_ROLE_TIMEOUT",action:"failed"},[$e.ERR_SET_CLIENT_ROLE_NO_PERMISSION]:{desc:"ERR_SET_CLIENT_ROLE_TIMEOUT",action:"failed"},[$e.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE]:{desc:"ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",action:"success"},[$e.ERR_PUBLISH_REQUEST_INVALID]:{desc:"ERR_PUBLISH_REQUEST_INVALID",action:"failed"},[$e.ERR_SUBSCRIBE_REQUEST_INVALID]:{desc:"ERR_SUBSCRIBE_REQUEST_INVALID",action:"failed"},[$e.ERR_NOT_SUPPORTED_MESSAGE]:{desc:"ERR_NOT_SUPPORTED_MESSAGE",action:"failed"},[$e.ERR_ILLEAGAL_PLUGIN]:{desc:"ERR_ILLEAGAL_PLUGIN",action:"failed"},[$e.ILLEGAL_CLIENT_ROLE_LEVEL]:{desc:"ILLEGAL_CLIENT_ROLE_LEVEL",action:"failed"},[$e.ERR_REJOIN_TOKEN_INVALID]:{desc:"ERR_REJOIN_TOKEN_INVALID",action:"failed"},[$e.ERR_REJOIN_USER_NOT_JOINED]:{desc:"ERR_REJOIN_NOT_JOINED",action:"failed"},[$e.ERR_INVALID_OPTIONAL_INFO]:{desc:"ERR_INVALID_OPTIONAL_INFO",action:"quit"},[$e.ERR_TEST_RECOVER]:{desc:"ERR_TEST_RECOVER",action:"recover"},[$e.ERR_TEST_TRYNEXT]:{desc:"ERR_TEST_TRYNEXT",action:"recover"},[$e.ERR_TEST_RETRY]:{desc:"ERR_TEST_RETRY",action:"recover"},[$e.ILLEGAL_AES_PASSWORD]:{desc:"ERR_TEST_RETRY",action:"failed"},[$e.ERR_TOO_MANY_BROADCASTERS]:{desc:"ERR_TOO_MANY_BROADCASTERS",action:"failed"},[$e.ERR_TOO_MANY_SUBSCRIBERS]:{desc:"ERR_TOO_MANY_SUBSCRIBERS",action:"failed"},[$e.ERR_LICENSE_ILLEGAL]:{desc:"ERR_LICENSE_ILLEGAL",action:"quit"},[$e.ERR_LICENSE_MISSING]:{desc:"ERR_LICENSE_MISSING",action:"quit"},[$e.ERR_LICENSE_EXPIRED]:{desc:"ERR_LICENSE_EXPIRED",action:"quit"},[$e.ERR_LICENSE_MINUTES_EXCEEDED]:{desc:"ERR_LICENSE_MINUTES_EXCEEDED",action:"quit"},[$e.ERR_LICENSE_PERIOD_INVALID]:{desc:"ERR_LICENSE_PERIOD_INVALID",action:"quit"},[$e.ERR_LICENSE_MULTIPLE_SDK_SERVICE]:{desc:"ERR_LICENSE_MULTIPLE_SDK_SERVICE",action:"quit"}};function T0(e){return Pde[e]||{desc:"UNKNOWN_ERROR_".concat(e),action:"failed"}}function KM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Y1(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?KM(Object(n),!0).forEach(function(r){P(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):KM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function qM(e){return e.every(t=>t.readyState===WebSocket.CLOSED||t.readyState===WebSocket.CLOSING)}function YM(e,t){if(typeof e=="string")return e;const{proxy:n,host:r,port:i}=e;if(t){const o=H("JOIN_GATEWAY_FALLBACK_PORT")||443;return o===443?"wss://".concat(r,"/ws/?p=").concat(Number(i)+150):"wss://".concat(r,":").concat(o,"/ws/?p=").concat(Number(i)+150)}return n?"wss://".concat(n,"/ws/?h=").concat(r,"&p=").concat(i):"wss://".concat(r,":").concat(i)}const Dde=/wss:\/\/(.+)\/ws\/\?h=(.+)&p=([0-9]+)\/?/,Lde=/wss:\/\/(.+)\/ws\/\?p=([0-9]+)\/?/,kde=/wss:\/\/(.+):([0-9]+)\/?/,Mde=/wss:\/\/(.[^\/]+)\/?/;let Fde=0;class Ude{constructor(t,n){P(this,"id",0),P(this,"store",void 0),P(this,"recordIndex",void 0),P(this,"websockets",[]),P(this,"try443PortDuration",2e3),P(this,"forceCloseWSDuration",5e3),P(this,"try443PortTimeout",null),P(this,"forceCloseTimeout",null),P(this,"isTry443PortFailed",!1),P(this,"isNormalPortFailed",!1),P(this,"useDoubleDomain",!1),P(this,"useProxy",!1),P(this,"startTime",Date.now()),this.id=++Fde,this.try443PortDuration=H("JOIN_GATEWAY_TRY_443PORT_DURATION")||2e3,this.forceCloseWSDuration=t||5e3,this.store=n}closeAllWebsockets(){this.websockets.forEach(t=>{t.onopen=null,t.onclose=null,t.onmessage=null,t.close()}),this.websockets.length=0}clearTimeout(){this.forceCloseTimeout&&clearTimeout(this.forceCloseTimeout),this.try443PortTimeout&&clearTimeout(this.try443PortTimeout)}logger(){var t;const n=Date.now()-this.startTime;for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];w.debug("[choose-best-ws ".concat((t=this.store)===null||t===void 0?void 0:t.clientId," ").concat(this.id,"] ").concat(n,"ms:"),...i)}createWebSocket(t,n,r){this.logger("createWebSocket:",t,{isTry443Port:n,hasTimeoutDetection:r});const i=H("GATEWAY_DOMAINS"),o=Date.now(),a=[],s=i.find(u=>{var d;return Ce(d=t.host).call(d,u)});s||(this.useDoubleDomain=!1);const c=[];if(this.useDoubleDomain)i.forEach(u=>{c.push(YM(Y1(Y1({},t),{},{host:t.host.replace(s,u)}),n))});else{const u=Y1({},t);if(n&&s){const d=i.find(h=>h!==s);d&&(u.host=u.host.replace(s,d))}c.push(YM(u,n))}try{c.forEach(u=>{const d=new WebSocket(u);d.binaryType="arraybuffer",a.push(d),this.logger("ws is connecting:",d.url)})}catch(u){if(this.logger("ws create failed"),a.forEach(d=>d.close()),a.length=0,this.useDoubleDomain)return this.useDoubleDomain=!1,this.createWebSocket(t,n,r);if(!n&&Number(t.port)!==443)return this.createWebSocket(t,!0,r);throw new q(k.WS_ERR,"init websocket failed! Error: ".concat(u.toString()))}const l=S0();return this.store&&this.store.recordJoinChannelService({urls:a.map(u=>u.url),service:"gateway"},this.recordIndex),a.forEach(u=>{u.onopen=()=>{this.logger("onopen: ws ".concat(u.url," open cost ").concat(Date.now()-o,"ms")),this.websockets.forEach(d=>{d!==u&&(d.onopen=null,d.onclose=null,d.onmessage=null,d.close(),this.logger("close backup websocket: ".concat(d.url)))}),this.websockets.length=0,l.resolve(u)},u.onclose=d=>{this.logger("onclose: ws ".concat(u.url," closed cost ").concat(Date.now()-o,"ms state: ").concat(u.readyState)),n?this.isTry443PortFailed=qM(a):this.isNormalPortFailed=qM(a),this.logger("443: ".concat(this.useProxy?"not try":this.isTry443PortFailed?"failed":"trying"," 47xx: ").concat(this.isNormalPortFailed?"failed":"trying")),(n&&this.isTry443PortFailed||!n&&(this.isTry443PortFailed||this.useProxy)&&this.isNormalPortFailed)&&(this.logger("onclose: all websocket is closed, ".concat(d.reason)),l.reject({code:d.code,reason:s_.A_ROUND_WS_FAILED}))},u.onmessage=d=>this.logger("".concat(u.url," onmessage: ").concat(d.data))}),this.websockets.push(...a),r||(()=>{const u=()=>{this.logger("5s timeout close un-opens, isWebsocket created: ",l.isResolved),this.websockets.forEach(d=>d.readyState!==WebSocket.OPEN&&d.close())};if(n||this.useProxy)return this.logger("add 5s timeout at ".concat(n?"try-443":"proxy"," condition")),this.forceCloseTimeout=window.setTimeout(u,this.forceCloseWSDuration);this.try443PortTimeout=window.setTimeout(()=>{if(this.logger("2s timeout, isWebsocket created: ",l.isResolved),l.isResolved)return u();Tt().os===yr.MAC_OS&&Fn()&&u(),this.createWebSocket(t,!0,!0).then(d=>l.resolve(d)).catch(d=>{this.isNormalPortFailed&&l.reject(d),this.logger("try 443 port to create ws failed")}),this.forceCloseTimeout=window.setTimeout(u,this.forceCloseWSDuration)},this.try443PortDuration)})(),l.promise}chooseBestWebsocket(t,n,r,i){return this.useDoubleDomain=!!n,typeof t=="string"&&(t=function(o){let a,s,c;return[,a,s,c]=o.match(Dde)||[],a||([,s,c]=o.match(Lde)||[]),s&&c||([,s,c]=o.match(kde)||[]),s&&c||([,s]=o.match(Mde)||[]),s||w.warning("un-destructible url: ",o),{proxy:a,host:s,port:c||"443"}}(t)),this.recordIndex=i,this.useProxy=!!t.proxy,r&&this.useProxy&&(w.warn("cannot use 443 only when use proxy"),r=!1),this.createWebSocket(t,!!r,!1).finally(()=>this.clearTimeout())}}function XM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}class s9 extends Pn{get url(){return this.websocket&&this.websocket.url||null}get reconnectMode(){return this._reconnectMode}set reconnectMode(t){var n;Ce(n=["tryNext","recover"]).call(n,t)&&this.resetReconnectCount(t),this._reconnectMode=t}get state(){return this._state}set state(t){t!==this._state&&(this._state=t,this._state==="reconnecting"?this.emit(Ye.RECONNECTING,this.reconnectReason):this._state==="connected"?this.emit(Ye.CONNECTED):this._state==="closed"?this.emit(Ye.CLOSED):this._state==="failed"&&this.emit(Ye.FAILED))}resetReconnectCount(t){w.debug("websocket reset reconnect count, reason: "+t),this.reconnectCount=0}constructor(t,n){let r=arguments.length>2&&arguments[2]!==void 0&&arguments[2],i=arguments.length>3&&arguments[3]!==void 0&&arguments[3],o=arguments.length>4&&arguments[4]!==void 0&&arguments[4],a=arguments.length>5?arguments[5]:void 0;super(),P(this,"connectionID",0),P(this,"currentURLIndex",0),P(this,"urls",[]),P(this,"_reconnectMode","tryNext"),P(this,"reconnectReason",void 0),P(this,"_initMutex",new ri("websocket")),P(this,"name",void 0),P(this,"_state","closed"),P(this,"reconnectInterrupter",void 0),P(this,"websocket",void 0),P(this,"retryConfig",void 0),P(this,"reconnectCount",0),P(this,"forceCloseTimeout",5e3),P(this,"onlineReconnectListener",void 0),P(this,"useCompress",void 0),P(this,"tryDoubleDomain",!1),P(this,"use443PortOnly",!1),P(this,"wsInflateLength",0),P(this,"wsDeflateLength",0),P(this,"closeEstablishingWs",()=>{}),P(this,"store",void 0),P(this,"joinGatewayRecordIndex",void 0),this.store=a,this.name=t,this.retryConfig=function(d){for(var h=1;h<arguments.length;h++){var f=arguments[h]!=null?arguments[h]:{};h%2?XM(Object(f),!0).forEach(function(g){P(d,g,f[g])}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(f)):XM(Object(f)).forEach(function(g){Object.defineProperty(d,g,Object.getOwnPropertyDescriptor(f,g))})}return d}({},n),this.useCompress=r,this.tryDoubleDomain=i,this.use443PortOnly=o;const{timeout:s,timeoutFactor:c}=n,l=Math.max(300,Math.floor(3*s/5)),u=Math.max(1.2,Math.floor(8*c)/10);Io.ONLINE&&(this.retryConfig.timeout=l,this.retryConfig.timeoutFactor=u),Jn.on(Kh.NETWORK_STATE_CHANGE,(d,h)=>{d!==h&&(this.resetReconnectCount("network state change: ".concat(h," -> ").concat(d)),d===Io.ONLINE?(this.retryConfig.timeout=l,this.retryConfig.timeoutFactor=u):(this.retryConfig.timeout=s,this.retryConfig.timeoutFactor=c))})}getConnection(){return this.websocket||void 0}async init(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5e3;const r=await this._initMutex.lock();this.forceCloseTimeout=n,this.urls=t,this.state="connecting";try{const i=S0(),o=this.urls[this.currentURLIndex];H("ENABLE_PREALLOC_PC")&&this.emit(a9.PRE_CONNECT_PC),this.createWebSocketConnection(o).then(i.resolve).catch(i.reject),this.once(Ye.CLOSED,()=>{i.reject(new Q(k.WS_DISCONNECT))}),this.once(Ye.CONNECTED,i.resolve),await i.promise}catch{}finally{r()}}close(t,n){if(this.currentURLIndex=0,this.resetReconnectCount("close"),this.reconnectInterrupter&&this.reconnectInterrupter(),this.websocket){this.websocket.onclose=null,this.websocket.onopen=null,this.websocket.onmessage=null;const r=this.websocket;n?setTimeout(()=>r.close(),500):r.close(),this.websocket=void 0}this.state=t?"failed":"closed",this.closeEstablishingWs&&this.closeEstablishingWs()}reconnect(t,n){if(!this.websocket)return void w.warning("[".concat(this.name,"] can not reconnect, no websocket"));t!==void 0&&(this.reconnectMode=t),w.debug("[".concat(this.name,"] reconnect is triggered initiative")),typeof this.joinGatewayRecordIndex=="number"&&this.store&&this.store.recordJoinChannelService({status:"error",errors:[new Error(n)]},this.joinGatewayRecordIndex);const r=this.websocket.onclose;this.websocket.onclose=null,this.websocket.close(),r&&r.bind(this.websocket)({code:9999,reason:n})}sendMessage(t){let n=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(!this.websocket||this.websocket.readyState!==WebSocket.OPEN)throw new Q(k.WS_ABORT,"websocket is not ready");try{n||(t=JSON.stringify(t)),this.websocket.send(t)}catch(r){throw new Q(k.WS_ERR,"send websocket message error"+r.toString())}}setWsInflateData(t){this.wsDeflateLength=this.wsDeflateLength+t.originLength,this.wsInflateLength=this.wsInflateLength+t.compressedLength}getWsInflateData(){const t=this.wsInflateLength,n=this.wsDeflateLength;return this.clearWsInflateData(),{wsInflateLength:t,wsDeflateLength:n}}clearWsInflateData(){this.wsInflateLength=0,this.wsDeflateLength=0}async createWebSocketConnection(t){var n;const r=S0();this.connectionID+=1,this.joinGatewayRecordIndex=void 0;const i=u=>{var d;(d=this.store)===null||d===void 0||d.signalChannelOpen(),w.debug("[".concat(this.name,"] websocket opened:"),u),this.reconnectMode="retry",this.state="connected",this.resetReconnectCount("opened"),r.resolve()},o=async u=>{var d;if(w.debug("[".concat(this.name,"] websocket close ").concat((d=this.websocket)===null||d===void 0?void 0:d.url,", code: ").concat(u.code,", reason: ").concat(u.reason,", current mode: ").concat(this.reconnectMode)),this.reconnectCount>=this.retryConfig.maxRetryCount)r.reject(new Q(k.WS_DISCONNECT,"websocket close: ".concat(u.code))),this.close();else{this.state==="connected"&&(this.reconnectReason=u.reason,this.state="reconnecting");const h=ga(this,Ye.WILL_RECONNECT,this.reconnectMode,u.reason)||this.reconnectMode,f=await this.reconnectWithAction(h);if(this.state==="closed")return void w.debug("[".concat(this.connectionID,"] ws is closed, no need to reconnect"));if(!f)return r.reject(new Q(k.WS_DISCONNECT,"websocket reconnect failed: ".concat(u.code))),this.close(!0);r.resolve()}},a=u=>{this.emit(Ye.ON_MESSAGE,u)},s=u=>{w.warn("[".concat(this.connectionID,"] ws open error ").concat(u))};this.websocket&&(this.websocket.onclose=null,this.websocket.close()),H("GATEWAY_WSS_ADDRESS")&&this.name.startsWith("gateway")&&(t=H("GATEWAY_WSS_ADDRESS")),w.debug("[".concat(this.name,"] start connect, url:"),t);const c=(n=this.store)===null||n===void 0?void 0:n.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"gateway"});try{var l;const u=await this.chooseBestWebsocketConnection(t);this.websocket=u,i&&i(this.websocket.url),this.websocket.onclose=o,this.websocket.onmessage=a,this.websocket.onerror=s,(l=this.store)===null||l===void 0||l.recordJoinChannelService({endTs:Date.now(),status:"success"},c),this.joinGatewayRecordIndex=c}catch(u){const d=this.state==="closed",h=u instanceof Q,f=h&&u.code===k.WS_ABORT,g=h&&u.code===k.WS_ERR,p=h?u.message:u&&(u.reason||u.toString());w.warning("[choose-best-ws] chooseBestWebsocket error: ".concat(p)),this.store&&this.store.recordJoinChannelService({endTs:Date.now(),status:f?"aborted":"error",errors:[u]},c),d||g?(r.reject(d?new Q(k.WS_DISCONNECT,"websocket is closed: ".concat(p)):new Q(k.WS_ERR,"init websocket failed: ".concat(p))),g&&w.error("[".concat(this.name,"] init websocket failed: ").concat(p))):o&&o(u)}return r.promise}async reconnectWithAction(t){let n=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(this.reconnectCount>=this.retryConfig.maxRetryCount||this.urls.length===0||this.state==="closed")return!1;w.warning("[choose-best-ws] action: =>",t),this.onlineReconnectListener||Jn.isOnline||!Jn.onlineWaiter||(this.onlineReconnectListener=Jn.onlineWaiter.then(()=>{this.onlineReconnectListener=void 0}));let r=!0;if(this.reconnectInterrupter=()=>r=!1,n){const a=aN(this.reconnectCount,this.retryConfig);w.debug("[".concat(this.name,"] wait ").concat(a,"ms to reconnect websocket, mode: ").concat(t)),await _e.race([Lr(a),this.onlineReconnectListener||new _e(()=>{})])}if(this._state==="closed"||!r)return!1;this.reconnectCount+=1;const i=async(a,s)=>{this.emit(Ye.RECONNECT_CREATE_CONNECTION,s),await this.createWebSocketConnection(a)};try{if(t==="retry")this.emit(Ye.RECONNECT_WAITTING_FINISH,t),await i(this.urls[this.currentURLIndex],t);else if(t==="tryNext"){if(this.currentURLIndex+=1,this.currentURLIndex>=this.urls.length)return this.reconnectWithAction("recover",!1);w.debug("[".concat(this.name,"] websocket url length: ").concat(this.urls.length," current index: ").concat(this.currentURLIndex)),this.emit(Ye.RECONNECT_WAITTING_FINISH,t),await i(this.urls[this.currentURLIndex],t)}else t==="recover"&&(w.debug("[".concat(this.name,"] request new urls")),this.resetReconnectCount("recover mode"),this.emit(Ye.RECONNECT_WAITTING_FINISH,t),this.urls=await Kr(this,Ye.REQUEST_NEW_URLS),this.currentURLIndex=0,await i(this.urls[this.currentURLIndex],t))}catch(a){var o;w.error("[".concat(this.name,"] reconnect failed ").concat(a&&a.toString()));const s=a==null||(o=a.data)===null||o===void 0?void 0:o.desc;return Array.isArray(s)&&Ce(s).call(s,"dynamic key expired")?(this.emit(Ye.ON_TOKEN_PRIVILEGE_DID_EXPIRE),!1):this.reconnectWithAction(t,n)}return!0}}class uN extends s9{constructor(t,n){super(t,n,arguments.length>2&&arguments[2]!==void 0&&arguments[2],arguments.length>3&&arguments[3]!==void 0&&arguments[3],arguments.length>4&&arguments[4]!==void 0&&arguments[4],arguments.length>5?arguments[5]:void 0)}async chooseBestWebsocketConnection(t,n){const r=S0(),i=function(a,s){return new Ude(a,s)}(this.forceCloseTimeout,this.store);this.closeEstablishingWs=()=>{w.debug("[choose-best-ws] close establishing websockets"),i.closeAllWebsockets(),r.reject(new Q(k.WS_ABORT,"choose best websocket aborted"))};const o=H("GATEWAY_DOMAINS");return w.debug("[choose-best-ws] currentDomain: ",t,", domains: ",o,"total: ".concat(this.urls.length),"current: ".concat(this.currentURLIndex+1)),i.chooseBestWebsocket(t,this.tryDoubleDomain,this.use443PortOnly,n).then(r.resolve).catch(r.reject),r.promise.finally(()=>{this.closeEstablishingWs=void 0})}}class R0 extends s9{constructor(t,n){super(t,n,arguments.length>2&&arguments[2]!==void 0&&arguments[2],arguments.length>3&&arguments[3]!==void 0&&arguments[3],arguments.length>4&&arguments[4]!==void 0&&arguments[4],arguments.length>5?arguments[5]:void 0)}async chooseBestWebsocketConnection(t,n){return new _e((r,i)=>{let o=!1;const a=[];this.closeEstablishingWs=()=>{w.debug("[choose-best-ws] close establishing websockets"),a.forEach(g=>{g.onclose=null,g.onopen=null,g.onmessage=null,g.close()}),i(new Q(k.WS_ABORT,"choose best websocket aborted"))};const s=H("GATEWAY_DOMAINS");let c;const l=t.indexOf("?h="),u=s.find(g=>l!==-1?Ce(t).call(t,g,l):Ce(t).call(t,g));w.debug("[choose-best-ws] currentDomain: ",u,", domains: ",s);let d=!this.tryDoubleDomain||!u;if(!d&&u){var h;const g=Date.now();try{s.forEach(p=>{const m=l===-1?t.replace(u,p):t.substr(0,l)+t.substr(l).replace(u,p),_=new WebSocket(m);_.binaryType="arraybuffer",a.push(_),w.debug("[choose-best-ws] ws is connecting:",_.url)})}catch{for(w.debug("[choose-best-ws] ws create failed, fallback to single url"),a.forEach(m=>m.close());a.length;)a.pop();d=!0}(h=this.store)===null||h===void 0||h.recordJoinChannelService({urls:a.map(p=>p.url),service:"gateway"},n),a.forEach(p=>{p.onopen=()=>{if(o)return;const m=Date.now()-g;w.debug("[choose-best-ws] ws open cost ".concat(m,"ms")),a.filter(_=>_!==p).forEach(_=>{w.debug("[choose-best-ws]close backup websocket: ".concat(_.url)),_.close()}),o=!0,r(p)},p.onclose=m=>{c=m,!o&&(a.find(_=>!(_.readyState===WebSocket.CLOSED||_.readyState===WebSocket.CLOSING))||(w.debug("[choose-best-ws] all websocket is closed"),o=!0,i(c)))},p.onmessage=m=>{w.debug("[choose-best-ws]".concat(p.url," onmessage: ").concat(m.data))}}),Lr(this.forceCloseTimeout).then(()=>{a.forEach(p=>{p.readyState!==WebSocket.OPEN&&p.close()})})}if(d){var f;let g;w.debug("[choose-best-ws] use single url: ",t),(f=this.store)===null||f===void 0||f.recordJoinChannelService({urls:[t],service:"gateway"},n);try{g=new WebSocket(t),a.push(g),g.binaryType="arraybuffer"}catch(p){const m=new Q(k.WS_ERR,"init websocket failed! Error: ".concat(p.toString()));return w.error("[".concat(this.name,"]").concat(m)),void i(m)}g.onopen=()=>{r(g)},g.onclose=p=>{i(p)},g.onmessage=p=>{w.debug("[choose-best-ws]".concat(g.url," onmessage: ").concat(p.data))},Lr(this.forceCloseTimeout).then(()=>{g&&g.readyState!==WebSocket.OPEN&&g.close()})}}).then(r=>(this.closeEstablishingWs=void 0,r)).catch(r=>{throw this.closeEstablishingWs=void 0,r})}}class Bde extends Pn{get connectionState(){return this._connectionState}set connectionState(t){t!==this._connectionState&&(this._connectionState=t,t===sn.CONNECTED?this.emit(qe.WS_CONNECTED):t===sn.RECONNECTING?this.emit(qe.WS_RECONNECTING,this._websocketReconnectReason):t===sn.CLOSED&&this.emit(qe.WS_CLOSED,this._disconnectedReason))}get currentURLIndex(){return this.websocket.currentURLIndex}get url(){return this.websocket&&this.websocket.url||null}get rtt(){return this.rttRolling.mean()}constructor(t,n){super(),P(this,"_disconnectedReason",void 0),P(this,"_websocketReconnectReason",void 0),P(this,"_connectionState",sn.CLOSED),P(this,"reconnectToken",void 0),P(this,"websocket",void 0),P(this,"openConnectionTime",void 0),P(this,"clientId",void 0),P(this,"lastMsgTime",Date.now()),P(this,"uploadCache",[]),P(this,"uploadCacheInterval",void 0),P(this,"rttRolling",new Z7(5)),P(this,"pingpongTimer",void 0),P(this,"wsInflateDataTimer",void 0),P(this,"pingpongTimeoutCount",0),P(this,"joinResponse",void 0),P(this,"multiIpOption",void 0),P(this,"initError",void 0),P(this,"spec",void 0),P(this,"store",void 0),P(this,"onWebsocketMessage",r=>{if(r.data instanceof ArrayBuffer)return void this.emit(qe.ON_BINARY_DATA,r.data);const i=JSON.parse(r.data);if(this.lastMsgTime=Date.now(),Object.prototype.hasOwnProperty.call(i,"_id")){const o="res-@".concat(i._id);this.emit(o,i._result,i._message)}else if(Object.prototype.hasOwnProperty.call(i,"_type")){if(this.emit(i._type,i._message),i._type===pt.ON_NOTIFICATION&&this.handleNotification(i._message),i._type===pt.ON_USER_BANNED)switch(i._message.error_code){case 14:this.close(Xt.UID_BANNED);break;case 15:this.close(Xt.IP_BANNED);break;case 16:this.close(Xt.CHANNEL_BANNED)}if(i._type===pt.ON_USER_LICENSE_BANNED)switch(i._message.error_code){case $e.ERR_LICENSE_MISSING:this.close(Xt.LICENSE_MISSING);break;case $e.ERR_LICENSE_EXPIRED:this.close(Xt.LICENSE_EXPIRED);break;case $e.ERR_LICENSE_MINUTES_EXCEEDED:this.close(Xt.LICENSE_MINUTES_EXCEEDED);break;case $e.ERR_LICENSE_PERIOD_INVALID:this.close(Xt.LICENSE_PERIOD_INVALID);break;case $e.ERR_LICENSE_MULTIPLE_SDK_SERVICE:this.close(Xt.LICENSE_MULTIPLE_SDK_SERVICE);break;case $e.ERR_LICENSE_ILLEGAL:this.close(Xt.LICENSE_ILLEGAL);break;default:this.close()}}}),this.clientId=t.clientId,this.spec=t,this.store=n,this.websocket=new uN("gateway-".concat(this.clientId),this.spec.retryConfig,!0,H("JOIN_GATEWAY_USE_DUAL_DOMAIN"),H("JOIN_GATEWAY_USE_443PORT_ONLY"),n),this.handleWebsocketEvents(),window.addEventListener("offline",()=>{this.connectionState===sn.CONNECTED&&this.reconnect("retry",Wr.OFFLINE)})}async request(t,n,r,i){const o=cn(6,""),a={_id:o,_type:t,_message:n},s=this.websocket.connectionID,c=()=>new _e((g,p)=>{if(this.connectionState===sn.CONNECTED)return g();const m=()=>{this.off(qe.WS_CLOSED,_),g()},_=()=>{this.off(qe.WS_CONNECTED,m),p(new q(k.WS_ABORT))};this.once(qe.WS_CONNECTED,m),this.once(qe.WS_CLOSED,_),t!==Ke.PUBLISH&&t!==Ke.PUBLISH_DATASTREAM&&t!==Ke.SUBSCRIBE&&t!==Ke.SUBSCRIBE_DATASTREAM&&t!==Ke.UNSUBSCRIBE&&t!==Ke.UNSUBSCRIBE_DATASTREAM&&t!==Ke.UNPUBLISH&&t!==Ke.UNPUBLISH_DATASTREAM&&t!==Ke.CONTROL&&t!==Ke.RESTART_ICE||this.once(qe.DISCONNECT_P2P,()=>{p(new q(k.DISCONNECT_P2P))}),t!==Ke.PUBLISH&&t!==Ke.RESTART_ICE||this.once(qe.ABORT_P2P_EXECUTION,()=>{p(new q(k.DISCONNECT_P2P))})});if(this.connectionState!==sn.CONNECTING&&this.connectionState!==sn.RECONNECTING||t===Ke.JOIN||t===Ke.REJOIN||await c(),this.websocket.sendMessage(a,!0),i)return;const l=new _e((g,p)=>{let m=!1;const _=(S,C)=>{m=!0,g({isSuccess:S==="success",message:C||{}}),this.off(qe.WS_CLOSED,E),this.off(qe.WS_RECONNECTING,E),this.emit(qe.REQUEST_SUCCESS,t,n)};this.once("res-@".concat(o),_);const E=()=>{p(new q(k.WS_ABORT,"type: ".concat(t))),this.off(qe.WS_CLOSED,E),this.off(qe.WS_RECONNECTING,E),this.off("res-@".concat(o),_)};this.once(qe.WS_CLOSED,E),this.once(qe.WS_RECONNECTING,E),Lr(H("SIGNAL_REQUEST_TIMEOUT")).then(()=>{this.websocket.connectionID!==s||m||(w.warning("[".concat(this.clientId,"] ws request timeout, type: ").concat(t)),this.emit(qe.REQUEST_TIMEOUT,t,n))})});let u=null;try{u=await l}catch(g){if(this.connectionState===sn.CLOSED||t===Ke.LEAVE)throw new q(k.WS_ABORT);return!this.spec.forceWaitGatewayResponse||r?g.throw():t===Ke.JOIN||t===Ke.REJOIN?null:(await c(),await this.request(t,n))}if(u.isSuccess)return u.message;const d=Number(u.message.error_code||u.message.code),h=T0(d),f=new q(k.UNEXPECTED_RESPONSE,"".concat(h.desc,": ").concat(u.message.error_str),{code:d,data:u.message,desc:h.desc});return h.action==="success"?u.message:(w.warning("[".concat(this.clientId,"] [").concat(this.websocket.connectionID,"] unexpected response from type ").concat(t,", error_code: ").concat(d,", message: ").concat(h.desc,", action: ").concat(h.action)),d===$e.ERR_TOO_MANY_BROADCASTERS?((t===Ke.JOIN||t===Ke.REJOIN)&&(this.initError=f,this.close()),f.throw()):h.action==="failed"?f.throw():h.action==="quit"?(this.initError=f,this.close(),f.throw()):(d===$e.ERR_JOIN_BY_MULTI_IP?(this.multiIpOption=u.message.option,w.warning("[".concat(this.clientId,"] detect multi ip, recover")),this.reconnect("recover",Wr.MULTI_IP)):this.reconnect(h.action,Wr.SERVER_ERROR),t===Ke.JOIN||t===Ke.REJOIN?null:await this.request(t,n)))}waitMessage(t,n){return new _e(r=>{const i=o=>{(!n||n(o))&&(this.off(t,i),r(o))};this.on(t,i)})}uploadWRTCStats(t){if(!this.store.sessionId)return void w.warn("[".concat(this.clientId,"] no session id when upload wrtc stats"));const n={lts:Date.now(),sid:this.store.sessionId,uid:this.store.intUid,stats:t};this.upload(b0.WRTC_STATS,n)}upload(t,n){const r={_type:t,_message:n};try{this.websocket.sendMessage(r)}catch{const o=H("MAX_UPLOAD_CACHE")||50;this.uploadCache.push(r),this.uploadCache.length>o&&this.uploadCache.splice(0,1),this.uploadCache.length>0&&!this.uploadCacheInterval&&(this.uploadCacheInterval=window.setInterval(()=>{if(this.connectionState!==sn.CONNECTED)return;const a=this.uploadCache.splice(0,1)[0];this.uploadCache.length===0&&(window.clearInterval(this.uploadCacheInterval),this.uploadCacheInterval=void 0),this.upload(a._type,a._message)},H("UPLOAD_CACHE_INTERVAL")||2e3))}}send(t,n){const r={_type:t,_message:n};this.websocket.sendMessage(r)}init(t,n){return this.initError=void 0,this.multiIpOption=void 0,this.joinResponse=void 0,this.reconnectToken=void 0,this.openConnectionTime=void 0,new _e((r,i)=>{this.once(qe.WS_CONNECTED,()=>r(this.joinResponse)),this.once(qe.WS_CLOSED,()=>i(this.initError||new q(k.WS_ABORT))),this.connectionState=sn.CONNECTING,this.websocket.init(t).catch(i),this.wsInflateDataTimer&&window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=window.setInterval(()=>{this.handleWsInflateData()},2e4)})}close(t){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.wsInflateDataTimer&&(this.handleWsInflateData(),window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=void 0),this.reconnectToken=void 0,this.joinResponse=void 0,this._disconnectedReason=t||Xt.LEAVE,this.connectionState=sn.CLOSED,w.debug("[".concat(this.clientId,"] ")+"will close websocket in signal"),this.websocket.close()}async join(){if(!this.joinResponse){this.emit(qe.ABORT_P2P_EXECUTION);const t=await Kr(this,qe.REQUEST_JOIN_INFO),n=await this.request(Ke.JOIN,t);if(!n)return this.emit(qe.REPORT_JOIN_GATEWAY,s_.TIMEOUT,this.url||""),!1;this.joinResponse=n,this.emit(qe.JOIN_RESPONSE,this.joinResponse),this.reconnectToken=this.joinResponse.rejoin_token}return this.connectionState=sn.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),!0}async rejoin(){if(!this.reconnectToken)throw new q(k.UNEXPECTED_ERROR,"can not rejoin, no rejoin token");const t=C0(this,qe.REQUEST_REJOIN_INFO);t.token=this.reconnectToken;const n=await this.request(Ke.REJOIN,t);return!!n&&(this.connectionState=sn.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),n.peers&&n.peers.forEach(r=>{this.emit(pt.ON_USER_ONLINE,{uid:r.uid}),r.audio&&this.emit(pt.ON_ADD_AUDIO_STREAM,{uid:r.uid,uint_id:r.uint_id,audio:!0,ssrcId:r.audio_ssrc}),r.video&&this.emit(pt.ON_ADD_VIDEO_STREAM,{uid:r.uid,uint_id:r.uint_id,video:!0,ssrcId:r.video_ssrc}),r.audio_mute?this.emit(pt.MUTE_AUDIO,{uid:r.uid}):this.emit(pt.UNMUTE_AUDIO,{uid:r.uid}),r.video_mute?this.emit(pt.MUTE_VIDEO,{uid:r.uid}):this.emit(pt.UNMUTE_VIDEO,{uid:r.uid}),r.audio_enable_local?this.emit(pt.ENABLE_LOCAL_AUDIO,{uid:r.uid}):this.emit(pt.DISABLE_LOCAL_AUDIO,{uid:r.uid}),r.video_enable_local?this.emit(pt.ENABLE_LOCAL_VIDEO,{uid:r.uid}):this.emit(pt.DISABLE_LOCAL_VIDEO,{uid:r.uid}),r.audio||r.video||this.emit(pt.ON_REMOVE_STREAM,{uid:r.uid,uint_id:r.uint_id})}),!0)}reconnect(t,n){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.websocket.reconnect(t,n)}handleNotification(t){w.debug("[".concat(this.clientId,"] receive notification: "),t);const n=T0(t.code);if(n.action!=="success"){if(n.action!=="failed")return n.action==="quit"?(n.desc==="ERR_REPEAT_JOIN_CHANNEL"&&this.close(Xt.UID_BANNED),void this.close()):void this.reconnect(n.action,Wr.SERVER_ERROR);w.error("[".concat(this.clientId,"] ignore error: "),n.desc)}}handlePingPong(){if(!this.websocket||this.websocket.state!=="connected")return;this.pingpongTimeoutCount>0&&this.rttRolling.add(3e3),this.pingpongTimeoutCount+=1;const t=H("PING_PONG_TIME_OUT"),n=Date.now();this.pingpongTimeoutCount>=t&&(w.warning("[".concat(this.clientId,"] PING-PONG Timeout. Last Socket Message: ").concat(n-this.lastMsgTime,"ms")),n-this.lastMsgTime>H("WEBSOCKET_TIMEOUT_MIN"))?this.reconnect("retry",Wr.TIMEOUT):this.request(Ke.PING,void 0,!0).then(()=>{this.pingpongTimeoutCount=0;const r=Date.now()-n;this.rttRolling.add(r),H("REPORT_STATS")&&this.send(Ke.PING_BACK,{pingpongElapse:r})}).catch(r=>{})}handleWsInflateData(){const{wsInflateLength:t,wsDeflateLength:n}=this.websocket.getWsInflateData();t!==0&&n!==0&&this.upload(b0.WS_INFLATE_DATA_LENGTH,{ws_deflate_length:n,ws_inflate_length:t})}handleWebsocketEvents(){this.websocket.on(Ye.RECONNECT_WAITTING_FINISH,t=>{this.emit(qe.WS_RECONNECT_WAITTING_FINISH,t)}),this.websocket.on(Ye.RECONNECT_CREATE_CONNECTION,t=>{this.emit(qe.WS_RECONNECT_CREATE_CONNECTION,t)}),this.websocket.on(Ye.ON_MESSAGE,this.onWebsocketMessage),this.websocket.on(Ye.CLOSED,()=>{this.connectionState=sn.CLOSED}),this.websocket.on(Ye.FAILED,()=>{this._disconnectedReason=Xt.NETWORK_ERROR,this.connectionState=sn.CLOSED}),this.websocket.on(Ye.RECONNECTING,t=>{this._websocketReconnectReason=t,this.joinResponse=void 0,this.connectionState===sn.CONNECTED?this.connectionState=sn.RECONNECTING:this.connectionState=sn.CONNECTING}),this.websocket.on(Ye.WILL_RECONNECT,(t,n,r)=>{const i=C0(this,qe.IS_P2P_DISCONNECTED),o=i||t!=="retry";i&&t==="retry"&&(w.debug("".concat(this.clientId," reconnect mode is retry, but p2p lost, change to tryNext")),t="tryNext",n=s_.P2P_DISCONNECTED),o&&(w.debug("".concat(this.clientId," will renewSession, reconnect mode: ").concat(t)),this.emit(qe.REPORT_JOIN_GATEWAY,n||s_.UNKNOWN_REASON,this.url||""),this.reconnectToken=void 0,this.emit(qe.DISCONNECT_P2P)),r(t)}),this.websocket.on(Ye.CONNECTED,()=>{this.openConnectionTime=Date.now(),this.reconnectToken?this.rejoin().catch(t=>{w.warning("[".concat(this.clientId,"] rejoin failed ").concat(t)),this.reconnect("tryNext",Wr.SERVER_ERROR)}):this.join().catch(t=>{if(this.emit(qe.REPORT_JOIN_GATEWAY,t,this.url||""),t instanceof q){if(t.code===k.UNEXPECTED_RESPONSE&&t.data.code===$e.ERR_NO_AUTHORIZED)return this.initError=new q(k.CAN_NOT_GET_GATEWAY_SERVER,"AgoraRTCError CAN_NOT_GET_GATEWAY_SERVER: dynamic key expired"),w.warning("[".concat(this.clientId,"] reconnect no authorized, recover")),void this.reconnect("recover",Wr.SERVER_ERROR);w.error("[".concat(this.clientId,"] join gateway request failed"),t.toString()),this.spec.forceWaitGatewayResponse?this.reconnect("tryNext",Wr.SERVER_ERROR):(this.initError=t,this.close())}})}),this.websocket.on(Ye.REQUEST_NEW_URLS,(t,n)=>{Kr(this,qe.REQUEST_RECOVER,this.multiIpOption).then(t).catch(n)}),this.websocket.on(Ye.ON_TOKEN_PRIVILEGE_DID_EXPIRE,()=>{this.emit(pt.ON_TOKEN_PRIVILEGE_DID_EXPIRE)}),this.websocket.on(a9.PRE_CONNECT_PC,()=>{this.emit(qe.PRE_CONNECT_PC)})}}let Xn=function(e){return e[e.CHOOSE_SERVER=11]="CHOOSE_SERVER",e[e.CLOUD_PROXY=18]="CLOUD_PROXY",e[e.CLOUD_PROXY_5=20]="CLOUD_PROXY_5",e[e.CLOUD_PROXY_FALLBACK=26]="CLOUD_PROXY_FALLBACK",e}({});function JM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Nv(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?JM(Object(n),!0).forEach(function(r){P(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Xh(e){return e.match(/^[\.\:\d]+$/)?"".concat(e.replace(/[^\d]/g,"-"),".").concat(H("TURN_DOMAIN")):(w.info("Unidentified as ip: ".concat(e,", use as host")),e)}function dN(e,t){e.addresses||(e.addresses=[]);const n=function(s,c){if(H("CONNECT_GATEWAY_WITHOUT_DOMAIN"))return s.map(d=>{let{ip:h,port:f}=d;return{address:"".concat(h,":").concat(f)}});const l=H("GATEWAY_DOMAINS");let u=l[1]&&Ce(c).call(c,l[1])?1:0;return s.map(d=>{let{domain_prefix:h,port:f,ip:g}=d;if(h)return{address:"".concat(h,".").concat(l[u++%l.length],":").concat(f)};const p=/^[\.\:\d]+$/.test(g),m=p?"".concat(g.replace(/[^\d]/g,"-"),".").concat(l[u++%l.length],":").concat(f):"".concat(g,":").concat(f);return p||w.info("Unidentified as ip: ".concat(g,", use as host")),{ip:g,port:f,address:m}})}(e.addresses,t),r=Array.isArray(e.detail)&&e.detail[18];if(r&&typeof r=="string"){const s=r.split(";");for(let c=0;c<s.length;c++){var i;const l=yi(i=s[c]).call(i);n[c]&&l&&(n[c].ip6=l)}}const o=e.detail&&e.detail.candidate;let a;if(o){const[s,c]=o.split(":");s&&c&&(a={port:Number(c),ip:s,address:"".concat(s,":").concat(c)})}return{gatewayAddrs:n,apGatewayAddress:a,uid:e.uid,cid:e.cid,cert:e.cert,vid:e.detail&&e.detail[8],uni_lbs_ip:e.detail&&e.detail[1],res:e,csIp:e.detail&&e.detail[502]}}function Oo(e){return typeof e=="number"?e:e.exact||e.ideal||e.max||e.min||0}function QM(e){const t=e._encoderConfig;if(!t)return{};const n={resolution:t.width&&t.height?"".concat(Oo(t.width),"x").concat(Oo(t.height)):void 0,maxVideoBW:t.bitrateMax,minVideoBW:t.bitrateMin};return typeof t.frameRate=="number"?(n.maxFrameRate=t.frameRate,n.minFrameRate=t.frameRate):t.frameRate&&(n.maxFrameRate=t.frameRate.max||t.frameRate.ideal||t.frameRate.exact||t.frameRate.min,n.minFrameRate=t.frameRate.min||t.frameRate.ideal||t.frameRate.exact||t.frameRate.max),n}function ZM(e){return e>=0&&e<.17?1:e>=.17&&e<.36?2:e>=.36&&e<.59?3:e>=.59&&e<=1?4:e>1?5:0}function w0(e,t){let n,r,i;switch(t){case Xn.CHOOSE_SERVER:r=4096,i="choose server";break;case Xn.CLOUD_PROXY:r=1048576,i="proxy";break;case Xn.CLOUD_PROXY_5:r=4194304,i="proxy5";break;case Xn.CLOUD_PROXY_FALLBACK:r=4194310,i="proxy fallback";break;default:throw new q(k.UNEXPECTED_ERROR,"multi unlibs response transformer get unknown service id",{csIp:e.detail&&e.detail[502],retry:!1})}if(e.response_body.forEach(o=>{o.buffer&&o.buffer.flag===r&&(n={code:o.buffer.code,addresses:(o.buffer.edges_services||[]).map(a=>Nv(Nv({},a),{},{ticket:o.buffer.cert})),server_ts:e.enter_ts,uid:o.buffer.uid,cid:o.buffer.cid,cname:o.buffer.cname,detail:Nv(Nv({},o.buffer.detail),e.detail),flag:o.buffer.flag,opid:e.opid,cert:o.buffer.cert})}),!n)throw new q(k.MULTI_UNILBS_RESPONSE_ERROR,"cannot parse response ".concat(i," from multi unilbs response"),{csIp:e.detail&&e.detail[502]});return n}async function c9(e,t){return await _e.all(e.addresses.map(async n=>({address:Xh(n.ip),tcpport:n.port,udpport:n.port,username:t&&H("ENCRYPT_PROXY_USERNAME_AND_PSW")&&window.isSecureContext?t.toString():jr.username,password:t&&H("ENCRYPT_PROXY_USERNAME_AND_PSW")&&window.isSecureContext?await VI(t.toString()):jr.password})))}function KI(e,t){const n=t.getMediaStreamTrack(!0).getSettings(),r=t.videoHeight||n.height,i=t.videoWidth||n.width;return r&&i?Math.max(Math.min(r,i)/Math.min(Oo(e.height),Oo(e.width)),1):(w.warning("can't get ori-track's height, default scale down 4 times for low stream"),4)}function Xl(e){let{candidateType:t,relayProtocol:n,type:r,address:i,port:o,protocol:a}=e;return r==="local-candidate"?{candidateType:t,relayProtocol:n,protocol:a}:{candidateType:t,relayProtocol:n,address:i,port:o,protocol:a}}var Fa,$de=Kn(r9),Vde=hs("Array").values,jde=Dc,Hde=oi,zde=Fi,Wde=Vde,X1=Array.prototype,Gde={DOMTokenList:!0,NodeList:!0},Kde=function(e){var t=e.values;return e===X1||zde(X1,e)&&t===X1.values||Hde(Gde,jde(e))?Wde:t},al=Kn(Kde),eF=Ta,qde=cr,Yde=Jr,Xde=hr,J1=Ry,Jde=Rg,Qde=vy,Zde=Pc,ehe=Ey,Eh=Object.assign,tF=Object.defineProperty,the=qde([].concat),nhe=!Eh||Xde(function(){if(eF&&Eh({b:1},Eh(tF({},"a",{enumerable:!0,get:function(){tF(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach(function(i){t[i]=i}),Eh({},e)[n]!=7||J1(Eh({},t)).join("")!=r})?function(e,t){for(var n=Zde(e),r=arguments.length,i=1,o=Jde.f,a=Qde.f;r>i;)for(var s,c=ehe(arguments[i++]),l=o?the(J1(c),o(c)):J1(c),u=l.length,d=0;u>d;)s=l[d++],eF&&!Yde(a,c,s)||(n[s]=c[s]);return n}:Eh,rhe=_o,ihe=yj,ohe=Ru,ahe=Jr,she=Pc,che=function(e,t,n,r){try{return r?t(rhe(n)[0],n[1]):t(n)}catch(i){ihe(e,"throw",i)}},lhe=Sj,uhe=Ay,dhe=vl,nF=Ny,hhe=xx,fhe=wy,rF=Array,Kd=cr,Q1=2147483647,phe=/[^\0-\u007E]/,l9=/[.\u3002\uFF0E\uFF61]/g,iF="Overflow: input needs wider integers to process",oF=RangeError,mhe=Kd(l9.exec),Jh=Math.floor,Z1=String.fromCharCode,aF=Kd("".charCodeAt),u9=Kd([].join),Ml=Kd([].push),ghe=Kd("".replace),vhe=Kd("".split),Ehe=Kd("".toLowerCase),sF=function(e){return e+22+75*(e<26)},_he=function(e,t,n){var r=0;for(e=n?Jh(e/700):e>>1,e+=Jh(e/t);e>455;)e=Jh(e/35),r+=36;return Jh(r+36*e/(e+38))},She=function(e){var t=[];e=function(_){for(var E=[],S=0,C=_.length;S<C;){var b=aF(_,S++);if(b>=55296&&b<=56319&&S<C){var T=aF(_,S++);(64512&T)==56320?Ml(E,((1023&b)<<10)+(1023&T)+65536):(Ml(E,b),S--)}else Ml(E,b)}return E}(e);var n,r,i=e.length,o=128,a=0,s=72;for(n=0;n<e.length;n++)(r=e[n])<128&&Ml(t,Z1(r));var c=t.length,l=c;for(c&&Ml(t,"-");l<i;){var u=Q1;for(n=0;n<e.length;n++)(r=e[n])>=o&&r<u&&(u=r);var d=l+1;if(u-o>Jh((Q1-a)/d))throw oF(iF);for(a+=(u-o)*d,o=u,n=0;n<e.length;n++){if((r=e[n])<o&&++a>Q1)throw oF(iF);if(r==o){for(var h=a,f=36;;){var g=f<=s?1:f>=s+26?26:f-s;if(h<g)break;var p=h-g,m=36-g;Ml(t,Z1(sF(g+p%m))),h=Jh(p/m),f+=36}Ml(t,Z1(sF(h))),s=_he(a,d,l==c),a=0,l++}}a++,o++}return u9(t,"")},yhe=ln,hN=Ta,Che=Jx,fN=Yr,cF=Ru,fs=cr,Pv=Iu,Ua=Iy,bhe=Dx,qI=oi,pN=nhe,_h=function(e){var t=she(e),n=uhe(this),r=arguments.length,i=r>1?arguments[1]:void 0,o=i!==void 0;o&&(i=ohe(i,r>2?arguments[2]:void 0));var a,s,c,l,u,d,h=fhe(t),f=0;if(!h||this===rF&&lhe(h))for(a=dhe(t),s=n?new this(a):rF(a);a>f;f++)d=o?i(t[f],f):t[f],nF(s,f,d);else for(u=(l=hhe(t,h)).next,s=n?new this:[];!(c=ahe(u,l)).done;f++)d=o?che(l,i,[c.value,f],!0):c.value,nF(s,f,d);return s.length=f,s},Es=jx,The=Vx.codeAt,Rhe=function(e){var t,n,r=[],i=vhe(ghe(Ehe(e),l9,"."),".");for(t=0;t<i.length;t++)n=i[t],Ml(r,mhe(phe,n)?"xn--"+She(n):n);return u9(r,".")},Kc=Ra,whe=Au,Ihe=Oy,d9=Wle,h9=Gd,Ahe=h9.set,rS=h9.getterFor("URL"),Ohe=d9.URLSearchParams,xhe=d9.getState,Hp=fN.URL,YI=fN.TypeError,Dv=fN.parseInt,Nhe=Math.floor,lF=Math.pow,Ya=fs("".charAt),Cs=fs(/./.exec),Sm=fs([].join),Phe=fs(1 .toString),Dhe=fs([].pop),Sh=fs([].push),eT=fs("".replace),Lhe=fs([].shift),khe=fs("".split),ym=fs("".slice),c_=fs("".toLowerCase),Mhe=fs([].unshift),tT="Invalid scheme",Fu="Invalid host",uF="Invalid port",f9=/[a-z]/i,Fhe=/[\d+-.a-z]/i,nT=/\d/,Uhe=/^0x/i,Bhe=/^[0-7]+$/,$he=/^\d+$/,dF=/^[\da-f]+$/i,Vhe=/[\0\t\n\r #%/:<>?@[\\\]^|]/,jhe=/[\0\t\n\r #/:<>?@[\\\]^|]/,Hhe=/^[\u0000-\u0020]+/,zhe=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,Whe=/[\t\n\r]/g,zp=function(e){var t,n,r,i;if(typeof e=="number"){for(t=[],n=0;n<4;n++)Mhe(t,e%256),e=Nhe(e/256);return Sm(t,".")}if(typeof e=="object"){for(t="",r=function(o){for(var a=null,s=1,c=null,l=0,u=0;u<8;u++)o[u]!==0?(l>s&&(a=c,s=l),c=null,l=0):(c===null&&(c=u),++l);return l>s&&(a=c,s=l),a}(e),n=0;n<8;n++)i&&e[n]===0||(i&&(i=!1),r===n?(t+=n?":":"::",i=!0):(t+=Phe(e[n],16),n<7&&(t+=":")));return"["+t+"]"}return e},l_={},p9=pN({},l_,{" ":1,'"':1,"<":1,">":1,"`":1}),m9=pN({},p9,{"#":1,"?":1,"{":1,"}":1}),rT=pN({},m9,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Il=function(e,t){var n=The(e,0);return n>32&&n<127&&!qI(t,e)?e:encodeURIComponent(e)},Lv={ftp:21,file:null,http:80,https:443,ws:80,wss:443},Cm=function(e,t){var n;return e.length==2&&Cs(f9,Ya(e,0))&&((n=Ya(e,1))==":"||!t&&n=="|")},hF=function(e){var t;return e.length>1&&Cm(ym(e,0,2))&&(e.length==2||(t=Ya(e,2))==="/"||t==="\\"||t==="?"||t==="#")},Ghe=function(e){return e==="."||c_(e)==="%2e"},iT={},fF={},oT={},pF={},mF={},aT={},gF={},vF={},kv={},Mv={},sT={},cT={},lT={},uT={},EF={},dT={},yh={},ec={},_F={},Uu={},Vc={},mN=function(e,t,n){var r,i,o,a=Kc(e);if(t){if(i=this.parse(a))throw YI(i);this.searchParams=null}else{if(n!==void 0&&(r=new mN(n,!0)),i=this.parse(a,null,r))throw YI(i);(o=xhe(new Ohe)).bindURL(this),this.searchParams=o}};mN.prototype={type:"URL",parse:function(e,t,n){var r,i,o,a,s,c=this,l=t||iT,u=0,d="",h=!1,f=!1,g=!1;for(e=Kc(e),t||(c.scheme="",c.username="",c.password="",c.host=null,c.port=null,c.path=[],c.query=null,c.fragment=null,c.cannotBeABaseURL=!1,e=eT(e,Hhe,""),e=eT(e,zhe,"$1")),e=eT(e,Whe,""),r=_h(e);u<=r.length;){switch(i=r[u],l){case iT:if(!i||!Cs(f9,i)){if(t)return tT;l=oT;continue}d+=c_(i),l=fF;break;case fF:if(i&&(Cs(Fhe,i)||i=="+"||i=="-"||i=="."))d+=c_(i);else{if(i!=":"){if(t)return tT;d="",l=oT,u=0;continue}if(t&&(c.isSpecial()!=qI(Lv,d)||d=="file"&&(c.includesCredentials()||c.port!==null)||c.scheme=="file"&&!c.host))return;if(c.scheme=d,t)return void(c.isSpecial()&&Lv[c.scheme]==c.port&&(c.port=null));d="",c.scheme=="file"?l=uT:c.isSpecial()&&n&&n.scheme==c.scheme?l=pF:c.isSpecial()?l=vF:r[u+1]=="/"?(l=mF,u++):(c.cannotBeABaseURL=!0,Sh(c.path,""),l=_F)}break;case oT:if(!n||n.cannotBeABaseURL&&i!="#")return tT;if(n.cannotBeABaseURL&&i=="#"){c.scheme=n.scheme,c.path=Es(n.path),c.query=n.query,c.fragment="",c.cannotBeABaseURL=!0,l=Vc;break}l=n.scheme=="file"?uT:aT;continue;case pF:if(i!="/"||r[u+1]!="/"){l=aT;continue}l=kv,u++;break;case mF:if(i=="/"){l=Mv;break}l=ec;continue;case aT:if(c.scheme=n.scheme,i==Fa)c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=Es(n.path),c.query=n.query;else if(i=="/"||i=="\\"&&c.isSpecial())l=gF;else if(i=="?")c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=Es(n.path),c.query="",l=Uu;else{if(i!="#"){c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=Es(n.path),c.path.length--,l=ec;continue}c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=Es(n.path),c.query=n.query,c.fragment="",l=Vc}break;case gF:if(!c.isSpecial()||i!="/"&&i!="\\"){if(i!="/"){c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,l=ec;continue}l=Mv}else l=kv;break;case vF:if(l=kv,i!="/"||Ya(d,u+1)!="/")continue;u++;break;case kv:if(i!="/"&&i!="\\"){l=Mv;continue}break;case Mv:if(i=="@"){h&&(d="%40"+d),h=!0,o=_h(d);for(var p=0;p<o.length;p++){var m=o[p];if(m!=":"||g){var _=Il(m,rT);g?c.password+=_:c.username+=_}else g=!0}d=""}else if(i==Fa||i=="/"||i=="?"||i=="#"||i=="\\"&&c.isSpecial()){if(h&&d=="")return"Invalid authority";u-=_h(d).length+1,d="",l=sT}else d+=i;break;case sT:case cT:if(t&&c.scheme=="file"){l=dT;continue}if(i!=":"||f){if(i==Fa||i=="/"||i=="?"||i=="#"||i=="\\"&&c.isSpecial()){if(c.isSpecial()&&d=="")return Fu;if(t&&d==""&&(c.includesCredentials()||c.port!==null))return;if(a=c.parseHost(d))return a;if(d="",l=yh,t)return;continue}i=="["?f=!0:i=="]"&&(f=!1),d+=i}else{if(d=="")return Fu;if(a=c.parseHost(d))return a;if(d="",l=lT,t==cT)return}break;case lT:if(!Cs(nT,i)){if(i==Fa||i=="/"||i=="?"||i=="#"||i=="\\"&&c.isSpecial()||t){if(d!=""){var E=Dv(d,10);if(E>65535)return uF;c.port=c.isSpecial()&&E===Lv[c.scheme]?null:E,d=""}if(t)return;l=yh;continue}return uF}d+=i;break;case uT:if(c.scheme="file",i=="/"||i=="\\")l=EF;else{if(!n||n.scheme!="file"){l=ec;continue}if(i==Fa)c.host=n.host,c.path=Es(n.path),c.query=n.query;else if(i=="?")c.host=n.host,c.path=Es(n.path),c.query="",l=Uu;else{if(i!="#"){hF(Sm(Es(r,u),""))||(c.host=n.host,c.path=Es(n.path),c.shortenPath()),l=ec;continue}c.host=n.host,c.path=Es(n.path),c.query=n.query,c.fragment="",l=Vc}}break;case EF:if(i=="/"||i=="\\"){l=dT;break}n&&n.scheme=="file"&&!hF(Sm(Es(r,u),""))&&(Cm(n.path[0],!0)?Sh(c.path,n.path[0]):c.host=n.host),l=ec;continue;case dT:if(i==Fa||i=="/"||i=="\\"||i=="?"||i=="#"){if(!t&&Cm(d))l=ec;else if(d==""){if(c.host="",t)return;l=yh}else{if(a=c.parseHost(d))return a;if(c.host=="localhost"&&(c.host=""),t)return;d="",l=yh}continue}d+=i;break;case yh:if(c.isSpecial()){if(l=ec,i!="/"&&i!="\\")continue}else if(t||i!="?")if(t||i!="#"){if(i!=Fa&&(l=ec,i!="/"))continue}else c.fragment="",l=Vc;else c.query="",l=Uu;break;case ec:if(i==Fa||i=="/"||i=="\\"&&c.isSpecial()||!t&&(i=="?"||i=="#")){if((s=c_(s=d))===".."||s==="%2e."||s===".%2e"||s==="%2e%2e"?(c.shortenPath(),i=="/"||i=="\\"&&c.isSpecial()||Sh(c.path,"")):Ghe(d)?i=="/"||i=="\\"&&c.isSpecial()||Sh(c.path,""):(c.scheme=="file"&&!c.path.length&&Cm(d)&&(c.host&&(c.host=""),d=Ya(d,0)+":"),Sh(c.path,d)),d="",c.scheme=="file"&&(i==Fa||i=="?"||i=="#"))for(;c.path.length>1&&c.path[0]==="";)Lhe(c.path);i=="?"?(c.query="",l=Uu):i=="#"&&(c.fragment="",l=Vc)}else d+=Il(i,m9);break;case _F:i=="?"?(c.query="",l=Uu):i=="#"?(c.fragment="",l=Vc):i!=Fa&&(c.path[0]+=Il(i,l_));break;case Uu:t||i!="#"?i!=Fa&&(i=="'"&&c.isSpecial()?c.query+="%27":c.query+=i=="#"?"%23":Il(i,l_)):(c.fragment="",l=Vc);break;case Vc:i!=Fa&&(c.fragment+=Il(i,p9))}u++}},parseHost:function(e){var t,n,r;if(Ya(e,0)=="["){if(Ya(e,e.length-1)!="]"||(t=function(i){var o,a,s,c,l,u,d,h=[0,0,0,0,0,0,0,0],f=0,g=null,p=0,m=function(){return Ya(i,p)};if(m()==":"){if(Ya(i,1)!=":")return;p+=2,g=++f}for(;m();){if(f==8)return;if(m()!=":"){for(o=a=0;a<4&&Cs(dF,m());)o=16*o+Dv(m(),16),p++,a++;if(m()=="."){if(a==0||(p-=a,f>6))return;for(s=0;m();){if(c=null,s>0){if(!(m()=="."&&s<4))return;p++}if(!Cs(nT,m()))return;for(;Cs(nT,m());){if(l=Dv(m(),10),c===null)c=l;else{if(c==0)return;c=10*c+l}if(c>255)return;p++}h[f]=256*h[f]+c,++s!=2&&s!=4||f++}if(s!=4)return;break}if(m()==":"){if(p++,!m())return}else if(m())return;h[f++]=o}else{if(g!==null)return;p++,g=++f}}if(g!==null)for(u=f-g,f=7;f!=0&&u>0;)d=h[f],h[f--]=h[g+u-1],h[g+--u]=d;else if(f!=8)return;return h}(ym(e,1,-1)),!t))return Fu;this.host=t}else if(this.isSpecial()){if(e=Rhe(e),Cs(Vhe,e)||(t=function(i){var o,a,s,c,l,u,d,h=khe(i,".");if(h.length&&h[h.length-1]==""&&h.length--,(o=h.length)>4)return i;for(a=[],s=0;s<o;s++){if((c=h[s])=="")return i;if(l=10,c.length>1&&Ya(c,0)=="0"&&(l=Cs(Uhe,c)?16:8,c=ym(c,l==8?1:2)),c==="")u=0;else{if(!Cs(l==10?$he:l==8?Bhe:dF,c))return i;u=Dv(c,l)}Sh(a,u)}for(s=0;s<o;s++)if(u=a[s],s==o-1){if(u>=lF(256,5-o))return null}else if(u>255)return null;for(d=Dhe(a),s=0;s<a.length;s++)d+=a[s]*lF(256,3-s);return d}(e),t===null))return Fu;this.host=t}else{if(Cs(jhe,e))return Fu;for(t="",n=_h(e),r=0;r<n.length;r++)t+=Il(n[r],l_);this.host=t}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||this.scheme=="file"},includesCredentials:function(){return this.username!=""||this.password!=""},isSpecial:function(){return qI(Lv,this.scheme)},shortenPath:function(){var e=this.path,t=e.length;!t||this.scheme=="file"&&t==1&&Cm(e[0],!0)||e.length--},serialize:function(){var e=this,t=e.scheme,n=e.username,r=e.password,i=e.host,o=e.port,a=e.path,s=e.query,c=e.fragment,l=t+":";return i!==null?(l+="//",e.includesCredentials()&&(l+=n+(r?":"+r:"")+"@"),l+=zp(i),o!==null&&(l+=":"+o)):t=="file"&&(l+="//"),l+=e.cannotBeABaseURL?a[0]:a.length?"/"+Sm(a,"/"):"",s!==null&&(l+="?"+s),c!==null&&(l+="#"+c),l},setHref:function(e){var t=this.parse(e);if(t)throw YI(t);this.searchParams.update()},getOrigin:function(){var e=this.scheme,t=this.port;if(e=="blob")try{return new Bf(e.path[0]).origin}catch{return"null"}return e!="file"&&this.isSpecial()?e+"://"+zp(this.host)+(t!==null?":"+t:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(e){this.parse(Kc(e)+":",iT)},getUsername:function(){return this.username},setUsername:function(e){var t=_h(Kc(e));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var n=0;n<t.length;n++)this.username+=Il(t[n],rT)}},getPassword:function(){return this.password},setPassword:function(e){var t=_h(Kc(e));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var n=0;n<t.length;n++)this.password+=Il(t[n],rT)}},getHost:function(){var e=this.host,t=this.port;return e===null?"":t===null?zp(e):zp(e)+":"+t},setHost:function(e){this.cannotBeABaseURL||this.parse(e,sT)},getHostname:function(){var e=this.host;return e===null?"":zp(e)},setHostname:function(e){this.cannotBeABaseURL||this.parse(e,cT)},getPort:function(){var e=this.port;return e===null?"":Kc(e)},setPort:function(e){this.cannotHaveUsernamePasswordPort()||((e=Kc(e))==""?this.port=null:this.parse(e,lT))},getPathname:function(){var e=this.path;return this.cannotBeABaseURL?e[0]:e.length?"/"+Sm(e,"/"):""},setPathname:function(e){this.cannotBeABaseURL||(this.path=[],this.parse(e,yh))},getSearch:function(){var e=this.query;return e?"?"+e:""},setSearch:function(e){(e=Kc(e))==""?this.query=null:(Ya(e,0)=="?"&&(e=ym(e,1)),this.query="",this.parse(e,Uu)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var e=this.fragment;return e?"#"+e:""},setHash:function(e){(e=Kc(e))!=""?(Ya(e,0)=="#"&&(e=ym(e,1)),this.fragment="",this.parse(e,Vc)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var Bf=function(e){var t=bhe(this,bo),n=Ihe(arguments.length,1)>1?arguments[1]:void 0,r=Ahe(t,new mN(e,!1,n));hN||(t.href=r.serialize(),t.origin=r.getOrigin(),t.protocol=r.getProtocol(),t.username=r.getUsername(),t.password=r.getPassword(),t.host=r.getHost(),t.hostname=r.getHostname(),t.port=r.getPort(),t.pathname=r.getPathname(),t.search=r.getSearch(),t.searchParams=r.getSearchParams(),t.hash=r.getHash())},bo=Bf.prototype,Ba=function(e,t){return{get:function(){return rS(this)[e]()},set:t&&function(n){return rS(this)[t](n)},configurable:!0,enumerable:!0}};if(hN&&(Ua(bo,"href",Ba("serialize","setHref")),Ua(bo,"origin",Ba("getOrigin")),Ua(bo,"protocol",Ba("getProtocol","setProtocol")),Ua(bo,"username",Ba("getUsername","setUsername")),Ua(bo,"password",Ba("getPassword","setPassword")),Ua(bo,"host",Ba("getHost","setHost")),Ua(bo,"hostname",Ba("getHostname","setHostname")),Ua(bo,"port",Ba("getPort","setPort")),Ua(bo,"pathname",Ba("getPathname","setPathname")),Ua(bo,"search",Ba("getSearch","setSearch")),Ua(bo,"searchParams",Ba("getSearchParams")),Ua(bo,"hash",Ba("getHash","setHash"))),Pv(bo,"toJSON",function(){return rS(this).serialize()},{enumerable:!0}),Pv(bo,"toString",function(){return rS(this).serialize()},{enumerable:!0}),Hp){var SF=Hp.createObjectURL,yF=Hp.revokeObjectURL;SF&&Pv(Bf,"createObjectURL",cF(SF,Hp)),yF&&Pv(Bf,"revokeObjectURL",cF(yF,Hp))}whe(Bf,"URL"),yhe({global:!0,constructor:!0,forced:!Che,sham:!hN},{URL:Bf});var Khe=ln,qhe=hr,Yhe=Oy,CF=Ra,Xhe=Jx,bF=Lo("URL");Khe({target:"URL",stat:!0,forced:!(Xhe&&qhe(function(){bF.canParse()}))},{canParse:function(e){var t=Yhe(arguments.length,1),n=CF(e),r=t<2||arguments[1]===void 0?void 0:CF(arguments[1]);try{return!!new bF(n,r)}catch{return!1}}});var TF=Kn(Ks.URL);const Ar={getDisplayMedia:!1,getStreamFromExtension:!1,supportUnifiedPlan:!1,supportMinBitrate:!1,supportSetRtpSenderParameters:!1,supportDualStream:!0,webAudioMediaStreamDest:!1,supportReplaceTrack:!1,supportWebGL:!1,webAudioWithAEC:!1,supportRequestFrame:!1,supportShareAudio:!1,supportDualStreamEncoding:!1,supportDataChannel:!1,supportPCSetConfiguration:!1,supportWebRTCEncodedTransform:!1,supportWebRTCInsertableStream:!1,supportRequestVideoFrameCallback:!1,supportWebCrypto:!1};function It(){return Ar}function g9(){return"setSinkId"in HTMLAudioElement.prototype&&(!H("RESTRICTION_SET_PLAYBACK_DEVICE")||(ou()||B7())&&!iN())}function RF(){return!Ar.supportUnifiedPlan||H("CHROME_FORCE_PLAN_B")&&_u()}let Pr=function(e){return e.IOS_15_16_INTERRUPTION_START="ios15_16-interruption-start",e.IOS_15_16_INTERRUPTION_END="ios15_16-interruption-end",e.IOS_INTERRUPTION_START="ios-interruption-start",e.IOS_INTERRUPTION_END="ios-interruption-end",e.STATE_CHANGE="state-change",e}({});function Ch(e,t,n){return{sampleRate:e,stereo:t,bitrate:n}}function Ct(e,t,n,r,i){return{width:e,height:t,frameRate:n,bitrateMin:r,bitrateMax:i}}function $a(e,t,n,r,i){return{width:{max:e},height:{max:t},frameRate:n,bitrateMin:r,bitrateMax:i}}function hT(e,t){return{numSpatialLayers:e,numTemporalLayers:t}}const Jhe={"90p":Ct(160,90),"90p_1":Ct(160,90),"120p":Ct(160,120,15,30,65),"120p_1":Ct(160,120,15,30,65),"120p_3":Ct(120,120,15,30,50),"120p_4":Ct(212,120),"180p":Ct(320,180,15,30,140),"180p_1":Ct(320,180,15,30,140),"180p_3":Ct(180,180,15,30,100),"180p_4":Ct(240,180,15,30,120),"240p":Ct(320,240,15,40,200),"240p_1":Ct(320,240,15,40,200),"240p_3":Ct(240,240,15,40,140),"240p_4":Ct(424,240,15,40,220),"360p":Ct(640,360,15,80,400),"360p_1":Ct(640,360,15,80,400),"360p_3":Ct(360,360,15,80,260),"360p_4":Ct(640,360,30,80,600),"360p_6":Ct(360,360,30,80,400),"360p_7":Ct(480,360,15,80,320),"360p_8":Ct(480,360,30,80,490),"360p_9":Ct(640,360,15,80,800),"360p_10":Ct(640,360,24,80,800),"360p_11":Ct(640,360,24,80,1e3),"480p":Ct(640,480,15,100,500),"480p_1":Ct(640,480,15,100,500),"480p_2":Ct(640,480,30,100,1e3),"480p_3":Ct(480,480,15,100,400),"480p_4":Ct(640,480,30,100,750),"480p_6":Ct(480,480,30,100,600),"480p_8":Ct(848,480,15,100,610),"480p_9":Ct(848,480,30,100,930),"480p_10":Ct(640,480,10,100,400),"720p":Ct(1280,720,15,120,1130),"720p_auto":Ct(1280,720,30,900,3e3),"720p_1":Ct(1280,720,15,120,1130),"720p_2":Ct(1280,720,30,120,2e3),"720p_3":Ct(1280,720,30,120,1710),"720p_5":Ct(960,720,15,120,910),"720p_6":Ct(960,720,30,120,1380),"1080p":Ct(1920,1080,15,120,2080),"1080p_1":Ct(1920,1080,15,120,2080),"1080p_2":Ct(1920,1080,30,120,3e3),"1080p_3":Ct(1920,1080,30,120,3150),"1080p_5":Ct(1920,1080,60,120,4780),"1440p":Ct(2560,1440,30,120,4850),"1440p_1":Ct(2560,1440,30,120,4850),"1440p_2":Ct(2560,1440,60,120,7350),"4k":Ct(3840,2160,30,120,8910),"4k_1":Ct(3840,2160,30,120,8910),"4k_3":Ct(3840,2160,60,120,13500)},Qhe={"480p":$a(640,480,5),"480p_1":$a(640,480,5),"480p_2":$a(640,480,30),"480p_3":$a(640,480,15),"720p":$a(1280,720,5),"720p_auto":Ct(1280,720,30,900,3e3),"720p_1":$a(1280,720,5),"720p_2":$a(1280,720,30),"720p_3":$a(1280,720,15),"1080p":$a(1920,1080,5),"1080p_1":$a(1920,1080,5),"1080p_2":$a(1920,1080,30),"1080p_3":$a(1920,1080,15)},Zhe={"1SL1TL":hT(1,1),"3SL3TL":hT(3,3),"2SL3TL":hT(2,3)};function _c(e){return e||(e="480p_1"),typeof e=="string"?Object.assign({},Jhe[e]):e}function fT(e){return typeof e=="string"?Object.assign({},Qhe[e]):e}function Fv(e){return typeof e=="string"?Object.assign({},Zhe[e]):e}const efe={speech_low_quality:Ch(16e3,!1),speech_standard:Ch(32e3,!1,18),music_standard:Ch(48e3,!1),standard_stereo:Ch(48e3,!0,56),high_quality:Ch(48e3,!1,128),high_quality_stereo:Ch(48e3,!0,192)};function iS(e){return typeof e=="string"?Object.assign({},efe[e]):e}const Bh=[];function wF(e){return pr(e,"mediaSource",["screen","window","application"]),!0}let Te=function(e){return e.NEED_RENEGOTIATE="@need_renegotiate",e.NEED_REPLACE_TRACK="@need_replace_track",e.NEED_REPLACE_MIXING_TRACK="@need_replace_mixing_track",e.NEED_CLOSE="@need_close",e.NEED_ENABLE_TRACK="@need_enable_track",e.NEED_DISABLE_TRACK="@need_disable_track",e.NEED_SESSION_ID="@need_sid",e.SET_OPTIMIZATION_MODE="@set_optimization_mode",e.GET_STATS="@get_stats",e.GET_RTC_STATS="@get_rtc_stats",e.GET_LOW_VIDEO_TRACK="@get_low_video_track",e.NEED_RESET_REMOTE_SDP="@need_reset_remote_sdp",e.NEED_UPDATE_VIDEO_ENCODER="@need_update_video_encoder",e.NEED_UPDATE_VIDEO_SEND_PARAMETERS="@need_update_video_send_parameters",e.NEED_MUTE_TRACK="@need_mute_track",e.NEED_UNMUTE_TRACK="@need_unmute_track",e}({}),gn=function(e){return e.SCREEN_TRACK="screen_track",e.CUSTOM_TRACK="custome_track",e.LOW_STREAM="low_stream",e}({}),$f=function(e){return e[e.HIGH_STREAM=0]="HIGH_STREAM",e[e.LOW_STREAM=1]="LOW_STREAM",e}({}),tfe=function(e){return e[e.HIGH_STREAM=0]="HIGH_STREAM",e[e.LOW_STREAM=1]="LOW_STREAM",e}({}),nfe=function(e){return e[e.DISABLE=0]="DISABLE",e[e.LOW_STREAM=1]="LOW_STREAM",e[e.AUDIO_ONLY=2]="AUDIO_ONLY",e}({}),gd=function(e){return e.TRANSCEIVER_UPDATED="transceiver-updated",e.SEI_TO_SEND="sei-to-send",e.SEI_RECEIVED="sei-received",e.TRACK_UPDATED="track-updated",e}({}),hp=function(e){return e.SOURCE_STATE_CHANGE="source-state-change",e.TRACK_ENDED="track-ended",e.BEAUTY_EFFECT_OVERLOAD="beauty-effect-overload",e.VIDEO_ELEMENT_VISIBLE_STATUS="video-element-visible-status",e.CLOSED="closed",e}({}),_f=function(e){return e.FIRST_FRAME_DECODED="first-frame-decoded",e.VIDEO_ELEMENT_VISIBLE_STATUS="video-element-visible-status",e.VIDEO_STATE_CHANGED="video-state-changed",e}({}),fp=function(e){return e.AUDIO="audio",e.VIDEO="video",e.DATA="data",e}({}),Ko=function(e){return e.AUDIO_SOURCE_STATE_CHANGE="audio_source_state_change",e.RECEIVE_TRACK_BUFFER="receive_track_buffer",e.ON_AUDIO_BUFFER="on_audio_buffer",e.UPDATE_SOURCE="update_source",e}({});(function(e){e.UPDATE_TRACK_SOURCE="update-track-source"})({});const XI={sendVolumeLevel:0,sendBitrate:0,sendBytes:0,sendPackets:0,sendPacketsLost:0,sendJitterMs:0,sendRttMs:0,currentPacketLossRate:0},JI={sendBytes:0,sendBitrate:0,sendPackets:0,sendPacketsLost:0,sendJitterMs:0,sendRttMs:0,sendResolutionHeight:0,sendResolutionWidth:0,captureResolutionHeight:0,captureResolutionWidth:0,targetSendBitrate:0,totalDuration:0,totalFreezeTime:0,currentPacketLossRate:0},v9={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveLevel:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,receivePacketsDiscarded:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1},rfe={uplinkNetworkQuality:0,downlinkNetworkQuality:0},E9={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,receiveResolutionHeight:0,receiveResolutionWidth:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1};let ki=function(e){return e.ON_TRACK="on_track",e.ON_NODE="on_node",e}({}),Xo=function(e){return e.REQUEST_UPDATE_CONSTRAINTS="request_update_constraints",e.REQUEST_CONSTRAINTS="request_constraints",e}({}),Wp=function(e){return e.IDLE="IDLE",e.INITING="INITING",e.INITEND="INITEND",e}({}),ad=function(e){return e.STATE_CHANGE="state_change",e.RECORDING_DEVICE_CHANGED="recordingDeviceChanged",e.PLAYOUT_DEVICE_CHANGED="playoutDeviceChanged",e.CAMERA_DEVICE_CHANGED="cameraDeviceChanged",e}({}),_i=function(e){return e.NONE="none",e.INIT="init",e.CANPLAY="canplay",e.PLAYING="playing",e.PAUSED="paused",e.SUSPEND="suspend",e.STALLED="stalled",e.WAITING="waiting",e.ERROR="error",e.DESTROYED="destroyed",e.ABORT="abort",e.ENDED="ended",e.EMPTIED="emptied",e.LOADEDDATA="loadeddata",e}({}),tc=function(e){return e[e.VideoStateStopped=0]="VideoStateStopped",e[e.VideoStateStarting=1]="VideoStateStarting",e[e.VideoStateDecoding=2]="VideoStateDecoding",e[e.VideoStateFrozen=3]="VideoStateFrozen",e}({});const pT={uninit:100,none:110,init:120,loadeddata:130,canplay:200,playing:210,paused:220,suspend:300,stalled:310,waiting:320,error:330,destroyed:340,abort:350,ended:360,emptied:370};let u_=function(e){return e.OPEN="open",e.MESSAGE="message",e.CLOSE="close",e.CLOSING="closing",e.ERROR="error",e}({});function bt(e,t,n,r,i){var o,a,s={};return Object.keys(r).forEach(function(c){s[c]=r[c]}),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=js(o=$de(a=n.slice()).call(a)).call(o,function(c,l){return l(e,t,c)||c},s),i&&s.initializer!==void 0&&(s.value=s.initializer?s.initializer.call(i):void 0,s.initializer=void 0),s.initializer===void 0&&(Object.defineProperty(e,t,s),s=null),s}function Z(e,t,n){return(t=function(r){var i=function(o,a){if(typeof o!="object"||!o)return o;var s=o[Symbol.toPrimitive];if(s!==void 0){var c=s.call(o,"string");if(typeof c!="object")return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(o)}(r);return typeof i=="symbol"?i:i+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function IF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function bn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?IF(Object(n),!0).forEach(function(r){Z(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):IF(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}class _9 extends Pn{set _mediaStreamTrack(t){t!==this.mediaStreamTrack&&(this.safeEmit(gd.TRACK_UPDATED,t),this.mediaStreamTrack=t)}get _mediaStreamTrack(){return this.mediaStreamTrack}constructor(t,n){super(),Z(this,"trackMediaType",void 0),Z(this,"_ID",void 0),Z(this,"_rtpTransceiver",void 0),Z(this,"_lowRtpTransceiver",void 0),Z(this,"_hints",[]),Z(this,"_isClosed",!1),Z(this,"_originMediaStreamTrack",void 0),Z(this,"mediaStreamTrack",void 0),Z(this,"_external",{}),this._ID=n||cn(8,"track-"),this._originMediaStreamTrack=t,this.mediaStreamTrack=t,function(r){Ce(Bh).call(Bh,r)||Bh.push(r)}(this)}toString(){return this._ID}getTrackId(){return this._ID}getMediaStreamTrack(t){return t||Su(()=>{var n;Pe.reportApiInvoke(null,{name:dr.GET_MEDIA_STREAM_TRACK,options:[],tag:kn.TRACER}).onSuccess(((n=this._mediaStreamTrack)===null||n===void 0?void 0:n.label)||"")},this.mediaStreamTrack.id||this.getTrackId()),this._mediaStreamTrack}getRTCRtpTransceiver(t){return t===$f.LOW_STREAM?this._lowRtpTransceiver:this._rtpTransceiver}getMediaStreamTrackSettings(){return this.getMediaStreamTrack(!0).getSettings()}close(){this._isClosed=!0,this._lowRtpTransceiver=void 0,this._rtpTransceiver=void 0,function(t){const n=Bh.indexOf(t);n!==-1&&Bh.splice(n,1)}(this),this.emit(hp.CLOSED),this.removeAllListeners(gd.SEI_RECEIVED)}_updateRtpTransceiver(t,n){if(n===$f.LOW_STREAM){if(this._lowRtpTransceiver===t)return;this._lowRtpTransceiver=t}else{if(this._rtpTransceiver===t)return;this._rtpTransceiver=t}this.emit(gd.TRANSCEIVER_UPDATED,t,n)}}class Qh extends _9{get isExternalTrack(){return this._isExternalTrack}get muted(){return this._muted}get enabled(){return this._enabled}get processorContext(){return this._processorContext}constructor(t,n){super(t,n),Z(this,"_enabled",!0),Z(this,"_muted",!1),Z(this,"_isExternalTrack",!1),Z(this,"_isClosed",!1),Z(this,"_enabledMutex",void 0),Z(this,"processor",void 0),Z(this,"_processorContext",void 0),Z(this,"_handleTrackEnded",()=>{this.onTrackEnded()}),this._enabledMutex=new ri("".concat(this.getTrackId())),t.addEventListener("ended",this._handleTrackEnded)}getTrackLabel(){var t,n;return(t=(n=this._originMediaStreamTrack)===null||n===void 0?void 0:n.label)!==null&&t!==void 0?t:""}close(){this._isClosed||(this.stop(),this._originMediaStreamTrack.stop(),this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack.stop(),this._mediaStreamTrack=null),this._originMediaStreamTrack=null,this._enabledMutex=null,w.debug("[".concat(this.getTrackId(),"] close")),this.emit(Te.NEED_CLOSE),super.close())}async _updateOriginMediaStreamTrack(t,n){let r=arguments.length>2&&arguments[2]!==void 0&&arguments[2];this._isExternalTrack=r,t!==this._originMediaStreamTrack&&(this._originMediaStreamTrack&&(this._originMediaStreamTrack.removeEventListener("ended",this._handleTrackEnded),n&&this._originMediaStreamTrack.stop()),t.addEventListener("ended",this._handleTrackEnded),this._originMediaStreamTrack=t,this._muted&&(this._originMediaStreamTrack.enabled=!1),this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await rn(this,Te.NEED_REPLACE_TRACK,this),this.processor&&this._processorContext&&this.processor.updateInput({track:this._originMediaStreamTrack,context:this._processorContext}))}_getDefaultPlayerConfig(){return{}}onTrackEnded(){w.debug("[".concat(this.getTrackId(),"] track ended")),this.safeEmit(hp.TRACK_ENDED)}stateCheck(t,n){if(w.debug("check track state, [muted: ".concat(this._muted,", enabled: ").concat(this._enabled,"] to [").concat(t,": ").concat(n,"]")),nl(n,t),this._enabled&&this._muted&&t==="enabled"&&n===!1)throw new Q(k.TRACK_STATE_UNREACHABLE,"cannot set enabled while the track is muted").print("error",w);if(!this._enabled&&!this._muted&&t==="muted"&&n===!0)throw new Q(k.TRACK_STATE_UNREACHABLE,"cannot set muted while the track is disabled").print("error",w)}getProcessorStats(){return this._processorContext&&this._processorContext.gatherStats()||[]}getProcessorUsage(){return this._processorContext?this._processorContext.gatherUsage():_e.resolve([])}}const AF=window.AudioContext||window.webkitAudioContext;let $o=null;const Jt=new class extends Pn{constructor(){super(...arguments),Z(this,"prevState",void 0),Z(this,"curState",void 0),Z(this,"currentTime",void 0),Z(this,"currentTimeStuckAt",void 0),Z(this,"interruptDetectorTrack",void 0),Z(this,"onLocalAudioTrackMute",()=>{w.info("ios15-interruption-start"),this.emit(Pr.IOS_15_16_INTERRUPTION_START)}),Z(this,"onLocalAudioTrackUnmute",async()=>{w.info("ios15-interruption-end"),this.curState!=="running"||this.duringInterruption?w.info("ios15-interruption-end-canceled"):($o&&await $o.suspend(),this.emit(Pr.IOS_15_16_INTERRUPTION_END))})}get duringInterruption(){return this.prevState==="running"&&this.curState==="interrupted"}bindInterruptDetectorTrack(e){w.debug("webaudio bindInterruptDetectorTrack ".concat(e.getTrackId())),this.interruptDetectorTrack||(this.interruptDetectorTrack=e,this.interruptDetectorTrack._mediaStreamTrack.onmute=this.onLocalAudioTrackMute,this.interruptDetectorTrack._mediaStreamTrack.onunmute=this.onLocalAudioTrackUnmute)}unbindInterruptDetectorTrack(e){w.debug("webaudio unbindInterruptDetectorTrack ".concat(e.getTrackId())),this.interruptDetectorTrack&&this.interruptDetectorTrack===e&&(this.interruptDetectorTrack._mediaStreamTrack&&(this.interruptDetectorTrack._mediaStreamTrack.onmute=null,this.interruptDetectorTrack._mediaStreamTrack.onunmute=null),this.interruptDetectorTrack=void 0)}};function pp(){if(!$o){if(function(){if(!AF)return void w.error("your browser is not support web audio");w.info("create audio context");const e=bn({},H("WEBAUDIO_INIT_OPTIONS"));w.debug("audio context init option:",JSON.stringify(e)),$o=new AF(e),Jt.curState=$o.state,$o.onstatechange=()=>{Jt.prevState=Jt.curState,Jt.curState=$o?$o.state:void 0;const{prevState:t,curState:n}=Jt,r=n==="running",i=n==="interrupted",o=t==="running",a=t==="suspended",s=t==="interrupted",c=Tt().osVersion;(Li()||rs())&&o&&i&&(w.info("ios".concat(c,"-interruption-start")),Jt.emit(Pr.IOS_INTERRUPTION_START)),(Li()||rs())&&(a||s)&&r&&(w.info("ios".concat(c,"-interruption-end")),Jt.emit(Pr.IOS_INTERRUPTION_END)),t!==n&&Jt.emit(Pr.STATE_CHANGE,n,t)},setInterval(()=>{var t;const n=(t=$o)===null||t===void 0?void 0:t.currentTime;Jt.currentTime!==n?(Jt.currentTimeStuckAt&&(w.debug("AudioContext current time resume at ".concat(n)),Jt.currentTimeStuckAt=void 0),Jt.currentTime=n):(n!==Jt.currentTimeStuckAt&&(Pe.reportApiInvoke(null,{name:"WEB_AUDIO_CURRENT_TIME_STUCK",options:{currentTime:n},tag:kn.TRACER}).onSuccess(),w.warning("AudioContext current time stuck at ".concat(n))),Jt.currentTimeStuckAt=n)},5e3),async function(t){const n=["click","contextmenu","auxclick","dblclick","mousedown","mouseup","touchend","keydown","keyup"];let r,i=!1,o=!1,a=!1;function s(p){t.state==="running"?c(!1):Li()||rs()?t.state==="suspended"&&(c(!0),p&&t.resume().then(l,l)):t.state!=="closed"&&(c(!0),p&&t.resume().then(l,l))}function c(p){if(i!==p){i=p;for(let m=0,_=n;m<_.length;m+=1){const E=_[m];p?window.addEventListener(E,u,{capture:!0,passive:!0}):window.removeEventListener(E,u,{capture:!0,passive:!0})}}}function l(){s(!1)}function u(){s(!0)}function d(p){if(!a)if(r.paused)if(p){let m;h(!1),a=!0;try{m=r.play(),m?m.then(f,f):(r.addEventListener("playing",f),r.addEventListener("abort",f),r.addEventListener("error",f))}catch{f()}}else h(!0);else h(!1)}function h(p){if(o!==p){o=p;for(let m=0,_=n;m<_.length;m++){const E=_[m];p?window.addEventListener(E,g,{capture:!0,passive:!0}):window.removeEventListener(E,g,{capture:!0,passive:!0})}}}function f(){r.removeEventListener("playing",f),r.removeEventListener("abort",f),r.removeEventListener("error",f),a=!1,d(!1)}function g(){d(!0)}if(Li()){const p=t.createMediaStreamDestination(),m=document.createElement("div");m.innerHTML="<audio x-webkit-airplay='deny'></audio>",r=m.children.item(0),r.controls=!1,r.disableRemotePlayback=!0,r.preload="auto",r.srcObject=p.stream,d(!0)}Jt.on(Pr.STATE_CHANGE,function(){s(!0)}),s(!1)}($o)}(),!$o)throw new Q(k.NOT_SUPPORTED,"can not create audio context");return $o}return $o}function Wu(e){if(function(){if(mT!==null)return mT;const r=pp(),i=r.createBufferSource(),o=r.createGain(),a=r.createGain();i.connect(o),i.connect(a),i.disconnect(o);let s=!1;try{i.disconnect(o)}catch{s=!0}return i.disconnect(),mT=s,s}())return;const t=e.connect,n=e.disconnect;e.connect=(r,i,o)=>{var a;return e._inputNodes||(e._inputNodes=[]),Ce(a=e._inputNodes).call(a,r)||(r instanceof AudioNode?(e._inputNodes.push(r),t.call(e,r,i,o)):t.call(e,r,i)),e},e.disconnect=(r,i,o)=>{n.call(e),r?nS(e._inputNodes,r):e._inputNodes=[];for(const a of e._inputNodes)t.call(e,a)}}let mT=null;function gN(e,t){let n=!1;const r=1/t;if(H("DISABLE_WEBAUDIO")){const i=window.setInterval(()=>{n?window.clearInterval(i):e(performance.now()/1e3)},1e3*r)}else{const i=pp();let o=i.createGain();o.gain.value=0,o.connect(i.destination);const a=()=>{if(n)return void(o=null);const s=i.createOscillator();s.onended=a,s.connect(o),s.start(0),s.stop(i.currentTime+r),e(i.currentTime)};a()}return()=>{n=!0}}class S9{constructor(){Z(this,"context",void 0),Z(this,"analyserNode",void 0),Z(this,"sourceNode",void 0),this.context=pp(),this.analyserNode=this.context.createAnalyser(),this.analyserNode.fftSize=2048,this.analyserNode.smoothingTimeConstant=.4}updateSource(t){if(t!==this.sourceNode){if(this.sourceNode)try{this.sourceNode.disconnect(this.analyserNode)}catch{}this.sourceNode=t,t==null||t.connect(this.analyserNode)}}getVolumeLevel(){if(!this.sourceNode||(!this.context||Li()||rs()||this.context.state!=="running"&&this.context.resume(),!this.analyserNode))return 0;const t=new Float32Array(this.analyserNode.fftSize);if(this.analyserNode.getFloatTimeDomainData)this.analyserNode.getFloatTimeDomainData(t);else{const r=new Uint8Array(this.analyserNode.fftSize);this.analyserNode.getByteTimeDomainData(r);for(let i=0;i<t.length;++i)t[i]=r[i]/128-1}const n=js(t).call(t,(r,i)=>r+i*i,0)/t.length;return Math.max(10*Math.log10(n)+100,0)/100}getAnalyserNode(){return this.analyserNode}rebuildAnalyser(){try{var t,n;(t=this.sourceNode)===null||t===void 0||t.disconnect(this.analyserNode),this.analyserNode=this.context.createAnalyser(),this.analyserNode.fftSize=2048,this.analyserNode.smoothingTimeConstant=.4,(n=this.sourceNode)===null||n===void 0||n.connect(this.analyserNode)}catch{w.warning("rebuild analyser node failed.")}}destroy(){this.updateSource(void 0)}}let y9=class extends Pn{get processSourceNode(){return this.sourceNode}set processedNode(t){var n;if(!this.isDestroyed&&this._processedNode!==t){try{var r;(r=this.sourceNode)===null||r===void 0||r.disconnect(this.outputNode)}catch{}(n=this._processedNode)===null||n===void 0||n.disconnect(),this._processedNode=t,this.connect()}}get processedNode(){return this._processedNode}constructor(){super(),Z(this,"outputNode",void 0),Z(this,"outputTrack",void 0),Z(this,"isPlayed",!1),Z(this,"sourceNode",void 0),Z(this,"context",void 0),Z(this,"audioBufferNode",void 0),Z(this,"destNode",void 0),Z(this,"audioOutputLevel",0),Z(this,"volumeLevelAnalyser",void 0),Z(this,"_processedNode",void 0),Z(this,"playNode",void 0),Z(this,"isDestroyed",!1),Z(this,"onNoAudioInput",void 0),Z(this,"isNoAudioInput",!1),Z(this,"_noAudioInputCount",0),this.context=pp(),this.playNode=this.context.destination,this.outputNode=this.context.createGain(),Wu(this.outputNode),this.volumeLevelAnalyser=new S9}startGetAudioBuffer(t){this.audioBufferNode||(this.audioBufferNode=this.context.createScriptProcessor(t),this.outputNode.connect(this.audioBufferNode),this.audioBufferNode.connect(this.context.destination),this.audioBufferNode.onaudioprocess=n=>{this.emit(Ko.ON_AUDIO_BUFFER,function(r){for(let i=0;i<r.outputBuffer.numberOfChannels;i+=1){const o=r.outputBuffer.getChannelData(i);for(let a=0;a<o.length;a+=1)o[a]=0}return r.inputBuffer}(n))})}stopGetAudioBuffer(){this.audioBufferNode&&(this.audioBufferNode.onaudioprocess=null,this.outputNode.disconnect(this.audioBufferNode),this.audioBufferNode=void 0)}createOutputTrack(){if(!It().webAudioMediaStreamDest)throw new Q(k.NOT_SUPPORTED,"your browser is not support audio processor");return this.destNode&&this.outputTrack||(this.destNode=this.context.createMediaStreamDestination(),this.outputNode.connect(this.destNode),this.outputTrack=this.destNode.stream.getAudioTracks()[0]),this.outputTrack}play(t){this.context.state!=="running"&&Uy(()=>{Jt.emit("autoplay-failed")}),this.isPlayed=!0,this.playNode=t||this.context.destination,this.outputNode.connect(this.playNode)}stop(){if(this.isPlayed)try{this.outputNode.disconnect(this.playNode)}catch{}this.isPlayed=!1}getAccurateVolumeLevel(){return this.volumeLevelAnalyser.getVolumeLevel()}async checkHasAudioInput(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;if(t>5)return this.isNoAudioInput=!0,this.onNoAudioInput&&this.onNoAudioInput(),!1;Li()||rs()?this.context.state==="suspended"&&this.context.resume():this.context.state!=="running"&&this.context.resume();const n=this.volumeLevelAnalyser.getAnalyserNode();let r;n.getFloatTimeDomainData?(r=new Float32Array(n.fftSize),n.getFloatTimeDomainData(r)):(r=new Uint8Array(n.fftSize),n.getByteTimeDomainData(r));let i=!1;for(let o=0;o<r.length;o++)r[o]!==0&&(i=!0);return i?(this.isNoAudioInput=!1,!0):(await Lr(200),await this.checkHasAudioInput(t?t+1:1)&&i)}getAudioVolume(){return this.outputNode.gain.value}setVolume(t){this.outputNode.gain.setValueAtTime(t,this.context.currentTime)}destroy(){this.disconnect(),this.stop(),this.isDestroyed=!0,this.onNoAudioInput=void 0}disconnect(){var t,n;(t=this.processedNode)===null||t===void 0||t.disconnect(),(n=this.sourceNode)===null||n===void 0||n.disconnect(),this.outputNode&&this.outputNode.disconnect()}connect(){var t;this.processedNode?(t=this.processedNode)===null||t===void 0||t.connect(this.outputNode):this.sourceNode&&this.sourceNode.connect(this.outputNode),this.volumeLevelAnalyser.updateSource(this.outputNode)}};class C9 extends y9{get isFreeze(){return!1}constructor(t,n,r){var i;if(super(),Z(this,"sourceNode",void 0),Z(this,"track",void 0),Z(this,"clonedTrack",void 0),Z(this,"audioElement",void 0),Z(this,"isCurrentTrackCloned",!1),Z(this,"isRemoteTrack",!1),Z(this,"originVolumeLevelAnalyser",void 0),Z(this,"rebuildWebAudio",async()=>{if(w.debug("ready to rebuild web audio, state:",this.context.state),this.isNoAudioInput&&await this.checkHasAudioInput(),!this.isNoAudioInput||this.isDestroyed)return document.body.removeEventListener("click",this.rebuildWebAudio,!0),void w.debug("rebuild web audio success, current volume status",this.getAccurateVolumeLevel());this.context.resume().then(()=>w.info("resume success")),w.debug("rebuild web audio because of ios 12 bugs"),this.disconnect();const s=this.track;this.track=this.track.clone(),this.isCurrentTrackCloned?s.stop():this.isCurrentTrackCloned=!0;const c=new MediaStream([this.track]);this.sourceNode=this.context.createMediaStreamSource(c),Wu(this.sourceNode),this.volumeLevelAnalyser.rebuildAnalyser();const l=this.outputNode.gain.value;this.outputNode=this.context.createGain(),this.outputNode.gain.setValueAtTime(l,this.context.currentTime),Wu(this.outputNode),this.emit(Ko.UPDATE_SOURCE),this.connect(),this.audioElement.srcObject=c,this.isPlayed&&this.play(this.playNode),this.checkHasAudioInput()}),t.kind!=="audio")throw new Q(k.UNEXPECTED_ERROR);this.track=t;const o=new MediaStream([this.track]);if(this.isRemoteTrack=!!n,this.sourceNode=this.context.createMediaStreamSource(o),Wu(this.sourceNode),r){const s=r.clone();s.enabled=!0,this.clonedTrack=s,w.debug("create an unmuted track ".concat(s.id," from the original track ").concat(r.id," to get the volume"));const c=this.context.createMediaStreamSource(new MediaStream([s]));Wu(c),this.originVolumeLevelAnalyser=new S9,this.originVolumeLevelAnalyser.updateSource(c)}this.connect(),this.audioElement=document.createElement("audio"),this.audioElement.srcObject=o;const a=Tt();n&&a.os===yr.IOS&&Number((i=a.osVersion)===null||i===void 0?void 0:i.split(".")[0])<15&&(Jt.on(Pr.STATE_CHANGE,()=>{this.context.state==="suspended"?document.body.addEventListener("click",this.rebuildWebAudio,!0):this.context.state==="running"&&this.rebuildWebAudio()}),this.checkHasAudioInput().then(s=>{s||document.body.addEventListener("click",this.rebuildWebAudio,!0)}))}updateTrack(t){this.sourceNode.disconnect(),this.track=t,this.isCurrentTrackCloned=!1;const n=new MediaStream([t]);this.sourceNode=this.context.createMediaStreamSource(n),Wu(this.sourceNode),this.processedNode||this.sourceNode.connect(this.outputNode),this.emit(Ko.UPDATE_SOURCE),this.audioElement.srcObject=n}destroy(){var t;this.audioElement.srcObject=null,this.audioElement.remove(),Jt.off("state-change",this.rebuildWebAudio),(t=this.originVolumeLevelAnalyser)===null||t===void 0||t.destroy(),this.clonedTrack=void 0,super.destroy()}createMediaStreamSourceNode(t){return this.context.createMediaStreamSource(new MediaStream([t]))}updateOriginTrack(t){const n=t.clone();n.enabled=!0,this.clonedTrack&&(this.clonedTrack.stop(),this.clonedTrack=n),w.debug("create an unmuted track ".concat(n.id," from the original track ").concat(t.id," to get the volume"));const r=this.context.createMediaStreamSource(new MediaStream([n]));Wu(r),this.originVolumeLevelAnalyser&&this.originVolumeLevelAnalyser.updateSource(r)}getOriginVolumeLevel(){return this.originVolumeLevelAnalyser?this.originVolumeLevelAnalyser.getVolumeLevel():this.getAccurateVolumeLevel()}}async function b9(e,t,n){const r=(o,a)=>o?typeof o!="number"?o.max||o.exact||o.ideal||o.min||a:o:a,i={audio:!!n&&{mandatory:{chromeMediaSource:"desktop"}},video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:e,maxHeight:r(t.height,1080),maxWidth:r(t.width,1920)}}};return t.frameRate&&typeof t.frameRate!="number"?(i.video.mandatory.maxFrameRate=t.frameRate.max,i.video.mandatory.minFrameRate=t.frameRate.min):typeof t.frameRate=="number"&&(i.video.mandatory.maxFrameRate=t.frameRate),await navigator.mediaDevices.getUserMedia(i)}async function ife(e,t){const n=await T9(e.mediaSource),{sourceId:r,audio:i}=await function(o){let a=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return new _e((s,c)=>{const l=document.createElement("div");l.innerText="share screen",l.setAttribute("style","text-align: center; height: 25px; line-height: 25px; border-radius: 4px 4px 0 0; background: #D4D2D4; border-bottom:  solid 1px #B9B8B9;");const u=document.createElement("div");u.setAttribute("style","width: 100%; height: 500px; padding: 15px 25px ; box-sizing: border-box;");const d=document.createElement("div");d.innerText="Agora Web Screensharing wants to share the contents of your screen with webdemo.agorabeckon.com. Choose what you'd like to share.",d.setAttribute("style","height: 12%;");const h=document.createElement("div");h.setAttribute("style","width: 100%; height: 80%; background: #FFF; border:  solid 1px #CBCBCB; display: flex; flex-wrap: wrap; justify-content: space-around; overflow-y: scroll; padding: 0 15px; box-sizing: border-box;");const f=document.createElement("div");f.setAttribute("style","display: flex; justify-content: space-between; padding: 16px 0;");const g=document.createElement("button");g.innerHTML="cancel",g.setAttribute("style","width: 85px;"),g.onclick=()=>{document.body.removeChild(_);const E=new Error("NotAllowedError");E.name="NotAllowedError",c(E)};let p=a;const m=document.createElement("div");if(a){const E=document.createElement("input");E.setAttribute("type","checkbox");const S=document.createElement("span");E.setAttribute("style","margin-right: 6px;"),S.innerText="Share audio",E.checked=p,E.onchange=()=>{p=E.checked},m.appendChild(E),m.appendChild(S)}f.appendChild(m),f.appendChild(g),u.appendChild(d),u.appendChild(h),u.appendChild(f);const _=document.createElement("div");_.setAttribute("style","position: fixed; z-index: 99999999; top: 50%; left: 50%; width: 620px; height: 525px; background: #ECECEC; border-radius: 4px; -webkit-transform: translate(-50%,-50%); transform: translate(-50%,-50%);"),_.appendChild(l),_.appendChild(u),document.body.appendChild(_),o.map(E=>{if(E.id){const S=document.createElement("div");S.setAttribute("style","width: 30%; height: 160px; padding: 20px 0; text-align: center;box-sizing: content-box;");let C=E.thumbnail;try{const{width:b}=C.getSize();b>1920&&(C=C.resize({width:1920}))}catch(b){throw b&&b.message.startsWith("Illegal invocation")&&console.error("Operate thumbnail error, please try to set contextIsolation: false. (https://github.com/electron/electron/issues/34953)"),b}S.innerHTML='<div style="height: 120px; display: table-cell; vertical-align: middle;"><img style="width: 100%; background: #333333; box-shadow: 1px 1px 1px 1px rgba(0, 0, 0, 0.2);" src='+C.toDataURL()+' /></div><span style="	height: 40px; line-height: 40px; display: inline-block; width: 70%; word-break: keep-all; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">'+E.name.replace(/[\u00A0-\u9999<>\&]/g,function(b){return"&#"+b.charCodeAt(0)+";"})+"</span>",S.onclick=()=>{document.body.removeChild(_),s({sourceId:E.id,audio:p})},h.appendChild(S)}})})}(n,t);return await b9(r,e,i)}async function T9(e){let t=["window","screen"];e!=="application"&&e!=="window"||(t=["window"]),e==="screen"&&(t=["screen"]);const n=q7();if(!n)throw console.error("failed to fetch electron, please mount it to window"),new Q(k.ELECTRON_IS_NULL);let r=null;try{var i;r=((i=n.desktopCapturer)===null||i===void 0?void 0:i.getSources({types:t}))||n.ipcRenderer.invoke("DESKTOP_CAPTURER_GET_SOURCES",{types:t})}catch{r=null}r&&r.then||(r=new _e((o,a)=>{n.desktopCapturer.getSources({types:t},(s,c)=>{s?a(s):o(c)})}));try{return await r}catch(o){throw new Q(k.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR,o.toString())}}const QI=new ri("safari");let R9=!1,w9=!1;async function zo(e,t){let n=0,r=null;for(;n<2;)try{r=await ofe(e,t,n>0);break}catch(i){if(i instanceof Q)throw w.error("[".concat(t,"] ").concat(i.toString())),i;const o=d_(i.name||i.code||i,i.message);if(o.code===k.MEDIA_OPTION_INVALID){w.debug("[".concat(t,"] detect media option invalid, retry")),n+=1,await Lr(500);continue}throw w.error("[".concat(t,"] ").concat(o.toString())),o}if(!r)throw new Q(k.UNEXPECTED_ERROR,"can not find stream after getUserMedia");return r}async function ofe(e,t,n){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Q(k.NOT_SUPPORTED,"can not find getUserMedia");n&&(e.video&&(delete e.video.width,delete e.video.height),e.screen&&(delete e.screen.width,delete e.screen.height));const r=It(),i=new MediaStream;if(e.audioSource&&i.addTrack(e.audioSource),e.videoSource&&i.addTrack(e.videoSource),!e.audio&&!e.video&&!e.screen)return w.debug("Using Video Source/ Audio Source"),i;if(e.screen)if(q7())e.screen.sourceId?bh(i,await b9(e.screen.sourceId,e.screen,e.screenAudio)):bh(i,await ife(e.screen,e.screenAudio));else if(ou()&&e.screen.extensionId&&e.screen.mandatory){if(!r.getStreamFromExtension)throw new Q(k.NOT_SUPPORTED,"This browser does not support screen sharing");w.debug("[".concat(t,'] Screen access on chrome stable, looking for extension"'));const h=await(a=e.screen.extensionId,s=t,new _e((f,g)=>{try{chrome.runtime.sendMessage(a,{getStream:!0},p=>{if(!p||!p.streamId)return w.error("[".concat(s,"] No response from Chrome Plugin. Plugin not installed properly"),p),void g(new Q(k.CHROME_PLUGIN_NO_RESPONSE,"No response from Chrome Plugin. Plugin not installed properly"));f(p.streamId)})}catch(p){w.error("[".concat(s,"] AgoraRTC screensharing plugin is not accessible(").concat(a,")"),p.toString()),g(new Q(k.CHROME_PLUGIN_NOT_INSTALL))}}));e.screen.mandatory.chromeMediaSourceId=h,bh(i,await navigator.mediaDevices.getUserMedia({video:{mandatory:e.screen.mandatory}}))}else if(r.getDisplayMedia){var o;e.screen.mediaSource&&wF(e.screen.mediaSource);const h={width:e.screen.width,height:e.screen.height,frameRate:e.screen.frameRate,displaySurface:(o=e.screen.displaySurface)!==null&&o!==void 0?o:e.screen.mediaSource==="screen"?"monitor":e.screen.mediaSource},{selfBrowserSurface:f,surfaceSwitching:g,systemAudio:p}=e.screen,m={selfBrowserSurface:f,surfaceSwitching:g,systemAudio:p};!f&&delete m.selfBrowserSurface,!g&&delete m.surfaceSwitching,!p&&delete m.systemAudio,w.debug("[".concat(t,"] getDisplayMedia:"),JSON.stringify({video:h,audio:!!e.screenAudio,controls:m})),bh(i,await navigator.mediaDevices.getDisplayMedia(bn({video:h,audio:!!e.screenAudio},m)))}else{if(!Fn())throw w.error("[".concat(t,"] This browser does not support screenSharing")),new Q(k.NOT_SUPPORTED,"This browser does not support screen sharing");{e.screen.mediaSource&&wF(e.screen.mediaSource);const h={video:{mediaSource:e.screen.mediaSource,width:e.screen.width,height:e.screen.height,frameRate:e.screen.frameRate}};w.debug("[".concat(t,"] getUserMedia: ").concat(JSON.stringify(h))),bh(i,await navigator.mediaDevices.getUserMedia(h))}}var a,s;if(!e.video&&!e.audio)return i;let c={video:e.video,audio:e.audio},l=H("MEDIA_DEVICE_CONSTRAINTS");if(l)try{typeof l=="string"&&(l=JSON.parse(l)),c=jI(c,l)}catch{}w.debug("[".concat(t,"] GetUserMedia"),JSON.stringify(c)),Tt();let u,d=null;(Gr()||Li()||tS())&&(d=await QI.lock());try{u=await navigator.mediaDevices.getUserMedia(c)}catch(h){throw d&&d(),h}return c.audio&&(R9=!0),c.video&&(w9=!0),bh(i,u),d&&d(),i}function d_(e,t){switch(e){case"Starting video failed":case"OverconstrainedError":case"TrackStartError":return new Q(k.MEDIA_OPTION_INVALID,"".concat(e,": ").concat(t));case"NotFoundError":case"DevicesNotFoundError":return new Q(k.DEVICE_NOT_FOUND,"".concat(e,": ").concat(t));case"NotSupportedError":return new Q(k.NOT_SUPPORTED,"".concat(e,": ").concat(t));case"NotReadableError":return new Q(k.NOT_READABLE,"".concat(e,": ").concat(t));case"InvalidStateError":case"NotAllowedError":case"PERMISSION_DENIED":case"PermissionDeniedError":return new Q(k.PERMISSION_DENIED,"".concat(e,": ").concat(t));case"ConstraintNotSatisfiedError":return new Q(k.CONSTRAINT_NOT_SATISFIED,"".concat(e,": ").concat(t));default:return w.error("getUserMedia unexpected error",e),new Q(k.UNEXPECTED_ERROR,"".concat(e,": ").concat(t))}}function bh(e,t){const n=e.getVideoTracks()[0],r=e.getAudioTracks()[0],i=t.getVideoTracks()[0],o=t.getAudioTracks()[0];o&&(r&&e.removeTrack(r),e.addTrack(o)),i&&(n&&e.removeTrack(n),e.addTrack(i))}const qo=new class extends Pn{get state(){return this._state}set state(e){e!==this._state&&(this.emit(ad.STATE_CHANGE,e),this._state=e)}constructor(){super(),Z(this,"_state",Wp.IDLE),Z(this,"isAccessMicrophonePermission",!1),Z(this,"isAccessCameraPermission",!1),Z(this,"lastAccessMicrophonePermission",!1),Z(this,"lastAccessCameraPermission",!1),Z(this,"checkdeviceMatched",!1),Z(this,"deviceInfoMap",new Map),this.init().then(()=>{navigator.mediaDevices.addEventListener&&navigator.mediaDevices.addEventListener("devicechange",this.updateDevicesInfo.bind(this)),window.setInterval(()=>{(H("ENUMERATE_DEVICES_INTERVAL")||(My()||ky()===yr.HARMONY_OS)&&_u())&&this.updateDevicesInfo()},H("ENUMERATE_DEVICES_INTERVAL_TIME"))}).catch(e=>w.error(e.toString()))}async enumerateDevices(e,t){let n=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return new Q(k.NOT_SUPPORTED,"enumerateDevices() not supported.").throw();const r=await navigator.mediaDevices.enumerateDevices(),i=this.checkMediaDeviceInfoIsOk(r);let o=!this.isAccessMicrophonePermission&&e,a=!this.isAccessCameraPermission&&t;i.audio&&(o=!1),i.video&&(a=!1);let s=null,c=null,l=null;if(!n&&(o||a)){if(QI.isLocked&&(w.debug("[device manager] wait GUM lock"),(await QI.lock())(),w.debug("[device manager] GUM unlock")),R9&&(o=!1,this.isAccessMicrophonePermission=!0),w9&&(a=!1,this.isAccessCameraPermission=!0),w.debug("[device manager] check media device permissions",e,t,o,a),o&&a){try{l=await navigator.mediaDevices.getUserMedia({audio:!0,video:!0})}catch(u){const d=d_(u.name||u.code||u,u.message);if(d.code===k.PERMISSION_DENIED)throw d;w.warning("getUserMedia failed in getDevices",d)}this.isAccessCameraPermission=!0,this.isAccessMicrophonePermission=!0}else if(o){try{s=await navigator.mediaDevices.getUserMedia({audio:e})}catch(u){const d=d_(u.name||u.code||u,u.message);if(d.code===k.PERMISSION_DENIED)throw d;w.warning("getUserMedia failed in getDevices",d)}this.isAccessMicrophonePermission=!0}else if(a){try{c=await navigator.mediaDevices.getUserMedia({video:t})}catch(u){const d=d_(u.name||u.code||u,u.message);if(d.code===k.PERMISSION_DENIED)throw d;w.warning("getUserMedia failed in getDevices",d)}this.isAccessCameraPermission=!0}w.debug("[device manager] mic permission",e,"cam permission",t)}try{const u=await navigator.mediaDevices.enumerateDevices();return s&&s.getTracks().forEach(d=>d.stop()),c&&c.getTracks().forEach(d=>d.stop()),l&&l.getTracks().forEach(d=>d.stop()),s=null,c=null,l=null,u}catch(u){return s&&s.getTracks().forEach(d=>d.stop()),c&&c.getTracks().forEach(d=>d.stop()),l&&l.getTracks().forEach(d=>d.stop()),s=null,c=null,l=null,new Q(k.ENUMERATE_DEVICES_FAILED,u.toString()).throw()}}async getRecordingDevices(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return(await this.enumerateDevices(!0,!1,e)).filter(t=>t.kind==="audioinput")}async getCamerasDevices(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return(await this.enumerateDevices(!1,!0,e)).filter(t=>t.kind==="videoinput")}async getSpeakers(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return(await this.enumerateDevices(!0,!1,e)).filter(t=>t.kind==="audiooutput")}searchDeviceIdByName(e){let t=null;return this.deviceInfoMap.forEach(n=>{n.device.label===e&&(t=n.device.deviceId)}),t}async getDeviceById(e){const t=(await this.enumerateDevices(!0,!0,!0)).find(n=>n.deviceId===e);if(!t)throw new Q(k.DEVICE_NOT_FOUND,"deviceId: ".concat(e));return t}async init(){this.state=Wp.INITING;try{await this.updateDevicesInfo(),this.state=Wp.INITEND}catch(e){throw w.warning("Device Detection functionality cannot start properly.",e.toString()),this.state=Wp.IDLE,(typeof isSecureContext=="boolean"?isSecureContext:location.protocol==="https:"||location.protocol==="file:"||location.hostname==="localhost"||location.hostname==="127.0.0.1"||location.hostname==="::1")||new Q(k.WEB_SECURITY_RESTRICT,"Your context is limited by web security, please try using https protocol or localhost.").throw(),e}}async updateDevicesInfo(){const e=await this.enumerateDevices(!0,!0,!0),t=Date.now(),n=[];if(e[0]&&e[0].label&&this.checkdeviceMatched===!1){this.checkdeviceMatched=!0;const i=e.find(a=>a.kind==="audioinput"&&a.deviceId==="default"),o=e.find(a=>a.kind==="audiooutput"&&a.deviceId==="default");i&&o?o.groupId===i.groupId?w.debug("[device-check] default input ".concat(i.label," and output ").concat(o.label," is the same group")):w.warning("[device-check] default input ".concat(i.label," and output ").concat(o.label," is not the same group")):w.debug("[device-check] default input or output not found")}const r=this.checkMediaDeviceInfoIsOk(e);if(e.forEach(i=>{if(!i.deviceId)return;const o=this.deviceInfoMap.get("".concat(i.kind,"_").concat(i.deviceId));if((o?o.state:"INACTIVE")!=="ACTIVE"){const a={initAt:t,updateAt:t,device:i,state:"ACTIVE"};this.deviceInfoMap.set("".concat(i.kind,"_").concat(i.deviceId),a),n.push(a)}o&&(o.updateAt=t)}),this.deviceInfoMap.forEach((i,o)=>{i.state==="ACTIVE"&&i.updateAt!==t&&(i.state="INACTIVE",n.push(i))}),this.state!==Wp.INITEND)return r.audio&&(this.lastAccessMicrophonePermission=!0,this.isAccessMicrophonePermission=!0),void(r.video&&(this.lastAccessCameraPermission=!0,this.isAccessCameraPermission=!0));n.forEach(i=>{switch(i.device.kind){case"audioinput":this.lastAccessMicrophonePermission&&this.isAccessMicrophonePermission&&this.emit(ad.RECORDING_DEVICE_CHANGED,i);break;case"videoinput":this.lastAccessCameraPermission&&this.isAccessCameraPermission&&this.emit(ad.CAMERA_DEVICE_CHANGED,i);break;case"audiooutput":this.lastAccessMicrophonePermission&&this.isAccessMicrophonePermission&&this.emit(ad.PLAYOUT_DEVICE_CHANGED,i)}}),r.audio&&(this.lastAccessMicrophonePermission=!0,this.isAccessMicrophonePermission=!0),r.video&&(this.lastAccessCameraPermission=!0,this.isAccessCameraPermission=!0)}checkMediaDeviceInfoIsOk(e){const t=e.filter(i=>i.kind==="audioinput"),n=e.filter(i=>i.kind==="videoinput"),r={audio:!1,video:!1};for(const i of t)if(i.label&&i.deviceId){r.audio=!0;break}for(const i of n)if(i.label&&i.deviceId){r.video=!0;break}return r}};let gT=!1;const Vo=new class extends Pn{constructor(){super(...arguments),Z(this,"onAutoplayFailed",void 0),Z(this,"onAudioAutoplayFailed",void 0)}};function I9(){if(Tt(),!gT){const e=t=>{t.preventDefault(),gT=!1,y0()?document.body.removeEventListener("click",e,!0):(document.body.removeEventListener("touchstart",e,!0),document.body.removeEventListener("mousedown",e,!0))};gT=!0,y0()?document.body.addEventListener("click",e,!0):(document.body.addEventListener("touchstart",e,!0),document.body.addEventListener("mousedown",e,!0)),w.info("detect media autoplay failed, document: https://docs.agora.io/cn/Voice/autoplay_policy_web_ng?platform=Web"),Vo.onAutoplayFailed?Vo.onAutoplayFailed():Vo.onAudioAutoplayFailed?w.warning(`AgoraRTC.onAudioAutoplayFailed has been deprecated in favor of AgoraRTC.onAutoplayFailed.

  Please refer to the Agora document to migrate the newer API, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web .`):w.warning(`We have detected a media autoplay failed event, and found out that you haven't implemented AgoraRTC.onAutoplayFailed callback yet.

  It will cause audio/video element not playing automatically on some browsers without user interaction, possibly hurting user experiences.

  Please refer to the Agora document to properly handle autoplay failed event, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web .`),Vo.emit("autoplay-failed")}}function A9(e,t,n,r){if(!e)return;const i=Pe.getBaseInfoBySessionId(e);if(!i)return;const o=i.info,a=Date.now(),s=bn(bn({},o),{},{vid:o.vid===void 0?0:Number(o.vid),lts:a,elapse:a-i.startTime,cbRegistered:Vo.onAutoplayFailed||Vo.onAudioAutoplayFailed?1:-1,errorMsg:n,mediaType:t,trackId:r,extend:void 0});Pe.send({type:xn.AUTOPLAY_FAILED,data:s},!0)}const afe=["play","playing","loadeddata","canplay","pause","stalled","suspend","waiting","abort","emptied","ended","error"],Xi=new class{constructor(){Z(this,"onAutoplayFailed",void 0),Z(this,"elementMap",new Map),Z(this,"elementStateMap",new Map),Z(this,"elementsNeedToResume",[]),Z(this,"sinkIdMap",new Map),Z(this,"autoResumeAfterInterruption",e=>{Array.from(this.elementMap.entries()).forEach(t=>{let[n,r]=t;const i=this.elementStateMap.get(n),o=r.srcObject.getAudioTracks()[0],a=o&&o.readyState;if(w.debug("resume after interrupted, ele: ".concat(i," audio: ").concat(a," ").concat(e)),a==="live"){if(e)return r.pause(),void r.play();if(Jt.curState==="running")return Mf()?(r.pause(),void r.play()):void(i&&i==="paused"&&r.play())}})}),Z(this,"autoResumeAfterInterruptionOnIOS15_16",()=>{Array.from(this.elementMap.entries()).forEach(e=>{let[t,n]=e;const r=n.srcObject.getAudioTracks()[0];r&&r.readyState==="live"&&(w.debug("auto resume after interruption inside autoResumeAfterInterruptionOnIOS15"),n.pause(),n.play())})}),this.autoResumeAudioElement(),Jt.on(Pr.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),Jt.on(Pr.IOS_15_16_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15_16),Jt.on(Pr.STATE_CHANGE,()=>{Li()&&Jt.prevState==="suspended"&&Jt.curState==="running"&&this.autoResumeAfterInterruption()})}async setSinkID(e,t){const n=this.elementMap.get(e);if(this.sinkIdMap.set(e,t),n)try{await n.setSinkId(t)}catch(r){throw new Q(k.PERMISSION_DENIED,"can not set sink id: "+r.toString())}}play(e,t,n,r){if(this.elementMap.has(t))return;const i=document.createElement("audio");i.autoplay=!0,i.srcObject=new MediaStream([e]),this.bindAudioElementEvents(t,i),this.elementMap.set(t,i),this.elementStateMap.set(t,_i.INIT),this.setVolume(t,n);const o=this.sinkIdMap.get(t);if(o)try{i.setSinkId(o).catch(s=>{w.warning("[".concat(t,"] set sink id failed"),s.toString())})}catch(s){w.warning("[".concat(t,"] set sink id failed"),s.toString())}const a=i.play();a&&a.then&&a.catch(s=>{r&&A9(r,"audio",s.message,t),w.warning("audio element play warning",s.toString()),this.elementMap.has(t)&&s.name==="NotAllowedError"&&(w.warning("detected audio element autoplay failed"),this.elementsNeedToResume.push(i),Uy(()=>{this.onAutoplayFailed&&this.onAutoplayFailed(),I9()}))})}updateTrack(e,t){const n=this.elementMap.get(e);n&&(n.srcObject=new MediaStream([t]))}isPlaying(e){return this.elementMap.has(e)&&this.elementStateMap.get(e)==="playing"}setVolume(e,t){const n=this.elementMap.get(e);n&&(t=Math.max(0,Math.min(100,t)),n.volume=t/100)}stop(e){const t=this.elementMap.get(e);if(this.sinkIdMap.delete(e),!t)return;const n=this.elementsNeedToResume.indexOf(t);this.elementsNeedToResume.splice(n,1),t.srcObject=null,t.remove(),this.elementMap.delete(e),this.elementStateMap.delete(e)}bindAudioElementEvents(e,t){afe.forEach(n=>{t.addEventListener(n,r=>{const i=this.elementStateMap.get(e),o=r.type==="pause"?"paused":r.type;if(w.debug("[".concat(e,"] audio-element-status change ").concat(i," => ").concat(o)),r.type==="error"){const a=t==null?void 0:t.error;a&&w.error("[".concat(e,"] media error, code: ").concat(a.code,", message: ").concat(a.message))}this.elementStateMap.set(e,o)})})}getPlayerState(e){return this.elementStateMap.get(e)||"uninit"}autoResumeAudioElement(){const e=()=>{this.elementsNeedToResume.forEach(t=>{t.play().then(n=>{w.debug("Auto resume audio element success")}).catch(n=>{w.warning("Auto resume audio element failed!",n)})}),this.elementsNeedToResume=[]};new _e(t=>{document.body?t():window.addEventListener("load",()=>t())}).then(()=>{y0()?document.body.addEventListener("click",e,!0):(document.body.addEventListener("touchstart",e,!0),document.body.addEventListener("mousedown",e,!0))})}};function Gn(){return function(e,t,n){const r=n.value;return typeof r=="function"&&(n.value=function(){this._isClosed&&new Q(k.INVALID_OPERATION,"[".concat(this.getTrackId(),"] cannot operate a closed track")).print("warning",w);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];const s=r.apply(this,o);return s instanceof _e?new _e((c,l)=>{s.then(c).catch(l)}):s}),n}}class O9 extends Pn{constructor(t){super(),Z(this,"name","VideoProcessorDestination"),Z(this,"ID","0"),Z(this,"_source",void 0),Z(this,"videoContext",void 0),Z(this,"inputTrack",void 0),this.videoContext=t}get kind(){return"video"}get enabled(){return!0}pipe(){throw new Q(k.NOT_SUPPORTED,"VideoProcessor cannot pipe to any other Processor")}unpipe(){throw new Q(k.NOT_SUPPORTED,"VideoProcessor cannot unpipe to any other Processor")}enable(){}disable(){}updateInput(t){if(t.context!==this.videoContext)throw new Error(`ProcessorContext passed to VideoTrack.processorDestination doesn't match it's belonging VideoTrack's context.
Probably you are making pipeline like this:
videoTrack1.pipe(processor).pipe(videoTrack2.processorDestination).`);t.track&&t.track!==this.inputTrack&&(this.videoContext.chained=!0,this.inputTrack=t.track,this.emit(ki.ON_TRACK,t.track))}reset(){this.inputTrack=void 0,this.videoContext.chained=!1,this.emit(ki.ON_TRACK,void 0)}}class x9 extends Pn{set chained(t){this._chained=t}get chained(){return this._chained}constructor(t,n){super(),Z(this,"constraintsMap",new Map),Z(this,"statsRegistry",[]),Z(this,"usageRegistry",[]),Z(this,"trackId",void 0),Z(this,"direction",void 0),Z(this,"_chained",!1),this.trackId=t,this.direction=n}async getConstraints(){return await Kr(this,Xo.REQUEST_CONSTRAINTS)}async requestApplyConstraints(t,n){var r;return w.info("processor ".concat(n.name," requestApplyConstraints for ").concat(this.trackId)),t&&this.constraintsMap.set(n,t),rn(this,Xo.REQUEST_UPDATE_CONSTRAINTS,Array.from(al(r=this.constraintsMap).call(r)))}async requestRevertConstraints(t){var n;if(this.constraintsMap.has(t))return w.info("processor ".concat(t.name," requestRevertConstraints for ").concat(this.trackId)),this.constraintsMap.delete(t),rn(this,Xo.REQUEST_UPDATE_CONSTRAINTS,Array.from(al(n=this.constraintsMap).call(n)))}registerStats(t,n,r){this.statsRegistry.find(i=>i.processorID===t.ID&&i.processorName===t.name&&i.type===n)||this.statsRegistry.push({processorName:t.name,processorID:t.ID,type:n,cb:r})}unregisterStats(t,n){const r=this.statsRegistry.findIndex(i=>i.processorID===t.ID&&i.processorName===t.name&&i.type===n);r!==-1&&this.statsRegistry.splice(r,1)}gatherStats(){const t=[];for(const{processorID:n,processorName:r,type:i,cb:o}of this.statsRegistry)try{const a=o();t.push({processorID:n,processorName:r,type:i,stats:a})}catch(a){w.error(new Q(k.UNEXPECTED_ERROR,a.message))}return t}registerUsage(t,n){this.usageRegistry.find(r=>r.processorID===t.ID&&r.processorName===t.name)||this.usageRegistry.push({processorID:t.ID,processorName:t.name,cb:n})}unregisterUsage(t){const n=this.usageRegistry.findIndex(r=>r.processorID===t.ID&&r.processorName===t.name);n!==-1&&this.usageRegistry.splice(n,1)}async gatherUsage(){const t=[];if(!this.chained)return[];for(const{cb:n}of this.usageRegistry)try{let r=n();r instanceof _e&&(r=await r),t.push(bn(bn({},r),{},{direction:this.direction}))}catch(r){w.error("gather extension usage error",r)}return t}getDirection(){return this.direction}}class N9 extends Pn{constructor(t){super(),Z(this,"name","AudioProcessorDestination"),Z(this,"ID","0"),Z(this,"inputTrack",void 0),Z(this,"inputNode",void 0),Z(this,"audioProcessorContext",void 0),Z(this,"_source",void 0),this.audioProcessorContext=t}get kind(){return"audio"}get enabled(){return!0}pipe(){throw new Q(k.NOT_SUPPORTED,"AudioProcessorDestination cannot pipe to any other Processor")}unpipe(){throw new Q(k.NOT_SUPPORTED,"AudioProcessor cannot unpipe to any other Processor")}enable(){}disable(){}reset(){this.inputTrack=void 0,this.inputNode=void 0,this.audioProcessorContext.chained=!1,this.emit(ki.ON_TRACK,void 0),this.emit(ki.ON_NODE,void 0)}updateInput(t){if(t.context!==this.audioProcessorContext)throw new Error(`ProcessorContext passed to AudioTrack.processorDestination doesn't match it's belonging AudioTrack's context.
        Probably you are making pipeline like this: audioTrack1.pipe(processor).pipe(audioTrack2.processorDestination).`);t.track&&this.inputTrack!==t.track&&(this.audioProcessorContext.chained=!0,this.inputTrack=t.track,this.emit(ki.ON_TRACK,this.inputTrack)),t.node&&this.inputNode!==t.node&&(this.audioProcessorContext.chained=!0,this.inputNode=t.node,this.emit(ki.ON_NODE,this.inputNode))}}class P9 extends Pn{set chained(t){this._chained=t}get chained(){return this._chained}constructor(t,n,r){super(),Z(this,"constraintsMap",new Map),Z(this,"statsRegistry",[]),Z(this,"audioContext",void 0),Z(this,"trackId",void 0),Z(this,"direction",void 0),Z(this,"usageRegistry",[]),Z(this,"_chained",!1),this.audioContext=t,this.trackId=n,this.direction=r}async getConstraints(){return Kr(this,Xo.REQUEST_CONSTRAINTS)}getAudioContext(){return this.audioContext}async requestApplyConstraints(t,n){var r;return w.info("processor ".concat(n.name," requestApplyConstraints for ").concat(this.trackId)),t&&this.constraintsMap.set(n,t),rn(this,Xo.REQUEST_UPDATE_CONSTRAINTS,Array.from(al(r=this.constraintsMap).call(r)))}async requestRevertConstraints(t){var n;if(this.constraintsMap.has(t))return this.constraintsMap.delete(t),rn(this,Xo.REQUEST_UPDATE_CONSTRAINTS,Array.from(al(n=this.constraintsMap).call(n)))}registerStats(t,n,r){this.statsRegistry.find(i=>i.processorID===t.ID&&i.processorName===t.name&&i.type===n)||this.statsRegistry.push({processorName:t.name,processorID:t.ID,type:n,cb:r})}unregisterStats(t,n){const r=this.statsRegistry.findIndex(i=>i.processorID===t.ID&&i.processorName===t.name&&i.type===n);r!==-1&&this.statsRegistry.splice(r,1)}gatherStats(){const t=[];for(const{processorID:n,processorName:r,type:i,cb:o}of this.statsRegistry)try{const a=o();t.push({processorID:n,processorName:r,type:i,stats:a})}catch(a){w.error(new Q(k.UNEXPECTED_ERROR,a.message))}return t}registerUsage(t,n){this.usageRegistry.find(r=>r.processorID===t.ID&&r.processorName===t.name)||this.usageRegistry.push({processorID:t.ID,processorName:t.name,cb:n})}unregisterUsage(t){const n=this.usageRegistry.findIndex(r=>r.processorID===t.ID&&r.processorName===t.name);n!==-1&&this.usageRegistry.splice(n,1)}async gatherUsage(){const t=[];if(!this.chained)return[];for(const{cb:n}of this.usageRegistry)try{let r=n();r instanceof _e&&(r=await r),t.push(bn(bn({},r),{},{direction:this.direction}))}catch(r){w.error("gather extension usage error",r)}return t}getDirection(){return this.direction}}class ZI extends Pn{get isPlayed(){return!0}get isFreeze(){return!1}constructor(){super(),Z(this,"context",void 0),Z(this,"processSourceNode",void 0),Z(this,"outputTrack",void 0),Z(this,"processedNode",void 0),Z(this,"clonedTrack",void 0),Z(this,"outputNode",void 0),this.outputNode=new sfe}setVolume(){}createOutputTrack(){throw new Q(k.NOT_SUPPORTED,"can not create output MediaStreamTrack when WebAudio disabled")}getOriginVolumeLevel(){return 0}getAccurateVolumeLevel(){return 0}stopGetAudioBuffer(){}startGetAudioBuffer(){}play(){}stop(){}destroy(){}updateTrack(){}updateOriginTrack(){}createMediaStreamSourceNode(){}}class sfe{disconnect(){}connect(){}}function D9(e){return new _e((t,n)=>{let r=!1;const i=document.createElement("video");i.setAttribute("autoplay",""),i.setAttribute("muted",""),i.muted=!0,i.autoplay=!0,i.setAttribute("playsinline",""),i.setAttribute("style","position: fixed; top: 0; left: 0; width: 1px; height: 1px"),document.body.appendChild(i);const o=Li()?"canplay":"playing";i.addEventListener(o,()=>{const a=i.videoWidth,s=i.videoHeight;!a&&Fn()||(r=!0,i.srcObject=null,i.remove(),t([a,s]))}),i.srcObject=new MediaStream([e]),i.play().catch(By),setTimeout(()=>{r||(i.srcObject=null,i.remove(),t([i.videoWidth,i.videoHeight]))},4e3)})}function oS(e){const t={};e.facingMode&&(t.facingMode=e.facingMode),e.cameraId&&(t.deviceId={exact:e.cameraId});const n=_c(e.encoderConfig);return n.width!=null&&(t.width=n.width),n.height!=null&&(t.height=n.height),!W7()&&n.frameRate&&(t.frameRate=n.frameRate),B7()&&typeof t.frameRate=="object"&&(t.frameRate.max=60),Fn()&&(t.frameRate={ideal:30,max:30}),t}function OF(e){const t={};if(W7()||(e.AGC!==void 0&&(t.autoGainControl=e.AGC),e.AEC!==void 0&&(t.echoCancellation=e.AEC),e.ANS!==void 0&&(t.noiseSuppression=e.ANS,ou()&&e.ANS&&(t.googHighpassFilter=e.ANS))),e.encoderConfig){const n=iS(e.encoderConfig);t.channelCount=n.stereo?2:1,t.sampleRate=n.sampleRate,t.sampleSize=n.sampleSize}return e.microphoneId&&(t.deviceId={exact:e.microphoneId}),My()&&(t.sampleRate=void 0),t}const cfe=e=>{const t=e._encoderConfig;if(!t)return;const{frameRate:n,width:r,height:i}=e.getMediaStreamTrackSettings();let{frameRate:o=n,width:a=r,height:s=i}=t;if(!o||!a||!s)return;a=B1(a),s=B1(s),o=B1(o);const{max:c,min:l}=function(f,g,p){const m=200*Math.pow(p/15,.6)*Math.pow(f*g/640/360,.75);return{min:Math.floor(m),max:Math.floor(4*m)}}(a,s,o),{bitrateMax:u,bitrateMin:d}=t||{};u||w.debug("calculate bitrate: [w: ".concat(a,", h: ").concat(s,", fps: ").concat(o,"] => [brMax: ").concat(u,", brMin: ").concat(d,"]"));const{maxFramerate:h}=H("ENCODER_CONFIG_LIMIT");return h&&typeof h=="number"&&(o=Math.min(o,h)),{frameRate:o,bitrateMax:u||c,bitrateMin:d||l,scaleResolutionDownBy:1,scale:0}},L9=async(e,t,n)=>await(async(r,i,o)=>{const a=function(l){const u=[];for(let d=0;d<l.length;d+=2)u.push(parseInt(l.slice(d,d+2),16));return Uint8Array.from(u)}(Q7(""+i+o)).slice(0,16),s=a.slice(0,12),c=await window.crypto.subtle.importKey("raw",a,"AES-GCM",!0,["encrypt"]);return new Uint8Array(await window.crypto.subtle.encrypt({name:"AES-GCM",iv:s},c,r))})(e.buffer,t,n),vN=e=>{const t=document.createElement("canvas");return t.width=2,t.height=2,new _e((n,r)=>{t.toBlob(async i=>{if(t.remove(),i){const o=await k9(i);n({buffer:o,width:t.width,height:t.height})}else r(new Q(k.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED))},e,1)})},k9=async e=>{const t=await e.arrayBuffer();return new Uint8Array(t)};var xF,NF,PF,DF,LF,kF,MF,FF,UF,BF,$F,VF,jF,HF,zF,WF,GF,KF,wn,qF,YF,XF,JF,QF,ZF,nc,e4,t4,n4,r4,i4,o4,a4,s4,c4,l4,u4,d4,h4,$r;let Ln=(xF=je({argsMap:(e,t)=>[e.getTrackId(),t],throttleTime:300}),NF=je({argsMap:(e,t)=>[e.getTrackId(),t]}),PF=Gn(),DF=Ff("LocalAudioTrack","_enabledMutex"),LF=je({argsMap:(e,t)=>[e.getTrackId(),t]}),kF=Gn(),MF=Ff("LocalAudioTrack","_enabledMutex"),FF=je({argsMap:(e,t)=>[e.getTrackId(),t]}),UF=Gn(),BF=Gn(),$F=Gn(),VF=je({argsMap:e=>[e.getTrackId()]}),jF=Gn(),HF=je({argsMap:e=>[e.getTrackId()]}),zF=Gn(),WF=je({argsMap:e=>[e.getTrackId()]}),GF=je({argsMap:(e,t)=>[e.getTrackId(),t.name]}),KF=je({argsMap:e=>[e.getTrackId()]}),bt((wn=class extends Qh{get _source(){return this.initWebAudio()}set _source(e){this._trackSource=e}get processorContext(){return this._processorContext||(this._processorContext=this.initProcessor().processorContext),this._processorContext}get processorDestination(){return this._processorDestination||(this._processorDestination=this.initProcessor().processorDestination),this._processorDestination}get isPlaying(){return this._useAudioElement?Xi.isPlaying(this.getTrackId()):this._source.isPlayed}get __className__(){return"LocalAudioTrack"}constructor(e,t,n,r){super(e,n),Z(this,"trackMediaType",fp.AUDIO),Z(this,"_encoderConfig",void 0),Z(this,"_trackSource",void 0),Z(this,"_enabled",!0),Z(this,"_volume",100),Z(this,"_useAudioElement",!0),Z(this,"_bypassWebAudio",!1),Z(this,"processor",void 0),Z(this,"_processorContext",void 0),Z(this,"_processorDestination",void 0),Z(this,"_getOriginVolumeLevel",void 0),this._encoderConfig=t,this._getOriginVolumeLevel=!!r,this._trackSource=new ZI,H("DISABLE_WEBAUDIO")&&(this._bypassWebAudio=!0),H("LOCAL_AUDIO_TRACK_USES_WEB_AUDIO")&&(this._useAudioElement=!1),Gr()&&!$o?setTimeout(()=>this.initWebAudio()):this.initWebAudio()}setVolume(e){Zt(e,"volume",0,1e3),this._volume=e,this._source.setVolume(e/100),this._useAudioElement&&Xi.setVolume(this.getTrackId(),e);try{if(this._bypassWebAudio)return void w.debug("[".concat(this.getTrackId(),"] setVolume returned because no pass through WebAudio."));const t=this._source.createOutputTrack();this._mediaStreamTrack!==t&&(this._mediaStreamTrack=t,rn(this,Te.NEED_REPLACE_TRACK,this).then(()=>{w.debug("[".concat(this.getTrackId(),"] replace web audio track success"))}).catch(n=>{w.warning("[".concat(this.getTrackId(),"] replace web audio track failed"),n)}))}catch{}}getVolumeLevel(){return this._muted&&this.enabled&&this._getOriginVolumeLevel?this._source.getOriginVolumeLevel():this._source.getAccurateVolumeLevel()}async setPlaybackDevice(e){if(!this._useAudioElement||!g9())throw new Q(k.NOT_SUPPORTED,"your browser does not support setting the audio output device");await Xi.setSinkID(this.getTrackId(),e)}async setEnabled(e,t,n){return this._setEnabled(e,t,n)}async _setEnabled(e,t,n){if(!n){if(e===this._enabled)return;this.stateCheck("enabled",e)}if(w.info("[".concat(this.getTrackId(),"] start setEnabled"),e),e){this._originMediaStreamTrack.enabled=!0;try{n||(this._enabled=!0),await rn(this,Te.NEED_ENABLE_TRACK,this),w.info("[".concat(this.getTrackId(),"] setEnabled to ").concat(e," success"))}catch(r){throw n||(this._enabled=!1),w.error("[".concat(this.getTrackId(),"] setEnabled to true error"),r.toString()),r}}else{this._originMediaStreamTrack.enabled=!1,n||(this._enabled=!1);try{await rn(this,Te.NEED_DISABLE_TRACK,this)}catch(r){throw n||(this._enabled=!0),w.error("[".concat(this.getTrackId(),"] setEnabled to false error"),r.toString()),r}}}async setMuted(e){e!==this._muted&&(this.stateCheck("muted",e),this._muted=e,this._originMediaStreamTrack.enabled=!e,w.debug("[".concat(this.getTrackId(),"] start set muted: ").concat(e)),e?await rn(this,Te.NEED_MUTE_TRACK,this):await rn(this,Te.NEED_UNMUTE_TRACK,this))}getStats(){return Su(()=>{w.warning("[deprecated] LocalAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalAudioStats instead")},"localAudioTrackGetStatsWarning"),ga(this,Te.GET_STATS)||bn({},XI)}setAudioFrameCallback(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:4096;if(!e)return this._source.removeAllListeners(Ko.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(t),this._source.removeAllListeners(Ko.ON_AUDIO_BUFFER),this._source.on(Ko.ON_AUDIO_BUFFER,n=>e(n))}play(){w.debug("[".concat(this.getTrackId(),"] start audio playback")),this._useAudioElement?(w.debug("[".concat(this.getTrackId(),"] start audio playback in element")),Xi.play(this._mediaStreamTrack,this.getTrackId(),this._volume)):this._source.play()}stop(){w.debug("[".concat(this.getTrackId(),"] stop audio playback")),this._useAudioElement?Xi.stop(this.getTrackId()):this._source.stop()}close(){super.close(),this._processorDestination&&this.unbindProcessorDestinationEvents(this._processorDestination),this._processorContext&&this.unbindProcessorContextEvents(this._processorContext),this.unpipe(),this._processorDestination&&this._processorDestination._source&&this._processorDestination._source.unpipe(),this._source.destroy()}_updatePlayerSource(){let e=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];w.debug("[".concat(this.getTrackId(),"] update player source track")),e&&this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&Xi.updateTrack(this.getTrackId(),this._mediaStreamTrack)}async _updateOriginMediaStreamTrack(e,t){this._originMediaStreamTrack!==e&&(this._originMediaStreamTrack&&(this._originMediaStreamTrack.removeEventListener("ended",this._handleTrackEnded),t&&this._originMediaStreamTrack.stop()),e.addEventListener("ended",this._handleTrackEnded),this._originMediaStreamTrack=e,this._muted&&(this._originMediaStreamTrack.enabled=!1),this.processor&&this._processorContext&&this.processor.updateInput({track:e,context:this._processorContext}),this._mediaStreamTrack!==this._source.outputTrack?(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await rn(this,Te.NEED_REPLACE_TRACK,this)):this._source.updateTrack(this._originMediaStreamTrack),this._getOriginVolumeLevel&&this._source.updateOriginTrack(e))}renewMediaStreamTrack(e){return _e.resolve(void 0)}pipe(e){if(this._bypassWebAudio)throw new Q(k.INVALID_OPERATION,"Can not process AudioTrack when bypassWebAudio set to true.");if(this.processor===e)return e;if(e._source)throw new Q(k.INVALID_OPERATION,"Processor ".concat(e.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=e,this.processor._source=this,e.updateInput({track:this._originMediaStreamTrack,node:this._source.processSourceNode,context:this.processorContext}),e}unpipe(){var e;if(!this.processor)return;const t=this.processor;(e=this._source.processSourceNode)===null||e===void 0||e.disconnect(),this.processor._source=!1,this.processor=void 0,t.reset()}bindProcessorDestinationEvents(e){e.on(ki.ON_TRACK,async t=>{t?t!==this._mediaStreamTrack&&(this._mediaStreamTrack=t,this._updatePlayerSource(!1),this._source.processedNode=this._source.createMediaStreamSourceNode(t),await rn(this,Te.NEED_REPLACE_TRACK,this)):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await rn(this,Te.NEED_REPLACE_TRACK,this))}),e.on(ki.ON_NODE,t=>{this._source.processedNode=t})}unbindProcessorDestinationEvents(e){e.removeAllListeners(ki.ON_TRACK),e.removeAllListeners(ki.ON_NODE)}bindProcessorContextEvents(e){e.on(Xo.REQUEST_CONSTRAINTS,async t=>{t(this._originMediaStreamTrack.getSettings())})}unbindProcessorContextEvents(e){e.removeAllListeners(Xo.REQUEST_CONSTRAINTS)}initWebAudio(){return this._trackSource instanceof ZI&&(this._trackSource=new C9(this._mediaStreamTrack,!1,this._getOriginVolumeLevel?this._mediaStreamTrack:void 0)),this._trackSource}initProcessor(){const e=new P9(this._source.context,this.getTrackId(),"local"),t=new N9(e);return this._processorContext=e,this._processorDestination=t,this.bindProcessorContextEvents(e),this.bindProcessorDestinationEvents(t),this._source.on(Ko.UPDATE_SOURCE,()=>{this.processor&&this.processor.updateInput({node:this._source.processSourceNode,context:e})}),this._useAudioElement&&(this._useAudioElement=!1,this.isPlaying&&(Xi.stop(this.getTrackId()),this._source.play()),rn(this,Te.NEED_REPLACE_MIXING_TRACK,this).then(()=>{w.debug("[".concat(this.getTrackId(),"] replace from origin track to web audio track success"))}).catch(n=>{w.warning("[".concat(this.getTrackId(),"] replace from origin track to web audio track failed"),n)})),{processorContext:e,processorDestination:t}}}).prototype,"setVolume",[xF],Object.getOwnPropertyDescriptor(wn.prototype,"setVolume"),wn.prototype),bt(wn.prototype,"setPlaybackDevice",[NF,PF],Object.getOwnPropertyDescriptor(wn.prototype,"setPlaybackDevice"),wn.prototype),bt(wn.prototype,"setEnabled",[DF,LF,kF],Object.getOwnPropertyDescriptor(wn.prototype,"setEnabled"),wn.prototype),bt(wn.prototype,"setMuted",[MF,FF,UF],Object.getOwnPropertyDescriptor(wn.prototype,"setMuted"),wn.prototype),bt(wn.prototype,"getStats",[BF],Object.getOwnPropertyDescriptor(wn.prototype,"getStats"),wn.prototype),bt(wn.prototype,"setAudioFrameCallback",[$F],Object.getOwnPropertyDescriptor(wn.prototype,"setAudioFrameCallback"),wn.prototype),bt(wn.prototype,"play",[VF,jF],Object.getOwnPropertyDescriptor(wn.prototype,"play"),wn.prototype),bt(wn.prototype,"stop",[HF,zF],Object.getOwnPropertyDescriptor(wn.prototype,"stop"),wn.prototype),bt(wn.prototype,"close",[WF],Object.getOwnPropertyDescriptor(wn.prototype,"close"),wn.prototype),bt(wn.prototype,"pipe",[GF],Object.getOwnPropertyDescriptor(wn.prototype,"pipe"),wn.prototype),bt(wn.prototype,"unpipe",[KF],Object.getOwnPropertyDescriptor(wn.prototype,"unpipe"),wn.prototype),wn),aS=(qF=je({argsMap:(e,t)=>[e.getTrackId(),t]}),YF=Gn(),XF=Ff("MicrophoneAudioTrack","_enabledMutex"),JF=je({argsMap:(e,t,n)=>[e.getTrackId(),t,n]}),QF=Gn(),ZF=je({argsMap:e=>[e.getTrackId()]}),bt((nc=class extends Ln{get __className__(){return"MicrophoneAudioTrack"}constructor(e,t,n,r){super(e,t.encoderConfig?iS(t.encoderConfig):{},r,H("GET_VOLUME_OF_MUTED_AUDIO_TRACK")),Z(this,"_config",void 0),Z(this,"_deviceName","default"),Z(this,"_constraints",void 0),Z(this,"_originalConstraints",void 0),Z(this,"_enabled",!0),this._config=t,this._constraints=n,this._originalConstraints=n,this._deviceName=e.label,typeof t.bypassWebAudio=="boolean"&&(this._bypassWebAudio=t.bypassWebAudio),(Mf()||BI())&&Jt.bindInterruptDetectorTrack(this)}async setDevice(e){if(w.info("[".concat(this.getTrackId(),"] start set device to ").concat(e)),this._enabled)try{const t=await qo.getDeviceById(e),n={};n.audio=bn({},this._constraints),n.audio.deviceId={exact:e},this._originMediaStreamTrack.stop();let r=null;try{r=await zo(n,this.getTrackId())}catch(i){throw w.error("[".concat(this.getTrackId(),"] setDevice failed"),i.toString()),r=await zo({audio:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(r.getAudioTracks()[0],!1),i}await this._updateOriginMediaStreamTrack(r.getAudioTracks()[0],!1),this._deviceName=t.label,this._config.microphoneId=e,this._constraints.deviceId={exact:e}}catch(t){throw w.error("[".concat(this.getTrackId(),"] setDevice error"),t.toString()),t}else try{const t=await qo.getDeviceById(e);this._deviceName=t.label,this._config.microphoneId=e,this._constraints.deviceId={exact:e}}catch(t){throw w.error("[".concat(this.getTrackId(),"] setDevice error"),t.toString()),t}w.info("[".concat(this.getTrackId(),"] set device to ").concat(e," success"))}async setEnabled(e,t,n){if(t)return w.debug("[".concat(this.getTrackId(),"] setEnabled false (do not close microphone)")),await super._setEnabled(e);if(!n){if(e===this._enabled)return;this.stateCheck("enabled",e)}if(w.info("[".concat(this.getTrackId(),"] start setEnabled"),e),H("AUTO_RESET_AUDIO_ROUTE")&&(Li()||rs())){const a=navigator.audioSession;a&&(e||(a.type="playback"),a.type="auto")}if(!e){var r;this._originMediaStreamTrack.onended=null,this._originMediaStreamTrack.stop(),(r=this._source.clonedTrack)===null||r===void 0||r.stop(),n||(this._enabled=!1);try{await rn(this,Te.NEED_DISABLE_TRACK,this)}catch(a){throw w.error("[".concat(this.getTrackId(),"] setEnabled false failed"),a.toString()),a}return}const i=bn({},this._constraints),o=qo.searchDeviceIdByName(this._deviceName);o&&!i.deviceId&&(i.deviceId=o);try{n||(this._enabled=!0);const a=await zo({audio:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(a.getAudioTracks()[0],!1),await rn(this,Te.NEED_ENABLE_TRACK,this)}catch(a){throw n||(this._enabled=!1),w.error("[".concat(this.getTrackId(),"] setEnabled true failed"),a.toString()),a}w.info("[".concat(this.getTrackId(),"] setEnabled success"))}close(){super.close(),(Mf()||BI())&&Jt.unbindInterruptDetectorTrack(this)}onTrackEnded(){if((Li()||rs())&&this._enabled&&!this._isClosed&&Jt.duringInterruption){const e=async()=>{Jt.off(Pr.IOS_INTERRUPTION_END,e),this._enabled&&!this._isClosed&&(w.debug("[".concat(this.getTrackId(),"] try capture microphone media device for interrupted iOS device.")),await this.setEnabled(!1),await this.setEnabled(!0))};Jt.on(Pr.IOS_INTERRUPTION_END,e)}else w.debug("[".concat(this.getTrackId(),"] track ended")),this.safeEmit(hp.TRACK_ENDED)}async renewMediaStreamTrack(e){const t=e||this._constraints,n=qo.searchDeviceIdByName(this._deviceName);if(n&&!t.deviceId&&(t.deviceId=n),this._constraints=t,this._enabled){this._originMediaStreamTrack.stop();const r=await zo({audio:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(r.getAudioTracks()[0],!0)}}bindProcessorContextEvents(e){super.bindProcessorContextEvents(e),e.on(Xo.REQUEST_UPDATE_CONSTRAINTS,async(t,n,r)=>{try{const i=Object.assign({},this._originalConstraints,...t);await this.renewMediaStreamTrack(i),n()}catch(i){r(i)}})}unbindProcessorContextEvents(e){super.unbindProcessorContextEvents(e),e.removeAllListeners(Xo.REQUEST_UPDATE_CONSTRAINTS)}}).prototype,"setDevice",[qF,YF],Object.getOwnPropertyDescriptor(nc.prototype,"setDevice"),nc.prototype),bt(nc.prototype,"setEnabled",[XF,JF,QF],Object.getOwnPropertyDescriptor(nc.prototype,"setEnabled"),nc.prototype),bt(nc.prototype,"close",[ZF],Object.getOwnPropertyDescriptor(nc.prototype,"close"),nc.prototype),nc),lfe=(e4=je({argsMap:(e,t)=>[e.getTrackId(),t,e.duration]}),t4=Gn(),n4=je({argsMap:e=>[e.getTrackId()]}),r4=Gn(),i4=je({argsMap:e=>[e.getTrackId()]}),o4=Gn(),a4=je({argsMap:e=>[e.getTrackId()]}),s4=Gn(),c4=je({argsMap:e=>[e.getTrackId()]}),l4=Gn(),u4=je({argsMap:e=>[e.getTrackId()]}),d4=je({argsMap:e=>[e.getTrackId()]}),h4=Gn(),bt(($r=class extends Ln{get __className__(){return"BufferSourceAudioTrack"}constructor(e,t,n,r){super(t.createOutputTrack(),n,r),Z(this,"source",void 0),Z(this,"_bufferSource",void 0),this._useAudioElement=!1,this.source=e,this._bufferSource=t,this._bufferSource.on(Ko.AUDIO_SOURCE_STATE_CHANGE,i=>{this.safeEmit(hp.SOURCE_STATE_CHANGE,i)});try{this._mediaStreamTrack=this._source.createOutputTrack()}catch{}}get currentState(){return this._bufferSource.currentState}get duration(){return this._bufferSource.duration}get playbackSpeed(){return this._bufferSource.playbackSpeed}getCurrentTime(){return this._bufferSource.currentTime}startProcessAudioBuffer(e){e&&this._bufferSource.updateOptions(e),this._bufferSource.startProcessAudioBuffer()}pauseProcessAudioBuffer(){this._bufferSource.pauseProcessAudioBuffer()}seekAudioBuffer(e){this._bufferSource.seekAudioBuffer(e)}resumeProcessAudioBuffer(){this._bufferSource.resumeProcessAudioBuffer()}stopProcessAudioBuffer(){this._bufferSource.stopProcessAudioBuffer()}close(){this.source=null,this._bufferSource.destroy(),super.close()}setAudioBufferPlaybackSpeed(e){Zt(e,"speed",0),this._bufferSource.setAudioBufferPlaybackSpeed(e)}}).prototype,"startProcessAudioBuffer",[e4,t4],Object.getOwnPropertyDescriptor($r.prototype,"startProcessAudioBuffer"),$r.prototype),bt($r.prototype,"pauseProcessAudioBuffer",[n4,r4],Object.getOwnPropertyDescriptor($r.prototype,"pauseProcessAudioBuffer"),$r.prototype),bt($r.prototype,"seekAudioBuffer",[i4,o4],Object.getOwnPropertyDescriptor($r.prototype,"seekAudioBuffer"),$r.prototype),bt($r.prototype,"resumeProcessAudioBuffer",[a4,s4],Object.getOwnPropertyDescriptor($r.prototype,"resumeProcessAudioBuffer"),$r.prototype),bt($r.prototype,"stopProcessAudioBuffer",[c4,l4],Object.getOwnPropertyDescriptor($r.prototype,"stopProcessAudioBuffer"),$r.prototype),bt($r.prototype,"close",[u4],Object.getOwnPropertyDescriptor($r.prototype,"close"),$r.prototype),bt($r.prototype,"setAudioBufferPlaybackSpeed",[d4,h4],Object.getOwnPropertyDescriptor($r.prototype,"setAudioBufferPlaybackSpeed"),$r.prototype),$r),Sr=class M9 extends Ln{get __className__(){return"MixingAudioTrack"}get isActive(){for(const t of this.trackList)if(t._enabled&&!t._isClosed&&!t.muted)return!0;return!1}constructor(){const t=pp().createMediaStreamDestination();super(t.stream.getAudioTracks()[0],void 0,cn(8,"track-mix-")),Z(this,"trackList",void 0),Z(this,"destNode",void 0),this._useAudioElement=!1;try{this._mediaStreamTrack=this._source.createOutputTrack()}catch{}this.destNode=t,this.trackList=[]}hasAudioTrack(t){return this.trackList.indexOf(t)!==-1}addAudioTrack(t){this.trackList.indexOf(t)===-1?(w.debug("add ".concat(t.getTrackId()," to mixing track")),t._source.outputNode.connect(this.destNode),this.trackList.push(t),this.updateEncoderConfig()):w.debug("track ".concat(t.getTrackId()," is already added"))}removeAudioTrack(t){if(this.trackList.indexOf(t)!==-1){w.debug("remove ".concat(t.getTrackId()," from mixing track"));try{t._source.outputNode.disconnect(this.destNode)}catch{}nS(this.trackList,t),this.updateEncoderConfig()}}updateEncoderConfig(){const t={};this.trackList.forEach(n=>{n._encoderConfig&&((n._encoderConfig.bitrate||0)>(t.bitrate||0)&&(t.bitrate=n._encoderConfig.bitrate),(n._encoderConfig.sampleRate||0)>(t.sampleRate||0)&&(t.sampleRate=n._encoderConfig.sampleRate),(n._encoderConfig.sampleSize||0)>(t.sampleSize||0)&&(t.sampleSize=n._encoderConfig.sampleSize),n._encoderConfig.stereo&&(t.stereo=!0))}),this._encoderConfig=t}_updateRtpTransceiver(t){this._rtpTransceiver!==t&&(this._rtpTransceiver=t,this.trackList.forEach(n=>{n instanceof M9?n.emit(gd.TRANSCEIVER_UPDATED,t):n._updateRtpTransceiver(t)}))}},ufe=class extends y9{set currentState(t){t!==this._currentState&&(this._currentState=t,this.safeEmit(Ko.AUDIO_SOURCE_STATE_CHANGE,this._currentState))}get currentState(){return this._currentState}constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Z(this,"audioBuffer",void 0),Z(this,"sourceNode",void 0),Z(this,"startPlayTime",0),Z(this,"startPlayOffset",0),Z(this,"pausePlayTime",0),Z(this,"options",void 0),Z(this,"currentLoopCount",0),Z(this,"currentPlaybackSpeed",100),Z(this,"_currentState","stopped"),this.audioBuffer=t,this.options=n,this.startPlayOffset=this.options.startPlayTime||0}createWebAudioDiagram(){return this.context.createGain()}get duration(){return this.audioBuffer?this.audioBuffer.duration:0}get playbackSpeed(){return this.currentPlaybackSpeed}get currentTime(){return this.audioBuffer?this.currentState==="stopped"?0:this.currentState==="paused"?this.pausePlayTime:((this.context.currentTime-this.startPlayTime)*(this.playbackSpeed/100)+this.startPlayOffset)%this.audioBuffer.duration:0}updateOptions(t){this.currentState==="stopped"?(this.options=t,this.startPlayOffset=this.options.startPlayTime||0):w.warning("can not set audio source options")}startProcessAudioBuffer(){this.sourceNode&&this.stopProcessAudioBuffer(),this.sourceNode=this.createSourceNode(),this.startSourceNode(),this.currentState="playing"}pauseProcessAudioBuffer(){this.sourceNode&&this.currentState==="playing"&&(this.pausePlayTime=this.currentTime,this.sourceNode.onended=null,this.sourceNode.stop(),this.sourceNode.buffer=null,this.sourceNode=this.createSourceNode(),this.currentState="paused")}seekAudioBuffer(t){this.sourceNode&&(this.sourceNode.onended=null,this.currentState==="playing"&&this.sourceNode.stop(),this.sourceNode=this.createSourceNode(),this.currentState==="playing"?(this.startPlayOffset=t,this.startSourceNode()):this.currentState==="paused"&&(this.pausePlayTime=t))}resumeProcessAudioBuffer(){this.currentState==="paused"&&this.sourceNode&&(this.startPlayOffset=this.pausePlayTime,this.pausePlayTime=0,this.startSourceNode(),this.currentState="playing")}stopProcessAudioBuffer(){if(this.sourceNode){this.sourceNode.onended=null;try{this.sourceNode.stop()}catch{}this.reset()}}destroy(){this.audioBuffer=null,super.destroy()}setAudioBufferPlaybackSpeed(t){this.sourceNode&&(this.currentState==="playing"&&(this.startPlayOffset=this.currentTime,this.startPlayTime=this.context.currentTime),this.sourceNode.playbackRate.value=t/100),this.currentPlaybackSpeed=t}startSourceNode(){this.sourceNode&&this.sourceNode.buffer&&(this.sourceNode.start(0,this.startPlayOffset),this.startPlayTime=this.context.currentTime,this.sourceNode.onended=this.handleSourceNodeEnded.bind(this))}createSourceNode(){const t=this.context.createBufferSource();return t.buffer=this.audioBuffer,t.loop=!!this.options.loop,t.connect(this.outputNode),t.playbackRate.value=this.currentPlaybackSpeed/100,t}handleSourceNodeEnded(){if(this.currentLoopCount+=1,this.options.cycle&&this.options.cycle>this.currentLoopCount)return this.startPlayOffset=0,this.sourceNode=void 0,void this.startProcessAudioBuffer();this.reset()}reset(){this.startPlayOffset=this.options.startPlayTime||0,this.currentState="stopped",this.sourceNode&&(this.sourceNode.disconnect(),this.sourceNode=void 0),this.currentLoopCount=0}};const f4=new Map;let EN=class{get rendFrameRate(){if(this.renderStats&&this.renderStats.curTs!==this.renderStats.lastTs){const t=this.renderStats.curTs-this.renderStats.lastTs,n=(this.renderStats.renderNum-this.renderStats.lastRenderNum)/t;return this.renderStats.lastRenderNum=this.renderStats.renderNum,this.renderStats.lastTs=this.renderStats.curTs,n}return 0}get videoElementStatus(){return this._videoElementStatus}set videoElementStatus(t){t!==this._videoElementStatus&&(w.debug("[".concat(this.trackId,"] video-element-status change ").concat(this._videoElementStatus," => ").concat(t)),this._videoElementStatus=t)}get videoState(){return this._videoState}set videoState(t){var n;t!==this._videoState&&(this._videoState=t,(n=this.onVideoStateChanged)===null||n===void 0||n.call(this,this.videoState))}constructor(t){Z(this,"trackId",void 0),Z(this,"config",void 0),Z(this,"onFirstVideoFrameDecoded",void 0),Z(this,"onVideoStateChanged",void 0),Z(this,"freezeTimeCounterList",[]),Z(this,"renderFreezeAccTime",0),Z(this,"isKeepLastFrame",!1),Z(this,"timeUpdatedCount",0),Z(this,"freezeTime",0),Z(this,"playbackTime",0),Z(this,"lastTimeUpdatedTime",0),Z(this,"autoplayFailed",!1),Z(this,"videoTrack",void 0),Z(this,"videoElement",void 0),Z(this,"cacheVideoElement",void 0),Z(this,"renderStats",void 0),Z(this,"_videoState",tc.VideoStateStopped),Z(this,"videoElementCheckInterval",void 0),Z(this,"videoElementFreezeTimeout",void 0),Z(this,"_videoElementStatus",_i.NONE),Z(this,"isGettingVideoDimensions",!1),Z(this,"startGetVideoDimensions",()=>{const n=()=>{if(this.isGettingVideoDimensions=!0,this.videoElement.videoWidth*this.videoElement.videoHeight>4)return w.debug("[".concat(this.trackId,"] current video dimensions:"),this.videoElement.videoWidth,this.videoElement.videoHeight),void(this.isGettingVideoDimensions=!1);setTimeout(n,500)};!this.isGettingVideoDimensions&&n()}),Z(this,"autoResumeAfterInterruption",()=>{this.videoTrack&&this.videoTrack.readyState==="live"&&Jt.curState==="running"&&(w.debug("[track-".concat(this.trackId,"] video element paused, auto resume for ").concat(_M())),bM()?(this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):(this.videoElement.pause(),this.videoElement.play()))}),Z(this,"handleVideoEvents",n=>{switch(n.type){case"play":case"playing":this.startGetVideoDimensions(),this.videoElementStatus=_i.PLAYING;break;case"loadeddata":if(this.videoState=tc.VideoStateStarting,this.onFirstVideoFrameDecoded&&this.onFirstVideoFrameDecoded(),this.cacheVideoElement){try{this.cacheVideoElement.srcObject=null,this.cacheVideoElement.remove()}catch{}this.cacheVideoElement=void 0}break;case"canplay":this.videoElementStatus=_i.CANPLAY;break;case"stalled":this.videoElementStatus=_i.STALLED;break;case"suspend":this.videoElementStatus=_i.SUSPEND;break;case"pause":this.videoElementStatus=_i.PAUSED,Li()||rs()||Gr()&&this.autoplayFailed||!this.videoTrack||this.videoTrack.readyState!=="live"||(w.debug("[track-".concat(this.trackId,"] video element paused, auto resume")),this.videoElement.play());break;case"waiting":this.videoElementStatus=_i.WAITING;break;case"abort":this.videoElementStatus=_i.ABORT;break;case"ended":this.videoElementStatus=_i.ENDED;break;case"emptied":this.videoElementStatus=_i.EMPTIED;break;case"error":{const r=this.videoElement.error;r?(this.videoElementStatus=_i.ERROR,w.error("[".concat(this.trackId,"] media error: ").concat(r.message," (").concat(r.code,")"))):w.debug("[".concat(this.trackId,"] media not been an error."));break}case"timeupdate":{const r=performance.now();if(this.timeUpdatedCount+=1,this.timeUpdatedCount<10)return void(this.lastTimeUpdatedTime=r);const i=r-this.lastTimeUpdatedTime,o=this.lastTimeUpdatedTime;if(this.lastTimeUpdatedTime=r,qc.lastVisibleTime<qc.lastHiddenTime||o<qc.lastHiddenTime||o<qc.lastVisibleTime)return;for(i>H("VIDEO_FREEZE_DURATION")&&(this.freezeTime+=i),this.playbackTime+=i;this.playbackTime>=6e3;){this.playbackTime-=6e3;const a=Math.min(6e3,this.freezeTime);this.freezeTimeCounterList.push(a),this.freezeTime=Math.max(0,this.freezeTime-6e3)}break}}}),Z(this,"autoResumeAfterInterruptionOnIOS15_16",()=>{this.videoTrack&&this.videoTrack.readyState==="live"&&(w.debug("[track-".concat(this.trackId,"] video element paused, auto resume for ").concat(_M())),bM()?(this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):(this.videoElement.pause(),this.videoElement.play()))}),this.trackId=t.trackId,this.config=t,t.element instanceof HTMLVideoElement?this.videoElement=t.element:this.videoElement=document.createElement("video"),Jt.on(Pr.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),Jt.on(Pr.IOS_15_16_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15_16)}getVideoElement(){return this.videoElement}getContainerElement(){var t;return(t=this.videoElement.parentElement)!==null&&t!==void 0?t:void 0}updateConfig(t){this.config=t,this.trackId=t.trackId,t.element!==this.videoElement&&(this.destroy(),this.videoElement=t.element),this.videoTrack&&this.initVideoElement()}updateVideoTrack(t){this.videoTrack!==t&&(this.videoTrack=t,this.initVideoElement())}play(t){const n=this.videoElement.play();n&&n.catch&&n.catch(i=>{t&&A9(t,"video",i.message,this.trackId),i.name==="NotAllowedError"?(w.warning("detected video element autoplay failed",i),this.autoplayFailed=!0,this.handleAutoPlayFailed()):w.warning("[".concat(this.trackId,"] play warning: "),i)});const r=Tt();if((r.name==="Safari"&&Number(r.version)===15||Mf())&&n&&n.then){const i=()=>{this.config.mirror&&(this.videoElement.style.transform="rotateY(180deg)")};n.then(i).catch(i)}}getCurrentFrame(){const t=document.createElement("canvas");t.width=this.videoElement.videoWidth,t.height=this.videoElement.videoHeight;const n=t.getContext("2d");if(!n)return w.error("create canvas context failed!"),new ImageData(2,2);n.drawImage(this.videoElement,0,0,t.width,t.height);const r=n.getImageData(0,0,t.width,t.height);return t.remove(),r}async getCurrentFrameToUint8Array(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const r=document.createElement("canvas");r.width=this.videoElement.videoWidth,r.height=this.videoElement.videoHeight;const i=r.getContext("2d");return i?(i.drawImage(this.videoElement,0,0,r.width,r.height),new _e((o,a)=>{r.toBlob(async s=>{if(r.remove(),s){const c=await k9(s);o({buffer:c,width:r.width,height:r.height})}else a(new Q(k.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED))},t,n<0?.1:n>1?1:n)})):await vN(t)}destroy(){this.renderStats=void 0,Jt.off(Pr.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),Jt.off(Pr.IOS_15_16_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15_16),this.videoElement.srcObject=null,this.resetVideoElement(),this.freezeTimeCounterList=[],this.videoState=tc.VideoStateStopped}initVideoElement(){if(this.videoElementStatus=_i.INIT,!this.videoElementCheckInterval&&(p4.forEach(o=>{this.videoElement.addEventListener(o,this.handleVideoEvents)}),this.videoElementCheckInterval=window.setInterval(()=>{(function(o){return o!==document.body&&document.body.contains(o)})(this.videoElement)||(this.videoElementStatus=_i.DESTROYED)},1e3),H("ENABLE_VIDEO_FRAME_CALLBACK"))){var t,n;let o;const a=()=>{document.visibilityState==="visible"&&(document.removeEventListener("visibilitychange",a),this.videoElementFreezeTimeout=window.setTimeout(s,H("VIDEO_FREEZE_DURATION")))},s=()=>{this.videoElementFreezeTimeout=void 0,this.videoState===tc.VideoStateDecoding&&(document.visibilityState==="visible"?this.videoState=tc.VideoStateFrozen:document.addEventListener("visibilitychange",a))},c=(l,u)=>{if(this.videoElementStatus===_i.PLAYING){if(this.renderStats?(this.renderStats.renderNum++,this.renderStats.curTs=u.mediaTime):this.renderStats={lastTs:u.mediaTime,curTs:u.mediaTime,lastRenderNum:0,renderNum:0},o){const f=u.presentationTime-o.presentationTime;this.videoState===tc.VideoStateStarting&&(this.videoState=tc.VideoStateDecoding),this.videoState===tc.VideoStateDecoding&&this.onVideoStateChanged&&(this.videoElementFreezeTimeout&&window.clearTimeout(this.videoElementFreezeTimeout),this.videoElementFreezeTimeout=window.setTimeout(s,H("VIDEO_FREEZE_DURATION"))),f<H("VIDEO_FREEZE_DURATION")&&this.videoState===tc.VideoStateFrozen&&(this.videoState=tc.VideoStateDecoding),f>H("VIDEO_FREEZE_DURATION")&&qc.lastVisibleTime>=qc.lastHiddenTime&&o.timestamp>qc.lastVisibleTime&&o.timestamp>qc.lastHiddenTime&&(this.renderFreezeAccTime+=f)}o=bn(bn({},u),{},{timestamp:l})}var d,h;H("ENABLE_VIDEO_FRAME_CALLBACK")&&((d=(h=this.videoElement).requestVideoFrameCallback)===null||d===void 0||d.call(h,c))};(t=(n=this.videoElement).requestVideoFrameCallback)===null||t===void 0||t.call(n,c)}this.videoElement.controls=!1,this.videoElement.setAttribute("playsinline",""),My()&&!H("HIDE_NO_POSTER")&&(this.videoElement.poster="noposter");const r=Tt();r.name==="Safari"&&Number(r.version)===15||Mf()||!this.config.mirror||(this.videoElement.style.transform="rotateY(180deg)"),this.config.fit?this.videoElement.style.objectFit=this.config.fit:this.videoElement.style.objectFit="cover",this.videoElement.setAttribute("muted",""),this.videoElement.muted=!0,this.videoElement.srcObject&&this.videoElement.srcObject instanceof MediaStream?this.videoElement.srcObject.getVideoTracks()[0]!==this.videoTrack&&(this.videoElement.srcObject=this.videoTrack?new MediaStream([this.videoTrack]):null,Fn()&&this.videoElement.load()):(this.videoElement.srcObject=this.videoTrack?new MediaStream([this.videoTrack]):null,Fn()&&this.videoElement.load());const i=this.videoElement.play();i!==void 0&&i.catch(o=>{w.debug("[".concat(this.trackId,"] playback interrupted"),o.toString())})}resetVideoElement(){p4.forEach(t=>{this.videoElement&&this.videoElement.removeEventListener(t,this.handleVideoEvents)}),this.videoElementCheckInterval&&(window.clearInterval(this.videoElementCheckInterval),this.videoElementCheckInterval=void 0),this.videoElementStatus=_i.NONE}handleAutoPlayFailed(){const t=n=>{n.preventDefault(),this.videoElement.play().then(()=>{w.debug("[".concat(this.trackId,"] Video element for trackId:").concat(this.trackId," autoplay resumed."))}).catch(r=>{w.error(r)}),this.autoplayFailed=!1,y0()?document.body.removeEventListener("click",t,!0):(document.body.removeEventListener("touchstart",t,!0),document.body.removeEventListener("mousedown",t,!0))};y0()?document.body.addEventListener("click",t,!0):(document.body.addEventListener("touchstart",t,!0),document.body.addEventListener("mousedown",t,!0)),I9()}};const p4=["play","playing","loadeddata","canplay","pause","stalled","suspend","waiting","abort","emptied","ended","timeupdate","error"];let F9=class extends EN{constructor(t){super(t),Z(this,"container",void 0),Z(this,"slot",void 0),this.slot=t.element,this.updateConfig(t)}updateConfig(t){this.config=t,this.trackId=t.trackId;const n=t.element;n!==this.slot&&(this.destroy(),this.slot=n),this.createElements()}updateVideoTrack(t){this.videoTrack!==t&&(this.videoTrack=t,this.createElements())}play(t){var n;(n=this.container)!==null&&n!==void 0&&n.contains(this.videoElement)&&super.play(t)}getCurrentFrame(){var t;return(t=this.container)!==null&&t!==void 0&&t.contains(this.videoElement)?super.getCurrentFrame():new ImageData(2,2)}async getCurrentFrameToUint8Array(t){var n;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return(n=this.container)!==null&&n!==void 0&&n.contains(this.videoElement)?await super.getCurrentFrameToUint8Array(t,r):await vN(t)}destroy(){if(super.destroy(),this.videoElement.remove(),this.videoElement=document.createElement("video"),this.container){try{this.container.remove(),this.slot.removeChild(this.container)}catch{}this.container=void 0}}createElements(){this.container||(this.container=document.createElement("div")),this.container.id="agora-video-player-".concat(this.trackId),this.container.style.width="100%",this.container.style.height="100%",this.container.style.position="relative",this.container.style.overflow="hidden",this.videoTrack?(this.container.style.backgroundColor="black",H("KEEP_LAST_FRAME")&&this.isKeepLastFrame&&this.videoElement.paused&&this.resetVideoElement(),this.mountedVideoElement()):this.unmountedVideoElement(),this.slot.appendChild(this.container)}mountedVideoElement(){var t;!this.container||(t=this.container)!==null&&t!==void 0&&t.contains(this.videoElement)||this.container.appendChild(this.videoElement),super.initVideoElement(),this.videoElement.id="video_".concat(this.trackId),this.videoElement.className="agora_video_player",this.videoElement.style.width="100%",this.videoElement.style.height="100%",this.videoElement.style.position="absolute",this.videoElement.style.left="0",this.videoElement.style.top="0"}unmountedVideoElement(){var t;if((t=this.container)!==null&&t!==void 0&&t.contains(this.videoElement)){super.resetVideoElement();try{this.container&&this.container.removeChild(this.videoElement)}catch{}this.videoElement=document.createElement("video")}}resetVideoElement(){var t;(t=this.container)!==null&&t!==void 0&&t.contains(this.videoElement)&&(super.resetVideoElement(),this.cacheVideoElement=this.videoElement,this.videoElement=document.createElement("video"))}getContainerElement(){return this.container}};var m4,g4,v4,E4,_4,S4,y4,C4,b4,T4,R4,w4,I4,A4,O4,x4,N4,P4,D4,L4,k4,M4,F4,U4,Et,B4,$4,V4,j4,H4,z4,W4,G4,Bo;let hn=(m4=je({argsMap:(e,t,n)=>[e.getTrackId(),typeof t=="string"?t:t instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement",n]}),g4=Gn(),v4=je({argsMap:e=>[e.getTrackId()]}),E4=Ff("LocalVideoTrack","_enabledMutex"),_4=je({argsMap:(e,t)=>[e.getTrackId(),t]}),S4=Gn(),y4=Ff("LocalVideoTrack","_enabledMutex"),C4=je({argsMap:(e,t)=>[e.getTrackId(),t]}),b4=Gn(),T4=je({argsMap:(e,t)=>[e.getTrackId(),t]}),R4=Gn(),w4=Gn(),I4=je({argsMap:(e,t,n)=>[e.getTrackId(),t,n]}),A4=Gn(),O4=Gn(),x4=Gn(),N4=Gn(),P4=Gn(),D4=Gn(),L4=Gn(),k4=je({argsMap:(e,t)=>[e.getTrackId(),t.name]}),M4=je({argsMap:e=>[e.getTrackId()]}),F4=je({argsMap:e=>[e.getTrackId()]}),U4=je({argsMap:(e,t,n)=>[e.getTrackId(),t.label,n]}),Et=class U9 extends Qh{get videoHeight(){if(Gr()){const{height:t}=this._mediaStreamTrack.getSettings();return this._videoHeight=t,this._videoHeight}return this._videoHeight}get videoWidth(){if(Gr()){const{width:t}=this._mediaStreamTrack.getSettings();return this._videoWidth=t,this._videoWidth}return this._videoWidth}get isPlaying(){return!(!this._player||this._player.videoElementStatus!==_i.PLAYING)}get processorDestination(){return this._processorDestination}get processorContext(){return this._processorContext}set processorContext(t){this._processorContext=t}get __className__(){return"LocalVideoTrack"}constructor(t,n,r,i,o,a){if(super(t,o),Z(this,"trackMediaType",fp.VIDEO),Z(this,"_player",void 0),Z(this,"isUseScaleResolutionDownBy",!1),Z(this,"_videoVisibleTimer",null),Z(this,"_previousVideoVisibleStatus",void 0),Z(this,"_clearPreviousVideoVisibleStatus",()=>this._previousVideoVisibleStatus=void 0),Z(this,"_encoderConfig",void 0),Z(this,"_scalabilityMode",{numSpatialLayers:1,numTemporalLayers:1}),Z(this,"_optimizationMode",void 0),Z(this,"_videoHeight",void 0),Z(this,"_videoWidth",void 0),Z(this,"_forceBitrateLimit",void 0),Z(this,"_enabled",!0),Z(this,"_processorDestination",void 0),Z(this,"_processorContext",void 0),Gr()){const{width:s,height:c}=t.getSettings();this._videoWidth=s,this._videoHeight=c}else this.updateMediaStreamTrackResolution();if(this._encoderConfig=n,this._scalabilityMode=r,this._optimizationMode=i,this._hints=a||[],this._hints.indexOf(gn.SCREEN_TRACK)===-1)this.updateBitrateFromProfile();else if(function(s,c,l){const u=Tt();return!(u.name!==s||!u.osVersion)&&(l?Number(u.version)>=c&&Number(u.version)<=l:Number(u.version)===c)}(Kt.CHROME,115)&&ky().indexOf("Windows")!==-1){const s=function(c,l){if("VideoFrame"in window&&"TransformStream"in window&&It().supportWebRTCInsertableStream){const u=new MediaStreamTrackProcessor(c),d=new MediaStreamTrackGenerator({kind:"video"});let h,f,g=Date.now();const p=()=>{m&&(clearInterval(m),m=void 0),h&&(h.close(),h=void 0),c.stop(),f=void 0,d.removeEventListener("ended",p)};let m=window.setInterval(()=>{if(f&&h&&Date.now()-g>(l??1e3))try{d.readyState==="live"?f.enqueue(h.clone()):p()}catch{p()}},l??1e3);const _=new TransformStream({transform:(E,S)=>{d.readyState==="live"?(f=S,g=Date.now(),h===void 0?(h=E,S.enqueue(E.clone())):(S.enqueue(h),h=E)):E.close()}});return d.addEventListener("ended",p),u.readable.pipeThrough(_).pipeTo(d.writable),d}}(t);s&&(w.info("local screen video track begin to inject frame"),this._mediaStreamTrack=s)}n&&this._hints.indexOf(gn.CUSTOM_TRACK)!==-1&&this.setEncoderConfiguration(n),this._processorContext=new x9(this.getTrackId(),"local"),this._processorDestination=new O9(this.processorContext),this.bindProcessorDestinationEvents()}play(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof t=="string"){const i=document.getElementById(t);i?t=i:(w.warning("[".concat(this.getTrackId(),'] can not find "#').concat(t,'" element, use document.body')),t=document.body)}w.debug("[".concat(this.getTrackId(),"] start video playback in ").concat(t instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement"),JSON.stringify(n));const r=bn(bn(bn({},this._getDefaultPlayerConfig()),n),{},{trackId:this.getTrackId(),element:t});this._player?this._player.updateConfig(r):(t instanceof HTMLVideoElement?this._player=new EN(r):this._player=new F9(r),this._player.updateVideoTrack(this._mediaStreamTrack)),this._player.play(),this._videoVisibleTimer&&window.clearInterval(this._videoVisibleTimer),this._clearPreviousVideoVisibleStatus(),this._videoVisibleTimer=window.setInterval(()=>{try{const i=this.getVideoElementVisibleStatus();this.safeEmit(hp.VIDEO_ELEMENT_VISIBLE_STATUS,i)}catch{}},H("CHECK_VIDEO_VISIBLE_INTERVAL"))}stop(){this._player&&(this._videoVisibleTimer&&(window.clearInterval(this._videoVisibleTimer),this._videoVisibleTimer=null),this._clearPreviousVideoVisibleStatus(),this._player.destroy(),this._player=void 0,w.debug("[".concat(this.getTrackId(),"] stop video playback")))}async setEnabled(t,n){if(!n){if(t===this._enabled)return;this.stateCheck("enabled",t)}if(w.info("[".concat(this.getTrackId(),"] start setEnabled"),t),!t){this._originMediaStreamTrack.enabled=!1;try{await rn(this,Te.NEED_DISABLE_TRACK,this)}catch(r){throw w.error("[".concat(this.getTrackId(),"] setEnabled to false error"),r.toString()),r}return n||(this._enabled=!1),void w.info("[".concat(this.getTrackId(),"] setEnabled to false success"))}this._originMediaStreamTrack.enabled=!0;try{await rn(this,Te.NEED_ENABLE_TRACK,this)}catch(r){throw w.error("[".concat(this.getTrackId(),"] setEnabled to true error"),r.toString()),r}w.info("[".concat(this.getTrackId(),"] setEnabled to true success")),n||(this._enabled=!0)}async setMuted(t){t!==this._muted&&(this.stateCheck("muted",t),this._muted=t,this._originMediaStreamTrack.enabled=!t,w.debug("[".concat(this.getTrackId(),"] start set muted: ").concat(t)),t?await rn(this,Te.NEED_MUTE_TRACK,this):await rn(this,Te.NEED_UNMUTE_TRACK,this))}async setEncoderConfiguration(t,n){if(!this._enabled)throw new Q(k.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled");if(t=_c(t),this._forceBitrateLimit&&(t.bitrateMax=this._forceBitrateLimit.max_bitrate?this._forceBitrateLimit.max_bitrate:t.bitrateMax,t.bitrateMin=this._forceBitrateLimit.min_bitrate?this._forceBitrateLimit.min_bitrate:t.bitrateMin),t.width||t.height||t.frameRate){const r=oS({encoderConfig:t});(Gr()||Li()||rs())&&(r.deviceId=void 0),w.debug("[".concat(this.getTrackId(),"] setEncoderConfiguration applyConstraints"),JSON.stringify(t),JSON.stringify(r));try{await this._originMediaStreamTrack.applyConstraints(r),this.updateMediaStreamTrackResolution()}catch(i){const o=new Q(k.UNEXPECTED_ERROR,i.toString());throw w.error("[".concat(this.getTrackId(),"] applyConstraints error"),o.toString()),o}}this._encoderConfig=t,this._hints.indexOf(gn.SCREEN_TRACK)===-1&&this.updateBitrateFromProfile();try{await rn(this,Te.NEED_UPDATE_VIDEO_ENCODER,this)}catch(r){return r.throw(w)}}getStats(){return Su(()=>{w.warning("[deprecated] LocalVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalVideoStats instead")},"localVideoTrackGetStatsWarning"),ga(this,Te.GET_STATS)||bn({},JI)}async setBeautyEffect(t){w.error("LocalVideoTrack.setBeautyEffect was deprecated, please migrate to agora-extension-beauty-effect")}getCurrentFrameData(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}async getCurrentFrameImage(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return this._player?this._player.getCurrentFrameToUint8Array(t,n):await vN(t)}async setBitrateLimit(t){if(w.debug("[".concat(this.getTrackId(),"] set bitrate limit, ").concat(JSON.stringify(t))),t){this._forceBitrateLimit=t,this._encoderConfig&&(this._encoderConfig.bitrateMax?this._encoderConfig.bitrateMax=this._encoderConfig.bitrateMax<t.max_bitrate?this._encoderConfig.bitrateMax:t.max_bitrate:this._encoderConfig.bitrateMax=t.max_bitrate,this._encoderConfig.bitrateMin,this._encoderConfig.bitrateMin=t.min_bitrate);try{await rn(this,Te.NEED_UPDATE_VIDEO_ENCODER,this)}catch(n){return n.throw(w)}}}async setOptimizationMode(t){if(t!=="motion"&&t!=="detail"&&t!=="balanced")return void w.error(k.INVALID_PARAMS,"optimization mode must be motion, detail or balanced");const n=this._optimizationMode;try{this._optimizationMode=t,await rn(this,Te.NEED_UPDATE_VIDEO_SEND_PARAMETERS,this)}catch(r){throw this._optimizationMode=n,w.error("[".concat(this.getTrackId(),"] set optimization mode failed"),r.toString()),r}w.info("[".concat(this.getTrackId(),"] set optimization mode success (").concat(t,")"))}setScalabiltyMode(t){if(t.numSpatialLayers===1&&t.numTemporalLayers!==1)return w.error(k.INVALID_PARAMS,"scalability mode currently not supported, no SVC."),void(this._scalabilityMode={numSpatialLayers:1,numTemporalLayers:1});this._scalabilityMode=t,w.info("[".concat(this.getTrackId(),"] set scalability mode success (").concat(t,")"))}updateMediaStreamTrackResolution(){D9(this._originMediaStreamTrack).then(t=>{let[n,r]=t;this._videoHeight=r,this._videoWidth=n}).catch(By)}_updatePlayerSource(){this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}_getDefaultPlayerConfig(){return{fit:"contain"}}async setSenderConfiguration(t){if(!this._enabled)throw new Q(k.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled");w.debug("[".concat(this.getTrackId(),"] setSenderConfiguration applyConstraints"),JSON.stringify(t)),t=_c(t),this._forceBitrateLimit&&(t.bitrateMax=this._forceBitrateLimit.max_bitrate?this._forceBitrateLimit.max_bitrate:t.bitrateMax,t.bitrateMin=this._forceBitrateLimit.min_bitrate?this._forceBitrateLimit.min_bitrate:t.bitrateMin),this._encoderConfig=t,this._hints.indexOf(gn.SCREEN_TRACK)===-1&&this.updateBitrateFromProfile();try{await rn(this,Te.NEED_UPDATE_VIDEO_ENCODER,this)}catch(n){return n.throw(w)}}updateBitrateFromProfile(){if(!this._encoderConfig)return;const{width:t,height:n,frameRate:r}=this.getMediaStreamTrackSettings();if(!t||!n||!r)return;const{bitrateMax:i,bitrateMin:o}=this._encoderConfig;if(o==null||i==null){const{max:a,min:s}=function(c,l,u,d,h){const f=H("BITRATE_ADAPTER_TYPE");if(f==="DEFAULT_BITRATE")return{min:d,max:h};if(h===void 0){var g;const m=Math.floor(200*Math.pow(u/15,.6)*Math.pow(c*l/640/360,.75));h=f==="STANDARD_BITRATE"?4*m:2*m,d=(g=d)!==null&&g!==void 0?g:m}else{var p;d=(p=d)!==null&&p!==void 0?p:Math.floor(h/10)}return{min:d,max:h}}(t,n,r,o,i);this._encoderConfig.bitrateMin=s,this._encoderConfig.bitrateMax=a,w.debug("[".concat(this.getTrackId(),"] update bitrate from profile, [w: ").concat(t,", h: ").concat(n,", fps: ").concat(r,"] => [brMax: ").concat(a,", brMin: ").concat(s,"]"))}}getVideoElementVisibleStatus(){try{var t,n;const r=this==null||(t=this._player)===null||t===void 0?void 0:t.getContainerElement(),i={track:this,element:this==null||(n=this._player)===null||n===void 0?void 0:n.getVideoElement(),slot:r==null?void 0:r.parentElement},{element:o,slot:a}=i;if(this.isPlaying&&o instanceof HTMLVideoElement&&a instanceof HTMLElement){const s=K7.checkOneElementVisible(o),c=Object.assign({},s);if(c.visible!==this._previousVideoVisibleStatus){this._previousVideoVisibleStatus=c.visible;const l=Pe.reportApiInvoke(null,{tag:kn.TRACER,name:dr.LOCAL_VIDEO_TRACK_GET_VIDEO_VISIBLE,options:[this.getTrackId()]});c.visible?l.onSuccess("Video is visible"):l.onSuccess("Invisible because of ".concat(c.reason))}return c}return}catch(r){throw new Q(k.GET_VIDEO_ELEMENT_VISIBLE_ERROR,r.message)}}async renewMediaStreamTrack(t){}pipe(t){if(this.processor===t)return t;if(t._source)throw new Q(k.INVALID_OPERATION,"Processor ".concat(t.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=t,this.processor._source=this,t.updateInput({track:this._originMediaStreamTrack,context:this.processorContext}),t}unpipe(){if(!this.processor)return;const t=this.processor;this.processor._source=void 0,this.processor=void 0,t.reset()}close(){super.close(),this.unbindProcessorDestinationEvents(),this.unbindProcessorContextEvents(),this.unpipe(),this.processorDestination._source&&this.processorDestination._source.unpipe()}clone(t){let n=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],r=this._encoderConfig;t&&(r=bn(bn({},r),_c(t))),r=id(r);const i=cn(8,"track-video-cloned-"),o=new U9(n?this._mediaStreamTrack.clone():this._mediaStreamTrack,r,id(this._scalabilityMode),this._optimizationMode,i,id(this._hints));return t&&r&&o.setEncoderConfiguration(r),w.debug("clone video track from ".concat(this.getTrackId()," to ").concat(i,", clone ").concat(n)),o}async replaceTrack(t,n){if(!(t instanceof MediaStreamTrack))throw new Q(k.INVALID_PARAMS,"track should be an instance of MediaStreamTrack");if(t.kind!=="video")throw new Q(k.INVALID_PARAMS,"track should be a video MediaStreamTrack");await this._updateOriginMediaStreamTrack(t,n,!0),this.updateMediaStreamTrackResolution()}sendSeiData(t){if(Su(()=>{Pe.reportApiInvoke(null,{name:dr.LOCAL_VIDEO_SEND_SEI_DATA,options:[],tag:kn.TRACER}).onSuccess("")},this._mediaStreamTrack.id||this.getTrackId()),!H("ENABLE_VIDEO_SEI")||!H("ENABLE_ENCODED_TRANSFORM"))return void w.warning('To send/receive SEI, please call AgoraRTC.setParameter("ENABLE_VIDEO_SEI", true) before instantiate IAgoraRtcClient');if(t instanceof Uint8Array==0)return new Q(k.INVALID_PARAMS,"Invalid argument type, ILocalVideoTrack.sendSeiData() only accept Uint8Array argument.").throw();const n=this.getRTCRtpTransceiver();if(!n)return void w.warning("Video track is not published, SEI can not be send");const r=n.sender.getParameters();if(r.codecs.length===0)return;const i=r.codecs[0].mimeType.toLocaleLowerCase();i==="video/h264"?this.safeEmit("sei-to-send",t):w.warning("SEI is not supported by ".concat(i))}bindProcessorDestinationEvents(){this.processorDestination.on(ki.ON_TRACK,async t=>{t?t!==this._mediaStreamTrack&&(this._mediaStreamTrack=t,this._updatePlayerSource(),await rn(this,Te.NEED_REPLACE_TRACK,this)):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await rn(this,Te.NEED_REPLACE_TRACK,this))})}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(ki.ON_TRACK)}unbindProcessorContextEvents(){this.processorContext.removeAllListeners(Xo.REQUEST_UPDATE_CONSTRAINTS),this.processorContext.removeAllListeners(Xo.REQUEST_CONSTRAINTS)}},bt(Et.prototype,"play",[m4,g4],Object.getOwnPropertyDescriptor(Et.prototype,"play"),Et.prototype),bt(Et.prototype,"stop",[v4],Object.getOwnPropertyDescriptor(Et.prototype,"stop"),Et.prototype),bt(Et.prototype,"setEnabled",[E4,_4,S4],Object.getOwnPropertyDescriptor(Et.prototype,"setEnabled"),Et.prototype),bt(Et.prototype,"setMuted",[y4,C4,b4],Object.getOwnPropertyDescriptor(Et.prototype,"setMuted"),Et.prototype),bt(Et.prototype,"setEncoderConfiguration",[T4,R4],Object.getOwnPropertyDescriptor(Et.prototype,"setEncoderConfiguration"),Et.prototype),bt(Et.prototype,"getStats",[w4],Object.getOwnPropertyDescriptor(Et.prototype,"getStats"),Et.prototype),bt(Et.prototype,"setBeautyEffect",[I4,A4],Object.getOwnPropertyDescriptor(Et.prototype,"setBeautyEffect"),Et.prototype),bt(Et.prototype,"getCurrentFrameData",[O4],Object.getOwnPropertyDescriptor(Et.prototype,"getCurrentFrameData"),Et.prototype),bt(Et.prototype,"getCurrentFrameImage",[x4],Object.getOwnPropertyDescriptor(Et.prototype,"getCurrentFrameImage"),Et.prototype),bt(Et.prototype,"setBitrateLimit",[N4],Object.getOwnPropertyDescriptor(Et.prototype,"setBitrateLimit"),Et.prototype),bt(Et.prototype,"setOptimizationMode",[P4],Object.getOwnPropertyDescriptor(Et.prototype,"setOptimizationMode"),Et.prototype),bt(Et.prototype,"setScalabiltyMode",[D4],Object.getOwnPropertyDescriptor(Et.prototype,"setScalabiltyMode"),Et.prototype),bt(Et.prototype,"updateMediaStreamTrackResolution",[L4],Object.getOwnPropertyDescriptor(Et.prototype,"updateMediaStreamTrackResolution"),Et.prototype),bt(Et.prototype,"pipe",[k4],Object.getOwnPropertyDescriptor(Et.prototype,"pipe"),Et.prototype),bt(Et.prototype,"unpipe",[M4],Object.getOwnPropertyDescriptor(Et.prototype,"unpipe"),Et.prototype),bt(Et.prototype,"close",[F4],Object.getOwnPropertyDescriptor(Et.prototype,"close"),Et.prototype),bt(Et.prototype,"replaceTrack",[U4],Object.getOwnPropertyDescriptor(Et.prototype,"replaceTrack"),Et.prototype),Et),eA=(B4=je({argsMap:(e,t)=>[e.getTrackId(),t]}),$4=Gn(),V4=Ff("CameraVideoTrack","_enabledMutex"),j4=je({argsMap:(e,t)=>[e.getTrackId(),t]}),H4=Gn(),z4=je({argsMap:(e,t)=>[e.getTrackId(),t]}),W4=Gn(),G4=je({argsMap:e=>[e.getTrackId()]}),Bo=class B9 extends hn{get __className__(){return"CameraVideoTrack"}constructor(t,n,r,i,o,a){super(t,_c(n.encoderConfig),i,o,a),Z(this,"_config",void 0),Z(this,"_originalConstraints",void 0),Z(this,"_constraints",void 0),Z(this,"_enabled",!0),Z(this,"_deviceName","default"),Z(this,"tryResumeVideoForIOS15_16WeChat",async()=>{(Mf()||BI())&&!function(){const s=Tt();if(s.os!==yr.IOS||!s.osVersion)return!1;const c=s.osVersion.split(".");return Number(c[0])===15&&Number(c[1])>=2}()&&z7()&&this._enabled&&!this._isClosed&&(w.debug("[".concat(this.getTrackId(),"] try capture camera media device for interrupted iOS 15 device on WeChat.")),await this.renewMediaStreamTrack())}),this._config=n,this._originalConstraints=r,this._constraints=r,this._deviceName=t.label,this._encoderConfig=_c(this._config.encoderConfig),Jt.on(Pr.IOS_15_16_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat),Jt.on(Pr.IOS_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat),this.bindProcessorContextEvents()}async setDevice(t){return typeof t=="string"?this._setDeviceById(t):t.deviceId?this._setDeviceById(t.deviceId):t.facingMode?this._setDeviceByFacingModel(t.facingMode):void 0}async _setDeviceById(t){if(w.info("[".concat(this.getTrackId(),"] set device to ").concat(t)),this._enabled)try{const n=await qo.getDeviceById(t),r={};r.video=bn({},this._constraints),r.video.deviceId={exact:t},r.video.facingMode=void 0,this._originMediaStreamTrack.stop();let i=null;try{i=await zo(r,this.getTrackId())}catch(o){throw w.error("[".concat(this.getTrackId(),"] setDevice failed"),o.toString()),i=await zo({video:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(i.getVideoTracks()[0],!1),o}await this._updateOriginMediaStreamTrack(i.getVideoTracks()[0],!1),this.updateMediaStreamTrackResolution(),this._deviceName=n.label,this._config.cameraId=t,this._constraints.deviceId={exact:t}}catch(n){throw w.error("[".concat(this.getTrackId(),"] setDevice error"),n.toString()),n}else try{const n=await qo.getDeviceById(t);this._deviceName=n.label,this._config.cameraId=t,this._constraints.deviceId={exact:t}}catch(n){throw w.error("[".concat(this.getTrackId(),"] setDevice error"),n.toString()),n}w.info("[".concat(this.getTrackId(),"] setDevice success"))}async _setDeviceByFacingModel(t){w.info("[".concat(this.getTrackId(),"] set facingMode ").concat(t));const n={video:bn(bn({},this._constraints),{},{deviceId:void 0,facingMode:{exact:t}})};if(this._enabled){this._originMediaStreamTrack.stop();let r=null;try{r=await zo(n,this.getTrackId())}catch(i){throw w.error("[".concat(this.getTrackId(),"] setDeviceByFacingModel failed"),i.toString()),r=await zo({video:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(r.getVideoTracks()[0],!1),i}await this._updateOriginMediaStreamTrack(r.getVideoTracks()[0],!1),this.updateMediaStreamTrackResolution()}this._deviceName="",this._config.facingMode=t,this._config.cameraId=void 0,this._constraints=bn({},n.video),w.info("[".concat(this.getTrackId(),"] setDeviceByFacingModel success"))}async setEnabled(t,n){if(!n){if(t===this._enabled)return;this.stateCheck("enabled",t)}if(w.info("[".concat(this.getTrackId(),"] start setEnabled"),t),t){try{if(this.isExternalTrack)this._originMediaStreamTrack.enabled=!0;else{const r=await zo({video:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(r.getVideoTracks()[0],!1)}await rn(this,Te.NEED_ENABLE_TRACK,this)}catch(r){throw w.error("[".concat(this.getTrackId(),"] setEnabled true error"),r.toString()),r}this.updateMediaStreamTrackResolution(),w.info("[".concat(this.getTrackId(),"] setEnabled to true success")),n||(this._enabled=!0)}else{this.isExternalTrack?this._originMediaStreamTrack.enabled=!1:(this._originMediaStreamTrack.onended=null,this._originMediaStreamTrack.stop()),n||(this._enabled=!1);try{await rn(this,Te.NEED_DISABLE_TRACK,this)}catch(r){throw w.error("[".concat(this.getTrackId(),"] setEnabled to false error"),r.toString()),r}w.info("[".concat(this.getTrackId(),"] setEnabled to false success"))}}async setEncoderConfiguration(t,n){if(!this._enabled)throw new Q(k.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled");t=_c(t),this._forceBitrateLimit&&(t.bitrateMax=this._forceBitrateLimit.max_bitrate||t.bitrateMax,t.bitrateMin=this._forceBitrateLimit.min_bitrate||t.bitrateMin);const r=Yn(this._config);r.encoderConfig=t;const i=oS(r);(Gr()||Li()||rs())&&(i.deviceId=void 0),w.debug("[".concat(this.getTrackId(),"] setEncoderConfiguration applyConstraints"),JSON.stringify(t),JSON.stringify(i));try{await this._originMediaStreamTrack.applyConstraints(i),this.updateMediaStreamTrackResolution()}catch(o){const a=new Q(k.UNEXPECTED_ERROR,o.toString());throw w.error("[".concat(this.getTrackId(),"] applyConstraints error"),a.toString()),a}this._config=r,this._constraints=i,this._originalConstraints=i,this._encoderConfig=t,this._hints.indexOf(gn.SCREEN_TRACK)===-1&&this.updateBitrateFromProfile();try{await rn(this,Te.NEED_UPDATE_VIDEO_ENCODER,this)}catch(o){return o.throw(w)}}_getDefaultPlayerConfig(){return{mirror:!0,fit:"cover"}}onTrackEnded(){if((Li()||rs())&&this._enabled&&!this._isClosed&&Jt.duringInterruption){const t=async()=>{Jt.off(Pr.IOS_INTERRUPTION_END,t),this._enabled&&!this._isClosed&&(w.debug("[".concat(this.getTrackId(),"] try capture camera media device for interrupted iOS device.")),await this.setEnabled(!1),await this.setEnabled(!0))};Jt.on(Pr.IOS_INTERRUPTION_END,t)}else w.debug("[".concat(this.getTrackId(),"] track ended")),this.safeEmit(hp.TRACK_ENDED)}async renewMediaStreamTrack(t){const n=t||this._constraints,r=qo.searchDeviceIdByName(this._deviceName);if(r&&!n.deviceId&&(n.deviceId={exact:r}),this._enabled){const i=await zo({video:n},this.getTrackId());this._constraints=n,await this._updateOriginMediaStreamTrack(i.getVideoTracks()[0],!0),this.updateMediaStreamTrackResolution()}}close(){super.close(),Jt.off(Pr.IOS_15_16_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat),Jt.off(Pr.IOS_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat)}clone(t){let n=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],r=this._encoderConfig;t&&(r=bn(bn({},r),_c(t))),r=id(r);const i=cn(8,"track-cam-cloned-"),o=new B9(n?this._mediaStreamTrack.clone():this._mediaStreamTrack,id(bn(bn({},this._config),{},{encoderConfig:r})),id(this._constraints),id(this._scalabilityMode),this._optimizationMode,i);return t&&r&&o.setEncoderConfiguration(r),w.debug("clone track from ".concat(this.getTrackId()," to ").concat(i,", clone ").concat(n)),o}bindProcessorContextEvents(){this.processorContext.on(Xo.REQUEST_UPDATE_CONSTRAINTS,async(t,n,r)=>{try{const i=Object.assign({},this._originalConstraints,...t);await this.renewMediaStreamTrack(i),n()}catch(i){r(i)}}),this.processorContext.on(Xo.REQUEST_CONSTRAINTS,async t=>{t(this._originMediaStreamTrack.getSettings())})}},bt(Bo.prototype,"setDevice",[B4,$4],Object.getOwnPropertyDescriptor(Bo.prototype,"setDevice"),Bo.prototype),bt(Bo.prototype,"setEnabled",[V4,j4,H4],Object.getOwnPropertyDescriptor(Bo.prototype,"setEnabled"),Bo.prototype),bt(Bo.prototype,"setEncoderConfiguration",[z4,W4],Object.getOwnPropertyDescriptor(Bo.prototype,"setEncoderConfiguration"),Bo.prototype),bt(Bo.prototype,"close",[G4],Object.getOwnPropertyDescriptor(Bo.prototype,"close"),Bo.prototype),Bo);function vT(e,t,n,r){n.optimizationMode&&(r&&r.width&&r.height?(n.encoderConfig=bn(bn({},r),{},{bitrateMin:r.bitrateMin,bitrateMax:r.bitrateMax}),n.optimizationMode!=="motion"&&n.optimizationMode!=="detail"||(t.contentHint=n.optimizationMode,t.contentHint===n.optimizationMode?w.debug("[".concat(e,"] set content hint to"),n.optimizationMode):w.debug("[".concat(e,"] set content hint failed")))):w.warning("[".concat(e,"] can not apply optimization mode bitrate config, no encoderConfig")))}var K4,q4,Y4,X4,ia,J4,Q4,Z4,eU,tU,nU,gi;class $9 extends _9{getUserId(){return this._userId}constructor(t,n,r,i){super(t,"track-".concat(t.kind,"-").concat(n,"-").concat(i.clientId,"_").concat(cn(5,""))),Z(this,"_userId",void 0),Z(this,"_uintId",void 0),Z(this,"_isDestroyed",!1),Z(this,"store",void 0),Z(this,"processor",void 0),Z(this,"processorContext",void 0),this._userId=n,this._uintId=r,this.store=i}_updateOriginMediaStreamTrack(t){this._originMediaStreamTrack=t,this._mediaStreamTrack=t,this._updatePlayerSource(),this.processor&&this.processor.updateInput({track:this._originMediaStreamTrack,context:this.processorContext})}_destroy(){this._isDestroyed=!0,w.info("[".concat(this.getTrackId(),"] is destroyed")),this.stop(),super.close()}getProcessorStats(){return this.processorContext.gatherStats()}getProcessorUsage(){return this.processorContext.gatherUsage()}}let Sf=(K4=je({argsMap:(e,t,n)=>[e.getTrackId(),typeof t=="string"?t:t instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement",n]}),q4=je({argsMap:e=>[e.getTrackId()]}),Y4=je({argsMap:(e,t)=>[e.getTrackId(),t.name]}),X4=je({argsMap:e=>[e.getTrackId()]}),bt((ia=class extends $9{get isPlaying(){return!(!this._player||this._player.videoElementStatus!==_i.PLAYING)}get __className__(){return"RemoteVideoTrack"}constructor(e,t,n,r){super(e,t,n,r),Z(this,"_videoVisibleTimer",null),Z(this,"_previousVideoVisibleStatus",void 0),Z(this,"_clearPreviousVideoVisibleStatus",()=>this._previousVideoVisibleStatus=void 0),Z(this,"trackMediaType",fp.VIDEO),Z(this,"_videoWidth",void 0),Z(this,"_videoHeight",void 0),Z(this,"_player",void 0),Z(this,"processorDestination",void 0),Z(this,"processorContext",void 0),this.updateMediaStreamTrackResolution(),this.processorContext=new x9(this.getTrackId(),"remote"),this.processorDestination=new O9(this.processorContext),this.bindProcessorDestinationEvents()}getStats(){return Su(()=>{w.warning("[deprecated] RemoteVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteVideoStats instead")},"remoteVideoTrackGetStatsWarning"),ga(this,Te.GET_STATS)||bn({},E9)}play(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof e=="string"){const r=document.getElementById(e);r?e=r:(w.warning("[".concat(this.getTrackId(),'] can not find "#').concat(e,'" element, use document.body')),e=document.body)}w.debug("[".concat(this.getTrackId(),"] start video playback in ").concat(e instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement"),JSON.stringify(t));const n=bn(bn({fit:"cover"},t),{},{trackId:this.getTrackId(),element:e});this._player?this._player.updateConfig(n):(e instanceof HTMLVideoElement?this._player=new EN(n):this._player=new F9(n),this._player.updateVideoTrack(this._mediaStreamTrack),this._player.onFirstVideoFrameDecoded=()=>{this.store.subscribe(this.getUserId(),"video",void 0,void 0,Date.now()),this.safeEmit(_f.FIRST_FRAME_DECODED)},this._player.onVideoStateChanged=r=>{this.safeEmit(_f.VIDEO_STATE_CHANGED,r)}),this._player.play(this.store.sessionId||void 0),this._videoVisibleTimer&&window.clearInterval(this._videoVisibleTimer),this._clearPreviousVideoVisibleStatus(),this._videoVisibleTimer=window.setInterval(()=>{try{const r=this.getVideoElementVisibleStatus();this.safeEmit(_f.VIDEO_ELEMENT_VISIBLE_STATUS,r)}catch{}},H("CHECK_VIDEO_VISIBLE_INTERVAL"))}stop(){this._player&&(this._videoVisibleTimer&&(window.clearInterval(this._videoVisibleTimer),this._videoVisibleTimer=null),this._clearPreviousVideoVisibleStatus(),this._player.destroy(),this._player=void 0,w.debug("[".concat(this.getTrackId(),"] stop video playback")))}getCurrentFrameData(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}updateMediaStreamTrackResolution(){D9(this._originMediaStreamTrack).then(e=>{let[t,n]=e;this._videoHeight=n,this._videoWidth=t}).catch(By)}_updatePlayerSource(){w.debug("[".concat(this.getTrackId(),"] update player source track")),this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}getVideoElementVisibleStatus(){try{var e,t;const n=this==null||(e=this._player)===null||e===void 0?void 0:e.getContainerElement(),r={track:this,element:this==null||(t=this._player)===null||t===void 0?void 0:t.getVideoElement(),slot:n==null?void 0:n.parentElement},{element:i,slot:o}=r;if(this.isPlaying&&i instanceof HTMLVideoElement&&o instanceof HTMLElement){const a=K7.checkOneElementVisible(i),s=Object.assign({},a);if(s.visible!==this._previousVideoVisibleStatus){this._previousVideoVisibleStatus=s.visible;const c=Pe.reportApiInvoke(null,{tag:kn.TRACER,name:dr.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE,options:[this.getTrackId()]});s.visible?c.onSuccess("Video is visible"):c.onSuccess("Invisible because of ".concat(s.reason))}return s}return}catch(n){throw new Q(k.GET_VIDEO_ELEMENT_VISIBLE_ERROR,n.message)}}pipe(e){if(this.processor===e)return e;if(e._source)throw new Q(k.INVALID_OPERATION,"Processor ".concat(e.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=e,this.processor._source=this,e.updateInput({track:this._originMediaStreamTrack,context:this.processorContext}),e}unpipe(){if(!this.processor)return;const e=this.processor;this.processor._source=void 0,this.processor=void 0,e.reset()}bindProcessorDestinationEvents(){this.processorDestination.on(ki.ON_TRACK,async e=>{e?e!==this._mediaStreamTrack&&(this._mediaStreamTrack=e,this._updatePlayerSource()):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource())})}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(ki.ON_TRACK)}_destroy(){super._destroy(),this.unbindProcessorDestinationEvents()}_onSei(e){this.emit(gd.SEI_RECEIVED,e)}}).prototype,"play",[K4],Object.getOwnPropertyDescriptor(ia.prototype,"play"),ia.prototype),bt(ia.prototype,"stop",[q4],Object.getOwnPropertyDescriptor(ia.prototype,"stop"),ia.prototype),bt(ia.prototype,"pipe",[Y4],Object.getOwnPropertyDescriptor(ia.prototype,"pipe"),ia.prototype),bt(ia.prototype,"unpipe",[X4],Object.getOwnPropertyDescriptor(ia.prototype,"unpipe"),ia.prototype),ia),yf=(J4=je({argsMap:(e,t)=>[e.getTrackId(),t],throttleTime:300}),Q4=je({argsMap:(e,t)=>[e.getTrackId(),t]}),Z4=je({argsMap:e=>[e.getTrackId()]}),eU=je({argsMap:e=>[e.getTrackId()]}),tU=je({argsMap:(e,t)=>[e.getTrackId(),t.name]}),nU=je({argsMap:e=>[e.getTrackId()]}),bt((gi=class extends $9{get isPlaying(){return this._useAudioElement?Xi.isPlaying(this.getTrackId()):this._source.isPlayed}get __className__(){return"RemoteAudioTrack"}constructor(e,t,n,r){super(e,t,n,r),Z(this,"trackMediaType",fp.AUDIO),Z(this,"_source",void 0),Z(this,"_useAudioElement",!0),Z(this,"_volume",100),Z(this,"processorContext",void 0),Z(this,"processorDestination",void 0),Z(this,"_played",!1),Z(this,"_bypassWebAudio",!1),H("DISABLE_WEBAUDIO")?(this._source=new ZI,this._bypassWebAudio=!0,this._useAudioElement=!0):(this._source=new C9(e,!0),H("REMOTE_AUDIO_TRACK_USES_WEB_AUDIO")&&(this._useAudioElement=!1)),this._source.once(Ko.RECEIVE_TRACK_BUFFER,()=>{this.safeEmit(_f.FIRST_FRAME_DECODED)}),this.processorContext=new P9(this._source.context,this.getTrackId(),"remote"),this.processorDestination=new N9(this.processorContext),this.bindProcessorDestinationEvents(),this._source.on(Ko.UPDATE_SOURCE,()=>{this.processor&&this.processor.updateInput({node:this._source.processSourceNode,context:this.processorContext})})}setAudioFrameCallback(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:4096;if(!e)return this._source.removeAllListeners(Ko.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(t),this._source.removeAllListeners(Ko.ON_AUDIO_BUFFER),this._source.on(Ko.ON_AUDIO_BUFFER,n=>e(n))}setVolume(e){this._volume=e,this._useAudioElement?Xi.setVolume(this.getTrackId(),e):this._source.setVolume(e/100)}async setPlaybackDevice(e){if(!this._useAudioElement||!g9())throw new Q(k.NOT_SUPPORTED,"your browser does not support setting the audio output device");await Xi.setSinkID(this.getTrackId(),e)}getVolumeLevel(){return this._source.getAccurateVolumeLevel()}getStats(){return Su(()=>{w.warning("[deprecated] RemoteAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteAudioStats instead")},"remoteAudioTrackGetStatsWarning"),ga(this,Te.GET_STATS)||bn({},v9)}play(){w.debug("[".concat(this.getTrackId(),"] start audio playback")),this._played=!0,this._useAudioElement?(w.debug("[".concat(this.getTrackId(),"] use audio element to play")),Xi.play(this._mediaStreamTrack,this.getTrackId(),this._volume,this.store.sessionId||void 0)):this._source.play()}stop(){w.debug("[".concat(this.getTrackId(),"] stop audio playback")),this._played=!1,this._useAudioElement?Xi.stop(this.getTrackId()):this._source.stop()}_destroy(){super._destroy(),this._played=!1,this.unbindProcessorDestinationEvents(),this._source.destroy()}_isFreeze(){return this._source.isFreeze}_updatePlayerSource(){let e=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];w.debug("[".concat(this.getTrackId(),"] update player source track")),e&&this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&Xi.updateTrack(this.getTrackId(),this._mediaStreamTrack)}pipe(e){if(this._bypassWebAudio)throw new Q(k.NOT_SUPPORTED,"can not pipe extension when WebAudio disabled");if(this.processor===e)return e;if(e._source)throw new Q(k.INVALID_OPERATION,"Processor ".concat(e.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=e,this.processor._source=this,e.updateInput({track:this._originMediaStreamTrack,node:this._source.processSourceNode,context:this.processorContext}),e}unpipe(){var e;if(this._bypassWebAudio)throw new Q(k.NOT_SUPPORTED,"can not unpipe extension when WebAudio disabled");if(!this.processor)return;const t=this.processor;(e=this._source.processSourceNode)===null||e===void 0||e.disconnect(),this.processor._source=!1,this.processor=void 0,t.reset()}bindProcessorDestinationEvents(){this.processorDestination.on(ki.ON_TRACK,async e=>{e?e!==this._mediaStreamTrack&&(this._mediaStreamTrack=e,this._updatePlayerSource(!1),this._source.processedNode=this._source.createMediaStreamSourceNode(e)):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource())}),this.processorDestination.on(ki.ON_NODE,e=>{this._source.processedNode=e;const t=!e;this._useAudioElement!==t&&(this._played?(this.stop(),this._useAudioElement=t,this.play()):this._useAudioElement=t)})}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(ki.ON_TRACK),this.processorDestination.removeAllListeners(ki.ON_NODE)}}).prototype,"setVolume",[J4],Object.getOwnPropertyDescriptor(gi.prototype,"setVolume"),gi.prototype),bt(gi.prototype,"setPlaybackDevice",[Q4],Object.getOwnPropertyDescriptor(gi.prototype,"setPlaybackDevice"),gi.prototype),bt(gi.prototype,"play",[Z4],Object.getOwnPropertyDescriptor(gi.prototype,"play"),gi.prototype),bt(gi.prototype,"stop",[eU],Object.getOwnPropertyDescriptor(gi.prototype,"stop"),gi.prototype),bt(gi.prototype,"pipe",[tU],Object.getOwnPropertyDescriptor(gi.prototype,"pipe"),gi.prototype),bt(gi.prototype,"unpipe",[nU],Object.getOwnPropertyDescriptor(gi.prototype,"unpipe"),gi.prototype),gi);const qc=new class extends Pn{get visibility(){return document.visibilityState}get lastHiddenTime(){return this._lastHiddenTime}get lastVisibleTime(){return this._lastVisibleTime}constructor(){super(),Z(this,"_lastHiddenTime",0),Z(this,"_lastVisibleTime",0),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"?this._lastHiddenTime=performance.now():this._lastVisibleTime=performance.now(),w.debug("document visibility went ".concat(document.visibilityState)),this.emit("VISIBILITY_CHANGE",document.visibilityState)})}};class V9 extends Pn{constructor(t,n){super(),Z(this,"trackMediaType",fp.DATA),Z(this,"_version",1),Z(this,"_type",3),Z(this,"_config",void 0),Z(this,"_originDataChannel",void 0),Z(this,"_dataStreamPacketHeader",new ArrayBuffer(4)),Z(this,"_dataStreamPacketHandler",{serialize:r=>r,deserialize:r=>r}),Z(this,"_datachannelEventMap",new Map),this._config=t,n&&(this._originDataChannel=n,this._bandDataChannelEvents(n)),this._initPacketHeader()}useDataStream(t){this._dataStreamPacketHandler=t}get id(){return this._config.id}get ordered(){return this._config.ordered}get maxRetransmits(){return H("DATASTREAM_MAX_RETRANSMITS")}get metadata(){return this._config.metadata}get readyState(){var t,n;return(t=(n=this._originDataChannel)===null||n===void 0?void 0:n.readyState)!==null&&t!==void 0?t:"connecting"}get _originDataChannelId(){var t,n;return(t=(n=this._originDataChannel)===null||n===void 0?void 0:n.id)!==null&&t!==void 0?t:null}getChannelId(){return this.id}getConfig(){return this._config}_close(){this._originDataChannel&&(this._unbindDataChannelEvents(this._originDataChannel),this._originDataChannel=void 0)}async _waitTillOpen(){return new _e((t,n)=>{if(this._originDataChannel){this._originDataChannel.readyState==="open"&&t();const r=setTimeout(()=>{var i;n(new Q(k.DATACHANNEL_CONNECTION_TIMEOUT,"Cannot create datachannel, id: ".concat((i=this._originDataChannel)===null||i===void 0?void 0:i.id)))},1e4);this._originDataChannel.onopen=()=>{clearTimeout(r),this._originDataChannel&&this._bandDataChannelEvents(this._originDataChannel),t()},this._originDataChannel.onerror=()=>{throw clearTimeout(r),new Q(k.DATACHANNEL_CONNECTION_TIMEOUT)}}else n(new Q(k.DATACHANNEL_CONNECTION_TIMEOUT,"cannot find dataChannel"))})}_updateOriginDataChannel(t){this._originDataChannel=t,this._bandDataChannelEvents(t)}_initPacketHeader(){const t=new DataView(this._dataStreamPacketHeader);t.setUint16(0,this._version),t.setUint8(2,this._type),t.setUint8(3,this._config.id)}_bandDataChannelEvents(t){this._unbindDataChannelEvents(t),[u_.OPEN,u_.CLOSE,u_.ERROR].forEach(n=>{const r=()=>{this.emit(n)};this._datachannelEventMap.set(n,r),t.addEventListener(n,r)})}_unbindDataChannelEvents(t){Array.from(this._datachannelEventMap.entries()).forEach(n=>{let[r,i]=n;t.removeEventListener(r,i)}),this._datachannelEventMap.clear()}}class dfe extends V9{constructor(t){super(t),Z(this,"_messageListener",void 0),this._messageListener=n=>{if(n.data.byteLength<this._dataStreamPacketHeader.byteLength)throw Error("invalid byteLength: the byte length must exceed "+this._dataStreamPacketHeader.byteLength);const r=n.data.slice(0,this._dataStreamPacketHeader.byteLength),i=new DataView(r).getUint8(3);if(i!==this.id)return void(H("SHOW_DATASTREAM2_LOG")&&w.debug("invalid datachannel id: ".concat(i," !== ").concat(this.id)));let o=n.data.slice(this._dataStreamPacketHeader.byteLength);o=this._dataStreamPacketHandler.deserialize(o),this.emit(u_.MESSAGE,o)}}_updateOriginDataChannel(t){super._updateOriginDataChannel(t),this._bandRemoteDataChannelEvents()}_close(){this._originDataChannel&&(this._originDataChannel.removeEventListener("message",this._messageListener),super._close())}_bandRemoteDataChannelEvents(){this._originDataChannel&&this._originDataChannel.addEventListener("message",this._messageListener)}}class hfe extends V9{send(t){if(this._originDataChannel){let n=t;n=this._dataStreamPacketHandler.serialize(t);const r=new Uint8Array(this._dataStreamPacketHeader.byteLength+n.byteLength);r.set(new Uint8Array(this._dataStreamPacketHeader),0),r.set(new Uint8Array(n),this._dataStreamPacketHeader.byteLength),this._originDataChannel.send(r.buffer)}}}function h_(){const e=new Blob([atob("ZnVuY3Rpb24gZShlLHQsbil7bGV0IHI9bmV3IFVpbnQ4QXJyYXkoZSx0LG4pLGE9W10sbz0wO2Zvcig7YS5sZW5ndGg8bjspbyszPG4mJjA9PT1yW29dJiYwPT09cltvKzFdJiYzPT09cltvKzJdJiYoMD09PXJbbyszXXx8MT09PXJbbyszXXx8Mj09PXJbbyszXXx8Mz09PXJbbyszXSk/KGEucHVzaChyW29dLHJbbysxXSxyW28rM10pLG8rPTQpOihhLnB1c2gocltvXSksbysrKTtyZXR1cm4gbmV3IFVpbnQ4QXJyYXkoYSl9ZnVuY3Rpb24gdChlLHQpe2NvbnN0IG49ZnVuY3Rpb24oZSl7Y29uc3QgdD1lLmxlbmd0aDtsZXQgbj1bXSxyPTA7Zm9yKDtyPHQ7KXIrMjx0JiYwPT09ZVtyXSYmMD09PWVbcisxXSYmKDA9PT1lW3IrMl18fDE9PT1lW3IrMl18fDI9PT1lW3IrMl18fDM9PT1lW3IrMl0pPyhuLnB1c2goZVtyXSxlW3IrMV0sMyxlW3IrMl0pLHIrPTMpOihuLnB1c2goZVtyXSkscisrKTtyZXR1cm4gbmV3IFVpbnQ4QXJyYXkobil9KHQpLHI9bi5sZW5ndGgsYT1NYXRoLmZsb29yKHIvMjU1KSxvPXIlMjU1LHM9bmV3IFVpbnQ4QXJyYXkoNithKzErcitlLmJ5dGVMZW5ndGgpO3NbMF09MCxzWzFdPTAsc1syXT0wLHNbM109MSxzWzRdPTYsc1s1XT0xMDE7bGV0IGk9MDtmb3IoO2k8YTspc1s2K2ldPTI1NSxpKys7cmV0dXJuIHNbNitpXT1vLGkrKyxzLnNldChuLDYraSkscy5zZXQobmV3IFVpbnQ4QXJyYXkoZSksNitpK3IpLHMuYnVmZmVyfW5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigiU2FmYXJpIik+LTEmJi0xPT09bmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJDaHJvbWUiKSYmKHNlbGYub25ydGN0cmFuc2Zvcm09bj0+e2NvbnN0IHI9bi50cmFuc2Zvcm1lcjtsZXQgYT1bXTtyLm9wdGlvbnMucG9ydC5vbm1lc3NhZ2U9ZT0+e2UuZGF0YS5zZWkmJmEucHVzaChlLmRhdGEuc2VpKX0sc2VsZi5wb3N0TWVzc2FnZSgic3RhcnRlZCIpO2NvbnN0IG89ci5yZWFkYWJsZS5nZXRSZWFkZXIoKSxzPXIud3JpdGFibGUuZ2V0V3JpdGVyKCk7InJ4Ij09PXIub3B0aW9ucy5uYW1lP2Z1bmN0aW9uIHQobil7by5yZWFkKCkudGhlbigocj0+e2lmKCFyLmRvbmUpe2lmKHIudmFsdWUgaW5zdGFuY2VvZiBSVENFbmNvZGVkVmlkZW9GcmFtZSl7Y29uc3QgdD1mdW5jdGlvbih0KXtjb25zdCBuPW5ldyBEYXRhVmlldyh0LmRhdGEpO2xldCByPTA7Zm9yKDtyKzQ8dC5kYXRhLmJ5dGVMZW5ndGg7KXtpZigwPT09bi5nZXRVaW50OChyKzApJiYwPT09bi5nZXRVaW50OChyKzEpJiYwPT09bi5nZXRVaW50OChyKzIpJiYxPT09bi5nZXRVaW50OChyKzMpJiY2PT09bi5nZXRVaW50OChyKzQpKXtsZXQgYT1yKzYsbz0wLHM9MDtmb3IoOzI1NT09PShzPW4uZ2V0VWludDgoYSsrKSk7KW8rPTI1NTtvKz1zO2NvbnN0IGk9ZSh0LmRhdGEsYSxvKTtyZXR1cm4gbmV3IFVpbnQ4QXJyYXkoaSl9cisrfXJldHVybiBudWxsfShyLnZhbHVlKTt0JiZuLm9wdGlvbnMucG9ydC5wb3N0TWVzc2FnZSh7c2VpOnR9KX1zLndyaXRlKHIudmFsdWUpLG4ub3B0aW9ucy5wb3J0LnBvc3RNZXNzYWdlKHt0cmFuc2Zvcm1lZDohMH0pLHQobil9fSkpfShyKToidHgiPT09ci5vcHRpb25zLm5hbWUmJmZ1bmN0aW9uIGUobil7by5yZWFkKCkudGhlbigocj0+e2lmKCFyLmRvbmUpe2lmKHIudmFsdWUgaW5zdGFuY2VvZiBSVENFbmNvZGVkVmlkZW9GcmFtZSl7Y29uc3QgZT1hLnNoaWZ0KCk7ZSYmKHIudmFsdWUuZGF0YT10KHIudmFsdWUuZGF0YSxlKSl9cy53cml0ZShyLnZhbHVlKSxuLm9wdGlvbnMucG9ydC5wb3N0TWVzc2FnZSh7dHJhbnNmb3JtZWQ6ITB9KSxlKG4pfX0pKX0ocil9LHNlbGYucG9zdE1lc3NhZ2UoInJlZ2lzdGVyZWQiKSk7Cg==")],{type:"text/javascript"});return setTimeout(()=>TF.revokeObjectURL(e),0),new Worker(TF.createObjectURL(e))}const Uv=new Map,Bv=new Map;function ffe(e,t,n){let r=new Uint8Array(e,t,n),i=[],o=0;for(;i.length<n;)o+3<n&&r[o]===0&&r[o+1]===0&&r[o+2]===3&&(r[o+3]===0||r[o+3]===1||r[o+3]===2||r[o+3]===3)?(i.push(r[o],r[o+1],r[o+3]),o+=4):(i.push(r[o]),o++);return new Uint8Array(i)}const $v=new Map;async function pfe(e,t){if(!It().supportWebRTCEncodedTransform)return void w.warning("browser not support video encoded transform");if($v.has(e)||!e.track)return;const n={track:e.track};if(ou()){if(!e.createEncodedStreams)return void w.warning("browser not support createEncodedStreams() API");let i=null;try{i=e.createEncodedStreams()}catch(s){return void w.error("create video-encoded-streams error",s&&s.message)}let o=[];t.on("sei-to-send",s=>{o.push(s)});const a=new TransformStream({transform(s,c){n.controller||(n.controller=c),e.track&&e.track.id!==n.track.id&&(w.debug("video track changed: ".concat(n.track.id," => ").concat(e.track.id)),n.track.removeEventListener("ended",r),n.track=e.track,n.track.addEventListener("ended",r));const l=o.shift();l&&(s.data=function(u,d){const h=function(E){const S=E.length;let C=[],b=0;for(;b<S;)b+2<S&&E[b]===0&&E[b+1]===0&&(E[b+2]===0||E[b+2]===1||E[b+2]===2||E[b+2]===3)?(C.push(E[b],E[b+1],3,E[b+2]),b+=3):(C.push(E[b]),b++);return new Uint8Array(C)}(d),f=h.length,g=Math.floor(f/255),p=f%255,m=new Uint8Array(6+g+1+f+u.byteLength);m[0]=0,m[1]=0,m[2]=0,m[3]=1,m[4]=6,m[5]=101;let _=0;for(;_<g;)m[6+_]=255,_++;return m[6+_]=p,_++,m.set(h,6+_),m.set(new Uint8Array(u),6+_+f),m.buffer}(s.data,l)),c.enqueue(s)}});i.readable.pipeThrough(a).pipeTo(i.writable)}else{if(!Gr())return;{if(typeof RTCRtpScriptTransform>"u")return void w.warning("browser not support RTCRtpScriptTransform");const i=h_(),o=new MessageChannel;await new _e(s=>i.onmessage=c=>{c.data==="registered"&&s(void 0)});const a=new RTCRtpScriptTransform(i,{name:"tx",port:o.port2},[o.port2]);e.transform=a,await new _e(s=>i.onmessage=c=>{c.data==="started"&&s(void 0)}),t.on("sei-to-send",s=>{o.port1.postMessage({sei:s})}),o.port1.onmessage=s=>{var c;s.data.transformed&&e.track&&((c=e.track)===null||c===void 0?void 0:c.id)!==n.track.id&&(w.debug("video track changed: ".concat(n.track.id," => ").concat(e.track.id)),n.track.removeEventListener("ended",r),n.track=e.track,n.track.addEventListener("ended",r))},n.worker=i}}function r(){if(e.track){if(this.id!==e.track.id)return;e.track.removeEventListener("ended",r)}const i=$v.get(e);if(i){$v.delete(e);try{var o,a;(o=i.controller)===null||o===void 0||o.terminate(),(a=i.worker)===null||a===void 0||a.terminate()}catch(s){w.warning(s&&s.message)}}}$v.set(e,n),e.track.addEventListener("ended",r)}const Gp=new Map;(function(){const e=Tt();Ar.getDisplayMedia=!(!navigator.mediaDevices||!navigator.mediaDevices.getDisplayMedia),Ar.getStreamFromExtension=e.name===Kt.CHROME&&Number(e.version)>34,Ar.supportUnifiedPlan=function(){if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;const t=new RTCPeerConnection;let n=!1;try{t.addTransceiver("audio"),n=!0}catch{}return t.close(),n}(),Ar.supportMinBitrate=e.name===Kt.CHROME||e.name===Kt.EDGE,Ar.supportSetRtpSenderParameters=function(){const t=Tt();return!!(window.RTCRtpSender&&window.RTCRtpSender.prototype.setParameters&&window.RTCRtpSender.prototype.getParameters)&&(!!_u()||!(!Gr()&&!tS())||t.name===Kt.FIREFOX&&Number(t.version)>=64)}(),e.name===Kt.SAFARI&&(Number(e.version)>=14?Ar.supportDualStream=!0:Ar.supportDualStream=!1),Ar.webAudioMediaStreamDest=function(){const t=Tt();return!(t.name===Kt.SAFARI&&Number(t.version)<12)}(),Ar.supportReplaceTrack=!!window.RTCRtpSender&&typeof RTCRtpSender.prototype.replaceTrack=="function",Ar.supportWebGL=typeof WebGLRenderingContext<"u",Ar.supportRequestFrame=!!window.CanvasCaptureMediaStreamTrack,_u()||(Ar.webAudioWithAEC=!0),Ar.supportShareAudio=function(){const t=Tt();return(t.os===yr.WIN_10||t.os===yr.WIN_81||t.os===yr.WIN_7||t.os===yr.LINUX||t.os===yr.MAC_OS||t.os===yr.CHROMIUM_OS)&&t.name===Kt.CHROME&&Number(t.version)>=74}(),Ar.supportDataChannel=!!(UI(76)||function(t){const n=Tt();return!(n.name!==Kt.FIREFOX||!n.osVersion)&&Number(n.version)>=t}(68)||V7(14)),Ar.supportPCSetConfiguration=function(){const t=window.RTCPeerConnection;return!Fn()&&!!t&&t.prototype.setConfiguration instanceof Function}(),Ar.supportWebRTCEncodedTransform=function(){const t=Tt();return t.name==="Chrome"&&Number(t.version)>=86||t.name==="Safari"&&Number(t.version)>=15}(),Ar.supportWebRTCInsertableStream=function(){const t=Tt();return(t.name===Kt.CHROME||t.name===Kt.EDGE)&&Number(t.version)>=94&&"MediaStreamTrackGenerator"in window&&"MediaStreamTrackProcessor"in window}(),Ar.supportRequestVideoFrameCallback="requestVideoFrameCallback"in HTMLVideoElement.prototype,Ar.supportWebCrypto=typeof window<"u"&&window.crypto!==void 0&&window.crypto.subtle!==void 0,Uy(()=>{Ar.supportDualStreamEncoding=function(){const t=Tt();return!!H("DISABLE_WEBAUDIO")||t.name==="Safari"&&Number(t.version)>=14||!!(t.name==="Chrome"&&/Windows/i.test(t.os||"")&&Number(t.version)>=100&&H("CHROME_DUAL_STREAM_USE_ENCODING"))}(),w.info("browser compatibility",JSON.stringify(Ar),JSON.stringify(e))})})();class Od extends Pn{constructor(t,n){super(),P(this,"signal",void 0),P(this,"token",void 0),P(this,"tokenTimeout",void 0),P(this,"tokenInterval",void 0),P(this,"_sequence",0),P(this,"userMap",new Map),P(this,"encoder",new TextEncoder),this.signal=t,this.token=n;const r=()=>{this.signal.connectionState===sn.CONNECTED&&this.check(),this.userMap.size===0?this.tokenInterval=window.setTimeout(r,1e3):this.tokenInterval=window.setTimeout(r,3*H("P2P_TOKEN_INTERVAL"))};r()}async send(t,n,r,i,o){var a,s,c;if(this.userMap.size===0)return;const l=Array.from(al(a=this.userMap).call(a))[0].token;typeof n!="string"&&(n=JSON.stringify(n)),i=(s=i)!==null&&s!==void 0?s:cn(6,""),o=(c=o)!==null&&c!==void 0?c:this._sequence++;const u={_id:i,_type:t,_seq:o,_message:n,token:"".concat(this.token,"_").concat(l)};H("SHOW_P2P_LOG")&&w.debug("send message",u,"noNeedResponse : ".concat(r)),this.splitMessage(JSON.stringify(u)).forEach(h=>{this.signal.request(Ke.DATA_STREAM,{payload:au(this.encoder.encode(h))})});const d=new _e((h,f)=>{const g=window.setTimeout(()=>{this.off("res-@".concat(i,"_ack"),p),this.off("res-@".concat(i),_),this.off(vh.ABORT,m),w.debug("[external-signal] request timeout, type: ".concat(t,", requestId: ").concat(i)),this.userMap.size===0?f(new Q(k.INVALID_REMOTE_USER)):f(new Q(k.TIMEOUT))},H("EXTERNAL_SIGNAL_REQUEST_TIMEOUT")),p=()=>{g&&window.clearTimeout(g),this.off(vh.ABORT,m),r&&h()},m=()=>{g&&window.clearTimeout(g),this.off("res-@".concat(i,"_ack"),p),this.off("res-@".concat(i),_),f(new Q(k.EXTERNAL_SIGNAL_ABORT,"type: ".concat(t,", requestId: ").concat(i)))};this.once(vh.ABORT,m),this.once("res-@".concat(i,"_ack"),p);const _=(S,C)=>{E=!0,g&&window.clearTimeout(g),this.off("res-@".concat(i,"_ack"),p),this.off(vh.ABORT,m),S==="success"?h(C):f(new Q(k.P2P_MESSAGE_FAILED,"request ".concat(t," failed, requestId: ").concat(i)))};let E=!1;r||(this.once("res-@".concat(i),_),Lr(H("SIGNAL_REQUEST_TIMEOUT")).then(()=>{E||w.warning("external_signal request timeout, type: ".concat(t,", requestId: ").concat(i,", ").concat(u))}))});try{return await d}catch(h){if(h.code===k.TIMEOUT)return await this.send(t,n,r,i,o);throw h}}onMessage(t){var n;const{_uid:r}=t;let i,o=this.userMap.get(r);if(o)i=o.splitMessageMap;else{if(this.userMap.size>0||!("_type"in t)||t._type!==Hn.CHECK)return;const{token:l}=t;i=new Map,o={uid:r,isStart:!0,token:l,splitMessageMap:i,nextExpectedSequenceNumber:0,receivedMessagesMap:new Map},this.userMap.set(r,o),this.signal.emit(pt.ON_USER_ONLINE,{uid:r}),this.handleUserOnline()}if("id"in t&&"total"in t){var a;const{id:l,total:u}=t,d=(a=i.get(l))!==null&&a!==void 0?a:[];if(d.push(t),i.has(l)||i.set(l,d),d.length!==u)return;{const h=xg(d).call(d,(f,g)=>f.index-g.index).map(f=>f.payload).join("");i.delete(l),(t=JSON.parse(h))._uid=r}}const{_type:s,token:c}=t;if(Ce(n=[Hn.ACK,Hn.CHECK]).call(n,s))return s===Hn.CHECK&&this.handleCheckToken(o,c),void this.receiveMessage(t);c==="".concat(o.token,"_").concat(this.token)?this.handleReceivedMessage(t):w.debug('Receive unexpected message", '.concat(c,", cur_token: ").concat(o.token,"_").concat(this.token),t)}check(){const t={_id:cn(6,""),token:this.token,_type:Hn.CHECK};H("SHOW_P2P_LOG")&&w.debug("send message",t),this.signal.request(Ke.DATA_STREAM,{payload:au(this.encoder.encode(JSON.stringify(t)))})}ack(t){const n={_id:t,_type:Hn.ACK,token:this.token};H("SHOW_P2P_LOG")&&w.debug("send message",n),this.signal.request(Ke.DATA_STREAM,{payload:au(this.encoder.encode(JSON.stringify(n)))})}response(t,n,r){this.send(Hn.RESPONSE,JSON.stringify({success:!r,message:n}),!0,t)}handleReceivedMessage(t){const n=()=>{this.userMap.forEach(l=>{const{receivedMessagesMap:u,nextExpectedSequenceNumber:d}=l;for(;u.has(d);){const h=u.get(d);u.delete(d),this.receiveMessage(h),l.nextExpectedSequenceNumber++}})};if(!t)return void n();const{_uid:r,_seq:i}=t,o=this.userMap.get(r),{receivedMessagesMap:a,isStart:s,nextExpectedSequenceNumber:c}=o;if(i<c)return this.ack(t._id),void w.debug("[external-signal] receive old message, seq: ".concat(i,", ").concat(t._message));a.set(i,t),s&&i===c&&(this.receiveMessage(t),a.delete(c),o.nextExpectedSequenceNumber++,n())}receiveMessage(t){const{_id:n,_type:r,_message:i,_uid:o}=t;if(H("SHOW_P2P_LOG")&&w.debug("receive message",t),n){let a;switch(t._type!==Hn.ACK&&(i&&(a=JSON.parse(i)),this.ack(t._id)),t._type){case Hn.CANDIDATE:case Hn.CONTROL:this.signal.emit(r,a,o);break;case Hn.PUBLISH:case Hn.UNPUBLISH:case Hn.RESTART_ICE:case Hn.CALL:a.uid=o,Kr(this.signal,r,a).then(s=>{this.response(t._id,s)}).catch(()=>{this.response(t._id,void 0,!0)});break;case Hn.ACK:this.getListeners("res-@".concat(n,"_ack")).length>0&&this.emit("res-@".concat(n,"_ack"));break;case Hn.RESPONSE:{const{success:s,message:c}=a;this.emit("res-@".concat(n),s?"success":"failed",c);break}}}}splitMessage(t){if(t.length<Od.MAX_MESSAGE_SIZE)return[t];const n=[],{remoteToken:r}=JSON.parse(t),i=cn(6,"");let o=0,a=800;const s=Math.ceil(t.length/a);for(;t.length>0;){o++;const c={id:i,index:o,total:s,payload:t.slice(0,a),token:"".concat(this.token,"_").concat(r)};JSON.stringify(c).length>Od.MAX_MESSAGE_SIZE?a-=50:(n.push(c),t=t.slice(a))}return n.map(c=>JSON.stringify(c))}handleCheckToken(t,n){return t.token!==n?(w.debug("token changed, from ".concat(t.token," to ").concat(n)),this.reset(t.uid,n),!1):(this.tokenTimeout&&(window.clearTimeout(this.tokenTimeout),this.tokenTimeout=void 0),this.tokenTimeout=window.setTimeout(()=>{w.debug("token timeout, ".concat(n)),this.reset(t.uid)},H("MAX_P2P_TIMEOUT")),!0)}async handleUserOnline(){const t=await Kr(this.signal,Hn.CALL,void 0),n=await this.send(Hn.CALL,t);this.signal.emit(qe.P2P_CONNECTION,n,!0)}async reset(t,n){const r=this.userMap.get(t);r&&(this.emit(vh.ABORT),this.signal.emit(pt.ON_USER_OFFLINE,{uid:r.uid,reason:xde.P2P_TOKEN_CHANGED}),this._sequence=0,this.userMap.clear(),n||(w.debug("change local token from ".concat(n," to ").concat(n)),this.token=cn(6,"")))}clear(){this._sequence=0,this.userMap.clear(),this.tokenInterval&&window.clearTimeout(this.tokenInterval),this.tokenInterval=void 0,this.tokenTimeout&&window.clearTimeout(this.tokenTimeout),this.tokenTimeout=void 0,this.emit(vh.ABORT)}}P(Od,"MAX_SIZE",1),P(Od,"MAX_MESSAGE_SIZE",1024);class rU extends Pn{get connectionState(){return this._connectionState}set connectionState(t){t!==this._connectionState&&(this._connectionState=t,t===sn.CONNECTED?this.emit(qe.WS_CONNECTED):t===sn.RECONNECTING?this.emit(qe.WS_RECONNECTING,this._websocketReconnectReason):t===sn.CLOSED&&this.emit(qe.WS_CLOSED,this._disconnectedReason))}get currentURLIndex(){return this.websocket.currentURLIndex}get url(){return this.websocket&&this.websocket.url||null}get rtt(){return this.rttRolling.mean()}constructor(t,n){super(),P(this,"_disconnectedReason",void 0),P(this,"_websocketReconnectReason",void 0),P(this,"_connectionState",sn.CLOSED),P(this,"reconnectToken",void 0),P(this,"p2pToken",void 0),P(this,"websocket",void 0),P(this,"openConnectionTime",void 0),P(this,"clientId",void 0),P(this,"lastMsgTime",Date.now()),P(this,"uploadCache",[]),P(this,"uploadCacheInterval",void 0),P(this,"rttRolling",new Z7(5)),P(this,"pingpongTimer",void 0),P(this,"pingpongTimeoutCount",0),P(this,"joinResponse",void 0),P(this,"multiIpOption",void 0),P(this,"initError",void 0),P(this,"spec",void 0),P(this,"store",void 0),P(this,"_external_signal",void 0),P(this,"onWebsocketMessage",r=>{if(r.data instanceof ArrayBuffer)return void this.emit(qe.ON_BINARY_DATA,r.data);const i=JSON.parse(r.data);if(this.lastMsgTime=Date.now(),Object.prototype.hasOwnProperty.call(i,"_id")){const o="res-@".concat(i._id);this.emit(o,i._result,i._message)}else if(Object.prototype.hasOwnProperty.call(i,"_type")){switch(i._type){case pt.ON_DATA_STREAM:return void this.handleDataStream(i._message);case pt.MUTE_AUDIO:case pt.MUTE_VIDEO:case pt.ON_P2P_LOST:case pt.ON_USER_ONLINE:return;case pt.ON_USER_OFFLINE:const{uid:o}=i._message;return w.debug("[".concat(this.clientId,"] user-offline uid: ").concat(o)),void this._external_signal.reset(o)}if(this.emit(i._type,i._message),i._type===pt.ON_NOTIFICATION&&this.handleNotification(i._message),i._type===pt.ON_USER_BANNED)switch(i._message.error_code){case 14:this.close(Xt.UID_BANNED);break;case 15:this.close(Xt.IP_BANNED);break;case 16:this.close(Xt.CHANNEL_BANNED)}if(i._type===pt.ON_USER_LICENSE_BANNED)switch(i._message.error_code){case $e.ERR_LICENSE_MISSING:this.close(Xt.LICENSE_MISSING);break;case $e.ERR_LICENSE_EXPIRED:this.close(Xt.LICENSE_EXPIRED);break;case $e.ERR_LICENSE_MINUTES_EXCEEDED:this.close(Xt.LICENSE_MINUTES_EXCEEDED);break;case $e.ERR_LICENSE_PERIOD_INVALID:this.close(Xt.LICENSE_PERIOD_INVALID);break;case $e.ERR_LICENSE_MULTIPLE_SDK_SERVICE:this.close(Xt.LICENSE_MULTIPLE_SDK_SERVICE);break;case $e.ERR_LICENSE_ILLEGAL:this.close(Xt.LICENSE_ILLEGAL);break;default:this.close()}}}),this.clientId=t.clientId,this.spec=t,this.store=n,this.websocket=new uN("gateway-".concat(this.clientId),this.spec.retryConfig,!0,H("JOIN_GATEWAY_USE_DUAL_DOMAIN"),H("JOIN_GATEWAY_USE_443PORT_ONLY"),n),this.handleWebsocketEvents(),window.addEventListener("offline",()=>{this.connectionState===sn.CONNECTED&&this.reconnect("retry",Wr.OFFLINE)}),this.p2pToken=cn(6,""),this._external_signal=new Od(this,this.p2pToken)}async request(t,n,r,i){const o=cn(6,""),a={_id:o,_type:t,_message:n},s=this.websocket.connectionID,c=()=>new _e((g,p)=>{if(this.connectionState===sn.CONNECTED)return g();const m=()=>{this.off(qe.WS_CLOSED,_),g()},_=()=>{this.off(qe.WS_CONNECTED,m),p(new Q(k.WS_ABORT))};this.once(qe.WS_CONNECTED,m),this.once(qe.WS_CLOSED,_)});if(this.connectionState!==sn.CONNECTING&&this.connectionState!==sn.RECONNECTING||t===Ke.JOIN||t===Ke.REJOIN||await c(),this.websocket.sendMessage(a,!0),i)return;const l=new _e((g,p)=>{let m=!1;const _=(S,C)=>{m=!0,g({isSuccess:S==="success",message:C||{}}),this.off(qe.WS_CLOSED,E),this.off(qe.WS_RECONNECTING,E),this.emit(qe.REQUEST_SUCCESS,t,n)};this.once("res-@".concat(o),_);const E=()=>{p(new Q(k.WS_ABORT,"type: ".concat(t))),this.off(qe.WS_CLOSED,E),this.off(qe.WS_RECONNECTING,E),this.off("res-@".concat(o),_)};this.once(qe.WS_CLOSED,E),this.once(qe.WS_RECONNECTING,E),Lr(H("SIGNAL_REQUEST_TIMEOUT")).then(()=>{this.websocket.connectionID!==s||m||(w.warning("[".concat(this.clientId,"] ws request timeout, type: ").concat(t)),this.emit(qe.REQUEST_TIMEOUT,t,n))})});let u=null;try{u=await l}catch(g){if(this.connectionState===sn.CLOSED||t===Ke.LEAVE)throw new Q(k.WS_ABORT);return!this.spec.forceWaitGatewayResponse||r?g.throw():t===Ke.JOIN||t===Ke.REJOIN?null:(await c(),await this.request(t,n))}if(u.isSuccess)return u.message;const d=Number(u.message.error_code||u.message.code),h=T0(d),f=new Q(k.UNEXPECTED_RESPONSE,"".concat(h.desc,": ").concat(u.message.error_str),{code:d,data:u.message,desc:h.desc});return h.action==="success"?u.message:(w.warning("[".concat(this.clientId,"] [").concat(this.websocket.connectionID,"] unexpected response from type ").concat(t,", error_code: ").concat(d,", message: ").concat(h.desc,", action: ").concat(h.action)),d===$e.ERR_TOO_MANY_BROADCASTERS?((t===Ke.JOIN||t===Ke.REJOIN)&&(this.initError=f,this.close()),f.throw()):h.action==="failed"?f.throw():h.action==="quit"?(this.initError=f,this.close(),f.throw()):(d===$e.ERR_JOIN_BY_MULTI_IP?(this.multiIpOption=u.message.option,w.warning("[".concat(this.clientId,"] detect multi ip, recover")),this.reconnect("recover",Wr.MULTI_IP)):this.reconnect(h.action,Wr.SERVER_ERROR),t===Ke.JOIN||t===Ke.REJOIN?null:await this.request(t,n)))}waitMessage(t,n){return new _e(r=>{const i=o=>{(!n||n(o))&&(this.off(t,i),r(o))};this.on(t,i)})}uploadWRTCStats(t){if(!this.store.sessionId)return void w.warn("[".concat(this.clientId,"] no session id when upload wrtc stats"));const n={lts:Date.now(),sid:this.store.sessionId,uid:this.store.intUid,stats:t};this.upload(b0.WRTC_STATS,n)}upload(t,n){const r={_type:t,_message:n};try{this.websocket.sendMessage(r)}catch{const o=H("MAX_UPLOAD_CACHE")||50;this.uploadCache.push(r),this.uploadCache.length>o&&this.uploadCache.splice(0,1),this.uploadCache.length>0&&!this.uploadCacheInterval&&(this.uploadCacheInterval=window.setInterval(()=>{if(this.connectionState!==sn.CONNECTED)return;const a=this.uploadCache.splice(0,1)[0];this.uploadCache.length===0&&(window.clearInterval(this.uploadCacheInterval),this.uploadCacheInterval=void 0),this.upload(a._type,a._message)},H("UPLOAD_CACHE_INTERVAL")||2e3))}}send(t,n){const r={_type:t,_message:n};this.websocket.sendMessage(r)}async sendExtensionMessage(t,n,r){return await this._external_signal.send(t,n,r)}init(t){return this.initError=void 0,this.multiIpOption=void 0,this.joinResponse=void 0,this.reconnectToken=void 0,this.openConnectionTime=void 0,new _e((n,r)=>{this.once(qe.WS_CONNECTED,()=>n(this.joinResponse)),this.once(qe.WS_CLOSED,()=>r(this.initError||new Q(k.WS_ABORT))),this.connectionState=sn.CONNECTING,this.websocket.init(t).catch(r)})}close(t){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.reconnectToken=void 0,this.joinResponse=void 0,this._external_signal.clear(),this._disconnectedReason=t||Xt.LEAVE,this.connectionState=sn.CLOSED,w.debug("[".concat(this.clientId,"] ")+"will close websocket in signal"),this.websocket.close(),this.p2pToken=cn(6,""),this._external_signal.clear(),this._external_signal=new Od(this,this.p2pToken)}async join(){if(!this.joinResponse){this.emit(qe.ABORT_P2P_EXECUTION);const t=await Kr(this,qe.REQUEST_JOIN_INFO),n=await this.request(Ke.JOIN,t);if(!n)return this.emit(qe.REPORT_JOIN_GATEWAY,k.TIMEOUT,this.url||""),!1;this.joinResponse=n,this.emit(qe.JOIN_RESPONSE,this.joinResponse),this.reconnectToken=this.joinResponse.rejoin_token}return this.connectionState=sn.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),!0}reconnect(t,n){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.websocket.reconnect(t,n)}handleDataStream(t){try{var n;const r=od(t.payload),i=new TextDecoder().decode(r),o=JSON.parse(i);"total"in o&&"id"in o||Ce(n=Object.values(Hn)).call(n,o._type)?(o._uid=t.uid,this._external_signal.onMessage(o)):this.emit(pt.ON_DATA_STREAM,t)}catch{this.emit(pt.ON_DATA_STREAM,t)}}handleNotification(t){w.debug("[".concat(this.clientId,"] receive notification: "),t);const n=T0(t.code);if(n.action!=="success"){if(n.action!=="failed")return n.action==="quit"?(n.desc==="ERR_REPEAT_JOIN_CHANNEL"&&this.close(Xt.UID_BANNED),void this.close()):void this.reconnect(n.action,Wr.SERVER_ERROR);w.error("[".concat(this.clientId,"] ignore error: "),n.desc)}}handlePingPong(){if(!this.websocket||this.websocket.state!=="connected")return;this.pingpongTimeoutCount>0&&this.rttRolling.add(3e3),this.pingpongTimeoutCount+=1;const t=H("PING_PONG_TIME_OUT"),n=Date.now();this.pingpongTimeoutCount>=t&&(w.warning("[".concat(this.clientId,"] PINGPONG Timeout. Last Socket Message: ").concat(n-this.lastMsgTime,"ms")),n-this.lastMsgTime>H("WEBSOCKET_TIMEOUT_MIN"))?this.reconnect("retry",Wr.TIMEOUT):this.request(Ke.PING,void 0,!0).then(()=>{this.pingpongTimeoutCount=0;const r=Date.now()-n;this.rttRolling.add(r),H("REPORT_STATS")&&this.send(Ke.PING_BACK,{pingpongElapse:r})}).catch(r=>{})}handleWebsocketEvents(){this.websocket.on(Ye.RECONNECT_WAITTING_FINISH,t=>{this.emit(qe.WS_RECONNECT_WAITTING_FINISH,t)}),this.websocket.on(Ye.RECONNECT_CREATE_CONNECTION,t=>{this.emit(qe.WS_RECONNECT_CREATE_CONNECTION,t)}),this.websocket.on(Ye.ON_MESSAGE,this.onWebsocketMessage),this.websocket.on(Ye.CLOSED,()=>{this.connectionState=sn.CLOSED}),this.websocket.on(Ye.FAILED,()=>{this._disconnectedReason=Xt.NETWORK_ERROR,this.connectionState=sn.CLOSED}),this.websocket.on(Ye.RECONNECTING,t=>{this._websocketReconnectReason=t,this.joinResponse=void 0,this.connectionState===sn.CONNECTED?this.connectionState=sn.RECONNECTING:this.connectionState=sn.CONNECTING}),this.websocket.on(Ye.WILL_RECONNECT,(t,n,r)=>{t!=="retry"?(w.debug("".concat(this.clientId," websocket will_connect event, renewSession reconnectMode is ").concat(t)),this.reconnectToken=void 0):w.debug("".concat(this.clientId," reconnect mode is retry, no need to renew session")),r(t)}),this.websocket.on(Ye.CONNECTED,()=>{this.openConnectionTime=Date.now(),this.join().catch(t=>{if(this.emit(qe.REPORT_JOIN_GATEWAY,t,this.url||""),t instanceof Q&&t.code===k.UNEXPECTED_RESPONSE&&t.data.code===$e.ERR_NO_AUTHORIZED)return w.warning("[".concat(this.clientId,"] reconnect no authorized, recover")),void this.reconnect("recover",Wr.SERVER_ERROR);w.error("[".concat(this.clientId,"] join gateway request failed"),t.toString()),this.spec.forceWaitGatewayResponse?this.reconnect("tryNext",Wr.SERVER_ERROR):(this.initError=t,this.close())})}),this.websocket.on(Ye.REQUEST_NEW_URLS,(t,n)=>{Kr(this,qe.REQUEST_RECOVER,this.multiIpOption).then(t).catch(n)}),this.websocket.on(Ye.ON_TOKEN_PRIVILEGE_DID_EXPIRE,()=>{this.emit(pt.ON_TOKEN_PRIVILEGE_DID_EXPIRE)})}}var j9={exports:{}};j9.exports=(()=>{var e={8:(r,i,o)=>{o.r(i),o.d(i,{Parser:()=>O,Printer:()=>V,parse:()=>D,print:()=>j});const a=`
`,s="".concat("\r").concat(a),c=" ";let l;function u(F){return F>="0"&&F<="9"}function d(F){return F>="!"&&F<="~"}function h(F){return d(F)||F>=""&&F<="ÿ"}function f(F){return F==="!"||F>="#"&&F<="'"||F>="*"&&F<="+"||F>="-"&&F<="."||F>="0"&&F<="9"||F>="A"&&F<="Z"||F>="^"&&F<="~"}function g(F){return F>="1"&&F<="9"}function p(F){return F>="A"&&F<="Z"||F>="a"&&F<="z"}function m(F){return F==="d"||F==="h"||F==="m"||F==="s"}function _(F){return F>""&&F<"	"||F>"\v"&&F<"\f"||F>""&&F<"ÿ"}function E(F){return p(F)||u(F)||F==="+"||F==="/"}function S(F){return u(F)||p(F)||F==="+"||F==="/"||F==="-"||F==="_"}function C(F){return p(F)||u(F)||F==="+"||F==="/"}function b(F,y){var I=Object.keys(F);if(Object.getOwnPropertySymbols){var N=Object.getOwnPropertySymbols(F);y&&(N=N.filter(function(B){return Object.getOwnPropertyDescriptor(F,B).enumerable})),I.push.apply(I,N)}return I}function T(F){for(var y=1;y<arguments.length;y++){var I=arguments[y]!=null?arguments[y]:{};y%2?b(Object(I),!0).forEach(function(N){R(F,N,I[N])}):Object.getOwnPropertyDescriptors?Object.defineProperties(F,Object.getOwnPropertyDescriptors(I)):b(Object(I)).forEach(function(N){Object.defineProperty(F,N,Object.getOwnPropertyDescriptor(I,N))})}return F}function R(F,y,I){return y in F?Object.defineProperty(F,y,{value:I,enumerable:!0,configurable:!0,writable:!0}):F[y]=I,F}(function(F){F.VERSION="v",F.ORIGIN="o",F.SESSION_NAME="s",F.INFORMATION="i",F.URI="u",F.EMAIL="e",F.PHONE="p",F.CONNECTION="c",F.BANDWIDTH="b",F.TIME="t",F.REPEAT="r",F.ZONE_ADJUSTMENTS="z",F.KEY="k",F.ATTRIBUTE="a",F.MEDIA="m"})(l||(l={}));class A{consumeText(y,I){let N=I;for(;N<y.length;){const B=y[N];if(B==="\0"||B==="\r"||B===a)break;N+=1}if(N-I==0)throw new Error("Invalid text, at ".concat(y));return N}consumeUnicastAddress(y,I,N){return this.consumeTill(y,I,c)}consumeOneOrMore(y,I,N){let B=I;for(;N(y[B]);)B++;if(B-I==0)throw new Error("Invalid rule at ".concat(I,"."));return B}consumeSpace(y,I){if(y[I]===c)return I+1;throw new Error("Invalid space at ".concat(I,"."))}consumeIP4Address(y,I){let N=I;for(let B=0;B<4;B++)if(N=this.consumeDecimalUChar(y,N),B!==3){if(y[N]!==".")throw new Error("Invalid IP4 address.");N++}return N}consumeDecimalUChar(y,I){let N=I;for(let K=0;K<3&&u(y[N]);K++,N++);if(N-I==0)throw new Error("Invalid decimal uchar.");const B=parseInt(y.slice(I,N));if(B>=0&&B<=255)return N;throw new Error("Invalid decimal uchar")}consumeIP6Address(y,I){let N=this.consumeHexpart(y,I);return y[N]===":"&&(N+=1,N=this.consumeIP4Address(y,N)),N}consumeHexpart(y,I){let N=I;if(y[N]===":"&&y[N+1]===":"){N+=2;try{N=this.consumeHexseq(y,N)}catch{}return N}if(N=this.consumeHexseq(y,N),y[N]===":"&&y[N+1]===":"){N+=2;try{N=this.consumeHexseq(y,N)}catch{}return N}return N}consumeHexseq(y,I){let N=I;for(;N=this.consumeHex4(y,N),y[N]===":"&&y[N+1]!==":";)N+=1;return N}consumeHex4(y,I){let N=0;for(;N<4;N++)if(!((B=y[I+N])>="0"&&B<="9"||B>="a"&&B<="f"||B>="A"&&B<="F")){if(N===0)throw new Error("Invalid hex 4");break}var B;return I+N}consumeFQDN(y,I){let N=I;for(;u(y[N])||p(y[N])||y[N]==="-"||y[N]===".";)N+=1;if(N-I<4)throw new Error("Invalid FQDN");return N}consumeExtnAddr(y,I){return this.consumeOneOrMore(y,I,h)}consumeMulticastAddress(y,I,N){switch(N){case"IP4":case"ip4":return this.consumeIP4MulticastAddress(y,I);case"IP6":case"ip6":return this.consumeIP6MulticastAddress(y,I);default:try{return this.consumeFQDN(y,I)}catch{return this.consumeExtnAddr(y,I)}}}consumeIP6MulticastAddress(y,I){const N=this.consumeHexpart(y,I);return y[N]==="/"?this.consumeInteger(y,N+1):N}consumeIP4MulticastAddress(y,I){let N=I+3;const B=y.slice(I,N),K=parseInt(B);if(K<224||K>239)throw new Error("Invalid IP4 multicast address, IPv4 multicast addresses may be in the range 224.0.0.0 to 239.255.255.255.");for(let X=0;X<3;X++){if(y[N]!==".")throw new Error("Invalid IP4 multicast address.");N+=1,N=this.consumeDecimalUChar(y,N)}return y[N]==="/"&&(N+=1),N=this.consumeTTL(y,N),y[N]==="/"&&(N=this.consumeInteger(y,N)),N}consumeInteger(y,I){if(!g(y[I]))throw new Error("Invalid integer.");for(I+=1;u(y[I]);)I+=1;return I}consumeTTL(y,I){if(y[I]==="0")return I+1;if(!g(y[I]))throw new Error("Invalid TTL.");I+=1;for(let N=0;N<2&&u(y[I]);N++)I+=1;return I}consumeToken(y,I){return this.consumeOneOrMore(y,I,f)}consumeTime(y,I){let N=I;if(y[N]==="0")return N+1;for(g(y[N])&&(N+=1);u(y[N]);)N++;if(N-I<10)throw new Error("Invalid time");return N}consumeAddress(y,I){return this.consumeTill(y,I,c)}consumeTypedTime(y,I){let N=I;return N=this.consumeOneOrMore(y,N,u),m(y[N])?N+1:N}consumeRepeatInterval(y,I){if(!g(y[I]))throw new Error("Invalid repeat interval");for(I+=1;u(y[I]);)I+=1;return m(y[I])&&(I+=1),I}consumePort(y,I){return this.consumeOneOrMore(y,I,u)}consume(y,I,N){for(let B=0;B<N.length;B++){if(I+B>=y.length)throw new Error("consume exceeding value length");if(y[I+B]!==N[B])throw new Error("consume ".concat(N," failed at ").concat(B))}return I+N.length}consumeTill(y,I,N){let B=I;for(;B<y.length&&(typeof N!="string"||y[B]!==N)&&(typeof N!="function"||!N(y[B]));)B++;return B}}class O extends A{constructor(){super(),R(this,"records",[]),R(this,"currentLine",0)}parse(y){const I=this.probeEOL(y);this.records=y.split(I).filter(ge=>!!yi(ge).call(ge)).map(this.parseLine),this.currentLine=0;const N=this.parseVersion(),B=this.parseOrigin(),K=this.parseSessionName(),X=this.parseInformation(),ee=this.parseUri(),ne=this.parseEmail(),fe=this.parsePhone(),ae=this.parseConnection(),oe=this.parseBandWidth(),he=this.parseTimeFields(),me=this.parseKey(),ie=this.parseSessionAttribute(),te=this.parseMediaDescription();if(this.currentLine!==this.records.length)throw new Error("parsing failed, non exhaustive sdp lines.");return{version:N,origin:B,sessionName:K,information:X,uri:ee,emails:ne,phones:fe,connection:ae,bandwidths:oe,timeFields:he,key:me,attributes:ie,mediaDescriptions:te}}getCurrentRecord(){const y=this.records[this.currentLine];if(!y)throw new Error("Record doesn't exit.");return y}probeEOL(y){for(let I=0;I<y.length;I++)if(y[I]===a)return y[I-1]==="\r"?s:a;throw new Error("Invalid newline character.")}parseLine(y,I){if(y.length<2)throw new Error("Invalid sdp line, sdp line should be of form <type>=<value>.");const N=y[0];if(y[1]!=="=")throw new Error('Invalid sdp line, <type> should be a single character followed by an "=" sign.');return{type:N,value:y.slice(2),line:I,cur:0}}parseSessionAttribute(){const y=new M;for(;this.currentLine<this.records.length;){const I=this.getCurrentRecord();if(I.type!==l.ATTRIBUTE)break;const N={attField:this.extractOneOrMore(I,B=>f(B)&&B!==":"),_cur:0};I.value[I.cur]===":"&&(I.cur+=1,N.attValue=this.extractOneOrMore(I,_)),y.parse(N),this.currentLine++}return y.digest()}parseMediaAttributes(y){const I=new $(y);for(;this.currentLine<this.records.length;){const N=this.getCurrentRecord();if(N.type!==l.ATTRIBUTE)break;const B={attField:this.extractOneOrMore(N,K=>f(K)&&K!==":"),_cur:0};N.value[N.cur]===":"&&(N.cur+=1,B.attValue=this.extractOneOrMore(N,_)),I.parse(B),this.currentLine++}return I.digest()}parseKey(){const y=this.getCurrentRecord();if(y.type===l.KEY){if(y.value==="prompt"||y.value==="clear:"||y.value==="base64:"||y.value==="uri:")return y.value;throw this.currentLine++,new Error("Invalid key.")}}parseZone(){const y=this.getCurrentRecord();if(y.type===l.ZONE_ADJUSTMENTS){const I=[];for(;;)try{const N=this.extract(y,this.consumeTime);this.consumeSpaceForRecord(y);let B=!1;y.value[y.cur]==="-"&&(B=!0,y.cur+=1);const K=this.extract(y,this.consumeTypedTime);I.push({time:N,typedTime:K,back:B})}catch{break}if(I.length===0)throw new Error("Invalid zone adjustments");return this.currentLine++,I}return[]}parseRepeat(){const y=[];for(;;){const I=this.getCurrentRecord();if(I.type!==l.REPEAT)break;{const N=this.extract(I,this.consumeRepeatInterval),B=this.parseTypedTime(I);y.push({repeatInterval:N,typedTimes:B}),this.currentLine++}}return y}parseTypedTime(y){const I=[];for(;;)try{this.consumeSpaceForRecord(y),I.push(this.extract(y,this.consumeTypedTime))}catch{break}if(I.length===0)throw new Error("Invalid typed time.");return I}parseTime(){const y=this.getCurrentRecord(),I=this.extract(y,this.consumeTime);this.consumeSpaceForRecord(y);const N=this.extract(y,this.consumeTime);return this.currentLine++,{startTime:I,stopTime:N}}parseBandWidth(){const y=[];for(;this.currentLine<this.records.length;){const I=this.getCurrentRecord();if(I.type!==l.BANDWIDTH)break;{const N=this.extractOneOrMore(I,f);if(I.value[I.cur]!==":")throw new Error("Invalid bandwidth field.");I.cur++;const B=this.extractOneOrMore(I,u);y.push({bwtype:N,bandwidth:B}),this.currentLine++}}return y}parseVersion(){const y=this.getCurrentRecord();if(y.type!==l.VERSION)throw new Error("first sdp record must be version");const I=y.value.slice(0,this.consumeOneOrMore(y.value,0,u));if(I.length!==y.value.length)throw new Error('invalid proto version, "v='.concat(y.value,'"'));return this.currentLine++,I}parseOrigin(){const y=this.getCurrentRecord();if(y.type!==l.ORIGIN)throw new Error("second line of sdp must be origin");const I=this.extractOneOrMore(y,h);this.consumeSpaceForRecord(y);const N=this.extractOneOrMore(y,u);this.consumeSpaceForRecord(y);const B=this.extractOneOrMore(y,u);this.consumeSpaceForRecord(y);const K=this.extractOneOrMore(y,f);this.consumeSpaceForRecord(y);const X=this.extractOneOrMore(y,f);this.consumeSpaceForRecord(y);const ee=this.extract(y,this.consumeUnicastAddress);return this.currentLine++,{username:I,sessId:N,sessVersion:B,nettype:K,addrtype:X,unicastAddress:ee}}parseSessionName(){const y=this.getCurrentRecord();if(y.type===l.SESSION_NAME){const I=this.extract(y,this.consumeText);return this.currentLine++,I}}parseInformation(){const y=this.getCurrentRecord();if(y.type!==l.INFORMATION)return;const I=this.extract(y,this.consumeText);return this.currentLine++,I}parseUri(){const y=this.getCurrentRecord();if(y.type===l.URI)return this.currentLine++,y.value}parseEmail(){const y=[];for(;;){const I=this.getCurrentRecord();if(I.type!==l.EMAIL)break;y.push(I.value),this.currentLine++}return y}parsePhone(){const y=[];for(;;){const I=this.getCurrentRecord();if(I.type!==l.PHONE)break;y.push(I.value),this.currentLine++}return y}parseConnection(){const y=this.getCurrentRecord();if(y.type===l.CONNECTION){const I=this.extractOneOrMore(y,f);this.consumeSpaceForRecord(y);const N=this.extractOneOrMore(y,f);this.consumeSpaceForRecord(y);const B=this.extract(y,this.consumeAddress);return this.currentLine++,{nettype:I,addrtype:N,address:B}}}parseMedia(){const y=this.getCurrentRecord(),I=this.extract(y,this.consumeToken);this.consumeSpaceForRecord(y);let N=this.extract(y,this.consumePort);y.value[y.cur]==="/"&&(y.cur+=1,N+=this.extract(y,this.consumeInteger)),this.consumeSpaceForRecord(y);const B=[];for(B.push(this.extract(y,this.consumeToken));y.value[y.cur]==="/";)y.cur+=1,B.push(this.extract(y,this.consumeToken));if(B.length===0)throw new Error("Invalid proto");const K=this.parseFmt(y);return this.currentLine++,{mediaType:I,port:N,protos:B,fmts:K}}parseTimeFields(){const y=[];for(;this.getCurrentRecord().type===l.TIME;){const I=this.parseTime(),N=this.parseRepeat(),B=this.parseZone();y.push({time:I,repeats:N,zones:B})}return y}parseMediaDescription(){const y=[];for(;this.currentLine<this.records.length&&this.getCurrentRecord().type===l.MEDIA;){const I=this.parseMedia(),N=this.parseInformation(),B=this.parseConnections(),K=this.parseBandWidth(),X=this.parseKey(),ee=this.parseMediaAttributes(I);y.push({media:I,information:N,connections:B,bandwidths:K,key:X,attributes:ee})}return y}parseConnections(){const y=[];for(;this.currentLine<this.records.length&&this.getCurrentRecord().type===l.CONNECTION;)y.push(this.parseConnection());return y}parseFmt(y){const I=[];for(;;)try{this.consumeSpaceForRecord(y),I.push(this.extract(y,this.consumeToken))}catch{break}if(I.length===0)throw new Error("Invalid fmts");return I}extract(y,I){for(var N=arguments.length,B=new Array(N>2?N-2:0),K=2;K<N;K++)B[K-2]=arguments[K];const X=I.call(this,y.value,y.cur,...B),ee=y.value.slice(y.cur,X);return y.cur=X,ee}extractOneOrMore(y,I){const N=this.consumeOneOrMore(y.value,y.cur,I),B=y.value.slice(y.cur,N);return y.cur=N,B}consumeSpaceForRecord(y){if(y.value[y.cur]!==c)throw new Error("Invalid space at ".concat(y.cur,"."));y.cur+=1}}class x extends A{constructor(){super(...arguments),R(this,"attributes",void 0),R(this,"digested",!1)}extractOneOrMore(y,I,N){const B=this.consumeOneOrMore(y.attValue,y._cur,I),K=y.attValue.slice(y._cur,B),[X,ee]=N||[];if(typeof X=="number"&&K.length<X)throw new Error("error in length, should be more or equal than ".concat(X," characters."));if(typeof ee=="number"&&K.length>ee)throw new Error("error in length, should be less or equal than ".concat(ee," characters."));return y._cur=B,K}consumeAttributeSpace(y){if(y.attValue[y._cur]!==c)throw new Error("Invalid space at ".concat(y._cur,"."));y._cur+=1}extract(y,I){if(!y.attValue)throw new Error("Nothing to extract from attValue.");for(var N=arguments.length,B=new Array(N>2?N-2:0),K=2;K<N;K++)B[K-2]=arguments[K];const X=I.call(this,y.attValue,y._cur,...B),ee=y.attValue.slice(y._cur,X);return y._cur=X,ee}atEnd(y){if(!y.attValue)throw new Error;return y._cur>=y.attValue.length}peekChar(y){if(!y.attValue)throw new Error;return y.attValue[y._cur]}peek(y,I){if(!y.attValue)throw new Error;for(let N=0;N<I.length;N++)if(I[N]!==y.attValue[y._cur+N])return!1;return!0}parseIceUfrag(y){if(this.attributes.iceUfrag)throw new Error("Invalid ice-ufrag, should be only a single line if 'a=ice-ufrag'");this.attributes.iceUfrag=this.extractOneOrMore(y,E,[4,256])}parseIcePwd(y){if(this.attributes.icePwd)throw new Error("Invalid ice-pwd, should be only a single line if 'a=ice-pwd'");this.attributes.icePwd=this.extractOneOrMore(y,E,[22,256])}parseIceOptions(y){if(this.attributes.iceOptions)throw new Error("Invalid ice-options, should be only one 'ice-options' line");const I=[];for(;!this.atEnd(y);){I.push(this.extractOneOrMore(y,E));try{this.consumeAttributeSpace(y)}catch(N){if(this.atEnd(y))break;throw N}}this.attributes.iceOptions=I}parseFingerprint(y){const I=this.extract(y,this.consumeToken);this.consumeAttributeSpace(y);const N=this.extract(y,this.consumeTill);this.attributes.fingerprints.push({hashFunction:I,fingerprint:N})}parseExtmap(y){const I=this.extractOneOrMore(y,u);let N;this.peekChar(y)==="/"&&(this.extract(y,this.consume,"/"),N=this.extract(y,this.consumeToken)),this.consumeAttributeSpace(y);const B=this.extract(y,this.consumeTill,c),K=T(T({entry:parseInt(I,10)},N&&{direction:N}),{},{extensionName:B});this.peekChar(y)===c&&(this.consumeAttributeSpace(y),K.extensionAttributes=this.extract(y,this.consumeTill)),this.attributes.extmaps.push(K)}parseSetup(y){if(this.attributes.setup)throw new Error("must only be one single 'a=setup' line.");const I=this.extract(y,this.consumeTill);if(I!=="active"&&I!=="passive"&&I!=="actpass"&&I!=="holdconn")throw new Error("role must be one of 'active', 'passive', 'actpass', 'holdconn'.");this.attributes.setup=I}}class M extends x{constructor(){super(...arguments),R(this,"attributes",{unrecognized:[],groups:[],extmaps:[],fingerprints:[],identities:[]})}parse(y){if(this.digested)throw new Error("already digested");try{switch(y.attField){case"group":this.parseGroup(y);break;case"ice-lite":this.parseIceLite();break;case"ice-ufrag":this.parseIceUfrag(y);break;case"ice-pwd":this.parseIcePwd(y);break;case"ice-options":this.parseIceOptions(y);break;case"fingerprint":this.parseFingerprint(y);break;case"setup":this.parseSetup(y);break;case"tls-id":this.parseTlsId(y);break;case"identity":this.parseIdentity(y);break;case"extmap":this.parseExtmap(y);break;case"msid-semantic":this.parseMsidSemantic(y);break;default:y.ignored=!0,this.attributes.unrecognized.push(y)}}catch(I){throw console.error("parsing session attribute ".concat(y.attField,' error, "a=').concat(y.attField,":").concat(y.attValue,'"')),I}if(!y.ignored&&y.attValue&&!this.atEnd(y))throw new Error("attribute parsing error")}digest(){return this.digested=!0,this.attributes}parseGroup(y){const I=this.extract(y,this.consumeToken),N=[];for(;!this.atEnd(y)&&this.peekChar(y)===c;)this.consumeAttributeSpace(y),N.push(this.extract(y,this.consumeToken));this.attributes.groups.push({semantic:I,identificationTag:N})}parseIceLite(){if(this.attributes.iceLite)throw new Error("Invalid ice-lite, should be only a single line of 'a=ice-lite'");this.attributes.iceLite=!0}parseTlsId(y){if(this.attributes.tlsId)throw new Error("must be only one tld-id line");this.attributes.tlsId=this.extractOneOrMore(y,S)}parseIdentity(y){const I=this.extractOneOrMore(y,C),N=[];for(;!this.atEnd(y)&&this.peekChar(y)===c;){this.consumeAttributeSpace(y);const B=this.extract(y,this.consumeToken);this.extract(y,this.consume,"=");const K=this.extractOneOrMore(y,X=>X!==c&&_(X));N.push({name:B,value:K})}this.attributes.identities.push({assertionValue:I,extensions:N})}parseMsidSemantic(y){this.peekChar(y)===c&&this.consumeAttributeSpace(y);const I={semantic:this.extract(y,this.consumeToken),identifierList:[]};for(;;){try{this.consumeAttributeSpace(y)}catch{break}if(this.peekChar(y)==="*"){this.extract(y,this.consume,"*"),I.applyForAll=!0;break}{const N=this.extract(y,this.consumeTill,c);I.identifierList.push(N)}}this.attributes.msidSemantic=I}}class $ extends x{constructor(y){super(),R(this,"attributes",void 0),y.protos.indexOf("RTP")!==-1||y.protos.indexOf("rtp"),this.attributes={unrecognized:[],candidates:[],extmaps:[],fingerprints:[],imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:[],ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:[]}}parse(y){if(this.digested)throw new Error("already digested");try{switch(y.attField){case"extmap":this.parseExtmap(y);break;case"setup":this.parseSetup(y);break;case"ice-ufrag":this.parseIceUfrag(y);break;case"ice-pwd":this.parseIcePwd(y);break;case"ice-options":this.parseIceOptions(y);break;case"candidate":this.parseCandidate(y);break;case"remote-candidate":this.parseRemoteCandidate(y);break;case"end-of-candidates":this.parseEndOfCandidates();break;case"fingerprint":this.parseFingerprint(y);break;case"rtpmap":this.parseRtpmap(y);break;case"ptime":this.parsePtime(y);break;case"maxptime":this.parseMaxPtime(y);break;case"sendrecv":case"recvonly":case"sendonly":case"inactive":this.parseDirection(y);break;case"ssrc":this.parseSSRC(y);break;case"fmtp":this.parseFmtp(y);break;case"rtcp-fb":this.parseRtcpFb(y);break;case"rtcp-mux":this.parseRTCPMux();break;case"rtcp-mux-only":this.parseRTCPMuxOnly();break;case"rtcp-rsize":this.parseRTCPRsize();break;case"rtcp":this.parseRTCP(y);break;case"mid":this.parseMid(y);break;case"msid":this.parseMsid(y);break;case"imageattr":this.parseImageAttr(y);break;case"rid":this.parseRid(y);break;case"simulcast":this.parseSimulcast(y);break;case"sctp-port":this.parseSctpPort(y);break;case"max-message-size":this.parseMaxMessageSize(y);break;case"ssrc-group":this.parseSSRCGroup(y);break;default:y.ignored=!0,this.attributes.unrecognized.push(y)}}catch(I){throw console.error("parsing media attribute ".concat(y.attField,' error, "a=').concat(y.attField,":").concat(y.attValue,'"')),I}if(!y.ignored&&y.attValue&&!this.atEnd(y))throw new Error("attribute parsing error")}parseCandidate(y){const I=this.extractOneOrMore(y,E,[1,32]);this.consumeAttributeSpace(y);const N=this.extractOneOrMore(y,u,[1,5]);this.consumeAttributeSpace(y);const B=this.extract(y,this.consumeToken);this.consumeAttributeSpace(y);const K=this.extractOneOrMore(y,u,[1,10]);this.consumeAttributeSpace(y);const X=this.extract(y,this.consumeAddress);this.consumeAttributeSpace(y);const ee=this.extract(y,this.consumePort);this.consumeAttributeSpace(y),this.extract(y,this.consume,"typ"),this.consumeAttributeSpace(y);const ne={foundation:I,componentId:N,transport:B,priority:K,connectionAddress:X,port:ee,type:this.extract(y,this.consumeToken),extension:{}};for(this.peek(y," raddr")&&(this.extract(y,this.consume," raddr"),this.consumeAttributeSpace(y),ne.relAddr=this.extract(y,this.consumeAddress)),this.peek(y," rport")&&(this.extract(y,this.consume," rport"),this.consumeAttributeSpace(y),ne.relPort=this.extract(y,this.consumePort));this.peekChar(y)===c;){this.consumeAttributeSpace(y);const fe=this.extract(y,this.consumeToken);this.consumeAttributeSpace(y),ne.extension[fe]=this.extractOneOrMore(y,d)}this.attributes.candidates.push(ne)}parseRemoteCandidate(y){const I=[];for(;;){const N=this.extractOneOrMore(y,u,[1,5]);this.consumeAttributeSpace(y);const B=this.extract(y,this.consumeAddress);this.consumeAttributeSpace(y);const K=this.extract(y,this.consumePort);I.push({componentId:N,connectionAddress:B,port:K});try{this.consumeAttributeSpace(y)}catch{break}}this.attributes.remoteCandidatesList.push(I)}parseEndOfCandidates(){if(this.attributes.endOfCandidates)throw new Error("must be only one line of end-of-candidates");this.attributes.endOfCandidates=!0}parseRtpmap(y){const I=this.extract(y,this.consumeToken);this.consumeAttributeSpace(y);const N=this.extract(y,this.consumeTill,"/");this.extract(y,this.consume,"/");const B={encodingName:N,clockRate:this.extractOneOrMore(y,u)};this.atEnd(y)||this.peekChar(y)!=="/"||(this.extract(y,this.consume,"/"),B.encodingParameters=parseInt(this.extract(y,this.consumeTill),10));const K=this.attributes.payloads.find(X=>X.payloadType===parseInt(I,10));K?K.rtpMap=B:this.attributes.payloads.push({payloadType:parseInt(I,10),rtpMap:B,rtcpFeedbacks:[]})}parsePtime(y){if(this.attributes.ptime)throw new Error("must be only one line of ptime");this.attributes.ptime=this.extract(y,this.consumeTill)}parseMaxPtime(y){if(this.attributes.maxPtime)throw new Error("must be only one line of ptime");this.attributes.maxPtime=this.extract(y,this.consumeTill)}parseDirection(y){if(this.attributes.direction)throw new Error("must be only one line of direction info");this.attributes.direction=y.attField}parseSSRC(y){const I=this.extractOneOrMore(y,u);this.consumeAttributeSpace(y);const N=this.extract(y,this.consumeTill,":");let B;this.peekChar(y)===":"&&(this.extract(y,this.consume,":"),B=this.extract(y,this.consumeTill));const K=this.attributes.ssrcs.find(X=>X.ssrcId===parseInt(I,10));K?K.attributes[N]=B:this.attributes.ssrcs.push({ssrcId:parseInt(I,10),attributes:{[N]:B}})}parseFmtp(y){const I=this.extract(y,this.consumeTill,c);this.consumeAttributeSpace(y);const N=this.extract(y,this.consumeTill),B={};N.split(";").forEach(X=>{let[ee,ne]=X.split("=");ee=yi(ee).call(ee);const fe=typeof ne=="string"?yi(ne).call(ne):null;typeof ee=="string"&&ee.length>0&&(B[ee]=fe)});const K=this.attributes.payloads.find(X=>X.payloadType===parseInt(I,10));K?K.fmtp={parameters:B}:this.attributes.payloads.push({payloadType:parseInt(I,10),rtcpFeedbacks:[],fmtp:{parameters:B}})}parseFmtParameters(y){const I={},N=this.extract(y,this.consumeTill,"=");y._cur++;const B=this.extract(y,this.consumeTill,";");for(I[N]=B;y.attValue[y._cur]===";";){const K=this.extract(y,this.consumeTill,"=");y._cur++;const X=this.extract(y,this.consumeTill,";");I[K]=X}return I}parseRtcpFb(y){let I="";I=this.peekChar(y)==="*"?this.extract(y,this.consume,"*"):this.extract(y,this.consumeTill,c),this.consumeAttributeSpace(y);const N=this.extract(y,this.consumeTill,c);let B;if(N==="trr-int")B={type:N,interval:this.extract(y,this.consumeTill)};else{const K={type:N};this.peekChar(y)===c&&(this.consumeAttributeSpace(y),K.parameter=this.extract(y,this.consumeToken),this.peekChar(y)===c&&(K.additional=this.extract(y,this.consumeTill))),B=K}if(I==="*")this.attributes.rtcpFeedbackWildcards.push(B);else{const K=this.attributes.payloads.find(X=>X.payloadType===parseInt(I,10));K?K.rtcpFeedbacks.push(B):this.attributes.payloads.push({payloadType:parseInt(I,10),rtcpFeedbacks:[B]})}}parseRTCPMux(){if(this.attributes.rtcpMux)throw new Error("must be single line of rtcp-mux");this.attributes.rtcpMux=!0}parseRTCPMuxOnly(){if(this.attributes.rtcpMuxOnly)throw new Error("must be single line of rtcp-only");this.attributes.rtcpMuxOnly=!0}parseRTCPRsize(){if(this.attributes.rtcpRsize)throw new Error("must be single line of rtcp-rsize");this.attributes.rtcpRsize=!0}parseRTCP(y){if(this.attributes.rtcp)throw new Error("must be single line of rtcp");const I={port:this.extract(y,this.consumePort)};this.peekChar(y)===c&&(this.consumeAttributeSpace(y),I.netType=this.extractOneOrMore(y,f),this.consumeAttributeSpace(y),I.addressType=this.extractOneOrMore(y,f),this.consumeAttributeSpace(y),I.address=this.extract(y,this.consumeAddress)),this.attributes.rtcp=I}parseMsid(y){const I={id:this.extractOneOrMore(y,f,[1,64])};this.peekChar(y)===c&&(this.consumeAttributeSpace(y),I.appdata=this.extractOneOrMore(y,f,[1,64])),this.attributes.msids.push(I)}parseImageAttr(y){this.attributes.imageattr.push(y.attValue)}parseRid(y){const I=this.extractOneOrMore(y,B=>p(B)||u(B)||B==="_"||B==="-");this.consumeAttributeSpace(y);const N={id:I,direction:this.extract(y,this.consumeToken),params:[]};if(this.peekChar(y)===c){if(this.consumeAttributeSpace(y),this.peek(y,"pt=")){this.extract(y,this.consume,"pt=");const B=[];for(;;){const K=this.extract(y,this.consumeToken);B.push(K);try{this.extract(y,this.consume,",")}catch{break}}N.payloads=B,this.peekChar(y)===c&&this.extract(y,this.consume,c)}for(;;){const B=this.extract(y,this.consumeToken);switch(B){case"depend":{const K={type:B,rids:this.extract(y,this.consume,"=").split(",")};N.params.push(K);break}default:{const K={type:B};this.peekChar(y)==="="&&(this.extract(y,this.consume,"="),K.val=this.extract(y,this.consumeTill,";")),N.params.push(K)}}try{this.extract(y,this.consume,";")}catch{break}}}this.attributes.rids.push(N)}parseSimulcast(y){if(this.attributes.simulcast)throw new Error("must be single line of simulcast");this.attributes.simulcast=y.attValue,this.extract(y,this.consumeTill)}parseSctpPort(y){this.attributes.sctpPort=this.extractOneOrMore(y,u,[1,5])}parseMaxMessageSize(y){this.attributes.maxMessageSize=this.extractOneOrMore(y,u,[1,void 0])}digest(){return this.digested=!0,this.attributes}parseMid(y){this.attributes.mid=this.extract(y,this.consumeToken)}parseSSRCGroup(y){const I=this.extract(y,this.consumeToken),N=[];for(;;)try{this.consumeAttributeSpace(y);const B=this.extract(y,this.consumeInteger);N.push(parseInt(B,10))}catch{break}this.attributes.ssrcGroups.push({semantic:I,ssrcIds:N})}}function U(F,y,I){return y in F?Object.defineProperty(F,y,{value:I,enumerable:!0,configurable:!0,writable:!0}):F[y]=I,F}class V{constructor(){U(this,"eol",s)}print(y,I){let N="";return I&&(this.eol=I),N+=this.printVersion(y.version),N+=this.printOrigin(y.origin),N+=this.printSessionName(y.sessionName),N+=this.printInformation(y.information),N+=this.printUri(y.uri),N+=this.printEmail(y.emails),N+=this.printPhone(y.phones),N+=this.printConnection(y.connection),N+=this.printBandwidth(y.bandwidths),N+=this.printTimeFields(y.timeFields),N+=this.printKey(y.key),N+=this.printSessionAttributes(y.attributes),N+=this.printMediaDescription(y.mediaDescriptions),N}printVersion(y){return"v=".concat(y).concat(this.eol)}printOrigin(y){return"o=".concat(y.username," ").concat(y.sessId," ").concat(y.sessVersion," ").concat(y.nettype," ").concat(y.addrtype," ").concat(y.unicastAddress).concat(this.eol)}printSessionName(y){return y?"s=".concat(y).concat(this.eol):""}printInformation(y){return y?"i=".concat(y).concat(this.eol):""}printUri(y){return y?"u=".concat(y).concat(this.eol):""}printEmail(y){let I="";for(const N of y)I+="e=".concat(N).concat(this.eol);return I}printPhone(y){let I="";for(const N of y)I+="e=".concat(N).concat(this.eol);return I}printConnection(y){return y?"c=".concat(y.nettype," ").concat(y.addrtype," ").concat(y.address).concat(this.eol):""}printBandwidth(y){let I="";for(const N of y)I+="b=".concat(N.bwtype,":").concat(N.bandwidth).concat(this.eol);return I}printTimeFields(y){let I="";for(const N of y){I+="t=".concat(N.time.startTime," ").concat(N.time.startTime).concat(this.eol);for(const B of N.repeats)I+="r=".concat(B.repeatInterval," ").concat(B.typedTimes.join(" ")).concat(this.eol);N.zoneAdjustments&&(I+="z=",I+="z=".concat(N.zoneAdjustments.map(B=>"".concat(B.time," ").concat(B.back?"-":""," ").concat(B.typedTime)).join(" ")).concat(this.eol),I+=this.eol)}return I}printKey(y){return y?"k=".concat(y).concat(this.eol):""}printAttributes(y){let I="";for(const N of y)I+="a=".concat(N.attField).concat(N.attValue?":".concat(N.attValue):"").concat(this.eol);return I}printMediaDescription(y){let I="";for(const N of y)I+=this.printMedia(N.media),I+=this.printInformation(N.information),I+=this.printConnections(N.connections),I+=this.printBandwidth(N.bandwidths),I+=this.printKey(N.key),I+=this.printMediaAttributes(N);return I}printConnections(y){let I="";for(const N of y)I+=this.printConnection(N);return I}printMedia(y){return"m=".concat(y.mediaType," ").concat(y.port," ").concat(y.protos.join("/")," ").concat(y.fmts.join(" ")).concat(this.eol)}printSessionAttributes(y){return new z(this.eol).print(y)}printMediaAttributes(y){return new L(this.eol).print(y)}}class W{constructor(y){U(this,"eol",void 0),this.eol=y}printIceUfrag(y){return y===void 0?"":"a=ice-ufrag:".concat(y).concat(this.eol)}printIcePwd(y){return y===void 0?"":"a=ice-pwd:".concat(y).concat(this.eol)}printIceOptions(y){return y===void 0?"":"a=ice-options:".concat(y.join(c)).concat(this.eol)}printFingerprints(y){return y.length>0?y.map(I=>"a=fingerprint:".concat(I.hashFunction).concat(c).concat(I.fingerprint)).join(this.eol)+this.eol:""}printExtmap(y){return y.map(I=>"a=extmap:".concat(I.entry).concat(I.direction?"/".concat(I.direction):"").concat(c).concat(I.extensionName).concat(I.extensionAttributes?"".concat(c).concat(I.extensionAttributes):"").concat(this.eol)).join("")}printSetup(y){return y===void 0?"":"a=setup:".concat(y).concat(this.eol)}printUnrecognized(y){return y.map(I=>"a=".concat(I.attField).concat(I.attValue?":".concat(I.attValue):"").concat(this.eol)).join("")}}class z extends W{print(y){let I="";return I+=this.printGroups(y.groups),I+=this.printMsidSemantic(y.msidSemantic),I+=this.printIceLite(y.iceLite),I+=this.printIceUfrag(y.iceUfrag),I+=this.printIcePwd(y.icePwd),I+=this.printIceOptions(y.iceOptions),I+=this.printFingerprints(y.fingerprints),I+=this.printSetup(y.setup),I+=this.printTlsId(y.tlsId),I+=this.printIdentity(y.identities),I+=this.printExtmap(y.extmaps),I+=this.printUnrecognized(y.unrecognized),I}printGroups(y){let I="";return y.length>0&&(I+=y.map(N=>"a=group:".concat(N.semantic).concat(N.identificationTag.map(B=>"".concat(c).concat(B)).join("")).concat(this.eol)).join("")),I}printIceLite(y){return y===void 0?"":"a=ice-lite"+this.eol}printTlsId(y){return y?"a=tls-id:".concat(y).concat(this.eol):""}printIdentity(y){return y.length===0?"":y.map(I=>"a=identity:".concat(I.assertionValue).concat(I.extensions.map(N=>"".concat(c).concat(N.name).concat(N.value?"=".concat(N.value):"")))).join(this.eol)+this.eol}printMsidSemantic(y){if(!y)return"";let I="a=msid-semantic:".concat(y.semantic);return y.applyForAll?I+="".concat(c,"*"):y.identifierList.length>0&&(I+=y.identifierList.map(N=>"".concat(c).concat(N))),I+this.eol}}class L extends W{print(y){const I=y.attributes;let N="";return N+=this.printRTCP(I.rtcp),N+=this.printIceUfrag(I.iceUfrag),N+=this.printIcePwd(I.icePwd),N+=this.printIceOptions(I.iceOptions),N+=this.printCandidates(I.candidates),N+=this.printRemoteCandidatesList(I.remoteCandidatesList),N+=this.printEndOfCandidates(I.endOfCandidates),N+=this.printFingerprints(I.fingerprints),N+=this.printSetup(I.setup),N+=this.printMid(I.mid),N+=this.printExtmap(I.extmaps),N+=this.printRTPRelated(I),N+=this.printPtime(I.ptime),N+=this.printMaxPtime(I.maxPtime),N+=this.printDirection(I.direction),N+=this.printSSRCGroups(I.ssrcGroups),N+=this.printSSRC(I.ssrcs),N+=this.printRTCPMux(I.rtcpMux),N+=this.printRTCPMuxOnly(I.rtcpMuxOnly),N+=this.printRTCPRsize(I.rtcpRsize),N+=this.printMSId(I.msids),N+=this.printImageattr(I.imageattr),N+=this.printRid(I.rids),N+=this.printSimulcast(I.simulcast),N+=this.printSCTPPort(I.sctpPort),N+=this.printMaxMessageSize(I.maxMessageSize),N+=this.printUnrecognized(I.unrecognized),N}printCandidates(y){return y.map(I=>"a=candidate:".concat(I.foundation).concat(c).concat(I.componentId).concat(c).concat(I.transport).concat(c).concat(I.priority).concat(c).concat(I.connectionAddress).concat(c).concat(I.port).concat(c,"typ").concat(c).concat(I.type).concat(I.relAddr?"".concat(c,"raddr").concat(c).concat(I.relAddr):"").concat(I.relPort?"".concat(c,"rport").concat(c).concat(I.relPort):"").concat(Object.keys(I.extension).map(N=>"".concat(c).concat(N).concat(c).concat(I.extension[N])).join("")).concat(this.eol)).join("")}printRemoteCandidatesList(y){return y.map(I=>"a=remote-candidates:".concat(I.join(c)).concat(this.eol)).join("")}printEndOfCandidates(y){return y===void 0?"":"a=end-of-candidates"+this.eol}printRTPRelated(y){if(!y.payloads)return"";const I=y.payloads;let N="";N+=y.rtcpFeedbackWildcards.map(B=>this.printRTCPFeedback("*",B)).join("");for(const B of I)N+=this.printRtpMap(B.payloadType,B.rtpMap),N+=this.printFmtp(B.payloadType,B.fmtp),N+=B.rtcpFeedbacks.map(K=>this.printRTCPFeedback(B.payloadType,K)).join("");return N}printFmtp(y,I){if(!I)return"";const N=Object.keys(I.parameters);return N.length===1&&I.parameters[N[0]]===null?"a=fmtp:".concat(y).concat(c).concat(N[0]).concat(this.eol):"a=fmtp:".concat(y).concat(c).concat(Object.keys(I.parameters).map(B=>"".concat(B,"=").concat(I.parameters[B])).join(";")).concat(this.eol)}printRtpMap(y,I){return I?"a=rtpmap:".concat(y).concat(c).concat(I.encodingName,"/").concat(I.clockRate).concat(I.encodingParameters?"/".concat(I.encodingParameters):"").concat(this.eol):""}printRTCPFeedback(y,I){let N="a=rtcp-fb:".concat(y).concat(c),B=I;return B.type==="trr-int"?N+="ttr-int".concat(c).concat(B.interval):(N+="".concat(B.type),B.parameter&&(N+="".concat(c).concat(B.parameter),B.additional&&(N+="".concat(c).concat(B.additional)))),N+this.eol}printPtime(y){return y===void 0?"":"a=ptime:".concat(y).concat(this.eol)}printMaxPtime(y){return y===void 0?"":"a=maxptime:".concat(y).concat(this.eol)}printDirection(y){return y===void 0?"":"a=".concat(y).concat(this.eol)}printSSRC(y){return y.map(I=>Object.keys(I.attributes).map(N=>"a=ssrc:".concat(I.ssrcId.toString(10)).concat(c).concat(N).concat(I.attributes[N]?":".concat(I.attributes[N]):"").concat(this.eol)).join("")).join("")}printRTCPMux(y){return y===void 0?"":"a=rtcp-mux".concat(this.eol)}printRTCPMuxOnly(y){return y===void 0?"":"a=rtcp-mux-only".concat(this.eol)}printRTCPRsize(y){return y===void 0?"":"a=rtcp-rsize".concat(this.eol)}printRTCP(y){if(y===void 0)return"";let I="a=rtcp:".concat(y.port);return y.netType&&(I+="".concat(c).concat(y.netType)),y.addressType&&(I+="".concat(c).concat(y.addressType)),y.address&&(I+="".concat(c).concat(y.address)),I+this.eol}printMSId(y){return y.map(I=>"a=msid:".concat(I.id).concat(I.appdata?"".concat(c).concat(I.appdata):"").concat(this.eol)).join("")}printImageattr(y){return y.map(I=>"a=imageattr:".concat(I).concat(this.eol)).join("")}printRid(y){return y.map(I=>{let N="a=rid:".concat(I.id).concat(c).concat(I.direction);return I.payloads&&(N+="".concat(c,"pt=").concat(I.payloads.join(","))),I.params.length>0&&(N+="".concat(c).concat(I.params.map(B=>B.type==="depend"?"depend=".concat(B.rids.join(",")):"".concat(B.type,"=").concat(B.val)).join(";"))),N+this.eol}).join("")}printSimulcast(y){return y===void 0?"":"a=simulcast:".concat(y).concat(this.eol)}printSCTPPort(y){return y===void 0?"":"a=sctp-port:".concat(y).concat(this.eol)}printMaxMessageSize(y){return y===void 0?"":"a=max-message-size:".concat(y).concat(this.eol)}printMid(y){return y===void 0?"":"a=mid:".concat(y).concat(this.eol)}printSSRCGroups(y){return y.map(I=>"a=ssrc-group:".concat(I.semantic).concat(I.ssrcIds.map(N=>"".concat(c).concat(N.toString(10))).join("")).concat(this.eol)).join("")}}function D(F){return new O().parse(F)}function j(F,y){return new V().print(F,y)}}},t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}return n.d=(r,i)=>{for(var o in i)n.o(i,o)&&!n.o(r,o)&&Object.defineProperty(r,o,{enumerable:!0,get:i[o]})},n.o=(r,i)=>Object.prototype.hasOwnProperty.call(r,i),n.r=r=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},n(8)})();var Dr=j9.exports;function tA(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:H("SVC_MODE");if(H("ENABLE_SVC"))return function(t){return t in zI}(e)?e:zI.L1T3}function iU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function oU(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?iU(Object(n),!0).forEach(function(r){P(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iU(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function I0(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;const{filterRTX:i,filterVideoFec:o,filterAudioFec:a,filterAudioCodec:s,filterVideoCodec:c}=t,{useXR:l}=n;let u=[],d=[],h=[],f=[],g=!1,p=!1;if(Dr.parse(e).mediaDescriptions.forEach(_=>{r&&r!==_.attributes.direction||(_.media.mediaType!=="video"||g||(d=_.attributes.payloads,f=_.attributes.extmaps,g=!0),_.media.mediaType!=="audio"||p||(u=_.attributes.payloads,h=_.attributes.extmaps,p=!0))}),!f||d.length===0)throw new Error("Cannot get video capabilities from SDP.");if(!h||u.length===0)throw new Error("Cannot get audio capabilities from SDP.");if(d.forEach(_=>{var E;(E=_.rtpMap)!==null&&E!==void 0&&E.clockRate&&(_.rtpMap.clockRate=parseInt(_.rtpMap.clockRate)),l&&_.rtcpFeedbacks.push({type:"rrtr"})}),u.forEach(_=>{var E;(E=_.rtpMap)!==null&&E!==void 0&&E.clockRate&&(_.rtpMap.clockRate=parseInt(_.rtpMap.clockRate)),l&&_.rtcpFeedbacks.push({type:"rrtr"})}),i&&(u=u.filter(_=>{var E;return((E=_.rtpMap)===null||E===void 0?void 0:E.encodingName.toLowerCase())!=="rtx"}),d=d.filter(_=>{var E;return((E=_.rtpMap)===null||E===void 0?void 0:E.encodingName.toLowerCase())!=="rtx"})),o&&(d=d.filter(_=>{var E;return!/(red)|(ulpfec)|(flexfec)/i.test(((E=_.rtpMap)===null||E===void 0?void 0:E.encodingName)||"")})),a&&(u=u.filter(_=>{var E;return!/(red)|(ulpfec)|(flexfec)/i.test(((E=_.rtpMap)===null||E===void 0?void 0:E.encodingName)||"")})),s&&(s==null?void 0:s.length)>0&&(u=u.filter(_=>{var E;return Ce(s).call(s,((E=_.rtpMap)===null||E===void 0?void 0:E.encodingName.toLowerCase())||"")})),c&&(c==null?void 0:c.length)>0){const _=d.filter(E=>{var S;return Ce(c).call(c,((S=E.rtpMap)===null||S===void 0?void 0:S.encodingName.toLowerCase())||"")});d=_.concat(i?[]:yN(_,d))}const m=H("UNSUPPORTED_VIDEO_CODEC");return m&&m.length>0&&(d=d.filter(_=>!(_.rtpMap&&Ce(m).call(m,_.rtpMap.encodingName.toLowerCase())))),{audioCodecs:u,videoCodecs:d,audioExtensions:h,videoExtensions:f}}function Jl(e){const t=Dr.parse(e);let n,r;for(const i of t.mediaDescriptions){if(!n){const o=i.attributes.iceUfrag,a=i.attributes.icePwd;if(!o||!a)throw new Error("Cannot get iceUfrag or icePwd from SDP.");n={iceUfrag:o,icePwd:a}}if(!r){const o=i.attributes.fingerprints;o.length>0&&(r={fingerprints:o})}}if(!r&&t.attributes.fingerprints.length>0&&(r={fingerprints:t.attributes.fingerprints}),!r||!n)throw new Error("Cannot get iceParameters or dtlsParameters from SDP.");return{iceParameters:n,dtlsParameters:r}}function H9(e,t){const n=[],r=e.attributes.ssrcGroups.filter(a=>a.semantic==="FID"),i=e.attributes.ssrcGroups.find(a=>a.semantic==="SIM"),o=e.attributes.ssrcs;if(i)i.ssrcIds.forEach(a=>{var s;const c=(s=r.find(l=>l.ssrcIds[0]===a))===null||s===void 0?void 0:s.ssrcIds[1];n.push({ssrcId:a,rtx:t?c:void 0})});else if(r.length>0){const a=r[0].ssrcIds[0],s=r[0].ssrcIds[1];n.push({ssrcId:a,rtx:t?s:void 0})}else{if(o.length===0)throw new Error("No ssrcs found on local media description.");n.push({ssrcId:o[0].ssrcId})}return n}function aU(e,t,n){const{cname:r}=e;let i;t?i=z9(t):(i=e.iceParameters.candidates.map(u=>({foundation:u.foundation,componentId:"1",transport:u.protocol,priority:u.priority.toString(),connectionAddress:u.ip,port:u.port.toString(),type:u.type,extension:{}})),w.debug("Using candidates from gateway."));const o={fingerprints:e.dtlsParameters.fingerprints.map(u=>({hashFunction:u.algorithm,fingerprint:u.fingerprint}))},a={iceUfrag:e.iceParameters.iceUfrag,icePwd:e.iceParameters.icePwd};let s;switch(e.dtlsParameters.role){case"server":s="passive";break;case"client":s="active";break;case"auto":s="actpass"}const c=cS(e.rtpCapabilities),l=[];return Array.isArray(n)&&n.length>0&&n.forEach(u=>{l.push({kind:De.VIDEO,ssrcId:u.v,rtx:u.v_rtx,mslabel:"".concat(u.v,"_").concat(u.a)},{kind:De.AUDIO,ssrcId:u.a,mslabel:"".concat(u.v,"_").concat(u.a)})}),{dtlsParameters:o,iceParameters:a,candidates:i,rtpCapabilities:c,setup:s,cname:r,preSSRCs:l}}function z9(e){let t=[];return e.ip&&typeof e.port=="number"&&(t=[{foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:e.ip,port:e.port.toString(),type:"host",extension:{}}],w.debug("Using remote candidate from AP ".concat(e.ip,":").concat(e.port)),e.ip6&&(t.push({foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:e.ip6,port:e.port.toString(),type:"host",extension:{}}),w.debug("Using IPV6 remote candidate from AP ".concat(e.ip6,":").concat(e.port)))),t}function Zu(e,t,n){const r=[],i=[];return e.forEach(o=>{let{ssrcId:a,rtx:s}=o;const c=cn(8,"track-"),l={ssrcId:a,attributes:oU({label:c,mslabel:n=n||cn(10,""),msid:"".concat(n," ").concat(c)},t&&{cname:t})};if(r.push(l),s!==void 0){const u={ssrcId:s,attributes:oU({label:c,mslabel:n,msid:"".concat(n," ").concat(c)},t&&{cname:t})};r.push(u),i.push({semantic:"FID",ssrcIds:[a,s]})}}),e.length>1&&i.push({semantic:"SIM",ssrcIds:e.map(o=>{let{ssrcId:a}=o;return a})}),{ssrcs:r,ssrcGroups:i}}function Vf(e,t){t instanceof Ln&&e.attributes.payloads.forEach(n=>{var r;const i=(r=n.rtpMap)===null||r===void 0?void 0:r.encodingName.toLowerCase();if(!i||["opus","pcmu","pcma","g722"].indexOf(i)===-1)return;n.fmtp||(n.fmtp={parameters:{}}),n.fmtp.parameters.minptime="10",n.fmtp.parameters.useinbandfec="1";const o=t._encoderConfig;o&&i!=="pcmu"&&i!=="pcma"&&i!=="g722"&&(o.bitrate&&!Fn()&&(n.fmtp.parameters.maxaveragebitrate="".concat(Math.floor(1e3*o.bitrate))),o.sampleRate&&(n.fmtp.parameters.maxplaybackrate="".concat(o.sampleRate),n.fmtp.parameters["sprop-maxcapturerate"]="".concat(o.sampleRate)),o.stereo&&(n.fmtp.parameters.stereo="1",n.fmtp.parameters["sprop-stereo"]="1"))})}function _N(e){const t=e.attributes.unrecognized.findIndex(n=>n.attField==="x-google-flag"&&n.attValue==="conference");t!==-1&&e.attributes.unrecognized.splice(t,1)}function SN(e,t){var n;if(!(t instanceof hn&&t._encoderConfig&&t._hints.indexOf(gn.SCREEN_TRACK)===-1))return;const r=t._encoderConfig;It().supportMinBitrate&&r.bitrateMin&&e.attributes.payloads.forEach(i=>{var o,a;Ce(o=["h264","h265","vp8","vp9","av1"]).call(o,((a=i.rtpMap)===null||a===void 0?void 0:a.encodingName.toLowerCase())||"")&&(i.fmtp||(i.fmtp={parameters:{}}),i.fmtp.parameters["x-google-min-bitrate"]="".concat(r.bitrateMin))}),It().supportMinBitrate&&!Ce(n=t._hints).call(n,gn.LOW_STREAM)&&r.bitrateMax&&e.attributes.payloads.forEach(i=>{var o,a;Ce(o=["h264","h265","vp8","vp9","av1"]).call(o,((a=i.rtpMap)===null||a===void 0?void 0:a.encodingName.toLowerCase())||"")&&(i.fmtp||(i.fmtp={parameters:{}}),i.fmtp.parameters["x-google-start-bitrate"]="".concat(H("X_GOOGLE_START_BITRATE")||Math.floor(r.bitrateMax)))})}function W9(e){if(e.media.mediaType!=="video")return;const t=Tt();if(t.name!==Kt.SAFARI&&t.os!==yr.IOS)return;const n=e.attributes.extmaps.findIndex(r=>/video-orientation/g.test(r.extensionName));n!==-1&&e.attributes.extmaps.splice(n,1)}function sS(e,t,n){if(!t)return;let r,i;if(e.media.mediaType==="video"?(r=n.videoExtensions,i=n.videoCodecs):(r=n.audioExtensions,i=n.audioCodecs),t.twcc===!0){const o=r.find(a=>a.extensionName==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01");o&&(e.attributes.extmaps.find(s=>s.extensionName==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01")||e.attributes.extmaps.push({entry:o.entry,extensionName:"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"}),function(s,c){return c.filter(l=>!!s.find(u=>u.payloadType===l.payloadType&&!!u.rtcpFeedbacks.find(d=>d.type==="transport-cc")))}(i,e.attributes.payloads).forEach(s=>{s.rtcpFeedbacks.find(c=>c.type==="transport-cc")||s.rtcpFeedbacks.push({type:"transport-cc"})}))}else if(t.twcc===!1){const o=e.attributes.extmaps.findIndex(a=>a.extensionName==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01");o!==-1&&e.attributes.extmaps.splice(o,1),e.attributes.payloads.forEach(a=>{const s=a.rtcpFeedbacks.findIndex(c=>c.type==="transport-cc");s!==-1&&a.rtcpFeedbacks.splice(s,1)})}if(t.remb===!0){const o=r.find(a=>a.extensionName==="http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time");o&&(e.attributes.extmaps.find(s=>s.extensionName==="http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time")||e.attributes.extmaps.push({entry:o.entry,extensionName:"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"}),function(s,c){return c.filter(l=>!!s.find(u=>u.payloadType===l.payloadType&&!!u.rtcpFeedbacks.find(d=>d.type==="goog-remb")))}(i,e.attributes.payloads).forEach(s=>{s.rtcpFeedbacks.find(c=>c.type==="goog-remb")||s.rtcpFeedbacks.push({type:"goog-remb"})}))}else if(t.remb===!1){const o=e.attributes.extmaps.findIndex(a=>a.extensionName==="http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time");o!==-1&&e.attributes.extmaps.splice(o,1),e.attributes.payloads.forEach(a=>{const s=a.rtcpFeedbacks.findIndex(c=>c.type==="goog-remb");s!==-1&&a.rtcpFeedbacks.splice(s,1)})}}function G9(e,t,n){if(Fn()||e.media.mediaType!=="video"||!(t instanceof hn)||n!=="vp9"&&n!=="vp8"||n==="vp8"&&!H("SIMULCAST")||n==="vp9"&&H("ENABLE_SVC")||t._scalabilityMode===void 0||t._scalabilityMode.numSpatialLayers<=1)return;const r=n==="vp8"?2:t._scalabilityMode.numSpatialLayers,i=e.attributes.ssrcs[0],o=e.attributes.ssrcGroups.find(s=>s.semantic==="FID"&&s.ssrcIds[0]===i.ssrcId),a={semantic:"SIM",ssrcIds:[i.ssrcId]};for(let s=1;s<r;s++)e.attributes.ssrcs.push({ssrcId:i.ssrcId+s,attributes:Yn(i.attributes)}),a.ssrcIds.push(i.ssrcId+s),o&&(e.attributes.ssrcs.push({ssrcId:o.ssrcIds[1]+s,attributes:Yn(i.attributes)}),e.attributes.ssrcGroups.push({semantic:"FID",ssrcIds:[i.ssrcId+s,o.ssrcIds[1]+s]}));e.attributes.ssrcGroups.unshift(a)}async function K9(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=new RTCPeerConnection;n.addTransceiver("video",{direction:"sendonly"}),n.addTransceiver("audio",{direction:"sendonly"}),n.addTransceiver("video",{direction:"recvonly"}),n.addTransceiver("audio",{direction:"recvonly"});const r=(await n.createOffer()).sdp,{send:i,recv:o,sendrecv:a}=function(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=arguments.length>2?arguments[2]:void 0;const u=I0(l,s,c,"sendonly"),d=I0(l,s,c,"recvonly"),h={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},f={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},g={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]};if(ts(u,d,"videoExtensions",h,f,g),ts(u,d,"videoCodecs",h,f,g),ts(u,d,"audioExtensions",h,f,g),ts(u,d,"audioCodecs",h,f,g),H("RAISE_H264_BASELINE_PRIORITY")){const p=g.videoCodecs.findIndex(m=>{var _,E;return((_=m.rtpMap)===null||_===void 0?void 0:_.encodingName.toLocaleLowerCase())==="h264"&&((E=m.fmtp)===null||E===void 0?void 0:E.parameters["profile-level-id"])==="42001f"});if(p!==-1){const m=g.videoCodecs.findIndex(_=>{var E;return((E=_.rtpMap)===null||E===void 0?void 0:E.encodingName.toLocaleLowerCase())==="h264"});if(m<p){w.debug("raising H264 baseline profile priority");const _=g.videoCodecs[p];g.videoCodecs.splice(p,1),g.videoCodecs.splice(m,0,_)}m!==-1&&(f.videoCodecs=f.videoCodecs.filter(_=>{var E,S;return!(((E=_.rtpMap)===null||E===void 0?void 0:E.encodingName.toLocaleLowerCase())==="h264"&&((S=_.fmtp)===null||S===void 0?void 0:S.parameters["profile-level-id"])!=="42001f")})),m!==-1&&H("FILTER_SEND_H264_BASELINE")&&(h.videoCodecs=h.videoCodecs.filter(_=>{var E,S;return!(((E=_.rtpMap)===null||E===void 0?void 0:E.encodingName.toLocaleLowerCase())==="h264"&&((S=_.fmtp)===null||S===void 0?void 0:S.parameters["profile-level-id"])!=="42001f")}))}}return{send:h,recv:f,sendrecv:g}}(e,t,r);try{n.close()}catch{}return{send:i,recv:o,sendrecv:a}}function sU(){const e={audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]},t=I0(arguments.length>2?arguments[2]:void 0,arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},"recvonly"),n={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},r={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},i={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]};if(ts(e,t,"videoExtensions",n,r,i),ts(e,t,"videoCodecs",n,r,i),ts(e,t,"audioExtensions",n,r,i),ts(e,t,"audioCodecs",n,r,i),H("RAISE_H264_BASELINE_PRIORITY")){const o=i.videoCodecs.findIndex(a=>a.rtpMap&&a.rtpMap.encodingName.toLocaleLowerCase()==="h264"&&a.fmtp&&a.fmtp.parameters["profile-level-id"]==="42001f");if(o!==-1){const a=i.videoCodecs.findIndex(s=>s.rtpMap&&s.rtpMap.encodingName.toLocaleLowerCase()==="h264");if(a<o){w.debug("raising H264 baseline profile priority");const s=i.videoCodecs[o];i.videoCodecs.splice(o,1),i.videoCodecs.splice(a,0,s)}a!==-1&&(r.videoCodecs=r.videoCodecs.filter(s=>!(s.rtpMap&&s.rtpMap.encodingName.toLocaleLowerCase()==="h264"&&s.fmtp&&s.fmtp.parameters["profile-level-id"]!=="42001f")))}}return{send:n,recv:r,sendrecv:i}}function ts(e,t,n,r,i,o){if(n==="videoExtensions"||n==="audioExtensions"){const a=[];return e[n].forEach(s=>{t[n].some((c,l)=>{if(s.entry===c.entry&&s.extensionName===c.extensionName)return a.push(l),!0})?o[n].push(s):r[n].push(s)}),void t[n].forEach((s,c)=>{a.indexOf(c)===-1&&i[n].push(s)})}if(n==="videoCodecs"||n==="audioCodecs"){const a=[];return e[n].forEach(s=>{t[n].some((c,l)=>{if(s.payloadType===c.payloadType&&JSON.stringify(s)===JSON.stringify(c))return a.push(l),!0})?o[n].push(s):r[n].push(s)}),void t[n].forEach((s,c)=>{a.indexOf(c)===-1&&i[n].push(s)})}}function cS(e){const{send:t,recv:n,sendrecv:r}=e;if(!r){if(!t||!n)throw new Error("cannot merge rtp capabilities because one of send or recv is empty!");return{send:t,recv:n}}let i,o;return t?(i={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},i.audioCodecs=[...t.audioCodecs,...r.audioCodecs],i.videoCodecs=[...t.videoCodecs,...r.videoCodecs],i.audioExtensions=[...t.audioExtensions,...r.audioExtensions],i.videoExtensions=[...t.videoExtensions,...r.videoExtensions]):i=r,n?(o={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},o.audioCodecs=[...n.audioCodecs,...r.audioCodecs],o.videoCodecs=[...n.videoCodecs,...r.videoCodecs],o.audioExtensions=[...n.audioExtensions,...r.audioExtensions],o.videoExtensions=[...n.videoExtensions,...r.videoExtensions]):o=r,{send:i,recv:o}}function jf(e){e.media.mediaType==="audio"&&e.attributes.payloads.filter(t=>{var n;return((n=t.rtpMap)===null||n===void 0?void 0:n.encodingName.toLowerCase())==="opus"}).forEach(t=>{t.fmtp||(t.fmtp={parameters:{}}),t.fmtp.parameters.stereo="1",t.fmtp.parameters["sprop-stereo"]="1"})}function Vm(e,t,n,r){let i=[];if(e===De.VIDEO){if(H("H264_PROFILE_LEVEL_ID")&&r==="h264"&&(i=t.videoCodecs.filter(o=>{var a;return Ce(a=o.rtpMap&&o.rtpMap.encodingName.toLowerCase()||"").call(a,r)&&o&&o.fmtp&&o.fmtp.parameters["profile-level-id"]===H("H264_PROFILE_LEVEL_ID")})),!Array.isArray(i)||i.length===0){let o=[];const a=[],s=[],c=[];if(n.videoCodecs.forEach(l=>{const u=l.rtpMap&&l.rtpMap.encodingName.toLowerCase()||"";Ce(u).call(u,r)?o.push(l):Ce(u).call(u,"vp9")?a.push(l):Ce(u).call(u,"vp8")?s.push(l):Ce(u).call(u,"h264")&&c.push(l)}),o.length===0){let l="";a.length!==0?(o=a,l="vp9"):s.length!==0?(o=s,l="vp8"):c.length!==0&&(o=c,l="h264"),w.warning("codec ".concat(r," not included in rtpCapabilities, fallback to default payloads: ").concat(l))}o.length!==0&&(i=t.videoCodecs.filter(l=>o.some(u=>u.payloadType===l.payloadType)))}if(i.length===0&&(w.warning("codec ".concat(r," not included in rtpCapabilities, fallback to default payloads: ").concat(t.videoCodecs[0].rtpMap&&t.videoCodecs[0].rtpMap.encodingName)),i=t.videoCodecs),H("USE_PUB_RTX")||H("USE_SUB_RTX")){const o=yN(i,t.videoCodecs);i=[...i,...o]}}else i=t.audioCodecs.filter(o=>{var a;return Ce(a=o.rtpMap&&o.rtpMap.encodingName.toLowerCase()||"").call(a,r)}),i.length===0&&(w.warning("codec ".concat(r," not included in rtpCapabilities, fallback to opus")),i=t.audioCodecs.filter(o=>{var a;return Ce(a=o.rtpMap&&o.rtpMap.encodingName.toLowerCase()||"").call(a,"opus")}));return i}function yN(e,t){const n=e.map(r=>r.payloadType.toString());return t.filter(r=>r.rtpMap&&r.rtpMap.encodingName==="rtx"&&r.fmtp&&r.fmtp.parameters.apt&&Ce(n).call(n,r.fmtp&&r.fmtp.parameters.apt))}async function Vv(e,t,n){const r=t.toString(),i=Y9(r,"offer","remote","exchangeSDP");await e.setRemoteDescription({type:"offer",sdp:r});const o=await e.createAnswer();if(!o.sdp)throw new Error("cannot get answer sdp");let a=o.sdp;a=q9(a,n||{}),i==null||i(a||""),await e.setLocalDescription({type:"answer",sdp:a})}function q9(e,t,n){const r=Dr.parse(e),{useXR:i}=t;return r.mediaDescriptions.forEach(o=>{var a;o.attributes.mid&&(Array.isArray(n)&&!Ce(n).call(n,o.attributes.mid)||(o.media.mediaType==="audio"&&jf(o),i&&Ce(a=["audio","video"]).call(a,o.media.mediaType)&&o.attributes.payloads.forEach(s=>{s.rtcpFeedbacks.findIndex(c=>c.type==="rrtr")===-1&&s.rtcpFeedbacks.push({type:"rrtr"})})))}),Dr.print(r)}function Y9(e,t,n,r){if(H("SDP_LOGGING"))return w.upload("exchanging ".concat(n," ").concat(t," SDP during P2PConnection.").concat(r,`
`),e),t==="offer"?i=>{Y9(i,"answer",n==="local"?"remote":"local",r)}:void 0}function rc(e,t){return typeof H(e)===t?H(e):void 0}function cU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Al(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cU(Object(n),!0).forEach(function(r){P(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cU(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}const ET=new Map;class mfe extends Pn{get state(){return this._state}set state(t){if(t===this._state)return;const n=this._state;this._state=t,t==="DISCONNECTED"&&this._disconnectedReason?this.emit(Vr.CONNECTION_STATE_CHANGE,t,n,this._disconnectedReason):this.emit(Vr.CONNECTION_STATE_CHANGE,t,n)}get joinGatewayStartTime(){return this._joinGatewayStartTime}set joinGatewayStartTime(t){w.debug("[".concat(this.store.clientId,"] set joinGatewayStartTime at ").concat(t)),this._joinGatewayStartTime=t}constructor(t,n){super(),P(this,"store",void 0),P(this,"joinInfo",void 0),P(this,"key",void 0),P(this,"ntpOffset",0),P(this,"signal",void 0),P(this,"role",void 0),P(this,"inChannelInfo",{joinAt:null,duration:0}),P(this,"spec",void 0),P(this,"_state","DISCONNECTED"),P(this,"_statsCollector",void 0),P(this,"_disconnectedReason",void 0),P(this,"isSignalRecover",!1),P(this,"hasChangeBGPAddress",!1),P(this,"trafficStatsInterval",void 0),P(this,"networkQualityInterval",void 0),P(this,"_joinGatewayStartTime",0),P(this,"_signalTimeout",!1),P(this,"_clientRoleOptions",void 0),P(this,"_isProactiveJoin",!1),this.store=t,this.spec=n,this.signal=this.store.useP2P?new rU(Al(Al({},n),{},{retryConfig:n.websocketRetryConfig}),t):new Bde(Al(Al({},n),{},{retryConfig:n.websocketRetryConfig}),t),this._statsCollector=n.statsCollector,this.role=n.role||"audience",this._clientRoleOptions=n.clientRoleOptions,this.handleSignalEvents()}async join(t,n,r){this.store.joinGatewayStart(),t.cloudProxyServer!=="disabled"&&(this.hasChangeBGPAddress=!0);const i=Date.now();let o=ET.get(t.cname);if(o||(o=new Map,ET.set(t.cname,o)),this._isProactiveJoin=!0,o.has(t.uid)){const l=new q(k.UID_CONFLICT);throw Pe.joinGateway(t.sid,{lts:i,succ:!1,ec:l.code,addr:null,uid:t.uid,cid:t.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!t.proxyServer,signalChannel:"0",preload:t.preload}),this._isProactiveJoin=!1,l}o.set(t.uid,!0),this.joinInfo=t,this.key=n;let a=0;this.joinGatewayStartTime=i;const s=t.proxyServer;try{w.debug("[".concat(this.store.clientId,"] use websocket join uid ").concat(a));const l=t.gatewayAddrs.map(u=>{let{address:d}=u;const[h,f]=d.split(":"),g={host:h,port:f};return t.proxyServer&&(g.proxy=t.proxyServer),g});a=(await this.signal.init(l,r)).uid,w.debug("[".concat(this.store.clientId,"] websocket join uid ").concat(a," cost ").concat(Date.now()-this.joinGatewayStartTime))}catch(l){var c;throw w.error("[".concat(this.store.clientId,"] User join failed"),l.toString()),Pe.joinGateway(t.sid,{lts:i,succ:!1,ec:((c=l.data)===null||c===void 0?void 0:c.desc)||l.code,errorMsg:l.message,addr:this.signal.url,uid:t.uid,cid:t.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!s,signalChannel:"0",preload:t.preload}),this._isProactiveJoin=!1,o.delete(t.uid),this.signal.close(),l}return this.state="CONNECTED",this.inChannelInfo.joinAt=Date.now(),w.debug("[".concat(this.store.clientId,"] Connected to gateway server")),this.trafficStatsInterval=window.setInterval(()=>{this.updateTrafficStats().catch(l=>{w.warning("[".concat(this.store.clientId,"] get traffic stats error"),l.toString())})},3e3),this.networkQualityInterval=window.setInterval(()=>{navigator&&navigator.onLine!==void 0&&!navigator.onLine?this.emit(Vr.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6}):this._signalTimeout?this.emit(Vr.NETWORK_QUALITY,{downlinkNetworkQuality:5,uplinkNetworkQuality:5}):this.state==="CONNECTED"&&this._statsCollector.trafficStats?this.emit(Vr.NETWORK_QUALITY,{uplinkNetworkQuality:ZM(this._statsCollector.trafficStats.B_unq),downlinkNetworkQuality:ZM(this._statsCollector.trafficStats.B_dnq)}):this.emit(Vr.NETWORK_QUALITY,{uplinkNetworkQuality:0,downlinkNetworkQuality:0})},2e3),this.store.joinGatewayEnd(),a}async leave(){let t=arguments.length>0&&arguments[0]!==void 0&&arguments[0],n=arguments.length>1?arguments[1]:void 0;if(this.state!=="DISCONNECTED"){n!==Xt.FALLBACK&&(this.state="DISCONNECTING");try{t||this.signal.connectionState!==sn.CONNECTED||await function(r,i){return i===1/0?r:_e.race([r,Mue(i)])}(this.signal.request(Ke.LEAVE,void 0,!0),3e3)}catch(r){w.warning("[".concat(this.store.clientId,"] leave request failed, ignore"),r)}this.signal.close(n),n!==Xt.FALLBACK&&(this.state="DISCONNECTED"),this.reset()}}async publish(t,n,r){if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new q(k.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));const i={state:"offer",p2p_id:this.store.p2pId,ortc:n,mode:this.spec.mode,extend:H("PUB_EXTEND"),twcc:!!H("PUBLISH_TWCC"),rtx:!!H("USE_PUB_RTX")};try{return(await this.signal.request(Ke.PUBLISH,i,!0))._message}catch(o){if(r&&o.data&&o.data.code===$e.ERR_PUBLISH_REQUEST_INVALID)return w.warning("[".concat(this.store.clientId,"] receive publish error code, retry"),o.toString()),await this.tryUnpubBeforeRepub(t,n),this.publish(t,n,!1);throw o}}async publishDataChannel(t,n,r){var i;if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new q(k.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));const o={stream_id:n.streamId,ordered:n.ordered?1:0,max_retrans_times:(i=n.maxRetransmits)!==null&&i!==void 0?i:10,channel_id:n.channelId,metadata:n.metadata};try{await this.signal.request(Ke.PUBLISH_DATASTREAM,o,!0)}catch(a){if(r&&a.data&&a.data.code===$e.ERR_PUBLISH_REQUEST_INVALID)return w.warning("[".concat(this.store.clientId,"] receive publish datachannels error code, retry"),a.toString()),await this.tryUnpubDataChannelBeforeRepub(t,n),this.publishDataChannel(t,n,!1);throw a}}async unpublish(t,n){try{if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new q(k.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));await this.signal.request(Ke.UNPUBLISH,{stream_id:n,ortc:t},!0)}catch(r){w.warning("[".concat(this.store.clientId,"] unpublish warning: "),r)}}async unpublishDataChannel(t){try{if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new q(k.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));await _e.all(t.map(n=>this.signal.request(Ke.UNPUBLISH_DATASTREAM,{channel_id:n},!0)))}catch(n){w.warning("unpublish datachannels warning: ",n)}}async presubscribe(t,n,r){if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new q(k.INVALID_OPERATION,"can not presubscribe when connection state is ".concat(this.state));const i={stream_id:t,stream_type:n,mode:this.spec.mode,codec:this.spec.codec,p2p_id:this.store.p2pId,twcc:!!H("SUBSCRIBE_TWCC"),rtx:!!H("USE_SUB_RTX")||void 0,extend:H("SUB_EXTEND"),svc:Array.isArray(H("SVC"))&&H("SVC").length!==0?H("SVC"):void 0};try{return await this.signal.request(Ke.PRE_SUBSCRIBE,i,!0)}catch(o){if(r&&o.data&&o.data.code===$e.ERR_SUBSCRIBE_REQUEST_INVALID)return w.warning("[".concat(this.store.clientId,"] pre-subscribe error, retry"),o.toString()),this.presubscribe(t,n,!1);throw o}}async subscribe(t,n,r){if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new q(k.INVALID_OPERATION,"can not subscribe when connection state is ".concat(this.state));const i={stream_id:t,stream_type:n.stream_type,mode:this.spec.mode,codec:this.spec.codec,p2p_id:this.store.p2pId,twcc:!!H("SUBSCRIBE_TWCC"),rtx:!!H("USE_SUB_RTX"),extend:H("SUB_EXTEND"),ssrcId:n.ssrcId,svc:Array.isArray(H("SVC"))&&H("SVC").length!==0?H("SVC"):void 0};try{return(await this.signal.request(Ke.SUBSCRIBE,i,!0))._message}catch(o){if(r&&o.data&&o.data.code===$e.ERR_SUBSCRIBE_REQUEST_INVALID)return w.warning("[".concat(this.store.clientId,"] receiver subscribe error code, retry"),o.toString()),await this.tryUnsubBeforeResub(t,n),await this.subscribe(t,n,!1);throw o}}async subscribeDataChannel(t,n,r){if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new q(k.INVALID_OPERATION,"can not subscribe datachannel when connection state is ".concat(this.state));const i={uid:t,stream_id:n.id,channel_id:n.datachannelId};try{return void await this.signal.request(Ke.SUBSCRIBE_DATASTREAM,i,!0)}catch(o){if(r&&o.data&&o.data.code===$e.ERR_SUBSCRIBE_REQUEST_INVALID)return w.warning("[".concat(this.store.clientId,"] receiver subscribe datachannel error code, retry"),o.toString()),await this.tryUnsubDataChannelBeforeResub(t,n),await this.subscribeDataChannel(t,n,!1);throw o}}async subscribeAll(t,n){if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new q(k.INVALID_OPERATION,"can not massSubscribe when connection state is ".concat(this.state));const r={p2p_id:this.store.p2pId,users:t,dtx:!1,rtx:!!H("USE_SUB_RTX"),twcc:!!H("SUBSCRIBE_TWCC"),svc:Array.isArray(H("SVC"))&&H("SVC").length!==0?H("SVC"):void 0};try{return await this.signal.request(Ke.SUBSCRIBE_STREAMS,r,!0)}catch(i){if(n&&i.data&&i.data.code===$e.ERR_SUBSCRIBE_REQUEST_INVALID)return w.warning("[".concat(this.store.clientId,"] receiver massSubscribe error code, retry"),i.toString()),await this.tryMassUnsubBeforeResub(t),await this.subscribeAll(t,!1);throw i}}async setVideoProfile(t){const n=function(r){if(!(r.bitrateMax&&r.bitrateMin&&r.frameRate&&r.height&&r.width))return;let i=r.frameRate,o=r.width,a=r.height,s=!0;return typeof i!="number"&&(i=i.exact||i.ideal||i.max||i.min||0,i||(s=!1)),typeof o!="number"&&(o=o.exact||o.ideal||o.max||o.min||0,o||(s=!1)),typeof a!="number"&&(a=a.exact||a.ideal||a.max||a.min||0,i||(s=!1)),s?{stream_type:0,width:o,height:a,fps:i,start_bps:1e3*r.bitrateMax,min_bps:1e3*r.bitrateMin,target_bps:1e3*r.bitrateMax}:void 0}(t);if(n)return this.signal.request(Ke.SET_VIDEO_PROFILE,n);w.debug("[".concat(this.store.clientId,"] encoder config is not complete, do not report to gateway"))}async unsubscribe(t,n){try{await this.signal.request(Ke.UNSUBSCRIBE,{p2p_id:this.store.p2pId,ortc:t,stream_id:n},!0)}catch(r){w.warning("[".concat(this.store.clientId,"] unsubscribe warning: "),r)}}async unsubscribeDataChannel(t,n){try{if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new q(k.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));await _e.all(t.map(r=>this.signal.request(Ke.UNSUBSCRIBE_DATASTREAM,{stream_id:r,uid:n},!0)))}catch(r){w.warning("unsubscribeDataChannel warning: ",r)}}async massUnsubscribe(t){try{await this.signal.request(Ke.UNSUBSCRIBE_STREAMS,t,!0)}catch(n){w.warning("[".concat(this.store.clientId,"] massUnsubscribeAll warning: "),n)}}async reconnectPC(t){const{iceParameters:n,dtlsParameters:r,rtpCapabilities:i}=t;return{gatewayEstablishParams:await this.signal.request(Ke.CONNECT_PC,{p2p_id:this.store.p2pId,stream_id:this.store.uid,ortc:{iceParameters:n,dtlsParameters:r,rtpCapabilities:i}},!0),gatewayAddress:this.getCurrentGatewayAddress()}}getGatewayInfo(){return this.signal.request(Ke.GATEWAY_INFO)}async renewToken(t){await this.signal.request(Ke.RENEW_TOKEN,t),this.key=t.token}async setClientRole(t,n){if(n&&(this._clientRoleOptions=Object.assign({},n)),this.state!=="CONNECTED")return void(this.role=t);let r,i=0;t==="audience"?this._clientRoleOptions&&this._clientRoleOptions.delay?(r=this._clientRoleOptions.delay,i=1):i=this._clientRoleOptions&&this._clientRoleOptions.level?this._clientRoleOptions.level:2:i=0,await this.signal.request(Ke.SET_CLIENT_ROLE,{role:t,level:i,delay:r,client_ts:Date.now()}),this.role=t}async setRemoteVideoStreamType(t,n){await this.signal.request(Ke.SWITCH_VIDEO_STREAM,{stream_id:t,stream_type:n})}async setDefaultRemoteVideoStreamType(t){await this.signal.request(Ke.DEFAULT_VIDEO_STREAM,{stream_type:t})}async setStreamFallbackOption(t,n){await this.signal.request(Ke.SET_FALLBACK_OPTION,{stream_id:t,fallback_type:n})}async pickSVCLayer(t,n){await this.signal.request(Ke.PICK_SVC_LAYER,{stream_id:t,spatial_layer:n.spatialLayer,temporal_layer:n.temporalLayer})}async setRTM2Flag(t){await this.signal.request(Ke.SET_RTM2_FLAG,{rtm2_flag:t})}async sendExtensionMessage(t,n,r){if(this.signal instanceof rU)return this.signal.sendExtensionMessage(t,n,r)}getInChannelInfo(){return this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=Date.now()-this.inChannelInfo.joinAt),Al({},this.inChannelInfo)}async getGatewayVersion(){return(await this.signal.request(Ke.GATEWAY_INFO)).version}reset(){if(this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=Date.now()-this.inChannelInfo.joinAt,this.inChannelInfo.joinAt=null),this.trafficStatsInterval&&(window.clearInterval(this.trafficStatsInterval),this.trafficStatsInterval=void 0),this.joinInfo){const t=ET.get(this.joinInfo.cname);t&&t.delete(this.joinInfo.uid)}this.joinInfo=void 0,this.key=void 0,this.networkQualityInterval&&(window.clearInterval(this.networkQualityInterval),this.networkQualityInterval=void 0)}updateTurnConfigFromSignal(){if(!this.joinInfo)return;const t=function(n){let r;return r=n.startsWith("dc")?n.match(/(dc\:\/\/)?([^:]+):(\d+)/):n.match(/(wss\:\/\/)?([^:]+):(\d+)/),r?{username:jr.username,password:jr.password,turnServerURL:r[2],tcpport:parseInt(r[3])+30,udpport:parseInt(r[3])+30,forceturn:!1}:null}((this.joinInfo.cloudProxyServer==="disabled"?this.signal.url:this.joinInfo.gatewayAddrs[this.signal.currentURLIndex].address)||"");this.joinInfo.turnServer.serversFromGateway=[],t&&this.joinInfo.turnServer.mode!=="off"&&this.joinInfo.cloudProxyServer==="disabled"&&this.joinInfo.turnServer.serversFromGateway.push(Al(Al({},jr),{},{turnServerURL:t.turnServerURL,tcpport:t.tcpport,udpport:t.udpport,username:this.joinInfo.uid.toString(),password:this.joinInfo.token}))}async updateTrafficStats(){if(this.state!=="CONNECTED")return;const t=await this.signal.request(Ke.TRAFFIC_STATS,void 0,!0);t.timestamp=Date.now(),t.ntp_offset!=null&&(this.ntpOffset=t.ntp_offset),t.peer_delay.forEach(n=>{const r=this._statsCollector.trafficStats&&this._statsCollector.trafficStats.peer_delay.find(i=>i.peer_uid===n.peer_uid);r&&r.B_st!==n.B_st&&Uy(()=>{this.emit(Vr.STREAM_TYPE_CHANGE,n.peer_uid,n.B_st)})}),this._statsCollector.updateTrafficStats(t)}getJoinMessage(t){if(!this.joinInfo||!this.key)throw new q(k.UNEXPECTED_ERROR,"can not generate join message, no join info");const n=Object.assign({},this.joinInfo.apResponse);let r=H("REPORT_APP_SCENARIO");if(typeof r!="string")try{r=JSON.stringify(r)}catch{r=void 0}r&&r.length>128&&(r=void 0);const i=!(Fn()||$7(87)||RF())&&typeof H("ENABLE_PRE_SUB")=="boolean"&&H("ENABLE_PRE_SUB"),o=!RF()&&rc("ENABLE_PREALLOC_PC","boolean"),a=Al({license:this.joinInfo.license,p2p_id:this.store.p2pId,session_id:this.joinInfo.sid,app_id:this.joinInfo.appId,channel_key:this.key,channel_name:this.joinInfo.cname,sdk_version:va,browser:navigator.userAgent,process_id:H("PROCESS_ID"),mode:this.store.useP2P?"p2p":this.spec.mode,codec:this.spec.codec,role:this.role,has_changed_gateway:this.hasChangeBGPAddress,ap_response:n,extend:H("JOIN_EXTEND"),details:{6:this.joinInfo.stringUid,cservice_map:this.joinInfo.cloudProxyServer==="proxy3"?"1":this.joinInfo.cloudProxyServer==="proxy5"?"2":void 0},features:{rejoin:!0},optionalInfo:this.joinInfo.optionalInfo,appScenario:r,attributes:{userAttributes:{enablePublishedUserList:H("ENABLE_PUBLISHED_USER_LIST"),maxSubscription:H("MAX_SUBSCRIPTION"),subscribeAudioFilterTopN:typeof H("SUBSCRIBE_AUDIO_FILTER_TOPN")=="number"?H("SUBSCRIBE_AUDIO_FILTER_TOPN"):void 0,enablePublishAudioFilter:typeof H("ENABLE_PUBLISH_AUDIO_FILTER")=="boolean"?H("ENABLE_PUBLISH_AUDIO_FILTER"):void 0,enableUserLicenseCheck:typeof H("ENABLE_USER_LICENSE_CHECK")=="boolean"?H("ENABLE_USER_LICENSE_CHECK"):void 0,enableRTX:H("USE_PUB_RTX")===!0||H("USE_SUB_RTX")===!0||void 0,disableFEC:H("DISABLE_FEC"),enableNTPReport:!!H("ENABLE_NTP_REPORT")||void 0,enableInstantVideo:!!H("ENABLE_INSTANT_VIDEO")||void 0,enableFulllinkAvSync:!!H("ENABLE_FULL_LINK_AV_SYNC")||void 0,enableDataStream2:rc("ENABLE_DATASTREAM_2","boolean"),enableAutFeedback:!!H("ENABLE_AUT_FEEDBACK")||void 0,rtm2Flag:typeof this.joinInfo.rtmFlag=="number"?this.joinInfo.rtmFlag:void 0,enableUserAutoRebalanceCheck:!!H("ENABLE_USER_AUTO_REBALANCE_CHECK"),enableXR:rc("USE_XR","boolean"),enableLossbasedBwe:rc("ENABLE_LOSSBASED_BWE","boolean"),enableAutCC:!!H("ENABLE_AUT_CC")||void 0,enableCCFallback:rc("ENABLE_CC_FALLBACK","boolean"),enablePreallocPC:o,preSubNum:i?rc("PRE_SUB_NUM","number"):void 0,enablePubTWCC:rc("PUBLISH_TWCC","boolean"),enableSubTWCC:rc("SUBSCRIBE_TWCC","boolean"),enablePubRTX:rc("USE_PUB_RTX","boolean"),enableSubRTX:rc("USE_SUB_RTX","boolean"),enableSubSVC:H("ENABLE_SVC")?H("ENABLE_SVC_DEFAULT_CODECS"):Array.isArray(H("SVC"))&&H("SVC").length!==0?H("SVC"):void 0}},join_ts:this.joinGatewayStartTime},t);return this.joinInfo.stringUid&&(a.string_uid=this.joinInfo.stringUid),this.joinInfo.aesmode&&this.joinInfo.aespassword&&(a.aes_mode=this.joinInfo.aesmode,H("ENCRYPT_AES")?(a.aes_secret=this.joinInfo.aespassword,a.aes_encrypt=!0):a.aes_secret=this.joinInfo.aespassword,this.joinInfo.aessalt&&(a.aes_salt=this.joinInfo.aessalt)),n.addresses[this.signal.websocket.currentURLIndex]&&(a.ap_response.ticket=n.addresses[this.signal.websocket.currentURLIndex].ticket,delete n.addresses),this.joinInfo.defaultVideoStream!==void 0&&(a.default_video_stream=this.joinInfo.defaultVideoStream),a}getRejoinMessage(){if(!this.joinInfo)throw new q(k.UNEXPECTED_ERROR,"can not generate rejoin message, no join info");return{session_id:this.joinInfo.sid,channel_name:this.joinInfo.cname,cid:this.joinInfo.cid,uid:this.joinInfo.uid,vid:Number(this.joinInfo.vid)}}handleSignalEvents(){this.signal.on(qe.WS_RECONNECT_WAITTING_FINISH,t=>{var n;Ce(n=["tryNext","recover"]).call(n,t)&&this.joinInfo&&Pe.adjustSessionStartTime(this.joinInfo.sid)}),this.signal.on(qe.WS_RECONNECT_CREATE_CONNECTION,t=>{this.joinGatewayStartTime=Date.now()}),this.signal.on(qe.WS_RECONNECTING,t=>{this.joinInfo&&Pe.WebSocketQuit(this.joinInfo.sid,{lts:Date.now(),succ:-1,cname:this.joinInfo.cname,uid:this.joinInfo.uid,cid:this.joinInfo.cid,errorCode:t||Wr.NETWORK_ERROR}),this.joinInfo&&(this.state="RECONNECTING",Pe.sessionInit(this.joinInfo.sid,{lts:new Date().getTime(),extend:this.isSignalRecover?{recover:!0}:{rejoin:!0},cname:this.joinInfo.cname,appid:this.joinInfo.appId,mode:this.spec.mode,stringUid:this.joinInfo.stringUid,channelProfile:this.spec.mode==="live"?1:0,channelMode:0,lsid:this.joinInfo.sid,clientRole:this.role==="audience"?2:1,buildFormat:2}),this.isSignalRecover=!1,this.joinGatewayStartTime=Date.now())}),this.signal.on(qe.WS_CLOSED,t=>{let n;switch(t){case Xt.LEAVE:n=Wr.LEAVE;break;case Xt.UID_BANNED:case Xt.IP_BANNED:case Xt.CHANNEL_BANNED:case Xt.SERVER_ERROR:n=Wr.SERVER_ERROR;break;case Xt.FALLBACK:n=Wr.FALLBACK;break;case Xt.LICENSE_MISSING:case Xt.LICENSE_EXPIRED:case Xt.LICENSE_MINUTES_EXCEEDED:case Xt.LICENSE_PERIOD_INVALID:case Xt.LICENSE_MULTIPLE_SDK_SERVICE:case Xt.LICENSE_ILLEGAL:case Xt.TOKEN_EXPIRE:n=t;break;default:n=Wr.NETWORK_ERROR}w.debug("[".concat(this.store.clientId,"] [signal] websocket closed, reason: ").concat(n||"undefined -> "+Wr.NETWORK_ERROR)),this.joinInfo&&Pe.WebSocketQuit(this.joinInfo.sid,{lts:Date.now(),succ:t===Xt.LEAVE?1:-1,cname:this.joinInfo.cname,uid:this.joinInfo.uid,cid:this.joinInfo.cid,errorCode:n}),this._disconnectedReason=t,t!==Xt.FALLBACK&&(this.state="DISCONNECTED"),this.reset()}),this.signal.on(qe.WS_CONNECTED,()=>{if(this.updateTurnConfigFromSignal(),this.state="CONNECTED",this.joinInfo&&(this.role==="audience"&&this._clientRoleOptions&&(this._clientRoleOptions.level||this._clientRoleOptions.delay)&&(w.debug("[".concat(this.store.clientId,"] patch to send set client role, role: ").concat(this.role,", mode: ").concat(this.spec.mode,", level: ").concat(this._clientRoleOptions.level,", delay: ").concat(this._clientRoleOptions.delay)),this.setClientRole(this.role,this._clientRoleOptions)),Pe.joinGateway(this.joinInfo.sid,{lts:this.joinGatewayStartTime,succ:!0,ec:null,vid:this.joinInfo.vid,addr:this.signal.url,uid:this.joinInfo.uid,cid:this.joinInfo.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!this.joinInfo.proxyServer,signalChannel:"0",preload:this.joinInfo.preload}),this._isProactiveJoin=!1,this.joinInfo.useLocalAccessPoint&&this.joinInfo.setLocalAPVersion===1)){const t=this.signal.url&&this.signal.url.match(/wss\:\/\/([^:]+):(\d+)/);if(!t)return void w.error("[".concat(this.store.clientId,"] set local access point after joined failed: ").concat(t));Qt("EVENT_REPORT_DOMAIN",t[1]),Qt("EVENT_REPORT_BACKUP_DOMAIN",t[1]),Qt("LOG_UPLOAD_SERVER","".concat(t[1],":6444"))}}),this.signal.on(pt.ON_UPLINK_STATS,t=>{this._statsCollector.updateUplinkStats(t)}),this.signal.on(qe.REQUEST_RECOVER,(t,n,r)=>{if(!this.joinInfo)return r(new q(k.UNEXPECTED_ERROR,"gateway: can not recover, no join info"));t&&(this.joinInfo.multiIP=t,this.hasChangeBGPAddress=!0),this.isSignalRecover=!0,Kr(this,Vr.REQUEST_NEW_GATEWAY_LIST).then(n).catch(r)}),this.signal.on(qe.REQUEST_JOIN_INFO,async t=>{var n;if(this.updateTurnConfigFromSignal(),this.store.useP2P)return void t(this.getJoinMessage({ortc:{}}));const{iceParameters:r,dtlsParameters:i,rtpCapabilities:o}=await Kr(this,Vr.REQUEST_P2P_CONNECTION_PARAMS,{turnServer:(n=this.joinInfo)===null||n===void 0?void 0:n.turnServer});t(this.getJoinMessage({ortc:{iceParameters:r,dtlsParameters:i,rtpCapabilities:o,version:"2"}}))}),this.signal.on(qe.REQUEST_REJOIN_INFO,t=>{t(this.getRejoinMessage())}),this.signal.on(qe.REPORT_JOIN_GATEWAY,(t,n)=>{if(!this.joinInfo)return;let r,i="";var o;t instanceof q?(r=((o=t.data)===null||o===void 0?void 0:o.desc)||t.code,i=t.message):r=t,Pe.joinGateway(this.joinInfo.sid,{lts:this.joinGatewayStartTime,succ:!1,ec:r,errorMsg:i,addr:n,uid:this.joinInfo.uid,cid:this.joinInfo.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!this.joinInfo.proxyServer,signalChannel:"0",preload:this.joinInfo.preload}),this._isProactiveJoin=!1}),this.signal.on(qe.IS_P2P_DISCONNECTED,t=>{t(C0(this,Vr.IS_P2P_DISCONNECTED))}),this.signal.on(qe.DISCONNECT_P2P,()=>{this.emit(Vr.DISCONNECT_P2P)}),this.signal.on(qe.REQUEST_SUCCESS,()=>{this._signalTimeout=!1}),this.signal.on(qe.REQUEST_TIMEOUT,()=>{this._signalTimeout=!0}),this.signal.on(qe.JOIN_RESPONSE,t=>{const n=this.getCurrentGatewayAddress();this.emit(Vr.JOIN_RESPONSE,t,n)}),this.signal.on(qe.PRE_CONNECT_PC,async()=>{if(this.joinInfo){this.updateTurnConfigFromSignal();const t=this.getCurrentGatewayAddress(),n=H("FINGERPRINT")||this.joinInfo.apResponse.addresses[this.signal.currentURLIndex].fingerprint;if(t&&n){const r=z9(t);this.emit(Vr.PRE_CONNECT_PC,{candidates:r,fingerprint:n})}}})}async tryUnsubBeforeResub(t,n){try{await this.signal.request(Ke.UNSUBSCRIBE,{p2p_id:this.store.p2pId,stream_id:t,ortc:[n]},!0)}catch(r){throw w.warning("[".concat(this.store.clientId,"] tryUnsubBeforeResub warning"),r),r}}async tryUnsubDataChannelBeforeResub(t,n){try{await this.signal.request(Ke.UNSUBSCRIBE,{stream_id:n.id},!0)}catch(r){throw w.warning("unsubscribe datachannel warning",r),r}}async tryUnpubBeforeRepub(t,n){try{await this.signal.request(Ke.UNPUBLISH,{stream_id:t,ortc:n},!0)}catch(r){throw w.warning("[".concat(this.store.clientId,"] tryUnpubBeforeRepub warning: "),r),r}}async tryUnpubDataChannelBeforeRepub(t,n){try{await this.signal.request(Ke.UNPUBLISH_DATASTREAM,{channnel_id:n.channelId},!0)}catch(r){throw w.warning("unpublish datastream warning: ",r),r}}async tryMassUnsubBeforeResub(t){const n={users:t.map(r=>({stream_id:r.stream_id,stream_type:r.stream_type}))};try{await this.signal.request(Ke.UNSUBSCRIBE_STREAMS,n,!0)}catch(r){throw w.warning("[".concat(this.store.clientId,"] tryMassUnsubBeforeResub warning"),r),r}}async muteLocal(t,n){const r={action:t.find(i=>i.stream_type===Gt.Audio)?"mute_local_audio":"mute_local_video",p2p_id:this.store.p2pId,ortc:t,stream_id:n};try{await this.signal.request(Ke.CONTROL,r,!0,!0)}catch(i){throw w.warning("[".concat(this.store.clientId,"] gateway muteLocal warning: "),i),i}}async unmuteLocal(t,n){const r={action:t.find(i=>i.stream_type===Gt.Audio)?"unmute_local_audio":"unmute_local_video",p2p_id:this.store.p2pId,ortc:t,stream_id:n};try{await this.signal.request(Ke.CONTROL,r,!0,!0)}catch(i){throw w.warning("[".concat(this.store.clientId,"] gateway unmuteLocal warning: "),i),i}}async muteRemote(t,n){const r={action:t===De.AUDIO?"mute_remote_audio":"mute_remote_video",p2p_id:this.store.p2pId,stream_id:n};try{await this.signal.request(Ke.CONTROL,r,!0,!0)}catch(i){throw w.warning("[".concat(this.store.clientId,"] gateway muteRemote warning: "),i),i}}async unmuteRemote(t,n){const r={action:t===De.AUDIO?"unmute_remote_audio":"unmute_remote_video",p2p_id:this.store.p2pId,stream_id:n};try{await this.signal.request(Ke.CONTROL,r,!0,!0)}catch(i){throw w.warning("[".concat(this.store.clientId,"] gateway unmuteRemote warning: "),i),i}}uploadWRTCStats(t){this.signal.uploadWRTCStats(t)}upload(t,n){this.signal.upload(t,n)}getSignalRTT(){return this.signal.rtt}async restartICE(t){const n={p2p_id:this.store.p2pId,stream_id:this.store.uid,ortc:t};try{return await this.signal.request(Ke.RESTART_ICE,n,!0)}catch(r){throw w.warning("[".concat(this.store.clientId,"] P2PChannel.restartICE warning: "),r),r}}reconnect(){this.state==="CONNECTED"&&this.signal.reconnect(void 0,Wr.P2P_FAILED)}getCurrentGatewayAddress(){var t,n;if(!H("GATEWAY_WSS_ADDRESS"))return H("USE_CANDIDATE_FROM_AP_DETAIL")&&(t=this.joinInfo)!==null&&t!==void 0&&t.apGatewayAddress?(w.debug("[".concat(this.store.clientId,"] use candidate from ap detail, ").concat(JSON.stringify(this.joinInfo.apGatewayAddress))),this.joinInfo.apGatewayAddress):(n=this.joinInfo)!==null&&n!==void 0&&n.gatewayAddrs?this.joinInfo.gatewayAddrs[this.signal.currentURLIndex]:void 0}async setPublishAudioFilterEnabled(t){await this.signal.request(Ke.SET_PARAMETER,{enablePublishAudioFilter:t})}}let jv=0,_T=0;function Ys(e,t,n,r){return new _e((i,o)=>{t.timeout=t.timeout||H("HTTP_CONNECT_TIMEOUT"),t.responseType=t.responseType||"json",t.data&&!n?(t.data=JSON.stringify(t.data),jv+=Ec(t.data)):n&&(t.data.size?jv+=t.data.size:t.data instanceof FormData?jv+=J7(t.data):jv+=Ec(JSON.stringify(t.data))),t.headers=t.headers||{},t.headers["Content-Type"]=t.headers["Content-Type"]||"application/json",t.method="POST",t.url=e,eo.request(t).then(a=>{typeof a.data=="string"?_T+=Ec(a.data):a.data instanceof ArrayBuffer||a.data instanceof Uint8Array?_T+=a.data.byteLength:_T+=Ec(JSON.stringify(a.data)),r&&i({data:a.data,headers:a.headers}),i(a.data)}).catch(a=>{eo.isCancel(a)?o(new q(k.OPERATION_ABORTED,"cancel token canceled")):a.code==="ECONNABORTED"?o(new q(k.NETWORK_TIMEOUT,a.message)):a.response?o(new q(k.NETWORK_RESPONSE_ERROR,a.response.status)):o(new q(k.NETWORK_ERROR,a.message))})})}/*! formdata-polyfill. MIT License. Jimmy W?rting <https://jimmy.warting.se/opensource> */(function(){var e;function t(L){var D=0;return function(){return D<L.length?{done:!1,value:L[D++]}:{done:!0}}}var n=typeof Object.defineProperties=="function"?Object.defineProperty:function(L,D,j){return L==Array.prototype||L==Object.prototype||(L[D]=j.value),L},r,i=function(L){L=[typeof globalThis=="object"&&globalThis,L,typeof window=="object"&&window,typeof self=="object"&&self,typeof mf=="object"&&mf];for(var D=0;D<L.length;++D){var j=L[D];if(j&&j.Math==Math)return j}throw Error("Cannot find global object")}(this);function o(L,D){if(D)e:{var j=i;L=L.split(".");for(var F=0;F<L.length-1;F++){var y=L[F];if(!(y in j))break e;j=j[y]}(D=D(F=j[L=L[L.length-1]]))!=F&&D!=null&&n(j,L,{configurable:!0,writable:!0,value:D})}}function a(L){return(L={next:L})[Symbol.iterator]=function(){return this},L}function s(L){var D=typeof Symbol<"u"&&Symbol.iterator&&L[Symbol.iterator];return D?D.call(L):{next:t(L)}}if(o("Symbol",function(L){function D(y,I){this.A=y,n(this,"description",{configurable:!0,writable:!0,value:I})}if(L)return L;D.prototype.toString=function(){return this.A};var j="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",F=0;return function y(I){if(this instanceof y)throw new TypeError("Symbol is not a constructor");return new D(j+(I||"")+"_"+F++,I)}}),o("Symbol.iterator",function(L){if(L)return L;L=Symbol("Symbol.iterator");for(var D="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),j=0;j<D.length;j++){var F=i[D[j]];typeof F=="function"&&typeof F.prototype[L]!="function"&&n(F.prototype,L,{configurable:!0,writable:!0,value:function(){return a(t(this))}})}return L}),typeof Object.setPrototypeOf=="function")r=Object.setPrototypeOf;else{var c;e:{var l={};try{l.__proto__={a:!0},c=l.a;break e}catch{}c=!1}r=c?function(L,D){if(L.__proto__=D,L.__proto__!==D)throw new TypeError(L+" is not extensible");return L}:null}var u=r;function d(){this.m=!1,this.j=null,this.v=void 0,this.h=1,this.u=this.C=0,this.l=null}function h(L){if(L.m)throw new TypeError("Generator is already running");L.m=!0}function f(L,D){return L.h=3,{value:D}}function g(L){this.g=new d,this.G=L}function p(L,D,j,F){try{var y=D.call(L.g.j,j);if(!(y instanceof Object))throw new TypeError("Iterator result "+y+" is not an object");if(!y.done)return L.g.m=!1,y;var I=y.value}catch(N){return L.g.j=null,L.g.s(N),m(L)}return L.g.j=null,F.call(L.g,I),m(L)}function m(L){for(;L.g.h;)try{var D=L.G(L.g);if(D)return L.g.m=!1,{value:D.value,done:!1}}catch(j){L.g.v=void 0,L.g.s(j)}if(L.g.m=!1,L.g.l){if(D=L.g.l,L.g.l=null,D.F)throw D.D;return{value:D.return,done:!0}}return{value:void 0,done:!0}}function _(L){this.next=function(D){return L.o(D)},this.throw=function(D){return L.s(D)},this.return=function(D){return function(j,F){h(j.g);var y=j.g.j;return y?p(j,"return"in y?y.return:function(I){return{value:I,done:!0}},F,j.g.return):(j.g.return(F),m(j))}(L,D)},this[Symbol.iterator]=function(){return this}}function E(L,D){return D=new _(new g(D)),u&&L.prototype&&u(D,L.prototype),D}if(d.prototype.o=function(L){this.v=L},d.prototype.s=function(L){this.l={D:L,F:!0},this.h=this.C||this.u},d.prototype.return=function(L){this.l={return:L},this.h=this.u},g.prototype.o=function(L){return h(this.g),this.g.j?p(this,this.g.j.next,L,this.g.o):(this.g.o(L),m(this))},g.prototype.s=function(L){return h(this.g),this.g.j?p(this,this.g.j.throw,L,this.g.o):(this.g.s(L),m(this))},o("Array.prototype.entries",function(L){return L||function(){return function(D,j){D instanceof String&&(D+="");var F=0,y=!1,I={next:function(){if(!y&&F<D.length){var N=F++;return{value:j(N,D[N]),done:!1}}return y=!0,{done:!0,value:void 0}}};return I[Symbol.iterator]=function(){return I},I}(this,function(D,j){return[D,j]})}}),typeof Blob<"u"&&(typeof FormData>"u"||!FormData.prototype.keys)){var S=function(L,D){for(var j=0;j<L.length;j++)D(L[j])},C=function(L){return L.replace(/\r?\n|\r/g,`\r
`)},b=function(L,D,j){return D instanceof Blob?(j=j!==void 0?j+"":typeof D.name=="string"?D.name:"blob",D.name===j&&Object.prototype.toString.call(D)!=="[object Blob]"||(D=new File([D],j)),[String(L),D]):[String(L),String(D)]},T=function(L,D){if(L.length<D)throw new TypeError(D+" argument required, but only "+L.length+" present.")},R=typeof globalThis=="object"?globalThis:typeof window=="object"?window:typeof self=="object"?self:this,A=R.FormData,O=R.XMLHttpRequest&&R.XMLHttpRequest.prototype.send,x=R.Request&&R.fetch,M=R.navigator&&R.navigator.sendBeacon,$=R.Element&&R.Element.prototype,U=R.Symbol&&Symbol.toStringTag;U&&(Blob.prototype[U]||(Blob.prototype[U]="Blob"),"File"in R&&!File.prototype[U]&&(File.prototype[U]="File"));try{new File([],"")}catch{R.File=function(D,j,F){return D=new Blob(D,F||{}),Object.defineProperties(D,{name:{value:j},lastModified:{value:+(F&&F.lastModified!==void 0?new Date(F.lastModified):new Date)},toString:{value:function(){return"[object File]"}}}),U&&Object.defineProperty(D,U,{value:"File"}),D}}var V=function(L){return L.replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22")},W=function(L){this.i=[];var D=this;L&&S(L.elements,function(j){if(j.name&&!j.disabled&&j.type!=="submit"&&j.type!=="button"&&!j.matches("form fieldset[disabled] *"))if(j.type==="file"){var F=j.files&&j.files.length?j.files:[new File([],"",{type:"application/octet-stream"})];S(F,function(y){D.append(j.name,y)})}else j.type==="select-multiple"||j.type==="select-one"?S(j.options,function(y){!y.disabled&&y.selected&&D.append(j.name,y.value)}):j.type==="checkbox"||j.type==="radio"?j.checked&&D.append(j.name,j.value):(F=j.type==="textarea"?C(j.value):j.value,D.append(j.name,F))})};if((e=W.prototype).append=function(L,D,j){T(arguments,2),this.i.push(b(L,D,j))},e.delete=function(L){T(arguments,1);var D=[];L=String(L),S(this.i,function(j){j[0]!==L&&D.push(j)}),this.i=D},e.entries=function L(){var D,j=this;return E(L,function(F){if(F.h==1&&(D=0),F.h!=3)return D<j.i.length?F=f(F,j.i[D]):(F.h=0,F=void 0),F;D++,F.h=2})},e.forEach=function(L,D){T(arguments,1);for(var j=s(this),F=j.next();!F.done;F=j.next()){var y=s(F.value);F=y.next().value,y=y.next().value,L.call(D,y,F,this)}},e.get=function(L){T(arguments,1);var D=this.i;L=String(L);for(var j=0;j<D.length;j++)if(D[j][0]===L)return D[j][1];return null},e.getAll=function(L){T(arguments,1);var D=[];return L=String(L),S(this.i,function(j){j[0]===L&&D.push(j[1])}),D},e.has=function(L){T(arguments,1),L=String(L);for(var D=0;D<this.i.length;D++)if(this.i[D][0]===L)return!0;return!1},e.keys=function L(){var D,j,F,y,I=this;return E(L,function(N){if(N.h==1&&(D=s(I),j=D.next()),N.h!=3)return j.done?void(N.h=0):(F=j.value,y=s(F),f(N,y.next().value));j=D.next(),N.h=2})},e.set=function(L,D,j){T(arguments,2),L=String(L);var F=[],y=b(L,D,j),I=!0;S(this.i,function(N){N[0]===L?I&&(I=!F.push(y)):F.push(N)}),I&&F.push(y),this.i=F},e.values=function L(){var D,j,F,y,I=this;return E(L,function(N){if(N.h==1&&(D=s(I),j=D.next()),N.h!=3)return j.done?void(N.h=0):(F=j.value,(y=s(F)).next(),f(N,y.next().value));j=D.next(),N.h=2})},W.prototype._asNative=function(){for(var L=new A,D=s(this),j=D.next();!j.done;j=D.next()){var F=s(j.value);j=F.next().value,F=F.next().value,L.append(j,F)}return L},W.prototype._blob=function(){var L="----formdata-polyfill-"+Math.random(),D=[],j="--"+L+`\r
Content-Disposition: form-data; name="`;return this.forEach(function(F,y){return typeof F=="string"?D.push(j+V(C(y))+`"\r
\r
`+C(F)+`\r
`):D.push(j+V(C(y))+'"; filename="'+V(F.name)+`"\r
Content-Type: `+(F.type||"application/octet-stream")+`\r
\r
`,F,`\r
`)}),D.push("--"+L+"--"),new Blob(D,{type:"multipart/form-data; boundary="+L})},W.prototype[Symbol.iterator]=function(){return this.entries()},W.prototype.toString=function(){return"[object FormData]"},$&&!$.matches&&($.matches=$.matchesSelector||$.mozMatchesSelector||$.msMatchesSelector||$.oMatchesSelector||$.webkitMatchesSelector||function(L){for(var D=(L=(this.document||this.ownerDocument).querySelectorAll(L)).length;0<=--D&&L.item(D)!==this;);return-1<D}),U&&(W.prototype[U]="FormData"),O){var z=R.XMLHttpRequest.prototype.setRequestHeader;R.XMLHttpRequest.prototype.setRequestHeader=function(L,D){z.call(this,L,D),L.toLowerCase()==="content-type"&&(this.B=!0)},R.XMLHttpRequest.prototype.send=function(L){L instanceof W?(L=L._blob(),this.B||this.setRequestHeader("Content-Type",L.type),O.call(this,L)):O.call(this,L)}}x&&(R.fetch=function(L,D){return D&&D.body&&D.body instanceof W&&(D.body=D.body._blob()),x.call(this,L,D)}),M&&(R.navigator.sendBeacon=function(L,D){return D instanceof W&&(D=D._asNative()),M.call(this,L,D)}),R.FormData=W}})();const A0=()=>{const e=H("AREAS");return e.length===0&&e.push(Lt.GLOBAL),js(e).call(e,(t,n,r)=>{const i=X9(n);return i?r===0?i:"".concat(t,",").concat(i):t},"")},X9=e=>e===Lt.OVERSEA?"".concat(ti.ASIA,",").concat(ti.EUROPE,",").concat(ti.AFRICA,",").concat(ti.NORTH_AMERICA,",").concat(ti.SOUTH_AMERICA,",").concat(ti.OCEANIA):ti[e],gfe=e=>{const t={CODE:"",WEBCS_DOMAIN:[],WEBCS_DOMAIN_BACKUP_LIST:[],PROXY_CS:[],CDS_AP:[],ACCOUNT_REGISTER:[],UAP_AP:[],EVENT_REPORT_DOMAIN:[],EVENT_REPORT_BACKUP_DOMAIN:[],LOG_UPLOAD_SERVER:[],PROXY_SERVER_TYPE3:[]};return e.map(n=>{const r=Hy[n],i=Object.keys(r);i&&i.map(o=>{o!=="CODE"&&(t[o]=t[o].concat(r[o]))})}),t},f_={GLOBAL:{ASIA:[Lt.CHINA,Lt.JAPAN,Lt.INDIA,Lt.KOREA,Lt.HKMC],EUROPE:[],NORTH_AMERICA:[Lt.US],SOUTH_AMERICA:[],OCEANIA:[],AFRICA:[]}},Hv=Object.keys(f_[Lt.GLOBAL]),ST=[Lt.CHINA,Lt.NORTH_AMERICA,Lt.EUROPE,Lt.ASIA,Lt.JAPAN,Lt.INDIA,Lt.OCEANIA,Lt.SOUTH_AMERICA,Lt.AFRICA,Lt.KOREA,Lt.HKMC,Lt.US],vfe=function(e,t){let n=[];if(Ce(e).call(e,Lt.GLOBAL)){const o=[Lt.GLOBAL,Lt.OVERSEA],a=Object.keys(Hy);if(t===Lt.GLOBAL)throw new q(k.INVALID_PARAMS,"GLOBAL is an invalid excludedArea value");if(t===Lt.CHINA)n=[Lt.OVERSEA];else if(i=t,Ce(Hv).call(Hv,i)){const s=(r=t,f_[Lt.GLOBAL][r]||[]),c=[...o,t,...s];n=a.filter(l=>!Ce(c).call(c,l))}else if(function(s){let c=!1;return Hv.forEach(l=>{var u;Ce(u=f_[Lt.GLOBAL][l]).call(u,s)&&(c=!0)}),c}(t)){const s=function(l){let u;return Hv.forEach(d=>{var h;Ce(h=f_[Lt.GLOBAL][d]).call(h,l)&&(u=d)}),u}(t),c=[...o,s,t];n=a.filter(l=>!Ce(c).call(c,l))}else n=e;n=function(s){const c=[];return ST.forEach(l=>{Ce(s).call(s,l)&&c.push(l)}),c.concat(s.filter(l=>!Ce(ST).call(ST,l)))}(n)}else n=e;var r,i;return n};function lU(e){var t,n;if(!e&&Ce(t=H("AREAS")).call(t,Lt.EXTENSIONS))return w.debug("update area from ap : reset"),void CN(Gue,!0);if(!Ce(n=H("AREAS")).call(n,Lt.GLOBAL)||!e)return;let r=Hy.EXTENSIONS;r&&(r={CODE:X9(Lt.EXTENSIONS),WEBCS_DOMAIN:["ap-web-1-".concat(e,".agora.io")],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-".concat(e,".ap.sd-rtn.com")],PROXY_CS:["proxy-ap-web-".concat(e,".agora.io")],CDS_AP:["cds-ap-web-1-".concat(e,".agora.io"),"cds-ap-web-2-".concat(e,".ap.sd-rtn.com")],ACCOUNT_REGISTER:["sua-ap-web-1-".concat(e,".agora.io"),"sua-ap-web-2-".concat(e,".ap.sd-rtn.com")],UAP_AP:["uap-ap-web-1-".concat(e,".agora.io"),"uap-ap-web-2-".concat(e,".ap.sd-rtn.com")],EVENT_REPORT_DOMAIN:["statscollector-1-".concat(e,".agora.io")],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-".concat(e,".agora.io")],LOG_UPLOAD_SERVER:["logservice-".concat(e,".agora.io")],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy-".concat(e,".agora.io")]},w.debug("update area from ap success: ".concat(e,",config is "),r),Qt("AREAS",[Lt.EXTENSIONS],!0),Object.keys(r).map(i=>{i==="LOG_UPLOAD_SERVER"||i==="EVENT_REPORT_DOMAIN"||i==="EVENT_REPORT_BACKUP_DOMAIN"||i==="PROXY_SERVER_TYPE3"?Qt(i,r[i][0]):Qt(i,r[i])}))}function CN(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const n=Pe.reportApiInvoke(null,{name:dr.SET_AREA,options:e,tag:kn.TRACER});try{let r=[];if(typeof e=="string"&&(r=[e]),Array.isArray(e)&&(e.forEach(o=>{if(!Ce(GM).call(GM,o))throw new q(k.INVALID_PARAMS,"invalid area code")}),r=e),Object.prototype.toString.call(e)==="[object Object]"){const{areaCode:o,excludedArea:a}=e;if(!o)throw new q(k.INVALID_PARAMS,"area code is needed");let s=o;typeof o=="string"&&(s=[o]),r=a?vfe(s,a):s}if(!t){if(ql.AREAS){const o=new q(k.PROHIBITED_OPERATION,"setArea is prohibited because of config-distribute");return n.onError(o),void w.warning("setArea is prohibited because of config-distribute")}if(Ce(r).call(r,Lt.GLOBAL)&&H("AREAS")===Lt.EXTENSIONS){const o=new q(k.PROHIBITED_OPERATION,"setArea is prohibited because of ap extensions");return n.onError(o),void w.warning("setArea is prohibited because of ap extensions")}}Qt("AREAS",r,t);const i=gfe(r);Object.keys(i).map(o=>{o==="LOG_UPLOAD_SERVER"||o==="EVENT_REPORT_DOMAIN"||o==="EVENT_REPORT_BACKUP_DOMAIN"||o==="PROXY_SERVER_TYPE3"?Qt(o,i[o][0]):Qt(o,i[o])}),w.debug("set area success:",r.join(","))}catch(r){throw n.onError(r),r}n.onSuccess()}function uU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function nA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?uU(Object(n),!0).forEach(function(r){P(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uU(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}let yT=1;function Efe(e,t,n,r,i){yT+=1;const o={sid:n.sid,command:"convergeAllocateEdge",uid:"666",appId:n.appId,ts:Math.floor(Date.now()/1e3),seq:yT,requestId:yT,version:va,cname:n.cname},a={service_name:t,json_body:JSON.stringify(o)};let s,c,l=e[0];return qs(async()=>{s=Date.now();const u=await Ys(l,{data:a,cancelToken:r,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"}});if(c=Date.now()-s,u.code!==0){const f=new q(k.UNEXPECTED_RESPONSE,"live streaming ap error, code"+u.code,{retry:!0,responseTime:c});throw w.error(f.toString()),f}const d=JSON.parse(u.json_body);if(d.code!==200){const f=new q(k.UNEXPECTED_RESPONSE,"live streaming app center error, code: ".concat(d.code,", reason: ").concat(d.reason),{code:d.code,responseTime:c});throw w.error(f.toString()),f}if(!d.servers||d.servers.length===0){const f=new q(k.UNEXPECTED_RESPONSE,"live streaming app center empty server",{code:d.code,responseTime:c});throw w.error(f.toString()),f}const h=function(f,g){return{addressList:f.servers.map(p=>"wss://".concat(p.address.replace(/\./g,"-"),".").concat(H("WORKER_DOMAIN"),":").concat(p.wss,"?serviceName=").concat(encodeURIComponent(g))),workerToken:f.workerToken,vid:f.vid}}(d,t);return H("LIVE_STREAMING_ADDRESS")&&(h.addressList=H("LIVE_STREAMING_ADDRESS")instanceof Array?H("LIVE_STREAMING_ADDRESS"):[H("LIVE_STREAMING_ADDRESS")]),nA(nA({},h),{},{responseTime:c})},(u,d)=>(Pe.apworkerEvent(n.sid,{success:!0,sc:200,serviceName:t,responseDetail:JSON.stringify(u.addressList),firstSuccess:d===0,responseTime:c,serverIp:e[d%e.length]}),!1),(u,d)=>(Pe.apworkerEvent(n.sid,{success:!1,sc:u.data&&u.data.code||200,serviceName:t,responseTime:c,serverIp:e[d%e.length]}),!!(u.code!==k.OPERATION_ABORTED&&u.code!==k.UNEXPECTED_RESPONSE||u.data&&u.data.retry)&&(l=e[(d+1)%e.length],!0)),i)}let CT=1;function dU(e,t,n,r){let{url:i,areaCode:o}=e;const{clientId:a,sid:s}=t,c=Date.now();let l;const[u,d]=TN(t,o,[Xn.CHOOSE_SERVER]);let h=Jn.networkState;return qs(async()=>{h&&Jn.networkState===Io.OFFLINE&&Jn.onlineWaiter&&await _e.race([Jn.onlineWaiter,Lr(r&&r.maxRetryTimeout||ar.maxRetryTimeout)]),h=Jn.networkState;const{data:f,headers:g}=await Ys(i,{data:u,cancelToken:n,headers:{"Content-Type":"multipart/form-data;"}},!0,!0);l=g.http3==="1"?1:-1,Pe.reportResourceTiming(i,s),J9(f,i,t,c,[Xn.CHOOSE_SERVER],l);const p=w0(f,Xn.CHOOSE_SERVER);return bN(p),dN(p,i)},f=>(f&&Pe.joinChooseServer(s,{lts:c,succ:!0,csAddr:i,opid:d,serverList:f.gatewayAddrs.map(g=>g.address),ec:null,cid:f.cid.toString(),uid:f.uid.toString(),csIp:f.csIp,unilbsServerIds:[Xn.CHOOSE_SERVER].toString(),isHttp3:l}),!1),f=>f.code!==k.OPERATION_ABORTED&&(f.code===k.CAN_NOT_GET_GATEWAY_SERVER?f.data.retry:(Pe.joinChooseServer(s,{lts:c,succ:!1,csAddr:i,serverList:null,opid:d,ec:f.code,csIp:f.data&&f.data.csIp,unilbsServerIds:[Xn.CHOOSE_SERVER].toString(),extend:JSON.stringify({networkState:h}),isHttp3:l}),w.warning("[".concat(a||"sid-".concat(s.slice(0,6)),"] Choose server network error, retry"),f),!0)),r)}function hU(e,t,n,r){let i,{url:o,areaCode:a,serviceIds:s}=e;const c=Date.now(),[l,u]=TN(t,a,s);let d;return qs(async()=>{d&&Jn.networkState===Io.OFFLINE&&Jn.onlineWaiter&&await _e.race([Jn.onlineWaiter,Lr(r&&r.maxRetryTimeout||ar.maxRetryTimeout)]),d=Jn.networkState;const{data:h,headers:f}=await Ys(o,{data:l,cancelToken:n,headers:{"Content-Type":"multipart/form-data;"}},!0,!0);i=f.http3==="1"?1:-1,Pe.reportResourceTiming(o,t.sid),J9(h,o,t,c,s,i);const g=w0(h,Xn.CHOOSE_SERVER),p=w0(h,t.cloudProxyServer==="proxy5"?Xn.CLOUD_PROXY_5:t.cloudProxyServer==="proxy3"||t.cloudProxyServer==="proxy4"?Xn.CLOUD_PROXY:Xn.CLOUD_PROXY_FALLBACK);return bN(g),{gatewayInfo:dN(g,o),proxyInfo:p,url:o}},h=>(h.gatewayInfo&&Pe.joinChooseServer(t.sid,{lts:c,succ:!0,csAddr:o,serverList:h.gatewayInfo.gatewayAddrs.map(f=>f.address),ec:null,opid:u,cid:h.gatewayInfo.cid.toString(),uid:h.gatewayInfo.uid.toString(),csIp:h.gatewayInfo.csIp,unilbsServerIds:s.toString(),isHttp3:i}),h.proxyInfo&&Pe.joinWebProxyAP(t.sid,{lts:c,sucess:1,apServerAddr:o,turnServerAddrList:h.proxyInfo.addresses.map(f=>f.ip).join(","),errorCode:null,eventType:t.cloudProxyServer,unilbsServerIds:s.toString()}),!1),h=>h.code!==k.OPERATION_ABORTED&&(h.code===k.CAN_NOT_GET_GATEWAY_SERVER?h.data.retry:(Pe.joinWebProxyAP(t.sid,{lts:c,sucess:0,apServerAddr:o,turnServerAddrList:null,errorCode:h.code,eventType:t.cloudProxyServer,unilbsServerIds:s.toString(),extend:JSON.stringify({networkState:d})}),w.warning("[".concat(t.clientId,"] multi unilbs network error, retry"),h),!0)),r)}const J9=(e,t,n,r,i,o)=>{const{sid:a,clientId:s,cloudProxyServer:c}=n,l=[],u=d=>{d.flag===4096?Pe.joinChooseServer(a,{lts:r,succ:!1,csAddr:t,opid:e.opid,serverList:null,ec:d.error.message,csIp:d.error.data&&d.error.data.csIp,unilbsServerIds:i.toString(),isHttp3:o}):d.flag!==1048576&&d.flag!==4194304&&d.flag!==4194310||Pe.joinWebProxyAP(a,{lts:r,sucess:0,apServerAddr:t,turnServerAddrList:null,errorCode:d.error.code,eventType:c,unilbsServerIds:i.toString()})};if(e.response_body.forEach(d=>{const h=d.buffer.code;if(d.uri===23&&h===0&&!d.buffer.edges_services)if(d.buffer.flag===4194310)w.warning("no edge services in ap response of proxy fallback, will not set proxy in iceServers"),d.buffer.edges_services=[];else{const f={error:new q(k.CAN_NOT_GET_GATEWAY_SERVER,"no edge services in ap response",{retry:!0,csIp:e.detail[502]}),flag:d.buffer.flag};l.push(f),u(f)}if(h!==0){const f=Uf(h),g={error:new q(k.CAN_NOT_GET_GATEWAY_SERVER,f.desc,{desc:f.desc,retry:f.retry,csIp:e.detail[502]}),flag:d.buffer.flag};d.buffer.flag===4194310?w.warning(g.error.toString()):l.push(g),u(g)}}),l.length)throw w.warning("[".concat(s||"sid-".concat(a.slice(0,6)),"] multi unilbs ").concat(t," failed, ").concat(l.map(d=>"flag: ".concat(d.flag,", message: ").concat(d.error.message,", retry: ").concat(d.error.data.retry)).join(" | "))),new q(k.CAN_NOT_GET_GATEWAY_SERVER,l.map(d=>"flag: ".concat(d.flag,", message: ").concat(d.error.message)).join(" | "),{retry:!!l.find(d=>d.error.data.retry),csIp:e.detail[502],desc:[...new Set(l.map(d=>{var h;return d==null||(h=d.error)===null||h===void 0||(h=h.data)===null||h===void 0?void 0:h.desc}).filter(d=>!!d))]})},bN=e=>{var t,n,r,i;if(e.addresses&&e.addresses.length===0&&e.code===0)throw new q(k.CAN_NOT_GET_GATEWAY_SERVER,"void gateway address",{retry:!0,csIp:e.detail&&e.detail[502]});if(H("AP_AREA")&&((r=e.detail)!==null&&r!==void 0&&r[23]&&typeof((i=e.detail)===null||i===void 0?void 0:i[23])=="string"?lU(e.detail[23].toLowerCase()):lU()),(t=e.detail)!==null&&t!==void 0&&t[19]&&typeof((n=e.detail)===null||n===void 0?void 0:n[19])=="string"){const a=e.detail[19],s=a==null?void 0:a.split(";");for(let c=0;c<s.length;c++){var o;const l=yi(o=s[c]).call(o);e.addresses[c]&&s&&(e.addresses[c].fingerprint=l)}}if(H("GATEWAY_ADDRESS")&&H("GATEWAY_ADDRESS").length>0){w.debug("assign gateway address to",H("GATEWAY_ADDRESS"));const a=H("GATEWAY_ADDRESS").map(s=>{var c,l;const u=(c=(l=e.addresses.find(d=>d.ip===s.ip&&d.port===s.port))===null||l===void 0?void 0:l.fingerprint)!==null&&c!==void 0?c:"";return{ip:s.ip,port:s.port,ticket:e.addresses[0]&&e.addresses[0].ticket,fingerprint:u}});e.addresses=a}},_fe=(e,t)=>{if(e.response_body&&e.response_body.length){const n=e.response_body[0];if(n.buffer.code!==0){const r=Uf(n.buffer.code);throw new q(k.UPDATE_TICKET_FAILED,"[".concat(n.buffer.code,"]: ").concat(r.desc),{retry:r.retry})}return n.buffer.ticket}throw w.debug("update ticket request received ap response without response body:",t),new q(k.UPDATE_TICKET_FAILED,"cannot find response body from ap response",{retry:!1})},TN=(e,t,n)=>{const r=Math.floor(Math.random()*1e12),i={appid:e.appId,client_ts:Date.now(),opid:r,sid:e.sid,request_bodies:[{uri:22,buffer:{cname:e.cname,detail:nA({6:e.stringUid,11:t,12:H("USE_NEW_TOKEN")?"1":void 0,22:t},e.apRTM?{26:"RTM2"}:{}),key:e.token,service_ids:n,uid:e.uid||0}}]};i.request_bodies.forEach(a=>{e.multiIP&&e.multiIP.gateway_ip&&(a.buffer.detail[5]=JSON.stringify({vocs_ip:[e.multiIP.uni_lbs_ip],vos_ip:[e.multiIP.gateway_ip]}))});const o=new FormData;return o.append("request",JSON.stringify(i)),[o,r]},Sfe=(e,t)=>{const n=Math.floor(Math.random()*1e12),r={appid:e.appId,client_ts:Date.now(),opid:n,sid:e.sid,request_bodies:[{uri:28,buffer:{cname:e.cname,detail:{1:"",6:e.stringUid,12:"1"},token:e.token,service_ids:t,uid:e.uid||0,edges_services:e.apResponse.addresses.map(o=>({ip:o.ip,port:o.port}))}}]},i=new FormData;return i.append("request",JSON.stringify(r)),[i,n]};let Cf=0;function mp(e){return _e.all(e.map(t=>t.then(n=>{throw n},n=>n))).then(t=>{throw t},t=>t)}const O0=async e=>{let{fragementLength:t,referenceList:n,asyncMapHandler:r,allFailedhandler:i,promisesCollector:o}=e,a=0;const s=t;let c,l=0;const u=async()=>{const d=(()=>{const h=a*s,f=h+s;return n.slice(h,f).map(r)})();o&&o.push(...d);try{c=await mp(d)}catch(h){if(l+=s,a++,!(l>=n.length))return void await u();i(h)}d.forEach(h=>h.cancel())};return await u(),c},Q9=async e=>{let{referenceList:t,asyncMapHandler:n,closeFn:r}=e;const i=t.length;let o=0;const a=async()=>{const s=n(t.shift());try{return await s}catch(c){if(o++,o>=i||r!=null&&r(c))throw c;return a()}};return a()};async function rA(e,t,n,r){return{gatewayInfo:await async function(o,a,s,c){let l=null;const u=[],d=async()=>{const f=H("WEBCS_DOMAIN").slice(0,H("AJAX_REQUEST_CONCURRENT")).map(m=>({url:o.proxyServer?"https://".concat(o.proxyServer,"/ap/?url=").concat(m+"/api/v2/transpond/webrtc?v=2"):"https://".concat(m,"/api/v2/transpond/webrtc?v=2"),areaCode:A0()})),g=c.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:f.map(m=>m.url)}),p=await O0({fragementLength:H("FRAGEMENT_LENGTH"),referenceList:f,asyncMapHandler:m=>(w.debug("[".concat(o.clientId,"] Connect to choose_server:"),m.url),dU(m,o,a,s)),allFailedhandler:m=>{throw c.recordJoinChannelService({endTs:Date.now(),status:"error",errors:m},g),m[0]},promisesCollector:u});return c.recordJoinChannelService({endTs:Date.now(),status:"success"},g),p},h=async()=>{if(await Lr(1e3),l!==null)return l;const f=H("WEBCS_DOMAIN_BACKUP_LIST").map(m=>({url:o.proxyServer?"https://".concat(o.proxyServer,"/ap/?url=").concat(m+"/api/v2/transpond/webrtc?v=2"):"https://".concat(m,"/api/v2/transpond/webrtc?v=2"),areaCode:A0()})),g=c.recordJoinChannelService({endTs:void 0,startTs:Date.now(),status:"pending",service:"chooseServer",urls:f.map(m=>m.url)}),p=await O0({fragementLength:H("FRAGEMENT_LENGTH"),referenceList:f,asyncMapHandler:m=>(w.debug("[".concat(o.clientId,"] Connect to backup choose_server:"),m.url),dU(m,o,a,s)),allFailedhandler:m=>{throw c.recordJoinChannelService({endTs:Date.now(),status:"error",errors:m},g),m[0]},promisesCollector:u});return c.recordJoinChannelService({endTs:Date.now(),status:"success"},g),p};try{return l=await mp([d(),h()]),u.length&&u.forEach(f=>f.cancel&&typeof f.cancel=="function"&&f.cancel()),l}catch(f){throw f[0]}}(e,t,n,r)}}async function fU(e,t,n,r,i){const o=e.cloudProxyServer;if(o==="disabled"){if(!r)return;if(e.useLocalAccessPoint)return await rA(e,t,n,i);if(H("JOIN_WITH_FALLBACK_MEDIA_PROXY")){const{gatewayInfo:h,proxyInfo:f}=await mU(e,t,n,i);if(e.turnServer&&e.turnServer.mode!=="auto")return{gatewayInfo:h};const g=f.map(p=>({turnServerURL:p.address,tcpport:p.tcpport||jr.tcpport,udpport:p.udpport||jr.udpport,username:p.username||jr.username,password:p.password||jr.password,forceturn:!1,security:!0}));if(i.useP2P){var a;const p=(a=e.uid)!==null&&a!==void 0?a:h.uid,m="glb:".concat(p.toString()),_=await VI(m),E=f.map(S=>({turnServerURL:S.address,tcpport:S.tcpport||jr.tcpport,udpport:S.udpport||jr.udpport,username:m,password:_,forceturn:!1,security:!0}));g.push(...E)}return e.turnServer={mode:"manual",servers:g},{gatewayInfo:h}}return await rA(e,t,n,i)}const{proxyInfo:s,gatewayInfo:c}=await mU(e,t,n,i),l={gatewayInfo:c},u=s.map(h=>({turnServerURL:h.address,tcpport:o==="proxy3"?void 0:h.tcpport?h.tcpport:jr.tcpport,udpport:o==="proxy4"?void 0:h.udpport?h.udpport:jr.udpport,username:h.username||jr.username,password:h.password||jr.password,forceturn:o!=="proxy4",security:o==="proxy5"}));if(i.useP2P){var d;const h=(d=e.uid)!==null&&d!==void 0?d:c.uid,f="glb:".concat(h.toString()),g=await VI(f),p=s.map(m=>({turnServerURL:m.address,tcpport:o==="proxy3"?void 0:m.tcpport||jr.tcpport,udpport:o==="proxy4"?void 0:m.udpport||jr.udpport,username:f,password:g,forceturn:o!=="proxy4",security:o==="proxy5"}));u.push(...p)}return e.turnServer={mode:"manual",servers:u},w.debug("[".concat(e.clientId,"] set proxy server: ").concat(e.proxyServer,", mode: ").concat(o)),l}async function Z9(e,t,n,r,i){const o=H("ACCOUNT_REGISTER").slice(0,H("AJAX_REQUEST_CONCURRENT"));let a=[];a=t.proxyServer?o.map(c=>"https://".concat(t.proxyServer,"/ap/?url=").concat(c+"/api/v1")):o.map(c=>"https://".concat(c,"/api/v1"));const s=i==null?void 0:i.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"stringUID",urls:a});try{const c=await async function(l,u,d,h,f){const g=Date.now(),p={sid:d.sid,opid:10,appid:d.appId,string_uid:u};let m=l[0];const _=await qs(()=>Ys(m+"".concat(m.indexOf("?")===-1?"?":"&","action=stringuid"),{data:p,cancelToken:h,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":72}}),(E,S)=>{if(E.code===0){if(E.uid<=0||E.uid>=Math.pow(2,32))throw w.error("Invalid Uint Uid ".concat(u," => ").concat(E.uid),E),Pe.reqUserAccount(p.sid,{lts:g,success:!1,serverAddr:m,stringUid:p.string_uid,uid:E.uid,errorCode:k.INVALID_UINT_UID_FROM_STRING_UID,extend:p}),new q(k.INVALID_UINT_UID_FROM_STRING_UID);return Pe.reqUserAccount(p.sid,{lts:g,success:!0,serverAddr:m,stringUid:p.string_uid,uid:E.uid,errorCode:null,extend:p}),!1}const C=Uf(E.code);return C.retry&&(m=l[(S+1)%l.length]),Pe.reqUserAccount(p.sid,{lts:g,success:!1,serverAddr:m,stringUid:p.string_uid,uid:E.uid,errorCode:C.desc,extend:p}),C.retry},(E,S)=>E.code!==k.OPERATION_ABORTED&&(Pe.reqUserAccount(p.sid,{lts:g,success:!1,serverAddr:m,stringUid:p.string_uid,uid:null,errorCode:E.code,extend:p}),m=l[(S+1)%l.length],!0),f);if(_.code!==0){const E=Uf(_.code);throw new q(k.UNEXPECTED_RESPONSE,E.desc)}return _}(a,e,t,n,r);return i==null||i.recordJoinChannelService({status:"success",endTs:Date.now()},s),c.uid}catch(c){throw i==null||i.recordJoinChannelService({status:"error",endTs:Date.now(),errors:[c]},s),c}}async function yfe(e,t,n){const r=H("ACCOUNT_REGISTER");let i=[];i=t.proxyServer?r.map(o=>"https://".concat(t.proxyServer,"/ap/?url=").concat(o+"/api/v1")):r.map(o=>"https://".concat(o,"/api/v1"));try{return await Q9({referenceList:i,asyncMapHandler:a=>async function(s,c,l,u){const d=Date.now(),h={sid:l.sid,opid:10,appid:l.appId,string_uid:c};try{const f=await Ys(s+"".concat(s.indexOf("?")===-1?"?":"&","action=stringuid"),{data:h,cancelToken:u,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":72}});if(f.code!==0){const g=Uf(f.code);throw new q(k.UNEXPECTED_RESPONSE,"preload sua error:".concat(g.desc),g)}if(f.uid<=0||f.uid>=Math.pow(2,32))throw new q(k.INVALID_UINT_UID_FROM_STRING_UID);return{requestTime:d,url:s,req:h,uid:f.uid,elapse:Date.now()-d}}catch(f){throw f}}(a,e,t,n),closeFn:a=>a.code===k.OPERATION_ABORTED||a.code===k.UNEXPECTED_RESPONSE&&!a.data.retry})}catch(o){throw o}}async function Cfe(e,t,n){const r=H("CDS_AP").slice(0,H("AJAX_REQUEST_CONCURRENT")).map(c=>e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(c+"/api/v1"):"https://".concat(c,"/api/v1?action=config")),i=r.map(c=>function(l,u,d,h){const f=Tt(),g={flag:64,cipher_method:0,features:{device:f.name,system:f.os,system_general:navigator.userAgent,vendor:u.appId,version:va,cname:u.cname,sid:u.sid,session_id:u.sid,detail:"",proxyServer:u.proxyServer}};return qs(()=>Ys(l,{data:g,timeout:1e3,cancelToken:d,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":54}}),void 0,p=>p.code!==k.OPERATION_ABORTED,h)}(c,e,t,n));let o=null,a=null,s={};try{o=await mp(i)}catch(c){if(c.code===k.OPERATION_ABORTED)throw c;a=c}if(i.forEach(c=>c.cancel()),Pe.reportApiInvoke(e.sid,{name:dr.REQUEST_CONFIG_DISTRIBUTE,options:{error:a,res:o}}).onSuccess(),o&&o.test_tags)try{s=function(c){if(!c.test_tags)return{};const l=c.test_tags,u=Object.keys(l),d={};return u.forEach(h=>{var f;const g=yi(f=h.slice(4)).call(f),p=JSON.parse(l[h])[1];d[g]=p}),d}(o)}catch{}return s}async function pU(e,t){const n=H("WEBCS_DOMAIN").concat(H("WEBCS_DOMAIN_BACKUP_LIST")).map(r=>({url:"https://".concat(r,"/api/v2/transpond/webrtc?v=2"),areaCode:A0(),serviceIds:[Xn.CHOOSE_SERVER,Xn.CLOUD_PROXY_FALLBACK]}));try{return await Q9({referenceList:n,asyncMapHandler:i=>async function(o,a,s){let c,{url:l,areaCode:u,serviceIds:d}=o;const h=Date.now(),[f,g]=TN(a,u,d);let p=Jn.networkState;try{p&&Jn.networkState===Io.OFFLINE&&Jn.onlineWaiter&&await _e.race([Jn.onlineWaiter,Lr(ar.maxRetryTimeout)]),p=Jn.networkState;const{data:m,headers:_}=await Ys(l,{data:f,cancelToken:s,headers:{"Content-Type":"multipart/form-data;"}},!0,!0);c=_.http3==="1"?1:-1,(b=>{const T=[];if(b.response_body.forEach(R=>{const A=R.buffer.code;if(R.uri===23&&A===0&&!R.buffer.edges_services)if(R.buffer.flag===4194310)R.buffer.edges_services=[];else{const O={error:new q(k.CAN_NOT_GET_GATEWAY_SERVER,"no edge services in ap response",{retry:!0,csIp:b.detail[502]}),flag:R.buffer.flag};T.push(O)}if(A!==0){const O=Uf(A),x={error:new q(k.CAN_NOT_GET_GATEWAY_SERVER,O.desc,{desc:O.desc,retry:O.retry,csIp:b.detail[502]}),flag:R.buffer.flag};R.buffer.flag===4194310?w.warning(x.error.toString()):T.push(x)}}),T.length)throw new q(k.CAN_NOT_GET_GATEWAY_SERVER,T.map(R=>"flag: ".concat(R.flag,", message: ").concat(R.error.message)).join(" | "),{retry:!!T.find(R=>R.error.data.retry),csIp:b.detail[502],desc:[...new Set(T.map(R=>{var A;return R==null||(A=R.error)===null||A===void 0||(A=A.data)===null||A===void 0?void 0:A.desc}).filter(R=>!!R))]})})(m);const S=w0(m,Xn.CHOOSE_SERVER),C=w0(m,Xn.CLOUD_PROXY_FALLBACK);return bN(S),{gatewayInfo:dN(S,l),proxyInfo:C,opid:g,requestTime:h,url:l,isHttp3:c,elapse:Date.now()-h}}catch(m){throw m}}(i,e,t),closeFn:i=>i.code===k.OPERATION_ABORTED||i.code===k.CAN_NOT_GET_GATEWAY_SERVER&&!i.data.retry})}catch(r){throw r}}async function mU(e,t,n,r){const i=H("PROXY_SERVER_TYPE3"),o=(f,g,p)=>{let m=p||i;return Array.isArray(m)&&(m=g%2==0?i[1]:i[0]),"https://".concat(m,"/ap/?url=").concat(f)};let a=null;const s=[],c=async()=>{const f=H("WEBCS_DOMAIN").slice(0,H("AJAX_REQUEST_CONCURRENT")).map((m,_)=>{let E;return E=e.cloudProxyServer==="disabled"&&e.proxyServer?o("".concat(m,"/api/v2/transpond/webrtc?v=2"),_,e.proxyServer):e.cloudProxyServer==="disabled"||e.cloudProxyServer==="fallback"?"https://".concat(m,"/api/v2/transpond/webrtc?v=2"):o("".concat(m,"/api/v2/transpond/webrtc?v=2"),_),{url:E,areaCode:A0(),serviceIds:[Xn.CHOOSE_SERVER,e.cloudProxyServer==="proxy5"?Xn.CLOUD_PROXY_5:e.cloudProxyServer==="proxy3"||e.cloudProxyServer==="proxy4"?Xn.CLOUD_PROXY:Xn.CLOUD_PROXY_FALLBACK]}}),g=r.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:f.map(m=>m.url)}),p=await O0({fragementLength:H("FRAGEMENT_LENGTH"),referenceList:f,asyncMapHandler:m=>(w.debug("[".concat(e.clientId,"] Connect to choose_server:"),m.url),hU(m,e,t,n)),allFailedhandler:m=>{throw r.recordJoinChannelService({endTs:Date.now(),status:"error",errors:m},g),m[0]},promisesCollector:s});return r.recordJoinChannelService({endTs:Date.now(),status:"success"},g),p},l=async()=>{if(await Lr(1e3),a!==null)return a;const f=H("WEBCS_DOMAIN_BACKUP_LIST").map((m,_)=>{let E;return E=e.cloudProxyServer==="disabled"&&e.proxyServer?o("".concat(m,"/api/v2/transpond/webrtc?v=2"),_,e.proxyServer):e.cloudProxyServer==="disabled"||e.cloudProxyServer==="fallback"?"https://".concat(m,"/api/v2/transpond/webrtc?v=2"):o("".concat(m,"/api/v2/transpond/webrtc?v=2"),_),{url:E,areaCode:A0(),serviceIds:[Xn.CHOOSE_SERVER,e.cloudProxyServer==="proxy5"?Xn.CLOUD_PROXY_5:e.cloudProxyServer==="proxy3"||e.cloudProxyServer==="proxy4"?Xn.CLOUD_PROXY:Xn.CLOUD_PROXY_FALLBACK]}}),g=r.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:f.map(m=>m.url)}),p=await O0({fragementLength:H("FRAGEMENT_LENGTH"),referenceList:f,asyncMapHandler:m=>(w.debug("[".concat(e.clientId,"] Connect to backup choose_server:"),m.url),hU(m,e,t,n)),allFailedhandler:m=>{throw r.recordJoinChannelService({endTs:Date.now(),status:"error",errors:m},g),m[0]},promisesCollector:s});return r.recordJoinChannelService({endTs:Date.now(),status:"success"},g),p};let u,d,h;try{({gatewayInfo:u,proxyInfo:d,url:h}=await mp([c(),l()]))}catch(f){throw f[0]}if(s.length&&s.forEach(f=>f.cancel&&typeof f.cancel=="function"&&f.cancel()),!u||!d)throw new q(k.UNEXPECTED_ERROR,"missing gateway or proxy response").print();if(e.apUrl=h,e.cloudProxyServer!=="disabled"&&Array.isArray(i)&&h){const f=/^https?:\/\/(.+?)(\/.*)?$/.exec(h)[1];Ce(i).call(i,f)&&(e.proxyServer=f,w.setProxyServer(f),Pe.setProxyServer(f))}return a={gatewayInfo:u,proxyInfo:await c9(d,u.uid)},a}async function bfe(e,t,n){const r=H("UAP_AP").slice(0,H("AJAX_REQUEST_CONCURRENT")).map(o=>e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(o+"/api/v1?action=uap"):"https://".concat(o,"/api/v1?action=uap")),i=r.map(o=>function(a,s,c,l){const u={command:"convergeAllocateEdge",sid:s.sid,appId:s.appId,token:s.token,ts:Date.now(),version:va,cname:s.cname,uid:s.uid.toString(),requestId:CT,seq:CT};CT+=1;const d={service_name:"tele_channel",json_body:JSON.stringify(u)};return qs(async()=>{const h=await Ys(a,{data:d,cancelToken:c,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":61}});if(h.code!==0){const g=new q(k.UNEXPECTED_RESPONSE,"cross channel ap error, code"+h.code,{retry:!0});throw w.error(g.toString()),g}const f=JSON.parse(h.json_body);if(f.code!==200){const g=new q(k.UNEXPECTED_RESPONSE,"cross channel app center error, code: ".concat(f.code,", reason: ").concat(f.reason));throw w.error(g.toString()),g}if(!f.servers||f.servers.length===0){const g=new q(k.UNEXPECTED_RESPONSE,"cross channel app center empty server");throw w.error(g.toString()),g}return{vid:f.vid,workerToken:f.workerToken,addressList:(H("CHANNEL_MEDIA_RELAY_SERVERS")||f.servers).map(g=>"wss://".concat(g.address.replace(/\./g,"-"),".").concat(H("WORKER_DOMAIN"),":").concat(g.wss))}},void 0,h=>!!(h.code!==k.OPERATION_ABORTED&&h.code!==k.UNEXPECTED_RESPONSE||h.data&&h.data.retry),l)}(o,e,t,n));try{const o=await mp(i);return i.forEach(a=>a.cancel()),o}catch(o){throw o[0]}}async function Tfe(e,t,n){let r=null;const i=[],o=async a=>{const s=H(a?"WEBCS_DOMAIN_BACKUP_LIST":"WEBCS_DOMAIN").map(c=>e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(c+"/api/v2/transpond/webrtc?v=2"):"https://".concat(c,"/api/v2/transpond/webrtc?v=2"));return a&&(await Lr(1e3),r!==null)?r:await O0({fragementLength:H("FRAGEMENT_LENGTH"),referenceList:s,asyncMapHandler:c=>(w.debug("[".concat(e.clientId,"] update ticket, Connect to ").concat(a?"backup":""," choose_server:"),c),function(l,u,d,h){const[f]=Sfe(u,[Xn.CHOOSE_SERVER]);let g=Jn.networkState;return qs(async()=>{g&&Jn.networkState===Io.OFFLINE&&Jn.onlineWaiter&&await _e.race([Jn.onlineWaiter,Lr(h&&h.maxRetryTimeout||ar.maxRetryTimeout)]),g=Jn.networkState;const p=await Ys(l,{data:f,cancelToken:d,headers:{"Content-Type":"multipart/form-data;"}},!0);return _fe(p,l)},()=>!1,p=>p.code!==k.OPERATION_ABORTED&&(p.code===k.UPDATE_TICKET_FAILED?p.data.retry:(w.warning("[".concat(u.clientId,"] update ticket network error, retry"),p),!0)),h)}(c,e,t,n)),allFailedhandler:c=>{throw c[0]},promisesCollector:i})};try{return r=await mp([o(!1),o(!0)]),i.length&&i.forEach(a=>a.cancel&&typeof a.cancel=="function"&&a.cancel()),r}catch(a){throw a[0]}}function gU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function vU(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?gU(Object(n),!0).forEach(function(r){P(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gU(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}class Rfe extends Pn{get isSuccess(){return!!this.configs}constructor(){super(),P(this,"configs",void 0),P(this,"joinInfo",void 0),P(this,"cancelToken",void 0),P(this,"retryConfig",{timeout:3e3,timeoutFactor:1.5,maxRetryCount:1,maxRetryTimeout:1e4}),P(this,"interval",void 0),P(this,"mutex",new ri("config-distribute")),P(this,"mutableParamsRead",!1)}startGetConfigDistribute(t,n){this.joinInfo=t,this.cancelToken=n,this.interval&&this.stopGetConfigDistribute(),H("ENABLE_CONFIG_DISTRIBUTE")&&(this.updateConfigDistribute(),this.interval=window.setInterval(()=>{this.updateConfigDistribute()},H("CONFIG_DISTRIBUTE_INTERVAL")))}stopGetConfigDistribute(){this.interval&&clearInterval(this.interval),this.interval=void 0,this.joinInfo=void 0,this.cancelToken=void 0}async awaitConfigDistributeComplete(){this.mutex.isLocked&&(await this.mutex.lock())()}async updateConfigDistribute(){if(this.mutableParamsRead||(this.mutableParamsRead=!0,Pe.reportApiInvoke(null,{options:void 0,name:dr.LOAD_CONFIG_FROM_LOCALSTORAGE,tag:kn.TRACER}).onSuccess(JSON.stringify(ql))),!this.joinInfo||!this.cancelToken||!this.retryConfig)return void w.debug("[config-distribute] get config distribute interrupted have no joininfo");let t;const n=await this.mutex.lock();try{t=await Cfe(this.joinInfo,this.cancelToken,this.retryConfig),w.debug("[config-distribute] get config distribute",JSON.stringify(t)),t.limit_bitrate&&this.handleBitrateLimit(t.limit_bitrate),this.cacheGlobalParameterConfig(t),this.configs=t}catch(r){const i=new q(k.NETWORK_RESPONSE_ERROR,r);w.warning("[config-distribute] ".concat(i.toString()))}finally{n()}}getBitrateLimit(){return this.configs?this.configs.limit_bitrate:void 0}handleBitrateLimit(t){var n;(n=t)&&n.uplink&&n.id&&n.uplink.max_bitrate!==void 0&&n.uplink.min_bitrate!==void 0&&(this.configs&&this.configs.limit_bitrate?this.configs&&this.configs.limit_bitrate&&this.configs.limit_bitrate.id!==t.id&&this.emit(GI.UPDATE_BITRATE_LIMIT,t):this.emit(GI.UPDATE_BITRATE_LIMIT,t))}getLowStreamConfigDistribute(){return this.configs&&this.configs.limit_bitrate&&vU({},this.configs.limit_bitrate.low_stream_uplink)}cacheGlobalParameterConfig(t){var n;const r=xg(n=Object.keys(t).filter(o=>/^webrtc_ng_global_parameter/.test(o))).call(n);for(let o=0;o<r.length;o++)for(let a=r.length-1;a>o;a--){const s=r[a];if(typeof t[s].__priority=="number"){const c=t[s].__priority,l=r[a-1];if(typeof t[l].__priority=="number"){if(!(c>t[l].__priority))continue;{const u=s;r[a]=r[a-1],r[a-1]=u}}else{const u=s;r[a]=r[a-1],r[a-1]=u}}}const i={};r.forEach(o=>{const a=t[o],s=a.__expires;Object.keys(a).forEach(c=>{c==="__priority"||c==="__expires"||Object.prototype.hasOwnProperty.call(i,c)||(i[c]=vU({value:a[c]},s&&{expires:s}))})});try{(function(s){try{const c=Date.now();Object.keys(s).forEach(l=>{switch(l){case"ENABLE_EVENT_REPORT":case"UPLOAD_LOG":case"ENABLE_AG_ADAPTATION":case"FORCE_AG_HIGH_FRAMERATE":case"FORCE_SUPPORT_AG_ADAPTATION":case"ENCODER_CONFIG_LIMIT":case"CAMERA_CAPTURE_CONFIG":case"ENABLE_PRELOAD":if(Object.prototype.hasOwnProperty.call(Wn,l)){const{value:u,expires:d}=s[l];if(d&&d<=c)return;ql[l]=u,Wn[l]=u,w.debug("Update global parameters from config distribute",l,u)}}})}catch(c){w.error("Error update config immediately: ".concat(s),c.message)}})(i);const o=JSON.stringify(i),a=window.btoa(o);window.localStorage.setItem("websdk_ng_global_parameter",a),w.debug("Caching global parameters ".concat(o))}catch(o){w.error("Error caching global parameters:",o.message)}}}class wfe extends Pn{constructor(){super(...arguments),P(this,"resultStorage",new Map)}setLocalAudioStats(t,n,r){this.record("AUDIO_INPUT_LEVEL_TOO_LOW",t,this.checkAudioInputLevel(r,n)),this.record("SEND_AUDIO_BITRATE_TOO_LOW",t,this.checkSendAudioBitrate(r,n))}setLocalVideoStats(t,n,r){this.record("SEND_VIDEO_BITRATE_TOO_LOW",t,this.checkSendVideoBitrate(r,n)),this.record("FRAMERATE_INPUT_TOO_LOW",t,this.checkFramerateInput(r,n)),this.record("FRAMERATE_SENT_TOO_LOW",t,this.checkFramerateSent(r))}setRemoteAudioStats(t,n){const r=t.getUserId();this.record("AUDIO_OUTPUT_LEVEL_TOO_LOW",r,this.checkAudioOutputLevel(n))}setRemoteVideoStats(t,n){const r=t.getUserId();this.record("RECV_VIDEO_DECODE_FAILED",r,this.checkVideoDecode(n))}record(t,n,r){if(H("STATS_UPDATE_INTERVAL")>500)return;this.resultStorage.has(t)||this.resultStorage.set(t,{result:[],isPrevNormal:!0});const i=this.resultStorage.get(t);if(i&&(i.result.push(r),i.result.length>=5)){var o;const a=Ce(o=i.result).call(o,!0);i.isPrevNormal&&!a&&this.emit("exception",EU[t],t,n),!i.isPrevNormal&&a&&this.emit("exception",EU[t]+2e3,t+"_RECOVER",n),i.isPrevNormal=a,i.result=[]}}checkAudioOutputLevel(t){return!(t.receiveBitrate>0&&t.receiveLevel===0)}checkAudioInputLevel(t,n){return n instanceof Sr&&!n.isActive||!!n.muted||t.sendVolumeLevel!==0}checkFramerateInput(t,n){let r=null;n._encoderConfig&&n._encoderConfig.frameRate&&(r=Oo(n._encoderConfig.frameRate));const i=t.captureFrameRate;return!r||!i||!(r>10&&i<5||r<10&&r>=5&&i<=1)}checkFramerateSent(t){return!(t.captureFrameRate&&t.sendFrameRate&&t.captureFrameRate>5&&t.sendFrameRate<=1)}checkSendVideoBitrate(t,n){return!!n.muted||t.sendBitrate!==0}checkSendAudioBitrate(t,n){return n instanceof Sr&&!n.isActive||!!n.muted||t.sendBitrate!==0}checkVideoDecode(t){return t.receiveBitrate===0||t.decodeFrameRate!==0}}const EU={FRAMERATE_INPUT_TOO_LOW:1001,FRAMERATE_SENT_TOO_LOW:1002,SEND_VIDEO_BITRATE_TOO_LOW:1003,RECV_VIDEO_DECODE_FAILED:1005,AUDIO_INPUT_LEVEL_TOO_LOW:2001,AUDIO_OUTPUT_LEVEL_TOO_LOW:2002,SEND_AUDIO_BITRATE_TOO_LOW:2003},ni=new class{markSubscribeStart(e,t){performance.mark("agora-web-sdk/".concat(e,"/subscribe-").concat(t))}markPublishStart(e,t){performance.mark("agora-web-sdk/".concat(e,"/publish-").concat(t))}measureFromSubscribeStart(e,t){const n=performance.getEntriesByName("agora-web-sdk/".concat(e,"/subscribe-").concat(t));if(n.length>0){const r=n[n.length-1];return Math.round(performance.now()-r.startTime)}return 0}measureFromPublishStart(e,t){const n=performance.getEntriesByName("agora-web-sdk/".concat(e,"/publish-").concat(t));if(n.length>0){const r=n[n.length-1];return Math.round(performance.now()-r.startTime)}return 0}};function RN(e,t){this.v=e,this.k=t}function Dt(e){return new RN(e,0)}var Ife=oH,Afe=Lc;ln({target:"Promise",stat:!0,forced:!0},{withResolvers:function(){var e=Afe.f(this);return{promise:e.promise,resolve:e.resolve,reject:e.reject}}});var Ofe=Lc,xfe=up;ln({target:"Promise",stat:!0,forced:!0},{try:function(e){var t=Ofe.f(this),n=xfe(e);return(n.error?t.reject:t.resolve)(n.value),t.promise}});var iA=Kn(Ife),ez=dp.f("asyncIterator"),Nfe=Kn(ez);function bm(e){var t,n;function r(o,a){try{var s=e[o](a),c=s.value,l=c instanceof RN;iA.resolve(l?c.v:c).then(function(u){if(l){var d=o==="return"?"return":"next";if(!c.k||u.done)return r(d,u);u=e[d](u).value}i(s.done?"return":"normal",u)},function(u){r("throw",u)})}catch(u){i("throw",u)}}function i(o,a){switch(o){case"return":t.resolve({value:a,done:!0});break;case"throw":t.reject(a);break;default:t.resolve({value:a,done:!1})}(t=t.next)?r(t.key,t.arg):n=null}this._invoke=function(o,a){return new iA(function(s,c){var l={key:o,arg:a,resolve:s,reject:c,next:null};n?n=n.next=l:(t=n=l,r(o,a))})},typeof e.return!="function"&&(this.return=void 0)}function Ms(e){return function(){return new bm(e.apply(this,arguments))}}bm.prototype[typeof Wh=="function"&&Nfe||"@@asyncIterator"]=function(){return this},bm.prototype.next=function(e){return this._invoke("next",e)},bm.prototype.throw=function(e){return this._invoke("throw",e)},bm.prototype.return=function(e){return this._invoke("return",e)};var _U=Kn(Ks.Object.getOwnPropertySymbols),Pfe=ln,Dfe=Tx.indexOf,Lfe=yy,oA=p0([].indexOf),SU=!!oA&&1/oA([1],1,-0)<0;Pfe({target:"Array",proto:!0,forced:SU||!Lfe("indexOf")},{indexOf:function(e){var t=arguments.length>1?arguments[1]:void 0;return SU?oA(this,e,t)||0:Dfe(this,e,t)}});var kfe=hs("Array").indexOf,Mfe=Fi,Ffe=kfe,bT=Array.prototype,Ufe=function(e){var t=e.indexOf;return e===bT||Mfe(bT,e)&&t===bT.indexOf?Ffe:t},yU=Kn(Ufe);function Bfe(e,t){if(e==null)return{};var n,r,i=function(a,s){if(a==null)return{};var c,l,u={},d=n9(a);for(l=0;l<d.length;l++)c=d[l],yU(s).call(s,c)>=0||(u[c]=a[c]);return u}(e,t);if(_U){var o=_U(e);for(r=0;r<o.length;r++)n=o[r],yU(t).call(t,n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Qa(e){if(Array.isArray(e))return e.map(n=>n);if(!CU(e))return e;const t={};for(const n in e){const r=e[n];CU(r)||Array.isArray(r)?t[n]=Qa(r):t[n]=r}return t}function CU(e){return!(typeof e!="object"||Array.isArray(e)||!e)}class TT{constructor(t){P(this,"input",[]),P(this,"size",void 0),this.size=t}add(t){this.input.push(t),this.input.length>this.size&&this.input.splice(0,1)}diffMean(){return this.input.length===0?0:(this.input[this.input.length-1]-this.input[0])/this.input.length}}const Ac={address:"unknown",candidateType:"unknown",id:"unknown",port:0,priority:0,protocol:"unknown",type:"unknown"},x0={timestamp:0,bitrate:{actualEncoded:0,transmit:0},sendPacketLossRate:0,recvPacketLossRate:0,videoRecv:[],videoSend:[],audioRecv:[],audioSend:[],selectedCandidatePair:{id:"unknown",localCandidate:Ac,remoteCandidate:Ac}},tz={firsCount:0,nacksCount:0,plisCount:0,framesDecodeCount:0,framesDecodeInterval:0,framesDecodeFreezeTime:0,decodeFrameRate:0,bytes:0,packetsLost:0,packetLostRate:0,packets:0,ssrc:0,qpSumPerFrame:0,framesDroppedCount:0,outputFrameRate:0},nz={firsCount:0,nacksCount:0,plisCount:0,frameCount:0,bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0,jitterMs:0,qpSumPerFrame:0},rz={bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0,jitterMs:0},iz={jitterBufferMs:0,jitterMs:0,bytes:0,packetsLost:0,packetLostRate:0,packetsDiscarded:0,packets:0,ssrc:0,receivedFrames:0,droppedFrames:0,concealedSamples:0};function bU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function TU(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?bU(Object(n),!0).forEach(function(r){P(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bU(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}class wN{constructor(t,n){P(this,"onFirstVideoReceived",void 0),P(this,"onFirstVideoDecoded",void 0),P(this,"onFirstAudioReceived",void 0),P(this,"onFirstVideoDecodedTimeout",void 0),P(this,"onFirstAudioDecoded",void 0),P(this,"onSelectedLocalCandidateChanged",void 0),P(this,"onSelectedRemoteCandidateChanged",void 0),P(this,"videoIsReady",!1),P(this,"videoIsReady2",{}),P(this,"pc",void 0),P(this,"options",void 0),P(this,"intervalTimer",void 0),P(this,"stats",Qa(x0)),P(this,"isFirstVideoReceived",{}),P(this,"isFirstVideoDecoded",{}),P(this,"isFirstAudioReceived",{}),P(this,"isFirstAudioDecoded",{}),P(this,"isFirstVideoDecodedTimeout",{}),P(this,"lossRateWindowStats",[]),this.pc=t,this.options=n,this.intervalTimer=window.setInterval(async()=>{this.updateStats()},this.options.updateInterval)}getStats(){return this.stats}getSelectedCandidatePair(){return new _e(t=>{t({local:TU({},Ac),remote:TU({},Ac)})})}setVideoIsReady(t){this.videoIsReady=t}setVideoIsReady2(t,n){this.videoIsReady2[t]=n}getVideoIsReady(t){return this.videoIsReady2[t]||!1}setIsFirstAudioDecoded(t){}destroy(){window.clearInterval(this.intervalTimer),this.pc=void 0}calcLossRate(t){this.lossRateWindowStats.push(t),this.lossRateWindowStats.length>this.options.lossRateInterval&&this.lossRateWindowStats.splice(0,1);const n=this.lossRateWindowStats.length,r=["videoSend","audioSend","videoRecv","audioRecv"];let i=0,o=0,a=0,s=0;for(const c of r)t[c].forEach((l,u)=>{if(!this.lossRateWindowStats[n-1][c][u]||!this.lossRateWindowStats[0][c][u])return;const d=this.lossRateWindowStats[n-1][c][u].packets-this.lossRateWindowStats[0][c][u].packets,h=this.lossRateWindowStats[n-1][c][u].packetsLost-this.lossRateWindowStats[0][c][u].packetsLost;c==="videoSend"||c==="audioSend"?(i+=d,a+=h):(o+=d,s+=h),Number.isNaN(d)||Number.isNaN(d)?l.packetLostRate=0:l.packetLostRate=d<=0||h<=0?0:h/(d+h)});t.sendPacketLossRate=i<=0||a<=0?0:a/(i+a),t.recvPacketLossRate=o<=0||s<=0?0:s/(o+s)}}function RU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function $fe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?RU(Object(n),!0).forEach(function(r){P(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):RU(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}class Vfe extends wN{constructor(){super(...arguments),P(this,"_stats",x0),P(this,"lastDecodeVideoReceiverStats",new Map)}async updateStats(){const t=await this._getStats(),n=this.statsResponsesToObjects(t);this._stats=Qa(x0);const r=n.filter(o=>o.type==="ssrc");this.processSSRCStats(r);const i=n.find(o=>o.type==="VideoBwe");i&&this.processBandwidthStats(i),this._stats.timestamp=Date.now(),this.calcLossRate(this._stats),this.stats=this._stats}processBandwidthStats(t){this._stats.bitrate={actualEncoded:Number(t.googActualEncBitrate),targetEncoded:Number(t.googTargetEncBitrate),retransmit:Number(t.googRetransmitBitrate),transmit:Number(t.googTransmitBitrate)},this._stats.sendBandwidth=Number(t.googAvailableSendBandwidth)}processSSRCStats(t){t.forEach(n=>{var r;const i=Ce(r=n.id).call(r,"send");switch("".concat(n.mediaType,"_").concat(i?"send":"recv")){case"video_send":{const o=Qa(nz);o.codec=n.googCodecName,o.adaptionChangeReason="none",n.googCpuLimitedResolution&&(o.adaptionChangeReason="cpu"),n.googBandwidthLimitedResolution&&(o.adaptionChangeReason="bandwidth"),o.avgEncodeMs=Number(n.googAvgEncodeMs),o.inputFrame={width:Number(n.googFrameWidthInput)||Number(n.googFrameWidthSent),height:Number(n.googFrameHeightInput)||Number(n.googFrameHeightSent),frameRate:Number(n.googFrameRateInput)},o.sentFrame={width:Number(n.googFrameWidthSent),height:Number(n.googFrameHeightSent),frameRate:Number(n.googFrameRateInput)},o.firsCount=Number(n.googFirReceived),o.nacksCount=Number(n.googNacksReceived),o.plisCount=Number(n.googPlisReceived),o.frameCount=Number(n.framesEncoded),o.bytes=Number(n.bytesSent),o.packets=Number(n.packetsSent),o.packetsLost=Number(n.packetsLost),o.ssrc=Number(n.ssrc),o.rttMs=Number(n.googRtt||0),this._stats.videoSend.push(o),this._stats.rtt=o.rttMs;break}case"video_recv":{const o=Qa(tz),a=this.lastDecodeVideoReceiverStats.get(Number(n.ssrc));if(o.codec=n.googCodecName,o.targetDelayMs=Number(n.googTargetDelayMs),o.renderDelayMs=Number(n.googRenderDelayMs),o.currentDelayMs=Number(n.googCurrentDelayMs),o.minPlayoutDelayMs=Number(n.googMinPlayoutDelayMs),o.decodeMs=Number(n.googDecodeMs),o.maxDecodeMs=Number(n.googMaxDecodeMs),o.receivedFrame={width:Number(n.googFrameWidthReceived),height:Number(n.googFrameHeightReceived),frameRate:Number(n.googFrameRateReceived)},o.decodedFrame={width:Number(n.googFrameWidthReceived),height:Number(n.googFrameHeightReceived),frameRate:Number(n.googFrameRateDecoded)},o.decodeFrameRate=Number(n.googFrameRateDecoded),o.outputFrame={width:Number(n.googFrameWidthReceived),height:Number(n.googFrameHeightReceived),frameRate:Number(n.googFrameRateOutput)},o.jitterBufferMs=Number(n.googJitterBufferMs),o.firsCount=Number(n.googFirsSent),o.nacksCount=Number(n.googNacksSent),o.plisCount=Number(n.googPlisSent),o.framesDecodeCount=Number(n.framesDecoded),o.bytes=Number(n.bytesReceived),o.packets=Number(n.packetsReceived),o.packetsLost=Number(n.packetsLost),o.ssrc=Number(n.ssrc),o.packets>0&&!this.isFirstVideoReceived[o.ssrc]&&(this.onFirstVideoReceived&&this.onFirstVideoReceived(o.ssrc),this.isFirstVideoReceived[o.ssrc]=!0),o.framesDecodeCount>0&&!this.isFirstVideoDecoded[o.ssrc]&&(this.onFirstVideoDecoded&&this.onFirstVideoDecoded(o.ssrc,o.decodedFrame.width,o.decodedFrame.height),this.isFirstVideoDecoded[o.ssrc]=!0),a){const s=a.stats,c=Date.now()-a.lts;o.framesDecodeFreezeTime=s.framesDecodeFreezeTime,o.framesDecodeInterval=s.framesDecodeInterval,o.framesDecodeCount>s.framesDecodeCount&&this.isFirstVideoDecoded[o.ssrc]?(a.lts=Date.now(),o.framesDecodeInterval=c,o.framesDecodeInterval>=this.options.freezeRateLimit&&(this.getVideoIsReady(parseInt(n.ssrc,10))?o.framesDecodeFreezeTime+=o.framesDecodeInterval:this.setVideoIsReady2(parseInt(n.ssrc,10),!0))):o.framesDecodeCount<a.stats.framesDecodeCount&&(o.framesDecodeInterval=0)}this.lastDecodeVideoReceiverStats.set(o.ssrc,{stats:$fe({},o),lts:Date.now()}),this._stats.videoRecv.push(o);break}case"audio_recv":{const o=Qa(iz);o.codec=n.googCodecName,o.outputLevel=Math.abs(Number(n.audioOutputLevel))/32767,o.decodingCNG=Number(n.googDecodingCNG),o.decodingCTN=Number(n.googDecodingCTN),o.decodingCTSG=Number(n.googDecodingCTSG),o.decodingNormal=Number(n.googDecodingNormal),o.decodingPLC=Number(n.googDecodingPLC),o.decodingPLCCNG=Number(n.googDecodingPLCCNG),o.expandRate=Number(n.googExpandRate),o.accelerateRate=Number(n.googAccelerateRate),o.preemptiveExpandRate=Number(n.googPreemptiveExpandRate),o.secondaryDecodedRate=Number(n.googSecondaryDecodedRate),o.speechExpandRate=Number(n.googSpeechExpandRate),o.preferredJitterBufferMs=Number(n.googPreferredJitterBufferMs),o.jitterBufferMs=Number(n.googJitterBufferMs),o.jitterMs=Number(n.googJitterReceived),o.bytes=Number(n.bytesReceived),o.packets=Number(n.packetsReceived),o.packetsLost=Number(n.packetsLost),o.ssrc=Number(n.ssrc),o.receivedFrames=Number(n.googDecodingCTN)||Number(n.packetsReceived),o.droppedFrames=Number(n.googDecodingPLC)+Number(n.googDecodingPLCCNG)||Number(n.packetsLost),o.receivedFrames>0&&!this.isFirstAudioReceived[o.ssrc]&&(this.onFirstAudioReceived&&this.onFirstAudioReceived(o.ssrc),this.isFirstAudioReceived[o.ssrc]=!0),o.decodingNormal>0&&!this.isFirstAudioDecoded[o.ssrc]&&(this.onFirstAudioDecoded&&this.onFirstAudioDecoded(o.ssrc),this.isFirstAudioDecoded[o.ssrc]=!0),this._stats.audioRecv.push(o);break}case"audio_send":{const o=Qa(rz);o.codec=n.googCodecName,o.inputLevel=Math.abs(Number(n.audioInputLevel))/32767,o.aecReturnLoss=Number(n.googEchoCancellationReturnLoss||0),o.aecReturnLossEnhancement=Number(n.googEchoCancellationReturnLossEnhancement||0),o.residualEchoLikelihood=Number(n.googResidualEchoLikelihood||0),o.residualEchoLikelihoodRecentMax=Number(n.googResidualEchoLikelihoodRecentMax||0),o.bytes=Number(n.bytesSent),o.packets=Number(n.packetsSent),o.packetsLost=Number(n.packetsLost),o.ssrc=Number(n.ssrc),o.rttMs=Number(n.googRtt||0),this._stats.rtt=o.rttMs,this._stats.audioSend.push(o);break}}})}_getStats(){return new _e((t,n)=>{this.pc.getStats(t,n)})}statsResponsesToObjects(t){const n=[];return t.result().forEach(r=>{const i={id:r.id,timestamp:r.timestamp.valueOf().toString(),type:r.type};r.names().forEach(o=>{i[o]=r.stat(o)}),n.push(i)}),n}}function wU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Bu(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?wU(Object(n),!0).forEach(function(r){P(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wU(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}class IU extends wN{constructor(){super(...arguments),P(this,"_stats",x0),P(this,"report",void 0),P(this,"lastDecodeVideoReceiverStats",new Map),P(this,"lastVideoFramesRecv",new Map),P(this,"lastVideoFramesSent",new Map),P(this,"lastVideoFramesDecode",new Map),P(this,"lastVideoFramesOutput",new Map),P(this,"lastVideoJBDelay",new Map),P(this,"lastAudioJBDelay",new Map),P(this,"mediaBytesSent",new Map),P(this,"mediaBytesRetransmit",new Map),P(this,"mediaBytesTargetEncode",new Map),P(this,"lastEncoderMs",new Map)}async updateStats(){this.report=await this.pc.getStats(),this._stats=Qa(x0),this.report.forEach(t=>{switch(t.type){case Uo.OUTBOUND:case Uo.INBOUND:{const n=t.mediaType||t.kind,r=!n&&"frameWidth"in t,i=!n&&!("frameWidth"in t);t.type===Uo.OUTBOUND?n==="audio"||i?this.processAudioOutboundStats(t):(n==="video"||r)&&this.processVideoOutboundStats(t):t.type===Uo.INBOUND&&(n==="audio"||i?this.processAudioInboundStats(t):(n==="video"||r)&&this.processVideoInboundStats(t));break}case Uo.TRANSPORT:{const n=this.report.get(t.selectedCandidatePairId);n&&this.processCandidatePairStats(n);break}case Uo.CANDIDATE_PAIR:t.selected&&this.processCandidatePairStats(t)}}),this.updateSendBitrate(),this._stats.timestamp=Date.now(),this.calcLossRate(this._stats),this.stats=this._stats}async getSelectedCandidatePair(){const t=await this.pc.getStats(),n={local:Bu({},Ac),remote:Bu({},Ac)};return t.forEach(r=>{let i;if(r.type===Uo.TRANSPORT&&(i=t.get(r.selectedCandidatePairId)),r.type===Uo.CANDIDATE_PAIR&&r.selected&&(i=r),i){const o=(a,s)=>{a.type=s.type,a.id=s.id,s.address&&(a.address=s.address),s.candidateType&&(a.candidateType=s.candidateType),s.port&&(a.port=s.port),s.priority&&(a.priority=s.priority),s.protocol&&(a.protocol=s.protocol),s.relayProtocol&&(a.relayProtocol=s.relayProtocol)};if(i.localCandidateId){const a=t.get(i.localCandidateId);a&&o(n.local,a)}if(i.remoteCandidateId){const a=t.get(i.remoteCandidateId);a&&o(n.remote,a)}}}),n}processCandidatePairStats(t){if(this._stats.sendBandwidth=t.availableOutgoingBitrate||0,t.currentRoundTripTime&&(this._stats.rtt=1e3*t.currentRoundTripTime),this._stats.videoSend.forEach(n=>{t.currentRoundTripTime&&(n.rttMs=1e3*t.currentRoundTripTime)}),this._stats.audioSend.forEach(n=>{t.currentRoundTripTime&&(n.rttMs=1e3*t.currentRoundTripTime)}),this._stats.selectedCandidatePair.id=t.id,t.localCandidateId){const n=this.report.get(t.localCandidateId);n&&this.processCandidateStats(n)}if(t.remoteCandidateId){const n=this.report.get(t.remoteCandidateId);n&&this.processCandidateStats(n)}}processCandidateStats(t){let n;t.type===Uo.LOCAL_CANDIDATE&&(n=this._stats.selectedCandidatePair.localCandidate),t.type===Uo.REMOTE_CANDIDATE&&(n=this._stats.selectedCandidatePair.remoteCandidate),n&&(n.type=t.type,n.id=t.id,t.address&&(n.address=t.address),t.candidateType&&(n.candidateType=t.candidateType),t.port&&(n.port=t.port),t.priority&&(n.priority=t.priority),t.protocol&&(n.protocol=t.protocol),t.relayProtocol&&(n.relayProtocol=t.relayProtocol),t.type===Uo.LOCAL_CANDIDATE&&this.stats.selectedCandidatePair.localCandidate.id!==n.id&&this.onSelectedLocalCandidateChanged&&this.onSelectedLocalCandidateChanged(Bu({},n),Bu({},this.stats.selectedCandidatePair.localCandidate)),t.type===Uo.REMOTE_CANDIDATE&&this.stats.selectedCandidatePair.remoteCandidate.id!==n.id&&this.onSelectedRemoteCandidateChanged&&this.onSelectedRemoteCandidateChanged(Bu({},n),Bu({},this.stats.selectedCandidatePair.remoteCandidate)))}processAudioInboundStats(t){let n=this._stats.audioRecv.find(r=>r.ssrc===t.ssrc);n||(n=Qa(iz),this._stats.audioRecv.push(n)),n.ssrc=t.ssrc,n.packets=t.packetsReceived,n.packetsLost=t.packetsLost,n.packetsDiscarded=t.packetsDiscarded,n.bytes=t.bytesReceived,n.jitterMs=1e3*t.jitter,this.processAudioTrackReceiverStats(t,t.trackId,n),t.codecId&&(n.codec=this.getCodecFromCodecStats(t.codecId)),n.receivedFrames||(n.receivedFrames=t.packetsReceived),n.droppedFrames||(n.droppedFrames=t.packetsLost),n.receivedFrames>0&&!this.isFirstAudioReceived[n.ssrc]&&(this.onFirstAudioReceived&&this.onFirstAudioReceived(n.ssrc),this.isFirstAudioReceived[n.ssrc]=!0),n.outputLevel&&n.outputLevel>0&&!this.isFirstAudioDecoded[n.ssrc]&&(this.onFirstAudioDecoded&&this.onFirstAudioDecoded(n.ssrc),this.isFirstAudioDecoded[n.ssrc]=!0),typeof t.concealedSamples=="number"&&(n.concealedSamples=t.concealedSamples)}processVideoInboundStats(t){let n=this._stats.videoRecv.find(s=>s.ssrc===t.ssrc);n||(n=Qa(tz),this._stats.videoRecv.push(n)),n.ssrc=t.ssrc,n.packets=t.packetsReceived,n.packetsLost=t.packetsLost,n.bytes=t.bytesReceived,n.firsCount=t.firCount,n.nacksCount=t.nackCount,n.plisCount=t.pliCount,n.framesDecodeCount=t.framesDecoded,n.framesDroppedCount=t.framesDropped,n.totalInterFrameDelay=t.totalInterFrameDelay,n.totalSquaredInterFrameDelay=t.totalSquaredInterFrameDelay,n.totalFreezesDuration=t.totalFreezesDuration;const r=this.lastDecodeVideoReceiverStats.get(n.ssrc),i=this.lastVideoFramesDecode.get(n.ssrc),o=this.lastVideoFramesOutput.get(n.ssrc),a=Date.now();if(n.framesDecodeCount>0&&!this.isFirstVideoDecoded[n.ssrc]){const s=n.decodedFrame?n.decodedFrame.width:0,c=n.decodedFrame?n.decodedFrame.height:0;this.onFirstVideoDecoded&&this.onFirstVideoDecoded(n.ssrc,s,c),this.isFirstVideoDecoded[n.ssrc]=!0}if(r){const s=r.stats,c=a-r.lts;n.framesDecodeFreezeTime=s.framesDecodeFreezeTime,n.framesDecodeInterval=s.framesDecodeInterval,!this.isFirstVideoDecoded[n.ssrc]&&c>this.options.firstVideoDecodedTimeout&&!this.isFirstVideoDecodedTimeout[n.ssrc]&&(this.onFirstVideoDecodedTimeout&&this.onFirstVideoDecodedTimeout(n.ssrc),this.isFirstVideoDecodedTimeout[n.ssrc]=!0),n.framesDecodeCount>s.framesDecodeCount&&this.isFirstVideoDecoded[n.ssrc]?(r.lts=Date.now(),n.framesDecodeInterval=c,n.framesDecodeInterval>=this.options.freezeRateLimit&&(this.getVideoIsReady(parseInt(t.ssrc))?n.framesDecodeFreezeTime+=n.framesDecodeInterval:this.setVideoIsReady2(parseInt(t.ssrc,10),!0))):n.framesDecodeCount<s.framesDecodeCount&&(n.framesDecodeInterval=0),t.framesDecoded&&t.qpSum&&(r.stats.framesDecodeCount>t.framesDecoded?n.qpSumPerFrame=t.qpSum/t.framesDecoded:n.qpSumPerFrame=(t.qpSum-r.qpSum)/(t.framesDecoded-r.stats.framesDecodeCount))}i&&a-i.lts>=800?(n.decodeFrameRate=Math.round((n.framesDecodeCount-i.count)/((a-i.lts)/1e3)),this.lastVideoFramesDecode.set(n.ssrc,{count:n.framesDecodeCount,lts:a,rate:n.decodeFrameRate})):i?n.decodeFrameRate=i.rate:this.lastVideoFramesDecode.set(n.ssrc,{count:n.framesDecodeCount,lts:a,rate:0}),n.framesDroppedCount&&t.framesReceived&&(o&&a-o.lts>=800?(n.outputFrameRate=Math.round((t.framesReceived-n.framesDroppedCount-o.count)/((a-o.lts)/1e3)),this.lastVideoFramesOutput.set(n.ssrc,{count:t.framesReceived-n.framesDroppedCount,lts:a,rate:Math.max(n.outputFrameRate,0)})):o?n.outputFrameRate=o.rate:this.lastVideoFramesOutput.set(n.ssrc,{count:t.framesReceived-n.framesDroppedCount,lts:a,rate:0})),t.totalDecodeTime&&(n.decodeMs=1e3*t.totalDecodeTime),this.processVideoTrackReceiverStats(t,t.trackId,n),t.codecId&&(n.codec=this.getCodecFromCodecStats(t.codecId)),t.framerateMean&&(n.framesRateFirefox=t.framerateMean),n.packets>0&&!this.isFirstVideoReceived[n.ssrc]&&(this.onFirstVideoReceived&&this.onFirstVideoReceived(n.ssrc),this.isFirstVideoReceived[n.ssrc]=!0),this.lastDecodeVideoReceiverStats.set(n.ssrc,{stats:Bu({},n),lts:r?r.lts:Date.now(),qpSum:t.qpSum})}processVideoOutboundStats(t){let n=this._stats.videoSend.find(i=>i.ssrc===t.ssrc);n||(n=Qa(nz),this._stats.videoSend.push(n));const r=this.mediaBytesSent.get(t.ssrc);if(r)r.add(t.bytesSent);else{const i=new TT(10);i.add(t.bytesSent),this.mediaBytesSent.set(t.ssrc,i)}if(t.retransmittedBytesSent!==void 0){const i=this.mediaBytesRetransmit.get(t.ssrc);if(i)i.add(t.retransmittedBytesSent);else{const o=new TT(10);o.add(t.retransmittedBytesSent),this.mediaBytesRetransmit.set(t.ssrc,o)}}if(t.totalEncodedBytesTarget){const i=this.mediaBytesTargetEncode.get(t.ssrc);if(i)i.add(t.totalEncodedBytesTarget);else{const o=new TT(10);o.add(t.totalEncodedBytesTarget),this.mediaBytesTargetEncode.set(t.ssrc,o)}}if(n.ssrc=t.ssrc,n.bytes=t.bytesSent,n.packets=t.packetsSent,n.firsCount=t.firCount,n.nacksCount=t.nackCount,n.plisCount=t.pliCount,n.frameCount=t.framesEncoded,n.adaptionChangeReason=t.qualityLimitationReason,n.scalabilityMode=t.scalabilityMode,t.totalEncodeTime&&t.framesEncoded){const i=this.lastEncoderMs.get(t.ssrc);if(!i||i.lastFrameCount>t.framesEncoded)n.avgEncodeMs=1e3*t.totalEncodeTime/t.framesEncoded;else{const o=t.framesEncoded-i.lastFrameCount,a=t.totalEncodeTime-i.lastEncoderTime;n.avgEncodeMs=1e3*a/o}}if(t.framesEncoded&&t.qpSum){const i=this.lastEncoderMs.get(t.ssrc);!i||i.lastFrameCount>t.framesEncoded?n.qpSumPerFrame=t.qpSum/t.framesEncoded:n.qpSumPerFrame=(t.qpSum-i.lastQpSum)/(t.framesEncoded-i.lastFrameCount)}if(this.lastEncoderMs.set(t.ssrc,{lastFrameCount:t.framesEncoded,lastEncoderTime:t.totalEncodeTime,lastQpSum:t.qpSum,lts:Date.now()}),t.codecId&&(n.codec=this.getCodecFromCodecStats(t.codecId)),t.mediaSourceId&&this.processVideoMediaSource(t.mediaSourceId,n),this.processVideoTrackSenderStats(t,t.trackId,n),t.remoteId)this.processRemoteInboundStats(t.remoteId,n);else{const i=this.findRemoteStatsId(t.ssrc,Uo.REMOTE_INBOUND);i&&this.processRemoteInboundStats(i,n)}}processAudioOutboundStats(t){let n=this._stats.audioSend.find(r=>r.ssrc===t.ssrc);if(n||(n=Qa(rz),this._stats.audioSend.push(n)),n.ssrc=t.ssrc,n.packets=t.packetsSent,n.bytes=t.bytesSent,t.mediaSourceId&&this.processAudioMediaSource(t.mediaSourceId,n),t.codecId&&(n.codec=this.getCodecFromCodecStats(t.codecId)),this.processAudioTrackSenderStats(t,t.trackId,n),t.remoteId)this.processRemoteInboundStats(t.remoteId,n);else{const r=this.findRemoteStatsId(t.ssrc,Uo.REMOTE_INBOUND);r&&this.processRemoteInboundStats(r,n)}}findRemoteStatsId(t,n){var r;const i=Array.from(al(r=this.report).call(r)).find(o=>o.type===n&&o.ssrc===t);return i?i.id:null}processVideoMediaSource(t,n){const r=this.report.get(t);r&&r.width&&r.height&&r.framesPerSecond&&(n.inputFrame={width:r.width,height:r.height,frameRate:r.framesPerSecond})}processAudioMediaSource(t,n){const r=this.report.get(t);r&&(n.inputLevel=r.audioLevel)}processVideoTrackSenderStats(t,n,r){var i,o,a,s;const c=n?this.report.get(n):void 0,l=(i=c==null?void 0:c.framesSent)!==null&&i!==void 0?i:t.framesSent;if(typeof l!="number")return;let u=(o=c==null?void 0:c.frameWidth)!==null&&o!==void 0?o:t.frameWidth,d=(a=c==null?void 0:c.frameHeight)!==null&&a!==void 0?a:t.frameHeight,h=(s=c==null?void 0:c.framesPerSecond)!==null&&s!==void 0?s:t.framesPerSecond;if(typeof u=="number"&&typeof d=="number"||(u=0,d=0),h==null){const f=Date.now(),g=this.lastVideoFramesSent.get(r.ssrc);g&&f-g.lts>=800?(h=Math.round((l-g.count)/((f-g.lts)/1e3)),this.lastVideoFramesSent.set(r.ssrc,{count:l,lts:f,rate:h})):g?h=g.rate:this.lastVideoFramesSent.set(r.ssrc,{count:l,lts:f,rate:0})}r.sentFrame={width:u,height:d,frameRate:Math.max(0,h)}}processVideoTrackReceiverStats(t,n,r){var i,o,a,s,c;const l=n?this.report.get(n):void 0,u=(i=l==null?void 0:l.framesReceived)!==null&&i!==void 0?i:t.framesReceived,d=(o=l==null?void 0:l.frameWidth)!==null&&o!==void 0?o:t.frameWidth,h=(a=l==null?void 0:l.frameHeight)!==null&&a!==void 0?a:t.frameHeight,f=(s=l==null?void 0:l.jitterBufferDelay)!==null&&s!==void 0?s:t.jitterBufferDelay,g=(c=l==null?void 0:l.jitterBufferEmittedCount)!==null&&c!==void 0?c:t.jitterBufferEmittedCount;if(typeof u=="number"){const p=this.lastVideoFramesRecv.get(r.ssrc),m=Date.now();r.framesReceivedCount=u;let _=0;p&&m-p.lts>=800?(_=Math.round((u-p.count)/((m-p.lts)/1e3)),this.lastVideoFramesRecv.set(r.ssrc,{count:u,lts:m,rate:_})):p?_=p.rate:this.lastVideoFramesRecv.set(r.ssrc,{count:u,lts:m,rate:0}),r.receivedFrame={width:d||0,height:h||0,frameRate:_||0},r.decodedFrame={width:d||0,height:h||0,frameRate:r.decodeFrameRate||0},r.outputFrame={width:d||0,height:h||0,frameRate:r.outputFrameRate||r.decodeFrameRate||0}}if(f&&g){const p=this.lastVideoJBDelay.get(r.ssrc)||{jitterBufferDelay:0,jitterBufferEmittedCount:0,jitterBufferMs:0};let m=p.jitterBufferMs;const _=g-p.jitterBufferEmittedCount;_>0&&(m=1e3*(f-p.jitterBufferDelay)/_),r.jitterBufferMs=m,r.currentDelayMs=Math.round(m),this.lastVideoJBDelay.set(r.ssrc,{jitterBufferDelay:f,jitterBufferEmittedCount:g,jitterBufferMs:r.currentDelayMs})}}processAudioTrackSenderStats(t,n,r){var i,o,a,s;const c=n?this.report.get(n):void 0,l=(i=(o=c==null?void 0:c.echoReturnLoss)!==null&&o!==void 0?o:t.echoReturnLoss)!==null&&i!==void 0?i:0,u=(a=(s=c==null?void 0:c.echoReturnLossEnhancement)!==null&&s!==void 0?s:t.echoReturnLossEnhancement)!==null&&a!==void 0?a:0;r.aecReturnLoss=l,r.aecReturnLossEnhancement=u}processAudioTrackReceiverStats(t,n,r){var i,o,a,s,c,l,u;const d=n?this.report.get(n):void 0,h=(i=d==null?void 0:d.removedSamplesForAcceleration)!==null&&i!==void 0?i:t.removedSamplesForAcceleration,f=(o=d==null?void 0:d.totalSamplesReceived)!==null&&o!==void 0?o:t.totalSamplesReceived,g=(a=d==null?void 0:d.jitterBufferDelay)!==null&&a!==void 0?a:t.jitterBufferDelay,p=(s=d==null?void 0:d.jitterBufferEmittedCount)!==null&&s!==void 0?s:t.jitterBufferEmittedCount,m=(c=d==null?void 0:d.audioLevel)!==null&&c!==void 0?c:t==null?void 0:t.audioLevel,_=(l=d==null?void 0:d.totalSamplesDuration)!==null&&l!==void 0?l:t==null?void 0:t.totalSamplesDuration,E=(u=d==null?void 0:d.concealedSamples)!==null&&u!==void 0?u:t.concealedSamples;if(h&&f&&(r.accelerateRate=h/f),g&&p){const C=this.lastAudioJBDelay.get(r.ssrc)||{jitterBufferDelay:0,jitterBufferEmittedCount:0,jitterBufferMs:0};let b=C.jitterBufferMs;const T=p-C.jitterBufferEmittedCount;T>0&&(b=1e3*(g-C.jitterBufferDelay)/T),r.jitterBufferMs=Math.round(b),this.lastAudioJBDelay.set(r.ssrc,{jitterBufferDelay:g,jitterBufferEmittedCount:p,jitterBufferMs:r.jitterBufferMs})}r.outputLevel=m;let S=1920;_&&f&&(S=f/_/50,r.receivedFrames=Math.round(f/S)),E&&(r.droppedFrames=Math.round(E/S))}processRemoteInboundStats(t,n){const r=this.report.get(t);r&&(n.packetsLost=r.packetsLost,r.roundTripTime&&(n.rttMs=1e3*r.roundTripTime),r.jitter&&(n.jitterMs=1e3*r.jitter),r.timestamp&&(n.timestamp=r.timestamp))}getCodecFromCodecStats(t){const n=this.report.get(t);if(!n)return"";const r=n.mimeType.match(/\/(.*)$/);return r&&r[1]?r[1]:""}updateSendBitrate(){let t=0,n=null,r=null;this.mediaBytesSent.forEach(o=>{t+=o.diffMean()}),this.mediaBytesRetransmit.forEach(o=>{n=n===null?o.diffMean():n+o.diffMean()}),this.mediaBytesTargetEncode.forEach(o=>{r=r===null?o.diffMean():r+o.diffMean()});const i=n!==null?t-n:t;this._stats.bitrate={actualEncoded:8*i/(this.options.updateInterval/1e3),transmit:8*t/(this.options.updateInterval/1e3)},n!==null&&(this._stats.bitrate.retransmit=8*n/(this.options.updateInterval/1e3)),r!==null&&(this._stats.bitrate.targetEncoded=8*r/(this.options.updateInterval/1e3))}}class jfe extends wN{updateStats(){return _e.resolve()}}function IN(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:250,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:8,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:500,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1e4;const o=function(){const a=navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]*/i);return a&&a[0]?Number(a[0].split("/")[1]):null}();return o?o<76?new Vfe(e,{updateInterval:t,lossRateInterval:n,freezeRateLimit:r,firstVideoDecodedTimeout:i}):new IU(e,{updateInterval:t,lossRateInterval:n,freezeRateLimit:r,firstVideoDecodedTimeout:i}):function(a){if(!window.RTCStatsReport)return!1;const s=a.getStats();return!!(s instanceof _e||function(c){return!!c&&(typeof c=="object"||typeof c=="function")&&typeof c.then=="function"}(s))}(e)?new IU(e,{updateInterval:t,lossRateInterval:n,freezeRateLimit:r,firstVideoDecodedTimeout:i}):new jfe(e,{updateInterval:t,lossRateInterval:n,freezeRateLimit:r,firstVideoDecodedTimeout:i})}let AU=class{get localCapabilities(){return Yn(this._localCapabilities)}get rtpCapabilities(){return Yn(this._rtpCapabilities)}get candidates(){return Yn(this._candidates)}get iceParameters(){return Yn(this._iceParameters)}get dtlsParameters(){return Yn(this._dtlsParameters)}constructor(e){P(this,"sessionDesc",void 0),P(this,"_localCapabilities",void 0),P(this,"_rtpCapabilities",void 0),P(this,"_candidates",void 0),P(this,"_iceParameters",void 0),P(this,"_dtlsParameters",void 0),P(this,"setup",void 0),P(this,"currentMidIndex",void 0),P(this,"cname","o/i14u9pJrxRKAsu"),P(this,"firefoxSsrcMidMap",new Map),e=Yn(e);const{remoteIceParameters:t,remoteDtlsParameters:n,candidates:r,remoteRTPCapabilities:i,localCapabilities:o,direction:a,setup:s,videoCodec:c,audioCodec:l}=e;let u;this.setup=s,u=a===Ni.RECEIVE_ONLY?Dr.parse(`v=0
o=- 0 0 IN IP4 127.0.0.1
s=AgoraGateway
t=0 0
a=group:BUNDLE 0 1
a=msid-semantic: WMS
a=extmap-allow-mixed
m=video 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendonly
a=rtcp-mux
a=rtcp-rsize
a=mid:0
m=audio 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendonly
a=rtcp-mux
a=rtcp-rsize
a=mid:1
`):Dr.parse(`v=0
o=- 0 0 IN IP4 127.0.0.1
s=AgoraGateway
t=0 0
a=group:BUNDLE 0 1
a=msid-semantic: WMS
a=extmap-allow-mixed
m=video 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=recvonly
a=rtcp-mux
a=rtcp-rsize
a=mid:0
m=audio 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=recvonly
a=rtcp-mux
a=rtcp-rsize
a=mid:1
`),this._rtpCapabilities=i,this._candidates=r,this._iceParameters=t,this._dtlsParameters=n,this._localCapabilities=o;const d=a===Ni.RECEIVE_ONLY?this.rtpCapabilities.send:this.rtpCapabilities.recv,h=a===Ni.RECEIVE_ONLY?this._localCapabilities.recv:this._localCapabilities.send,f=a===Ni.RECEIVE_ONLY?i.send.videoCodecs:Vm(De.VIDEO,d,h,c),g=a===Ni.RECEIVE_ONLY?i.send.audioCodecs:Vm(De.AUDIO,d,h,l);for(const p of u.mediaDescriptions)p.attributes.iceUfrag=t.iceUfrag,p.attributes.icePwd=t.icePwd,p.attributes.fingerprints=n.fingerprints,p.attributes.candidates=r,p.attributes.setup=this.setup,p.media.mediaType==="application"&&(p.attributes.sctpPort="5000"),p.media.mediaType==="video"&&(p.media.fmts=f.map(m=>m.payloadType.toString(10)),p.attributes.payloads=f,p.attributes.extmaps=d.videoExtensions),p.media.mediaType==="audio"&&(p.media.fmts=g.map(m=>m.payloadType.toString(10)),p.attributes.payloads=g,p.attributes.extmaps=d.audioExtensions,jf(p));this.sessionDesc=u,this.currentMidIndex=u.mediaDescriptions.length-1}toString(){return Dr.print(this.sessionDesc)}hasMid(e){return Array.isArray(e)?e.every(t=>this.hasMid(t)):this.sessionDesc.mediaDescriptions.some(t=>t.attributes.mid===e)}send(e,t,n,r,i){n=n.replace(/ /g,"-");const{ssrcs:o,ssrcGroups:a}=Zu(t,this.cname,H("SYNC_GROUP")?n:void 0),s=this.findPreloadMediaDesc(o);if(s){if(Fn()&&this.firefoxSsrcMidMap.set(o[0].ssrcId,s.attributes.mid),i&&(i.twcc||i.remb)){const c=this.sessionDesc.mediaDescriptions.indexOf(s);return this.sessionDesc.mediaDescriptions[c]=this.mungSendMediaDesc(s,i),{mid:s.attributes.mid,needExchangeSDP:!0}}return{mid:s.attributes.mid,needExchangeSDP:!1}}{const c=this.findAvailableMediaIndex(e,o,r);let l;return c===-1?(l=this.createOrRecycleSendMedia(e,o,a,"sendonly",r,i),this.updateBundleMids()):(l=Yn(this.sessionDesc.mediaDescriptions[c]),l.attributes.direction="sendonly",l.attributes.ssrcs=o,l.attributes.ssrcGroups=a,this.sessionDesc.mediaDescriptions[c]=this.mungSendMediaDesc(l,i)),Fn()&&this.firefoxSsrcMidMap.set(o[0].ssrcId,l.attributes.mid),{needExchangeSDP:!0,mid:l.attributes.mid}}}stopSending(e){const t=this.sessionDesc.mediaDescriptions.filter(n=>n.attributes.mid&&e.indexOf(n.attributes.mid)!==-1);if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.stopSending.");t.forEach(n=>{n.attributes.ssrcs=[]}),this.updateBundleMids()}receive(e,t,n){const r=[];return e.forEach(i=>{const o=i._mediaStreamTrack.kind,a=this.findAvailableRecvMediaIndex(o);let s,c=!1;a===-1?(c=!0,s=this.createOrRecycleRecvMedia(i,[],"recvonly",t,n),this.updateBundleMids()):(s=Yn(this.sessionDesc.mediaDescriptions[a]),s.attributes.direction="recvonly"),r.push({mid:s.attributes.mid,needCreateTransceiver:c})}),r}stopReceiving(e){const t=this.sessionDesc.mediaDescriptions.filter(n=>e.indexOf(n.attributes.mid)!==-1);if(t.length!==e.length)throw new Error("MediaDescriptions' length doesn't match mids's length when calling RemoteSDP.receive.");t.forEach(n=>{n.media.port="0",n.attributes.direction="inactive"}),this.updateBundleMids()}addRemoteCandidate(e){const{foundation:t,protocol:n,address:r,port:i,type:o,relatedAddress:a,relatedPort:s,priority:c}=new RTCIceCandidate(e),l={foundation:t??"",componentId:"1",transport:n??"",priority:c?c+"":"",connectionAddress:r??"",port:i?i+"":"",type:o?o+"":"",relAddr:a??"",relPort:s?s+"":"",extension:{}};this.candidates.some(u=>u.priority===l.priority&&u.connectionAddress===l.connectionAddress&&u.port===l.port)||(this._candidates.push(l),this.sessionDesc.mediaDescriptions.forEach(u=>{u.attributes.candidates=this.candidates}))}clearRemoteCandidate(){this._candidates=[],this.sessionDesc.mediaDescriptions[0].attributes.candidates=this._candidates}createOrRecycleRecvMedia(e,t,n,r,i){const o=e._mediaStreamTrack.kind,a=this.rtpCapabilities.recv,s=Vm(o,a,this.localCapabilities.send,o===De.AUDIO?i:r),c=o===De.VIDEO?a.videoExtensions:a.audioExtensions,l="".concat(++this.currentMidIndex);let u={media:{mediaType:o,port:"9",protos:["UDP","TLS","RTP","SAVPF"],fmts:s.map(h=>h.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:[],extmaps:c,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:t,ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:s,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:n,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(l)}};u=this.mungRecvMediaDsec(u,e);const d=this.findFirstClosedMedia(o);if(d){const h=this.sessionDesc.mediaDescriptions.indexOf(d);this.sessionDesc.mediaDescriptions[h]=u}else this.sessionDesc.mediaDescriptions.push(u);return u}muteRemote(e){const t=this.sessionDesc.mediaDescriptions.filter(n=>Ce(e).call(e,n.attributes.mid||""));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");t.forEach(n=>{n.attributes.direction="inactive"})}unmuteRemote(e){const t=this.sessionDesc.mediaDescriptions.filter(n=>Ce(e).call(e,n.attributes.mid||""));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");t.forEach(n=>{n.attributes.direction="recvonly"})}findAvailableMediaIndex(e,t,n){return this.sessionDesc.mediaDescriptions.findIndex(r=>{const i=r.media.mediaType===e&&r.media.port!=="0"&&(r.attributes.direction==="sendonly"||r.attributes.direction==="sendrecv")&&r.attributes.ssrcs.length===0;if(Fn()){if(i){const o=this.firefoxSsrcMidMap.get(t[0].ssrcId);return!(o||r.attributes.mid!=="0"&&r.attributes.mid!=="1")||!(!o||o!==r.attributes.mid)}return!1}return i&&r.attributes.mid===n})}findAvailableRecvMediaIndex(e){return this.sessionDesc.mediaDescriptions.findIndex(t=>{const n=t.media.mediaType===e&&t.media.port!=="0"&&(t.attributes.direction==="recvonly"||t.attributes.direction==="sendrecv");return t.attributes.mid!=="0"&&t.attributes.mid!=="1"&&n})}predictReceivingMids(e){const t=[];for(let n=0;n<e;n++)t.push((this.currentMidIndex+n+1).toString(10));return t}restartICE(e){e=Yn(e),this._iceParameters=e,this.sessionDesc.mediaDescriptions.forEach(t=>{t.attributes.iceUfrag=e.iceUfrag,t.attributes.icePwd=e.icePwd})}createOrRecycleSendMedia(e,t,n,r,i,o){const a=this.rtpCapabilities.send,s=e===De.VIDEO?a.videoCodecs:a.audioCodecs,c=e===De.VIDEO?a.videoExtensions:a.audioExtensions;Fn()&&(i="".concat(++this.currentMidIndex));let l={media:{mediaType:e,port:"9",protos:["UDP","TLS","RTP","SAVPF"],fmts:s.map(d=>d.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:[],extmaps:c,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:t,ssrcGroups:n,rtcpFeedbackWildcards:[],payloads:s,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:r,rtcpMux:!0,rtcpRsize:!0,mid:i}};l=this.mungSendMediaDesc(l,o);const u=this.findFirstClosedMedia(e);if(u){const d=this.sessionDesc.mediaDescriptions.indexOf(u);this.sessionDesc.mediaDescriptions[d]=l}else this.sessionDesc.mediaDescriptions.push(l);return l}mungRecvMediaDsec(e,t,n){const r=Yn(e);return _N(r),Vf(r,t),SN(r,t),W9(r),sS(r,n,this.localCapabilities.send),r}mungSendMediaDesc(e,t){const n=Yn(e);return sS(n,t,this.localCapabilities.recv),jf(n),n}updateRecvMedia(e,t){const n=this.sessionDesc.mediaDescriptions.findIndex(r=>r.attributes.mid===e);if(n!==-1){const r=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[n],t);this.sessionDesc.mediaDescriptions[n]=r}}updateBundleMids(){this.sessionDesc.attributes.groups[0].identificationTag=this.sessionDesc.mediaDescriptions.filter(e=>e.media.port!=="0").map(e=>e.attributes.mid)}findPreloadMediaDesc(e){return this.sessionDesc.mediaDescriptions.find(t=>{var n;return((n=t.attributes)===null||n===void 0||(n=n.ssrcs[0])===null||n===void 0?void 0:n.ssrcId)===e[0].ssrcId})}findFirstClosedMedia(e){return this.sessionDesc.mediaDescriptions.find(t=>Fn()?t.media.port==="0"&&t.media.mediaType===e:t.media.port==="0")}};const Hfe=["sdp"];var un;function OU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ol(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?OU(Object(n),!0).forEach(function(r){P(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OU(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}let xU=(un=class $h extends i9{get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get dtlsTransportState(){var t,n;return(t=(n=this.peerConnection.getReceivers()[0])===null||n===void 0||(n=n.transport)===null||n===void 0?void 0:n.state)!==null&&t!==void 0?t:null}get localCodecs(){return[]}set isInRestartIce(t){this._isInRestartIce=t}get isInRestartIce(){return this._isInRestartIce}constructor(t,n,r){super(t,n),P(this,"direction",void 0),P(this,"name",void 0),P(this,"store",void 0),P(this,"spec",void 0),P(this,"peerConnection",void 0),P(this,"initialOffer",void 0),P(this,"transport",void 0),P(this,"statsFilter",void 0),P(this,"localCandidateCount",0),P(this,"_isInRestartIce",!1),P(this,"mutex",new ri("P2PConnection-mutex")),P(this,"onLocalCandidate",void 0),P(this,"remoteSDP",void 0),P(this,"pendingCandidates",[]),P(this,"localCapabilities",void 0),P(this,"isReady",!1),P(this,"restartCnt",0),P(this,"curTurnServerIndex",0),this.store=n,this.spec=t,this.peerConnection=new RTCPeerConnection($h.resolvePCConfiguration(t,n.p2pTransport),{optional:[{googDscp:!0}]}),this.direction=r??Ni.SEND_ONLY,this.name=this.direction===Ni.SEND_ONLY?"sendP2PConnection":"recvP2PConnection",this.statsFilter=IN(this.peerConnection,H("STATS_UPDATE_INTERVAL"),void 0,Fn()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1}async establish(t){try{const n=await K9();if(this.localCapabilities=cS(n),t){const{sdp:r}=t,i=Bfe(t,Hfe),o=function(){const u={audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]},d=I0(arguments.length>2?arguments[2]:void 0,arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},"sendonly"),h={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},f={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},g={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]};if(ts(d,u,"videoExtensions",h,f,g),ts(d,u,"videoCodecs",h,f,g),ts(d,u,"audioExtensions",h,f,g),ts(d,u,"audioCodecs",h,f,g),H("RAISE_H264_BASELINE_PRIORITY")){const p=g.videoCodecs.findIndex(m=>m.rtpMap&&m.rtpMap.encodingName.toLocaleLowerCase()==="h264"&&m.fmtp&&m.fmtp.parameters["profile-level-id"]==="42001f");if(p!==-1){const m=g.videoCodecs.findIndex(_=>_.rtpMap&&_.rtpMap.encodingName.toLocaleLowerCase()==="h264");if(m<p){w.debug("raising H264 baseline profile priority");const _=g.videoCodecs[p];g.videoCodecs.splice(p,1),g.videoCodecs.splice(m,0,_)}m!==-1&&H("FILTER_SEND_H264_BASELINE")&&(h.videoCodecs=h.videoCodecs.filter(_=>!(_.rtpMap&&_.rtpMap.encodingName.toLocaleLowerCase()==="h264"&&_.fmtp&&_.fmtp.parameters["profile-level-id"]!=="42001f")))}}return{send:h,recv:f,sendrecv:g}}({},{},r);this.remoteSDP=new AU({remoteIceParameters:i.iceParameters,remoteDtlsParameters:i.dtlsParameters,candidates:[],remoteRTPCapabilities:o,localCapabilities:this.localCapabilities,direction:this.direction,setup:"actpass",videoCodec:this.store.codec,audioCodec:this.store.audioCodec}),await this.setRemoteDescription({type:"offer",sdp:this.remoteSDP.toString()}),this.isReady=!0;const a=await this.peerConnection.createAnswer();if(!a.sdp)throw new Error("Cannot get answer sdp when trying to establish PeerConnection.");const s=Jl(a.sdp);await this.peerConnection.setLocalDescription(a);const c=await sU({},{},a.sdp);this.localCapabilities=cS(c);const l=this.peerConnection.getTransceivers()[0];return l!=null&&l.receiver&&l.receiver.transport&&this.tryBindTransportEvents(l.receiver.transport),Ol(Ol({},s),{},{sdp:a.sdp})}{this.peerConnection.addTransceiver("video",{direction:"sendonly"}),this.peerConnection.addTransceiver("audio",{direction:"sendonly"});const r=await this.peerConnection.createOffer();if(!r.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const i=Jl(r.sdp);return this.initialOffer=r,Ol(Ol({},i),{},{sdp:r.sdp})}}catch(n){throw new Q(k.GET_LOCAL_CONNECTION_PARAMS_FAILED,n.toString())}}async connect(t){try{if(!this.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");await this.peerConnection.setLocalDescription(this.initialOffer);const{sdp:n,iceParameters:r,dtlsParameters:i}=t,o=await sU({},{},n);this.remoteSDP=new AU({remoteIceParameters:r,remoteDtlsParameters:i,candidates:[],remoteRTPCapabilities:o,localCapabilities:this.localCapabilities,direction:this.direction,setup:"active",videoCodec:this.store.codec,audioCodec:this.store.audioCodec}),await this.setRemoteDescription({type:"answer",sdp:this.remoteSDP.toString()});const a=this.peerConnection.getTransceivers()[0];a!=null&&a.sender&&a.sender.transport&&this.tryBindTransportEvents(a.sender.transport)}catch(n){throw new Q(k.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(n.toString()))}}async addRemoteCandidate(t){try{t&&this.pendingCandidates.push(t),this.peerConnection.remoteDescription&&this.isReady&&(this.pendingCandidates.forEach(n=>{this.peerConnection.addIceCandidate(n)}),this.pendingCandidates=[])}catch(n){throw new Q(k.ADD_CANDIDATE_FAILED,"P2PConnection.addRemoteCandidate failed; ".concat(n.toString()))}}send(t,n,r){var i=this;return Ms(function*(){const o=yield Dt(i.mutex.lock("From P2PConnection.send"));try{if(!i.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");const a=[],s=i.remoteSDP.receive(t,n,r);t.forEach((m,_)=>{if(s[_].needCreateTransceiver){const E=i.peerConnection.addTransceiver(m._mediaStreamTrack,{direction:"sendonly"});a.push(E),m._updateRtpTransceiver(E)}else{const E=i.peerConnection.getTransceivers().find(S=>S.mid===s[_].mid);if(!E)throw new Error("cannot find transceiver when sendPeerconnection send, mid is ".concat(s[_].mid));a.push(E),m._updateRtpTransceiver(E)}}),Fn()&&H("SIMULCAST")===!0&&(yield Dt(i.applySimulcastForFirefox(a,t)));const c=s.map(m=>m.mid),l=yield Dt(i.peerConnection.createOffer()),u=i.mungSendOfferSDP(l.sdp,t,c),d=Dr.parse(u),h=c.map(m=>{const _=d.mediaDescriptions.find(E=>E.attributes.mid===m);if(!_)throw new Error("Cannot extract ssrc from mediaDescription.");return H9(_,H("USE_PUB_RTX"))}),f=a.map((m,_)=>{const E=c[_];return{localSSRC:h[_],id:E}});yield Dt(i.peerConnection.setLocalDescription({type:"offer",sdp:u}));try{yield f}catch(m){const _=i.remoteSDP.toString();throw yield Dt(i.peerConnection.setLocalDescription({type:"offer",sdp:u})),yield Dt(i.peerConnection.setRemoteDescription({type:"answer",sdp:_})),yield Dt(i.stopSending(c,!0)),m}yield Dt(i.applySimulcastEncodings(a,t)),yield Dt(i.applySendEncodings(a,t));const g=i.remoteSDP.toString(),p=i.logSDPExchange(u,"offer","local","send");return p==null||p(g),yield Dt(i.setRemoteDescription({type:"answer",sdp:g})),a.map((m,_)=>{const E=c[_];return{localSSRC:h[_],id:E}})}catch(a){throw a instanceof Q?a:new Q(k.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(a.toString()))}finally{o()}})()}async stopSending(t,n){const r=n?void 0:await this.mutex.lock("From P2PConnection.stopSending");try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");const i=this.peerConnection.getTransceivers().filter(c=>t.indexOf(c.mid)!==-1);if(i.length!==t.length)throw new Error("Transceivers' length (".concat(i.length,") doesn't match mids' length (").concat(t.length,") when trying to call P2PConnection.stopSending."));i.map(c=>{var l;c.direction="inactive",(l=c.stop)===null||l===void 0||l.call(c)});const o=await this.peerConnection.createOffer(),a=this.logSDPExchange(o.sdp||"","offer","local","stopSending");await this.peerConnection.setLocalDescription(o),this.remoteSDP.stopReceiving(t);const s=this.remoteSDP.toString();a==null||a(s),await this.setRemoteDescription({type:"answer",sdp:s})}catch(i){throw new Q(k.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(i.toString()))}finally{r&&r()}}async receive(t,n,r,i){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(t," before remoteSDP created."));const{mid:o,needExchangeSDP:a}=this.remoteSDP.send(t,n,r,i);if(a){const c=this.remoteSDP.toString(),l=this.logSDPExchange(c,"offer","remote","receive");await this.setRemoteDescription({type:"offer",sdp:c});const u=await this.peerConnection.createAnswer(),d=this.mungReceiveAnswerSDP(u.sdp,o,t);l==null||l(d||""),await this.peerConnection.setLocalDescription({type:"answer",sdp:d}),w.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(t," by exchanging SDP."))}else w.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(t," no need to exchange SDP."));const s=this.peerConnection.getTransceivers().find(c=>c.mid===o);if(!s||s.mid===null)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:s.receiver.track,mid:s.mid,transceiver:s}}catch(o){throw new Q(k.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(o.toString()))}}async mockReceive(t,n,r,i){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(t," before remoteSDP created."));const{mid:o,needExchangeSDP:a}=this.remoteSDP.send(t,n,r,i);if(a){const s=this.remoteSDP.toString(),c=this.logSDPExchange(s,"offer","remote","receive");await this.setRemoteDescription({type:"offer",sdp:s});const l=await this.peerConnection.createAnswer(),u=this.mungReceiveAnswerSDP(l.sdp,o,t);c==null||c(u||""),await this.peerConnection.setLocalDescription({type:"answer",sdp:u}),w.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(t," by exchanging SDP."))}else w.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(t," no need to exchange SDP."))}catch(o){throw new Q(k.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(o.toString()))}}async stopReceiving(t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");this.remoteSDP.stopSending(t);const n=this.remoteSDP.toString(),r=this.logSDPExchange(n,"offer","remote","stopReceiving");await this.setRemoteDescription({type:"offer",sdp:n});const i=await this.peerConnection.createAnswer();r==null||r(i.sdp||""),await this.peerConnection.setLocalDescription(i)}catch(n){throw new Q(k.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(n.toString()))}}async restartICE(t){try{if(this.store.p2pTransport===zu.Auto&&(this.store.p2pTransport=zu.SdRtn,It().supportPCSetConfiguration&&this.peerConnection.setConfiguration($h.resolvePCConfiguration(this.spec,this.store.p2pTransport))),this.restartCnt>3&&(this.restartCnt=0,It().supportPCSetConfiguration&&this.peerConnection.setConfiguration($h.resolvePCConfiguration(this.spec,this.store.p2pTransport,++this.curTurnServerIndex))),!t){this.restartCnt++,this.isReady=!1;const n=await this.peerConnection.createOffer({iceRestart:!0});if(!n.sdp)throw new Error("Cannot restartICE because restart offer SDP does not exist.");const{iceParameters:r}=Jl(n.sdp);return this.store.descriptionStart(),this.direction===Ni.SEND_ONLY&&await this.peerConnection.setLocalDescription(n),r}if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");if(this.remoteSDP.restartICE(t),this.store.descriptionStart(),this.direction===Ni.RECEIVE_ONLY){this.restartCnt++,await this.setRemoteDescription({type:"offer",sdp:this.remoteSDP.toString()});const n=await this.peerConnection.createAnswer();if(!n.sdp)throw new Error("Cannot get answer sdp when trying to iceRestart.");const{iceParameters:r}=Jl(n.sdp);return await this.peerConnection.setLocalDescription(n),r}await this.setRemoteDescription({type:"answer",sdp:this.remoteSDP.toString()}),this.isReady=!0}catch(n){throw new Q(k.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(n.toString()))}}close(){var t;this.peerConnection.close(),this.peerConnection.onicecandidate=null,(t=this.onConnectionStateChange)===null||t===void 0||t.call(this,"closed"),this.tryUnbindTransportEvents(),this.unbindPCEvents(),this.unbindStatsEvents(),this.transport=void 0,this.statsFilter.destroy()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(t){return this.statsFilter.getVideoIsReady(t)}async updateEncoderConfig(t,n){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");const r=await this.peerConnection.createOffer(),i=this.mungSendOfferSDP(r.sdp,[n],[t]);this.remoteSDP.updateRecvMedia(t,n);const o=this.remoteSDP.toString(),a=this.logSDPExchange(i,"offer","local","updateEncoderConfig");await this.peerConnection.setLocalDescription({type:"offer",sdp:i}),a==null||a(o),await this.peerConnection.setRemoteDescription({type:"answer",sdp:o})}catch(r){throw new Q(k.EXCHANGE_SDP_FAILED,r.toString())}}async updateSendParameters(t,n){const r=this.peerConnection.getTransceivers().filter(i=>i.mid===t);r.length===1&&(this.isVP8Simulcast(n)?Fn()||await this.applySimulcastEncodings(r,[n]):await this.applySendEncodings(r,[n]))}setStatsRemoteVideoIsReady(t,n){this.statsFilter.setVideoIsReady2(t,n)}async replaceTrack(t,n){const r=this.peerConnection.getTransceivers().find(i=>i.mid===n);r&&await r.sender.replaceTrack(t._mediaStreamTrack)}async getSelectedCandidatePair(){const t=this.peerConnection.getReceivers();if(t.length>0&&t[0].transport&&t[0].transport.iceTransport&&t[0].transport.iceTransport.getSelectedCandidatePair&&t[0].transport.iceTransport.getSelectedCandidatePair()){const n=t[0].transport.iceTransport,{local:r,remote:i}=n.getSelectedCandidatePair();return{local:Ol(Ol({},Ac),{},{candidateType:r.type,protocol:r.protocol,address:r.address,port:r.port}),remote:Ol(Ol({},Ac),{},{candidateType:i.type,protocol:i.protocol,address:i.address,port:i.port})}}return this.statsFilter.getSelectedCandidatePair()}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var t,n;Ce(t=["connected","completed"]).call(t,this.peerConnection.iceConnectionState)&&(this.isReady=!1),(n=this.onICEConnectionStateChange)===null||n===void 0||n.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var t;this.peerConnection.connectionState==="connected"&&(this.restartCnt=0),(t=this.onConnectionStateChange)===null||t===void 0||t.call(this,this.peerConnection.connectionState)},this.startICECandidate()}startICECandidate(){this.peerConnection.onicecandidate||(this.localCandidateCount=0,this.peerConnection.onicecandidate=t=>{if(t.candidate){var n;t.candidate.candidate&&((n=this.onLocalCandidate)===null||n===void 0||n.call(this,t.candidate.toJSON())),this.localCandidateCount+=1}else w.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount)})}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;const i={iceServers:[]};var o;return t.iceServers?i.iceServers=t.iceServers:t.turnServer&&t.turnServer.mode!=="off"&&(Fy(t.turnServer.servers)?i.iceServers=t.turnServer.servers:(i.iceServers&&i.iceServers.push(...$h.turnServerConfigToIceServers(t.turnServer.servers,n,r)),H("USE_TURN_SERVER_OF_GATEWAY")&&i.iceServers&&t.turnServer.serversFromGateway&&i.iceServers.push(...$h.turnServerConfigToIceServers(t.turnServer.serversFromGateway,n,r)),Ce(o=[zu.Relay,zu.SdRtn]).call(o,n)&&(i.iceTransportPolicy="relay"),H("FORCE_TURN_TCP")?i.iceTransportPolicy="relay":t.turnServer.servers.concat(t.turnServer.serversFromGateway||[]).forEach(a=>{a.forceturn&&(i.iceTransportPolicy="relay")}))),H("ENABLE_ENCODED_TRANSFORM")&&It().supportWebRTCEncodedTransform&&(i.encodedInsertableStreams=!0),w.debug("P2PConnection p2pTransport is ".concat(n)),i}static turnServerConfigToIceServers(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;const i=[],o=t.filter(s=>s.tcpport);w.debug("P2PConnection turnServers is ".concat(o,", current index is ").concat(r));const a=o.length>r?o[r]:o[0];switch(n){case zu.SdRtn:const s=t.filter(l=>{var u;return Ce(u=l.username).call(u,"glb:")&&l.turnServerURL==l.turnServerURL}),c=s.length>r?s[r]:s[0];c&&(i.push({username:c.username,credential:c.password,credentialType:"password",urls:"turn:".concat(Xh(c.turnServerURL),":").concat(c.tcpport,"?transport=udp")}),i.push({username:c.username,credential:c.password,credentialType:"password",urls:"turns:".concat(Xh(c.turnServerURL),":").concat(c.tcpport,"?transport=tcp")}));break;case zu.Relay:a&&(i.push({username:a.username,credential:a.password,credentialType:"password",urls:"turn:".concat(a.turnServerURL,":").concat(a.tcpport,"?transport=udp")}),i.push({username:a.username,credential:a.password,credentialType:"password",urls:"turns:".concat(Xh(a.turnServerURL),":").concat(a.tcpport,"?transport=tcp")}));break;default:a&&(i.push({username:a.username,credential:a.password,credentialType:"password",urls:"turn:".concat(a.turnServerURL,":").concat(a.tcpport,"?transport=udp")}),i.push({username:a.username,credential:a.password,credentialType:"password",urls:"turns:".concat(Xh(a.turnServerURL),":").concat(a.tcpport,"?transport=tcp")}),i.push({username:a.username,credential:a.password,credentialType:"password",urls:"stun:".concat(a.turnServerURL,":").concat(a.tcpport)}))}return i}tryBindTransportEvents(t){if(t){this.transport=t,t.onstatechange=()=>{var r;t!=null&&t.state&&((r=this.onDTLSTransportStateChange)===null||r===void 0||r.call(this,t.state))},t.onerror=r=>{var i;(i=this.onDTLSTransportError)===null||i===void 0||i.call(this,"error"in r?r.error:r)};const n=t.iceTransport;n&&(n.onstatechange=()=>{const r=t==null?void 0:t.iceTransport.state;var i;r&&((i=this.onICETransportStateChange)===null||i===void 0||i.call(this,r))},n.getSelectedCandidatePair&&(n.onselectedcandidatepairchange=()=>{if(n.getSelectedCandidatePair()){const{local:r,remote:i}=n.getSelectedCandidatePair();w.info("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] selectedcandidatepairchange: local ").concat(JSON.stringify({candidateType:r.type,protocol:r.protocol}),", remote ").concat(JSON.stringify({candidateType:i.type,protocol:i.protocol,address:i.address,port:i.port})," )"))}}))}}tryUnbindTransportEvents(){this.transport&&(this.transport.onstatechange=null,this.transport.onerror=null,this.transport.iceTransport&&(this.transport.iceTransport.onstatechange=null))}async updateRtpSenderEncodings(t,n){var r;if(n||(n=this.peerConnection.getSenders().find(u=>u.track===t._mediaStreamTrack)),!n)return w.warn("[".concat(t.getTrackId(),"] no rtpSender found}"));if(this.isVP8Simulcast(t))return w.warn("[updateRtpSenderEncodings] Track is VP8 simulcast, please apply simulcast encodings");if(!It().supportSetRtpSenderParameters)return w.warn("[updateRtpSenderEncodings] Browser not support set rtp-sender parameters");const i={},o={};switch(t._optimizationMode){case"motion":i.degradationPreference="maintain-framerate";break;case"detail":i.degradationPreference="maintain-resolution";break;default:i.degradationPreference="balanced"}if(t._encoderConfig){var a;const{bitrateMax:u,frameRate:d,scaleResolutionDownBy:h}=t._encoderConfig;u&&(o.maxBitrate=1e3*u),Ce(a=t._hints).call(a,gn.LOW_STREAM)&&(d&&(o.maxFramerate=Oo(d)),h&&h>=1&&(o.scaleResolutionDownBy=h))}if(H("DSCP_TYPE")&&_u()){var s;const u=H("DSCP_TYPE");Ce(s=["very-low","low","medium","high"]).call(s,u)&&(o.networkPriority=u)}const c=n.getParameters(),l=(r=c.encodings)===null||r===void 0?void 0:r[0];Fn()&&!l&&(i.encodings=[o]),l&&Object.assign(l,o),Object.assign(c,i),w.debug("[".concat(t.getTrackId(),"] updateRtpSenderEncodings: ").concat(JSON.stringify(c.encodings))),await n.setParameters(c)}async applySendEncodings(t,n){try{if(!It().supportSetRtpSenderParameters||t.length!==n.length)return;for(let r=0;r<t.length;r++){const i=t[r],o=n[r];o instanceof hn&&!this.isVP8Simulcast(o)&&await this.updateRtpSenderEncodings(o,i.sender)}}catch{w.debug("[".concat(this.store.clientId,"] Apply RTPSendEncodings failed."))}}mungSendOfferSDP(t,n,r){const i=Dr.parse(t);return n.forEach((o,a)=>{const s=r[a],c=i.mediaDescriptions.find(l=>l.attributes.mid===s);c&&(Vf(c,o),G9(c,o,this.store.codec))}),Dr.print(i)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=t=>{var n;(n=this.onFirstAudioReceived)===null||n===void 0||n.call(this,t)},this.statsFilter.onFirstVideoReceived=t=>{var n;(n=this.onFirstVideoReceived)===null||n===void 0||n.call(this,t)},this.statsFilter.onFirstAudioDecoded=t=>{var n;(n=this.onFirstAudioDecoded)===null||n===void 0||n.call(this,t)},this.statsFilter.onFirstVideoDecoded=(t,n,r)=>{var i;(i=this.onFirstVideoDecoded)===null||i===void 0||i.call(this,t,n,r)},this.statsFilter.onSelectedLocalCandidateChanged=(t,n)=>{var r;(r=this.onSelectedLocalCandidateChanged)===null||r===void 0||r.call(this,t,n)},this.statsFilter.onSelectedRemoteCandidateChanged=(t,n)=>{var r;(r=this.onSelectedRemoteCandidateChanged)===null||r===void 0||r.call(this,t,n)},this.statsFilter.onFirstVideoDecodedTimeout=t=>{var n;(n=this.onFirstVideoDecodedTimeout)===null||n===void 0||n.call(this,t)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0,this.statsFilter.onFirstVideoDecodedTimeout=void 0}async applySimulcastForFirefox(t,n){if(t.length===n.length)for(let c=0;c<t.length;c++){var r,i,o,a,s;const l=t[c],u=n[c];if(u instanceof hn&&!Ce(r=u._hints).call(r,gn.LOW_STREAM)&&(i=u._encoderConfig)!==null&&i!==void 0&&i.bitrateMax&&((o=u._encoderConfig)===null||o===void 0?void 0:o.bitrateMax)>200&&(a=u._scalabilityMode)!==null&&a!==void 0&&a.numSpatialLayers&&((s=u._scalabilityMode)===null||s===void 0?void 0:s.numSpatialLayers)>1&&this.store.codec==="vp8"){const d={},h={high:1e3*(u._encoderConfig.bitrateMax-50),medium:5e4};d.encodings=[{rid:"m",active:!0,maxBitrate:h.medium,scaleResolutionDownBy:4},{rid:"h",active:!0,maxBitrate:h.high}];const f=l.sender.getParameters();await l.sender.setParameters(Object.assign(f,d))}}}async applySimulcastEncodings(t,n){if(!Fn()&&t.length===n.length)for(let r=0;r<t.length;r++){const i=n[r];if(i instanceof hn&&this.isVP8Simulcast(i)){const o=t[r],a={},s={high:1e3*(i._encoderConfig.bitrateMax-50),medium:5e4};a.encodings=[{active:!0,adaptivePtime:!1,networkPriority:"high",priority:"high",maxBitrate:s.high},{active:!0,adaptivePtime:!1,networkPriority:"low",priority:"low",maxBitrate:s.medium,scaleResolutionDownBy:4}];const c=o.sender.getParameters();await o.sender.setParameters(Object.assign(c,a))}}}isVP8Simulcast(t){var n,r,i,o,a;return!!(t instanceof hn&&H("SIMULCAST")&&this.store.codec==="vp8"&&!Ce(n=t._hints).call(n,gn.LOW_STREAM)&&(r=t._encoderConfig)!==null&&r!==void 0&&r.bitrateMax&&((i=t._encoderConfig)===null||i===void 0?void 0:i.bitrateMax)>200&&(o=t._scalabilityMode)!==null&&o!==void 0&&o.numSpatialLayers&&((a=t._scalabilityMode)===null||a===void 0?void 0:a.numSpatialLayers)>1)}logSDPExchange(t,n,r,i){if(H("SDP_LOGGING"))return w.upload("[".concat(this.store.clientId,"] exchanging ").concat(r," ").concat(n," SDP during P2PConnection.").concat(i,`
`),t),n==="offer"?o=>{this.logSDPExchange(o,"answer",r==="local"?"remote":"local",i)}:void 0}async muteLocal(t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");const n=this.peerConnection.getTransceivers().filter(a=>a.mid&&t.indexOf(a.mid)!==-1);if(n.length!==t.length)throw new Error("Transceivers' length doesn't match mids' length.");n.map(a=>{a.direction="inactive"});const r=await this.peerConnection.createOffer(),i=this.logSDPExchange(r.sdp||"","offer","local","muteLocal");await this.peerConnection.setLocalDescription(r),this.remoteSDP.muteRemote(t);const o=this.remoteSDP.toString();i==null||i(o),await this.setRemoteDescription({type:"answer",sdp:o})}catch(n){throw new Q(k.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(n.toString()))}}async unmuteLocal(t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");const n=this.peerConnection.getTransceivers().filter(a=>a.mid&&t.indexOf(a.mid)!==-1);if(n.length!==t.length)throw new Error("Transceivers' length doesn't match mids' length.");n.map(async a=>{a.direction="sendonly"});const r=await this.peerConnection.createOffer(),i=this.logSDPExchange(r.sdp||"","offer","local","unmuteLocal");await this.peerConnection.setLocalDescription(r),this.remoteSDP.unmuteRemote(t);const o=this.remoteSDP.toString();i==null||i(o),await this.setRemoteDescription({type:"answer",sdp:o})}catch(n){throw new Q(k.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(n.toString()))}}async getRemoteSSRC(t,n){var r,i;if(n=(r=n)!==null&&r!==void 0?r:(i=this.currentRemoteDescription)===null||i===void 0?void 0:i.sdp){var o;const a=(o=Dr.parse(n).mediaDescriptions.find(s=>s.attributes.mid===t))===null||o===void 0?void 0:o.attributes.ssrcs;return a==null?void 0:a[0].ssrcId}}async setRemoteDescription(t){var n;await this.peerConnection.setRemoteDescription(t),Ce(n=["connected","completed"]).call(n,this.peerConnection.iceConnectionState)||(this.isReady=!0,this.addRemoteCandidate())}mungReceiveAnswerSDP(t,n,r){const i=Dr.parse(t),o=i.mediaDescriptions.find(a=>a.attributes.mid===n);return o&&r===De.AUDIO&&o.media.mediaType==="audio"&&jf(o),Dr.print(i)}},Ae(un.prototype,"establish",[Va],Object.getOwnPropertyDescriptor(un.prototype,"establish"),un.prototype),Ae(un.prototype,"connect",[Va],Object.getOwnPropertyDescriptor(un.prototype,"connect"),un.prototype),Ae(un.prototype,"receive",[Va],Object.getOwnPropertyDescriptor(un.prototype,"receive"),un.prototype),Ae(un.prototype,"mockReceive",[Va],Object.getOwnPropertyDescriptor(un.prototype,"mockReceive"),un.prototype),Ae(un.prototype,"stopReceiving",[Va],Object.getOwnPropertyDescriptor(un.prototype,"stopReceiving"),un.prototype),Ae(un.prototype,"restartICE",[Va],Object.getOwnPropertyDescriptor(un.prototype,"restartICE"),un.prototype),Ae(un.prototype,"close",[Va],Object.getOwnPropertyDescriptor(un.prototype,"close"),un.prototype),Ae(un.prototype,"updateEncoderConfig",[Va],Object.getOwnPropertyDescriptor(un.prototype,"updateEncoderConfig"),un.prototype),Ae(un.prototype,"updateSendParameters",[Va],Object.getOwnPropertyDescriptor(un.prototype,"updateSendParameters"),un.prototype),Ae(un.prototype,"replaceTrack",[Va],Object.getOwnPropertyDescriptor(un.prototype,"replaceTrack"),un.prototype),Ae(un.prototype,"muteLocal",[Va],Object.getOwnPropertyDescriptor(un.prototype,"muteLocal"),un.prototype),Ae(un.prototype,"unmuteLocal",[Va],Object.getOwnPropertyDescriptor(un.prototype,"unmuteLocal"),un.prototype),un);function Va(e,t,n){const r=e[t];if(typeof r!="function")throw new Error("Cannot use mutex on object property.");return n.value=async function(){const i=this.mutex,o=await i.lock("From P2PConnection.".concat(t));try{for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return await r.apply(this,s)}finally{o()}},n}function aA(e,t){let n=document.createElement("video"),r=document.createElement("canvas");n.setAttribute("style","display:none"),r.setAttribute("style","display:none"),n.setAttribute("muted",""),n.muted=!0,n.setAttribute("autoplay",""),n.autoplay=!0,n.setAttribute("playsinline",""),r.width=Oo(t.width),r.height=Oo(t.height);const i=Oo(t.framerate||15);document.body.append(n),document.body.append(r);let o=e._mediaStreamTrack;n.srcObject=new MediaStream([o]),n.play();const a=r.getContext("2d");if(!a)throw new q(k.UNEXPECTED_ERROR,"can not get canvas context");const s=It(),c=r.captureStream(s.supportRequestFrame?0:i).getVideoTracks()[0];c.canvas||(c.canvas=r),r.startCapture=()=>{if(!n)return r.stopCapture&&r.stopCapture();if(n.paused&&n.play(),n.videoHeight>2&&n.videoWidth>2){const u=n.videoWidth,d=n.videoHeight/u,h=r.width*d;Math.abs(h-r.height)>=2&&(w.debug("adjust low stream resolution","".concat(r.width,"x").concat(r.height," -> ").concat(r.width,"x").concat(h)),r.height=h)}a.drawImage(n,0,0,r.width,r.height),c.requestFrame&&c.requestFrame(),o!==e._mediaStreamTrack&&(o=e._mediaStreamTrack,n.srcObject=new MediaStream([o]))},r.stopCapture=gN(()=>r.startCapture&&r.startCapture(),i);const l=c.stop;return c.stop=()=>{l.call(c),n&&(n.remove(),n.srcObject=null,n=null),r&&(r.width=0,r.remove(),r.stopCapture&&r.stopCapture(),r.startCapture=void 0,r.stopCapture=void 0,r=null),w.debug("clean low stream renderer")},c}var p_=function(e){return e[e.HEIGHT=2033]="HEIGHT",e[e.FRAME_RATE=2034]="FRAME_RATE",e[e.WIDTH=2035]="WIDTH",e}(p_||{}),vr=function(e){return e[e.FRAME_RATE=2002]="FRAME_RATE",e[e.WIDTH=2003]="WIDTH",e[e.HEIGHT=2004]="HEIGHT",e[e.PACKAGE_LOST=2005]="PACKAGE_LOST",e[e.AVG_ENCODE=2007]="AVG_ENCODE",e[e.NACKS=2009]="NACKS",e[e.PLIS=2010]="PLIS",e[e.FIRS=2011]="FIRS",e[e.BITRATE=2012]="BITRATE",e[e.PACKAGE_RATE=2031]="PACKAGE_RATE",e[e.ADAPTATION=2032]="ADAPTATION",e[e.ACTUAL_ENCODED=2060]="ACTUAL_ENCODED",e[e.BANDWIDTH=2061]="BANDWIDTH",e[e.RETRANSMIT=2062]="RETRANSMIT",e[e.TARGET_ENCODED=2064]="TARGET_ENCODED",e[e.TRANSMIT=2066]="TRANSMIT",e[e.FREEZE=2082]="FREEZE",e[e.DISABLED=2095]="DISABLED",e[e.PLAYER_STATUS=2128]="PLAYER_STATUS",e[e.QP_SUM=2143]="QP_SUM",e}(vr||{}),Gu=function(e){return e[e.BITRATE=2069]="BITRATE",e[e.PACKAGE_LOST=2070]="PACKAGE_LOST",e[e.PACKAGE_RATE=2071]="PACKAGE_RATE",e[e.HEIGHT=2073]="HEIGHT",e[e.FRAME_RATE=2075]="FRAME_RATE",e[e.WIDTH=2077]="WIDTH",e}(Gu||{}),li=function(e){return e[e.JITTER=-1]="JITTER",e[e.PACKAGE_LOST=2014]="PACKAGE_LOST",e[e.WIDTH=2018]="WIDTH",e[e.HEIGHT=2019]="HEIGHT",e[e.FRAME_RATE=2020]="FRAME_RATE",e[e.JITTER_BUFFER=2023]="JITTER_BUFFER",e[e.CURRENT_DELAY=2024]="CURRENT_DELAY",e[e.NACKS=2026]="NACKS",e[e.PLIS=2027]="PLIS",e[e.FIRS=2028]="FIRS",e[e.BITRATE=2029]="BITRATE",e[e.PACKAGE_RATE=2078]="PACKAGE_RATE",e[e.FREEZE=2084]="FREEZE",e[e.DISABLED=2101]="DISABLED",e[e.PLAYER_STATUS=2129]="PLAYER_STATUS",e[e.QP_SUM=2144]="QP_SUM",e[e.I_FRAME_DELAY=2149]="I_FRAME_DELAY",e}(li||{}),Ku=function(e){return e[e.FRAME_RATE_DECODE=2021]="FRAME_RATE_DECODE",e[e.FRAME_RATE_RENDER=2022]="FRAME_RATE_RENDER",e[e.FRAME_RATE_OUTPUT=2155]="FRAME_RATE_OUTPUT",e[e.FREEZE_TIME=2109]="FREEZE_TIME",e[e.FREEZE_TIME_RENDER=2147]="FREEZE_TIME_RENDER",e[e.FREEZE_DURATION=2156]="FREEZE_DURATION",e}(Ku||{}),oz=function(e){return e[e.PCM_LEVEL=2104]="PCM_LEVEL",e}(oz||{}),Fl=function(e){return e[e.PACKAGE_LOST=-1]="PACKAGE_LOST",e[e.LEVEL=2038]="LEVEL",e[e.BITRATE=2039]="BITRATE",e[e.PACKAGE_RATE=2040]="PACKAGE_RATE",e[e.AEC_RETURN_LOSS=2041]="AEC_RETURN_LOSS",e[e.AEC_RETURN_LOSS_ENH=2042]="AEC_RETURN_LOSS_ENH",e[e.FREEZE=2081]="FREEZE",e[e.DISABLED=2096]="DISABLED",e}(Fl||{}),Ga=function(e){return e[e.BITRATE=2044]="BITRATE",e[e.PACKAGE_LOST=2045]="PACKAGE_LOST",e[e.PACKAGE_RATE=2046]="PACKAGE_RATE",e[e.CURRENT_DELAY=2047]="CURRENT_DELAY",e[e.JITTER_BUFFER=2054]="JITTER_BUFFER",e[e.JITTER=2055]="JITTER",e[e.FREEZE=2083]="FREEZE",e[e.DISABLED=2102]="DISABLED",e[e.PCM_LEVEL=2105]="PCM_LEVEL",e[e.PLAYER_STATUS=2130]="PLAYER_STATUS",e[e.CONCEALED_SAMPLES=2148]="CONCEALED_SAMPLES",e}(Ga||{}),az=function(e){return e[e.FREEZE_TIME=-1]="FREEZE_TIME",e[e.LEVEL=2043]="LEVEL",e}(az||{}),fa=function(e){return e[e.RTT=2006]="RTT",e[e.CONN_TYPE=801]="CONN_TYPE",e}(fa||{});const jc=1e3,$u=3;function ut(e,t,n){n!=null&&Number.isFinite(n)&&(e[t]=Math.round(Math.max(0,n)))}function NU(e){const t={[fa.CONN_TYPE]:0,[fa.RTT]:e.rtt};switch(e.selectedCandidatePair.localCandidate.candidateType){case"relay":{const n=e.selectedCandidatePair.localCandidate.relayProtocol;n==="udp"&&(t[fa.CONN_TYPE]=1),n==="tcp"&&(t[fa.CONN_TYPE]=3),n==="tls"&&(t[fa.CONN_TYPE]=4);break}case"srflx":t[fa.CONN_TYPE]=2}return t}function PU(e){let t=0;switch(e){case"none":t=0;break;case"cpu":t=1;break;case"bandwidth":t=2;break;case"other":t=3}return t}class sz extends Pn{constructor(t){super(),P(this,"store",void 0),P(this,"uploadWRTCStatsTimer",void 0),P(this,"uploadOutboundDenoiserStatsTimer",void 0),P(this,"uploadExtStatsTimer",void 0),P(this,"uploadExtUsageStatsTimer",void 0),P(this,"uploadInboundExtStatsTimer",void 0),P(this,"requestStats",void 0),P(this,"requestTransportStats",void 0),P(this,"requestLocalMedia",void 0),P(this,"requestRemoteMedia",void 0),P(this,"requestAllTracks",void 0),P(this,"requestVideoIsReady",void 0),P(this,"requestUploadStats",void 0),P(this,"requestUpload",void 0),P(this,"uploadOutboundStarted",!1),P(this,"uploadInboundStarted",!1),P(this,"uploadTransportStarted",!1),P(this,"uploadExtensionUsageStarted",!1),P(this,"lastRecvStats",void 0),P(this,"lastSendStats",void 0),P(this,"lastFullRecvStats",void 0),P(this,"lastFullSendStats",void 0),P(this,"needUploadRenderFreezeTime",!0),this.store=t}uploadWRTCStats(t){if(!this.requestStats||!this.requestUploadStats)return;let n,r;if(this.uploadTransportStarted&&(n=this.requestStats(),this.store.useP2P&&(r=this.requestStats(!0))),!n&&this.uploadOutboundStarted&&(n=this.requestStats()),!r&&this.uploadInboundStarted&&(r=this.requestStats(!0)),n||r){const i={};if(this.uploadTransportStarted&&n){const o=this.getTransportStats(n,r,t);o&&(i.misc=[o])}if(this.uploadOutboundStarted&&n){const o=this.getOutboundStats(n,t?this.lastSendStats:this.lastFullSendStats,t);o&&(i.outbound=[o])}if(this.uploadInboundStarted&&r){const o=this.getInboundStats(r,t?this.lastRecvStats:this.lastFullRecvStats,t);o&&(i.inbound=o)}this.requestUploadStats(i)}this.lastRecvStats=r,this.lastSendStats=n,t||(this.lastFullRecvStats=r,this.lastFullSendStats=n)}startUploadWRTCStats(){if(this.uploadWRTCStatsTimer)return;let t=1;this.uploadWRTCStatsTimer=window.setInterval(()=>{if(!this.uploadTransportStarted&&!this.uploadInboundStarted&&!this.uploadOutboundStarted)return this.stopUploadWRTCStats();this.uploadWRTCStats(t!==$u),++t===$u+1&&(t=1)},jc)}stopUploadWRTCStats(){window.clearInterval(this.uploadWRTCStatsTimer),this.uploadWRTCStatsTimer=void 0,this.lastSendStats&&(this.lastSendStats.videoSend=[],this.lastSendStats.audioSend=[],this.lastSendStats=void 0),this.lastRecvStats&&(this.lastRecvStats.videoRecv=[],this.lastRecvStats.audioRecv=[],this.lastRecvStats=void 0)}getTransportStats(t,n,r){if(!this.requestStats)return;if(r)return t.rtt==null?void 0:{addition:{[fa.RTT]:t.rtt,[fa.CONN_TYPE]:void 0}};const i=NU(t);if(this.store.useP2P){if(n){const o=NU(n);i[fa.CONN_TYPE]+=o[fa.CONN_TYPE]<<3}i[fa.CONN_TYPE]+=110}else i[fa.CONN_TYPE]+=100;return{addition:i}}getOutboundStats(t,n,r){if(!this.requestUploadStats||!this.requestLocalMedia)return;const i=this.requestLocalMedia();if(!i||i.length===0)return;let o,a,s;return i.forEach(c=>{let[l,{track:u,ssrcs:d}]=c;switch(l){case se.LocalVideoLowTrack:case se.LocalVideoTrack:if(l===se.LocalVideoTrack){const h=function(p,m,_,E,S){const C=m.videoSend.find(x=>x.ssrc===p);if(!C)return;const b={},{sentFrame:T,inputFrame:R}=C;if(R&&T){const x=R.frameRate,M=T.frameRate;b[vr.FREEZE]=function($,U){let V=!0;return V=!($<=5)&&($<=10?U<3:$<=20?U<4:U<5),V}(x,M)?1:0}if(ut(b,vr.QP_SUM,C.qpSumPerFrame),S)return b;switch(T&&(ut(b,vr.HEIGHT,T.height),ut(b,vr.WIDTH,T.width),ut(b,vr.FRAME_RATE,T.frameRate)),b[vr.DISABLED]=E._originMediaStreamTrack&&!E._originMediaStreamTrack.enabled||E._mediaStreamTrack&&!E._mediaStreamTrack.enabled?1:0,C.adaptionChangeReason){case"none":b[vr.ADAPTATION]=0;break;case"cpu":b[vr.ADAPTATION]=1;break;case"bandwidth":b[vr.ADAPTATION]=2;break;case"other":b[vr.ADAPTATION]=3}let A=0;C.adaptionChangeReason&&(A+=PU(C.adaptionChangeReason)),m.qualityLimitationReason&&(A+=PU(m.qualityLimitationReason)<<3),b[vr.ADAPTATION]=A,b[vr.PLAYER_STATUS]=pT[E._player?E._player.videoElementStatus:"uninit"],ut(b,vr.NACKS,C.nacksCount),ut(b,vr.PLIS,C.plisCount),ut(b,vr.FIRS,C.firsCount),ut(b,vr.AVG_ENCODE,C.avgEncodeMs);const O=_&&_.videoSend.find(x=>x.ssrc===p);if(O){let x=S?jc:jc*$u;O.timestamp&&C.timestamp&&(x=C.timestamp-O.timestamp),O.packets!=null&&C.packets!=null&&ut(b,vr.PACKAGE_RATE,1e3*(C.packets-O.packets)/x),C.packetsLost!=null&&O.packetsLost!=null&&ut(b,vr.PACKAGE_LOST,C.packetsLost-O.packetsLost),O.bytes!=null&&C.bytes!=null&&ut(b,vr.BITRATE,8*(C.bytes-O.bytes)/x)}return b}(d[0].ssrcId,t,n,u,r),f=r?null:function(p,m,_){const E=m.videoSend.find(A=>A.ssrc===p);if(!E)return null;const S={},C=E.inputFrame,b=C&&C.height||_&&_.videoHeight||0,T=C&&C.width||_&&_.videoWidth||0,R=C&&C.frameRate||0;return ut(S,p_.HEIGHT,b),ut(S,p_.WIDTH,T),ut(S,p_.FRAME_RATE,R),S}(d[0].ssrcId,t,u),g=r?null:function(p){const m={};return ut(m,vr.RETRANSMIT,p.bitrate.retransmit),ut(m,vr.TARGET_ENCODED,p.bitrate.targetEncoded),ut(m,vr.ACTUAL_ENCODED,p.bitrate.actualEncoded),ut(m,vr.TRANSMIT,p.bitrate.transmit),ut(m,vr.BANDWIDTH,p.sendBandwidth),m}(t);a=Object.assign({},h,f,g)}else s=r?void 0:function(h,f,g){const p=f.videoSend.find(E=>E.ssrc===h);if(!p)return;const m={},_=p.sentFrame;if(_&&(ut(m,Gu.HEIGHT,_.height),ut(m,Gu.WIDTH,_.width),ut(m,Gu.FRAME_RATE,_.frameRate)),g){const E=g.videoSend.find(S=>S.ssrc===h);if(E){let S=jc*$u;E.timestamp&&p.timestamp&&(S=p.timestamp-E.timestamp),E.packets!=null&&p.packets!=null&&ut(m,Gu.PACKAGE_RATE,1e3*(p.packets-E.packets)/S),p.packetsLost!=null&&E.packetsLost!=null&&ut(m,Gu.PACKAGE_LOST,p.packetsLost-E.packetsLost),E.bytes!=null&&p.bytes!=null&&ut(m,Gu.BITRATE,8*(p.bytes-E.bytes)/S)}}return m}(d[0].ssrcId,t,n);break;case se.LocalAudioTrack:o=r?void 0:function(h,f,g,p){const m=f.audioSend.find(b=>b.ssrc===h);if(!m)return;const _={};_[Fl.DISABLED]=p._originMediaStreamTrack&&!p._originMediaStreamTrack.enabled||p._mediaStreamTrack&&!p._mediaStreamTrack.enabled?1:0;const E=100*p._source.getAccurateVolumeLevel(),S=m.inputLevel;if(S!=null){const b=Math.ceil(50*Math.log10(100*S+1));ut(_,Fl.LEVEL,b)}ut(_,oz.PCM_LEVEL,E),ut(_,Fl.AEC_RETURN_LOSS,m.aecReturnLoss),ut(_,Fl.AEC_RETURN_LOSS_ENH,m.aecReturnLossEnhancement),_[Fl.FREEZE]=0;const C=g&&g.audioSend.find(b=>b.ssrc===h);if(C){let b=jc*$u;C.timestamp&&m.timestamp&&(b=m.timestamp-C.timestamp),C.bytes!=null&&m.bytes!=null&&ut(_,Fl.BITRATE,8*(m.bytes-C.bytes)/b),C.packets!=null&&m.packets!=null&&ut(_,Fl.PACKAGE_RATE,1e3*(m.packets-C.packets)/b)}return _}(d[0].ssrcId,t,n,u)}}),{high:a,low:s,audio:o}}getInboundStats(t,n,r){if(!this.requestRemoteMedia)return;const i=this.requestRemoteMedia()||[],o=[];return i.forEach(a=>{let[s,c]=a;const l={peer:s.uid};if(c.has(De.VIDEO)&&s.videoTrack){const u=s._videoSSRC&&this.requestVideoIsReady&&this.requestVideoIsReady(s._videoSSRC)||!1,d=s.videoTrack?function(h,f,g,p,m,_,E){var S;const C=f.videoRecv.find(M=>M.ssrc===h);if(!C)return;const b={},{receivedFrame:T,outputFrame:R,decodeFrameRate:A}=C,O=g&&g.videoRecv.find(M=>M.ssrc===h);if(b[li.FREEZE]=m&&N0.isRemoteVideoFreeze(p,C,O)?1:0,ut(b,Ku.FRAME_RATE_DECODE,A),ut(b,li.QP_SUM,C.qpSumPerFrame),C.framesRateFirefox&&ut(b,li.FRAME_RATE,C.framesRateFirefox),T&&ut(b,li.FRAME_RATE,T.frameRate),O){const M=f.timestamp-g.timestamp||(E?jc:$u*jc);C.packetsLost!=null&&O.packetsLost!=null&&ut(b,li.PACKAGE_LOST,C.packetsLost-O.packetsLost),O.bytes!=null&&C.bytes!=null&&ut(b,li.BITRATE,8*(C.bytes-O.bytes)/M),O.packets!=null&&C.packets!=null&&ut(b,li.PACKAGE_RATE,1e3*(C.packets-O.packets)/M)}if(E)return b;T?(ut(b,li.HEIGHT,T.height),ut(b,li.WIDTH,T.width)):p&&(ut(b,li.HEIGHT,p._videoHeight||0),ut(b,li.WIDTH,p._videoWidth||0)),R&&ut(b,Ku.FRAME_RATE_OUTPUT,R.frameRate);const x=(S=p._player)===null||S===void 0?void 0:S.rendFrameRate.toFixed(0);if(x&&ut(b,Ku.FRAME_RATE_RENDER,+x),ut(b,li.JITTER_BUFFER,C.jitterBufferMs),ut(b,li.CURRENT_DELAY,C.currentDelayMs),ut(b,li.FIRS,C.firsCount),ut(b,li.NACKS,C.nacksCount),ut(b,li.PLIS,C.plisCount),p){b[li.DISABLED]=p._originMediaStreamTrack.enabled&&p._mediaStreamTrack.enabled?0:1;const M=p._player;if(M){const{freezeTimeCounterList:$,renderFreezeAccTime:U,videoElementStatus:V}=M;if($&&$.length>0&&ut(b,Ku.FREEZE_TIME,$.splice(0,1)[0]),_&&qc.visibility==="visible"&&V===_i.PLAYING&&It().supportRequestVideoFrameCallback){const W=Math.min(6e3,U);M.renderFreezeAccTime=Math.max(0,U-W),ut(b,Ku.FREEZE_TIME_RENDER,W)}if(typeof C.totalFreezesDuration=="number"){const W=O&&O.totalFreezesDuration?C.totalFreezesDuration-O.totalFreezesDuration:C.totalFreezesDuration;ut(b,Ku.FREEZE_DURATION,1e3*W)}}}if(b[li.PLAYER_STATUS]=pT[p._player?p._player.videoElementStatus:"uninit"],O&&C.totalInterFrameDelay!==void 0&&C.totalSquaredInterFrameDelay!==void 0&&O.totalInterFrameDelay!==void 0&&O.totalSquaredInterFrameDelay!==void 0){const M=C.totalInterFrameDelay-O.totalInterFrameDelay,$=C.totalSquaredInterFrameDelay-O.totalSquaredInterFrameDelay,U=C.framesDecodeCount-O.framesDecodeCount,V=M/U*1e3,W=Math.round(1e3*Math.sqrt(($-Math.pow(M,2)/U)/U));!isNaN(W)&&V+W>Math.max(3*V,V+150)&&(b[li.I_FRAME_DELAY]=W)}return b}(s._videoSSRC,t,n,s.videoTrack,u===!0,this.needUploadRenderFreezeTime,r):void 0;d&&(l.video=d)}if(c.has(De.AUDIO)&&s.audioTrack){const u=s.audioTrack?function(d,h,f,g,p){const m=h.audioRecv.find(O=>O.ssrc===d);if(!m)return;const _={},E=f&&f.audioRecv.find(O=>O.ssrc===d),{receivedFrames:S,droppedFrames:C}=m;var b,T;if(ut(_,Ga.JITTER,m.jitterMs),S!=null&&C!=null&&(_[Ga.FREEZE]=(T=C,(b=S)===0||100*T/b>20?1:0)),E){const O=h.timestamp-f.timestamp||(p?jc:jc*$u);m.packets!=null&&E.packets!=null&&ut(_,Ga.PACKAGE_RATE,1e3*(m.packets-E.packets)/O),E.bytes!=null&&m.bytes!=null&&ut(_,Ga.BITRATE,8*(m.bytes-E.bytes)/O),m.packetsLost!=null&&E.packetsLost!=null&&ut(_,Ga.PACKAGE_LOST,m.packetsLost-E.packetsLost)}if(p)return _;const R=100*g._source.getAccurateVolumeLevel(),A=m.outputLevel;if(A!=null){const O=Math.ceil(50*Math.log10(100*A+1));ut(_,az.LEVEL,O)}if(ut(_,Ga.PCM_LEVEL,R),g&&(_[Ga.DISABLED]=g._originMediaStreamTrack.enabled&&g._mediaStreamTrack.enabled?0:1),ut(_,Ga.JITTER_BUFFER,m.jitterBufferMs),ut(_,Ga.CURRENT_DELAY,m.jitterBufferMs),_[Ga.PLAYER_STATUS]=pT[Xi.getPlayerState(g.getTrackId())],E){const O=m.concealedSamples-E.concealedSamples;O>0&&ut(_,Ga.CONCEALED_SAMPLES,O)}return _}(s._audioSSRC,t,n,s.audioTrack,r):void 0;u&&(l.audio=u)}(l.video||l.audio)&&o.push(l)}),this.needUploadRenderFreezeTime=!this.needUploadRenderFreezeTime,o}startUploadTransportStats(){this.uploadTransportStarted=!0,this.uploadWRTCStatsTimer||this.startUploadWRTCStats()}stopUploadTransportStats(){this.uploadTransportStarted=!1}startUploadOutboundStats(){this.uploadOutboundStarted||(this.uploadOutboundStarted=!0,this.uploadWRTCStatsTimer||this.startUploadWRTCStats(),this.uploadOutboundDenoiserStatsTimer&&window.clearInterval(this.uploadOutboundDenoiserStatsTimer),this.uploadOutboundDenoiserStatsTimer=window.setInterval(()=>{if(!this.requestAllTracks||!this.requestUpload)return;const t=(this.requestAllTracks()||[]).find(n=>n instanceof aS);if(t&&t._external.getDenoiserStats){const n=t._external.getDenoiserStats();n&&this.requestUpload(b0.DENOISER_STATS,n)}},2e3),this.uploadExtStatsTimer&&window.clearInterval(this.uploadExtStatsTimer),this.uploadExtStatsTimer=window.setInterval(()=>{!this.requestAllTracks||!this.requestUpload||this.requestAllTracks().forEach(t=>{t.getProcessorStats().forEach(n=>{this.requestUpload&&this.requestUpload(n.type,n.stats)})})},2e3))}stopUploadOutboundStats(){this.uploadOutboundStarted&&(this.uploadOutboundStarted=!1,this.lastSendStats&&(this.lastSendStats.videoSend=[],this.lastSendStats.audioSend=[],this.lastSendStats=void 0),this.uploadOutboundDenoiserStatsTimer&&window.clearInterval(this.uploadOutboundDenoiserStatsTimer),this.uploadOutboundDenoiserStatsTimer=void 0)}startUploadInboundStats(){this.uploadInboundStarted||(this.uploadInboundStarted=!0,this.uploadWRTCStatsTimer||this.startUploadWRTCStats(),this.uploadInboundExtStatsTimer&&window.clearInterval(this.uploadInboundExtStatsTimer),this.uploadInboundExtStatsTimer=window.setInterval(()=>{!this.requestUpload||!this.requestRemoteMedia||(this.requestRemoteMedia()||[]).forEach(t=>{let[n,r]=t;r.has(De.VIDEO)&&n.videoTrack&&n.videoTrack.getProcessorStats().forEach(i=>{this.requestUpload&&this.requestUpload(i.type,i.stats)}),r.has(De.AUDIO)&&n.audioTrack&&n.audioTrack.getProcessorStats().forEach(i=>{this.requestUpload&&this.requestUpload(i.type,i.stats)})})},2e3))}stopUploadInboundStats(){this.uploadInboundStarted&&(this.uploadInboundStarted=!1,this.lastRecvStats&&(this.lastRecvStats.videoRecv=[],this.lastRecvStats.audioRecv=[],this.lastRecvStats=void 0))}startUploadExtensionUsageStats(){if(this.uploadExtensionUsageStarted)return;this.uploadExtensionUsageStarted=!0,this.uploadExtUsageStatsTimer&&window.clearInterval(this.uploadExtUsageStatsTimer);const t=new Map;this.uploadExtUsageStatsTimer=window.setInterval(async()=>{const n=Date.now(),r={connectionInterval:H("EXTENSION_USAGE_UPLOAD_INTERVAL")/1e3,details:[],lts:n};let i=[];const o=this.requestAllTracks&&this.requestAllTracks()||[];for(const l of o)!l.muted&&l.enabled&&(i=i.concat(await l.getProcessorUsage()));const a=this.requestRemoteMedia&&this.requestRemoteMedia()||[];for(const[l,u]of a)u.has(De.VIDEO)&&l.videoTrack&&(i=i.concat(await l.videoTrack.getProcessorUsage())),u.has(De.AUDIO)&&l.audioTrack&&(i=i.concat(await l.audioTrack.getProcessorUsage()));if(i.length===0)return;r.details=function(l,u){const d={};for(const{id:p,value:m,level:_,direction:E}of l){var h;const S=(h=u.get(p))!==null&&h!==void 0?h:0,C=m===2?S+H("EXTENSION_USAGE_UPLOAD_INTERVAL")/1e3:S;var f,g;u.set(p,C),d[p]?(m===2&&(d[p].value=m),_>d[p].level&&(d[p].level=_),E==="remote"&&(d[p].remoteUidCount+=1),d[p].totalTs=(f=u.get(p))!==null&&f!==void 0?f:0):d[p]={value:m,level:_,remoteUidCount:E==="local"?0:1,totalTs:(g=u.get(p))!==null&&g!==void 0?g:0}}return Object.keys(d).map(p=>{const{level:m,value:_,totalTs:E}=d[p];return{id:p,level:m,value:_,totalTs:E}})}(i,t);const s=Date.now(),c=s>n?s:n+1;this.requestUpload&&this.requestUpload(b0.EXTENSION_USAGE_STATS,{usageStats:r,sendTs:c})},H("EXTENSION_USAGE_UPLOAD_INTERVAL"))}stopUploadExtensionUsageStats(){this.uploadExtensionUsageStarted&&(this.uploadExtensionUsageStarted=!1,this.uploadExtUsageStatsTimer&&window.clearInterval(this.uploadExtUsageStatsTimer),this.uploadExtUsageStatsTimer=void 0)}}class Hl{get hasVideo(){return this._video_enabled_&&!this._video_muted_&&this._video_added_}get hasAudio(){return this._audio_enabled_&&!this._audio_muted_&&this._audio_added_}get audioTrack(){if(this.hasAudio||this._audio_pre_subscribed)return this._audioTrack}get videoTrack(){if(this.hasVideo||this._video_pre_subscribed)return this._videoTrack}get dataChannels(){return this._dataChannels}constructor(t,n){P(this,"uid",void 0),P(this,"_uintid",void 0),P(this,"_trust_in_room_",!0),P(this,"_trust_audio_enabled_state_",!0),P(this,"_trust_video_enabled_state_",!0),P(this,"_trust_audio_mute_state_",!0),P(this,"_trust_video_mute_state_",!0),P(this,"_audio_muted_",!1),P(this,"_video_muted_",!1),P(this,"_audio_enabled_",!0),P(this,"_video_enabled_",!0),P(this,"_audio_added_",!1),P(this,"_video_added_",!1),P(this,"_is_pre_created",!1),P(this,"_video_pre_subscribed",!1),P(this,"_audio_pre_subscribed",!1),P(this,"_trust_video_stream_added_state_",!0),P(this,"_trust_audio_stream_added_state_",!0),P(this,"_audioTrack",void 0),P(this,"_videoTrack",void 0),P(this,"_dataChannels",[]),P(this,"_audioSSRC",void 0),P(this,"_videoSSRC",void 0),P(this,"_audioOrtc",void 0),P(this,"_videoOrtc",void 0),P(this,"_cname",void 0),P(this,"_rtxSsrcId",void 0),P(this,"_videoMid",void 0),P(this,"_audioMid",void 0),this.uid=t,this._uintid=n}}let Rs=function(e){return e.SEND_ONLY="SEND_ONLY",e.RECEIVE_ONLY="RECEIVE_ONLY",e}({});function zfe(e,t){var n;let r;switch(t){case se.LocalAudioTrack:r=Gt.Audio;break;case se.LocalVideoTrack:r=Ce(n=e._hints).call(n,gn.SCREEN_TRACK)?Gt.Screen:Gt.High;break;case se.LocalVideoLowTrack:r=Gt.Low}return r}function sA(e){const t=It();if(e.some(n=>n._bypassWebAudio))throw new Q(k.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");if(!t.webAudioMediaStreamDest)throw new Q(k.NOT_SUPPORTED,"cannot publish multiple tracks because your browser does not support audio mixing")}function RT(e,t){sA(e);const n=t||new Sr;return e.forEach(r=>n.addAudioTrack(r)),n}var DU,LU,kU,MU,FU,UU,BU,$U,VU,jU,HU,yn;function zU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function zv(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?zU(Object(n),!0).forEach(function(r){P(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zU(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}let To=(DU=_s(Rs.SEND_ONLY),LU=_s(Rs.SEND_ONLY),kU=_s(),MU=_s(Rs.RECEIVE_ONLY),FU=_s(Rs.RECEIVE_ONLY),UU=_s(Rs.RECEIVE_ONLY),BU=_s(Rs.RECEIVE_ONLY),$U=_s(Rs.RECEIVE_ONLY),VU=_s(Rs.RECEIVE_ONLY),jU=_s(),HU=_s(Rs.RECEIVE_ONLY),yn=class extends Pn{get state(){return this._state}set state(e){const t=this._state;this._state=e,this.emit(He.StateChange,t,this._state)}constructor(e,t){super(),P(this,"isPlanB",!1),P(this,"store",void 0),P(this,"statsUploader",void 0),P(this,"sendConnection",void 0),P(this,"recvConnection",void 0),P(this,"localTrackMap",new Map),P(this,"remoteUserMap",new Map),P(this,"localDataChannels",[]),P(this,"pendingLocalTracks",[]),P(this,"pendingRemoteTracks",[]),P(this,"statsCollector",void 0),P(this,"dtlsFailedCount",0),P(this,"sendMutex",new ri("P2PChannel2-send-mutex")),P(this,"recvMutex",new ri("P2PChannel2-recv-mutex")),P(this,"_state",Wt.Disconnected),P(this,"_restartStates",["disconnected","failed"]),P(this,"reconnectInterval",void 0),P(this,"uploadUnplinkStarted",!1),P(this,"uploadDownlinkStarted",!1),P(this,"uplinkStateUploadInterval",void 0),P(this,"downlinkStatsUploadInterval",void 0),P(this,"handleMuteLocalTrack",async(n,r,i)=>{const o=await this.sendMutex.lock("Locking from P2PChannel2.handleMuteLocalTrack");try{if(!this.sendConnection||this.state!==Wt.Connected)return void i(new Q(k.INVALID_OPERATION,"Cannot call P2PChannel2.handleMuteLocalTrack before sendConnection established."));const c=this.filterTobeMutedTracks(n);if(c.length===0)return void r();const l=c.find(f=>f[0]==="videoLowTrack");l&&l[1].track._originMediaStreamTrack.stop(),await this.sendConnection.muteLocal(c.map(f=>{let[,{id:g}]=f;return g}));let u=!1;var a,s;n.trackMediaType==="video"?u=!((a=this.localTrackMap.get(se.LocalAudioTrack))===null||a===void 0||!a.track._muted):u=((s=this.localTrackMap.get(se.LocalVideoTrack))===null||s===void 0?void 0:s.id)===void 0;const d=this.createMuteMessage(c);await rn(this,He.RequestMuteLocal,d);const h=n.trackMediaType==="video"?Yl.MUTE_LOCAL_VIDEO:Yl.MUTE_LOCAL_AUDIO;await rn(this,He.RequestP2PMuteLocal,{action:h,message:d,isMuteAll:u}),r()}catch(c){i(c)}finally{o()}}),P(this,"handleUnmuteLocalTrack",async(n,r,i)=>{const o=await this.sendMutex.lock("Locking from P2PChannel2.handleUnmuteLocalTrack");try{if(!this.sendConnection||this.state!==Wt.Connected)return void i(new Q(k.INVALID_OPERATION,"Cannot call P2PChannel2.handleUnmuteLocalTrack before sendConnection established."));const a=this.filterTobeUnmutedTracks(n);if(a.length===0)return void r();await this.sendConnection.unmuteLocal(a.map(l=>{let[,{id:u}]=l;return u}));const s=this.createUnmuteMessage(a),c=n.trackMediaType==="video"?Yl.UNMUTE_LOCAL_VIDEO:Yl.UNMUTE_LOCAL_AUDIO;await rn(this,He.RequestP2PMuteLocal,{action:c,message:s}),r()}catch(a){i(a)}finally{o()}}),P(this,"handleUpdateVideoEncoder",async(n,r,i)=>{const o=await this.sendMutex.lock("Locking from P2PChannel2.handleSetVideoEncoder");try{const a=this.localTrackMap.get(se.LocalVideoTrack);if(!this.sendConnection||!a||a.track!==n||this.state!==Wt.Connected)return void r();const{id:s,track:c}=a;s&&(await this.sendConnection.updateSendParameters(s,c),await this.sendConnection.updateEncoderConfig(s,c),this.emit(He.UpdateVideoEncoder,c)),r()}catch(a){i(a)}finally{o()}}),P(this,"handleUpdateVideoSendParameters",async(n,r,i)=>{const o=await this.sendMutex.lock("Locking from P2PChannel2.handleUpdateVideoSendParameters");try{const a=this.localTrackMap.get(se.LocalVideoTrack);if(!this.sendConnection||!a||a.track!==n||this.state!==Wt.Connected)return void r();const{id:s,track:c}=a;s&&await this.sendConnection.updateSendParameters(s,c),r()}catch(a){i(a)}finally{o()}}),P(this,"handleReplaceTrack",async(n,r,i,o)=>{let a;w.debug("[".concat(this.store.clientId,"] P2PChannel2 handleReplaceTrack for [track-id-").concat(n.getTrackId(),"]")),typeof o=="boolean"&&o||(a=await this.sendMutex.lock("From P2PChannel2.handleReplaceTrack"));try{var s;const l=Array.from(this.localTrackMap.entries()).find(u=>{let[,{track:d}]=u;return n===d});if(!this.sendConnection||!l||l[1].id===void 0||this.state!==Wt.Connected)return void r();if(await((s=this.sendConnection)===null||s===void 0?void 0:s.replaceTrack(n,l[1].id)),l[0]===se.LocalVideoTrack&&It().supportDualStreamEncoding){const u=this.localTrackMap.get(se.LocalVideoLowTrack);if(u){const d=n._mediaStreamTrack.clone();u.track._originMediaStreamTrack.stop(),u.track._mediaStreamTrack=d,u.track._originMediaStreamTrack=d,await new _e((h,f)=>{this.handleReplaceTrack(u.track,h,f,!0)})}}r()}catch(l){i(l)}finally{var c;(c=a)===null||c===void 0||c()}}),P(this,"handleGetLocalVideoStats",n=>{n(this.statsCollector.getLocalVideoTrackStats())}),P(this,"handleGetLocalAudioStats",n=>{n(this.statsCollector.getLocalAudioTrackStats())}),P(this,"handleGetRemoteVideoStats",n=>this.statsCollector.getRemoteVideoTrackStats(n.uid)[n.uid]),P(this,"handleGetRemoteAudioStats",n=>this.statsCollector.getRemoteAudioTrackStats(n.uid)[n.uid]),this.store=e,this.statsCollector=t,this.statsCollector.addP2PChannel(this),this.statsUploader=new sz(e),this.bindStatsUploaderEvents(),this.reconnectInterval=window.setInterval(()=>{[this.sendConnection,this.recvConnection].forEach(n=>{n&&(n.iceConnectionState!=="disconnected"&&n.iceConnectionState!=="failed"||this.handleDisconnect(n.direction))})},H("ICE_RESTART_INTERVAL"))}async startP2PConnection(e,t){throw new Q(k.NOT_SUPPORTED,"p2p mode does not support startP2PConnection.")}async connect(e){throw new Q(k.NOT_SUPPORTED,"p2p mode does not support connect.")}async startP2P(e,t){let n;try{if(t){this.recvConnection&&(w.warning("[".concat(this.store.clientId,"] P2PChannel.startP2P reset recvConnection.")),this.recvConnection.close(),this.unbindConnectionEvents(this.recvConnection)),n=await this.recvMutex.lock("From P2PChannel.startP2P"),this.recvConnection=new xU(e,this.store,Ni.RECEIVE_ONLY),this.bindConnectionEvents(this.recvConnection);const r=await this.recvConnection.establish(t);return{iceParameters:r.iceParameters,dtlsParameters:r.dtlsParameters,sdp:r.sdp}}{this.state=Wt.New,this.sendConnection&&(w.warning("[".concat(this.store.clientId,"] P2PChannel.startP2P reset sendConnection.")),this.sendConnection.close(),this.unbindConnectionEvents(this.sendConnection)),n=await this.sendMutex.lock("From P2PChannel.startP2P"),this.sendConnection=new xU(e,this.store),this.store.peerConnectionStart(),this.bindConnectionEvents(this.sendConnection);const r=await this.sendConnection.establish();return{iceParameters:r.iceParameters,dtlsParameters:r.dtlsParameters,sdp:r.sdp}}}finally{n&&n()}}async p2pConnect(e){if(!this.sendConnection)throw new Q(k.UNEXPECTED_ERROR,"Cannot P2PChannel2.p2pConnect before P2PChannel2.startP2PConnection .");this.store.peerConnectionStart(),await this.sendConnection.connect(e),this.statsUploader.startUploadTransportStats(),this.statsUploader.startUploadExtensionUsageStats(),this.state=Wt.Connected}async addRemoteCandidate(e,t){if(t===Ni.RECEIVE_ONLY){if(!this.sendConnection)throw new Q(k.UNEXPECTED_ERROR,"Cannot P2PChannel2.connect before P2PChannel2.addRemoteCandidate .");await this.sendConnection.addRemoteCandidate(e)}else{if(!this.recvConnection)throw new Q(k.UNEXPECTED_ERROR,"Cannot P2PChannel2.connect before P2PChannel2.addRemoteCandidate .");await this.recvConnection.addRemoteCandidate(e)}}publish(e,t,n){var r=this;return Ms(function*(){const i=yield Dt(r.sendMutex.lock("From P2PChannel.publish"));try{if(!r.sendConnection||r.state!==Wt.Connected){r.throwIfTrackTypeNotMatch(e);const l=e.filter(u=>r.pendingLocalTracks.indexOf(u)===-1);return void(r.pendingLocalTracks=r.pendingLocalTracks.concat(l))}r.store.pubId=r.store.pubId+1,ni.markPublishStart(r.store.clientId,r.store.pubId);const o=r.filterTobePublishedTracks(e,t,n);if(o.length===0)return void(yield Dt(r.tryToUnmuteAudio(e)));o.forEach(l=>{let{track:u,type:d}=l;const h=Date.now();r.store.publish(u.getTrackId(),d===se.LocalAudioTrack?"audio":"video",h)}),r.bindLocalTrackEvents(o);const a=yield Dt(r.sendConnection.send(o.map(l=>{let{track:u}=l;return u}),r.store.codec,r.store.audioCodec)),s=(yield Dt(a.next())).value,c=r.createGatewayPublishMessage(o,s);try{yield c}catch(l){throw a.throw(l),(l==null?void 0:l.code)===k.WS_ABORT&&o.forEach(u=>{let{track:d}=u;r.pendingLocalTracks.indexOf(d)===-1&&r.pendingLocalTracks.push(d)}),r.unbindLocalTrackEvents(o),l}yield Dt(a.next()),o.forEach(l=>{let{type:u}=l;r.statsCollector.addLocalStats(u)}),r.statsUploader.startUploadOutboundStats(),r.assignLocalTracks(o,s),o.forEach(l=>{let{track:u,type:d}=l;const h=Date.now();r.store.publish(u.getTrackId(),d===se.LocalAudioTrack?"audio":"video",void 0,h)}),r.startUploadUplinkState()}finally{i()}})()}async unpublish(e){if(!this.sendConnection||this.state!==Wt.Connected)return void(e.length===0?this.pendingLocalTracks.length=0:this.pendingLocalTracks=this.pendingLocalTracks.filter(i=>!Ce(e).call(e,i)));const t=this.filterTobeUnpublishedTracks(e);if(t.length===0)return;const n=t.find(i=>i[0]==="videoLowTrack");n&&n[1].track.close();const r=this.createGatewayUnpublishMessage(t);if(await this.sendConnection.stopSending(t.map(i=>{let[,{id:o}]=i;return o})),this.withdrawLocalTracks(t),this.unbindLocalTrackEvents(t.map(i=>{let[o,{track:a}]=i;return{type:o,track:a}})),t.forEach(i=>{let[o]=i;this.statsCollector.removeLocalStats(o)}),this.localTrackMap.size===0&&(this.statsUploader.stopUploadOutboundStats(),this.stopUploadUplinkState()),this.sendConnection&&this.state===Wt.Connected)return n&&n[1].track.close(),r;e.forEach(i=>{const o=this.pendingLocalTracks.indexOf(i);o!==-1&&this.pendingLocalTracks.splice(o,1)})}startUploadUplinkState(){if(this.uploadUnplinkStarted)return;this.uploadUnplinkStarted=!0,this.uplinkStateUploadInterval&&window.clearInterval(this.uplinkStateUploadInterval);const e=()=>{const t=[],n=[];Array.from(this.localTrackMap.entries()).forEach(r=>{let[i,{track:o,ssrcs:a}]=r;const s={stream_type:zfe(o,i),ssrcs:a};o._muted||!o._enabled?t.push(s):n.push(s)}),t.length>0&&t.forEach(r=>{rn(this,He.RequestMuteLocal,[r])}),n.length>0&&n.forEach(r=>{rn(this,He.RequestUnmuteLocal,[r])})};e(),this.uplinkStateUploadInterval=window.setInterval(()=>{e()},3e3)}stopUploadUplinkState(){this.uploadUnplinkStarted&&(this.uploadUnplinkStarted=!1,this.uplinkStateUploadInterval&&window.clearInterval(this.uplinkStateUploadInterval))}publishLowStream(e){return Ms(function*(){throw new Q(k.NOT_SUPPORTED,"p2p mode does not support publishLowStream.")})()}async republish(){this.pendingLocalTracks.length>0&&(w.debug("[".concat(this.store.clientId,"] Emit P2PChannelEvents.RequestRePublish to republish tracks.")),await Kr(this,He.RequestRePublish,this.pendingLocalTracks),this.emit(He.MediaReconnectEnd,this.store.uid),this.pendingLocalTracks=[])}async unpublishLowStream(){throw new Q(k.NOT_SUPPORTED,"p2p mode does not support unpublishLowStream.")}async subscribe(e,t,n,r){var i;if(!this.recvConnection)throw new Q(k.INVALID_OPERATION,"Cannot subscribe remote user when recvConnection disconnected.");if((i=this.remoteUserMap.get(e))!==null&&i!==void 0&&i.has(t))return;const{track:o,mid:a,transceiver:s}=await this.recvConnection.receive(t,[{ssrcId:n}],String(e.uid),r);t===De.AUDIO?(e._audioTrack?e._audioTrack._updateOriginMediaStreamTrack(o):(e._audioTrack=new yf(o,e.uid,e._uintid,this.store),w.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote audio track: ").concat(e._audioTrack.getTrackId()))),s&&e._audioTrack._updateRtpTransceiver(s),this.bindRemoteTrackEvents(e,e._audioTrack)):(e._videoSSRC=n,e._videoTrack?e._videoTrack._updateOriginMediaStreamTrack(o):(e._videoTrack=new Sf(o,e.uid,e._uintid,this.store),w.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote video track: ").concat(e._videoTrack.getTrackId()))),s&&e._videoTrack._updateRtpTransceiver(s),this.bindRemoteTrackEvents(e,e._videoTrack));const c=this.remoteUserMap.get(e);c?c.set(t,a):this.remoteUserMap.set(e,new Map([[t,a]])),this.statsCollector.addRemoteStats(e.uid),this.statsUploader.startUploadInboundStats(),this.startUploadDownlinkState();const l=this.pendingRemoteTracks.findIndex(u=>{let{user:d,kind:h}=u;return d.uid===e.uid&&t===h});l!==-1&&(this.pendingRemoteTracks.splice(l,1),this.emit(He.MediaReconnectEnd,e.uid))}async mockSubscribe(e,t,n,r){if(!this.recvConnection)throw new Q(k.INVALID_OPERATION,"Cannot subscribe remote user when recvConnection disconnected.");await this.recvConnection.mockReceive(t,[{ssrcId:n}],String(e.uid),r)}async unsubscribe(e,t,n){const r=this.pendingRemoteTracks.filter(o=>{let{user:a,kind:s}=o;return t!==void 0?a.uid===e.uid&&t===s:a.uid===e.uid});if(r.forEach(o=>{const a=this.pendingRemoteTracks.indexOf(o);this.pendingRemoteTracks.splice(a,1)}),this.recvConnection||n||r.forEach(o=>{let{kind:a}=o;var s;if(a===De.AUDIO)(s=e._audioTrack)===null||s===void 0||s._destroy(),e._audioTrack=void 0;else if(a===De.VIDEO){var c;(c=e._videoTrack)===null||c===void 0||c._destroy(),e._videoTrack=void 0}}),!this.recvConnection)return;const i=this.filterTobeUnSubscribedTracks(e,t);i.length!==0&&(await this.recvConnection.stopReceiving(i.map(o=>{let[,{id:a}]=o;return a})),this.withdrawRemoteTracks(i),this.remoteUserMap.size===0&&(this.statsUploader.stopUploadInboundStats(),this.stopUploadDownlinkState()),i.forEach(o=>{let[a,{kind:s}]=o;var c,l;if(s===De.VIDEO&&a._videoSSRC&&((c=this.recvConnection)===null||c===void 0||c.setStatsRemoteVideoIsReady(a._videoSSRC,!1)),s===De.VIDEO)this.unbindRemoteTrackEvents(a._videoTrack),n||((l=a._videoTrack)===null||l===void 0||l._destroy(),a._videoTrack=void 0);else if(s===De.AUDIO){var u;this.unbindRemoteTrackEvents(a._audioTrack),!n&&((u=a._audioTrack)===null||u===void 0||u._destroy(),a._audioTrack=void 0)}}),i.forEach(o=>{let[,{kind:a}]=o;rn(this,He.RequestP2PMuteRemote,a)}))}startUploadDownlinkState(){if(this.uploadDownlinkStarted)return;this.uploadDownlinkStarted=!0,this.downlinkStatsUploadInterval&&window.clearInterval(this.downlinkStatsUploadInterval);const e=()=>Array.from(this.remoteUserMap.entries()).forEach(t=>{let[,n]=t;[De.VIDEO,De.AUDIO].forEach(r=>{n.has(r)?rn(this,He.RequestP2PUnmuteRemote,r):rn(this,He.RequestP2PMuteRemote,r)})});e(),this.downlinkStatsUploadInterval=window.setInterval(()=>{e()},3e3)}stopUploadDownlinkState(){this.uploadDownlinkStarted&&(this.uploadDownlinkStarted=!1,this.downlinkStatsUploadInterval&&window.clearInterval(this.downlinkStatsUploadInterval))}getAllDataChannels(){return this.localDataChannels}async massSubscribe(e){throw new Q(k.NOT_SUPPORTED,"p2p mode does not support massSubscribe.")}async massSubscribeNoLock(e){throw new Q(k.NOT_SUPPORTED,"p2p mode does not support massSubscribeNoLock.")}async massUnsubscribe(e){throw new Q(k.NOT_SUPPORTED,"p2p mode does not support massUnsubscribe.")}async massUnsubscribeNoLock(e){throw new Q(k.NOT_SUPPORTED,"p2p mode does not support massUnsubscribeNoLock.")}async muteRemote(e,t){if(!this.recvConnection)return;const n=this.remoteUserMap.get(e);if(!n)return void w.warning("[".concat(this.store.clientId,"] P2PChannel2.muteRemote has no remote user ").concat(e.uid,"."));if(!n.get(t))return void w.warning("[".concat(this.store.clientId,"] P2PChannel2.muteRemote has no remote user ").concat(e.uid," media type ").concat(t,"."));const r=t===De.VIDEO?e._videoSSRC:e._audioSSRC;r!==void 0&&this.recvConnection.setStatsRemoteVideoIsReady(r,!1)}async unmuteRemote(e,t){return this.unmuteRemoteNoLock(e,t)}async unmuteRemoteNoLock(e,t){if(!this.recvConnection)return;const n=this.remoteUserMap.get(e);if(!n)return void w.warning("[".concat(this.store.clientId,"] P2PChannel2.unmuteRemote has no remote user ").concat(e.uid,"."));n.get(t)||w.warning("[".concat(this.store.clientId,"] P2PChannel2.unmuteRemote has no remote user ").concat(e.uid," media type ").concat(t,"."))}getAllTracks(e){const t=this.localTrackMap.get(se.LocalAudioTrack);if((t==null?void 0:t.track)instanceof Sr){const n=t.track;return Array.from(this.localTrackMap.entries()).filter(r=>{let[i]=r;return i!==se.LocalAudioTrack}).filter(r=>{let[i]=r;return!(e&&i===se.LocalVideoLowTrack)}).map(r=>{let[,{track:i}]=r;return i}).concat(n.trackList)}return Array.from(this.localTrackMap.entries()).filter(n=>{let[r]=n;return!(e&&r===se.LocalVideoLowTrack)}).map(n=>{let[,{track:r}]=n;return r})}reportPublishEvent(e,t,n,r,i){if(e){const a=this.localTrackMap.get(se.LocalAudioTrack),s=r?this.localTrackMap.get(se.LocalVideoLowTrack):this.localTrackMap.get(se.LocalVideoTrack);Pe.publish(this.store.sessionId,{eventElapse:ni.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:e,ec:t,audioName:a==null?void 0:a.track.getTrackLabel(),videoName:s==null?void 0:s.track.getTrackLabel(),screenshare:(s==null?void 0:s.track._hints.indexOf(gn.SCREEN_TRACK))!==-1,audio:!!a,video:!!s,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:i})}else{var o;n||(n=[]);const a=n.find(c=>c instanceof Ln),s=r?(o=this.localTrackMap.get(se.LocalVideoTrack))===null||o===void 0?void 0:o.track:n.find(c=>c instanceof hn);Pe.publish(this.store.sessionId,{eventElapse:ni.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:e,ec:t,audioName:a==null?void 0:a.getTrackLabel(),videoName:s==null?void 0:s.getTrackLabel(),screenshare:(s==null?void 0:s._hints.indexOf(gn.SCREEN_TRACK))!==-1,audio:!!a,video:!!s,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:i})}}reportSubscribeEvent(e,t,n,r){const i=r===De.VIDEO?n._videoSSRC:n._audioSSRC;i&&Pe.subscribe(this.store.sessionId,{succ:e,ec:t,video:r===De.VIDEO,audio:r===De.AUDIO,peerid:n.uid,subscribeRequestid:r===De.VIDEO?n._videoSSRC:n._audioSSRC,p2pid:this.store.p2pId,eventElapse:ni.measureFromSubscribeStart(this.store.clientId,i)})}reset(){w.debug("[".concat(this.store.clientId,"] P2PChannel2.reset")),this.sendMutex=new ri("P2PChannel2-send-mutex"),this.sendMutex=new ri("P2PChannel2-recv-mutex"),this.sendConnection&&(this.sendConnection.close(),this.unbindConnectionEvents(this.sendConnection),this.sendConnection=void 0),this.recvConnection&&(this.recvConnection.close(),this.unbindConnectionEvents(this.recvConnection),this.recvConnection=void 0),this.statsUploader.stopUploadOutboundStats(),this.statsUploader.stopUploadInboundStats(),this.statsUploader.stopUploadTransportStats(),this.statsUploader.stopUploadExtensionUsageStats(),this.stopUploadUplinkState(),this.stopUploadDownlinkState(),this.unbindLocalTrackEvents(),this.unbindAllRemoteTrackEvents(),this.unbindRtpTransceiver();const e=this.localTrackMap.get(se.LocalAudioTrack);if((e==null?void 0:e.track)instanceof Sr){if(e.track.trackList.length>0){const t=e.track;e.track.trackList.forEach(n=>{t.removeAudioTrack(n)})}e.track.close()}this.localTrackMap.clear(),this.remoteUserMap.clear(),this.statsCollector.removeRemoteStats(),this.statsCollector.removeLocalStats(),this.dtlsFailedCount=0,this.pendingLocalTracks=[],this.pendingRemoteTracks=[],this.reconnectInterval&&(window.clearInterval(this.reconnectInterval),this.reconnectInterval=void 0),this.state=Wt.Disconnected}getStats(e){var t,n;return e?(n=this.recvConnection)===null||n===void 0?void 0:n.getStats():(t=this.sendConnection)===null||t===void 0?void 0:t.getStats()}getRemoteVideoIsReady(e){var t;return((t=this.recvConnection)===null||t===void 0?void 0:t.getRemoteVideoIsReady(e))||!1}getLocalAudioVolume(){const e=this.localTrackMap.get(se.LocalAudioTrack);if(e)return e.track.getVolumeLevel()}getLocalVideoSize(){const e=this.localTrackMap.get(se.LocalVideoTrack);if(e)return{width:e.track.videoWidth||0,height:e.track.videoHeight||0}}getEncoderConfig(e){const t=this.localTrackMap.get(e);return t&&t.track instanceof hn||t&&t.track instanceof Ln?t.track._encoderConfig:void 0}getLocalMedia(e){return this.localTrackMap.get(e)}hasLocalMedia(){return this.localTrackMap.size>0}hasRemoteMedia(e,t){if(!e)return this.remoteUserMap.size>0;const n=this.remoteUserMap.get(e);return!!n&&(!t||n.has(t))}async hasRemoteMediaWithLock(e,t){if(!e)return this.remoteUserMap.size>0;const n=this.remoteUserMap.get(e);return!!n&&(!t||n.has(t))}getRemoteMedia(e){var t;const n=Array.from(jo(t=this.remoteUserMap).call(t)).find(r=>r.uid===e);return n?{audioTrack:n.audioTrack,audioSSRC:n._audioSSRC,videoTrack:n.videoTrack,videoSSRC:n._videoSSRC}:{}}getAudioLevels(){let e=Array.from(this.remoteUserMap.entries()).map(n=>{let[r]=n;return{uid:r.uid,level:r.audioTrack?100*r.audioTrack._source.getAccurateVolumeLevel():0}});const t=this.localTrackMap.get(se.LocalAudioTrack);return t&&e.push({level:100*t.track._source.getAccurateVolumeLevel(),uid:this.store.uid}),e=xg(e).call(e,(n,r)=>n.level-r.level),e}async disconnectForReconnect(){this.sendConnection&&this.recvConnection&&(w.debug("[".concat(this.store.clientId,"] P2PChannel2.disconnectForReconnect closing P2PConnection")),this.state=Wt.Reconnecting,H("KEEP_LAST_FRAME")&&this.remoteUserMap.size!==0&&Array.from(this.remoteUserMap.entries()).forEach(e=>{let[t]=e;var n;t._videoTrack&&t._videoTrack._player&&((n=t._videoTrack._player.getVideoElement())===null||n===void 0||n.pause(),t._videoTrack._player.isKeepLastFrame=!0,t._videoTrack._originMediaStreamTrack.stop())}),this.sendConnection.close(),this.unbindConnectionEvents(this.sendConnection),this.sendConnection=void 0,this.recvConnection.close(),this.unbindConnectionEvents(this.recvConnection),this.recvConnection=void 0,this.localTrackMap.size!==0&&(Array.from(this.localTrackMap.entries()).forEach(e=>{var t;let[n,{track:r}]=e;switch(n){case se.LocalVideoTrack:Ce(t=r._hints).call(t,gn.LOW_STREAM)?r.close():this.pendingLocalTracks.push(r);break;case se.LocalAudioTrack:r instanceof Sr?this.pendingLocalTracks=this.pendingLocalTracks.concat(r.trackList):this.pendingLocalTracks.push(r);case se.LocalVideoLowTrack:}}),this.emit(He.MediaReconnectStart,this.store.uid)),this.unbindLocalTrackEvents(),this.localTrackMap.clear(),this.remoteUserMap.size!==0&&Array.from(this.remoteUserMap.entries()).forEach(e=>{let[t,n]=e;Array.from(jo(n).call(n)).forEach(r=>{this.setPendingRemoteMedia(t,r)}),this.emit(He.MediaReconnectStart,t.uid)}),this.unbindAllRemoteTrackEvents(),this.remoteUserMap.clear(),this.stopUploadUplinkState(),this.stopUploadDownlinkState(),this.statsUploader.stopUploadOutboundStats(),this.statsUploader.stopUploadInboundStats(),this.statsUploader.stopUploadTransportStats(),w.debug("[".concat(this.store.clientId,"] P2PChannel2 disconnected, waiting to reconnect.")))}hasPendingRemoteMedia(e,t){for(const n of this.pendingRemoteTracks){const{user:r,kind:i}=n;if((e instanceof Hl?e.uid:e)===r.uid&&t===i)return!0}return!1}setPendingRemoteMedia(e,t){this.hasPendingRemoteMedia(e,t)||this.pendingRemoteTracks.push({user:e,kind:t})}async restartICE(e,t){let n,r;if(e===Ni.SEND_ONLY){if(!this.sendConnection)throw new Q(k.INVALID_OPERATION,"Cannot call P2PChannel2.handleMuteLocalTrack before sendConnection established.");n=await this.sendMutex.lock("From P2PChannel.restartICE"),r=this.sendConnection}else{if(!this.recvConnection)throw new Q(k.INVALID_OPERATION,"Cannot call P2PChannel2.handleMuteLocalTrack before recvConnection established.");n=await this.recvMutex.lock("From P2PChannel.restartICE"),r=this.recvConnection}try{if(t){const i=await r.restartICE(t);return r.isInRestartIce=!1,i}{const i=await r.restartICE();if(i){const o=await Kr(this,He.RequestP2PRestartICE,{direction:Ni.RECEIVE_ONLY,iceParameter:i});await r.restartICE(o),r.isInRestartIce=!1}}}finally{n()}}getUplinkNetworkQuality(){if(!this.sendConnection)return 0;const e=this.sendConnection.getStats(),t=this.localTrackMap.get(se.LocalVideoTrack),n=this.localTrackMap.get(se.LocalAudioTrack),r=e.videoSend.find(f=>{var g;return f.ssrc===(t==null||(g=t.ssrcs)===null||g===void 0?void 0:g[0].ssrcId)}),i=e.audioSend.find(f=>{var g;return f.ssrc===(n==null||(g=n.ssrcs)===null||g===void 0?void 0:g[0].ssrcId)});if(!r||!i)return 1;const o=ga(this,He.NeedSignalRTT),a=r?r.rttMs:void 0,s=i?i.rttMs:void 0,c=a&&s?(a+s)/2:a||s,l=(c&&o?(c+o)/2:c||o)||0,u=100*e.sendPacketLossRate*.7/50+.3*l/1500,d=u<.17?1:u<.36?2:u<.59?3:u<.1?4:5,h=t==null?void 0:t.track;if(h&&h._encoderConfig&&h._hints.indexOf(gn.SCREEN_TRACK)===-1){const f=h._encoderConfig.bitrateMax,g=e.bitrate.actualEncoded;if(f&&g){const p=(1e3*f-g)/(1e3*f);return t9[p<.15?0:p<.3?1:p<.45?2:p<.6?3:4][d]}}return d}getDownlinkNetworkQuality(){if(!this.recvConnection)return 0;const e=this.recvConnection.getStats();let t=0;return Array.from(this.remoteUserMap.entries()).forEach(n=>{let[r]=n;const i=r._audioSSRC,o=r._videoSSRC,a=e.audioRecv.find(g=>g.ssrc===i),s=e.videoRecv.find(g=>g.ssrc===o);if(!a&&!s)return void(t+=1);const c=ga(this,He.NeedSignalRTT),l=e.rtt,u=(l&&c?(l+c)/2:l||c)||0,d=a?a.jitterMs:void 0,h=e.recvPacketLossRate;let f=.7*h*100/50+.3*u/1500;d&&(f=.6*h*100/50+.2*u/1500+.2*d/400),t+=f<.1?1:f<.17?2:f<.36?3:f<.59?4:5}),this.remoteUserMap.size>0?Math.round(t/this.remoteUserMap.size):t}async muteLocalTrack(e){return new _e((t,n)=>{this.handleMuteLocalTrack(e,t,n)})}filterTobePublishedTracks(e,t,n){const r=[],i=It(),o=this.getAllTracks();e=qh(e=e.filter(c=>o.indexOf(c)===-1));let a=!1,s=!1;for(const c of e){if(c instanceof hn&&(this.localTrackMap.has(se.LocalVideoTrack)||a?new Q(k.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS).throw():(r.push({track:c,type:se.LocalVideoTrack}),a=!0),t)){const l=this.getLowVideoTrack(c,n);r.push({track:l,type:se.LocalVideoLowTrack})}if(c instanceof Ln){const l=this.localTrackMap.get(se.LocalAudioTrack);if(l){if(!(l.track instanceof Sr))throw new Q(k.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing");if(c._bypassWebAudio)throw new Q(k.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");l.track.addAudioTrack(c),this.bindLocalAudioTrackEvents(c,!0)}else if(s){const u=r.find(d=>{let{type:h}=d;return h===se.LocalAudioTrack});if(!(u.track instanceof Sr))throw new Q(k.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing");if(c._bypassWebAudio)throw new Q(k.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");u.track.addAudioTrack(c)}else{if(!i.webAudioMediaStreamDest||c instanceof Sr||c._bypassWebAudio)r.push({track:c,type:se.LocalAudioTrack});else{const u=new Sr;u.addAudioTrack(c),r.push({track:u,type:se.LocalAudioTrack})}s=!0}}}return r}filterTobeUnpublishedTracks(e){const t=[],n=this.getAllTracks();e=qh(e=e.filter(r=>n.indexOf(r)!==-1));for(const r of e){if(r instanceof Ln){const i=this.localTrackMap.get(se.LocalAudioTrack);if(!i)continue;i.track instanceof Sr?(i.track.removeAudioTrack(r),this.unbindLocalAudioTrackEvents(r),i.track.trackList.length===0&&(t.push([se.LocalAudioTrack,i]),i.track.close())):t.push([se.LocalAudioTrack,i])}if(r instanceof hn){const i=this.localTrackMap.get(se.LocalVideoTrack);if(!i)continue;t.push([se.LocalVideoTrack,i]);const o=this.localTrackMap.get(se.LocalVideoLowTrack);o&&t.push([se.LocalVideoLowTrack,o])}}return t}bindLocalTrackEvents(e){e.forEach(t=>{let{track:n,type:r}=t;switch(r){case se.LocalVideoTrack:n.addListener(Te.GET_STATS,this.handleGetLocalVideoStats),n.addListener(Te.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),n.addListener(Te.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),n.addListener(Te.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),n.addListener(Te.NEED_UPDATE_VIDEO_SEND_PARAMETERS,this.handleUpdateVideoSendParameters),n.addListener(Te.NEED_REPLACE_TRACK,this.handleReplaceTrack),n.addListener(Te.NEED_MUTE_TRACK,this.handleMuteLocalTrack),n.addListener(Te.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case se.LocalAudioTrack:this.bindLocalAudioTrackEvents(n);case se.LocalVideoLowTrack:}})}bindLocalAudioTrackEvents(e,t){e instanceof Sr?e.trackList.forEach(n=>{n.addListener(Te.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),n.addListener(Te.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),n.addListener(Te.GET_STATS,this.handleGetLocalAudioStats),n.addListener(Te.NEED_MUTE_TRACK,this.handleMuteLocalTrack),n.addListener(Te.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)}):(e.addListener(Te.GET_STATS,this.handleGetLocalAudioStats),e.addListener(Te.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.addListener(Te.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.addListener(Te.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.addListener(Te.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack),t||e.addListener(Te.NEED_REPLACE_TRACK,this.handleReplaceTrack))}unbindLocalTrackEvents(e){e||(e=Array.from(this.localTrackMap.entries()).map(t=>{let[n,{track:r}]=t;return{track:r,type:n}})),e.forEach(t=>{let{track:n,type:r}=t;switch(r){case se.LocalVideoTrack:n.off(Te.GET_STATS,this.handleGetLocalVideoStats),n.off(Te.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),n.off(Te.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),n.off(Te.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),n.off(Te.NEED_UPDATE_VIDEO_SEND_PARAMETERS,this.handleUpdateVideoSendParameters),n.off(Te.NEED_REPLACE_TRACK,this.handleReplaceTrack),n.off(Te.NEED_MUTE_TRACK,this.handleMuteLocalTrack),n.off(Te.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case se.LocalAudioTrack:this.unbindLocalAudioTrackEvents(n);case se.LocalVideoLowTrack:}})}unbindLocalAudioTrackEvents(e){e instanceof Sr?e.trackList.forEach(t=>{t.off(Te.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),t.off(Te.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),t.off(Te.GET_STATS,this.handleGetLocalAudioStats),t.off(Te.NEED_MUTE_TRACK,this.handleMuteLocalTrack),t.off(Te.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)}):(e.off(Te.GET_STATS,this.handleGetLocalAudioStats),e.off(Te.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.off(Te.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.off(Te.NEED_REPLACE_TRACK,this.handleReplaceTrack),e.off(Te.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.off(Te.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack))}bindRemoteTrackEvents(e,t){t instanceof Sf&&t.addListener(Te.GET_STATS,n=>{n(this.handleGetRemoteVideoStats(e))}),t instanceof yf&&t.addListener(Te.GET_STATS,n=>{n(this.handleGetRemoteAudioStats(e))})}unbindRemoteTrackEvents(e){e&&e.removeAllListeners(Te.GET_STATS)}unbindAllRemoteTrackEvents(){Array.from(this.remoteUserMap.entries()).forEach(e=>{let[t,n]=e;n.has(De.AUDIO)&&this.unbindRemoteTrackEvents(t._audioTrack),n.has(De.VIDEO)&&this.unbindRemoteTrackEvents(t._videoTrack)})}createGatewayPublishMessage(e,t){return e.map((n,r)=>{var i;let o,{track:a,type:s}=n;switch(s){case se.LocalAudioTrack:o=Gt.Audio;break;case se.LocalVideoTrack:o=Ce(i=a._hints).call(i,gn.SCREEN_TRACK)?Gt.Screen:Gt.High;break;case se.LocalVideoLowTrack:o=Gt.Low}return{kind:s===se.LocalAudioTrack?De.AUDIO:De.VIDEO,stream_type:o,mid:t[r].id,ssrcs:t[r].localSSRC,isMuted:a.muted||!a.enabled}})}createGatewayUnpublishMessage(e){return e.map(t=>{var n;let r,[i,{track:o,ssrcs:a,id:s}]=t;switch(i){case se.LocalVideoTrack:r=Ce(n=o._hints).call(n,gn.SCREEN_TRACK)?Gt.Screen:Gt.High;break;case se.LocalAudioTrack:r=Gt.Audio;break;case se.LocalVideoLowTrack:r=Gt.Low}return{stream_type:r,ssrcs:a,mid:s}})}assignLocalTracks(e,t){e.forEach((n,r)=>{let{track:i,type:o}=n;this.localTrackMap.set(o,{track:i,id:t[r].id,ssrcs:t[r].localSSRC})})}withdrawLocalTracks(e){e.forEach(t=>{let[n]=t;this.localTrackMap.delete(n)})}bindConnectionEvents(e){e.onConnectionStateChange=async t=>{var n;w.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: ").concat(e.name,".onConnectionStateChange(").concat(t,")")),this.emit(He.PeerConnectionStateChange,t),t!=="connected"||this.store.keyMetrics.peerConnectionEnd||this.store.peerConnectionEnd(),t==="connected"&&(e.isInRestartIce=!1),Ce(n=this._restartStates).call(n,t)&&!e.isInRestartIce&&(t==="disconnected"&&await Lr(800),e.iceConnectionState!=="disconnected"&&e.iceConnectionState!=="failed"||this.handleDisconnect(e.direction))},e.onICEConnectionStateChange=t=>{t!=="connected"||this.store.keyMetrics.iceConnectionEnd||this.store.iceConnectionEnd(),w.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICEConnectionStateChange(").concat(t,")")),Pe.reportApiInvoke(this.store.sessionId,{name:"ICEConnectionStateChange",options:t,tag:kn.TRACER}).onSuccess(),this.emit(He.IceConnectionStateChange,t)},e.onICETransportStateChange=t=>{w.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICETransportStateChange(").concat(t,")"))},e.onDTLSTransportStateChange=t=>{w.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportStateChange(").concat(t,")"))},e.onDTLSTransportError=t=>{w.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportError(").concat(t,")"))},e.onFirstAudioDecoded=t=>{var n;const r=Array.from(jo(n=this.remoteUserMap).call(n)).find(o=>o._audioSSRC===t);var i;r&&(this.store.subscribe(r.uid,"audio",void 0,void 0,void 0,Date.now()),(i=r.audioTrack)===null||i===void 0||i.emit(_f.FIRST_FRAME_DECODED),Pe.firstRemoteFrame(this.store.sessionId,Or.FIRST_AUDIO_DECODE,xn.FIRST_AUDIO_DECODE,{peer:r._uintid,subscribeElapse:ni.measureFromSubscribeStart(this.store.clientId,t),subscribeRequestid:t,p2pid:this.store.p2pId}))},e.onFirstAudioReceived=t=>{var n;const r=Array.from(jo(n=this.remoteUserMap).call(n)).find(i=>i._audioSSRC===t);r&&Pe.firstRemoteFrame(this.store.sessionId,Or.FIRST_AUDIO_RECEIVED,xn.FIRST_AUDIO_RECEIVED,{peer:r._uintid,subscribeElapse:ni.measureFromSubscribeStart(this.store.clientId,t),subscribeRequestid:t,p2pid:this.store.p2pId})},e.onFirstVideoDecoded=(t,n,r)=>{this.reportVideoFirstFrameDecoded(t,n,r)},e.onFirstVideoReceived=t=>{var n;const r=Array.from(jo(n=this.remoteUserMap).call(n)).find(i=>i._videoSSRC===t);r&&Pe.firstRemoteFrame(this.store.sessionId,Or.FIRST_VIDEO_RECEIVED,xn.FIRST_VIDEO_RECEIVED,{peer:r._uintid,subscribeElapse:ni.measureFromSubscribeStart(this.store.clientId,t),subscribeRequestid:t,p2pid:this.store.p2pId})},e.onSelectedLocalCandidateChanged=(t,n)=>{const r=t.candidateType==="relay",i=n.candidateType==="relay";n.candidateType!=="unknown"&&r===i||this.emit(He.ConnectionTypeChange,r),w.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.SelectedLocalCandidateChanged(").concat(JSON.stringify(Xl(n))," -> ").concat(JSON.stringify(Xl(t)),")"))},e.onSelectedRemoteCandidateChanged=(t,n)=>{w.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.SelectedRemoteCandidateChanged(").concat(JSON.stringify(Xl(n))," -> ").concat(JSON.stringify(Xl(t)),")"))},e.onFirstVideoDecodedTimeout=t=>{this.reportVideoFirstFrameDecoded(t,void 0,void 0,!0)},e.onLocalCandidate=t=>{this.emit(He.LocalCandidate,{candidate:t,direction:e.direction})}}unbindConnectionEvents(e){e.onConnectionStateChange=void 0,e.onICEConnectionStateChange=void 0,e.onICETransportStateChange=void 0,e.onDTLSTransportStateChange=void 0,e.onDTLSTransportError=void 0,e.onFirstAudioDecoded=void 0,e.onFirstAudioReceived=void 0,e.onFirstVideoDecoded=void 0,e.onFirstVideoReceived=void 0,e.onSelectedLocalCandidateChanged=void 0,e.onSelectedRemoteCandidateChanged=void 0,e.onFirstVideoDecodedTimeout=void 0,e.onLocalCandidate=void 0}async handleDisconnect(e){const t=e===Ni.SEND_ONLY?this.sendConnection:this.recvConnection;t&&!t.isInRestartIce&&(t.isInRestartIce=!0,w.debug("[".concat(this.store.clientId,"] [P2PChannel-").concat(t.name,"] start use restartICE")),e===Ni.SEND_ONLY?this.restartICE(e):Kr(this,He.RequestP2PRestartICE,{direction:Ni.SEND_ONLY}))}filterTobeMutedTracks(e){const t=[];if(this.getAllTracks().indexOf(e)===-1)return t;const n=this.localTrackMap.get(se.LocalAudioTrack);if(e instanceof Ln&&(n==null?void 0:n.track)instanceof Sr)return n.track.isActive||t.push([se.LocalAudioTrack,n]),t;const r=Array.from(this.localTrackMap.entries()).find(i=>{let[,{track:o}]=i;return e===o});if(r&&(t.push(r),r[0]===se.LocalVideoTrack)){const i=this.localTrackMap.get(se.LocalVideoLowTrack);i&&t.push([se.LocalVideoLowTrack,i])}return t}filterTobeUnmutedTracks(e){const t=[],n=this.localTrackMap.get(se.LocalAudioTrack);if(e instanceof Ln&&(n==null?void 0:n.track)instanceof Sr)return n.track.isActive&&t.push([se.LocalAudioTrack,n]),t;const r=Array.from(this.localTrackMap.entries()).find(i=>{let[,{track:o}]=i;return e===o});if(r)if(r[0]===se.LocalVideoTrack){t.push(r);const i=this.localTrackMap.get(se.LocalVideoLowTrack);i&&t.push([se.LocalVideoLowTrack,i])}else t.push(r);return t}createMuteMessage(e){return e.map(t=>{var n;let r,[i,{track:o,ssrcs:a,id:s}]=t;switch(i){case se.LocalAudioTrack:r=Gt.Audio;break;case se.LocalVideoTrack:r=Ce(n=o._hints).call(n,gn.SCREEN_TRACK)?Gt.Screen:Gt.High;break;case se.LocalVideoLowTrack:r=Gt.Low}return{stream_type:r,ssrcs:a,mid:s}})}createUnmuteMessage(e){return e.map(t=>{var n;let r,[i,{track:o,ssrcs:a,id:s}]=t;switch(i){case se.LocalAudioTrack:r=Gt.Audio;break;case se.LocalVideoTrack:r=Ce(n=o._hints).call(n,gn.SCREEN_TRACK)?Gt.Screen:Gt.High;break;case se.LocalVideoLowTrack:r=Gt.Low}return{stream_type:r,ssrcs:a,mid:s}})}filterTobeUnSubscribedTracks(e,t){const n=[],r=this.remoteUserMap.get(e);if(!r)return n;if(t){const i=r.get(t);if(!i)return n;n.push([e,{kind:t,id:i}])}else Array.from(r.entries()).forEach(i=>{let[o,a]=i;n.push([e,{kind:o,id:a}])});return n}createUnsubscribeMessage(e){const t=[];return e.forEach(n=>{let[r,{kind:i,id:o}]=n;switch(i){case De.VIDEO:return void(r._videoSSRC&&t.push({stream_type:De.VIDEO,ssrcId:r._videoSSRC}));case De.AUDIO:return void(r._audioSSRC&&t.push({stream_type:De.AUDIO,ssrcId:r._audioSSRC}))}}),t}withdrawRemoteTracks(e){e.forEach(t=>{let[n,{kind:r}]=t;const i=this.remoteUserMap.get(n);i&&(i.delete(r),Array.from(i.entries()).length===0&&this.remoteUserMap.delete(n))})}async updateBitrateLimit(e){const t=this.localTrackMap.get(se.LocalVideoTrack),n=this.localTrackMap.get(se.LocalVideoLowTrack);t&&await t.track.setBitrateLimit(e.uplink),n&&e.low_stream_uplink&&await n.track.setBitrateLimit({max_bitrate:e.low_stream_uplink.bitrate,min_bitrate:e.low_stream_uplink.bitrate||0})}isP2PDisconnected(){if(this.sendConnection&&this.recvConnection){const e=this.sendConnection.peerConnectionState,t=this.recvConnection.peerConnectionState;return e!=="connected"&&t!=="connected"}return!0}async tryToUnmuteAudio(e){for(let t=0;t<e.length;t++)if(e[t]instanceof Ln){const n=this.filterTobeUnmutedTracks(e[t]);if(n.length===0)continue;const r=this.createUnmuteMessage(n);return void await rn(this,He.RequestUnmuteLocal,r)}}bindStatsUploaderEvents(){this.statsUploader.requestStats=e=>this.getStats(e),this.statsUploader.requestLocalMedia=()=>Array.from(this.localTrackMap.entries()).filter(e=>{let[,{ssrcs:t}]=e;return!!t}),this.statsUploader.requestRemoteMedia=()=>Array.from(this.remoteUserMap.entries()),this.statsUploader.requestVideoIsReady=e=>{var t;return!((t=this.recvConnection)===null||t===void 0||!t.getRemoteVideoIsReady(e))},this.statsUploader.requestUpload=(e,t)=>this.emit(He.RequestUpload,e,t),this.statsUploader.requestUploadStats=e=>this.emit(He.RequestUploadStats,e),this.statsUploader.requestAllTracks=()=>this.getAllTracks()}unbindStatsUploaderEvents(){this.statsUploader.requestStats=void 0,this.statsUploader.requestLocalMedia=void 0,this.statsUploader.requestRemoteMedia=void 0,this.statsUploader.requestVideoIsReady=void 0}async requestReconnect(){this.dtlsFailedCount+=1,await Lr(aN(this.dtlsFailedCount,ar)),this.emit(He.RequestReconnect)}async reconnectP2P(){}canPublishLowStream(){return this.localTrackMap.has(se.LocalVideoTrack)||this.pendingLocalTracks.some(e=>e instanceof hn)}throwIfTrackTypeNotMatch(e){if(e.filter(t=>t instanceof hn).length>1)throw new Q(k.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(e.filter(t=>t instanceof Ln).length>1&&(e.some(t=>t instanceof Ln&&t._bypassWebAudio)||!It().webAudioMediaStreamDest))throw new Q(k.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode");for(const t of e){if(t instanceof hn&&this.pendingLocalTracks.some(n=>n instanceof hn))throw new Q(k.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(t instanceof Ln&&this.pendingLocalTracks.some(n=>n instanceof Ln)&&(!It().webAudioMediaStreamDest||t._bypassWebAudio||this.pendingLocalTracks.some(n=>n instanceof Ln&&n._bypassWebAudio)))throw new Q(k.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode")}}getLowVideoTrack(e,t){const n=!H("DISABLE_DUAL_STREAM_USE_ENCODING")&&It().supportDualStreamEncoding,r=zv(zv({},{width:160,height:120,framerate:15,bitrate:50}),t);let i;i=n?e._mediaStreamTrack.clone():aA(e,r);const o=cn(8,"track-low-"),a=new hn(i,zv(zv({},n&&{scaleResolutionDownBy:KI(r,e)}),{},{frameRate:r.framerate,bitrateMax:r.bitrate,bitrateMin:r.bitrate}),void 0,void 0,o);return a.on(gd.TRANSCEIVER_UPDATED,s=>{e._updateRtpTransceiver(s,$f.LOW_STREAM)}),a._hints.push(gn.LOW_STREAM),e.addListener(Te.NEED_CLOSE,()=>{a.close()}),a}async globalLock(){return this.recvMutex.lock("From P2PChannel2.globalLock")}reportVideoFirstFrameDecoded(e,t,n,r){var i;const o=Array.from(jo(i=this.remoteUserMap).call(i)).find(a=>a._videoSSRC===e);if(o){r||this.store.subscribe(o.uid,"video",void 0,void 0,void 0,void 0,Date.now());const a=this.store.keyMetrics,s=a.subscribe.find(c=>c.userId===o.uid&&c.type==="video");Pe.firstRemoteVideoDecode(this.store.sessionId,Or.FIRST_VIDEO_DECODE,xn.FIRST_VIDEO_DECODE,{peer:o._uintid,videowidth:t,videoheight:n,subscribeElapse:ni.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId,apEnd:a.requestAPEnd||0,apStart:a.requestAPStart||0,joinGwEnd:a.joinGatewayEnd||0,joinGwStart:a.joinGatewayStart||0,pcEnd:a.peerConnectionEnd||0,pcStart:a.peerConnectionStart||0,subscriberEnd:(s==null?void 0:s.subscribeEnd)||0,subscriberStart:(s==null?void 0:s.subscribeStart)||0,videoAddNotify:(s==null?void 0:s.streamAdded)||0,state:r?1:0})}}async remoteMediaSsrcChanged(e,t,n){if(!this.recvConnection)return!1;const r=this.remoteUserMap.get(e);if(!r)return!1;const i=r.get(t);if(!i)return!1;const o=await this.recvConnection.getRemoteSSRC(i);return o!==void 0&&o!==n}isPreSubScribe(e){return!1}async publishDataChannel(e){throw new Q(k.NOT_SUPPORTED)}async unpublishDataChannel(e){throw new Q(k.NOT_SUPPORTED)}async subscribeDataChannel(e,t){throw new Q(k.NOT_SUPPORTED)}async unsubscribeDataChannel(e,t){throw new Q(k.NOT_SUPPORTED)}hasPendingRemoteDataChannel(e,t){throw new Q(k.NOT_SUPPORTED)}setPendingRemoteDataChannel(e,t){throw new Q(k.NOT_SUPPORTED)}async preConnect(e){throw new Q(k.NOT_SUPPORTED)}getEstablishParams(){throw new Q(k.NOT_SUPPORTED)}async reSubscribe(e){throw new Q(k.NOT_SUPPORTED)}async updateVideoStreamParameter(e,t){throw new Q(k.NOT_SUPPORTED)}unbindRtpTransceiver(){this.localTrackMap.size!==0&&Array.from(this.localTrackMap.entries()).forEach(e=>{let[t,{track:n}]=e;t===se.LocalVideoLowTrack?n._updateRtpTransceiver(void 0,$f.LOW_STREAM):n._updateRtpTransceiver(void 0)})}},Ae(yn.prototype,"p2pConnect",[DU],Object.getOwnPropertyDescriptor(yn.prototype,"p2pConnect"),yn.prototype),Ae(yn.prototype,"unpublish",[LU],Object.getOwnPropertyDescriptor(yn.prototype,"unpublish"),yn.prototype),Ae(yn.prototype,"unpublishLowStream",[kU],Object.getOwnPropertyDescriptor(yn.prototype,"unpublishLowStream"),yn.prototype),Ae(yn.prototype,"subscribe",[MU],Object.getOwnPropertyDescriptor(yn.prototype,"subscribe"),yn.prototype),Ae(yn.prototype,"mockSubscribe",[FU],Object.getOwnPropertyDescriptor(yn.prototype,"mockSubscribe"),yn.prototype),Ae(yn.prototype,"unsubscribe",[UU],Object.getOwnPropertyDescriptor(yn.prototype,"unsubscribe"),yn.prototype),Ae(yn.prototype,"muteRemote",[BU],Object.getOwnPropertyDescriptor(yn.prototype,"muteRemote"),yn.prototype),Ae(yn.prototype,"unmuteRemote",[$U],Object.getOwnPropertyDescriptor(yn.prototype,"unmuteRemote"),yn.prototype),Ae(yn.prototype,"hasRemoteMediaWithLock",[VU],Object.getOwnPropertyDescriptor(yn.prototype,"hasRemoteMediaWithLock"),yn.prototype),Ae(yn.prototype,"disconnectForReconnect",[jU],Object.getOwnPropertyDescriptor(yn.prototype,"disconnectForReconnect"),yn.prototype),Ae(yn.prototype,"remoteMediaSsrcChanged",[HU],Object.getOwnPropertyDescriptor(yn.prototype,"remoteMediaSsrcChanged"),yn.prototype),yn);function _s(e){return function(t,n,r){const i=t[n];if(typeof i!="function")throw new Error("Cannot use mutex on object property.");return r.value=async function(){for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];switch(e){case Rs.SEND_ONLY:{const c=await this.sendMutex.lock("From P2PChannel2.".concat(n));try{return await i.apply(this,a)}finally{c()}}case Rs.RECEIVE_ONLY:{const c=await this.recvMutex.lock("From P2PChannel2.".concat(n));try{return await i.apply(this,a)}finally{c()}}default:{const c=await this.sendMutex.lock("From P2PChannel2.".concat(n)),l=await this.recvMutex.lock("From P2PChannel2.".concat(n));try{return await i.apply(this,a)}finally{c(),l()}}}},r}}function WU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Vu(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?WU(Object(n),!0).forEach(function(r){P(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):WU(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}class N0{constructor(t){P(this,"store",void 0),P(this,"onStatsException",void 0),P(this,"onUploadPublishDuration",void 0),P(this,"onStatsChanged",void 0),P(this,"localStats",new Map),P(this,"remoteStats",new Map),P(this,"updateStatsInterval",void 0),P(this,"trafficStats",void 0),P(this,"trafficStatsPeerList",[]),P(this,"uplinkStats",void 0),P(this,"exceptionMonitor",void 0),P(this,"p2pChannel",void 0),P(this,"scalabilityMode",zI.L1T1),P(this,"updateStats",()=>{this.p2pChannel&&(this.updateRemoteStats(this.p2pChannel),this.updateLocalStats(this.p2pChannel))}),this.store=t,this.exceptionMonitor=new wfe,this.exceptionMonitor.on("exception",(n,r,i)=>{this.onStatsException&&this.onStatsException(n,r,i)})}startUpdateStats(){this.updateStatsInterval||(this.updateStatsInterval=window.setInterval(this.updateStats,1e3))}stopUpdateStats(){this.updateStatsInterval&&(window.clearInterval(this.updateStatsInterval),this.updateStatsInterval=void 0)}reset(){this.localStats=new Map,this.remoteStats=new Map,this.trafficStats=void 0,this.trafficStatsPeerList=[],this.uplinkStats=void 0}getLocalAudioTrackStats(){return this.localStats.get(se.LocalAudioTrack)||Vu({},XI)}getLocalVideoTrackStats(){return this.localStats.get(se.LocalVideoTrack)||Vu({},JI)}getRemoteAudioTrackStats(t){const n=(o,a)=>{if(!this.trafficStats)return a;const s=this.trafficStats.peer_delay.find(c=>c.peer_uid===o);return s&&(a.publishDuration=s.B_ppad+(Date.now()-this.trafficStats.timestamp)),a},r={};if(t){var i;const o=(i=this.remoteStats.get(t))===null||i===void 0?void 0:i.audioStats;o&&(r[t]=n(t,o))}else Array.from(this.remoteStats.entries()).forEach(o=>{let[a,{audioStats:s}]=o;s&&(r[a]=n(a,s))});return r}getRemoteNetworkQualityStats(t){const n={};if(t){var r;const i=(r=this.remoteStats.get(t))===null||r===void 0?void 0:r.networkStats;i&&(n[t]=i)}else Array.from(this.remoteStats.entries()).forEach(i=>{let[o,{networkStats:a}]=i;a&&(n[o]=a)});return n}getRemoteVideoTrackStats(t){const n=(o,a)=>{if(!this.trafficStats)return a;const s=this.trafficStats.peer_delay.find(c=>c.peer_uid===o);return s&&(a.publishDuration=s.B_ppvd+(Date.now()-this.trafficStats.timestamp)),a},r={};if(t){var i;const o=(i=this.remoteStats.get(t))===null||i===void 0?void 0:i.videoStats;o&&(r[t]=n(t,o))}else Array.from(this.remoteStats.entries()).forEach(o=>{let[a,{videoStats:s}]=o;s&&(r[a]=n(a,s))});return r}getRTCStats(){let t=0,n=0,r=0,i=0;const o=this.localStats.get(se.LocalAudioTrack);o&&(t+=o.sendBytes,n+=o.sendBitrate);const a=this.localStats.get(se.LocalVideoTrack);a&&(t+=a.sendBytes,n+=a.sendBitrate);const s=this.localStats.get(se.LocalVideoLowTrack);s&&(t+=s.sendBytes,n+=s.sendBitrate),this.remoteStats.forEach(l=>{let{audioStats:u,videoStats:d}=l;u&&(r+=u.receiveBytes,i+=u.receiveBitrate),d&&(r+=d.receiveBytes,i+=d.receiveBitrate)});let c=1;return this.trafficStats&&(c+=this.trafficStats.peer_delay.length),{Duration:0,UserCount:c,SendBitrate:n,SendBytes:t,RecvBytes:r,RecvBitrate:i,OutgoingAvailableBandwidth:this.uplinkStats?this.uplinkStats.B_uab/1e3:0,RTT:this.trafficStats?2*this.trafficStats.B_acd:0}}addLocalStats(t){this.localStats.set(t,void 0)}removeLocalStats(t){t?this.localStats.delete(t):this.localStats.clear()}addRemoteStats(t){this.remoteStats.set(t,{})}removeRemoteStats(t){t?this.remoteStats.delete(t):this.remoteStats.clear()}addP2PChannel(t){this.p2pChannel=t}updateTrafficStats(t){t.peer_delay=t.peer_delay.filter(n=>n.B_ppad!==void 0||n.B_ppvd!==void 0),t.peer_delay.filter(n=>this.trafficStatsPeerList.indexOf(n.peer_uid)===-1).forEach(n=>{var r;const i=(r=this.p2pChannel)===null||r===void 0?void 0:r.getRemoteMedia(n.peer_uid),o=i!=null&&i.videoSSRC?ni.measureFromSubscribeStart(this.store.clientId,i.videoSSRC):0,a=i!=null&&i.audioSSRC?ni.measureFromSubscribeStart(this.store.clientId,i.audioSSRC):0;n.B_ppad!==void 0&&n.B_ppvd!==void 0&&(this.onUploadPublishDuration&&this.onUploadPublishDuration(n.peer_uid,n.B_ppad,n.B_ppvd,o>a?o:a),this.trafficStatsPeerList.push(n.peer_uid))}),this.trafficStats=t}updateUplinkStats(t){this.uplinkStats&&this.uplinkStats.B_fir!==t.B_fir&&w.debug("[".concat(this.store.clientId,"]: Period fir changes to ").concat(t.B_fir)),this.uplinkStats=t}static isRemoteVideoFreeze(t,n,r){if(!t)return!1;const i=!!r&&n.framesDecodeFreezeTime>r.framesDecodeFreezeTime,o=!r||n.framesDecodeCount>r.framesDecodeCount;return i||!o}static isRemoteAudioFreeze(t){return!!t&&t._isFreeze()}isLocalVideoFreeze(t){return!(!t.inputFrame||!t.sentFrame)&&t.inputFrame.frameRate>5&&t.sentFrame.frameRate<3}updateLocalStats(t){Array.from(this.localStats.entries()).forEach(n=>{let[r,i]=n;switch(r){case se.LocalVideoTrack:case se.LocalVideoLowTrack:{const a=i,s=Vu({},JI),c=t.getStats(),l=t.getLocalMedia(r);if(c){const u=c.videoSend.find(d=>d.ssrc===(l==null?void 0:l.ssrcs[0].ssrcId));if(u){const d=t.getLocalVideoSize(),h=t.getEncoderConfig(se.LocalVideoTrack);u.codec!=="H264"&&u.codec!=="H265"&&u.codec!=="VP8"&&u.codec!=="VP9"&&u.codec!=="AV1X"&&u.codec!=="AV1"||(s.codecType=u.codec),s.sendBytes=u.bytes,s.sendBitrate=a?8*Math.max(0,s.sendBytes-a.sendBytes):0,u.inputFrame?(s.captureFrameRate=u.inputFrame.frameRate,s.captureResolutionHeight=u.inputFrame.height,s.captureResolutionWidth=u.inputFrame.width):d&&(s.captureResolutionWidth=d.width,s.captureResolutionHeight=d.height),u.sentFrame?(s.sendFrameRate=u.sentFrame.frameRate,s.sendResolutionHeight=u.sentFrame.height,s.sendResolutionWidth=u.sentFrame.width):d&&(s.sendResolutionWidth=d.width,s.sendResolutionHeight=d.height),u.avgEncodeMs&&(s.encodeDelay=u.avgEncodeMs),h&&h.bitrateMax&&(s.targetSendBitrate=1e3*h.bitrateMax),s.sendPackets=u.packets,s.sendPacketsLost=u.packetsLost,s.sendJitterMs=u.jitterMs,s.sendRttMs=u.rttMs,s.totalDuration=a?a.totalDuration+1:1,s.totalFreezeTime=a?a.totalFreezeTime:0,this.isLocalVideoFreeze(u)&&(s.totalFreezeTime+=1),u.scalabilityMode&&this.scalabilityMode!==u.scalabilityMode&&(w.debug("[".concat(this.store.clientId,"]: The scalabilityMode of the video sending stream is ").concat(u.scalabilityMode)),this.scalabilityMode=u.scalabilityMode)}this.trafficStats&&(s.currentPacketLossRate=(this.trafficStats.B_pvlr4||0)/100)}var o;this.localStats.set(r,s),((a==null?void 0:a.sendResolutionWidth)!==s.sendResolutionWidth||(a==null?void 0:a.sendResolutionHeight)!==s.sendResolutionHeight)&&((o=this.onStatsChanged)===null||o===void 0||o.call(this,"resolution",{width:s.sendResolutionWidth,height:s.sendResolutionHeight})),s&&l&&this.exceptionMonitor.setLocalVideoStats(this.store.uid,l.track,s);break}case se.LocalAudioTrack:{const a=i,s=Vu({},XI),c=t.getStats(),l=t.getLocalMedia(r);if(c){const u=c.audioSend.find(d=>d.ssrc===(l==null?void 0:l.ssrcs[0].ssrcId));if(u){if(u.codec!=="opus"&&u.codec!=="aac"&&u.codec!=="PCMU"&&u.codec!=="PCMA"&&u.codec!=="G722"||(s.codecType=u.codec),u.inputLevel)s.sendVolumeLevel=Math.round(32767*u.inputLevel);else{const d=t.getLocalAudioVolume();d&&(s.sendVolumeLevel=Math.round(32767*d))}s.sendBytes=u.bytes,s.sendPackets=u.packets,s.sendPacketsLost=u.packetsLost,s.sendJitterMs=u.jitterMs,s.sendRttMs=u.rttMs,s.sendBitrate=a?8*Math.max(0,s.sendBytes-a.sendBytes):0}}this.trafficStats&&(s.currentPacketLossRate=(this.trafficStats.B_palr4||0)/100),this.localStats.set(se.LocalAudioTrack,s),s&&l&&this.exceptionMonitor.setLocalAudioStats(this.store.uid,l.track,s);break}}})}updateRemoteStats(t){Array.from(this.remoteStats.entries()).forEach(n=>{var r,i;let[o,{videoStats:a,audioStats:s,videoPcStats:c}]=n;const l=s,u=a,d=c,h=Vu({},v9),f=Vu({},E9),g=Vu({},rfe),{audioTrack:p,videoTrack:m,audioSSRC:_,videoSSRC:E}=t.getRemoteMedia(o);let S;S=t instanceof To?t.getStats(!0):t.getStats();const C=(r=S)===null||r===void 0?void 0:r.audioRecv.find(R=>R.ssrc===_),b=(i=S)===null||i===void 0?void 0:i.videoRecv.find(R=>R.ssrc===E),T=this.trafficStats&&this.trafficStats.peer_delay.find(R=>R.peer_uid===o);if(C&&(C.codec!=="opus"&&C.codec!=="aac"&&C.codec!=="PCMU"&&C.codec!=="PCMA"&&C.codec!=="G722"||(h.codecType=C.codec),C.outputLevel?h.receiveLevel=Math.round(32767*C.outputLevel):p&&(h.receiveLevel=Math.round(32767*p.getVolumeLevel())),h.receiveBytes=C.bytes,h.receivePackets=C.packets,h.receivePacketsLost=C.packetsLost,h.receivePacketsDiscarded=C.packetsDiscarded,h.packetLossRate=h.receivePacketsLost/(h.receivePackets+h.receivePacketsLost),h.receiveBitrate=l?8*Math.max(0,h.receiveBytes-l.receiveBytes):0,h.totalDuration=l?l.totalDuration+1:1,h.totalFreezeTime=l?l.totalFreezeTime:0,h.freezeRate=h.totalFreezeTime/h.totalDuration,h.receiveDelay=C.jitterBufferMs,h.totalDuration>10&&N0.isRemoteAudioFreeze(p)&&(h.totalFreezeTime+=1)),b){b.codec!=="H264"&&b.codec!=="H265"&&b.codec!=="VP8"&&b.codec!=="VP9"&&b.codec!=="AV1X"&&b.codec!=="AV1"||(f.codecType=b.codec),f.receiveBytes=b.bytes,f.receiveBitrate=u?8*Math.max(0,f.receiveBytes-u.receiveBytes):0,f.decodeFrameRate=b.decodeFrameRate<0?0:b.decodeFrameRate,f.renderFrameRate=b.decodeFrameRate<0?0:b.decodeFrameRate,b.outputFrame&&(f.renderFrameRate=b.outputFrame.frameRate),b.receivedFrame?(f.receiveFrameRate=b.receivedFrame.frameRate,f.receiveResolutionHeight=b.receivedFrame.height,f.receiveResolutionWidth=b.receivedFrame.width):m&&(f.receiveResolutionHeight=m._videoHeight||0,f.receiveResolutionWidth=m._videoWidth||0),b.framesRateFirefox!==void 0&&(f.receiveFrameRate=Math.round(b.framesRateFirefox)),f.receivePackets=b.packets,f.receivePacketsLost=b.packetsLost,f.packetLossRate=f.receivePacketsLost/(f.receivePackets+f.receivePacketsLost),f.totalDuration=u?u.totalDuration+1:1,f.totalFreezeTime=u?u.totalFreezeTime:0,f.receiveDelay=b.jitterBufferMs||0;const R=!!E&&t.getRemoteVideoIsReady(E);m&&R&&N0.isRemoteVideoFreeze(m,b,d)&&(f.totalFreezeTime+=1),f.freezeRate=f.totalFreezeTime/f.totalDuration}T&&(h.end2EndDelay=T.B_ad,f.end2EndDelay=T.B_vd,h.transportDelay=T.B_ed,f.transportDelay=T.B_ed,h.currentPacketLossRate=T.B_ealr4/100,f.currentPacketLossRate=T.B_evlr4/100,g.uplinkNetworkQuality=T.B_punq?T.B_punq:0,g.downlinkNetworkQuality=T.B_pdnq?T.B_pdnq:0),this.remoteStats.set(o,{audioStats:h,videoStats:f,videoPcStats:b,networkStats:g}),p&&this.exceptionMonitor.setRemoteAudioStats(p,h),m&&this.exceptionMonitor.setRemoteVideoStats(m,f)})}}class cz{constructor(){P(this,"destChannelMediaInfos",new Map),P(this,"srcChannelMediaInfo",void 0)}setSrcChannelInfo(t){WM(t),this.srcChannelMediaInfo=t}addDestChannelInfo(t){WM(t),this.destChannelMediaInfos.set(t.channelName,t)}removeDestChannelInfo(t){Vy(t),this.destChannelMediaInfos.delete(t)}getSrcChannelMediaInfo(){return this.srcChannelMediaInfo}getDestChannelMediaInfo(){return this.destChannelMediaInfos}}function GU(e){if(!(e instanceof cz))return new q(k.INVALID_PARAMS,"Config should be instance of [ChannelMediaRelayConfiguration]").throw();const t=e.getSrcChannelMediaInfo(),n=e.getDestChannelMediaInfo();if(!t)return new q(k.INVALID_PARAMS,"srcChannelMediaInfo should not be empty").throw();if(n.size===0)return new q(k.INVALID_PARAMS,"destChannelMediaInfo should not be empty").throw()}function KU(e){var t={},n=!1;function r(i,o){return n=!0,{done:!1,value:new RN(o=new iA(function(a){a(e[i](o))}),1)}}return t[Wh!==void 0&&_7||"@@iterator"]=function(){return this},t.next=function(i){return n?(n=!1,i):r("next",i)},typeof e.throw=="function"&&(t.throw=function(i){if(n)throw n=!1,i;return r("throw",i)}),typeof e.return=="function"&&(t.return=function(i){return n?(n=!1,i):r("return",i)}),t}var Wfe=Kn(ez);function qU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function YU(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?qU(Object(n),!0).forEach(function(r){P(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qU(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var nn;function XU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Wv(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?XU(Object(n),!0).forEach(function(r){P(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XU(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}let Kp=(nn=class Tm extends o9{get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get localCodecs(){return[...new Set(this.localCapabilities&&this.localCapabilities.videoCodecs.map(t=>t.rtpMap&&t.rtpMap.encodingName.toLowerCase()||"").filter(t=>{var n;return Ce(n=Object.keys($y)).call(n,t)}))]}constructor(t,n){super(t,n),P(this,"store",void 0),P(this,"peerConnection",void 0),P(this,"remoteSDP",void 0),P(this,"initialOffer",void 0),P(this,"statsFilter",void 0),P(this,"useRTX",!1),P(this,"localCapabilities",void 0),P(this,"localCandidateCount",0),P(this,"allCandidatesReceived",!1),P(this,"establishPromise",void 0),P(this,"mutex",new ri("P2PConnection-mutex")),this.store=n,this.peerConnection=new RTCPeerConnection(Tm.resolvePCConfiguration(t),{optional:[{googDscp:!0}]}),this.statsFilter=IN(this.peerConnection,H("STATS_UPDATE_INTERVAL"),void 0,Fn()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1,this.establishPromise=this.establish()}async establish(){try{const t=await this.peerConnection.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});if(!t.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const n=Jl(t.sdp),r=I0(t.sdp,{filterRTX:!this.useRTX,filterVideoFec:H("FILTER_VIDEO_FEC"),filterAudioFec:H("FILTER_AUDIO_FEC"),filterAudioCodec:["opus"]});return this.localCapabilities=r,this.initialOffer=t,Wv(Wv({},n),{},{rtpCapabilities:{send:{audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},recv:{audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},sendrecv:r},offerSDP:t.sdp})}catch(t){throw new Q(k.GET_LOCAL_CONNECTION_PARAMS_FAILED,t.toString())}}async updateRemoteConnect(){}async connect(t){try{if(!this.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");this.remoteSDP=new class{constructor(r){P(this,"sessionDesc",void 0),P(this,"localCapabilities",void 0),P(this,"rtpCapabilities",void 0),P(this,"candidates",void 0),P(this,"iceParameters",void 0),P(this,"dtlsParameters",void 0),P(this,"setup",void 0),P(this,"currentMidIndex",void 0),P(this,"cname",void 0),r=Yn(r);const{iceParameters:i,dtlsParameters:o,candidates:a,rtpCapabilities:s,setup:c,localCapabilities:l,sdkCodec:u,cname:d}=r,h=Dr.parse(`v=0
o=- 0 0 IN IP4 127.0.0.1
s=AgoraGateway
t=0 0
a=group:BUNDLE audio video
a=msid-semantic: WMS
a=ice-lite
m=audio 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendrecv
a=rtcp-mux
a=rtcp-rsize
a=mid:audio
m=video 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendrecv
a=rtcp-mux
a=rtcp-rsize
a=mid:video
`);this.rtpCapabilities=s,this.candidates=a,this.iceParameters=i,this.dtlsParameters=o,this.setup=c,this.localCapabilities=l,this.cname=d;for(let f=0;f<h.mediaDescriptions.length;f++){const g=h.mediaDescriptions[f];if(g.attributes.iceUfrag=i.iceUfrag,g.attributes.icePwd=i.icePwd,g.attributes.fingerprints=o.fingerprints,g.attributes.candidates=a,g.attributes.setup=c,g.media.mediaType==="video"){g.media.fmts=s.videoCodecs.map(m=>m.payloadType.toString(10));let p=s.videoCodecs.filter(m=>{var _,E;return(_=m.rtpMap)===null||_===void 0?void 0:Ce(E=_.encodingName.toLowerCase()).call(E,u)});p.length===0&&(p=s.videoCodecs),g.attributes.payloads=p,g.attributes.extmaps=s.videoExtensions}g.media.mediaType==="audio"&&(g.media.fmts=s.audioCodecs.map(p=>p.payloadType.toString(10)),g.attributes.payloads=s.audioCodecs,g.attributes.extmaps=s.audioExtensions),h.mediaDescriptions[f]=this.mungMediaDesc(g)}this.sessionDesc=h,this.currentMidIndex=h.mediaDescriptions.length-1}toString(){return Dr.print(this.sessionDesc)}send(r,i,o){const{ssrcs:a,ssrcGroups:s}=Zu(i,this.cname),c=this.sessionDesc.mediaDescriptions.find(d=>r===De.VIDEO?d.media.mediaType==="video":d.media.mediaType==="audio"),l=a[0].attributes.label,u=a[0].attributes.mslabel;return c.attributes.ssrcs=c.attributes.ssrcs.concat(a),c.attributes.ssrcGroups=c.attributes.ssrcGroups.concat(s),{id:l,mslabel:u}}batchSend(r){return r.map(i=>{let{kind:o,ssrcMsg:a}=i;return this.send(o,a,void 0)})}stopSending(r){this.sessionDesc.mediaDescriptions.forEach(i=>{const o=[],a=[],s=[];i.attributes.ssrcs.forEach(c=>{Ce(r).call(r,c.attributes.label||"")?s.push(c):o.push(c)}),i.attributes.ssrcGroups.forEach(c=>{var l;Ce(l=s.map(u=>u.ssrcId)).call(l,c.ssrcIds[0])||a.push(c)}),i.attributes.ssrcs=o,i.attributes.ssrcGroups=a})}mute(r){const i=this.sessionDesc.mediaDescriptions.find(o=>o.attributes.mid===r);if(!i)throw new Error("mediaDescription not found with ".concat(r," in remote SDP when calling RemoteSDP.mute."));i.attributes.direction="inactive"}unmute(r){const i=this.sessionDesc.mediaDescriptions.find(o=>o.attributes.mid===r);if(!i)throw new Error("mediaDescription not found with ".concat(r," in remote SDP when calling RemoteSDP.unmute."));i.attributes.direction="sendonly"}receive(r,i,o){r.forEach((a,s)=>{const c=a._mediaStreamTrack,l=this.sessionDesc.mediaDescriptions.findIndex(d=>d.attributes.mid===c.kind),u=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[l],a);this.sessionDesc.mediaDescriptions[l]=u})}stopReceiving(r){}updateCandidates(r){r===Ao.TCP?this.candidates.forEach(i=>{this.candidates.findIndex(o=>o.transport==="tcp"&&o.connectionAddress===i.connectionAddress&&o.port===i.port)===-1&&this.candidates.push(YU(YU({},i),{},{foundation:"tcpcandidate",priority:Number(i.priority)-1+"",transport:"tcp",port:Number(i.port)+90+""}))}):this.candidates=this.candidates.filter(i=>i.transport!=="tcp");for(const i of this.sessionDesc.mediaDescriptions)i.attributes.candidates=this.candidates}restartICE(r){r=Yn(r),this.iceParameters=r,this.sessionDesc.mediaDescriptions.forEach(i=>{i.attributes.iceUfrag=r.iceUfrag,i.attributes.icePwd=r.icePwd})}predictReceivingMids(r){const i=[];for(let o=0;o<r;o++)i.push((this.currentMidIndex+o+1).toString(10));return i}mungRecvMediaDsec(r,i){const o=Yn(r);return Vf(o,i),SN(o,i),o}updateRecvMedia(r,i){const o=this.sessionDesc.mediaDescriptions.findIndex(a=>a.attributes.mid===r);if(o!==-1){const a=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[o],i);this.sessionDesc.mediaDescriptions[o]=a}}bumpMid(r){this.currentMidIndex+=r}updateTrackLabel(r,i,o){const a=this.sessionDesc.mediaDescriptions.find(c=>r===De.VIDEO?c.attributes.mid==="video":c.attributes.mid==="audio");if(a){const c=a.attributes.ssrcs.find(l=>l.attributes.label===i);var s;c&&(c.attributes.label=o,(s=c.attributes.msid)===null||s===void 0||s.replace(i,o))}}mungMediaDesc(r){const i=Yn(r);return _N(i),function(o){const a=o.attributes.extmaps.find(s=>s.extensionName==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01");a&&o.attributes.extmaps.splice(o.attributes.extmaps.indexOf(a),1),o.attributes.payloads.forEach(s=>{const c=s.rtcpFeedbacks.findIndex(l=>l.type==="transport-cc");c!==-1&&s.rtcpFeedbacks.splice(c,1)})}(i),i}getSSRC(r){for(const i of this.sessionDesc.mediaDescriptions)for(const o of i.attributes.ssrcs)if(o.attributes.label===r)return[o]}}(Wv(Wv({},t),{},{rtpCapabilities:t.rtpCapabilities.send,localCapabilities:this.localCapabilities,sdkCodec:this.store.codec}));const n=this.remoteSDP.toString();await this.peerConnection.setLocalDescription(this.initialOffer),await this.peerConnection.setRemoteDescription({type:"answer",sdp:n})}catch(n){throw new Q(k.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(n.toString()))}}async updateRemoteRTPCapabilities(t,n){throw new Q(k.NOT_SUPPORTED,"Planb mode does not support createDataChannels.")}getPreMedia(t){}send(t,n){var r=this;return Ms(function*(){const i=yield Dt(r.mutex.lock());try{if(!r.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");const o=t.map(h=>r.peerConnection.addTrack(h._mediaStreamTrack)),a=yield Dt(r.peerConnection.createOffer()),s=Dr.parse(a.sdp),c=t.map(h=>{const f=h._mediaStreamTrack,g=s.mediaDescriptions.find(p=>p.attributes.mid===f.kind);if(!g)throw new Error("Cannot extract ssrc from mediaDescription.");return function(p,m,_){const E=p.attributes.ssrcs.filter(C=>C.attributes.label===m),S=p.attributes.ssrcGroups;if(E.length===0)throw new Error("Cannot extract ssrc from plan-b SDP.");if(S&&E.length>1){const C=S.find(b=>b.ssrcIds.indexOf(E[0].ssrcId)!==-1);return C?[{ssrcId:C.ssrcIds[0],rtx:_?C.ssrcIds[1]:void 0}]:[{ssrcId:E[0].ssrcId}]}return[{ssrcId:E[0].ssrcId}]}(g,f.id,r.useRTX)});let l;try{l=yield c}catch(h){throw o.forEach(f=>{Gr()&&f.replaceTrack(null),r.peerConnection.removeTrack(f)}),h}const u=r.mungSendOfferSDP(a.sdp,t);r.remoteSDP.receive(t,n,l);const d=r.remoteSDP.toString();return yield Dt(r.peerConnection.setLocalDescription({type:"offer",sdp:u})),yield Dt(r.applySendEncodings(o,t)),yield Dt(r.peerConnection.setRemoteDescription({type:"answer",sdp:d})),t.map((h,f)=>{const g=h._mediaStreamTrack.id;return{localSSRC:c[f],id:g}})}catch(o){throw new Q(k.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(o.toString()))}finally{i()}})()}async stopSending(t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");const n=this.peerConnection.getSenders().filter(o=>{var a;return t.indexOf(((a=o.track)===null||a===void 0?void 0:a.id)||"")!==-1});if(n.length!==t.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.");n.map(o=>{Gr()&&o.replaceTrack(null),this.peerConnection.removeTrack(o)});const r=await this.peerConnection.createOffer();await this.peerConnection.setLocalDescription(r),this.remoteSDP.stopReceiving(t);const i=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"answer",sdp:i})}catch(n){throw new Q(k.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(n.toString()))}}async receive(t,n,r,i){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(t," before remoteSDP created."));const{id:o,mslabel:a}=this.remoteSDP.send(t,n,i),s=new _e((u,d)=>{const h=setTimeout(()=>{d(new Error("Cannot receive track, id: ".concat(o)))},1e4),f=g=>{const p=Tt();if((p.name==="Safari"&&Number(p.version)===11||Li())&&g.track.id!==o&&g.streams[0].id===a){var m;const _=g.streams[0].getTracks()[0];return(m=this.remoteSDP)===null||m===void 0||m.updateTrackLabel(t,o,g.track.id),this.peerConnection.removeEventListener("track",f),clearTimeout(h),void u(_)}if(g.track.id===o)return this.peerConnection.removeEventListener("track",f),clearTimeout(h),void u(g.track)};this.peerConnection.addEventListener("track",f)}),c=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:c});const l=await this.peerConnection.createAnswer();return await this.peerConnection.setLocalDescription(l),{track:await s,id:o}}catch(o){throw new Q(k.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(o.toString()))}}async stopReceiving(t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");this.remoteSDP.stopSending(t);const n=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:n});const r=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(r)}catch(n){throw new Q(k.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(n.toString()))}}async muteRemote(t){}async unmuteRemote(t){}async muteLocal(t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");const n=this.peerConnection.getSenders().filter(r=>{var i;return t.indexOf(((i=r.track)===null||i===void 0?void 0:i.id)||"")!==-1});if(n.length!==t.length)throw new Error("sender' length doesn't match mids' length.");n.map(r=>{if(Gr()&&r.track)r.track.enabled=!1;else{const i=r.getParameters();i.encodings.forEach(o=>o.active=!1),r.setParameters(i)}})}catch(n){throw new Q(k.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(n.toString()))}}async unmuteLocal(t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");const n=this.peerConnection.getSenders().filter(o=>{var a;return t.indexOf(((a=o.track)===null||a===void 0?void 0:a.id)||"")!==-1});if(n.length!==t.length)throw new Error("Senders' length doesn't match mids' length.");n.map(async o=>{if(Gr()&&o.track)o.track.enabled=!0;else{const a=o.getParameters();a.encodings.forEach(s=>s.active=!0),await o.setParameters(a)}});const r=await this.peerConnection.createOffer();await this.peerConnection.setLocalDescription(r);const i=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"answer",sdp:i})}catch(n){throw new Q(k.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(n.toString()))}}restartICE(t){var n=this;return Ms(function*(){const r=yield Dt(n.mutex.lock("From P2PConnection.restartICE"));try{if(!n.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");if(It().supportPCSetConfiguration){const c=n.peerConnection.getConfiguration(),l=t===Ao.RELAY?"relay":"all";c.iceTransportPolicy!==l&&(w.debug("[".concat(n.store.clientId,"] restartICE change iceTransportPolicy from [").concat(c.iceTransportPolicy,"] to [").concat(l,"]")),c.iceTransportPolicy=l,n.peerConnection.setConfiguration(c))}else if(t===Ao.RELAY)return;t!==Ao.RELAY&&n.remoteSDP.updateCandidates(t);const i=yield Dt(n.peerConnection.createOffer({iceRestart:!0}));if(!i.sdp)throw new Error("Cannot restartICE because restart offer SDP does not exist.");const o=Jl(i.sdp),{remoteIceParameters:a}=yield o.iceParameters;n.remoteSDP.restartICE(a);const s=n.remoteSDP.toString();yield Dt(n.peerConnection.setLocalDescription(i)),yield Dt(n.peerConnection.setRemoteDescription({type:"answer",sdp:s}))}catch(i){w.warning("[".concat(n.store.clientId,"] restart ICE failed, abort operation"),i)}finally{r()}})()}close(){var t;this.peerConnection.close(),(t=this.onConnectionStateChange)===null||t===void 0||t.call(this,"closed"),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.statsFilter.destroy()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(t){return this.statsFilter.getVideoIsReady(t)}async updateEncoderConfig(t,n){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");const r=await this.peerConnection.createOffer(),i=this.mungSendOfferSDP(r.sdp,[n]);this.remoteSDP.updateRecvMedia(n._mediaStreamTrack.kind,n);const o=this.remoteSDP.toString();await this.peerConnection.setLocalDescription({type:"offer",sdp:i}),await this.peerConnection.setRemoteDescription({type:"answer",sdp:o})}catch(r){throw new Q(k.EXCHANGE_SDP_FAILED,r.toString())}}async updateSendParameters(t,n){const r=this.peerConnection.getSenders().filter(i=>{var o;return((o=i.track)===null||o===void 0?void 0:o.id)===t});r.length===1&&await this.applySendEncodings(r,[n])}setStatsRemoteVideoIsReady(t,n){this.statsFilter.setVideoIsReady2(t,n)}async replaceTrack(t,n){const r=this.peerConnection.getSenders().find(i=>{var o;return((o=i.track)===null||o===void 0?void 0:o.id)===n});r&&await r.replaceTrack(t._mediaStreamTrack)}createDataChannels(t,n){throw new Q(k.NOT_SUPPORTED,"Planb mode does not support createDataChannels.")}stopDataChannels(t){throw new Q(k.NOT_SUPPORTED,"Planb mode does not support stopDataChannels.")}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var t;(t=this.onICEConnectionStateChange)===null||t===void 0||t.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var t;(t=this.onConnectionStateChange)===null||t===void 0||t.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidate=t=>{t.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,w.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},setTimeout(()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,w.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))},H("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(t){const n={iceServers:[],sdpSemantics:"plan-b"};return t.iceServers?n.iceServers=t.iceServers:t.turnServer&&t.turnServer.mode!=="off"&&(Fy(t.turnServer.servers)?n.iceServers=t.turnServer.servers:(n.iceServers&&n.iceServers.push(...Tm.turnServerConfigToIceServers(t.turnServer.servers)),H("USE_TURN_SERVER_OF_GATEWAY")&&n.iceServers&&t.turnServer.serversFromGateway&&n.iceServers.push(...Tm.turnServerConfigToIceServers(t.turnServer.serversFromGateway)),t.turnServer.servers.concat(t.turnServer.serversFromGateway||[]).forEach(r=>{r.forceturn&&(n.iceTransportPolicy="relay")}))),n}static turnServerConfigToIceServers(t){const n=[];return t.forEach(r=>{r.security?r.tcpport&&n.push({username:r.username,credential:r.password,credentialType:"password",urls:"turns:".concat(r.turnServerURL,":").concat(r.tcpport,"?transport=tcp")}):(r.udpport&&n.push({username:r.username,credential:r.password,credentialType:"password",urls:"turn:".concat(r.turnServerURL,":").concat(r.udpport,"?transport=udp")}),r.tcpport&&n.push({username:r.username,credential:r.password,credentialType:"password",urls:"turn:".concat(r.turnServerURL,":").concat(r.tcpport,"?transport=tcp")}))}),n}async updateRtpSenderEncodings(t,n){var r;if(n||(n=this.peerConnection.getSenders().find(l=>{var u;return((u=l.track)===null||u===void 0?void 0:u.id)===t._mediaStreamTrack.id})),!n)return w.warn("[".concat(t.getTrackId(),"] no rtpSender found}"));if(!It().supportSetRtpSenderParameters)return w.warn("Browser not support set rtp-sender parameters");const i={},o={};if(t instanceof hn)switch(t._optimizationMode){case"motion":i.degradationPreference="maintain-framerate";break;case"detail":i.degradationPreference="maintain-resolution";break;default:i.degradationPreference="balanced"}if(H("DSCP_TYPE")&&_u()){var a;const l=H("DSCP_TYPE");Ce(a=["very-low","low","medium","high"]).call(a,l)&&(o.networkPriority=l)}const s=n.getParameters(),c=(r=s.encodings)===null||r===void 0?void 0:r[0];c&&Object.assign(c,o),Object.assign(s,i),w.debug("[".concat(t.getTrackId(),"] updateRtpSenderEncodings: ").concat(JSON.stringify(s.encodings))),await n.setParameters(s)}async applySendEncodings(t,n){try{if(!It().supportSetRtpSenderParameters||t.length!==n.length)return;for(let r=0;r<t.length;r++){const i=t[r],o=n[r];i&&o&&await this.updateRtpSenderEncodings(o,i)}}catch{w.debug("[".concat(this.store.clientId,"] Apply RTPSendEncodings failed."))}}mungSendOfferSDP(t,n){const r=Dr.parse(t);return n.forEach((i,o)=>{const a=i._mediaStreamTrack,s=r.mediaDescriptions.find(c=>c.attributes.mid===a.kind);s&&Vf(s,i)}),Dr.print(r)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=t=>{var n;(n=this.onFirstAudioReceived)===null||n===void 0||n.call(this,t)},this.statsFilter.onFirstVideoReceived=t=>{var n;(n=this.onFirstVideoReceived)===null||n===void 0||n.call(this,t)},this.statsFilter.onFirstAudioDecoded=t=>{var n;(n=this.onFirstAudioDecoded)===null||n===void 0||n.call(this,t)},this.statsFilter.onFirstVideoDecoded=(t,n,r)=>{var i;(i=this.onFirstVideoDecoded)===null||i===void 0||i.call(this,t,n,r)},this.statsFilter.onSelectedLocalCandidateChanged=(t,n)=>{var r;(r=this.onSelectedLocalCandidateChanged)===null||r===void 0||r.call(this,t,n)},this.statsFilter.onSelectedRemoteCandidateChanged=(t,n)=>{var r;(r=this.onSelectedRemoteCandidateChanged)===null||r===void 0||r.call(this,t,n)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0}async batchReceive(t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.batchReceive before remoteSDP created.");const n=this.remoteSDP.batchSend(t).map((o,a)=>{let{id:s,mslabel:c}=o;const{kind:l}=t[a];return new _e((u,d)=>{const h=setTimeout(()=>{d(new Error("Cannot receive track, id: ".concat(s)))},1e4),f=g=>{const p=Tt();if(p.name==="Safari"&&Number(p.version)===11&&g.track.id!==s&&g.streams[0].id===c){var m;const _=g.streams[0].getTracks()[0];return(m=this.remoteSDP)===null||m===void 0||m.updateTrackLabel(l,s,g.track.id),this.peerConnection.removeEventListener("track",f),clearTimeout(h),void u({track:_,id:s})}if(g.track.id===s)return this.peerConnection.removeEventListener("track",f),clearTimeout(h),void u({track:g.track,id:s})};this.peerConnection.addEventListener("track",f)})}),r=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:r});const i=await this.peerConnection.createAnswer();return await this.peerConnection.setLocalDescription(i),await _e.all(n)}catch(n){throw new Q(k.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(n.toString()))}}async getRemoteSSRC(t){if(!this.remoteSDP)return;const n=this.remoteSDP.getSSRC(t);return n==null?void 0:n[0].ssrcId}setConfiguration(t){if(It().supportPCSetConfiguration){const n=Tm.resolvePCConfiguration(t);this.peerConnection.setConfiguration(n)}}},Ae(nn.prototype,"connect",[oa],Object.getOwnPropertyDescriptor(nn.prototype,"connect"),nn.prototype),Ae(nn.prototype,"stopSending",[oa],Object.getOwnPropertyDescriptor(nn.prototype,"stopSending"),nn.prototype),Ae(nn.prototype,"receive",[oa],Object.getOwnPropertyDescriptor(nn.prototype,"receive"),nn.prototype),Ae(nn.prototype,"stopReceiving",[oa],Object.getOwnPropertyDescriptor(nn.prototype,"stopReceiving"),nn.prototype),Ae(nn.prototype,"muteRemote",[oa],Object.getOwnPropertyDescriptor(nn.prototype,"muteRemote"),nn.prototype),Ae(nn.prototype,"unmuteRemote",[oa],Object.getOwnPropertyDescriptor(nn.prototype,"unmuteRemote"),nn.prototype),Ae(nn.prototype,"muteLocal",[oa],Object.getOwnPropertyDescriptor(nn.prototype,"muteLocal"),nn.prototype),Ae(nn.prototype,"unmuteLocal",[oa],Object.getOwnPropertyDescriptor(nn.prototype,"unmuteLocal"),nn.prototype),Ae(nn.prototype,"close",[oa],Object.getOwnPropertyDescriptor(nn.prototype,"close"),nn.prototype),Ae(nn.prototype,"updateEncoderConfig",[oa],Object.getOwnPropertyDescriptor(nn.prototype,"updateEncoderConfig"),nn.prototype),Ae(nn.prototype,"updateSendParameters",[oa],Object.getOwnPropertyDescriptor(nn.prototype,"updateSendParameters"),nn.prototype),Ae(nn.prototype,"replaceTrack",[oa],Object.getOwnPropertyDescriptor(nn.prototype,"replaceTrack"),nn.prototype),Ae(nn.prototype,"getRemoteSSRC",[oa],Object.getOwnPropertyDescriptor(nn.prototype,"getRemoteSSRC"),nn.prototype),nn);function oa(e,t,n){const r=e[t];if(typeof r!="function")throw new Error("Cannot use mutex on object property.");return n.value=async function(){const i=this.mutex,o=await i.lock("Locking from P2PConnection.".concat(t));try{for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return await r.apply(this,s)}finally{o()}},n}function JU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function xl(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?JU(Object(n),!0).forEach(function(r){P(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JU(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}const qp="9",QU=4e4;class Gfe{get localCapabilities(){return Yn(this._localCapabilities)}get rtpCapabilities(){return Yn(this._rtpCapabilities)}get candidates(){return Yn(this._candidates)}get iceParameters(){return Yn(this._iceParameters)}get dtlsParameters(){return Yn(this._dtlsParameters)}constructor(t){P(this,"sessionDesc",void 0),P(this,"_localCapabilities",void 0),P(this,"_rtpCapabilities",void 0),P(this,"_candidates",void 0),P(this,"_iceParameters",void 0),P(this,"_dtlsParameters",void 0),P(this,"setup",void 0),P(this,"currentMidIndex",void 0),P(this,"cname",void 0),P(this,"firefoxSsrcMidMap",new Map),t=Yn(t);const{iceParameters:n,dtlsParameters:r,candidates:i,rtpCapabilities:o,setup:a,localCapabilities:s,cname:c}=t;this._rtpCapabilities=o,this._candidates=i,this._iceParameters=n,this._dtlsParameters=r,this._localCapabilities=s,this.setup=a,this.cname=c,this.sessionDesc=this.updateRemoteRTPCapabilities(o),this.currentMidIndex=this.sessionDesc.mediaDescriptions.length-1}preloadRemoteMedia(t){const n=this.candidates,r=this.dtlsParameters,i=this.iceParameters,o=this.rtpCapabilities.send;let a=this.sessionDesc.mediaDescriptions.length-1;for(let s=1;s<t;s++){const c=2*s+2e4,l=2*s+QU,{ssrcs:u,ssrcGroups:d}=Zu([{ssrcId:c}],this.cname),{ssrcs:h,ssrcGroups:f}=Zu([{ssrcId:l,rtx:H("USE_SUB_RTX")?l+1:void 0}],this.cname);this.sessionDesc.mediaDescriptions.push({media:{mediaType:"video",port:qp,protos:["UDP","TLS","RTP","SAVPF"],fmts:o.videoCodecs.map(g=>g.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:i.iceUfrag,icePwd:i.icePwd,unrecognized:[],candidates:n,extmaps:o.videoExtensions,fingerprints:r.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:h,ssrcGroups:f,rtcpFeedbackWildcards:[],payloads:o.videoCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(++a)}}),this.sessionDesc.mediaDescriptions.push({media:{mediaType:"audio",port:qp,protos:["UDP","TLS","RTP","SAVPF"],fmts:o.audioCodecs.map(g=>g.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:i.iceUfrag,icePwd:i.icePwd,unrecognized:[],candidates:n,extmaps:o.audioExtensions,fingerprints:r.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:u,ssrcGroups:d,rtcpFeedbackWildcards:[],payloads:o.audioCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(++a)}}),this.currentMidIndex+=2}this.updateBundleMids()}toString(){return Dr.print(this.sessionDesc)}send(t,n,r,i){const{ssrcs:o,ssrcGroups:a}=Zu(n,this.cname,H("SYNC_GROUP")?r:void 0),s=this.findPreloadMediaDesc(o);if(s){if(Fn()&&this.firefoxSsrcMidMap.set(o[0].ssrcId,s.attributes.mid),i&&(i.twcc||i.remb)){const c=this.sessionDesc.mediaDescriptions.indexOf(s);return this.sessionDesc.mediaDescriptions[c]=this.mungSendMediaDesc(s,i),{mid:s.attributes.mid,needExchangeSDP:!0}}return{mid:s.attributes.mid,needExchangeSDP:!1}}{const c=this.findAvailableMediaIndex(t,o);let l;return c===-1||c===1&&(Gr()||function(){const u=Tt();return!(u.name!==Kt.CHROME||!u.osVersion)&&Number(u.version)<=90}())||c===0&&H("USE_SUB_RTX")||CM()?(l=this.createOrRecycleSendMedia(t,o,a,"sendonly",i),this.updateBundleMids()):(l=Yn(this.sessionDesc.mediaDescriptions[c]),l.attributes.direction="sendonly",l.attributes.ssrcs=o,l.attributes.ssrcGroups=a,this.sessionDesc.mediaDescriptions[c]=this.mungSendMediaDesc(l,i)),Fn()&&this.firefoxSsrcMidMap.set(o[0].ssrcId,l.attributes.mid),{mid:l.attributes.mid,needExchangeSDP:!0}}}sendDataChannel(){const{mediaDesc:t,needExchangeSDP:n}=this.createOrRecycleDataChannel();return this.updateBundleMids(),{mid:t.attributes.mid,needExchangeSDP:n}}batchSend(t){const n=t.map(o=>{let{kind:a,ssrcMsg:s,mslabel:c}=o;return this.send(a,s,c)}),r=[];let i=!1;return n.forEach(o=>{let{mid:a,needExchangeSDP:s}=o;s&&(i=!0),r.push(a)}),{mids:r,needExchangeSDP:i}}stopSending(t){const n=this.sessionDesc.mediaDescriptions.filter(r=>r.attributes.mid&&t.indexOf(r.attributes.mid)!==-1);if(n.length!==t.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.stopSending.");n.forEach(r=>{r.attributes.mid==="0"||Fn()||CM()?r.attributes.ssrcs=[]:(r.attributes.ssrcs=[],r.attributes.direction="inactive",r.media.port="0")}),this.updateBundleMids()}mute(t){const n=this.sessionDesc.mediaDescriptions.find(r=>r.attributes.mid===t);if(!n)throw new Error("mediaDescription not found with ".concat(t," in remote SDP when calling RemoteSDP.mute."));n.attributes.direction="inactive"}unmute(t){const n=this.sessionDesc.mediaDescriptions.find(r=>r.attributes.mid===t);if(!n)throw new Error("mediaDescription not found with ".concat(t," in remote SDP when calling RemoteSDP.unmute."));n.attributes.direction="sendonly"}muteRemote(t){const n=this.sessionDesc.mediaDescriptions.filter(r=>Ce(t).call(t,r.attributes.mid||""));if(n.length!==t.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");n.forEach(r=>{r.attributes.direction="inactive"})}unmuteRemote(t){const n=this.sessionDesc.mediaDescriptions.filter(r=>Ce(t).call(t,r.attributes.mid||""));if(n.length!==t.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");n.forEach(r=>{r.attributes.direction="recvonly"})}receive(t,n,r,i){t.forEach((o,a)=>{this.createOrRecycleRecvMedia(o,[],"recvonly",n,r,i[a])}),this.updateBundleMids()}stopReceiving(t){const n=this.sessionDesc.mediaDescriptions.filter(r=>t.indexOf(r.attributes.mid)!==-1);if(n.length!==t.length)throw new Error("MediaDescriptions' length doesn't match mids's length when calling RemoteSDP.receive.");n.forEach(r=>{r.media.port="0",r.attributes.direction="inactive"}),this.updateBundleMids()}updateRemoteRTPCapabilities(t){const n=this.sessionDesc||Dr.parse(`v=0
o=- 0 0 IN IP4 127.0.0.1
s=AgoraGateway
t=0 0
a=group:BUNDLE 0 1
a=msid-semantic: WMS
a=ice-lite
m=video 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendonly
a=rtcp-mux
a=rtcp-rsize
a=mid:0
m=audio 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendonly
a=rtcp-mux
a=rtcp-rsize
a=mid:1
`);this._rtpCapabilities=t;const r=this.rtpCapabilities.send,i=this.localCapabilities.send;for(const o of n.mediaDescriptions){if(o.attributes.iceUfrag=this._iceParameters.iceUfrag,o.attributes.icePwd=this._iceParameters.icePwd,o.attributes.fingerprints=this._dtlsParameters.fingerprints,o.attributes.candidates=this._candidates,o.attributes.setup=this.setup,o.media.mediaType==="application"&&(o.attributes.sctpPort="5000"),o.media.mediaType==="video"){if(r.videoCodecs.length===0){const a=i.videoCodecs.filter(s=>{var c,l;return(c=s.rtpMap)===null||c===void 0?void 0:Ce(l=c.encodingName.toLowerCase()).call(l,"vp8")})||[i.videoCodecs[0]];o.media.fmts=a.map(s=>s.payloadType.toString(10)),o.attributes.payloads=a,o.attributes.extmaps=[]}else if(o.media.fmts=r.videoCodecs.map(a=>a.payloadType.toString(10)),o.attributes.payloads=r.videoCodecs,o.attributes.extmaps=r.videoExtensions,H("PRELOAD_MEDIA_COUNT")>0){const{ssrcs:a,ssrcGroups:s}=Zu([{ssrcId:QU,rtx:H("USE_SUB_RTX")?40001:void 0}],this.cname);o.attributes.ssrcs=a,o.attributes.ssrcGroups=s}}if(o.media.mediaType==="audio"){if(r.audioCodecs.length===0){const a=i.audioCodecs.filter(s=>{var c,l;return(c=s.rtpMap)===null||c===void 0?void 0:Ce(l=c.encodingName.toLowerCase()).call(l,"opus")})||[i.audioCodecs[0]];o.media.fmts=a.map(s=>s.payloadType.toString(10)),o.attributes.payloads=a,o.attributes.extmaps=[]}else if(o.media.fmts=r.audioCodecs.map(a=>a.payloadType.toString(10)),o.attributes.payloads=r.audioCodecs,o.attributes.extmaps=r.audioExtensions,jf(o),H("PRELOAD_MEDIA_COUNT")>0){const{ssrcs:a,ssrcGroups:s}=Zu([{ssrcId:2e4}],this.cname);o.attributes.ssrcs=a,o.attributes.ssrcGroups=s}}}return this.sessionDesc=n,this.currentMidIndex=n.mediaDescriptions.length-1,this.sessionDesc}updateCandidates(t){const n=this._candidates.filter(r=>r.transport==="udp");if(t===Ao.TCP){if(n.length===0)return;if(H("TCP_CANDIDATE_ONLY")){const r=this._candidates.filter(i=>i.transport==="tcp");n.forEach(i=>{r.findIndex(o=>o.connectionAddress===i.connectionAddress)===-1&&r.push(xl(xl({},i),{},{foundation:"tcpcandidate",priority:Number(i.priority)-1+"",transport:"tcp",port:Number(i.port)+90+""}))}),this._candidates=r}else{const r=[];n.forEach(i=>{r.push(xl(xl({},i),{},{foundation:"tcpcandidate",priority:Number(i.priority)-1+"",transport:"tcp",port:Number(i.port)+90+""}))}),this._candidates=[...n,...r]}}else if(t===Ao.RELAY){if(n.length!==0)return;{const r=this._candidates.filter(i=>i.transport==="tcp");r.forEach(i=>{n.push(xl(xl({},i),{},{foundation:"udpcandidate",priority:Number(i.priority)+1+"",transport:"udp",port:Number(i.port)-90+""}))}),this._candidates=[...n,...r]}}else n.length===0?(this._candidates.filter(r=>r.transport==="tcp").forEach(r=>{n.push(xl(xl({},r),{},{foundation:"udpcandidate",priority:Number(r.priority)+1+"",transport:"udp",port:Number(r.port)-90+""}))}),this._candidates=n):this._candidates=this._candidates.filter(r=>r.transport!=="tcp");for(const r of this.sessionDesc.mediaDescriptions)r.attributes.candidates=this.candidates}restartICE(t){t=Yn(t),this._iceParameters=t,this.sessionDesc.mediaDescriptions.forEach(n=>{n.attributes.iceUfrag=t.iceUfrag,n.attributes.icePwd=t.icePwd})}predictReceivingMids(t){const n=[];for(let r=0;r<t;r++)n.push((this.currentMidIndex+r+1).toString(10));return n}findAvailableMediaIndex(t,n){return this.sessionDesc.mediaDescriptions.findIndex(r=>{const i=r.media.mediaType===t&&r.media.port!=="0"&&(r.attributes.direction==="sendonly"||r.attributes.direction==="sendrecv")&&r.attributes.ssrcs.length===0;if(Fn()){if(i){const o=this.firefoxSsrcMidMap.get(n[0].ssrcId);return!(o||r.attributes.mid!=="0"&&r.attributes.mid!=="1")||!(!o||o!==r.attributes.mid)}return!1}return i})}createOrRecycleDataChannel(){for(const r of this.sessionDesc.mediaDescriptions)if(r.media.mediaType==="application")return{mediaDesc:r,needExchangeSDP:!1};this.currentMidIndex+=1;const t="".concat(this.currentMidIndex),n={media:{mediaType:"application",port:qp,protos:["UDP","DTLS","SCTP"],fmts:["webrtc-datachannel"]},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:[],fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:[],ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:[],rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,mid:"".concat(t),sctpPort:"5000"}};return this.sessionDesc.mediaDescriptions.push(n),{mediaDesc:n,needExchangeSDP:!0}}createOrRecycleRecvMedia(t,n,r,i,o,a){const s=t._mediaStreamTrack.kind,c=this.rtpCapabilities.recv,l=Vm(s,c,this.localCapabilities.send,s===De.VIDEO?i:o),u=s===De.VIDEO?c.videoExtensions:c.audioExtensions;this.currentMidIndex+=1;const d="".concat(this.currentMidIndex);let h={media:{mediaType:s,port:qp,protos:["UDP","TLS","RTP","SAVPF"],fmts:l.map(g=>g.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:u,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:n,ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:l,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:r,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(d)}};h=this.mungRecvMediaDsec(h,t,a);const f=this.findFirstClosedMedia(s);if(f){const g=this.sessionDesc.mediaDescriptions.indexOf(f);this.sessionDesc.mediaDescriptions[g]=h}else this.sessionDesc.mediaDescriptions.push(h);return h}updateRemoteCodec(t,n,r){const i=[...new Set(this._rtpCapabilities.recv.videoCodecs.map(h=>h.rtpMap&&h.rtpMap.encodingName.toLowerCase()||"").filter(h=>{var f;return Ce(f=Object.keys($y)).call(f,h)}))],o=new Set(n);if(i.every(h=>o.has(h)))return w.debug("codecs has not changed, no need to updateRemoteCodec, codecs: ".concat(n)),!1;const a=this._rtpCapabilities.recv.videoCodecs.filter(h=>n.some(f=>{var g;return Ce(g=h.rtpMap&&h.rtpMap.encodingName.toLowerCase()||"").call(g,f)}));if(a.length===0)return w.debug("updateRemoteCodec failed, because cannot find matched codec, remoteCapabilities codecs: ".concat(i," codecs: ").concat(n)),!1;const s=[...new Set(a.map(h=>h.rtpMap&&h.rtpMap.encodingName.toLowerCase()||""))];let c;if(w.debug("updateRemoteCodec, from ".concat(i," to ").concat(s)),t.length===0)c=this.sessionDesc.mediaDescriptions.filter(h=>h.media.mediaType==="video"&&h.attributes.direction==="recvonly");else if(c=this.sessionDesc.mediaDescriptions.filter(h=>h.attributes.mid&&Ce(t).call(t,h.attributes.mid)&&h.attributes.direction==="recvonly"),c.length!==t.length)return w.debug("updateRemoteCodec failed, because cannot find mids, mids: ".concat(t,", codecs: ").concat(n)),!1;if(H("USE_PUB_RTX")||H("USE_SUB_RTX")){const h=yN(a,this.rtpCapabilities.recv.videoCodecs);a.push(...h)}this._rtpCapabilities.recv.videoCodecs=a;const l=this.localCapabilities.send,u=this.rtpCapabilities.recv,d=Vm(De.VIDEO,u,l,r);return c.forEach(h=>{const f=d.map(g=>g.payloadType.toString(10));w.debug("updateRemoteCodec mid: ".concat(h.attributes.mid,", from ").concat(h.attributes.payloads," to ").concat(d)),h.attributes.payloads=d,h.media.fmts=f}),!0}createOrRecycleSendMedia(t,n,r,i,o){const a=this.rtpCapabilities.send,s=t===De.VIDEO?a.videoCodecs:a.audioCodecs,c=t===De.VIDEO?a.videoExtensions:a.audioExtensions;this.currentMidIndex+=1;const l="".concat(this.currentMidIndex);let u={media:{mediaType:t,port:qp,protos:["UDP","TLS","RTP","SAVPF"],fmts:s.map(h=>h.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:c,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:n,ssrcGroups:r,rtcpFeedbackWildcards:[],payloads:s,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:i,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(l)}};u=this.mungSendMediaDesc(u,o);const d=this.findFirstClosedMedia(t);if(d){const h=this.sessionDesc.mediaDescriptions.indexOf(d);this.sessionDesc.mediaDescriptions[h]=u}else this.sessionDesc.mediaDescriptions.push(u);return u}updateBundleMids(){this.sessionDesc.attributes.groups[0].identificationTag=this.sessionDesc.mediaDescriptions.filter(t=>t.media.port!=="0").map(t=>t.attributes.mid)}mungRecvMediaDsec(t,n,r){const i=Yn(t);return _N(i),Vf(i,n),SN(i,n),W9(i),sS(i,r,this.localCapabilities.send),i}mungSendMediaDesc(t,n){const r=Yn(t);return sS(r,n,this.localCapabilities.recv),jf(r),r}updateRecvMedia(t,n){const r=this.sessionDesc.mediaDescriptions.findIndex(i=>i.attributes.mid===t);if(r!==-1){const i=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[r],n);this.sessionDesc.mediaDescriptions[r]=i}}bumpMid(t){this.currentMidIndex+=t}findFirstClosedMedia(t){return this.sessionDesc.mediaDescriptions.find(n=>Fn()?n.media.port==="0"&&n.media.mediaType===t:n.media.port==="0")}findPreloadMediaDesc(t){return this.sessionDesc.mediaDescriptions.find(n=>{var r;return((r=n.attributes)===null||r===void 0||(r=r.ssrcs[0])===null||r===void 0?void 0:r.ssrcId)===t[0].ssrcId})}getSSRC(t){var n;return(n=this.sessionDesc.mediaDescriptions.find(r=>r.attributes.mid===t))===null||n===void 0?void 0:n.attributes.ssrcs}}function ZU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Yc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ZU(Object(n),!0).forEach(function(r){P(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ZU(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}let jm=function(e){return e.BANDWIDTH="bandwidth",e.CPU="cpu",e.NONE="none",e.OTHER="other",e}({});var bf=function(e){return e[e.DOWN=0]="DOWN",e[e.UP=1]="UP",e}(bf||{});const lS=new Map;function e3(e,t,n,r){let{scale:i}=e;if(i===0&&r===bf.UP||i>=t.length-1&&r===bf.DOWN)return e;let o=Yc(Yc({},e),{},{scale:r===bf.DOWN?++i:--i});switch(n){case"maintain-framerate":o=Yc(Yc({},o),t[i].motion);break;case"maintain-resolution":o=Yc(Yc({},o),t[i].detail);break;case"balanced":o=Yc(Yc({},o),t[i].balanced)}return o}function lz(e,t){if(t){const n={overUse:0,underUse:0,adaptationList:uz(t)};lS.set(e,n)}else lS.delete(e)}function uz(e){const t=Yc({},e),{bitrateMax:n,frameRate:r,scaleResolutionDownBy:i,bitrateMin:o}=t,{MIN_FRAME_RATE:a,MAX_THRESHOLD_FRAMERATE:s,MAX_SCALE:c,BITRATE_MIN_THRESHOLD:l,BITRATE_MAX_THRESHOLD:u,BWE_SCALE_UP_THRESHOLD:d,BWE_SCALE_DOWN_THRESHOLD:h,PERF_SCALE_DOWN_THRESHOLD:f,PERF_SCALE_UP_THRESHOLD:g,BALANCE_BITRATE_FACTOR:p,BALANCE_FRAMERATE_FACTOR:m,BALANCE_RESOLUTION_FACTOR:_,MOTION_RESOLUTION_FACTOR:E,MOTION_BITRATE_FACTOR:S,DETAIL_FRAMERATE_FACTOR:C,DETAIL_BITRATE_FACTOR:b}=cN,T=Math.min(t.frameRate,s),R=[{scale:0,threshold:{bwe_down:Math.round(Math.pow(h,1)*n),bwe_up:n,fps_down:Math.round(Math.pow(f,1)*T),fps_up:r},balanced:{scaleResolutionDownBy:1,frameRate:r,bitrateMax:n,bitrateMin:o},motion:{scaleResolutionDownBy:1,frameRate:r,bitrateMax:n,bitrateMin:o},detail:{scaleResolutionDownBy:1,frameRate:r,bitrateMax:n,bitrateMin:o}}];for(let A=1;A<=c;A++){const O={bwe_up:Math.round(Math.pow(d,A)*n),bwe_down:Math.round(Math.pow(h,A+1)*n),fps_up:Math.round(Math.pow(g,A)*T),fps_down:Math.round(Math.pow(f,A+1)*T)},x={scaleResolutionDownBy:i/Math.pow(_,A),frameRate:Math.max(Math.round(Math.pow(m,A)*r),a),bitrateMax:Math.max(Math.round(Math.pow(p,A)*n),u),bitrateMin:Math.max(Math.round(Math.pow(p,A)*o),l)},M={scaleResolutionDownBy:i/Math.pow(E,A),frameRate:r,bitrateMax:Math.max(Math.round(Math.pow(S,A)*n),u),bitrateMin:Math.max(Math.round(Math.pow(S,A)*o),l)},$={scaleResolutionDownBy:1,frameRate:Math.max(Math.round(Math.pow(C,A)*r),a),bitrateMax:Math.max(Math.round(Math.pow(b,A)*n),u),bitrateMin:Math.max(Math.round(Math.pow(b,A)*o),l)};R.push({scale:A,threshold:O,balanced:x,motion:M,detail:$})}return R}function Kfe(e,t,n,r,i,o){const a=lS.get(e)||{overUse:0,underUse:0,adaptationList:uz(i)},{adaptationList:s}=a;lS.set(e,a);const{OVERUSE_TIMES_THRESHOLD:c,UNDERUSE_TIMES_THRESHOLD:l}=cN,{scale:u}=r;let d,h;return typeof t=="number"&&t>0&&function(f,g,p,m){if(g>=p.length)return!1;let{threshold:{fps_down:_}}=p[g];return H("FORCE_AG_HIGH_FRAMERATE")&&m==="maintain-framerate"&&(_=p[0].threshold.fps_down),f<_}(t,u,s,o)&&(a.overUse++,h=jm.CPU,a.overUse>c)||typeof n=="number"&&n>0&&function(f,g,p){if(g>=p.length)return!1;const{threshold:{bwe_down:m}}=p[g];return f<m}(n,u,s)&&(a.overUse++,h=jm.BANDWIDTH,a.overUse>c)?(a.overUse=0,a.underUse=0,d=e3(r,s,o,bf.DOWN),[d,h]):(typeof t=="number"&&t>0&&typeof n=="number"&&n>0&&function(f,g,p,m){if(g===0)return;let{threshold:{fps_up:_}}=p[g];return H("FORCE_AG_HIGH_FRAMERATE")&&m==="maintain-framerate"&&(_=p[1].threshold.fps_up),f>_}(t,u,s,o)&&function(f,g,p){if(g===0)return;const{threshold:{bwe_up:m}}=p[g];return f>m}(n,u,s)&&(a.underUse++,a.underUse>l&&(a.overUse=0,a.underUse=0,d=e3(r,s,o,bf.UP),d.scale===0&&(h=jm.NONE))),[d,h])}function t3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function wT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?t3(Object(n),!0).forEach(function(r){P(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):t3(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function qfe(e){var t;return!!H("ENABLE_AG_ADAPTATION")&&!!(e instanceof eA||Ce(t=e._hints).call(t,gn.CUSTOM_TRACK))&&(!!H("FORCE_SUPPORT_AG_ADAPTATION")||!!(function(n){const r=Tt();if(r.os!==yr.IOS||!r.osVersion)return!1;const i=r.osVersion.split(".");return Number(i[0])>=n}(14)&&j7(17,4,!0)||V7(14)&&H7(17,4,!0)))}const uS=new Map;function Gv(e,t){const n=uS.get(e);if(n){const{timer:r}=n;window.clearTimeout(r),uS.delete(e)}t.qualityLimitationReason=jm.NONE,lz(e)}var _t;function n3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ic(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?n3(Object(n),!0).forEach(function(r){P(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):n3(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}let Ss=(_t=class Rm extends o9{get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get dtlsTransportState(){var t,n;return(t=(n=this.peerConnection.getReceivers()[0])===null||n===void 0||(n=n.transport)===null||n===void 0?void 0:n.state)!==null&&t!==void 0?t:null}get localCodecs(){return[...new Set(this.localCapabilities&&this.localCapabilities.send.videoCodecs.map(t=>t.rtpMap&&t.rtpMap.encodingName.toLowerCase()||"").filter(t=>{var n;return Ce(n=Object.keys($y)).call(n,t)}))]}constructor(t,n){super(t,n),P(this,"store",void 0),P(this,"peerConnection",void 0),P(this,"id",cn(5,"connection-")),P(this,"remoteSDP",void 0),P(this,"initialOffer",void 0),P(this,"transportEventReceiver",void 0),P(this,"statsFilter",void 0),P(this,"extension",{useXR:H("USE_XR")}),P(this,"localCapabilities",void 0),P(this,"remoteCodecs",void 0),P(this,"localCandidateCount",0),P(this,"allCandidatesReceived",!1),P(this,"isPreallocation",!1),P(this,"preSSRCMap",new Map),P(this,"dataStreamChannelMap",new Map),P(this,"establishPromise",void 0),P(this,"recoveredDataChannelIds",[]),P(this,"currentDataChannelId",1),P(this,"mutex",new ri("P2PConnection-mutex")),P(this,"qualityLimitationReason",jm.NONE),this.store=n,this.peerConnection=new RTCPeerConnection(Rm.resolvePCConfiguration(t),{optional:[{googDscp:!0}]}),this.statsFilter=IN(this.peerConnection,H("STATS_UPDATE_INTERVAL"),void 0,Fn()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1,this.establishPromise=this.establish()}getPreMedia(t){const n=this.preSSRCMap.get(t);if(n!==void 0){const r=this.peerConnection.getTransceivers().find(i=>i.mid===n);if(r)return{transceiver:r,track:r.receiver.track,id:n}}}async updateRemoteRTPCapabilities(t,n){if(this.remoteCodecs=n,!this.remoteSDP)return void w.debug("[P2PConnection] cannot updateRemoteRTPCapabilities before remote SDP created, local codecs: ".concat(this.localCodecs,", codecs: ").concat(n));if(this.remoteSDP.updateRemoteCodec(t,n,this.store.codec)){const r=await this.peerConnection.createOffer(),i=this.logSDPExchange(r.sdp||"","offer","local","muteLocal");await this.peerConnection.setLocalDescription(r);const o=this.remoteSDP.toString();i==null||i(o),await this.peerConnection.setRemoteDescription({type:"answer",sdp:o})}else w.debug("[P2PConnection] updateRemoteRTPCapabilities no need to exchange SDP.")}async establish(){try{this.peerConnection.addTransceiver("video",{direction:"recvonly"}),this.peerConnection.addTransceiver("audio",{direction:"recvonly"});const t=await this.peerConnection.createOffer();if(!t.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const n=Jl(t.sdp),r=await K9({filterRTX:!H("USE_PUB_RTX")&&!H("USE_SUB_RTX"),filterVideoFec:H("FILTER_VIDEO_FEC"),filterAudioFec:H("FILTER_AUDIO_FEC"),filterVideoCodec:H("FILTER_VIDEO_CODEC")},this.extension);return this.localCapabilities=cS(r),this.initialOffer=t,ic(ic({},n),{},{rtpCapabilities:r,offerSDP:t.sdp})}catch(t){throw new Q(k.GET_LOCAL_CONNECTION_PARAMS_FAILED,t.toString())}}async connect(t){try{if(!this.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");this.remoteSDP=new Gfe(ic(ic({},t),{},{localCapabilities:this.localCapabilities})),t.preallocation&&(this.isPreallocation=!0),Array.isArray(this.remoteCodecs)&&this.remoteCodecs.length>0&&this.remoteSDP.updateRemoteCodec([],this.remoteCodecs,this.store.codec);const n=this.remoteSDP.toString(),r=q9(this.initialOffer.sdp,this.extension),i=this.logSDPExchange(r||"","offer","local","connect");this.store.descriptionStart(),await this.peerConnection.setLocalDescription({type:"offer",sdp:r}),i==null||i(n),await this.peerConnection.setRemoteDescription({type:"answer",sdp:n});const o=this.peerConnection.getTransceivers()[0];if(o!=null&&o.receiver&&this.tryBindTransportEvents(o.receiver),H("PRELOAD_MEDIA_COUNT")>0){this.remoteSDP.preloadRemoteMedia(H("PRELOAD_MEDIA_COUNT"));const s=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:s});const c=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(c)}const{preSSRCs:a}=t;if(Array.isArray(a)&&a.length>0){const{mids:s}=this.remoteSDP.batchSend(a.map(c=>({kind:c.kind,ssrcMsg:[{ssrcId:c.ssrcId,rtx:c.rtx}],mslabel:c.mslabel})));s.forEach((c,l)=>{this.preSSRCMap.set(a[l].ssrcId,c)}),await Vv(this.peerConnection,this.remoteSDP,this.extension),w.debug("[".concat(this.store.clientId,"] [P2PConnection] pre-batchReceive exchange SDP."))}}catch(n){throw new Q(k.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(n.toString()))}}async updateRemoteConnect(t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.updateRemoteConnect before remote SDP created");const{rtpCapabilities:n}=t;this.remoteSDP.updateRemoteRTPCapabilities(n),Array.isArray(this.remoteCodecs)&&this.remoteCodecs.length>0&&this.remoteSDP.updateRemoteCodec([],this.remoteCodecs,this.store.codec);const{preSSRCs:r}=t;if(Array.isArray(r)&&r.length>0){const{mids:i}=this.remoteSDP.batchSend(r.map(o=>Object.assign({},{kind:o.kind,ssrcMsg:[{ssrcId:o.ssrcId,rtx:o.rtx}],mslabel:o.mslabel})));i.forEach((o,a)=>{this.preSSRCMap.set(r[a].ssrcId,o)})}await Vv(this.peerConnection,this.remoteSDP,this.extension),w.debug("[P2PConnection] updateRemoteRTPCapabilities by exchanging SDP.")}catch(n){throw new Q(k.EXCHANGE_SDP_FAILED,"P2PConnection.updateRemoteConnect failed; ".concat(n.toString()))}}send(t,n,r){var i=this;return Ms(function*(){const o=yield Dt(i.mutex.lock("From P2PConnection.send"));try{if(!i.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");const a=[];t.forEach(p=>{const m=i.peerConnection.addTransceiver(p._mediaStreamTrack,{direction:"sendonly"});a.push(m),p._updateRtpTransceiver(m)}),Fn()&&H("SIMULCAST")===!0&&(yield Dt(i.applySimulcastForFirefox(a,t)));const s=yield Dt(i.peerConnection.createOffer()),c=i.remoteSDP.predictReceivingMids(t.length),l=i.mungSendOfferSDP(s.sdp,t,c),u=Dr.parse(l),d=c.map(p=>{const m=u.mediaDescriptions.find(_=>_.attributes.mid===p);if(!m)throw new Error("Cannot extract ssrc from mediaDescription.");return H9(m,H("USE_PUB_RTX"))});let h;try{h=yield d}catch(p){h=[],i.remoteSDP.receive(t,n,r,h);const m=i.remoteSDP.toString();throw yield Dt(i.peerConnection.setLocalDescription({type:"offer",sdp:l})),yield Dt(i.peerConnection.setRemoteDescription({type:"answer",sdp:m})),yield Dt(i.stopSending(c,!0)),p}i.remoteSDP.receive(t,n,r,h);const f=i.remoteSDP.toString(),g=i.logSDPExchange(l,"offer","local","send");return yield Dt(i.peerConnection.setLocalDescription({type:"offer",sdp:l})),yield Dt(i.applySimulcastEncodings(a,t)),yield Dt(i.applySendEncodings(a,t)),g==null||g(f),yield Dt(i.peerConnection.setRemoteDescription({type:"answer",sdp:f})),a.map((p,m)=>{const _=c[m];return{localSSRC:d[m],id:_,transceiver:p}})}catch(a){throw a instanceof Q?a:new Q(k.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(a.toString()))}finally{o()}})()}async createDataChannels(t,n){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.createDataChannels before remote SDP created");let r=this.dataStreamChannelMap.get(t);if(r&&r.readyState==="open")w.debug("[P2PConnection] Channels are already available and can be reused directly.");else{const o=this.currentDataChannelId<1023?this.currentDataChannelId++:this.recoveredDataChannelIds.shift();if(typeof o!="number")throw new Error("create DataChannel error, because cannot get dc id");r=this.peerConnection.createDataChannel("datastream-channel",{id:o,negotiated:!0,ordered:!1,maxRetransmits:H("DATASTREAM_MAX_RETRANSMITS")}),r.binaryType="arraybuffer",this.dataStreamChannelMap.set(t,r)}n.forEach(o=>{o._updateOriginDataChannel(r)});const{needExchangeSDP:i}=this.remoteSDP.sendDataChannel();if(i){const o=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:o});const a=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(a),w.debug("[P2PConnection] createDataChannels by exchanging SDP.")}else w.debug("[P2PConnection] createDataChannels no need to exchange SDP.");return}catch(r){throw r instanceof Q?r:new Q(k.EXCHANGE_SDP_FAILED,"P2PConnection.createDataChannels failed; ".concat(r.toString()))}}async stopDataChannels(t){try{const n=this.dataStreamChannelMap.get(t);return n&&(n.id&&this.recoveredDataChannelIds.push(n.id),n.close()),void this.dataStreamChannelMap.delete(t)}catch(n){throw n instanceof Q?n:new Q(k.DATACHANNEL_FAILED,"P2PConnection.stopDataChannels failed; ".concat(n.toString()))}}async stopSending(t,n){const r=n?void 0:await this.mutex.lock("From P2PConnection.stopSending");try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");const i=this.peerConnection.getTransceivers().filter(c=>t.indexOf(c.mid)!==-1);if(i.length!==t.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.");i.map(c=>{var l;Gv(this.id+c.mid,this),c.direction="inactive",(l=c.stop)===null||l===void 0||l.call(c)});const o=await this.peerConnection.createOffer(),a=this.logSDPExchange(o.sdp||"","offer","local","stopSending");await this.peerConnection.setLocalDescription(o),this.remoteSDP.stopReceiving(t);const s=this.remoteSDP.toString();a==null||a(s),await this.peerConnection.setRemoteDescription({type:"answer",sdp:s})}catch(i){throw new Q(k.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(i.toString()))}finally{r&&r()}}async receive(t,n,r,i){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(t," before remoteSDP created."));const{mid:o,needExchangeSDP:a}=this.remoteSDP.send(t,n,r,i);a&&(await Vv(this.peerConnection,this.remoteSDP,this.extension),w.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(t," by exchanging SDP.")));const s=this.peerConnection.getTransceivers().find(c=>c.mid===o);if(!s)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:s.receiver.track,id:o,transceiver:s}}catch(o){throw new Q(k.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(o.toString()))}}async batchReceive(t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.batchReceive before remoteSDP created.");const{mids:n,needExchangeSDP:r}=this.remoteSDP.batchSend(t);return r&&(await Vv(this.peerConnection,this.remoteSDP,this.extension),w.debug("[".concat(this.store.clientId,"] [P2PConnection] batchReceive by exchanging SDP."))),n.map(i=>{const o=this.peerConnection.getTransceivers().find(a=>a.mid===i);if(!o)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:o.receiver.track,id:i,transceiver:o}})}catch(n){throw new Q(k.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(n.toString()))}}async stopReceiving(t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");t.forEach(o=>{Array.from(this.preSSRCMap.entries()).some(a=>{let[s,c]=a;if(c===o)return this.preSSRCMap.delete(s),!0})}),this.remoteSDP.stopSending(t);const n=this.remoteSDP.toString(),r=this.logSDPExchange(n,"offer","remote","stopReceiving");await this.peerConnection.setRemoteDescription({type:"offer",sdp:n});const i=await this.peerConnection.createAnswer();r==null||r(i.sdp||""),await this.peerConnection.setLocalDescription(i)}catch(n){throw new Q(k.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(n.toString()))}}async muteRemote(t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteRemote mid=".concat(t," before remote SDP created."));this.remoteSDP.mute(t);const n=this.remoteSDP.toString(),r=this.logSDPExchange(n,"offer","remote","muteRemote");await this.peerConnection.setRemoteDescription({type:"offer",sdp:n});const i=await this.peerConnection.createAnswer();r==null||r(i.sdp||""),await this.peerConnection.setLocalDescription(i)}catch(n){throw new Q(k.EXCHANGE_SDP_FAILED,"P2PConnection.muteRemote failed; ".concat(n.toString()))}}async unmuteRemote(t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteRemote mid=".concat(t," before remote SDP created."));this.remoteSDP.unmute(t);const n=this.remoteSDP.toString(),r=this.logSDPExchange(n,"offer","remote","unmuteRemote");await this.peerConnection.setRemoteDescription({type:"offer",sdp:n});const i=await this.peerConnection.createAnswer();r==null||r(i.sdp||""),await this.peerConnection.setLocalDescription(i)}catch(n){throw new Q(k.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteRemote failed; ".concat(n.toString()))}}async muteLocal(t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");const n=this.peerConnection.getTransceivers().filter(a=>a.mid&&t.indexOf(a.mid)!==-1);if(n.length!==t.length)throw new Error("Transceivers' length doesn't match mids' length.");n.map(a=>{a.direction="inactive"});const r=await this.peerConnection.createOffer(),i=this.logSDPExchange(r.sdp||"","offer","local","muteLocal");await this.peerConnection.setLocalDescription(r),this.remoteSDP.muteRemote(t);const o=this.remoteSDP.toString();i==null||i(o),await this.peerConnection.setRemoteDescription({type:"answer",sdp:o})}catch(n){throw new Q(k.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(n.toString()))}}async unmuteLocal(t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");const n=this.peerConnection.getTransceivers().filter(a=>a.mid&&t.indexOf(a.mid)!==-1);if(n.length!==t.length)throw new Error("Transceivers' length doesn't match mids' length.");n.map(async(a,s)=>{a.direction="sendonly"});const r=await this.peerConnection.createOffer(),i=this.logSDPExchange(r.sdp||"","offer","local","unmuteLocal");await this.peerConnection.setLocalDescription(r),this.remoteSDP.unmuteRemote(t);const o=this.remoteSDP.toString();i==null||i(o),await this.peerConnection.setRemoteDescription({type:"answer",sdp:o})}catch(n){throw new Q(k.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(n.toString()))}}restartICE(t){var n=this;return Ms(function*(){const r=yield Dt(n.mutex.lock("From P2PConnection.restartICE"));try{if(!n.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");if(It().supportPCSetConfiguration){const l=n.peerConnection.getConfiguration(),u=t===Ao.RELAY?"relay":"all";l.iceTransportPolicy!==u&&(w.debug("[".concat(n.store.clientId,"] restartICE change iceTransportPolicy from [").concat(l.iceTransportPolicy,"] to [").concat(u,"]")),l.iceTransportPolicy=u,n.peerConnection.setConfiguration(l))}else if(t===Ao.RELAY)return;n.remoteSDP.updateCandidates(t);const i=yield Dt(n.peerConnection.createOffer({iceRestart:!0}));if(!i.sdp)throw new Error("Cannot restartICE because restart offer SDP does not exist.");const o=Jl(i.sdp),{remoteIceParameters:a}=yield o.iceParameters;n.remoteSDP.restartICE(a);const s=n.remoteSDP.toString(),c=n.logSDPExchange(i.sdp||"","offer","local","restartICE");n.store.descriptionStart(),yield Dt(n.peerConnection.setLocalDescription(i)),c==null||c(s),yield Dt(n.peerConnection.setRemoteDescription({type:"answer",sdp:s}))}catch(i){w.warning("[".concat(n.store.clientId,"] restart ICE failed, abort operation"),i)}finally{r()}})()}close(){var t;this.peerConnection.getTransceivers().forEach(n=>{Gv(this.id+n.mid,this)}),this.preSSRCMap.clear(),this.peerConnection.close(),(t=this.onConnectionStateChange)===null||t===void 0||t.call(this,"closed"),this.tryUnbindTransportEvents(),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.transportEventReceiver=void 0,this.statsFilter.destroy(),this.dataStreamChannelMap.clear(),this.recoveredDataChannelIds=[],this.currentDataChannelId=1}getStats(){return ic(ic({},this.statsFilter.getStats()),{},{qualityLimitationReason:this.qualityLimitationReason})}getRemoteVideoIsReady(t){return this.statsFilter.getVideoIsReady(t)}async updateEncoderConfig(t,n){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");const r=await this.peerConnection.createOffer(),i=this.mungSendOfferSDP(r.sdp,[n],[t]);this.remoteSDP.updateRecvMedia(t,n);const o=this.remoteSDP.toString(),a=this.logSDPExchange(i,"offer","local","updateEncoderConfig");await this.peerConnection.setLocalDescription({type:"offer",sdp:i}),a==null||a(o),await this.peerConnection.setRemoteDescription({type:"answer",sdp:o})}catch(r){throw new Q(k.EXCHANGE_SDP_FAILED,r.toString())}}async updateSendParameters(t,n){const r=this.peerConnection.getTransceivers().filter(i=>i.mid===t);r.length===1&&(this.isVP8Simulcast(n)?Fn()||await this.applySimulcastEncodings(r,[n]):await this.applySendEncodings(r,[n]))}setStatsRemoteVideoIsReady(t,n){this.statsFilter.setVideoIsReady2(t,n)}async replaceTrack(t,n){const r=this.peerConnection.getTransceivers().find(i=>i.mid===n);r&&await r.sender.replaceTrack(t._mediaStreamTrack)}async getSelectedCandidatePair(){const t=this.peerConnection.getReceivers();if(t.length>0&&t[0].transport&&t[0].transport.iceTransport&&t[0].transport.iceTransport.getSelectedCandidatePair&&t[0].transport.iceTransport.getSelectedCandidatePair()){const n=t[0].transport.iceTransport,{local:r,remote:i}=n.getSelectedCandidatePair();return{local:ic(ic({},Ac),{},{candidateType:r.type,protocol:r.protocol,address:r.address,port:r.port}),remote:ic(ic({},Ac),{},{candidateType:i.type,protocol:i.protocol,address:i.address,port:i.port})}}return this.statsFilter.getSelectedCandidatePair()}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var t;(t=this.onICEConnectionStateChange)===null||t===void 0||t.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var t;(t=this.onConnectionStateChange)===null||t===void 0||t.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidate=t=>{t.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,w.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},setTimeout(()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,w.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))},H("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(t){const n={iceServers:[]};return t.iceServers?n.iceServers=t.iceServers:t.turnServer&&t.turnServer.mode!=="off"&&(Fy(t.turnServer.servers)?n.iceServers=t.turnServer.servers:(n.iceServers&&n.iceServers.push(...Rm.turnServerConfigToIceServers(t.turnServer.servers)),H("USE_TURN_SERVER_OF_GATEWAY")&&n.iceServers&&t.turnServer.serversFromGateway&&n.iceServers.push(...Rm.turnServerConfigToIceServers(t.turnServer.serversFromGateway)),H("FORCE_TURN_TCP")?n.iceTransportPolicy="relay":t.turnServer.servers.concat(t.turnServer.serversFromGateway||[]).forEach(r=>{r.forceturn&&(n.iceTransportPolicy="relay")}))),H("ENABLE_ENCODED_TRANSFORM")&&It().supportWebRTCEncodedTransform&&(n.encodedInsertableStreams=!0),n}static turnServerConfigToIceServers(t){const n=[];return t.forEach(r=>{r.security?r.tcpport&&n.push({username:r.username,credential:r.password,credentialType:"password",urls:"turns:".concat(Xh(r.turnServerURL),":").concat(r.tcpport,"?transport=tcp")}):(r.udpport&&!H("FORCE_TURN_TCP")&&n.push({username:r.username,credential:r.password,credentialType:"password",urls:"turn:".concat(r.turnServerURL,":").concat(r.udpport,"?transport=udp")}),r.tcpport&&n.push({username:r.username,credential:r.password,credentialType:"password",urls:"turn:".concat(r.turnServerURL,":").concat(r.tcpport,"?transport=tcp")}))}),n}tryBindTransportEvents(t){const n=t.transport;if(n){this.transportEventReceiver=t,n.onstatechange=()=>{var i;n!=null&&n.state&&((i=this.onDTLSTransportStateChange)===null||i===void 0||i.call(this,n.state))},n.onerror=i=>{var o;(o=this.onDTLSTransportError)===null||o===void 0||o.call(this,"error"in i?i.error:i)};const r=n.iceTransport;r&&(r.onstatechange=()=>{const i=n==null?void 0:n.iceTransport.state;var o;i&&((o=this.onICETransportStateChange)===null||o===void 0||o.call(this,i))},r.getSelectedCandidatePair&&(r.onselectedcandidatepairchange=()=>{if(r.getSelectedCandidatePair()){const{local:i,remote:o}=r.getSelectedCandidatePair();w.info("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] selectedcandidatepairchange: local ").concat(JSON.stringify({candidateType:i.type,protocol:i.protocol}),", remote ").concat(JSON.stringify({candidateType:o.type,protocol:o.protocol,address:o.address,port:o.port})," )"))}}))}}tryUnbindTransportEvents(){this.transportEventReceiver&&this.transportEventReceiver.transport&&(this.transportEventReceiver.transport.onstatechange=null,this.transportEventReceiver.transport.onerror=null,this.transportEventReceiver.transport.iceTransport&&(this.transportEventReceiver.transport.iceTransport.onstatechange=null))}async updateRtpSenderEncodings(t,n){var r,i;if(n||(n=this.peerConnection.getSenders().find(m=>m.track===t._mediaStreamTrack)),!n)return w.warn("[".concat(t.getTrackId(),"] no rtpSender found}"));if(this.isVP8Simulcast(t))return w.warn("[updateRtpSenderEncodings] Track is VP8 simulcast, please apply simulcast encodings");if(!It().supportSetRtpSenderParameters)return w.warn("[updateRtpSenderEncodings] Browser not support set rtp-sender parameters");const o={},a={};switch(t._optimizationMode){case"motion":o.degradationPreference="maintain-framerate";break;case"detail":o.degradationPreference="maintain-resolution";break;case"balanced":o.degradationPreference="balanced"}const s=function(p,m){return p.getTransceivers().find(_=>_.sender.track===m||_.receiver.track===m)}(this.peerConnection,t._mediaStreamTrack),c=cfe(t);if(qfe(t)&&s&&n&&c&&this.getLocalVideoStats&&Ce(r=["vp8","vp9"]).call(r,this.store.codec)){var l;const p=o.degradationPreference||(Ce(l=t._hints).call(l,gn.CUSTOM_TRACK)?H("CUSTOM_ADAPTATION_DEFAULT_MODE"):"maintain-framerate");(function(m,_,E,S,C,b){if(Gv(m,E),C(_),S!=="balanced"&&S!=="maintain-framerate"&&S!=="maintain-resolution")return;let T=-1;lz(m,_);const R=window.setInterval(()=>{const O=uS.get(m);if(!H("ENABLE_AG_ADAPTATION")||!O)return Gv(m,E),void C(_);const x=b();if(x.sendPackets>0&&x.OutgoingAvailableBandwidth>0){if(T===-1)return void(T=Date.now());if(Date.now()-T<1e3)return;const M=x.sendFrameRate,$=x.OutgoingAvailableBandwidth,[U,V]=Kfe(m,M,$,O.adaptationConfig,_,S);V&&(E.qualityLimitationReason=V),U&&O.adaptationConfig.scale!==U.scale&&(w.debug("[".concat(m,"] applyAdaptation: ").concat(E.qualityLimitationReason,`
           sendFps `).concat(M,", bwe ").concat($,", switch from ").concat(O.adaptationConfig.scale," to ").concat(U.scale," ")),O.adaptationConfig=wT(wT({},O.adaptationConfig),U),C(U))}},H("CHECK_LOCAL_STATS_INTERVAL")),A=wT({},_);uS.set(m,{timer:R,adaptationConfig:A,originConfig:_,adaptationFunc:C}),w.debug("[".concat(m,"] start adaptation, originConfig: ").concat(JSON.stringify(_),", degradationPreference: ").concat(S))})(this.id+s.mid,c,this,p,m=>{n&&this.updateAdaptation(n,m)},this.getLocalVideoStats.bind(this))}if(t._encoderConfig){var u;const{bitrateMax:p,frameRate:m,scaleResolutionDownBy:_}=t._encoderConfig;p&&(a.maxBitrate=1e3*p),(Ce(u=t._hints).call(u,gn.LOW_STREAM)||t.isUseScaleResolutionDownBy)&&(m&&(a.maxFramerate=Oo(m)),_&&_>=1&&(a.scaleResolutionDownBy=_))}const{maxFramerate:d}=H("ENCODER_CONFIG_LIMIT");if(d&&typeof d=="number"&&(a.maxFramerate=a.maxFramerate?Math.min(a.maxFramerate,d):d),H("DSCP_TYPE")&&_u()){var h;const p=H("DSCP_TYPE");Ce(h=["very-low","low","medium","high"]).call(h,p)&&(a.networkPriority=p)}const f=n.getParameters(),g=(i=f.encodings)===null||i===void 0?void 0:i[0];Fn()&&!g&&(o.encodings=[a]),g&&Object.assign(g,a),Object.assign(f,o),w.debug("[".concat(t.getTrackId(),"] updateRtpSenderEncodings: ").concat(JSON.stringify(f.encodings))),await n.setParameters(f),await async function(p,m,_){try{var E;if(!It().supportSetRtpSenderParameters||!function(R){return R==="vp9"}(p)||!H("ENABLE_SVC"))return;const S={},C={},b=m.getParameters(),T=(E=b.encodings)===null||E===void 0?void 0:E[0];C.scalabilityMode=tA(_),T&&Object.assign(T,C),Object.assign(b,S),await m.setParameters(b),w.debug("[updateAdaptation] updateRtpSenderEncodings scalabilityMode success: ".concat(JSON.stringify(b.encodings)))}catch(S){w.debug("[updateAdaptation] updateRtpSenderEncodings scalabilityMode failed",S)}}(this.store.codec,n,H("SVC_MODE"))}async updateAdaptation(t,n){var r,i;if(!t)return w.debug("[updateAdaptation] no rtpSender found");if(!It().supportSetRtpSenderParameters)return w.debug("[updateAdaptation] Browser not support set rtp-sender parameters");const o={},{bitrateMax:a,frameRate:s,scaleResolutionDownBy:c}=n;a&&(o.maxBitrate=1e3*a),s&&(o.maxFramerate=Oo(s)),c&&c>=1&&Ce(r=["vp8","vp9"]).call(r,this.store.codec)&&(o.scaleResolutionDownBy=c);const l=t.getParameters(),u=(i=l.encodings)===null||i===void 0?void 0:i[0];u&&Object.assign(u,o),Object.assign(l,{});try{await t.setParameters(l),w.debug("[updateAdaptation] updateRtpSenderEncodings: ".concat(JSON.stringify(l.encodings)))}catch(d){!("transport"in t)||t.transport&&t.transport.state==="connected"?this.peerConnectionState!=="connected"?w.debug("[updateAdaptation] peerConnection not connected}"):w.debug("[updateAdaptation] updateRtpSenderEncodings failed",d):w.debug("[updateAdaptation] rtpSender transport not connected}")}}async applySendEncodings(t,n){try{if(!It().supportSetRtpSenderParameters||t.length!==n.length)return;for(let r=0;r<t.length;r++){const i=t[r],o=n[r];o instanceof hn&&!this.isVP8Simulcast(o)&&await this.updateRtpSenderEncodings(o,i.sender)}}catch{w.debug("[".concat(this.store.clientId,"] Apply RTPSendEncodings failed."))}}mungSendOfferSDP(t,n,r){const i=Dr.parse(t);return n.forEach((o,a)=>{const s=r[a],c=i.mediaDescriptions.find(l=>l.attributes.mid===s);c&&(Vf(c,o),G9(c,o,this.store.codec))}),Dr.print(i)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=t=>{var n;(n=this.onFirstAudioReceived)===null||n===void 0||n.call(this,t)},this.statsFilter.onFirstVideoReceived=t=>{var n;(n=this.onFirstVideoReceived)===null||n===void 0||n.call(this,t)},this.statsFilter.onFirstAudioDecoded=t=>{var n;(n=this.onFirstAudioDecoded)===null||n===void 0||n.call(this,t)},this.statsFilter.onFirstVideoDecoded=(t,n,r)=>{var i;(i=this.onFirstVideoDecoded)===null||i===void 0||i.call(this,t,n,r)},this.statsFilter.onSelectedLocalCandidateChanged=(t,n)=>{var r;(r=this.onSelectedLocalCandidateChanged)===null||r===void 0||r.call(this,t,n)},this.statsFilter.onSelectedRemoteCandidateChanged=(t,n)=>{var r;(r=this.onSelectedRemoteCandidateChanged)===null||r===void 0||r.call(this,t,n)},this.statsFilter.onFirstVideoDecodedTimeout=t=>{var n;(n=this.onFirstVideoDecodedTimeout)===null||n===void 0||n.call(this,t)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0,this.statsFilter.onFirstVideoDecodedTimeout=void 0}async applySimulcastForFirefox(t,n){if(t.length===n.length)for(let c=0;c<t.length;c++){var r,i,o,a,s;const l=t[c],u=n[c];if(u instanceof hn&&!Ce(r=u._hints).call(r,gn.LOW_STREAM)&&(i=u._encoderConfig)!==null&&i!==void 0&&i.bitrateMax&&((o=u._encoderConfig)===null||o===void 0?void 0:o.bitrateMax)>200&&(a=u._scalabilityMode)!==null&&a!==void 0&&a.numSpatialLayers&&((s=u._scalabilityMode)===null||s===void 0?void 0:s.numSpatialLayers)>1&&this.store.codec==="vp8"){const d={},h={high:1e3*(u._encoderConfig.bitrateMax-50),medium:5e4};d.encodings=[{rid:"m",active:!0,maxBitrate:h.medium,scaleResolutionDownBy:4},{rid:"h",active:!0,maxBitrate:h.high}];const f=l.sender.getParameters();await l.sender.setParameters(Object.assign(f,d))}}}async applySimulcastEncodings(t,n){if(!Fn()&&t.length===n.length)for(let r=0;r<t.length;r++){const i=n[r];if(i instanceof hn&&this.isVP8Simulcast(i)){const o=t[r],a={},s={high:1e3*(i._encoderConfig.bitrateMax-50),medium:5e4};a.encodings=[{active:!0,adaptivePtime:!1,networkPriority:"high",priority:"high",maxBitrate:s.high},{active:!0,adaptivePtime:!1,networkPriority:"low",priority:"low",maxBitrate:s.medium,scaleResolutionDownBy:4}];const c=o.sender.getParameters();await o.sender.setParameters(Object.assign(c,a))}}}isVP8Simulcast(t){var n,r,i,o,a;return!!(t instanceof hn&&H("SIMULCAST")&&this.store.codec==="vp8"&&!Ce(n=t._hints).call(n,gn.LOW_STREAM)&&(r=t._encoderConfig)!==null&&r!==void 0&&r.bitrateMax&&((i=t._encoderConfig)===null||i===void 0?void 0:i.bitrateMax)>200&&(o=t._scalabilityMode)!==null&&o!==void 0&&o.numSpatialLayers&&((a=t._scalabilityMode)===null||a===void 0?void 0:a.numSpatialLayers)>1)}logSDPExchange(t,n,r,i){if(H("SDP_LOGGING"))return w.upload("[".concat(this.store.clientId,"] exchanging ").concat(r," ").concat(n," SDP during P2PConnection.").concat(i,`
`),t),n==="offer"?o=>{this.logSDPExchange(o,"answer",r==="local"?"remote":"local",i)}:void 0}async getRemoteSSRC(t){if(!this.remoteSDP)return;const n=this.remoteSDP.getSSRC(t);return n&&n.length!==0?n[0].ssrcId:void 0}setConfiguration(t){if(It().supportPCSetConfiguration){const n=Rm.resolvePCConfiguration(t);this.peerConnection.setConfiguration(n)}}},Ae(_t.prototype,"updateRemoteRTPCapabilities",[Gi],Object.getOwnPropertyDescriptor(_t.prototype,"updateRemoteRTPCapabilities"),_t.prototype),Ae(_t.prototype,"connect",[Gi],Object.getOwnPropertyDescriptor(_t.prototype,"connect"),_t.prototype),Ae(_t.prototype,"updateRemoteConnect",[Gi],Object.getOwnPropertyDescriptor(_t.prototype,"updateRemoteConnect"),_t.prototype),Ae(_t.prototype,"createDataChannels",[Gi],Object.getOwnPropertyDescriptor(_t.prototype,"createDataChannels"),_t.prototype),Ae(_t.prototype,"receive",[Gi],Object.getOwnPropertyDescriptor(_t.prototype,"receive"),_t.prototype),Ae(_t.prototype,"batchReceive",[Gi],Object.getOwnPropertyDescriptor(_t.prototype,"batchReceive"),_t.prototype),Ae(_t.prototype,"stopReceiving",[Gi],Object.getOwnPropertyDescriptor(_t.prototype,"stopReceiving"),_t.prototype),Ae(_t.prototype,"muteRemote",[Gi],Object.getOwnPropertyDescriptor(_t.prototype,"muteRemote"),_t.prototype),Ae(_t.prototype,"unmuteRemote",[Gi],Object.getOwnPropertyDescriptor(_t.prototype,"unmuteRemote"),_t.prototype),Ae(_t.prototype,"muteLocal",[Gi],Object.getOwnPropertyDescriptor(_t.prototype,"muteLocal"),_t.prototype),Ae(_t.prototype,"unmuteLocal",[Gi],Object.getOwnPropertyDescriptor(_t.prototype,"unmuteLocal"),_t.prototype),Ae(_t.prototype,"close",[Gi],Object.getOwnPropertyDescriptor(_t.prototype,"close"),_t.prototype),Ae(_t.prototype,"updateEncoderConfig",[Gi],Object.getOwnPropertyDescriptor(_t.prototype,"updateEncoderConfig"),_t.prototype),Ae(_t.prototype,"updateSendParameters",[Gi],Object.getOwnPropertyDescriptor(_t.prototype,"updateSendParameters"),_t.prototype),Ae(_t.prototype,"replaceTrack",[Gi],Object.getOwnPropertyDescriptor(_t.prototype,"replaceTrack"),_t.prototype),Ae(_t.prototype,"updateAdaptation",[Gi],Object.getOwnPropertyDescriptor(_t.prototype,"updateAdaptation"),_t.prototype),Ae(_t.prototype,"getRemoteSSRC",[Gi],Object.getOwnPropertyDescriptor(_t.prototype,"getRemoteSSRC"),_t.prototype),_t);function Gi(e,t,n){const r=e[t];if(typeof r!="function")throw new Error("Cannot use mutex on object property.");return n.value=async function(){const i=this.mutex,o=await i.lock("From P2PConnection.".concat(t));try{for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return await r.apply(this,s)}finally{o()}},n}var ht;function r3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function oc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?r3(Object(n),!0).forEach(function(r){P(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r3(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function i3(e){var t,n,r,i=2;for(typeof Symbol<"u"&&(n=Wfe,r=Symbol.iterator);i--;){if(n&&(t=e[n])!=null)return t.call(e);if(r&&(t=e[r])!=null)return new m_(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function m_(e){function t(n){if(Object(n)!==n)return _e.reject(new TypeError(n+" is not an object."));var r=n.done;return _e.resolve(n.value).then(function(i){return{value:i,done:r}})}return m_=function(n){this.s=n,this.n=n.next},m_.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(n){var r=this.s.return;return r===void 0?_e.resolve({value:n,done:!0}):t(r.apply(this.s,arguments))},throw:function(n){var r=this.s.return;return r===void 0?_e.reject(n):t(r.apply(this.s,arguments))}},new m_(e)}let Kv=(ht=class extends Pn{get state(){return this._state}set state(e){const t=this._state;this._state=e,this.emit(He.StateChange,t,this._state)}constructor(e,t){super(),P(this,"isPlanB",void 0),P(this,"store",void 0),P(this,"statsUploader",void 0),P(this,"connection",void 0),P(this,"localTrackMap",new Map),P(this,"remoteUserMap",new Map),P(this,"localDataChannels",[]),P(this,"remoteDataChannelMap",new Map),P(this,"pendingLocalTracks",[]),P(this,"pendingRemoteTracks",[]),P(this,"pendingLocalDataChannels",[]),P(this,"pendingRemoteDataChannels",[]),P(this,"statsCollector",void 0),P(this,"shouldForwardP2PCreation",void 0),P(this,"iceFailedCount",0),P(this,"dtlsFailedCount",0),P(this,"mutex",new ri("P2PChannel-mutex")),P(this,"_state",Wt.Disconnected),P(this,"_pcStatsUploadType",H("NEW_ICE_RESTART")?$c.FIRST_CONNECTION:$c.OLD_FIRST_CONNECTION),P(this,"_isInRestartIce",!1),P(this,"_isStartRestartIce",!1),P(this,"_restartStates",["disconnected","failed"]),P(this,"_restartTimer",void 0),P(this,"_isFirstConnected",!0),P(this,"handleMuteLocalTrack",async(n,r,i)=>{const o=await this.mutex.lock("Locking from P2PChannel.handleMuteLocalTrack");try{if(!this.connection||this.state!==Wt.Connected)return void i(new Q(k.INVALID_OPERATION,"Cannot call P2PChannel.handleMuteLocalTrack before connection established."));const a=this.filterTobeMutedTracks(n);if(a.length===0)return void r();const s=a.find(l=>l[0]==="videoLowTrack");s&&s[1].track._originMediaStreamTrack.stop(),await this.connection.muteLocal(a.map(l=>{let[,{id:u}]=l;return u}));const c=this.createMuteMessage(a);await rn(this,He.RequestMuteLocal,c),r()}catch(a){i(a)}finally{o()}}),P(this,"handleUnmuteLocalTrack",async(n,r,i)=>{const o=await this.mutex.lock("Locking from P2PChannel.handleUnmuteLocalTrack");try{if(!this.connection||this.state!==Wt.Connected)return void i(new Q(k.INVALID_OPERATION,"Cannot call P2PChannel.handleUnmuteLocalTrack before connection established."));const a=this.filterTobeUnmutedTracks(n);if(a.length===0)return void r();const s=a.find(l=>l[0]==="videoLowTrack");if(s){const l=s[1];if(l.track._originMediaStreamTrack.stop(),!H("DISABLE_DUAL_STREAM_USE_ENCODING")&&It().supportDualStreamEncoding){const u=n._mediaStreamTrack.clone();l.track._mediaStreamTrack=u,l.track._originMediaStreamTrack=u}else{const u=aA(n,C0(this,He.RequestLowStreamParameter));l.track._mediaStreamTrack=u,l.track._originMediaStreamTrack=u}await new _e((u,d)=>{this.handleReplaceTrack(l.track,u,d,!0)})}await this.connection.unmuteLocal(a.map(l=>{let[,{id:u}]=l;return u}));const c=this.createUnmuteMessage(a);await rn(this,He.RequestUnmuteLocal,c),r()}catch(a){i(a)}finally{o()}}),P(this,"handleUpdateVideoEncoder",async(n,r,i)=>{const o=await this.mutex.lock("Locking from P2PChannel.handleSetVideoEncoder");try{const a=this.localTrackMap.get(se.LocalVideoTrack);if(!this.connection||!a||a.track!==n||this.state!==Wt.Connected)return void r();const{id:s,track:c}=a;await this.connection.updateSendParameters(s,c),await this.connection.updateEncoderConfig(s,c),this.emit(He.UpdateVideoEncoder,c),r()}catch(a){i(a)}finally{o()}}),P(this,"handleUpdateVideoSendParameters",async(n,r,i)=>{const o=await this.mutex.lock("Locking from P2PChannel.handleUpdateVideoSendParameters");try{const a=this.localTrackMap.get(se.LocalVideoTrack);if(!this.connection||!a||a.track!==n||this.state!==Wt.Connected)return void r();const{id:s,track:c}=a;await this.connection.updateSendParameters(s,c),r()}catch(a){i(a)}finally{o()}}),P(this,"handleReplaceMixingTrack",async(n,r,i,o)=>{if(!this.connection||this.state!==Wt.Connected)return void r();const a=RT([n]);let s;w.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection will replace audioTrack [").concat(a.getTrackId(),"]")),typeof o=="boolean"&&o||(s=await this.mutex.lock("From P2PChannel.handleReplaceMixingTrack"));try{await this.replaceTrack(n,a),r()}catch(l){i(l)}finally{var c;(c=s)===null||c===void 0||c()}}),P(this,"handleReplaceTrack",async(n,r,i,o)=>{let a;w.debug("[".concat(this.store.clientId,"] P2PChannel handleReplaceTrack for [track-id-").concat(n.getTrackId(),"]")),typeof o=="boolean"&&o||(a=await this.mutex.lock("From P2PChannel.handleReplaceTrack"));try{var s;const l=Array.from(this.localTrackMap.entries()).find(u=>{let[,{track:d}]=u;return n===d});if(!this.connection||!l||this.state!==Wt.Connected)return void r();if(await((s=this.connection)===null||s===void 0?void 0:s.replaceTrack(n,l[1].id)),this.isPlanB){const u=l[1];u.id=n._mediaStreamTrack.id,this.localTrackMap.set(l[0],u)}if(l[0]===se.LocalVideoTrack&&!H("DISABLE_DUAL_STREAM_USE_ENCODING")&&It().supportDualStreamEncoding){const u=this.localTrackMap.get(se.LocalVideoLowTrack);if(u){const d=n._mediaStreamTrack.clone();u.track._originMediaStreamTrack.stop(),u.track._mediaStreamTrack=d,u.track._originMediaStreamTrack=d,await new _e((h,f)=>{this.handleReplaceTrack(u.track,h,f,!0)})}}r()}catch(l){i(l)}finally{var c;(c=a)===null||c===void 0||c()}}),P(this,"handleGetRTCStats",n=>{n(this.statsCollector.getRTCStats())}),P(this,"handleGetLocalVideoStats",n=>{n(this.statsCollector.getLocalVideoTrackStats())}),P(this,"handleGetLocalAudioStats",n=>{n(this.statsCollector.getLocalAudioTrackStats())}),P(this,"handleGetRemoteVideoStats",n=>this.statsCollector.getRemoteVideoTrackStats(n.uid)[n.uid]),P(this,"handleGetRemoteAudioStats",n=>this.statsCollector.getRemoteAudioTrackStats(n.uid)[n.uid]),this.store=e,this.statsCollector=t,this.statsCollector.addP2PChannel(this),this.statsUploader=new sz(this.store),this.bindStatsUploaderEvents(),this.isPlanB=!It().supportUnifiedPlan||H("CHROME_FORCE_PLAN_B")&&_u(),this.shouldForwardP2PCreation=H("FORWARD_P2P_CREATION")&&It().supportPCSetConfiguration&&iN(),this.shouldForwardP2PCreation&&(this.connection=this.isPlanB?new Kp({},this.store):new Ss({},this.store),this.bindConnectionEvents(this.connection))}async startP2PConnection(e){var t;this.state=Wt.New;const n=this.shouldForwardP2PCreation&&((t=this.connection)===null||t===void 0?void 0:t.peerConnectionState)==="closed";if(this.shouldForwardP2PCreation&&!n||(n&&this.connection&&(w.warning("[".concat(this.store.clientId,"] P2PChannel.startP2PConnection ForwardP2P closed.")),this.connection.close(),this.unbindConnectionEvents(this.connection)),this.connection=this.isPlanB?new Kp(e,this.store):new Ss(e,this.store),this.bindConnectionEvents(this.connection)),!this.connection)throw new Q(k.UNEXPECTED_ERROR,"Cannot P2PChannel.startConnection before P2PConnection initialization .");return this._pcStatsUploadType=H("NEW_ICE_RESTART")?$c.FIRST_CONNECTION:$c.OLD_FIRST_CONNECTION,this._isFirstConnected=!0,this._isInRestartIce=!1,this._isStartRestartIce=!1,this.connection.setConfiguration(e),this.connection.establishPromise}async connect(e){if(!this.connection)throw new Q(k.UNEXPECTED_ERROR,"Cannot P2PChannel.connect before P2PChannel.startP2PConnection .");H("ENABLE_PREALLOC_PC")&&this.state===Wt.Connected?await this.connection.updateRemoteConnect(e):(this.store.peerConnectionStart(),await this.connection.connect(e),this.statsUploader.startUploadTransportStats(),this.statsUploader.startUploadExtensionUsageStats(),this.state=Wt.Connected)}updateRemoteRTPCapabilities(e){const t=Array.from(this.localTrackMap.entries()).filter(i=>{var o;let[a]=i;return Ce(o=[se.LocalVideoLowTrack,se.LocalVideoTrack]).call(o,a)}),n=t.map(i=>{let[,{id:o}]=i;return o}),r=t.map(i=>{let[o]=i;return o});if(this.connection instanceof Ss){if(Pe.updateRemoteRTPCapabilities(this.store.sessionId,{trackTypes:JSON.stringify(r),localCodecs:JSON.stringify(this.connection.localCodecs),remoteCodecs:JSON.stringify(e)}),!Ce(e).call(e,this.store.codec)){const i=["vp9","vp8","h264"].find(o=>Ce(e).call(e,o));i&&(this.store.codec=i,w.debug("[".concat(this.store.clientId,"] [").concat(this.store.p2pId," updateRemoteRTPCapabilities] default codec is not available, hence the fallback to ").concat(i,".")))}this.connection.updateRemoteRTPCapabilities(n,e)}}async getEstablishParams(){var e;if(this.connection instanceof Ss&&this.connection.peerConnectionState!=="closed"&&Ce(e=[Wt.New,Wt.Connected]).call(e,this.state))return this.connection.establishPromise}async publishDataChannel(e){if(!this.connection||this.state!==Wt.Connected){if(this.state===Wt.Disconnected)throw new Q(k.UNEXPECTED_ERROR,"PeerConnection already disconnected.");return e.forEach(n=>{var r;Ce(r=this.pendingLocalDataChannels).call(r,n)||this.pendingLocalDataChannels.push(n)}),[]}const t=this.filterTobePublishedDataChannels(e);return t.length===0?[]:(t.forEach(n=>{const r=Date.now();this.store.publish(n.id.toString(),"datachannel",r)}),await this.connection.createDataChannels(this.store.uid,t),t.forEach(n=>{this.localDataChannels.push(n);const r=Date.now();this.store.publish(n.id+"","datachannel",void 0,r)}),e.map(n=>({streamId:n.id,ordered:n.ordered,maxRetransmits:n.maxRetransmits,metadata:n.metadata,channelId:n._originDataChannelId})))}publish(e,t,n){var r=this;return Ms(function*(){const i=yield Dt(r.mutex.lock("From P2PChannel.publish"));try{if(!r.connection||r.state!==Wt.Connected){if(r.state===Wt.Disconnected)throw new Q(k.UNEXPECTED_ERROR,"PeerConnection already disconnected.");r.throwIfTrackTypeNotMatch(e);const a=e.filter(s=>r.pendingLocalTracks.indexOf(s)===-1);return void(r.pendingLocalTracks=r.pendingLocalTracks.concat(a))}r.store.pubId=r.store.pubId+1,ni.markPublishStart(r.store.clientId,r.store.pubId);const o=r.filterTobePublishedTracks(e,t,n);if(o.length===0)return void(yield Dt(r.tryToUnmuteAudio(e)));yield*KU(i3(r.doPublish(r.connection,o)))}finally{i()}})()}doPublish(e,t){var n=this;return Ms(function*(){t.forEach(d=>{let{track:h,type:f}=d;const g=Date.now();n.store.publish(h.getTrackId(),f===se.LocalAudioTrack?"audio":"video",g)}),n.bindLocalTrackEvents(t);const r=t.map(d=>{let{track:h}=d;return h}),i=yield Dt(e.send(t.map(d=>{let{track:h}=d;return h}),n.store.codec,n.store.audioCodec)),o=(yield Dt(i.next())).value,a=n.createGatewayPublishMessage(t,o);let s;try{s=yield a}catch(d){throw i.throw(d),(d==null?void 0:d.code)===k.WS_ABORT&&t.forEach(h=>{let{track:f}=h;n.pendingLocalTracks.indexOf(f)===-1&&n.pendingLocalTracks.push(f)}),n.unbindLocalTrackEvents(t),d}const c=n.mapPubResToRemoteConfig(a,s),l=(yield Dt(i.next(c))).value,u=H("ENABLE_VIDEO_SEI");r.forEach(async d=>{const h=d.getRTCRtpTransceiver();h&&u&&(d.trackMediaType===De.VIDEO?await pfe(h.sender,d):d.trackMediaType===De.AUDIO&&await async function(f){if(!It().supportWebRTCEncodedTransform)return void w.warning("browser not support audio encoded transform");if(Uv.has(f)||!f.track)return;const g={track:f.track};if(ou()){if(!f.createEncodedStreams)return void w.warning("browser not support createEncodedStreams() API");let m=null;try{m=f.createEncodedStreams()}catch(E){return void w.error("create audio-encoded-streams error",E&&E.message)}const _=new TransformStream({transform(E,S){g.controller||(g.controller=S),f.track&&f.track.id!==g.track.id&&(w.debug("audio track changed: ".concat(g.track.id," => ").concat(f.track.id)),g.track.removeEventListener("ended",p),g.track=f.track,g.track.addEventListener("ended",p)),S.enqueue(E)}});m.readable.pipeThrough(_).pipeTo(m.writable)}else if(Gr()){if(typeof RTCRtpScriptTransform>"u")return void w.warning("browser not support RTCRtpScriptTransform");const m=h_(),_=new MessageChannel;await new _e(S=>m.onmessage=C=>{C.data==="registered"&&S(void 0)});const E=new RTCRtpScriptTransform(m,{name:"tx",port:_.port2},[_.port2]);f.transform=E,await new _e(S=>m.onmessage=C=>{C.data==="started"&&S(void 0)}),_.port1.onmessage=S=>{var C;S.data.transformed&&f.track&&((C=f.track)===null||C===void 0?void 0:C.id)!==g.track.id&&(w.debug("audio track changed: ".concat(g.track.id," => ").concat(f.track.id)),g.track.removeEventListener("ended",p),g.track=f.track,g.track.addEventListener("ended",p))},g.worker=m}function p(){if(f.track){if(this.id!==f.track.id)return;f.track.removeEventListener("ended",p)}const m=Uv.get(f);if(m){Uv.delete(f);try{var _,E;(_=m.controller)===null||_===void 0||_.terminate(),(E=m.worker)===null||E===void 0||E.terminate()}catch(S){w.warning(S&&S.message)}}}Uv.set(f,g),f.track.addEventListener("ended",p)}(h.sender))}),t.forEach(d=>{let{type:h}=d;n.statsCollector.addLocalStats(h)}),n.assignLocalTracks(t,l),n.statsUploader.startUploadOutboundStats(),t.forEach(d=>{let{track:h,type:f}=d;const g=Date.now();n.store.publish(h.getTrackId(),f===se.LocalAudioTrack?"audio":"video",void 0,g)})})()}async updateVideoStreamParameter(e,t){const n=this.localTrackMap.get(t);if(!n)return;if(!(n.track instanceof hn))return w.warn("[updateVideoStreamParameter]: track is not an instance of LocalVideoTrack");if(!(this.connection instanceof Ss||this.connection instanceof Kp))return w.warn("[updateVideoStreamParameter]: connection is not P2PConnection or P2PConnectionPlanB");const{track:r}=n,i=function(o,a){const s={};return o.height&&o.width&&(s.scaleResolutionDownBy=KI(o,a)),s.maxFramerate=o.framerate?Oo(o.framerate):void 0,s.maxBitrate=o.bitrate?1e3*o.bitrate:void 0,s}(e,r);if(r._encoderConfig||(r._encoderConfig={}),t!==se.LocalVideoLowTrack||!H("DISABLE_DUAL_STREAM_USE_ENCODING")&&It().supportDualStreamEncoding)i.scaleResolutionDownBy!=null&&(r._encoderConfig.scaleResolutionDownBy=i.scaleResolutionDownBy);else{const o=r._originMediaStreamTrack;if(!o.canvas)return w.warn("[".concat(r.getTrackId(),"] no canvas on track"));(function(a,s){const c=a.canvas;s.width&&(c.width=Oo(s.width)),s.height&&(c.height=Oo(s.height)),s.framerate&&(c.stopCapture&&c.stopCapture(),c.stopCapture=gN(()=>{!c.startCapture&&c.stopCapture&&c.stopCapture(),c.startCapture&&c.startCapture()},Oo(s.framerate)))})(o,e)}i.maxBitrate!=null&&(r._encoderConfig.bitrateMax=i.maxBitrate/1e3),i.maxFramerate!=null&&(r._encoderConfig.frameRate&&typeof r._encoderConfig.frameRate=="object"?r._encoderConfig.frameRate.max=i.maxFramerate:r._encoderConfig.frameRate={max:i.maxFramerate}),w.debug("[".concat(r.getTrackId(),"] LowStreamEncoderConfig: , ").concat(JSON.stringify(r._encoderConfig))),await this.connection.updateRtpSenderEncodings(r)}publishLowStream(e){var t=this;return Ms(function*(){if(!t.connection||t.state!==Wt.Connected)return;const n=yield Dt(t.mutex.lock("Locking from P2PChannel.publishLowStream"));try{const i=t.localTrackMap.get(se.LocalVideoTrack);if(!i)throw new Q(k.UNEXPECTED_ERROR,"Could not find high stream");if(t.localTrackMap.has(se.LocalVideoLowTrack))throw new Q(k.UNEXPECTED_ERROR,"[".concat(t.store.clientId,"] Can't publish low stream when stream already publish"));const o=[{track:t.getLowVideoTrack(i.track,e),type:se.LocalVideoLowTrack}];if(yield*KU(i3(t.doPublish(t.connection,o))),i.track.muted||!i.track.enabled){var r;const a=(r=t.localTrackMap.get(se.LocalVideoLowTrack))===null||r===void 0?void 0:r.id;a!==void 0&&(yield Dt(t.connection.muteLocal([a])))}}finally{n()}})()}async republish(){this.pendingLocalTracks.length>0&&(w.debug("[".concat(this.store.clientId,"] Emit P2PChannelEvents.RequestRePublish to republish tracks.")),await Kr(this,He.RequestRePublish,this.pendingLocalTracks),this.emit(He.MediaReconnectEnd,this.store.uid),this.pendingLocalTracks=[]),this.pendingLocalDataChannels.length>0&&(w.debug("Emit P2PChannelEvents.RequestRePublishDataChannel to republish datachannels."),await Kr(this,He.RequestRePublishDataChannel,this.pendingLocalDataChannels),this.pendingLocalDataChannels=[])}async reSubscribe(e){for(let t=this.pendingRemoteTracks.length-1;t>=0;t--){const{user:n,kind:r}=this.pendingRemoteTracks[t];(r!==De.AUDIO||n._audio_added_&&n._audioSSRC)&&(r!==De.VIDEO||n._video_added_&&n._videoSSRC)||this.pendingRemoteTracks.splice(t,1)}if(e)await Kr(this,He.RequestReSubscribe,this.pendingRemoteTracks);else for(const{user:t,kind:n}of this.pendingRemoteTracks)await this.subscribe(t,n,n===De.VIDEO?t._videoSSRC:t._audioSSRC);this.pendingRemoteTracks.forEach(t=>{let{user:n}=t;this.emit(He.MediaReconnectEnd,n.uid)}),this.pendingRemoteTracks=[]}async unpublish(e){if(!this.connection||this.state!==Wt.Connected)return void e.forEach(r=>{const i=this.pendingLocalTracks.indexOf(r);i!==-1&&this.pendingLocalTracks.splice(i,1)});const t=this.filterTobeUnpublishedTracks(e);if(t.length===0)return;const n=t.find(r=>r[0]==="videoLowTrack");return n&&n[1].track.close(),this.doUnpublish(this.connection,t)}async unpublishDataChannel(e){if(!this.connection||this.state!==Wt.Connected)return void e.forEach(n=>{const r=this.pendingLocalDataChannels.indexOf(n);r!==-1&&this.pendingLocalDataChannels.splice(r,1)});const t=this.filterTobeUnpublishedDataChannels(e);return t.length!==0?(t.forEach(n=>{const r=this.localDataChannels.indexOf(n);r!==-1&&this.localDataChannels.splice(r,1)}),this.localDataChannels.length===0&&await this.connection.stopDataChannels(this.store.uid),t.map(n=>n.id)):void 0}async unpublishLowStream(){if(!this.connection||this.state!==Wt.Connected)return;const e=this.localTrackMap.get(se.LocalVideoLowTrack);if(!e)return;e.track.close();const t=[[se.LocalVideoLowTrack,e]];return this.doUnpublish(this.connection,t)}async doUnpublish(e,t){const n=this.createGatewayUnpublishMessage(t);return await e.stopSending(t.map(r=>{let[,{id:i}]=r;return i})),this.withdrawLocalTracks(t),this.unbindLocalTrackEvents(t.map(r=>{let[i,{track:o}]=r;return{type:i,track:o}})),t.forEach(r=>{let[i]=r;this.statsCollector.removeLocalStats(i)}),this.localTrackMap.size===0&&this.statsUploader.stopUploadOutboundStats(),n}async subscribeDataChannel(e,t){if(!this.connection||this.state!==Wt.Connected)throw new Q(k.INVALID_OPERATION,"Cannot subscribe remote user when peerConnection disconnected.");const n=t.filter(r=>{var i;return!((i=this.remoteDataChannelMap.get(e))!==null&&i!==void 0&&i.get(r.id))});if(n.length!==0)return await this.connection.createDataChannels(e.uid,n),n.forEach(r=>{var i;this.remoteDataChannelMap.has(e)?(i=this.remoteDataChannelMap.get(e))===null||i===void 0||i.set(r.id,r):this.remoteDataChannelMap.set(e,new Map([[r.id,r]]));const o=this.pendingRemoteDataChannels.findIndex(a=>{let{user:s,id:c}=a;return s.uid===e.uid&&c===r.id});o!==-1&&this.pendingRemoteDataChannels.splice(o,1)}),n.map(r=>r.id)}async subscribe(e,t,n,r,i){var o;if(!this.connection||this.state!==Wt.Connected)throw new Q(k.INVALID_OPERATION,"Cannot subscribe remote user when peerConnection disconnected.");if((o=this.remoteUserMap.get(e))!==null&&o!==void 0&&o.has(t))return;let a,s,c;const l=this.connection.getPreMedia(n);if(l)w.debug("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] preSSRCMap has ssrcId: ").concat(n,", no need to send sub to gateway.")),c=l.transceiver,a=l.track,s=l.id;else if(i){const h=i.find(g=>{let{stream_type:p}=g;return p===t});if(!h)throw new Q(k.UNEXPECTED_ERROR,"Cannot subscribe to remote ".concat(t," for user: ").concat(e.uid," because subscribe answer from gateway does not contain stream_type: ").concat(t,"."));const f=await this.connection.receive(t,h.ssrcs,String(e._uintid),h.attributes);this.connection instanceof Ss&&(c=f.transceiver),a=f.track,s=f.id}else{const h=await this.connection.receive(t,[{ssrcId:n,rtx:r}],String(e._uintid),void 0);this.connection instanceof Ss&&(c=h.transceiver),a=h.track,s=h.id}t===De.AUDIO?(e._audioTrack?e._audioTrack._updateOriginMediaStreamTrack(a):(e._audioTrack=new yf(a,e.uid,e._uintid,this.store),w.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote audio track: ").concat(e._audioTrack.getTrackId()))),c&&e._audioTrack._updateRtpTransceiver(c),this.bindRemoteTrackEvents(e,e._audioTrack)):(e._videoTrack?e._videoTrack._updateOriginMediaStreamTrack(a):(e._videoTrack=new Sf(a,e.uid,e._uintid,this.store),w.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote video track: ").concat(e._videoTrack.getTrackId()))),c&&e._videoTrack._updateRtpTransceiver(c),this.bindRemoteTrackEvents(e,e._videoTrack)),H("ENABLE_VIDEO_SEI")&&c&&(t==De.VIDEO?await async function(h){let f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!It().supportWebRTCEncodedTransform)return void w.warning("browser not support video encoded transform");if(!h.track)return;if(Gp.has(h)){const m=Gp.get(h);return void(m&&(m.onSei=f.onSei))}const g={track:h.track,onSei:f.onSei};if(ou()){if(!h.createEncodedStreams)return void w.warning("browser not support createEncodedStreams() API");let m=null;try{m=h.createEncodedStreams()}catch(E){return void w.error("create video-encoded-streams error",E&&E.message)}const _=new TransformStream({transform(E,S){g.controller||(g.controller=S),h.track&&h.track.id!==g.track.id&&(w.debug("video track changed: ".concat(g.track.id," => ").concat(h.track.id)),g.track.removeEventListener("ended",p),g.track=h.track,g.track.addEventListener("ended",p));const C=function(b){const T=new DataView(b.data);let R=0;for(;R+4<b.data.byteLength;){if(T.getUint8(R+0)===0&&T.getUint8(R+1)===0&&T.getUint8(R+2)===0&&T.getUint8(R+3)===1&&T.getUint8(R+4)===6){let A=R+6,O=0,x=0;for(;(x=T.getUint8(A++))===255;)O+=255;O+=x;const M=ffe(b.data,A,O);return new Uint8Array(M)}R++}return null}(E);C&&g.onSei&&g.onSei(C),S.enqueue(E)}});m.readable.pipeThrough(_).pipeTo(m.writable)}else if(Gr()){if(typeof RTCRtpScriptTransform>"u")return void w.warning("browser not support RTCRtpScriptTransform");const m=h_(),_=new MessageChannel;await new _e(S=>m.onmessage=C=>{C.data==="registered"&&S(void 0)});const E=new RTCRtpScriptTransform(m,{name:"rx",port:_.port2},[_.port2]);h.transform=E,await new _e(S=>m.onmessage=C=>{C.data==="started"&&S(void 0)}),_.port1.onmessage=S=>{var C;S.data.transformed&&h.track&&((C=h.track)===null||C===void 0?void 0:C.id)!==g.track.id?(w.debug("video track changed: ".concat(g.track.id," => ").concat(h.track.id)),g.track.removeEventListener("ended",p),g.track=h.track,g.track.addEventListener("ended",p)):S.data.sei&&g.onSei&&g.onSei(S.data.sei)},g.worker=m}function p(){if(h.track){if(this.id!==h.track.id)return;h.track.removeEventListener("ended",p)}(function(m){const _=Gp.get(m);if(_){Gp.delete(m);try{var E,S;(E=_.controller)===null||E===void 0||E.terminate(),(S=_.worker)===null||S===void 0||S.terminate()}catch(C){w.warning(C&&C.message)}}})(h)}Gp.set(h,g),h.track.addEventListener("ended",p)}(c.receiver,{onSei:h=>{var f;(f=e._videoTrack)===null||f===void 0||f._onSei(h)}}):t==De.AUDIO&&await async function(h){if(!It().supportWebRTCEncodedTransform)return void w.warning("browser not support audio encoded transform");if(Bv.has(h))return;const f={track:h.track};if(ou()){if(!h.createEncodedStreams)return void w.warning("browser not support createEncodedStreams() API");let p=null;try{p=h.createEncodedStreams()}catch(_){return void w.error("create audio-encoded-streams error",_&&_.message)}const m=new TransformStream({transform(_,E){f.controller||(f.controller=E),h.track&&h.track.id!==f.track.id&&(w.debug("audio track changed: ".concat(f.track.id," => ").concat(h.track.id)),f.track.removeEventListener("ended",g),f.track=h.track,f.track.addEventListener("ended",g)),E.enqueue(_)}});p.readable.pipeThrough(m).pipeTo(p.writable)}else if(Gr()){if(typeof RTCRtpScriptTransform>"u")return void w.warning("browser not support RTCRtpScriptTransform");const p=h_(),m=new MessageChannel;await new _e(E=>p.onmessage=S=>{S.data==="registered"&&E(void 0)});const _=new RTCRtpScriptTransform(p,{name:"rx",port:m.port2},[m.port2]);h.transform=_,await new _e(E=>p.onmessage=S=>{S.data==="started"&&E(void 0)}),m.port1.onmessage=E=>{var S;E.data.transformed&&h.track&&((S=h.track)===null||S===void 0?void 0:S.id)!==f.track.id&&(w.debug("audio track changed: ".concat(f.track.id," => ").concat(h.track.id)),f.track.removeEventListener("ended",g),f.track=h.track,f.track.addEventListener("ended",g))},f.worker=p}function g(){h.track.removeEventListener("ended",g),function(p){const m=Bv.get(p);if(m){Bv.delete(p);try{var _,E;(_=m.controller)===null||_===void 0||_.terminate(),(E=m.worker)===null||E===void 0||E.terminate()}catch(S){w.warning(S&&S.message)}}}(h)}Bv.set(h,f),h.track.addEventListener("ended",g)}(c.receiver));const u=this.remoteUserMap.get(e);u?u.set(t,s):this.remoteUserMap.set(e,new Map([[t,s]])),this.statsCollector.addRemoteStats(e.uid),this.statsUploader.startUploadInboundStats();const d=this.pendingRemoteTracks.findIndex(h=>{let{user:f,kind:g}=h;return f.uid===e.uid&&t===g});d!==-1&&(this.pendingRemoteTracks.splice(d,1),this.emit(He.MediaReconnectEnd,e.uid))}async massSubscribe(e){return this.massSubscribeNoLock(e)}async massSubscribeNoLock(e){if(!this.connection||this.state!==Wt.Connected)throw new Q(k.INVALID_OPERATION,"Cannot subscribeAll remote users when peerConnection disconnected.");e=e.filter(i=>{var o;let{user:a,mediaType:s}=i;return!((o=this.remoteUserMap.get(a))!==null&&o!==void 0&&o.has(s))});const t=[],n=new Map;e.forEach(i=>{if(!this.connection)return;const o=this.connection.getPreMedia(i.ssrcId);o?n.set(i.ssrcId,o):t.push(i)});const r=await this.connection.batchReceive(t.map(i=>{let{user:o,mediaType:a,ssrcId:s,rtxSsrcId:c}=i;return{kind:a,ssrcMsg:[{ssrcId:s,rtx:c}],mslabel:String(o._uintid)}}));t.forEach((i,o)=>{n.set(i.ssrcId,r[o])}),e.forEach(i=>{let{user:o,mediaType:a,ssrcId:s}=i;const c=n.get(s);if(!c)return void w.debug("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] cannot find ").concat(o.uid," subscribe data,").concat(a,", ").concat(s));const{track:l,id:u,transceiver:d}=c;a===De.AUDIO?(o._audioTrack?o._audioTrack._updateOriginMediaStreamTrack(l):(o._audioTrack=new yf(l,o.uid,o._uintid,this.store),w.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote audio track: ").concat(o._audioTrack.getTrackId()))),d&&o._audioTrack._updateRtpTransceiver(d),this.bindRemoteTrackEvents(o,o._audioTrack)):(o._videoTrack?o._videoTrack._updateOriginMediaStreamTrack(l):(o._videoTrack=new Sf(l,o.uid,o._uintid,this.store),w.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote video track: ").concat(o._videoTrack.getTrackId()))),d&&o._videoTrack._updateRtpTransceiver(d),this.bindRemoteTrackEvents(o,o._videoTrack));const h=this.remoteUserMap.get(o);h?h.set(a,u):this.remoteUserMap.set(o,new Map([[a,u]])),this.statsCollector.addRemoteStats(o.uid),this.statsUploader.startUploadInboundStats();const f=this.pendingRemoteTracks.findIndex(g=>{let{user:p,kind:m}=g;return p.uid===o.uid&&a===m});f!==-1&&(this.pendingRemoteTracks.splice(f,1),this.emit(He.MediaReconnectEnd,o.uid))})}async unsubscribe(e,t,n){const r=this.pendingRemoteTracks.filter(a=>{let{user:s,kind:c}=a;return t!==void 0?s.uid===e.uid&&t===c:s.uid===e.uid});if(r.forEach(a=>{const s=this.pendingRemoteTracks.indexOf(a);this.pendingRemoteTracks.splice(s,1)}),this.connection&&this.state===Wt.Connected||n||r.forEach(a=>{let{kind:s}=a;var c;if(s===De.AUDIO)(c=e._audioTrack)===null||c===void 0||c._destroy(),e._audioTrack=void 0;else if(s===De.VIDEO){var l;(l=e._videoTrack)===null||l===void 0||l._destroy(),e._videoTrack=void 0}}),!this.connection||this.state!==Wt.Connected)return;const i=this.filterTobeUnSubscribedTracks(e,t);if(i.length===0)return;await this.connection.stopReceiving(i.map(a=>{let[,{id:s}]=a;return s}));const o=this.createUnsubscribeMessage(i);return this.withdrawRemoteTracks(i),this.remoteUserMap.size===0&&this.statsUploader.stopUploadInboundStats(),i.forEach(a=>{let[s,{kind:c}]=a;var l,u;if(c===De.VIDEO&&s._videoSSRC&&((l=this.connection)===null||l===void 0||l.setStatsRemoteVideoIsReady(s._videoSSRC,!1)),c===De.VIDEO)this.unbindRemoteTrackEvents(s._videoTrack),n||((u=s._videoTrack)===null||u===void 0||u._destroy(),s._videoTrack=void 0);else if(c===De.AUDIO){var d;this.unbindRemoteTrackEvents(s._audioTrack),!n&&((d=s._audioTrack)===null||d===void 0||d._destroy(),s._audioTrack=void 0)}}),o}async unsubscribeDataChannel(e,t){if(t.forEach(i=>{const o=this.pendingRemoteDataChannels.findIndex(a=>a.id===i.id);o!==-1&&this.pendingRemoteDataChannels.splice(o,1)}),!this.connection)return;const n=this.filterTobeUnSubscribedDataChannels(e,t);if(n.length===0)return;t.forEach(i=>{i._close()});const r=this.remoteDataChannelMap.get(e);return n.forEach(i=>{r&&r.delete(i.id)}),r&&r.size===0&&(this.remoteDataChannelMap.delete(e),await this.connection.stopDataChannels(e.uid)),n.map(i=>i.id)}async massUnsubscribe(e){return this.massUnsubscribeNoLock(e)}async massUnsubscribeNoLock(e){let t=[];for(const{user:i,mediaType:o}of e){const a=this.pendingRemoteTracks.filter(s=>{let{user:c,kind:l}=s;return o!==void 0?c.uid===i.uid&&o===l:c.uid===i.uid});a.forEach(s=>{const c=this.pendingRemoteTracks.indexOf(s);this.pendingRemoteTracks.splice(c,1)}),t=t.concat(a)}if(!this.connection||this.state!==Wt.Connected)return void t.forEach(i=>{let{user:o,kind:a}=i;var s;if(a===De.AUDIO)(s=o._audioTrack)===null||s===void 0||s._destroy(),o._audioTrack=void 0;else if(a===De.VIDEO){var c;(c=o._videoTrack)===null||c===void 0||c._destroy(),o._videoTrack=void 0}});const n=js(e).call(e,(i,o)=>{let{user:a,mediaType:s}=o;const c=this.filterTobeUnSubscribedTracks(a,s);return i.concat(c)},[]);if(n.length===0)return;await this.connection.stopReceiving(n.map(i=>{let[,{id:o}]=i;return o}));const r=this.createUnsubscribeAllMessage(n);return this.withdrawRemoteTracks(n),this.remoteUserMap.size===0&&this.statsUploader.stopUploadInboundStats(),n.forEach(i=>{let[o,{kind:a}]=i;var s,c;if(a===De.VIDEO&&o._videoSSRC&&((s=this.connection)===null||s===void 0||s.setStatsRemoteVideoIsReady(o._videoSSRC,!1)),a===De.VIDEO)this.unbindRemoteTrackEvents(o._videoTrack),(c=o._videoTrack)===null||c===void 0||c._destroy(),o._videoTrack=void 0;else if(a===De.AUDIO){var l;this.unbindRemoteTrackEvents(o._audioTrack),(l=o._audioTrack)===null||l===void 0||l._destroy(),o._audioTrack=void 0}}),r}isPreSubScribe(e){return!this.connection||this.state!==Wt.Connected?!1:!!this.connection.getPreMedia(e)}async muteRemote(e,t){if(!this.connection)return;const n=this.remoteUserMap.get(e);if(!n)return void w.warning("[".concat(this.store.clientId,"] P2PChannel.muteRemote has no remote user ").concat(e.uid,"."));if(!n.get(t))return void w.warning("[".concat(this.store.clientId,"] P2PChannel.muteRemote has no remote user ").concat(e.uid," media type ").concat(t,"."));const r=t===De.VIDEO?e._videoSSRC:e._audioSSRC;r!==void 0&&this.connection.setStatsRemoteVideoIsReady(r,!1)}async unmuteRemote(e,t){return this.unmuteRemoteNoLock(e,t)}async unmuteRemoteNoLock(e,t){if(!this.connection)return;const n=this.remoteUserMap.get(e);if(!n)return void w.warning("[".concat(this.store.clientId,"] P2PChannel.unmuteRemote has no remote user ").concat(e.uid,"."));n.get(t)||w.warning("[".concat(this.store.clientId,"] P2PChannel.unmuteRemote has no remote user ").concat(e.uid," media type ").concat(t,"."))}getAllTracks(e){const t=this.localTrackMap.get(se.LocalAudioTrack);if((t==null?void 0:t.track)instanceof Sr){const n=t.track;return Array.from(this.localTrackMap.entries()).filter(r=>{let[i]=r;return i!==se.LocalAudioTrack}).filter(r=>{let[i]=r;return!(e&&i===se.LocalVideoLowTrack)}).map(r=>{let[,{track:i}]=r;return i}).concat(n.trackList)}return Array.from(this.localTrackMap.entries()).filter(n=>{let[r]=n;return!(e&&r===se.LocalVideoLowTrack)}).map(n=>{let[,{track:r}]=n;return r})}getAllDataChannels(){return this.localDataChannels}reportPublishEvent(e,t,n,r,i){if(e){const a=this.localTrackMap.get(se.LocalAudioTrack),s=r?this.localTrackMap.get(se.LocalVideoLowTrack):this.localTrackMap.get(se.LocalVideoTrack);Pe.publish(this.store.sessionId,{eventElapse:ni.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:e,ec:t,audioName:a==null?void 0:a.track.getTrackLabel(),videoName:s==null?void 0:s.track.getTrackLabel(),screenshare:(s==null?void 0:s.track._hints.indexOf(gn.SCREEN_TRACK))!==-1,audio:!!a,video:!!s,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:i})}else{var o;n||(n=[]);const a=n.find(c=>c instanceof Ln),s=r?(o=this.localTrackMap.get(se.LocalVideoTrack))===null||o===void 0?void 0:o.track:n.find(c=>c instanceof hn);Pe.publish(this.store.sessionId,{eventElapse:ni.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:e,ec:t,audioName:a==null?void 0:a.getTrackLabel(),videoName:s==null?void 0:s.getTrackLabel(),screenshare:(s==null?void 0:s._hints.indexOf(gn.SCREEN_TRACK))!==-1,audio:!!a,video:!!s,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:i})}}reportSubscribeEvent(e,t,n,r){const i=r===De.VIDEO?n._videoSSRC:n._audioSSRC;i&&Pe.subscribe(this.store.sessionId,{succ:e,ec:t,video:r===De.VIDEO,audio:r===De.AUDIO,peerid:n.uid,subscribeRequestid:i,p2pid:this.store.p2pId,eventElapse:ni.measureFromSubscribeStart(this.store.clientId,i),preSsrc:this.isPreSubScribe(i)})}reset(){w.debug("[".concat(this.store.clientId,"] P2PChannel.reset")),this.mutex=new ri("P2PChannel-mutex"),this.connection&&(this.connection.close(),this.unbindConnectionEvents(this.connection),this.connection=void 0),this.shouldForwardP2PCreation&&(this.connection=this.isPlanB?new Kp({},this.store):new Ss({},this.store),this.bindConnectionEvents(this.connection)),this.statsUploader.stopUploadOutboundStats(),this.statsUploader.stopUploadInboundStats(),this.statsUploader.stopUploadTransportStats(),this.statsUploader.stopUploadExtensionUsageStats(),this.unbindLocalTrackEvents(),this.unbindAllRemoteTrackEvents(),this.unbindRtpTransceiver();const e=this.localTrackMap.get(se.LocalAudioTrack);if((e==null?void 0:e.track)instanceof Sr){if(e.track.trackList.length>0){const t=e.track;e.track.trackList.forEach(n=>{t.removeAudioTrack(n)})}e.track.close()}this.localTrackMap.clear(),this.remoteUserMap.clear(),this.statsCollector.removeRemoteStats(),this.statsCollector.removeLocalStats(),this.iceFailedCount=0,this.dtlsFailedCount=0,this.pendingLocalTracks=[],this.pendingRemoteTracks=[],this.localDataChannels=[],this.remoteDataChannelMap.clear(),this.pendingLocalDataChannels=[],this.pendingRemoteDataChannels=[],this.state=Wt.Disconnected}getStats(){var e;return(e=this.connection)===null||e===void 0?void 0:e.getStats()}getRemoteVideoIsReady(e){var t;return((t=this.connection)===null||t===void 0?void 0:t.getRemoteVideoIsReady(e))||!1}getLocalAudioVolume(){const e=this.localTrackMap.get(se.LocalAudioTrack);if(e)return e.track.getVolumeLevel()}getLocalVideoSize(){const e=this.localTrackMap.get(se.LocalVideoTrack);if(e)return{width:e.track.videoWidth||0,height:e.track.videoHeight||0}}getEncoderConfig(e){const t=this.localTrackMap.get(e);return t&&t.track instanceof hn||t&&t.track instanceof Ln?t.track._encoderConfig:void 0}getLocalMedia(e){return this.localTrackMap.get(e)}hasLocalMedia(){return this.localTrackMap.size>0}hasRemoteMedia(e,t){if(!e)return this.remoteUserMap.size>0;const n=this.remoteUserMap.get(e);return!!n&&(!t||n.has(t))}async hasRemoteMediaWithLock(e,t){if(!e)return this.remoteUserMap.size>0;const n=this.remoteUserMap.get(e);return!!n&&(!t||n.has(t))}getRemoteMedia(e){var t;const n=Array.from(jo(t=this.remoteUserMap).call(t)).find(r=>r.uid===e);return n?{audioTrack:n.audioTrack,audioSSRC:n._audioSSRC,videoTrack:n.videoTrack,videoSSRC:n._videoSSRC}:{}}getAudioLevels(){let e=Array.from(this.remoteUserMap.entries()).map(n=>{let[r]=n;return{uid:r.uid,level:r.audioTrack?100*r.audioTrack._source.getAccurateVolumeLevel():0}});const t=this.localTrackMap.get(se.LocalAudioTrack);return t&&e.push({level:100*t.track._source.getAccurateVolumeLevel(),uid:this.store.uid}),e=xg(e).call(e,(n,r)=>n.level-r.level),e}async disconnectForReconnect(){this.connection&&(w.debug("[".concat(this.store.clientId,"] P2PChannel.disconnectForReconnect closing P2PConnection")),this.state=Wt.Reconnecting,H("KEEP_LAST_FRAME")&&this.remoteUserMap.size!==0&&Array.from(this.remoteUserMap.entries()).forEach(e=>{let[t]=e;var n;t._videoTrack&&t._videoTrack._player&&((n=t._videoTrack._player.getVideoElement())===null||n===void 0||n.pause(),t._videoTrack._player.isKeepLastFrame=!0,t._videoTrack._originMediaStreamTrack.stop())}),this.connection.close(),this.unbindConnectionEvents(this.connection),this.connection=void 0,this.shouldForwardP2PCreation&&(this.connection=this.isPlanB?new Kp({},this.store):new Ss({},this.store),this.bindConnectionEvents(this.connection)),this.localTrackMap.size!==0&&(Array.from(this.localTrackMap.entries()).forEach(e=>{var t;let[n,{track:r}]=e;switch(n){case se.LocalVideoTrack:Ce(t=r._hints).call(t,gn.LOW_STREAM)?r.close():this.pendingLocalTracks.push(r);break;case se.LocalAudioTrack:r instanceof Sr?this.pendingLocalTracks=this.pendingLocalTracks.concat(r.trackList):this.pendingLocalTracks.push(r);case se.LocalVideoLowTrack:}}),this.emit(He.MediaReconnectStart,this.store.uid)),this.unbindLocalTrackEvents(),this.localTrackMap.clear(),this.remoteUserMap.size!==0&&Array.from(this.remoteUserMap.entries()).forEach(e=>{let[t,n]=e;Array.from(jo(n).call(n)).forEach(r=>{this.setPendingRemoteMedia(t,r)}),this.emit(He.MediaReconnectStart,t.uid)}),this.unbindAllRemoteTrackEvents(),this.remoteUserMap.clear(),this.localDataChannels.length!==0&&(this.localDataChannels.forEach(e=>{this.pendingLocalDataChannels.push(e)}),this.localDataChannels.length=0),this.remoteDataChannelMap.size!==0&&(Array.from(this.remoteDataChannelMap.entries()).forEach(e=>{let[t,n]=e;Array.from(jo(n).call(n)).forEach(r=>{this.setPendingRemoteDataChannel(t,r)})}),this.remoteDataChannelMap.clear()),this.statsUploader.stopUploadOutboundStats(),this.statsUploader.stopUploadInboundStats(),this.statsUploader.stopUploadTransportStats(),w.debug("[".concat(this.store.clientId,"] P2PChannel disconnected, waiting to reconnect.")))}hasPendingRemoteDataChannel(e,t){for(const n of this.pendingRemoteDataChannels){const{user:r,id:i}=n;if((e instanceof Hl?e.uid:e)===r.uid&&i===t)return!0}return!1}setPendingRemoteDataChannel(e,t){this.hasPendingRemoteDataChannel(e,t)||this.pendingRemoteDataChannels.push({user:e,id:t})}hasPendingRemoteMedia(e,t){for(const n of this.pendingRemoteTracks){const{user:r,kind:i}=n;if((e instanceof Hl?e.uid:e)===r.uid&&t===i)return!0}return!1}setPendingRemoteMedia(e,t){this.hasPendingRemoteMedia(e,t)||this.pendingRemoteTracks.push({user:e,kind:t})}restartICE(e){var t=this;return Ms(function*(){if(!t.connection||t.state!==Wt.Connected)return;const n=yield Dt(t.mutex.lock("From P2PChannel.restartICE"));let r;try{r=yield Dt(t.connection.restartICE(e));const o=yield Dt(r.next());if(o.done)return;const a=o.value,s=yield a;switch(t.reportPCDisconnectedOrFailed(e),e){case Ao.TCP:t._pcStatsUploadType=$c.TCP_RESTART;break;case Ao.RELAY:t._pcStatsUploadType=$c.RELAY_RESTART;break;default:t._pcStatsUploadType=$c.OLD_RESTART}t._isInRestartIce=!0,r.next(s)}catch(o){var i;(i=r)===null||i===void 0||i.throw(o)}finally{n()}})()}getUplinkNetworkQuality(){if(!this.connection)return 0;const e=this.connection.getStats(),t=this.localTrackMap.get(se.LocalVideoTrack),n=this.localTrackMap.get(se.LocalAudioTrack),r=e.videoSend.find(f=>f.ssrc===(t==null?void 0:t.ssrcs[0].ssrcId)),i=e.audioSend.find(f=>f.ssrc===(n==null?void 0:n.ssrcs[0].ssrcId));if(!r||!i)return 1;const o=ga(this,He.NeedSignalRTT),a=r?r.rttMs:void 0,s=i?i.rttMs:void 0,c=a&&s?(a+s)/2:a||s,l=(c&&o?(c+o)/2:c||o)||0,u=100*e.sendPacketLossRate*.7/50+.3*l/1500,d=u<.17?1:u<.36?2:u<.59?3:u<.1?4:5,h=t==null?void 0:t.track;if(h&&h._encoderConfig&&h._hints.indexOf(gn.SCREEN_TRACK)===-1){const f=h._encoderConfig.bitrateMax,g=e.bitrate.actualEncoded;if(f&&g){const p=(1e3*f-g)/(1e3*f);return t9[p<.15?0:p<.3?1:p<.45?2:p<.6?3:4][d]}}return d}getDownlinkNetworkQuality(){if(!this.connection)return 0;const e=this.connection.getStats();let t=0;return Array.from(this.remoteUserMap.entries()).forEach(n=>{let[r]=n;const i=r._audioSSRC,o=r._videoSSRC,a=e.audioRecv.find(g=>g.ssrc===i),s=e.videoRecv.find(g=>g.ssrc===o);if(!a&&!s)return void(t+=1);const c=ga(this,He.NeedSignalRTT),l=e.rtt,u=(l&&c?(l+c)/2:l||c)||0,d=a?a.jitterMs:void 0,h=e.recvPacketLossRate;let f=.7*h*100/50+.3*u/1500;d&&(f=.6*h*100/50+.2*u/1500+.2*d/400),t+=f<.1?1:f<.17?2:f<.36?3:f<.59?4:5}),this.remoteUserMap.size>0?Math.round(t/this.remoteUserMap.size):t}async muteLocalTrack(e){return new _e((t,n)=>{this.handleMuteLocalTrack(e,t,n)})}async replaceTrack(e,t){var n;if(w.debug("[".concat(this.store.clientId,"] P2PChannel replaceTrack from [").concat(e.getTrackId(),"] to [").concat(t.getTrackId(),"]")),!this.connection||this.state!==Wt.Connected)return;const r=Array.from(this.localTrackMap.entries()).find(o=>{let[,{track:a}]=o;return e===a});if(!r)return;const i=r[0];if(e!==t&&(this.unbindLocalTrackEvents([{track:e,type:i}]),this.bindLocalTrackEvents([{track:t,type:i}]),r[1].track=t),await((n=this.connection)===null||n===void 0?void 0:n.replaceTrack(t,r[1].id)),this.isPlanB){const o=r[1];o.id=t._mediaStreamTrack.id,this.localTrackMap.set(i,o)}if(i===se.LocalVideoTrack&&!H("DISABLE_DUAL_STREAM_USE_ENCODING")&&It().supportDualStreamEncoding){const o=this.localTrackMap.get(se.LocalVideoLowTrack);if(o){const a=e._mediaStreamTrack.clone();o.track._originMediaStreamTrack.stop(),o.track._mediaStreamTrack=a,o.track._originMediaStreamTrack=a,await new _e((s,c)=>{this.handleReplaceTrack(o.track,s,c,!0)})}}}filterTobePublishedTracks(e,t,n){const r=[],i=this.getAllTracks();e=qh(e=e.filter(c=>i.indexOf(c)===-1));let o,a=!1;const s=this.localTrackMap.get(se.LocalAudioTrack);for(const c of e){if(c instanceof hn&&(this.localTrackMap.has(se.LocalVideoTrack)||a?new Q(k.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS).throw():(r.push({track:c,type:se.LocalVideoTrack}),a=!0),t)){const l=this.getLowVideoTrack(c,n);r.push({track:l,type:se.LocalVideoLowTrack})}if(c instanceof Ln)if(s){const l=s.track;if(l instanceof Sr)sA([c]),l.addAudioTrack(c),this.bindLocalAudioTrackEvents(c,!0);else{const u=RT([l,c]);w.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection will replace audioTrack [").concat(u.getTrackId(),"]")),this.replaceTrack(l,u)}}else o instanceof Sr?(sA([c]),o.addAudioTrack(c)):o||!c._useAudioElement&&It().webAudioMediaStreamDest&&!c._bypassWebAudio?o=RT(o?[c,o]:[c]):o=c}return o&&(w.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection will send audioTrack [").concat(o.getTrackId(),"]")),r.push({track:o,type:se.LocalAudioTrack})),r}filterTobeUnpublishedTracks(e){const t=[],n=this.getAllTracks();e=qh(e=e.filter(r=>n.indexOf(r)!==-1));for(const r of e){if(r instanceof Ln){const i=this.localTrackMap.get(se.LocalAudioTrack);if(!i)continue;i.track instanceof Sr?(i.track.removeAudioTrack(r),this.unbindLocalAudioTrackEvents(r),i.track.trackList.length===0&&(t.push([se.LocalAudioTrack,i]),i.track.close())):t.push([se.LocalAudioTrack,i])}if(r instanceof hn){const i=this.localTrackMap.get(se.LocalVideoTrack);if(!i)continue;t.push([se.LocalVideoTrack,i]);const o=this.localTrackMap.get(se.LocalVideoLowTrack);o&&t.push([se.LocalVideoLowTrack,o])}}return t}filterTobePublishedDataChannels(e){return e=(e=qh(e)).filter(t=>this.localDataChannels.findIndex(n=>n.id===t.id)===-1)}filterTobeUnpublishedDataChannels(e){return e=(e=(e=qh(e)).filter(t=>this.localDataChannels.indexOf(t)!==-1)).filter(t=>t._originDataChannel)}bindLocalTrackEvents(e){e.forEach(t=>{let{track:n,type:r}=t;switch(r){case se.LocalVideoTrack:n.addListener(Te.GET_STATS,this.handleGetLocalVideoStats),n.addListener(Te.GET_RTC_STATS,this.handleGetRTCStats),n.addListener(Te.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),n.addListener(Te.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),n.addListener(Te.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),n.addListener(Te.NEED_UPDATE_VIDEO_SEND_PARAMETERS,this.handleUpdateVideoSendParameters),n.addListener(Te.NEED_REPLACE_TRACK,this.handleReplaceTrack),n.addListener(Te.NEED_MUTE_TRACK,this.handleMuteLocalTrack),n.addListener(Te.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case se.LocalAudioTrack:this.bindLocalAudioTrackEvents(n);case se.LocalVideoLowTrack:}})}bindLocalAudioTrackEvents(e,t){e instanceof Sr?e.trackList.forEach(n=>{n.addListener(Te.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),n.addListener(Te.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),n.addListener(Te.GET_STATS,this.handleGetLocalAudioStats),n.addListener(Te.NEED_MUTE_TRACK,this.handleMuteLocalTrack),n.addListener(Te.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)}):(e.addListener(Te.GET_STATS,this.handleGetLocalAudioStats),e.addListener(Te.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.addListener(Te.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.addListener(Te.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.addListener(Te.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack),t||(e.addListener(Te.NEED_REPLACE_TRACK,this.handleReplaceTrack),e.addListener(Te.NEED_REPLACE_MIXING_TRACK,this.handleReplaceMixingTrack)))}unbindLocalTrackEvents(e){e||(e=Array.from(this.localTrackMap.entries()).map(t=>{let[n,{track:r}]=t;return{track:r,type:n}})),e.forEach(t=>{let{track:n,type:r}=t;switch(r){case se.LocalVideoTrack:n.off(Te.GET_STATS,this.handleGetLocalVideoStats),n.off(Te.GET_RTC_STATS,this.handleGetRTCStats),n.off(Te.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),n.off(Te.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),n.off(Te.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),n.off(Te.NEED_UPDATE_VIDEO_SEND_PARAMETERS,this.handleUpdateVideoSendParameters),n.off(Te.NEED_REPLACE_TRACK,this.handleReplaceTrack),n.off(Te.NEED_MUTE_TRACK,this.handleMuteLocalTrack),n.off(Te.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case se.LocalAudioTrack:this.unbindLocalAudioTrackEvents(n);case se.LocalVideoLowTrack:}})}unbindLocalAudioTrackEvents(e){e instanceof Sr?e.trackList.forEach(t=>{t.off(Te.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),t.off(Te.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),t.off(Te.GET_STATS,this.handleGetLocalAudioStats),t.off(Te.NEED_MUTE_TRACK,this.handleMuteLocalTrack),t.off(Te.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)}):(e.off(Te.GET_STATS,this.handleGetLocalAudioStats),e.off(Te.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.off(Te.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.off(Te.NEED_REPLACE_TRACK,this.handleReplaceTrack),e.off(Te.NEED_REPLACE_MIXING_TRACK,this.handleReplaceMixingTrack),e.off(Te.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.off(Te.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack))}bindRemoteTrackEvents(e,t){t instanceof Sf&&t.addListener(Te.GET_STATS,n=>{n(this.handleGetRemoteVideoStats(e))}),t instanceof yf&&t.addListener(Te.GET_STATS,n=>{n(this.handleGetRemoteAudioStats(e))})}unbindRemoteTrackEvents(e){e&&e.removeAllListeners(Te.GET_STATS)}unbindAllRemoteTrackEvents(){Array.from(this.remoteUserMap.entries()).forEach(e=>{let[t,n]=e;n.has(De.AUDIO)&&this.unbindRemoteTrackEvents(t._audioTrack),n.has(De.VIDEO)&&this.unbindRemoteTrackEvents(t._videoTrack)})}createGatewayPublishMessage(e,t){return e.map((n,r)=>{var i;let o,a,{track:s,type:c}=n;switch(c){case se.LocalAudioTrack:o=Gt.Audio,a={dtx:s instanceof aS&&s._config.DTX,hq:!1,lq:!1,stereo:!1,speech:!1};break;case se.LocalVideoTrack:o=Ce(i=s._hints).call(i,gn.SCREEN_TRACK)?Gt.Screen:Gt.High,a=oc(oc({},QM(s)),{},{codec:this.store.codec,svc_mode:tA()});break;case se.LocalVideoLowTrack:o=Gt.Low,a=oc(oc({},QM(s)),{},{codec:this.store.codec,svc_mode:tA()})}return{stream_type:o,attributes:a,ssrcs:t[r]}})}createGatewayUnpublishMessage(e){return e.map(t=>{var n;let r,[i,{track:o,ssrcs:a,id:s}]=t;switch(i){case se.LocalVideoTrack:r=Ce(n=o._hints).call(n,gn.SCREEN_TRACK)?Gt.Screen:Gt.High;break;case se.LocalAudioTrack:r=Gt.Audio;break;case se.LocalVideoLowTrack:r=Gt.Low}return{stream_type:r,ssrcs:a,mid:s}})}assignLocalTracks(e,t){e.forEach((n,r)=>{let{track:i,type:o}=n;this.localTrackMap.set(o,{track:i,id:t[r].id,ssrcs:t[r].localSSRC})})}withdrawLocalTracks(e){e.forEach(t=>{let[n]=t;this.localTrackMap.delete(n)})}bindConnectionEvents(e){e.onConnectionStateChange=async t=>{if(w.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onConnectionStateChange(").concat(t,")")),this.emit(He.PeerConnectionStateChange,t),t!=="connected"||this.store.keyMetrics.peerConnectionEnd||this.store.peerConnectionEnd(),t==="connected"&&(this._restartTimer&&(clearTimeout(this._restartTimer),this._restartTimer=void 0),(this._isFirstConnected||this._isInRestartIce)&&this.reportPCStats(Date.now(),!0,this._pcStatsUploadType),this._isInRestartIce=!1,this._isFirstConnected=!1,this._isStartRestartIce=!1),H("NEW_ICE_RESTART")){var n;if(Ce(n=this._restartStates).call(n,t)){if(this._isStartRestartIce)return;this._isStartRestartIce=!0;const r=a=>{(e.iceConnectionState==="disconnected"||e.iceConnectionState==="checking"||e.iceConnectionState==="failed")&&(w.debug("[".concat(this.store.clientId,"] [P2PChannel] start use restartICE, type is ").concat(a)),ga(this,He.QueryClientConnectionState)==="CONNECTED"&&this.emit(He.RequestRestartICE,a))},i=()=>{e.iceConnectionState!=="disconnected"&&e.iceConnectionState!=="checking"&&e.iceConnectionState!=="failed"||(this.reportPCStats(Date.now(),!1,this._pcStatsUploadType),w.debug("[".concat(this.store.clientId,"] P2PConnection disconnected timeout, force reconnect")),setTimeout(()=>this.emit(He.P2PLost),0),this.iceFailedCount+=1,this.requestReconnect())},o=H("ICE_RESTART_INTERVAL");return void(this._restartTimer=window.setTimeout(()=>{if(H("JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE")&&It().supportPCSetConfiguration)r(Ao.RELAY),this._restartTimer=window.setTimeout(i,o);else if(Fn())r(Ao.UDP),this._restartTimer=window.setTimeout(i,4e3);else{if(r(Ao.TCP),It().supportPCSetConfiguration)return void(this._restartTimer=window.setTimeout(()=>{r(Ao.RELAY),this._restartTimer=window.setTimeout(i,o)},o));this._restartTimer=window.setTimeout(i,o)}},800))}}else{if(t==="disconnected"&&e.iceConnectionState==="disconnected")return setTimeout(()=>{e.iceConnectionState==="disconnected"&&H("ICE_RESTART")&&ga(this,He.QueryClientConnectionState)==="CONNECTED"&&this.emit(He.RequestRestartICE)},800),void setTimeout(()=>{e.peerConnectionState==="disconnected"&&(w.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection disconnected timeout 4000ms, force reconnect")),this.reportPCStats(Date.now(),!1,this._pcStatsUploadType),this._isInRestartIce=!1,setTimeout(()=>this.emit(He.P2PLost),0),this.iceFailedCount+=1,this.requestReconnect())},4e3);t==="failed"&&(w.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection state failed, force reconnect")),this.reportPCDisconnectedOrFailed(),setTimeout(()=>this.emit(He.P2PLost),0),this.iceFailedCount+=1,await this.requestReconnect())}},e.onICEConnectionStateChange=t=>{t!=="connected"||this.store.keyMetrics.iceConnectionEnd||this.store.iceConnectionEnd(),w.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICEConnectionStateChange(").concat(t,")")),Pe.reportApiInvoke(this.store.sessionId,{name:"ICEConnectionStateChange",options:t,tag:kn.TRACER}).onSuccess(),this.emit(He.IceConnectionStateChange,t)},e.onICETransportStateChange=t=>{w.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICETransportStateChange(").concat(t,")"))},e.onDTLSTransportStateChange=t=>{w.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportStateChange(").concat(t,")"))},e.onDTLSTransportError=t=>{w.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportError(").concat(t,")"))},e.onFirstAudioDecoded=t=>{var n;const r=Array.from(jo(n=this.remoteUserMap).call(n)).find(o=>o._audioSSRC===t);var i;r&&(this.store.subscribe(r.uid,"audio",void 0,void 0,void 0,Date.now()),(i=r.audioTrack)===null||i===void 0||i.emit(_f.FIRST_FRAME_DECODED),Pe.firstRemoteFrame(this.store.sessionId,Or.FIRST_AUDIO_DECODE,xn.FIRST_AUDIO_DECODE,{peer:r._uintid,subscribeElapse:ni.measureFromSubscribeStart(this.store.clientId,t),subscribeRequestid:t,p2pid:this.store.p2pId}))},e.onFirstAudioReceived=t=>{var n;const r=Array.from(jo(n=this.remoteUserMap).call(n)).find(i=>i._audioSSRC===t);r&&Pe.firstRemoteFrame(this.store.sessionId,Or.FIRST_AUDIO_RECEIVED,xn.FIRST_AUDIO_RECEIVED,{peer:r._uintid,subscribeElapse:ni.measureFromSubscribeStart(this.store.clientId,t),subscribeRequestid:t,p2pid:this.store.p2pId})},e.onFirstVideoDecoded=(t,n,r)=>{this.reportVideoFirstFrameDecoded(t,n,r)},e.onFirstVideoReceived=t=>{var n;const r=Array.from(jo(n=this.remoteUserMap).call(n)).find(i=>i._videoSSRC===t);r&&Pe.firstRemoteFrame(this.store.sessionId,Or.FIRST_VIDEO_RECEIVED,xn.FIRST_VIDEO_RECEIVED,{peer:r._uintid,subscribeElapse:ni.measureFromSubscribeStart(this.store.clientId,t),subscribeRequestid:t,p2pid:this.store.p2pId})},e.onSelectedLocalCandidateChanged=(t,n)=>{const r=t.candidateType==="relay",i=n.candidateType==="relay";n.candidateType!=="unknown"&&r===i||this.emit(He.ConnectionTypeChange,r),w.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.SelectedLocalCandidateChanged(").concat(JSON.stringify(Xl(n))," -> ").concat(JSON.stringify(Xl(t)),")"))},e.onSelectedRemoteCandidateChanged=(t,n)=>{w.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.SelectedRemoteCandidateChanged(").concat(JSON.stringify(Xl(n))," -> ").concat(JSON.stringify(Xl(t)),")"))},e.onFirstVideoDecodedTimeout=t=>{this.reportVideoFirstFrameDecoded(t,void 0,void 0,!0)},e.getLocalVideoStats=()=>{const t=this.statsCollector.getLocalVideoTrackStats(),n=this.statsCollector.getRTCStats();return oc(oc({},t),n)}}unbindConnectionEvents(e){e.onConnectionStateChange=void 0,e.onICEConnectionStateChange=void 0,e.onICETransportStateChange=void 0,e.onDTLSTransportStateChange=void 0,e.onDTLSTransportError=void 0,e.onFirstAudioDecoded=void 0,e.onFirstAudioReceived=void 0,e.onFirstVideoDecoded=void 0,e.onFirstVideoReceived=void 0,e.onSelectedLocalCandidateChanged=void 0,e.onSelectedRemoteCandidateChanged=void 0,e.onFirstVideoDecodedTimeout=void 0,e.getLocalVideoStats=void 0}filterTobeMutedTracks(e){const t=[];if(this.getAllTracks().indexOf(e)===-1)return t;const n=this.localTrackMap.get(se.LocalAudioTrack);if(e instanceof Ln&&(n==null?void 0:n.track)instanceof Sr)return n.track.isActive||t.push([se.LocalAudioTrack,n]),t;const r=Array.from(this.localTrackMap.entries()).find(i=>{let[,{track:o}]=i;return e===o});if(r&&(t.push(r),r[0]===se.LocalVideoTrack)){const i=this.localTrackMap.get(se.LocalVideoLowTrack);i&&t.push([se.LocalVideoLowTrack,i])}return t}filterTobeUnmutedTracks(e){const t=[],n=this.localTrackMap.get(se.LocalAudioTrack);if(e instanceof Ln&&(n==null?void 0:n.track)instanceof Sr)return n.track.isActive&&t.push([se.LocalAudioTrack,n]),t;const r=Array.from(this.localTrackMap.entries()).find(i=>{let[,{track:o}]=i;return e===o});if(r)if(r[0]===se.LocalVideoTrack){t.push(r);const i=this.localTrackMap.get(se.LocalVideoLowTrack);i&&t.push([se.LocalVideoLowTrack,i])}else t.push(r);return t}createMuteMessage(e){return e.map(t=>{var n;let r,[i,{track:o,ssrcs:a,id:s}]=t;switch(i){case se.LocalAudioTrack:r=Gt.Audio;break;case se.LocalVideoTrack:r=Ce(n=o._hints).call(n,gn.SCREEN_TRACK)?Gt.Screen:Gt.High;break;case se.LocalVideoLowTrack:r=Gt.Low}return{stream_type:r,ssrcs:a,mid:s}})}createUnmuteMessage(e){return e.map(t=>{var n;let r,[i,{track:o,ssrcs:a,id:s}]=t;switch(i){case se.LocalAudioTrack:r=Gt.Audio;break;case se.LocalVideoTrack:r=Ce(n=o._hints).call(n,gn.SCREEN_TRACK)?Gt.Screen:Gt.High;break;case se.LocalVideoLowTrack:r=Gt.Low}return{stream_type:r,ssrcs:a,mid:s}})}filterTobeUnSubscribedTracks(e,t){const n=[],r=this.remoteUserMap.get(e);if(!r)return n;if(t){const i=r.get(t);if(!i)return n;n.push([e,{kind:t,id:i}])}else Array.from(r.entries()).forEach(i=>{let[o,a]=i;n.push([e,{kind:o,id:a}])});return n}filterTobeUnSubscribedDataChannels(e,t){const n=[];return t.forEach(r=>{var i;(i=this.remoteDataChannelMap.get(e))!==null&&i!==void 0&&i.has(r.id)&&n.push(r)}),n}createUnsubscribeMessage(e){const t=[];return e.forEach(n=>{let[r,{kind:i,id:o}]=n;switch(i){case De.VIDEO:return void(r._videoSSRC&&t.push({stream_type:De.VIDEO,ssrcId:r._videoSSRC}));case De.AUDIO:return void(r._audioSSRC&&t.push({stream_type:De.AUDIO,ssrcId:r._audioSSRC}))}}),t}createUnsubscribeAllMessage(e){const t=new Map;return e.forEach(n=>{let[r,{kind:i}]=n;if(t.has(r)){let o=t.get(r);i===De.VIDEO?o|=_r.Video:o|=_r.Audio,t.set(r,o)}else i===De.VIDEO?t.set(r,_r.Video):t.set(r,_r.Audio)}),{users:Array.from(t.entries()).map(n=>{let[r,i]=n;return{stream_id:r.uid,stream_type:i}})}}withdrawRemoteTracks(e){e.forEach(t=>{let[n,{kind:r}]=t;const i=this.remoteUserMap.get(n);i&&(i.delete(r),Array.from(i.entries()).length===0&&this.remoteUserMap.delete(n))})}async updateBitrateLimit(e){const t=this.localTrackMap.get(se.LocalVideoTrack),n=this.localTrackMap.get(se.LocalVideoLowTrack);t&&await t.track.setBitrateLimit(e.uplink),n&&e.low_stream_uplink&&await n.track.setBitrateLimit({max_bitrate:e.low_stream_uplink.bitrate,min_bitrate:e.low_stream_uplink.bitrate||0})}isP2PDisconnected(){return this.connection?this.connection.peerConnectionState!=="connected":!0}mapPubResToRemoteConfig(e,t){return e.map((n,r)=>{var i;let{stream_type:o}=n;return(i=t.find(a=>{let{stream_type:s}=a;return o===s}))===null||i===void 0?void 0:i.attributes})}async tryToUnmuteAudio(e){for(let n=0;n<e.length;n++)if(e[n]instanceof Ln){var t;const r=this.filterTobeUnmutedTracks(e[n]);if(r.length===0)continue;await((t=this.connection)===null||t===void 0?void 0:t.unmuteLocal(r.map(o=>{let[,{id:a}]=o;return a})));const i=this.createUnmuteMessage(r);return void await rn(this,He.RequestUnmuteLocal,i)}}bindStatsUploaderEvents(){this.statsUploader.requestStats=()=>this.getStats(),this.statsUploader.requestLocalMedia=()=>Array.from(this.localTrackMap.entries()),this.statsUploader.requestRemoteMedia=()=>Array.from(this.remoteUserMap.entries()),this.statsUploader.requestVideoIsReady=e=>{var t;return!((t=this.connection)===null||t===void 0||!t.getRemoteVideoIsReady(e))},this.statsUploader.requestUpload=(e,t)=>this.emit(He.RequestUpload,e,t),this.statsUploader.requestUploadStats=e=>this.emit(He.RequestUploadStats,e),this.statsUploader.requestAllTracks=()=>this.getAllTracks()}unbindStatsUploaderEvents(){this.statsUploader.requestStats=void 0,this.statsUploader.requestLocalMedia=void 0,this.statsUploader.requestRemoteMedia=void 0,this.statsUploader.requestVideoIsReady=void 0}async requestReconnect(){this.dtlsFailedCount+=1,await Lr(aN(this.dtlsFailedCount,ar)),this.emit(He.RequestReconnect)}async reconnectP2P(){const e=Array.from(this.localTrackMap.entries()),t=this.createGatewayUnpublishMessage(e);Array.from(this.remoteUserMap.entries()),t.length>0&&await Kr(this,He.RequestUnpublishForReconnectPC,t),this.disconnectForReconnect(),this.emit(He.RequestReconnectPC)}canPublishLowStream(){return this.localTrackMap.has(se.LocalVideoTrack)||this.pendingLocalTracks.some(e=>e instanceof hn)}throwIfTrackTypeNotMatch(e){if(e.filter(t=>t instanceof hn).length>1)throw new Q(k.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(e.filter(t=>t instanceof Ln).length>1&&(e.some(t=>t instanceof Ln&&t._bypassWebAudio)||!It().webAudioMediaStreamDest))throw new Q(k.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode");for(const t of e){if(t instanceof hn&&this.pendingLocalTracks.some(n=>n instanceof hn))throw new Q(k.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(t instanceof Ln&&this.pendingLocalTracks.some(n=>n instanceof Ln)&&(!It().webAudioMediaStreamDest||t._bypassWebAudio||this.pendingLocalTracks.some(n=>n instanceof Ln&&n._bypassWebAudio)))throw new Q(k.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode")}}getLowVideoTrack(e,t){const n=!H("DISABLE_DUAL_STREAM_USE_ENCODING")&&It().supportDualStreamEncoding,r=oc(oc({},{width:160,height:120,framerate:15,bitrate:50}),t);let i;i=n?e._mediaStreamTrack.clone():aA(e,r);const o=cn(8,"track-low-"),a=new hn(i,oc(oc({},n&&{scaleResolutionDownBy:KI(r,e)}),{},{frameRate:r.framerate,bitrateMax:r.bitrate,bitrateMin:r.bitrate}),void 0,void 0,o);return a.on(gd.TRANSCEIVER_UPDATED,s=>{e._updateRtpTransceiver(s,$f.LOW_STREAM)}),a._hints.push(gn.LOW_STREAM),e.on("sei-to-send",s=>{a.emit("sei-to-send",s)}),e.addListener(Te.NEED_CLOSE,()=>{a.close()}),a}async globalLock(){return this.mutex.lock("From P2PChannel.globalLock")}async reportPCStats(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;if(this.connection&&this.connection instanceof Ss){var i,o,a,s;const c=this.store.keyMetrics.descriptionStart||0,{iceConnectionState:l,dtlsTransportState:u,peerConnectionState:d}=this.connection,{local:h,remote:f}=await this.connection.getSelectedCandidatePair();Pe.pcStats(this.store.sessionId,{startTime:c,eventElapse:e-c||0,iceconnectionsate:l,dtlsstate:u,connectionstate:d,intSucc:t?1:2,error:r,selectedLocalCandidateProtocol:(i=h==null?void 0:h.protocol)!==null&&i!==void 0?i:"",selectedLocalCandidateType:(o=h.candidateType)!==null&&o!==void 0?o:"",selectedLocalCandidateAddress:"".concat(h.address,":").concat(h.port),selectedRemoteCandidateProtocol:(a=f.protocol)!==null&&a!==void 0?a:"",selectedRemoteCandidateType:(s=f.candidateType)!==null&&s!==void 0?s:"",selectedRemoteCandidateAddress:"".concat(f.address,":").concat(f.port),restartCnt:n,preallocation:this.connection.isPreallocation})}}reportVideoFirstFrameDecoded(e,t,n,r){var i;const o=Array.from(jo(i=this.remoteUserMap).call(i)).find(a=>a._videoSSRC===e);if(o){r||this.store.subscribe(o.uid,"video",void 0,void 0,void 0,void 0,Date.now());const a=this.store.keyMetrics,s=a.subscribe.find(c=>c.userId===o.uid&&c.type==="video");Pe.firstRemoteVideoDecode(this.store.sessionId,Or.FIRST_VIDEO_DECODE,xn.FIRST_VIDEO_DECODE,{peer:o._uintid,videowidth:t,videoheight:n,subscribeElapse:ni.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId,apEnd:a.requestAPEnd||0,apStart:a.requestAPStart||0,joinGwEnd:a.joinGatewayEnd||0,joinGwStart:a.joinGatewayStart||0,pcEnd:a.peerConnectionEnd||0,pcStart:a.peerConnectionStart||0,subscriberEnd:(s==null?void 0:s.subscribeEnd)||0,subscriberStart:(s==null?void 0:s.subscribeStart)||0,videoAddNotify:(s==null?void 0:s.streamAdded)||0,state:r?1:0,firstFrame:(s==null?void 0:s.firstFrame)||0})}}async remoteMediaSsrcChanged(e,t,n){if(!this.connection)return!1;const r=this.remoteUserMap.get(e);if(!r)return!1;const i=r.get(t);if(!i)return!1;const o=await this.connection.getRemoteSSRC(i);return o!==void 0&&o!==n}unbindRtpTransceiver(){this.localTrackMap.size!==0&&Array.from(this.localTrackMap.entries()).forEach(e=>{let[t,{track:n}]=e;t===se.LocalVideoLowTrack?n._updateRtpTransceiver(void 0,$f.LOW_STREAM):n._updateRtpTransceiver(void 0)})}reportPCDisconnectedOrFailed(e){this.connection&&this.connection instanceof Ss&&(this.connection.iceConnectionState!=="disconnected"&&this.connection.iceConnectionState!=="checking"&&this.connection.iceConnectionState!=="failed"||(this._isFirstConnected?(this.reportPCStats(Date.now(),!1,this._pcStatsUploadType),this._isFirstConnected=!1):this._pcStatsUploadType===$c.TCP_RESTART&&e===Ao.RELAY?this.reportPCStats(Date.now(),!1,this._pcStatsUploadType):this.reportPCStats(Date.now(),!1,$c.DISCONNECTED_OR_FAILED)))}},Ae(ht.prototype,"startP2PConnection",[vi],Object.getOwnPropertyDescriptor(ht.prototype,"startP2PConnection"),ht.prototype),Ae(ht.prototype,"connect",[vi],Object.getOwnPropertyDescriptor(ht.prototype,"connect"),ht.prototype),Ae(ht.prototype,"updateRemoteRTPCapabilities",[vi],Object.getOwnPropertyDescriptor(ht.prototype,"updateRemoteRTPCapabilities"),ht.prototype),Ae(ht.prototype,"publishDataChannel",[vi],Object.getOwnPropertyDescriptor(ht.prototype,"publishDataChannel"),ht.prototype),Ae(ht.prototype,"unpublish",[vi],Object.getOwnPropertyDescriptor(ht.prototype,"unpublish"),ht.prototype),Ae(ht.prototype,"unpublishDataChannel",[vi],Object.getOwnPropertyDescriptor(ht.prototype,"unpublishDataChannel"),ht.prototype),Ae(ht.prototype,"unpublishLowStream",[vi],Object.getOwnPropertyDescriptor(ht.prototype,"unpublishLowStream"),ht.prototype),Ae(ht.prototype,"subscribeDataChannel",[vi],Object.getOwnPropertyDescriptor(ht.prototype,"subscribeDataChannel"),ht.prototype),Ae(ht.prototype,"subscribe",[vi],Object.getOwnPropertyDescriptor(ht.prototype,"subscribe"),ht.prototype),Ae(ht.prototype,"massSubscribe",[vi],Object.getOwnPropertyDescriptor(ht.prototype,"massSubscribe"),ht.prototype),Ae(ht.prototype,"unsubscribe",[vi],Object.getOwnPropertyDescriptor(ht.prototype,"unsubscribe"),ht.prototype),Ae(ht.prototype,"unsubscribeDataChannel",[vi],Object.getOwnPropertyDescriptor(ht.prototype,"unsubscribeDataChannel"),ht.prototype),Ae(ht.prototype,"massUnsubscribe",[vi],Object.getOwnPropertyDescriptor(ht.prototype,"massUnsubscribe"),ht.prototype),Ae(ht.prototype,"muteRemote",[vi],Object.getOwnPropertyDescriptor(ht.prototype,"muteRemote"),ht.prototype),Ae(ht.prototype,"unmuteRemote",[vi],Object.getOwnPropertyDescriptor(ht.prototype,"unmuteRemote"),ht.prototype),Ae(ht.prototype,"hasRemoteMediaWithLock",[vi],Object.getOwnPropertyDescriptor(ht.prototype,"hasRemoteMediaWithLock"),ht.prototype),Ae(ht.prototype,"disconnectForReconnect",[vi],Object.getOwnPropertyDescriptor(ht.prototype,"disconnectForReconnect"),ht.prototype),Ae(ht.prototype,"updateBitrateLimit",[vi],Object.getOwnPropertyDescriptor(ht.prototype,"updateBitrateLimit"),ht.prototype),Ae(ht.prototype,"remoteMediaSsrcChanged",[vi],Object.getOwnPropertyDescriptor(ht.prototype,"remoteMediaSsrcChanged"),ht.prototype),ht);function vi(e,t,n){const r=e[t];if(typeof r!="function")throw new Error("Cannot use mutex on object property.");return n.value=async function(){const i=this.mutex,o=await i.lock("From P2PChannel.".concat(t));try{for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return await r.apply(this,s)}finally{o()}},n}const dz={};function Yp(e){(!(arguments.length>1&&arguments[1]!==void 0)||arguments[1])&&w.debug("install service ".concat(e.name)),dz[e.name]=e}function wm(e){const t=dz[e];if(!t)throw new Q(k.INVALID_OPERATION,"".concat(e," not found, please use AgoraRTC.use(").concat(e,"Service) to load it first"));return t}function o3(e,t){return wm("DataStream").create(e,t)}function a3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function s3(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?a3(Object(n),!0).forEach(function(r){P(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a3(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}const Yfe=Date.now(),Xfe=20,cA=new Map,g_=new Map;async function hz(e){const t=cA.get(e),n=Array.isArray(t)&&t[t.length-1],r=g_.get(e);if(!n)return void(r.isSyncing=!1);const i={uid:n.uid,payload:n.payload};r.firstRecvTs===0&&(r.firstRecvTs=n.recvTs,r.firstSendTs=n.sendTs);const o=n.sendTs-r.firstSendTs,a=o-(Date.now()-r.firstRecvTs);a>0&&(r.firstRecvTs=Date.now()-o);let s=n.mediaDelay+a;s<=0?(t.pop(),fz(n.context,i),s=0):s=Math.min(s,Xfe),setTimeout(()=>t.length&&hz(e),s)}function fz(e,t){e.safeEmit(vt.STREAM_MESSAGE,t.uid,t.payload),e.onStreamMessage&&e.onStreamMessage(t)}function Jfe(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;if(!e.syncWithAudio)return fz(n,{uid:e.uid,payload:e.payload});const r="".concat(n.id,"-").concat(e.uid),i=cA.get(r)||[],o=i.findIndex(l=>e.sendTs>=l.sendTs),a=s3(s3({},e),{},{context:n,mediaDelay:t,recvTs:Date.now()});o===-1?i.push(a):i.splice(o,0,a),cA.set(r,i);let s=!1;var c;g_.has(r)?s=!((c=g_.get(r))===null||c===void 0||!c.isSyncing):g_.set(r,{isSyncing:s,firstRecvTs:0,firstSendTs:0}),s||hz(r)}const Qfe=Tt().name;function c3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function l3(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?c3(Object(n),!0).forEach(function(r){P(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c3(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}const Tf="websdk_ng_cache_parameter",Zfe=H("MAX_PRELOAD_ASYNC_LENGTH"),epe=1e4,ed=new Map,td=[];let IT=null,AT=0,OT=0;const qv=new Map,tpe=function(e,t){const n=[];let r=0;const i=async()=>{const o=n.shift();o&&await o(),n.length>0&&r<t?i():r--};return async function(){for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];return new _e(async(c,l)=>{n.push(async()=>{try{const u=await e(...a);c(u)}catch(u){l(u)}}),r<t&&(r++,i())})}}(pz,Zfe),xT=eo.CancelToken.source();async function pz(e,t,n,r,i,o){try{if(!H("ENABLE_PRELOAD"))return;if(!It().supportWebCrypto)return void Su(()=>{w.warn("Your browser does not support preloading, this feature  be run in a secure environment")},"preload_webcrypto_not_supported");if(!n&&n!==null)throw new Q(k.INVALID_PARAMS,"Invalid token: ".concat(n,". If you don not use token, set it to null"));n&&xr(n,"token",1,2047),xr(e,"appid",1,2047),Vy(t),r&&jy(r);const a=Yh();w.debug("preload channel ".concat(t,", uid is ").concat(r));const s={appId:e,cname:t,token:n||e,uid:typeof r!="string"?r:null,sid:a,proxyServer:i};let c,l;typeof r=="string"?(s.stringUid=r,[l,c]=await _e.all([yfe(r,{sid:a,appId:e},xT.token),pU(l3(l3({},s),{},{token:n||e,uid:0}),xT.token)]),s.uid=l.uid,c.gatewayInfo.uid=s.uid,c.gatewayInfo.res.uid=s.uid):(o&&(s.stringUid=o),c=await pU(s,xT.token));const u={sid:a,appId:e,cname:t,token:n||e,uid:s.stringUid||r,intUid:s.uid||c.gatewayInfo.uid,stringUid:s.stringUid,ts:Date.now(),sua:l,ap:c};await async function(d){let h;try{d.uid&&mz({appId:d.appId,cname:d.cname,token:d.token,uid:d.uid,stringUid:d.stringUid});const f=Ez(d),g=await async function(m,_){try{const E=await window.crypto.subtle.importKey("raw",X7(_),"AES-GCM",!1,["encrypt"]),S=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:new Uint8Array(1)},E,od(window.btoa(JSON.stringify(m))));return au(new Uint8Array(S))}catch{return}}(d,d.token||d.appId);if(!g)return;h=vz(Tf);const p=h?JSON.parse(h):[];p.push({[f]:g}),p.length>H("AP_CACHE_NUM")&&p.shift(),dS(Tf,JSON.stringify(p))}catch(f){w.warn("Error caching server parameters:",f.message),dS(Tf,"")}}(u),AT++}catch(a){throw OT++,function(s){IT||(IT=window.setTimeout(()=>{let l="";qv.forEach((u,d)=>{l+="".concat(d,": ").concat(u," ;")}),Pe.reportApiInvoke(null,{name:dr.PRELOAD,options:{success:AT,failed:OT,err:l}}).onError(s),AT=0,OT=0,qv.clear(),IT=null},epe));const c=qv.get(s.code)||0;qv.set(s.code,c+1)}(a),a}}async function u3(e){try{const t=mz(e);if(!t||e.cloudProxyServer!=="disabled")return;const n=await async function(r,i){try{const o=await window.crypto.subtle.importKey("raw",X7(i),"AES-GCM",!1,["decrypt"]),a=await window.crypto.subtle.decrypt({name:"AES-GCM",iv:new Uint8Array(1)},o,od(r));return JSON.parse(window.atob(au(new Uint8Array(a))))}catch{return}}(t,e.token||e.appId);if(!n||!function(r,i){return r.cname===i.cname&&r.appId===i.appId&&r.token===i.token?i.stringUid?r.stringUid===i.stringUid:typeof i.uid=="number"?r.uid===i.uid:r.uid==i.uid:!1}(n,e))return;if(n&&Date.now()-n.ts<H("AP_CACHE_LIFETIME"))return n}catch(t){w.warn("Error get preloadInfo",t.message)}}function mz(e){let t;try{if(t=vz(Tf),!t)return;const n=JSON.parse(t),r=Ez(e),i=function(a,s){for(let c=a.length-1;c>=0;c--)if(s(a[c]))return c;return-1}(n,a=>r in a);if(i===-1)return;const o=n.splice(i,1)[0];return dS(Tf,JSON.stringify(n)),o[r]}catch(n){w.warn("Error delete preload info: ".concat(t),n.message),dS(Tf,"")}}function AN(e){if(e){let t=ed.get(e);t&&(window.clearTimeout(t),t=null,ed.delete(e)),Ce(td).call(td,e)||e.cloudProxyServer!=="disabled"||td.push(e)}if(ed.size<H("AP_CACHE_NUM")&&td.length>0){const t=td.shift();ed.set(t,window.setTimeout(async()=>{const{appId:n,cname:r,token:i,stringUid:o,uid:a,proxyServer:s}=t;try{await tpe(n,r,i,a,s,o),ed.has(t)&&AN(t)}catch(c){w.warn("update preload failed",c.message),gz(t)}},H("AP_UPDATE_INTERVAL")))}}function gz(e){const t=td.indexOf(e);t!==-1&&td.splice(t,1);let n=ed.get(e);n&&(window.clearTimeout(n),n=null,ed.delete(e),AN())}function d3(e,t){const n=e.sua,r=e.ap;t&&n&&Pe.reqUserAccount(e.sid,{lts:n.requestTime,elapse:n.elapse,success:!0,serverAddr:n.url,stringUid:t,uid:e.intUid,errorCode:null,extend:n.req}),Pe.reportResourceTiming(e.ap.url,e.sid),Pe.joinWebProxyAP(e.sid,{lts:r.requestTime,elapse:r.elapse,sucess:1,apServerAddr:r.url,turnServerAddrList:r.proxyInfo.addresses.map(i=>i.ip).join(","),eventType:"disabled",unilbsServerIds:[Xn.CHOOSE_SERVER,Xn.CLOUD_PROXY_FALLBACK].toString()}),Pe.joinChooseServer(e.sid,{lts:r.requestTime,elapse:r.elapse,succ:!0,csAddr:r.url,opid:r.opid,serverList:r.gatewayInfo.gatewayAddrs.map(i=>i.address),ec:null,cid:r.gatewayInfo.cid.toString(),uid:r.gatewayInfo.uid.toString(),csIp:r.gatewayInfo.csIp,unilbsServerIds:[Xn.CHOOSE_SERVER].toString(),isHttp3:r.isHttp3})}function vz(e){return window.atob(window.localStorage.getItem(e)||"")}function dS(e,t){window.localStorage.setItem(e,window.btoa(t))}function Ez(e){let t="".concat(e.appId,"_").concat(e.cname);return typeof e.uid=="string"&&(t+="_s_".concat(e.uid)),typeof e.uid=="number"&&(t+="_".concat(e.uid)),e.token&&(t+="_".concat(e.token)),Q7(t)}function npe(e){let t=function(){const n=ope.pop();return n?(n.offset=n.limit=0,n):{bytes:new Uint8Array(64),offset:0,limit:0}}();return function(n,r){let i=n.appId;i!==void 0&&(qn(r,10),Nl(r,i));let o=n.cid;o!==void 0&&(qn(r,16),qn(r,o));let a=n.cname;a!==void 0&&(qn(r,26),Nl(r,a));let s=n.deviceId;s!==void 0&&(qn(r,34),Nl(r,s));let c=n.elapse;c!==void 0&&(qn(r,40),Pl(r,c));let l=n.fileSize;l!==void 0&&(qn(r,48),Pl(r,Th(l)));let u=n.height;u!==void 0&&(qn(r,56),Pl(r,Th(u)));let d=n.jpg;d!==void 0&&(qn(r,66),qn(r,d.length),h3(r,d));let h=n.networkType;h!==void 0&&(qn(r,72),Pl(r,Th(h)));let f=n.osType;f!==void 0&&(qn(r,80),Pl(r,Th(f)));let g=n.requestId;g!==void 0&&(qn(r,90),Nl(r,g));let p=n.sdkVersion;p!==void 0&&(qn(r,98),Nl(r,p));let m=n.sequence;m!==void 0&&(qn(r,104),Pl(r,Th(m)));let _=n.sid;_!==void 0&&(qn(r,114),Nl(r,_));let E=n.timestamp;E!==void 0&&(qn(r,120),Pl(r,E));let S=n.uid;S!==void 0&&(qn(r,128),qn(r,S));let C=n.vid;C!==void 0&&(qn(r,136),qn(r,C));let b=n.width;b!==void 0&&(qn(r,144),Pl(r,Th(b)));let T=n.service;T!==void 0&&(qn(r,152),qn(r,T));let R=n.callbackData;R!==void 0&&(qn(r,162),qn(r,R.length),h3(r,R));let A=n.ticket;A!==void 0&&(qn(r,170),Nl(r,A));let O=n.vendorConfigs;O!==void 0&&(qn(r,178),Nl(r,O))}(e,t),function(n){let r=n.bytes,i=n.limit;return r.length===i?r:r.subarray(0,i)}(t)}function rpe(e){return function(n){let r={};e:for(;!ape(n);){let i=Im(n);switch(i>>>3){case 0:break e;case 1:r.code=Im(n);break;case 2:r.msg=f3(n,Im(n));break;case 3:r.requestId=f3(n,Im(n));break;case 4:r.timestamp=spe(n,!1);break;default:ipe(n,7&i)}}return r}({bytes:t=e,offset:0,limit:t.length});var t}function ipe(e,t){switch(t){case 0:for(;128&qa(e););break;case 2:NT(e,Im(e));break;case 5:NT(e,4);break;case 1:NT(e,8);break;default:throw new Error("Unimplemented type: "+t)}}function Th(e){return{low:e|=0,high:e>>31,unsigned:e>=0}}let ope=[];function NT(e,t){if(e.offset+t>e.limit)throw new Error("Skip past limit");e.offset+=t}function ape(e){return e.offset>=e.limit}function zy(e,t){let n=e.bytes,r=e.offset,i=e.limit,o=r+t;if(o>n.length){let a=new Uint8Array(2*o);a.set(n),e.bytes=a}return e.offset=o,o>i&&(e.limit=o),r}function _z(e,t){let n=e.offset;if(n+t>e.limit)throw new Error("Read past limit");return e.offset+=t,n}function h3(e,t){let n=zy(e,t.length);e.bytes.set(t,n)}function f3(e,t){let n=_z(e,t),r=String.fromCharCode,i=e.bytes,o="�",a="";for(let s=0;s<t;s++){let c,l,u,d,h=i[s+n];128&h?(224&h)==192?s+1>=t?a+=o:(c=i[s+n+1],(192&c)!=128?a+=o:(d=(31&h)<<6|63&c,d<128?a+=o:(a+=r(d),s++))):(240&h)==224?s+2>=t?a+=o:(c=i[s+n+1],l=i[s+n+2],(49344&(c|l<<8))!=32896?a+=o:(d=(15&h)<<12|(63&c)<<6|63&l,d<2048||d>=55296&&d<=57343?a+=o:(a+=r(d),s+=2))):(248&h)==240?s+3>=t?a+=o:(c=i[s+n+1],l=i[s+n+2],u=i[s+n+3],(12632256&(c|l<<8|u<<16))!=8421504?a+=o:(d=(7&h)<<18|(63&c)<<12|(63&l)<<6|63&u,d<65536||d>1114111?a+=o:(d-=65536,a+=r(55296+(d>>10),56320+(1023&d)),s+=3))):a+=o:a+=r(h)}return a}function Nl(e,t){let n=t.length,r=0;for(let a=0;a<n;a++){let s=t.charCodeAt(a);s>=55296&&s<=56319&&a+1<n&&(s=(s<<10)+t.charCodeAt(++a)-56613888),r+=s<128?1:s<2048?2:s<65536?3:4}qn(e,r);let i=zy(e,r),o=e.bytes;for(let a=0;a<n;a++){let s=t.charCodeAt(a);s>=55296&&s<=56319&&a+1<n&&(s=(s<<10)+t.charCodeAt(++a)-56613888),s<128?o[i++]=s:(s<2048?o[i++]=s>>6&31|192:(s<65536?o[i++]=s>>12&15|224:(o[i++]=s>>18&7|240,o[i++]=s>>12&63|128),o[i++]=s>>6&63|128),o[i++]=63&s|128)}}function qa(e){return e.bytes[_z(e,1)]}function p3(e,t){let n=zy(e,1);e.bytes[n]=t}function Im(e){let t,n=0,r=0;do t=qa(e),n<32&&(r|=(127&t)<<n),n+=7;while(128&t);return r}function qn(e,t){for(t>>>=0;t>=128;)p3(e,127&t|128),t>>>=7;p3(e,t)}function spe(e,t){let n,r=0,i=0,o=0;return n=qa(e),r=127&n,128&n&&(n=qa(e),r|=(127&n)<<7,128&n&&(n=qa(e),r|=(127&n)<<14,128&n&&(n=qa(e),r|=(127&n)<<21,128&n&&(n=qa(e),i=127&n,128&n&&(n=qa(e),i|=(127&n)<<7,128&n&&(n=qa(e),i|=(127&n)<<14,128&n&&(n=qa(e),i|=(127&n)<<21,128&n&&(n=qa(e),o=127&n,128&n&&(n=qa(e),o|=(127&n)<<7))))))))),{low:r|i<<28,high:i>>>4|o<<24,unsigned:t}}function Pl(e,t){let n=t.low>>>0,r=(t.low>>>28|t.high<<4)>>>0,i=t.high>>>24,o=i===0?r===0?n<16384?n<128?1:2:n<1<<21?3:4:r<16384?r<128?5:6:r<1<<21?7:8:i<128?9:10,a=zy(e,o),s=e.bytes;switch(o){case 10:s[a+9]=i>>>7&1;case 9:s[a+8]=o!==9?128|i:127&i;case 8:s[a+7]=o!==8?r>>>21|128:r>>>21&127;case 7:s[a+6]=o!==7?r>>>14|128:r>>>14&127;case 6:s[a+5]=o!==6?r>>>7|128:r>>>7&127;case 5:s[a+4]=o!==5?128|r:127&r;case 4:s[a+3]=o!==4?n>>>21|128:n>>>21&127;case 3:s[a+2]=o!==3?n>>>14|128:n>>>14&127;case 2:s[a+1]=o!==2?n>>>7|128:n>>>7&127;case 1:s[a]=o!==1?128|n:127&n}}const m3={},g3={},hS=4294967296,Sz=hS*hS,v3=Sz/2,PT=yz(0,!0),E3=yz(0),cpe=Hf(0,-2147483648,!1),lpe=Hf(-1,2147483647,!1),upe=Hf(-1,-1,!0);function yz(e,t){let n,r,i;return t?(i=0<=(e>>>=0)&&e<256)&&(r=g3[e],r)?r:(n=Hf(e,0,!0),i&&(g3[e]=n),n):(i=-128<=(e|=0)&&e<128)&&(r=m3[e],r)?r:(n=Hf(e,e<0?-1:0,!1),i&&(m3[e]=n),n)}function Hf(e,t,n){return{low:0|e,high:0|t,unsigned:!!n}}function dpe(e,t){if(isNaN(e))return t?PT:E3;if(t){if(e<0)return PT;if(e>=Sz)return upe}else{if(e<=-v3)return cpe;if(e+1>=v3)return lpe}return e<0?t?PT:E3:Hf(e%hS|0,e/hS|0,t)}function _3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}class ON extends Pn{get connectionState(){return this._connectionState}set connectionState(t){if(this._connectionState===t)return;const n=this._connectionState;this._connectionState=t,this.emit(Ts.CONNECTION_STATE_CHANGE,t,n)}get quality(){return this._quality}set quality(t){this._quality=t>1?1:t<.1?.1:t,this._qualityTimer&&(window.clearTimeout(this._qualityTimer),this._qualityTimer=null),this._quality>=1||(this._qualityTimer=window.setTimeout(()=>{this.quality=this._quality/this._qualityRatio},6e4))}constructor(t){var n;super(),P(this,"name","AgoraRTCImageModeration"),P(this,"_connectionState",ca.CONNECTING),P(this,"_sequence",0),P(this,"_moderationStartTime",void 0),P(this,"_workerConnection",void 0),P(this,"_workerMessageLengthLimit",void 0),P(this,"_qualityRatio",void 0),P(this,"_connectInfo",void 0),P(this,"_cancelTokenSource",eo.CancelToken.source()),P(this,"_retryConfig",void 0),P(this,"_moderationInterval",void 0),P(this,"_moderationTimer",null),P(this,"_moderationMode",1),P(this,"_quality",1),P(this,"_qualityTimer",null),P(this,"_ticket",void 0),P(this,"_moderationIntervalMinimum",void 0),P(this,"_uploadFailedNum",0),P(this,"_uploadNum",0),P(this,"_uploadTimer",null),P(this,"_extraInfo",void 0),P(this,"_vendor",""),P(this,"_encoder",new TextEncoder),P(this,"_moderationId",void 0),P(this,"inspectImage",()=>{if(this.connectionState!==ca.CONNECTED)throw new q(k.OPERATION_ABORTED,"image moderation service connection status is ".concat(this.connectionState));this._moderationTimer&&(window.clearInterval(this._moderationTimer),this._moderationTimer=null),this._moderationTimer=window.setInterval(()=>{this.connectionState===ca.CONNECTED?this.requestToInspectImage():w.debug("[".concat(this._moderationId,"] Moderation State is not connected , "),this.connectionState)},this._moderationInterval<this._moderationIntervalMinimum?this._moderationIntervalMinimum:this._moderationInterval),this.requestToInspectImage()}),this._moderationId=cn(5,"image-moderation-"),this._workerMessageLengthLimit=H("IMAGE_MODERATION_WORKER_MESSAGE_LENGTH_LIMIT"),this._moderationIntervalMinimum=H("IMAGE_MODERATION_INTERVAL_MINIMUM"),this._moderationInterval=(n=t.interval)!==null&&n!==void 0?n:1e3,t.extraInfo&&(this._extraInfo=this._encoder.encode(t.extraInfo)),t.vendor&&(this._vendor=t.vendor),this._qualityRatio=H("IMAGE_MODERATION_QUALITY_RATIO"),this._moderationStartTime=Number(Date.now()),this._workerConnection=new R0("worker-"+this._moderationId,ar),this.on(Ts.STATE_CHANGE,(r,i)=>{w.debug("[".concat(this._moderationId,"] Moderation operation :").concat(gh[r]," ").concat(i||""))}),this.handleWorkerEvents()}async init(t,n){this.emit(Ts.STATE_CHANGE,gh.CONNECT_AP),this._connectInfo=t;const r=this._cancelTokenSource.token;return this._retryConfig=n,new _e((i,o)=>{this.on(Ts.CONNECTION_STATE_CHANGE,(a,s)=>{a===ca.CONNECTED&&i()}),this.requestAP(t,r,n).then(a=>{this.connectWorker(a)}).catch(a=>{o(a)})})}updateConfig(t){var n;this._moderationInterval=(n=t.interval)!==null&&n!==void 0?n:1e3,t.extraInfo&&(this._extraInfo=this._encoder.encode(t.extraInfo)),t.vendor&&(this._vendor=t.vendor),w.debug("[".concat(this._moderationId,"] updateConfig: ").concat(JSON.stringify(t))),this.connectionState===ca.CONNECTED&&this.inspectImage()}async requestAP(t,n,r){const i=H("WEBCS_DOMAIN").map(c=>"https://".concat(c,"/api/v1")),o=await function(c,l,u,d){let{appId:h,areaCode:f,cname:g,sid:p,token:m,uid:_}=l;Cf++;const E="moderation_plugin",S={service_name:E,json_body:JSON.stringify({appId:h,areaCode:f,cname:g,command:"allocateEdge",requestId:Cf,seq:Cf,sid:p,appToken:m,ts:Date.now(),uid:_+""})};let C,b,T=c[0];return qs(async()=>{C=Date.now();const R=await Ys(T,{data:S,cancelToken:u,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"},params:{action:"wrtc_gateway"}});if(b=Date.now()-C,R.code!==0){const x=new q(k.UNEXPECTED_RESPONSE,"moderation plugin ap error, code"+R.code,{retry:!0,responseTime:b});throw w.error(x.toString()),x}const A=JSON.parse(R.json_body);if(A.code!==200){const x=new q(k.UNEXPECTED_RESPONSE,"moderation plugin ap error, code: ".concat(A.code,", reason: ").concat(A.reason),{code:A.code,responseTime:b});throw w.error(x.toString()),x}if(!A.servers||!Array.isArray(A.servers)||A.servers.length===0){const x=new q(k.UNEXPECTED_RESPONSE,"moderation plugin ap empty server",{code:A.code,responseTime:b});throw w.error(x.toString()),x}if(!A.servers.some(x=>!!x.wss)){const x=new q(k.UNEXPECTED_RESPONSE,"moderation plugin ap empty port",{code:A.code,responseTime:b});throw w.error(x.toString()),x}const O=H("IMAGE_MODERATION_WORKER_HOST");return{addressList:A.servers.map(x=>{let{address:M,wss:$}=x;if(M&&$)return"wss://".concat(M.replace(/\./g,"-"),".").concat(O,":").concat($,"/moderation")}).filter(x=>!!x),workerToken:A.workerToken,vid:A.vid,ticket:A.appTicket,responseTime:b}},(R,A)=>(Pe.apworkerEvent(p,{success:!0,sc:200,serviceName:E,responseDetail:JSON.stringify(R.addressList),firstSuccess:A===0,responseTime:b,serverIp:c[A%c.length]}),!1),(R,A)=>(Pe.apworkerEvent(p,{success:!1,sc:R.data&&R.data.code||200,serviceName:E,responseTime:b,serverIp:c[A%c.length]}),!!(R.code!==k.OPERATION_ABORTED&&R.code!==k.UNEXPECTED_RESPONSE||R.data&&R.data.retry)&&(T=c[(A+1)%c.length],!0)),d)}(i,t,n,r);this.emit(Ts.STATE_CHANGE,gh.AP_CONNECTED);const{addressList:a,ticket:s}=o;return this._ticket=s,a}async connectWorker(t){this.emit(Ts.STATE_CHANGE,gh.CONNECT_WORKER),await this._workerConnection.init(t,1e4)}handleWorkerEvents(){this._workerConnection.on(Ye.CONNECTED,async()=>{this.emit(Ts.STATE_CHANGE,gh.WORKER_CONNECTED,this._workerConnection.url),this.connectionState=ca.CONNECTED}),this._workerConnection.on(Ye.CLOSED,()=>{this.connectionState=ca.CLOSED}),this._workerConnection.on(Ye.FAILED,()=>{this.connectionState=ca.CLOSED}),this._workerConnection.on(Ye.RECONNECTING,()=>{this.connectionState=this.connectionState===ca.CONNECTED?ca.RECONNECTING:ca.CONNECTING}),this._workerConnection.on(Ye.ON_MESSAGE,async t=>{if(t.data instanceof ArrayBuffer){const n=rpe(new Uint8Array(t.data));H("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")&&w.debug("[".concat(this._moderationId,"] Response message for worker of image moderation "),JSON.stringify(n)),this._uploadNum++,n.code===void 0||n.code===0||(this._uploadFailedNum++,w.error("[".concat(this._moderationId,"] Error response from worke, code is ").concat(n.code,", msg is ").concat(n.msg)),this._uploadTimer||(this._uploadTimer=window.setTimeout(()=>{Pe.reportApiInvoke(this._connectInfo.sid||null,{name:dr.IMAGE_MODERATION_UPLOAD,options:[this._uploadFailedNum,this._uploadNum,n.code],tag:kn.TRACER}).onError(new q(k.IMAGE_MODERATION_UPLOAD_FAILED,n.msg)),this._uploadTimer=null},H("IMAGE_MODERATION_UPLOAD_REPORT_INTERVAL"))))}else w.error("[".concat(this._moderationId,"] Unexpected message type from worker"))}),this._workerConnection.on(Ye.WILL_RECONNECT,(t,n,r)=>{t==="recover"&&r(t),r("tryNext")}),this._workerConnection.on(Ye.REQUEST_NEW_URLS,(t,n)=>{this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then(t).catch(n)})}static intToLong(t){return{low:t|=0,high:t>>31,unsigned:t>=0}}async requestToInspectImage(){const t=ga(this,Ts.CLIENT_LOCAL_VIDEO_TRACK),n={appId:this._connectInfo.appId,cname:this._connectInfo.cname,cid:this._connectInfo.cid,sid:this._connectInfo.sid,uid:this._connectInfo.uid,vid:this._connectInfo.vid};if(t){if(!t.isPlaying)return void(H("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")&&w.debug("Only the track being played can be inspected"));this._sequence++;const r=await this.generateRequestData(t,n);this._workerConnection.sendMessage(r,!0,!0)}else H("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")&&w.debug("Only the track being published can be inspected")}async generateRequestData(t,n){let{appId:r,cname:i,cid:o,vid:a,sid:s,uid:c}=n;const l=Date.now(),u=await t.getCurrentFrameImage("image/jpeg",this.quality),d=await L9(u,r,i),h=this._sequence+"-"+o+"-"+c+"-"+l+"-"+cn(12,""),f={appId:r,cid:o,cname:i,deviceId:"",elapse:ON.intToLong(Number(l-this._moderationStartTime)),fileSize:u.buffer.byteLength,height:u.height,width:u.width,jpg:d,networkType:6,osType:7,requestId:h,sdkVersion:"4.22.0",sequence:this._sequence,sid:s,timestamp:dpe(l),uid:c,vid:a,service:this._moderationMode,ticket:this._ticket,callbackData:this._extraInfo,vendorConfigs:this._vendor};this._extraInfo===void 0&&delete f.callbackData;const g=npe(f);if(g.byteLength<this._workerMessageLengthLimit){if(H("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")){const p=function(m){for(var _=1;_<arguments.length;_++){var E=arguments[_]!=null?arguments[_]:{};_%2?_3(Object(E),!0).forEach(function(S){P(m,S,E[S])}):Object.getOwnPropertyDescriptors?Object.defineProperties(m,Object.getOwnPropertyDescriptors(E)):_3(Object(E)).forEach(function(S){Object.defineProperty(m,S,Object.getOwnPropertyDescriptor(E,S))})}return m}({},f);delete p.jpg,w.debug("[".concat(this._moderationId,"] Request message for worker of image moderation service: "),JSON.stringify(p))}return g}{const p=this.quality*this._qualityRatio;return this.quality=p,await this.generateRequestData(t,{appId:r,cname:i,cid:o,vid:a,sid:s,uid:c})}}close(){this._cancelTokenSource.cancel(),this._cancelTokenSource=eo.CancelToken.source(),this._workerConnection&&this._workerConnection.close(),this._moderationTimer&&window.clearInterval(this._moderationTimer),this._moderationTimer=null,this._uploadTimer&&window.clearTimeout(this._uploadTimer),this._uploadTimer=null,this.connectionState=ca.CLOSED,this.emit(Ts.STATE_CHANGE,gh.CLOSED)}}function Cz(e){if(Zt(e.interval,"interval",1e3,1/0),e&&e.extraInfo&&e.extraInfo.length>1024)throw new q(k.INVALID_PARAMS,"config.extraInfo length cannot exceed 1024 bytes");if(e&&e.vendor&&e.vendor.length>1024)throw new q(k.INVALID_PARAMS,"config.vendor length cannot exceed 1024 bytes")}const hpe={name:"ImageModeration",create:function(e){let{config:t}=e;return Cz(t),new ON(t)}};var S3,y3,C3,b3,T3,R3,w3,I3,A3,O3,x3,N3,P3,D3,L3,k3,M3,F3,U3,B3,$3,V3,j3,H3,z3,W3,G3,K3,q3,Y3,X3,J3,Q3,Z3,eB,tB,nB,rB,iB,oB,ye;function aB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ws(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?aB(Object(n),!0).forEach(function(r){P(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}ri.setLogger(w);let fpe=(S3=je(),y3=je({argsMap:(e,t)=>{if(!Array.isArray(t)){if(!(t instanceof Qh))return[t];t=[t]}return t.map(n=>n?Object(n).toString():"null")}}),C3=je({argsMap:(e,t)=>(t||(t=[]),Array.isArray(t)||t.trackMediaType!==fp.DATA?(Array.isArray(t)||(t=[t]),t.map(n=>n.getTrackId())):[t.getChannelId()])}),b3=je({argsMap:(e,t,n,r)=>[typeof t=="object"?t.uid:t,n,r]}),T3=je({argsMap:(e,t,n)=>[t,n]}),R3=je({argsMap:(e,t)=>t.map(n=>{let{user:r,mediaType:i}=n;return[r==null?void 0:r.uid,i]})}),w3=je({argsMap:(e,t,n,r)=>[typeof t=="object"?t.uid:t,n,r]}),I3=je({argsMap:(e,t)=>t.map(n=>{let{user:r,mediaType:i}=n;return{uid:r==null?void 0:r.uid,mediaType:i}})}),A3=je(),O3=je(),x3=je(),N3=je(),P3=je(),D3=je(),L3=je(),k3=je(),M3=je(),F3=je(),U3=je(),B3=je(),$3=je(),V3=je(),j3=je({argsMap:(e,t)=>[t]}),H3=je(),z3=je(),W3=je(),G3=je(),K3=je(),q3=je(),Y3=je(),X3=je(),J3=je({argsMap:(e,t)=>(Array.isArray(t)||(t=[t]),[JSON.stringify(t)])}),Q3=je(),Z3=je(),eB=je(),tB=je(),nB=je(),rB=je(),iB=je({reportResult:!0}),oB=je(),ye=class extends Pn{get connectionState(){return this._gateway.state}get remoteUsers(){return this._users}get localTracks(){return this._p2pChannel.getAllTracks(!0)}get uid(){return this._uid}get channelName(){return this._channelName}get localDataChannels(){return this._p2pChannel.getAllDataChannels()}get mode(){return this._config.mode}get role(){var e;return((e=this._config)===null||e===void 0?void 0:e.role)||"audience"}get codec(){return this._config.codec}get audioCodec(){return this._config.audioCodec||"opus"}get isStringUID(){return!!this._joinInfo&&!!this._joinInfo.stringUid}get __className__(){return"Client"}constructor(e){let t;if(super(),P(this,"store",void 0),P(this,"_uid",void 0),P(this,"_channelName",void 0),P(this,"_uintUid",void 0),P(this,"_users",[]),P(this,"_config",void 0),P(this,"_clientId",void 0),P(this,"_appId",void 0),P(this,"_sessionId",null),P(this,"_key",void 0),P(this,"_rtmConfig",{}),P(this,"_joinInfo",void 0),P(this,"_gateway",void 0),P(this,"_statsCollector",void 0),P(this,"_configDistribute",void 0),P(this,"_leaveMutex",new ri("client-leave")),P(this,"_publishMutex",new ri("client-publish")),P(this,"_renewTokenMutex",new ri("client-renewtoken")),P(this,"_subscribeMutex",new ri("client-subscribe")),P(this,"_encryptionMode","none"),P(this,"_encryptionSecret",null),P(this,"_encryptionSalt",null),P(this,"_encryptDataStream",!1),P(this,"_encryptDataStreamKey",null),P(this,"_encryptDataStreamIv",null),P(this,"_proxyServer",void 0),P(this,"_turnServer",{servers:[],mode:"auto"}),P(this,"_cloudProxyServerMode","disabled"),P(this,"_isDualStreamEnabled",!1),P(this,"_defaultStreamFallbackType",void 0),P(this,"_lowStreamParameter",void 0),P(this,"_streamFallbackTypeCacheMap",new Map),P(this,"_remoteStreamTypeCacheMap",new Map),P(this,"_axiosCancelSource",eo.CancelToken.source()),P(this,"_audioVolumeIndicationInterval",void 0),P(this,"_networkQualityInterval",void 0),P(this,"_userOfflineTimeout",void 0),P(this,"_streamRemovedTimeout",void 0),P(this,"_liveTranscodeStreamingClient",void 0),P(this,"_liveRawStreamingClient",void 0),P(this,"_channelMediaRelayClient",void 0),P(this,"_networkQualitySensitivity","normal"),P(this,"_p2pChannel",void 0),P(this,"_useLocalAccessPoint",!1),P(this,"_setLocalAPVersion",void 0),P(this,"_joinAndNotLeaveYet",!1),P(this,"_numberOfJoinCount",0),P(this,"_remoteDefaultVideoStreamType",void 0),P(this,"_inspect",void 0),P(this,"_moderation",void 0),P(this,"_license",void 0),P(this,"_pendingPublishedUsers",[]),P(this,"ntpAlignErrorCount",0),P(this,"remoteInboundOffset",0),P(this,"_handleLocalTrackEnable",(n,r,i)=>{this.publish(n,!1).then(r).catch(i)}),P(this,"_handleLocalTrackDisable",(n,r,i)=>{this.unpublish(n).then(r).catch(i)}),P(this,"_handleUserOnline",n=>{if(H("BLOCK_LOCAL_CLIENT")&&Mu(n.uid,this.channelName))return void w.debug("[".concat(n.uid,"] will be ignored in local"));this.isStringUID&&typeof n.uid!="string"&&w.error("[".concat(this._clientId,"] StringUID is Mixed with UintUID"));const r=this._users.find(i=>i.uid===n.uid);if(r)r._trust_in_room_=!0,r._is_pre_created&&(r._is_pre_created=!1,this.safeEmit(vt.USER_JOINED,r));else{const i=new Hl(n.uid,n.uint_id||n.uid);this._users.push(i),w.debug("[".concat(this._clientId,"] user online"),n.uid),this.safeEmit(vt.USER_JOINED,i)}}),P(this,"_handleUserOffline",n=>{if(H("BLOCK_LOCAL_CLIENT")&&Mu(n.uid,this.channelName))return;const r=this._users.find(i=>i.uid===n.uid);r&&(this._handleRemoveStream(n),this._handleRemoveDataChannels(n),r._audio_pre_subscribed||r._video_pre_subscribed?r._is_pre_created=!0:nS(this._users,r),this._remoteStreamTypeCacheMap.delete(r.uid),this._streamFallbackTypeCacheMap.delete(r.uid),w.debug("[".concat(this._clientId,"] user offline"),n.uid,"reason:",n.reason),this.safeEmit(vt.USER_LEAVED,r,n.reason))}),P(this,"_handleAddAudioOrVideoStream",(n,r,i,o,a,s,c)=>{if(H("BLOCK_LOCAL_CLIENT")&&Mu(r,this.channelName))return;const l=this._users.find(d=>d.uid===r);if(!l)return void w.error("[".concat(this._clientId,"] can not find target user!(on_add_stream)"));w.debug("[".concat(this._clientId,"] stream added with uid ").concat(r,", type ").concat(n)),this.store.subscribe(l.uid,n,void 0,void 0,void 0,Date.now());const u=n==="audio"?l.hasAudio:l.hasVideo;l._uintid||(l._uintid=a||r),n==="audio"?l._trust_audio_stream_added_state_=!0:l._trust_video_stream_added_state_=!0,n==="audio"?(l._audio_added_=!0,i!==void 0&&(l._audioSSRC=i),o!==void 0&&(l._cname=o),s&&(l._audioOrtc=s)):(l._video_added_=!0,i!==void 0&&(l._videoSSRC=i),o!==void 0&&(l._cname=o),c!==void 0&&(l._rtxSsrcId=c),s&&(l._videoOrtc=s)),(n==="audio"?l.hasAudio:l.hasVideo)&&!u&&(w.info("[".concat(this._clientId,"] remote user ").concat(l.uid," published ").concat(n)),this.safeEmit(vt.USER_PUBLISHED,l,n)),n==="video"?Pe.onGatewayStream(this._sessionId,Or.ON_ADD_VIDEO_STREAM,xn.ON_ADD_VIDEO_STREAM,{peer:a||r,ssrc:l._videoSSRC}):Pe.onGatewayStream(this._sessionId,Or.ON_ADD_AUDIO_STREAM,xn.ON_ADD_AUDIO_STREAM,{peer:a||r,ssrc:l._audioSSRC}),this._p2pChannel.remoteMediaSsrcChanged(l,n,i).then(d=>{if(d&&(w.debug("[".concat(this._clientId,"] resubscribe ").concat(n," for user ").concat(l.uid," after rejoin because SSRC id changed.")),this._p2pChannel instanceof Kv))return this._p2pChannel.unsubscribe(l,n,!0).then(()=>this._subscribe(l,n,!0).catch(h=>{w.error("[".concat(this._clientId,"] resubscribe error"),h.toString())}))}),this._p2pChannel.hasPendingRemoteMedia(l,n)&&(w.debug("[".concat(this._clientId,"] resubscribe ").concat(n," for user ").concat(l.uid," after reconnect.")),this._subscribe(l,n,!0).catch(d=>{w.error("[".concat(this._clientId,"] resubscribe error"),d.toString())}))}),P(this,"_handleRemoveStream",n=>{if(H("BLOCK_LOCAL_CLIENT")&&Mu(n.uid,this.channelName))return;const r=this._users.find(o=>o.uid===n.uid);if(!r)return void w.warning("[".concat(this._clientId,"] can not find target user!(on_remove_stream)"));w.debug("[".concat(this._clientId,"] stream removed with uid ").concat(n.uid));let i=()=>{};r.hasAudio&&r.hasVideo?i=()=>{w.info("[".concat(this._clientId,"] remote user ").concat(r.uid," unpublished audio track")),this.safeEmit(vt.USER_UNPUBLISHED,r,"audio"),w.info("[".concat(this._clientId,"] remote user ").concat(r.uid," unpublished video track")),this.safeEmit(vt.USER_UNPUBLISHED,r,"video")}:r.hasVideo?i=()=>{w.info("[".concat(this._clientId,"] remote user ").concat(r.uid," unpublished video track")),this.safeEmit(vt.USER_UNPUBLISHED,r,"video")}:r.hasAudio&&(i=()=>{w.info("[".concat(this._clientId,"] remote user ").concat(r.uid," unpublished audio track")),this.safeEmit(vt.USER_UNPUBLISHED,r,"audio")}),r._video_pre_subscribed||r._audio_pre_subscribed||(r._trust_audio_stream_added_state_=!0,r._trust_video_stream_added_state_=!0,r._audio_added_=!1,r._video_added_=!1,this._p2pChannel instanceof Kv&&this._p2pChannel.unsubscribe(r).then(o=>{if(o)return this._gateway.unsubscribe(o,r.uid)}),r._audioSSRC=void 0,r._videoSSRC=void 0,r._audioOrtc=void 0,r._videoOrtc=void 0,r._rtxSsrcId=void 0),Pe.onGatewayStream(this._sessionId,Or.ON_REMOVE_STREAM,xn.ON_REMOVE_STREAM,{peer:n.uint_id||n.uid}),i()}),P(this,"_handleSetStreamLocalEnable",(n,r,i)=>{if(H("BLOCK_LOCAL_CLIENT")&&Mu(r,this.channelName))return;const o=this._users.find(c=>c.uid===r);if(!o)return void w.error("[".concat(this._clientId,"] can not find target user!(disable_local)"));w.debug("[".concat(this._clientId,"] local ").concat(n," ").concat(i?"enabled":"disabled"," with uid ").concat(r));const a=n==="audio"?o.hasAudio:o.hasVideo;if(n==="audio"){o._trust_audio_enabled_state_=!0;const c=o._audio_enabled_;if(o._audio_enabled_=i,o._audio_enabled_===c)return;{const l=o._audio_enabled_?"enable-local-audio":"disable-local-audio";w.debug("[".concat(this._clientId,"] user-info-updated, uid: ").concat(r,", msg: ").concat(l)),this.safeEmit(vt.USER_INFO_UPDATED,r,l)}}else{o._trust_video_enabled_state_=!0;const c=o._video_enabled_;if(o._video_enabled_=i,o._video_enabled_===c)return;{const l=o._video_enabled_?"enable-local-video":"disable-local-video";w.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(r,", msg: ").concat(l)),this.safeEmit(vt.USER_INFO_UPDATED,r,l)}}const s=n==="audio"?o.hasAudio:o.hasVideo;return a!==s?!a&&s?(w.info("[".concat(this._clientId,"] remote user ").concat(r," published ").concat(n)),void this.safeEmit(vt.USER_PUBLISHED,o,n)):(n==="video"&&o._videoTrack&&o._videoTrack._destroy(),n==="audio"&&o._audioTrack,this._p2pChannel.muteRemote(o,n),w.info("[".concat(this._clientId,"] remote user ").concat(r," unpublished ").concat(n)),void this.safeEmit(vt.USER_UNPUBLISHED,o,n)):void 0}),P(this,"_handleMuteStream",(n,r,i)=>{if(H("BLOCK_LOCAL_CLIENT")&&Mu(n,this.channelName))return;w.debug("[".concat(this._clientId,"] receive mute message"),n,r,i);const o=this._users.find(c=>c.uid===n);if(!o)return void w.warning("[".concat(this._clientId,"] can not find remote user, ignore mute event, uid: ").concat(n));const a=r==="audio"?o.hasAudio:o.hasVideo;if(r==="audio"){o._trust_audio_mute_state_=!0;const c=o._audio_muted_;if(o._audio_muted_=i,o._audio_muted_===c)return;{const l=o._audio_muted_?"mute-audio":"unmute-audio";w.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(n,", msg: ").concat(l)),this.safeEmit(vt.USER_INFO_UPDATED,n,l)}}else{o._trust_video_mute_state_=!0;const c=o._video_muted_;if(o._video_muted_=i,o._video_muted_===c)return;{const l=o._video_muted_?"mute-video":"unmute-video";w.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(n,", msg: ").concat(l)),this.safeEmit(vt.USER_INFO_UPDATED,n,l)}}const s=r==="audio"?o.hasAudio:o.hasVideo;if(a!==s){if(!a&&s)return(r==="audio"?o._audioSSRC:o._videoSSRC)?(w.info("[".concat(this._clientId,"] remote user ").concat(n," published ").concat(r)),void this.safeEmit(vt.USER_PUBLISHED,o,r)):void w.warning("[".concat(this._clientId,"] remote user ").concat(n," receive ").concat(r," unmute message  before add stream message, ").concat(r," SSRC doesn't exist yet."));r==="video"&&o._videoTrack&&!o._video_pre_subscribed&&o._videoTrack._destroy(),r==="audio"&&o._audioTrack,this._p2pChannel.muteRemote(o,r),w.info("[".concat(this._clientId,"] remote user ").concat(n," unpublished ").concat(r)),this.safeEmit(vt.USER_UNPUBLISHED,o,r)}}),P(this,"_handleP2PLost",async n=>{w.debug("[".concat(this._clientId,"] receive p2p lost"),n),parseInt(n.p2pid,10)===this.store.p2pId?await this._p2pChannel.requestReconnect():w.warning("[".concat(this._clientId,"] P2PLost stream not found"),n)}),P(this,"_handleTokenWillExpire",()=>{w.debug("[".concat(this._clientId,"] received message onTokenPrivilegeWillExpire")),this.safeEmit(vt.ON_TOKEN_PRIVILEGE_WILL_EXPIRE)}),P(this,"_handleBeforeUnload",n=>{n.type==="beforeunload"&&n.returnValue!==void 0&&n.returnValue!==""||(this.leave(),w.info("[".concat(this._clientId,"] auto leave onbeforeunload or pagehide")))}),P(this,"_handleUpdateNetworkQuality",()=>{if(this._networkQualitySensitivity==="normal")return;if(navigator&&navigator.onLine!==void 0&&!navigator.onLine)return void this.safeEmit(vt.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6});const n={downlinkNetworkQuality:0,uplinkNetworkQuality:0};n.uplinkNetworkQuality=this._p2pChannel.getUplinkNetworkQuality(),n.downlinkNetworkQuality=this._p2pChannel.getDownlinkNetworkQuality(),this.safeEmit(vt.NETWORK_QUALITY,n)}),P(this,"_handleP2PAddAudioOrVideoStream",(n,r,i,o)=>{const a=this._users.find(c=>c.uid===r);if(!a)return void w.error("[".concat(this._clientId,"] can not find target user!(on_add_stream)"));w.debug("[".concat(this._clientId,"] stream added with uid ").concat(r,", type ").concat(n)),this.store.subscribe(a.uid,n,void 0,void 0,void 0,Date.now());const s=n==="audio"?a.hasAudio:a.hasVideo;n==="audio"?a._trust_audio_stream_added_state_=!0:a._trust_video_stream_added_state_=!0,n==="audio"?(a._audio_added_=!0,i!==void 0&&(a._audioSSRC=i),o!==void 0&&(a._audioMid=o)):(a._video_added_=!0,i!==void 0&&(a._videoSSRC=i),o!==void 0&&(a._videoMid=o)),(n==="audio"?a.hasAudio:a.hasVideo)&&!s&&(w.info("[".concat(this._clientId,"] remote user ").concat(a.uid," published ").concat(n)),this.safeEmit(vt.USER_PUBLISHED,a,n)),this._p2pChannel.hasPendingRemoteMedia(a,n)&&(w.debug("[".concat(this._clientId,"] resubscribe ").concat(n," for user ").concat(a.uid," after reconnect.")),this._subscribe(a,n,!0).catch(c=>{w.error("[".concat(this._clientId,"] resubscribe error"),c.toString())}))}),this._config=e,this._clientId=cn(5,"client-"),this.store=new Bue(e.codec,e.audioCodec,e.mode,this._clientId),this.store.clientCreated(),e.proxyServer&&this.setProxyServer(e.proxyServer,!0),e.turnServer&&this.setTurnServer(e.turnServer,!0),w.info("[".concat(this._clientId,"] Initializing AgoraRTC client v").concat(va," build: ").concat(lN,", mode: ").concat(this.mode,", codec: ").concat(this.codec)),e.clientRoleOptions)try{IM(e.clientRoleOptions),t=Object.assign({},e.clientRoleOptions)}catch(n){w.warning("[".concat(this._clientId,"] ").concat(n.toString()))}this._statsCollector=new N0(this.store),this._statsCollector.onStatsException=(n,r,i)=>{w.debug("[".concat(this._clientId,"] receive exception msg, code: ").concat(n,", msg: ").concat(r,", uid: ").concat(i)),this.safeEmit(vt.EXCEPTION,{code:n,msg:r,uid:i})},this._statsCollector.onUploadPublishDuration=(n,r,i,o)=>{const a=this._users.find(s=>s.uid===n);a&&Pe.peerPublishStatus(this._sessionId,{subscribeElapse:o,audioPublishDuration:r,videoPublishDuration:i,peer:a._uintid})},this.store.useP2P=e.mode==="p2p",this._gateway=new mfe(this.store,{clientId:this._clientId,mode:this.mode,codec:this.codec,websocketRetryConfig:e.websocketRetryConfig||ar,httpRetryConfig:e.httpRetryConfig||ar,forceWaitGatewayResponse:e.forceWaitGatewayResponse===void 0||e.forceWaitGatewayResponse,statsCollector:this._statsCollector,role:e.role,clientRoleOptions:t}),this._configDistribute=new Rfe,this.store.useP2P?(this._p2pChannel=new To(this.store,this._statsCollector),this._handleP2PEvents()):this._p2pChannel=new Kv(this.store,this._statsCollector),this._handleP2PChannelEvents(),this._handleGatewayEvents(),this._handleGatewaySignalEvents()}async joinMeta(e,t,n,r,i){let o=!(arguments.length>5&&arguments[5]!==void 0)||arguments[5],a=arguments.length>6&&arguments[6]!==void 0&&arguments[6];Qt("JOIN_GATEWAY_USE_443PORT_ONLY",o),Qt("JOIN_GATEWAY_USE_DUAL_DOMAIN",a);const s=this._gateway.signal.websocket;return s instanceof uN&&(s.use443PortOnly=o,s.tryDoubleDomain=a),async function(c,l,u){Rv.get(c)||Rv.set(c,[]),wv.get(c)||wv.set(c,l),Zs.get(c)||Zs.set(c,0);const d=Rv.get(c),h=wv.get(c);if(!d||!h)throw new Error("concurrent: deferQueue or maxConcurrency is null");if(Zs.get(c)===h){const _=S0();d.push(_),await _.promise}Zs.set(c,Zs.get(c)+1);for(var f=arguments.length,g=new Array(f>3?f-3:0),p=3;p<f;p++)g[p-3]=arguments[p];const m=await u(...g);return Zs.set(c,Zs.get(c)-1),Zs.get(c)===h-1&&d.length>0&&(d[0].resolve(),d.shift()),Zs.get(c)===0&&(Rv.set(c,[]),wv.set(c,0),Zs.set(c,0)),m}("client.join",H("JOIN_MAX_CONCURRENCY"),this.join.bind(this),e,t,n,r,i)}async join(e,t,n,r,i){const o=++this._numberOfJoinCount;this.store.joinStart(),r&&(this.store.uid=r);const a=(Av||Av||(Av=(window.location.protocol.split(":")[0]||"").toUpperCase(),Av))==="HTTPS",s=LM()?window.isSecureContext:"Browser Not Support";if(!LM()&&!a||!window.isSecureContext){const p="The website must be running in a secure context (About secure context: https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts ), otherwise the media collection will be restricted by the browser";w.warning(p)}this.connectionState==="DISCONNECTED"&&(this.store.avoidJoinStart=Math.round(Date.now()),w.debug("[".concat(this._clientId,"] set avoidJoinStart to ").concat(this.store.avoidJoinStart))),Pe.setAppId(e);try{if(!n&&n!==null)throw new q(k.INVALID_PARAMS,"Invalid token: ".concat(n,". If you don not use token, set it to null"));n&&xr(n,"token",1,2047),xr(e,"appid",1,2047),Vy(t),r&&jy(r),i&&xr(i,"optionalInfo",1,2047)}catch(p){throw Pe.reportApiInvoke(Yh(),{name:dr.JOIN,options:[e,t,n,r],states:{isHttps:a,isSecureContext:s},tag:kn.TRACER}).onError(p),p}if(this._leaveMutex.isLocked&&(w.debug("[".concat(this._clientId,"] join: waiting leave operation")),(await this._leaveMutex.lock())(),w.debug("[".concat(this._clientId,"] join: continue"))),this._joinAndNotLeaveYet=!0,this.connectionState!=="DISCONNECTED"){const p=new q(k.INVALID_OPERATION,"[".concat(this._clientId,"] Client already in connecting/connected state"));throw Pe.reportApiInvoke(Yh(),{name:dr.JOIN,options:[e,t,n,r],states:{isHttps:a,isSecureContext:s},tag:kn.TRACER}).onError(p),p}this._gateway.state="CONNECTING";const c=await u3({appId:e,cname:t,uid:r,stringUid:typeof r=="string"?r:void 0,token:n||e,cloudProxyServer:this._cloudProxyServerMode});if(!this._joinAndNotLeaveYet)throw new q(k.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));const l=(c==null?void 0:c.sid)||Yh();w.info("[".concat(this._clientId,"] start join channel ").concat(t,", join number: ").concat(o)),this._sessionId||(this._sessionId=l,this.store.sessionId=this._sessionId);const u=Pe.reportApiInvoke(l,{name:dr.JOIN,options:[e,t,n,r],states:{isHttps:a,isSecureContext:s},tag:kn.TRACER}),d=ws(ws({},this._rtmConfig),{},{clientId:this._clientId,appId:e,sid:this._sessionId,cname:t,uid:typeof r!="string"?r:null,turnServer:this._turnServer,proxyServer:this._proxyServer,token:n||e,cloudProxyServer:this._cloudProxyServerMode,optionalInfo:i,license:this._license,useLocalAccessPoint:this._useLocalAccessPoint,preload:!!c},this._remoteDefaultVideoStreamType!==void 0&&{defaultVideoStream:this._remoteDefaultVideoStreamType});if(this._useLocalAccessPoint&&(d.setLocalAPVersion=this._setLocalAPVersion),typeof r=="string"&&(d.stringUid=r,this._uintUid?(d.uid=this._uintUid,this._uintUid=void 0):d.uid=0),this._encryptionMode!=="none"&&this._encryptionSecret){if(d.aesmode=this._encryptionMode,d.aespassword=await(async p=>{const m=function(C){const b=window.atob(`MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDCMnXAHkKIGAM+x4N22gCI+Wyu
STM9ztkT3uYslTT2PuKmZfPzhH6kVdO7PTjGCOZnAsyb3oTtWat0KcxQ4jxvqQV+
HvYl3iI1Yd4vl2c3qRMJPLtRDfNxa2Mcxgq7e9aEUibzdd0st+OJAy3tOj/Y0aVy
xQiYDz3vqa6bP29adwIDAQAB`),T=new Uint8Array(new ArrayBuffer(b.length));for(let R=0;R<b.length;R+=1)T[R]=b.charCodeAt(R);return T}(),_=await window.crypto.subtle.importKey("spki",m,{name:"RSA-OAEP",hash:"SHA-256"},!0,["encrypt"]),E=oN(p),S=await window.crypto.subtle.encrypt({name:"RSA-OAEP"},_,E);return function(C){let b="";for(let T=0;T<C.length;T+=1)b+=String.fromCharCode(C[T]);return window.btoa(b)}(new Uint8Array(S))})(this._encryptionSecret),!this._joinAndNotLeaveYet)throw new q(k.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));this._encryptionSalt&&(d.aessalt=this._encryptionSalt)}if(this._encryptDataStream&&(this._encryptionMode==="aes-128-gcm2"||this._encryptionMode==="aes-256-gcm2"))if(this._encryptionSalt&&this._encryptionSecret)if(window.crypto.subtle){const p=new TextEncoder,m=H("USE_PURE_ENCRYPTION_MASTER_KEY")?p.encode(d.appId+this._encryptionSecret+this._encryptionSecret):p.encode(d.appId+d.cname+this._encryptionSecret);this._encryptDataStreamIv=await async function(_,E,S){const C=await window.crypto.subtle.importKey("raw",E,"PBKDF2",!1,["deriveBits","deriveKey"]),b=_==="aes-128-gcm2"?128:256,T=await window.crypto.subtle.deriveBits({name:"PBKDF2",iterations:MM,hash:"SHA-256",salt:S},C,b+$ue);return new Uint8Array(T).subarray(b/8)}(this._encryptionMode,m,od(this._encryptionSalt)),this._encryptDataStreamKey=await async function(_,E,S){const C=await window.crypto.subtle.importKey("raw",E,"PBKDF2",!1,["deriveBits","deriveKey"]),b=_==="aes-128-gcm2"?128:256;return await window.crypto.subtle.deriveKey({name:"PBKDF2",iterations:MM,hash:"SHA-256",salt:S},C,{name:"AES-GCM",length:b},!0,["encrypt","decrypt"])}(this._encryptionMode,m,od(this._encryptionSalt))}else s?w.warning("[".concat(this._clientId,"] encrypt datastream must be running in a secure context, fallback to plain data stream")):w.warning("[".concat(this._clientId,"] current browser do not support WebCrypto ,fallback to plain data stream")),this._encryptDataStream=!1;else this._encryptDataStream=!1,w.debug("[".concat(this._clientId,"] no salt / secret, cannot support encrypt data stream, fallback to plain data stream"));this._startSession(this._sessionId,{channel:t,appId:e,stringUid:d.stringUid});const h=this._sessionId;setTimeout(()=>{this.connectionState==="CONNECTING"&&h===this._sessionId&&Pe.joinChannelTimeout(this._sessionId,5)},5e3);try{var f;let p;const m=d.cloudProxyServer;if(Ce(f=["proxy3","proxy4","proxy5"]).call(f,m)){const b=H("PROXY_SERVER_TYPE3");Array.isArray(b)?d.proxyServer=b[0]:d.proxyServer=b}if(Pe.setProxyServer(d.proxyServer),w.setProxyServer(d.proxyServer),this.store.requestAPStart(),c){if(w.debug("[".concat(this._clientId,"] get serverInfo Success from Preload Cache ").concat(d.stringUid?", ".concat(d.stringUid," => ").concat(c.intUid):""," ")),d.stringUid&&!d.uid&&(d.uid=c.intUid),p={gatewayInfo:c.ap.gatewayInfo},H("JOIN_WITH_FALLBACK_MEDIA_PROXY")&&d.turnServer.mode==="auto")if(c.ap.proxyInfo.addresses.length===0)w.warning("no edge services in ap response of proxy fallback, will not set proxy in iceServers");else{const b=(await c9(c.ap.proxyInfo,c.ap.gatewayInfo.uid)).map(T=>({turnServerURL:T.address,tcpport:T.tcpport||jr.tcpport,udpport:T.udpport||jr.udpport,username:T.username||jr.username,password:T.password||jr.password,forceturn:!1,security:!0}));d.turnServer={mode:"manual",servers:b}}d3(c,d.stringUid)}else{if(d.stringUid&&!d.uid){let b;[b,p]=await _e.all([Z9(d.stringUid,d,this._axiosCancelSource.token,this._config.httpRetryConfig||ar,this.store),fU(d,this._axiosCancelSource.token,this._config.httpRetryConfig||ar,!0,this.store)]),w.debug("[".concat(this._clientId,"] getUserAccount Success ").concat(d.stringUid," => ").concat(b)),d.uid=b,p.gatewayInfo.uid=b,p.gatewayInfo.res.uid=b}else p=await fU(d,this._axiosCancelSource.token,this._config.httpRetryConfig||ar,!0,this.store);if(!this._joinAndNotLeaveYet)throw new q(k.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"))}this.store.requestAPEnd(),setTimeout(()=>{this._configDistribute.startGetConfigDistribute(d,this._axiosCancelSource.token),this._configDistribute.on(GI.UPDATE_BITRATE_LIMIT,b=>{this._p2pChannel.updateBitrateLimit(b)})},0),this._key=n||e;const _=p.gatewayInfo,E=d.uid?d.uid:_.uid;this._joinInfo=ws(ws({},d),{},{cid:_.cid,uid:E,vid:_.vid,apResponse:_.res,apGatewayAddress:_.apGatewayAddress,uni_lbs_ip:_.uni_lbs_ip,gatewayAddrs:_.gatewayAddrs}),this.store.intUid=E;const S=await this._joinGateway();if(!this._joinAndNotLeaveYet)throw new q(k.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));u.onSuccess(S),this._appId=e,this._channelName=d.cname,this._uid=S,this.store.uid=S,setTimeout(()=>{this._networkQualityInterval&&window.clearInterval(this._networkQualityInterval),this._networkQualityInterval=window.setInterval(this._handleUpdateNetworkQuality,2e3),window.addEventListener(Gr()?"beforeunload":"pagehide",this._handleBeforeUnload),this._statsCollector.startUpdateStats()},0);const C=d.stringUid?"string uid: ".concat(d.stringUid,",uid: ").concat(d.uid):"uid: ".concat(this._uid);return w.info("[".concat(this._clientId,"] Joining channel success: channel: ").concat(t,",").concat(C)),setTimeout(()=>{w.startUpload()},5e3),this.store.joinEnd(),g=this,Ce(Vl).call(Vl,g)||Vl.push(g),this._cloudProxyServerMode==="disabled"&&It().supportWebCrypto&&H("ENABLE_PRELOAD")&&AN(this._joinInfo),S}catch(p){const m=Array.isArray(p)?p[0]:p;throw m&&m.code===k.OPERATION_ABORTED?w.warning("[".concat(this._clientId,"] join number: ").concat(o,", Joining channel failed, rollback"),m):w.error("[".concat(this._clientId,"] join number: ").concat(o,", Joining channel failed, rollback"),m),m.code!==k.OPERATION_ABORTED&&this._numberOfJoinCount===o&&(this._gateway.state="DISCONNECTED",this._reset()),u.onError(m),m}var g}_joinGateway(){if(!this._joinInfo||!this._key)throw new q(k.INVALID_OPERATION);return this._gateway.join(this._joinInfo,this._key,!(this._joinInfo.cloudProxyServer!=="disabled"||this._joinInfo.proxyServer||!H("JOIN_WITH_FALLBACK_SIGNAL_PROXY")))}async leave(){w.info("[".concat(this._clientId,"] Leaving channel")),window.removeEventListener(Gr()?"beforeunload":"pagehide",this._handleBeforeUnload),this._reset(),function(t){const n=Vl.indexOf(t);n!==-1&&Vl.splice(n,1)}(this),this._statsCollector.stopUpdateStats();const e=await this._leaveMutex.lock();if(this.connectionState==="DISCONNECTED")return w.info("[".concat(this._clientId,"] Leaving channel repeated, success")),void e();await this._gateway.leave(this.connectionState!=="CONNECTED"),w.info("[".concat(this._clientId,"] Leaving channel success")),this._joinAndNotLeaveYet=!1,this.store.resetJoinChannelServiceRecords(),e()}async publish(e){let t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(!Array.isArray(e)){if(!(e instanceof Qh))return this._publishDataChannel(e);e=[e]}if(e.length===0)throw new q(k.INVALID_PARAMS,"param list is empty");const n=e;if(this._gateway.role==="audience")throw new q(k.INVALID_OPERATION,"audience can not publish stream");for(const i of n){if(!(i instanceof Qh))throw new q(k.INVALID_PARAMS,"parameter is not local track");if(!i._enabled&&t)throw new q(k.TRACK_IS_DISABLED,"can not publish a disabled track: ".concat(i.getTrackId()))}w.info("[".concat(this._clientId,"] Publishing tracks, id ").concat(n.map(i=>"".concat(i.getTrackId()," "))));const r=await this._publishMutex.lock();await this._configDistribute.awaitConfigDistributeComplete(),t&&n.forEach(i=>{const o=this._configDistribute.getBitrateLimit();i instanceof hn&&o&&i.setBitrateLimit(o.uplink)});try{await this._publishHighStream(n),w.info("[".concat(this._clientId,"] Publish success, id ").concat(n.map(i=>"".concat(i.getTrackId()," "))))}catch(i){throw w.error("[".concat(this._clientId,"] publish error"),i.toString()),i}finally{r()}}async _publishDataChannel(e){Zt(e.id,"id",0,65535,!0),nl(e.ordered,"ordered"),xr(e.metadata,"metadata",0,512),w.info("[".concat(this._clientId,"] Publishing datachannels, id ").concat(e.id));const t=await this._publishMutex.lock();try{if(this._p2pChannel.getAllDataChannels().findIndex(i=>i.id===e.id)!==-1)throw new q(k.INVALID_PARAMS,"Invalid id: ".concat(e.id,". If you want to republish the datachannel, unpublish first"));if(!this._joinInfo||this._uid===void 0)throw new q(k.INVALID_OPERATION,"Can't publish datachannel, haven't joined yet!");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new q(k.INVALID_OPERATION,"can not publish datachannel in ".concat(this.connectionState," state"));if(this._turnServer.mode==="auto"&&H("FORCE_TURN")&&!H("TURN_ENABLE_TCP")&&!H("TURN_ENABLE_UDP"))throw new q(k.UNEXPECTED_ERROR,"force TURN With No TURN Configuration");const n=function(i){return o3(i,!1)}(e),r=await this._p2pChannel.publishDataChannel([n]);if(r.length>0){if(typeof n._originDataChannelId!="number")throw w.error("[".concat(this._clientId,"] can not publish with mediaType datachannel, cannot get RTCDatachannel id")),new q(k.CREATE_DATACHANNEL_ERROR);try{await _e.all(r.map(i=>this._uid&&this._gateway.publishDataChannel(this._uid,i,!0))),await n._waitTillOpen()}catch(i){if(i.code!==k.DISCONNECT_P2P)throw i}}return w.info("[".concat(this._clientId,"] Publish dataChannels success, id ").concat(n.id)),n}catch(n){throw w.error("[".concat(this._clientId,"] publish datachannels error"),n.toString()),n}finally{t()}}async unpublish(e){if(!this._joinInfo||this._uid===void 0)throw new q(k.INVALID_OPERATION,"Can't unpublish stream, haven't joined yet!");let t=[];if(e)if(Array.isArray(e))t=e;else{if(!(e instanceof Qh))return this._unpublishDataChannel([e]);t=[e]}else this.store.useP2P||await this._unpublishDataChannel(),t=this._p2pChannel.getAllTracks(!0);w.info("[".concat(this._clientId,"] Unpublish tracks, tracks ").concat(t.map(r=>"".concat(r.getTrackId()," "))," "));const n=await this._publishMutex.lock();try{if(this._p2pChannel instanceof To){const r=await this._p2pChannel.unpublish(t);r&&await this._gateway.sendExtensionMessage(Hn.UNPUBLISH,{unpubMsg:r},!0)}else{const r=await this._p2pChannel.unpublish(t);r&&await this._gateway.unpublish(r,this._uid),w.info("[".concat(this._clientId,"] Unpublish success,tracks ").concat(t.map(i=>"".concat(i.getTrackId()))))}}catch(r){throw w.error("[".concat(this._clientId,"] unpublish error"),r.toString()),r}finally{n&&n()}}async _unpublishDataChannel(e){e!==void 0&&e.length!==0||(e=this._p2pChannel.getAllDataChannels()),w.info("[".concat(this._clientId,"] Unpublish datachannels, datachannels ").concat(e.map(n=>"".concat(n.id," "))," "));const t=await this._publishMutex.lock();try{const n=await this._p2pChannel.unpublishDataChannel(e);n&&await this._gateway.unpublishDataChannel(n),w.info("[".concat(this._clientId,"] Unpublish dataChannel success,dataChannel ").concat(e.map(r=>"".concat(r.id))))}catch(n){throw w.error("[".concat(this._clientId,"] unpublish dataChannel error"),n.toString()),n}finally{t&&t()}}async subscribe(e,t,n){if(!(e instanceof Hl)){const r=this.remoteUsers.find(i=>i.uid===e);if(!r)throw new q(k.INVALID_REMOTE_USER,"user is not in the channel");e=r}return t==="datachannel"?this._subscribeDataChannel(e,n):this._subscribe(e,t)}async presubscribe(e,t){if(pr(t,"mediaType",["audio","video"]),this._p2pChannel instanceof To)throw new q(k.INVALID_OPERATION,"can't presub at p2p mode");if(!this._joinInfo)throw new q(k.INVALID_OPERATION,"can't presub when not join");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new q(k.INVALID_OPERATION,"can't presub in ".concat(this.connectionState," state"));const n=t===De.AUDIO,r=t===De.VIDEO,i=await this._subscribeMutex.lock();try{const{ssrcId:o,ortc:a,rtxSsrcId:s,cname:c,uint_id:l}=await this._gateway.presubscribe(e,t,!0);if(o==null)throw new q(k.UNEXPECTED_RESPONSE,"no ssrc id");let u=this._users.find(h=>h.uid===e);u||(u=new Hl(e,l||e),u._is_pre_created=!0,this._users.push(u)),c&&(u._cname=c),u._uintid||(u._uintid=l||e),n&&(u._audioSSRC=o,u._audio_pre_subscribed=!0,a&&(u._audioOrtc=a)),r&&(u._videoSSRC=o,u._video_pre_subscribed=!0,a&&(u._videoOrtc=a),s!=null&&(u._rtxSsrcId=s)),w.info("[".concat(this._clientId,"] presub succeed ssrc: ").concat(o)),await this._p2pChannel.subscribe(u,t,o,s,a);const d=n?u._audioTrack:u._videoTrack;if(!d)throw new q(k.UNEXPECTED_ERROR,"can not find remote track in user");return n&&(u._trust_audio_stream_added_state_=!0,u._audio_added_=!0),r&&(u._trust_video_stream_added_state_=!0,u._video_added_=!0),d}catch(o){throw w.error("[".concat(this._clientId,"] presub user ").concat(e," error"),o),o}finally{i()}}async _subscribeDataChannel(e,t){var n;if(Zt(t,"channelId",0,65535,!0),!this._joinInfo)throw new q(k.INVALID_OPERATION,"Can't subscribe datachannel, not joined");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new q(k.INVALID_OPERATION,"Can't subscribe datachannel in ".concat(this.connectionState," state"));if(!this._users.find(s=>s===e))throw w.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid,", this user is not in the channel")),new q(k.INVALID_REMOTE_USER,"user is not in the channel");if(!e.hasAudio&&!e.hasVideo&&e._dataChannels.length===0)throw w.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid,", user is not published")),new q(k.INVALID_REMOTE_USER,"user is not published");const i=(n=e._dataChannels)===null||n===void 0?void 0:n.find(s=>s.id===t);if(!i)throw w.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid," with mediaType datachannel, remote datachannel is not published")),new q(k.REMOTE_USER_IS_NOT_PUBLISHED);const o=await this._subscribeMutex.lock();w.info("[".concat(this._clientId,"] subscribe user ").concat(e.uid,", mediaType: datachannel"));try{const s=await this._p2pChannel.subscribeDataChannel(e,[i]);if(s&&Ce(s).call(s,i.id))try{var a;if(typeof i._originDataChannelId!="number")throw w.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid," with mediaType datachannel, cannot get RTCDatachannel")),new q(k.CREATE_DATACHANNEL_ERROR);const c={id:i.id,datachannelId:i._originDataChannelId,ordered:i.ordered,maxRetransmits:i.maxRetransmits,metadata:(a=i.metadata)!==null&&a!==void 0?a:""};await this._gateway.subscribeDataChannel(e.uid,c,!0),await i._waitTillOpen()}catch(c){if((c==null?void 0:c.code)!==k.WS_ABORT)throw await this._p2pChannel.unsubscribeDataChannel(e,[i]),c;await this._p2pChannel.unsubscribeDataChannel(e,[i]),this._p2pChannel.setPendingRemoteDataChannel(e,i.id)}return w.info("[".concat(this._clientId,"] subscribe success user ").concat(e.uid,", mediaType: datachannel")),i}finally{o()}}async _p2pSubscribe(e,t,n){if(pr(t,"mediaType",["audio","video"]),!this._joinInfo)throw new q(k.INVALID_OPERATION,"Can't subscribe stream, not joined");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new q(k.INVALID_OPERATION,"Can't subscribe stream in ".concat(this.connectionState," state"));if(!this._users.find(o=>o===e)){const o=new q(k.INVALID_REMOTE_USER,"user is not in the channel");throw w.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid,", this user is not in the channel")),o}if(!e.hasAudio&&!e.hasVideo){const o=new q(k.INVALID_REMOTE_USER,"user is not published");throw w.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid,", user is not published")),o}if(!n&&(t==="audio"&&!e.hasAudio||t==="video"&&!e.hasVideo)){const o=new q(k.REMOTE_USER_IS_NOT_PUBLISHED);throw w.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid," with mediaType ").concat(t,", remote track is not published")),o}const i=await this._subscribeMutex.lock();w.info("[".concat(this._clientId,"] subscribe user ").concat(e.uid,", mediaType: ").concat(t));try{if(await this._p2pChannel.hasRemoteMediaWithLock(e,t))await this._p2pChannel.unmuteRemote(e,t);else try{const a=t==="audio"?e._audioSSRC:e._videoSSRC,s=t==="audio"?e._audioMid:e._videoMid;this.store.subscribe(e.uid,t,Date.now()),this._p2pChannel instanceof To&&await this._p2pChannel.subscribe(e,t,a,s)}catch(a){throw a}w.info("[".concat(this._clientId,"] subscribe success user ").concat(e.uid,", mediaType: ").concat(t)),this._defaultStreamFallbackType&&this.setStreamFallbackOption(e.uid,this._defaultStreamFallbackType).catch(a=>{w.warning("[".concat(this._clientId,"] auto set fallback failed"),a)});const o=t==="audio"?e._audioTrack:e._videoTrack;if(!o)throw new q(k.UNEXPECTED_ERROR,"can not find remote track in user object");return o}catch(o){throw w.error("[".concat(this._clientId,"] subscribe user ").concat(e.uid," error"),o),o}finally{i()}}async _subscribe(e,t,n){if(this._p2pChannel instanceof To)return this._p2pSubscribe(e,t);if(pr(t,"mediaType",["audio","video"]),!this._joinInfo)throw new q(k.INVALID_OPERATION,"Can't subscribe stream, not joined");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new q(k.INVALID_OPERATION,"Can't subscribe stream in ".concat(this.connectionState," state"));if(!this._users.find(l=>l===e)){const l=new q(k.INVALID_REMOTE_USER,"user is not in the channel");throw w.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid,", this user is not in the channel")),l}if(!e.hasAudio&&!e.hasVideo){const l=new q(k.INVALID_REMOTE_USER,"user is not published");throw w.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid,", user is not published")),l}if(!(n||(t!=="audio"||e.hasAudio&&e._audioSSRC!==void 0)&&(t!=="video"||e.hasVideo&&e._videoSSRC!==void 0))){const l=new q(k.REMOTE_USER_IS_NOT_PUBLISHED);throw w.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid," with mediaType ").concat(t,", remote track is not published")),l}let i=t==="audio"?e._audioSSRC:e._videoSSRC,o=t==="audio"?e._audioOrtc:e._videoOrtc,a=t==="video"?e._rtxSsrcId:void 0,s={stream_type:t==="audio"?De.AUDIO:De.VIDEO,ssrcId:i};const c=await this._subscribeMutex.lock();w.info("[".concat(this._clientId,"] subscribe user ").concat(e.uid,", mediaType: ").concat(t));try{if(await this._p2pChannel.hasRemoteMediaWithLock(e,t))await this._p2pChannel.unmuteRemote(e,t);else try{const u=t==="audio"?e._audioSSRC:e._videoSSRC;u!==void 0&&u!==i&&(i=u,o=t==="audio"?e._audioOrtc:e._videoOrtc,a=t==="video"?e._rtxSsrcId:void 0,s={stream_type:t==="audio"?De.AUDIO:De.VIDEO,ssrcId:i}),ni.markSubscribeStart(this.store.clientId,i),this.store.subscribe(e.uid,t,Date.now()),await this._p2pChannel.subscribe(e,t,i,a,o);try{this._p2pChannel.isPreSubScribe(i)||await this._gateway.subscribe(e.uid,s,!0)}catch(d){if((d==null?void 0:d.code)!==k.WS_ABORT)throw await this._p2pChannel.unsubscribe(e,t),d;await this._p2pChannel.unsubscribe(e,t,!0),this._p2pChannel.setPendingRemoteMedia(e,t)}this.store.subscribe(e.uid,t,void 0,Date.now()),this._p2pChannel.reportSubscribeEvent(!0,null,e,t)}catch(u){throw this._p2pChannel.reportSubscribeEvent(!1,u==null?void 0:u.code,e,t),u}w.info("[".concat(this._clientId,"] subscribe success user ").concat(e.uid,", mediaType: ").concat(t)),this._defaultStreamFallbackType&&this.setStreamFallbackOption(e.uid,this._defaultStreamFallbackType).catch(u=>{w.warning("[".concat(this._clientId,"] auto set fallback failed"),u)});const l=t==="audio"?e._audioTrack:e._videoTrack;if(!l)throw new q(k.UNEXPECTED_ERROR,"can not find remote track in user object");return l}catch(l){throw w.error("[".concat(this._clientId,"] subscribe user ").concat(e.uid," error"),l),l}finally{c()}}async massSubscribe(e){if(Xc(e,"subscribeList"),!this._joinInfo)throw new q(k.INVALID_OPERATION,"Can't subscribe stream, not joined");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new q(k.INVALID_OPERATION,"Can't subscribe stream in ".concat(this.connectionState," state"));const t=Date.now(),n=new Map,r=await this._subscribeMutex.lock();w.info("[".concat(this._clientId,"]start massSubscribe user ").concat(e.map(s=>{let{user:c,mediaType:l}=s;return"user: ".concat(c==null?void 0:c.uid,", mediaType: ").concat(l)}).join("; ")));const i=(e=[...e]).map(s=>{let{user:c,mediaType:l}=s;return{user:c,mediaType:l}}),o=await this._p2pChannel.globalLock();try{var a;for(let c=e.length-1;c>=0;c--){const l=e[c],{user:u,mediaType:d}=l;if(pr(d,"mediaType",["audio","video"]),!u){const p=new q(k.INVALID_PARAMS,"user property does not exist in subscribeList item");throw w.error("[".concat(this._clientId,"] user property does not exist in subscribeList item")),p}if(!this._users.find(p=>p===u)){const p=new q(k.INVALID_REMOTE_USER,"user is not in the channel");w.error("[".concat(this._clientId,"] can not massSubscribe ").concat(u.uid,", this user is not in the channel")),i[c].error=p,e.splice(c,1);continue}if(d==="audio"&&(!u.hasAudio||u._audioSSRC===void 0)||d==="video"&&(!u.hasVideo||u._videoSSRC===void 0)){const p=new q(k.REMOTE_USER_IS_NOT_PUBLISHED);w.error("[".concat(this._clientId,"] can not subscribe ").concat(u.uid," with mediaType ").concat(d,", remote user is not published")),i[c].error=p,e.splice(c,1);continue}const f=_r.Video|_r.LwoVideo,g=n.get(u);if(g){if(d==="video"?g&f:g&_r.Audio){e.splice(c,1),w.warning("[".concat(this._clientId,"] repeat massSubscribe user:").concat(u.uid,", mediaType:").concat(d," twice"));continue}n.set(u,g|(d==="video"?f:_r.Audio))}else n.set(u,d==="video"?f:_r.Audio)}for(let c=e.length-1;c>=0;c--){const l=e[c],{user:u,mediaType:d}=l,h=_r.Video|_r.LwoVideo;if(this._p2pChannel.hasRemoteMedia(u,d)){await this._p2pChannel.unmuteRemoteNoLock(u,d);const f=n.get(u);n.set(u,d==="video"?f^h:f^_r.Audio),e.splice(c,1)}}this.store.massSubscribe(e.map(c=>({userId:c.user.uid,type:c.mediaType})),t);let s=js(a=Array.from(n.entries())).call(a,(c,l)=>{let[u,d]=l;if(d===0)return c;const h={stream_id:u.uid,stream_type:d};return d&_r.Audio&&(h.audio_ssrc=u._audioSSRC),d&_r.Video&&(h.video_ssrc=u._videoSSRC),c.push(h),c},[]);try{e.length>0&&await this._p2pChannel.massSubscribeNoLock(e.map(l=>{let{user:u,mediaType:d}=l;return{user:u,mediaType:d,ssrcId:d===De.VIDEO?u._videoSSRC:u._audioSSRC,rtxSsrcId:d===De.VIDEO?u._rtxSsrcId:void 0}}));const c=new Map;if(s=s.filter(l=>l.video_ssrc&&!this._p2pChannel.isPreSubScribe(l.video_ssrc)||l.audio_ssrc&&!this._p2pChannel.isPreSubScribe(l.audio_ssrc)||!l.video_ssrc&&!l.audio_ssrc),s.length>0){const l=await this._gateway.subscribeAll(s,!0);((l==null?void 0:l.users)||[]).forEach(u=>{let{stream_id:d,video_error_code:h,audio_error_code:f,error_code:g}=u;(h||f||g)&&c.set(d,{video_error_code:h,audio_error_code:f,error_code:g})})}if(Array.from(c.entries()).length>0){const l=[];Array.from(c.entries()).forEach(u=>{let[d,h]=u;const f=this.remoteUsers.find(g=>g.uid===d);if(f){let g;h.error_code||h.video_error_code&&h.audio_error_code?g=void 0:h.video_error_code?g=De.VIDEO:h.audio_error_code&&(g=De.AUDIO),l.push({user:f,mediaType:g})}}),l.length>0&&await this._p2pChannel.massUnsubscribeNoLock(l)}for(const l of i){const u=c.get(l.user.uid);if(u){const d=u.error_code||l.mediaType==="audio"&&u.audio_error_code||l.mediaType==="video"&&u.video_error_code;if(d){const h=T0(d);w.error("user:".concat(l.user.uid," mediaType:").concat(l.mediaType," has massSubscribe error ").concat(h.desc)),l.error=new q(k.SUBSCRIBE_FAILED,"code ".concat(d,": ").concat(h.desc))}}l.error||(l.mediaType==="video"?l.track=l.user.videoTrack:l.track=l.user.audioTrack)}return this.store.massSubscribe(i.filter(l=>!l.error).map(l=>({userId:l.user.uid,type:l.mediaType})),void 0,Date.now()),i.forEach(l=>{var u;Pe.subscribe(this.store.sessionId,{succ:!!l.error,ec:((u=l.error)===null||u===void 0?void 0:u.code)||null,video:l.mediaType===De.VIDEO,audio:l.mediaType===De.AUDIO,peerid:l.user.uid,subscribeRequestid:l.mediaType===De.VIDEO?l.user._videoSSRC:l.user._audioSSRC,p2pid:this.store.p2pId,eventElapse:Math.floor(performance.now()-t),preSsrc:this._p2pChannel.isPreSubScribe(l.user._videoSSRC)},!0)}),w.info("[".concat(this._clientId,"] massSubscribe success ").concat(e.map(l=>{let{user:u,mediaType:d}=l;return"user: ".concat(u==null?void 0:u.uid,", mediaType: ").concat(d)}).join("; "))),i}catch(c){throw await this._p2pChannel.massUnsubscribeNoLock(e),c}}finally{o(),r()}}async unsubscribe(e,t,n){if(!(e instanceof Hl)){const o=this.remoteUsers.find(a=>a.uid===e);if(!o)throw new q(k.INVALID_REMOTE_USER,"user is not in the channel");e=o}if(t||this.store.useP2P){if(t==="datachannel")return this._unsubscribeDataChannel(e,n)}else await this._unsubscribeDataChannel(e,n);if(t&&pr(t,"mediaType",["audio","video"]),!this._joinInfo)throw new q(k.INVALID_OPERATION,"Can't unsubscribe stream, haven't joined yet!");if(!this._users.find(o=>o===e)){const o=new q(k.INVALID_REMOTE_USER,"user is not in the channel");throw w.error("[".concat(this._clientId,"] can not unsubscribe ").concat(e.uid,", user is not in the channel")),o}w.info("[".concat(this._clientId,"] unsubscribe uid: ").concat(e.uid,", mediaType: ").concat(t));const i=await this._subscribeMutex.lock();try{if(this._p2pChannel instanceof To)await this._p2pChannel.unsubscribe(e,t);else{const o=await this._p2pChannel.unsubscribe(e,t);o&&await this._gateway.unsubscribe(o,e.uid),t&&t!=="audio"||(e._audio_pre_subscribed=!1),t&&t!=="video"||(e._video_pre_subscribed=!1),e._is_pre_created&&nS(this._users,e),w.info("[".concat(this._clientId,"] unsubscribe success uid: ").concat(e.uid,", mediaType: ").concat(t))}}catch(o){if(o.code===k.DISCONNECT_P2P)return void w.warning("disconnecting p2p, abort unsubscribe request.");throw w.error("[".concat(this._clientId,"] unsubscribe user ").concat(e.uid," error"),o.toString()),o}finally{i()}}async _unsubscribeDataChannel(e,t){if(t&&Zt(t,"id",0,65535,!0),!this._joinInfo)throw new q(k.INVALID_OPERATION,"Can't unsubscribe datachannel, haven't joined yet!");if(!this._users.find(i=>i===e)){const i=new q(k.INVALID_REMOTE_USER,"user is not in the channel");throw w.error("[".concat(this._clientId,"] can not unsubscribe ").concat(e.uid,", user is not in the channel")),i}let r;if(typeof t=="number"){const i=e._dataChannels.find(o=>o.id===t);i&&(r=[i])}else r=e._dataChannels;if(r===void 0){const i=new q(k.REMOTE_USER_IS_NOT_PUBLISHED);throw w.error("[".concat(this._clientId,"] can not unsubscribe ").concat(e.uid," with channelId ").concat(t,", remote datachannel is not published")),i}w.info("[".concat(this._clientId,"] unsubscribe uid: ").concat(e.uid,", mediaType: datachannel, ids: ").concat(r.map(i=>i.id)));try{const i=await this._p2pChannel.unsubscribeDataChannel(e,r);i&&await this._gateway.unsubscribeDataChannel(i,e.uid),w.info("[".concat(this._clientId,"] unsubscribe datachannel success uid: ").concat(e.uid,", mediaType: datachannel, ids: ").concat(i))}catch(i){if(i.code===k.DISCONNECT_P2P)return void w.warning("disconnecting p2p, abort unsubscribe request.");throw w.error("[".concat(this._clientId,"] unsubscribe user ").concat(e.uid," error"),i.toString()),i}}async massUnsubscribe(e){if(Xc(e,"unsubscribeList"),!this._joinInfo)throw new q(k.INVALID_OPERATION,"Can't unsubscribeAll stream, haven't joined yet!");w.info("[".concat(this._clientId,"] start massUnsubscribe ").concat(e.map(n=>{let{user:r,mediaType:i}=n;return"user: ".concat(r==null?void 0:r.uid,", mediaType: ").concat(i,";")}).join())),e=[...e];const t=new Map;for(let n=e.length-1;n>=0;n--){const{user:r,mediaType:i}=e[n];if(!r){const s=new q(k.INVALID_PARAMS,"user property does not exist in unsubscribeList item");throw w.error("[".concat(this._clientId,"] user property does not exist in unsubscribeList item")),s}if(pr(i,"mediaType",["video","audio",void 0]),!this._users.find(s=>s===r)){w.warning("[".concat(this._clientId,"] can not unsubscribe ").concat(r.uid,", user is not in the channel")),e.splice(n,1);continue}const a=_r.Video|_r.LwoVideo;if(t.has(r)){const s=t.get(r);let c;switch(i){case"video":c=s&a;break;case"audio":c=s&_r.Audio;break;default:c=s&(_r.Audio|a)}if(c){w.warning("[".concat(this._clientId,"] repeat massUnsubscribe user:").concat(r.uid,",mediaType:").concat(i," twice.")),e.splice(n,1);continue}i?i==="audio"?t.set(r,s|_r.Audio):i==="video"&&t.set(r,s|a):t.set(r,s|_r.Audio|a)}else i?i==="audio"?t.set(r,_r.Audio):i==="video"&&t.set(r,a):t.set(r,_r.Audio|a)}try{const n=await this._p2pChannel.massUnsubscribe(e);n&&await this._gateway.massUnsubscribe(n),w.info("[".concat(this._clientId,"] massUnsubscribe success ").concat(e.map(r=>{let{user:i,mediaType:o}=r;return"user: ".concat(i==null?void 0:i.uid,", mediaType: ").concat(o,";")}).join()))}catch(n){if(n.code===k.DISCONNECT_P2P)return void w.warning("[".concat(this._clientId,"] disconnecting p2p, abort unsubscribe request."));throw w.error("[".concat(this._clientId,"] massUnsubscribe error"),n.toString()),n}}async setLowStreamParameter(e){(function(n){if(!n)throw new Q(k.INVALID_PARAMS);On(n.width)||U1(n.width,"streamParameter.width"),On(n.height)||U1(n.height,"streamParameter.height"),On(n.framerate)||U1(n.framerate,"streamParameter.framerate"),On(n.bitrate)||Zt(n.bitrate,"streamParameter.bitrate")})(e),(!e.width&&e.height||e.width&&!e.height)&&w.warning("[".concat(this._clientId,"] The width and height parameters take effect only when both are set")),w.info("[".concat(this._clientId,"] set low stream parameter to"),JSON.stringify(e));const t=this._configDistribute.getLowStreamConfigDistribute();if(t&&t.bitrate&&e.bitrate&&t.bitrate<e.bitrate&&(e.bitrate=t.bitrate),this._lowStreamParameter=e,this._isDualStreamEnabled)return this._p2pChannel.updateVideoStreamParameter(e,se.LocalVideoLowTrack)}async enableDualStream(){if(!It().supportDualStream)throw Pe.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!1}),new q(k.NOT_SUPPORTED,"Your browser is not support dual stream");if(this._isDualStreamEnabled)throw new q(k.INVALID_OPERATION,"Dual stream is already enabled");if(this._p2pChannel.canPublishLowStream())try{await this._publishLowStream()}catch(e){throw Pe.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!1}),e}this._isDualStreamEnabled=!0,Pe.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!0}),w.info("[".concat(this._clientId,"] enable dual stream"))}async disableDualStream(){if(this._isDualStreamEnabled){if(!this._joinInfo)throw new q(k.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if(this._p2pChannel.getLocalMedia(se.LocalVideoLowTrack))try{const e=await this._p2pChannel.unpublishLowStream();e&&await this._gateway.unpublish(e,this._joinInfo.stringUid||this._joinInfo.uid)}catch(e){throw Pe.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!1,succ:!1}),e}this._isDualStreamEnabled=!1,Pe.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!1,succ:!0}),w.info("[".concat(this._clientId,"] disable dual stream"))}}async setClientRole(e,t){if(function(n){pr(n,"role",["audience","host"])}(e),t&&IM(t),this.mode==="rtc"||this.mode==="p2p")throw w.warning("[".concat(this._clientId,"]").concat(this.mode," mode can not use setClientRole")),new q(k.INVALID_OPERATION,"".concat(this.mode," mode can not use setClientRole"));if(t&&t.level&&e==="host")throw new q(k.INVALID_OPERATION,"host mode can not set audience latency level");if(e==="audience"&&this._p2pChannel.hasLocalMedia())throw new q(k.INVALID_OPERATION,"can not set client role to audience when publishing stream");await this._gateway.setClientRole(e,t),this._config.role=e,w.info("[".concat(this._clientId,"] set client role to ").concat(e,", level: ").concat(t&&t.level))}getRemoteInboundOffset(){var e;const t=(e=this._p2pChannel.getStats())===null||e===void 0?void 0:e.audioSend[0];if(!t||!t.timestamp)return 0;const n=t.timestamp-Date.now();return Math.abs(n)>1e3+t.rttMs+100?this.ntpAlignErrorCount+=1:this.ntpAlignErrorCount=0,this.ntpAlignErrorCount>=3?n:0}getNtpWallTimeInMs(){return document.visibilityState==="visible"&&(this.remoteInboundOffset=this.getRemoteInboundOffset()),this.remoteInboundOffset+Date.now()+this._gateway.ntpOffset}setProxyServer(e,t){if(xr(e,"proxyServer"),!t){if(this.connectionState!=="DISCONNECTED")throw new q(k.INVALID_OPERATION,"Set proxy server before join channel");if(this._cloudProxyServerMode!=="disabled"||this._useLocalAccessPoint)throw new q(k.INVALID_OPERATION,"You have already set the proxy")}this._proxyServer=e,Pe.setProxyServer(this._proxyServer),w.setProxyServer(this._proxyServer),w.info("[".concat(this._clientId,"] Set proxy server ").concat(t?"by initialize call":""," success."))}setTurnServer(e,t){if(Array.isArray(e)||(e=[e]),!t){if(this.connectionState!=="DISCONNECTED")throw new q(k.INVALID_OPERATION,"Set turn server before join channel");if(this._cloudProxyServerMode!=="disabled"||this._useLocalAccessPoint)throw new q(k.INVALID_OPERATION,"You have already set the proxy")}if(Fy(e))return this._turnServer={servers:e,mode:"original-manual"},void w.info("[".concat(this._clientId,"] Set original turnserver ").concat(t?"by initialize call":""," success: ").concat(e.map(n=>n.urls).join(","),"."));e.forEach(n=>Y7(n)),this._turnServer={servers:e,mode:"manual"},w.info("[".concat(this._clientId,"] Set turnserver ").concat(t?"by initialize call":""," success."))}setLicense(e){if(this.connectionState!=="DISCONNECTED")throw new q(k.INVALID_OPERATION,"you should set license before join channel");if(xr(e,"license",32,32),!/^[A-Za-z\d]+$/.test(e))throw new q(k.INVALID_PARAMS,"license should only contains characters from A-Z a-z 0-9");this._license=e,w.info("[".concat(this._clientId,"] set license success"),e)}startProxyServer(e){if(this.connectionState!=="DISCONNECTED")throw new q(k.INVALID_OPERATION,"Start proxy server before join channel");if(this._proxyServer||this._turnServer.mode==="manual"||this._useLocalAccessPoint)throw new q(k.INVALID_OPERATION,"You have already set the proxy");const t=[3,4,5];let n;switch(e===void 0&&(e=3),e){case 1:case 2:throw new q(k.NOT_SUPPORTED,"proxy mode 1/2 has been deprecated and not supported.");case 3:n="proxy3";break;case 4:n="proxy4";break;case 5:n="proxy5";break;default:throw new q(k.INVALID_PARAMS,"proxy server mode must be ".concat(t.join("|")))}this._cloudProxyServerMode=n,this.store.cloudProxyServerMode=n,w.info("[".concat(this._clientId,"] set cloud proxy server mode to"),this._cloudProxyServerMode)}stopProxyServer(){if(this.connectionState!=="DISCONNECTED")throw new q(k.INVALID_OPERATION,"Stop proxy server after leave channel");Pe.setProxyServer(),w.setProxyServer(),this._cloudProxyServerMode="disabled",this.store.cloudProxyServerMode="disabled",w.info("[".concat(this._clientId,"] set cloud proxy server mode to"),this._cloudProxyServerMode),this._proxyServer=void 0,this._turnServer={mode:"auto",servers:[]}}setLocalAccessPointsV2(e){if(!e.accessPoints)throw new q(k.INVALID_PARAMS,"accessPoints is required.");Xc(e.accessPoints.serverList,"accessPoints.serverList"),xr(e.accessPoints.domain,"accessPoints.domain");const t=(h,f)=>{Zt(h,f,0,65535,!0)};let n=443;if(e.accessPoints.port&&(t(e.accessPoints.port,"accessPoints.port"),n=e.accessPoints.port),this._proxyServer||this._cloudProxyServerMode!=="disabled")throw new q(k.INVALID_OPERATION,"set local access point failed, You have already set the cloud proxy");H("CLOSE_AFB_FOR_LOCAL_AP")&&(Qt("JOIN_WITH_FALLBACK_SIGNAL_PROXY",!1),Qt("JOIN_WITH_FALLBACK_MEDIA_PROXY",!1));const r=/^((\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.){3}(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/,i=e.accessPoints.domain,o=e.accessPoints.serverList.map(h=>r.test(h)?"".concat(h.replace(/\./g,"-"),".").concat(i):h),a=o.map(h=>"".concat(h,":").concat(n));this._useLocalAccessPoint=!0,this._setLocalAPVersion=2,Qt("WEBCS_DOMAIN",a),Qt("WEBCS_DOMAIN_BACKUP_LIST",a),Qt("GATEWAY_DOMAINS",[i]),e.report&&e.report.hostname&&Array.isArray(e.report.hostname)&&e.report.hostname.length?(Xc(e.report.hostname,"report.hostname"),Qt("EVENT_REPORT_DOMAIN",e.report.hostname[0]),Qt("EVENT_REPORT_BACKUP_DOMAIN",e.report.hostname[1]||e.report.hostname[0])):(Qt("EVENT_REPORT_DOMAIN",o[0]),Qt("EVENT_REPORT_BACKUP_DOMAIN",o[1]||o[0]));let s=6443;e.report&&e.report.port&&(t(e.report.port,"report.port"),s=e.report.port),Qt("STATS_COLLECTOR_PORT",s),e.report?Qt("ENABLE_EVENT_REPORT",!0):Qt("ENABLE_EVENT_REPORT",!1);let c="";e.log&&e.log.hostname&&Array.isArray(e.log.hostname)&&e.log.hostname.length?(Xc(e.log.hostname,"log.hostname"),c=e.log.hostname[0]):c=o[0];let l=6444;e.log&&e.log.port&&(t(e.log.port,"log.port"),l=e.log.port),Qt("LOG_UPLOAD_SERVER","".concat(c,":").concat(l));let u=[];e.cds&&e.cds.hostname&&Array.isArray(e.cds.hostname)&&e.cds.hostname.length?(Xc(e.cds.hostname,"cds.hostname"),u=e.cds.hostname):u=o;let d=443;e.cds&&e.cds.port&&(t(e.cds.port,"cds.port"),d=e.cds.port),Qt("CDS_AP",u.map(h=>"".concat(h,":").concat(d))),e.cds?Qt("ENABLE_CONFIG_DISTRIBUTE",!0):Qt("ENABLE_CONFIG_DISTRIBUTE",!1),w.info("set local access point v2 success")}setLocalAccessPoints(e,t){if(Xc(e,"serverList"),xr(t,"domain"),this._proxyServer||this._cloudProxyServerMode!=="disabled")throw new q(k.INVALID_OPERATION,"set local access point failed, You have already set the cloud proxy");const n=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/;e=e.map(r=>n.test(r)?"".concat(r.replace(/\./g,"-"),".").concat(t):r),this._useLocalAccessPoint=!0,this._setLocalAPVersion=1,Qt("WEBCS_DOMAIN",e),Qt("WEBCS_DOMAIN_BACKUP_LIST",e),Qt("GATEWAY_DOMAINS",[t]),Qt("EVENT_REPORT_DOMAIN",e[0]),Qt("EVENT_REPORT_BACKUP_DOMAIN",e[1]||e[0]),Qt("LOG_UPLOAD_SERVER","".concat(e[0],":6444")),w.info("[".concat(this._clientId,"] set local access point success"))}async setRemoteDefaultVideoStreamType(e){if(pr(e,"streamType",[0,1]),this._remoteDefaultVideoStreamType=e,this._joinInfo)try{await this._gateway.setDefaultRemoteVideoStreamType(e),this._joinInfo.defaultVideoStream=this._remoteDefaultVideoStreamType}catch(t){throw w.error("[".concat(this._clientId,"] set default remote video stream type error"),t.toString()),t}else w.debug("[".concat(this._clientId,"] haven't joined yet, cache remoteDefaultVideoStreamType ").concat(e))}async setRemoteVideoStreamType(e,t){pr(t,"streamType",[0,1]);try{await this._gateway.setRemoteVideoStreamType(e,t),setTimeout(()=>{const n=this._users.find(r=>r.uid===e);n&&n.videoTrack&&n.videoTrack.updateMediaStreamTrackResolution()},2e3)}catch(n){throw w.error("[".concat(this._clientId,"] set remote video stream type error"),n.toString()),n}w.info("[".concat(this._clientId,"] set remote ").concat(e," video stream type to ").concat(t)),this._remoteStreamTypeCacheMap.set(e,t)}async setStreamFallbackOption(e,t){pr(t,"fallbackType",[0,1,2]);try{await this._gateway.setStreamFallbackOption(e,t)}catch(n){throw w.error("[".concat(this._clientId,"] set stream fallback option"),n.toString()),n}w.info("[".concat(this._clientId,"] set remote ").concat(e," stream fallback type to ").concat(t)),this._streamFallbackTypeCacheMap.set(e,t)}setEncryptionConfig(e,t,n,r){(function(o){pr(o,"encryptionMode",["aes-128-xts","aes-256-xts","aes-128-ecb","sm4-128-ecb","aes-128-gcm","aes-256-gcm","aes-128-gcm2","aes-256-gcm2","none"])})(e),xr(t,"secret");const i=["aes-128-gcm2","aes-256-gcm2"];if(Ce(i).call(i,e)){if(!n||!(n instanceof Uint8Array&&n.length===32))throw new q(k.INVALID_PARAMS,"salt must be an Uint8Array and exactly equal to 32 bytes")}else if(n)throw new q(k.INVALID_PARAMS,"current encrypt mode does not need salt");if(r){if(nl(r,"encryptDataStream"),!Ce(i).call(i,e))throw new q(k.INVALID_PARAMS,"current encrypt mode does not support data stream");this._encryptDataStream=!0}new RegExp(`^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*,.<>?/:;'"|{}\\[\\]])(?=.{8,})`).test(t)||w.warning(`The secret is not strong:
      The secret must contain at least 1 lowercase alphabetical character,
      The secret must contain at least 1 uppercase alphabetical character,
      The secret must contain at least 1 numeric character,
      The secret must contain at least one special character,
      The secret must be eight characters or longer.
      `),this._encryptionMode=e,this._encryptionSecret=t,n&&(this._encryptionSalt=au(n))}async renewToken(e){if(xr(e,"token",1,2047),!this._key||!this._joinInfo)throw new q(k.INVALID_OPERATION,"renewToken should not be called before user join");const t=this._key;this._key=e,this._joinInfo&&(this._joinInfo.token=e);const n=await this._renewTokenMutex.lock();try{if(H("USE_NEW_TOKEN")){w.debug("[".concat(this._clientId,"] start renew token with ticket from unilbs"));const r=await Tfe(this._joinInfo,this._axiosCancelSource.token,this._config.httpRetryConfig||ar);w.debug("[".concat(this._clientId,"] get ticket from unilbs success")),await this._gateway.renewToken({token:e,ticket:r})}else w.debug("[".concat(this._clientId,"] start renew token without ticket")),await this._gateway.renewToken({token:e});w.debug("[".concat(this._clientId,"] renewToken success"))}catch(r){throw this._key=t,this._joinInfo.token=t,w.error("[".concat(this._clientId,"] renewToken failed"),r.toString()),r}finally{n()}}enableAudioVolumeIndicator(){this._audioVolumeIndicationInterval?w.warning("you have already enabled audio volume indicator!"):this._audioVolumeIndicationInterval=window.setInterval(()=>{const e=this._p2pChannel.getAudioLevels();this.safeEmit(vt.VOLUME_INDICATOR,e)},H("AUDIO_VOLUME_INDICATION_INTERVAL")||2e3)}getRTCStats(){const e=this._statsCollector.getRTCStats(),t=this._gateway.getInChannelInfo();return e.Duration=Math.round(t.duration/1e3),e}async startLiveStreaming(e,t){if(!t){if(this.codec!=="h264")throw new q(k.LIVE_STREAMING_INVALID_RAW_STREAM,"raw streaming is only support h264");if(!this._p2pChannel.hasLocalMedia())throw new q(k.LIVE_STREAMING_INVALID_RAW_STREAM,"can not find stream to raw streaming")}if(this._liveRawStreamingClient&&this._liveRawStreamingClient.hasUrl(e)||this._liveTranscodeStreamingClient&&this._liveTranscodeStreamingClient.hasUrl(e))throw new q(k.LIVE_STREAMING_TASK_CONFLICT);const n=t?hc.TRANSCODE:hc.RAW;return this._createLiveStreamingClient(n).startLiveStreamingTask(e,n)}setLiveTranscoding(e){return this._createLiveStreamingClient(hc.TRANSCODE).setTranscodingConfig(e)}async stopLiveStreaming(e){const t=[this._liveRawStreamingClient,this._liveTranscodeStreamingClient].filter(n=>n&&n.hasUrl(e));if(!t.length)throw new q(k.INVALID_PARAMS,"can not find live streaming url to stop");await _e.all(t.map(n=>n&&n.stopLiveStreamingTask(e)))}async startChannelMediaRelay(e){GU(e),await this._createChannelMediaRelayClient().startChannelMediaRelay(e)}async updateChannelMediaRelay(e){GU(e),await this._createChannelMediaRelayClient().updateChannelMediaRelay(e)}async stopChannelMediaRelay(){await this._createChannelMediaRelayClient().stopChannelMediaRelay(),this._statsCollector.onStatsChanged&&(this._statsCollector.onStatsChanged=void 0)}async sendStreamMessage(e){var t;let n=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(!this._joinInfo)throw new q(k.INVALID_OPERATION,"can not send data stream, not joined");if((typeof e=="string"||e instanceof Uint8Array)&&(e={payload:e}),typeof e.payload=="string"){const i=new TextEncoder;e.payload=i.encode(e.payload)}let r=!1;if(this._encryptDataStream&&this._encryptDataStreamIv&&this._encryptDataStreamKey&&window.crypto.subtle&&Ce(t=["aes-128-gcm2","aes-256-gcm2"]).call(t,this._encryptionMode)&&(r=!0,e.payload=await async function(i,o,a){var s;const c=js(s=Array.from(a)).call(s,(p,m)=>p+m,0),l={serverTs:0,seq:Vue++,length:a.length,checkSum:c},u=new Uint8Array(DM(c,2)),d=new ArrayBuffer(mh),h=new DataView(d);h.setUint32(0,l.serverTs),h.setUint16(4,l.seq),h.setUint16(6,l.length),h.setUint16(8,l.checkSum);const f=16-a.length%16;a=OM(a,new Uint8Array(f));const g=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:i,tagLength:kM,additionalData:u},o,a);return OM(new Uint8Array(d),new Uint8Array(g))}(this._encryptDataStreamIv,this._encryptDataStreamKey,e.payload)),new Blob([e.payload]).size>1024)throw new q(k.INVALID_PARAMS,r?"encrypted stream message out of range.":"stream message out of range.");return this._gateway.signal.request(Ke.DATA_STREAM,{payload:au(e.payload),syncWithAudio:e.syncWithAudio,sendTs:Date.now()-Yfe},!n)}sendMetadata(e){if(!this._joinInfo)throw new q(k.INVALID_OPERATION,"can not send metadata, not joined");if(new Blob([e]).size>1024)throw new q(k.METADATA_OUT_OF_RANGE);return this._gateway.signal.request(Ke.SEND_METADATA,{session_id:this._joinInfo.sid,metadata:au(e)})}async sendCustomReportMessage(e){if(Array.isArray(e)||(e=[e]),e.forEach(Hue),!this._joinInfo)throw new q(k.INVALID_OPERATION,"can not send custom report, not joined");await Pe.sendCustomReportMessage(this._joinInfo.sid,e)}getLocalAudioStats(){return this._statsCollector.getLocalAudioTrackStats()}getRemoteAudioStats(){return this._statsCollector.getRemoteAudioTrackStats()}getLocalVideoStats(){return this._statsCollector.getLocalVideoTrackStats()}getRemoteVideoStats(){return this._statsCollector.getRemoteVideoTrackStats()}getRemoteNetworkQuality(){return this._statsCollector.getRemoteNetworkQualityStats()}async pickSVCLayer(e,t){pr(t.spatialLayer,"spatialLayer",[0,1,2,3]),pr(t.temporalLayer,"temporalLayer",[0,1,2,3]);try{await this._gateway.pickSVCLayer(e,t)}catch(n){throw w.error("[".concat(this._clientId,"] pick SVC layer failed"),n.toString()),n}}async setRTMConfig(e){const{apRTM:t=!1,rtmFlag:n}=e;if(nl(t,"apRTM"),Zt(n,"rtmFlag",0),this._rtmConfig.apRTM=t,this._rtmConfig.rtmFlag=n,w.debug("[".concat(this._clientId,"] setRTMconfig ").concat(JSON.stringify(e)," in ").concat(this.connectionState," state")),(this.connectionState==="CONNECTED"||this.connectionState==="RECONNECTING")&&this._joinInfo)return this._joinInfo.apRTM=t,this._joinInfo.rtmFlag=n,this._gateway.setRTM2Flag(n)}_reset(){if(w.debug("[".concat(this._clientId,"] reset client")),this._axiosCancelSource.cancel(),this._axiosCancelSource=eo.CancelToken.source(),this._streamFallbackTypeCacheMap=new Map,this._remoteStreamTypeCacheMap=new Map,this._configDistribute.stopGetConfigDistribute(),this._joinInfo&&gz(this._joinInfo),this._joinInfo=void 0,this._proxyServer=void 0,this._defaultStreamFallbackType=void 0,this._sessionId=null,this.store.sessionId=null,this._statsCollector.reset(),this._key=void 0,this._appId=void 0,this._uid=void 0,this.store.uid=void 0,this._channelName=void 0,this._encryptionMode="none",this._encryptionSecret=null,this._encryptionSalt=null,this._encryptDataStreamKey=null,this._encryptDataStreamIv=null,this._pendingPublishedUsers=[],this._users.forEach(e=>{e._audioTrack&&e._audioTrack._destroy(),e._videoTrack&&e._videoTrack._destroy(),e._dataChannels&&(e._dataChannels.forEach(t=>t._close()),e._dataChannels.length=0)}),this._users=[],this._audioVolumeIndicationInterval&&(window.clearInterval(this._audioVolumeIndicationInterval),this._audioVolumeIndicationInterval=void 0),this._cloudProxyServerMode==="fallback"&&(this._cloudProxyServerMode="disabled",this.store.cloudProxyServerMode="disabled"),this._p2pChannel.reset(),this._publishMutex=new ri("client-publish"),this._subscribeMutex=new ri("client-subscribe"),this._networkQualityInterval&&(window.clearInterval(this._networkQualityInterval),this._networkQualityInterval=void 0),this._liveRawStreamingClient&&(this._liveRawStreamingClient.terminate(),this._liveRawStreamingClient.removeAllListeners(),this._liveRawStreamingClient=void 0),this._liveTranscodeStreamingClient&&(this._liveTranscodeStreamingClient.terminate(),this._liveTranscodeStreamingClient.removeAllListeners(),this._liveTranscodeStreamingClient=void 0),this._channelMediaRelayClient&&(this._channelMediaRelayClient.dispose(),this._channelMediaRelayClient=void 0),this._inspect)try{this._inspect.close(),this._inspect=void 0}catch{}if(this._moderation)try{this.setImageModeration(!1)}catch{}}_startSession(e,t){var n;const r=e||Yh();e?w.debug("[".concat(this._clientId,"] new Session ").concat(r)):w.debug("[".concat(this._clientId,"] renewSession ").concat(this._sessionId," => ").concat(r));const i=e?"":this._sessionId||"";this._sessionId=r,this.store.sessionId=r;const o={lts:new Date().getTime(),mode:this.mode,buildFormat:2,stringUid:(t==null?void 0:t.stringUid)||((n=this._joinInfo)===null||n===void 0?void 0:n.stringUid),channelProfile:this.mode==="live"?1:0,channelMode:0,isABTestSuccess:Number(this._configDistribute.isSuccess),lsid:i,clientRole:this.role==="audience"?2:1};Pe.sessionInit(this._sessionId,ws({cname:t.channel,appid:t.appId},o)),this._joinInfo&&(this._joinInfo.sid=r),this._gateway.joinInfo&&(this._gateway.joinInfo.sid=r)}async _publishHighStream(e){if(!this._joinInfo||this._uid===void 0)throw new q(k.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new q(k.INVALID_OPERATION,"can not publish stream in ".concat(this.connectionState," state"));if(this._turnServer.mode==="auto"&&H("FORCE_TURN")&&!H("TURN_ENABLE_TCP")&&!H("TURN_ENABLE_UDP"))throw new q(k.UNEXPECTED_ERROR,"force TURN With No TURN Configuration");w.debug("[".concat(this._clientId,"] publish high stream"));try{const n=await this._p2pChannel.publish(e,this._isDualStreamEnabled,this._lowStreamParameter);if(this._p2pChannel instanceof To){const r=(await n.next()).value;if(r){try{await this._gateway.sendExtensionMessage(Hn.PUBLISH,r,!0)}catch(i){throw n.throw(i),i}await n.next()}this._p2pChannel.reportPublishEvent(!0,null)}else{const r=(await n.next()).value;if(r){var t;let i;try{i=await this._gateway.publish(this._uid,r,!0)}catch(o){if(o.code!==k.DISCONNECT_P2P)throw n.throw(o),o}await n.next(((t=i)===null||t===void 0?void 0:t.ortc)||[])}this._p2pChannel.reportPublishEvent(!0,null);for(const i of e)i instanceof hn&&i._encoderConfig&&this._gateway.setVideoProfile(i._encoderConfig),!i.muted&&i.enabled||await this._p2pChannel.muteLocalTrack(i)}}catch(n){if(this._p2pChannel.reportPublishEvent(!1,n==null?void 0:n.code,e),(n==null?void 0:n.code)===k.WS_ABORT)return;throw n}}async _publishLowStream(){if(!this._joinInfo||this._uid===void 0)throw new q(k.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new q(k.INVALID_OPERATION,"can not publish stream in ".concat(this.connectionState," state"));w.debug("[".concat(this._clientId,"] publish low stream"));const e=this._configDistribute.getLowStreamConfigDistribute();e&&e.bitrate&&(this._lowStreamParameter||(this._lowStreamParameter={width:160,height:120,framerate:15,bitrate:50}),this._lowStreamParameter&&this._lowStreamParameter.bitrate&&e.bitrate<this._lowStreamParameter.bitrate&&(this._lowStreamParameter.bitrate=e.bitrate));try{const n=await this._p2pChannel.publishLowStream(this._lowStreamParameter),r=(await n.next()).value;if(r){var t;let i;try{i=await this._gateway.publish(this._uid,r,!0)}catch(o){if(o.code!==k.DISCONNECT_P2P)throw n.throw(o),o}n.next(((t=i)===null||t===void 0?void 0:t.ortc)||[]),this._p2pChannel.reportPublishEvent(!0,null,void 0,!0)}}catch(n){if(this._p2pChannel.reportPublishEvent(!1,n==null?void 0:n.code,void 0,!0),(n==null?void 0:n.code)===k.WS_ABORT)return;throw n}}_createLiveStreamingClient(e){const t=()=>{if(!this._joinInfo||!this._appId)return new q(k.INVALID_OPERATION,"can not create live streaming client, please join channel first").throw();const n=(r={joinInfo:this._joinInfo,appId:this._appId,websocketRetryConfig:this._config.websocketRetryConfig,httpRetryConfig:this._config.httpRetryConfig},wm("LiveStreaming").create(r));var r;return n.onLiveStreamError=(i,o)=>{Pe.reportApiInvoke(this._sessionId,{name:dr.ON_LIVE_STREAM_ERROR,options:[i,o],tag:kn.TRACER}).onSuccess(),this.safeEmit(vt.LIVE_STREAMING_ERROR,i,o)},n.onLiveStreamWarning=(i,o)=>{Pe.reportApiInvoke(this._sessionId,{name:dr.ON_LIVE_STREAM_WARNING,options:[i,o],tag:kn.TRACER}).onSuccess(),this.safeEmit(vt.LIVE_STREAMING_WARNING,i,o)},n.on(WI.REQUEST_WORKER_MANAGER_LIST,(i,o,a)=>{if(!this._joinInfo)return a(new q(k.INVALID_OPERATION,"can not find join info to get worker manager"));(async function(s,c,l,u){const d=H("UAP_AP").slice(0,H("AJAX_REQUEST_CONCURRENT")).map(h=>c.proxyServer?"https://".concat(c.proxyServer,"/ap/?url=").concat(h+"/api/v1?action=uap"):"https://".concat(h,"/api/v1?action=uap"));return await Efe(d,s,c,l,u)})(i,this._joinInfo,this._axiosCancelSource.token,ar).then(o).catch(a)}),n};return e===hc.RAW?(this._liveRawStreamingClient=this._liveRawStreamingClient||t(),this._liveRawStreamingClient):(this._liveTranscodeStreamingClient=this._liveTranscodeStreamingClient||t(),this._liveTranscodeStreamingClient)}_createChannelMediaRelayClient(){if(!this._joinInfo)return new q(k.INVALID_OPERATION,"can not create channel media relay client, please join channel first").throw();if(!this._channelMediaRelayClient){const{sendResolutionWidth:t,sendResolutionHeight:n}=this.getLocalVideoStats(),r=(e={joinInfo:this._joinInfo,clientId:this._clientId,websocketRetryConfig:this._config.websocketRetryConfig,httpRetryConfig:this._config.httpRetryConfig,resolution:{width:t,height:n}},wm("ChannelMediaRelay").create(e));r.on("state",i=>{i===lo.RELAY_STATE_FAILURE&&r&&r.dispose(),this.safeEmit(vt.CHANNEL_MEDIA_RELAY_STATE,i)}),r.on("event",i=>{this.safeEmit(vt.CHANNEL_MEDIA_RELAY_EVENT,i)}),this._channelMediaRelayClient=r,this._statsCollector.onStatsChanged=(i,o)=>{var a;i==="resolution"&&((a=this._channelMediaRelayClient)===null||a===void 0||a.setVideoProfile(o))}}var e;return this._channelMediaRelayClient}_handleUpdateDataChannel(e,t){const{added:n,deleted:r}=e,i=[];if(t){const o=[];this._users.forEach(a=>{a._dataChannels.forEach(s=>{n.every(c=>c.uid!==a._uintid||c.stream_id!==s.id)&&o.push({uid:a._uintid,stream_id:s.id,ordered:s.ordered,max_retrans_times:s.maxRetransmits,metadata:s.metadata})})}),o.length>0&&this._handleUpdateDataChannel({added:[],deleted:o})}Array.isArray(n)&&n.length>0&&n.forEach(o=>{const{uid:a,stream_id:s,ordered:c,max_retrans_times:l,metadata:u}=o,d=this._users.find(h=>h._uintid===a);if(!d)return void w.error("[".concat(this._clientId,"] can not find target user!(on_add_data_channel)"));if(w.debug("[".concat(this._clientId,"] data_channel added with uid ").concat(a)),Ce(i).call(i,d)||i.push(d),d._uintid||(d._uintid=a),d._dataChannels.findIndex(h=>h.id===o.stream_id)===-1){const h={id:s,ordered:!!c,maxRetransmits:l,metadata:u},f=function(g){return o3(g,!0)}(h);d._dataChannels.push(f),w.info("[".concat(this._clientId,"] remote user ").concat(d.uid," published datachannel")),t||this.safeEmit(vt.USER_PUBLISHED,d,"datachannel",h)}this._p2pChannel.hasPendingRemoteDataChannel(d,o.stream_id)&&(w.debug("[".concat(this._clientId,"] resubscribe datachannel for user ").concat(d.uid," after reconnect.")),this._subscribeDataChannel(d,o.stream_id).catch(h=>{w.error("[".concat(this._clientId,"] resubscribe datachannel error"),h.toString())}))}),t&&(this.safeEmit(vt.PUBLISHED_USER_LIST,this._pendingPublishedUsers),this._pendingPublishedUsers=[]),Array.isArray(r)&&r.length>0&&r.forEach(o=>{const{uid:a,stream_id:s}=o,c=this._users.find(u=>u._uintid===a);if(!c)return void w.error("[".concat(this._clientId,"] can not find target user!(on_delete_data_channel)"));const l=c._dataChannels.find(u=>u.id===o.stream_id);l&&(w.debug("[".concat(this._clientId,"] data_stream delete with uid ").concat(a)),this._p2pChannel.unsubscribeDataChannel(c,[l]).then(u=>{if(c._dataChannels=c._dataChannels.filter(d=>d!==l),u)return this._gateway.unsubscribeDataChannel(u,c.uid)}),w.info("[".concat(this._clientId,"] remote user ").concat(a," unpublished datachannel ,id:").concat(l.id)),this.safeEmit(vt.USER_UNPUBLISHED,c,"datachannel",l._config))})}_handleRemoveDataChannels(e){const t=this._users.find(n=>n.uid===e.uid);if(t){if(t._dataChannels!==void 0&&t._dataChannels.length>0){w.debug("[".concat(this._clientId,"] datachannel removed with uid ").concat(e.uid));const n=()=>{w.info("[".concat(this._clientId,"] remote user ").concat(t.uid," unpublished datachannel")),t._dataChannels.forEach(r=>{this.safeEmit(vt.USER_UNPUBLISHED,t,"datachannel",r._config)})};this._p2pChannel.unsubscribeDataChannel(t,t._dataChannels).then(r=>{if(r)return this._gateway.unsubscribeDataChannel(r,t.uid)}),n()}}else w.warning("[".concat(this._clientId,"] can not find target user!(on_remove_datachannel)"))}_handleGatewayEvents(){this._gateway.on(Vr.DISCONNECT_P2P,async()=>{await this._p2pChannel.disconnectForReconnect()}),this._gateway.on(Vr.CONNECTION_STATE_CHANGE,(e,t,n)=>{var r;if(n===Xt.FALLBACK)return;const i=()=>{this.safeEmit(vt.CONNECTION_STATE_CHANGE,e,t,n)};if(Pe.reportApiInvoke(this._sessionId||((r=this._gateway.joinInfo)===null||r===void 0?void 0:r.sid)||null,{name:dr.CONNECTION_STATE_CHANGE,options:[e,t,n],tag:kn.TRACER}).onSuccess(JSON.stringify({cur:e,prev:t,reason:n})),w.info("[".concat(this._clientId,"] connection state change: ").concat(t," -> ").concat(e)),e==="DISCONNECTED")return this._reset(),void i();if(e==="RECONNECTING")this._users.forEach(a=>{a._trust_in_room_=!1,a._trust_audio_enabled_state_=!1,a._trust_video_enabled_state_=!1,a._trust_audio_mute_state_=!1,a._trust_video_mute_state_=!1,a._trust_audio_stream_added_state_=!1,a._trust_video_stream_added_state_=!1,a._is_pre_created||(a._audio_pre_subscribed||(a._audioSSRC=void 0,a._audioOrtc=void 0),a._video_pre_subscribed||(a._videoSSRC=void 0,a._videoOrtc=void 0,a._rtxSsrcId=void 0),a._cname=void 0)}),this._userOfflineTimeout&&window.clearTimeout(this._userOfflineTimeout),this._streamRemovedTimeout&&window.clearTimeout(this._streamRemovedTimeout),this._userOfflineTimeout=void 0,this._streamRemovedTimeout=void 0;else if(e==="CONNECTED"){var o;this._streamFallbackTypeCacheMap.forEach((a,s)=>{this._gateway.setStreamFallbackOption(s,a).catch(c=>{w.warning("[".concat(this._clientId,"] auto set stream fallback option failed"),c)})}),this._remoteStreamTypeCacheMap.forEach((a,s)=>{this._gateway.setRemoteVideoStreamType(s,a).catch(c=>{w.warning("[".concat(this._clientId,"] auto set remote stream type failed"),c)})}),this._remoteDefaultVideoStreamType!==void 0&&((o=this._joinInfo)===null||o===void 0?void 0:o.defaultVideoStream)===void 0&&this.setRemoteDefaultVideoStreamType(this._remoteDefaultVideoStreamType).then(()=>{w.debug("[".concat(this._clientId,"] setRemoteDefaultVideoStreamType after gateway connected"))}).catch(a=>{w.error("[".concat(this._clientId,"] setRemoteDefaultVideoStreamType after gateway failed, ").concat(a))}),this.store.useP2P||(this._p2pChannel.republish(),this._userOfflineTimeout=window.setTimeout(()=>{this.connectionState==="CONNECTED"&&(this._userOfflineTimeout=void 0,this._users.filter(a=>!a._trust_in_room_).forEach(a=>{w.debug("[".concat(this._clientId,"] user offline timeout, emit user offline ").concat(a.uid)),this._handleUserOffline({uid:a.uid})}))},3e3),this._streamRemovedTimeout=window.setTimeout(()=>{this.connectionState==="CONNECTED"&&(this._streamRemovedTimeout=void 0,this._users.forEach(a=>{a._trust_audio_mute_state_||(w.debug("[".concat(this._clientId,"] auto dispatch audio unmute event ").concat(a.uid)),this._handleMuteStream(a.uid,De.AUDIO,!1)),a._trust_video_mute_state_||(w.debug("[".concat(this._clientId,"] auto dispatch video unmute event ").concat(a.uid)),this._handleMuteStream(a.uid,De.VIDEO,!1)),a._trust_audio_enabled_state_||(w.debug("[".concat(this._clientId,"] auto dispatch enable local audio ").concat(a.uid)),this._handleSetStreamLocalEnable("audio",a.uid,!0)),a._trust_video_enabled_state_||(w.debug("[".concat(this._clientId,"] auto dispatch enable local video ").concat(a.uid)),this._handleSetStreamLocalEnable("video",a.uid,!0)),a._trust_video_stream_added_state_||(w.debug("[".concat(this._clientId,"] auto dispatch reset video stream added ").concat(a.uid)),this._handleResetAddStream(a,"video")),a._trust_audio_stream_added_state_||(w.debug("[".concat(this._clientId,"] auto dispatch reset audio stream added ").concat(a.uid)),this._handleResetAddStream(a,"audio")),a._video_added_||a._audio_added_||(w.debug("[".concat(this._clientId,"] auto dispatch stream remove ").concat(a.uid)),this._handleRemoveStream({uid:a.uid,uint_id:a._uintid}))}))},1e3))}i()}),this._gateway.on(Vr.REQUEST_NEW_GATEWAY_LIST,async(e,t)=>{if(!this._joinInfo)return t(new q(k.UNEXPECTED_ERROR,"can not recover, no join info"));try{let n;const r=await u3(ws(ws({},this._joinInfo),{},{uid:this._joinInfo.uid,stringUid:void 0}));r?(n=r.ap,d3(r),this._joinInfo.preload=!0):(n=await rA(this._joinInfo,this._axiosCancelSource.token,this._config.httpRetryConfig||ar,this.store),this._joinInfo.preload=!1),this._joinInfo&&(this._joinInfo.apResponse=n.gatewayInfo.res,this._joinInfo.gatewayAddrs=n.gatewayInfo.gatewayAddrs,this._joinInfo.uni_lbs_ip=n.gatewayInfo.uni_lbs_ip);const i=[];n.gatewayInfo.gatewayAddrs.forEach(o=>{let{address:a}=o;const[s,c]=a.split(":");this._joinInfo&&this._joinInfo.proxyServer?i.push({proxy:this._joinInfo.proxyServer,host:s,port:c}):i.push({host:s,port:c})}),e(i)}catch(n){t(n)}}),this._gateway.on(Vr.NETWORK_QUALITY,e=>{this._networkQualitySensitivity==="normal"&&this.safeEmit(vt.NETWORK_QUALITY,e)}),this._gateway.on(Vr.STREAM_TYPE_CHANGE,(e,t)=>{this.safeEmit(vt.STREAM_TYPE_CHANGED,e,t),Pe.reportApiInvoke(this._sessionId,{name:dr.STREAM_TYPE_CHANGE,options:[e,t],tag:kn.TRACER}).onSuccess(JSON.stringify({uid:e,streamType:t}))}),this._gateway.on(Vr.IS_P2P_DISCONNECTED,e=>{this._p2pChannel.isP2PDisconnected()?e(!0):this._p2pChannel.hasLocalMedia()||this._p2pChannel.hasRemoteMedia()?e(!1):e(!0)}),this._gateway.on(Vr.REQUEST_P2P_CONNECTION_PARAMS,async(e,t,n)=>{try{let r=await this._p2pChannel.getEstablishParams();H("ENABLE_PREALLOC_PC")&&r||(r=await this._p2pChannel.startP2PConnection(e)),t(r)}catch(r){n(r)}}),this._gateway.on(Vr.JOIN_RESPONSE,(e,t)=>{if(this.store.useP2P)return;const n=aU(e.ortc,t,e.attributes.userAttributes.preSubSsrcs);this._p2pChannel.connect(n)}),this._gateway.on(Vr.PRE_CONNECT_PC,async e=>{const{candidates:t,fingerprint:n}=e;if(this._joinInfo&&t.length>0&&!this._p2pChannel.isPlanB){var r;await this._p2pChannel.startP2PConnection({turnServer:this._joinInfo.turnServer});const{cert:i,cid:o}=this._joinInfo.apResponse;await this._p2pChannel.connect({iceParameters:{iceUfrag:"".concat(o,"_").concat(i),icePwd:"".concat(o,"_").concat(i)},dtlsParameters:{fingerprints:[{hashFunction:"sha-256",fingerprint:(r=H("FINGERPRINT"))!==null&&r!==void 0?r:n}]},candidates:t,rtpCapabilities:{send:{audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]},recv:{audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]}},setup:"active",cname:"o/i14u9pJrxRKAsu",preallocation:!0})}})}_handleGatewaySignalEvents(){this._gateway.signal.on(pt.ON_USER_ONLINE,this._handleUserOnline),this._gateway.signal.on(pt.ON_USER_OFFLINE,this._handleUserOffline),this._gateway.signal.on(pt.ON_ADD_AUDIO_STREAM,e=>this._handleAddAudioOrVideoStream("audio",e.uid,e.ssrcId,e.cname,e.uint_id,e.ortc)),this._gateway.signal.on(pt.ON_ADD_VIDEO_STREAM,e=>this._handleAddAudioOrVideoStream("video",e.uid,e.ssrcId,e.cname,e.uint_id,e.ortc,e.rtxSsrcId)),this._gateway.signal.on(pt.ON_REMOTE_DATASTREAM_UPDATE,e=>{this._handleUpdateDataChannel(e)}),this._gateway.signal.on(pt.ON_REMOTE_FULL_DATASTREAM_INFO,e=>{this._handleUpdateDataChannel({added:e.datastreams||[],deleted:[]},!0)}),this._gateway.signal.on(pt.ON_REMOVE_STREAM,this._handleRemoveStream),this._gateway.signal.on(pt.ON_P2P_LOST,this._handleP2PLost),this._gateway.signal.on(pt.MUTE_AUDIO,e=>this._handleMuteStream(e.uid,De.AUDIO,!0)),this._gateway.signal.on(pt.UNMUTE_AUDIO,e=>this._handleMuteStream(e.uid,De.AUDIO,!1)),this._gateway.signal.on(pt.MUTE_VIDEO,e=>this._handleMuteStream(e.uid,De.VIDEO,!0)),this._gateway.signal.on(pt.UNMUTE_VIDEO,e=>this._handleMuteStream(e.uid,De.VIDEO,!1)),this._gateway.signal.on(pt.RECEIVE_METADATA,e=>{const t=od(e.metadata);this.safeEmit(vt.RECEIVE_METADATA,e.uid,t)}),this._gateway.signal.on(pt.ON_DATA_STREAM,async e=>{var t;if(!e)return;let n=od(e.payload);if(this._encryptDataStream&&this._encryptDataStreamIv&&this._encryptDataStreamKey&&window.crypto.subtle&&Ce(t=["aes-128-gcm2","aes-256-gcm2"]).call(t,this._encryptionMode)){if(e.payload.length<mh)throw new q(k.UNEXPECTED_RESPONSE,"payload length ".concat(e.payload.length," is less than header length ").concat(mh));n=await async function(o,a,s){const c=s.subarray(0,mh),l=c.slice(8,mh),u=(l[0]<<8)+l[1],d=(c[6]<<8)+c[7],h=await window.crypto.subtle.decrypt({name:"AES-GCM",iv:o,tagLength:kM,additionalData:new Uint8Array(DM(u,2))},a,s.subarray(mh));return new Uint8Array(h).subarray(0,d)}(this._encryptDataStreamIv,this._encryptDataStreamKey,n)}let r=0;if(e.ordered||e.syncWithAudio){const i=this._p2pChannel.getStats(),o=this.remoteUsers.find(s=>s.uid===e.uid),a=i==null?void 0:i.audioRecv.find(s=>s.ssrc===(o==null?void 0:o._audioSSRC));r=a==null?void 0:a.jitterBufferMs}r==null&&(r=0),Jfe(ws(ws({},e),{},{payload:n}),r,{id:this._clientId,onStreamMessage:typeof this.onStreamMessage=="function"?this.onStreamMessage.bind(this):void 0,safeEmit:this.safeEmit.bind(this)})}),this._gateway.signal.on(pt.ON_CRYPT_ERROR,()=>{Su(()=>{w.warning("[".concat(this._clientId,"] on crypt error")),this.safeEmit(vt.CRYPT_ERROR)},this._sessionId)}),this._gateway.signal.on(pt.ON_TOKEN_PRIVILEGE_WILL_EXPIRE,this._handleTokenWillExpire),this._gateway.signal.on(pt.ON_TOKEN_PRIVILEGE_DID_EXPIRE,()=>{w.warning("[".concat(this._clientId,"] received message onTokenPrivilegeDidExpire, please get new token and join again")),this._gateway.leave(!0,Xt.TOKEN_EXPIRE),this.safeEmit(vt.ON_TOKEN_PRIVILEGE_DID_EXPIRE),this._reset()}),this._gateway.signal.on(pt.ON_STREAM_FALLBACK_UPDATE,e=>{w.debug("[".concat(this._clientId,"] stream fallback peerId: ").concat(e.stream_id,", attr: ").concat(e.stream_type)),this.safeEmit(vt.STREAM_FALLBACK,e.stream_id,e.stream_type===1?"fallback":"recover")}),this._gateway.signal.on(pt.ON_PUBLISH_STREAM,e=>{this.uid===this._uid&&(this._p2pChannel.reportPublishEvent(!0,null,void 0,!1,JSON.stringify({proxy:e.proxy})),w.info("[".concat(this._clientId,"] on publish stream, ").concat(JSON.stringify(e))))}),this._gateway.signal.on(pt.ENABLE_LOCAL_VIDEO,e=>{this._handleSetStreamLocalEnable("video",e.uid,!0)}),this._gateway.signal.on(pt.DISABLE_LOCAL_VIDEO,e=>{this._handleSetStreamLocalEnable("video",e.uid,!1)}),this._gateway.signal.on(qe.REQUEST_TIMEOUT,(e,t)=>{if(this._joinInfo)switch(e){case Ke.PUBLISH:{if(!t)return;const i=t.ortc;if(i){var n,r;const o=i.some(c=>{let{stream_type:l}=c;return l===Gt.Audio}),a=i.some(c=>{let{stream_type:l}=c;return l!==Gt.Audio}),s=i.some(c=>{let{stream_type:l}=c;return l===Gt.Screen||l===Gt.ScreenLow});t.state==="offer"&&Pe.publish(this._joinInfo.sid,{eventElapse:ni.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:!1,ec:k.TIMEOUT,audio:o,video:a,p2pid:t.p2p_id,publishRequestid:this.store.pubId,screenshare:s,audioName:o?(n=i.find(c=>{let{stream_type:l}=c;return l===Gt.Audio}))===null||n===void 0||(n=n.ssrcs[0])===null||n===void 0?void 0:n.ssrcId.toString():void 0,videoName:a?(r=i.find(c=>{let{stream_type:l}=c;return l!==Gt.Audio}))===null||r===void 0||(r=r.ssrcs[0])===null||r===void 0?void 0:r.ssrcId.toString():void 0})}break}case Ke.SUBSCRIBE:t&&Pe.subscribe(this._joinInfo.sid,{succ:!1,ec:k.TIMEOUT,audio:t.stream_type===De.AUDIO,video:t.stream_type===De.VIDEO,peerid:t.stream_id,subscribeRequestid:t.ssrcId,p2pid:this.store.p2pId,eventElapse:ni.measureFromSubscribeStart(this.store.clientId,t.ssrcId),preSsrc:this._p2pChannel.isPreSubScribe(t.ssrcId)})}}),this._gateway.signal.on(pt.ON_P2P_OK,e=>{this.uid,this._uid}),this._gateway.signal.on(pt.ON_PUBLISHED_USER_LIST,e=>{if(e==null||!e.users)return;H("BLOCK_LOCAL_CLIENT")&&(e.users=e.users.filter(r=>!Mu(r.string_id||r.stream_id,this.channelName)));const t=[],n=[];for(const r of e.users){let i=this._users.find(u=>u._uintid===r.stream_id);i?i._trust_in_room_=!0:(i=new Hl(r.string_id||r.stream_id,r.stream_id),this._users.push(i),this.getListeners(vt.PUBLISHED_USER_LIST).length===0&&(w.debug("[".concat(this._clientId,"] user online"),r.stream_id),this.safeEmit(vt.USER_JOINED,i)));const o=_r.Audio&r.stream_type,a=(_r.Video|_r.LwoVideo)&r.stream_type,s=(65280&r.stream_type)!=0,c=o&&i.hasAudio,l=a&&i.hasVideo;a&&(i._trust_video_stream_added_state_=!0,i._video_added_=!0,i._videoSSRC=r.video_ssrc,i._rtxSsrcId=r.video_rtx),o&&(i._trust_audio_stream_added_state_=!0,i._audio_added_=!0,i._audioSSRC=r.audio_ssrc),o&&!c&&this.getListeners(vt.PUBLISHED_USER_LIST).length===0&&(w.info("[".concat(this._clientId,"] remote user ").concat(i.uid," published audio")),this.safeEmit(vt.USER_PUBLISHED,i,"audio")),a&&!l&&this.getListeners(vt.PUBLISHED_USER_LIST).length===0&&(w.info("[".concat(this._clientId,"] remote user ").concat(i.uid," published video")),this.safeEmit(vt.USER_PUBLISHED,i,"video")),(o&&!c||a&&!l||s)&&t.push(i),a&&this._p2pChannel.hasPendingRemoteMedia(i,"video")&&n.push({user:i,mediaType:"video"}),o&&this._p2pChannel.hasPendingRemoteMedia(i,"audio")&&n.push({user:i,mediaType:"audio"})}n.length>0&&(w.debug("[".concat(this._clientId,"] RE massSubscribe after reconnect ").concat(n.map(r=>"user: ".concat(r.user.uid,", mediaType: ").concat(r.mediaType)).join("; ")," ")),this.massSubscribe(n).catch(r=>{w.error("[".concat(this._clientId,"] mass resubscribe error"),r.toString())})),this.getListeners(vt.PUBLISHED_USER_LIST).length>0?H("ENABLE_DATASTREAM_2")?this._pendingPublishedUsers=t:(w.info("[".concat(this._clientId,"] client emit user-list event, users: ").concat(t.map(r=>r.uid).join(", "))),this.safeEmit(vt.PUBLISHED_USER_LIST,t)):w.info("[".concat(this._clientId,"] client not emit user-list event case there is no user-list listener, users: ").concat(t.map(r=>r.uid).join(", ")))}),this._gateway.signal.on(pt.ON_RTP_CAPABILITY_CHANGE,e=>{const{video_codec:t}=e;this._p2pChannel instanceof Kv&&this._p2pChannel.updateRemoteRTPCapabilities(t.map(n=>n.toLowerCase()).filter(n=>{var r;return Ce(r=Object.keys($y)).call(r,n)}))})}_handleP2PEvents(){this._gateway.signal.on(pt.ON_USER_OFFLINE,()=>{this._p2pChannel.disconnectForReconnect()}),this._gateway.signal.on(Hn.PUBLISH,(e,t,n)=>{const{uid:r}=e;e.forEach(i=>{const{kind:o,ssrcs:a,mid:s,isMuted:c}=i;this._handleP2PAddAudioOrVideoStream(o,r,a[0].ssrcId,s);const l=this._users.find(u=>u.uid===r);return l&&this._p2pChannel instanceof To?this._p2pChannel.mockSubscribe(l,o,a[0].ssrcId,s).then(()=>{t()}).catch(n):t(),this._handleMuteStream(r,o,!!c)})}),this._gateway.signal.on(Hn.CALL,async(e,t,n)=>{if(this._p2pChannel instanceof To)try{var r;t(await this._p2pChannel.startP2P({turnServer:(r=this._joinInfo)===null||r===void 0?void 0:r.turnServer},e))}catch(i){n(i)}}),this._gateway.signal.on(qe.P2P_CONNECTION,async e=>{this._p2pChannel instanceof To&&await this._p2pChannel.p2pConnect(e)}),this._gateway.signal.on(Hn.UNPUBLISH,async(e,t,n)=>{if(this._p2pChannel instanceof To){const{unpubMsg:r,uid:i}=e,o=this._users.find(a=>a.uid===i);if(!o)return w.warning("[".concat(this._clientId,"] can not find remote user, ignore mute event, uid: ").concat(i)),void t();try{r.forEach(async a=>{let{stream_type:s}=a;const c=s===Gt.Audio?De.AUDIO:De.VIDEO;await this._p2pChannel.unsubscribe(o,c),this._handleMuteStream(i,c,!0)}),t()}catch(a){n(a)}}}),this._gateway.signal.on(Hn.CONTROL,async(e,t)=>{const{action:n}=e;switch(n){case Yl.MUTE_LOCAL_VIDEO:this._handleMuteStream(t,De.VIDEO,!0);break;case Yl.MUTE_LOCAL_AUDIO:this._handleMuteStream(t,De.AUDIO,!0);break;case Yl.UNMUTE_LOCAL_VIDEO:this._handleP2PAddAudioOrVideoStream("video",t),this._handleMuteStream(t,De.VIDEO,!1);break;case Yl.UNMUTE_LOCAL_AUDIO:this._handleP2PAddAudioOrVideoStream("audio",t),this._handleMuteStream(t,De.AUDIO,!1)}}),this._gateway.signal.on(Hn.RESTART_ICE,async(e,t,n)=>{if(this._p2pChannel instanceof To)try{const{direction:r,iceParameter:i}=e;r!==Ni.SEND_ONLY||i?t(await this._p2pChannel.restartICE(r,i)):(this._p2pChannel.handleDisconnect(r),t())}catch(r){n(r)}}),this._gateway.signal.on(Hn.CANDIDATE,e=>{if(this._p2pChannel instanceof To){const{candidate:t,direction:n}=e;this._p2pChannel.addRemoteCandidate(t,n)}}),this._p2pChannel.on(He.RequestP2PRestartICE,async(e,t,n)=>{try{const{direction:r}=e;t(await this._gateway.sendExtensionMessage(Hn.RESTART_ICE,e,r===Ni.SEND_ONLY))}catch(r){n(r)}}),this._p2pChannel.on(He.LocalCandidate,e=>{this._gateway.sendExtensionMessage(Hn.CANDIDATE,JSON.stringify(e),!0)}),this._p2pChannel.on(He.RequestP2PMuteLocal,async(e,t,n)=>{try{await this._gateway.sendExtensionMessage(Hn.CONTROL,e,!0),t()}catch(r){n(r)}}),this._p2pChannel.on(He.RequestP2PUnmuteRemote,async(e,t,n)=>{if(this._joinInfo)try{await this._gateway.unmuteRemote(e,this._joinInfo.stringUid||this._joinInfo.uid),t()}catch(r){r.code===k.DISCONNECT_P2P?t():n(r)}else t()}),this._p2pChannel.on(He.RequestP2PMuteRemote,async(e,t,n)=>{if(this._joinInfo)try{await this._gateway.muteRemote(e,this._joinInfo.stringUid||this._joinInfo.uid),t()}catch(r){r.code===k.DISCONNECT_P2P?t():n(r)}else t()}),this._p2pChannel.on(He.StateChange,(e,t)=>{t===Wt.Connected&&this._p2pChannel.republish()})}_handleP2PChannelEvents(){this._p2pChannel.on(He.RequestMuteLocal,async(e,t,n)=>{if(this._joinInfo)try{await this._gateway.muteLocal(e,this._joinInfo.stringUid||this._joinInfo.uid),t()}catch(r){r.code===k.DISCONNECT_P2P?t():n(r)}else t()}),this._p2pChannel.on(He.RequestUnmuteLocal,async(e,t,n)=>{if(this._joinInfo)try{await this._gateway.unmuteLocal(e,this._joinInfo.stringUid||this._joinInfo.uid),t()}catch(r){r.code===k.DISCONNECT_P2P?t():n(r)}else t()}),this._p2pChannel.on(He.RequestRePublish,(e,t,n)=>{this.publish(e,!1).then(t).catch(n)}),this._p2pChannel.on(He.RequestRePublishDataChannel,(e,t,n)=>{_e.all(e.map(async r=>{const i=await this._p2pChannel.publishDataChannel([r]);try{i.forEach(o=>{this._uid&&this._gateway.publishDataChannel(this._uid,o,!0)})}catch(o){if(o.code!==k.DISCONNECT_P2P)throw o}})).then(t).catch(n)}),this._p2pChannel.on(He.RequestReSubscribe,async(e,t,n)=>{try{for(const{user:r,kind:i}of e)i===De.VIDEO?await this.subscribe(r,"video"):await this.subscribe(r,"audio");t()}catch(r){n(r)}}),this._p2pChannel.on(He.RequestUpload,(e,t)=>{this._gateway.upload(e,t)}),this._p2pChannel.on(He.RequestUploadStats,e=>{this._gateway.uploadWRTCStats(e)}),this._p2pChannel.on(He.MediaReconnectStart,e=>{this.safeEmit(vt.MEDIA_RECONNECT_START,e)}),this._p2pChannel.on(He.MediaReconnectEnd,e=>{this.safeEmit(vt.MEDIA_RECONNECT_END,e)}),this._p2pChannel.on(He.NeedSignalRTT,e=>{e(this._gateway.getSignalRTT())}),this._p2pChannel.on(He.RequestRestartICE,async e=>{if(this._p2pChannel instanceof To)return;const t=await this._p2pChannel.restartICE(e),n=await t.next();if(n.done)return;const r=n.value;let i;try{i=await this._gateway.restartICE({iceParameters:r})}catch(a){return void t.throw(a)}const{iceParameters:o}=function(a){const s=a.iceParameters;return{iceParameters:{iceUfrag:s.iceUfrag,icePwd:s.icePwd}}}(i);await t.next({remoteIceParameters:o})}),this._p2pChannel.on(He.RequestReconnect,async()=>{this._gateway.reconnect()}),this._p2pChannel.on(He.RequestReconnectPC,async()=>{var e;const{iceParameters:t,dtlsParameters:n,rtpCapabilities:r}=await this._p2pChannel.startP2PConnection({turnServer:(e=this._joinInfo)===null||e===void 0?void 0:e.turnServer}),{gatewayEstablishParams:i,gatewayAddress:o}=await this._gateway.reconnectPC({iceParameters:t,dtlsParameters:n,rtpCapabilities:r}),a=aU(i,o);await this._p2pChannel.connect(a),await this._p2pChannel.republish(),await this._p2pChannel.reSubscribe()}),this._p2pChannel.on(He.RequestUnpublishForReconnectPC,async(e,t,n)=>{this._joinInfo&&this._uid!==void 0?(await this._gateway.unpublish(e,this._uid),t()):n()}),this._p2pChannel.on(He.P2PLost,()=>{this.safeEmit(vt.P2P_LOST,this.store.uid)}),this._p2pChannel.on(He.UpdateVideoEncoder,e=>{e._encoderConfig&&this._gateway.setVideoProfile(e._encoderConfig)}),this._p2pChannel.on(He.ConnectionTypeChange,e=>{this.safeEmit(vt.IS_USING_CLOUD_PROXY,e)}),this._p2pChannel.on(He.RequestLowStreamParameter,e=>{e(this._lowStreamParameter||{width:160,height:120,framerate:15,bitrate:50})}),this._p2pChannel.on(He.QueryClientConnectionState,e=>{e(this.connectionState)})}getKeyMetrics(){return this.store.keyMetrics}async enableContentInspect(e){if(!this._joinInfo||this.connectionState!=="CONNECTED")throw new q(k.INVALID_OPERATION,"[".concat(this._clientId,"] can not create content inspect, please join channel first"));if(this._inspect)throw new q(k.INVALID_OPERATION,"[".concat(this._clientId,"] Inspect content service already in connecting/connected state"));try{const n=(t={config:e},wm("ContentInspect").create(t));this._inspect=n,this.handleVideoInspectEvents(n);const{appId:r,cname:i,sid:o,token:a,uid:s,cid:c,vid:l}=this._joinInfo;await n.init({appId:r,areaCode:"",cname:i,sid:o,token:a,uid:s,cid:c,vid:l?Number(l):0},ar)}catch(n){throw Array.isArray(n)?n[0]:n}var t}handleVideoInspectEvents(e){e.on(Tr.CONNECTION_STATE_CHANGE,(t,n)=>{if(this.safeEmit(vt.CONTENT_INSPECT_CONNECTION_STATE_CHANGE,t,n),n===Wa.CONNECTED){if(this.connectionState!=="CONNECTED")return void this.safeEmit(vt.CONTENT_INSPECT_ERROR,new q(k.OPERATION_ABORTED,"Content inspect was cancelled because it left the channel"));e.inspectImage()}}),e.on(Tr.INSPECT_RESULT,(t,n)=>{var r;if((n==null?void 0:n.code)===k.INVALID_OPERATION&&this.connectionState==="DISCONNECTED")return w.debug("Stop inspect content because that has left channel"),this==null||(r=this._inspect)===null||r===void 0||r.close(),void(this._inspect=void 0);this.safeEmit(vt.CONTENT_INSPECT_RESULT,t,n)}),e.on(Tr.CLIENT_LOCAL_VIDEO_TRACK,t=>{t(this.localTracks.filter(n=>n.trackMediaType==="video")[0])})}async disableContentInspect(){if(!this._inspect)throw new q(k.INVALID_OPERATION,"[".concat(this._clientId,"] inspectVideoContent not started"));try{this._inspect.close(),this._inspect=void 0}catch(e){throw Array.isArray(e)?e[0]:e}}async setImageModeration(e,t){if(nl(e,"enabled"),e){if(!t)throw new q(k.INVALID_PARAMS,"config is required");if(Cz(t),!this._joinInfo)throw new q(k.INVALID_OPERATION,"can not create image moderation, please join channel first");try{if(this._moderation)this._moderation.updateConfig(t);else{const r=(n={config:t},wm("ImageModeration").create(n));this._moderation=r,this.handleImageModerationEvents(r);const{appId:i,cname:o,sid:a,token:s,uid:c,cid:l,vid:u}=this._joinInfo;await r.init({appId:i,areaCode:"",cname:o,sid:a,token:s,uid:c,cid:l,vid:u?Number(u):0},ar)}}catch(r){throw Array.isArray(r)?r[0]:r}}else{var n;if(!this._moderation)throw new q(k.INVALID_OPERATION,"[".concat(this._clientId,"] image moderation not started"));try{this._moderation.close(),this._moderation.removeAllListeners(),this._moderation=void 0}catch(r){throw Array.isArray(r)?r[0]:r}}}handleImageModerationEvents(e){e.on(Ts.CONNECTION_STATE_CHANGE,(t,n)=>{if(this.safeEmit(vt.IMAGE_MODERATION_CONNECTION_STATE_CHANGE,t,n),t===ca.CONNECTED){if(this.connectionState!=="CONNECTED")throw this.setImageModeration(!1),new q(k.OPERATION_ABORTED,"Image moderation was cancelled because it left the channel");e.inspectImage()}}),e.on(Ts.CLIENT_LOCAL_VIDEO_TRACK,t=>{t(this.localTracks.filter(n=>n.trackMediaType==="video")[0])})}setP2PTransport(e){if(function(t){pr(t,"transport",["default","auto","relay","sd-rtn"])}(e),this.mode!=="p2p")throw new q(k.INVALID_OPERATION,"only p2p mode can set p2pTransport");this.store.p2pTransport=e,w.info("[".concat(this._clientId,"] set client p2pTransport to ").concat(e))}getJoinChannelServiceRecords(){return w.debug("getJoinChannelServiceRecords"),this.store.joinChannelServiceRecords}async setPublishAudioFilterEnabled(e){nl(e,"enabled"),Qt("ENABLE_PUBLISH_AUDIO_FILTER",e),this._joinInfo&&await this._gateway.setPublishAudioFilterEnabled(e)}_handleResetAddStream(e,t){switch(t){case"audio":e._audio_added_=!1,e._trust_audio_stream_added_state_=!0;break;case"video":e._video_added_=!1,e._trust_video_stream_added_state_=!0}}},Ae(ye.prototype,"leave",[S3],Object.getOwnPropertyDescriptor(ye.prototype,"leave"),ye.prototype),Ae(ye.prototype,"publish",[y3],Object.getOwnPropertyDescriptor(ye.prototype,"publish"),ye.prototype),Ae(ye.prototype,"unpublish",[C3],Object.getOwnPropertyDescriptor(ye.prototype,"unpublish"),ye.prototype),Ae(ye.prototype,"subscribe",[b3],Object.getOwnPropertyDescriptor(ye.prototype,"subscribe"),ye.prototype),Ae(ye.prototype,"presubscribe",[T3],Object.getOwnPropertyDescriptor(ye.prototype,"presubscribe"),ye.prototype),Ae(ye.prototype,"massSubscribe",[R3],Object.getOwnPropertyDescriptor(ye.prototype,"massSubscribe"),ye.prototype),Ae(ye.prototype,"unsubscribe",[w3],Object.getOwnPropertyDescriptor(ye.prototype,"unsubscribe"),ye.prototype),Ae(ye.prototype,"massUnsubscribe",[I3],Object.getOwnPropertyDescriptor(ye.prototype,"massUnsubscribe"),ye.prototype),Ae(ye.prototype,"setLowStreamParameter",[A3],Object.getOwnPropertyDescriptor(ye.prototype,"setLowStreamParameter"),ye.prototype),Ae(ye.prototype,"enableDualStream",[O3],Object.getOwnPropertyDescriptor(ye.prototype,"enableDualStream"),ye.prototype),Ae(ye.prototype,"disableDualStream",[x3],Object.getOwnPropertyDescriptor(ye.prototype,"disableDualStream"),ye.prototype),Ae(ye.prototype,"setClientRole",[N3],Object.getOwnPropertyDescriptor(ye.prototype,"setClientRole"),ye.prototype),Ae(ye.prototype,"setProxyServer",[P3],Object.getOwnPropertyDescriptor(ye.prototype,"setProxyServer"),ye.prototype),Ae(ye.prototype,"setTurnServer",[D3],Object.getOwnPropertyDescriptor(ye.prototype,"setTurnServer"),ye.prototype),Ae(ye.prototype,"setLicense",[L3],Object.getOwnPropertyDescriptor(ye.prototype,"setLicense"),ye.prototype),Ae(ye.prototype,"startProxyServer",[k3],Object.getOwnPropertyDescriptor(ye.prototype,"startProxyServer"),ye.prototype),Ae(ye.prototype,"stopProxyServer",[M3],Object.getOwnPropertyDescriptor(ye.prototype,"stopProxyServer"),ye.prototype),Ae(ye.prototype,"setLocalAccessPointsV2",[F3],Object.getOwnPropertyDescriptor(ye.prototype,"setLocalAccessPointsV2"),ye.prototype),Ae(ye.prototype,"setLocalAccessPoints",[U3],Object.getOwnPropertyDescriptor(ye.prototype,"setLocalAccessPoints"),ye.prototype),Ae(ye.prototype,"setRemoteDefaultVideoStreamType",[B3],Object.getOwnPropertyDescriptor(ye.prototype,"setRemoteDefaultVideoStreamType"),ye.prototype),Ae(ye.prototype,"setRemoteVideoStreamType",[$3],Object.getOwnPropertyDescriptor(ye.prototype,"setRemoteVideoStreamType"),ye.prototype),Ae(ye.prototype,"setStreamFallbackOption",[V3],Object.getOwnPropertyDescriptor(ye.prototype,"setStreamFallbackOption"),ye.prototype),Ae(ye.prototype,"setEncryptionConfig",[j3],Object.getOwnPropertyDescriptor(ye.prototype,"setEncryptionConfig"),ye.prototype),Ae(ye.prototype,"renewToken",[H3],Object.getOwnPropertyDescriptor(ye.prototype,"renewToken"),ye.prototype),Ae(ye.prototype,"enableAudioVolumeIndicator",[z3],Object.getOwnPropertyDescriptor(ye.prototype,"enableAudioVolumeIndicator"),ye.prototype),Ae(ye.prototype,"startLiveStreaming",[W3],Object.getOwnPropertyDescriptor(ye.prototype,"startLiveStreaming"),ye.prototype),Ae(ye.prototype,"setLiveTranscoding",[G3],Object.getOwnPropertyDescriptor(ye.prototype,"setLiveTranscoding"),ye.prototype),Ae(ye.prototype,"stopLiveStreaming",[K3],Object.getOwnPropertyDescriptor(ye.prototype,"stopLiveStreaming"),ye.prototype),Ae(ye.prototype,"startChannelMediaRelay",[q3],Object.getOwnPropertyDescriptor(ye.prototype,"startChannelMediaRelay"),ye.prototype),Ae(ye.prototype,"updateChannelMediaRelay",[Y3],Object.getOwnPropertyDescriptor(ye.prototype,"updateChannelMediaRelay"),ye.prototype),Ae(ye.prototype,"stopChannelMediaRelay",[X3],Object.getOwnPropertyDescriptor(ye.prototype,"stopChannelMediaRelay"),ye.prototype),Ae(ye.prototype,"sendCustomReportMessage",[J3],Object.getOwnPropertyDescriptor(ye.prototype,"sendCustomReportMessage"),ye.prototype),Ae(ye.prototype,"pickSVCLayer",[Q3],Object.getOwnPropertyDescriptor(ye.prototype,"pickSVCLayer"),ye.prototype),Ae(ye.prototype,"setRTMConfig",[Z3],Object.getOwnPropertyDescriptor(ye.prototype,"setRTMConfig"),ye.prototype),Ae(ye.prototype,"enableContentInspect",[eB],Object.getOwnPropertyDescriptor(ye.prototype,"enableContentInspect"),ye.prototype),Ae(ye.prototype,"disableContentInspect",[tB],Object.getOwnPropertyDescriptor(ye.prototype,"disableContentInspect"),ye.prototype),Ae(ye.prototype,"setImageModeration",[nB],Object.getOwnPropertyDescriptor(ye.prototype,"setImageModeration"),ye.prototype),Ae(ye.prototype,"setP2PTransport",[rB],Object.getOwnPropertyDescriptor(ye.prototype,"setP2PTransport"),ye.prototype),Ae(ye.prototype,"getJoinChannelServiceRecords",[iB],Object.getOwnPropertyDescriptor(ye.prototype,"getJoinChannelServiceRecords"),ye.prototype),Ae(ye.prototype,"setPublishAudioFilterEnabled",[oB],Object.getOwnPropertyDescriptor(ye.prototype,"setPublishAudioFilterEnabled"),ye.prototype),ye),bz=class lA{constructor(t,n){P(this,"id",0),P(this,"element",void 0),P(this,"peerPair",void 0),P(this,"context",void 0),P(this,"audioPlayerElement",void 0),P(this,"audioTrack",void 0),lA.count+=1,this.id=lA.count,this.element=t,this.context=n}initPeers(){this.peerPair=[new RTCPeerConnection,new RTCPeerConnection],this.peerPair[1].ontrack=t=>{const n=document.createElement("audio");n.srcObject=new MediaStream([t.track]),n.play(),this.audioPlayerElement=n}}async switchSdp(){if(!this.peerPair)return;const t=async(r,i)=>{const o=i==="offer"?await r.createOffer():await r.createAnswer();return await r.setLocalDescription(o),r.iceGatheringState==="complete"?r.localDescription:new _e(a=>{r.onicegatheringstatechange=()=>{r.iceGatheringState==="complete"&&a(r.localDescription)}})},n=async(r,i)=>await r.setRemoteDescription(i);try{const r=await t(this.peerPair[0],"offer");await n(this.peerPair[1],r);const i=await t(this.peerPair[1],"answer");await n(this.peerPair[0],i)}catch(r){throw new q(k.LOCAL_AEC_ERROR,r.toString()).print()}}async getTracksFromMediaElement(t){if(this.audioTrack)return this.audioTrack;let n;try{t instanceof HTMLVideoElement&&(t.captureStream?t.captureStream():t.mozCaptureStream()),n=this.context.createMediaStreamDestination(),this.context.createMediaElementSource(t).connect(n)}catch(i){throw new q(k.LOCAL_AEC_ERROR,i.toString()).print()}if(!n)throw new q(k.LOCAL_AEC_ERROR,"no dest node when local aec").print();const r=n.stream.getAudioTracks()[0];return this.audioTrack=r,r}getElement(){return this.element}async startEchoCancellation(){this.context.resume(),this.peerPair&&this.close(),this.initPeers();const t=this.element,n=await this.getTracksFromMediaElement(t);this.peerPair&&this.peerPair[0].addTrack(n),await this.switchSdp()}close(){w.debug("close echo cancellation unit, id is",this.id),this.audioPlayerElement&&this.audioPlayerElement.pause(),this.peerPair&&this.peerPair.forEach(t=>{t.close()}),this.peerPair=void 0,this.audioPlayerElement=void 0}};var sB,Yv;P(bz,"count",0);const ppe=window.AudioContext||window.webkitAudioContext,mpe=new(sB=je({report:Pe}),Ae((Yv=class{constructor(){P(this,"units",[]),P(this,"context",void 0)}processExternalMediaAEC(e){if(!this._doesEnvironmentNeedAEC())return w.debug("the system does not need to process local aec"),-1;this.context||(this.context=new ppe);let t=this.units.find(n=>n&&n.getElement()===e);return t||(t=new bz(e,this.context),this.units.push(t)),t.startEchoCancellation(),w.debug("start processing local audio echo cancellation, id is",t.id),t.id}_doesEnvironmentNeedAEC(){return Tt().name!==Kt.SAFARI}}).prototype,"processExternalMediaAEC",[sB],Object.getOwnPropertyDescriptor(Yv.prototype,"processExternalMediaAEC"),Yv.prototype),Yv);function cB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function lB(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cB(Object(n),!0).forEach(function(r){P(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}const DT=window||document;function Tz(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!DT)return;const n=mn._cspEventHandlerPointer;if(n&&t)return void console.error(n,t);const r=i=>{if(!(i&&i.blockedURI&&(mn.onSecurityPolicyViolation||mn.getListeners(fc.SECURITY_POLICY_VIOLATION).length>0)))return;const o=i.blockedURI;H("CSP_DETECTED_HOSTNAME_LIST").some(a=>Ce(o).call(o,a))&&(mn.onSecurityPolicyViolation&&typeof mn.onSecurityPolicyViolation=="function"&&mn.onSecurityPolicyViolation(i),mn.getListeners(fc.SECURITY_POLICY_VIOLATION).length>0&&mn.safeEmit(fc.SECURITY_POLICY_VIOLATION,i))};n&&DT.removeEventListener("securitypolicyviolation",n),(t||e&&typeof e=="function"||mn.getListeners(fc.SECURITY_POLICY_VIOLATION).length>0)&&DT.addEventListener("securitypolicyviolation",r),mn._cspEventHandlerPointer=r}var gpe=Fi,vpe=I7,uB=RegExp.prototype,Epe=function(e){return e===uB||gpe(uB,e)?vpe(e):e.flags},Ei=Kn(Epe);function gp(e){let t=e.length;for(;--t>=0;)e[t]=0}const xN=256,Rz=286,Hm=30,zm=15,uA=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),v_=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),_pe=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),dB=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Qc=new Array(576);gp(Qc);const Wm=new Array(60);gp(Wm);const P0=new Array(512);gp(P0);const D0=new Array(256);gp(D0);const NN=new Array(29);gp(NN);const fS=new Array(Hm);function LT(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}let hB,fB,pB;function kT(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}gp(fS);const wz=e=>e<256?P0[e]:P0[256+(e>>>7)],L0=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},Wo=(e,t,n)=>{e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,L0(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},pc=(e,t,n)=>{Wo(e,n[2*t],n[2*t+1])},Iz=(e,t)=>{let n=0;do n|=1&e,e>>>=1,n<<=1;while(--t>0);return n>>>1},Az=(e,t,n)=>{const r=new Array(16);let i,o,a=0;for(i=1;i<=zm;i++)a=a+n[i-1]<<1,r[i]=a;for(o=0;o<=t;o++){let s=e[2*o+1];s!==0&&(e[2*o]=Iz(r[s]++,s))}},Oz=e=>{let t;for(t=0;t<Rz;t++)e.dyn_ltree[2*t]=0;for(t=0;t<Hm;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},xz=e=>{e.bi_valid>8?L0(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},mB=(e,t,n,r)=>{const i=2*t,o=2*n;return e[i]<e[o]||e[i]===e[o]&&r[t]<=r[n]},MT=(e,t,n)=>{const r=e.heap[n];let i=n<<1;for(;i<=e.heap_len&&(i<e.heap_len&&mB(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!mB(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r},gB=(e,t,n)=>{let r,i,o,a,s=0;if(e.sym_next!==0)do r=255&e.pending_buf[e.sym_buf+s++],r+=(255&e.pending_buf[e.sym_buf+s++])<<8,i=e.pending_buf[e.sym_buf+s++],r===0?pc(e,i,t):(o=D0[i],pc(e,o+xN+1,t),a=uA[o],a!==0&&(i-=NN[o],Wo(e,i,a)),r--,o=wz(r),pc(e,o,n),a=v_[o],a!==0&&(r-=fS[o],Wo(e,r,a)));while(s<e.sym_next);pc(e,256,t)},FT=(e,t)=>{const n=t.dyn_tree,r=t.stat_desc.static_tree,i=t.stat_desc.has_stree,o=t.stat_desc.elems;let a,s,c,l=-1;for(e.heap_len=0,e.heap_max=573,a=0;a<o;a++)n[2*a]!==0?(e.heap[++e.heap_len]=l=a,e.depth[a]=0):n[2*a+1]=0;for(;e.heap_len<2;)c=e.heap[++e.heap_len]=l<2?++l:0,n[2*c]=1,e.depth[c]=0,e.opt_len--,i&&(e.static_len-=r[2*c+1]);for(t.max_code=l,a=e.heap_len>>1;a>=1;a--)MT(e,n,a);c=o;do a=e.heap[1],e.heap[1]=e.heap[e.heap_len--],MT(e,n,1),s=e.heap[1],e.heap[--e.heap_max]=a,e.heap[--e.heap_max]=s,n[2*c]=n[2*a]+n[2*s],e.depth[c]=(e.depth[a]>=e.depth[s]?e.depth[a]:e.depth[s])+1,n[2*a+1]=n[2*s+1]=c,e.heap[1]=c++,MT(e,n,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((u,d)=>{const h=d.dyn_tree,f=d.max_code,g=d.stat_desc.static_tree,p=d.stat_desc.has_stree,m=d.stat_desc.extra_bits,_=d.stat_desc.extra_base,E=d.stat_desc.max_length;let S,C,b,T,R,A,O=0;for(T=0;T<=zm;T++)u.bl_count[T]=0;for(h[2*u.heap[u.heap_max]+1]=0,S=u.heap_max+1;S<573;S++)C=u.heap[S],T=h[2*h[2*C+1]+1]+1,T>E&&(T=E,O++),h[2*C+1]=T,C>f||(u.bl_count[T]++,R=0,C>=_&&(R=m[C-_]),A=h[2*C],u.opt_len+=A*(T+R),p&&(u.static_len+=A*(g[2*C+1]+R)));if(O!==0){do{for(T=E-1;u.bl_count[T]===0;)T--;u.bl_count[T]--,u.bl_count[T+1]+=2,u.bl_count[E]--,O-=2}while(O>0);for(T=E;T!==0;T--)for(C=u.bl_count[T];C!==0;)b=u.heap[--S],b>f||(h[2*b+1]!==T&&(u.opt_len+=(T-h[2*b+1])*h[2*b],h[2*b+1]=T),C--)}})(e,t),Az(n,l,e.bl_count)},vB=(e,t,n)=>{let r,i,o=-1,a=t[1],s=0,c=7,l=4;for(a===0&&(c=138,l=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)i=a,a=t[2*(r+1)+1],++s<c&&i===a||(s<l?e.bl_tree[2*i]+=s:i!==0?(i!==o&&e.bl_tree[2*i]++,e.bl_tree[32]++):s<=10?e.bl_tree[34]++:e.bl_tree[36]++,s=0,o=i,a===0?(c=138,l=3):i===a?(c=6,l=3):(c=7,l=4))},EB=(e,t,n)=>{let r,i,o=-1,a=t[1],s=0,c=7,l=4;for(a===0&&(c=138,l=3),r=0;r<=n;r++)if(i=a,a=t[2*(r+1)+1],!(++s<c&&i===a)){if(s<l)do pc(e,i,e.bl_tree);while(--s!=0);else i!==0?(i!==o&&(pc(e,i,e.bl_tree),s--),pc(e,16,e.bl_tree),Wo(e,s-3,2)):s<=10?(pc(e,17,e.bl_tree),Wo(e,s-3,3)):(pc(e,18,e.bl_tree),Wo(e,s-11,7));s=0,o=i,a===0?(c=138,l=3):i===a?(c=6,l=3):(c=7,l=4)}};let _B=!1;const Nz=(e,t,n,r)=>{Wo(e,0+(r?1:0),3),xz(e),L0(e,n),L0(e,~n),n&&e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n};var Spe=e=>{_B||((()=>{let t,n,r,i,o;const a=new Array(16);for(r=0,i=0;i<28;i++)for(NN[i]=r,t=0;t<1<<uA[i];t++)D0[r++]=i;for(D0[r-1]=i,o=0,i=0;i<16;i++)for(fS[i]=o,t=0;t<1<<v_[i];t++)P0[o++]=i;for(o>>=7;i<Hm;i++)for(fS[i]=o<<7,t=0;t<1<<v_[i]-7;t++)P0[256+o++]=i;for(n=0;n<=zm;n++)a[n]=0;for(t=0;t<=143;)Qc[2*t+1]=8,t++,a[8]++;for(;t<=255;)Qc[2*t+1]=9,t++,a[9]++;for(;t<=279;)Qc[2*t+1]=7,t++,a[7]++;for(;t<=287;)Qc[2*t+1]=8,t++,a[8]++;for(Az(Qc,287,a),t=0;t<Hm;t++)Wm[2*t+1]=5,Wm[2*t]=Iz(t,5);hB=new LT(Qc,uA,257,Rz,zm),fB=new LT(Wm,v_,0,Hm,zm),pB=new LT(new Array(0),_pe,0,19,7)})(),_B=!0),e.l_desc=new kT(e.dyn_ltree,hB),e.d_desc=new kT(e.dyn_dtree,fB),e.bl_desc=new kT(e.bl_tree,pB),e.bi_buf=0,e.bi_valid=0,Oz(e)},ype=(e,t,n,r)=>{let i,o,a=0;e.level>0?(e.strm.data_type===2&&(e.strm.data_type=(s=>{let c,l=4093624447;for(c=0;c<=31;c++,l>>>=1)if(1&l&&s.dyn_ltree[2*c]!==0)return 0;if(s.dyn_ltree[18]!==0||s.dyn_ltree[20]!==0||s.dyn_ltree[26]!==0)return 1;for(c=32;c<xN;c++)if(s.dyn_ltree[2*c]!==0)return 1;return 0})(e)),FT(e,e.l_desc),FT(e,e.d_desc),a=(s=>{let c;for(vB(s,s.dyn_ltree,s.l_desc.max_code),vB(s,s.dyn_dtree,s.d_desc.max_code),FT(s,s.bl_desc),c=18;c>=3&&s.bl_tree[2*dB[c]+1]===0;c--);return s.opt_len+=3*(c+1)+5+5+4,c})(e),i=e.opt_len+3+7>>>3,o=e.static_len+3+7>>>3,o<=i&&(i=o)):i=o=n+5,n+4<=i&&t!==-1?Nz(e,t,n,r):e.strategy===4||o===i?(Wo(e,2+(r?1:0),3),gB(e,Qc,Wm)):(Wo(e,4+(r?1:0),3),((s,c,l,u)=>{let d;for(Wo(s,c-257,5),Wo(s,l-1,5),Wo(s,u-4,4),d=0;d<u;d++)Wo(s,s.bl_tree[2*dB[d]+1],3);EB(s,s.dyn_ltree,c-1),EB(s,s.dyn_dtree,l-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),gB(e,e.dyn_ltree,e.dyn_dtree)),Oz(e),r&&xz(e)},Cpe=(e,t,n)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=n,t===0?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(D0[n]+xN+1)]++,e.dyn_dtree[2*wz(t)]++),e.sym_next===e.sym_end),bpe=e=>{Wo(e,2,3),pc(e,256,Qc),(t=>{t.bi_valid===16?(L0(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)})(e)},Tpe={_tr_init:Spe,_tr_stored_block:Nz,_tr_flush_block:ype,_tr_tally:Cpe,_tr_align:bpe},k0=(e,t,n,r)=>{let i=65535&e|0,o=e>>>16&65535|0,a=0;for(;n!==0;){a=n>2e3?2e3:n,n-=a;do i=i+t[r++]|0,o=o+i|0;while(--a);i%=65521,o%=65521}return i|o<<16|0};const Rpe=new Uint32Array((()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t})());var Oi=(e,t,n,r)=>{const i=Rpe,o=r+n;e^=-1;for(let a=r;a<o;a++)e=e>>>8^i[255&(e^t[a])];return-1^e},xd={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},vp={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:wpe,_tr_stored_block:dA,_tr_flush_block:Ipe,_tr_tally:su,_tr_align:Ape}=Tpe,{Z_NO_FLUSH:cu,Z_PARTIAL_FLUSH:Ope,Z_FULL_FLUSH:xpe,Z_FINISH:Za,Z_BLOCK:SB,Z_OK:Ki,Z_STREAM_END:yB,Z_STREAM_ERROR:yc,Z_DATA_ERROR:Npe,Z_BUF_ERROR:UT,Z_DEFAULT_COMPRESSION:Ppe,Z_FILTERED:Dpe,Z_HUFFMAN_ONLY:Xv,Z_RLE:Lpe,Z_FIXED:kpe,Z_DEFAULT_STRATEGY:Mpe,Z_UNKNOWN:Fpe,Z_DEFLATED:Wy}=vp,hA=286,Upe=30,Bpe=19,$pe=2*hA+1,Vpe=15,sd=258,Cc=262,zf=42,cd=113,Am=666,ld=(e,t)=>(e.msg=xd[t],t),CB=e=>2*e-(e>4?9:0),zl=e=>{let t=e.length;for(;--t>=0;)e[t]=0},jpe=e=>{let t,n,r,i=e.w_size;t=e.hash_size,r=t;do n=e.head[--r],e.head[r]=n>=i?n-i:0;while(--t);t=i,r=t;do n=e.prev[--r],e.prev[r]=n>=i?n-i:0;while(--t)};let lu=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask;const da=e=>{const t=e.state;let n=t.pending;n>e.avail_out&&(n=e.avail_out),n!==0&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,t.pending===0&&(t.pending_out=0))},pa=(e,t)=>{Ipe(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,da(e.strm)},$n=(e,t)=>{e.pending_buf[e.pending++]=t},Xp=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},fA=(e,t,n,r)=>{let i=e.avail_in;return i>r&&(i=r),i===0?0:(e.avail_in-=i,t.set(e.input.subarray(e.next_in,e.next_in+i),n),e.state.wrap===1?e.adler=k0(e.adler,t,i,n):e.state.wrap===2&&(e.adler=Oi(e.adler,t,i,n)),e.next_in+=i,e.total_in+=i,i)},Pz=(e,t)=>{let n,r,i=e.max_chain_length,o=e.strstart,a=e.prev_length,s=e.nice_match;const c=e.strstart>e.w_size-Cc?e.strstart-(e.w_size-Cc):0,l=e.window,u=e.w_mask,d=e.prev,h=e.strstart+sd;let f=l[o+a-1],g=l[o+a];e.prev_length>=e.good_match&&(i>>=2),s>e.lookahead&&(s=e.lookahead);do if(n=t,l[n+a]===g&&l[n+a-1]===f&&l[n]===l[o]&&l[++n]===l[o+1]){o+=2,n++;do;while(l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&o<h);if(r=sd-(h-o),o=h-sd,r>a){if(e.match_start=t,a=r,r>=s)break;f=l[o+a-1],g=l[o+a]}}while((t=d[t&u])>c&&--i!=0);return a<=e.lookahead?a:e.lookahead},Wf=e=>{const t=e.w_size;let n,r,i;do{if(r=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-Cc)&&(e.window.set(e.window.subarray(t,t+t-r),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),jpe(e),r+=t),e.strm.avail_in===0)break;if(n=fA(e.strm,e.window,e.strstart+e.lookahead,r),e.lookahead+=n,e.lookahead+e.insert>=3)for(i=e.strstart-e.insert,e.ins_h=e.window[i],e.ins_h=lu(e,e.ins_h,e.window[i+1]);e.insert&&(e.ins_h=lu(e,e.ins_h,e.window[i+3-1]),e.prev[i&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=i,i++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<Cc&&e.strm.avail_in!==0)},Dz=(e,t)=>{let n,r,i,o=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,a=0,s=e.strm.avail_in;do{if(n=65535,i=e.bi_valid+42>>3,e.strm.avail_out<i||(i=e.strm.avail_out-i,r=e.strstart-e.block_start,n>r+e.strm.avail_in&&(n=r+e.strm.avail_in),n>i&&(n=i),n<o&&(n===0&&t!==Za||t===cu||n!==r+e.strm.avail_in)))break;a=t===Za&&n===r+e.strm.avail_in?1:0,dA(e,0,0,a),e.pending_buf[e.pending-4]=n,e.pending_buf[e.pending-3]=n>>8,e.pending_buf[e.pending-2]=~n,e.pending_buf[e.pending-1]=~n>>8,da(e.strm),r&&(r>n&&(r=n),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+r),e.strm.next_out),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r,e.block_start+=r,n-=r),n&&(fA(e.strm,e.strm.output,e.strm.next_out,n),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n)}while(a===0);return s-=e.strm.avail_in,s&&(s>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=s&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-s,e.strm.next_in),e.strstart),e.strstart+=s,e.insert+=s>e.w_size-e.insert?e.w_size-e.insert:s),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),a?4:t!==cu&&t!==Za&&e.strm.avail_in===0&&e.strstart===e.block_start?2:(i=e.window_size-e.strstart,e.strm.avail_in>i&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,i+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),i>e.strm.avail_in&&(i=e.strm.avail_in),i&&(fA(e.strm,e.window,e.strstart,i),e.strstart+=i,e.insert+=i>e.w_size-e.insert?e.w_size-e.insert:i),e.high_water<e.strstart&&(e.high_water=e.strstart),i=e.bi_valid+42>>3,i=e.pending_buf_size-i>65535?65535:e.pending_buf_size-i,o=i>e.w_size?e.w_size:i,r=e.strstart-e.block_start,(r>=o||(r||t===Za)&&t!==cu&&e.strm.avail_in===0&&r<=i)&&(n=r>i?i:r,a=t===Za&&e.strm.avail_in===0&&n===r?1:0,dA(e,e.block_start,n,a),e.block_start+=n,da(e.strm)),a?3:1)},BT=(e,t)=>{let n,r;for(;;){if(e.lookahead<Cc){if(Wf(e),e.lookahead<Cc&&t===cu)return 1;if(e.lookahead===0)break}if(n=0,e.lookahead>=3&&(e.ins_h=lu(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),n!==0&&e.strstart-n<=e.w_size-Cc&&(e.match_length=Pz(e,n)),e.match_length>=3)if(r=su(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do e.strstart++,e.ins_h=lu(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!=0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=lu(e,e.ins_h,e.window[e.strstart+1]);else r=su(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(pa(e,!1),e.strm.avail_out===0))return 1}return e.insert=e.strstart<2?e.strstart:2,t===Za?(pa(e,!0),e.strm.avail_out===0?3:4):e.sym_next&&(pa(e,!1),e.strm.avail_out===0)?1:2},Rh=(e,t)=>{let n,r,i;for(;;){if(e.lookahead<Cc){if(Wf(e),e.lookahead<Cc&&t===cu)return 1;if(e.lookahead===0)break}if(n=0,e.lookahead>=3&&(e.ins_h=lu(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,n!==0&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-Cc&&(e.match_length=Pz(e,n),e.match_length<=5&&(e.strategy===Dpe||e.match_length===3&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-3,r=su(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=i&&(e.ins_h=lu(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!=0);if(e.match_available=0,e.match_length=2,e.strstart++,r&&(pa(e,!1),e.strm.avail_out===0))return 1}else if(e.match_available){if(r=su(e,0,e.window[e.strstart-1]),r&&pa(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=su(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===Za?(pa(e,!0),e.strm.avail_out===0?3:4):e.sym_next&&(pa(e,!1),e.strm.avail_out===0)?1:2};function ac(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}const Om=[new ac(0,0,0,0,Dz),new ac(4,4,8,4,BT),new ac(4,5,16,8,BT),new ac(4,6,32,32,BT),new ac(4,4,16,16,Rh),new ac(8,16,32,32,Rh),new ac(8,16,128,128,Rh),new ac(8,32,128,256,Rh),new ac(32,128,258,1024,Rh),new ac(32,258,258,4096,Rh)];function Hpe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Wy,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(2*$pe),this.dyn_dtree=new Uint16Array(2*(2*Upe+1)),this.bl_tree=new Uint16Array(2*(2*Bpe+1)),zl(this.dyn_ltree),zl(this.dyn_dtree),zl(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(Vpe+1),this.heap=new Uint16Array(2*hA+1),zl(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*hA+1),zl(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const M0=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.status!==zf&&t.status!==57&&t.status!==69&&t.status!==73&&t.status!==91&&t.status!==103&&t.status!==cd&&t.status!==Am?1:0},Lz=e=>{if(M0(e))return ld(e,yc);e.total_in=e.total_out=0,e.data_type=Fpe;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap===2?57:t.wrap?zf:cd,e.adler=t.wrap===2?0:1,t.last_flush=-2,wpe(t),Ki},kz=e=>{const t=Lz(e);return t===Ki&&(n=>{n.window_size=2*n.w_size,zl(n.head),n.max_lazy_match=Om[n.level].max_lazy,n.good_match=Om[n.level].good_length,n.nice_match=Om[n.level].nice_length,n.max_chain_length=Om[n.level].max_chain,n.strstart=0,n.block_start=0,n.lookahead=0,n.insert=0,n.match_length=n.prev_length=2,n.match_available=0,n.ins_h=0})(e.state),t},bB=(e,t,n,r,i,o)=>{if(!e)return yc;let a=1;if(t===Ppe&&(t=6),r<0?(a=0,r=-r):r>15&&(a=2,r-=16),i<1||i>9||n!==Wy||r<8||r>15||t<0||t>9||o<0||o>kpe||r===8&&a!==1)return ld(e,yc);r===8&&(r=9);const s=new Hpe;return e.state=s,s.strm=e,s.status=zf,s.wrap=a,s.gzhead=null,s.w_bits=r,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=i+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+3-1)/3),s.window=new Uint8Array(2*s.w_size),s.head=new Uint16Array(s.hash_size),s.prev=new Uint16Array(s.w_size),s.lit_bufsize=1<<i+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new Uint8Array(s.pending_buf_size),s.sym_buf=s.lit_bufsize,s.sym_end=3*(s.lit_bufsize-1),s.level=t,s.strategy=o,s.method=n,kz(e)};var zpe=(e,t)=>{if(M0(e)||t>SB||t<0)return e?ld(e,yc):yc;const n=e.state;if(!e.output||e.avail_in!==0&&!e.input||n.status===Am&&t!==Za)return ld(e,e.avail_out===0?UT:yc);const r=n.last_flush;if(n.last_flush=t,n.pending!==0){if(da(e),e.avail_out===0)return n.last_flush=-1,Ki}else if(e.avail_in===0&&CB(t)<=CB(r)&&t!==Za)return ld(e,UT);if(n.status===Am&&e.avail_in!==0)return ld(e,UT);if(n.status===zf&&n.wrap===0&&(n.status=cd),n.status===zf){let i=Wy+(n.w_bits-8<<4)<<8,o=-1;if(o=n.strategy>=Xv||n.level<2?0:n.level<6?1:n.level===6?2:3,i|=o<<6,n.strstart!==0&&(i|=32),i+=31-i%31,Xp(n,i),n.strstart!==0&&(Xp(n,e.adler>>>16),Xp(n,65535&e.adler)),e.adler=1,n.status=cd,da(e),n.pending!==0)return n.last_flush=-1,Ki}if(n.status===57){if(e.adler=0,$n(n,31),$n(n,139),$n(n,8),n.gzhead)$n(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),$n(n,255&n.gzhead.time),$n(n,n.gzhead.time>>8&255),$n(n,n.gzhead.time>>16&255),$n(n,n.gzhead.time>>24&255),$n(n,n.level===9?2:n.strategy>=Xv||n.level<2?4:0),$n(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&($n(n,255&n.gzhead.extra.length),$n(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=Oi(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69;else if($n(n,0),$n(n,0),$n(n,0),$n(n,0),$n(n,0),$n(n,n.level===9?2:n.strategy>=Xv||n.level<2?4:0),$n(n,3),n.status=cd,da(e),n.pending!==0)return n.last_flush=-1,Ki}if(n.status===69){if(n.gzhead.extra){let i=n.pending,o=(65535&n.gzhead.extra.length)-n.gzindex;for(;n.pending+o>n.pending_buf_size;){let s=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+s),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>i&&(e.adler=Oi(e.adler,n.pending_buf,n.pending-i,i)),n.gzindex+=s,da(e),n.pending!==0)return n.last_flush=-1,Ki;i=0,o-=s}let a=new Uint8Array(n.gzhead.extra);n.pending_buf.set(a.subarray(n.gzindex,n.gzindex+o),n.pending),n.pending+=o,n.gzhead.hcrc&&n.pending>i&&(e.adler=Oi(e.adler,n.pending_buf,n.pending-i,i)),n.gzindex=0}n.status=73}if(n.status===73){if(n.gzhead.name){let i,o=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>o&&(e.adler=Oi(e.adler,n.pending_buf,n.pending-o,o)),da(e),n.pending!==0)return n.last_flush=-1,Ki;o=0}i=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,$n(n,i)}while(i!==0);n.gzhead.hcrc&&n.pending>o&&(e.adler=Oi(e.adler,n.pending_buf,n.pending-o,o)),n.gzindex=0}n.status=91}if(n.status===91){if(n.gzhead.comment){let i,o=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>o&&(e.adler=Oi(e.adler,n.pending_buf,n.pending-o,o)),da(e),n.pending!==0)return n.last_flush=-1,Ki;o=0}i=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,$n(n,i)}while(i!==0);n.gzhead.hcrc&&n.pending>o&&(e.adler=Oi(e.adler,n.pending_buf,n.pending-o,o))}n.status=103}if(n.status===103){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(da(e),n.pending!==0))return n.last_flush=-1,Ki;$n(n,255&e.adler),$n(n,e.adler>>8&255),e.adler=0}if(n.status=cd,da(e),n.pending!==0)return n.last_flush=-1,Ki}if(e.avail_in!==0||n.lookahead!==0||t!==cu&&n.status!==Am){let i=n.level===0?Dz(n,t):n.strategy===Xv?((o,a)=>{let s;for(;;){if(o.lookahead===0&&(Wf(o),o.lookahead===0)){if(a===cu)return 1;break}if(o.match_length=0,s=su(o,0,o.window[o.strstart]),o.lookahead--,o.strstart++,s&&(pa(o,!1),o.strm.avail_out===0))return 1}return o.insert=0,a===Za?(pa(o,!0),o.strm.avail_out===0?3:4):o.sym_next&&(pa(o,!1),o.strm.avail_out===0)?1:2})(n,t):n.strategy===Lpe?((o,a)=>{let s,c,l,u;const d=o.window;for(;;){if(o.lookahead<=sd){if(Wf(o),o.lookahead<=sd&&a===cu)return 1;if(o.lookahead===0)break}if(o.match_length=0,o.lookahead>=3&&o.strstart>0&&(l=o.strstart-1,c=d[l],c===d[++l]&&c===d[++l]&&c===d[++l])){u=o.strstart+sd;do;while(c===d[++l]&&c===d[++l]&&c===d[++l]&&c===d[++l]&&c===d[++l]&&c===d[++l]&&c===d[++l]&&c===d[++l]&&l<u);o.match_length=sd-(u-l),o.match_length>o.lookahead&&(o.match_length=o.lookahead)}if(o.match_length>=3?(s=su(o,1,o.match_length-3),o.lookahead-=o.match_length,o.strstart+=o.match_length,o.match_length=0):(s=su(o,0,o.window[o.strstart]),o.lookahead--,o.strstart++),s&&(pa(o,!1),o.strm.avail_out===0))return 1}return o.insert=0,a===Za?(pa(o,!0),o.strm.avail_out===0?3:4):o.sym_next&&(pa(o,!1),o.strm.avail_out===0)?1:2})(n,t):Om[n.level].func(n,t);if(i!==3&&i!==4||(n.status=Am),i===1||i===3)return e.avail_out===0&&(n.last_flush=-1),Ki;if(i===2&&(t===Ope?Ape(n):t!==SB&&(dA(n,0,0,!1),t===xpe&&(zl(n.head),n.lookahead===0&&(n.strstart=0,n.block_start=0,n.insert=0))),da(e),e.avail_out===0))return n.last_flush=-1,Ki}return t!==Za?Ki:n.wrap<=0?yB:(n.wrap===2?($n(n,255&e.adler),$n(n,e.adler>>8&255),$n(n,e.adler>>16&255),$n(n,e.adler>>24&255),$n(n,255&e.total_in),$n(n,e.total_in>>8&255),$n(n,e.total_in>>16&255),$n(n,e.total_in>>24&255)):(Xp(n,e.adler>>>16),Xp(n,65535&e.adler)),da(e),n.wrap>0&&(n.wrap=-n.wrap),n.pending!==0?Ki:yB)},Wpe=(e,t)=>{let n=t.length;if(M0(e))return yc;const r=e.state,i=r.wrap;if(i===2||i===1&&r.status!==zf||r.lookahead)return yc;if(i===1&&(e.adler=k0(e.adler,t,n,0)),r.wrap=0,n>=r.w_size){i===0&&(zl(r.head),r.strstart=0,r.block_start=0,r.insert=0);let c=new Uint8Array(r.w_size);c.set(t.subarray(n-r.w_size,n),0),t=c,n=r.w_size}const o=e.avail_in,a=e.next_in,s=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,Wf(r);r.lookahead>=3;){let c=r.strstart,l=r.lookahead-2;do r.ins_h=lu(r,r.ins_h,r.window[c+3-1]),r.prev[c&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=c,c++;while(--l);r.strstart=c,r.lookahead=2,Wf(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,e.next_in=a,e.input=s,e.avail_in=o,r.wrap=i,Ki},Gm={deflateInit:(e,t)=>bB(e,t,Wy,15,8,Mpe),deflateInit2:bB,deflateReset:kz,deflateResetKeep:Lz,deflateSetHeader:(e,t)=>M0(e)||e.state.wrap!==2?yc:(e.state.gzhead=t,Ki),deflate:zpe,deflateEnd:e=>{if(M0(e))return yc;const t=e.state.status;return e.state=null,t===cd?ld(e,Npe):Ki},deflateSetDictionary:Wpe,deflateInfo:"pako deflate (from Nodeca project)"};const Gpe=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var Gy={assign:function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(n){if(typeof n!="object")throw new TypeError(n+"must be non-object");for(const r in n)Gpe(n,r)&&(e[r]=n[r])}}return e},flattenChunks:e=>{let t=0;for(let r=0,i=e.length;r<i;r++)t+=e[r].length;const n=new Uint8Array(t);for(let r=0,i=0,o=e.length;r<o;r++){let a=e[r];n.set(a,i),i+=a.length}return n}};let Mz=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Mz=!1}const F0=new Uint8Array(256);for(let e=0;e<256;e++)F0[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;F0[254]=F0[254]=1;var U0={string2buf:e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,n,r,i,o,a=e.length,s=0;for(i=0;i<a;i++)n=e.charCodeAt(i),(64512&n)==55296&&i+1<a&&(r=e.charCodeAt(i+1),(64512&r)==56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),s+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(s),o=0,i=0;o<s;i++)n=e.charCodeAt(i),(64512&n)==55296&&i+1<a&&(r=e.charCodeAt(i+1),(64512&r)==56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),n<128?t[o++]=n:n<2048?(t[o++]=192|n>>>6,t[o++]=128|63&n):n<65536?(t[o++]=224|n>>>12,t[o++]=128|n>>>6&63,t[o++]=128|63&n):(t[o++]=240|n>>>18,t[o++]=128|n>>>12&63,t[o++]=128|n>>>6&63,t[o++]=128|63&n);return t},buf2string:(e,t)=>{const n=t||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let r,i;const o=new Array(2*n);for(i=0,r=0;r<n;){let a=e[r++];if(a<128){o[i++]=a;continue}let s=F0[a];if(s>4)o[i++]=65533,r+=s-1;else{for(a&=s===2?31:s===3?15:7;s>1&&r<n;)a=a<<6|63&e[r++],s--;s>1?o[i++]=65533:a<65536?o[i++]=a:(a-=65536,o[i++]=55296|a>>10&1023,o[i++]=56320|1023&a)}}return((a,s)=>{if(s<65534&&a.subarray&&Mz)return String.fromCharCode.apply(null,a.length===s?a:a.subarray(0,s));let c="";for(let l=0;l<s;l++)c+=String.fromCharCode(a[l]);return c})(o,i)},utf8border:(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let n=t-1;for(;n>=0&&(192&e[n])==128;)n--;return n<0||n===0?t:n+F0[e[n]]>t?n:t}},Fz=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const Uz=Object.prototype.toString,{Z_NO_FLUSH:Kpe,Z_SYNC_FLUSH:qpe,Z_FULL_FLUSH:Ype,Z_FINISH:Xpe,Z_OK:pS,Z_STREAM_END:Jpe,Z_DEFAULT_COMPRESSION:Qpe,Z_DEFAULT_STRATEGY:Zpe,Z_DEFLATED:eme}=vp;function Km(e){this.options=Gy.assign({level:Qpe,method:eme,chunkSize:16384,windowBits:15,memLevel:8,strategy:Zpe},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Fz,this.strm.avail_out=0;let n=Gm.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==pS)throw new Error(xd[n]);if(t.header&&Gm.deflateSetHeader(this.strm,t.header),t.dictionary){let r;if(r=typeof t.dictionary=="string"?U0.string2buf(t.dictionary):Uz.call(t.dictionary)==="[object ArrayBuffer]"?new Uint8Array(t.dictionary):t.dictionary,n=Gm.deflateSetDictionary(this.strm,r),n!==pS)throw new Error(xd[n]);this._dict_set=!0}}function $T(e,t){const n=new Km(t);if(n.push(e,!0),n.err)throw n.msg||xd[n.err];return n.result}Km.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize;let i,o;if(this.ended)return!1;for(o=t===~~t?t:t===!0?Xpe:Kpe,typeof e=="string"?n.input=U0.string2buf(e):Uz.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;)if(n.avail_out===0&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),(o===qpe||o===Ype)&&n.avail_out<=6)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else{if(i=Gm.deflate(n,o),i===Jpe)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),i=Gm.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===pS;if(n.avail_out!==0){if(o>0&&n.next_out>0)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else if(n.avail_in===0)break}else this.onData(n.output)}return!0},Km.prototype.onData=function(e){this.chunks.push(e)},Km.prototype.onEnd=function(e){e===pS&&(this.result=Gy.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var tme={Deflate:Km,deflate:$T,deflateRaw:function(e,t){return(t=t||{}).raw=!0,$T(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,$T(e,t)},constants:vp};const Jv=16209;var nme=function(e,t){let n,r,i,o,a,s,c,l,u,d,h,f,g,p,m,_,E,S,C,b,T,R,A,O;const x=e.state;n=e.next_in,A=e.input,r=n+(e.avail_in-5),i=e.next_out,O=e.output,o=i-(t-e.avail_out),a=i+(e.avail_out-257),s=x.dmax,c=x.wsize,l=x.whave,u=x.wnext,d=x.window,h=x.hold,f=x.bits,g=x.lencode,p=x.distcode,m=(1<<x.lenbits)-1,_=(1<<x.distbits)-1;e:do{f<15&&(h+=A[n++]<<f,f+=8,h+=A[n++]<<f,f+=8),E=g[h&m];t:for(;;){if(S=E>>>24,h>>>=S,f-=S,S=E>>>16&255,S===0)O[i++]=65535&E;else{if(!(16&S)){if(!(64&S)){E=g[(65535&E)+(h&(1<<S)-1)];continue t}if(32&S){x.mode=16191;break e}e.msg="invalid literal/length code",x.mode=Jv;break e}C=65535&E,S&=15,S&&(f<S&&(h+=A[n++]<<f,f+=8),C+=h&(1<<S)-1,h>>>=S,f-=S),f<15&&(h+=A[n++]<<f,f+=8,h+=A[n++]<<f,f+=8),E=p[h&_];n:for(;;){if(S=E>>>24,h>>>=S,f-=S,S=E>>>16&255,!(16&S)){if(!(64&S)){E=p[(65535&E)+(h&(1<<S)-1)];continue n}e.msg="invalid distance code",x.mode=Jv;break e}if(b=65535&E,S&=15,f<S&&(h+=A[n++]<<f,f+=8,f<S&&(h+=A[n++]<<f,f+=8)),b+=h&(1<<S)-1,b>s){e.msg="invalid distance too far back",x.mode=Jv;break e}if(h>>>=S,f-=S,S=i-o,b>S){if(S=b-S,S>l&&x.sane){e.msg="invalid distance too far back",x.mode=Jv;break e}if(T=0,R=d,u===0){if(T+=c-S,S<C){C-=S;do O[i++]=d[T++];while(--S);T=i-b,R=O}}else if(u<S){if(T+=c+u-S,S-=u,S<C){C-=S;do O[i++]=d[T++];while(--S);if(T=0,u<C){S=u,C-=S;do O[i++]=d[T++];while(--S);T=i-b,R=O}}}else if(T+=u-S,S<C){C-=S;do O[i++]=d[T++];while(--S);T=i-b,R=O}for(;C>2;)O[i++]=R[T++],O[i++]=R[T++],O[i++]=R[T++],C-=3;C&&(O[i++]=R[T++],C>1&&(O[i++]=R[T++]))}else{T=i-b;do O[i++]=O[T++],O[i++]=O[T++],O[i++]=O[T++],C-=3;while(C>2);C&&(O[i++]=O[T++],C>1&&(O[i++]=O[T++]))}break}}break}}while(n<r&&i<a);C=f>>3,n-=C,f-=C<<3,h&=(1<<f)-1,e.next_in=n,e.next_out=i,e.avail_in=n<r?r-n+5:5-(n-r),e.avail_out=i<a?a-i+257:257-(i-a),x.hold=h,x.bits=f};const Qv=15,rme=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),ime=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),ome=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),ame=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var qm=(e,t,n,r,i,o,a,s)=>{const c=s.bits;let l,u,d,h,f,g,p=0,m=0,_=0,E=0,S=0,C=0,b=0,T=0,R=0,A=0,O=null;const x=new Uint16Array(16),M=new Uint16Array(16);let $,U,V,W=null;for(p=0;p<=Qv;p++)x[p]=0;for(m=0;m<r;m++)x[t[n+m]]++;for(S=c,E=Qv;E>=1&&x[E]===0;E--);if(S>E&&(S=E),E===0)return i[o++]=20971520,i[o++]=20971520,s.bits=1,0;for(_=1;_<E&&x[_]===0;_++);for(S<_&&(S=_),T=1,p=1;p<=Qv;p++)if(T<<=1,T-=x[p],T<0)return-1;if(T>0&&(e===0||E!==1))return-1;for(M[1]=0,p=1;p<Qv;p++)M[p+1]=M[p]+x[p];for(m=0;m<r;m++)t[n+m]!==0&&(a[M[t[n+m]]++]=m);if(e===0?(O=W=a,g=20):e===1?(O=rme,W=ime,g=257):(O=ome,W=ame,g=0),A=0,m=0,p=_,f=o,C=S,b=0,d=-1,R=1<<S,h=R-1,e===1&&R>852||e===2&&R>592)return 1;for(;;){$=p-b,a[m]+1<g?(U=0,V=a[m]):a[m]>=g?(U=W[a[m]-g],V=O[a[m]-g]):(U=96,V=0),l=1<<p-b,u=1<<C,_=u;do u-=l,i[f+(A>>b)+u]=$<<24|U<<16|V|0;while(u!==0);for(l=1<<p-1;A&l;)l>>=1;if(l!==0?(A&=l-1,A+=l):A=0,m++,--x[p]==0){if(p===E)break;p=t[n+a[m]]}if(p>S&&(A&h)!==d){for(b===0&&(b=S),f+=_,C=p-b,T=1<<C;C+b<E&&(T-=x[C+b],!(T<=0));)C++,T<<=1;if(R+=1<<C,e===1&&R>852||e===2&&R>592)return 1;d=A&h,i[d]=S<<24|C<<16|f-o|0}}return A!==0&&(i[f+A]=p-b<<24|64<<16|0),s.bits=S,0};const{Z_FINISH:TB,Z_BLOCK:sme,Z_TREES:Zv,Z_OK:vd,Z_STREAM_END:cme,Z_NEED_DICT:lme,Z_STREAM_ERROR:es,Z_DATA_ERROR:Bz,Z_MEM_ERROR:$z,Z_BUF_ERROR:ume,Z_DEFLATED:RB}=vp,Ky=16180,mS=16190,Hc=16191,VT=16192,jT=16194,eE=16199,tE=16200,HT=16206,br=16209,wB=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function dme(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Ed=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<Ky||t.mode>16211?1:0},Vz=e=>{if(Ed(e))return es;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=Ky,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,vd},jz=e=>{if(Ed(e))return es;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,Vz(e)},Hz=(e,t)=>{let n;if(Ed(e))return es;const r=e.state;return t<0?(n=0,t=-t):(n=5+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?es:(r.window!==null&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,jz(e))},IB=(e,t)=>{if(!e)return es;const n=new dme;e.state=n,n.strm=e,n.window=null,n.mode=Ky;const r=Hz(e,t);return r!==vd&&(e.state=null),r};let zT,WT,AB=!0;const hme=e=>{if(AB){zT=new Int32Array(512),WT=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(qm(1,e.lens,0,288,zT,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;qm(2,e.lens,0,32,WT,0,e.work,{bits:5}),AB=!1}e.lencode=zT,e.lenbits=9,e.distcode=WT,e.distbits=5},zz=(e,t,n,r)=>{let i;const o=e.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),r>=o.wsize?(o.window.set(t.subarray(n-o.wsize,n),0),o.wnext=0,o.whave=o.wsize):(i=o.wsize-o.wnext,i>r&&(i=r),o.window.set(t.subarray(n-r,n-r+i),o.wnext),(r-=i)?(o.window.set(t.subarray(n-r,n),0),o.wnext=r,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0};var fme=(e,t)=>{let n,r,i,o,a,s,c,l,u,d,h,f,g,p,m,_,E,S,C,b,T,R,A=0;const O=new Uint8Array(4);let x,M;const $=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Ed(e)||!e.output||!e.input&&e.avail_in!==0)return es;n=e.state,n.mode===Hc&&(n.mode=VT),a=e.next_out,i=e.output,c=e.avail_out,o=e.next_in,r=e.input,s=e.avail_in,l=n.hold,u=n.bits,d=s,h=c,R=vd;e:for(;;)switch(n.mode){case Ky:if(n.wrap===0){n.mode=VT;break}for(;u<16;){if(s===0)break e;s--,l+=r[o++]<<u,u+=8}if(2&n.wrap&&l===35615){n.wbits===0&&(n.wbits=15),n.check=0,O[0]=255&l,O[1]=l>>>8&255,n.check=Oi(n.check,O,2,0),l=0,u=0,n.mode=16181;break}if(n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&l)<<8)+(l>>8))%31){e.msg="incorrect header check",n.mode=br;break}if((15&l)!==RB){e.msg="unknown compression method",n.mode=br;break}if(l>>>=4,u-=4,T=8+(15&l),n.wbits===0&&(n.wbits=T),T>15||T>n.wbits){e.msg="invalid window size",n.mode=br;break}n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=512&l?16189:Hc,l=0,u=0;break;case 16181:for(;u<16;){if(s===0)break e;s--,l+=r[o++]<<u,u+=8}if(n.flags=l,(255&Ei(n))!==RB){e.msg="unknown compression method",n.mode=br;break}if(57344&Ei(n)){e.msg="unknown header flags set",n.mode=br;break}n.head&&(n.head.text=l>>8&1),512&Ei(n)&&4&n.wrap&&(O[0]=255&l,O[1]=l>>>8&255,n.check=Oi(n.check,O,2,0)),l=0,u=0,n.mode=16182;case 16182:for(;u<32;){if(s===0)break e;s--,l+=r[o++]<<u,u+=8}n.head&&(n.head.time=l),512&Ei(n)&&4&n.wrap&&(O[0]=255&l,O[1]=l>>>8&255,O[2]=l>>>16&255,O[3]=l>>>24&255,n.check=Oi(n.check,O,4,0)),l=0,u=0,n.mode=16183;case 16183:for(;u<16;){if(s===0)break e;s--,l+=r[o++]<<u,u+=8}n.head&&(n.head.xflags=255&l,n.head.os=l>>8),512&Ei(n)&&4&n.wrap&&(O[0]=255&l,O[1]=l>>>8&255,n.check=Oi(n.check,O,2,0)),l=0,u=0,n.mode=16184;case 16184:if(1024&Ei(n)){for(;u<16;){if(s===0)break e;s--,l+=r[o++]<<u,u+=8}n.length=l,n.head&&(n.head.extra_len=l),512&Ei(n)&&4&n.wrap&&(O[0]=255&l,O[1]=l>>>8&255,n.check=Oi(n.check,O,2,0)),l=0,u=0}else n.head&&(n.head.extra=null);n.mode=16185;case 16185:if(1024&Ei(n)&&(f=n.length,f>s&&(f=s),f&&(n.head&&(T=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(o,o+f),T)),512&Ei(n)&&4&n.wrap&&(n.check=Oi(n.check,r,f,o)),s-=f,o+=f,n.length-=f),n.length))break e;n.length=0,n.mode=16186;case 16186:if(2048&Ei(n)){if(s===0)break e;f=0;do T=r[o+f++],n.head&&T&&n.length<65536&&(n.head.name+=String.fromCharCode(T));while(T&&f<s);if(512&Ei(n)&&4&n.wrap&&(n.check=Oi(n.check,r,f,o)),s-=f,o+=f,T)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=16187;case 16187:if(4096&Ei(n)){if(s===0)break e;f=0;do T=r[o+f++],n.head&&T&&n.length<65536&&(n.head.comment+=String.fromCharCode(T));while(T&&f<s);if(512&Ei(n)&&4&n.wrap&&(n.check=Oi(n.check,r,f,o)),s-=f,o+=f,T)break e}else n.head&&(n.head.comment=null);n.mode=16188;case 16188:if(512&Ei(n)){for(;u<16;){if(s===0)break e;s--,l+=r[o++]<<u,u+=8}if(4&n.wrap&&l!==(65535&n.check)){e.msg="header crc mismatch",n.mode=br;break}l=0,u=0}n.head&&(n.head.hcrc=Ei(n)>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=Hc;break;case 16189:for(;u<32;){if(s===0)break e;s--,l+=r[o++]<<u,u+=8}e.adler=n.check=wB(l),l=0,u=0,n.mode=mS;case mS:if(n.havedict===0)return e.next_out=a,e.avail_out=c,e.next_in=o,e.avail_in=s,n.hold=l,n.bits=u,lme;e.adler=n.check=1,n.mode=Hc;case Hc:if(t===sme||t===Zv)break e;case VT:if(n.last){l>>>=7&u,u-=7&u,n.mode=HT;break}for(;u<3;){if(s===0)break e;s--,l+=r[o++]<<u,u+=8}switch(n.last=1&l,l>>>=1,u-=1,3&l){case 0:n.mode=16193;break;case 1:if(hme(n),n.mode=eE,t===Zv){l>>>=2,u-=2;break e}break;case 2:n.mode=16196;break;case 3:e.msg="invalid block type",n.mode=br}l>>>=2,u-=2;break;case 16193:for(l>>>=7&u,u-=7&u;u<32;){if(s===0)break e;s--,l+=r[o++]<<u,u+=8}if((65535&l)!=(l>>>16^65535)){e.msg="invalid stored block lengths",n.mode=br;break}if(n.length=65535&l,l=0,u=0,n.mode=jT,t===Zv)break e;case jT:n.mode=16195;case 16195:if(f=n.length,f){if(f>s&&(f=s),f>c&&(f=c),f===0)break e;i.set(r.subarray(o,o+f),a),s-=f,o+=f,c-=f,a+=f,n.length-=f;break}n.mode=Hc;break;case 16196:for(;u<14;){if(s===0)break e;s--,l+=r[o++]<<u,u+=8}if(n.nlen=257+(31&l),l>>>=5,u-=5,n.ndist=1+(31&l),l>>>=5,u-=5,n.ncode=4+(15&l),l>>>=4,u-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=br;break}n.have=0,n.mode=16197;case 16197:for(;n.have<n.ncode;){for(;u<3;){if(s===0)break e;s--,l+=r[o++]<<u,u+=8}n.lens[$[n.have++]]=7&l,l>>>=3,u-=3}for(;n.have<19;)n.lens[$[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,x={bits:n.lenbits},R=qm(0,n.lens,0,19,n.lencode,0,n.work,x),n.lenbits=x.bits,R){e.msg="invalid code lengths set",n.mode=br;break}n.have=0,n.mode=16198;case 16198:for(;n.have<n.nlen+n.ndist;){for(;A=n.lencode[l&(1<<n.lenbits)-1],m=A>>>24,_=A>>>16&255,E=65535&A,!(m<=u);){if(s===0)break e;s--,l+=r[o++]<<u,u+=8}if(E<16)l>>>=m,u-=m,n.lens[n.have++]=E;else{if(E===16){for(M=m+2;u<M;){if(s===0)break e;s--,l+=r[o++]<<u,u+=8}if(l>>>=m,u-=m,n.have===0){e.msg="invalid bit length repeat",n.mode=br;break}T=n.lens[n.have-1],f=3+(3&l),l>>>=2,u-=2}else if(E===17){for(M=m+3;u<M;){if(s===0)break e;s--,l+=r[o++]<<u,u+=8}l>>>=m,u-=m,T=0,f=3+(7&l),l>>>=3,u-=3}else{for(M=m+7;u<M;){if(s===0)break e;s--,l+=r[o++]<<u,u+=8}l>>>=m,u-=m,T=0,f=11+(127&l),l>>>=7,u-=7}if(n.have+f>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=br;break}for(;f--;)n.lens[n.have++]=T}}if(n.mode===br)break;if(n.lens[256]===0){e.msg="invalid code -- missing end-of-block",n.mode=br;break}if(n.lenbits=9,x={bits:n.lenbits},R=qm(1,n.lens,0,n.nlen,n.lencode,0,n.work,x),n.lenbits=x.bits,R){e.msg="invalid literal/lengths set",n.mode=br;break}if(n.distbits=6,n.distcode=n.distdyn,x={bits:n.distbits},R=qm(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,x),n.distbits=x.bits,R){e.msg="invalid distances set",n.mode=br;break}if(n.mode=eE,t===Zv)break e;case eE:n.mode=tE;case tE:if(s>=6&&c>=258){e.next_out=a,e.avail_out=c,e.next_in=o,e.avail_in=s,n.hold=l,n.bits=u,nme(e,h),a=e.next_out,i=e.output,c=e.avail_out,o=e.next_in,r=e.input,s=e.avail_in,l=n.hold,u=n.bits,n.mode===Hc&&(n.back=-1);break}for(n.back=0;A=n.lencode[l&(1<<n.lenbits)-1],m=A>>>24,_=A>>>16&255,E=65535&A,!(m<=u);){if(s===0)break e;s--,l+=r[o++]<<u,u+=8}if(_&&!(240&_)){for(S=m,C=_,b=E;A=n.lencode[b+((l&(1<<S+C)-1)>>S)],m=A>>>24,_=A>>>16&255,E=65535&A,!(S+m<=u);){if(s===0)break e;s--,l+=r[o++]<<u,u+=8}l>>>=S,u-=S,n.back+=S}if(l>>>=m,u-=m,n.back+=m,n.length=E,_===0){n.mode=16205;break}if(32&_){n.back=-1,n.mode=Hc;break}if(64&_){e.msg="invalid literal/length code",n.mode=br;break}n.extra=15&_,n.mode=16201;case 16201:if(n.extra){for(M=n.extra;u<M;){if(s===0)break e;s--,l+=r[o++]<<u,u+=8}n.length+=l&(1<<n.extra)-1,l>>>=n.extra,u-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=16202;case 16202:for(;A=n.distcode[l&(1<<n.distbits)-1],m=A>>>24,_=A>>>16&255,E=65535&A,!(m<=u);){if(s===0)break e;s--,l+=r[o++]<<u,u+=8}if(!(240&_)){for(S=m,C=_,b=E;A=n.distcode[b+((l&(1<<S+C)-1)>>S)],m=A>>>24,_=A>>>16&255,E=65535&A,!(S+m<=u);){if(s===0)break e;s--,l+=r[o++]<<u,u+=8}l>>>=S,u-=S,n.back+=S}if(l>>>=m,u-=m,n.back+=m,64&_){e.msg="invalid distance code",n.mode=br;break}n.offset=E,n.extra=15&_,n.mode=16203;case 16203:if(n.extra){for(M=n.extra;u<M;){if(s===0)break e;s--,l+=r[o++]<<u,u+=8}n.offset+=l&(1<<n.extra)-1,l>>>=n.extra,u-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=br;break}n.mode=16204;case 16204:if(c===0)break e;if(f=h-c,n.offset>f){if(f=n.offset-f,f>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=br;break}f>n.wnext?(f-=n.wnext,g=n.wsize-f):g=n.wnext-f,f>n.length&&(f=n.length),p=n.window}else p=i,g=a-n.offset,f=n.length;f>c&&(f=c),c-=f,n.length-=f;do i[a++]=p[g++];while(--f);n.length===0&&(n.mode=tE);break;case 16205:if(c===0)break e;i[a++]=n.length,c--,n.mode=tE;break;case HT:if(n.wrap){for(;u<32;){if(s===0)break e;s--,l|=r[o++]<<u,u+=8}if(h-=c,e.total_out+=h,n.total+=h,4&n.wrap&&h&&(e.adler=n.check=Ei(n)?Oi(n.check,i,h,a-h):k0(n.check,i,h,a-h)),h=c,4&n.wrap&&(Ei(n)?l:wB(l))!==n.check){e.msg="incorrect data check",n.mode=br;break}l=0,u=0}n.mode=16207;case 16207:if(n.wrap&&Ei(n)){for(;u<32;){if(s===0)break e;s--,l+=r[o++]<<u,u+=8}if(4&n.wrap&&l!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=br;break}l=0,u=0}n.mode=16208;case 16208:R=cme;break e;case br:R=Bz;break e;case 16210:return $z;default:return es}return e.next_out=a,e.avail_out=c,e.next_in=o,e.avail_in=s,n.hold=l,n.bits=u,(n.wsize||h!==e.avail_out&&n.mode<br&&(n.mode<HT||t!==TB))&&zz(e,e.output,e.next_out,h-e.avail_out),d-=e.avail_in,h-=e.avail_out,e.total_in+=d,e.total_out+=h,n.total+=h,4&n.wrap&&h&&(e.adler=n.check=Ei(n)?Oi(n.check,i,h,e.next_out-h):k0(n.check,i,h,e.next_out-h)),e.data_type=n.bits+(n.last?64:0)+(n.mode===Hc?128:0)+(n.mode===eE||n.mode===jT?256:0),(d===0&&h===0||t===TB)&&R===vd&&(R=ume),R},Zc={inflateReset:jz,inflateReset2:Hz,inflateResetKeep:Vz,inflateInit:e=>IB(e,15),inflateInit2:IB,inflate:fme,inflateEnd:e=>{if(Ed(e))return es;let t=e.state;return t.window&&(t.window=null),e.state=null,vd},inflateGetHeader:(e,t)=>{if(Ed(e))return es;const n=e.state;return 2&n.wrap?(n.head=t,t.done=!1,vd):es},inflateSetDictionary:(e,t)=>{const n=t.length;let r,i,o;return Ed(e)?es:(r=e.state,r.wrap!==0&&r.mode!==mS?es:r.mode===mS&&(i=1,i=k0(i,t,n,0),i!==r.check)?Bz:(o=zz(e,t,n,n),o?(r.mode=16210,$z):(r.havedict=1,vd)))},inflateInfo:"pako inflate (from Nodeca project)"},pme=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const Wz=Object.prototype.toString,{Z_NO_FLUSH:mme,Z_FINISH:gme,Z_OK:Ym,Z_STREAM_END:GT,Z_NEED_DICT:KT,Z_STREAM_ERROR:vme,Z_DATA_ERROR:OB,Z_MEM_ERROR:Eme}=vp;function Xm(e){this.options=Gy.assign({chunkSize:65536,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&!(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Fz,this.strm.avail_out=0;let n=Zc.inflateInit2(this.strm,t.windowBits);if(n!==Ym)throw new Error(xd[n]);if(this.header=new pme,Zc.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=U0.string2buf(t.dictionary):Wz.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=Zc.inflateSetDictionary(this.strm,t.dictionary),n!==Ym)))throw new Error(xd[n])}function qT(e,t){const n=new Xm(t);if(n.push(e),n.err)throw n.msg||xd[n.err];return n.result}Xm.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize,i=this.options.dictionary;let o,a,s;if(this.ended)return!1;for(a=t===~~t?t:t===!0?gme:mme,Wz.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(n.avail_out===0&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),o=Zc.inflate(n,a),o===KT&&i&&(o=Zc.inflateSetDictionary(n,i),o===Ym?o=Zc.inflate(n,a):o===OB&&(o=KT));n.avail_in>0&&o===GT&&n.state.wrap>0&&e[n.next_in]!==0;)Zc.inflateReset(n),o=Zc.inflate(n,a);switch(o){case vme:case OB:case KT:case Eme:return this.onEnd(o),this.ended=!0,!1}if(s=n.avail_out,n.next_out&&(n.avail_out===0||o===GT))if(this.options.to==="string"){let c=U0.utf8border(n.output,n.next_out),l=n.next_out-c,u=U0.buf2string(n.output,c);n.next_out=l,n.avail_out=r-l,l&&n.output.set(n.output.subarray(c,c+l),0),this.onData(u)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(o!==Ym||s!==0){if(o===GT)return o=Zc.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(n.avail_in===0)break}}return!0},Xm.prototype.onData=function(e){this.chunks.push(e)},Xm.prototype.onEnd=function(e){e===Ym&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Gy.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var _me={Inflate:Xm,inflate:qT,inflateRaw:function(e,t){return(t=t||{}).raw=!0,qT(e,t)},ungzip:qT,constants:vp};const{Deflate:IUe,deflate:Sme,deflateRaw:AUe,gzip:OUe}=tme,{Inflate:xUe,inflate:yme,inflateRaw:NUe,ungzip:PUe}=_me;var Cme=Sme,bme=yme,Gz=function(e){return e[e.ONE_BYTE=0]="ONE_BYTE",e[e.TWO_BYTE=1]="TWO_BYTE",e}(Gz||{});class Tme{constructor(){P(this,"_sequence",0),P(this,"_startTime",Date.now()),P(this,"isUseOneByte",!0)}get startTime(){const t=Date.now()-this._startTime;return t<Math.pow(2,16)?t:(this._startTime+=Math.pow(2,16),this.startTime)}get sequence(){return this._sequence<Math.pow(2,32)?this._sequence++:(this._sequence-=Math.pow(2,32),this.sequence)}serialize(t){const n={commonPacketHeader:{length:0,reserved:0,extension:0,sequence:this.sequence},commonStreamHeader:this.startTime,extension:void 0,payload:t};if(t.byteLength>128){const s=new Uint8Array(4);s.set([1,0,0,0]);const c={id:0,length:4,data:s.buffer},l={profile:this.isUseOneByte?0:1,length:this.isUseOneByte?5:6,datas:[c]};n.commonPacketHeader.extension=1,n.extension=l,n.payload=this.compress(t),n.commonPacketHeader.length=8+(n.extension.length+2)+n.payload.byteLength}else n.commonPacketHeader.length=8+n.payload.byteLength;H("SHOW_DATASTREAM2_LOG")&&w.debug("send data header: ".concat(JSON.stringify(n.commonPacketHeader)));const r=new ArrayBuffer(n.commonPacketHeader.length),i=new Uint8Array(r),o=new DataView(r);let a=0;if(o.setUint16(a,n.commonPacketHeader.extension<<15|n.commonPacketHeader.reserved<<14|n.commonPacketHeader.length,!0),a+=2,o.setUint32(a,n.commonPacketHeader.sequence,!0),a+=4,o.setUint16(a,n.commonStreamHeader,!0),a+=2,n.extension){const s=this.serializeExtension(n.extension);i.set(new Uint8Array(s),a),a+=s.byteLength}if(i.set(new Uint8Array(n.payload),a),a+=n.payload.byteLength,a!==n.commonPacketHeader.length)throw Error("serialize error!");return r}deserialize(t){if(t.byteLength<4)return new ArrayBuffer(0);const n=new DataView(t);let r=0;const i=n.getUint16(r,!0);r+=2;const o={length:16383&i,reserved:(16384&i)>>14,extension:(32768&i)>>15,sequence:n.getUint16(r+2,!0)<<16|n.getUint16(r,!0)};let a,s;if(r+=4,H("SHOW_DATASTREAM2_LOG")&&w.debug("receive data header: ".concat(JSON.stringify(o))),n.getUint16(r,!0),r+=2,o.extension){s=this.deserializeExtension(t.slice(r)),r+=2+s.length,a=t.slice(r);let c=!1;if(s.datas.length>0){const l=s.datas.find(u=>u.id===0);l&&(c=(1&new DataView(l.data).getUint32(0,!0))==1)}a=c?this.decompress(a):a}else a=t.slice(8);return a}serializeExtension(t){const{profile:n,length:r,datas:i}=t,o=new ArrayBuffer(r+2),a=new Uint8Array(o),s=new DataView(o);let c=0;if(s.setUint8(c++,n),s.setUint8(c++,r),i.forEach(l=>{n?(s.setUint8(c++,l.id),s.setUint8(c++,l.length),a.set(new Uint8Array(l.data),c),c+=l.data.byteLength):(s.setUint8(c++,l.id|l.length<<4),a.set(new Uint8Array(l.data),c),c+=l.data.byteLength)}),c!==r+2)throw Error("serialize extension error, is ".concat(c,"!==").concat(r+2));return o}deserializeExtension(t){const n=new DataView(t);let r=0;const i=n.getUint8(r);r++;const o=n.getUint8(r);r++;const a=i===Gz.TWO_BYTE,s=[],c=new DataView(t,2);let l=0;for(;l<o;){let u=0,d=0,h=new ArrayBuffer(0);a?(u=c.getUint8(l),l++,d=c.getUint8(l),l++):(u=15&c.getUint8(l),d=c.getUint8(l)>>4,l++),d>0&&(h=c.buffer.slice(l+2,l+2+d),l+=h.byteLength),s.push({id:u,length:d,data:h})}if(l!==o)throw Error("parse error");return{profile:i,length:o,datas:s}}decompress(t){return bme(new Uint8Array(t))}compress(t){return Cme(new Uint8Array(t))}}const Rme={name:"DataStream",create:(e,t)=>{const n=t?new dfe(e):new hfe(e);return n.useDataStream(new Tme),n}};class wme extends Pn{constructor(t,n,r){super(),P(this,"ws",void 0),P(this,"requestId",1),P(this,"heartBeatTimer",void 0),P(this,"joinInfo",void 0),P(this,"clientId",void 0),P(this,"onOpen",()=>{this.emit("open"),this.startHeartBeatCheck()}),P(this,"onClose",i=>{this.emit("close"),this.dispose()}),P(this,"onMessage",i=>{const o=JSON.parse(i.data);if(!o||o.command!=="serverResponse"||!o.requestId)return o&&o.command==="serverStatus"&&o.serverStatus&&o.serverStatus.command?(this.emit("status",o.serverStatus),void this.emit(o.serverStatus.command,o.serverStatus)):void 0;this.emit("req_".concat(o.requestId),o)}),this.joinInfo=t,this.clientId=n,this.ws=new R0("cross-channel-".concat(this.clientId),r),this.ws.on(Ye.RECONNECTING,()=>{this.ws.reconnectMode="retry",this.emit("reconnecting")}),this.ws.on(Ye.CONNECTED,this.onOpen),this.ws.on(Ye.ON_MESSAGE,this.onMessage),this.ws.on(Ye.CLOSED,this.onClose)}isConnect(){return this.ws.state==="connected"}sendMessage(t){const n=this.requestId++;return t.requestId=n,t.seq=n,this.ws.sendMessage(t),n}waitStatus(t){return new _e((n,r)=>{const i=window.setTimeout(()=>{r(new q(k.TIMEOUT,"wait status timeout, status: ".concat(t)))},5e3);this.once(t,o=>{window.clearTimeout(i),o.state&&o.state!==0?r(new q(k.CROSS_CHANNEL_WAIT_STATUS_ERROR,"wait status error, status: ".concat(t))):n(void 0)}),this.once("dispose",()=>{window.clearTimeout(i),r(new q(k.WS_ABORT))})})}async request(t){if(this.ws.state==="closed")throw new q(k.WS_DISCONNECT);const n=()=>new _e((a,s)=>{this.ws.once(Ye.CLOSED,()=>s(new q(k.WS_ABORT))),this.ws.once(Ye.CONNECTED,a)});this.ws.state!=="connected"&&await n();const r=this.sendMessage(t),i=new _e((a,s)=>{const c=()=>{s(new q(k.WS_ABORT))};this.ws.once(Ye.RECONNECTING,c),this.ws.once(Ye.CLOSED,c),this.once("req_".concat(r),a),Lr(3e3).then(()=>{this.removeAllListeners("req_".concat(r)),this.ws.off(Ye.RECONNECTING,c),this.ws.off(Ye.CLOSED,c),s(new q(k.TIMEOUT,"cross channel ws request timeout"))})}),o=await i;if(!o||o.code!==200)throw new q(k.CROSS_CHANNEL_SERVER_ERROR_RESPONSE,"response: ".concat(JSON.stringify(o)));return o}async connect(t){this.ws.removeAllListeners(Ye.REQUEST_NEW_URLS),this.ws.on(Ye.REQUEST_NEW_URLS,n=>{n(t)}),await this.ws.init(t)}dispose(){this.clearHeartBeatCheck(),this.emit("dispose"),this.removeAllListeners(),this.ws.close()}sendPing(t){const n=this.requestId++;return t.requestId=n,this.ws.sendMessage(t),n}startHeartBeatCheck(){this.heartBeatTimer&&window.clearInterval(this.heartBeatTimer),this.heartBeatTimer=window.setInterval(()=>{this.sendPing({command:"ping",appId:this.joinInfo.appId,cname:this.joinInfo.cname,uid:this.joinInfo.uid.toString(),sid:this.joinInfo.sid,ts:+new Date,requestId:0})},3e3)}clearHeartBeatCheck(){window.clearInterval(this.heartBeatTimer),this.heartBeatTimer=void 0}}class Ime extends Pn{set state(t){t!==this._state&&(t!==lo.RELAY_STATE_FAILURE&&(this.errorCode=Uh.RELAY_OK),this.emit("state",t,this.errorCode),this._state=t)}get state(){return this._state}constructor(t,n,r,i,o){super(),P(this,"joinInfo",void 0),P(this,"sid",void 0),P(this,"clientId",void 0),P(this,"cancelToken",eo.CancelToken.source()),P(this,"workerToken",void 0),P(this,"requestId",0),P(this,"signal",void 0),P(this,"prevChannelMediaConfig",void 0),P(this,"httpRetryConfig",void 0),P(this,"_resolution",void 0),P(this,"_state",lo.RELAY_STATE_IDLE),P(this,"errorCode",Uh.RELAY_OK),P(this,"onStatus",a=>{w.debug("[".concat(this.clientId,"] ChannelMediaStatus: ").concat(JSON.stringify(a))),a&&a.command&&(a.command==="onAudioPacketReceived"&&this.emit("event",Gc.PACKET_RECEIVED_AUDIO_FROM_SRC),a.command==="onVideoPacketReceived"&&this.emit("event",Gc.PACKET_RECEIVED_VIDEO_FROM_SRC),a.command==="onSrcTokenPrivilegeDidExpire"&&(this.errorCode=Uh.SRC_TOKEN_EXPIRED,this.state=lo.RELAY_STATE_FAILURE),a.command==="onDestTokenPrivilegeDidExpire"&&(this.errorCode=Uh.DEST_TOKEN_EXPIRED,this.state=lo.RELAY_STATE_FAILURE))}),P(this,"onReconnect",async()=>{w.debug("[".concat(this.clientId,"] ChannelMediaSocket disconnect, reconnecting")),this.emit("event",Gc.NETWORK_DISCONNECTED),this.state=lo.RELAY_STATE_IDLE,this.prevChannelMediaConfig&&this.sendStartRelayMessage(this.prevChannelMediaConfig).catch(a=>{this.state!==lo.RELAY_STATE_IDLE&&(w.error("auto restart channel media relay failed",a.toString()),this.errorCode=Uh.SERVER_CONNECTION_LOST,this.state=lo.RELAY_STATE_FAILURE)})}),this.joinInfo=t,this.clientId=n,this.sid=Yh(),this.signal=new wme(this.joinInfo,this.clientId,r),this.httpRetryConfig=i,this._resolution=o}async startChannelMediaRelay(t){if(this.state!==lo.RELAY_STATE_IDLE)throw new q(k.INVALID_OPERATION);this.state=lo.RELAY_STATE_CONNECTING,await this.connect(),w.debug("[".concat(this.clientId,"] startChannelMediaRelay: connect success"));try{await this.sendStartRelayMessage(t)}catch(n){throw n.data&&n.data.serverResponse&&n.data.serverResponse.command==="SetSourceChannel"?new q(k.CROSS_CHANNEL_FAILED_JOIN_SRC):n.data&&n.data.serverResponse&&n.serverResponse.command==="SetDestChannelStatus"?new q(k.CROSS_CHANNEL_FAILED_JOIN_DEST):n.data&&n.data.serverResponse&&n.serverResponse.command==="StartPacketTransfer"?new q(k.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST):n}this.prevChannelMediaConfig=t}async updateChannelMediaRelay(t){if(this.state!==lo.RELAY_STATE_RUNNING)throw new q(k.INVALID_OPERATION);await this.sendUpdateMessage(t),this.prevChannelMediaConfig=t}async setVideoProfile(t){if(this._resolution=t,this.state!==lo.RELAY_STATE_RUNNING)throw new q(k.INVALID_OPERATION);const n=this.genMessage(Ai.SetVideoProfile);await this.signal.request(n),w.debug("[".concat(this.clientId,"] startChannelMediaRelay: setVideoProfile success"))}async stopChannelMediaRelay(){await this.sendStopRelayMessage(),w.debug("[".concat(this.clientId,"] stopChannelMediaRelay: send stop message success")),this.state=lo.RELAY_STATE_IDLE,this.dispose()}dispose(){w.debug("[".concat(this.clientId,"] disposeChannelMediaRelay")),this.cancelToken.cancel(),this.cancelToken=eo.CancelToken.source(),this.state=lo.RELAY_STATE_IDLE,this.emit("dispose"),this.signal.dispose(),this.prevChannelMediaConfig=void 0}async connect(){const t=await bfe(this.joinInfo,this.cancelToken.token,this.httpRetryConfig);this.workerToken=t.workerToken,await this.signal.connect(t.addressList),this.emit("event",Gc.NETWORK_CONNECTED),this.signal.on("status",this.onStatus),this.signal.on("reconnecting",this.onReconnect)}async sendStartRelayMessage(t){const n=this.genMessage(Ai.StopPacketTransfer);await this.signal.request(n),await this.signal.waitStatus("Normal Quit"),w.debug("[".concat(this.clientId,"] startChannelMediaRelay: StopPacketTransfer success"));const r=this.genMessage(Ai.SetSdkProfile,t);await this.signal.request(r),w.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSdkProfile success"));const i=this.genMessage(Ai.SetSourceChannel,t);await this.signal.request(i),await this.signal.waitStatus("SetSourceChannelStatus"),this.emit("event",Gc.PACKET_JOINED_SRC_CHANNEL),w.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSourceChannel success"));const o=this.genMessage(Ai.SetSourceUserId,t);await this.signal.request(o),w.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSourceUserId success"));const a=this.genMessage(Ai.SetDestChannel,t);await this.signal.request(a),await this.signal.waitStatus("SetDestChannelStatus"),this.emit("event",Gc.PACKET_JOINED_DEST_CHANNEL),w.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetDestChannel success"));const s=this.genMessage(Ai.StartPacketTransfer,t);await this.signal.request(s),this.emit("event",Gc.PACKET_SENT_TO_DEST_CHANNEL),this.state=lo.RELAY_STATE_RUNNING,w.debug("[".concat(this.clientId,"] startChannelMediaRelay: StartPacketTransfer success")),this.setVideoProfile(this._resolution)}async sendUpdateMessage(t){const n=this.genMessage(Ai.UpdateDestChannel,t);await this.signal.request(n),this.emit("event",Gc.PACKET_UPDATE_DEST_CHANNEL),w.debug("[".concat(this.clientId,"] sendUpdateMessage: UpdateDestChannel success"))}async sendStopRelayMessage(){const t=this.genMessage(Ai.StopPacketTransfer);await this.signal.request(t),w.debug("[".concat(this.clientId,"] sendStopRelayMessage: StopPacketTransfer success"))}genMessage(t,n){const r=[],i=[],o=[];this.requestId+=1;const a={appId:this.joinInfo.appId,cname:this.joinInfo.cname,uid:this.joinInfo.uid.toString(),sdkVersion:va,sid:this.sid,ts:Date.now(),requestId:this.requestId,seq:this.requestId,allocate:!0,clientRequest:{}};a.sdkVersion==="4.22.0"&&(a.sdkVersion="0.0.1");let s=null,c=null;switch(t){case Ai.SetSdkProfile:return a.clientRequest={command:"SetSdkProfile",type:"multi_channel"},a;case Ai.SetSourceChannel:if(c=n&&n.getSrcChannelMediaInfo(),!c)throw new q(k.UNEXPECTED_ERROR,"can not find source config");return a.clientRequest={command:"SetSourceChannel",uid:"0",channelName:c.channelName,token:c.token||this.joinInfo.appId},a;case Ai.SetSourceUserId:if(c=n&&n.getSrcChannelMediaInfo(),!c)throw new q(k.UNEXPECTED_ERROR,"can not find source config");return a.clientRequest={command:"SetSourceUserId",uid:c.uid+""},a;case Ai.SetDestChannel:if(s=n&&n.getDestChannelMediaInfo(),!s)throw new q(k.UNEXPECTED_ERROR,"can not find dest config");return s.forEach(l=>{r.push(l.channelName),i.push(l.uid+""),o.push(l.token||this.joinInfo.appId)}),a.clientRequest={command:"SetDestChannel",channelName:r,uid:i,token:o},a;case Ai.StartPacketTransfer:return a.clientRequest={command:"StartPacketTransfer"},a;case Ai.Reconnect:return a.clientRequest={command:"Reconnect"},a;case Ai.StopPacketTransfer:return a.clientRequest={command:"StopPacketTransfer"},a;case Ai.UpdateDestChannel:if(s=n&&n.getDestChannelMediaInfo(),!s)throw new q(k.UNEXPECTED_ERROR,"can not find dest config");return s.forEach(l=>{r.push(l.channelName),i.push(l.uid+""),o.push(l.token||this.joinInfo.appId)}),a.clientRequest={command:"UpdateDestChannel",channelName:r,uid:i,token:o},a;case Ai.SetVideoProfile:a.clientRequest={command:"SetVideoProfile",width:this._resolution.width,height:this._resolution.height}}return a}}const Ame={name:"ChannelMediaRelay",create:function(e){return new Ime(e.joinInfo,e.clientId,e.websocketRetryConfig||ar,e.httpRetryConfig||ar,e.resolution)}};function xB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Jp(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xB(Object(n),!0).forEach(function(r){P(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}class Ome extends Pn{constructor(t,n,r,i){super(),P(this,"spec",void 0),P(this,"token",void 0),P(this,"websocket",void 0),P(this,"pingpongTimer",void 0),P(this,"reconnectMode","retry"),P(this,"serviceMode",void 0),P(this,"reqId",0),P(this,"commandReqId",0),P(this,"handleWebSocketOpen",()=>{this.reconnectMode="retry",this.startPingPong()}),P(this,"handleWebSocketMessage",o=>{if(!o.data)return;const a=JSON.parse(o.data);a.requestId?this.emit("@".concat(a.requestId,"-").concat(a.sid),a):(Pe.workerEvent(this.spec.sid,{actionType:"status",serverCode:a.code,workerType:this.serviceMode===hc.TRANSCODE?1:2}),this.emit(jl.PUBLISH_STREAM_STATUS,a))}),this.spec=n,this.token=t,this.serviceMode=i,this.websocket=new R0("live-streaming",r),this.websocket.on(Ye.CONNECTED,this.handleWebSocketOpen),this.websocket.on(Ye.ON_MESSAGE,this.handleWebSocketMessage),this.websocket.on(Ye.REQUEST_NEW_URLS,(o,a)=>{Kr(this,jl.REQUEST_NEW_ADDRESS).then(o).catch(a)}),this.websocket.on(Ye.RECONNECTING,()=>{this.websocket.reconnectMode=this.reconnectMode})}init(t){return this.websocket.init(t)}async request(t,n,r,i){this.reqId+=1,t==="request"&&(this.commandReqId+=1);const o=this.commandReqId,a=this.reqId;if(!a||!this.websocket)throw new q(k.UNEXPECTED_ERROR);const s=Jp({command:t,sdkVersion:va==="4.22.0"?"0.0.1":va,seq:a,requestId:a,allocate:r,cname:this.spec.cname,appId:this.spec.appId,sid:this.spec.sid,uid:this.spec.uid.toString(),ts:Math.floor(Date.now()/1e3)},n);if(this.websocket.state==="closed")throw new q(k.WS_DISCONNECT);const c=()=>new _e((h,f)=>{this.websocket.once(Ye.CLOSED,()=>f(new q(k.WS_ABORT))),this.websocket.once(Ye.CONNECTED,h)});this.websocket.state!=="connected"&&await c(),s.clientRequest&&(s.clientRequest.workerToken=this.token);const l=new _e((h,f)=>{const g=()=>{f(new q(k.WS_ABORT))};this.websocket.once(Ye.RECONNECTING,g),this.websocket.once(Ye.CLOSED,g),this.once("@".concat(a,"-").concat(this.spec.sid),p=>{h(p)})});i&&Pe.workerEvent(this.spec.sid,Jp(Jp({},i),{},{requestId:o,actionType:"request",payload:JSON.stringify(n.clientRequest),serverCode:0,code:0}));const u=Date.now();this.websocket.sendMessage(s);let d=null;try{d=await l}catch(h){if(this.websocket.state==="closed")throw h;return await c(),await this.request(t,n,r)}return i&&Pe.workerEvent(this.spec.sid,Jp(Jp({},i),{},{requestId:o,actionType:"response",payload:JSON.stringify(d.serverResponse),serverCode:d.code,success:d.code===200,responseTime:Date.now()-u})),d.code!==200&&this.handleResponseError(d),d}tryNextAddress(){this.reconnectMode="tryNext",this.websocket.reconnect("tryNext")}close(){const t=va==="4.22.0"?"0.0.1":va;this.reqId+=1,this.websocket.state==="connected"?(this.websocket.sendMessage({command:"request",appId:this.spec.appId,cname:this.spec.cname,uid:this.spec.uid.toString(),sdkVersion:t,sid:this.spec.sid,seq:this.reqId,ts:Math.floor(Date.now()/1e3),requestId:this.reqId,clientRequest:{command:"DestroyWorker"}}),this.websocket.close(!1,!0)):this.websocket.close(!1),this.pingpongTimer&&(window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0)}handleResponseError(t){switch(t.code){case ur.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM:return void w.warning("live stream response already exists stream");case ur.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR:case ur.LIVE_STREAM_RESPONSE_BAD_STREAM:case ur.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR:return new q(k.LIVE_STREAMING_INVALID_ARGUMENT,"",{code:t.code}).throw();case ur.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST:if(t.serverResponse.command==="UnpublishStream")return;throw new q(k.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case ur.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED:return new q(k.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED,"",{code:t.code}).throw();case ur.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:{const n=new q(k.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE);return this.emit(jl.WARNING,n,t.serverResponse.url)}case ur.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN:{const n=new q(k.LIVE_STREAMING_WARN_FREQUENT_REQUEST);return this.emit(jl.WARNING,n,t.serverResponse.url)}case ur.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH:throw new q(k.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case ur.LIVE_STREAM_RESPONSE_NOT_SUPPORTED:return new q(k.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED,"",{code:t.code}).throw();case ur.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM:{const n=new q(k.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT);return this.emit(jl.WARNING,n,t.serverResponse.url)}case ur.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR:return new q(k.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:t.code}).throw();case ur.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT:throw new q(k.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream resource limit",{retry:!0,changeAddress:!0});case ur.LIVE_STREAM_RESPONSE_WORKER_LOST:case ur.LIVE_STREAM_RESPONSE_WORKER_QUIT:if(t.serverResponse.command==="UnpublishStream")return;throw new q(k.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case ur.ERROR_FAIL_SEND_MESSAGE:if(t.serverResponse.command==="UnpublishStream")return;if(t.serverResponse.command==="UpdateTranscoding"||t.serverResponse.command==="ControlStream")return new q(k.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{code:t.code}).throw();throw new q(k.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case ur.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case ur.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case ur.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case ur.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:return new q(k.LIVE_STREAMING_CDN_ERROR,"",{code:t.code}).throw()}}startPingPong(){this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(()=>{this.websocket.state==="connected"&&this.request("ping",{}).catch(By)},6e3)}}function NB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function oo(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?NB(Object(n),!0).forEach(function(r){P(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):NB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}class xme extends Pn{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ar,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ar;super(),P(this,"onLiveStreamWarning",void 0),P(this,"onLiveStreamError",void 0),P(this,"spec",void 0),P(this,"retryTimeout",1e4),P(this,"connection",void 0),P(this,"httpRetryConfig",void 0),P(this,"wsRetryConfig",void 0),P(this,"streamingTasks",new Map),P(this,"isStartingStreamingTask",!1),P(this,"taskMutex",new ri("live-streaming")),P(this,"cancelToken",eo.CancelToken.source()),P(this,"transcodingConfig",void 0),P(this,"uapResponse",void 0),P(this,"lastTaskId",1),P(this,"statusError",new Map),this.spec=t,this.httpRetryConfig=r,this.wsRetryConfig=n}async setTranscodingConfig(t){const n=oo(oo({},Ode),t);n.videoCodecProfile!==66&&n.videoCodecProfile!==77&&n.videoCodecProfile!==100&&(w.debug("[".concat(this.spec.clientId,"] set transcoding config, fix video codec profile: ").concat(n.videoCodecProfile," -> 100")),n.videoCodecProfile=100),n.transcodingUsers||(n.transcodingUsers=n.userConfigs),n.transcodingUsers&&(n.transcodingUsers=n.transcodingUsers.map(a=>oo(oo(oo({},Ade),a),{},{zOrder:a.zOrder?a.zOrder+1:1}))),function(a){On(a.width)||Zt(a.width,"config.width",0,1e4),On(a.height)||Zt(a.height,"config.height",0,1e4),On(a.videoBitrate)||Zt(a.videoBitrate,"config.videoBitrate",1,1e6),On(a.videoFrameRate)||Zt(a.videoFrameRate,"config.videoFrameRate"),On(a.lowLatency)||nl(a.lowLatency,"config.lowLatency"),On(a.audioSampleRate)||pr(a.audioSampleRate,"config.audioSampleRate",[32e3,44100,48e3]),On(a.audioBitrate)||Zt(a.audioBitrate,"config.audioBitrate",1,128),On(a.audioChannels)||pr(a.audioChannels,"config.audioChannels",[1,2,3,4,5]),On(a.videoGop)||Zt(a.videoGop,"config.videoGop"),On(a.videoCodecProfile)||pr(a.videoCodecProfile,"config.videoCodecProfile",[66,77,100]),On(a.userCount)||Zt(a.userCount,"config.userCount",0,17),On(a.backgroundColor)||Zt(a.backgroundColor,"config.backgroundColor",0,16777215),On(a.userConfigExtraInfo)||xr(a.userConfigExtraInfo,"config.userConfigExtraInfo",0,4096,!1),a.transcodingUsers&&!On(a.transcodingUsers)&&(Xc(a.transcodingUsers,"config.transcodingUsers"),a.transcodingUsers.forEach((s,c)=>{jy(s.uid),On(s.x)||Zt(s.x,"transcodingUser[".concat(c,"].x"),0,1e4),On(s.y)||Zt(s.y,"transcodingUser[".concat(c,"].y"),0,1e4),On(s.width)||Zt(s.width,"transcodingUser[".concat(c,"].width"),0,1e4),On(s.height)||Zt(s.height,"transcodingUser[".concat(c,"].height"),0,1e4),On(s.zOrder)||Zt(s.zOrder-1,"transcodingUser[".concat(c,"].zOrder"),0,100),On(s.alpha)||Zt(s.alpha,"transcodingUser[".concat(c,"].alpha"),0,1,!1)})),On(a.watermark)||q1(a.watermark,"watermark"),On(a.backgroundImage)||q1(a.backgroundImage,"backgroundImage"),a.images&&!On(a.images)&&(Xc(a.images,"config.images"),a.images.forEach((s,c)=>{q1(s,"images[".concat(c,"]"))}))}(n);const r=[];n.images&&r.push(...n.images.map(a=>oo(oo(oo({},K1),a),{},{zOrder:255}))),n.backgroundImage&&(r.push(oo(oo(oo({},K1),n.backgroundImage),{},{zOrder:0})),delete n.backgroundImage),n.watermark&&(r.push(oo(oo(oo({},K1),n.watermark),{},{zOrder:255})),delete n.watermark),n.images=r,n.transcodingUsers&&(n.userConfigs=n.transcodingUsers.map(a=>oo({},a)),n.userCount=n.transcodingUsers.length,delete n.transcodingUsers);const i=(n.userConfigs||[]).map(a=>typeof a.uid=="number"?_e.resolve(a.uid):Z9(a.uid,this.spec,this.cancelToken.token,this.httpRetryConfig));if((await _e.all(i)).forEach((a,s)=>{n.userConfigs&&n.userConfigs[s]&&(n.userConfigs[s].uid=a)}),this.transcodingConfig=n,this.connection)try{var o;const a=await this.connection.request("request",{clientRequest:{command:"UpdateTranscoding",transcodingConfig:this.transcodingConfig}},!1,{command:"UpdateTranscoding",workerType:1,requestByUser:!0,tid:Array.from(al(o=this.streamingTasks).call(o)).map(s=>s.taskId).join("#")});w.debug("[".concat(this.spec.clientId,"] update live transcoding config success, code: ").concat(a.code,", config:"),JSON.stringify(this.transcodingConfig))}catch(a){if(!a.data||!a.data.retry)throw a;a.data.changeAddress&&this.connection.tryNextAddress(),this.streamingTasks.forEach(s=>{w.warning("[".concat(this.spec.clientId,"] live streaming receive error"),a.toString(),"try to republish",s.url),this.startLiveStreamingTask(s.url,s.mode,a).then(()=>{w.debug("[".concat(this.spec.clientId,"] live streaming republish ").concat(s.url," success"))}).catch(c=>{w.error("[".concat(this.spec.clientId,"] live streaming republish failed"),s.url,c.toString()),this.onLiveStreamError&&this.onLiveStreamError(s.url,c)})})}}async startLiveStreamingTask(t,n,r){if(!this.transcodingConfig&&n===hc.TRANSCODE)throw new q(k.INVALID_OPERATION,"[LiveStreaming] no transcoding config found, can not start transcoding streaming task");const i={command:"PublishStream",ts:Date.now(),url:t,uid:this.spec.uid.toString(),autoDestroyTime:100,acceptImageTimeout:!0};w.debug("[".concat(this.spec.clientId,"] start live streaming ").concat(t,", mode: ").concat(n));const o=await this.taskMutex.lock();if(!this.connection&&r)return void o();if(this.streamingTasks.get(t)&&!r)return o(),new q(k.LIVE_STREAMING_TASK_CONFLICT).throw();try{this.connection||(this.connection=await this.connect(n))}catch(s){throw o(),s}switch(n){case hc.TRANSCODE:i.transcodingConfig=oo({},this.transcodingConfig);case hc.RAW:}this.uapResponse&&this.uapResponse.vid&&(i.vid=this.uapResponse.vid),this.isStartingStreamingTask=!0;const a=this.lastTaskId++;try{const s=new _e((l,u)=>{Lr(this.retryTimeout).then(()=>{if(r)return u(r);const d=this.statusError.get(t);return d?(this.statusError.delete(t),u(d)):void 0})}),c=await _e.race([this.connection.request("request",{clientRequest:i},!0,{url:t,command:"PublishStream",workerType:n===hc.TRANSCODE?1:2,requestByUser:!r,tid:a.toString()}),s]);this.isStartingStreamingTask=!1,w.debug("[".concat(this.spec.clientId,"] live streaming started, code: ").concat(c.code)),this.streamingTasks.set(t,{clientRequest:i,mode:n,url:t,taskId:a}),o()}catch(s){if(o(),this.isStartingStreamingTask=!1,!s.data||!s.data.retry||r)throw s;return s.data.changeAddress?(this.connection.tryNextAddress(),await this.startLiveStreamingTask(t,n,s)):await this.startLiveStreamingTask(t,n,s)}}stopLiveStreamingTask(t){return new _e((n,r)=>{const i=this.streamingTasks.get(t);if(!i||!this.connection)return new q(k.UNEXPECTED_ERROR,"can not find streaming task to stop").throw();const o=i.mode;i.abortTask=()=>{w.debug("[".concat(this.spec.clientId,"] stop live streaming success(worker exception)")),this.streamingTasks.delete(t),n()},this.connection.request("request",{clientRequest:{command:"UnpublishStream",url:i.url}},!1,{url:t,command:"UnPublishStream",workerType:o===hc.TRANSCODE?1:2,requestByUser:!0,tid:(this.lastTaskId++).toString()}).then(a=>{w.debug("[".concat(this.spec.clientId,"] stop live streaming success, code: ").concat(a.code)),this.streamingTasks.delete(t),this.streamingTasks.size===0&&(this.connection&&this.connection.close(),this.connection=void 0),n()}).catch(r)})}resetAllTask(){var t;const n=Array.from(al(t=this.streamingTasks).call(t));this.terminate();for(const r of n)this.startLiveStreamingTask(r.url,r.mode).catch(i=>{this.onLiveStreamError&&this.onLiveStreamError(r.url,i)})}terminate(){this.cancelToken&&this.cancelToken.cancel(),this.streamingTasks=new Map,this.isStartingStreamingTask=!1,this.statusError=new Map,this.cancelToken=eo.CancelToken.source(),this.uapResponse=void 0,this.connection&&this.connection.close(),this.connection=void 0}async connect(t){if(this.connection)throw new q(k.UNEXPECTED_ERROR,"live streaming connection has already connected");const n=await Kr(this,WI.REQUEST_WORKER_MANAGER_LIST,t);return this.uapResponse=n,this.connection=new Ome(n.workerToken,this.spec,this.wsRetryConfig,t),this.connection.on(jl.WARNING,(r,i)=>this.onLiveStreamWarning&&this.onLiveStreamWarning(i,r)),this.connection.on(jl.PUBLISH_STREAM_STATUS,r=>this.handlePublishStreamServer(r)),this.connection.on(jl.REQUEST_NEW_ADDRESS,(r,i)=>{if(!this.connection)return i(new q(k.UNEXPECTED_ERROR,"can not get new live streaming address list"));Kr(this,WI.REQUEST_WORKER_MANAGER_LIST,t).then(o=>{this.uapResponse=o,r(o.addressList)}).catch(i)}),await this.connection.init(n.addressList),this.connection}handlePublishStreamServer(t){const n=t.serverStatus&&t.serverStatus.url||"empty_url",r=this.streamingTasks.get(n),i=t.reason;switch(t.code){case ur.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case ur.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case ur.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case ur.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:{const a=new q(k.LIVE_STREAMING_CDN_ERROR,"",{code:t.code});if(r)return w.error(a.toString()),this.onLiveStreamError&&this.onLiveStreamError(n,a);if(!this.isStartingStreamingTask)return;this.statusError.set(n,a)}case ur.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:{const a=new q(k.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE,i);return this.onLiveStreamWarning&&this.onLiveStreamWarning(n,a)}case ur.LIVE_STREAM_RESPONSE_WORKER_LOST:case ur.LIVE_STREAM_RESPONSE_WORKER_QUIT:{var o;if(!this.connection)return;this.connection.tryNextAddress();const a=Array.from(al(o=this.streamingTasks).call(o));for(const s of a)s.abortTask?s.abortTask():(w.warning("[".concat(this.spec.clientId,"] publish stream status code"),t.code,"try to republish",s.url),this.startLiveStreamingTask(s.url,s.mode,new q(k.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:t.code})).then(()=>{w.debug("[".concat(this.spec.clientId,"] republish live stream success"),s.url)}).catch(c=>{w.error(c.toString()),this.onLiveStreamError&&this.onLiveStreamError(s.url,c)}));return}}}hasUrl(t){return this.streamingTasks.has(t)}}const Nme={name:"LiveStreaming",create:function(e){return new xme(e.joinInfo,e.websocketRetryConfig||ar,e.httpRetryConfig||ar)}};function Pme(e){let t=PB();return function(n,r){let i=n.appId;i!==void 0&&(Yt(r,10),cc(r,i));let o=n.cid;o!==void 0&&(Yt(r,16),Yt(r,o));let a=n.cname;a!==void 0&&(Yt(r,26),cc(r,a));let s=n.deviceId;s!==void 0&&(Yt(r,34),cc(r,s));let c=n.elapse;c!==void 0&&(Yt(r,40),Dl(r,c));let l=n.fileSize;l!==void 0&&(Yt(r,48),Dl(r,wh(l)));let u=n.height;u!==void 0&&(Yt(r,56),Dl(r,wh(u)));let d=n.jpg;d!==void 0&&(Yt(r,66),Yt(r,d.length),function(z,L){let D=Ep(z,L.length);z.bytes.set(L,D)}(r,d));let h=n.networkType;h!==void 0&&(Yt(r,72),Dl(r,wh(h)));let f=n.osType;f!==void 0&&(Yt(r,80),Dl(r,wh(f)));let g=n.requestId;g!==void 0&&(Yt(r,90),cc(r,g));let p=n.sdkVersion;p!==void 0&&(Yt(r,98),cc(r,p));let m=n.sequence;m!==void 0&&(Yt(r,104),Dl(r,wh(m)));let _=n.sid;_!==void 0&&(Yt(r,114),cc(r,_));let E=n.timestamp;E!==void 0&&(Yt(r,120),Dl(r,E));let S=n.uid;S!==void 0&&(Yt(r,128),Yt(r,S));let C=n.vid;C!==void 0&&(Yt(r,136),Yt(r,C));let b=n.width;b!==void 0&&(Yt(r,144),Dl(r,wh(b)));let T=n.service;T!==void 0&&(Yt(r,152),Yt(r,T));let R=n.callbackData;R!==void 0&&(Yt(r,162),cc(r,R));let A=n.jpgEncryption;A!==void 0&&(Yt(r,168),Yt(r,A));let O=n.requestType;O!==void 0&&(Yt(r,176),Yt(r,O));let x=n.scorePorn;x!==void 0&&(Yt(r,185),JT(r,x));let M=n.scoreSexy;M!==void 0&&(Yt(r,193),JT(r,M));let $=n.scoreNeutral;$!==void 0&&(Yt(r,201),JT(r,$));let U=n.scene;U!==void 0&&(Yt(r,208),Yt(r,U));let V=n.ossFilePrefix;V!==void 0&&(Yt(r,218),cc(r,V));let W=n.serviceVendor;if(W!==void 0)for(let z of W){Yt(r,226);let L=PB();kme(z,L),Yt(r,L.limit),Bme(r,L),Ume(L)}}(e,t),function(n){let r=n.bytes,i=n.limit;return r.length===i?r:r.subarray(0,i)}(t)}function Dme(e){return function(n){let r={};e:for(;!Yz(n);){let i=mc(n);switch(i>>>3){case 0:break e;case 1:r.code=mc(n);break;case 2:r.msg=Xz(n,mc(n));break;case 3:{let o=Mme(n);r.data=Lme(n),n.limit=o;break}default:Kz(n,7&i)}}return r}({bytes:t=e,offset:0,limit:t.length});var t}function Lme(e){let t={};e:for(;!Yz(e);){let n=mc(e);switch(n>>>3){case 0:break e;case 1:t.requestId=Xz(e,mc(e));break;case 2:t.requestType=mc(e)>>>0;break;case 3:t.scorePorn=XT(e);break;case 4:t.scoreSexy=XT(e);break;case 5:t.scoreNeutral=XT(e);break;case 6:t.requestScene=mc(e)>>>0;break;case 7:t.scene=mc(e)>>>0;break;default:Kz(e,7&n)}}return t}function kme(e,t){let n=e.service;n!==void 0&&(Yt(t,8),Yt(t,n));let r=e.vendor;r!==void 0&&(Yt(t,16),Yt(t,r));let i=e.token;i!==void 0&&(Yt(t,26),cc(t,i));let o=e.callbackUrl;o!==void 0&&(Yt(t,34),cc(t,o))}function Mme(e){let t=mc(e),n=e.limit;return e.limit=e.offset+t,n}function Kz(e,t){switch(t){case 0:for(;128&Jz(e););break;case 2:YT(e,mc(e));break;case 5:YT(e,4);break;case 1:YT(e,8);break;default:throw new Error("Unimplemented type: "+t)}}let Fme=new Float32Array(1);new Uint8Array(Fme.buffer);let PN=new Float64Array(1),uo=new Uint8Array(PN.buffer);function wh(e){return{low:e|=0,high:e>>31,unsigned:e>=0}}let qz=[];function PB(){const e=qz.pop();return e?(e.offset=e.limit=0,e):{bytes:new Uint8Array(64),offset:0,limit:0}}function Ume(e){qz.push(e)}function YT(e,t){if(e.offset+t>e.limit)throw new Error("Skip past limit");e.offset+=t}function Yz(e){return e.offset>=e.limit}function Ep(e,t){let n=e.bytes,r=e.offset,i=e.limit,o=r+t;if(o>n.length){let a=new Uint8Array(2*o);a.set(n),e.bytes=a}return e.offset=o,o>i&&(e.limit=o),r}function DN(e,t){let n=e.offset;if(n+t>e.limit)throw new Error("Read past limit");return e.offset+=t,n}function Xz(e,t){let n=DN(e,t),r=String.fromCharCode,i=e.bytes,o="�",a="";for(let s=0;s<t;s++){let c,l,u,d,h=i[s+n];128&h?(224&h)==192?s+1>=t?a+=o:(c=i[s+n+1],(192&c)!=128?a+=o:(d=(31&h)<<6|63&c,d<128?a+=o:(a+=r(d),s++))):(240&h)==224?s+2>=t?a+=o:(c=i[s+n+1],l=i[s+n+2],(49344&(c|l<<8))!=32896?a+=o:(d=(15&h)<<12|(63&c)<<6|63&l,d<2048||d>=55296&&d<=57343?a+=o:(a+=r(d),s+=2))):(248&h)==240?s+3>=t?a+=o:(c=i[s+n+1],l=i[s+n+2],u=i[s+n+3],(12632256&(c|l<<8|u<<16))!=8421504?a+=o:(d=(7&h)<<18|(63&c)<<12|(63&l)<<6|63&u,d<65536||d>1114111?a+=o:(d-=65536,a+=r(55296+(d>>10),56320+(1023&d)),s+=3))):a+=o:a+=r(h)}return a}function cc(e,t){let n=t.length,r=0;for(let a=0;a<n;a++){let s=t.charCodeAt(a);s>=55296&&s<=56319&&a+1<n&&(s=(s<<10)+t.charCodeAt(++a)-56613888),r+=s<128?1:s<2048?2:s<65536?3:4}Yt(e,r);let i=Ep(e,r),o=e.bytes;for(let a=0;a<n;a++){let s=t.charCodeAt(a);s>=55296&&s<=56319&&a+1<n&&(s=(s<<10)+t.charCodeAt(++a)-56613888),s<128?o[i++]=s:(s<2048?o[i++]=s>>6&31|192:(s<65536?o[i++]=s>>12&15|224:(o[i++]=s>>18&7|240,o[i++]=s>>12&63|128),o[i++]=s>>6&63|128),o[i++]=63&s|128)}}function Bme(e,t){let n=Ep(e,t.limit),r=e.bytes,i=t.bytes;for(let o=0,a=t.limit;o<a;o++)r[o+n]=i[o]}function Jz(e){return e.bytes[DN(e,1)]}function DB(e,t){let n=Ep(e,1);e.bytes[n]=t}function XT(e){let t=DN(e,8),n=e.bytes;return uo[0]=n[t++],uo[1]=n[t++],uo[2]=n[t++],uo[3]=n[t++],uo[4]=n[t++],uo[5]=n[t++],uo[6]=n[t++],uo[7]=n[t++],PN[0]}function JT(e,t){let n=Ep(e,8),r=e.bytes;PN[0]=t,r[n++]=uo[0],r[n++]=uo[1],r[n++]=uo[2],r[n++]=uo[3],r[n++]=uo[4],r[n++]=uo[5],r[n++]=uo[6],r[n++]=uo[7]}function mc(e){let t,n=0,r=0;do t=Jz(e),n<32&&(r|=(127&t)<<n),n+=7;while(128&t);return r}function Yt(e,t){for(t>>>=0;t>=128;)DB(e,127&t|128),t>>>=7;DB(e,t)}function Dl(e,t){let n=t.low>>>0,r=(t.low>>>28|t.high<<4)>>>0,i=t.high>>>24,o=i===0?r===0?n<16384?n<128?1:2:n<1<<21?3:4:r<16384?r<128?5:6:r<1<<21?7:8:i<128?9:10,a=Ep(e,o),s=e.bytes;switch(o){case 10:s[a+9]=i>>>7&1;case 9:s[a+8]=o!==9?128|i:127&i;case 8:s[a+7]=o!==8?r>>>21|128:r>>>21&127;case 7:s[a+6]=o!==7?r>>>14|128:r>>>14&127;case 6:s[a+5]=o!==6?r>>>7|128:r>>>7&127;case 5:s[a+4]=o!==5?128|r:127&r;case 4:s[a+3]=o!==4?n>>>21|128:n>>>21&127;case 3:s[a+2]=o!==3?n>>>14|128:n>>>14&127;case 2:s[a+1]=o!==2?n>>>7|128:n>>>7&127;case 1:s[a]=o!==1?128|n:127&n}}function LB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}const $me=new Map([["moderation",1],["supervise",2]]);function kB(e){return{low:e|=0,high:e>>31,unsigned:e>=0}}class Vme extends Pn{get connectionState(){return this._connectionState}set connectionState(t){if(this._connectionState===t)return;const n=this._connectionState;this._connectionState=t,this.emit(Tr.CONNECTION_STATE_CHANGE,n,t)}get inspectType(){return this._inspectType}set inspectType(t){var n;this._inspectMode=js(n=t.map(r=>$me.get(r)||0)).call(n,(r,i)=>r+i),this._inspectType=t}get quality(){return this._quality}set quality(t){this._quality=t>1?1:t<.1?.1:t,this.qualityTimer&&(window.clearTimeout(this.qualityTimer),this.qualityTimer=null),this._quality>=1||(this.qualityTimer=window.setTimeout(()=>{this.quality=this._quality/this.qualityRatio},6e4))}constructor(t){super(),P(this,"name","AgoraRTCVideoContentInspect"),P(this,"_connectionState",Wa.CONNECTING),P(this,"_innerConnectionState",void 0),P(this,"sequence",0),P(this,"inspectStartTime",void 0),P(this,"workerManagerConnection",void 0),P(this,"workerConnection",void 0),P(this,"workerMessageLengthLimit",void 0),P(this,"inspectIntervalMinimum",void 0),P(this,"qualityRatio",void 0),P(this,"_connectInfo",void 0),P(this,"_cancelTokenSource",eo.CancelToken.source()),P(this,"_retryConfig",void 0),P(this,"wmSequence",0),P(this,"inspectInterval",void 0),P(this,"inspectTimer",null),P(this,"ossFilePrefix",void 0),P(this,"extraInfo",void 0),P(this,"_inspectType",void 0),P(this,"_inspectMode",void 0),P(this,"_quality",1),P(this,"qualityTimer",null),P(this,"_inspectId",void 0),P(this,"_needWorkUrlOnly",!1),P(this,"inspectImage",()=>{if(this.connectionState!==Wa.CONNECTED)throw new q(k.OPERATION_ABORTED,"content inspect service connection status is ".concat(this.connectionState));this.inspectTimer&&(window.clearInterval(this.inspectTimer),this.inspectTimer=null),this.inspectTimer=window.setInterval(()=>{this.connectionState===Wa.CONNECTED?this.requestToInspectImage():w.debug("[".concat(this._inspectId,"] Inspect State is not connected , "),this.connectionState)},this.inspectInterval<this.inspectIntervalMinimum?this.inspectIntervalMinimum:this.inspectInterval),this.requestToInspectImage()}),this._inspectId=cn(5,"inspect-"),this.workerMessageLengthLimit=H("VIDEO_INSPECT_WORKER_MESSAGE_LENGTH_LIMIT"),this.inspectIntervalMinimum=H("VIDEO_INSPECT_INTERVAL_MINIMUM"),this.qualityRatio=H("VIDEO_INSPECT_QUALITY_RATIO"),this.inspectInterval=t.interval,this.ossFilePrefix=t.ossFilePrefix,this.extraInfo=t.extraInfo,this.inspectType=t.inspectType,this.inspectStartTime=Number(Date.now()),this.workerManagerConnection=new R0("worker-manager-"+this._inspectId,ar),this.on(Tr.STATE_CHANGE,(n,r)=>{this._innerConnectionState=n,w.debug("[".concat(this._inspectId,"] Inspect operation :").concat(Ma[n]," ").concat(r||""))}),this.handleWorkerManagerEvents(),this.workerConnection=new R0("worker-"+this._inspectId,ar),this.handleWorkerEvents()}async init(t,n){this.emit(Tr.STATE_CHANGE,Ma.CONNECT_AP),this._connectInfo=t;const r=this._cancelTokenSource.token;return this._retryConfig=n,new _e((i,o)=>{this.on(Tr.CONNECTION_STATE_CHANGE,(a,s)=>{s===Wa.CONNECTED&&i()}),this.requestAP(t,r,n).then(a=>{this.connectWorkerManager(a)}).catch(a=>{o(a)})})}async requestAP(t,n,r){const i=H("WEBCS_DOMAIN").map(s=>"https://".concat(s,"/api/v1")),o=await function(s,c,l,u){let{appId:d,areaCode:h,cname:f,sid:g,token:p,uid:m}=c;Cf++;const _="image_moderation_api",E={service_name:_,json_body:JSON.stringify({appId:d,areaCode:h,cname:f,command:"allocateEdge",requestId:Cf,seq:Cf,sid:g,token:p,ts:Date.now(),uid:m+""})};let S,C,b=s[0];return qs(async()=>{S=Date.now();const T=await Ys(b,{data:E,cancelToken:l,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"},params:{action:"wrtc_gateway"}});if(C=Date.now()-S,T.code!==0){const x=new q(k.UNEXPECTED_RESPONSE,"image inspect ap error, code"+T.code,{retry:!0,responseTime:C});throw w.error(x.toString()),x}const R=JSON.parse(T.json_body);if(R.code!==200){const x=new q(k.UNEXPECTED_RESPONSE,"image inspect ap error, code: ".concat(R.code,", reason: ").concat(R.reason),{code:R.code,responseTime:C});throw w.error(x.toString()),x}if(!R.servers||!Array.isArray(R.servers)||R.servers.length===0){const x=new q(k.UNEXPECTED_RESPONSE,"image inspect ap empty server",{code:R.code,responseTime:C});throw w.error(x.toString()),x}const A=H("VIDEO_INSPECT_WORKER_MANAGER_HOST"),O=H("VIDEO_INSPECT_WORKER_MANAGER_PORT");return{addressList:R.servers.map(x=>{let{address:M,wss:$}=x;if(M&&$)return"wss://".concat(M.replace(/\./g,"-"),".").concat(A,":").concat(O||$)}).filter(x=>!!x),workerToken:R.workerToken,vid:R.vid,responseTime:C}},(T,R)=>(Pe.apworkerEvent(g,{success:!0,sc:200,serviceName:_,responseDetail:JSON.stringify(T.addressList),firstSuccess:R===0,responseTime:C,serverIp:s[R%s.length]}),!1),(T,R)=>(Pe.apworkerEvent(g,{success:!1,sc:T.data&&T.data.code||200,serviceName:_,responseTime:C,serverIp:s[R%s.length]}),!!(T.code!==k.OPERATION_ABORTED&&T.code!==k.UNEXPECTED_RESPONSE||T.data&&T.data.retry)&&(b=s[(R+1)%s.length],!0)),u)}(i,t,n,r);this.emit(Tr.STATE_CHANGE,Ma.AP_CONNECTED);const{addressList:a}=o;return this.wmSequence++,a}async connectWorkerManager(t){let n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];this._needWorkUrlOnly=n,this.emit(Tr.STATE_CHANGE,Ma.CONNECT_WORKER_MANAGER),await this.workerManagerConnection.init(t,1e4)}async connectWorker(t){await this.workerConnection.init([t])}handleWorkerManagerEvents(){this.workerManagerConnection.on(Ye.CONNECTED,async()=>{this.emit(Tr.STATE_CHANGE,Ma.WORKER_MANAGER_CONNECTED,this.workerManagerConnection.url),this.workerManagerConnection.sendMessage({appId:this._connectInfo.appId,cname:this._connectInfo.cname,uid:this._connectInfo.uid+"",sdkVersion:"4.22.0",sid:this._connectInfo.sid,seq:this.wmSequence,ts:Number(Date.now()),requestId:Math.floor(1e12*Math.random()),allocate:!0,clientRequest:{command:"join"}},!0)}),this.workerManagerConnection.on(Ye.CLOSED,()=>{this._innerConnectionState<Ma.GET_WORKER_MANAGER_RESPONSE&&w.debug("[".concat(this._inspectId,"] Inspect worker manager is closed before connecting worker"))}),this.workerManagerConnection.on(Ye.FAILED,()=>{this._innerConnectionState<Ma.GET_WORKER_MANAGER_RESPONSE&&w.debug("[".concat(this._inspectId,"] Connecting inspect worker manager is failed before connecting worker"))}),this.workerManagerConnection.on(Ye.RECONNECTING,()=>{this._innerConnectionState<Ma.GET_WORKER_MANAGER_RESPONSE&&w.debug("[".concat(this._inspectId,"] Inspect worker manager is reconnecting before connecting worker"))}),this.workerManagerConnection.on(Ye.ON_MESSAGE,async t=>{this.emit(Tr.STATE_CHANGE,Ma.GET_WORKER_MANAGER_RESPONSE);const n=this.workerManagerConnection.url;this.workerManagerConnection.close();const r=JSON.parse(t.data);if(r.code!==200)throw w.error("[".concat(this._inspectId,"] Unexpected code ").concat(r.code," from worker manager")),new q(k.UNEXPECTED_RESPONSE,"response code of worker is unexpected",r);if(!(r.serverResponse&&r.serverResponse.portWss&&n))throw w.error("[".concat(this._inspectId,"] Unexpected content from worker manager : ").concat(JSON.stringify(r))),new q(k.UNEXPECTED_RESPONSE,"response content of worker is unexpected",r);{const i=H("VIDEO_INSPECT_WORKER_PORT")||r.serverResponse.portWss,o=n.replace(/:\d+\/?$/,":".concat(i));this.emit(Tr.STATE_CHANGE,Ma.CONNECT_WORKER,o),this._needWorkUrlOnly?this.emit(Tr.REQUEST_NEW_WORKER_URL,o):await this.connectWorker(o)}}),this.workerManagerConnection.on(Ye.WILL_RECONNECT,(t,n,r)=>{r(t)}),this.workerManagerConnection.on(Ye.REQUEST_NEW_URLS,(t,n)=>{this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then(t).catch(n)})}handleWorkerEvents(){this.workerConnection.on(Ye.CONNECTED,async()=>{this.emit(Tr.STATE_CHANGE,Ma.WORKER_CONNECTED,this.workerConnection.url),this.connectionState=Wa.CONNECTED}),this.workerConnection.on(Ye.ON_MESSAGE,async t=>{if(t.data instanceof ArrayBuffer){const r=Dme(new Uint8Array(t.data));if(H("SHOW_VIDEO_INSPECT_WORKER_MESSAGE")&&w.debug("[".concat(this._inspectId,"] Response message for worker of inspect content "),JSON.stringify(r)),r.code===200){if(Array.isArray(this.inspectType)&&this.inspectType.length===1&&this.inspectType[0]==="supervise")return void this.emit(Tr.INSPECT_RESULT,void 0,void 0);if(r.data&&r.data.scorePorn&&r.data.scoreSexy&&r.data.scoreNeutral){var n;const i={porn:r.data.scorePorn,sexy:r.data.scoreSexy,neutral:r.data.scoreNeutral},o=js(n=Object.keys(i)).call(n,(s,c)=>i[s]>i[c]?s:c,"porn"),a=Object.keys(i).find(s=>s===o);this.emit(Tr.INSPECT_RESULT,a)}else this.emit(Tr.INSPECT_RESULT,void 0,new q(k.UNEXPECTED_RESPONSE,r.code+"","There is an unexpected data on message"))}else this.emit(Tr.INSPECT_RESULT,void 0,new q(k.UNEXPECTED_RESPONSE,r.code+"",r.msg))}else w.error("[".concat(this._inspectId,"] Unexpected message type from worker")),this.emit(Tr.INSPECT_RESULT,void 0,new q(k.UNEXPECTED_RESPONSE,"invalid worker message type"))}),this.workerConnection.on(Ye.CLOSED,()=>{this.connectionState=Wa.CLOSED}),this.workerConnection.on(Ye.FAILED,()=>{this.connectionState=Wa.CLOSED}),this.workerConnection.on(Ye.RECONNECTING,()=>{this.connectionState=this.connectionState===Wa.CONNECTED?Wa.RECONNECTING:Wa.CONNECTING}),this.workerConnection.on(Ye.WILL_RECONNECT,(t,n,r)=>{t==="recover"&&r(t),r("tryNext")}),this.workerConnection.on(Ye.REQUEST_NEW_URLS,(t,n)=>{this.workerManagerConnection.close(),this.once(Tr.REQUEST_NEW_WORKER_URL,r=>{t([r])}),this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then(r=>{this.connectWorkerManager(r,!0)}).catch(r=>{n(r)})})}async requestToInspectImage(){this.sequence++;const t=ga(this,Tr.CLIENT_LOCAL_VIDEO_TRACK),n={appId:this._connectInfo.appId,cname:this._connectInfo.cname,cid:this._connectInfo.cid,sid:this._connectInfo.sid,uid:this._connectInfo.uid,vid:this._connectInfo.vid};if(t){if(!t.isPlaying)return void this.emit(Tr.INSPECT_RESULT,void 0,new q(k.INVALID_OPERATION,"Only the track being played can be inspected"));const r=await this.generateRequestData(t,n);this.workerConnection.sendMessage(r,!0,!0)}else this.emit(Tr.INSPECT_RESULT,void 0,new q(k.INVALID_OPERATION,"Only the track being published can be inspected"))}async generateRequestData(t,n){let{appId:r,cname:i,cid:o,vid:a,sid:s,uid:c}=n;const l=Date.now(),u=await t.getCurrentFrameImage("image/jpeg",this.quality),d=await L9(u,r,i),h=this.sequence+"-"+o+"-"+c+"-"+l+"-"+cn(12,""),f={appId:r,cid:o,cname:i,deviceId:"",elapse:kB(Number(l-this.inspectStartTime)),fileSize:d.byteLength,jpgEncryption:2,height:u.height,width:u.width,jpg:d,networkType:6,osType:7,requestId:h,sdkVersion:"4.22.0",sequence:this.sequence,sid:s,timestamp:kB(l),uid:c,vid:a,service:this._inspectMode,callbackData:this.extraInfo,ossFilePrefix:this.ossFilePrefix};this.extraInfo===void 0&&delete f.callbackData,this.ossFilePrefix===void 0&&delete f.ossFilePrefix;const g=Pme(f);if(g.byteLength<this.workerMessageLengthLimit){if(H("SHOW_VIDEO_INSPECT_WORKER_MESSAGE")){const p=function(m){for(var _=1;_<arguments.length;_++){var E=arguments[_]!=null?arguments[_]:{};_%2?LB(Object(E),!0).forEach(function(S){P(m,S,E[S])}):Object.getOwnPropertyDescriptors?Object.defineProperties(m,Object.getOwnPropertyDescriptors(E)):LB(Object(E)).forEach(function(S){Object.defineProperty(m,S,Object.getOwnPropertyDescriptor(E,S))})}return m}({},f);delete p.jpg,w.debug("[".concat(this._inspectId,"] Request message for worker of inspect content "),JSON.stringify(p))}return g}{const p=this.quality*this.qualityRatio;return this.quality=p,await this.generateRequestData(t,{appId:r,cname:i,cid:o,vid:a,sid:s,uid:c})}}close(){this._cancelTokenSource.cancel(),this._cancelTokenSource=eo.CancelToken.source(),this.workerManagerConnection&&this.workerManagerConnection.close(),this.workerConnection&&this.workerConnection.close(),this.inspectTimer&&window.clearInterval(this.inspectTimer),this.inspectTimer=null,this.connectionState=Wa.CLOSED,this.emit(Tr.STATE_CHANGE,Ma.CLOSED)}}const jme={name:"ContentInspect",create:function(e){let{config:t}=e;return function(n){if(!n)throw new q(k.INVALID_PARAMS,"inspectConfig is necessary.");if(!n.inspectType||!Array.isArray(n.inspectType))throw new q(k.INVALID_PARAMS,"inspectConfig.inspectType is necessary and is an instance of Array.");{const r=[...new Set(n.inspectType)];r.forEach(i=>{var o;if(!Ce(o=["supervise","moderation"]).call(o,i))throw new q(k.INVALID_PARAMS,"".concat(i," is not a valid inspect type."))}),n.inspectType=r}if(n&&n.extraInfo&&n.extraInfo.length>1024)throw new q(k.INVALID_PARAMS,"inspectConfig.extraInfo length cannot exceed 1024 bytes")}(t),new Vme(t)}};Qt("PROCESS_ID","process-".concat(cn(8,""),"-").concat(cn(4,""),"-").concat(cn(4,""),"-").concat(cn(4,""),"-").concat(cn(12,""))),function(){let e;try{e=window.localStorage.getItem("websdk_ng_global_parameter")}catch(t){return void w.error("Error loading sdk config",t.message)}if(e)try{const t=JSON.parse(window.atob(e)),n=Date.now();w.debug("Loading global parameters from cache",t),Object.keys(t).forEach(r=>{if(Object.prototype.hasOwnProperty.call(Wn,r)){const{value:i,expires:o}=t[r];if(o&&o<=n)return;ql[r]=i,Wn[r]=i}})}catch(t){w.error("Error loading mutableParamsCache: ".concat(e),t.message)}}(),Array.isArray(ql.AREAS)&&ql.AREAS.length>0&&CN(ql.AREAS,!0);const MB=(e,t,n)=>{w.debug("setParameter key:".concat(e,", value:").concat(JSON.stringify(t))),Qt(e,t,n)};Yp(Ame,!1),Yp(Nme,!1),Yp(hpe,!1),Yp(jme,!1),Yp(Rme,!1);const mn=function(e){const t=new Pn,n=e,r={getListeners:t.getListeners.bind(t),on:(i,o)=>(function(a,s){a===fc.SECURITY_POLICY_VIOLATION&&Tz(s,!0)}(i,o),t.on.bind(t)(i,o)),addListener:t.addListener.bind(t),once:t.once.bind(t),off:t.off.bind(t),removeAllListeners:t.removeAllListeners.bind(t),emit:t.emit.bind(t),safeEmit:t.safeEmit.bind(t)};return lB(lB({},n),r)}({__TRACK_LIST__:Bh,VERSION:va,BUILD:lN,ESM_BUNDLER:!1,ESM:!0,UMD:!1,DEV:!1,setParameter:MB,getParameter:H,getSupportedCodec:async function(){let e={audio:[],video:[]};try{let t=new RTCPeerConnection;const n=await async function(r){let i;return It().supportUnifiedPlan?(r.addTransceiver("video",{direction:"recvonly"}),r.addTransceiver("audio",{direction:"recvonly"}),i=(await r.createOffer()).sdp):i=(await r.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0})).sdp,i}(t);if(!n)return e;t.close(),t=null,e=function(r){const i={video:[],audio:[]};return r.match(/ VP8/i)&&i.video.push("VP8"),r.match(/ VP9/i)&&i.video.push("VP9"),r.match(/ AV1/i)&&i.video.push("AV1"),r.match(/ H264/i)&&i.video.push("H264"),r.match(/ H265/i)&&i.video.push("H265"),r.match(/ opus/i)&&i.audio.push("OPUS"),r.match(/ PCMU/i)&&i.audio.push("PCMU"),r.match(/ PCMA/i)&&i.audio.push("PCMA"),r.match(/ G722/i)&&i.audio.push("G722"),i}(n)}catch(t){throw new q(k.CREATE_OFFER_FAILED,t.toString&&t.toString()).print()}return e},checkSystemRequirements:function(){const e=Pe.reportApiInvoke(null,{name:dr.CHECK_SYSTEM_REQUIREMENTS,options:[],tag:kn.TRACER});let t=!1;try{const o=window.RTCPeerConnection,a=navigator.mediaDevices&&navigator.mediaDevices.getUserMedia,s=window.WebSocket;t=!!(o&&a&&s),t&&iN()&&$7(75)&&new o().close()}catch(o){return w.error("check system requirement failed: ",o),!1}let n=!1;const r=Tt();r.name===Kt.CHROME&&Number(r.version)>=58&&(As.engine.name!=="WebKit"||function(){const o=Tt();if(tS()){if(o.os===yr.MAC_OS)return!0;if(o.os===yr.IOS){const a=As.os.version&&As.os.version.split(".");if(a&&Number(a[0])===14&&a[1]&&Number(a[1])>=3||a&&Number(a[0])>14)return!0}}return!1}())&&(n=!0),(r.name===Kt.FIREFOX&&Number(r.version)>=56||r.name===Kt.OPERA&&Number(r.version)>=45||r.name===Kt.SAFARI&&Number(r.version)>=11||r.name==="WebKit"&&(Li()||rs())&&r.osVersion&&Number(r.osVersion.split(".")[0])>=11||z7()||Tt().name===Kt.QQ)&&(n=!0),w.debug("checkSystemRequirements, api:",t,"browser",n);const i=t&&n;return e.onSuccess(i),i},getDevices:function(e){return qo.enumerateDevices(!0,!0,e)},getMicrophones:function(e){return qo.getRecordingDevices(e)},getCameras:function(e){return qo.getCamerasDevices(e)},getElectronScreenSources:T9,getPlaybackDevices:function(e){return qo.getSpeakers(e)},createClient:function(){var e;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{codec:"vp8",audioCodec:"opus",mode:"rtc"};const n=Pe.reportApiInvoke(null,{name:dr.CREATE_CLIENT,options:[t],tag:kn.TRACER});try{(function(r){pr(r.codec,"config.codec",["vp8","vp9","av1","h264","h265"]),pr(r.mode,"config.mode",["rtc","live","p2p"]),r.audioCodec!==void 0&&pr(r.audioCodec,"config.audioCodec",["opus","pcmu","pcma","g722"]),r.proxyServer!==void 0&&xr(r.proxyServer,"config.proxyServer",1,1e4),r.turnServer!==void 0&&Y7(r.turnServer),r.httpRetryConfig!==void 0&&wM(r.httpRetryConfig),r.websocketRetryConfig!==void 0&&wM(r.websocketRetryConfig)})(t)}catch(r){throw n.onError(r),r}return(j7(16,0,!0)||H7(16,0,!0))&&(t.codec==="vp9"&&(t.codec="vp8",w.debug("browser not support vp9, force use vp8")),Qt("UNSUPPORTED_VIDEO_CODEC",["vp9"])),t.audioCodec===void 0&&(t.audioCodec="opus"),n.onSuccess(),new fpe(ws(ws({forceWaitGatewayResponse:!0},t),{},{role:Ce(e=["rtc","p2p"]).call(e,t.mode)?"host":t.role||"audience"}))},createCameraVideoTrack:async function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=H("CAMERA_CAPTURE_CONFIG"),n=Pe.reportApiInvoke(null,{tag:kn.TRACER,name:dr.CREATE_CAM_VIDEO_TRACK,options:[bn({},e),t]});t&&(e.encoderConfig=t);const r=oS(e),i=cn(8,"track-cam-");let o=null;w.info("start create camera video track with config",JSON.stringify(e),"trackId",i);try{o=(await zo({video:r},i)).getVideoTracks()[0]||null}catch(s){throw n.onError(s),s}if(!o){const s=new Q(k.UNEXPECTED_ERROR,"can not find track in media stream");return n.onError(s),s.throw(w)}e.optimizationMode&&vT(i,o,e,_c(e.encoderConfig));const a=new eA(o,e,r,e.scalabiltyMode?Fv(e.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},e.optimizationMode,i);return n.onSuccess(a.getTrackId()),w.info("create camera video success, trackId:",i),a},createCustomVideoTrack:function(e){const t=Pe.reportApiInvoke(null,{tag:kn.TRACER,name:dr.CREATE_CUSTOM_VIDEO_TRACK,options:[e]}),n=new hn(e.mediaStreamTrack,{width:e.width,height:e.height,frameRate:e.frameRate,bitrateMax:e.bitrateMax,bitrateMin:e.bitrateMin},e.scalabiltyMode?Fv(e.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},e.optimizationMode,cn(8,"track-cus-"),[gn.CUSTOM_TRACK]);return t.onSuccess(n.getTrackId()),w.info("create custom video track success with config",e,"trackId",n.getTrackId()),n},createScreenVideoTrack:async function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"disable";const n=Pe.reportApiInvoke(null,{tag:kn.TRACER,name:dr.CREATE_SCREEN_VIDEO_TRACK,options:[bn({},e),t]});e.encoderConfig?typeof e.encoderConfig=="string"||e.encoderConfig.width&&e.encoderConfig.height||(e.encoderConfig.width={max:1920},e.encoderConfig.height={max:1080}):e.encoderConfig="1080p_2";const r=function(u){const d={};u.screenSourceType&&(d.mediaSource=u.screenSourceType),u.extensionId&&ou()&&(d.extensionId=u.extensionId);const{displaySurface:h,selfBrowserSurface:f,surfaceSwitching:g,systemAudio:p}=u;(UI(107)||SM(107)||yM(93))&&(h&&(pr(h,"displaySurface",["browser","window","monitor"]),d.displaySurface=h),f?(pr(f,"selfBrowserSurface",["exclude","include"]),d.selfBrowserSurface=f):d.selfBrowserSurface="include",g&&(pr(g,"surfaceSwitching",["exclude","include"]),d.surfaceSwitching=g)),(UI(105)||SM(105)||yM(91))&&p&&(pr(p,"systemAudio",["exclude","include"]),d.systemAudio=p),u.electronScreenSourceId&&(d.sourceId=u.electronScreenSourceId);const m=u.encoderConfig?fT(u.encoderConfig):null;return d.mandatory={chromeMediaSource:"desktop",maxWidth:m?m.width:void 0,maxHeight:m?m.height:void 0},m&&(m.frameRate&&(typeof m.frameRate=="number"?(d.mandatory.maxFrameRate=m.frameRate,d.mandatory.minFrameRate=m.frameRate):(d.mandatory.maxFrameRate=m.frameRate.max||m.frameRate.ideal||m.frameRate.exact||void 0,d.mandatory.minFrameRate=m.frameRate.min||m.frameRate.ideal||m.frameRate.exact||void 0),d.frameRate=m.frameRate),m.width&&(d.width=m.width),m.height&&(d.height=m.height)),d}(e),i=cn(8,"track-scr-v-");let o=null,a=null;const s=It();if(!s.supportShareAudio&&t==="enable"){const u=new Q(k.NOT_SUPPORTED,"your browser or platform is not support share-screen with audio");return n.onError(u),u.throw(w)}w.info("start create screen video track with config",e,"withAudio",t,"trackId",i);try{const u=await zo({screen:r,screenAudio:t==="auto"?s.supportShareAudio:t==="enable"},i);o=u.getVideoTracks()[0]||null,a=u.getAudioTracks()[0]||null}catch(u){throw n.onError(u),u}if(!o){const u=new Q(k.UNEXPECTED_ERROR,"can not find track in media stream");return n.onError(u),u.throw(w)}if(!a&&t==="enable"){o&&o.stop();const u=new Q(k.SHARE_AUDIO_NOT_ALLOWED);return n.onError(u),u.throw(w)}e.optimizationMode||(e.optimizationMode="detail"),e.optimizationMode&&(vT(i,o,e,e.encoderConfig&&fT(e.encoderConfig)||void 0),e.encoderConfig&&typeof e.encoderConfig!="string"&&(e.encoderConfig.bitrateMin=e.encoderConfig.bitrateMax));const c=new hn(o,e.encoderConfig?fT(e.encoderConfig):{},e.scalabiltyMode?Fv(e.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},e.optimizationMode,i,[gn.SCREEN_TRACK]);if(!a)return n.onSuccess(c.getTrackId()),w.info("create screen video track success","video:",c.getTrackId()),c;const l=new Ln(a,void 0,cn(8,"track-scr-a-"),!1);return n.onSuccess([c.getTrackId(),l.getTrackId()]),w.info("create screen video track success","video:",c.getTrackId(),"audio:",l.getTrackId()),[c,l]},createMicrophoneAndCameraTracks:async function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=H("CAMERA_CAPTURE_CONFIG"),r=Pe.reportApiInvoke(null,{tag:kn.TRACER,name:dr.CREATE_MIC_AND_CAM_TRACKS,options:[e,t,n]});n&&(t.encoderConfig=n);const i=oS(t),o=OF(e),a=cn(8,"track-mic-"),s=cn(8,"track-cam-");let c=null,l=null;w.info("start create camera video track(".concat(s,") and microphone audio track(").concat(a,") with config, audio: ").concat(JSON.stringify(e),", video: ").concat(JSON.stringify(t)));try{const h=await zo({audio:o,video:i},"".concat(a,"-").concat(s));c=h.getAudioTracks()[0],l=h.getVideoTracks()[0]}catch(h){throw r.onError(h),h}if(!c||!l){const h=new Q(k.UNEXPECTED_ERROR,"can not find tracks in media stream");return r.onError(h),h.throw(w)}t.optimizationMode&&vT(s,l,t,_c(t.encoderConfig));const u=new aS(c,e,o,a),d=new eA(l,t,i,t.scalabiltyMode?Fv(t.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},t.optimizationMode,s);return r.onSuccess([u.getTrackId(),d.getTrackId()]),w.info("create camera video track(".concat(s,") and microphone audio track(").concat(a,") success")),[u,d]},createMicrophoneAudioTrack:async function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=Pe.reportApiInvoke(null,{tag:kn.TRACER,name:dr.CREATE_MIC_AUDIO_TRACK,options:[e]}),n=OF(e),r=cn(8,"track-mic-");let i=null;w.info("start create microphone audio track with config",JSON.stringify(e),"trackId",r);try{i=(await zo({audio:n},r)).getAudioTracks()[0]||null}catch(a){throw t.onError(a),a}if(!i){const a=new Q(k.UNEXPECTED_ERROR,"can not find track in media stream");return t.onError(a),a.throw(w)}const o=new aS(i,e,n,r);return t.onSuccess(o.getTrackId()),w.info("create microphone audio track success, trackId:",r),o},createCustomAudioTrack:function(e){const t=Pe.reportApiInvoke(null,{tag:kn.TRACER,name:dr.CREATE_CUSTOM_AUDIO_TRACK,options:[e]}),n=new Ln(e.mediaStreamTrack,e.encoderConfig?iS(e.encoderConfig):{},cn(8,"track-cus-"),!1);return w.info("create custom audio track success with config",e,"trackId",n.getTrackId()),t.onSuccess(n.getTrackId()),n},createBufferSourceAudioTrack:async function(e){var t;const{cacheOnlineFile:n,encoderConfig:r}=e;let{source:i}=e;const o={source:i instanceof AudioBuffer?"AudioBuffer":i instanceof File?(t=File.name)!==null&&t!==void 0?t:"File":i,cacheOnlineFile:n,encoderConfig:r},a=Pe.reportApiInvoke(null,{tag:kn.TRACER,name:dr.CREATE_BUFFER_AUDIO_TRACK,options:[o]});if(H("DISABLE_WEBAUDIO"))throw new Q(k.NOT_SUPPORTED,"can not create BufferSourceAudioTrack when WebAudio disabled");const s=cn(8,"track-buf-");w.info("start create buffer source audio track with config",JSON.stringify(o),"trackId",s);const c=i;if(!(i instanceof AudioBuffer))try{i=await async function(d,h){let f=null;if(typeof d=="string"){const p=f4.get(d);if(p)return w.debug("use cached audio resource: ",d),p;try{f=(await qs(()=>eo.get(d,{responseType:"arraybuffer"}),void 0,void 0,{maxRetryCount:3})).data}catch(m){throw new Q(k.FETCH_AUDIO_FILE_FAILED,m.toString())}}else f=await new _e((m,_)=>{const E=new FileReader;E.onload=S=>{S.target?m(S.target.result):_(new Q(k.READ_LOCAL_AUDIO_FILE_ERROR))},E.onerror=()=>{_(new Q(k.READ_LOCAL_AUDIO_FILE_ERROR))},E.readAsArrayBuffer(d)});const g=await function(p){const m=pp();return new _e((_,E)=>{m.decodeAudioData(p,S=>{_(S)},S=>{E(new Q(k.DECODE_AUDIO_FILE_FAILED,S.toString()))})})}(f);return typeof d=="string"&&h&&f4.set(d,g),g}(i,n)}catch(d){return a.onError(d),d.throw(w)}const l=new ufe(i),u=new lfe(c,l,r?iS(r):{},s);return w.info("create buffer source audio track success, trackId:",s),a.onSuccess(u.getTrackId()),u},setAppType:function(e){if(w.debug("setAppType: ".concat(e)),!(Number.isInteger(e)&&e>=0))throw w.debug("Invalid appType"),new q(k.INVALID_PARAMS,"invalid app type",e);Qt("APP_TYPE",Math.floor(e))},setLogLevel:function(e){w.setLogLevel(e)},enableLogUpload:function(){H("USE_NEW_LOG")?Qt("UPLOAD_LOG",!0):w.enableLogUpload()},disableLogUpload:function(){H("USE_NEW_LOG")?Qt("UPLOAD_LOG",!1):w.disableLogUpload()},createChannelMediaRelayConfiguration:function(){return new cz},checkAudioTrackIsActive:async function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5e3;const n=Pe.reportApiInvoke(null,{tag:kn.TRACER,name:dr.CHECK_AUDIO_TRACK_IS_ACTIVE,options:[t]});if(!(e instanceof Ln||e instanceof yf)){const c=new q(k.INVALID_TRACK,"the parameter is not a audio track");return n.onError(c),c.throw()}t&&t<1e3&&(t=1e3);const r=e instanceof Ln?e.getTrackLabel():"remote_track",i=e.getVolumeLevel();let o=i,a=i;const s=Date.now();return new _e(c=>{const l=setInterval(()=>{const u=e.getVolumeLevel();o=u>o?u:o,a=u<a?u:a;const d=o-a>1e-4,h=Date.now()-s;if(d||h>t){clearInterval(l);const f=d,g={duration:h,deviceLabel:r,maxVolumeLevel:o,result:f};w.info("[track-".concat(e.getTrackId(),"] check audio track active completed. ").concat(JSON.stringify(g))),n.onSuccess(g),c(f)}},200)})},checkVideoTrackIsActive:async function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5e3;const n=Pe.reportApiInvoke(null,{tag:kn.TRACER,name:dr.CHECK_VIDEO_TRACK_IS_ACTIVE,options:[t]});if(!(e instanceof hn||e instanceof Sf)){const d=new q(k.INVALID_TRACK,"the parameter is not a video track");return n.onError(d),d.throw()}t&&t<1e3&&(t=1e3);const r=e instanceof hn?e.getTrackLabel():"remote_track",i=e.getMediaStreamTrack(!0),o=document.createElement("video");o.style.width="1px",o.style.height="1px",o.setAttribute("muted",""),o.muted=!0,o.setAttribute("playsinline",""),o.controls=!1,(Gr()||tS())&&(o.style.opacity="0.01",o.style.position="fixed",o.style.left="0",o.style.top="0",document.body.appendChild(o)),o.srcObject=new MediaStream([i]),o.play();const a=document.createElement("canvas");a.width=160,a.height=120;let s=0,c=0;try{const d=Date.now();s=await function(h,f,g,p){let m,_=0,E=null;return new _e((S,C)=>{function b(){_>p&&m&&(m(),S(_));const T=g.getContext("2d");if(!T){const O=new q(k.UNEXPECTED_ERROR,"can not get canvas 2d context.");return w.error(O.toString()),void C(O)}T.drawImage(h,0,0,160,120);const R=T.getImageData(0,0,g.width,g.height),A=Math.floor(R.data.length/3);if(E){for(let O=0;O<A;O+=3)if(R.data[O]!==E[O])return _+=1,void(E=R.data);E=R.data}else E=R.data}setTimeout(()=>{m&&(m(),S(_))},f),m=gN(()=>{b()},30)})}(o,t,a,4),c=Date.now()-d}catch(d){throw n.onError(d),d}Qfe===Kt.SAFARI&&(o.pause(),o.remove()),o.srcObject=null;const l=s>4,u={duration:c,changedPicNum:s,deviceLabel:r,result:l};return w.info("[track-".concat(e.getTrackId(),"] check video track active completed. ").concat(JSON.stringify(u))),n.onSuccess(u),l},setArea:CN,audioElementPlayCenter:Xi,resumeAudioContext:function(){Xi.autoResumeAfterInterruption(!0)},processExternalMediaAEC:function(e){mpe.processExternalMediaAEC(e)},registerExtensions:function(e){const t=H("PLUGIN_INFO")||[];e.forEach(n=>{"name"in n&&!Ce(t).call(t,n.name)&&t.push(n.name);const r=n;r.__registered__=!0,r.logger.hookLog=w.extLog,r.reporter.hookApiInvoke=Pe.extApiInvoke,r.parameters&&Object.keys(r.parameters).forEach(i=>{r.parameters[i]=H(i)})}),MB("PLUGIN_INFO",t)},ChannelMediaRelayError:Uh,ChannelMediaRelayEvent:Gc,ChannelMediaRelayState:lo,RemoteStreamFallbackType:nfe,RemoteStreamType:tfe,ConnectionDisconnectedReason:Xt,AudienceLatencyLevelType:kue,AREAS:Lt,preload:async function(e,t,n,r){return pz(e,t,n,r)}});Object.defineProperties(mn,{onAudioAutoplayFailed:{get:()=>Vo.onAudioAutoplayFailed,set:e=>{Vo.onAudioAutoplayFailed=e}},onAutoplayFailed:{get:()=>Vo.onAutoplayFailed,set:e=>{Vo.onAutoplayFailed=e}},_onSecurityPolicyViolation:{value:void 0,writable:!0},_cspEventHandlerPointer:{value:void 0,writable:!0},onSecurityPolicyViolation:{get:()=>mn._onSecurityPolicyViolation,set(e){mn._onSecurityPolicyViolation=e,Tz(e)}},__CLIENT_LIST__:{get:()=>H("SHOW_GLOBAL_CLIENT_LIST")?Vl:[]}}),qo.on(ad.CAMERA_DEVICE_CHANGED,e=>{w.info("camera device changed",JSON.stringify(e)),mn.onCameraChanged&&mn.onCameraChanged(e),mn.safeEmit(fc.CAMERA_CHANGED,e)}),qo.on(ad.RECORDING_DEVICE_CHANGED,e=>{w.info("microphone device changed",JSON.stringify(e)),mn.onMicrophoneChanged&&mn.onMicrophoneChanged(e),mn.safeEmit(fc.MICROPHONE_CHANGED,e)}),qo.on(ad.PLAYOUT_DEVICE_CHANGED,e=>{w.debug("playout device changed",JSON.stringify(e)),mn.onPlaybackDeviceChanged&&mn.onPlaybackDeviceChanged(e),mn.safeEmit(fc.PLAYBACK_DEVICE_CHANGED,e)}),Xi.onAutoplayFailed=()=>{w.info("detect audio element autoplay failed"),Vo.onAudioAutoplayFailed&&Vo.onAudioAutoplayFailed()},Jt.on("autoplay-failed",()=>{w.info("detect webaudio autoplay failed"),Vo.onAudioAutoplayFailed&&Vo.onAudioAutoplayFailed(),mn.safeEmit(fc.AUTOPLAY_FAILED)}),Jt.on(Pr.STATE_CHANGE,(e,t)=>{w.info("audio context state changed: ".concat(t," => ").concat(e)),mn.onAudioContextStateChanged&&mn.onAudioContextStateChanged(e,t),mn.safeEmit(fc.AUDIO_CONTEXT_STATE_CHANGED,e,t)}),Jn.on(Kh.NETWORK_STATE_CHANGE,(e,t)=>{w.info("[network-indicator] network state changed, ".concat(t," => ").concat(e))}),window&&(window.__ARTC__=mn);function po(e,t,n){return e.on(t,n),()=>e.off(t,n)}function Hme(e){try{return e()}catch(t){console.error(t)}}function qd(e){return()=>e.forEach(Hme)}function LN(e,t){const n=setTimeout(e,t);return()=>clearTimeout(n)}function kN(){let e,t,n;function r(){if(t){const l=t;t=void 0,l()}}async function i(){if(n){const l=n;n=void 0;try{await l()}catch(u){console.error(u)}}}async function o(l){e=!0,await i();try{n=await l()}catch(u){console.error(u)}e=!1,r()}async function a(){e=!0,await i(),e=!1,r()}function s(l){e?t=()=>o(l):o(l)}function c(){e?t=a:a()}return{run:s,dispose:c}}const qy=typeof document<"u"?v.useLayoutEffect:v.useEffect;function zme(e){return e!=null&&typeof e.then=="function"}function Ou(){const e=v.useRef(!1);return v.useEffect(()=>(e.current=!1,()=>{e.current=!0}),[]),e}function Wme(){const e=Ou();function t(n,r){return new Promise(async(i,o)=>{try{const a=await n;e.current||i(a)}catch(a){e.current?r&&r(a):o(a)}})}return v.useCallback(t,[e])}function Yy(e){const t=Wme(),[n,r]=v.useState();return qy(()=>{zme(e)?t(e).then(r):r(e)},[e,t]),n}function Yd(e,t){const n=v.useRef();v.useEffect(()=>{const{run:r,dispose:i}=n.current||(n.current=kN());return r(e),i},t)}function Gme(e,t){const n=e.split("."),r=t.split("."),i=Math.max(n.length,r.length);for(let o=0;o<i;o++){const a=parseInt(n[o]||"0"),s=parseInt(r[o]||"0");if(a>s)return 1;if(a<s)return-1}return 0}function Kme(e,t,n){const r=v.useRef(n);qy(()=>{r.current=n},[n]),v.useEffect(()=>{if(e)return po(e,t,(...i)=>{r.current&&r.current(...i)})},[t,e])}function Qz(e,t,n){const r=v.useRef(n);qy(()=>{r.current=n},[n]),v.useEffect(()=>{if(e)return po(e,t,(...i)=>{r.current&&r.current(...i)})},[t,e])}const Zz=v.createContext(null);function eW({client:e,children:t}){return G.jsx(Zz.Provider,{value:e,children:t})}function qme(e){const t=v.useContext(Zz);return e||t}function wa(e){const t=qme(e);if(!t)throw new Error("Agora RTC client not found. Should be wrapped in <AgoraRTCProvider value={client} />");return t}const Yme=v.createContext(null);function Xme({client:e,children:t}){return G.jsx(Yme.Provider,{value:e,children:t})}function Jme(e){const t=wa(e),[n,r]=v.useState(t?t.connectionState:"DISCONNECTED");return v.useEffect(()=>{if(t){r(t.connectionState);let i;return qd([po(t,"connection-state-change",o=>{i==null||i(),o==="CONNECTED"?i=LN(()=>r(o),0):r(o)}),()=>i==null?void 0:i()])}else r("DISCONNECTED")},[t]),n}function ps(e){const t=wa(e),[n,r]=v.useState(t?t.connectionState==="CONNECTED":!1);return v.useEffect(()=>{if(t){r(t.connectionState==="CONNECTED");let i;return qd([po(t,"connection-state-change",o=>{i==null||i(),i=LN(()=>r(o==="CONNECTED"),0)}),()=>i==null?void 0:i()])}else r(!1)},[t]),n}function Xy(e){const t=wa(e),[n,r]=v.useState(t==null?void 0:t.uid);return v.useEffect(()=>{if(t)return po(t,"connection-state-change",i=>{if(i==="CONNECTED")return LN(()=>r(t.uid),0);i==="DISCONNECTED"&&r(void 0)})},[t]),n}class Jo extends Error{constructor(n,r){var t=(...args)=>{super(...args);ov(this,"rtcMethod");ov(this,"rtcError");ov(this,"name","AgoraRTCReactException")};t(typeof r=="string"?r:r.message),this.rtcMethod=n,this.rtcError=r}log(n){console[n](this)}}function ai(e,t=!0,n){const r=wa(n),i=ps(n),o=v.useRef(),[a,s]=v.useState(!1),[c,l]=v.useState(0),[u,d]=v.useState(null),h=Ou();return Yd(async()=>{if(h.current||(d(null),l(0),s(!1)),t&&r){try{h.current||s(!0);const{appid:g,channel:p,token:m,uid:_}=typeof e=="function"?await e():e,E=await r.join(g,p,m,_);h.current||l(E)}catch(g){console.error(g),h.current||d(new Jo("IAgoraRTCClient.join",g))}h.current||s(!1);const f=o.current||(o.current=kN());return qd([()=>{f.dispose()},()=>{f.run(()=>r.unpublish(r.localTracks))},()=>{for(const g of r.localTracks)g.isPlaying&&g.stop(),g.close();f.run(()=>r.leave())}])}},[t,n]),{data:c,isLoading:a,isConnected:i,error:u}}const FB=()=>({uplinkNetworkQuality:0,downlinkNetworkQuality:0,delay:0});function Qme(e){const t=wa(e),[n,r]=v.useState(FB);return v.useEffect(()=>{if(t)return po(t,"network-quality",i=>r({uplinkNetworkQuality:i.uplinkNetworkQuality,downlinkNetworkQuality:i.downlinkNetworkQuality,delay:t.getRTCStats().RTT??0}));r(FB())},[t]),n}function xu(e,t=!0,n){const r=wa(n),i=ps(n),o=v.useRef([]),[a,s]=v.useState(!1),[c,l]=v.useState(null),u=Ou();return Yd(async()=>{if(u.current||(s(!1),l(null)),!r||!i||!t)return;const d=e.filter(Boolean),h=p=>{const m=Gme(mn.VERSION,"4.18.2")>=0;return m||new Jo("usePublish","please check your agora-rtc-sdk-ng version in package.json, it's recommend upgrade to >= 4.18.2").log("warn"),m?r.mode!=="live"||r.role!=="audience":!0},f=p=>o.current.some(m=>m&&m.getTrackId()===p.getTrackId()),g=p=>h()&&p.enabled&&t&&!f(p);for(let p=0;p<d.length;p++){const m=d[p];if(m&&g(m)){await r.unpublish(o.current.filter(_=>(_==null?void 0:_.trackMediaType)===m.trackMediaType));try{u.current||s(!0),await r.publish(m)}catch(_){console.error(_),u.current||l(new Jo("IAgoraRTCClient.publish",_))}u.current||s(!1)}}o.current=d},[i,t,r,e]),{isLoading:a,error:c}}function _p(e=!0,t={ANS:!0,AEC:!0},n){const r=ps(n),[i,o]=v.useState(null),[a,s]=v.useState(!1),[c,l]=v.useState(null),u=Ou();return Yd(async()=>{if(u.current||(s(!1),l(null)),r&&e&&!i){try{u.current||s(!0);const d=await mn.createMicrophoneAudioTrack(t);u.current||o(d)}catch(d){console.error(d),u.current||l(new Jo("IAgoraRTC.createMicrophoneAudioTrack",d))}u.current||s(!1)}!r&&!u.current&&o(null)},[r,e]),{localMicrophoneTrack:i,isLoading:a,error:c}}function Sp(e=!0,t,n){const r=ps(n),[i,o]=v.useState(null),[a,s]=v.useState(!1),[c,l]=v.useState(null),u=Ou();return Yd(async()=>{if(u.current||(s(!1),l(null)),r&&e&&!i){try{u.current||s(!0);const d=await mn.createCameraVideoTrack(t);u.current||o(d)}catch(d){console.error(d),u.current||l(new Jo("IAgoraRTC.createCameraVideoTrack",d))}u.current||s(!1)}!r&&!u.current&&o(null)},[r,e]),{localCameraTrack:i,isLoading:a,error:c}}function yp(e,t){const n=wa(t),[r,i]=v.useState([]),o=ps(),a=v.useRef([]),[s,c]=v.useState(!1),[l,u]=v.useState(null),d=Ou();return Yd(async()=>{if(d.current||u(null),!Array.isArray(e)||!o)return;const h=async p=>{if(!p.audioTrack&&e.some(({uid:m})=>p.uid===m)){try{d.current||c(!0),await n.subscribe(p,"audio")}catch(m){console.error(m),d.current||u(new Jo("IAgoraRTCClient.subscribe",m))}p.audioTrack&&!a.current.some(m=>m.getUserId()===p.uid)&&a.current.push(p.audioTrack),a.current=a.current.map(m=>p.audioTrack&&m.getUserId()===p.uid&&m.getTrackId()!==p.audioTrack.getTrackId()?p.audioTrack:m),d.current||(i([...a.current]),c(!1))}},f=async p=>{if(e.some(({uid:m})=>p.uid===m)){d.current||(a.current=a.current.filter(m=>m.getUserId()!==p.uid),i([...a.current]));try{d.current||c(!0),await n.unsubscribe(p,"audio")}catch(m){console.error(m),d.current||u(new Jo("IAgoraRTCClient.unsubscribe",m))}d.current||c(!1)}};e.map(p=>{!p.audioTrack&&p.hasAudio&&h(p)});const g=[];for(let p=0;p<a.current.length;p++){const m=a.current[p];if(!e.some(_=>_.uid===m.getUserId())){const _=n.remoteUsers.find(E=>E.uid===m.getUserId());_&&g.push({user:_,mediaType:"audio"}),a.current.splice(p,1),p--}}if(g.length>0){try{d.current||c(!0),await n.massUnsubscribe(g)}catch(p){console.error(p),d.current||u(new Jo("IAgoraRTCClient.massUnsubscribe",p))}d.current||(i(a.current.slice()),c(!1))}return qd([po(n,"user-published",(p,m)=>{e.find(_=>_.uid===p.uid)&&m==="audio"&&h(p)}),po(n,"user-unpublished",(p,m)=>{e.find(_=>_.uid===p.uid)&&m==="audio"&&f(p)})])},[o,n,e]),{audioTracks:r,isLoading:s,error:l}}function Cp(e,t){const n=wa(t),[r,i]=v.useState([]),o=ps(),a=v.useRef([]),[s,c]=v.useState(!1),[l,u]=v.useState(null),d=Ou();return Yd(async()=>{if(d.current||u(null),!Array.isArray(e)||!o)return;const h=async p=>{if(!p.videoTrack&&e.some(({uid:m})=>p.uid===m)){try{d.current||c(!0),await n.subscribe(p,"video")}catch(m){console.error(m),d.current||u(new Jo("IAgoraRTCClient.subscribe",m))}p.videoTrack&&!a.current.some(m=>m.getUserId()===p.uid)&&a.current.push(p.videoTrack),a.current=a.current.map(m=>p.videoTrack&&m.getUserId()===p.uid&&m.getTrackId()!==p.videoTrack.getTrackId()?p.videoTrack:m),d.current||(i([...a.current]),c(!1))}},f=async p=>{if(e.some(({uid:m})=>p.uid===m)){d.current||(a.current=a.current.filter(m=>m.getUserId()!==p.uid),i([...a.current]));try{d.current||c(!0),await n.unsubscribe(p,"video")}catch(m){console.error(m),d.current||u(new Jo("IAgoraRTCClient.unsubscribe",m))}d.current||c(!1)}};e.map(p=>{!p.videoTrack&&p.hasVideo&&h(p)});const g=[];for(let p=0;p<a.current.length;p++){const m=a.current[p];if(!e.some(_=>_.uid===m.getUserId())){const _=n.remoteUsers.find(E=>E.uid===m.getUserId());_&&g.push({user:_,mediaType:"video"}),a.current.splice(p,1),p--}}if(g.length>0){try{d.current||c(!0),await n.massUnsubscribe(g)}catch(p){console.error(p),d.current||u(new Jo("IAgoraRTCClient.massUnsubscribe",p))}d.current||(i(a.current.slice()),c(!1))}return qd([po(n,"user-published",(p,m)=>{e.find(_=>_.uid===p.uid)&&m==="video"&&h(p)}),po(n,"user-unpublished",(p,m)=>{e.find(_=>_.uid===p.uid)&&m==="video"&&f(p)})])},[o,n,e]),{videoTracks:r,isLoading:s,error:l}}function UB(e,t,n){const r=wa(n),i=t==="audio"?"audioTrack":"videoTrack",[o,a]=v.useState(e&&e[i]),s=ps(),c=v.useRef(),[l,u]=v.useState(!1),[d,h]=v.useState(null);return v.useEffect(()=>{if(!e||!s)return;let f=!1;f||h(null);const g=t==="audio"?"hasAudio":"hasVideo",p=e.uid,m=async(S,C)=>{if(S[i]&&r.remoteUsers.some(({uid:b})=>S.uid===b))try{f||u(!0),await r.unsubscribe(S,C)}catch(b){f||h(new Jo("IAgoraRTCClient.unsubscribe",b)),console.error(b)}f||(a(void 0),u(!1))},_=async(S,C)=>{try{!S[i]&&r.remoteUsers.some(({uid:b})=>S.uid===b)&&(f||u(!0),await r.subscribe(S,C)),f||a(S[i])}catch(b){f||h(new Jo("IAgoraRTCClient.subscribe",b)),console.error(b)}f||u(!1)},E=c.current||(c.current=kN());return!e[i]&&e[g]?E.run(()=>_(e,t)):a(e[i]),qd([()=>{f=!0,E.dispose()},po(r,"user-published",(S,C)=>{S.uid===p&&C===t&&E.run(()=>_(S,t))}),po(r,"user-unpublished",(S,C)=>{S.uid===p&&C===t&&E.run(()=>m(S,t))})])},[s,r,e,t,i]),{track:o,isLoading:l,error:d}}function Xs(e){const t=wa(e),[n,r]=v.useState(t?t.remoteUsers:[]);return v.useEffect(()=>{if(t){const i=()=>r(t.remoteUsers.slice());return qd([po(t,"user-joined",i),po(t,"user-left",i),po(t,"user-published",i),po(t,"user-unpublished",i)])}},[t]),n}function tW(e=!0,t,n,r){const i=ps(r),[o,a]=v.useState(null),[s,c]=v.useState(!1),[l,u]=v.useState(null),d=Ou();return Yd(async()=>{if(d.current||(c(!1),u(null)),i&&e&&!o){try{d.current||c(!0);const h=await mn.createScreenVideoTrack(t,n);d.current||a(h)}catch(h){console.error(h),d.current||u(new Jo("IAgoraRTC.createScreenVideoTrack",h))}d.current||c(!1)}(!i||!e)&&!d.current&&a(null)},[i,e]),{screenTrack:o,isLoading:s,error:l}}const nW=v.createContext(void 0);function MN(e,t,n,r){const i=v.useContext(nW);v.useEffect(()=>{if(e)return r&&t?e.play(r,n||void 0):e.stop(),i?(i.onMount(e),()=>i.onUnmount(e)):()=>{e.isPlaying&&e.stop()}},[e,r,t,i,n])}function FN(e,t){const n=v.useContext(nW);qy(()=>{if(e)return t?e.play():e.stop(),n?(n.onMount(e),()=>n.onUnmount(e)):()=>{e.isPlaying&&e.stop()}},[e,t,n])}function Jy({track:e,play:t=!1,volume:n,disabled:r,muted:i,children:o}){const a=Yy(e);return FN(a,t),v.useEffect(()=>{a&&n!=null&&a.setVolume(n)},[a,n]),v.useEffect(()=>{a&&r!=null&&a.setEnabled(!r).catch(console.warn)},[r,a]),v.useEffect(()=>{a&&i!=null&&a.setMuted(i).catch(console.warn)},[i,a]),o?G.jsx(G.Fragment,{children:o}):null}const Qy={position:"relative",width:"100%",height:"100%",overflow:"hidden",background:"#000"},rW={width:"100%",height:"100%"},Mg={position:"absolute",top:0,left:0,width:"100%",height:"100%",overflow:"hidden",zIndex:2},bp=(e,t)=>v.useMemo(()=>({...e,...t}),[e,t]);function Fg({track:e,play:t,disabled:n,muted:r,style:i,videoPlayerConfig:o,...a}){const s=bp(rW,i),[c,l]=v.useState(null),u=Yy(e);return MN(u,t,o,c),v.useEffect(()=>{u&&n!=null&&u.setEnabled(!n).catch(console.warn)},[n,u]),v.useEffect(()=>{u&&r!=null&&u.setMuted(r).catch(console.warn)},[r,u]),G.jsx("div",{...a,ref:l,style:s})}const Zme={width:"100%",height:"100%",background:"#1a1e21 center/cover no-repeat",filter:"blur(16px) brightness(0.4)"},e0e={position:"absolute",top:"50%",left:"50%",maxWidth:"50%",maxHeight:"50%",aspectRatio:"1",transform:"translate(-50%, -50%)",borderRadius:"50%",overflow:"hidden",objectFit:"cover"};function Zy({cover:e}){return G.jsx("div",{style:Mg,children:typeof e=="string"?G.jsxs(G.Fragment,{children:[G.jsx("div",{style:{...Zme,backgroundImage:`url(${e})`}}),G.jsx("img",{src:e,style:e0e})]}):e()})}function iW({micOn:e,cameraOn:t,audioTrack:n,videoTrack:r,playAudio:i,playVideo:o,volume:a,cover:s,children:c,style:l,...u}){const d=bp(Qy,l);return o=o??!!t,i=i??!!e,G.jsxs("div",{...u,style:d,children:[G.jsx(Fg,{disabled:!t,play:o,track:r}),G.jsx(Jy,{disabled:!e,play:i,track:n,volume:a}),s&&!t&&G.jsx(Zy,{cover:s}),G.jsx("div",{style:Mg,children:c})]})}function oW({track:e,play:t=!1,playbackDeviceId:n,volume:r,children:i}){return FN(e,t),v.useEffect(()=>{e&&n!=null&&e.setPlaybackDevice(n).catch(console.warn)},[e,n]),v.useEffect(()=>{e&&r!=null&&e.setVolume(r)},[e,r]),i?G.jsx(G.Fragment,{children:i}):null}function UN({track:e,play:t,style:n,videoPlayerConfig:r,...i}){const o=bp(rW,n),[a,s]=v.useState(null);return MN(e,t,r,a),G.jsx("div",{...i,ref:s,style:o})}function BN({user:e,playVideo:t,playAudio:n,playbackDeviceId:r,volume:i,cover:o,style:a,children:s,videoPlayerConfig:c,...l}){const u=bp(Qy,a),{track:d}=UB(e,"video"),{track:h}=UB(e,"audio");return t=t??(e==null?void 0:e.hasVideo),n=n??(e==null?void 0:e.hasAudio),G.jsxs("div",{...l,style:u,children:[G.jsx(UN,{play:t,track:d,videoPlayerConfig:c}),G.jsx(oW,{play:n,playbackDeviceId:r,track:h,volume:i}),o&&!t&&G.jsx(Zy,{cover:o}),G.jsx("div",{style:Mg,children:s})]})}var pA={},aW={exports:{}},Ia={},sW={exports:{}},cW={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(D,j){var F=D.length;D.push(j);e:for(;0<F;){var y=F-1>>>1,I=D[y];if(0<i(I,j))D[y]=j,D[F]=I,F=y;else break e}}function n(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var j=D[0],F=D.pop();if(F!==j){D[0]=F;e:for(var y=0,I=D.length,N=I>>>1;y<N;){var B=2*(y+1)-1,K=D[B],X=B+1,ee=D[X];if(0>i(K,F))X<I&&0>i(ee,K)?(D[y]=ee,D[X]=F,y=X):(D[y]=K,D[B]=F,y=B);else if(X<I&&0>i(ee,F))D[y]=ee,D[X]=F,y=X;else break e}}return j}function i(D,j){var F=D.sortIndex-j.sortIndex;return F!==0?F:D.id-j.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,s=a.now();e.unstable_now=function(){return a.now()-s}}var c=[],l=[],u=1,d=null,h=3,f=!1,g=!1,p=!1,m=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(D){for(var j=n(l);j!==null;){if(j.callback===null)r(l);else if(j.startTime<=D)r(l),j.sortIndex=j.expirationTime,t(c,j);else break;j=n(l)}}function C(D){if(p=!1,S(D),!g)if(n(c)!==null)g=!0,z(b);else{var j=n(l);j!==null&&L(C,j.startTime-D)}}function b(D,j){g=!1,p&&(p=!1,_(A),A=-1),f=!0;var F=h;try{for(S(j),d=n(c);d!==null&&(!(d.expirationTime>j)||D&&!M());){var y=d.callback;if(typeof y=="function"){d.callback=null,h=d.priorityLevel;var I=y(d.expirationTime<=j);j=e.unstable_now(),typeof I=="function"?d.callback=I:d===n(c)&&r(c),S(j)}else r(c);d=n(c)}if(d!==null)var N=!0;else{var B=n(l);B!==null&&L(C,B.startTime-j),N=!1}return N}finally{d=null,h=F,f=!1}}var T=!1,R=null,A=-1,O=5,x=-1;function M(){return!(e.unstable_now()-x<O)}function $(){if(R!==null){var D=e.unstable_now();x=D;var j=!0;try{j=R(!0,D)}finally{j?U():(T=!1,R=null)}}else T=!1}var U;if(typeof E=="function")U=function(){E($)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,W=V.port2;V.port1.onmessage=$,U=function(){W.postMessage(null)}}else U=function(){m($,0)};function z(D){R=D,T||(T=!0,U())}function L(D,j){A=m(function(){D(e.unstable_now())},j)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(D){D.callback=null},e.unstable_continueExecution=function(){g||f||(g=!0,z(b))},e.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<D?Math.floor(1e3/D):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(D){switch(h){case 1:case 2:case 3:var j=3;break;default:j=h}var F=h;h=j;try{return D()}finally{h=F}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(D,j){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var F=h;h=D;try{return j()}finally{h=F}},e.unstable_scheduleCallback=function(D,j,F){var y=e.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?y+F:y):F=y,D){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=F+I,D={id:u++,callback:j,priorityLevel:D,startTime:F,expirationTime:I,sortIndex:-1},F>y?(D.sortIndex=F,t(l,D),n(c)===null&&D===n(l)&&(p?(_(A),A=-1):p=!0,L(C,F-y))):(D.sortIndex=I,t(c,D),g||f||(g=!0,z(b))),D},e.unstable_shouldYield=M,e.unstable_wrapCallback=function(D){var j=h;return function(){var F=h;h=j;try{return D.apply(this,arguments)}finally{h=F}}}})(cW);sW.exports=cW;var t0e=sW.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n0e=v,Ca=t0e;function Fe(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var lW=new Set,B0={};function Xd(e,t){Gf(e,t),Gf(e+"Capture",t)}function Gf(e,t){for(B0[e]=t,e=0;e<t.length;e++)lW.add(t[e])}var ul=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),mA=Object.prototype.hasOwnProperty,r0e=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,BB={},$B={};function i0e(e){return mA.call($B,e)?!0:mA.call(BB,e)?!1:r0e.test(e)?$B[e]=!0:(BB[e]=!0,!1)}function o0e(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function a0e(e,t,n,r){if(t===null||typeof t>"u"||o0e(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ko(e,t,n,r,i,o,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var to={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){to[e]=new ko(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];to[t]=new ko(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){to[e]=new ko(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){to[e]=new ko(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){to[e]=new ko(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){to[e]=new ko(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){to[e]=new ko(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){to[e]=new ko(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){to[e]=new ko(e,5,!1,e.toLowerCase(),null,!1,!1)});var $N=/[\-:]([a-z])/g;function VN(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace($N,VN);to[t]=new ko(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace($N,VN);to[t]=new ko(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace($N,VN);to[t]=new ko(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){to[e]=new ko(e,1,!1,e.toLowerCase(),null,!1,!1)});to.xlinkHref=new ko("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){to[e]=new ko(e,1,!1,e.toLowerCase(),null,!0,!0)});function jN(e,t,n,r){var i=to.hasOwnProperty(t)?to[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(a0e(t,n,i,r)&&(n=null),r||i===null?i0e(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var El=n0e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,nE=Symbol.for("react.element"),Zh=Symbol.for("react.portal"),ef=Symbol.for("react.fragment"),HN=Symbol.for("react.strict_mode"),gA=Symbol.for("react.profiler"),uW=Symbol.for("react.provider"),dW=Symbol.for("react.context"),zN=Symbol.for("react.forward_ref"),vA=Symbol.for("react.suspense"),EA=Symbol.for("react.suspense_list"),WN=Symbol.for("react.memo"),Bl=Symbol.for("react.lazy"),hW=Symbol.for("react.offscreen"),VB=Symbol.iterator;function Qp(e){return e===null||typeof e!="object"?null:(e=VB&&e[VB]||e["@@iterator"],typeof e=="function"?e:null)}var Mr=Object.assign,QT;function xm(e){if(QT===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);QT=t&&t[1]||""}return`
`+QT+e}var ZT=!1;function eR(e,t){if(!e||ZT)return"";ZT=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),o=r.stack.split(`
`),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(a!==1||s!==1)do if(a--,s--,0>s||i[a]!==o[s]){var c=`
`+i[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=s);break}}}finally{ZT=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?xm(e):""}function s0e(e){switch(e.tag){case 5:return xm(e.type);case 16:return xm("Lazy");case 13:return xm("Suspense");case 19:return xm("SuspenseList");case 0:case 2:case 15:return e=eR(e.type,!1),e;case 11:return e=eR(e.type.render,!1),e;case 1:return e=eR(e.type,!0),e;default:return""}}function _A(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ef:return"Fragment";case Zh:return"Portal";case gA:return"Profiler";case HN:return"StrictMode";case vA:return"Suspense";case EA:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case dW:return(e.displayName||"Context")+".Consumer";case uW:return(e._context.displayName||"Context")+".Provider";case zN:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case WN:return t=e.displayName||null,t!==null?t:_A(e.type)||"Memo";case Bl:t=e._payload,e=e._init;try{return _A(e(t))}catch{}}return null}function c0e(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _A(t);case 8:return t===HN?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function yu(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function fW(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function l0e(e){var t=fW(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,o.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function rE(e){e._valueTracker||(e._valueTracker=l0e(e))}function pW(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=fW(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function gS(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function SA(e,t){var n=t.checked;return Mr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function jB(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=yu(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function mW(e,t){t=t.checked,t!=null&&jN(e,"checked",t,!1)}function yA(e,t){mW(e,t);var n=yu(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?CA(e,t.type,n):t.hasOwnProperty("defaultValue")&&CA(e,t.type,yu(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function HB(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function CA(e,t,n){(t!=="number"||gS(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Nm=Array.isArray;function Rf(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+yu(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function bA(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Fe(91));return Mr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function zB(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Fe(92));if(Nm(n)){if(1<n.length)throw Error(Fe(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:yu(n)}}function gW(e,t){var n=yu(t.value),r=yu(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function WB(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function vW(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function TA(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?vW(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var iE,EW=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(iE=iE||document.createElement("div"),iE.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=iE.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function $0(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Jm={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},u0e=["Webkit","ms","Moz","O"];Object.keys(Jm).forEach(function(e){u0e.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Jm[t]=Jm[e]})});function _W(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Jm.hasOwnProperty(e)&&Jm[e]?(""+t).trim():t+"px"}function SW(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=_W(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var d0e=Mr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function RA(e,t){if(t){if(d0e[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Fe(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Fe(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Fe(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Fe(62))}}function wA(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var IA=null;function GN(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var AA=null,wf=null,If=null;function GB(e){if(e=$g(e)){if(typeof AA!="function")throw Error(Fe(280));var t=e.stateNode;t&&(t=iC(t),AA(e.stateNode,e.type,t))}}function yW(e){wf?If?If.push(e):If=[e]:wf=e}function CW(){if(wf){var e=wf,t=If;if(If=wf=null,GB(e),t)for(e=0;e<t.length;e++)GB(t[e])}}function bW(e,t){return e(t)}function TW(){}var tR=!1;function RW(e,t,n){if(tR)return e(t,n);tR=!0;try{return bW(e,t,n)}finally{tR=!1,(wf!==null||If!==null)&&(TW(),CW())}}function V0(e,t){var n=e.stateNode;if(n===null)return null;var r=iC(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Fe(231,t,typeof n));return n}var OA=!1;if(ul)try{var Zp={};Object.defineProperty(Zp,"passive",{get:function(){OA=!0}}),window.addEventListener("test",Zp,Zp),window.removeEventListener("test",Zp,Zp)}catch{OA=!1}function h0e(e,t,n,r,i,o,a,s,c){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(u){this.onError(u)}}var Qm=!1,vS=null,ES=!1,xA=null,f0e={onError:function(e){Qm=!0,vS=e}};function p0e(e,t,n,r,i,o,a,s,c){Qm=!1,vS=null,h0e.apply(f0e,arguments)}function m0e(e,t,n,r,i,o,a,s,c){if(p0e.apply(this,arguments),Qm){if(Qm){var l=vS;Qm=!1,vS=null}else throw Error(Fe(198));ES||(ES=!0,xA=l)}}function Jd(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function wW(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function KB(e){if(Jd(e)!==e)throw Error(Fe(188))}function g0e(e){var t=e.alternate;if(!t){if(t=Jd(e),t===null)throw Error(Fe(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return KB(i),e;if(o===r)return KB(i),t;o=o.sibling}throw Error(Fe(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,s=i.child;s;){if(s===n){a=!0,n=i,r=o;break}if(s===r){a=!0,r=i,n=o;break}s=s.sibling}if(!a){for(s=o.child;s;){if(s===n){a=!0,n=o,r=i;break}if(s===r){a=!0,r=o,n=i;break}s=s.sibling}if(!a)throw Error(Fe(189))}}if(n.alternate!==r)throw Error(Fe(190))}if(n.tag!==3)throw Error(Fe(188));return n.stateNode.current===n?e:t}function IW(e){return e=g0e(e),e!==null?AW(e):null}function AW(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=AW(e);if(t!==null)return t;e=e.sibling}return null}var OW=Ca.unstable_scheduleCallback,qB=Ca.unstable_cancelCallback,v0e=Ca.unstable_shouldYield,E0e=Ca.unstable_requestPaint,ii=Ca.unstable_now,_0e=Ca.unstable_getCurrentPriorityLevel,KN=Ca.unstable_ImmediatePriority,xW=Ca.unstable_UserBlockingPriority,_S=Ca.unstable_NormalPriority,S0e=Ca.unstable_LowPriority,NW=Ca.unstable_IdlePriority,eC=null,bc=null;function y0e(e){if(bc&&typeof bc.onCommitFiberRoot=="function")try{bc.onCommitFiberRoot(eC,e,void 0,(e.current.flags&128)===128)}catch{}}var Fs=Math.clz32?Math.clz32:T0e,C0e=Math.log,b0e=Math.LN2;function T0e(e){return e>>>=0,e===0?32:31-(C0e(e)/b0e|0)|0}var oE=64,aE=4194304;function Pm(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function SS(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,a=n&268435455;if(a!==0){var s=a&~i;s!==0?r=Pm(s):(o&=a,o!==0&&(r=Pm(o)))}else a=n&~i,a!==0?r=Pm(a):o!==0&&(r=Pm(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,o=t&-t,i>=o||i===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Fs(t),i=1<<n,r|=e[n],t&=~i;return r}function R0e(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function w0e(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-Fs(o),s=1<<a,c=i[a];c===-1?(!(s&n)||s&r)&&(i[a]=R0e(s,t)):c<=t&&(e.expiredLanes|=s),o&=~s}}function NA(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function PW(){var e=oE;return oE<<=1,!(oE&4194240)&&(oE=64),e}function nR(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ug(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Fs(t),e[t]=n}function I0e(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Fs(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}function qN(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Fs(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Qn=0;function DW(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var LW,YN,kW,MW,FW,PA=!1,sE=[],uu=null,du=null,hu=null,j0=new Map,H0=new Map,Wl=[],A0e="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function YB(e,t){switch(e){case"focusin":case"focusout":uu=null;break;case"dragenter":case"dragleave":du=null;break;case"mouseover":case"mouseout":hu=null;break;case"pointerover":case"pointerout":j0.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":H0.delete(t.pointerId)}}function em(e,t,n,r,i,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},t!==null&&(t=$g(t),t!==null&&YN(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function O0e(e,t,n,r,i){switch(t){case"focusin":return uu=em(uu,e,t,n,r,i),!0;case"dragenter":return du=em(du,e,t,n,r,i),!0;case"mouseover":return hu=em(hu,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return j0.set(o,em(j0.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,H0.set(o,em(H0.get(o)||null,e,t,n,r,i)),!0}return!1}function UW(e){var t=ud(e.target);if(t!==null){var n=Jd(t);if(n!==null){if(t=n.tag,t===13){if(t=wW(n),t!==null){e.blockedOn=t,FW(e.priority,function(){kW(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function E_(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=DA(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);IA=r,n.target.dispatchEvent(r),IA=null}else return t=$g(n),t!==null&&YN(t),e.blockedOn=n,!1;t.shift()}return!0}function XB(e,t,n){E_(e)&&n.delete(t)}function x0e(){PA=!1,uu!==null&&E_(uu)&&(uu=null),du!==null&&E_(du)&&(du=null),hu!==null&&E_(hu)&&(hu=null),j0.forEach(XB),H0.forEach(XB)}function tm(e,t){e.blockedOn===t&&(e.blockedOn=null,PA||(PA=!0,Ca.unstable_scheduleCallback(Ca.unstable_NormalPriority,x0e)))}function z0(e){function t(i){return tm(i,e)}if(0<sE.length){tm(sE[0],e);for(var n=1;n<sE.length;n++){var r=sE[n];r.blockedOn===e&&(r.blockedOn=null)}}for(uu!==null&&tm(uu,e),du!==null&&tm(du,e),hu!==null&&tm(hu,e),j0.forEach(t),H0.forEach(t),n=0;n<Wl.length;n++)r=Wl[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Wl.length&&(n=Wl[0],n.blockedOn===null);)UW(n),n.blockedOn===null&&Wl.shift()}var Af=El.ReactCurrentBatchConfig,yS=!0;function N0e(e,t,n,r){var i=Qn,o=Af.transition;Af.transition=null;try{Qn=1,XN(e,t,n,r)}finally{Qn=i,Af.transition=o}}function P0e(e,t,n,r){var i=Qn,o=Af.transition;Af.transition=null;try{Qn=4,XN(e,t,n,r)}finally{Qn=i,Af.transition=o}}function XN(e,t,n,r){if(yS){var i=DA(e,t,n,r);if(i===null)hR(e,t,r,CS,n),YB(e,r);else if(O0e(i,e,t,n,r))r.stopPropagation();else if(YB(e,r),t&4&&-1<A0e.indexOf(e)){for(;i!==null;){var o=$g(i);if(o!==null&&LW(o),o=DA(e,t,n,r),o===null&&hR(e,t,r,CS,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else hR(e,t,r,null,n)}}var CS=null;function DA(e,t,n,r){if(CS=null,e=GN(r),e=ud(e),e!==null)if(t=Jd(e),t===null)e=null;else if(n=t.tag,n===13){if(e=wW(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return CS=e,null}function BW(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(_0e()){case KN:return 1;case xW:return 4;case _S:case S0e:return 16;case NW:return 536870912;default:return 16}default:return 16}}var Ql=null,JN=null,__=null;function $W(){if(__)return __;var e,t=JN,n=t.length,r,i="value"in Ql?Ql.value:Ql.textContent,o=i.length;for(e=0;e<n&&t[e]===i[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===i[o-r];r++);return __=i.slice(e,1<r?1-r:void 0)}function S_(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function cE(){return!0}function JB(){return!1}function Aa(e){function t(n,r,i,o,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var s in e)e.hasOwnProperty(s)&&(n=e[s],this[s]=n?n(o):o[s]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?cE:JB,this.isPropagationStopped=JB,this}return Mr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=cE)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=cE)},persist:function(){},isPersistent:cE}),t}var Tp={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},QN=Aa(Tp),Bg=Mr({},Tp,{view:0,detail:0}),D0e=Aa(Bg),rR,iR,nm,tC=Mr({},Bg,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ZN,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==nm&&(nm&&e.type==="mousemove"?(rR=e.screenX-nm.screenX,iR=e.screenY-nm.screenY):iR=rR=0,nm=e),rR)},movementY:function(e){return"movementY"in e?e.movementY:iR}}),QB=Aa(tC),L0e=Mr({},tC,{dataTransfer:0}),k0e=Aa(L0e),M0e=Mr({},Bg,{relatedTarget:0}),oR=Aa(M0e),F0e=Mr({},Tp,{animationName:0,elapsedTime:0,pseudoElement:0}),U0e=Aa(F0e),B0e=Mr({},Tp,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),$0e=Aa(B0e),V0e=Mr({},Tp,{data:0}),ZB=Aa(V0e),j0e={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},H0e={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},z0e={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function W0e(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=z0e[e])?!!t[e]:!1}function ZN(){return W0e}var G0e=Mr({},Bg,{key:function(e){if(e.key){var t=j0e[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=S_(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?H0e[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ZN,charCode:function(e){return e.type==="keypress"?S_(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?S_(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),K0e=Aa(G0e),q0e=Mr({},tC,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),e$=Aa(q0e),Y0e=Mr({},Bg,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ZN}),X0e=Aa(Y0e),J0e=Mr({},Tp,{propertyName:0,elapsedTime:0,pseudoElement:0}),Q0e=Aa(J0e),Z0e=Mr({},tC,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ege=Aa(Z0e),tge=[9,13,27,32],eP=ul&&"CompositionEvent"in window,Zm=null;ul&&"documentMode"in document&&(Zm=document.documentMode);var nge=ul&&"TextEvent"in window&&!Zm,VW=ul&&(!eP||Zm&&8<Zm&&11>=Zm),t$=String.fromCharCode(32),n$=!1;function jW(e,t){switch(e){case"keyup":return tge.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function HW(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var tf=!1;function rge(e,t){switch(e){case"compositionend":return HW(t);case"keypress":return t.which!==32?null:(n$=!0,t$);case"textInput":return e=t.data,e===t$&&n$?null:e;default:return null}}function ige(e,t){if(tf)return e==="compositionend"||!eP&&jW(e,t)?(e=$W(),__=JN=Ql=null,tf=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return VW&&t.locale!=="ko"?null:t.data;default:return null}}var oge={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function r$(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!oge[e.type]:t==="textarea"}function zW(e,t,n,r){yW(r),t=bS(t,"onChange"),0<t.length&&(n=new QN("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var e0=null,W0=null;function age(e){tG(e,0)}function nC(e){var t=of(e);if(pW(t))return e}function sge(e,t){if(e==="change")return t}var WW=!1;if(ul){var aR;if(ul){var sR="oninput"in document;if(!sR){var i$=document.createElement("div");i$.setAttribute("oninput","return;"),sR=typeof i$.oninput=="function"}aR=sR}else aR=!1;WW=aR&&(!document.documentMode||9<document.documentMode)}function o$(){e0&&(e0.detachEvent("onpropertychange",GW),W0=e0=null)}function GW(e){if(e.propertyName==="value"&&nC(W0)){var t=[];zW(t,W0,e,GN(e)),RW(age,t)}}function cge(e,t,n){e==="focusin"?(o$(),e0=t,W0=n,e0.attachEvent("onpropertychange",GW)):e==="focusout"&&o$()}function lge(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return nC(W0)}function uge(e,t){if(e==="click")return nC(t)}function dge(e,t){if(e==="input"||e==="change")return nC(t)}function hge(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Hs=typeof Object.is=="function"?Object.is:hge;function G0(e,t){if(Hs(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!mA.call(t,i)||!Hs(e[i],t[i]))return!1}return!0}function a$(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function s$(e,t){var n=a$(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=a$(n)}}function KW(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?KW(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function qW(){for(var e=window,t=gS();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=gS(e.document)}return t}function tP(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function fge(e){var t=qW(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&KW(n.ownerDocument.documentElement,n)){if(r!==null&&tP(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=s$(n,o);var a=s$(n,r);i&&a&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var pge=ul&&"documentMode"in document&&11>=document.documentMode,nf=null,LA=null,t0=null,kA=!1;function c$(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;kA||nf==null||nf!==gS(r)||(r=nf,"selectionStart"in r&&tP(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),t0&&G0(t0,r)||(t0=r,r=bS(LA,"onSelect"),0<r.length&&(t=new QN("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=nf)))}function lE(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var rf={animationend:lE("Animation","AnimationEnd"),animationiteration:lE("Animation","AnimationIteration"),animationstart:lE("Animation","AnimationStart"),transitionend:lE("Transition","TransitionEnd")},cR={},YW={};ul&&(YW=document.createElement("div").style,"AnimationEvent"in window||(delete rf.animationend.animation,delete rf.animationiteration.animation,delete rf.animationstart.animation),"TransitionEvent"in window||delete rf.transitionend.transition);function rC(e){if(cR[e])return cR[e];if(!rf[e])return e;var t=rf[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in YW)return cR[e]=t[n];return e}var XW=rC("animationend"),JW=rC("animationiteration"),QW=rC("animationstart"),ZW=rC("transitionend"),eG=new Map,l$="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Nu(e,t){eG.set(e,t),Xd(t,[e])}for(var lR=0;lR<l$.length;lR++){var uR=l$[lR],mge=uR.toLowerCase(),gge=uR[0].toUpperCase()+uR.slice(1);Nu(mge,"on"+gge)}Nu(XW,"onAnimationEnd");Nu(JW,"onAnimationIteration");Nu(QW,"onAnimationStart");Nu("dblclick","onDoubleClick");Nu("focusin","onFocus");Nu("focusout","onBlur");Nu(ZW,"onTransitionEnd");Gf("onMouseEnter",["mouseout","mouseover"]);Gf("onMouseLeave",["mouseout","mouseover"]);Gf("onPointerEnter",["pointerout","pointerover"]);Gf("onPointerLeave",["pointerout","pointerover"]);Xd("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Xd("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Xd("onBeforeInput",["compositionend","keypress","textInput","paste"]);Xd("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Xd("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Xd("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vge=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dm));function u$(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,m0e(r,t,void 0,e),e.currentTarget=null}function tG(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],c=s.instance,l=s.currentTarget;if(s=s.listener,c!==o&&i.isPropagationStopped())break e;u$(i,s,l),o=c}else for(a=0;a<r.length;a++){if(s=r[a],c=s.instance,l=s.currentTarget,s=s.listener,c!==o&&i.isPropagationStopped())break e;u$(i,s,l),o=c}}}if(ES)throw e=xA,ES=!1,xA=null,e}function Er(e,t){var n=t[$A];n===void 0&&(n=t[$A]=new Set);var r=e+"__bubble";n.has(r)||(nG(t,e,2,!1),n.add(r))}function dR(e,t,n){var r=0;t&&(r|=4),nG(n,e,r,t)}var uE="_reactListening"+Math.random().toString(36).slice(2);function K0(e){if(!e[uE]){e[uE]=!0,lW.forEach(function(n){n!=="selectionchange"&&(vge.has(n)||dR(n,!1,e),dR(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[uE]||(t[uE]=!0,dR("selectionchange",!1,t))}}function nG(e,t,n,r){switch(BW(t)){case 1:var i=N0e;break;case 4:i=P0e;break;default:i=XN}n=i.bind(null,t,n,e),i=void 0,!OA||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function hR(e,t,n,r,i){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var s=r.stateNode.containerInfo;if(s===i||s.nodeType===8&&s.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;a=a.return}for(;s!==null;){if(a=ud(s),a===null)return;if(c=a.tag,c===5||c===6){r=o=a;continue e}s=s.parentNode}}r=r.return}RW(function(){var l=o,u=GN(n),d=[];e:{var h=eG.get(e);if(h!==void 0){var f=QN,g=e;switch(e){case"keypress":if(S_(n)===0)break e;case"keydown":case"keyup":f=K0e;break;case"focusin":g="focus",f=oR;break;case"focusout":g="blur",f=oR;break;case"beforeblur":case"afterblur":f=oR;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=QB;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=k0e;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=X0e;break;case XW:case JW:case QW:f=U0e;break;case ZW:f=Q0e;break;case"scroll":f=D0e;break;case"wheel":f=ege;break;case"copy":case"cut":case"paste":f=$0e;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=e$}var p=(t&4)!==0,m=!p&&e==="scroll",_=p?h!==null?h+"Capture":null:h;p=[];for(var E=l,S;E!==null;){S=E;var C=S.stateNode;if(S.tag===5&&C!==null&&(S=C,_!==null&&(C=V0(E,_),C!=null&&p.push(q0(E,C,S)))),m)break;E=E.return}0<p.length&&(h=new f(h,g,null,n,u),d.push({event:h,listeners:p}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",f=e==="mouseout"||e==="pointerout",h&&n!==IA&&(g=n.relatedTarget||n.fromElement)&&(ud(g)||g[dl]))break e;if((f||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,f?(g=n.relatedTarget||n.toElement,f=l,g=g?ud(g):null,g!==null&&(m=Jd(g),g!==m||g.tag!==5&&g.tag!==6)&&(g=null)):(f=null,g=l),f!==g)){if(p=QB,C="onMouseLeave",_="onMouseEnter",E="mouse",(e==="pointerout"||e==="pointerover")&&(p=e$,C="onPointerLeave",_="onPointerEnter",E="pointer"),m=f==null?h:of(f),S=g==null?h:of(g),h=new p(C,E+"leave",f,n,u),h.target=m,h.relatedTarget=S,C=null,ud(u)===l&&(p=new p(_,E+"enter",g,n,u),p.target=S,p.relatedTarget=m,C=p),m=C,f&&g)t:{for(p=f,_=g,E=0,S=p;S;S=Ih(S))E++;for(S=0,C=_;C;C=Ih(C))S++;for(;0<E-S;)p=Ih(p),E--;for(;0<S-E;)_=Ih(_),S--;for(;E--;){if(p===_||_!==null&&p===_.alternate)break t;p=Ih(p),_=Ih(_)}p=null}else p=null;f!==null&&d$(d,h,f,p,!1),g!==null&&m!==null&&d$(d,m,g,p,!0)}}e:{if(h=l?of(l):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var b=sge;else if(r$(h))if(WW)b=dge;else{b=lge;var T=cge}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(b=uge);if(b&&(b=b(e,l))){zW(d,b,n,u);break e}T&&T(e,h,l),e==="focusout"&&(T=h._wrapperState)&&T.controlled&&h.type==="number"&&CA(h,"number",h.value)}switch(T=l?of(l):window,e){case"focusin":(r$(T)||T.contentEditable==="true")&&(nf=T,LA=l,t0=null);break;case"focusout":t0=LA=nf=null;break;case"mousedown":kA=!0;break;case"contextmenu":case"mouseup":case"dragend":kA=!1,c$(d,n,u);break;case"selectionchange":if(pge)break;case"keydown":case"keyup":c$(d,n,u)}var R;if(eP)e:{switch(e){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else tf?jW(e,n)&&(A="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(VW&&n.locale!=="ko"&&(tf||A!=="onCompositionStart"?A==="onCompositionEnd"&&tf&&(R=$W()):(Ql=u,JN="value"in Ql?Ql.value:Ql.textContent,tf=!0)),T=bS(l,A),0<T.length&&(A=new ZB(A,e,null,n,u),d.push({event:A,listeners:T}),R?A.data=R:(R=HW(n),R!==null&&(A.data=R)))),(R=nge?rge(e,n):ige(e,n))&&(l=bS(l,"onBeforeInput"),0<l.length&&(u=new ZB("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:l}),u.data=R))}tG(d,t)})}function q0(e,t,n){return{instance:e,listener:t,currentTarget:n}}function bS(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=V0(e,n),o!=null&&r.unshift(q0(e,o,i)),o=V0(e,t),o!=null&&r.push(q0(e,o,i))),e=e.return}return r}function Ih(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function d$(e,t,n,r,i){for(var o=t._reactName,a=[];n!==null&&n!==r;){var s=n,c=s.alternate,l=s.stateNode;if(c!==null&&c===r)break;s.tag===5&&l!==null&&(s=l,i?(c=V0(n,o),c!=null&&a.unshift(q0(n,c,s))):i||(c=V0(n,o),c!=null&&a.push(q0(n,c,s)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var Ege=/\r\n?/g,_ge=/\u0000|\uFFFD/g;function h$(e){return(typeof e=="string"?e:""+e).replace(Ege,`
`).replace(_ge,"")}function dE(e,t,n){if(t=h$(t),h$(e)!==t&&n)throw Error(Fe(425))}function TS(){}var MA=null,FA=null;function UA(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var BA=typeof setTimeout=="function"?setTimeout:void 0,Sge=typeof clearTimeout=="function"?clearTimeout:void 0,f$=typeof Promise=="function"?Promise:void 0,yge=typeof queueMicrotask=="function"?queueMicrotask:typeof f$<"u"?function(e){return f$.resolve(null).then(e).catch(Cge)}:BA;function Cge(e){setTimeout(function(){throw e})}function fR(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),z0(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);z0(t)}function fu(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function p$(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Rp=Math.random().toString(36).slice(2),gc="__reactFiber$"+Rp,Y0="__reactProps$"+Rp,dl="__reactContainer$"+Rp,$A="__reactEvents$"+Rp,bge="__reactListeners$"+Rp,Tge="__reactHandles$"+Rp;function ud(e){var t=e[gc];if(t)return t;for(var n=e.parentNode;n;){if(t=n[dl]||n[gc]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=p$(e);e!==null;){if(n=e[gc])return n;e=p$(e)}return t}e=n,n=e.parentNode}return null}function $g(e){return e=e[gc]||e[dl],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function of(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Fe(33))}function iC(e){return e[Y0]||null}var VA=[],af=-1;function Pu(e){return{current:e}}function Cr(e){0>af||(e.current=VA[af],VA[af]=null,af--)}function mr(e,t){af++,VA[af]=e.current,e.current=t}var Cu={},vo=Pu(Cu),Qo=Pu(!1),Nd=Cu;function Kf(e,t){var n=e.type.contextTypes;if(!n)return Cu;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Zo(e){return e=e.childContextTypes,e!=null}function RS(){Cr(Qo),Cr(vo)}function m$(e,t,n){if(vo.current!==Cu)throw Error(Fe(168));mr(vo,t),mr(Qo,n)}function rG(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(Fe(108,c0e(e)||"Unknown",i));return Mr({},n,r)}function wS(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Cu,Nd=vo.current,mr(vo,e),mr(Qo,Qo.current),!0}function g$(e,t,n){var r=e.stateNode;if(!r)throw Error(Fe(169));n?(e=rG(e,t,Nd),r.__reactInternalMemoizedMergedChildContext=e,Cr(Qo),Cr(vo),mr(vo,e)):Cr(Qo),mr(Qo,n)}var el=null,oC=!1,pR=!1;function iG(e){el===null?el=[e]:el.push(e)}function Rge(e){oC=!0,iG(e)}function Du(){if(!pR&&el!==null){pR=!0;var e=0,t=Qn;try{var n=el;for(Qn=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}el=null,oC=!1}catch(i){throw el!==null&&(el=el.slice(e+1)),OW(KN,Du),i}finally{Qn=t,pR=!1}}return null}var sf=[],cf=0,IS=null,AS=0,Xa=[],Ja=0,Pd=null,rl=1,il="";function qu(e,t){sf[cf++]=AS,sf[cf++]=IS,IS=e,AS=t}function oG(e,t,n){Xa[Ja++]=rl,Xa[Ja++]=il,Xa[Ja++]=Pd,Pd=e;var r=rl;e=il;var i=32-Fs(r)-1;r&=~(1<<i),n+=1;var o=32-Fs(t)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,rl=1<<32-Fs(t)+i|n<<i|r,il=o+e}else rl=1<<o|n<<i|r,il=e}function nP(e){e.return!==null&&(qu(e,1),oG(e,1,0))}function rP(e){for(;e===IS;)IS=sf[--cf],sf[cf]=null,AS=sf[--cf],sf[cf]=null;for(;e===Pd;)Pd=Xa[--Ja],Xa[Ja]=null,il=Xa[--Ja],Xa[Ja]=null,rl=Xa[--Ja],Xa[Ja]=null}var Sa=null,Ea=null,Rr=!1,Ds=null;function aG(e,t){var n=ns(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function v$(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Sa=e,Ea=fu(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Sa=e,Ea=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Pd!==null?{id:rl,overflow:il}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=ns(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Sa=e,Ea=null,!0):!1;default:return!1}}function jA(e){return(e.mode&1)!==0&&(e.flags&128)===0}function HA(e){if(Rr){var t=Ea;if(t){var n=t;if(!v$(e,t)){if(jA(e))throw Error(Fe(418));t=fu(n.nextSibling);var r=Sa;t&&v$(e,t)?aG(r,n):(e.flags=e.flags&-4097|2,Rr=!1,Sa=e)}}else{if(jA(e))throw Error(Fe(418));e.flags=e.flags&-4097|2,Rr=!1,Sa=e}}}function E$(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Sa=e}function hE(e){if(e!==Sa)return!1;if(!Rr)return E$(e),Rr=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!UA(e.type,e.memoizedProps)),t&&(t=Ea)){if(jA(e))throw sG(),Error(Fe(418));for(;t;)aG(e,t),t=fu(t.nextSibling)}if(E$(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Fe(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Ea=fu(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Ea=null}}else Ea=Sa?fu(e.stateNode.nextSibling):null;return!0}function sG(){for(var e=Ea;e;)e=fu(e.nextSibling)}function qf(){Ea=Sa=null,Rr=!1}function iP(e){Ds===null?Ds=[e]:Ds.push(e)}var wge=El.ReactCurrentBatchConfig;function rm(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Fe(309));var r=n.stateNode}if(!r)throw Error(Fe(147,e));var i=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(a){var s=i.refs;a===null?delete s[o]:s[o]=a},t._stringRef=o,t)}if(typeof e!="string")throw Error(Fe(284));if(!n._owner)throw Error(Fe(290,e))}return e}function fE(e,t){throw e=Object.prototype.toString.call(t),Error(Fe(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function _$(e){var t=e._init;return t(e._payload)}function cG(e){function t(_,E){if(e){var S=_.deletions;S===null?(_.deletions=[E],_.flags|=16):S.push(E)}}function n(_,E){if(!e)return null;for(;E!==null;)t(_,E),E=E.sibling;return null}function r(_,E){for(_=new Map;E!==null;)E.key!==null?_.set(E.key,E):_.set(E.index,E),E=E.sibling;return _}function i(_,E){return _=vu(_,E),_.index=0,_.sibling=null,_}function o(_,E,S){return _.index=S,e?(S=_.alternate,S!==null?(S=S.index,S<E?(_.flags|=2,E):S):(_.flags|=2,E)):(_.flags|=1048576,E)}function a(_){return e&&_.alternate===null&&(_.flags|=2),_}function s(_,E,S,C){return E===null||E.tag!==6?(E=yR(S,_.mode,C),E.return=_,E):(E=i(E,S),E.return=_,E)}function c(_,E,S,C){var b=S.type;return b===ef?u(_,E,S.props.children,C,S.key):E!==null&&(E.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Bl&&_$(b)===E.type)?(C=i(E,S.props),C.ref=rm(_,E,S),C.return=_,C):(C=I_(S.type,S.key,S.props,null,_.mode,C),C.ref=rm(_,E,S),C.return=_,C)}function l(_,E,S,C){return E===null||E.tag!==4||E.stateNode.containerInfo!==S.containerInfo||E.stateNode.implementation!==S.implementation?(E=CR(S,_.mode,C),E.return=_,E):(E=i(E,S.children||[]),E.return=_,E)}function u(_,E,S,C,b){return E===null||E.tag!==7?(E=Sd(S,_.mode,C,b),E.return=_,E):(E=i(E,S),E.return=_,E)}function d(_,E,S){if(typeof E=="string"&&E!==""||typeof E=="number")return E=yR(""+E,_.mode,S),E.return=_,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case nE:return S=I_(E.type,E.key,E.props,null,_.mode,S),S.ref=rm(_,null,E),S.return=_,S;case Zh:return E=CR(E,_.mode,S),E.return=_,E;case Bl:var C=E._init;return d(_,C(E._payload),S)}if(Nm(E)||Qp(E))return E=Sd(E,_.mode,S,null),E.return=_,E;fE(_,E)}return null}function h(_,E,S,C){var b=E!==null?E.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return b!==null?null:s(_,E,""+S,C);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case nE:return S.key===b?c(_,E,S,C):null;case Zh:return S.key===b?l(_,E,S,C):null;case Bl:return b=S._init,h(_,E,b(S._payload),C)}if(Nm(S)||Qp(S))return b!==null?null:u(_,E,S,C,null);fE(_,S)}return null}function f(_,E,S,C,b){if(typeof C=="string"&&C!==""||typeof C=="number")return _=_.get(S)||null,s(E,_,""+C,b);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case nE:return _=_.get(C.key===null?S:C.key)||null,c(E,_,C,b);case Zh:return _=_.get(C.key===null?S:C.key)||null,l(E,_,C,b);case Bl:var T=C._init;return f(_,E,S,T(C._payload),b)}if(Nm(C)||Qp(C))return _=_.get(S)||null,u(E,_,C,b,null);fE(E,C)}return null}function g(_,E,S,C){for(var b=null,T=null,R=E,A=E=0,O=null;R!==null&&A<S.length;A++){R.index>A?(O=R,R=null):O=R.sibling;var x=h(_,R,S[A],C);if(x===null){R===null&&(R=O);break}e&&R&&x.alternate===null&&t(_,R),E=o(x,E,A),T===null?b=x:T.sibling=x,T=x,R=O}if(A===S.length)return n(_,R),Rr&&qu(_,A),b;if(R===null){for(;A<S.length;A++)R=d(_,S[A],C),R!==null&&(E=o(R,E,A),T===null?b=R:T.sibling=R,T=R);return Rr&&qu(_,A),b}for(R=r(_,R);A<S.length;A++)O=f(R,_,A,S[A],C),O!==null&&(e&&O.alternate!==null&&R.delete(O.key===null?A:O.key),E=o(O,E,A),T===null?b=O:T.sibling=O,T=O);return e&&R.forEach(function(M){return t(_,M)}),Rr&&qu(_,A),b}function p(_,E,S,C){var b=Qp(S);if(typeof b!="function")throw Error(Fe(150));if(S=b.call(S),S==null)throw Error(Fe(151));for(var T=b=null,R=E,A=E=0,O=null,x=S.next();R!==null&&!x.done;A++,x=S.next()){R.index>A?(O=R,R=null):O=R.sibling;var M=h(_,R,x.value,C);if(M===null){R===null&&(R=O);break}e&&R&&M.alternate===null&&t(_,R),E=o(M,E,A),T===null?b=M:T.sibling=M,T=M,R=O}if(x.done)return n(_,R),Rr&&qu(_,A),b;if(R===null){for(;!x.done;A++,x=S.next())x=d(_,x.value,C),x!==null&&(E=o(x,E,A),T===null?b=x:T.sibling=x,T=x);return Rr&&qu(_,A),b}for(R=r(_,R);!x.done;A++,x=S.next())x=f(R,_,A,x.value,C),x!==null&&(e&&x.alternate!==null&&R.delete(x.key===null?A:x.key),E=o(x,E,A),T===null?b=x:T.sibling=x,T=x);return e&&R.forEach(function($){return t(_,$)}),Rr&&qu(_,A),b}function m(_,E,S,C){if(typeof S=="object"&&S!==null&&S.type===ef&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case nE:e:{for(var b=S.key,T=E;T!==null;){if(T.key===b){if(b=S.type,b===ef){if(T.tag===7){n(_,T.sibling),E=i(T,S.props.children),E.return=_,_=E;break e}}else if(T.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Bl&&_$(b)===T.type){n(_,T.sibling),E=i(T,S.props),E.ref=rm(_,T,S),E.return=_,_=E;break e}n(_,T);break}else t(_,T);T=T.sibling}S.type===ef?(E=Sd(S.props.children,_.mode,C,S.key),E.return=_,_=E):(C=I_(S.type,S.key,S.props,null,_.mode,C),C.ref=rm(_,E,S),C.return=_,_=C)}return a(_);case Zh:e:{for(T=S.key;E!==null;){if(E.key===T)if(E.tag===4&&E.stateNode.containerInfo===S.containerInfo&&E.stateNode.implementation===S.implementation){n(_,E.sibling),E=i(E,S.children||[]),E.return=_,_=E;break e}else{n(_,E);break}else t(_,E);E=E.sibling}E=CR(S,_.mode,C),E.return=_,_=E}return a(_);case Bl:return T=S._init,m(_,E,T(S._payload),C)}if(Nm(S))return g(_,E,S,C);if(Qp(S))return p(_,E,S,C);fE(_,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,E!==null&&E.tag===6?(n(_,E.sibling),E=i(E,S),E.return=_,_=E):(n(_,E),E=yR(S,_.mode,C),E.return=_,_=E),a(_)):n(_,E)}return m}var Yf=cG(!0),lG=cG(!1),OS=Pu(null),xS=null,lf=null,oP=null;function aP(){oP=lf=xS=null}function sP(e){var t=OS.current;Cr(OS),e._currentValue=t}function zA(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Of(e,t){xS=e,oP=lf=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Yo=!0),e.firstContext=null)}function as(e){var t=e._currentValue;if(oP!==e)if(e={context:e,memoizedValue:t,next:null},lf===null){if(xS===null)throw Error(Fe(308));lf=e,xS.dependencies={lanes:0,firstContext:e}}else lf=lf.next=e;return t}var dd=null;function cP(e){dd===null?dd=[e]:dd.push(e)}function uG(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,cP(t)):(n.next=i.next,i.next=n),t.interleaved=n,hl(e,r)}function hl(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var $l=!1;function lP(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function dG(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function sl(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function pu(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Nn&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,hl(e,n)}return i=r.interleaved,i===null?(t.next=t,cP(r)):(t.next=i.next,i.next=t),r.interleaved=t,hl(e,n)}function y_(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,qN(e,n)}}function S$(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?i=o=t:o=o.next=t}else i=o=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function NS(e,t,n,r){var i=e.updateQueue;$l=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var c=s,l=c.next;c.next=null,a===null?o=l:a.next=l,a=c;var u=e.alternate;u!==null&&(u=u.updateQueue,s=u.lastBaseUpdate,s!==a&&(s===null?u.firstBaseUpdate=l:s.next=l,u.lastBaseUpdate=c))}if(o!==null){var d=i.baseState;a=0,u=l=c=null,s=o;do{var h=s.lane,f=s.eventTime;if((r&h)===h){u!==null&&(u=u.next={eventTime:f,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var g=e,p=s;switch(h=t,f=n,p.tag){case 1:if(g=p.payload,typeof g=="function"){d=g.call(f,d,h);break e}d=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=p.payload,h=typeof g=="function"?g.call(f,d,h):g,h==null)break e;d=Mr({},d,h);break e;case 2:$l=!0}}s.callback!==null&&s.lane!==0&&(e.flags|=64,h=i.effects,h===null?i.effects=[s]:h.push(s))}else f={eventTime:f,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},u===null?(l=u=f,c=d):u=u.next=f,a|=h;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;h=s,s=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(1);if(u===null&&(c=d),i.baseState=c,i.firstBaseUpdate=l,i.lastBaseUpdate=u,t=i.shared.interleaved,t!==null){i=t;do a|=i.lane,i=i.next;while(i!==t)}else o===null&&(i.shared.lanes=0);Ld|=a,e.lanes=a,e.memoizedState=d}}function y$(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Fe(191,i));i.call(r)}}}var Vg={},Tc=Pu(Vg),X0=Pu(Vg),J0=Pu(Vg);function hd(e){if(e===Vg)throw Error(Fe(174));return e}function uP(e,t){switch(mr(J0,t),mr(X0,e),mr(Tc,Vg),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:TA(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=TA(t,e)}Cr(Tc),mr(Tc,t)}function Xf(){Cr(Tc),Cr(X0),Cr(J0)}function hG(e){hd(J0.current);var t=hd(Tc.current),n=TA(t,e.type);t!==n&&(mr(X0,e),mr(Tc,n))}function dP(e){X0.current===e&&(Cr(Tc),Cr(X0))}var Nr=Pu(0);function PS(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var mR=[];function hP(){for(var e=0;e<mR.length;e++)mR[e]._workInProgressVersionPrimary=null;mR.length=0}var C_=El.ReactCurrentDispatcher,gR=El.ReactCurrentBatchConfig,Dd=0,kr=null,Si=null,xi=null,DS=!1,n0=!1,Q0=0,Ige=0;function ao(){throw Error(Fe(321))}function fP(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Hs(e[n],t[n]))return!1;return!0}function pP(e,t,n,r,i,o){if(Dd=o,kr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,C_.current=e===null||e.memoizedState===null?Nge:Pge,e=n(r,i),n0){o=0;do{if(n0=!1,Q0=0,25<=o)throw Error(Fe(301));o+=1,xi=Si=null,t.updateQueue=null,C_.current=Dge,e=n(r,i)}while(n0)}if(C_.current=LS,t=Si!==null&&Si.next!==null,Dd=0,xi=Si=kr=null,DS=!1,t)throw Error(Fe(300));return e}function mP(){var e=Q0!==0;return Q0=0,e}function lc(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xi===null?kr.memoizedState=xi=e:xi=xi.next=e,xi}function ss(){if(Si===null){var e=kr.alternate;e=e!==null?e.memoizedState:null}else e=Si.next;var t=xi===null?kr.memoizedState:xi.next;if(t!==null)xi=t,Si=e;else{if(e===null)throw Error(Fe(310));Si=e,e={memoizedState:Si.memoizedState,baseState:Si.baseState,baseQueue:Si.baseQueue,queue:Si.queue,next:null},xi===null?kr.memoizedState=xi=e:xi=xi.next=e}return xi}function Z0(e,t){return typeof t=="function"?t(e):t}function vR(e){var t=ss(),n=t.queue;if(n===null)throw Error(Fe(311));n.lastRenderedReducer=e;var r=Si,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var s=a=null,c=null,l=o;do{var u=l.lane;if((Dd&u)===u)c!==null&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var d={lane:u,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};c===null?(s=c=d,a=r):c=c.next=d,kr.lanes|=u,Ld|=u}l=l.next}while(l!==null&&l!==o);c===null?a=r:c.next=s,Hs(r,t.memoizedState)||(Yo=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do o=i.lane,kr.lanes|=o,Ld|=o,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ER(e){var t=ss(),n=t.queue;if(n===null)throw Error(Fe(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do o=e(o,a.action),a=a.next;while(a!==i);Hs(o,t.memoizedState)||(Yo=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function fG(){}function pG(e,t){var n=kr,r=ss(),i=t(),o=!Hs(r.memoizedState,i);if(o&&(r.memoizedState=i,Yo=!0),r=r.queue,gP(vG.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||xi!==null&&xi.memoizedState.tag&1){if(n.flags|=2048,eg(9,gG.bind(null,n,r,i,t),void 0,null),Mi===null)throw Error(Fe(349));Dd&30||mG(n,t,i)}return i}function mG(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=kr.updateQueue,t===null?(t={lastEffect:null,stores:null},kr.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function gG(e,t,n,r){t.value=n,t.getSnapshot=r,EG(t)&&_G(e)}function vG(e,t,n){return n(function(){EG(t)&&_G(e)})}function EG(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Hs(e,n)}catch{return!0}}function _G(e){var t=hl(e,1);t!==null&&Us(t,e,1,-1)}function C$(e){var t=lc();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Z0,lastRenderedState:e},t.queue=e,e=e.dispatch=xge.bind(null,kr,e),[t.memoizedState,e]}function eg(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=kr.updateQueue,t===null?(t={lastEffect:null,stores:null},kr.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function SG(){return ss().memoizedState}function b_(e,t,n,r){var i=lc();kr.flags|=e,i.memoizedState=eg(1|t,n,void 0,r===void 0?null:r)}function aC(e,t,n,r){var i=ss();r=r===void 0?null:r;var o=void 0;if(Si!==null){var a=Si.memoizedState;if(o=a.destroy,r!==null&&fP(r,a.deps)){i.memoizedState=eg(t,n,o,r);return}}kr.flags|=e,i.memoizedState=eg(1|t,n,o,r)}function b$(e,t){return b_(8390656,8,e,t)}function gP(e,t){return aC(2048,8,e,t)}function yG(e,t){return aC(4,2,e,t)}function CG(e,t){return aC(4,4,e,t)}function bG(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function TG(e,t,n){return n=n!=null?n.concat([e]):null,aC(4,4,bG.bind(null,t,e),n)}function vP(){}function RG(e,t){var n=ss();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&fP(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function wG(e,t){var n=ss();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&fP(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function IG(e,t,n){return Dd&21?(Hs(n,t)||(n=PW(),kr.lanes|=n,Ld|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Yo=!0),e.memoizedState=n)}function Age(e,t){var n=Qn;Qn=n!==0&&4>n?n:4,e(!0);var r=gR.transition;gR.transition={};try{e(!1),t()}finally{Qn=n,gR.transition=r}}function AG(){return ss().memoizedState}function Oge(e,t,n){var r=gu(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},OG(e))xG(t,n);else if(n=uG(e,t,n,r),n!==null){var i=xo();Us(n,e,r,i),NG(n,t,r)}}function xge(e,t,n){var r=gu(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(OG(e))xG(t,i);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var a=t.lastRenderedState,s=o(a,n);if(i.hasEagerState=!0,i.eagerState=s,Hs(s,a)){var c=t.interleaved;c===null?(i.next=i,cP(t)):(i.next=c.next,c.next=i),t.interleaved=i;return}}catch{}finally{}n=uG(e,t,i,r),n!==null&&(i=xo(),Us(n,e,r,i),NG(n,t,r))}}function OG(e){var t=e.alternate;return e===kr||t!==null&&t===kr}function xG(e,t){n0=DS=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function NG(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,qN(e,n)}}var LS={readContext:as,useCallback:ao,useContext:ao,useEffect:ao,useImperativeHandle:ao,useInsertionEffect:ao,useLayoutEffect:ao,useMemo:ao,useReducer:ao,useRef:ao,useState:ao,useDebugValue:ao,useDeferredValue:ao,useTransition:ao,useMutableSource:ao,useSyncExternalStore:ao,useId:ao,unstable_isNewReconciler:!1},Nge={readContext:as,useCallback:function(e,t){return lc().memoizedState=[e,t===void 0?null:t],e},useContext:as,useEffect:b$,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,b_(4194308,4,bG.bind(null,t,e),n)},useLayoutEffect:function(e,t){return b_(4194308,4,e,t)},useInsertionEffect:function(e,t){return b_(4,2,e,t)},useMemo:function(e,t){var n=lc();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=lc();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Oge.bind(null,kr,e),[r.memoizedState,e]},useRef:function(e){var t=lc();return e={current:e},t.memoizedState=e},useState:C$,useDebugValue:vP,useDeferredValue:function(e){return lc().memoizedState=e},useTransition:function(){var e=C$(!1),t=e[0];return e=Age.bind(null,e[1]),lc().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=kr,i=lc();if(Rr){if(n===void 0)throw Error(Fe(407));n=n()}else{if(n=t(),Mi===null)throw Error(Fe(349));Dd&30||mG(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,b$(vG.bind(null,r,o,e),[e]),r.flags|=2048,eg(9,gG.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=lc(),t=Mi.identifierPrefix;if(Rr){var n=il,r=rl;n=(r&~(1<<32-Fs(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Q0++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Ige++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Pge={readContext:as,useCallback:RG,useContext:as,useEffect:gP,useImperativeHandle:TG,useInsertionEffect:yG,useLayoutEffect:CG,useMemo:wG,useReducer:vR,useRef:SG,useState:function(){return vR(Z0)},useDebugValue:vP,useDeferredValue:function(e){var t=ss();return IG(t,Si.memoizedState,e)},useTransition:function(){var e=vR(Z0)[0],t=ss().memoizedState;return[e,t]},useMutableSource:fG,useSyncExternalStore:pG,useId:AG,unstable_isNewReconciler:!1},Dge={readContext:as,useCallback:RG,useContext:as,useEffect:gP,useImperativeHandle:TG,useInsertionEffect:yG,useLayoutEffect:CG,useMemo:wG,useReducer:ER,useRef:SG,useState:function(){return ER(Z0)},useDebugValue:vP,useDeferredValue:function(e){var t=ss();return Si===null?t.memoizedState=e:IG(t,Si.memoizedState,e)},useTransition:function(){var e=ER(Z0)[0],t=ss().memoizedState;return[e,t]},useMutableSource:fG,useSyncExternalStore:pG,useId:AG,unstable_isNewReconciler:!1};function Is(e,t){if(e&&e.defaultProps){t=Mr({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function WA(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Mr({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var sC={isMounted:function(e){return(e=e._reactInternals)?Jd(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=xo(),i=gu(e),o=sl(r,i);o.payload=t,n!=null&&(o.callback=n),t=pu(e,o,i),t!==null&&(Us(t,e,i,r),y_(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=xo(),i=gu(e),o=sl(r,i);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=pu(e,o,i),t!==null&&(Us(t,e,i,r),y_(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=xo(),r=gu(e),i=sl(n,r);i.tag=2,t!=null&&(i.callback=t),t=pu(e,i,r),t!==null&&(Us(t,e,r,n),y_(t,e,r))}};function T$(e,t,n,r,i,o,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,a):t.prototype&&t.prototype.isPureReactComponent?!G0(n,r)||!G0(i,o):!0}function PG(e,t,n){var r=!1,i=Cu,o=t.contextType;return typeof o=="object"&&o!==null?o=as(o):(i=Zo(t)?Nd:vo.current,r=t.contextTypes,o=(r=r!=null)?Kf(e,i):Cu),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=sC,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function R$(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&sC.enqueueReplaceState(t,t.state,null)}function GA(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},lP(e);var o=t.contextType;typeof o=="object"&&o!==null?i.context=as(o):(o=Zo(t)?Nd:vo.current,i.context=Kf(e,o)),i.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(WA(e,t,o,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&sC.enqueueReplaceState(i,i.state,null),NS(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Jf(e,t){try{var n="",r=t;do n+=s0e(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:i,digest:null}}function _R(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function KA(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Lge=typeof WeakMap=="function"?WeakMap:Map;function DG(e,t,n){n=sl(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){MS||(MS=!0,rO=r),KA(e,t)},n}function LG(e,t,n){n=sl(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){KA(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){KA(e,t),typeof r!="function"&&(mu===null?mu=new Set([this]):mu.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function w$(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Lge;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=qge.bind(null,e,t,n),t.then(e,e))}function I$(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function A$(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=sl(-1,1),t.tag=2,pu(n,t,1))),n.lanes|=1),e)}var kge=El.ReactCurrentOwner,Yo=!1;function wo(e,t,n,r){t.child=e===null?lG(t,null,n,r):Yf(t,e.child,n,r)}function O$(e,t,n,r,i){n=n.render;var o=t.ref;return Of(t,i),r=pP(e,t,n,r,o,i),n=mP(),e!==null&&!Yo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,fl(e,t,i)):(Rr&&n&&nP(t),t.flags|=1,wo(e,t,r,i),t.child)}function x$(e,t,n,r,i){if(e===null){var o=n.type;return typeof o=="function"&&!RP(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,kG(e,t,o,r,i)):(e=I_(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&i)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:G0,n(a,r)&&e.ref===t.ref)return fl(e,t,i)}return t.flags|=1,e=vu(o,r),e.ref=t.ref,e.return=t,t.child=e}function kG(e,t,n,r,i){if(e!==null){var o=e.memoizedProps;if(G0(o,r)&&e.ref===t.ref)if(Yo=!1,t.pendingProps=r=o,(e.lanes&i)!==0)e.flags&131072&&(Yo=!0);else return t.lanes=e.lanes,fl(e,t,i)}return qA(e,t,n,r,i)}function MG(e,t,n){var r=t.pendingProps,i=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},mr(df,ha),ha|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,mr(df,ha),ha|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,mr(df,ha),ha|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,mr(df,ha),ha|=r;return wo(e,t,i,n),t.child}function FG(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function qA(e,t,n,r,i){var o=Zo(n)?Nd:vo.current;return o=Kf(t,o),Of(t,i),n=pP(e,t,n,r,o,i),r=mP(),e!==null&&!Yo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,fl(e,t,i)):(Rr&&r&&nP(t),t.flags|=1,wo(e,t,n,i),t.child)}function N$(e,t,n,r,i){if(Zo(n)){var o=!0;wS(t)}else o=!1;if(Of(t,i),t.stateNode===null)T_(e,t),PG(t,n,r),GA(t,n,r,i),r=!0;else if(e===null){var a=t.stateNode,s=t.memoizedProps;a.props=s;var c=a.context,l=n.contextType;typeof l=="object"&&l!==null?l=as(l):(l=Zo(n)?Nd:vo.current,l=Kf(t,l));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof a.getSnapshotBeforeUpdate=="function";d||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==r||c!==l)&&R$(t,a,r,l),$l=!1;var h=t.memoizedState;a.state=h,NS(t,r,a,i),c=t.memoizedState,s!==r||h!==c||Qo.current||$l?(typeof u=="function"&&(WA(t,n,u,r),c=t.memoizedState),(s=$l||T$(t,n,s,r,h,c,l))?(d||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=l,r=s):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,dG(e,t),s=t.memoizedProps,l=t.type===t.elementType?s:Is(t.type,s),a.props=l,d=t.pendingProps,h=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=as(c):(c=Zo(n)?Nd:vo.current,c=Kf(t,c));var f=n.getDerivedStateFromProps;(u=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==d||h!==c)&&R$(t,a,r,c),$l=!1,h=t.memoizedState,a.state=h,NS(t,r,a,i);var g=t.memoizedState;s!==d||h!==g||Qo.current||$l?(typeof f=="function"&&(WA(t,n,f,r),g=t.memoizedState),(l=$l||T$(t,n,l,r,h,g,c)||!1)?(u||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,g,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,g,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=g),a.props=r,a.state=g,a.context=c,r=l):(typeof a.componentDidUpdate!="function"||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return YA(e,t,n,r,o,i)}function YA(e,t,n,r,i,o){FG(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return i&&g$(t,n,!1),fl(e,t,o);r=t.stateNode,kge.current=t;var s=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=Yf(t,e.child,null,o),t.child=Yf(t,null,s,o)):wo(e,t,s,o),t.memoizedState=r.state,i&&g$(t,n,!0),t.child}function UG(e){var t=e.stateNode;t.pendingContext?m$(e,t.pendingContext,t.pendingContext!==t.context):t.context&&m$(e,t.context,!1),uP(e,t.containerInfo)}function P$(e,t,n,r,i){return qf(),iP(i),t.flags|=256,wo(e,t,n,r),t.child}var XA={dehydrated:null,treeContext:null,retryLane:0};function JA(e){return{baseLanes:e,cachePool:null,transitions:null}}function BG(e,t,n){var r=t.pendingProps,i=Nr.current,o=!1,a=(t.flags&128)!==0,s;if((s=a)||(s=e!==null&&e.memoizedState===null?!1:(i&2)!==0),s?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),mr(Nr,i&1),e===null)return HA(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,o?(r=t.mode,o=t.child,a={mode:"hidden",children:a},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=uC(a,r,0,null),e=Sd(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=JA(n),t.memoizedState=XA,e):EP(t,a));if(i=e.memoizedState,i!==null&&(s=i.dehydrated,s!==null))return Mge(e,t,a,r,s,i,n);if(o){o=r.fallback,a=t.mode,i=e.child,s=i.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=vu(i,c),r.subtreeFlags=i.subtreeFlags&14680064),s!==null?o=vu(s,o):(o=Sd(o,a,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,a=e.child.memoizedState,a=a===null?JA(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=e.childLanes&~n,t.memoizedState=XA,r}return o=e.child,e=o.sibling,r=vu(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function EP(e,t){return t=uC({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function pE(e,t,n,r){return r!==null&&iP(r),Yf(t,e.child,null,n),e=EP(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Mge(e,t,n,r,i,o,a){if(n)return t.flags&256?(t.flags&=-257,r=_R(Error(Fe(422))),pE(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=uC({mode:"visible",children:r.children},i,0,null),o=Sd(o,i,a,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&Yf(t,e.child,null,a),t.child.memoizedState=JA(a),t.memoizedState=XA,o);if(!(t.mode&1))return pE(e,t,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var s=r.dgst;return r=s,o=Error(Fe(419)),r=_R(o,r,void 0),pE(e,t,a,r)}if(s=(a&e.childLanes)!==0,Yo||s){if(r=Mi,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,hl(e,i),Us(r,e,i,-1))}return TP(),r=_R(Error(Fe(421))),pE(e,t,a,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=Yge.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,Ea=fu(i.nextSibling),Sa=t,Rr=!0,Ds=null,e!==null&&(Xa[Ja++]=rl,Xa[Ja++]=il,Xa[Ja++]=Pd,rl=e.id,il=e.overflow,Pd=t),t=EP(t,r.children),t.flags|=4096,t)}function D$(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),zA(e.return,t,n)}function SR(e,t,n,r,i){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function $G(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(wo(e,t,r.children,n),r=Nr.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&D$(e,n,t);else if(e.tag===19)D$(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(mr(Nr,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&PS(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),SR(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&PS(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}SR(t,!0,n,null,o);break;case"together":SR(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function T_(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function fl(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Ld|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Fe(153));if(t.child!==null){for(e=t.child,n=vu(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=vu(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Fge(e,t,n){switch(t.tag){case 3:UG(t),qf();break;case 5:hG(t);break;case 1:Zo(t.type)&&wS(t);break;case 4:uP(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;mr(OS,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(mr(Nr,Nr.current&1),t.flags|=128,null):n&t.child.childLanes?BG(e,t,n):(mr(Nr,Nr.current&1),e=fl(e,t,n),e!==null?e.sibling:null);mr(Nr,Nr.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return $G(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),mr(Nr,Nr.current),r)break;return null;case 22:case 23:return t.lanes=0,MG(e,t,n)}return fl(e,t,n)}var VG,QA,jG,HG;VG=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};QA=function(){};jG=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,hd(Tc.current);var o=null;switch(n){case"input":i=SA(e,i),r=SA(e,r),o=[];break;case"select":i=Mr({},i,{value:void 0}),r=Mr({},r,{value:void 0}),o=[];break;case"textarea":i=bA(e,i),r=bA(e,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=TS)}RA(n,r);var a;n=null;for(l in i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(B0.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=i!=null?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(c!=null||s!=null))if(l==="style")if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,s=s?s.__html:void 0,c!=null&&s!==c&&(o=o||[]).push(l,c)):l==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(l,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(B0.hasOwnProperty(l)?(c!=null&&l==="onScroll"&&Er("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}};HG=function(e,t,n,r){n!==r&&(t.flags|=4)};function im(e,t){if(!Rr)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function so(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Uge(e,t,n){var r=t.pendingProps;switch(rP(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return so(t),null;case 1:return Zo(t.type)&&RS(),so(t),null;case 3:return r=t.stateNode,Xf(),Cr(Qo),Cr(vo),hP(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(hE(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ds!==null&&(aO(Ds),Ds=null))),QA(e,t),so(t),null;case 5:dP(t);var i=hd(J0.current);if(n=t.type,e!==null&&t.stateNode!=null)jG(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(Fe(166));return so(t),null}if(e=hd(Tc.current),hE(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[gc]=t,r[Y0]=o,e=(t.mode&1)!==0,n){case"dialog":Er("cancel",r),Er("close",r);break;case"iframe":case"object":case"embed":Er("load",r);break;case"video":case"audio":for(i=0;i<Dm.length;i++)Er(Dm[i],r);break;case"source":Er("error",r);break;case"img":case"image":case"link":Er("error",r),Er("load",r);break;case"details":Er("toggle",r);break;case"input":jB(r,o),Er("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Er("invalid",r);break;case"textarea":zB(r,o),Er("invalid",r)}RA(n,o),i=null;for(var a in o)if(o.hasOwnProperty(a)){var s=o[a];a==="children"?typeof s=="string"?r.textContent!==s&&(o.suppressHydrationWarning!==!0&&dE(r.textContent,s,e),i=["children",s]):typeof s=="number"&&r.textContent!==""+s&&(o.suppressHydrationWarning!==!0&&dE(r.textContent,s,e),i=["children",""+s]):B0.hasOwnProperty(a)&&s!=null&&a==="onScroll"&&Er("scroll",r)}switch(n){case"input":rE(r),HB(r,o,!0);break;case"textarea":rE(r),WB(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=TS)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=vW(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[gc]=t,e[Y0]=r,VG(e,t,!1,!1),t.stateNode=e;e:{switch(a=wA(n,r),n){case"dialog":Er("cancel",e),Er("close",e),i=r;break;case"iframe":case"object":case"embed":Er("load",e),i=r;break;case"video":case"audio":for(i=0;i<Dm.length;i++)Er(Dm[i],e);i=r;break;case"source":Er("error",e),i=r;break;case"img":case"image":case"link":Er("error",e),Er("load",e),i=r;break;case"details":Er("toggle",e),i=r;break;case"input":jB(e,r),i=SA(e,r),Er("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Mr({},r,{value:void 0}),Er("invalid",e);break;case"textarea":zB(e,r),i=bA(e,r),Er("invalid",e);break;default:i=r}RA(n,i),s=i;for(o in s)if(s.hasOwnProperty(o)){var c=s[o];o==="style"?SW(e,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&EW(e,c)):o==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&$0(e,c):typeof c=="number"&&$0(e,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(B0.hasOwnProperty(o)?c!=null&&o==="onScroll"&&Er("scroll",e):c!=null&&jN(e,o,c,a))}switch(n){case"input":rE(e),HB(e,r,!1);break;case"textarea":rE(e),WB(e);break;case"option":r.value!=null&&e.setAttribute("value",""+yu(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?Rf(e,!!r.multiple,o,!1):r.defaultValue!=null&&Rf(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=TS)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return so(t),null;case 6:if(e&&t.stateNode!=null)HG(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(Fe(166));if(n=hd(J0.current),hd(Tc.current),hE(t)){if(r=t.stateNode,n=t.memoizedProps,r[gc]=t,(o=r.nodeValue!==n)&&(e=Sa,e!==null))switch(e.tag){case 3:dE(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&dE(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[gc]=t,t.stateNode=r}return so(t),null;case 13:if(Cr(Nr),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Rr&&Ea!==null&&t.mode&1&&!(t.flags&128))sG(),qf(),t.flags|=98560,o=!1;else if(o=hE(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(Fe(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Fe(317));o[gc]=t}else qf(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;so(t),o=!1}else Ds!==null&&(aO(Ds),Ds=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Nr.current&1?Ci===0&&(Ci=3):TP())),t.updateQueue!==null&&(t.flags|=4),so(t),null);case 4:return Xf(),QA(e,t),e===null&&K0(t.stateNode.containerInfo),so(t),null;case 10:return sP(t.type._context),so(t),null;case 17:return Zo(t.type)&&RS(),so(t),null;case 19:if(Cr(Nr),o=t.memoizedState,o===null)return so(t),null;if(r=(t.flags&128)!==0,a=o.rendering,a===null)if(r)im(o,!1);else{if(Ci!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=PS(e),a!==null){for(t.flags|=128,im(o,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,e=a.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return mr(Nr,Nr.current&1|2),t.child}e=e.sibling}o.tail!==null&&ii()>Qf&&(t.flags|=128,r=!0,im(o,!1),t.lanes=4194304)}else{if(!r)if(e=PS(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),im(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!Rr)return so(t),null}else 2*ii()-o.renderingStartTime>Qf&&n!==1073741824&&(t.flags|=128,r=!0,im(o,!1),t.lanes=4194304);o.isBackwards?(a.sibling=t.child,t.child=a):(n=o.last,n!==null?n.sibling=a:t.child=a,o.last=a)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=ii(),t.sibling=null,n=Nr.current,mr(Nr,r?n&1|2:n&1),t):(so(t),null);case 22:case 23:return bP(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?ha&1073741824&&(so(t),t.subtreeFlags&6&&(t.flags|=8192)):so(t),null;case 24:return null;case 25:return null}throw Error(Fe(156,t.tag))}function Bge(e,t){switch(rP(t),t.tag){case 1:return Zo(t.type)&&RS(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Xf(),Cr(Qo),Cr(vo),hP(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return dP(t),null;case 13:if(Cr(Nr),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Fe(340));qf()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Cr(Nr),null;case 4:return Xf(),null;case 10:return sP(t.type._context),null;case 22:case 23:return bP(),null;case 24:return null;default:return null}}var mE=!1,fo=!1,$ge=typeof WeakSet=="function"?WeakSet:Set,rt=null;function uf(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){zr(e,t,r)}else n.current=null}function ZA(e,t,n){try{n()}catch(r){zr(e,t,r)}}var L$=!1;function Vge(e,t){if(MA=yS,e=qW(),tP(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,s=-1,c=-1,l=0,u=0,d=e,h=null;t:for(;;){for(var f;d!==n||i!==0&&d.nodeType!==3||(s=a+i),d!==o||r!==0&&d.nodeType!==3||(c=a+r),d.nodeType===3&&(a+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===e)break t;if(h===n&&++l===i&&(s=a),h===o&&++u===r&&(c=a),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}n=s===-1||c===-1?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(FA={focusedElem:e,selectionRange:n},yS=!1,rt=t;rt!==null;)if(t=rt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,rt=e;else for(;rt!==null;){t=rt;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var p=g.memoizedProps,m=g.memoizedState,_=t.stateNode,E=_.getSnapshotBeforeUpdate(t.elementType===t.type?p:Is(t.type,p),m);_.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var S=t.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Fe(163))}}catch(C){zr(t,t.return,C)}if(e=t.sibling,e!==null){e.return=t.return,rt=e;break}rt=t.return}return g=L$,L$=!1,g}function r0(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,o!==void 0&&ZA(t,n,o)}i=i.next}while(i!==r)}}function cC(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function eO(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function zG(e){var t=e.alternate;t!==null&&(e.alternate=null,zG(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[gc],delete t[Y0],delete t[$A],delete t[bge],delete t[Tge])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function WG(e){return e.tag===5||e.tag===3||e.tag===4}function k$(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||WG(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function tO(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=TS));else if(r!==4&&(e=e.child,e!==null))for(tO(e,t,n),e=e.sibling;e!==null;)tO(e,t,n),e=e.sibling}function nO(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(nO(e,t,n),e=e.sibling;e!==null;)nO(e,t,n),e=e.sibling}var qi=null,Os=!1;function Ll(e,t,n){for(n=n.child;n!==null;)GG(e,t,n),n=n.sibling}function GG(e,t,n){if(bc&&typeof bc.onCommitFiberUnmount=="function")try{bc.onCommitFiberUnmount(eC,n)}catch{}switch(n.tag){case 5:fo||uf(n,t);case 6:var r=qi,i=Os;qi=null,Ll(e,t,n),qi=r,Os=i,qi!==null&&(Os?(e=qi,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):qi.removeChild(n.stateNode));break;case 18:qi!==null&&(Os?(e=qi,n=n.stateNode,e.nodeType===8?fR(e.parentNode,n):e.nodeType===1&&fR(e,n),z0(e)):fR(qi,n.stateNode));break;case 4:r=qi,i=Os,qi=n.stateNode.containerInfo,Os=!0,Ll(e,t,n),qi=r,Os=i;break;case 0:case 11:case 14:case 15:if(!fo&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&ZA(n,t,a),i=i.next}while(i!==r)}Ll(e,t,n);break;case 1:if(!fo&&(uf(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){zr(n,t,s)}Ll(e,t,n);break;case 21:Ll(e,t,n);break;case 22:n.mode&1?(fo=(r=fo)||n.memoizedState!==null,Ll(e,t,n),fo=r):Ll(e,t,n);break;default:Ll(e,t,n)}}function M$(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new $ge),t.forEach(function(r){var i=Xge.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function ys(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,s=a;e:for(;s!==null;){switch(s.tag){case 5:qi=s.stateNode,Os=!1;break e;case 3:qi=s.stateNode.containerInfo,Os=!0;break e;case 4:qi=s.stateNode.containerInfo,Os=!0;break e}s=s.return}if(qi===null)throw Error(Fe(160));GG(o,a,i),qi=null,Os=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(l){zr(i,t,l)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)KG(t,e),t=t.sibling}function KG(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ys(t,e),sc(e),r&4){try{r0(3,e,e.return),cC(3,e)}catch(p){zr(e,e.return,p)}try{r0(5,e,e.return)}catch(p){zr(e,e.return,p)}}break;case 1:ys(t,e),sc(e),r&512&&n!==null&&uf(n,n.return);break;case 5:if(ys(t,e),sc(e),r&512&&n!==null&&uf(n,n.return),e.flags&32){var i=e.stateNode;try{$0(i,"")}catch(p){zr(e,e.return,p)}}if(r&4&&(i=e.stateNode,i!=null)){var o=e.memoizedProps,a=n!==null?n.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{s==="input"&&o.type==="radio"&&o.name!=null&&mW(i,o),wA(s,a);var l=wA(s,o);for(a=0;a<c.length;a+=2){var u=c[a],d=c[a+1];u==="style"?SW(i,d):u==="dangerouslySetInnerHTML"?EW(i,d):u==="children"?$0(i,d):jN(i,u,d,l)}switch(s){case"input":yA(i,o);break;case"textarea":gW(i,o);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var f=o.value;f!=null?Rf(i,!!o.multiple,f,!1):h!==!!o.multiple&&(o.defaultValue!=null?Rf(i,!!o.multiple,o.defaultValue,!0):Rf(i,!!o.multiple,o.multiple?[]:"",!1))}i[Y0]=o}catch(p){zr(e,e.return,p)}}break;case 6:if(ys(t,e),sc(e),r&4){if(e.stateNode===null)throw Error(Fe(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(p){zr(e,e.return,p)}}break;case 3:if(ys(t,e),sc(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{z0(t.containerInfo)}catch(p){zr(e,e.return,p)}break;case 4:ys(t,e),sc(e);break;case 13:ys(t,e),sc(e),i=e.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(yP=ii())),r&4&&M$(e);break;case 22:if(u=n!==null&&n.memoizedState!==null,e.mode&1?(fo=(l=fo)||u,ys(t,e),fo=l):ys(t,e),sc(e),r&8192){if(l=e.memoizedState!==null,(e.stateNode.isHidden=l)&&!u&&e.mode&1)for(rt=e,u=e.child;u!==null;){for(d=rt=u;rt!==null;){switch(h=rt,f=h.child,h.tag){case 0:case 11:case 14:case 15:r0(4,h,h.return);break;case 1:uf(h,h.return);var g=h.stateNode;if(typeof g.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(p){zr(r,n,p)}}break;case 5:uf(h,h.return);break;case 22:if(h.memoizedState!==null){U$(d);continue}}f!==null?(f.return=h,rt=f):U$(d)}u=u.sibling}e:for(u=null,d=e;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,l?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(s=d.stateNode,c=d.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,s.style.display=_W("display",a))}catch(p){zr(e,e.return,p)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=l?"":d.memoizedProps}catch(p){zr(e,e.return,p)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ys(t,e),sc(e),r&4&&M$(e);break;case 21:break;default:ys(t,e),sc(e)}}function sc(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(WG(n)){var r=n;break e}n=n.return}throw Error(Fe(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&($0(i,""),r.flags&=-33);var o=k$(e);nO(e,o,i);break;case 3:case 4:var a=r.stateNode.containerInfo,s=k$(e);tO(e,s,a);break;default:throw Error(Fe(161))}}catch(c){zr(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function jge(e,t,n){rt=e,qG(e)}function qG(e,t,n){for(var r=(e.mode&1)!==0;rt!==null;){var i=rt,o=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||mE;if(!a){var s=i.alternate,c=s!==null&&s.memoizedState!==null||fo;s=mE;var l=fo;if(mE=a,(fo=c)&&!l)for(rt=i;rt!==null;)a=rt,c=a.child,a.tag===22&&a.memoizedState!==null?B$(i):c!==null?(c.return=a,rt=c):B$(i);for(;o!==null;)rt=o,qG(o),o=o.sibling;rt=i,mE=s,fo=l}F$(e)}else i.subtreeFlags&8772&&o!==null?(o.return=i,rt=o):F$(e)}}function F$(e){for(;rt!==null;){var t=rt;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:fo||cC(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!fo)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Is(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&y$(t,o,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}y$(t,a,n)}break;case 5:var s=t.stateNode;if(n===null&&t.flags&4){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var l=t.alternate;if(l!==null){var u=l.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&z0(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Fe(163))}fo||t.flags&512&&eO(t)}catch(h){zr(t,t.return,h)}}if(t===e){rt=null;break}if(n=t.sibling,n!==null){n.return=t.return,rt=n;break}rt=t.return}}function U$(e){for(;rt!==null;){var t=rt;if(t===e){rt=null;break}var n=t.sibling;if(n!==null){n.return=t.return,rt=n;break}rt=t.return}}function B$(e){for(;rt!==null;){var t=rt;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{cC(4,t)}catch(c){zr(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(c){zr(t,i,c)}}var o=t.return;try{eO(t)}catch(c){zr(t,o,c)}break;case 5:var a=t.return;try{eO(t)}catch(c){zr(t,a,c)}}}catch(c){zr(t,t.return,c)}if(t===e){rt=null;break}var s=t.sibling;if(s!==null){s.return=t.return,rt=s;break}rt=t.return}}var Hge=Math.ceil,kS=El.ReactCurrentDispatcher,_P=El.ReactCurrentOwner,is=El.ReactCurrentBatchConfig,Nn=0,Mi=null,hi=null,Qi=0,ha=0,df=Pu(0),Ci=0,tg=null,Ld=0,lC=0,SP=0,i0=null,Go=null,yP=0,Qf=1/0,Jc=null,MS=!1,rO=null,mu=null,gE=!1,Zl=null,FS=0,o0=0,iO=null,R_=-1,w_=0;function xo(){return Nn&6?ii():R_!==-1?R_:R_=ii()}function gu(e){return e.mode&1?Nn&2&&Qi!==0?Qi&-Qi:wge.transition!==null?(w_===0&&(w_=PW()),w_):(e=Qn,e!==0||(e=window.event,e=e===void 0?16:BW(e.type)),e):1}function Us(e,t,n,r){if(50<o0)throw o0=0,iO=null,Error(Fe(185));Ug(e,n,r),(!(Nn&2)||e!==Mi)&&(e===Mi&&(!(Nn&2)&&(lC|=n),Ci===4&&Gl(e,Qi)),ea(e,r),n===1&&Nn===0&&!(t.mode&1)&&(Qf=ii()+500,oC&&Du()))}function ea(e,t){var n=e.callbackNode;w0e(e,t);var r=SS(e,e===Mi?Qi:0);if(r===0)n!==null&&qB(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&qB(n),t===1)e.tag===0?Rge($$.bind(null,e)):iG($$.bind(null,e)),yge(function(){!(Nn&6)&&Du()}),n=null;else{switch(DW(r)){case 1:n=KN;break;case 4:n=xW;break;case 16:n=_S;break;case 536870912:n=NW;break;default:n=_S}n=nK(n,YG.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function YG(e,t){if(R_=-1,w_=0,Nn&6)throw Error(Fe(327));var n=e.callbackNode;if(xf()&&e.callbackNode!==n)return null;var r=SS(e,e===Mi?Qi:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=US(e,r);else{t=r;var i=Nn;Nn|=2;var o=JG();(Mi!==e||Qi!==t)&&(Jc=null,Qf=ii()+500,_d(e,t));do try{Gge();break}catch(s){XG(e,s)}while(1);aP(),kS.current=o,Nn=i,hi!==null?t=0:(Mi=null,Qi=0,t=Ci)}if(t!==0){if(t===2&&(i=NA(e),i!==0&&(r=i,t=oO(e,i))),t===1)throw n=tg,_d(e,0),Gl(e,r),ea(e,ii()),n;if(t===6)Gl(e,r);else{if(i=e.current.alternate,!(r&30)&&!zge(i)&&(t=US(e,r),t===2&&(o=NA(e),o!==0&&(r=o,t=oO(e,o))),t===1))throw n=tg,_d(e,0),Gl(e,r),ea(e,ii()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(Fe(345));case 2:Yu(e,Go,Jc);break;case 3:if(Gl(e,r),(r&130023424)===r&&(t=yP+500-ii(),10<t)){if(SS(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){xo(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=BA(Yu.bind(null,e,Go,Jc),t);break}Yu(e,Go,Jc);break;case 4:if(Gl(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-Fs(r);o=1<<a,a=t[a],a>i&&(i=a),r&=~o}if(r=i,r=ii()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Hge(r/1960))-r,10<r){e.timeoutHandle=BA(Yu.bind(null,e,Go,Jc),r);break}Yu(e,Go,Jc);break;case 5:Yu(e,Go,Jc);break;default:throw Error(Fe(329))}}}return ea(e,ii()),e.callbackNode===n?YG.bind(null,e):null}function oO(e,t){var n=i0;return e.current.memoizedState.isDehydrated&&(_d(e,t).flags|=256),e=US(e,t),e!==2&&(t=Go,Go=n,t!==null&&aO(t)),e}function aO(e){Go===null?Go=e:Go.push.apply(Go,e)}function zge(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!Hs(o(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Gl(e,t){for(t&=~SP,t&=~lC,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Fs(t),r=1<<n;e[n]=-1,t&=~r}}function $$(e){if(Nn&6)throw Error(Fe(327));xf();var t=SS(e,0);if(!(t&1))return ea(e,ii()),null;var n=US(e,t);if(e.tag!==0&&n===2){var r=NA(e);r!==0&&(t=r,n=oO(e,r))}if(n===1)throw n=tg,_d(e,0),Gl(e,t),ea(e,ii()),n;if(n===6)throw Error(Fe(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Yu(e,Go,Jc),ea(e,ii()),null}function CP(e,t){var n=Nn;Nn|=1;try{return e(t)}finally{Nn=n,Nn===0&&(Qf=ii()+500,oC&&Du())}}function kd(e){Zl!==null&&Zl.tag===0&&!(Nn&6)&&xf();var t=Nn;Nn|=1;var n=is.transition,r=Qn;try{if(is.transition=null,Qn=1,e)return e()}finally{Qn=r,is.transition=n,Nn=t,!(Nn&6)&&Du()}}function bP(){ha=df.current,Cr(df)}function _d(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Sge(n)),hi!==null)for(n=hi.return;n!==null;){var r=n;switch(rP(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&RS();break;case 3:Xf(),Cr(Qo),Cr(vo),hP();break;case 5:dP(r);break;case 4:Xf();break;case 13:Cr(Nr);break;case 19:Cr(Nr);break;case 10:sP(r.type._context);break;case 22:case 23:bP()}n=n.return}if(Mi=e,hi=e=vu(e.current,null),Qi=ha=t,Ci=0,tg=null,SP=lC=Ld=0,Go=i0=null,dd!==null){for(t=0;t<dd.length;t++)if(n=dd[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var a=o.next;o.next=i,r.next=a}n.pending=r}dd=null}return e}function XG(e,t){do{var n=hi;try{if(aP(),C_.current=LS,DS){for(var r=kr.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}DS=!1}if(Dd=0,xi=Si=kr=null,n0=!1,Q0=0,_P.current=null,n===null||n.return===null){Ci=1,tg=t,hi=null;break}e:{var o=e,a=n.return,s=n,c=t;if(t=Qi,s.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var l=c,u=s,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=I$(a);if(f!==null){f.flags&=-257,A$(f,a,s,o,t),f.mode&1&&w$(o,l,t),t=f,c=l;var g=t.updateQueue;if(g===null){var p=new Set;p.add(c),t.updateQueue=p}else g.add(c);break e}else{if(!(t&1)){w$(o,l,t),TP();break e}c=Error(Fe(426))}}else if(Rr&&s.mode&1){var m=I$(a);if(m!==null){!(m.flags&65536)&&(m.flags|=256),A$(m,a,s,o,t),iP(Jf(c,s));break e}}o=c=Jf(c,s),Ci!==4&&(Ci=2),i0===null?i0=[o]:i0.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var _=DG(o,c,t);S$(o,_);break e;case 1:s=c;var E=o.type,S=o.stateNode;if(!(o.flags&128)&&(typeof E.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(mu===null||!mu.has(S)))){o.flags|=65536,t&=-t,o.lanes|=t;var C=LG(o,s,t);S$(o,C);break e}}o=o.return}while(o!==null)}ZG(n)}catch(b){t=b,hi===n&&n!==null&&(hi=n=n.return);continue}break}while(1)}function JG(){var e=kS.current;return kS.current=LS,e===null?LS:e}function TP(){(Ci===0||Ci===3||Ci===2)&&(Ci=4),Mi===null||!(Ld&268435455)&&!(lC&268435455)||Gl(Mi,Qi)}function US(e,t){var n=Nn;Nn|=2;var r=JG();(Mi!==e||Qi!==t)&&(Jc=null,_d(e,t));do try{Wge();break}catch(i){XG(e,i)}while(1);if(aP(),Nn=n,kS.current=r,hi!==null)throw Error(Fe(261));return Mi=null,Qi=0,Ci}function Wge(){for(;hi!==null;)QG(hi)}function Gge(){for(;hi!==null&&!v0e();)QG(hi)}function QG(e){var t=tK(e.alternate,e,ha);e.memoizedProps=e.pendingProps,t===null?ZG(e):hi=t,_P.current=null}function ZG(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Bge(n,t),n!==null){n.flags&=32767,hi=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ci=6,hi=null;return}}else if(n=Uge(n,t,ha),n!==null){hi=n;return}if(t=t.sibling,t!==null){hi=t;return}hi=t=e}while(t!==null);Ci===0&&(Ci=5)}function Yu(e,t,n){var r=Qn,i=is.transition;try{is.transition=null,Qn=1,Kge(e,t,n,r)}finally{is.transition=i,Qn=r}return null}function Kge(e,t,n,r){do xf();while(Zl!==null);if(Nn&6)throw Error(Fe(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Fe(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(I0e(e,o),e===Mi&&(hi=Mi=null,Qi=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||gE||(gE=!0,nK(_S,function(){return xf(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=is.transition,is.transition=null;var a=Qn;Qn=1;var s=Nn;Nn|=4,_P.current=null,Vge(e,n),KG(n,e),fge(FA),yS=!!MA,FA=MA=null,e.current=n,jge(n),E0e(),Nn=s,Qn=a,is.transition=o}else e.current=n;if(gE&&(gE=!1,Zl=e,FS=i),o=e.pendingLanes,o===0&&(mu=null),y0e(n.stateNode),ea(e,ii()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(MS)throw MS=!1,e=rO,rO=null,e;return FS&1&&e.tag!==0&&xf(),o=e.pendingLanes,o&1?e===iO?o0++:(o0=0,iO=e):o0=0,Du(),null}function xf(){if(Zl!==null){var e=DW(FS),t=is.transition,n=Qn;try{if(is.transition=null,Qn=16>e?16:e,Zl===null)var r=!1;else{if(e=Zl,Zl=null,FS=0,Nn&6)throw Error(Fe(331));var i=Nn;for(Nn|=4,rt=e.current;rt!==null;){var o=rt,a=o.child;if(rt.flags&16){var s=o.deletions;if(s!==null){for(var c=0;c<s.length;c++){var l=s[c];for(rt=l;rt!==null;){var u=rt;switch(u.tag){case 0:case 11:case 15:r0(8,u,o)}var d=u.child;if(d!==null)d.return=u,rt=d;else for(;rt!==null;){u=rt;var h=u.sibling,f=u.return;if(zG(u),u===l){rt=null;break}if(h!==null){h.return=f,rt=h;break}rt=f}}}var g=o.alternate;if(g!==null){var p=g.child;if(p!==null){g.child=null;do{var m=p.sibling;p.sibling=null,p=m}while(p!==null)}}rt=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,rt=a;else e:for(;rt!==null;){if(o=rt,o.flags&2048)switch(o.tag){case 0:case 11:case 15:r0(9,o,o.return)}var _=o.sibling;if(_!==null){_.return=o.return,rt=_;break e}rt=o.return}}var E=e.current;for(rt=E;rt!==null;){a=rt;var S=a.child;if(a.subtreeFlags&2064&&S!==null)S.return=a,rt=S;else e:for(a=E;rt!==null;){if(s=rt,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:cC(9,s)}}catch(b){zr(s,s.return,b)}if(s===a){rt=null;break e}var C=s.sibling;if(C!==null){C.return=s.return,rt=C;break e}rt=s.return}}if(Nn=i,Du(),bc&&typeof bc.onPostCommitFiberRoot=="function")try{bc.onPostCommitFiberRoot(eC,e)}catch{}r=!0}return r}finally{Qn=n,is.transition=t}}return!1}function V$(e,t,n){t=Jf(n,t),t=DG(e,t,1),e=pu(e,t,1),t=xo(),e!==null&&(Ug(e,1,t),ea(e,t))}function zr(e,t,n){if(e.tag===3)V$(e,e,n);else for(;t!==null;){if(t.tag===3){V$(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(mu===null||!mu.has(r))){e=Jf(n,e),e=LG(t,e,1),t=pu(t,e,1),e=xo(),t!==null&&(Ug(t,1,e),ea(t,e));break}}t=t.return}}function qge(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=xo(),e.pingedLanes|=e.suspendedLanes&n,Mi===e&&(Qi&n)===n&&(Ci===4||Ci===3&&(Qi&130023424)===Qi&&500>ii()-yP?_d(e,0):SP|=n),ea(e,t)}function eK(e,t){t===0&&(e.mode&1?(t=aE,aE<<=1,!(aE&130023424)&&(aE=4194304)):t=1);var n=xo();e=hl(e,t),e!==null&&(Ug(e,t,n),ea(e,n))}function Yge(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),eK(e,n)}function Xge(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(Fe(314))}r!==null&&r.delete(t),eK(e,n)}var tK;tK=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Qo.current)Yo=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Yo=!1,Fge(e,t,n);Yo=!!(e.flags&131072)}else Yo=!1,Rr&&t.flags&1048576&&oG(t,AS,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;T_(e,t),e=t.pendingProps;var i=Kf(t,vo.current);Of(t,n),i=pP(null,t,r,e,i,n);var o=mP();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Zo(r)?(o=!0,wS(t)):o=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,lP(t),i.updater=sC,t.stateNode=i,i._reactInternals=t,GA(t,r,e,n),t=YA(null,t,r,!0,o,n)):(t.tag=0,Rr&&o&&nP(t),wo(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(T_(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=Qge(r),e=Is(r,e),i){case 0:t=qA(null,t,r,e,n);break e;case 1:t=N$(null,t,r,e,n);break e;case 11:t=O$(null,t,r,e,n);break e;case 14:t=x$(null,t,r,Is(r.type,e),n);break e}throw Error(Fe(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Is(r,i),qA(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Is(r,i),N$(e,t,r,i,n);case 3:e:{if(UG(t),e===null)throw Error(Fe(387));r=t.pendingProps,o=t.memoizedState,i=o.element,dG(e,t),NS(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){i=Jf(Error(Fe(423)),t),t=P$(e,t,r,n,i);break e}else if(r!==i){i=Jf(Error(Fe(424)),t),t=P$(e,t,r,n,i);break e}else for(Ea=fu(t.stateNode.containerInfo.firstChild),Sa=t,Rr=!0,Ds=null,n=lG(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(qf(),r===i){t=fl(e,t,n);break e}wo(e,t,r,n)}t=t.child}return t;case 5:return hG(t),e===null&&HA(t),r=t.type,i=t.pendingProps,o=e!==null?e.memoizedProps:null,a=i.children,UA(r,i)?a=null:o!==null&&UA(r,o)&&(t.flags|=32),FG(e,t),wo(e,t,a,n),t.child;case 6:return e===null&&HA(t),null;case 13:return BG(e,t,n);case 4:return uP(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Yf(t,null,r,n):wo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Is(r,i),O$(e,t,r,i,n);case 7:return wo(e,t,t.pendingProps,n),t.child;case 8:return wo(e,t,t.pendingProps.children,n),t.child;case 12:return wo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,mr(OS,r._currentValue),r._currentValue=a,o!==null)if(Hs(o.value,a)){if(o.children===i.children&&!Qo.current){t=fl(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var s=o.dependencies;if(s!==null){a=o.child;for(var c=s.firstContext;c!==null;){if(c.context===r){if(o.tag===1){c=sl(-1,n&-n),c.tag=2;var l=o.updateQueue;if(l!==null){l=l.shared;var u=l.pending;u===null?c.next=c:(c.next=u.next,u.next=c),l.pending=c}}o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),zA(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(o.tag===10)a=o.type===t.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(Fe(341));a.lanes|=n,s=a.alternate,s!==null&&(s.lanes|=n),zA(a,n,t),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===t){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}wo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Of(t,n),i=as(i),r=r(i),t.flags|=1,wo(e,t,r,n),t.child;case 14:return r=t.type,i=Is(r,t.pendingProps),i=Is(r.type,i),x$(e,t,r,i,n);case 15:return kG(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Is(r,i),T_(e,t),t.tag=1,Zo(r)?(e=!0,wS(t)):e=!1,Of(t,n),PG(t,r,i),GA(t,r,i,n),YA(null,t,r,!0,e,n);case 19:return $G(e,t,n);case 22:return MG(e,t,n)}throw Error(Fe(156,t.tag))};function nK(e,t){return OW(e,t)}function Jge(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ns(e,t,n,r){return new Jge(e,t,n,r)}function RP(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Qge(e){if(typeof e=="function")return RP(e)?1:0;if(e!=null){if(e=e.$$typeof,e===zN)return 11;if(e===WN)return 14}return 2}function vu(e,t){var n=e.alternate;return n===null?(n=ns(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function I_(e,t,n,r,i,o){var a=2;if(r=e,typeof e=="function")RP(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case ef:return Sd(n.children,i,o,t);case HN:a=8,i|=8;break;case gA:return e=ns(12,n,t,i|2),e.elementType=gA,e.lanes=o,e;case vA:return e=ns(13,n,t,i),e.elementType=vA,e.lanes=o,e;case EA:return e=ns(19,n,t,i),e.elementType=EA,e.lanes=o,e;case hW:return uC(n,i,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case uW:a=10;break e;case dW:a=9;break e;case zN:a=11;break e;case WN:a=14;break e;case Bl:a=16,r=null;break e}throw Error(Fe(130,e==null?e:typeof e,""))}return t=ns(a,n,t,i),t.elementType=e,t.type=r,t.lanes=o,t}function Sd(e,t,n,r){return e=ns(7,e,r,t),e.lanes=n,e}function uC(e,t,n,r){return e=ns(22,e,r,t),e.elementType=hW,e.lanes=n,e.stateNode={isHidden:!1},e}function yR(e,t,n){return e=ns(6,e,null,t),e.lanes=n,e}function CR(e,t,n){return t=ns(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Zge(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=nR(0),this.expirationTimes=nR(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nR(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function wP(e,t,n,r,i,o,a,s,c){return e=new Zge(e,t,n,s,c),t===1?(t=1,o===!0&&(t|=8)):t=0,o=ns(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},lP(o),e}function eve(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Zh,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function rK(e){if(!e)return Cu;e=e._reactInternals;e:{if(Jd(e)!==e||e.tag!==1)throw Error(Fe(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Zo(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Fe(171))}if(e.tag===1){var n=e.type;if(Zo(n))return rG(e,n,t)}return t}function iK(e,t,n,r,i,o,a,s,c){return e=wP(n,r,!0,e,i,o,a,s,c),e.context=rK(null),n=e.current,r=xo(),i=gu(n),o=sl(r,i),o.callback=t??null,pu(n,o,i),e.current.lanes=i,Ug(e,i,r),ea(e,r),e}function dC(e,t,n,r){var i=t.current,o=xo(),a=gu(i);return n=rK(n),t.context===null?t.context=n:t.pendingContext=n,t=sl(o,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=pu(i,t,a),e!==null&&(Us(e,i,a,o),y_(e,i,a)),a}function BS(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function j$(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function IP(e,t){j$(e,t),(e=e.alternate)&&j$(e,t)}function tve(){return null}var oK=typeof reportError=="function"?reportError:function(e){console.error(e)};function AP(e){this._internalRoot=e}hC.prototype.render=AP.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Fe(409));dC(e,t,null,null)};hC.prototype.unmount=AP.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;kd(function(){dC(null,e,null,null)}),t[dl]=null}};function hC(e){this._internalRoot=e}hC.prototype.unstable_scheduleHydration=function(e){if(e){var t=MW();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Wl.length&&t!==0&&t<Wl[n].priority;n++);Wl.splice(n,0,e),n===0&&UW(e)}};function OP(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function fC(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function H$(){}function nve(e,t,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var l=BS(a);o.call(l)}}var a=iK(t,r,e,0,null,!1,!1,"",H$);return e._reactRootContainer=a,e[dl]=a.current,K0(e.nodeType===8?e.parentNode:e),kd(),a}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var s=r;r=function(){var l=BS(c);s.call(l)}}var c=wP(e,0,!1,null,null,!1,!1,"",H$);return e._reactRootContainer=c,e[dl]=c.current,K0(e.nodeType===8?e.parentNode:e),kd(function(){dC(t,c,n,r)}),c}function pC(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o;if(typeof i=="function"){var s=i;i=function(){var c=BS(a);s.call(c)}}dC(t,a,e,i)}else a=nve(n,t,e,i,r);return BS(a)}LW=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Pm(t.pendingLanes);n!==0&&(qN(t,n|1),ea(t,ii()),!(Nn&6)&&(Qf=ii()+500,Du()))}break;case 13:kd(function(){var r=hl(e,1);if(r!==null){var i=xo();Us(r,e,1,i)}}),IP(e,1)}};YN=function(e){if(e.tag===13){var t=hl(e,134217728);if(t!==null){var n=xo();Us(t,e,134217728,n)}IP(e,134217728)}};kW=function(e){if(e.tag===13){var t=gu(e),n=hl(e,t);if(n!==null){var r=xo();Us(n,e,t,r)}IP(e,t)}};MW=function(){return Qn};FW=function(e,t){var n=Qn;try{return Qn=e,t()}finally{Qn=n}};AA=function(e,t,n){switch(t){case"input":if(yA(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=iC(r);if(!i)throw Error(Fe(90));pW(r),yA(r,i)}}}break;case"textarea":gW(e,n);break;case"select":t=n.value,t!=null&&Rf(e,!!n.multiple,t,!1)}};bW=CP;TW=kd;var rve={usingClientEntryPoint:!1,Events:[$g,of,iC,yW,CW,CP]},om={findFiberByHostInstance:ud,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ive={bundleType:om.bundleType,version:om.version,rendererPackageName:om.rendererPackageName,rendererConfig:om.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:El.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=IW(e),e===null?null:e.stateNode},findFiberByHostInstance:om.findFiberByHostInstance||tve,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vE=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vE.isDisabled&&vE.supportsFiber)try{eC=vE.inject(ive),bc=vE}catch{}}Ia.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rve;Ia.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!OP(t))throw Error(Fe(200));return eve(e,t,null,n)};Ia.createRoot=function(e,t){if(!OP(e))throw Error(Fe(299));var n=!1,r="",i=oK;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=wP(e,1,!1,null,null,n,!1,r,i),e[dl]=t.current,K0(e.nodeType===8?e.parentNode:e),new AP(t)};Ia.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Fe(188)):(e=Object.keys(e).join(","),Error(Fe(268,e)));return e=IW(t),e=e===null?null:e.stateNode,e};Ia.flushSync=function(e){return kd(e)};Ia.hydrate=function(e,t,n){if(!fC(t))throw Error(Fe(200));return pC(null,e,t,!0,n)};Ia.hydrateRoot=function(e,t,n){if(!OP(e))throw Error(Fe(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",a=oK;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=iK(t,null,e,1,n??null,i,!1,o,a),e[dl]=t.current,K0(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new hC(t)};Ia.render=function(e,t,n){if(!fC(t))throw Error(Fe(200));return pC(null,e,t,!1,n)};Ia.unmountComponentAtNode=function(e){if(!fC(e))throw Error(Fe(40));return e._reactRootContainer?(kd(function(){pC(null,null,e,!1,function(){e._reactRootContainer=null,e[dl]=null})}),!0):!1};Ia.unstable_batchedUpdates=CP;Ia.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!fC(n))throw Error(Fe(200));if(e==null||e._reactInternals===void 0)throw Error(Fe(38));return pC(e,t,n,!1,r)};Ia.version="18.3.1-next-f1338f8080-20240426";function aK(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(aK)}catch(e){console.error(e)}}aK(),aW.exports=Ia;var Oc=aW.exports;const sO=jd(Oc),ove=M8({__proto__:null,default:sO},[Oc]);var z$=Oc;pA.createRoot=z$.createRoot,pA.hydrateRoot=z$.hydrateRoot;/**
 * @remix-run/router v1.16.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ng(){return ng=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ng.apply(this,arguments)}var eu;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(eu||(eu={}));const W$="popstate";function ave(e){e===void 0&&(e={});function t(i,o){let{pathname:a="/",search:s="",hash:c=""}=Qd(i.location.hash.substr(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),cO("",{pathname:a,search:s,hash:c},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(i,o){let a=i.document.querySelector("base"),s="";if(a&&a.getAttribute("href")){let c=i.location.href,l=c.indexOf("#");s=l===-1?c:c.slice(0,l)}return s+"#"+(typeof o=="string"?o:sK(o))}function r(i,o){xP(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(o)+")")}return cve(t,n,r,e)}function Ti(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function xP(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function sve(){return Math.random().toString(36).substr(2,8)}function G$(e,t){return{usr:e.state,key:e.key,idx:t}}function cO(e,t,n,r){return n===void 0&&(n=null),ng({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Qd(t):t,{state:n,key:t&&t.key||r||sve()})}function sK(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Qd(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function cve(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,a=i.history,s=eu.Pop,c=null,l=u();l==null&&(l=0,a.replaceState(ng({},a.state,{idx:l}),""));function u(){return(a.state||{idx:null}).idx}function d(){s=eu.Pop;let m=u(),_=m==null?null:m-l;l=m,c&&c({action:s,location:p.location,delta:_})}function h(m,_){s=eu.Push;let E=cO(p.location,m,_);n&&n(E,m),l=u()+1;let S=G$(E,l),C=p.createHref(E);try{a.pushState(S,"",C)}catch(b){if(b instanceof DOMException&&b.name==="DataCloneError")throw b;i.location.assign(C)}o&&c&&c({action:s,location:p.location,delta:1})}function f(m,_){s=eu.Replace;let E=cO(p.location,m,_);n&&n(E,m),l=u();let S=G$(E,l),C=p.createHref(E);a.replaceState(S,"",C),o&&c&&c({action:s,location:p.location,delta:0})}function g(m){let _=i.location.origin!=="null"?i.location.origin:i.location.href,E=typeof m=="string"?m:sK(m);return E=E.replace(/ $/,"%20"),Ti(_,"No window.location.(origin|href) available to create URL for href: "+E),new URL(E,_)}let p={get action(){return s},get location(){return e(i,a)},listen(m){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(W$,d),c=m,()=>{i.removeEventListener(W$,d),c=null}},createHref(m){return t(i,m)},createURL:g,encodeLocation(m){let _=g(m);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:h,replace:f,go(m){return a.go(m)}};return p}var K$;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(K$||(K$={}));function lve(e,t,n){n===void 0&&(n="/");let r=typeof t=="string"?Qd(t):t,i=uK(r.pathname||"/",n);if(i==null)return null;let o=cK(e);uve(o);let a=null;for(let s=0;a==null&&s<o.length;++s){let c=Cve(i);a=_ve(o[s],c)}return a}function cK(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(o,a,s)=>{let c={relativePath:s===void 0?o.path||"":s,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};c.relativePath.startsWith("/")&&(Ti(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let l=yd([r,c.relativePath]),u=n.concat(c);o.children&&o.children.length>0&&(Ti(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),cK(o.children,t,u,l)),!(o.path==null&&!o.index)&&t.push({path:l,score:vve(l,o.index),routesMeta:u})};return e.forEach((o,a)=>{var s;if(o.path===""||!((s=o.path)!=null&&s.includes("?")))i(o,a);else for(let c of lK(o.path))i(o,a,c)}),t}function lK(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let a=lK(r.join("/")),s=[];return s.push(...a.map(c=>c===""?o:[o,c].join("/"))),i&&s.push(...a),s.map(c=>e.startsWith("/")&&c===""?"/":c)}function uve(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:Eve(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const dve=/^:[\w-]+$/,hve=3,fve=2,pve=1,mve=10,gve=-2,q$=e=>e==="*";function vve(e,t){let n=e.split("/"),r=n.length;return n.some(q$)&&(r+=gve),t&&(r+=fve),n.filter(i=>!q$(i)).reduce((i,o)=>i+(dve.test(o)?hve:o===""?pve:mve),r)}function Eve(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function _ve(e,t){let{routesMeta:n}=e,r={},i="/",o=[];for(let a=0;a<n.length;++a){let s=n[a],c=a===n.length-1,l=i==="/"?t:t.slice(i.length)||"/",u=Sve({path:s.relativePath,caseSensitive:s.caseSensitive,end:c},l);if(!u)return null;Object.assign(r,u.params);let d=s.route;o.push({params:r,pathname:yd([i,u.pathname]),pathnameBase:Ave(yd([i,u.pathnameBase])),route:d}),u.pathnameBase!=="/"&&(i=yd([i,u.pathnameBase]))}return o}function Sve(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=yve(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],a=o.replace(/(.)\/+$/,"$1"),s=i.slice(1);return{params:r.reduce((l,u,d)=>{let{paramName:h,isOptional:f}=u;if(h==="*"){let p=s[d]||"";a=o.slice(0,o.length-p.length).replace(/(.)\/+$/,"$1")}const g=s[d];return f&&!g?l[h]=void 0:l[h]=(g||"").replace(/%2F/g,"/"),l},{}),pathname:o,pathnameBase:a,pattern:e}}function yve(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),xP(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,s,c)=>(r.push({paramName:s,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function Cve(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return xP(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function uK(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function bve(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?Qd(e):e;return{pathname:n?n.startsWith("/")?n:Tve(n,t):t,search:Ove(r),hash:xve(i)}}function Tve(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function bR(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Rve(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function wve(e,t){let n=Rve(e);return t?n.map((r,i)=>i===e.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Ive(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=Qd(e):(i=ng({},e),Ti(!i.pathname||!i.pathname.includes("?"),bR("?","pathname","search",i)),Ti(!i.pathname||!i.pathname.includes("#"),bR("#","pathname","hash",i)),Ti(!i.search||!i.search.includes("#"),bR("#","search","hash",i)));let o=e===""||i.pathname==="",a=o?"/":i.pathname,s;if(a==null)s=n;else{let d=t.length-1;if(!r&&a.startsWith("..")){let h=a.split("/");for(;h[0]==="..";)h.shift(),d-=1;i.pathname=h.join("/")}s=d>=0?t[d]:"/"}let c=bve(i,s),l=a&&a!=="/"&&a.endsWith("/"),u=(o||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(l||u)&&(c.pathname+="/"),c}const yd=e=>e.join("/").replace(/\/\/+/g,"/"),Ave=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Ove=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,xve=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Nve(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const dK=["post","put","patch","delete"];new Set(dK);const Pve=["get",...dK];new Set(Pve);/**
 * React Router v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rg(){return rg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rg.apply(this,arguments)}const NP=v.createContext(null),Dve=v.createContext(null),mC=v.createContext(null),gC=v.createContext(null),wp=v.createContext({outlet:null,matches:[],isDataRoute:!1}),hK=v.createContext(null);function vC(){return v.useContext(gC)!=null}function fK(){return vC()||Ti(!1),v.useContext(gC).location}function pK(e){v.useContext(mC).static||v.useLayoutEffect(e)}function Lve(){let{isDataRoute:e}=v.useContext(wp);return e?Kve():kve()}function kve(){vC()||Ti(!1);let e=v.useContext(NP),{basename:t,future:n,navigator:r}=v.useContext(mC),{matches:i}=v.useContext(wp),{pathname:o}=fK(),a=JSON.stringify(wve(i,n.v7_relativeSplatPath)),s=v.useRef(!1);return pK(()=>{s.current=!0}),v.useCallback(function(l,u){if(u===void 0&&(u={}),!s.current)return;if(typeof l=="number"){r.go(l);return}let d=Ive(l,JSON.parse(a),o,u.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:yd([t,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[t,r,a,o,e])}function Mve(e,t){return Fve(e,t)}function Fve(e,t,n,r){vC()||Ti(!1);let{navigator:i}=v.useContext(mC),{matches:o}=v.useContext(wp),a=o[o.length-1],s=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let l=fK(),u;if(t){var d;let m=typeof t=="string"?Qd(t):t;c==="/"||(d=m.pathname)!=null&&d.startsWith(c)||Ti(!1),u=m}else u=l;let h=u.pathname||"/",f=h;if(c!=="/"){let m=c.replace(/^\//,"").split("/");f="/"+h.replace(/^\//,"").split("/").slice(m.length).join("/")}let g=lve(e,{pathname:f}),p=jve(g&&g.map(m=>Object.assign({},m,{params:Object.assign({},s,m.params),pathname:yd([c,i.encodeLocation?i.encodeLocation(m.pathname).pathname:m.pathname]),pathnameBase:m.pathnameBase==="/"?c:yd([c,i.encodeLocation?i.encodeLocation(m.pathnameBase).pathname:m.pathnameBase])})),o,n,r);return t&&p?v.createElement(gC.Provider,{value:{location:rg({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:eu.Pop}},p):p}function Uve(){let e=Gve(),t=Nve(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},o=null;return v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},t),n?v.createElement("pre",{style:i},n):null,o)}const Bve=v.createElement(Uve,null);class $ve extends v.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?v.createElement(wp.Provider,{value:this.props.routeContext},v.createElement(hK.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Vve(e){let{routeContext:t,match:n,children:r}=e,i=v.useContext(NP);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),v.createElement(wp.Provider,{value:t},r)}function jve(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var o;if((o=n)!=null&&o.errors)e=n.matches;else return null}let a=e,s=(i=n)==null?void 0:i.errors;if(s!=null){let u=a.findIndex(d=>d.route.id&&(s==null?void 0:s[d.route.id])!==void 0);u>=0||Ti(!1),a=a.slice(0,Math.min(a.length,u+1))}let c=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<a.length;u++){let d=a[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=u),d.route.id){let{loaderData:h,errors:f}=n,g=d.route.loader&&h[d.route.id]===void 0&&(!f||f[d.route.id]===void 0);if(d.route.lazy||g){c=!0,l>=0?a=a.slice(0,l+1):a=[a[0]];break}}}return a.reduceRight((u,d,h)=>{let f,g=!1,p=null,m=null;n&&(f=s&&d.route.id?s[d.route.id]:void 0,p=d.route.errorElement||Bve,c&&(l<0&&h===0?(qve("route-fallback",!1),g=!0,m=null):l===h&&(g=!0,m=d.route.hydrateFallbackElement||null)));let _=t.concat(a.slice(0,h+1)),E=()=>{let S;return f?S=p:g?S=m:d.route.Component?S=v.createElement(d.route.Component,null):d.route.element?S=d.route.element:S=u,v.createElement(Vve,{match:d,routeContext:{outlet:u,matches:_,isDataRoute:n!=null},children:S})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?v.createElement($ve,{location:n.location,revalidation:n.revalidation,component:p,error:f,children:E(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):E()},null)}var mK=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(mK||{}),$S=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}($S||{});function Hve(e){let t=v.useContext(NP);return t||Ti(!1),t}function zve(e){let t=v.useContext(Dve);return t||Ti(!1),t}function Wve(e){let t=v.useContext(wp);return t||Ti(!1),t}function gK(e){let t=Wve(),n=t.matches[t.matches.length-1];return n.route.id||Ti(!1),n.route.id}function Gve(){var e;let t=v.useContext(hK),n=zve($S.UseRouteError),r=gK($S.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function Kve(){let{router:e}=Hve(mK.UseNavigateStable),t=gK($S.UseNavigateStable),n=v.useRef(!1);return pK(()=>{n.current=!0}),v.useCallback(function(i,o){o===void 0&&(o={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,rg({fromRouteId:t},o)))},[e,t])}const Y$={};function qve(e,t,n){!t&&!Y$[e]&&(Y$[e]=!0)}function Xu(e){Ti(!1)}function Yve(e){let{basename:t="/",children:n=null,location:r,navigationType:i=eu.Pop,navigator:o,static:a=!1,future:s}=e;vC()&&Ti(!1);let c=t.replace(/^\/*/,"/"),l=v.useMemo(()=>({basename:c,navigator:o,static:a,future:rg({v7_relativeSplatPath:!1},s)}),[c,s,o,a]);typeof r=="string"&&(r=Qd(r));let{pathname:u="/",search:d="",hash:h="",state:f=null,key:g="default"}=r,p=v.useMemo(()=>{let m=uK(u,c);return m==null?null:{location:{pathname:m,search:d,hash:h,state:f,key:g},navigationType:i}},[c,u,d,h,f,g,i]);return p==null?null:v.createElement(mC.Provider,{value:l},v.createElement(gC.Provider,{children:n,value:p}))}function Xve(e){let{children:t,location:n}=e;return Mve(lO(t),n)}new Promise(()=>{});function lO(e,t){t===void 0&&(t=[]);let n=[];return v.Children.forEach(e,(r,i)=>{if(!v.isValidElement(r))return;let o=[...t,i];if(r.type===v.Fragment){n.push.apply(n,lO(r.props.children,o));return}r.type!==Xu&&Ti(!1),!r.props.index||!r.props.children||Ti(!1);let a={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=lO(r.props.children,o)),n.push(a)}),n}/**
 * React Router DOM v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const Jve="6";try{window.__reactRouterVersion=Jve}catch{}const Qve="startTransition",X$=Rd[Qve];function Zve(e){let{basename:t,children:n,future:r,window:i}=e,o=v.useRef();o.current==null&&(o.current=ave({window:i,v5Compat:!0}));let a=o.current,[s,c]=v.useState({action:a.action,location:a.location}),{v7_startTransition:l}=r||{},u=v.useCallback(d=>{l&&X$?X$(()=>c(d)):c(d)},[c,l]);return v.useLayoutEffect(()=>a.listen(u),[a,u]),v.createElement(Yve,{basename:t,children:n,location:s.location,navigationType:s.action,navigator:a,future:r})}var J$;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(J$||(J$={}));var Q$;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Q$||(Q$={}));var vK={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function n(){for(var o="",a=0;a<arguments.length;a++){var s=arguments[a];s&&(o=i(o,r(s)))}return o}function r(o){if(typeof o=="string"||typeof o=="number")return o;if(typeof o!="object")return"";if(Array.isArray(o))return n.apply(null,o);if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]"))return o.toString();var a="";for(var s in o)t.call(o,s)&&o[s]&&(a=i(a,s));return a}function i(o,a){return a?o?o+" "+a:o+a:o}e.exports?(n.default=n,e.exports=n):window.classNames=n})()})(vK);var eEe=vK.exports;const de=jd(eEe);function Ee(){return Ee=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ee.apply(null,arguments)}var EK={exports:{}},er={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PP=Symbol.for("react.element"),DP=Symbol.for("react.portal"),EC=Symbol.for("react.fragment"),_C=Symbol.for("react.strict_mode"),SC=Symbol.for("react.profiler"),yC=Symbol.for("react.provider"),CC=Symbol.for("react.context"),tEe=Symbol.for("react.server_context"),bC=Symbol.for("react.forward_ref"),TC=Symbol.for("react.suspense"),RC=Symbol.for("react.suspense_list"),wC=Symbol.for("react.memo"),IC=Symbol.for("react.lazy"),nEe=Symbol.for("react.offscreen"),_K;_K=Symbol.for("react.module.reference");function ms(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case PP:switch(e=e.type,e){case EC:case SC:case _C:case TC:case RC:return e;default:switch(e=e&&e.$$typeof,e){case tEe:case CC:case bC:case IC:case wC:case yC:return e;default:return t}}case DP:return t}}}er.ContextConsumer=CC;er.ContextProvider=yC;er.Element=PP;er.ForwardRef=bC;er.Fragment=EC;er.Lazy=IC;er.Memo=wC;er.Portal=DP;er.Profiler=SC;er.StrictMode=_C;er.Suspense=TC;er.SuspenseList=RC;er.isAsyncMode=function(){return!1};er.isConcurrentMode=function(){return!1};er.isContextConsumer=function(e){return ms(e)===CC};er.isContextProvider=function(e){return ms(e)===yC};er.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===PP};er.isForwardRef=function(e){return ms(e)===bC};er.isFragment=function(e){return ms(e)===EC};er.isLazy=function(e){return ms(e)===IC};er.isMemo=function(e){return ms(e)===wC};er.isPortal=function(e){return ms(e)===DP};er.isProfiler=function(e){return ms(e)===SC};er.isStrictMode=function(e){return ms(e)===_C};er.isSuspense=function(e){return ms(e)===TC};er.isSuspenseList=function(e){return ms(e)===RC};er.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===EC||e===SC||e===_C||e===TC||e===RC||e===nEe||typeof e=="object"&&e!==null&&(e.$$typeof===IC||e.$$typeof===wC||e.$$typeof===yC||e.$$typeof===CC||e.$$typeof===bC||e.$$typeof===_K||e.getModuleId!==void 0)};er.typeOf=ms;EK.exports=er;var A_=EK.exports;function zs(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=[];return le.Children.forEach(e,function(r){r==null&&!t.keepEmpty||(Array.isArray(r)?n=n.concat(zs(r)):A_.isFragment(r)&&r.props?n=n.concat(zs(r.props.children,t)):n.push(r))}),n}var uO={},rEe=function(t){};function iEe(e,t){}function oEe(e,t){}function aEe(){uO={}}function SK(e,t,n){!t&&!uO[n]&&(e(!1,n),uO[n]=!0)}function mo(e,t){SK(iEe,e,t)}function sEe(e,t){SK(oEe,e,t)}mo.preMessage=rEe;mo.resetWarned=aEe;mo.noteOnce=sEe;function yt(e){"@babel/helpers - typeof";return yt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yt(e)}function cEe(e,t){if(yt(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(yt(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yK(e){var t=cEe(e,"string");return yt(t)=="symbol"?t:t+""}function J(e,t,n){return(t=yK(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Z$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Z$(Object(n),!0).forEach(function(r){J(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z$(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ig(e){return e instanceof HTMLElement||e instanceof SVGElement}function CK(e){return e&&yt(e)==="object"&&ig(e.nativeElement)?e.nativeElement:ig(e)?e:null}function a0(e){var t=CK(e);if(t)return t;if(e instanceof le.Component){var n;return(n=sO.findDOMNode)===null||n===void 0?void 0:n.call(sO,e)}return null}function jg(e,t,n){var r=v.useRef({});return(!("value"in r.current)||n(r.current.condition,t))&&(r.current.value=e(),r.current.condition=t),r.current.value}var LP=function(t,n){typeof t=="function"?t(n):yt(t)==="object"&&t&&"current"in t&&(t.current=n)},gs=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n.filter(Boolean);return i.length<=1?i[0]:function(o){n.forEach(function(a){LP(a,o)})}},Hg=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return jg(function(){return gs.apply(void 0,n)},n,function(i,o){return i.length!==o.length||i.every(function(a,s){return a!==o[s]})})},Ip=function(t){var n,r,i=A_.isMemo(t)?t.type.type:t.type;return!(typeof i=="function"&&!((n=i.prototype)!==null&&n!==void 0&&n.render)&&i.$$typeof!==A_.ForwardRef||typeof t=="function"&&!((r=t.prototype)!==null&&r!==void 0&&r.render)&&t.$$typeof!==A_.ForwardRef)},dO=v.createContext(null);function lEe(e){var t=e.children,n=e.onBatchResize,r=v.useRef(0),i=v.useRef([]),o=v.useContext(dO),a=v.useCallback(function(s,c,l){r.current+=1;var u=r.current;i.current.push({size:s,element:c,data:l}),Promise.resolve().then(function(){u===r.current&&(n==null||n(i.current),i.current=[])}),o==null||o(s,c,l)},[n,o]);return v.createElement(dO.Provider,{value:a},t)}var bK=function(){if(typeof Map<"u")return Map;function e(t,n){var r=-1;return t.some(function(i,o){return i[0]===n?(r=o,!0):!1}),r}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(n){var r=e(this.__entries__,n),i=this.__entries__[r];return i&&i[1]},t.prototype.set=function(n,r){var i=e(this.__entries__,n);~i?this.__entries__[i][1]=r:this.__entries__.push([n,r])},t.prototype.delete=function(n){var r=this.__entries__,i=e(r,n);~i&&r.splice(i,1)},t.prototype.has=function(n){return!!~e(this.__entries__,n)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(n,r){r===void 0&&(r=null);for(var i=0,o=this.__entries__;i<o.length;i++){var a=o[i];n.call(r,a[1],a[0])}},t}()}(),hO=typeof window<"u"&&typeof document<"u"&&window.document===document,VS=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),uEe=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(VS):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)}}(),dEe=2;function hEe(e,t){var n=!1,r=!1,i=0;function o(){n&&(n=!1,e()),r&&s()}function a(){uEe(o)}function s(){var c=Date.now();if(n){if(c-i<dEe)return;r=!0}else n=!0,r=!1,setTimeout(a,t);i=c}return s}var fEe=20,pEe=["top","right","bottom","left","width","height","size","weight"],mEe=typeof MutationObserver<"u",gEe=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=hEe(this.refresh.bind(this),fEe)}return e.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},e.prototype.removeObserver=function(t){var n=this.observers_,r=n.indexOf(t);~r&&n.splice(r,1),!n.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){var t=this.updateObservers_();t&&this.refresh()},e.prototype.updateObservers_=function(){var t=this.observers_.filter(function(n){return n.gatherActive(),n.hasActive()});return t.forEach(function(n){return n.broadcastActive()}),t.length>0},e.prototype.connect_=function(){!hO||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),mEe?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){!hO||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(t){var n=t.propertyName,r=n===void 0?"":n,i=pEe.some(function(o){return!!~r.indexOf(o)});i&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),TK=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var i=r[n];Object.defineProperty(e,i,{value:t[i],enumerable:!1,writable:!1,configurable:!0})}return e},Zf=function(e){var t=e&&e.ownerDocument&&e.ownerDocument.defaultView;return t||VS},RK=AC(0,0,0,0);function jS(e){return parseFloat(e)||0}function e5(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce(function(r,i){var o=e["border-"+i+"-width"];return r+jS(o)},0)}function vEe(e){for(var t=["top","right","bottom","left"],n={},r=0,i=t;r<i.length;r++){var o=i[r],a=e["padding-"+o];n[o]=jS(a)}return n}function EEe(e){var t=e.getBBox();return AC(0,0,t.width,t.height)}function _Ee(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return RK;var r=Zf(e).getComputedStyle(e),i=vEe(r),o=i.left+i.right,a=i.top+i.bottom,s=jS(r.width),c=jS(r.height);if(r.boxSizing==="border-box"&&(Math.round(s+o)!==t&&(s-=e5(r,"left","right")+o),Math.round(c+a)!==n&&(c-=e5(r,"top","bottom")+a)),!yEe(e)){var l=Math.round(s+o)-t,u=Math.round(c+a)-n;Math.abs(l)!==1&&(s-=l),Math.abs(u)!==1&&(c-=u)}return AC(i.left,i.top,s,c)}var SEe=function(){return typeof SVGGraphicsElement<"u"?function(e){return e instanceof Zf(e).SVGGraphicsElement}:function(e){return e instanceof Zf(e).SVGElement&&typeof e.getBBox=="function"}}();function yEe(e){return e===Zf(e).document.documentElement}function CEe(e){return hO?SEe(e)?EEe(e):_Ee(e):RK}function bEe(e){var t=e.x,n=e.y,r=e.width,i=e.height,o=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,a=Object.create(o.prototype);return TK(a,{x:t,y:n,width:r,height:i,top:n,right:t+r,bottom:i+n,left:t}),a}function AC(e,t,n,r){return{x:e,y:t,width:n,height:r}}var TEe=function(){function e(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=AC(0,0,0,0),this.target=t}return e.prototype.isActive=function(){var t=CEe(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},e}(),REe=function(){function e(t,n){var r=bEe(n);TK(this,{target:t,contentRect:r})}return e}(),wEe=function(){function e(t,n,r){if(this.activeObservations_=[],this.observations_=new bK,typeof t!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=n,this.callbackCtx_=r}return e.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof Zf(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(t)||(n.set(t,new TEe(t)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof Zf(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(t)&&(n.delete(t),n.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(n){n.isActive()&&t.activeObservations_.push(n)})},e.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,n=this.activeObservations_.map(function(r){return new REe(r.target,r.broadcastRect())});this.callback_.call(t,n,t),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),wK=typeof WeakMap<"u"?new WeakMap:new bK,IK=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=gEe.getInstance(),r=new wEe(t,n,this);wK.set(this,r)}return e}();["observe","unobserve","disconnect"].forEach(function(e){IK.prototype[e]=function(){var t;return(t=wK.get(this))[e].apply(t,arguments)}});var IEe=function(){return typeof VS.ResizeObserver<"u"?VS.ResizeObserver:IK}(),tu=new Map;function AEe(e){e.forEach(function(t){var n,r=t.target;(n=tu.get(r))===null||n===void 0||n.forEach(function(i){return i(r)})})}var AK=new IEe(AEe);function OEe(e,t){tu.has(e)||(tu.set(e,new Set),AK.observe(e)),tu.get(e).add(t)}function xEe(e,t){tu.has(e)&&(tu.get(e).delete(t),tu.get(e).size||(AK.unobserve(e),tu.delete(e)))}function Ui(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t5(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,yK(r.key),r)}}function Bi(e,t,n){return t&&t5(e.prototype,t),n&&t5(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function og(e,t){return og=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},og(e,t)}function _l(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&og(e,t)}function Md(e){return Md=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Md(e)}function OC(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(OC=function(){return!!e})()}function Cn(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function OK(e,t){if(t&&(yt(t)=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Cn(e)}function Zd(e){var t=OC();return function(){var n,r=Md(e);if(t){var i=Md(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return OK(this,n)}}var NEe=function(e){_l(n,e);var t=Zd(n);function n(){return Ui(this,n),t.apply(this,arguments)}return Bi(n,[{key:"render",value:function(){return this.props.children}}]),n}(v.Component);function PEe(e,t){var n=e.children,r=e.disabled,i=v.useRef(null),o=v.useRef(null),a=v.useContext(dO),s=typeof n=="function",c=s?n(i):n,l=v.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),u=!s&&v.isValidElement(c)&&Ip(c),d=u?c.ref:null,h=Hg(d,i),f=function(){var _;return a0(i.current)||(i.current&&yt(i.current)==="object"?a0((_=i.current)===null||_===void 0?void 0:_.nativeElement):null)||a0(o.current)};v.useImperativeHandle(t,function(){return f()});var g=v.useRef(e);g.current=e;var p=v.useCallback(function(m){var _=g.current,E=_.onResize,S=_.data,C=m.getBoundingClientRect(),b=C.width,T=C.height,R=m.offsetWidth,A=m.offsetHeight,O=Math.floor(b),x=Math.floor(T);if(l.current.width!==O||l.current.height!==x||l.current.offsetWidth!==R||l.current.offsetHeight!==A){var M={width:O,height:x,offsetWidth:R,offsetHeight:A};l.current=M;var $=R===Math.round(b)?b:R,U=A===Math.round(T)?T:A,V=Y(Y({},M),{},{offsetWidth:$,offsetHeight:U});a==null||a(V,m,S),E&&Promise.resolve().then(function(){E(V,m)})}},[]);return v.useEffect(function(){var m=f();return m&&!r&&OEe(m,p),function(){return xEe(m,p)}},[i.current,r]),v.createElement(NEe,{ref:o},u?v.cloneElement(c,{ref:h}):c)}var DEe=v.forwardRef(PEe),LEe="rc-observer-key";function kEe(e,t){var n=e.children,r=typeof n=="function"?[n]:zs(n);return r.map(function(i,o){var a=(i==null?void 0:i.key)||"".concat(LEe,"-").concat(o);return v.createElement(DEe,Ee({},e,{key:a,ref:o===0?t:void 0}),i)})}var Sl=v.forwardRef(kEe);Sl.Collection=lEe;function So(e,t){var n=Y({},e);return Array.isArray(t)&&t.forEach(function(r){delete n[r]}),n}function fO(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function MEe(e){if(Array.isArray(e))return fO(e)}function xK(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function kP(e,t){if(e){if(typeof e=="string")return fO(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?fO(e,t):void 0}}function FEe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Me(e){return MEe(e)||xK(e)||kP(e)||FEe()}var NK=function(t){return+setTimeout(t,16)},PK=function(t){return clearTimeout(t)};typeof window<"u"&&"requestAnimationFrame"in window&&(NK=function(t){return window.requestAnimationFrame(t)},PK=function(t){return window.cancelAnimationFrame(t)});var n5=0,MP=new Map;function DK(e){MP.delete(e)}var sr=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;n5+=1;var r=n5;function i(o){if(o===0)DK(r),t();else{var a=NK(function(){i(o-1)});MP.set(r,a)}}return i(n),r};sr.cancel=function(e){var t=MP.get(e);return DK(e),PK(t)};function LK(e){if(Array.isArray(e))return e}function UEe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,o,a,s=[],c=!0,l=!1;try{if(o=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(u){l=!0,i=u}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}function kK(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ce(e,t){return LK(e)||UEe(e,t)||kP(e,t)||kK()}function ag(e){for(var t=0,n,r=0,i=e.length;i>=4;++r,i-=4)n=e.charCodeAt(r)&255|(e.charCodeAt(++r)&255)<<8|(e.charCodeAt(++r)&255)<<16|(e.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,t=(n&65535)*1540483477+((n>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(i){case 3:t^=(e.charCodeAt(r+2)&255)<<16;case 2:t^=(e.charCodeAt(r+1)&255)<<8;case 1:t^=e.charCodeAt(r)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}function No(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function BEe(e,t){if(!e)return!1;if(e.contains)return e.contains(t);for(var n=t;n;){if(n===e)return!0;n=n.parentNode}return!1}var r5="data-rc-order",i5="data-rc-priority",$Ee="rc-util-key",pO=new Map;function MK(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.mark;return t?t.startsWith("data-")?t:"data-".concat(t):$Ee}function xC(e){if(e.attachTo)return e.attachTo;var t=document.querySelector("head");return t||document.body}function VEe(e){return e==="queue"?"prependQueue":e?"prepend":"append"}function FP(e){return Array.from((pO.get(e)||e).children).filter(function(t){return t.tagName==="STYLE"})}function FK(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!No())return null;var n=t.csp,r=t.prepend,i=t.priority,o=i===void 0?0:i,a=VEe(r),s=a==="prependQueue",c=document.createElement("style");c.setAttribute(r5,a),s&&o&&c.setAttribute(i5,"".concat(o)),n!=null&&n.nonce&&(c.nonce=n==null?void 0:n.nonce),c.innerHTML=e;var l=xC(t),u=l.firstChild;if(r){if(s){var d=(t.styles||FP(l)).filter(function(h){if(!["prepend","prependQueue"].includes(h.getAttribute(r5)))return!1;var f=Number(h.getAttribute(i5)||0);return o>=f});if(d.length)return l.insertBefore(c,d[d.length-1].nextSibling),c}l.insertBefore(c,u)}else l.appendChild(c);return c}function UK(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=xC(t);return(t.styles||FP(n)).find(function(r){return r.getAttribute(MK(t))===e})}function sg(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=UK(e,t);if(n){var r=xC(t);r.removeChild(n)}}function jEe(e,t){var n=pO.get(e);if(!n||!BEe(document,n)){var r=FK("",t),i=r.parentNode;pO.set(e,i),e.removeChild(r)}}function cl(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=xC(n),i=FP(r),o=Y(Y({},n),{},{styles:i});jEe(r,o);var a=UK(t,o);if(a){var s,c;if((s=o.csp)!==null&&s!==void 0&&s.nonce&&a.nonce!==((c=o.csp)===null||c===void 0?void 0:c.nonce)){var l;a.nonce=(l=o.csp)===null||l===void 0?void 0:l.nonce}return a.innerHTML!==e&&(a.innerHTML=e),a}var u=FK(e,o);return u.setAttribute(MK(o),t),u}function HEe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function kt(e,t){if(e==null)return{};var n,r,i=HEe(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function cg(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=new Set;function i(o,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,c=r.has(o);if(mo(!c,"Warning: There may be circular references"),c)return!1;if(o===a)return!0;if(n&&s>1)return!1;r.add(o);var l=s+1;if(Array.isArray(o)){if(!Array.isArray(a)||o.length!==a.length)return!1;for(var u=0;u<o.length;u++)if(!i(o[u],a[u],l))return!1;return!0}if(o&&a&&yt(o)==="object"&&yt(a)==="object"){var d=Object.keys(o);return d.length!==Object.keys(a).length?!1:d.every(function(h){return i(o[h],a[h],l)})}return!1}return i(e,t)}var zEe="%";function mO(e){return e.join(zEe)}var WEe=function(){function e(t){Ui(this,e),J(this,"instanceId",void 0),J(this,"cache",new Map),this.instanceId=t}return Bi(e,[{key:"get",value:function(n){return this.opGet(mO(n))}},{key:"opGet",value:function(n){return this.cache.get(n)||null}},{key:"update",value:function(n,r){return this.opUpdate(mO(n),r)}},{key:"opUpdate",value:function(n,r){var i=this.cache.get(n),o=r(i);o===null?this.cache.delete(n):this.cache.set(n,o)}}]),e}(),ep="data-token-hash",Bs="data-css-hash",nu="__cssinjs_instance__";function GEe(){var e=Math.random().toString(12).slice(2);if(typeof document<"u"&&document.head&&document.body){var t=document.body.querySelectorAll("style[".concat(Bs,"]"))||[],n=document.head.firstChild;Array.from(t).forEach(function(i){i[nu]=i[nu]||e,i[nu]===e&&document.head.insertBefore(i,n)});var r={};Array.from(document.querySelectorAll("style[".concat(Bs,"]"))).forEach(function(i){var o=i.getAttribute(Bs);if(r[o]){if(i[nu]===e){var a;(a=i.parentNode)===null||a===void 0||a.removeChild(i)}}else r[o]=!0})}return new WEe(e)}var NC=v.createContext({hashPriority:"low",cache:GEe(),defaultCache:!0});function KEe(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}var UP=function(){function e(){Ui(this,e),J(this,"cache",void 0),J(this,"keys",void 0),J(this,"cacheCallTimes",void 0),this.cache=new Map,this.keys=[],this.cacheCallTimes=0}return Bi(e,[{key:"size",value:function(){return this.keys.length}},{key:"internalGet",value:function(n){var r,i,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a={map:this.cache};return n.forEach(function(s){if(!a)a=void 0;else{var c;a=(c=a)===null||c===void 0||(c=c.map)===null||c===void 0?void 0:c.get(s)}}),(r=a)!==null&&r!==void 0&&r.value&&o&&(a.value[1]=this.cacheCallTimes++),(i=a)===null||i===void 0?void 0:i.value}},{key:"get",value:function(n){var r;return(r=this.internalGet(n,!0))===null||r===void 0?void 0:r[0]}},{key:"has",value:function(n){return!!this.internalGet(n)}},{key:"set",value:function(n,r){var i=this;if(!this.has(n)){if(this.size()+1>e.MAX_CACHE_SIZE+e.MAX_CACHE_OFFSET){var o=this.keys.reduce(function(l,u){var d=ce(l,2),h=d[1];return i.internalGet(u)[1]<h?[u,i.internalGet(u)[1]]:l},[this.keys[0],this.cacheCallTimes]),a=ce(o,1),s=a[0];this.delete(s)}this.keys.push(n)}var c=this.cache;n.forEach(function(l,u){if(u===n.length-1)c.set(l,{value:[r,i.cacheCallTimes++]});else{var d=c.get(l);d?d.map||(d.map=new Map):c.set(l,{map:new Map}),c=c.get(l).map}})}},{key:"deleteByPath",value:function(n,r){var i=n.get(r[0]);if(r.length===1){var o;return i.map?n.set(r[0],{map:i.map}):n.delete(r[0]),(o=i.value)===null||o===void 0?void 0:o[0]}var a=this.deleteByPath(i.map,r.slice(1));return(!i.map||i.map.size===0)&&!i.value&&n.delete(r[0]),a}},{key:"delete",value:function(n){if(this.has(n))return this.keys=this.keys.filter(function(r){return!KEe(r,n)}),this.deleteByPath(this.cache,n)}}]),e}();J(UP,"MAX_CACHE_SIZE",20);J(UP,"MAX_CACHE_OFFSET",5);var o5=0,BK=function(){function e(t){Ui(this,e),J(this,"derivatives",void 0),J(this,"id",void 0),this.derivatives=Array.isArray(t)?t:[t],this.id=o5,t.length===0&&(t.length>0,void 0),o5+=1}return Bi(e,[{key:"getDerivativeToken",value:function(n){return this.derivatives.reduce(function(r,i){return i(n,r)},void 0)}}]),e}(),TR=new UP;function gO(e){var t=Array.isArray(e)?e:[e];return TR.has(t)||TR.set(t,new BK(t)),TR.get(t)}var qEe=new WeakMap,RR={};function YEe(e,t){for(var n=qEe,r=0;r<t.length;r+=1){var i=t[r];n.has(i)||n.set(i,new WeakMap),n=n.get(i)}return n.has(RR)||n.set(RR,e()),n.get(RR)}var a5=new WeakMap;function s0(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=a5.get(e)||"";return n||(Object.keys(e).forEach(function(r){var i=e[r];n+=r,i instanceof BK?n+=i.id:i&&yt(i)==="object"?n+=s0(i,t):n+=i}),t&&(n=ag(n)),a5.set(e,n)),n}function s5(e,t){return ag("".concat(t,"_").concat(s0(e,!0)))}var vO=No();function ve(e){return typeof e=="number"?"".concat(e,"px"):e}function HS(e,t,n){var r,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(o)return e;var a=Y(Y({},i),{},(r={},J(r,ep,t),J(r,Bs,n),r)),s=Object.keys(a).map(function(c){var l=a[c];return l?"".concat(c,'="').concat(l,'"'):null}).filter(function(c){return c}).join(" ");return"<style ".concat(s,">").concat(e,"</style>")}var $K=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return"--".concat(n?"".concat(n,"-"):"").concat(t).replace(/([a-z0-9])([A-Z])/g,"$1-$2").replace(/([A-Z]+)([A-Z][a-z0-9]+)/g,"$1-$2").replace(/([a-z])([A-Z0-9])/g,"$1-$2").toLowerCase()},XEe=function(t,n,r){return Object.keys(t).length?".".concat(n).concat(r!=null&&r.scope?".".concat(r.scope):"","{").concat(Object.entries(t).map(function(i){var o=ce(i,2),a=o[0],s=o[1];return"".concat(a,":").concat(s,";")}).join(""),"}"):""},VK=function(t,n,r){var i={},o={};return Object.entries(t).forEach(function(a){var s,c,l=ce(a,2),u=l[0],d=l[1];if(r!=null&&(s=r.preserve)!==null&&s!==void 0&&s[u])o[u]=d;else if((typeof d=="string"||typeof d=="number")&&!(r!=null&&(c=r.ignore)!==null&&c!==void 0&&c[u])){var h,f=$K(u,r==null?void 0:r.prefix);i[f]=typeof d=="number"&&!(r!=null&&(h=r.unitless)!==null&&h!==void 0&&h[u])?"".concat(d,"px"):String(d),o[u]="var(".concat(f,")")}}),[o,XEe(i,n,{scope:r==null?void 0:r.scope})]},c5=No()?v.useLayoutEffect:v.useEffect,Mn=function(t,n){var r=v.useRef(!0);c5(function(){return t(r.current)},n),c5(function(){return r.current=!1,function(){r.current=!0}},[])},l5=function(t,n){Mn(function(r){if(!r)return t()},n)},JEe=Y({},Rd),u5=JEe.useInsertionEffect,QEe=function(t,n,r){v.useMemo(t,r),Mn(function(){return n(!0)},r)},ZEe=u5?function(e,t,n){return u5(function(){return e(),t()},n)}:QEe,e_e=Y({},Rd),t_e=e_e.useInsertionEffect,n_e=function(t){var n=[],r=!1;function i(o){r||n.push(o)}return v.useEffect(function(){return r=!1,function(){r=!0,n.length&&n.forEach(function(o){return o()})}},t),i},r_e=function(){return function(t){t()}},i_e=typeof t_e<"u"?n_e:r_e;function BP(e,t,n,r,i){var o=v.useContext(NC),a=o.cache,s=[e].concat(Me(t)),c=mO(s),l=i_e([c]),u=function(g){a.opUpdate(c,function(p){var m=p||[void 0,void 0],_=ce(m,2),E=_[0],S=E===void 0?0:E,C=_[1],b=C,T=b||n(),R=[S,T];return g?g(R):R})};v.useMemo(function(){u()},[c]);var d=a.opGet(c),h=d[1];return ZEe(function(){i==null||i(h)},function(f){return u(function(g){var p=ce(g,2),m=p[0],_=p[1];return f&&m===0&&(i==null||i(h)),[m+1,_]}),function(){a.opUpdate(c,function(g){var p=g||[],m=ce(p,2),_=m[0],E=_===void 0?0:_,S=m[1],C=E-1;return C===0?(l(function(){(f||!a.opGet(c))&&(r==null||r(S,!1))}),null):[E-1,S]})}},[c]),h}var o_e={},a_e="css",nd=new Map;function s_e(e){nd.set(e,(nd.get(e)||0)+1)}function c_e(e,t){if(typeof document<"u"){var n=document.querySelectorAll("style[".concat(ep,'="').concat(e,'"]'));n.forEach(function(r){if(r[nu]===t){var i;(i=r.parentNode)===null||i===void 0||i.removeChild(r)}})}}var l_e=0;function u_e(e,t){nd.set(e,(nd.get(e)||0)-1);var n=Array.from(nd.keys()),r=n.filter(function(i){var o=nd.get(i)||0;return o<=0});n.length-r.length>l_e&&r.forEach(function(i){c_e(i,t),nd.delete(i)})}var d_e=function(t,n,r,i){var o=r.getDerivativeToken(t),a=Y(Y({},o),n);return i&&(a=i(a)),a},jK="token";function h_e(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=v.useContext(NC),i=r.cache.instanceId,o=r.container,a=n.salt,s=a===void 0?"":a,c=n.override,l=c===void 0?o_e:c,u=n.formatToken,d=n.getComputedToken,h=n.cssVar,f=YEe(function(){return Object.assign.apply(Object,[{}].concat(Me(t)))},t),g=s0(f),p=s0(l),m=h?s0(h):"",_=BP(jK,[s,e.id,g,p,m],function(){var E,S=d?d(f,l,e):d_e(f,l,e,u),C=Y({},S),b="";if(h){var T=VK(S,h.key,{prefix:h.prefix,ignore:h.ignore,unitless:h.unitless,preserve:h.preserve}),R=ce(T,2);S=R[0],b=R[1]}var A=s5(S,s);S._tokenKey=A,C._tokenKey=s5(C,s);var O=(E=h==null?void 0:h.key)!==null&&E!==void 0?E:A;S._themeKey=O,s_e(O);var x="".concat(a_e,"-").concat(ag(A));return S._hashId=x,[S,x,C,b,(h==null?void 0:h.key)||""]},function(E){u_e(E[0]._themeKey,i)},function(E){var S=ce(E,4),C=S[0],b=S[3];if(h&&b){var T=cl(b,ag("css-variables-".concat(C._themeKey)),{mark:Bs,prepend:"queue",attachTo:o,priority:-999});T[nu]=i,T.setAttribute(ep,C._themeKey)}});return _}var f_e=function(t,n,r){var i=ce(t,5),o=i[2],a=i[3],s=i[4],c=r||{},l=c.plain;if(!a)return null;var u=o._tokenKey,d=-999,h={"data-rc-order":"prependQueue","data-rc-priority":"".concat(d)},f=HS(a,s,u,h,l);return[d,u,f]},p_e={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},HK="comm",zK="rule",WK="decl",m_e="@import",g_e="@keyframes",v_e="@layer",GK=Math.abs,$P=String.fromCharCode;function KK(e){return e.trim()}function O_(e,t,n){return e.replace(t,n)}function E_e(e,t,n){return e.indexOf(t,n)}function lg(e,t){return e.charCodeAt(t)|0}function ug(e,t,n){return e.slice(t,n)}function tl(e){return e.length}function __e(e){return e.length}function EE(e,t){return t.push(e),e}var PC=1,tp=1,qK=0,cs=0,ui=0,Ap="";function VP(e,t,n,r,i,o,a,s){return{value:e,root:t,parent:n,type:r,props:i,children:o,line:PC,column:tp,length:a,return:"",siblings:s}}function S_e(){return ui}function y_e(){return ui=cs>0?lg(Ap,--cs):0,tp--,ui===10&&(tp=1,PC--),ui}function $s(){return ui=cs<qK?lg(Ap,cs++):0,tp++,ui===10&&(tp=1,PC++),ui}function Cd(){return lg(Ap,cs)}function x_(){return cs}function DC(e,t){return ug(Ap,e,t)}function EO(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function C_e(e){return PC=tp=1,qK=tl(Ap=e),cs=0,[]}function b_e(e){return Ap="",e}function wR(e){return KK(DC(cs-1,_O(e===91?e+2:e===40?e+1:e)))}function T_e(e){for(;(ui=Cd())&&ui<33;)$s();return EO(e)>2||EO(ui)>3?"":" "}function R_e(e,t){for(;--t&&$s()&&!(ui<48||ui>102||ui>57&&ui<65||ui>70&&ui<97););return DC(e,x_()+(t<6&&Cd()==32&&$s()==32))}function _O(e){for(;$s();)switch(ui){case e:return cs;case 34:case 39:e!==34&&e!==39&&_O(ui);break;case 40:e===41&&_O(e);break;case 92:$s();break}return cs}function w_e(e,t){for(;$s()&&e+ui!==47+10;)if(e+ui===42+42&&Cd()===47)break;return"/*"+DC(t,cs-1)+"*"+$P(e===47?e:$s())}function I_e(e){for(;!EO(Cd());)$s();return DC(e,cs)}function A_e(e){return b_e(N_("",null,null,null,[""],e=C_e(e),0,[0],e))}function N_(e,t,n,r,i,o,a,s,c){for(var l=0,u=0,d=a,h=0,f=0,g=0,p=1,m=1,_=1,E=0,S="",C=i,b=o,T=r,R=S;m;)switch(g=E,E=$s()){case 40:if(g!=108&&lg(R,d-1)==58){E_e(R+=O_(wR(E),"&","&\f"),"&\f",GK(l?s[l-1]:0))!=-1&&(_=-1);break}case 34:case 39:case 91:R+=wR(E);break;case 9:case 10:case 13:case 32:R+=T_e(g);break;case 92:R+=R_e(x_()-1,7);continue;case 47:switch(Cd()){case 42:case 47:EE(O_e(w_e($s(),x_()),t,n,c),c);break;default:R+="/"}break;case 123*p:s[l++]=tl(R)*_;case 125*p:case 59:case 0:switch(E){case 0:case 125:m=0;case 59+u:_==-1&&(R=O_(R,/\f/g,"")),f>0&&tl(R)-d&&EE(f>32?h5(R+";",r,n,d-1,c):h5(O_(R," ","")+";",r,n,d-2,c),c);break;case 59:R+=";";default:if(EE(T=d5(R,t,n,l,u,i,s,S,C=[],b=[],d,o),o),E===123)if(u===0)N_(R,t,T,T,C,o,d,s,b);else switch(h===99&&lg(R,3)===110?100:h){case 100:case 108:case 109:case 115:N_(e,T,T,r&&EE(d5(e,T,T,0,0,i,s,S,i,C=[],d,b),b),i,b,d,s,r?C:b);break;default:N_(R,T,T,T,[""],b,0,s,b)}}l=u=f=0,p=_=1,S=R="",d=a;break;case 58:d=1+tl(R),f=g;default:if(p<1){if(E==123)--p;else if(E==125&&p++==0&&y_e()==125)continue}switch(R+=$P(E),E*p){case 38:_=u>0?1:(R+="\f",-1);break;case 44:s[l++]=(tl(R)-1)*_,_=1;break;case 64:Cd()===45&&(R+=wR($s())),h=Cd(),u=d=tl(S=R+=I_e(x_())),E++;break;case 45:g===45&&tl(R)==2&&(p=0)}}return o}function d5(e,t,n,r,i,o,a,s,c,l,u,d){for(var h=i-1,f=i===0?o:[""],g=__e(f),p=0,m=0,_=0;p<r;++p)for(var E=0,S=ug(e,h+1,h=GK(m=a[p])),C=e;E<g;++E)(C=KK(m>0?f[E]+" "+S:O_(S,/&\f/g,f[E])))&&(c[_++]=C);return VP(e,t,n,i===0?zK:s,c,l,u,d)}function O_e(e,t,n,r){return VP(e,t,n,HK,$P(S_e()),ug(e,2,-2),0,r)}function h5(e,t,n,r,i){return VP(e,t,n,WK,ug(e,0,r),ug(e,r+1,-1),r,i)}function SO(e,t){for(var n="",r=0;r<e.length;r++)n+=t(e[r],r,e,t)||"";return n}function x_e(e,t,n,r){switch(e.type){case v_e:if(e.children.length)break;case m_e:case WK:return e.return=e.return||e.value;case HK:return"";case g_e:return e.return=e.value+"{"+SO(e.children,r)+"}";case zK:if(!tl(e.value=e.props.join(",")))return""}return tl(n=SO(e.children,r))?e.return=e.value+"{"+n+"}":""}var f5="data-ant-cssinjs-cache-path",YK="_FILE_STYLE__",bd,XK=!0;function N_e(){if(!bd&&(bd={},No())){var e=document.createElement("div");e.className=f5,e.style.position="fixed",e.style.visibility="hidden",e.style.top="-9999px",document.body.appendChild(e);var t=getComputedStyle(e).content||"";t=t.replace(/^"/,"").replace(/"$/,""),t.split(";").forEach(function(i){var o=i.split(":"),a=ce(o,2),s=a[0],c=a[1];bd[s]=c});var n=document.querySelector("style[".concat(f5,"]"));if(n){var r;XK=!1,(r=n.parentNode)===null||r===void 0||r.removeChild(n)}document.body.removeChild(e)}}function P_e(e){return N_e(),!!bd[e]}function D_e(e){var t=bd[e],n=null;if(t&&No())if(XK)n=YK;else{var r=document.querySelector("style[".concat(Bs,'="').concat(bd[e],'"]'));r?n=r.innerHTML:delete bd[e]}return[n,t]}var L_e="_skip_check_",JK="_multi_value_";function P_(e){var t=SO(A_e(e),x_e);return t.replace(/\{%%%\:[^;];}/g,";")}function k_e(e){return yt(e)==="object"&&e&&(L_e in e||JK in e)}function M_e(e,t,n){if(!t)return e;var r=".".concat(t),i=n==="low"?":where(".concat(r,")"):r,o=e.split(",").map(function(a){var s,c=a.trim().split(/\s+/),l=c[0]||"",u=((s=l.match(/^\w+/))===null||s===void 0?void 0:s[0])||"";return l="".concat(u).concat(i).concat(l.slice(u.length)),[l].concat(Me(c.slice(1))).join(" ")});return o.join(",")}var F_e=function e(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{root:!0,parentSelectors:[]},i=r.root,o=r.injectHash,a=r.parentSelectors,s=n.hashId,c=n.layer;n.path;var l=n.hashPriority,u=n.transformers,d=u===void 0?[]:u;n.linters;var h="",f={};function g(_){var E=_.getName(s);if(!f[E]){var S=e(_.style,n,{root:!1,parentSelectors:a}),C=ce(S,1),b=C[0];f[E]="@keyframes ".concat(_.getName(s)).concat(b)}}function p(_){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return _.forEach(function(S){Array.isArray(S)?p(S,E):S&&E.push(S)}),E}var m=p(Array.isArray(t)?t:[t]);return m.forEach(function(_){var E=typeof _=="string"&&!i?{}:_;if(typeof E=="string")h+="".concat(E,`
`);else if(E._keyframe)g(E);else{var S=d.reduce(function(C,b){var T;return(b==null||(T=b.visit)===null||T===void 0?void 0:T.call(b,C))||C},E);Object.keys(S).forEach(function(C){var b=S[C];if(yt(b)==="object"&&b&&(C!=="animationName"||!b._keyframe)&&!k_e(b)){var T=!1,R=C.trim(),A=!1;(i||o)&&s?R.startsWith("@")?T=!0:R=M_e(C,s,l):i&&!s&&(R==="&"||R==="")&&(R="",A=!0);var O=e(b,n,{root:A,injectHash:T,parentSelectors:[].concat(Me(a),[R])}),x=ce(O,2),M=x[0],$=x[1];f=Y(Y({},f),$),h+="".concat(R).concat(M)}else{let z=function(L,D){var j=L.replace(/[A-Z]/g,function(y){return"-".concat(y.toLowerCase())}),F=D;!p_e[L]&&typeof F=="number"&&F!==0&&(F="".concat(F,"px")),L==="animationName"&&D!==null&&D!==void 0&&D._keyframe&&(g(D),F=D.getName(s)),h+="".concat(j,":").concat(F,";")};var W=z,U,V=(U=b==null?void 0:b.value)!==null&&U!==void 0?U:b;yt(b)==="object"&&b!==null&&b!==void 0&&b[JK]&&Array.isArray(V)?V.forEach(function(L){z(C,L)}):z(C,V)}})}}),i?c&&(h="@layer ".concat(c.name," {").concat(h,"}"),c.dependencies&&(f["@layer ".concat(c.name)]=c.dependencies.map(function(_){return"@layer ".concat(_,", ").concat(c.name,";")}).join(`
`))):h="{".concat(h,"}"),[h,f]};function QK(e,t){return ag("".concat(e.join("%")).concat(t))}function U_e(){return null}var ZK="style";function yO(e,t){var n=e.token,r=e.path,i=e.hashId,o=e.layer,a=e.nonce,s=e.clientOnly,c=e.order,l=c===void 0?0:c,u=v.useContext(NC),d=u.autoClear;u.mock;var h=u.defaultCache,f=u.hashPriority,g=u.container,p=u.ssrInline,m=u.transformers,_=u.linters,E=u.cache,S=u.layer,C=n._tokenKey,b=[C];S&&b.push("layer"),b.push.apply(b,Me(r));var T=vO,R=BP(ZK,b,function(){var $=b.join("|");if(P_e($)){var U=D_e($),V=ce(U,2),W=V[0],z=V[1];if(W)return[W,C,z,{},s,l]}var L=t(),D=F_e(L,{hashId:i,hashPriority:f,layer:S?o:void 0,path:r.join("-"),transformers:m,linters:_}),j=ce(D,2),F=j[0],y=j[1],I=P_(F),N=QK(b,I);return[I,C,N,y,s,l]},function($,U){var V=ce($,3),W=V[2];(U||d)&&vO&&sg(W,{mark:Bs})},function($){var U=ce($,4),V=U[0];U[1];var W=U[2],z=U[3];if(T&&V!==YK){var L={mark:Bs,prepend:S?!1:"queue",attachTo:g,priority:l},D=typeof a=="function"?a():a;D&&(L.csp={nonce:D});var j=[],F=[];Object.keys(z).forEach(function(I){I.startsWith("@layer")?j.push(I):F.push(I)}),j.forEach(function(I){cl(P_(z[I]),"_layer-".concat(I),Y(Y({},L),{},{prepend:!0}))});var y=cl(V,W,L);y[nu]=E.instanceId,y.setAttribute(ep,C),F.forEach(function(I){cl(P_(z[I]),"_effect-".concat(I),L)})}}),A=ce(R,3),O=A[0],x=A[1],M=A[2];return function($){var U;if(!p||T||!h)U=v.createElement(U_e,null);else{var V;U=v.createElement("style",Ee({},(V={},J(V,ep,x),J(V,Bs,M),V),{dangerouslySetInnerHTML:{__html:O}}))}return v.createElement(v.Fragment,null,U,$)}}var B_e=function(t,n,r){var i=ce(t,6),o=i[0],a=i[1],s=i[2],c=i[3],l=i[4],u=i[5],d=r||{},h=d.plain;if(l)return null;var f=o,g={"data-rc-order":"prependQueue","data-rc-priority":"".concat(u)};return f=HS(o,a,s,g,h),c&&Object.keys(c).forEach(function(p){if(!n[p]){n[p]=!0;var m=P_(c[p]),_=HS(m,a,"_effect-".concat(p),g,h);p.startsWith("@layer")?f=_+f:f+=_}}),[u,s,f]},eq="cssVar",$_e=function(t,n){var r=t.key,i=t.prefix,o=t.unitless,a=t.ignore,s=t.token,c=t.scope,l=c===void 0?"":c,u=v.useContext(NC),d=u.cache.instanceId,h=u.container,f=s._tokenKey,g=[].concat(Me(t.path),[r,l,f]),p=BP(eq,g,function(){var m=n(),_=VK(m,r,{prefix:i,unitless:o,ignore:a,scope:l}),E=ce(_,2),S=E[0],C=E[1],b=QK(g,C);return[S,C,b,r]},function(m){var _=ce(m,3),E=_[2];vO&&sg(E,{mark:Bs})},function(m){var _=ce(m,3),E=_[1],S=_[2];if(E){var C=cl(E,S,{mark:Bs,prepend:"queue",attachTo:h,priority:-999});C[nu]=d,C.setAttribute(ep,r)}});return p},V_e=function(t,n,r){var i=ce(t,4),o=i[1],a=i[2],s=i[3],c=r||{},l=c.plain;if(!o)return null;var u=-999,d={"data-rc-order":"prependQueue","data-rc-priority":"".concat(u)},h=HS(o,s,a,d,l);return[u,a,h]},am;am={},J(am,ZK,B_e),J(am,jK,f_e),J(am,eq,V_e);var Tn=function(){function e(t,n){Ui(this,e),J(this,"name",void 0),J(this,"style",void 0),J(this,"_keyframe",!0),this.name=t,this.style=n}return Bi(e,[{key:"getName",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return n?"".concat(n,"-").concat(this.name):this.name}}]),e}();function Ah(e){return e.notSplit=!0,e}Ah(["borderTop","borderBottom"]),Ah(["borderTop"]),Ah(["borderBottom"]),Ah(["borderLeft","borderRight"]),Ah(["borderLeft"]),Ah(["borderRight"]);var j_e=v.createContext({});const jP=j_e;function tq(e){return LK(e)||xK(e)||kP(e)||kK()}function Sc(e,t){for(var n=e,r=0;r<t.length;r+=1){if(n==null)return;n=n[t[r]]}return n}function nq(e,t,n,r){if(!t.length)return n;var i=tq(t),o=i[0],a=i.slice(1),s;return!e&&typeof o=="number"?s=[]:Array.isArray(e)?s=Me(e):s=Y({},e),r&&n===void 0&&a.length===1?delete s[o][a[0]]:s[o]=nq(s[o],a,n,r),s}function xs(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return t.length&&r&&n===void 0&&!Sc(e,t.slice(0,-1))?e:nq(e,t,n,r)}function H_e(e){return yt(e)==="object"&&e!==null&&Object.getPrototypeOf(e)===Object.prototype}function p5(e){return Array.isArray(e)?[]:{}}var z_e=typeof Reflect>"u"?Object.keys:Reflect.ownKeys;function hf(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=p5(t[0]);return t.forEach(function(i){function o(a,s){var c=new Set(s),l=Sc(i,a),u=Array.isArray(l);if(u||H_e(l)){if(!c.has(l)){c.add(l);var d=Sc(r,a);u?r=xs(r,a,[]):(!d||yt(d)!=="object")&&(r=xs(r,a,p5(l))),z_e(l).forEach(function(h){o([].concat(Me(a),[h]),c)})}}else r=xs(r,a,l)}o([])}),r}function W_e(){}const G_e=v.createContext({}),LC=()=>{const e=()=>{};return e.deprecated=W_e,e},rq=v.createContext(void 0);var iq={items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"},K_e={locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"OK",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"};const q_e={placeholder:"Select time",rangePlaceholder:["Start time","End time"]},oq=q_e,Y_e={lang:Object.assign({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeQuarterPlaceholder:["Start quarter","End quarter"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},K_e),timePickerLocale:Object.assign({},oq)},m5=Y_e,aa="${label} is not a valid ${type}",X_e={locale:"en",Pagination:iq,DatePicker:m5,TimePicker:oq,Calendar:m5,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",filterCheckall:"Select all items",filterSearchPlaceholder:"Search in filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Tour:{Next:"Next",Previous:"Previous",Finish:"Finish"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",deselectAll:"Deselect all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand",collapse:"Collapse"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:aa,method:aa,array:aa,object:aa,number:aa,date:aa,boolean:aa,integer:aa,float:aa,regexp:aa,email:aa,url:aa,hex:aa},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"},QRCode:{expired:"QR code expired",refresh:"Refresh",scanned:"Scanned"},ColorPicker:{presetEmpty:"Empty"}},Fd=X_e;Object.assign({},Fd.Modal);let D_=[];const g5=()=>D_.reduce((e,t)=>Object.assign(Object.assign({},e),t),Fd.Modal);function J_e(e){if(e){const t=Object.assign({},e);return D_.push(t),g5(),()=>{D_=D_.filter(n=>n!==t),g5()}}Object.assign({},Fd.Modal)}const Q_e=v.createContext(void 0),HP=Q_e,Z_e=(e,t)=>{const n=v.useContext(HP),r=v.useMemo(()=>{var o;const a=t||Fd[e],s=(o=n==null?void 0:n[e])!==null&&o!==void 0?o:{};return Object.assign(Object.assign({},typeof a=="function"?a():a),s||{})},[e,t,n]),i=v.useMemo(()=>{const o=n==null?void 0:n.locale;return n!=null&&n.exist&&!o?Fd.locale:o},[n]);return[r,i]},kC=Z_e,eSe="internalMark",tSe=e=>{const{locale:t={},children:n,_ANT_MARK__:r}=e;v.useEffect(()=>J_e(t&&t.Modal),[t]);const i=v.useMemo(()=>Object.assign(Object.assign({},t),{exist:!0}),[t]);return v.createElement(HP.Provider,{value:i},n)},nSe=tSe;function Zi(e,t){rSe(e)&&(e="100%");var n=iSe(e);return e=t===360?e:Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(String(e*t),10)/100),Math.abs(e-t)<1e-6?1:(t===360?e=(e<0?e%t+t:e%t)/parseFloat(String(t)):e=e%t/parseFloat(String(t)),e)}function _E(e){return Math.min(1,Math.max(0,e))}function rSe(e){return typeof e=="string"&&e.indexOf(".")!==-1&&parseFloat(e)===1}function iSe(e){return typeof e=="string"&&e.indexOf("%")!==-1}function aq(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function SE(e){return e<=1?"".concat(Number(e)*100,"%"):e}function fd(e){return e.length===1?"0"+e:String(e)}function oSe(e,t,n){return{r:Zi(e,255)*255,g:Zi(t,255)*255,b:Zi(n,255)*255}}function v5(e,t,n){e=Zi(e,255),t=Zi(t,255),n=Zi(n,255);var r=Math.max(e,t,n),i=Math.min(e,t,n),o=0,a=0,s=(r+i)/2;if(r===i)a=0,o=0;else{var c=r-i;switch(a=s>.5?c/(2-r-i):c/(r+i),r){case e:o=(t-n)/c+(t<n?6:0);break;case t:o=(n-e)/c+2;break;case n:o=(e-t)/c+4;break}o/=6}return{h:o,s:a,l:s}}function IR(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*(6*n):n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function aSe(e,t,n){var r,i,o;if(e=Zi(e,360),t=Zi(t,100),n=Zi(n,100),t===0)i=n,o=n,r=n;else{var a=n<.5?n*(1+t):n+t-n*t,s=2*n-a;r=IR(s,a,e+1/3),i=IR(s,a,e),o=IR(s,a,e-1/3)}return{r:r*255,g:i*255,b:o*255}}function CO(e,t,n){e=Zi(e,255),t=Zi(t,255),n=Zi(n,255);var r=Math.max(e,t,n),i=Math.min(e,t,n),o=0,a=r,s=r-i,c=r===0?0:s/r;if(r===i)o=0;else{switch(r){case e:o=(t-n)/s+(t<n?6:0);break;case t:o=(n-e)/s+2;break;case n:o=(e-t)/s+4;break}o/=6}return{h:o,s:c,v:a}}function sSe(e,t,n){e=Zi(e,360)*6,t=Zi(t,100),n=Zi(n,100);var r=Math.floor(e),i=e-r,o=n*(1-t),a=n*(1-i*t),s=n*(1-(1-i)*t),c=r%6,l=[n,a,o,o,s,n][c],u=[s,n,n,a,o,o][c],d=[o,o,s,n,n,a][c];return{r:l*255,g:u*255,b:d*255}}function bO(e,t,n,r){var i=[fd(Math.round(e).toString(16)),fd(Math.round(t).toString(16)),fd(Math.round(n).toString(16))];return r&&i[0].startsWith(i[0].charAt(1))&&i[1].startsWith(i[1].charAt(1))&&i[2].startsWith(i[2].charAt(1))?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function cSe(e,t,n,r,i){var o=[fd(Math.round(e).toString(16)),fd(Math.round(t).toString(16)),fd(Math.round(n).toString(16)),fd(lSe(r))];return i&&o[0].startsWith(o[0].charAt(1))&&o[1].startsWith(o[1].charAt(1))&&o[2].startsWith(o[2].charAt(1))&&o[3].startsWith(o[3].charAt(1))?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}function lSe(e){return Math.round(parseFloat(e)*255).toString(16)}function E5(e){return la(e)/255}function la(e){return parseInt(e,16)}function uSe(e){return{r:e>>16,g:(e&65280)>>8,b:e&255}}var TO={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function Vh(e){var t={r:0,g:0,b:0},n=1,r=null,i=null,o=null,a=!1,s=!1;return typeof e=="string"&&(e=fSe(e)),typeof e=="object"&&(zc(e.r)&&zc(e.g)&&zc(e.b)?(t=oSe(e.r,e.g,e.b),a=!0,s=String(e.r).substr(-1)==="%"?"prgb":"rgb"):zc(e.h)&&zc(e.s)&&zc(e.v)?(r=SE(e.s),i=SE(e.v),t=sSe(e.h,r,i),a=!0,s="hsv"):zc(e.h)&&zc(e.s)&&zc(e.l)&&(r=SE(e.s),o=SE(e.l),t=aSe(e.h,r,o),a=!0,s="hsl"),Object.prototype.hasOwnProperty.call(e,"a")&&(n=e.a)),n=aq(n),{ok:a,format:e.format||s,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:n}}var dSe="[-\\+]?\\d+%?",hSe="[-\\+]?\\d*\\.\\d+%?",ru="(?:".concat(hSe,")|(?:").concat(dSe,")"),AR="[\\s|\\(]+(".concat(ru,")[,|\\s]+(").concat(ru,")[,|\\s]+(").concat(ru,")\\s*\\)?"),OR="[\\s|\\(]+(".concat(ru,")[,|\\s]+(").concat(ru,")[,|\\s]+(").concat(ru,")[,|\\s]+(").concat(ru,")\\s*\\)?"),bs={CSS_UNIT:new RegExp(ru),rgb:new RegExp("rgb"+AR),rgba:new RegExp("rgba"+OR),hsl:new RegExp("hsl"+AR),hsla:new RegExp("hsla"+OR),hsv:new RegExp("hsv"+AR),hsva:new RegExp("hsva"+OR),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function fSe(e){if(e=e.trim().toLowerCase(),e.length===0)return!1;var t=!1;if(TO[e])e=TO[e],t=!0;else if(e==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var n=bs.rgb.exec(e);return n?{r:n[1],g:n[2],b:n[3]}:(n=bs.rgba.exec(e),n?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=bs.hsl.exec(e),n?{h:n[1],s:n[2],l:n[3]}:(n=bs.hsla.exec(e),n?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=bs.hsv.exec(e),n?{h:n[1],s:n[2],v:n[3]}:(n=bs.hsva.exec(e),n?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=bs.hex8.exec(e),n?{r:la(n[1]),g:la(n[2]),b:la(n[3]),a:E5(n[4]),format:t?"name":"hex8"}:(n=bs.hex6.exec(e),n?{r:la(n[1]),g:la(n[2]),b:la(n[3]),format:t?"name":"hex"}:(n=bs.hex4.exec(e),n?{r:la(n[1]+n[1]),g:la(n[2]+n[2]),b:la(n[3]+n[3]),a:E5(n[4]+n[4]),format:t?"name":"hex8"}:(n=bs.hex3.exec(e),n?{r:la(n[1]+n[1]),g:la(n[2]+n[2]),b:la(n[3]+n[3]),format:t?"name":"hex"}:!1)))))))))}function zc(e){return!!bs.CSS_UNIT.exec(String(e))}var bi=function(){function e(t,n){t===void 0&&(t=""),n===void 0&&(n={});var r;if(t instanceof e)return t;typeof t=="number"&&(t=uSe(t)),this.originalInput=t;var i=Vh(t);this.originalInput=t,this.r=i.r,this.g=i.g,this.b=i.b,this.a=i.a,this.roundA=Math.round(100*this.a)/100,this.format=(r=n.format)!==null&&r!==void 0?r:i.format,this.gradientType=n.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=i.ok}return e.prototype.isDark=function(){return this.getBrightness()<128},e.prototype.isLight=function(){return!this.isDark()},e.prototype.getBrightness=function(){var t=this.toRgb();return(t.r*299+t.g*587+t.b*114)/1e3},e.prototype.getLuminance=function(){var t=this.toRgb(),n,r,i,o=t.r/255,a=t.g/255,s=t.b/255;return o<=.03928?n=o/12.92:n=Math.pow((o+.055)/1.055,2.4),a<=.03928?r=a/12.92:r=Math.pow((a+.055)/1.055,2.4),s<=.03928?i=s/12.92:i=Math.pow((s+.055)/1.055,2.4),.2126*n+.7152*r+.0722*i},e.prototype.getAlpha=function(){return this.a},e.prototype.setAlpha=function(t){return this.a=aq(t),this.roundA=Math.round(100*this.a)/100,this},e.prototype.isMonochrome=function(){var t=this.toHsl().s;return t===0},e.prototype.toHsv=function(){var t=CO(this.r,this.g,this.b);return{h:t.h*360,s:t.s,v:t.v,a:this.a}},e.prototype.toHsvString=function(){var t=CO(this.r,this.g,this.b),n=Math.round(t.h*360),r=Math.round(t.s*100),i=Math.round(t.v*100);return this.a===1?"hsv(".concat(n,", ").concat(r,"%, ").concat(i,"%)"):"hsva(".concat(n,", ").concat(r,"%, ").concat(i,"%, ").concat(this.roundA,")")},e.prototype.toHsl=function(){var t=v5(this.r,this.g,this.b);return{h:t.h*360,s:t.s,l:t.l,a:this.a}},e.prototype.toHslString=function(){var t=v5(this.r,this.g,this.b),n=Math.round(t.h*360),r=Math.round(t.s*100),i=Math.round(t.l*100);return this.a===1?"hsl(".concat(n,", ").concat(r,"%, ").concat(i,"%)"):"hsla(".concat(n,", ").concat(r,"%, ").concat(i,"%, ").concat(this.roundA,")")},e.prototype.toHex=function(t){return t===void 0&&(t=!1),bO(this.r,this.g,this.b,t)},e.prototype.toHexString=function(t){return t===void 0&&(t=!1),"#"+this.toHex(t)},e.prototype.toHex8=function(t){return t===void 0&&(t=!1),cSe(this.r,this.g,this.b,this.a,t)},e.prototype.toHex8String=function(t){return t===void 0&&(t=!1),"#"+this.toHex8(t)},e.prototype.toHexShortString=function(t){return t===void 0&&(t=!1),this.a===1?this.toHexString(t):this.toHex8String(t)},e.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},e.prototype.toRgbString=function(){var t=Math.round(this.r),n=Math.round(this.g),r=Math.round(this.b);return this.a===1?"rgb(".concat(t,", ").concat(n,", ").concat(r,")"):"rgba(".concat(t,", ").concat(n,", ").concat(r,", ").concat(this.roundA,")")},e.prototype.toPercentageRgb=function(){var t=function(n){return"".concat(Math.round(Zi(n,255)*100),"%")};return{r:t(this.r),g:t(this.g),b:t(this.b),a:this.a}},e.prototype.toPercentageRgbString=function(){var t=function(n){return Math.round(Zi(n,255)*100)};return this.a===1?"rgb(".concat(t(this.r),"%, ").concat(t(this.g),"%, ").concat(t(this.b),"%)"):"rgba(".concat(t(this.r),"%, ").concat(t(this.g),"%, ").concat(t(this.b),"%, ").concat(this.roundA,")")},e.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var t="#"+bO(this.r,this.g,this.b,!1),n=0,r=Object.entries(TO);n<r.length;n++){var i=r[n],o=i[0],a=i[1];if(t===a)return o}return!1},e.prototype.toString=function(t){var n=!!t;t=t??this.format;var r=!1,i=this.a<1&&this.a>=0,o=!n&&i&&(t.startsWith("hex")||t==="name");return o?t==="name"&&this.a===0?this.toName():this.toRgbString():(t==="rgb"&&(r=this.toRgbString()),t==="prgb"&&(r=this.toPercentageRgbString()),(t==="hex"||t==="hex6")&&(r=this.toHexString()),t==="hex3"&&(r=this.toHexString(!0)),t==="hex4"&&(r=this.toHex8String(!0)),t==="hex8"&&(r=this.toHex8String()),t==="name"&&(r=this.toName()),t==="hsl"&&(r=this.toHslString()),t==="hsv"&&(r=this.toHsvString()),r||this.toHexString())},e.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},e.prototype.clone=function(){return new e(this.toString())},e.prototype.lighten=function(t){t===void 0&&(t=10);var n=this.toHsl();return n.l+=t/100,n.l=_E(n.l),new e(n)},e.prototype.brighten=function(t){t===void 0&&(t=10);var n=this.toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(255*-(t/100)))),n.g=Math.max(0,Math.min(255,n.g-Math.round(255*-(t/100)))),n.b=Math.max(0,Math.min(255,n.b-Math.round(255*-(t/100)))),new e(n)},e.prototype.darken=function(t){t===void 0&&(t=10);var n=this.toHsl();return n.l-=t/100,n.l=_E(n.l),new e(n)},e.prototype.tint=function(t){return t===void 0&&(t=10),this.mix("white",t)},e.prototype.shade=function(t){return t===void 0&&(t=10),this.mix("black",t)},e.prototype.desaturate=function(t){t===void 0&&(t=10);var n=this.toHsl();return n.s-=t/100,n.s=_E(n.s),new e(n)},e.prototype.saturate=function(t){t===void 0&&(t=10);var n=this.toHsl();return n.s+=t/100,n.s=_E(n.s),new e(n)},e.prototype.greyscale=function(){return this.desaturate(100)},e.prototype.spin=function(t){var n=this.toHsl(),r=(n.h+t)%360;return n.h=r<0?360+r:r,new e(n)},e.prototype.mix=function(t,n){n===void 0&&(n=50);var r=this.toRgb(),i=new e(t).toRgb(),o=n/100,a={r:(i.r-r.r)*o+r.r,g:(i.g-r.g)*o+r.g,b:(i.b-r.b)*o+r.b,a:(i.a-r.a)*o+r.a};return new e(a)},e.prototype.analogous=function(t,n){t===void 0&&(t=6),n===void 0&&(n=30);var r=this.toHsl(),i=360/n,o=[this];for(r.h=(r.h-(i*t>>1)+720)%360;--t;)r.h=(r.h+i)%360,o.push(new e(r));return o},e.prototype.complement=function(){var t=this.toHsl();return t.h=(t.h+180)%360,new e(t)},e.prototype.monochromatic=function(t){t===void 0&&(t=6);for(var n=this.toHsv(),r=n.h,i=n.s,o=n.v,a=[],s=1/t;t--;)a.push(new e({h:r,s:i,v:o})),o=(o+s)%1;return a},e.prototype.splitcomplement=function(){var t=this.toHsl(),n=t.h;return[this,new e({h:(n+72)%360,s:t.s,l:t.l}),new e({h:(n+216)%360,s:t.s,l:t.l})]},e.prototype.onBackground=function(t){var n=this.toRgb(),r=new e(t).toRgb(),i=n.a+r.a*(1-n.a);return new e({r:(n.r*n.a+r.r*r.a*(1-n.a))/i,g:(n.g*n.a+r.g*r.a*(1-n.a))/i,b:(n.b*n.a+r.b*r.a*(1-n.a))/i,a:i})},e.prototype.triad=function(){return this.polyad(3)},e.prototype.tetrad=function(){return this.polyad(4)},e.prototype.polyad=function(t){for(var n=this.toHsl(),r=n.h,i=[this],o=360/t,a=1;a<t;a++)i.push(new e({h:(r+a*o)%360,s:n.s,l:n.l}));return i},e.prototype.equals=function(t){return this.toRgbString()===new e(t).toRgbString()},e}(),yE=2,_5=.16,pSe=.05,mSe=.05,gSe=.15,sq=5,cq=4,vSe=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function S5(e){var t=e.r,n=e.g,r=e.b,i=CO(t,n,r);return{h:i.h*360,s:i.s,v:i.v}}function CE(e){var t=e.r,n=e.g,r=e.b;return"#".concat(bO(t,n,r,!1))}function ESe(e,t,n){var r=n/100,i={r:(t.r-e.r)*r+e.r,g:(t.g-e.g)*r+e.g,b:(t.b-e.b)*r+e.b};return i}function y5(e,t,n){var r;return Math.round(e.h)>=60&&Math.round(e.h)<=240?r=n?Math.round(e.h)-yE*t:Math.round(e.h)+yE*t:r=n?Math.round(e.h)+yE*t:Math.round(e.h)-yE*t,r<0?r+=360:r>=360&&(r-=360),r}function C5(e,t,n){if(e.h===0&&e.s===0)return e.s;var r;return n?r=e.s-_5*t:t===cq?r=e.s+_5:r=e.s+pSe*t,r>1&&(r=1),n&&t===sq&&r>.1&&(r=.1),r<.06&&(r=.06),Number(r.toFixed(2))}function b5(e,t,n){var r;return n?r=e.v+mSe*t:r=e.v-gSe*t,r>1&&(r=1),Number(r.toFixed(2))}function Ud(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=[],r=Vh(e),i=sq;i>0;i-=1){var o=S5(r),a=CE(Vh({h:y5(o,i,!0),s:C5(o,i,!0),v:b5(o,i,!0)}));n.push(a)}n.push(CE(r));for(var s=1;s<=cq;s+=1){var c=S5(r),l=CE(Vh({h:y5(c,s),s:C5(c,s),v:b5(c,s)}));n.push(l)}return t.theme==="dark"?vSe.map(function(u){var d=u.index,h=u.opacity,f=CE(ESe(Vh(t.backgroundColor||"#141414"),Vh(n[d]),h*100));return f}):n}var xR={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1677FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},c0={},NR={};Object.keys(xR).forEach(function(e){c0[e]=Ud(xR[e]),c0[e].primary=c0[e][5],NR[e]=Ud(xR[e],{theme:"dark",backgroundColor:"#141414"}),NR[e].primary=NR[e][5]});var _Se=c0.gold,SSe=c0.blue;const lq={blue:"#1677ff",purple:"#722ED1",cyan:"#13C2C2",green:"#52C41A",magenta:"#EB2F96",pink:"#eb2f96",red:"#F5222D",orange:"#FA8C16",yellow:"#FADB14",volcano:"#FA541C",geekblue:"#2F54EB",gold:"#FAAD14",lime:"#A0D911"},ySe=Object.assign(Object.assign({},lq),{colorPrimary:"#1677ff",colorSuccess:"#52c41a",colorWarning:"#faad14",colorError:"#ff4d4f",colorInfo:"#1677ff",colorLink:"",colorTextBase:"",colorBgBase:"",fontFamily:`-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial,
'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',
'Noto Color Emoji'`,fontFamilyCode:"'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace",fontSize:14,lineWidth:1,lineType:"solid",motionUnit:.1,motionBase:0,motionEaseOutCirc:"cubic-bezier(0.08, 0.82, 0.17, 1)",motionEaseInOutCirc:"cubic-bezier(0.78, 0.14, 0.15, 0.86)",motionEaseOut:"cubic-bezier(0.215, 0.61, 0.355, 1)",motionEaseInOut:"cubic-bezier(0.645, 0.045, 0.355, 1)",motionEaseOutBack:"cubic-bezier(0.12, 0.4, 0.29, 1.46)",motionEaseInBack:"cubic-bezier(0.71, -0.46, 0.88, 0.6)",motionEaseInQuint:"cubic-bezier(0.755, 0.05, 0.855, 0.06)",motionEaseOutQuint:"cubic-bezier(0.23, 1, 0.32, 1)",borderRadius:6,sizeUnit:4,sizeStep:4,sizePopupArrow:16,controlHeight:32,zIndexBase:0,zIndexPopupBase:1e3,opacityImage:1,wireframe:!1,motion:!0}),dg=ySe;function CSe(e,t){let{generateColorPalettes:n,generateNeutralColorPalettes:r}=t;const{colorSuccess:i,colorWarning:o,colorError:a,colorInfo:s,colorPrimary:c,colorBgBase:l,colorTextBase:u}=e,d=n(c),h=n(i),f=n(o),g=n(a),p=n(s),m=r(l,u),_=e.colorLink||e.colorInfo,E=n(_);return Object.assign(Object.assign({},m),{colorPrimaryBg:d[1],colorPrimaryBgHover:d[2],colorPrimaryBorder:d[3],colorPrimaryBorderHover:d[4],colorPrimaryHover:d[5],colorPrimary:d[6],colorPrimaryActive:d[7],colorPrimaryTextHover:d[8],colorPrimaryText:d[9],colorPrimaryTextActive:d[10],colorSuccessBg:h[1],colorSuccessBgHover:h[2],colorSuccessBorder:h[3],colorSuccessBorderHover:h[4],colorSuccessHover:h[4],colorSuccess:h[6],colorSuccessActive:h[7],colorSuccessTextHover:h[8],colorSuccessText:h[9],colorSuccessTextActive:h[10],colorErrorBg:g[1],colorErrorBgHover:g[2],colorErrorBgActive:g[3],colorErrorBorder:g[3],colorErrorBorderHover:g[4],colorErrorHover:g[5],colorError:g[6],colorErrorActive:g[7],colorErrorTextHover:g[8],colorErrorText:g[9],colorErrorTextActive:g[10],colorWarningBg:f[1],colorWarningBgHover:f[2],colorWarningBorder:f[3],colorWarningBorderHover:f[4],colorWarningHover:f[4],colorWarning:f[6],colorWarningActive:f[7],colorWarningTextHover:f[8],colorWarningText:f[9],colorWarningTextActive:f[10],colorInfoBg:p[1],colorInfoBgHover:p[2],colorInfoBorder:p[3],colorInfoBorderHover:p[4],colorInfoHover:p[4],colorInfo:p[6],colorInfoActive:p[7],colorInfoTextHover:p[8],colorInfoText:p[9],colorInfoTextActive:p[10],colorLinkHover:E[4],colorLink:E[6],colorLinkActive:E[7],colorBgMask:new bi("#000").setAlpha(.45).toRgbString(),colorWhite:"#fff"})}const bSe=e=>{let t=e,n=e,r=e,i=e;return e<6&&e>=5?t=e+1:e<16&&e>=6?t=e+2:e>=16&&(t=16),e<7&&e>=5?n=4:e<8&&e>=7?n=5:e<14&&e>=8?n=6:e<16&&e>=14?n=7:e>=16&&(n=8),e<6&&e>=2?r=1:e>=6&&(r=2),e>4&&e<8?i=4:e>=8&&(i=6),{borderRadius:e,borderRadiusXS:r,borderRadiusSM:n,borderRadiusLG:t,borderRadiusOuter:i}},TSe=bSe;function RSe(e){const{motionUnit:t,motionBase:n,borderRadius:r,lineWidth:i}=e;return Object.assign({motionDurationFast:`${(n+t).toFixed(1)}s`,motionDurationMid:`${(n+t*2).toFixed(1)}s`,motionDurationSlow:`${(n+t*3).toFixed(1)}s`,lineWidthBold:i+1},TSe(r))}const wSe=e=>{const{controlHeight:t}=e;return{controlHeightSM:t*.75,controlHeightXS:t*.5,controlHeightLG:t*1.25}},ISe=wSe;function L_(e){return(e+8)/e}function ASe(e){const t=new Array(10).fill(null).map((n,r)=>{const i=r-1,o=e*Math.pow(2.71828,i/5),a=r>1?Math.floor(o):Math.ceil(o);return Math.floor(a/2)*2});return t[1]=e,t.map(n=>({size:n,lineHeight:L_(n)}))}const OSe=e=>{const t=ASe(e),n=t.map(u=>u.size),r=t.map(u=>u.lineHeight),i=n[1],o=n[0],a=n[2],s=r[1],c=r[0],l=r[2];return{fontSizeSM:o,fontSize:i,fontSizeLG:a,fontSizeXL:n[3],fontSizeHeading1:n[6],fontSizeHeading2:n[5],fontSizeHeading3:n[4],fontSizeHeading4:n[3],fontSizeHeading5:n[2],lineHeight:s,lineHeightLG:l,lineHeightSM:c,fontHeight:Math.round(s*i),fontHeightLG:Math.round(l*a),fontHeightSM:Math.round(c*o),lineHeightHeading1:r[6],lineHeightHeading2:r[5],lineHeightHeading3:r[4],lineHeightHeading4:r[3],lineHeightHeading5:r[2]}},xSe=OSe;function NSe(e){const{sizeUnit:t,sizeStep:n}=e;return{sizeXXL:t*(n+8),sizeXL:t*(n+4),sizeLG:t*(n+2),sizeMD:t*(n+1),sizeMS:t*n,size:t*n,sizeSM:t*(n-1),sizeXS:t*(n-2),sizeXXS:t*(n-3)}}const Wc=(e,t)=>new bi(e).setAlpha(t).toRgbString(),sm=(e,t)=>new bi(e).darken(t).toHexString(),PSe=e=>{const t=Ud(e);return{1:t[0],2:t[1],3:t[2],4:t[3],5:t[4],6:t[5],7:t[6],8:t[4],9:t[5],10:t[6]}},DSe=(e,t)=>{const n=e||"#fff",r=t||"#000";return{colorBgBase:n,colorTextBase:r,colorText:Wc(r,.88),colorTextSecondary:Wc(r,.65),colorTextTertiary:Wc(r,.45),colorTextQuaternary:Wc(r,.25),colorFill:Wc(r,.15),colorFillSecondary:Wc(r,.06),colorFillTertiary:Wc(r,.04),colorFillQuaternary:Wc(r,.02),colorBgLayout:sm(n,4),colorBgContainer:sm(n,0),colorBgElevated:sm(n,0),colorBgSpotlight:Wc(r,.85),colorBgBlur:"transparent",colorBorder:sm(n,15),colorBorderSecondary:sm(n,6)}};function LSe(e){const t=Object.keys(lq).map(n=>{const r=Ud(e[n]);return new Array(10).fill(1).reduce((i,o,a)=>(i[`${n}-${a+1}`]=r[a],i[`${n}${a+1}`]=r[a],i),{})}).reduce((n,r)=>(n=Object.assign(Object.assign({},n),r),n),{});return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},e),t),CSe(e,{generateColorPalettes:PSe,generateNeutralColorPalettes:DSe})),xSe(e.fontSize)),NSe(e)),ISe(e)),RSe(e))}const uq=gO(LSe),RO={token:dg,override:{override:dg},hashed:!0},dq=le.createContext(RO),zP="anticon",kSe=(e,t)=>t||(e?`ant-${e}`:"ant"),en=v.createContext({getPrefixCls:kSe,iconPrefixCls:zP}),MSe=`-ant-${Date.now()}-${Math.random()}`;function FSe(e,t){const n={},r=(a,s)=>{let c=a.clone();return c=(s==null?void 0:s(c))||c,c.toRgbString()},i=(a,s)=>{const c=new bi(a),l=Ud(c.toRgbString());n[`${s}-color`]=r(c),n[`${s}-color-disabled`]=l[1],n[`${s}-color-hover`]=l[4],n[`${s}-color-active`]=l[6],n[`${s}-color-outline`]=c.clone().setAlpha(.2).toRgbString(),n[`${s}-color-deprecated-bg`]=l[0],n[`${s}-color-deprecated-border`]=l[2]};if(t.primaryColor){i(t.primaryColor,"primary");const a=new bi(t.primaryColor),s=Ud(a.toRgbString());s.forEach((l,u)=>{n[`primary-${u+1}`]=l}),n["primary-color-deprecated-l-35"]=r(a,l=>l.lighten(35)),n["primary-color-deprecated-l-20"]=r(a,l=>l.lighten(20)),n["primary-color-deprecated-t-20"]=r(a,l=>l.tint(20)),n["primary-color-deprecated-t-50"]=r(a,l=>l.tint(50)),n["primary-color-deprecated-f-12"]=r(a,l=>l.setAlpha(l.getAlpha()*.12));const c=new bi(s[0]);n["primary-color-active-deprecated-f-30"]=r(c,l=>l.setAlpha(l.getAlpha()*.3)),n["primary-color-active-deprecated-d-02"]=r(c,l=>l.darken(2))}return t.successColor&&i(t.successColor,"success"),t.warningColor&&i(t.warningColor,"warning"),t.errorColor&&i(t.errorColor,"error"),t.infoColor&&i(t.infoColor,"info"),`
  :root {
    ${Object.keys(n).map(a=>`--${e}-${a}: ${n[a]};`).join(`
`)}
  }
  `.trim()}function USe(e,t){const n=FSe(e,t);No()&&cl(n,`${MSe}-dynamic-theme`)}const wO=v.createContext(!1),hq=e=>{let{children:t,disabled:n}=e;const r=v.useContext(wO);return v.createElement(wO.Provider,{value:n??r},t)},Op=wO,IO=v.createContext(void 0),BSe=e=>{let{children:t,size:n}=e;const r=v.useContext(IO);return v.createElement(IO.Provider,{value:n||r},t)},zg=IO;function $Se(){const e=v.useContext(Op),t=v.useContext(zg);return{componentDisabled:e,componentSize:t}}const zS=["blue","purple","cyan","green","magenta","pink","red","orange","yellow","volcano","geekblue","lime","gold"],VSe="5.18.0";function PR(e){return e>=0&&e<=255}function bE(e,t){const{r:n,g:r,b:i,a:o}=new bi(e).toRgb();if(o<1)return e;const{r:a,g:s,b:c}=new bi(t).toRgb();for(let l=.01;l<=1;l+=.01){const u=Math.round((n-a*(1-l))/l),d=Math.round((r-s*(1-l))/l),h=Math.round((i-c*(1-l))/l);if(PR(u)&&PR(d)&&PR(h))return new bi({r:u,g:d,b:h,a:Math.round(l*100)/100}).toRgbString()}return new bi({r:n,g:r,b:i,a:1}).toRgbString()}var jSe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function fq(e){const{override:t}=e,n=jSe(e,["override"]),r=Object.assign({},t);Object.keys(dg).forEach(h=>{delete r[h]});const i=Object.assign(Object.assign({},n),r),o=480,a=576,s=768,c=992,l=1200,u=1600;if(i.motion===!1){const h="0s";i.motionDurationFast=h,i.motionDurationMid=h,i.motionDurationSlow=h}return Object.assign(Object.assign(Object.assign({},i),{colorFillContent:i.colorFillSecondary,colorFillContentHover:i.colorFill,colorFillAlter:i.colorFillQuaternary,colorBgContainerDisabled:i.colorFillTertiary,colorBorderBg:i.colorBgContainer,colorSplit:bE(i.colorBorderSecondary,i.colorBgContainer),colorTextPlaceholder:i.colorTextQuaternary,colorTextDisabled:i.colorTextQuaternary,colorTextHeading:i.colorText,colorTextLabel:i.colorTextSecondary,colorTextDescription:i.colorTextTertiary,colorTextLightSolid:i.colorWhite,colorHighlight:i.colorError,colorBgTextHover:i.colorFillSecondary,colorBgTextActive:i.colorFill,colorIcon:i.colorTextTertiary,colorIconHover:i.colorText,colorErrorOutline:bE(i.colorErrorBg,i.colorBgContainer),colorWarningOutline:bE(i.colorWarningBg,i.colorBgContainer),fontSizeIcon:i.fontSizeSM,lineWidthFocus:i.lineWidth*4,lineWidth:i.lineWidth,controlOutlineWidth:i.lineWidth*2,controlInteractiveSize:i.controlHeight/2,controlItemBgHover:i.colorFillTertiary,controlItemBgActive:i.colorPrimaryBg,controlItemBgActiveHover:i.colorPrimaryBgHover,controlItemBgActiveDisabled:i.colorFill,controlTmpOutline:i.colorFillQuaternary,controlOutline:bE(i.colorPrimaryBg,i.colorBgContainer),lineType:i.lineType,borderRadius:i.borderRadius,borderRadiusXS:i.borderRadiusXS,borderRadiusSM:i.borderRadiusSM,borderRadiusLG:i.borderRadiusLG,fontWeightStrong:600,opacityLoading:.65,linkDecoration:"none",linkHoverDecoration:"none",linkFocusDecoration:"none",controlPaddingHorizontal:12,controlPaddingHorizontalSM:8,paddingXXS:i.sizeXXS,paddingXS:i.sizeXS,paddingSM:i.sizeSM,padding:i.size,paddingMD:i.sizeMD,paddingLG:i.sizeLG,paddingXL:i.sizeXL,paddingContentHorizontalLG:i.sizeLG,paddingContentVerticalLG:i.sizeMS,paddingContentHorizontal:i.sizeMS,paddingContentVertical:i.sizeSM,paddingContentHorizontalSM:i.size,paddingContentVerticalSM:i.sizeXS,marginXXS:i.sizeXXS,marginXS:i.sizeXS,marginSM:i.sizeSM,margin:i.size,marginMD:i.sizeMD,marginLG:i.sizeLG,marginXL:i.sizeXL,marginXXL:i.sizeXXL,boxShadow:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowSecondary:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTertiary:`
      0 1px 2px 0 rgba(0, 0, 0, 0.03),
      0 1px 6px -1px rgba(0, 0, 0, 0.02),
      0 2px 4px 0 rgba(0, 0, 0, 0.02)
    `,screenXS:o,screenXSMin:o,screenXSMax:a-1,screenSM:a,screenSMMin:a,screenSMMax:s-1,screenMD:s,screenMDMin:s,screenMDMax:c-1,screenLG:c,screenLGMin:c,screenLGMax:l-1,screenXL:l,screenXLMin:l,screenXLMax:u-1,screenXXL:u,screenXXLMin:u,boxShadowPopoverArrow:"2px 2px 5px rgba(0, 0, 0, 0.05)",boxShadowCard:`
      0 1px 2px -2px ${new bi("rgba(0, 0, 0, 0.16)").toRgbString()},
      0 3px 6px 0 ${new bi("rgba(0, 0, 0, 0.12)").toRgbString()},
      0 5px 12px 4px ${new bi("rgba(0, 0, 0, 0.09)").toRgbString()}
    `,boxShadowDrawerRight:`
      -6px 0 16px 0 rgba(0, 0, 0, 0.08),
      -3px 0 6px -4px rgba(0, 0, 0, 0.12),
      -9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerLeft:`
      6px 0 16px 0 rgba(0, 0, 0, 0.08),
      3px 0 6px -4px rgba(0, 0, 0, 0.12),
      9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerUp:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerDown:`
      0 -6px 16px 0 rgba(0, 0, 0, 0.08),
      0 -3px 6px -4px rgba(0, 0, 0, 0.12),
      0 -9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTabsOverflowLeft:"inset 10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowRight:"inset -10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowTop:"inset 0 10px 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowBottom:"inset 0 -10px 8px -8px rgba(0, 0, 0, 0.08)"}),r)}var T5=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const pq={lineHeight:!0,lineHeightSM:!0,lineHeightLG:!0,lineHeightHeading1:!0,lineHeightHeading2:!0,lineHeightHeading3:!0,lineHeightHeading4:!0,lineHeightHeading5:!0,opacityLoading:!0,fontWeightStrong:!0,zIndexPopupBase:!0,zIndexBase:!0},mq={size:!0,sizeSM:!0,sizeLG:!0,sizeMD:!0,sizeXS:!0,sizeXXS:!0,sizeMS:!0,sizeXL:!0,sizeXXL:!0,sizeUnit:!0,sizeStep:!0,motionBase:!0,motionUnit:!0},HSe={screenXS:!0,screenXSMin:!0,screenXSMax:!0,screenSM:!0,screenSMMin:!0,screenSMMax:!0,screenMD:!0,screenMDMin:!0,screenMDMax:!0,screenLG:!0,screenLGMin:!0,screenLGMax:!0,screenXL:!0,screenXLMin:!0,screenXLMax:!0,screenXXL:!0,screenXXLMin:!0},gq=(e,t,n)=>{const r=n.getDerivativeToken(e),{override:i}=t,o=T5(t,["override"]);let a=Object.assign(Object.assign({},r),{override:i});return a=fq(a),o&&Object.entries(o).forEach(s=>{let[c,l]=s;const{theme:u}=l,d=T5(l,["theme"]);let h=d;u&&(h=gq(Object.assign(Object.assign({},a),d),{override:d},u)),a[c]=h}),a};function Eo(){const{token:e,hashed:t,theme:n,override:r,cssVar:i}=le.useContext(dq),o=`${VSe}-${t||""}`,a=n||uq,[s,c,l]=h_e(a,[dg,e],{salt:o,override:r,getComputedToken:gq,formatToken:fq,cssVar:i&&{prefix:i.prefix,key:i.key,unitless:pq,ignore:mq,preserve:HSe}});return[a,l,t?c:"",s,i]}function vq(e,t,n){return t=Md(t),OK(e,OC()?Reflect.construct(t,n||[],Md(e).constructor):t.apply(e,n))}let zSe=Bi(function e(){Ui(this,e)});const Eq=zSe,_q="CALC_UNIT",WSe=new RegExp(_q,"g");function DR(e){return typeof e=="number"?`${e}${_q}`:e}let GSe=function(e){function t(n){var r;return Ui(this,t),r=vq(this,t),r.result="",n instanceof t?r.result=`(${n.result})`:typeof n=="number"?r.result=DR(n):typeof n=="string"&&(r.result=n),r}return _l(t,e),Bi(t,[{key:"add",value:function(r){return r instanceof t?this.result=`${this.result} + ${r.getResult()}`:(typeof r=="number"||typeof r=="string")&&(this.result=`${this.result} + ${DR(r)}`),this.lowPriority=!0,this}},{key:"sub",value:function(r){return r instanceof t?this.result=`${this.result} - ${r.getResult()}`:(typeof r=="number"||typeof r=="string")&&(this.result=`${this.result} - ${DR(r)}`),this.lowPriority=!0,this}},{key:"mul",value:function(r){return this.lowPriority&&(this.result=`(${this.result})`),r instanceof t?this.result=`${this.result} * ${r.getResult(!0)}`:(typeof r=="number"||typeof r=="string")&&(this.result=`${this.result} * ${r}`),this.lowPriority=!1,this}},{key:"div",value:function(r){return this.lowPriority&&(this.result=`(${this.result})`),r instanceof t?this.result=`${this.result} / ${r.getResult(!0)}`:(typeof r=="number"||typeof r=="string")&&(this.result=`${this.result} / ${r}`),this.lowPriority=!1,this}},{key:"getResult",value:function(r){return this.lowPriority||r?`(${this.result})`:this.result}},{key:"equal",value:function(r){const{unit:i=!0}=r||{};return this.result=this.result.replace(WSe,i?"px":""),typeof this.lowPriority<"u"?`calc(${this.result})`:this.result}}])}(Eq),KSe=function(e){function t(n){var r;return Ui(this,t),r=vq(this,t),r.result=0,n instanceof t?r.result=n.result:typeof n=="number"&&(r.result=n),r}return _l(t,e),Bi(t,[{key:"add",value:function(r){return r instanceof t?this.result+=r.result:typeof r=="number"&&(this.result+=r),this}},{key:"sub",value:function(r){return r instanceof t?this.result-=r.result:typeof r=="number"&&(this.result-=r),this}},{key:"mul",value:function(r){return r instanceof t?this.result*=r.result:typeof r=="number"&&(this.result*=r),this}},{key:"div",value:function(r){return r instanceof t?this.result/=r.result:typeof r=="number"&&(this.result/=r),this}},{key:"equal",value:function(){return this.result}}])}(Eq);const qSe=e=>{const t=e==="css"?GSe:KSe;return n=>new t(n)},YSe=qSe;function Pi(e){var t=v.useRef();t.current=e;var n=v.useCallback(function(){for(var r,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(r=t.current)===null||r===void 0?void 0:r.call.apply(r,[t].concat(o))},[]);return n}function Td(e){var t=v.useRef(!1),n=v.useState(e),r=ce(n,2),i=r[0],o=r[1];v.useEffect(function(){return t.current=!1,function(){t.current=!0}},[]);function a(s,c){c&&t.current||o(s)}return[i,a]}function LR(e){return e!==void 0}function go(e,t){var n=t||{},r=n.defaultValue,i=n.value,o=n.onChange,a=n.postState,s=Td(function(){return LR(i)?i:LR(r)?typeof r=="function"?r():r:typeof e=="function"?e():e}),c=ce(s,2),l=c[0],u=c[1],d=i!==void 0?i:l,h=a?a(d):d,f=Pi(o),g=Td([d]),p=ce(g,2),m=p[0],_=p[1];l5(function(){var S=m[0];l!==S&&f(l,S)},[m]),l5(function(){LR(i)||u(i)},[i]);var E=Pi(function(S,C){u(S,C),_([d],C)});return[h,E]}const Sq=e=>({color:e.colorLink,textDecoration:"none",outline:"none",cursor:"pointer",transition:`color ${e.motionDurationSlow}`,"&:focus, &:hover":{color:e.colorLinkHover},"&:active":{color:e.colorLinkActive}}),WS={overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},Oa=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return{boxSizing:"border-box",margin:0,padding:0,color:e.colorText,fontSize:e.fontSize,lineHeight:e.lineHeight,listStyle:"none",fontFamily:t?"inherit":e.fontFamily}},MC=()=>({display:"inline-flex",alignItems:"center",color:"inherit",fontStyle:"normal",lineHeight:0,textAlign:"center",textTransform:"none",verticalAlign:"-0.125em",textRendering:"optimizeLegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","> *":{lineHeight:1},svg:{display:"inline-block"}}),AO=()=>({"&::before":{display:"table",content:'""'},"&::after":{display:"table",clear:"both",content:'""'}}),XSe=e=>({a:{color:e.colorLink,textDecoration:e.linkDecoration,backgroundColor:"transparent",outline:"none",cursor:"pointer",transition:`color ${e.motionDurationSlow}`,"-webkit-text-decoration-skip":"objects","&:hover":{color:e.colorLinkHover},"&:active":{color:e.colorLinkActive},"&:active,\n  &:hover":{textDecoration:e.linkHoverDecoration,outline:0},"&:focus":{textDecoration:e.linkFocusDecoration,outline:0},"&[disabled]":{color:e.colorTextDisabled,cursor:"not-allowed"}}}),JSe=(e,t,n,r)=>{const i=`[class^="${t}"], [class*=" ${t}"]`,o=n?`.${n}`:i,a={boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"}};let s={};return r!==!1&&(s={fontFamily:e.fontFamily,fontSize:e.fontSize}),{[o]:Object.assign(Object.assign(Object.assign({},s),a),{[i]:a})}},GS=e=>({outline:`${ve(e.lineWidthFocus)} solid ${e.colorPrimaryBorder}`,outlineOffset:1,transition:"outline-offset 0s, outline 0s"}),WP=e=>({"&:focus-visible":Object.assign({},GS(e))});function QSe(e){return e==="js"?{max:Math.max,min:Math.min}:{max:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return`max(${n.map(i=>ve(i)).join(",")})`},min:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return`min(${n.map(i=>ve(i)).join(",")})`}}}const yq=typeof CSSINJS_STATISTIC<"u";let OO=!0;function gr(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!yq)return Object.assign.apply(Object,[{}].concat(t));OO=!1;const r={};return t.forEach(i=>{Object.keys(i).forEach(a=>{Object.defineProperty(r,a,{configurable:!0,enumerable:!0,get:()=>i[a]})})}),OO=!0,r}const R5={};function ZSe(){}const eye=e=>{let t,n=e,r=ZSe;return yq&&typeof Proxy<"u"&&(t=new Set,n=new Proxy(e,{get(i,o){return OO&&t.add(o),i[o]}}),r=(i,o)=>{var a;R5[i]={global:Array.from(t),component:Object.assign(Object.assign({},(a=R5[i])===null||a===void 0?void 0:a.component),o)}}),{token:n,keys:t,flush:r}},tye=(e,t)=>{const[n,r]=Eo();return yO({theme:n,token:r,hashId:"",path:["ant-design-icons",e],nonce:()=>t==null?void 0:t.nonce,layer:{name:"antd"}},()=>[{[`.${e}`]:Object.assign(Object.assign({},MC()),{[`.${e} .${e}-icon`]:{display:"block"}})}])},Cq=tye,bq=(e,t,n)=>{var r;return typeof n=="function"?n(gr(t,(r=t[e])!==null&&r!==void 0?r:{})):n??{}},Tq=(e,t,n,r)=>{const i=Object.assign({},t[e]);if(r!=null&&r.deprecatedTokens){const{deprecatedTokens:a}=r;a.forEach(s=>{let[c,l]=s;var u;(i!=null&&i[c]||i!=null&&i[l])&&((u=i[l])!==null&&u!==void 0||(i[l]=i==null?void 0:i[c]))})}const o=Object.assign(Object.assign({},n),i);return Object.keys(o).forEach(a=>{o[a]===t[a]&&delete o[a]}),o},nye=(e,t)=>`${[t,e.replace(/([A-Z]+)([A-Z][a-z]+)/g,"$1-$2").replace(/([a-z])([A-Z])/g,"$1-$2")].filter(Boolean).join("-")}`;function GP(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i=Array.isArray(e)?e:[e,e],[o]=i,a=i.join("-");return function(s){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:s;const[l,u,d,h,f]=Eo(),{getPrefixCls:g,iconPrefixCls:p,csp:m}=v.useContext(en),_=g(),E=f?"css":"js",S=YSe(E),{max:C,min:b}=QSe(E),T={theme:l,token:h,hashId:d,nonce:()=>m==null?void 0:m.nonce,clientOnly:r.clientOnly,layer:{name:"antd"},order:r.order||-999};return yO(Object.assign(Object.assign({},T),{clientOnly:!1,path:["Shared",_]}),()=>[{"&":XSe(h)}]),Cq(p,m),[yO(Object.assign(Object.assign({},T),{path:[a,s,p]}),()=>{if(r.injectStyle===!1)return[];const{token:A,flush:O}=eye(h),x=bq(o,u,n),M=`.${s}`,$=Tq(o,u,x,{deprecatedTokens:r.deprecatedTokens});f&&Object.keys(x).forEach(W=>{x[W]=`var(${$K(W,nye(o,f.prefix))})`});const U=gr(A,{componentCls:M,prefixCls:s,iconCls:`.${p}`,antCls:`.${_}`,calc:S,max:C,min:b},f?x:$),V=t(U,{hashId:d,prefixCls:s,rootPrefixCls:_,iconPrefixCls:p});return O(o,$),[r.resetStyle===!1?null:JSe(U,s,c,r.resetFont),V]}),d]}}const FC=(e,t,n,r)=>{const i=GP(e,t,n,Object.assign({resetStyle:!1,order:-998},r));return a=>{let{prefixCls:s,rootCls:c=s}=a;return i(s,c),null}},rye=(e,t,n)=>{function r(l){return`${e}${l.slice(0,1).toUpperCase()}${l.slice(1)}`}const{unitless:i={},injectStyle:o=!0}=n??{},a={[r("zIndexPopup")]:!0};Object.keys(i).forEach(l=>{a[r(l)]=i[l]});const s=l=>{let{rootCls:u,cssVar:d}=l;const[,h]=Eo();return $_e({path:[e],prefix:d.prefix,key:d==null?void 0:d.key,unitless:Object.assign(Object.assign({},pq),a),ignore:mq,token:h,scope:u},()=>{const f=bq(e,h,t),g=Tq(e,h,f,{deprecatedTokens:n==null?void 0:n.deprecatedTokens});return Object.keys(f).forEach(p=>{g[r(p)]=g[p],delete g[p]}),g}),null};return l=>{const[,,,,u]=Eo();return[d=>o&&u?le.createElement(le.Fragment,null,le.createElement(s,{rootCls:l,cssVar:u,component:e}),d):d,u==null?void 0:u.key]}},yo=(e,t,n,r)=>{const i=GP(e,t,n,r),o=rye(Array.isArray(e)?e[0]:e,n,r);return function(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:a;const[,c]=i(a,s),[l,u]=o(s);return[l,c,u]}};function iye(e,t){return zS.reduce((n,r)=>{const i=e[`${r}1`],o=e[`${r}3`],a=e[`${r}6`],s=e[`${r}7`];return Object.assign(Object.assign({},n),t(r,{lightColor:i,lightBorderColor:o,darkColor:a,textColor:s}))},{})}const oye=Object.assign({},Rd),{useId:w5}=oye,aye=()=>"",sye=typeof w5>"u"?aye:w5,cye=sye;function lye(e,t,n){var r;LC();const i=e||{},o=i.inherit===!1||!t?Object.assign(Object.assign({},RO),{hashed:(r=t==null?void 0:t.hashed)!==null&&r!==void 0?r:RO.hashed,cssVar:t==null?void 0:t.cssVar}):t,a=cye();return jg(()=>{var s,c;if(!e)return t;const l=Object.assign({},o.components);Object.keys(e.components||{}).forEach(h=>{l[h]=Object.assign(Object.assign({},l[h]),e.components[h])});const u=`css-var-${a.replace(/:/g,"")}`,d=((s=i.cssVar)!==null&&s!==void 0?s:o.cssVar)&&Object.assign(Object.assign(Object.assign({prefix:n==null?void 0:n.prefixCls},typeof o.cssVar=="object"?o.cssVar:{}),typeof i.cssVar=="object"?i.cssVar:{}),{key:typeof i.cssVar=="object"&&((c=i.cssVar)===null||c===void 0?void 0:c.key)||u});return Object.assign(Object.assign(Object.assign({},o),i),{token:Object.assign(Object.assign({},o.token),i.token),components:l,cssVar:d})},[i,o],(s,c)=>s.some((l,u)=>{const d=c[u];return!cg(l,d,!0)}))}var uye=["children"],Rq=v.createContext({});function dye(e){var t=e.children,n=kt(e,uye);return v.createElement(Rq.Provider,{value:n},t)}var hye=function(e){_l(n,e);var t=Zd(n);function n(){return Ui(this,n),t.apply(this,arguments)}return Bi(n,[{key:"render",value:function(){return this.props.children}}]),n}(v.Component),Ul="none",TE="appear",RE="enter",wE="leave",I5="none",Ns="prepare",ff="start",pf="active",KP="end",wq="prepared";function A5(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit".concat(e)]="webkit".concat(t),n["Moz".concat(e)]="moz".concat(t),n["ms".concat(e)]="MS".concat(t),n["O".concat(e)]="o".concat(t.toLowerCase()),n}function fye(e,t){var n={animationend:A5("Animation","AnimationEnd"),transitionend:A5("Transition","TransitionEnd")};return e&&("AnimationEvent"in t||delete n.animationend.animation,"TransitionEvent"in t||delete n.transitionend.transition),n}var pye=fye(No(),typeof window<"u"?window:{}),Iq={};if(No()){var mye=document.createElement("div");Iq=mye.style}var IE={};function Aq(e){if(IE[e])return IE[e];var t=pye[e];if(t)for(var n=Object.keys(t),r=n.length,i=0;i<r;i+=1){var o=n[i];if(Object.prototype.hasOwnProperty.call(t,o)&&o in Iq)return IE[e]=t[o],IE[e]}return""}var Oq=Aq("animationend"),xq=Aq("transitionend"),Nq=!!(Oq&&xq),O5=Oq||"animationend",x5=xq||"transitionend";function N5(e,t){if(!e)return null;if(yt(e)==="object"){var n=t.replace(/-\w/g,function(r){return r[1].toUpperCase()});return e[n]}return"".concat(e,"-").concat(t)}const gye=function(e){var t=v.useRef();function n(i){i&&(i.removeEventListener(x5,e),i.removeEventListener(O5,e))}function r(i){t.current&&t.current!==i&&n(t.current),i&&i!==t.current&&(i.addEventListener(x5,e),i.addEventListener(O5,e),t.current=i)}return v.useEffect(function(){return function(){n(t.current)}},[]),[r,n]};var Pq=No()?v.useLayoutEffect:v.useEffect;const vye=function(){var e=v.useRef(null);function t(){sr.cancel(e.current)}function n(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;t();var o=sr(function(){i<=1?r({isCanceled:function(){return o!==e.current}}):n(r,i-1)});e.current=o}return v.useEffect(function(){return function(){t()}},[]),[n,t]};var Eye=[Ns,ff,pf,KP],_ye=[Ns,wq],Dq=!1,Sye=!0;function Lq(e){return e===pf||e===KP}const yye=function(e,t,n){var r=Td(I5),i=ce(r,2),o=i[0],a=i[1],s=vye(),c=ce(s,2),l=c[0],u=c[1];function d(){a(Ns,!0)}var h=t?_ye:Eye;return Pq(function(){if(o!==I5&&o!==KP){var f=h.indexOf(o),g=h[f+1],p=n(o);p===Dq?a(g,!0):g&&l(function(m){function _(){m.isCanceled()||a(g,!0)}p===!0?_():Promise.resolve(p).then(_)})}},[e,o]),v.useEffect(function(){return function(){u()}},[]),[d,o]};function Cye(e,t,n,r){var i=r.motionEnter,o=i===void 0?!0:i,a=r.motionAppear,s=a===void 0?!0:a,c=r.motionLeave,l=c===void 0?!0:c,u=r.motionDeadline,d=r.motionLeaveImmediately,h=r.onAppearPrepare,f=r.onEnterPrepare,g=r.onLeavePrepare,p=r.onAppearStart,m=r.onEnterStart,_=r.onLeaveStart,E=r.onAppearActive,S=r.onEnterActive,C=r.onLeaveActive,b=r.onAppearEnd,T=r.onEnterEnd,R=r.onLeaveEnd,A=r.onVisibleChanged,O=Td(),x=ce(O,2),M=x[0],$=x[1],U=Td(Ul),V=ce(U,2),W=V[0],z=V[1],L=Td(null),D=ce(L,2),j=D[0],F=D[1],y=v.useRef(!1),I=v.useRef(null);function N(){return n()}var B=v.useRef(!1);function K(){z(Ul,!0),F(null,!0)}var X=Pi(function(Se){if(W!==Ul){var ue=N();if(!(Se&&!Se.deadline&&Se.target!==ue)){var re=B.current,Re;W===TE&&re?Re=b==null?void 0:b(ue,Se):W===RE&&re?Re=T==null?void 0:T(ue,Se):W===wE&&re&&(Re=R==null?void 0:R(ue,Se)),re&&Re!==!1&&K()}}}),ee=gye(X),ne=ce(ee,1),fe=ne[0],ae=function(ue){switch(ue){case TE:return J(J(J({},Ns,h),ff,p),pf,E);case RE:return J(J(J({},Ns,f),ff,m),pf,S);case wE:return J(J(J({},Ns,g),ff,_),pf,C);default:return{}}},oe=v.useMemo(function(){return ae(W)},[W]),he=yye(W,!e,function(Se){if(Se===Ns){var ue=oe[Ns];return ue?ue(N()):Dq}if(te in oe){var re;F(((re=oe[te])===null||re===void 0?void 0:re.call(oe,N(),null))||null)}return te===pf&&W!==Ul&&(fe(N()),u>0&&(clearTimeout(I.current),I.current=setTimeout(function(){X({deadline:!0})},u))),te===wq&&K(),Sye}),me=ce(he,2),ie=me[0],te=me[1],ge=Lq(te);B.current=ge,Pq(function(){$(t);var Se=y.current;y.current=!0;var ue;!Se&&t&&s&&(ue=TE),Se&&t&&o&&(ue=RE),(Se&&!t&&l||!Se&&d&&!t&&l)&&(ue=wE);var re=ae(ue);ue&&(e||re[Ns])?(z(ue),ie()):z(Ul)},[t]),v.useEffect(function(){(W===TE&&!s||W===RE&&!o||W===wE&&!l)&&z(Ul)},[s,o,l]),v.useEffect(function(){return function(){y.current=!1,clearTimeout(I.current)}},[]);var pe=v.useRef(!1);v.useEffect(function(){M&&(pe.current=!0),M!==void 0&&W===Ul&&((pe.current||M)&&(A==null||A(M)),pe.current=!0)},[M,W]);var be=j;return oe[Ns]&&te===ff&&(be=Y({transition:"none"},be)),[W,te,be,M??t]}function bye(e){var t=e;yt(e)==="object"&&(t=e.transitionSupport);function n(i,o){return!!(i.motionName&&t&&o!==!1)}var r=v.forwardRef(function(i,o){var a=i.visible,s=a===void 0?!0:a,c=i.removeOnLeave,l=c===void 0?!0:c,u=i.forceRender,d=i.children,h=i.motionName,f=i.leavedClassName,g=i.eventProps,p=v.useContext(Rq),m=p.motion,_=n(i,m),E=v.useRef(),S=v.useRef();function C(){try{return E.current instanceof HTMLElement?E.current:a0(S.current)}catch{return null}}var b=Cye(_,s,C,i),T=ce(b,4),R=T[0],A=T[1],O=T[2],x=T[3],M=v.useRef(x);x&&(M.current=!0);var $=v.useCallback(function(j){E.current=j,LP(o,j)},[o]),U,V=Y(Y({},g),{},{visible:s});if(!d)U=null;else if(R===Ul)x?U=d(Y({},V),$):!l&&M.current&&f?U=d(Y(Y({},V),{},{className:f}),$):u||!l&&!f?U=d(Y(Y({},V),{},{style:{display:"none"}}),$):U=null;else{var W;A===Ns?W="prepare":Lq(A)?W="active":A===ff&&(W="start");var z=N5(h,"".concat(R,"-").concat(W));U=d(Y(Y({},V),{},{className:de(N5(h,R),J(J({},z,z&&W),h,typeof h=="string")),style:O}),$)}if(v.isValidElement(U)&&Ip(U)){var L=U,D=L.ref;D||(U=v.cloneElement(U,{ref:$}))}return v.createElement(hye,{ref:S},U)});return r.displayName="CSSMotion",r}const eh=bye(Nq);var xO="add",NO="keep",PO="remove",kR="removed";function Tye(e){var t;return e&&yt(e)==="object"&&"key"in e?t=e:t={key:e},Y(Y({},t),{},{key:String(t.key)})}function DO(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return e.map(Tye)}function Rye(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=[],r=0,i=t.length,o=DO(e),a=DO(t);o.forEach(function(l){for(var u=!1,d=r;d<i;d+=1){var h=a[d];if(h.key===l.key){r<d&&(n=n.concat(a.slice(r,d).map(function(f){return Y(Y({},f),{},{status:xO})})),r=d),n.push(Y(Y({},h),{},{status:NO})),r+=1,u=!0;break}}u||n.push(Y(Y({},l),{},{status:PO}))}),r<i&&(n=n.concat(a.slice(r).map(function(l){return Y(Y({},l),{},{status:xO})})));var s={};n.forEach(function(l){var u=l.key;s[u]=(s[u]||0)+1});var c=Object.keys(s).filter(function(l){return s[l]>1});return c.forEach(function(l){n=n.filter(function(u){var d=u.key,h=u.status;return d!==l||h!==PO}),n.forEach(function(u){u.key===l&&(u.status=NO)})}),n}var wye=["component","children","onVisibleChanged","onAllRemoved"],Iye=["status"],Aye=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearPrepare","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];function Oye(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:eh,n=function(r){_l(o,r);var i=Zd(o);function o(){var a;Ui(this,o);for(var s=arguments.length,c=new Array(s),l=0;l<s;l++)c[l]=arguments[l];return a=i.call.apply(i,[this].concat(c)),J(Cn(a),"state",{keyEntities:[]}),J(Cn(a),"removeKey",function(u){var d=a.state.keyEntities,h=d.map(function(f){return f.key!==u?f:Y(Y({},f),{},{status:kR})});return a.setState({keyEntities:h}),h.filter(function(f){var g=f.status;return g!==kR}).length}),a}return Bi(o,[{key:"render",value:function(){var s=this,c=this.state.keyEntities,l=this.props,u=l.component,d=l.children,h=l.onVisibleChanged,f=l.onAllRemoved,g=kt(l,wye),p=u||v.Fragment,m={};return Aye.forEach(function(_){m[_]=g[_],delete g[_]}),delete g.keys,v.createElement(p,g,c.map(function(_,E){var S=_.status,C=kt(_,Iye),b=S===xO||S===NO;return v.createElement(t,Ee({},m,{key:C.key,visible:b,eventProps:C,onVisibleChanged:function(R){if(h==null||h(R,{key:C.key}),!R){var A=s.removeKey(C.key);A===0&&f&&f()}}}),function(T,R){return d(Y(Y({},T),{},{index:E}),R)})}))}}],[{key:"getDerivedStateFromProps",value:function(s,c){var l=s.keys,u=c.keyEntities,d=DO(l),h=Rye(u,d);return{keyEntities:h.filter(function(f){var g=u.find(function(p){var m=p.key;return f.key===m});return!(g&&g.status===kR&&f.status===PO)})}}}]),o}(v.Component);return J(n,"defaultProps",{component:"div"}),n}const kq=Oye(Nq);function xye(e){const{children:t}=e,[,n]=Eo(),{motion:r}=n,i=v.useRef(!1);return i.current=i.current||r===!1,i.current?v.createElement(dye,{motion:r},t):t}const Nye=()=>null;var Pye=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const Dye=["getTargetContainer","getPopupContainer","renderEmpty","input","pagination","form","select","button"],Lye="ant";let KS,Mq,Fq,Uq;function k_(){return KS||Lye}function kye(){return Mq||zP}function Mye(e){return Object.keys(e).some(t=>t.endsWith("Color"))}const Fye=e=>{const{prefixCls:t,iconPrefixCls:n,theme:r,holderRender:i}=e;t!==void 0&&(KS=t),n!==void 0&&(Mq=n),"holderRender"in e&&(Uq=i),r&&(Mye(r)?USe(k_(),r):Fq=r)},Uye=()=>({getPrefixCls:(e,t)=>t||(e?`${k_()}-${e}`:k_()),getIconPrefixCls:kye,getRootPrefixCls:()=>KS||k_(),getTheme:()=>Fq,holderRender:Uq}),Bye=e=>{const{children:t,csp:n,autoInsertSpaceInButton:r,alert:i,anchor:o,form:a,locale:s,componentSize:c,direction:l,space:u,virtual:d,dropdownMatchSelectWidth:h,popupMatchSelectWidth:f,popupOverflow:g,legacyLocale:p,parentContext:m,iconPrefixCls:_,theme:E,componentDisabled:S,segmented:C,statistic:b,spin:T,calendar:R,carousel:A,cascader:O,collapse:x,typography:M,checkbox:$,descriptions:U,divider:V,drawer:W,skeleton:z,steps:L,image:D,layout:j,list:F,mentions:y,modal:I,progress:N,result:B,slider:K,breadcrumb:X,menu:ee,pagination:ne,input:fe,textArea:ae,empty:oe,badge:he,radio:me,rate:ie,switch:te,transfer:ge,avatar:pe,message:be,tag:Se,table:ue,card:re,tabs:Re,timeline:we,timePicker:xe,upload:We,notification:Ve,tree:Rt,colorPicker:xt,datePicker:Xe,rangePicker:Ge,flex:Je,wave:st,dropdown:At,warning:Ot,tour:dn,floatButtonGroup:an}=e,on=v.useCallback((Be,nt)=>{const{prefixCls:Bt}=e;if(nt)return nt;const Le=Bt||m.getPrefixCls("");return Be?`${Le}-${Be}`:Le},[m.getPrefixCls,e.prefixCls]),ke=_||m.iconPrefixCls||zP,Ze=n||m.csp;Cq(ke,Ze);const Mt=lye(E,m.theme,{prefixCls:on("")}),En={csp:Ze,autoInsertSpaceInButton:r,alert:i,anchor:o,locale:s||p,direction:l,space:u,virtual:d,popupMatchSelectWidth:f??h,popupOverflow:g,getPrefixCls:on,iconPrefixCls:ke,theme:Mt,segmented:C,statistic:b,spin:T,calendar:R,carousel:A,cascader:O,collapse:x,typography:M,checkbox:$,descriptions:U,divider:V,drawer:W,skeleton:z,steps:L,image:D,input:fe,textArea:ae,layout:j,list:F,mentions:y,modal:I,progress:N,result:B,slider:K,breadcrumb:X,menu:ee,pagination:ne,empty:oe,badge:he,radio:me,rate:ie,switch:te,transfer:ge,avatar:pe,message:be,tag:Se,table:ue,card:re,tabs:Re,timeline:we,timePicker:xe,upload:We,notification:Ve,tree:Rt,colorPicker:xt,datePicker:Xe,rangePicker:Ge,flex:Je,wave:st,dropdown:At,warning:Ot,tour:dn,floatButtonGroup:an},nr=Object.assign({},m);Object.keys(En).forEach(Be=>{En[Be]!==void 0&&(nr[Be]=En[Be])}),Dye.forEach(Be=>{const nt=e[Be];nt&&(nr[Be]=nt)}),typeof r<"u"&&(nr.button=Object.assign({autoInsertSpace:r},nr.button));const _n=jg(()=>nr,nr,(Be,nt)=>{const Bt=Object.keys(Be),Le=Object.keys(nt);return Bt.length!==Le.length||Bt.some(Ue=>Be[Ue]!==nt[Ue])}),qt=v.useMemo(()=>({prefixCls:ke,csp:Ze}),[ke,Ze]);let it=v.createElement(v.Fragment,null,v.createElement(Nye,{dropdownMatchSelectWidth:h}),t);const Nt=v.useMemo(()=>{var Be,nt,Bt,Le;return hf(((Be=Fd.Form)===null||Be===void 0?void 0:Be.defaultValidateMessages)||{},((Bt=(nt=_n.locale)===null||nt===void 0?void 0:nt.Form)===null||Bt===void 0?void 0:Bt.defaultValidateMessages)||{},((Le=_n.form)===null||Le===void 0?void 0:Le.validateMessages)||{},(a==null?void 0:a.validateMessages)||{})},[_n,a==null?void 0:a.validateMessages]);Object.keys(Nt).length>0&&(it=v.createElement(rq.Provider,{value:Nt},it)),s&&(it=v.createElement(nSe,{locale:s,_ANT_MARK__:eSe},it)),(ke||Ze)&&(it=v.createElement(jP.Provider,{value:qt},it)),c&&(it=v.createElement(BSe,{size:c},it)),it=v.createElement(xye,null,it);const ct=v.useMemo(()=>{const Be=Mt||{},{algorithm:nt,token:Bt,components:Le,cssVar:Ue}=Be,ze=Pye(Be,["algorithm","token","components","cssVar"]),mt=nt&&(!Array.isArray(nt)||nt.length>0)?gO(nt):uq,Ft={};Object.entries(Le||{}).forEach(Dn=>{let[rr,Sn]=Dn;const gt=Object.assign({},Sn);"algorithm"in gt&&(gt.algorithm===!0?gt.theme=mt:(Array.isArray(gt.algorithm)||typeof gt.algorithm=="function")&&(gt.theme=gO(gt.algorithm)),delete gt.algorithm),Ft[rr]=gt});const $t=Object.assign(Object.assign({},dg),Bt);return Object.assign(Object.assign({},ze),{theme:mt,token:$t,components:Ft,override:Object.assign({override:$t},Ft),cssVar:Ue})},[Mt]);return E&&(it=v.createElement(dq.Provider,{value:ct},it)),_n.warning&&(it=v.createElement(G_e.Provider,{value:_n.warning},it)),S!==void 0&&(it=v.createElement(hq,{disabled:S},it)),v.createElement(en.Provider,{value:_n},it)},th=e=>{const t=v.useContext(en),n=v.useContext(HP);return v.createElement(Bye,Object.assign({parentContext:t,legacyLocale:n},e))};th.ConfigContext=en;th.SizeContext=zg;th.config=Fye;th.useConfig=$Se;Object.defineProperty(th,"SizeContext",{get:()=>zg});var $ye={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"}}]},name:"check-circle",theme:"filled"};const Vye=$ye;function Bq(e){var t;return e==null||(t=e.getRootNode)===null||t===void 0?void 0:t.call(e)}function jye(e){return Bq(e)instanceof ShadowRoot}function qS(e){return jye(e)?Bq(e):null}function Hye(e){return e.replace(/-(.)/g,function(t,n){return n.toUpperCase()})}function zye(e,t){mo(e,"[@ant-design/icons] ".concat(t))}function P5(e){return yt(e)==="object"&&typeof e.name=="string"&&typeof e.theme=="string"&&(yt(e.icon)==="object"||typeof e.icon=="function")}function D5(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.keys(e).reduce(function(t,n){var r=e[n];switch(n){case"class":t.className=r,delete t.class;break;default:delete t[n],t[Hye(n)]=r}return t},{})}function LO(e,t,n){return n?le.createElement(e.tag,Y(Y({key:t},D5(e.attrs)),n),(e.children||[]).map(function(r,i){return LO(r,"".concat(t,"-").concat(e.tag,"-").concat(i))})):le.createElement(e.tag,Y({key:t},D5(e.attrs)),(e.children||[]).map(function(r,i){return LO(r,"".concat(t,"-").concat(e.tag,"-").concat(i))}))}function $q(e){return Ud(e)[0]}function Vq(e){return e?Array.isArray(e)?e:[e]:[]}var Wye=`
.anticon {
  display: inline-flex;
  align-items: center;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`,Gye=function(t){var n=v.useContext(jP),r=n.csp,i=n.prefixCls,o=Wye;i&&(o=o.replace(/anticon/g,i)),v.useEffect(function(){var a=t.current,s=qS(a);cl(o,"@ant-design-icons",{prepend:!0,csp:r,attachTo:s})},[])},Kye=["icon","className","onClick","style","primaryColor","secondaryColor"],l0={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};function qye(e){var t=e.primaryColor,n=e.secondaryColor;l0.primaryColor=t,l0.secondaryColor=n||$q(t),l0.calculated=!!n}function Yye(){return Y({},l0)}var UC=function(t){var n=t.icon,r=t.className,i=t.onClick,o=t.style,a=t.primaryColor,s=t.secondaryColor,c=kt(t,Kye),l=v.useRef(),u=l0;if(a&&(u={primaryColor:a,secondaryColor:s||$q(a)}),Gye(l),zye(P5(n),"icon should be icon definiton, but got ".concat(n)),!P5(n))return null;var d=n;return d&&typeof d.icon=="function"&&(d=Y(Y({},d),{},{icon:d.icon(u.primaryColor,u.secondaryColor)})),LO(d.icon,"svg-".concat(d.name),Y(Y({className:r,onClick:i,style:o,"data-icon":d.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},c),{},{ref:l}))};UC.displayName="IconReact";UC.getTwoToneColors=Yye;UC.setTwoToneColors=qye;const qP=UC;function jq(e){var t=Vq(e),n=ce(t,2),r=n[0],i=n[1];return qP.setTwoToneColors({primaryColor:r,secondaryColor:i})}function Xye(){var e=qP.getTwoToneColors();return e.calculated?[e.primaryColor,e.secondaryColor]:e.primaryColor}var Jye=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];jq(SSe.primary);var BC=v.forwardRef(function(e,t){var n=e.className,r=e.icon,i=e.spin,o=e.rotate,a=e.tabIndex,s=e.onClick,c=e.twoToneColor,l=kt(e,Jye),u=v.useContext(jP),d=u.prefixCls,h=d===void 0?"anticon":d,f=u.rootClassName,g=de(f,h,J(J({},"".concat(h,"-").concat(r.name),!!r.name),"".concat(h,"-spin"),!!i||r.name==="loading"),n),p=a;p===void 0&&s&&(p=-1);var m=o?{msTransform:"rotate(".concat(o,"deg)"),transform:"rotate(".concat(o,"deg)")}:void 0,_=Vq(c),E=ce(_,2),S=E[0],C=E[1];return v.createElement("span",Ee({role:"img","aria-label":r.name},l,{ref:t,tabIndex:p,onClick:s,className:g}),v.createElement(qP,{icon:r,primaryColor:S,secondaryColor:C,style:m}))});BC.displayName="AntdIcon";BC.getTwoToneColor=Xye;BC.setTwoToneColor=jq;const si=BC;var Qye=function(t,n){return v.createElement(si,Ee({},t,{ref:n,icon:Vye}))},Zye=v.forwardRef(Qye);const Hq=Zye;var eCe={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm127.98 274.82h-.04l-.08.06L512 466.75 384.14 338.88c-.04-.05-.06-.06-.08-.06a.12.12 0 00-.07 0c-.03 0-.05.01-.09.05l-45.02 45.02a.2.2 0 00-.05.09.12.12 0 000 .07v.02a.27.27 0 00.06.06L466.75 512 338.88 639.86c-.05.04-.06.06-.06.08a.12.12 0 000 .07c0 .03.01.05.05.09l45.02 45.02a.2.2 0 00.09.05.12.12 0 00.07 0c.02 0 .04-.01.08-.05L512 557.25l127.86 127.87c.04.04.06.05.08.05a.12.12 0 00.07 0c.03 0 .05-.01.09-.05l45.02-45.02a.2.2 0 00.05-.09.12.12 0 000-.07v-.02a.27.27 0 00-.05-.06L557.25 512l127.87-127.86c.04-.04.05-.06.05-.08a.12.12 0 000-.07c0-.03-.01-.05-.05-.09l-45.02-45.02a.2.2 0 00-.09-.05.12.12 0 00-.07 0z"}}]},name:"close-circle",theme:"filled"};const tCe=eCe;var nCe=function(t,n){return v.createElement(si,Ee({},t,{ref:n,icon:tCe}))},rCe=v.forwardRef(nCe);const $C=rCe;var iCe={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M799.86 166.31c.02 0 .04.02.08.06l57.69 57.7c.04.03.05.05.06.08a.12.12 0 010 .06c0 .03-.02.05-.06.09L569.93 512l287.7 287.7c.04.04.05.06.06.09a.12.12 0 010 .07c0 .02-.02.04-.06.08l-57.7 57.69c-.03.04-.05.05-.07.06a.12.12 0 01-.07 0c-.03 0-.05-.02-.09-.06L512 569.93l-287.7 287.7c-.04.04-.06.05-.09.06a.12.12 0 01-.07 0c-.02 0-.04-.02-.08-.06l-57.69-57.7c-.04-.03-.05-.05-.06-.07a.12.12 0 010-.07c0-.03.02-.05.06-.09L454.07 512l-287.7-287.7c-.04-.04-.05-.06-.06-.09a.12.12 0 010-.07c0-.02.02-.04.06-.08l57.7-57.69c.03-.04.05-.05.07-.06a.12.12 0 01.07 0c.03 0 .05.02.09.06L512 454.07l287.7-287.7c.04-.04.06-.05.09-.06a.12.12 0 01.07 0z"}}]},name:"close",theme:"outlined"};const oCe=iCe;var aCe=function(t,n){return v.createElement(si,Ee({},t,{ref:n,icon:oCe}))},sCe=v.forwardRef(aCe);const zq=sCe;var cCe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm-32 232c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296zm32 440a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"exclamation-circle",theme:"filled"};const lCe=cCe;var uCe=function(t,n){return v.createElement(si,Ee({},t,{ref:n,icon:lCe}))},dCe=v.forwardRef(uCe);const Wq=dCe;var hCe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"info-circle",theme:"filled"};const fCe=hCe;var pCe=function(t,n){return v.createElement(si,Ee({},t,{ref:n,icon:fCe}))},mCe=v.forwardRef(pCe);const gCe=mCe;var vCe=`accept acceptCharset accessKey action allowFullScreen allowTransparency
    alt async autoComplete autoFocus autoPlay capture cellPadding cellSpacing challenge
    charSet checked classID className colSpan cols content contentEditable contextMenu
    controls coords crossOrigin data dateTime default defer dir disabled download draggable
    encType form formAction formEncType formMethod formNoValidate formTarget frameBorder
    headers height hidden high href hrefLang htmlFor httpEquiv icon id inputMode integrity
    is keyParams keyType kind label lang list loop low manifest marginHeight marginWidth max maxLength media
    mediaGroup method min minLength multiple muted name noValidate nonce open
    optimum pattern placeholder poster preload radioGroup readOnly rel required
    reversed role rowSpan rows sandbox scope scoped scrolling seamless selected
    shape size sizes span spellCheck src srcDoc srcLang srcSet start step style
    summary tabIndex target title type useMap value width wmode wrap`,ECe=`onCopy onCut onPaste onCompositionEnd onCompositionStart onCompositionUpdate onKeyDown
    onKeyPress onKeyUp onFocus onBlur onChange onInput onSubmit onClick onContextMenu onDoubleClick
    onDrag onDragEnd onDragEnter onDragExit onDragLeave onDragOver onDragStart onDrop onMouseDown
    onMouseEnter onMouseLeave onMouseMove onMouseOut onMouseOver onMouseUp onSelect onTouchCancel
    onTouchEnd onTouchMove onTouchStart onScroll onWheel onAbort onCanPlay onCanPlayThrough
    onDurationChange onEmptied onEncrypted onEnded onError onLoadedData onLoadedMetadata
    onLoadStart onPause onPlay onPlaying onProgress onRateChange onSeeked onSeeking onStalled onSuspend onTimeUpdate onVolumeChange onWaiting onLoad onError`,_Ce="".concat(vCe," ").concat(ECe).split(/[\s\n]+/),SCe="aria-",yCe="data-";function L5(e,t){return e.indexOf(t)===0}function Bd(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n;t===!1?n={aria:!0,data:!0,attr:!0}:t===!0?n={aria:!0}:n=Y({},t);var r={};return Object.keys(e).forEach(function(i){(n.aria&&(i==="role"||L5(i,SCe))||n.data&&L5(i,yCe)||n.attr&&_Ce.includes(i))&&(r[i]=e[i])}),r}function Gq(e){return e&&le.isValidElement(e)&&e.type===le.Fragment}const CCe=(e,t,n)=>le.isValidElement(e)?le.cloneElement(e,typeof n=="function"?n(e.props||{}):n):t;function ls(e,t){return CCe(e,e,t)}const k5=e=>typeof e=="object"&&e!=null&&e.nodeType===1,M5=(e,t)=>(!t||e!=="hidden")&&e!=="visible"&&e!=="clip",MR=(e,t)=>{if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){const n=getComputedStyle(e,null);return M5(n.overflowY,t)||M5(n.overflowX,t)||(r=>{const i=(o=>{if(!o.ownerDocument||!o.ownerDocument.defaultView)return null;try{return o.ownerDocument.defaultView.frameElement}catch{return null}})(r);return!!i&&(i.clientHeight<r.scrollHeight||i.clientWidth<r.scrollWidth)})(e)}return!1},AE=(e,t,n,r,i,o,a,s)=>o<e&&a>t||o>e&&a<t?0:o<=e&&s<=n||a>=t&&s>=n?o-e-r:a>t&&s<n||o<e&&s>n?a-t+i:0,bCe=e=>{const t=e.parentElement;return t??(e.getRootNode().host||null)},F5=(e,t)=>{var n,r,i,o;if(typeof document>"u")return[];const{scrollMode:a,block:s,inline:c,boundary:l,skipOverflowHiddenElements:u}=t,d=typeof l=="function"?l:z=>z!==l;if(!k5(e))throw new TypeError("Invalid target");const h=document.scrollingElement||document.documentElement,f=[];let g=e;for(;k5(g)&&d(g);){if(g=bCe(g),g===h){f.push(g);break}g!=null&&g===document.body&&MR(g)&&!MR(document.documentElement)||g!=null&&MR(g,u)&&f.push(g)}const p=(r=(n=window.visualViewport)==null?void 0:n.width)!=null?r:innerWidth,m=(o=(i=window.visualViewport)==null?void 0:i.height)!=null?o:innerHeight,{scrollX:_,scrollY:E}=window,{height:S,width:C,top:b,right:T,bottom:R,left:A}=e.getBoundingClientRect(),{top:O,right:x,bottom:M,left:$}=(z=>{const L=window.getComputedStyle(z);return{top:parseFloat(L.scrollMarginTop)||0,right:parseFloat(L.scrollMarginRight)||0,bottom:parseFloat(L.scrollMarginBottom)||0,left:parseFloat(L.scrollMarginLeft)||0}})(e);let U=s==="start"||s==="nearest"?b-O:s==="end"?R+M:b+S/2-O+M,V=c==="center"?A+C/2-$+x:c==="end"?T+x:A-$;const W=[];for(let z=0;z<f.length;z++){const L=f[z],{height:D,width:j,top:F,right:y,bottom:I,left:N}=L.getBoundingClientRect();if(a==="if-needed"&&b>=0&&A>=0&&R<=m&&T<=p&&b>=F&&R<=I&&A>=N&&T<=y)return W;const B=getComputedStyle(L),K=parseInt(B.borderLeftWidth,10),X=parseInt(B.borderTopWidth,10),ee=parseInt(B.borderRightWidth,10),ne=parseInt(B.borderBottomWidth,10);let fe=0,ae=0;const oe="offsetWidth"in L?L.offsetWidth-L.clientWidth-K-ee:0,he="offsetHeight"in L?L.offsetHeight-L.clientHeight-X-ne:0,me="offsetWidth"in L?L.offsetWidth===0?0:j/L.offsetWidth:0,ie="offsetHeight"in L?L.offsetHeight===0?0:D/L.offsetHeight:0;if(h===L)fe=s==="start"?U:s==="end"?U-m:s==="nearest"?AE(E,E+m,m,X,ne,E+U,E+U+S,S):U-m/2,ae=c==="start"?V:c==="center"?V-p/2:c==="end"?V-p:AE(_,_+p,p,K,ee,_+V,_+V+C,C),fe=Math.max(0,fe+E),ae=Math.max(0,ae+_);else{fe=s==="start"?U-F-X:s==="end"?U-I+ne+he:s==="nearest"?AE(F,I,D,X,ne+he,U,U+S,S):U-(F+D/2)+he/2,ae=c==="start"?V-N-K:c==="center"?V-(N+j/2)+oe/2:c==="end"?V-y+ee+oe:AE(N,y,j,K,ee+oe,V,V+C,C);const{scrollLeft:te,scrollTop:ge}=L;fe=ie===0?0:Math.max(0,Math.min(ge+fe/ie,L.scrollHeight-D/ie+he)),ae=me===0?0:Math.max(0,Math.min(te+ae/me,L.scrollWidth-j/me+oe)),U+=ge-fe,V+=te-ae}W.push({el:L,top:fe,left:ae})}return W},TCe=e=>e===!1?{block:"end",inline:"nearest"}:(t=>t===Object(t)&&Object.keys(t).length!==0)(e)?e:{block:"start",inline:"nearest"};function RCe(e,t){if(!e.isConnected||!(i=>{let o=i;for(;o&&o.parentNode;){if(o.parentNode===document)return!0;o=o.parentNode instanceof ShadowRoot?o.parentNode.host:o.parentNode}return!1})(e))return;const n=(i=>{const o=window.getComputedStyle(i);return{top:parseFloat(o.scrollMarginTop)||0,right:parseFloat(o.scrollMarginRight)||0,bottom:parseFloat(o.scrollMarginBottom)||0,left:parseFloat(o.scrollMarginLeft)||0}})(e);if((i=>typeof i=="object"&&typeof i.behavior=="function")(t))return t.behavior(F5(e,t));const r=typeof t=="boolean"||t==null?void 0:t.behavior;for(const{el:i,top:o,left:a}of F5(e,TCe(t))){const s=o-n.top+n.bottom,c=a-n.left+n.right;i.scroll({top:s,left:c,behavior:r})}}const wCe=e=>{const[,,,,t]=Eo();return t?`${e}-css-var`:""},Mc=wCe;var Oe={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(t){var n=t.keyCode;if(t.altKey&&!t.ctrlKey||t.metaKey||n>=Oe.F1&&n<=Oe.F12)return!1;switch(n){case Oe.ALT:case Oe.CAPS_LOCK:case Oe.CONTEXT_MENU:case Oe.CTRL:case Oe.DOWN:case Oe.END:case Oe.ESC:case Oe.HOME:case Oe.INSERT:case Oe.LEFT:case Oe.MAC_FF_META:case Oe.META:case Oe.NUMLOCK:case Oe.NUM_CENTER:case Oe.PAGE_DOWN:case Oe.PAGE_UP:case Oe.PAUSE:case Oe.PRINT_SCREEN:case Oe.RIGHT:case Oe.SHIFT:case Oe.UP:case Oe.WIN_KEY:case Oe.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(t){if(t>=Oe.ZERO&&t<=Oe.NINE||t>=Oe.NUM_ZERO&&t<=Oe.NUM_MULTIPLY||t>=Oe.A&&t<=Oe.Z||window.navigator.userAgent.indexOf("WebKit")!==-1&&t===0)return!0;switch(t){case Oe.SPACE:case Oe.QUESTION_MARK:case Oe.NUM_PLUS:case Oe.NUM_MINUS:case Oe.NUM_PERIOD:case Oe.NUM_DIVISION:case Oe.SEMICOLON:case Oe.DASH:case Oe.EQUALS:case Oe.COMMA:case Oe.PERIOD:case Oe.SLASH:case Oe.APOSTROPHE:case Oe.SINGLE_QUOTE:case Oe.OPEN_SQUARE_BRACKET:case Oe.BACKSLASH:case Oe.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},Kq=v.forwardRef(function(e,t){var n=e.prefixCls,r=e.style,i=e.className,o=e.duration,a=o===void 0?4.5:o,s=e.showProgress,c=e.pauseOnHover,l=c===void 0?!0:c,u=e.eventKey,d=e.content,h=e.closable,f=e.closeIcon,g=f===void 0?"x":f,p=e.props,m=e.onClick,_=e.onNoticeClose,E=e.times,S=e.hovering,C=v.useState(!1),b=ce(C,2),T=b[0],R=b[1],A=v.useState(0),O=ce(A,2),x=O[0],M=O[1],$=v.useState(0),U=ce($,2),V=U[0],W=U[1],z=S||T,L=a>0&&s,D=function(){_(u)},j=function(K){(K.key==="Enter"||K.code==="Enter"||K.keyCode===Oe.ENTER)&&D()};v.useEffect(function(){if(!z&&a>0){var B=Date.now()-V,K=setTimeout(function(){D()},a*1e3-V);return function(){l&&clearTimeout(K),W(Date.now()-B)}}},[a,z,E]),v.useEffect(function(){if(!z&&L&&(l||V===0)){var B=performance.now(),K,X=function ee(){cancelAnimationFrame(K),K=requestAnimationFrame(function(ne){var fe=ne+V-B,ae=Math.min(fe/(a*1e3),1);M(ae*100),ae<1&&ee()})};return X(),function(){l&&cancelAnimationFrame(K)}}},[a,V,z,L,E]);var F=v.useMemo(function(){return yt(h)==="object"&&h!==null?h:h?{closeIcon:g}:{}},[h,g]),y=Bd(F,!0),I=100-(!x||x<0?0:x>100?100:x),N="".concat(n,"-notice");return v.createElement("div",Ee({},p,{ref:t,className:de(N,i,J({},"".concat(N,"-closable"),h)),style:r,onMouseEnter:function(K){var X;R(!0),p==null||(X=p.onMouseEnter)===null||X===void 0||X.call(p,K)},onMouseLeave:function(K){var X;R(!1),p==null||(X=p.onMouseLeave)===null||X===void 0||X.call(p,K)},onClick:m}),v.createElement("div",{className:"".concat(N,"-content")},d),h&&v.createElement("a",Ee({tabIndex:0,className:"".concat(N,"-close"),onKeyDown:j,"aria-label":"Close"},y,{onClick:function(K){K.preventDefault(),K.stopPropagation(),D()}}),F.closeIcon),L&&v.createElement("progress",{className:"".concat(N,"-progress"),max:"100",value:I},I+"%"))}),qq=le.createContext({}),ICe=function(t){var n=t.children,r=t.classNames;return le.createElement(qq.Provider,{value:{classNames:r}},n)},U5=8,B5=3,$5=16,ACe=function(t){var n={offset:U5,threshold:B5,gap:$5};if(t&&yt(t)==="object"){var r,i,o;n.offset=(r=t.offset)!==null&&r!==void 0?r:U5,n.threshold=(i=t.threshold)!==null&&i!==void 0?i:B5,n.gap=(o=t.gap)!==null&&o!==void 0?o:$5}return[!!t,n]},OCe=["className","style","classNames","styles"],xCe=function(t){var n=t.configList,r=t.placement,i=t.prefixCls,o=t.className,a=t.style,s=t.motion,c=t.onAllNoticeRemoved,l=t.onNoticeClose,u=t.stack,d=v.useContext(qq),h=d.classNames,f=v.useRef({}),g=v.useState(null),p=ce(g,2),m=p[0],_=p[1],E=v.useState([]),S=ce(E,2),C=S[0],b=S[1],T=n.map(function(z){return{config:z,key:String(z.key)}}),R=ACe(u),A=ce(R,2),O=A[0],x=A[1],M=x.offset,$=x.threshold,U=x.gap,V=O&&(C.length>0||T.length<=$),W=typeof s=="function"?s(r):s;return v.useEffect(function(){O&&C.length>1&&b(function(z){return z.filter(function(L){return T.some(function(D){var j=D.key;return L===j})})})},[C,T,O]),v.useEffect(function(){var z;if(O&&f.current[(z=T[T.length-1])===null||z===void 0?void 0:z.key]){var L;_(f.current[(L=T[T.length-1])===null||L===void 0?void 0:L.key])}},[T,O]),le.createElement(kq,Ee({key:r,className:de(i,"".concat(i,"-").concat(r),h==null?void 0:h.list,o,J(J({},"".concat(i,"-stack"),!!O),"".concat(i,"-stack-expanded"),V)),style:a,keys:T,motionAppear:!0},W,{onAllRemoved:function(){c(r)}}),function(z,L){var D=z.config,j=z.className,F=z.style,y=z.index,I=D,N=I.key,B=I.times,K=String(N),X=D,ee=X.className,ne=X.style,fe=X.classNames,ae=X.styles,oe=kt(X,OCe),he=T.findIndex(function(xe){return xe.key===K}),me={};if(O){var ie=T.length-1-(he>-1?he:y-1),te=r==="top"||r==="bottom"?"-50%":"0";if(ie>0){var ge,pe,be;me.height=V?(ge=f.current[K])===null||ge===void 0?void 0:ge.offsetHeight:m==null?void 0:m.offsetHeight;for(var Se=0,ue=0;ue<ie;ue++){var re;Se+=((re=f.current[T[T.length-1-ue].key])===null||re===void 0?void 0:re.offsetHeight)+U}var Re=(V?Se:ie*M)*(r.startsWith("top")?1:-1),we=!V&&m!==null&&m!==void 0&&m.offsetWidth&&(pe=f.current[K])!==null&&pe!==void 0&&pe.offsetWidth?((m==null?void 0:m.offsetWidth)-M*2*(ie<3?ie:3))/((be=f.current[K])===null||be===void 0?void 0:be.offsetWidth):1;me.transform="translate3d(".concat(te,", ").concat(Re,"px, 0) scaleX(").concat(we,")")}else me.transform="translate3d(".concat(te,", 0, 0)")}return le.createElement("div",{ref:L,className:de("".concat(i,"-notice-wrapper"),j,fe==null?void 0:fe.wrapper),style:Y(Y(Y({},F),me),ae==null?void 0:ae.wrapper),onMouseEnter:function(){return b(function(We){return We.includes(K)?We:[].concat(Me(We),[K])})},onMouseLeave:function(){return b(function(We){return We.filter(function(Ve){return Ve!==K})})}},le.createElement(Kq,Ee({},oe,{ref:function(We){he>-1?f.current[K]=We:delete f.current[K]},prefixCls:i,classNames:fe,styles:ae,className:de(ee,h==null?void 0:h.notice),style:ne,times:B,key:N,eventKey:N,onNoticeClose:l,hovering:O&&C.length>0})))})},NCe=v.forwardRef(function(e,t){var n=e.prefixCls,r=n===void 0?"rc-notification":n,i=e.container,o=e.motion,a=e.maxCount,s=e.className,c=e.style,l=e.onAllRemoved,u=e.stack,d=e.renderNotifications,h=v.useState([]),f=ce(h,2),g=f[0],p=f[1],m=function(O){var x,M=g.find(function($){return $.key===O});M==null||(x=M.onClose)===null||x===void 0||x.call(M),p(function($){return $.filter(function(U){return U.key!==O})})};v.useImperativeHandle(t,function(){return{open:function(O){p(function(x){var M=Me(x),$=M.findIndex(function(W){return W.key===O.key}),U=Y({},O);if($>=0){var V;U.times=(((V=x[$])===null||V===void 0?void 0:V.times)||0)+1,M[$]=U}else U.times=0,M.push(U);return a>0&&M.length>a&&(M=M.slice(-a)),M})},close:function(O){m(O)},destroy:function(){p([])}}});var _=v.useState({}),E=ce(_,2),S=E[0],C=E[1];v.useEffect(function(){var A={};g.forEach(function(O){var x=O.placement,M=x===void 0?"topRight":x;M&&(A[M]=A[M]||[],A[M].push(O))}),Object.keys(S).forEach(function(O){A[O]=A[O]||[]}),C(A)},[g]);var b=function(O){C(function(x){var M=Y({},x),$=M[O]||[];return $.length||delete M[O],M})},T=v.useRef(!1);if(v.useEffect(function(){Object.keys(S).length>0?T.current=!0:T.current&&(l==null||l(),T.current=!1)},[S]),!i)return null;var R=Object.keys(S);return Oc.createPortal(v.createElement(v.Fragment,null,R.map(function(A){var O=S[A],x=v.createElement(xCe,{key:A,configList:O,placement:A,prefixCls:r,className:s==null?void 0:s(A),style:c==null?void 0:c(A),motion:o,onNoticeClose:m,onAllNoticeRemoved:b,stack:u});return d?d(x,{prefixCls:r,key:A}):x})),i)}),PCe=["getContainer","motion","prefixCls","maxCount","className","style","onAllRemoved","stack","renderNotifications"],DCe=function(){return document.body},V5=0;function LCe(){for(var e={},t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach(function(i){i&&Object.keys(i).forEach(function(o){var a=i[o];a!==void 0&&(e[o]=a)})}),e}function kCe(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.getContainer,n=t===void 0?DCe:t,r=e.motion,i=e.prefixCls,o=e.maxCount,a=e.className,s=e.style,c=e.onAllRemoved,l=e.stack,u=e.renderNotifications,d=kt(e,PCe),h=v.useState(),f=ce(h,2),g=f[0],p=f[1],m=v.useRef(),_=v.createElement(NCe,{container:g,ref:m,prefixCls:i,motion:r,maxCount:o,className:a,style:s,onAllRemoved:c,stack:l,renderNotifications:u}),E=v.useState([]),S=ce(E,2),C=S[0],b=S[1],T=v.useMemo(function(){return{open:function(A){var O=LCe(d,A);(O.key===null||O.key===void 0)&&(O.key="rc-notification-".concat(V5),V5+=1),b(function(x){return[].concat(Me(x),[{type:"open",config:O}])})},close:function(A){b(function(O){return[].concat(Me(O),[{type:"close",key:A}])})},destroy:function(){b(function(A){return[].concat(Me(A),[{type:"destroy"}])})}}},[]);return v.useEffect(function(){p(n())}),v.useEffect(function(){m.current&&C.length&&(C.forEach(function(R){switch(R.type){case"open":m.current.open(R.config);break;case"close":m.current.close(R.key);break;case"destroy":m.current.destroy();break}}),b(function(R){return R.filter(function(A){return!C.includes(A)})}))},[C]),[T,_]}var MCe={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"};const FCe=MCe;var UCe=function(t,n){return v.createElement(si,Ee({},t,{ref:n,icon:FCe}))},BCe=v.forwardRef(UCe);const VC=BCe,$Ce=le.createContext(void 0),Yq=$Ce,Ju=100,VCe=10,Xq=Ju*VCe,Jq={Modal:Ju,Drawer:Ju,Popover:Ju,Popconfirm:Ju,Tooltip:Ju,Tour:Ju},jCe={SelectLike:50,Dropdown:50,DatePicker:50,Menu:50,ImagePreview:1};function HCe(e){return e in Jq}function YP(e,t){const[,n]=Eo(),r=le.useContext(Yq),i=HCe(e);if(t!==void 0)return[t,t];let o=r??0;return i?(o+=(r?0:n.zIndexPopupBase)+Jq[e],o=Math.min(o,n.zIndexPopupBase+Xq)):o+=jCe[e],[r===void 0?t:o,o]}function Po(){Po=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(z,L,D){z[L]=D.value},o=typeof Symbol=="function"?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(z,L,D){return Object.defineProperty(z,L,{value:D,enumerable:!0,configurable:!0,writable:!0}),z[L]}try{l({},"")}catch{l=function(D,j,F){return D[j]=F}}function u(z,L,D,j){var F=L&&L.prototype instanceof _?L:_,y=Object.create(F.prototype),I=new V(j||[]);return i(y,"_invoke",{value:x(z,D,I)}),y}function d(z,L,D){try{return{type:"normal",arg:z.call(L,D)}}catch(j){return{type:"throw",arg:j}}}t.wrap=u;var h="suspendedStart",f="suspendedYield",g="executing",p="completed",m={};function _(){}function E(){}function S(){}var C={};l(C,a,function(){return this});var b=Object.getPrototypeOf,T=b&&b(b(W([])));T&&T!==n&&r.call(T,a)&&(C=T);var R=S.prototype=_.prototype=Object.create(C);function A(z){["next","throw","return"].forEach(function(L){l(z,L,function(D){return this._invoke(L,D)})})}function O(z,L){function D(F,y,I,N){var B=d(z[F],z,y);if(B.type!=="throw"){var K=B.arg,X=K.value;return X&&yt(X)=="object"&&r.call(X,"__await")?L.resolve(X.__await).then(function(ee){D("next",ee,I,N)},function(ee){D("throw",ee,I,N)}):L.resolve(X).then(function(ee){K.value=ee,I(K)},function(ee){return D("throw",ee,I,N)})}N(B.arg)}var j;i(this,"_invoke",{value:function(y,I){function N(){return new L(function(B,K){D(y,I,B,K)})}return j=j?j.then(N,N):N()}})}function x(z,L,D){var j=h;return function(F,y){if(j===g)throw Error("Generator is already running");if(j===p){if(F==="throw")throw y;return{value:e,done:!0}}for(D.method=F,D.arg=y;;){var I=D.delegate;if(I){var N=M(I,D);if(N){if(N===m)continue;return N}}if(D.method==="next")D.sent=D._sent=D.arg;else if(D.method==="throw"){if(j===h)throw j=p,D.arg;D.dispatchException(D.arg)}else D.method==="return"&&D.abrupt("return",D.arg);j=g;var B=d(z,L,D);if(B.type==="normal"){if(j=D.done?p:f,B.arg===m)continue;return{value:B.arg,done:D.done}}B.type==="throw"&&(j=p,D.method="throw",D.arg=B.arg)}}}function M(z,L){var D=L.method,j=z.iterator[D];if(j===e)return L.delegate=null,D==="throw"&&z.iterator.return&&(L.method="return",L.arg=e,M(z,L),L.method==="throw")||D!=="return"&&(L.method="throw",L.arg=new TypeError("The iterator does not provide a '"+D+"' method")),m;var F=d(j,z.iterator,L.arg);if(F.type==="throw")return L.method="throw",L.arg=F.arg,L.delegate=null,m;var y=F.arg;return y?y.done?(L[z.resultName]=y.value,L.next=z.nextLoc,L.method!=="return"&&(L.method="next",L.arg=e),L.delegate=null,m):y:(L.method="throw",L.arg=new TypeError("iterator result is not an object"),L.delegate=null,m)}function $(z){var L={tryLoc:z[0]};1 in z&&(L.catchLoc=z[1]),2 in z&&(L.finallyLoc=z[2],L.afterLoc=z[3]),this.tryEntries.push(L)}function U(z){var L=z.completion||{};L.type="normal",delete L.arg,z.completion=L}function V(z){this.tryEntries=[{tryLoc:"root"}],z.forEach($,this),this.reset(!0)}function W(z){if(z||z===""){var L=z[a];if(L)return L.call(z);if(typeof z.next=="function")return z;if(!isNaN(z.length)){var D=-1,j=function F(){for(;++D<z.length;)if(r.call(z,D))return F.value=z[D],F.done=!1,F;return F.value=e,F.done=!0,F};return j.next=j}}throw new TypeError(yt(z)+" is not iterable")}return E.prototype=S,i(R,"constructor",{value:S,configurable:!0}),i(S,"constructor",{value:E,configurable:!0}),E.displayName=l(S,c,"GeneratorFunction"),t.isGeneratorFunction=function(z){var L=typeof z=="function"&&z.constructor;return!!L&&(L===E||(L.displayName||L.name)==="GeneratorFunction")},t.mark=function(z){return Object.setPrototypeOf?Object.setPrototypeOf(z,S):(z.__proto__=S,l(z,c,"GeneratorFunction")),z.prototype=Object.create(R),z},t.awrap=function(z){return{__await:z}},A(O.prototype),l(O.prototype,s,function(){return this}),t.AsyncIterator=O,t.async=function(z,L,D,j,F){F===void 0&&(F=Promise);var y=new O(u(z,L,D,j),F);return t.isGeneratorFunction(L)?y:y.next().then(function(I){return I.done?I.value:y.next()})},A(R),l(R,c,"Generator"),l(R,a,function(){return this}),l(R,"toString",function(){return"[object Generator]"}),t.keys=function(z){var L=Object(z),D=[];for(var j in L)D.push(j);return D.reverse(),function F(){for(;D.length;){var y=D.pop();if(y in L)return F.value=y,F.done=!1,F}return F.done=!0,F}},t.values=W,V.prototype={constructor:V,reset:function(L){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(U),!L)for(var D in this)D.charAt(0)==="t"&&r.call(this,D)&&!isNaN(+D.slice(1))&&(this[D]=e)},stop:function(){this.done=!0;var L=this.tryEntries[0].completion;if(L.type==="throw")throw L.arg;return this.rval},dispatchException:function(L){if(this.done)throw L;var D=this;function j(K,X){return I.type="throw",I.arg=L,D.next=K,X&&(D.method="next",D.arg=e),!!X}for(var F=this.tryEntries.length-1;F>=0;--F){var y=this.tryEntries[F],I=y.completion;if(y.tryLoc==="root")return j("end");if(y.tryLoc<=this.prev){var N=r.call(y,"catchLoc"),B=r.call(y,"finallyLoc");if(N&&B){if(this.prev<y.catchLoc)return j(y.catchLoc,!0);if(this.prev<y.finallyLoc)return j(y.finallyLoc)}else if(N){if(this.prev<y.catchLoc)return j(y.catchLoc,!0)}else{if(!B)throw Error("try statement without catch or finally");if(this.prev<y.finallyLoc)return j(y.finallyLoc)}}}},abrupt:function(L,D){for(var j=this.tryEntries.length-1;j>=0;--j){var F=this.tryEntries[j];if(F.tryLoc<=this.prev&&r.call(F,"finallyLoc")&&this.prev<F.finallyLoc){var y=F;break}}y&&(L==="break"||L==="continue")&&y.tryLoc<=D&&D<=y.finallyLoc&&(y=null);var I=y?y.completion:{};return I.type=L,I.arg=D,y?(this.method="next",this.next=y.finallyLoc,m):this.complete(I)},complete:function(L,D){if(L.type==="throw")throw L.arg;return L.type==="break"||L.type==="continue"?this.next=L.arg:L.type==="return"?(this.rval=this.arg=L.arg,this.method="return",this.next="end"):L.type==="normal"&&D&&(this.next=D),m},finish:function(L){for(var D=this.tryEntries.length-1;D>=0;--D){var j=this.tryEntries[D];if(j.finallyLoc===L)return this.complete(j.completion,j.afterLoc),U(j),m}},catch:function(L){for(var D=this.tryEntries.length-1;D>=0;--D){var j=this.tryEntries[D];if(j.tryLoc===L){var F=j.completion;if(F.type==="throw"){var y=F.arg;U(j)}return y}}throw Error("illegal catch attempt")},delegateYield:function(L,D,j){return this.delegate={iterator:W(L),resultName:D,nextLoc:j},this.method==="next"&&(this.arg=e),m}},t}function j5(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(l){return void n(l)}s.done?t(c):Promise.resolve(c).then(r,i)}function nh(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(c){j5(o,r,i,a,s,"next",c)}function s(c){j5(o,r,i,a,s,"throw",c)}a(void 0)})}}var Wg=Y({},ove),zCe=Wg.version,WCe=Wg.render,GCe=Wg.unmountComponentAtNode,jC;try{var KCe=Number((zCe||"").split(".")[0]);KCe>=18&&(jC=Wg.createRoot)}catch{}function H5(e){var t=Wg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;t&&yt(t)==="object"&&(t.usingClientEntryPoint=e)}var YS="__rc_react_root__";function qCe(e,t){H5(!0);var n=t[YS]||jC(t);H5(!1),n.render(e),t[YS]=n}function YCe(e,t){WCe(e,t)}function Qq(e,t){if(jC){qCe(e,t);return}YCe(e,t)}function XCe(e){return kO.apply(this,arguments)}function kO(){return kO=nh(Po().mark(function e(t){return Po().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Promise.resolve().then(function(){var i;(i=t[YS])===null||i===void 0||i.unmount(),delete t[YS]}));case 1:case"end":return r.stop()}},e)})),kO.apply(this,arguments)}function JCe(e){GCe(e)}function QCe(e){return MO.apply(this,arguments)}function MO(){return MO=nh(Po().mark(function e(t){return Po().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(jC===void 0){r.next=2;break}return r.abrupt("return",XCe(t));case 2:JCe(t);case 3:case"end":return r.stop()}},e)})),MO.apply(this,arguments)}const FR=()=>({height:0,opacity:0}),z5=e=>{const{scrollHeight:t}=e;return{height:t,opacity:1}},ZCe=e=>({height:e?e.offsetHeight:0}),UR=(e,t)=>(t==null?void 0:t.deadline)===!0||t.propertyName==="height",ebe=function(){return{motionName:`${arguments.length>0&&arguments[0]!==void 0?arguments[0]:"ant"}-motion-collapse`,onAppearStart:FR,onEnterStart:FR,onAppearActive:z5,onEnterActive:z5,onLeaveStart:ZCe,onLeaveActive:FR,onAppearEnd:UR,onEnterEnd:UR,onLeaveEnd:UR,motionDeadline:500}},Zq=(e,t,n)=>n!==void 0?n:`${e}-${t}`,FO=ebe,HC=function(e){if(!e)return!1;if(e instanceof Element){if(e.offsetParent)return!0;if(e.getBBox){var t=e.getBBox(),n=t.width,r=t.height;if(n||r)return!0}if(e.getBoundingClientRect){var i=e.getBoundingClientRect(),o=i.width,a=i.height;if(o||a)return!0}}return!1},tbe=e=>{const{componentCls:t,colorPrimary:n}=e;return{[t]:{position:"absolute",background:"transparent",pointerEvents:"none",boxSizing:"border-box",color:`var(--wave-color, ${n})`,boxShadow:"0 0 0 0 currentcolor",opacity:.2,"&.wave-motion-appear":{transition:[`box-shadow 0.4s ${e.motionEaseOutCirc}`,`opacity 2s ${e.motionEaseOutCirc}`].join(","),"&-active":{boxShadow:"0 0 0 6px currentcolor",opacity:0},"&.wave-quick":{transition:[`box-shadow ${e.motionDurationSlow} ${e.motionEaseInOut}`,`opacity ${e.motionDurationSlow} ${e.motionEaseInOut}`].join(",")}}}}},nbe=GP("Wave",e=>[tbe(e)]),eY="ant-wave-target";function rbe(e){const t=(e||"").match(/rgba?\((\d*), (\d*), (\d*)(, [\d.]*)?\)/);return t&&t[1]&&t[2]&&t[3]?!(t[1]===t[2]&&t[2]===t[3]):!0}function BR(e){return e&&e!=="#fff"&&e!=="#ffffff"&&e!=="rgb(255, 255, 255)"&&e!=="rgba(255, 255, 255, 1)"&&rbe(e)&&!/rgba\((?:\d*, ){3}0\)/.test(e)&&e!=="transparent"}function ibe(e){const{borderTopColor:t,borderColor:n,backgroundColor:r}=getComputedStyle(e);return BR(t)?t:BR(n)?n:BR(r)?r:null}function $R(e){return Number.isNaN(e)?0:e}const obe=e=>{const{className:t,target:n,component:r}=e,i=v.useRef(null),[o,a]=v.useState(null),[s,c]=v.useState([]),[l,u]=v.useState(0),[d,h]=v.useState(0),[f,g]=v.useState(0),[p,m]=v.useState(0),[_,E]=v.useState(!1),S={left:l,top:d,width:f,height:p,borderRadius:s.map(T=>`${T}px`).join(" ")};o&&(S["--wave-color"]=o);function C(){const T=getComputedStyle(n);a(ibe(n));const R=T.position==="static",{borderLeftWidth:A,borderTopWidth:O}=T;u(R?n.offsetLeft:$R(-parseFloat(A))),h(R?n.offsetTop:$R(-parseFloat(O))),g(n.offsetWidth),m(n.offsetHeight);const{borderTopLeftRadius:x,borderTopRightRadius:M,borderBottomLeftRadius:$,borderBottomRightRadius:U}=T;c([x,M,U,$].map(V=>$R(parseFloat(V))))}if(v.useEffect(()=>{if(n){const T=sr(()=>{C(),E(!0)});let R;return typeof ResizeObserver<"u"&&(R=new ResizeObserver(C),R.observe(n)),()=>{sr.cancel(T),R==null||R.disconnect()}}},[]),!_)return null;const b=(r==="Checkbox"||r==="Radio")&&(n==null?void 0:n.classList.contains(eY));return v.createElement(eh,{visible:!0,motionAppear:!0,motionName:"wave-motion",motionDeadline:5e3,onAppearEnd:(T,R)=>{var A;if(R.deadline||R.propertyName==="opacity"){const O=(A=i.current)===null||A===void 0?void 0:A.parentElement;QCe(O).then(()=>{O==null||O.remove()})}return!1}},(T,R)=>{let{className:A}=T;return v.createElement("div",{ref:gs(i,R),className:de(t,{"wave-quick":b},A),style:S})})},abe=(e,t)=>{var n;const{component:r}=t;if(r==="Checkbox"&&!(!((n=e.querySelector("input"))===null||n===void 0)&&n.checked))return;const i=document.createElement("div");i.style.position="absolute",i.style.left="0px",i.style.top="0px",e==null||e.insertBefore(i,e==null?void 0:e.firstChild),Qq(v.createElement(obe,Object.assign({},t,{target:e})),i)},sbe=abe,cbe=(e,t,n)=>{const{wave:r}=v.useContext(en),[,i,o]=Eo(),a=Pi(l=>{const u=e.current;if(r!=null&&r.disabled||!u)return;const d=u.querySelector(`.${eY}`)||u,{showEffect:h}=r||{};(h||sbe)(d,{className:t,token:i,component:n,event:l,hashId:o})}),s=v.useRef();return l=>{sr.cancel(s.current),s.current=sr(()=>{a(l)})}},lbe=cbe,ube=e=>{const{children:t,disabled:n,component:r}=e,{getPrefixCls:i}=v.useContext(en),o=v.useRef(null),a=i("wave"),[,s]=nbe(a),c=lbe(o,de(a,s),r);if(le.useEffect(()=>{const u=o.current;if(!u||u.nodeType!==1||n)return;const d=h=>{!HC(h.target)||!u.getAttribute||u.getAttribute("disabled")||u.disabled||u.className.includes("disabled")||u.className.includes("-leave")||c(h)};return u.addEventListener("click",d,!0),()=>{u.removeEventListener("click",d,!0)}},[n]),!le.isValidElement(t))return t??null;const l=Ip(t)?gs(t.ref,o):o;return ls(t,{ref:l})},dbe=ube,hbe=e=>{const t=le.useContext(zg);return le.useMemo(()=>e?typeof e=="string"?e??t:e instanceof Function?e(t):t:t,[e,t])},yl=hbe;globalThis&&globalThis.__rest;const tY=v.createContext(null),zC=(e,t)=>{const n=v.useContext(tY),r=v.useMemo(()=>{if(!n)return"";const{compactDirection:i,isFirstItem:o,isLastItem:a}=n,s=i==="vertical"?"-vertical-":"-";return de(`${e}-compact${s}item`,{[`${e}-compact${s}first-item`]:o,[`${e}-compact${s}last-item`]:a,[`${e}-compact${s}item-rtl`]:t==="rtl"})},[e,t,n]);return{compactSize:n==null?void 0:n.compactSize,compactDirection:n==null?void 0:n.compactDirection,compactItemClassnames:r}},nY=e=>{let{children:t}=e;return v.createElement(tY.Provider,{value:null},t)};var fbe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const rY=v.createContext(void 0),pbe=e=>{const{getPrefixCls:t,direction:n}=v.useContext(en),{prefixCls:r,size:i,className:o}=e,a=fbe(e,["prefixCls","size","className"]),s=t("btn-group",r),[,,c]=Eo();let l="";switch(i){case"large":l="lg";break;case"small":l="sm";break}const u=de(s,{[`${s}-${l}`]:l,[`${s}-rtl`]:n==="rtl"},o,c);return v.createElement(rY.Provider,{value:i},v.createElement("div",Object.assign({},a,{className:u})))},mbe=pbe,W5=/^[\u4e00-\u9fa5]{2}$/,UO=W5.test.bind(W5);function G5(e){return typeof e=="string"}function VR(e){return e==="text"||e==="link"}function gbe(e,t){if(e==null)return;const n=t?" ":"";return typeof e!="string"&&typeof e!="number"&&G5(e.type)&&UO(e.props.children)?ls(e,{children:e.props.children.split("").join(n)}):G5(e)?UO(e)?le.createElement("span",null,e.split("").join(n)):le.createElement("span",null,e):Gq(e)?le.createElement("span",null,e):e}function vbe(e,t){let n=!1;const r=[];return le.Children.forEach(e,i=>{const o=typeof i,a=o==="string"||o==="number";if(n&&a){const s=r.length-1,c=r[s];r[s]=`${c}${i}`}else r.push(i);n=a}),le.Children.map(r,i=>gbe(i,t))}const Ebe=v.forwardRef((e,t)=>{const{className:n,style:r,children:i,prefixCls:o}=e,a=de(`${o}-icon`,n);return le.createElement("span",{ref:t,className:a,style:r},i)}),iY=Ebe,K5=v.forwardRef((e,t)=>{const{prefixCls:n,className:r,style:i,iconClassName:o}=e,a=de(`${n}-loading-icon`,r);return le.createElement(iY,{prefixCls:n,className:a,style:i,ref:t},le.createElement(VC,{className:o}))}),jR=()=>({width:0,opacity:0,transform:"scale(0)"}),HR=e=>({width:e.scrollWidth,opacity:1,transform:"scale(1)"}),_be=e=>{const{prefixCls:t,loading:n,existIcon:r,className:i,style:o}=e,a=!!n;return r?le.createElement(K5,{prefixCls:t,className:i,style:o}):le.createElement(eh,{visible:a,motionName:`${t}-loading-icon-motion`,motionLeave:a,removeOnLeave:!0,onAppearStart:jR,onAppearActive:HR,onEnterStart:jR,onEnterActive:HR,onLeaveStart:HR,onLeaveActive:jR},(s,c)=>{let{className:l,style:u}=s;return le.createElement(K5,{prefixCls:t,className:i,style:Object.assign(Object.assign({},o),u),ref:c,iconClassName:l})})},Sbe=_be,q5=(e,t)=>({[`> span, > ${e}`]:{"&:not(:last-child)":{[`&, & > ${e}`]:{"&:not(:disabled)":{borderInlineEndColor:t}}},"&:not(:first-child)":{[`&, & > ${e}`]:{"&:not(:disabled)":{borderInlineStartColor:t}}}}}),ybe=e=>{const{componentCls:t,fontSize:n,lineWidth:r,groupBorderColor:i,colorErrorHover:o}=e;return{[`${t}-group`]:[{position:"relative",display:"inline-flex",[`> span, > ${t}`]:{"&:not(:last-child)":{[`&, & > ${t}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},"&:not(:first-child)":{marginInlineStart:e.calc(r).mul(-1).equal(),[`&, & > ${t}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}},[t]:{position:"relative",zIndex:1,"&:hover,\n          &:focus,\n          &:active":{zIndex:2},"&[disabled]":{zIndex:0}},[`${t}-icon-only`]:{fontSize:n}},q5(`${t}-primary`,i),q5(`${t}-danger`,o)]}},Cbe=ybe,oY=e=>{const{paddingInline:t,onlyIconSize:n,paddingBlock:r}=e;return gr(e,{buttonPaddingHorizontal:t,buttonPaddingVertical:r,buttonIconOnlyFontSize:n})},aY=e=>{var t,n,r,i,o,a;const s=(t=e.contentFontSize)!==null&&t!==void 0?t:e.fontSize,c=(n=e.contentFontSizeSM)!==null&&n!==void 0?n:e.fontSize,l=(r=e.contentFontSizeLG)!==null&&r!==void 0?r:e.fontSizeLG,u=(i=e.contentLineHeight)!==null&&i!==void 0?i:L_(s),d=(o=e.contentLineHeightSM)!==null&&o!==void 0?o:L_(c),h=(a=e.contentLineHeightLG)!==null&&a!==void 0?a:L_(l);return{fontWeight:400,defaultShadow:`0 ${e.controlOutlineWidth}px 0 ${e.controlTmpOutline}`,primaryShadow:`0 ${e.controlOutlineWidth}px 0 ${e.controlOutline}`,dangerShadow:`0 ${e.controlOutlineWidth}px 0 ${e.colorErrorOutline}`,primaryColor:e.colorTextLightSolid,dangerColor:e.colorTextLightSolid,borderColorDisabled:e.colorBorder,defaultGhostColor:e.colorBgContainer,ghostBg:"transparent",defaultGhostBorderColor:e.colorBgContainer,paddingInline:e.paddingContentHorizontal-e.lineWidth,paddingInlineLG:e.paddingContentHorizontal-e.lineWidth,paddingInlineSM:8-e.lineWidth,onlyIconSize:e.fontSizeLG,onlyIconSizeSM:e.fontSizeLG-2,onlyIconSizeLG:e.fontSizeLG+2,groupBorderColor:e.colorPrimaryHover,linkHoverBg:"transparent",textHoverBg:e.colorBgTextHover,defaultColor:e.colorText,defaultBg:e.colorBgContainer,defaultBorderColor:e.colorBorder,defaultBorderColorDisabled:e.colorBorder,defaultHoverBg:e.colorBgContainer,defaultHoverColor:e.colorPrimaryHover,defaultHoverBorderColor:e.colorPrimaryHover,defaultActiveBg:e.colorBgContainer,defaultActiveColor:e.colorPrimaryActive,defaultActiveBorderColor:e.colorPrimaryActive,contentFontSize:s,contentFontSizeSM:c,contentFontSizeLG:l,contentLineHeight:u,contentLineHeightSM:d,contentLineHeightLG:h,paddingBlock:Math.max((e.controlHeight-s*u)/2-e.lineWidth,0),paddingBlockSM:Math.max((e.controlHeightSM-c*d)/2-e.lineWidth,0),paddingBlockLG:Math.max((e.controlHeightLG-l*h)/2-e.lineWidth,0)}},bbe=e=>{const{componentCls:t,iconCls:n,fontWeight:r}=e;return{[t]:{outline:"none",position:"relative",display:"inline-flex",gap:e.marginXS,alignItems:"center",justifyContent:"center",fontWeight:r,whiteSpace:"nowrap",textAlign:"center",backgroundImage:"none",background:"transparent",border:`${ve(e.lineWidth)} ${e.lineType} transparent`,cursor:"pointer",transition:`all ${e.motionDurationMid} ${e.motionEaseInOut}`,userSelect:"none",touchAction:"manipulation",color:e.colorText,"&:disabled > *":{pointerEvents:"none"},"> span":{display:"inline-block"},[`${t}-icon`]:{lineHeight:1},"> a":{color:"currentColor"},"&:not(:disabled)":Object.assign({},WP(e)),[`&${t}-two-chinese-chars::first-letter`]:{letterSpacing:"0.34em"},[`&${t}-two-chinese-chars > *:not(${n})`]:{marginInlineEnd:"-0.34em",letterSpacing:"0.34em"},"&-icon-end":{flexDirection:"row-reverse"}}}},pl=(e,t,n)=>({[`&:not(:disabled):not(${e}-disabled)`]:{"&:hover":t,"&:active":n}}),Tbe=e=>({minWidth:e.controlHeight,paddingInlineStart:0,paddingInlineEnd:0,borderRadius:"50%"}),Rbe=e=>({borderRadius:e.controlHeight,paddingInlineStart:e.calc(e.controlHeight).div(2).equal(),paddingInlineEnd:e.calc(e.controlHeight).div(2).equal()}),wbe=e=>({cursor:"not-allowed",borderColor:e.borderColorDisabled,color:e.colorTextDisabled,background:e.colorBgContainerDisabled,boxShadow:"none"}),hg=(e,t,n,r,i,o,a,s)=>({[`&${e}-background-ghost`]:Object.assign(Object.assign({color:n||void 0,background:t,borderColor:r||void 0,boxShadow:"none"},pl(e,Object.assign({background:t},a),Object.assign({background:t},s))),{"&:disabled":{cursor:"not-allowed",color:i||void 0,borderColor:o||void 0}})}),XP=e=>({[`&:disabled, &${e.componentCls}-disabled`]:Object.assign({},wbe(e))}),sY=e=>Object.assign({},XP(e)),XS=e=>({[`&:disabled, &${e.componentCls}-disabled`]:{cursor:"not-allowed",color:e.colorTextDisabled}}),cY=e=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},sY(e)),{background:e.defaultBg,borderColor:e.defaultBorderColor,color:e.defaultColor,boxShadow:e.defaultShadow}),pl(e.componentCls,{color:e.defaultHoverColor,borderColor:e.defaultHoverBorderColor,background:e.defaultHoverBg},{color:e.defaultActiveColor,borderColor:e.defaultActiveBorderColor,background:e.defaultActiveBg})),hg(e.componentCls,e.ghostBg,e.defaultGhostColor,e.defaultGhostBorderColor,e.colorTextDisabled,e.colorBorder)),{[`&${e.componentCls}-dangerous`]:Object.assign(Object.assign(Object.assign({color:e.colorError,borderColor:e.colorError},pl(e.componentCls,{color:e.colorErrorHover,borderColor:e.colorErrorBorderHover},{color:e.colorErrorActive,borderColor:e.colorErrorActive})),hg(e.componentCls,e.ghostBg,e.colorError,e.colorError,e.colorTextDisabled,e.colorBorder)),XP(e))}),Ibe=e=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},sY(e)),{color:e.primaryColor,background:e.colorPrimary,boxShadow:e.primaryShadow}),pl(e.componentCls,{color:e.colorTextLightSolid,background:e.colorPrimaryHover},{color:e.colorTextLightSolid,background:e.colorPrimaryActive})),hg(e.componentCls,e.ghostBg,e.colorPrimary,e.colorPrimary,e.colorTextDisabled,e.colorBorder,{color:e.colorPrimaryHover,borderColor:e.colorPrimaryHover},{color:e.colorPrimaryActive,borderColor:e.colorPrimaryActive})),{[`&${e.componentCls}-dangerous`]:Object.assign(Object.assign(Object.assign({background:e.colorError,boxShadow:e.dangerShadow,color:e.dangerColor},pl(e.componentCls,{background:e.colorErrorHover},{background:e.colorErrorActive})),hg(e.componentCls,e.ghostBg,e.colorError,e.colorError,e.colorTextDisabled,e.colorBorder,{color:e.colorErrorHover,borderColor:e.colorErrorHover},{color:e.colorErrorActive,borderColor:e.colorErrorActive})),XP(e))}),Abe=e=>Object.assign(Object.assign({},cY(e)),{borderStyle:"dashed"}),Obe=e=>Object.assign(Object.assign(Object.assign({color:e.colorLink},pl(e.componentCls,{color:e.colorLinkHover,background:e.linkHoverBg},{color:e.colorLinkActive})),XS(e)),{[`&${e.componentCls}-dangerous`]:Object.assign(Object.assign({color:e.colorError},pl(e.componentCls,{color:e.colorErrorHover},{color:e.colorErrorActive})),XS(e))}),xbe=e=>Object.assign(Object.assign(Object.assign({},pl(e.componentCls,{color:e.colorText,background:e.textHoverBg},{color:e.colorText,background:e.colorBgTextActive})),XS(e)),{[`&${e.componentCls}-dangerous`]:Object.assign(Object.assign({color:e.colorError},XS(e)),pl(e.componentCls,{color:e.colorErrorHover,background:e.colorErrorBg},{color:e.colorErrorHover,background:e.colorErrorBgActive}))}),Nbe=e=>{const{componentCls:t}=e;return{[`${t}-default`]:cY(e),[`${t}-primary`]:Ibe(e),[`${t}-dashed`]:Abe(e),[`${t}-link`]:Obe(e),[`${t}-text`]:xbe(e),[`${t}-ghost`]:hg(e.componentCls,e.ghostBg,e.colorBgContainer,e.colorBgContainer,e.colorTextDisabled,e.colorBorder)}},JP=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const{componentCls:n,controlHeight:r,fontSize:i,lineHeight:o,borderRadius:a,buttonPaddingHorizontal:s,iconCls:c,buttonPaddingVertical:l}=e,u=`${n}-icon-only`;return[{[`${t}`]:{fontSize:i,lineHeight:o,height:r,padding:`${ve(l)} ${ve(s)}`,borderRadius:a,[`&${u}`]:{width:r,paddingInline:0,[`&${n}-compact-item`]:{flex:"none"},[`&${n}-round`]:{width:"auto"},[c]:{fontSize:e.buttonIconOnlyFontSize}},[`&${n}-loading`]:{opacity:e.opacityLoading,cursor:"default"},[`${n}-loading-icon`]:{transition:`width ${e.motionDurationSlow} ${e.motionEaseInOut}, opacity ${e.motionDurationSlow} ${e.motionEaseInOut}`}}},{[`${n}${n}-circle${t}`]:Tbe(e)},{[`${n}${n}-round${t}`]:Rbe(e)}]},Pbe=e=>{const t=gr(e,{fontSize:e.contentFontSize,lineHeight:e.contentLineHeight});return JP(t,e.componentCls)},Dbe=e=>{const t=gr(e,{controlHeight:e.controlHeightSM,fontSize:e.contentFontSizeSM,lineHeight:e.contentLineHeightSM,padding:e.paddingXS,buttonPaddingHorizontal:e.paddingInlineSM,buttonPaddingVertical:e.paddingBlockSM,borderRadius:e.borderRadiusSM,buttonIconOnlyFontSize:e.onlyIconSizeSM});return JP(t,`${e.componentCls}-sm`)},Lbe=e=>{const t=gr(e,{controlHeight:e.controlHeightLG,fontSize:e.contentFontSizeLG,lineHeight:e.contentLineHeightLG,buttonPaddingHorizontal:e.paddingInlineLG,buttonPaddingVertical:e.paddingBlockLG,borderRadius:e.borderRadiusLG,buttonIconOnlyFontSize:e.onlyIconSizeLG});return JP(t,`${e.componentCls}-lg`)},kbe=e=>{const{componentCls:t}=e;return{[t]:{[`&${t}-block`]:{width:"100%"}}}},Mbe=yo("Button",e=>{const t=oY(e);return[bbe(t),Pbe(t),Dbe(t),Lbe(t),kbe(t),Nbe(t),Cbe(t)]},aY,{unitless:{fontWeight:!0,contentLineHeight:!0,contentLineHeightSM:!0,contentLineHeightLG:!0}});function Fbe(e,t,n){const{focusElCls:r,focus:i,borderElCls:o}=n,a=o?"> *":"",s=["hover",i?"focus":null,"active"].filter(Boolean).map(c=>`&:${c} ${a}`).join(",");return{[`&-item:not(${t}-last-item)`]:{marginInlineEnd:e.calc(e.lineWidth).mul(-1).equal()},"&-item":Object.assign(Object.assign({[s]:{zIndex:2}},r?{[`&${r}`]:{zIndex:2}}:{}),{[`&[disabled] ${a}`]:{zIndex:0}})}}function Ube(e,t,n){const{borderElCls:r}=n,i=r?`> ${r}`:"";return{[`&-item:not(${t}-first-item):not(${t}-last-item) ${i}`]:{borderRadius:0},[`&-item:not(${t}-last-item)${t}-first-item`]:{[`& ${i}, &${e}-sm ${i}, &${e}-lg ${i}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&-item:not(${t}-first-item)${t}-last-item`]:{[`& ${i}, &${e}-sm ${i}, &${e}-lg ${i}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}}}function QP(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{focus:!0};const{componentCls:n}=e,r=`${n}-compact`;return{[r]:Object.assign(Object.assign({},Fbe(e,r,t)),Ube(n,r,t))}}function Bbe(e,t){return{[`&-item:not(${t}-last-item)`]:{marginBottom:e.calc(e.lineWidth).mul(-1).equal()},"&-item":{"&:hover,&:focus,&:active":{zIndex:2},"&[disabled]":{zIndex:0}}}}function $be(e,t){return{[`&-item:not(${t}-first-item):not(${t}-last-item)`]:{borderRadius:0},[`&-item${t}-first-item:not(${t}-last-item)`]:{[`&, &${e}-sm, &${e}-lg`]:{borderEndEndRadius:0,borderEndStartRadius:0}},[`&-item${t}-last-item:not(${t}-first-item)`]:{[`&, &${e}-sm, &${e}-lg`]:{borderStartStartRadius:0,borderStartEndRadius:0}}}}function Vbe(e){const t=`${e.componentCls}-compact-vertical`;return{[t]:Object.assign(Object.assign({},Bbe(e,t)),$be(e.componentCls,t))}}const jbe=e=>{const{componentCls:t,calc:n}=e;return{[t]:{[`&-compact-item${t}-primary`]:{[`&:not([disabled]) + ${t}-compact-item${t}-primary:not([disabled])`]:{position:"relative","&:before":{position:"absolute",top:n(e.lineWidth).mul(-1).equal(),insetInlineStart:n(e.lineWidth).mul(-1).equal(),display:"inline-block",width:e.lineWidth,height:`calc(100% + ${ve(e.lineWidth)} * 2)`,backgroundColor:e.colorPrimaryHover,content:'""'}}},"&-compact-vertical-item":{[`&${t}-primary`]:{[`&:not([disabled]) + ${t}-compact-vertical-item${t}-primary:not([disabled])`]:{position:"relative","&:before":{position:"absolute",top:n(e.lineWidth).mul(-1).equal(),insetInlineStart:n(e.lineWidth).mul(-1).equal(),display:"inline-block",width:`calc(100% + ${ve(e.lineWidth)} * 2)`,height:e.lineWidth,backgroundColor:e.colorPrimaryHover,content:'""'}}}}}}},Hbe=FC(["Button","compact"],e=>{const t=oY(e);return[QP(t),Vbe(t),jbe(t)]},aY);var zbe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Wbe(e){if(typeof e=="object"&&e){let t=e==null?void 0:e.delay;return t=!Number.isNaN(t)&&typeof t=="number"?t:0,{loading:t<=0,delay:t}}return{loading:!!e,delay:0}}const Gbe=le.forwardRef((e,t)=>{var n,r,i;const{loading:o=!1,prefixCls:a,type:s,danger:c=!1,shape:l="default",size:u,styles:d,disabled:h,className:f,rootClassName:g,children:p,icon:m,iconPosition:_="start",ghost:E=!1,block:S=!1,htmlType:C="button",classNames:b,style:T={},autoInsertSpace:R}=e,A=zbe(e,["loading","prefixCls","type","danger","shape","size","styles","disabled","className","rootClassName","children","icon","iconPosition","ghost","block","htmlType","classNames","style","autoInsertSpace"]),O=s||"default",{getPrefixCls:x,direction:M,button:$}=v.useContext(en),U=(n=R??($==null?void 0:$.autoInsertSpace))!==null&&n!==void 0?n:!0,V=x("btn",a),[W,z,L]=Mbe(V),D=v.useContext(Op),j=h??D,F=v.useContext(rY),y=v.useMemo(()=>Wbe(o),[o]),[I,N]=v.useState(y.loading),[B,K]=v.useState(!1),ee=gs(t,v.createRef()),ne=v.Children.count(p)===1&&!m&&!VR(O);v.useEffect(()=>{let xe=null;y.delay>0?xe=setTimeout(()=>{xe=null,N(!0)},y.delay):N(y.loading);function We(){xe&&(clearTimeout(xe),xe=null)}return We},[y]),v.useEffect(()=>{if(!ee||!ee.current||!U)return;const xe=ee.current.textContent;ne&&UO(xe)?B||K(!0):B&&K(!1)},[ee]);const fe=xe=>{const{onClick:We}=e;if(I||j){xe.preventDefault();return}We==null||We(xe)},{compactSize:ae,compactItemClassnames:oe}=zC(V,M),he={large:"lg",small:"sm",middle:void 0},me=yl(xe=>{var We,Ve;return(Ve=(We=u??ae)!==null&&We!==void 0?We:F)!==null&&Ve!==void 0?Ve:xe}),ie=me&&he[me]||"",te=I?"loading":m,ge=So(A,["navigate"]),pe=de(V,z,L,{[`${V}-${l}`]:l!=="default"&&l,[`${V}-${O}`]:O,[`${V}-${ie}`]:ie,[`${V}-icon-only`]:!p&&p!==0&&!!te,[`${V}-background-ghost`]:E&&!VR(O),[`${V}-loading`]:I,[`${V}-two-chinese-chars`]:B&&U&&!I,[`${V}-block`]:S,[`${V}-dangerous`]:c,[`${V}-rtl`]:M==="rtl",[`${V}-icon-end`]:_==="end"},oe,f,g,$==null?void 0:$.className),be=Object.assign(Object.assign({},$==null?void 0:$.style),T),Se=de(b==null?void 0:b.icon,(r=$==null?void 0:$.classNames)===null||r===void 0?void 0:r.icon),ue=Object.assign(Object.assign({},(d==null?void 0:d.icon)||{}),((i=$==null?void 0:$.styles)===null||i===void 0?void 0:i.icon)||{}),re=m&&!I?le.createElement(iY,{prefixCls:V,className:Se,style:ue},m):le.createElement(Sbe,{existIcon:!!m,prefixCls:V,loading:I}),Re=p||p===0?vbe(p,ne&&U):null;if(ge.href!==void 0)return W(le.createElement("a",Object.assign({},ge,{className:de(pe,{[`${V}-disabled`]:j}),href:j?void 0:ge.href,style:be,onClick:fe,ref:ee,tabIndex:j?-1:0}),re,Re));let we=le.createElement("button",Object.assign({},A,{type:C,className:pe,style:be,onClick:fe,disabled:j,ref:ee}),re,Re,!!oe&&le.createElement(Hbe,{key:"compact",prefixCls:V}));return VR(O)||(we=le.createElement(dbe,{component:"Button",disabled:I},we)),W(we)}),ZP=Gbe;ZP.Group=mbe;ZP.__ANT_BUTTON=!0;const fi=ZP;var lY=v.createContext(null),Y5=[];function Kbe(e,t){var n=v.useState(function(){if(!No())return null;var g=document.createElement("div");return g}),r=ce(n,1),i=r[0],o=v.useRef(!1),a=v.useContext(lY),s=v.useState(Y5),c=ce(s,2),l=c[0],u=c[1],d=a||(o.current?void 0:function(g){u(function(p){var m=[g].concat(Me(p));return m})});function h(){i.parentElement||document.body.appendChild(i),o.current=!0}function f(){var g;(g=i.parentElement)===null||g===void 0||g.removeChild(i),o.current=!1}return Mn(function(){return e?a?a(h):h():f(),f},[e]),Mn(function(){l.length&&(l.forEach(function(g){return g()}),u(Y5))},[l]),[i,d]}function qbe(e){var t="rc-scrollbar-measure-".concat(Math.random().toString(36).substring(7)),n=document.createElement("div");n.id=t;var r=n.style;r.position="absolute",r.left="0",r.top="0",r.width="100px",r.height="100px",r.overflow="scroll";var i,o;if(e){var a=getComputedStyle(e);r.scrollbarColor=a.scrollbarColor,r.scrollbarWidth=a.scrollbarWidth;var s=getComputedStyle(e,"::-webkit-scrollbar"),c=parseInt(s.width,10),l=parseInt(s.height,10);try{var u=c?"width: ".concat(s.width,";"):"",d=l?"height: ".concat(s.height,";"):"";cl(`
#`.concat(t,`::-webkit-scrollbar {
`).concat(u,`
`).concat(d,`
}`),t)}catch(g){console.error(g),i=c,o=l}}document.body.appendChild(n);var h=e&&i&&!isNaN(i)?i:n.offsetWidth-n.clientWidth,f=e&&o&&!isNaN(o)?o:n.offsetHeight-n.clientHeight;return document.body.removeChild(n),sg(t),{width:h,height:f}}function Ybe(e){return typeof document>"u"||!e||!(e instanceof Element)?{width:0,height:0}:qbe(e)}function Xbe(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth}var Jbe="rc-util-locker-".concat(Date.now()),X5=0;function Qbe(e){var t=!!e,n=v.useState(function(){return X5+=1,"".concat(Jbe,"_").concat(X5)}),r=ce(n,1),i=r[0];Mn(function(){if(t){var o=Ybe(document.body).width,a=Xbe();cl(`
html body {
  overflow-y: hidden;
  `.concat(a?"width: calc(100% - ".concat(o,"px);"):"",`
}`),i)}else sg(i);return function(){sg(i)}},[t,i])}var J5=!1;function Zbe(e){return typeof e=="boolean"&&(J5=e),J5}var Q5=function(t){return t===!1?!1:!No()||!t?null:typeof t=="string"?document.querySelector(t):typeof t=="function"?t():t},uY=v.forwardRef(function(e,t){var n=e.open,r=e.autoLock,i=e.getContainer;e.debug;var o=e.autoDestroy,a=o===void 0?!0:o,s=e.children,c=v.useState(n),l=ce(c,2),u=l[0],d=l[1],h=u||n;v.useEffect(function(){(a||n)&&d(n)},[n,a]);var f=v.useState(function(){return Q5(i)}),g=ce(f,2),p=g[0],m=g[1];v.useEffect(function(){var M=Q5(i);m(M??null)});var _=Kbe(h&&!p),E=ce(_,2),S=E[0],C=E[1],b=p??S;Qbe(r&&n&&No()&&(b===S||b===document.body));var T=null;if(s&&Ip(s)&&t){var R=s;T=R.ref}var A=Hg(T,t);if(!h||!No()||p===void 0)return null;var O=b===!1||Zbe(),x=s;return t&&(x=v.cloneElement(s,{ref:A})),v.createElement(lY.Provider,{value:C},O?x:Oc.createPortal(x,b))});function e1e(){var e=Y({},Rd);return e.useId}var Z5=0,e6=e1e();const t1e=e6?function(t){var n=e6();return t||n}:function(t){var n=v.useState("ssr-id"),r=ce(n,2),i=r[0],o=r[1];return v.useEffect(function(){var a=Z5;Z5+=1,o("rc_unique_".concat(a))},[]),t||i};var dY=function(t){if(No()&&window.document.documentElement){var n=Array.isArray(t)?t:[t],r=window.document.documentElement;return n.some(function(i){return i in r.style})}return!1},n1e=function(t,n){if(!dY(t))return!1;var r=document.createElement("div"),i=r.style[t];return r.style[t]=n,r.style[t]!==i};function t6(e,t){return!Array.isArray(e)&&t!==void 0?n1e(e,t):dY(e)}var pd="RC_FORM_INTERNAL_HOOKS",or=function(){mo(!1,"Can not find FormContext. Please make sure you wrap Field under Form.")},$d=v.createContext({getFieldValue:or,getFieldsValue:or,getFieldError:or,getFieldWarning:or,getFieldsError:or,isFieldsTouched:or,isFieldTouched:or,isFieldValidating:or,isFieldsValidating:or,resetFields:or,setFields:or,setFieldValue:or,setFieldsValue:or,validateFields:or,submit:or,getInternalHooks:function(){return or(),{dispatch:or,initEntityValue:or,registerField:or,useSubscribe:or,setInitialValues:or,destroyForm:or,setCallbacks:or,registerWatch:or,getFields:or,setValidateMessages:or,setPreserve:or,getInitialValue:or}}}),fg=v.createContext(null);function BO(e){return e==null?[]:Array.isArray(e)?e:[e]}function r1e(e){return e&&!!e._init}function $O(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var t=JSON.parse(JSON.stringify(this));return t.clone=this.clone,t}}}var VO=$O();function i1e(e){try{return Function.toString.call(e).indexOf("[native code]")!==-1}catch{return typeof e=="function"}}function o1e(e,t,n){if(OC())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,t);var i=new(e.bind.apply(e,r));return n&&og(i,n.prototype),i}function jO(e){var t=typeof Map=="function"?new Map:void 0;return jO=function(r){if(r===null||!i1e(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(t!==void 0){if(t.has(r))return t.get(r);t.set(r,i)}function i(){return o1e(r,arguments,Md(this).constructor)}return i.prototype=Object.create(r.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),og(i,r)},jO(e)}var a1e=/%[sdj%]/g,s1e=function(){};typeof process<"u"&&process.env;function HO(e){if(!e||!e.length)return null;var t={};return e.forEach(function(n){var r=n.field;t[r]=t[r]||[],t[r].push(n)}),t}function _a(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=0,o=n.length;if(typeof e=="function")return e.apply(null,n);if(typeof e=="string"){var a=e.replace(a1e,function(s){if(s==="%%")return"%";if(i>=o)return s;switch(s){case"%s":return String(n[i++]);case"%d":return Number(n[i++]);case"%j":try{return JSON.stringify(n[i++])}catch{return"[Circular]"}break;default:return s}});return a}return e}function c1e(e){return e==="string"||e==="url"||e==="hex"||e==="email"||e==="date"||e==="pattern"}function Ri(e,t){return!!(e==null||t==="array"&&Array.isArray(e)&&!e.length||c1e(t)&&typeof e=="string"&&!e)}function l1e(e,t,n){var r=[],i=0,o=e.length;function a(s){r.push.apply(r,Me(s||[])),i++,i===o&&n(r)}e.forEach(function(s){t(s,a)})}function n6(e,t,n){var r=0,i=e.length;function o(a){if(a&&a.length){n(a);return}var s=r;r=r+1,s<i?t(e[s],o):n([])}o([])}function u1e(e){var t=[];return Object.keys(e).forEach(function(n){t.push.apply(t,Me(e[n]||[]))}),t}var r6=function(e){_l(n,e);var t=Zd(n);function n(r,i){var o;return Ui(this,n),o=t.call(this,"Async Validation Error"),J(Cn(o),"errors",void 0),J(Cn(o),"fields",void 0),o.errors=r,o.fields=i,o}return Bi(n)}(jO(Error));function d1e(e,t,n,r,i){if(t.first){var o=new Promise(function(h,f){var g=function(_){return r(_),_.length?f(new r6(_,HO(_))):h(i)},p=u1e(e);n6(p,n,g)});return o.catch(function(h){return h}),o}var a=t.firstFields===!0?Object.keys(e):t.firstFields||[],s=Object.keys(e),c=s.length,l=0,u=[],d=new Promise(function(h,f){var g=function(m){if(u.push.apply(u,m),l++,l===c)return r(u),u.length?f(new r6(u,HO(u))):h(i)};s.length||(r(u),h(i)),s.forEach(function(p){var m=e[p];a.indexOf(p)!==-1?n6(m,n,g):l1e(m,n,g)})});return d.catch(function(h){return h}),d}function h1e(e){return!!(e&&e.message!==void 0)}function f1e(e,t){for(var n=e,r=0;r<t.length;r++){if(n==null)return n;n=n[t[r]]}return n}function i6(e,t){return function(n){var r;return e.fullFields?r=f1e(t,e.fullFields):r=t[n.field||e.fullField],h1e(n)?(n.field=n.field||e.fullField,n.fieldValue=r,n):{message:typeof n=="function"?n():n,fieldValue:r,field:n.field||e.fullField}}}function o6(e,t){if(t){for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];yt(r)==="object"&&yt(e[n])==="object"?e[n]=Y(Y({},e[n]),r):e[n]=r}}return e}var Oh="enum",p1e=function(t,n,r,i,o){t[Oh]=Array.isArray(t[Oh])?t[Oh]:[],t[Oh].indexOf(n)===-1&&i.push(_a(o.messages[Oh],t.fullField,t[Oh].join(", ")))},m1e=function(t,n,r,i,o){if(t.pattern){if(t.pattern instanceof RegExp)t.pattern.lastIndex=0,t.pattern.test(n)||i.push(_a(o.messages.pattern.mismatch,t.fullField,n,t.pattern));else if(typeof t.pattern=="string"){var a=new RegExp(t.pattern);a.test(n)||i.push(_a(o.messages.pattern.mismatch,t.fullField,n,t.pattern))}}},g1e=function(t,n,r,i,o){var a=typeof t.len=="number",s=typeof t.min=="number",c=typeof t.max=="number",l=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,u=n,d=null,h=typeof n=="number",f=typeof n=="string",g=Array.isArray(n);if(h?d="number":f?d="string":g&&(d="array"),!d)return!1;g&&(u=n.length),f&&(u=n.replace(l,"_").length),a?u!==t.len&&i.push(_a(o.messages[d].len,t.fullField,t.len)):s&&!c&&u<t.min?i.push(_a(o.messages[d].min,t.fullField,t.min)):c&&!s&&u>t.max?i.push(_a(o.messages[d].max,t.fullField,t.max)):s&&c&&(u<t.min||u>t.max)&&i.push(_a(o.messages[d].range,t.fullField,t.min,t.max))},hY=function(t,n,r,i,o,a){t.required&&(!r.hasOwnProperty(t.field)||Ri(n,a||t.type))&&i.push(_a(o.messages.required,t.fullField))},OE;const v1e=function(){if(OE)return OE;var e="[a-fA-F\\d:]",t=function(T){return T&&T.includeBoundaries?"(?:(?<=\\s|^)(?=".concat(e,")|(?<=").concat(e,")(?=\\s|$))"):""},n="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",r="[a-fA-F\\d]{1,4}",i=["(?:".concat(r,":){7}(?:").concat(r,"|:)"),"(?:".concat(r,":){6}(?:").concat(n,"|:").concat(r,"|:)"),"(?:".concat(r,":){5}(?::").concat(n,"|(?::").concat(r,"){1,2}|:)"),"(?:".concat(r,":){4}(?:(?::").concat(r,"){0,1}:").concat(n,"|(?::").concat(r,"){1,3}|:)"),"(?:".concat(r,":){3}(?:(?::").concat(r,"){0,2}:").concat(n,"|(?::").concat(r,"){1,4}|:)"),"(?:".concat(r,":){2}(?:(?::").concat(r,"){0,3}:").concat(n,"|(?::").concat(r,"){1,5}|:)"),"(?:".concat(r,":){1}(?:(?::").concat(r,"){0,4}:").concat(n,"|(?::").concat(r,"){1,6}|:)"),"(?::(?:(?::".concat(r,"){0,5}:").concat(n,"|(?::").concat(r,"){1,7}|:))")],o="(?:%[0-9a-zA-Z]{1,})?",a="(?:".concat(i.join("|"),")").concat(o),s=new RegExp("(?:^".concat(n,"$)|(?:^").concat(a,"$)")),c=new RegExp("^".concat(n,"$")),l=new RegExp("^".concat(a,"$")),u=function(T){return T&&T.exact?s:new RegExp("(?:".concat(t(T)).concat(n).concat(t(T),")|(?:").concat(t(T)).concat(a).concat(t(T),")"),"g")};u.v4=function(b){return b&&b.exact?c:new RegExp("".concat(t(b)).concat(n).concat(t(b)),"g")},u.v6=function(b){return b&&b.exact?l:new RegExp("".concat(t(b)).concat(a).concat(t(b)),"g")};var d="(?:(?:[a-z]+:)?//)",h="(?:\\S+(?::\\S*)?@)?",f=u.v4().source,g=u.v6().source,p="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",m="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",_="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",E="(?::\\d{2,5})?",S='(?:[/?#][^\\s"]*)?',C="(?:".concat(d,"|www\\.)").concat(h,"(?:localhost|").concat(f,"|").concat(g,"|").concat(p).concat(m).concat(_,")").concat(E).concat(S);return OE=new RegExp("(?:^".concat(C,"$)"),"i"),OE};var a6={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},Lm={integer:function(t){return Lm.number(t)&&parseInt(t,10)===t},float:function(t){return Lm.number(t)&&!Lm.integer(t)},array:function(t){return Array.isArray(t)},regexp:function(t){if(t instanceof RegExp)return!0;try{return!!new RegExp(t)}catch{return!1}},date:function(t){return typeof t.getTime=="function"&&typeof t.getMonth=="function"&&typeof t.getYear=="function"&&!isNaN(t.getTime())},number:function(t){return isNaN(t)?!1:typeof t=="number"},object:function(t){return yt(t)==="object"&&!Lm.array(t)},method:function(t){return typeof t=="function"},email:function(t){return typeof t=="string"&&t.length<=320&&!!t.match(a6.email)},url:function(t){return typeof t=="string"&&t.length<=2048&&!!t.match(v1e())},hex:function(t){return typeof t=="string"&&!!t.match(a6.hex)}},E1e=function(t,n,r,i,o){if(t.required&&n===void 0){hY(t,n,r,i,o);return}var a=["integer","float","array","regexp","object","method","email","number","date","url","hex"],s=t.type;a.indexOf(s)>-1?Lm[s](n)||i.push(_a(o.messages.types[s],t.fullField,t.type)):s&&yt(n)!==t.type&&i.push(_a(o.messages.types[s],t.fullField,t.type))},_1e=function(t,n,r,i,o){(/^\s+$/.test(n)||n==="")&&i.push(_a(o.messages.whitespace,t.fullField))};const vn={required:hY,whitespace:_1e,type:E1e,range:g1e,enum:p1e,pattern:m1e};var S1e=function(t,n,r,i,o){var a=[],s=t.required||!t.required&&i.hasOwnProperty(t.field);if(s){if(Ri(n)&&!t.required)return r();vn.required(t,n,i,a,o)}r(a)},y1e=function(t,n,r,i,o){var a=[],s=t.required||!t.required&&i.hasOwnProperty(t.field);if(s){if(n==null&&!t.required)return r();vn.required(t,n,i,a,o,"array"),n!=null&&(vn.type(t,n,i,a,o),vn.range(t,n,i,a,o))}r(a)},C1e=function(t,n,r,i,o){var a=[],s=t.required||!t.required&&i.hasOwnProperty(t.field);if(s){if(Ri(n)&&!t.required)return r();vn.required(t,n,i,a,o),n!==void 0&&vn.type(t,n,i,a,o)}r(a)},b1e=function(t,n,r,i,o){var a=[],s=t.required||!t.required&&i.hasOwnProperty(t.field);if(s){if(Ri(n,"date")&&!t.required)return r();if(vn.required(t,n,i,a,o),!Ri(n,"date")){var c;n instanceof Date?c=n:c=new Date(n),vn.type(t,c,i,a,o),c&&vn.range(t,c.getTime(),i,a,o)}}r(a)},T1e="enum",R1e=function(t,n,r,i,o){var a=[],s=t.required||!t.required&&i.hasOwnProperty(t.field);if(s){if(Ri(n)&&!t.required)return r();vn.required(t,n,i,a,o),n!==void 0&&vn[T1e](t,n,i,a,o)}r(a)},w1e=function(t,n,r,i,o){var a=[],s=t.required||!t.required&&i.hasOwnProperty(t.field);if(s){if(Ri(n)&&!t.required)return r();vn.required(t,n,i,a,o),n!==void 0&&(vn.type(t,n,i,a,o),vn.range(t,n,i,a,o))}r(a)},I1e=function(t,n,r,i,o){var a=[],s=t.required||!t.required&&i.hasOwnProperty(t.field);if(s){if(Ri(n)&&!t.required)return r();vn.required(t,n,i,a,o),n!==void 0&&(vn.type(t,n,i,a,o),vn.range(t,n,i,a,o))}r(a)},A1e=function(t,n,r,i,o){var a=[],s=t.required||!t.required&&i.hasOwnProperty(t.field);if(s){if(Ri(n)&&!t.required)return r();vn.required(t,n,i,a,o),n!==void 0&&vn.type(t,n,i,a,o)}r(a)},O1e=function(t,n,r,i,o){var a=[],s=t.required||!t.required&&i.hasOwnProperty(t.field);if(s){if(n===""&&(n=void 0),Ri(n)&&!t.required)return r();vn.required(t,n,i,a,o),n!==void 0&&(vn.type(t,n,i,a,o),vn.range(t,n,i,a,o))}r(a)},x1e=function(t,n,r,i,o){var a=[],s=t.required||!t.required&&i.hasOwnProperty(t.field);if(s){if(Ri(n)&&!t.required)return r();vn.required(t,n,i,a,o),n!==void 0&&vn.type(t,n,i,a,o)}r(a)},N1e=function(t,n,r,i,o){var a=[],s=t.required||!t.required&&i.hasOwnProperty(t.field);if(s){if(Ri(n,"string")&&!t.required)return r();vn.required(t,n,i,a,o),Ri(n,"string")||vn.pattern(t,n,i,a,o)}r(a)},P1e=function(t,n,r,i,o){var a=[],s=t.required||!t.required&&i.hasOwnProperty(t.field);if(s){if(Ri(n)&&!t.required)return r();vn.required(t,n,i,a,o),Ri(n)||vn.type(t,n,i,a,o)}r(a)},D1e=function(t,n,r,i,o){var a=[],s=Array.isArray(n)?"array":yt(n);vn.required(t,n,i,a,o,s),r(a)},L1e=function(t,n,r,i,o){var a=[],s=t.required||!t.required&&i.hasOwnProperty(t.field);if(s){if(Ri(n,"string")&&!t.required)return r();vn.required(t,n,i,a,o,"string"),Ri(n,"string")||(vn.type(t,n,i,a,o),vn.range(t,n,i,a,o),vn.pattern(t,n,i,a,o),t.whitespace===!0&&vn.whitespace(t,n,i,a,o))}r(a)},zR=function(t,n,r,i,o){var a=t.type,s=[],c=t.required||!t.required&&i.hasOwnProperty(t.field);if(c){if(Ri(n,a)&&!t.required)return r();vn.required(t,n,i,s,o,a),Ri(n,a)||vn.type(t,n,i,s,o)}r(s)};const u0={string:L1e,method:A1e,number:O1e,boolean:C1e,regexp:P1e,integer:I1e,float:w1e,array:y1e,object:x1e,enum:R1e,pattern:N1e,date:b1e,url:zR,hex:zR,email:zR,required:D1e,any:S1e};var Gg=function(){function e(t){Ui(this,e),J(this,"rules",null),J(this,"_messages",VO),this.define(t)}return Bi(e,[{key:"define",value:function(n){var r=this;if(!n)throw new Error("Cannot configure a schema with no rules");if(yt(n)!=="object"||Array.isArray(n))throw new Error("Rules must be an object");this.rules={},Object.keys(n).forEach(function(i){var o=n[i];r.rules[i]=Array.isArray(o)?o:[o]})}},{key:"messages",value:function(n){return n&&(this._messages=o6($O(),n)),this._messages}},{key:"validate",value:function(n){var r=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){},a=n,s=i,c=o;if(typeof s=="function"&&(c=s,s={}),!this.rules||Object.keys(this.rules).length===0)return c&&c(null,a),Promise.resolve(a);function l(g){var p=[],m={};function _(S){if(Array.isArray(S)){var C;p=(C=p).concat.apply(C,Me(S))}else p.push(S)}for(var E=0;E<g.length;E++)_(g[E]);p.length?(m=HO(p),c(p,m)):c(null,a)}if(s.messages){var u=this.messages();u===VO&&(u=$O()),o6(u,s.messages),s.messages=u}else s.messages=this.messages();var d={},h=s.keys||Object.keys(this.rules);h.forEach(function(g){var p=r.rules[g],m=a[g];p.forEach(function(_){var E=_;typeof E.transform=="function"&&(a===n&&(a=Y({},a)),m=a[g]=E.transform(m),m!=null&&(E.type=E.type||(Array.isArray(m)?"array":yt(m)))),typeof E=="function"?E={validator:E}:E=Y({},E),E.validator=r.getValidationMethod(E),E.validator&&(E.field=g,E.fullField=E.fullField||g,E.type=r.getType(E),d[g]=d[g]||[],d[g].push({rule:E,value:m,source:a,field:g}))})});var f={};return d1e(d,s,function(g,p){var m=g.rule,_=(m.type==="object"||m.type==="array")&&(yt(m.fields)==="object"||yt(m.defaultField)==="object");_=_&&(m.required||!m.required&&g.value),m.field=g.field;function E(R,A){return Y(Y({},A),{},{fullField:"".concat(m.fullField,".").concat(R),fullFields:m.fullFields?[].concat(Me(m.fullFields),[R]):[R]})}function S(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],A=Array.isArray(R)?R:[R];!s.suppressWarning&&A.length&&e.warning("async-validator:",A),A.length&&m.message!==void 0&&(A=[].concat(m.message));var O=A.map(i6(m,a));if(s.first&&O.length)return f[m.field]=1,p(O);if(!_)p(O);else{if(m.required&&!g.value)return m.message!==void 0?O=[].concat(m.message).map(i6(m,a)):s.error&&(O=[s.error(m,_a(s.messages.required,m.field))]),p(O);var x={};m.defaultField&&Object.keys(g.value).map(function(U){x[U]=m.defaultField}),x=Y(Y({},x),g.rule.fields);var M={};Object.keys(x).forEach(function(U){var V=x[U],W=Array.isArray(V)?V:[V];M[U]=W.map(E.bind(null,U))});var $=new e(M);$.messages(s.messages),g.rule.options&&(g.rule.options.messages=s.messages,g.rule.options.error=s.error),$.validate(g.value,g.rule.options||s,function(U){var V=[];O&&O.length&&V.push.apply(V,Me(O)),U&&U.length&&V.push.apply(V,Me(U)),p(V.length?V:null)})}}var C;if(m.asyncValidator)C=m.asyncValidator(m,g.value,S,g.source,s);else if(m.validator){try{C=m.validator(m,g.value,S,g.source,s)}catch(R){var b,T;(b=(T=console).error)===null||b===void 0||b.call(T,R),s.suppressValidatorError||setTimeout(function(){throw R},0),S(R.message)}C===!0?S():C===!1?S(typeof m.message=="function"?m.message(m.fullField||m.field):m.message||"".concat(m.fullField||m.field," fails")):C instanceof Array?S(C):C instanceof Error&&S(C.message)}C&&C.then&&C.then(function(){return S()},function(R){return S(R)})},function(g){l(g)},a)}},{key:"getType",value:function(n){if(n.type===void 0&&n.pattern instanceof RegExp&&(n.type="pattern"),typeof n.validator!="function"&&n.type&&!u0.hasOwnProperty(n.type))throw new Error(_a("Unknown rule type %s",n.type));return n.type||"string"}},{key:"getValidationMethod",value:function(n){if(typeof n.validator=="function")return n.validator;var r=Object.keys(n),i=r.indexOf("message");return i!==-1&&r.splice(i,1),r.length===1&&r[0]==="required"?u0.required:u0[this.getType(n)]||void 0}}]),e}();J(Gg,"register",function(t,n){if(typeof n!="function")throw new Error("Cannot register a validator by type, validator is not a function");u0[t]=n});J(Gg,"warning",s1e);J(Gg,"messages",VO);J(Gg,"validators",u0);var sa="'${name}' is not a valid ${type}",fY={default:"Validation error on field '${name}'",required:"'${name}' is required",enum:"'${name}' must be one of [${enum}]",whitespace:"'${name}' cannot be empty",date:{format:"'${name}' is invalid for format date",parse:"'${name}' could not be parsed as date",invalid:"'${name}' is invalid date"},types:{string:sa,method:sa,array:sa,object:sa,number:sa,date:sa,boolean:sa,integer:sa,float:sa,regexp:sa,email:sa,url:sa,hex:sa},string:{len:"'${name}' must be exactly ${len} characters",min:"'${name}' must be at least ${min} characters",max:"'${name}' cannot be longer than ${max} characters",range:"'${name}' must be between ${min} and ${max} characters"},number:{len:"'${name}' must equal ${len}",min:"'${name}' cannot be less than ${min}",max:"'${name}' cannot be greater than ${max}",range:"'${name}' must be between ${min} and ${max}"},array:{len:"'${name}' must be exactly ${len} in length",min:"'${name}' cannot be less than ${min} in length",max:"'${name}' cannot be greater than ${max} in length",range:"'${name}' must be between ${min} and ${max} in length"},pattern:{mismatch:"'${name}' does not match pattern ${pattern}"}},s6=Gg;function k1e(e,t){return e.replace(/\$\{\w+\}/g,function(n){var r=n.slice(2,-1);return t[r]})}var c6="CODE_LOGIC_ERROR";function zO(e,t,n,r,i){return WO.apply(this,arguments)}function WO(){return WO=nh(Po().mark(function e(t,n,r,i,o){var a,s,c,l,u,d,h,f,g;return Po().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return a=Y({},r),delete a.ruleIndex,s6.warning=function(){},a.validator&&(s=a.validator,a.validator=function(){try{return s.apply(void 0,arguments)}catch(_){return console.error(_),Promise.reject(c6)}}),c=null,a&&a.type==="array"&&a.defaultField&&(c=a.defaultField,delete a.defaultField),l=new s6(J({},t,[a])),u=hf(fY,i.validateMessages),l.messages(u),d=[],m.prev=10,m.next=13,Promise.resolve(l.validate(J({},t,n),Y({},i)));case 13:m.next=18;break;case 15:m.prev=15,m.t0=m.catch(10),m.t0.errors&&(d=m.t0.errors.map(function(_,E){var S=_.message,C=S===c6?u.default:S;return v.isValidElement(C)?v.cloneElement(C,{key:"error_".concat(E)}):C}));case 18:if(!(!d.length&&c)){m.next=23;break}return m.next=21,Promise.all(n.map(function(_,E){return zO("".concat(t,".").concat(E),_,c,i,o)}));case 21:return h=m.sent,m.abrupt("return",h.reduce(function(_,E){return[].concat(Me(_),Me(E))},[]));case 23:return f=Y(Y({},r),{},{name:t,enum:(r.enum||[]).join(", ")},o),g=d.map(function(_){return typeof _=="string"?k1e(_,f):_}),m.abrupt("return",g);case 26:case"end":return m.stop()}},e,null,[[10,15]])})),WO.apply(this,arguments)}function M1e(e,t,n,r,i,o){var a=e.join("."),s=n.map(function(u,d){var h=u.validator,f=Y(Y({},u),{},{ruleIndex:d});return h&&(f.validator=function(g,p,m){var _=!1,E=function(){for(var b=arguments.length,T=new Array(b),R=0;R<b;R++)T[R]=arguments[R];Promise.resolve().then(function(){mo(!_,"Your validator function has already return a promise. `callback` will be ignored."),_||m.apply(void 0,T)})},S=h(g,p,E);_=S&&typeof S.then=="function"&&typeof S.catch=="function",mo(_,"`callback` is deprecated. Please return a promise instead."),_&&S.then(function(){m()}).catch(function(C){m(C||" ")})}),f}).sort(function(u,d){var h=u.warningOnly,f=u.ruleIndex,g=d.warningOnly,p=d.ruleIndex;return!!h==!!g?f-p:h?1:-1}),c;if(i===!0)c=new Promise(function(){var u=nh(Po().mark(function d(h,f){var g,p,m;return Po().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:g=0;case 1:if(!(g<s.length)){E.next=12;break}return p=s[g],E.next=5,zO(a,t,p,r,o);case 5:if(m=E.sent,!m.length){E.next=9;break}return f([{errors:m,rule:p}]),E.abrupt("return");case 9:g+=1,E.next=1;break;case 12:h([]);case 13:case"end":return E.stop()}},d)}));return function(d,h){return u.apply(this,arguments)}}());else{var l=s.map(function(u){return zO(a,t,u,r,o).then(function(d){return{errors:d,rule:u}})});c=(i?U1e(l):F1e(l)).then(function(u){return Promise.reject(u)})}return c.catch(function(u){return u}),c}function F1e(e){return GO.apply(this,arguments)}function GO(){return GO=nh(Po().mark(function e(t){return Po().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Promise.all(t).then(function(i){var o,a=(o=[]).concat.apply(o,Me(i));return a}));case 1:case"end":return r.stop()}},e)})),GO.apply(this,arguments)}function U1e(e){return KO.apply(this,arguments)}function KO(){return KO=nh(Po().mark(function e(t){var n;return Po().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return n=0,i.abrupt("return",new Promise(function(o){t.forEach(function(a){a.then(function(s){s.errors.length&&o([s]),n+=1,n===t.length&&o([])})})}));case 2:case"end":return i.stop()}},e)})),KO.apply(this,arguments)}function ei(e){return BO(e)}function l6(e,t){var n={};return t.forEach(function(r){var i=Sc(e,r);n=xs(n,r,i)}),n}function Nf(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return e&&e.some(function(r){return pY(t,r,n)})}function pY(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return!e||!t||!n&&e.length!==t.length?!1:t.every(function(r,i){return e[i]===r})}function B1e(e,t){if(e===t)return!0;if(!e&&t||e&&!t||!e||!t||yt(e)!=="object"||yt(t)!=="object")return!1;var n=Object.keys(e),r=Object.keys(t),i=new Set([].concat(n,r));return Me(i).every(function(o){var a=e[o],s=t[o];return typeof a=="function"&&typeof s=="function"?!0:a===s})}function $1e(e){var t=arguments.length<=1?void 0:arguments[1];return t&&t.target&&yt(t.target)==="object"&&e in t.target?t.target[e]:t}function u6(e,t,n){var r=e.length;if(t<0||t>=r||n<0||n>=r)return e;var i=e[t],o=t-n;return o>0?[].concat(Me(e.slice(0,n)),[i],Me(e.slice(n,t)),Me(e.slice(t+1,r))):o<0?[].concat(Me(e.slice(0,t)),Me(e.slice(t+1,n+1)),[i],Me(e.slice(n+1,r))):e}var V1e=["name"],ja=[];function d6(e,t,n,r,i,o){return typeof e=="function"?e(t,n,"source"in o?{source:o.source}:{}):r!==i}var eD=function(e){_l(n,e);var t=Zd(n);function n(r){var i;if(Ui(this,n),i=t.call(this,r),J(Cn(i),"state",{resetCount:0}),J(Cn(i),"cancelRegisterFunc",null),J(Cn(i),"mounted",!1),J(Cn(i),"touched",!1),J(Cn(i),"dirty",!1),J(Cn(i),"validatePromise",void 0),J(Cn(i),"prevValidating",void 0),J(Cn(i),"errors",ja),J(Cn(i),"warnings",ja),J(Cn(i),"cancelRegister",function(){var c=i.props,l=c.preserve,u=c.isListField,d=c.name;i.cancelRegisterFunc&&i.cancelRegisterFunc(u,l,ei(d)),i.cancelRegisterFunc=null}),J(Cn(i),"getNamePath",function(){var c=i.props,l=c.name,u=c.fieldContext,d=u.prefixName,h=d===void 0?[]:d;return l!==void 0?[].concat(Me(h),Me(l)):[]}),J(Cn(i),"getRules",function(){var c=i.props,l=c.rules,u=l===void 0?[]:l,d=c.fieldContext;return u.map(function(h){return typeof h=="function"?h(d):h})}),J(Cn(i),"refresh",function(){i.mounted&&i.setState(function(c){var l=c.resetCount;return{resetCount:l+1}})}),J(Cn(i),"metaCache",null),J(Cn(i),"triggerMetaEvent",function(c){var l=i.props.onMetaChange;if(l){var u=Y(Y({},i.getMeta()),{},{destroy:c});cg(i.metaCache,u)||l(u),i.metaCache=u}else i.metaCache=null}),J(Cn(i),"onStoreChange",function(c,l,u){var d=i.props,h=d.shouldUpdate,f=d.dependencies,g=f===void 0?[]:f,p=d.onReset,m=u.store,_=i.getNamePath(),E=i.getValue(c),S=i.getValue(m),C=l&&Nf(l,_);switch(u.type==="valueUpdate"&&u.source==="external"&&!cg(E,S)&&(i.touched=!0,i.dirty=!0,i.validatePromise=null,i.errors=ja,i.warnings=ja,i.triggerMetaEvent()),u.type){case"reset":if(!l||C){i.touched=!1,i.dirty=!1,i.validatePromise=void 0,i.errors=ja,i.warnings=ja,i.triggerMetaEvent(),p==null||p(),i.refresh();return}break;case"remove":{if(h){i.reRender();return}break}case"setField":{var b=u.data;if(C){"touched"in b&&(i.touched=b.touched),"validating"in b&&!("originRCField"in b)&&(i.validatePromise=b.validating?Promise.resolve([]):null),"errors"in b&&(i.errors=b.errors||ja),"warnings"in b&&(i.warnings=b.warnings||ja),i.dirty=!0,i.triggerMetaEvent(),i.reRender();return}else if("value"in b&&Nf(l,_,!0)){i.reRender();return}if(h&&!_.length&&d6(h,c,m,E,S,u)){i.reRender();return}break}case"dependenciesUpdate":{var T=g.map(ei);if(T.some(function(R){return Nf(u.relatedFields,R)})){i.reRender();return}break}default:if(C||(!g.length||_.length||h)&&d6(h,c,m,E,S,u)){i.reRender();return}break}h===!0&&i.reRender()}),J(Cn(i),"validateRules",function(c){var l=i.getNamePath(),u=i.getValue(),d=c||{},h=d.triggerName,f=d.validateOnly,g=f===void 0?!1:f,p=Promise.resolve().then(nh(Po().mark(function m(){var _,E,S,C,b,T,R;return Po().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(i.mounted){O.next=2;break}return O.abrupt("return",[]);case 2:if(_=i.props,E=_.validateFirst,S=E===void 0?!1:E,C=_.messageVariables,b=_.validateDebounce,T=i.getRules(),h&&(T=T.filter(function(x){return x}).filter(function(x){var M=x.validateTrigger;if(!M)return!0;var $=BO(M);return $.includes(h)})),!(b&&h)){O.next=10;break}return O.next=8,new Promise(function(x){setTimeout(x,b)});case 8:if(i.validatePromise===p){O.next=10;break}return O.abrupt("return",[]);case 10:return R=M1e(l,u,T,c,S,C),R.catch(function(x){return x}).then(function(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ja;if(i.validatePromise===p){var M;i.validatePromise=null;var $=[],U=[];(M=x.forEach)===null||M===void 0||M.call(x,function(V){var W=V.rule.warningOnly,z=V.errors,L=z===void 0?ja:z;W?U.push.apply(U,Me(L)):$.push.apply($,Me(L))}),i.errors=$,i.warnings=U,i.triggerMetaEvent(),i.reRender()}}),O.abrupt("return",R);case 13:case"end":return O.stop()}},m)})));return g||(i.validatePromise=p,i.dirty=!0,i.errors=ja,i.warnings=ja,i.triggerMetaEvent(),i.reRender()),p}),J(Cn(i),"isFieldValidating",function(){return!!i.validatePromise}),J(Cn(i),"isFieldTouched",function(){return i.touched}),J(Cn(i),"isFieldDirty",function(){if(i.dirty||i.props.initialValue!==void 0)return!0;var c=i.props.fieldContext,l=c.getInternalHooks(pd),u=l.getInitialValue;return u(i.getNamePath())!==void 0}),J(Cn(i),"getErrors",function(){return i.errors}),J(Cn(i),"getWarnings",function(){return i.warnings}),J(Cn(i),"isListField",function(){return i.props.isListField}),J(Cn(i),"isList",function(){return i.props.isList}),J(Cn(i),"isPreserve",function(){return i.props.preserve}),J(Cn(i),"getMeta",function(){i.prevValidating=i.isFieldValidating();var c={touched:i.isFieldTouched(),validating:i.prevValidating,errors:i.errors,warnings:i.warnings,name:i.getNamePath(),validated:i.validatePromise===null};return c}),J(Cn(i),"getOnlyChild",function(c){if(typeof c=="function"){var l=i.getMeta();return Y(Y({},i.getOnlyChild(c(i.getControlled(),l,i.props.fieldContext))),{},{isFunction:!0})}var u=zs(c);return u.length!==1||!v.isValidElement(u[0])?{child:u,isFunction:!1}:{child:u[0],isFunction:!1}}),J(Cn(i),"getValue",function(c){var l=i.props.fieldContext.getFieldsValue,u=i.getNamePath();return Sc(c||l(!0),u)}),J(Cn(i),"getControlled",function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},l=i.props,u=l.name,d=l.trigger,h=l.validateTrigger,f=l.getValueFromEvent,g=l.normalize,p=l.valuePropName,m=l.getValueProps,_=l.fieldContext,E=h!==void 0?h:_.validateTrigger,S=i.getNamePath(),C=_.getInternalHooks,b=_.getFieldsValue,T=C(pd),R=T.dispatch,A=i.getValue(),O=m||function(V){return J({},p,V)},x=c[d],M=u!==void 0?O(A):{},$=Y(Y({},c),M);$[d]=function(){i.touched=!0,i.dirty=!0,i.triggerMetaEvent();for(var V,W=arguments.length,z=new Array(W),L=0;L<W;L++)z[L]=arguments[L];f?V=f.apply(void 0,z):V=$1e.apply(void 0,[p].concat(z)),g&&(V=g(V,A,b(!0))),R({type:"updateValue",namePath:S,value:V}),x&&x.apply(void 0,z)};var U=BO(E||[]);return U.forEach(function(V){var W=$[V];$[V]=function(){W&&W.apply(void 0,arguments);var z=i.props.rules;z&&z.length&&R({type:"validateField",namePath:S,triggerName:V})}}),$}),r.fieldContext){var o=r.fieldContext.getInternalHooks,a=o(pd),s=a.initEntityValue;s(Cn(i))}return i}return Bi(n,[{key:"componentDidMount",value:function(){var i=this.props,o=i.shouldUpdate,a=i.fieldContext;if(this.mounted=!0,a){var s=a.getInternalHooks,c=s(pd),l=c.registerField;this.cancelRegisterFunc=l(this)}o===!0&&this.reRender()}},{key:"componentWillUnmount",value:function(){this.cancelRegister(),this.triggerMetaEvent(!0),this.mounted=!1}},{key:"reRender",value:function(){this.mounted&&this.forceUpdate()}},{key:"render",value:function(){var i=this.state.resetCount,o=this.props.children,a=this.getOnlyChild(o),s=a.child,c=a.isFunction,l;return c?l=s:v.isValidElement(s)?l=v.cloneElement(s,this.getControlled(s.props)):(mo(!s,"`children` of Field is not validate ReactElement."),l=s),v.createElement(v.Fragment,{key:i},l)}}]),n}(v.Component);J(eD,"contextType",$d);J(eD,"defaultProps",{trigger:"onChange",valuePropName:"value"});function tD(e){var t=e.name,n=kt(e,V1e),r=v.useContext($d),i=v.useContext(fg),o=t!==void 0?ei(t):void 0,a="keep";return n.isListField||(a="_".concat((o||[]).join("_"))),v.createElement(eD,Ee({key:a,name:o,isListField:!!i},n,{fieldContext:r}))}function mY(e){var t=e.name,n=e.initialValue,r=e.children,i=e.rules,o=e.validateTrigger,a=e.isListField,s=v.useContext($d),c=v.useContext(fg),l=v.useRef({keys:[],id:0}),u=l.current,d=v.useMemo(function(){var p=ei(s.prefixName)||[];return[].concat(Me(p),Me(ei(t)))},[s.prefixName,t]),h=v.useMemo(function(){return Y(Y({},s),{},{prefixName:d})},[s,d]),f=v.useMemo(function(){return{getKey:function(m){var _=d.length,E=m[_];return[u.keys[E],m.slice(_+1)]}}},[d]);if(typeof r!="function")return mo(!1,"Form.List only accepts function as children."),null;var g=function(m,_,E){var S=E.source;return S==="internal"?!1:m!==_};return v.createElement(fg.Provider,{value:f},v.createElement($d.Provider,{value:h},v.createElement(tD,{name:[],shouldUpdate:g,rules:i,validateTrigger:o,initialValue:n,isList:!0,isListField:a??!!c},function(p,m){var _=p.value,E=_===void 0?[]:_,S=p.onChange,C=s.getFieldValue,b=function(){var O=C(d||[]);return O||[]},T={add:function(O,x){var M=b();x>=0&&x<=M.length?(u.keys=[].concat(Me(u.keys.slice(0,x)),[u.id],Me(u.keys.slice(x))),S([].concat(Me(M.slice(0,x)),[O],Me(M.slice(x))))):(u.keys=[].concat(Me(u.keys),[u.id]),S([].concat(Me(M),[O]))),u.id+=1},remove:function(O){var x=b(),M=new Set(Array.isArray(O)?O:[O]);M.size<=0||(u.keys=u.keys.filter(function($,U){return!M.has(U)}),S(x.filter(function($,U){return!M.has(U)})))},move:function(O,x){if(O!==x){var M=b();O<0||O>=M.length||x<0||x>=M.length||(u.keys=u6(u.keys,O,x),S(u6(M,O,x)))}}},R=E||[];return Array.isArray(R)||(R=[]),r(R.map(function(A,O){var x=u.keys[O];return x===void 0&&(u.keys[O]=u.id,x=u.keys[O],u.id+=1),{name:O,key:x,isListField:!0}}),T,m)})))}function j1e(e){var t=!1,n=e.length,r=[];return e.length?new Promise(function(i,o){e.forEach(function(a,s){a.catch(function(c){return t=!0,c}).then(function(c){n-=1,r[s]=c,!(n>0)&&(t&&o(r),i(r))})})}):Promise.resolve([])}var gY="__@field_split__";function WR(e){return e.map(function(t){return"".concat(yt(t),":").concat(t)}).join(gY)}var xh=function(){function e(){Ui(this,e),J(this,"kvs",new Map)}return Bi(e,[{key:"set",value:function(n,r){this.kvs.set(WR(n),r)}},{key:"get",value:function(n){return this.kvs.get(WR(n))}},{key:"update",value:function(n,r){var i=this.get(n),o=r(i);o?this.set(n,o):this.delete(n)}},{key:"delete",value:function(n){this.kvs.delete(WR(n))}},{key:"map",value:function(n){return Me(this.kvs.entries()).map(function(r){var i=ce(r,2),o=i[0],a=i[1],s=o.split(gY);return n({key:s.map(function(c){var l=c.match(/^([^:]*):(.*)$/),u=ce(l,3),d=u[1],h=u[2];return d==="number"?Number(h):h}),value:a})})}},{key:"toJSON",value:function(){var n={};return this.map(function(r){var i=r.key,o=r.value;return n[i.join(".")]=o,null}),n}}]),e}(),H1e=["name"],z1e=Bi(function e(t){var n=this;Ui(this,e),J(this,"formHooked",!1),J(this,"forceRootUpdate",void 0),J(this,"subscribable",!0),J(this,"store",{}),J(this,"fieldEntities",[]),J(this,"initialValues",{}),J(this,"callbacks",{}),J(this,"validateMessages",null),J(this,"preserve",null),J(this,"lastValidatePromise",null),J(this,"getForm",function(){return{getFieldValue:n.getFieldValue,getFieldsValue:n.getFieldsValue,getFieldError:n.getFieldError,getFieldWarning:n.getFieldWarning,getFieldsError:n.getFieldsError,isFieldsTouched:n.isFieldsTouched,isFieldTouched:n.isFieldTouched,isFieldValidating:n.isFieldValidating,isFieldsValidating:n.isFieldsValidating,resetFields:n.resetFields,setFields:n.setFields,setFieldValue:n.setFieldValue,setFieldsValue:n.setFieldsValue,validateFields:n.validateFields,submit:n.submit,_init:!0,getInternalHooks:n.getInternalHooks}}),J(this,"getInternalHooks",function(r){return r===pd?(n.formHooked=!0,{dispatch:n.dispatch,initEntityValue:n.initEntityValue,registerField:n.registerField,useSubscribe:n.useSubscribe,setInitialValues:n.setInitialValues,destroyForm:n.destroyForm,setCallbacks:n.setCallbacks,setValidateMessages:n.setValidateMessages,getFields:n.getFields,setPreserve:n.setPreserve,getInitialValue:n.getInitialValue,registerWatch:n.registerWatch}):(mo(!1,"`getInternalHooks` is internal usage. Should not call directly."),null)}),J(this,"useSubscribe",function(r){n.subscribable=r}),J(this,"prevWithoutPreserves",null),J(this,"setInitialValues",function(r,i){if(n.initialValues=r||{},i){var o,a=hf(r,n.store);(o=n.prevWithoutPreserves)===null||o===void 0||o.map(function(s){var c=s.key;a=xs(a,c,Sc(r,c))}),n.prevWithoutPreserves=null,n.updateStore(a)}}),J(this,"destroyForm",function(r){if(r)n.updateStore({});else{var i=new xh;n.getFieldEntities(!0).forEach(function(o){n.isMergedPreserve(o.isPreserve())||i.set(o.getNamePath(),!0)}),n.prevWithoutPreserves=i}}),J(this,"getInitialValue",function(r){var i=Sc(n.initialValues,r);return r.length?hf(i):i}),J(this,"setCallbacks",function(r){n.callbacks=r}),J(this,"setValidateMessages",function(r){n.validateMessages=r}),J(this,"setPreserve",function(r){n.preserve=r}),J(this,"watchList",[]),J(this,"registerWatch",function(r){return n.watchList.push(r),function(){n.watchList=n.watchList.filter(function(i){return i!==r})}}),J(this,"notifyWatch",function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];if(n.watchList.length){var i=n.getFieldsValue(),o=n.getFieldsValue(!0);n.watchList.forEach(function(a){a(i,o,r)})}}),J(this,"timeoutId",null),J(this,"warningUnhooked",function(){}),J(this,"updateStore",function(r){n.store=r}),J(this,"getFieldEntities",function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return r?n.fieldEntities.filter(function(i){return i.getNamePath().length}):n.fieldEntities}),J(this,"getFieldsMap",function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,i=new xh;return n.getFieldEntities(r).forEach(function(o){var a=o.getNamePath();i.set(a,o)}),i}),J(this,"getFieldEntitiesForNamePathList",function(r){if(!r)return n.getFieldEntities(!0);var i=n.getFieldsMap(!0);return r.map(function(o){var a=ei(o);return i.get(a)||{INVALIDATE_NAME_PATH:ei(o)}})}),J(this,"getFieldsValue",function(r,i){n.warningUnhooked();var o,a,s;if(r===!0||Array.isArray(r)?(o=r,a=i):r&&yt(r)==="object"&&(s=r.strict,a=r.filter),o===!0&&!a)return n.store;var c=n.getFieldEntitiesForNamePathList(Array.isArray(o)?o:null),l=[];return c.forEach(function(u){var d,h,f="INVALIDATE_NAME_PATH"in u?u.INVALIDATE_NAME_PATH:u.getNamePath();if(s){var g,p;if((g=(p=u).isList)!==null&&g!==void 0&&g.call(p))return}else if(!o&&(d=(h=u).isListField)!==null&&d!==void 0&&d.call(h))return;if(!a)l.push(f);else{var m="getMeta"in u?u.getMeta():null;a(m)&&l.push(f)}}),l6(n.store,l.map(ei))}),J(this,"getFieldValue",function(r){n.warningUnhooked();var i=ei(r);return Sc(n.store,i)}),J(this,"getFieldsError",function(r){n.warningUnhooked();var i=n.getFieldEntitiesForNamePathList(r);return i.map(function(o,a){return o&&!("INVALIDATE_NAME_PATH"in o)?{name:o.getNamePath(),errors:o.getErrors(),warnings:o.getWarnings()}:{name:ei(r[a]),errors:[],warnings:[]}})}),J(this,"getFieldError",function(r){n.warningUnhooked();var i=ei(r),o=n.getFieldsError([i])[0];return o.errors}),J(this,"getFieldWarning",function(r){n.warningUnhooked();var i=ei(r),o=n.getFieldsError([i])[0];return o.warnings}),J(this,"isFieldsTouched",function(){n.warningUnhooked();for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];var a=i[0],s=i[1],c,l=!1;i.length===0?c=null:i.length===1?Array.isArray(a)?(c=a.map(ei),l=!1):(c=null,l=a):(c=a.map(ei),l=s);var u=n.getFieldEntities(!0),d=function(m){return m.isFieldTouched()};if(!c)return l?u.every(function(p){return d(p)||p.isList()}):u.some(d);var h=new xh;c.forEach(function(p){h.set(p,[])}),u.forEach(function(p){var m=p.getNamePath();c.forEach(function(_){_.every(function(E,S){return m[S]===E})&&h.update(_,function(E){return[].concat(Me(E),[p])})})});var f=function(m){return m.some(d)},g=h.map(function(p){var m=p.value;return m});return l?g.every(f):g.some(f)}),J(this,"isFieldTouched",function(r){return n.warningUnhooked(),n.isFieldsTouched([r])}),J(this,"isFieldsValidating",function(r){n.warningUnhooked();var i=n.getFieldEntities();if(!r)return i.some(function(a){return a.isFieldValidating()});var o=r.map(ei);return i.some(function(a){var s=a.getNamePath();return Nf(o,s)&&a.isFieldValidating()})}),J(this,"isFieldValidating",function(r){return n.warningUnhooked(),n.isFieldsValidating([r])}),J(this,"resetWithFieldInitialValue",function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=new xh,o=n.getFieldEntities(!0);o.forEach(function(c){var l=c.props.initialValue,u=c.getNamePath();if(l!==void 0){var d=i.get(u)||new Set;d.add({entity:c,value:l}),i.set(u,d)}});var a=function(l){l.forEach(function(u){var d=u.props.initialValue;if(d!==void 0){var h=u.getNamePath(),f=n.getInitialValue(h);if(f!==void 0)mo(!1,"Form already set 'initialValues' with path '".concat(h.join("."),"'. Field can not overwrite it."));else{var g=i.get(h);if(g&&g.size>1)mo(!1,"Multiple Field with path '".concat(h.join("."),"' set 'initialValue'. Can not decide which one to pick."));else if(g){var p=n.getFieldValue(h),m=u.isListField();!m&&(!r.skipExist||p===void 0)&&n.updateStore(xs(n.store,h,Me(g)[0].value))}}}})},s;r.entities?s=r.entities:r.namePathList?(s=[],r.namePathList.forEach(function(c){var l=i.get(c);if(l){var u;(u=s).push.apply(u,Me(Me(l).map(function(d){return d.entity})))}})):s=o,a(s)}),J(this,"resetFields",function(r){n.warningUnhooked();var i=n.store;if(!r){n.updateStore(hf(n.initialValues)),n.resetWithFieldInitialValue(),n.notifyObservers(i,null,{type:"reset"}),n.notifyWatch();return}var o=r.map(ei);o.forEach(function(a){var s=n.getInitialValue(a);n.updateStore(xs(n.store,a,s))}),n.resetWithFieldInitialValue({namePathList:o}),n.notifyObservers(i,o,{type:"reset"}),n.notifyWatch(o)}),J(this,"setFields",function(r){n.warningUnhooked();var i=n.store,o=[];r.forEach(function(a){var s=a.name,c=kt(a,H1e),l=ei(s);o.push(l),"value"in c&&n.updateStore(xs(n.store,l,c.value)),n.notifyObservers(i,[l],{type:"setField",data:a})}),n.notifyWatch(o)}),J(this,"getFields",function(){var r=n.getFieldEntities(!0),i=r.map(function(o){var a=o.getNamePath(),s=o.getMeta(),c=Y(Y({},s),{},{name:a,value:n.getFieldValue(a)});return Object.defineProperty(c,"originRCField",{value:!0}),c});return i}),J(this,"initEntityValue",function(r){var i=r.props.initialValue;if(i!==void 0){var o=r.getNamePath(),a=Sc(n.store,o);a===void 0&&n.updateStore(xs(n.store,o,i))}}),J(this,"isMergedPreserve",function(r){var i=r!==void 0?r:n.preserve;return i??!0}),J(this,"registerField",function(r){n.fieldEntities.push(r);var i=r.getNamePath();if(n.notifyWatch([i]),r.props.initialValue!==void 0){var o=n.store;n.resetWithFieldInitialValue({entities:[r],skipExist:!0}),n.notifyObservers(o,[r.getNamePath()],{type:"valueUpdate",source:"internal"})}return function(a,s){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(n.fieldEntities=n.fieldEntities.filter(function(d){return d!==r}),!n.isMergedPreserve(s)&&(!a||c.length>1)){var l=a?void 0:n.getInitialValue(i);if(i.length&&n.getFieldValue(i)!==l&&n.fieldEntities.every(function(d){return!pY(d.getNamePath(),i)})){var u=n.store;n.updateStore(xs(u,i,l,!0)),n.notifyObservers(u,[i],{type:"remove"}),n.triggerDependenciesUpdate(u,i)}}n.notifyWatch([i])}}),J(this,"dispatch",function(r){switch(r.type){case"updateValue":{var i=r.namePath,o=r.value;n.updateValue(i,o);break}case"validateField":{var a=r.namePath,s=r.triggerName;n.validateFields([a],{triggerName:s});break}}}),J(this,"notifyObservers",function(r,i,o){if(n.subscribable){var a=Y(Y({},o),{},{store:n.getFieldsValue(!0)});n.getFieldEntities().forEach(function(s){var c=s.onStoreChange;c(r,i,a)})}else n.forceRootUpdate()}),J(this,"triggerDependenciesUpdate",function(r,i){var o=n.getDependencyChildrenFields(i);return o.length&&n.validateFields(o),n.notifyObservers(r,o,{type:"dependenciesUpdate",relatedFields:[i].concat(Me(o))}),o}),J(this,"updateValue",function(r,i){var o=ei(r),a=n.store;n.updateStore(xs(n.store,o,i)),n.notifyObservers(a,[o],{type:"valueUpdate",source:"internal"}),n.notifyWatch([o]);var s=n.triggerDependenciesUpdate(a,o),c=n.callbacks.onValuesChange;if(c){var l=l6(n.store,[o]);c(l,n.getFieldsValue())}n.triggerOnFieldsChange([o].concat(Me(s)))}),J(this,"setFieldsValue",function(r){n.warningUnhooked();var i=n.store;if(r){var o=hf(n.store,r);n.updateStore(o)}n.notifyObservers(i,null,{type:"valueUpdate",source:"external"}),n.notifyWatch()}),J(this,"setFieldValue",function(r,i){n.setFields([{name:r,value:i}])}),J(this,"getDependencyChildrenFields",function(r){var i=new Set,o=[],a=new xh;n.getFieldEntities().forEach(function(c){var l=c.props.dependencies;(l||[]).forEach(function(u){var d=ei(u);a.update(d,function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Set;return h.add(c),h})})});var s=function c(l){var u=a.get(l)||new Set;u.forEach(function(d){if(!i.has(d)){i.add(d);var h=d.getNamePath();d.isFieldDirty()&&h.length&&(o.push(h),c(h))}})};return s(r),o}),J(this,"triggerOnFieldsChange",function(r,i){var o=n.callbacks.onFieldsChange;if(o){var a=n.getFields();if(i){var s=new xh;i.forEach(function(l){var u=l.name,d=l.errors;s.set(u,d)}),a.forEach(function(l){l.errors=s.get(l.name)||l.errors})}var c=a.filter(function(l){var u=l.name;return Nf(r,u)});c.length&&o(c,a)}}),J(this,"validateFields",function(r,i){n.warningUnhooked();var o,a;Array.isArray(r)||typeof r=="string"||typeof i=="string"?(o=r,a=i):a=r;var s=!!o,c=s?o.map(ei):[],l=[],u=String(Date.now()),d=new Set,h=a||{},f=h.recursive,g=h.dirty;n.getFieldEntities(!0).forEach(function(E){if(s||c.push(E.getNamePath()),!(!E.props.rules||!E.props.rules.length)&&!(g&&!E.isFieldDirty())){var S=E.getNamePath();if(d.add(S.join(u)),!s||Nf(c,S,f)){var C=E.validateRules(Y({validateMessages:Y(Y({},fY),n.validateMessages)},a));l.push(C.then(function(){return{name:S,errors:[],warnings:[]}}).catch(function(b){var T,R=[],A=[];return(T=b.forEach)===null||T===void 0||T.call(b,function(O){var x=O.rule.warningOnly,M=O.errors;x?A.push.apply(A,Me(M)):R.push.apply(R,Me(M))}),R.length?Promise.reject({name:S,errors:R,warnings:A}):{name:S,errors:R,warnings:A}}))}}});var p=j1e(l);n.lastValidatePromise=p,p.catch(function(E){return E}).then(function(E){var S=E.map(function(C){var b=C.name;return b});n.notifyObservers(n.store,S,{type:"validateFinish"}),n.triggerOnFieldsChange(S,E)});var m=p.then(function(){return n.lastValidatePromise===p?Promise.resolve(n.getFieldsValue(c)):Promise.reject([])}).catch(function(E){var S=E.filter(function(C){return C&&C.errors.length});return Promise.reject({values:n.getFieldsValue(c),errorFields:S,outOfDate:n.lastValidatePromise!==p})});m.catch(function(E){return E});var _=c.filter(function(E){return d.has(E.join(u))});return n.triggerOnFieldsChange(_),m}),J(this,"submit",function(){n.warningUnhooked(),n.validateFields().then(function(r){var i=n.callbacks.onFinish;if(i)try{i(r)}catch(o){console.error(o)}}).catch(function(r){var i=n.callbacks.onFinishFailed;i&&i(r)})}),this.forceRootUpdate=t});function nD(e){var t=v.useRef(),n=v.useState({}),r=ce(n,2),i=r[1];if(!t.current)if(e)t.current=e;else{var o=function(){i({})},a=new z1e(o);t.current=a.getForm()}return[t.current]}var qO=v.createContext({triggerFormChange:function(){},triggerFormFinish:function(){},registerForm:function(){},unregisterForm:function(){}}),vY=function(t){var n=t.validateMessages,r=t.onFormChange,i=t.onFormFinish,o=t.children,a=v.useContext(qO),s=v.useRef({});return v.createElement(qO.Provider,{value:Y(Y({},a),{},{validateMessages:Y(Y({},a.validateMessages),n),triggerFormChange:function(l,u){r&&r(l,{changedFields:u,forms:s.current}),a.triggerFormChange(l,u)},triggerFormFinish:function(l,u){i&&i(l,{values:u,forms:s.current}),a.triggerFormFinish(l,u)},registerForm:function(l,u){l&&(s.current=Y(Y({},s.current),{},J({},l,u))),a.registerForm(l,u)},unregisterForm:function(l){var u=Y({},s.current);delete u[l],s.current=u,a.unregisterForm(l)}})},o)},W1e=["name","initialValues","fields","form","preserve","children","component","validateMessages","validateTrigger","onValuesChange","onFieldsChange","onFinish","onFinishFailed","clearOnDestroy"],G1e=function(t,n){var r=t.name,i=t.initialValues,o=t.fields,a=t.form,s=t.preserve,c=t.children,l=t.component,u=l===void 0?"form":l,d=t.validateMessages,h=t.validateTrigger,f=h===void 0?"onChange":h,g=t.onValuesChange,p=t.onFieldsChange,m=t.onFinish,_=t.onFinishFailed,E=t.clearOnDestroy,S=kt(t,W1e),C=v.useRef(null),b=v.useContext(qO),T=nD(a),R=ce(T,1),A=R[0],O=A.getInternalHooks(pd),x=O.useSubscribe,M=O.setInitialValues,$=O.setCallbacks,U=O.setValidateMessages,V=O.setPreserve,W=O.destroyForm;v.useImperativeHandle(n,function(){return Y(Y({},A),{},{nativeElement:C.current})}),v.useEffect(function(){return b.registerForm(r,A),function(){b.unregisterForm(r)}},[b,A,r]),U(Y(Y({},b.validateMessages),d)),$({onValuesChange:g,onFieldsChange:function(B){if(b.triggerFormChange(r,B),p){for(var K=arguments.length,X=new Array(K>1?K-1:0),ee=1;ee<K;ee++)X[ee-1]=arguments[ee];p.apply(void 0,[B].concat(X))}},onFinish:function(B){b.triggerFormFinish(r,B),m&&m(B)},onFinishFailed:_}),V(s);var z=v.useRef(null);M(i,!z.current),z.current||(z.current=!0),v.useEffect(function(){return function(){return W(E)}},[]);var L,D=typeof c=="function";if(D){var j=A.getFieldsValue(!0);L=c(j,A)}else L=c;x(!D);var F=v.useRef();v.useEffect(function(){B1e(F.current||[],o||[])||A.setFields(o||[]),F.current=o},[o,A]);var y=v.useMemo(function(){return Y(Y({},A),{},{validateTrigger:f})},[A,f]),I=v.createElement(fg.Provider,{value:null},v.createElement($d.Provider,{value:y},L));return u===!1?I:v.createElement(u,Ee({},S,{ref:C,onSubmit:function(B){B.preventDefault(),B.stopPropagation(),A.submit()},onReset:function(B){var K;B.preventDefault(),A.resetFields(),(K=S.onReset)===null||K===void 0||K.call(S,B)}}),I)};function h6(e){try{return JSON.stringify(e)}catch{return Math.random()}}function EY(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],i=t[1],o=i===void 0?{}:i,a=r1e(o)?{form:o}:o,s=a.form,c=v.useState(),l=ce(c,2),u=l[0],d=l[1],h=v.useMemo(function(){return h6(u)},[u]),f=v.useRef(h);f.current=h;var g=v.useContext($d),p=s||g,m=p&&p._init,_=ei(r),E=v.useRef(_);return E.current=_,v.useEffect(function(){if(m){var S=p.getFieldsValue,C=p.getInternalHooks,b=C(pd),T=b.registerWatch,R=function(M,$){var U=a.preserve?$:M;return typeof r=="function"?r(U):Sc(U,E.current)},A=T(function(x,M){var $=R(x,M),U=h6($);f.current!==U&&(f.current=U,d($))}),O=R(S(),S(!0));return u!==O&&d(O),A}},[m]),u}var K1e=v.forwardRef(G1e),xp=K1e;xp.FormProvider=vY;xp.Field=tD;xp.List=mY;xp.useForm=nD;xp.useWatch=EY;const ml=v.createContext({labelAlign:"right",vertical:!1,itemRef:()=>{}}),_Y=v.createContext(null),SY=e=>{const t=So(e,["prefixCls"]);return v.createElement(vY,Object.assign({},t))},rD=v.createContext({prefixCls:""}),ba=v.createContext({}),q1e=e=>{let{children:t,status:n,override:r}=e;const i=v.useContext(ba),o=v.useMemo(()=>{const a=Object.assign({},i);return r&&delete a.isFormItemInput,n&&(delete a.status,delete a.hasFeedback,delete a.feedbackIcon),a},[n,r,i]);return v.createElement(ba.Provider,{value:o},t)},yY=v.createContext(void 0),Y1e=e=>({[e.componentCls]:{[`${e.antCls}-motion-collapse-legacy`]:{overflow:"hidden","&-active":{transition:`height ${e.motionDurationMid} ${e.motionEaseInOut},
        opacity ${e.motionDurationMid} ${e.motionEaseInOut} !important`}},[`${e.antCls}-motion-collapse`]:{overflow:"hidden",transition:`height ${e.motionDurationMid} ${e.motionEaseInOut},
        opacity ${e.motionDurationMid} ${e.motionEaseInOut} !important`}}}),CY=Y1e,X1e=e=>({animationDuration:e,animationFillMode:"both"}),J1e=e=>({animationDuration:e,animationFillMode:"both"}),iD=function(e,t,n,r){const o=(arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1)?"&":"";return{[`
      ${o}${e}-enter,
      ${o}${e}-appear
    `]:Object.assign(Object.assign({},X1e(r)),{animationPlayState:"paused"}),[`${o}${e}-leave`]:Object.assign(Object.assign({},J1e(r)),{animationPlayState:"paused"}),[`
      ${o}${e}-enter${e}-enter-active,
      ${o}${e}-appear${e}-appear-active
    `]:{animationName:t,animationPlayState:"running"},[`${o}${e}-leave${e}-leave-active`]:{animationName:n,animationPlayState:"running",pointerEvents:"none"}}},Q1e=new Tn("antMoveDownIn",{"0%":{transform:"translate3d(0, 100%, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),Z1e=new Tn("antMoveDownOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(0, 100%, 0)",transformOrigin:"0 0",opacity:0}}),eTe=new Tn("antMoveLeftIn",{"0%":{transform:"translate3d(-100%, 0, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),tTe=new Tn("antMoveLeftOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(-100%, 0, 0)",transformOrigin:"0 0",opacity:0}}),nTe=new Tn("antMoveRightIn",{"0%":{transform:"translate3d(100%, 0, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),rTe=new Tn("antMoveRightOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(100%, 0, 0)",transformOrigin:"0 0",opacity:0}}),iTe=new Tn("antMoveUpIn",{"0%":{transform:"translate3d(0, -100%, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),oTe=new Tn("antMoveUpOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(0, -100%, 0)",transformOrigin:"0 0",opacity:0}}),aTe={"move-up":{inKeyframes:iTe,outKeyframes:oTe},"move-down":{inKeyframes:Q1e,outKeyframes:Z1e},"move-left":{inKeyframes:eTe,outKeyframes:tTe},"move-right":{inKeyframes:nTe,outKeyframes:rTe}},f6=(e,t)=>{const{antCls:n}=e,r=`${n}-${t}`,{inKeyframes:i,outKeyframes:o}=aTe[t];return[iD(r,i,o,e.motionDurationMid),{[`
        ${r}-enter,
        ${r}-appear
      `]:{opacity:0,animationTimingFunction:e.motionEaseOutCirc},[`${r}-leave`]:{animationTimingFunction:e.motionEaseInOutCirc}}]},bY=new Tn("antSlideUpIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1}}),TY=new Tn("antSlideUpOut",{"0%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0}}),RY=new Tn("antSlideDownIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1}}),wY=new Tn("antSlideDownOut",{"0%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0}}),sTe=new Tn("antSlideLeftIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1}}),cTe=new Tn("antSlideLeftOut",{"0%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0}}),lTe=new Tn("antSlideRightIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1}}),uTe=new Tn("antSlideRightOut",{"0%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0}}),dTe={"slide-up":{inKeyframes:bY,outKeyframes:TY},"slide-down":{inKeyframes:RY,outKeyframes:wY},"slide-left":{inKeyframes:sTe,outKeyframes:cTe},"slide-right":{inKeyframes:lTe,outKeyframes:uTe}},JS=(e,t)=>{const{antCls:n}=e,r=`${n}-${t}`,{inKeyframes:i,outKeyframes:o}=dTe[t];return[iD(r,i,o,e.motionDurationMid),{[`
      ${r}-enter,
      ${r}-appear
    `]:{transform:"scale(0)",transformOrigin:"0% 0%",opacity:0,animationTimingFunction:e.motionEaseOutQuint,"&-prepare":{transform:"scale(1)"}},[`${r}-leave`]:{animationTimingFunction:e.motionEaseInQuint}}]},oD=new Tn("antZoomIn",{"0%":{transform:"scale(0.2)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),hTe=new Tn("antZoomOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.2)",opacity:0}}),p6=new Tn("antZoomBigIn",{"0%":{transform:"scale(0.8)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),m6=new Tn("antZoomBigOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.8)",opacity:0}}),fTe=new Tn("antZoomUpIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 0%"}}),pTe=new Tn("antZoomUpOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 0%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0}}),mTe=new Tn("antZoomLeftIn",{"0%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"0% 50%"}}),gTe=new Tn("antZoomLeftOut",{"0%":{transform:"scale(1)",transformOrigin:"0% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0}}),vTe=new Tn("antZoomRightIn",{"0%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"100% 50%"}}),ETe=new Tn("antZoomRightOut",{"0%":{transform:"scale(1)",transformOrigin:"100% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0}}),_Te=new Tn("antZoomDownIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 100%"}}),STe=new Tn("antZoomDownOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 100%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0}}),yTe={zoom:{inKeyframes:oD,outKeyframes:hTe},"zoom-big":{inKeyframes:p6,outKeyframes:m6},"zoom-big-fast":{inKeyframes:p6,outKeyframes:m6},"zoom-left":{inKeyframes:mTe,outKeyframes:gTe},"zoom-right":{inKeyframes:vTe,outKeyframes:ETe},"zoom-up":{inKeyframes:fTe,outKeyframes:pTe},"zoom-down":{inKeyframes:_Te,outKeyframes:STe}},IY=(e,t)=>{const{antCls:n}=e,r=`${n}-${t}`,{inKeyframes:i,outKeyframes:o}=yTe[t];return[iD(r,i,o,t==="zoom-big-fast"?e.motionDurationFast:e.motionDurationMid),{[`
        ${r}-enter,
        ${r}-appear
      `]:{transform:"scale(0)",opacity:0,animationTimingFunction:e.motionEaseOutCirc,"&-prepare":{transform:"none"}},[`${r}-leave`]:{animationTimingFunction:e.motionEaseInOutCirc}}]},CTe=e=>{const{componentCls:t,notificationMarginEdge:n,animationMaxHeight:r}=e,i=`${t}-notice`,o=new Tn("antNotificationFadeIn",{"0%":{transform:"translate3d(100%, 0, 0)",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",opacity:1}}),a=new Tn("antNotificationTopFadeIn",{"0%":{top:-r,opacity:0},"100%":{top:0,opacity:1}}),s=new Tn("antNotificationBottomFadeIn",{"0%":{bottom:e.calc(r).mul(-1).equal(),opacity:0},"100%":{bottom:0,opacity:1}}),c=new Tn("antNotificationLeftFadeIn",{"0%":{transform:"translate3d(-100%, 0, 0)",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",opacity:1}});return{[t]:{[`&${t}-top, &${t}-bottom`]:{marginInline:0,[i]:{marginInline:"auto auto"}},[`&${t}-top`]:{[`${t}-fade-enter${t}-fade-enter-active, ${t}-fade-appear${t}-fade-appear-active`]:{animationName:a}},[`&${t}-bottom`]:{[`${t}-fade-enter${t}-fade-enter-active, ${t}-fade-appear${t}-fade-appear-active`]:{animationName:s}},[`&${t}-topRight, &${t}-bottomRight`]:{[`${t}-fade-enter${t}-fade-enter-active, ${t}-fade-appear${t}-fade-appear-active`]:{animationName:o}},[`&${t}-topLeft, &${t}-bottomLeft`]:{marginRight:{value:0,_skip_check_:!0},marginLeft:{value:n,_skip_check_:!0},[i]:{marginInlineEnd:"auto",marginInlineStart:0},[`${t}-fade-enter${t}-fade-enter-active, ${t}-fade-appear${t}-fade-appear-active`]:{animationName:c}}}}},bTe=CTe,TTe=["top","topLeft","topRight","bottom","bottomLeft","bottomRight"],RTe={topLeft:"left",topRight:"right",bottomLeft:"left",bottomRight:"right",top:"left",bottom:"left"},wTe=(e,t)=>{const{componentCls:n}=e;return{[`${n}-${t}`]:{[`&${n}-stack > ${n}-notice-wrapper`]:{[t.startsWith("top")?"top":"bottom"]:0,[RTe[t]]:{value:0,_skip_check_:!0}}}}},ITe=e=>{const t={};for(let n=1;n<e.notificationStackLayer;n++)t[`&:nth-last-child(${n+1})`]={overflow:"hidden",[`& > ${e.componentCls}-notice`]:{opacity:0,transition:`opacity ${e.motionDurationMid}`}};return Object.assign({[`&:not(:nth-last-child(-n+${e.notificationStackLayer}))`]:{opacity:0,overflow:"hidden",color:"transparent",pointerEvents:"none"}},t)},ATe=e=>{const t={};for(let n=1;n<e.notificationStackLayer;n++)t[`&:nth-last-child(${n+1})`]={background:e.colorBgBlur,backdropFilter:"blur(10px)","-webkit-backdrop-filter":"blur(10px)"};return Object.assign({},t)},OTe=e=>{const{componentCls:t}=e;return Object.assign({[`${t}-stack`]:{[`& > ${t}-notice-wrapper`]:Object.assign({transition:`all ${e.motionDurationSlow}, backdrop-filter 0s`,position:"absolute"},ITe(e))},[`${t}-stack:not(${t}-stack-expanded)`]:{[`& > ${t}-notice-wrapper`]:Object.assign({},ATe(e))},[`${t}-stack${t}-stack-expanded`]:{[`& > ${t}-notice-wrapper`]:{"&:not(:nth-last-child(-n + 1))":{opacity:1,overflow:"unset",color:"inherit",pointerEvents:"auto",[`& > ${e.componentCls}-notice`]:{opacity:1}},"&:after":{content:'""',position:"absolute",height:e.margin,width:"100%",insetInline:0,bottom:e.calc(e.margin).mul(-1).equal(),background:"transparent",pointerEvents:"auto"}}}},TTe.map(n=>wTe(e,n)).reduce((n,r)=>Object.assign(Object.assign({},n),r),{}))},xTe=OTe,AY=e=>{const{iconCls:t,componentCls:n,boxShadow:r,fontSizeLG:i,notificationMarginBottom:o,borderRadiusLG:a,colorSuccess:s,colorInfo:c,colorWarning:l,colorError:u,colorTextHeading:d,notificationBg:h,notificationPadding:f,notificationMarginEdge:g,notificationProgressBg:p,notificationProgressHeight:m,fontSize:_,lineHeight:E,width:S,notificationIconSize:C,colorText:b}=e,T=`${n}-notice`;return{position:"relative",marginBottom:o,marginInlineStart:"auto",background:h,borderRadius:a,boxShadow:r,[T]:{padding:f,width:S,maxWidth:`calc(100vw - ${ve(e.calc(g).mul(2).equal())})`,overflow:"hidden",lineHeight:E,wordWrap:"break-word"},[`${T}-message`]:{marginBottom:e.marginXS,color:d,fontSize:i,lineHeight:e.lineHeightLG},[`${T}-description`]:{fontSize:_,color:b},[`${T}-closable ${T}-message`]:{paddingInlineEnd:e.paddingLG},[`${T}-with-icon ${T}-message`]:{marginBottom:e.marginXS,marginInlineStart:e.calc(e.marginSM).add(C).equal(),fontSize:i},[`${T}-with-icon ${T}-description`]:{marginInlineStart:e.calc(e.marginSM).add(C).equal(),fontSize:_},[`${T}-icon`]:{position:"absolute",fontSize:C,lineHeight:1,[`&-success${t}`]:{color:s},[`&-info${t}`]:{color:c},[`&-warning${t}`]:{color:l},[`&-error${t}`]:{color:u}},[`${T}-close`]:Object.assign({position:"absolute",top:e.notificationPaddingVertical,insetInlineEnd:e.notificationPaddingHorizontal,color:e.colorIcon,outline:"none",width:e.notificationCloseButtonSize,height:e.notificationCloseButtonSize,borderRadius:e.borderRadiusSM,transition:`background-color ${e.motionDurationMid}, color ${e.motionDurationMid}`,display:"flex",alignItems:"center",justifyContent:"center","&:hover":{color:e.colorIconHover,backgroundColor:e.colorBgTextHover},"&:active":{backgroundColor:e.colorBgTextActive}},WP(e)),[`${T}-progress`]:{position:"absolute",display:"block",appearance:"none",WebkitAppearance:"none",inlineSize:`calc(100% - ${ve(a)} * 2)`,left:{_skip_check_:!0,value:a},right:{_skip_check_:!0,value:a},bottom:0,blockSize:m,border:0,"&, &::-webkit-progress-bar":{borderRadius:a,backgroundColor:"rgba(0, 0, 0, 0.04)"},"&::-moz-progress-bar":{background:p},"&::-webkit-progress-value":{borderRadius:a,background:p}},[`${T}-btn`]:{float:"right",marginTop:e.marginSM}}},NTe=e=>{const{componentCls:t,notificationMarginBottom:n,notificationMarginEdge:r,motionDurationMid:i,motionEaseInOut:o}=e,a=`${t}-notice`,s=new Tn("antNotificationFadeOut",{"0%":{maxHeight:e.animationMaxHeight,marginBottom:n},"100%":{maxHeight:0,marginBottom:0,paddingTop:0,paddingBottom:0,opacity:0}});return[{[t]:Object.assign(Object.assign({},Oa(e)),{position:"fixed",zIndex:e.zIndexPopup,marginRight:{value:r,_skip_check_:!0},[`${t}-hook-holder`]:{position:"relative"},[`${t}-fade-appear-prepare`]:{opacity:"0 !important"},[`${t}-fade-enter, ${t}-fade-appear`]:{animationDuration:e.motionDurationMid,animationTimingFunction:o,animationFillMode:"both",opacity:0,animationPlayState:"paused"},[`${t}-fade-leave`]:{animationTimingFunction:o,animationFillMode:"both",animationDuration:i,animationPlayState:"paused"},[`${t}-fade-enter${t}-fade-enter-active, ${t}-fade-appear${t}-fade-appear-active`]:{animationPlayState:"running"},[`${t}-fade-leave${t}-fade-leave-active`]:{animationName:s,animationPlayState:"running"},"&-rtl":{direction:"rtl",[`${a}-btn`]:{float:"left"}}})},{[t]:{[`${a}-wrapper`]:Object.assign({},AY(e))}}]},OY=e=>({zIndexPopup:e.zIndexPopupBase+Xq+50,width:384}),xY=e=>{const t=e.paddingMD,n=e.paddingLG;return gr(e,{notificationBg:e.colorBgElevated,notificationPaddingVertical:t,notificationPaddingHorizontal:n,notificationIconSize:e.calc(e.fontSizeLG).mul(e.lineHeightLG).equal(),notificationCloseButtonSize:e.calc(e.controlHeightLG).mul(.55).equal(),notificationMarginBottom:e.margin,notificationPadding:`${ve(e.paddingMD)} ${ve(e.paddingContentHorizontalLG)}`,notificationMarginEdge:e.marginLG,animationMaxHeight:150,notificationStackLayer:3,notificationProgressHeight:2,notificationProgressBg:`linear-gradient(90deg, ${e.colorPrimaryBorderHover}, ${e.colorPrimary})`})},NY=yo("Notification",e=>{const t=xY(e);return[NTe(t),bTe(t),xTe(t)]},OY),PTe=FC(["Notification","PurePanel"],e=>{const t=`${e.componentCls}-notice`,n=xY(e);return{[`${t}-pure-panel`]:Object.assign(Object.assign({},AY(n)),{width:n.width,maxWidth:`calc(100vw - ${ve(e.calc(n.notificationMarginEdge).mul(2).equal())})`,margin:0})}},OY);var DTe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function aD(e,t){return t===null||t===!1?null:t||v.createElement(zq,{className:`${e}-close-icon`})}const LTe={success:Hq,info:gCe,error:$C,warning:Wq},PY=e=>{const{prefixCls:t,icon:n,type:r,message:i,description:o,btn:a,role:s="alert"}=e;let c=null;return n?c=v.createElement("span",{className:`${t}-icon`},n):r&&(c=v.createElement(LTe[r]||null,{className:de(`${t}-icon`,`${t}-icon-${r}`)})),v.createElement("div",{className:de({[`${t}-with-icon`]:c}),role:s},c,v.createElement("div",{className:`${t}-message`},i),v.createElement("div",{className:`${t}-description`},o),a&&v.createElement("div",{className:`${t}-btn`},a))},kTe=e=>{const{prefixCls:t,className:n,icon:r,type:i,message:o,description:a,btn:s,closable:c=!0,closeIcon:l,className:u}=e,d=DTe(e,["prefixCls","className","icon","type","message","description","btn","closable","closeIcon","className"]),{getPrefixCls:h}=v.useContext(en),f=t||h("notification"),g=`${f}-notice`,p=Mc(f),[m,_,E]=NY(f,p);return m(v.createElement("div",{className:de(`${g}-pure-panel`,_,n,E,p)},v.createElement(PTe,{prefixCls:f}),v.createElement(Kq,Object.assign({},d,{prefixCls:f,eventKey:"pure",duration:null,closable:c,className:de({notificationClassName:u}),closeIcon:aD(f,l),content:v.createElement(PY,{prefixCls:g,icon:r,type:i,message:o,description:a,btn:s})}))))},MTe=kTe;function FTe(e,t,n){let r;switch(e){case"top":r={left:"50%",transform:"translateX(-50%)",right:"auto",top:t,bottom:"auto"};break;case"topLeft":r={left:0,top:t,bottom:"auto"};break;case"topRight":r={right:0,top:t,bottom:"auto"};break;case"bottom":r={left:"50%",transform:"translateX(-50%)",right:"auto",top:"auto",bottom:n};break;case"bottomLeft":r={left:0,top:"auto",bottom:n};break;default:r={right:0,top:"auto",bottom:n};break}return r}function UTe(e){return{motionName:`${e}-fade`}}var BTe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const g6=24,$Te=4.5,VTe="topRight",jTe=e=>{let{children:t,prefixCls:n}=e;const r=Mc(n),[i,o,a]=NY(n,r);return i(le.createElement(ICe,{classNames:{list:de(o,a,r)}},t))},HTe=(e,t)=>{let{prefixCls:n,key:r}=t;return le.createElement(jTe,{prefixCls:n,key:r},e)},zTe=le.forwardRef((e,t)=>{const{top:n,bottom:r,prefixCls:i,getContainer:o,maxCount:a,rtl:s,onAllRemoved:c,stack:l,duration:u}=e,{getPrefixCls:d,getPopupContainer:h,notification:f,direction:g}=v.useContext(en),[,p]=Eo(),m=i||d("notification"),_=T=>FTe(T,n??g6,r??g6),E=()=>de({[`${m}-rtl`]:s??g==="rtl"}),S=()=>UTe(m),[C,b]=kCe({prefixCls:m,style:_,className:E,motion:S,closable:!0,closeIcon:aD(m),duration:u??$Te,pauseOnHover:!0,getContainer:()=>(o==null?void 0:o())||(h==null?void 0:h())||document.body,maxCount:a,onAllRemoved:c,renderNotifications:HTe,stack:l===!1?!1:{threshold:typeof l=="object"?l==null?void 0:l.threshold:void 0,offset:8,gap:p.margin}});return le.useImperativeHandle(t,()=>Object.assign(Object.assign({},C),{prefixCls:m,notification:f})),b});function DY(e){const t=le.useRef(null);return LC(),[le.useMemo(()=>{const r=s=>{var c;if(!t.current)return;const{open:l,prefixCls:u,notification:d}=t.current,h=`${u}-notice`,{message:f,description:g,icon:p,type:m,btn:_,className:E,style:S,role:C="alert",closeIcon:b,closable:T}=s,R=BTe(s,["message","description","icon","type","btn","className","style","role","closeIcon","closable"]),A=aD(h,typeof b<"u"?b:d==null?void 0:d.closeIcon);return l(Object.assign(Object.assign({placement:(c=e==null?void 0:e.placement)!==null&&c!==void 0?c:VTe},R),{content:le.createElement(PY,{prefixCls:h,icon:p,type:m,message:f,description:g,btn:_,role:C}),className:de(m&&`${h}-${m}`,E,d==null?void 0:d.className),style:Object.assign(Object.assign({},d==null?void 0:d.style),S),closeIcon:A,closable:T??!!A}))},o={open:r,destroy:s=>{var c,l;s!==void 0?(c=t.current)===null||c===void 0||c.close(s):(l=t.current)===null||l===void 0||l.destroy()}};return["success","info","warning","error"].forEach(s=>{o[s]=c=>r(Object.assign(Object.assign({},c),{type:s}))}),o},[]),le.createElement(zTe,Object.assign({key:"notification-holder"},e,{ref:t}))]}function WTe(e){return DY(e)}const GTe=le.createContext({});function KTe(e){return t=>v.createElement(th,{theme:{token:{motion:!1,zIndexPopupBase:0}}},v.createElement(e,Object.assign({},t)))}const qTe=(e,t,n,r)=>KTe(o=>{const{prefixCls:a,style:s}=o,c=v.useRef(null),[l,u]=v.useState(0),[d,h]=v.useState(0),[f,g]=go(!1,{value:o.open}),{getPrefixCls:p}=v.useContext(en),m=p(t||"select",a);v.useEffect(()=>{if(g(!0),typeof ResizeObserver<"u"){const S=new ResizeObserver(b=>{const T=b[0].target;u(T.offsetHeight+8),h(T.offsetWidth)}),C=setInterval(()=>{var b;const T=n?`.${n(m)}`:`.${m}-dropdown`,R=(b=c.current)===null||b===void 0?void 0:b.querySelector(T);R&&(clearInterval(C),S.observe(R))},10);return()=>{clearInterval(C),S.disconnect()}}},[]);let _=Object.assign(Object.assign({},o),{style:Object.assign(Object.assign({},s),{margin:0}),open:f,visible:f,getPopupContainer:()=>c.current});r&&(_=r(_));const E={paddingBottom:l,position:"relative",minWidth:d};return v.createElement("div",{ref:c,style:E},v.createElement(e,Object.assign({},_)))}),YTe=qTe,LY=function(){if(typeof navigator>"u"||typeof window>"u")return!1;var e=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(e==null?void 0:e.substr(0,4))};var WC=function(t){var n=t.className,r=t.customizeIcon,i=t.customizeIconProps,o=t.children,a=t.onMouseDown,s=t.onClick,c=typeof r=="function"?r(i):r;return v.createElement("span",{className:n,onMouseDown:function(u){u.preventDefault(),a==null||a(u)},style:{userSelect:"none",WebkitUserSelect:"none"},unselectable:"on",onClick:s,"aria-hidden":!0},c!==void 0?c:v.createElement("span",{className:de(n.split(/\s+/).map(function(l){return"".concat(l,"-icon")}))},o))},XTe=function(t,n,r,i,o){var a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1,s=arguments.length>6?arguments[6]:void 0,c=arguments.length>7?arguments[7]:void 0,l=le.useMemo(function(){if(yt(i)==="object")return i.clearIcon;if(o)return o},[i,o]),u=le.useMemo(function(){return!!(!a&&i&&(r.length||s)&&!(c==="combobox"&&s===""))},[i,a,r.length,s,c]);return{allowClear:u,clearIcon:le.createElement(WC,{className:"".concat(t,"-clear"),onMouseDown:n,customizeIcon:l},"×")}},kY=v.createContext(null);function JTe(){return v.useContext(kY)}function QTe(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:10,t=v.useState(!1),n=ce(t,2),r=n[0],i=n[1],o=v.useRef(null),a=function(){window.clearTimeout(o.current)};v.useEffect(function(){return a},[]);var s=function(l,u){a(),o.current=window.setTimeout(function(){i(l),u&&u()},e)};return[r,s,a]}function MY(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:250,t=v.useRef(null),n=v.useRef(null);v.useEffect(function(){return function(){window.clearTimeout(n.current)}},[]);function r(i){(i||t.current===null)&&(t.current=i),window.clearTimeout(n.current),n.current=window.setTimeout(function(){t.current=null},e)}return[function(){return t.current},r]}function ZTe(e,t,n,r){var i=v.useRef(null);i.current={open:t,triggerOpen:n,customizedTrigger:r},v.useEffect(function(){function o(a){var s;if(!((s=i.current)!==null&&s!==void 0&&s.customizedTrigger)){var c=a.target;c.shadowRoot&&a.composed&&(c=a.composedPath()[0]||c),i.current.open&&e().filter(function(l){return l}).every(function(l){return!l.contains(c)&&l!==c})&&i.current.triggerOpen(!1)}}return window.addEventListener("mousedown",o),function(){return window.removeEventListener("mousedown",o)}},[])}function eRe(e){return![Oe.ESC,Oe.SHIFT,Oe.BACKSPACE,Oe.TAB,Oe.WIN_KEY,Oe.ALT,Oe.META,Oe.WIN_KEY_RIGHT,Oe.CTRL,Oe.SEMICOLON,Oe.EQUALS,Oe.CAPS_LOCK,Oe.CONTEXT_MENU,Oe.F1,Oe.F2,Oe.F3,Oe.F4,Oe.F5,Oe.F6,Oe.F7,Oe.F8,Oe.F9,Oe.F10,Oe.F11,Oe.F12].includes(e)}var tRe=["prefixCls","invalidate","item","renderItem","responsive","responsiveDisabled","registerSize","itemKey","className","style","children","display","order","component"],Nh=void 0;function nRe(e,t){var n=e.prefixCls,r=e.invalidate,i=e.item,o=e.renderItem,a=e.responsive,s=e.responsiveDisabled,c=e.registerSize,l=e.itemKey,u=e.className,d=e.style,h=e.children,f=e.display,g=e.order,p=e.component,m=p===void 0?"div":p,_=kt(e,tRe),E=a&&!f;function S(A){c(l,A)}v.useEffect(function(){return function(){S(null)}},[]);var C=o&&i!==Nh?o(i):h,b;r||(b={opacity:E?0:1,height:E?0:Nh,overflowY:E?"hidden":Nh,order:a?g:Nh,pointerEvents:E?"none":Nh,position:E?"absolute":Nh});var T={};E&&(T["aria-hidden"]=!0);var R=v.createElement(m,Ee({className:de(!r&&n,u),style:Y(Y({},b),d)},T,_,{ref:t}),C);return a&&(R=v.createElement(Sl,{onResize:function(O){var x=O.offsetWidth;S(x)},disabled:s},R)),R}var d0=v.forwardRef(nRe);d0.displayName="Item";function rRe(e){if(typeof MessageChannel>"u")sr(e);else{var t=new MessageChannel;t.port1.onmessage=function(){return e()},t.port2.postMessage(void 0)}}function iRe(){var e=v.useRef(null),t=function(r){e.current||(e.current=[],rRe(function(){Oc.unstable_batchedUpdates(function(){e.current.forEach(function(i){i()}),e.current=null})})),e.current.push(r)};return t}function cm(e,t){var n=v.useState(t),r=ce(n,2),i=r[0],o=r[1],a=Pi(function(s){e(function(){o(s)})});return[i,a]}var QS=le.createContext(null),oRe=["component"],aRe=["className"],sRe=["className"],cRe=function(t,n){var r=v.useContext(QS);if(!r){var i=t.component,o=i===void 0?"div":i,a=kt(t,oRe);return v.createElement(o,Ee({},a,{ref:n}))}var s=r.className,c=kt(r,aRe),l=t.className,u=kt(t,sRe);return v.createElement(QS.Provider,{value:null},v.createElement(d0,Ee({ref:n,className:de(s,l)},c,u)))},FY=v.forwardRef(cRe);FY.displayName="RawItem";var lRe=["prefixCls","data","renderItem","renderRawItem","itemKey","itemWidth","ssr","style","className","maxCount","renderRest","renderRawRest","suffix","component","itemComponent","onVisibleChange"],UY="responsive",BY="invalidate";function uRe(e){return"+ ".concat(e.length," ...")}function dRe(e,t){var n=e.prefixCls,r=n===void 0?"rc-overflow":n,i=e.data,o=i===void 0?[]:i,a=e.renderItem,s=e.renderRawItem,c=e.itemKey,l=e.itemWidth,u=l===void 0?10:l,d=e.ssr,h=e.style,f=e.className,g=e.maxCount,p=e.renderRest,m=e.renderRawRest,_=e.suffix,E=e.component,S=E===void 0?"div":E,C=e.itemComponent,b=e.onVisibleChange,T=kt(e,lRe),R=d==="full",A=iRe(),O=cm(A,null),x=ce(O,2),M=x[0],$=x[1],U=M||0,V=cm(A,new Map),W=ce(V,2),z=W[0],L=W[1],D=cm(A,0),j=ce(D,2),F=j[0],y=j[1],I=cm(A,0),N=ce(I,2),B=N[0],K=N[1],X=cm(A,0),ee=ce(X,2),ne=ee[0],fe=ee[1],ae=v.useState(null),oe=ce(ae,2),he=oe[0],me=oe[1],ie=v.useState(null),te=ce(ie,2),ge=te[0],pe=te[1],be=v.useMemo(function(){return ge===null&&R?Number.MAX_SAFE_INTEGER:ge||0},[ge,M]),Se=v.useState(!1),ue=ce(Se,2),re=ue[0],Re=ue[1],we="".concat(r,"-item"),xe=Math.max(F,B),We=g===UY,Ve=o.length&&We,Rt=g===BY,xt=Ve||typeof g=="number"&&o.length>g,Xe=v.useMemo(function(){var ct=o;return Ve?M===null&&R?ct=o:ct=o.slice(0,Math.min(o.length,U/u)):typeof g=="number"&&(ct=o.slice(0,g)),ct},[o,u,M,g,Ve]),Ge=v.useMemo(function(){return Ve?o.slice(be+1):o.slice(Xe.length)},[o,Xe,Ve,be]),Je=v.useCallback(function(ct,Be){var nt;return typeof c=="function"?c(ct):(nt=c&&(ct==null?void 0:ct[c]))!==null&&nt!==void 0?nt:Be},[c]),st=v.useCallback(a||function(ct){return ct},[a]);function At(ct,Be,nt){ge===ct&&(Be===void 0||Be===he)||(pe(ct),nt||(Re(ct<o.length-1),b==null||b(ct)),Be!==void 0&&me(Be))}function Ot(ct,Be){$(Be.clientWidth)}function dn(ct,Be){L(function(nt){var Bt=new Map(nt);return Be===null?Bt.delete(ct):Bt.set(ct,Be),Bt})}function an(ct,Be){K(Be),y(B)}function on(ct,Be){fe(Be)}function ke(ct){return z.get(Je(Xe[ct],ct))}Mn(function(){if(U&&typeof xe=="number"&&Xe){var ct=ne,Be=Xe.length,nt=Be-1;if(!Be){At(0,null);return}for(var Bt=0;Bt<Be;Bt+=1){var Le=ke(Bt);if(R&&(Le=Le||0),Le===void 0){At(Bt-1,void 0,!0);break}if(ct+=Le,nt===0&&ct<=U||Bt===nt-1&&ct+ke(nt)<=U){At(nt,null);break}else if(ct+xe>U){At(Bt-1,ct-Le-ne+B);break}}_&&ke(0)+ne>U&&me(null)}},[U,z,B,ne,Je,Xe]);var Ze=re&&!!Ge.length,Mt={};he!==null&&Ve&&(Mt={position:"absolute",left:he,top:0});var En={prefixCls:we,responsive:Ve,component:C,invalidate:Rt},nr=s?function(ct,Be){var nt=Je(ct,Be);return v.createElement(QS.Provider,{key:nt,value:Y(Y({},En),{},{order:Be,item:ct,itemKey:nt,registerSize:dn,display:Be<=be})},s(ct,Be))}:function(ct,Be){var nt=Je(ct,Be);return v.createElement(d0,Ee({},En,{order:Be,key:nt,item:ct,renderItem:st,itemKey:nt,registerSize:dn,display:Be<=be}))},_n,qt={order:Ze?be:Number.MAX_SAFE_INTEGER,className:"".concat(we,"-rest"),registerSize:an,display:Ze};if(m)m&&(_n=v.createElement(QS.Provider,{value:Y(Y({},En),qt)},m(Ge)));else{var it=p||uRe;_n=v.createElement(d0,Ee({},En,qt),typeof it=="function"?it(Ge):it)}var Nt=v.createElement(S,Ee({className:de(!Rt&&r,f),style:h,ref:t},T),Xe.map(nr),xt?_n:null,_&&v.createElement(d0,Ee({},En,{responsive:We,responsiveDisabled:!Ve,order:be,className:"".concat(we,"-suffix"),registerSize:on,display:!0,style:Mt}),_));return We&&(Nt=v.createElement(Sl,{onResize:Ot,disabled:!Ve},Nt)),Nt}var Rc=v.forwardRef(dRe);Rc.displayName="Overflow";Rc.Item=FY;Rc.RESPONSIVE=UY;Rc.INVALIDATE=BY;var hRe=function(t,n){var r,i=t.prefixCls,o=t.id,a=t.inputElement,s=t.disabled,c=t.tabIndex,l=t.autoFocus,u=t.autoComplete,d=t.editable,h=t.activeDescendantId,f=t.value,g=t.maxLength,p=t.onKeyDown,m=t.onMouseDown,_=t.onChange,E=t.onPaste,S=t.onCompositionStart,C=t.onCompositionEnd,b=t.open,T=t.attrs,R=a||v.createElement("input",null),A=R,O=A.ref,x=A.props,M=x.onKeyDown,$=x.onChange,U=x.onMouseDown,V=x.onCompositionStart,W=x.onCompositionEnd,z=x.style;return"maxLength"in R.props,R=v.cloneElement(R,Y(Y(Y({type:"search"},x),{},{id:o,ref:gs(n,O),disabled:s,tabIndex:c,autoComplete:u||"off",autoFocus:l,className:de("".concat(i,"-selection-search-input"),(r=R)===null||r===void 0||(r=r.props)===null||r===void 0?void 0:r.className),role:"combobox","aria-expanded":b||!1,"aria-haspopup":"listbox","aria-owns":"".concat(o,"_list"),"aria-autocomplete":"list","aria-controls":"".concat(o,"_list"),"aria-activedescendant":b?h:void 0},T),{},{value:d?f:"",maxLength:g,readOnly:!d,unselectable:d?null:"on",style:Y(Y({},z),{},{opacity:d?null:0}),onKeyDown:function(D){p(D),M&&M(D)},onMouseDown:function(D){m(D),U&&U(D)},onChange:function(D){_(D),$&&$(D)},onCompositionStart:function(D){S(D),V&&V(D)},onCompositionEnd:function(D){C(D),W&&W(D)},onPaste:E})),R},$Y=v.forwardRef(hRe);function VY(e){return Array.isArray(e)?e:e!==void 0?[e]:[]}var fRe=typeof window<"u"&&window.document&&window.document.documentElement,pRe=fRe;function mRe(e){return e!=null}function gRe(e){return!e&&e!==0}function v6(e){return["string","number"].includes(yt(e))}function jY(e){var t=void 0;return e&&(v6(e.title)?t=e.title.toString():v6(e.label)&&(t=e.label.toString())),t}function vRe(e,t){pRe?v.useLayoutEffect(e,t):v.useEffect(e,t)}function ERe(e){var t;return(t=e.key)!==null&&t!==void 0?t:e.value}var E6=function(t){t.preventDefault(),t.stopPropagation()},_Re=function(t){var n=t.id,r=t.prefixCls,i=t.values,o=t.open,a=t.searchValue,s=t.autoClearSearchValue,c=t.inputRef,l=t.placeholder,u=t.disabled,d=t.mode,h=t.showSearch,f=t.autoFocus,g=t.autoComplete,p=t.activeDescendantId,m=t.tabIndex,_=t.removeIcon,E=t.maxTagCount,S=t.maxTagTextLength,C=t.maxTagPlaceholder,b=C===void 0?function(me){return"+ ".concat(me.length," ...")}:C,T=t.tagRender,R=t.onToggleOpen,A=t.onRemove,O=t.onInputChange,x=t.onInputPaste,M=t.onInputKeyDown,$=t.onInputMouseDown,U=t.onInputCompositionStart,V=t.onInputCompositionEnd,W=v.useRef(null),z=v.useState(0),L=ce(z,2),D=L[0],j=L[1],F=v.useState(!1),y=ce(F,2),I=y[0],N=y[1],B="".concat(r,"-selection"),K=o||d==="multiple"&&s===!1||d==="tags"?a:"",X=d==="tags"||d==="multiple"&&s===!1||h&&(o||I);vRe(function(){j(W.current.scrollWidth)},[K]);var ee=function(ie,te,ge,pe,be){return v.createElement("span",{title:jY(ie),className:de("".concat(B,"-item"),J({},"".concat(B,"-item-disabled"),ge))},v.createElement("span",{className:"".concat(B,"-item-content")},te),pe&&v.createElement(WC,{className:"".concat(B,"-item-remove"),onMouseDown:E6,onClick:be,customizeIcon:_},"×"))},ne=function(ie,te,ge,pe,be,Se){var ue=function(Re){E6(Re),R(!o)};return v.createElement("span",{onMouseDown:ue},T({label:te,value:ie,disabled:ge,closable:pe,onClose:be,isMaxTag:!!Se}))},fe=function(ie){var te=ie.disabled,ge=ie.label,pe=ie.value,be=!u&&!te,Se=ge;if(typeof S=="number"&&(typeof ge=="string"||typeof ge=="number")){var ue=String(Se);ue.length>S&&(Se="".concat(ue.slice(0,S),"..."))}var re=function(we){we&&we.stopPropagation(),A(ie)};return typeof T=="function"?ne(pe,Se,te,be,re):ee(ie,Se,te,be,re)},ae=function(ie){var te=typeof b=="function"?b(ie):b;return typeof T=="function"?ne(void 0,te,!1,!1,void 0,!0):ee({title:te},te,!1)},oe=v.createElement("div",{className:"".concat(B,"-search"),style:{width:D},onFocus:function(){N(!0)},onBlur:function(){N(!1)}},v.createElement($Y,{ref:c,open:o,prefixCls:r,id:n,inputElement:null,disabled:u,autoFocus:f,autoComplete:g,editable:X,activeDescendantId:p,value:K,onKeyDown:M,onMouseDown:$,onChange:O,onPaste:x,onCompositionStart:U,onCompositionEnd:V,tabIndex:m,attrs:Bd(t,!0)}),v.createElement("span",{ref:W,className:"".concat(B,"-search-mirror"),"aria-hidden":!0},K," ")),he=v.createElement(Rc,{prefixCls:"".concat(B,"-overflow"),data:i,renderItem:fe,renderRest:ae,suffix:oe,itemKey:ERe,maxCount:E});return v.createElement(v.Fragment,null,he,!i.length&&!K&&v.createElement("span",{className:"".concat(B,"-placeholder")},l))},SRe=function(t){var n=t.inputElement,r=t.prefixCls,i=t.id,o=t.inputRef,a=t.disabled,s=t.autoFocus,c=t.autoComplete,l=t.activeDescendantId,u=t.mode,d=t.open,h=t.values,f=t.placeholder,g=t.tabIndex,p=t.showSearch,m=t.searchValue,_=t.activeValue,E=t.maxLength,S=t.onInputKeyDown,C=t.onInputMouseDown,b=t.onInputChange,T=t.onInputPaste,R=t.onInputCompositionStart,A=t.onInputCompositionEnd,O=t.title,x=v.useState(!1),M=ce(x,2),$=M[0],U=M[1],V=u==="combobox",W=V||p,z=h[0],L=m||"";V&&_&&!$&&(L=_),v.useEffect(function(){V&&U(!1)},[V,_]);var D=u!=="combobox"&&!d&&!p?!1:!!L,j=O===void 0?jY(z):O,F=v.useMemo(function(){return z?null:v.createElement("span",{className:"".concat(r,"-selection-placeholder"),style:D?{visibility:"hidden"}:void 0},f)},[z,D,f,r]);return v.createElement(v.Fragment,null,v.createElement("span",{className:"".concat(r,"-selection-search")},v.createElement($Y,{ref:o,prefixCls:r,id:i,open:d,inputElement:n,disabled:a,autoFocus:s,autoComplete:c,editable:W,activeDescendantId:l,value:L,onKeyDown:S,onMouseDown:C,onChange:function(I){U(!0),b(I)},onPaste:T,onCompositionStart:R,onCompositionEnd:A,tabIndex:g,attrs:Bd(t,!0),maxLength:V?E:void 0})),!V&&z?v.createElement("span",{className:"".concat(r,"-selection-item"),title:j,style:D?{visibility:"hidden"}:void 0},z.label):null,F)},yRe=function(t,n){var r=v.useRef(null),i=v.useRef(!1),o=t.prefixCls,a=t.open,s=t.mode,c=t.showSearch,l=t.tokenWithEnter,u=t.disabled,d=t.autoClearSearchValue,h=t.onSearch,f=t.onSearchSubmit,g=t.onToggleOpen,p=t.onInputKeyDown,m=t.domRef;v.useImperativeHandle(n,function(){return{focus:function(D){r.current.focus(D)},blur:function(){r.current.blur()}}});var _=MY(0),E=ce(_,2),S=E[0],C=E[1],b=function(D){var j=D.which;(j===Oe.UP||j===Oe.DOWN)&&D.preventDefault(),p&&p(D),j===Oe.ENTER&&s==="tags"&&!i.current&&!a&&(f==null||f(D.target.value)),eRe(j)&&g(!0)},T=function(){C(!0)},R=v.useRef(null),A=function(D){h(D,!0,i.current)!==!1&&g(!0)},O=function(){i.current=!0},x=function(D){i.current=!1,s!=="combobox"&&A(D.target.value)},M=function(D){var j=D.target.value;if(l&&R.current&&/[\r\n]/.test(R.current)){var F=R.current.replace(/[\r\n]+$/,"").replace(/\r\n/g," ").replace(/[\r\n]/g," ");j=j.replace(F,R.current)}R.current=null,A(j)},$=function(D){var j=D.clipboardData,F=j==null?void 0:j.getData("text");R.current=F||""},U=function(D){var j=D.target;if(j!==r.current){var F=document.body.style.msTouchAction!==void 0;F?setTimeout(function(){r.current.focus()}):r.current.focus()}},V=function(D){var j=S();D.target!==r.current&&!j&&!(s==="combobox"&&u)&&D.preventDefault(),(s!=="combobox"&&(!c||!j)||!a)&&(a&&d!==!1&&h("",!0,!1),g())},W={inputRef:r,onInputKeyDown:b,onInputMouseDown:T,onInputChange:M,onInputPaste:$,onInputCompositionStart:O,onInputCompositionEnd:x},z=s==="multiple"||s==="tags"?v.createElement(_Re,Ee({},t,W)):v.createElement(SRe,Ee({},t,W));return v.createElement("div",{ref:m,className:"".concat(o,"-selector"),onClick:U,onMouseDown:V},z)},CRe=v.forwardRef(yRe);function bRe(e){var t=e.prefixCls,n=e.align,r=e.arrow,i=e.arrowPos,o=r||{},a=o.className,s=o.content,c=i.x,l=c===void 0?0:c,u=i.y,d=u===void 0?0:u,h=v.useRef();if(!n||!n.points)return null;var f={position:"absolute"};if(n.autoArrow!==!1){var g=n.points[0],p=n.points[1],m=g[0],_=g[1],E=p[0],S=p[1];m===E||!["t","b"].includes(m)?f.top=d:m==="t"?f.top=0:f.bottom=0,_===S||!["l","r"].includes(_)?f.left=l:_==="l"?f.left=0:f.right=0}return v.createElement("div",{ref:h,className:de("".concat(t,"-arrow"),a),style:f},s)}function TRe(e){var t=e.prefixCls,n=e.open,r=e.zIndex,i=e.mask,o=e.motion;return i?v.createElement(eh,Ee({},o,{motionAppear:!0,visible:n,removeOnLeave:!0}),function(a){var s=a.className;return v.createElement("div",{style:{zIndex:r},className:de("".concat(t,"-mask"),s)})}):null}var RRe=v.memo(function(e){var t=e.children;return t},function(e,t){return t.cache}),wRe=v.forwardRef(function(e,t){var n=e.popup,r=e.className,i=e.prefixCls,o=e.style,a=e.target,s=e.onVisibleChanged,c=e.open,l=e.keepDom,u=e.fresh,d=e.onClick,h=e.mask,f=e.arrow,g=e.arrowPos,p=e.align,m=e.motion,_=e.maskMotion,E=e.forceRender,S=e.getPopupContainer,C=e.autoDestroy,b=e.portal,T=e.zIndex,R=e.onMouseEnter,A=e.onMouseLeave,O=e.onPointerEnter,x=e.ready,M=e.offsetX,$=e.offsetY,U=e.offsetR,V=e.offsetB,W=e.onAlign,z=e.onPrepare,L=e.stretch,D=e.targetWidth,j=e.targetHeight,F=typeof n=="function"?n():n,y=c||l,I=(S==null?void 0:S.length)>0,N=v.useState(!S||!I),B=ce(N,2),K=B[0],X=B[1];if(Mn(function(){!K&&I&&a&&X(!0)},[K,I,a]),!K)return null;var ee="auto",ne={left:"-1000vw",top:"-1000vh",right:ee,bottom:ee};if(x||!c){var fe,ae=p.points,oe=p.dynamicInset||((fe=p._experimental)===null||fe===void 0?void 0:fe.dynamicInset),he=oe&&ae[0][1]==="r",me=oe&&ae[0][0]==="b";he?(ne.right=U,ne.left=ee):(ne.left=M,ne.right=ee),me?(ne.bottom=V,ne.top=ee):(ne.top=$,ne.bottom=ee)}var ie={};return L&&(L.includes("height")&&j?ie.height=j:L.includes("minHeight")&&j&&(ie.minHeight=j),L.includes("width")&&D?ie.width=D:L.includes("minWidth")&&D&&(ie.minWidth=D)),c||(ie.pointerEvents="none"),v.createElement(b,{open:E||y,getContainer:S&&function(){return S(a)},autoDestroy:C},v.createElement(TRe,{prefixCls:i,open:c,zIndex:T,mask:h,motion:_}),v.createElement(Sl,{onResize:W,disabled:!c},function(te){return v.createElement(eh,Ee({motionAppear:!0,motionEnter:!0,motionLeave:!0,removeOnLeave:!1,forceRender:E,leavedClassName:"".concat(i,"-hidden")},m,{onAppearPrepare:z,onEnterPrepare:z,visible:c,onVisibleChanged:function(pe){var be;m==null||(be=m.onVisibleChanged)===null||be===void 0||be.call(m,pe),s(pe)}}),function(ge,pe){var be=ge.className,Se=ge.style,ue=de(i,be,r);return v.createElement("div",{ref:gs(te,t,pe),className:ue,style:Y(Y(Y(Y({"--arrow-x":"".concat(g.x||0,"px"),"--arrow-y":"".concat(g.y||0,"px")},ne),ie),Se),{},{boxSizing:"border-box",zIndex:T},o),onMouseEnter:R,onMouseLeave:A,onPointerEnter:O,onClick:d},f&&v.createElement(bRe,{prefixCls:i,arrow:f,arrowPos:g,align:p}),v.createElement(RRe,{cache:!c&&!u},F))})}))}),IRe=v.forwardRef(function(e,t){var n=e.children,r=e.getTriggerDOMNode,i=Ip(n),o=v.useCallback(function(s){LP(t,r?r(s):s)},[r]),a=Hg(o,n.ref);return i?v.cloneElement(n,{ref:a}):n}),_6=v.createContext(null);function S6(e){return e?Array.isArray(e)?e:[e]:[]}function ARe(e,t,n,r){return v.useMemo(function(){var i=S6(n??t),o=S6(r??t),a=new Set(i),s=new Set(o);return e&&(a.has("hover")&&(a.delete("hover"),a.add("click")),s.has("hover")&&(s.delete("hover"),s.add("click"))),[a,s]},[e,t,n,r])}function ORe(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0;return n?e[0]===t[0]:e[0]===t[0]&&e[1]===t[1]}function xRe(e,t,n,r){for(var i=n.points,o=Object.keys(e),a=0;a<o.length;a+=1){var s,c=o[a];if(ORe((s=e[c])===null||s===void 0?void 0:s.points,i,r))return"".concat(t,"-placement-").concat(c)}return""}function y6(e,t,n,r){return t||(n?{motionName:"".concat(e,"-").concat(n)}:r?{motionName:r}:null)}function Kg(e){return e.ownerDocument.defaultView}function YO(e){for(var t=[],n=e==null?void 0:e.parentElement,r=["hidden","scroll","clip","auto"];n;){var i=Kg(n).getComputedStyle(n),o=i.overflowX,a=i.overflowY,s=i.overflow;[o,a,s].some(function(c){return r.includes(c)})&&t.push(n),n=n.parentElement}return t}function pg(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return Number.isNaN(e)?t:e}function lm(e){return pg(parseFloat(e),0)}function C6(e,t){var n=Y({},e);return(t||[]).forEach(function(r){if(!(r instanceof HTMLBodyElement||r instanceof HTMLHtmlElement)){var i=Kg(r).getComputedStyle(r),o=i.overflow,a=i.overflowClipMargin,s=i.borderTopWidth,c=i.borderBottomWidth,l=i.borderLeftWidth,u=i.borderRightWidth,d=r.getBoundingClientRect(),h=r.offsetHeight,f=r.clientHeight,g=r.offsetWidth,p=r.clientWidth,m=lm(s),_=lm(c),E=lm(l),S=lm(u),C=pg(Math.round(d.width/g*1e3)/1e3),b=pg(Math.round(d.height/h*1e3)/1e3),T=(g-p-E-S)*C,R=(h-f-m-_)*b,A=m*b,O=_*b,x=E*C,M=S*C,$=0,U=0;if(o==="clip"){var V=lm(a);$=V*C,U=V*b}var W=d.x+x-$,z=d.y+A-U,L=W+d.width+2*$-x-M-T,D=z+d.height+2*U-A-O-R;n.left=Math.max(n.left,W),n.top=Math.max(n.top,z),n.right=Math.min(n.right,L),n.bottom=Math.min(n.bottom,D)}}),n}function b6(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n="".concat(t),r=n.match(/^(.*)\%$/);return r?e*(parseFloat(r[1])/100):parseFloat(n)}function T6(e,t){var n=t||[],r=ce(n,2),i=r[0],o=r[1];return[b6(e.width,i),b6(e.height,o)]}function R6(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return[e[0],e[1]]}function Ph(e,t){var n=t[0],r=t[1],i,o;return n==="t"?o=e.y:n==="b"?o=e.y+e.height:o=e.y+e.height/2,r==="l"?i=e.x:r==="r"?i=e.x+e.width:i=e.x+e.width/2,{x:i,y:o}}function kl(e,t){var n={t:"b",b:"t",l:"r",r:"l"};return e.map(function(r,i){return i===t?n[r]||"c":r}).join("")}function NRe(e,t,n,r,i,o,a){var s=v.useState({ready:!1,offsetX:0,offsetY:0,offsetR:0,offsetB:0,arrowX:0,arrowY:0,scaleX:1,scaleY:1,align:i[r]||{}}),c=ce(s,2),l=c[0],u=c[1],d=v.useRef(0),h=v.useMemo(function(){return t?YO(t):[]},[t]),f=v.useRef({}),g=function(){f.current={}};e||g();var p=Pi(function(){if(t&&n&&e){let wi=function(nv,Bc){var ku=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ue,sh=F.x+nv,Fp=F.y+Bc,Eb=sh+fe,_b=Fp+ne,Sb=Math.max(sh,ku.left),yb=Math.max(Fp,ku.top),ot=Math.min(Eb,ku.right),Pt=Math.min(_b,ku.bottom);return Math.max(0,(ot-Sb)*(Pt-yb))},Mp=function(){rr=F.y+it,Sn=rr+ne,gt=F.x+qt,wr=gt+fe};var ah=wi,tv=Mp,E,S,C=t,b=C.ownerDocument,T=Kg(C),R=T.getComputedStyle(C),A=R.width,O=R.height,x=R.position,M=C.style.left,$=C.style.top,U=C.style.right,V=C.style.bottom,W=C.style.overflow,z=Y(Y({},i[r]),o),L=b.createElement("div");(E=C.parentElement)===null||E===void 0||E.appendChild(L),L.style.left="".concat(C.offsetLeft,"px"),L.style.top="".concat(C.offsetTop,"px"),L.style.position=x,L.style.height="".concat(C.offsetHeight,"px"),L.style.width="".concat(C.offsetWidth,"px"),C.style.left="0",C.style.top="0",C.style.right="auto",C.style.bottom="auto",C.style.overflow="hidden";var D;if(Array.isArray(n))D={x:n[0],y:n[1],width:0,height:0};else{var j=n.getBoundingClientRect();D={x:j.x,y:j.y,width:j.width,height:j.height}}var F=C.getBoundingClientRect(),y=b.documentElement,I=y.clientWidth,N=y.clientHeight,B=y.scrollWidth,K=y.scrollHeight,X=y.scrollTop,ee=y.scrollLeft,ne=F.height,fe=F.width,ae=D.height,oe=D.width,he={left:0,top:0,right:I,bottom:N},me={left:-ee,top:-X,right:B-ee,bottom:K-X},ie=z.htmlRegion,te="visible",ge="visibleFirst";ie!=="scroll"&&ie!==ge&&(ie=te);var pe=ie===ge,be=C6(me,h),Se=C6(he,h),ue=ie===te?Se:be,re=pe?Se:ue;C.style.left="auto",C.style.top="auto",C.style.right="0",C.style.bottom="0";var Re=C.getBoundingClientRect();C.style.left=M,C.style.top=$,C.style.right=U,C.style.bottom=V,C.style.overflow=W,(S=C.parentElement)===null||S===void 0||S.removeChild(L);var we=pg(Math.round(fe/parseFloat(A)*1e3)/1e3),xe=pg(Math.round(ne/parseFloat(O)*1e3)/1e3);if(we===0||xe===0||ig(n)&&!HC(n))return;var We=z.offset,Ve=z.targetOffset,Rt=T6(F,We),xt=ce(Rt,2),Xe=xt[0],Ge=xt[1],Je=T6(D,Ve),st=ce(Je,2),At=st[0],Ot=st[1];D.x-=At,D.y-=Ot;var dn=z.points||[],an=ce(dn,2),on=an[0],ke=an[1],Ze=R6(ke),Mt=R6(on),En=Ph(D,Ze),nr=Ph(F,Mt),_n=Y({},z),qt=En.x-nr.x+Xe,it=En.y-nr.y+Ge,Nt=wi(qt,it),ct=wi(qt,it,Se),Be=Ph(D,["t","l"]),nt=Ph(F,["t","l"]),Bt=Ph(D,["b","r"]),Le=Ph(F,["b","r"]),Ue=z.overflow||{},ze=Ue.adjustX,mt=Ue.adjustY,Ft=Ue.shiftX,$t=Ue.shiftY,Dn=function(Bc){return typeof Bc=="boolean"?Bc:Bc>=0},rr,Sn,gt,wr;Mp();var Co=Dn(mt),no=Mt[0]===Ze[0];if(Co&&Mt[0]==="t"&&(Sn>re.bottom||f.current.bt)){var Ir=it;no?Ir-=ne-ae:Ir=Be.y-Le.y-Ge;var Qr=wi(qt,Ir),et=wi(qt,Ir,Se);Qr>Nt||Qr===Nt&&(!pe||et>=ct)?(f.current.bt=!0,it=Ir,Ge=-Ge,_n.points=[kl(Mt,0),kl(Ze,0)]):f.current.bt=!1}if(Co&&Mt[0]==="b"&&(rr<re.top||f.current.tb)){var Qe=it;no?Qe+=ne-ae:Qe=Bt.y-nt.y-Ge;var dt=wi(qt,Qe),Un=wi(qt,Qe,Se);dt>Nt||dt===Nt&&(!pe||Un>=ct)?(f.current.tb=!0,it=Qe,Ge=-Ge,_n.points=[kl(Mt,0),kl(Ze,0)]):f.current.tb=!1}var Zr=Dn(ze),ro=Mt[1]===Ze[1];if(Zr&&Mt[1]==="l"&&(wr>re.right||f.current.rl)){var lr=qt;ro?lr-=fe-oe:lr=Be.x-Le.x-Xe;var io=wi(lr,it),Na=wi(lr,it,Se);io>Nt||io===Nt&&(!pe||Na>=ct)?(f.current.rl=!0,qt=lr,Xe=-Xe,_n.points=[kl(Mt,1),kl(Ze,1)]):f.current.rl=!1}if(Zr&&Mt[1]==="r"&&(gt<re.left||f.current.lr)){var lt=qt;ro?lt+=fe-oe:lt=Bt.x-nt.x-Xe;var Vt=wi(lt,it),Bn=wi(lt,it,Se);Vt>Nt||Vt===Nt&&(!pe||Bn>=ct)?(f.current.lr=!0,qt=lt,Xe=-Xe,_n.points=[kl(Mt,1),kl(Ze,1)]):f.current.lr=!1}Mp();var fr=Ft===!0?0:Ft;typeof fr=="number"&&(gt<Se.left&&(qt-=gt-Se.left-Xe,D.x+oe<Se.left+fr&&(qt+=D.x-Se.left+oe-fr)),wr>Se.right&&(qt-=wr-Se.right-Xe,D.x>Se.right-fr&&(qt+=D.x-Se.right+fr)));var pi=$t===!0?0:$t;typeof pi=="number"&&(rr<Se.top&&(it-=rr-Se.top-Ge,D.y+ae<Se.top+pi&&(it+=D.y-Se.top+ae-pi)),Sn>Se.bottom&&(it-=Sn-Se.bottom-Ge,D.y>Se.bottom-pi&&(it+=D.y-Se.bottom+pi)));var Fc=F.x+qt,bl=Fc+fe,ra=F.y+it,vs=ra+ne,Js=D.x,Pa=Js+oe,zt=D.y,jt=zt+ae,tn=Math.max(Fc,Js),Ut=Math.min(bl,Pa),wt=(tn+Ut)/2,An=wt-Fc,ir=Math.max(ra,zt),Hi=Math.min(vs,jt),zi=(ir+Hi)/2,Da=zi-ra;a==null||a(t,_n);var Wi=Re.right-F.x-(qt+F.width),Fo=Re.bottom-F.y-(it+F.height);we===1&&(qt=Math.round(qt),Wi=Math.round(Wi)),xe===1&&(it=Math.round(it),Fo=Math.round(Fo));var Uc={ready:!0,offsetX:qt/we,offsetY:it/xe,offsetR:Wi/we,offsetB:Fo/xe,arrowX:An/we,arrowY:Da/xe,scaleX:we,scaleY:xe,align:_n};u(Uc)}}),m=function(){d.current+=1;var S=d.current;Promise.resolve().then(function(){d.current===S&&p()})},_=function(){u(function(S){return Y(Y({},S),{},{ready:!1})})};return Mn(_,[r]),Mn(function(){e||_()},[e]),[l.ready,l.offsetX,l.offsetY,l.offsetR,l.offsetB,l.arrowX,l.arrowY,l.scaleX,l.scaleY,l.align,m]}function PRe(e,t,n,r,i){Mn(function(){if(e&&t&&n){let h=function(){r(),i()};var d=h,o=t,a=n,s=YO(o),c=YO(a),l=Kg(a),u=new Set([l].concat(Me(s),Me(c)));return u.forEach(function(f){f.addEventListener("scroll",h,{passive:!0})}),l.addEventListener("resize",h,{passive:!0}),r(),function(){u.forEach(function(f){f.removeEventListener("scroll",h),l.removeEventListener("resize",h)})}}},[e,t,n])}function DRe(e,t,n,r,i,o,a,s){var c=v.useRef(e);c.current=e,v.useEffect(function(){if(t&&r&&(!i||o)){var l=function(f){var g=f.target;c.current&&!a(g)&&s(!1)},u=Kg(r);u.addEventListener("mousedown",l,!0),u.addEventListener("contextmenu",l,!0);var d=qS(n);return d&&(d.addEventListener("mousedown",l,!0),d.addEventListener("contextmenu",l,!0)),function(){u.removeEventListener("mousedown",l,!0),u.removeEventListener("contextmenu",l,!0),d&&(d.removeEventListener("mousedown",l,!0),d.removeEventListener("contextmenu",l,!0))}}},[t,n,r,i,o])}var LRe=["prefixCls","children","action","showAction","hideAction","popupVisible","defaultPopupVisible","onPopupVisibleChange","afterPopupVisibleChange","mouseEnterDelay","mouseLeaveDelay","focusDelay","blurDelay","mask","maskClosable","getPopupContainer","forceRender","autoDestroy","destroyPopupOnHide","popup","popupClassName","popupStyle","popupPlacement","builtinPlacements","popupAlign","zIndex","stretch","getPopupClassNameFromAlign","fresh","alignPoint","onPopupClick","onPopupAlign","arrow","popupMotion","maskMotion","popupTransitionName","popupAnimation","maskTransitionName","maskAnimation","className","getTriggerDOMNode"];function kRe(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:uY,t=v.forwardRef(function(n,r){var i=n.prefixCls,o=i===void 0?"rc-trigger-popup":i,a=n.children,s=n.action,c=s===void 0?"hover":s,l=n.showAction,u=n.hideAction,d=n.popupVisible,h=n.defaultPopupVisible,f=n.onPopupVisibleChange,g=n.afterPopupVisibleChange,p=n.mouseEnterDelay,m=n.mouseLeaveDelay,_=m===void 0?.1:m,E=n.focusDelay,S=n.blurDelay,C=n.mask,b=n.maskClosable,T=b===void 0?!0:b,R=n.getPopupContainer,A=n.forceRender,O=n.autoDestroy,x=n.destroyPopupOnHide,M=n.popup,$=n.popupClassName,U=n.popupStyle,V=n.popupPlacement,W=n.builtinPlacements,z=W===void 0?{}:W,L=n.popupAlign,D=n.zIndex,j=n.stretch,F=n.getPopupClassNameFromAlign,y=n.fresh,I=n.alignPoint,N=n.onPopupClick,B=n.onPopupAlign,K=n.arrow,X=n.popupMotion,ee=n.maskMotion,ne=n.popupTransitionName,fe=n.popupAnimation,ae=n.maskTransitionName,oe=n.maskAnimation,he=n.className,me=n.getTriggerDOMNode,ie=kt(n,LRe),te=O||x||!1,ge=v.useState(!1),pe=ce(ge,2),be=pe[0],Se=pe[1];Mn(function(){Se(LY())},[]);var ue=v.useRef({}),re=v.useContext(_6),Re=v.useMemo(function(){return{registerSubPopup:function(Pt,Ur){ue.current[Pt]=Ur,re==null||re.registerSubPopup(Pt,Ur)}}},[re]),we=t1e(),xe=v.useState(null),We=ce(xe,2),Ve=We[0],Rt=We[1],xt=v.useRef(null),Xe=Pi(function(ot){xt.current=ot,ig(ot)&&Ve!==ot&&Rt(ot),re==null||re.registerSubPopup(we,ot)}),Ge=v.useState(null),Je=ce(Ge,2),st=Je[0],At=Je[1],Ot=v.useRef(null),dn=Pi(function(ot){ig(ot)&&st!==ot&&(At(ot),Ot.current=ot)}),an=v.Children.only(a),on=(an==null?void 0:an.props)||{},ke={},Ze=Pi(function(ot){var Pt,Ur,mi=st;return(mi==null?void 0:mi.contains(ot))||((Pt=qS(mi))===null||Pt===void 0?void 0:Pt.host)===ot||ot===mi||(Ve==null?void 0:Ve.contains(ot))||((Ur=qS(Ve))===null||Ur===void 0?void 0:Ur.host)===ot||ot===Ve||Object.values(ue.current).some(function(Br){return(Br==null?void 0:Br.contains(ot))||ot===Br})}),Mt=y6(o,X,fe,ne),En=y6(o,ee,oe,ae),nr=v.useState(h||!1),_n=ce(nr,2),qt=_n[0],it=_n[1],Nt=d??qt,ct=Pi(function(ot){d===void 0&&it(ot)});Mn(function(){it(d||!1)},[d]);var Be=v.useRef(Nt);Be.current=Nt;var nt=v.useRef([]);nt.current=[];var Bt=Pi(function(ot){var Pt;ct(ot),((Pt=nt.current[nt.current.length-1])!==null&&Pt!==void 0?Pt:Nt)!==ot&&(nt.current.push(ot),f==null||f(ot))}),Le=v.useRef(),Ue=function(){clearTimeout(Le.current)},ze=function(Pt){var Ur=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;Ue(),Ur===0?Bt(Pt):Le.current=setTimeout(function(){Bt(Pt)},Ur*1e3)};v.useEffect(function(){return Ue},[]);var mt=v.useState(!1),Ft=ce(mt,2),$t=Ft[0],Dn=Ft[1];Mn(function(ot){(!ot||Nt)&&Dn(!0)},[Nt]);var rr=v.useState(null),Sn=ce(rr,2),gt=Sn[0],wr=Sn[1],Co=v.useState([0,0]),no=ce(Co,2),Ir=no[0],Qr=no[1],et=function(Pt){Qr([Pt.clientX,Pt.clientY])},Qe=NRe(Nt,Ve,I?Ir:st,V,z,L,B),dt=ce(Qe,11),Un=dt[0],Zr=dt[1],ro=dt[2],lr=dt[3],io=dt[4],Na=dt[5],lt=dt[6],Vt=dt[7],Bn=dt[8],fr=dt[9],pi=dt[10],Fc=ARe(be,c,l,u),bl=ce(Fc,2),ra=bl[0],vs=bl[1],Js=ra.has("click"),Pa=vs.has("click")||vs.has("contextMenu"),zt=Pi(function(){$t||pi()}),jt=function(){Be.current&&I&&Pa&&ze(!1)};PRe(Nt,st,Ve,zt,jt),Mn(function(){zt()},[Ir,V]),Mn(function(){Nt&&!(z!=null&&z[V])&&zt()},[JSON.stringify(L)]);var tn=v.useMemo(function(){var ot=xRe(z,o,fr,I);return de(ot,F==null?void 0:F(fr))},[fr,F,z,o,I]);v.useImperativeHandle(r,function(){return{nativeElement:Ot.current,popupElement:xt.current,forceAlign:zt}});var Ut=v.useState(0),wt=ce(Ut,2),An=wt[0],ir=wt[1],Hi=v.useState(0),zi=ce(Hi,2),Da=zi[0],Wi=zi[1],Fo=function(){if(j&&st){var Pt=st.getBoundingClientRect();ir(Pt.width),Wi(Pt.height)}},Uc=function(){Fo(),zt()},ah=function(Pt){Dn(!1),pi(),g==null||g(Pt)},tv=function(){return new Promise(function(Pt){Fo(),wr(function(){return Pt})})};Mn(function(){gt&&(pi(),gt(),wr(null))},[gt]);function wi(ot,Pt,Ur,mi){ke[ot]=function(Br){var rv;mi==null||mi(Br),ze(Pt,Ur);for(var Cb=arguments.length,n2=new Array(Cb>1?Cb-1:0),iv=1;iv<Cb;iv++)n2[iv-1]=arguments[iv];(rv=on[ot])===null||rv===void 0||rv.call.apply(rv,[on,Br].concat(n2))}}(Js||Pa)&&(ke.onClick=function(ot){var Pt;Be.current&&Pa?ze(!1):!Be.current&&Js&&(et(ot),ze(!0));for(var Ur=arguments.length,mi=new Array(Ur>1?Ur-1:0),Br=1;Br<Ur;Br++)mi[Br-1]=arguments[Br];(Pt=on.onClick)===null||Pt===void 0||Pt.call.apply(Pt,[on,ot].concat(mi))}),DRe(Nt,Pa,st,Ve,C,T,Ze,ze);var Mp=ra.has("hover"),nv=vs.has("hover"),Bc,ku;Mp&&(wi("onMouseEnter",!0,p,function(ot){et(ot)}),wi("onPointerEnter",!0,p,function(ot){et(ot)}),Bc=function(Pt){(Nt||$t)&&Ve!==null&&Ve!==void 0&&Ve.contains(Pt.target)&&ze(!0,p)},I&&(ke.onMouseMove=function(ot){var Pt;(Pt=on.onMouseMove)===null||Pt===void 0||Pt.call(on,ot)})),nv&&(wi("onMouseLeave",!1,_),wi("onPointerLeave",!1,_),ku=function(){ze(!1,_)}),ra.has("focus")&&wi("onFocus",!0,E),vs.has("focus")&&wi("onBlur",!1,S),ra.has("contextMenu")&&(ke.onContextMenu=function(ot){var Pt;Be.current&&vs.has("contextMenu")?ze(!1):(et(ot),ze(!0)),ot.preventDefault();for(var Ur=arguments.length,mi=new Array(Ur>1?Ur-1:0),Br=1;Br<Ur;Br++)mi[Br-1]=arguments[Br];(Pt=on.onContextMenu)===null||Pt===void 0||Pt.call.apply(Pt,[on,ot].concat(mi))}),he&&(ke.className=de(on.className,he));var sh=Y(Y({},on),ke),Fp={},Eb=["onContextMenu","onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur"];Eb.forEach(function(ot){ie[ot]&&(Fp[ot]=function(){for(var Pt,Ur=arguments.length,mi=new Array(Ur),Br=0;Br<Ur;Br++)mi[Br]=arguments[Br];(Pt=sh[ot])===null||Pt===void 0||Pt.call.apply(Pt,[sh].concat(mi)),ie[ot].apply(ie,mi)})});var _b=v.cloneElement(an,Y(Y({},sh),Fp)),Sb={x:Na,y:lt},yb=K?Y({},K!==!0?K:{}):null;return v.createElement(v.Fragment,null,v.createElement(Sl,{disabled:!Nt,ref:dn,onResize:Uc},v.createElement(IRe,{getTriggerDOMNode:me},_b)),v.createElement(_6.Provider,{value:Re},v.createElement(wRe,{portal:e,ref:Xe,prefixCls:o,popup:M,className:de($,tn),style:U,target:st,onMouseEnter:Bc,onMouseLeave:ku,onPointerEnter:Bc,zIndex:D,open:Nt,keepDom:$t,fresh:y,onClick:N,mask:C,motion:Mt,maskMotion:En,onVisibleChanged:ah,onPrepare:tv,forceRender:A,autoDestroy:te,getPopupContainer:R,align:fr,arrow:yb,arrowPos:Sb,ready:Un,offsetX:Zr,offsetY:ro,offsetR:lr,offsetB:io,onAlign:zt,stretch:j,targetWidth:An/Vt,targetHeight:Da/Bn})))});return t}const sD=kRe(uY);var MRe=["prefixCls","disabled","visible","children","popupElement","animation","transitionName","dropdownStyle","dropdownClassName","direction","placement","builtinPlacements","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","getPopupContainer","empty","getTriggerDOMNode","onPopupVisibleChange","onPopupMouseEnter"],FRe=function(t){var n=t===!0?0:1;return{bottomLeft:{points:["tl","bl"],offset:[0,4],overflow:{adjustX:n,adjustY:1},htmlRegion:"scroll"},bottomRight:{points:["tr","br"],offset:[0,4],overflow:{adjustX:n,adjustY:1},htmlRegion:"scroll"},topLeft:{points:["bl","tl"],offset:[0,-4],overflow:{adjustX:n,adjustY:1},htmlRegion:"scroll"},topRight:{points:["br","tr"],offset:[0,-4],overflow:{adjustX:n,adjustY:1},htmlRegion:"scroll"}}},URe=function(t,n){var r=t.prefixCls;t.disabled;var i=t.visible,o=t.children,a=t.popupElement,s=t.animation,c=t.transitionName,l=t.dropdownStyle,u=t.dropdownClassName,d=t.direction,h=d===void 0?"ltr":d,f=t.placement,g=t.builtinPlacements,p=t.dropdownMatchSelectWidth,m=t.dropdownRender,_=t.dropdownAlign,E=t.getPopupContainer,S=t.empty,C=t.getTriggerDOMNode,b=t.onPopupVisibleChange,T=t.onPopupMouseEnter,R=kt(t,MRe),A="".concat(r,"-dropdown"),O=a;m&&(O=m(a));var x=v.useMemo(function(){return g||FRe(p)},[g,p]),M=s?"".concat(A,"-").concat(s):c,$=typeof p=="number",U=v.useMemo(function(){return $?null:p===!1?"minWidth":"width"},[p,$]),V=l;$&&(V=Y(Y({},V),{},{width:p}));var W=v.useRef(null);return v.useImperativeHandle(n,function(){return{getPopupElement:function(){var L;return(L=W.current)===null||L===void 0?void 0:L.popupElement}}}),v.createElement(sD,Ee({},R,{showAction:b?["click"]:[],hideAction:b?["click"]:[],popupPlacement:f||(h==="rtl"?"bottomRight":"bottomLeft"),builtinPlacements:x,prefixCls:A,popupTransitionName:M,popup:v.createElement("div",{onMouseEnter:T},O),ref:W,stretch:U,popupAlign:_,popupVisible:i,getPopupContainer:E,popupClassName:de(u,J({},"".concat(A,"-empty"),S)),popupStyle:V,getTriggerDOMNode:C,onPopupVisibleChange:b}),o)},BRe=v.forwardRef(URe);function w6(e,t){var n=e.key,r;return"value"in e&&(r=e.value),n??(r!==void 0?r:"rc-index-key-".concat(t))}function XO(e){return typeof e<"u"&&!Number.isNaN(e)}function HY(e,t){var n=e||{},r=n.label,i=n.value,o=n.options,a=n.groupLabel,s=r||(t?"children":"label");return{label:s,value:i||"value",options:o||"options",groupLabel:a||s}}function $Re(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.fieldNames,r=t.childrenAsData,i=[],o=HY(n,!1),a=o.label,s=o.value,c=o.options,l=o.groupLabel;function u(d,h){Array.isArray(d)&&d.forEach(function(f){if(h||!(c in f)){var g=f[s];i.push({key:w6(f,i.length),groupOption:h,data:f,label:f[a],value:g})}else{var p=f[l];p===void 0&&r&&(p=f.label),i.push({key:w6(f,i.length),group:!0,data:f,label:p}),u(f[c],!0)}})}return u(e,!1),i}function JO(e){var t=Y({},e);return"props"in t||Object.defineProperty(t,"props",{get:function(){return mo(!1,"Return type is option instead of Option instance. Please read value directly instead of reading from `props`."),t}}),t}var VRe=function(t,n,r){if(!n||!n.length)return null;var i=!1,o=function s(c,l){var u=tq(l),d=u[0],h=u.slice(1);if(!d)return[c];var f=c.split(d);return i=i||f.length>1,f.reduce(function(g,p){return[].concat(Me(g),Me(s(p,h)))},[]).filter(Boolean)},a=o(t,n);return i?typeof r<"u"?a.slice(0,r):a:null},cD=v.createContext(null);function jRe(e){var t=e.visible,n=e.values;if(!t)return null;var r=50;return v.createElement("span",{"aria-live":"polite",style:{width:0,height:0,position:"absolute",overflow:"hidden",opacity:0}},"".concat(n.slice(0,r).map(function(i){var o=i.label,a=i.value;return["number","string"].includes(yt(o))?o:a}).join(", ")),n.length>r?", ...":null)}var HRe=["id","prefixCls","className","showSearch","tagRender","direction","omitDomProps","displayValues","onDisplayValuesChange","emptyOptions","notFoundContent","onClear","mode","disabled","loading","getInputElement","getRawInputElement","open","defaultOpen","onDropdownVisibleChange","activeValue","onActiveValueChange","activeDescendantId","searchValue","autoClearSearchValue","onSearch","onSearchSplit","tokenSeparators","allowClear","suffixIcon","clearIcon","OptionList","animation","transitionName","dropdownStyle","dropdownClassName","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","placement","builtinPlacements","getPopupContainer","showAction","onFocus","onBlur","onKeyUp","onKeyDown","onMouseDown"],zRe=["value","onChange","removeIcon","placeholder","autoFocus","maxTagCount","maxTagTextLength","maxTagPlaceholder","choiceTransitionName","onInputKeyDown","onPopupScroll","tabIndex"],QO=function(t){return t==="tags"||t==="multiple"},WRe=v.forwardRef(function(e,t){var n,r=e.id,i=e.prefixCls,o=e.className,a=e.showSearch,s=e.tagRender,c=e.direction,l=e.omitDomProps,u=e.displayValues,d=e.onDisplayValuesChange,h=e.emptyOptions,f=e.notFoundContent,g=f===void 0?"Not Found":f,p=e.onClear,m=e.mode,_=e.disabled,E=e.loading,S=e.getInputElement,C=e.getRawInputElement,b=e.open,T=e.defaultOpen,R=e.onDropdownVisibleChange,A=e.activeValue,O=e.onActiveValueChange,x=e.activeDescendantId,M=e.searchValue,$=e.autoClearSearchValue,U=e.onSearch,V=e.onSearchSplit,W=e.tokenSeparators,z=e.allowClear,L=e.suffixIcon,D=e.clearIcon,j=e.OptionList,F=e.animation,y=e.transitionName,I=e.dropdownStyle,N=e.dropdownClassName,B=e.dropdownMatchSelectWidth,K=e.dropdownRender,X=e.dropdownAlign,ee=e.placement,ne=e.builtinPlacements,fe=e.getPopupContainer,ae=e.showAction,oe=ae===void 0?[]:ae,he=e.onFocus,me=e.onBlur,ie=e.onKeyUp,te=e.onKeyDown,ge=e.onMouseDown,pe=kt(e,HRe),be=QO(m),Se=(a!==void 0?a:be)||m==="combobox",ue=Y({},pe);zRe.forEach(function(zt){delete ue[zt]}),l==null||l.forEach(function(zt){delete ue[zt]});var re=v.useState(!1),Re=ce(re,2),we=Re[0],xe=Re[1];v.useEffect(function(){xe(LY())},[]);var We=v.useRef(null),Ve=v.useRef(null),Rt=v.useRef(null),xt=v.useRef(null),Xe=v.useRef(null),Ge=v.useRef(!1),Je=QTe(),st=ce(Je,3),At=st[0],Ot=st[1],dn=st[2];v.useImperativeHandle(t,function(){var zt,jt;return{focus:(zt=xt.current)===null||zt===void 0?void 0:zt.focus,blur:(jt=xt.current)===null||jt===void 0?void 0:jt.blur,scrollTo:function(Ut){var wt;return(wt=Xe.current)===null||wt===void 0?void 0:wt.scrollTo(Ut)},nativeElement:We.current||Ve.current}});var an=v.useMemo(function(){var zt;if(m!=="combobox")return M;var jt=(zt=u[0])===null||zt===void 0?void 0:zt.value;return typeof jt=="string"||typeof jt=="number"?String(jt):""},[M,m,u]),on=m==="combobox"&&typeof S=="function"&&S()||null,ke=typeof C=="function"&&C(),Ze=Hg(Ve,ke==null||(n=ke.props)===null||n===void 0?void 0:n.ref),Mt=v.useState(!1),En=ce(Mt,2),nr=En[0],_n=En[1];Mn(function(){_n(!0)},[]);var qt=go(!1,{defaultValue:T,value:b}),it=ce(qt,2),Nt=it[0],ct=it[1],Be=nr?Nt:!1,nt=!g&&h;(_||nt&&Be&&m==="combobox")&&(Be=!1);var Bt=nt?!1:Be,Le=v.useCallback(function(zt){var jt=zt!==void 0?zt:!Be;_||(ct(jt),Be!==jt&&(R==null||R(jt)))},[_,Be,ct,R]),Ue=v.useMemo(function(){return(W||[]).some(function(zt){return[`
`,`\r
`].includes(zt)})},[W]),ze=v.useContext(cD)||{},mt=ze.maxCount,Ft=ze.rawValues,$t=function(jt,tn,Ut){if(!(be&&XO(mt)&&(Ft==null?void 0:Ft.size)>=mt)){var wt=!0,An=jt;O==null||O(null);var ir=VRe(jt,W,XO(mt)?mt-Ft.size:void 0),Hi=Ut?null:ir;return m!=="combobox"&&Hi&&(An="",V==null||V(Hi),Le(!1),wt=!1),U&&an!==An&&U(An,{source:tn?"typing":"effect"}),wt}},Dn=function(jt){!jt||!jt.trim()||U(jt,{source:"submit"})};v.useEffect(function(){!Be&&!be&&m!=="combobox"&&$t("",!1,!1)},[Be]),v.useEffect(function(){Nt&&_&&ct(!1),_&&!Ge.current&&Ot(!1)},[_]);var rr=MY(),Sn=ce(rr,2),gt=Sn[0],wr=Sn[1],Co=function(jt){var tn=gt(),Ut=jt.which;if(Ut===Oe.ENTER&&(m!=="combobox"&&jt.preventDefault(),Be||Le(!0)),wr(!!an),Ut===Oe.BACKSPACE&&!tn&&be&&!an&&u.length){for(var wt=Me(u),An=null,ir=wt.length-1;ir>=0;ir-=1){var Hi=wt[ir];if(!Hi.disabled){wt.splice(ir,1),An=Hi;break}}An&&d(wt,{type:"remove",values:[An]})}for(var zi=arguments.length,Da=new Array(zi>1?zi-1:0),Wi=1;Wi<zi;Wi++)Da[Wi-1]=arguments[Wi];if(Be){var Fo;(Fo=Xe.current)===null||Fo===void 0||Fo.onKeyDown.apply(Fo,[jt].concat(Da))}te==null||te.apply(void 0,[jt].concat(Da))},no=function(jt){for(var tn=arguments.length,Ut=new Array(tn>1?tn-1:0),wt=1;wt<tn;wt++)Ut[wt-1]=arguments[wt];if(Be){var An;(An=Xe.current)===null||An===void 0||An.onKeyUp.apply(An,[jt].concat(Ut))}ie==null||ie.apply(void 0,[jt].concat(Ut))},Ir=function(jt){var tn=u.filter(function(Ut){return Ut!==jt});d(tn,{type:"remove",values:[jt]})},Qr=v.useRef(!1),et=function(){Ot(!0),_||(he&&!Qr.current&&he.apply(void 0,arguments),oe.includes("focus")&&Le(!0)),Qr.current=!0},Qe=function(){Ge.current=!0,Ot(!1,function(){Qr.current=!1,Ge.current=!1,Le(!1)}),!_&&(an&&(m==="tags"?U(an,{source:"submit"}):m==="multiple"&&U("",{source:"blur"})),me&&me.apply(void 0,arguments))},dt=[];v.useEffect(function(){return function(){dt.forEach(function(zt){return clearTimeout(zt)}),dt.splice(0,dt.length)}},[]);var Un=function(jt){var tn,Ut=jt.target,wt=(tn=Rt.current)===null||tn===void 0?void 0:tn.getPopupElement();if(wt&&wt.contains(Ut)){var An=setTimeout(function(){var Da=dt.indexOf(An);if(Da!==-1&&dt.splice(Da,1),dn(),!we&&!wt.contains(document.activeElement)){var Wi;(Wi=xt.current)===null||Wi===void 0||Wi.focus()}});dt.push(An)}for(var ir=arguments.length,Hi=new Array(ir>1?ir-1:0),zi=1;zi<ir;zi++)Hi[zi-1]=arguments[zi];ge==null||ge.apply(void 0,[jt].concat(Hi))},Zr=v.useState({}),ro=ce(Zr,2),lr=ro[1];function io(){lr({})}var Na;ke&&(Na=function(jt){Le(jt)}),ZTe(function(){var zt;return[We.current,(zt=Rt.current)===null||zt===void 0?void 0:zt.getPopupElement()]},Bt,Le,!!ke);var lt=v.useMemo(function(){return Y(Y({},e),{},{notFoundContent:g,open:Be,triggerOpen:Bt,id:r,showSearch:Se,multiple:be,toggleOpen:Le})},[e,g,Bt,Be,r,Se,be,Le]),Vt=!!L||E,Bn;Vt&&(Bn=v.createElement(WC,{className:de("".concat(i,"-arrow"),J({},"".concat(i,"-arrow-loading"),E)),customizeIcon:L,customizeIconProps:{loading:E,searchValue:an,open:Be,focused:At,showSearch:Se}}));var fr=function(){var jt;p==null||p(),(jt=xt.current)===null||jt===void 0||jt.focus(),d([],{type:"clear",values:u}),$t("",!1,!1)},pi=XTe(i,fr,u,z,D,_,an,m),Fc=pi.allowClear,bl=pi.clearIcon,ra=v.createElement(j,{ref:Xe}),vs=de(i,o,J(J(J(J(J(J(J(J(J(J({},"".concat(i,"-focused"),At),"".concat(i,"-multiple"),be),"".concat(i,"-single"),!be),"".concat(i,"-allow-clear"),z),"".concat(i,"-show-arrow"),Vt),"".concat(i,"-disabled"),_),"".concat(i,"-loading"),E),"".concat(i,"-open"),Be),"".concat(i,"-customize-input"),on),"".concat(i,"-show-search"),Se)),Js=v.createElement(BRe,{ref:Rt,disabled:_,prefixCls:i,visible:Bt,popupElement:ra,animation:F,transitionName:y,dropdownStyle:I,dropdownClassName:N,direction:c,dropdownMatchSelectWidth:B,dropdownRender:K,dropdownAlign:X,placement:ee,builtinPlacements:ne,getPopupContainer:fe,empty:h,getTriggerDOMNode:function(jt){return Ve.current||jt},onPopupVisibleChange:Na,onPopupMouseEnter:io},ke?v.cloneElement(ke,{ref:Ze}):v.createElement(CRe,Ee({},e,{domRef:Ve,prefixCls:i,inputElement:on,ref:xt,id:r,showSearch:Se,autoClearSearchValue:$,mode:m,activeDescendantId:x,tagRender:s,values:u,open:Be,onToggleOpen:Le,activeValue:A,searchValue:an,onSearch:$t,onSearchSubmit:Dn,onRemove:Ir,tokenWithEnter:Ue}))),Pa;return ke?Pa=Js:Pa=v.createElement("div",Ee({className:vs},ue,{ref:We,onMouseDown:Un,onKeyDown:Co,onKeyUp:no,onFocus:et,onBlur:Qe}),v.createElement(jRe,{visible:At&&!Be,values:u}),Js,Bn,Fc&&bl),v.createElement(kY.Provider,{value:lt},Pa)}),lD=function(){return null};lD.isSelectOptGroup=!0;var uD=function(){return null};uD.isSelectOption=!0;var zY=v.forwardRef(function(e,t){var n=e.height,r=e.offsetY,i=e.offsetX,o=e.children,a=e.prefixCls,s=e.onInnerResize,c=e.innerProps,l=e.rtl,u=e.extra,d={},h={display:"flex",flexDirection:"column"};return r!==void 0&&(d={height:n,position:"relative",overflow:"hidden"},h=Y(Y({},h),{},J(J(J(J(J({transform:"translateY(".concat(r,"px)")},l?"marginRight":"marginLeft",-i),"position","absolute"),"left",0),"right",0),"top",0))),v.createElement("div",{style:d},v.createElement(Sl,{onResize:function(g){var p=g.offsetHeight;p&&s&&s()}},v.createElement("div",Ee({style:h,className:de(J({},"".concat(a,"-holder-inner"),a)),ref:t},c),o,u)))});zY.displayName="Filler";function GRe(e){var t=e.children,n=e.setRef,r=v.useCallback(function(i){n(i)},[]);return v.cloneElement(t,{ref:r})}function KRe(e,t,n,r,i,o,a,s){var c=s.getKey;return e.slice(t,n+1).map(function(l,u){var d=t+u,h=a(l,d,{style:{width:r},offsetX:i}),f=c(l);return v.createElement(GRe,{key:f,setRef:function(p){return o(l,p)}},h)})}function qRe(e,t,n){var r=e.length,i=t.length,o,a;if(r===0&&i===0)return null;r<i?(o=e,a=t):(o=t,a=e);var s={__EMPTY_ITEM__:!0};function c(g){return g!==void 0?n(g):s}for(var l=null,u=Math.abs(r-i)!==1,d=0;d<a.length;d+=1){var h=c(o[d]),f=c(a[d]);if(h!==f){l=d,u=u||h!==c(a[d+1]);break}}return l===null?null:{index:l,multiple:u}}function YRe(e,t,n){var r=v.useState(e),i=ce(r,2),o=i[0],a=i[1],s=v.useState(null),c=ce(s,2),l=c[0],u=c[1];return v.useEffect(function(){var d=qRe(o||[],e||[],t);(d==null?void 0:d.index)!==void 0&&(n==null||n(d.index),u(e[d.index])),a(e)},[e]),[l]}var I6=(typeof navigator>"u"?"undefined":yt(navigator))==="object"&&/Firefox/i.test(navigator.userAgent);const WY=function(e,t,n,r){var i=v.useRef(!1),o=v.useRef(null);function a(){clearTimeout(o.current),i.current=!0,o.current=setTimeout(function(){i.current=!1},50)}var s=v.useRef({top:e,bottom:t,left:n,right:r});return s.current.top=e,s.current.bottom=t,s.current.left=n,s.current.right=r,function(c,l){var u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,d=c?l<0&&s.current.left||l>0&&s.current.right:l<0&&s.current.top||l>0&&s.current.bottom;return u&&d?(clearTimeout(o.current),i.current=!1):(!d||i.current)&&a(),!i.current&&d}};function XRe(e,t,n,r,i,o,a){var s=v.useRef(0),c=v.useRef(null),l=v.useRef(null),u=v.useRef(!1),d=WY(t,n,r,i);function h(E,S){sr.cancel(c.current),s.current+=S,l.current=S,!d(!1,S)&&(I6||E.preventDefault(),c.current=sr(function(){var C=u.current?10:1;a(s.current*C),s.current=0}))}function f(E,S){a(S,!0),I6||E.preventDefault()}var g=v.useRef(null),p=v.useRef(null);function m(E){if(e){sr.cancel(p.current),p.current=sr(function(){g.current=null},2);var S=E.deltaX,C=E.deltaY,b=E.shiftKey,T=S,R=C;(g.current==="sx"||!g.current&&b&&C&&!S)&&(T=C,R=0,g.current="sx");var A=Math.abs(T),O=Math.abs(R);g.current===null&&(g.current=o&&A>O?"x":"y"),g.current==="y"?h(E,R):f(E,T)}}function _(E){e&&(u.current=E.detail===l.current)}return[m,_]}function JRe(e,t,n,r){var i=v.useMemo(function(){return[new Map,[]]},[e,n.id,r]),o=ce(i,2),a=o[0],s=o[1],c=function(u){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:u,h=a.get(u),f=a.get(d);if(h===void 0||f===void 0)for(var g=e.length,p=s.length;p<g;p+=1){var m,_=e[p],E=t(_);a.set(E,p);var S=(m=n.get(E))!==null&&m!==void 0?m:r;if(s[p]=(s[p-1]||0)+S,E===u&&(h=p),E===d&&(f=p),h!==void 0&&f!==void 0)break}return{top:s[h-1]||0,bottom:s[f]}};return c}var QRe=function(){function e(){Ui(this,e),J(this,"maps",void 0),J(this,"id",0),this.maps=Object.create(null)}return Bi(e,[{key:"set",value:function(n,r){this.maps[n]=r,this.id+=1}},{key:"get",value:function(n){return this.maps[n]}}]),e}();function ZRe(e,t,n){var r=v.useState(0),i=ce(r,2),o=i[0],a=i[1],s=v.useRef(new Map),c=v.useRef(new QRe),l=v.useRef();function u(){sr.cancel(l.current)}function d(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;u();var g=function(){s.current.forEach(function(m,_){if(m&&m.offsetParent){var E=a0(m),S=E.offsetHeight;c.current.get(_)!==S&&c.current.set(_,E.offsetHeight)}}),a(function(m){return m+1})};f?g():l.current=sr(g)}function h(f,g){var p=e(f),m=s.current.get(p);g?(s.current.set(p,g),d()):s.current.delete(p),!m!=!g&&(g?t==null||t(f):n==null||n(f))}return v.useEffect(function(){return u},[]),[h,d,c.current,o]}var A6=14/15;function ewe(e,t,n){var r=v.useRef(!1),i=v.useRef(0),o=v.useRef(0),a=v.useRef(null),s=v.useRef(null),c,l=function(f){if(r.current){var g=Math.ceil(f.touches[0].pageX),p=Math.ceil(f.touches[0].pageY),m=i.current-g,_=o.current-p,E=Math.abs(m)>Math.abs(_);E?i.current=g:o.current=p,n(E,E?m:_)&&f.preventDefault(),clearInterval(s.current),s.current=setInterval(function(){E?m*=A6:_*=A6;var S=Math.floor(E?m:_);(!n(E,S,!0)||Math.abs(S)<=.1)&&clearInterval(s.current)},16)}},u=function(){r.current=!1,c()},d=function(f){c(),f.touches.length===1&&!r.current&&(r.current=!0,i.current=Math.ceil(f.touches[0].pageX),o.current=Math.ceil(f.touches[0].pageY),a.current=f.target,a.current.addEventListener("touchmove",l),a.current.addEventListener("touchend",u))};c=function(){a.current&&(a.current.removeEventListener("touchmove",l),a.current.removeEventListener("touchend",u))},Mn(function(){return e&&t.current.addEventListener("touchstart",d),function(){var h;(h=t.current)===null||h===void 0||h.removeEventListener("touchstart",d),c(),clearInterval(s.current)}},[e])}var twe=10;function nwe(e,t,n,r,i,o,a,s){var c=v.useRef(),l=v.useState(null),u=ce(l,2),d=u[0],h=u[1];return Mn(function(){if(d&&d.times<twe){if(!e.current){h(function(j){return Y({},j)});return}o();var f=d.targetAlign,g=d.originAlign,p=d.index,m=d.offset,_=e.current.clientHeight,E=!1,S=f,C=null;if(_){for(var b=f||g,T=0,R=0,A=0,O=Math.min(t.length-1,p),x=0;x<=O;x+=1){var M=i(t[x]);R=T;var $=n.get(M);A=R+($===void 0?r:$),T=A}for(var U=b==="top"?m:_-m,V=O;V>=0;V-=1){var W=i(t[V]),z=n.get(W);if(z===void 0){E=!0;break}if(U-=z,U<=0)break}switch(b){case"top":C=R-m;break;case"bottom":C=A-_+m;break;default:{var L=e.current.scrollTop,D=L+_;R<L?S="top":A>D&&(S="bottom")}}C!==null&&a(C),C!==d.lastTop&&(E=!0)}E&&h(Y(Y({},d),{},{times:d.times+1,targetAlign:S,lastTop:C}))}},[d,e.current]),function(f){if(f==null){s();return}if(sr.cancel(c.current),typeof f=="number")a(f);else if(f&&yt(f)==="object"){var g,p=f.align;"index"in f?g=f.index:g=t.findIndex(function(E){return i(E)===f.key});var m=f.offset,_=m===void 0?0:m;h({times:0,index:g,offset:_,originAlign:p})}}}function O6(e,t){var n="touches"in e?e.touches[0]:e;return n[t?"pageX":"pageY"]}var x6=v.forwardRef(function(e,t){var n=e.prefixCls,r=e.rtl,i=e.scrollOffset,o=e.scrollRange,a=e.onStartMove,s=e.onStopMove,c=e.onScroll,l=e.horizontal,u=e.spinSize,d=e.containerSize,h=e.style,f=e.thumbStyle,g=v.useState(!1),p=ce(g,2),m=p[0],_=p[1],E=v.useState(null),S=ce(E,2),C=S[0],b=S[1],T=v.useState(null),R=ce(T,2),A=R[0],O=R[1],x=!r,M=v.useRef(),$=v.useRef(),U=v.useState(!1),V=ce(U,2),W=V[0],z=V[1],L=v.useRef(),D=function(){clearTimeout(L.current),z(!0),L.current=setTimeout(function(){z(!1)},3e3)},j=o-d||0,F=d-u||0,y=v.useMemo(function(){if(i===0||j===0)return 0;var ae=i/j;return ae*F},[i,j,F]),I=function(oe){oe.stopPropagation(),oe.preventDefault()},N=v.useRef({top:y,dragging:m,pageY:C,startTop:A});N.current={top:y,dragging:m,pageY:C,startTop:A};var B=function(oe){_(!0),b(O6(oe,l)),O(N.current.top),a(),oe.stopPropagation(),oe.preventDefault()};v.useEffect(function(){var ae=function(ie){ie.preventDefault()},oe=M.current,he=$.current;return oe.addEventListener("touchstart",ae),he.addEventListener("touchstart",B),function(){oe.removeEventListener("touchstart",ae),he.removeEventListener("touchstart",B)}},[]);var K=v.useRef();K.current=j;var X=v.useRef();X.current=F,v.useEffect(function(){if(m){var ae,oe=function(ie){var te=N.current,ge=te.dragging,pe=te.pageY,be=te.startTop;if(sr.cancel(ae),ge){var Se=O6(ie,l)-pe,ue=be;!x&&l?ue-=Se:ue+=Se;var re=K.current,Re=X.current,we=Re?ue/Re:0,xe=Math.ceil(we*re);xe=Math.max(xe,0),xe=Math.min(xe,re),ae=sr(function(){c(xe,l)})}},he=function(){_(!1),s()};return window.addEventListener("mousemove",oe),window.addEventListener("touchmove",oe),window.addEventListener("mouseup",he),window.addEventListener("touchend",he),function(){window.removeEventListener("mousemove",oe),window.removeEventListener("touchmove",oe),window.removeEventListener("mouseup",he),window.removeEventListener("touchend",he),sr.cancel(ae)}}},[m]),v.useEffect(function(){D()},[i]),v.useImperativeHandle(t,function(){return{delayHidden:D}});var ee="".concat(n,"-scrollbar"),ne={position:"absolute",visibility:W?null:"hidden"},fe={position:"absolute",background:"rgba(0, 0, 0, 0.5)",borderRadius:99,cursor:"pointer",userSelect:"none"};return l?(ne.height=8,ne.left=0,ne.right=0,ne.bottom=0,fe.height="100%",fe.width=u,x?fe.left=y:fe.right=y):(ne.width=8,ne.top=0,ne.bottom=0,x?ne.right=0:ne.left=0,fe.width="100%",fe.height=u,fe.top=y),v.createElement("div",{ref:M,className:de(ee,J(J(J({},"".concat(ee,"-horizontal"),l),"".concat(ee,"-vertical"),!l),"".concat(ee,"-visible"),W)),style:Y(Y({},ne),h),onMouseDown:I,onMouseMove:D},v.createElement("div",{ref:$,className:de("".concat(ee,"-thumb"),J({},"".concat(ee,"-thumb-moving"),m)),style:Y(Y({},fe),f),onMouseDown:B}))}),rwe=20;function N6(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=e/t*e;return isNaN(n)&&(n=0),n=Math.max(n,rwe),Math.floor(n)}var iwe=["prefixCls","className","height","itemHeight","fullHeight","style","data","children","itemKey","virtual","direction","scrollWidth","component","onScroll","onVirtualScroll","onVisibleChange","innerProps","extraRender","styles"],owe=[],awe={overflowY:"auto",overflowAnchor:"none"};function swe(e,t){var n=e.prefixCls,r=n===void 0?"rc-virtual-list":n,i=e.className,o=e.height,a=e.itemHeight,s=e.fullHeight,c=s===void 0?!0:s,l=e.style,u=e.data,d=e.children,h=e.itemKey,f=e.virtual,g=e.direction,p=e.scrollWidth,m=e.component,_=m===void 0?"div":m,E=e.onScroll,S=e.onVirtualScroll,C=e.onVisibleChange,b=e.innerProps,T=e.extraRender,R=e.styles,A=kt(e,iwe),O=v.useCallback(function(et){return typeof h=="function"?h(et):et==null?void 0:et[h]},[h]),x=ZRe(O,null,null),M=ce(x,4),$=M[0],U=M[1],V=M[2],W=M[3],z=!!(f!==!1&&o&&a),L=v.useMemo(function(){return Object.values(V.maps).reduce(function(et,Qe){return et+Qe},0)},[V.id,V.maps]),D=z&&u&&(Math.max(a*u.length,L)>o||!!p),j=g==="rtl",F=de(r,J({},"".concat(r,"-rtl"),j),i),y=u||owe,I=v.useRef(),N=v.useRef(),B=v.useRef(),K=v.useState(0),X=ce(K,2),ee=X[0],ne=X[1],fe=v.useState(0),ae=ce(fe,2),oe=ae[0],he=ae[1],me=v.useState(!1),ie=ce(me,2),te=ie[0],ge=ie[1],pe=function(){ge(!0)},be=function(){ge(!1)},Se={getKey:O};function ue(et){ne(function(Qe){var dt;typeof et=="function"?dt=et(Qe):dt=et;var Un=nr(dt);return I.current.scrollTop=Un,Un})}var re=v.useRef({start:0,end:y.length}),Re=v.useRef(),we=YRe(y,O),xe=ce(we,1),We=xe[0];Re.current=We;var Ve=v.useMemo(function(){if(!z)return{scrollHeight:void 0,start:0,end:y.length-1,offset:void 0};if(!D){var et;return{scrollHeight:((et=N.current)===null||et===void 0?void 0:et.offsetHeight)||0,start:0,end:y.length-1,offset:void 0}}for(var Qe=0,dt,Un,Zr,ro=y.length,lr=0;lr<ro;lr+=1){var io=y[lr],Na=O(io),lt=V.get(Na),Vt=Qe+(lt===void 0?a:lt);Vt>=ee&&dt===void 0&&(dt=lr,Un=Qe),Vt>ee+o&&Zr===void 0&&(Zr=lr),Qe=Vt}return dt===void 0&&(dt=0,Un=0,Zr=Math.ceil(o/a)),Zr===void 0&&(Zr=y.length-1),Zr=Math.min(Zr+1,y.length-1),{scrollHeight:Qe,start:dt,end:Zr,offset:Un}},[D,z,ee,y,W,o]),Rt=Ve.scrollHeight,xt=Ve.start,Xe=Ve.end,Ge=Ve.offset;re.current.start=xt,re.current.end=Xe;var Je=v.useState({width:0,height:o}),st=ce(Je,2),At=st[0],Ot=st[1],dn=function(Qe){Ot({width:Qe.width||Qe.offsetWidth,height:Qe.height||Qe.offsetHeight})},an=v.useRef(),on=v.useRef(),ke=v.useMemo(function(){return N6(At.width,p)},[At.width,p]),Ze=v.useMemo(function(){return N6(At.height,Rt)},[At.height,Rt]),Mt=Rt-o,En=v.useRef(Mt);En.current=Mt;function nr(et){var Qe=et;return Number.isNaN(En.current)||(Qe=Math.min(Qe,En.current)),Qe=Math.max(Qe,0),Qe}var _n=ee<=0,qt=ee>=Mt,it=oe<=0,Nt=oe>=p,ct=WY(_n,qt,it,Nt),Be=function(){return{x:j?-oe:oe,y:ee}},nt=v.useRef(Be()),Bt=Pi(function(et){if(S){var Qe=Y(Y({},Be()),et);(nt.current.x!==Qe.x||nt.current.y!==Qe.y)&&(S(Qe),nt.current=Qe)}});function Le(et,Qe){var dt=et;Qe?(Oc.flushSync(function(){he(dt)}),Bt()):ue(dt)}function Ue(et){var Qe=et.currentTarget.scrollTop;Qe!==ee&&ue(Qe),E==null||E(et),Bt()}var ze=function(Qe){var dt=Qe,Un=p?p-At.width:0;return dt=Math.max(dt,0),dt=Math.min(dt,Un),dt},mt=Pi(function(et,Qe){Qe?(Oc.flushSync(function(){he(function(dt){var Un=dt+(j?-et:et);return ze(Un)})}),Bt()):ue(function(dt){var Un=dt+et;return Un})}),Ft=XRe(z,_n,qt,it,Nt,!!p,mt),$t=ce(Ft,2),Dn=$t[0],rr=$t[1];ewe(z,I,function(et,Qe,dt){return ct(et,Qe,dt)?!1:(Dn({preventDefault:function(){},deltaX:et?Qe:0,deltaY:et?0:Qe}),!0)}),Mn(function(){function et(dt){z&&dt.preventDefault()}var Qe=I.current;return Qe.addEventListener("wheel",Dn),Qe.addEventListener("DOMMouseScroll",rr),Qe.addEventListener("MozMousePixelScroll",et),function(){Qe.removeEventListener("wheel",Dn),Qe.removeEventListener("DOMMouseScroll",rr),Qe.removeEventListener("MozMousePixelScroll",et)}},[z]),Mn(function(){if(p){var et=ze(oe);he(et),Bt({x:et})}},[At.width,p]);var Sn=function(){var Qe,dt;(Qe=an.current)===null||Qe===void 0||Qe.delayHidden(),(dt=on.current)===null||dt===void 0||dt.delayHidden()},gt=nwe(I,y,V,a,O,function(){return U(!0)},ue,Sn);v.useImperativeHandle(t,function(){return{nativeElement:B.current,getScrollInfo:Be,scrollTo:function(Qe){function dt(Un){return Un&&yt(Un)==="object"&&("left"in Un||"top"in Un)}dt(Qe)?(Qe.left!==void 0&&he(ze(Qe.left)),gt(Qe.top)):gt(Qe)}}}),Mn(function(){if(C){var et=y.slice(xt,Xe+1);C(et,y)}},[xt,Xe,y]);var wr=JRe(y,O,V,a),Co=T==null?void 0:T({start:xt,end:Xe,virtual:D,offsetX:oe,offsetY:Ge,rtl:j,getSize:wr}),no=KRe(y,xt,Xe,p,oe,$,d,Se),Ir=null;o&&(Ir=Y(J({},c?"height":"maxHeight",o),awe),z&&(Ir.overflowY="hidden",p&&(Ir.overflowX="hidden"),te&&(Ir.pointerEvents="none")));var Qr={};return j&&(Qr.dir="rtl"),v.createElement("div",Ee({ref:B,style:Y(Y({},l),{},{position:"relative"}),className:F},Qr,A),v.createElement(Sl,{onResize:dn},v.createElement(_,{className:"".concat(r,"-holder"),style:Ir,ref:I,onScroll:Ue,onMouseEnter:Sn},v.createElement(zY,{prefixCls:r,height:Rt,offsetX:oe,offsetY:Ge,scrollWidth:p,onInnerResize:U,ref:N,innerProps:b,rtl:j,extra:Co},no))),D&&Rt>o&&v.createElement(x6,{ref:an,prefixCls:r,scrollOffset:ee,scrollRange:Rt,rtl:j,onScroll:Le,onStartMove:pe,onStopMove:be,spinSize:Ze,containerSize:At.height,style:R==null?void 0:R.verticalScrollBar,thumbStyle:R==null?void 0:R.verticalScrollBarThumb}),D&&p>At.width&&v.createElement(x6,{ref:on,prefixCls:r,scrollOffset:oe,scrollRange:p,rtl:j,onScroll:Le,onStartMove:pe,onStopMove:be,spinSize:ke,containerSize:At.width,horizontal:!0,style:R==null?void 0:R.horizontalScrollBar,thumbStyle:R==null?void 0:R.horizontalScrollBarThumb}))}var GY=v.forwardRef(swe);GY.displayName="List";function cwe(){return/(mac\sos|macintosh)/i.test(navigator.appVersion)}var lwe=["disabled","title","children","style","className"];function P6(e){return typeof e=="string"||typeof e=="number"}var uwe=function(t,n){var r=JTe(),i=r.prefixCls,o=r.id,a=r.open,s=r.multiple,c=r.mode,l=r.searchValue,u=r.toggleOpen,d=r.notFoundContent,h=r.onPopupScroll,f=v.useContext(cD),g=f.maxCount,p=f.flattenOptions,m=f.onActiveValue,_=f.defaultActiveFirstOption,E=f.onSelect,S=f.menuItemSelectedIcon,C=f.rawValues,b=f.fieldNames,T=f.virtual,R=f.direction,A=f.listHeight,O=f.listItemHeight,x=f.optionRender,M="".concat(i,"-item"),$=jg(function(){return p},[a,p],function(ae,oe){return oe[0]&&ae[1]!==oe[1]}),U=v.useRef(null),V=v.useMemo(function(){return s&&XO(g)&&(C==null?void 0:C.size)>=g},[s,g,C==null?void 0:C.size]),W=function(oe){oe.preventDefault()},z=function(oe){var he;(he=U.current)===null||he===void 0||he.scrollTo(typeof oe=="number"?{index:oe}:oe)},L=function(oe){for(var he=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,me=$.length,ie=0;ie<me;ie+=1){var te=(oe+ie*he+me)%me,ge=$[te]||{},pe=ge.group,be=ge.data;if(!pe&&!(be!=null&&be.disabled)&&!V)return te}return-1},D=v.useState(function(){return L(0)}),j=ce(D,2),F=j[0],y=j[1],I=function(oe){var he=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;y(oe);var me={source:he?"keyboard":"mouse"},ie=$[oe];if(!ie){m(null,-1,me);return}m(ie.value,oe,me)};v.useEffect(function(){I(_!==!1?L(0):-1)},[$.length,l]);var N=v.useCallback(function(ae){return C.has(ae)&&c!=="combobox"},[c,Me(C).toString(),C.size]);v.useEffect(function(){var ae=setTimeout(function(){if(!s&&a&&C.size===1){var he=Array.from(C)[0],me=$.findIndex(function(ie){var te=ie.data;return te.value===he});me!==-1&&(I(me),z(me))}});if(a){var oe;(oe=U.current)===null||oe===void 0||oe.scrollTo(void 0)}return function(){return clearTimeout(ae)}},[a,l]);var B=function(oe){oe!==void 0&&E(oe,{selected:!C.has(oe)}),s||u(!1)};if(v.useImperativeHandle(n,function(){return{onKeyDown:function(oe){var he=oe.which,me=oe.ctrlKey;switch(he){case Oe.N:case Oe.P:case Oe.UP:case Oe.DOWN:{var ie=0;if(he===Oe.UP?ie=-1:he===Oe.DOWN?ie=1:cwe()&&me&&(he===Oe.N?ie=1:he===Oe.P&&(ie=-1)),ie!==0){var te=L(F+ie,ie);z(te),I(te,!0)}break}case Oe.ENTER:{var ge,pe=$[F];pe&&!(pe!=null&&(ge=pe.data)!==null&&ge!==void 0&&ge.disabled)&&!V?B(pe.value):B(void 0),a&&oe.preventDefault();break}case Oe.ESC:u(!1),a&&oe.stopPropagation()}},onKeyUp:function(){},scrollTo:function(oe){z(oe)}}}),$.length===0)return v.createElement("div",{role:"listbox",id:"".concat(o,"_list"),className:"".concat(M,"-empty"),onMouseDown:W},d);var K=Object.keys(b).map(function(ae){return b[ae]}),X=function(oe){return oe.label};function ee(ae,oe){var he=ae.group;return{role:he?"presentation":"option",id:"".concat(o,"_list_").concat(oe)}}var ne=function(oe){var he=$[oe];if(!he)return null;var me=he.data||{},ie=me.value,te=he.group,ge=Bd(me,!0),pe=X(he);return he?v.createElement("div",Ee({"aria-label":typeof pe=="string"&&!te?pe:null},ge,{key:oe},ee(he,oe),{"aria-selected":N(ie)}),ie):null},fe={role:"listbox",id:"".concat(o,"_list")};return v.createElement(v.Fragment,null,T&&v.createElement("div",Ee({},fe,{style:{height:0,width:0,overflow:"hidden"}}),ne(F-1),ne(F),ne(F+1)),v.createElement(GY,{itemKey:"key",ref:U,data:$,height:A,itemHeight:O,fullHeight:!1,onMouseDown:W,onScroll:h,virtual:T,direction:R,innerProps:T?null:fe},function(ae,oe){var he=ae.group,me=ae.groupOption,ie=ae.data,te=ae.label,ge=ae.value,pe=ie.key;if(he){var be,Se=(be=ie.title)!==null&&be!==void 0?be:P6(te)?te.toString():void 0;return v.createElement("div",{className:de(M,"".concat(M,"-group"),ie.className),title:Se},te!==void 0?te:pe)}var ue=ie.disabled,re=ie.title;ie.children;var Re=ie.style,we=ie.className,xe=kt(ie,lwe),We=So(xe,K),Ve=N(ge),Rt=ue||!Ve&&V,xt="".concat(M,"-option"),Xe=de(M,xt,we,J(J(J(J({},"".concat(xt,"-grouped"),me),"".concat(xt,"-active"),F===oe&&!Rt),"".concat(xt,"-disabled"),Rt),"".concat(xt,"-selected"),Ve)),Ge=X(ae),Je=!S||typeof S=="function"||Ve,st=typeof Ge=="number"?Ge:Ge||ge,At=P6(st)?st.toString():void 0;return re!==void 0&&(At=re),v.createElement("div",Ee({},Bd(We),T?{}:ee(ae,oe),{"aria-selected":Ve,className:Xe,title:At,onMouseMove:function(){F===oe||Rt||I(oe)},onClick:function(){Rt||B(ge)},style:Re}),v.createElement("div",{className:"".concat(xt,"-content")},typeof x=="function"?x(ae,{index:oe}):st),v.isValidElement(S)||Ve,Je&&v.createElement(WC,{className:"".concat(M,"-option-state"),customizeIcon:S,customizeIconProps:{value:ge,disabled:Rt,isSelected:Ve}},Ve?"✓":null))}))},dwe=v.forwardRef(uwe);const hwe=function(e,t){var n=v.useRef({values:new Map,options:new Map}),r=v.useMemo(function(){var o=n.current,a=o.values,s=o.options,c=e.map(function(d){if(d.label===void 0){var h;return Y(Y({},d),{},{label:(h=a.get(d.value))===null||h===void 0?void 0:h.label})}return d}),l=new Map,u=new Map;return c.forEach(function(d){l.set(d.value,d),u.set(d.value,t.get(d.value)||s.get(d.value))}),n.current.values=l,n.current.options=u,c},[e,t]),i=v.useCallback(function(o){return t.get(o)||n.current.options.get(o)},[t]);return[r,i]};function GR(e,t){return VY(e).join("").toUpperCase().includes(t)}const fwe=function(e,t,n,r,i){return v.useMemo(function(){if(!n||r===!1)return e;var o=t.options,a=t.label,s=t.value,c=[],l=typeof r=="function",u=n.toUpperCase(),d=l?r:function(f,g){return i?GR(g[i],u):g[o]?GR(g[a!=="children"?a:"label"],u):GR(g[s],u)},h=l?function(f){return JO(f)}:function(f){return f};return e.forEach(function(f){if(f[o]){var g=d(n,h(f));if(g)c.push(f);else{var p=f[o].filter(function(m){return d(n,h(m))});p.length&&c.push(Y(Y({},f),{},J({},o,p)))}return}d(n,h(f))&&c.push(f)}),c},[e,r,i,n,t])};var D6=0,pwe=No();function mwe(){var e;return pwe?(e=D6,D6+=1):e="TEST_OR_SSR",e}function gwe(e){var t=v.useState(),n=ce(t,2),r=n[0],i=n[1];return v.useEffect(function(){i("rc_select_".concat(mwe()))},[]),e||r}var vwe=["children","value"],Ewe=["children"];function _we(e){var t=e,n=t.key,r=t.props,i=r.children,o=r.value,a=kt(r,vwe);return Y({key:n,value:o!==void 0?o:n,children:i},a)}function KY(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return zs(e).map(function(n,r){if(!v.isValidElement(n)||!n.type)return null;var i=n,o=i.type.isSelectOptGroup,a=i.key,s=i.props,c=s.children,l=kt(s,Ewe);return t||!o?_we(n):Y(Y({key:"__RC_SELECT_GRP__".concat(a===null?r:a,"__"),label:a},l),{},{options:KY(c)})}).filter(function(n){return n})}var Swe=function(t,n,r,i,o){return v.useMemo(function(){var a=t,s=!t;s&&(a=KY(n));var c=new Map,l=new Map,u=function(f,g,p){p&&typeof p=="string"&&f.set(g[p],g)},d=function h(f){for(var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,p=0;p<f.length;p+=1){var m=f[p];!m[r.options]||g?(c.set(m[r.value],m),u(l,m,r.label),u(l,m,i),u(l,m,o)):h(m[r.options],!0)}};return d(a),{options:a,valueOptions:c,labelOptions:l}},[t,n,r,i,o])};function L6(e){var t=v.useRef();t.current=e;var n=v.useCallback(function(){return t.current.apply(t,arguments)},[]);return n}var ywe=["id","mode","prefixCls","backfill","fieldNames","inputValue","searchValue","onSearch","autoClearSearchValue","onSelect","onDeselect","dropdownMatchSelectWidth","filterOption","filterSort","optionFilterProp","optionLabelProp","options","optionRender","children","defaultActiveFirstOption","menuItemSelectedIcon","virtual","direction","listHeight","listItemHeight","labelRender","value","defaultValue","labelInValue","onChange","maxCount"],Cwe=["inputValue"];function bwe(e){return!e||yt(e)!=="object"}var Twe=v.forwardRef(function(e,t){var n=e.id,r=e.mode,i=e.prefixCls,o=i===void 0?"rc-select":i,a=e.backfill,s=e.fieldNames,c=e.inputValue,l=e.searchValue,u=e.onSearch,d=e.autoClearSearchValue,h=d===void 0?!0:d,f=e.onSelect,g=e.onDeselect,p=e.dropdownMatchSelectWidth,m=p===void 0?!0:p,_=e.filterOption,E=e.filterSort,S=e.optionFilterProp,C=e.optionLabelProp,b=e.options,T=e.optionRender,R=e.children,A=e.defaultActiveFirstOption,O=e.menuItemSelectedIcon,x=e.virtual,M=e.direction,$=e.listHeight,U=$===void 0?200:$,V=e.listItemHeight,W=V===void 0?20:V,z=e.labelRender,L=e.value,D=e.defaultValue,j=e.labelInValue,F=e.onChange,y=e.maxCount,I=kt(e,ywe),N=gwe(n),B=QO(r),K=!!(!b&&R),X=v.useMemo(function(){return _===void 0&&r==="combobox"?!1:_},[_,r]),ee=v.useMemo(function(){return HY(s,K)},[JSON.stringify(s),K]),ne=go("",{value:l!==void 0?l:c,postState:function(Ue){return Ue||""}}),fe=ce(ne,2),ae=fe[0],oe=fe[1],he=Swe(b,R,ee,S,C),me=he.valueOptions,ie=he.labelOptions,te=he.options,ge=v.useCallback(function(Le){var Ue=VY(Le);return Ue.map(function(ze){var mt,Ft,$t,Dn,rr;if(bwe(ze))mt=ze;else{var Sn;$t=ze.key,Ft=ze.label,mt=(Sn=ze.value)!==null&&Sn!==void 0?Sn:$t}var gt=me.get(mt);if(gt){var wr;Ft===void 0&&(Ft=gt==null?void 0:gt[C||ee.label]),$t===void 0&&($t=(wr=gt==null?void 0:gt.key)!==null&&wr!==void 0?wr:mt),Dn=gt==null?void 0:gt.disabled,rr=gt==null?void 0:gt.title}return{label:Ft,value:mt,key:$t,disabled:Dn,title:rr}})},[ee,C,me]),pe=go(D,{value:L}),be=ce(pe,2),Se=be[0],ue=be[1],re=v.useMemo(function(){var Le,Ue=B&&Se===null?[]:Se,ze=ge(Ue);return r==="combobox"&&gRe((Le=ze[0])===null||Le===void 0?void 0:Le.value)?[]:ze},[Se,ge,r,B]),Re=hwe(re,me),we=ce(Re,2),xe=we[0],We=we[1],Ve=v.useMemo(function(){if(!r&&xe.length===1){var Le=xe[0];if(Le.value===null&&(Le.label===null||Le.label===void 0))return[]}return xe.map(function(Ue){var ze;return Y(Y({},Ue),{},{label:(ze=typeof z=="function"?z(Ue):Ue.label)!==null&&ze!==void 0?ze:Ue.value})})},[r,xe,z]),Rt=v.useMemo(function(){return new Set(xe.map(function(Le){return Le.value}))},[xe]);v.useEffect(function(){if(r==="combobox"){var Le,Ue=(Le=xe[0])===null||Le===void 0?void 0:Le.value;oe(mRe(Ue)?String(Ue):"")}},[xe]);var xt=L6(function(Le,Ue){var ze=Ue??Le;return J(J({},ee.value,Le),ee.label,ze)}),Xe=v.useMemo(function(){if(r!=="tags")return te;var Le=Me(te),Ue=function(mt){return me.has(mt)};return Me(xe).sort(function(ze,mt){return ze.value<mt.value?-1:1}).forEach(function(ze){var mt=ze.value;Ue(mt)||Le.push(xt(mt,ze.label))}),Le},[xt,te,me,xe,r]),Ge=fwe(Xe,ee,ae,X,S),Je=v.useMemo(function(){return r!=="tags"||!ae||Ge.some(function(Le){return Le[S||"value"]===ae})||Ge.some(function(Le){return Le[ee.value]===ae})?Ge:[xt(ae)].concat(Me(Ge))},[xt,S,r,Ge,ae,ee]),st=v.useMemo(function(){return E?Me(Je).sort(function(Le,Ue){return E(Le,Ue)}):Je},[Je,E]),At=v.useMemo(function(){return $Re(st,{fieldNames:ee,childrenAsData:K})},[st,ee,K]),Ot=function(Ue){var ze=ge(Ue);if(ue(ze),F&&(ze.length!==xe.length||ze.some(function($t,Dn){var rr;return((rr=xe[Dn])===null||rr===void 0?void 0:rr.value)!==($t==null?void 0:$t.value)}))){var mt=j?ze:ze.map(function($t){return $t.value}),Ft=ze.map(function($t){return JO(We($t.value))});F(B?mt:mt[0],B?Ft:Ft[0])}},dn=v.useState(null),an=ce(dn,2),on=an[0],ke=an[1],Ze=v.useState(0),Mt=ce(Ze,2),En=Mt[0],nr=Mt[1],_n=A!==void 0?A:r!=="combobox",qt=v.useCallback(function(Le,Ue){var ze=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},mt=ze.source,Ft=mt===void 0?"keyboard":mt;nr(Ue),a&&r==="combobox"&&Le!==null&&Ft==="keyboard"&&ke(String(Le))},[a,r]),it=function(Ue,ze,mt){var Ft=function(){var Qr,et=We(Ue);return[j?{label:et==null?void 0:et[ee.label],value:Ue,key:(Qr=et==null?void 0:et.key)!==null&&Qr!==void 0?Qr:Ue}:Ue,JO(et)]};if(ze&&f){var $t=Ft(),Dn=ce($t,2),rr=Dn[0],Sn=Dn[1];f(rr,Sn)}else if(!ze&&g&&mt!=="clear"){var gt=Ft(),wr=ce(gt,2),Co=wr[0],no=wr[1];g(Co,no)}},Nt=L6(function(Le,Ue){var ze,mt=B?Ue.selected:!0;mt?ze=B?[].concat(Me(xe),[Le]):[Le]:ze=xe.filter(function(Ft){return Ft.value!==Le}),Ot(ze),it(Le,mt),r==="combobox"?ke(""):(!QO||h)&&(oe(""),ke(""))}),ct=function(Ue,ze){Ot(Ue);var mt=ze.type,Ft=ze.values;(mt==="remove"||mt==="clear")&&Ft.forEach(function($t){it($t.value,!1,mt)})},Be=function(Ue,ze){if(oe(Ue),ke(null),ze.source==="submit"){var mt=(Ue||"").trim();if(mt){var Ft=Array.from(new Set([].concat(Me(Rt),[mt])));Ot(Ft),it(mt,!0),oe("")}return}ze.source!=="blur"&&(r==="combobox"&&Ot(Ue),u==null||u(Ue))},nt=function(Ue){var ze=Ue;r!=="tags"&&(ze=Ue.map(function(Ft){var $t=ie.get(Ft);return $t==null?void 0:$t.value}).filter(function(Ft){return Ft!==void 0}));var mt=Array.from(new Set([].concat(Me(Rt),Me(ze))));Ot(mt),mt.forEach(function(Ft){it(Ft,!0)})},Bt=v.useMemo(function(){var Le=x!==!1&&m!==!1;return Y(Y({},he),{},{flattenOptions:At,onActiveValue:qt,defaultActiveFirstOption:_n,onSelect:Nt,menuItemSelectedIcon:O,rawValues:Rt,fieldNames:ee,virtual:Le,direction:M,listHeight:U,listItemHeight:W,childrenAsData:K,maxCount:y,optionRender:T})},[y,he,At,qt,_n,Nt,O,Rt,ee,x,m,M,U,W,K,T]);return v.createElement(cD.Provider,{value:Bt},v.createElement(WRe,Ee({},I,{id:N,prefixCls:o,ref:t,omitDomProps:Cwe,mode:r,displayValues:Ve,onDisplayValuesChange:ct,direction:M,searchValue:ae,onSearch:Be,autoClearSearchValue:h,onSearchSplit:nt,dropdownMatchSelectWidth:m,OptionList:dwe,emptyOptions:!At.length,activeValue:on,activeDescendantId:"".concat(N,"_list_").concat(En)})))}),dD=Twe;dD.Option=uD;dD.OptGroup=lD;function ZS(e,t,n){return de({[`${e}-status-success`]:t==="success",[`${e}-status-warning`]:t==="warning",[`${e}-status-error`]:t==="error",[`${e}-status-validating`]:t==="validating",[`${e}-has-feedback`]:n})}const GC=(e,t)=>t||e,Rwe=()=>{const[,e]=Eo(),n=new bi(e.colorBgBase).toHsl().l<.5?{opacity:.65}:{};return v.createElement("svg",{style:n,width:"184",height:"152",viewBox:"0 0 184 152",xmlns:"http://www.w3.org/2000/svg"},v.createElement("g",{fill:"none",fillRule:"evenodd"},v.createElement("g",{transform:"translate(24 31.67)"},v.createElement("ellipse",{fillOpacity:".8",fill:"#F5F5F7",cx:"67.797",cy:"106.89",rx:"67.797",ry:"12.668"}),v.createElement("path",{d:"M122.034 69.674L98.109 40.229c-1.148-1.386-2.826-2.225-4.593-2.225h-51.44c-1.766 0-3.444.839-4.592 2.225L13.56 69.674v15.383h108.475V69.674z",fill:"#AEB8C2"}),v.createElement("path",{d:"M101.537 86.214L80.63 61.102c-1.001-1.207-2.507-1.867-4.048-1.867H31.724c-1.54 0-3.047.66-4.048 1.867L6.769 86.214v13.792h94.768V86.214z",fill:"url(#linearGradient-1)",transform:"translate(13.56)"}),v.createElement("path",{d:"M33.83 0h67.933a4 4 0 0 1 4 4v93.344a4 4 0 0 1-4 4H33.83a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4z",fill:"#F5F5F7"}),v.createElement("path",{d:"M42.678 9.953h50.237a2 2 0 0 1 2 2V36.91a2 2 0 0 1-2 2H42.678a2 2 0 0 1-2-2V11.953a2 2 0 0 1 2-2zM42.94 49.767h49.713a2.262 2.262 0 1 1 0 4.524H42.94a2.262 2.262 0 0 1 0-4.524zM42.94 61.53h49.713a2.262 2.262 0 1 1 0 4.525H42.94a2.262 2.262 0 0 1 0-4.525zM121.813 105.032c-.775 3.071-3.497 5.36-6.735 5.36H20.515c-3.238 0-5.96-2.29-6.734-5.36a7.309 7.309 0 0 1-.222-1.79V69.675h26.318c2.907 0 5.25 2.448 5.25 5.42v.04c0 2.971 2.37 5.37 5.277 5.37h34.785c2.907 0 5.277-2.421 5.277-5.393V75.1c0-2.972 2.343-5.426 5.25-5.426h26.318v33.569c0 .617-.077 1.216-.221 1.789z",fill:"#DCE0E6"})),v.createElement("path",{d:"M149.121 33.292l-6.83 2.65a1 1 0 0 1-1.317-1.23l1.937-6.207c-2.589-2.944-4.109-6.534-4.109-10.408C138.802 8.102 148.92 0 161.402 0 173.881 0 184 8.102 184 18.097c0 9.995-10.118 18.097-22.599 18.097-4.528 0-8.744-1.066-12.28-2.902z",fill:"#DCE0E6"}),v.createElement("g",{transform:"translate(149.65 15.383)",fill:"#FFF"},v.createElement("ellipse",{cx:"20.654",cy:"3.167",rx:"2.849",ry:"2.815"}),v.createElement("path",{d:"M5.698 5.63H0L2.898.704zM9.259.704h4.985V5.63H9.259z"}))))},wwe=Rwe,Iwe=()=>{const[,e]=Eo(),{colorFill:t,colorFillTertiary:n,colorFillQuaternary:r,colorBgContainer:i}=e,{borderColor:o,shadowColor:a,contentColor:s}=v.useMemo(()=>({borderColor:new bi(t).onBackground(i).toHexShortString(),shadowColor:new bi(n).onBackground(i).toHexShortString(),contentColor:new bi(r).onBackground(i).toHexShortString()}),[t,n,r,i]);return v.createElement("svg",{width:"64",height:"41",viewBox:"0 0 64 41",xmlns:"http://www.w3.org/2000/svg"},v.createElement("g",{transform:"translate(0 1)",fill:"none",fillRule:"evenodd"},v.createElement("ellipse",{fill:a,cx:"32",cy:"33",rx:"32",ry:"7"}),v.createElement("g",{fillRule:"nonzero",stroke:o},v.createElement("path",{d:"M55 12.76L44.854 1.258C44.367.474 43.656 0 42.907 0H21.093c-.749 0-1.46.474-1.947 1.257L9 12.761V22h46v-9.24z"}),v.createElement("path",{d:"M41.613 15.931c0-1.605.994-2.93 2.227-2.931H55v18.137C55 33.26 53.68 35 52.05 35h-40.1C10.32 35 9 33.259 9 31.137V13h11.16c1.233 0 2.227 1.323 2.227 2.928v.022c0 1.605 1.005 2.901 2.237 2.901h14.752c1.232 0 2.237-1.308 2.237-2.913v-.007z",fill:s}))))},Awe=Iwe,Owe=e=>{const{componentCls:t,margin:n,marginXS:r,marginXL:i,fontSize:o,lineHeight:a}=e;return{[t]:{marginInline:r,fontSize:o,lineHeight:a,textAlign:"center",[`${t}-image`]:{height:e.emptyImgHeight,marginBottom:r,opacity:e.opacityImage,img:{height:"100%"},svg:{maxWidth:"100%",height:"100%",margin:"auto"}},[`${t}-description`]:{color:e.colorText},[`${t}-footer`]:{marginTop:n},"&-normal":{marginBlock:i,color:e.colorTextDescription,[`${t}-description`]:{color:e.colorTextDescription},[`${t}-image`]:{height:e.emptyImgHeightMD}},"&-small":{marginBlock:r,color:e.colorTextDescription,[`${t}-image`]:{height:e.emptyImgHeightSM}}}}},xwe=yo("Empty",e=>{const{componentCls:t,controlHeightLG:n,calc:r}=e,i=gr(e,{emptyImgCls:`${t}-img`,emptyImgHeight:r(n).mul(2.5).equal(),emptyImgHeightMD:n,emptyImgHeightSM:r(n).mul(.875).equal()});return[Owe(i)]});var Nwe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const qY=v.createElement(wwe,null),YY=v.createElement(Awe,null),hD=e=>{var{className:t,rootClassName:n,prefixCls:r,image:i=qY,description:o,children:a,imageStyle:s,style:c}=e,l=Nwe(e,["className","rootClassName","prefixCls","image","description","children","imageStyle","style"]);const{getPrefixCls:u,direction:d,empty:h}=v.useContext(en),f=u("empty",r),[g,p,m]=xwe(f),[_]=kC("Empty"),E=typeof o<"u"?o:_==null?void 0:_.description,S=typeof E=="string"?E:"empty";let C=null;return typeof i=="string"?C=v.createElement("img",{alt:S,src:i}):C=i,g(v.createElement("div",Object.assign({className:de(p,m,f,h==null?void 0:h.className,{[`${f}-normal`]:i===YY,[`${f}-rtl`]:d==="rtl"},t,n),style:Object.assign(Object.assign({},h==null?void 0:h.style),c)},l),v.createElement("div",{className:`${f}-image`,style:s},C),E&&v.createElement("div",{className:`${f}-description`},E),a&&v.createElement("div",{className:`${f}-footer`},a)))};hD.PRESENTED_IMAGE_DEFAULT=qY;hD.PRESENTED_IMAGE_SIMPLE=YY;const um=hD,Pwe=e=>{const{componentName:t}=e,{getPrefixCls:n}=v.useContext(en),r=n("empty");switch(t){case"Table":case"List":return le.createElement(um,{image:um.PRESENTED_IMAGE_SIMPLE});case"Select":case"TreeSelect":case"Cascader":case"Transfer":case"Mentions":return le.createElement(um,{image:um.PRESENTED_IMAGE_SIMPLE,className:`${r}-small`});default:return le.createElement(um,null)}},XY=Pwe,Dwe=["outlined","borderless","filled"],Lwe=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;const n=v.useContext(yY);let r;typeof e<"u"?r=e:t===!1?r="borderless":r=n??"outlined";const i=Dwe.includes(r);return[r,i]},fD=Lwe,kwe=e=>{const n={overflow:{adjustX:!0,adjustY:!0,shiftY:!0},htmlRegion:e==="scroll"?"scroll":"visible",dynamicInset:!0};return{bottomLeft:Object.assign(Object.assign({},n),{points:["tl","bl"],offset:[0,4]}),bottomRight:Object.assign(Object.assign({},n),{points:["tr","br"],offset:[0,4]}),topLeft:Object.assign(Object.assign({},n),{points:["bl","tl"],offset:[0,-4]}),topRight:Object.assign(Object.assign({},n),{points:["br","tr"],offset:[0,-4]})}};function Mwe(e,t){return e||kwe(t)}const k6=e=>{const{optionHeight:t,optionFontSize:n,optionLineHeight:r,optionPadding:i}=e;return{position:"relative",display:"block",minHeight:t,padding:i,color:e.colorText,fontWeight:"normal",fontSize:n,lineHeight:r,boxSizing:"border-box"}},Fwe=e=>{const{antCls:t,componentCls:n}=e,r=`${n}-item`,i=`&${t}-slide-up-enter${t}-slide-up-enter-active`,o=`&${t}-slide-up-appear${t}-slide-up-appear-active`,a=`&${t}-slide-up-leave${t}-slide-up-leave-active`,s=`${n}-dropdown-placement-`;return[{[`${n}-dropdown`]:Object.assign(Object.assign({},Oa(e)),{position:"absolute",top:-9999,zIndex:e.zIndexPopup,boxSizing:"border-box",padding:e.paddingXXS,overflow:"hidden",fontSize:e.fontSize,fontVariant:"initial",backgroundColor:e.colorBgElevated,borderRadius:e.borderRadiusLG,outline:"none",boxShadow:e.boxShadowSecondary,[`
          ${i}${s}bottomLeft,
          ${o}${s}bottomLeft
        `]:{animationName:bY},[`
          ${i}${s}topLeft,
          ${o}${s}topLeft,
          ${i}${s}topRight,
          ${o}${s}topRight
        `]:{animationName:RY},[`${a}${s}bottomLeft`]:{animationName:TY},[`
          ${a}${s}topLeft,
          ${a}${s}topRight
        `]:{animationName:wY},"&-hidden":{display:"none"},[`${r}`]:Object.assign(Object.assign({},k6(e)),{cursor:"pointer",transition:`background ${e.motionDurationSlow} ease`,borderRadius:e.borderRadiusSM,"&-group":{color:e.colorTextDescription,fontSize:e.fontSizeSM,cursor:"default"},"&-option":{display:"flex","&-content":Object.assign({flex:"auto"},WS),"&-state":{flex:"none",display:"flex",alignItems:"center"},[`&-active:not(${r}-option-disabled)`]:{backgroundColor:e.optionActiveBg},[`&-selected:not(${r}-option-disabled)`]:{color:e.optionSelectedColor,fontWeight:e.optionSelectedFontWeight,backgroundColor:e.optionSelectedBg,[`${r}-option-state`]:{color:e.colorPrimary},[`&:has(+ ${r}-option-selected:not(${r}-option-disabled))`]:{borderEndStartRadius:0,borderEndEndRadius:0,[`& + ${r}-option-selected:not(${r}-option-disabled)`]:{borderStartStartRadius:0,borderStartEndRadius:0}}},"&-disabled":{[`&${r}-option-selected`]:{backgroundColor:e.colorBgContainerDisabled},color:e.colorTextDisabled,cursor:"not-allowed"},"&-grouped":{paddingInlineStart:e.calc(e.controlPaddingHorizontal).mul(2).equal()}},"&-empty":Object.assign(Object.assign({},k6(e)),{color:e.colorTextDisabled})}),"&-rtl":{direction:"rtl"}})},JS(e,"slide-up"),JS(e,"slide-down"),f6(e,"move-up"),f6(e,"move-down")]},Uwe=Fwe,Bwe=e=>{const{multipleSelectItemHeight:t,paddingXXS:n,lineWidth:r,INTERNAL_FIXED_ITEM_MARGIN:i}=e,o=e.max(e.calc(n).sub(r).equal(),0),a=e.max(e.calc(o).sub(i).equal(),0);return{basePadding:o,containerPadding:a,itemHeight:ve(t),itemLineHeight:ve(e.calc(t).sub(e.calc(e.lineWidth).mul(2)).equal())}},$we=e=>{const{multipleSelectItemHeight:t,selectHeight:n,lineWidth:r}=e;return e.calc(n).sub(t).div(2).sub(r).equal()},Vwe=e=>{const{componentCls:t,iconCls:n,borderRadiusSM:r,motionDurationSlow:i,paddingXS:o,multipleItemColorDisabled:a,multipleItemBorderColorDisabled:s,colorIcon:c,colorIconHover:l,INTERNAL_FIXED_ITEM_MARGIN:u}=e;return{[`${t}-selection-overflow`]:{position:"relative",display:"flex",flex:"auto",flexWrap:"wrap",maxWidth:"100%","&-item":{flex:"none",alignSelf:"center",maxWidth:"100%",display:"inline-flex"},[`${t}-selection-item`]:{display:"flex",alignSelf:"center",flex:"none",boxSizing:"border-box",maxWidth:"100%",marginBlock:u,borderRadius:r,cursor:"default",transition:`font-size ${i}, line-height ${i}, height ${i}`,marginInlineEnd:e.calc(u).mul(2).equal(),paddingInlineStart:o,paddingInlineEnd:e.calc(o).div(2).equal(),[`${t}-disabled&`]:{color:a,borderColor:s,cursor:"not-allowed"},"&-content":{display:"inline-block",marginInlineEnd:e.calc(o).div(2).equal(),overflow:"hidden",whiteSpace:"pre",textOverflow:"ellipsis"},"&-remove":Object.assign(Object.assign({},MC()),{display:"inline-flex",alignItems:"center",color:c,fontWeight:"bold",fontSize:10,lineHeight:"inherit",cursor:"pointer",[`> ${n}`]:{verticalAlign:"-0.2em"},"&:hover":{color:l}})}}}},jwe=(e,t)=>{const{componentCls:n,INTERNAL_FIXED_ITEM_MARGIN:r}=e,i=`${n}-selection-overflow`,o=e.multipleSelectItemHeight,a=$we(e),s=t?`${n}-${t}`:"",c=Bwe(e);return{[`${n}-multiple${s}`]:Object.assign(Object.assign({},Vwe(e)),{[`${n}-selector`]:{display:"flex",flexWrap:"wrap",alignItems:"center",height:"100%",paddingInline:c.basePadding,paddingBlock:c.containerPadding,borderRadius:e.borderRadius,[`${n}-disabled&`]:{background:e.multipleSelectorBgDisabled,cursor:"not-allowed"},"&:after":{display:"inline-block",width:0,margin:`${ve(r)} 0`,lineHeight:ve(o),visibility:"hidden",content:'"\\a0"'}},[`${n}-selection-item`]:{height:c.itemHeight,lineHeight:ve(c.itemLineHeight)},[`${i}-item + ${i}-item`]:{[`${n}-selection-search`]:{marginInlineStart:0}},[`${i}-item-suffix`]:{height:"100%"},[`${n}-selection-search`]:{display:"inline-flex",position:"relative",maxWidth:"100%",marginInlineStart:e.calc(e.inputPaddingHorizontalBase).sub(a).equal(),"\n          &-input,\n          &-mirror\n        ":{height:o,fontFamily:e.fontFamily,lineHeight:ve(o),transition:`all ${e.motionDurationSlow}`},"&-input":{width:"100%",minWidth:4.1},"&-mirror":{position:"absolute",top:0,insetInlineStart:0,insetInlineEnd:"auto",zIndex:999,whiteSpace:"pre",visibility:"hidden"}},[`${n}-selection-placeholder`]:{position:"absolute",top:"50%",insetInlineStart:e.inputPaddingHorizontalBase,insetInlineEnd:e.inputPaddingHorizontalBase,transform:"translateY(-50%)",transition:`all ${e.motionDurationSlow}`}})}};function KR(e,t){const{componentCls:n}=e,r=t?`${n}-${t}`:"",i={[`${n}-multiple${r}`]:{fontSize:e.fontSize,[`${n}-selector`]:{[`${n}-show-search&`]:{cursor:"text"}},[`
        &${n}-show-arrow ${n}-selector,
        &${n}-allow-clear ${n}-selector
      `]:{paddingInlineEnd:e.calc(e.fontSizeIcon).add(e.controlPaddingHorizontal).equal()}}};return[jwe(e,t),i]}const Hwe=e=>{const{componentCls:t}=e,n=gr(e,{selectHeight:e.controlHeightSM,multipleSelectItemHeight:e.multipleItemHeightSM,borderRadius:e.borderRadiusSM,borderRadiusSM:e.borderRadiusXS}),r=gr(e,{fontSize:e.fontSizeLG,selectHeight:e.controlHeightLG,multipleSelectItemHeight:e.multipleItemHeightLG,borderRadius:e.borderRadiusLG,borderRadiusSM:e.borderRadius});return[KR(e),KR(n,"sm"),{[`${t}-multiple${t}-sm`]:{[`${t}-selection-placeholder`]:{insetInline:e.calc(e.controlPaddingHorizontalSM).sub(e.lineWidth).equal()},[`${t}-selection-search`]:{marginInlineStart:2}}},KR(r,"lg")]},zwe=Hwe;function qR(e,t){const{componentCls:n,inputPaddingHorizontalBase:r,borderRadius:i}=e,o=e.calc(e.controlHeight).sub(e.calc(e.lineWidth).mul(2)).equal(),a=t?`${n}-${t}`:"";return{[`${n}-single${a}`]:{fontSize:e.fontSize,height:e.controlHeight,[`${n}-selector`]:Object.assign(Object.assign({},Oa(e,!0)),{display:"flex",borderRadius:i,[`${n}-selection-search`]:{position:"absolute",top:0,insetInlineStart:r,insetInlineEnd:r,bottom:0,"&-input":{width:"100%",WebkitAppearance:"textfield"}},[`
          ${n}-selection-item,
          ${n}-selection-placeholder
        `]:{padding:0,lineHeight:ve(o),transition:`all ${e.motionDurationSlow}, visibility 0s`,alignSelf:"center"},[`${n}-selection-placeholder`]:{transition:"none",pointerEvents:"none"},[["&:after",`${n}-selection-item:empty:after`,`${n}-selection-placeholder:empty:after`].join(",")]:{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'}}),[`
        &${n}-show-arrow ${n}-selection-item,
        &${n}-show-arrow ${n}-selection-placeholder
      `]:{paddingInlineEnd:e.showArrowPaddingInlineEnd},[`&${n}-open ${n}-selection-item`]:{color:e.colorTextPlaceholder},[`&:not(${n}-customize-input)`]:{[`${n}-selector`]:{width:"100%",height:"100%",padding:`0 ${ve(r)}`,[`${n}-selection-search-input`]:{height:o},"&:after":{lineHeight:ve(o)}}},[`&${n}-customize-input`]:{[`${n}-selector`]:{"&:after":{display:"none"},[`${n}-selection-search`]:{position:"static",width:"100%"},[`${n}-selection-placeholder`]:{position:"absolute",insetInlineStart:0,insetInlineEnd:0,padding:`0 ${ve(r)}`,"&:after":{display:"none"}}}}}}}function Wwe(e){const{componentCls:t}=e,n=e.calc(e.controlPaddingHorizontalSM).sub(e.lineWidth).equal();return[qR(e),qR(gr(e,{controlHeight:e.controlHeightSM,borderRadius:e.borderRadiusSM}),"sm"),{[`${t}-single${t}-sm`]:{[`&:not(${t}-customize-input)`]:{[`${t}-selection-search`]:{insetInlineStart:n,insetInlineEnd:n},[`${t}-selector`]:{padding:`0 ${ve(n)}`},[`&${t}-show-arrow ${t}-selection-search`]:{insetInlineEnd:e.calc(n).add(e.calc(e.fontSize).mul(1.5)).equal()},[`
            &${t}-show-arrow ${t}-selection-item,
            &${t}-show-arrow ${t}-selection-placeholder
          `]:{paddingInlineEnd:e.calc(e.fontSize).mul(1.5).equal()}}}},qR(gr(e,{controlHeight:e.singleItemHeightLG,fontSize:e.fontSizeLG,borderRadius:e.borderRadiusLG}),"lg")]}const Gwe=e=>{const{fontSize:t,lineHeight:n,lineWidth:r,controlHeight:i,controlHeightSM:o,controlHeightLG:a,paddingXXS:s,controlPaddingHorizontal:c,zIndexPopupBase:l,colorText:u,fontWeightStrong:d,controlItemBgActive:h,controlItemBgHover:f,colorBgContainer:g,colorFillSecondary:p,colorBgContainerDisabled:m,colorTextDisabled:_}=e,E=s*2,S=r*2,C=Math.min(i-E,i-S),b=Math.min(o-E,o-S),T=Math.min(a-E,a-S);return{INTERNAL_FIXED_ITEM_MARGIN:Math.floor(s/2),zIndexPopup:l+50,optionSelectedColor:u,optionSelectedFontWeight:d,optionSelectedBg:h,optionActiveBg:f,optionPadding:`${(i-t*n)/2}px ${c}px`,optionFontSize:t,optionLineHeight:n,optionHeight:i,selectorBg:g,clearBg:g,singleItemHeightLG:a,multipleItemBg:p,multipleItemBorderColor:"transparent",multipleItemHeight:C,multipleItemHeightSM:b,multipleItemHeightLG:T,multipleSelectorBgDisabled:m,multipleItemColorDisabled:_,multipleItemBorderColorDisabled:"transparent",showArrowPaddingInlineEnd:Math.ceil(e.fontSize*1.25)}},JY=(e,t)=>{const{componentCls:n,antCls:r,controlOutlineWidth:i}=e;return{[`&:not(${n}-customize-input) ${n}-selector`]:{border:`${ve(e.lineWidth)} ${e.lineType} ${t.borderColor}`,background:e.selectorBg},[`&:not(${n}-disabled):not(${n}-customize-input):not(${r}-pagination-size-changer)`]:{[`&:hover ${n}-selector`]:{borderColor:t.hoverBorderHover},[`${n}-focused& ${n}-selector`]:{borderColor:t.activeBorderColor,boxShadow:`0 0 0 ${ve(i)} ${t.activeShadowColor}`,outline:0}}}},M6=(e,t)=>({[`&${e.componentCls}-status-${t.status}`]:Object.assign({},JY(e,t))}),Kwe=e=>({"&-outlined":Object.assign(Object.assign(Object.assign(Object.assign({},JY(e,{borderColor:e.colorBorder,hoverBorderHover:e.colorPrimaryHover,activeBorderColor:e.colorPrimary,activeShadowColor:e.controlOutline})),M6(e,{status:"error",borderColor:e.colorError,hoverBorderHover:e.colorErrorHover,activeBorderColor:e.colorError,activeShadowColor:e.colorErrorOutline})),M6(e,{status:"warning",borderColor:e.colorWarning,hoverBorderHover:e.colorWarningHover,activeBorderColor:e.colorWarning,activeShadowColor:e.colorWarningOutline})),{[`&${e.componentCls}-disabled`]:{[`&:not(${e.componentCls}-customize-input) ${e.componentCls}-selector`]:{background:e.colorBgContainerDisabled,color:e.colorTextDisabled}},[`&${e.componentCls}-multiple ${e.componentCls}-selection-item`]:{background:e.multipleItemBg,border:`${ve(e.lineWidth)} ${e.lineType} ${e.multipleItemBorderColor}`}})}),QY=(e,t)=>{const{componentCls:n,antCls:r}=e;return{[`&:not(${n}-customize-input) ${n}-selector`]:{background:t.bg,border:`${ve(e.lineWidth)} ${e.lineType} transparent`,color:t.color},[`&:not(${n}-disabled):not(${n}-customize-input):not(${r}-pagination-size-changer)`]:{[`&:hover ${n}-selector`]:{background:t.hoverBg},[`${n}-focused& ${n}-selector`]:{background:e.selectorBg,borderColor:t.activeBorderColor,outline:0}}}},F6=(e,t)=>({[`&${e.componentCls}-status-${t.status}`]:Object.assign({},QY(e,t))}),qwe=e=>({"&-filled":Object.assign(Object.assign(Object.assign(Object.assign({},QY(e,{bg:e.colorFillTertiary,hoverBg:e.colorFillSecondary,activeBorderColor:e.colorPrimary,color:e.colorText})),F6(e,{status:"error",bg:e.colorErrorBg,hoverBg:e.colorErrorBgHover,activeBorderColor:e.colorError,color:e.colorError})),F6(e,{status:"warning",bg:e.colorWarningBg,hoverBg:e.colorWarningBgHover,activeBorderColor:e.colorWarning,color:e.colorWarning})),{[`&${e.componentCls}-disabled`]:{[`&:not(${e.componentCls}-customize-input) ${e.componentCls}-selector`]:{borderColor:e.colorBorder,background:e.colorBgContainerDisabled,color:e.colorTextDisabled}},[`&${e.componentCls}-multiple ${e.componentCls}-selection-item`]:{background:e.colorBgContainer,border:`${ve(e.lineWidth)} ${e.lineType} ${e.colorSplit}`}})}),Ywe=e=>({"&-borderless":{[`${e.componentCls}-selector`]:{background:"transparent",borderColor:"transparent"},[`&${e.componentCls}-disabled`]:{[`&:not(${e.componentCls}-customize-input) ${e.componentCls}-selector`]:{color:e.colorTextDisabled}},[`&${e.componentCls}-multiple ${e.componentCls}-selection-item`]:{background:e.multipleItemBg,border:`${ve(e.lineWidth)} ${e.lineType} ${e.multipleItemBorderColor}`}}}),Xwe=e=>({[e.componentCls]:Object.assign(Object.assign(Object.assign({},Kwe(e)),qwe(e)),Ywe(e))}),Jwe=Xwe,Qwe=e=>{const{componentCls:t}=e;return{position:"relative",transition:`all ${e.motionDurationMid} ${e.motionEaseInOut}`,input:{cursor:"pointer"},[`${t}-show-search&`]:{cursor:"text",input:{cursor:"auto",color:"inherit",height:"100%"}},[`${t}-disabled&`]:{cursor:"not-allowed",input:{cursor:"not-allowed"}}}},Zwe=e=>{const{componentCls:t}=e;return{[`${t}-selection-search-input`]:{margin:0,padding:0,background:"transparent",border:"none",outline:"none",appearance:"none",fontFamily:"inherit","&::-webkit-search-cancel-button":{display:"none","-webkit-appearance":"none"}}}},eIe=e=>{const{antCls:t,componentCls:n,inputPaddingHorizontalBase:r,iconCls:i}=e;return{[n]:Object.assign(Object.assign({},Oa(e)),{position:"relative",display:"inline-block",cursor:"pointer",[`&:not(${n}-customize-input) ${n}-selector`]:Object.assign(Object.assign({},Qwe(e)),Zwe(e)),[`${n}-selection-item`]:Object.assign(Object.assign({flex:1,fontWeight:"normal",position:"relative",userSelect:"none"},WS),{[`> ${t}-typography`]:{display:"inline"}}),[`${n}-selection-placeholder`]:Object.assign(Object.assign({},WS),{flex:1,color:e.colorTextPlaceholder,pointerEvents:"none"}),[`${n}-arrow`]:Object.assign(Object.assign({},MC()),{position:"absolute",top:"50%",insetInlineStart:"auto",insetInlineEnd:r,height:e.fontSizeIcon,marginTop:e.calc(e.fontSizeIcon).mul(-1).div(2).equal(),color:e.colorTextQuaternary,fontSize:e.fontSizeIcon,lineHeight:1,textAlign:"center",pointerEvents:"none",display:"flex",alignItems:"center",transition:`opacity ${e.motionDurationSlow} ease`,[i]:{verticalAlign:"top",transition:`transform ${e.motionDurationSlow}`,"> svg":{verticalAlign:"top"},[`&:not(${n}-suffix)`]:{pointerEvents:"auto"}},[`${n}-disabled &`]:{cursor:"not-allowed"},"> *:not(:last-child)":{marginInlineEnd:8}}),[`${n}-clear`]:{position:"absolute",top:"50%",insetInlineStart:"auto",insetInlineEnd:r,zIndex:1,display:"inline-block",width:e.fontSizeIcon,height:e.fontSizeIcon,marginTop:e.calc(e.fontSizeIcon).mul(-1).div(2).equal(),color:e.colorTextQuaternary,fontSize:e.fontSizeIcon,fontStyle:"normal",lineHeight:1,textAlign:"center",textTransform:"none",cursor:"pointer",opacity:0,transition:`color ${e.motionDurationMid} ease, opacity ${e.motionDurationSlow} ease`,textRendering:"auto","&:before":{display:"block"},"&:hover":{color:e.colorTextTertiary}},"&:hover":{[`${n}-clear`]:{opacity:1},[`${n}-arrow:not(:last-child)`]:{opacity:0}}}),[`${n}-has-feedback`]:{[`${n}-clear`]:{insetInlineEnd:e.calc(r).add(e.fontSize).add(e.paddingXS).equal()}}}},tIe=e=>{const{componentCls:t}=e;return[{[t]:{[`&${t}-in-form-item`]:{width:"100%"}}},eIe(e),Wwe(e),zwe(e),Uwe(e),{[`${t}-rtl`]:{direction:"rtl"}},QP(e,{borderElCls:`${t}-selector`,focusElCls:`${t}-focused`})]},nIe=yo("Select",(e,t)=>{let{rootPrefixCls:n}=t;const r=gr(e,{rootPrefixCls:n,inputPaddingHorizontalBase:e.calc(e.paddingSM).sub(1).equal(),multipleSelectItemHeight:e.multipleItemHeight,selectHeight:e.controlHeight});return[tIe(r),Jwe(r)]},Gwe,{unitless:{optionLineHeight:!0,optionSelectedFontWeight:!0}});var rIe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"};const iIe=rIe;var oIe=function(t,n){return v.createElement(si,Ee({},t,{ref:n,icon:iIe}))},aIe=v.forwardRef(oIe);const ZY=aIe;var sIe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"}}]},name:"down",theme:"outlined"};const cIe=sIe;var lIe=function(t,n){return v.createElement(si,Ee({},t,{ref:n,icon:cIe}))},uIe=v.forwardRef(lIe);const dIe=uIe;var hIe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"}}]},name:"search",theme:"outlined"};const fIe=hIe;var pIe=function(t,n){return v.createElement(si,Ee({},t,{ref:n,icon:fIe}))},mIe=v.forwardRef(pIe);const eX=mIe;function gIe(e){let{suffixIcon:t,clearIcon:n,menuItemSelectedIcon:r,removeIcon:i,loading:o,multiple:a,hasFeedback:s,prefixCls:c,showSuffixIcon:l,feedbackIcon:u,showArrow:d,componentName:h}=e;const f=n??v.createElement($C,null),g=E=>t===null&&!s&&!d?null:v.createElement(v.Fragment,null,l!==!1&&E,s&&u);let p=null;if(t!==void 0)p=g(t);else if(o)p=g(v.createElement(VC,{spin:!0}));else{const E=`${c}-suffix`;p=S=>{let{open:C,showSearch:b}=S;return g(C&&b?v.createElement(eX,{className:E}):v.createElement(dIe,{className:E}))}}let m=null;r!==void 0?m=r:a?m=v.createElement(ZY,null):m=null;let _=null;return i!==void 0?_=i:_=v.createElement(zq,null),{clearIcon:f,suffixIcon:p,itemIcon:m,removeIcon:_}}function vIe(e,t){return t!==void 0?t:e!==null}var EIe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const tX="SECRET_COMBOBOX_MODE_DO_NOT_USE",_Ie=(e,t)=>{var n;const{prefixCls:r,bordered:i,className:o,rootClassName:a,getPopupContainer:s,popupClassName:c,dropdownClassName:l,listHeight:u=256,placement:d,listItemHeight:h,size:f,disabled:g,notFoundContent:p,status:m,builtinPlacements:_,dropdownMatchSelectWidth:E,popupMatchSelectWidth:S,direction:C,style:b,allowClear:T,variant:R,dropdownStyle:A,transitionName:O,tagRender:x,maxCount:M}=e,$=EIe(e,["prefixCls","bordered","className","rootClassName","getPopupContainer","popupClassName","dropdownClassName","listHeight","placement","listItemHeight","size","disabled","notFoundContent","status","builtinPlacements","dropdownMatchSelectWidth","popupMatchSelectWidth","direction","style","allowClear","variant","dropdownStyle","transitionName","tagRender","maxCount"]),{getPopupContainer:U,getPrefixCls:V,renderEmpty:W,direction:z,virtual:L,popupMatchSelectWidth:D,popupOverflow:j,select:F}=v.useContext(en),[,y]=Eo(),I=h??(y==null?void 0:y.controlHeight),N=V("select",r),B=V(),K=C??z,{compactSize:X,compactItemClassnames:ee}=zC(N,K),[ne,fe]=fD(R,i),ae=Mc(N),[oe,he,me]=nIe(N,ae),ie=v.useMemo(()=>{const{mode:on}=e;if(on!=="combobox")return on===tX?"combobox":on},[e.mode]),te=ie==="multiple"||ie==="tags",ge=vIe(e.suffixIcon,e.showArrow),pe=(n=S??E)!==null&&n!==void 0?n:D,{status:be,hasFeedback:Se,isFormItemInput:ue,feedbackIcon:re}=v.useContext(ba),Re=GC(be,m);let we;p!==void 0?we=p:ie==="combobox"?we=null:we=(W==null?void 0:W("Select"))||v.createElement(XY,{componentName:"Select"});const{suffixIcon:xe,itemIcon:We,removeIcon:Ve,clearIcon:Rt}=gIe(Object.assign(Object.assign({},$),{multiple:te,hasFeedback:Se,feedbackIcon:re,showSuffixIcon:ge,prefixCls:N,componentName:"Select"})),xt=T===!0?{clearIcon:Rt}:T,Xe=So($,["suffixIcon","itemIcon"]),Ge=de(c||l,{[`${N}-dropdown-${K}`]:K==="rtl"},a,me,ae,he),Je=yl(on=>{var ke;return(ke=f??X)!==null&&ke!==void 0?ke:on}),st=v.useContext(Op),At=g??st,Ot=de({[`${N}-lg`]:Je==="large",[`${N}-sm`]:Je==="small",[`${N}-rtl`]:K==="rtl",[`${N}-${ne}`]:fe,[`${N}-in-form-item`]:ue},ZS(N,Re,Se),ee,F==null?void 0:F.className,o,a,me,ae,he),dn=v.useMemo(()=>d!==void 0?d:K==="rtl"?"bottomRight":"bottomLeft",[d,K]),[an]=YP("SelectLike",A==null?void 0:A.zIndex);return oe(v.createElement(dD,Object.assign({ref:t,virtual:L,showSearch:F==null?void 0:F.showSearch},Xe,{style:Object.assign(Object.assign({},F==null?void 0:F.style),b),dropdownMatchSelectWidth:pe,transitionName:Zq(B,"slide-up",O),builtinPlacements:Mwe(_,j),listHeight:u,listItemHeight:I,mode:ie,prefixCls:N,placement:dn,direction:K,suffixIcon:xe,menuItemSelectedIcon:We,removeIcon:Ve,allowClear:xt,notFoundContent:we,className:Ot,getPopupContainer:s||U,dropdownClassName:Ge,disabled:At,dropdownStyle:Object.assign(Object.assign({},A),{zIndex:an}),maxCount:te?M:void 0,tagRender:te?x:void 0})))},Np=v.forwardRef(_Ie),SIe=YTe(Np);Np.SECRET_COMBOBOX_MODE_DO_NOT_USE=tX;Np.Option=uD;Np.OptGroup=lD;Np._InternalPanelDoNotUseOrYouWillBeFired=SIe;const KC=Np,Vd=["xxl","xl","lg","md","sm","xs"],yIe=e=>({xs:`(max-width: ${e.screenXSMax}px)`,sm:`(min-width: ${e.screenSM}px)`,md:`(min-width: ${e.screenMD}px)`,lg:`(min-width: ${e.screenLG}px)`,xl:`(min-width: ${e.screenXL}px)`,xxl:`(min-width: ${e.screenXXL}px)`}),CIe=e=>{const t=e,n=[].concat(Vd).reverse();return n.forEach((r,i)=>{const o=r.toUpperCase(),a=`screen${o}Min`,s=`screen${o}`;if(!(t[a]<=t[s]))throw new Error(`${a}<=${s} fails : !(${t[a]}<=${t[s]})`);if(i<n.length-1){const c=`screen${o}Max`;if(!(t[s]<=t[c]))throw new Error(`${s}<=${c} fails : !(${t[s]}<=${t[c]})`);const u=`screen${n[i+1].toUpperCase()}Min`;if(!(t[c]<=t[u]))throw new Error(`${c}<=${u} fails : !(${t[c]}<=${t[u]})`)}}),e};function nX(){const[,e]=Eo(),t=yIe(CIe(e));return le.useMemo(()=>{const n=new Map;let r=-1,i={};return{matchHandlers:{},dispatch(o){return i=o,n.forEach(a=>a(i)),n.size>=1},subscribe(o){return n.size||this.register(),r+=1,n.set(r,o),o(i),r},unsubscribe(o){n.delete(o),n.size||this.unregister()},unregister(){Object.keys(t).forEach(o=>{const a=t[o],s=this.matchHandlers[a];s==null||s.mql.removeListener(s==null?void 0:s.listener)}),n.clear()},register(){Object.keys(t).forEach(o=>{const a=t[o],s=l=>{let{matches:u}=l;this.dispatch(Object.assign(Object.assign({},i),{[o]:u}))},c=window.matchMedia(a);c.addListener(s),this.matchHandlers[a]={mql:c,listener:s},s(c)})},responsiveMap:t}},[e])}function bIe(){const[,e]=v.useReducer(t=>t+1,0);return e}function rX(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;const t=v.useRef({}),n=bIe(),r=nX();return Mn(()=>{const i=r.subscribe(o=>{t.current=o,e&&n()});return()=>r.unsubscribe(i)},[]),t.current}function iX(e){var t=e.children,n=e.prefixCls,r=e.id,i=e.overlayInnerStyle,o=e.className,a=e.style;return v.createElement("div",{className:de("".concat(n,"-content"),o),style:a},v.createElement("div",{className:"".concat(n,"-inner"),id:r,role:"tooltip",style:i},typeof t=="function"?t():t))}var Dh={shiftX:64,adjustY:1},Lh={adjustX:1,shiftY:!0},Ha=[0,0],TIe={left:{points:["cr","cl"],overflow:Lh,offset:[-4,0],targetOffset:Ha},right:{points:["cl","cr"],overflow:Lh,offset:[4,0],targetOffset:Ha},top:{points:["bc","tc"],overflow:Dh,offset:[0,-4],targetOffset:Ha},bottom:{points:["tc","bc"],overflow:Dh,offset:[0,4],targetOffset:Ha},topLeft:{points:["bl","tl"],overflow:Dh,offset:[0,-4],targetOffset:Ha},leftTop:{points:["tr","tl"],overflow:Lh,offset:[-4,0],targetOffset:Ha},topRight:{points:["br","tr"],overflow:Dh,offset:[0,-4],targetOffset:Ha},rightTop:{points:["tl","tr"],overflow:Lh,offset:[4,0],targetOffset:Ha},bottomRight:{points:["tr","br"],overflow:Dh,offset:[0,4],targetOffset:Ha},rightBottom:{points:["bl","br"],overflow:Lh,offset:[4,0],targetOffset:Ha},bottomLeft:{points:["tl","bl"],overflow:Dh,offset:[0,4],targetOffset:Ha},leftBottom:{points:["br","bl"],overflow:Lh,offset:[-4,0],targetOffset:Ha}},RIe=["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","afterVisibleChange","transitionName","animation","motion","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer","overlayInnerStyle","arrowContent","overlay","id","showArrow"],wIe=function(t,n){var r=t.overlayClassName,i=t.trigger,o=i===void 0?["hover"]:i,a=t.mouseEnterDelay,s=a===void 0?0:a,c=t.mouseLeaveDelay,l=c===void 0?.1:c,u=t.overlayStyle,d=t.prefixCls,h=d===void 0?"rc-tooltip":d,f=t.children,g=t.onVisibleChange,p=t.afterVisibleChange,m=t.transitionName,_=t.animation,E=t.motion,S=t.placement,C=S===void 0?"right":S,b=t.align,T=b===void 0?{}:b,R=t.destroyTooltipOnHide,A=R===void 0?!1:R,O=t.defaultVisible,x=t.getTooltipContainer,M=t.overlayInnerStyle;t.arrowContent;var $=t.overlay,U=t.id,V=t.showArrow,W=V===void 0?!0:V,z=kt(t,RIe),L=v.useRef(null);v.useImperativeHandle(n,function(){return L.current});var D=Y({},z);"visible"in t&&(D.popupVisible=t.visible);var j=function(){return v.createElement(iX,{key:"content",prefixCls:h,id:U,overlayInnerStyle:M},$)};return v.createElement(sD,Ee({popupClassName:r,prefixCls:h,popup:j,action:o,builtinPlacements:TIe,popupPlacement:C,ref:L,popupAlign:T,getPopupContainer:x,onPopupVisibleChange:g,afterPopupVisibleChange:p,popupTransitionName:m,popupAnimation:_,popupMotion:E,defaultPopupVisible:O,autoDestroy:A,mouseLeaveDelay:l,popupStyle:u,mouseEnterDelay:s,arrow:W},D),f)};const IIe=v.forwardRef(wIe);function AIe(e){const{sizePopupArrow:t,borderRadiusXS:n,borderRadiusOuter:r}=e,i=t/2,o=0,a=i,s=r*1/Math.sqrt(2),c=i-r*(1-1/Math.sqrt(2)),l=i-n*(1/Math.sqrt(2)),u=r*(Math.sqrt(2)-1)+n*(1/Math.sqrt(2)),d=2*i-l,h=u,f=2*i-s,g=c,p=2*i-o,m=a,_=i*Math.sqrt(2)+r*(Math.sqrt(2)-2),E=r*(Math.sqrt(2)-1),S=`polygon(${E}px 100%, 50% ${E}px, ${2*i-E}px 100%, ${E}px 100%)`,C=`path('M ${o} ${a} A ${r} ${r} 0 0 0 ${s} ${c} L ${l} ${u} A ${n} ${n} 0 0 1 ${d} ${h} L ${f} ${g} A ${r} ${r} 0 0 0 ${p} ${m} Z')`;return{arrowShadowWidth:_,arrowPath:C,arrowPolygon:S}}const OIe=(e,t,n)=>{const{sizePopupArrow:r,arrowPolygon:i,arrowPath:o,arrowShadowWidth:a,borderRadiusXS:s,calc:c}=e;return{pointerEvents:"none",width:r,height:r,overflow:"hidden","&::before":{position:"absolute",bottom:0,insetInlineStart:0,width:r,height:c(r).div(2).equal(),background:t,clipPath:{_multi_value_:!0,value:[i,o]},content:'""'},"&::after":{content:'""',position:"absolute",width:a,height:a,bottom:0,insetInline:0,margin:"auto",borderRadius:{_skip_check_:!0,value:`0 0 ${ve(s)} 0`},transform:"translateY(50%) rotate(-135deg)",boxShadow:n,zIndex:0,background:"transparent"}}},oX=8;function aX(e){const{contentRadius:t,limitVerticalRadius:n}=e,r=t>12?t+2:12;return{arrowOffsetHorizontal:r,arrowOffsetVertical:n?oX:r}}function xE(e,t){return e?t:{}}function xIe(e,t,n){const{componentCls:r,boxShadowPopoverArrow:i,arrowOffsetVertical:o,arrowOffsetHorizontal:a}=e,{arrowDistance:s=0,arrowPlacement:c={left:!0,right:!0,top:!0,bottom:!0}}=n||{};return{[r]:Object.assign(Object.assign(Object.assign(Object.assign({[`${r}-arrow`]:[Object.assign(Object.assign({position:"absolute",zIndex:1,display:"block"},OIe(e,t,i)),{"&:before":{background:t}})]},xE(!!c.top,{[[`&-placement-top > ${r}-arrow`,`&-placement-topLeft > ${r}-arrow`,`&-placement-topRight > ${r}-arrow`].join(",")]:{bottom:s,transform:"translateY(100%) rotate(180deg)"},[`&-placement-top > ${r}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(100%) rotate(180deg)"},[`&-placement-topLeft > ${r}-arrow`]:{left:{_skip_check_:!0,value:a}},[`&-placement-topRight > ${r}-arrow`]:{right:{_skip_check_:!0,value:a}}})),xE(!!c.bottom,{[[`&-placement-bottom > ${r}-arrow`,`&-placement-bottomLeft > ${r}-arrow`,`&-placement-bottomRight > ${r}-arrow`].join(",")]:{top:s,transform:"translateY(-100%)"},[`&-placement-bottom > ${r}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(-100%)"},[`&-placement-bottomLeft > ${r}-arrow`]:{left:{_skip_check_:!0,value:a}},[`&-placement-bottomRight > ${r}-arrow`]:{right:{_skip_check_:!0,value:a}}})),xE(!!c.left,{[[`&-placement-left > ${r}-arrow`,`&-placement-leftTop > ${r}-arrow`,`&-placement-leftBottom > ${r}-arrow`].join(",")]:{right:{_skip_check_:!0,value:s},transform:"translateX(100%) rotate(90deg)"},[`&-placement-left > ${r}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(100%) rotate(90deg)"},[`&-placement-leftTop > ${r}-arrow`]:{top:o},[`&-placement-leftBottom > ${r}-arrow`]:{bottom:o}})),xE(!!c.right,{[[`&-placement-right > ${r}-arrow`,`&-placement-rightTop > ${r}-arrow`,`&-placement-rightBottom > ${r}-arrow`].join(",")]:{left:{_skip_check_:!0,value:s},transform:"translateX(-100%) rotate(-90deg)"},[`&-placement-right > ${r}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(-100%) rotate(-90deg)"},[`&-placement-rightTop > ${r}-arrow`]:{top:o},[`&-placement-rightBottom > ${r}-arrow`]:{bottom:o}}))}}function NIe(e,t,n,r){if(r===!1)return{adjustX:!1,adjustY:!1};const i=r&&typeof r=="object"?r:{},o={};switch(e){case"top":case"bottom":o.shiftX=t.arrowOffsetHorizontal*2+n,o.shiftY=!0,o.adjustY=!0;break;case"left":case"right":o.shiftY=t.arrowOffsetVertical*2+n,o.shiftX=!0,o.adjustX=!0;break}const a=Object.assign(Object.assign({},o),i);return a.shiftX||(a.adjustX=!0),a.shiftY||(a.adjustY=!0),a}const U6={left:{points:["cr","cl"]},right:{points:["cl","cr"]},top:{points:["bc","tc"]},bottom:{points:["tc","bc"]},topLeft:{points:["bl","tl"]},leftTop:{points:["tr","tl"]},topRight:{points:["br","tr"]},rightTop:{points:["tl","tr"]},bottomRight:{points:["tr","br"]},rightBottom:{points:["bl","br"]},bottomLeft:{points:["tl","bl"]},leftBottom:{points:["br","bl"]}},PIe={topLeft:{points:["bl","tc"]},leftTop:{points:["tr","cl"]},topRight:{points:["br","tc"]},rightTop:{points:["tl","cr"]},bottomRight:{points:["tr","bc"]},rightBottom:{points:["bl","cr"]},bottomLeft:{points:["tl","bc"]},leftBottom:{points:["br","cl"]}},DIe=new Set(["topLeft","topRight","bottomLeft","bottomRight","leftTop","leftBottom","rightTop","rightBottom"]);function LIe(e){const{arrowWidth:t,autoAdjustOverflow:n,arrowPointAtCenter:r,offset:i,borderRadius:o,visibleFirst:a}=e,s=t/2,c={};return Object.keys(U6).forEach(l=>{const u=r&&PIe[l]||U6[l],d=Object.assign(Object.assign({},u),{offset:[0,0],dynamicInset:!0});switch(c[l]=d,DIe.has(l)&&(d.autoArrow=!1),l){case"top":case"topLeft":case"topRight":d.offset[1]=-s-i;break;case"bottom":case"bottomLeft":case"bottomRight":d.offset[1]=s+i;break;case"left":case"leftTop":case"leftBottom":d.offset[0]=-s-i;break;case"right":case"rightTop":case"rightBottom":d.offset[0]=s+i;break}const h=aX({contentRadius:o,limitVerticalRadius:!0});if(r)switch(l){case"topLeft":case"bottomLeft":d.offset[0]=-h.arrowOffsetHorizontal-s;break;case"topRight":case"bottomRight":d.offset[0]=h.arrowOffsetHorizontal+s;break;case"leftTop":case"rightTop":d.offset[1]=-h.arrowOffsetHorizontal-s;break;case"leftBottom":case"rightBottom":d.offset[1]=h.arrowOffsetHorizontal+s;break}d.overflow=NIe(l,h,t,n),a&&(d.htmlRegion="visibleFirst")}),c}const kIe=e=>{const{componentCls:t,tooltipMaxWidth:n,tooltipColor:r,tooltipBg:i,tooltipBorderRadius:o,zIndexPopup:a,controlHeight:s,boxShadowSecondary:c,paddingSM:l,paddingXS:u}=e;return[{[t]:Object.assign(Object.assign(Object.assign(Object.assign({},Oa(e)),{position:"absolute",zIndex:a,display:"block",width:"max-content",maxWidth:n,visibility:"visible",transformOrigin:"var(--arrow-x, 50%) var(--arrow-y, 50%)","&-hidden":{display:"none"},"--antd-arrow-background-color":i,[`${t}-inner`]:{minWidth:"1em",minHeight:s,padding:`${ve(e.calc(l).div(2).equal())} ${ve(u)}`,color:r,textAlign:"start",textDecoration:"none",wordWrap:"break-word",backgroundColor:i,borderRadius:o,boxShadow:c,boxSizing:"border-box"},[["&-placement-left","&-placement-leftTop","&-placement-leftBottom","&-placement-right","&-placement-rightTop","&-placement-rightBottom"].join(",")]:{[`${t}-inner`]:{borderRadius:e.min(o,oX)}},[`${t}-content`]:{position:"relative"}}),iye(e,(d,h)=>{let{darkColor:f}=h;return{[`&${t}-${d}`]:{[`${t}-inner`]:{backgroundColor:f},[`${t}-arrow`]:{"--antd-arrow-background-color":f}}}})),{"&-rtl":{direction:"rtl"}})},xIe(e,"var(--antd-arrow-background-color)"),{[`${t}-pure`]:{position:"relative",maxWidth:"none",margin:e.sizePopupArrow}}]},MIe=e=>Object.assign(Object.assign({zIndexPopup:e.zIndexPopupBase+70},aX({contentRadius:e.borderRadius,limitVerticalRadius:!0})),AIe(gr(e,{borderRadiusOuter:Math.min(e.borderRadiusOuter,4)}))),sX=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return yo("Tooltip",r=>{const{borderRadius:i,colorTextLightSolid:o,colorBgSpotlight:a}=r,s=gr(r,{tooltipMaxWidth:250,tooltipColor:o,tooltipBorderRadius:i,tooltipBg:a});return[kIe(s),IY(r,"zoom-big-fast")]},MIe,{resetStyle:!1,injectStyle:t})(e)},FIe=zS.map(e=>`${e}-inverse`);function UIe(e){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0)?[].concat(Me(FIe),Me(zS)).includes(e):zS.includes(e)}function cX(e,t){const n=UIe(t),r=de({[`${e}-${t}`]:t&&n}),i={},o={};return t&&!n&&(i.background=t,o["--antd-arrow-background-color"]=t),{className:r,overlayStyle:i,arrowStyle:o}}const BIe=e=>{const{prefixCls:t,className:n,placement:r="top",title:i,color:o,overlayInnerStyle:a}=e,{getPrefixCls:s}=v.useContext(en),c=s("tooltip",t),[l,u,d]=sX(c),h=cX(c,o),f=h.arrowStyle,g=Object.assign(Object.assign({},a),h.overlayStyle),p=de(u,d,c,`${c}-pure`,`${c}-placement-${r}`,n,h.className);return l(v.createElement("div",{className:p,style:f},v.createElement("div",{className:`${c}-arrow`}),v.createElement(iX,Object.assign({},e,{className:u,prefixCls:c,overlayInnerStyle:g}),i)))},$Ie=BIe;var VIe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const jIe=v.forwardRef((e,t)=>{var n,r;const{prefixCls:i,openClassName:o,getTooltipContainer:a,overlayClassName:s,color:c,overlayInnerStyle:l,children:u,afterOpenChange:d,afterVisibleChange:h,destroyTooltipOnHide:f,arrow:g=!0,title:p,overlay:m,builtinPlacements:_,arrowPointAtCenter:E=!1,autoAdjustOverflow:S=!0}=e,C=!!g,[,b]=Eo(),{getPopupContainer:T,getPrefixCls:R,direction:A}=v.useContext(en),O=LC(),x=v.useRef(null),M=()=>{var we;(we=x.current)===null||we===void 0||we.forceAlign()};v.useImperativeHandle(t,()=>{var we;return{forceAlign:M,forcePopupAlign:()=>{O.deprecated(!1,"forcePopupAlign","forceAlign"),M()},nativeElement:(we=x.current)===null||we===void 0?void 0:we.nativeElement}});const[$,U]=go(!1,{value:(n=e.open)!==null&&n!==void 0?n:e.visible,defaultValue:(r=e.defaultOpen)!==null&&r!==void 0?r:e.defaultVisible}),V=!p&&!m&&p!==0,W=we=>{var xe,We;U(V?!1:we),V||((xe=e.onOpenChange)===null||xe===void 0||xe.call(e,we),(We=e.onVisibleChange)===null||We===void 0||We.call(e,we))},z=v.useMemo(()=>{var we,xe;let We=E;return typeof g=="object"&&(We=(xe=(we=g.pointAtCenter)!==null&&we!==void 0?we:g.arrowPointAtCenter)!==null&&xe!==void 0?xe:E),_||LIe({arrowPointAtCenter:We,autoAdjustOverflow:S,arrowWidth:C?b.sizePopupArrow:0,borderRadius:b.borderRadius,offset:b.marginXXS,visibleFirst:!0})},[E,g,_,b]),L=v.useMemo(()=>p===0?p:m||p||"",[m,p]),D=v.createElement(nY,null,typeof L=="function"?L():L),{getPopupContainer:j,placement:F="top",mouseEnterDelay:y=.1,mouseLeaveDelay:I=.1,overlayStyle:N,rootClassName:B}=e,K=VIe(e,["getPopupContainer","placement","mouseEnterDelay","mouseLeaveDelay","overlayStyle","rootClassName"]),X=R("tooltip",i),ee=R(),ne=e["data-popover-inject"];let fe=$;!("open"in e)&&!("visible"in e)&&V&&(fe=!1);const ae=v.isValidElement(u)&&!Gq(u)?u:v.createElement("span",null,u),oe=ae.props,he=!oe.className||typeof oe.className=="string"?de(oe.className,o||`${X}-open`):oe.className,[me,ie,te]=sX(X,!ne),ge=cX(X,c),pe=ge.arrowStyle,be=Object.assign(Object.assign({},l),ge.overlayStyle),Se=de(s,{[`${X}-rtl`]:A==="rtl"},ge.className,B,ie,te),[ue,re]=YP("Tooltip",K.zIndex),Re=v.createElement(IIe,Object.assign({},K,{zIndex:ue,showArrow:C,placement:F,mouseEnterDelay:y,mouseLeaveDelay:I,prefixCls:X,overlayClassName:Se,overlayStyle:Object.assign(Object.assign({},pe),N),getTooltipContainer:j||a||T,ref:x,builtinPlacements:z,overlay:D,visible:fe,onVisibleChange:W,afterVisibleChange:d??h,overlayInnerStyle:be,arrowContent:v.createElement("span",{className:`${X}-arrow-content`}),motion:{motionName:Zq(ee,"zoom-big-fast",e.transitionName),motionDeadline:1e3},destroyTooltipOnHide:!!f}),fe?ls(ae,{className:he}):ae);return me(v.createElement(Yq.Provider,{value:re},Re))}),lX=jIe;lX._InternalPanelDoNotUseOrYouWillBeFired=$Ie;const qg=lX;var HIe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M765.7 486.8L314.9 134.7A7.97 7.97 0 00302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 000-50.4z"}}]},name:"right",theme:"outlined"};const zIe=HIe;var WIe=function(t,n){return v.createElement(si,Ee({},t,{ref:n,icon:zIe}))},GIe=v.forwardRef(WIe);const ey=GIe;var uX=v.createContext(null);function dX(e,t){return e===void 0?null:"".concat(e,"-").concat(t)}function hX(e){var t=v.useContext(uX);return dX(t,e)}var KIe=["children","locked"],Ws=v.createContext(null);function qIe(e,t){var n=Y({},e);return Object.keys(t).forEach(function(r){var i=t[r];i!==void 0&&(n[r]=i)}),n}function mg(e){var t=e.children,n=e.locked,r=kt(e,KIe),i=v.useContext(Ws),o=jg(function(){return qIe(i,r)},[i,r],function(a,s){return!n&&(a[0]!==s[0]||!cg(a[1],s[1],!0))});return v.createElement(Ws.Provider,{value:o},t)}var YIe=[],fX=v.createContext(null);function qC(){return v.useContext(fX)}var pX=v.createContext(YIe);function Pp(e){var t=v.useContext(pX);return v.useMemo(function(){return e!==void 0?[].concat(Me(t),[e]):t},[t,e])}var mX=v.createContext(null),pD=v.createContext({});function B6(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(HC(e)){var n=e.nodeName.toLowerCase(),r=["input","select","textarea","button"].includes(n)||e.isContentEditable||n==="a"&&!!e.getAttribute("href"),i=e.getAttribute("tabindex"),o=Number(i),a=null;return i&&!Number.isNaN(o)?a=o:r&&a===null&&(a=0),r&&e.disabled&&(a=null),a!==null&&(a>=0||t&&a<0)}return!1}function XIe(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=Me(e.querySelectorAll("*")).filter(function(r){return B6(r,t)});return B6(e,t)&&n.unshift(e),n}var ZO=Oe.LEFT,ex=Oe.RIGHT,tx=Oe.UP,M_=Oe.DOWN,F_=Oe.ENTER,gX=Oe.ESC,dm=Oe.HOME,hm=Oe.END,$6=[tx,M_,ZO,ex];function JIe(e,t,n,r){var i,o="prev",a="next",s="children",c="parent";if(e==="inline"&&r===F_)return{inlineTrigger:!0};var l=J(J({},tx,o),M_,a),u=J(J(J(J({},ZO,n?a:o),ex,n?o:a),M_,s),F_,s),d=J(J(J(J(J(J({},tx,o),M_,a),F_,s),gX,c),ZO,n?s:c),ex,n?c:s),h={inline:l,horizontal:u,vertical:d,inlineSub:l,horizontalSub:d,verticalSub:d},f=(i=h["".concat(e).concat(t?"":"Sub")])===null||i===void 0?void 0:i[r];switch(f){case o:return{offset:-1,sibling:!0};case a:return{offset:1,sibling:!0};case c:return{offset:-1,sibling:!1};case s:return{offset:1,sibling:!1};default:return null}}function QIe(e){for(var t=e;t;){if(t.getAttribute("data-menu-list"))return t;t=t.parentElement}return null}function ZIe(e,t){for(var n=e||document.activeElement;n;){if(t.has(n))return n;n=n.parentElement}return null}function mD(e,t){var n=XIe(e,!0);return n.filter(function(r){return t.has(r)})}function V6(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;if(!e)return null;var i=mD(e,t),o=i.length,a=i.findIndex(function(s){return n===s});return r<0?a===-1?a=o-1:a-=1:r>0&&(a+=1),a=(a+o)%o,i[a]}var nx=function(t,n){var r=new Set,i=new Map,o=new Map;return t.forEach(function(a){var s=document.querySelector("[data-menu-id='".concat(dX(n,a),"']"));s&&(r.add(s),o.set(s,a),i.set(a,s))}),{elements:r,key2element:i,element2key:o}};function eAe(e,t,n,r,i,o,a,s,c,l){var u=v.useRef(),d=v.useRef();d.current=t;var h=function(){sr.cancel(u.current)};return v.useEffect(function(){return function(){h()}},[]),function(f){var g=f.which;if([].concat($6,[F_,gX,dm,hm]).includes(g)){var p=o(),m=nx(p,r),_=m,E=_.elements,S=_.key2element,C=_.element2key,b=S.get(t),T=ZIe(b,E),R=C.get(T),A=JIe(e,a(R,!0).length===1,n,g);if(!A&&g!==dm&&g!==hm)return;($6.includes(g)||[dm,hm].includes(g))&&f.preventDefault();var O=function(L){if(L){var D=L,j=L.querySelector("a");j!=null&&j.getAttribute("href")&&(D=j);var F=C.get(L);s(F),h(),u.current=sr(function(){d.current===F&&D.focus()})}};if([dm,hm].includes(g)||A.sibling||!T){var x;!T||e==="inline"?x=i.current:x=QIe(T);var M,$=mD(x,E);g===dm?M=$[0]:g===hm?M=$[$.length-1]:M=V6(x,E,T,A.offset),O(M)}else if(A.inlineTrigger)c(R);else if(A.offset>0)c(R,!0),h(),u.current=sr(function(){m=nx(p,r);var z=T.getAttribute("aria-controls"),L=document.getElementById(z),D=V6(L,m.elements);O(D)},5);else if(A.offset<0){var U=a(R,!0),V=U[U.length-2],W=S.get(V);c(V,!1),O(W)}}l==null||l(f)}}function tAe(e){Promise.resolve().then(e)}var gD="__RC_UTIL_PATH_SPLIT__",j6=function(t){return t.join(gD)},nAe=function(t){return t.split(gD)},rx="rc-menu-more";function rAe(){var e=v.useState({}),t=ce(e,2),n=t[1],r=v.useRef(new Map),i=v.useRef(new Map),o=v.useState([]),a=ce(o,2),s=a[0],c=a[1],l=v.useRef(0),u=v.useRef(!1),d=function(){u.current||n({})},h=v.useCallback(function(S,C){var b=j6(C);i.current.set(b,S),r.current.set(S,b),l.current+=1;var T=l.current;tAe(function(){T===l.current&&d()})},[]),f=v.useCallback(function(S,C){var b=j6(C);i.current.delete(b),r.current.delete(S)},[]),g=v.useCallback(function(S){c(S)},[]),p=v.useCallback(function(S,C){var b=r.current.get(S)||"",T=nAe(b);return C&&s.includes(T[0])&&T.unshift(rx),T},[s]),m=v.useCallback(function(S,C){return S.some(function(b){var T=p(b,!0);return T.includes(C)})},[p]),_=function(){var C=Me(r.current.keys());return s.length&&C.push(rx),C},E=v.useCallback(function(S){var C="".concat(r.current.get(S)).concat(gD),b=new Set;return Me(i.current.keys()).forEach(function(T){T.startsWith(C)&&b.add(i.current.get(T))}),b},[]);return v.useEffect(function(){return function(){u.current=!0}},[]),{registerPath:h,unregisterPath:f,refreshOverflowKeys:g,isSubPathKey:m,getKeyPath:p,getKeys:_,getSubPathKeys:E}}function km(e){var t=v.useRef(e);t.current=e;var n=v.useCallback(function(){for(var r,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(r=t.current)===null||r===void 0?void 0:r.call.apply(r,[t].concat(o))},[]);return e?n:void 0}var iAe=Math.random().toFixed(5).toString().slice(2),H6=0;function oAe(e){var t=go(e,{value:e}),n=ce(t,2),r=n[0],i=n[1];return v.useEffect(function(){H6+=1;var o="".concat(iAe,"-").concat(H6);i("rc-menu-uuid-".concat(o))},[]),r}function vX(e,t,n,r){var i=v.useContext(Ws),o=i.activeKey,a=i.onActive,s=i.onInactive,c={active:o===e};return t||(c.onMouseEnter=function(l){n==null||n({key:e,domEvent:l}),a(e)},c.onMouseLeave=function(l){r==null||r({key:e,domEvent:l}),s(e)}),c}function EX(e){var t=v.useContext(Ws),n=t.mode,r=t.rtl,i=t.inlineIndent;if(n!=="inline")return null;var o=e;return r?{paddingRight:o*i}:{paddingLeft:o*i}}function _X(e){var t=e.icon,n=e.props,r=e.children,i;return t===null||t===!1?null:(typeof t=="function"?i=v.createElement(t,Y({},n)):typeof t!="boolean"&&(i=t),i||r||null)}var aAe=["item"];function ty(e){var t=e.item,n=kt(e,aAe);return Object.defineProperty(n,"item",{get:function(){return mo(!1,"`info.item` is deprecated since we will move to function component that not provides React Node instance in future."),t}}),n}var sAe=["title","attribute","elementRef"],cAe=["style","className","eventKey","warnKey","disabled","itemIcon","children","role","onMouseEnter","onMouseLeave","onClick","onKeyDown","onFocus"],lAe=["active"],uAe=function(e){_l(n,e);var t=Zd(n);function n(){return Ui(this,n),t.apply(this,arguments)}return Bi(n,[{key:"render",value:function(){var i=this.props,o=i.title,a=i.attribute,s=i.elementRef,c=kt(i,sAe),l=So(c,["eventKey","popupClassName","popupOffset","onTitleClick"]);return mo(!a,"`attribute` of Menu.Item is deprecated. Please pass attribute directly."),v.createElement(Rc.Item,Ee({},a,{title:typeof o=="string"?o:void 0},l,{ref:s}))}}]),n}(v.Component),dAe=v.forwardRef(function(e,t){var n=e.style,r=e.className,i=e.eventKey;e.warnKey;var o=e.disabled,a=e.itemIcon,s=e.children,c=e.role,l=e.onMouseEnter,u=e.onMouseLeave,d=e.onClick,h=e.onKeyDown,f=e.onFocus,g=kt(e,cAe),p=hX(i),m=v.useContext(Ws),_=m.prefixCls,E=m.onItemClick,S=m.disabled,C=m.overflowDisabled,b=m.itemIcon,T=m.selectedKeys,R=m.onActive,A=v.useContext(pD),O=A._internalRenderMenuItem,x="".concat(_,"-item"),M=v.useRef(),$=v.useRef(),U=S||o,V=Hg(t,$),W=Pp(i),z=function(fe){return{key:i,keyPath:Me(W).reverse(),item:M.current,domEvent:fe}},L=a||b,D=vX(i,U,l,u),j=D.active,F=kt(D,lAe),y=T.includes(i),I=EX(W.length),N=function(fe){if(!U){var ae=z(fe);d==null||d(ty(ae)),E(ae)}},B=function(fe){if(h==null||h(fe),fe.which===Oe.ENTER){var ae=z(fe);d==null||d(ty(ae)),E(ae)}},K=function(fe){R(i),f==null||f(fe)},X={};e.role==="option"&&(X["aria-selected"]=y);var ee=v.createElement(uAe,Ee({ref:M,elementRef:V,role:c===null?"none":c||"menuitem",tabIndex:o?null:-1,"data-menu-id":C&&p?null:p},g,F,X,{component:"li","aria-disabled":o,style:Y(Y({},I),n),className:de(x,J(J(J({},"".concat(x,"-active"),j),"".concat(x,"-selected"),y),"".concat(x,"-disabled"),U),r),onClick:N,onKeyDown:B,onFocus:K}),s,v.createElement(_X,{props:Y(Y({},e),{},{isSelected:y}),icon:L}));return O&&(ee=O(ee,e,{selected:y})),ee});function hAe(e,t){var n=e.eventKey,r=qC(),i=Pp(n);return v.useEffect(function(){if(r)return r.registerPath(n,i),function(){r.unregisterPath(n,i)}},[i]),r?null:v.createElement(dAe,Ee({},e,{ref:t}))}const YC=v.forwardRef(hAe);var fAe=["className","children"],pAe=function(t,n){var r=t.className,i=t.children,o=kt(t,fAe),a=v.useContext(Ws),s=a.prefixCls,c=a.mode,l=a.rtl;return v.createElement("ul",Ee({className:de(s,l&&"".concat(s,"-rtl"),"".concat(s,"-sub"),"".concat(s,"-").concat(c==="inline"?"inline":"vertical"),r),role:"menu"},o,{"data-menu-list":!0,ref:n}),i)},vD=v.forwardRef(pAe);vD.displayName="SubMenuList";function ED(e,t){return zs(e).map(function(n,r){if(v.isValidElement(n)){var i,o,a=n.key,s=(i=(o=n.props)===null||o===void 0?void 0:o.eventKey)!==null&&i!==void 0?i:a,c=s==null;c&&(s="tmp_key-".concat([].concat(Me(t),[r]).join("-")));var l={key:s,eventKey:s};return v.cloneElement(n,l)}return n})}var ho={adjustX:1,adjustY:1},mAe={topLeft:{points:["bl","tl"],overflow:ho},topRight:{points:["br","tr"],overflow:ho},bottomLeft:{points:["tl","bl"],overflow:ho},bottomRight:{points:["tr","br"],overflow:ho},leftTop:{points:["tr","tl"],overflow:ho},leftBottom:{points:["br","bl"],overflow:ho},rightTop:{points:["tl","tr"],overflow:ho},rightBottom:{points:["bl","br"],overflow:ho}},gAe={topLeft:{points:["bl","tl"],overflow:ho},topRight:{points:["br","tr"],overflow:ho},bottomLeft:{points:["tl","bl"],overflow:ho},bottomRight:{points:["tr","br"],overflow:ho},rightTop:{points:["tr","tl"],overflow:ho},rightBottom:{points:["br","bl"],overflow:ho},leftTop:{points:["tl","tr"],overflow:ho},leftBottom:{points:["bl","br"],overflow:ho}};function SX(e,t,n){if(t)return t;if(n)return n[e]||n.other}var vAe={horizontal:"bottomLeft",vertical:"rightTop","vertical-left":"rightTop","vertical-right":"leftTop"};function EAe(e){var t=e.prefixCls,n=e.visible,r=e.children,i=e.popup,o=e.popupStyle,a=e.popupClassName,s=e.popupOffset,c=e.disabled,l=e.mode,u=e.onVisibleChange,d=v.useContext(Ws),h=d.getPopupContainer,f=d.rtl,g=d.subMenuOpenDelay,p=d.subMenuCloseDelay,m=d.builtinPlacements,_=d.triggerSubMenuAction,E=d.forceSubMenuRender,S=d.rootClassName,C=d.motion,b=d.defaultMotions,T=v.useState(!1),R=ce(T,2),A=R[0],O=R[1],x=Y(f?Y({},gAe):Y({},mAe),m),M=vAe[l],$=SX(l,C,b),U=v.useRef($);l!=="inline"&&(U.current=$);var V=Y(Y({},U.current),{},{leavedClassName:"".concat(t,"-hidden"),removeOnLeave:!1,motionAppear:!0}),W=v.useRef();return v.useEffect(function(){return W.current=sr(function(){O(n)}),function(){sr.cancel(W.current)}},[n]),v.createElement(sD,{prefixCls:t,popupClassName:de("".concat(t,"-popup"),J({},"".concat(t,"-rtl"),f),a,S),stretch:l==="horizontal"?"minWidth":null,getPopupContainer:h,builtinPlacements:x,popupPlacement:M,popupVisible:A,popup:i,popupStyle:o,popupAlign:s&&{offset:s},action:c?[]:[_],mouseEnterDelay:g,mouseLeaveDelay:p,onPopupVisibleChange:u,forceRender:E,popupMotion:V,fresh:!0},r)}function _Ae(e){var t=e.id,n=e.open,r=e.keyPath,i=e.children,o="inline",a=v.useContext(Ws),s=a.prefixCls,c=a.forceSubMenuRender,l=a.motion,u=a.defaultMotions,d=a.mode,h=v.useRef(!1);h.current=d===o;var f=v.useState(!h.current),g=ce(f,2),p=g[0],m=g[1],_=h.current?n:!1;v.useEffect(function(){h.current&&m(!1)},[d]);var E=Y({},SX(o,l,u));r.length>1&&(E.motionAppear=!1);var S=E.onVisibleChanged;return E.onVisibleChanged=function(C){return!h.current&&!C&&m(!0),S==null?void 0:S(C)},p?null:v.createElement(mg,{mode:o,locked:!h.current},v.createElement(eh,Ee({visible:_},E,{forceRender:c,removeOnLeave:!1,leavedClassName:"".concat(s,"-hidden")}),function(C){var b=C.className,T=C.style;return v.createElement(vD,{id:t,className:b,style:T},i)}))}var SAe=["style","className","title","eventKey","warnKey","disabled","internalPopupClose","children","itemIcon","expandIcon","popupClassName","popupOffset","popupStyle","onClick","onMouseEnter","onMouseLeave","onTitleClick","onTitleMouseEnter","onTitleMouseLeave"],yAe=["active"],CAe=v.forwardRef(function(e,t){var n=e.style,r=e.className,i=e.title,o=e.eventKey;e.warnKey;var a=e.disabled,s=e.internalPopupClose,c=e.children,l=e.itemIcon,u=e.expandIcon,d=e.popupClassName,h=e.popupOffset,f=e.popupStyle,g=e.onClick,p=e.onMouseEnter,m=e.onMouseLeave,_=e.onTitleClick,E=e.onTitleMouseEnter,S=e.onTitleMouseLeave,C=kt(e,SAe),b=hX(o),T=v.useContext(Ws),R=T.prefixCls,A=T.mode,O=T.openKeys,x=T.disabled,M=T.overflowDisabled,$=T.activeKey,U=T.selectedKeys,V=T.itemIcon,W=T.expandIcon,z=T.onItemClick,L=T.onOpenChange,D=T.onActive,j=v.useContext(pD),F=j._internalRenderSubMenuItem,y=v.useContext(mX),I=y.isSubPathKey,N=Pp(),B="".concat(R,"-submenu"),K=x||a,X=v.useRef(),ee=v.useRef(),ne=l??V,fe=u??W,ae=O.includes(o),oe=!M&&ae,he=I(U,o),me=vX(o,K,E,S),ie=me.active,te=kt(me,yAe),ge=v.useState(!1),pe=ce(ge,2),be=pe[0],Se=pe[1],ue=function(dn){K||Se(dn)},re=function(dn){ue(!0),p==null||p({key:o,domEvent:dn})},Re=function(dn){ue(!1),m==null||m({key:o,domEvent:dn})},we=v.useMemo(function(){return ie||(A!=="inline"?be||I([$],o):!1)},[A,ie,$,be,o,I]),xe=EX(N.length),We=function(dn){K||(_==null||_({key:o,domEvent:dn}),A==="inline"&&L(o,!ae))},Ve=km(function(Ot){g==null||g(ty(Ot)),z(Ot)}),Rt=function(dn){A!=="inline"&&L(o,dn)},xt=function(){D(o)},Xe=b&&"".concat(b,"-popup"),Ge=v.createElement("div",Ee({role:"menuitem",style:xe,className:"".concat(B,"-title"),tabIndex:K?null:-1,ref:X,title:typeof i=="string"?i:null,"data-menu-id":M&&b?null:b,"aria-expanded":oe,"aria-haspopup":!0,"aria-controls":Xe,"aria-disabled":K,onClick:We,onFocus:xt},te),i,v.createElement(_X,{icon:A!=="horizontal"?fe:void 0,props:Y(Y({},e),{},{isOpen:oe,isSubMenu:!0})},v.createElement("i",{className:"".concat(B,"-arrow")}))),Je=v.useRef(A);if(A!=="inline"&&N.length>1?Je.current="vertical":Je.current=A,!M){var st=Je.current;Ge=v.createElement(EAe,{mode:st,prefixCls:B,visible:!s&&oe&&A!=="inline",popupClassName:d,popupOffset:h,popupStyle:f,popup:v.createElement(mg,{mode:st==="horizontal"?"vertical":st},v.createElement(vD,{id:Xe,ref:ee},c)),disabled:K,onVisibleChange:Rt},Ge)}var At=v.createElement(Rc.Item,Ee({ref:t,role:"none"},C,{component:"li",style:n,className:de(B,"".concat(B,"-").concat(A),r,J(J(J(J({},"".concat(B,"-open"),oe),"".concat(B,"-active"),we),"".concat(B,"-selected"),he),"".concat(B,"-disabled"),K)),onMouseEnter:re,onMouseLeave:Re}),Ge,!M&&v.createElement(_Ae,{id:Xe,open:oe,keyPath:N},c));return F&&(At=F(At,e,{selected:he,active:we,open:oe,disabled:K})),v.createElement(mg,{onItemClick:Ve,mode:A==="horizontal"?"vertical":A,itemIcon:ne,expandIcon:fe},At)}),XC=v.forwardRef(function(e,t){var n=e.eventKey,r=e.children,i=Pp(n),o=ED(r,i),a=qC();v.useEffect(function(){if(a)return a.registerPath(n,i),function(){a.unregisterPath(n,i)}},[i]);var s;return a?s=o:s=v.createElement(CAe,Ee({ref:t},e),o),v.createElement(pX.Provider,{value:i},s)});function _D(e){var t=e.className,n=e.style,r=v.useContext(Ws),i=r.prefixCls,o=qC();return o?null:v.createElement("li",{role:"separator",className:de("".concat(i,"-item-divider"),t),style:n})}var bAe=["className","title","eventKey","children"],TAe=v.forwardRef(function(e,t){var n=e.className,r=e.title;e.eventKey;var i=e.children,o=kt(e,bAe),a=v.useContext(Ws),s=a.prefixCls,c="".concat(s,"-item-group");return v.createElement("li",Ee({ref:t,role:"presentation"},o,{onClick:function(u){return u.stopPropagation()},className:de(c,n)}),v.createElement("div",{role:"presentation",className:"".concat(c,"-title"),title:typeof r=="string"?r:void 0},r),v.createElement("ul",{role:"group",className:"".concat(c,"-list")},i))}),SD=v.forwardRef(function(e,t){var n=e.eventKey,r=e.children,i=Pp(n),o=ED(r,i),a=qC();return a?o:v.createElement(TAe,Ee({ref:t},So(e,["warnKey"])),o)}),RAe=["label","children","key","type"];function ix(e,t){var n=t.item,r=t.group,i=t.submenu,o=t.divider;return(e||[]).map(function(a,s){if(a&&yt(a)==="object"){var c=a,l=c.label,u=c.children,d=c.key,h=c.type,f=kt(c,RAe),g=d??"tmp-".concat(s);return u||h==="group"?h==="group"?v.createElement(r,Ee({key:g},f,{title:l}),ix(u,t)):v.createElement(i,Ee({key:g},f,{title:l}),ix(u,t)):h==="divider"?v.createElement(o,Ee({key:g},f)):v.createElement(n,Ee({key:g},f),l)}return null}).filter(function(a){return a})}function z6(e,t,n,r){var i=e,o=Y({divider:_D,item:YC,group:SD,submenu:XC},r);return t&&(i=ix(t,o)),ED(i,n)}var wAe=["prefixCls","rootClassName","style","className","tabIndex","items","children","direction","id","mode","inlineCollapsed","disabled","disabledOverflow","subMenuOpenDelay","subMenuCloseDelay","forceSubMenuRender","defaultOpenKeys","openKeys","activeKey","defaultActiveFirst","selectable","multiple","defaultSelectedKeys","selectedKeys","onSelect","onDeselect","inlineIndent","motion","defaultMotions","triggerSubMenuAction","builtinPlacements","itemIcon","expandIcon","overflowedIndicator","overflowedIndicatorPopupClassName","getPopupContainer","onClick","onOpenChange","onKeyDown","openAnimation","openTransitionName","_internalRenderMenuItem","_internalRenderSubMenuItem","_internalComponents"],ju=[],IAe=v.forwardRef(function(e,t){var n,r=e,i=r.prefixCls,o=i===void 0?"rc-menu":i,a=r.rootClassName,s=r.style,c=r.className,l=r.tabIndex,u=l===void 0?0:l,d=r.items,h=r.children,f=r.direction,g=r.id,p=r.mode,m=p===void 0?"vertical":p,_=r.inlineCollapsed,E=r.disabled,S=r.disabledOverflow,C=r.subMenuOpenDelay,b=C===void 0?.1:C,T=r.subMenuCloseDelay,R=T===void 0?.1:T,A=r.forceSubMenuRender,O=r.defaultOpenKeys,x=r.openKeys,M=r.activeKey,$=r.defaultActiveFirst,U=r.selectable,V=U===void 0?!0:U,W=r.multiple,z=W===void 0?!1:W,L=r.defaultSelectedKeys,D=r.selectedKeys,j=r.onSelect,F=r.onDeselect,y=r.inlineIndent,I=y===void 0?24:y,N=r.motion,B=r.defaultMotions,K=r.triggerSubMenuAction,X=K===void 0?"hover":K,ee=r.builtinPlacements,ne=r.itemIcon,fe=r.expandIcon,ae=r.overflowedIndicator,oe=ae===void 0?"...":ae,he=r.overflowedIndicatorPopupClassName,me=r.getPopupContainer,ie=r.onClick,te=r.onOpenChange,ge=r.onKeyDown;r.openAnimation,r.openTransitionName;var pe=r._internalRenderMenuItem,be=r._internalRenderSubMenuItem,Se=r._internalComponents,ue=kt(r,wAe),re=v.useMemo(function(){return[z6(h,d,ju,Se),z6(h,d,ju,{})]},[h,d,Se]),Re=ce(re,2),we=Re[0],xe=Re[1],We=v.useState(!1),Ve=ce(We,2),Rt=Ve[0],xt=Ve[1],Xe=v.useRef(),Ge=oAe(g),Je=f==="rtl",st=go(O,{value:x,postState:function(Ut){return Ut||ju}}),At=ce(st,2),Ot=At[0],dn=At[1],an=function(Ut){var wt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;function An(){dn(Ut),te==null||te(Ut)}wt?Oc.flushSync(An):An()},on=v.useState(Ot),ke=ce(on,2),Ze=ke[0],Mt=ke[1],En=v.useRef(!1),nr=v.useMemo(function(){return(m==="inline"||m==="vertical")&&_?["vertical",_]:[m,!1]},[m,_]),_n=ce(nr,2),qt=_n[0],it=_n[1],Nt=qt==="inline",ct=v.useState(qt),Be=ce(ct,2),nt=Be[0],Bt=Be[1],Le=v.useState(it),Ue=ce(Le,2),ze=Ue[0],mt=Ue[1];v.useEffect(function(){Bt(qt),mt(it),En.current&&(Nt?dn(Ze):an(ju))},[qt,it]);var Ft=v.useState(0),$t=ce(Ft,2),Dn=$t[0],rr=$t[1],Sn=Dn>=we.length-1||nt!=="horizontal"||S;v.useEffect(function(){Nt&&Mt(Ot)},[Ot]),v.useEffect(function(){return En.current=!0,function(){En.current=!1}},[]);var gt=rAe(),wr=gt.registerPath,Co=gt.unregisterPath,no=gt.refreshOverflowKeys,Ir=gt.isSubPathKey,Qr=gt.getKeyPath,et=gt.getKeys,Qe=gt.getSubPathKeys,dt=v.useMemo(function(){return{registerPath:wr,unregisterPath:Co}},[wr,Co]),Un=v.useMemo(function(){return{isSubPathKey:Ir}},[Ir]);v.useEffect(function(){no(Sn?ju:we.slice(Dn+1).map(function(tn){return tn.key}))},[Dn,Sn]);var Zr=go(M||$&&((n=we[0])===null||n===void 0?void 0:n.key),{value:M}),ro=ce(Zr,2),lr=ro[0],io=ro[1],Na=km(function(tn){io(tn)}),lt=km(function(){io(void 0)});v.useImperativeHandle(t,function(){return{list:Xe.current,focus:function(Ut){var wt,An=et(),ir=nx(An,Ge),Hi=ir.elements,zi=ir.key2element,Da=ir.element2key,Wi=mD(Xe.current,Hi),Fo=lr??(Wi[0]?Da.get(Wi[0]):(wt=we.find(function(tv){return!tv.props.disabled}))===null||wt===void 0?void 0:wt.key),Uc=zi.get(Fo);if(Fo&&Uc){var ah;Uc==null||(ah=Uc.focus)===null||ah===void 0||ah.call(Uc,Ut)}}}});var Vt=go(L||[],{value:D,postState:function(Ut){return Array.isArray(Ut)?Ut:Ut==null?ju:[Ut]}}),Bn=ce(Vt,2),fr=Bn[0],pi=Bn[1],Fc=function(Ut){if(V){var wt=Ut.key,An=fr.includes(wt),ir;z?An?ir=fr.filter(function(zi){return zi!==wt}):ir=[].concat(Me(fr),[wt]):ir=[wt],pi(ir);var Hi=Y(Y({},Ut),{},{selectedKeys:ir});An?F==null||F(Hi):j==null||j(Hi)}!z&&Ot.length&&nt!=="inline"&&an(ju)},bl=km(function(tn){ie==null||ie(ty(tn)),Fc(tn)}),ra=km(function(tn,Ut){var wt=Ot.filter(function(ir){return ir!==tn});if(Ut)wt.push(tn);else if(nt!=="inline"){var An=Qe(tn);wt=wt.filter(function(ir){return!An.has(ir)})}cg(Ot,wt,!0)||an(wt,!0)}),vs=function(Ut,wt){var An=wt??!Ot.includes(Ut);ra(Ut,An)},Js=eAe(nt,lr,Je,Ge,Xe,et,Qr,io,vs,ge);v.useEffect(function(){xt(!0)},[]);var Pa=v.useMemo(function(){return{_internalRenderMenuItem:pe,_internalRenderSubMenuItem:be}},[pe,be]),zt=nt!=="horizontal"||S?we:we.map(function(tn,Ut){return v.createElement(mg,{key:tn.key,overflowDisabled:Ut>Dn},tn)}),jt=v.createElement(Rc,Ee({id:g,ref:Xe,prefixCls:"".concat(o,"-overflow"),component:"ul",itemComponent:YC,className:de(o,"".concat(o,"-root"),"".concat(o,"-").concat(nt),c,J(J({},"".concat(o,"-inline-collapsed"),ze),"".concat(o,"-rtl"),Je),a),dir:f,style:s,role:"menu",tabIndex:u,data:zt,renderRawItem:function(Ut){return Ut},renderRawRest:function(Ut){var wt=Ut.length,An=wt?we.slice(-wt):null;return v.createElement(XC,{eventKey:rx,title:oe,disabled:Sn,internalPopupClose:wt===0,popupClassName:he},An)},maxCount:nt!=="horizontal"||S?Rc.INVALIDATE:Rc.RESPONSIVE,ssr:"full","data-menu-list":!0,onVisibleChange:function(Ut){rr(Ut)},onKeyDown:Js},ue));return v.createElement(pD.Provider,{value:Pa},v.createElement(uX.Provider,{value:Ge},v.createElement(mg,{prefixCls:o,rootClassName:a,mode:nt,openKeys:Ot,rtl:Je,disabled:E,motion:Rt?N:null,defaultMotions:Rt?B:null,activeKey:lr,onActive:Na,onInactive:lt,selectedKeys:fr,inlineIndent:I,subMenuOpenDelay:b,subMenuCloseDelay:R,forceSubMenuRender:A,builtinPlacements:ee,triggerSubMenuAction:X,getPopupContainer:me,itemIcon:ne,expandIcon:fe,onItemClick:bl,onOpenChange:ra},v.createElement(mX.Provider,{value:Un},jt),v.createElement("div",{style:{display:"none"},"aria-hidden":!0},v.createElement(fX.Provider,{value:dt},xe)))))}),Yg=IAe;Yg.Item=YC;Yg.SubMenu=XC;Yg.ItemGroup=SD;Yg.Divider=_D;var AAe={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM104 228a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"bars",theme:"outlined"};const OAe=AAe;var xAe=function(t,n){return v.createElement(si,Ee({},t,{ref:n,icon:OAe}))},NAe=v.forwardRef(xAe);const PAe=NAe;var DAe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 000 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"}}]},name:"left",theme:"outlined"};const LAe=DAe;var kAe=function(t,n){return v.createElement(si,Ee({},t,{ref:n,icon:LAe}))},MAe=v.forwardRef(kAe);const ny=MAe,FAe=e=>!isNaN(parseFloat(e))&&isFinite(e),UAe=FAe,yX=v.createContext({siderHook:{addSider:()=>null,removeSider:()=>null}});var BAe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const W6={xs:"479.98px",sm:"575.98px",md:"767.98px",lg:"991.98px",xl:"1199.98px",xxl:"1599.98px"},JC=v.createContext({}),$Ae=(()=>{let e=0;return function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return e+=1,`${t}${e}`}})(),VAe=v.forwardRef((e,t)=>{const{prefixCls:n,className:r,trigger:i,children:o,defaultCollapsed:a=!1,theme:s="dark",style:c={},collapsible:l=!1,reverseArrow:u=!1,width:d=200,collapsedWidth:h=80,zeroWidthTriggerStyle:f,breakpoint:g,onCollapse:p,onBreakpoint:m}=e,_=BAe(e,["prefixCls","className","trigger","children","defaultCollapsed","theme","style","collapsible","reverseArrow","width","collapsedWidth","zeroWidthTriggerStyle","breakpoint","onCollapse","onBreakpoint"]),{siderHook:E}=v.useContext(yX),[S,C]=v.useState("collapsed"in e?e.collapsed:a),[b,T]=v.useState(!1);v.useEffect(()=>{"collapsed"in e&&C(e.collapsed)},[e.collapsed]);const R=(U,V)=>{"collapsed"in e||C(U),p==null||p(U,V)},A=v.useRef();A.current=U=>{T(U.matches),m==null||m(U.matches),S!==U.matches&&R(U.matches,"responsive")},v.useEffect(()=>{function U(W){return A.current(W)}let V;if(typeof window<"u"){const{matchMedia:W}=window;if(W&&g&&g in W6){V=W(`screen and (max-width: ${W6[g]})`);try{V.addEventListener("change",U)}catch{V.addListener(U)}U(V)}}return()=>{try{V==null||V.removeEventListener("change",U)}catch{V==null||V.removeListener(U)}}},[g]),v.useEffect(()=>{const U=$Ae("ant-sider-");return E.addSider(U),()=>E.removeSider(U)},[]);const O=()=>{R(!S,"clickTrigger")},{getPrefixCls:x}=v.useContext(en),M=()=>{const U=x("layout-sider",n),V=So(_,["collapsed"]),W=S?h:d,z=UAe(W)?`${W}px`:String(W),L=parseFloat(String(h||0))===0?v.createElement("span",{onClick:O,className:de(`${U}-zero-width-trigger`,`${U}-zero-width-trigger-${u?"right":"left"}`),style:f},i||v.createElement(PAe,null)):null,F={expanded:u?v.createElement(ey,null):v.createElement(ny,null),collapsed:u?v.createElement(ny,null):v.createElement(ey,null)}[S?"collapsed":"expanded"],y=i!==null?L||v.createElement("div",{className:`${U}-trigger`,onClick:O,style:{width:z}},i||F):null,I=Object.assign(Object.assign({},c),{flex:`0 0 ${z}`,maxWidth:z,minWidth:z,width:z}),N=de(U,`${U}-${s}`,{[`${U}-collapsed`]:!!S,[`${U}-has-trigger`]:l&&i!==null&&!L,[`${U}-below`]:!!b,[`${U}-zero-width`]:parseFloat(z)===0},r);return v.createElement("aside",Object.assign({className:N},V,{style:I,ref:t}),v.createElement("div",{className:`${U}-children`},o),l||b&&L?y:null)},$=v.useMemo(()=>({siderCollapsed:S}),[S]);return v.createElement(JC.Provider,{value:$},M())}),CX=VAe;var jAe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M176 511a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"ellipsis",theme:"outlined"};const HAe=jAe;var zAe=function(t,n){return v.createElement(si,Ee({},t,{ref:n,icon:HAe}))},WAe=v.forwardRef(zAe);const GAe=WAe;var KAe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const qAe=e=>{const{prefixCls:t,className:n,dashed:r}=e,i=KAe(e,["prefixCls","className","dashed"]),{getPrefixCls:o}=v.useContext(en),a=o("menu",t),s=de({[`${a}-item-divider-dashed`]:!!r},n);return v.createElement(_D,Object.assign({className:s},i))},bX=qAe,YAe=v.createContext({prefixCls:"",firstLevel:!0,inlineCollapsed:!1}),ry=YAe,XAe=e=>{var t;const{className:n,children:r,icon:i,title:o,danger:a}=e,{prefixCls:s,firstLevel:c,direction:l,disableMenuItemTitleTooltip:u,inlineCollapsed:d}=v.useContext(ry),h=E=>{const S=v.createElement("span",{className:`${s}-title-content`},r);return(!i||v.isValidElement(r)&&r.type==="span")&&r&&E&&c&&typeof r=="string"?v.createElement("div",{className:`${s}-inline-collapsed-noicon`},r.charAt(0)):S},{siderCollapsed:f}=v.useContext(JC);let g=o;typeof o>"u"?g=c?r:"":o===!1&&(g="");const p={title:g};!f&&!d&&(p.title=null,p.open=!1);const m=zs(r).length;let _=v.createElement(YC,Object.assign({},So(e,["title","icon","danger"]),{className:de({[`${s}-item-danger`]:a,[`${s}-item-only-child`]:(i?m+1:m)===1},n),title:typeof o=="string"?o:void 0}),ls(i,{className:de(v.isValidElement(i)?(t=i.props)===null||t===void 0?void 0:t.className:"",`${s}-item-icon`)}),h(d));return u||(_=v.createElement(qg,Object.assign({},p,{placement:l==="rtl"?"left":"right",overlayClassName:`${s}-inline-collapsed-tooltip`}),_)),_},TX=XAe;globalThis&&globalThis.__rest;const JAe=v.createContext(null),G6=JAe,QAe=e=>{const{componentCls:t,motionDurationSlow:n,horizontalLineHeight:r,colorSplit:i,lineWidth:o,lineType:a,itemPaddingInline:s}=e;return{[`${t}-horizontal`]:{lineHeight:r,border:0,borderBottom:`${ve(o)} ${a} ${i}`,boxShadow:"none","&::after":{display:"block",clear:"both",height:0,content:'"\\20"'},[`${t}-item, ${t}-submenu`]:{position:"relative",display:"inline-block",verticalAlign:"bottom",paddingInline:s},[`> ${t}-item:hover,
        > ${t}-item-active,
        > ${t}-submenu ${t}-submenu-title:hover`]:{backgroundColor:"transparent"},[`${t}-item, ${t}-submenu-title`]:{transition:[`border-color ${n}`,`background ${n}`].join(",")},[`${t}-submenu-arrow`]:{display:"none"}}}},ZAe=QAe,eOe=e=>{let{componentCls:t,menuArrowOffset:n,calc:r}=e;return{[`${t}-rtl`]:{direction:"rtl"},[`${t}-submenu-rtl`]:{transformOrigin:"100% 0"},[`${t}-rtl${t}-vertical,
    ${t}-submenu-rtl ${t}-vertical`]:{[`${t}-submenu-arrow`]:{"&::before":{transform:`rotate(-45deg) translateY(${ve(r(n).mul(-1).equal())})`},"&::after":{transform:`rotate(45deg) translateY(${ve(n)})`}}}}},tOe=eOe,K6=e=>Object.assign({},GS(e)),nOe=(e,t)=>{const{componentCls:n,itemColor:r,itemSelectedColor:i,groupTitleColor:o,itemBg:a,subMenuItemBg:s,itemSelectedBg:c,activeBarHeight:l,activeBarWidth:u,activeBarBorderWidth:d,motionDurationSlow:h,motionEaseInOut:f,motionEaseOut:g,itemPaddingInline:p,motionDurationMid:m,itemHoverColor:_,lineType:E,colorSplit:S,itemDisabledColor:C,dangerItemColor:b,dangerItemHoverColor:T,dangerItemSelectedColor:R,dangerItemActiveBg:A,dangerItemSelectedBg:O,popupBg:x,itemHoverBg:M,itemActiveBg:$,menuSubMenuBg:U,horizontalItemSelectedColor:V,horizontalItemSelectedBg:W,horizontalItemBorderRadius:z,horizontalItemHoverBg:L}=e;return{[`${n}-${t}, ${n}-${t} > ${n}`]:{color:r,background:a,[`&${n}-root:focus-visible`]:Object.assign({},K6(e)),[`${n}-item-group-title`]:{color:o},[`${n}-submenu-selected`]:{[`> ${n}-submenu-title`]:{color:i}},[`${n}-item, ${n}-submenu-title`]:{color:r,[`&:not(${n}-item-disabled):focus-visible`]:Object.assign({},K6(e))},[`${n}-item-disabled, ${n}-submenu-disabled`]:{color:`${C} !important`},[`${n}-item:not(${n}-item-selected):not(${n}-submenu-selected)`]:{[`&:hover, > ${n}-submenu-title:hover`]:{color:_}},[`&:not(${n}-horizontal)`]:{[`${n}-item:not(${n}-item-selected)`]:{"&:hover":{backgroundColor:M},"&:active":{backgroundColor:$}},[`${n}-submenu-title`]:{"&:hover":{backgroundColor:M},"&:active":{backgroundColor:$}}},[`${n}-item-danger`]:{color:b,[`&${n}-item:hover`]:{[`&:not(${n}-item-selected):not(${n}-submenu-selected)`]:{color:T}},[`&${n}-item:active`]:{background:A}},[`${n}-item a`]:{"&, &:hover":{color:"inherit"}},[`${n}-item-selected`]:{color:i,[`&${n}-item-danger`]:{color:R},"a, a:hover":{color:"inherit"}},[`& ${n}-item-selected`]:{backgroundColor:c,[`&${n}-item-danger`]:{backgroundColor:O}},[`&${n}-submenu > ${n}`]:{backgroundColor:U},[`&${n}-popup > ${n}`]:{backgroundColor:x},[`&${n}-submenu-popup > ${n}`]:{backgroundColor:x},[`&${n}-horizontal`]:Object.assign(Object.assign({},t==="dark"?{borderBottom:0}:{}),{[`> ${n}-item, > ${n}-submenu`]:{top:d,marginTop:e.calc(d).mul(-1).equal(),marginBottom:0,borderRadius:z,"&::after":{position:"absolute",insetInline:p,bottom:0,borderBottom:`${ve(l)} solid transparent`,transition:`border-color ${h} ${f}`,content:'""'},"&:hover, &-active, &-open":{background:L,"&::after":{borderBottomWidth:l,borderBottomColor:V}},"&-selected":{color:V,backgroundColor:W,"&:hover":{backgroundColor:W},"&::after":{borderBottomWidth:l,borderBottomColor:V}}}}),[`&${n}-root`]:{[`&${n}-inline, &${n}-vertical`]:{borderInlineEnd:`${ve(d)} ${E} ${S}`}},[`&${n}-inline`]:{[`${n}-sub${n}-inline`]:{background:s},[`${n}-item`]:{position:"relative","&::after":{position:"absolute",insetBlock:0,insetInlineEnd:0,borderInlineEnd:`${ve(u)} solid ${i}`,transform:"scaleY(0.0001)",opacity:0,transition:[`transform ${m} ${g}`,`opacity ${m} ${g}`].join(","),content:'""'},[`&${n}-item-danger`]:{"&::after":{borderInlineEndColor:R}}},[`${n}-selected, ${n}-item-selected`]:{"&::after":{transform:"scaleY(1)",opacity:1,transition:[`transform ${m} ${f}`,`opacity ${m} ${f}`].join(",")}}}}}},q6=nOe,Y6=e=>{const{componentCls:t,itemHeight:n,itemMarginInline:r,padding:i,menuArrowSize:o,marginXS:a,itemMarginBlock:s,itemWidth:c}=e,l=e.calc(o).add(i).add(a).equal();return{[`${t}-item`]:{position:"relative",overflow:"hidden"},[`${t}-item, ${t}-submenu-title`]:{height:n,lineHeight:ve(n),paddingInline:i,overflow:"hidden",textOverflow:"ellipsis",marginInline:r,marginBlock:s,width:c},[`> ${t}-item,
            > ${t}-submenu > ${t}-submenu-title`]:{height:n,lineHeight:ve(n)},[`${t}-item-group-list ${t}-submenu-title,
            ${t}-submenu-title`]:{paddingInlineEnd:l}}},rOe=e=>{const{componentCls:t,iconCls:n,itemHeight:r,colorTextLightSolid:i,dropdownWidth:o,controlHeightLG:a,motionDurationMid:s,motionEaseOut:c,paddingXL:l,itemMarginInline:u,fontSizeLG:d,motionDurationSlow:h,paddingXS:f,boxShadowSecondary:g,collapsedWidth:p,collapsedIconSize:m}=e,_={height:r,lineHeight:ve(r),listStylePosition:"inside",listStyleType:"disc"};return[{[t]:{"&-inline, &-vertical":Object.assign({[`&${t}-root`]:{boxShadow:"none"}},Y6(e))},[`${t}-submenu-popup`]:{[`${t}-vertical`]:Object.assign(Object.assign({},Y6(e)),{boxShadow:g})}},{[`${t}-submenu-popup ${t}-vertical${t}-sub`]:{minWidth:o,maxHeight:`calc(100vh - ${ve(e.calc(a).mul(2.5).equal())})`,padding:"0",overflow:"hidden",borderInlineEnd:0,"&:not([class*='-active'])":{overflowX:"hidden",overflowY:"auto"}}},{[`${t}-inline`]:{width:"100%",[`&${t}-root`]:{[`${t}-item, ${t}-submenu-title`]:{display:"flex",alignItems:"center",transition:[`border-color ${h}`,`background ${h}`,`padding ${s} ${c}`,`padding-inline calc(50% - ${ve(e.calc(d).div(2).equal())} - ${ve(u)})`].join(","),[`> ${t}-title-content`]:{flex:"auto",minWidth:0,overflow:"hidden",textOverflow:"ellipsis"},"> *":{flex:"none"}}},[`${t}-sub${t}-inline`]:{padding:0,border:0,borderRadius:0,boxShadow:"none",[`& > ${t}-submenu > ${t}-submenu-title`]:_,[`& ${t}-item-group-title`]:{paddingInlineStart:l}},[`${t}-item`]:_}},{[`${t}-inline-collapsed`]:{width:p,[`&${t}-root`]:{[`${t}-item, ${t}-submenu ${t}-submenu-title`]:{[`> ${t}-inline-collapsed-noicon`]:{fontSize:d,textAlign:"center"}}},[`> ${t}-item,
          > ${t}-item-group > ${t}-item-group-list > ${t}-item,
          > ${t}-item-group > ${t}-item-group-list > ${t}-submenu > ${t}-submenu-title,
          > ${t}-submenu > ${t}-submenu-title`]:{insetInlineStart:0,paddingInline:`calc(50% - ${ve(e.calc(d).div(2).equal())} - ${ve(u)})`,textOverflow:"clip",[`
            ${t}-submenu-arrow,
            ${t}-submenu-expand-icon
          `]:{opacity:0},[`${t}-item-icon, ${n}`]:{margin:0,fontSize:m,lineHeight:ve(r),"+ span":{display:"inline-block",opacity:0}}},[`${t}-item-icon, ${n}`]:{display:"inline-block"},"&-tooltip":{pointerEvents:"none",[`${t}-item-icon, ${n}`]:{display:"none"},"a, a:hover":{color:i}},[`${t}-item-group-title`]:Object.assign(Object.assign({},WS),{paddingInline:f})}}]},iOe=rOe,X6=e=>{const{componentCls:t,motionDurationSlow:n,motionDurationMid:r,motionEaseInOut:i,motionEaseOut:o,iconCls:a,iconSize:s,iconMarginInlineEnd:c}=e;return{[`${t}-item, ${t}-submenu-title`]:{position:"relative",display:"block",margin:0,whiteSpace:"nowrap",cursor:"pointer",transition:[`border-color ${n}`,`background ${n}`,`padding ${n} ${i}`].join(","),[`${t}-item-icon, ${a}`]:{minWidth:s,fontSize:s,transition:[`font-size ${r} ${o}`,`margin ${n} ${i}`,`color ${n}`].join(","),"+ span":{marginInlineStart:c,opacity:1,transition:[`opacity ${n} ${i}`,`margin ${n}`,`color ${n}`].join(",")}},[`${t}-item-icon`]:Object.assign({},MC()),[`&${t}-item-only-child`]:{[`> ${a}, > ${t}-item-icon`]:{marginInlineEnd:0}}},[`${t}-item-disabled, ${t}-submenu-disabled`]:{background:"none !important",cursor:"not-allowed","&::after":{borderColor:"transparent !important"},a:{color:"inherit !important"},[`> ${t}-submenu-title`]:{color:"inherit !important",cursor:"not-allowed"}}}},J6=e=>{const{componentCls:t,motionDurationSlow:n,motionEaseInOut:r,borderRadius:i,menuArrowSize:o,menuArrowOffset:a}=e;return{[`${t}-submenu`]:{"&-expand-icon, &-arrow":{position:"absolute",top:"50%",insetInlineEnd:e.margin,width:o,color:"currentcolor",transform:"translateY(-50%)",transition:`transform ${n} ${r}, opacity ${n}`},"&-arrow":{"&::before, &::after":{position:"absolute",width:e.calc(o).mul(.6).equal(),height:e.calc(o).mul(.15).equal(),backgroundColor:"currentcolor",borderRadius:i,transition:[`background ${n} ${r}`,`transform ${n} ${r}`,`top ${n} ${r}`,`color ${n} ${r}`].join(","),content:'""'},"&::before":{transform:`rotate(45deg) translateY(${ve(e.calc(a).mul(-1).equal())})`},"&::after":{transform:`rotate(-45deg) translateY(${ve(a)})`}}}}},oOe=e=>{const{antCls:t,componentCls:n,fontSize:r,motionDurationSlow:i,motionDurationMid:o,motionEaseInOut:a,paddingXS:s,padding:c,colorSplit:l,lineWidth:u,zIndexPopup:d,borderRadiusLG:h,subMenuItemBorderRadius:f,menuArrowSize:g,menuArrowOffset:p,lineType:m,groupTitleLineHeight:_,groupTitleFontSize:E}=e;return[{"":{[`${n}`]:Object.assign(Object.assign({},AO()),{"&-hidden":{display:"none"}})},[`${n}-submenu-hidden`]:{display:"none"}},{[n]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Oa(e)),AO()),{marginBottom:0,paddingInlineStart:0,fontSize:r,lineHeight:0,listStyle:"none",outline:"none",transition:`width ${i} cubic-bezier(0.2, 0, 0, 1) 0s`,"ul, ol":{margin:0,padding:0,listStyle:"none"},"&-overflow":{display:"flex",[`${n}-item`]:{flex:"none"}},[`${n}-item, ${n}-submenu, ${n}-submenu-title`]:{borderRadius:e.itemBorderRadius},[`${n}-item-group-title`]:{padding:`${ve(s)} ${ve(c)}`,fontSize:E,lineHeight:_,transition:`all ${i}`},[`&-horizontal ${n}-submenu`]:{transition:[`border-color ${i} ${a}`,`background ${i} ${a}`].join(",")},[`${n}-submenu, ${n}-submenu-inline`]:{transition:[`border-color ${i} ${a}`,`background ${i} ${a}`,`padding ${o} ${a}`].join(",")},[`${n}-submenu ${n}-sub`]:{cursor:"initial",transition:[`background ${i} ${a}`,`padding ${i} ${a}`].join(",")},[`${n}-title-content`]:{transition:`color ${i}`,[`> ${t}-typography-ellipsis-single-line`]:{display:"inline",verticalAlign:"unset"}},[`${n}-item a`]:{"&::before":{position:"absolute",inset:0,backgroundColor:"transparent",content:'""'}},[`${n}-item-divider`]:{overflow:"hidden",lineHeight:0,borderColor:l,borderStyle:m,borderWidth:0,borderTopWidth:u,marginBlock:u,padding:0,"&-dashed":{borderStyle:"dashed"}}}),X6(e)),{[`${n}-item-group`]:{[`${n}-item-group-list`]:{margin:0,padding:0,[`${n}-item, ${n}-submenu-title`]:{paddingInline:`${ve(e.calc(r).mul(2).equal())} ${ve(c)}`}}},"&-submenu":{"&-popup":{position:"absolute",zIndex:d,borderRadius:h,boxShadow:"none",transformOrigin:"0 0",[`&${n}-submenu`]:{background:"transparent"},"&::before":{position:"absolute",inset:0,zIndex:-1,width:"100%",height:"100%",opacity:0,content:'""'},[`> ${n}`]:Object.assign(Object.assign(Object.assign({borderRadius:h},X6(e)),J6(e)),{[`${n}-item, ${n}-submenu > ${n}-submenu-title`]:{borderRadius:f},[`${n}-submenu-title::after`]:{transition:`transform ${i} ${a}`}})},"\n          &-placement-leftTop,\n          &-placement-bottomRight,\n          ":{transformOrigin:"100% 0"},"\n          &-placement-leftBottom,\n          &-placement-topRight,\n          ":{transformOrigin:"100% 100%"},"\n          &-placement-rightBottom,\n          &-placement-topLeft,\n          ":{transformOrigin:"0 100%"},"\n          &-placement-bottomLeft,\n          &-placement-rightTop,\n          ":{transformOrigin:"0 0"},"\n          &-placement-leftTop,\n          &-placement-leftBottom\n          ":{paddingInlineEnd:e.paddingXS},"\n          &-placement-rightTop,\n          &-placement-rightBottom\n          ":{paddingInlineStart:e.paddingXS},"\n          &-placement-topRight,\n          &-placement-topLeft\n          ":{paddingBottom:e.paddingXS},"\n          &-placement-bottomRight,\n          &-placement-bottomLeft\n          ":{paddingTop:e.paddingXS}}}),J6(e)),{[`&-inline-collapsed ${n}-submenu-arrow,
        &-inline ${n}-submenu-arrow`]:{"&::before":{transform:`rotate(-45deg) translateX(${ve(p)})`},"&::after":{transform:`rotate(45deg) translateX(${ve(e.calc(p).mul(-1).equal())})`}},[`${n}-submenu-open${n}-submenu-inline > ${n}-submenu-title > ${n}-submenu-arrow`]:{transform:`translateY(${ve(e.calc(g).mul(.2).mul(-1).equal())})`,"&::after":{transform:`rotate(-45deg) translateX(${ve(e.calc(p).mul(-1).equal())})`},"&::before":{transform:`rotate(45deg) translateX(${ve(p)})`}}})},{[`${t}-layout-header`]:{[n]:{lineHeight:"inherit"}}}]},aOe=e=>{var t,n,r;const{colorPrimary:i,colorError:o,colorTextDisabled:a,colorErrorBg:s,colorText:c,colorTextDescription:l,colorBgContainer:u,colorFillAlter:d,colorFillContent:h,lineWidth:f,lineWidthBold:g,controlItemBgActive:p,colorBgTextHover:m,controlHeightLG:_,lineHeight:E,colorBgElevated:S,marginXXS:C,padding:b,fontSize:T,controlHeightSM:R,fontSizeLG:A,colorTextLightSolid:O,colorErrorHover:x}=e,M=(t=e.activeBarWidth)!==null&&t!==void 0?t:0,$=(n=e.activeBarBorderWidth)!==null&&n!==void 0?n:f,U=(r=e.itemMarginInline)!==null&&r!==void 0?r:e.marginXXS,V=new bi(O).setAlpha(.65).toRgbString();return{dropdownWidth:160,zIndexPopup:e.zIndexPopupBase+50,radiusItem:e.borderRadiusLG,itemBorderRadius:e.borderRadiusLG,radiusSubMenuItem:e.borderRadiusSM,subMenuItemBorderRadius:e.borderRadiusSM,colorItemText:c,itemColor:c,colorItemTextHover:c,itemHoverColor:c,colorItemTextHoverHorizontal:i,horizontalItemHoverColor:i,colorGroupTitle:l,groupTitleColor:l,colorItemTextSelected:i,itemSelectedColor:i,colorItemTextSelectedHorizontal:i,horizontalItemSelectedColor:i,colorItemBg:u,itemBg:u,colorItemBgHover:m,itemHoverBg:m,colorItemBgActive:h,itemActiveBg:p,colorSubItemBg:d,subMenuItemBg:d,colorItemBgSelected:p,itemSelectedBg:p,colorItemBgSelectedHorizontal:"transparent",horizontalItemSelectedBg:"transparent",colorActiveBarWidth:0,activeBarWidth:M,colorActiveBarHeight:g,activeBarHeight:g,colorActiveBarBorderSize:f,activeBarBorderWidth:$,colorItemTextDisabled:a,itemDisabledColor:a,colorDangerItemText:o,dangerItemColor:o,colorDangerItemTextHover:o,dangerItemHoverColor:o,colorDangerItemTextSelected:o,dangerItemSelectedColor:o,colorDangerItemBgActive:s,dangerItemActiveBg:s,colorDangerItemBgSelected:s,dangerItemSelectedBg:s,itemMarginInline:U,horizontalItemBorderRadius:0,horizontalItemHoverBg:"transparent",itemHeight:_,groupTitleLineHeight:E,collapsedWidth:_*2,popupBg:S,itemMarginBlock:C,itemPaddingInline:b,horizontalLineHeight:`${_*1.15}px`,iconSize:T,iconMarginInlineEnd:R-T,collapsedIconSize:A,groupTitleFontSize:T,darkItemDisabledColor:new bi(O).setAlpha(.25).toRgbString(),darkItemColor:V,darkDangerItemColor:o,darkItemBg:"#001529",darkPopupBg:"#001529",darkSubMenuItemBg:"#000c17",darkItemSelectedColor:O,darkItemSelectedBg:i,darkDangerItemSelectedBg:o,darkItemHoverBg:"transparent",darkGroupTitleColor:V,darkItemHoverColor:O,darkDangerItemHoverColor:x,darkDangerItemSelectedColor:O,darkDangerItemActiveBg:o,itemWidth:M?`calc(100% + ${$}px)`:`calc(100% - ${U*2}px)`}},sOe=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return yo("Menu",i=>{const{colorBgElevated:o,controlHeightLG:a,fontSize:s,darkItemColor:c,darkDangerItemColor:l,darkItemBg:u,darkSubMenuItemBg:d,darkItemSelectedColor:h,darkItemSelectedBg:f,darkDangerItemSelectedBg:g,darkItemHoverBg:p,darkGroupTitleColor:m,darkItemHoverColor:_,darkItemDisabledColor:E,darkDangerItemHoverColor:S,darkDangerItemSelectedColor:C,darkDangerItemActiveBg:b,popupBg:T,darkPopupBg:R}=i,A=i.calc(s).div(7).mul(5).equal(),O=gr(i,{menuArrowSize:A,menuHorizontalHeight:i.calc(a).mul(1.15).equal(),menuArrowOffset:i.calc(A).mul(.25).equal(),menuSubMenuBg:o,calc:i.calc,popupBg:T}),x=gr(O,{itemColor:c,itemHoverColor:_,groupTitleColor:m,itemSelectedColor:h,itemBg:u,popupBg:R,subMenuItemBg:d,itemActiveBg:"transparent",itemSelectedBg:f,activeBarHeight:0,activeBarBorderWidth:0,itemHoverBg:p,itemDisabledColor:E,dangerItemColor:l,dangerItemHoverColor:S,dangerItemSelectedColor:C,dangerItemActiveBg:b,dangerItemSelectedBg:g,menuSubMenuBg:d,horizontalItemSelectedColor:h,horizontalItemSelectedBg:f});return[oOe(O),ZAe(O),iOe(O),q6(O,"light"),q6(x,"dark"),tOe(O),CY(O),JS(O,"slide-up"),JS(O,"slide-down"),IY(O,"zoom-big")]},aOe,{deprecatedTokens:[["colorGroupTitle","groupTitleColor"],["radiusItem","itemBorderRadius"],["radiusSubMenuItem","subMenuItemBorderRadius"],["colorItemText","itemColor"],["colorItemTextHover","itemHoverColor"],["colorItemTextHoverHorizontal","horizontalItemHoverColor"],["colorItemTextSelected","itemSelectedColor"],["colorItemTextSelectedHorizontal","horizontalItemSelectedColor"],["colorItemTextDisabled","itemDisabledColor"],["colorDangerItemText","dangerItemColor"],["colorDangerItemTextHover","dangerItemHoverColor"],["colorDangerItemTextSelected","dangerItemSelectedColor"],["colorDangerItemBgActive","dangerItemActiveBg"],["colorDangerItemBgSelected","dangerItemSelectedBg"],["colorItemBg","itemBg"],["colorItemBgHover","itemHoverBg"],["colorSubItemBg","subMenuItemBg"],["colorItemBgActive","itemActiveBg"],["colorItemBgSelectedHorizontal","horizontalItemSelectedBg"],["colorActiveBarWidth","activeBarWidth"],["colorActiveBarHeight","activeBarHeight"],["colorActiveBarBorderSize","activeBarBorderWidth"],["colorItemBgSelected","itemSelectedBg"]],injectStyle:n,unitless:{groupTitleLineHeight:!0}})(e,t)},cOe=e=>{var t;const{popupClassName:n,icon:r,title:i,theme:o}=e,a=v.useContext(ry),{prefixCls:s,inlineCollapsed:c,theme:l}=a,u=Pp();let d;if(!r)d=c&&!u.length&&i&&typeof i=="string"?v.createElement("div",{className:`${s}-inline-collapsed-noicon`},i.charAt(0)):v.createElement("span",{className:`${s}-title-content`},i);else{const g=v.isValidElement(i)&&i.type==="span";d=v.createElement(v.Fragment,null,ls(r,{className:de(v.isValidElement(r)?(t=r.props)===null||t===void 0?void 0:t.className:"",`${s}-item-icon`)}),g?i:v.createElement("span",{className:`${s}-title-content`},i))}const h=v.useMemo(()=>Object.assign(Object.assign({},a),{firstLevel:!1}),[a]),[f]=YP("Menu");return v.createElement(ry.Provider,{value:h},v.createElement(XC,Object.assign({},So(e,["icon"]),{title:d,popupClassName:de(s,n,`${s}-${o||l}`),popupStyle:{zIndex:f}})))},RX=cOe;var lOe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function YR(e){return e===null||e===!1}const uOe={item:TX,submenu:RX,divider:bX},dOe=v.forwardRef((e,t)=>{var n;const r=v.useContext(G6),i=r||{},{getPrefixCls:o,getPopupContainer:a,direction:s,menu:c}=v.useContext(en),l=o(),{prefixCls:u,className:d,style:h,theme:f="light",expandIcon:g,_internalDisableMenuItemTitleTooltip:p,inlineCollapsed:m,siderCollapsed:_,rootClassName:E,mode:S,selectable:C,onClick:b,overflowedIndicatorPopupClassName:T}=e,R=lOe(e,["prefixCls","className","style","theme","expandIcon","_internalDisableMenuItemTitleTooltip","inlineCollapsed","siderCollapsed","rootClassName","mode","selectable","onClick","overflowedIndicatorPopupClassName"]),A=So(R,["collapsedWidth"]);(n=i.validator)===null||n===void 0||n.call(i,{mode:S});const O=Pi(function(){var I;b==null||b.apply(void 0,arguments),(I=i.onClick)===null||I===void 0||I.call(i)}),x=i.mode||S,M=C??i.selectable,$=v.useMemo(()=>_!==void 0?_:m,[m,_]),U={horizontal:{motionName:`${l}-slide-up`},inline:FO(l),other:{motionName:`${l}-zoom-big`}},V=o("menu",u||i.prefixCls),W=Mc(V),[z,L,D]=sOe(V,W,!r),j=de(`${V}-${f}`,c==null?void 0:c.className,d),F=v.useMemo(()=>{var I,N;if(typeof g=="function"||YR(g))return g||null;if(typeof i.expandIcon=="function"||YR(i.expandIcon))return i.expandIcon||null;if(typeof(c==null?void 0:c.expandIcon)=="function"||YR(c==null?void 0:c.expandIcon))return(c==null?void 0:c.expandIcon)||null;const B=(I=g??(i==null?void 0:i.expandIcon))!==null&&I!==void 0?I:c==null?void 0:c.expandIcon;return ls(B,{className:de(`${V}-submenu-expand-icon`,v.isValidElement(B)?(N=B.props)===null||N===void 0?void 0:N.className:void 0)})},[g,i==null?void 0:i.expandIcon,c==null?void 0:c.expandIcon,V]),y=v.useMemo(()=>({prefixCls:V,inlineCollapsed:$||!1,direction:s,firstLevel:!0,theme:f,mode:x,disableMenuItemTitleTooltip:p}),[V,$,s,p,f]);return z(v.createElement(G6.Provider,{value:null},v.createElement(ry.Provider,{value:y},v.createElement(Yg,Object.assign({getPopupContainer:a,overflowedIndicator:v.createElement(GAe,null),overflowedIndicatorPopupClassName:de(V,`${V}-${f}`,T),mode:x,selectable:M,onClick:O},A,{inlineCollapsed:$,style:Object.assign(Object.assign({},c==null?void 0:c.style),h),className:j,prefixCls:V,direction:s,defaultMotions:U,expandIcon:F,ref:t,rootClassName:de(E,L,i.rootClassName,D,W),_internalComponents:uOe})))))}),hOe=dOe,Xg=v.forwardRef((e,t)=>{const n=v.useRef(null),r=v.useContext(JC);return v.useImperativeHandle(t,()=>({menu:n.current,focus:i=>{var o;(o=n.current)===null||o===void 0||o.focus(i)}})),v.createElement(hOe,Object.assign({ref:n},e,r))});Xg.Item=TX;Xg.SubMenu=RX;Xg.Divider=bX;Xg.ItemGroup=SD;const fOe=Xg;function yD(e){return gr(e,{inputAffixPadding:e.paddingXXS})}const CD=e=>{const{controlHeight:t,fontSize:n,lineHeight:r,lineWidth:i,controlHeightSM:o,controlHeightLG:a,fontSizeLG:s,lineHeightLG:c,paddingSM:l,controlPaddingHorizontalSM:u,controlPaddingHorizontal:d,colorFillAlter:h,colorPrimaryHover:f,colorPrimary:g,controlOutlineWidth:p,controlOutline:m,colorErrorOutline:_,colorWarningOutline:E,colorBgContainer:S}=e;return{paddingBlock:Math.max(Math.round((t-n*r)/2*10)/10-i,0),paddingBlockSM:Math.max(Math.round((o-n*r)/2*10)/10-i,0),paddingBlockLG:Math.ceil((a-s*c)/2*10)/10-i,paddingInline:l-i,paddingInlineSM:u-i,paddingInlineLG:d-i,addonBg:h,activeBorderColor:g,hoverBorderColor:f,activeShadow:`0 0 0 ${p}px ${m}`,errorActiveShadow:`0 0 0 ${p}px ${_}`,warningActiveShadow:`0 0 0 ${p}px ${E}`,hoverBg:S,activeBg:S,inputFontSize:n,inputFontSizeLG:s,inputFontSizeSM:n}},pOe=e=>({borderColor:e.hoverBorderColor,backgroundColor:e.hoverBg}),QC=e=>({color:e.colorTextDisabled,backgroundColor:e.colorBgContainerDisabled,borderColor:e.colorBorder,boxShadow:"none",cursor:"not-allowed",opacity:1,"input[disabled], textarea[disabled]":{cursor:"not-allowed"},"&:hover:not([disabled])":Object.assign({},pOe(gr(e,{hoverBorderColor:e.colorBorder,hoverBg:e.colorBgContainerDisabled})))}),bD=(e,t)=>({background:e.colorBgContainer,borderWidth:e.lineWidth,borderStyle:e.lineType,borderColor:t.borderColor,"&:hover":{borderColor:t.hoverBorderColor,backgroundColor:e.hoverBg},"&:focus, &:focus-within":{borderColor:t.activeBorderColor,boxShadow:t.activeShadow,outline:0,backgroundColor:e.activeBg}}),Q6=(e,t)=>({[`&${e.componentCls}-status-${t.status}:not(${e.componentCls}-disabled)`]:Object.assign(Object.assign({},bD(e,t)),{[`${e.componentCls}-prefix, ${e.componentCls}-suffix`]:{color:t.affixColor}}),[`&${e.componentCls}-status-${t.status}${e.componentCls}-disabled`]:{borderColor:t.borderColor}}),mOe=(e,t)=>({"&-outlined":Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},bD(e,{borderColor:e.colorBorder,hoverBorderColor:e.hoverBorderColor,activeBorderColor:e.activeBorderColor,activeShadow:e.activeShadow})),{[`&${e.componentCls}-disabled, &[disabled]`]:Object.assign({},QC(e))}),Q6(e,{status:"error",borderColor:e.colorError,hoverBorderColor:e.colorErrorBorderHover,activeBorderColor:e.colorError,activeShadow:e.errorActiveShadow,affixColor:e.colorError})),Q6(e,{status:"warning",borderColor:e.colorWarning,hoverBorderColor:e.colorWarningBorderHover,activeBorderColor:e.colorWarning,activeShadow:e.warningActiveShadow,affixColor:e.colorWarning})),t)}),Z6=(e,t)=>({[`&${e.componentCls}-group-wrapper-status-${t.status}`]:{[`${e.componentCls}-group-addon`]:{borderColor:t.addonBorderColor,color:t.addonColor}}}),gOe=e=>({"&-outlined":Object.assign(Object.assign(Object.assign({[`${e.componentCls}-group`]:{"&-addon":{background:e.addonBg,border:`${ve(e.lineWidth)} ${e.lineType} ${e.colorBorder}`},"&-addon:first-child":{borderInlineEnd:0},"&-addon:last-child":{borderInlineStart:0}}},Z6(e,{status:"error",addonBorderColor:e.colorError,addonColor:e.colorErrorText})),Z6(e,{status:"warning",addonBorderColor:e.colorWarning,addonColor:e.colorWarningText})),{[`&${e.componentCls}-group-wrapper-disabled`]:{[`${e.componentCls}-group-addon`]:Object.assign({},QC(e))}})}),vOe=(e,t)=>({"&-borderless":Object.assign({background:"transparent",border:"none","&:focus, &:focus-within":{outline:"none"},[`&${e.componentCls}-disabled, &[disabled]`]:{color:e.colorTextDisabled}},t)}),wX=(e,t)=>({background:t.bg,borderWidth:e.lineWidth,borderStyle:e.lineType,borderColor:"transparent","input&, & input, textarea&, & textarea":{color:t==null?void 0:t.inputColor},"&:hover":{background:t.hoverBg},"&:focus, &:focus-within":{outline:0,borderColor:t.activeBorderColor,backgroundColor:e.activeBg}}),eV=(e,t)=>({[`&${e.componentCls}-status-${t.status}:not(${e.componentCls}-disabled)`]:Object.assign(Object.assign({},wX(e,t)),{[`${e.componentCls}-prefix, ${e.componentCls}-suffix`]:{color:t.affixColor}})}),EOe=(e,t)=>({"&-filled":Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},wX(e,{bg:e.colorFillTertiary,hoverBg:e.colorFillSecondary,activeBorderColor:e.colorPrimary})),{[`&${e.componentCls}-disabled, &[disabled]`]:Object.assign({},QC(e))}),eV(e,{status:"error",bg:e.colorErrorBg,hoverBg:e.colorErrorBgHover,activeBorderColor:e.colorError,inputColor:e.colorErrorText,affixColor:e.colorError})),eV(e,{status:"warning",bg:e.colorWarningBg,hoverBg:e.colorWarningBgHover,activeBorderColor:e.colorWarning,inputColor:e.colorWarningText,affixColor:e.colorWarning})),t)}),tV=(e,t)=>({[`&${e.componentCls}-group-wrapper-status-${t.status}`]:{[`${e.componentCls}-group-addon`]:{background:t.addonBg,color:t.addonColor}}}),_Oe=e=>({"&-filled":Object.assign(Object.assign(Object.assign({[`${e.componentCls}-group`]:{"&-addon":{background:e.colorFillTertiary},[`${e.componentCls}-filled:not(:focus):not(:focus-within)`]:{"&:not(:first-child)":{borderInlineStart:`${ve(e.lineWidth)} ${e.lineType} ${e.colorSplit}`},"&:not(:last-child)":{borderInlineEnd:`${ve(e.lineWidth)} ${e.lineType} ${e.colorSplit}`}}}},tV(e,{status:"error",addonBg:e.colorErrorBg,addonColor:e.colorErrorText})),tV(e,{status:"warning",addonBg:e.colorWarningBg,addonColor:e.colorWarningText})),{[`&${e.componentCls}-group-wrapper-disabled`]:{[`${e.componentCls}-group`]:{"&-addon":{background:e.colorFillTertiary,color:e.colorTextDisabled},"&-addon:first-child":{borderInlineStart:`${ve(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderTop:`${ve(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderBottom:`${ve(e.lineWidth)} ${e.lineType} ${e.colorBorder}`},"&-addon:last-child":{borderInlineEnd:`${ve(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderTop:`${ve(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderBottom:`${ve(e.lineWidth)} ${e.lineType} ${e.colorBorder}`}}}})}),SOe=e=>({"&::-moz-placeholder":{opacity:1},"&::placeholder":{color:e,userSelect:"none"},"&:placeholder-shown":{textOverflow:"ellipsis"}}),IX=e=>{const{paddingBlockLG:t,lineHeightLG:n,borderRadiusLG:r,paddingInlineLG:i}=e;return{padding:`${ve(t)} ${ve(i)}`,fontSize:e.inputFontSizeLG,lineHeight:n,borderRadius:r}},TD=e=>({padding:`${ve(e.paddingBlockSM)} ${ve(e.paddingInlineSM)}`,fontSize:e.inputFontSizeSM,borderRadius:e.borderRadiusSM}),RD=e=>Object.assign(Object.assign({position:"relative",display:"inline-block",width:"100%",minWidth:0,padding:`${ve(e.paddingBlock)} ${ve(e.paddingInline)}`,color:e.colorText,fontSize:e.inputFontSize,lineHeight:e.lineHeight,borderRadius:e.borderRadius,transition:`all ${e.motionDurationMid}`},SOe(e.colorTextPlaceholder)),{"textarea&":{maxWidth:"100%",height:"auto",minHeight:e.controlHeight,lineHeight:e.lineHeight,verticalAlign:"bottom",transition:`all ${e.motionDurationSlow}, height 0s`,resize:"vertical"},"&-lg":Object.assign({},IX(e)),"&-sm":Object.assign({},TD(e)),"&-rtl, &-textarea-rtl":{direction:"rtl"}}),yOe=e=>{const{componentCls:t,antCls:n}=e;return{position:"relative",display:"table",width:"100%",borderCollapse:"separate",borderSpacing:0,"&[class*='col-']":{paddingInlineEnd:e.paddingXS,"&:last-child":{paddingInlineEnd:0}},[`&-lg ${t}, &-lg > ${t}-group-addon`]:Object.assign({},IX(e)),[`&-sm ${t}, &-sm > ${t}-group-addon`]:Object.assign({},TD(e)),[`&-lg ${n}-select-single ${n}-select-selector`]:{height:e.controlHeightLG},[`&-sm ${n}-select-single ${n}-select-selector`]:{height:e.controlHeightSM},[`> ${t}`]:{display:"table-cell","&:not(:first-child):not(:last-child)":{borderRadius:0}},[`${t}-group`]:{"&-addon, &-wrap":{display:"table-cell",width:1,whiteSpace:"nowrap",verticalAlign:"middle","&:not(:first-child):not(:last-child)":{borderRadius:0}},"&-wrap > *":{display:"block !important"},"&-addon":{position:"relative",padding:`0 ${ve(e.paddingInline)}`,color:e.colorText,fontWeight:"normal",fontSize:e.inputFontSize,textAlign:"center",borderRadius:e.borderRadius,transition:`all ${e.motionDurationSlow}`,lineHeight:1,[`${n}-select`]:{margin:`${ve(e.calc(e.paddingBlock).add(1).mul(-1).equal())} ${ve(e.calc(e.paddingInline).mul(-1).equal())}`,[`&${n}-select-single:not(${n}-select-customize-input):not(${n}-pagination-size-changer)`]:{[`${n}-select-selector`]:{backgroundColor:"inherit",border:`${ve(e.lineWidth)} ${e.lineType} transparent`,boxShadow:"none"}},"&-open, &-focused":{[`${n}-select-selector`]:{color:e.colorPrimary}}},[`${n}-cascader-picker`]:{margin:`-9px ${ve(e.calc(e.paddingInline).mul(-1).equal())}`,backgroundColor:"transparent",[`${n}-cascader-input`]:{textAlign:"start",border:0,boxShadow:"none"}}}},[`${t}`]:{width:"100%",marginBottom:0,textAlign:"inherit","&:focus":{zIndex:1,borderInlineEndWidth:1},"&:hover":{zIndex:1,borderInlineEndWidth:1,[`${t}-search-with-button &`]:{zIndex:0}}},[`> ${t}:first-child, ${t}-group-addon:first-child`]:{borderStartEndRadius:0,borderEndEndRadius:0,[`${n}-select ${n}-select-selector`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${t}-affix-wrapper`]:{[`&:not(:first-child) ${t}`]:{borderStartStartRadius:0,borderEndStartRadius:0},[`&:not(:last-child) ${t}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${t}:last-child, ${t}-group-addon:last-child`]:{borderStartStartRadius:0,borderEndStartRadius:0,[`${n}-select ${n}-select-selector`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`${t}-affix-wrapper`]:{"&:not(:last-child)":{borderStartEndRadius:0,borderEndEndRadius:0,[`${t}-search &`]:{borderStartStartRadius:e.borderRadius,borderEndStartRadius:e.borderRadius}},[`&:not(:first-child), ${t}-search &:not(:first-child)`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`&${t}-group-compact`]:Object.assign(Object.assign({display:"block"},AO()),{[`${t}-group-addon, ${t}-group-wrap, > ${t}`]:{"&:not(:first-child):not(:last-child)":{borderInlineEndWidth:e.lineWidth,"&:hover, &:focus":{zIndex:1}}},"& > *":{display:"inline-flex",float:"none",verticalAlign:"top",borderRadius:0},[`
        & > ${t}-affix-wrapper,
        & > ${t}-number-affix-wrapper,
        & > ${n}-picker-range
      `]:{display:"inline-flex"},"& > *:not(:last-child)":{marginInlineEnd:e.calc(e.lineWidth).mul(-1).equal(),borderInlineEndWidth:e.lineWidth},[`${t}`]:{float:"none"},[`& > ${n}-select > ${n}-select-selector,
      & > ${n}-select-auto-complete ${t},
      & > ${n}-cascader-picker ${t},
      & > ${t}-group-wrapper ${t}`]:{borderInlineEndWidth:e.lineWidth,borderRadius:0,"&:hover, &:focus":{zIndex:1}},[`& > ${n}-select-focused`]:{zIndex:1},[`& > ${n}-select > ${n}-select-arrow`]:{zIndex:1},[`& > *:first-child,
      & > ${n}-select:first-child > ${n}-select-selector,
      & > ${n}-select-auto-complete:first-child ${t},
      & > ${n}-cascader-picker:first-child ${t}`]:{borderStartStartRadius:e.borderRadius,borderEndStartRadius:e.borderRadius},[`& > *:last-child,
      & > ${n}-select:last-child > ${n}-select-selector,
      & > ${n}-cascader-picker:last-child ${t},
      & > ${n}-cascader-picker-focused:last-child ${t}`]:{borderInlineEndWidth:e.lineWidth,borderStartEndRadius:e.borderRadius,borderEndEndRadius:e.borderRadius},[`& > ${n}-select-auto-complete ${t}`]:{verticalAlign:"top"},[`${t}-group-wrapper + ${t}-group-wrapper`]:{marginInlineStart:e.calc(e.lineWidth).mul(-1).equal(),[`${t}-affix-wrapper`]:{borderRadius:0}},[`${t}-group-wrapper:not(:last-child)`]:{[`&${t}-search > ${t}-group`]:{[`& > ${t}-group-addon > ${t}-search-button`]:{borderRadius:0},[`& > ${t}`]:{borderStartStartRadius:e.borderRadius,borderStartEndRadius:0,borderEndEndRadius:0,borderEndStartRadius:e.borderRadius}}}})}},COe=e=>{const{componentCls:t,controlHeightSM:n,lineWidth:r,calc:i}=e,o=16,a=i(n).sub(i(r).mul(2)).sub(o).div(2).equal();return{[t]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Oa(e)),RD(e)),mOe(e)),EOe(e)),vOe(e)),{'&[type="color"]':{height:e.controlHeight,[`&${t}-lg`]:{height:e.controlHeightLG},[`&${t}-sm`]:{height:n,paddingTop:a,paddingBottom:a}},'&[type="search"]::-webkit-search-cancel-button, &[type="search"]::-webkit-search-decoration':{"-webkit-appearance":"none"}})}},bOe=e=>{const{componentCls:t}=e;return{[`${t}-clear-icon`]:{margin:0,color:e.colorTextQuaternary,fontSize:e.fontSizeIcon,verticalAlign:-1,cursor:"pointer",transition:`color ${e.motionDurationSlow}`,"&:hover":{color:e.colorTextTertiary},"&:active":{color:e.colorText},"&-hidden":{visibility:"hidden"},"&-has-suffix":{margin:`0 ${ve(e.inputAffixPadding)}`}}}},TOe=e=>{const{componentCls:t,inputAffixPadding:n,colorTextDescription:r,motionDurationSlow:i,colorIcon:o,colorIconHover:a,iconCls:s}=e;return{[`${t}-affix-wrapper`]:Object.assign(Object.assign(Object.assign(Object.assign({},RD(e)),{display:"inline-flex",[`&:not(${t}-disabled):hover`]:{zIndex:1,[`${t}-search-with-button &`]:{zIndex:0}},"&-focused, &:focus":{zIndex:1},[`> input${t}`]:{padding:0},[`> input${t}, > textarea${t}`]:{fontSize:"inherit",border:"none",borderRadius:0,outline:"none",background:"transparent",color:"inherit","&::-ms-reveal":{display:"none"},"&:focus":{boxShadow:"none !important"}},"&::before":{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'},[`${t}`]:{"&-prefix, &-suffix":{display:"flex",flex:"none",alignItems:"center","> *:not(:last-child)":{marginInlineEnd:e.paddingXS}},"&-show-count-suffix":{color:r},"&-show-count-has-suffix":{marginInlineEnd:e.paddingXXS},"&-prefix":{marginInlineEnd:n},"&-suffix":{marginInlineStart:n}}}),bOe(e)),{[`${s}${t}-password-icon`]:{color:o,cursor:"pointer",transition:`all ${i}`,"&:hover":{color:a}}})}},ROe=e=>{const{componentCls:t,borderRadiusLG:n,borderRadiusSM:r}=e;return{[`${t}-group`]:Object.assign(Object.assign(Object.assign({},Oa(e)),yOe(e)),{"&-rtl":{direction:"rtl"},"&-wrapper":Object.assign(Object.assign(Object.assign({display:"inline-block",width:"100%",textAlign:"start",verticalAlign:"top","&-rtl":{direction:"rtl"},"&-lg":{[`${t}-group-addon`]:{borderRadius:n,fontSize:e.inputFontSizeLG}},"&-sm":{[`${t}-group-addon`]:{borderRadius:r}}},gOe(e)),_Oe(e)),{[`&:not(${t}-compact-first-item):not(${t}-compact-last-item)${t}-compact-item`]:{[`${t}, ${t}-group-addon`]:{borderRadius:0}},[`&:not(${t}-compact-last-item)${t}-compact-first-item`]:{[`${t}, ${t}-group-addon`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&:not(${t}-compact-first-item)${t}-compact-last-item`]:{[`${t}, ${t}-group-addon`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`&:not(${t}-compact-last-item)${t}-compact-item`]:{[`${t}-affix-wrapper`]:{borderStartEndRadius:0,borderEndEndRadius:0}}})})}},wOe=e=>{const{componentCls:t,antCls:n}=e,r=`${t}-search`;return{[r]:{[`${t}`]:{"&:hover, &:focus":{borderColor:e.colorPrimaryHover,[`+ ${t}-group-addon ${r}-button:not(${n}-btn-primary)`]:{borderInlineStartColor:e.colorPrimaryHover}}},[`${t}-affix-wrapper`]:{borderRadius:0},[`${t}-lg`]:{lineHeight:e.calc(e.lineHeightLG).sub(2e-4).equal({unit:!1})},[`> ${t}-group`]:{[`> ${t}-group-addon:last-child`]:{insetInlineStart:-1,padding:0,border:0,[`${r}-button`]:{marginInlineEnd:-1,paddingTop:0,paddingBottom:0,borderStartStartRadius:0,borderStartEndRadius:e.borderRadius,borderEndEndRadius:e.borderRadius,borderEndStartRadius:0,boxShadow:"none"},[`${r}-button:not(${n}-btn-primary)`]:{color:e.colorTextDescription,"&:hover":{color:e.colorPrimaryHover},"&:active":{color:e.colorPrimaryActive},[`&${n}-btn-loading::before`]:{insetInlineStart:0,insetInlineEnd:0,insetBlockStart:0,insetBlockEnd:0}}}},[`${r}-button`]:{height:e.controlHeight,"&:hover, &:focus":{zIndex:1}},[`&-large ${r}-button`]:{height:e.controlHeightLG},[`&-small ${r}-button`]:{height:e.controlHeightSM},"&-rtl":{direction:"rtl"},[`&${t}-compact-item`]:{[`&:not(${t}-compact-last-item)`]:{[`${t}-group-addon`]:{[`${t}-search-button`]:{marginInlineEnd:e.calc(e.lineWidth).mul(-1).equal(),borderRadius:0}}},[`&:not(${t}-compact-first-item)`]:{[`${t},${t}-affix-wrapper`]:{borderRadius:0}},[`> ${t}-group-addon ${t}-search-button,
        > ${t},
        ${t}-affix-wrapper`]:{"&:hover, &:focus, &:active":{zIndex:2}},[`> ${t}-affix-wrapper-focused`]:{zIndex:2}}}}},IOe=e=>{const{componentCls:t,paddingLG:n}=e,r=`${t}-textarea`;return{[r]:{position:"relative","&-show-count":{[`> ${t}`]:{height:"100%"},[`${t}-data-count`]:{position:"absolute",bottom:e.calc(e.fontSize).mul(e.lineHeight).mul(-1).equal(),insetInlineEnd:0,color:e.colorTextDescription,whiteSpace:"nowrap",pointerEvents:"none"}},[`
        &-allow-clear > ${t},
        &-affix-wrapper${r}-has-feedback ${t}
      `]:{paddingInlineEnd:n},[`&-affix-wrapper${t}-affix-wrapper`]:{padding:0,[`> textarea${t}`]:{fontSize:"inherit",border:"none",outline:"none",background:"transparent","&:focus":{boxShadow:"none !important"}},[`${t}-suffix`]:{margin:0,"> *:not(:last-child)":{marginInline:0},[`${t}-clear-icon`]:{position:"absolute",insetInlineEnd:e.paddingXS,insetBlockStart:e.paddingXS},[`${r}-suffix`]:{position:"absolute",top:0,insetInlineEnd:e.paddingInline,bottom:0,zIndex:1,display:"inline-flex",alignItems:"center",margin:"auto",pointerEvents:"none"}}}}}},AOe=e=>{const{componentCls:t}=e;return{[`${t}-out-of-range`]:{[`&, & input, & textarea, ${t}-show-count-suffix, ${t}-data-count`]:{color:e.colorError}}}},wD=yo("Input",e=>{const t=gr(e,yD(e));return[COe(t),IOe(t),TOe(t),ROe(t),wOe(t),AOe(t),QP(t)]},CD,{resetFont:!1});function OOe(e,t,n){var r=n||{},i=r.noTrailing,o=i===void 0?!1:i,a=r.noLeading,s=a===void 0?!1:a,c=r.debounceMode,l=c===void 0?void 0:c,u,d=!1,h=0;function f(){u&&clearTimeout(u)}function g(m){var _=m||{},E=_.upcomingOnly,S=E===void 0?!1:E;f(),d=!S}function p(){for(var m=arguments.length,_=new Array(m),E=0;E<m;E++)_[E]=arguments[E];var S=this,C=Date.now()-h;if(d)return;function b(){h=Date.now(),t.apply(S,_)}function T(){u=void 0}!s&&l&&!u&&b(),f(),l===void 0&&C>e?s?(h=Date.now(),o||(u=setTimeout(l?T:b,e))):b():o!==!0&&(u=setTimeout(l?T:b,l===void 0?e-C:e))}return p.cancel=g,p}function xOe(e,t,n){var r=n||{},i=r.atBegin,o=i===void 0?!1:i;return OOe(e,t,{debounceMode:o!==!1})}const NOe=v.createContext({}),AX=NOe,POe=e=>{const{componentCls:t}=e;return{[t]:{display:"flex",flexFlow:"row wrap",minWidth:0,"&::before, &::after":{display:"flex"},"&-no-wrap":{flexWrap:"nowrap"},"&-start":{justifyContent:"flex-start"},"&-center":{justifyContent:"center"},"&-end":{justifyContent:"flex-end"},"&-space-between":{justifyContent:"space-between"},"&-space-around":{justifyContent:"space-around"},"&-space-evenly":{justifyContent:"space-evenly"},"&-top":{alignItems:"flex-start"},"&-middle":{alignItems:"center"},"&-bottom":{alignItems:"flex-end"}}}},DOe=e=>{const{componentCls:t}=e;return{[t]:{position:"relative",maxWidth:"100%",minHeight:1}}},LOe=(e,t)=>{const{prefixCls:n,componentCls:r,gridColumns:i}=e,o={};for(let a=i;a>=0;a--)a===0?(o[`${r}${t}-${a}`]={display:"none"},o[`${r}-push-${a}`]={insetInlineStart:"auto"},o[`${r}-pull-${a}`]={insetInlineEnd:"auto"},o[`${r}${t}-push-${a}`]={insetInlineStart:"auto"},o[`${r}${t}-pull-${a}`]={insetInlineEnd:"auto"},o[`${r}${t}-offset-${a}`]={marginInlineStart:0},o[`${r}${t}-order-${a}`]={order:0}):(o[`${r}${t}-${a}`]=[{"--ant-display":"block",display:"block"},{display:"var(--ant-display)",flex:`0 0 ${a/i*100}%`,maxWidth:`${a/i*100}%`}],o[`${r}${t}-push-${a}`]={insetInlineStart:`${a/i*100}%`},o[`${r}${t}-pull-${a}`]={insetInlineEnd:`${a/i*100}%`},o[`${r}${t}-offset-${a}`]={marginInlineStart:`${a/i*100}%`},o[`${r}${t}-order-${a}`]={order:a});return o[`${r}${t}-flex`]={flex:`var(--${n}${t}-flex)`},o},ox=(e,t)=>LOe(e,t),kOe=(e,t,n)=>({[`@media (min-width: ${ve(t)})`]:Object.assign({},ox(e,n))}),MOe=()=>({}),FOe=()=>({}),UOe=yo("Grid",POe,MOe),BOe=yo("Grid",e=>{const t=gr(e,{gridColumns:24}),n={"-sm":t.screenSMMin,"-md":t.screenMDMin,"-lg":t.screenLGMin,"-xl":t.screenXLMin,"-xxl":t.screenXXLMin};return[DOe(t),ox(t,""),ox(t,"-xs"),Object.keys(n).map(r=>kOe(t,n[r],r)).reduce((r,i)=>Object.assign(Object.assign({},r),i),{})]},FOe);var $Oe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function nV(e){return typeof e=="number"?`${e} ${e} auto`:/^\d+(\.\d+)?(px|em|rem|%)$/.test(e)?`0 0 ${e}`:e}const VOe=["xs","sm","md","lg","xl","xxl"],jOe=v.forwardRef((e,t)=>{const{getPrefixCls:n,direction:r}=v.useContext(en),{gutter:i,wrap:o}=v.useContext(AX),{prefixCls:a,span:s,order:c,offset:l,push:u,pull:d,className:h,children:f,flex:g,style:p}=e,m=$Oe(e,["prefixCls","span","order","offset","push","pull","className","children","flex","style"]),_=n("col",a),[E,S,C]=BOe(_),b={};let T={};VOe.forEach(O=>{let x={};const M=e[O];typeof M=="number"?x.span=M:typeof M=="object"&&(x=M||{}),delete m[O],T=Object.assign(Object.assign({},T),{[`${_}-${O}-${x.span}`]:x.span!==void 0,[`${_}-${O}-order-${x.order}`]:x.order||x.order===0,[`${_}-${O}-offset-${x.offset}`]:x.offset||x.offset===0,[`${_}-${O}-push-${x.push}`]:x.push||x.push===0,[`${_}-${O}-pull-${x.pull}`]:x.pull||x.pull===0,[`${_}-rtl`]:r==="rtl"}),x.flex&&(T[`${_}-${O}-flex`]=!0,b[`--${_}-${O}-flex`]=nV(x.flex))});const R=de(_,{[`${_}-${s}`]:s!==void 0,[`${_}-order-${c}`]:c,[`${_}-offset-${l}`]:l,[`${_}-push-${u}`]:u,[`${_}-pull-${d}`]:d},h,T,S,C),A={};if(i&&i[0]>0){const O=i[0]/2;A.paddingLeft=O,A.paddingRight=O}return g&&(A.flex=nV(g),o===!1&&!A.minWidth&&(A.minWidth=0)),E(v.createElement("div",Object.assign({},m,{style:Object.assign(Object.assign(Object.assign({},A),p),b),className:R,ref:t}),f))}),ID=jOe;var HOe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function rV(e,t){const[n,r]=v.useState(typeof e=="string"?e:""),i=()=>{if(typeof e=="string"&&r(e),typeof e=="object")for(let o=0;o<Vd.length;o++){const a=Vd[o];if(!t[a])continue;const s=e[a];if(s!==void 0){r(s);return}}};return v.useEffect(()=>{i()},[JSON.stringify(e),t]),n}const zOe=v.forwardRef((e,t)=>{const{prefixCls:n,justify:r,align:i,className:o,style:a,children:s,gutter:c=0,wrap:l}=e,u=HOe(e,["prefixCls","justify","align","className","style","children","gutter","wrap"]),{getPrefixCls:d,direction:h}=v.useContext(en),[f,g]=v.useState({xs:!0,sm:!0,md:!0,lg:!0,xl:!0,xxl:!0}),[p,m]=v.useState({xs:!1,sm:!1,md:!1,lg:!1,xl:!1,xxl:!1}),_=rV(i,p),E=rV(r,p),S=v.useRef(c),C=nX();v.useEffect(()=>{const L=C.subscribe(D=>{m(D);const j=S.current||0;(!Array.isArray(j)&&typeof j=="object"||Array.isArray(j)&&(typeof j[0]=="object"||typeof j[1]=="object"))&&g(D)});return()=>C.unsubscribe(L)},[]);const b=()=>{const L=[void 0,void 0];return(Array.isArray(c)?c:[c,void 0]).forEach((j,F)=>{if(typeof j=="object")for(let y=0;y<Vd.length;y++){const I=Vd[y];if(f[I]&&j[I]!==void 0){L[F]=j[I];break}}else L[F]=j}),L},T=d("row",n),[R,A,O]=UOe(T),x=b(),M=de(T,{[`${T}-no-wrap`]:l===!1,[`${T}-${E}`]:E,[`${T}-${_}`]:_,[`${T}-rtl`]:h==="rtl"},o,A,O),$={},U=x[0]!=null&&x[0]>0?x[0]/-2:void 0;U&&($.marginLeft=U,$.marginRight=U);const[V,W]=x;$.rowGap=W;const z=v.useMemo(()=>({gutter:[V,W],wrap:l}),[V,W,l]);return R(v.createElement(AX.Provider,{value:z},v.createElement("div",Object.assign({},u,{className:M,style:Object.assign(Object.assign({},$),a),ref:t}),s)))}),OX=zOe;function WOe(e){return!!(e.addonBefore||e.addonAfter)}function GOe(e){return!!(e.prefix||e.suffix||e.allowClear)}function iV(e,t,n){var r=t.cloneNode(!0),i=Object.create(e,{target:{value:r},currentTarget:{value:r}});return r.value=n,typeof t.selectionStart=="number"&&typeof t.selectionEnd=="number"&&(r.selectionStart=t.selectionStart,r.selectionEnd=t.selectionEnd),r.setSelectionRange=function(){t.setSelectionRange.apply(t,arguments)},i}function iy(e,t,n,r){if(n){var i=t;if(t.type==="click"){i=iV(t,e,""),n(i);return}if(e.type!=="file"&&r!==void 0){i=iV(t,e,r),n(i);return}n(i)}}function KOe(e,t){if(e){e.focus(t);var n=t||{},r=n.cursor;if(r){var i=e.value.length;switch(r){case"start":e.setSelectionRange(0,0);break;case"end":e.setSelectionRange(i,i);break;default:e.setSelectionRange(0,i)}}}}var xX=le.forwardRef(function(e,t){var n,r,i=e.inputElement,o=e.children,a=e.prefixCls,s=e.prefix,c=e.suffix,l=e.addonBefore,u=e.addonAfter,d=e.className,h=e.style,f=e.disabled,g=e.readOnly,p=e.focused,m=e.triggerFocus,_=e.allowClear,E=e.value,S=e.handleReset,C=e.hidden,b=e.classes,T=e.classNames,R=e.dataAttrs,A=e.styles,O=e.components,x=o??i,M=(O==null?void 0:O.affixWrapper)||"span",$=(O==null?void 0:O.groupWrapper)||"span",U=(O==null?void 0:O.wrapper)||"span",V=(O==null?void 0:O.groupAddon)||"span",W=v.useRef(null),z=function(te){var ge;(ge=W.current)!==null&&ge!==void 0&&ge.contains(te.target)&&(m==null||m())},L=GOe(e),D=v.cloneElement(x,{value:E,className:de(x.props.className,!L&&(T==null?void 0:T.variant))||null}),j=v.useRef(null);if(le.useImperativeHandle(t,function(){return{nativeElement:j.current||W.current}}),L){var F,y=null;if(_){var I,N=!f&&!g&&E,B="".concat(a,"-clear-icon"),K=yt(_)==="object"&&_!==null&&_!==void 0&&_.clearIcon?_.clearIcon:"✖";y=le.createElement("span",{onClick:S,onMouseDown:function(te){return te.preventDefault()},className:de(B,(I={},J(I,"".concat(B,"-hidden"),!N),J(I,"".concat(B,"-has-suffix"),!!c),I)),role:"button",tabIndex:-1},K)}var X="".concat(a,"-affix-wrapper"),ee=de(X,(F={},J(F,"".concat(a,"-disabled"),f),J(F,"".concat(X,"-disabled"),f),J(F,"".concat(X,"-focused"),p),J(F,"".concat(X,"-readonly"),g),J(F,"".concat(X,"-input-with-clear-btn"),c&&_&&E),F),b==null?void 0:b.affixWrapper,T==null?void 0:T.affixWrapper,T==null?void 0:T.variant),ne=(c||_)&&le.createElement("span",{className:de("".concat(a,"-suffix"),T==null?void 0:T.suffix),style:A==null?void 0:A.suffix},y,c);D=le.createElement(M,Ee({className:ee,style:A==null?void 0:A.affixWrapper,onClick:z},R==null?void 0:R.affixWrapper,{ref:W}),s&&le.createElement("span",{className:de("".concat(a,"-prefix"),T==null?void 0:T.prefix),style:A==null?void 0:A.prefix},s),D,ne)}if(WOe(e)){var fe="".concat(a,"-group"),ae="".concat(fe,"-addon"),oe="".concat(fe,"-wrapper"),he=de("".concat(a,"-wrapper"),fe,b==null?void 0:b.wrapper,T==null?void 0:T.wrapper),me=de(oe,J({},"".concat(oe,"-disabled"),f),b==null?void 0:b.group,T==null?void 0:T.groupWrapper);D=le.createElement($,{className:me,ref:j},le.createElement(U,{className:he},l&&le.createElement(V,{className:ae},l),D,u&&le.createElement(V,{className:ae},u)))}return le.cloneElement(D,{className:de((n=D.props)===null||n===void 0?void 0:n.className,d)||null,style:Y(Y({},(r=D.props)===null||r===void 0?void 0:r.style),h),hidden:C})}),qOe=["show"];function NX(e,t){return v.useMemo(function(){var n={};t&&(n.show=yt(t)==="object"&&t.formatter?t.formatter:!!t),n=Y(Y({},n),e);var r=n,i=r.show,o=kt(r,qOe);return Y(Y({},o),{},{show:!!i,showFormatter:typeof i=="function"?i:void 0,strategy:o.strategy||function(a){return a.length}})},[e,t])}var YOe=["autoComplete","onChange","onFocus","onBlur","onPressEnter","onKeyDown","prefixCls","disabled","htmlSize","className","maxLength","suffix","showCount","count","type","classes","classNames","styles","onCompositionStart","onCompositionEnd"],XOe=v.forwardRef(function(e,t){var n=e.autoComplete,r=e.onChange,i=e.onFocus,o=e.onBlur,a=e.onPressEnter,s=e.onKeyDown,c=e.prefixCls,l=c===void 0?"rc-input":c,u=e.disabled,d=e.htmlSize,h=e.className,f=e.maxLength,g=e.suffix,p=e.showCount,m=e.count,_=e.type,E=_===void 0?"text":_,S=e.classes,C=e.classNames,b=e.styles,T=e.onCompositionStart,R=e.onCompositionEnd,A=kt(e,YOe),O=v.useState(!1),x=ce(O,2),M=x[0],$=x[1],U=v.useRef(!1),V=v.useRef(null),W=v.useRef(null),z=function(re){V.current&&KOe(V.current,re)},L=go(e.defaultValue,{value:e.value}),D=ce(L,2),j=D[0],F=D[1],y=j==null?"":String(j),I=v.useState(null),N=ce(I,2),B=N[0],K=N[1],X=NX(m,p),ee=X.max||f,ne=X.strategy(y),fe=!!ee&&ne>ee;v.useImperativeHandle(t,function(){var ue;return{focus:z,blur:function(){var Re;(Re=V.current)===null||Re===void 0||Re.blur()},setSelectionRange:function(Re,we,xe){var We;(We=V.current)===null||We===void 0||We.setSelectionRange(Re,we,xe)},select:function(){var Re;(Re=V.current)===null||Re===void 0||Re.select()},input:V.current,nativeElement:((ue=W.current)===null||ue===void 0?void 0:ue.nativeElement)||V.current}}),v.useEffect(function(){$(function(ue){return ue&&u?!1:ue})},[u]);var ae=function(re,Re,we){var xe=Re;if(!U.current&&X.exceedFormatter&&X.max&&X.strategy(Re)>X.max){if(xe=X.exceedFormatter(Re,{max:X.max}),Re!==xe){var We,Ve;K([((We=V.current)===null||We===void 0?void 0:We.selectionStart)||0,((Ve=V.current)===null||Ve===void 0?void 0:Ve.selectionEnd)||0])}}else if(we.source==="compositionEnd")return;F(xe),V.current&&iy(V.current,re,r,xe)};v.useEffect(function(){if(B){var ue;(ue=V.current)===null||ue===void 0||ue.setSelectionRange.apply(ue,Me(B))}},[B]);var oe=function(re){ae(re,re.target.value,{source:"change"})},he=function(re){U.current=!1,ae(re,re.currentTarget.value,{source:"compositionEnd"}),R==null||R(re)},me=function(re){a&&re.key==="Enter"&&a(re),s==null||s(re)},ie=function(re){$(!0),i==null||i(re)},te=function(re){$(!1),o==null||o(re)},ge=function(re){F(""),z(),V.current&&iy(V.current,re,r)},pe=fe&&"".concat(l,"-out-of-range"),be=function(){var re=So(e,["prefixCls","onPressEnter","addonBefore","addonAfter","prefix","suffix","allowClear","defaultValue","showCount","count","classes","htmlSize","styles","classNames"]);return le.createElement("input",Ee({autoComplete:n},re,{onChange:oe,onFocus:ie,onBlur:te,onKeyDown:me,className:de(l,J({},"".concat(l,"-disabled"),u),C==null?void 0:C.input),style:b==null?void 0:b.input,ref:V,size:d,type:E,onCompositionStart:function(we){U.current=!0,T==null||T(we)},onCompositionEnd:he}))},Se=function(){var re=Number(ee)>0;if(g||X.show){var Re=X.showFormatter?X.showFormatter({value:y,count:ne,maxLength:ee}):"".concat(ne).concat(re?" / ".concat(ee):"");return le.createElement(le.Fragment,null,X.show&&le.createElement("span",{className:de("".concat(l,"-show-count-suffix"),J({},"".concat(l,"-show-count-has-suffix"),!!g),C==null?void 0:C.count),style:Y({},b==null?void 0:b.count)},Re),g)}return null};return le.createElement(xX,Ee({},A,{prefixCls:l,className:de(h,pe),handleReset:ge,value:y,focused:M,triggerFocus:z,suffix:Se(),disabled:u,classes:S,classNames:C,styles:b}),be())});const JOe=e=>{const{getPrefixCls:t,direction:n}=v.useContext(en),{prefixCls:r,className:i}=e,o=t("input-group",r),a=t("input"),[s,c]=wD(a),l=de(o,{[`${o}-lg`]:e.size==="large",[`${o}-sm`]:e.size==="small",[`${o}-compact`]:e.compact,[`${o}-rtl`]:n==="rtl"},c,i),u=v.useContext(ba),d=v.useMemo(()=>Object.assign(Object.assign({},u),{isFormItemInput:!1}),[u]);return s(v.createElement("span",{className:l,style:e.style,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,onFocus:e.onFocus,onBlur:e.onBlur},v.createElement(ba.Provider,{value:d},e.children)))},QOe=JOe,ZOe=e=>{let t;return typeof e=="object"&&(e!=null&&e.clearIcon)?t=e:e&&(t={clearIcon:le.createElement($C,null)}),t},PX=ZOe;function DX(e,t){const n=v.useRef([]),r=()=>{n.current.push(setTimeout(()=>{var i,o,a,s;!((i=e.current)===null||i===void 0)&&i.input&&((o=e.current)===null||o===void 0?void 0:o.input.getAttribute("type"))==="password"&&(!((a=e.current)===null||a===void 0)&&a.input.hasAttribute("value"))&&((s=e.current)===null||s===void 0||s.input.removeAttribute("value"))}))};return v.useEffect(()=>(t&&r(),()=>n.current.forEach(i=>{i&&clearTimeout(i)})),[]),r}function exe(e){return!!(e.prefix||e.suffix||e.allowClear||e.showCount)}var txe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function nxe(e,t){if(!e)return;e.focus(t);const{cursor:n}=t||{};if(n){const r=e.value.length;switch(n){case"start":e.setSelectionRange(0,0);break;case"end":e.setSelectionRange(r,r);break;default:e.setSelectionRange(0,r)}}}const rxe=v.forwardRef((e,t)=>{var n;const{prefixCls:r,bordered:i=!0,status:o,size:a,disabled:s,onBlur:c,onFocus:l,suffix:u,allowClear:d,addonAfter:h,addonBefore:f,className:g,style:p,styles:m,rootClassName:_,onChange:E,classNames:S,variant:C}=e,b=txe(e,["prefixCls","bordered","status","size","disabled","onBlur","onFocus","suffix","allowClear","addonAfter","addonBefore","className","style","styles","rootClassName","onChange","classNames","variant"]),{getPrefixCls:T,direction:R,input:A}=le.useContext(en),O=T("input",r),x=v.useRef(null),M=Mc(O),[$,U,V]=wD(O,M),{compactSize:W,compactItemClassnames:z}=zC(O,R),L=yl(ie=>{var te;return(te=a??W)!==null&&te!==void 0?te:ie}),D=le.useContext(Op),j=s??D,{status:F,hasFeedback:y,feedbackIcon:I}=v.useContext(ba),N=GC(F,o),B=exe(e)||!!y;v.useRef(B);const K=DX(x,!0),X=ie=>{K(),c==null||c(ie)},ee=ie=>{K(),l==null||l(ie)},ne=ie=>{K(),E==null||E(ie)},fe=(y||u)&&le.createElement(le.Fragment,null,u,y&&I),ae=ie=>ie&&le.createElement(nY,null,le.createElement(q1e,{override:!0,status:!0},ie)),oe=PX(d??(A==null?void 0:A.allowClear)),[he,me]=fD(C,i);return $(le.createElement(XOe,Object.assign({ref:gs(t,x),prefixCls:O,autoComplete:A==null?void 0:A.autoComplete},b,{disabled:j,onBlur:X,onFocus:ee,style:Object.assign(Object.assign({},A==null?void 0:A.style),p),styles:Object.assign(Object.assign({},A==null?void 0:A.styles),m),suffix:fe,allowClear:oe,className:de(g,_,V,M,z,A==null?void 0:A.className),onChange:ne,addonBefore:ae(f),addonAfter:ae(h),classNames:Object.assign(Object.assign(Object.assign({},S),A==null?void 0:A.classNames),{input:de({[`${O}-sm`]:L==="small",[`${O}-lg`]:L==="large",[`${O}-rtl`]:R==="rtl"},S==null?void 0:S.input,(n=A==null?void 0:A.classNames)===null||n===void 0?void 0:n.input,U),variant:de({[`${O}-${he}`]:me},ZS(O,N)),affixWrapper:de({[`${O}-affix-wrapper-sm`]:L==="small",[`${O}-affix-wrapper-lg`]:L==="large",[`${O}-affix-wrapper-rtl`]:R==="rtl"},U),wrapper:de({[`${O}-group-rtl`]:R==="rtl"},U),groupWrapper:de({[`${O}-group-wrapper-sm`]:L==="small",[`${O}-group-wrapper-lg`]:L==="large",[`${O}-group-wrapper-rtl`]:R==="rtl",[`${O}-group-wrapper-${he}`]:me},ZS(`${O}-group-wrapper`,N,y),U)})})))}),ZC=rxe,ixe=e=>{const{componentCls:t,paddingXS:n}=e;return{[`${t}`]:{display:"inline-flex",alignItems:"center",flexWrap:"nowrap",columnGap:n,"&-rtl":{direction:"rtl"},[`${t}-input`]:{textAlign:"center",paddingInline:e.paddingXXS},[`&${t}-sm ${t}-input`]:{paddingInline:e.calc(e.paddingXXS).div(2).equal()},[`&${t}-lg ${t}-input`]:{paddingInline:e.paddingXS}}}},oxe=yo(["Input","OTP"],e=>{const t=gr(e,yD(e));return[ixe(t)]},CD);var axe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const sxe=v.forwardRef((e,t)=>{const{value:n,onChange:r,onActiveChange:i,index:o,mask:a}=e,s=axe(e,["value","onChange","onActiveChange","index","mask"]),c=n&&typeof a=="string"?a:n,l=g=>{r(o,g.target.value)},u=v.useRef(null);v.useImperativeHandle(t,()=>u.current);const d=()=>{sr(()=>{var g;const p=(g=u.current)===null||g===void 0?void 0:g.input;document.activeElement===p&&p&&p.select()})},h=g=>{let{key:p}=g;p==="ArrowLeft"?i(o-1):p==="ArrowRight"&&i(o+1),d()},f=g=>{g.key==="Backspace"&&!n&&i(o-1),d()};return v.createElement(ZC,Object.assign({},s,{ref:u,value:c,onInput:l,onFocus:d,onKeyDown:h,onKeyUp:f,onMouseDown:d,onMouseUp:d,type:a===!0?"password":"text"}))}),cxe=sxe;var lxe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function NE(e){return(e||"").split("")}const uxe=v.forwardRef((e,t)=>{const{prefixCls:n,length:r=6,size:i,defaultValue:o,value:a,onChange:s,formatter:c,variant:l,disabled:u,status:d,autoFocus:h,mask:f}=e,g=lxe(e,["prefixCls","length","size","defaultValue","value","onChange","formatter","variant","disabled","status","autoFocus","mask"]),{getPrefixCls:p,direction:m}=v.useContext(en),_=p("otp",n),E=Bd(g,{aria:!0,data:!0,attr:!0}),S=Mc(_),[C,b,T]=oxe(_,S),R=yl(y=>i??y),A=v.useContext(ba),O=GC(A.status,d),x=v.useMemo(()=>Object.assign(Object.assign({},A),{status:O,hasFeedback:!1,feedbackIcon:null}),[A,O]),M=v.useRef(null),$=v.useRef({});v.useImperativeHandle(t,()=>({focus:()=>{var y;(y=$.current[0])===null||y===void 0||y.focus()},blur:()=>{var y;for(let I=0;I<r;I+=1)(y=$.current[I])===null||y===void 0||y.blur()},nativeElement:M.current}));const U=y=>c?c(y):y,[V,W]=v.useState(NE(U(o||"")));v.useEffect(()=>{a!==void 0&&W(NE(a))},[a]);const z=Pi(y=>{W(y),s&&y.length===r&&y.every(I=>I)&&y.some((I,N)=>V[N]!==I)&&s(y.join(""))}),L=Pi((y,I)=>{let N=Me(V);for(let K=0;K<y;K+=1)N[K]||(N[K]="");I.length<=1?N[y]=I:N=N.slice(0,y).concat(NE(I)),N=N.slice(0,r);for(let K=N.length-1;K>=0&&!N[K];K-=1)N.pop();const B=U(N.map(K=>K||" ").join(""));return N=NE(B).map((K,X)=>K===" "&&!N[X]?N[X]:K),N}),D=(y,I)=>{var N;const B=L(y,I),K=Math.min(y+I.length,r-1);K!==y&&((N=$.current[K])===null||N===void 0||N.focus()),z(B)},j=y=>{var I;(I=$.current[y])===null||I===void 0||I.focus()},F={variant:l,disabled:u,status:O,mask:f};return C(v.createElement("div",Object.assign({},E,{ref:M,className:de(_,{[`${_}-sm`]:R==="small",[`${_}-lg`]:R==="large",[`${_}-rtl`]:m==="rtl"},T,b)}),v.createElement(ba.Provider,{value:x},Array.from({length:r}).map((y,I)=>{const N=`otp-${I}`,B=V[I]||"";return v.createElement(cxe,Object.assign({ref:K=>{$.current[I]=K},key:N,index:I,size:R,htmlSize:1,className:`${_}-input`,onChange:D,value:B,onActiveChange:j,autoFocus:I===0&&h},F))}))))}),dxe=uxe;var hxe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2Q889.47 375.11 816.7 305l-50.88 50.88C807.31 395.53 843.45 447.4 874.7 512 791.5 684.2 673.4 766 512 766q-72.67 0-133.87-22.38L323 798.75Q408 838 512 838q288.3 0 430.2-300.3a60.29 60.29 0 000-51.5zm-63.57-320.64L836 122.88a8 8 0 00-11.32 0L715.31 232.2Q624.86 186 512 186q-288.3 0-430.2 300.3a60.3 60.3 0 000 51.5q56.69 119.4 136.5 191.41L112.48 835a8 8 0 000 11.31L155.17 889a8 8 0 0011.31 0l712.15-712.12a8 8 0 000-11.32zM149.3 512C232.6 339.8 350.7 258 512 258c54.54 0 104.13 9.36 149.12 28.39l-70.3 70.3a176 176 0 00-238.13 238.13l-83.42 83.42C223.1 637.49 183.3 582.28 149.3 512zm246.7 0a112.11 112.11 0 01146.2-106.69L401.31 546.2A112 112 0 01396 512z"}},{tag:"path",attrs:{d:"M508 624c-3.46 0-6.87-.16-10.25-.47l-52.82 52.82a176.09 176.09 0 00227.42-227.42l-52.82 52.82c.31 3.38.47 6.79.47 10.25a111.94 111.94 0 01-112 112z"}}]},name:"eye-invisible",theme:"outlined"};const fxe=hxe;var pxe=function(t,n){return v.createElement(si,Ee({},t,{ref:n,icon:fxe}))},mxe=v.forwardRef(pxe);const gxe=mxe;var vxe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"}}]},name:"eye",theme:"outlined"};const Exe=vxe;var _xe=function(t,n){return v.createElement(si,Ee({},t,{ref:n,icon:Exe}))},Sxe=v.forwardRef(_xe);const yxe=Sxe;var Cxe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const bxe=e=>e?v.createElement(yxe,null):v.createElement(gxe,null),Txe={click:"onClick",hover:"onMouseOver"},Rxe=v.forwardRef((e,t)=>{const{disabled:n,action:r="click",visibilityToggle:i=!0,iconRender:o=bxe}=e,a=typeof i=="object"&&i.visible!==void 0,[s,c]=v.useState(()=>a?i.visible:!1),l=v.useRef(null);v.useEffect(()=>{a&&c(i.visible)},[a,i]);const u=DX(l),d=()=>{n||(s&&u(),c(A=>{var O;const x=!A;return typeof i=="object"&&((O=i.onVisibleChange)===null||O===void 0||O.call(i,x)),x}))},h=A=>{const O=Txe[r]||"",x=o(s),M={[O]:d,className:`${A}-icon`,key:"passwordIcon",onMouseDown:$=>{$.preventDefault()},onMouseUp:$=>{$.preventDefault()}};return v.cloneElement(v.isValidElement(x)?x:v.createElement("span",null,x),M)},{className:f,prefixCls:g,inputPrefixCls:p,size:m}=e,_=Cxe(e,["className","prefixCls","inputPrefixCls","size"]),{getPrefixCls:E}=v.useContext(en),S=E("input",p),C=E("input-password",g),b=i&&h(C),T=de(C,f,{[`${C}-${m}`]:!!m}),R=Object.assign(Object.assign({},So(_,["suffix","iconRender","visibilityToggle"])),{type:s?"text":"password",className:T,prefixCls:S,suffix:b});return m&&(R.size=m),v.createElement(ZC,Object.assign({ref:gs(t,l)},R))}),wxe=Rxe;var Ixe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const Axe=v.forwardRef((e,t)=>{const{prefixCls:n,inputPrefixCls:r,className:i,size:o,suffix:a,enterButton:s=!1,addonAfter:c,loading:l,disabled:u,onSearch:d,onChange:h,onCompositionStart:f,onCompositionEnd:g}=e,p=Ixe(e,["prefixCls","inputPrefixCls","className","size","suffix","enterButton","addonAfter","loading","disabled","onSearch","onChange","onCompositionStart","onCompositionEnd"]),{getPrefixCls:m,direction:_}=v.useContext(en),E=v.useRef(!1),S=m("input-search",n),C=m("input",r),{compactSize:b}=zC(S,_),T=yl(F=>{var y;return(y=o??b)!==null&&y!==void 0?y:F}),R=v.useRef(null),A=F=>{F&&F.target&&F.type==="click"&&d&&d(F.target.value,F,{source:"clear"}),h&&h(F)},O=F=>{var y;document.activeElement===((y=R.current)===null||y===void 0?void 0:y.input)&&F.preventDefault()},x=F=>{var y,I;d&&d((I=(y=R.current)===null||y===void 0?void 0:y.input)===null||I===void 0?void 0:I.value,F,{source:"input"})},M=F=>{E.current||l||x(F)},$=typeof s=="boolean"?v.createElement(eX,null):null,U=`${S}-button`;let V;const W=s||{},z=W.type&&W.type.__ANT_BUTTON===!0;z||W.type==="button"?V=ls(W,Object.assign({onMouseDown:O,onClick:F=>{var y,I;(I=(y=W==null?void 0:W.props)===null||y===void 0?void 0:y.onClick)===null||I===void 0||I.call(y,F),x(F)},key:"enterButton"},z?{className:U,size:T}:{})):V=v.createElement(fi,{className:U,type:s?"primary":void 0,size:T,disabled:u,key:"enterButton",onMouseDown:O,onClick:x,loading:l,icon:$},s),c&&(V=[V,ls(c,{key:"addonAfter"})]);const L=de(S,{[`${S}-rtl`]:_==="rtl",[`${S}-${T}`]:!!T,[`${S}-with-button`]:!!s},i),D=F=>{E.current=!0,f==null||f(F)},j=F=>{E.current=!1,g==null||g(F)};return v.createElement(ZC,Object.assign({ref:gs(R,t),onPressEnter:M},p,{size:T,onCompositionStart:D,onCompositionEnd:j,prefixCls:C,addonAfter:V,suffix:a,onChange:A,className:L,disabled:u}))}),Oxe=Axe;var xxe=`
  min-height:0 !important;
  max-height:none !important;
  height:0 !important;
  visibility:hidden !important;
  overflow:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
  pointer-events: none !important;
`,Nxe=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","font-variant","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break","white-space"],XR={},za;function Pxe(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=e.getAttribute("id")||e.getAttribute("data-reactid")||e.getAttribute("name");if(t&&XR[n])return XR[n];var r=window.getComputedStyle(e),i=r.getPropertyValue("box-sizing")||r.getPropertyValue("-moz-box-sizing")||r.getPropertyValue("-webkit-box-sizing"),o=parseFloat(r.getPropertyValue("padding-bottom"))+parseFloat(r.getPropertyValue("padding-top")),a=parseFloat(r.getPropertyValue("border-bottom-width"))+parseFloat(r.getPropertyValue("border-top-width")),s=Nxe.map(function(l){return"".concat(l,":").concat(r.getPropertyValue(l))}).join(";"),c={sizingStyle:s,paddingSize:o,borderSize:a,boxSizing:i};return t&&n&&(XR[n]=c),c}function Dxe(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;za||(za=document.createElement("textarea"),za.setAttribute("tab-index","-1"),za.setAttribute("aria-hidden","true"),document.body.appendChild(za)),e.getAttribute("wrap")?za.setAttribute("wrap",e.getAttribute("wrap")):za.removeAttribute("wrap");var i=Pxe(e,t),o=i.paddingSize,a=i.borderSize,s=i.boxSizing,c=i.sizingStyle;za.setAttribute("style","".concat(c,";").concat(xxe)),za.value=e.value||e.placeholder||"";var l=void 0,u=void 0,d,h=za.scrollHeight;if(s==="border-box"?h+=a:s==="content-box"&&(h-=o),n!==null||r!==null){za.value=" ";var f=za.scrollHeight-o;n!==null&&(l=f*n,s==="border-box"&&(l=l+o+a),h=Math.max(l,h)),r!==null&&(u=f*r,s==="border-box"&&(u=u+o+a),d=h>u?"":"hidden",h=Math.min(u,h))}var g={height:h,overflowY:d,resize:"none"};return l&&(g.minHeight=l),u&&(g.maxHeight=u),g}var Lxe=["prefixCls","onPressEnter","defaultValue","value","autoSize","onResize","className","style","disabled","onChange","onInternalAutoSize"],JR=0,QR=1,ZR=2,kxe=v.forwardRef(function(e,t){var n=e,r=n.prefixCls;n.onPressEnter;var i=n.defaultValue,o=n.value,a=n.autoSize,s=n.onResize,c=n.className,l=n.style,u=n.disabled,d=n.onChange;n.onInternalAutoSize;var h=kt(n,Lxe),f=go(i,{value:o,postState:function(B){return B??""}}),g=ce(f,2),p=g[0],m=g[1],_=function(B){m(B.target.value),d==null||d(B)},E=v.useRef();v.useImperativeHandle(t,function(){return{textArea:E.current}});var S=v.useMemo(function(){return a&&yt(a)==="object"?[a.minRows,a.maxRows]:[]},[a]),C=ce(S,2),b=C[0],T=C[1],R=!!a,A=function(){try{if(document.activeElement===E.current){var B=E.current,K=B.selectionStart,X=B.selectionEnd,ee=B.scrollTop;E.current.setSelectionRange(K,X),E.current.scrollTop=ee}}catch{}},O=v.useState(ZR),x=ce(O,2),M=x[0],$=x[1],U=v.useState(),V=ce(U,2),W=V[0],z=V[1],L=function(){$(JR)};Mn(function(){R&&L()},[o,b,T,R]),Mn(function(){if(M===JR)$(QR);else if(M===QR){var N=Dxe(E.current,!1,b,T);$(ZR),z(N)}else A()},[M]);var D=v.useRef(),j=function(){sr.cancel(D.current)},F=function(B){M===ZR&&(s==null||s(B),a&&(j(),D.current=sr(function(){L()})))};v.useEffect(function(){return j},[]);var y=R?W:null,I=Y(Y({},l),y);return(M===JR||M===QR)&&(I.overflowY="hidden",I.overflowX="hidden"),v.createElement(Sl,{onResize:F,disabled:!(a||s)},v.createElement("textarea",Ee({},h,{ref:E,style:I,className:de(r,c,J({},"".concat(r,"-disabled"),u)),disabled:u,value:p,onChange:_})))}),Mxe=["defaultValue","value","onFocus","onBlur","onChange","allowClear","maxLength","onCompositionStart","onCompositionEnd","suffix","prefixCls","showCount","count","className","style","disabled","hidden","classNames","styles","onResize","readOnly"],Fxe=le.forwardRef(function(e,t){var n,r=e.defaultValue,i=e.value,o=e.onFocus,a=e.onBlur,s=e.onChange,c=e.allowClear,l=e.maxLength,u=e.onCompositionStart,d=e.onCompositionEnd,h=e.suffix,f=e.prefixCls,g=f===void 0?"rc-textarea":f,p=e.showCount,m=e.count,_=e.className,E=e.style,S=e.disabled,C=e.hidden,b=e.classNames,T=e.styles,R=e.onResize,A=e.readOnly,O=kt(e,Mxe),x=go(r,{value:i,defaultValue:r}),M=ce(x,2),$=M[0],U=M[1],V=$==null?"":String($),W=le.useState(!1),z=ce(W,2),L=z[0],D=z[1],j=le.useRef(!1),F=le.useState(null),y=ce(F,2),I=y[0],N=y[1],B=v.useRef(null),K=v.useRef(null),X=function(){var Ge;return(Ge=K.current)===null||Ge===void 0?void 0:Ge.textArea},ee=function(){X().focus()};v.useImperativeHandle(t,function(){var Xe;return{resizableTextArea:K.current,focus:ee,blur:function(){X().blur()},nativeElement:((Xe=B.current)===null||Xe===void 0?void 0:Xe.nativeElement)||X()}}),v.useEffect(function(){D(function(Xe){return!S&&Xe})},[S]);var ne=le.useState(null),fe=ce(ne,2),ae=fe[0],oe=fe[1];le.useEffect(function(){if(ae){var Xe;(Xe=X()).setSelectionRange.apply(Xe,Me(ae))}},[ae]);var he=NX(m,p),me=(n=he.max)!==null&&n!==void 0?n:l,ie=Number(me)>0,te=he.strategy(V),ge=!!me&&te>me,pe=function(Ge,Je){var st=Je;!j.current&&he.exceedFormatter&&he.max&&he.strategy(Je)>he.max&&(st=he.exceedFormatter(Je,{max:he.max}),Je!==st&&oe([X().selectionStart||0,X().selectionEnd||0])),U(st),iy(Ge.currentTarget,Ge,s,st)},be=function(Ge){j.current=!0,u==null||u(Ge)},Se=function(Ge){j.current=!1,pe(Ge,Ge.currentTarget.value),d==null||d(Ge)},ue=function(Ge){pe(Ge,Ge.target.value)},re=function(Ge){var Je=O.onPressEnter,st=O.onKeyDown;Ge.key==="Enter"&&Je&&Je(Ge),st==null||st(Ge)},Re=function(Ge){D(!0),o==null||o(Ge)},we=function(Ge){D(!1),a==null||a(Ge)},xe=function(Ge){U(""),ee(),iy(X(),Ge,s)},We=h,Ve;he.show&&(he.showFormatter?Ve=he.showFormatter({value:V,count:te,maxLength:me}):Ve="".concat(te).concat(ie?" / ".concat(me):""),We=le.createElement(le.Fragment,null,We,le.createElement("span",{className:de("".concat(g,"-data-count"),b==null?void 0:b.count),style:T==null?void 0:T.count},Ve)));var Rt=function(Ge){var Je;R==null||R(Ge),(Je=X())!==null&&Je!==void 0&&Je.style.height&&N(!0)},xt=!O.autoSize&&!p&&!c;return le.createElement(xX,{ref:B,value:V,allowClear:c,handleReset:xe,suffix:We,prefixCls:g,classNames:Y(Y({},b),{},{affixWrapper:de(b==null?void 0:b.affixWrapper,J(J({},"".concat(g,"-show-count"),p),"".concat(g,"-textarea-allow-clear"),c))}),disabled:S,focused:L,className:de(_,ge&&"".concat(g,"-out-of-range")),style:Y(Y({},E),I&&!xt?{height:"auto"}:{}),dataAttrs:{affixWrapper:{"data-count":typeof Ve=="string"?Ve:void 0}},hidden:C,readOnly:A},le.createElement(kxe,Ee({},O,{maxLength:l,onKeyDown:re,onChange:ue,onFocus:Re,onBlur:we,onCompositionStart:be,onCompositionEnd:Se,className:de(b==null?void 0:b.textarea),style:Y(Y({},T==null?void 0:T.textarea),{},{resize:E==null?void 0:E.resize}),disabled:S,prefixCls:g,onResize:Rt,ref:K,readOnly:A})))}),Uxe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const Bxe=v.forwardRef((e,t)=>{var n,r;const{prefixCls:i,bordered:o=!0,size:a,disabled:s,status:c,allowClear:l,classNames:u,rootClassName:d,className:h,style:f,styles:g,variant:p}=e,m=Uxe(e,["prefixCls","bordered","size","disabled","status","allowClear","classNames","rootClassName","className","style","styles","variant"]),{getPrefixCls:_,direction:E,textArea:S}=v.useContext(en),C=yl(a),b=v.useContext(Op),T=s??b,{status:R,hasFeedback:A,feedbackIcon:O}=v.useContext(ba),x=GC(R,c),M=v.useRef(null);v.useImperativeHandle(t,()=>{var F;return{resizableTextArea:(F=M.current)===null||F===void 0?void 0:F.resizableTextArea,focus:y=>{var I,N;nxe((N=(I=M.current)===null||I===void 0?void 0:I.resizableTextArea)===null||N===void 0?void 0:N.textArea,y)},blur:()=>{var y;return(y=M.current)===null||y===void 0?void 0:y.blur()}}});const $=_("input",i),U=Mc($),[V,W,z]=wD($,U),[L,D]=fD(p,o),j=PX(l??(S==null?void 0:S.allowClear));return V(v.createElement(Fxe,Object.assign({autoComplete:S==null?void 0:S.autoComplete},m,{style:Object.assign(Object.assign({},S==null?void 0:S.style),f),styles:Object.assign(Object.assign({},S==null?void 0:S.styles),g),disabled:T,allowClear:j,className:de(z,U,h,d,S==null?void 0:S.className),classNames:Object.assign(Object.assign(Object.assign({},u),S==null?void 0:S.classNames),{textarea:de({[`${$}-sm`]:C==="small",[`${$}-lg`]:C==="large"},W,u==null?void 0:u.textarea,(n=S==null?void 0:S.classNames)===null||n===void 0?void 0:n.textarea),variant:de({[`${$}-${L}`]:D},ZS($,x)),affixWrapper:de(`${$}-textarea-affix-wrapper`,{[`${$}-affix-wrapper-rtl`]:E==="rtl",[`${$}-affix-wrapper-sm`]:C==="small",[`${$}-affix-wrapper-lg`]:C==="large",[`${$}-textarea-show-count`]:e.showCount||((r=e.count)===null||r===void 0?void 0:r.show)},W)}),prefixCls:$,suffix:A&&v.createElement("span",{className:`${$}-textarea-suffix`},O),ref:M})))}),LX=Bxe,Dp=ZC;Dp.Group=QOe;Dp.Search=Oxe;Dp.TextArea=LX;Dp.Password=wxe;Dp.OTP=dxe;const $xe=Dp;function oy(e){const[t,n]=v.useState(e);return v.useEffect(()=>{const r=setTimeout(()=>{n(e)},e.length?0:10);return()=>{clearTimeout(r)}},[e]),t}const Vxe=e=>{const{componentCls:t}=e,n=`${t}-show-help`,r=`${t}-show-help-item`;return{[n]:{transition:`opacity ${e.motionDurationSlow} ${e.motionEaseInOut}`,"&-appear, &-enter":{opacity:0,"&-active":{opacity:1}},"&-leave":{opacity:1,"&-active":{opacity:0}},[r]:{overflow:"hidden",transition:`height ${e.motionDurationSlow} ${e.motionEaseInOut},
                     opacity ${e.motionDurationSlow} ${e.motionEaseInOut},
                     transform ${e.motionDurationSlow} ${e.motionEaseInOut} !important`,[`&${r}-appear, &${r}-enter`]:{transform:"translateY(-5px)",opacity:0,"&-active":{transform:"translateY(0)",opacity:1}},[`&${r}-leave-active`]:{transform:"translateY(-5px)"}}}}},jxe=Vxe,Hxe=e=>({legend:{display:"block",width:"100%",marginBottom:e.marginLG,padding:0,color:e.colorTextDescription,fontSize:e.fontSizeLG,lineHeight:"inherit",border:0,borderBottom:`${ve(e.lineWidth)} ${e.lineType} ${e.colorBorder}`},'input[type="search"]':{boxSizing:"border-box"},'input[type="radio"], input[type="checkbox"]':{lineHeight:"normal"},'input[type="file"]':{display:"block"},'input[type="range"]':{display:"block",width:"100%"},"select[multiple], select[size]":{height:"auto"},"input[type='file']:focus,\n  input[type='radio']:focus,\n  input[type='checkbox']:focus":{outline:0,boxShadow:`0 0 0 ${ve(e.controlOutlineWidth)} ${e.controlOutline}`},output:{display:"block",paddingTop:15,color:e.colorText,fontSize:e.fontSize,lineHeight:e.lineHeight}}),oV=(e,t)=>{const{formItemCls:n}=e;return{[n]:{[`${n}-label > label`]:{height:t},[`${n}-control-input`]:{minHeight:t}}}},zxe=e=>{const{componentCls:t}=e;return{[e.componentCls]:Object.assign(Object.assign(Object.assign({},Oa(e)),Hxe(e)),{[`${t}-text`]:{display:"inline-block",paddingInlineEnd:e.paddingSM},"&-small":Object.assign({},oV(e,e.controlHeightSM)),"&-large":Object.assign({},oV(e,e.controlHeightLG))})}},Wxe=e=>{const{formItemCls:t,iconCls:n,componentCls:r,rootPrefixCls:i,antCls:o,labelRequiredMarkColor:a,labelColor:s,labelFontSize:c,labelHeight:l,labelColonMarginInlineStart:u,labelColonMarginInlineEnd:d,itemMarginBottom:h}=e;return{[t]:Object.assign(Object.assign({},Oa(e)),{marginBottom:h,verticalAlign:"top","&-with-help":{transition:"none"},[`&-hidden,
        &-hidden${o}-row`]:{display:"none"},"&-has-warning":{[`${t}-split`]:{color:e.colorError}},"&-has-error":{[`${t}-split`]:{color:e.colorWarning}},[`${t}-label`]:{flexGrow:0,overflow:"hidden",whiteSpace:"nowrap",textAlign:"end",verticalAlign:"middle","&-left":{textAlign:"start"},"&-wrap":{overflow:"unset",lineHeight:e.lineHeight,whiteSpace:"unset"},"> label":{position:"relative",display:"inline-flex",alignItems:"center",maxWidth:"100%",height:l,color:s,fontSize:c,[`> ${n}`]:{fontSize:e.fontSize,verticalAlign:"top"},[`&${t}-required:not(${t}-required-mark-optional)::before`]:{display:"inline-block",marginInlineEnd:e.marginXXS,color:a,fontSize:e.fontSize,fontFamily:"SimSun, sans-serif",lineHeight:1,content:'"*"',[`${r}-hide-required-mark &`]:{display:"none"}},[`${t}-optional`]:{display:"inline-block",marginInlineStart:e.marginXXS,color:e.colorTextDescription,[`${r}-hide-required-mark &`]:{display:"none"}},[`${t}-tooltip`]:{color:e.colorTextDescription,cursor:"help",writingMode:"horizontal-tb",marginInlineStart:e.marginXXS},"&::after":{content:'":"',position:"relative",marginBlock:0,marginInlineStart:u,marginInlineEnd:d},[`&${t}-no-colon::after`]:{content:'"\\a0"'}}},[`${t}-control`]:{"--ant-display":"flex",flexDirection:"column",flexGrow:1,[`&:first-child:not([class^="'${i}-col-'"]):not([class*="' ${i}-col-'"])`]:{width:"100%"},"&-input":{position:"relative",display:"flex",alignItems:"center",minHeight:e.controlHeight,"&-content":{flex:"auto",maxWidth:"100%"}}},[t]:{"&-explain, &-extra":{clear:"both",color:e.colorTextDescription,fontSize:e.fontSize,lineHeight:e.lineHeight},"&-explain-connected":{width:"100%"},"&-extra":{minHeight:e.controlHeightSM,transition:`color ${e.motionDurationMid} ${e.motionEaseOut}`},"&-explain":{"&-error":{color:e.colorError},"&-warning":{color:e.colorWarning}}},[`&-with-help ${t}-explain`]:{height:"auto",opacity:1},[`${t}-feedback-icon`]:{fontSize:e.fontSize,textAlign:"center",visibility:"visible",animationName:oD,animationDuration:e.motionDurationMid,animationTimingFunction:e.motionEaseOutBack,pointerEvents:"none","&-success":{color:e.colorSuccess},"&-error":{color:e.colorError},"&-warning":{color:e.colorWarning},"&-validating":{color:e.colorPrimary}}})}},aV=(e,t)=>{const{formItemCls:n}=e;return{[`${t}-horizontal`]:{[`${n}-label`]:{flexGrow:0},[`${n}-control`]:{flex:"1 1 0",minWidth:0},[`${n}-label[class$='-24'], ${n}-label[class*='-24 ']`]:{[`& + ${n}-control`]:{minWidth:"unset"}}}}},Gxe=e=>{const{componentCls:t,formItemCls:n,inlineItemMarginBottom:r}=e;return{[`${t}-inline`]:{display:"flex",flexWrap:"wrap",[n]:{flex:"none",marginInlineEnd:e.margin,marginBottom:r,"&-row":{flexWrap:"nowrap"},[`> ${n}-label,
        > ${n}-control`]:{display:"inline-block",verticalAlign:"top"},[`> ${n}-label`]:{flex:"none"},[`${t}-text`]:{display:"inline-block"},[`${n}-has-feedback`]:{display:"inline-block"}}}}},Ls=e=>({padding:e.verticalLabelPadding,margin:e.verticalLabelMargin,whiteSpace:"initial",textAlign:"start","> label":{margin:0,"&::after":{visibility:"hidden"}}}),kX=e=>{const{componentCls:t,formItemCls:n,rootPrefixCls:r}=e;return{[`${n} ${n}-label`]:Ls(e),[`${t}:not(${t}-inline)`]:{[n]:{flexWrap:"wrap",[`${n}-label, ${n}-control`]:{[`&:not([class*=" ${r}-col-xs"])`]:{flex:"0 0 100%",maxWidth:"100%"}}}}}},Kxe=e=>{const{componentCls:t,formItemCls:n,antCls:r}=e;return{[`${t}-vertical`]:{[`${n}:not(${n}-horizontal)`]:{[`${n}-row`]:{flexDirection:"column"},[`${n}-label > label`]:{height:"auto"},[`${n}-control`]:{width:"100%"},[`${n}-label,
        ${r}-col-24${n}-label,
        ${r}-col-xl-24${n}-label`]:Ls(e)}},[`@media (max-width: ${ve(e.screenXSMax)})`]:[kX(e),{[t]:{[`${n}:not(${n}-horizontal)`]:{[`${r}-col-xs-24${n}-label`]:Ls(e)}}}],[`@media (max-width: ${ve(e.screenSMMax)})`]:{[t]:{[`${n}:not(${n}-horizontal)`]:{[`${r}-col-sm-24${n}-label`]:Ls(e)}}},[`@media (max-width: ${ve(e.screenMDMax)})`]:{[t]:{[`${n}:not(${n}-horizontal)`]:{[`${r}-col-md-24${n}-label`]:Ls(e)}}},[`@media (max-width: ${ve(e.screenLGMax)})`]:{[t]:{[`${n}:not(${n}-horizontal)`]:{[`${r}-col-lg-24${n}-label`]:Ls(e)}}}}},qxe=e=>{const{formItemCls:t,antCls:n}=e;return{[`${t}-vertical`]:{[`${t}-row`]:{flexDirection:"column"},[`${t}-label > label`]:{height:"auto"},[`${t}-control`]:{width:"100%"}},[`${t}-vertical ${t}-label,
      ${n}-col-24${t}-label,
      ${n}-col-xl-24${t}-label`]:Ls(e),[`@media (max-width: ${ve(e.screenXSMax)})`]:[kX(e),{[t]:{[`${n}-col-xs-24${t}-label`]:Ls(e)}}],[`@media (max-width: ${ve(e.screenSMMax)})`]:{[t]:{[`${n}-col-sm-24${t}-label`]:Ls(e)}},[`@media (max-width: ${ve(e.screenMDMax)})`]:{[t]:{[`${n}-col-md-24${t}-label`]:Ls(e)}},[`@media (max-width: ${ve(e.screenLGMax)})`]:{[t]:{[`${n}-col-lg-24${t}-label`]:Ls(e)}}}},Yxe=e=>({labelRequiredMarkColor:e.colorError,labelColor:e.colorTextHeading,labelFontSize:e.fontSize,labelHeight:e.controlHeight,labelColonMarginInlineStart:e.marginXXS/2,labelColonMarginInlineEnd:e.marginXS,itemMarginBottom:e.marginLG,verticalLabelPadding:`0 0 ${e.paddingXS}px`,verticalLabelMargin:0,inlineItemMarginBottom:0}),MX=(e,t)=>gr(e,{formItemCls:`${e.componentCls}-item`,rootPrefixCls:t}),AD=yo("Form",(e,t)=>{let{rootPrefixCls:n}=t;const r=MX(e,n);return[zxe(r),Wxe(r),jxe(r),aV(r,r.componentCls),aV(r,r.formItemCls),Gxe(r),Kxe(r),qxe(r),CY(r),oD]},Yxe,{order:-1e3}),sV=[];function ew(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;return{key:typeof e=="string"?e:`${t}-${r}`,error:e,errorStatus:n}}const Xxe=e=>{let{help:t,helpStatus:n,errors:r=sV,warnings:i=sV,className:o,fieldId:a,onVisibleChanged:s}=e;const{prefixCls:c}=v.useContext(rD),l=`${c}-item-explain`,u=Mc(c),[d,h,f]=AD(c,u),g=v.useMemo(()=>FO(c),[c]),p=oy(r),m=oy(i),_=v.useMemo(()=>t!=null?[ew(t,"help",n)]:[].concat(Me(p.map((S,C)=>ew(S,"error","error",C))),Me(m.map((S,C)=>ew(S,"warning","warning",C)))),[t,n,p,m]),E={};return a&&(E.id=`${a}_help`),d(v.createElement(eh,{motionDeadline:g.motionDeadline,motionName:`${c}-show-help`,visible:!!_.length,onVisibleChanged:s},S=>{const{className:C,style:b}=S;return v.createElement("div",Object.assign({},E,{className:de(l,C,f,u,o,h),style:b,role:"alert"}),v.createElement(kq,Object.assign({keys:_},FO(c),{motionName:`${c}-show-help-item`,component:!1}),T=>{const{key:R,error:A,errorStatus:O,className:x,style:M}=T;return v.createElement("div",{key:R,className:de(x,{[`${l}-${O}`]:O}),style:M},A)}))}))},FX=Xxe,Jxe=["parentNode"],Qxe="form_item";function h0(e){return e===void 0||e===!1?[]:Array.isArray(e)?e:[e]}function UX(e,t){if(!e.length)return;const n=e.join("_");return t?`${t}_${n}`:Jxe.includes(n)?`${Qxe}_${n}`:n}function BX(e,t,n,r,i,o){let a=r;return o!==void 0?a=o:n.validating?a="validating":e.length?a="error":t.length?a="warning":(n.touched||i&&n.validated)&&(a="success"),a}function cV(e){return h0(e).join("_")}function Zxe(e,t){const n=t.getFieldInstance(e),r=CK(n);if(r)return r;const i=UX(h0(e),t.__INTERNAL__.name);if(i)return document.getElementById(i)}function $X(e){const[t]=nD(),n=v.useRef({}),r=v.useMemo(()=>e??Object.assign(Object.assign({},t),{__INTERNAL__:{itemRef:i=>o=>{const a=cV(i);o?n.current[a]=o:delete n.current[a]}},scrollToField:function(i){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const a=Zxe(i,r);a&&RCe(a,Object.assign({scrollMode:"if-needed",block:"nearest"},o))},getFieldInstance:i=>{const o=cV(i);return n.current[o]}}),[e,t]);return[r]}var eNe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const tNe=(e,t)=>{const n=v.useContext(Op),{getPrefixCls:r,direction:i,form:o}=v.useContext(en),{prefixCls:a,className:s,rootClassName:c,size:l,disabled:u=n,form:d,colon:h,labelAlign:f,labelWrap:g,labelCol:p,wrapperCol:m,hideRequiredMark:_,layout:E="horizontal",scrollToFirstError:S,requiredMark:C,onFinishFailed:b,name:T,style:R,feedbackIcons:A,variant:O}=e,x=eNe(e,["prefixCls","className","rootClassName","size","disabled","form","colon","labelAlign","labelWrap","labelCol","wrapperCol","hideRequiredMark","layout","scrollToFirstError","requiredMark","onFinishFailed","name","style","feedbackIcons","variant"]),M=yl(l),$=v.useContext(rq),U=v.useMemo(()=>C!==void 0?C:_?!1:o&&o.requiredMark!==void 0?o.requiredMark:!0,[_,C,o]),V=h??(o==null?void 0:o.colon),W=r("form",a),z=Mc(W),[L,D,j]=AD(W,z),F=de(W,`${W}-${E}`,{[`${W}-hide-required-mark`]:U===!1,[`${W}-rtl`]:i==="rtl",[`${W}-${M}`]:M},j,z,D,o==null?void 0:o.className,s,c),[y]=$X(d),{__INTERNAL__:I}=y;I.name=T;const N=v.useMemo(()=>({name:T,labelAlign:f,labelCol:p,labelWrap:g,wrapperCol:m,vertical:E==="vertical",colon:V,requiredMark:U,itemRef:I.itemRef,form:y,feedbackIcons:A}),[T,f,p,m,E,V,U,y,A]),B=v.useRef(null);v.useImperativeHandle(t,()=>{var ee;return Object.assign(Object.assign({},y),{nativeElement:(ee=B.current)===null||ee===void 0?void 0:ee.nativeElement})});const K=(ee,ne)=>{if(ee){let fe={block:"nearest"};typeof ee=="object"&&(fe=ee),y.scrollToField(ne,fe)}},X=ee=>{if(b==null||b(ee),ee.errorFields.length){const ne=ee.errorFields[0].name;if(S!==void 0){K(S,ne);return}o&&o.scrollToFirstError!==void 0&&K(o.scrollToFirstError,ne)}};return L(v.createElement(yY.Provider,{value:O},v.createElement(hq,{disabled:u},v.createElement(zg.Provider,{value:M},v.createElement(SY,{validateMessages:$},v.createElement(ml.Provider,{value:N},v.createElement(xp,Object.assign({id:T},x,{name:T,onFinishFailed:X,form:y,ref:B,style:Object.assign(Object.assign({},o==null?void 0:o.style),R),className:F}))))))))},nNe=v.forwardRef(tNe),rNe=nNe;function iNe(e){if(typeof e=="function")return e;const t=zs(e);return t.length<=1?t[0]:t}const VX=()=>{const{status:e,errors:t=[],warnings:n=[]}=v.useContext(ba);return{status:e,errors:t,warnings:n}};VX.Context=ba;const oNe=VX;function aNe(e){const[t,n]=v.useState(e),r=v.useRef(null),i=v.useRef([]),o=v.useRef(!1);v.useEffect(()=>(o.current=!1,()=>{o.current=!0,sr.cancel(r.current),r.current=null}),[]);function a(s){o.current||(r.current===null&&(i.current=[],r.current=sr(()=>{r.current=null,n(c=>{let l=c;return i.current.forEach(u=>{l=u(l)}),l})})),i.current.push(s))}return[t,a]}function sNe(){const{itemRef:e}=v.useContext(ml),t=v.useRef({});function n(r,i){const o=i&&typeof i=="object"&&i.ref,a=r.join("_");return(t.current.name!==a||t.current.originRef!==o)&&(t.current.name=a,t.current.originRef=o,t.current.ref=gs(e(r),o)),t.current.ref}return n}const cNe=e=>{const{formItemCls:t}=e;return{"@media screen and (-ms-high-contrast: active), (-ms-high-contrast: none)":{[`${t}-control`]:{display:"flex"}}}},lNe=FC(["Form","item-item"],(e,t)=>{let{rootPrefixCls:n}=t;const r=MX(e,n);return[cNe(r)]}),uNe=e=>{const{prefixCls:t,status:n,wrapperCol:r,children:i,errors:o,warnings:a,_internalItemRender:s,extra:c,help:l,fieldId:u,marginBottom:d,onErrorVisibleChanged:h}=e,f=`${t}-item`,g=v.useContext(ml),p=r||g.wrapperCol||{},m=de(`${f}-control`,p.className),_=v.useMemo(()=>Object.assign({},g),[g]);delete _.labelCol,delete _.wrapperCol;const E=v.createElement("div",{className:`${f}-control-input`},v.createElement("div",{className:`${f}-control-input-content`},i)),S=v.useMemo(()=>({prefixCls:t,status:n}),[t,n]),C=d!==null||o.length||a.length?v.createElement("div",{style:{display:"flex",flexWrap:"nowrap"}},v.createElement(rD.Provider,{value:S},v.createElement(FX,{fieldId:u,errors:o,warnings:a,help:l,helpStatus:n,className:`${f}-explain-connected`,onVisibleChanged:h})),!!d&&v.createElement("div",{style:{width:0,height:d}})):null,b={};u&&(b.id=`${u}_extra`);const T=c?v.createElement("div",Object.assign({},b,{className:`${f}-extra`}),c):null,R=s&&s.mark==="pro_table_render"&&s.render?s.render(e,{input:E,errorList:C,extra:T}):v.createElement(v.Fragment,null,E,C,T);return v.createElement(ml.Provider,{value:_},v.createElement(ID,Object.assign({},p,{className:m}),R),v.createElement(lNe,{prefixCls:t}))},dNe=uNe;var hNe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M623.6 316.7C593.6 290.4 554 276 512 276s-81.6 14.5-111.6 40.7C369.2 344 352 380.7 352 420v7.6c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V420c0-44.1 43.1-80 96-80s96 35.9 96 80c0 31.1-22 59.6-56.1 72.7-21.2 8.1-39.2 22.3-52.1 40.9-13.1 19-19.9 41.8-19.9 64.9V620c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-22.7a48.3 48.3 0 0130.9-44.8c59-22.7 97.1-74.7 97.1-132.5.1-39.3-17.1-76-48.3-103.3zM472 732a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"question-circle",theme:"outlined"};const fNe=hNe;var pNe=function(t,n){return v.createElement(si,Ee({},t,{ref:n,icon:fNe}))},mNe=v.forwardRef(pNe);const gNe=mNe;var vNe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function ENe(e){return e?typeof e=="object"&&!v.isValidElement(e)?e:{title:e}:null}const _Ne=e=>{let{prefixCls:t,label:n,htmlFor:r,labelCol:i,labelAlign:o,colon:a,required:s,requiredMark:c,tooltip:l,vertical:u}=e;var d;const[h]=kC("Form"),{labelAlign:f,labelCol:g,labelWrap:p,colon:m}=v.useContext(ml);if(!n)return null;const _=i||g||{},E=o||f,S=`${t}-item-label`,C=de(S,E==="left"&&`${S}-left`,_.className,{[`${S}-wrap`]:!!p});let b=n;const T=a===!0||m!==!1&&a!==!1;T&&!u&&typeof n=="string"&&n.trim()!==""&&(b=n.replace(/[:|：]\s*$/,""));const A=ENe(l);if(A){const{icon:$=v.createElement(gNe,null)}=A,U=vNe(A,["icon"]),V=v.createElement(qg,Object.assign({},U),v.cloneElement($,{className:`${t}-item-tooltip`,title:"",onClick:W=>{W.preventDefault()},tabIndex:null}));b=v.createElement(v.Fragment,null,b,V)}const O=c==="optional",x=typeof c=="function";x?b=c(b,{required:!!s}):O&&!s&&(b=v.createElement(v.Fragment,null,b,v.createElement("span",{className:`${t}-item-optional`,title:""},(h==null?void 0:h.optional)||((d=Fd.Form)===null||d===void 0?void 0:d.optional))));const M=de({[`${t}-item-required`]:s,[`${t}-item-required-mark-optional`]:O||x,[`${t}-item-no-colon`]:!T});return v.createElement(ID,Object.assign({},_,{className:C}),v.createElement("label",{htmlFor:r,className:M,title:typeof n=="string"?n:""},b))},SNe=_Ne,yNe={success:Hq,warning:Wq,error:$C,validating:VC};function jX(e){let{children:t,errors:n,warnings:r,hasFeedback:i,validateStatus:o,prefixCls:a,meta:s,noStyle:c}=e;const l=`${a}-item`,{feedbackIcons:u}=v.useContext(ml),d=BX(n,r,s,null,!!i,o),{isFormItemInput:h,status:f,hasFeedback:g,feedbackIcon:p}=v.useContext(ba),m=v.useMemo(()=>{var _;let E;if(i){const C=i!==!0&&i.icons||u,b=d&&((_=C==null?void 0:C({status:d,errors:n,warnings:r}))===null||_===void 0?void 0:_[d]),T=d&&yNe[d];E=b!==!1&&T?v.createElement("span",{className:de(`${l}-feedback-icon`,`${l}-feedback-icon-${d}`)},b||v.createElement(T,null)):null}const S={status:d||"",errors:n,warnings:r,hasFeedback:!!i,feedbackIcon:E,isFormItemInput:!0};return c&&(S.status=(d??f)||"",S.isFormItemInput=h,S.hasFeedback=!!(i??g),S.feedbackIcon=i!==void 0?S.feedbackIcon:p),S},[d,i,c,h,f]);return v.createElement(ba.Provider,{value:m},t)}var CNe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function bNe(e){const{prefixCls:t,className:n,rootClassName:r,style:i,help:o,errors:a,warnings:s,validateStatus:c,meta:l,hasFeedback:u,hidden:d,children:h,fieldId:f,required:g,isRequired:p,onSubItemMetaChange:m,layout:_}=e,E=CNe(e,["prefixCls","className","rootClassName","style","help","errors","warnings","validateStatus","meta","hasFeedback","hidden","children","fieldId","required","isRequired","onSubItemMetaChange","layout"]),S=`${t}-item`,{requiredMark:C,vertical:b}=v.useContext(ml),T=b||_==="vertical",R=v.useRef(null),A=oy(a),O=oy(s),x=o!=null,M=!!(x||a.length||s.length),$=!!R.current&&HC(R.current),[U,V]=v.useState(null);Mn(()=>{if(M&&R.current){const j=getComputedStyle(R.current);V(parseInt(j.marginBottom,10))}},[M,$]);const W=j=>{j||V(null)},L=function(){let j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const F=j?A:l.errors,y=j?O:l.warnings;return BX(F,y,l,"",!!u,c)}(),D=de(S,n,r,{[`${S}-with-help`]:x||A.length||O.length,[`${S}-has-feedback`]:L&&u,[`${S}-has-success`]:L==="success",[`${S}-has-warning`]:L==="warning",[`${S}-has-error`]:L==="error",[`${S}-is-validating`]:L==="validating",[`${S}-hidden`]:d,[`${S}-${_}`]:_});return v.createElement("div",{className:D,style:i,ref:R},v.createElement(OX,Object.assign({className:`${S}-row`},So(E,["_internalItemRender","colon","dependencies","extra","fieldKey","getValueFromEvent","getValueProps","htmlFor","id","initialValue","isListField","label","labelAlign","labelCol","labelWrap","messageVariables","name","normalize","noStyle","preserve","requiredMark","rules","shouldUpdate","trigger","tooltip","validateFirst","validateTrigger","valuePropName","wrapperCol","validateDebounce"])),v.createElement(SNe,Object.assign({htmlFor:f},e,{requiredMark:C,required:g??p,prefixCls:t,vertical:T})),v.createElement(dNe,Object.assign({},e,l,{errors:A,warnings:O,prefixCls:t,status:L,help:o,marginBottom:U,onErrorVisibleChanged:W}),v.createElement(_Y.Provider,{value:m},v.createElement(jX,{prefixCls:t,meta:l,errors:l.errors,warnings:l.warnings,hasFeedback:u,validateStatus:L},h)))),!!U&&v.createElement("div",{className:`${S}-margin-offset`,style:{marginBottom:-U}}))}const TNe="__SPLIT__";function RNe(e,t){const n=Object.keys(e),r=Object.keys(t);return n.length===r.length&&n.every(i=>{const o=e[i],a=t[i];return o===a||typeof o=="function"||typeof a=="function"})}const wNe=v.memo(e=>{let{children:t}=e;return t},(e,t)=>RNe(e.control,t.control)&&e.update===t.update&&e.childProps.length===t.childProps.length&&e.childProps.every((n,r)=>n===t.childProps[r]));function lV(){return{errors:[],warnings:[],touched:!1,validating:!1,name:[],validated:!1}}function INe(e){const{name:t,noStyle:n,className:r,dependencies:i,prefixCls:o,shouldUpdate:a,rules:s,children:c,required:l,label:u,messageVariables:d,trigger:h="onChange",validateTrigger:f,hidden:g,help:p,layout:m}=e,{getPrefixCls:_}=v.useContext(en),{name:E}=v.useContext(ml),S=iNe(c),C=typeof S=="function",b=v.useContext(_Y),{validateTrigger:T}=v.useContext($d),R=f!==void 0?f:T,A=t!=null,O=_("form",o),x=Mc(O),[M,$,U]=AD(O,x);LC();const V=v.useContext(fg),W=v.useRef(),[z,L]=aNe({}),[D,j]=Td(()=>lV()),F=ee=>{const ne=V==null?void 0:V.getKey(ee.name);if(j(ee.destroy?lV():ee,!0),n&&p!==!1&&b){let fe=ee.name;if(ee.destroy)fe=W.current||fe;else if(ne!==void 0){const[ae,oe]=ne;fe=[ae].concat(Me(oe)),W.current=fe}b(ee,fe)}},y=(ee,ne)=>{L(fe=>{const ae=Object.assign({},fe),he=[].concat(Me(ee.name.slice(0,-1)),Me(ne)).join(TNe);return ee.destroy?delete ae[he]:ae[he]=ee,ae})},[I,N]=v.useMemo(()=>{const ee=Me(D.errors),ne=Me(D.warnings);return Object.values(z).forEach(fe=>{ee.push.apply(ee,Me(fe.errors||[])),ne.push.apply(ne,Me(fe.warnings||[]))}),[ee,ne]},[z,D.errors,D.warnings]),B=sNe();function K(ee,ne,fe){return n&&!g?v.createElement(jX,{prefixCls:O,hasFeedback:e.hasFeedback,validateStatus:e.validateStatus,meta:D,errors:I,warnings:N,noStyle:!0},ee):v.createElement(bNe,Object.assign({key:"row"},e,{className:de(r,U,x,$),prefixCls:O,fieldId:ne,isRequired:fe,errors:I,warnings:N,meta:D,onSubItemMetaChange:y,layout:m}),ee)}if(!A&&!C&&!i)return M(K(S));let X={};return typeof u=="string"?X.label=u:t&&(X.label=String(t)),d&&(X=Object.assign(Object.assign({},X),d)),M(v.createElement(tD,Object.assign({},e,{messageVariables:X,trigger:h,validateTrigger:R,onMetaChange:F}),(ee,ne,fe)=>{const ae=h0(t).length&&ne?ne.name:[],oe=UX(ae,E),he=l!==void 0?l:!!(s&&s.some(te=>{if(te&&typeof te=="object"&&te.required&&!te.warningOnly)return!0;if(typeof te=="function"){const ge=te(fe);return ge&&ge.required&&!ge.warningOnly}return!1})),me=Object.assign({},ee);let ie=null;if(Array.isArray(S)&&A)ie=S;else if(!(C&&(!(a||i)||A))){if(!(i&&!C&&!A))if(v.isValidElement(S)){const te=Object.assign(Object.assign({},S.props),me);if(te.id||(te.id=oe),p||I.length>0||N.length>0||e.extra){const be=[];(p||I.length>0)&&be.push(`${oe}_help`),e.extra&&be.push(`${oe}_extra`),te["aria-describedby"]=be.join(" ")}I.length>0&&(te["aria-invalid"]="true"),he&&(te["aria-required"]="true"),Ip(S)&&(te.ref=B(ae,S)),new Set([].concat(Me(h0(h)),Me(h0(R)))).forEach(be=>{te[be]=function(){for(var Se,ue,re,Re,we,xe=arguments.length,We=new Array(xe),Ve=0;Ve<xe;Ve++)We[Ve]=arguments[Ve];(re=me[be])===null||re===void 0||(Se=re).call.apply(Se,[me].concat(We)),(we=(Re=S.props)[be])===null||we===void 0||(ue=we).call.apply(ue,[Re].concat(We))}});const pe=[te["aria-required"],te["aria-invalid"],te["aria-describedby"]];ie=v.createElement(wNe,{control:me,update:S,childProps:pe},ls(S,te))}else C&&(a||i)&&!A?ie=S(fe):ie=S}return K(ie,oe,he)}))}const HX=INe;HX.useStatus=oNe;const ANe=HX;var ONe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const xNe=e=>{var{prefixCls:t,children:n}=e,r=ONe(e,["prefixCls","children"]);const{getPrefixCls:i}=v.useContext(en),o=i("form",t),a=v.useMemo(()=>({prefixCls:o,status:"error"}),[o]);return v.createElement(mY,Object.assign({},r),(s,c,l)=>v.createElement(rD.Provider,{value:a},n(s.map(u=>Object.assign(Object.assign({},u),{fieldKey:u.key})),c,{errors:l.errors,warnings:l.warnings})))},NNe=xNe;function PNe(){const{form:e}=v.useContext(ml);return e}const Cl=rNe;Cl.Item=ANe;Cl.List=NNe;Cl.ErrorList=FX;Cl.useForm=$X;Cl.useFormInstance=PNe;Cl.useWatch=EY;Cl.Provider=SY;Cl.create=()=>{};const uV=Cl;function DNe(e,t,n){return typeof n=="boolean"?n:e.length?!0:zs(t).some(i=>i.type===CX)}const LNe=e=>{const{componentCls:t,bodyBg:n,lightSiderBg:r,lightTriggerBg:i,lightTriggerColor:o}=e;return{[`${t}-sider-light`]:{background:r,[`${t}-sider-trigger`]:{color:o,background:i},[`${t}-sider-zero-width-trigger`]:{color:o,background:i,border:`1px solid ${n}`,borderInlineStart:0}}}},kNe=LNe,MNe=e=>{const{antCls:t,componentCls:n,colorText:r,triggerColor:i,footerBg:o,triggerBg:a,headerHeight:s,headerPadding:c,headerColor:l,footerPadding:u,triggerHeight:d,zeroTriggerHeight:h,zeroTriggerWidth:f,motionDurationMid:g,motionDurationSlow:p,fontSize:m,borderRadius:_,bodyBg:E,headerBg:S,siderBg:C}=e;return{[n]:Object.assign(Object.assign({display:"flex",flex:"auto",flexDirection:"column",minHeight:0,background:E,"&, *":{boxSizing:"border-box"},[`&${n}-has-sider`]:{flexDirection:"row",[`> ${n}, > ${n}-content`]:{width:0}},[`${n}-header, &${n}-footer`]:{flex:"0 0 auto"},[`${n}-sider`]:{position:"relative",minWidth:0,background:C,transition:`all ${g}, background 0s`,"&-children":{height:"100%",marginTop:-.1,paddingTop:.1,[`${t}-menu${t}-menu-inline-collapsed`]:{width:"auto"}},"&-has-trigger":{paddingBottom:d},"&-right":{order:1},"&-trigger":{position:"fixed",bottom:0,zIndex:1,height:d,color:i,lineHeight:ve(d),textAlign:"center",background:a,cursor:"pointer",transition:`all ${g}`},"&-zero-width":{"> *":{overflow:"hidden"},"&-trigger":{position:"absolute",top:s,insetInlineEnd:e.calc(f).mul(-1).equal(),zIndex:1,width:f,height:h,color:i,fontSize:e.fontSizeXL,display:"flex",alignItems:"center",justifyContent:"center",background:C,borderStartStartRadius:0,borderStartEndRadius:_,borderEndEndRadius:_,borderEndStartRadius:0,cursor:"pointer",transition:`background ${p} ease`,"&::after":{position:"absolute",inset:0,background:"transparent",transition:`all ${p}`,content:'""'},"&:hover::after":{background:"rgba(255, 255, 255, 0.2)"},"&-right":{insetInlineStart:e.calc(f).mul(-1).equal(),borderStartStartRadius:_,borderStartEndRadius:0,borderEndEndRadius:0,borderEndStartRadius:_}}}}},kNe(e)),{"&-rtl":{direction:"rtl"}}),[`${n}-header`]:{height:s,padding:c,color:l,lineHeight:ve(s),background:S,[`${t}-menu`]:{lineHeight:"inherit"}},[`${n}-footer`]:{padding:u,color:r,fontSize:m,background:o},[`${n}-content`]:{flex:"auto",color:r,minHeight:0}}},FNe=e=>{const{colorBgLayout:t,controlHeight:n,controlHeightLG:r,colorText:i,controlHeightSM:o,marginXXS:a,colorTextLightSolid:s,colorBgContainer:c}=e,l=r*1.25;return{colorBgHeader:"#001529",colorBgBody:t,colorBgTrigger:"#002140",bodyBg:t,headerBg:"#001529",headerHeight:n*2,headerPadding:`0 ${l}px`,headerColor:i,footerPadding:`${o}px ${l}px`,footerBg:t,siderBg:"#001529",triggerHeight:r+a*2,triggerBg:"#002140",triggerColor:s,zeroTriggerWidth:r,zeroTriggerHeight:r,lightSiderBg:c,lightTriggerBg:c,lightTriggerColor:i}},zX=yo("Layout",e=>[MNe(e)],FNe,{deprecatedTokens:[["colorBgBody","bodyBg"],["colorBgHeader","headerBg"],["colorBgTrigger","triggerBg"]]});var WX=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function eb(e){let{suffixCls:t,tagName:n,displayName:r}=e;return i=>v.forwardRef((a,s)=>v.createElement(i,Object.assign({ref:s,suffixCls:t,tagName:n},a)))}const OD=v.forwardRef((e,t)=>{const{prefixCls:n,suffixCls:r,className:i,tagName:o}=e,a=WX(e,["prefixCls","suffixCls","className","tagName"]),{getPrefixCls:s}=v.useContext(en),c=s("layout",n),[l,u,d]=zX(c),h=r?`${c}-${r}`:c;return l(v.createElement(o,Object.assign({className:de(n||h,i,u,d),ref:t},a)))}),UNe=v.forwardRef((e,t)=>{const{direction:n}=v.useContext(en),[r,i]=v.useState([]),{prefixCls:o,className:a,rootClassName:s,children:c,hasSider:l,tagName:u,style:d}=e,h=WX(e,["prefixCls","className","rootClassName","children","hasSider","tagName","style"]),f=So(h,["suffixCls"]),{getPrefixCls:g,layout:p}=v.useContext(en),m=g("layout",o),_=DNe(r,c,l),[E,S,C]=zX(m),b=de(m,{[`${m}-has-sider`]:_,[`${m}-rtl`]:n==="rtl"},p==null?void 0:p.className,a,s,S,C),T=v.useMemo(()=>({siderHook:{addSider:R=>{i(A=>[].concat(Me(A),[R]))},removeSider:R=>{i(A=>A.filter(O=>O!==R))}}}),[]);return E(v.createElement(yX.Provider,{value:T},v.createElement(u,Object.assign({ref:t,className:b,style:Object.assign(Object.assign({},p==null?void 0:p.style),d)},f),c)))}),BNe=eb({tagName:"div",displayName:"Layout"})(UNe),$Ne=eb({suffixCls:"header",tagName:"header",displayName:"Header"})(OD),VNe=eb({suffixCls:"footer",tagName:"footer",displayName:"Footer"})(OD),jNe=eb({suffixCls:"content",tagName:"main",displayName:"Content"})(OD),HNe=BNe,Lp=HNe;Lp.Header=$Ne;Lp.Footer=VNe;Lp.Content=jNe;Lp.Sider=CX;Lp._InternalSiderContext=JC;const ax=Lp,zNe=function(){const e=Object.assign({},arguments.length<=0?void 0:arguments[0]);for(let t=1;t<arguments.length;t++){const n=t<0||arguments.length<=t?void 0:arguments[t];n&&Object.keys(n).forEach(r=>{const i=n[r];i!==void 0&&(e[r]=i)})}return e},WNe=zNe;var GNe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M272.9 512l265.4-339.1c4.1-5.2.4-12.9-6.3-12.9h-77.3c-4.9 0-9.6 2.3-12.6 6.1L186.8 492.3a31.99 31.99 0 000 39.5l255.3 326.1c3 3.9 7.7 6.1 12.6 6.1H532c6.7 0 10.4-7.7 6.3-12.9L272.9 512zm304 0l265.4-339.1c4.1-5.2.4-12.9-6.3-12.9h-77.3c-4.9 0-9.6 2.3-12.6 6.1L490.8 492.3a31.99 31.99 0 000 39.5l255.3 326.1c3 3.9 7.7 6.1 12.6 6.1H836c6.7 0 10.4-7.7 6.3-12.9L576.9 512z"}}]},name:"double-left",theme:"outlined"};const KNe=GNe;var qNe=function(t,n){return v.createElement(si,Ee({},t,{ref:n,icon:KNe}))},YNe=v.forwardRef(qNe);const dV=YNe;var XNe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M533.2 492.3L277.9 166.1c-3-3.9-7.7-6.1-12.6-6.1H188c-6.7 0-10.4 7.7-6.3 12.9L447.1 512 181.7 851.1A7.98 7.98 0 00188 864h77.3c4.9 0 9.6-2.3 12.6-6.1l255.3-326.1c9.1-11.7 9.1-27.9 0-39.5zm304 0L581.9 166.1c-3-3.9-7.7-6.1-12.6-6.1H492c-6.7 0-10.4 7.7-6.3 12.9L751.1 512 485.7 851.1A7.98 7.98 0 00492 864h77.3c4.9 0 9.6-2.3 12.6-6.1l255.3-326.1c9.1-11.7 9.1-27.9 0-39.5z"}}]},name:"double-right",theme:"outlined"};const JNe=XNe;var QNe=function(t,n){return v.createElement(si,Ee({},t,{ref:n,icon:JNe}))},ZNe=v.forwardRef(QNe);const hV=ZNe;var ePe={items_per_page:"条/页",jump_to:"跳至",jump_to_confirm:"确定",page:"页",prev_page:"上一页",next_page:"下一页",prev_5:"向前 5 页",next_5:"向后 5 页",prev_3:"向前 3 页",next_3:"向后 3 页",page_size:"页码"},tPe=["10","20","50","100"],nPe=function(t){var n=t.pageSizeOptions,r=n===void 0?tPe:n,i=t.locale,o=t.changeSize,a=t.pageSize,s=t.goButton,c=t.quickGo,l=t.rootPrefixCls,u=t.selectComponentClass,d=t.selectPrefixCls,h=t.disabled,f=t.buildOptionText,g=le.useState(""),p=ce(g,2),m=p[0],_=p[1],E=function(){return!m||Number.isNaN(m)?void 0:Number(m)},S=typeof f=="function"?f:function(V){return"".concat(V," ").concat(i.items_per_page)},C=function(W){o==null||o(Number(W))},b=function(W){_(W.target.value)},T=function(W){s||m===""||(_(""),!(W.relatedTarget&&(W.relatedTarget.className.indexOf("".concat(l,"-item-link"))>=0||W.relatedTarget.className.indexOf("".concat(l,"-item"))>=0))&&(c==null||c(E())))},R=function(W){m!==""&&(W.keyCode===Oe.ENTER||W.type==="click")&&(_(""),c==null||c(E()))},A=function(){return r.some(function(W){return W.toString()===a.toString()})?r:r.concat([a.toString()]).sort(function(W,z){var L=Number.isNaN(Number(W))?0:Number(W),D=Number.isNaN(Number(z))?0:Number(z);return L-D})},O="".concat(l,"-options");if(!o&&!c)return null;var x=null,M=null,$=null;if(o&&u){var U=A().map(function(V,W){return le.createElement(u.Option,{key:W,value:V.toString()},S(V))});x=le.createElement(u,{disabled:h,prefixCls:d,showSearch:!1,className:"".concat(O,"-size-changer"),optionLabelProp:"children",popupMatchSelectWidth:!1,value:(a||r[0]).toString(),onChange:C,getPopupContainer:function(W){return W.parentNode},"aria-label":i.page_size,defaultOpen:!1},U)}return c&&(s&&($=typeof s=="boolean"?le.createElement("button",{type:"button",onClick:R,onKeyUp:R,disabled:h,className:"".concat(O,"-quick-jumper-button")},i.jump_to_confirm):le.createElement("span",{onClick:R,onKeyUp:R},s)),M=le.createElement("div",{className:"".concat(O,"-quick-jumper")},i.jump_to,le.createElement("input",{disabled:h,type:"text",value:m,onChange:b,onKeyUp:R,onBlur:T,"aria-label":i.page}),i.page,$)),le.createElement("li",{className:O},x,M)},fm=function(t){var n,r=t.rootPrefixCls,i=t.page,o=t.active,a=t.className,s=t.showTitle,c=t.onClick,l=t.onKeyPress,u=t.itemRender,d="".concat(r,"-item"),h=de(d,"".concat(d,"-").concat(i),(n={},J(n,"".concat(d,"-active"),o),J(n,"".concat(d,"-disabled"),!i),n),a),f=function(){c(i)},g=function(_){l(_,c,i)},p=u(i,"page",le.createElement("a",{rel:"nofollow"},i));return p?le.createElement("li",{title:s?String(i):null,className:h,onClick:f,onKeyDown:g,tabIndex:0},p):null},rPe=function(t,n,r){return r};function fV(){}function pV(e){var t=Number(e);return typeof t=="number"&&!Number.isNaN(t)&&isFinite(t)&&Math.floor(t)===t}function Hu(e,t,n){var r=typeof e>"u"?t:e;return Math.floor((n-1)/r)+1}var iPe=function(t){var n,r=t.prefixCls,i=r===void 0?"rc-pagination":r,o=t.selectPrefixCls,a=o===void 0?"rc-select":o,s=t.className,c=t.selectComponentClass,l=t.current,u=t.defaultCurrent,d=u===void 0?1:u,h=t.total,f=h===void 0?0:h,g=t.pageSize,p=t.defaultPageSize,m=p===void 0?10:p,_=t.onChange,E=_===void 0?fV:_,S=t.hideOnSinglePage,C=t.showPrevNextJumpers,b=C===void 0?!0:C,T=t.showQuickJumper,R=t.showLessItems,A=t.showTitle,O=A===void 0?!0:A,x=t.onShowSizeChange,M=x===void 0?fV:x,$=t.locale,U=$===void 0?ePe:$,V=t.style,W=t.totalBoundaryShowSizeChanger,z=W===void 0?50:W,L=t.disabled,D=t.simple,j=t.showTotal,F=t.showSizeChanger,y=t.pageSizeOptions,I=t.itemRender,N=I===void 0?rPe:I,B=t.jumpPrevIcon,K=t.jumpNextIcon,X=t.prevIcon,ee=t.nextIcon,ne=le.useRef(null),fe=go(10,{value:g,defaultValue:m}),ae=ce(fe,2),oe=ae[0],he=ae[1],me=go(1,{value:l,defaultValue:d,postState:function(Vt){return Math.max(1,Math.min(Vt,Hu(void 0,oe,f)))}}),ie=ce(me,2),te=ie[0],ge=ie[1],pe=le.useState(te),be=ce(pe,2),Se=be[0],ue=be[1];v.useEffect(function(){ue(te)},[te]);var re=Math.max(1,te-(R?3:5)),Re=Math.min(Hu(void 0,oe,f),te+(R?3:5));function we(lt,Vt){var Bn=lt||le.createElement("button",{type:"button","aria-label":Vt,className:"".concat(i,"-item-link")});return typeof lt=="function"&&(Bn=le.createElement(lt,Y({},t))),Bn}function xe(lt){var Vt=lt.target.value,Bn=Hu(void 0,oe,f),fr;return Vt===""?fr=Vt:Number.isNaN(Number(Vt))?fr=Se:Vt>=Bn?fr=Bn:fr=Number(Vt),fr}function We(lt){return pV(lt)&&lt!==te&&pV(f)&&f>0}var Ve=f>oe?T:!1;function Rt(lt){(lt.keyCode===Oe.UP||lt.keyCode===Oe.DOWN)&&lt.preventDefault()}function xt(lt){var Vt=xe(lt);switch(Vt!==Se&&ue(Vt),lt.keyCode){case Oe.ENTER:Je(Vt);break;case Oe.UP:Je(Vt-1);break;case Oe.DOWN:Je(Vt+1);break}}function Xe(lt){Je(xe(lt))}function Ge(lt){var Vt=Hu(lt,oe,f),Bn=te>Vt&&Vt!==0?Vt:te;he(lt),ue(Bn),M==null||M(te,lt),ge(Bn),E==null||E(Bn,lt)}function Je(lt){if(We(lt)&&!L){var Vt=Hu(void 0,oe,f),Bn=lt;return lt>Vt?Bn=Vt:lt<1&&(Bn=1),Bn!==Se&&ue(Bn),ge(Bn),E==null||E(Bn,oe),Bn}return te}var st=te>1,At=te<Hu(void 0,oe,f),Ot=F??f>z;function dn(){st&&Je(te-1)}function an(){At&&Je(te+1)}function on(){Je(re)}function ke(){Je(Re)}function Ze(lt,Vt){if(lt.key==="Enter"||lt.charCode===Oe.ENTER||lt.keyCode===Oe.ENTER){for(var Bn=arguments.length,fr=new Array(Bn>2?Bn-2:0),pi=2;pi<Bn;pi++)fr[pi-2]=arguments[pi];Vt.apply(void 0,fr)}}function Mt(lt){Ze(lt,dn)}function En(lt){Ze(lt,an)}function nr(lt){Ze(lt,on)}function _n(lt){Ze(lt,ke)}function qt(lt){var Vt=N(lt,"prev",we(X,"prev page"));return le.isValidElement(Vt)?le.cloneElement(Vt,{disabled:!st}):Vt}function it(lt){var Vt=N(lt,"next",we(ee,"next page"));return le.isValidElement(Vt)?le.cloneElement(Vt,{disabled:!At}):Vt}function Nt(lt){(lt.type==="click"||lt.keyCode===Oe.ENTER)&&Je(Se)}var ct=null,Be=Bd(t,{aria:!0,data:!0}),nt=j&&le.createElement("li",{className:"".concat(i,"-total-text")},j(f,[f===0?0:(te-1)*oe+1,te*oe>f?f:te*oe])),Bt=null,Le=Hu(void 0,oe,f);if(S&&f<=oe)return null;var Ue=[],ze={rootPrefixCls:i,onClick:Je,onKeyPress:Ze,showTitle:O,itemRender:N,page:-1},mt=te-1>0?te-1:0,Ft=te+1<Le?te+1:Le,$t=T&&T.goButton,Dn=$t,rr=null;D&&($t&&(typeof $t=="boolean"?Dn=le.createElement("button",{type:"button",onClick:Nt,onKeyUp:Nt},U.jump_to_confirm):Dn=le.createElement("span",{onClick:Nt,onKeyUp:Nt},$t),Dn=le.createElement("li",{title:O?"".concat(U.jump_to).concat(te,"/").concat(Le):null,className:"".concat(i,"-simple-pager")},Dn)),rr=le.createElement("li",{title:O?"".concat(te,"/").concat(Le):null,className:"".concat(i,"-simple-pager")},le.createElement("input",{type:"text",value:Se,disabled:L,onKeyDown:Rt,onKeyUp:xt,onChange:xt,onBlur:Xe,size:3}),le.createElement("span",{className:"".concat(i,"-slash")},"/"),Le));var Sn=R?1:2;if(Le<=3+Sn*2){Le||Ue.push(le.createElement(fm,Ee({},ze,{key:"noPager",page:1,className:"".concat(i,"-item-disabled")})));for(var gt=1;gt<=Le;gt+=1)Ue.push(le.createElement(fm,Ee({},ze,{key:gt,page:gt,active:te===gt})))}else{var wr=R?U.prev_3:U.prev_5,Co=R?U.next_3:U.next_5,no=N(re,"jump-prev",we(B,"prev page")),Ir=N(Re,"jump-next",we(K,"next page"));b&&(ct=no?le.createElement("li",{title:O?wr:null,key:"prev",onClick:on,tabIndex:0,onKeyDown:nr,className:de("".concat(i,"-jump-prev"),J({},"".concat(i,"-jump-prev-custom-icon"),!!B))},no):null,Bt=Ir?le.createElement("li",{title:O?Co:null,key:"next",onClick:ke,tabIndex:0,onKeyDown:_n,className:de("".concat(i,"-jump-next"),J({},"".concat(i,"-jump-next-custom-icon"),!!K))},Ir):null);var Qr=Math.max(1,te-Sn),et=Math.min(te+Sn,Le);te-1<=Sn&&(et=1+Sn*2),Le-te<=Sn&&(Qr=Le-Sn*2);for(var Qe=Qr;Qe<=et;Qe+=1)Ue.push(le.createElement(fm,Ee({},ze,{key:Qe,page:Qe,active:te===Qe})));if(te-1>=Sn*2&&te!==1+2&&(Ue[0]=le.cloneElement(Ue[0],{className:de("".concat(i,"-item-after-jump-prev"),Ue[0].props.className)}),Ue.unshift(ct)),Le-te>=Sn*2&&te!==Le-2){var dt=Ue[Ue.length-1];Ue[Ue.length-1]=le.cloneElement(dt,{className:de("".concat(i,"-item-before-jump-next"),dt.props.className)}),Ue.push(Bt)}Qr!==1&&Ue.unshift(le.createElement(fm,Ee({},ze,{key:1,page:1}))),et!==Le&&Ue.push(le.createElement(fm,Ee({},ze,{key:Le,page:Le})))}var Un=qt(mt);if(Un){var Zr=!st||!Le;Un=le.createElement("li",{title:O?U.prev_page:null,onClick:dn,tabIndex:Zr?null:0,onKeyDown:Mt,className:de("".concat(i,"-prev"),J({},"".concat(i,"-disabled"),Zr)),"aria-disabled":Zr},Un)}var ro=it(Ft);if(ro){var lr,io;D?(lr=!At,io=st?0:null):(lr=!At||!Le,io=lr?null:0),ro=le.createElement("li",{title:O?U.next_page:null,onClick:an,tabIndex:io,onKeyDown:En,className:de("".concat(i,"-next"),J({},"".concat(i,"-disabled"),lr)),"aria-disabled":lr},ro)}var Na=de(i,s,(n={},J(n,"".concat(i,"-simple"),D),J(n,"".concat(i,"-disabled"),L),n));return le.createElement("ul",Ee({className:Na,style:V,ref:ne},Be),nt,Un,D?rr:Ue,ro,le.createElement(nPe,{locale:U,rootPrefixCls:i,disabled:L,selectComponentClass:c,selectPrefixCls:a,changeSize:Ot?Ge:null,pageSize:oe,pageSizeOptions:y,quickGo:Ve?Je:null,goButton:Dn}))};const GX=e=>v.createElement(KC,Object.assign({},e,{showSearch:!0,size:"small"})),KX=e=>v.createElement(KC,Object.assign({},e,{showSearch:!0,size:"middle"}));GX.Option=KC.Option;KX.Option=KC.Option;const oPe=e=>{const{componentCls:t}=e;return{[`${t}-disabled`]:{"&, &:hover":{cursor:"not-allowed",[`${t}-item-link`]:{color:e.colorTextDisabled,cursor:"not-allowed"}},"&:focus-visible":{cursor:"not-allowed",[`${t}-item-link`]:{color:e.colorTextDisabled,cursor:"not-allowed"}}},[`&${t}-disabled`]:{cursor:"not-allowed",[`${t}-item`]:{cursor:"not-allowed","&:hover, &:active":{backgroundColor:"transparent"},a:{color:e.colorTextDisabled,backgroundColor:"transparent",border:"none",cursor:"not-allowed"},"&-active":{borderColor:e.colorBorder,backgroundColor:e.itemActiveBgDisabled,"&:hover, &:active":{backgroundColor:e.itemActiveBgDisabled},a:{color:e.itemActiveColorDisabled}}},[`${t}-item-link`]:{color:e.colorTextDisabled,cursor:"not-allowed","&:hover, &:active":{backgroundColor:"transparent"},[`${t}-simple&`]:{backgroundColor:"transparent","&:hover, &:active":{backgroundColor:"transparent"}}},[`${t}-simple-pager`]:{color:e.colorTextDisabled},[`${t}-jump-prev, ${t}-jump-next`]:{[`${t}-item-link-icon`]:{opacity:0},[`${t}-item-ellipsis`]:{opacity:1}}},[`&${t}-simple`]:{[`${t}-prev, ${t}-next`]:{[`&${t}-disabled ${t}-item-link`]:{"&:hover, &:active":{backgroundColor:"transparent"}}}}}},aPe=e=>{const{componentCls:t}=e;return{[`&${t}-mini ${t}-total-text, &${t}-mini ${t}-simple-pager`]:{height:e.itemSizeSM,lineHeight:ve(e.itemSizeSM)},[`&${t}-mini ${t}-item`]:{minWidth:e.itemSizeSM,height:e.itemSizeSM,margin:0,lineHeight:ve(e.calc(e.itemSizeSM).sub(2).equal())},[`&${t}-mini:not(${t}-disabled) ${t}-item:not(${t}-item-active)`]:{backgroundColor:"transparent",borderColor:"transparent","&:hover":{backgroundColor:e.colorBgTextHover},"&:active":{backgroundColor:e.colorBgTextActive}},[`&${t}-mini ${t}-prev, &${t}-mini ${t}-next`]:{minWidth:e.itemSizeSM,height:e.itemSizeSM,margin:0,lineHeight:ve(e.itemSizeSM)},[`&${t}-mini:not(${t}-disabled)`]:{[`${t}-prev, ${t}-next`]:{[`&:hover ${t}-item-link`]:{backgroundColor:e.colorBgTextHover},[`&:active ${t}-item-link`]:{backgroundColor:e.colorBgTextActive},[`&${t}-disabled:hover ${t}-item-link`]:{backgroundColor:"transparent"}}},[`
    &${t}-mini ${t}-prev ${t}-item-link,
    &${t}-mini ${t}-next ${t}-item-link
    `]:{backgroundColor:"transparent",borderColor:"transparent","&::after":{height:e.itemSizeSM,lineHeight:ve(e.itemSizeSM)}},[`&${t}-mini ${t}-jump-prev, &${t}-mini ${t}-jump-next`]:{height:e.itemSizeSM,marginInlineEnd:0,lineHeight:ve(e.itemSizeSM)},[`&${t}-mini ${t}-options`]:{marginInlineStart:e.paginationMiniOptionsMarginInlineStart,"&-size-changer":{top:e.miniOptionsSizeChangerTop},"&-quick-jumper":{height:e.itemSizeSM,lineHeight:ve(e.itemSizeSM),input:Object.assign(Object.assign({},TD(e)),{width:e.paginationMiniQuickJumperInputWidth,height:e.controlHeightSM})}}}},sPe=e=>{const{componentCls:t}=e;return{[`
    &${t}-simple ${t}-prev,
    &${t}-simple ${t}-next
    `]:{height:e.itemSizeSM,lineHeight:ve(e.itemSizeSM),verticalAlign:"top",[`${t}-item-link`]:{height:e.itemSizeSM,backgroundColor:"transparent",border:0,"&:hover":{backgroundColor:e.colorBgTextHover},"&:active":{backgroundColor:e.colorBgTextActive},"&::after":{height:e.itemSizeSM,lineHeight:ve(e.itemSizeSM)}}},[`&${t}-simple ${t}-simple-pager`]:{display:"inline-block",height:e.itemSizeSM,marginInlineEnd:e.marginXS,input:{boxSizing:"border-box",height:"100%",marginInlineEnd:e.marginXS,padding:`0 ${ve(e.paginationItemPaddingInline)}`,textAlign:"center",backgroundColor:e.itemInputBg,border:`${ve(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderRadius:e.borderRadius,outline:"none",transition:`border-color ${e.motionDurationMid}`,color:"inherit","&:hover":{borderColor:e.colorPrimary},"&:focus":{borderColor:e.colorPrimaryHover,boxShadow:`${ve(e.inputOutlineOffset)} 0 ${ve(e.controlOutlineWidth)} ${e.controlOutline}`},"&[disabled]":{color:e.colorTextDisabled,backgroundColor:e.colorBgContainerDisabled,borderColor:e.colorBorder,cursor:"not-allowed"}}}}},cPe=e=>{const{componentCls:t}=e;return{[`${t}-jump-prev, ${t}-jump-next`]:{outline:0,[`${t}-item-container`]:{position:"relative",[`${t}-item-link-icon`]:{color:e.colorPrimary,fontSize:e.fontSizeSM,opacity:0,transition:`all ${e.motionDurationMid}`,"&-svg":{top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,margin:"auto"}},[`${t}-item-ellipsis`]:{position:"absolute",top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,display:"block",margin:"auto",color:e.colorTextDisabled,fontFamily:"Arial, Helvetica, sans-serif",letterSpacing:e.paginationEllipsisLetterSpacing,textAlign:"center",textIndent:e.paginationEllipsisTextIndent,opacity:1,transition:`all ${e.motionDurationMid}`}},"&:hover":{[`${t}-item-link-icon`]:{opacity:1},[`${t}-item-ellipsis`]:{opacity:0}}},[`
    ${t}-prev,
    ${t}-jump-prev,
    ${t}-jump-next
    `]:{marginInlineEnd:e.marginXS},[`
    ${t}-prev,
    ${t}-next,
    ${t}-jump-prev,
    ${t}-jump-next
    `]:{display:"inline-block",minWidth:e.itemSize,height:e.itemSize,color:e.colorText,fontFamily:e.fontFamily,lineHeight:`${ve(e.itemSize)}`,textAlign:"center",verticalAlign:"middle",listStyle:"none",borderRadius:e.borderRadius,cursor:"pointer",transition:`all ${e.motionDurationMid}`},[`${t}-prev, ${t}-next`]:{fontFamily:"Arial, Helvetica, sans-serif",outline:0,button:{color:e.colorText,cursor:"pointer",userSelect:"none"},[`${t}-item-link`]:{display:"block",width:"100%",height:"100%",padding:0,fontSize:e.fontSizeSM,textAlign:"center",backgroundColor:"transparent",border:`${ve(e.lineWidth)} ${e.lineType} transparent`,borderRadius:e.borderRadius,outline:"none",transition:`all ${e.motionDurationMid}`},[`&:hover ${t}-item-link`]:{backgroundColor:e.colorBgTextHover},[`&:active ${t}-item-link`]:{backgroundColor:e.colorBgTextActive},[`&${t}-disabled:hover`]:{[`${t}-item-link`]:{backgroundColor:"transparent"}}},[`${t}-slash`]:{marginInlineEnd:e.paginationSlashMarginInlineEnd,marginInlineStart:e.paginationSlashMarginInlineStart},[`${t}-options`]:{display:"inline-block",marginInlineStart:e.margin,verticalAlign:"middle","&-size-changer":{display:"inline-block",width:"auto"},"&-quick-jumper":{display:"inline-block",height:e.controlHeight,marginInlineStart:e.marginXS,lineHeight:ve(e.controlHeight),verticalAlign:"top",input:Object.assign(Object.assign(Object.assign({},RD(e)),bD(e,{borderColor:e.colorBorder,hoverBorderColor:e.colorPrimaryHover,activeBorderColor:e.colorPrimary,activeShadow:e.activeShadow})),{"&[disabled]":Object.assign({},QC(e)),width:e.calc(e.controlHeightLG).mul(1.25).equal(),height:e.controlHeight,boxSizing:"border-box",margin:0,marginInlineStart:e.marginXS,marginInlineEnd:e.marginXS})}}}},lPe=e=>{const{componentCls:t}=e;return{[`${t}-item`]:{display:"inline-block",minWidth:e.itemSize,height:e.itemSize,marginInlineEnd:e.marginXS,fontFamily:e.fontFamily,lineHeight:ve(e.calc(e.itemSize).sub(2).equal()),textAlign:"center",verticalAlign:"middle",listStyle:"none",backgroundColor:"transparent",border:`${ve(e.lineWidth)} ${e.lineType} transparent`,borderRadius:e.borderRadius,outline:0,cursor:"pointer",userSelect:"none",a:{display:"block",padding:`0 ${ve(e.paginationItemPaddingInline)}`,color:e.colorText,"&:hover":{textDecoration:"none"}},[`&:not(${t}-item-active)`]:{"&:hover":{transition:`all ${e.motionDurationMid}`,backgroundColor:e.colorBgTextHover},"&:active":{backgroundColor:e.colorBgTextActive}},"&-active":{fontWeight:e.fontWeightStrong,backgroundColor:e.itemActiveBg,borderColor:e.colorPrimary,a:{color:e.colorPrimary},"&:hover":{borderColor:e.colorPrimaryHover},"&:hover a":{color:e.colorPrimaryHover}}}}},uPe=e=>{const{componentCls:t}=e;return{[t]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Oa(e)),{"ul, ol":{margin:0,padding:0,listStyle:"none"},"&::after":{display:"block",clear:"both",height:0,overflow:"hidden",visibility:"hidden",content:'""'},[`${t}-total-text`]:{display:"inline-block",height:e.itemSize,marginInlineEnd:e.marginXS,lineHeight:ve(e.calc(e.itemSize).sub(2).equal()),verticalAlign:"middle"}}),lPe(e)),cPe(e)),sPe(e)),aPe(e)),oPe(e)),{[`@media only screen and (max-width: ${e.screenLG}px)`]:{[`${t}-item`]:{"&-after-jump-prev, &-before-jump-next":{display:"none"}}},[`@media only screen and (max-width: ${e.screenSM}px)`]:{[`${t}-options`]:{display:"none"}}}),[`&${e.componentCls}-rtl`]:{direction:"rtl"}}},dPe=e=>{const{componentCls:t}=e;return{[`${t}:not(${t}-disabled)`]:{[`${t}-item`]:Object.assign({},WP(e)),[`${t}-jump-prev, ${t}-jump-next`]:{"&:focus-visible":Object.assign({[`${t}-item-link-icon`]:{opacity:1},[`${t}-item-ellipsis`]:{opacity:0}},GS(e))},[`${t}-prev, ${t}-next`]:{[`&:focus-visible ${t}-item-link`]:Object.assign({},GS(e))}}}},qX=e=>Object.assign({itemBg:e.colorBgContainer,itemSize:e.controlHeight,itemSizeSM:e.controlHeightSM,itemActiveBg:e.colorBgContainer,itemLinkBg:e.colorBgContainer,itemActiveColorDisabled:e.colorTextDisabled,itemActiveBgDisabled:e.controlItemBgActiveDisabled,itemInputBg:e.colorBgContainer,miniOptionsSizeChangerTop:0},CD(e)),YX=e=>gr(e,{inputOutlineOffset:0,paginationMiniOptionsMarginInlineStart:e.calc(e.marginXXS).div(2).equal(),paginationMiniQuickJumperInputWidth:e.calc(e.controlHeightLG).mul(1.1).equal(),paginationItemPaddingInline:e.calc(e.marginXXS).mul(1.5).equal(),paginationEllipsisLetterSpacing:e.calc(e.marginXXS).div(2).equal(),paginationSlashMarginInlineStart:e.marginXXS,paginationSlashMarginInlineEnd:e.marginSM,paginationEllipsisTextIndent:"0.13em"},yD(e)),hPe=yo("Pagination",e=>{const t=YX(e);return[uPe(t),dPe(t)]},qX),fPe=e=>{const{componentCls:t}=e;return{[`${t}${t}-bordered${t}-disabled:not(${t}-mini)`]:{"&, &:hover":{[`${t}-item-link`]:{borderColor:e.colorBorder}},"&:focus-visible":{[`${t}-item-link`]:{borderColor:e.colorBorder}},[`${t}-item, ${t}-item-link`]:{backgroundColor:e.colorBgContainerDisabled,borderColor:e.colorBorder,[`&:hover:not(${t}-item-active)`]:{backgroundColor:e.colorBgContainerDisabled,borderColor:e.colorBorder,a:{color:e.colorTextDisabled}},[`&${t}-item-active`]:{backgroundColor:e.itemActiveBgDisabled}},[`${t}-prev, ${t}-next`]:{"&:hover button":{backgroundColor:e.colorBgContainerDisabled,borderColor:e.colorBorder,color:e.colorTextDisabled},[`${t}-item-link`]:{backgroundColor:e.colorBgContainerDisabled,borderColor:e.colorBorder}}},[`${t}${t}-bordered:not(${t}-mini)`]:{[`${t}-prev, ${t}-next`]:{"&:hover button":{borderColor:e.colorPrimaryHover,backgroundColor:e.itemBg},[`${t}-item-link`]:{backgroundColor:e.itemLinkBg,borderColor:e.colorBorder},[`&:hover ${t}-item-link`]:{borderColor:e.colorPrimary,backgroundColor:e.itemBg,color:e.colorPrimary},[`&${t}-disabled`]:{[`${t}-item-link`]:{borderColor:e.colorBorder,color:e.colorTextDisabled}}},[`${t}-item`]:{backgroundColor:e.itemBg,border:`${ve(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,[`&:hover:not(${t}-item-active)`]:{borderColor:e.colorPrimary,backgroundColor:e.itemBg,a:{color:e.colorPrimary}},"&-active":{borderColor:e.colorPrimary}}}}},pPe=FC(["Pagination","bordered"],e=>{const t=YX(e);return[fPe(t)]},qX);var mPe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const gPe=e=>{const{prefixCls:t,selectPrefixCls:n,className:r,rootClassName:i,style:o,size:a,locale:s,selectComponentClass:c,responsive:l,showSizeChanger:u}=e,d=mPe(e,["prefixCls","selectPrefixCls","className","rootClassName","style","size","locale","selectComponentClass","responsive","showSizeChanger"]),{xs:h}=rX(l),[,f]=Eo(),{getPrefixCls:g,direction:p,pagination:m={}}=v.useContext(en),_=g("pagination",t),[E,S,C]=hPe(_),b=u??m.showSizeChanger,T=v.useMemo(()=>{const V=v.createElement("span",{className:`${_}-item-ellipsis`},"•••"),W=v.createElement("button",{className:`${_}-item-link`,type:"button",tabIndex:-1},p==="rtl"?v.createElement(ey,null):v.createElement(ny,null)),z=v.createElement("button",{className:`${_}-item-link`,type:"button",tabIndex:-1},p==="rtl"?v.createElement(ny,null):v.createElement(ey,null)),L=v.createElement("a",{className:`${_}-item-link`},v.createElement("div",{className:`${_}-item-container`},p==="rtl"?v.createElement(hV,{className:`${_}-item-link-icon`}):v.createElement(dV,{className:`${_}-item-link-icon`}),V)),D=v.createElement("a",{className:`${_}-item-link`},v.createElement("div",{className:`${_}-item-container`},p==="rtl"?v.createElement(dV,{className:`${_}-item-link-icon`}):v.createElement(hV,{className:`${_}-item-link-icon`}),V));return{prevIcon:W,nextIcon:z,jumpPrevIcon:L,jumpNextIcon:D}},[p,_]),[R]=kC("Pagination",iq),A=Object.assign(Object.assign({},R),s),O=yl(a),x=O==="small"||!!(h&&!O&&l),M=g("select",n),$=de({[`${_}-mini`]:x,[`${_}-rtl`]:p==="rtl",[`${_}-bordered`]:f.wireframe},m==null?void 0:m.className,r,i,S,C),U=Object.assign(Object.assign({},m==null?void 0:m.style),o);return E(v.createElement(v.Fragment,null,f.wireframe&&v.createElement(pPe,{prefixCls:_}),v.createElement(iPe,Object.assign({},T,d,{style:U,prefixCls:_,selectPrefixCls:M,className:$,selectComponentClass:c||(x?GX:KX),locale:A,showSizeChanger:b}))))},vPe=gPe;function EPe(e){let{percent:t,prefixCls:n}=e;const r=`${n}-dot`,i=`${r}-holder`,o=`${i}-hidden`,[a,s]=v.useState(!1);Mn(()=>{t!==0&&s(!0)},[t!==0]);const c=Math.max(Math.min(t,100),0),l=100,u=l/5,d=l/2-u/2,h=d*2*Math.PI,f=(g,p)=>v.createElement("circle",{className:de(g,`${r}-circle`),r:d,cx:"50",cy:"50",strokeWidth:u,style:p});return a?v.createElement("span",{className:de(i,`${r}-progress`,c<=0&&o)},v.createElement("svg",{viewBox:`0 0 ${l} ${l}`,role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":c},f(`${r}-circle-bg`),f("",{strokeDasharray:`${h*c/100} ${h*(100-c)/100}`,strokeDashoffset:`${h/4}`}))):null}function _Pe(e){const{prefixCls:t,percent:n=0}=e,r=`${t}-dot`,i=`${r}-holder`,o=`${i}-hidden`;return v.createElement(v.Fragment,null,v.createElement("span",{className:de(i,n>0&&o)},v.createElement("span",{className:de(r,`${t}-dot-spin`)},[1,2,3,4].map(a=>v.createElement("i",{className:`${t}-dot-item`,key:a})))),v.createElement(EPe,{prefixCls:t,percent:n}))}function SPe(e){const{prefixCls:t,indicator:n,percent:r}=e,i=`${t}-dot`;return n&&v.isValidElement(n)?ls(n,{className:de(n.props.className,i)}):v.createElement(_Pe,{prefixCls:t,percent:r})}const yPe=new Tn("antSpinMove",{to:{opacity:1}}),CPe=new Tn("antRotate",{to:{transform:"rotate(405deg)"}}),bPe=e=>{const{componentCls:t,calc:n}=e;return{[`${t}`]:Object.assign(Object.assign({},Oa(e)),{position:"absolute",display:"none",color:e.colorPrimary,fontSize:0,textAlign:"center",verticalAlign:"middle",opacity:0,transition:`transform ${e.motionDurationSlow} ${e.motionEaseInOutCirc}`,"&-spinning":{position:"relative",display:"inline-block",opacity:1},[`${t}-text`]:{fontSize:e.fontSize,paddingTop:n(n(e.dotSize).sub(e.fontSize)).div(2).add(2).equal()},"&-fullscreen":{position:"fixed",width:"100vw",height:"100vh",backgroundColor:e.colorBgMask,zIndex:e.zIndexPopupBase,inset:0,display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center",opacity:0,visibility:"hidden",transition:`all ${e.motionDurationMid}`,"&-show":{opacity:1,visibility:"visible"},[t]:{[`${t}-dot-holder`]:{color:e.colorWhite},[`${t}-text`]:{color:e.colorTextLightSolid}}},"&-nested-loading":{position:"relative",[`> div > ${t}`]:{position:"absolute",top:0,insetInlineStart:0,zIndex:4,display:"block",width:"100%",height:"100%",maxHeight:e.contentHeight,[`${t}-dot`]:{position:"absolute",top:"50%",insetInlineStart:"50%",margin:n(e.dotSize).mul(-1).div(2).equal()},[`${t}-text`]:{position:"absolute",top:"50%",width:"100%",textShadow:`0 1px 2px ${e.colorBgContainer}`},[`&${t}-show-text ${t}-dot`]:{marginTop:n(e.dotSize).div(2).mul(-1).sub(10).equal()},"&-sm":{[`${t}-dot`]:{margin:n(e.dotSizeSM).mul(-1).div(2).equal()},[`${t}-text`]:{paddingTop:n(n(e.dotSizeSM).sub(e.fontSize)).div(2).add(2).equal()},[`&${t}-show-text ${t}-dot`]:{marginTop:n(e.dotSizeSM).div(2).mul(-1).sub(10).equal()}},"&-lg":{[`${t}-dot`]:{margin:n(e.dotSizeLG).mul(-1).div(2).equal()},[`${t}-text`]:{paddingTop:n(n(e.dotSizeLG).sub(e.fontSize)).div(2).add(2).equal()},[`&${t}-show-text ${t}-dot`]:{marginTop:n(e.dotSizeLG).div(2).mul(-1).sub(10).equal()}}},[`${t}-container`]:{position:"relative",transition:`opacity ${e.motionDurationSlow}`,"&::after":{position:"absolute",top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,zIndex:10,width:"100%",height:"100%",background:e.colorBgContainer,opacity:0,transition:`all ${e.motionDurationSlow}`,content:'""',pointerEvents:"none"}},[`${t}-blur`]:{clear:"both",opacity:.5,userSelect:"none",pointerEvents:"none","&::after":{opacity:.4,pointerEvents:"auto"}}},"&-tip":{color:e.spinDotDefault},[`${t}-dot-progress`]:{position:"absolute",top:0,insetInlineStart:0},[`${t}-dot-holder`]:{width:"1em",height:"1em",fontSize:e.dotSize,display:"inline-block",transition:`transform ${e.motionDurationSlow} ease, opacity ${e.motionDurationSlow} ease`,transformOrigin:"50% 50%",lineHeight:1,color:e.colorPrimary,"&-hidden":{transform:"scale(0.3)",opacity:0}},[`${t}-dot-progress`]:{position:"absolute",top:0,insetInlineStart:0},[`${t}-dot`]:{position:"relative",display:"inline-block",width:"1em",height:"1em","&-item":{position:"absolute",display:"block",width:n(e.dotSize).sub(n(e.marginXXS).div(2)).div(2).equal(),height:n(e.dotSize).sub(n(e.marginXXS).div(2)).div(2).equal(),background:"currentColor",borderRadius:"100%",transform:"scale(0.75)",transformOrigin:"50% 50%",opacity:.3,animationName:yPe,animationDuration:"1s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDirection:"alternate","&:nth-child(1)":{top:0,insetInlineStart:0,animationDelay:"0s"},"&:nth-child(2)":{top:0,insetInlineEnd:0,animationDelay:"0.4s"},"&:nth-child(3)":{insetInlineEnd:0,bottom:0,animationDelay:"0.8s"},"&:nth-child(4)":{bottom:0,insetInlineStart:0,animationDelay:"1.2s"}},"&-spin":{transform:"rotate(45deg)",animationName:CPe,animationDuration:"1.2s",animationIterationCount:"infinite",animationTimingFunction:"linear"},"&-circle":{strokeLinecap:"round",transition:["stroke-dashoffset","stroke-dasharray","stroke","stroke-width","opacity"].map(r=>`${r} ${e.motionDurationSlow} ease`).join(","),fillOpacity:0,stroke:"currentcolor"},"&-circle-bg":{stroke:e.colorFillSecondary}},[`&-sm ${t}-dot-holder`]:{fontSize:e.dotSizeSM,i:{width:n(n(e.dotSizeSM).sub(n(e.marginXXS).div(2))).div(2).equal(),height:n(n(e.dotSizeSM).sub(n(e.marginXXS).div(2))).div(2).equal()}},[`&-lg ${t}-dot-holder`]:{fontSize:e.dotSizeLG,i:{width:n(n(e.dotSizeLG).sub(e.marginXXS)).div(2).equal(),height:n(n(e.dotSizeLG).sub(e.marginXXS)).div(2).equal()}},[`&${t}-show-text ${t}-text`]:{display:"block"}})}},TPe=e=>{const{controlHeightLG:t,controlHeight:n}=e;return{contentHeight:400,dotSize:t/2,dotSizeSM:t*.35,dotSizeLG:n}},RPe=yo("Spin",e=>{const t=gr(e,{spinDotDefault:e.colorTextDescription});return[bPe(t)]},TPe),wPe=200,mV=[[30,.05],[70,.03],[96,.01]];function IPe(e,t){const[n,r]=v.useState(0),i=v.useRef(),o=t==="auto";return v.useEffect(()=>(o&&e&&(r(0),i.current=setInterval(()=>{r(a=>{const s=100-a;for(let c=0;c<mV.length;c+=1){const[l,u]=mV[c];if(a<=l)return a+s*u}return a})},wPe)),()=>{clearInterval(i.current)}),[o,e]),o?n:t}var APe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};let XX;function OPe(e,t){return!!e&&!!t&&!isNaN(Number(t))}const JX=e=>{const{prefixCls:t,spinning:n=!0,delay:r=0,className:i,rootClassName:o,size:a="default",tip:s,wrapperClassName:c,style:l,children:u,fullscreen:d=!1,indicator:h,percent:f}=e,g=APe(e,["prefixCls","spinning","delay","className","rootClassName","size","tip","wrapperClassName","style","children","fullscreen","indicator","percent"]),{getPrefixCls:p}=v.useContext(en),m=p("spin",t),[_,E,S]=RPe(m),[C,b]=v.useState(()=>n&&!OPe(n,r)),T=IPe(C,f);v.useEffect(()=>{if(n){const V=xOe(r,()=>{b(!0)});return V(),()=>{var W;(W=V==null?void 0:V.cancel)===null||W===void 0||W.call(V)}}b(!1)},[r,n]);const R=v.useMemo(()=>typeof u<"u"&&!d,[u,d]),{direction:A,spin:O}=v.useContext(en),x=de(m,O==null?void 0:O.className,{[`${m}-sm`]:a==="small",[`${m}-lg`]:a==="large",[`${m}-spinning`]:C,[`${m}-show-text`]:!!s,[`${m}-rtl`]:A==="rtl"},i,!d&&o,E,S),M=de(`${m}-container`,{[`${m}-blur`]:C}),$=Object.assign(Object.assign({},O==null?void 0:O.style),l),U=v.createElement("div",Object.assign({},g,{style:$,className:x,"aria-live":"polite","aria-busy":C}),v.createElement(SPe,{prefixCls:m,indicator:h??XX,percent:T}),s&&(R||d)?v.createElement("div",{className:`${m}-text`},s):null);return _(R?v.createElement("div",Object.assign({},g,{className:de(`${m}-nested-loading`,c,E,S)}),C&&v.createElement("div",{key:"loading"},U),v.createElement("div",{className:M,key:"container"},u)):d?v.createElement("div",{className:de(`${m}-fullscreen`,{[`${m}-fullscreen-show`]:C},o,E,S)},U):U)};JX.setDefaultIndicator=e=>{XX=e};const xPe=JX,xD=le.createContext({});xD.Consumer;var QX=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const NPe=e=>{var{prefixCls:t,className:n,avatar:r,title:i,description:o}=e,a=QX(e,["prefixCls","className","avatar","title","description"]);const{getPrefixCls:s}=v.useContext(en),c=s("list",t),l=de(`${c}-item-meta`,n),u=le.createElement("div",{className:`${c}-item-meta-content`},i&&le.createElement("h4",{className:`${c}-item-meta-title`},i),o&&le.createElement("div",{className:`${c}-item-meta-description`},o));return le.createElement("div",Object.assign({},a,{className:l}),r&&le.createElement("div",{className:`${c}-item-meta-avatar`},r),(i||o)&&u)},PPe=le.forwardRef((e,t)=>{const{prefixCls:n,children:r,actions:i,extra:o,styles:a,className:s,classNames:c,colStyle:l}=e,u=QX(e,["prefixCls","children","actions","extra","styles","className","classNames","colStyle"]),{grid:d,itemLayout:h}=v.useContext(xD),{getPrefixCls:f,list:g}=v.useContext(en),p=R=>{var A,O;return de((O=(A=g==null?void 0:g.item)===null||A===void 0?void 0:A.classNames)===null||O===void 0?void 0:O[R],c==null?void 0:c[R])},m=R=>{var A,O;return Object.assign(Object.assign({},(O=(A=g==null?void 0:g.item)===null||A===void 0?void 0:A.styles)===null||O===void 0?void 0:O[R]),a==null?void 0:a[R])},_=()=>{let R;return v.Children.forEach(r,A=>{typeof A=="string"&&(R=!0)}),R&&v.Children.count(r)>1},E=()=>h==="vertical"?!!o:!_(),S=f("list",n),C=i&&i.length>0&&le.createElement("ul",{className:de(`${S}-item-action`,p("actions")),key:"actions",style:m("actions")},i.map((R,A)=>le.createElement("li",{key:`${S}-item-action-${A}`},R,A!==i.length-1&&le.createElement("em",{className:`${S}-item-action-split`})))),b=d?"div":"li",T=le.createElement(b,Object.assign({},u,d?{}:{ref:t},{className:de(`${S}-item`,{[`${S}-item-no-flex`]:!E()},s)}),h==="vertical"&&o?[le.createElement("div",{className:`${S}-item-main`,key:"content"},r,C),le.createElement("div",{className:de(`${S}-item-extra`,p("extra")),key:"extra",style:m("extra")},o)]:[r,C,ls(o,{key:"extra"})]);return d?le.createElement(ID,{ref:t,flex:1,style:l},T):T}),ZX=PPe;ZX.Meta=NPe;const DPe=ZX,LPe=e=>{const{listBorderedCls:t,componentCls:n,paddingLG:r,margin:i,itemPaddingSM:o,itemPaddingLG:a,marginLG:s,borderRadiusLG:c}=e;return{[`${t}`]:{border:`${ve(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderRadius:c,[`${n}-header,${n}-footer,${n}-item`]:{paddingInline:r},[`${n}-pagination`]:{margin:`${ve(i)} ${ve(s)}`}},[`${t}${n}-sm`]:{[`${n}-item,${n}-header,${n}-footer`]:{padding:o}},[`${t}${n}-lg`]:{[`${n}-item,${n}-header,${n}-footer`]:{padding:a}}}},kPe=e=>{const{componentCls:t,screenSM:n,screenMD:r,marginLG:i,marginSM:o,margin:a}=e;return{[`@media screen and (max-width:${r}px)`]:{[`${t}`]:{[`${t}-item`]:{[`${t}-item-action`]:{marginInlineStart:i}}},[`${t}-vertical`]:{[`${t}-item`]:{[`${t}-item-extra`]:{marginInlineStart:i}}}},[`@media screen and (max-width: ${n}px)`]:{[`${t}`]:{[`${t}-item`]:{flexWrap:"wrap",[`${t}-action`]:{marginInlineStart:o}}},[`${t}-vertical`]:{[`${t}-item`]:{flexWrap:"wrap-reverse",[`${t}-item-main`]:{minWidth:e.contentWidth},[`${t}-item-extra`]:{margin:`auto auto ${ve(a)}`}}}}}},MPe=e=>{const{componentCls:t,antCls:n,controlHeight:r,minHeight:i,paddingSM:o,marginLG:a,padding:s,itemPadding:c,colorPrimary:l,itemPaddingSM:u,itemPaddingLG:d,paddingXS:h,margin:f,colorText:g,colorTextDescription:p,motionDurationSlow:m,lineWidth:_,headerBg:E,footerBg:S,emptyTextPadding:C,metaMarginBottom:b,avatarMarginRight:T,titleMarginBottom:R,descriptionFontSize:A}=e,O={};return["start","center","end"].forEach(x=>{O[`&-align-${x}`]={textAlign:x}}),{[`${t}`]:Object.assign(Object.assign({},Oa(e)),{position:"relative","*":{outline:"none"},[`${t}-header`]:{background:E},[`${t}-footer`]:{background:S},[`${t}-header, ${t}-footer`]:{paddingBlock:o},[`${t}-pagination`]:Object.assign(Object.assign({marginBlockStart:a},O),{[`${n}-pagination-options`]:{textAlign:"start"}}),[`${t}-spin`]:{minHeight:i,textAlign:"center"},[`${t}-items`]:{margin:0,padding:0,listStyle:"none"},[`${t}-item`]:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:c,color:g,[`${t}-item-meta`]:{display:"flex",flex:1,alignItems:"flex-start",maxWidth:"100%",[`${t}-item-meta-avatar`]:{marginInlineEnd:T},[`${t}-item-meta-content`]:{flex:"1 0",width:0,color:g},[`${t}-item-meta-title`]:{margin:`0 0 ${ve(e.marginXXS)} 0`,color:g,fontSize:e.fontSize,lineHeight:e.lineHeight,"> a":{color:g,transition:`all ${m}`,"&:hover":{color:l}}},[`${t}-item-meta-description`]:{color:p,fontSize:A,lineHeight:e.lineHeight}},[`${t}-item-action`]:{flex:"0 0 auto",marginInlineStart:e.marginXXL,padding:0,fontSize:0,listStyle:"none","& > li":{position:"relative",display:"inline-block",padding:`0 ${ve(h)}`,color:p,fontSize:e.fontSize,lineHeight:e.lineHeight,textAlign:"center","&:first-child":{paddingInlineStart:0}},[`${t}-item-action-split`]:{position:"absolute",insetBlockStart:"50%",insetInlineEnd:0,width:_,height:e.calc(e.fontHeight).sub(e.calc(e.marginXXS).mul(2)).equal(),transform:"translateY(-50%)",backgroundColor:e.colorSplit}}},[`${t}-empty`]:{padding:`${ve(s)} 0`,color:p,fontSize:e.fontSizeSM,textAlign:"center"},[`${t}-empty-text`]:{padding:C,color:e.colorTextDisabled,fontSize:e.fontSize,textAlign:"center"},[`${t}-item-no-flex`]:{display:"block"}}),[`${t}-grid ${n}-col > ${t}-item`]:{display:"block",maxWidth:"100%",marginBlockEnd:f,paddingBlock:0,borderBlockEnd:"none"},[`${t}-vertical ${t}-item`]:{alignItems:"initial",[`${t}-item-main`]:{display:"block",flex:1},[`${t}-item-extra`]:{marginInlineStart:a},[`${t}-item-meta`]:{marginBlockEnd:b,[`${t}-item-meta-title`]:{marginBlockStart:0,marginBlockEnd:R,color:g,fontSize:e.fontSizeLG,lineHeight:e.lineHeightLG}},[`${t}-item-action`]:{marginBlockStart:s,marginInlineStart:"auto","> li":{padding:`0 ${ve(s)}`,"&:first-child":{paddingInlineStart:0}}}},[`${t}-split ${t}-item`]:{borderBlockEnd:`${ve(e.lineWidth)} ${e.lineType} ${e.colorSplit}`,"&:last-child":{borderBlockEnd:"none"}},[`${t}-split ${t}-header`]:{borderBlockEnd:`${ve(e.lineWidth)} ${e.lineType} ${e.colorSplit}`},[`${t}-split${t}-empty ${t}-footer`]:{borderTop:`${ve(e.lineWidth)} ${e.lineType} ${e.colorSplit}`},[`${t}-loading ${t}-spin-nested-loading`]:{minHeight:r},[`${t}-split${t}-something-after-last-item ${n}-spin-container > ${t}-items > ${t}-item:last-child`]:{borderBlockEnd:`${ve(e.lineWidth)} ${e.lineType} ${e.colorSplit}`},[`${t}-lg ${t}-item`]:{padding:d},[`${t}-sm ${t}-item`]:{padding:u},[`${t}:not(${t}-vertical)`]:{[`${t}-item-no-flex`]:{[`${t}-item-action`]:{float:"right"}}}}},FPe=e=>({contentWidth:220,itemPadding:`${ve(e.paddingContentVertical)} 0`,itemPaddingSM:`${ve(e.paddingContentVerticalSM)} ${ve(e.paddingContentHorizontal)}`,itemPaddingLG:`${ve(e.paddingContentVerticalLG)} ${ve(e.paddingContentHorizontalLG)}`,headerBg:"transparent",footerBg:"transparent",emptyTextPadding:e.padding,metaMarginBottom:e.padding,avatarMarginRight:e.padding,titleMarginBottom:e.paddingSM,descriptionFontSize:e.fontSize}),UPe=yo("List",e=>{const t=gr(e,{listBorderedCls:`${e.componentCls}-bordered`,minHeight:e.controlHeightLG});return[MPe(t),LPe(t),kPe(t)]},FPe);var BPe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function sx(e){var t,{pagination:n=!1,prefixCls:r,bordered:i=!1,split:o=!0,className:a,rootClassName:s,style:c,children:l,itemLayout:u,loadMore:d,grid:h,dataSource:f=[],size:g,header:p,footer:m,loading:_=!1,rowKey:E,renderItem:S,locale:C}=e,b=BPe(e,["pagination","prefixCls","bordered","split","className","rootClassName","style","children","itemLayout","loadMore","grid","dataSource","size","header","footer","loading","rowKey","renderItem","locale"]);const T=n&&typeof n=="object"?n:{},[R,A]=v.useState(T.defaultCurrent||1),[O,x]=v.useState(T.defaultPageSize||10),{getPrefixCls:M,renderEmpty:$,direction:U,list:V}=v.useContext(en),W={current:1,total:0},z=re=>(Re,we)=>{var xe;A(Re),x(we),n&&n[re]&&((xe=n==null?void 0:n[re])===null||xe===void 0||xe.call(n,Re,we))},L=z("onChange"),D=z("onShowSizeChange"),j=(re,Re)=>{if(!S)return null;let we;return typeof E=="function"?we=E(re):E?we=re[E]:we=re.key,we||(we=`list-item-${Re}`),v.createElement(v.Fragment,{key:we},S(re,Re))},F=()=>!!(d||n||m),y=M("list",r),[I,N,B]=UPe(y);let K=_;typeof K=="boolean"&&(K={spinning:K});const X=K&&K.spinning,ee=yl(g);let ne="";switch(ee){case"large":ne="lg";break;case"small":ne="sm";break}const fe=de(y,{[`${y}-vertical`]:u==="vertical",[`${y}-${ne}`]:ne,[`${y}-split`]:o,[`${y}-bordered`]:i,[`${y}-loading`]:X,[`${y}-grid`]:!!h,[`${y}-something-after-last-item`]:F(),[`${y}-rtl`]:U==="rtl"},V==null?void 0:V.className,a,s,N,B),ae=WNe(W,{total:f.length,current:R,pageSize:O},n||{}),oe=Math.ceil(ae.total/ae.pageSize);ae.current>oe&&(ae.current=oe);const he=n?v.createElement("div",{className:de(`${y}-pagination`,`${y}-pagination-align-${(t=ae==null?void 0:ae.align)!==null&&t!==void 0?t:"end"}`)},v.createElement(vPe,Object.assign({},ae,{onChange:L,onShowSizeChange:D}))):null;let me=Me(f);n&&f.length>(ae.current-1)*ae.pageSize&&(me=Me(f).splice((ae.current-1)*ae.pageSize,ae.pageSize));const ie=Object.keys(h||{}).some(re=>["xs","sm","md","lg","xl","xxl"].includes(re)),te=rX(ie),ge=v.useMemo(()=>{for(let re=0;re<Vd.length;re+=1){const Re=Vd[re];if(te[Re])return Re}},[te]),pe=v.useMemo(()=>{if(!h)return;const re=ge&&h[ge]?h[ge]:h.column;if(re)return{width:`${100/re}%`,maxWidth:`${100/re}%`}},[JSON.stringify(h),ge]);let be=X&&v.createElement("div",{style:{minHeight:53}});if(me.length>0){const re=me.map((Re,we)=>j(Re,we));be=h?v.createElement(OX,{gutter:h.gutter},v.Children.map(re,Re=>v.createElement("div",{key:Re==null?void 0:Re.key,style:pe},Re))):v.createElement("ul",{className:`${y}-items`},re)}else!l&&!X&&(be=v.createElement("div",{className:`${y}-empty-text`},C&&C.emptyText||($==null?void 0:$("List"))||v.createElement(XY,{componentName:"List"})));const Se=ae.position||"bottom",ue=v.useMemo(()=>({grid:h,itemLayout:u}),[JSON.stringify(h),u]);return I(v.createElement(xD.Provider,{value:ue},v.createElement("div",Object.assign({style:Object.assign(Object.assign({},V==null?void 0:V.style),c),className:fe},b),(Se==="top"||Se==="both")&&he,p&&v.createElement("div",{className:`${y}-header`},p),v.createElement(xPe,Object.assign({},K),be,l),m&&v.createElement("div",{className:`${y}-footer`},m),d||(Se==="bottom"||Se==="both")&&he)))}sx.Item=DPe;let Ps=null,U_=e=>e(),ay=[],gg={};function gV(){const{getContainer:e,rtl:t,maxCount:n,top:r,bottom:i}=gg,o=(e==null?void 0:e())||document.body;return{getContainer:()=>o,rtl:t,maxCount:n,top:r,bottom:i}}const $Pe=le.forwardRef((e,t)=>{const{notificationConfig:n,sync:r}=e,{getPrefixCls:i}=v.useContext(en),o=gg.prefixCls||i("notification"),a=v.useContext(GTe),[s,c]=DY(Object.assign(Object.assign(Object.assign({},n),{prefixCls:o}),a.notification));return le.useEffect(r,[]),le.useImperativeHandle(t,()=>{const l=Object.assign({},s);return Object.keys(l).forEach(u=>{l[u]=function(){return r(),s[u].apply(s,arguments)}}),{instance:l,sync:r}}),c}),VPe=le.forwardRef((e,t)=>{const[n,r]=le.useState(gV),i=()=>{r(gV)};le.useEffect(i,[]);const o=Uye(),a=o.getRootPrefixCls(),s=o.getIconPrefixCls(),c=o.getTheme(),l=le.createElement($Pe,{ref:t,sync:i,notificationConfig:n});return le.createElement(th,{prefixCls:a,iconPrefixCls:s,theme:c},o.holderRender?o.holderRender(l):l)});function ND(){if(!Ps){const e=document.createDocumentFragment(),t={fragment:e};Ps=t,U_(()=>{Qq(le.createElement(VPe,{ref:n=>{const{instance:r,sync:i}=n||{};Promise.resolve().then(()=>{!t.instance&&r&&(t.instance=r,t.sync=i,ND())})}}),e)});return}Ps.instance&&(ay.forEach(e=>{switch(e.type){case"open":{U_(()=>{Ps.instance.open(Object.assign(Object.assign({},gg),e.config))});break}case"destroy":U_(()=>{Ps==null||Ps.instance.destroy(e.key)});break}}),ay=[])}function jPe(e){gg=Object.assign(Object.assign({},gg),e),U_(()=>{var t;(t=Ps==null?void 0:Ps.sync)===null||t===void 0||t.call(Ps)})}function eJ(e){ay.push({type:"open",config:e}),ND()}const HPe=e=>{ay.push({type:"destroy",key:e}),ND()},zPe=["success","info","warning","error"],WPe={open:eJ,destroy:HPe,config:jPe,useNotification:WTe,_InternalPanelDoNotUseOrYouWillBeFired:MTe},tJ=WPe;zPe.forEach(e=>{tJ[e]=t=>eJ(Object.assign(Object.assign({},t),{type:e}))});const GPe=tJ;var KPe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const qPe={border:0,background:"transparent",padding:0,lineHeight:"inherit",display:"inline-block"},YPe=v.forwardRef((e,t)=>{const n=u=>{const{keyCode:d}=u;d===Oe.ENTER&&u.preventDefault()},r=u=>{const{keyCode:d}=u,{onClick:h}=e;d===Oe.ENTER&&h&&h()},{style:i,noStyle:o,disabled:a,tabIndex:s=0}=e,c=KPe(e,["style","noStyle","disabled","tabIndex"]);let l={};return o||(l=Object.assign({},qPe)),a&&(l.pointerEvents="none"),l=Object.assign(Object.assign({},l),i),v.createElement("div",Object.assign({role:"button",tabIndex:s,ref:t},c,{onKeyDown:n,onKeyUp:r,style:l}))}),nJ=YPe;var XPe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"};const JPe=XPe;var QPe=function(t,n){return v.createElement(si,Ee({},t,{ref:n,icon:JPe}))},ZPe=v.forwardRef(QPe);const eDe=ZPe;var tDe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 170h-60c-4.4 0-8 3.6-8 8v518H310v-73c0-6.7-7.8-10.5-13-6.3l-141.9 112a8 8 0 000 12.6l141.9 112c5.3 4.2 13 .4 13-6.3v-75h498c35.3 0 64-28.7 64-64V178c0-4.4-3.6-8-8-8z"}}]},name:"enter",theme:"outlined"};const nDe=tDe;var rDe=function(t,n){return v.createElement(si,Ee({},t,{ref:n,icon:nDe}))},iDe=v.forwardRef(rDe);const oDe=iDe,aDe=(e,t,n,r)=>{const{titleMarginBottom:i,fontWeightStrong:o}=r;return{marginBottom:i,color:n,fontWeight:o,fontSize:e,lineHeight:t}},sDe=e=>{const t=[1,2,3,4,5],n={};return t.forEach(r=>{n[`
      h${r}&,
      div&-h${r},
      div&-h${r} > textarea,
      h${r}
    `]=aDe(e[`fontSizeHeading${r}`],e[`lineHeightHeading${r}`],e.colorTextHeading,e)}),n},cDe=e=>{const{componentCls:t}=e;return{"a&, a":Object.assign(Object.assign({},Sq(e)),{textDecoration:e.linkDecoration,"&:active, &:hover":{textDecoration:e.linkHoverDecoration},[`&[disabled], &${t}-disabled`]:{color:e.colorTextDisabled,cursor:"not-allowed","&:active, &:hover":{color:e.colorTextDisabled},"&:active":{pointerEvents:"none"}}})}},lDe=e=>({code:{margin:"0 0.2em",paddingInline:"0.4em",paddingBlock:"0.2em 0.1em",fontSize:"85%",fontFamily:e.fontFamilyCode,background:"rgba(150, 150, 150, 0.1)",border:"1px solid rgba(100, 100, 100, 0.2)",borderRadius:3},kbd:{margin:"0 0.2em",paddingInline:"0.4em",paddingBlock:"0.15em 0.1em",fontSize:"90%",fontFamily:e.fontFamilyCode,background:"rgba(150, 150, 150, 0.06)",border:"1px solid rgba(100, 100, 100, 0.2)",borderBottomWidth:2,borderRadius:3},mark:{padding:0,backgroundColor:_Se[2]},"u, ins":{textDecoration:"underline",textDecorationSkipInk:"auto"},"s, del":{textDecoration:"line-through"},strong:{fontWeight:600},"ul, ol":{marginInline:0,marginBlock:"0 1em",padding:0,li:{marginInline:"20px 0",marginBlock:0,paddingInline:"4px 0",paddingBlock:0}},ul:{listStyleType:"circle",ul:{listStyleType:"disc"}},ol:{listStyleType:"decimal"},"pre, blockquote":{margin:"1em 0"},pre:{padding:"0.4em 0.6em",whiteSpace:"pre-wrap",wordWrap:"break-word",background:"rgba(150, 150, 150, 0.1)",border:"1px solid rgba(100, 100, 100, 0.2)",borderRadius:3,fontFamily:e.fontFamilyCode,code:{display:"inline",margin:0,padding:0,fontSize:"inherit",fontFamily:"inherit",background:"transparent",border:0}},blockquote:{paddingInline:"0.6em 0",paddingBlock:0,borderInlineStart:"4px solid rgba(100, 100, 100, 0.2)",opacity:.85}}),uDe=e=>{const{componentCls:t,paddingSM:n}=e,r=n;return{"&-edit-content":{position:"relative","div&":{insetInlineStart:e.calc(e.paddingSM).mul(-1).equal(),marginTop:e.calc(r).mul(-1).equal(),marginBottom:`calc(1em - ${ve(r)})`},[`${t}-edit-content-confirm`]:{position:"absolute",insetInlineEnd:e.calc(e.marginXS).add(2).equal(),insetBlockEnd:e.marginXS,color:e.colorTextDescription,fontWeight:"normal",fontSize:e.fontSize,fontStyle:"normal",pointerEvents:"none"},textarea:{margin:"0!important",MozTransition:"none",height:"1em"}}}},dDe=e=>({[`${e.componentCls}-copy-success`]:{"\n    &,\n    &:hover,\n    &:focus":{color:e.colorSuccess}},[`${e.componentCls}-copy-icon-only`]:{marginInlineStart:0}}),hDe=()=>({"\n  a&-ellipsis,\n  span&-ellipsis\n  ":{display:"inline-block",maxWidth:"100%"},"&-single-line":{whiteSpace:"nowrap"},"&-ellipsis-single-line":{overflow:"hidden",textOverflow:"ellipsis","a&, span&":{verticalAlign:"bottom"},"> code":{paddingBlock:0,maxWidth:"calc(100% - 1.2em)",display:"inline-block",overflow:"hidden",textOverflow:"ellipsis",verticalAlign:"bottom",boxSizing:"content-box"}},"&-ellipsis-multiple-line":{display:"-webkit-box",overflow:"hidden",WebkitLineClamp:3,WebkitBoxOrient:"vertical"}}),fDe=e=>{const{componentCls:t,titleMarginTop:n}=e;return{[t]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:e.colorText,wordBreak:"break-word",lineHeight:e.lineHeight,[`&${t}-secondary`]:{color:e.colorTextDescription},[`&${t}-success`]:{color:e.colorSuccess},[`&${t}-warning`]:{color:e.colorWarning},[`&${t}-danger`]:{color:e.colorError,"a&:active, a&:focus":{color:e.colorErrorActive},"a&:hover":{color:e.colorErrorHover}},[`&${t}-disabled`]:{color:e.colorTextDisabled,cursor:"not-allowed",userSelect:"none"},"\n        div&,\n        p\n      ":{marginBottom:"1em"}},sDe(e)),{[`
      & + h1${t},
      & + h2${t},
      & + h3${t},
      & + h4${t},
      & + h5${t}
      `]:{marginTop:n},"\n      div,\n      ul,\n      li,\n      p,\n      h1,\n      h2,\n      h3,\n      h4,\n      h5":{"\n        + h1,\n        + h2,\n        + h3,\n        + h4,\n        + h5\n        ":{marginTop:n}}}),lDe(e)),cDe(e)),{[`
        ${t}-expand,
        ${t}-collapse,
        ${t}-edit,
        ${t}-copy
      `]:Object.assign(Object.assign({},Sq(e)),{marginInlineStart:e.marginXXS})}),uDe(e)),dDe(e)),hDe()),{"&-rtl":{direction:"rtl"}})}},pDe=()=>({titleMarginTop:"1.2em",titleMarginBottom:"0.5em"}),rJ=yo("Typography",e=>[fDe(e)],pDe),mDe=e=>{const{prefixCls:t,"aria-label":n,className:r,style:i,direction:o,maxLength:a,autoSize:s=!0,value:c,onSave:l,onCancel:u,onEnd:d,component:h,enterIcon:f=v.createElement(oDe,null)}=e,g=v.useRef(null),p=v.useRef(!1),m=v.useRef(),[_,E]=v.useState(c);v.useEffect(()=>{E(c)},[c]),v.useEffect(()=>{if(g.current&&g.current.resizableTextArea){const{textArea:W}=g.current.resizableTextArea;W.focus();const{length:z}=W.value;W.setSelectionRange(z,z)}},[]);const S=W=>{let{target:z}=W;E(z.value.replace(/[\n\r]/g,""))},C=()=>{p.current=!0},b=()=>{p.current=!1},T=W=>{let{keyCode:z}=W;p.current||(m.current=z)},R=()=>{l(_.trim())},A=W=>{let{keyCode:z,ctrlKey:L,altKey:D,metaKey:j,shiftKey:F}=W;m.current===z&&!p.current&&!L&&!D&&!j&&!F&&(z===Oe.ENTER?(R(),d==null||d()):z===Oe.ESC&&u())},O=()=>{R()},x=h?`${t}-${h}`:"",[M,$,U]=rJ(t),V=de(t,`${t}-edit-content`,{[`${t}-rtl`]:o==="rtl"},r,x,$,U);return M(v.createElement("div",{className:V,style:i},v.createElement(LX,{ref:g,maxLength:a,value:_,onChange:S,onKeyDown:T,onKeyUp:A,onCompositionStart:C,onCompositionEnd:b,onBlur:O,"aria-label":n,rows:1,autoSize:s}),f!==null?ls(f,{className:`${t}-edit-content-confirm`}):null))},gDe=mDe;var vDe=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,n=[],r=0;r<e.rangeCount;r++)n.push(e.getRangeAt(r));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null;break}return e.removeAllRanges(),function(){e.type==="Caret"&&e.removeAllRanges(),e.rangeCount||n.forEach(function(i){e.addRange(i)}),t&&t.focus()}},EDe=vDe,vV={"text/plain":"Text","text/html":"Url",default:"Text"},_De="Copy to clipboard: #{key}, Enter";function SDe(e){var t=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}function yDe(e,t){var n,r,i,o,a,s,c=!1;t||(t={}),n=t.debug||!1;try{i=EDe(),o=document.createRange(),a=document.getSelection(),s=document.createElement("span"),s.textContent=e,s.ariaHidden="true",s.style.all="unset",s.style.position="fixed",s.style.top=0,s.style.clip="rect(0, 0, 0, 0)",s.style.whiteSpace="pre",s.style.webkitUserSelect="text",s.style.MozUserSelect="text",s.style.msUserSelect="text",s.style.userSelect="text",s.addEventListener("copy",function(u){if(u.stopPropagation(),t.format)if(u.preventDefault(),typeof u.clipboardData>"u"){n&&console.warn("unable to use e.clipboardData"),n&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var d=vV[t.format]||vV.default;window.clipboardData.setData(d,e)}else u.clipboardData.clearData(),u.clipboardData.setData(t.format,e);t.onCopy&&(u.preventDefault(),t.onCopy(u.clipboardData))}),document.body.appendChild(s),o.selectNodeContents(s),a.addRange(o);var l=document.execCommand("copy");if(!l)throw new Error("copy command was unsuccessful");c=!0}catch(u){n&&console.error("unable to copy using execCommand: ",u),n&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),c=!0}catch(d){n&&console.error("unable to copy using clipboardData: ",d),n&&console.error("falling back to prompt"),r=SDe("message"in t?t.message:_De),window.prompt(r,e)}}finally{a&&(typeof a.removeRange=="function"?a.removeRange(o):a.removeAllRanges()),s&&document.body.removeChild(s),i()}return c}var CDe=yDe;const bDe=jd(CDe);var TDe=globalThis&&globalThis.__awaiter||function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function s(u){try{l(r.next(u))}catch(d){a(d)}}function c(u){try{l(r.throw(u))}catch(d){a(d)}}function l(u){u.done?o(u.value):i(u.value).then(s,c)}l((r=r.apply(e,t||[])).next())})};const RDe=e=>{let{copyConfig:t,children:n}=e;const[r,i]=v.useState(!1),[o,a]=v.useState(!1),s=v.useRef(null),c=()=>{s.current&&clearTimeout(s.current)},l={};t.format&&(l.format=t.format),v.useEffect(()=>c,[]);const u=Pi(d=>TDe(void 0,void 0,void 0,function*(){var h;d==null||d.preventDefault(),d==null||d.stopPropagation(),a(!0);try{const f=typeof t.text=="function"?yield t.text():t.text;bDe(f||String(n)||"",l),a(!1),i(!0),c(),s.current=setTimeout(()=>{i(!1)},3e3),(h=t.onCopy)===null||h===void 0||h.call(t,d)}catch(f){throw a(!1),f}}));return{copied:r,copyLoading:o,onClick:u}},wDe=RDe;function tw(e,t){return v.useMemo(()=>{const n=!!e;return[n,Object.assign(Object.assign({},t),n&&typeof e=="object"?e:null)]},[e])}const IDe=(e,t)=>{const n=v.useRef(!1);v.useEffect(()=>{n.current?e():n.current=!0},t)},ADe=IDe,ODe=e=>{const t=v.useRef();return v.useEffect(()=>{t.current=e}),t.current},xDe=ODe;var NDe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const PDe=v.forwardRef((e,t)=>{const{prefixCls:n,component:r="article",className:i,rootClassName:o,setContentRef:a,children:s,direction:c,style:l}=e,u=NDe(e,["prefixCls","component","className","rootClassName","setContentRef","children","direction","style"]),{getPrefixCls:d,direction:h,typography:f}=v.useContext(en),g=c??h;let p=t;a&&(p=gs(t,a));const m=d("typography",n),[_,E,S]=rJ(m),C=de(m,f==null?void 0:f.className,{[`${m}-rtl`]:g==="rtl"},i,o,E,S),b=Object.assign(Object.assign({},f==null?void 0:f.style),l);return _(v.createElement(r,Object.assign({className:C,style:b,ref:p},u),s))}),iJ=PDe;var DDe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"}}]},name:"copy",theme:"outlined"};const LDe=DDe;var kDe=function(t,n){return v.createElement(si,Ee({},t,{ref:n,icon:LDe}))},MDe=v.forwardRef(kDe);const FDe=MDe;function EV(e){return e===!1?[!1,!1]:Array.isArray(e)?e:[e]}function PE(e,t,n){return e===!0||e===void 0?t:e||n&&t}const UDe=e=>{const{prefixCls:t,copied:n,locale:r,iconOnly:i,tooltips:o,icon:a,loading:s,tabIndex:c,onCopy:l}=e,u=EV(o),d=EV(a),{copied:h,copy:f}=r??{},g=n?PE(u[1],h):PE(u[0],f),m=typeof g=="string"?g:n?h:f;return v.createElement(qg,{key:"copy",title:g},v.createElement(nJ,{className:de(`${t}-copy`,{[`${t}-copy-success`]:n,[`${t}-copy-icon-only`]:i}),onClick:l,"aria-label":m,tabIndex:c},n?PE(d[1],v.createElement(ZY,null),!0):PE(d[0],s?v.createElement(VC,null):v.createElement(FDe,null),!0)))},BDe=UDe,DE=v.forwardRef((e,t)=>{let{style:n,children:r}=e;const i=v.useRef(null);return v.useImperativeHandle(t,()=>({isExceed:()=>{const o=i.current;return o.scrollHeight>o.clientHeight},getHeight:()=>i.current.clientHeight})),v.createElement("span",{"aria-hidden":!0,ref:i,style:Object.assign({position:"fixed",display:"block",left:0,top:0,pointerEvents:"none",backgroundColor:"rgba(255, 0, 0, 0.65)"},n)},r)});function oJ(e){const t=typeof e;return t==="string"||t==="number"}function $De(e){let t=0;return e.forEach(n=>{oJ(n)?t+=String(n).length:t+=1}),t}function _V(e,t){let n=0;const r=[];for(let i=0;i<e.length;i+=1){if(n===t)return r;const o=e[i],s=oJ(o)?String(o).length:1,c=n+s;if(c>t){const l=t-n;return r.push(String(o).slice(0,l)),r}r.push(o),n=c}return e}const nw=0,rw=1,iw=2,SV=3,LE={display:"-webkit-box",overflow:"hidden",WebkitBoxOrient:"vertical"};function VDe(e){const{enableMeasure:t,width:n,text:r,children:i,rows:o,expanded:a,miscDeps:s,onEllipsis:c}=e,l=v.useMemo(()=>zs(r),[r]),u=v.useMemo(()=>$De(l),[r]),d=v.useMemo(()=>i(l,!1),[r]),[h,f]=v.useState(null),g=v.useRef(null),p=v.useRef(null),m=v.useRef(null),_=v.useRef(null),[E,S]=v.useState(!1),[C,b]=v.useState(nw),[T,R]=v.useState(0);Mn(()=>{b(t&&n&&u?rw:nw)},[n,r,o,t,l]),Mn(()=>{var M,$,U,V;if(C===rw){const W=!!(!((M=p.current)===null||M===void 0)&&M.isExceed());b(W?iw:SV),f(W?[0,u]:null),S(W);const z=(($=p.current)===null||$===void 0?void 0:$.getHeight())||0,L=o===1?0:((U=m.current)===null||U===void 0?void 0:U.getHeight())||0,D=((V=_.current)===null||V===void 0?void 0:V.getHeight())||0,j=L+D,F=Math.max(z,j);R(F+1),c(W)}},[C]);const A=h?Math.ceil((h[0]+h[1])/2):0;Mn(()=>{var M;const[$,U]=h||[0,0];if($!==U){const W=(((M=g.current)===null||M===void 0?void 0:M.getHeight())||0)>T;let z=A;U-$===1&&(z=W?$:U),f(W?[$,z]:[z,U])}},[h,A]);const O=v.useMemo(()=>{if(C!==iw||!h||h[0]!==h[1]){const M=i(l,!1);return C!==SV&&C!==nw?v.createElement("span",{style:Object.assign(Object.assign({},LE),{WebkitLineClamp:o})},M):M}return i(a?l:_V(l,h[0]),E)},[a,C,h,l].concat(Me(s))),x={width:n,whiteSpace:"normal",margin:0,padding:0};return v.createElement(v.Fragment,null,O,C===rw&&v.createElement(v.Fragment,null,v.createElement(DE,{style:Object.assign(Object.assign(Object.assign({},x),LE),{WebkitLineClamp:o}),ref:p},d),v.createElement(DE,{style:Object.assign(Object.assign(Object.assign({},x),LE),{WebkitLineClamp:o-1}),ref:m},d),v.createElement(DE,{style:Object.assign(Object.assign(Object.assign({},x),LE),{WebkitLineClamp:1}),ref:_},i([],!0))),C===iw&&h&&h[0]!==h[1]&&v.createElement(DE,{style:Object.assign(Object.assign({},x),{top:400}),ref:g},i(_V(l,A),!0)))}const jDe=e=>{let{enableEllipsis:t,isEllipsis:n,children:r,tooltipProps:i}=e;return!(i!=null&&i.title)||!t?r:v.createElement(qg,Object.assign({open:n?void 0:!1},i),r)},HDe=jDe;var zDe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function WDe(e,t){let{mark:n,code:r,underline:i,delete:o,strong:a,keyboard:s,italic:c}=e,l=t;function u(d,h){h&&(l=v.createElement(d,{},l))}return u("strong",a),u("u",i),u("del",o),u("code",r),u("mark",n),u("kbd",s),u("i",c),l}const GDe="...",KDe=v.forwardRef((e,t)=>{var n,r,i;const{prefixCls:o,className:a,style:s,type:c,disabled:l,children:u,ellipsis:d,editable:h,copyable:f,component:g,title:p}=e,m=zDe(e,["prefixCls","className","style","type","disabled","children","ellipsis","editable","copyable","component","title"]),{getPrefixCls:_,direction:E}=v.useContext(en),[S]=kC("Text"),C=v.useRef(null),b=v.useRef(null),T=_("typography",o),R=So(m,["mark","code","delete","underline","strong","keyboard","italic"]),[A,O]=tw(h),[x,M]=go(!1,{value:O.editing}),{triggerType:$=["icon"]}=O,U=ke=>{var Ze;ke&&((Ze=O.onStart)===null||Ze===void 0||Ze.call(O)),M(ke)},V=xDe(x);ADe(()=>{var ke;!x&&V&&((ke=b.current)===null||ke===void 0||ke.focus())},[x]);const W=ke=>{ke==null||ke.preventDefault(),U(!0)},z=ke=>{var Ze;(Ze=O.onChange)===null||Ze===void 0||Ze.call(O,ke),U(!1)},L=()=>{var ke;(ke=O.onCancel)===null||ke===void 0||ke.call(O),U(!1)},[D,j]=tw(f),{copied:F,copyLoading:y,onClick:I}=wDe({copyConfig:j,children:u}),[N,B]=v.useState(!1),[K,X]=v.useState(!1),[ee,ne]=v.useState(!1),[fe,ae]=v.useState(!1),[oe,he]=v.useState(!0),[me,ie]=tw(d,{expandable:!1,symbol:ke=>ke?S==null?void 0:S.collapse:S==null?void 0:S.expand}),[te,ge]=go(ie.defaultExpanded||!1,{value:ie.expanded}),pe=me&&(!te||ie.expandable==="collapsible"),{rows:be=1}=ie,Se=v.useMemo(()=>pe&&(ie.suffix!==void 0||ie.onEllipsis||ie.expandable||A||D),[pe,ie,A,D]);Mn(()=>{me&&!Se&&(B(t6("webkitLineClamp")),X(t6("textOverflow")))},[Se,me]);const[ue,re]=v.useState(pe),Re=v.useMemo(()=>Se?!1:be===1?K:N,[Se,K,N]);Mn(()=>{re(Re&&pe)},[Re,pe]);const we=pe&&(ue?fe:ee),xe=pe&&be===1&&ue,We=pe&&be>1&&ue,Ve=(ke,Ze)=>{var Mt;ge(Ze.expanded),(Mt=ie.onExpand)===null||Mt===void 0||Mt.call(ie,ke,Ze)},[Rt,xt]=v.useState(0),Xe=ke=>{let{offsetWidth:Ze}=ke;xt(Ze)},Ge=ke=>{var Ze;ne(ke),ee!==ke&&((Ze=ie.onEllipsis)===null||Ze===void 0||Ze.call(ie,ke))};v.useEffect(()=>{const ke=C.current;if(me&&ue&&ke){const Ze=We?ke.offsetHeight<ke.scrollHeight:ke.offsetWidth<ke.scrollWidth;fe!==Ze&&ae(Ze)}},[me,ue,u,We,oe,Rt]),v.useEffect(()=>{const ke=C.current;if(typeof IntersectionObserver>"u"||!ke||!ue||!pe)return;const Ze=new IntersectionObserver(()=>{he(!!ke.offsetParent)});return Ze.observe(ke),()=>{Ze.disconnect()}},[ue,pe]);let Je={};ie.tooltip===!0?Je={title:(n=O.text)!==null&&n!==void 0?n:u}:v.isValidElement(ie.tooltip)?Je={title:ie.tooltip}:typeof ie.tooltip=="object"?Je=Object.assign({title:(r=O.text)!==null&&r!==void 0?r:u},ie.tooltip):Je={title:ie.tooltip};const st=v.useMemo(()=>{const ke=Ze=>["string","number"].includes(typeof Ze);if(!(!me||ue)){if(ke(O.text))return O.text;if(ke(u))return u;if(ke(p))return p;if(ke(Je.title))return Je.title}},[me,ue,p,Je.title,we]);if(x)return v.createElement(gDe,{value:(i=O.text)!==null&&i!==void 0?i:typeof u=="string"?u:"",onSave:z,onCancel:L,onEnd:O.onEnd,prefixCls:T,className:a,style:s,direction:E,component:g,maxLength:O.maxLength,autoSize:O.autoSize,enterIcon:O.enterIcon});const At=()=>{const{expandable:ke,symbol:Ze}=ie;return!ke||te&&ke!=="collapsible"?null:v.createElement("a",{key:"expand",className:`${T}-${te?"collapse":"expand"}`,onClick:Mt=>Ve(Mt,{expanded:!te}),"aria-label":te?S.collapse:S==null?void 0:S.expand},typeof Ze=="function"?Ze(te):Ze)},Ot=()=>{if(!A)return;const{icon:ke,tooltip:Ze,tabIndex:Mt}=O,En=zs(Ze)[0]||(S==null?void 0:S.edit),nr=typeof En=="string"?En:"";return $.includes("icon")?v.createElement(qg,{key:"edit",title:Ze===!1?"":En},v.createElement(nJ,{ref:b,className:`${T}-edit`,onClick:W,"aria-label":nr,tabIndex:Mt},ke||v.createElement(eDe,{role:"button"}))):null},dn=()=>D?v.createElement(BDe,Object.assign({key:"copy"},j,{prefixCls:T,copied:F,locale:S,onCopy:I,loading:y,iconOnly:u==null})):null,an=ke=>[ke&&At(),Ot(),dn()],on=ke=>[ke&&!te&&v.createElement("span",{"aria-hidden":!0,key:"ellipsis"},GDe),ie.suffix,an(ke)];return v.createElement(Sl,{onResize:Xe,disabled:!pe},ke=>v.createElement(HDe,{tooltipProps:Je,enableEllipsis:pe,isEllipsis:we},v.createElement(iJ,Object.assign({className:de({[`${T}-${c}`]:c,[`${T}-disabled`]:l,[`${T}-ellipsis`]:me,[`${T}-single-line`]:pe&&be===1&&!te,[`${T}-ellipsis-single-line`]:xe,[`${T}-ellipsis-multiple-line`]:We},a),prefixCls:o,style:Object.assign(Object.assign({},s),{WebkitLineClamp:We?be:void 0}),component:g,ref:gs(ke,C,t),direction:E,onClick:$.includes("text")?W:void 0,"aria-label":st==null?void 0:st.toString(),title:p},R),v.createElement(VDe,{enableMeasure:pe&&!ue,text:u,rows:be,width:Rt,onEllipsis:Ge,expanded:te,miscDeps:[F,te,y,A,D]},(Ze,Mt)=>WDe(e,v.createElement(v.Fragment,null,Ze.length>0&&Mt&&!te&&st?v.createElement("span",{key:"show-content","aria-hidden":!0},Ze):Ze,on(Mt)))))))}),tb=KDe;var qDe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const YDe=v.forwardRef((e,t)=>{var{ellipsis:n,rel:r}=e,i=qDe(e,["ellipsis","rel"]);const o=Object.assign(Object.assign({},i),{rel:r===void 0&&i.target==="_blank"?"noopener noreferrer":r});return delete o.navigate,v.createElement(tb,Object.assign({},o,{ref:t,ellipsis:!!n,component:"a"}))}),XDe=YDe,JDe=v.forwardRef((e,t)=>v.createElement(tb,Object.assign({ref:t},e,{component:"div"}))),QDe=JDe;var ZDe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const e2e=(e,t)=>{var{ellipsis:n}=e,r=ZDe(e,["ellipsis"]);const i=v.useMemo(()=>n&&typeof n=="object"?So(n,["expandable","rows"]):n,[n]);return v.createElement(tb,Object.assign({ref:t},r,{ellipsis:i,component:"span"}))},t2e=v.forwardRef(e2e);var n2e=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const r2e=[1,2,3,4,5],i2e=v.forwardRef((e,t)=>{const{level:n=1}=e,r=n2e(e,["level"]);let i;return r2e.includes(n)?i=`h${n}`:i="h1",v.createElement(tb,Object.assign({ref:t},r,{component:i}))}),o2e=i2e,Jg=iJ;Jg.Text=t2e;Jg.Link=XDe;Jg.Title=o2e;Jg.Paragraph=QDe;const $i=Jg;function aJ(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=aJ(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function PD(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=aJ(e))&&(r&&(r+=" "),r+=t);return r}const a2e=v.forwardRef(({className:e,children:t},n)=>G.jsx("div",{className:PD(e,"b-1 b-solid b-coolgray-6 rd of-hidden relative"),ref:n,style:{width:288,height:216},children:t})),os=Object.assign(v.forwardRef(({className:e,children:t},n)=>G.jsx("div",{className:PD(e,"flex-1 p-10 p-t-4 flex gap-5"),ref:n,children:t})),{Item:a2e}),Fr=({children:e})=>G.jsx("div",{className:"h-screen flex flex-col",children:e}),gl=({children:e})=>G.jsx("samp",{className:"z-2 inline-flex items-center gap-1 absolute bottom-0 bg-black c-white px-1 text-sm",children:e}),kE=14,ME=8,ow=8,aw=4;function s2e({volumeLevel:e=0,noise:t=.075,...n}){const[r,i]=v.useState(0);return v.useEffect(()=>{if(e&&t){const o=Math.max(0,Math.min(1,t)),a=setInterval(()=>{i(e+Math.random()*o*(Math.random()>.5?1:-1))},50);return()=>clearInterval(a)}},[e,t]),G.jsxs("svg",{fill:"none",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",...n,children:[G.jsx("defs",{children:G.jsx("clipPath",{id:"icon-mic-v-clip",children:G.jsx("rect",{height:kE,rx:ME/2,width:ME,x:ow,y:aw})})}),G.jsx("path",{d:"M0 0h24v24H0z",fill:"#999CA3",opacity:".01"}),G.jsx("rect",{clipPath:"url(#icon-mic-v-clip)",fill:"#fff",height:kE,width:ME,x:ow,y:aw}),G.jsx("path",{d:"M4 16.625h2v-1.25H4v1.25Zm6 4h4v-1.25h-4v1.25Zm8-4h2v-1.25h-2v1.25Zm-4 4A4.625 4.625 0 0 0 18.625 16h-1.25A3.375 3.375 0 0 1 14 19.375v1.25ZM5.375 16A4.625 4.625 0 0 0 10 20.625v-1.25A3.375 3.375 0 0 1 6.625 16h-1.25Z",fill:"#fff"}),G.jsx("g",{clipPath:"url(#icon-mic-v-clip)",children:G.jsx("rect",{fill:"#44AD00",height:kE*2,style:{transform:`translateY(${(1-r)*kE}px)`,transition:"transform .1s"},width:ME,x:ow,y:aw})})]})}const c2e=v.memo(function(t){return G.jsxs("svg",{fill:"none",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",...t,children:[G.jsx("path",{d:"m5 5 14 14",stroke:"rgb(225, 225, 225, 0.35)",strokeLinejoin:"round",strokeWidth:"1.25"}),G.jsx("path",{clipRule:"evenodd",d:"M19.277 16.625H20v-1.25h-1.973l1.25 1.25Zm-3.239 2.065.89.89a4.602 4.602 0 0 1-2.716 1.04l-.212.005h-4a4.626 4.626 0 0 1-4.55-3.787l-.033-.213H4v-1.25h2c.345 0 .625.28.625.625a3.375 3.375 0 0 0 3.19 3.37l.185.005h4a3.36 3.36 0 0 0 2.038-.685Zm.587-4.717V8a4.625 4.625 0 0 0-8.5-2.526l.911.91a3.374 3.374 0 0 1 6.281.991H14v1.25h1.375v.75H14v1.25h1.375v.75h-1.348l1.25 1.25h.098v.098l1.25 1.25Zm-2.587 2.717.89.89A4.625 4.625 0 0 1 7.375 14v-3.973l1.25 1.25v.098h.098l1.25 1.25H8.625V14a3.375 3.375 0 0 0 5.413 2.69Z",fill:"rgb(225, 225, 225, 0.35)",fillRule:"evenodd"})]})}),l2e=v.memo(function(t){return G.jsxs("svg",{fill:"none",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",...t,children:[G.jsx("circle",{cx:"12",cy:"11",r:"7",stroke:"#fff",strokeLinejoin:"round",strokeWidth:"1.25"}),G.jsx("circle",{cx:"12",cy:"11",r:"3",stroke:"#fff",strokeLinejoin:"round",strokeWidth:"1.25"}),G.jsx("circle",{cx:"14.625",cy:"6.625",fill:"#fff",r:".625"}),G.jsx("path",{d:"M7 18.25a8.004 8.004 0 0 0 10 0",stroke:"#fff",strokeLinejoin:"round",strokeWidth:"1.25"})]})}),u2e=v.memo(function(t){return G.jsxs("svg",{fill:"none",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",...t,children:[G.jsx("path",{d:"m5 5 14 14",stroke:"rgb(225, 225, 225, 0.35)",strokeLinejoin:"round",strokeWidth:"1.25"}),G.jsx("path",{clipRule:"evenodd",d:"m15.72 18.373.91.909a8.63 8.63 0 0 1-9.788-.364l-.232-.18.78-.976a7.38 7.38 0 0 0 8.33.61Zm2.434-2.87A7.625 7.625 0 0 0 7.497 4.846l.897.896a6.375 6.375 0 0 1 8.864 8.864l.896.897Zm-3.857 1.446.952.951A7.625 7.625 0 0 1 5.1 7.751l.951.952a6.375 6.375 0 0 0 8.246 8.246Zm.956-4.348a3.625 3.625 0 0 0-4.854-4.854l.964.964a2.378 2.378 0 0 1 2.926 2.926l.964.964Zm-.628-5.351a.625.625 0 1 0 0-1.25.625.625 0 0 0 0 1.25Z",fill:"rgb(225, 225, 225, 0.35)",fillRule:"evenodd"})]})});function d2e({track:e,deviceId:t,...n}){const r=Yy(e);return v.useEffect(()=>{r&&t!=null&&r.setDevice(t).catch(console.warn)},[t,r]),G.jsx(Jy,{track:e,...n})}function h2e({track:e,deviceId:t,videoPlayerConfig:n,...r}){const i=Yy(e);return v.useEffect(()=>{i&&t!=null&&i.setDevice(t).catch(console.warn)},[t,i]),G.jsx(Fg,{track:e,videoPlayerConfig:n,...r})}function DD({micOn:e,cameraOn:t,audioTrack:n,videoTrack:r,playAudio:i=!1,playVideo:o,micDeviceId:a,cameraDeviceId:s,volume:c,cover:l,children:u,videoPlayerConfig:d,style:h,...f}){const g=bp(Qy,h);return o=o??!!t,i=i??!!e,G.jsxs("div",{...f,style:g,children:[G.jsx(h2e,{deviceId:s,disabled:!t,play:o,track:r,videoPlayerConfig:d}),G.jsx(d2e,{deviceId:a,disabled:!e,play:i,track:n,volume:c}),l&&!t&&G.jsx(Zy,{cover:l}),G.jsx("div",{style:Mg,children:u})]})}function Qg({track:e,playVideo:t,cover:n,client:r,style:i,children:o,videoPlayerConfig:a,...s}){var d,h;const c=bp(Qy,i),u=(h=(d=wa(r).remoteUsers)==null?void 0:d.find(f=>f.uid===(e==null?void 0:e.getUserId())))==null?void 0:h.hasVideo;return t=t??u,G.jsxs("div",{...s,style:c,children:[G.jsx(UN,{play:t,track:e,videoPlayerConfig:a}),n&&!t&&G.jsx(Zy,{cover:n}),G.jsx("div",{style:Mg,children:o})]})}const LD=({published:e,total:t})=>G.jsx("div",{className:"p-4 text-xl",children:G.jsxs("span",{className:"inline-flex items-center gap-1 py-2 px-3 rd b-1 b-solid",children:[G.jsx("i",{className:"i-lucide-users"}),G.jsxs("samp",{className:"text-base",children:[e,"/",t]})]})});var kD={exports:{}};kD.exports;(function(e){(function(t,n,r){function i(c){var l=this,u=s();l.next=function(){var d=2091639*l.s0+l.c*23283064365386963e-26;return l.s0=l.s1,l.s1=l.s2,l.s2=d-(l.c=d|0)},l.c=1,l.s0=u(" "),l.s1=u(" "),l.s2=u(" "),l.s0-=u(c),l.s0<0&&(l.s0+=1),l.s1-=u(c),l.s1<0&&(l.s1+=1),l.s2-=u(c),l.s2<0&&(l.s2+=1),u=null}function o(c,l){return l.c=c.c,l.s0=c.s0,l.s1=c.s1,l.s2=c.s2,l}function a(c,l){var u=new i(c),d=l&&l.state,h=u.next;return h.int32=function(){return u.next()*4294967296|0},h.double=function(){return h()+(h()*2097152|0)*11102230246251565e-32},h.quick=h,d&&(typeof d=="object"&&o(d,u),h.state=function(){return o(u,{})}),h}function s(){var c=4022871197,l=function(u){u=String(u);for(var d=0;d<u.length;d++){c+=u.charCodeAt(d);var h=.02519603282416938*c;c=h>>>0,h-=c,h*=c,c=h>>>0,h-=c,c+=h*4294967296}return(c>>>0)*23283064365386963e-26};return l}n&&n.exports?n.exports=a:r&&r.amd?r(function(){return a}):this.alea=a})(Ht,e,!1)})(kD);var f2e=kD.exports,MD={exports:{}};MD.exports;(function(e){(function(t,n,r){function i(s){var c=this,l="";c.x=0,c.y=0,c.z=0,c.w=0,c.next=function(){var d=c.x^c.x<<11;return c.x=c.y,c.y=c.z,c.z=c.w,c.w^=c.w>>>19^d^d>>>8},s===(s|0)?c.x=s:l+=s;for(var u=0;u<l.length+64;u++)c.x^=l.charCodeAt(u)|0,c.next()}function o(s,c){return c.x=s.x,c.y=s.y,c.z=s.z,c.w=s.w,c}function a(s,c){var l=new i(s),u=c&&c.state,d=function(){return(l.next()>>>0)/4294967296};return d.double=function(){do var h=l.next()>>>11,f=(l.next()>>>0)/4294967296,g=(h+f)/(1<<21);while(g===0);return g},d.int32=l.next,d.quick=d,u&&(typeof u=="object"&&o(u,l),d.state=function(){return o(l,{})}),d}n&&n.exports?n.exports=a:r&&r.amd?r(function(){return a}):this.xor128=a})(Ht,e,!1)})(MD);var p2e=MD.exports,FD={exports:{}};FD.exports;(function(e){(function(t,n,r){function i(s){var c=this,l="";c.next=function(){var d=c.x^c.x>>>2;return c.x=c.y,c.y=c.z,c.z=c.w,c.w=c.v,(c.d=c.d+362437|0)+(c.v=c.v^c.v<<4^(d^d<<1))|0},c.x=0,c.y=0,c.z=0,c.w=0,c.v=0,s===(s|0)?c.x=s:l+=s;for(var u=0;u<l.length+64;u++)c.x^=l.charCodeAt(u)|0,u==l.length&&(c.d=c.x<<10^c.x>>>4),c.next()}function o(s,c){return c.x=s.x,c.y=s.y,c.z=s.z,c.w=s.w,c.v=s.v,c.d=s.d,c}function a(s,c){var l=new i(s),u=c&&c.state,d=function(){return(l.next()>>>0)/4294967296};return d.double=function(){do var h=l.next()>>>11,f=(l.next()>>>0)/4294967296,g=(h+f)/(1<<21);while(g===0);return g},d.int32=l.next,d.quick=d,u&&(typeof u=="object"&&o(u,l),d.state=function(){return o(l,{})}),d}n&&n.exports?n.exports=a:r&&r.amd?r(function(){return a}):this.xorwow=a})(Ht,e,!1)})(FD);var m2e=FD.exports,UD={exports:{}};UD.exports;(function(e){(function(t,n,r){function i(s){var c=this;c.next=function(){var u=c.x,d=c.i,h,f;return h=u[d],h^=h>>>7,f=h^h<<24,h=u[d+1&7],f^=h^h>>>10,h=u[d+3&7],f^=h^h>>>3,h=u[d+4&7],f^=h^h<<7,h=u[d+7&7],h=h^h<<13,f^=h^h<<9,u[d]=f,c.i=d+1&7,f};function l(u,d){var h,f=[];if(d===(d|0))f[0]=d;else for(d=""+d,h=0;h<d.length;++h)f[h&7]=f[h&7]<<15^d.charCodeAt(h)+f[h+1&7]<<13;for(;f.length<8;)f.push(0);for(h=0;h<8&&f[h]===0;++h);for(h==8?f[7]=-1:f[h],u.x=f,u.i=0,h=256;h>0;--h)u.next()}l(c,s)}function o(s,c){return c.x=s.x.slice(),c.i=s.i,c}function a(s,c){s==null&&(s=+new Date);var l=new i(s),u=c&&c.state,d=function(){return(l.next()>>>0)/4294967296};return d.double=function(){do var h=l.next()>>>11,f=(l.next()>>>0)/4294967296,g=(h+f)/(1<<21);while(g===0);return g},d.int32=l.next,d.quick=d,u&&(u.x&&o(u,l),d.state=function(){return o(l,{})}),d}n&&n.exports?n.exports=a:r&&r.amd?r(function(){return a}):this.xorshift7=a})(Ht,e,!1)})(UD);var g2e=UD.exports,BD={exports:{}};BD.exports;(function(e){(function(t,n,r){function i(s){var c=this;c.next=function(){var u=c.w,d=c.X,h=c.i,f,g;return c.w=u=u+1640531527|0,g=d[h+34&127],f=d[h=h+1&127],g^=g<<13,f^=f<<17,g^=g>>>15,f^=f>>>12,g=d[h]=g^f,c.i=h,g+(u^u>>>16)|0};function l(u,d){var h,f,g,p,m,_=[],E=128;for(d===(d|0)?(f=d,d=null):(d=d+"\0",f=0,E=Math.max(E,d.length)),g=0,p=-32;p<E;++p)d&&(f^=d.charCodeAt((p+32)%d.length)),p===0&&(m=f),f^=f<<10,f^=f>>>15,f^=f<<4,f^=f>>>13,p>=0&&(m=m+1640531527|0,h=_[p&127]^=f+m,g=h==0?g+1:0);for(g>=128&&(_[(d&&d.length||0)&127]=-1),g=127,p=4*128;p>0;--p)f=_[g+34&127],h=_[g=g+1&127],f^=f<<13,h^=h<<17,f^=f>>>15,h^=h>>>12,_[g]=f^h;u.w=m,u.X=_,u.i=g}l(c,s)}function o(s,c){return c.i=s.i,c.w=s.w,c.X=s.X.slice(),c}function a(s,c){s==null&&(s=+new Date);var l=new i(s),u=c&&c.state,d=function(){return(l.next()>>>0)/4294967296};return d.double=function(){do var h=l.next()>>>11,f=(l.next()>>>0)/4294967296,g=(h+f)/(1<<21);while(g===0);return g},d.int32=l.next,d.quick=d,u&&(u.X&&o(u,l),d.state=function(){return o(l,{})}),d}n&&n.exports?n.exports=a:r&&r.amd?r(function(){return a}):this.xor4096=a})(Ht,e,!1)})(BD);var v2e=BD.exports,$D={exports:{}};$D.exports;(function(e){(function(t,n,r){function i(s){var c=this,l="";c.next=function(){var d=c.b,h=c.c,f=c.d,g=c.a;return d=d<<25^d>>>7^h,h=h-f|0,f=f<<24^f>>>8^g,g=g-d|0,c.b=d=d<<20^d>>>12^h,c.c=h=h-f|0,c.d=f<<16^h>>>16^g,c.a=g-d|0},c.a=0,c.b=0,c.c=-1640531527,c.d=1367130551,s===Math.floor(s)?(c.a=s/4294967296|0,c.b=s|0):l+=s;for(var u=0;u<l.length+20;u++)c.b^=l.charCodeAt(u)|0,c.next()}function o(s,c){return c.a=s.a,c.b=s.b,c.c=s.c,c.d=s.d,c}function a(s,c){var l=new i(s),u=c&&c.state,d=function(){return(l.next()>>>0)/4294967296};return d.double=function(){do var h=l.next()>>>11,f=(l.next()>>>0)/4294967296,g=(h+f)/(1<<21);while(g===0);return g},d.int32=l.next,d.quick=d,u&&(typeof u=="object"&&o(u,l),d.state=function(){return o(l,{})}),d}n&&n.exports?n.exports=a:r&&r.amd?r(function(){return a}):this.tychei=a})(Ht,e,!1)})($D);var E2e=$D.exports,sJ={exports:{}};(function(e){(function(t,n,r){var i=256,o=6,a=52,s="random",c=r.pow(i,o),l=r.pow(2,a),u=l*2,d=i-1,h;function f(C,b,T){var R=[];b=b==!0?{entropy:!0}:b||{};var A=_(m(b.entropy?[C,S(n)]:C??E(),3),R),O=new g(R),x=function(){for(var M=O.g(o),$=c,U=0;M<l;)M=(M+U)*i,$*=i,U=O.g(1);for(;M>=u;)M/=2,$/=2,U>>>=1;return(M+U)/$};return x.int32=function(){return O.g(4)|0},x.quick=function(){return O.g(4)/4294967296},x.double=x,_(S(O.S),n),(b.pass||T||function(M,$,U,V){return V&&(V.S&&p(V,O),M.state=function(){return p(O,{})}),U?(r[s]=M,$):M})(x,A,"global"in b?b.global:this==r,b.state)}function g(C){var b,T=C.length,R=this,A=0,O=R.i=R.j=0,x=R.S=[];for(T||(C=[T++]);A<i;)x[A]=A++;for(A=0;A<i;A++)x[A]=x[O=d&O+C[A%T]+(b=x[A])],x[O]=b;(R.g=function(M){for(var $,U=0,V=R.i,W=R.j,z=R.S;M--;)$=z[V=d&V+1],U=U*i+z[d&(z[V]=z[W=d&W+$])+(z[W]=$)];return R.i=V,R.j=W,U})(i)}function p(C,b){return b.i=C.i,b.j=C.j,b.S=C.S.slice(),b}function m(C,b){var T=[],R=typeof C,A;if(b&&R=="object")for(A in C)try{T.push(m(C[A],b-1))}catch{}return T.length?T:R=="string"?C:C+"\0"}function _(C,b){for(var T=C+"",R,A=0;A<T.length;)b[d&A]=d&(R^=b[d&A]*19)+T.charCodeAt(A++);return S(b)}function E(){try{var C;return h&&(C=h.randomBytes)||(C=new Uint8Array(i),(t.crypto||t.msCrypto).getRandomValues(C)),S(C)}catch{var b=t.navigator,T=b&&b.plugins;return[+new Date,t,T,t.screen,S(n)]}}function S(C){return String.fromCharCode.apply(0,C)}_(r.random(),n),e.exports?e.exports=f:r["seed"+s]=f})(typeof self<"u"?self:Ht,[],Math)})(sJ);var _2e=sJ.exports,S2e=f2e,y2e=p2e,C2e=m2e,b2e=g2e,T2e=v2e,R2e=E2e,rh=_2e;rh.alea=S2e;rh.xor128=y2e;rh.xorwow=C2e;rh.xorshift7=b2e;rh.xor4096=T2e;rh.tychei=R2e;var w2e=rh;const cJ=jd(w2e);let lJ=cJ();function I2e(){return lJ()}function yV(e){lJ=cJ(e)}function uJ(e,t){const n=Array.isArray(e)?()=>A2e(e):e;return(t==null?void 0:t.length)===void 0?n(0):Array.from({length:t.length},(r,i)=>n(i))}function A2e(e){return e[Math.floor(I2e()*e.length)]}function O2e(e,t){return uJ(e,t)}var CV={withAccents:{male:["Adrián","Ægir","Álvaro","André","Andrés","Árni","Asbjørn","Björn","César","Daníel","Davíð","Emílio","Fañch","François","František","Gísli","Götz","Guðjón","Guðmundur","Günter","Halldór","Hans-Jörg","Hans-Jürgen","Hüseyin","Iñaki","János","Jesús","Jiří","Jóhann","Jóhannes","Jokūbas","Jón","José","Jörn","Julião","Jürgen","Kristján","Maël","Magnús","Mathéo","Mátyás","Michał","Noël","Nuñez","Ólafur","Óscar","Øyvind","Páll","Paweł","Pétur","Ramón","Raúl","René","Ruairí","Rubén","Seán","Sérgio","Sigurður","Sönke","Stefán","Tomáš","Þorsteinn"],female:["Ædel","Agnès","Alícia","Änne","Antónia","Ásta","Auður","Cäcilia","Chloë","Claúdia","Dörte","Elín","Elísabet","Eliška","Františka","Glória","Grażyna","Guðbjörg","Guðný","Guðrún","Henriëtte","Ingibjörg","Íris","Jóhanna","Jóna","Júlia","Käte","Katrín","Kolbrún","Kristín","KŠthe","Letícia","Lídia","Lúcia","Małgorzata","Margrét","María","Mónica","Natália","Ólöf","Patrícia","Ragnheiður","Renée","Ružena","Siân","Sigríður","Sigrún","Sílvia","Sørina","Věra","Virgínia","Zoë","Þóra","Þórunn"]},withoutAccents:{male:["Abdul","Abdullahi","Abubakar","Adam","Adamu","Adiy","Ahmad","Ajay","Akira","Alan","Alberto","Alejandro","Aleksander","Aleksandr","Aleksey","Alex","Alexander","Alexey","Ali","Aliyu","Aminu","Amit","Amiyr","Amiyt","Amnuai","Amphon","Anah","Anan","Andreas","Andrew","Andrey","Andri","Andries","Andrzej","Anil","Anthony","Anton","Antonio","Arnar","Artur","Artyom","Arun","Ashok","Atli","Avraham","Bartosz","Bello","Bernd","Bin","Birgir","Bjarni","Blessing","Bongani","Brian","Bunmi","Carlos","Carol","Chan","Chao","Charles","Charoen","Chen","Cheng","Christian","Christopher","Colin","Daniel","Daniyel","Dariusz","David","Denis","Dennis","Diego","Dieter","Dilip","Dinesh","Dmitriy","Dmitry","Einar","Eliyahu","Emmanuel","Evgeniy","Fernando","Fran","Francis","Francisco","Francisco-Javier","Frank","Franz","Gang","Gareth","Gary","George","Gerhard","Graham","Grzegorz","Gunnar","Guy","Haim","Haiyan","Hans","Hans-Ulrich","Haruna","Hassan","Heike","Heinz","Helgi","Helmut","Hendrik","Herbert","Hideo","Hiromi","Hiroshi","Hong","Horst","Hui","Ian","Ibrahim","Idris","Igor","Ilya","Isa","Isaac","Isah","Ivan","Jabulani","Jacek","Jacobus","Jakub","James","Jan","Janusz","Javier","Jean","Jerzy","Jesus","Jason","Jianguo","Jianhua","Jianjun","Jianping","Jin","Joan","Johan","Johannes","John","Jonathan","Jorge","Jose","Jose-Antonio","Jose-Luis","Jose-Manuel","Jose-Maria","Josef","Joseph","Joyce","Juan","Kabiru","Kai","Kamil","Karen","Karl","Karl-Heinz","Katsumi","Kazuo","Kelvin","Kenji","Kenneth","Kevin","Kiran","Kirill","Kiyoshi","Kjartan","Klaus","Ko","Koichi","Koji","Konstantin","Koshi","Krishna","Kristinn","Krzysztof","Kun","Lakshmi","Lan","Laxmi","Lei","Li","Lihua","Lijun","Lilian","Lin","Ling","Liping","Liyor","Luis","Lukasz","Maciej","Mahmood","Maksim","Manfred","Manoj","Manuel","Marcin","Mardkhay","Marek","Mariusz","Mark","Martin","Masami","Masao","Mateusz","Matt","Matthew","Meiyr","Michael","Michal","Miguel","Miguel-Angel","Mikhail","Min","Ming","Mitsuo","Miykhael","Miykhal","Mo","Mohamed","Mohammad","Mohammed","Mohan","Moses","Moshe","Mpho","Muhammad","Muhammed","Mukesh","Musa","Narong","Nathan","Nicola","Nikita","Nikolay","Ning","Nkosinathi","Noam","Oleg","Omer","Otieno","Pablo","Patrick","Paul","Pavel","Pawel","Pedro","Peng","Peter","Petrus","Philip","Pieter","Ping","Piotr","Prasit","Prasoet","Pricha","Pushpa","Qiang","Qing","Radha","Rafael","Ragnar","Raj","Rajendra","Rajesh","Raju","Rakesh","Ram","Ramesh","Raphael","Rattana","Ravi","Richard","Robert","Roman","Rong","Roy","Ryan","Salisu","Saman","Samran","Samuel","Sani","Sanjay","Santosh","Sam","Sammy","Sawat","Sebastian","Sergey","Sergio","Shankar","Shay","Shigeru","Shimon","Shlomo","Shoji","Sibusiso","Simon","Sipho","Sombat","Sombun","Somchai","Somchit","Somkhit","Somkiat","Sommai","Somnuek","Somphon","Somphong","Somsak","Sri","Stefan","Stephen","Steve","Steven","Suman","Sunday","Sunil","Sunthon","Suresh","Sushila","Suwit","Sveinn","Tadashi","Takashi","Takeshi","Tal","Tebogo","Thabo","Thawi","Themba","Thomas","Thulani","Tomasz","Toshio","Udom","Umar","Uriy","Usman","Uwe","Victor","Vijay","Viktor","Vincent","Vinod","Vladimir","Walter","Wanchai","Waraphon","Wei","Werner","Wichai","Wichian","Willem","William","Winai","Wirat","Wirot","Wojciech","Wolfgang","Xiang","Xiaohong","Xiaoli","Xiaoping","Xiaoyan","Xin","Xolani","Yaakv","Yahaya","Yakubu","Yan","Yasuo","Yhudah","Ying","Yisrael","Yong","Yosef","Yoshie","Yoshimi","Yoshio","Yu","Yue","Yukio","Yun","Yuriy","Yusuf","Yuval","Zbigniew","Zhen","Zhiqiang"],female:["Agata","Agnieszka","Aisha","Akira","Aleksandra","Alina","Alyona","Amina","Amnuai","Ana","Ana-Maria","Anah","Anan","Anastasiya","Andrea","Angela","Anita","Ann","Anna","Anong","Antonia","Asha","Barbara","Beata","Berglind","Bin","Birgit","Birna","Blessing","Brigitte","Bunmi","Busisiwe","Carmen","Carol","Caroline","Catherine","Chan","Chanah","Chao","Charoen","Chayah","Chen","Cheng","Christa","Christine","Claire","Claudia","Cristina","Darya","Dolores","Dorota","Edda","Ekaterina","Elena","Elisabeth","Elizabeth","Elke","Emiko","Emma","Erika","Erla","Erna","Ester","Esther","Eunice","Eva","Eugenia","Ewa","Faith","Fatima","Fiona","Fran","Francisca","Fumiko","Galina","Gabra","Gisela","Gita","Grace","Hadiza","Haiyan","Hanna","Haruna","Hauwa","Heike","Helen","Helga","Hildur","Hiroko","Hiromi","Hisako","Hong","Hui","Hulda","Inga","Ingrid","Irina","Isa","Isabel","Isah","Iwona","Jackline","Jan","Jane","Janet","Jean","Jennifer","Jianhua","Jianping","Jin","Joan","Joanna","Johanna","Josefa","Joy","Joyce","Juan","Julie","Justyna","Kai","Kanchana","Karen","Karin","Karolina","Kasia","Katarzyna","Katsumi","Keiko","Kiran","Kiyoko","Kristina","Kseniya","Kun","Lakshmi","Lalita","Lan","Latda","Laura","Laxmi","Leah","Lei","Li","Lihua","Lijun","Lilian","Lilja","Lin","Linda","Lindiwe","Ling","Liping","Lisa","Lucia","Lucy","Lyubov","Lyudmila","Magda","Magdalena","Mali","Manju","Margaret","Maria","Maria-Isabel","Maria-Jose","Maria-Pilar","Marina","Mariya","Marta","Martha","Mary","Maryam","Masako","Masami","Mei","Mercy","Michal","Michiko","Mieko","Min","Mina","Ming","Miriam","Miyoko","Mo","Monika","Mpho","Na","Nadezhda","Nan","Nancy","Natalya","Ngozi","Nicola","Ning","Nittaya","Noam","Nobuko","Nokuthula","Nonhlanhla","Noriko","Nushi","Olga","Omer","Patricia","Paula","Paulina","Peng","Petra","Phonthip","Pilar","Ping","Prani","Purity","Pushpa","Qing","Rachel","Radha","Rattana","Rebecca","Reiko","Rekha","Renate","Rita","Rong","Rosa","Rose","Rut","Ruth","Ryoko","Sabine","Sachiko","Samran","Santosh","Sara","Sarah","Sam","Sammy","Sawat","Shanti","Sharon","Shay","Shizuko","Shoshanah","Sibongile","Sita","Sombat","Sombun","Somchit","Somkhit","Sommai","Somnuek","Somphon","Somphong","Sri","Steinunn","Sukanya","Suman","Sunday","Sunita","Suphaphon","Susan","Susanne","Sushila","Svetlana","Takako","Tamar","Tatyana","Tal","Tebogo","Teruko","Thawi","Tomiko","Toshiko","Unnur","Urai","Urmila","Ursula","Usha","Valentina","Victoria","Wanjiru","Wanphen","Watsana","Wei","Wilai","Xiang","Xiaohong","Xiaoli","Xiaoping","Xiaoyan","Xin","Yael","Yan","Yasuko","Yelena","Yhudiyt","Ying","Yoko","Yong","Yoshie","Yoshiko","Yoshimi","Yu","Yue","Yuko","Yuliya","Yun","Yuval","Zainab","Zandile","Zanele","Zhen"]}};function x2e(e){var t,n;const r=(t=e==null?void 0:e.withAccents)!=null&&t,i=(n=e==null?void 0:e.gender)!=null?n:O2e(["male","female"]),o=e==null?void 0:e.locale;return uJ(r?o?o==null?void 0:o.withAccents[i]:CV.withAccents[i]:o?o==null?void 0:o.withoutAccents[i]:CV.withoutAccents[i],e)}var N2e={china:["Peking roasted duck","Kung pao chicken","Sweet and sour pork","Hot pot","Dim sum","Dumplings","Ma po tofu","Char siu","Chicken chow mein","Beef chow mein","vegetable chow mein","Chicken fried rice","Beef fried rice","Vegetable fried Rice","Special fried Rice","Sichuan pork","Xiaolongbao","Zhajiangmian","Wonton soup","Sweet and sour pork","Duck spring Rolls","Vegetable spring Rolls","Wonton","Peking duck","Lamb hot pot","Spicy crayfish","Guilin rice noodles","Lanzhou hand-pulled noodles","Steamed crab","Shredded pork with garlic sauce","Red braised pork","Sweet and sour Ribs","Xinjiang","Braised pork with vermicelli"],italy:["Butternut squash risotto","Mushroom risotto","Beetroot risotto","Courgette risotto","Pizza","Gnocchi","Spaghetti bolognese","Spaghetti carbonara","Pesto alla Genovese","Beef lasagne","Vegetable lasagne","Gelato","Prosciutto di Parma","Ribollita","Bagna cauda","Polenta","Tortelli and ravioli","Focaccia","Garlic bread","Arancini","Il tartufo","Panzerotto fritto","Fiorentina","Minestrone","Frico","Arrosticini","Olive ascolante","Fritto misto piemontes","Tiramisù"],india:["Biryani","Dosa","Tandoori chicken","Samosas","Chaat","Plain naan","Garlic naan","Pilau rice","Steamed rice","Chicken madras","Vegetable madras","Chicken vindaloo","Chicken jalfrezi","Chicken roghan josh","Lamb roghan josh","Beef roghan josh","Butter chicken","Dosa","Gulab jamun","Chicken korma","Mutter paneer","Papadum","Paratha","Raita","Saag paneer","Tandoori chicken","Chicken tikka masala","Pakora","Dal","Chapati","Pasanda","Aloo gobi","Kofta","Chicken makhani","Paneer naan","Chana Aloo Curry"],mexico:["Chilaquiles","Pozole","Tacos al pastor","Tostadas","Chiles en nogada","Elote","Enchiladas","Mole","Guacamole","Tamales","Huevos rancheros","Machaca","Discada","Beef Burrito","Chicken Burrito","Pozole de pollo o duajolote","Menudo","Cochinita pibil","Tamale","Quesadilla","Frijoles puercos","Chile en nogada","Esquites","Alegria de amaranto","Pipián","Aguachile","Ceviche","Pescado zarandeado","Camarones a la diabla","Birria de chivo","Tlayuda","Guacamole con chapulines","Flautas","Torta Ahogada","Carnitas","Caldo Azteca","Gorditas de Nata"],japan:["Sushi","Udon","Tofu","Tempura","Yakitori","Sashimi","Ramen","Donburi","Natto","Oden","Tamagoyaki","Soba","Tonkatsu","Kashipan","Sukiyaki","Miso soup","Okonomiyaki","Mentaiko","Nikujaga","Unagi no kabayaki","Shabu Shabu","Onigiri","Gyoza","Takoyaki","aiseki ryori","Edamame","Yakisoba","Chawanmushi","Wagashi"],france:["Foie gras","Huîtres","Cassoulet","Poulet basquaise","Escargots au beurre persillé","Mouclade charentaise","Galettes bretonnes","Flemish carbonnade","Quiche lorraine","Raclette","Cheese fondue","Beef fondue","Gratin dauphinois","Tartiflette","Bouillabaisse","Ratatouille","Boeuf bourguignon","Blanquette de veau","Pot-au-feu","Coq-au-vin","Hachis parmentier","Steak tartare","Choucroute","Soufflé au fromage","Cuisses de grenouilles","Soupe à l’oignon","Baguette","Croissant","French cheeses","Fondant au chocolat","Tarte tatin","Macarons","Crème brûlée","Île flottante","Profiteroles","Pain au chocolat"],lebanon:["Kibbeh","Kafta","Kanafeh","Hummus","Rice pilaf","Fattoush","Manakish","Tabbouleh","Sfeeha","Fattoush","Labneh","Muhammara","Lahm bi ajin","Kaak","Chanklich","Mssabaha","Shawarma","Kebbe","Falafel","Halewit el jeben","Namoura","Maamoul","Foul mdammas","Balila","Kawarma","Fattouch"],thailand:["Pad kra pao moo","Tom kha gai","Khao Pad","Chicken pad Thai","Vegetable pad Thai","Moo satay","Tom yum goong","Khao niew mamuang","Kai yad sai","Khao soi","Pad see ew","Laab moo","Gaeng panang","Gai pad med ma muang","Som tam","Poh pia tod","Gaeng massaman","Pla kapung nueng manao","Tod mun pla","Gaeng ped","Gaeng garee","Gaeng keow wan","Moo ping","Durian","Sai ooah","Hoy tod","Kuay teow reua","Mu kratha","Kao ka moo","Yam nua"],greece:["Moussaka","Papoutsakia","Pastitsio","Souvlaki","Soutzoukakia","Stifado","Tomatokeftedes","Tzatziki","Kolokithokeftedes","Giouvetsi","Choriatiki","Kleftiko","Gemista","Fasolada","Bougatsa","Tiropita","Spanakopita","Feta Cheese with Honey","Horta","Tirokroketes","Briam","Saganaki","Gigantes","Dolmades","Fasolatha","Koulouri","Loukoumades","Gyros","Galaktoboureko","Baklava"],turkey:["Şiş kebap","Döner","Köfte","Pide","Kumpir","Meze","Mantı","Lahmacun","Menemen","Şiş kebap","İskender kebab","Corba","Kuzu tandir","Çiğ Köfte","Pilav","Yaprak sarma","Dolma","İmam bayıldı","Borek","Durum","Kumpir","Balik ekmek","Simit","Kunefe","Baklava","Lokum","Halva","Mozzaik pasta","Güllaç","Mercimek Köftesi","Haydari","Tursu suyu","Kahvalti","Kazan dibi","Hunkar begendi","Islak burgers","Salep","Yogurtlu kebab"],spain:["Tortilla de patatas","Fabada asturiana","Calçots","Boquerones al vinagre","Empanada gallega","Paella","Gazpacho","Gachas","Migas","Bocadillo de calamares","Pulpo a feira","Caldo gallego","Lentejas con chorizo","Cocido madrileño","Cachopo","Caracoles"],venezuela:["Pabellón criollo","Arepa","Mondongo","Empanadas","Quesillo","Chicha andina","Tequeños","Cachapa","Hallaca","Perico","Pasticho","Mandocas","Caraotas negras","Patacones","Dulce de leche","Pan de Jamón"],chile:["Humitas","Empanadas","Porotos con riendas","Completos","Manjar","Cordero al palo","Pastel de choclo","Mote con huesillos","Sopaipillas","Curanto"],argentina:["Milanesas","Empanadas","Pizza fugazeta","Asado","Choripan","Bondiola","Bife de chorizo"],colombia:["Bandeja paisa","Chuleta valluna","Sancocho trifásico","Empanada valluna","Salpicon de frutas","Pastel de garbanzo","Ajiaco","Arepas","Arroz de lisa","Sancocho","Pan de bono","Cuchuco","Oblea","Cazuela de mariscos","Pan de yuca","Bollo Limpio","Almojábana","Empanadas","Arroz con Coco","Sopa de mondongo","Cazuela de Mariscos","Arroz con Pollo","Arepa de Huevo","Mote de Queso"],ecuador:["Encebollado","Ceviche","Tigrillo","Bolon de verde","Llapingacho","Mote pillo","Locro de papa","Churrasco"],peru:["Ceviche","Arroz con pollo","Aji de gallina","Llunca de gallina"],"el salvador":["Pupusa","Sopa de patas","Rigua","Flor de izote con huevo","Gallo en chicha"],romania:["Sarmale","Mici","Pomana porcului","Ciorbă de fasole cu ciolan","Ciorbă de burtă","Ciorbă rădăuțeană","Plăcintă cu brânză","Ciorbă de potroace","Mămăligă cu brânză și smântână","Tochitură","Piftie","Iahnie de fasole","Slănină afumată","Cârnați afumați","Varză a la Cluj","Gulaș de cartofi cu afumătură","Cozonac de casă","Ciorbă ardelenească de porc","Mucenici moldovenești","Salată de boeuf","Dovleac copt","Papanași cu brânză de vacă și afine","Drob de miel","Pârjoale moldovenești","Zacuscă de vinete","Zacuscă de fasole","Turtă dulce","Clătitele cu gem","Clătitele cu brânza de vacă","Balmoș","Cozonac","Chiftele"]},bV;(bV=Object.keys(N2e))==null||bV.length;var TV,P2e={olympic:["Archery","Artistic Gymnastics","Artistic Swimming","Athletics","Badminton","Baseball Softball","Basketball","Beach Volleyball","BMX Freestyle","BMX Racing","Boxing","Kayak Flatwater","Kayak Slalom","Diving","Equestrian","Fencing","Football","Golf","Handball","Hockey","Judo","Karate","Marathon Swimming","Modern Pentathlon","Mountain Bike","Rhythmic Gymnastics","Road Cycling","Rowing","Rugby","Sailing","Shooting","Skateboarding","Sport Climbing","Surfing","Swimming","Table Tennis","Taekwondo","Tennis","Track Cycling","Trampoline","Triathlon","Volleyball","Water Polo","Weightlifting","Wrestling"],winterOlympic:["Alpine Skiing","Biathlon","Bobsleigh","Cross-Country Skiing","Curling","Figure Skating","Freestyle Skiing","Ice Hockey","Luge","Nordic Combined","Short Track Speed Skating","Skeleton","Ski Jumping","Snowboard","Speed Skating"],outdoor:["Archery","Athletics","Badminton","Baseball","Basketball","Bowling","Boxing","Camping","Canoeing","Climbing","Cricket","Curling","Cycling","Equestrian","Fencing","Football","Golf","Gymnastics","Handball","Hang Gliding","High Jumping","Hockey","Ice Hockey","Judo","Karate","Kite Flying","Monkey Bars","Motorsports","Netball","Rowing","Rugby","Running","Sailing","Skateboarding","Slide","Snow Skiing","Soccer","Street Hockey","Surfing","Swimming","Table Tennis","Tennis","Trekking","Triathlon","Volleyball","Weightlifting","Wrestling"]};(TV=Object.keys(P2e))==null||TV.length;var dJ={exports:{}};function D2e(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var sw={exports:{}};const L2e={},k2e=Object.freeze(Object.defineProperty({__proto__:null,default:L2e},Symbol.toStringTag,{value:"Module"})),M2e=pQ(k2e);var RV;function Rn(){return RV||(RV=1,function(e,t){(function(n,r){e.exports=r()})(Ht,function(){var n=n||function(r,i){var o;if(typeof window<"u"&&window.crypto&&(o=window.crypto),typeof self<"u"&&self.crypto&&(o=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(o=globalThis.crypto),!o&&typeof window<"u"&&window.msCrypto&&(o=window.msCrypto),!o&&typeof Ht<"u"&&Ht.crypto&&(o=Ht.crypto),!o&&typeof D2e=="function")try{o=M2e}catch{}var a=function(){if(o){if(typeof o.getRandomValues=="function")try{return o.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof o.randomBytes=="function")try{return o.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},s=Object.create||function(){function E(){}return function(S){var C;return E.prototype=S,C=new E,E.prototype=null,C}}(),c={},l=c.lib={},u=l.Base=function(){return{extend:function(E){var S=s(this);return E&&S.mixIn(E),(!S.hasOwnProperty("init")||this.init===S.init)&&(S.init=function(){S.$super.init.apply(this,arguments)}),S.init.prototype=S,S.$super=this,S},create:function(){var E=this.extend();return E.init.apply(E,arguments),E},init:function(){},mixIn:function(E){for(var S in E)E.hasOwnProperty(S)&&(this[S]=E[S]);E.hasOwnProperty("toString")&&(this.toString=E.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),d=l.WordArray=u.extend({init:function(E,S){E=this.words=E||[],S!=i?this.sigBytes=S:this.sigBytes=E.length*4},toString:function(E){return(E||f).stringify(this)},concat:function(E){var S=this.words,C=E.words,b=this.sigBytes,T=E.sigBytes;if(this.clamp(),b%4)for(var R=0;R<T;R++){var A=C[R>>>2]>>>24-R%4*8&255;S[b+R>>>2]|=A<<24-(b+R)%4*8}else for(var O=0;O<T;O+=4)S[b+O>>>2]=C[O>>>2];return this.sigBytes+=T,this},clamp:function(){var E=this.words,S=this.sigBytes;E[S>>>2]&=4294967295<<32-S%4*8,E.length=r.ceil(S/4)},clone:function(){var E=u.clone.call(this);return E.words=this.words.slice(0),E},random:function(E){for(var S=[],C=0;C<E;C+=4)S.push(a());return new d.init(S,E)}}),h=c.enc={},f=h.Hex={stringify:function(E){for(var S=E.words,C=E.sigBytes,b=[],T=0;T<C;T++){var R=S[T>>>2]>>>24-T%4*8&255;b.push((R>>>4).toString(16)),b.push((R&15).toString(16))}return b.join("")},parse:function(E){for(var S=E.length,C=[],b=0;b<S;b+=2)C[b>>>3]|=parseInt(E.substr(b,2),16)<<24-b%8*4;return new d.init(C,S/2)}},g=h.Latin1={stringify:function(E){for(var S=E.words,C=E.sigBytes,b=[],T=0;T<C;T++){var R=S[T>>>2]>>>24-T%4*8&255;b.push(String.fromCharCode(R))}return b.join("")},parse:function(E){for(var S=E.length,C=[],b=0;b<S;b++)C[b>>>2]|=(E.charCodeAt(b)&255)<<24-b%4*8;return new d.init(C,S)}},p=h.Utf8={stringify:function(E){try{return decodeURIComponent(escape(g.stringify(E)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(E){return g.parse(unescape(encodeURIComponent(E)))}},m=l.BufferedBlockAlgorithm=u.extend({reset:function(){this._data=new d.init,this._nDataBytes=0},_append:function(E){typeof E=="string"&&(E=p.parse(E)),this._data.concat(E),this._nDataBytes+=E.sigBytes},_process:function(E){var S,C=this._data,b=C.words,T=C.sigBytes,R=this.blockSize,A=R*4,O=T/A;E?O=r.ceil(O):O=r.max((O|0)-this._minBufferSize,0);var x=O*R,M=r.min(x*4,T);if(x){for(var $=0;$<x;$+=R)this._doProcessBlock(b,$);S=b.splice(0,x),C.sigBytes-=M}return new d.init(S,M)},clone:function(){var E=u.clone.call(this);return E._data=this._data.clone(),E},_minBufferSize:0});l.Hasher=m.extend({cfg:u.extend(),init:function(E){this.cfg=this.cfg.extend(E),this.reset()},reset:function(){m.reset.call(this),this._doReset()},update:function(E){return this._append(E),this._process(),this},finalize:function(E){E&&this._append(E);var S=this._doFinalize();return S},blockSize:16,_createHelper:function(E){return function(S,C){return new E.init(C).finalize(S)}},_createHmacHelper:function(E){return function(S,C){return new _.HMAC.init(E,C).finalize(S)}}});var _=c.algo={};return c}(Math);return n})}(sw)),sw.exports}var cw={exports:{}},wV;function nb(){return wV||(wV=1,function(e,t){(function(n,r){e.exports=r(Rn())})(Ht,function(n){return function(r){var i=n,o=i.lib,a=o.Base,s=o.WordArray,c=i.x64={};c.Word=a.extend({init:function(l,u){this.high=l,this.low=u}}),c.WordArray=a.extend({init:function(l,u){l=this.words=l||[],u!=r?this.sigBytes=u:this.sigBytes=l.length*8},toX32:function(){for(var l=this.words,u=l.length,d=[],h=0;h<u;h++){var f=l[h];d.push(f.high),d.push(f.low)}return s.create(d,this.sigBytes)},clone:function(){for(var l=a.clone.call(this),u=l.words=this.words.slice(0),d=u.length,h=0;h<d;h++)u[h]=u[h].clone();return l}})}(),n})}(cw)),cw.exports}var lw={exports:{}},IV;function F2e(){return IV||(IV=1,function(e,t){(function(n,r){e.exports=r(Rn())})(Ht,function(n){return function(){if(typeof ArrayBuffer=="function"){var r=n,i=r.lib,o=i.WordArray,a=o.init,s=o.init=function(c){if(c instanceof ArrayBuffer&&(c=new Uint8Array(c)),(c instanceof Int8Array||typeof Uint8ClampedArray<"u"&&c instanceof Uint8ClampedArray||c instanceof Int16Array||c instanceof Uint16Array||c instanceof Int32Array||c instanceof Uint32Array||c instanceof Float32Array||c instanceof Float64Array)&&(c=new Uint8Array(c.buffer,c.byteOffset,c.byteLength)),c instanceof Uint8Array){for(var l=c.byteLength,u=[],d=0;d<l;d++)u[d>>>2]|=c[d]<<24-d%4*8;a.call(this,u,l)}else a.apply(this,arguments)};s.prototype=o}}(),n.lib.WordArray})}(lw)),lw.exports}var uw={exports:{}},AV;function U2e(){return AV||(AV=1,function(e,t){(function(n,r){e.exports=r(Rn())})(Ht,function(n){return function(){var r=n,i=r.lib,o=i.WordArray,a=r.enc;a.Utf16=a.Utf16BE={stringify:function(c){for(var l=c.words,u=c.sigBytes,d=[],h=0;h<u;h+=2){var f=l[h>>>2]>>>16-h%4*8&65535;d.push(String.fromCharCode(f))}return d.join("")},parse:function(c){for(var l=c.length,u=[],d=0;d<l;d++)u[d>>>1]|=c.charCodeAt(d)<<16-d%2*16;return o.create(u,l*2)}},a.Utf16LE={stringify:function(c){for(var l=c.words,u=c.sigBytes,d=[],h=0;h<u;h+=2){var f=s(l[h>>>2]>>>16-h%4*8&65535);d.push(String.fromCharCode(f))}return d.join("")},parse:function(c){for(var l=c.length,u=[],d=0;d<l;d++)u[d>>>1]|=s(c.charCodeAt(d)<<16-d%2*16);return o.create(u,l*2)}};function s(c){return c<<8&4278255360|c>>>8&16711935}}(),n.enc.Utf16})}(uw)),uw.exports}var dw={exports:{}},OV;function ih(){return OV||(OV=1,function(e,t){(function(n,r){e.exports=r(Rn())})(Ht,function(n){return function(){var r=n,i=r.lib,o=i.WordArray,a=r.enc;a.Base64={stringify:function(c){var l=c.words,u=c.sigBytes,d=this._map;c.clamp();for(var h=[],f=0;f<u;f+=3)for(var g=l[f>>>2]>>>24-f%4*8&255,p=l[f+1>>>2]>>>24-(f+1)%4*8&255,m=l[f+2>>>2]>>>24-(f+2)%4*8&255,_=g<<16|p<<8|m,E=0;E<4&&f+E*.75<u;E++)h.push(d.charAt(_>>>6*(3-E)&63));var S=d.charAt(64);if(S)for(;h.length%4;)h.push(S);return h.join("")},parse:function(c){var l=c.length,u=this._map,d=this._reverseMap;if(!d){d=this._reverseMap=[];for(var h=0;h<u.length;h++)d[u.charCodeAt(h)]=h}var f=u.charAt(64);if(f){var g=c.indexOf(f);g!==-1&&(l=g)}return s(c,l,d)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function s(c,l,u){for(var d=[],h=0,f=0;f<l;f++)if(f%4){var g=u[c.charCodeAt(f-1)]<<f%4*2,p=u[c.charCodeAt(f)]>>>6-f%4*2,m=g|p;d[h>>>2]|=m<<24-h%4*8,h++}return o.create(d,h)}}(),n.enc.Base64})}(dw)),dw.exports}var hw={exports:{}},xV;function B2e(){return xV||(xV=1,function(e,t){(function(n,r){e.exports=r(Rn())})(Ht,function(n){return function(){var r=n,i=r.lib,o=i.WordArray,a=r.enc;a.Base64url={stringify:function(c,l){l===void 0&&(l=!0);var u=c.words,d=c.sigBytes,h=l?this._safe_map:this._map;c.clamp();for(var f=[],g=0;g<d;g+=3)for(var p=u[g>>>2]>>>24-g%4*8&255,m=u[g+1>>>2]>>>24-(g+1)%4*8&255,_=u[g+2>>>2]>>>24-(g+2)%4*8&255,E=p<<16|m<<8|_,S=0;S<4&&g+S*.75<d;S++)f.push(h.charAt(E>>>6*(3-S)&63));var C=h.charAt(64);if(C)for(;f.length%4;)f.push(C);return f.join("")},parse:function(c,l){l===void 0&&(l=!0);var u=c.length,d=l?this._safe_map:this._map,h=this._reverseMap;if(!h){h=this._reverseMap=[];for(var f=0;f<d.length;f++)h[d.charCodeAt(f)]=f}var g=d.charAt(64);if(g){var p=c.indexOf(g);p!==-1&&(u=p)}return s(c,u,h)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function s(c,l,u){for(var d=[],h=0,f=0;f<l;f++)if(f%4){var g=u[c.charCodeAt(f-1)]<<f%4*2,p=u[c.charCodeAt(f)]>>>6-f%4*2,m=g|p;d[h>>>2]|=m<<24-h%4*8,h++}return o.create(d,h)}}(),n.enc.Base64url})}(hw)),hw.exports}var fw={exports:{}},NV;function oh(){return NV||(NV=1,function(e,t){(function(n,r){e.exports=r(Rn())})(Ht,function(n){return function(r){var i=n,o=i.lib,a=o.WordArray,s=o.Hasher,c=i.algo,l=[];(function(){for(var p=0;p<64;p++)l[p]=r.abs(r.sin(p+1))*4294967296|0})();var u=c.MD5=s.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(p,m){for(var _=0;_<16;_++){var E=m+_,S=p[E];p[E]=(S<<8|S>>>24)&16711935|(S<<24|S>>>8)&4278255360}var C=this._hash.words,b=p[m+0],T=p[m+1],R=p[m+2],A=p[m+3],O=p[m+4],x=p[m+5],M=p[m+6],$=p[m+7],U=p[m+8],V=p[m+9],W=p[m+10],z=p[m+11],L=p[m+12],D=p[m+13],j=p[m+14],F=p[m+15],y=C[0],I=C[1],N=C[2],B=C[3];y=d(y,I,N,B,b,7,l[0]),B=d(B,y,I,N,T,12,l[1]),N=d(N,B,y,I,R,17,l[2]),I=d(I,N,B,y,A,22,l[3]),y=d(y,I,N,B,O,7,l[4]),B=d(B,y,I,N,x,12,l[5]),N=d(N,B,y,I,M,17,l[6]),I=d(I,N,B,y,$,22,l[7]),y=d(y,I,N,B,U,7,l[8]),B=d(B,y,I,N,V,12,l[9]),N=d(N,B,y,I,W,17,l[10]),I=d(I,N,B,y,z,22,l[11]),y=d(y,I,N,B,L,7,l[12]),B=d(B,y,I,N,D,12,l[13]),N=d(N,B,y,I,j,17,l[14]),I=d(I,N,B,y,F,22,l[15]),y=h(y,I,N,B,T,5,l[16]),B=h(B,y,I,N,M,9,l[17]),N=h(N,B,y,I,z,14,l[18]),I=h(I,N,B,y,b,20,l[19]),y=h(y,I,N,B,x,5,l[20]),B=h(B,y,I,N,W,9,l[21]),N=h(N,B,y,I,F,14,l[22]),I=h(I,N,B,y,O,20,l[23]),y=h(y,I,N,B,V,5,l[24]),B=h(B,y,I,N,j,9,l[25]),N=h(N,B,y,I,A,14,l[26]),I=h(I,N,B,y,U,20,l[27]),y=h(y,I,N,B,D,5,l[28]),B=h(B,y,I,N,R,9,l[29]),N=h(N,B,y,I,$,14,l[30]),I=h(I,N,B,y,L,20,l[31]),y=f(y,I,N,B,x,4,l[32]),B=f(B,y,I,N,U,11,l[33]),N=f(N,B,y,I,z,16,l[34]),I=f(I,N,B,y,j,23,l[35]),y=f(y,I,N,B,T,4,l[36]),B=f(B,y,I,N,O,11,l[37]),N=f(N,B,y,I,$,16,l[38]),I=f(I,N,B,y,W,23,l[39]),y=f(y,I,N,B,D,4,l[40]),B=f(B,y,I,N,b,11,l[41]),N=f(N,B,y,I,A,16,l[42]),I=f(I,N,B,y,M,23,l[43]),y=f(y,I,N,B,V,4,l[44]),B=f(B,y,I,N,L,11,l[45]),N=f(N,B,y,I,F,16,l[46]),I=f(I,N,B,y,R,23,l[47]),y=g(y,I,N,B,b,6,l[48]),B=g(B,y,I,N,$,10,l[49]),N=g(N,B,y,I,j,15,l[50]),I=g(I,N,B,y,x,21,l[51]),y=g(y,I,N,B,L,6,l[52]),B=g(B,y,I,N,A,10,l[53]),N=g(N,B,y,I,W,15,l[54]),I=g(I,N,B,y,T,21,l[55]),y=g(y,I,N,B,U,6,l[56]),B=g(B,y,I,N,F,10,l[57]),N=g(N,B,y,I,M,15,l[58]),I=g(I,N,B,y,D,21,l[59]),y=g(y,I,N,B,O,6,l[60]),B=g(B,y,I,N,z,10,l[61]),N=g(N,B,y,I,R,15,l[62]),I=g(I,N,B,y,V,21,l[63]),C[0]=C[0]+y|0,C[1]=C[1]+I|0,C[2]=C[2]+N|0,C[3]=C[3]+B|0},_doFinalize:function(){var p=this._data,m=p.words,_=this._nDataBytes*8,E=p.sigBytes*8;m[E>>>5]|=128<<24-E%32;var S=r.floor(_/4294967296),C=_;m[(E+64>>>9<<4)+15]=(S<<8|S>>>24)&16711935|(S<<24|S>>>8)&4278255360,m[(E+64>>>9<<4)+14]=(C<<8|C>>>24)&16711935|(C<<24|C>>>8)&4278255360,p.sigBytes=(m.length+1)*4,this._process();for(var b=this._hash,T=b.words,R=0;R<4;R++){var A=T[R];T[R]=(A<<8|A>>>24)&16711935|(A<<24|A>>>8)&4278255360}return b},clone:function(){var p=s.clone.call(this);return p._hash=this._hash.clone(),p}});function d(p,m,_,E,S,C,b){var T=p+(m&_|~m&E)+S+b;return(T<<C|T>>>32-C)+m}function h(p,m,_,E,S,C,b){var T=p+(m&E|_&~E)+S+b;return(T<<C|T>>>32-C)+m}function f(p,m,_,E,S,C,b){var T=p+(m^_^E)+S+b;return(T<<C|T>>>32-C)+m}function g(p,m,_,E,S,C,b){var T=p+(_^(m|~E))+S+b;return(T<<C|T>>>32-C)+m}i.MD5=s._createHelper(u),i.HmacMD5=s._createHmacHelper(u)}(Math),n.MD5})}(fw)),fw.exports}var pw={exports:{}},PV;function hJ(){return PV||(PV=1,function(e,t){(function(n,r){e.exports=r(Rn())})(Ht,function(n){return function(){var r=n,i=r.lib,o=i.WordArray,a=i.Hasher,s=r.algo,c=[],l=s.SHA1=a.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(u,d){for(var h=this._hash.words,f=h[0],g=h[1],p=h[2],m=h[3],_=h[4],E=0;E<80;E++){if(E<16)c[E]=u[d+E]|0;else{var S=c[E-3]^c[E-8]^c[E-14]^c[E-16];c[E]=S<<1|S>>>31}var C=(f<<5|f>>>27)+_+c[E];E<20?C+=(g&p|~g&m)+1518500249:E<40?C+=(g^p^m)+1859775393:E<60?C+=(g&p|g&m|p&m)-1894007588:C+=(g^p^m)-899497514,_=m,m=p,p=g<<30|g>>>2,g=f,f=C}h[0]=h[0]+f|0,h[1]=h[1]+g|0,h[2]=h[2]+p|0,h[3]=h[3]+m|0,h[4]=h[4]+_|0},_doFinalize:function(){var u=this._data,d=u.words,h=this._nDataBytes*8,f=u.sigBytes*8;return d[f>>>5]|=128<<24-f%32,d[(f+64>>>9<<4)+14]=Math.floor(h/4294967296),d[(f+64>>>9<<4)+15]=h,u.sigBytes=d.length*4,this._process(),this._hash},clone:function(){var u=a.clone.call(this);return u._hash=this._hash.clone(),u}});r.SHA1=a._createHelper(l),r.HmacSHA1=a._createHmacHelper(l)}(),n.SHA1})}(pw)),pw.exports}var mw={exports:{}},DV;function VD(){return DV||(DV=1,function(e,t){(function(n,r){e.exports=r(Rn())})(Ht,function(n){return function(r){var i=n,o=i.lib,a=o.WordArray,s=o.Hasher,c=i.algo,l=[],u=[];(function(){function f(_){for(var E=r.sqrt(_),S=2;S<=E;S++)if(!(_%S))return!1;return!0}function g(_){return(_-(_|0))*4294967296|0}for(var p=2,m=0;m<64;)f(p)&&(m<8&&(l[m]=g(r.pow(p,1/2))),u[m]=g(r.pow(p,1/3)),m++),p++})();var d=[],h=c.SHA256=s.extend({_doReset:function(){this._hash=new a.init(l.slice(0))},_doProcessBlock:function(f,g){for(var p=this._hash.words,m=p[0],_=p[1],E=p[2],S=p[3],C=p[4],b=p[5],T=p[6],R=p[7],A=0;A<64;A++){if(A<16)d[A]=f[g+A]|0;else{var O=d[A-15],x=(O<<25|O>>>7)^(O<<14|O>>>18)^O>>>3,M=d[A-2],$=(M<<15|M>>>17)^(M<<13|M>>>19)^M>>>10;d[A]=x+d[A-7]+$+d[A-16]}var U=C&b^~C&T,V=m&_^m&E^_&E,W=(m<<30|m>>>2)^(m<<19|m>>>13)^(m<<10|m>>>22),z=(C<<26|C>>>6)^(C<<21|C>>>11)^(C<<7|C>>>25),L=R+z+U+u[A]+d[A],D=W+V;R=T,T=b,b=C,C=S+L|0,S=E,E=_,_=m,m=L+D|0}p[0]=p[0]+m|0,p[1]=p[1]+_|0,p[2]=p[2]+E|0,p[3]=p[3]+S|0,p[4]=p[4]+C|0,p[5]=p[5]+b|0,p[6]=p[6]+T|0,p[7]=p[7]+R|0},_doFinalize:function(){var f=this._data,g=f.words,p=this._nDataBytes*8,m=f.sigBytes*8;return g[m>>>5]|=128<<24-m%32,g[(m+64>>>9<<4)+14]=r.floor(p/4294967296),g[(m+64>>>9<<4)+15]=p,f.sigBytes=g.length*4,this._process(),this._hash},clone:function(){var f=s.clone.call(this);return f._hash=this._hash.clone(),f}});i.SHA256=s._createHelper(h),i.HmacSHA256=s._createHmacHelper(h)}(Math),n.SHA256})}(mw)),mw.exports}var gw={exports:{}},LV;function $2e(){return LV||(LV=1,function(e,t){(function(n,r,i){e.exports=r(Rn(),VD())})(Ht,function(n){return function(){var r=n,i=r.lib,o=i.WordArray,a=r.algo,s=a.SHA256,c=a.SHA224=s.extend({_doReset:function(){this._hash=new o.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var l=s._doFinalize.call(this);return l.sigBytes-=4,l}});r.SHA224=s._createHelper(c),r.HmacSHA224=s._createHmacHelper(c)}(),n.SHA224})}(gw)),gw.exports}var vw={exports:{}},kV;function fJ(){return kV||(kV=1,function(e,t){(function(n,r,i){e.exports=r(Rn(),nb())})(Ht,function(n){return function(){var r=n,i=r.lib,o=i.Hasher,a=r.x64,s=a.Word,c=a.WordArray,l=r.algo;function u(){return s.create.apply(s,arguments)}var d=[u(1116352408,3609767458),u(1899447441,602891725),u(3049323471,3964484399),u(3921009573,2173295548),u(961987163,4081628472),u(1508970993,3053834265),u(2453635748,2937671579),u(2870763221,3664609560),u(3624381080,2734883394),u(310598401,1164996542),u(607225278,1323610764),u(1426881987,3590304994),u(1925078388,4068182383),u(2162078206,991336113),u(2614888103,633803317),u(3248222580,3479774868),u(3835390401,2666613458),u(4022224774,944711139),u(264347078,2341262773),u(604807628,2007800933),u(770255983,1495990901),u(1249150122,1856431235),u(1555081692,3175218132),u(1996064986,2198950837),u(2554220882,3999719339),u(2821834349,766784016),u(2952996808,2566594879),u(3210313671,3203337956),u(3336571891,1034457026),u(3584528711,2466948901),u(113926993,3758326383),u(338241895,168717936),u(666307205,1188179964),u(773529912,1546045734),u(1294757372,1522805485),u(1396182291,2643833823),u(1695183700,2343527390),u(1986661051,1014477480),u(2177026350,1206759142),u(2456956037,344077627),u(2730485921,1290863460),u(2820302411,3158454273),u(3259730800,3505952657),u(3345764771,106217008),u(3516065817,3606008344),u(3600352804,1432725776),u(4094571909,1467031594),u(275423344,851169720),u(430227734,3100823752),u(506948616,1363258195),u(659060556,3750685593),u(883997877,3785050280),u(958139571,3318307427),u(1322822218,3812723403),u(1537002063,2003034995),u(1747873779,3602036899),u(1955562222,1575990012),u(2024104815,1125592928),u(2227730452,2716904306),u(2361852424,442776044),u(2428436474,593698344),u(2756734187,3733110249),u(3204031479,2999351573),u(3329325298,3815920427),u(3391569614,3928383900),u(3515267271,566280711),u(3940187606,3454069534),u(4118630271,4000239992),u(116418474,1914138554),u(174292421,2731055270),u(289380356,3203993006),u(460393269,320620315),u(685471733,587496836),u(852142971,1086792851),u(1017036298,365543100),u(1126000580,2618297676),u(1288033470,3409855158),u(1501505948,4234509866),u(1607167915,987167468),u(1816402316,1246189591)],h=[];(function(){for(var g=0;g<80;g++)h[g]=u()})();var f=l.SHA512=o.extend({_doReset:function(){this._hash=new c.init([new s.init(1779033703,4089235720),new s.init(3144134277,2227873595),new s.init(1013904242,4271175723),new s.init(2773480762,1595750129),new s.init(1359893119,2917565137),new s.init(2600822924,725511199),new s.init(528734635,4215389547),new s.init(1541459225,327033209)])},_doProcessBlock:function(g,p){for(var m=this._hash.words,_=m[0],E=m[1],S=m[2],C=m[3],b=m[4],T=m[5],R=m[6],A=m[7],O=_.high,x=_.low,M=E.high,$=E.low,U=S.high,V=S.low,W=C.high,z=C.low,L=b.high,D=b.low,j=T.high,F=T.low,y=R.high,I=R.low,N=A.high,B=A.low,K=O,X=x,ee=M,ne=$,fe=U,ae=V,oe=W,he=z,me=L,ie=D,te=j,ge=F,pe=y,be=I,Se=N,ue=B,re=0;re<80;re++){var Re,we,xe=h[re];if(re<16)we=xe.high=g[p+re*2]|0,Re=xe.low=g[p+re*2+1]|0;else{var We=h[re-15],Ve=We.high,Rt=We.low,xt=(Ve>>>1|Rt<<31)^(Ve>>>8|Rt<<24)^Ve>>>7,Xe=(Rt>>>1|Ve<<31)^(Rt>>>8|Ve<<24)^(Rt>>>7|Ve<<25),Ge=h[re-2],Je=Ge.high,st=Ge.low,At=(Je>>>19|st<<13)^(Je<<3|st>>>29)^Je>>>6,Ot=(st>>>19|Je<<13)^(st<<3|Je>>>29)^(st>>>6|Je<<26),dn=h[re-7],an=dn.high,on=dn.low,ke=h[re-16],Ze=ke.high,Mt=ke.low;Re=Xe+on,we=xt+an+(Re>>>0<Xe>>>0?1:0),Re=Re+Ot,we=we+At+(Re>>>0<Ot>>>0?1:0),Re=Re+Mt,we=we+Ze+(Re>>>0<Mt>>>0?1:0),xe.high=we,xe.low=Re}var En=me&te^~me&pe,nr=ie&ge^~ie&be,_n=K&ee^K&fe^ee&fe,qt=X&ne^X&ae^ne&ae,it=(K>>>28|X<<4)^(K<<30|X>>>2)^(K<<25|X>>>7),Nt=(X>>>28|K<<4)^(X<<30|K>>>2)^(X<<25|K>>>7),ct=(me>>>14|ie<<18)^(me>>>18|ie<<14)^(me<<23|ie>>>9),Be=(ie>>>14|me<<18)^(ie>>>18|me<<14)^(ie<<23|me>>>9),nt=d[re],Bt=nt.high,Le=nt.low,Ue=ue+Be,ze=Se+ct+(Ue>>>0<ue>>>0?1:0),Ue=Ue+nr,ze=ze+En+(Ue>>>0<nr>>>0?1:0),Ue=Ue+Le,ze=ze+Bt+(Ue>>>0<Le>>>0?1:0),Ue=Ue+Re,ze=ze+we+(Ue>>>0<Re>>>0?1:0),mt=Nt+qt,Ft=it+_n+(mt>>>0<Nt>>>0?1:0);Se=pe,ue=be,pe=te,be=ge,te=me,ge=ie,ie=he+Ue|0,me=oe+ze+(ie>>>0<he>>>0?1:0)|0,oe=fe,he=ae,fe=ee,ae=ne,ee=K,ne=X,X=Ue+mt|0,K=ze+Ft+(X>>>0<Ue>>>0?1:0)|0}x=_.low=x+X,_.high=O+K+(x>>>0<X>>>0?1:0),$=E.low=$+ne,E.high=M+ee+($>>>0<ne>>>0?1:0),V=S.low=V+ae,S.high=U+fe+(V>>>0<ae>>>0?1:0),z=C.low=z+he,C.high=W+oe+(z>>>0<he>>>0?1:0),D=b.low=D+ie,b.high=L+me+(D>>>0<ie>>>0?1:0),F=T.low=F+ge,T.high=j+te+(F>>>0<ge>>>0?1:0),I=R.low=I+be,R.high=y+pe+(I>>>0<be>>>0?1:0),B=A.low=B+ue,A.high=N+Se+(B>>>0<ue>>>0?1:0)},_doFinalize:function(){var g=this._data,p=g.words,m=this._nDataBytes*8,_=g.sigBytes*8;p[_>>>5]|=128<<24-_%32,p[(_+128>>>10<<5)+30]=Math.floor(m/4294967296),p[(_+128>>>10<<5)+31]=m,g.sigBytes=p.length*4,this._process();var E=this._hash.toX32();return E},clone:function(){var g=o.clone.call(this);return g._hash=this._hash.clone(),g},blockSize:1024/32});r.SHA512=o._createHelper(f),r.HmacSHA512=o._createHmacHelper(f)}(),n.SHA512})}(vw)),vw.exports}var Ew={exports:{}},MV;function V2e(){return MV||(MV=1,function(e,t){(function(n,r,i){e.exports=r(Rn(),nb(),fJ())})(Ht,function(n){return function(){var r=n,i=r.x64,o=i.Word,a=i.WordArray,s=r.algo,c=s.SHA512,l=s.SHA384=c.extend({_doReset:function(){this._hash=new a.init([new o.init(3418070365,3238371032),new o.init(1654270250,914150663),new o.init(2438529370,812702999),new o.init(355462360,4144912697),new o.init(1731405415,4290775857),new o.init(2394180231,1750603025),new o.init(3675008525,1694076839),new o.init(1203062813,3204075428)])},_doFinalize:function(){var u=c._doFinalize.call(this);return u.sigBytes-=16,u}});r.SHA384=c._createHelper(l),r.HmacSHA384=c._createHmacHelper(l)}(),n.SHA384})}(Ew)),Ew.exports}var _w={exports:{}},FV;function j2e(){return FV||(FV=1,function(e,t){(function(n,r,i){e.exports=r(Rn(),nb())})(Ht,function(n){return function(r){var i=n,o=i.lib,a=o.WordArray,s=o.Hasher,c=i.x64,l=c.Word,u=i.algo,d=[],h=[],f=[];(function(){for(var m=1,_=0,E=0;E<24;E++){d[m+5*_]=(E+1)*(E+2)/2%64;var S=_%5,C=(2*m+3*_)%5;m=S,_=C}for(var m=0;m<5;m++)for(var _=0;_<5;_++)h[m+5*_]=_+(2*m+3*_)%5*5;for(var b=1,T=0;T<24;T++){for(var R=0,A=0,O=0;O<7;O++){if(b&1){var x=(1<<O)-1;x<32?A^=1<<x:R^=1<<x-32}b&128?b=b<<1^113:b<<=1}f[T]=l.create(R,A)}})();var g=[];(function(){for(var m=0;m<25;m++)g[m]=l.create()})();var p=u.SHA3=s.extend({cfg:s.cfg.extend({outputLength:512}),_doReset:function(){for(var m=this._state=[],_=0;_<25;_++)m[_]=new l.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(m,_){for(var E=this._state,S=this.blockSize/2,C=0;C<S;C++){var b=m[_+2*C],T=m[_+2*C+1];b=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,T=(T<<8|T>>>24)&16711935|(T<<24|T>>>8)&4278255360;var R=E[C];R.high^=T,R.low^=b}for(var A=0;A<24;A++){for(var O=0;O<5;O++){for(var x=0,M=0,$=0;$<5;$++){var R=E[O+5*$];x^=R.high,M^=R.low}var U=g[O];U.high=x,U.low=M}for(var O=0;O<5;O++)for(var V=g[(O+4)%5],W=g[(O+1)%5],z=W.high,L=W.low,x=V.high^(z<<1|L>>>31),M=V.low^(L<<1|z>>>31),$=0;$<5;$++){var R=E[O+5*$];R.high^=x,R.low^=M}for(var D=1;D<25;D++){var x,M,R=E[D],j=R.high,F=R.low,y=d[D];y<32?(x=j<<y|F>>>32-y,M=F<<y|j>>>32-y):(x=F<<y-32|j>>>64-y,M=j<<y-32|F>>>64-y);var I=g[h[D]];I.high=x,I.low=M}var N=g[0],B=E[0];N.high=B.high,N.low=B.low;for(var O=0;O<5;O++)for(var $=0;$<5;$++){var D=O+5*$,R=E[D],K=g[D],X=g[(O+1)%5+5*$],ee=g[(O+2)%5+5*$];R.high=K.high^~X.high&ee.high,R.low=K.low^~X.low&ee.low}var R=E[0],ne=f[A];R.high^=ne.high,R.low^=ne.low}},_doFinalize:function(){var m=this._data,_=m.words;this._nDataBytes*8;var E=m.sigBytes*8,S=this.blockSize*32;_[E>>>5]|=1<<24-E%32,_[(r.ceil((E+1)/S)*S>>>5)-1]|=128,m.sigBytes=_.length*4,this._process();for(var C=this._state,b=this.cfg.outputLength/8,T=b/8,R=[],A=0;A<T;A++){var O=C[A],x=O.high,M=O.low;x=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,M=(M<<8|M>>>24)&16711935|(M<<24|M>>>8)&4278255360,R.push(M),R.push(x)}return new a.init(R,b)},clone:function(){for(var m=s.clone.call(this),_=m._state=this._state.slice(0),E=0;E<25;E++)_[E]=_[E].clone();return m}});i.SHA3=s._createHelper(p),i.HmacSHA3=s._createHmacHelper(p)}(Math),n.SHA3})}(_w)),_w.exports}var Sw={exports:{}},UV;function H2e(){return UV||(UV=1,function(e,t){(function(n,r){e.exports=r(Rn())})(Ht,function(n){/** @preserve
			(c) 2012 by Cédric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return function(r){var i=n,o=i.lib,a=o.WordArray,s=o.Hasher,c=i.algo,l=a.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),u=a.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),d=a.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),h=a.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),f=a.create([0,1518500249,1859775393,2400959708,2840853838]),g=a.create([1352829926,1548603684,1836072691,2053994217,0]),p=c.RIPEMD160=s.extend({_doReset:function(){this._hash=a.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(T,R){for(var A=0;A<16;A++){var O=R+A,x=T[O];T[O]=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360}var M=this._hash.words,$=f.words,U=g.words,V=l.words,W=u.words,z=d.words,L=h.words,D,j,F,y,I,N,B,K,X,ee;N=D=M[0],B=j=M[1],K=F=M[2],X=y=M[3],ee=I=M[4];for(var ne,A=0;A<80;A+=1)ne=D+T[R+V[A]]|0,A<16?ne+=m(j,F,y)+$[0]:A<32?ne+=_(j,F,y)+$[1]:A<48?ne+=E(j,F,y)+$[2]:A<64?ne+=S(j,F,y)+$[3]:ne+=C(j,F,y)+$[4],ne=ne|0,ne=b(ne,z[A]),ne=ne+I|0,D=I,I=y,y=b(F,10),F=j,j=ne,ne=N+T[R+W[A]]|0,A<16?ne+=C(B,K,X)+U[0]:A<32?ne+=S(B,K,X)+U[1]:A<48?ne+=E(B,K,X)+U[2]:A<64?ne+=_(B,K,X)+U[3]:ne+=m(B,K,X)+U[4],ne=ne|0,ne=b(ne,L[A]),ne=ne+ee|0,N=ee,ee=X,X=b(K,10),K=B,B=ne;ne=M[1]+F+X|0,M[1]=M[2]+y+ee|0,M[2]=M[3]+I+N|0,M[3]=M[4]+D+B|0,M[4]=M[0]+j+K|0,M[0]=ne},_doFinalize:function(){var T=this._data,R=T.words,A=this._nDataBytes*8,O=T.sigBytes*8;R[O>>>5]|=128<<24-O%32,R[(O+64>>>9<<4)+14]=(A<<8|A>>>24)&16711935|(A<<24|A>>>8)&4278255360,T.sigBytes=(R.length+1)*4,this._process();for(var x=this._hash,M=x.words,$=0;$<5;$++){var U=M[$];M[$]=(U<<8|U>>>24)&16711935|(U<<24|U>>>8)&4278255360}return x},clone:function(){var T=s.clone.call(this);return T._hash=this._hash.clone(),T}});function m(T,R,A){return T^R^A}function _(T,R,A){return T&R|~T&A}function E(T,R,A){return(T|~R)^A}function S(T,R,A){return T&A|R&~A}function C(T,R,A){return T^(R|~A)}function b(T,R){return T<<R|T>>>32-R}i.RIPEMD160=s._createHelper(p),i.HmacRIPEMD160=s._createHmacHelper(p)}(),n.RIPEMD160})}(Sw)),Sw.exports}var yw={exports:{}},BV;function jD(){return BV||(BV=1,function(e,t){(function(n,r){e.exports=r(Rn())})(Ht,function(n){(function(){var r=n,i=r.lib,o=i.Base,a=r.enc,s=a.Utf8,c=r.algo;c.HMAC=o.extend({init:function(l,u){l=this._hasher=new l.init,typeof u=="string"&&(u=s.parse(u));var d=l.blockSize,h=d*4;u.sigBytes>h&&(u=l.finalize(u)),u.clamp();for(var f=this._oKey=u.clone(),g=this._iKey=u.clone(),p=f.words,m=g.words,_=0;_<d;_++)p[_]^=1549556828,m[_]^=909522486;f.sigBytes=g.sigBytes=h,this.reset()},reset:function(){var l=this._hasher;l.reset(),l.update(this._iKey)},update:function(l){return this._hasher.update(l),this},finalize:function(l){var u=this._hasher,d=u.finalize(l);u.reset();var h=u.finalize(this._oKey.clone().concat(d));return h}})})()})}(yw)),yw.exports}var Cw={exports:{}},$V;function z2e(){return $V||($V=1,function(e,t){(function(n,r,i){e.exports=r(Rn(),VD(),jD())})(Ht,function(n){return function(){var r=n,i=r.lib,o=i.Base,a=i.WordArray,s=r.algo,c=s.SHA256,l=s.HMAC,u=s.PBKDF2=o.extend({cfg:o.extend({keySize:128/32,hasher:c,iterations:25e4}),init:function(d){this.cfg=this.cfg.extend(d)},compute:function(d,h){for(var f=this.cfg,g=l.create(f.hasher,d),p=a.create(),m=a.create([1]),_=p.words,E=m.words,S=f.keySize,C=f.iterations;_.length<S;){var b=g.update(h).finalize(m);g.reset();for(var T=b.words,R=T.length,A=b,O=1;O<C;O++){A=g.finalize(A),g.reset();for(var x=A.words,M=0;M<R;M++)T[M]^=x[M]}p.concat(b),E[0]++}return p.sigBytes=S*4,p}});r.PBKDF2=function(d,h,f){return u.create(f).compute(d,h)}}(),n.PBKDF2})}(Cw)),Cw.exports}var bw={exports:{}},VV;function Lu(){return VV||(VV=1,function(e,t){(function(n,r,i){e.exports=r(Rn(),hJ(),jD())})(Ht,function(n){return function(){var r=n,i=r.lib,o=i.Base,a=i.WordArray,s=r.algo,c=s.MD5,l=s.EvpKDF=o.extend({cfg:o.extend({keySize:128/32,hasher:c,iterations:1}),init:function(u){this.cfg=this.cfg.extend(u)},compute:function(u,d){for(var h,f=this.cfg,g=f.hasher.create(),p=a.create(),m=p.words,_=f.keySize,E=f.iterations;m.length<_;){h&&g.update(h),h=g.update(u).finalize(d),g.reset();for(var S=1;S<E;S++)h=g.finalize(h),g.reset();p.concat(h)}return p.sigBytes=_*4,p}});r.EvpKDF=function(u,d,h){return l.create(h).compute(u,d)}}(),n.EvpKDF})}(bw)),bw.exports}var Tw={exports:{}},jV;function Vi(){return jV||(jV=1,function(e,t){(function(n,r,i){e.exports=r(Rn(),Lu())})(Ht,function(n){n.lib.Cipher||function(r){var i=n,o=i.lib,a=o.Base,s=o.WordArray,c=o.BufferedBlockAlgorithm,l=i.enc;l.Utf8;var u=l.Base64,d=i.algo,h=d.EvpKDF,f=o.Cipher=c.extend({cfg:a.extend(),createEncryptor:function(x,M){return this.create(this._ENC_XFORM_MODE,x,M)},createDecryptor:function(x,M){return this.create(this._DEC_XFORM_MODE,x,M)},init:function(x,M,$){this.cfg=this.cfg.extend($),this._xformMode=x,this._key=M,this.reset()},reset:function(){c.reset.call(this),this._doReset()},process:function(x){return this._append(x),this._process()},finalize:function(x){x&&this._append(x);var M=this._doFinalize();return M},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function x(M){return typeof M=="string"?O:T}return function(M){return{encrypt:function($,U,V){return x(U).encrypt(M,$,U,V)},decrypt:function($,U,V){return x(U).decrypt(M,$,U,V)}}}}()});o.StreamCipher=f.extend({_doFinalize:function(){var x=this._process(!0);return x},blockSize:1});var g=i.mode={},p=o.BlockCipherMode=a.extend({createEncryptor:function(x,M){return this.Encryptor.create(x,M)},createDecryptor:function(x,M){return this.Decryptor.create(x,M)},init:function(x,M){this._cipher=x,this._iv=M}}),m=g.CBC=function(){var x=p.extend();x.Encryptor=x.extend({processBlock:function($,U){var V=this._cipher,W=V.blockSize;M.call(this,$,U,W),V.encryptBlock($,U),this._prevBlock=$.slice(U,U+W)}}),x.Decryptor=x.extend({processBlock:function($,U){var V=this._cipher,W=V.blockSize,z=$.slice(U,U+W);V.decryptBlock($,U),M.call(this,$,U,W),this._prevBlock=z}});function M($,U,V){var W,z=this._iv;z?(W=z,this._iv=r):W=this._prevBlock;for(var L=0;L<V;L++)$[U+L]^=W[L]}return x}(),_=i.pad={},E=_.Pkcs7={pad:function(x,M){for(var $=M*4,U=$-x.sigBytes%$,V=U<<24|U<<16|U<<8|U,W=[],z=0;z<U;z+=4)W.push(V);var L=s.create(W,U);x.concat(L)},unpad:function(x){var M=x.words[x.sigBytes-1>>>2]&255;x.sigBytes-=M}};o.BlockCipher=f.extend({cfg:f.cfg.extend({mode:m,padding:E}),reset:function(){var x;f.reset.call(this);var M=this.cfg,$=M.iv,U=M.mode;this._xformMode==this._ENC_XFORM_MODE?x=U.createEncryptor:(x=U.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==x?this._mode.init(this,$&&$.words):(this._mode=x.call(U,this,$&&$.words),this._mode.__creator=x)},_doProcessBlock:function(x,M){this._mode.processBlock(x,M)},_doFinalize:function(){var x,M=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(M.pad(this._data,this.blockSize),x=this._process(!0)):(x=this._process(!0),M.unpad(x)),x},blockSize:128/32});var S=o.CipherParams=a.extend({init:function(x){this.mixIn(x)},toString:function(x){return(x||this.formatter).stringify(this)}}),C=i.format={},b=C.OpenSSL={stringify:function(x){var M,$=x.ciphertext,U=x.salt;return U?M=s.create([1398893684,1701076831]).concat(U).concat($):M=$,M.toString(u)},parse:function(x){var M,$=u.parse(x),U=$.words;return U[0]==1398893684&&U[1]==1701076831&&(M=s.create(U.slice(2,4)),U.splice(0,4),$.sigBytes-=16),S.create({ciphertext:$,salt:M})}},T=o.SerializableCipher=a.extend({cfg:a.extend({format:b}),encrypt:function(x,M,$,U){U=this.cfg.extend(U);var V=x.createEncryptor($,U),W=V.finalize(M),z=V.cfg;return S.create({ciphertext:W,key:$,iv:z.iv,algorithm:x,mode:z.mode,padding:z.padding,blockSize:x.blockSize,formatter:U.format})},decrypt:function(x,M,$,U){U=this.cfg.extend(U),M=this._parse(M,U.format);var V=x.createDecryptor($,U).finalize(M.ciphertext);return V},_parse:function(x,M){return typeof x=="string"?M.parse(x,this):x}}),R=i.kdf={},A=R.OpenSSL={execute:function(x,M,$,U,V){if(U||(U=s.random(64/8)),V)var W=h.create({keySize:M+$,hasher:V}).compute(x,U);else var W=h.create({keySize:M+$}).compute(x,U);var z=s.create(W.words.slice(M),$*4);return W.sigBytes=M*4,S.create({key:W,iv:z,salt:U})}},O=o.PasswordBasedCipher=T.extend({cfg:T.cfg.extend({kdf:A}),encrypt:function(x,M,$,U){U=this.cfg.extend(U);var V=U.kdf.execute($,x.keySize,x.ivSize,U.salt,U.hasher);U.iv=V.iv;var W=T.encrypt.call(this,x,M,V.key,U);return W.mixIn(V),W},decrypt:function(x,M,$,U){U=this.cfg.extend(U),M=this._parse(M,U.format);var V=U.kdf.execute($,x.keySize,x.ivSize,M.salt,U.hasher);U.iv=V.iv;var W=T.decrypt.call(this,x,M,V.key,U);return W}})}()})}(Tw)),Tw.exports}var Rw={exports:{}},HV;function W2e(){return HV||(HV=1,function(e,t){(function(n,r,i){e.exports=r(Rn(),Vi())})(Ht,function(n){return n.mode.CFB=function(){var r=n.lib.BlockCipherMode.extend();r.Encryptor=r.extend({processBlock:function(o,a){var s=this._cipher,c=s.blockSize;i.call(this,o,a,c,s),this._prevBlock=o.slice(a,a+c)}}),r.Decryptor=r.extend({processBlock:function(o,a){var s=this._cipher,c=s.blockSize,l=o.slice(a,a+c);i.call(this,o,a,c,s),this._prevBlock=l}});function i(o,a,s,c){var l,u=this._iv;u?(l=u.slice(0),this._iv=void 0):l=this._prevBlock,c.encryptBlock(l,0);for(var d=0;d<s;d++)o[a+d]^=l[d]}return r}(),n.mode.CFB})}(Rw)),Rw.exports}var ww={exports:{}},zV;function G2e(){return zV||(zV=1,function(e,t){(function(n,r,i){e.exports=r(Rn(),Vi())})(Ht,function(n){return n.mode.CTR=function(){var r=n.lib.BlockCipherMode.extend(),i=r.Encryptor=r.extend({processBlock:function(o,a){var s=this._cipher,c=s.blockSize,l=this._iv,u=this._counter;l&&(u=this._counter=l.slice(0),this._iv=void 0);var d=u.slice(0);s.encryptBlock(d,0),u[c-1]=u[c-1]+1|0;for(var h=0;h<c;h++)o[a+h]^=d[h]}});return r.Decryptor=i,r}(),n.mode.CTR})}(ww)),ww.exports}var Iw={exports:{}},WV;function K2e(){return WV||(WV=1,function(e,t){(function(n,r,i){e.exports=r(Rn(),Vi())})(Ht,function(n){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return n.mode.CTRGladman=function(){var r=n.lib.BlockCipherMode.extend();function i(s){if((s>>24&255)===255){var c=s>>16&255,l=s>>8&255,u=s&255;c===255?(c=0,l===255?(l=0,u===255?u=0:++u):++l):++c,s=0,s+=c<<16,s+=l<<8,s+=u}else s+=1<<24;return s}function o(s){return(s[0]=i(s[0]))===0&&(s[1]=i(s[1])),s}var a=r.Encryptor=r.extend({processBlock:function(s,c){var l=this._cipher,u=l.blockSize,d=this._iv,h=this._counter;d&&(h=this._counter=d.slice(0),this._iv=void 0),o(h);var f=h.slice(0);l.encryptBlock(f,0);for(var g=0;g<u;g++)s[c+g]^=f[g]}});return r.Decryptor=a,r}(),n.mode.CTRGladman})}(Iw)),Iw.exports}var Aw={exports:{}},GV;function q2e(){return GV||(GV=1,function(e,t){(function(n,r,i){e.exports=r(Rn(),Vi())})(Ht,function(n){return n.mode.OFB=function(){var r=n.lib.BlockCipherMode.extend(),i=r.Encryptor=r.extend({processBlock:function(o,a){var s=this._cipher,c=s.blockSize,l=this._iv,u=this._keystream;l&&(u=this._keystream=l.slice(0),this._iv=void 0),s.encryptBlock(u,0);for(var d=0;d<c;d++)o[a+d]^=u[d]}});return r.Decryptor=i,r}(),n.mode.OFB})}(Aw)),Aw.exports}var Ow={exports:{}},KV;function Y2e(){return KV||(KV=1,function(e,t){(function(n,r,i){e.exports=r(Rn(),Vi())})(Ht,function(n){return n.mode.ECB=function(){var r=n.lib.BlockCipherMode.extend();return r.Encryptor=r.extend({processBlock:function(i,o){this._cipher.encryptBlock(i,o)}}),r.Decryptor=r.extend({processBlock:function(i,o){this._cipher.decryptBlock(i,o)}}),r}(),n.mode.ECB})}(Ow)),Ow.exports}var xw={exports:{}},qV;function X2e(){return qV||(qV=1,function(e,t){(function(n,r,i){e.exports=r(Rn(),Vi())})(Ht,function(n){return n.pad.AnsiX923={pad:function(r,i){var o=r.sigBytes,a=i*4,s=a-o%a,c=o+s-1;r.clamp(),r.words[c>>>2]|=s<<24-c%4*8,r.sigBytes+=s},unpad:function(r){var i=r.words[r.sigBytes-1>>>2]&255;r.sigBytes-=i}},n.pad.Ansix923})}(xw)),xw.exports}var Nw={exports:{}},YV;function J2e(){return YV||(YV=1,function(e,t){(function(n,r,i){e.exports=r(Rn(),Vi())})(Ht,function(n){return n.pad.Iso10126={pad:function(r,i){var o=i*4,a=o-r.sigBytes%o;r.concat(n.lib.WordArray.random(a-1)).concat(n.lib.WordArray.create([a<<24],1))},unpad:function(r){var i=r.words[r.sigBytes-1>>>2]&255;r.sigBytes-=i}},n.pad.Iso10126})}(Nw)),Nw.exports}var Pw={exports:{}},XV;function Q2e(){return XV||(XV=1,function(e,t){(function(n,r,i){e.exports=r(Rn(),Vi())})(Ht,function(n){return n.pad.Iso97971={pad:function(r,i){r.concat(n.lib.WordArray.create([2147483648],1)),n.pad.ZeroPadding.pad(r,i)},unpad:function(r){n.pad.ZeroPadding.unpad(r),r.sigBytes--}},n.pad.Iso97971})}(Pw)),Pw.exports}var Dw={exports:{}},JV;function Z2e(){return JV||(JV=1,function(e,t){(function(n,r,i){e.exports=r(Rn(),Vi())})(Ht,function(n){return n.pad.ZeroPadding={pad:function(r,i){var o=i*4;r.clamp(),r.sigBytes+=o-(r.sigBytes%o||o)},unpad:function(r){for(var i=r.words,o=r.sigBytes-1,o=r.sigBytes-1;o>=0;o--)if(i[o>>>2]>>>24-o%4*8&255){r.sigBytes=o+1;break}}},n.pad.ZeroPadding})}(Dw)),Dw.exports}var Lw={exports:{}},QV;function eLe(){return QV||(QV=1,function(e,t){(function(n,r,i){e.exports=r(Rn(),Vi())})(Ht,function(n){return n.pad.NoPadding={pad:function(){},unpad:function(){}},n.pad.NoPadding})}(Lw)),Lw.exports}var kw={exports:{}},ZV;function tLe(){return ZV||(ZV=1,function(e,t){(function(n,r,i){e.exports=r(Rn(),Vi())})(Ht,function(n){return function(r){var i=n,o=i.lib,a=o.CipherParams,s=i.enc,c=s.Hex,l=i.format;l.Hex={stringify:function(u){return u.ciphertext.toString(c)},parse:function(u){var d=c.parse(u);return a.create({ciphertext:d})}}}(),n.format.Hex})}(kw)),kw.exports}var Mw={exports:{}},e8;function nLe(){return e8||(e8=1,function(e,t){(function(n,r,i){e.exports=r(Rn(),ih(),oh(),Lu(),Vi())})(Ht,function(n){return function(){var r=n,i=r.lib,o=i.BlockCipher,a=r.algo,s=[],c=[],l=[],u=[],d=[],h=[],f=[],g=[],p=[],m=[];(function(){for(var S=[],C=0;C<256;C++)C<128?S[C]=C<<1:S[C]=C<<1^283;for(var b=0,T=0,C=0;C<256;C++){var R=T^T<<1^T<<2^T<<3^T<<4;R=R>>>8^R&255^99,s[b]=R,c[R]=b;var A=S[b],O=S[A],x=S[O],M=S[R]*257^R*16843008;l[b]=M<<24|M>>>8,u[b]=M<<16|M>>>16,d[b]=M<<8|M>>>24,h[b]=M;var M=x*16843009^O*65537^A*257^b*16843008;f[R]=M<<24|M>>>8,g[R]=M<<16|M>>>16,p[R]=M<<8|M>>>24,m[R]=M,b?(b=A^S[S[S[x^A]]],T^=S[S[T]]):b=T=1}})();var _=[0,1,2,4,8,16,32,64,128,27,54],E=a.AES=o.extend({_doReset:function(){var S;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var C=this._keyPriorReset=this._key,b=C.words,T=C.sigBytes/4,R=this._nRounds=T+6,A=(R+1)*4,O=this._keySchedule=[],x=0;x<A;x++)x<T?O[x]=b[x]:(S=O[x-1],x%T?T>6&&x%T==4&&(S=s[S>>>24]<<24|s[S>>>16&255]<<16|s[S>>>8&255]<<8|s[S&255]):(S=S<<8|S>>>24,S=s[S>>>24]<<24|s[S>>>16&255]<<16|s[S>>>8&255]<<8|s[S&255],S^=_[x/T|0]<<24),O[x]=O[x-T]^S);for(var M=this._invKeySchedule=[],$=0;$<A;$++){var x=A-$;if($%4)var S=O[x];else var S=O[x-4];$<4||x<=4?M[$]=S:M[$]=f[s[S>>>24]]^g[s[S>>>16&255]]^p[s[S>>>8&255]]^m[s[S&255]]}}},encryptBlock:function(S,C){this._doCryptBlock(S,C,this._keySchedule,l,u,d,h,s)},decryptBlock:function(S,C){var b=S[C+1];S[C+1]=S[C+3],S[C+3]=b,this._doCryptBlock(S,C,this._invKeySchedule,f,g,p,m,c);var b=S[C+1];S[C+1]=S[C+3],S[C+3]=b},_doCryptBlock:function(S,C,b,T,R,A,O,x){for(var M=this._nRounds,$=S[C]^b[0],U=S[C+1]^b[1],V=S[C+2]^b[2],W=S[C+3]^b[3],z=4,L=1;L<M;L++){var D=T[$>>>24]^R[U>>>16&255]^A[V>>>8&255]^O[W&255]^b[z++],j=T[U>>>24]^R[V>>>16&255]^A[W>>>8&255]^O[$&255]^b[z++],F=T[V>>>24]^R[W>>>16&255]^A[$>>>8&255]^O[U&255]^b[z++],y=T[W>>>24]^R[$>>>16&255]^A[U>>>8&255]^O[V&255]^b[z++];$=D,U=j,V=F,W=y}var D=(x[$>>>24]<<24|x[U>>>16&255]<<16|x[V>>>8&255]<<8|x[W&255])^b[z++],j=(x[U>>>24]<<24|x[V>>>16&255]<<16|x[W>>>8&255]<<8|x[$&255])^b[z++],F=(x[V>>>24]<<24|x[W>>>16&255]<<16|x[$>>>8&255]<<8|x[U&255])^b[z++],y=(x[W>>>24]<<24|x[$>>>16&255]<<16|x[U>>>8&255]<<8|x[V&255])^b[z++];S[C]=D,S[C+1]=j,S[C+2]=F,S[C+3]=y},keySize:256/32});r.AES=o._createHelper(E)}(),n.AES})}(Mw)),Mw.exports}var Fw={exports:{}},t8;function rLe(){return t8||(t8=1,function(e,t){(function(n,r,i){e.exports=r(Rn(),ih(),oh(),Lu(),Vi())})(Ht,function(n){return function(){var r=n,i=r.lib,o=i.WordArray,a=i.BlockCipher,s=r.algo,c=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],l=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],u=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],d=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],h=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],f=s.DES=a.extend({_doReset:function(){for(var _=this._key,E=_.words,S=[],C=0;C<56;C++){var b=c[C]-1;S[C]=E[b>>>5]>>>31-b%32&1}for(var T=this._subKeys=[],R=0;R<16;R++){for(var A=T[R]=[],O=u[R],C=0;C<24;C++)A[C/6|0]|=S[(l[C]-1+O)%28]<<31-C%6,A[4+(C/6|0)]|=S[28+(l[C+24]-1+O)%28]<<31-C%6;A[0]=A[0]<<1|A[0]>>>31;for(var C=1;C<7;C++)A[C]=A[C]>>>(C-1)*4+3;A[7]=A[7]<<5|A[7]>>>27}for(var x=this._invSubKeys=[],C=0;C<16;C++)x[C]=T[15-C]},encryptBlock:function(_,E){this._doCryptBlock(_,E,this._subKeys)},decryptBlock:function(_,E){this._doCryptBlock(_,E,this._invSubKeys)},_doCryptBlock:function(_,E,S){this._lBlock=_[E],this._rBlock=_[E+1],g.call(this,4,252645135),g.call(this,16,65535),p.call(this,2,858993459),p.call(this,8,16711935),g.call(this,1,1431655765);for(var C=0;C<16;C++){for(var b=S[C],T=this._lBlock,R=this._rBlock,A=0,O=0;O<8;O++)A|=d[O][((R^b[O])&h[O])>>>0];this._lBlock=R,this._rBlock=T^A}var x=this._lBlock;this._lBlock=this._rBlock,this._rBlock=x,g.call(this,1,1431655765),p.call(this,8,16711935),p.call(this,2,858993459),g.call(this,16,65535),g.call(this,4,252645135),_[E]=this._lBlock,_[E+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function g(_,E){var S=(this._lBlock>>>_^this._rBlock)&E;this._rBlock^=S,this._lBlock^=S<<_}function p(_,E){var S=(this._rBlock>>>_^this._lBlock)&E;this._lBlock^=S,this._rBlock^=S<<_}r.DES=a._createHelper(f);var m=s.TripleDES=a.extend({_doReset:function(){var _=this._key,E=_.words;if(E.length!==2&&E.length!==4&&E.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var S=E.slice(0,2),C=E.length<4?E.slice(0,2):E.slice(2,4),b=E.length<6?E.slice(0,2):E.slice(4,6);this._des1=f.createEncryptor(o.create(S)),this._des2=f.createEncryptor(o.create(C)),this._des3=f.createEncryptor(o.create(b))},encryptBlock:function(_,E){this._des1.encryptBlock(_,E),this._des2.decryptBlock(_,E),this._des3.encryptBlock(_,E)},decryptBlock:function(_,E){this._des3.decryptBlock(_,E),this._des2.encryptBlock(_,E),this._des1.decryptBlock(_,E)},keySize:192/32,ivSize:64/32,blockSize:64/32});r.TripleDES=a._createHelper(m)}(),n.TripleDES})}(Fw)),Fw.exports}var Uw={exports:{}},n8;function iLe(){return n8||(n8=1,function(e,t){(function(n,r,i){e.exports=r(Rn(),ih(),oh(),Lu(),Vi())})(Ht,function(n){return function(){var r=n,i=r.lib,o=i.StreamCipher,a=r.algo,s=a.RC4=o.extend({_doReset:function(){for(var u=this._key,d=u.words,h=u.sigBytes,f=this._S=[],g=0;g<256;g++)f[g]=g;for(var g=0,p=0;g<256;g++){var m=g%h,_=d[m>>>2]>>>24-m%4*8&255;p=(p+f[g]+_)%256;var E=f[g];f[g]=f[p],f[p]=E}this._i=this._j=0},_doProcessBlock:function(u,d){u[d]^=c.call(this)},keySize:256/32,ivSize:0});function c(){for(var u=this._S,d=this._i,h=this._j,f=0,g=0;g<4;g++){d=(d+1)%256,h=(h+u[d])%256;var p=u[d];u[d]=u[h],u[h]=p,f|=u[(u[d]+u[h])%256]<<24-g*8}return this._i=d,this._j=h,f}r.RC4=o._createHelper(s);var l=a.RC4Drop=s.extend({cfg:s.cfg.extend({drop:192}),_doReset:function(){s._doReset.call(this);for(var u=this.cfg.drop;u>0;u--)c.call(this)}});r.RC4Drop=o._createHelper(l)}(),n.RC4})}(Uw)),Uw.exports}var Bw={exports:{}},r8;function oLe(){return r8||(r8=1,function(e,t){(function(n,r,i){e.exports=r(Rn(),ih(),oh(),Lu(),Vi())})(Ht,function(n){return function(){var r=n,i=r.lib,o=i.StreamCipher,a=r.algo,s=[],c=[],l=[],u=a.Rabbit=o.extend({_doReset:function(){for(var h=this._key.words,f=this.cfg.iv,g=0;g<4;g++)h[g]=(h[g]<<8|h[g]>>>24)&16711935|(h[g]<<24|h[g]>>>8)&4278255360;var p=this._X=[h[0],h[3]<<16|h[2]>>>16,h[1],h[0]<<16|h[3]>>>16,h[2],h[1]<<16|h[0]>>>16,h[3],h[2]<<16|h[1]>>>16],m=this._C=[h[2]<<16|h[2]>>>16,h[0]&4294901760|h[1]&65535,h[3]<<16|h[3]>>>16,h[1]&4294901760|h[2]&65535,h[0]<<16|h[0]>>>16,h[2]&4294901760|h[3]&65535,h[1]<<16|h[1]>>>16,h[3]&4294901760|h[0]&65535];this._b=0;for(var g=0;g<4;g++)d.call(this);for(var g=0;g<8;g++)m[g]^=p[g+4&7];if(f){var _=f.words,E=_[0],S=_[1],C=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,b=(S<<8|S>>>24)&16711935|(S<<24|S>>>8)&4278255360,T=C>>>16|b&4294901760,R=b<<16|C&65535;m[0]^=C,m[1]^=T,m[2]^=b,m[3]^=R,m[4]^=C,m[5]^=T,m[6]^=b,m[7]^=R;for(var g=0;g<4;g++)d.call(this)}},_doProcessBlock:function(h,f){var g=this._X;d.call(this),s[0]=g[0]^g[5]>>>16^g[3]<<16,s[1]=g[2]^g[7]>>>16^g[5]<<16,s[2]=g[4]^g[1]>>>16^g[7]<<16,s[3]=g[6]^g[3]>>>16^g[1]<<16;for(var p=0;p<4;p++)s[p]=(s[p]<<8|s[p]>>>24)&16711935|(s[p]<<24|s[p]>>>8)&4278255360,h[f+p]^=s[p]},blockSize:128/32,ivSize:64/32});function d(){for(var h=this._X,f=this._C,g=0;g<8;g++)c[g]=f[g];f[0]=f[0]+1295307597+this._b|0,f[1]=f[1]+3545052371+(f[0]>>>0<c[0]>>>0?1:0)|0,f[2]=f[2]+886263092+(f[1]>>>0<c[1]>>>0?1:0)|0,f[3]=f[3]+1295307597+(f[2]>>>0<c[2]>>>0?1:0)|0,f[4]=f[4]+3545052371+(f[3]>>>0<c[3]>>>0?1:0)|0,f[5]=f[5]+886263092+(f[4]>>>0<c[4]>>>0?1:0)|0,f[6]=f[6]+1295307597+(f[5]>>>0<c[5]>>>0?1:0)|0,f[7]=f[7]+3545052371+(f[6]>>>0<c[6]>>>0?1:0)|0,this._b=f[7]>>>0<c[7]>>>0?1:0;for(var g=0;g<8;g++){var p=h[g]+f[g],m=p&65535,_=p>>>16,E=((m*m>>>17)+m*_>>>15)+_*_,S=((p&4294901760)*p|0)+((p&65535)*p|0);l[g]=E^S}h[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,h[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,h[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,h[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,h[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,h[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,h[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,h[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}r.Rabbit=o._createHelper(u)}(),n.Rabbit})}(Bw)),Bw.exports}var $w={exports:{}},i8;function aLe(){return i8||(i8=1,function(e,t){(function(n,r,i){e.exports=r(Rn(),ih(),oh(),Lu(),Vi())})(Ht,function(n){return function(){var r=n,i=r.lib,o=i.StreamCipher,a=r.algo,s=[],c=[],l=[],u=a.RabbitLegacy=o.extend({_doReset:function(){var h=this._key.words,f=this.cfg.iv,g=this._X=[h[0],h[3]<<16|h[2]>>>16,h[1],h[0]<<16|h[3]>>>16,h[2],h[1]<<16|h[0]>>>16,h[3],h[2]<<16|h[1]>>>16],p=this._C=[h[2]<<16|h[2]>>>16,h[0]&4294901760|h[1]&65535,h[3]<<16|h[3]>>>16,h[1]&4294901760|h[2]&65535,h[0]<<16|h[0]>>>16,h[2]&4294901760|h[3]&65535,h[1]<<16|h[1]>>>16,h[3]&4294901760|h[0]&65535];this._b=0;for(var m=0;m<4;m++)d.call(this);for(var m=0;m<8;m++)p[m]^=g[m+4&7];if(f){var _=f.words,E=_[0],S=_[1],C=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,b=(S<<8|S>>>24)&16711935|(S<<24|S>>>8)&4278255360,T=C>>>16|b&4294901760,R=b<<16|C&65535;p[0]^=C,p[1]^=T,p[2]^=b,p[3]^=R,p[4]^=C,p[5]^=T,p[6]^=b,p[7]^=R;for(var m=0;m<4;m++)d.call(this)}},_doProcessBlock:function(h,f){var g=this._X;d.call(this),s[0]=g[0]^g[5]>>>16^g[3]<<16,s[1]=g[2]^g[7]>>>16^g[5]<<16,s[2]=g[4]^g[1]>>>16^g[7]<<16,s[3]=g[6]^g[3]>>>16^g[1]<<16;for(var p=0;p<4;p++)s[p]=(s[p]<<8|s[p]>>>24)&16711935|(s[p]<<24|s[p]>>>8)&4278255360,h[f+p]^=s[p]},blockSize:128/32,ivSize:64/32});function d(){for(var h=this._X,f=this._C,g=0;g<8;g++)c[g]=f[g];f[0]=f[0]+1295307597+this._b|0,f[1]=f[1]+3545052371+(f[0]>>>0<c[0]>>>0?1:0)|0,f[2]=f[2]+886263092+(f[1]>>>0<c[1]>>>0?1:0)|0,f[3]=f[3]+1295307597+(f[2]>>>0<c[2]>>>0?1:0)|0,f[4]=f[4]+3545052371+(f[3]>>>0<c[3]>>>0?1:0)|0,f[5]=f[5]+886263092+(f[4]>>>0<c[4]>>>0?1:0)|0,f[6]=f[6]+1295307597+(f[5]>>>0<c[5]>>>0?1:0)|0,f[7]=f[7]+3545052371+(f[6]>>>0<c[6]>>>0?1:0)|0,this._b=f[7]>>>0<c[7]>>>0?1:0;for(var g=0;g<8;g++){var p=h[g]+f[g],m=p&65535,_=p>>>16,E=((m*m>>>17)+m*_>>>15)+_*_,S=((p&4294901760)*p|0)+((p&65535)*p|0);l[g]=E^S}h[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,h[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,h[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,h[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,h[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,h[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,h[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,h[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}r.RabbitLegacy=o._createHelper(u)}(),n.RabbitLegacy})}($w)),$w.exports}var Vw={exports:{}},o8;function sLe(){return o8||(o8=1,function(e,t){(function(n,r,i){e.exports=r(Rn(),ih(),oh(),Lu(),Vi())})(Ht,function(n){return function(){var r=n,i=r.lib,o=i.BlockCipher,a=r.algo;const s=16,c=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],l=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var u={pbox:[],sbox:[]};function d(m,_){let E=_>>24&255,S=_>>16&255,C=_>>8&255,b=_&255,T=m.sbox[0][E]+m.sbox[1][S];return T=T^m.sbox[2][C],T=T+m.sbox[3][b],T}function h(m,_,E){let S=_,C=E,b;for(let T=0;T<s;++T)S=S^m.pbox[T],C=d(m,S)^C,b=S,S=C,C=b;return b=S,S=C,C=b,C=C^m.pbox[s],S=S^m.pbox[s+1],{left:S,right:C}}function f(m,_,E){let S=_,C=E,b;for(let T=s+1;T>1;--T)S=S^m.pbox[T],C=d(m,S)^C,b=S,S=C,C=b;return b=S,S=C,C=b,C=C^m.pbox[1],S=S^m.pbox[0],{left:S,right:C}}function g(m,_,E){for(let R=0;R<4;R++){m.sbox[R]=[];for(let A=0;A<256;A++)m.sbox[R][A]=l[R][A]}let S=0;for(let R=0;R<s+2;R++)m.pbox[R]=c[R]^_[S],S++,S>=E&&(S=0);let C=0,b=0,T=0;for(let R=0;R<s+2;R+=2)T=h(m,C,b),C=T.left,b=T.right,m.pbox[R]=C,m.pbox[R+1]=b;for(let R=0;R<4;R++)for(let A=0;A<256;A+=2)T=h(m,C,b),C=T.left,b=T.right,m.sbox[R][A]=C,m.sbox[R][A+1]=b;return!0}var p=a.Blowfish=o.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var m=this._keyPriorReset=this._key,_=m.words,E=m.sigBytes/4;g(u,_,E)}},encryptBlock:function(m,_){var E=h(u,m[_],m[_+1]);m[_]=E.left,m[_+1]=E.right},decryptBlock:function(m,_){var E=f(u,m[_],m[_+1]);m[_]=E.left,m[_+1]=E.right},blockSize:64/32,keySize:128/32,ivSize:64/32});r.Blowfish=o._createHelper(p)}(),n.Blowfish})}(Vw)),Vw.exports}(function(e,t){(function(n,r,i){e.exports=r(Rn(),nb(),F2e(),U2e(),ih(),B2e(),oh(),hJ(),VD(),$2e(),fJ(),V2e(),j2e(),H2e(),jD(),z2e(),Lu(),Vi(),W2e(),G2e(),K2e(),q2e(),Y2e(),X2e(),J2e(),Q2e(),Z2e(),eLe(),tLe(),nLe(),rLe(),iLe(),oLe(),aLe(),sLe())})(Ht,function(n){return n})})(dJ);var cLe=dJ.exports;const a8=jd(cLe);let pJ="U2FsdGVkX1/nIO3//tPu/+LNS4S4tsxT3MzmKKuvXDxFFYxlol+eYrZkKcLoUBHMNoDedcuF62hF/qfPSSy59Q==";const lLe=10;{const e=a8.AES.decrypt("U2FsdGVkX1/nIO3//tPu/+LNS4S4tsxT3MzmKKuvXDxFFYxlol+eYrZkKcLoUBHMNoDedcuF62hF/qfPSSy59Q==","U2FsdGVkX1/fp5K6GAphzVxz");pJ=JSON.parse(e.toString(a8.enc.Utf8))}const tt={appId:pJ,channel:{}.AGORA_CHANNEL||"test",token:{}.AGORA_TOKEN?{}.AGORA_TOKEN:null,ShareScreenUID:lLe};function uLe(){return[{channel:{}.AGORA_CHANNEL_0||"test0",token:{}.AGORA_TOKEN_0},{channel:{}.AGORA_CHANNEL_1||"test1",token:{}.AGORA_TOKEN_1},{channel:{}.AGORA_CHANNEL_2||"test2",token:{}.AGORA_TOKEN_2},{channel:{}.AGORA_CHANNEL_3||"test3",token:{}.AGORA_TOKEN_3},{channel:{}.AGORA_CHANNEL_4||"test4",token:{}.AGORA_TOKEN_4},{channel:{}.AGORA_CHANNEL_5||"test5",token:{}.AGORA_TOKEN_5},{channel:{}.AGORA_CHANNEL_6||"test6",token:{}.AGORA_TOKEN_6},{channel:{}.AGORA_CHANNEL_7||"test7",token:{}.AGORA_TOKEN_7},{channel:{}.AGORA_CHANNEL_8||"test8",token:{}.AGORA_TOKEN_8},{channel:{}.AGORA_CHANNEL_9||"test9",token:{}.AGORA_TOKEN_9}]}const Gs=e=>{yV(String(e));const t=x2e();return yV(),t},xc=()=>"https://www.agora.io/en/wp-content/uploads/2022/10/3d-spatial-audio-icon.svg";function Zg({micOn:e,cameraOn:t,renderAction:n,renderLocalUser:r,renderRemoteUsers:i,showUserInfo:o=!0}){const a=ps(),s=Xy()||0,c=v.useMemo(()=>Gs(s),[s]),l=v.useMemo(()=>xc(),[]),u=Xs(),d=u.filter(p=>p.hasAudio||p.hasVideo),h=e||t,{localMicrophoneTrack:f}=_p(e),{localCameraTrack:g}=Sp(t);return xu([f,g]),G.jsxs(G.Fragment,{children:[n?n():void 0,o&&G.jsx(LD,{published:d.length+(h?1:0),total:u.length+1}),G.jsxs(os,{children:[a&&(r?r():G.jsx(os.Item,{children:G.jsx(DD,{audioTrack:f,cameraOn:t,cover:l,micOn:e,videoTrack:g,children:G.jsx(gl,{children:`${c}{${s}}`})})})),i?i():void 0]})]})}const FE=({children:e,clientConfig:t={mode:"rtc",codec:"vp8"}})=>{const[n]=v.useState(()=>mn.createClient(t));return G.jsx(eW,{client:n,children:e})},Mo=({calling:e,micOn:t,cameraOn:n,setMic:r,setCamera:i,setCalling:o})=>G.jsx(G.Fragment,{children:G.jsxs("div",{className:"inset-0 top-a flex justify-center items-center gap-3 px-6 py-3 bg-#21242c c-coolgray-3",children:[G.jsxs("div",{className:"flex-1 flex top-0 left-0 h-full items-center gap-3 px-6 py-3",children:[r&&G.jsx("button",{className:"btn",onClick:()=>r(),children:t?G.jsx(s2e,{}):G.jsx(c2e,{})}),i&&G.jsx("button",{className:"btn",onClick:()=>i(),children:n?G.jsx(l2e,{}):G.jsx(u2e,{})})]}),o&&G.jsx("button",{className:PD("btn btn-phone",{"btn-phone-active":e}),onClick:()=>o(),children:e?G.jsx("i",{className:"i-mdi-phone-hangup"}):G.jsx("i",{className:"i-mdi-phone"})})]})}),dLe=({screenShareOn:e,screenTrack:t,onCloseScreenShare:n})=>{const[r]=v.useState(()=>mn.createClient({mode:"rtc",codec:"vp8"})),[i,o]=v.useState(null),[a,s]=v.useState(null);return ai({appid:tt.appId,channel:tt.channel,token:tt.token,uid:tt.ShareScreenUID},e,r),v.useEffect(()=>{t?Array.isArray(t)?(o(t.filter(c=>c.trackMediaType==="video")[0]),s(t.filter(c=>c.trackMediaType==="audio")[0])):o(t):(s(null),o(null))},[t]),xu([i,a],e,r),Qz(i,"track-ended",()=>{console.log("screen sharing ended"),n&&n()}),G.jsxs(Xme,{client:r,children:[e&&i&&G.jsx(Fg,{disabled:!e,play:e,style:{width:"300px",height:"300px"},track:i}),a&&G.jsx(Jy,{disabled:!e,track:a})]})},s8=e=>{let t;const n=new Set,r=(u,d)=>{const h=typeof u=="function"?u(t):u;if(!Object.is(h,t)){const f=t;t=d??(typeof h!="object"||h===null)?h:Object.assign({},t,h),n.forEach(g=>g(t,f))}},i=()=>t,c={setState:r,getState:i,getInitialState:()=>l,subscribe:u=>(n.add(u),()=>n.delete(u)),destroy:()=>{n.clear()}},l=t=e(r,i,c);return c},hLe=e=>e?s8(e):s8;var mJ={exports:{}},gJ={},vJ={exports:{}},EJ={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var np=v;function fLe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var pLe=typeof Object.is=="function"?Object.is:fLe,mLe=np.useState,gLe=np.useEffect,vLe=np.useLayoutEffect,ELe=np.useDebugValue;function _Le(e,t){var n=t(),r=mLe({inst:{value:n,getSnapshot:t}}),i=r[0].inst,o=r[1];return vLe(function(){i.value=n,i.getSnapshot=t,jw(i)&&o({inst:i})},[e,n,t]),gLe(function(){return jw(i)&&o({inst:i}),e(function(){jw(i)&&o({inst:i})})},[e]),ELe(n),n}function jw(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!pLe(e,n)}catch{return!0}}function SLe(e,t){return t()}var yLe=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?SLe:_Le;EJ.useSyncExternalStore=np.useSyncExternalStore!==void 0?np.useSyncExternalStore:yLe;vJ.exports=EJ;var CLe=vJ.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rb=v,bLe=CLe;function TLe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var RLe=typeof Object.is=="function"?Object.is:TLe,wLe=bLe.useSyncExternalStore,ILe=rb.useRef,ALe=rb.useEffect,OLe=rb.useMemo,xLe=rb.useDebugValue;gJ.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var o=ILe(null);if(o.current===null){var a={hasValue:!1,value:null};o.current=a}else a=o.current;o=OLe(function(){function c(f){if(!l){if(l=!0,u=f,f=r(f),i!==void 0&&a.hasValue){var g=a.value;if(i(g,f))return d=g}return d=f}if(g=d,RLe(u,f))return g;var p=r(f);return i!==void 0&&i(g,p)?g:(u=f,d=p)}var l=!1,u,d,h=n===void 0?null:n;return[function(){return c(t())},h===null?void 0:function(){return c(h())}]},[t,n,r,i]);var s=wLe(e,o[0],o[1]);return ALe(function(){a.hasValue=!0,a.value=s},[s]),xLe(s),s};mJ.exports=gJ;var NLe=mJ.exports;const PLe=jd(NLe),{useDebugValue:DLe}=le,{useSyncExternalStoreWithSelector:LLe}=PLe;const kLe=e=>e;function MLe(e,t=kLe,n){const r=LLe(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return DLe(r),r}const c8=e=>{const t=typeof e=="function"?hLe(e):e,n=(r,i)=>MLe(t,r,i);return Object.assign(n,t),n},FLe=e=>e?c8(e):c8,ULe=tt.appId,BLe=uLe(),f0=FLe((e,t)=>({getRooms:()=>{let{rooms:n}=t();n=BLe.map(({token:r,channel:i})=>{const o=mn.createClient({mode:"live",codec:"vp8"});return o.join(ULe,i,r||null,null),{channel:i,token:r,client:o}}),e({rooms:n})},selectChannel:async n=>{let{hostRoom:r,localTracks:i}=t();const{rooms:o}=t();if(!n){r&&(i&&r.client.localTracks.length>0&&await r.client.unpublish(i),r.client.setClientRole("audience"),r=null,e({hostRoom:r,localTracks:i}));return}if(r){if(r.client.channelName===n)return;i&&await r.client.unpublish(i),await r.client.setClientRole("audience")}r=o==null?void 0:o.find(a=>a.client.channelName===n),r&&(await r.client.setClientRole("host"),i||(i=await mn.createMicrophoneAndCameraTracks()),await r.client.publish(i)),e({localTracks:i,hostRoom:r})},dispose:()=>{const{rooms:n,hostRoom:r}=t();if(r==null||r.client.leave(),n)for(const i of n)i.client.leave()}}));var $Le=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function VLe(e){var t=e.defaultInputValue,n=t===void 0?"":t,r=e.defaultMenuIsOpen,i=r===void 0?!1:r,o=e.defaultValue,a=o===void 0?null:o,s=e.inputValue,c=e.menuIsOpen,l=e.onChange,u=e.onInputChange,d=e.onMenuClose,h=e.onMenuOpen,f=e.value,g=kt(e,$Le),p=v.useState(s!==void 0?s:n),m=ce(p,2),_=m[0],E=m[1],S=v.useState(c!==void 0?c:i),C=ce(S,2),b=C[0],T=C[1],R=v.useState(f!==void 0?f:a),A=ce(R,2),O=A[0],x=A[1],M=v.useCallback(function(D,j){typeof l=="function"&&l(D,j),x(D)},[l]),$=v.useCallback(function(D,j){var F;typeof u=="function"&&(F=u(D,j)),E(F!==void 0?F:D)},[u]),U=v.useCallback(function(){typeof h=="function"&&h(),T(!0)},[h]),V=v.useCallback(function(){typeof d=="function"&&d(),T(!1)},[d]),W=s!==void 0?s:_,z=c!==void 0?c:b,L=f!==void 0?f:O;return Y(Y({},g),{},{inputValue:W,menuIsOpen:z,onChange:M,onInputChange:$,onMenuClose:V,onMenuOpen:U,value:L})}function jLe(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function HLe(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var zLe=function(){function e(n){var r=this;this._insertTag=function(i){var o;r.tags.length===0?r.insertionPoint?o=r.insertionPoint.nextSibling:r.prepend?o=r.container.firstChild:o=r.before:o=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,o),r.tags.push(i)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(r){r.forEach(this._insertTag)},t.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(HLe(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var o=jLe(i);try{o.insertRule(r,o.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},t.flush=function(){this.tags.forEach(function(r){return r.parentNode&&r.parentNode.removeChild(r)}),this.tags=[],this.ctr=0},e}(),co="-ms-",sy="-moz-",Vn="-webkit-",_J="comm",HD="rule",zD="decl",WLe="@import",SJ="@keyframes",GLe="@layer",KLe=Math.abs,ib=String.fromCharCode,qLe=Object.assign;function YLe(e,t){return Ji(e,0)^45?(((t<<2^Ji(e,0))<<2^Ji(e,1))<<2^Ji(e,2))<<2^Ji(e,3):0}function yJ(e){return e.trim()}function XLe(e,t){return(e=t.exec(e))?e[0]:e}function jn(e,t,n){return e.replace(t,n)}function cx(e,t){return e.indexOf(t)}function Ji(e,t){return e.charCodeAt(t)|0}function vg(e,t,n){return e.slice(t,n)}function uc(e){return e.length}function WD(e){return e.length}function UE(e,t){return t.push(e),e}function JLe(e,t){return e.map(t).join("")}var ob=1,rp=1,CJ=0,ta=0,di=0,kp="";function ab(e,t,n,r,i,o,a){return{value:e,root:t,parent:n,type:r,props:i,children:o,line:ob,column:rp,length:a,return:""}}function pm(e,t){return qLe(ab("",null,null,"",null,null,0),e,{length:-e.length},t)}function QLe(){return di}function ZLe(){return di=ta>0?Ji(kp,--ta):0,rp--,di===10&&(rp=1,ob--),di}function ya(){return di=ta<CJ?Ji(kp,ta++):0,rp++,di===10&&(rp=1,ob++),di}function wc(){return Ji(kp,ta)}function B_(){return ta}function ev(e,t){return vg(kp,e,t)}function Eg(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function bJ(e){return ob=rp=1,CJ=uc(kp=e),ta=0,[]}function TJ(e){return kp="",e}function $_(e){return yJ(ev(ta-1,lx(e===91?e+2:e===40?e+1:e)))}function eke(e){for(;(di=wc())&&di<33;)ya();return Eg(e)>2||Eg(di)>3?"":" "}function tke(e,t){for(;--t&&ya()&&!(di<48||di>102||di>57&&di<65||di>70&&di<97););return ev(e,B_()+(t<6&&wc()==32&&ya()==32))}function lx(e){for(;ya();)switch(di){case e:return ta;case 34:case 39:e!==34&&e!==39&&lx(di);break;case 40:e===41&&lx(e);break;case 92:ya();break}return ta}function nke(e,t){for(;ya()&&e+di!==47+10;)if(e+di===42+42&&wc()===47)break;return"/*"+ev(t,ta-1)+"*"+ib(e===47?e:ya())}function rke(e){for(;!Eg(wc());)ya();return ev(e,ta)}function ike(e){return TJ(V_("",null,null,null,[""],e=bJ(e),0,[0],e))}function V_(e,t,n,r,i,o,a,s,c){for(var l=0,u=0,d=a,h=0,f=0,g=0,p=1,m=1,_=1,E=0,S="",C=i,b=o,T=r,R=S;m;)switch(g=E,E=ya()){case 40:if(g!=108&&Ji(R,d-1)==58){cx(R+=jn($_(E),"&","&\f"),"&\f")!=-1&&(_=-1);break}case 34:case 39:case 91:R+=$_(E);break;case 9:case 10:case 13:case 32:R+=eke(g);break;case 92:R+=tke(B_()-1,7);continue;case 47:switch(wc()){case 42:case 47:UE(oke(nke(ya(),B_()),t,n),c);break;default:R+="/"}break;case 123*p:s[l++]=uc(R)*_;case 125*p:case 59:case 0:switch(E){case 0:case 125:m=0;case 59+u:_==-1&&(R=jn(R,/\f/g,"")),f>0&&uc(R)-d&&UE(f>32?u8(R+";",r,n,d-1):u8(jn(R," ","")+";",r,n,d-2),c);break;case 59:R+=";";default:if(UE(T=l8(R,t,n,l,u,i,s,S,C=[],b=[],d),o),E===123)if(u===0)V_(R,t,T,T,C,o,d,s,b);else switch(h===99&&Ji(R,3)===110?100:h){case 100:case 108:case 109:case 115:V_(e,T,T,r&&UE(l8(e,T,T,0,0,i,s,S,i,C=[],d),b),i,b,d,s,r?C:b);break;default:V_(R,T,T,T,[""],b,0,s,b)}}l=u=f=0,p=_=1,S=R="",d=a;break;case 58:d=1+uc(R),f=g;default:if(p<1){if(E==123)--p;else if(E==125&&p++==0&&ZLe()==125)continue}switch(R+=ib(E),E*p){case 38:_=u>0?1:(R+="\f",-1);break;case 44:s[l++]=(uc(R)-1)*_,_=1;break;case 64:wc()===45&&(R+=$_(ya())),h=wc(),u=d=uc(S=R+=rke(B_())),E++;break;case 45:g===45&&uc(R)==2&&(p=0)}}return o}function l8(e,t,n,r,i,o,a,s,c,l,u){for(var d=i-1,h=i===0?o:[""],f=WD(h),g=0,p=0,m=0;g<r;++g)for(var _=0,E=vg(e,d+1,d=KLe(p=a[g])),S=e;_<f;++_)(S=yJ(p>0?h[_]+" "+E:jn(E,/&\f/g,h[_])))&&(c[m++]=S);return ab(e,t,n,i===0?HD:s,c,l,u)}function oke(e,t,n){return ab(e,t,n,_J,ib(QLe()),vg(e,2,-2),0)}function u8(e,t,n,r){return ab(e,t,n,zD,vg(e,0,r),vg(e,r+1,-1),r)}function Pf(e,t){for(var n="",r=WD(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function ake(e,t,n,r){switch(e.type){case GLe:if(e.children.length)break;case WLe:case zD:return e.return=e.return||e.value;case _J:return"";case SJ:return e.return=e.value+"{"+Pf(e.children,r)+"}";case HD:e.value=e.props.join(",")}return uc(n=Pf(e.children,r))?e.return=e.value+"{"+n+"}":""}function ske(e){var t=WD(e);return function(n,r,i,o){for(var a="",s=0;s<t;s++)a+=e[s](n,r,i,o)||"";return a}}function cke(e){return function(t){t.root||(t=t.return)&&e(t)}}function lke(e){var t=Object.create(null);return function(n){return t[n]===void 0&&(t[n]=e(n)),t[n]}}var uke=function(t,n,r){for(var i=0,o=0;i=o,o=wc(),i===38&&o===12&&(n[r]=1),!Eg(o);)ya();return ev(t,ta)},dke=function(t,n){var r=-1,i=44;do switch(Eg(i)){case 0:i===38&&wc()===12&&(n[r]=1),t[r]+=uke(ta-1,n,r);break;case 2:t[r]+=$_(i);break;case 4:if(i===44){t[++r]=wc()===58?"&\f":"",n[r]=t[r].length;break}default:t[r]+=ib(i)}while(i=ya());return t},hke=function(t,n){return TJ(dke(bJ(t),n))},d8=new WeakMap,fke=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var n=t.value,r=t.parent,i=t.column===r.column&&t.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(t.props.length===1&&n.charCodeAt(0)!==58&&!d8.get(r))&&!i){d8.set(t,!0);for(var o=[],a=hke(n,o),s=r.props,c=0,l=0;c<a.length;c++)for(var u=0;u<s.length;u++,l++)t.props[l]=o[c]?a[c].replace(/&\f/g,s[u]):s[u]+" "+a[c]}}},pke=function(t){if(t.type==="decl"){var n=t.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(t.return="",t.value="")}};function RJ(e,t){switch(YLe(e,t)){case 5103:return Vn+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Vn+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Vn+e+sy+e+co+e+e;case 6828:case 4268:return Vn+e+co+e+e;case 6165:return Vn+e+co+"flex-"+e+e;case 5187:return Vn+e+jn(e,/(\w+).+(:[^]+)/,Vn+"box-$1$2"+co+"flex-$1$2")+e;case 5443:return Vn+e+co+"flex-item-"+jn(e,/flex-|-self/,"")+e;case 4675:return Vn+e+co+"flex-line-pack"+jn(e,/align-content|flex-|-self/,"")+e;case 5548:return Vn+e+co+jn(e,"shrink","negative")+e;case 5292:return Vn+e+co+jn(e,"basis","preferred-size")+e;case 6060:return Vn+"box-"+jn(e,"-grow","")+Vn+e+co+jn(e,"grow","positive")+e;case 4554:return Vn+jn(e,/([^-])(transform)/g,"$1"+Vn+"$2")+e;case 6187:return jn(jn(jn(e,/(zoom-|grab)/,Vn+"$1"),/(image-set)/,Vn+"$1"),e,"")+e;case 5495:case 3959:return jn(e,/(image-set\([^]*)/,Vn+"$1$`$1");case 4968:return jn(jn(e,/(.+:)(flex-)?(.*)/,Vn+"box-pack:$3"+co+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Vn+e+e;case 4095:case 3583:case 4068:case 2532:return jn(e,/(.+)-inline(.+)/,Vn+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(uc(e)-1-t>6)switch(Ji(e,t+1)){case 109:if(Ji(e,t+4)!==45)break;case 102:return jn(e,/(.+:)(.+)-([^]+)/,"$1"+Vn+"$2-$3$1"+sy+(Ji(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~cx(e,"stretch")?RJ(jn(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(Ji(e,t+1)!==115)break;case 6444:switch(Ji(e,uc(e)-3-(~cx(e,"!important")&&10))){case 107:return jn(e,":",":"+Vn)+e;case 101:return jn(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Vn+(Ji(e,14)===45?"inline-":"")+"box$3$1"+Vn+"$2$3$1"+co+"$2box$3")+e}break;case 5936:switch(Ji(e,t+11)){case 114:return Vn+e+co+jn(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Vn+e+co+jn(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Vn+e+co+jn(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Vn+e+co+e+e}return e}var mke=function(t,n,r,i){if(t.length>-1&&!t.return)switch(t.type){case zD:t.return=RJ(t.value,t.length);break;case SJ:return Pf([pm(t,{value:jn(t.value,"@","@"+Vn)})],i);case HD:if(t.length)return JLe(t.props,function(o){switch(XLe(o,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Pf([pm(t,{props:[jn(o,/:(read-\w+)/,":"+sy+"$1")]})],i);case"::placeholder":return Pf([pm(t,{props:[jn(o,/:(plac\w+)/,":"+Vn+"input-$1")]}),pm(t,{props:[jn(o,/:(plac\w+)/,":"+sy+"$1")]}),pm(t,{props:[jn(o,/:(plac\w+)/,co+"input-$1")]})],i)}return""})}},gke=[mke],vke=function(t){var n=t.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(p){var m=p.getAttribute("data-emotion");m.indexOf(" ")!==-1&&(document.head.appendChild(p),p.setAttribute("data-s",""))})}var i=t.stylisPlugins||gke,o={},a,s=[];a=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(p){for(var m=p.getAttribute("data-emotion").split(" "),_=1;_<m.length;_++)o[m[_]]=!0;s.push(p)});var c,l=[fke,pke];{var u,d=[ake,cke(function(p){u.insert(p)})],h=ske(l.concat(i,d)),f=function(m){return Pf(ike(m),h)};c=function(m,_,E,S){u=E,f(m?m+"{"+_.styles+"}":_.styles),S&&(g.inserted[_.name]=!0)}}var g={key:n,sheet:new zLe({key:n,container:a,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:o,registered:{},insert:c};return g.sheet.hydrate(s),g},wJ={exports:{}},tr={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ji=typeof Symbol=="function"&&Symbol.for,GD=ji?Symbol.for("react.element"):60103,KD=ji?Symbol.for("react.portal"):60106,sb=ji?Symbol.for("react.fragment"):60107,cb=ji?Symbol.for("react.strict_mode"):60108,lb=ji?Symbol.for("react.profiler"):60114,ub=ji?Symbol.for("react.provider"):60109,db=ji?Symbol.for("react.context"):60110,qD=ji?Symbol.for("react.async_mode"):60111,hb=ji?Symbol.for("react.concurrent_mode"):60111,fb=ji?Symbol.for("react.forward_ref"):60112,pb=ji?Symbol.for("react.suspense"):60113,Eke=ji?Symbol.for("react.suspense_list"):60120,mb=ji?Symbol.for("react.memo"):60115,gb=ji?Symbol.for("react.lazy"):60116,_ke=ji?Symbol.for("react.block"):60121,Ske=ji?Symbol.for("react.fundamental"):60117,yke=ji?Symbol.for("react.responder"):60118,Cke=ji?Symbol.for("react.scope"):60119;function xa(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case GD:switch(e=e.type,e){case qD:case hb:case sb:case lb:case cb:case pb:return e;default:switch(e=e&&e.$$typeof,e){case db:case fb:case gb:case mb:case ub:return e;default:return t}}case KD:return t}}}function IJ(e){return xa(e)===hb}tr.AsyncMode=qD;tr.ConcurrentMode=hb;tr.ContextConsumer=db;tr.ContextProvider=ub;tr.Element=GD;tr.ForwardRef=fb;tr.Fragment=sb;tr.Lazy=gb;tr.Memo=mb;tr.Portal=KD;tr.Profiler=lb;tr.StrictMode=cb;tr.Suspense=pb;tr.isAsyncMode=function(e){return IJ(e)||xa(e)===qD};tr.isConcurrentMode=IJ;tr.isContextConsumer=function(e){return xa(e)===db};tr.isContextProvider=function(e){return xa(e)===ub};tr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===GD};tr.isForwardRef=function(e){return xa(e)===fb};tr.isFragment=function(e){return xa(e)===sb};tr.isLazy=function(e){return xa(e)===gb};tr.isMemo=function(e){return xa(e)===mb};tr.isPortal=function(e){return xa(e)===KD};tr.isProfiler=function(e){return xa(e)===lb};tr.isStrictMode=function(e){return xa(e)===cb};tr.isSuspense=function(e){return xa(e)===pb};tr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===sb||e===hb||e===lb||e===cb||e===pb||e===Eke||typeof e=="object"&&e!==null&&(e.$$typeof===gb||e.$$typeof===mb||e.$$typeof===ub||e.$$typeof===db||e.$$typeof===fb||e.$$typeof===Ske||e.$$typeof===yke||e.$$typeof===Cke||e.$$typeof===_ke)};tr.typeOf=xa;wJ.exports=tr;var bke=wJ.exports,AJ=bke,Tke={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Rke={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},OJ={};OJ[AJ.ForwardRef]=Tke;OJ[AJ.Memo]=Rke;var wke=!0;function Ike(e,t,n){var r="";return n.split(" ").forEach(function(i){e[i]!==void 0?t.push(e[i]+";"):r+=i+" "}),r}var xJ=function(t,n,r){var i=t.key+"-"+n.name;(r===!1||wke===!1)&&t.registered[i]===void 0&&(t.registered[i]=n.styles)},Ake=function(t,n,r){xJ(t,n,r);var i=t.key+"-"+n.name;if(t.inserted[n.name]===void 0){var o=n;do t.insert(n===o?"."+i:"",o,t.sheet,!0),o=o.next;while(o!==void 0)}};function Oke(e){for(var t=0,n,r=0,i=e.length;i>=4;++r,i-=4)n=e.charCodeAt(r)&255|(e.charCodeAt(++r)&255)<<8|(e.charCodeAt(++r)&255)<<16|(e.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,t=(n&65535)*1540483477+((n>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(i){case 3:t^=(e.charCodeAt(r+2)&255)<<16;case 2:t^=(e.charCodeAt(r+1)&255)<<8;case 1:t^=e.charCodeAt(r)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var xke={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Nke=/[A-Z]|^ms/g,Pke=/_EMO_([^_]+?)_([^]*?)_EMO_/g,NJ=function(t){return t.charCodeAt(1)===45},h8=function(t){return t!=null&&typeof t!="boolean"},Hw=lke(function(e){return NJ(e)?e:e.replace(Nke,"-$&").toLowerCase()}),f8=function(t,n){switch(t){case"animation":case"animationName":if(typeof n=="string")return n.replace(Pke,function(r,i,o){return dc={name:i,styles:o,next:dc},i})}return xke[t]!==1&&!NJ(t)&&typeof n=="number"&&n!==0?n+"px":n};function _g(e,t,n){if(n==null)return"";if(n.__emotion_styles!==void 0)return n;switch(typeof n){case"boolean":return"";case"object":{if(n.anim===1)return dc={name:n.name,styles:n.styles,next:dc},n.name;if(n.styles!==void 0){var r=n.next;if(r!==void 0)for(;r!==void 0;)dc={name:r.name,styles:r.styles,next:dc},r=r.next;var i=n.styles+";";return i}return Dke(e,t,n)}case"function":{if(e!==void 0){var o=dc,a=n(e);return dc=o,_g(e,t,a)}break}}if(t==null)return n;var s=t[n];return s!==void 0?s:n}function Dke(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=_g(e,t,n[i])+";";else for(var o in n){var a=n[o];if(typeof a!="object")t!=null&&t[a]!==void 0?r+=o+"{"+t[a]+"}":h8(a)&&(r+=Hw(o)+":"+f8(o,a)+";");else if(Array.isArray(a)&&typeof a[0]=="string"&&(t==null||t[a[0]]===void 0))for(var s=0;s<a.length;s++)h8(a[s])&&(r+=Hw(o)+":"+f8(o,a[s])+";");else{var c=_g(e,t,a);switch(o){case"animation":case"animationName":{r+=Hw(o)+":"+c+";";break}default:r+=o+"{"+c+"}"}}}return r}var p8=/label:\s*([^\s;\n{]+)\s*(;|$)/g,dc,PJ=function(t,n,r){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var i=!0,o="";dc=void 0;var a=t[0];a==null||a.raw===void 0?(i=!1,o+=_g(r,n,a)):o+=a[0];for(var s=1;s<t.length;s++)o+=_g(r,n,t[s]),i&&(o+=a[s]);p8.lastIndex=0;for(var c="",l;(l=p8.exec(o))!==null;)c+="-"+l[1];var u=Oke(o)+c;return{name:u,styles:o,next:dc}},Lke=function(t){return t()},kke=Rd["useInsertionEffect"]?Rd["useInsertionEffect"]:!1,Mke=kke||Lke,YD={}.hasOwnProperty,DJ=v.createContext(typeof HTMLElement<"u"?vke({key:"css"}):null);DJ.Provider;var Fke=function(t){return v.forwardRef(function(n,r){var i=v.useContext(DJ);return t(n,i,r)})},Uke=v.createContext({}),ux="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",Bke=function(t,n){var r={};for(var i in n)YD.call(n,i)&&(r[i]=n[i]);return r[ux]=t,r},$ke=function(t){var n=t.cache,r=t.serialized,i=t.isStringTag;return xJ(n,r,i),Mke(function(){return Ake(n,r,i)}),null},Vke=Fke(function(e,t,n){var r=e.css;typeof r=="string"&&t.registered[r]!==void 0&&(r=t.registered[r]);var i=e[ux],o=[r],a="";typeof e.className=="string"?a=Ike(t.registered,o,e.className):e.className!=null&&(a=e.className+" ");var s=PJ(o,void 0,v.useContext(Uke));a+=t.key+"-"+s.name;var c={};for(var l in e)YD.call(e,l)&&l!=="css"&&l!==ux&&(c[l]=e[l]);return c.ref=n,c.className=a,v.createElement(v.Fragment,null,v.createElement($ke,{cache:t,serialized:s,isStringTag:typeof i=="string"}),v.createElement(i,c))}),jke=Vke,St=function(t,n){var r=arguments;if(n==null||!YD.call(n,"css"))return v.createElement.apply(void 0,r);var i=r.length,o=new Array(i);o[0]=jke,o[1]=Bke(t,n);for(var a=2;a<i;a++)o[a]=r[a];return v.createElement.apply(null,o)};function XD(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return PJ(t)}var Hke=function(){var t=XD.apply(void 0,arguments),n="animation-"+t.name;return{name:n,styles:"@keyframes "+n+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};function zke(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}const Wke=Math.min,Gke=Math.max,cy=Math.round,BE=Math.floor,ly=e=>({x:e,y:e});function Kke(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function LJ(e){return MJ(e)?(e.nodeName||"").toLowerCase():"#document"}function Vs(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function kJ(e){var t;return(t=(MJ(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function MJ(e){return e instanceof Node||e instanceof Vs(e).Node}function dx(e){return e instanceof Element||e instanceof Vs(e).Element}function JD(e){return e instanceof HTMLElement||e instanceof Vs(e).HTMLElement}function m8(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Vs(e).ShadowRoot}function FJ(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=QD(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function qke(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Yke(e){return["html","body","#document"].includes(LJ(e))}function QD(e){return Vs(e).getComputedStyle(e)}function Xke(e){if(LJ(e)==="html")return e;const t=e.assignedSlot||e.parentNode||m8(e)&&e.host||kJ(e);return m8(t)?t.host:t}function UJ(e){const t=Xke(e);return Yke(t)?e.ownerDocument?e.ownerDocument.body:e.body:JD(t)&&FJ(t)?t:UJ(t)}function uy(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=UJ(e),o=i===((r=e.ownerDocument)==null?void 0:r.body),a=Vs(i);return o?t.concat(a,a.visualViewport||[],FJ(i)?i:[],a.frameElement&&n?uy(a.frameElement):[]):t.concat(i,uy(i,[],n))}function Jke(e){const t=QD(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=JD(e),o=i?e.offsetWidth:n,a=i?e.offsetHeight:r,s=cy(n)!==o||cy(r)!==a;return s&&(n=o,r=a),{width:n,height:r,$:s}}function ZD(e){return dx(e)?e:e.contextElement}function zw(e){const t=ZD(e);if(!JD(t))return ly(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:o}=Jke(t);let a=(o?cy(n.width):n.width)/r,s=(o?cy(n.height):n.height)/i;return(!a||!Number.isFinite(a))&&(a=1),(!s||!Number.isFinite(s))&&(s=1),{x:a,y:s}}const Qke=ly(0);function Zke(e){const t=Vs(e);return!qke()||!t.visualViewport?Qke:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function eMe(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Vs(e)?!1:t}function g8(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),o=ZD(e);let a=ly(1);t&&(r?dx(r)&&(a=zw(r)):a=zw(e));const s=eMe(o,n,r)?Zke(o):ly(0);let c=(i.left+s.x)/a.x,l=(i.top+s.y)/a.y,u=i.width/a.x,d=i.height/a.y;if(o){const h=Vs(o),f=r&&dx(r)?Vs(r):r;let g=h,p=g.frameElement;for(;p&&r&&f!==g;){const m=zw(p),_=p.getBoundingClientRect(),E=QD(p),S=_.left+(p.clientLeft+parseFloat(E.paddingLeft))*m.x,C=_.top+(p.clientTop+parseFloat(E.paddingTop))*m.y;c*=m.x,l*=m.y,u*=m.x,d*=m.y,c+=S,l+=C,g=Vs(p),p=g.frameElement}}return Kke({width:u,height:d,x:c,y:l})}function tMe(e,t){let n=null,r;const i=kJ(e);function o(){var s;clearTimeout(r),(s=n)==null||s.disconnect(),n=null}function a(s,c){s===void 0&&(s=!1),c===void 0&&(c=1),o();const{left:l,top:u,width:d,height:h}=e.getBoundingClientRect();if(s||t(),!d||!h)return;const f=BE(u),g=BE(i.clientWidth-(l+d)),p=BE(i.clientHeight-(u+h)),m=BE(l),E={rootMargin:-f+"px "+-g+"px "+-p+"px "+-m+"px",threshold:Gke(0,Wke(1,c))||1};let S=!0;function C(b){const T=b[0].intersectionRatio;if(T!==c){if(!S)return a();T?a(!1,T):r=setTimeout(()=>{a(!1,1e-7)},1e3)}S=!1}try{n=new IntersectionObserver(C,{...E,root:i.ownerDocument})}catch{n=new IntersectionObserver(C,E)}n.observe(e)}return a(!0),o}function nMe(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:s=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,l=ZD(e),u=i||o?[...l?uy(l):[],...uy(t)]:[];u.forEach(_=>{i&&_.addEventListener("scroll",n,{passive:!0}),o&&_.addEventListener("resize",n)});const d=l&&s?tMe(l,n):null;let h=-1,f=null;a&&(f=new ResizeObserver(_=>{let[E]=_;E&&E.target===l&&f&&(f.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var S;(S=f)==null||S.observe(t)})),n()}),l&&!c&&f.observe(l),f.observe(t));let g,p=c?g8(e):null;c&&m();function m(){const _=g8(e);p&&(_.x!==p.x||_.y!==p.y||_.width!==p.width||_.height!==p.height)&&n(),p=_,g=requestAnimationFrame(m)}return n(),()=>{var _;u.forEach(E=>{i&&E.removeEventListener("scroll",n),o&&E.removeEventListener("resize",n)}),d==null||d(),(_=f)==null||_.disconnect(),f=null,c&&cancelAnimationFrame(g)}}var hx=v.useLayoutEffect,rMe=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],dy=function(){};function iMe(e,t){return t?t[0]==="-"?e+t:e+"__"+t:e}function oMe(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var o=[].concat(r);if(t&&e)for(var a in t)t.hasOwnProperty(a)&&t[a]&&o.push("".concat(iMe(e,a)));return o.filter(function(s){return s}).map(function(s){return String(s).trim()}).join(" ")}var v8=function(t){return pMe(t)?t.filter(Boolean):yt(t)==="object"&&t!==null?[t]:[]},BJ=function(t){t.className,t.clearValue,t.cx,t.getStyles,t.getClassNames,t.getValue,t.hasValue,t.isMulti,t.isRtl,t.options,t.selectOption,t.selectProps,t.setValue,t.theme;var n=kt(t,rMe);return Y({},n)},qr=function(t,n,r){var i=t.cx,o=t.getStyles,a=t.getClassNames,s=t.className;return{css:o(n,t),className:i(r??{},a(n,t),s)}};function vb(e){return[document.documentElement,document.body,window].indexOf(e)>-1}function aMe(e){return vb(e)?window.innerHeight:e.clientHeight}function $J(e){return vb(e)?window.pageYOffset:e.scrollTop}function hy(e,t){if(vb(e)){window.scrollTo(0,t);return}e.scrollTop=t}function sMe(e){var t=getComputedStyle(e),n=t.position==="absolute",r=/(auto|scroll)/;if(t.position==="fixed")return document.documentElement;for(var i=e;i=i.parentElement;)if(t=getComputedStyle(i),!(n&&t.position==="static")&&r.test(t.overflow+t.overflowY+t.overflowX))return i;return document.documentElement}function cMe(e,t,n,r){return n*((e=e/r-1)*e*e+1)+t}function $E(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:dy,i=$J(e),o=t-i,a=10,s=0;function c(){s+=a;var l=cMe(s,i,o,n);hy(e,l),s<n?window.requestAnimationFrame(c):r(e)}c()}function E8(e,t){var n=e.getBoundingClientRect(),r=t.getBoundingClientRect(),i=t.offsetHeight/3;r.bottom+i>n.bottom?hy(e,Math.min(t.offsetTop+t.clientHeight-e.offsetHeight+i,e.scrollHeight)):r.top-i<n.top&&hy(e,Math.max(t.offsetTop-i,0))}function lMe(e){var t=e.getBoundingClientRect();return{bottom:t.bottom,height:t.height,left:t.left,right:t.right,top:t.top,width:t.width}}function _8(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function uMe(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var VJ=!1,dMe={get passive(){return VJ=!0}},VE=typeof window<"u"?window:{};VE.addEventListener&&VE.removeEventListener&&(VE.addEventListener("p",dy,dMe),VE.removeEventListener("p",dy,!1));var hMe=VJ;function fMe(e){return e!=null}function pMe(e){return Array.isArray(e)}function jE(e,t,n){return e?t:n}var mMe=function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var o=Object.entries(t).filter(function(a){var s=ce(a,1),c=s[0];return!r.includes(c)});return o.reduce(function(a,s){var c=ce(s,2),l=c[0],u=c[1];return a[l]=u,a},{})},gMe=["children","innerProps"],vMe=["children","innerProps"];function EMe(e){var t=e.maxHeight,n=e.menuEl,r=e.minHeight,i=e.placement,o=e.shouldScroll,a=e.isFixedPosition,s=e.controlHeight,c=sMe(n),l={placement:"bottom",maxHeight:t};if(!n||!n.offsetParent)return l;var u=c.getBoundingClientRect(),d=u.height,h=n.getBoundingClientRect(),f=h.bottom,g=h.height,p=h.top,m=n.offsetParent.getBoundingClientRect(),_=m.top,E=a?window.innerHeight:aMe(c),S=$J(c),C=parseInt(getComputedStyle(n).marginBottom,10),b=parseInt(getComputedStyle(n).marginTop,10),T=_-b,R=E-p,A=T+S,O=d-S-p,x=f-E+S+C,M=S+p-b,$=160;switch(i){case"auto":case"bottom":if(R>=g)return{placement:"bottom",maxHeight:t};if(O>=g&&!a)return o&&$E(c,x,$),{placement:"bottom",maxHeight:t};if(!a&&O>=r||a&&R>=r){o&&$E(c,x,$);var U=a?R-C:O-C;return{placement:"bottom",maxHeight:U}}if(i==="auto"||a){var V=t,W=a?T:A;return W>=r&&(V=Math.min(W-C-s,t)),{placement:"top",maxHeight:V}}if(i==="bottom")return o&&hy(c,x),{placement:"bottom",maxHeight:t};break;case"top":if(T>=g)return{placement:"top",maxHeight:t};if(A>=g&&!a)return o&&$E(c,M,$),{placement:"top",maxHeight:t};if(!a&&A>=r||a&&T>=r){var z=t;return(!a&&A>=r||a&&T>=r)&&(z=a?T-b:A-b),o&&$E(c,M,$),{placement:"top",maxHeight:z}}return{placement:"bottom",maxHeight:t};default:throw new Error('Invalid placement provided "'.concat(i,'".'))}return l}function _Me(e){var t={bottom:"top",top:"bottom"};return e?t[e]:"bottom"}var jJ=function(t){return t==="auto"?"bottom":t},SMe=function(t,n){var r,i=t.placement,o=t.theme,a=o.borderRadius,s=o.spacing,c=o.colors;return Y((r={label:"menu"},J(r,_Me(i),"100%"),J(r,"position","absolute"),J(r,"width","100%"),J(r,"zIndex",1),r),n?{}:{backgroundColor:c.neutral0,borderRadius:a,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:s.menuGutter,marginTop:s.menuGutter})},HJ=v.createContext(null),yMe=function(t){var n=t.children,r=t.minMenuHeight,i=t.maxMenuHeight,o=t.menuPlacement,a=t.menuPosition,s=t.menuShouldScrollIntoView,c=t.theme,l=v.useContext(HJ)||{},u=l.setPortalPlacement,d=v.useRef(null),h=v.useState(i),f=ce(h,2),g=f[0],p=f[1],m=v.useState(null),_=ce(m,2),E=_[0],S=_[1],C=c.spacing.controlHeight;return hx(function(){var b=d.current;if(b){var T=a==="fixed",R=s&&!T,A=EMe({maxHeight:i,menuEl:b,minHeight:r,placement:o,shouldScroll:R,isFixedPosition:T,controlHeight:C});p(A.maxHeight),S(A.placement),u==null||u(A.placement)}},[i,o,a,s,r,u,C]),n({ref:d,placerProps:Y(Y({},t),{},{placement:E||jJ(o),maxHeight:g})})},CMe=function(t){var n=t.children,r=t.innerRef,i=t.innerProps;return St("div",Ee({},qr(t,"menu",{menu:!0}),{ref:r},i),n)},bMe=CMe,TMe=function(t,n){var r=t.maxHeight,i=t.theme.spacing.baseUnit;return Y({maxHeight:r,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},n?{}:{paddingBottom:i,paddingTop:i})},RMe=function(t){var n=t.children,r=t.innerProps,i=t.innerRef,o=t.isMulti;return St("div",Ee({},qr(t,"menuList",{"menu-list":!0,"menu-list--is-multi":o}),{ref:i},r),n)},zJ=function(t,n){var r=t.theme,i=r.spacing.baseUnit,o=r.colors;return Y({textAlign:"center"},n?{}:{color:o.neutral40,padding:"".concat(i*2,"px ").concat(i*3,"px")})},wMe=zJ,IMe=zJ,AMe=function(t){var n=t.children,r=n===void 0?"No options":n,i=t.innerProps,o=kt(t,gMe);return St("div",Ee({},qr(Y(Y({},o),{},{children:r,innerProps:i}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),i),r)},OMe=function(t){var n=t.children,r=n===void 0?"Loading...":n,i=t.innerProps,o=kt(t,vMe);return St("div",Ee({},qr(Y(Y({},o),{},{children:r,innerProps:i}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),i),r)},xMe=function(t){var n=t.rect,r=t.offset,i=t.position;return{left:n.left,position:i,top:r,width:n.width,zIndex:1}},NMe=function(t){var n=t.appendTo,r=t.children,i=t.controlElement,o=t.innerProps,a=t.menuPlacement,s=t.menuPosition,c=v.useRef(null),l=v.useRef(null),u=v.useState(jJ(a)),d=ce(u,2),h=d[0],f=d[1],g=v.useMemo(function(){return{setPortalPlacement:f}},[]),p=v.useState(null),m=ce(p,2),_=m[0],E=m[1],S=v.useCallback(function(){if(i){var R=lMe(i),A=s==="fixed"?0:window.pageYOffset,O=R[h]+A;(O!==(_==null?void 0:_.offset)||R.left!==(_==null?void 0:_.rect.left)||R.width!==(_==null?void 0:_.rect.width))&&E({offset:O,rect:R})}},[i,s,h,_==null?void 0:_.offset,_==null?void 0:_.rect.left,_==null?void 0:_.rect.width]);hx(function(){S()},[S]);var C=v.useCallback(function(){typeof l.current=="function"&&(l.current(),l.current=null),i&&c.current&&(l.current=nMe(i,c.current,S,{elementResize:"ResizeObserver"in window}))},[i,S]);hx(function(){C()},[C]);var b=v.useCallback(function(R){c.current=R,C()},[C]);if(!n&&s!=="fixed"||!_)return null;var T=St("div",Ee({ref:b},qr(Y(Y({},t),{},{offset:_.offset,position:s,rect:_.rect}),"menuPortal",{"menu-portal":!0}),o),r);return St(HJ.Provider,{value:g},n?Oc.createPortal(T,n):T)},PMe=function(t){var n=t.isDisabled,r=t.isRtl;return{label:"container",direction:r?"rtl":void 0,pointerEvents:n?"none":void 0,position:"relative"}},DMe=function(t){var n=t.children,r=t.innerProps,i=t.isDisabled,o=t.isRtl;return St("div",Ee({},qr(t,"container",{"--is-disabled":i,"--is-rtl":o}),r),n)},LMe=function(t,n){var r=t.theme.spacing,i=t.isMulti,o=t.hasValue,a=t.selectProps.controlShouldRenderValue;return Y({alignItems:"center",display:i&&o&&a?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},n?{}:{padding:"".concat(r.baseUnit/2,"px ").concat(r.baseUnit*2,"px")})},kMe=function(t){var n=t.children,r=t.innerProps,i=t.isMulti,o=t.hasValue;return St("div",Ee({},qr(t,"valueContainer",{"value-container":!0,"value-container--is-multi":i,"value-container--has-value":o}),r),n)},MMe=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},FMe=function(t){var n=t.children,r=t.innerProps;return St("div",Ee({},qr(t,"indicatorsContainer",{indicators:!0}),r),n)},S8,UMe=["size"],BMe=["innerProps","isRtl","size"],$Me={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},WJ=function(t){var n=t.size,r=kt(t,UMe);return St("svg",Ee({height:n,width:n,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:$Me},r))},e2=function(t){return St(WJ,Ee({size:20},t),St("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},GJ=function(t){return St(WJ,Ee({size:20},t),St("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},KJ=function(t,n){var r=t.isFocused,i=t.theme,o=i.spacing.baseUnit,a=i.colors;return Y({label:"indicatorContainer",display:"flex",transition:"color 150ms"},n?{}:{color:r?a.neutral60:a.neutral20,padding:o*2,":hover":{color:r?a.neutral80:a.neutral40}})},VMe=KJ,jMe=function(t){var n=t.children,r=t.innerProps;return St("div",Ee({},qr(t,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),r),n||St(GJ,null))},HMe=KJ,zMe=function(t){var n=t.children,r=t.innerProps;return St("div",Ee({},qr(t,"clearIndicator",{indicator:!0,"clear-indicator":!0}),r),n||St(e2,null))},WMe=function(t,n){var r=t.isDisabled,i=t.theme,o=i.spacing.baseUnit,a=i.colors;return Y({label:"indicatorSeparator",alignSelf:"stretch",width:1},n?{}:{backgroundColor:r?a.neutral10:a.neutral20,marginBottom:o*2,marginTop:o*2})},GMe=function(t){var n=t.innerProps;return St("span",Ee({},n,qr(t,"indicatorSeparator",{"indicator-separator":!0})))},KMe=Hke(S8||(S8=zke([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),qMe=function(t,n){var r=t.isFocused,i=t.size,o=t.theme,a=o.colors,s=o.spacing.baseUnit;return Y({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:i,lineHeight:1,marginRight:i,textAlign:"center",verticalAlign:"middle"},n?{}:{color:r?a.neutral60:a.neutral20,padding:s*2})},Ww=function(t){var n=t.delay,r=t.offset;return St("span",{css:XD({animation:"".concat(KMe," 1s ease-in-out ").concat(n,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:r?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},YMe=function(t){var n=t.innerProps,r=t.isRtl,i=t.size,o=i===void 0?4:i,a=kt(t,BMe);return St("div",Ee({},qr(Y(Y({},a),{},{innerProps:n,isRtl:r,size:o}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),n),St(Ww,{delay:0,offset:r}),St(Ww,{delay:160,offset:!0}),St(Ww,{delay:320,offset:!r}))},XMe=function(t,n){var r=t.isDisabled,i=t.isFocused,o=t.theme,a=o.colors,s=o.borderRadius,c=o.spacing;return Y({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:c.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},n?{}:{backgroundColor:r?a.neutral5:a.neutral0,borderColor:r?a.neutral10:i?a.primary:a.neutral20,borderRadius:s,borderStyle:"solid",borderWidth:1,boxShadow:i?"0 0 0 1px ".concat(a.primary):void 0,"&:hover":{borderColor:i?a.primary:a.neutral30}})},JMe=function(t){var n=t.children,r=t.isDisabled,i=t.isFocused,o=t.innerRef,a=t.innerProps,s=t.menuIsOpen;return St("div",Ee({ref:o},qr(t,"control",{control:!0,"control--is-disabled":r,"control--is-focused":i,"control--menu-is-open":s}),a,{"aria-disabled":r||void 0}),n)},QMe=JMe,ZMe=["data"],eFe=function(t,n){var r=t.theme.spacing;return n?{}:{paddingBottom:r.baseUnit*2,paddingTop:r.baseUnit*2}},tFe=function(t){var n=t.children,r=t.cx,i=t.getStyles,o=t.getClassNames,a=t.Heading,s=t.headingProps,c=t.innerProps,l=t.label,u=t.theme,d=t.selectProps;return St("div",Ee({},qr(t,"group",{group:!0}),c),St(a,Ee({},s,{selectProps:d,theme:u,getStyles:i,getClassNames:o,cx:r}),l),St("div",null,n))},nFe=function(t,n){var r=t.theme,i=r.colors,o=r.spacing;return Y({label:"group",cursor:"default",display:"block"},n?{}:{color:i.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:o.baseUnit*3,paddingRight:o.baseUnit*3,textTransform:"uppercase"})},rFe=function(t){var n=BJ(t);n.data;var r=kt(n,ZMe);return St("div",Ee({},qr(t,"groupHeading",{"group-heading":!0}),r))},iFe=tFe,oFe=["innerRef","isDisabled","isHidden","inputClassName"],aFe=function(t,n){var r=t.isDisabled,i=t.value,o=t.theme,a=o.spacing,s=o.colors;return Y(Y({visibility:r?"hidden":"visible",transform:i?"translateZ(0)":""},sFe),n?{}:{margin:a.baseUnit/2,paddingBottom:a.baseUnit/2,paddingTop:a.baseUnit/2,color:s.neutral80})},qJ={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},sFe={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":Y({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},qJ)},cFe=function(t){return Y({label:"input",color:"inherit",background:0,opacity:t?0:1,width:"100%"},qJ)},lFe=function(t){var n=t.cx,r=t.value,i=BJ(t),o=i.innerRef,a=i.isDisabled,s=i.isHidden,c=i.inputClassName,l=kt(i,oFe);return St("div",Ee({},qr(t,"input",{"input-container":!0}),{"data-value":r||""}),St("input",Ee({className:n({input:!0},c),ref:o,style:cFe(s),disabled:a},l)))},uFe=lFe,dFe=function(t,n){var r=t.theme,i=r.spacing,o=r.borderRadius,a=r.colors;return Y({label:"multiValue",display:"flex",minWidth:0},n?{}:{backgroundColor:a.neutral10,borderRadius:o/2,margin:i.baseUnit/2})},hFe=function(t,n){var r=t.theme,i=r.borderRadius,o=r.colors,a=t.cropWithEllipsis;return Y({overflow:"hidden",textOverflow:a||a===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},n?{}:{borderRadius:i/2,color:o.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},fFe=function(t,n){var r=t.theme,i=r.spacing,o=r.borderRadius,a=r.colors,s=t.isFocused;return Y({alignItems:"center",display:"flex"},n?{}:{borderRadius:o/2,backgroundColor:s?a.dangerLight:void 0,paddingLeft:i.baseUnit,paddingRight:i.baseUnit,":hover":{backgroundColor:a.dangerLight,color:a.danger}})},YJ=function(t){var n=t.children,r=t.innerProps;return St("div",r,n)},pFe=YJ,mFe=YJ;function gFe(e){var t=e.children,n=e.innerProps;return St("div",Ee({role:"button"},n),t||St(e2,{size:14}))}var vFe=function(t){var n=t.children,r=t.components,i=t.data,o=t.innerProps,a=t.isDisabled,s=t.removeProps,c=t.selectProps,l=r.Container,u=r.Label,d=r.Remove;return St(l,{data:i,innerProps:Y(Y({},qr(t,"multiValue",{"multi-value":!0,"multi-value--is-disabled":a})),o),selectProps:c},St(u,{data:i,innerProps:Y({},qr(t,"multiValueLabel",{"multi-value__label":!0})),selectProps:c},n),St(d,{data:i,innerProps:Y(Y({},qr(t,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(n||"option")},s),selectProps:c}))},EFe=vFe,_Fe=function(t,n){var r=t.isDisabled,i=t.isFocused,o=t.isSelected,a=t.theme,s=a.spacing,c=a.colors;return Y({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},n?{}:{backgroundColor:o?c.primary:i?c.primary25:"transparent",color:r?c.neutral20:o?c.neutral0:"inherit",padding:"".concat(s.baseUnit*2,"px ").concat(s.baseUnit*3,"px"),":active":{backgroundColor:r?void 0:o?c.primary:c.primary50}})},SFe=function(t){var n=t.children,r=t.isDisabled,i=t.isFocused,o=t.isSelected,a=t.innerRef,s=t.innerProps;return St("div",Ee({},qr(t,"option",{option:!0,"option--is-disabled":r,"option--is-focused":i,"option--is-selected":o}),{ref:a,"aria-disabled":r},s),n)},yFe=SFe,CFe=function(t,n){var r=t.theme,i=r.spacing,o=r.colors;return Y({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},n?{}:{color:o.neutral50,marginLeft:i.baseUnit/2,marginRight:i.baseUnit/2})},bFe=function(t){var n=t.children,r=t.innerProps;return St("div",Ee({},qr(t,"placeholder",{placeholder:!0}),r),n)},TFe=bFe,RFe=function(t,n){var r=t.isDisabled,i=t.theme,o=i.spacing,a=i.colors;return Y({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},n?{}:{color:r?a.neutral40:a.neutral80,marginLeft:o.baseUnit/2,marginRight:o.baseUnit/2})},wFe=function(t){var n=t.children,r=t.isDisabled,i=t.innerProps;return St("div",Ee({},qr(t,"singleValue",{"single-value":!0,"single-value--is-disabled":r}),i),n)},IFe=wFe,AFe={ClearIndicator:zMe,Control:QMe,DropdownIndicator:jMe,DownChevron:GJ,CrossIcon:e2,Group:iFe,GroupHeading:rFe,IndicatorsContainer:FMe,IndicatorSeparator:GMe,Input:uFe,LoadingIndicator:YMe,Menu:bMe,MenuList:RMe,MenuPortal:NMe,LoadingMessage:OMe,NoOptionsMessage:AMe,MultiValue:EFe,MultiValueContainer:pFe,MultiValueLabel:mFe,MultiValueRemove:gFe,Option:yFe,Placeholder:TFe,SelectContainer:DMe,SingleValue:IFe,ValueContainer:kMe},OFe=function(t){return Y(Y({},AFe),t.components)},y8=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function xFe(e,t){return!!(e===t||y8(e)&&y8(t))}function NFe(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!xFe(e[n],t[n]))return!1;return!0}function PFe(e,t){t===void 0&&(t=NFe);var n=null;function r(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];if(n&&n.lastThis===this&&t(i,n.lastArgs))return n.lastResult;var a=e.apply(this,i);return n={lastResult:a,lastArgs:i,lastThis:this},a}return r.clear=function(){n=null},r}var DFe={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},LFe=function(t){return St("span",Ee({css:DFe},t))},C8=LFe,kFe={guidance:function(t){var n=t.isSearchable,r=t.isMulti,i=t.tabSelectsValue,o=t.context,a=t.isInitialFocus;switch(o){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(i?", press Tab to select the option and exit the menu":"",".");case"input":return a?"".concat(t["aria-label"]||"Select"," is focused ").concat(n?",type to refine list":"",", press Down to open the menu, ").concat(r?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(t){var n=t.action,r=t.label,i=r===void 0?"":r,o=t.labels,a=t.isDisabled;switch(n){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(i,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(o.length>1?"s":""," ").concat(o.join(","),", selected.");case"select-option":return a?"option ".concat(i," is disabled. Select another option."):"option ".concat(i,", selected.");default:return""}},onFocus:function(t){var n=t.context,r=t.focused,i=t.options,o=t.label,a=o===void 0?"":o,s=t.selectValue,c=t.isDisabled,l=t.isSelected,u=t.isAppleDevice,d=function(p,m){return p&&p.length?"".concat(p.indexOf(m)+1," of ").concat(p.length):""};if(n==="value"&&s)return"value ".concat(a," focused, ").concat(d(s,r),".");if(n==="menu"&&u){var h=c?" disabled":"",f="".concat(l?" selected":"").concat(h);return"".concat(a).concat(f,", ").concat(d(i,r),".")}return""},onFilter:function(t){var n=t.inputValue,r=t.resultsMessage;return"".concat(r).concat(n?" for search term "+n:"",".")}},MFe=function(t){var n=t.ariaSelection,r=t.focusedOption,i=t.focusedValue,o=t.focusableOptions,a=t.isFocused,s=t.selectValue,c=t.selectProps,l=t.id,u=t.isAppleDevice,d=c.ariaLiveMessages,h=c.getOptionLabel,f=c.inputValue,g=c.isMulti,p=c.isOptionDisabled,m=c.isSearchable,_=c.menuIsOpen,E=c.options,S=c.screenReaderStatus,C=c.tabSelectsValue,b=c.isLoading,T=c["aria-label"],R=c["aria-live"],A=v.useMemo(function(){return Y(Y({},kFe),d||{})},[d]),O=v.useMemo(function(){var W="";if(n&&A.onChange){var z=n.option,L=n.options,D=n.removedValue,j=n.removedValues,F=n.value,y=function(ne){return Array.isArray(ne)?null:ne},I=D||z||y(F),N=I?h(I):"",B=L||j||void 0,K=B?B.map(h):[],X=Y({isDisabled:I&&p(I,s),label:N,labels:K},n);W=A.onChange(X)}return W},[n,A,p,s,h]),x=v.useMemo(function(){var W="",z=r||i,L=!!(r&&s&&s.includes(r));if(z&&A.onFocus){var D={focused:z,label:h(z),isDisabled:p(z,s),isSelected:L,options:o,context:z===r?"menu":"value",selectValue:s,isAppleDevice:u};W=A.onFocus(D)}return W},[r,i,h,p,A,o,s,u]),M=v.useMemo(function(){var W="";if(_&&E.length&&!b&&A.onFilter){var z=S({count:o.length});W=A.onFilter({inputValue:f,resultsMessage:z})}return W},[o,f,_,A,E,S,b]),$=(n==null?void 0:n.action)==="initial-input-focus",U=v.useMemo(function(){var W="";if(A.guidance){var z=i?"value":_?"menu":"input";W=A.guidance({"aria-label":T,context:z,isDisabled:r&&p(r,s),isMulti:g,isSearchable:m,tabSelectsValue:C,isInitialFocus:$})}return W},[T,r,i,g,p,m,_,A,s,C,$]),V=St(v.Fragment,null,St("span",{id:"aria-selection"},O),St("span",{id:"aria-focused"},x),St("span",{id:"aria-results"},M),St("span",{id:"aria-guidance"},U));return St(v.Fragment,null,St(C8,{id:l},$&&V),St(C8,{"aria-live":R,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},a&&!$&&V))},FFe=MFe,fx=[{base:"A",letters:"AⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",letters:"Ꜳ"},{base:"AE",letters:"ÆǼǢ"},{base:"AO",letters:"Ꜵ"},{base:"AU",letters:"Ꜷ"},{base:"AV",letters:"ꜸꜺ"},{base:"AY",letters:"Ꜽ"},{base:"B",letters:"BⒷＢḂḄḆɃƂƁ"},{base:"C",letters:"CⒸＣĆĈĊČÇḈƇȻꜾ"},{base:"D",letters:"DⒹＤḊĎḌḐḒḎĐƋƊƉꝹ"},{base:"DZ",letters:"ǱǄ"},{base:"Dz",letters:"ǲǅ"},{base:"E",letters:"EⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎ"},{base:"F",letters:"FⒻＦḞƑꝻ"},{base:"G",letters:"GⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾ"},{base:"H",letters:"HⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",letters:"IⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",letters:"JⒿＪĴɈ"},{base:"K",letters:"KⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",letters:"LⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",letters:"Ǉ"},{base:"Lj",letters:"ǈ"},{base:"M",letters:"MⓂＭḾṀṂⱮƜ"},{base:"N",letters:"NⓃＮǸŃÑṄŇṆŅṊṈȠƝꞐꞤ"},{base:"NJ",letters:"Ǌ"},{base:"Nj",letters:"ǋ"},{base:"O",letters:"OⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OI",letters:"Ƣ"},{base:"OO",letters:"Ꝏ"},{base:"OU",letters:"Ȣ"},{base:"P",letters:"PⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",letters:"QⓆＱꝖꝘɊ"},{base:"R",letters:"RⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",letters:"SⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",letters:"TⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"TZ",letters:"Ꜩ"},{base:"U",letters:"UⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",letters:"VⓋＶṼṾƲꝞɅ"},{base:"VY",letters:"Ꝡ"},{base:"W",letters:"WⓌＷẀẂŴẆẄẈⱲ"},{base:"X",letters:"XⓍＸẊẌ"},{base:"Y",letters:"YⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",letters:"ZⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",letters:"aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐ"},{base:"aa",letters:"ꜳ"},{base:"ae",letters:"æǽǣ"},{base:"ao",letters:"ꜵ"},{base:"au",letters:"ꜷ"},{base:"av",letters:"ꜹꜻ"},{base:"ay",letters:"ꜽ"},{base:"b",letters:"bⓑｂḃḅḇƀƃɓ"},{base:"c",letters:"cⓒｃćĉċčçḉƈȼꜿↄ"},{base:"d",letters:"dⓓｄḋďḍḑḓḏđƌɖɗꝺ"},{base:"dz",letters:"ǳǆ"},{base:"e",letters:"eⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇɛǝ"},{base:"f",letters:"fⓕｆḟƒꝼ"},{base:"g",letters:"gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ"},{base:"h",letters:"hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",letters:"ƕ"},{base:"i",letters:"iⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",letters:"jⓙｊĵǰɉ"},{base:"k",letters:"kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",letters:"lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ"},{base:"lj",letters:"ǉ"},{base:"m",letters:"mⓜｍḿṁṃɱɯ"},{base:"n",letters:"nⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥ"},{base:"nj",letters:"ǌ"},{base:"o",letters:"oⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿɔꝋꝍɵ"},{base:"oi",letters:"ƣ"},{base:"ou",letters:"ȣ"},{base:"oo",letters:"ꝏ"},{base:"p",letters:"pⓟｐṕṗƥᵽꝑꝓꝕ"},{base:"q",letters:"qⓠｑɋꝗꝙ"},{base:"r",letters:"rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",letters:"sⓢｓßśṥŝṡšṧṣṩșşȿꞩꞅẛ"},{base:"t",letters:"tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"tz",letters:"ꜩ"},{base:"u",letters:"uⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",letters:"vⓥｖṽṿʋꝟʌ"},{base:"vy",letters:"ꝡ"},{base:"w",letters:"wⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",letters:"xⓧｘẋẍ"},{base:"y",letters:"yⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",letters:"zⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],UFe=new RegExp("["+fx.map(function(e){return e.letters}).join("")+"]","g"),XJ={};for(var Gw=0;Gw<fx.length;Gw++)for(var Kw=fx[Gw],qw=0;qw<Kw.letters.length;qw++)XJ[Kw.letters[qw]]=Kw.base;var JJ=function(t){return t.replace(UFe,function(n){return XJ[n]})},BFe=PFe(JJ),b8=function(t){return t.replace(/^\s+|\s+$/g,"")},$Fe=function(t){return"".concat(t.label," ").concat(t.value)},VFe=function(t){return function(n,r){if(n.data.__isNew__)return!0;var i=Y({ignoreCase:!0,ignoreAccents:!0,stringify:$Fe,trim:!0,matchFrom:"any"},t),o=i.ignoreCase,a=i.ignoreAccents,s=i.stringify,c=i.trim,l=i.matchFrom,u=c?b8(r):r,d=c?b8(s(n)):s(n);return o&&(u=u.toLowerCase(),d=d.toLowerCase()),a&&(u=BFe(u),d=JJ(d)),l==="start"?d.substr(0,u.length)===u:d.indexOf(u)>-1}},jFe=["innerRef"];function HFe(e){var t=e.innerRef,n=kt(e,jFe),r=mMe(n,"onExited","in","enter","exit","appear");return St("input",Ee({ref:t},r,{css:XD({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var zFe=function(t){t.cancelable&&t.preventDefault(),t.stopPropagation()};function WFe(e){var t=e.isEnabled,n=e.onBottomArrive,r=e.onBottomLeave,i=e.onTopArrive,o=e.onTopLeave,a=v.useRef(!1),s=v.useRef(!1),c=v.useRef(0),l=v.useRef(null),u=v.useCallback(function(m,_){if(l.current!==null){var E=l.current,S=E.scrollTop,C=E.scrollHeight,b=E.clientHeight,T=l.current,R=_>0,A=C-b-S,O=!1;A>_&&a.current&&(r&&r(m),a.current=!1),R&&s.current&&(o&&o(m),s.current=!1),R&&_>A?(n&&!a.current&&n(m),T.scrollTop=C,O=!0,a.current=!0):!R&&-_>S&&(i&&!s.current&&i(m),T.scrollTop=0,O=!0,s.current=!0),O&&zFe(m)}},[n,r,i,o]),d=v.useCallback(function(m){u(m,m.deltaY)},[u]),h=v.useCallback(function(m){c.current=m.changedTouches[0].clientY},[]),f=v.useCallback(function(m){var _=c.current-m.changedTouches[0].clientY;u(m,_)},[u]),g=v.useCallback(function(m){if(m){var _=hMe?{passive:!1}:!1;m.addEventListener("wheel",d,_),m.addEventListener("touchstart",h,_),m.addEventListener("touchmove",f,_)}},[f,h,d]),p=v.useCallback(function(m){m&&(m.removeEventListener("wheel",d,!1),m.removeEventListener("touchstart",h,!1),m.removeEventListener("touchmove",f,!1))},[f,h,d]);return v.useEffect(function(){if(t){var m=l.current;return g(m),function(){p(m)}}},[t,g,p]),function(m){l.current=m}}var T8=["boxSizing","height","overflow","paddingRight","position"],R8={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function w8(e){e.preventDefault()}function I8(e){e.stopPropagation()}function A8(){var e=this.scrollTop,t=this.scrollHeight,n=e+this.offsetHeight;e===0?this.scrollTop=1:n===t&&(this.scrollTop=e-1)}function O8(){return"ontouchstart"in window||navigator.maxTouchPoints}var x8=!!(typeof window<"u"&&window.document&&window.document.createElement),mm=0,kh={capture:!1,passive:!1};function GFe(e){var t=e.isEnabled,n=e.accountForScrollbars,r=n===void 0?!0:n,i=v.useRef({}),o=v.useRef(null),a=v.useCallback(function(c){if(x8){var l=document.body,u=l&&l.style;if(r&&T8.forEach(function(g){var p=u&&u[g];i.current[g]=p}),r&&mm<1){var d=parseInt(i.current.paddingRight,10)||0,h=document.body?document.body.clientWidth:0,f=window.innerWidth-h+d||0;Object.keys(R8).forEach(function(g){var p=R8[g];u&&(u[g]=p)}),u&&(u.paddingRight="".concat(f,"px"))}l&&O8()&&(l.addEventListener("touchmove",w8,kh),c&&(c.addEventListener("touchstart",A8,kh),c.addEventListener("touchmove",I8,kh))),mm+=1}},[r]),s=v.useCallback(function(c){if(x8){var l=document.body,u=l&&l.style;mm=Math.max(mm-1,0),r&&mm<1&&T8.forEach(function(d){var h=i.current[d];u&&(u[d]=h)}),l&&O8()&&(l.removeEventListener("touchmove",w8,kh),c&&(c.removeEventListener("touchstart",A8,kh),c.removeEventListener("touchmove",I8,kh)))}},[r]);return v.useEffect(function(){if(t){var c=o.current;return a(c),function(){s(c)}}},[t,a,s]),function(c){o.current=c}}var KFe=function(t){var n=t.target;return n.ownerDocument.activeElement&&n.ownerDocument.activeElement.blur()},qFe={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function YFe(e){var t=e.children,n=e.lockEnabled,r=e.captureEnabled,i=r===void 0?!0:r,o=e.onBottomArrive,a=e.onBottomLeave,s=e.onTopArrive,c=e.onTopLeave,l=WFe({isEnabled:i,onBottomArrive:o,onBottomLeave:a,onTopArrive:s,onTopLeave:c}),u=GFe({isEnabled:n}),d=function(f){l(f),u(f)};return St(v.Fragment,null,n&&St("div",{onClick:KFe,css:qFe}),t(d))}var XFe={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},JFe=function(t){var n=t.name,r=t.onFocus;return St("input",{required:!0,name:n,tabIndex:-1,"aria-hidden":"true",onFocus:r,css:XFe,value:"",onChange:function(){}})},QFe=JFe;function t2(e){var t;return typeof window<"u"&&window.navigator!=null?e.test(((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.platform)||window.navigator.platform):!1}function ZFe(){return t2(/^iPhone/i)}function QJ(){return t2(/^Mac/i)}function e4e(){return t2(/^iPad/i)||QJ()&&navigator.maxTouchPoints>1}function t4e(){return ZFe()||e4e()}function n4e(){return QJ()||t4e()}var r4e=function(t){return t.label},i4e=function(t){return t.label},o4e=function(t){return t.value},a4e=function(t){return!!t.isDisabled},s4e={clearIndicator:HMe,container:PMe,control:XMe,dropdownIndicator:VMe,group:eFe,groupHeading:nFe,indicatorsContainer:MMe,indicatorSeparator:WMe,input:aFe,loadingIndicator:qMe,loadingMessage:IMe,menu:SMe,menuList:TMe,menuPortal:xMe,multiValue:dFe,multiValueLabel:hFe,multiValueRemove:fFe,noOptionsMessage:wMe,option:_Fe,placeholder:CFe,singleValue:RFe,valueContainer:LMe},c4e={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},l4e=4,ZJ=4,u4e=38,d4e=ZJ*2,h4e={baseUnit:ZJ,controlHeight:u4e,menuGutter:d4e},Yw={borderRadius:l4e,colors:c4e,spacing:h4e},f4e={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:_8(),captureMenuScroll:!_8(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:VFe(),formatGroupLabel:r4e,getOptionLabel:i4e,getOptionValue:o4e,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:a4e,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!uMe(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(t){var n=t.count;return"".concat(n," result").concat(n!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function N8(e,t,n,r){var i=nQ(e,t,n),o=rQ(e,t,n),a=tQ(e,t),s=fy(e,t);return{type:"option",data:t,isDisabled:i,isSelected:o,label:a,value:s,index:r}}function j_(e,t){return e.options.map(function(n,r){if("options"in n){var i=n.options.map(function(a,s){return N8(e,a,t,s)}).filter(function(a){return D8(e,a)});return i.length>0?{type:"group",data:n,options:i,index:r}:void 0}var o=N8(e,n,t,r);return D8(e,o)?o:void 0}).filter(fMe)}function eQ(e){return e.reduce(function(t,n){return n.type==="group"?t.push.apply(t,Me(n.options.map(function(r){return r.data}))):t.push(n.data),t},[])}function P8(e,t){return e.reduce(function(n,r){return r.type==="group"?n.push.apply(n,Me(r.options.map(function(i){return{data:i.data,id:"".concat(t,"-").concat(r.index,"-").concat(i.index)}}))):n.push({data:r.data,id:"".concat(t,"-").concat(r.index)}),n},[])}function p4e(e,t){return eQ(j_(e,t))}function D8(e,t){var n=e.inputValue,r=n===void 0?"":n,i=t.data,o=t.isSelected,a=t.label,s=t.value;return(!oQ(e)||!o)&&iQ(e,{label:a,value:s,data:i},r)}function m4e(e,t){var n=e.focusedValue,r=e.selectValue,i=r.indexOf(n);if(i>-1){var o=t.indexOf(n);if(o>-1)return n;if(i<t.length)return t[i]}return null}function g4e(e,t){var n=e.focusedOption;return n&&t.indexOf(n)>-1?n:t[0]}var Xw=function(t,n){var r,i=(r=t.find(function(o){return o.data===n}))===null||r===void 0?void 0:r.id;return i||null},tQ=function(t,n){return t.getOptionLabel(n)},fy=function(t,n){return t.getOptionValue(n)};function nQ(e,t,n){return typeof e.isOptionDisabled=="function"?e.isOptionDisabled(t,n):!1}function rQ(e,t,n){if(n.indexOf(t)>-1)return!0;if(typeof e.isOptionSelected=="function")return e.isOptionSelected(t,n);var r=fy(e,t);return n.some(function(i){return fy(e,i)===r})}function iQ(e,t,n){return e.filterOption?e.filterOption(t,n):!0}var oQ=function(t){var n=t.hideSelectedOptions,r=t.isMulti;return n===void 0?r:n},v4e=1,aQ=function(e){_l(n,e);var t=Zd(n);function n(r){var i;if(Ui(this,n),i=t.call(this,r),i.state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:""},i.blockOptionHover=!1,i.isComposing=!1,i.commonProps=void 0,i.initialTouchX=0,i.initialTouchY=0,i.openAfterFocus=!1,i.scrollToFocusedOptionOnUpdate=!1,i.userIsDragging=void 0,i.isAppleDevice=n4e(),i.controlRef=null,i.getControlRef=function(c){i.controlRef=c},i.focusedOptionRef=null,i.getFocusedOptionRef=function(c){i.focusedOptionRef=c},i.menuListRef=null,i.getMenuListRef=function(c){i.menuListRef=c},i.inputRef=null,i.getInputRef=function(c){i.inputRef=c},i.focus=i.focusInput,i.blur=i.blurInput,i.onChange=function(c,l){var u=i.props,d=u.onChange,h=u.name;l.name=h,i.ariaOnChange(c,l),d(c,l)},i.setValue=function(c,l,u){var d=i.props,h=d.closeMenuOnSelect,f=d.isMulti,g=d.inputValue;i.onInputChange("",{action:"set-value",prevInputValue:g}),h&&(i.setState({inputIsHiddenAfterUpdate:!f}),i.onMenuClose()),i.setState({clearFocusValueOnUpdate:!0}),i.onChange(c,{action:l,option:u})},i.selectOption=function(c){var l=i.props,u=l.blurInputOnSelect,d=l.isMulti,h=l.name,f=i.state.selectValue,g=d&&i.isOptionSelected(c,f),p=i.isOptionDisabled(c,f);if(g){var m=i.getOptionValue(c);i.setValue(f.filter(function(_){return i.getOptionValue(_)!==m}),"deselect-option",c)}else if(!p)d?i.setValue([].concat(Me(f),[c]),"select-option",c):i.setValue(c,"select-option");else{i.ariaOnChange(c,{action:"select-option",option:c,name:h});return}u&&i.blurInput()},i.removeValue=function(c){var l=i.props.isMulti,u=i.state.selectValue,d=i.getOptionValue(c),h=u.filter(function(g){return i.getOptionValue(g)!==d}),f=jE(l,h,h[0]||null);i.onChange(f,{action:"remove-value",removedValue:c}),i.focusInput()},i.clearValue=function(){var c=i.state.selectValue;i.onChange(jE(i.props.isMulti,[],null),{action:"clear",removedValues:c})},i.popValue=function(){var c=i.props.isMulti,l=i.state.selectValue,u=l[l.length-1],d=l.slice(0,l.length-1),h=jE(c,d,d[0]||null);i.onChange(h,{action:"pop-value",removedValue:u})},i.getFocusedOptionId=function(c){return Xw(i.state.focusableOptionsWithIds,c)},i.getFocusableOptionsWithIds=function(){return P8(j_(i.props,i.state.selectValue),i.getElementId("option"))},i.getValue=function(){return i.state.selectValue},i.cx=function(){for(var c=arguments.length,l=new Array(c),u=0;u<c;u++)l[u]=arguments[u];return oMe.apply(void 0,[i.props.classNamePrefix].concat(l))},i.getOptionLabel=function(c){return tQ(i.props,c)},i.getOptionValue=function(c){return fy(i.props,c)},i.getStyles=function(c,l){var u=i.props.unstyled,d=s4e[c](l,u);d.boxSizing="border-box";var h=i.props.styles[c];return h?h(d,l):d},i.getClassNames=function(c,l){var u,d;return(u=(d=i.props.classNames)[c])===null||u===void 0?void 0:u.call(d,l)},i.getElementId=function(c){return"".concat(i.state.instancePrefix,"-").concat(c)},i.getComponents=function(){return OFe(i.props)},i.buildCategorizedOptions=function(){return j_(i.props,i.state.selectValue)},i.getCategorizedOptions=function(){return i.props.menuIsOpen?i.buildCategorizedOptions():[]},i.buildFocusableOptions=function(){return eQ(i.buildCategorizedOptions())},i.getFocusableOptions=function(){return i.props.menuIsOpen?i.buildFocusableOptions():[]},i.ariaOnChange=function(c,l){i.setState({ariaSelection:Y({value:c},l)})},i.onMenuMouseDown=function(c){c.button===0&&(c.stopPropagation(),c.preventDefault(),i.focusInput())},i.onMenuMouseMove=function(c){i.blockOptionHover=!1},i.onControlMouseDown=function(c){if(!c.defaultPrevented){var l=i.props.openMenuOnClick;i.state.isFocused?i.props.menuIsOpen?c.target.tagName!=="INPUT"&&c.target.tagName!=="TEXTAREA"&&i.onMenuClose():l&&i.openMenu("first"):(l&&(i.openAfterFocus=!0),i.focusInput()),c.target.tagName!=="INPUT"&&c.target.tagName!=="TEXTAREA"&&c.preventDefault()}},i.onDropdownIndicatorMouseDown=function(c){if(!(c&&c.type==="mousedown"&&c.button!==0)&&!i.props.isDisabled){var l=i.props,u=l.isMulti,d=l.menuIsOpen;i.focusInput(),d?(i.setState({inputIsHiddenAfterUpdate:!u}),i.onMenuClose()):i.openMenu("first"),c.preventDefault()}},i.onClearIndicatorMouseDown=function(c){c&&c.type==="mousedown"&&c.button!==0||(i.clearValue(),c.preventDefault(),i.openAfterFocus=!1,c.type==="touchend"?i.focusInput():setTimeout(function(){return i.focusInput()}))},i.onScroll=function(c){typeof i.props.closeMenuOnScroll=="boolean"?c.target instanceof HTMLElement&&vb(c.target)&&i.props.onMenuClose():typeof i.props.closeMenuOnScroll=="function"&&i.props.closeMenuOnScroll(c)&&i.props.onMenuClose()},i.onCompositionStart=function(){i.isComposing=!0},i.onCompositionEnd=function(){i.isComposing=!1},i.onTouchStart=function(c){var l=c.touches,u=l&&l.item(0);u&&(i.initialTouchX=u.clientX,i.initialTouchY=u.clientY,i.userIsDragging=!1)},i.onTouchMove=function(c){var l=c.touches,u=l&&l.item(0);if(u){var d=Math.abs(u.clientX-i.initialTouchX),h=Math.abs(u.clientY-i.initialTouchY),f=5;i.userIsDragging=d>f||h>f}},i.onTouchEnd=function(c){i.userIsDragging||(i.controlRef&&!i.controlRef.contains(c.target)&&i.menuListRef&&!i.menuListRef.contains(c.target)&&i.blurInput(),i.initialTouchX=0,i.initialTouchY=0)},i.onControlTouchEnd=function(c){i.userIsDragging||i.onControlMouseDown(c)},i.onClearIndicatorTouchEnd=function(c){i.userIsDragging||i.onClearIndicatorMouseDown(c)},i.onDropdownIndicatorTouchEnd=function(c){i.userIsDragging||i.onDropdownIndicatorMouseDown(c)},i.handleInputChange=function(c){var l=i.props.inputValue,u=c.currentTarget.value;i.setState({inputIsHiddenAfterUpdate:!1}),i.onInputChange(u,{action:"input-change",prevInputValue:l}),i.props.menuIsOpen||i.onMenuOpen()},i.onInputFocus=function(c){i.props.onFocus&&i.props.onFocus(c),i.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(i.openAfterFocus||i.props.openMenuOnFocus)&&i.openMenu("first"),i.openAfterFocus=!1},i.onInputBlur=function(c){var l=i.props.inputValue;if(i.menuListRef&&i.menuListRef.contains(document.activeElement)){i.inputRef.focus();return}i.props.onBlur&&i.props.onBlur(c),i.onInputChange("",{action:"input-blur",prevInputValue:l}),i.onMenuClose(),i.setState({focusedValue:null,isFocused:!1})},i.onOptionHover=function(c){if(!(i.blockOptionHover||i.state.focusedOption===c)){var l=i.getFocusableOptions(),u=l.indexOf(c);i.setState({focusedOption:c,focusedOptionId:u>-1?i.getFocusedOptionId(c):null})}},i.shouldHideSelectedOptions=function(){return oQ(i.props)},i.onValueInputFocus=function(c){c.preventDefault(),c.stopPropagation(),i.focus()},i.onKeyDown=function(c){var l=i.props,u=l.isMulti,d=l.backspaceRemovesValue,h=l.escapeClearsValue,f=l.inputValue,g=l.isClearable,p=l.isDisabled,m=l.menuIsOpen,_=l.onKeyDown,E=l.tabSelectsValue,S=l.openMenuOnFocus,C=i.state,b=C.focusedOption,T=C.focusedValue,R=C.selectValue;if(!p&&!(typeof _=="function"&&(_(c),c.defaultPrevented))){switch(i.blockOptionHover=!0,c.key){case"ArrowLeft":if(!u||f)return;i.focusValue("previous");break;case"ArrowRight":if(!u||f)return;i.focusValue("next");break;case"Delete":case"Backspace":if(f)return;if(T)i.removeValue(T);else{if(!d)return;u?i.popValue():g&&i.clearValue()}break;case"Tab":if(i.isComposing||c.shiftKey||!m||!E||!b||S&&i.isOptionSelected(b,R))return;i.selectOption(b);break;case"Enter":if(c.keyCode===229)break;if(m){if(!b||i.isComposing)return;i.selectOption(b);break}return;case"Escape":m?(i.setState({inputIsHiddenAfterUpdate:!1}),i.onInputChange("",{action:"menu-close",prevInputValue:f}),i.onMenuClose()):g&&h&&i.clearValue();break;case" ":if(f)return;if(!m){i.openMenu("first");break}if(!b)return;i.selectOption(b);break;case"ArrowUp":m?i.focusOption("up"):i.openMenu("last");break;case"ArrowDown":m?i.focusOption("down"):i.openMenu("first");break;case"PageUp":if(!m)return;i.focusOption("pageup");break;case"PageDown":if(!m)return;i.focusOption("pagedown");break;case"Home":if(!m)return;i.focusOption("first");break;case"End":if(!m)return;i.focusOption("last");break;default:return}c.preventDefault()}},i.state.instancePrefix="react-select-"+(i.props.instanceId||++v4e),i.state.selectValue=v8(r.value),r.menuIsOpen&&i.state.selectValue.length){var o=i.getFocusableOptionsWithIds(),a=i.buildFocusableOptions(),s=a.indexOf(i.state.selectValue[0]);i.state.focusableOptionsWithIds=o,i.state.focusedOption=a[s],i.state.focusedOptionId=Xw(o,a[s])}return i}return Bi(n,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&E8(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(i){var o=this.props,a=o.isDisabled,s=o.menuIsOpen,c=this.state.isFocused;(c&&!a&&i.isDisabled||c&&s&&!i.menuIsOpen)&&this.focusInput(),c&&a&&!i.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!c&&!a&&i.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(E8(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(i,o){this.props.onInputChange(i,o)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(i){var o=this,a=this.state,s=a.selectValue,c=a.isFocused,l=this.buildFocusableOptions(),u=i==="first"?0:l.length-1;if(!this.props.isMulti){var d=l.indexOf(s[0]);d>-1&&(u=d)}this.scrollToFocusedOptionOnUpdate=!(c&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:l[u],focusedOptionId:this.getFocusedOptionId(l[u])},function(){return o.onMenuOpen()})}},{key:"focusValue",value:function(i){var o=this.state,a=o.selectValue,s=o.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var c=a.indexOf(s);s||(c=-1);var l=a.length-1,u=-1;if(a.length){switch(i){case"previous":c===0?u=0:c===-1?u=l:u=c-1;break;case"next":c>-1&&c<l&&(u=c+1);break}this.setState({inputIsHidden:u!==-1,focusedValue:a[u]})}}}},{key:"focusOption",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",o=this.props.pageSize,a=this.state.focusedOption,s=this.getFocusableOptions();if(s.length){var c=0,l=s.indexOf(a);a||(l=-1),i==="up"?c=l>0?l-1:s.length-1:i==="down"?c=(l+1)%s.length:i==="pageup"?(c=l-o,c<0&&(c=0)):i==="pagedown"?(c=l+o,c>s.length-1&&(c=s.length-1)):i==="last"&&(c=s.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:s[c],focusedValue:null,focusedOptionId:this.getFocusedOptionId(s[c])})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(Yw):Y(Y({},Yw),this.props.theme):Yw}},{key:"getCommonProps",value:function(){var i=this.clearValue,o=this.cx,a=this.getStyles,s=this.getClassNames,c=this.getValue,l=this.selectOption,u=this.setValue,d=this.props,h=d.isMulti,f=d.isRtl,g=d.options,p=this.hasValue();return{clearValue:i,cx:o,getStyles:a,getClassNames:s,getValue:c,hasValue:p,isMulti:h,isRtl:f,options:g,selectOption:l,selectProps:d,setValue:u,theme:this.getTheme()}}},{key:"hasValue",value:function(){var i=this.state.selectValue;return i.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var i=this.props,o=i.isClearable,a=i.isMulti;return o===void 0?a:o}},{key:"isOptionDisabled",value:function(i,o){return nQ(this.props,i,o)}},{key:"isOptionSelected",value:function(i,o){return rQ(this.props,i,o)}},{key:"filterOption",value:function(i,o){return iQ(this.props,i,o)}},{key:"formatOptionLabel",value:function(i,o){if(typeof this.props.formatOptionLabel=="function"){var a=this.props.inputValue,s=this.state.selectValue;return this.props.formatOptionLabel(i,{context:o,inputValue:a,selectValue:s})}else return this.getOptionLabel(i)}},{key:"formatGroupLabel",value:function(i){return this.props.formatGroupLabel(i)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var i=this.props,o=i.isDisabled,a=i.isSearchable,s=i.inputId,c=i.inputValue,l=i.tabIndex,u=i.form,d=i.menuIsOpen,h=i.required,f=this.getComponents(),g=f.Input,p=this.state,m=p.inputIsHidden,_=p.ariaSelection,E=this.commonProps,S=s||this.getElementId("input"),C=Y(Y(Y({"aria-autocomplete":"list","aria-expanded":d,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":h,role:"combobox","aria-activedescendant":this.isAppleDevice?void 0:this.state.focusedOptionId||""},d&&{"aria-controls":this.getElementId("listbox")}),!a&&{"aria-readonly":!0}),this.hasValue()?(_==null?void 0:_.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return a?v.createElement(g,Ee({},E,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:S,innerRef:this.getInputRef,isDisabled:o,isHidden:m,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:l,form:u,type:"text",value:c},C)):v.createElement(HFe,Ee({id:S,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:dy,onFocus:this.onInputFocus,disabled:o,tabIndex:l,inputMode:"none",form:u,value:""},C))}},{key:"renderPlaceholderOrValue",value:function(){var i=this,o=this.getComponents(),a=o.MultiValue,s=o.MultiValueContainer,c=o.MultiValueLabel,l=o.MultiValueRemove,u=o.SingleValue,d=o.Placeholder,h=this.commonProps,f=this.props,g=f.controlShouldRenderValue,p=f.isDisabled,m=f.isMulti,_=f.inputValue,E=f.placeholder,S=this.state,C=S.selectValue,b=S.focusedValue,T=S.isFocused;if(!this.hasValue()||!g)return _?null:v.createElement(d,Ee({},h,{key:"placeholder",isDisabled:p,isFocused:T,innerProps:{id:this.getElementId("placeholder")}}),E);if(m)return C.map(function(A,O){var x=A===b,M="".concat(i.getOptionLabel(A),"-").concat(i.getOptionValue(A));return v.createElement(a,Ee({},h,{components:{Container:s,Label:c,Remove:l},isFocused:x,isDisabled:p,key:M,index:O,removeProps:{onClick:function(){return i.removeValue(A)},onTouchEnd:function(){return i.removeValue(A)},onMouseDown:function(U){U.preventDefault()}},data:A}),i.formatOptionLabel(A,"value"))});if(_)return null;var R=C[0];return v.createElement(u,Ee({},h,{data:R,isDisabled:p}),this.formatOptionLabel(R,"value"))}},{key:"renderClearIndicator",value:function(){var i=this.getComponents(),o=i.ClearIndicator,a=this.commonProps,s=this.props,c=s.isDisabled,l=s.isLoading,u=this.state.isFocused;if(!this.isClearable()||!o||c||!this.hasValue()||l)return null;var d={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return v.createElement(o,Ee({},a,{innerProps:d,isFocused:u}))}},{key:"renderLoadingIndicator",value:function(){var i=this.getComponents(),o=i.LoadingIndicator,a=this.commonProps,s=this.props,c=s.isDisabled,l=s.isLoading,u=this.state.isFocused;if(!o||!l)return null;var d={"aria-hidden":"true"};return v.createElement(o,Ee({},a,{innerProps:d,isDisabled:c,isFocused:u}))}},{key:"renderIndicatorSeparator",value:function(){var i=this.getComponents(),o=i.DropdownIndicator,a=i.IndicatorSeparator;if(!o||!a)return null;var s=this.commonProps,c=this.props.isDisabled,l=this.state.isFocused;return v.createElement(a,Ee({},s,{isDisabled:c,isFocused:l}))}},{key:"renderDropdownIndicator",value:function(){var i=this.getComponents(),o=i.DropdownIndicator;if(!o)return null;var a=this.commonProps,s=this.props.isDisabled,c=this.state.isFocused,l={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return v.createElement(o,Ee({},a,{innerProps:l,isDisabled:s,isFocused:c}))}},{key:"renderMenu",value:function(){var i=this,o=this.getComponents(),a=o.Group,s=o.GroupHeading,c=o.Menu,l=o.MenuList,u=o.MenuPortal,d=o.LoadingMessage,h=o.NoOptionsMessage,f=o.Option,g=this.commonProps,p=this.state.focusedOption,m=this.props,_=m.captureMenuScroll,E=m.inputValue,S=m.isLoading,C=m.loadingMessage,b=m.minMenuHeight,T=m.maxMenuHeight,R=m.menuIsOpen,A=m.menuPlacement,O=m.menuPosition,x=m.menuPortalTarget,M=m.menuShouldBlockScroll,$=m.menuShouldScrollIntoView,U=m.noOptionsMessage,V=m.onMenuScrollToTop,W=m.onMenuScrollToBottom;if(!R)return null;var z=function(N,B){var K=N.type,X=N.data,ee=N.isDisabled,ne=N.isSelected,fe=N.label,ae=N.value,oe=p===X,he=ee?void 0:function(){return i.onOptionHover(X)},me=ee?void 0:function(){return i.selectOption(X)},ie="".concat(i.getElementId("option"),"-").concat(B),te={id:ie,onClick:me,onMouseMove:he,onMouseOver:he,tabIndex:-1,role:"option","aria-selected":i.isAppleDevice?void 0:ne};return v.createElement(f,Ee({},g,{innerProps:te,data:X,isDisabled:ee,isSelected:ne,key:ie,label:fe,type:K,value:ae,isFocused:oe,innerRef:oe?i.getFocusedOptionRef:void 0}),i.formatOptionLabel(N.data,"menu"))},L;if(this.hasOptions())L=this.getCategorizedOptions().map(function(I){if(I.type==="group"){var N=I.data,B=I.options,K=I.index,X="".concat(i.getElementId("group"),"-").concat(K),ee="".concat(X,"-heading");return v.createElement(a,Ee({},g,{key:X,data:N,options:B,Heading:s,headingProps:{id:ee,data:I.data},label:i.formatGroupLabel(I.data)}),I.options.map(function(ne){return z(ne,"".concat(K,"-").concat(ne.index))}))}else if(I.type==="option")return z(I,"".concat(I.index))});else if(S){var D=C({inputValue:E});if(D===null)return null;L=v.createElement(d,g,D)}else{var j=U({inputValue:E});if(j===null)return null;L=v.createElement(h,g,j)}var F={minMenuHeight:b,maxMenuHeight:T,menuPlacement:A,menuPosition:O,menuShouldScrollIntoView:$},y=v.createElement(yMe,Ee({},g,F),function(I){var N=I.ref,B=I.placerProps,K=B.placement,X=B.maxHeight;return v.createElement(c,Ee({},g,F,{innerRef:N,innerProps:{onMouseDown:i.onMenuMouseDown,onMouseMove:i.onMenuMouseMove},isLoading:S,placement:K}),v.createElement(YFe,{captureEnabled:_,onTopArrive:V,onBottomArrive:W,lockEnabled:M},function(ee){return v.createElement(l,Ee({},g,{innerRef:function(fe){i.getMenuListRef(fe),ee(fe)},innerProps:{role:"listbox","aria-multiselectable":g.isMulti,id:i.getElementId("listbox")},isLoading:S,maxHeight:X,focusedOption:p}),L)}))});return x||O==="fixed"?v.createElement(u,Ee({},g,{appendTo:x,controlElement:this.controlRef,menuPlacement:A,menuPosition:O}),y):y}},{key:"renderFormField",value:function(){var i=this,o=this.props,a=o.delimiter,s=o.isDisabled,c=o.isMulti,l=o.name,u=o.required,d=this.state.selectValue;if(u&&!this.hasValue()&&!s)return v.createElement(QFe,{name:l,onFocus:this.onValueInputFocus});if(!(!l||s))if(c)if(a){var h=d.map(function(p){return i.getOptionValue(p)}).join(a);return v.createElement("input",{name:l,type:"hidden",value:h})}else{var f=d.length>0?d.map(function(p,m){return v.createElement("input",{key:"i-".concat(m),name:l,type:"hidden",value:i.getOptionValue(p)})}):v.createElement("input",{name:l,type:"hidden",value:""});return v.createElement("div",null,f)}else{var g=d[0]?this.getOptionValue(d[0]):"";return v.createElement("input",{name:l,type:"hidden",value:g})}}},{key:"renderLiveRegion",value:function(){var i=this.commonProps,o=this.state,a=o.ariaSelection,s=o.focusedOption,c=o.focusedValue,l=o.isFocused,u=o.selectValue,d=this.getFocusableOptions();return v.createElement(FFe,Ee({},i,{id:this.getElementId("live-region"),ariaSelection:a,focusedOption:s,focusedValue:c,isFocused:l,selectValue:u,focusableOptions:d,isAppleDevice:this.isAppleDevice}))}},{key:"render",value:function(){var i=this.getComponents(),o=i.Control,a=i.IndicatorsContainer,s=i.SelectContainer,c=i.ValueContainer,l=this.props,u=l.className,d=l.id,h=l.isDisabled,f=l.menuIsOpen,g=this.state.isFocused,p=this.commonProps=this.getCommonProps();return v.createElement(s,Ee({},p,{className:u,innerProps:{id:d,onKeyDown:this.onKeyDown},isDisabled:h,isFocused:g}),this.renderLiveRegion(),v.createElement(o,Ee({},p,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:h,isFocused:g,menuIsOpen:f}),v.createElement(c,Ee({},p,{isDisabled:h}),this.renderPlaceholderOrValue(),this.renderInput()),v.createElement(a,Ee({},p,{isDisabled:h}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(i,o){var a=o.prevProps,s=o.clearFocusValueOnUpdate,c=o.inputIsHiddenAfterUpdate,l=o.ariaSelection,u=o.isFocused,d=o.prevWasFocused,h=o.instancePrefix,f=i.options,g=i.value,p=i.menuIsOpen,m=i.inputValue,_=i.isMulti,E=v8(g),S={};if(a&&(g!==a.value||f!==a.options||p!==a.menuIsOpen||m!==a.inputValue)){var C=p?p4e(i,E):[],b=p?P8(j_(i,E),"".concat(h,"-option")):[],T=s?m4e(o,E):null,R=g4e(o,C),A=Xw(b,R);S={selectValue:E,focusedOption:R,focusedOptionId:A,focusableOptionsWithIds:b,focusedValue:T,clearFocusValueOnUpdate:!1}}var O=c!=null&&i!==a?{inputIsHidden:c,inputIsHiddenAfterUpdate:void 0}:{},x=l,M=u&&d;return u&&!M&&(x={value:jE(_,E,E[0]||null),options:E,action:"initial-input-focus"},M=!d),(l==null?void 0:l.action)==="initial-input-focus"&&(x=null),Y(Y(Y({},S),O),{},{prevProps:i,ariaSelection:x,prevWasFocused:M})}}]),n}(v.Component);aQ.defaultProps=f4e;var E4e=v.forwardRef(function(e,t){var n=VLe(e);return v.createElement(aQ,Ee({ref:t},n))}),_4e=E4e;const{Title:S4e,Paragraph:y4e}=$i,C4e=v.memo(function({label:t}){const r=Xs().filter(c=>c.hasAudio||c.hasVideo),i=f0(c=>c.localTracks),o=f0(c=>c.hostRoom),a=ps(),s=wa();return G.jsxs("div",{className:"room-selector-item",children:[G.jsx("i",{className:"i-mdi-chat-processing-outline text-5 color-zinc"}),G.jsx("code",{className:"bg-rose color-white px-2 rounded",children:t}),a&&i&&s.uid&&(o==null?void 0:o.client.channelName)===s.channelName&&G.jsxs("div",{className:"user",children:[G.jsx(iW,{audioTrack:i[0],cameraOn:!0,micOn:!0,videoTrack:i[1]}),G.jsx("div",{className:"mask"}),G.jsx("label",{className:"label",children:Gs(s.uid)})]},s.uid),G.jsx(G.Fragment,{children:r.map(c=>G.jsxs("div",{className:"user",children:[G.jsx(BN,{user:c}),G.jsx("div",{className:"mask"}),G.jsx("label",{className:"label",children:Gs(c.uid)})]},c.uid))})]})}),b4e=({innerProps:e,isDisabled:t,label:n,data:r})=>{const{client:i}=r.value;return t?null:G.jsx("div",{...e,children:G.jsx(eW,{client:i,children:G.jsx(C4e,{label:n})})})},T4e=()=>{const e=f0(a=>a.getRooms),[t,n]=v.useState(!1);v.useEffect(()=>{e()},[]);const r=f0(a=>a.rooms),i=f0(a=>a.selectChannel),o=v.useMemo(()=>r==null?void 0:r.map(a=>({label:a.channel.replace(/[^0-9]*/,"Room"),value:a})),[r]);return G.jsx(Fr,{children:t?G.jsx("div",{className:"max-w-lg p-10",children:G.jsx(_4e,{components:{Option:b4e},isMulti:!1,menuIsOpen:!0,onChange:a=>{var s;return i((s=a==null?void 0:a.value)==null?void 0:s.channel)},options:o})}):G.jsxs("div",{className:"h-screen p-3",children:[G.jsx(S4e,{children:"multi-channel"}),G.jsx(y4e,{children:"This is multi-channel example. By create multi Agora Client. You can join multi-channel"}),G.jsx("div",{className:"text-xl",children:G.jsx(fi,{onClick:()=>n(!0),type:"primary",children:"show demo"})})]})})};function sQ({videoTracks:e}){return G.jsx(G.Fragment,{children:e.map(t=>G.jsxs(os.Item,{children:[G.jsx(Qg,{cover:xc(),track:t},t.getUserId()),G.jsx(gl,{children:`${Gs(t.getUserId())}{${t.getUserId()}}`})]},t.getUserId()))})}const R4e=()=>{const[e,t]=v.useState(!1);ai({appid:tt.appId,channel:tt.channel,token:tt.token},e);const[n,r]=v.useState(!1),[i,o]=v.useState(!1),[a,s]=v.useState(!1),{screenTrack:c,error:l}=tW(a,{},"auto");v.useEffect(()=>{s(!1)},[l]);const u=Xs(),{videoTracks:d}=Cp(u.filter(f=>f.uid!==tt.ShareScreenUID)),{audioTracks:h}=yp(u.filter(f=>f.uid!==tt.ShareScreenUID));return h.map(f=>f.play()),G.jsxs(Fr,{children:[G.jsx("div",{className:"h-screen p-3",children:e&&G.jsxs(G.Fragment,{children:[G.jsx(fi,{onClick:()=>s(f=>!f),type:"primary",children:a?"stop share screen":"start share screen"}),a&&G.jsx(dLe,{onCloseScreenShare:()=>{s(!1)},screenShareOn:a,screenTrack:c}),G.jsx(Zg,{cameraOn:i,micOn:n,renderRemoteUsers:()=>G.jsx(sQ,{videoTracks:d})})]})}),G.jsx(Mo,{calling:e,cameraOn:i,micOn:n,setCalling:()=>{t(f=>!f),s(!1)},setCamera:()=>{o(f=>!f)},setMic:()=>{r(f=>!f)}})]})};const{Title:w4e,Paragraph:I4e,Text:A4e}=$i,O4e=()=>{const[e,t]=v.useState(!1);ai({appid:tt.appId,channel:tt.channel,token:tt.token},e);const[n,r]=v.useState(!1),[i,o]=v.useState(!1),a=Xs(),[s,c]=v.useState(!0),{videoTracks:l}=Cp(s?a:a.filter((f,g)=>g==0)),{audioTracks:u}=yp(a);u.map(f=>f.play());const d=()=>G.jsx("div",{className:"p-4 text-xl",children:G.jsx(fi,{onClick:()=>c(f=>!f),type:"primary",children:`switch to layout ${s?2:1}`})}),h=()=>G.jsx(G.Fragment,{children:s?G.jsx(x4e,{videoTracks:l}):G.jsx(N4e,{videoTracks:l})});return G.jsxs(Fr,{children:[e?G.jsx(Zg,{cameraOn:i,micOn:n,renderAction:d,renderRemoteUsers:h}):G.jsxs("div",{className:"h-screen p-3",children:[G.jsx(w4e,{children:"SwitchLayout"}),G.jsxs(I4e,{children:["By using ",G.jsx(A4e,{keyboard:!0,children:"useRemoteVideoTracks"})," hook to dynamically switch the camera track, this will not generate a new track, but only dynamically subscribe and unsubscribe the track according to your needs."]})]}),G.jsx(Mo,{calling:e,cameraOn:i,micOn:n,setCalling:()=>{t(f=>!f)},setCamera:()=>{o(f=>!f)},setMic:()=>{r(f=>!f)}})]})};function x4e({videoTracks:e}){return G.jsx(G.Fragment,{children:e.map(t=>G.jsxs(os.Item,{children:[G.jsx(Qg,{cover:xc(),track:t},t.getUserId()),G.jsx(gl,{children:`Layout1 ${Gs(t.getUserId())}{${t.getUserId()}}`})]},t.getUserId()))})}function N4e({videoTracks:e}){return G.jsx(G.Fragment,{children:e.map(t=>G.jsxs(os.Item,{children:[G.jsx(Qg,{cover:xc(),track:t},t.getUserId()),G.jsx(gl,{children:`Layout2 ${Gs(t.getUserId())}{${t.getUserId()}}`})]},t.getUserId()))})}const cQ=[{label:"switch-layout",component:O4e},{label:"multi-channel",component:T4e},{label:"share-screen",component:R4e}],P4e=()=>{const[e,t]=v.useState(!1);ai({appid:tt.appId,channel:tt.channel,token:tt.token},e);const[n,r]=v.useState(!1),[i,o]=v.useState(!1),a=Xs(),{videoTracks:s}=Cp(a),{audioTracks:c}=yp(a);return c.map(l=>l.play()),G.jsxs(Fr,{children:[e?G.jsx(Zg,{cameraOn:i,micOn:n,renderRemoteUsers:()=>G.jsx(sQ,{videoTracks:s})}):G.jsx(Fr,{}),G.jsx(Mo,{calling:e,cameraOn:i,micOn:n,setCalling:()=>{t(l=>!l)},setCamera:()=>{o(l=>!l)},setMic:()=>{r(l=>!l)}})]})},lQ=[{label:"overview",component:P4e}],{Title:D4e,Paragraph:Jw}=$i,L4e=()=>{ai({appid:tt.appId,channel:tt.channel,token:tt.token},!0);const[e,t]=v.useState(!1),[n,r]=v.useState(),{localMicrophoneTrack:i}=_p(e);return xu([i]),v.useEffect(()=>{i&&r({muted:i.muted,isPlaying:i.isPlaying,enabled:i.enabled})},[e,i]),G.jsxs(Fr,{children:[G.jsxs("div",{className:"h-screen p-3",children:[G.jsx(D4e,{children:"local audio track status"}),n&&G.jsxs(G.Fragment,{children:[G.jsx(Jw,{children:`muted: ${n==null?void 0:n.muted}`}),G.jsx(Jw,{children:`isPlaying: ${n.isPlaying}`}),G.jsx(Jw,{children:`enabled: ${n==null?void 0:n.enabled}`})]}),G.jsx(Jy,{disabled:!e,track:i})]}),G.jsx(Mo,{micOn:e,setMic:()=>{t(o=>!o)}})]})},{Title:k4e}=$i,M4e=()=>{ai({appid:tt.appId,channel:tt.channel,token:tt.token},!0);const[e,t]=v.useState(!1),[n,r]=v.useState(!1),[i,o]=v.useState(!1),[a,s]=v.useState(!1),{localMicrophoneTrack:c}=_p(e),{localCameraTrack:l}=Sp(n);return xu([c,l]),G.jsxs(Fr,{children:[G.jsxs("div",{className:"h-screen p-3 overflow-auto",children:[G.jsx(k4e,{children:"local user status"}),G.jsxs(fi,{className:"m-2",onClick:()=>{s(u=>!u)},type:a?"primary":"default",children:["playAudio : ",JSON.stringify(a)]}),G.jsxs(fi,{className:"m-2",onClick:()=>{o(u=>!u)},type:i?"primary":"default",children:["playVideo : ",JSON.stringify(i)]}),G.jsx(fi,{className:"m-2",onClick:()=>{o(!0),r(!1)},type:"primary",children:"cameraOn=false playVideo=true"}),G.jsx(fi,{className:"m-2",onClick:()=>{o(!1),r(!0)},type:"primary",children:"cameraOn=true playVideo=false"}),G.jsx(iW,{audioTrack:c,cameraOn:n,className:"m-2",micOn:e,playAudio:a,playVideo:i,style:{width:"300px",height:"300px"},videoTrack:l})]}),G.jsx(Mo,{cameraOn:n,micOn:e,setCamera:()=>{r(u=>!u)},setMic:()=>{t(u=>!u)}})]})},{Title:F4e}=$i,U4e=()=>{ai({appid:tt.appId,channel:tt.channel,token:tt.token},!0);const[e,t]=v.useState(!1),{localCameraTrack:n}=Sp();return xu([n]),G.jsxs(Fr,{children:[G.jsxs("div",{className:"h-screen p-3",children:[G.jsx(F4e,{children:"local video track"}),G.jsx(Fg,{disabled:!e,play:e,style:{width:"300px",height:"300px"},track:n,videoPlayerConfig:{mirror:!0,fit:"contain"}})]}),G.jsx(Mo,{cameraOn:e,setCamera:()=>{t(r=>!r)}})]})},{Title:B4e}=$i,$4e=()=>{const[e,t]=v.useState(!1);ai({appid:tt.appId,channel:tt.channel,token:tt.token},e);const[n,r]=v.useState(),i=Xs(),{audioTracks:o}=yp(i);return v.useEffect(()=>{if(o&&o.length>0){const a=[];o.map(s=>{a.push({isPlay:s.isPlaying,id:s.getTrackId(),track:s})}),r(a)}else r([])},[o]),v.useEffect(()=>{e||r([])},[e]),G.jsxs(Fr,{children:[G.jsxs("div",{className:"h-screen p-3",children:[G.jsx(B4e,{children:"remote audio track status"}),n&&n.length>0&&n.map(a=>G.jsxs("div",{children:[G.jsx("div",{className:"p-4 text-xl",children:G.jsx(fi,{onClick:()=>{a.isPlay=!a.isPlay,r([...n])},type:"primary",children:"switch this remote audio track play status"})}),a.isPlay,G.jsx(oW,{play:a.isPlay,track:a.track})]},a.id))]}),G.jsx(Mo,{calling:e,setCalling:()=>{t(a=>!a)}})]})},{Title:V4e}=$i,j4e=()=>{const[e,t]=v.useState(!1),n=v.useMemo(()=>xc(),[]);ai({appid:tt.appId,channel:tt.channel,token:tt.token},e);const[r,i]=v.useState(),o=Xs();return v.useEffect(()=>{if(o.length>0){const a=[];o.map(s=>{a.push({playVideo:!0,playAudio:!0,id:s.uid,user:s})}),i(a)}else i([])},[o]),v.useEffect(()=>{e||i([])},[e]),G.jsxs(Fr,{children:[G.jsxs("div",{className:"h-screen p-3",children:[G.jsx(V4e,{children:"RemoteUser"}),r&&r.length>0&&r.map(a=>G.jsxs("div",{children:[G.jsxs("div",{className:"text-xl",children:[G.jsx(fi,{className:"m-2",onClick:()=>{a.playVideo=!a.playVideo,i([...r])},type:a.playVideo?"default":"primary",children:`${a.playVideo?"stop":"play"} RemoteUser Video`}),G.jsx(fi,{className:"m-2",onClick:()=>{a.playAudio=!a.playAudio,i([...r])},type:a.playAudio?"default":"primary",children:`${a.playAudio?"stop":"play"} RemoteUser Audio`})]}),G.jsx("div",{className:"p-4 text-xl",children:G.jsx(BN,{cover:n,playAudio:a.playAudio,playVideo:a.playVideo,style:{width:"150px",height:"100px"},user:a.user})})]},a.id))]}),G.jsx(Mo,{calling:e,setCalling:()=>{t(a=>!a)}})]})},{Title:H4e}=$i,z4e=()=>{const[e,t]=v.useState(!1);ai({appid:tt.appId,channel:tt.channel,token:tt.token},e);const[n,r]=v.useState(),i=Xs(),{videoTracks:o}=Cp(i);return v.useEffect(()=>{if(o&&o.length>0){const a=[];o.map(s=>{a.push({isPlay:!0,id:s.getTrackId(),track:s})}),r(a)}else r([])},[o]),v.useEffect(()=>{e||r([])},[e]),G.jsxs(Fr,{children:[G.jsxs("div",{className:"h-screen p-3",children:[G.jsx(H4e,{children:"remote video track status"}),n&&n.length>0&&n.map(a=>G.jsxs("div",{children:[G.jsx("div",{className:"p-4 text-xl",children:G.jsx(fi,{onClick:()=>{a.isPlay=!a.isPlay,r([...n])},type:"primary",children:"switch this remote video track play status"})}),G.jsx("div",{className:"p-4 text-xl",children:G.jsx(UN,{play:a.isPlay,style:{width:"150px",height:"100px"},track:a.track})})]},a.id))]}),G.jsx(Mo,{calling:e,setCalling:()=>{t(a=>!a)}})]})},uQ=[{label:"LocalAudioTrack",component:L4e},{label:"RemoteAudioTrack",component:$4e},{label:"LocalVideoTrack",component:U4e},{label:"RemoteVideoTrack",component:z4e},{label:"LocalUser",component:M4e},{label:"RemoteUser",component:j4e}],{Title:W4e}=$i,G4e=()=>{ai({appid:tt.appId,channel:tt.channel,token:tt.token},!0);const[e,t]=v.useState(!1),{localMicrophoneTrack:n}=_p();return FN(n,e),G.jsxs(Fr,{children:[G.jsx("div",{className:"h-screen p-3",children:G.jsx(W4e,{children:"useAutoPlayAudioTrack"})}),G.jsx(Mo,{micOn:e,setMic:()=>{t(r=>!r)}})]})},{Title:K4e}=$i,q4e=()=>{ai({appid:tt.appId,channel:tt.channel,token:tt.token},!0);const[e,t]=v.useState(!1),n=v.useRef(null),{localCameraTrack:r}=Sp();return MN(r,e,n.current),G.jsxs(Fr,{children:[G.jsxs("div",{className:"h-screen p-3",children:[G.jsx(K4e,{children:"useAutoPlayVideoTrack"}),G.jsx("div",{className:"p-4 text-xl",children:G.jsx("div",{ref:i=>n.current=i,style:{width:"150px",height:"100px"}})})]}),G.jsx(Mo,{cameraOn:e,setCamera:()=>{t(i=>!i)}})]})},{Title:Y4e}=$i,X4e=()=>{const[e,t]=v.useState(!1),[n,r]=v.useState([]),i=wa();Kme(i,"connection-state-change",(a,s,c)=>{console.log(`connection-state-change,curState: ${a},revState: ${s},reason: ${c}`),r(l=>l.concat({eventName:"connection-state-change",value:`curState: ${a},revState: ${s},reason: ${c}`}))}),ai({appid:tt.appId,channel:tt.channel,token:tt.token},e);const o=()=>G.jsx(G.Fragment,{});return G.jsxs(Fr,{children:[G.jsxs("div",{className:"h-screen p-3",children:[G.jsx(Y4e,{children:"UseClientEvent"}),G.jsx(sx,{bordered:!0,dataSource:n,renderItem:a=>G.jsxs(sx.Item,{children:[G.jsxs($i.Text,{mark:!0,children:["[",a.eventName,"]"]})," ",a.value]}),style:{height:"300px",overflow:"auto"}})]}),e&&G.jsx(Zg,{cameraOn:!1,micOn:!1,renderLocalUser:o,showUserInfo:!1}),G.jsx(Mo,{calling:e,setCalling:()=>{t(a=>!a)}})]})},{Title:J4e,Paragraph:Qw,Text:Q4e}=$i,Z4e=()=>{const[e,t]=v.useState(!1),n=Jme();return ai({appid:tt.appId,channel:tt.channel,token:tt.token},e),G.jsx(Fr,{children:G.jsxs("div",{className:"h-screen p-3",children:[G.jsx(J4e,{children:"useConnectionState"}),G.jsxs(Qw,{children:["By using ",G.jsx(Q4e,{keyboard:!0,children:"useConnectionState"})," hook to get the current connection state of the client."]}),G.jsx(Qw,{children:`result: ${n}`}),G.jsxs(Qw,{children:[G.jsx(fi,{className:"m-1",onClick:()=>t(!0),type:"primary",children:"Join"}),G.jsx(fi,{className:"m-1",onClick:()=>t(!1),type:"default",children:"Leave"})]})]})})},{Title:eUe,Paragraph:Zw,Text:tUe}=$i,nUe=()=>{const[e,t]=v.useState(!1),n=Xy();return ai({appid:tt.appId,channel:tt.channel,token:tt.token},e),G.jsx(Fr,{children:G.jsxs("div",{className:"h-screen p-3",children:[G.jsx(eUe,{children:"useCurrentUID"}),G.jsxs(Zw,{children:["By using ",G.jsx(tUe,{keyboard:!0,children:"useCurrentUID"})," hook to get the UID of the current user."]}),G.jsx(Zw,{children:`result: ${n}`}),G.jsxs(Zw,{children:[G.jsx(fi,{className:"m-1",onClick:()=>t(!0),type:"primary",children:"Join"}),G.jsx(fi,{className:"m-1",onClick:()=>t(!1),type:"default",children:"Leave"})]})]})})},{Title:rUe,Paragraph:eI,Text:iUe}=$i,oUe=()=>{const[e,t]=v.useState(!1),n=ps();return ai({appid:tt.appId,channel:tt.channel,token:tt.token},e),G.jsx(Fr,{children:G.jsxs("div",{className:"h-screen p-3",children:[G.jsx(rUe,{children:"useIsConnected"}),G.jsxs(eI,{children:["By using ",G.jsx(iUe,{keyboard:!0,children:"useIsConnected"})," hook to determines whether the client is successfully connected to Agora server."]}),G.jsx(eI,{children:`result: ${n}`}),G.jsxs(eI,{children:[G.jsx(fi,{className:"m-1",onClick:()=>t(!0),type:"primary",children:"Join"}),G.jsx(fi,{className:"m-1",onClick:()=>t(!1),type:"default",children:"Leave"})]})]})})},{Title:aUe,Paragraph:L8,Text:gm}=$i,sUe=()=>{const[e,t]=v.useState(!1),{data:n,isLoading:r,isConnected:i,error:o}=ai({appid:tt.appId,channel:tt.channel,token:tt.token},e),[a,s]=v.useState(!1),[c,l]=v.useState(!1),u=Xs(),{videoTracks:d}=Cp(u),{audioTracks:h}=yp(u);h.map(g=>g.play());const f=()=>G.jsx(G.Fragment,{children:d.map(g=>G.jsxs(os.Item,{children:[G.jsx(Qg,{cover:xc(),track:g},g.getUserId()),G.jsx(gl,{children:`${Gs(g.getUserId())}{${g.getUserId()}}`})]},g.getUserId()))});return G.jsxs(Fr,{children:[G.jsxs("div",{className:"h-screen p-3",children:[G.jsx(aUe,{children:"UseJoin"}),G.jsxs(L8,{children:["By using ",G.jsx(gm,{keyboard:!0,children:"UseJoin"})," hook to join room."]}),G.jsxs(L8,{children:["You can do some actions like fetching token before calling join.",G.jsx("br",{}),"Below is the returned data."]}),G.jsxs(gm,{children:["data: ",n]}),G.jsxs(gm,{className:"pl-3",children:["isLoading: ",`${r}`]}),G.jsxs(gm,{className:"pl-3",children:["isConnected: ",`${i}`]}),G.jsxs(gm,{className:"pl-3",children:["error: ",`${JSON.stringify(o)}`]})]}),e&&G.jsx(Zg,{cameraOn:c,micOn:a,renderRemoteUsers:f}),G.jsx(Mo,{calling:e,cameraOn:c,micOn:a,setCalling:()=>{t(g=>!g)},setCamera:()=>{l(g=>!g)},setMic:()=>{s(g=>!g)}})]})},{Title:cUe}=$i,lUe=()=>{const[e,t]=v.useState(!1),[n,r]=v.useState(null),[i,o]=v.useState(null);ai({appid:tt.appId,channel:tt.channel,token:tt.token,uid:tt.ShareScreenUID},e);const{screenTrack:a,error:s}=tW(e,{},"auto");return v.useEffect(()=>{a?Array.isArray(a)?(r(a.filter(c=>c.trackMediaType==="video")[0]),o(a.filter(c=>c.trackMediaType==="audio")[0])):r(a):(o(null),r(null))},[a]),xu([n,i],e),v.useEffect(()=>{t(!1)},[s]),Qz(n,"track-ended",()=>{console.log("screen sharing ended"),t(!1)}),G.jsx(Fr,{children:G.jsxs("div",{className:"h-screen p-3",children:[G.jsx(cUe,{children:"useLocalScreenTrack"}),G.jsx(fi,{onClick:()=>t(c=>!c),type:"primary",children:e?"stop share screen":"start share screen"}),e&&n&&G.jsx(Fg,{disabled:!e,play:e,style:{width:"600px",height:"400px"},track:n})]})})},{Title:uUe,Paragraph:dUe}=$i,hUe=()=>{const e=Qme();return ai({appid:tt.appId,channel:tt.channel,token:tt.token},!0),G.jsx(Fr,{children:G.jsxs("div",{className:"h-screen p-3",children:[G.jsx(uUe,{children:"useNetworkQuality"}),G.jsx(dUe,{children:`result: ${JSON.stringify(e)}`})]})})},fUe=()=>{const[e,t]=v.useState(!1),n=Xy()||0,r=v.useMemo(()=>Gs(n),[n]),i=v.useMemo(()=>xc(),[]),{isConnected:o}=ai({appid:tt.appId,channel:tt.channel,token:tt.token},e),[a,s]=v.useState(!1),[c,l]=v.useState(!1),{localMicrophoneTrack:u}=_p(a),{localCameraTrack:d}=Sp(c);xu([u,d]);const h=Xs(),f=h.filter(_=>_.hasAudio||_.hasVideo),{videoTracks:g}=Cp(h),{audioTracks:p}=yp(h);p.map(_=>_.play());const m=()=>G.jsx(G.Fragment,{children:g.map(_=>G.jsxs(os.Item,{children:[G.jsx(Qg,{cover:xc(),track:_},_.getUserId()),G.jsx(gl,{children:`Layout1 ${Gs(_.getUserId())}{${_.getUserId()}}`})]},_.getUserId()))});return G.jsxs(Fr,{children:[G.jsxs(G.Fragment,{children:[G.jsx(LD,{published:f.length+(a||c?1:0),total:h.length+1}),G.jsxs(os,{children:[o&&G.jsx(os.Item,{children:G.jsx(DD,{audioTrack:u,cameraOn:c,cover:i,micOn:a,videoTrack:d,children:G.jsx(gl,{children:`${r}{${n}}`})})}),m?m():void 0]})]}),G.jsx(Mo,{calling:e,cameraOn:c,micOn:a,setCalling:()=>t(_=>!_),setCamera:()=>{l(_=>!_)},setMic:()=>{s(_=>!_)}})]})},pUe=()=>{const[e,t]=v.useState(!1),n=ps(),r=Xy()||0,i=v.useMemo(()=>Gs(r),[r]),o=v.useMemo(()=>xc(),[]);ai({appid:tt.appId,channel:tt.channel,token:tt.token},e);const[a,s]=v.useState(!1),[c,l]=v.useState(!1),{localMicrophoneTrack:u}=_p(a),{localCameraTrack:d}=Sp(c);xu([u,d]);const h=Xs(),f=h.filter(g=>g.hasAudio||g.hasVideo);return G.jsxs(Fr,{children:[G.jsxs(G.Fragment,{children:[G.jsx(LD,{published:f.length+(a||c?1:0),total:h.length+1}),G.jsxs(os,{children:[n&&G.jsx(os.Item,{children:G.jsx(DD,{audioTrack:u,cameraOn:c,cover:o,micOn:a,videoTrack:d,children:G.jsx(gl,{children:`${i}{${r}}`})})}),h.map(g=>G.jsxs(os.Item,{children:[G.jsx(BN,{cover:xc(),user:g}),G.jsx(gl,{children:`${Gs(g.uid)}{${g.uid}}`})]},g.uid))]})]}),G.jsx(Mo,{calling:e,cameraOn:c,micOn:a,setCalling:()=>t(g=>!g),setCamera:()=>{l(g=>!g)},setMic:()=>{s(g=>!g)}})]})},dQ=[{label:"useJoin",component:sUe},{label:"usePublish",component:fUe},{label:"useRemoteUsers",component:pUe},{label:"useConnectionState",component:Z4e},{label:"useIsConnected",component:oUe},{label:"useCurrentUID",component:nUe},{label:"useAutoPlayAudioTrack",component:G4e},{label:"useAutoPlayVideoTrack",component:q4e},{label:"useNetworkQuality",component:hUe},{label:"useLocalScreenTrack",component:lUe},{label:"UseClientEvent",component:X4e}],k8=()=>{const[e,t]=v.useState(tt.channel),n=c=>{t(c.target.value)},[r,i]=GPe.useNotification(),o=c=>{r[c]({message:"Configuration Saved",description:"Go to other pages and try it now!"})},a=()=>{tt.channel=e,o("success")},s={wrapperCol:{span:14,offset:4}};return G.jsxs(Fr,{children:[i,G.jsx("div",{className:"p-4",children:G.jsx(uV.Item,{label:"Channel Name",children:G.jsx($xe,{onChange:n,style:{width:"200px"},value:e})})}),G.jsx(uV.Item,{...s,children:G.jsx(fi,{onClick:a,type:"primary",children:"Save configuration"})})]})},{Content:mUe,Sider:gUe}=ax,Yi=["Basic","Hooks","Components","Advanced","Setting"],vUe=[{label:Yi[0],key:Yi[0],children:lQ.map(e=>({key:`/${Yi[0]}/${e.label}`,label:e.label}))},{label:Yi[1],key:Yi[1],children:dQ.map(e=>({key:`/${Yi[1]}/${e.label}`,label:e.label}))},{label:Yi[2],key:Yi[2],children:uQ.map(e=>({key:`/${Yi[2]}/${e.label}`,label:e.label}))},{label:Yi[3],key:Yi[3],children:cQ.map(e=>({key:`/${Yi[3]}/${e.label}`,label:e.label}))},{label:"settings",key:"/setting"}];function EUe(){const[e,t]=v.useState(!1),[n,r]=v.useState([window.location.hash.slice(1).split("/")[1]]),i=a=>{const s=a.find(c=>n.indexOf(c)===-1);s&&Yi.indexOf(s)===-1?r(a):r(s?[s]:[])},o=Lve();return G.jsx(G.Fragment,{children:G.jsxs(ax,{children:[G.jsx(gUe,{collapsed:e,collapsible:!0,onCollapse:a=>t(a),style:{overflow:"auto",height:"100vh",position:"fixed",left:0,top:0,bottom:0},children:G.jsx(fOe,{items:vUe,mode:"inline",onClick:a=>{o(a.key)},onOpenChange:i,openKeys:n,selectedKeys:[window.location.hash.slice(1)],theme:"dark"})}),G.jsx(ax,{style:{marginLeft:e?80:200},children:G.jsxs(mUe,{children:[G.jsxs(Xve,{children:[G.jsx(Xu,{Component:()=>G.jsx(k8,{}),path:"/*"}),G.jsx(Xu,{Component:()=>G.jsx(k8,{}),path:"/setting"}),lQ.map(({label:a,component:s})=>{const c=s;return G.jsx(Xu,{Component:()=>G.jsx(FE,{children:G.jsx(c,{})}),path:`/${Yi[0]}/${a}`},a)}),dQ.map(({label:a,component:s})=>{const c=s;return G.jsx(Xu,{Component:()=>G.jsx(FE,{children:G.jsx(c,{})}),path:`/${Yi[1]}/${a}`},a)}),uQ.map(({label:a,component:s})=>{const c=s;return G.jsx(Xu,{Component:()=>G.jsx(FE,{children:G.jsx(c,{})}),path:`/${Yi[2]}/${a}`},a)}),cQ.map(({label:a,component:s})=>{const c=s;return G.jsx(Xu,{Component:()=>G.jsx(FE,{children:G.jsx(c,{})}),path:`/${Yi[3]}/${a}`},a)})]}),G.jsx("a",{"aria-label":"View source on GitHub",className:"github-corner",href:"https://github.com/AgoraIO-Extensions/agora-rtc-react",rel:"noreferrer",target:"_blank",children:G.jsxs("svg",{"aria-hidden":"true",className:"github-corner-svg",height:"80",viewBox:"0 0 250 250",width:"80",children:[G.jsx("path",{d:"M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"}),G.jsx("path",{className:"github-corner-svg-arm",d:"M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2",fill:"currentColor"}),G.jsx("path",{className:"github-corner-svg-body",d:"M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z",fill:"currentColor"})]})})]})})]})})}mn.setLogLevel(0);pA.createRoot(document.getElementById("root")).render(G.jsx(v.StrictMode,{children:G.jsx(Zve,{children:G.jsx(EUe,{})})}));
