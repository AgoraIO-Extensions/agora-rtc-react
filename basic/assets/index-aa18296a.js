var kJ=Object.defineProperty;var MJ=(e,t,i)=>t in e?kJ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var wb=(e,t,i)=>(MJ(e,typeof t!="symbol"?t+"":t,i),i);function _$(e,t){for(var i=0;i<t.length;i++){const a=t[i];if(typeof a!="string"&&!Array.isArray(a)){for(const c in a)if(c!=="default"&&!(c in e)){const u=Object.getOwnPropertyDescriptor(a,c);u&&Object.defineProperty(e,c,u.get?u:{enumerable:!0,get:()=>a[c]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))a(c);new MutationObserver(c=>{for(const u of c)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&a(f)}).observe(document,{childList:!0,subtree:!0});function i(c){const u={};return c.integrity&&(u.integrity=c.integrity),c.referrerPolicy&&(u.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?u.credentials="include":c.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function a(c){if(c.ep)return;c.ep=!0;const u=i(c);fetch(c.href,u)}})();var Xt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function jh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function UJ(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var i=function a(){if(this instanceof a){var c=[null];c.push.apply(c,arguments);var u=Function.bind.apply(t,c);return new u}return t.apply(this,arguments)};i.prototype=t.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(e).forEach(function(a){var c=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(i,a,c.get?c:{enumerable:!0,get:function(){return e[a]}})}),i}var S$={exports:{}},V1={},y$={exports:{}},qn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IS=Symbol.for("react.element"),FJ=Symbol.for("react.portal"),VJ=Symbol.for("react.fragment"),jJ=Symbol.for("react.strict_mode"),BJ=Symbol.for("react.profiler"),$J=Symbol.for("react.provider"),HJ=Symbol.for("react.context"),WJ=Symbol.for("react.forward_ref"),GJ=Symbol.for("react.suspense"),zJ=Symbol.for("react.memo"),KJ=Symbol.for("react.lazy"),Jj=Symbol.iterator;function qJ(e){return e===null||typeof e!="object"?null:(e=Jj&&e[Jj]||e["@@iterator"],typeof e=="function"?e:null)}var C$={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T$=Object.assign,b$={};function gg(e,t,i){this.props=e,this.context=t,this.refs=b$,this.updater=i||C$}gg.prototype.isReactComponent={};gg.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};gg.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function R$(){}R$.prototype=gg.prototype;function bk(e,t,i){this.props=e,this.context=t,this.refs=b$,this.updater=i||C$}var Rk=bk.prototype=new R$;Rk.constructor=bk;T$(Rk,gg.prototype);Rk.isPureReactComponent=!0;var Qj=Array.isArray,I$=Object.prototype.hasOwnProperty,Ik={current:null},w$={key:!0,ref:!0,__self:!0,__source:!0};function O$(e,t,i){var a,c={},u=null,f=null;if(t!=null)for(a in t.ref!==void 0&&(f=t.ref),t.key!==void 0&&(u=""+t.key),t)I$.call(t,a)&&!w$.hasOwnProperty(a)&&(c[a]=t[a]);var m=arguments.length-2;if(m===1)c.children=i;else if(1<m){for(var g=Array(m),E=0;E<m;E++)g[E]=arguments[E+2];c.children=g}if(e&&e.defaultProps)for(a in m=e.defaultProps,m)c[a]===void 0&&(c[a]=m[a]);return{$$typeof:IS,type:e,key:u,ref:f,props:c,_owner:Ik.current}}function YJ(e,t){return{$$typeof:IS,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function wk(e){return typeof e=="object"&&e!==null&&e.$$typeof===IS}function XJ(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(i){return t[i]})}var Zj=/\/+/g;function Rx(e,t){return typeof e=="object"&&e!==null&&e.key!=null?XJ(""+e.key):t.toString(36)}function mR(e,t,i,a,c){var u=typeof e;(u==="undefined"||u==="boolean")&&(e=null);var f=!1;if(e===null)f=!0;else switch(u){case"string":case"number":f=!0;break;case"object":switch(e.$$typeof){case IS:case FJ:f=!0}}if(f)return f=e,c=c(f),e=a===""?"."+Rx(f,0):a,Qj(c)?(i="",e!=null&&(i=e.replace(Zj,"$&/")+"/"),mR(c,t,i,"",function(E){return E})):c!=null&&(wk(c)&&(c=YJ(c,i+(!c.key||f&&f.key===c.key?"":(""+c.key).replace(Zj,"$&/")+"/")+e)),t.push(c)),1;if(f=0,a=a===""?".":a+":",Qj(e))for(var m=0;m<e.length;m++){u=e[m];var g=a+Rx(u,m);f+=mR(u,t,i,g,c)}else if(g=qJ(e),typeof g=="function")for(e=g.call(e),m=0;!(u=e.next()).done;)u=u.value,g=a+Rx(u,m++),f+=mR(u,t,i,g,c);else if(u==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return f}function Ob(e,t,i){if(e==null)return e;var a=[],c=0;return mR(e,a,"","",function(u){return t.call(i,u,c++)}),a}function JJ(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(i){(e._status===0||e._status===-1)&&(e._status=1,e._result=i)},function(i){(e._status===0||e._status===-1)&&(e._status=2,e._result=i)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Fa={current:null},gR={transition:null},QJ={ReactCurrentDispatcher:Fa,ReactCurrentBatchConfig:gR,ReactCurrentOwner:Ik};qn.Children={map:Ob,forEach:function(e,t,i){Ob(e,function(){t.apply(this,arguments)},i)},count:function(e){var t=0;return Ob(e,function(){t++}),t},toArray:function(e){return Ob(e,function(t){return t})||[]},only:function(e){if(!wk(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};qn.Component=gg;qn.Fragment=VJ;qn.Profiler=BJ;qn.PureComponent=bk;qn.StrictMode=jJ;qn.Suspense=GJ;qn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=QJ;qn.cloneElement=function(e,t,i){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=T$({},e.props),c=e.key,u=e.ref,f=e._owner;if(t!=null){if(t.ref!==void 0&&(u=t.ref,f=Ik.current),t.key!==void 0&&(c=""+t.key),e.type&&e.type.defaultProps)var m=e.type.defaultProps;for(g in t)I$.call(t,g)&&!w$.hasOwnProperty(g)&&(a[g]=t[g]===void 0&&m!==void 0?m[g]:t[g])}var g=arguments.length-2;if(g===1)a.children=i;else if(1<g){m=Array(g);for(var E=0;E<g;E++)m[E]=arguments[E+2];a.children=m}return{$$typeof:IS,type:e.type,key:c,ref:u,props:a,_owner:f}};qn.createContext=function(e){return e={$$typeof:HJ,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:$J,_context:e},e.Consumer=e};qn.createElement=O$;qn.createFactory=function(e){var t=O$.bind(null,e);return t.type=e,t};qn.createRef=function(){return{current:null}};qn.forwardRef=function(e){return{$$typeof:WJ,render:e}};qn.isValidElement=wk;qn.lazy=function(e){return{$$typeof:KJ,_payload:{_status:-1,_result:e},_init:JJ}};qn.memo=function(e,t){return{$$typeof:zJ,type:e,compare:t===void 0?null:t}};qn.startTransition=function(e){var t=gR.transition;gR.transition={};try{e()}finally{gR.transition=t}};qn.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};qn.useCallback=function(e,t){return Fa.current.useCallback(e,t)};qn.useContext=function(e){return Fa.current.useContext(e)};qn.useDebugValue=function(){};qn.useDeferredValue=function(e){return Fa.current.useDeferredValue(e)};qn.useEffect=function(e,t){return Fa.current.useEffect(e,t)};qn.useId=function(){return Fa.current.useId()};qn.useImperativeHandle=function(e,t,i){return Fa.current.useImperativeHandle(e,t,i)};qn.useInsertionEffect=function(e,t){return Fa.current.useInsertionEffect(e,t)};qn.useLayoutEffect=function(e,t){return Fa.current.useLayoutEffect(e,t)};qn.useMemo=function(e,t){return Fa.current.useMemo(e,t)};qn.useReducer=function(e,t,i){return Fa.current.useReducer(e,t,i)};qn.useRef=function(e){return Fa.current.useRef(e)};qn.useState=function(e){return Fa.current.useState(e)};qn.useSyncExternalStore=function(e,t,i){return Fa.current.useSyncExternalStore(e,t,i)};qn.useTransition=function(){return Fa.current.useTransition()};qn.version="18.2.0";y$.exports=qn;var C=y$.exports;const Nt=jh(C),rg=_$({__proto__:null,default:Nt},[C]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZJ=C,eQ=Symbol.for("react.element"),tQ=Symbol.for("react.fragment"),nQ=Object.prototype.hasOwnProperty,rQ=ZJ.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,iQ={key:!0,ref:!0,__self:!0,__source:!0};function A$(e,t,i){var a,c={},u=null,f=null;i!==void 0&&(u=""+i),t.key!==void 0&&(u=""+t.key),t.ref!==void 0&&(f=t.ref);for(a in t)nQ.call(t,a)&&!iQ.hasOwnProperty(a)&&(c[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps,t)c[a]===void 0&&(c[a]=t[a]);return{$$typeof:eQ,type:e,key:u,ref:f,props:c,_owner:rQ.current}}V1.Fragment=tQ;V1.jsx=A$;V1.jsxs=A$;S$.exports=V1;var le=S$.exports;var N$={exports:{}};(function(e,t){(function(i,a){e.exports=a()})(Xt,function(){function i(n,r){return r.forEach(function(o){o&&typeof o!="string"&&!Array.isArray(o)&&Object.keys(o).forEach(function(s){if(s!=="default"&&!(s in n)){var l=Object.getOwnPropertyDescriptor(o,s);Object.defineProperty(n,s,l.get?l:{enumerable:!0,get:function(){return o[s]}})}})}),Object.freeze(n)}var a=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof Xt<"u"?Xt:typeof self<"u"?self:{},c=function(n){try{return!!n()}catch{return!0}},u=!c(function(){var n=(function(){}).bind();return typeof n!="function"||n.hasOwnProperty("prototype")}),f=u,m=Function.prototype,g=m.bind,E=m.call,y=f&&g.bind(E,E),T=f?function(n){return n&&y(n)}:function(n){return n&&function(){return E.apply(n,arguments)}},R=T({}.isPrototypeOf),P=function(n){return n&&n.Math==Math&&n},O=P(typeof globalThis=="object"&&globalThis)||P(typeof window=="object"&&window)||P(typeof self=="object"&&self)||P(typeof a=="object"&&a)||function(){return this}()||Function("return this")(),N=u,M=Function.prototype,D=M.apply,x=M.call,k=typeof Reflect=="object"&&Reflect.apply||(N?x.bind(D):function(){return x.apply(D,arguments)}),V=function(n){return typeof n=="function"},H={},$=!c(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7}),G=u,K=Function.prototype.call,Q=G?K.bind(K):function(){return K.apply(K,arguments)},z={},ie={}.propertyIsEnumerable,J=Object.getOwnPropertyDescriptor,Y=J&&!ie.call({1:2},1);z.f=Y?function(n){var r=J(this,n);return!!r&&r.enumerable}:ie;var oe,ue,he=function(n,r){return{enumerable:!(1&n),configurable:!(2&n),writable:!(4&n),value:r}},Se=T,ve=Se({}.toString),Re=Se("".slice),Ce=function(n){return Re(ve(n),8,-1)},pe=T,fe=c,_e=Ce,ge=O.Object,Ue=pe("".split),Fe=fe(function(){return!ge("z").propertyIsEnumerable(0)})?function(n){return _e(n)=="String"?Ue(n,""):ge(n)}:ge,ot=O.TypeError,qe=function(n){if(n==null)throw ot("Can't call method on "+n);return n},wt=Fe,kt=qe,_t=function(n){return wt(kt(n))},vt=V,At=function(n){return typeof n=="object"?n!==null:vt(n)},it={},Mt=it,rn=O,Ft=V,ft=function(n){return Ft(n)?n:void 0},dt=function(n,r){return arguments.length<2?ft(Mt[n])||ft(rn[n]):Mt[n]&&Mt[n][r]||rn[n]&&rn[n][r]},at=dt("navigator","userAgent")||"",ht=O,Ot=at,Vt=ht.process,zt=ht.Deno,Kt=Vt&&Vt.versions||zt&&zt.version,mn=Kt&&Kt.v8;mn&&(ue=(oe=mn.split("."))[0]>0&&oe[0]<4?1:+(oe[0]+oe[1])),!ue&&Ot&&(!(oe=Ot.match(/Edge\/(\d+)/))||oe[1]>=74)&&(oe=Ot.match(/Chrome\/(\d+)/))&&(ue=+oe[1]);var Hn=ue,Zr=Hn,yr=c,or=!!Object.getOwnPropertySymbols&&!yr(function(){var n=Symbol();return!String(n)||!(Object(n)instanceof Symbol)||!Symbol.sham&&Zr&&Zr<41}),Ln=or&&!Symbol.sham&&typeof Symbol.iterator=="symbol",Gr=dt,Wn=V,hn=R,fn=Ln,Ro=O.Object,zi=fn?function(n){return typeof n=="symbol"}:function(n){var r=Gr("Symbol");return Wn(r)&&hn(r.prototype,Ro(n))},ei=O.String,Gn=function(n){try{return ei(n)}catch{return"Object"}},Qe=V,Tt=Gn,Un=O.TypeError,an=function(n){if(Qe(n))return n;throw Un(Tt(n)+" is not a function")},Ki=an,hi=function(n,r){var o=n[r];return o==null?void 0:Ki(o)},Cr=Q,jt=V,_n=At,Pn=O.TypeError,zr={exports:{}},Ei=O,ti=Object.defineProperty,Kr=function(n,r){try{ti(Ei,n,{value:r,configurable:!0,writable:!0})}catch{Ei[n]=r}return r},uo="__core-js_shared__",Io=O[uo]||Kr(uo,{}),Uo=Io;(zr.exports=function(n,r){return Uo[n]||(Uo[n]=r!==void 0?r:{})})("versions",[]).push({version:"3.20.3",mode:"pure",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.20.3/LICENSE",source:"https://github.com/zloirock/core-js"});var Fo=qe,Fc=O.Object,Ii=function(n){return Fc(Fo(n))},Vc=Ii,Pl=T({}.hasOwnProperty),pr=Object.hasOwn||function(n,r){return Pl(Vc(n),r)},Dl=T,ho=0,Ll=Math.random(),kl=Dl(1 .toString),wa=function(n){return"Symbol("+(n===void 0?"":n)+")_"+kl(++ho+Ll,36)},jc=O,oa=zr.exports,aa=pr,Cs=wa,Ml=or,Ba=Ln,Di=oa("wks"),_i=jc.Symbol,sa=_i&&_i.for,nc=Ba?_i:_i&&_i.withoutSetter||Cs,Ar=function(n){if(!aa(Di,n)||!Ml&&typeof Di[n]!="string"){var r="Symbol."+n;Ml&&aa(_i,n)?Di[n]=_i[n]:Di[n]=Ba&&sa?sa(r):nc(r)}return Di[n]},Bc=Q,Ul=At,rc=zi,Fl=hi,Vl=function(n,r){var o,s;if(r==="string"&&jt(o=n.toString)&&!_n(s=Cr(o,n))||jt(o=n.valueOf)&&!_n(s=Cr(o,n))||r!=="string"&&jt(o=n.toString)&&!_n(s=Cr(o,n)))return s;throw Pn("Can't convert object to primitive value")},jl=Ar,Qn=O.TypeError,zn=jl("toPrimitive"),Zn=function(n,r){if(!Ul(n)||rc(n))return n;var o,s=Fl(n,zn);if(s){if(r===void 0&&(r="default"),o=Bc(s,n,r),!Ul(o)||rc(o))return o;throw Qn("Can't convert object to primitive value")}return r===void 0&&(r="number"),Vl(n,r)},ni=zi,ri=function(n){var r=Zn(n,"string");return ni(r)?r:r+""},Vo=At,fo=O.document,$a=Vo(fo)&&Vo(fo.createElement),Ts=function(n){return $a?fo.createElement(n):{}},Gh=Ts,Li=!$&&!c(function(){return Object.defineProperty(Gh("div"),"a",{get:function(){return 7}}).a!=7}),$c=$,Bl=Q,jo=z,ic=he,Hc=_t,Ru=ri,gd=pr,vd=Li,Iu=Object.getOwnPropertyDescriptor;H.f=$c?Iu:function(n,r){if(n=Hc(n),r=Ru(r),vd)try{return Iu(n,r)}catch{}if(gd(n,r))return ic(!Bl(jo.f,n,r),n[r])};var Ed=c,Ut=V,pn=/#|\.prototype\./,ar=function(n,r){var o=Mr[ii(n)];return o==_d||o!=wp&&(Ut(r)?Ed(r):!!r)},ii=ar.normalize=function(n){return String(n).replace(pn,".").toLowerCase()},Mr=ar.data={},wp=ar.NATIVE="N",_d=ar.POLYFILL="P",Sd=ar,yd=an,Cd=u,HI=T(T.bind),zh=function(n,r){return yd(n),r===void 0?n:Cd?HI(n,r):function(){return n.apply(r,arguments)}},bs={},YS=$&&c(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42}),Nr=O,xr=At,WI=Nr.String,GI=Nr.TypeError,Rs=function(n){if(xr(n))return n;throw GI(WI(n)+" is not an object")},zI=$,KI=Li,qI=YS,Kh=Rs,XS=ri,po=O.TypeError,qh=Object.defineProperty,wu=Object.getOwnPropertyDescriptor,JS="enumerable",Vg="configurable",Ha="writable";bs.f=zI?qI?function(n,r,o){if(Kh(n),r=XS(r),Kh(o),typeof n=="function"&&r==="prototype"&&"value"in o&&Ha in o&&!o.writable){var s=wu(n,r);s&&s.writable&&(n[r]=o.value,o={configurable:Vg in o?o.configurable:s.configurable,enumerable:JS in o?o.enumerable:s.enumerable,writable:!1})}return qh(n,r,o)}:qh:function(n,r,o){if(Kh(n),r=XS(r),Kh(o),KI)try{return qh(n,r,o)}catch{}if("get"in o||"set"in o)throw po("Accessors not supported");return"value"in o&&(n[r]=o.value),n};var QS=bs,ZS=he,$l=$?function(n,r,o){return QS.f(n,r,ZS(1,o))}:function(n,r,o){return n[r]=o,n},Yh=O,ey=k,ty=T,Oa=V,YI=H.f,Wa=Sd,Td=it,ny=zh,Aa=$l,Xh=pr,jg=function(n){var r=function(o,s,l){if(this instanceof r){switch(arguments.length){case 0:return new n;case 1:return new n(o);case 2:return new n(o,s)}return new n(o,s,l)}return ey(n,this,arguments)};return r.prototype=n.prototype,r},Rn=function(n,r){var o,s,l,d,p,_,S,I,b=n.target,A=n.global,F=n.stat,W=n.proto,Z=A?Yh:F?Yh[b]:(Yh[b]||{}).prototype,ee=A?Td:Td[b]||Aa(Td,b,{})[b],te=ee.prototype;for(l in r)o=!Wa(A?l:b+(F?".":"#")+l,n.forced)&&Z&&Xh(Z,l),p=ee[l],o&&(_=n.noTargetGet?(I=YI(Z,l))&&I.value:Z[l]),d=o&&_?_:r[l],o&&typeof p==typeof d||(S=n.bind&&o?ny(d,Yh):n.wrap&&o?jg(d):W&&Oa(d)?ty(d):d,(n.sham||d&&d.sham||p&&p.sham)&&Aa(S,"sham",!0),Aa(ee,l,S),W&&(Xh(Td,s=b+"Prototype")||Aa(Td,s,{}),Aa(Td[s],l,d),n.real&&te&&!te[l]&&Aa(te,l,d)))},Hl=Math.ceil,Bg=Math.floor,$g=function(n){var r=+n;return r!=r||r===0?0:(r>0?Bg:Hl)(r)},Hg=$g,XI=Math.min,JI=function(n){return n>0?XI(Hg(n),9007199254740991):0},Wl=function(n){return JI(n.length)},ry=an,Op=Ii,bd=Fe,QI=Wl,iy=O.TypeError,Wg=function(n){return function(r,o,s,l){ry(o);var d=Op(r),p=bd(d),_=QI(d),S=n?_-1:0,I=n?-1:1;if(s<2)for(;;){if(S in p){l=p[S],S+=I;break}if(S+=I,n?S<0:_<=S)throw iy("Reduce of empty array with no initial value")}for(;n?S>=0:_>S;S+=I)S in p&&(l=o(l,p[S],S,d));return l}},Gg={left:Wg(!1),right:Wg(!0)},zg=c,Ap=function(n,r){var o=[][n];return!!o&&zg(function(){o.call(null,r||function(){throw 1},1)})},Np=Ce(O.process)=="process",Kg=Gg.left,xp=Hn,ZI=Np;Rn({target:"Array",proto:!0,forced:!Ap("reduce")||!ZI&&xp>79&&xp<83},{reduce:function(n){var r=arguments.length;return Kg(this,n,r,r>1?arguments[1]:void 0)}});var oy=it,wi=function(n){return oy[n+"Prototype"]},qg=wi("Array").reduce,Jh=R,ay=qg,Pp=Array.prototype,sy=function(n){var r=n.reduce;return n===Pp||Jh(Pp,n)&&r===Pp.reduce?ay:r},Gl=sy;let cy=!0,ly=!0;function Dp(n,r,o){const s=n.match(r);return s&&s.length>=o&&parseInt(s[o],10)}function Ga(n,r,o){if(!n.RTCPeerConnection)return;const s=n.RTCPeerConnection.prototype,l=s.addEventListener;s.addEventListener=function(p,_){if(p!==r)return l.apply(this,arguments);const S=I=>{const b=o(I);b&&(_.handleEvent?_.handleEvent(b):_(b))};return this._eventMap=this._eventMap||{},this._eventMap[r]||(this._eventMap[r]=new Map),this._eventMap[r].set(_,S),l.apply(this,[p,S])};const d=s.removeEventListener;s.removeEventListener=function(p,_){if(p!==r||!this._eventMap||!this._eventMap[r])return d.apply(this,arguments);if(!this._eventMap[r].has(_))return d.apply(this,arguments);const S=this._eventMap[r].get(_);return this._eventMap[r].delete(_),this._eventMap[r].size===0&&delete this._eventMap[r],Object.keys(this._eventMap).length===0&&delete this._eventMap,d.apply(this,[p,S])},Object.defineProperty(s,"on"+r,{get(){return this["_on"+r]},set(p){this["_on"+r]&&(this.removeEventListener(r,this["_on"+r]),delete this["_on"+r]),p&&this.addEventListener(r,this["_on"+r]=p)},enumerable:!0,configurable:!0})}function ew(n){return typeof n!="boolean"?new Error("Argument type: "+typeof n+". Please use a boolean."):(cy=n,n?"adapter.js logging disabled":"adapter.js logging enabled")}function tw(n){return typeof n!="boolean"?new Error("Argument type: "+typeof n+". Please use a boolean."):(ly=!n,"adapter.js deprecation warnings "+(n?"disabled":"enabled"))}function Lp(){if(typeof window=="object"){if(cy)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function kp(n,r){ly&&console.warn(n+" is deprecated, please use "+r+" instead.")}function zl(n){const r={browser:null,version:null};if(n===void 0||!n.navigator)return r.browser="Not a browser.",r;const{navigator:o}=n;if(o.mozGetUserMedia)r.browser="firefox",r.version=Dp(o.userAgent,/Firefox\/(\d+)\./,1);else if(o.webkitGetUserMedia||n.isSecureContext===!1&&n.webkitRTCPeerConnection)r.browser="chrome",r.version=Dp(o.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else{if(!n.RTCPeerConnection||!o.userAgent.match(/AppleWebKit\/(\d+)\./))return r.browser="Not a supported browser.",r;r.browser="safari",r.version=Dp(o.userAgent,/AppleWebKit\/(\d+)\./,1),r.supportsUnifiedPlan=n.RTCRtpTransceiver&&"currentDirection"in n.RTCRtpTransceiver.prototype}return r}function Qh(n){return Object.prototype.toString.call(n)==="[object Object]"}function uy(n){var r;return Qh(n)?Gl(r=Object.keys(n)).call(r,function(o,s){const l=Qh(n[s]),d=l?uy(n[s]):n[s],p=l&&!Object.keys(d).length;return d===void 0||p?o:Object.assign(o,{[s]:d})},{}):n}function dy(n,r,o){const s=o?"outbound-rtp":"inbound-rtp",l=new Map;if(r===null)return l;const d=[];return n.forEach(p=>{p.type==="track"&&p.trackIdentifier===r.id&&d.push(p)}),d.forEach(p=>{n.forEach(_=>{_.type===s&&_.trackId===p.id&&function S(I,b,A){b&&!A.has(b.id)&&(A.set(b.id,b),Object.keys(b).forEach(F=>{F.endsWith("Id")?S(I,I.get(b[F]),A):F.endsWith("Ids")&&b[F].forEach(W=>{S(I,I.get(W),A)})}))}(n,_,l)})}),l}var nw=zr.exports,Rd=wa,za=nw("keys"),Zh=function(n){return za[n]||(za[n]=Rd(n))},rw=!c(function(){function n(){}return n.prototype.constructor=null,Object.getPrototypeOf(new n)!==n.prototype}),iw=O,ow=pr,aw=V,sw=Ii,Id=rw,be=Zh("IE_PROTO"),Be=iw.Object,Me=Be.prototype,St=Id?Be.getPrototypeOf:function(n){var r=sw(n);if(ow(r,be))return r[be];var o=r.constructor;return aw(o)&&r instanceof o?o.prototype:r instanceof Be?Me:null},cn=O,er=V,ki=cn.String,Tr=cn.TypeError,Yg=T,cw=Rs,Ka=function(n){if(typeof n=="object"||er(n))return n;throw Tr("Can't set "+ki(n)+" as a prototype")},Mp=Object.setPrototypeOf||("__proto__"in{}?function(){var n,r=!1,o={};try{(n=Yg(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(o,[]),r=o instanceof Array}catch{}return function(s,l){return cw(s),Ka(l),r?n(s,l):s.__proto__=l,s}}():void 0),Up={},wd=$g,Fp=Math.max,Vp=Math.min,tr=function(n,r){var o=wd(n);return o<0?Fp(o+r,0):Vp(o,r)},lw=_t,hy=tr,jp=Wl,fy=function(n){return function(r,o,s){var l,d=lw(r),p=jp(d),_=hy(s,p);if(n&&o!=o){for(;p>_;)if((l=d[_++])!=l)return!0}else for(;p>_;_++)if((n||_ in d)&&d[_]===o)return n||_||0;return!n&&-1}},uw={includes:fy(!0),indexOf:fy(!1)},Bp={},Od=pr,Kl=_t,$p=uw.indexOf,py=Bp,ef=T([].push),Xg=function(n,r){var o,s=Kl(n),l=0,d=[];for(o in s)!Od(py,o)&&Od(s,o)&&ef(d,o);for(;r.length>l;)Od(s,o=r[l++])&&(~$p(d,o)||ef(d,o));return d},Hp=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Wp=Xg,my=Hp.concat("length","prototype");Up.f=Object.getOwnPropertyNames||function(n){return Wp(n,my)};var Ou={};Ou.f=Object.getOwnPropertySymbols;var Au=dt,Gp=Up,dw=Ou,hw=Rs,fw=T([].concat),zp=Au("Reflect","ownKeys")||function(n){var r=Gp.f(hw(n)),o=dw.f;return o?fw(r,o(n)):r},tf=pr,Jg=zp,pw=H,gy=bs,Qg={},mw=Xg,Mi=Hp,qi=Object.keys||function(n){return mw(n,Mi)},gw=$,vw=YS,vy=bs,Ew=Rs,Zg=_t,nf=qi;Qg.f=gw&&!vw?Object.defineProperties:function(n,r){Ew(n);for(var o,s=Zg(r),l=nf(r),d=l.length,p=0;d>p;)vy.f(n,o=l[p++],s[o]);return n};var Ad,Nu=dt("document","documentElement"),rf=Rs,of=Qg,af=Hp,Nd=Bp,_w=Nu,Sw=Ts,Ey=Zh("IE_PROTO"),ev=function(){},_y=function(n){return"<script>"+n+"<\/script>"},sf=function(n){n.write(_y("")),n.close();var r=n.parentWindow.Object;return n=null,r},ql=function(){try{Ad=new ActiveXObject("htmlfile")}catch{}var n,r;ql=typeof document<"u"?document.domain&&Ad?sf(Ad):((r=Sw("iframe")).style.display="none",_w.appendChild(r),r.src="javascript:",(n=r.contentWindow.document).open(),n.write(_y("document.F=Object")),n.close(),n.F):sf(Ad);for(var o=af.length;o--;)delete ql.prototype[af[o]];return ql()};Nd[Ey]=!0;var cf=Object.create||function(n,r){var o;return n!==null?(ev.prototype=rf(n),o=new ev,ev.prototype=null,o[Ey]=n):o=ql(),r===void 0?o:of.f(o,r)},ae=T("".replace),xd=String(Error("zxcasd").stack),lf=/\n\s*at [^:]*:[^\n]*/,qa=lf.test(xd),kn=At,yw=$l,Pd={},Cw=Pd,xu=Ar("iterator"),Tw=Array.prototype,Sy={};Sy[Ar("toStringTag")]="z";var tv=String(Sy)==="[object z]",bw=O,Rw=tv,Wc=V,Kp=Ce,Iw=Ar("toStringTag"),ww=bw.Object,Ow=Kp(function(){return arguments}())=="Arguments",Yl=Rw?Kp:function(n){var r,o,s;return n===void 0?"Undefined":n===null?"Null":typeof(o=function(l,d){try{return l[d]}catch{}}(r=ww(n),Iw))=="string"?o:Ow?Kp(r):(s=Kp(r))=="Object"&&Wc(r.callee)?"Arguments":s},Gc=Yl,yy=hi,Aw=Pd,Nw=Ar("iterator"),Cy=function(n){if(n!=null)return yy(n,Nw)||yy(n,"@@iterator")||Aw[Gc(n)]},xw=Q,Pu=an,Pw=Rs,Dw=Gn,Is=Cy,Lw=O.TypeError,kw=Q,Ty=Rs,Mw=hi,Uw=zh,by=Q,Ry=Rs,Fw=Gn,Vw=function(n){return n!==void 0&&(Cw.Array===n||Tw[xu]===n)},nv=Wl,Dd=R,qp=function(n,r){var o=arguments.length<2?Is(n):r;if(Pu(o))return Pw(xw(o,n));throw Lw(Dw(n)+" is not iterable")},jw=Cy,rv=function(n,r,o){var s,l;Ty(n);try{if(!(s=Mw(n,"return"))){if(r==="throw")throw o;return o}s=kw(s,n)}catch(d){l=!0,s=d}if(r==="throw")throw o;if(l)throw s;return Ty(s),o},Bw=O.TypeError,Ya=function(n,r){this.stopped=n,this.result=r},Yp=Ya.prototype,oc=function(n,r,o){var s,l,d,p,_,S,I,b=o&&o.that,A=!(!o||!o.AS_ENTRIES),F=!(!o||!o.IS_ITERATOR),W=!(!o||!o.INTERRUPTED),Z=Uw(r,b),ee=function(Ee){return s&&rv(s,"normal",Ee),new Ya(!0,Ee)},te=function(Ee){return A?(Ry(Ee),W?Z(Ee[0],Ee[1],ee):Z(Ee[0],Ee[1])):W?Z(Ee,ee):Z(Ee)};if(F)s=n;else{if(!(l=jw(n)))throw Bw(Fw(n)+" is not iterable");if(Vw(l)){for(d=0,p=nv(n);p>d;d++)if((_=te(n[d]))&&Dd(Yp,_))return _;return new Ya(!1)}s=qp(n,l)}for(S=s.next;!(I=by(S,s)).done;){try{_=te(I.value)}catch(Ee){rv(s,"throw",Ee)}if(typeof _=="object"&&_&&Dd(Yp,_))return _}return new Ya(!1)},Xa=Yl,$w=O.String,Du=function(n){if(Xa(n)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return $w(n)},Iy=Du,uf=he,Xl=!c(function(){var n=Error("a");return!("stack"in n)||(Object.defineProperty(n,"stack",uf(1,7)),n.stack!==7)}),wy=Rn,Hw=O,Xp=R,Ww=St,df=Mp,mo=function(n,r,o){for(var s=Jg(r),l=gy.f,d=pw.f,p=0;p<s.length;p++){var _=s[p];tf(n,_)||o&&tf(o,_)||l(n,_,d(r,_))}},Jp=cf,hf=$l,Ja=he,iv=function(n,r){if(qa&&typeof n=="string")for(;r--;)n=ae(n,lf,"");return n},Qp=function(n,r){kn(r)&&"cause"in r&&yw(n,"cause",r.cause)},Lu=oc,Oy=function(n,r){return n===void 0?arguments.length<2?"":r:Iy(n)},Bo=Xl,ov=Ar("toStringTag"),Zp=Hw.Error,Gw=[].push,ff=function(n,r){var o,s=arguments.length>2?arguments[2]:void 0,l=Xp(pf,this);df?o=df(new Zp,l?Ww(this):pf):(o=l?this:Jp(pf),hf(o,ov,"Error")),r!==void 0&&hf(o,"message",Oy(r)),Bo&&hf(o,"stack",iv(o.stack,1)),Qp(o,s);var d=[];return Lu(n,Gw,{that:d}),hf(o,"errors",d),o};df?df(ff,Zp):mo(ff,Zp,{name:!0});var pf=ff.prototype=Jp(Zp.prototype,{constructor:Ja(1,ff),message:Ja(1,""),name:Ja(1,"AggregateError")});wy({global:!0},{AggregateError:ff});var zw=V,ku=Io,Ay=T(Function.toString);zw(ku.inspectSource)||(ku.inspectSource=function(n){return Ay(n)});var em,mf,Jl,av=ku.inspectSource,Kw=V,sv=av,cv=O.WeakMap,qw=Kw(cv)&&/native code/.test(sv(cv)),Ny=O,lv=T,xy=At,uv=$l,dv=pr,gf=Io,Py=Zh,Dy=Bp,hv="Object already initialized",Ld=Ny.TypeError,Yw=Ny.WeakMap;if(qw||gf.state){var Ql=gf.state||(gf.state=new Yw),Ly=lv(Ql.get),ky=lv(Ql.has),My=lv(Ql.set);em=function(n,r){if(ky(Ql,n))throw new Ld(hv);return r.facade=n,My(Ql,n,r),r},mf=function(n){return Ly(Ql,n)||{}},Jl=function(n){return ky(Ql,n)}}else{var kd=Py("state");Dy[kd]=!0,em=function(n,r){if(dv(n,kd))throw new Ld(hv);return r.facade=n,uv(n,kd,r),r},mf=function(n){return dv(n,kd)?n[kd]:{}},Jl=function(n){return dv(n,kd)}}var zc,fv,tm,nm={set:em,get:mf,has:Jl,enforce:function(n){return Jl(n)?mf(n):em(n,{})},getterFor:function(n){return function(r){var o;if(!xy(r)||(o=mf(r)).type!==n)throw Ld("Incompatible receiver, "+n+" required");return o}}},vf=$,In=pr,Uy=Function.prototype,Xw=vf&&Object.getOwnPropertyDescriptor,Mu=In(Uy,"name"),pv={EXISTS:Mu,PROPER:Mu&&(function(){}).name==="something",CONFIGURABLE:Mu&&(!vf||vf&&Xw(Uy,"name").configurable)},Jw=$l,rm=function(n,r,o,s){s&&s.enumerable?n[r]=o:Jw(n,r,o)},Qa=c,Qw=V,im=cf,om=St,Fy=rm,am=Ar("iterator"),ca=!1;[].keys&&("next"in(tm=[].keys())?(fv=om(om(tm)))!==Object.prototype&&(zc=fv):ca=!0);var Zl=zc==null||Qa(function(){var n={};return zc[am].call(n)!==n});Qw((zc=Zl?{}:im(zc))[am])||Fy(zc,am,function(){return this});var sm={IteratorPrototype:zc,BUGGY_SAFARI_ITERATORS:ca},Vy=Yl,cm=tv?{}.toString:function(){return"[object "+Vy(this)+"]"},jy=tv,mv=bs.f,By=$l,gv=pr,vv=cm,Kc=Ar("toStringTag"),Ef=function(n,r,o,s){if(n){var l=o?n:n.prototype;gv(l,Kc)||mv(l,Kc,{configurable:!0,value:r}),s&&!jy&&By(l,"toString",vv)}},eu=sm.IteratorPrototype,$y=cf,Hy=he,Ev=Ef,Zw=Pd,eO=function(){return this},tO=Rn,Wy=Q,Gy=function(n,r,o,s){var l=r+" Iterator";return n.prototype=$y(eu,{next:Hy(+!s,o)}),Ev(n,l,!1,!0),Zw[l]=eO,n},nO=St,zy=Ef,_v=rm,$o=Pd,ac=pv.PROPER,lm=sm.BUGGY_SAFARI_ITERATORS,Sv=Ar("iterator"),_f="keys",qc="values",yv="entries",Ky=function(){return this},qy=function(n,r,o,s,l,d,p){Gy(o,r,s);var _,S,I,b=function(Ee){if(Ee===l&&ee)return ee;if(!lm&&Ee in W)return W[Ee];switch(Ee){case _f:case qc:case yv:return function(){return new o(this,Ee)}}return function(){return new o(this)}},A=r+" Iterator",F=!1,W=n.prototype,Z=W[Sv]||W["@@iterator"]||l&&W[l],ee=!lm&&Z||b(l),te=r=="Array"&&W.entries||Z;if(te&&(_=nO(te.call(new n)))!==Object.prototype&&_.next&&(zy(_,A,!0,!0),$o[A]=Ky),ac&&l==qc&&Z&&Z.name!==qc&&(F=!0,ee=function(){return Wy(Z,this)}),l)if(S={values:b(qc),keys:d?ee:b(_f),entries:b(yv)},p)for(I in S)(lm||F||!(I in W))&&_v(W,I,S[I]);else tO({target:r,proto:!0,forced:lm||F},S);return p&&W[Sv]!==ee&&_v(W,Sv,ee,{name:l}),$o[r]=ee,S},Yy=_t,Uu=Pd,Md=nm;bs.f;var rO=qy,Cv="Array Iterator",Xy=Md.set,um=Md.getterFor(Cv);rO(Array,"Array",function(n,r){Xy(this,{type:Cv,target:Yy(n),index:0,kind:r})},function(){var n=um(this),r=n.target,o=n.kind,s=n.index++;return!r||s>=r.length?(n.target=void 0,{value:void 0,done:!0}):o=="keys"?{value:s,done:!1}:o=="values"?{value:r[s],done:!1}:{value:[s,r[s]],done:!1}},"values"),Uu.Arguments=Uu.Array;var Tv=O.Promise,dm=rm,bv=dt,hm=bs,iO=$,Rv=Ar("species"),fm=R,Jy=O.TypeError,pm=Ar("iterator"),Qy=!1;try{var Zy=0,sc={next:function(){return{done:!!Zy++}},return:function(){Qy=!0}};sc[pm]=function(){return this},Array.from(sc,function(){throw 2})}catch{}var eC=T,tC=c,nC=V,rC=Yl,oO=av,iC=function(){},Yc=[],mm=dt("Reflect","construct"),Sf=/^\s*(?:class|function)\b/,Iv=eC(Sf.exec),gm=!Sf.exec(iC),cc=function(n){if(!nC(n))return!1;try{return mm(iC,Yc,n),!0}catch{return!1}},$t=function(n){if(!nC(n))return!1;switch(rC(n)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return gm||!!Iv(Sf,oO(n))}catch{return!0}};$t.sham=!0;var tu,nu,ru,wv,yf=!mm||tC(function(){var n;return cc(cc.call)||!cc(Object)||!cc(function(){n=!0})||n})?$t:cc,oC=yf,wo=Gn,aO=O.TypeError,aC=Rs,sC=function(n){if(oC(n))return n;throw aO(wo(n)+" is not a constructor")},sO=Ar("species"),Ov=function(n,r){var o,s=aC(n).constructor;return s===void 0||(o=aC(s)[sO])==null?r:sC(o)},Av=T([].slice),cC=/(?:ipad|iphone|ipod).*applewebkit/i.test(at),Na=O,Xc=k,Ho=zh,vm=V,cO=pr,Nv=c,lC=Nu,lO=Av,Ud=Ts,uC=cC,dC=Np,xv=Na.setImmediate,Pv=Na.clearImmediate,uO=Na.process,Dv=Na.Dispatch,hC=Na.Function,Lv=Na.MessageChannel,dO=Na.String,Cf=0,Fd={},Tf="onreadystatechange";try{tu=Na.location}catch{}var bf=function(n){if(cO(Fd,n)){var r=Fd[n];delete Fd[n],r()}},Em=function(n){return function(){bf(n)}},kv=function(n){bf(n.data)},Rf=function(n){Na.postMessage(dO(n),tu.protocol+"//"+tu.host)};xv&&Pv||(xv=function(n){var r=lO(arguments,1);return Fd[++Cf]=function(){Xc(vm(n)?n:hC(n),void 0,r)},nu(Cf),Cf},Pv=function(n){delete Fd[n]},dC?nu=function(n){uO.nextTick(Em(n))}:Dv&&Dv.now?nu=function(n){Dv.now(Em(n))}:Lv&&!uC?(wv=(ru=new Lv).port2,ru.port1.onmessage=kv,nu=Ho(wv.postMessage,wv)):Na.addEventListener&&vm(Na.postMessage)&&!Na.importScripts&&tu&&tu.protocol!=="file:"&&!Nv(Rf)?(nu=Rf,Na.addEventListener("message",kv,!1)):nu=Tf in Ud("script")?function(n){lC.appendChild(Ud("script")).onreadystatechange=function(){lC.removeChild(this),bf(n)}}:function(n){setTimeout(Em(n),0)});var Vd,Oo,ws,jd,_m,Mv,Uv,fC,pC={set:xv,clear:Pv},hO=O,fO=/ipad|iphone|ipod/i.test(at)&&hO.Pebble!==void 0,pO=/web0s(?!.*chrome)/i.test(at),Fu=O,mC=zh,mO=H.f,Fv=pC.set,gC=cC,vC=fO,EC=pO,Vv=Np,_C=Fu.MutationObserver||Fu.WebKitMutationObserver,SC=Fu.document,jv=Fu.process,Sm=Fu.Promise,yC=mO(Fu,"queueMicrotask"),CC=yC&&yC.value;CC||(Vd=function(){var n,r;for(Vv&&(n=jv.domain)&&n.exit();Oo;){r=Oo.fn,Oo=Oo.next;try{r()}catch(o){throw Oo?jd():ws=void 0,o}}ws=void 0,n&&n.enter()},gC||Vv||EC||!_C||!SC?!vC&&Sm&&Sm.resolve?((Uv=Sm.resolve(void 0)).constructor=Sm,fC=mC(Uv.then,Uv),jd=function(){fC(Vd)}):Vv?jd=function(){jv.nextTick(Vd)}:(Fv=mC(Fv,Fu),jd=function(){Fv(Vd)}):(_m=!0,Mv=SC.createTextNode(""),new _C(Vd).observe(Mv,{characterData:!0}),jd=function(){Mv.data=_m=!_m}));var gO=CC||function(n){var r={fn:n,next:void 0};ws&&(ws.next=r),Oo||(Oo=r,jd()),ws=r},Bd={},TC=an,Za=function(n){var r,o;this.promise=new n(function(s,l){if(r!==void 0||o!==void 0)throw TypeError("Bad Promise constructor");r=s,o=l}),this.resolve=TC(r),this.reject=TC(o)};Bd.f=function(n){return new Za(n)};var vO=Rs,EO=At,_O=Bd,Bv=function(n,r){if(vO(n),EO(r)&&r.constructor===n)return r;var o=_O.f(n);return(0,o.resolve)(r),o.promise},SO=O,ym=function(n){try{return{error:!1,value:n()}}catch(r){return{error:!0,value:r}}},bC=function(){this.head=null,this.tail=null};bC.prototype={add:function(n){var r={item:n,next:null};this.head?this.tail.next=r:this.head=r,this.tail=r},get:function(){var n=this.head;if(n)return this.head=n.next,this.tail===n&&(this.tail=null),n.item}};var $v,Cm,Hv,yO=typeof window=="object",Tm=Rn,Jc=O,CO=dt,iu=Q,Wv=Tv,TO=function(n,r,o){for(var s in r)o&&o.unsafe&&n[s]?n[s]=r[s]:dm(n,s,r[s],o);return n},bO=Ef,RO=function(n){var r=bv(n),o=hm.f;iO&&r&&!r[Rv]&&o(r,Rv,{configurable:!0,get:function(){return this}})},Gv=an,bm=V,IO=At,wO=function(n,r){if(fm(r,n))return n;throw Jy("Incorrect invocation")},OO=av,RC=oc,AO=function(n,r){if(!r&&!Qy)return!1;var o=!1;try{var s={};s[pm]=function(){return{next:function(){return{done:o=!0}}}},n(s)}catch{}return o},NO=Ov,IC=pC.set,zv=gO,Kv=Bv,wC=function(n,r){var o=SO.console;o&&o.error&&(arguments.length==1?o.error(n):o.error(n,r))},OC=Bd,qv=ym,xO=bC,Yv=nm,PO=Sd,DO=yO,Rm=Np,AC=Hn,NC=Ar("species"),lc="Promise",If=Yv.getterFor(lc),LO=Yv.set,kO=Yv.getterFor(lc),MO=Wv&&Wv.prototype,uc=Wv,Im=MO,xC=Jc.TypeError,Xv=Jc.document,Jv=Jc.process,$d=OC.f,UO=$d,FO=!!(Xv&&Xv.createEvent&&Jc.dispatchEvent),PC=bm(Jc.PromiseRejectionEvent),DC="unhandledrejection",wm=PO(lc,function(){var n=OO(uc),r=n!==String(uc);if(!r&&AC===66||!Im.finally)return!0;if(AC>=51&&/native code/.test(n))return!1;var o=new uc(function(l){l(1)}),s=function(l){l(function(){},function(){})};return(o.constructor={})[NC]=s,!(o.then(function(){})instanceof s)||!r&&DO&&!PC}),VO=wm||!AO(function(n){uc.all(n).catch(function(){})}),LC=function(n){var r;return!(!IO(n)||!bm(r=n.then))&&r},Qv=function(n,r){var o,s,l,d=r.value,p=r.state==1,_=p?n.ok:n.fail,S=n.resolve,I=n.reject,b=n.domain;try{_?(p||(r.rejection===2&&BO(r),r.rejection=1),_===!0?o=d:(b&&b.enter(),o=_(d),b&&(b.exit(),l=!0)),o===n.promise?I(xC("Promise-chain cycle")):(s=LC(o))?iu(s,o,S,I):S(o)):I(d)}catch(A){b&&!l&&b.exit(),I(A)}},Zv=function(n,r){n.notified||(n.notified=!0,zv(function(){for(var o,s=n.reactions;o=s.get();)Qv(o,n);n.notified=!1,r&&!n.rejection&&jO(n)}))},kC=function(n,r,o){var s,l;FO?((s=Xv.createEvent("Event")).promise=r,s.reason=o,s.initEvent(n,!1,!0),Jc.dispatchEvent(s)):s={promise:r,reason:o},!PC&&(l=Jc["on"+n])?l(s):n===DC&&wC("Unhandled promise rejection",o)},jO=function(n){iu(IC,Jc,function(){var r,o=n.facade,s=n.value;if(MC(n)&&(r=qv(function(){Rm?Jv.emit("unhandledRejection",s,o):kC(DC,o,s)}),n.rejection=Rm||MC(n)?2:1,r.error))throw r.value})},MC=function(n){return n.rejection!==1&&!n.parent},BO=function(n){iu(IC,Jc,function(){var r=n.facade;Rm?Jv.emit("rejectionHandled",r):kC("rejectionhandled",r,n.value)})},Qc=function(n,r,o){return function(s){n(r,s,o)}},Hd=function(n,r,o){n.done||(n.done=!0,o&&(n=o),n.value=r,n.state=2,Zv(n,!0))},eE=function(n,r,o){if(!n.done){n.done=!0,o&&(n=o);try{if(n.facade===r)throw xC("Promise can't be resolved itself");var s=LC(r);s?zv(function(){var l={done:!1};try{iu(s,r,Qc(eE,l,n),Qc(Hd,l,n))}catch(d){Hd(l,d,n)}}):(n.value=r,n.state=1,Zv(n,!1))}catch(l){Hd({done:!1},l,n)}}};wm&&(Im=(uc=function(n){wO(this,Im),Gv(n),iu($v,this);var r=If(this);try{n(Qc(eE,r),Qc(Hd,r))}catch(o){Hd(r,o)}}).prototype,($v=function(n){LO(this,{type:lc,done:!1,notified:!1,parent:!1,reactions:new xO,rejection:!1,state:0,value:void 0})}).prototype=TO(Im,{then:function(n,r){var o=kO(this),s=$d(NO(this,uc));return o.parent=!0,s.ok=!bm(n)||n,s.fail=bm(r)&&r,s.domain=Rm?Jv.domain:void 0,o.state==0?o.reactions.add(s):zv(function(){Qv(s,o)}),s.promise},catch:function(n){return this.then(void 0,n)}}),Cm=function(){var n=new $v,r=If(n);this.promise=n,this.resolve=Qc(eE,r),this.reject=Qc(Hd,r)},OC.f=$d=function(n){return n===uc||n===Hv?new Cm(n):UO(n)}),Tm({global:!0,wrap:!0,forced:wm},{Promise:uc}),bO(uc,lc,!1,!0),RO(lc),Hv=CO(lc),Tm({target:lc,stat:!0,forced:wm},{reject:function(n){var r=$d(this);return iu(r.reject,void 0,n),r.promise}}),Tm({target:lc,stat:!0,forced:!0},{resolve:function(n){return Kv(this===Hv?uc:this,n)}}),Tm({target:lc,stat:!0,forced:VO},{all:function(n){var r=this,o=$d(r),s=o.resolve,l=o.reject,d=qv(function(){var p=Gv(r.resolve),_=[],S=0,I=1;RC(n,function(b){var A=S++,F=!1;I++,iu(p,r,b).then(function(W){F||(F=!0,_[A]=W,--I||s(_))},l)}),--I||s(_)});return d.error&&l(d.value),o.promise},race:function(n){var r=this,o=$d(r),s=o.reject,l=qv(function(){var d=Gv(r.resolve);RC(n,function(p){iu(d,r,p).then(o.resolve,s)})});return l.error&&s(l.value),o.promise}});var $O=Q,HO=an,WO=Bd,GO=ym,zO=oc;Rn({target:"Promise",stat:!0},{allSettled:function(n){var r=this,o=WO.f(r),s=o.resolve,l=o.reject,d=GO(function(){var p=HO(r.resolve),_=[],S=0,I=1;zO(n,function(b){var A=S++,F=!1;I++,$O(p,r,b).then(function(W){F||(F=!0,_[A]={status:"fulfilled",value:W},--I||s(_))},function(W){F||(F=!0,_[A]={status:"rejected",reason:W},--I||s(_))})}),--I||s(_)});return d.error&&l(d.value),o.promise}});var KO=an,qO=dt,YO=Q,XO=Bd,Om=ym,JO=oc,tE="No one promise resolved";Rn({target:"Promise",stat:!0},{any:function(n){var r=this,o=qO("AggregateError"),s=XO.f(r),l=s.resolve,d=s.reject,p=Om(function(){var _=KO(r.resolve),S=[],I=0,b=1,A=!1;JO(n,function(F){var W=I++,Z=!1;b++,YO(_,r,F).then(function(ee){Z||A||(A=!0,l(ee))},function(ee){Z||A||(Z=!0,S[W]=ee,--b||d(new o(S,tE)))})}),--b||d(new o(S,tE))});return p.error&&d(p.value),s.promise}});var nE=Tv,rE=dt,UC=V,FC=Ov,iE=Bv;Rn({target:"Promise",proto:!0,real:!0,forced:!!nE&&c(function(){nE.prototype.finally.call({then:function(){}},function(){})})},{finally:function(n){var r=FC(this,rE("Promise")),o=UC(n);return this.then(o?function(s){return iE(r,n()).then(function(){return s})}:n,o?function(s){return iE(r,n()).then(function(){throw s})}:n)}});var Am=T,QO=$g,ZO=Du,eA=qe,Nm=Am("".charAt),wf=Am("".charCodeAt),tA=Am("".slice),VC=function(n){return function(r,o){var s,l,d=ZO(eA(r)),p=QO(o),_=d.length;return p<0||p>=_?n?"":void 0:(s=wf(d,p))<55296||s>56319||p+1===_||(l=wf(d,p+1))<56320||l>57343?n?Nm(d,p):s:n?tA(d,p,p+2):l-56320+(s-55296<<10)+65536}},oE={codeAt:VC(!1),charAt:VC(!0)}.charAt,jC=Du,BC=nm,nA=qy,$C="String Iterator",rA=BC.set,iA=BC.getterFor($C);nA(String,"String",function(n){rA(this,{type:$C,string:jC(n),index:0})},function(){var n,r=iA(this),o=r.string,s=r.index;return s>=o.length?{value:void 0,done:!0}:(n=oE(o,s),r.index+=n.length,{value:n,done:!1})});var oA=it.Promise,aA={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},sA=O,cA=Yl,lA=$l,HC=Pd,WC=Ar("toStringTag");for(var xa in aA){var GC=sA[xa],aE=GC&&GC.prototype;aE&&cA(aE)!==WC&&lA(aE,WC,xa),HC[xa]=HC.Array}var ou=oA,Le=ou;const zC=Lp;function Wo(n,r){const o=n&&n.navigator;if(!o.mediaDevices)return;const s=function(p){if(typeof p!="object"||p.mandatory||p.optional)return p;const _={};return Object.keys(p).forEach(S=>{if(S==="require"||S==="advanced"||S==="mediaSource")return;const I=typeof p[S]=="object"?p[S]:{ideal:p[S]};I.exact!==void 0&&typeof I.exact=="number"&&(I.min=I.max=I.exact);const b=function(A,F){return A?A+F.charAt(0).toUpperCase()+F.slice(1):F==="deviceId"?"sourceId":F};if(I.ideal!==void 0){_.optional=_.optional||[];let A={};typeof I.ideal=="number"?(A[b("min",S)]=I.ideal,_.optional.push(A),A={},A[b("max",S)]=I.ideal,_.optional.push(A)):(A[b("",S)]=I.ideal,_.optional.push(A))}I.exact!==void 0&&typeof I.exact!="number"?(_.mandatory=_.mandatory||{},_.mandatory[b("",S)]=I.exact):["min","max"].forEach(A=>{I[A]!==void 0&&(_.mandatory=_.mandatory||{},_.mandatory[b(A,S)]=I[A])})}),p.advanced&&(_.optional=(_.optional||[]).concat(p.advanced)),_},l=function(p,_){if(r.version>=61)return _(p);if((p=JSON.parse(JSON.stringify(p)))&&typeof p.audio=="object"){const S=function(I,b,A){b in I&&!(A in I)&&(I[A]=I[b],delete I[b])};S((p=JSON.parse(JSON.stringify(p))).audio,"autoGainControl","googAutoGainControl"),S(p.audio,"noiseSuppression","googNoiseSuppression"),p.audio=s(p.audio)}if(p&&typeof p.video=="object"){let S=p.video.facingMode;S=S&&(typeof S=="object"?S:{ideal:S});const I=r.version<66;if(S&&(S.exact==="user"||S.exact==="environment"||S.ideal==="user"||S.ideal==="environment")&&(!o.mediaDevices.getSupportedConstraints||!o.mediaDevices.getSupportedConstraints().facingMode||I)){let b;if(delete p.video.facingMode,S.exact==="environment"||S.ideal==="environment"?b=["back","rear"]:S.exact!=="user"&&S.ideal!=="user"||(b=["front"]),b)return o.mediaDevices.enumerateDevices().then(A=>{let F=(A=A.filter(W=>W.kind==="videoinput")).find(W=>b.some(Z=>W.label.toLowerCase().includes(Z)));return!F&&A.length&&b.includes("back")&&(F=A[A.length-1]),F&&(p.video.deviceId=S.exact?{exact:F.deviceId}:{ideal:F.deviceId}),p.video=s(p.video),zC("chrome: "+JSON.stringify(p)),_(p)})}p.video=s(p.video)}return zC("chrome: "+JSON.stringify(p)),_(p)},d=function(p){return r.version>=64?p:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[p.name]||p.name,message:p.message,constraint:p.constraint||p.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(o.getUserMedia=(function(p,_,S){l(p,I=>{o.webkitGetUserMedia(I,_,b=>{S&&S(d(b))})})}).bind(o),o.mediaDevices.getUserMedia){const p=o.mediaDevices.getUserMedia.bind(o.mediaDevices);o.mediaDevices.getUserMedia=function(_){return l(_,S=>p(S).then(I=>{if(S.audio&&!I.getAudioTracks().length||S.video&&!I.getVideoTracks().length)throw I.getTracks().forEach(b=>{b.stop()}),new DOMException("","NotFoundError");return I},I=>Le.reject(d(I))))}}}function fi(n){n.MediaStream=n.MediaStream||n.webkitMediaStream}function KC(n){if(typeof n=="object"&&n.RTCPeerConnection&&!("ontrack"in n.RTCPeerConnection.prototype)){Object.defineProperty(n.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(o){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=o)},enumerable:!0,configurable:!0});const r=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=o=>{o.stream.addEventListener("addtrack",s=>{let l;l=n.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(p=>p.track&&p.track.id===s.track.id):{track:s.track};const d=new Event("track");d.track=s.track,d.receiver=l,d.transceiver={receiver:l},d.streams=[o.stream],this.dispatchEvent(d)}),o.stream.getTracks().forEach(s=>{let l;l=n.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(p=>p.track&&p.track.id===s.id):{track:s};const d=new Event("track");d.track=s,d.receiver=l,d.transceiver={receiver:l},d.streams=[o.stream],this.dispatchEvent(d)})},this.addEventListener("addstream",this._ontrackpoly)),r.apply(this,arguments)}}else Ga(n,"track",r=>(r.transceiver||Object.defineProperty(r,"transceiver",{value:{receiver:r.receiver}}),r))}function Zc(n){if(typeof n=="object"&&n.RTCPeerConnection&&!("getSenders"in n.RTCPeerConnection.prototype)&&"createDTMFSender"in n.RTCPeerConnection.prototype){const r=function(l,d){return{track:d,get dtmf(){return this._dtmf===void 0&&(d.kind==="audio"?this._dtmf=l.createDTMFSender(d):this._dtmf=null),this._dtmf},_pc:l}};if(!n.RTCPeerConnection.prototype.getSenders){n.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const l=n.RTCPeerConnection.prototype.addTrack;n.RTCPeerConnection.prototype.addTrack=function(p,_){let S=l.apply(this,arguments);return S||(S=r(this,p),this._senders.push(S)),S};const d=n.RTCPeerConnection.prototype.removeTrack;n.RTCPeerConnection.prototype.removeTrack=function(p){d.apply(this,arguments);const _=this._senders.indexOf(p);_!==-1&&this._senders.splice(_,1)}}const o=n.RTCPeerConnection.prototype.addStream;n.RTCPeerConnection.prototype.addStream=function(l){this._senders=this._senders||[],o.apply(this,[l]),l.getTracks().forEach(d=>{this._senders.push(r(this,d))})};const s=n.RTCPeerConnection.prototype.removeStream;n.RTCPeerConnection.prototype.removeStream=function(l){this._senders=this._senders||[],s.apply(this,[l]),l.getTracks().forEach(d=>{const p=this._senders.find(_=>_.track===d);p&&this._senders.splice(this._senders.indexOf(p),1)})}}else if(typeof n=="object"&&n.RTCPeerConnection&&"getSenders"in n.RTCPeerConnection.prototype&&"createDTMFSender"in n.RTCPeerConnection.prototype&&n.RTCRtpSender&&!("dtmf"in n.RTCRtpSender.prototype)){const r=n.RTCPeerConnection.prototype.getSenders;n.RTCPeerConnection.prototype.getSenders=function(){const o=r.apply(this,[]);return o.forEach(s=>s._pc=this),o},Object.defineProperty(n.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function qC(n){if(!n.RTCPeerConnection)return;const r=n.RTCPeerConnection.prototype.getStats;n.RTCPeerConnection.prototype.getStats=function(){const[o,s,l]=arguments;if(arguments.length>0&&typeof o=="function")return r.apply(this,arguments);if(r.length===0&&(arguments.length===0||typeof o!="function"))return r.apply(this,[]);const d=function(_){const S={};return _.result().forEach(I=>{const b={id:I.id,timestamp:I.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[I.type]||I.type};I.names().forEach(A=>{b[A]=I.stat(A)}),S[b.id]=b}),S},p=function(_){return new Map(Object.keys(_).map(S=>[S,_[S]]))};if(arguments.length>=2){const _=function(S){s(p(d(S)))};return r.apply(this,[_,o])}return new Le((_,S)=>{r.apply(this,[function(I){_(p(d(I)))},S])}).then(s,l)}}function YC(n){if(!(typeof n=="object"&&n.RTCPeerConnection&&n.RTCRtpSender&&n.RTCRtpReceiver))return;if(!("getStats"in n.RTCRtpSender.prototype)){const o=n.RTCPeerConnection.prototype.getSenders;o&&(n.RTCPeerConnection.prototype.getSenders=function(){const l=o.apply(this,[]);return l.forEach(d=>d._pc=this),l});const s=n.RTCPeerConnection.prototype.addTrack;s&&(n.RTCPeerConnection.prototype.addTrack=function(){const l=s.apply(this,arguments);return l._pc=this,l}),n.RTCRtpSender.prototype.getStats=function(){const l=this;return this._pc.getStats().then(d=>dy(d,l.track,!0))}}if(!("getStats"in n.RTCRtpReceiver.prototype)){const o=n.RTCPeerConnection.prototype.getReceivers;o&&(n.RTCPeerConnection.prototype.getReceivers=function(){const s=o.apply(this,[]);return s.forEach(l=>l._pc=this),s}),Ga(n,"track",s=>(s.receiver._pc=s.srcElement,s)),n.RTCRtpReceiver.prototype.getStats=function(){const s=this;return this._pc.getStats().then(l=>dy(l,s.track,!1))}}if(!("getStats"in n.RTCRtpSender.prototype)||!("getStats"in n.RTCRtpReceiver.prototype))return;const r=n.RTCPeerConnection.prototype.getStats;n.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof n.MediaStreamTrack){const o=arguments[0];let s,l,d;return this.getSenders().forEach(p=>{p.track===o&&(s?d=!0:s=p)}),this.getReceivers().forEach(p=>(p.track===o&&(l?d=!0:l=p),p.track===o)),d||s&&l?Le.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):s?s.getStats():l?l.getStats():Le.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return r.apply(this,arguments)}}function XC(n){n.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(d=>this._shimmedLocalStreams[d][0])};const r=n.RTCPeerConnection.prototype.addTrack;n.RTCPeerConnection.prototype.addTrack=function(d,p){if(!p)return r.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const _=r.apply(this,arguments);return this._shimmedLocalStreams[p.id]?this._shimmedLocalStreams[p.id].indexOf(_)===-1&&this._shimmedLocalStreams[p.id].push(_):this._shimmedLocalStreams[p.id]=[p,_],_};const o=n.RTCPeerConnection.prototype.addStream;n.RTCPeerConnection.prototype.addStream=function(d){this._shimmedLocalStreams=this._shimmedLocalStreams||{},d.getTracks().forEach(S=>{if(this.getSenders().find(I=>I.track===S))throw new DOMException("Track already exists.","InvalidAccessError")});const p=this.getSenders();o.apply(this,arguments);const _=this.getSenders().filter(S=>p.indexOf(S)===-1);this._shimmedLocalStreams[d.id]=[d].concat(_)};const s=n.RTCPeerConnection.prototype.removeStream;n.RTCPeerConnection.prototype.removeStream=function(d){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[d.id],s.apply(this,arguments)};const l=n.RTCPeerConnection.prototype.removeTrack;n.RTCPeerConnection.prototype.removeTrack=function(d){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},d&&Object.keys(this._shimmedLocalStreams).forEach(p=>{const _=this._shimmedLocalStreams[p].indexOf(d);_!==-1&&this._shimmedLocalStreams[p].splice(_,1),this._shimmedLocalStreams[p].length===1&&delete this._shimmedLocalStreams[p]}),l.apply(this,arguments)}}function JC(n,r){if(!n.RTCPeerConnection)return;if(n.RTCPeerConnection.prototype.addTrack&&r.version>=65)return XC(n);const o=n.RTCPeerConnection.prototype.getLocalStreams;n.RTCPeerConnection.prototype.getLocalStreams=function(){const I=o.apply(this);return this._reverseStreams=this._reverseStreams||{},I.map(b=>this._reverseStreams[b.id])};const s=n.RTCPeerConnection.prototype.addStream;n.RTCPeerConnection.prototype.addStream=function(I){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},I.getTracks().forEach(b=>{if(this.getSenders().find(A=>A.track===b))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[I.id]){const b=new n.MediaStream(I.getTracks());this._streams[I.id]=b,this._reverseStreams[b.id]=I,I=b}s.apply(this,[I])};const l=n.RTCPeerConnection.prototype.removeStream;function d(I,b){let A=b.sdp;return Object.keys(I._reverseStreams||[]).forEach(F=>{const W=I._reverseStreams[F],Z=I._streams[W.id];A=A.replace(new RegExp(Z.id,"g"),W.id)}),new RTCSessionDescription({type:b.type,sdp:A})}function p(I,b){let A=b.sdp;return Object.keys(I._reverseStreams||[]).forEach(F=>{const W=I._reverseStreams[F],Z=I._streams[W.id];A=A.replace(new RegExp(W.id,"g"),Z.id)}),new RTCSessionDescription({type:b.type,sdp:A})}n.RTCPeerConnection.prototype.removeStream=function(I){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},l.apply(this,[this._streams[I.id]||I]),delete this._reverseStreams[this._streams[I.id]?this._streams[I.id].id:I.id],delete this._streams[I.id]},n.RTCPeerConnection.prototype.addTrack=function(I,b){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const A=[].slice.call(arguments,1);if(A.length!==1||!A[0].getTracks().find(Z=>Z===I))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(Z=>Z.track===I))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const W=this._streams[b.id];if(W)W.addTrack(I),Le.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const Z=new n.MediaStream([I]);this._streams[b.id]=Z,this._reverseStreams[Z.id]=b,this.addStream(Z)}return this.getSenders().find(Z=>Z.track===I)},["createOffer","createAnswer"].forEach(function(I){const b=n.RTCPeerConnection.prototype[I],A={[I](){const F=arguments;return arguments.length&&typeof arguments[0]=="function"?b.apply(this,[W=>{const Z=d(this,W);F[0].apply(null,[Z])},W=>{F[1]&&F[1].apply(null,W)},arguments[2]]):b.apply(this,arguments).then(W=>d(this,W))}};n.RTCPeerConnection.prototype[I]=A[I]});const _=n.RTCPeerConnection.prototype.setLocalDescription;n.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=p(this,arguments[0]),_.apply(this,arguments)):_.apply(this,arguments)};const S=Object.getOwnPropertyDescriptor(n.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(n.RTCPeerConnection.prototype,"localDescription",{get(){const I=S.get.apply(this);return I.type===""?I:d(this,I)}}),n.RTCPeerConnection.prototype.removeTrack=function(I){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!I._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(I._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let b;this._streams=this._streams||{},Object.keys(this._streams).forEach(A=>{this._streams[A].getTracks().find(F=>I.track===F)&&(b=this._streams[A])}),b&&(b.getTracks().length===1?this.removeStream(this._reverseStreams[b.id]):b.removeTrack(I.track),this.dispatchEvent(new Event("negotiationneeded")))}}function sE(n,r){!n.RTCPeerConnection&&n.webkitRTCPeerConnection&&(n.RTCPeerConnection=n.webkitRTCPeerConnection),n.RTCPeerConnection&&r.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(o){const s=n.RTCPeerConnection.prototype[o],l={[o](){return arguments[0]=new(o==="addIceCandidate"?n.RTCIceCandidate:n.RTCSessionDescription)(arguments[0]),s.apply(this,arguments)}};n.RTCPeerConnection.prototype[o]=l[o]})}function xm(n,r){Ga(n,"negotiationneeded",o=>{const s=o.target;if(!(r.version<72||s.getConfiguration&&s.getConfiguration().sdpSemantics==="plan-b")||s.signalingState==="stable")return o})}var QC=Object.freeze({__proto__:null,shimMediaStream:fi,shimOnTrack:KC,shimGetSendersWithDtmf:Zc,shimGetStats:qC,shimSenderReceiverGetStats:YC,shimAddTrackRemoveTrackWithNative:XC,shimAddTrackRemoveTrack:JC,shimPeerConnection:sE,fixNegotiationNeeded:xm,shimGetUserMedia:Wo,shimGetDisplayMedia:function(n,r){n.navigator.mediaDevices&&"getDisplayMedia"in n.navigator.mediaDevices||n.navigator.mediaDevices&&(typeof r=="function"?n.navigator.mediaDevices.getDisplayMedia=function(o){return r(o).then(s=>{const l=o.video&&o.video.width,d=o.video&&o.video.height,p=o.video&&o.video.frameRate;return o.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:s,maxFrameRate:p||3}},l&&(o.video.mandatory.maxWidth=l),d&&(o.video.mandatory.maxHeight=d),n.navigator.mediaDevices.getUserMedia(o)})}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}});function dc(n,r){const o=n&&n.navigator,s=n&&n.MediaStreamTrack;if(o.getUserMedia=function(l,d,p){kp("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),o.mediaDevices.getUserMedia(l).then(d,p)},!(r.version>55&&"autoGainControl"in o.mediaDevices.getSupportedConstraints())){const l=function(p,_,S){_ in p&&!(S in p)&&(p[S]=p[_],delete p[_])},d=o.mediaDevices.getUserMedia.bind(o.mediaDevices);if(o.mediaDevices.getUserMedia=function(p){return typeof p=="object"&&typeof p.audio=="object"&&(p=JSON.parse(JSON.stringify(p)),l(p.audio,"autoGainControl","mozAutoGainControl"),l(p.audio,"noiseSuppression","mozNoiseSuppression")),d(p)},s&&s.prototype.getSettings){const p=s.prototype.getSettings;s.prototype.getSettings=function(){const _=p.apply(this,arguments);return l(_,"mozAutoGainControl","autoGainControl"),l(_,"mozNoiseSuppression","noiseSuppression"),_}}if(s&&s.prototype.applyConstraints){const p=s.prototype.applyConstraints;s.prototype.applyConstraints=function(_){return this.kind==="audio"&&typeof _=="object"&&(_=JSON.parse(JSON.stringify(_)),l(_,"autoGainControl","mozAutoGainControl"),l(_,"noiseSuppression","mozNoiseSuppression")),p.apply(this,[_])}}}}function cE(n){typeof n=="object"&&n.RTCTrackEvent&&"receiver"in n.RTCTrackEvent.prototype&&!("transceiver"in n.RTCTrackEvent.prototype)&&Object.defineProperty(n.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Wd(n,r){if(typeof n!="object"||!n.RTCPeerConnection&&!n.mozRTCPeerConnection)return;!n.RTCPeerConnection&&n.mozRTCPeerConnection&&(n.RTCPeerConnection=n.mozRTCPeerConnection),r.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(l){const d=n.RTCPeerConnection.prototype[l],p={[l](){return arguments[0]=new(l==="addIceCandidate"?n.RTCIceCandidate:n.RTCSessionDescription)(arguments[0]),d.apply(this,arguments)}};n.RTCPeerConnection.prototype[l]=p[l]});const o={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},s=n.RTCPeerConnection.prototype.getStats;n.RTCPeerConnection.prototype.getStats=function(){const[l,d,p]=arguments;return s.apply(this,[l||null]).then(_=>{if(r.version<53&&!d)try{_.forEach(S=>{S.type=o[S.type]||S.type})}catch(S){if(S.name!=="TypeError")throw S;_.forEach((I,b)=>{_.set(b,Object.assign({},I,{type:o[I.type]||I.type}))})}return _}).then(d,p)}}function qr(n){if(typeof n!="object"||!n.RTCPeerConnection||!n.RTCRtpSender||n.RTCRtpSender&&"getStats"in n.RTCRtpSender.prototype)return;const r=n.RTCPeerConnection.prototype.getSenders;r&&(n.RTCPeerConnection.prototype.getSenders=function(){const s=r.apply(this,[]);return s.forEach(l=>l._pc=this),s});const o=n.RTCPeerConnection.prototype.addTrack;o&&(n.RTCPeerConnection.prototype.addTrack=function(){const s=o.apply(this,arguments);return s._pc=this,s}),n.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Le.resolve(new Map)}}function oi(n){if(typeof n!="object"||!n.RTCPeerConnection||!n.RTCRtpSender||n.RTCRtpSender&&"getStats"in n.RTCRtpReceiver.prototype)return;const r=n.RTCPeerConnection.prototype.getReceivers;r&&(n.RTCPeerConnection.prototype.getReceivers=function(){const o=r.apply(this,[]);return o.forEach(s=>s._pc=this),o}),Ga(n,"track",o=>(o.receiver._pc=o.srcElement,o)),n.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function lE(n){n.RTCPeerConnection&&!("removeStream"in n.RTCPeerConnection.prototype)&&(n.RTCPeerConnection.prototype.removeStream=function(r){kp("removeStream","removeTrack"),this.getSenders().forEach(o=>{o.track&&r.getTracks().includes(o.track)&&this.removeTrack(o)})})}function ZC(n){n.DataChannel&&!n.RTCDataChannel&&(n.RTCDataChannel=n.DataChannel)}function eT(n){if(typeof n!="object"||!n.RTCPeerConnection)return;const r=n.RTCPeerConnection.prototype.addTransceiver;r&&(n.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let o=arguments[1]&&arguments[1].sendEncodings;o===void 0&&(o=[]),o=[...o];const s=o.length>0;s&&o.forEach(d=>{if("rid"in d&&!/^[a-z0-9]{0,16}$/i.test(d.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in d&&!(parseFloat(d.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in d&&!(parseFloat(d.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const l=r.apply(this,arguments);if(s){const{sender:d}=l,p=d.getParameters();(!("encodings"in p)||p.encodings.length===1&&Object.keys(p.encodings[0]).length===0)&&(p.encodings=o,d.sendEncodings=o,this.setParametersPromises.push(d.setParameters(p).then(()=>{delete d.sendEncodings}).catch(()=>{delete d.sendEncodings})))}return l})}function tT(n){if(typeof n!="object"||!n.RTCRtpSender)return;const r=n.RTCRtpSender.prototype.getParameters;r&&(n.RTCRtpSender.prototype.getParameters=function(){const o=r.apply(this,arguments);return"encodings"in o||(o.encodings=[].concat(this.sendEncodings||[{}])),o})}function nT(n){if(typeof n!="object"||!n.RTCPeerConnection)return;const r=n.RTCPeerConnection.prototype.createOffer;n.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Le.all(this.setParametersPromises).then(()=>r.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):r.apply(this,arguments)}}function rT(n){if(typeof n!="object"||!n.RTCPeerConnection)return;const r=n.RTCPeerConnection.prototype.createAnswer;n.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Le.all(this.setParametersPromises).then(()=>r.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):r.apply(this,arguments)}}var iT=Object.freeze({__proto__:null,shimOnTrack:cE,shimPeerConnection:Wd,shimSenderGetStats:qr,shimReceiverGetStats:oi,shimRemoveStream:lE,shimRTCDataChannel:ZC,shimAddTransceiver:eT,shimGetParameters:tT,shimCreateOffer:nT,shimCreateAnswer:rT,shimGetUserMedia:dc,shimGetDisplayMedia:function(n,r){n.navigator.mediaDevices&&"getDisplayMedia"in n.navigator.mediaDevices||n.navigator.mediaDevices&&(n.navigator.mediaDevices.getDisplayMedia=function(o){if(!o||!o.video){const s=new DOMException("getDisplayMedia without video constraints is undefined");return s.name="NotFoundError",s.code=8,Le.reject(s)}return o.video===!0?o.video={mediaSource:r}:o.video.mediaSource=r,n.navigator.mediaDevices.getUserMedia(o)})}});function uE(n){if(typeof n=="object"&&n.RTCPeerConnection){if("getLocalStreams"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in n.RTCPeerConnection.prototype)){const r=n.RTCPeerConnection.prototype.addTrack;n.RTCPeerConnection.prototype.addStream=function(o){this._localStreams||(this._localStreams=[]),this._localStreams.includes(o)||this._localStreams.push(o),o.getAudioTracks().forEach(s=>r.call(this,s,o)),o.getVideoTracks().forEach(s=>r.call(this,s,o))},n.RTCPeerConnection.prototype.addTrack=function(o){for(var s=arguments.length,l=new Array(s>1?s-1:0),d=1;d<s;d++)l[d-1]=arguments[d];return l&&l.forEach(p=>{this._localStreams?this._localStreams.includes(p)||this._localStreams.push(p):this._localStreams=[p]}),r.apply(this,arguments)}}"removeStream"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.removeStream=function(r){this._localStreams||(this._localStreams=[]);const o=this._localStreams.indexOf(r);if(o===-1)return;this._localStreams.splice(o,1);const s=r.getTracks();this.getSenders().forEach(l=>{s.includes(l.track)&&this.removeTrack(l)})})}}function Gd(n){if(typeof n=="object"&&n.RTCPeerConnection&&("getRemoteStreams"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in n.RTCPeerConnection.prototype))){Object.defineProperty(n.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(o){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=o),this.addEventListener("track",this._onaddstreampoly=s=>{s.streams.forEach(l=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(l))return;this._remoteStreams.push(l);const d=new Event("addstream");d.stream=l,this.dispatchEvent(d)})})}});const r=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(){const o=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(s){s.streams.forEach(l=>{if(o._remoteStreams||(o._remoteStreams=[]),o._remoteStreams.indexOf(l)>=0)return;o._remoteStreams.push(l);const d=new Event("addstream");d.stream=l,o.dispatchEvent(d)})}),r.apply(o,arguments)}}}function Pm(n){if(typeof n!="object"||!n.RTCPeerConnection)return;const r=n.RTCPeerConnection.prototype,o=r.createOffer,s=r.createAnswer,l=r.setLocalDescription,d=r.setRemoteDescription,p=r.addIceCandidate;r.createOffer=function(S,I){const b=arguments.length>=2?arguments[2]:arguments[0],A=o.apply(this,[b]);return I?(A.then(S,I),Le.resolve()):A},r.createAnswer=function(S,I){const b=arguments.length>=2?arguments[2]:arguments[0],A=s.apply(this,[b]);return I?(A.then(S,I),Le.resolve()):A};let _=function(S,I,b){const A=l.apply(this,[S]);return b?(A.then(I,b),Le.resolve()):A};r.setLocalDescription=_,_=function(S,I,b){const A=d.apply(this,[S]);return b?(A.then(I,b),Le.resolve()):A},r.setRemoteDescription=_,_=function(S,I,b){const A=p.apply(this,[S]);return b?(A.then(I,b),Le.resolve()):A},r.addIceCandidate=_}function oT(n){const r=n&&n.navigator;if(r.mediaDevices&&r.mediaDevices.getUserMedia){const o=r.mediaDevices,s=o.getUserMedia.bind(o);r.mediaDevices.getUserMedia=l=>s(dE(l))}!r.getUserMedia&&r.mediaDevices&&r.mediaDevices.getUserMedia&&(r.getUserMedia=(function(o,s,l){r.mediaDevices.getUserMedia(o).then(s,l)}).bind(r))}function dE(n){return n&&n.video!==void 0?Object.assign({},n,{video:uy(n.video)}):n}function Of(n){if(!n.RTCPeerConnection)return;const r=n.RTCPeerConnection;n.RTCPeerConnection=function(o,s){if(o&&o.iceServers){const l=[];for(let d=0;d<o.iceServers.length;d++){let p=o.iceServers[d];!p.hasOwnProperty("urls")&&p.hasOwnProperty("url")?(kp("RTCIceServer.url","RTCIceServer.urls"),p=JSON.parse(JSON.stringify(p)),p.urls=p.url,delete p.url,l.push(p)):l.push(o.iceServers[d])}o.iceServers=l}return new r(o,s)},n.RTCPeerConnection.prototype=r.prototype,"generateCertificate"in r&&Object.defineProperty(n.RTCPeerConnection,"generateCertificate",{get:()=>r.generateCertificate})}function la(n){typeof n=="object"&&n.RTCTrackEvent&&"receiver"in n.RTCTrackEvent.prototype&&!("transceiver"in n.RTCTrackEvent.prototype)&&Object.defineProperty(n.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Vu(n){const r=n.RTCPeerConnection.prototype.createOffer;n.RTCPeerConnection.prototype.createOffer=function(o){if(o){o.offerToReceiveAudio!==void 0&&(o.offerToReceiveAudio=!!o.offerToReceiveAudio);const s=this.getTransceivers().find(d=>d.receiver.track.kind==="audio");o.offerToReceiveAudio===!1&&s?s.direction==="sendrecv"?s.setDirection?s.setDirection("sendonly"):s.direction="sendonly":s.direction==="recvonly"&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive"):o.offerToReceiveAudio!==!0||s||this.addTransceiver("audio",{direction:"recvonly"}),o.offerToReceiveVideo!==void 0&&(o.offerToReceiveVideo=!!o.offerToReceiveVideo);const l=this.getTransceivers().find(d=>d.receiver.track.kind==="video");o.offerToReceiveVideo===!1&&l?l.direction==="sendrecv"?l.setDirection?l.setDirection("sendonly"):l.direction="sendonly":l.direction==="recvonly"&&(l.setDirection?l.setDirection("inactive"):l.direction="inactive"):o.offerToReceiveVideo!==!0||l||this.addTransceiver("video",{direction:"recvonly"})}return r.apply(this,arguments)}}function aT(n){typeof n!="object"||n.AudioContext||(n.AudioContext=n.webkitAudioContext)}var sT=Object.freeze({__proto__:null,shimLocalStreamsAPI:uE,shimRemoteStreamsAPI:Gd,shimCallbacksAPI:Pm,shimGetUserMedia:oT,shimConstraints:dE,shimRTCIceServerUrls:Of,shimTrackEventTransceiver:la,shimCreateOfferLegacy:Vu,shimAudioContext:aT}),uA=`	
\v\f\r                　\u2028\u2029\uFEFF`,dA=qe,hA=Du,hE=T("".replace),es=`[	
\v\f\r                　\u2028\u2029\uFEFF]`,Sn=RegExp("^"+es+es+"*"),cT=RegExp(es+es+"*$"),ua=function(n){return function(r){var o=hA(dA(r));return 1&n&&(o=hE(o,Sn,"")),2&n&&(o=hE(o,cT,"")),o}},lT={start:ua(1),end:ua(2),trim:ua(3)},fA=pv.PROPER,sr=c,uT=uA,dT=lT.trim;Rn({target:"String",proto:!0,forced:function(n){return sr(function(){return!!uT[n]()||"​᠎"[n]()!=="​᠎"||fA&&uT[n].name!==n})}("trim")},{trim:function(){return dT(this)}});var Dm=wi("String").trim,pA=R,mA=Dm,fE=String.prototype,el=function(n){var r=n.trim;return typeof n=="string"||n===fE||pA(fE,n)&&r===fE.trim?mA:r},pE={exports:{}};(function(n){const r={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};r.localCName=r.generateIdentifier(),r.splitLines=function(o){return el(o).call(o).split(`
`).map(s=>el(s).call(s))},r.splitSections=function(o){return o.split(`
m=`).map((s,l)=>{var d;return el(d=l>0?"m="+s:s).call(d)+`\r
`})},r.getDescription=function(o){const s=r.splitSections(o);return s&&s[0]},r.getMediaSections=function(o){const s=r.splitSections(o);return s.shift(),s},r.matchPrefix=function(o,s){return r.splitLines(o).filter(l=>l.indexOf(s)===0)},r.parseCandidate=function(o){let s;s=o.indexOf("a=candidate:")===0?o.substring(12).split(" "):o.substring(10).split(" ");const l={foundation:s[0],component:{1:"rtp",2:"rtcp"}[s[1]]||s[1],protocol:s[2].toLowerCase(),priority:parseInt(s[3],10),ip:s[4],address:s[4],port:parseInt(s[5],10),type:s[7]};for(let d=8;d<s.length;d+=2)switch(s[d]){case"raddr":l.relatedAddress=s[d+1];break;case"rport":l.relatedPort=parseInt(s[d+1],10);break;case"tcptype":l.tcpType=s[d+1];break;case"ufrag":l.ufrag=s[d+1],l.usernameFragment=s[d+1];break;default:l[s[d]]===void 0&&(l[s[d]]=s[d+1])}return l},r.writeCandidate=function(o){const s=[];s.push(o.foundation);const l=o.component;l==="rtp"?s.push(1):l==="rtcp"?s.push(2):s.push(l),s.push(o.protocol.toUpperCase()),s.push(o.priority),s.push(o.address||o.ip),s.push(o.port);const d=o.type;return s.push("typ"),s.push(d),d!=="host"&&o.relatedAddress&&o.relatedPort&&(s.push("raddr"),s.push(o.relatedAddress),s.push("rport"),s.push(o.relatedPort)),o.tcpType&&o.protocol.toLowerCase()==="tcp"&&(s.push("tcptype"),s.push(o.tcpType)),(o.usernameFragment||o.ufrag)&&(s.push("ufrag"),s.push(o.usernameFragment||o.ufrag)),"candidate:"+s.join(" ")},r.parseIceOptions=function(o){return o.substr(14).split(" ")},r.parseRtpMap=function(o){let s=o.substr(9).split(" ");const l={payloadType:parseInt(s.shift(),10)};return s=s[0].split("/"),l.name=s[0],l.clockRate=parseInt(s[1],10),l.channels=s.length===3?parseInt(s[2],10):1,l.numChannels=l.channels,l},r.writeRtpMap=function(o){let s=o.payloadType;o.preferredPayloadType!==void 0&&(s=o.preferredPayloadType);const l=o.channels||o.numChannels||1;return"a=rtpmap:"+s+" "+o.name+"/"+o.clockRate+(l!==1?"/"+l:"")+`\r
`},r.parseExtmap=function(o){const s=o.substr(9).split(" ");return{id:parseInt(s[0],10),direction:s[0].indexOf("/")>0?s[0].split("/")[1]:"sendrecv",uri:s[1]}},r.writeExtmap=function(o){return"a=extmap:"+(o.id||o.preferredId)+(o.direction&&o.direction!=="sendrecv"?"/"+o.direction:"")+" "+o.uri+`\r
`},r.parseFmtp=function(o){const s={};let l;const d=o.substr(o.indexOf(" ")+1).split(";");for(let S=0;S<d.length;S++){var p,_;l=el(p=d[S]).call(p).split("="),s[el(_=l[0]).call(_)]=l[1]}return s},r.writeFmtp=function(o){let s="",l=o.payloadType;if(o.preferredPayloadType!==void 0&&(l=o.preferredPayloadType),o.parameters&&Object.keys(o.parameters).length){const d=[];Object.keys(o.parameters).forEach(p=>{o.parameters[p]!==void 0?d.push(p+"="+o.parameters[p]):d.push(p)}),s+="a=fmtp:"+l+" "+d.join(";")+`\r
`}return s},r.parseRtcpFb=function(o){const s=o.substr(o.indexOf(" ")+1).split(" ");return{type:s.shift(),parameter:s.join(" ")}},r.writeRtcpFb=function(o){let s="",l=o.payloadType;return o.preferredPayloadType!==void 0&&(l=o.preferredPayloadType),o.rtcpFeedback&&o.rtcpFeedback.length&&o.rtcpFeedback.forEach(d=>{s+="a=rtcp-fb:"+l+" "+d.type+(d.parameter&&d.parameter.length?" "+d.parameter:"")+`\r
`}),s},r.parseSsrcMedia=function(o){const s=o.indexOf(" "),l={ssrc:parseInt(o.substr(7,s-7),10)},d=o.indexOf(":",s);return d>-1?(l.attribute=o.substr(s+1,d-s-1),l.value=o.substr(d+1)):l.attribute=o.substr(s+1),l},r.parseSsrcGroup=function(o){const s=o.substr(13).split(" ");return{semantics:s.shift(),ssrcs:s.map(l=>parseInt(l,10))}},r.getMid=function(o){const s=r.matchPrefix(o,"a=mid:")[0];if(s)return s.substr(6)},r.parseFingerprint=function(o){const s=o.substr(14).split(" ");return{algorithm:s[0].toLowerCase(),value:s[1].toUpperCase()}},r.getDtlsParameters=function(o,s){return{role:"auto",fingerprints:r.matchPrefix(o+s,"a=fingerprint:").map(r.parseFingerprint)}},r.writeDtlsParameters=function(o,s){let l="a=setup:"+s+`\r
`;return o.fingerprints.forEach(d=>{l+="a=fingerprint:"+d.algorithm+" "+d.value+`\r
`}),l},r.parseCryptoLine=function(o){const s=o.substr(9).split(" ");return{tag:parseInt(s[0],10),cryptoSuite:s[1],keyParams:s[2],sessionParams:s.slice(3)}},r.writeCryptoLine=function(o){return"a=crypto:"+o.tag+" "+o.cryptoSuite+" "+(typeof o.keyParams=="object"?r.writeCryptoKeyParams(o.keyParams):o.keyParams)+(o.sessionParams?" "+o.sessionParams.join(" "):"")+`\r
`},r.parseCryptoKeyParams=function(o){if(o.indexOf("inline:")!==0)return null;const s=o.substr(7).split("|");return{keyMethod:"inline",keySalt:s[0],lifeTime:s[1],mkiValue:s[2]?s[2].split(":")[0]:void 0,mkiLength:s[2]?s[2].split(":")[1]:void 0}},r.writeCryptoKeyParams=function(o){return o.keyMethod+":"+o.keySalt+(o.lifeTime?"|"+o.lifeTime:"")+(o.mkiValue&&o.mkiLength?"|"+o.mkiValue+":"+o.mkiLength:"")},r.getCryptoParameters=function(o,s){return r.matchPrefix(o+s,"a=crypto:").map(r.parseCryptoLine)},r.getIceParameters=function(o,s){const l=r.matchPrefix(o+s,"a=ice-ufrag:")[0],d=r.matchPrefix(o+s,"a=ice-pwd:")[0];return l&&d?{usernameFragment:l.substr(12),password:d.substr(10)}:null},r.writeIceParameters=function(o){let s="a=ice-ufrag:"+o.usernameFragment+`\r
a=ice-pwd:`+o.password+`\r
`;return o.iceLite&&(s+=`a=ice-lite\r
`),s},r.parseRtpParameters=function(o){const s={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},l=r.splitLines(o)[0].split(" ");for(let d=3;d<l.length;d++){const p=l[d],_=r.matchPrefix(o,"a=rtpmap:"+p+" ")[0];if(_){const S=r.parseRtpMap(_),I=r.matchPrefix(o,"a=fmtp:"+p+" ");switch(S.parameters=I.length?r.parseFmtp(I[0]):{},S.rtcpFeedback=r.matchPrefix(o,"a=rtcp-fb:"+p+" ").map(r.parseRtcpFb),s.codecs.push(S),S.name.toUpperCase()){case"RED":case"ULPFEC":s.fecMechanisms.push(S.name.toUpperCase())}}}return r.matchPrefix(o,"a=extmap:").forEach(d=>{s.headerExtensions.push(r.parseExtmap(d))}),s},r.writeRtpDescription=function(o,s){let l="";l+="m="+o+" ",l+=s.codecs.length>0?"9":"0",l+=" UDP/TLS/RTP/SAVPF ",l+=s.codecs.map(p=>p.preferredPayloadType!==void 0?p.preferredPayloadType:p.payloadType).join(" ")+`\r
`,l+=`c=IN IP4 0.0.0.0\r
`,l+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,s.codecs.forEach(p=>{l+=r.writeRtpMap(p),l+=r.writeFmtp(p),l+=r.writeRtcpFb(p)});let d=0;return s.codecs.forEach(p=>{p.maxptime>d&&(d=p.maxptime)}),d>0&&(l+="a=maxptime:"+d+`\r
`),s.headerExtensions&&s.headerExtensions.forEach(p=>{l+=r.writeExtmap(p)}),l},r.parseRtpEncodingParameters=function(o){const s=[],l=r.parseRtpParameters(o),d=l.fecMechanisms.indexOf("RED")!==-1,p=l.fecMechanisms.indexOf("ULPFEC")!==-1,_=r.matchPrefix(o,"a=ssrc:").map(F=>r.parseSsrcMedia(F)).filter(F=>F.attribute==="cname"),S=_.length>0&&_[0].ssrc;let I;const b=r.matchPrefix(o,"a=ssrc-group:FID").map(F=>F.substr(17).split(" ").map(W=>parseInt(W,10)));b.length>0&&b[0].length>1&&b[0][0]===S&&(I=b[0][1]),l.codecs.forEach(F=>{if(F.name.toUpperCase()==="RTX"&&F.parameters.apt){let W={ssrc:S,codecPayloadType:parseInt(F.parameters.apt,10)};S&&I&&(W.rtx={ssrc:I}),s.push(W),d&&(W=JSON.parse(JSON.stringify(W)),W.fec={ssrc:S,mechanism:p?"red+ulpfec":"red"},s.push(W))}}),s.length===0&&S&&s.push({ssrc:S});let A=r.matchPrefix(o,"b=");return A.length&&(A=A[0].indexOf("b=TIAS:")===0?parseInt(A[0].substr(7),10):A[0].indexOf("b=AS:")===0?1e3*parseInt(A[0].substr(5),10)*.95-16e3:void 0,s.forEach(F=>{F.maxBitrate=A})),s},r.parseRtcpParameters=function(o){const s={},l=r.matchPrefix(o,"a=ssrc:").map(_=>r.parseSsrcMedia(_)).filter(_=>_.attribute==="cname")[0];l&&(s.cname=l.value,s.ssrc=l.ssrc);const d=r.matchPrefix(o,"a=rtcp-rsize");s.reducedSize=d.length>0,s.compound=d.length===0;const p=r.matchPrefix(o,"a=rtcp-mux");return s.mux=p.length>0,s},r.writeRtcpParameters=function(o){let s="";return o.reducedSize&&(s+=`a=rtcp-rsize\r
`),o.mux&&(s+=`a=rtcp-mux\r
`),o.ssrc!==void 0&&o.cname&&(s+="a=ssrc:"+o.ssrc+" cname:"+o.cname+`\r
`),s},r.parseMsid=function(o){let s;const l=r.matchPrefix(o,"a=msid:");if(l.length===1)return s=l[0].substr(7).split(" "),{stream:s[0],track:s[1]};const d=r.matchPrefix(o,"a=ssrc:").map(p=>r.parseSsrcMedia(p)).filter(p=>p.attribute==="msid");return d.length>0?(s=d[0].value.split(" "),{stream:s[0],track:s[1]}):void 0},r.parseSctpDescription=function(o){const s=r.parseMLine(o),l=r.matchPrefix(o,"a=max-message-size:");let d;l.length>0&&(d=parseInt(l[0].substr(19),10)),isNaN(d)&&(d=65536);const p=r.matchPrefix(o,"a=sctp-port:");if(p.length>0)return{port:parseInt(p[0].substr(12),10),protocol:s.fmt,maxMessageSize:d};const _=r.matchPrefix(o,"a=sctpmap:");if(_.length>0){const S=_[0].substr(10).split(" ");return{port:parseInt(S[0],10),protocol:S[1],maxMessageSize:d}}},r.writeSctpDescription=function(o,s){let l=[];return l=o.protocol!=="DTLS/SCTP"?["m="+o.kind+" 9 "+o.protocol+" "+s.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+s.port+`\r
`]:["m="+o.kind+" 9 "+o.protocol+" "+s.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+s.port+" "+s.protocol+` 65535\r
`],s.maxMessageSize!==void 0&&l.push("a=max-message-size:"+s.maxMessageSize+`\r
`),l.join("")},r.generateSessionId=function(){return Math.random().toString().substr(2,21)},r.writeSessionBoilerplate=function(o,s,l){let d;const p=s!==void 0?s:2;return d=o||r.generateSessionId(),`v=0\r
o=`+(l||"thisisadapterortc")+" "+d+" "+p+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},r.getDirection=function(o,s){const l=r.splitLines(o);for(let d=0;d<l.length;d++)switch(l[d]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return l[d].substr(2)}return s?r.getDirection(s):"sendrecv"},r.getKind=function(o){return r.splitLines(o)[0].split(" ")[0].substr(2)},r.isRejected=function(o){return o.split(" ",2)[1]==="0"},r.parseMLine=function(o){const s=r.splitLines(o)[0].substr(2).split(" ");return{kind:s[0],port:parseInt(s[1],10),protocol:s[2],fmt:s.slice(3).join(" ")}},r.parseOLine=function(o){const s=r.matchPrefix(o,"o=")[0].substr(2).split(" ");return{username:s[0],sessionId:s[1],sessionVersion:parseInt(s[2],10),netType:s[3],addressType:s[4],address:s[5]}},r.isValidSDP=function(o){if(typeof o!="string"||o.length===0)return!1;const s=r.splitLines(o);for(let l=0;l<s.length;l++)if(s[l].length<2||s[l].charAt(1)!=="=")return!1;return!0},n.exports=r})(pE);var zd=pE.exports,gA=Object.freeze(i({__proto__:null,default:zd},[pE.exports]));function Lm(n){if(!n.RTCIceCandidate||n.RTCIceCandidate&&"foundation"in n.RTCIceCandidate.prototype)return;const r=n.RTCIceCandidate;n.RTCIceCandidate=function(o){if(typeof o=="object"&&o.candidate&&o.candidate.indexOf("a=")===0&&((o=JSON.parse(JSON.stringify(o))).candidate=o.candidate.substr(2)),o.candidate&&o.candidate.length){const s=new r(o),l=zd.parseCandidate(o.candidate),d=Object.assign(s,l);return d.toJSON=function(){return{candidate:d.candidate,sdpMid:d.sdpMid,sdpMLineIndex:d.sdpMLineIndex,usernameFragment:d.usernameFragment}},d}return new r(o)},n.RTCIceCandidate.prototype=r.prototype,Ga(n,"icecandidate",o=>(o.candidate&&Object.defineProperty(o,"candidate",{value:new n.RTCIceCandidate(o.candidate),writable:"false"}),o))}function mE(n){!n.RTCIceCandidate||n.RTCIceCandidate&&"relayProtocol"in n.RTCIceCandidate.prototype||Ga(n,"icecandidate",r=>{if(r.candidate){const o=zd.parseCandidate(r.candidate.candidate);o.type==="relay"&&(r.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[o.priority>>24])}return r})}function km(n,r){if(!n.RTCPeerConnection)return;"sctp"in n.RTCPeerConnection.prototype||Object.defineProperty(n.RTCPeerConnection.prototype,"sctp",{get(){return this._sctp===void 0?null:this._sctp}});const o=function(_){if(!_||!_.sdp)return!1;const S=zd.splitSections(_.sdp);return S.shift(),S.some(I=>{const b=zd.parseMLine(I);return b&&b.kind==="application"&&b.protocol.indexOf("SCTP")!==-1})},s=function(_){const S=_.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(S===null||S.length<2)return-1;const I=parseInt(S[1],10);return I!=I?-1:I},l=function(_){let S=65536;return r.browser==="firefox"&&(S=r.version<57?_===-1?16384:2147483637:r.version<60?r.version===57?65535:65536:2147483637),S},d=function(_,S){let I=65536;r.browser==="firefox"&&r.version===57&&(I=65535);const b=zd.matchPrefix(_.sdp,"a=max-message-size:");return b.length>0?I=parseInt(b[0].substr(19),10):r.browser==="firefox"&&S!==-1&&(I=2147483637),I},p=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,r.browser==="chrome"&&r.version>=76){const{sdpSemantics:_}=this.getConfiguration();_==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return this._sctp===void 0?null:this._sctp},enumerable:!0,configurable:!0})}if(o(arguments[0])){const _=s(arguments[0]),S=l(_),I=d(arguments[0],_);let b;b=S===0&&I===0?Number.POSITIVE_INFINITY:S===0||I===0?Math.max(S,I):Math.min(S,I);const A={};Object.defineProperty(A,"maxMessageSize",{get:()=>b}),this._sctp=A}return p.apply(this,arguments)}}function Mm(n){if(!n.RTCPeerConnection||!("createDataChannel"in n.RTCPeerConnection.prototype))return;function r(s,l){const d=s.send;s.send=function(){const p=arguments[0],_=p.length||p.size||p.byteLength;if(s.readyState==="open"&&l.sctp&&_>l.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+l.sctp.maxMessageSize+" bytes)");return d.apply(s,arguments)}}const o=n.RTCPeerConnection.prototype.createDataChannel;n.RTCPeerConnection.prototype.createDataChannel=function(){const s=o.apply(this,arguments);return r(s,this),s},Ga(n,"datachannel",s=>(r(s.channel,s.target),s))}function gE(n){if(!n.RTCPeerConnection||"connectionState"in n.RTCPeerConnection.prototype)return;const r=n.RTCPeerConnection.prototype;Object.defineProperty(r,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(r,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(o){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),o&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=o)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(o=>{const s=r[o];r[o]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=l=>{const d=l.target;if(d._lastConnectionState!==d.connectionState){d._lastConnectionState=d.connectionState;const p=new Event("connectionstatechange",l);d.dispatchEvent(p)}return l},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),s.apply(this,arguments)}})}function vE(n,r){if(!n.RTCPeerConnection||r.browser==="chrome"&&r.version>=71||r.browser==="safari"&&r.version>=605)return;const o=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(s){if(s&&s.sdp&&s.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const l=s.sdp.split(`
`).filter(d=>el(d).call(d)!=="a=extmap-allow-mixed").join(`
`);n.RTCSessionDescription&&s instanceof n.RTCSessionDescription?arguments[0]=new n.RTCSessionDescription({type:s.type,sdp:l}):s.sdp=l}return o.apply(this,arguments)}}function Kd(n,r){if(!n.RTCPeerConnection||!n.RTCPeerConnection.prototype)return;const o=n.RTCPeerConnection.prototype.addIceCandidate;o&&o.length!==0&&(n.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(r.browser==="chrome"&&r.version<78||r.browser==="firefox"&&r.version<68||r.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Le.resolve():o.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Le.resolve())})}function Um(n,r){if(!n.RTCPeerConnection||!n.RTCPeerConnection.prototype)return;const o=n.RTCPeerConnection.prototype.setLocalDescription;o&&o.length!==0&&(n.RTCPeerConnection.prototype.setLocalDescription=function(){let s=arguments[0]||{};if(typeof s!="object"||s.type&&s.sdp)return o.apply(this,arguments);if(s={type:s.type,sdp:s.sdp},!s.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":s.type="offer";break;default:s.type="answer"}return s.sdp||s.type!=="offer"&&s.type!=="answer"?o.apply(this,[s]):(s.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(d=>o.apply(this,[d]))})}var EE=Object.freeze({__proto__:null,shimRTCIceCandidate:Lm,shimRTCIceCandidateRelayProtocol:mE,shimMaxMessageSize:km,shimSendThrowTypeError:Mm,shimConnectionState:gE,removeExtmapAllowMixed:vE,shimAddIceCandidateNullOrEmpty:Kd,shimParameterlessSetLocalDescription:Um});let Oi,gn;(function(){let{window:n}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0};const o=Lp,s=zl(n),l={browserDetails:s,commonShim:EE,extractVersion:Dp,disableLog:ew,disableWarnings:tw,sdp:gA};switch(s.browser){case"chrome":if(!QC||!sE||!r.shimChrome)return o("Chrome shim is not included in this adapter release."),l;if(s.version===null)return o("Chrome shim can not determine version, not shimming."),l;o("adapter.js shimming chrome."),l.browserShim=QC,Kd(n,s),Um(n),Wo(n,s),fi(n),sE(n,s),KC(n),JC(n,s),Zc(n),qC(n),YC(n),xm(n,s),Lm(n),mE(n),gE(n),km(n,s),Mm(n),vE(n,s);break;case"firefox":if(!iT||!Wd||!r.shimFirefox)return o("Firefox shim is not included in this adapter release."),l;o("adapter.js shimming firefox."),l.browserShim=iT,Kd(n,s),Um(n),dc(n,s),Wd(n,s),cE(n),lE(n),qr(n),oi(n),ZC(n),eT(n),tT(n),nT(n),rT(n),Lm(n),gE(n),km(n,s),Mm(n);break;case"safari":if(!sT||!r.shimSafari)return o("Safari shim is not included in this adapter release."),l;o("adapter.js shimming safari."),l.browserShim=sT,Kd(n,s),Um(n),Of(n),Vu(n),Pm(n),uE(n),Gd(n),la(n),oT(n),aT(n),Lm(n),mE(n),km(n,s),Mm(n),vE(n,s);break;default:o("Unsupported browser!")}})({window:typeof window>"u"?void 0:window}),function(n){n.WIN_10="Windows 10",n.WIN_81="Windows 8.1",n.WIN_8="Windows 8",n.WIN_7="Windows 7",n.WIN_VISTA="Windows Vista",n.WIN_SERVER_2003="Windows Server 2003",n.WIN_XP="Windows XP",n.WIN_2000="Windows 2000",n.ANDROID="Android",n.HARMONY_OS="HarmonyOS",n.OPEN_BSD="Open BSD",n.SUN_OS="Sun OS",n.LINUX="Linux",n.IOS="iOS",n.MAC_OS="Mac OS",n.QNX="QNX",n.UNIX="UNIX",n.BEOS="BeOS",n.OS_2="OS/2",n.SEARCH_BOT="Search Bot"}(Oi||(Oi={})),function(n){n.CHROME="Chrome",n.SAFARI="Safari",n.EDGE="Edge",n.FIREFOX="Firefox",n.OPERA="OPR",n.QQ="QQBrowser",n.WECHAT="MicroMessenger"}(gn||(gn={}));var _E={exports:{}};(function(n,r){(function(o,s){var l="function",d="undefined",p="object",_="string",S="major",I="model",b="name",A="type",F="vendor",W="version",Z="architecture",ee="console",te="mobile",Ee="tablet",ye="smarttv",Pe="wearable",Xe="embedded",ke="Amazon",Ve="Apple",xe="ASUS",$e="BlackBerry",En="Firefox",ct="Google",Bn="Huawei",On="LG",Lr="Microsoft",$i="Motorola",Rr="Opera",_a="Samsung",Ie="Sharp",De="Sony",ze="Xiaomi",yt="Zebra",ln="Facebook",je="Chromium OS",U="Mac OS",ne=function(Er){for(var Wr={},Mn=0;Mn<Er.length;Mn++)Wr[Er[Mn].toUpperCase()]=Er[Mn];return Wr},se=function(Er,Wr){return typeof Er===_&&Oe(Wr).indexOf(Oe(Er))!==-1},Oe=function(Er){return Er.toLowerCase()},Rt=function(Er,Wr){if(typeof Er===_)return Er=Er.replace(/^\s\s*/,""),typeof Wr===d?Er:Er.substring(0,350)},$n=function(Er,Wr){for(var Mn,Ko,pu,_r,sn,Sa,mh=0;mh<Wr.length&&!sn;){var ll=Wr[mh],Xj=Wr[mh+1];for(Mn=Ko=0;Mn<ll.length&&!sn&&ll[Mn];)if(sn=ll[Mn++].exec(Er))for(pu=0;pu<Xj.length;pu++)Sa=sn[++Ko],typeof(_r=Xj[pu])===p&&_r.length>0?_r.length===2?typeof _r[1]==l?this[_r[0]]=_r[1].call(this,Sa):this[_r[0]]=_r[1]:_r.length===3?typeof _r[1]!==l||_r[1].exec&&_r[1].test?this[_r[0]]=Sa?Sa.replace(_r[1],_r[2]):s:this[_r[0]]=Sa?_r[1].call(this,Sa,_r[2]):s:_r.length===4&&(this[_r[0]]=Sa?_r[3].call(this,Sa.replace(_r[1],_r[2])):s):this[_r]=Sa||s;mh+=2}},Hi=function(Er,Wr){for(var Mn in Wr)if(typeof Wr[Mn]===p&&Wr[Mn].length>0){for(var Ko=0;Ko<Wr[Mn].length;Ko++)if(se(Wr[Mn][Ko],Er))return Mn==="?"?s:Mn}else if(se(Wr[Mn],Er))return Mn==="?"?s:Mn;return Er},Tc={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},fh={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[W,[b,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[W,[b,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[b,W],[/opios[\/ ]+([\w\.]+)/i],[W,[b,"Opera Mini"]],[/\bopr\/([\w\.]+)/i],[W,[b,Rr]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[b,W],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[W,[b,"UCBrowser"]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[W,[b,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[W,[b,"WeChat"]],[/konqueror\/([\w\.]+)/i],[W,[b,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[W,[b,"IE"]],[/yabrowser\/([\w\.]+)/i],[W,[b,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[b,/(.+)/,"$1 Secure Browser"],W],[/\bfocus\/([\w\.]+)/i],[W,[b,"Firefox Focus"]],[/\bopt\/([\w\.]+)/i],[W,[b,"Opera Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[W,[b,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[W,[b,"Dolphin"]],[/coast\/([\w\.]+)/i],[W,[b,"Opera Coast"]],[/miuibrowser\/([\w\.]+)/i],[W,[b,"MIUI Browser"]],[/fxios\/([-\w\.]+)/i],[W,[b,En]],[/\bqihu|(qi?ho?o?|360)browser/i],[[b,"360 Browser"]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[b,/(.+)/,"$1 Browser"],W],[/(comodo_dragon)\/([\w\.]+)/i],[[b,/_/g," "],W],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[b,W],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[b],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[b,ln],W],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[b,W],[/\bgsa\/([\w\.]+) .*safari\//i],[W,[b,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[W,[b,"Chrome Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[b,"Chrome WebView"],W],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[W,[b,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[b,W],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[W,[b,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[W,b],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[b,[W,Hi,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[b,W],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[b,"Netscape"],W],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[W,[b,"Firefox Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[b,W],[/(cobalt)\/([\w\.]+)/i],[b,[W,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[Z,"amd64"]],[/(ia32(?=;))/i],[[Z,Oe]],[/((?:i[346]|x)86)[;\)]/i],[[Z,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[Z,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[Z,"armhf"]],[/windows (ce|mobile); ppc;/i],[[Z,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[Z,/ower/,"",Oe]],[/(sun4\w)[;\)]/i],[[Z,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[Z,Oe]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[I,[F,_a],[A,Ee]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[I,[F,_a],[A,te]],[/\((ip(?:hone|od)[\w ]*);/i],[I,[F,Ve],[A,te]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[I,[F,Ve],[A,Ee]],[/(macintosh);/i],[I,[F,Ve]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[I,[F,Ie],[A,te]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[I,[F,Bn],[A,Ee]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[I,[F,Bn],[A,te]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[I,/_/g," "],[F,ze],[A,te]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[I,/_/g," "],[F,ze],[A,Ee]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[I,[F,"OPPO"],[A,te]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[I,[F,"Vivo"],[A,te]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[I,[F,"Realme"],[A,te]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[I,[F,$i],[A,te]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[I,[F,$i],[A,Ee]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[I,[F,On],[A,Ee]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[I,[F,On],[A,te]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[I,[F,"Lenovo"],[A,Ee]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[I,/_/g," "],[F,"Nokia"],[A,te]],[/(pixel c)\b/i],[I,[F,ct],[A,Ee]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[I,[F,ct],[A,te]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[I,[F,De],[A,te]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[I,"Xperia Tablet"],[F,De],[A,Ee]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[I,[F,"OnePlus"],[A,te]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[I,[F,ke],[A,Ee]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[I,/(.+)/g,"Fire Phone $1"],[F,ke],[A,te]],[/(playbook);[-\w\),; ]+(rim)/i],[I,F,[A,Ee]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[I,[F,$e],[A,te]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[I,[F,xe],[A,Ee]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[I,[F,xe],[A,te]],[/(nexus 9)/i],[I,[F,"HTC"],[A,Ee]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[F,[I,/_/g," "],[A,te]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[I,[F,"Acer"],[A,Ee]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[I,[F,"Meizu"],[A,te]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[F,I,[A,te]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[F,I,[A,Ee]],[/(surface duo)/i],[I,[F,Lr],[A,Ee]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[I,[F,"Fairphone"],[A,te]],[/(u304aa)/i],[I,[F,"AT&T"],[A,te]],[/\bsie-(\w*)/i],[I,[F,"Siemens"],[A,te]],[/\b(rct\w+) b/i],[I,[F,"RCA"],[A,Ee]],[/\b(venue[\d ]{2,7}) b/i],[I,[F,"Dell"],[A,Ee]],[/\b(q(?:mv|ta)\w+) b/i],[I,[F,"Verizon"],[A,Ee]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[I,[F,"Barnes & Noble"],[A,Ee]],[/\b(tm\d{3}\w+) b/i],[I,[F,"NuVision"],[A,Ee]],[/\b(k88) b/i],[I,[F,"ZTE"],[A,Ee]],[/\b(nx\d{3}j) b/i],[I,[F,"ZTE"],[A,te]],[/\b(gen\d{3}) b.+49h/i],[I,[F,"Swiss"],[A,te]],[/\b(zur\d{3}) b/i],[I,[F,"Swiss"],[A,Ee]],[/\b((zeki)?tb.*\b) b/i],[I,[F,"Zeki"],[A,Ee]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[F,"Dragon Touch"],I,[A,Ee]],[/\b(ns-?\w{0,9}) b/i],[I,[F,"Insignia"],[A,Ee]],[/\b((nxa|next)-?\w{0,9}) b/i],[I,[F,"NextBook"],[A,Ee]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[F,"Voice"],I,[A,te]],[/\b(lvtel\-)?(v1[12]) b/i],[[F,"LvTel"],I,[A,te]],[/\b(ph-1) /i],[I,[F,"Essential"],[A,te]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[I,[F,"Envizen"],[A,Ee]],[/\b(trio[-\w\. ]+) b/i],[I,[F,"MachSpeed"],[A,Ee]],[/\btu_(1491) b/i],[I,[F,"Rotor"],[A,Ee]],[/(shield[\w ]+) b/i],[I,[F,"Nvidia"],[A,Ee]],[/(sprint) (\w+)/i],[F,I,[A,te]],[/(kin\.[onetw]{3})/i],[[I,/\./g," "],[F,Lr],[A,te]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[I,[F,yt],[A,Ee]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[I,[F,yt],[A,te]],[/smart-tv.+(samsung)/i],[F,[A,ye]],[/hbbtv.+maple;(\d+)/i],[[I,/^/,"SmartTV"],[F,_a],[A,ye]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[F,On],[A,ye]],[/(apple) ?tv/i],[F,[I,"Apple TV"],[A,ye]],[/crkey/i],[[I,"Chromecast"],[F,ct],[A,ye]],[/droid.+aft(\w)( bui|\))/i],[I,[F,ke],[A,ye]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[I,[F,Ie],[A,ye]],[/(bravia[\w ]+)( bui|\))/i],[I,[F,De],[A,ye]],[/(mitv-\w{5}) bui/i],[I,[F,ze],[A,ye]],[/Hbbtv.*(technisat) (.*);/i],[F,I,[A,ye]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[F,Rt],[I,Rt],[A,ye]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[A,ye]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[F,I,[A,ee]],[/droid.+; (shield) bui/i],[I,[F,"Nvidia"],[A,ee]],[/(playstation [345portablevi]+)/i],[I,[F,De],[A,ee]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[I,[F,Lr],[A,ee]],[/((pebble))app/i],[F,I,[A,Pe]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[I,[F,Ve],[A,Pe]],[/droid.+; (glass) \d/i],[I,[F,ct],[A,Pe]],[/droid.+; (wt63?0{2,3})\)/i],[I,[F,yt],[A,Pe]],[/(quest( 2| pro)?)/i],[I,[F,ln],[A,Pe]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[F,[A,Xe]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[I,[A,te]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[I,[A,Ee]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[A,Ee]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[A,te]],[/(android[-\w\. ]{0,9});.+buil/i],[I,[F,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[W,[b,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[W,[b,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[b,W],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[W,b]],os:[[/microsoft (windows) (vista|xp)/i],[b,W],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[b,[W,Hi,Tc]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[b,"Windows"],[W,Hi,Tc]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[W,/_/g,"."],[b,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[b,U],[W,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[W,b],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[b,W],[/\(bb(10);/i],[W,[b,$e]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[W,[b,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[W,[b,"Firefox OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[W,[b,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[W,[b,"watchOS"]],[/crkey\/([\d\.]+)/i],[W,[b,"Chromecast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[b,je],W],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[b,W],[/(sunos) ?([\w\.\d]*)/i],[[b,"Solaris"],W],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[b,W]]},js=function(Er,Wr){if(typeof Er===p&&(Wr=Er,Er=s),!(this instanceof js))return new js(Er,Wr).getResult();var Mn=typeof o!==d&&o.navigator?o.navigator:s,Ko=Er||(Mn&&Mn.userAgent?Mn.userAgent:""),pu=Mn&&Mn.userAgentData?Mn.userAgentData:s,_r=Wr?function(sn,Sa){var mh={};for(var ll in sn)Sa[ll]&&Sa[ll].length%2==0?mh[ll]=Sa[ll].concat(sn[ll]):mh[ll]=sn[ll];return mh}(fh,Wr):fh;return this.getBrowser=function(){var sn={};return sn.name=s,sn.version=s,$n.call(sn,Ko,_r.browser),sn.major=function(Sa){return typeof Sa===_?Sa.replace(/[^\d\.]/g,"").split(".")[0]:s}(sn.version),Mn&&Mn.brave&&typeof Mn.brave.isBrave==l&&(sn.name="Brave"),sn},this.getCPU=function(){var sn={};return sn.architecture=s,$n.call(sn,Ko,_r.cpu),sn},this.getDevice=function(){var sn={};return sn.vendor=s,sn.model=s,sn.type=s,$n.call(sn,Ko,_r.device),!sn.type&&pu&&pu.mobile&&(sn.type=te),sn.model=="Macintosh"&&Mn&&typeof Mn.standalone!==d&&Mn.maxTouchPoints&&Mn.maxTouchPoints>2&&(sn.model="iPad",sn.type=Ee),sn},this.getEngine=function(){var sn={};return sn.name=s,sn.version=s,$n.call(sn,Ko,_r.engine),sn},this.getOS=function(){var sn={};return sn.name=s,sn.version=s,$n.call(sn,Ko,_r.os),!sn.name&&pu&&pu.platform!="Unknown"&&(sn.name=pu.platform.replace(/chrome os/i,je).replace(/macos/i,U)),sn},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return Ko},this.setUA=function(sn){return Ko=typeof sn===_&&sn.length>350?Rt(sn,350):sn,this},this.setUA(Ko),this};js.VERSION="0.7.34",js.BROWSER=ne([b,W,S]),js.CPU=ne([Z]),js.DEVICE=ne([I,F,A,ee,te,ye,Ee,Pe,Xe]),js.ENGINE=js.OS=ne([b,W]),n.exports&&(r=n.exports=js),r.UAParser=js;var ph=typeof o!==d&&(o.jQuery||o.Zepto);if(ph&&!ph.ua){var E0=new js;ph.ua=E0.getResult(),ph.ua.get=function(){return E0.getUA()},ph.ua.set=function(Er){E0.setUA(Er);var Wr=E0.getResult();for(var Mn in Wr)ph.ua[Mn]=Wr[Mn]}}})(typeof window=="object"?window:a)})(_E,_E.exports);const Ai=new _E.exports;let Ao,da,tl=Ai.getResult(),SE=null;function un(n){if(!SE){n&&Ai.setUA(n),tl=Ai.getResult();const r=function(d){if(d.engine.name==="Blink"&&d.browser.name!=="WeChat")return gn.CHROME;switch(d.browser.name){case"Chrome Headless":case"Chrome":case"Chromium":return gn.CHROME;case"Safari":case"Mobile Safari":return gn.SAFARI;case"Edge":return gn.EDGE;case"Firefox":return gn.FIREFOX;case"QQBrowser":return gn.QQ;case"Opera":return gn.OPERA;case"WeChat":return gn.WECHAT;default:return d.browser.name||""}}(tl),o=function(d){let p;return p=d.engine.name==="Blink"?d.engine.version||"":d.browser.version||"",p.split(".")[0]}(tl),s=function(d){switch(d.os.name){case"Windows":return d.os.version?d.os.name+" "+d.os.version:d.os.name;default:return d.os.name||""}}(tl),l=tl.os.version;if(!(r&&o&&s&&l))return{name:r,version:o,os:s,osVersion:l};SE={name:r,version:o,os:s,osVersion:l}}return SE}function hT(){return un().os}function fT(){const n=un();return"".concat(n.os," ").concat(n.osVersion)}function Fm(){const n=un();return!!(tl.engine.name==="WebKit"&&n.os===Oi.MAC_OS&&navigator.maxTouchPoints&&navigator.maxTouchPoints>0&&n.name!==gn.SAFARI||Ui()&&n.name!==gn.SAFARI)}function pT(){const n=un();if(Fm()){if(n.os===Oi.MAC_OS)return!0;if(n.os===Oi.IOS){const r=tl.os.version&&tl.os.version.split(".");if(r&&Number(r[0])===14&&r[1]&&Number(r[1])>=3||r&&Number(r[0])>14)return!0}}return!1}function vA(){return tl.engine.name==="WebKit"}function yE(){return un().name===gn.CHROME}function Yi(){return un().name===gn.SAFARI}function nr(){return un().name===gn.FIREFOX}function Ui(){return un().os===Oi.IOS}function CE(n){const r=un();return!(r.name!==gn.CHROME||!r.osVersion)&&Number(r.version)>=n}function mT(n){const r=un();return!(r.name!==gn.EDGE||!r.osVersion)&&Number(r.version)>=n}function gT(n){const r=un();return!(r.name!==gn.OPERA||!r.osVersion)&&Number(r.version)>=n}function vT(){const n=un();return!(n.name!==gn.CHROME||!n.osVersion)&&Number(n.version)<=90}function ju(){const n=un();if(n.os!==Oi.IOS||!n.osVersion)return!1;const r=n.osVersion.split(".");return Number(r[0])<14||Number(r[0])===14&&Number(r[1])<=6}function qd(){const n=un();if(n.os!==Oi.IOS||!n.osVersion)return!1;const r=n.osVersion.split(".");return Number(r[0])===15}function TE(){const n=un();if(n.os!==Oi.IOS||!n.osVersion)return!1;const r=n.osVersion.split(".");return Number(r[0])===16}function ET(){const n=un();if(n.os!==Oi.IOS||!n.osVersion)return!1;const r=n.osVersion.split(".");return Number(r[0])===15&&Number(r[1])>=1}function hc(){return Yi()&&navigator.maxTouchPoints>0}function _T(){return un().name===gn.WECHAT}function bE(){return window.navigator.appVersion&&window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)!==null&&window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)[1]<=35}function au(){const n=un();return n.name===gn.EDGE||n.name===gn.SAFARI?!1:!!navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]./i)}function Vm(){return hT()===Oi.ANDROID}function Af(){const n=un();return Vm()&&(n.name===gn.CHROME||n.name===gn.WECHAT||/chrome|chromium/i.test(navigator.userAgent))}(function(n){n.L1T1="L1T1",n.L1T2="L1T2",n.L1T3="L1T3",n.L2T1_KEY="L2T1_KEY",n.L2T2_KEY="L2T2_KEY",n.L2T3_KEY="L2T3_KEY",n.L3T1_KEY="L3T1_KEY",n.L3T2_KEY="L3T2_KEY",n.L3T3_KEY="L3T3_KEY"})(Ao||(Ao={})),function(n){n.CERTIFICATE="certificate",n.CODEC="codec",n.CANDIDATE_PAIR="candidate-pair",n.LOCAL_CANDIDATE="local-candidate",n.REMOTE_CANDIDATE="remote-candidate",n.INBOUND="inbound-rtp",n.TRACK="track",n.OUTBOUND="outbound-rtp",n.PC="peer-connection",n.REMOTE_INBOUND="remote-inbound-rtp",n.REMOTE_OUTBOUND="remote-outbound-rtp",n.TRANSPORT="transport",n.CSRC="csrc",n.DATA_CHANNEL="data-channel",n.STREAM="stream",n.SENDER="sender",n.RECEIVER="receiver"}(da||(da={}));var ST={exports:{}},EA=Rn,_A=$,yT=bs.f;EA({target:"Object",stat:!0,forced:Object.defineProperty!==yT,sham:!_A},{defineProperty:yT});var CT=it.Object,SA=ST.exports=function(n,r,o){return CT.defineProperty(n,r,o)};CT.defineProperty.sham&&(SA.sham=!0);var TT=ST.exports;function L(n,r,o){return r in n?TT(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,n}var RE,IE={exports:{}},bT=function(n,r){return function(){for(var o=new Array(arguments.length),s=0;s<o.length;s++)o[s]=arguments[s];return n.apply(r,o)}},yA=bT,wE=Object.prototype.toString,OE=(RE=Object.create(null),function(n){var r=wE.call(n);return RE[r]||(RE[r]=r.slice(8,-1).toLowerCase())});function Bu(n){return n=n.toLowerCase(),function(r){return OE(r)===n}}function AE(n){return Array.isArray(n)}function jm(n){return n===void 0}var RT=Bu("ArrayBuffer");function IT(n){return n!==null&&typeof n=="object"}function Bm(n){if(OE(n)!=="object")return!1;var r=Object.getPrototypeOf(n);return r===null||r===Object.prototype}var CA=Bu("Date"),TA=Bu("File"),bA=Bu("Blob"),NE=Bu("FileList");function $m(n){return wE.call(n)==="[object Function]"}var wT=Bu("URLSearchParams");function xE(n,r){if(n!=null)if(typeof n!="object"&&(n=[n]),AE(n))for(var o=0,s=n.length;o<s;o++)r.call(null,n[o],o,n);else for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&r.call(null,n[l],l,n)}var PE,RA=(PE=typeof Uint8Array<"u"&&Object.getPrototypeOf(Uint8Array),function(n){return PE&&n instanceof PE}),Fi={isArray:AE,isArrayBuffer:RT,isBuffer:function(n){return n!==null&&!jm(n)&&n.constructor!==null&&!jm(n.constructor)&&typeof n.constructor.isBuffer=="function"&&n.constructor.isBuffer(n)},isFormData:function(n){var r="[object FormData]";return n&&(typeof FormData=="function"&&n instanceof FormData||wE.call(n)===r||$m(n.toString)&&n.toString()===r)},isArrayBufferView:function(n){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(n):n&&n.buffer&&RT(n.buffer)},isString:function(n){return typeof n=="string"},isNumber:function(n){return typeof n=="number"},isObject:IT,isPlainObject:Bm,isUndefined:jm,isDate:CA,isFile:TA,isBlob:bA,isFunction:$m,isStream:function(n){return IT(n)&&$m(n.pipe)},isURLSearchParams:wT,isStandardBrowserEnv:function(){return(typeof navigator>"u"||navigator.product!=="ReactNative"&&navigator.product!=="NativeScript"&&navigator.product!=="NS")&&typeof window<"u"&&typeof document<"u"},forEach:xE,merge:function n(){var r={};function o(d,p){Bm(r[p])&&Bm(d)?r[p]=n(r[p],d):Bm(d)?r[p]=n({},d):AE(d)?r[p]=d.slice():r[p]=d}for(var s=0,l=arguments.length;s<l;s++)xE(arguments[s],o);return r},extend:function(n,r,o){return xE(r,function(s,l){n[l]=o&&typeof s=="function"?yA(s,o):s}),n},trim:function(n){return n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")},stripBOM:function(n){return n.charCodeAt(0)===65279&&(n=n.slice(1)),n},inherits:function(n,r,o,s){n.prototype=Object.create(r.prototype,s),n.prototype.constructor=n,o&&Object.assign(n.prototype,o)},toFlatObject:function(n,r,o){var s,l,d,p={};r=r||{};do{for(l=(s=Object.getOwnPropertyNames(n)).length;l-- >0;)p[d=s[l]]||(r[d]=n[d],p[d]=!0);n=Object.getPrototypeOf(n)}while(n&&(!o||o(n,r))&&n!==Object.prototype);return r},kindOf:OE,kindOfTest:Bu,endsWith:function(n,r,o){n=String(n),(o===void 0||o>n.length)&&(o=n.length),o-=r.length;var s=n.indexOf(r,o);return s!==-1&&s===o},toArray:function(n){if(!n)return null;var r=n.length;if(jm(r))return null;for(var o=new Array(r);r-- >0;)o[r]=n[r];return o},isTypedArray:RA,isFileList:NE},Yd=Fi;function OT(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var AT=function(n,r,o){if(!r)return n;var s;if(o)s=o(r);else if(Yd.isURLSearchParams(r))s=r.toString();else{var l=[];Yd.forEach(r,function(p,_){p!=null&&(Yd.isArray(p)?_+="[]":p=[p],Yd.forEach(p,function(S){Yd.isDate(S)?S=S.toISOString():Yd.isObject(S)&&(S=JSON.stringify(S)),l.push(OT(_)+"="+OT(S))}))}),s=l.join("&")}if(s){var d=n.indexOf("#");d!==-1&&(n=n.slice(0,d)),n+=(n.indexOf("?")===-1?"?":"&")+s}return n},ha=Fi;function Xd(){this.handlers=[]}Xd.prototype.use=function(n,r,o){return this.handlers.push({fulfilled:n,rejected:r,synchronous:!!o&&o.synchronous,runWhen:o?o.runWhen:null}),this.handlers.length-1},Xd.prototype.eject=function(n){this.handlers[n]&&(this.handlers[n]=null)},Xd.prototype.forEach=function(n){ha.forEach(this.handlers,function(r){r!==null&&n(r)})};var IA=Xd,wA=Fi,NT=Fi;function Jd(n,r,o,s,l){Error.call(this),this.message=n,this.name="AxiosError",r&&(this.code=r),o&&(this.config=o),s&&(this.request=s),l&&(this.response=l)}NT.inherits(Jd,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var Hm=Jd.prototype,xT={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach(function(n){xT[n]={value:n}}),Object.defineProperties(Jd,xT),Object.defineProperty(Hm,"isAxiosError",{value:!0}),Jd.from=function(n,r,o,s,l,d){var p=Object.create(Hm);return NT.toFlatObject(n,p,function(_){return _!==Error.prototype}),Jd.call(p,n.message,r,o,s,l),p.name=n.name,d&&Object.assign(p,d),p};var su=Jd,PT={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Os=Fi,DT=function(n,r){r=r||new FormData;var o=[];function s(l){return l===null?"":Os.isDate(l)?l.toISOString():Os.isArrayBuffer(l)||Os.isTypedArray(l)?typeof Blob=="function"?new Blob([l]):Buffer.from(l):l}return function l(d,p){if(Os.isPlainObject(d)||Os.isArray(d)){if(o.indexOf(d)!==-1)throw Error("Circular reference detected in "+p);o.push(d),Os.forEach(d,function(_,S){if(!Os.isUndefined(_)){var I,b=p?p+"."+S:S;if(_&&!p&&typeof _=="object"){if(Os.endsWith(S,"{}"))_=JSON.stringify(_);else if(Os.endsWith(S,"[]")&&(I=Os.toArray(_)))return void I.forEach(function(A){!Os.isUndefined(A)&&r.append(b,s(A))})}l(_,b)}}),o.pop()}else r.append(p,s(d))}(n),r},DE=su,Nf=Fi,OA=Nf.isStandardBrowserEnv()?{write:function(n,r,o,s,l,d){var p=[];p.push(n+"="+encodeURIComponent(r)),Nf.isNumber(o)&&p.push("expires="+new Date(o).toGMTString()),Nf.isString(s)&&p.push("path="+s),Nf.isString(l)&&p.push("domain="+l),d===!0&&p.push("secure"),document.cookie=p.join("; ")},read:function(n){var r=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},AA=function(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)},NA=function(n,r){return r?n.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):n},Wm=function(n,r){return n&&!AA(r)?NA(n,r):r},xf=Fi,xA=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],LT=Fi,PA=LT.isStandardBrowserEnv()?function(){var n,r=/(msie|trident)/i.test(navigator.userAgent),o=document.createElement("a");function s(l){var d=l;return r&&(o.setAttribute("href",d),d=o.href),o.setAttribute("href",d),{href:o.href,protocol:o.protocol?o.protocol.replace(/:$/,""):"",host:o.host,search:o.search?o.search.replace(/^\?/,""):"",hash:o.hash?o.hash.replace(/^#/,""):"",hostname:o.hostname,port:o.port,pathname:o.pathname.charAt(0)==="/"?o.pathname:"/"+o.pathname}}return n=s(window.location.href),function(l){var d=LT.isString(l)?s(l):l;return d.protocol===n.protocol&&d.host===n.host}}():function(){return!0},LE=su;function kT(n){LE.call(this,n??"canceled",LE.ERR_CANCELED),this.name="CanceledError"}Fi.inherits(kT,LE,{__CANCEL__:!0});var Gm=kT,Pf=Fi,DA=function(n,r,o){var s=o.config.validateStatus;o.status&&s&&!s(o.status)?r(new DE("Request failed with status code "+o.status,[DE.ERR_BAD_REQUEST,DE.ERR_BAD_RESPONSE][Math.floor(o.status/100)-4],o.config,o.request,o)):n(o)},LA=OA,kA=AT,MA=Wm,UA=function(n){var r,o,s,l={};return n&&xf.forEach(n.split(`
`),function(d){if(s=d.indexOf(":"),r=xf.trim(d.substr(0,s)).toLowerCase(),o=xf.trim(d.substr(s+1)),r){if(l[r]&&xA.indexOf(r)>=0)return;l[r]=r==="set-cookie"?(l[r]?l[r]:[]).concat([o]):l[r]?l[r]+", "+o:o}}),l},FA=PA,VA=PT,nl=su,jA=Gm,BA=function(n){var r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return r&&r[1]||""},$A=function(n){return new Promise(function(r,o){var s,l=n.data,d=n.headers,p=n.responseType;function _(){n.cancelToken&&n.cancelToken.unsubscribe(s),n.signal&&n.signal.removeEventListener("abort",s)}Pf.isFormData(l)&&Pf.isStandardBrowserEnv()&&delete d["Content-Type"];var S=new XMLHttpRequest;if(n.auth){var I=n.auth.username||"",b=n.auth.password?unescape(encodeURIComponent(n.auth.password)):"";d.Authorization="Basic "+btoa(I+":"+b)}var A=MA(n.baseURL,n.url);function F(){if(S){var ee="getAllResponseHeaders"in S?UA(S.getAllResponseHeaders()):null,te={data:p&&p!=="text"&&p!=="json"?S.response:S.responseText,status:S.status,statusText:S.statusText,headers:ee,config:n,request:S};DA(function(Ee){r(Ee),_()},function(Ee){o(Ee),_()},te),S=null}}if(S.open(n.method.toUpperCase(),kA(A,n.params,n.paramsSerializer),!0),S.timeout=n.timeout,"onloadend"in S?S.onloadend=F:S.onreadystatechange=function(){S&&S.readyState===4&&(S.status!==0||S.responseURL&&S.responseURL.indexOf("file:")===0)&&setTimeout(F)},S.onabort=function(){S&&(o(new nl("Request aborted",nl.ECONNABORTED,n,S)),S=null)},S.onerror=function(){o(new nl("Network Error",nl.ERR_NETWORK,n,S,S)),S=null},S.ontimeout=function(){var ee=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded",te=n.transitional||VA;n.timeoutErrorMessage&&(ee=n.timeoutErrorMessage),o(new nl(ee,te.clarifyTimeoutError?nl.ETIMEDOUT:nl.ECONNABORTED,n,S)),S=null},Pf.isStandardBrowserEnv()){var W=(n.withCredentials||FA(A))&&n.xsrfCookieName?LA.read(n.xsrfCookieName):void 0;W&&(d[n.xsrfHeaderName]=W)}"setRequestHeader"in S&&Pf.forEach(d,function(ee,te){l===void 0&&te.toLowerCase()==="content-type"?delete d[te]:S.setRequestHeader(te,ee)}),Pf.isUndefined(n.withCredentials)||(S.withCredentials=!!n.withCredentials),p&&p!=="json"&&(S.responseType=n.responseType),typeof n.onDownloadProgress=="function"&&S.addEventListener("progress",n.onDownloadProgress),typeof n.onUploadProgress=="function"&&S.upload&&S.upload.addEventListener("progress",n.onUploadProgress),(n.cancelToken||n.signal)&&(s=function(ee){S&&(o(!ee||ee&&ee.type?new jA:ee),S.abort(),S=null)},n.cancelToken&&n.cancelToken.subscribe(s),n.signal&&(n.signal.aborted?s():n.signal.addEventListener("abort",s))),l||(l=null);var Z=BA(A);Z&&["http","https","file"].indexOf(Z)===-1?o(new nl("Unsupported protocol "+Z+":",nl.ERR_BAD_REQUEST,n)):S.send(l)})},Xi=Fi,MT=function(n,r){wA.forEach(n,function(o,s){s!==r&&s.toUpperCase()===r.toUpperCase()&&(n[r]=o,delete n[s])})},UT=su,h=DT,v={"Content-Type":"application/x-www-form-urlencoded"};function w(n,r){!Xi.isUndefined(n)&&Xi.isUndefined(n["Content-Type"])&&(n["Content-Type"]=r)}var B,X={transitional:PT,adapter:((typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(B=$A),B),transformRequest:[function(n,r){if(MT(r,"Accept"),MT(r,"Content-Type"),Xi.isFormData(n)||Xi.isArrayBuffer(n)||Xi.isBuffer(n)||Xi.isStream(n)||Xi.isFile(n)||Xi.isBlob(n))return n;if(Xi.isArrayBufferView(n))return n.buffer;if(Xi.isURLSearchParams(n))return w(r,"application/x-www-form-urlencoded;charset=utf-8"),n.toString();var o,s=Xi.isObject(n),l=r&&r["Content-Type"];if((o=Xi.isFileList(n))||s&&l==="multipart/form-data"){var d=this.env&&this.env.FormData;return h(o?{"files[]":n}:n,d&&new d)}return s||l==="application/json"?(w(r,"application/json"),function(p,_,S){if(Xi.isString(p))try{return(_||JSON.parse)(p),Xi.trim(p)}catch(I){if(I.name!=="SyntaxError")throw I}return(S||JSON.stringify)(p)}(n)):n}],transformResponse:[function(n){var r=this.transitional||X.transitional,o=r&&r.silentJSONParsing,s=r&&r.forcedJSONParsing,l=!o&&this.responseType==="json";if(l||s&&Xi.isString(n)&&n.length)try{return JSON.parse(n)}catch(d){if(l)throw d.name==="SyntaxError"?UT.from(d,UT.ERR_BAD_RESPONSE,this,null,this.response):d}return n}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:null},validateStatus:function(n){return n>=200&&n<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Xi.forEach(["delete","get","head"],function(n){X.headers[n]={}}),Xi.forEach(["post","put","patch"],function(n){X.headers[n]=Xi.merge(v)});var ce=X,me=Fi,Te=ce,we=function(n){return!(!n||!n.__CANCEL__)},He=Fi,We=function(n,r,o){var s=this||Te;return me.forEach(o,function(l){n=l.call(s,n,r)}),n},Ke=we,pt=ce,xt=Gm;function Ht(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new xt}var Wt=Fi,qt=function(n,r){r=r||{};var o={};function s(I,b){return Wt.isPlainObject(I)&&Wt.isPlainObject(b)?Wt.merge(I,b):Wt.isPlainObject(b)?Wt.merge({},b):Wt.isArray(b)?b.slice():b}function l(I){return Wt.isUndefined(r[I])?Wt.isUndefined(n[I])?void 0:s(void 0,n[I]):s(n[I],r[I])}function d(I){if(!Wt.isUndefined(r[I]))return s(void 0,r[I])}function p(I){return Wt.isUndefined(r[I])?Wt.isUndefined(n[I])?void 0:s(void 0,n[I]):s(void 0,r[I])}function _(I){return I in r?s(n[I],r[I]):I in n?s(void 0,n[I]):void 0}var S={url:d,method:d,data:d,baseURL:p,transformRequest:p,transformResponse:p,paramsSerializer:p,timeout:p,timeoutMessage:p,withCredentials:p,adapter:p,responseType:p,xsrfCookieName:p,xsrfHeaderName:p,onUploadProgress:p,onDownloadProgress:p,decompress:p,maxContentLength:p,maxBodyLength:p,beforeRedirect:p,transport:p,httpAgent:p,httpsAgent:p,cancelToken:p,socketPath:p,responseEncoding:p,validateStatus:_};return Wt.forEach(Object.keys(n).concat(Object.keys(r)),function(I){var b=S[I]||l,A=b(I);Wt.isUndefined(A)&&b!==_||(o[I]=A)}),o},An="0.27.2",Fn=An,Ni=su,go={};["object","boolean","number","function","string","symbol"].forEach(function(n,r){go[n]=function(o){return typeof o===n||"a"+(r<1?"n ":" ")+n}});var fa={};go.transitional=function(n,r,o){function s(l,d){return"[Axios v"+Fn+"] Transitional option '"+l+"'"+d+(o?". "+o:"")}return function(l,d,p){if(n===!1)throw new Ni(s(d," has been removed"+(r?" in "+r:"")),Ni.ERR_DEPRECATED);return r&&!fa[d]&&(fa[d]=!0,console.warn(s(d," has been deprecated since v"+r+" and will be removed in the near future"))),!n||n(l,d,p)}};var pi=Fi,As=AT,fc=IA,kE=function(n){return Ht(n),n.headers=n.headers||{},n.data=We.call(n,n.data,n.headers,n.transformRequest),n.headers=He.merge(n.headers.common||{},n.headers[n.method]||{},n.headers),He.forEach(["delete","get","head","post","put","patch","common"],function(r){delete n.headers[r]}),(n.adapter||pt.adapter)(n).then(function(r){return Ht(n),r.data=We.call(n,r.data,r.headers,n.transformResponse),r},function(r){return Ke(r)||(Ht(n),r&&r.response&&(r.response.data=We.call(n,r.response.data,r.response.headers,n.transformResponse))),Promise.reject(r)})},FT=qt,TK=Wm,VM={assertOptions:function(n,r,o){if(typeof n!="object")throw new Ni("options must be an object",Ni.ERR_BAD_OPTION_VALUE);for(var s=Object.keys(n),l=s.length;l-- >0;){var d=s[l],p=r[d];if(p){var _=n[d],S=_===void 0||p(_,d,n);if(S!==!0)throw new Ni("option "+d+" must be "+S,Ni.ERR_BAD_OPTION_VALUE)}else if(o!==!0)throw new Ni("Unknown option "+d,Ni.ERR_BAD_OPTION)}},validators:go},zm=VM.validators;function Km(n){this.defaults=n,this.interceptors={request:new fc,response:new fc}}Km.prototype.request=function(n,r){typeof n=="string"?(r=r||{}).url=n:r=n||{},(r=FT(this.defaults,r)).method?r.method=r.method.toLowerCase():this.defaults.method?r.method=this.defaults.method.toLowerCase():r.method="get";var o=r.transitional;o!==void 0&&VM.assertOptions(o,{silentJSONParsing:zm.transitional(zm.boolean),forcedJSONParsing:zm.transitional(zm.boolean),clarifyTimeoutError:zm.transitional(zm.boolean)},!1);var s=[],l=!0;this.interceptors.request.forEach(function(A){typeof A.runWhen=="function"&&A.runWhen(r)===!1||(l=l&&A.synchronous,s.unshift(A.fulfilled,A.rejected))});var d,p=[];if(this.interceptors.response.forEach(function(A){p.push(A.fulfilled,A.rejected)}),!l){var _=[kE,void 0];for(Array.prototype.unshift.apply(_,s),_=_.concat(p),d=Promise.resolve(r);_.length;)d=d.then(_.shift(),_.shift());return d}for(var S=r;s.length;){var I=s.shift(),b=s.shift();try{S=I(S)}catch(A){b(A);break}}try{d=kE(S)}catch(A){return Promise.reject(A)}for(;p.length;)d=d.then(p.shift(),p.shift());return d},Km.prototype.getUri=function(n){n=FT(this.defaults,n);var r=TK(n.baseURL,n.url);return As(r,n.params,n.paramsSerializer)},pi.forEach(["delete","get","head","options"],function(n){Km.prototype[n]=function(r,o){return this.request(FT(o||{},{method:n,url:r,data:(o||{}).data}))}}),pi.forEach(["post","put","patch"],function(n){function r(o){return function(s,l,d){return this.request(FT(d||{},{method:n,headers:o?{"Content-Type":"multipart/form-data"}:{},url:s,data:l}))}}Km.prototype[n]=r(),Km.prototype[n+"Form"]=r(!0)});var bK=Km,RK=Gm;function qm(n){if(typeof n!="function")throw new TypeError("executor must be a function.");var r;this.promise=new Promise(function(s){r=s});var o=this;this.promise.then(function(s){if(o._listeners){var l,d=o._listeners.length;for(l=0;l<d;l++)o._listeners[l](s);o._listeners=null}}),this.promise.then=function(s){var l,d=new Promise(function(p){o.subscribe(p),l=p}).then(s);return d.cancel=function(){o.unsubscribe(l)},d},n(function(s){o.reason||(o.reason=new RK(s),r(o.reason))})}qm.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},qm.prototype.subscribe=function(n){this.reason?n(this.reason):this._listeners?this._listeners.push(n):this._listeners=[n]},qm.prototype.unsubscribe=function(n){if(this._listeners){var r=this._listeners.indexOf(n);r!==-1&&this._listeners.splice(r,1)}},qm.source=function(){var n;return{token:new qm(function(r){n=r}),cancel:n}};var IK=qm,wK=Fi,jM=Fi,OK=bT,VT=bK,AK=qt,ts=function n(r){var o=new VT(r),s=OK(VT.prototype.request,o);return jM.extend(s,VT.prototype,o),jM.extend(s,o),s.create=function(l){return n(AK(r,l))},s}(ce);ts.Axios=VT,ts.CanceledError=Gm,ts.CancelToken=IK,ts.isCancel=we,ts.VERSION=An,ts.toFormData=DT,ts.AxiosError=su,ts.Cancel=ts.CanceledError,ts.all=function(n){return Promise.all(n)},ts.spread=function(n){return function(r){return n.apply(null,r)}},ts.isAxiosError=function(n){return wK.isObject(n)&&n.isAxiosError===!0},IE.exports=ts,IE.exports.default=ts;var ns=IE.exports;class NK{constructor(r){L(this,"logger",void 0),L(this,"prefixLists",[]),this.logger=r}debug(){for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];this.logger.debug(...this.prefixLists,...o)}info(){for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];this.logger.info(...this.prefixLists,...o)}warning(){for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];this.logger.warning(...this.prefixLists,...o)}error(){for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];this.logger.error(...this.prefixLists,...o)}prefix(r){return this.prefixLists.push(r),this}popPrefix(){return this.prefixLists.pop(),this}}class ur{constructor(){L(this,"_events",{}),L(this,"addListener",this.on)}getListeners(r){return this._events[r]?this._events[r].map(o=>o.listener):[]}on(r,o){this._events[r]||(this._events[r]=[]);const s=this._events[r];this._indexOfListener(s,o)===-1&&s.push({listener:o,once:!1})}once(r,o){this._events[r]||(this._events[r]=[]);const s=this._events[r];this._indexOfListener(s,o)===-1&&s.push({listener:o,once:!0})}off(r,o){if(!this._events[r])return;const s=this._events[r],l=this._indexOfListener(s,o);l!==-1&&s.splice(l,1),this._events[r].length===0&&delete this._events[r]}removeAllListeners(r){r?delete this._events[r]:this._events={}}emit(r){this._events[r]||(this._events[r]=[]);const o=this._events[r].map(p=>p);for(var s=arguments.length,l=new Array(s>1?s-1:0),d=1;d<s;d++)l[d-1]=arguments[d];for(let p=0;p<o.length;p+=1){const _=o[p];_.once&&this.off(r,_.listener),_.listener.apply(this,l||[])}}safeEmit(r){for(var o=arguments.length,s=new Array(o>1?o-1:0),l=1;l<o;l++)s[l-1]=arguments[l];[...this._events[r]||[]].forEach(d=>{d.once&&this.off(r,d.listener);try{d.listener.apply(this,s)}catch(p){j.error("safeEmit event:".concat(r," error ").concat(p==null?void 0:p.toString()))}})}_indexOfListener(r,o){let s=r.length;for(;s--;)if(r[s].listener===o)return s;return-1}}const jT=new class extends ur{reportLogUploadError(n){this.emit("REPORT_LOG_UPLOAD",n)}};let q;(function(n){n.UNEXPECTED_ERROR="UNEXPECTED_ERROR",n.UNEXPECTED_RESPONSE="UNEXPECTED_RESPONSE",n.TIMEOUT="TIMEOUT",n.INVALID_PARAMS="INVALID_PARAMS",n.NOT_READABLE="NOT_READABLE",n.NOT_SUPPORTED="NOT_SUPPORTED",n.INVALID_OPERATION="INVALID_OPERATION",n.OPERATION_ABORTED="OPERATION_ABORTED",n.WEB_SECURITY_RESTRICT="WEB_SECURITY_RESTRICT",n.EXCHANGE_SDP_FAILED="EXCHANGE_SDP_FAILED",n.NETWORK_ERROR="NETWORK_ERROR",n.NETWORK_TIMEOUT="NETWORK_TIMEOUT",n.NETWORK_RESPONSE_ERROR="NETWORK_RESPONSE_ERROR",n.API_INVOKE_TIMEOUT="API_INVOKE_TIMEOUT",n.ENUMERATE_DEVICES_FAILED="ENUMERATE_DEVICES_FAILED",n.DEVICE_NOT_FOUND="DEVICE_NOT_FOUND",n.ELECTRON_IS_NULL="ELECTRON_IS_NULL",n.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR="ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR",n.CHROME_PLUGIN_NO_RESPONSE="CHROME_PLUGIN_NO_RESPONSE",n.CHROME_PLUGIN_NOT_INSTALL="CHROME_PLUGIN_NOT_INSTALL",n.MEDIA_OPTION_INVALID="MEDIA_OPTION_INVALID",n.PERMISSION_DENIED="PERMISSION_DENIED",n.CONSTRAINT_NOT_SATISFIED="CONSTRAINT_NOT_SATISFIED",n.TRACK_IS_DISABLED="TRACK_IS_DISABLED",n.GET_VIDEO_ELEMENT_VISIBLE_ERROR="GET_VIDEO_ELEMENT_VISIBLE_ERROR",n.SHARE_AUDIO_NOT_ALLOWED="SHARE_AUDIO_NOT_ALLOWED",n.LOW_STREAM_ENCODING_ERROR="LOW_STREAM_ENCODING_ERROR",n.SET_ENCODING_PARAMETER_ERROR="SET_ENCODING_PARAMETER_ERROR",n.TRACK_STATE_UNREACHABLE="TRACK_STATE_UNREACHABLE",n.INVALID_UINT_UID_FROM_STRING_UID="INVALID_UINT_UID_FROM_STRING_UID",n.CAN_NOT_GET_PROXY_SERVER="CAN_NOT_GET_PROXY_SERVER",n.CAN_NOT_GET_GATEWAY_SERVER="CAN_NOT_GET_GATEWAY_SERVER",n.VOID_GATEWAY_ADDRESS="VOID_GATEWAY_ADDRESS",n.UID_CONFLICT="UID_CONFLICT",n.MULTI_UNILBS_RESPONSE_ERROR="MULTI_UNILBS_RESPONSE_ERROR",n.UPDATE_TICKET_FAILED="UPDATE_TICKET_FAILED",n.INVALID_LOCAL_TRACK="INVALID_LOCAL_TRACK",n.INVALID_TRACK="INVALID_TRACK",n.SENDER_NOT_FOUND="SENDER_NOT_FOUND",n.CREATE_OFFER_FAILED="CREATE_OFFER_FAILED",n.SET_ANSWER_FAILED="SET_ANSWER_FAILED",n.ICE_FAILED="ICE_FAILED",n.PC_CLOSED="PC_CLOSED",n.SENDER_REPLACE_FAILED="SENDER_REPLACE_FAILED",n.GET_LOCAL_CAPABILITIES_FAILED="GET_LOCAL_CAPABILITIES_FAILED",n.GET_LOCAL_CONNECTION_PARAMS_FAILED="GET_LOCAL_CONNECTION_PARAMS_FAILED",n.SUBSCRIBE_FAILED="SUBSCRIBE_FAILED",n.UNSUBSCRIBE_FAILED="UNSUBSCRIBE_FAILED",n.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",n.NO_ICE_CANDIDATE="NO_ICE_CANDIDATE",n.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS="CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS",n.EXIST_DISABLED_VIDEO_TRACK="EXIST_DISABLED_VIDEO_TRACK",n.INVALID_REMOTE_USER="INVALID_REMOTE_USER",n.REMOTE_USER_IS_NOT_PUBLISHED="REMOTE_USER_IS_NOT_PUBLISHED",n.CUSTOM_REPORT_SEND_FAILED="CUSTOM_REPORT_SEND_FAILED",n.CUSTOM_REPORT_FREQUENCY_TOO_HIGH="CUSTOM_REPORT_FREQUENCY_TOO_HIGH",n.FETCH_AUDIO_FILE_FAILED="FETCH_AUDIO_FILE_FAILED",n.READ_LOCAL_AUDIO_FILE_ERROR="READ_LOCAL_AUDIO_FILE_ERROR",n.DECODE_AUDIO_FILE_FAILED="DECODE_AUDIO_FILE_FAILED",n.WS_ABORT="WS_ABORT",n.WS_DISCONNECT="WS_DISCONNECT",n.WS_ERR="WS_ERR",n.LIVE_STREAMING_TASK_CONFLICT="LIVE_STREAMING_TASK_CONFLICT",n.LIVE_STREAMING_INVALID_ARGUMENT="LIVE_STREAMING_INVALID_ARGUMENT",n.LIVE_STREAMING_INTERNAL_SERVER_ERROR="LIVE_STREAMING_INTERNAL_SERVER_ERROR",n.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED="LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED",n.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED="LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED",n.LIVE_STREAMING_CDN_ERROR="LIVE_STREAMING_CDN_ERROR",n.LIVE_STREAMING_INVALID_RAW_STREAM="LIVE_STREAMING_INVALID_RAW_STREAM",n.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT="LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT",n.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE="LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE",n.LIVE_STREAMING_WARN_FREQUENT_REQUEST="LIVE_STREAMING_WARN_FREQUENT_REQUEST",n.WEBGL_INTERNAL_ERROR="WEBGL_INTERNAL_ERROR",n.BEAUTY_PROCESSOR_INTERNAL_ERROR="BEAUTY_PROCESSOR_INTERNAL_ERROR",n.CROSS_CHANNEL_WAIT_STATUS_ERROR="CROSS_CHANNEL_WAIT_STATUS_ERROR",n.CROSS_CHANNEL_FAILED_JOIN_SRC="CROSS_CHANNEL_FAILED_JOIN_SEC",n.CROSS_CHANNEL_FAILED_JOIN_DEST="CROSS_CHANNEL_FAILED_JOIN_DEST",n.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST="CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST",n.CROSS_CHANNEL_SERVER_ERROR_RESPONSE="CROSS_CHANNEL_SERVER_ERROR_RESPONSE",n.METADATA_OUT_OF_RANGE="METADATA_OUT_OF_RANGE",n.LOCAL_AEC_ERROR="LOCAL_AEC_ERROR",n.INVALID_PLUGIN="INVALID_PLUGIN",n.DISCONNECT_P2P="DISCONNECT_P2P",n.INIT_WEBSOCKET_TIMEOUT="INIT_WEBSOCKET_TIMEOUT",n.CONVERTING_IMAGEDATA_TO_BLOB_FAILED="CONVERTING_IMAGEDATA_TO_BLOB_FAILED",n.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED="CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED",n.INIT_DATACHANNEL_TIMEOUT="INIT_DATACHANNEL_TIMEOUT",n.DATACHANNEL_CONNECTION_TIMEOUT="DATACHANNEL_CONNECTION_TIMEOUT",n.PROHIBITED_OPERATION="PROHIBITED_OPERATION",n.IMAGE_MODERATION_UPLOAD_FAILED="IMAGE_MODERATION_UPLOAD_FAILED"})(q||(q={}));class re extends Error{constructor(r){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",s=arguments.length>2?arguments[2]:void 0;super(o),L(this,"code",void 0),L(this,"message",void 0),L(this,"data",void 0),L(this,"name","AgoraRTCException"),this.code=r,this.message="AgoraRTCError ".concat(this.code,": ").concat(o),this.data=s}toString(){return this.data?"data: ".concat(JSON.stringify(this.data),`
`).concat(this.stack):"".concat(this.stack)}print(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"error";return r==="error"&&j.error(this.toString()),r==="warning"&&j.warning(this.toString()),this}throw(){throw this.print(),this}}const Ur={timeout:500,timeoutFactor:1.5,maxRetryCount:1/0,maxRetryTimeout:1e4};function HA(n,r){const o=Math.floor(r.timeout*Math.pow(r.timeoutFactor,n));return Math.min(r.maxRetryTimeout,o)}function rl(n,r,o,s){const l=Object.assign({},Ur,s);let d=l.timeout;const p=async()=>{await function(I){return new Le(b=>{window.setTimeout(b,I)})}(d),d*=l.timeoutFactor,d=Math.min(l.maxRetryTimeout,d)};let _=!1;const S=new Le(async(I,b)=>{r=r||(()=>!1),o=o||(()=>!0);for(let A=0;A<l.maxRetryCount;A+=1){if(_)return b(new re(q.OPERATION_ABORTED));try{const F=await n();if(!r(F,A)||A+1===l.maxRetryCount)return I(F);await p()}catch(F){if(!o(F,A)||A+1===l.maxRetryCount)return b(F);await p()}}});return S.cancel=()=>_=!0,S}function WA(){const n=new Date;return n.toTimeString().split(" ")[0]+":"+n.getMilliseconds()}function BM(){const n=new Date,r=/((\d+:){2}\d+)/.exec(new Date().toUTCString());return r?(r==null?void 0:r[0])+":"+n.getUTCMilliseconds():n.toTimeString().split(" ")[0]+":"+n.getMilliseconds()}const Ns={DEBUG:0,INFO:1,WARNING:2,ERROR:3,NONE:4},BT=Date.now(),ME=n=>{for(const r in Ns)if(Object.prototype.hasOwnProperty.call(Ns,r)&&Ns[r]===n)return r;return"DEFAULT"},j=new class{constructor(){L(this,"proxyServerURL",void 0),L(this,"logLevel",Ns.DEBUG),L(this,"uploadState","collecting"),L(this,"uploadLogWaitingList",[]),L(this,"uploadLogUploadingList",[]),L(this,"uploadErrorCount",0),L(this,"currentLogID",0),L(this,"url",void 0),L(this,"extLog",(n,r)=>{this.appendLogToWaitingList(n,...r)})}debug(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];const s=[Ns.DEBUG].concat(r);this.log.apply(this,s)}info(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];const s=[Ns.INFO].concat(r);this.log.apply(this,s)}warning(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];const s=[Ns.WARNING].concat(r);this.log.apply(this,s)}error(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];const s=[Ns.ERROR].concat(r);this.log.apply(this,s)}upload(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];const s=[Ns.DEBUG].concat(r);this.uploadLog.apply(this,s)}setLogLevel(n){n=Math.min(Math.max(0,n),4),this.logLevel=n}enableLogUpload(){Dn("UPLOAD_LOG",!0)}disableLogUpload(){Dn("UPLOAD_LOG",!1),this.uploadLogUploadingList=[],this.uploadLogWaitingList=[]}setProxyServer(n){this.proxyServerURL=n}prefix(n){return new NK(this).prefix(n)}log(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];if(Date.now()-BT<100)return void setTimeout(()=>{this.log(...r)},Date.now()-BT);const s=Math.max(0,Math.min(4,r[0]));if(r[0]=WA()+" Agora-SDK [".concat(ME(s),"]:"),this.appendLogToWaitingList(s,...r),s<this.logLevel)return;const l=WA()+" %cAgora-SDK [".concat(ME(s),"]:");let d=[];if(!de("USE_NEW_LOG"))switch(s){case Ns.DEBUG:d=[l,"color: #64B5F6;"].concat(r.slice(1)),console.log.apply(console,d);break;case Ns.INFO:d=[l,"color: #1E88E5; font-weight: bold;"].concat(r.slice(1)),console.log.apply(console,d);break;case Ns.WARNING:d=[l,"color: #FB8C00; font-weight: bold;"].concat(r.slice(1)),console.warn.apply(console,d);break;case Ns.ERROR:d=[l,"color: #B00020; font-weight: bold;"].concat(r.slice(1)),console.error.apply(console,d)}}uploadLog(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];if(Date.now()-BT<100)return void setTimeout(()=>{this.uploadLog(...r)},Date.now()-BT);const s=Math.max(0,Math.min(4,r[0]));r[0]=WA()+" Agora-SDK [".concat(ME(s),"]:"),this.appendLogToWaitingList(s,...r)}appendLogToWaitingList(n){if(!de("UPLOAD_LOG"))return;for(var r=arguments.length,o=new Array(r>1?r-1:0),s=1;s<r;s++)o[s-1]=arguments[s];Array.isArray(o[0])?o[0][0]=BM()+" Agora-SDK [".concat(ME(n),"]:"):o[0]=BM()+" Agora-SDK [".concat(ME(n),"]:");let l="";o.forEach(d=>{typeof d=="object"&&(d=JSON.stringify(d)),l+="".concat(d," ")}),this.uploadLogWaitingList.push({payload_str:l,log_level:n,log_item_id:this.currentLogID++}),this.uploadState==="uploading"&&this.uploadLogUploadingList.length===0&&this.uploadLogInterval()}startUpload(){this.uploadState="uploading",this.uploadLogUploadingList.length===0&&this.uploadLogInterval()}async uploadLogs(){const n=this.uploadLogUploadingList,r={sdk_version:xs,process_id:de("PROCESS_ID"),payload:JSON.stringify(n)};return rl(async()=>{const o=await ns.post(this.url||(this.proxyServerURL?"https://".concat(this.proxyServerURL,"/ls/?h=").concat(de("LOG_UPLOAD_SERVER"),"&p=443&d=upload/v1"):"https://".concat(de("LOG_UPLOAD_SERVER"),"/upload/v1")),r,{responseType:"text"});if(o.data!=="OK"){const s=new Error("unexpected upload log response");throw s.response=o,s}},()=>(this.uploadLogUploadingList=[],!1),o=>(o.response?jT.reportLogUploadError({status:o.response.status,data:o.response.data,headers:o.response.headers,message:o.message}):o.request?jT.reportLogUploadError({status:o.request.status,message:o.message}):jT.reportLogUploadError({status:-1,message:o.message}),!0),{timeout:de("UPLOAD_LOG_REQUEST_RETRY_INTERVAL"),maxRetryTimeout:de("UPLOAD_LOG_REQUEST_MAX_RETRY_INTERVAL")})}uploadLogInterval(){this.uploadLogUploadingList.length===0&&this.uploadLogWaitingList.length===0||(this.uploadLogUploadingList.length===0&&(this.uploadLogUploadingList=this.uploadLogWaitingList.splice(0,de("UPLOAD_LOG_LENGTH_EACH_TIME"))),this.uploadLogs().then(()=>{this.uploadErrorCount=0,this.uploadLogWaitingList.length>0&&window.setTimeout(()=>this.uploadLogInterval(),de("UPLOAD_LOG_INTERVAL"))}).catch(n=>{this.uploadErrorCount+=1,this.uploadErrorCount<2?window.setTimeout(()=>this.uploadLogInterval(),de("UPLOAD_LOG_TWICE_RETRY_INTERVAL_V1")):window.setTimeout(()=>this.uploadLogInterval(),de("UPLOAD_LOG_RETRY_INTERVAL_V1"))}))}},GA="v4.18.2-0-g8d83af1d-dirty(7/11/2023, 7:07:15 PM)",xs=function(n){if(n.match(/[0-9]+\.[0-9]+\.[0-9]+$/))return n;const r=n.match(/([0-9]+\.[0-9]+\.[0-9]+)\-alpha\.([0-9]+)/);if(r&&r[1]&&r[2]){const s=r[1],l=r[2];return"".concat(s,".").concat(l)}const o=n.match(/([0-9]+\.[0-9]+\.[0-9]+)\-special\.([0-9]+)/);if(o&&o[1]&&o[2]){const s=o[1],l=o[2];return"".concat(s,".").concat(100*(Number(l)+1))}return"4.0.0.999"}("4.18.2"),zA=function(){try{return JSON.parse("true")===!0}catch{return!0}}(),$M=["CHINA","GLOBAL"],rs=function(){const n="us".concat("erna","me"),r="pa".concat("sswo","rd"),o=["t","s","t"];o.splice(1,0,"e");const s=o.join(""),l=[];for(let _=0;_<6;_++)l.push("1");const d=l.join(""),p={};return p[n]=s,p[r]=d,Object.assign(p,{turnServerURL:"",tcpport:3433,udpport:3478,forceturn:!1})}();window.DEFAULT_TURN_CONFIG=rs;const xK={"90p":tn(160,90),"90p_1":tn(160,90),"120p":tn(160,120,15,30,65),"120p_1":tn(160,120,15,30,65),"120p_3":tn(120,120,15,30,50),"120p_4":tn(212,120),"180p":tn(320,180,15,30,140),"180p_1":tn(320,180,15,30,140),"180p_3":tn(180,180,15,30,100),"180p_4":tn(240,180,15,30,120),"240p":tn(320,240,15,40,200),"240p_1":tn(320,240,15,40,200),"240p_3":tn(240,240,15,40,140),"240p_4":tn(424,240,15,40,220),"360p":tn(640,360,15,80,400),"360p_1":tn(640,360,15,80,400),"360p_3":tn(360,360,15,80,260),"360p_4":tn(640,360,30,80,600),"360p_6":tn(360,360,30,80,400),"360p_7":tn(480,360,15,80,320),"360p_8":tn(480,360,30,80,490),"360p_9":tn(640,360,15,80,800),"360p_10":tn(640,360,24,80,800),"360p_11":tn(640,360,24,80,1e3),"480p":tn(640,480,15,100,500),"480p_1":tn(640,480,15,100,500),"480p_2":tn(640,480,30,100,1e3),"480p_3":tn(480,480,15,100,400),"480p_4":tn(640,480,30,100,750),"480p_6":tn(480,480,30,100,600),"480p_8":tn(848,480,15,100,610),"480p_9":tn(848,480,30,100,930),"480p_10":tn(640,480,10,100,400),"720p":tn(1280,720,15,120,1130),"720p_1":tn(1280,720,15,120,1130),"720p_2":tn(1280,720,30,120,2e3),"720p_3":tn(1280,720,30,120,1710),"720p_5":tn(960,720,15,120,910),"720p_6":tn(960,720,30,120,1380),"1080p":tn(1920,1080,15,120,2080),"1080p_1":tn(1920,1080,15,120,2080),"1080p_2":tn(1920,1080,30,120,3e3),"1080p_3":tn(1920,1080,30,120,3150),"1080p_5":tn(1920,1080,60,120,4780),"1440p":tn(2560,1440,30,120,4850),"1440p_1":tn(2560,1440,30,120,4850),"1440p_2":tn(2560,1440,60,120,7350),"4k":tn(3840,2160,30,120,8910),"4k_1":tn(3840,2160,30,120,8910),"4k_3":tn(3840,2160,60,120,13500)},PK={"480p":pc(640,480,5),"480p_1":pc(640,480,5),"480p_2":pc(640,480,30),"480p_3":pc(640,480,15),"720p":pc(1280,720,5),"720p_1":pc(1280,720,5),"720p_2":pc(1280,720,30),"720p_3":pc(1280,720,15),"1080p":pc(1920,1080,5),"1080p_1":pc(1920,1080,5),"1080p_2":pc(1920,1080,30),"1080p_3":pc(1920,1080,15)},DK={"1SL1TL":qA(1,1),"3SL3TL":qA(3,3),"2SL3TL":qA(2,3)};function Df(n){return n||(n="480p_1"),typeof n=="string"?Object.assign({},xK[n]):n}function KA(n){return typeof n=="string"?Object.assign({},PK[n]):n}function $T(n){return typeof n=="string"?Object.assign({},DK[n]):n}const LK={speech_low_quality:Ym(16e3,!1),speech_standard:Ym(32e3,!1,18),music_standard:Ym(48e3,!1),standard_stereo:Ym(48e3,!0,56),high_quality:Ym(48e3,!1,128),high_quality_stereo:Ym(48e3,!0,192)};function HT(n){return typeof n=="string"?Object.assign({},LK[n]):n}function Dn(n,r,o){Object.keys(pa).includes(n)&&(!o&&Object.keys(Lf).includes(n)||(pa[n]=r))}function de(n){return pa[n]}const pa={PROCESS_ID:"",ENCRYPT_AES:!0,AREAS:$M,WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io","webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io","webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-web-2.ap.sd-rtn.com","cds-ap-web-3.agora.io","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-web-2.ap.sd-rtn.com","sua-ap-web-3.agora.io","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-ap-web-1.agora.io","uap-web-2.ap.sd-rtn.com","uap-ap-web-3.agora.io","uap-web-4.ap.sd-rtn.com"],LOG_UPLOAD_SERVER:"logservice.agora.io",EVENT_REPORT_DOMAIN:"statscollector-1.agora.io",EVENT_REPORT_BACKUP_DOMAIN:"web-2.statscollector.sd-rtn.com",ENABLE_EVENT_REPORT:!0,GATEWAY_ADDRESS:[],GATEWAY_WSS_ADDRESS:"",LIVE_STREAMING_ADDRESS:"",HTTP_CONNECT_TIMEOUT:5e3,SIGNAL_REQUEST_TIMEOUT:1e4,REPORT_STATS:!0,UPLOAD_LOG:!1,NOT_REPORT_EVENT:[],SUBSCRIBE_TWCC:!1,PUBLISH_TWCC:!1,PING_PONG_TIME_OUT:10,WEBSOCKET_TIMEOUT_MIN:1e4,EVENT_REPORT_SEND_INTERVAL:3e3,CONFIG_DISTRIBUTE_INTERVAL:3e5,ENABLE_CONFIG_DISTRIBUTE:!0,CANDIDATE_TIMEOUT:5e3,SHOW_REPORT_INVOKER_LOG:!1,JOIN_EXTEND:"",PUB_EXTEND:"",SUB_EXTEND:"",FORCE_TURN:!1,TURN_ENABLE_TCP:!0,TURN_ENABLE_UDP:!0,MAX_UPLOAD_CACHE:50,UPLOAD_CACHE_INTERVAL:2e3,AJAX_REQUEST_CONCURRENT:3,REPORT_APP_SCENARIO:void 0,GATEWAY_DOMAINS:["edge.agora.io","edge.sd-rtn.com"],WORKER_DOMAIN:"edge.agora.io",TURN_DOMAIN:"edge.agora.io",EVENT_REPORT_RETRY:!0,CHROME_FORCE_PLAN_B:!1,AUDIO_SOURCE_VOLUME_UPDATE_INTERVAL:400,AUDIO_SOURCE_AVG_VOLUME_DURATION:3e3,AUDIO_VOLUME_INDICATION_INTERVAL:2e3,VOLUME_VOICE_WEIGHT:10,GET_VOLUME_OF_MUTED_AUDIO_TRACK:!1,STATS_UPDATE_INTERVAL:250,NORMAL_EVENT_QUEUE_CAPACITY:100,CUSTOM_REPORT:!0,CUSTOM_REPORT_LIMIT:20,PROXY_SERVER_TYPE2:"webnginx-proxy.agora.io",PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com","webrtc-cloud-proxy.agora.io"],CUSTOM_PUB_ANSWER_MODIFIER:null,CUSTOM_SUB_ANSWER_MODIFIER:null,CUSTOM_PUB_OFFER_MODIFIER:null,CUSTOM_SUB_OFFER_MODIFIER:null,DSCP_TYPE:"high",REMOVE_NEW_CODECS:!0,FRAGEMENT_LENGTH:3,WEBSOCKET_COMPRESS:!1,SIMULCAST:!1,PRELOAD_MEDIA_COUNT:0,USE_PUB_RTX:!1,USE_SUB_RTX:!1,CHECK_VIDEO_VISIBLE_INTERVAL:3e4,ENUMERATE_DEVICES_INTERVAL:!1,ENUMERATE_DEVICES_INTERVAL_TIME:1e4,USE_NEW_TOKEN:!1,CLOSE_AFB_FOR_LOCAL_AP:!0,JOIN_WITH_FALLBACK_SIGNAL_PROXY:!0,JOIN_WITH_FALLBACK_MEDIA_PROXY:!0,JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE:!1,JOIN_WITH_FALLBACK_PROXY_PENDING_DURATION:2e3,USE_TURN_SERVER_OF_GATEWAY:!1,H264_PROFILE_LEVEL_ID:"",USE_NEW_LOG:!1,LOG_VERSION:3,MEDIA_DEVICE_CONSTRAINTS:null,ENCRYPT_PROXY_USERNAME_AND_PSW:!0,SDP_LOGGING:!1,CSP_DETECTED_HOSTNAME_LIST:["agora.io","sd-rtn.com"],REMOTE_AUDIO_TRACK_USES_WEB_AUDIO:!1,LOCAL_AUDIO_TRACK_USES_WEB_AUDIO:!0,BITRATE_ADAPTER_TYPE:"STANDARD_BITRATE",AI_DENOISER_PARAMETERS:{},ADJUST_3A_FROM_PLUGINS:!0,RAISE_H264_BASELINE_PRIORITY:!0,FILTER_SEND_H264_BASELINE:!1,ENABLE_PUBLISHED_USER_LIST:!0,MAX_SUBSCRIPTION:50,X_GOOGLE_START_BITRATE:void 0,NEW_REPORT_SERVER:!1,NEW_REPORT_SERVER_DOMAINS:["data-reporting.agora.io","data-reporting.agora.io"],VIDEO_INSPECT_WORKER_MESSAGE_LENGTH_LIMIT:3e5,VIDEO_INSPECT_INTERVAL_MINIMUM:1e3,VIDEO_INSPECT_QUALITY_RATIO:.9,VIDEO_INSPECT_WORKER_MANAGER_HOST:"edge.agora.io",VIDEO_INSPECT_WORKER_MANAGER_PORT:"",VIDEO_INSPECT_WORKER_PORT:"",SHOW_VIDEO_INSPECT_WORKER_MESSAGE:!1,STATS_COLLECTOR_PORT:443,FORCE_TURN_TCP:!1,SUBSCRIBE_AUDIO_FILTER_TOPN:void 0,ENABLE_PUBLISH_AUDIO_FILTER:void 0,WEBAUDIO_INIT_OPTIONS:void 0,FILTER_VIDEO_FEC:!0,FILTER_AUDIO_FEC:!1,CHROME_DUAL_STREAM_USE_ENCODING:!0,EXTENSION_USAGE_UPLOAD_INTERVAL:1e4,ICE_RESTART:!0,ICE_RESTART_INTERVAL:1e4,NEW_ICE_RESTART:!1,ENABLE_USER_LICENSE_CHECK:!0,SIGNAL_CHANNEL:0,TRANSMITTER_INITIAL_RTT:30,TRANSMITTER_INITIAL_RTO:30,TRANSMITTER_MAX_BATCH_ACK_COUNT:2,TRANSMITTER_MAX_RTO:500,DATACHANNEL_COMPRESS:!1,FINGERPRINT:null,DC_JOIN_WITH_FAILBACK:5e3,ENABLE_VIDEO_FRAME_CALLBACK:!0,VIDEO_FREEZE_DURATION:500,SPATIALIZER_PARAMETERS:{},UPLOAD_LOG_INTERVAL:3e3,UPLOAD_LOG_REQUEST_RETRY_INTERVAL:2e3,UPLOAD_LOG_REQUEST_MAX_RETRY_INTERVAL:2e4,UPLOAD_LOG_TRY_INTERVAL_WHILE_OFF:5e3,UPLOAD_LOG_RETRY_INTERVAL_V1:1e4,UPLOAD_LOG_TWICE_RETRY_INTERVAL_V1:200,UPLOAD_LOG_LENGTH_EACH_TIME:10,APP_TYPE:0,DISABLE_WEBAUDIO:!1,CHANNEL_MEDIA_RELAY_SERVERS:void 0,KEEP_LAST_FRAME:!0,FORWARD_P2P_CREATION:!0,SYNC_GROUP:!0,BLOCK_LOCAL_CLIENT:!1,AP_AREA:!0,SVC:[],ENABLE_ENCODED_TRANSFORM:!1,IMAGE_MODERATION_WORKER_HOST:"edge.agora.io",IMAGE_MODERATION_WORKER_MESSAGE_LENGTH_LIMIT:3e5,IMAGE_MODERATION_INTERVAL_MINIMUM:1e3,SHOW_IMAGE_MODERATION_WORKER_MESSAGE:!1,IMAGE_MODERATION_QUALITY_RATIO:.9,IMAGE_MODERATION_UPLOAD_REPORT_INTERVAL:5e3,ACCOUNT_REGISTER_RETRY_TIMEOUT:1,ACCOUNT_REGISTER_RETRY_RATIO:2,ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX:6e4,ACCOUNT_REGISTER_RETRY_COUNT_MAX:1e5,AUDIO_CONTEXT:null,WEBCS_BACKUP_CONNECT_TIMEOUT:6e3,PLAYER_STATE_DEFER:2e3,SIGNAL_REQUEST_WATCH_INTERVAL:1e3,FILEPATH_LENMAX:255,DUALSTREAM_OPERATION_CHECK:!0,MEDIA_ELEMENT_EXISTS_DEPTH:3,SHIM_CANDIDATE:!1,LEAVE_MSG_TIMEOUT:2e3,STATS_FILTER:{transportId:!0,googTrackId:!0}},Lf={};function Ym(n,r,o){return{sampleRate:n,stereo:r,bitrate:o}}function tn(n,r,o,s,l){return{width:n,height:r,frameRate:o,bitrateMin:s,bitrateMax:l}}function pc(n,r,o,s,l){return{width:{max:n},height:{max:r},frameRate:o,bitrateMin:s,bitrateMax:l}}function qA(n,r){return{numSpatialLayers:n,numTemporalLayers:r}}zA||(pa.WEBCS_DOMAIN=["ap-web-1-oversea.agora.io","ap-web-1-north-america.agora.io"],pa.WEBCS_DOMAIN_BACKUP_LIST=["ap-web-2-oversea.agora.io","ap-web-2-north-america.agora.io"],pa.PROXY_CS=["proxy-ap-web-oversea.agora.io","proxy-ap-web-america.agora.io"],pa.CDS_AP=["cds-ap-web-oversea.agora.io","cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],pa.ACCOUNT_REGISTER=["sua-ap-web-oversea.agora.io","sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],pa.UAP_AP=["uap-ap-web-oversea.agora.io","uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],pa.LOG_UPLOAD_SERVER="logservice-oversea.agora.io",pa.EVENT_REPORT_DOMAIN="statscollector-1-oversea.agora.io",pa.EVENT_REPORT_BACKUP_DOMAIN="statscollector-2-oversea.agora.io",pa.PROXY_SERVER_TYPE3="webrtc-cloud-proxy.agora.io",pa.AREAS=["NORTH_AMERICA","OVERSEA"]);const kK=[[0,1,2,3,4,5,5],[0,2,2,3,4,5,5],[0,3,3,3,4,5,5],[0,4,4,4,4,5,5],[0,5,5,5,5,5,5]],kf=[],UE=[];function Mf(n,r){return!!r&&kf.some(o=>o.uid===n&&o.channelName===r)}var MK=ri,UK=bs,FK=he,YA=function(n,r,o){var s=MK(r);s in n?UK.f(n,s,FK(0,o)):n[s]=o},HM=tr,VK=Wl,jK=YA,BK=O.Array,$K=Math.max,WM=function(n,r,o){for(var s=VK(n),l=HM(r,s),d=HM(o===void 0?s:o,s),p=BK($K(d-l,0)),_=0;l<d;l++,_++)jK(p,_,n[l]);return p.length=_,p},GM=WM,HK=Math.floor,XA=function(n,r){var o=n.length,s=HK(o/2);return o<8?WK(n,r):GK(n,XA(GM(n,0,s),r),XA(GM(n,s),r),r)},WK=function(n,r){for(var o,s,l=n.length,d=1;d<l;){for(s=d,o=n[d];s&&r(n[s-1],o)>0;)n[s]=n[--s];s!==d++&&(n[s]=o)}return n},GK=function(n,r,o,s){for(var l=r.length,d=o.length,p=0,_=0;p<l||_<d;)n[p+_]=p<l&&_<d?s(r[p],o[_])<=0?r[p++]:o[_++]:p<l?r[p++]:o[_++];return n},zK=XA,zM=at.match(/firefox\/(\d+)/i),KK=!!zM&&+zM[1],qK=/MSIE|Trident/.test(at),KM=at.match(/AppleWebKit\/(\d+)\./),YK=!!KM&&+KM[1],XK=Rn,qM=T,JK=an,QK=Ii,ZK=Wl,YM=Du,JA=c,eq=zK,tq=Ap,XM=KK,nq=qK,JM=Hn,QM=YK,Qd=[],ZM=qM(Qd.sort),rq=qM(Qd.push),iq=JA(function(){Qd.sort(void 0)}),oq=JA(function(){Qd.sort(null)}),aq=tq("sort"),eU=!JA(function(){if(JM)return JM<70;if(!(XM&&XM>3)){if(nq)return!0;if(QM)return QM<603;var n,r,o,s,l="";for(n=65;n<76;n++){switch(r=String.fromCharCode(n),n){case 66:case 69:case 70:case 72:o=3;break;case 68:case 71:o=4;break;default:o=2}for(s=0;s<47;s++)Qd.push({k:r+s,v:o})}for(Qd.sort(function(d,p){return p.v-d.v}),s=0;s<Qd.length;s++)r=Qd[s].k.charAt(0),l.charAt(l.length-1)!==r&&(l+=r);return l!=="DGBEFHACIJK"}});XK({target:"Array",proto:!0,forced:iq||!oq||!aq||!eU},{sort:function(n){n!==void 0&&JK(n);var r=QK(this);if(eU)return n===void 0?ZM(r):ZM(r,n);var o,s,l=[],d=ZK(r);for(s=0;s<d;s++)s in r&&rq(l,r[s]);for(eq(l,function(p){return function(_,S){return S===void 0?-1:_===void 0?1:p!==void 0?+p(_,S)||0:YM(_)>YM(S)?1:-1}}(n)),o=l.length,s=0;s<o;)r[s]=l[s++];for(;s<d;)delete r[s++];return r}});var sq=wi("Array").sort,cq=R,lq=sq,QA=Array.prototype,ZA=function(n){var r=n.sort;return n===QA||cq(QA,n)&&r===QA.sort?lq:r};function Xm(n,r){if(typeof n!="boolean")throw new re(q.INVALID_PARAMS,"Invalid ".concat(r,": The value is of the boolean type."))}function Si(n,r,o){if(!o.includes(n))throw new re(q.INVALID_PARAMS,"".concat(r," can only be set as ").concat(JSON.stringify(o)))}function Vn(n,r){let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1e4,l=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4];if(n<o||n>s||l&&!uq(n))throw new re(q.INVALID_PARAMS,"invalid ".concat(r,": the value range is [").concat(o,", ").concat(s,"]. integer only"))}function eN(n,r){if(typeof n!="number"){if(!(n.min||n.max||n.ideal||n.exact))throw new re(q.INVALID_PARAMS,"".concat(r," is not a valid ConstrainLong"));n.min!==void 0&&Vn(n.min,"".concat(r,".min"),0,1/0),n.max!==void 0&&Vn(n.max,"".concat(r,".max"),1,1/0),n.exact!==void 0&&Vn(n.exact,"".concat(r,".exact"),1,1/0),n.ideal!==void 0&&Vn(n.ideal,"".concat(r,".ideal"),1,1/0)}else Vn(n,r,1,1/0)}function Ji(n,r){let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:255,l=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4];if(n==null)throw new re(q.INVALID_PARAMS,"".concat(r||"param"," cannot be empty"));if(!tU(n,o,s,l))throw new re(q.INVALID_PARAMS,"Invalid ".concat(r||"string param",": Length of the string: [").concat(o,",").concat(s,"].").concat(l?" ASCII characters only.":""))}function $u(n,r){if(!Array.isArray(n))throw new re(q.INVALID_PARAMS,"".concat(r," should be an array"))}function tN(n){if(typeof n!="string"||!/^[a-zA-Z0-9 \!\#\$\%\&\(\)\+\-\:\;\<\=\.\>\?\@\[\]\^\_\{\}\|\~\,]{1,64}$/.test(n))throw j.error("Invalid Channel Name ".concat(n)),new re(q.INVALID_PARAMS,"The length must be within 64 bytes. The supported characters: a-z,A-Z,0-9,space,!, #, $, %, &, (, ), +, -, :, ;, <, =, ., >, ?, @, [, ], ^, _,  {, }, |, ~, ,")}function nN(n){if(r=n,!(typeof r=="number"&&Math.floor(r)===r&&0<=r&&r<=4294967295||tU(n,1,255)))throw j.error("Invalid UID ".concat(n," ").concat(typeof n)),new re(q.INVALID_PARAMS,"[String uid] Length of the string: [1,255]. ASCII characters only. [Number uid] The value range is [0,10000]");var r;typeof n=="string"&&j.warning("You input a string as the user ID, to ensure better end-user experience, Agora highly suggests not using a string as the user ID.")}function rr(n){return n==null}function tU(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:255,s=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];return typeof n=="string"&&n.length<=o&&n.length>=r&&(!s||dq(n))}function uq(n){return typeof n=="number"&&n%1==0}function dq(n){if(typeof n!="string")return!1;for(let r=0;r<n.length;r+=1){const o=n.charCodeAt(r);if(o<0||o>255)return!1}return!0}let nU,rU,Qi;(function(n){n.FREE="free",n.UPLOADING="uploading"})(nU||(nU={})),function(n){n[n.MISC=0]="MISC",n[n.INTERNAL_EVENT=1]="INTERNAL_EVENT",n[n.PUBLIC_EVENT=2]="PUBLIC_EVENT",n[n.WEB_EVENT=3]="WEB_EVENT",n[n.INTERNAL_API=4]="INTERNAL_API",n[n.WEB_API=5]="WEB_API",n[n.PUBLIC_API=6]="PUBLIC_API"}(rU||(rU={})),function(n){n.NONE="none",n.INIT="init",n.CANPLAY="canplay",n.PLAYING="playing",n.PAUSED="paused",n.SUSPEND="suspend",n.STALLED="stalled",n.WAITING="waiting",n.ERROR="error",n.DESTROYED="destroyed",n.ABORT="abort",n.ENDED="ended",n.EMPTIED="emptied",n.LOADEDDATA="loadeddata"}(Qi||(Qi={}));const rN={uninit:100,none:110,init:120,loadeddata:130,canplay:200,playing:210,paused:220,suspend:300,stalled:310,waiting:320,error:330,destroyed:340,abort:350,ended:360,emptied:370};function hq(n){return Ji(n.reportId,"params.reportId",0,100,!1),Ji(n.category,"params.category",0,100,!1),Ji(n.event,"params.event",0,100,!1),Ji(n.label,"params.label",0,100,!1),Vn(n.value,"params.value",Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,!1),!0}const fq={sid:"",lts:0,success:null,cname:null,uid:null,peer:null,cid:null,elapse:null,extend:null,vid:0};let Vi,dr,iU,iN,Fr,cr,Uf,Hu,Jm,FE,is,Zi,ut,oN,yn,Jt,Go,wn,rt,mt,Pa,Bt,oU,ma;function aU(n){return Vn(n.timeout,"config.timeout",0,1e5),Vn(n.timeoutFactor,"config.timeoutFactor",0,100,!1),Vn(n.maxRetryCount,"config.maxRetryConfig",0,1/0),Vn(n.maxRetryTimeout,"config.maxRetryTimeout",0,1/0),!0}function pq(n){return Si(n.codec,"config.codec",["vp8","vp9","av1","h264","h265"]),Si(n.mode,"config.mode",["rtc","live"]),n.audioCodec!==void 0&&Si(n.audioCodec,"config.audioCodec",["opus","pcmu","pcma","g722"]),n.proxyServer!==void 0&&Ji(n.proxyServer,"config.proxyServer",1,1e4),n.turnServer!==void 0&&sU(n.turnServer),n.httpRetryConfig!==void 0&&aU(n.httpRetryConfig),n.websocketRetryConfig!==void 0&&aU(n.websocketRetryConfig),!0}function VE(n){if(!Array.isArray(n)||n.length<1)return!1;try{n.forEach(r=>{if(!r.urls)throw Error()})}catch{return!1}return!0}function sU(n){return Ji(n.turnServerURL,"turnServerURL"),Ji(n.username,"username"),Ji(n.password,"password"),n.udpport&&Vn(n.udpport,"udpport",1,99999,!0),n.forceturn&&Xm(n.forceturn,"forceturn"),n.security&&Xm(n.security,"security"),n.tcpport&&Vn(n.tcpport,"tcpport",1,99999,!0),!0}function cU(n){return n.level!==void 0&&Si(n.level,"level",[1,2,3]),!0}(function(n){n.PUBLISH="publish",n.SUBSCRIBE="subscribe",n.WS_COMPRESSOR_INIT="ws_compressor_init",n.SESSION_INIT="session_init",n.JOIN_CHOOSE_SERVER="join_choose_server",n.REQ_USER_ACCOUNT="req_user_account",n.JOIN_GATEWAY="join_gateway",n.REJOIN_GATEWAY="rejoin_gateway",n.STREAM_SWITCH="stream_switch",n.REQUEST_PROXY_WORKER_MANAGER="request_proxy_worker_manager",n.REQUEST_PROXY_APPCENTER="request_proxy_appcenter",n.FIRST_VIDEO_RECEIVED="first_video_received",n.FIRST_AUDIO_RECEIVED="first_audio_received",n.FIRST_VIDEO_DECODE="first_video_decode",n.FIRST_AUDIO_DECODE="first_audio_decode",n.ON_ADD_AUDIO_STREAM="on_add_audio_stream",n.ON_ADD_VIDEO_STREAM="on_add_video_stream",n.ON_UPDATE_STREAM="on_update_stream",n.ON_REMOVE_STREAM="on_remove_stream",n.USER_ANALYTICS="req_user_analytics",n.PC_STATS="pc_stats"})(Vi||(Vi={})),function(n){n.SESSION="io.agora.pb.Wrtc.Session",n.JOIN_CHOOSE_SERVER="io.agora.pb.Wrtc.JoinChooseServer",n.REQ_USER_ACCOUNT="io.agora.pb.Wrtc.ReqUserAccount",n.JOIN_GATEWAY="io.agora.pb.Wrtc.JoinGateway",n.RE_JOIN_GATEWAY="io.agora.pb.Wrtc.ReJoinGateway",n.PUBLISH="io.agora.pb.Wrtc.Publish",n.SUBSCRIBE="io.agora.pb.Wrtc.Subscribe",n.WS_COMPRESSOR_INIT="io.agora.pb.Wrtc.WsCompressorInit",n.STREAM_SWITCH="io.agora.pb.Wrtc.StreamSwitch",n.AUDIO_SENDING_STOPPED="io.agora.pb.Wrtc.AudioSendingStopped",n.VIDEO_SENDING_STOPPED="io.agora.pb.Wrtc.VideoSendingStopped",n.REQUEST_PROXY_APPCENTER="io.agora.pb.Wrtc.RequestProxyAppCenter",n.REQUEST_PROXY_WORKER_MANAGER="io.agora.pb.Wrtc.RequestProxyWorkerManager",n.API_INVOKE="io.agora.pb.Wrtc.ApiInvoke",n.FIRST_VIDEO_RECEIVED="io.agora.pb.Wrtc.FirstVideoReceived",n.FIRST_AUDIO_RECEIVED="io.agora.pb.Wrtc.FirstAudioReceived",n.FIRST_VIDEO_DECODE="io.agora.pb.Wrtc.FirstVideoDecode",n.FIRST_AUDIO_DECODE="io.agora.pb.Wrtc.FirstAudioDecode",n.ON_ADD_AUDIO_STREAM="io.agora.pb.Wrtc.OnAddAudioStream",n.ON_ADD_VIDEO_STREAM="io.agora.pb.Wrtc.OnAddVideoStream",n.ON_UPDATE_STREAM="io.agora.pb.Wrtc.OnUpdateStream",n.ON_REMOVE_STREAM="io.agora.pb.Wrtc.OnRemoveStream",n.JOIN_CHANNEL_TIMEOUT="io.agora.pb.Wrtc.JoinChannelTimeout",n.PEER_PUBLISH_STATUS="io.agora.pb.Wrtc.PeerPublishStatus",n.WORKER_EVENT="io.agora.pb.Wrtc.WorkerEvent",n.AP_WORKER_EVENT="io.agora.pb.Wrtc.APWorkerEvent",n.JOIN_WEB_PROXY_AP="io.agora.pb.Wrtc.JoinWebProxyAP",n.WEBSOCKET_QUIT="io.agora.pb.Wrtc.WebSocketQuit",n.USER_ANALYTICS="io.agora.pb.Wrtc.UserAnalytics",n.AUTOPLAY_FAILED="io.agora.pb.Wrtc.AutoplayFailed",n.PC_STATS="io.agora.pb.Wrtc.PCStats"}(dr||(dr={})),function(n){n[n.WORKER_EVENT=156]="WORKER_EVENT",n[n.AP_WORKER_EVENT=160]="AP_WORKER_EVENT"}(iU||(iU={})),function(n){n[n.SESSION=26]="SESSION",n[n.JOIN_CHOOSE_SERVER=27]="JOIN_CHOOSE_SERVER",n[n.REQ_USER_ACCOUNT=196]="REQ_USER_ACCOUNT",n[n.JOIN_GATEWAY=28]="JOIN_GATEWAY",n[n.PUBLISH=30]="PUBLISH",n[n.SUBSCRIBE=29]="SUBSCRIBE",n[n.WS_COMPRESSOR_INIT=9430]="WS_COMPRESSOR_INIT",n[n.STREAM_SWITCH=32]="STREAM_SWITCH",n[n.AUDIO_SENDING_STOPPED=33]="AUDIO_SENDING_STOPPED",n[n.VIDEO_SENDING_STOPPED=34]="VIDEO_SENDING_STOPPED",n[n.REQUEST_PROXY_APPCENTER=35]="REQUEST_PROXY_APPCENTER",n[n.REQUEST_PROXY_WORKER_MANAGER=36]="REQUEST_PROXY_WORKER_MANAGER",n[n.API_INVOKE=41]="API_INVOKE",n[n.FIRST_VIDEO_RECEIVED=348]="FIRST_VIDEO_RECEIVED",n[n.FIRST_AUDIO_RECEIVED=349]="FIRST_AUDIO_RECEIVED",n[n.FIRST_VIDEO_DECODE=350]="FIRST_VIDEO_DECODE",n[n.FIRST_AUDIO_DECODE=351]="FIRST_AUDIO_DECODE",n[n.ON_ADD_AUDIO_STREAM=352]="ON_ADD_AUDIO_STREAM",n[n.ON_ADD_VIDEO_STREAM=353]="ON_ADD_VIDEO_STREAM",n[n.ON_UPDATE_STREAM=356]="ON_UPDATE_STREAM",n[n.ON_REMOVE_STREAM=355]="ON_REMOVE_STREAM",n[n.JOIN_CHANNEL_TIMEOUT=407]="JOIN_CHANNEL_TIMEOUT",n[n.PEER_PUBLISH_STATUS=408]="PEER_PUBLISH_STATUS",n[n.WORKER_EVENT=156]="WORKER_EVENT",n[n.AP_WORKER_EVENT=160]="AP_WORKER_EVENT",n[n.JOIN_WEB_PROXY_AP=700]="JOIN_WEB_PROXY_AP",n[n.WEBSOCKET_QUIT=671]="WEBSOCKET_QUIT",n[n.USER_ANALYTICS=1e4]="USER_ANALYTICS",n[n.AUTOPLAY_FAILED=9178]="AUTOPLAY_FAILED"}(iN||(iN={})),function(n){n.CREATE_CLIENT="createClient",n.CHECK_SYSTEM_REQUIREMENTS="checkSystemRequirements",n.SET_AREA="setArea",n.CHECK_VIDEO_TRACK_IS_ACTIVE="checkVideoTrackIsActive",n.CHECK_AUDIO_TRACK_IS_ACTIVE="checkAudioTrackIsActive",n.CREATE_MIC_AUDIO_TRACK="createMicrophoneAudioTrack",n.CREATE_CUSTOM_AUDIO_TRACK="createCustomAudioTrack",n.CREATE_BUFFER_AUDIO_TRACK="createBufferSourceAudioTrack",n.CREATE_CAM_VIDEO_TRACK="createCameraVideoTrack",n.CREATE_CUSTOM_VIDEO_TRACK="createCustomVideoTrack",n.CREATE_MIC_AND_CAM_TRACKS="createMicrophoneAndCameraTracks",n.CREATE_SCREEN_VIDEO_TRACK="createScreenVideoTrack",n.SET_ENCRYPTION_CONFIG="Client.setEncryptionConfig",n.START_PROXY_SERVER="Client.startProxyServer",n.STOP_PROXY_SERVER="Client.stopProxyServer",n.SET_PROXY_SERVER="Client.setProxyServer",n.SET_TURN_SERVER="Client.setTurnServer",n.SET_CLIENT_ROLE="Client.setClientRole",n.SET_LOW_STREAM_PARAMETER="Client.setLowStreamParameter",n.ENABLE_DUAL_STREAM="Client.enableDualStream",n.DISABLE_DUAL_STREAM="Client.disableDualStream",n.JOIN="Client.join",n.LEAVE="Client.leave",n.PUBLISH="Client.publish",n.UNPUBLISH="Client.unpublish",n.SUBSCRIBE="Client.subscribe",n.MASS_SUBSCRIBE="Client.massSubscribe",n.MASS_UNSUBSCRIBE="Client.massUnsubscribe",n.UNSUBSCRIBE="Client.unsubscribe",n.RENEW_TOKEN="Client.renewToken",n.SET_REMOTE_VIDEO_STREAM_TYPE="Client.setRemoteVideoStreamType",n.SET_STREAM_FALLBACK_OPTION="Client.setStreamFallbackOption",n.ENABLE_AUDIO_VOLUME_INDICATOR="Client.enableAudioVolumeIndicator",n.SEND_CUSTOM_REPORT_MESSAGE="Client.sendCustomReportMessage",n.INSPECT_VIDEO_CONTENT="Client.inspectVideoContent",n.STOP_INSPECT_VIDEO_CONTENT="Client.stopInspectVideoContent",n.JOIN_FALLBACK_TO_PROXY="Client._joinFallbackToProxy",n.DATACHANNEL_FAILBACK="Client._datachannelFailback",n.ON_LIVE_STREAM_WARNING="Client.onLiveStreamWarning",n.ON_LIVE_STREAM_ERROR="Client.onLiveStreamingError",n.START_LIVE_STREAMING="Client.startLiveStreaming",n.SET_LIVE_TRANSCODING="Client.setLiveTranscoding",n.STOP_LIVE_STREAMING="Client.stopLiveStreaming",n.ADD_INJECT_STREAM_URL="Client.addInjectStreamUrl",n.REMOVE_INJECT_STREAM_URL="Client.removeInjectStreamUrl",n.START_CHANNEL_MEDIA_RELAY="Client.startChannelMediaRelay",n.UPDATE_CHANNEL_MEDIA_RELAY="Client.updateChannelMediaRelay",n.STOP_CHANNEL_MEDIA_RELAY="Client.stopChannelMediaRelay",n.REQUEST_CONFIG_DISTRIBUTE="_config-distribute-request",n.SET_CONFIG_DISTRIBUTE="_configDistribute",n.LOCAL_TRACK_SET_MUTED="LocalTrack.setMute",n.LOCAL_AUDIO_TRACK_PLAY="LocalAudioTrack.play",n.LOCAL_AUDIO_TRACK_PLAY_IN_ELEMENT="LocalAudioTrack.playInElement",n.LOCAL_AUDIO_TRACK_STOP="LocalAudioTrack.stop",n.LOCAL_AUDIO_TRACK_SET_VOLUME="LocalAudioTrack.setVolume",n.MIC_AUDIO_TRACK_SET_DEVICE="MicrophoneAudioTrack.setDevice",n.BUFFER_AUDIO_TRACK_START="BufferSourceAudioTrack.startProcessAudioBuffer",n.BUFFER_AUDIO_TRACK_STOP="BufferSourceAudioTrack.stopProcessAudioBuffer",n.BUFFER_AUDIO_TRACK_PAUSE="BufferSourceAudioTrack.pauseProcessAudioBuffer",n.BUFFER_AUDIO_TRACK_RESUME="BufferSourceAudioTrack.resumeProcessAudioBuffer",n.BUFFER_AUDIO_TRACK_SEEK="BufferSourceAudioTrack.seekAudioBuffer",n.LOCAL_VIDEO_TRACK_PLAY="LocalVideoTrack.play",n.LOCAL_VIDEO_TRACK_STOP="LocalVideoTrack.stop",n.LOCAL_VIDEO_TRACK_GET_VIDEO_VISIBLE="LocalVideoTrack.getVideoElementVisibleStatus",n.LOCAL_VIDEO_TRACK_BEAUTY="LocalVideoTrack.setBeautyEffect",n.CAM_VIDEO_TRACK_SET_DEVICE="CameraVideoTrack.setDevice",n.CAM_VIDEO_TRACK_SET_ENCODER_CONFIG="CameraVideoTrack.setEncoderConfiguration",n.REMOTE_VIDEO_TRACK_PLAY="RemoteVideoTrack.play",n.REMOTE_VIDEO_TRACK_STOP="RemoteVideoTrack.stop",n.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE="RemoteVideoTrack.getVideoElementVisibleStatus",n.REMOTE_AUDIO_TRACK_PLAY="RemoteAudioTrack.play",n.REMOTE_AUDIO_TRACK_STOP="RemoteAudioTrack.stop",n.REMOTE_AUDIO_SET_VOLUME="RemoteAudioTrack.setVolume",n.REMOTE_AUDIO_SET_OUTPUT_DEVICE="RemoteAudioTrack.setOutputDevice",n.GET_MEDIA_STREAM_TRACK="Track.getMediaStreamTrack",n.STREAM_TYPE_CHANGE="streamTypeChange",n.CONNECTION_STATE_CHANGE="connectionStateChange",n.LOAD_CONFIG_FROM_LOCALSTORAGE="loadConfigFromLocalStorage",n.IMAGE_MODERATION_UPLOAD="imageModerationUpload"}(Fr||(Fr={})),function(n){n.TRACER="tracer"}(cr||(cr={})),function(n){n.IDLE="IDLE",n.INITING="INITING",n.INITEND="INITEND"}(Uf||(Uf={})),function(n){n.STATE_CHANGE="state_change",n.RECORDING_DEVICE_CHANGED="recordingDeviceChanged",n.PLAYOUT_DEVICE_CHANGED="playoutDeviceChanged",n.CAMERA_DEVICE_CHANGED="cameraDeviceChanged"}(Hu||(Hu={})),function(n){n[n.ACCESS_POINT=101]="ACCESS_POINT",n[n.UNILBS=201]="UNILBS",n[n.STRING_UID_ALLOCATOR=901]="STRING_UID_ALLOCATOR"}(Jm||(Jm={})),function(n){n[n.IIIEGAL_APPID=1]="IIIEGAL_APPID",n[n.IIIEGAL_UID=2]="IIIEGAL_UID",n[n.INTERNAL_ERROR=3]="INTERNAL_ERROR"}(FE||(FE={})),function(n){n[n.INVALID_VENDOR_KEY=5]="INVALID_VENDOR_KEY",n[n.INVALID_CHANNEL_NAME=7]="INVALID_CHANNEL_NAME",n[n.INTERNAL_ERROR=8]="INTERNAL_ERROR",n[n.NO_AUTHORIZED=9]="NO_AUTHORIZED",n[n.DYNAMIC_KEY_TIMEOUT=10]="DYNAMIC_KEY_TIMEOUT",n[n.NO_ACTIVE_STATUS=11]="NO_ACTIVE_STATUS",n[n.DYNAMIC_KEY_EXPIRED=13]="DYNAMIC_KEY_EXPIRED",n[n.STATIC_USE_DYNAMIC_KEY=14]="STATIC_USE_DYNAMIC_KEY",n[n.DYNAMIC_USE_STATIC_KEY=15]="DYNAMIC_USE_STATIC_KEY",n[n.USER_OVERLOAD=16]="USER_OVERLOAD",n[n.FORBIDDEN_REGION=18]="FORBIDDEN_REGION",n[n.CANNOT_MEET_AREA_DEMAND=19]="CANNOT_MEET_AREA_DEMAND"}(is||(is={})),function(n){n[n.NO_FLAG_SET=100]="NO_FLAG_SET",n[n.FLAG_SET_BUT_EMPTY=101]="FLAG_SET_BUT_EMPTY",n[n.INVALID_FALG_SET=102]="INVALID_FALG_SET",n[n.FLAG_SET_BUT_NO_RE=103]="FLAG_SET_BUT_NO_RE",n[n.INVALID_SERVICE_ID=104]="INVALID_SERVICE_ID",n[n.NO_SERVICE_AVAILABLE=200]="NO_SERVICE_AVAILABLE",n[n.NO_SERVICE_AVAILABLE_P2P=201]="NO_SERVICE_AVAILABLE_P2P",n[n.NO_SERVICE_AVAILABLE_VOICE=202]="NO_SERVICE_AVAILABLE_VOICE",n[n.NO_SERVICE_AVAILABLE_WEBRTC=203]="NO_SERVICE_AVAILABLE_WEBRTC",n[n.NO_SERVICE_AVAILABLE_CDS=204]="NO_SERVICE_AVAILABLE_CDS",n[n.NO_SERVICE_AVAILABLE_CDN=205]="NO_SERVICE_AVAILABLE_CDN",n[n.NO_SERVICE_AVAILABLE_TDS=206]="NO_SERVICE_AVAILABLE_TDS",n[n.NO_SERVICE_AVAILABLE_REPORT=207]="NO_SERVICE_AVAILABLE_REPORT",n[n.NO_SERVICE_AVAILABLE_APP_CENTER=208]="NO_SERVICE_AVAILABLE_APP_CENTER",n[n.NO_SERVICE_AVAILABLE_ENV0=209]="NO_SERVICE_AVAILABLE_ENV0",n[n.NO_SERVICE_AVAILABLE_VOET=210]="NO_SERVICE_AVAILABLE_VOET",n[n.NO_SERVICE_AVAILABLE_STRING_UID=211]="NO_SERVICE_AVAILABLE_STRING_UID",n[n.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS=212]="NO_SERVICE_AVAILABLE_WEBRTC_UNILBS",n[n.NO_SERVICE_AVAILABLE_UNILBS_FLV=213]="NO_SERVICE_AVAILABLE_UNILBS_FLV"}(Zi||(Zi={})),function(n){n[n.K_TIMESTAMP_EXPIRED=2]="K_TIMESTAMP_EXPIRED",n[n.K_CHANNEL_PERMISSION_INVALID=3]="K_CHANNEL_PERMISSION_INVALID",n[n.K_CERTIFICATE_INVALID=4]="K_CERTIFICATE_INVALID",n[n.K_CHANNEL_NAME_EMPTY=5]="K_CHANNEL_NAME_EMPTY",n[n.K_CHANNEL_NOT_FOUND=6]="K_CHANNEL_NOT_FOUND",n[n.K_TICKET_INVALID=7]="K_TICKET_INVALID",n[n.K_CHANNEL_CONFLICTED=8]="K_CHANNEL_CONFLICTED",n[n.K_SERVICE_NOT_READY=9]="K_SERVICE_NOT_READY",n[n.K_SERVICE_TOO_HEAVY=10]="K_SERVICE_TOO_HEAVY",n[n.K_UID_BANNED=14]="K_UID_BANNED",n[n.K_IP_BANNED=15]="K_IP_BANNED",n[n.K_CHANNEL_BANNED=16]="K_CHANNEL_BANNED",n[n.WARN_NO_AVAILABLE_CHANNEL=103]="WARN_NO_AVAILABLE_CHANNEL",n[n.WARN_LOOKUP_CHANNEL_TIMEOUT=104]="WARN_LOOKUP_CHANNEL_TIMEOUT",n[n.WARN_LOOKUP_CHANNEL_REJECTED=105]="WARN_LOOKUP_CHANNEL_REJECTED",n[n.WARN_OPEN_CHANNEL_TIMEOUT=106]="WARN_OPEN_CHANNEL_TIMEOUT",n[n.WARN_OPEN_CHANNEL_REJECTED=107]="WARN_OPEN_CHANNEL_REJECTED",n[n.WARN_REQUEST_DEFERRED=108]="WARN_REQUEST_DEFERRED",n[n.ERR_DYNAMIC_KEY_TIMEOUT=109]="ERR_DYNAMIC_KEY_TIMEOUT",n[n.ERR_NO_AUTHORIZED=110]="ERR_NO_AUTHORIZED",n[n.ERR_VOM_SERVICE_UNAVAILABLE=111]="ERR_VOM_SERVICE_UNAVAILABLE",n[n.ERR_NO_CHANNEL_AVAILABLE_CODE=112]="ERR_NO_CHANNEL_AVAILABLE_CODE",n[n.ERR_MASTER_VOCS_UNAVAILABLE=114]="ERR_MASTER_VOCS_UNAVAILABLE",n[n.ERR_INTERNAL_ERROR=115]="ERR_INTERNAL_ERROR",n[n.ERR_NO_ACTIVE_STATUS=116]="ERR_NO_ACTIVE_STATUS",n[n.ERR_INVALID_UID=117]="ERR_INVALID_UID",n[n.ERR_DYNAMIC_KEY_EXPIRED=118]="ERR_DYNAMIC_KEY_EXPIRED",n[n.ERR_STATIC_USE_DYANMIC_KE=119]="ERR_STATIC_USE_DYANMIC_KE",n[n.ERR_DYNAMIC_USE_STATIC_KE=120]="ERR_DYNAMIC_USE_STATIC_KE",n[n.ERR_NO_VOCS_AVAILABLE=2e3]="ERR_NO_VOCS_AVAILABLE",n[n.ERR_NO_VOS_AVAILABLE=2001]="ERR_NO_VOS_AVAILABLE",n[n.ERR_JOIN_CHANNEL_TIMEOUT=2002]="ERR_JOIN_CHANNEL_TIMEOUT",n[n.ERR_REPEAT_JOIN_CHANNEL=2003]="ERR_REPEAT_JOIN_CHANNEL",n[n.ERR_JOIN_BY_MULTI_IP=2004]="ERR_JOIN_BY_MULTI_IP",n[n.ERR_NOT_JOINED=2011]="ERR_NOT_JOINED",n[n.ERR_REPEAT_JOIN_REQUEST=2012]="ERR_REPEAT_JOIN_REQUEST",n[n.ERR_INVALID_VENDOR_KEY=2013]="ERR_INVALID_VENDOR_KEY",n[n.ERR_INVALID_CHANNEL_NAME=2014]="ERR_INVALID_CHANNEL_NAME",n[n.ERR_INVALID_STRINGUID=2015]="ERR_INVALID_STRINGUID",n[n.ERR_TOO_MANY_USERS=2016]="ERR_TOO_MANY_USERS",n[n.ERR_SET_CLIENT_ROLE_TIMEOUT=2017]="ERR_SET_CLIENT_ROLE_TIMEOUT",n[n.ERR_SET_CLIENT_ROLE_NO_PERMISSION=2018]="ERR_SET_CLIENT_ROLE_NO_PERMISSION",n[n.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE=2019]="ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",n[n.ERR_PUBLISH_REQUEST_INVALID=2020]="ERR_PUBLISH_REQUEST_INVALID",n[n.ERR_SUBSCRIBE_REQUEST_INVALID=2021]="ERR_SUBSCRIBE_REQUEST_INVALID",n[n.ERR_NOT_SUPPORTED_MESSAGE=2022]="ERR_NOT_SUPPORTED_MESSAGE",n[n.ERR_ILLEAGAL_PLUGIN=2023]="ERR_ILLEAGAL_PLUGIN",n[n.ERR_REJOIN_TOKEN_INVALID=2024]="ERR_REJOIN_TOKEN_INVALID",n[n.ERR_REJOIN_USER_NOT_JOINED=2025]="ERR_REJOIN_USER_NOT_JOINED",n[n.ERR_INVALID_OPTIONAL_INFO=2027]="ERR_INVALID_OPTIONAL_INFO",n[n.ILLEGAL_AES_PASSWORD=2028]="ILLEGAL_AES_PASSWORD",n[n.ILLEGAL_CLIENT_ROLE_LEVEL=2029]="ILLEGAL_CLIENT_ROLE_LEVEL",n[n.ERR_TOO_MANY_BROADCASTERS=2031]="ERR_TOO_MANY_BROADCASTERS",n[n.ERR_TOO_MANY_SUBSCRIBERS=2032]="ERR_TOO_MANY_SUBSCRIBERS",n[n.ERR_LICENSE_MISSING=32769]="ERR_LICENSE_MISSING",n[n.ERR_LICENSE_EXPIRED=32771]="ERR_LICENSE_EXPIRED",n[n.ERR_LICENSE_MINUTES_EXCEEDED=32773]="ERR_LICENSE_MINUTES_EXCEEDED",n[n.ERR_LICENSE_PERIOD_INVALID=32774]="ERR_LICENSE_PERIOD_INVALID",n[n.ERR_LICENSE_MULTIPLE_SDK_SERVICE=32778]="ERR_LICENSE_MULTIPLE_SDK_SERVICE",n[n.ERR_LICENSE_ILLEGAL=32783]="ERR_LICENSE_ILLEGAL",n[n.ERR_TEST_RECOVER=9e3]="ERR_TEST_RECOVER",n[n.ERR_TEST_TRYNEXT=9001]="ERR_TEST_TRYNEXT",n[n.ERR_TEST_RETRY=9002]="ERR_TEST_RETRY"}(ut||(ut={})),function(n){n[n.AUDIENCE_LEVEL_LOW_LATENCY=1]="AUDIENCE_LEVEL_LOW_LATENCY",n[n.AUDIENCE_LEVEL_ULTRA_LOW_LATENCY=2]="AUDIENCE_LEVEL_ULTRA_LOW_LATENCY",n[n.AUDIENCE_LEVEL_SYNC_LATENCY=3]="AUDIENCE_LEVEL_SYNC_LATENCY"}(oN||(oN={})),function(n){n.LEAVE="LEAVE",n.NETWORK_ERROR="NETWORK_ERROR",n.SERVER_ERROR="SERVER_ERROR",n.UID_BANNED="UID_BANNED",n.IP_BANNED="IP_BANNED",n.CHANNEL_BANNED="CHANNEL_BANNED",n.FALLBACK="FALLBACK",n.LICENSE_MISSING="LICENSE_MISSING",n.LICENSE_EXPIRED="LICENSE_EXPIRED",n.LICENSE_MINUTES_EXCEEDED="LICENSE_MINUTES_EXCEEDED",n.LICENSE_PERIOD_INVALID="LICENSE_PERIOD_INVALID",n.LICENSE_MULTIPLE_SDK_SERVICE="LICENSE_MULTIPLE_SDK_SERVICE",n.LICENSE_ILLEGAL="LICENSE_ILLEGAL"}(yn||(yn={})),function(n){n.CONNECTION_STATE_CHANGE="connection-state-change",n.MEDIA_RECONNECT_START="media-reconnect-start",n.MEDIA_RECONNECT_END="media-reconnect-end",n.IS_USING_CLOUD_PROXY="is-using-cloud-proxy",n.USER_JOINED="user-joined",n.USER_LEAVED="user-left",n.USER_PUBLISHED="user-published",n.USER_UNPUBLISHED="user-unpublished",n.USER_INFO_UPDATED="user-info-updated",n.CLIENT_BANNED="client-banned",n.CHANNEL_MEDIA_RELAY_STATE="channel-media-relay-state",n.CHANNEL_MEDIA_RELAY_EVENT="channel-media-relay-event",n.VOLUME_INDICATOR="volume-indicator",n.CRYPT_ERROR="crypt-error",n.ON_TOKEN_PRIVILEGE_WILL_EXPIRE="token-privilege-will-expire",n.ON_TOKEN_PRIVILEGE_DID_EXPIRE="token-privilege-did-expire",n.NETWORK_QUALITY="network-quality",n.STREAM_TYPE_CHANGED="stream-type-changed",n.STREAM_FALLBACK="stream-fallback",n.RECEIVE_METADATA="receive-metadata",n.STREAM_MESSAGE="stream-message",n.LIVE_STREAMING_ERROR="live-streaming-error",n.LIVE_STREAMING_WARNING="live-streaming-warning",n.INJECT_STREAM_STATUS="stream-inject-status",n.EXCEPTION="exception",n.ERROR="error",n.P2P_LOST="p2p_lost",n.JOIN_FALLBACK_TO_PROXY="join-fallback-to-proxy",n.CHANNEL_FALLBACK_TO_WEBSOCKET="channel-fallback-to-websocket",n.MEDIA_CONNECTION_TYPE_CHANGE="media-connection-type-change",n.PUBLISHED_USER_LIST="published-user-list",n.CONTENT_INSPECT_CONNECTION_STATE_CHANGE="content-inspect-connection-state-change",n.CONTENT_INSPECT_ERROR="content-inspect-error",n.CONTENT_INSPECT_RESULT="content-inspect-result",n.IMAGE_MODERATION_CONNECTION_STATE_CHANGE="image-moderation-connection-state-change"}(Jt||(Jt={})),function(n){n.NETWORK_ERROR="NETWORK_ERROR",n.SERVER_ERROR="SERVER_ERROR",n.MULTI_IP="MULTI_IP",n.TIMEOUT="TIMEOUT",n.OFFLINE="OFFLINE",n.LEAVE="LEAVE",n.P2P_FAILED="P2P_FAILED",n.FALLBACK="FALLBACK"}(Go||(Go={})),function(n){n.CONNECTING="connecting",n.CONNECTED="connected",n.RECONNECTING="reconnecting",n.CLOSED="closed"}(wn||(wn={})),function(n){n.WS_CONNECTED="ws_connected",n.WS_RECONNECTING="ws_reconnecting",n.WS_CLOSED="ws_closed",n.WS_RECONNECT_WAITTING_FINISH="ws_reconnect_waitting_finish",n.WS_RECONNECT_CREATE_CONNECTION="ws_reconnect_create_connection",n.ON_BINARY_DATA="on_binary_data",n.REQUEST_RECOVER="request_recover",n.REQUEST_JOIN_INFO="request_join_info",n.REQUEST_REJOIN_INFO="req_rejoin_info",n.IS_P2P_DISCONNECTED="is_p2p_dis",n.DISCONNECT_P2P="dis_p2p",n.ABORT_P2P_EXECUTION="abort_p2p_execution",n.NEED_RENEW_SESSION="need-sid",n.REPORT_JOIN_GATEWAY="report_join_gateway",n.REQUEST_TIMEOUT="request_timeout",n.REQUEST_SUCCESS="request_success",n.JOIN_RESPONSE="join_response",n.DATACHANNEL_PRECONNECT="datachannel_preconnect",n.DATACHANNEL_CONNECTING="datachannel_connecting",n.DATACHANNEL_FAILBACK="datachannel_failback"}(rt||(rt={})),function(n){n.PING="ping",n.PING_BACK="ping_back",n.JOIN="join_v3",n.REJOIN="rejoin_v3",n.LEAVE="leave",n.SET_CLIENT_ROLE="set_client_role",n.PUBLISH="publish",n.UNPUBLISH="unpublish",n.SUBSCRIBE="subscribe",n.SUBSCRIBE_STREAMS="subscribe_streams",n.UNSUBSCRIBE="unsubscribe",n.UNSUBSCRIBE_STREAMS="unsubscribe_streams",n.SUBSCRIBE_CHANGE="subscribe_change",n.TRAFFIC_STATS="traffic_stats",n.RENEW_TOKEN="renew_token",n.SWITCH_VIDEO_STREAM="switch_video_stream",n.DEFAULT_VIDEO_STREAM="default_video_stream",n.SET_FALLBACK_OPTION="set_fallback_option",n.GATEWAY_INFO="gateway_info",n.CONTROL="control",n.SEND_METADATA="send_metadata",n.DATA_STREAM="data_stream",n.PICK_SVC_LAYER="pick_svc_layer",n.RESTART_ICE="restart_ice",n.CONNECT_PC="connect_pc",n.SET_VIDEO_PROFILE="set_video_profile",n.SET_PARAMETER="set_parameter"}(mt||(mt={})),function(n){n.PUBLISH_STATS="publish_stats",n.PUBLISH_RELATED_STATS="publish_related_stats",n.SUBSCRIBE_STATS="subscribe_stats",n.SUBSCRIBE_RELATED_STATS="subscribe_related_stats",n.WS_INFLATE_DATA_LENGTH="ws_inflate_data_length",n.DENOISER_STATS="denoiser_stats",n.TRANSPORT_STATS="transport_stats",n.EXTENSION_USAGE_STATS="extension_usage_stats"}(Pa||(Pa={})),function(n){n.ON_USER_ONLINE="on_user_online",n.ON_USER_OFFLINE="on_user_offline",n.ON_STREAM_FALLBACK_UPDATE="on_stream_fallback_update",n.ON_PUBLISH_STREAM="on_publish_stream",n.ON_UPLINK_STATS="on_uplink_stats",n.ON_P2P_LOST="on_p2p_lost",n.ON_REMOVE_STREAM="on_remove_stream",n.ON_ADD_AUDIO_STREAM="on_add_audio_stream",n.ON_ADD_VIDEO_STREAM="on_add_video_stream",n.ON_TOKEN_PRIVILEGE_WILL_EXPIRE="on_token_privilege_will_expire",n.ON_TOKEN_PRIVILEGE_DID_EXPIRE="on_token_privilege_did_expire",n.ON_USER_BANNED="on_user_banned",n.ON_USER_LICENSE_BANNED="on_user_license_banned",n.ON_NOTIFICATION="on_notification",n.ON_CRYPT_ERROR="on_crypt_error",n.MUTE_AUDIO="mute_audio",n.MUTE_VIDEO="mute_video",n.UNMUTE_AUDIO="unmute_audio",n.UNMUTE_VIDEO="unmute_video",n.ON_P2P_OK="on_p2p_ok",n.RECEIVE_METADATA="receive_metadata",n.ON_DATA_STREAM="on_data_stream",n.ENABLE_LOCAL_VIDEO="enable_local_video",n.DISABLE_LOCAL_VIDEO="disable_local_video",n.ENABLE_LOCAL_AUDIO="enable_local_audio",n.DISABLE_LOCAL_AUDIO="disable_local_audio",n.ON_PUBLISHED_USER_LIST="on_published_user_list"}(Bt||(Bt={})),function(n){n.CONNECTION_STATE_CHANGE="CONNECTION_STATE_CHANGE",n.NEED_ANSWER="NEED_ANSWER",n.NEED_RENEGOTIATE="NEED_RENEGOTIATE",n.P2P_LOST="P2P_LOST",n.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",n.NEED_UNPUB="NEED_UNPUB",n.NEED_UNSUB="NEED_UNSUB",n.NEED_UPLOAD="NEED_UPLOAD",n.NEED_CONTROL="NEED_CONTROL",n.START_RECONNECT="START_RECONNECT",n.END_RECONNECT="END_RECONNECT",n.NEED_SIGNAL_RTT="NEED_SIGNAL_RTT"}(oU||(oU={})),function(n){n.AUDIO_SOURCE_STATE_CHANGE="audio_source_state_change",n.RECEIVE_TRACK_BUFFER="receive_track_buffer",n.ON_AUDIO_BUFFER="on_audio_buffer",n.UPDATE_SOURCE="update_source"}(ma||(ma={}));const aN={sendVolumeLevel:0,sendBitrate:0,sendBytes:0,sendPackets:0,sendPacketsLost:0,currentPacketLossRate:0},sN={sendBytes:0,sendBitrate:0,sendPackets:0,sendPacketsLost:0,sendResolutionHeight:0,sendResolutionWidth:0,captureResolutionHeight:0,captureResolutionWidth:0,targetSendBitrate:0,totalDuration:0,totalFreezeTime:0,currentPacketLossRate:0},lU={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveLevel:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1},mq={uplinkNetworkQuality:0,downlinkNetworkQuality:0},uU={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,receiveResolutionHeight:0,receiveResolutionWidth:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1};let bt,Yr,Zd;(function(n){n.CONNECTED="websocket:connected",n.RECONNECTING="websocket:reconnecting",n.WILL_RECONNECT="websocket:will_reconnect",n.CLOSED="websocket:closed",n.FAILED="websocket:failed",n.ON_MESSAGE="websocket:on_message",n.REQUEST_NEW_URLS="websocket:request_new_urls",n.RECONNECT_WAITTING_FINISH="websocket:reconnect_waitting_finish",n.RECONNECT_CREATE_CONNECTION="websocket:reconnect_create_connection",n.ON_TOKEN_PRIVILEGE_DID_EXPIRE="websocket:on_token_privilege_did_expire"})(bt||(bt={})),function(n){n.TRANSCODE="mix_streaming",n.RAW="raw_streaming",n.INJECT="inject_streaming"}(Yr||(Yr={})),function(n){n[n.INJECT_STREAM_STATUS_START_SUCCESS=0]="INJECT_STREAM_STATUS_START_SUCCESS",n[n.INJECT_STREAM_STATUS_START_ALREADY_EXISTS=1]="INJECT_STREAM_STATUS_START_ALREADY_EXISTS",n[n.INJECT_STREAM_STATUS_START_UNAUTHORIZED=2]="INJECT_STREAM_STATUS_START_UNAUTHORIZED",n[n.INJECT_STREAM_STATUS_START_TIMEOUT=3]="INJECT_STREAM_STATUS_START_TIMEOUT",n[n.INJECT_STREAM_STATUS_START_FAILED=4]="INJECT_STREAM_STATUS_START_FAILED",n[n.INJECT_STREAM_STATUS_STOP_SUCCESS=5]="INJECT_STREAM_STATUS_STOP_SUCCESS",n[n.INJECT_STREAM_STATUS_STOP_NOT_FOUND=6]="INJECT_STREAM_STATUS_STOP_NOT_FOUND",n[n.INJECT_STREAM_STATUS_STOP_UNAUTHORIZED=7]="INJECT_STREAM_STATUS_STOP_UNAUTHORIZED",n[n.INJECT_STREAM_STATUS_STOP_TIMEOUT=8]="INJECT_STREAM_STATUS_STOP_TIMEOUT",n[n.INJECT_STREAM_STATUS_STOP_FAILED=9]="INJECT_STREAM_STATUS_STOP_FAILED",n[n.INJECT_STREAM_STATUS_BROKEN=10]="INJECT_STREAM_STATUS_BROKEN"}(Zd||(Zd={}));const gq={alpha:1,height:640,width:360,x:0,y:0,zOrder:0,audioChannel:0},cN={x:0,y:0,width:160,height:160,zOrder:255,alpha:1};function lN(n,r){Ji(n.url,"".concat(r,".url"),1,1e3,!1),rr(n.x)||Vn(n.x,"".concat(r,".x"),0,1e4),rr(n.y)||Vn(n.y,"".concat(r,".y"),0,1e4),rr(n.width)||Vn(n.width,"".concat(r,".width"),0,1e4),rr(n.height)||Vn(n.height,"".concat(r,".height"),0,1e4),rr(n.zOrder)||Vn(n.zOrder,"".concat(r,".zOrder"),0,255),rr(n.alpha)||Vn(n.alpha,"".concat(r,".alpha"),0,1,!1)}const vq={audioBitrate:48,audioChannels:1,audioSampleRate:48e3,backgroundColor:0,height:360,lowLatency:!1,videoBitrate:400,videoCodecProfile:100,videoCodecType:1,videoFrameRate:15,videoGop:30,width:640,images:[],userConfigs:[],userConfigExtraInfo:""},Eq={audioBitrate:48,audioChannels:2,audioVolume:100,audioSampleRate:48e3,height:0,width:0,videoBitrate:400,videoFramerate:15,videoGop:30};let mc,Qm,br,dU,eo,il,No,eh,Xr,lr,Vr,WT,Et,ai,Zm,uN,dN,jE,th,e0,nn;function hU(n){if(!n.channelName)throw new re(q.INVALID_PARAMS,"invalid channelName in info");if(typeof n.uid!="number")throw new re(q.INVALID_PARAMS,"invalid uid in info, uid must be a number");return n.token&&Ji(n.token,"info.token",1,2047),nN(n.uid),tN(n.channelName),!0}function fU(n){return Si(n,"mediaSource",["screen","window","application"]),!0}(function(n){n.WARNING="@live_uap-warning",n.ERROR="@line_uap-error",n.PUBLISH_STREAM_STATUS="@live_uap-publish-status",n.INJECT_STREAM_STATUS="@live_uap-inject-status",n.WORKER_STATUS="@live_uap-worker-status",n.REQUEST_NEW_ADDRESS="@live_uap-request-address"})(mc||(mc={})),function(n){n.REQUEST_WORKER_MANAGER_LIST="@live_req_worker_manager"}(Qm||(Qm={})),function(n){n[n.LIVE_STREAM_RESPONSE_SUCCEED=200]="LIVE_STREAM_RESPONSE_SUCCEED",n[n.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM=454]="LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM",n[n.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR=450]="LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR",n[n.LIVE_STREAM_RESPONSE_BAD_STREAM=451]="LIVE_STREAM_RESPONSE_BAD_STREAM",n[n.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR=400]="LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR",n[n.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST=404]="LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST",n[n.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED=456]="LIVE_STREAM_RESPONSE_NOT_AUTHORIZED",n[n.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE=457]="LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE",n[n.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN=429]="LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN",n[n.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH=452]="LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH",n[n.LIVE_STREAM_RESPONSE_NOT_SUPPORTED=453]="LIVE_STREAM_RESPONSE_NOT_SUPPORTED",n[n.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM=455]="LIVE_STREAM_RESPONSE_MAX_STREAM_NUM",n[n.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR=500]="LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR",n[n.LIVE_STREAM_RESPONSE_WORKER_LOST=501]="LIVE_STREAM_RESPONSE_WORKER_LOST",n[n.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT=502]="LIVE_STREAM_RESPONSE_RESOURCE_LIMIT",n[n.LIVE_STREAM_RESPONSE_WORKER_QUIT=503]="LIVE_STREAM_RESPONSE_WORKER_QUIT",n[n.ERROR_FAIL_SEND_MESSAGE=504]="ERROR_FAIL_SEND_MESSAGE",n[n.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE=30]="PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE",n[n.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT=31]="PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT",n[n.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH=32]="PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH",n[n.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN=33]="PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN"}(br||(br={})),function(n){n.CONNECT_FAILED="connect failed",n.CONNECT_TIMEOUT="connect timeout",n.WS_DISCONNECTED="websocket disconnected",n.REQUEST_TIMEOUT="request timeout",n.REQUEST_FAILED="request failed",n.WAIT_STATUS_TIMEOUT="wait status timeout",n.WAIT_STATUS_ERROR="wait status error",n.BAD_STATE="bad state",n.WS_ABORT="ws abort",n.AP_REQUEST_TIMEOUT="AP request timeout",n.AP_JSON_PARSE_ERROR="AP json parse error",n.AP_REQUEST_ERROR="AP request error",n.AP_REQUEST_ABORT="AP request abort"}(dU||(dU={})),function(n){n[n.SetSdkProfile=0]="SetSdkProfile",n[n.SetSourceChannel=1]="SetSourceChannel",n[n.SetSourceUserId=2]="SetSourceUserId",n[n.SetDestChannel=3]="SetDestChannel",n[n.StartPacketTransfer=4]="StartPacketTransfer",n[n.StopPacketTransfer=5]="StopPacketTransfer",n[n.UpdateDestChannel=6]="UpdateDestChannel",n[n.Reconnect=7]="Reconnect",n[n.SetVideoProfile=8]="SetVideoProfile"}(eo||(eo={})),function(n){n.NETWORK_DISCONNECTED="NETWORK_DISCONNECTED",n.NETWORK_CONNECTED="NETWORK_CONNECTED",n.PACKET_JOINED_SRC_CHANNEL="PACKET_JOINED_SRC_CHANNEL",n.PACKET_JOINED_DEST_CHANNEL="PACKET_JOINED_DEST_CHANNEL",n.PACKET_SENT_TO_DEST_CHANNEL="PACKET_SENT_TO_DEST_CHANNEL",n.PACKET_RECEIVED_VIDEO_FROM_SRC="PACKET_RECEIVED_VIDEO_FROM_SRC",n.PACKET_RECEIVED_AUDIO_FROM_SRC="PACKET_RECEIVED_AUDIO_FROM_SRC",n.PACKET_UPDATE_DEST_CHANNEL="PACKET_UPDATE_DEST_CHANNEL",n.PACKET_UPDATE_DEST_CHANNEL_REFUSED="PACKET_UPDATE_DEST_CHANNEL_REFUSED",n.PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE="PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE"}(il||(il={})),function(n){n.RELAY_STATE_IDLE="RELAY_STATE_IDLE",n.RELAY_STATE_CONNECTING="RELAY_STATE_CONNECTING",n.RELAY_STATE_RUNNING="RELAY_STATE_RUNNING",n.RELAY_STATE_FAILURE="RELAY_STATE_FAILURE"}(No||(No={})),function(n){n.RELAY_OK="RELAY_OK",n.SERVER_CONNECTION_LOST="SERVER_CONNECTION_LOST",n.SRC_TOKEN_EXPIRED="SRC_TOKEN_EXPIRED",n.DEST_TOKEN_EXPIRED="DEST_TOKEN_EXPIRED"}(eh||(eh={})),function(n){n.High="high",n.Low="low",n.Audio="audio",n.Screen="screen",n.ScreenLow="screen_low"}(Xr||(Xr={})),function(n){n.DISCONNECT="disconnect",n.CONNECTION_STATE_CHANGE="connection-state-change",n.NETWORK_QUALITY="network-quality",n.STREAM_TYPE_CHANGE="stream-type-change",n.IS_P2P_DISCONNECTED="is-p2p-dis",n.DISCONNECT_P2P="dis-p2p",n.REQUEST_NEW_GATEWAY_LIST="req-gate-url",n.NEED_RENEW_SESSION="need-sid",n.REQUEST_P2P_CONNECTION_PARAMS="request-p2p-connection-params",n.JOIN_RESPONSE="join-response",n.REQUEST_DC_CONNECTION_PARAMS="request-dc-connection-params",n.RESET_CONNECTION_EVENTS="reset-connection-events",n.DATACHANNEL_PRECONNECT="datachannel_preconnect",n.DATACHANNEL_FAILBACK="datachannel_failback",n.RESET_SIGNAL="reset-signal"}(lr||(lr={})),function(n){n[n.Nothing=0]="Nothing",n[n.Audio=1]="Audio",n[n.LwoVideo=2]="LwoVideo",n[n.Video=4]="Video",n[n.Data=8]="Data"}(Vr||(Vr={})),function(n){n[n.websocket=0]="websocket",n[n.datachannel=1]="datachannel"}(WT||(WT={})),function(n){n.NEED_RENEGOTIATE="@need_renegotiate",n.NEED_REPLACE_TRACK="@need_replace_track",n.NEED_CLOSE="@need_close",n.NEED_ENABLE_TRACK="@need_enable_track",n.NEED_DISABLE_TRACK="@need_disable_track",n.NEED_SESSION_ID="@need_sid",n.SET_OPTIMIZATION_MODE="@set_optimization_mode",n.GET_STATS="@get_stats",n.GET_LOW_VIDEO_TRACK="@get_low_video_track",n.NEED_RESET_REMOTE_SDP="@need_reset_remote_sdp",n.NEED_UPDATE_VIDEO_ENCODER="@need_update_video_encoder",n.NEED_MUTE_TRACK="@need_mute_track",n.NEED_UNMUTE_TRACK="@need_unmute_track"}(Et||(Et={})),function(n){n.SCREEN_TRACK="screen_track",n.CUSTOM_TRACK="custome_track",n.LOW_STREAM="low_stream"}(ai||(ai={})),function(n){n[n.HIGH_STREAM=0]="HIGH_STREAM",n[n.LOW_STREAM=1]="LOW_STREAM"}(Zm||(Zm={})),function(n){n[n.HIGH_STREAM=0]="HIGH_STREAM",n[n.LOW_STREAM=1]="LOW_STREAM"}(uN||(uN={})),function(n){n[n.DISABLE=0]="DISABLE",n[n.LOW_STREAM=1]="LOW_STREAM",n[n.AUDIO_ONLY=2]="AUDIO_ONLY"}(dN||(dN={})),function(n){n.TRANSCEIVER_UPDATED="transceiver-updated"}(jE||(jE={})),function(n){n.SOURCE_STATE_CHANGE="source-state-change",n.TRACK_ENDED="track-ended",n.BEAUTY_EFFECT_OVERLOAD="beauty-effect-overload",n.VIDEO_ELEMENT_VISIBLE_STATUS="video-element-visible-status",n.CLOSED="closed"}(th||(th={})),function(n){n.FIRST_FRAME_DECODED="first-frame-decoded",n.VIDEO_ELEMENT_VISIBLE_STATUS="video-element-visible-status"}(e0||(e0={})),function(n){n.CHINA="CHINA",n.ASIA="ASIA",n.NORTH_AMERICA="NORTH_AMERICA",n.EUROPE="EUROPE",n.JAPAN="JAPAN",n.INDIA="INDIA",n.KOREA="KOREA",n.HKMC="HKMC",n.US="US",n.OCEANIA="OCEANIA",n.SOUTH_AMERICA="SOUTH_AMERICA",n.AFRICA="AFRICA",n.OVERSEA="OVERSEA",n.GLOBAL="GLOBAL",n.EXTENSIONS="EXTENSIONS"}(nn||(nn={}));const _q=[nn.AFRICA,nn.ASIA,nn.CHINA,nn.EUROPE,nn.GLOBAL,nn.INDIA,nn.JAPAN,nn.NORTH_AMERICA,nn.OCEANIA,nn.OVERSEA,nn.SOUTH_AMERICA];let yi;(function(n){n.CHINA="CN",n.ASIA="AS",n.NORTH_AMERICA="NA",n.EUROPE="EU",n.JAPAN="JP",n.INDIA="IN",n.KOREA="KR",n.HKMC="HK",n.US="US",n.OCEANIA="OC",n.SOUTH_AMERICA="SA",n.AFRICA="AF",n.OVERSEA="OVERSEA",n.GLOBAL="GLOBAL",n.EXTENSIONS="GLOBAL"})(yi||(yi={}));const GT={CHINA:{},ASIA:{CODE:yi.ASIA,WEBCS_DOMAIN:["ap-web-1-asia.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-asia.agora.io"],PROXY_CS:["proxy-ap-web-asia.agora.io"],CDS_AP:["cds-ap-web-asia.agora.io","cds-ap-web-asia2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-asia.agora.io","sua-ap-web-asia2.agora.io"],UAP_AP:["uap-ap-web-asia.agora.io","uap-ap-web-asia2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-asia.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-asia.agora.io"],LOG_UPLOAD_SERVER:["logservice-asia.agora.io"],PROXY_SERVER_TYPE3:["southeast-asia.webrtc-cloud-proxy.sd-rtn.com"]},NORTH_AMERICA:{CODE:yi.NORTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-north-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-north-america.agora.io"],PROXY_CS:["proxy-ap-web-america.agora.io"],CDS_AP:["cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],UAP_AP:["uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-north-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-north-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-north-america.agora.io"],PROXY_SERVER_TYPE3:["east-usa.webrtc-cloud-proxy.sd-rtn.com"]},EUROPE:{CODE:yi.EUROPE,WEBCS_DOMAIN:["ap-web-1-europe.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-europe.agora.io"],PROXY_CS:["proxy-ap-web-europe.agora.io"],CDS_AP:["cds-ap-web-europe.agora.io","cds-ap-web-europe2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-europe.agora.io","sua-ap-web-europe.agora.io"],UAP_AP:["uap-ap-web-europe.agora.io","uap-ap-web-europe2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-europe.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-europe.agora.io"],LOG_UPLOAD_SERVER:["logservice-europe.agora.io"],PROXY_SERVER_TYPE3:["europe.webrtc-cloud-proxy.sd-rtn.com"]},JAPAN:{CODE:yi.JAPAN,WEBCS_DOMAIN:["ap-web-1-japan.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-japan.agora.io"],PROXY_CS:["proxy-ap-web-japan.agora.io"],CDS_AP:["cds-ap-web-japan.agora.io","cds-ap-web-japan2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-japan.agora.io","sua-ap-web-japan2.agora.io"],UAP_AP:["uap-ap-web-japan.agora.io","	uap-ap-web-japan2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-japan.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-japan.agora.io"],LOG_UPLOAD_SERVER:["logservice-japan.agora.io"],PROXY_SERVER_TYPE3:["japan.webrtc-cloud-proxy.sd-rtn.com"]},INDIA:{CODE:yi.INDIA,WEBCS_DOMAIN:["ap-web-1-india.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-india.agora.io"],PROXY_CS:["proxy-ap-web-india.agora.io"],CDS_AP:["cds-ap-web-india.agora.io","cds-ap-web-india2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-india.agora.io","sua-ap-web-india2.agora.io"],UAP_AP:["uap-ap-web-india.agora.io","uap-ap-web-india2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-india.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-india.agora.io"],LOG_UPLOAD_SERVER:["logservice-india.agora.io"],PROXY_SERVER_TYPE3:["india.webrtc-cloud-proxy.sd-rtn.com"]},KOREA:{CODE:yi.KOREA,WEBCS_DOMAIN:["ap-web-1-korea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-korea.agora.io"],PROXY_CS:["proxy-ap-web-korea.agora.io"],CDS_AP:["cds-ap-web-korea.agora.io","cds-ap-web-korea2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-korea.agora.io","sua-ap-web-korea2.agora.io"],UAP_AP:["uap-ap-web-korea.agora.io","uap-ap-web-korea2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-korea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-korea.agora.io"],LOG_UPLOAD_SERVER:["logservice-korea.agora.io"],PROXY_SERVER_TYPE3:["korea.webrtc-cloud-proxy.sd-rtn.com"]},HKMC:{CODE:yi.HKMC,WEBCS_DOMAIN:["ap-web-1-hkmc.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-hkmc.agora.io"],PROXY_CS:["proxy-ap-web-hkmc.agora.io"],CDS_AP:["cds-ap-web-hkmc.agora.io","cds-ap-web-hkmc2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-hkmc.agora.io","sua-ap-web-hkmc2.agora.io"],UAP_AP:["uap-ap-web-hkmc.agora.io","uap-ap-web-hkmc2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-hkmc.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-hkmc.agora.io"],LOG_UPLOAD_SERVER:["logservice-hkmc.agora.io"],PROXY_SERVER_TYPE3:["hkmc.webrtc-cloud-proxy.sd-rtn.com"]},US:{CODE:yi.US,WEBCS_DOMAIN:["ap-web-1-us.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-us.agora.io"],PROXY_CS:["proxy-ap-web-us.agora.io"],CDS_AP:["cds-ap-web-us.agora.io","cds-ap-web-us2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-us.agora.io","sua-ap-web-us2.agora.io"],UAP_AP:["uap-ap-web-us.agora.io","uap-ap-web-us2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-us.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-us.agora.io"],LOG_UPLOAD_SERVER:["logservice-us.agora.io"],PROXY_SERVER_TYPE3:["us.webrtc-cloud-proxy.sd-rtn.com"]},OVERSEA:{CODE:yi.OVERSEA,WEBCS_DOMAIN:["ap-web-1-oversea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oversea.agora.io"],PROXY_CS:["proxy-ap-web-oversea.agora.io"],CDS_AP:["cds-ap-web-oversea.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oversea.agora.io"],UAP_AP:["uap-ap-web-oversea.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oversea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oversea.agora.io"],LOG_UPLOAD_SERVER:["logservice-oversea.agora.io"],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.agora.io"]},GLOBAL:{CODE:yi.GLOBAL,WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-ap-web-3.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-ap-web-3.agora.io"],UAP_AP:["uap-ap-web-1.agora.io","uap-ap-web-3.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2.agora.io"],LOG_UPLOAD_SERVER:["logservice.agora.io"],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com"]},OCEANIA:{CODE:yi.OCEANIA,WEBCS_DOMAIN:["ap-web-1-oceania.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oceania.agora.io"],PROXY_CS:["proxy-ap-web-oceania.agora.io"],CDS_AP:["cds-ap-web-oceania.agora.io","cds-ap-web-oceania2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oceania.agora.io","sua-ap-web-oceania2.agora.io"],UAP_AP:["uap-ap-web-oceania.agora.io","uap-ap-web-oceania2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oceania.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oceania.agora.io"],LOG_UPLOAD_SERVER:["logservice-oceania.agora.io"],PROXY_SERVER_TYPE3:["oceania.webrtc-cloud-proxy.sd-rtn.com"]},SOUTH_AMERICA:{CODE:yi.SOUTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-south-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-south-america.agora.io"],PROXY_CS:["proxy-ap-web-south-america.agora.io"],CDS_AP:["cds-ap-web-south-america.agora.io","cds-ap-web-south-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-south-america.agora.io","sua-ap-web-south-america2.agora.io"],UAP_AP:["uap-ap-web-south-america.agora.io","uap-ap-web-south-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-south-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-south-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-america.agora.io"],PROXY_SERVER_TYPE3:["south-america.webrtc-cloud-proxy.sd-rtn.com"]},AFRICA:{CODE:yi.AFRICA,WEBCS_DOMAIN:["ap-web-1-africa.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-africa.agora.io"],PROXY_CS:["proxy-ap-web-africa.agora.io"],CDS_AP:["cds-ap-web-africa.agora.io","cds-ap-web-africa2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-africa.agora.io","sua-ap-web-africa2.agora.io"],UAP_AP:["uap-ap-web-africa.agora.io","uap-ap-web-africa2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-africa.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-africa.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-africa.agora.io"],PROXY_SERVER_TYPE3:["africa.webrtc-cloud-proxy.sd-rtn.com"]},EXTENSIONS:{}};let BE,pU,Pt,ji,ol,Je,si,on,vo,nh,to,ga,os,as,Jr,cu,mr,al,mU,Da,Ps,rh;zA&&(GT.CHINA={CODE:yi.CHINA,WEBCS_DOMAIN:["webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["proxy-web.ap.sd-rtn.com"],CDS_AP:["cds-web-2.ap.sd-rtn.com","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-web-2.ap.sd-rtn.com","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-web-2.ap.sd-rtn.com","uap-web-4.ap.sd-rtn.com"],EVENT_REPORT_DOMAIN:["web-3.statscollector.sd-rtn.com"],EVENT_REPORT_BACKUP_DOMAIN:["web-4.statscollector.sd-rtn.com"],LOG_UPLOAD_SERVER:["logservice-china.agora.io"],PROXY_SERVER_TYPE3:["east-cn.webrtc-cloud-proxy.sd-rtn.com"]}),function(n){n.UPDATE_BITRATE_LIMIT="update_bitrate_limit"}(BE||(BE={}));class zT extends ur{constructor(r,o){super(),L(this,"onICEConnectionStateChange",void 0),L(this,"onConnectionStateChange",void 0),L(this,"onDTLSTransportStateChange",void 0),L(this,"onDTLSTransportError",void 0),L(this,"onICETransportStateChange",void 0),L(this,"onFirstAudioReceived",void 0),L(this,"onFirstVideoReceived",void 0),L(this,"onFirstAudioDecoded",void 0),L(this,"onFirstVideoDecoded",void 0),L(this,"onFirstVideoDecodedTimeout",void 0),L(this,"onSelectedLocalCandidateChanged",void 0),L(this,"onSelectedRemoteCandidateChanged",void 0),L(this,"establishPromise",void 0)}}(function(n){n.SEND="sendonly",n.RECV="recvonly",n.SENDRECV="sendrecv",n.INACTIVE="inactive"})(pU||(pU={})),function(n){n.VIDEO="video",n.AUDIO="audio"}(Pt||(Pt={})),function(n){n[n.UDP=0]="UDP",n[n.TCP=1]="TCP",n[n.RELAY=2]="RELAY"}(ji||(ji={})),function(n){n[n.FIRST_CONNECTION=0]="FIRST_CONNECTION",n[n.TCP_RESTART=1]="TCP_RESTART",n[n.RELAY_RESTART=2]="RELAY_RESTART",n[n.OLD_FIRST_CONNECTION=10]="OLD_FIRST_CONNECTION",n[n.OLD_RESTART=11]="OLD_RESTART",n[n.DISCONNECTED_OR_FAILED=20]="DISCONNECTED_OR_FAILED"}(ol||(ol={})),function(n){n.LocalVideoTrack="videoTrack",n.LocalAudioTrack="audioTrack",n.LocalVideoLowTrack="videoLowTrack"}(Je||(Je={})),function(n){n.New="new",n.Connected="connected",n.Reconnecting="reconnecting",n.Disconnected="disconnected"}(si||(si={})),function(n){n.StateChange="stateChange",n.IceConnectionStateChange="iceConnectionStateChange",n.RequestMuteLocal="requestMuteLocal",n.RequestUnmuteLocal="requestUnmuteLocal",n.RequestRePublish="requestRePublish",n.RequestReSubscribe="requestReSubscribe",n.RequestUploadStats="requestUploadStats",n.MediaReconnectStart="MediaReconnectStart",n.MediaReconnectEnd="MediaReconnectEnd",n.NeedSignalRTT="NeedSignalRTT",n.RequestRestartICE="RequestRestartIce",n.PeerConnectionStateChange="PeerConnectionStateChange",n.RequestReconnect="RequestReconnect",n.RequestReconnectPC="RequestReconnectPC",n.RequestUnpublishForReconnectPC="RequestUnpublishForReconnectPC",n.P2PLost="P2PLost",n.UpdateVideoEncoder="UpdateVideoEncoder",n.ConnectionTypeChange="ConnectionTypeChange",n.RequestLowStreamParameter="RequestLowStreamParameter",n.QueryClientConnectionState="QueryClientConnectionState"}(on||(on={})),function(n){n.ONLINE="ONLINE",n.OFFLINE="OFFLINE"}(vo||(vo={})),function(n){n.NETWORK_STATE_CHANGE="NETWORK_STATE_CHANGE",n.ONLINE="ONLINE",n.OFFLINE="OFFLINE"}(nh||(nh={})),function(n){n.ON_TRACK="on_track",n.ON_NODE="on_node"}(to||(to={})),function(n){n.REQUEST_UPDATE_CONSTRAINTS="request_update_constraints",n.REQUEST_CONSTRAINTS="request_constraints"}(ga||(ga={})),function(n){n.CONNECTING="CONNECTING",n.RECONNECTING="RECONNECTING",n.CONNECTED="CONNECTED",n.CLOSED="CLOSED"}(os||(os={})),function(n){n[n.CONNECT_AP=0]="CONNECT_AP",n[n.AP_CONNECTED=1]="AP_CONNECTED",n[n.CONNECT_WORKER_MANAGER=2]="CONNECT_WORKER_MANAGER",n[n.WORKER_MANAGER_CONNECTED=3]="WORKER_MANAGER_CONNECTED",n[n.GET_WORKER_MANAGER_RESPONSE=4]="GET_WORKER_MANAGER_RESPONSE",n[n.CONNECT_WORKER=5]="CONNECT_WORKER",n[n.WORKER_CONNECTED=6]="WORKER_CONNECTED",n[n.CLOSED=7]="CLOSED"}(as||(as={})),function(n){n.CONNECTION_STATE_CHANGE="connection-state-change",n.STATE_CHANGE="state-change",n.INSPECT_RESULT="inspect-result",n.CLIENT_LOCAL_VIDEO_TRACK="client-local-video-track",n.REQUEST_NEW_WORKER_URL="request-new-worker-url"}(Jr||(Jr={})),function(n){n.NETWORK_ERROR="NETWORK_ERROR",n.SERVER_ERROR="SERVER_ERROR",n.MULTI_IP="MULTI_IP",n.TIMEOUT="TIMEOUT",n.OFFLINE="OFFLINE",n.LEAVE="LEAVE",n.P2P_FAILED="P2P_FAILED",n.FALLBACK="FALLBACK"}(cu||(cu={})),function(n){n.CONNECTED="transmitter:connected",n.RECONNECTING="transmitter:reconnecting",n.WILL_RECONNECT="transmitter:will_reconnect",n.CLOSED="transmitter:closed",n.FAILED="transmitter:failed",n.ON_MESSAGE="transmitter:on_message",n.REQUEST_NEW_URLS="transmitter:request_new_urls",n.RECONNECT_WAITTING_FINISH="transmitter:reconnect_waitting_finish",n.RECONNECT_CREATE_CONNECTION="transmitter:reconnect_create_connection",n.ON_TOKEN_PRIVILEGE_DID_EXPIRE="transmitter:on_token_privilege_did_expire",n.TO_CONNECT_DATACHANNEL="transmitter:to_connect_datachannel",n.FAILBACK="transmitter:failback"}(mr||(mr={})),function(n){n.CAMERA_CHANGED="camera-changed",n.MICROPHONE_CHANGED="microphone-changed",n.PLAYBACK_DEVICE_CHANGED="playback-device-changed",n.AUDIO_AUTOPLAY_FAILED="audio-autoplay-failed",n.AUTOPLAY_FAILED="autoplay-failed",n.SECURITY_POLICY_VIOLATION="security-policy-violation"}(al||(al={})),function(n){n[n.APP_TYPE_INVALID_VALUE=-1]="APP_TYPE_INVALID_VALUE",n[n.APP_TYPE_NATIVE=0]="APP_TYPE_NATIVE",n[n.APP_TYPE_NATIVE_COCOS=1]="APP_TYPE_NATIVE_COCOS",n[n.APP_TYPE_NATIVE_UNITY=2]="APP_TYPE_NATIVE_UNITY",n[n.APP_TYPE_NATIVE_ELECTRON=3]="APP_TYPE_NATIVE_ELECTRON",n[n.APP_TYPE_NATIVE_FLUTTER=4]="APP_TYPE_NATIVE_FLUTTER",n[n.APP_TYPE_NATIVE_UNREAL=5]="APP_TYPE_NATIVE_UNREAL",n[n.APP_TYPE_NATIVE_XAMARIN=6]="APP_TYPE_NATIVE_XAMARIN",n[n.APP_TYPE_NATIVE_API_CLOUD=7]="APP_TYPE_NATIVE_API_CLOUD",n[n.APP_TYPE_NATIVE_REACT_NATIVE=8]="APP_TYPE_NATIVE_REACT_NATIVE",n[n.APP_TYPE_NATIVE_PYTHON=9]="APP_TYPE_NATIVE_PYTHON",n[n.APP_TYPE_NATIVE_COCOS_CREATOR=10]="APP_TYPE_NATIVE_COCOS_CREATOR",n[n.APP_TYPE_NATIVE_RUST=11]="APP_TYPE_NATIVE_RUST",n[n.APP_TYPE_NATIVE_C_SHARP=12]="APP_TYPE_NATIVE_C_SHARP",n[n.APP_TYPE_NATIVE_CEF=13]="APP_TYPE_NATIVE_CEF",n[n.APP_TYPE_NATIVE_UNI_APP=14]="APP_TYPE_NATIVE_UNI_APP",n[n.APP_TYPE_WEBRTC=1e3]="APP_TYPE_WEBRTC",n[n.APP_TYPE_WEBRTC_REACT=1001]="APP_TYPE_WEBRTC_REACT",n[n.APP_TYPE_WEBRTC_VUE=1002]="APP_TYPE_WEBRTC_VUE",n[n.APP_TYPE_WEBRTC_ANGULAR=1003]="APP_TYPE_WEBRTC_ANGULAR"}(mU||(mU={})),function(n){n.CONNECTING="CONNECTING",n.RECONNECTING="RECONNECTING",n.CONNECTED="CONNECTED",n.CLOSED="CLOSED"}(Da||(Da={})),function(n){n.CONNECTION_STATE_CHANGE="connection-state-change",n.STATE_CHANGE="state-change",n.INSPECT_RESULT="inspect-result",n.CLIENT_LOCAL_VIDEO_TRACK="client-local-video-track",n.REQUEST_NEW_WORKER_URL="request-new-worker-url"}(Ps||(Ps={})),function(n){n[n.CONNECT_AP=0]="CONNECT_AP",n[n.AP_CONNECTED=1]="AP_CONNECTED",n[n.CONNECT_WORKER_MANAGER=2]="CONNECT_WORKER_MANAGER",n[n.WORKER_MANAGER_CONNECTED=3]="WORKER_MANAGER_CONNECTED",n[n.GET_WORKER_MANAGER_RESPONSE=4]="GET_WORKER_MANAGER_RESPONSE",n[n.CONNECT_WORKER=5]="CONNECT_WORKER",n[n.WORKER_CONNECTED=6]="WORKER_CONNECTED",n[n.CLOSED=7]="CLOSED"}(rh||(rh={}));const Eo={getDisplayMedia:!1,getStreamFromExtension:!1,supportUnifiedPlan:!1,supportMinBitrate:!1,supportSetRtpSenderParameters:!1,supportDualStream:!0,webAudioMediaStreamDest:!1,supportReplaceTrack:!1,supportWebGL:!1,webAudioWithAEC:!1,supportRequestFrame:!1,supportShareAudio:!1,supportDualStreamEncoding:!1,supportDataChannel:!1,supportPCSetConfiguration:!1,supportWebRTCEncodedTransform:!1};function Pr(){return Eo}let mi;(function(n){n[n.CHOOSE_SERVER=11]="CHOOSE_SERVER",n[n.CLOUD_PROXY=18]="CLOUD_PROXY",n[n.CLOUD_PROXY_5=20]="CLOUD_PROXY_5",n[n.CLOUD_PROXY_FALLBACK=26]="CLOUD_PROXY_FALLBACK"})(mi||(mi={}));var Sq=Ce,$E=Array.isArray||function(n){return Sq(n)=="Array"},yq=O,gU=$E,Cq=yf,Tq=At,bq=Ar("species"),vU=yq.Array,Rq=function(n){var r;return gU(n)&&(r=n.constructor,(Cq(r)&&(r===vU||gU(r.prototype))||Tq(r)&&(r=r[bq])===null)&&(r=void 0)),r===void 0?vU:r},EU=function(n,r){return new(Rq(n))(r===0?0:r)},Iq=zh,wq=Fe,Oq=Ii,Aq=Wl,Nq=EU,_U=T([].push),ih=function(n){var r=n==1,o=n==2,s=n==3,l=n==4,d=n==6,p=n==7,_=n==5||d;return function(S,I,b,A){for(var F,W,Z=Oq(S),ee=wq(Z),te=Iq(I,b),Ee=Aq(ee),ye=0,Pe=A||Nq,Xe=r?Pe(S,Ee):o||p?Pe(S,0):void 0;Ee>ye;ye++)if((_||ye in ee)&&(W=te(F=ee[ye],ye,Z),n))if(r)Xe[ye]=W;else if(W)switch(n){case 3:return!0;case 5:return F;case 6:return ye;case 2:_U(Xe,F)}else switch(n){case 4:return!1;case 7:_U(Xe,F)}return d?-1:s||l?l:Xe}},SU={forEach:ih(0),map:ih(1),filter:ih(2),some:ih(3),every:ih(4),find:ih(5),findIndex:ih(6),filterReject:ih(7)},xq=SU.forEach,yU=Ap("forEach")?[].forEach:function(n){return xq(this,n,arguments.length>1?arguments[1]:void 0)};Rn({target:"Array",proto:!0,forced:[].forEach!=yU},{forEach:yU});var Pq=wi("Array").forEach,Dq=Yl,Lq=pr,kq=R,Mq=Pq,hN=Array.prototype,Uq={DOMTokenList:!0,NodeList:!0},Fq=function(n){var r=n.forEach;return n===hN||kq(hN,n)&&r===hN.forEach||Lq(Uq,Dq(n))?Mq:r},Vq=Ii,CU=qi;Rn({target:"Object",stat:!0,forced:c(function(){CU(1)})},{keys:function(n){return CU(Vq(n))}});var jq=it.Object.keys,Bq=sy,$q=Rn,Hq=$E,Wq=T([].reverse),TU=[1,2];$q({target:"Array",proto:!0,forced:String(TU)===String(TU.reverse())},{reverse:function(){return Hq(this)&&(this.length=this.length),Wq(this)}});var Gq=wi("Array").reverse,zq=R,Kq=Gq,fN=Array.prototype,qq=function(n){var r=n.reverse;return n===fN||zq(fN,n)&&r===fN.reverse?Kq:r},Yq=c,Xq=Hn,Jq=Ar("species"),bU=function(n){return Xq>=51||!Yq(function(){var r=[];return(r.constructor={})[Jq]=function(){return{foo:1}},r[n](Boolean).foo!==1})},Qq=Rn,Zq=O,RU=$E,eY=yf,tY=At,IU=tr,nY=Wl,rY=_t,iY=YA,oY=Ar,aY=Av,sY=bU("slice"),cY=oY("species"),pN=Zq.Array,lY=Math.max;Qq({target:"Array",proto:!0,forced:!sY},{slice:function(n,r){var o,s,l,d=rY(this),p=nY(d),_=IU(n,p),S=IU(r===void 0?p:r,p);if(RU(d)&&(o=d.constructor,(eY(o)&&(o===pN||RU(o.prototype))||tY(o)&&(o=o[cY])===null)&&(o=void 0),o===pN||o===void 0))return aY(d,_,S);for(s=new(o===void 0?pN:o)(lY(S-_,0)),l=0;_<S;_++,l++)_ in d&&iY(s,l,d[_]);return s.length=l,s}});var uY=wi("Array").slice,dY=R,hY=uY,mN=Array.prototype,fY=function(n){var r=n.slice;return n===mN||dY(mN,n)&&r===mN.slice?hY:r};function Ne(n,r,o,s,l){var d,p,_,S={};return Fq(d=jq(s)).call(d,function(I){S[I]=s[I]}),S.enumerable=!!S.enumerable,S.configurable=!!S.configurable,("value"in S||S.initializer)&&(S.writable=!0),S=Bq(p=qq(_=fY(o).call(o)).call(_)).call(p,function(I,b){return b(n,r,I)||I},S),l&&S.initializer!==void 0&&(S.value=S.initializer?S.initializer.call(l):void 0,S.initializer=void 0),S.initializer===void 0&&(TT(n,r,S),S=null),S}var pY=wi("Array").keys,mY=Yl,gY=pr,vY=R,EY=pY,gN=Array.prototype,_Y={DOMTokenList:!0,NodeList:!0},Ff=function(n){var r=n.keys;return n===gN||vY(gN,n)&&r===gN.keys||gY(_Y,mY(n))?EY:r};function wU(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function OU(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?wU(Object(o),!0).forEach(function(s){L(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):wU(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}let KT=0,vN=0;function gc(n,r,o,s){return new Le((l,d)=>{r.timeout=r.timeout||de("HTTP_CONNECT_TIMEOUT"),r.responseType=r.responseType||"json",r.data&&!o?(r.data=JSON.stringify(r.data),KT+=a0(r.data)):o&&(r.data.size?KT+=r.data.size:r.data instanceof FormData?KT+=function(p){let _=0;return/DingTalk/i.test(navigator.userAgent)&&p.realFormData&&(p=p.realFormData),p.forEach(S=>{_+=typeof S=="string"?a0(S):S.size}),_+138}(r.data):KT+=a0(JSON.stringify(r.data))),r.headers=r.headers||{},r.headers["Content-Type"]=r.headers["Content-Type"]||"application/json",r.method="POST",r.url=n,ns.request(r).then(p=>{typeof p.data=="string"?vN+=a0(p.data):p.data instanceof ArrayBuffer||p.data instanceof Uint8Array?vN+=p.data.byteLength:vN+=a0(JSON.stringify(p.data)),s&&l({data:p.data,headers:p.headers}),l(p.data)}).catch(p=>{ns.isCancel(p)?d(new re(q.OPERATION_ABORTED,"cancel token canceled")):p.code==="ECONNABORTED"?d(new re(q.NETWORK_TIMEOUT,p.message)):p.response?d(new re(q.NETWORK_RESPONSE_ERROR,p.response.status)):d(new re(q.NETWORK_ERROR,p.message))})})}async function SY(n,r){const o=new Blob([r.data],{type:"buffer"});return await gc(n,OU(OU({},r),{},{data:o,headers:{"Content-Type":"application/octet-stream"}}),!0)}const jr=new class extends ur{set networkState(n){j.info("[".concat(this._moduleName,"]")+"network state changed, "+this._networkState+" -> "+n),this.emit(nh.NETWORK_STATE_CHANGE,n,this._networkState),n===vo.ONLINE?this.emit(nh.ONLINE):n===vo.OFFLINE&&(this.onlineWaiter=new Le(r=>{this.once(nh.ONLINE,()=>{this.onlineWaiter=void 0,r(vo.ONLINE)})}),this.emit(nh.OFFLINE)),this._networkState=n}get networkState(){return this._networkState}constructor(){super(),L(this,"_moduleName","network-indicator"),L(this,"_networkState",vo.ONLINE),L(this,"onlineWaiter",void 0),window.addEventListener("online",()=>{this.networkState=vo.ONLINE}),window.addEventListener("offline",()=>{this.networkState=vo.OFFLINE})}};let EN=!1;const ss=new class extends ur{constructor(){super(...arguments),L(this,"onAutoplayFailed",void 0),L(this,"onAudioAutoplayFailed",void 0)}};function AU(){if(un(),!EN){const n=r=>{r.preventDefault(),EN=!1,Af()?document.body.removeEventListener("click",n,!0):(document.body.removeEventListener("touchstart",n,!0),document.body.removeEventListener("mousedown",n,!0))};EN=!0,Af()?document.body.addEventListener("click",n,!0):(document.body.addEventListener("touchstart",n,!0),document.body.addEventListener("mousedown",n,!0)),j.info("detect media autoplay failed, document: https://docs.agora.io/cn/Voice/autoplay_policy_web_ng?platform=Web"),ss.onAutoplayFailed?ss.onAutoplayFailed():ss.onAudioAutoplayFailed?j.warning(`AgoraRTC.onAudioAutoplayFailed has been deprecated in favor of AgoraRTC.onAutoplayFailed.

  Please refer to the Agora document to migrate the newer API, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web .`):j.warning(`We have detected a media autoplay failed event, and found out that you haven't implemented AgoraRTC.onAutoplayFailed callback yet.

  It will cause audio/video element not playing automatically on some browsers without user interaction, possibly hurting user experiences.

  Please refer to the Agora document to properly handle autoplay failed event, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web .`),ss.emit("autoplay-failed")}}function _N(n){return new TextEncoder().encode(n)}const NU=function(n,r){const o=new Uint8Array(n.byteLength+r.byteLength);return o.set(new Uint8Array(n),0),o.set(new Uint8Array(r),n.byteLength),o},yY=async n=>function(r,o){let s="";return new Uint8Array(r).forEach(l=>{s+=l.toString(o).padStart(2,"0")}),s}(await crypto.subtle.digest("SHA-256",_N(n)),16);function xU(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function Dt(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?xU(Object(o),!0).forEach(function(s){L(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):xU(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}function lt(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return function(r,o,s){const l=s.value;if(typeof l=="function"){const d=n.className||r.__className__||(r.constructor.name==="AgoraRTCClient"?"Client":r.constructor.name);s.value=function(){for(var p=arguments.length,_=new Array(p),S=0;S<p;S++)_[S]=arguments[S];let I=_;if(n.argsMap)try{I=n.argsMap(this,..._)}catch(A){j.warning(A),I=[]}try{JSON.stringify(I)}catch{j.warning("arguments for method ".concat(d,".").concat(String(o)," not serializable for apiInvoke.")),I=[]}const b=(n.report||Ze).reportApiInvoke(this._sessionId||null,{name:"".concat(d,".").concat(String(o)),options:I,tag:cr.TRACER,reportResult:n.reportResult},n.throttleTime);try{const A=l.apply(this,_);return A instanceof Le?A.then(F=>(b.onSuccess(n.reportResult&&F),F)).catch(F=>{throw b.onError(F),F}):(b.onSuccess(n.reportResult&&A),A)}catch(A){throw b.onError(A),A}}}return s}}const Ze=new class{constructor(){L(this,"baseInfoMap",new Map),L(this,"proxyServer",void 0),L(this,"clientList",kf),L(this,"eventUploadTimer",void 0),L(this,"setSessionIdTimer",void 0),L(this,"url",void 0),L(this,"backupUrl",void 0),L(this,"_appId",void 0),L(this,"keyEventUploadPendingItems",[]),L(this,"normalEventUploadPendingItems",[]),L(this,"apiInvokeUploadPendingItems",[]),L(this,"apiInvokeCount",0),L(this,"ltsList",[]),L(this,"lastSendNormalEventTime",Date.now()),L(this,"customReportCounterTimer",void 0),L(this,"customReportCount",0),L(this,"extApiInvoke",async n=>{for(const r of n){const o=Dt(Dt({},r),{},{sid:null,invokeId:++this.apiInvokeCount,tag:cr.TRACER});this.sendApiInvoke(o)}}),this.eventUploadTimer=window.setInterval(this.doSend.bind(this),de("EVENT_REPORT_SEND_INTERVAL")),this.setSessionIdTimer=window.setInterval(this.appendSessionId.bind(this),de("EVENT_REPORT_SEND_INTERVAL"))}adjustSessionStartTime(n){if(!this.baseInfoMap.has(n)&&!this.baseInfoMap.get(n))return void j.error("adjust session ".concat(n," start time, sid is not exist or info is undefined"));const r=this.baseInfoMap.get(n),o=Date.now(),s=r.startTime;r.startTime=o,j.debug("rewrite session ".concat(n," startTime: ").concat(o," , ").concat(o-s,"ms")),this.baseInfoMap.set(n,r)}setAppId(n){this._appId=n}reportApiInvoke(n,r,o){r.timeout=r.timeout||6e4,r.reportResult=r.reportResult===void 0||r.reportResult;const s=Date.now();this.apiInvokeCount+=1;const l=this.apiInvokeCount,d=()=>({tag:r.tag,invokeId:l,sid:n,name:r.name,apiInvokeTime:s,options:r.options,states:r.states||null}),p=!!de("SHOW_REPORT_INVOKER_LOG");p&&j.info("".concat(r.name," start"),r.options);let _=!1;ro(r.timeout).then(()=>{_||(this.sendApiInvoke(Dt(Dt({},d()),{},{error:q.API_INVOKE_TIMEOUT,success:!1})),j.debug("".concat(r.name," timeout")))});const S=new re(q.UNEXPECTED_ERROR,"".concat(r.name,": this api invoke is end"));return{onSuccess:I=>{const b=()=>{if(_)throw S;return _=!0,this.sendApiInvoke(Dt(Dt({},d()),{},{success:!0},r.reportResult&&{result:I})),p&&j.info("".concat(r.name," onSuccess")),I};return o?K4(b,r.name+"Success",o,()=>_=!0):b()},onError:I=>{const b=()=>{if(_)throw I;_=!0,this.sendApiInvoke(Dt(Dt({},d()),{},{success:!1,error:I})),p&&j.info("".concat(r.name," onFailure"),I.toString())};return o?K4(b,r.name+"Error",o,()=>_=!0):b()}}}sessionInit(n,r){if(this.baseInfoMap.has(n))return;const o=Date.now(),s=this.createBaseInfo(n,o);s.cname=r.cname;const l=Object.assign({},{willUploadConsoleLog:de("UPLOAD_LOG"),maxTouchPoints:navigator.maxTouchPoints,areaVersion:zA?"global":"oversea",areas:de("AREAS")&&de("AREAS").join(",")},r.extend),d=Date.now(),p=Dt(Dt({},s),{},{eventType:Vi.SESSION_INIT,appid:r.appid,browser:navigator.userAgent,build:GA,lts:d,elapse:d-o,extend:JSON.stringify(l),mode:r.mode,process:de("PROCESS_ID"),appType:de("APP_TYPE"),success:!0,version:xs});this.send({type:dr.SESSION,data:p},!0)}joinChooseServer(n,r){const o=this.baseInfoMap.get(n);if(!o)return;const s=o.info,l=Date.now(),d=Dt(Dt({},s),{},{eventType:Vi.JOIN_CHOOSE_SERVER,lts:l,eventElapse:l-r.lts,chooseServerAddr:r.csAddr,errorCode:r.ec,elapse:l-o.startTime,success:r.succ,chooseServerAddrList:JSON.stringify(r.serverList),uid:r.uid?parseInt(r.uid):null,cid:r.cid?parseInt(r.cid):null,chooseServerIp:r.csIp||"",opid:r.opid,unilbsServerIds:r.unilbsServerIds,extend:r.extend||void 0,isHttp3:r.isHttp3});this.send({type:dr.JOIN_CHOOSE_SERVER,data:d},!0)}reqUserAccount(n,r){const o=this.baseInfoMap.get(n);if(!o)return;const s=o.info,l=Date.now(),d=Dt(Dt({},s),{},{eventType:Vi.REQ_USER_ACCOUNT,lts:l,success:r.success,serverAddress:r.serverAddr,stringUid:r.stringUid,uid:r.uid,errorCode:r.errorCode,elapse:l-o.startTime,eventElapse:l-r.lts,extend:JSON.stringify(r.extend)});this.send({type:dr.REQ_USER_ACCOUNT,data:d},!0)}joinGateway(n,r){const o=this.baseInfoMap.get(n);if(!o)return;const s=o.info;r.vid&&(s.vid=r.vid),s.uid=r.uid,s.cid=r.cid;const l=Date.now(),{firstSuccess:d,avoidJoinStartTime:p,isProxy:_,addr:S}=r,I=l-(d&&p?p:o.startTime),b=Dt(Dt({},s),{},{eventType:Vi.JOIN_GATEWAY,lts:l,gatewayAddr:r.addr,success:r.succ,errorCode:r.ec,elapse:I,eventElapse:l-r.lts,firstSuccess:d,signalChannel:r.signalChannel}),A=b.success?1:0;if(r.succ&&(o.lastJoinSuccessTime=l),d)this.send({type:dr.JOIN_GATEWAY,data:b},!0);else{let F;if(S)if(_){const Z=S.match(/h=(\d{1,3}-){3}\d{1,3}/g),ee=S.match(/p=[0-9]{1,6}/g);F={isSuccess:A,gatewayIp:Z&&Z.length?Z[0].split("=")[1].replace(/-/g,"."):"",port:ee&&ee.length?ee[0].split("=")[1]:"",isProxy:_?1:0}}else{const Z=S.match(/wss:\/\/(\d{1,3}-){3}\d{1,3}/g),ee=S.match(/:[0-9]{1,6}/g);F={isSuccess:A,gatewayIp:Z&&Z.length?Z[0].split("//")[1].replace(/-/g,"."):"",port:ee&&ee.length?ee[0].split(":")[1]:"",isProxy:_?1:0}}else F={isSuccess:A,gatewayIp:"",port:"",isProxy:_?1:0};delete b.success,delete b.eventType,delete b.firstSuccess,b.vid=Number(b.vid);const W=Object.assign({},b,F,{eventType:Vi.REJOIN_GATEWAY});this.send({type:dr.RE_JOIN_GATEWAY,data:W},!0)}}joinChannelTimeout(n,r){const o=this.baseInfoMap.get(n);if(!o)return;const s=Date.now(),l=Dt(Dt({},o.info),{},{lts:s,timeout:r,elapse:s-o.startTime});this.send({type:dr.JOIN_CHANNEL_TIMEOUT,data:l},!0)}publish(n,r){const o=this.baseInfoMap.get(n);if(!o)return;const s=o.info,l=Date.now(),d=Dt(Dt({},s),{},{eventType:Vi.PUBLISH,lts:l,eventElapse:r.eventElapse,elapse:l-o.startTime,success:r.succ,errorCode:r.ec,videoName:r.videoName,audioName:r.audioName,screenName:r.screenName,screenshare:r.screenshare,audio:r.audio,video:r.video,p2pid:r.p2pid,publishRequestid:r.publishRequestid});this.send({type:dr.PUBLISH,data:d},!0)}subscribe(n,r,o){const s=this.baseInfoMap.get(n);if(!s)return;const l=s.info,d=Date.now(),p=Dt(Dt({},l),{},{eventType:Vi.SUBSCRIBE,lts:d,eventElapse:r.eventElapse,elapse:d-s.startTime,success:r.succ,errorCode:r.ec,video:r.video,audio:r.audio,subscribeRequestid:r.subscribeRequestid,p2pid:r.p2pid},o&&{extend:JSON.stringify({isMassSubscribe:!0})});typeof r.peerid=="string"?p.peerSuid=r.peerid:p.peer=r.peerid,this.send({type:dr.SUBSCRIBE,data:p},!0)}wsCompressorInit(n){var r;const o=[...Ff(r=this.baseInfoMap).call(r)],s=o.length?o[0]:"UnableToGetSid",l=this.baseInfoMap.get(s);if(!l)return;const d=l.info,p=Date.now(),_=Dt(Dt({},d),{},{eventType:Vi.WS_COMPRESSOR_INIT,lts:p,eventElapse:n.eventElapse,elapse:p-l.startTime,status:n.status?1:2});this.send({type:dr.WS_COMPRESSOR_INIT,data:_},!0)}firstRemoteVideoDecode(n,r,o,s){const l=this.baseInfoMap.get(n);if(!l)return;const d=l.info,p=Date.now(),_=Dt(Dt(Dt({},d),s),{},{elapse:p-l.startTime,eventType:r,lts:p,firstDecodeFrame:Math.max(p-l.startTime,0),apEnd:Math.max(s.apEnd-l.startTime,0),apStart:Math.max(s.apStart-l.startTime,0),joinGwEnd:Math.max(s.joinGwEnd-l.startTime,0),joinGwStart:Math.max(s.joinGwStart-l.startTime,0),pcEnd:Math.max(s.pcEnd-l.startTime,0),pcStart:Math.max(s.pcStart-l.startTime,0),subscriberEnd:Math.max(s.subscriberEnd-l.startTime,0),subscriberStart:Math.max(s.subscriberStart-l.startTime,0),videoAddNotify:Math.max(s.videoAddNotify-l.startTime,0)});this.send({type:o,data:_},!0)}firstRemoteFrame(n,r,o,s){const l=this.baseInfoMap.get(n);if(!l)return;const d=l.info,p=Date.now(),_=Dt(Dt(Dt({},d),s),{},{elapse:p-l.startTime,eventType:r,lts:p});this.send({type:o,data:_},!0)}pcStats(n,r){const o=this.baseInfoMap.get(n);if(!o)return;const s=o.info,l=Date.now(),d=Dt(Dt(Dt({},s),r),{},{vid:s.vid===void 0?0:Number(s.vid),elapse:l-o.startTime,eventType:Vi.PC_STATS,lts:l});this.send({type:dr.PC_STATS,data:d},!0)}onGatewayStream(n,r,o,s){const l=this.baseInfoMap.get(n);if(!l)return;const d=l.info,p=Date.now(),_=Dt(Dt(Dt({},d),s),{},{eventType:r,lts:p});this.send({type:o,data:_},!0)}streamSwitch(n,r){const o=this.baseInfoMap.get(n);if(!o)return;const s=o.info,l=Date.now(),d=Dt(Dt({},s),{},{eventType:Vi.STREAM_SWITCH,lts:l,isDual:r.isdual,elapse:l-o.startTime,success:r.succ});this.send({type:dr.STREAM_SWITCH,data:d},!0)}requestProxyAppCenter(n,r){const o=this.baseInfoMap.get(n);if(!o)return;const s=o.info,l=Date.now(),d=Dt(Dt({},s),{},{eventType:Vi.REQUEST_PROXY_APPCENTER,lts:l,eventElapse:l-r.lts,elapse:l-o.startTime,APAddr:r.APAddr,workerManagerList:r.workerManagerList,response:r.response,errorCode:r.ec,success:r.succ});this.send({type:dr.REQUEST_PROXY_APPCENTER,data:d},!0)}requestProxyWorkerManager(n,r){const o=this.baseInfoMap.get(n);if(!o)return;const s=o.info,l=Date.now(),d=Dt(Dt({},s),{},{eventType:Vi.REQUEST_PROXY_WORKER_MANAGER,lts:l,eventElapse:l-r.lts,elapse:l-o.startTime,workerManagerAddr:r.workerManagerAddr,response:r.response,errorCode:r.ec,success:r.succ});this.send({type:dr.REQUEST_PROXY_WORKER_MANAGER,data:d},!0)}setProxyServer(n){this.proxyServer=n,n?j.debug("reportProxyServerurl: ".concat(n)):j.debug("disable reportProxyServerurl: ".concat(n))}peerPublishStatus(n,r){const o=this.baseInfoMap.get(n);if(!o)return;const s=o.info,l=Date.now(),d=Dt(Dt({},s),{},{subscribeElapse:r.subscribeElapse,peer:r.peer,peerPublishDuration:Math.max(r.audioPublishDuration,r.videoPublishDuration),audiotag:r.audioPublishDuration>0?1:-1,videotag:r.videoPublishDuration>0?1:-1,lts:l,elapse:l-o.startTime,joinChannelSuccessElapse:l-(o.lastJoinSuccessTime||l),peerPublishDurationVideo:r.videoPublishDuration,peerPublishDurationAudio:r.audioPublishDuration});this.send({type:dr.PEER_PUBLISH_STATUS,data:d},!0)}workerEvent(n,r){const o=this.baseInfoMap.get(n);if(!o)return;const s=o.info,l=Date.now();(function(d,p,_){const S=d[p];if(!S||typeof S!="string")return[d];d[p]="";const I=a0(JSON.stringify(d));let b=0;const A=[];let F=0;for(let W=0;W<S.length;W++)F+=S.charCodeAt(W)<=127?1:3,F<=_-I||(A[A.length]=Bf(Bf({},d),{},{[p]:S.substring(b,W)}),b=W,F=S.charCodeAt(W)<=127?1:3);return b!==S.length-1&&(A[A.length]=Bf(Bf({},d),{},{[p]:S.substring(b)})),A})(Dt(Dt(Dt({},s),r),{},{elapse:l-o.startTime,lts:l,productType:"WebRTC"}),"payload",1300).forEach(d=>this.send({type:dr.WORKER_EVENT,data:d},!0))}apworkerEvent(n,r){const o=this.baseInfoMap.get(n);if(!o)return;const s=o.info,l=Date.now(),d=Dt(Dt(Dt({},s),r),{},{elapse:l-o.startTime,lts:l});this.send({type:dr.AP_WORKER_EVENT,data:d},!0)}joinWebProxyAP(n,r){const o=this.baseInfoMap.get(n);if(!o)return;const s=o.info,l=Date.now(),d=Dt(Dt(Dt({},s),r),{},{elapse:l-o.startTime,lts:l,extend:r.extend||void 0});this.send({type:dr.JOIN_WEB_PROXY_AP,data:d},!0)}WebSocketQuit(n,r){const o=this.baseInfoMap.get(n);if(!o)return;const s=o.info,l=Date.now(),d=Dt(Dt(Dt({},s),r),{},{elapse:l-o.startTime,lts:l});this.send({type:dr.WEBSOCKET_QUIT,data:d},!0)}async sendCustomReportMessage(n,r){if(this.customReportCount+=r.length,this.customReportCount>de("CUSTOM_REPORT_LIMIT"))throw new re(q.CUSTOM_REPORT_FREQUENCY_TOO_HIGH);this.customReportCounterTimer||(this.customReportCounterTimer=window.setInterval(()=>{this.customReportCount=0},5e3));const o=Date.now(),s=r.map(l=>({type:dr.USER_ANALYTICS,data:Dt(Dt({sid:n},l),{},{lts:o})}));try{de("NEW_REPORT_SERVER")?await this.postDataToStatsCollector2(s):await this.postDataToStatsCollector(s)}catch(l){throw j.error("send custom report message failed",l.toString()),new re(q.CUSTOM_REPORT_SEND_FAILED,l.message)}}autoplayFailed(n,r,o,s){if(!n)return;const l=this.baseInfoMap.get(n);if(!l)return;const d=l.info,p=Date.now(),_=Dt(Dt({},d),{},{vid:d.vid===void 0?0:Number(d.vid),lts:p,elapse:p-l.startTime,cbRegistered:ss.onAutoplayFailed||ss.onAudioAutoplayFailed?1:-1,errorMsg:o,mediaType:r,trackId:s,extend:void 0});this.send({type:dr.AUTOPLAY_FAILED,data:_},!0)}sendApiInvoke(n){const r=de("NOT_REPORT_EVENT");if(n.tag&&r.includes&&r.includes(n.tag))return!1;if(n.sid===null)return this.apiInvokeUploadPendingItems.push(n),!1;const o=this.baseInfoMap.get(n.sid);if(!o)return this.apiInvokeUploadPendingItems.push(n),!1;const{cname:s,uid:l,cid:d}=o.info;n.lts=n.lts||Date.now();let p;if(n.error)if(n.error instanceof re){const{code:S,message:I}=n.error;p=S||I||n.error.toString()}else p=n.error.toString();const _={invokeId:n.invokeId,sid:n.sid,cname:s,cid:d,uid:l,lts:n.lts,success:n.success,elapse:n.lts-o.startTime,execElapse:n.lts-n.apiInvokeTime,apiName:n.name,options:n.options?JSON.stringify(n.options):void 0,execStates:n.states?JSON.stringify(n.states):void 0,execResult:n.result?JSON.stringify(n.result):void 0,errorCode:n.error?p:void 0,errorMsg:n.error?JSON.stringify(n.error):void 0};return this.send({type:dr.API_INVOKE,data:_},!1),!0}appendSessionId(){this.clientList.forEach(n=>{if(n._sessionId){const r=this.apiInvokeUploadPendingItems.length;for(let o=0;o<r;o++){const s=this.apiInvokeUploadPendingItems.shift();s&&(s.sid=n._sessionId,this.sendApiInvoke(Object.assign({},s)))}}})}send(n,r){if(r)return this.keyEventUploadPendingItems.push(n),void this.sendItems(this.keyEventUploadPendingItems,!0);this.normalEventUploadPendingItems.push(n),this.normalEventUploadPendingItems.length>de("NORMAL_EVENT_QUEUE_CAPACITY")&&this.normalEventUploadPendingItems.splice(0,1),this.normalEventUploadPendingItems.length>=10&&this.sendItems(this.normalEventUploadPendingItems,!1)}doSend(){this.keyEventUploadPendingItems.length>0&&this.sendItems(this.keyEventUploadPendingItems,!0),this.normalEventUploadPendingItems.length>0&&Date.now()-this.lastSendNormalEventTime>=5e3&&this.sendItems(this.normalEventUploadPendingItems,!1)}sendItems(n,r){const o=[],s=[];for(;n.length;){const d=n.shift();o.length<20?o.push(d):s.push(d)}n.push(...s);for(const d of[...o]){var l;this.ltsList.indexOf(d.data.lts)!==-1?(d.data.lts=this.ltsList[this.ltsList.length-1]+1,this.ltsList.push(d.data.lts)):(this.ltsList.push(d.data.lts),ZA(l=this.ltsList).call(l,(p,_)=>p-_))}return r||(this.lastSendNormalEventTime=Date.now()),de("ENABLE_EVENT_REPORT")&&o.length&&(de("NEW_REPORT_SERVER")?this.postDataToStatsCollector2(o):this.postDataToStatsCollector(o)).catch((d=>p=>{de("EVENT_REPORT_RETRY")&&(r?this.keyEventUploadPendingItems=this.keyEventUploadPendingItems.concat(d):(this.normalEventUploadPendingItems=this.normalEventUploadPendingItems.concat(d),this.normalEventUploadPendingItems.length>de("NORMAL_EVENT_QUEUE_CAPACITY")&&(this.normalEventUploadPendingItems.splice(0,this.normalEventUploadPendingItems.length-de("NORMAL_EVENT_QUEUE_CAPACITY")),j.warning("report: drop normal events"))))})(o)),n}async postDataToStatsCollector2(n){jr.networkState===vo.OFFLINE&&await Le.race([jr.onlineWaiter,ro(2*Ur.maxRetryTimeout)]);const r=l=>{let d=new Uint8Array;return l.forEach(p=>{const _=_N(JSON.stringify(p.data)),S=new ArrayBuffer(5),I=(A=>{let F=0;return Object.entries(dr).forEach(W=>{let[Z,ee]=W;ee===A.type&&(F=iN[Z])}),F})(p),b=new DataView(S);b.setUint16(0,_.byteLength,!0),b.setUint8(2,255&I),b.setUint8(3,I>>>8&255),b.setUint8(4,I>>>16&255),d=NU(d,new Uint8Array(S)),d=NU(d,_)}),d},o="event";let s=this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(de("NEW_REPORT_SERVER_DOMAINS")[0],"&p=443&d=").concat(o):"https://".concat(de("NEW_REPORT_SERVER_DOMAINS")[0],"/").concat(o);for(let l=0;l<2;l+=1){l===1&&(s=this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(de("NEW_REPORT_SERVER_DOMAINS")[1],"&p=443&d=").concat(o):"https://".concat(de("NEW_REPORT_SERVER_DOMAINS")[1],"/").concat(o));try{await gc(s,{timeout:1e4,data:r(n),headers:Dt(Dt({biz:"webrtc",sendts:Math.round(Date.now()/1e3),debug:"false"},this._appId&&{appid:this._appId}),{},{"Content-Type":"application/octet-stream"})},!0)}catch(d){if(l===1)throw d;continue}return}}async postDataToStatsCollector(n){let r=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const o={msgType:"EventMessages",sentTs:Math.round(Date.now()/1e3),payloads:n.map(d=>JSON.stringify(d)),vid:(d=>{const p=d&&d.data.sid&&this.baseInfoMap.get(d.data.sid);return p&&p.info.vid&&+p.info.vid||0})(n[0])};jr.networkState===vo.OFFLINE&&await Le.race([jr.onlineWaiter,ro(2*Ur.maxRetryTimeout)]);const s=r?"/events/proto-raws":"/events/messages";let l=this.url||(this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(de("EVENT_REPORT_DOMAIN"),"&p=").concat(de("STATS_COLLECTOR_PORT"),"&d=").concat(s):"https://".concat(de("EVENT_REPORT_DOMAIN"),":").concat(de("STATS_COLLECTOR_PORT")).concat(s));for(let d=0;d<2;d+=1){d===1&&(l=this.backupUrl||(this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(de("EVENT_REPORT_BACKUP_DOMAIN"),"&p=").concat(de("STATS_COLLECTOR_PORT"),"&d=").concat(s):"https://".concat(de("EVENT_REPORT_BACKUP_DOMAIN"),":").concat(de("STATS_COLLECTOR_PORT")).concat(s)));try{r?await SY(l,{timeout:1e4,data:o}):await gc(l,{timeout:1e4,data:o})}catch(p){if(d===1)throw p;continue}return}}createBaseInfo(n,r){const o=Object.assign({},fq);return o.sid=n,this.baseInfoMap.set(n,{info:o,startTime:r}),o}reportResourceTiming(n,r){const o=performance.getEntriesByName(n),s=o[o.length-1];s&&this.reportApiInvoke(r,{name:"Client.resourceTiming",options:s,tag:cr.TRACER}).onSuccess()}};jT.on("REPORT_LOG_UPLOAD",n=>{n.networkState=jr.networkState,Ze.reportApiInvoke(null,{name:"logUploadError",options:n,tag:cr.TRACER})});class PU extends ur{constructor(r,o){super(),L(this,"trackMediaType",void 0),L(this,"_ID",void 0),L(this,"_rtpTransceiver",void 0),L(this,"_lowRtpTransceiver",void 0),L(this,"_hints",[]),L(this,"_isClosed",!1),L(this,"_originMediaStreamTrack",void 0),L(this,"_mediaStreamTrack",void 0),L(this,"_external",{}),this._ID=o||Yn(8,"track-"),this._originMediaStreamTrack=r,this._mediaStreamTrack=r,function(s){UE.includes(s)||UE.push(s)}(this)}toString(){return this._ID}getTrackId(){return this._ID}getMediaStreamTrack(r){if(!r){const o=Ze.reportApiInvoke(null,{name:Fr.GET_MEDIA_STREAM_TRACK,options:[],tag:cr.TRACER});this._mediaStreamTrack&&typeof this._mediaStreamTrack.label=="string"?o.onSuccess(this._mediaStreamTrack.label):o.onSuccess("")}return this._mediaStreamTrack}getRTCRtpTransceiver(r){return r===Zm.LOW_STREAM?this._lowRtpTransceiver:this._rtpTransceiver}getMediaStreamTrackSettings(){return this.getMediaStreamTrack(!0).getSettings()}close(){this._isClosed=!0,this._lowRtpTransceiver=void 0,this._rtpTransceiver=void 0,function(r){const o=UE.indexOf(r);o!==-1&&UE.splice(o,1)}(this),this.emit(th.CLOSED)}_updateRtpTransceiver(r,o){if(o===Zm.LOW_STREAM){if(this._lowRtpTransceiver===r)return;this._lowRtpTransceiver=r}else{if(this._rtpTransceiver===r)return;this._rtpTransceiver=r}this.emit(jE.TRANSCEIVER_UPDATED,r,o)}}let gi,CY=1;class xo{constructor(r){L(this,"lockingPromise",Le.resolve()),L(this,"locks",0),L(this,"name",""),L(this,"lockId",void 0),this.lockId=CY++,r&&(this.name=r),j.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is created."))}get isLocked(){return this.locks>0}lock(r){let o;this.locks+=1,j.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is locked, current queue ").concat(this.locks,". ").concat(typeof r=="string"?r:""));const s=new Le(d=>{o=()=>{this.locks-=1,j.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is not locked, current queue ").concat(this.locks,". ").concat(typeof r=="string"?r:"")),d()}}),l=this.lockingPromise.then(()=>o);return this.lockingPromise=this.lockingPromise.then(()=>s),l}}function t0(n,r){return function(o,s,l){const d=l.value;if(typeof d!="function")throw new Error("Cannot use mutex on object property.");return l.value=async function(){const p=this[r];if(!p)throw new Error("mutex property key ".concat(r," doesn't exist on ").concat(n));const _=await p.lock("From ".concat(n,".").concat(s));try{for(var S=arguments.length,I=new Array(S),b=0;b<S;b++)I[b]=arguments[b];return await d.apply(this,I)}finally{_()}},l}}class SN extends PU{get isExternalTrack(){return this._isExternalTrack}get muted(){return this._muted}get enabled(){return this._enabled}get processorContext(){return this._processorContext}set processorContext(r){this._processorContext=r}constructor(r,o){super(r,o),L(this,"_enabled",!0),L(this,"_muted",!1),L(this,"_isExternalTrack",!1),L(this,"_isClosed",!1),L(this,"_enabledMutex",void 0),L(this,"processor",void 0),L(this,"_processorContext",void 0),L(this,"_handleTrackEnded",()=>{this.onTrackEnded()}),this._enabledMutex=new xo("".concat(this.getTrackId())),r.addEventListener("ended",this._handleTrackEnded)}getTrackLabel(){var r,o;return(r=(o=this._originMediaStreamTrack)===null||o===void 0?void 0:o.label)!==null&&r!==void 0?r:""}close(){this._isClosed||(this.stop(),this._originMediaStreamTrack.stop(),this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack.stop(),this._mediaStreamTrack=null),this._originMediaStreamTrack=null,this._enabledMutex=null,j.debug("[".concat(this.getTrackId(),"] close")),this.emit(Et.NEED_CLOSE),super.close())}async _updateOriginMediaStreamTrack(r,o){let s=arguments.length>2&&arguments[2]!==void 0&&arguments[2];this._isExternalTrack=s,r!==this._originMediaStreamTrack&&(this._originMediaStreamTrack.removeEventListener("ended",this._handleTrackEnded),o&&this._originMediaStreamTrack.stop(),r.addEventListener("ended",this._handleTrackEnded),this._originMediaStreamTrack=r,this._muted&&(this._originMediaStreamTrack.enabled=!1),this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await vr(this,Et.NEED_REPLACE_TRACK,this),this.processor&&this.processor.updateInput({track:this._originMediaStreamTrack,context:this.processorContext}))}_getDefaultPlayerConfig(){return{}}onTrackEnded(){j.debug("[".concat(this.getTrackId(),"] track ended")),this.safeEmit(th.TRACK_ENDED)}stateCheck(r,o){if(j.debug("check track state, [muted: ".concat(this._muted,", enabled: ").concat(this._enabled,"] to [").concat(r,": ").concat(o,"]")),Xm(o,r),this._enabled&&this._muted&&r==="enabled"&&o===!1)throw new re(q.TRACK_STATE_UNREACHABLE,"cannot set enabled while the track is muted").print();if(!this._enabled&&!this._muted&&r==="muted"&&o===!0)throw new re(q.TRACK_STATE_UNREACHABLE,"cannot set muted while the track is disabled").print()}getProcessorStats(){return this.processorContext.gatherStats()}getProcessorUsage(){return this.processorContext.gatherUsage()}}function DU(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}(function(n){n.IOS_15_16_INTERRUPTION_START="ios15_16-interruption-start",n.IOS_15_16_INTERRUPTION_END="ios15_16-interruption-end",n.IOS_INTERRUPTION_START="ios-interruption-start",n.IOS_INTERRUPTION_END="ios-interruption-end",n.STATE_CHANGE="state-change"})(gi||(gi={}));const LU=window.AudioContext||window.webkitAudioContext;let cs=null;const Cn=new class extends ur{constructor(){super(...arguments),L(this,"prevState",void 0),L(this,"curState",void 0),L(this,"currentTime",void 0),L(this,"currentTimeStuckAt",void 0),L(this,"interruptDetectorTrack",void 0),L(this,"onLocalAudioTrackMute",()=>{j.info("ios15-interruption-start"),this.emit(gi.IOS_15_16_INTERRUPTION_START)}),L(this,"onLocalAudioTrackUnmute",async()=>{j.info("ios15-interruption-end"),this.curState!=="running"||this.duringInterruption?j.info("ios15-interruption-end-canceled"):(cs&&await cs.suspend(),this.emit(gi.IOS_15_16_INTERRUPTION_END))})}get duringInterruption(){return this.prevState==="running"&&this.curState==="interrupted"}bindInterruptDetectorTrack(n){j.debug("webaudio bindInterruptDetectorTrack ".concat(n.getTrackId())),this.interruptDetectorTrack||(this.interruptDetectorTrack=n,this.interruptDetectorTrack._mediaStreamTrack.onmute=this.onLocalAudioTrackMute,this.interruptDetectorTrack._mediaStreamTrack.onunmute=this.onLocalAudioTrackUnmute)}unbindInterruptDetectorTrack(n){j.debug("webaudio unbindInterruptDetectorTrack ".concat(n.getTrackId())),this.interruptDetectorTrack&&this.interruptDetectorTrack===n&&(this.interruptDetectorTrack._mediaStreamTrack&&(this.interruptDetectorTrack._mediaStreamTrack.onmute=null,this.interruptDetectorTrack._mediaStreamTrack.onunmute=null),this.interruptDetectorTrack=void 0)}};function TY(){if(!LU)return void j.error("your browser is not support web audio");j.info("create audio context");const n=function(r){for(var o=1;o<arguments.length;o++){var s=arguments[o]!=null?arguments[o]:{};o%2?DU(Object(s),!0).forEach(function(l){L(r,l,s[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(s)):DU(Object(s)).forEach(function(l){Object.defineProperty(r,l,Object.getOwnPropertyDescriptor(s,l))})}return r}({},de("WEBAUDIO_INIT_OPTIONS"));j.debug("audio context init option:",JSON.stringify(n)),cs=new LU(n),Cn.curState=cs.state,cs.onstatechange=()=>{Cn.prevState=Cn.curState,Cn.curState=cs?cs.state:void 0;const{prevState:r,curState:o}=Cn,s=o==="running",l=o==="interrupted",d=r==="running",p=r==="suspended",_=r==="interrupted",S=un().osVersion;(Ui()||hc())&&d&&l&&(j.info("ios".concat(S,"-interruption-start")),Cn.emit(gi.IOS_INTERRUPTION_START)),(Ui()||hc())&&(p||_)&&s&&(j.info("ios".concat(S,"-interruption-end")),Cn.emit(gi.IOS_INTERRUPTION_END)),r!==o&&(j.debug("AudioContext State Change","".concat(r,"=>").concat(o)),Cn.emit(gi.STATE_CHANGE))},setInterval(()=>{var r;const o=(r=cs)===null||r===void 0?void 0:r.currentTime;Cn.currentTime!==o?(Cn.currentTimeStuckAt&&(j.debug("AudioContext current time resume at ".concat(o)),Cn.currentTimeStuckAt=void 0),Cn.currentTime=o):(o!==Cn.currentTimeStuckAt&&(Ze.reportApiInvoke(null,{name:"WEB_AUDIO_CURRENT_TIME_STUCK",options:{currentTime:o},tag:cr.TRACER}).onSuccess(),j.warning("AudioContext current time stuck at ".concat(o))),Cn.currentTimeStuckAt=o)},5e3),async function(r){const o=["click","contextmenu","auxclick","dblclick","mousedown","mouseup","touchend","keydown","keyup"];let s,l=!1,d=!1,p=!1;function _(te){r.state==="running"?S(!1):Ui()||hc()?r.state==="suspended"&&(S(!0),te&&r.resume().then(b,b)):r.state!=="closed"&&(S(!0),te&&r.resume().then(b,b))}function S(te){if(l!==te){l=te;for(let Ee=0,ye=o;Ee<ye.length;Ee+=1){const Pe=ye[Ee];te?window.addEventListener(Pe,A,{capture:!0,passive:!0}):window.removeEventListener(Pe,A,{capture:!0,passive:!0})}}}function I(){_(!0)}function b(){_(!1)}function A(){_(!0)}function F(te){if(!p)if(s.paused)if(te){W(!1),p=!0;let Ee;try{Ee=s.play(),Ee?Ee.then(Z,Z):(s.addEventListener("playing",Z),s.addEventListener("abort",Z),s.addEventListener("error",Z))}catch{Z()}}else W(!0);else W(!1)}function W(te){if(d!==te){d=te;for(let Ee=0,ye=o;Ee<ye.length;Ee++){const Pe=ye[Ee];te?window.addEventListener(Pe,ee,{capture:!0,passive:!0}):window.removeEventListener(Pe,ee,{capture:!0,passive:!0})}}}function Z(){s.removeEventListener("playing",Z),s.removeEventListener("abort",Z),s.removeEventListener("error",Z),p=!1,F(!1)}function ee(){F(!0)}if(Ui()){const te=r.createMediaStreamDestination(),Ee=document.createElement("div");Ee.innerHTML="<audio x-webkit-airplay='deny'></audio>",s=Ee.children.item(0),s.controls=!1,s.disableRemotePlayback=!0,s.preload="auto",s.srcObject=te.stream,F(!0)}Cn.on(gi.STATE_CHANGE,I),_(!1)}(cs)}function n0(){if(!cs){if(TY(),!cs)throw new re(q.NOT_SUPPORTED,"can not create audio context");return cs}return cs}function kU(){return!!cs}function Vf(n){if(function(){if(yN!==null)return yN;const s=n0(),l=s.createBufferSource(),d=s.createGain(),p=s.createGain();l.connect(d),l.connect(p),l.disconnect(d);let _=!1;try{l.disconnect(d)}catch{_=!0}return l.disconnect(),yN=_,_}())return;const r=n.connect,o=n.disconnect;n.connect=(s,l,d)=>(n._inputNodes||(n._inputNodes=[]),n._inputNodes.includes(s)||(s instanceof AudioNode?(n._inputNodes.push(s),r.call(n,s,l,d)):r.call(n,s,l)),n),n.disconnect=(s,l,d)=>{o.call(n),s?NN(n._inputNodes,s):n._inputNodes=[];for(const p of n._inputNodes)r.call(n,p)}}let yN=null;function MU(n,r){let o=!1;const s=1/r;if(de("DISABLE_WEBAUDIO")){const l=window.setInterval(()=>{o?window.clearInterval(l):n(performance.now()/1e3)},1e3*s)}else{const l=n0();let d=l.createGain();d.gain.value=0,d.connect(l.destination);const p=()=>{if(o)return void(d=null);const _=l.createOscillator();_.onended=p,_.connect(d),_.start(0),_.stop(l.currentTime+s),n(l.currentTime)};p()}return()=>{o=!0}}class UU{constructor(){L(this,"context",void 0),L(this,"analyserNode",void 0),L(this,"sourceNode",void 0),this.context=n0(),this.analyserNode=this.context.createAnalyser(),this.analyserNode.fftSize=2048,this.analyserNode.smoothingTimeConstant=.4}updateSource(r){if(r!==this.sourceNode){if(this.sourceNode)try{this.sourceNode.disconnect(this.analyserNode)}catch{}this.sourceNode=r,r==null||r.connect(this.analyserNode)}}getVolumeLevel(){if(!this.sourceNode||(!this.context||Ui()||hc()||this.context.state!=="running"&&this.context.resume(),!this.analyserNode))return 0;const r=new Float32Array(this.analyserNode.fftSize);if(this.analyserNode.getFloatTimeDomainData)this.analyserNode.getFloatTimeDomainData(r);else{const s=new Uint8Array(this.analyserNode.fftSize);this.analyserNode.getByteTimeDomainData(s);for(let l=0;l<r.length;++l)r[l]=s[l]/128-1}const o=Gl(r).call(r,(s,l)=>s+l*l,0)/r.length;return Math.max(10*Math.log10(o)+100,0)/100}getAnalyserNode(){return this.analyserNode}rebuildAnalyser(){try{var r,o;(r=this.sourceNode)===null||r===void 0||r.disconnect(this.analyserNode),this.analyserNode=this.context.createAnalyser(),this.analyserNode.fftSize=2048,this.analyserNode.smoothingTimeConstant=.4,(o=this.sourceNode)===null||o===void 0||o.connect(this.analyserNode)}catch{j.warning("rebuild analyser node failed.")}}destroy(){this.updateSource(void 0)}}class FU extends ur{get processSourceNode(){return this.sourceNode}set processedNode(r){var o;if(!this.isDestroyed&&this._processedNode!==r){try{var s;(s=this.sourceNode)===null||s===void 0||s.disconnect(this.outputNode)}catch{}(o=this._processedNode)===null||o===void 0||o.disconnect(),this._processedNode=r,this.connect()}}get processedNode(){return this._processedNode}constructor(){super(),L(this,"outputNode",void 0),L(this,"outputTrack",void 0),L(this,"isPlayed",!1),L(this,"sourceNode",void 0),L(this,"context",void 0),L(this,"audioBufferNode",void 0),L(this,"destNode",void 0),L(this,"audioOutputLevel",0),L(this,"volumeLevelAnalyser",void 0),L(this,"_processedNode",void 0),L(this,"playNode",void 0),L(this,"isDestroyed",!1),L(this,"onNoAudioInput",void 0),L(this,"isNoAudioInput",!1),L(this,"_noAudioInputCount",0),this.context=n0(),this.playNode=this.context.destination,this.outputNode=this.context.createGain(),Vf(this.outputNode),this.volumeLevelAnalyser=new UU}startGetAudioBuffer(r){this.audioBufferNode||(this.audioBufferNode=this.context.createScriptProcessor(r),this.outputNode.connect(this.audioBufferNode),this.audioBufferNode.connect(this.context.destination),this.audioBufferNode.onaudioprocess=o=>{this.emit(ma.ON_AUDIO_BUFFER,function(s){for(let l=0;l<s.outputBuffer.numberOfChannels;l+=1){const d=s.outputBuffer.getChannelData(l);for(let p=0;p<d.length;p+=1)d[p]=0}return s.inputBuffer}(o))})}stopGetAudioBuffer(){this.audioBufferNode&&(this.audioBufferNode.onaudioprocess=null,this.outputNode.disconnect(this.audioBufferNode),this.audioBufferNode=void 0)}createOutputTrack(){if(!Pr().webAudioMediaStreamDest)throw new re(q.NOT_SUPPORTED,"your browser is not support audio processor");return this.destNode&&this.outputTrack||(this.destNode=this.context.createMediaStreamDestination(),this.outputNode.connect(this.destNode),this.outputTrack=this.destNode.stream.getAudioTracks()[0]),this.outputTrack}play(r){this.context.state!=="running"&&sl(()=>{Cn.emit("autoplay-failed")}),this.isPlayed=!0,this.playNode=r||this.context.destination,this.outputNode.connect(this.playNode)}stop(){if(this.isPlayed)try{this.outputNode.disconnect(this.playNode)}catch{}this.isPlayed=!1}getAccurateVolumeLevel(){return this.volumeLevelAnalyser.getVolumeLevel()}async checkHasAudioInput(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;if(r>5)return this.isNoAudioInput=!0,this.onNoAudioInput&&this.onNoAudioInput(),!1;Ui()||hc()?this.context.state==="suspended"&&this.context.resume():this.context.state!=="running"&&this.context.resume();const o=this.volumeLevelAnalyser.getAnalyserNode();let s;o.getFloatTimeDomainData?(s=new Float32Array(o.fftSize),o.getFloatTimeDomainData(s)):(s=new Uint8Array(o.fftSize),o.getByteTimeDomainData(s));let l=!1;for(let d=0;d<s.length;d++)s[d]!==0&&(l=!0);return l?(this.isNoAudioInput=!1,!0):(await ro(200),await this.checkHasAudioInput(r?r+1:1)&&l)}getAudioVolume(){return this.outputNode.gain.value}setVolume(r){this.outputNode.gain.setValueAtTime(r,this.context.currentTime)}destroy(){this.disconnect(),this.stop(),this.isDestroyed=!0,this.onNoAudioInput=void 0}disconnect(){var r,o;(r=this.processedNode)===null||r===void 0||r.disconnect(),(o=this.sourceNode)===null||o===void 0||o.disconnect(),this.outputNode&&this.outputNode.disconnect()}connect(){var r;this.processedNode?(r=this.processedNode)===null||r===void 0||r.connect(this.outputNode):this.sourceNode&&this.sourceNode.connect(this.outputNode),this.volumeLevelAnalyser.updateSource(this.outputNode)}}class CN extends FU{get isFreeze(){return!1}constructor(r,o,s){var l;if(super(),L(this,"sourceNode",void 0),L(this,"track",void 0),L(this,"clonedTrack",void 0),L(this,"audioElement",void 0),L(this,"isCurrentTrackCloned",!1),L(this,"isRemoteTrack",!1),L(this,"originVolumeLevelAnalyser",void 0),L(this,"rebuildWebAudio",async()=>{if(j.debug("ready to rebuild web audio, state:",this.context.state),this.isNoAudioInput&&await this.checkHasAudioInput(),!this.isNoAudioInput||this.isDestroyed)return document.body.removeEventListener("click",this.rebuildWebAudio,!0),void j.debug("rebuild web audio success, current volume status",this.getAccurateVolumeLevel());this.context.resume().then(()=>j.info("resume success")),j.debug("rebuild web audio because of ios 12 bugs"),this.disconnect();const _=this.track;this.track=this.track.clone(),this.isCurrentTrackCloned?_.stop():this.isCurrentTrackCloned=!0;const S=new MediaStream([this.track]);this.sourceNode=this.context.createMediaStreamSource(S),Vf(this.sourceNode),this.volumeLevelAnalyser.rebuildAnalyser();const I=this.outputNode.gain.value;this.outputNode=this.context.createGain(),this.outputNode.gain.setValueAtTime(I,this.context.currentTime),Vf(this.outputNode),this.emit(ma.UPDATE_SOURCE),this.connect(),this.audioElement.srcObject=S,this.isPlayed&&this.play(this.playNode),this.checkHasAudioInput()}),r.kind!=="audio")throw new re(q.UNEXPECTED_ERROR);this.track=r;const d=new MediaStream([this.track]);if(this.isRemoteTrack=!!o,this.sourceNode=this.context.createMediaStreamSource(d),Vf(this.sourceNode),s){const _=s.clone();_.enabled=!0,this.clonedTrack=_,j.debug("create an unmuted track ".concat(_.id," from the original track ").concat(s.id," to get the volume"));const S=this.context.createMediaStreamSource(new MediaStream([_]));Vf(S),this.originVolumeLevelAnalyser=new UU,this.originVolumeLevelAnalyser.updateSource(S)}this.connect(),this.audioElement=document.createElement("audio"),this.audioElement.srcObject=d;const p=un();o&&p.os===Oi.IOS&&Number((l=p.osVersion)===null||l===void 0?void 0:l.split(".")[0])<15&&(Cn.on(gi.STATE_CHANGE,()=>{this.context.state==="suspended"?document.body.addEventListener("click",this.rebuildWebAudio,!0):this.context.state==="running"&&this.rebuildWebAudio()}),this.checkHasAudioInput().then(_=>{_||document.body.addEventListener("click",this.rebuildWebAudio,!0)}))}updateTrack(r){this.sourceNode.disconnect(),this.track=r,this.isCurrentTrackCloned=!1;const o=new MediaStream([r]);this.sourceNode=this.context.createMediaStreamSource(o),Vf(this.sourceNode),this.processedNode||this.sourceNode.connect(this.outputNode),this.emit(ma.UPDATE_SOURCE),this.audioElement.srcObject=o}destroy(){var r;this.audioElement.srcObject=null,this.audioElement.remove(),Cn.off("state-change",this.rebuildWebAudio),(r=this.originVolumeLevelAnalyser)===null||r===void 0||r.destroy(),this.clonedTrack=void 0,super.destroy()}createMediaStreamSourceNode(r){return this.context.createMediaStreamSource(new MediaStream([r]))}updateOriginTrack(r){const o=r.clone();o.enabled=!0,this.clonedTrack&&(this.clonedTrack.stop(),this.clonedTrack=o),j.debug("create an unmuted track ".concat(o.id," from the original track ").concat(r.id," to get the volume"));const s=this.context.createMediaStreamSource(new MediaStream([o]));Vf(s),this.originVolumeLevelAnalyser&&this.originVolumeLevelAnalyser.updateSource(s)}getOriginVolumeLevel(){return this.originVolumeLevelAnalyser?this.originVolumeLevelAnalyser.getVolumeLevel():this.getAccurateVolumeLevel()}}async function VU(n,r){const o=(l,d)=>l?typeof l!="number"?l.max||l.exact||l.ideal||l.min||d:l:d,s={audio:!1,video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:n,maxHeight:o(r.height,1080),maxWidth:o(r.width,1920)}}};return r.frameRate&&typeof r.frameRate!="number"?(s.video.mandatory.maxFrameRate=r.frameRate.max,s.video.mandatory.minFrameRate=r.frameRate.min):typeof r.frameRate=="number"&&(s.video.mandatory.maxFrameRate=r.frameRate),await navigator.mediaDevices.getUserMedia(s)}async function bY(n){const r=await jU(n.mediaSource),o=await function(s){return new Le((l,d)=>{const p=document.createElement("div");p.innerText="share screen",p.setAttribute("style","text-align: center; height: 25px; line-height: 25px; border-radius: 4px 4px 0 0; background: #D4D2D4; border-bottom:  solid 1px #B9B8B9;");const _=document.createElement("div");_.setAttribute("style","width: 100%; height: 500px; padding: 15px 25px ; box-sizing: border-box;");const S=document.createElement("div");S.innerText="Agora Web Screensharing wants to share the contents of your screen with webdemo.agorabeckon.com. Choose what you'd like to share.",S.setAttribute("style","height: 12%;");const I=document.createElement("div");I.setAttribute("style","width: 100%; height: 80%; background: #FFF; border:  solid 1px #CBCBCB; display: flex; flex-wrap: wrap; justify-content: space-around; overflow-y: scroll; padding: 0 15px; box-sizing: border-box;");const b=document.createElement("div");b.setAttribute("style","text-align: right; padding: 16px 0;");const A=document.createElement("button");A.innerHTML="cancel",A.setAttribute("style","width: 85px;"),A.onclick=()=>{document.body.removeChild(F);const W=new Error("NotAllowedError");W.name="NotAllowedError",d(W)},b.appendChild(A),_.appendChild(S),_.appendChild(I),_.appendChild(b);const F=document.createElement("div");F.setAttribute("style","position: fixed; z-index: 99999999; top: 50%; left: 50%; width: 620px; height: 525px; background: #ECECEC; border-radius: 4px; -webkit-transform: translate(-50%,-50%); transform: translate(-50%,-50%);"),F.appendChild(p),F.appendChild(_),document.body.appendChild(F),s.map(W=>{if(W.id){const Z=document.createElement("div");Z.setAttribute("style","width: 30%; height: 160px; padding: 20px 0; text-align: center;box-sizing: content-box;");let ee=W.thumbnail;const{width:te}=ee.getSize();te>1920&&(ee=ee.resize({width:1920})),Z.innerHTML='<div style="height: 120px; display: table-cell; vertical-align: middle;"><img style="width: 100%; background: #333333; box-shadow: 1px 1px 1px 1px rgba(0, 0, 0, 0.2);" src='+ee.toDataURL()+' /></div><span style="	height: 40px; line-height: 40px; display: inline-block; width: 70%; word-break: keep-all; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">'+(W.name.replace(/[\u00A0-\u9999<>\&]/g,function(Ee){return"&#"+Ee.charCodeAt(0)+";"})+"</span>"),Z.onclick=()=>{document.body.removeChild(F),l(W.id)},I.appendChild(Z)}})})}(r);return await VU(o,n)}async function jU(n){let r=["window","screen"];n!=="application"&&n!=="window"||(r=["window"]),n==="screen"&&(r=["screen"]);const o=BU();if(!o)throw new re(q.ELECTRON_IS_NULL);let s=null;try{var l;s=((l=o.desktopCapturer)===null||l===void 0?void 0:l.getSources({types:r}))||o.ipcRenderer.invoke("DESKTOP_CAPTURER_GET_SOURCES",{types:r})}catch{s=null}s&&s.then||(s=new Le((d,p)=>{o.desktopCapturer.getSources({types:r},(_,S)=>{_?p(_):d(S)})}));try{return await s}catch(d){throw new re(q.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR,d.toString())}}let qT=null;function BU(){if(qT)return qT;try{return qT=window.require("electron"),qT}catch{return null}}function $U(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}const TN=new xo("safari");let HU=!1,WU=!1;async function vc(n,r){let o=0,s=null;for(;o<2;)try{s=await RY(n,r,o>0);break}catch(l){if(l instanceof re)throw j.error("[".concat(r,"] ").concat(l.toString())),l;const d=YT(l.name||l.code||l,l.message);if(d.code===q.MEDIA_OPTION_INVALID){j.debug("[".concat(r,"] detect media option invalid, retry")),o+=1,await ro(500);continue}throw j.error("[".concat(r,"] ").concat(d.toString())),d}if(!s)throw new re(q.UNEXPECTED_ERROR,"can not find stream after getUserMedia");return s}async function RY(n,r,o){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new re(q.NOT_SUPPORTED,"can not find getUserMedia");o&&(n.video&&(delete n.video.width,delete n.video.height),n.screen&&(delete n.screen.width,delete n.screen.height));const s=Pr(),l=new MediaStream;if(n.audioSource&&l.addTrack(n.audioSource),n.videoSource&&l.addTrack(n.videoSource),!n.audio&&!n.video&&!n.screen)return j.debug("Using Video Source/ Audio Source"),l;if(n.screen)if(BU())n.screen.sourceId?r0(l,await VU(n.screen.sourceId,n.screen)):r0(l,await bY(n.screen));else if(yE()&&n.screen.extensionId&&n.screen.mandatory){if(!s.getStreamFromExtension)throw new re(q.NOT_SUPPORTED,"This browser does not support screen sharing");j.debug("[".concat(r,'] Screen access on chrome stable, looking for extension"'));const F=await(p=n.screen.extensionId,_=r,new Le((W,Z)=>{try{chrome.runtime.sendMessage(p,{getStream:!0},ee=>{if(!ee||!ee.streamId)return j.error("[".concat(_,"] No response from Chrome Plugin. Plugin not installed properly"),ee),void Z(new re(q.CHROME_PLUGIN_NO_RESPONSE,"No response from Chrome Plugin. Plugin not installed properly"));W(ee.streamId)})}catch(ee){j.error("[".concat(_,"] AgoraRTC screensharing plugin is not accessible(").concat(p,")"),ee.toString()),Z(new re(q.CHROME_PLUGIN_NOT_INSTALL))}}));n.screen.mandatory.chromeMediaSourceId=F,r0(l,await navigator.mediaDevices.getUserMedia({video:{mandatory:n.screen.mandatory}}))}else if(s.getDisplayMedia){var d;n.screen.mediaSource&&fU(n.screen.mediaSource);const F={width:n.screen.width,height:n.screen.height,frameRate:n.screen.frameRate,displaySurface:(d=n.screen.displaySurface)!==null&&d!==void 0?d:n.screen.mediaSource==="screen"?"monitor":n.screen.mediaSource},{selfBrowserSurface:W,surfaceSwitching:Z,systemAudio:ee}=n.screen,te={selfBrowserSurface:W,surfaceSwitching:Z,systemAudio:ee};!W&&delete te.selfBrowserSurface,!Z&&delete te.surfaceSwitching,!ee&&delete te.systemAudio,j.debug("[".concat(r,"] getDisplayMedia:"),JSON.stringify({video:F,audio:!!n.screenAudio,controls:te})),r0(l,await navigator.mediaDevices.getDisplayMedia(function(Ee){for(var ye=1;ye<arguments.length;ye++){var Pe=arguments[ye]!=null?arguments[ye]:{};ye%2?$U(Object(Pe),!0).forEach(function(Xe){L(Ee,Xe,Pe[Xe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Ee,Object.getOwnPropertyDescriptors(Pe)):$U(Object(Pe)).forEach(function(Xe){Object.defineProperty(Ee,Xe,Object.getOwnPropertyDescriptor(Pe,Xe))})}return Ee}({video:F,audio:!!n.screenAudio},te)))}else{if(!nr())throw j.error("[".concat(r,"] This browser does not support screenSharing")),new re(q.NOT_SUPPORTED,"This browser does not support screen sharing");{n.screen.mediaSource&&fU(n.screen.mediaSource);const F={video:{mediaSource:n.screen.mediaSource,width:n.screen.width,height:n.screen.height,frameRate:n.screen.frameRate}};j.debug("[".concat(r,"] getUserMedia: ").concat(JSON.stringify(F))),r0(l,await navigator.mediaDevices.getUserMedia(F))}}var p,_;if(!n.video&&!n.audio)return l;let S={video:n.video,audio:n.audio},I=de("MEDIA_DEVICE_CONSTRAINTS");if(I)try{typeof I=="string"&&(I=JSON.parse(I)),S=function F(W,Z){if(!q4(W)||!q4(Z)||Array.isArray(W)&&!Array.isArray(Z)||!Array.isArray(W)&&Array.isArray(Z))return Z;if(Array.isArray(Z)&&Array.isArray(W)){const ee=[...W];for(let te=0;te<Z.length;te++)ee[te]=F(W[te],Z[te]);return ee}{const ee=Bf({},W);for(const te in Z)Object.prototype.hasOwnProperty.call(Z,te)&&(Object.prototype.hasOwnProperty.call(W,te)?ee[te]=F(W[te],Z[te]):ee[te]=Z[te]);return ee}}(S,I)}catch{}j.debug("[".concat(r,"] GetUserMedia"),JSON.stringify(S)),un();let b,A=null;(Yi()||Ui()||Fm())&&(A=await TN.lock());try{b=await navigator.mediaDevices.getUserMedia(S)}catch(F){throw A&&A(),F}return S.audio&&(HU=!0),S.video&&(WU=!0),r0(l,b),A&&A(),l}function YT(n,r){switch(n){case"Starting video failed":case"OverconstrainedError":case"TrackStartError":return new re(q.MEDIA_OPTION_INVALID,"".concat(n,": ").concat(r));case"NotFoundError":case"DevicesNotFoundError":return new re(q.DEVICE_NOT_FOUND,"".concat(n,": ").concat(r));case"NotSupportedError":return new re(q.NOT_SUPPORTED,"".concat(n,": ").concat(r));case"NotReadableError":return new re(q.NOT_READABLE,"".concat(n,": ").concat(r));case"InvalidStateError":case"NotAllowedError":case"PERMISSION_DENIED":case"PermissionDeniedError":return new re(q.PERMISSION_DENIED,"".concat(n,": ").concat(r));case"ConstraintNotSatisfiedError":return new re(q.CONSTRAINT_NOT_SATISFIED,"".concat(n,": ").concat(r));default:return j.error("getUserMedia unexpected error",n),new re(q.UNEXPECTED_ERROR,"".concat(n,": ").concat(r))}}function r0(n,r){const o=n.getVideoTracks()[0],s=n.getAudioTracks()[0],l=r.getVideoTracks()[0],d=r.getAudioTracks()[0];d&&(s&&n.removeTrack(s),n.addTrack(d)),l&&(o&&n.removeTrack(o),n.addTrack(l))}const ls=new class extends ur{get state(){return this._state}set state(n){n!==this._state&&(this.emit(Hu.STATE_CHANGE,n),this._state=n)}constructor(){super(),L(this,"_state",Uf.IDLE),L(this,"isAccessMicrophonePermission",!1),L(this,"isAccessCameraPermission",!1),L(this,"lastAccessMicrophonePermission",!1),L(this,"lastAccessCameraPermission",!1),L(this,"checkdeviceMatched",!1),L(this,"deviceInfoMap",new Map),this.init().then(()=>{navigator.mediaDevices.addEventListener&&navigator.mediaDevices.addEventListener("devicechange",this.updateDevicesInfo.bind(this)),window.setInterval(()=>{(de("ENUMERATE_DEVICES_INTERVAL")||(Vm()||hT()===Oi.HARMONY_OS)&&au())&&this.updateDevicesInfo()},de("ENUMERATE_DEVICES_INTERVAL_TIME"))}).catch(n=>j.error(n.toString()))}async enumerateDevices(n,r){let o=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return new re(q.NOT_SUPPORTED,"enumerateDevices() not supported.").throw();const s=await navigator.mediaDevices.enumerateDevices(),l=this.checkMediaDeviceInfoIsOk(s);let d=!this.isAccessMicrophonePermission&&n,p=!this.isAccessCameraPermission&&r;l.audio&&(d=!1),l.video&&(p=!1);let _=null,S=null,I=null;if(!o&&(d||p)){if(TN.isLocked&&(j.debug("[device manager] wait GUM lock"),(await TN.lock())(),j.debug("[device manager] GUM unlock")),HU&&(d=!1,this.isAccessMicrophonePermission=!0),WU&&(p=!1,this.isAccessCameraPermission=!0),j.debug("[device manager] check media device permissions",n,r,d,p),d&&p){try{I=await navigator.mediaDevices.getUserMedia({audio:!0,video:!0})}catch(b){const A=YT(b.name||b.code||b,b.message);if(A.code===q.PERMISSION_DENIED)throw A;j.warning("getUserMedia failed in getDevices",A)}this.isAccessCameraPermission=!0,this.isAccessMicrophonePermission=!0}else if(d){try{_=await navigator.mediaDevices.getUserMedia({audio:n})}catch(b){const A=YT(b.name||b.code||b,b.message);if(A.code===q.PERMISSION_DENIED)throw A;j.warning("getUserMedia failed in getDevices",A)}this.isAccessMicrophonePermission=!0}else if(p){try{S=await navigator.mediaDevices.getUserMedia({video:r})}catch(b){const A=YT(b.name||b.code||b,b.message);if(A.code===q.PERMISSION_DENIED)throw A;j.warning("getUserMedia failed in getDevices",A)}this.isAccessCameraPermission=!0}j.debug("[device manager] mic permission",n,"cam permission",r)}try{const b=await navigator.mediaDevices.enumerateDevices();return _&&_.getTracks().forEach(A=>A.stop()),S&&S.getTracks().forEach(A=>A.stop()),I&&I.getTracks().forEach(A=>A.stop()),_=null,S=null,I=null,b}catch(b){return _&&_.getTracks().forEach(A=>A.stop()),S&&S.getTracks().forEach(A=>A.stop()),I&&I.getTracks().forEach(A=>A.stop()),_=null,S=null,I=null,new re(q.ENUMERATE_DEVICES_FAILED,b.toString()).throw()}}async getRecordingDevices(){let n=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return(await this.enumerateDevices(!0,!1,n)).filter(r=>r.kind==="audioinput")}async getCamerasDevices(){let n=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return(await this.enumerateDevices(!1,!0,n)).filter(r=>r.kind==="videoinput")}async getSpeakers(){let n=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return(await this.enumerateDevices(!0,!1,n)).filter(r=>r.kind==="audiooutput")}searchDeviceIdByName(n){let r=null;return this.deviceInfoMap.forEach(o=>{o.device.label===n&&(r=o.device.deviceId)}),r}async getDeviceById(n){const r=(await this.enumerateDevices(!0,!0,!0)).find(o=>o.deviceId===n);if(!r)throw new re(q.DEVICE_NOT_FOUND,"deviceId: ".concat(n));return r}async init(){this.state=Uf.INITING;try{await this.updateDevicesInfo(),this.state=Uf.INITEND}catch(n){throw j.warning("Device Detection functionality cannot start properly.",n.toString()),this.state=Uf.IDLE,!function(){return typeof isSecureContext=="boolean"?isSecureContext:location.protocol==="https:"||location.protocol==="file:"||location.hostname==="localhost"||location.hostname==="127.0.0.1"||location.hostname==="::1"}()&&new re(q.WEB_SECURITY_RESTRICT,"Your context is limited by web security, please try using https protocol or localhost.").throw(),n}}async updateDevicesInfo(){const n=await this.enumerateDevices(!0,!0,!0),r=Date.now(),o=[];if(n[0]&&n[0].label&&this.checkdeviceMatched===!1){this.checkdeviceMatched=!0;const l=n.find(p=>p.kind==="audioinput"&&p.deviceId==="default"),d=n.find(p=>p.kind==="audiooutput"&&p.deviceId==="default");l&&d?d.groupId===l.groupId?j.debug("[device-check] default input ".concat(l.label," and output ").concat(d.label," is the same group")):j.warning("[device-check] default input ".concat(l.label," and output ").concat(d.label," is not the same group")):j.debug("[device-check] default input or output not found")}const s=this.checkMediaDeviceInfoIsOk(n);if(n.forEach(l=>{if(!l.deviceId)return;const d=this.deviceInfoMap.get("".concat(l.kind,"_").concat(l.deviceId));if((d?d.state:"INACTIVE")!=="ACTIVE"){const p={initAt:r,updateAt:r,device:l,state:"ACTIVE"};this.deviceInfoMap.set("".concat(l.kind,"_").concat(l.deviceId),p),o.push(p)}d&&(d.updateAt=r)}),this.deviceInfoMap.forEach((l,d)=>{l.state==="ACTIVE"&&l.updateAt!==r&&(l.state="INACTIVE",o.push(l))}),this.state!==Uf.INITEND)return s.audio&&(this.lastAccessMicrophonePermission=!0,this.isAccessMicrophonePermission=!0),void(s.video&&(this.lastAccessCameraPermission=!0,this.isAccessCameraPermission=!0));o.forEach(l=>{switch(l.device.kind){case"audioinput":this.lastAccessMicrophonePermission&&this.isAccessMicrophonePermission&&this.emit(Hu.RECORDING_DEVICE_CHANGED,l);break;case"videoinput":this.lastAccessCameraPermission&&this.isAccessCameraPermission&&this.emit(Hu.CAMERA_DEVICE_CHANGED,l);break;case"audiooutput":this.lastAccessMicrophonePermission&&this.isAccessMicrophonePermission&&this.emit(Hu.PLAYOUT_DEVICE_CHANGED,l)}}),s.audio&&(this.lastAccessMicrophonePermission=!0,this.isAccessMicrophonePermission=!0),s.video&&(this.lastAccessCameraPermission=!0,this.isAccessCameraPermission=!0)}checkMediaDeviceInfoIsOk(n){const r=n.filter(l=>l.kind==="audioinput"),o=n.filter(l=>l.kind==="videoinput"),s={audio:!1,video:!1};for(const l of r)if(l.label&&l.deviceId){s.audio=!0;break}for(const l of o)if(l.label&&l.deviceId){s.video=!0;break}return s}},IY=["play","playing","loadeddata","canplay","pause","stalled","suspend","waiting","abort","emptied","ended","error"],La=new class{constructor(){L(this,"onAutoplayFailed",void 0),L(this,"elementMap",new Map),L(this,"elementStateMap",new Map),L(this,"elementsNeedToResume",[]),L(this,"sinkIdMap",new Map),L(this,"autoResumeAfterInterruption",()=>{Array.from(this.elementMap.entries()).forEach(n=>{let[r,o]=n;const s=this.elementStateMap.get(r),l=o.srcObject.getAudioTracks()[0];qd()?l&&l.readyState==="live"&&Cn.curState==="running"&&(j.debug("auto resume after interruption for iOS 15"),o.pause(),o.play()):s&&s==="paused"&&l&&l.readyState==="live"&&Cn.curState==="running"&&(j.debug("auto resume after interruption for iOS"),o.play())})}),L(this,"autoResumeAfterInterruptionOnIOS15_16",()=>{Array.from(this.elementMap.entries()).forEach(n=>{let[r,o]=n;const s=o.srcObject.getAudioTracks()[0];s&&s.readyState==="live"&&(j.debug("auto resume after interruption inside autoResumeAfterInterruptionOnIOS15"),o.pause(),o.play())})}),this.autoResumeAudioElement(),Cn.on(gi.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),Cn.on(gi.IOS_15_16_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15_16),Cn.on(gi.STATE_CHANGE,()=>{Ui()&&Cn.prevState==="suspended"&&Cn.curState==="running"&&this.autoResumeAfterInterruption()})}async setSinkID(n,r){const o=this.elementMap.get(n);if(this.sinkIdMap.set(n,r),o)try{await o.setSinkId(r)}catch(s){throw new re(q.PERMISSION_DENIED,"can not set sink id: "+s.toString())}}play(n,r,o,s){if(this.elementMap.has(r))return;const l=document.createElement("audio");l.autoplay=!0,l.srcObject=new MediaStream([n]),this.bindAudioElementEvents(r,l),this.elementMap.set(r,l),this.elementStateMap.set(r,Qi.INIT),this.setVolume(r,o);const d=this.sinkIdMap.get(r);if(d)try{l.setSinkId(d).catch(_=>{j.warning("[".concat(r,"] set sink id failed"),_.toString())})}catch(_){j.warning("[".concat(r,"] set sink id failed"),_.toString())}const p=l.play();p&&p.then&&p.catch(_=>{s&&Ze.autoplayFailed(s,"audio",_.message,r),j.warning("audio element play warning",_.toString()),this.elementMap.has(r)&&_.name==="NotAllowedError"&&(j.warning("detected audio element autoplay failed"),this.elementsNeedToResume.push(l),sl(()=>{this.onAutoplayFailed&&this.onAutoplayFailed(),AU()}))})}updateTrack(n,r){const o=this.elementMap.get(n);o&&(o.srcObject=new MediaStream([r]))}isPlaying(n){return this.elementMap.has(n)&&this.elementStateMap.get(n)==="playing"}setVolume(n,r){const o=this.elementMap.get(n);o&&(r=Math.max(0,Math.min(100,r)),o.volume=r/100)}stop(n){const r=this.elementMap.get(n);if(this.sinkIdMap.delete(n),!r)return;const o=this.elementsNeedToResume.indexOf(r);this.elementsNeedToResume.splice(o,1),r.srcObject=null,r.remove(),this.elementMap.delete(n),this.elementStateMap.delete(n)}bindAudioElementEvents(n,r){IY.forEach(o=>{r.addEventListener(o,s=>{const l=this.elementStateMap.get(n),d=s.type==="pause"?"paused":s.type;if(j.debug("[".concat(n,"] audio-element-status change ").concat(l," => ").concat(d)),s.type==="error"){const p=r==null?void 0:r.error;p&&j.error("[".concat(n,"] media error, code: ").concat(p.code,", message: ").concat(p.message))}this.elementStateMap.set(n,d)})})}getPlayerState(n){return this.elementStateMap.get(n)||"uninit"}autoResumeAudioElement(){const n=()=>{this.elementsNeedToResume.forEach(r=>{r.play().then(o=>{j.debug("Auto resume audio element success")}).catch(o=>{j.warning("Auto resume audio element failed!",o)})}),this.elementsNeedToResume=[]};new Le(r=>{document.body?r():window.addEventListener("load",()=>r())}).then(()=>{Af()?document.body.addEventListener("click",n,!0):(document.body.addEventListener("touchstart",n,!0),document.body.addEventListener("mousedown",n,!0))})}};function gr(){return function(n,r,o){const s=o.value;return typeof s=="function"&&(o.value=function(){this._isClosed&&new re(q.INVALID_OPERATION,"[".concat(this.getTrackId(),"] cannot operate a closed track")).print("warning");for(var l=arguments.length,d=new Array(l),p=0;p<l;p++)d[p]=arguments[p];const _=s.apply(this,d);return _ instanceof Le?new Le((S,I)=>{_.then(S).catch(I)}):_}),o}}var wY=wi("Array").values,OY=Yl,AY=pr,NY=R,xY=wY,bN=Array.prototype,PY={DOMTokenList:!0,NodeList:!0},lu=function(n){var r=n.values;return n===bN||NY(bN,n)&&r===bN.values||AY(PY,OY(n))?xY:r};function GU(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function XT(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?GU(Object(o),!0).forEach(function(s){L(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):GU(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}class zU extends ur{constructor(r){super(),L(this,"name","VideoProcessorDestination"),L(this,"ID","0"),L(this,"_source",void 0),L(this,"videoContext",void 0),L(this,"inputTrack",void 0),this.videoContext=r}get kind(){return"video"}get enabled(){return!0}pipe(){throw new re(q.NOT_SUPPORTED,"VideoProcessor cannot pipe to any other Processor")}unpipe(){throw new re(q.NOT_SUPPORTED,"VideoProcessor cannot unpipe to any other Processor")}enable(){}disable(){}updateInput(r){if(r.context!==this.videoContext)throw new Error(`ProcessorContext passed to VideoTrack.processorDestination doesn't match it's belonging VideoTrack's context.
Probably you are making pipeline like this:
videoTrack1.pipe(processor).pipe(videoTrack2.processorDestination).`);r.track&&r.track!==this.inputTrack&&(this.videoContext.chained=!0,this.inputTrack=r.track,this.emit(to.ON_TRACK,r.track))}reset(){this.inputTrack=void 0,this.videoContext.chained=!1,this.emit(to.ON_TRACK,void 0)}}class KU extends ur{set chained(r){this._chained=r}get chained(){return this._chained}constructor(r,o){super(),L(this,"constraintsMap",new Map),L(this,"statsRegistry",[]),L(this,"usageRegistry",[]),L(this,"trackId",void 0),L(this,"direction",void 0),L(this,"_chained",!1),this.trackId=r,this.direction=o}async getConstraints(){return await io(this,ga.REQUEST_CONSTRAINTS)}async requestApplyConstraints(r,o){var s;return j.info("processor ".concat(o.name," requestApplyConstraints for ").concat(this.trackId)),r&&this.constraintsMap.set(o,r),vr(this,ga.REQUEST_UPDATE_CONSTRAINTS,Array.from(lu(s=this.constraintsMap).call(s)))}async requestRevertConstraints(r){var o;if(this.constraintsMap.has(r))return j.info("processor ".concat(r.name," requestRevertConstraints for ").concat(this.trackId)),this.constraintsMap.delete(r),vr(this,ga.REQUEST_UPDATE_CONSTRAINTS,Array.from(lu(o=this.constraintsMap).call(o)))}registerStats(r,o,s){this.statsRegistry.find(l=>l.processorID===r.ID&&l.processorName===r.name&&l.type===o)||this.statsRegistry.push({processorName:r.name,processorID:r.ID,type:o,cb:s})}unregisterStats(r,o){const s=this.statsRegistry.findIndex(l=>l.processorID===r.ID&&l.processorName===r.name&&l.type===o);s!==-1&&this.statsRegistry.splice(s,1)}gatherStats(){const r=[];for(const{processorID:o,processorName:s,type:l,cb:d}of this.statsRegistry)try{const p=d();r.push({processorID:o,processorName:s,type:l,stats:p})}catch(p){j.error(new re(q.UNEXPECTED_ERROR,p.message))}return r}registerUsage(r,o){this.usageRegistry.find(s=>s.processorID===r.ID&&s.processorName===r.name)||this.usageRegistry.push({processorID:r.ID,processorName:r.name,cb:o})}unregisterUsage(r){const o=this.usageRegistry.findIndex(s=>s.processorID===r.ID&&s.processorName===r.name);o!==-1&&this.usageRegistry.splice(o,1)}async gatherUsage(){const r=[];if(!this.chained)return[];for(const{cb:o}of this.usageRegistry)try{let s=o();s instanceof Le&&(s=await s),r.push(XT(XT({},s),{},{direction:this.direction}))}catch(s){j.error("gather extension usage error",s)}return r}getDirection(){return this.direction}}class qU extends ur{constructor(r){super(),L(this,"name","AudioProcessorDestination"),L(this,"ID","0"),L(this,"inputTrack",void 0),L(this,"inputNode",void 0),L(this,"audioProcessorContext",void 0),L(this,"_source",void 0),this.audioProcessorContext=r}get kind(){return"audio"}get enabled(){return!0}pipe(){throw new re(q.NOT_SUPPORTED,"AudioProcessorDestination cannot pipe to any other Processor")}unpipe(){throw new re(q.NOT_SUPPORTED,"AudioProcessor cannot unpipe to any other Processor")}enable(){}disable(){}reset(){this.inputTrack=void 0,this.inputNode=void 0,this.audioProcessorContext.chained=!1,this.emit(to.ON_TRACK,void 0),this.emit(to.ON_NODE,void 0)}updateInput(r){if(r.context!==this.audioProcessorContext)throw new Error(`ProcessorContext passed to AudioTrack.processorDestination doesn't match it's belonging AudioTrack's context.
        Probably you are making pipeline like this: audioTrack1.pipe(processor).pipe(audioTrack2.processorDestination).`);r.track&&this.inputTrack!==r.track&&(this.audioProcessorContext.chained=!0,this.inputTrack=r.track,this.emit(to.ON_TRACK,this.inputTrack)),r.node&&this.inputNode!==r.node&&(this.audioProcessorContext.chained=!0,this.inputNode=r.node,this.emit(to.ON_NODE,this.inputNode))}}class YU extends ur{set chained(r){this._chained=r}get chained(){return this._chained}constructor(r,o,s){super(),L(this,"constraintsMap",new Map),L(this,"statsRegistry",[]),L(this,"audioContext",void 0),L(this,"trackId",void 0),L(this,"direction",void 0),L(this,"usageRegistry",[]),L(this,"_chained",!1),this.audioContext=r,this.trackId=o,this.direction=s}async getConstraints(){return io(this,ga.REQUEST_CONSTRAINTS)}getAudioContext(){return this.audioContext}async requestApplyConstraints(r,o){var s;return j.info("processor ".concat(o.name," requestApplyConstraints for ").concat(this.trackId)),r&&this.constraintsMap.set(o,r),vr(this,ga.REQUEST_UPDATE_CONSTRAINTS,Array.from(lu(s=this.constraintsMap).call(s)))}async requestRevertConstraints(r){var o;if(this.constraintsMap.has(r))return this.constraintsMap.delete(r),vr(this,ga.REQUEST_UPDATE_CONSTRAINTS,Array.from(lu(o=this.constraintsMap).call(o)))}registerStats(r,o,s){this.statsRegistry.find(l=>l.processorID===r.ID&&l.processorName===r.name&&l.type===o)||this.statsRegistry.push({processorName:r.name,processorID:r.ID,type:o,cb:s})}unregisterStats(r,o){const s=this.statsRegistry.findIndex(l=>l.processorID===r.ID&&l.processorName===r.name&&l.type===o);s!==-1&&this.statsRegistry.splice(s,1)}gatherStats(){const r=[];for(const{processorID:o,processorName:s,type:l,cb:d}of this.statsRegistry)try{const p=d();r.push({processorID:o,processorName:s,type:l,stats:p})}catch(p){j.error(new re(q.UNEXPECTED_ERROR,p.message))}return r}registerUsage(r,o){this.usageRegistry.find(s=>s.processorID===r.ID&&s.processorName===r.name)||this.usageRegistry.push({processorID:r.ID,processorName:r.name,cb:o})}unregisterUsage(r){const o=this.usageRegistry.findIndex(s=>s.processorID===r.ID&&s.processorName===r.name);o!==-1&&this.usageRegistry.splice(o,1)}async gatherUsage(){const r=[];if(!this.chained)return[];for(const{cb:o}of this.usageRegistry)try{let s=o();s instanceof Le&&(s=await s),r.push(XT(XT({},s),{},{direction:this.direction}))}catch(s){j.error("gather extension usage error",s)}return r}getDirection(){return this.direction}}class RN extends ur{get isPlayed(){return!0}get isFreeze(){return!1}constructor(){super(),L(this,"context",void 0),L(this,"processSourceNode",void 0),L(this,"outputTrack",void 0),L(this,"processedNode",void 0),L(this,"clonedTrack",void 0),L(this,"outputNode",void 0),this.outputNode=new DY}setVolume(){}createOutputTrack(){throw new re(q.NOT_SUPPORTED,"can not create output MediaStreamTrack when WebAudio disabled")}getOriginVolumeLevel(){return 0}getAccurateVolumeLevel(){return 0}stopGetAudioBuffer(){}startGetAudioBuffer(){}play(){}stop(){}destroy(){}updateTrack(){}updateOriginTrack(){}createMediaStreamSourceNode(){}}class DY{disconnect(){}connect(){}}let JT,i0=null;class LY{constructor(){L(this,"state","open"),L(this,"trigger",void 0),L(this,"tasks",[]),j.debug("[macro-task-queue] is created."),this.trigger=setTimeout(()=>{this.state="closed",j.debug("[macro-task-queue] will be closed, all remaining tasks will execute. [".concat(this.tasks.map(r=>r.key),"]")),this.trigger=void 0,this.tasks.forEach(r=>{let{func:o}=r;return o()}),this.tasks.length=0,j.debug("[macro-task-queue] is closed.")})}enqueue(r,o){this.state!=="closed"&&(this.tasks.push({key:r,func:o}),j.debug("[macro-task-queue] is queued, current queue ".concat(this.tasks.length,". ").concat(typeof r=="string"?r:"")))}runTask(r){if(this.state==="closed")return;const o=this.tasks.findIndex(s=>s.key===r);if(o!==-1){const s=this.tasks.splice(o,1);j.debug("[macro-task-queue] is unqueued, current queue ".concat(this.tasks.length,". ").concat(typeof r=="string"?r:"")),s[0].func()}}release(){this.trigger&&(this.state="closed",clearTimeout(this.trigger),this.trigger=void 0,this.tasks.length=0,j.debug("[macro-task-queue] is closed."))}}function IN(n){return function(r,o,s){var l;const d=(l=s.value)!==null&&l!==void 0?l:s.get,p=function(){i0&&i0.state==="open"&&i0.runTask(n);for(var _=arguments.length,S=new Array(_),I=0;I<_;I++)S[I]=arguments[I];return d==null?void 0:d.apply(this,...S)};return s.value?s.value=p:s.get=p,s}}var XU,JU,QU,ZU,e4,t4,n4,r4,i4,o4,a4,s4,c4,l4,u4,d4,h4,f4,p4,m4,g4,Tn,v4,E4,_4,S4,y4,C4,uu,T4,b4,R4,I4,w4,O4,A4,N4,x4,P4,D4,L4,_o;function k4(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function wN(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?k4(Object(o),!0).forEach(function(s){L(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):k4(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}(function(n){n.UPDATE_TRACK_SOURCE="update-track-source"})(JT||(JT={}));let no=(XU=IN("INIT_WEBAUDIO"),JU=IN("INIT_WEBAUDIO"),QU=IN("INIT_WEBAUDIO"),ZU=lt({argsMap:(n,r)=>[n.getTrackId(),r],throttleTime:300}),e4=lt({argsMap:(n,r)=>[n.getTrackId(),r]}),t4=gr(),n4=t0("LocalAudioTrack","_enabledMutex"),r4=lt({argsMap:(n,r)=>[n.getTrackId(),r]}),i4=gr(),o4=t0("LocalAudioTrack","_enabledMutex"),a4=lt({argsMap:(n,r)=>[n.getTrackId(),r]}),s4=gr(),c4=gr(),l4=gr(),u4=lt({argsMap:n=>[n.getTrackId()]}),d4=gr(),h4=lt({argsMap:n=>[n.getTrackId()]}),f4=gr(),p4=lt({argsMap:n=>[n.getTrackId()]}),m4=lt({argsMap:(n,r)=>[n.getTrackId(),r.name]}),g4=lt({argsMap:n=>[n.getTrackId()]}),Ne((Tn=class extends SN{get _source(){return this._trackSource}set _source(n){this._trackSource=n}get processorContext(){return this._processorContext}set processorContext(n){this._processorContext=n}get processorDestination(){return this._processorDestination}set processorDestination(n){this._processorDestination=n}get isPlaying(){return this._useAudioElement?La.isPlaying(this.getTrackId()):this._source.isPlayed}get __className__(){return"LocalAudioTrack"}constructor(n,r,o,s,l){super(n,o),L(this,"trackMediaType","audio"),L(this,"_encoderConfig",void 0),L(this,"_trackSource",void 0),L(this,"_enabled",!0),L(this,"_volume",100),L(this,"_useAudioElement",!1),L(this,"_bypassWebAudio",!1),L(this,"processor",void 0),L(this,"_processorContext",void 0),L(this,"_processorDestination",void 0),L(this,"_getOriginVolumeLevel",void 0),this._encoderConfig=r,this._getOriginVolumeLevel=!!s;const d=()=>{this.processorContext=new YU(this._source.context,this.getTrackId(),"local"),this.processorDestination=new qU(this.processorContext),this.bindProcessorDestinationEvents(),this._source.on(ma.UPDATE_SOURCE,()=>{this.processor&&this.processor.updateInput({node:this._source.processSourceNode,context:this.processorContext})})},p=l&&Yi()&&!kU();de("DISABLE_WEBAUDIO")?(this._source=new RN,this._useAudioElement=!0,this._bypassWebAudio=!0):p?this._source=new RN:(this._source=new CN(n,!1,this._getOriginVolumeLevel?n:void 0),de("LOCAL_AUDIO_TRACK_USES_WEB_AUDIO")||(this._useAudioElement=!0)),d(),!de("DISABLE_WEBAUDIO")&&p&&(i0||(i0=new LY),i0).enqueue("INIT_WEBAUDIO",()=>{this._source=new CN(n,!1,this._getOriginVolumeLevel?n:void 0),de("LOCAL_AUDIO_TRACK_USES_WEB_AUDIO")||(this._useAudioElement=!0),d(),this.emit(JT.UPDATE_TRACK_SOURCE)})}setVolume(n){Vn(n,"volume",0,1e3),this._volume=n,this._source.setVolume(n/100),this._useAudioElement&&La.setVolume(this.getTrackId(),n);try{if(this._bypassWebAudio)return void j.debug("[".concat(this.getTrackId(),"] setVolume returned because no pass through WebAudio."));const r=this._source.createOutputTrack();this._mediaStreamTrack!==r&&(this._mediaStreamTrack=r,vr(this,Et.NEED_REPLACE_TRACK,this).then(()=>{j.debug("[".concat(this.getTrackId(),"] replace web audio track success"))}).catch(o=>{j.warning("[".concat(this.getTrackId(),"] replace web audio track failed"),o)}))}catch{}}getVolumeLevel(){return this._muted&&this.enabled&&this._getOriginVolumeLevel?this._source.getOriginVolumeLevel():this._source.getAccurateVolumeLevel()}async setPlaybackDevice(n){if(!this._useAudioElement)throw new re(q.NOT_SUPPORTED,"your browser does not support setting the audio output device");await La.setSinkID(this.getTrackId(),n)}async setEnabled(n,r,o){return this._setEnabled(n,r,o)}async _setEnabled(n,r,o){if(!o){if(n===this._enabled)return;this.stateCheck("enabled",n)}if(j.info("[".concat(this.getTrackId(),"] start setEnabled"),n),n){this._originMediaStreamTrack.enabled=!0;try{o||(this._enabled=!0),await vr(this,Et.NEED_ENABLE_TRACK,this),j.info("[".concat(this.getTrackId(),"] setEnabled to ").concat(n," success"))}catch(s){throw o||(this._enabled=!1),j.error("[".concat(this.getTrackId(),"] setEnabled to true error"),s.toString()),s}}else{this._originMediaStreamTrack.enabled=!1,o||(this._enabled=!1);try{await vr(this,Et.NEED_DISABLE_TRACK,this)}catch(s){throw o||(this._enabled=!0),j.error("[".concat(this.getTrackId(),"] setEnabled to false error"),s.toString()),s}}}async setMuted(n){n!==this._muted&&(this.stateCheck("muted",n),this._muted=n,this._originMediaStreamTrack.enabled=!n,j.debug("[".concat(this.getTrackId(),"] start set muted: ").concat(n)),n?await vr(this,Et.NEED_MUTE_TRACK,this):await vr(this,Et.NEED_UNMUTE_TRACK,this))}getStats(){return HE(()=>{j.warning("[deprecated] LocalAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalAudioStats instead")},"localAudioTrackGetStatsWarning"),Ec(this,Et.GET_STATS)||wN({},aN)}setAudioFrameCallback(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:4096;if(!n)return this._source.removeAllListeners(ma.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(r),this._source.removeAllListeners(ma.ON_AUDIO_BUFFER),this._source.on(ma.ON_AUDIO_BUFFER,o=>n(o))}play(){j.debug("[".concat(this.getTrackId(),"] start audio playback")),this._useAudioElement?(j.debug("[".concat(this.getTrackId(),"] start audio playback in element")),La.play(this._mediaStreamTrack,this.getTrackId(),this._volume)):this._source.play()}stop(){j.debug("[".concat(this.getTrackId(),"] stop audio playback")),this._useAudioElement?La.stop(this.getTrackId()):this._source.stop()}close(){super.close(),this.unbindProcessorDestinationEvents(),this.unbindProcessorContextEvents(),this.unpipe(),this.processorDestination._source&&this.processorDestination._source.unpipe(),this._source.destroy()}_updatePlayerSource(){let n=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];j.debug("[".concat(this.getTrackId(),"] update player source track")),n&&this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&La.updateTrack(this.getTrackId(),this._mediaStreamTrack)}async _updateOriginMediaStreamTrack(n,r){this._originMediaStreamTrack!==n&&(this._originMediaStreamTrack.removeEventListener("ended",this._handleTrackEnded),n.addEventListener("ended",this._handleTrackEnded),r&&this._originMediaStreamTrack.stop(),this._originMediaStreamTrack=n,this._muted&&(this._originMediaStreamTrack.enabled=!1),this.processor&&this.processor.updateInput({track:n,context:this.processorContext}),this._mediaStreamTrack!==this._source.outputTrack?(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await vr(this,Et.NEED_REPLACE_TRACK,this)):this._source.updateTrack(this._originMediaStreamTrack),this._getOriginVolumeLevel&&this._source.updateOriginTrack(n))}renewMediaStreamTrack(n){return Le.resolve(void 0)}pipe(n){if(this._bypassWebAudio)throw new re(q.INVALID_OPERATION,"Can not process AudioTrack when bypassWebAudio set to true.");if(this.processor===n)return n;if(n._source)throw new re(q.INVALID_OPERATION,"Processor ".concat(n.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=n,this.processor._source=this,n.updateInput({track:this._originMediaStreamTrack,node:this._source.processSourceNode,context:this.processorContext}),n}unpipe(){var n;if(!this.processor)return;const r=this.processor;(n=this._source.processSourceNode)===null||n===void 0||n.disconnect(),this.processor._source=!1,this.processor=void 0,r.reset()}bindProcessorDestinationEvents(){this.processorDestination.on(to.ON_TRACK,async n=>{n?n!==this._mediaStreamTrack&&(this._mediaStreamTrack=n,this._updatePlayerSource(!1),this._source.processedNode=this._source.createMediaStreamSourceNode(n),await vr(this,Et.NEED_REPLACE_TRACK,this)):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await vr(this,Et.NEED_REPLACE_TRACK,this))}),this.processorDestination.on(to.ON_NODE,n=>{this._source.processedNode=n})}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(to.ON_TRACK),this.processorDestination.removeAllListeners(to.ON_NODE)}unbindProcessorContextEvents(){this.processorContext.removeAllListeners(ga.REQUEST_UPDATE_CONSTRAINTS),this.processorContext.removeAllListeners(ga.REQUEST_CONSTRAINTS)}}).prototype,"_source",[XU],Object.getOwnPropertyDescriptor(Tn.prototype,"_source"),Tn.prototype),Ne(Tn.prototype,"processorContext",[JU],Object.getOwnPropertyDescriptor(Tn.prototype,"processorContext"),Tn.prototype),Ne(Tn.prototype,"processorDestination",[QU],Object.getOwnPropertyDescriptor(Tn.prototype,"processorDestination"),Tn.prototype),Ne(Tn.prototype,"setVolume",[ZU],Object.getOwnPropertyDescriptor(Tn.prototype,"setVolume"),Tn.prototype),Ne(Tn.prototype,"setPlaybackDevice",[e4,t4],Object.getOwnPropertyDescriptor(Tn.prototype,"setPlaybackDevice"),Tn.prototype),Ne(Tn.prototype,"setEnabled",[n4,r4,i4],Object.getOwnPropertyDescriptor(Tn.prototype,"setEnabled"),Tn.prototype),Ne(Tn.prototype,"setMuted",[o4,a4,s4],Object.getOwnPropertyDescriptor(Tn.prototype,"setMuted"),Tn.prototype),Ne(Tn.prototype,"getStats",[c4],Object.getOwnPropertyDescriptor(Tn.prototype,"getStats"),Tn.prototype),Ne(Tn.prototype,"setAudioFrameCallback",[l4],Object.getOwnPropertyDescriptor(Tn.prototype,"setAudioFrameCallback"),Tn.prototype),Ne(Tn.prototype,"play",[u4,d4],Object.getOwnPropertyDescriptor(Tn.prototype,"play"),Tn.prototype),Ne(Tn.prototype,"stop",[h4,f4],Object.getOwnPropertyDescriptor(Tn.prototype,"stop"),Tn.prototype),Ne(Tn.prototype,"close",[p4],Object.getOwnPropertyDescriptor(Tn.prototype,"close"),Tn.prototype),Ne(Tn.prototype,"pipe",[m4],Object.getOwnPropertyDescriptor(Tn.prototype,"pipe"),Tn.prototype),Ne(Tn.prototype,"unpipe",[g4],Object.getOwnPropertyDescriptor(Tn.prototype,"unpipe"),Tn.prototype),Tn),QT=(v4=lt({argsMap:(n,r)=>[n.getTrackId(),r]}),E4=gr(),_4=t0("MicrophoneAudioTrack","_enabledMutex"),S4=lt({argsMap:(n,r,o)=>[n.getTrackId(),r,o]}),y4=gr(),C4=lt({argsMap:n=>[n.getTrackId()]}),Ne((uu=class extends no{get __className__(){return"MicrophoneAudioTrack"}constructor(n,r,o,s){super(n,r.encoderConfig?HT(r.encoderConfig):{},s,de("GET_VOLUME_OF_MUTED_AUDIO_TRACK"),!0),L(this,"_config",void 0),L(this,"_deviceName","default"),L(this,"_constraints",void 0),L(this,"_originalConstraints",void 0),L(this,"_enabled",!0),this._config=r,this._constraints=o,this._originalConstraints=o,this._deviceName=n.label,typeof r.bypassWebAudio=="boolean"&&(this._bypassWebAudio=r.bypassWebAudio),(qd()||TE())&&Cn.bindInterruptDetectorTrack(this),this.on(JT.UPDATE_TRACK_SOURCE,()=>{this.bindProcessorContextEvents()}),kU()&&this.bindProcessorContextEvents()}async setDevice(n){if(j.info("[".concat(this.getTrackId(),"] start set device to ").concat(n)),this._enabled)try{const r=await ls.getDeviceById(n),o={};o.audio=wN({},this._constraints),o.audio.deviceId={exact:n},this._originMediaStreamTrack.stop();let s=null;try{s=await vc(o,this.getTrackId())}catch(l){throw j.error("[".concat(this.getTrackId(),"] setDevice failed"),l.toString()),s=await vc({audio:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(s.getAudioTracks()[0],!1),l}await this._updateOriginMediaStreamTrack(s.getAudioTracks()[0],!1),this._deviceName=r.label,this._config.microphoneId=n,this._constraints.deviceId={exact:n}}catch(r){throw j.error("[".concat(this.getTrackId(),"] setDevice error"),r.toString()),r}else try{const r=await ls.getDeviceById(n);this._deviceName=r.label,this._config.microphoneId=n,this._constraints.deviceId={exact:n}}catch(r){throw j.error("[".concat(this.getTrackId(),"] setDevice error"),r.toString()),r}j.info("[".concat(this.getTrackId(),"] set device to ").concat(n," success"))}async setEnabled(n,r,o){if(r)return j.debug("[".concat(this.getTrackId(),"] setEnabled false (do not close microphone)")),await super._setEnabled(n);if(!o){if(n===this._enabled)return;this.stateCheck("enabled",n)}if(j.info("[".concat(this.getTrackId(),"] start setEnabled"),n),!n){var s;this._originMediaStreamTrack.onended=null,this._originMediaStreamTrack.stop(),(s=this._source.clonedTrack)===null||s===void 0||s.stop(),o||(this._enabled=!1);try{await vr(this,Et.NEED_DISABLE_TRACK,this)}catch(p){throw j.error("[".concat(this.getTrackId(),"] setEnabled false failed"),p.toString()),p}return}const l=wN({},this._constraints),d=ls.searchDeviceIdByName(this._deviceName);d&&!l.deviceId&&(l.deviceId=d);try{o||(this._enabled=!0);const p=await vc({audio:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(p.getAudioTracks()[0],!1),await vr(this,Et.NEED_ENABLE_TRACK,this)}catch(p){throw o||(this._enabled=!1),j.error("[".concat(this.getTrackId(),"] setEnabled true failed"),p.toString()),p}j.info("[".concat(this.getTrackId(),"] setEnabled success"))}close(){super.close(),(qd()||TE())&&Cn.unbindInterruptDetectorTrack(this)}onTrackEnded(){if((Ui()||hc())&&this._enabled&&!this._isClosed&&Cn.duringInterruption){const n=async()=>{Cn.off(gi.IOS_INTERRUPTION_END,n),this._enabled&&!this._isClosed&&(j.debug("[".concat(this.getTrackId(),"] try capture microphone media device for interrupted iOS device.")),await this.setEnabled(!1),await this.setEnabled(!0))};Cn.on(gi.IOS_INTERRUPTION_END,n)}else j.debug("[".concat(this.getTrackId(),"] track ended")),this.safeEmit(th.TRACK_ENDED)}async renewMediaStreamTrack(n){const r=n||this._constraints,o=ls.searchDeviceIdByName(this._deviceName);if(o&&!r.deviceId&&(r.deviceId=o),this._constraints=r,this._enabled){this._originMediaStreamTrack.stop();const s=await vc({audio:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(s.getAudioTracks()[0],!0)}}bindProcessorContextEvents(){this.processorContext.on(ga.REQUEST_UPDATE_CONSTRAINTS,async(n,r,o)=>{try{const s=Object.assign({},this._originalConstraints,...n);await this.renewMediaStreamTrack(s),r()}catch(s){o(s)}}),this.processorContext.on(ga.REQUEST_CONSTRAINTS,async n=>{n(this._originMediaStreamTrack.getSettings())})}}).prototype,"setDevice",[v4,E4],Object.getOwnPropertyDescriptor(uu.prototype,"setDevice"),uu.prototype),Ne(uu.prototype,"setEnabled",[_4,S4,y4],Object.getOwnPropertyDescriptor(uu.prototype,"setEnabled"),uu.prototype),Ne(uu.prototype,"close",[C4],Object.getOwnPropertyDescriptor(uu.prototype,"close"),uu.prototype),uu),kY=(T4=lt({argsMap:(n,r)=>[n.getTrackId(),r,n.duration]}),b4=gr(),R4=lt({argsMap:n=>[n.getTrackId()]}),I4=gr(),w4=lt({argsMap:n=>[n.getTrackId()]}),O4=gr(),A4=lt({argsMap:n=>[n.getTrackId()]}),N4=gr(),x4=lt({argsMap:n=>[n.getTrackId()]}),P4=gr(),D4=lt({argsMap:n=>[n.getTrackId()]}),L4=gr(),Ne((_o=class extends no{get __className__(){return"BufferSourceAudioTrack"}constructor(n,r,o,s){super(r.createOutputTrack(),o,s),L(this,"source",void 0),L(this,"_bufferSource",void 0),this.source=n,this._bufferSource=r,this._bufferSource.on(ma.AUDIO_SOURCE_STATE_CHANGE,l=>{this.safeEmit(th.SOURCE_STATE_CHANGE,l)});try{this._mediaStreamTrack=this._source.createOutputTrack()}catch{}}get currentState(){return this._bufferSource.currentState}get duration(){return this._bufferSource.duration}get playbackSpeed(){return this._bufferSource.playbackSpeed}getCurrentTime(){return this._bufferSource.currentTime}startProcessAudioBuffer(n){n&&this._bufferSource.updateOptions(n),this._bufferSource.startProcessAudioBuffer()}pauseProcessAudioBuffer(){this._bufferSource.pauseProcessAudioBuffer()}seekAudioBuffer(n){this._bufferSource.seekAudioBuffer(n)}resumeProcessAudioBuffer(){this._bufferSource.resumeProcessAudioBuffer()}stopProcessAudioBuffer(){this._bufferSource.stopProcessAudioBuffer()}setAudioBufferPlaybackSpeed(n){Vn(n,"speed",0),this._bufferSource.setAudioBufferPlaybackSpeed(n)}}).prototype,"startProcessAudioBuffer",[T4,b4],Object.getOwnPropertyDescriptor(_o.prototype,"startProcessAudioBuffer"),_o.prototype),Ne(_o.prototype,"pauseProcessAudioBuffer",[R4,I4],Object.getOwnPropertyDescriptor(_o.prototype,"pauseProcessAudioBuffer"),_o.prototype),Ne(_o.prototype,"seekAudioBuffer",[w4,O4],Object.getOwnPropertyDescriptor(_o.prototype,"seekAudioBuffer"),_o.prototype),Ne(_o.prototype,"resumeProcessAudioBuffer",[A4,N4],Object.getOwnPropertyDescriptor(_o.prototype,"resumeProcessAudioBuffer"),_o.prototype),Ne(_o.prototype,"stopProcessAudioBuffer",[x4,P4],Object.getOwnPropertyDescriptor(_o.prototype,"stopProcessAudioBuffer"),_o.prototype),Ne(_o.prototype,"setAudioBufferPlaybackSpeed",[D4,L4],Object.getOwnPropertyDescriptor(_o.prototype,"setAudioBufferPlaybackSpeed"),_o.prototype),_o);class va extends no{get __className__(){return"MixingAudioTrack"}get isActive(){for(const r of this.trackList)if(r._enabled&&!r._isClosed&&!r.muted)return!0;return!1}constructor(){const r=n0().createMediaStreamDestination();super(r.stream.getAudioTracks()[0],void 0,Yn(8,"track-mix-")),L(this,"trackList",void 0),L(this,"destNode",void 0);try{this._mediaStreamTrack=this._source.createOutputTrack()}catch{}this.destNode=r,this.trackList=[]}hasAudioTrack(r){return this.trackList.indexOf(r)!==-1}addAudioTrack(r){this.trackList.indexOf(r)===-1?(j.debug("add ".concat(r.getTrackId()," to mixing track")),r._source.outputNode.connect(this.destNode),this.trackList.push(r),this.updateEncoderConfig()):j.debug("track ".concat(r.getTrackId()," is already added"))}removeAudioTrack(r){if(this.trackList.indexOf(r)!==-1){j.debug("remove ".concat(r.getTrackId()," from mixing track"));try{r._source.outputNode.disconnect(this.destNode)}catch{}NN(this.trackList,r),this.updateEncoderConfig()}}updateEncoderConfig(){const r={};this.trackList.forEach(o=>{o._encoderConfig&&((o._encoderConfig.bitrate||0)>(r.bitrate||0)&&(r.bitrate=o._encoderConfig.bitrate),(o._encoderConfig.sampleRate||0)>(r.sampleRate||0)&&(r.sampleRate=o._encoderConfig.sampleRate),(o._encoderConfig.sampleSize||0)>(r.sampleSize||0)&&(r.sampleSize=o._encoderConfig.sampleSize),o._encoderConfig.stereo&&(r.stereo=!0))}),this._encoderConfig=r}_updateRtpTransceiver(r){this._rtpTransceiver!==r&&(this._rtpTransceiver=r,this.trackList.forEach(o=>{o instanceof va?o.emit(jE.TRANSCEIVER_UPDATED,r):o._updateRtpTransceiver(r)}))}}class MY extends ur{constructor(){super(...arguments),L(this,"resultStorage",new Map)}setLocalAudioStats(r,o,s){this.record("AUDIO_INPUT_LEVEL_TOO_LOW",r,this.checkAudioInputLevel(s,o)),this.record("SEND_AUDIO_BITRATE_TOO_LOW",r,this.checkSendAudioBitrate(s,o))}setLocalVideoStats(r,o,s){this.record("SEND_VIDEO_BITRATE_TOO_LOW",r,this.checkSendVideoBitrate(s,o)),this.record("FRAMERATE_INPUT_TOO_LOW",r,this.checkFramerateInput(s,o)),this.record("FRAMERATE_SENT_TOO_LOW",r,this.checkFramerateSent(s))}setRemoteAudioStats(r,o){const s=r.getUserId();this.record("AUDIO_OUTPUT_LEVEL_TOO_LOW",s,this.checkAudioOutputLevel(o))}setRemoteVideoStats(r,o){const s=r.getUserId();this.record("RECV_VIDEO_DECODE_FAILED",s,this.checkVideoDecode(o))}record(r,o,s){if(de("STATS_UPDATE_INTERVAL")>500)return;this.resultStorage.has(r)||this.resultStorage.set(r,{result:[],isPrevNormal:!0});const l=this.resultStorage.get(r);if(l&&(l.result.push(s),l.result.length>=5)){const d=l.result.includes(!0);l.isPrevNormal&&!d&&this.emit("exception",M4[r],r,o),!l.isPrevNormal&&d&&this.emit("exception",M4[r]+2e3,r+"_RECOVER",o),l.isPrevNormal=d,l.result=[]}}checkAudioOutputLevel(r){return!(r.receiveBitrate>0&&r.receiveLevel===0)}checkAudioInputLevel(r,o){return o instanceof va&&!o.isActive||!!o.muted||r.sendVolumeLevel!==0}checkFramerateInput(r,o){let s=null;o._encoderConfig&&o._encoderConfig.frameRate&&(s=Gu(o._encoderConfig.frameRate));const l=r.captureFrameRate;return!s||!l||!(s>10&&l<5||s<10&&s>=5&&l<=1)}checkFramerateSent(r){return!(r.captureFrameRate&&r.sendFrameRate&&r.captureFrameRate>5&&r.sendFrameRate<=1)}checkSendVideoBitrate(r,o){return!!o.muted||r.sendBitrate!==0}checkSendAudioBitrate(r,o){return o instanceof va&&!o.isActive||!!o.muted||r.sendBitrate!==0}checkVideoDecode(r){return r.receiveBitrate===0||r.decodeFrameRate!==0}}const M4={FRAMERATE_INPUT_TOO_LOW:1001,FRAMERATE_SENT_TOO_LOW:1002,SEND_VIDEO_BITRATE_TOO_LOW:1003,RECV_VIDEO_DECODE_FAILED:1005,AUDIO_INPUT_LEVEL_TOO_LOW:2001,AUDIO_OUTPUT_LEVEL_TOO_LOW:2002,SEND_AUDIO_BITRATE_TOO_LOW:2003},Ds=new class{markSubscribeStart(n,r){performance.mark("agora-web-sdk/".concat(n,"/subscribe-").concat(r))}markPublishStart(n,r){performance.mark("agora-web-sdk/".concat(n,"/publish-").concat(r))}measureFromSubscribeStart(n,r){const o=performance.getEntriesByName("agora-web-sdk/".concat(n,"/subscribe-").concat(r));if(o.length>0){const s=o[o.length-1];return Math.round(performance.now()-s.startTime)}return 0}measureFromPublishStart(n,r){const o=performance.getEntriesByName("agora-web-sdk/".concat(n,"/publish-").concat(r));if(o.length>0){const s=o[o.length-1];return Math.round(performance.now()-s.startTime)}return 0}};function U4(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function jf(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?U4(Object(o),!0).forEach(function(s){L(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):U4(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}class o0{constructor(r){L(this,"store",void 0),L(this,"onStatsException",void 0),L(this,"onUploadPublishDuration",void 0),L(this,"onStatsChanged",void 0),L(this,"localStats",new Map),L(this,"remoteStats",new Map),L(this,"updateStatsInterval",void 0),L(this,"trafficStats",void 0),L(this,"trafficStatsPeerList",[]),L(this,"uplinkStats",void 0),L(this,"exceptionMonitor",void 0),L(this,"p2pChannel",void 0),L(this,"scalabilityMode",Ao.L1T1),L(this,"updateStats",()=>{this.p2pChannel&&(this.updateRemoteStats(this.p2pChannel),this.updateLocalStats(this.p2pChannel))}),this.store=r,this.updateStatsInterval=window.setInterval(this.updateStats,1e3),this.exceptionMonitor=new MY,this.exceptionMonitor.on("exception",(o,s,l)=>{this.onStatsException&&this.onStatsException(o,s,l)})}reset(){this.localStats=new Map,this.remoteStats=new Map,this.trafficStats=void 0,this.trafficStatsPeerList=[],this.uplinkStats=void 0}getLocalAudioTrackStats(){return this.localStats.get(Je.LocalAudioTrack)||jf({},aN)}getLocalVideoTrackStats(){return this.localStats.get(Je.LocalVideoTrack)||jf({},sN)}getRemoteAudioTrackStats(r){const o=(d,p)=>{if(!this.trafficStats)return p;const _=this.trafficStats.peer_delay.find(S=>S.peer_uid===d);return _&&(p.publishDuration=_.B_ppad+(Date.now()-this.trafficStats.timestamp)),p},s={};if(r){var l;const d=(l=this.remoteStats.get(r))===null||l===void 0?void 0:l.audioStats;d&&(s[r]=o(r,d))}else Array.from(this.remoteStats.entries()).forEach(d=>{let[p,{audioStats:_}]=d;_&&(s[p]=o(p,_))});return s}getRemoteNetworkQualityStats(r){const o={};if(r){var s;const l=(s=this.remoteStats.get(r))===null||s===void 0?void 0:s.networkStats;l&&(o[r]=l)}else Array.from(this.remoteStats.entries()).forEach(l=>{let[d,{networkStats:p}]=l;p&&(o[d]=p)});return o}getRemoteVideoTrackStats(r){const o=(d,p)=>{if(!this.trafficStats)return p;const _=this.trafficStats.peer_delay.find(S=>S.peer_uid===d);return _&&(p.publishDuration=_.B_ppvd+(Date.now()-this.trafficStats.timestamp)),p},s={};if(r){var l;const d=(l=this.remoteStats.get(r))===null||l===void 0?void 0:l.videoStats;d&&(s[r]=o(r,d))}else Array.from(this.remoteStats.entries()).forEach(d=>{let[p,{videoStats:_}]=d;_&&(s[p]=o(p,_))});return s}getRTCStats(){let r=0,o=0,s=0,l=0;const d=this.localStats.get(Je.LocalAudioTrack);d&&(r+=d.sendBytes,o+=d.sendBitrate);const p=this.localStats.get(Je.LocalVideoTrack);p&&(r+=p.sendBytes,o+=p.sendBitrate);const _=this.localStats.get(Je.LocalVideoLowTrack);_&&(r+=_.sendBytes,o+=_.sendBitrate),this.remoteStats.forEach(I=>{let{audioStats:b,videoStats:A}=I;b&&(s+=b.receiveBytes,l+=b.receiveBitrate),A&&(s+=A.receiveBytes,l+=A.receiveBitrate)});let S=1;return this.trafficStats&&(S+=this.trafficStats.peer_delay.length),{Duration:0,UserCount:S,SendBitrate:o,SendBytes:r,RecvBytes:s,RecvBitrate:l,OutgoingAvailableBandwidth:this.uplinkStats?this.uplinkStats.B_uab/1e3:0,RTT:this.trafficStats?2*this.trafficStats.B_acd:0}}addLocalStats(r){this.localStats.set(r,void 0)}removeLocalStats(r){r?this.localStats.delete(r):this.localStats.clear()}addRemoteStats(r){this.remoteStats.set(r,{})}removeRemoteStats(r){r?this.remoteStats.delete(r):this.remoteStats.clear()}addP2PChannel(r){this.p2pChannel=r}updateTrafficStats(r){r.peer_delay=r.peer_delay.filter(o=>o.B_ppad!==void 0||o.B_ppvd!==void 0),r.peer_delay.filter(o=>this.trafficStatsPeerList.indexOf(o.peer_uid)===-1).forEach(o=>{var s;const l=(s=this.p2pChannel)===null||s===void 0?void 0:s.getRemoteMedia(o.peer_uid),d=l!=null&&l.videoSSRC?Ds.measureFromSubscribeStart(this.store.clientId,l.videoSSRC):0,p=l!=null&&l.audioSSRC?Ds.measureFromSubscribeStart(this.store.clientId,l.audioSSRC):0;o.B_ppad!==void 0&&o.B_ppvd!==void 0&&(this.onUploadPublishDuration&&this.onUploadPublishDuration(o.peer_uid,o.B_ppad,o.B_ppvd,d>p?d:p),this.trafficStatsPeerList.push(o.peer_uid))}),this.trafficStats=r}updateUplinkStats(r){this.uplinkStats&&this.uplinkStats.B_fir!==r.B_fir&&j.debug("[".concat(this.store.clientId,"]: Period fir changes to ").concat(r.B_fir)),this.uplinkStats=r}static isRemoteVideoFreeze(r,o,s){if(!r)return!1;const l=!!s&&o.framesDecodeFreezeTime>s.framesDecodeFreezeTime,d=!s||o.framesDecodeCount>s.framesDecodeCount;return l||!d}static isRemoteAudioFreeze(r){return!!r&&r._isFreeze()}isLocalVideoFreeze(r){return!(!r.inputFrame||!r.sentFrame)&&r.inputFrame.frameRate>5&&r.sentFrame.frameRate<3}updateLocalStats(r){Array.from(this.localStats.entries()).forEach(o=>{let[s,l]=o;switch(s){case Je.LocalVideoTrack:case Je.LocalVideoLowTrack:{const p=l,_=jf({},sN),S=r.getStats(),I=r.getLocalMedia(s);if(S){const b=S.videoSend.find(A=>A.ssrc===(I==null?void 0:I.ssrcs[0].ssrcId));if(b){const A=r.getLocalVideoSize(),F=r.getEncoderConfig(Je.LocalVideoTrack);b.codec!=="H264"&&b.codec!=="H265"&&b.codec!=="VP8"&&b.codec!=="VP9"&&b.codec!=="AV1X"&&b.codec!=="AV1"||(_.codecType=b.codec),_.sendBytes=b.bytes,_.sendBitrate=p?8*Math.max(0,_.sendBytes-p.sendBytes):0,b.inputFrame?(_.captureFrameRate=b.inputFrame.frameRate,_.captureResolutionHeight=b.inputFrame.height,_.captureResolutionWidth=b.inputFrame.width):A&&(_.captureResolutionWidth=A.width,_.captureResolutionHeight=A.height),b.sentFrame?(_.sendFrameRate=b.sentFrame.frameRate,_.sendResolutionHeight=b.sentFrame.height,_.sendResolutionWidth=b.sentFrame.width):A&&(_.sendResolutionWidth=A.width,_.sendResolutionHeight=A.height),b.avgEncodeMs&&(_.encodeDelay=b.avgEncodeMs),F&&F.bitrateMax&&(_.targetSendBitrate=1e3*F.bitrateMax),_.sendPackets=b.packets,_.sendPacketsLost=b.packetsLost,_.totalDuration=p?p.totalDuration+1:1,_.totalFreezeTime=p?p.totalFreezeTime:0,this.isLocalVideoFreeze(b)&&(_.totalFreezeTime+=1),b.scalabilityMode&&this.scalabilityMode!==b.scalabilityMode&&(j.debug("[".concat(this.store.clientId,"]: The scalabilityMode of the video sending stream is ").concat(b.scalabilityMode)),this.scalabilityMode=b.scalabilityMode)}this.trafficStats&&(_.sendPacketsLost=this.trafficStats.B_pvlr4/100)}var d;this.localStats.set(s,_),((p==null?void 0:p.sendResolutionWidth)!==_.sendResolutionWidth||(p==null?void 0:p.sendResolutionHeight)!==_.sendResolutionHeight)&&((d=this.onStatsChanged)===null||d===void 0||d.call(this,"resolution",{width:_.sendResolutionWidth,height:_.sendResolutionHeight})),_&&I&&this.exceptionMonitor.setLocalVideoStats(this.store.uid,I.track,_);break}case Je.LocalAudioTrack:{const p=l,_=jf({},aN),S=r.getStats(),I=r.getLocalMedia(s);if(S){const b=S.audioSend.find(A=>A.ssrc===(I==null?void 0:I.ssrcs[0].ssrcId));if(b){if(b.codec!=="opus"&&b.codec!=="aac"&&b.codec!=="PCMU"&&b.codec!=="PCMA"&&b.codec!=="G722"||(_.codecType=b.codec),b.inputLevel)_.sendVolumeLevel=Math.round(32767*b.inputLevel);else{const A=r.getLocalAudioVolume();A&&(_.sendVolumeLevel=Math.round(32767*A))}_.sendBytes=b.bytes,_.sendPackets=b.packets,_.sendPacketsLost=b.packetsLost,_.sendBitrate=p?8*Math.max(0,_.sendBytes-p.sendBytes):0}}this.trafficStats&&(_.sendPacketsLost=this.trafficStats.B_pvlr4/100),this.localStats.set(Je.LocalAudioTrack,_),_&&I&&this.exceptionMonitor.setLocalAudioStats(this.store.uid,I.track,_);break}}})}updateRemoteStats(r){Array.from(this.remoteStats.entries()).forEach(o=>{let[s,{videoStats:l,audioStats:d,videoPcStats:p}]=o;const _=d,S=l,I=p,b=jf({},lU),A=jf({},uU),F=jf({},mq),{audioTrack:W,videoTrack:Z,audioSSRC:ee,videoSSRC:te}=r.getRemoteMedia(s),Ee=r.getStats(),ye=Ee==null?void 0:Ee.audioRecv.find(ke=>ke.ssrc===ee),Pe=Ee==null?void 0:Ee.videoRecv.find(ke=>ke.ssrc===te),Xe=this.trafficStats&&this.trafficStats.peer_delay.find(ke=>ke.peer_uid===s);if(ye&&(ye.codec!=="opus"&&ye.codec!=="aac"&&ye.codec!=="PCMU"&&ye.codec!=="PCMA"&&ye.codec!=="G722"||(b.codecType=ye.codec),ye.outputLevel?b.receiveLevel=Math.round(32767*ye.outputLevel):W&&(b.receiveLevel=Math.round(32767*W.getVolumeLevel())),b.receiveBytes=ye.bytes,b.receivePackets=ye.packets,b.receivePacketsLost=ye.packetsLost,b.packetLossRate=b.receivePacketsLost/(b.receivePackets+b.receivePacketsLost),b.receiveBitrate=_?8*Math.max(0,b.receiveBytes-_.receiveBytes):0,b.totalDuration=_?_.totalDuration+1:1,b.totalFreezeTime=_?_.totalFreezeTime:0,b.freezeRate=b.totalFreezeTime/b.totalDuration,b.receiveDelay=ye.jitterBufferMs,b.totalDuration>10&&o0.isRemoteAudioFreeze(W)&&(b.totalFreezeTime+=1)),Pe){Pe.codec!=="H264"&&Pe.codec!=="H265"&&Pe.codec!=="VP8"&&Pe.codec!=="VP9"&&Pe.codec!=="AV1X"&&Pe.codec!=="AV1"||(A.codecType=Pe.codec),A.receiveBytes=Pe.bytes,A.receiveBitrate=S?8*Math.max(0,A.receiveBytes-S.receiveBytes):0,A.decodeFrameRate=Pe.decodeFrameRate<0?0:Pe.decodeFrameRate,A.renderFrameRate=Pe.decodeFrameRate<0?0:Pe.decodeFrameRate,Pe.outputFrame&&(A.renderFrameRate=Pe.outputFrame.frameRate),Pe.receivedFrame?(A.receiveFrameRate=Pe.receivedFrame.frameRate,A.receiveResolutionHeight=Pe.receivedFrame.height,A.receiveResolutionWidth=Pe.receivedFrame.width):Z&&(A.receiveResolutionHeight=Z._videoHeight||0,A.receiveResolutionWidth=Z._videoWidth||0),Pe.framesRateFirefox!==void 0&&(A.receiveFrameRate=Math.round(Pe.framesRateFirefox)),A.receivePackets=Pe.packets,A.receivePacketsLost=Pe.packetsLost,A.packetLossRate=A.receivePacketsLost/(A.receivePackets+A.receivePacketsLost),A.totalDuration=S?S.totalDuration+1:1,A.totalFreezeTime=S?S.totalFreezeTime:0,A.receiveDelay=Pe.jitterBufferMs||0;const ke=!!te&&r.getRemoteVideoIsReady(te);Z&&ke&&o0.isRemoteVideoFreeze(Z,Pe,I)&&(A.totalFreezeTime+=1),A.freezeRate=A.totalFreezeTime/A.totalDuration}Xe&&(b.end2EndDelay=Xe.B_ad,A.end2EndDelay=Xe.B_vd,b.transportDelay=Xe.B_ed,A.transportDelay=Xe.B_ed,b.currentPacketLossRate=Xe.B_ealr4/100,A.currentPacketLossRate=Xe.B_evlr4/100,F.uplinkNetworkQuality=Xe.B_punq?Xe.B_punq:0,F.downlinkNetworkQuality=Xe.B_pdnq?Xe.B_pdnq:0),this.remoteStats.set(s,{audioStats:b,videoStats:A,videoPcStats:Pe,networkStats:F}),W&&this.exceptionMonitor.setRemoteAudioStats(W,b),Z&&this.exceptionMonitor.setRemoteVideoStats(Z,A)})}}const Wu=new class extends ur{get visibility(){return document.visibilityState}get lastHiddenTime(){return this._lastHiddenTime}get lastVisibleTime(){return this._lastVisibleTime}constructor(){super(),L(this,"_lastHiddenTime",0),L(this,"_lastVisibleTime",0),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"?this._lastHiddenTime=performance.now():this._lastVisibleTime=performance.now(),j.debug("document visibility went ".concat(document.visibilityState)),this.emit("VISIBILITY_CHANGE",document.visibilityState)})}};function F4(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function ZT(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?F4(Object(o),!0).forEach(function(s){L(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):F4(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}function eb(n){return n.match(/^[\.\:\d]+$/)?"".concat(n.replace(/[^\d]/g,"-"),".").concat(de("TURN_DOMAIN")):(j.info("Cannot recognized as IP address ".concat(n,". Used As Host instead")),n)}function V4(n,r){var o,s;const l=de("GATEWAY_DOMAINS");let d=l[1]&&r.indexOf(l[1])!==-1?1:0;n.addresses=n.addresses||[];const p=n.addresses.map(S=>S.domain_prefix?{address:"".concat(S.domain_prefix,".").concat(l[d++%l.length],":").concat(S.port)}:S.ip.match(/^[\.\:\d]+$/)?{ip:S.ip,port:S.port,address:"".concat(S.ip.replace(/[^\d]/g,"-"),".").concat(l[d++%l.length],":").concat(S.port)}:(j.info("Cannot recognized as IP address ".concat(S.ip,". Used As Host instead")),{ip:S.ip,port:S.port,address:"".concat(S.ip,":").concat(S.port)}));if((o=n.detail)!==null&&o!==void 0&&o[18]&&typeof((s=n.detail)===null||s===void 0?void 0:s[18])=="string"){const S=n.detail[18],I=S==null?void 0:S.split(";");for(let b=0;b<I.length;b++){var _;const A=el(_=I[b]).call(_);p[b]&&A&&(p[b].ip6=A)}}return{gatewayAddrs:p,uid:n.uid,cid:n.cid,cert:n.cert,vid:n.detail&&n.detail[8],uni_lbs_ip:n.detail&&n.detail[1],res:n,csIp:n.detail&&n.detail[502]}}function Gu(n){return typeof n=="number"?n:n.exact||n.ideal||n.max||n.min||0}function j4(n){const r=n._encoderConfig;if(!r)return{};const o={resolution:r.width&&r.height?"".concat(Gu(r.width),"x").concat(Gu(r.height)):void 0,maxVideoBW:r.bitrateMax,minVideoBW:r.bitrateMin};return typeof r.frameRate=="number"?(o.maxFrameRate=r.frameRate,o.minFrameRate=r.frameRate):r.frameRate&&(o.maxFrameRate=r.frameRate.max||r.frameRate.ideal||r.frameRate.exact||r.frameRate.min,o.minFrameRate=r.frameRate.min||r.frameRate.ideal||r.frameRate.exact||r.frameRate.max),o}function B4(n){return n>=0&&n<.17?1:n>=.17&&n<.36?2:n>=.36&&n<.59?3:n>=.59&&n<=1?4:n>1?5:0}function ON(n,r){let o,s,l;switch(r){case mi.CHOOSE_SERVER:o=4096,s="choose server";break;case mi.CLOUD_PROXY:o=1048576,s="proxy";break;case mi.CLOUD_PROXY_5:o=4194304,s="proxy5";break;case mi.CLOUD_PROXY_FALLBACK:o=4194310,s="proxy fallback";break;default:throw new re(q.UNEXPECTED_ERROR,"multi unlibs response transformer get unknown service id",{csIp:n.detail&&n.detail[502],retry:!1})}if(n.response_body.forEach(d=>{d.buffer&&d.buffer.flag===o&&(l={code:d.buffer.code,addresses:(d.buffer.edges_services||[]).map(p=>ZT(ZT({},p),{},{ticket:d.buffer.cert})),server_ts:n.enter_ts,uid:d.buffer.uid,cid:d.buffer.cid,cname:d.buffer.cname,detail:ZT(ZT({},d.buffer.detail),n.detail),flag:d.buffer.flag,opid:n.opid,cert:d.buffer.cert})}),!l)throw new re(q.MULTI_UNILBS_RESPONSE_ERROR,"cannot parse response ".concat(s," from multi unilbs response"),{csIp:n.detail&&n.detail[502]});return l}async function UY(n,r){return await Le.all(n.addresses.map(async o=>({address:eb(o.ip),tcpport:o.port,udpport:o.port,username:r&&de("ENCRYPT_PROXY_USERNAME_AND_PSW")&&window.isSecureContext?r.toString():rs.username,password:r&&de("ENCRYPT_PROXY_USERNAME_AND_PSW")&&window.isSecureContext?await yY(r.toString()):rs.password})))}function FY(n,r){const o=r._videoWidth||r.getMediaStreamTrack(!0).getSettings().width;return o||j.warning("cannot get original video track's width, default scale down 4 times for low stream"),o?o/Gu(n.width):4}function tb(n){let{candidateType:r,relayProtocol:o,type:s,address:l,port:d,protocol:p}=n;return s==="local-candidate"?{candidateType:r,relayProtocol:o,protocol:p}:{candidateType:r,relayProtocol:o,address:l,port:d,protocol:p}}function $4(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function Bf(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?$4(Object(o),!0).forEach(function(s){L(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):$4(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}function a0(n){return window.TextEncoder?new TextEncoder().encode(n).length:n.length}function ro(n){return new Le(r=>{window.setTimeout(r,n)})}function VY(n){const r=new re(q.TIMEOUT,"timeout");return new Le((o,s)=>{window.setTimeout(()=>s(r),n)})}function Yn(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:7,r=arguments.length>1?arguments[1]:void 0;const o=Math.random().toString(16).substr(2,n).toLowerCase();return o.length===n?"".concat(r).concat(o):"".concat(r).concat(o)+Yn(n-o.length,"")}function AN(){return Yn(32,"").toUpperCase()}const nb=()=>{};function H4(n){return new Le((r,o)=>{let s=!1;const l=document.createElement("video");l.setAttribute("autoplay",""),l.setAttribute("muted",""),l.muted=!0,l.autoplay=!0,l.setAttribute("playsinline",""),l.setAttribute("style","position: fixed; top: 0; left: 0; width: 1px; height: 1px"),document.body.appendChild(l);const d=Ui()?"canplay":"playing";l.addEventListener(d,()=>{const p=l.videoWidth,_=l.videoHeight;!p&&nr()||(s=!0,l.srcObject=null,l.remove(),r([p,_]))}),l.srcObject=new MediaStream([n]),l.play().catch(nb),setTimeout(()=>{s||(l.srcObject=null,l.remove(),r([l.videoWidth,l.videoHeight]))},4e3)})}function s0(n){return Le.all(n.map(r=>r.then(o=>{throw o},o=>o))).then(r=>{throw r},r=>r)}function io(n,r){for(var o=arguments.length,s=new Array(o>2?o-2:0),l=2;l<o;l++)s[l-2]=arguments[l];return n.getListeners(r).length===0?Le.reject(new re(q.UNEXPECTED_ERROR,"can not emit promise")):new Le((d,p)=>{n.emit(r,...s,d,p)})}function vr(n,r){if(n.getListeners(r).length===0)return Le.resolve();for(var o=arguments.length,s=new Array(o>2?o-2:0),l=2;l<o;l++)s[l-2]=arguments[l];return io(n,r,...s)}function Ec(n,r){if(n.getListeners(r).length===0)return null;for(var o=arguments.length,s=new Array(o>2?o-2:0),l=2;l<o;l++)s[l-2]=arguments[l];return $f(n,r,...s)}function $f(n,r){let o=null,s=null;for(var l=arguments.length,d=new Array(l>2?l-2:0),p=2;p<l;p++)d[p-2]=arguments[p];if(n.emit(r,...d,_=>{o=_},_=>{s=_}),s!==null)throw s;if(o===null)throw new re(q.UNEXPECTED_ERROR,"handler is not sync");return o}function NN(n,r){const o=n.indexOf(r);o!==-1&&n.splice(o,1)}function W4(n){const r=[];return n.forEach(o=>{r.indexOf(o)===-1&&r.push(o)}),r}function sl(n){Le.resolve().then(n)}function Br(n){return JSON.parse(JSON.stringify(n))}const G4={};function HE(n,r){G4[r]||(G4[r]=!0,n())}function xN(n){const r=window.atob(n),o=new Uint8Array(new ArrayBuffer(r.length));for(let s=0;s<r.length;s+=1)o[s]=r.charCodeAt(s);return o}function rb(n){let r="";for(let o=0;o<n.length;o+=1)r+=String.fromCharCode(n[o]);return window.btoa(r)}const z4=new class{constructor(){L(this,"fnMap",new Map)}throttleByKey(n,r,o,s){for(var l=arguments.length,d=new Array(l>4?l-4:0),p=4;p<l;p++)d[p-4]=arguments[p];if(this.fnMap.has(r)){const _=this.fnMap.get(r);if(_.threshold!==o){_.fn(..._.args),clearTimeout(_.timer);const S=window.setTimeout(()=>{const I=this.fnMap.get(r);I&&I.fn(...I.args),this.fnMap.delete(r)},o);this.fnMap.set(r,{fn:n,threshold:o,timer:S,args:d,skipFn:s})}else _.skipFn&&_.skipFn(..._.args),this.fnMap.set(r,Bf(Bf({},_),{},{fn:n,args:d,skipFn:s}))}else{const _=window.setTimeout(()=>{const S=this.fnMap.get(r);S&&S.fn(...S.args),this.fnMap.delete(r)},o);this.fnMap.set(r,{fn:n,threshold:o,timer:_,args:d,skipFn:s})}}},K4=z4.throttleByKey.bind(z4),WE=async n=>{let{fragementLength:r,referenceList:o,asyncMapHandler:s,allFailedhandler:l,promisesCollector:d}=n,p=0;const _=r;let S,I=0;const b=async()=>{const A=(()=>{const F=p*_,W=F+_;return o.slice(F,W).map(s)})();d&&d.push(...A);try{S=await s0(A)}catch(F){if(I+=_,p++,!(I>=o.length))return void await b();l(F)}A.forEach(F=>F.cancel())};return await b(),S};function q4(n){return typeof n=="object"&&n!==null&&!(n instanceof RegExp)}const jY={[Jm.ACCESS_POINT]:{[Zi.NO_FLAG_SET]:{desc:"flag is zero",retry:!1},[Zi.FLAG_SET_BUT_EMPTY]:{desc:"flag is empty",retry:!1},[Zi.INVALID_FALG_SET]:{desc:"invalid flag",retry:!1},[Zi.FLAG_SET_BUT_NO_RE]:{desc:"flag set unilbs but no request",retry:!1},[Zi.INVALID_SERVICE_ID]:{desc:"invalid service id",retry:!1},[Zi.NO_SERVICE_AVAILABLE]:{desc:"no service available",retry:!0},[Zi.NO_SERVICE_AVAILABLE_P2P]:{desc:"no unilbs p2p service available",retry:!0},[Zi.NO_SERVICE_AVAILABLE_VOET]:{desc:"no unilbs voice service available",retry:!0},[Zi.NO_SERVICE_AVAILABLE_WEBRTC]:{desc:"no unilbs webrtc service available",retry:!0},[Zi.NO_SERVICE_AVAILABLE_CDS]:{desc:"no cds service available",retry:!0},[Zi.NO_SERVICE_AVAILABLE_CDN]:{desc:"no cdn dispatcher service available",retry:!0},[Zi.NO_SERVICE_AVAILABLE_TDS]:{desc:"no tds service available",retry:!0},[Zi.NO_SERVICE_AVAILABLE_REPORT]:{desc:"no unilbs report service available",retry:!0},[Zi.NO_SERVICE_AVAILABLE_APP_CENTER]:{desc:"no app center service available",retry:!0},[Zi.NO_SERVICE_AVAILABLE_ENV0]:{desc:"no unilbs sig env0 service available",retry:!0},[Zi.NO_SERVICE_AVAILABLE_VOET]:{desc:"no unilbs voet service available",retry:!0},[Zi.NO_SERVICE_AVAILABLE_STRING_UID]:{desc:"no string uid service available",retry:!0},[Zi.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS]:{desc:"no webrtc unilbs service available",retry:!0}},[Jm.UNILBS]:{[is.INVALID_VENDOR_KEY]:{desc:"invalid vendor key, can not find appid",retry:!1},[is.INVALID_CHANNEL_NAME]:{desc:"invalid channel name",retry:!1},[is.INTERNAL_ERROR]:{desc:"unilbs internal error",retry:!1},[is.NO_AUTHORIZED]:{desc:"invalid token, authorized failed",retry:!1},[is.DYNAMIC_KEY_TIMEOUT]:{desc:"dynamic key or token timeout",retry:!1},[is.NO_ACTIVE_STATUS]:{desc:"no active status",retry:!1},[is.DYNAMIC_KEY_EXPIRED]:{desc:"dynamic key expired",retry:!1},[is.STATIC_USE_DYNAMIC_KEY]:{desc:"static use dynamic key",retry:!1},[is.DYNAMIC_USE_STATIC_KEY]:{desc:"dynamic use static key",retry:!1},[is.USER_OVERLOAD]:{desc:"amount of users over load",retry:!1},[is.FORBIDDEN_REGION]:{desc:"the request is forbidden in this area",retry:!1},[is.CANNOT_MEET_AREA_DEMAND]:{desc:"unable to allocate services in this area",retry:!1}},[Jm.STRING_UID_ALLOCATOR]:{[FE.IIIEGAL_APPID]:{desc:"invalid appid",retry:!1},[FE.IIIEGAL_UID]:{desc:"invalid string uid",retry:!1},[FE.INTERNAL_ERROR]:{desc:"string uid allocator internal error",retry:!0}}};function ib(n){const r=jY[Math.floor(n/1e4)];if(!r)return{desc:"unkonw error",retry:!1};const o=r[n%1e4];if(!o){if(Math.floor(n/1e4)===Jm.ACCESS_POINT){const s=n%1e4;if(s.toString()[0]==="1")return{desc:n.toString(),retry:!1};if(s.toString()[0]==="2")return{desc:n.toString(),retry:!0}}return{desc:"unkonw error",retry:!1}}return o}const BY={[ut.K_TIMESTAMP_EXPIRED]:{desc:"K_TIMESTAMP_EXPIRED",action:"failed"},[ut.K_CHANNEL_PERMISSION_INVALID]:{desc:"K_CHANNEL_PERMISSION_INVALID",action:"failed"},[ut.K_CERTIFICATE_INVALID]:{desc:"K_CERTIFICATE_INVALID",action:"failed"},[ut.K_CHANNEL_NAME_EMPTY]:{desc:"K_CHANNEL_NAME_EMPTY",action:"failed"},[ut.K_CHANNEL_NOT_FOUND]:{desc:"K_CHANNEL_NOT_FOUND",action:"failed"},[ut.K_TICKET_INVALID]:{desc:"K_TICKET_INVALID",action:"failed"},[ut.K_CHANNEL_CONFLICTED]:{desc:"K_CHANNEL_CONFLICTED",action:"failed"},[ut.K_SERVICE_NOT_READY]:{desc:"K_SERVICE_NOT_READY",action:"tryNext"},[ut.K_SERVICE_TOO_HEAVY]:{desc:"K_SERVICE_TOO_HEAVY",action:"tryNext"},[ut.K_UID_BANNED]:{desc:"K_UID_BANNED",action:"failed"},[ut.K_IP_BANNED]:{desc:"K_IP_BANNED",action:"failed"},[ut.ERR_INVALID_VENDOR_KEY]:{desc:"ERR_INVALID_VENDOR_KEY",action:"failed"},[ut.ERR_INVALID_CHANNEL_NAME]:{desc:"ERR_INVALID_CHANNEL_NAME",action:"failed"},[ut.WARN_NO_AVAILABLE_CHANNEL]:{desc:"WARN_NO_AVAILABLE_CHANNEL",action:"failed"},[ut.WARN_LOOKUP_CHANNEL_TIMEOUT]:{desc:"WARN_LOOKUP_CHANNEL_TIMEOUT",action:"tryNext"},[ut.WARN_LOOKUP_CHANNEL_REJECTED]:{desc:"WARN_LOOKUP_CHANNEL_REJECTED",action:"failed"},[ut.WARN_OPEN_CHANNEL_TIMEOUT]:{desc:"WARN_OPEN_CHANNEL_TIMEOUT",action:"tryNext"},[ut.WARN_OPEN_CHANNEL_REJECTED]:{desc:"WARN_OPEN_CHANNEL_REJECTED",action:"failed"},[ut.WARN_REQUEST_DEFERRED]:{desc:"WARN_REQUEST_DEFERRED",action:"failed"},[ut.ERR_DYNAMIC_KEY_TIMEOUT]:{desc:"ERR_DYNAMIC_KEY_TIMEOUT",action:"failed"},[ut.ERR_NO_AUTHORIZED]:{desc:"ERR_NO_AUTHORIZED",action:"failed"},[ut.ERR_VOM_SERVICE_UNAVAILABLE]:{desc:"ERR_VOM_SERVICE_UNAVAILABLE",action:"tryNext"},[ut.ERR_NO_CHANNEL_AVAILABLE_CODE]:{desc:"ERR_NO_CHANNEL_AVAILABLE_CODE",action:"failed"},[ut.ERR_MASTER_VOCS_UNAVAILABLE]:{desc:"ERR_MASTER_VOCS_UNAVAILABLE",action:"tryNext"},[ut.ERR_INTERNAL_ERROR]:{desc:"ERR_INTERNAL_ERROR",action:"tryNext"},[ut.ERR_NO_ACTIVE_STATUS]:{desc:"ERR_NO_ACTIVE_STATUS",action:"failed"},[ut.ERR_INVALID_UID]:{desc:"ERR_INVALID_UID",action:"failed"},[ut.ERR_DYNAMIC_KEY_EXPIRED]:{desc:"ERR_DYNAMIC_KEY_EXPIRED",action:"failed"},[ut.ERR_STATIC_USE_DYANMIC_KE]:{desc:"ERR_STATIC_USE_DYANMIC_KE",action:"failed"},[ut.ERR_DYNAMIC_USE_STATIC_KE]:{desc:"ERR_DYNAMIC_USE_STATIC_KE",action:"failed"},[ut.ERR_NO_VOCS_AVAILABLE]:{desc:"ERR_NO_VOCS_AVAILABLE",action:"tryNext"},[ut.ERR_NO_VOS_AVAILABLE]:{desc:"ERR_NO_VOS_AVAILABLE",action:"tryNext"},[ut.ERR_JOIN_CHANNEL_TIMEOUT]:{desc:"ERR_JOIN_CHANNEL_TIMEOUT",action:"tryNext"},[ut.ERR_JOIN_BY_MULTI_IP]:{desc:"ERR_JOIN_BY_MULTI_IP",action:"recover"},[ut.ERR_NOT_JOINED]:{desc:"ERR_NOT_JOINED",action:"failed"},[ut.ERR_REPEAT_JOIN_REQUEST]:{desc:"ERR_REPEAT_JOIN_REQUEST",action:"quit"},[ut.ERR_REPEAT_JOIN_CHANNEL]:{desc:"ERR_REPEAT_JOIN_CHANNEL",action:"quit"},[ut.ERR_INVALID_VENDOR_KEY]:{desc:"ERR_INVALID_VENDOR_KEY",action:"failed"},[ut.ERR_INVALID_CHANNEL_NAME]:{desc:"ERR_INVALID_CHANNEL_NAME",action:"failed"},[ut.ERR_INVALID_STRINGUID]:{desc:"ERR_INVALID_STRINGUID",action:"failed"},[ut.ERR_TOO_MANY_USERS]:{desc:"ERR_TOO_MANY_USERS",action:"tryNext"},[ut.ERR_SET_CLIENT_ROLE_TIMEOUT]:{desc:"ERR_SET_CLIENT_ROLE_TIMEOUT",action:"failed"},[ut.ERR_SET_CLIENT_ROLE_NO_PERMISSION]:{desc:"ERR_SET_CLIENT_ROLE_TIMEOUT",action:"failed"},[ut.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE]:{desc:"ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",action:"success"},[ut.ERR_PUBLISH_REQUEST_INVALID]:{desc:"ERR_PUBLISH_REQUEST_INVALID",action:"failed"},[ut.ERR_SUBSCRIBE_REQUEST_INVALID]:{desc:"ERR_SUBSCRIBE_REQUEST_INVALID",action:"failed"},[ut.ERR_NOT_SUPPORTED_MESSAGE]:{desc:"ERR_NOT_SUPPORTED_MESSAGE",action:"failed"},[ut.ERR_ILLEAGAL_PLUGIN]:{desc:"ERR_ILLEAGAL_PLUGIN",action:"failed"},[ut.ILLEGAL_CLIENT_ROLE_LEVEL]:{desc:"ILLEGAL_CLIENT_ROLE_LEVEL",action:"failed"},[ut.ERR_REJOIN_TOKEN_INVALID]:{desc:"ERR_REJOIN_TOKEN_INVALID",action:"failed"},[ut.ERR_REJOIN_USER_NOT_JOINED]:{desc:"ERR_REJOIN_NOT_JOINED",action:"failed"},[ut.ERR_INVALID_OPTIONAL_INFO]:{desc:"ERR_INVALID_OPTIONAL_INFO",action:"quit"},[ut.ERR_TEST_RECOVER]:{desc:"ERR_TEST_RECOVER",action:"recover"},[ut.ERR_TEST_TRYNEXT]:{desc:"ERR_TEST_TRYNEXT",action:"recover"},[ut.ERR_TEST_RETRY]:{desc:"ERR_TEST_RETRY",action:"recover"},[ut.ILLEGAL_AES_PASSWORD]:{desc:"ERR_TEST_RETRY",action:"failed"},[ut.ERR_TOO_MANY_BROADCASTERS]:{desc:"ERR_TOO_MANY_BROADCASTERS",action:"failed"},[ut.ERR_TOO_MANY_SUBSCRIBERS]:{desc:"ERR_TOO_MANY_SUBSCRIBERS",action:"failed"},[ut.ERR_LICENSE_ILLEGAL]:{desc:"ERR_LICENSE_ILLEGAL",action:"quit"},[ut.ERR_LICENSE_MISSING]:{desc:"ERR_LICENSE_MISSING",action:"quit"},[ut.ERR_LICENSE_EXPIRED]:{desc:"ERR_LICENSE_EXPIRED",action:"quit"},[ut.ERR_LICENSE_MINUTES_EXCEEDED]:{desc:"ERR_LICENSE_MINUTES_EXCEEDED",action:"quit"},[ut.ERR_LICENSE_PERIOD_INVALID]:{desc:"ERR_LICENSE_PERIOD_INVALID",action:"quit"},[ut.ERR_LICENSE_MULTIPLE_SDK_SERVICE]:{desc:"ERR_LICENSE_MULTIPLE_SDK_SERVICE",action:"quit"}};function GE(n){return BY[n]||{desc:"UNKNOW_ERROR_".concat(n),action:"failed"}}function Y4(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}class Hf extends ur{get url(){return this.websocket?this.websocket.url:null}get reconnectMode(){return this._reconnectMode}set reconnectMode(r){["tryNext","recover"].includes(r)&&this.resetReconnectCount(r),this._reconnectMode=r}get state(){return this._state}set state(r){r!==this._state&&(this._state=r,this._state==="reconnecting"?this.emit(bt.RECONNECTING,this.reconnectReason):this._state==="connected"?this.emit(bt.CONNECTED):this._state==="closed"?this.emit(bt.CLOSED):this._state==="failed"&&this.emit(bt.FAILED))}resetReconnectCount(r){j.debug("websocket reset reconnect count, reason: "+r),this.reconnectCount=0}constructor(r,o){let s=arguments.length>2&&arguments[2]!==void 0&&arguments[2],l=arguments.length>3&&arguments[3]!==void 0&&arguments[3],d=arguments.length>4?arguments[4]:void 0;super(),L(this,"connectionID",0),L(this,"currentURLIndex",0),L(this,"urls",void 0),L(this,"_reconnectMode","tryNext"),L(this,"reconnectReason",void 0),L(this,"_initMutex",new xo("websocket")),L(this,"name",void 0),L(this,"_state","closed"),L(this,"reconnectInterrupter",void 0),L(this,"websocket",void 0),L(this,"retryConfig",void 0),L(this,"reconnectCount",0),L(this,"forceCloseTimeout",5e3),L(this,"onlineReconnectListener",void 0),L(this,"useCompress",void 0),L(this,"tryDoubleDomain",!1),L(this,"wsInflateLength",0),L(this,"wsDeflateLength",0),L(this,"closeEstablishingWs",()=>{}),L(this,"store",void 0),L(this,"joinChannelServiceRecordIndex",void 0),this.store=d,this.name=r,this.retryConfig=function(b){for(var A=1;A<arguments.length;A++){var F=arguments[A]!=null?arguments[A]:{};A%2?Y4(Object(F),!0).forEach(function(W){L(b,W,F[W])}):Object.getOwnPropertyDescriptors?Object.defineProperties(b,Object.getOwnPropertyDescriptors(F)):Y4(Object(F)).forEach(function(W){Object.defineProperty(b,W,Object.getOwnPropertyDescriptor(F,W))})}return b}({},o),this.useCompress=s,this.tryDoubleDomain=l;const{timeout:p,timeoutFactor:_}=o,S=Math.max(300,Math.floor(3*p/5)),I=Math.max(1.2,Math.floor(8*_)/10);vo.ONLINE&&(this.retryConfig.timeout=S,this.retryConfig.timeoutFactor=I),jr.on(nh.NETWORK_STATE_CHANGE,(b,A)=>{b!==A&&(this.resetReconnectCount("network state change: ".concat(A," -> ").concat(b)),b===vo.ONLINE?(this.retryConfig.timeout=S,this.retryConfig.timeoutFactor=I):(this.retryConfig.timeout=p,this.retryConfig.timeoutFactor=_))})}getConnection(){return this.websocket||void 0}init(r){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5e3;this.forceCloseTimeout=o;const s=(l,d)=>{this.urls=r;const p=this.urls[this.currentURLIndex];this.state="connecting",this.createWebSocketConnection(p).then(l).catch(d),this.once(bt.CLOSED,()=>d(new re(q.WS_DISCONNECT))),this.once(bt.CONNECTED,()=>l())};return this._initMutex.lock().then(l=>new Le((d,p)=>{s(d,p)}).then(()=>{l()}).catch(()=>{l()}))}close(r,o){if(this.currentURLIndex=0,this.resetReconnectCount("close"),this.reconnectInterrupter&&this.reconnectInterrupter(),this.websocket){this.websocket.onclose=null,this.websocket.onopen=null,this.websocket.onmessage=null;const s=this.websocket;o?setTimeout(()=>s.close(),500):s.close(),this.websocket=void 0}this.state=r?"failed":"closed",this.closeEstablishingWs&&this.closeEstablishingWs()}reconnect(r,o){if(!this.websocket)return void j.warning("[".concat(this.name,"] can not reconnect, no websocket"));var s;r!==void 0&&(this.reconnectMode=r),j.debug("[".concat(this.name,"] reconnect is triggered initiative")),typeof this.joinChannelServiceRecordIndex=="number"&&((s=this.store)===null||s===void 0||s.recordJoinChannelService({status:"error",errors:[new Error(o)]},this.joinChannelServiceRecordIndex));const l=this.websocket.onclose;this.websocket.onclose=null,this.websocket.close(),l&&l.bind(this.websocket)({code:9999,reason:o})}sendMessage(r){let o=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(!this.websocket||this.websocket.readyState!==WebSocket.OPEN)throw new re(q.WS_ABORT,"websocket is not ready");try{o||(r=JSON.stringify(r)),this.websocket.send(r)}catch(s){throw new re(q.WS_ERR,"send websocket message error"+s.toString())}}setWsInflateData(r){this.wsDeflateLength=this.wsDeflateLength+r.originLength,this.wsInflateLength=this.wsInflateLength+r.compressedLength}getWsInflateData(){const r=this.wsInflateLength,o=this.wsDeflateLength;return this.clearWsInflateData(),{wsInflateLength:r,wsDeflateLength:o}}clearWsInflateData(){this.wsInflateLength=0,this.wsDeflateLength=0}async createWebSocketConnection(r,o){return this.connectionID+=1,this.connectionID,this.joinChannelServiceRecordIndex=void 0,new Le((s,l)=>{var d;const p=b=>{var A;(A=this.store)===null||A===void 0||A.signalChannelOpen(),j.debug("[".concat(this.name,"] websocket opened:"),b),this.reconnectMode="retry",this.state="connected",this.resetReconnectCount("opened"),s()},_=async b=>{if(j.debug("[".concat(this.name,"] websocket close ").concat(this.websocket&&this.websocket.url,", code: ").concat(b.code,", reason: ").concat(b.reason,", current mode: ").concat(this.reconnectMode)),this.reconnectCount<this.retryConfig.maxRetryCount){this.state==="connected"&&(this.reconnectReason=b.reason,this.state="reconnecting");const A=Ec(this,bt.WILL_RECONNECT,this.reconnectMode)||this.reconnectMode,F=await this.reconnectWithAction(A);if(this.state==="closed")return void j.debug("[".concat(this.connectionID,"] ws is closed, no need to reconnect"));if(!F)return l(new re(q.WS_DISCONNECT,"websocket reconnect failed: ".concat(b.code))),void this.close(!0);s()}else l(new re(q.WS_DISCONNECT,"websocket close: ".concat(b.code))),this.close()},S=b=>{this.emit(bt.ON_MESSAGE,b)};this.websocket&&(this.websocket.onclose=null,this.websocket.close()),de("GATEWAY_WSS_ADDRESS")&&this.name.startsWith("gateway")&&(r=de("GATEWAY_WSS_ADDRESS")),j.debug("[".concat(this.name,"] start connect, url: ").concat(r));const I=(d=this.store)===null||d===void 0?void 0:d.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"gateway"});this.chooseBestWebsocketConnection(r,!!o,I).then(b=>{var A;this.websocket=b,p&&p(b.url),b.onclose=_,b.onmessage=S,(A=this.store)===null||A===void 0||A.recordJoinChannelService({endTs:Date.now(),status:"success"},I),this.joinChannelServiceRecordIndex=I}).catch(b=>{var A;if((A=this.store)===null||A===void 0||A.recordJoinChannelService({endTs:Date.now(),status:b instanceof re&&b.code===q.WS_ABORT?"aborted":"error",errors:[b]},I),this.state!=="closed"){if(b instanceof re&&b.code===q.WS_ERR){const F=new re(q.WS_ERR,"init websocket failed! Error: ".concat(b.toString()));return j.error("[".concat(this.name,"]").concat(F)),void l(F)}_&&_(b)}else l(new re(q.WS_DISCONNECT,"websocket is closed: ".concat(b.toString())))})})}async reconnectWithAction(r){let o=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(this.reconnectCount>=this.retryConfig.maxRetryCount||!this.urls||this.state==="closed")return!1;this.onlineReconnectListener||jr.networkState!==vo.OFFLINE||(this.onlineReconnectListener=jr.onlineWaiter&&jr.onlineWaiter.then(()=>{this.onlineReconnectListener=void 0}));let s=!0;if(this.reconnectInterrupter=()=>{s=!1},o){const p=HA(this.reconnectCount,this.retryConfig);j.debug("[".concat(this.name,"] wait ").concat(p,"ms to reconnect websocket, mode: ").concat(r)),await Le.race([ro(p),this.onlineReconnectListener||new Le(()=>{})])}if(this.state==="closed"||!s)return!1;this.reconnectCount+=1;const l=async(p,_)=>{this.emit(bt.RECONNECT_CREATE_CONNECTION,_),await this.createWebSocketConnection(p)};try{if(r==="retry"){const p=this.urls[this.currentURLIndex];this.emit(bt.RECONNECT_WAITTING_FINISH,r),await l(p,r)}else if(r==="tryNext"){if(this.currentURLIndex+=1,this.currentURLIndex>=this.urls.length)return await this.reconnectWithAction("recover",!1);j.debug("[".concat(this.name,"] websocket url length: ").concat(this.urls.length," current index: ").concat(this.currentURLIndex));const p=this.urls[this.currentURLIndex];this.emit(bt.RECONNECT_WAITTING_FINISH,r),await l(p,r)}else if(r==="recover"){j.debug("[".concat(this.name,"] request new urls")),this.resetReconnectCount("recover mode"),this.emit(bt.RECONNECT_WAITTING_FINISH,r),this.urls=await io(this,bt.REQUEST_NEW_URLS),this.currentURLIndex=0;const p=this.urls[this.currentURLIndex];await l(p,r)}return!0}catch(p){var d;return j.error("[".concat(this.name,"] reconnect failed"),p.toString()),p!=null&&(d=p.data)!==null&&d!==void 0&&d.desc&&Array.isArray(p.data.desc)&&p.data.desc.length&&p.data.desc.includes("dynamic key expired")?(this.emit(bt.ON_TOKEN_PRIVILEGE_DID_EXPIRE),!1):await this.reconnectWithAction(r,o)}}async chooseBestWebsocketConnection(r,o,s){return new Le((l,d)=>{let p=!1;const _=[];this.closeEstablishingWs=()=>{j.debug("[choose-best-ws] close establishing websockets"),_.forEach(ee=>{ee.onclose=null,ee.onopen=null,ee.onmessage=null,ee.close()}),d(new re(q.WS_ABORT,"choose best websocket aborted"))};const S=de("GATEWAY_DOMAINS");let I;const b=r.indexOf("?h="),A=S.find(ee=>b!==-1?r.includes(ee,b):r.includes(ee));j.debug("[choose-best-ws] currentDomain: ",A,", domains: ",S);let F=!this.tryDoubleDomain||o||!A;if(!F&&A){var W;const ee=Date.now();try{S.forEach(te=>{const Ee=b===-1?r.replace(A,te):r.substr(0,b)+r.substr(b).replace(A,te),ye=new WebSocket(Ee);ye.binaryType="arraybuffer",_.push(ye),j.debug("[choose-best-ws] ws is connecting:",ye.url)})}catch{for(j.debug("[choose-best-ws] ws create failed, fallback to single url"),_.forEach(Ee=>Ee.close());_.length;)_.pop();F=!0}(W=this.store)===null||W===void 0||W.recordJoinChannelService({urls:_.map(te=>te.url),service:"gateway"},s),_.forEach(te=>{te.onopen=()=>{if(p)return;const Ee=Date.now()-ee;j.debug("[choose-best-ws] ws open cost ".concat(Ee,"ms")),_.filter(ye=>ye!==te).forEach(ye=>{j.debug("[choose-best-ws]close backup websocket: ".concat(ye.url)),ye.close()}),p=!0,l(te)},te.onclose=Ee=>{I=Ee,!p&&(_.find(ye=>!(ye.readyState===WebSocket.CLOSED||ye.readyState===WebSocket.CLOSING))||(j.debug("[choose-best-ws] all websocket is closed"),p=!0,d(I)))},te.onmessage=Ee=>{j.debug("[choose-best-ws]".concat(te.url," onmessage: ").concat(Ee.data))}}),ro(this.forceCloseTimeout).then(()=>{_.forEach(te=>{te.readyState!==WebSocket.OPEN&&te.close()})})}if(F){var Z;let ee;j.debug("[choose-best-ws] use single url: ",r),(Z=this.store)===null||Z===void 0||Z.recordJoinChannelService({urls:[r],service:"gateway"},s);try{ee=new WebSocket(r),_.push(ee),ee.binaryType="arraybuffer"}catch(te){const Ee=new re(q.WS_ERR,"init websocket failed! Error: ".concat(te.toString()));return j.error("[".concat(this.name,"]").concat(Ee)),void d(Ee)}ee.onopen=()=>{l(ee)},ee.onclose=te=>{d(te)},ee.onmessage=te=>{j.debug("[choose-best-ws]".concat(ee.url," onmessage: ").concat(te.data))},ro(this.forceCloseTimeout).then(()=>{ee&&ee.readyState!==WebSocket.OPEN&&ee.close()})}}).then(l=>(this.closeEstablishingWs=void 0,l)).catch(l=>{throw this.closeEstablishingWs=void 0,l})}}class X4{constructor(r){L(this,"input",[]),L(this,"size",void 0),this.size=r}add(r){this.input.push(r),this.input.length>this.size&&this.input.splice(0,1)}mean(){var r;return this.input.length===0?0:Gl(r=this.input).call(r,(o,s)=>o+s)/this.input.length}}class J4 extends ur{get connectionState(){return this._connectionState}set connectionState(r){r!==this._connectionState&&(this._connectionState=r,r===wn.CONNECTED?this.emit(rt.WS_CONNECTED):r===wn.RECONNECTING?this.emit(rt.WS_RECONNECTING,this._websocketReconnectReason):r===wn.CLOSED&&this.emit(rt.WS_CLOSED,this._disconnectedReason))}get currentURLIndex(){return this.websocket.currentURLIndex}get url(){return this.websocket?this.websocket.url:null}get rtt(){return this.rttRolling.mean()}constructor(r,o){super(),L(this,"_disconnectedReason",void 0),L(this,"_websocketReconnectReason",void 0),L(this,"_connectionState",wn.CLOSED),L(this,"reconnectToken",void 0),L(this,"websocket",void 0),L(this,"openConnectionTime",void 0),L(this,"clientId",void 0),L(this,"lastMsgTime",Date.now()),L(this,"uploadCache",[]),L(this,"uploadCacheInterval",void 0),L(this,"rttRolling",new X4(5)),L(this,"pingpongTimer",void 0),L(this,"wsInflateDataTimer",void 0),L(this,"pingpongTimeoutCount",0),L(this,"joinResponse",void 0),L(this,"multiIpOption",void 0),L(this,"initError",void 0),L(this,"spec",void 0),L(this,"store",void 0),L(this,"onWebsocketMessage",s=>{if(s.data instanceof ArrayBuffer)return void this.emit(rt.ON_BINARY_DATA,s.data);const l=JSON.parse(s.data);if(this.lastMsgTime=Date.now(),Object.prototype.hasOwnProperty.call(l,"_id")){const d="res-@".concat(l._id);this.emit(d,l._result,l._message)}else if(Object.prototype.hasOwnProperty.call(l,"_type")){if(this.emit(l._type,l._message),l._type===Bt.ON_NOTIFICATION&&this.handleNotification(l._message),l._type===Bt.ON_USER_BANNED)switch(l._message.error_code){case 14:this.close(yn.UID_BANNED);break;case 15:this.close(yn.IP_BANNED);break;case 16:this.close(yn.CHANNEL_BANNED)}if(l._type===Bt.ON_USER_LICENSE_BANNED)switch(l._message.error_code){case ut.ERR_LICENSE_MISSING:this.close(yn.LICENSE_MISSING);break;case ut.ERR_LICENSE_EXPIRED:this.close(yn.LICENSE_EXPIRED);break;case ut.ERR_LICENSE_MINUTES_EXCEEDED:this.close(yn.LICENSE_MINUTES_EXCEEDED);break;case ut.ERR_LICENSE_PERIOD_INVALID:this.close(yn.LICENSE_PERIOD_INVALID);break;case ut.ERR_LICENSE_MULTIPLE_SDK_SERVICE:this.close(yn.LICENSE_MULTIPLE_SDK_SERVICE);break;case ut.ERR_LICENSE_ILLEGAL:this.close(yn.LICENSE_ILLEGAL);break;default:this.close()}}}),this.clientId=r.clientId,this.spec=r,this.store=o,this.websocket=new Hf("gateway-".concat(this.clientId),this.spec.retryConfig,!0,!0,o),this.handleWebsocketEvents(),window.addEventListener("offline",()=>{this.connectionState===wn.CONNECTED&&this.reconnect("retry",Go.OFFLINE)})}async request(r,o,s,l){const d=Yn(6,""),p={_id:d,_type:r,_message:o},_=this.websocket.connectionID,S=()=>new Le((Z,ee)=>{if(this.connectionState===wn.CONNECTED)return Z();const te=()=>{this.off(rt.WS_CLOSED,Ee),Z()},Ee=()=>{this.off(rt.WS_CONNECTED,te),ee(new re(q.WS_ABORT))};this.once(rt.WS_CONNECTED,te),this.once(rt.WS_CLOSED,Ee),r!==mt.PUBLISH&&r!==mt.SUBSCRIBE&&r!==mt.UNSUBSCRIBE&&r!==mt.UNPUBLISH&&r!==mt.CONTROL&&r!==mt.RESTART_ICE||this.once(rt.DISCONNECT_P2P,()=>{ee(new re(q.DISCONNECT_P2P))}),r!==mt.PUBLISH&&r!==mt.RESTART_ICE||this.once(rt.ABORT_P2P_EXECUTION,()=>{ee(new re(q.DISCONNECT_P2P))})});if(this.connectionState!==wn.CONNECTING&&this.connectionState!==wn.RECONNECTING||r===mt.JOIN||r===mt.REJOIN||await S(),this.websocket.sendMessage(p,!0),l)return;const I=new Le((Z,ee)=>{let te=!1;const Ee=(Pe,Xe)=>{te=!0,Z({isSuccess:Pe==="success",message:Xe||{}}),this.off(rt.WS_CLOSED,ye),this.off(rt.WS_RECONNECTING,ye),this.emit(rt.REQUEST_SUCCESS,r,o)};this.once("res-@".concat(d),Ee);const ye=()=>{ee(new re(q.WS_ABORT,"type: ".concat(r))),this.off(rt.WS_CLOSED,ye),this.off(rt.WS_RECONNECTING,ye),this.off("res-@".concat(d),Ee)};this.once(rt.WS_CLOSED,ye),this.once(rt.WS_RECONNECTING,ye),ro(de("SIGNAL_REQUEST_TIMEOUT")).then(()=>{this.websocket.connectionID!==_||te||(j.warning("[".concat(this.clientId,"] ws request timeout, type: ").concat(r)),this.emit(rt.REQUEST_TIMEOUT,r,o))})});let b=null;try{b=await I}catch(Z){if(this.connectionState===wn.CLOSED||r===mt.LEAVE)throw new re(q.WS_ABORT);return!this.spec.forceWaitGatewayResponse||s?Z.throw():r===mt.JOIN||r===mt.REJOIN?null:(await S(),await this.request(r,o))}if(b.isSuccess)return b.message;const A=Number(b.message.error_code||b.message.code),F=GE(A),W=new re(q.UNEXPECTED_RESPONSE,"".concat(F.desc,": ").concat(b.message.error_str),{code:A,data:b.message});return F.action==="success"?b.message:(j.warning("[".concat(this.clientId,"] [").concat(this.websocket.connectionID,"] unexpected response from type ").concat(r,", error_code: ").concat(A,", message: ").concat(F.desc,", action: ").concat(F.action)),A===ut.ERR_TOO_MANY_BROADCASTERS?((r===mt.JOIN||r===mt.REJOIN)&&(this.initError=W,this.close()),W.throw()):F.action==="failed"?W.throw():F.action==="quit"?(this.initError=W,this.close(),W.throw()):(A===ut.ERR_JOIN_BY_MULTI_IP?(this.multiIpOption=b.message.option,j.warning("[".concat(this.clientId,"] detect multi ip, recover")),this.reconnect("recover",Go.MULTI_IP)):this.reconnect(F.action,Go.SERVER_ERROR),r===mt.JOIN||r===mt.REJOIN?null:await this.request(r,o)))}waitMessage(r,o){return new Le(s=>{const l=d=>{(!o||o(d))&&(this.off(r,l),s(d))};this.on(r,l)})}upload(r,o){const s={_type:r,_message:o};try{this.websocket.sendMessage(s)}catch{const d=de("MAX_UPLOAD_CACHE")||50;this.uploadCache.push(s),this.uploadCache.length>d&&this.uploadCache.splice(0,1),this.uploadCache.length>0&&!this.uploadCacheInterval&&(this.uploadCacheInterval=window.setInterval(()=>{if(this.connectionState!==wn.CONNECTED)return;const p=this.uploadCache.splice(0,1)[0];this.uploadCache.length===0&&(window.clearInterval(this.uploadCacheInterval),this.uploadCacheInterval=void 0),this.upload(p._type,p._message)},de("UPLOAD_CACHE_INTERVAL")||2e3))}}send(r,o){const s={_type:r,_message:o};this.websocket.sendMessage(s)}init(r,o){return this.initError=void 0,this.multiIpOption=void 0,this.joinResponse=void 0,this.reconnectToken=void 0,this.openConnectionTime=void 0,new Le((s,l)=>{this.once(rt.WS_CONNECTED,()=>s(this.joinResponse)),this.once(rt.WS_CLOSED,()=>l(this.initError||new re(q.WS_ABORT))),this.connectionState=wn.CONNECTING,this.websocket.init(r).catch(l),this.wsInflateDataTimer&&window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=window.setInterval(()=>{this.handleWsInflateData()},2e4),setTimeout(()=>{o&&this.openConnectionTime===void 0&&(j.debug("[".concat(this.clientId,"] init websocket timeout while join with fallback to proxy")),l(new re(q.INIT_WEBSOCKET_TIMEOUT)))},de("JOIN_WITH_FALLBACK_PROXY_PENDING_DURATION"))})}close(r){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.wsInflateDataTimer&&(this.handleWsInflateData(),window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=void 0),this.reconnectToken=void 0,this.joinResponse=void 0,this._disconnectedReason=r||yn.LEAVE,this.connectionState=wn.CLOSED,j.debug("[".concat(this.clientId,"] ")+"will close websocket in signal"),this.websocket.close(),r===yn.FALLBACK&&(this.websocket.removeAllListeners(),this.websocket=new Hf("gateway-".concat(this.clientId),this.spec.retryConfig,!0,!0,this.store),this.handleWebsocketEvents())}async join(){if(!this.joinResponse){this.emit(rt.ABORT_P2P_EXECUTION);const r=await io(this,rt.REQUEST_JOIN_INFO),o=await this.request(mt.JOIN,r);if(!o)return this.emit(rt.REPORT_JOIN_GATEWAY,q.TIMEOUT,this.url||""),!1;this.joinResponse=o,this.emit(rt.JOIN_RESPONSE,this.joinResponse),this.reconnectToken=this.joinResponse.rejoin_token}return this.connectionState=wn.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),!0}async rejoin(){if(!this.reconnectToken)throw new re(q.UNEXPECTED_ERROR,"can not rejoin, no rejoin token");const r=$f(this,rt.REQUEST_REJOIN_INFO);r.token=this.reconnectToken;const o=await this.request(mt.REJOIN,r);return!!o&&(this.connectionState=wn.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),o.peers&&o.peers.forEach(s=>{this.emit(Bt.ON_USER_ONLINE,{uid:s.uid}),s.audio&&this.emit(Bt.ON_ADD_AUDIO_STREAM,{uid:s.uid,uint_id:s.uint_id,audio:!0,ssrcId:s.audio_ssrc}),s.video&&this.emit(Bt.ON_ADD_VIDEO_STREAM,{uid:s.uid,uint_id:s.uint_id,video:!0,ssrcId:s.video_ssrc}),s.audio_mute?this.emit(Bt.MUTE_AUDIO,{uid:s.uid}):this.emit(Bt.UNMUTE_AUDIO,{uid:s.uid}),s.video_mute?this.emit(Bt.MUTE_VIDEO,{uid:s.uid}):this.emit(Bt.UNMUTE_VIDEO,{uid:s.uid}),s.audio_enable_local?this.emit(Bt.ENABLE_LOCAL_AUDIO,{uid:s.uid}):this.emit(Bt.DISABLE_LOCAL_AUDIO,{uid:s.uid}),s.video_enable_local?this.emit(Bt.ENABLE_LOCAL_VIDEO,{uid:s.uid}):this.emit(Bt.DISABLE_LOCAL_VIDEO,{uid:s.uid}),s.audio||s.video||this.emit(Bt.ON_REMOVE_STREAM,{uid:s.uid,uint_id:s.uint_id})}),!0)}reconnect(r,o){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.websocket.reconnect(r,o)}handleNotification(r){j.debug("[".concat(this.clientId,"] receive notification: "),r);const o=GE(r.code);if(o.action!=="success"){if(o.action!=="failed")return o.action==="quit"?(o.desc==="ERR_REPEAT_JOIN_CHANNEL"&&this.close(yn.UID_BANNED),void this.close()):void this.reconnect(o.action,Go.SERVER_ERROR);j.error("[".concat(this.clientId,"] ignore error: "),o.desc)}}handlePingPong(){if(!this.websocket||this.websocket.state!=="connected")return;this.pingpongTimeoutCount>0&&this.rttRolling.add(3e3),this.pingpongTimeoutCount+=1;const r=de("PING_PONG_TIME_OUT"),o=Date.now();this.pingpongTimeoutCount>=r&&(j.warning("[".concat(this.clientId,"] PINGPONG Timeout. Last Socket Message: ").concat(o-this.lastMsgTime,"ms")),o-this.lastMsgTime>de("WEBSOCKET_TIMEOUT_MIN"))?this.reconnect("retry",Go.TIMEOUT):this.request(mt.PING,void 0,!0).then(()=>{this.pingpongTimeoutCount=0;const s=Date.now()-o;this.rttRolling.add(s),de("REPORT_STATS")&&this.send(mt.PING_BACK,{pingpongElapse:s})}).catch(s=>{})}handleWsInflateData(){const{wsInflateLength:r,wsDeflateLength:o}=this.websocket.getWsInflateData();r!==0&&o!==0&&this.upload(Pa.WS_INFLATE_DATA_LENGTH,{ws_deflate_length:o,ws_inflate_length:r})}handleWebsocketEvents(){this.websocket.on(bt.RECONNECT_WAITTING_FINISH,r=>{this.emit(rt.WS_RECONNECT_WAITTING_FINISH,r)}),this.websocket.on(bt.RECONNECT_CREATE_CONNECTION,r=>{this.emit(rt.WS_RECONNECT_CREATE_CONNECTION,r)}),this.websocket.on(bt.ON_MESSAGE,this.onWebsocketMessage),this.websocket.on(bt.CLOSED,()=>{this.connectionState=wn.CLOSED}),this.websocket.on(bt.FAILED,()=>{this._disconnectedReason=yn.NETWORK_ERROR,this.connectionState=wn.CLOSED}),this.websocket.on(bt.RECONNECTING,r=>{this._websocketReconnectReason=r,this.joinResponse=void 0,this.connectionState===wn.CONNECTED?this.connectionState=wn.RECONNECTING:this.connectionState=wn.CONNECTING}),this.websocket.on(bt.WILL_RECONNECT,(r,o)=>{if($f(this,rt.IS_P2P_DISCONNECTED)&&r==="retry")return j.debug("".concat(this.clientId," reconnect mode is retry, but p2p lost, change to tryNext")),this.reconnectToken=void 0,this.emit(rt.NEED_RENEW_SESSION),this.emit(rt.DISCONNECT_P2P),o("tryNext");r!=="retry"&&(j.debug("".concat(this.clientId," websockt will_connect event, renewSession reconnectMode is ").concat(r)),this.reconnectToken=void 0,this.emit(rt.NEED_RENEW_SESSION),this.emit(rt.DISCONNECT_P2P)),o(r)}),this.websocket.on(bt.CONNECTED,()=>{this.openConnectionTime=Date.now(),this.reconnectToken?this.rejoin().catch(r=>{j.warning("[".concat(this.clientId,"] rejoin failed ").concat(r)),this.reconnect("tryNext",Go.SERVER_ERROR)}):this.join().catch(r=>{if(this.emit(rt.REPORT_JOIN_GATEWAY,r.message||r.code,this.url||""),r instanceof re&&r.code===q.UNEXPECTED_RESPONSE&&r.data.code===ut.ERR_NO_AUTHORIZED)return j.warning("[".concat(this.clientId,"] reconnect no authorized, recover")),void this.reconnect("recover",Go.SERVER_ERROR);j.error("[".concat(this.clientId,"] join gateway request failed"),r.toString()),this.spec.forceWaitGatewayResponse?this.reconnect("tryNext",Go.SERVER_ERROR):(this.initError=r,this.close())})}),this.websocket.on(bt.REQUEST_NEW_URLS,(r,o)=>{io(this,rt.REQUEST_RECOVER,this.multiIpOption).then(r).catch(o)}),this.websocket.on(bt.ON_TOKEN_PRIVILEGE_DID_EXPIRE,()=>{this.emit(Bt.ON_TOKEN_PRIVILEGE_DID_EXPIRE)})}}function Q4(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}class $Y extends ur{get url(){return this._url?this._url:null}get reconnectMode(){return this._reconnectMode}set reconnectMode(r){["tryNext","recover"].includes(r)&&this.resetReconnectCount(r),this._reconnectMode=r}get state(){return this._state}set state(r){r!==this._state&&(this._state=r,this._state==="reconnecting"?this.emit(mr.RECONNECTING,this.reconnectReason):this._state==="connected"?this.emit(mr.CONNECTED):this._state==="closed"?this.emit(mr.CLOSED):this._state==="failed"&&this.emit(mr.FAILED))}constructor(r,o,s,l){super(),L(this,"connectionID",0),L(this,"currentURLIndex",0),L(this,"reconnectReason",void 0),L(this,"_reconnectMode","tryNext"),L(this,"_initMutex",void 0),L(this,"_name",void 0),L(this,"_state","closed"),L(this,"_reconnectInterrupter",void 0),L(this,"_url",void 0),L(this,"_retryConfig",void 0),L(this,"_reconnectCount",0),L(this,"_forceCloseTimeout",5e3),L(this,"_onlineReconnectListener",void 0),L(this,"_closeEstablishingTransmitter",()=>{}),L(this,"_store",void 0),L(this,"_joinChannelServiceRecordIndex",void 0),L(this,"_transmitter",void 0),L(this,"_useCompress",void 0),L(this,"_inflateLength",0),L(this,"_deflateLength",0),this._store=l,this._name=r,this._retryConfig=function(d){for(var p=1;p<arguments.length;p++){var _=arguments[p]!=null?arguments[p]:{};p%2?Q4(Object(_),!0).forEach(function(S){L(d,S,_[S])}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(_)):Q4(Object(_)).forEach(function(S){Object.defineProperty(d,S,Object.getOwnPropertyDescriptor(_,S))})}return d}({},o),this._useCompress=s}resetReconnectCount(r){j.debug("".concat(this._name," reset reconnect count, reason: ").concat(r)),this._reconnectCount=0}close(r,o){if(this.currentURLIndex=0,this.resetReconnectCount("close"),this._reconnectInterrupter&&this._reconnectInterrupter(),this._transmitter){this._transmitter.onclose=null,this._transmitter.onopen=null,this._transmitter.onmessage=null;const s=this._transmitter;o?setTimeout(()=>s.close(),500):s.close(),this._transmitter=void 0}this.state=r?"failed":"closed",this._closeEstablishingTransmitter&&this._closeEstablishingTransmitter()}reconnect(r,o){if(!this._transmitter)return void j.warning("[".concat(this._name,"] can not reconnect, no websocket"));var s;r!==void 0&&(this.reconnectMode=r),j.debug("[".concat(this._name,"] reconnect is triggered initiative")),typeof this._joinChannelServiceRecordIndex=="number"&&((s=this._store)===null||s===void 0||s.recordJoinChannelService({status:"error",errors:[new Error(o)]},this._joinChannelServiceRecordIndex));const l=this._transmitter.onclose;this._transmitter.onclose=null,this._transmitter.close(),l&&l.bind(this._transmitter)({code:9999,reason:o})}getInflateData(){const r=this._inflateLength,o=this._deflateLength;return this.clearInflateData(),{inflateLength:r,deflateLength:o}}setInflateData(r){this._deflateLength=this._deflateLength+r.originLength,this._inflateLength=this._inflateLength+r.compressedLength}clearInflateData(){this._inflateLength=0,this._deflateLength=0}}function Z4(n,r,o){if("getBigUint64"in DataView.prototype)return n.getBigUint64(r,o);const s=n.getUint32(r,o),l=n.getUint32(r+4,o),d=+!!o,p=+!o;return BigInt(s*p+l*d)<<BigInt(32)|BigInt(s*d+l*p)}function eF(n,r,o,s){if("setBigUint64"in DataView.prototype)return n.setBigUint64(r,o,s);const l=Number(o>>BigInt(32)),d=Number(o&BigInt(4294967295));s?(n.setUint32(r+4,l,s),n.setUint32(r,d,s)):(n.setUint32(r,l,s),n.setUint32(r+4,d,s))}let Ls;(function(n){n[n.Default=0]="Default",n[n.Ack=1]="Ack"})(Ls||(Ls={}));class HY{constructor(r,o,s){L(this,"version",1),L(this,"initialRTO",void 0),L(this,"maxBatchAckCount",void 0),L(this,"maxRTO",void 0),L(this,"initialRTT",void 0),L(this,"ID",void 0),L(this,"rtt",void 0),L(this,"packetNumber",1),L(this,"rtoRatioMap",new Map),L(this,"timeoutMap",new Map),L(this,"unorderedPacketQueue",[]),L(this,"batchAckPacketQueue",[]),L(this,"lastOrderedPacketNumber",0),L(this,"batchAckTimer",void 0),L(this,"sendImpl",void 0),L(this,"receiveImpl",void 0),this.sendImpl=r,this.receiveImpl=o,this.ID=Yn(7,"transmitter-"),this.initialRTO=(s==null?void 0:s.initialRTO)!==void 0?s.initialRTO:de("TRANSMITTER_INITIAL_RTO"),this.initialRTT=(s==null?void 0:s.initialRTT)!==void 0?s.initialRTT:de("TRANSMITTER_INITIAL_RTT"),this.rtt=(s==null?void 0:s.initialRTT)!==void 0?s.initialRTT:de("TRANSMITTER_INITIAL_RTT"),this.maxBatchAckCount=(s==null?void 0:s.maxBatchAckCount)!==void 0?s.maxBatchAckCount:de("TRANSMITTER_MAX_BATCH_ACK_COUNT"),this.maxRTO=(s==null?void 0:s.maxRTO)!==void 0?s.maxRTO:de("TRANSMITTER_MAX_RTO")}packetize(r,o){return{type:Ls.Default,version:this.version,packetNumber:o,payload:r}}serialize(r){switch(r.type){case Ls.Default:{let o;typeof r.payload=="string"?o=new TextEncoder().encode(r.payload):o=r.payload;const s=new ArrayBuffer(o.length+15),l=new DataView(s);return l.setUint16(0,r.version),l.setUint8(2,r.type),l.setUint32(3,r.packetNumber),eF(l,7,BigInt(r.sendTs)),new Uint8Array(l.buffer).set(o,15),s}case Ls.Ack:{const o=new ArrayBuffer(16),s=new DataView(o);return s.setUint16(0,r.version),s.setUint8(2,r.type),s.setUint32(3,r.maxAckPacketNumber),s.setUint8(7,r.shift),eF(s,8,BigInt(r.ackSendTs)),o}}}deserialize(r){const o=new DataView(r),s=o.getUint16(0),l=o.getUint8(2);switch(l){case Ls.Default:{const d=o.getUint32(3),p=Z4(o,7),_=r.slice(15),S=new TextDecoder().decode(_);return{version:s,type:l,packetNumber:d,sendTs:Number(p),payload:S}}case Ls.Ack:{const d=o.getUint32(3),p=o.getUint8(7),_=Z4(o,8);return{version:s,type:l,maxAckPacketNumber:d,shift:p,ackSendTs:Number(_)}}default:throw j.error("[".concat(this.ID,"] Unrecognized packet type ").concat(l)),new Error("Unrecognized packet type ".concat(l))}}sendMessage(r){const o=this.packetize(r,this.packetNumber);this.packetNumber=this.packetNumber===4294967295?1:this.packetNumber+1;const s=this.calculateRTO(o),l=window.setTimeout(()=>{this.resendMessage(o)},s);this.timeoutMap.set(o.packetNumber,l),this.sendPacket(o)}onData(r){const o=this.deserialize(r);o.type===Ls.Default?this.ack(o):o.type===Ls.Ack&&(this.updateRTT(o,Math.round(performance.now())),this.clearRTO(o))}close(){this.rtt=this.initialRTT,this.packetNumber=1,Array.from(this.timeoutMap.entries()).forEach(r=>{let[o,s]=r;window.clearTimeout(s)}),this.timeoutMap=new Map,this.rtoRatioMap=new Map,this.unorderedPacketQueue=[],this.batchAckPacketQueue=[],this.lastOrderedPacketNumber=0,this.batchAckTimer!==void 0&&window.clearTimeout(this.batchAckTimer)}resendMessage(r){const o=this.calculateRTO(r),s=window.setTimeout(()=>{this.resendMessage(r)},o);this.timeoutMap.set(r.packetNumber,s),this.sendPacket(r)}calculateRTO(r){const o=this.rtoRatioMap.get(r.packetNumber);if(o===void 0)return this.rtoRatioMap.set(r.packetNumber,1),this.initialRTO;{const s=9*this.rtt/8*o;return this.rtoRatioMap.set(r.packetNumber,o+1),s>this.maxRTO?this.maxRTO:s}}updateRTT(r,o){const s=r.ackSendTs;this.rtt=this.rtt*(7/8)+(o-s-this.rtt)/8}ack(r){if(r.packetNumber===this.lastOrderedPacketNumber+1)for(this.batchAckPacketQueue.length>=this.maxBatchAckCount&&this.batchAck(),this.batchAckTimer?this.batchAckPacketQueue.push(r):(this.batchAckPacketQueue.push(r),this.batchAckTimer=window.setTimeout(()=>{this.batchAck()},this.rtt/8)),this.lastOrderedPacketNumber+=1,this.receiveImpl(r.payload);;){const o=this.unorderedPacketQueue[0];if(!o){this.unorderedPacketQueue.shift();break}this.batchAckTimer&&this.batchAck(),this.receiveImpl(o.payload),this.unorderedPacketQueue.shift(),this.lastOrderedPacketNumber+=1}else if(r.packetNumber<=this.lastOrderedPacketNumber){const o={ackSendTs:r.sendTs,maxAckPacketNumber:r.packetNumber,shift:0,type:Ls.Ack,version:this.version};this.sendPacket(o)}else if(r.packetNumber>this.lastOrderedPacketNumber){this.unorderedPacketQueue[r.packetNumber-this.lastOrderedPacketNumber-2]=r;const o={ackSendTs:r.sendTs,maxAckPacketNumber:r.packetNumber,shift:0,type:Ls.Ack,version:this.version};this.sendPacket(o)}}batchAck(){window.clearTimeout(this.batchAckTimer),this.batchAckTimer=void 0;const r={ackSendTs:this.batchAckPacketQueue[this.batchAckPacketQueue.length-1].sendTs,maxAckPacketNumber:this.batchAckPacketQueue[this.batchAckPacketQueue.length-1].packetNumber,shift:this.batchAckPacketQueue.length-1,type:Ls.Ack,version:this.version};this.sendPacket(r),this.batchAckPacketQueue=[]}sendPacket(r){r.type===Ls.Default&&(r.sendTs=Math.round(performance.now()));const o=this.serialize(r);this.sendImpl(o)}clearRTO(r){for(let o=r.maxAckPacketNumber-r.shift;o<=r.maxAckPacketNumber;o++){const s=this.timeoutMap.get(o);s!==void 0&&window.clearTimeout(s),this.timeoutMap.delete(o),this.rtoRatioMap.delete(o)}}}class tF extends $Y{constructor(r,o){super(r,o,arguments.length>2&&arguments[2]!==void 0&&arguments[2],arguments.length>3?arguments[3]:void 0),L(this,"_initMutex",void 0),L(this,"_reconnectInterrupter",void 0),L(this,"_url",void 0),L(this,"_transmitter",void 0),L(this,"_addresses",void 0),L(this,"_reliableTransmission",void 0),this._initMutex=new xo("datachannel");const{timeout:s,timeoutFactor:l}=o,d=Math.max(300,Math.floor(3*s/5)),p=Math.max(1.2,Math.floor(8*l)/10);vo.ONLINE&&(this._retryConfig.timeout=d,this._retryConfig.timeoutFactor=p),jr.on(nh.NETWORK_STATE_CHANGE,(_,S)=>{_!==S&&(this.resetReconnectCount("network state change: ".concat(S," -> ").concat(_)),_===vo.ONLINE?(this._retryConfig.timeout=d,this._retryConfig.timeoutFactor=p):(this._retryConfig.timeout=s,this._retryConfig.timeoutFactor=l))})}getConnection(){if(this._reliableTransmission)return this._reliableTransmission}async init(r){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5e3;this._forceCloseTimeout=o;const s=(l,d)=>{this._addresses=r,this.currentURLIndex=this._addresses.findIndex(_=>_.fingerprint||de("FINGERPRINT"));const p=this._addresses[this.currentURLIndex];this.state="connecting",this.createTransmitterConnection(p).then(l).catch(d),this.once(mr.CLOSED,()=>d(new re(q.WS_DISCONNECT))),this.once(mr.CONNECTED,()=>l())};return this._initMutex.lock().then(l=>new Le((d,p)=>{s(d,p)}).then(()=>{l()}).catch(()=>{l()}))}sendMessage(r){let o=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(!this._transmitter||!this._reliableTransmission)throw new re(q.WS_ABORT,"datachannel is not ready");try{o||(r=JSON.stringify(r)),this._reliableTransmission.sendMessage(r)}catch(s){throw new re(q.WS_ERR,"send datachannel signal message error"+s.toString())}}unbindDcCloseEventListener(){this._transmitter&&(this._transmitter.onclose=null)}sendMessageWithJSON(r){const o=JSON.stringify(r);return{compressed:o,compressedLength:o.length,origin:r}}sendMessageWithUint8Array(r){return{compressed:r,compressedLength:r.byteLength,origin:r}}createTransmitterConnection(r){return this.connectionID+=1,this._joinChannelServiceRecordIndex=void 0,this._url="dc://".concat(r.ip,":").concat(r.port),new Le((o,s)=>{var l;const d=()=>{j.debug("[".concat(this._name,"] datachannel opened:"),this._url),this.reconnectMode="retry",this.state="connected",this.resetReconnectCount("opened"),o()},p=async b=>{var A;if((A=this._closeEstablishingTransmitter)===null||A===void 0||A.call(this),j.debug("[".concat(this._name,"] datachannel close ").concat(this._url,", code: ").concat(b.code,", reason: ").concat(b.reason,", current mode: ").concat(this.reconnectMode)),this._reconnectCount<this._retryConfig.maxRetryCount){this.state==="connected"&&(this.reconnectReason=b.reason,this.state="reconnecting");const F=Ec(this,mr.WILL_RECONNECT,this.reconnectMode)||this.reconnectMode,W=await this.reconnectWithAction(F);if(this.state==="closed")return void j.debug("[".concat(this.connectionID,"] dc is closed, no need to reconnect"));if(!W)return s(new re(q.WS_DISCONNECT,"datachannel reconnect failed: ".concat(b.code))),void this.close(!0);o()}else s(new re(q.WS_DISCONNECT,"datachannel close: ".concat(b.code))),this.close()},_=b=>{var A;(A=this._reliableTransmission)===null||A===void 0||A.onData(b.data)};this._transmitter&&(this._transmitter.onclose=null,this._transmitter.close()),this._reliableTransmission&&(this._reliableTransmission.close(),this._reliableTransmission=void 0),j.debug("[".concat(this._name,"] start connect, address: ").concat(JSON.stringify(r)));const S=(l=this._store)===null||l===void 0?void 0:l.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"gateway"}),I=Date.now();io(this,mr.TO_CONNECT_DATACHANNEL,r).then(b=>{var A,F;if(!b)throw new Error("transmissonInfo not exist yet");const{transmitter:W,close:Z}=b;this._transmitter=W,(A=this._store)===null||A===void 0||A.signalChannelOpen();const ee=Date.now()-I;j.debug("[choose dc] dc open cost ".concat(ee,"ms")),this._reliableTransmission=new HY(te=>{var Ee;this._transmitter&&this._transmitter.readyState==="open"&&((Ee=this._transmitter)===null||Ee===void 0||Ee.send(te))},te=>{typeof te=="string"&&this.emit(mr.ON_MESSAGE,te)}),this._closeEstablishingTransmitter=()=>{var te;(te=this._reliableTransmission)===null||te===void 0||te.close(),this._reliableTransmission=void 0,Z()},d&&d(),W.onclose=p,W.onmessage=_,(F=this._store)===null||F===void 0||F.recordJoinChannelService({endTs:Date.now(),status:"success"},S),this._joinChannelServiceRecordIndex=S}).catch(b=>{var A;if((A=this._store)===null||A===void 0||A.recordJoinChannelService({endTs:Date.now(),status:b instanceof re&&b.code===q.WS_ABORT?"aborted":"error",errors:[b]},S),this.state!=="closed"){if(b instanceof re&&b.code===q.WS_ERR){const F=new re(q.WS_ERR,"init datachannel failed! Error: ".concat(b.toString()));return j.error("[".concat(this._name,"]").concat(F)),void s(F)}p&&p(b)}else s(new re(q.WS_DISCONNECT,"datachannel is closed: ".concat(b.toString())))})})}async reconnectWithAction(r){let o=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(this._reconnectCount>=this._retryConfig.maxRetryCount||!this._addresses||this.state==="closed")return!1;this._onlineReconnectListener||jr.networkState!==vo.OFFLINE||(this._onlineReconnectListener=jr.onlineWaiter&&jr.onlineWaiter.then(()=>{this._onlineReconnectListener=void 0}));let s=!0;if(this._reconnectInterrupter=()=>{s=!1},o){const p=HA(this._reconnectCount,this._retryConfig);j.debug("[".concat(this._name,"] wait ").concat(p,"ms to reconnect datachannel, mode: ").concat(r)),await Le.race([ro(p),this._onlineReconnectListener||new Le(()=>{})])}if(this.state==="closed"||!s)return!1;this._reconnectCount+=1;const l=async(p,_)=>{this.emit(mr.RECONNECT_CREATE_CONNECTION,_),await this.createTransmitterConnection(p)};try{if(r==="retry"){const p=this._addresses[this.currentURLIndex];this.emit(mr.RECONNECT_WAITTING_FINISH,r),await l(p,r)}else if(r==="tryNext"){this.currentURLIndex+=1;for(let _=this.currentURLIndex;_<this._addresses.length;_++){if(this._addresses[_].fingerprint||de("FINGERPRINT")){this.currentURLIndex=_;break}this.currentURLIndex+=1}if(this.currentURLIndex>=this._addresses.length)return j.debug("[".concat(this._name,"] the available addresses are exhausted, change to recover")),await this.reconnectWithAction("recover",!1);j.debug("[".concat(this._name,"] datachannel url length: ").concat(this._addresses.length," current index: ").concat(this.currentURLIndex));const p=this._addresses[this.currentURLIndex];this.emit(mr.RECONNECT_WAITTING_FINISH,r),await l(p,r)}else r==="recover"&&(j.debug("[".concat(this._name,"] start to failback to websocket")),this.resetReconnectCount("recover mode"),this.emit(mr.RECONNECT_WAITTING_FINISH,r),this.emit(mr.FAILBACK));return!0}catch(p){var d;return j.error("[".concat(this._name,"] reconnect failed"),p.toString()),p!=null&&(d=p.data)!==null&&d!==void 0&&d.desc&&Array.isArray(p.data.desc)&&p.data.desc.length&&p.data.desc.includes("dynamic key expired")?(this.emit(mr.ON_TOKEN_PRIVILEGE_DID_EXPIRE),!1):await this.reconnectWithAction(r,o)}}}class zu extends ur{get connectionState(){return this._connectionState}set connectionState(r){r!==this._connectionState&&(this._connectionState=r,r===wn.CONNECTED?this.emit(rt.WS_CONNECTED):r===wn.RECONNECTING?this.emit(rt.WS_RECONNECTING,this._websocketReconnectReason):r===wn.CLOSED&&this.emit(rt.WS_CLOSED,this._disconnectedReason))}get currentURLIndex(){return this.websocket.currentURLIndex}get url(){return this.websocket?this.websocket.url:null}get rtt(){return this.rttRolling.mean()}constructor(r,o){super(),L(this,"_disconnectedReason",void 0),L(this,"_websocketReconnectReason",void 0),L(this,"_connectionState",wn.CLOSED),L(this,"reconnectToken",void 0),L(this,"websocket",void 0),L(this,"openConnectionTime",void 0),L(this,"clientId",void 0),L(this,"lastMsgTime",Date.now()),L(this,"uploadCache",[]),L(this,"uploadCacheInterval",void 0),L(this,"rttRolling",new X4(5)),L(this,"pingpongTimer",void 0),L(this,"inflateDataTimer",void 0),L(this,"pingpongTimeoutCount",0),L(this,"joinResponse",void 0),L(this,"multiIpOption",void 0),L(this,"initError",void 0),L(this,"spec",void 0),L(this,"store",void 0),L(this,"onWebsocketMessage",s=>{if(s instanceof ArrayBuffer)return void this.emit(rt.ON_BINARY_DATA,s);const l=JSON.parse(s);if(this.lastMsgTime=Date.now(),Object.prototype.hasOwnProperty.call(l,"_id")){const d="res-@".concat(l._id);this.emit(d,l._result,l._message)}else if(Object.prototype.hasOwnProperty.call(l,"_type")&&(this.emit(l._type,l._message),l._type===Bt.ON_NOTIFICATION&&this.handleNotification(l._message),l._type===Bt.ON_USER_BANNED))switch(l._message.error_code){case 14:this.close(yn.UID_BANNED);break;case 15:this.close(yn.IP_BANNED);break;case 16:this.close(yn.CHANNEL_BANNED)}}),this.clientId=r.clientId,this.spec=r,this.store=o,this.websocket=new tF("gateway-".concat(this.clientId),this.spec.retryConfig,!0,o),this.handleWebsocketEvents(),window.addEventListener("offline",()=>{this.connectionState===wn.CONNECTED&&this.reconnect("retry",cu.OFFLINE)})}async request(r,o,s,l){const d=Yn(6,""),p={_id:d,_type:r,_message:o},_=this.websocket.connectionID,S=()=>new Le((Z,ee)=>{if(this.connectionState===wn.CONNECTED)return Z();const te=()=>{this.off(rt.WS_CLOSED,Ee),Z()},Ee=()=>{this.off(rt.WS_CONNECTED,te),ee(new re(q.WS_ABORT))};this.once(rt.WS_CONNECTED,te),this.once(rt.WS_CLOSED,Ee),r!==mt.PUBLISH&&r!==mt.SUBSCRIBE&&r!==mt.UNSUBSCRIBE&&r!==mt.UNPUBLISH&&r!==mt.CONTROL&&r!==mt.RESTART_ICE||this.once(rt.DISCONNECT_P2P,()=>{ee(new re(q.DISCONNECT_P2P))}),r!==mt.PUBLISH&&r!==mt.RESTART_ICE||this.once(rt.ABORT_P2P_EXECUTION,()=>{ee(new re(q.DISCONNECT_P2P))})});if(this.connectionState!==wn.CONNECTING&&this.connectionState!==wn.RECONNECTING||r===mt.JOIN||r===mt.REJOIN||await S(),r===mt.LEAVE&&(this.websocket.unbindDcCloseEventListener(),l=!0),this.websocket.sendMessage(p,!0,!1),l)return;const I=new Le((Z,ee)=>{let te=!1;const Ee=(Pe,Xe)=>{te=!0,Z({isSuccess:Pe==="success",message:Xe||{}}),this.off(rt.WS_CLOSED,ye),this.off(rt.WS_RECONNECTING,ye),this.emit(rt.REQUEST_SUCCESS,r,o)};this.once("res-@".concat(d),Ee);const ye=()=>{ee(new re(q.WS_ABORT,"type: ".concat(r))),this.off(rt.WS_CLOSED,ye),this.off(rt.WS_RECONNECTING,ye),this.off("res-@".concat(d),Ee)};this.once(rt.WS_CLOSED,ye),this.once(rt.WS_RECONNECTING,ye),ro(de("SIGNAL_REQUEST_TIMEOUT")).then(()=>{this.websocket.connectionID!==_||te||(j.warning("dc request timeout, type: ".concat(r)),this.emit(rt.REQUEST_TIMEOUT,r,o))})});let b=null;try{b=await I}catch(Z){if(this.connectionState===wn.CLOSED||r===mt.LEAVE)throw new re(q.WS_ABORT);return!this.spec.forceWaitGatewayResponse||s?Z.throw():r===mt.JOIN||r===mt.REJOIN?null:(await S(),await this.request(r,o))}if(b.isSuccess)return b.message;const A=Number(b.message.error_code||b.message.code),F=GE(A),W=new re(q.UNEXPECTED_RESPONSE,"".concat(F.desc,": ").concat(b.message.error_str),{code:A,data:b.message});return F.action==="success"?b.message:(j.warning("[".concat(this.websocket.connectionID,"] unexpected response from type ").concat(r,", error_code: ").concat(A,", message: ").concat(F.desc,", action: ").concat(F.action)),A===ut.ERR_TOO_MANY_BROADCASTERS?((r===mt.JOIN||r===mt.REJOIN)&&(this.initError=W,this.close()),W.throw()):F.action==="failed"?W.throw():F.action==="quit"?(this.initError=W,this.close(),W.throw()):(A===ut.ERR_JOIN_BY_MULTI_IP?(this.multiIpOption=b.message.option,j.warning("[".concat(this.clientId,"] detect multi ip, recover")),this.reconnect("recover",cu.MULTI_IP)):this.reconnect(F.action,cu.SERVER_ERROR),r===mt.JOIN||r===mt.REJOIN?null:await this.request(r,o)))}waitMessage(r,o){return new Le(s=>{const l=d=>{(!o||o(d))&&(this.off(r,l),s(d))};this.on(r,l)})}upload(r,o){const s={_type:r,_message:o};try{this.websocket.sendMessage(s)}catch{const d=de("MAX_UPLOAD_CACHE")||50;this.uploadCache.push(s),this.uploadCache.length>d&&this.uploadCache.splice(0,1),this.uploadCache.length>0&&!this.uploadCacheInterval&&(this.uploadCacheInterval=window.setInterval(()=>{if(this.connectionState!==wn.CONNECTED)return;const p=this.uploadCache.splice(0,1)[0];this.uploadCache.length===0&&(window.clearInterval(this.uploadCacheInterval),this.uploadCacheInterval=void 0),this.upload(p._type,p._message)},de("UPLOAD_CACHE_INTERVAL")||2e3))}}send(r,o){const s={_type:r,_message:o};this.websocket.sendMessage(s)}init(r,o){return this.initError=void 0,this.multiIpOption=void 0,this.joinResponse=void 0,this.reconnectToken=void 0,this.openConnectionTime=void 0,new Le((s,l)=>{this.once(rt.WS_CONNECTED,()=>s(this.joinResponse)),this.once(rt.WS_CLOSED,()=>l(this.initError||new re(q.WS_ABORT))),this.connectionState=wn.CONNECTING,this.websocket.init(r).catch(l),this.websocket.once(mr.FAILBACK,()=>{this.openConnectionTime===void 0&&l(new re(q.INIT_DATACHANNEL_TIMEOUT))}),this.inflateDataTimer&&window.clearInterval(this.inflateDataTimer),this.inflateDataTimer=window.setInterval(()=>{this.handleInflateData()},2e4),setTimeout(()=>{o&&this.openConnectionTime===void 0&&(j.debug("[".concat(this.clientId,"] init datachannel timeout while join with failback to websocket")),l(new re(q.INIT_DATACHANNEL_TIMEOUT)))},de("DC_JOIN_WITH_FAILBACK"))})}close(r){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.inflateDataTimer&&(this.handleInflateData(),window.clearInterval(this.inflateDataTimer),this.inflateDataTimer=void 0),this.reconnectToken=void 0,this.joinResponse=void 0,this._disconnectedReason=r||yn.LEAVE,this.connectionState=wn.CLOSED,j.debug("[".concat(this.clientId,"] ")+"will close datachannel in signal"),this.websocket.close(),r===yn.FALLBACK&&(this.websocket.removeAllListeners(),this.websocket=new tF("gateway-".concat(this.clientId),this.spec.retryConfig,!0,this.store),this.handleWebsocketEvents())}async join(){if(!this.joinResponse){this.emit(rt.ABORT_P2P_EXECUTION);const r=await io(this,rt.DATACHANNEL_CONNECTING),o=await this.request(mt.JOIN,r);if(!o)return this.emit(rt.REPORT_JOIN_GATEWAY,q.TIMEOUT,this.url||""),!1;this.joinResponse=o,this.emit(rt.JOIN_RESPONSE,this.joinResponse),this.reconnectToken=this.joinResponse.rejoin_token}return this.connectionState=wn.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),!0}async rejoin(){if(!this.reconnectToken)throw new re(q.UNEXPECTED_ERROR,"can not rejoin, no rejoin token");const r=$f(this,rt.REQUEST_REJOIN_INFO);r.token=this.reconnectToken;const o=await this.request(mt.REJOIN,r);return!!o&&(this.connectionState=wn.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),o.peers&&o.peers.forEach(s=>{this.emit(Bt.ON_USER_ONLINE,{uid:s.uid}),s.audio&&this.emit(Bt.ON_ADD_AUDIO_STREAM,{uid:s.uid,uint_id:s.uint_id,audio:!0,ssrcId:s.audio_ssrc}),s.video&&this.emit(Bt.ON_ADD_VIDEO_STREAM,{uid:s.uid,uint_id:s.uint_id,video:!0,ssrcId:s.video_ssrc}),s.audio_mute?this.emit(Bt.MUTE_AUDIO,{uid:s.uid}):this.emit(Bt.UNMUTE_AUDIO,{uid:s.uid}),s.video_mute?this.emit(Bt.MUTE_VIDEO,{uid:s.uid}):this.emit(Bt.UNMUTE_VIDEO,{uid:s.uid}),s.audio_enable_local?this.emit(Bt.ENABLE_LOCAL_AUDIO,{uid:s.uid}):this.emit(Bt.DISABLE_LOCAL_AUDIO,{uid:s.uid}),s.video_enable_local?this.emit(Bt.ENABLE_LOCAL_VIDEO,{uid:s.uid}):this.emit(Bt.DISABLE_LOCAL_VIDEO,{uid:s.uid}),s.audio||s.video||this.emit(Bt.ON_REMOVE_STREAM,{uid:s.uid,uint_id:s.uint_id})}),!0)}reconnect(r,o){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.websocket.reconnect(r,o)}handleNotification(r){j.debug("[".concat(this.clientId,"] receive notification: "),r);const o=GE(r.code);if(o.action!=="success"){if(o.action!=="failed")return o.action==="quit"?(o.desc==="ERR_REPEAT_JOIN_CHANNEL"&&this.close(yn.UID_BANNED),void this.close()):void this.reconnect(o.action,cu.SERVER_ERROR);j.error("[".concat(this.clientId,"] ignore error: "),o.desc)}}handlePingPong(){if(!this.websocket||this.websocket.state!=="connected")return;this.pingpongTimeoutCount>0&&this.rttRolling.add(3e3),this.pingpongTimeoutCount+=1;const r=de("PING_PONG_TIME_OUT"),o=Date.now();this.pingpongTimeoutCount>=r&&(j.warning("PINGPONG Timeout. Last Socket Message: ".concat(o-this.lastMsgTime,"ms")),o-this.lastMsgTime>de("WEBSOCKET_TIMEOUT_MIN"))?this.reconnect("retry",cu.TIMEOUT):this.request(mt.PING,void 0,!0).then(()=>{this.pingpongTimeoutCount=0;const s=Date.now()-o;this.rttRolling.add(s),de("REPORT_STATS")&&this.send(mt.PING_BACK,{pingpongElapse:s})}).catch(s=>{})}handleInflateData(){const{inflateLength:r,deflateLength:o}=this.websocket.getInflateData();r!==0&&o!==0&&this.upload(Pa.WS_INFLATE_DATA_LENGTH,{ws_deflate_length:o,ws_inflate_length:r})}handleWebsocketEvents(){this.websocket.on(mr.RECONNECT_WAITTING_FINISH,r=>{this.emit(rt.WS_RECONNECT_WAITTING_FINISH,r)}),this.websocket.on(mr.RECONNECT_CREATE_CONNECTION,r=>{this.emit(rt.WS_RECONNECT_CREATE_CONNECTION,r)}),this.websocket.on(mr.ON_MESSAGE,this.onWebsocketMessage),this.websocket.on(mr.CLOSED,()=>{this.connectionState=wn.CLOSED}),this.websocket.on(mr.FAILED,()=>{this._disconnectedReason=yn.NETWORK_ERROR,this.connectionState=wn.CLOSED}),this.websocket.on(mr.RECONNECTING,r=>{this._websocketReconnectReason=r,this.joinResponse=void 0,this.connectionState===wn.CONNECTED?this.connectionState=wn.RECONNECTING:this.connectionState=wn.CONNECTING}),this.websocket.on(mr.WILL_RECONNECT,(r,o)=>{if($f(this,rt.IS_P2P_DISCONNECTED)&&r==="retry")return j.debug("".concat(this.clientId," reconnect mode is retry, but p2p lost, change to tryNext")),this.reconnectToken=void 0,this.emit(rt.NEED_RENEW_SESSION),this.emit(rt.DISCONNECT_P2P),o("tryNext");r!=="retry"&&(j.debug("".concat(this.clientId," websockt will_connect event, renewSession reconnectMode is ").concat(r)),this.reconnectToken=void 0,this.emit(rt.NEED_RENEW_SESSION),this.emit(rt.DISCONNECT_P2P)),o(r)}),this.websocket.on(mr.CONNECTED,()=>{this.openConnectionTime=Date.now(),this.reconnectToken?this.rejoin().catch(r=>{j.warning("[".concat(this.clientId,"] rejoin failed ").concat(r)),this.reconnect("tryNext",cu.SERVER_ERROR)}):this.join().catch(r=>{if(this.emit(rt.REPORT_JOIN_GATEWAY,r.message||r.code,this.url||""),r instanceof re&&r.code===q.UNEXPECTED_RESPONSE&&r.data.code===ut.ERR_NO_AUTHORIZED)return j.warning("[".concat(this.clientId,"] reconnect no authorized, recover")),void this.reconnect("recover",cu.SERVER_ERROR);j.error("[".concat(this.clientId,"] join gateway request failed"),r.toString()),this.spec.forceWaitGatewayResponse?this.reconnect("tryNext",cu.SERVER_ERROR):(this.initError=r,this.close())})}),this.websocket.on(mr.REQUEST_NEW_URLS,(r,o)=>{io(this,rt.REQUEST_RECOVER,this.multiIpOption).then(r).catch(o)}),this.websocket.on(mr.ON_TOKEN_PRIVILEGE_DID_EXPIRE,()=>{this.emit(Bt.ON_TOKEN_PRIVILEGE_DID_EXPIRE)}),this.websocket.on(mr.TO_CONNECT_DATACHANNEL,async(r,o,s)=>io(this,rt.DATACHANNEL_PRECONNECT,r).then(o).catch(s)),this.websocket.on(mr.FAILBACK,()=>{this.openConnectionTime!==void 0&&this.emit(rt.DATACHANNEL_FAILBACK)})}}function nF(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function du(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?nF(Object(o),!0).forEach(function(s){L(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):nF(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}const PN=new Map;class WY extends ur{get state(){return this._state}set state(r){if(r===this._state)return;const o=this._state;this._state=r,r==="DISCONNECTED"&&this._disconnectedReason?this.emit(lr.CONNECTION_STATE_CHANGE,r,o,this._disconnectedReason):this.emit(lr.CONNECTION_STATE_CHANGE,r,o)}get joinGatewayStartTime(){return this._joinGatewayStartTime}set joinGatewayStartTime(r){j.debug("[".concat(this.store.clientId,"] set joinGatewayStartTime at ").concat(r)),this._joinGatewayStartTime=r}constructor(r,o){super(),L(this,"store",void 0),L(this,"joinInfo",void 0),L(this,"key",void 0),L(this,"signal",void 0),L(this,"role",void 0),L(this,"inChannelInfo",{joinAt:null,duration:0}),L(this,"spec",void 0),L(this,"_state","DISCONNECTED"),L(this,"_statsCollector",void 0),L(this,"_disconnectedReason",void 0),L(this,"isSignalRecover",!1),L(this,"hasChangeBGPAddress",!1),L(this,"trafficStatsInterval",void 0),L(this,"networkQualityInterval",void 0),L(this,"_joinGatewayStartTime",0),L(this,"_signalTimeout",!1),L(this,"_clientRoleOptions",void 0),L(this,"_isProactiveJoin",!1),this.store=r,this.spec=o,this.signal=this.store.useDataChannel?new zu(du(du({},o),{},{retryConfig:o.websocketRetryConfig}),r):new J4(du(du({},o),{},{retryConfig:o.websocketRetryConfig}),r),this._statsCollector=o.statsCollector,this.role=o.role||"audience",this._clientRoleOptions=o.clientRoleOptions,this.handleSignalEvents()}async join(r,o,s){if(this.signal instanceof zu){let S=!1;r.cloudProxyServer!=="disabled"?(j.debug("[".concat(this.store.clientId,"] Dc is not supported, because cloudProxyServer are not supported (").concat(r.cloudProxyServer,")")),S=!0):"".concat(r.apResponse.cid,"_").concat(r.apResponse.cert).length>255||"".concat(r.apResponse.cid,"_").concat(r.apResponse.cert).length<22?(j.debug("[".concat(this.store.clientId,"] Dc is not supported, because ticket length is incorrect, it has to be between 22 and 255")),S=!0):r.apResponse.addresses.some(I=>I.fingerprint)||de("FINGERPRINT")||(j.debug("[".concat(this.store.clientId,"] Dc is not supported, because fingerprint does not exist")),S=!0),S&&this.resetSignal()}this.store.joinGatewayStart(),r.cloudProxyServer!=="disabled"&&(this.hasChangeBGPAddress=!0);const l=Date.now();let d=PN.get(r.cname);if(d||(d=new Map,PN.set(r.cname,d)),this._isProactiveJoin=!0,d.has(r.uid)){const S=new re(q.UID_CONFLICT);throw Ze.joinGateway(r.sid,{lts:l,succ:!1,ec:S.message,addr:null,uid:r.uid,cid:r.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!r.proxyServer,signalChannel:this.signal instanceof zu?"1":"0"}),this._isProactiveJoin=!1,S}d.set(r.uid,!0),this.joinInfo=r,this.key=o;let p=0;this.joinGatewayStartTime=l;const _=r.proxyServer;try{let S;if(j.debug("[".concat(this.store.clientId,"] use ").concat(this.signal instanceof zu?"datachannel":"websocket"," join uid ").concat(p)),this.signal instanceof zu)S=await this.signal.init(r.apResponse.addresses,s);else{const I=r.proxyServer,b=I?r.gatewayAddrs.map(A=>{const F=A.address.split(":");return"wss://".concat(I,"/ws/?h=").concat(F[0],"&p=").concat(F[1])}):r.gatewayAddrs.map(A=>"wss://".concat(A.address));S=await this.signal.init(b,s)}p=S.uid,j.debug("[".concat(this.store.clientId,"] ").concat(this.signal instanceof zu?"datachannel":"websocket"," join uid ").concat(p," cost ").concat(Date.now()-this.joinGatewayStartTime))}catch(S){throw S&&S.code===q.INIT_WEBSOCKET_TIMEOUT?(j.warning("[".concat(this.store.clientId,"] User join failed"),S.toString()),S):S&&S.code===q.INIT_DATACHANNEL_TIMEOUT?(j.warning("[".concat(this.store.clientId,"] User join datachannel failed"),S.toString()),this.resetSignal(),S):(j.error("[".concat(this.store.clientId,"] User join failed"),S.toString()),Ze.joinGateway(r.sid,{lts:l,succ:!1,ec:S.message,addr:this.signal.url,uid:r.uid,cid:r.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!_,signalChannel:this.signal instanceof zu?"1":"0"}),this._isProactiveJoin=!1,d.delete(r.uid),this.signal.close(),S)}return this.state="CONNECTED",this.inChannelInfo.joinAt=Date.now(),j.debug("[".concat(this.store.clientId,"] Connected to gateway server")),this.trafficStatsInterval=window.setInterval(()=>{this.updateTrafficStats().catch(S=>{j.warning("[".concat(this.store.clientId,"] get traffic stats error"),S.toString())})},3e3),this.networkQualityInterval=window.setInterval(()=>{navigator&&navigator.onLine!==void 0&&!navigator.onLine?this.emit(lr.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6}):this._signalTimeout?this.emit(lr.NETWORK_QUALITY,{downlinkNetworkQuality:5,uplinkNetworkQuality:5}):this.state==="CONNECTED"&&this._statsCollector.trafficStats?this.emit(lr.NETWORK_QUALITY,{uplinkNetworkQuality:B4(this._statsCollector.trafficStats.B_unq),downlinkNetworkQuality:B4(this._statsCollector.trafficStats.B_dnq)}):this.emit(lr.NETWORK_QUALITY,{uplinkNetworkQuality:0,downlinkNetworkQuality:0})},2e3),this.store.joinGatewayEnd(),p}async leave(){let r=arguments.length>0&&arguments[0]!==void 0&&arguments[0],o=arguments.length>1?arguments[1]:void 0;if(this.state!=="DISCONNECTED"){o!==yn.FALLBACK&&(this.state="DISCONNECTING");try{r||this.signal.connectionState!==wn.CONNECTED||await function(s,l){return l===1/0?s:Le.race([s,VY(l)])}(this.signal.request(mt.LEAVE,void 0,!0),3e3)}catch(s){j.warning("[".concat(this.store.clientId,"] leave request failed, ignore"),s)}this.signal.close(o),o!==yn.FALLBACK&&(this.state="DISCONNECTED"),this.reset()}}async publish(r,o,s){if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new re(q.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));const l={state:"offer",p2p_id:this.store.p2pId,ortc:o,mode:this.spec.mode,extend:de("PUB_EXTEND"),twcc:!!de("PUBLISH_TWCC"),rtx:!!de("USE_PUB_RTX")};try{return(await this.signal.request(mt.PUBLISH,l,!0))._message}catch(d){if(s&&d.data&&d.data.code===ut.ERR_PUBLISH_REQUEST_INVALID)return j.warning("[".concat(this.store.clientId,"] receive publish error code, retry"),d.toString()),await this.tryUnpubBeforeRepub(r,o),this.publish(r,o,!1);throw d}}async unpublish(r,o){try{if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new re(q.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));await this.signal.request(mt.UNPUBLISH,{stream_id:o,ortc:r},!0)}catch(s){j.warning("[".concat(this.store.clientId,"] unpublish warning: "),s)}}async subscribe(r,o,s){if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new re(q.INVALID_OPERATION,"can not subscribe when connection state is ".concat(this.state));const l={stream_id:r,stream_type:o.stream_type,mode:this.spec.mode,codec:this.spec.codec,p2p_id:this.store.p2pId,twcc:!!de("SUBSCRIBE_TWCC"),rtx:!!de("USE_SUB_RTX"),extend:de("SUB_EXTEND"),ssrcId:o.ssrcId,svc:Array.isArray(de("SVC"))&&de("SVC").length!==0?de("SVC"):void 0};try{return(await this.signal.request(mt.SUBSCRIBE,l,!0))._message}catch(d){if(s&&d.data&&d.data.code===ut.ERR_SUBSCRIBE_REQUEST_INVALID)return j.warning("[".concat(this.store.clientId,"] receiver subscribe error code, retry"),d.toString()),await this.tryUnsubBeforeResub(r,o),await this.subscribe(r,o,!1);throw d}}async subscribeAll(r,o){if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new re(q.INVALID_OPERATION,"can not massSubscribe when connection state is ".concat(this.state));const s={p2p_id:this.store.p2pId,users:r,dtx:!1,rtx:!!de("USE_SUB_RTX")};try{return await this.signal.request(mt.SUBSCRIBE_STREAMS,s,!0)}catch(l){if(o&&l.data&&l.data.code===ut.ERR_SUBSCRIBE_REQUEST_INVALID)return j.warning("[".concat(this.store.clientId,"] receiver massSubscribe error code, retry"),l.toString()),await this.tryMassUnsubBeforeResub(r),await this.subscribeAll(r,!1);throw l}}async setVideoProfile(r){const o=function(s){if(!(s.bitrateMax&&s.bitrateMin&&s.frameRate&&s.height&&s.width))return;let l=s.frameRate,d=s.width,p=s.height,_=!0;return typeof l!="number"&&(l=l.exact||l.ideal||l.max||l.min||0,l||(_=!1)),typeof d!="number"&&(d=d.exact||d.ideal||d.max||d.min||0,d||(_=!1)),typeof p!="number"&&(p=p.exact||p.ideal||p.max||p.min||0,l||(_=!1)),_?{stream_type:0,width:d,height:p,fps:l,start_bps:1e3*s.bitrateMax,min_bps:1e3*s.bitrateMin,target_bps:1e3*s.bitrateMax}:void 0}(r);if(o)return this.signal.request(mt.SET_VIDEO_PROFILE,o);j.debug("[".concat(this.store.clientId,"] encoder config is not complete, do not report to gateway"))}async unsubscribe(r,o){try{await this.signal.request(mt.UNSUBSCRIBE,{p2p_id:this.store.p2pId,ortc:r,stream_id:o},!0)}catch(s){j.warning("[".concat(this.store.clientId,"] unsubscribe warning: "),s)}}async massUnsubscribe(r){try{await this.signal.request(mt.UNSUBSCRIBE_STREAMS,r,!0)}catch(o){j.warning("[".concat(this.store.clientId,"] massUnsubscribeAll warning: "),o)}}async reconnectPC(r){const{iceParameters:o,dtlsParameters:s,rtpCapabilities:l}=r;return{gatewayEstablishParams:await this.signal.request(mt.CONNECT_PC,{p2p_id:this.store.p2pId,stream_id:this.store.uid,ortc:{iceParameters:o,dtlsParameters:s,rtpCapabilities:l}},!0),gatewayAddress:this.getCurrentGatewayAddress()}}getGatewayInfo(){return this.signal.request(mt.GATEWAY_INFO)}async renewToken(r){await this.signal.request(mt.RENEW_TOKEN,r),this.key=r.token}async setClientRole(r,o){if(o&&(this._clientRoleOptions=Object.assign({},o)),this.state!=="CONNECTED")return void(this.role=r);let s;s=r==="audience"?this._clientRoleOptions&&this._clientRoleOptions.level?this._clientRoleOptions.level:2:0,await this.signal.request(mt.SET_CLIENT_ROLE,{role:r,level:s,client_ts:Date.now()}),this.role=r}async setRemoteVideoStreamType(r,o){await this.signal.request(mt.SWITCH_VIDEO_STREAM,{stream_id:r,stream_type:o})}async setDefaultRemoteVideoStreamType(r){await this.signal.request(mt.DEFAULT_VIDEO_STREAM,{stream_type:r})}async setStreamFallbackOption(r,o){await this.signal.request(mt.SET_FALLBACK_OPTION,{stream_id:r,fallback_type:o})}async pickSVCLayer(r,o){await this.signal.request(mt.PICK_SVC_LAYER,{stream_id:r,spatial_layer:o.spatialLayer,temporal_layer:o.temporalLayer})}getInChannelInfo(){return this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=Date.now()-this.inChannelInfo.joinAt),du({},this.inChannelInfo)}async getGatewayVersion(){return(await this.signal.request(mt.GATEWAY_INFO)).version}reset(){if(this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=Date.now()-this.inChannelInfo.joinAt,this.inChannelInfo.joinAt=null),this.trafficStatsInterval&&(window.clearInterval(this.trafficStatsInterval),this.trafficStatsInterval=void 0),this.joinInfo){const r=PN.get(this.joinInfo.cname);r&&r.delete(this.joinInfo.uid)}this.joinInfo=void 0,this.key=void 0,this.networkQualityInterval&&(window.clearInterval(this.networkQualityInterval),this.networkQualityInterval=void 0)}updateTurnConfigFromSignal(){if(!this.joinInfo)return;const r=function(o){let s;return s=o.startsWith("dc")?o.match(/(dc\:\/\/)?([^:]+):(\d+)/):o.match(/(wss\:\/\/)?([^:]+):(\d+)/),s?{username:rs.username,password:rs.password,turnServerURL:s[2],tcpport:parseInt(s[3])+30,udpport:parseInt(s[3])+30,forceturn:!1}:null}((this.joinInfo.cloudProxyServer==="disabled"?this.signal.url:this.joinInfo.gatewayAddrs[this.signal.currentURLIndex].address)||"");this.joinInfo.turnServer.serversFromGateway=[],r&&this.joinInfo.turnServer.mode!=="off"&&this.joinInfo.cloudProxyServer==="disabled"&&this.joinInfo.turnServer.serversFromGateway.push(du(du({},rs),{},{turnServerURL:r.turnServerURL,tcpport:r.tcpport,udpport:r.udpport,username:this.joinInfo.uid.toString(),password:this.joinInfo.token}))}async updateTrafficStats(){if(this.state!=="CONNECTED")return;const r=await this.signal.request(mt.TRAFFIC_STATS,void 0,!0);r.timestamp=Date.now(),r.peer_delay.forEach(o=>{const s=this._statsCollector.trafficStats&&this._statsCollector.trafficStats.peer_delay.find(l=>l.peer_uid===o.peer_uid);s&&s.B_st!==o.B_st&&sl(()=>{this.emit(lr.STREAM_TYPE_CHANGE,o.peer_uid,o.B_st)})}),this._statsCollector.updateTrafficStats(r)}getJoinMessage(r){if(!this.joinInfo||!this.key)throw new re(q.UNEXPECTED_ERROR,"can not generate join message, no join info");const o=Object.assign({},this.joinInfo.apResponse);let s=de("REPORT_APP_SCENARIO");if(typeof s!="string")try{s=JSON.stringify(s)}catch{s=void 0}s&&s.length>128&&(s=void 0);const l=du({license:this.joinInfo.license,p2p_id:this.store.p2pId,session_id:this.joinInfo.sid,app_id:this.joinInfo.appId,channel_key:this.key,channel_name:this.joinInfo.cname,sdk_version:xs,browser:navigator.userAgent,process_id:de("PROCESS_ID"),mode:this.spec.mode,codec:this.spec.codec,role:this.role,has_changed_gateway:this.hasChangeBGPAddress,ap_response:o,extend:de("JOIN_EXTEND"),details:{6:this.joinInfo.stringUid,cservice_map:this.joinInfo.cloudProxyServer==="proxy3"?"1":this.joinInfo.cloudProxyServer==="proxy5"?"2":void 0},features:{rejoin:!0},optionalInfo:this.joinInfo.optionalInfo,appScenario:s,attributes:{userAttributes:{enablePublishedUserList:de("ENABLE_PUBLISHED_USER_LIST"),maxSubscription:de("MAX_SUBSCRIPTION"),subscribeAudioFilterTopN:typeof de("SUBSCRIBE_AUDIO_FILTER_TOPN")=="number"?de("SUBSCRIBE_AUDIO_FILTER_TOPN"):void 0,enablePublishAudioFilter:typeof de("ENABLE_PUBLISH_AUDIO_FILTER")=="boolean"?de("ENABLE_PUBLISH_AUDIO_FILTER"):void 0,enableUserLicenseCheck:typeof de("ENABLE_USER_LICENSE_CHECK")=="boolean"?de("ENABLE_USER_LICENSE_CHECK"):void 0,enableRTX:de("USE_PUB_RTX")===!0||de("USE_SUB_RTX")===!0||void 0}},join_ts:this.joinGatewayStartTime},r);return this.joinInfo.stringUid&&(l.string_uid=this.joinInfo.stringUid),this.joinInfo.aesmode&&this.joinInfo.aespassword&&(l.aes_mode=this.joinInfo.aesmode,de("ENCRYPT_AES")?(l.aes_secret=this.joinInfo.aespassword,l.aes_encrypt=!0):l.aes_secret=this.joinInfo.aespassword,this.joinInfo.aessalt&&(l.aes_salt=this.joinInfo.aessalt)),o.addresses[this.signal.websocket.currentURLIndex]&&(l.ap_response.ticket=o.addresses[this.signal.websocket.currentURLIndex].ticket,delete o.addresses),this.joinInfo.defaultVideoStream!==void 0&&(l.default_video_stream=this.joinInfo.defaultVideoStream),l}getRejoinMessage(){if(!this.joinInfo)throw new re(q.UNEXPECTED_ERROR,"can not generate rejoin message, no join info");return{session_id:this.joinInfo.sid,channel_name:this.joinInfo.cname,cid:this.joinInfo.cid,uid:this.joinInfo.uid,vid:Number(this.joinInfo.vid)}}handleSignalEvents(){this.signal.on(rt.WS_RECONNECT_WAITTING_FINISH,r=>{["tryNext","recover"].includes(r)&&this.joinInfo&&Ze.adjustSessionStartTime(this.joinInfo.sid)}),this.signal.on(rt.WS_RECONNECT_CREATE_CONNECTION,r=>{this.joinGatewayStartTime=Date.now()}),this.signal.on(rt.WS_RECONNECTING,r=>{this.joinInfo&&Ze.WebSocketQuit(this.joinInfo.sid,{lts:Date.now(),succ:-1,cname:this.joinInfo.cname,uid:this.joinInfo.uid,cid:this.joinInfo.cid,errorCode:r||Go.NETWORK_ERROR}),this.joinInfo&&(this.state="RECONNECTING",Ze.sessionInit(this.joinInfo.sid,{lts:new Date().getTime(),extend:this.isSignalRecover?{recover:!0}:{rejoin:!0},cname:this.joinInfo.cname,appid:this.joinInfo.appId,mode:this.spec.mode}),this.isSignalRecover=!1,this.joinGatewayStartTime=Date.now())}),this.signal.on(rt.WS_CLOSED,r=>{let o;switch(r){case yn.LEAVE:o=Go.LEAVE;break;case yn.UID_BANNED:case yn.IP_BANNED:case yn.CHANNEL_BANNED:case yn.SERVER_ERROR:o=Go.SERVER_ERROR;break;case yn.FALLBACK:o=Go.FALLBACK;break;case yn.LICENSE_MISSING:case yn.LICENSE_EXPIRED:case yn.LICENSE_MINUTES_EXCEEDED:case yn.LICENSE_PERIOD_INVALID:case yn.LICENSE_MULTIPLE_SDK_SERVICE:case yn.LICENSE_ILLEGAL:o=r;break;default:o=Go.NETWORK_ERROR}j.debug("[".concat(this.store.clientId,"] [signal] websocket closed, reason: ").concat(o||"undefined -> "+Go.NETWORK_ERROR)),this.joinInfo&&Ze.WebSocketQuit(this.joinInfo.sid,{lts:Date.now(),succ:r===yn.LEAVE?1:-1,cname:this.joinInfo.cname,uid:this.joinInfo.uid,cid:this.joinInfo.cid,errorCode:o}),this._disconnectedReason=r,r!==yn.FALLBACK&&(this.state="DISCONNECTED"),this.reset()}),this.signal.on(rt.WS_CONNECTED,()=>{if(this.updateTurnConfigFromSignal(),this.state="CONNECTED",this.joinInfo&&(this.role==="audience"&&this._clientRoleOptions&&this._clientRoleOptions.level&&(j.debug("[".concat(this.store.clientId,"] patch to send set client role, role: ").concat(this.role,", mode: ").concat(this.spec.mode,", level: ").concat(this._clientRoleOptions&&this._clientRoleOptions.level)),this.setClientRole(this.role,this._clientRoleOptions)),Ze.joinGateway(this.joinInfo.sid,{lts:this.joinGatewayStartTime,succ:!0,ec:null,vid:this.joinInfo.vid,addr:this.signal.url,uid:this.joinInfo.uid,cid:this.joinInfo.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!this.joinInfo.proxyServer,signalChannel:this.signal instanceof zu?"1":"0"}),this._isProactiveJoin=!1,this.joinInfo.useLocalAccessPoint&&this.joinInfo.setLocalAPVersion===1)){const r=this.signal.url&&this.signal.url.match(/wss\:\/\/([^:]+):(\d+)/);if(!r)return void j.error("[".concat(this.store.clientId,"] set local access point after joined failed: ").concat(r));Dn("EVENT_REPORT_DOMAIN",r[1]),Dn("EVENT_REPORT_BACKUP_DOMAIN",r[1]),Dn("LOG_UPLOAD_SERVER","".concat(r[1],":6444"))}}),this.signal.on(Bt.ON_UPLINK_STATS,r=>{this._statsCollector.updateUplinkStats(r)}),this.signal.on(rt.REQUEST_RECOVER,(r,o,s)=>{if(!this.joinInfo)return s(new re(q.UNEXPECTED_ERROR,"gateway: can not recover, no join info"));r&&(this.joinInfo.multiIP=r,this.hasChangeBGPAddress=!0),this.isSignalRecover=!0,io(this,lr.REQUEST_NEW_GATEWAY_LIST).then(o).catch(s)}),this.signal.on(rt.REQUEST_JOIN_INFO,async r=>{var o;this.updateTurnConfigFromSignal();const{iceParameters:s,dtlsParameters:l,rtpCapabilities:d}=await io(this,lr.REQUEST_P2P_CONNECTION_PARAMS,{turnServer:(o=this.joinInfo)===null||o===void 0?void 0:o.turnServer});r(this.getJoinMessage({ortc:{iceParameters:s,dtlsParameters:l,rtpCapabilities:d,version:"2"}}))}),this.signal.on(rt.REQUEST_REJOIN_INFO,r=>{r(this.getRejoinMessage())}),this.signal.on(rt.REPORT_JOIN_GATEWAY,(r,o)=>{this.joinInfo&&(Ze.joinGateway(this.joinInfo.sid,{lts:this.joinGatewayStartTime,succ:!1,ec:r,addr:o,uid:this.joinInfo.uid,cid:this.joinInfo.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!this.joinInfo.proxyServer,signalChannel:this.signal instanceof zu?"1":"0"}),this._isProactiveJoin=!1)}),this.signal.on(rt.IS_P2P_DISCONNECTED,r=>{r($f(this,lr.IS_P2P_DISCONNECTED))}),this.signal.on(rt.DISCONNECT_P2P,()=>{this.emit(lr.DISCONNECT_P2P)}),this.signal.on(rt.NEED_RENEW_SESSION,()=>{this.emit(lr.NEED_RENEW_SESSION)}),this.signal.on(rt.REQUEST_SUCCESS,()=>{this._signalTimeout=!1}),this.signal.on(rt.REQUEST_TIMEOUT,()=>{this._signalTimeout=!0}),this.signal.on(rt.JOIN_RESPONSE,r=>{const o=this.getCurrentGatewayAddress();this.emit(lr.JOIN_RESPONSE,r,o)}),this.signal.on(rt.DATACHANNEL_PRECONNECT,async(r,o,s)=>{this.updateTurnConfigFromSignal();const l=this.getCurrentGatewayAddress();return io(this,lr.DATACHANNEL_PRECONNECT,r,l).then(o).catch(s)}),this.signal.on(rt.DATACHANNEL_CONNECTING,async r=>{const{iceParameters:o,dtlsParameters:s,rtpCapabilities:l}=await io(this,lr.REQUEST_DC_CONNECTION_PARAMS);r(this.getJoinMessage({ortc:{iceParameters:o,dtlsParameters:s,rtpCapabilities:l,version:"2"}}))}),this.signal.on(rt.DATACHANNEL_FAILBACK,()=>{j.warning("[".concat(this.store.clientId,"] User join datachannel failed")),this.reset(),this.resetSignal(),this.emit(lr.DATACHANNEL_FAILBACK)})}async tryUnsubBeforeResub(r,o){try{await this.signal.request(mt.UNSUBSCRIBE,{p2p_id:this.store.p2pId,stream_id:r,ortc:[o]},!0)}catch(s){throw j.warning("[".concat(this.store.clientId,"] tryUnsubBeforeResub warning"),s),s}}async tryUnpubBeforeRepub(r,o){try{await this.signal.request(mt.UNPUBLISH,{stream_id:r,ortc:o},!0)}catch(s){throw j.warning("[".concat(this.store.clientId,"] tryUnpubBeforeRepub warning: "),s),s}}async tryMassUnsubBeforeResub(r){const o={users:r.map(s=>({stream_id:s.stream_id,stream_type:s.stream_type}))};try{await this.signal.request(mt.UNSUBSCRIBE_STREAMS,o,!0)}catch(s){throw j.warning("[".concat(this.store.clientId,"] tryMassUnsubBeforeResub warning"),s),s}}async muteLocal(r,o){const s={action:r.find(l=>l.stream_type===Xr.Audio)?"mute_local_audio":"mute_local_video",p2p_id:this.store.p2pId,ortc:r,stream_id:o};try{await this.signal.request(mt.CONTROL,s,!0,!0)}catch(l){throw j.warning("[".concat(this.store.clientId,"] gateway muteLocal warning: "),l),l}}async unmuteLocal(r,o){const s={action:r.find(l=>l.stream_type===Xr.Audio)?"unmute_local_audio":"unmute_local_video",p2p_id:this.store.p2pId,ortc:r,stream_id:o};try{await this.signal.request(mt.CONTROL,s,!0,!0)}catch(l){throw j.warning("[".concat(this.store.clientId,"] gateway unmuteLocal warning: "),l),l}}uploadStats(r,o){this.signal.upload(r,o)}getSignalRTT(){return this.signal.rtt}async restartICE(r){const o={p2p_id:this.store.p2pId,stream_id:this.store.uid,ortc:r};try{return await this.signal.request(mt.RESTART_ICE,o,!0)}catch(s){throw j.warning("[".concat(this.store.clientId,"] P2PChannel.restartICE warning: "),s),s}}reconnect(){this.state==="CONNECTED"&&this.signal.reconnect(void 0,Go.P2P_FAILED)}getCurrentGatewayAddress(){var r;if(!de("GATEWAY_WSS_ADDRESS"))return(r=this.joinInfo)!==null&&r!==void 0&&r.gatewayAddrs?this.joinInfo.gatewayAddrs[this.signal.currentURLIndex]:void 0}async setPublishAudioFilterEnabled(r){await this.signal.request(mt.SET_PARAMETER,{enablePublishAudioFilter:r})}resetSignal(){this.signal&&(this.signal.removeAllListeners(),this.signal.close(yn.FALLBACK)),this.store.useDataChannel=!1,this.signal=new J4(du(du({},this.spec),{},{retryConfig:this.spec.websocketRetryConfig}),this.store),this.handleSignalEvents(),this.emit(lr.RESET_SIGNAL,WT.websocket)}}/*! formdata-polyfill. MIT License. Jimmy W?rting <https://jimmy.warting.se/opensource> */(function(){var n;function r(Ie){var De=0;return function(){return De<Ie.length?{done:!1,value:Ie[De++]}:{done:!0}}}var o=typeof Object.defineProperties=="function"?Object.defineProperty:function(Ie,De,ze){return Ie==Array.prototype||Ie==Object.prototype||(Ie[De]=ze.value),Ie},s,l=function(Ie){Ie=[typeof globalThis=="object"&&globalThis,Ie,typeof window=="object"&&window,typeof self=="object"&&self,typeof a=="object"&&a];for(var De=0;De<Ie.length;++De){var ze=Ie[De];if(ze&&ze.Math==Math)return ze}throw Error("Cannot find global object")}(this);function d(Ie,De){if(De)e:{var ze=l;Ie=Ie.split(".");for(var yt=0;yt<Ie.length-1;yt++){var ln=Ie[yt];if(!(ln in ze))break e;ze=ze[ln]}(De=De(yt=ze[Ie=Ie[Ie.length-1]]))!=yt&&De!=null&&o(ze,Ie,{configurable:!0,writable:!0,value:De})}}function p(Ie){return(Ie={next:Ie})[Symbol.iterator]=function(){return this},Ie}function _(Ie){var De=typeof Symbol<"u"&&Symbol.iterator&&Ie[Symbol.iterator];return De?De.call(Ie):{next:r(Ie)}}if(d("Symbol",function(Ie){function De(ln,je){this.A=ln,o(this,"description",{configurable:!0,writable:!0,value:je})}if(Ie)return Ie;De.prototype.toString=function(){return this.A};var ze="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",yt=0;return function ln(je){if(this instanceof ln)throw new TypeError("Symbol is not a constructor");return new De(ze+(je||"")+"_"+yt++,je)}}),d("Symbol.iterator",function(Ie){if(Ie)return Ie;Ie=Symbol("Symbol.iterator");for(var De="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),ze=0;ze<De.length;ze++){var yt=l[De[ze]];typeof yt=="function"&&typeof yt.prototype[Ie]!="function"&&o(yt.prototype,Ie,{configurable:!0,writable:!0,value:function(){return p(r(this))}})}return Ie}),typeof Object.setPrototypeOf=="function")s=Object.setPrototypeOf;else{var S;e:{var I={};try{I.__proto__={a:!0},S=I.a;break e}catch{}S=!1}s=S?function(Ie,De){if(Ie.__proto__=De,Ie.__proto__!==De)throw new TypeError(Ie+" is not extensible");return Ie}:null}var b=s;function A(){this.m=!1,this.j=null,this.v=void 0,this.h=1,this.u=this.C=0,this.l=null}function F(Ie){if(Ie.m)throw new TypeError("Generator is already running");Ie.m=!0}function W(Ie,De){return Ie.h=3,{value:De}}function Z(Ie){this.g=new A,this.G=Ie}function ee(Ie,De,ze,yt){try{var ln=De.call(Ie.g.j,ze);if(!(ln instanceof Object))throw new TypeError("Iterator result "+ln+" is not an object");if(!ln.done)return Ie.g.m=!1,ln;var je=ln.value}catch(U){return Ie.g.j=null,Ie.g.s(U),te(Ie)}return Ie.g.j=null,yt.call(Ie.g,je),te(Ie)}function te(Ie){for(;Ie.g.h;)try{var De=Ie.G(Ie.g);if(De)return Ie.g.m=!1,{value:De.value,done:!1}}catch(ze){Ie.g.v=void 0,Ie.g.s(ze)}if(Ie.g.m=!1,Ie.g.l){if(De=Ie.g.l,Ie.g.l=null,De.F)throw De.D;return{value:De.return,done:!0}}return{value:void 0,done:!0}}function Ee(Ie){this.next=function(De){return Ie.o(De)},this.throw=function(De){return Ie.s(De)},this.return=function(De){return function(ze,yt){F(ze.g);var ln=ze.g.j;return ln?ee(ze,"return"in ln?ln.return:function(je){return{value:je,done:!0}},yt,ze.g.return):(ze.g.return(yt),te(ze))}(Ie,De)},this[Symbol.iterator]=function(){return this}}function ye(Ie,De){return De=new Ee(new Z(De)),b&&Ie.prototype&&b(De,Ie.prototype),De}if(A.prototype.o=function(Ie){this.v=Ie},A.prototype.s=function(Ie){this.l={D:Ie,F:!0},this.h=this.C||this.u},A.prototype.return=function(Ie){this.l={return:Ie},this.h=this.u},Z.prototype.o=function(Ie){return F(this.g),this.g.j?ee(this,this.g.j.next,Ie,this.g.o):(this.g.o(Ie),te(this))},Z.prototype.s=function(Ie){return F(this.g),this.g.j?ee(this,this.g.j.throw,Ie,this.g.o):(this.g.s(Ie),te(this))},d("Array.prototype.entries",function(Ie){return Ie||function(){return function(De,ze){De instanceof String&&(De+="");var yt=0,ln=!1,je={next:function(){if(!ln&&yt<De.length){var U=yt++;return{value:ze(U,De[U]),done:!1}}return ln=!0,{done:!0,value:void 0}}};return je[Symbol.iterator]=function(){return je},je}(this,function(De,ze){return[De,ze]})}}),typeof Blob<"u"&&(typeof FormData>"u"||!FormData.prototype.keys)){var Pe=function(Ie,De){for(var ze=0;ze<Ie.length;ze++)De(Ie[ze])},Xe=function(Ie){return Ie.replace(/\r?\n|\r/g,`\r
`)},ke=function(Ie,De,ze){return De instanceof Blob?(ze=ze!==void 0?ze+"":typeof De.name=="string"?De.name:"blob",De.name===ze&&Object.prototype.toString.call(De)!=="[object Blob]"||(De=new File([De],ze)),[String(Ie),De]):[String(Ie),String(De)]},Ve=function(Ie,De){if(Ie.length<De)throw new TypeError(De+" argument required, but only "+Ie.length+" present.")},xe=typeof globalThis=="object"?globalThis:typeof window=="object"?window:typeof self=="object"?self:this,$e=xe.FormData,En=xe.XMLHttpRequest&&xe.XMLHttpRequest.prototype.send,ct=xe.Request&&xe.fetch,Bn=xe.navigator&&xe.navigator.sendBeacon,On=xe.Element&&xe.Element.prototype,Lr=xe.Symbol&&Symbol.toStringTag;Lr&&(Blob.prototype[Lr]||(Blob.prototype[Lr]="Blob"),"File"in xe&&!File.prototype[Lr]&&(File.prototype[Lr]="File"));try{new File([],"")}catch{xe.File=function(De,ze,yt){return De=new Blob(De,yt||{}),Object.defineProperties(De,{name:{value:ze},lastModified:{value:+(yt&&yt.lastModified!==void 0?new Date(yt.lastModified):new Date)},toString:{value:function(){return"[object File]"}}}),Lr&&Object.defineProperty(De,Lr,{value:"File"}),De}}var $i=function(Ie){return Ie.replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22")},Rr=function(Ie){this.i=[];var De=this;Ie&&Pe(Ie.elements,function(ze){if(ze.name&&!ze.disabled&&ze.type!=="submit"&&ze.type!=="button"&&!ze.matches("form fieldset[disabled] *"))if(ze.type==="file"){var yt=ze.files&&ze.files.length?ze.files:[new File([],"",{type:"application/octet-stream"})];Pe(yt,function(ln){De.append(ze.name,ln)})}else ze.type==="select-multiple"||ze.type==="select-one"?Pe(ze.options,function(ln){!ln.disabled&&ln.selected&&De.append(ze.name,ln.value)}):ze.type==="checkbox"||ze.type==="radio"?ze.checked&&De.append(ze.name,ze.value):(yt=ze.type==="textarea"?Xe(ze.value):ze.value,De.append(ze.name,yt))})};if((n=Rr.prototype).append=function(Ie,De,ze){Ve(arguments,2),this.i.push(ke(Ie,De,ze))},n.delete=function(Ie){Ve(arguments,1);var De=[];Ie=String(Ie),Pe(this.i,function(ze){ze[0]!==Ie&&De.push(ze)}),this.i=De},n.entries=function Ie(){var De,ze=this;return ye(Ie,function(yt){if(yt.h==1&&(De=0),yt.h!=3)return De<ze.i.length?yt=W(yt,ze.i[De]):(yt.h=0,yt=void 0),yt;De++,yt.h=2})},n.forEach=function(Ie,De){Ve(arguments,1);for(var ze=_(this),yt=ze.next();!yt.done;yt=ze.next()){var ln=_(yt.value);yt=ln.next().value,ln=ln.next().value,Ie.call(De,ln,yt,this)}},n.get=function(Ie){Ve(arguments,1);var De=this.i;Ie=String(Ie);for(var ze=0;ze<De.length;ze++)if(De[ze][0]===Ie)return De[ze][1];return null},n.getAll=function(Ie){Ve(arguments,1);var De=[];return Ie=String(Ie),Pe(this.i,function(ze){ze[0]===Ie&&De.push(ze[1])}),De},n.has=function(Ie){Ve(arguments,1),Ie=String(Ie);for(var De=0;De<this.i.length;De++)if(this.i[De][0]===Ie)return!0;return!1},n.keys=function Ie(){var De,ze,yt,ln,je=this;return ye(Ie,function(U){if(U.h==1&&(De=_(je),ze=De.next()),U.h!=3)return ze.done?void(U.h=0):(yt=ze.value,ln=_(yt),W(U,ln.next().value));ze=De.next(),U.h=2})},n.set=function(Ie,De,ze){Ve(arguments,2),Ie=String(Ie);var yt=[],ln=ke(Ie,De,ze),je=!0;Pe(this.i,function(U){U[0]===Ie?je&&(je=!yt.push(ln)):yt.push(U)}),je&&yt.push(ln),this.i=yt},n.values=function Ie(){var De,ze,yt,ln,je=this;return ye(Ie,function(U){if(U.h==1&&(De=_(je),ze=De.next()),U.h!=3)return ze.done?void(U.h=0):(yt=ze.value,(ln=_(yt)).next(),W(U,ln.next().value));ze=De.next(),U.h=2})},Rr.prototype._asNative=function(){for(var Ie=new $e,De=_(this),ze=De.next();!ze.done;ze=De.next()){var yt=_(ze.value);ze=yt.next().value,yt=yt.next().value,Ie.append(ze,yt)}return Ie},Rr.prototype._blob=function(){var Ie="----formdata-polyfill-"+Math.random(),De=[],ze="--"+Ie+`\r
Content-Disposition: form-data; name="`;return this.forEach(function(yt,ln){return typeof yt=="string"?De.push(ze+$i(Xe(ln))+`"\r
\r
`+Xe(yt)+`\r
`):De.push(ze+$i(Xe(ln))+'"; filename="'+$i(yt.name)+`"\r
Content-Type: `+(yt.type||"application/octet-stream")+`\r
\r
`,yt,`\r
`)}),De.push("--"+Ie+"--"),new Blob(De,{type:"multipart/form-data; boundary="+Ie})},Rr.prototype[Symbol.iterator]=function(){return this.entries()},Rr.prototype.toString=function(){return"[object FormData]"},On&&!On.matches&&(On.matches=On.matchesSelector||On.mozMatchesSelector||On.msMatchesSelector||On.oMatchesSelector||On.webkitMatchesSelector||function(Ie){for(var De=(Ie=(this.document||this.ownerDocument).querySelectorAll(Ie)).length;0<=--De&&Ie.item(De)!==this;);return-1<De}),Lr&&(Rr.prototype[Lr]="FormData"),En){var _a=xe.XMLHttpRequest.prototype.setRequestHeader;xe.XMLHttpRequest.prototype.setRequestHeader=function(Ie,De){_a.call(this,Ie,De),Ie.toLowerCase()==="content-type"&&(this.B=!0)},xe.XMLHttpRequest.prototype.send=function(Ie){Ie instanceof Rr?(Ie=Ie._blob(),this.B||this.setRequestHeader("Content-Type",Ie.type),En.call(this,Ie)):En.call(this,Ie)}}ct&&(xe.fetch=function(Ie,De){return De&&De.body&&De.body instanceof Rr&&(De.body=De.body._blob()),ct.call(this,Ie,De)}),Bn&&(xe.navigator.sendBeacon=function(Ie,De){return De instanceof Rr&&(De=De._asNative()),Bn.call(this,Ie,De)}),xe.FormData=Rr}})();const ob=()=>{const n=de("AREAS");return n.length===0&&n.push(nn.GLOBAL),Gl(n).call(n,(r,o,s)=>{const l=rF(o);return l?s===0?l:"".concat(r,",").concat(l):r},"")},rF=n=>n===nn.OVERSEA?"".concat(yi.ASIA,",").concat(yi.EUROPE,",").concat(yi.AFRICA,",").concat(yi.NORTH_AMERICA,",").concat(yi.SOUTH_AMERICA,",").concat(yi.OCEANIA):yi[n],GY=n=>{const r={CODE:"",WEBCS_DOMAIN:[],WEBCS_DOMAIN_BACKUP_LIST:[],PROXY_CS:[],CDS_AP:[],ACCOUNT_REGISTER:[],UAP_AP:[],EVENT_REPORT_DOMAIN:[],EVENT_REPORT_BACKUP_DOMAIN:[],LOG_UPLOAD_SERVER:[],PROXY_SERVER_TYPE3:[]};return n.map(o=>{const s=GT[o],l=Object.keys(s);l&&l.map(d=>{d!=="CODE"&&(r[d]=r[d].concat(s[d]))})}),r},ab={GLOBAL:{ASIA:[nn.CHINA,nn.JAPAN,nn.INDIA,nn.KOREA,nn.HKMC],EUROPE:[],NORTH_AMERICA:[nn.US],SOUTH_AMERICA:[],OCEANIA:[],AFRICA:[]}},DN=Object.keys(ab[nn.GLOBAL]),iF=[nn.CHINA,nn.NORTH_AMERICA,nn.EUROPE,nn.ASIA,nn.JAPAN,nn.INDIA,nn.OCEANIA,nn.SOUTH_AMERICA,nn.AFRICA,nn.KOREA,nn.HKMC,nn.US],zY=function(n,r){let o=[];if(n.includes(nn.GLOBAL)){const d=[nn.GLOBAL,nn.OVERSEA],p=Object.keys(GT);if(r===nn.GLOBAL)throw new re(q.INVALID_PARAMS,"GLOBAL is an invalid excludedArea value");if(r===nn.CHINA)o=[nn.OVERSEA];else if(l=r,DN.includes(l)){const _=(s=r,ab[nn.GLOBAL][s]||[]),S=[...d,r,..._];o=p.filter(I=>!S.includes(I))}else if(function(_){let S=!1;return DN.forEach(I=>{ab[nn.GLOBAL][I].includes(_)&&(S=!0)}),S}(r)){const _=function(I){let b;return DN.forEach(A=>{ab[nn.GLOBAL][A].includes(I)&&(b=A)}),b}(r),S=[...d,_,r];o=p.filter(I=>!S.includes(I))}else o=n;o=function(_){const S=[];return iF.forEach(I=>{_.includes(I)&&S.push(I)}),S.concat(_.filter(I=>!iF.includes(I)))}(o)}else o=n;var s,l;return o};function oF(n){if(!n&&de("AREAS").includes(nn.EXTENSIONS))return j.debug("update area from ap : reset"),void LN($M,!0);if(!de("AREAS").includes(nn.GLOBAL)||!n)return;let r=GT.EXTENSIONS;r&&(r={CODE:rF(nn.EXTENSIONS),WEBCS_DOMAIN:["ap-web-1-".concat(n,".agora.io")],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-".concat(n,".ap.sd-rtn.com")],PROXY_CS:["proxy-ap-web-".concat(n,".agora.io")],CDS_AP:["cds-ap-web-1-".concat(n,".agora.io"),"cds-ap-web-2-".concat(n,".ap.sd-rtn.com")],ACCOUNT_REGISTER:["sua-ap-web-1-".concat(n,".agora.io"),"sua-ap-web-2-".concat(n,".ap.sd-rtn.com")],UAP_AP:["uap-ap-web-1-".concat(n,".agora.io"),"uap-ap-web-2-".concat(n,".ap.sd-rtn.com")],EVENT_REPORT_DOMAIN:["statscollector-1-".concat(n,".agora.io")],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-".concat(n,".agora.io")],LOG_UPLOAD_SERVER:["logservice-".concat(n,".agora.io")],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy-".concat(n,".agora.io")]},j.debug("update area from ap success: ".concat(n,",config is "),r),Dn("AREAS",[nn.EXTENSIONS],!0),Object.keys(r).map(o=>{o==="LOG_UPLOAD_SERVER"||o==="EVENT_REPORT_DOMAIN"||o==="EVENT_REPORT_BACKUP_DOMAIN"||o==="PROXY_SERVER_TYPE3"?Dn(o,r[o][0]):Dn(o,r[o])}))}function LN(n){let r=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const o=Ze.reportApiInvoke(null,{name:Fr.SET_AREA,options:n,tag:cr.TRACER});try{let s=[];if(typeof n=="string"&&(s=[n]),Array.isArray(n)&&(n.forEach(d=>{if(!_q.includes(d))throw new re(q.INVALID_PARAMS,"invalid area code")}),s=n),Object.prototype.toString.call(n)==="[object Object]"){const{areaCode:d,excludedArea:p}=n;if(!d)throw new re(q.INVALID_PARAMS,"area code is needed");let _=d;typeof d=="string"&&(_=[d]),s=p?zY(_,p):_}if(!r){if(Lf.AREAS){const d=new re(q.PROHIBITED_OPERATION,"setArea is prohibited because of config-distribute");return o.onError(d),void j.warning("setArea is prohibited because of config-distribute")}if(s.includes(nn.GLOBAL)&&de("AREAS")===nn.EXTENSIONS){const d=new re(q.PROHIBITED_OPERATION,"setArea is prohibited because of ap extensions");return o.onError(d),void j.warning("setArea is prohibited because of ap extensions")}}Dn("AREAS",s,r);const l=GY(s);Object.keys(l).map(d=>{d==="LOG_UPLOAD_SERVER"||d==="EVENT_REPORT_DOMAIN"||d==="EVENT_REPORT_BACKUP_DOMAIN"||d==="PROXY_SERVER_TYPE3"?Dn(d,l[d][0]):Dn(d,l[d])}),j.debug("set area success:",s.join(","))}catch(s){throw o.onError(s),s}o.onSuccess()}function aF(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function sF(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?aF(Object(o),!0).forEach(function(s){L(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):aF(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}let kN=1;function KY(n,r,o,s,l){kN+=1;const d={sid:o.sid,command:"convergeAllocateEdge",uid:"666",appId:o.appId,ts:Math.floor(Date.now()/1e3),seq:kN,requestId:kN,version:xs,cname:o.cname},p={service_name:r,json_body:JSON.stringify(d)};let _,S,I=n[0];return rl(async()=>{_=Date.now();const b=await gc(I,{data:p,cancelToken:s,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"}});if(S=Date.now()-_,b.code!==0){const W=new re(q.UNEXPECTED_RESPONSE,"live streaming ap error, code"+b.code,{retry:!0,responseTime:S});throw j.error(W.toString()),W}const A=JSON.parse(b.json_body);if(A.code!==200){const W=new re(q.UNEXPECTED_RESPONSE,"live streaming app center error, code: ".concat(A.code,", reason: ").concat(A.reason),{code:A.code,responseTime:S});throw j.error(W.toString()),W}if(!A.servers||A.servers.length===0){const W=new re(q.UNEXPECTED_RESPONSE,"live streaming app center empty server",{code:A.code,responseTime:S});throw j.error(W.toString()),W}const F=function(W,Z){return{addressList:W.servers.map(ee=>"wss://".concat(ee.address.replace(/\./g,"-"),".").concat(de("WORKER_DOMAIN"),":").concat(ee.wss,"?serviceName=").concat(encodeURIComponent(Z))),workerToken:W.workerToken,vid:W.vid}}(A,r);return de("LIVE_STREAMING_ADDRESS")&&(F.addressList=de("LIVE_STREAMING_ADDRESS")instanceof Array?de("LIVE_STREAMING_ADDRESS"):[de("LIVE_STREAMING_ADDRESS")]),sF(sF({},F),{},{responseTime:S})},(b,A)=>(Ze.apworkerEvent(o.sid,{success:!0,sc:200,serviceName:r,responseDetail:JSON.stringify(b.addressList),firstSuccess:A===0,responseTime:S,serverIp:n[A%n.length]}),!1),(b,A)=>(Ze.apworkerEvent(o.sid,{success:!1,sc:b.data&&b.data.code||200,serviceName:r,responseTime:S,serverIp:n[A%n.length]}),!!(b.code!==q.OPERATION_ABORTED&&b.code!==q.UNEXPECTED_RESPONSE||b.data&&b.data.retry)&&(I=n[(A+1)%n.length],!0)),l)}let MN=1;function cF(n,r,o,s){let{url:l,areaCode:d}=n;const p=Date.now();let _;const[S,I]=hF(r,d,[mi.CHOOSE_SERVER]);let b=jr.networkState;return rl(async()=>{b&&jr.networkState===vo.OFFLINE&&jr.onlineWaiter&&await Le.race([jr.onlineWaiter,ro(s&&s.maxRetryTimeout||Ur.maxRetryTimeout)]),b=jr.networkState;const{data:A,headers:F}=await gc(l,{data:S,cancelToken:o,headers:{"Content-Type":"multipart/form-data;"}},!0,!0);_=F.http3==="1"?1:-1,Ze.reportResourceTiming(l,r.sid),uF(A,l,r,p,[mi.CHOOSE_SERVER],_);const W=ON(A,mi.CHOOSE_SERVER);return dF(W),V4(W,l)},A=>(A&&Ze.joinChooseServer(r.sid,{lts:p,succ:!0,csAddr:l,opid:I,serverList:A.gatewayAddrs.map(F=>F.address),ec:null,cid:A.cid.toString(),uid:A.uid.toString(),csIp:A.csIp,unilbsServerIds:[mi.CHOOSE_SERVER].toString(),isHttp3:_}),!1),A=>A.code!==q.OPERATION_ABORTED&&(A.code===q.CAN_NOT_GET_GATEWAY_SERVER?A.data.retry:(Ze.joinChooseServer(r.sid,{lts:p,succ:!1,csAddr:l,serverList:null,opid:I,ec:A.code,csIp:A.data&&A.data.csIp,unilbsServerIds:[mi.CHOOSE_SERVER].toString(),extend:JSON.stringify({networkState:b}),isHttp3:_}),j.warning("[".concat(r.clientId,"] Choose server network error, retry"),A),!0)),s)}function lF(n,r,o,s){let l,{url:d,areaCode:p,serviceIds:_}=n;const S=Date.now(),[I,b]=hF(r,p,_);let A;return rl(async()=>{A&&jr.networkState===vo.OFFLINE&&jr.onlineWaiter&&await Le.race([jr.onlineWaiter,ro(s&&s.maxRetryTimeout||Ur.maxRetryTimeout)]),A=jr.networkState;const{data:F,headers:W}=await gc(d,{data:I,cancelToken:o,headers:{"Content-Type":"multipart/form-data;"}},!0,!0);l=W.http3==="1"?1:-1,Ze.reportResourceTiming(d,r.sid),uF(F,d,r,S,_,l);const Z=ON(F,mi.CHOOSE_SERVER),ee=ON(F,r.cloudProxyServer==="proxy5"?mi.CLOUD_PROXY_5:r.cloudProxyServer==="proxy3"||r.cloudProxyServer==="proxy4"?mi.CLOUD_PROXY:mi.CLOUD_PROXY_FALLBACK);return dF(Z),{gatewayInfo:V4(Z,d),proxyInfo:ee,url:d}},F=>(F.gatewayInfo&&Ze.joinChooseServer(r.sid,{lts:S,succ:!0,csAddr:d,serverList:F.gatewayInfo.gatewayAddrs.map(W=>W.address),ec:null,opid:b,cid:F.gatewayInfo.cid.toString(),uid:F.gatewayInfo.uid.toString(),csIp:F.gatewayInfo.csIp,unilbsServerIds:_.toString(),isHttp3:l}),F.proxyInfo&&Ze.joinWebProxyAP(r.sid,{lts:S,sucess:1,apServerAddr:d,turnServerAddrList:F.proxyInfo.addresses.map(W=>W.ip).join(","),errorCode:null,eventType:r.cloudProxyServer,unilbsServerIds:_.toString()}),!1),F=>F.code!==q.OPERATION_ABORTED&&(F.code===q.CAN_NOT_GET_GATEWAY_SERVER?F.data.retry:(Ze.joinWebProxyAP(r.sid,{lts:S,sucess:0,apServerAddr:d,turnServerAddrList:null,errorCode:F.code,eventType:r.cloudProxyServer,unilbsServerIds:_.toString(),extend:JSON.stringify({networkState:A})}),j.warning("[".concat(r.clientId,"] multi unilbs network error, retry"),F),!0)),s)}const uF=(n,r,o,s,l,d)=>{const p=[],_=S=>{S.flag===4096?Ze.joinChooseServer(o.sid,{lts:s,succ:!1,csAddr:r,opid:n.opid,serverList:null,ec:S.error.message,csIp:S.error.data&&S.error.data.csIp,unilbsServerIds:l.toString(),isHttp3:d}):S.flag!==1048576&&S.flag!==4194304&&S.flag!==4194310||Ze.joinWebProxyAP(o.sid,{lts:s,sucess:0,apServerAddr:r,turnServerAddrList:null,errorCode:S.error.code,eventType:o.cloudProxyServer,unilbsServerIds:l.toString()})};if(n.response_body.forEach(S=>{const I=S.buffer.code;if(S.uri===23&&I===0&&!S.buffer.edges_services)if(S.buffer.flag===4194310)j.warning("no edge services in ap response of proxy fallback, will not set proxy in iceServers"),S.buffer.edges_services=[];else{const b={error:new re(q.CAN_NOT_GET_GATEWAY_SERVER,"no edge services in ap response",{retry:!0,csIp:n.detail[502]}),flag:S.buffer.flag};p.push(b),_(b)}if(I!==0){const b=ib(I),A={error:new re(q.CAN_NOT_GET_GATEWAY_SERVER,b.desc,{desc:b.desc,retry:b.retry,csIp:n.detail[502]}),flag:S.buffer.flag};S.buffer.flag===4194310?j.warning(A.error.toString()):p.push(A),_(A)}}),p.length)throw j.warning("[".concat(o.clientId,"] multi unilbs ").concat(r," failed, ").concat(p.map(S=>"flag: ".concat(S.flag,", message: ").concat(S.error.message,", retry: ").concat(S.error.data.retry)).join(" | "))),new re(q.CAN_NOT_GET_GATEWAY_SERVER,p.map(S=>"flag: ".concat(S.flag,", message: ").concat(S.error.message)).join(" | "),{retry:!!p.find(S=>S.error.data.retry),csIp:n.detail[502],desc:[...new Set(p.map(S=>{var I,b;return S==null||(I=S.error)===null||I===void 0||(b=I.data)===null||b===void 0?void 0:b.desc}).filter(S=>!!S))]})},dF=n=>{var r,o,s,l;if(n.addresses&&n.addresses.length===0&&n.code===0)throw new re(q.CAN_NOT_GET_GATEWAY_SERVER,"void gateway address",{retry:!0,csIp:n.detail&&n.detail[502]});if(de("AP_AREA")&&((s=n.detail)!==null&&s!==void 0&&s[23]&&typeof((l=n.detail)===null||l===void 0?void 0:l[23])=="string"?oF(n.detail[23].toLowerCase()):oF()),(r=n.detail)!==null&&r!==void 0&&r[19]&&typeof((o=n.detail)===null||o===void 0?void 0:o[19])=="string"){const p=n.detail[19],_=p==null?void 0:p.split(";");for(let S=0;S<_.length;S++){var d;const I=el(d=_[S]).call(d);n.addresses[S]&&_&&(n.addresses[S].fingerprint=I)}}if(de("GATEWAY_ADDRESS")&&de("GATEWAY_ADDRESS").length>0){j.debug("assign gateway address to",de("GATEWAY_ADDRESS"));const p=de("GATEWAY_ADDRESS").map(_=>{var S,I;const b=(S=(I=n.addresses.find(A=>A.ip===_.ip&&A.port===_.port))===null||I===void 0?void 0:I.fingerprint)!==null&&S!==void 0?S:"";return{ip:_.ip,port:_.port,ticket:n.addresses[0]&&n.addresses[0].ticket,fingerprint:b}});n.addresses=p}},qY=(n,r)=>{if(n.response_body&&n.response_body.length){const o=n.response_body[0];if(o.buffer.code!==0){const s=ib(o.buffer.code);throw new re(q.UPDATE_TICKET_FAILED,"[".concat(o.buffer.code,"]: ").concat(s.desc),{retry:s.retry})}return o.buffer.ticket}throw j.debug("update ticket request received ap response without response body:",r),new re(q.UPDATE_TICKET_FAILED,"cannot find response body from ap response",{retry:!1})},hF=(n,r,o)=>{const s=Math.floor(Math.random()*1e12),l={appid:n.appId,client_ts:Date.now(),opid:s,sid:n.sid,request_bodies:[{uri:22,buffer:{cname:n.cname,detail:{6:n.stringUid,11:r,12:de("USE_NEW_TOKEN")?"1":void 0,22:r},key:n.token,service_ids:o,uid:n.uid||0}}]};l.request_bodies.forEach(p=>{n.multiIP&&n.multiIP.gateway_ip&&(p.buffer.detail[5]=JSON.stringify({vocs_ip:[n.multiIP.uni_lbs_ip],vos_ip:[n.multiIP.gateway_ip]}))});const d=new FormData;return d.append("request",JSON.stringify(l)),[d,s]},YY=(n,r)=>{const o=Math.floor(Math.random()*1e12),s={appid:n.appId,client_ts:Date.now(),opid:o,sid:n.sid,request_bodies:[{uri:28,buffer:{cname:n.cname,detail:{1:"",6:n.stringUid,12:"1"},token:n.token,service_ids:r,uid:n.uid||0,edges_services:n.apResponse.addresses.map(d=>({ip:d.ip,port:d.port}))}}]},l=new FormData;return l.append("request",JSON.stringify(s)),[l,o]};let c0=0;async function UN(n,r,o,s){return{gatewayInfo:await async function(d,p,_,S){let I=null;const b=[],A=async()=>{const W=de("WEBCS_DOMAIN").slice(0,de("AJAX_REQUEST_CONCURRENT")).map(te=>({url:d.proxyServer?"https://".concat(d.proxyServer,"/ap/?url=").concat(te+"/api/v2/transpond/webrtc?v=2"):"https://".concat(te,"/api/v2/transpond/webrtc?v=2"),areaCode:ob()})),Z=S.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:W.map(te=>te.url)}),ee=await WE({fragementLength:de("FRAGEMENT_LENGTH"),referenceList:W,asyncMapHandler:te=>(j.debug("[".concat(d.clientId,"] Connect to choose_server:"),te.url),cF(te,d,p,_)),allFailedhandler:te=>{throw S.recordJoinChannelService({endTs:Date.now(),status:"error",errors:te},Z),te[0]},promisesCollector:b});return S.recordJoinChannelService({endTs:Date.now(),status:"success"},Z),ee},F=async()=>{if(await ro(1e3),I!==null)return I;const W=de("WEBCS_DOMAIN_BACKUP_LIST").map(te=>({url:d.proxyServer?"https://".concat(d.proxyServer,"/ap/?url=").concat(te+"/api/v2/transpond/webrtc?v=2"):"https://".concat(te,"/api/v2/transpond/webrtc?v=2"),areaCode:ob()})),Z=S.recordJoinChannelService({endTs:void 0,startTs:Date.now(),status:"pending",service:"chooseServer",urls:W.map(te=>te.url)}),ee=await WE({fragementLength:de("FRAGEMENT_LENGTH"),referenceList:W,asyncMapHandler:te=>(j.debug("[".concat(d.clientId,"] Connect to backup choose_server:"),te.url),cF(te,d,p,_)),allFailedhandler:te=>{throw S.recordJoinChannelService({endTs:Date.now(),status:"error",errors:te},Z),te[0]},promisesCollector:b});return S.recordJoinChannelService({endTs:Date.now(),status:"success"},Z),ee};try{return I=await s0([A(),F()]),b.length&&b.forEach(W=>W.cancel&&typeof W.cancel=="function"&&W.cancel()),I}catch(W){throw W[0]}}(n,r,o,s)}}async function fF(n,r,o,s,l){const d=n.cloudProxyServer;if(d==="disabled"){if(!s)return;if(n.useLocalAccessPoint)return await UN(n,r,o,l);if(de("JOIN_WITH_FALLBACK_MEDIA_PROXY")){const{gatewayInfo:I,proxyInfo:b}=await mF(n,r,o,l);return n.turnServer&&n.turnServer.mode!=="auto"||(n.turnServer={mode:"manual",servers:b.map(A=>({turnServerURL:A.address,tcpport:A.tcpport||rs.tcpport,udpport:A.udpport||rs.udpport,username:A.username||rs.username,password:A.password||rs.password,forceturn:!1,security:!0}))}),{gatewayInfo:I}}return await UN(n,r,o,l)}const{proxyInfo:p,gatewayInfo:_}=await mF(n,r,o,l),S={gatewayInfo:_};return n.turnServer={mode:"manual",servers:p.map(I=>({turnServerURL:I.address,tcpport:d==="proxy3"?void 0:I.tcpport?I.tcpport:rs.tcpport,udpport:d==="proxy4"?void 0:I.udpport?I.udpport:rs.udpport,username:I.username||rs.username,password:I.password||rs.password,forceturn:d!=="proxy4",security:d==="proxy5"}))},j.debug("[".concat(n.clientId,"] set proxy server: ").concat(n.proxyServer,", mode: ").concat(d)),S}async function pF(n,r,o,s,l){const d=de("ACCOUNT_REGISTER").slice(0,de("AJAX_REQUEST_CONCURRENT"));let p=[];p=r.proxyServer?d.map(S=>"https://".concat(r.proxyServer,"/ap/?url=").concat(S+"/api/v1")):d.map(S=>"https://".concat(S,"/api/v1"));const _=l==null?void 0:l.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"stringUID",urls:p});try{const S=await async function(I,b,A,F,W){const Z=Date.now(),ee={sid:A.sid,opid:10,appid:A.appId,string_uid:b};let te=I[0];const Ee=await rl(()=>gc(te+"".concat(te.indexOf("?")===-1?"?":"&","action=stringuid"),{data:ee,cancelToken:F,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":72}}),(ye,Pe)=>{if(ye.code===0){if(ye.uid<=0||ye.uid>=Math.pow(2,32))throw j.error("Invalid Uint Uid ".concat(b," => ").concat(ye.uid),ye),Ze.reqUserAccount(ee.sid,{lts:Z,success:!1,serverAddr:te,stringUid:ee.string_uid,uid:ye.uid,errorCode:q.INVALID_UINT_UID_FROM_STRING_UID,extend:ee}),new re(q.INVALID_UINT_UID_FROM_STRING_UID);return Ze.reqUserAccount(ee.sid,{lts:Z,success:!0,serverAddr:te,stringUid:ee.string_uid,uid:ye.uid,errorCode:null,extend:ee}),!1}const Xe=ib(ye.code);return Xe.retry&&(te=I[(Pe+1)%I.length]),Ze.reqUserAccount(ee.sid,{lts:Z,success:!1,serverAddr:te,stringUid:ee.string_uid,uid:ye.uid,errorCode:Xe.desc,extend:ee}),Xe.retry},(ye,Pe)=>ye.code!==q.OPERATION_ABORTED&&(Ze.reqUserAccount(ee.sid,{lts:Z,success:!1,serverAddr:te,stringUid:ee.string_uid,uid:null,errorCode:ye.code,extend:ee}),te=I[(Pe+1)%I.length],!0),W);if(Ee.code!==0){const ye=ib(Ee.code);throw new re(q.UNEXPECTED_RESPONSE,ye.desc)}return Ee}(p,n,r,o,s);return l==null||l.recordJoinChannelService({status:"success",endTs:Date.now()},_),S.uid}catch(S){throw l==null||l.recordJoinChannelService({status:"error",endTs:Date.now(),errors:[S]},_),S}}async function XY(n,r,o){const s=de("CDS_AP").slice(0,de("AJAX_REQUEST_CONCURRENT")).map(_=>n.proxyServer?"https://".concat(n.proxyServer,"/ap/?url=").concat(_+"/api/v1"):"https://".concat(_,"/api/v1?action=config")).map(_=>function(S,I,b,A){const F=un(),W={flag:64,cipher_method:0,features:{device:F.name,system:F.os,system_general:navigator.userAgent,vendor:I.appId,version:xs,cname:I.cname,sid:I.sid,session_id:I.sid,detail:"",proxyServer:I.proxyServer}};return rl(()=>gc(S,{data:W,timeout:1e3,cancelToken:b,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":54}}),void 0,Z=>Z.code!==q.OPERATION_ABORTED,A)}(_,n,r,o));let l=null,d=null,p={};try{l=await s0(s)}catch(_){if(_.code===q.OPERATION_ABORTED)throw _;d=_}if(s.forEach(_=>_.cancel()),Ze.reportApiInvoke(n.sid,{name:Fr.REQUEST_CONFIG_DISTRIBUTE,options:{error:d,res:l}}).onSuccess(),l&&l.test_tags)try{p=function(_){if(!_.test_tags)return{};const S=_.test_tags,I=Object.keys(S),b={};return I.forEach(A=>{var F;const W=el(F=A.slice(4)).call(F),Z=JSON.parse(S[A])[1];b[W]=Z}),b}(l)}catch{}return p}async function mF(n,r,o,s){const l=de("PROXY_SERVER_TYPE3"),d=(W,Z,ee)=>{let te=ee||l;return Array.isArray(te)&&(te=Z%2==0?l[1]:l[0]),"https://".concat(te,"/ap/?url=").concat(W)};let p=null;const _=[],S=async()=>{const W=de("WEBCS_DOMAIN").slice(0,de("AJAX_REQUEST_CONCURRENT")).map((te,Ee)=>{let ye;return ye=n.cloudProxyServer==="disabled"&&n.proxyServer?d("".concat(te,"/api/v2/transpond/webrtc?v=2"),Ee,n.proxyServer):n.cloudProxyServer==="disabled"||n.cloudProxyServer==="fallback"?"https://".concat(te,"/api/v2/transpond/webrtc?v=2"):d("".concat(te,"/api/v2/transpond/webrtc?v=2"),Ee),{url:ye,areaCode:ob(),serviceIds:[mi.CHOOSE_SERVER,n.cloudProxyServer==="proxy5"?mi.CLOUD_PROXY_5:n.cloudProxyServer==="proxy3"||n.cloudProxyServer==="proxy4"?mi.CLOUD_PROXY:mi.CLOUD_PROXY_FALLBACK]}}),Z=s.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:W.map(te=>te.url)}),ee=await WE({fragementLength:de("FRAGEMENT_LENGTH"),referenceList:W,asyncMapHandler:te=>(j.debug("[".concat(n.clientId,"] Connect to choose_server:"),te.url),lF(te,n,r,o)),allFailedhandler:te=>{throw s.recordJoinChannelService({endTs:Date.now(),status:"error",errors:te},Z),te[0]},promisesCollector:_});return s.recordJoinChannelService({endTs:Date.now(),status:"success"},Z),ee},I=async()=>{if(await ro(1e3),p!==null)return p;const W=de("WEBCS_DOMAIN_BACKUP_LIST").map((te,Ee)=>{let ye;return ye=n.cloudProxyServer==="disabled"&&n.proxyServer?d("".concat(te,"/api/v2/transpond/webrtc?v=2"),Ee,n.proxyServer):n.cloudProxyServer==="disabled"||n.cloudProxyServer==="fallback"?"https://".concat(te,"/api/v2/transpond/webrtc?v=2"):d("".concat(te,"/api/v2/transpond/webrtc?v=2"),Ee),{url:ye,areaCode:ob(),serviceIds:[mi.CHOOSE_SERVER,n.cloudProxyServer==="proxy5"?mi.CLOUD_PROXY_5:n.cloudProxyServer==="proxy3"||n.cloudProxyServer==="proxy4"?mi.CLOUD_PROXY:mi.CLOUD_PROXY_FALLBACK]}}),Z=s.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:W.map(te=>te.url)}),ee=await WE({fragementLength:de("FRAGEMENT_LENGTH"),referenceList:W,asyncMapHandler:te=>(j.debug("[".concat(n.clientId,"] Connect to backup choose_server:"),te.url),lF(te,n,r,o)),allFailedhandler:te=>{throw s.recordJoinChannelService({endTs:Date.now(),status:"error",errors:te},Z),te[0]},promisesCollector:_});return s.recordJoinChannelService({endTs:Date.now(),status:"success"},Z),ee};let b,A,F;try{({gatewayInfo:b,proxyInfo:A,url:F}=await s0([S(),I()]))}catch(W){throw W[0]}if(_.length&&_.forEach(W=>W.cancel&&typeof W.cancel=="function"&&W.cancel()),!b||!A)throw new re(q.UNEXPECTED_ERROR,"missing gateway or proxy response").print();if(n.apUrl=F,n.cloudProxyServer!=="disabled"&&Array.isArray(l)&&F){const W=/^https?:\/\/(.+?)(\/.*)?$/.exec(F)[1];l.includes(W)&&(n.proxyServer=W,j.setProxyServer(W),Ze.setProxyServer(W))}return p={gatewayInfo:b,proxyInfo:await UY(A,b.uid)},p}async function gF(n,r,o,s){const l=de("UAP_AP").slice(0,de("AJAX_REQUEST_CONCURRENT")).map(d=>r.proxyServer?"https://".concat(r.proxyServer,"/ap/?url=").concat(d+"/api/v1?action=uap"):"https://".concat(d,"/api/v1?action=uap"));return await KY(l,n,r,o,s)}async function JY(n,r,o){const s=de("UAP_AP").slice(0,de("AJAX_REQUEST_CONCURRENT")).map(l=>n.proxyServer?"https://".concat(n.proxyServer,"/ap/?url=").concat(l+"/api/v1?action=uap"):"https://".concat(l,"/api/v1?action=uap")).map(l=>function(d,p,_,S){const I={command:"convergeAllocateEdge",sid:p.sid,appId:p.appId,token:p.token,ts:Date.now(),version:xs,cname:p.cname,uid:p.uid.toString(),requestId:MN,seq:MN};MN+=1;const b={service_name:"tele_channel",json_body:JSON.stringify(I)};return rl(async()=>{const A=await gc(d,{data:b,cancelToken:_,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":61}});if(A.code!==0){const W=new re(q.UNEXPECTED_RESPONSE,"cross channel ap error, code"+A.code,{retry:!0});throw j.error(W.toString()),W}const F=JSON.parse(A.json_body);if(F.code!==200){const W=new re(q.UNEXPECTED_RESPONSE,"cross channel app center error, code: ".concat(F.code,", reason: ").concat(F.reason));throw j.error(W.toString()),W}if(!F.servers||F.servers.length===0){const W=new re(q.UNEXPECTED_RESPONSE,"cross channel app center empty server");throw j.error(W.toString()),W}return{vid:F.vid,workerToken:F.workerToken,addressList:(de("CHANNEL_MEDIA_RELAY_SERVERS")||F.servers).map(W=>"wss://".concat(W.address.replace(/\./g,"-"),".").concat(de("WORKER_DOMAIN"),":").concat(W.wss))}},void 0,A=>!!(A.code!==q.OPERATION_ABORTED&&A.code!==q.UNEXPECTED_RESPONSE||A.data&&A.data.retry),S)}(l,n,r,o));try{const l=await s0(s);return s.forEach(d=>d.cancel()),l}catch(l){throw l[0]}}async function QY(n,r,o){let s=null;const l=[],d=async p=>{const _=de(p?"WEBCS_DOMAIN_BACKUP_LIST":"WEBCS_DOMAIN").map(S=>n.proxyServer?"https://".concat(n.proxyServer,"/ap/?url=").concat(S+"/api/v2/transpond/webrtc?v=2"):"https://".concat(S,"/api/v2/transpond/webrtc?v=2"));return p&&(await ro(1e3),s!==null)?s:await WE({fragementLength:de("FRAGEMENT_LENGTH"),referenceList:_,asyncMapHandler:S=>(j.debug("[".concat(n.clientId,"] update ticket, Connect to ").concat(p?"backup":""," choose_server:"),S),function(I,b,A,F){const[W]=YY(b,[mi.CHOOSE_SERVER]);let Z=jr.networkState;return rl(async()=>{Z&&jr.networkState===vo.OFFLINE&&jr.onlineWaiter&&await Le.race([jr.onlineWaiter,ro(F&&F.maxRetryTimeout||Ur.maxRetryTimeout)]),Z=jr.networkState;const ee=await gc(I,{data:W,cancelToken:A,headers:{"Content-Type":"multipart/form-data;"}},!0);return qY(ee,I)},()=>!1,ee=>ee.code!==q.OPERATION_ABORTED&&(ee.code===q.UPDATE_TICKET_FAILED?ee.data.retry:(j.warning("[".concat(b.clientId,"] update ticket network error, retry"),ee),!0)),F)}(S,n,r,o)),allFailedhandler:S=>{throw S[0]},promisesCollector:l})};try{return s=await s0([d(!1),d(!0)]),l.length&&l.forEach(p=>p.cancel&&typeof p.cancel=="function"&&p.cancel()),s}catch(p){throw p[0]}}function vF(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function EF(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?vF(Object(o),!0).forEach(function(s){L(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):vF(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}class ZY extends ur{constructor(){super(),L(this,"configs",void 0),L(this,"joinInfo",void 0),L(this,"cancelToken",void 0),L(this,"retryConfig",{timeout:3e3,timeoutFactor:1.5,maxRetryCount:1,maxRetryTimeout:1e4}),L(this,"interval",void 0),L(this,"mutex",new xo("config-distribute")),L(this,"mutableParamsRead",!1)}startGetConfigDistribute(r,o){this.joinInfo=r,this.cancelToken=o,this.interval&&this.stopGetConfigDistribute(),de("ENABLE_CONFIG_DISTRIBUTE")&&(this.updateConfigDistribute(),this.interval=window.setInterval(()=>{this.updateConfigDistribute()},de("CONFIG_DISTRIBUTE_INTERVAL")))}stopGetConfigDistribute(){this.interval&&clearInterval(this.interval),this.interval=void 0,this.joinInfo=void 0,this.cancelToken=void 0}async awaitConfigDistributeComplete(){this.mutex.isLocked&&(await this.mutex.lock())()}async updateConfigDistribute(){if(this.mutableParamsRead||(this.mutableParamsRead=!0,Ze.reportApiInvoke(null,{options:void 0,name:Fr.LOAD_CONFIG_FROM_LOCALSTORAGE,tag:cr.TRACER}).onSuccess(JSON.stringify(Lf))),!this.joinInfo||!this.cancelToken||!this.retryConfig)return void j.debug("[config-distribute] get config distribute interrupted have no joininfo");let r;const o=await this.mutex.lock();try{r=await XY(this.joinInfo,this.cancelToken,this.retryConfig),j.debug("[config-distribute] get config distribute",JSON.stringify(r)),r.limit_bitrate&&this.handleBitrateLimit(r.limit_bitrate),this.cacheGlobalParameterConfig(r),this.configs=r}catch(s){const l=new re(q.NETWORK_RESPONSE_ERROR,s);j.warning("[config-distribute] ".concat(l.toString()))}finally{o()}}getBitrateLimit(){return this.configs?this.configs.limit_bitrate:void 0}handleBitrateLimit(r){var o;(o=r)&&o.uplink&&o.id&&o.uplink.max_bitrate!==void 0&&o.uplink.min_bitrate!==void 0&&(this.configs&&this.configs.limit_bitrate?this.configs&&this.configs.limit_bitrate&&this.configs.limit_bitrate.id!==r.id&&this.emit(BE.UPDATE_BITRATE_LIMIT,r):this.emit(BE.UPDATE_BITRATE_LIMIT,r))}getLowStreamConfigDistribute(){return this.configs&&this.configs.limit_bitrate&&EF({},this.configs.limit_bitrate.low_stream_uplink)}cacheGlobalParameterConfig(r){var o;const s=ZA(o=Object.keys(r).filter(d=>/^webrtc_ng_global_parameter/.test(d))).call(o);for(let d=0;d<s.length;d++)for(let p=s.length-1;p>d;p--){const _=s[p];if(typeof r[_].__priority=="number"){const S=r[_].__priority,I=s[p-1];if(typeof r[I].__priority=="number"){if(!(S>r[I].__priority))continue;{const b=_;s[p]=s[p-1],s[p-1]=b}}else{const b=_;s[p]=s[p-1],s[p-1]=b}}}const l={};s.forEach(d=>{const p=r[d],_=p.__expires;Object.keys(p).forEach(S=>{S==="__priority"||S==="__expires"||Object.prototype.hasOwnProperty.call(l,S)||(l[S]=EF({value:p[S]},_&&{expires:_}))})});try{const d=JSON.stringify(l),p=window.btoa(d);window.localStorage.setItem("websdk_ng_global_parameter",p),j.debug("Caching global parameters ".concat(d))}catch(d){j.error("Error caching global parameters:",d.message)}}}function _F(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function zE(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?_F(Object(o),!0).forEach(function(s){L(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):_F(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}class eX extends ur{constructor(r,o,s,l){super(),L(this,"spec",void 0),L(this,"token",void 0),L(this,"websocket",void 0),L(this,"pingpongTimer",void 0),L(this,"reconnectMode","retry"),L(this,"serviceMode",void 0),L(this,"reqId",0),L(this,"commandReqId",0),L(this,"handleWebSocketOpen",()=>{this.reconnectMode="retry",this.startPingPong()}),L(this,"handleWebSocketMessage",d=>{if(!d.data)return;const p=JSON.parse(d.data);p.requestId?this.emit("@".concat(p.requestId,"-").concat(p.sid),p):this.serviceMode===Yr.INJECT?this.emit(mc.INJECT_STREAM_STATUS,p):(Ze.workerEvent(this.spec.sid,{actionType:"status",serverCode:p.code,workerType:this.serviceMode===Yr.TRANSCODE?1:2}),this.emit(mc.PUBLISH_STREAM_STATUS,p))}),this.spec=o,this.token=r,this.serviceMode=l,this.websocket=new Hf("live-streaming",s),this.websocket.on(bt.CONNECTED,this.handleWebSocketOpen),this.websocket.on(bt.ON_MESSAGE,this.handleWebSocketMessage),this.websocket.on(bt.REQUEST_NEW_URLS,(d,p)=>{io(this,mc.REQUEST_NEW_ADDRESS).then(d).catch(p)}),this.websocket.on(bt.RECONNECTING,()=>{this.websocket.reconnectMode=this.reconnectMode})}init(r){return this.websocket.init(r)}async request(r,o,s,l){this.reqId+=1,r==="request"&&(this.commandReqId+=1);const d=this.commandReqId,p=this.reqId;if(!p||!this.websocket)throw new re(q.UNEXPECTED_ERROR);const _=zE({command:r,sdkVersion:xs==="4.18.2"?"0.0.1":xs,seq:p,requestId:p,allocate:s,cname:this.spec.cname,appId:this.spec.appId,sid:this.spec.sid,uid:this.spec.uid.toString(),ts:Math.floor(Date.now()/1e3)},o);if(this.websocket.state==="closed")throw new re(q.WS_DISCONNECT);const S=()=>new Le((F,W)=>{this.websocket.once(bt.CLOSED,()=>W(new re(q.WS_ABORT))),this.websocket.once(bt.CONNECTED,F)});this.websocket.state!=="connected"&&await S(),_.clientRequest&&(_.clientRequest.workerToken=this.token);const I=new Le((F,W)=>{const Z=()=>{W(new re(q.WS_ABORT))};this.websocket.once(bt.RECONNECTING,Z),this.websocket.once(bt.CLOSED,Z),this.once("@".concat(p,"-").concat(this.spec.sid),ee=>{F(ee)})});l&&Ze.workerEvent(this.spec.sid,zE(zE({},l),{},{requestId:d,actionType:"request",payload:JSON.stringify(o.clientRequest),serverCode:0,code:0}));const b=Date.now();this.websocket.sendMessage(_);let A=null;try{A=await I}catch(F){if(this.websocket.state==="closed")throw F;return await S(),await this.request(r,o,s)}return l&&Ze.workerEvent(this.spec.sid,zE(zE({},l),{},{requestId:d,actionType:"response",payload:JSON.stringify(A.serverResponse),serverCode:A.code,success:A.code===200,responseTime:Date.now()-b})),A.code!==200&&this.handleResponseError(A),A}tryNextAddress(){this.reconnectMode="tryNext",this.websocket.reconnect("tryNext")}close(){const r=xs==="4.18.2"?"0.0.1":xs;this.reqId+=1,this.websocket.state==="connected"?(this.websocket.sendMessage({command:"request",appId:this.spec.appId,cname:this.spec.cname,uid:this.spec.uid.toString(),sdkVersion:r,sid:this.spec.sid,seq:this.reqId,ts:Math.floor(Date.now()/1e3),requestId:this.reqId,clientRequest:{command:"DestroyWorker"}}),this.websocket.close(!1,!0)):this.websocket.close(!1),this.pingpongTimer&&(window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0)}handleResponseError(r){switch(r.code){case br.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM:return void j.warning("live stream response already exists stream");case br.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR:case br.LIVE_STREAM_RESPONSE_BAD_STREAM:case br.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR:return new re(q.LIVE_STREAMING_INVALID_ARGUMENT,"",{code:r.code}).throw();case br.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST:if(r.serverResponse.command==="UnpublishStream"||r.serverResponse.command==="UninjectStream")return;throw new re(q.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case br.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED:return new re(q.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED,"",{code:r.code}).throw();case br.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:{const o=new re(q.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE);return this.emit(mc.WARNING,o,r.serverResponse.url)}case br.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN:{const o=new re(q.LIVE_STREAMING_WARN_FREQUENT_REQUEST);return this.emit(mc.WARNING,o,r.serverResponse.url)}case br.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH:throw new re(q.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case br.LIVE_STREAM_RESPONSE_NOT_SUPPORTED:return new re(q.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED,"",{code:r.code}).throw();case br.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM:{const o=new re(q.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT);return this.emit(mc.WARNING,o,r.serverResponse.url)}case br.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR:return new re(q.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:r.code}).throw();case br.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT:throw new re(q.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream resource limit",{retry:!0,changeAddress:!0});case br.LIVE_STREAM_RESPONSE_WORKER_LOST:case br.LIVE_STREAM_RESPONSE_WORKER_QUIT:if(r.serverResponse.command==="UnpublishStream"||r.serverResponse.command==="UninjectStream")return;throw new re(q.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case br.ERROR_FAIL_SEND_MESSAGE:if(r.serverResponse.command==="UnpublishStream"||r.serverResponse.command==="UninjectStream")return;if(r.serverResponse.command==="UpdateTranscoding"||r.serverResponse.command==="ControlStream")return new re(q.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{code:r.code}).throw();throw new re(q.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case br.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case br.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case br.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case br.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:return new re(q.LIVE_STREAMING_CDN_ERROR,"",{code:r.code}).throw()}}startPingPong(){this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(()=>{this.websocket.state==="connected"&&this.request("ping",{}).catch(nb)},6e3)}}function SF(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function zo(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?SF(Object(o),!0).forEach(function(s){L(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):SF(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}class tX extends ur{constructor(r){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ur,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ur;super(),L(this,"onLiveStreamWarning",void 0),L(this,"onLiveStreamError",void 0),L(this,"onInjectStatusChange",void 0),L(this,"spec",void 0),L(this,"retryTimeout",1e4),L(this,"connection",void 0),L(this,"httpRetryConfig",void 0),L(this,"wsRetryConfig",void 0),L(this,"streamingTasks",new Map),L(this,"isStartingStreamingTask",!1),L(this,"taskMutex",new xo("live-streaming")),L(this,"cancelToken",ns.CancelToken.source()),L(this,"transcodingConfig",void 0),L(this,"injectConfig",zo({},Eq)),L(this,"injectLoopTimes",0),L(this,"uapResponse",void 0),L(this,"lastTaskId",1),L(this,"statusError",new Map),this.spec=r,this.httpRetryConfig=s,this.wsRetryConfig=o}async setTranscodingConfig(r){const o=zo(zo({},vq),r);o.videoCodecProfile!==66&&o.videoCodecProfile!==77&&o.videoCodecProfile!==100&&(j.debug("[".concat(this.spec.clientId,"] set transcoding config, fix video codec profile: ").concat(o.videoCodecProfile," -> 100")),o.videoCodecProfile=100),o.transcodingUsers||(o.transcodingUsers=o.userConfigs),o.transcodingUsers&&(o.transcodingUsers=o.transcodingUsers.map(p=>zo(zo(zo({},gq),p),{},{zOrder:p.zOrder?p.zOrder+1:1}))),function(p){rr(p.width)||Vn(p.width,"config.width",0,1e4),rr(p.height)||Vn(p.height,"config.height",0,1e4),rr(p.videoBitrate)||Vn(p.videoBitrate,"config.videoBitrate",1,1e6),rr(p.videoFrameRate)||Vn(p.videoFrameRate,"config.videoFrameRate"),rr(p.lowLatency)||Xm(p.lowLatency,"config.lowLatency"),rr(p.audioSampleRate)||Si(p.audioSampleRate,"config.audioSampleRate",[32e3,44100,48e3]),rr(p.audioBitrate)||Vn(p.audioBitrate,"config.audioBitrate",1,128),rr(p.audioChannels)||Si(p.audioChannels,"config.audioChannels",[1,2,3,4,5]),rr(p.videoGop)||Vn(p.videoGop,"config.videoGop"),rr(p.videoCodecProfile)||Si(p.videoCodecProfile,"config.videoCodecProfile",[66,77,100]),rr(p.userCount)||Vn(p.userCount,"config.userCount",0,17),rr(p.backgroundColor)||Vn(p.backgroundColor,"config.backgroundColor",0,16777215),rr(p.userConfigExtraInfo)||Ji(p.userConfigExtraInfo,"config.userConfigExtraInfo",0,4096,!1),p.transcodingUsers&&!rr(p.transcodingUsers)&&($u(p.transcodingUsers,"config.transcodingUsers"),p.transcodingUsers.forEach((_,S)=>{nN(_.uid),rr(_.x)||Vn(_.x,"transcodingUser[".concat(S,"].x"),0,1e4),rr(_.y)||Vn(_.y,"transcodingUser[".concat(S,"].y"),0,1e4),rr(_.width)||Vn(_.width,"transcodingUser[".concat(S,"].width"),0,1e4),rr(_.height)||Vn(_.height,"transcodingUser[".concat(S,"].height"),0,1e4),rr(_.zOrder)||Vn(_.zOrder-1,"transcodingUser[".concat(S,"].zOrder"),0,100),rr(_.alpha)||Vn(_.alpha,"transcodingUser[".concat(S,"].alpha"),0,1,!1)})),rr(p.watermark)||lN(p.watermark,"watermark"),rr(p.backgroundImage)||lN(p.backgroundImage,"backgroundImage"),p.images&&!rr(p.images)&&($u(p.images,"config.images"),p.images.forEach((_,S)=>{lN(_,"images[".concat(S,"]"))}))}(o);const s=[];o.images&&s.push(...o.images.map(p=>zo(zo(zo({},cN),p),{},{zOrder:255}))),o.backgroundImage&&(s.push(zo(zo(zo({},cN),o.backgroundImage),{},{zOrder:0})),delete o.backgroundImage),o.watermark&&(s.push(zo(zo(zo({},cN),o.watermark),{},{zOrder:255})),delete o.watermark),o.images=s,o.transcodingUsers&&(o.userConfigs=o.transcodingUsers.map(p=>zo({},p)),o.userCount=o.transcodingUsers.length,delete o.transcodingUsers);const l=(o.userConfigs||[]).map(p=>typeof p.uid=="number"?Le.resolve(p.uid):pF(p.uid,this.spec,this.cancelToken.token,this.httpRetryConfig));if((await Le.all(l)).forEach((p,_)=>{o.userConfigs&&o.userConfigs[_]&&(o.userConfigs[_].uid=p)}),this.transcodingConfig=o,this.connection)try{var d;const p=await this.connection.request("request",{clientRequest:{command:"UpdateTranscoding",transcodingConfig:this.transcodingConfig}},!1,{command:"UpdateTranscoding",workerType:1,requestByUser:!0,tid:Array.from(lu(d=this.streamingTasks).call(d)).map(_=>_.taskId).join("#")});j.debug("[".concat(this.spec.clientId,"] update live transcoding config success, code: ").concat(p.code,", config:"),JSON.stringify(this.transcodingConfig))}catch(p){if(!p.data||!p.data.retry)throw p;p.data.changeAddress&&this.connection.tryNextAddress(),this.streamingTasks.forEach(_=>{j.warning("[".concat(this.spec.clientId,"] live streaming receive error"),p.toString(),"try to republish",_.url),this.startLiveStreamingTask(_.url,_.mode,p).then(()=>{j.debug("[".concat(this.spec.clientId,"] live streaming republish ").concat(_.url," success"))}).catch(S=>{j.error("[".concat(this.spec.clientId,"] live streaming republish failed"),_.url,S.toString()),this.onLiveStreamError&&this.onLiveStreamError(_.url,S)})})}}setInjectStreamConfig(r,o){this.injectConfig=Object.assign({},this.injectConfig,r),this.injectLoopTimes=o}async startLiveStreamingTask(r,o,s){var l;if(Array.from(lu(l=this.streamingTasks).call(l)).find(S=>S.mode===Yr.INJECT)&&o===Yr.INJECT)return new re(q.LIVE_STREAMING_TASK_CONFLICT,"inject stream over limit").throw();if(!this.transcodingConfig&&o===Yr.TRANSCODE)throw new re(q.INVALID_OPERATION,"[LiveStreaming] no transcoding config found, can not start transcoding streaming task");let d={command:"PublishStream",ts:Date.now(),url:r,uid:this.spec.uid.toString(),autoDestroyTime:100,acceptImageTimeout:!0};j.debug("[".concat(this.spec.clientId,"] start live streaming ").concat(r,", mode: ").concat(o));const p=await this.taskMutex.lock();if(!this.connection&&s)return void p();if(this.streamingTasks.get(r)&&!s)return p(),new re(q.LIVE_STREAMING_TASK_CONFLICT).throw();try{this.connection||(this.connection=await this.connect(o))}catch(S){throw p(),S}switch(o){case Yr.TRANSCODE:d.transcodingConfig=zo({},this.transcodingConfig);break;case Yr.RAW:break;case Yr.INJECT:d={cname:this.spec.cname,command:"InjectStream",sid:this.spec.sid,transcodingConfig:this.injectConfig,ts:Date.now(),url:r,loopTimes:this.injectLoopTimes}}this.uapResponse&&this.uapResponse.vid&&(d.vid=this.uapResponse.vid),this.isStartingStreamingTask=!0;const _=this.lastTaskId++;try{const S=new Le((b,A)=>{ro(this.retryTimeout).then(()=>{if(s)return A(s);const F=this.statusError.get(r);return F?(this.statusError.delete(r),A(F)):void 0})}),I=await Le.race([this.connection.request("request",{clientRequest:d},!0,{url:r,command:"PublishStream",workerType:o===Yr.TRANSCODE?1:2,requestByUser:!s,tid:_.toString()}),S]);this.isStartingStreamingTask=!1,j.debug("[".concat(this.spec.clientId,"] live streaming started, code: ").concat(I.code)),this.streamingTasks.set(r,{clientRequest:d,mode:o,url:r,taskId:_}),p()}catch(S){if(p(),this.isStartingStreamingTask=!1,!S.data||!S.data.retry||s)throw S;return S.data.changeAddress?(this.connection.tryNextAddress(),await this.startLiveStreamingTask(r,o,S)):await this.startLiveStreamingTask(r,o,S)}}stopLiveStreamingTask(r){return new Le((o,s)=>{const l=this.streamingTasks.get(r);if(!l||!this.connection)return new re(q.UNEXPECTED_ERROR,"can not find streaming task to stop").throw();const d=l.mode;l.abortTask=()=>{j.debug("[".concat(this.spec.clientId,"] stop live streaming success(worker exception)")),this.streamingTasks.delete(r),o()},this.connection.request("request",{clientRequest:{command:d===Yr.INJECT?"UninjectStream":"UnpublishStream",url:l.url}},!1,{url:r,command:"UnPublishStream",workerType:d===Yr.TRANSCODE?1:2,requestByUser:!0,tid:(this.lastTaskId++).toString()}).then(p=>{j.debug("[".concat(this.spec.clientId,"] stop live streaming success, code: ").concat(p.code)),this.streamingTasks.delete(r),this.streamingTasks.size===0&&d!==Yr.INJECT&&(this.connection&&this.connection.close(),this.connection=void 0),o(),d===Yr.INJECT&&this.onInjectStatusChange&&this.onInjectStatusChange(Zd.INJECT_STREAM_STATUS_STOP_SUCCESS,this.spec.uid,r)}).catch(s)})}async controlInjectStream(r,o,s,l){const d=this.streamingTasks.get(r);if(!d||!this.connection||d.mode!==Yr.INJECT)throw new re(q.INVALID_OPERATION,"can not find inject stream task to control");return(await this.connection.request("request",{clientRequest:{command:"ControlStream",url:r,control:o,audioVolume:s,position:l}})).serverResponse}resetAllTask(){var r;const o=Array.from(lu(r=this.streamingTasks).call(r));this.terminate();for(const s of o)this.startLiveStreamingTask(s.url,s.mode).catch(l=>{this.onLiveStreamError&&this.onLiveStreamError(s.url,l)})}terminate(){this.cancelToken&&this.cancelToken.cancel(),this.streamingTasks=new Map,this.isStartingStreamingTask=!1,this.statusError=new Map,this.cancelToken=ns.CancelToken.source(),this.uapResponse=void 0,this.connection&&this.connection.close(),this.connection=void 0}async connect(r){if(this.connection)throw new re(q.UNEXPECTED_ERROR,"live streaming connection has already connected");const o=await io(this,Qm.REQUEST_WORKER_MANAGER_LIST,r);return this.uapResponse=o,this.connection=new eX(o.workerToken,this.spec,this.wsRetryConfig,r),this.connection.on(mc.WARNING,(s,l)=>this.onLiveStreamWarning&&this.onLiveStreamWarning(l,s)),this.connection.on(mc.PUBLISH_STREAM_STATUS,s=>this.handlePublishStreamServer(s)),this.connection.on(mc.INJECT_STREAM_STATUS,s=>this.handleInjectStreamServerStatus(s)),this.connection.on(mc.REQUEST_NEW_ADDRESS,(s,l)=>{if(!this.connection)return l(new re(q.UNEXPECTED_ERROR,"can not get new live streaming address list"));io(this,Qm.REQUEST_WORKER_MANAGER_LIST,r).then(d=>{this.uapResponse=d,s(d.addressList)}).catch(l)}),await this.connection.init(o.addressList),this.connection}handlePublishStreamServer(r){const o=r.serverStatus&&r.serverStatus.url||"empty_url",s=this.streamingTasks.get(o),l=r.reason;switch(r.code){case br.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case br.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case br.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case br.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:{const p=new re(q.LIVE_STREAMING_CDN_ERROR,"",{code:r.code});if(s)return j.error(p.toString()),this.onLiveStreamError&&this.onLiveStreamError(o,p);if(!this.isStartingStreamingTask)return;this.statusError.set(o,p)}case br.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:{const p=new re(q.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE,l);return this.onLiveStreamWarning&&this.onLiveStreamWarning(o,p)}case br.LIVE_STREAM_RESPONSE_WORKER_LOST:case br.LIVE_STREAM_RESPONSE_WORKER_QUIT:{var d;if(!this.connection)return;this.connection.tryNextAddress();const p=Array.from(lu(d=this.streamingTasks).call(d));for(const _ of p)_.abortTask?_.abortTask():(j.warning("[".concat(this.spec.clientId,"] publish stream status code"),r.code,"try to republish",_.url),this.startLiveStreamingTask(_.url,_.mode,new re(q.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:r.code})).then(()=>{j.debug("[".concat(this.spec.clientId,"] republish live stream success"),_.url)}).catch(S=>{j.error(S.toString()),this.onLiveStreamError&&this.onLiveStreamError(_.url,S)}));return}}}handleInjectStreamServerStatus(r){const o=Number(r.uid),s=r.serverStatus&&r.serverStatus.url;switch(r.code){case 200:return void(this.onInjectStatusChange&&this.onInjectStatusChange(Zd.INJECT_STREAM_STATUS_START_SUCCESS,o,s));case 451:return this.onInjectStatusChange&&this.onInjectStatusChange(Zd.INJECT_STREAM_STATUS_START_ALREADY_EXISTS,o,s),void this.streamingTasks.delete(s);case 453:return this.onInjectStatusChange&&this.onInjectStatusChange(Zd.INJECT_STREAM_STATUS_START_UNAUTHORIZED,o,s),void this.streamingTasks.delete(s);case 470:return this.onInjectStatusChange&&this.onInjectStatusChange(Zd.INJECT_STREAM_STATUS_BROKEN,o,s),void this.streamingTasks.delete(s);case 499:return this.onInjectStatusChange&&this.onInjectStatusChange(Zd.INJECT_STREAM_STATUS_START_TIMEOUT,o,s),void this.streamingTasks.delete(s);default:return void j.debug("inject stream server status",r)}}hasUrl(r){return this.streamingTasks.has(r)}}class yF{constructor(){L(this,"destChannelMediaInfos",new Map),L(this,"srcChannelMediaInfo",void 0)}setSrcChannelInfo(r){hU(r),this.srcChannelMediaInfo=r}addDestChannelInfo(r){hU(r),this.destChannelMediaInfos.set(r.channelName,r)}removeDestChannelInfo(r){tN(r),this.destChannelMediaInfos.delete(r)}getSrcChannelMediaInfo(){return this.srcChannelMediaInfo}getDestChannelMediaInfo(){return this.destChannelMediaInfos}}function CF(n){if(!(n instanceof yF))return new re(q.INVALID_PARAMS,"Config should be instance of [ChannelMediaRelayConfiguration]").throw();const r=n.getSrcChannelMediaInfo(),o=n.getDestChannelMediaInfo();if(!r)return new re(q.INVALID_PARAMS,"srcChannelMediaInfo should not be empty").throw();if(o.size===0)return new re(q.INVALID_PARAMS,"destChannelMediaInfo should not be empty").throw()}class nX extends ur{constructor(r,o,s){super(),L(this,"ws",void 0),L(this,"requestId",1),L(this,"heartBeatTimer",void 0),L(this,"joinInfo",void 0),L(this,"clientId",void 0),L(this,"onOpen",()=>{this.emit("open"),this.startHeartBeatCheck()}),L(this,"onClose",l=>{this.emit("close"),this.dispose()}),L(this,"onMessage",l=>{const d=JSON.parse(l.data);if(!d||d.command!=="serverResponse"||!d.requestId)return d&&d.command==="serverStatus"&&d.serverStatus&&d.serverStatus.command?(this.emit("status",d.serverStatus),void this.emit(d.serverStatus.command,d.serverStatus)):void 0;this.emit("req_".concat(d.requestId),d)}),this.joinInfo=r,this.clientId=o,this.ws=new Hf("cross-channel-".concat(this.clientId),s),this.ws.on(bt.RECONNECTING,()=>{this.ws.reconnectMode="retry",this.emit("reconnecting")}),this.ws.on(bt.CONNECTED,this.onOpen),this.ws.on(bt.ON_MESSAGE,this.onMessage),this.ws.on(bt.CLOSED,this.onClose)}isConnect(){return this.ws.state==="connected"}sendMessage(r){const o=this.requestId++;return r.requestId=o,r.seq=o,this.ws.sendMessage(r),o}waitStatus(r){return new Le((o,s)=>{const l=window.setTimeout(()=>{s(new re(q.TIMEOUT,"wait status timeout, status: ".concat(r)))},5e3);this.once(r,d=>{window.clearTimeout(l),d.state&&d.state!==0?s(new re(q.CROSS_CHANNEL_WAIT_STATUS_ERROR,"wait status error, status: ".concat(r))):o(void 0)}),this.once("dispose",()=>{window.clearTimeout(l),s(new re(q.WS_ABORT))})})}async request(r){if(this.ws.state==="closed")throw new re(q.WS_DISCONNECT);const o=()=>new Le((p,_)=>{this.ws.once(bt.CLOSED,()=>_(new re(q.WS_ABORT))),this.ws.once(bt.CONNECTED,p)});this.ws.state!=="connected"&&await o();const s=this.sendMessage(r),l=new Le((p,_)=>{const S=()=>{_(new re(q.WS_ABORT))};this.ws.once(bt.RECONNECTING,S),this.ws.once(bt.CLOSED,S),this.once("req_".concat(s),p),ro(3e3).then(()=>{this.removeAllListeners("req_".concat(s)),this.ws.off(bt.RECONNECTING,S),this.ws.off(bt.CLOSED,S),_(new re(q.TIMEOUT,"cross channel ws request timeout"))})}),d=await l;if(!d||d.code!==200)throw new re(q.CROSS_CHANNEL_SERVER_ERROR_RESPONSE,"response: ".concat(JSON.stringify(d)));return d}async connect(r){this.ws.removeAllListeners(bt.REQUEST_NEW_URLS),this.ws.on(bt.REQUEST_NEW_URLS,o=>{o(r)}),await this.ws.init(r)}dispose(){this.clearHeartBeatCheck(),this.emit("dispose"),this.removeAllListeners(),this.ws.close()}sendPing(r){const o=this.requestId++;return r.requestId=o,this.ws.sendMessage(r),o}startHeartBeatCheck(){this.heartBeatTimer&&window.clearInterval(this.heartBeatTimer),this.heartBeatTimer=window.setInterval(()=>{this.sendPing({command:"ping",appId:this.joinInfo.appId,cname:this.joinInfo.cname,uid:this.joinInfo.uid.toString(),sid:this.joinInfo.sid,ts:+new Date,requestId:0})},3e3)}clearHeartBeatCheck(){window.clearInterval(this.heartBeatTimer),this.heartBeatTimer=void 0}}class rX extends ur{set state(r){r!==this._state&&(r!==No.RELAY_STATE_FAILURE&&(this.errorCode=eh.RELAY_OK),this.emit("state",r,this.errorCode),this._state=r)}get state(){return this._state}constructor(r,o,s,l,d){super(),L(this,"joinInfo",void 0),L(this,"sid",void 0),L(this,"clientId",void 0),L(this,"cancelToken",ns.CancelToken.source()),L(this,"workerToken",void 0),L(this,"requestId",0),L(this,"signal",void 0),L(this,"prevChannelMediaConfig",void 0),L(this,"httpRetryConfig",void 0),L(this,"_resolution",void 0),L(this,"_state",No.RELAY_STATE_IDLE),L(this,"errorCode",eh.RELAY_OK),L(this,"onStatus",p=>{j.debug("[".concat(this.clientId,"] ChannelMediaStatus: ").concat(JSON.stringify(p))),p&&p.command&&(p.command==="onAudioPacketReceived"&&this.emit("event",il.PACKET_RECEIVED_AUDIO_FROM_SRC),p.command==="onVideoPacketReceived"&&this.emit("event",il.PACKET_RECEIVED_VIDEO_FROM_SRC),p.command==="onSrcTokenPrivilegeDidExpire"&&(this.errorCode=eh.SRC_TOKEN_EXPIRED,this.state=No.RELAY_STATE_FAILURE),p.command==="onDestTokenPrivilegeDidExpire"&&(this.errorCode=eh.DEST_TOKEN_EXPIRED,this.state=No.RELAY_STATE_FAILURE))}),L(this,"onReconnect",async()=>{j.debug("[".concat(this.clientId,"] ChannelMediaSocket disconnect, reconnecting")),this.emit("event",il.NETWORK_DISCONNECTED),this.state=No.RELAY_STATE_IDLE,this.prevChannelMediaConfig&&this.sendStartRelayMessage(this.prevChannelMediaConfig).catch(p=>{this.state!==No.RELAY_STATE_IDLE&&(j.error("auto restart channel media relay failed",p.toString()),this.errorCode=eh.SERVER_CONNECTION_LOST,this.state=No.RELAY_STATE_FAILURE)})}),this.joinInfo=r,this.clientId=o,this.sid=AN(),this.signal=new nX(this.joinInfo,this.clientId,s),this.httpRetryConfig=l,this._resolution=d}async startChannelMediaRelay(r){if(this.state!==No.RELAY_STATE_IDLE)throw new re(q.INVALID_OPERATION);this.state=No.RELAY_STATE_CONNECTING,await this.connect(),j.debug("[".concat(this.clientId,"] startChannelMediaRelay: connect success"));try{await this.sendStartRelayMessage(r)}catch(o){throw o.data&&o.data.serverResponse&&o.data.serverResponse.command==="SetSourceChannel"?new re(q.CROSS_CHANNEL_FAILED_JOIN_SRC):o.data&&o.data.serverResponse&&o.serverResponse.command==="SetDestChannelStatus"?new re(q.CROSS_CHANNEL_FAILED_JOIN_DEST):o.data&&o.data.serverResponse&&o.serverResponse.command==="StartPacketTransfer"?new re(q.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST):o}this.prevChannelMediaConfig=r}async updateChannelMediaRelay(r){if(this.state!==No.RELAY_STATE_RUNNING)throw new re(q.INVALID_OPERATION);await this.sendUpdateMessage(r),this.prevChannelMediaConfig=r}async setVideoProfile(r){if(this._resolution=r,this.state!==No.RELAY_STATE_RUNNING)throw new re(q.INVALID_OPERATION);const o=this.genMessage(eo.SetVideoProfile);await this.signal.request(o),j.debug("[".concat(this.clientId,"] startChannelMediaRelay: setVideoProfile success"))}async stopChannelMediaRelay(){await this.sendStopRelayMessage(),j.debug("[".concat(this.clientId,"] stopChannelMediaRelay: send stop message success")),this.state=No.RELAY_STATE_IDLE,this.dispose()}dispose(){j.debug("[".concat(this.clientId,"] disposeChannelMediaRelay")),this.cancelToken.cancel(),this.cancelToken=ns.CancelToken.source(),this.state=No.RELAY_STATE_IDLE,this.emit("dispose"),this.signal.dispose(),this.prevChannelMediaConfig=void 0}async connect(){const r=await JY(this.joinInfo,this.cancelToken.token,this.httpRetryConfig);this.workerToken=r.workerToken,await this.signal.connect(r.addressList),this.emit("event",il.NETWORK_CONNECTED),this.signal.on("status",this.onStatus),this.signal.on("reconnecting",this.onReconnect)}async sendStartRelayMessage(r){const o=this.genMessage(eo.StopPacketTransfer);await this.signal.request(o),await this.signal.waitStatus("Normal Quit"),j.debug("[".concat(this.clientId,"] startChannelMediaRelay: StopPacketTransfer success"));const s=this.genMessage(eo.SetSdkProfile,r);await this.signal.request(s),j.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSdkProfile success"));const l=this.genMessage(eo.SetSourceChannel,r);await this.signal.request(l),await this.signal.waitStatus("SetSourceChannelStatus"),this.emit("event",il.PACKET_JOINED_SRC_CHANNEL),j.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSourceChannel success"));const d=this.genMessage(eo.SetSourceUserId,r);await this.signal.request(d),j.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSourceUserId success"));const p=this.genMessage(eo.SetDestChannel,r);await this.signal.request(p),await this.signal.waitStatus("SetDestChannelStatus"),this.emit("event",il.PACKET_JOINED_DEST_CHANNEL),j.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetDestChannel success"));const _=this.genMessage(eo.StartPacketTransfer,r);await this.signal.request(_),this.emit("event",il.PACKET_SENT_TO_DEST_CHANNEL),this.state=No.RELAY_STATE_RUNNING,j.debug("[".concat(this.clientId,"] startChannelMediaRelay: StartPacketTransfer success")),this.setVideoProfile(this._resolution)}async sendUpdateMessage(r){const o=this.genMessage(eo.UpdateDestChannel,r);await this.signal.request(o),this.emit("event",il.PACKET_UPDATE_DEST_CHANNEL),j.debug("[".concat(this.clientId,"] sendUpdateMessage: UpdateDestChannel success"))}async sendStopRelayMessage(){const r=this.genMessage(eo.StopPacketTransfer);await this.signal.request(r),j.debug("[".concat(this.clientId,"] sendStopRelayMessage: StopPacketTransfer success"))}genMessage(r,o){const s=[],l=[],d=[];this.requestId+=1;const p={appId:this.joinInfo.appId,cname:this.joinInfo.cname,uid:this.joinInfo.uid.toString(),sdkVersion:xs,sid:this.sid,ts:Date.now(),requestId:this.requestId,seq:this.requestId,allocate:!0,clientRequest:{}};p.sdkVersion==="4.18.2"&&(p.sdkVersion="0.0.1");let _=null,S=null;switch(r){case eo.SetSdkProfile:return p.clientRequest={command:"SetSdkProfile",type:"multi_channel"},p;case eo.SetSourceChannel:if(S=o&&o.getSrcChannelMediaInfo(),!S)throw new re(q.UNEXPECTED_ERROR,"can not find source config");return p.clientRequest={command:"SetSourceChannel",uid:"0",channelName:S.channelName,token:S.token||this.joinInfo.appId},p;case eo.SetSourceUserId:if(S=o&&o.getSrcChannelMediaInfo(),!S)throw new re(q.UNEXPECTED_ERROR,"can not find source config");return p.clientRequest={command:"SetSourceUserId",uid:S.uid+""},p;case eo.SetDestChannel:if(_=o&&o.getDestChannelMediaInfo(),!_)throw new re(q.UNEXPECTED_ERROR,"can not find dest config");return _.forEach(I=>{s.push(I.channelName),l.push(I.uid+""),d.push(I.token||this.joinInfo.appId)}),p.clientRequest={command:"SetDestChannel",channelName:s,uid:l,token:d},p;case eo.StartPacketTransfer:return p.clientRequest={command:"StartPacketTransfer"},p;case eo.Reconnect:return p.clientRequest={command:"Reconnect"},p;case eo.StopPacketTransfer:return p.clientRequest={command:"StopPacketTransfer"},p;case eo.UpdateDestChannel:if(_=o&&o.getDestChannelMediaInfo(),!_)throw new re(q.UNEXPECTED_ERROR,"can not find dest config");return _.forEach(I=>{s.push(I.channelName),l.push(I.uid+""),d.push(I.token||this.joinInfo.appId)}),p.clientRequest={command:"UpdateDestChannel",channelName:s,uid:l,token:d},p;case eo.SetVideoProfile:p.clientRequest={command:"SetVideoProfile",width:this._resolution.width,height:this._resolution.height}}return p}}const FN=n=>{const r=document.createElement("canvas");return r.width=2,r.height=2,new Le((o,s)=>{r.toBlob(async l=>{if(r.remove(),l){const d=await TF(l);o({buffer:d,width:r.width,height:r.height})}else s(new re(q.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED))},n,1)})},TF=async n=>{const r=await n.arrayBuffer();return new Uint8Array(r)};function bF(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function RF(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?bF(Object(o),!0).forEach(function(s){L(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):bF(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}class VN{get videoElementStatus(){return this._videoElementStatus}set videoElementStatus(r){r!==this._videoElementStatus&&(j.debug("[".concat(this.trackId,"] video-element-status change ").concat(this._videoElementStatus," => ").concat(r)),this._videoElementStatus=r)}constructor(r){L(this,"trackId",void 0),L(this,"config",void 0),L(this,"onFirstVideoFrameDecoded",void 0),L(this,"freezeTimeCounterList",[]),L(this,"renderFreezeAccTime",0),L(this,"isKeepLastFrame",!1),L(this,"timeUpdatedCount",0),L(this,"freezeTime",0),L(this,"playbackTime",0),L(this,"lastTimeUpdatedTime",0),L(this,"autoplayFailed",!1),L(this,"videoTrack",void 0),L(this,"videoElement",void 0),L(this,"cacheVideoElement",void 0),L(this,"videoElementCheckInterval",void 0),L(this,"_videoElementStatus",Qi.NONE),L(this,"isGettingVideoDimensions",!1),L(this,"startGetVideoDimensions",()=>{const o=()=>{if(this.isGettingVideoDimensions=!0,this.videoElement.videoWidth*this.videoElement.videoHeight>4)return j.debug("[".concat(this.trackId,"] current video dimensions:"),this.videoElement.videoWidth,this.videoElement.videoHeight),void(this.isGettingVideoDimensions=!1);setTimeout(o,500)};!this.isGettingVideoDimensions&&o()}),L(this,"autoResumeAfterInterruption",()=>{this.videoTrack&&this.videoTrack.readyState==="live"&&Cn.curState==="running"&&(j.debug("[track-".concat(this.trackId,"] video element paused, auto resume for ").concat(fT())),ET()?(this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):(this.videoElement.pause(),this.videoElement.play()))}),L(this,"handleVideoEvents",o=>{switch(o.type){case"play":case"playing":this.startGetVideoDimensions(),this.videoElementStatus=Qi.PLAYING;break;case"loadeddata":if(this.onFirstVideoFrameDecoded&&this.onFirstVideoFrameDecoded(),this.cacheVideoElement){try{this.cacheVideoElement.srcObject=null,this.cacheVideoElement.remove()}catch{}this.cacheVideoElement=void 0}break;case"canplay":this.videoElementStatus=Qi.CANPLAY;break;case"stalled":this.videoElementStatus=Qi.STALLED;break;case"suspend":this.videoElementStatus=Qi.SUSPEND;break;case"pause":this.videoElementStatus=Qi.PAUSED,Ui()||hc()||Yi()&&this.autoplayFailed||!this.videoTrack||this.videoTrack.readyState!=="live"||(j.debug("[track-".concat(this.trackId,"] video element paused, auto resume")),this.videoElement.play());break;case"waiting":this.videoElementStatus=Qi.WAITING;break;case"abort":this.videoElementStatus=Qi.ABORT;break;case"ended":this.videoElementStatus=Qi.ENDED;break;case"emptied":this.videoElementStatus=Qi.EMPTIED;break;case"error":{this.videoElementStatus=Qi.ERROR;const s=this.videoElement.error;s&&j.error("[".concat(this.trackId,"] media error, code: ").concat(s.code,", message: ").concat(s.message));break}case"timeupdate":{const s=performance.now();if(this.timeUpdatedCount+=1,this.timeUpdatedCount<10)return void(this.lastTimeUpdatedTime=s);const l=s-this.lastTimeUpdatedTime,d=this.lastTimeUpdatedTime;if(this.lastTimeUpdatedTime=s,Wu.lastVisibleTime<Wu.lastHiddenTime||d<Wu.lastHiddenTime||d<Wu.lastVisibleTime)return;for(l>de("VIDEO_FREEZE_DURATION")&&(this.freezeTime+=l),this.playbackTime+=l;this.playbackTime>=6e3;){this.playbackTime-=6e3;const p=Math.min(6e3,this.freezeTime);this.freezeTimeCounterList.push(p),this.freezeTime=Math.max(0,this.freezeTime-6e3)}break}}}),L(this,"autoResumeAfterInterruptionOnIOS15_16",()=>{this.videoTrack&&this.videoTrack.readyState==="live"&&(j.debug("[track-".concat(this.trackId,"] video element paused, auto resume for ").concat(fT())),ET()?(this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):(this.videoElement.pause(),this.videoElement.play()))}),this.trackId=r.trackId,this.config=r,r.element instanceof HTMLVideoElement?this.videoElement=r.element:this.videoElement=document.createElement("video"),Cn.on(gi.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),Cn.on(gi.IOS_15_16_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15_16)}getVideoElement(){return this.videoElement}getContainerElement(){var r;return(r=this.videoElement.parentElement)!==null&&r!==void 0?r:void 0}updateConfig(r){this.config=r,this.trackId=r.trackId,r.element!==this.videoElement&&(this.destroy(),this.videoElement=r.element),this.videoTrack&&this.initVideoElement()}updateVideoTrack(r){this.videoTrack!==r&&(this.videoTrack=r,this.initVideoElement())}play(r){const o=this.videoElement.play();o&&o.catch&&o.catch(l=>{r&&Ze.autoplayFailed(r,"video",l.message,this.trackId),l.name==="NotAllowedError"?(j.warning("detected video element autoplay failed",l),this.autoplayFailed=!0,this.handleAutoPlayFailed()):j.warning("[".concat(this.trackId,"] play warning: "),l)});const s=un();if((s.name==="Safari"&&Number(s.version)===15||qd())&&o&&o.then&&o.catch){const l=()=>{this.config.mirror&&(this.videoElement.style.transform="rotateY(180deg)")};o.then(l).catch(l)}}getCurrentFrame(){const r=document.createElement("canvas");r.width=this.videoElement.videoWidth,r.height=this.videoElement.videoHeight;const o=r.getContext("2d");if(!o)return j.error("create canvas context failed!"),new ImageData(2,2);o.drawImage(this.videoElement,0,0,r.width,r.height);const s=o.getImageData(0,0,r.width,r.height);return r.remove(),s}async getCurrentFrameToUint8Array(r){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const s=document.createElement("canvas");s.width=this.videoElement.videoWidth,s.height=this.videoElement.videoHeight;const l=s.getContext("2d");return l?(l.drawImage(this.videoElement,0,0,s.width,s.height),new Le((d,p)=>{s.toBlob(async _=>{if(s.remove(),_){const S=await TF(_);d({buffer:S,width:s.width,height:s.height})}else p(new re(q.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED))},r,o<0?.1:o>1?1:o)})):await FN(r)}destroy(){Cn.off(gi.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),Cn.off(gi.IOS_15_16_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15_16),this.videoElement.srcObject=null,this.resetVideoElement(),this.freezeTimeCounterList=[]}initVideoElement(){if(this.videoElementStatus=Qi.INIT,!this.videoElementCheckInterval&&(IF.forEach(d=>{this.videoElement.addEventListener(d,this.handleVideoEvents)}),this.videoElementCheckInterval=window.setInterval(()=>{(function(d){return d!==document.body&&document.body.contains(d)})(this.videoElement)||(this.videoElementStatus=Qi.DESTROYED)},1e3),de("ENABLE_VIDEO_FRAME_CALLBACK"))){var r,o;let d;const p=(_,S)=>{if(this.videoElementStatus===Qi.PLAYING){if(d){const A=S.presentationTime-d.presentationTime;A>de("VIDEO_FREEZE_DURATION")&&Wu.lastVisibleTime>=Wu.lastHiddenTime&&d.timestamp>Wu.lastVisibleTime&&d.timestamp>Wu.lastHiddenTime&&(this.renderFreezeAccTime+=A)}d=RF(RF({},S),{},{timestamp:_})}var I,b;de("ENABLE_VIDEO_FRAME_CALLBACK")&&((I=(b=this.videoElement).requestVideoFrameCallback)===null||I===void 0||I.call(b,p))};(r=(o=this.videoElement).requestVideoFrameCallback)===null||r===void 0||r.call(o,p)}this.videoElement.controls=!1,this.videoElement.setAttribute("playsinline",""),Vm()&&(this.videoElement.poster="noposter");const s=un();s.name==="Safari"&&Number(s.version)===15||qd()||!this.config.mirror||(this.videoElement.style.transform="rotateY(180deg)"),this.config.fit?this.videoElement.style.objectFit=this.config.fit:this.videoElement.style.objectFit="cover",this.videoElement.setAttribute("muted",""),this.videoElement.muted=!0,this.videoElement.srcObject&&this.videoElement.srcObject instanceof MediaStream?this.videoElement.srcObject.getVideoTracks()[0]!==this.videoTrack&&(this.videoElement.srcObject=this.videoTrack?new MediaStream([this.videoTrack]):null,nr()&&this.videoElement.load()):(this.videoElement.srcObject=this.videoTrack?new MediaStream([this.videoTrack]):null,nr()&&this.videoElement.load());const l=this.videoElement.play();l!==void 0&&l.catch(d=>{j.debug("[".concat(this.trackId,"] playback interrupted"),d.toString())})}resetVideoElement(){IF.forEach(r=>{this.videoElement&&this.videoElement.removeEventListener(r,this.handleVideoEvents)}),this.videoElementCheckInterval&&(window.clearInterval(this.videoElementCheckInterval),this.videoElementCheckInterval=void 0),this.videoElementStatus=Qi.NONE}handleAutoPlayFailed(){const r=o=>{o.preventDefault(),this.videoElement.play().then(()=>{j.debug("[".concat(this.trackId,"] Video element for trackId:").concat(this.trackId," autoplay resumed."))}).catch(s=>{j.error(s)}),this.autoplayFailed=!1,Af()?document.body.removeEventListener("click",r,!0):(document.body.removeEventListener("touchstart",r,!0),document.body.removeEventListener("mousedown",r,!0))};Af()?document.body.addEventListener("click",r,!0):(document.body.addEventListener("touchstart",r,!0),document.body.addEventListener("mousedown",r,!0)),AU()}}const IF=["play","playing","loadeddata","canplay","pause","stalled","suspend","waiting","abort","emptied","ended","timeupdate","error"];class wF extends VN{constructor(r){super(r),L(this,"container",void 0),L(this,"slot",void 0),this.slot=r.element,this.updateConfig(r)}updateConfig(r){this.config=r,this.trackId=r.trackId;const o=r.element;o!==this.slot&&(this.destroy(),this.slot=o),this.createElements()}updateVideoTrack(r){this.videoTrack!==r&&(this.videoTrack=r,this.createElements())}play(r){var o;(o=this.container)!==null&&o!==void 0&&o.contains(this.videoElement)&&super.play(r)}getCurrentFrame(){var r;return(r=this.container)!==null&&r!==void 0&&r.contains(this.videoElement)?super.getCurrentFrame():new ImageData(2,2)}async getCurrentFrameToUint8Array(r){var o;let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return(o=this.container)!==null&&o!==void 0&&o.contains(this.videoElement)?await super.getCurrentFrameToUint8Array(r,s):await FN(r)}destroy(){if(super.destroy(),this.videoElement.remove(),this.videoElement=document.createElement("video"),this.container){try{this.container.remove(),this.slot.removeChild(this.container)}catch{}this.container=void 0}}createElements(){this.container||(this.container=document.createElement("div")),this.container.id="agora-video-player-".concat(this.trackId),this.container.style.width="100%",this.container.style.height="100%",this.container.style.position="relative",this.container.style.overflow="hidden",this.videoTrack?(this.container.style.backgroundColor="black",de("KEEP_LAST_FRAME")&&this.isKeepLastFrame&&this.videoElement.paused&&this.resetVideoElement(),this.mountedVideoElement()):this.unmountedVideoElement(),this.slot.appendChild(this.container)}mountedVideoElement(){var r;!this.container||(r=this.container)!==null&&r!==void 0&&r.contains(this.videoElement)||this.container.appendChild(this.videoElement),super.initVideoElement(),this.videoElement.id="video_".concat(this.trackId),this.videoElement.className="agora_video_player",this.videoElement.style.width="100%",this.videoElement.style.height="100%",this.videoElement.style.position="absolute",this.videoElement.style.left="0",this.videoElement.style.top="0"}unmountedVideoElement(){var r;if((r=this.container)!==null&&r!==void 0&&r.contains(this.videoElement)){super.resetVideoElement();try{this.container&&this.container.removeChild(this.videoElement)}catch{}this.videoElement=document.createElement("video")}}resetVideoElement(){var r;(r=this.container)!==null&&r!==void 0&&r.contains(this.videoElement)&&(super.resetVideoElement(),this.cacheVideoElement=this.videoElement,this.videoElement=document.createElement("video"))}getContainerElement(){return this.container}}function sb(n){const r={};n.facingMode&&(r.facingMode=n.facingMode),n.cameraId&&(r.deviceId={exact:n.cameraId});const o=Df(n.encoderConfig);return r.width=o.width,r.height=o.height,!bE()&&o.frameRate&&(r.frameRate=o.frameRate),un().name===gn.EDGE&&typeof r.frameRate=="object"&&(r.frameRate.max=60),nr()&&(r.frameRate={ideal:30,max:30}),r}function iX(n){const r={};n.screenSourceType&&(r.mediaSource=n.screenSourceType),n.extensionId&&yE()&&(r.extensionId=n.extensionId);const{displaySurface:o,selfBrowserSurface:s,surfaceSwitching:l,systemAudio:d}=n;(CE(107)||mT(107)||gT(93))&&(o&&(Si(o,"displaySurface",["browser","window","monitor"]),r.displaySurface=o),s?(Si(s,"selfBrowserSurface",["exclude","include"]),r.selfBrowserSurface=s):r.selfBrowserSurface="include",l&&(Si(l,"surfaceSwitching",["exclude","include"]),r.surfaceSwitching=l)),(CE(105)||mT(105)||gT(91))&&d&&(Si(d,"systemAudio",["exclude","include"]),r.systemAudio=d),n.electronScreenSourceId&&(r.sourceId=n.electronScreenSourceId);const p=n.encoderConfig?KA(n.encoderConfig):null;return r.mandatory={chromeMediaSource:"desktop",maxWidth:p?p.width:void 0,maxHeight:p?p.height:void 0},p&&(p.frameRate&&(typeof p.frameRate=="number"?(r.mandatory.maxFrameRate=p.frameRate,r.mandatory.minFrameRate=p.frameRate):(r.mandatory.maxFrameRate=p.frameRate.max||p.frameRate.ideal||p.frameRate.exact||void 0,r.mandatory.minFrameRate=p.frameRate.min||p.frameRate.ideal||p.frameRate.exact||void 0),r.frameRate=p.frameRate),p.width&&(r.width=p.width),p.height&&(r.height=p.height)),r}function OF(n){const r={};if(bE()||(n.AGC!==void 0&&(r.autoGainControl=n.AGC),n.AEC!==void 0&&(r.echoCancellation=n.AEC),n.ANS!==void 0&&(r.noiseSuppression=n.ANS,yE()&&n.ANS&&(r.googHighpassFilter=n.ANS))),n.encoderConfig){const o=HT(n.encoderConfig);r.channelCount=o.stereo?2:1,r.sampleRate=o.sampleRate,r.sampleSize=o.sampleSize}return n.microphoneId&&(r.deviceId={exact:n.microphoneId}),Vm()&&(r.sampleRate=void 0),r}var l0,cb;(function(n){n.COVERED="COVERED",n.POSITION="POSITION",n.SIZE="SIZE",n.STYLE="STYLE"})(l0||(l0={})),function(n){n.UNMOUNTED="UNMOUNTED",n.INVALID_HTML_ELEMENT="INVALID_HTML_ELEMENT"}(cb||(cb={}));var AF,NF,xF,PF,DF,LF,kF,MF,UF,FF,VF,jF,BF,$F,HF,WF,GF,zF,KF,qF,YF,XF,JF,QF,Qt,ZF,e3,t3,n3,r3,i3,o3,a3,ks,s3=new class{constructor(){L(this,"_clientSize",null),L(this,"getClientWidth",()=>document.documentElement?document.documentElement.clientWidth:document.body.clientWidth),L(this,"getClientHeight",()=>document.documentElement?document.documentElement.clientHeight:document.body.clientHeight),L(this,"getStyle",n=>window.getComputedStyle(n,null)),L(this,"checkCssVisibleProperty",n=>{let r=!0;const o=this.getStyle(n),{display:s,visibility:l,opacity:d,filter:p}=o;return(s==="none"||["hidden","collapse"].includes(l)||Number(d)<.1)&&(r=!1),r?(p&&p.split(" ").filter(_=>{const S=_.split("(")[0];return["brightness","blur","opacity"].includes(S)}).map(_=>{const[S,I]=_.split(/\(|\)/);return[S,Number(I.match(/^[0-9\.]+/))]}).forEach(_=>{const[S,I]=_;switch(S){case"brightness":(I<.1||I>3)&&(r=!1);break;case"blur":I>3&&(r=!1);break;case"opacity":I<.1&&(r=!1)}}),r):!1}),L(this,"checkPropertyUpToAllParentNodes",(n,r)=>{let o=!0,s=!0;const l=p=>r(p);let d=n;for(;d&&s;)l(d)||(o=!1,s=!1),d=d.parentElement,d||(s=!1);return o}),L(this,"checkActualCssVisibleIncludeInherit",n=>this.checkPropertyUpToAllParentNodes(n,this.checkCssVisibleProperty)),L(this,"getSizeAboutClient",n=>{const{width:r,height:o,left:s,right:l,top:d,bottom:p}=n.getBoundingClientRect(),_=this.getClientWidth(),S=this.getClientHeight();return{width:r,height:o,left:s,right:l,top:d,bottom:p,clientWidth:_,clientHeight:S,clientMin:Math.min(_,S)}}),L(this,"checkActualSize",()=>{const{width:n,height:r,clientMin:o}=this._clientSize;return this.checkSizeIsVisible(n,r,o)}),L(this,"elementFromPoint",(n,r)=>document.elementFromPoint?document.elementFromPoint(n,r):null),L(this,"checkCoverForAPoint",(n,r,o)=>{const s=this.elementFromPoint(n,r);return s!==null&&s!==o}),L(this,"getPointPositionList",()=>{const{width:n,height:r,left:o,top:s}=this._clientSize,l=n/6,d=r/6,p=[],_=10**6;for(let S=0;S<5;S++)for(let I=0;I<5;I++){const b=(o*_+(S===0?.1:S===4?(l*S*_-1e5)/_:l*S)*_)/_,A=(s*_+(I===0?.1:I===4?(d*I*_-1e5)/_:d*I)*_)/_;p.push({x:b,y:A})}return[...p]}),L(this,"checkElementCover",n=>this.getPointPositionList().map(r=>this.checkCoverForAPoint(r.x,r.y,n)).filter(r=>!!r).length>6),L(this,"checkSizeIsVisible",(n,r,o)=>(n>50||o/n<=10)&&(r>50||o/r<=10)),L(this,"checkSizeOfPartInClient",()=>{const{left:n,right:r,top:o,bottom:s,clientHeight:l,clientWidth:d,clientMin:p}=this._clientSize;let _,S,I,b;if(n<0)_=0;else{if(!(n<d))return!1;_=n}if(r<0)return!1;if(S=r<d?r:d,o<0)I=0;else{if(!(o<l))return!1;I=o}if(s<0)return!1;b=s<l?s:l;const A=S-_,F=b-I;return this.checkSizeIsVisible(A,F,p)}),L(this,"returnHiddenResult",n=>(this._clientSize=null,{visible:!1,reason:n})),L(this,"checkOneElementVisible",n=>{if(n instanceof HTMLElement){if(this.checkElementIsMountedOnDom(n)){if(this.checkActualCssVisibleIncludeInherit(n)){if(this._clientSize=this.getSizeAboutClient(n),this.checkElementCover(n))return this.returnHiddenResult(l0.COVERED);{const r=this.checkActualSize(),o=this.checkSizeOfPartInClient();return r&&!o?this.returnHiddenResult(l0.POSITION):r?(this._clientSize=null,{visible:!0}):this.returnHiddenResult(l0.SIZE)}}return this.returnHiddenResult(l0.STYLE)}return this.returnHiddenResult(cb.UNMOUNTED)}return this.returnHiddenResult(cb.INVALID_HTML_ELEMENT)}),L(this,"checkElementIsMountedOnDom",n=>this.checkPropertyUpToAllParentNodes(n,r=>r.nodeName.toUpperCase()!=="HTML"?r.parentElement!==null:!!document.documentElement))}};function c3(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function KE(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?c3(Object(o),!0).forEach(function(s){L(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):c3(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}let $r=(AF=lt({argsMap:(n,r,o)=>[n.getTrackId(),typeof r=="string"?r:r instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement",o]}),NF=gr(),xF=lt({argsMap:n=>[n.getTrackId()]}),PF=t0("LocalVideoTrack","_enabledMutex"),DF=lt({argsMap:(n,r)=>[n.getTrackId(),r]}),LF=gr(),kF=t0("LocalVideoTrack","_enabledMutex"),MF=lt({argsMap:(n,r)=>[n.getTrackId(),r]}),UF=gr(),FF=lt({argsMap:(n,r)=>[n.getTrackId(),r]}),VF=gr(),jF=gr(),BF=lt({argsMap:(n,r,o)=>[n.getTrackId(),r,o]}),$F=gr(),HF=gr(),WF=gr(),GF=gr(),zF=gr(),KF=gr(),qF=gr(),YF=lt({argsMap:(n,r)=>[n.getTrackId(),r.name]}),XF=lt({argsMap:n=>[n.getTrackId()]}),JF=lt({argsMap:n=>[n.getTrackId()]}),QF=lt({argsMap:(n,r,o)=>[n.getTrackId(),r.label,o]}),Ne((Qt=class x$ extends SN{get isPlaying(){return!(!this._player||this._player.videoElementStatus!==Qi.PLAYING)}get processorContext(){return this._processorContext}set processorContext(r){this._processorContext=r}get __className__(){return"LocalVideoTrack"}constructor(r,o,s,l,d,p){if(super(r,d),L(this,"trackMediaType","video"),L(this,"_player",void 0),L(this,"_videoVisibleTimer",null),L(this,"_previousVideoVisibleStatus",void 0),L(this,"_clearPreviousVideoVisibleStatus",()=>this._previousVideoVisibleStatus=void 0),L(this,"_encoderConfig",void 0),L(this,"_scalabiltyMode",{numSpatialLayers:1,numTemporalLayers:1}),L(this,"_optimizationMode",void 0),L(this,"_videoHeight",void 0),L(this,"_videoWidth",void 0),L(this,"_forceBitrateLimit",void 0),L(this,"_enabled",!0),L(this,"processorDestination",void 0),L(this,"_processorContext",void 0),Yi()){const{width:_,height:S}=r.getSettings();this._videoWidth=_,this._videoHeight=S}else this.updateMediaStreamTrackResolution();this._encoderConfig=o,this._scalabiltyMode=s,this._optimizationMode=l,this._hints=p||[],this._hints.indexOf(ai.SCREEN_TRACK)===-1&&this.updateBitrateFromProfile(),o&&this._hints.indexOf(ai.CUSTOM_TRACK)!==-1&&this.setEncoderConfiguration(o),this.processorContext=new KU(this.getTrackId(),"local"),this.processorDestination=new zU(this.processorContext),this.bindProcessorDestinationEvents()}play(r){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof r=="string"){const l=document.getElementById(r);l?r=l:(j.warning("[".concat(this.getTrackId(),'] can not find "#').concat(r,'" element, use document.body')),r=document.body)}j.debug("[".concat(this.getTrackId(),"] start video playback in ").concat(r instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement"),JSON.stringify(o));const s=KE(KE(KE({},this._getDefaultPlayerConfig()),o),{},{trackId:this.getTrackId(),element:r});this._player?this._player.updateConfig(s):(r instanceof HTMLVideoElement?this._player=new VN(s):this._player=new wF(s),this._player.updateVideoTrack(this._mediaStreamTrack)),this._player.play(),this._videoVisibleTimer&&window.clearInterval(this._videoVisibleTimer),this._clearPreviousVideoVisibleStatus(),this._videoVisibleTimer=window.setInterval(()=>{try{const l=this.getVideoElementVisibleStatus();this.safeEmit(th.VIDEO_ELEMENT_VISIBLE_STATUS,l)}catch{}},de("CHECK_VIDEO_VISIBLE_INTERVAL"))}stop(){this._player&&(this._videoVisibleTimer&&(window.clearInterval(this._videoVisibleTimer),this._videoVisibleTimer=null),this._clearPreviousVideoVisibleStatus(),this._player.destroy(),this._player=void 0,j.debug("[".concat(this.getTrackId(),"] stop video playback")))}async setEnabled(r,o){if(!o){if(r===this._enabled)return;this.stateCheck("enabled",r)}if(j.info("[".concat(this.getTrackId(),"] start setEnabled"),r),!r){this._originMediaStreamTrack.enabled=!1;try{await vr(this,Et.NEED_DISABLE_TRACK,this)}catch(s){throw j.error("[".concat(this.getTrackId(),"] setEnabled to false error"),s.toString()),s}return o||(this._enabled=!1),void j.info("[".concat(this.getTrackId(),"] setEnabled to false success"))}this._originMediaStreamTrack.enabled=!0;try{await vr(this,Et.NEED_ENABLE_TRACK,this)}catch(s){throw j.error("[".concat(this.getTrackId(),"] setEnabled to true error"),s.toString()),s}j.info("[".concat(this.getTrackId(),"] setEnabled to true success")),o||(this._enabled=!0)}async setMuted(r){r!==this._muted&&(this.stateCheck("muted",r),this._muted=r,this._originMediaStreamTrack.enabled=!r,j.debug("[".concat(this.getTrackId(),"] start set muted: ").concat(r)),r?await vr(this,Et.NEED_MUTE_TRACK,this):await vr(this,Et.NEED_UNMUTE_TRACK,this))}async setEncoderConfiguration(r,o){if(!this._enabled)throw new re(q.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled");if(r=Df(r),this._forceBitrateLimit&&(r.bitrateMax=this._forceBitrateLimit.max_bitrate?this._forceBitrateLimit.max_bitrate:r.bitrateMax,r.bitrateMin=this._forceBitrateLimit.min_bitrate?this._forceBitrateLimit.min_bitrate:r.bitrateMin),r.width||r.height||r.frameRate){const s=sb({encoderConfig:r});(Yi()||Ui()||hc())&&(s.deviceId=void 0),j.debug("[".concat(this.getTrackId(),"] setEncoderConfiguration applyConstraints"),JSON.stringify(r),JSON.stringify(s));try{await this._originMediaStreamTrack.applyConstraints(s),this.updateMediaStreamTrackResolution()}catch(l){const d=new re(q.UNEXPECTED_ERROR,l.toString());throw j.error("[".concat(this.getTrackId(),"] applyConstraints error"),d.toString()),d}}this._encoderConfig=r,this._hints.indexOf(ai.SCREEN_TRACK)===-1&&this.updateBitrateFromProfile();try{await vr(this,Et.NEED_UPDATE_VIDEO_ENCODER,this)}catch(s){return s.throw()}}getStats(){return HE(()=>{j.warning("[deprecated] LocalVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalVideoStats instead")},"localVideoTrackGetStatsWarning"),Ec(this,Et.GET_STATS)||KE({},sN)}async setBeautyEffect(r){j.error("LocalVideoTrack.setBeautyEffect was deprecated, please migrate to agora-extension-beauty-effect")}getCurrentFrameData(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}async getCurrentFrameImage(r){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return this._player?this._player.getCurrentFrameToUint8Array(r,o):await FN(r)}clone(r,o,s,l){const d=this._mediaStreamTrack.clone();return new x$(d,r,o,s,l)}async setBitrateLimit(r){if(j.debug("[".concat(this.getTrackId(),"] set bitrate limit, ").concat(JSON.stringify(r))),r){this._forceBitrateLimit=r,this._encoderConfig&&(this._encoderConfig.bitrateMax?this._encoderConfig.bitrateMax=this._encoderConfig.bitrateMax<r.max_bitrate?this._encoderConfig.bitrateMax:r.max_bitrate:this._encoderConfig.bitrateMax=r.max_bitrate,this._encoderConfig.bitrateMin,this._encoderConfig.bitrateMin=r.min_bitrate);try{await vr(this,Et.NEED_UPDATE_VIDEO_ENCODER,this)}catch(o){return o.throw()}}}async setOptimizationMode(r){if(r!=="motion"&&r!=="detail"&&r!=="balanced")return void j.error(q.INVALID_PARAMS,"optimization mode must be motion, detail or balanced");const o=this._optimizationMode;try{this._optimizationMode=r,await vr(this,Et.SET_OPTIMIZATION_MODE,this)}catch(s){throw this._optimizationMode=o,j.error("[".concat(this.getTrackId(),"] set optimization mode failed"),s.toString()),s}j.info("[".concat(this.getTrackId(),"] set optimization mode success (").concat(r,")"))}setScalabiltyMode(r){if(r.numSpatialLayers===1&&r.numTemporalLayers!==1)return j.error(q.INVALID_PARAMS,"scalability mode currently not supported, no SVC."),void(this._scalabiltyMode={numSpatialLayers:1,numTemporalLayers:1});this._scalabiltyMode=r,j.info("[".concat(this.getTrackId(),"] set scalability mode success (").concat(r,")"))}updateMediaStreamTrackResolution(){H4(this._originMediaStreamTrack).then(r=>{let[o,s]=r;this._videoHeight=s,this._videoWidth=o}).catch(nb)}_updatePlayerSource(){this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}_getDefaultPlayerConfig(){return{fit:"contain"}}updateBitrateFromProfile(){if(!this._encoderConfig)return;const{width:r,height:o,frameRate:s}=this.getMediaStreamTrackSettings();if(!r||!o||!s)return;const[l,d]=function(p,_,S){const I=de("BITRATE_ADAPTER_TYPE");let b;const A=200*Math.pow(S/15,.6)*Math.pow(p*_/640/360,.75),F=A;if(I==="STANDARD_BITRATE")b=4*A;else{if(I!=="COMPATIABLE_BITRATE")return;b=2*A}return[Math.floor(b),Math.floor(F)]}(r,o,s)||[void 0,void 0];this._encoderConfig.bitrateMin||this._encoderConfig.bitrateMax||(this._encoderConfig.bitrateMin=d,this._encoderConfig.bitrateMax=l,j.debug("[".concat(this.getTrackId(),"] update bitrate from profile, [w: ").concat(r,", h: ").concat(o,", fps: ").concat(s,"] => [brMax: ").concat(l,", brMin: ").concat(d,"]")))}getVideoElementVisibleStatus(){try{var r,o;const s=this==null||(r=this._player)===null||r===void 0?void 0:r.getContainerElement(),l={track:this,element:this==null||(o=this._player)===null||o===void 0?void 0:o.getVideoElement(),slot:s==null?void 0:s.parentElement},{element:d,slot:p}=l;if(this.isPlaying&&d instanceof HTMLVideoElement&&p instanceof HTMLElement){const _=s3.checkOneElementVisible(d),S=Object.assign({},_);if(S.visible!==this._previousVideoVisibleStatus){this._previousVideoVisibleStatus=S.visible;const I=Ze.reportApiInvoke(null,{tag:cr.TRACER,name:Fr.LOCAL_VIDEO_TRACK_GET_VIDEO_VISIBLE,options:[this.getTrackId()]});S.visible?I.onSuccess("Video is visible"):I.onSuccess("Invisible because of ".concat(S.reason))}return S}return}catch(s){throw new re(q.GET_VIDEO_ELEMENT_VISIBLE_ERROR,s.message)}}async renewMediaStreamTrack(r){}pipe(r){if(this.processor===r)return r;if(r._source)throw new re(q.INVALID_OPERATION,"Processor ".concat(r.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=r,this.processor._source=this,r.updateInput({track:this._originMediaStreamTrack,context:this.processorContext}),r}unpipe(){if(!this.processor)return;const r=this.processor;this.processor._source=void 0,this.processor=void 0,r.reset()}close(){super.close(),this.unbindProcessorDestinationEvents(),this.unbindProcessorContextEvents(),this.unpipe(),this.processorDestination._source&&this.processorDestination._source.unpipe()}async replaceTrack(r,o){if(!(r instanceof MediaStreamTrack))throw new re(q.INVALID_PARAMS,"track should be an instance of MediaStreamTrack");if(r.kind!=="video")throw new re(q.INVALID_PARAMS,"track should be a video MediaStreamTrack");await this._updateOriginMediaStreamTrack(r,o,!0),this.updateMediaStreamTrackResolution()}bindProcessorDestinationEvents(){this.processorDestination.on(to.ON_TRACK,async r=>{r?r!==this._mediaStreamTrack&&(this._mediaStreamTrack=r,this._updatePlayerSource(),await vr(this,Et.NEED_REPLACE_TRACK,this)):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await vr(this,Et.NEED_REPLACE_TRACK,this))})}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(to.ON_TRACK)}unbindProcessorContextEvents(){this.processorContext.removeAllListeners(ga.REQUEST_UPDATE_CONSTRAINTS),this.processorContext.removeAllListeners(ga.REQUEST_CONSTRAINTS)}}).prototype,"play",[AF,NF],Object.getOwnPropertyDescriptor(Qt.prototype,"play"),Qt.prototype),Ne(Qt.prototype,"stop",[xF],Object.getOwnPropertyDescriptor(Qt.prototype,"stop"),Qt.prototype),Ne(Qt.prototype,"setEnabled",[PF,DF,LF],Object.getOwnPropertyDescriptor(Qt.prototype,"setEnabled"),Qt.prototype),Ne(Qt.prototype,"setMuted",[kF,MF,UF],Object.getOwnPropertyDescriptor(Qt.prototype,"setMuted"),Qt.prototype),Ne(Qt.prototype,"setEncoderConfiguration",[FF,VF],Object.getOwnPropertyDescriptor(Qt.prototype,"setEncoderConfiguration"),Qt.prototype),Ne(Qt.prototype,"getStats",[jF],Object.getOwnPropertyDescriptor(Qt.prototype,"getStats"),Qt.prototype),Ne(Qt.prototype,"setBeautyEffect",[BF,$F],Object.getOwnPropertyDescriptor(Qt.prototype,"setBeautyEffect"),Qt.prototype),Ne(Qt.prototype,"getCurrentFrameData",[HF],Object.getOwnPropertyDescriptor(Qt.prototype,"getCurrentFrameData"),Qt.prototype),Ne(Qt.prototype,"getCurrentFrameImage",[WF],Object.getOwnPropertyDescriptor(Qt.prototype,"getCurrentFrameImage"),Qt.prototype),Ne(Qt.prototype,"setBitrateLimit",[GF],Object.getOwnPropertyDescriptor(Qt.prototype,"setBitrateLimit"),Qt.prototype),Ne(Qt.prototype,"setOptimizationMode",[zF],Object.getOwnPropertyDescriptor(Qt.prototype,"setOptimizationMode"),Qt.prototype),Ne(Qt.prototype,"setScalabiltyMode",[KF],Object.getOwnPropertyDescriptor(Qt.prototype,"setScalabiltyMode"),Qt.prototype),Ne(Qt.prototype,"updateMediaStreamTrackResolution",[qF],Object.getOwnPropertyDescriptor(Qt.prototype,"updateMediaStreamTrackResolution"),Qt.prototype),Ne(Qt.prototype,"pipe",[YF],Object.getOwnPropertyDescriptor(Qt.prototype,"pipe"),Qt.prototype),Ne(Qt.prototype,"unpipe",[XF],Object.getOwnPropertyDescriptor(Qt.prototype,"unpipe"),Qt.prototype),Ne(Qt.prototype,"close",[JF],Object.getOwnPropertyDescriptor(Qt.prototype,"close"),Qt.prototype),Ne(Qt.prototype,"replaceTrack",[QF],Object.getOwnPropertyDescriptor(Qt.prototype,"replaceTrack"),Qt.prototype),Qt),l3=(ZF=lt({argsMap:(n,r)=>[n.getTrackId(),r]}),e3=gr(),t3=t0("CameraVideoTrack","_enabledMutex"),n3=lt({argsMap:(n,r)=>[n.getTrackId(),r]}),r3=gr(),i3=lt({argsMap:(n,r)=>[n.getTrackId(),r]}),o3=gr(),a3=lt({argsMap:n=>[n.getTrackId()]}),Ne((ks=class extends $r{get __className__(){return"CameraVideoTrack"}constructor(n,r,o,s,l,d){super(n,Df(r.encoderConfig),s,l,d),L(this,"_config",void 0),L(this,"_originalConstraints",void 0),L(this,"_constraints",void 0),L(this,"_enabled",!0),L(this,"_deviceName","default"),L(this,"tryResumeVideoForIOS15_16WeChat",async()=>{(qd()||TE())&&!function(){const p=un();if(p.os!==Oi.IOS||!p.osVersion)return!1;const _=p.osVersion.split(".");return Number(_[0])===15&&Number(_[1])>=2}()&&_T()&&this._enabled&&!this._isClosed&&(j.debug("[".concat(this.getTrackId(),"] try capture camera media device for interrupted iOS 15 device on WeChat.")),await this.renewMediaStreamTrack())}),this._config=r,this._originalConstraints=o,this._constraints=o,this._deviceName=n.label,this._encoderConfig=Df(this._config.encoderConfig),Cn.on(gi.IOS_15_16_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat),Cn.on(gi.IOS_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat),this.bindProcessorContextEvents()}async setDevice(n){if(j.info("[".concat(this.getTrackId(),"] set device to ").concat(n)),this._enabled)try{const r=await ls.getDeviceById(n),o={};o.video=KE({},this._constraints),o.video.deviceId={exact:n},o.video.facingMode=void 0,this._originMediaStreamTrack.stop();let s=null;try{s=await vc(o,this.getTrackId())}catch(l){throw j.error("[".concat(this.getTrackId(),"] setDevice failed"),l.toString()),s=await vc({video:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(s.getVideoTracks()[0],!1),l}await this._updateOriginMediaStreamTrack(s.getVideoTracks()[0],!1),this.updateMediaStreamTrackResolution(),this._deviceName=r.label,this._config.cameraId=n,this._constraints.deviceId={exact:n}}catch(r){throw j.error("[".concat(this.getTrackId(),"] setDevice error"),r.toString()),r}else try{const r=await ls.getDeviceById(n);this._deviceName=r.label,this._config.cameraId=n,this._constraints.deviceId={exact:n}}catch(r){throw j.error("[".concat(this.getTrackId(),"] setDevice error"),r.toString()),r}j.info("[".concat(this.getTrackId(),"] setDevice success"))}async setEnabled(n,r){if(!r){if(n===this._enabled)return;this.stateCheck("enabled",n)}if(j.info("[".concat(this.getTrackId(),"] start setEnabled"),n),n){try{if(this.isExternalTrack)this._originMediaStreamTrack.enabled=!0;else{const o=await vc({video:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(o.getVideoTracks()[0],!1)}await vr(this,Et.NEED_ENABLE_TRACK,this)}catch(o){throw j.error("[".concat(this.getTrackId(),"] setEnabled true error"),o.toString()),o}this.updateMediaStreamTrackResolution(),j.info("[".concat(this.getTrackId(),"] setEnabled to true success")),r||(this._enabled=!0)}else{this.isExternalTrack?this._originMediaStreamTrack.enabled=!1:(this._originMediaStreamTrack.onended=null,this._originMediaStreamTrack.stop()),r||(this._enabled=!1);try{await vr(this,Et.NEED_DISABLE_TRACK,this)}catch(o){throw j.error("[".concat(this.getTrackId(),"] setEnabled to false error"),o.toString()),o}j.info("[".concat(this.getTrackId(),"] setEnabled to false success"))}}async setEncoderConfiguration(n,r){if(!this._enabled)throw new re(q.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled");n=Df(n),this._forceBitrateLimit&&(n.bitrateMax=this._forceBitrateLimit.max_bitrate?this._forceBitrateLimit.max_bitrate:n.bitrateMax,n.bitrateMin=this._forceBitrateLimit.min_bitrate?this._forceBitrateLimit.min_bitrate:n.bitrateMin);const o=Br(this._config);o.encoderConfig=n;const s=sb(o);(Yi()||Ui()||hc())&&(s.deviceId=void 0),j.debug("[".concat(this.getTrackId(),"] setEncoderConfiguration applyConstraints"),JSON.stringify(n),JSON.stringify(s));try{await this._originMediaStreamTrack.applyConstraints(s),this.updateMediaStreamTrackResolution()}catch(l){const d=new re(q.UNEXPECTED_ERROR,l.toString());throw j.error("[".concat(this.getTrackId(),"] applyConstraints error"),d.toString()),d}this._config=o,this._constraints=s,this._originalConstraints=s,this._encoderConfig=n,this._hints.indexOf(ai.SCREEN_TRACK)===-1&&this.updateBitrateFromProfile();try{await vr(this,Et.NEED_UPDATE_VIDEO_ENCODER,this)}catch(l){return l.throw()}}_getDefaultPlayerConfig(){return{mirror:!0,fit:"cover"}}onTrackEnded(){if((Ui()||hc())&&this._enabled&&!this._isClosed&&Cn.duringInterruption){const n=async()=>{Cn.off(gi.IOS_INTERRUPTION_END,n),this._enabled&&!this._isClosed&&(j.debug("[".concat(this.getTrackId(),"] try capture camera media device for interrupted iOS device.")),await this.setEnabled(!1),await this.setEnabled(!0))};Cn.on(gi.IOS_INTERRUPTION_END,n)}else j.debug("[".concat(this.getTrackId(),"] track ended")),this.safeEmit(th.TRACK_ENDED)}async renewMediaStreamTrack(n){const r=n||this._constraints,o=ls.searchDeviceIdByName(this._deviceName);if(o&&!r.deviceId&&(r.deviceId={exact:o}),this._enabled){const s=await vc({video:r},this.getTrackId());this._constraints=r,await this._updateOriginMediaStreamTrack(s.getVideoTracks()[0],!0),this.updateMediaStreamTrackResolution()}}close(){super.close(),Cn.off(gi.IOS_15_16_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat),Cn.off(gi.IOS_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat)}bindProcessorContextEvents(){this.processorContext.on(ga.REQUEST_UPDATE_CONSTRAINTS,async(n,r,o)=>{try{const s=Object.assign({},this._originalConstraints,...n);await this.renewMediaStreamTrack(s),r()}catch(s){o(s)}}),this.processorContext.on(ga.REQUEST_CONSTRAINTS,async n=>{n(this._originMediaStreamTrack.getSettings())})}}).prototype,"setDevice",[ZF,e3],Object.getOwnPropertyDescriptor(ks.prototype,"setDevice"),ks.prototype),Ne(ks.prototype,"setEnabled",[t3,n3,r3],Object.getOwnPropertyDescriptor(ks.prototype,"setEnabled"),ks.prototype),Ne(ks.prototype,"setEncoderConfiguration",[i3,o3],Object.getOwnPropertyDescriptor(ks.prototype,"setEncoderConfiguration"),ks.prototype),Ne(ks.prototype,"close",[a3],Object.getOwnPropertyDescriptor(ks.prototype,"close"),ks.prototype),ks);class jN{get hasVideo(){return this._video_enabled_&&!this._video_muted_&&this._video_added_}get hasAudio(){return this._audio_enabled_&&!this._audio_muted_&&this._audio_added_}get audioTrack(){if(this.hasAudio)return this._audioTrack}get videoTrack(){if(this.hasVideo)return this._videoTrack}constructor(r,o){L(this,"uid",void 0),L(this,"_uintid",void 0),L(this,"_trust_in_room_",!0),L(this,"_trust_audio_enabled_state_",!0),L(this,"_trust_video_enabled_state_",!0),L(this,"_trust_audio_mute_state_",!0),L(this,"_trust_video_mute_state_",!0),L(this,"_audio_muted_",!1),L(this,"_video_muted_",!1),L(this,"_audio_enabled_",!0),L(this,"_video_enabled_",!0),L(this,"_audio_added_",!1),L(this,"_video_added_",!1),L(this,"_trust_video_stream_added_state_",!0),L(this,"_trust_audio_stream_added_state_",!0),L(this,"_audioTrack",void 0),L(this,"_videoTrack",void 0),L(this,"_audioSSRC",void 0),L(this,"_videoSSRC",void 0),L(this,"_audioOrtc",void 0),L(this,"_videoOrtc",void 0),L(this,"_cname",void 0),L(this,"_rtxSsrcId",void 0),this.uid=r,this._uintid=o}}var oX=ou,aX=Bd,sX=ym;Rn({target:"Promise",stat:!0},{try:function(n){var r=aX.f(this),o=sX(n);return(o.error?r.reject:r.resolve)(o.value),r.promise}});var BN=oX,cX=Rn,lX=O,uX=c,dX=$E,hX=At,fX=Ii,pX=Wl,u3=YA,mX=EU,gX=bU,vX=Hn,d3=Ar("isConcatSpreadable"),h3=9007199254740991,f3="Maximum allowed index exceeded",p3=lX.TypeError,EX=vX>=51||!uX(function(){var n=[];return n[d3]=!1,n.concat()[0]!==n}),_X=gX("concat"),SX=function(n){if(!hX(n))return!1;var r=n[d3];return r!==void 0?!!r:dX(n)};cX({target:"Array",proto:!0,forced:!EX||!_X},{concat:function(n){var r,o,s,l,d,p=fX(this),_=mX(p,0),S=0;for(r=-1,s=arguments.length;r<s;r++)if(SX(d=r===-1?p:arguments[r])){if(S+(l=pX(d))>h3)throw p3(f3);for(o=0;o<l;o++,S++)o in d&&u3(_,S,d[o])}else{if(S>=h3)throw p3(f3);u3(_,S++,d)}return _.length=S,_}});var m3={},yX=Ce,CX=_t,g3=Up.f,TX=WM,v3=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];m3.f=function(n){return v3&&yX(n)=="Window"?function(r){try{return g3(r)}catch{return TX(v3)}}(n):g3(CX(n))};var qE={},bX=Ar;qE.f=bX;var E3=it,RX=pr,IX=qE,wX=bs.f,Bi=function(n){var r=E3.Symbol||(E3.Symbol={});RX(r,n)||wX(r,n,{value:IX.f(n)})},u0=Rn,$N=O,OX=dt,AX=k,YE=Q,NX=T,d0=$,Wf=or,HN=c,oo=pr,xX=$E,PX=V,DX=At,LX=R,WN=zi,GN=Rs,kX=Ii,lb=_t,zN=ri,_3=Du,KN=he,XE=cf,S3=qi,MX=Up,y3=m3,qN=Ou,C3=H,T3=bs,UX=Qg,b3=z,FX=Av,YN=rm,JE=zr.exports,R3=Bp,I3=wa,w3=Ar,VX=qE,jX=Bi,BX=Ef,O3=nm,ub=SU.forEach,us=Zh("hidden"),db="Symbol",A3=w3("toPrimitive"),$X=O3.set,N3=O3.getterFor(db),cl=Object.prototype,oh=$N.Symbol,Gf=oh&&oh.prototype,x3=$N.TypeError,XN=$N.QObject,QE=OX("JSON","stringify"),P3=C3.f,ah=T3.f,D3=y3.f,HX=b3.f,L3=NX([].push),Ku=JE("symbols"),ZE=JE("op-symbols"),JN=JE("string-to-symbol-registry"),QN=JE("symbol-to-string-registry"),WX=JE("wks"),ZN=!XN||!XN.prototype||!XN.prototype.findChild,ex=d0&&HN(function(){return XE(ah({},"a",{get:function(){return ah(this,"a",{value:7}).a}})).a!=7})?function(n,r,o){var s=P3(cl,r);s&&delete cl[r],ah(n,r,o),s&&n!==cl&&ah(cl,r,s)}:ah,tx=function(n,r){var o=Ku[n]=XE(Gf);return $X(o,{type:db,tag:n,description:r}),d0||(o.description=r),o},hb=function(n,r,o){n===cl&&hb(ZE,r,o),GN(n);var s=zN(r);return GN(o),oo(Ku,s)?(o.enumerable?(oo(n,us)&&n[us][s]&&(n[us][s]=!1),o=XE(o,{enumerable:KN(0,!1)})):(oo(n,us)||ah(n,us,KN(1,{})),n[us][s]=!0),ex(n,s,o)):ah(n,s,o)},nx=function(n,r){GN(n);var o=lb(r),s=S3(o).concat(rx(o));return ub(s,function(l){d0&&!YE(k3,o,l)||hb(n,l,o[l])}),n},k3=function(n){var r=zN(n),o=YE(HX,this,r);return!(this===cl&&oo(Ku,r)&&!oo(ZE,r))&&(!(o||!oo(this,r)||!oo(Ku,r)||oo(this,us)&&this[us][r])||o)},M3=function(n,r){var o=lb(n),s=zN(r);if(o!==cl||!oo(Ku,s)||oo(ZE,s)){var l=P3(o,s);return!l||!oo(Ku,s)||oo(o,us)&&o[us][s]||(l.enumerable=!0),l}},U3=function(n){var r=D3(lb(n)),o=[];return ub(r,function(s){oo(Ku,s)||oo(R3,s)||L3(o,s)}),o},rx=function(n){var r=n===cl,o=D3(r?ZE:lb(n)),s=[];return ub(o,function(l){!oo(Ku,l)||r&&!oo(cl,l)||L3(s,Ku[l])}),s};if(Wf||(YN(Gf=(oh=function(){if(LX(Gf,this))throw x3("Symbol is not a constructor");var n=arguments.length&&arguments[0]!==void 0?_3(arguments[0]):void 0,r=I3(n),o=function(s){this===cl&&YE(o,ZE,s),oo(this,us)&&oo(this[us],r)&&(this[us][r]=!1),ex(this,r,KN(1,s))};return d0&&ZN&&ex(cl,r,{configurable:!0,set:o}),tx(r,n)}).prototype,"toString",function(){return N3(this).tag}),YN(oh,"withoutSetter",function(n){return tx(I3(n),n)}),b3.f=k3,T3.f=hb,UX.f=nx,C3.f=M3,MX.f=y3.f=U3,qN.f=rx,VX.f=function(n){return tx(w3(n),n)},d0&&ah(Gf,"description",{configurable:!0,get:function(){return N3(this).description}})),u0({global:!0,wrap:!0,forced:!Wf,sham:!Wf},{Symbol:oh}),ub(S3(WX),function(n){jX(n)}),u0({target:db,stat:!0,forced:!Wf},{for:function(n){var r=_3(n);if(oo(JN,r))return JN[r];var o=oh(r);return JN[r]=o,QN[o]=r,o},keyFor:function(n){if(!WN(n))throw x3(n+" is not a symbol");if(oo(QN,n))return QN[n]},useSetter:function(){ZN=!0},useSimple:function(){ZN=!1}}),u0({target:"Object",stat:!0,forced:!Wf,sham:!d0},{create:function(n,r){return r===void 0?XE(n):nx(XE(n),r)},defineProperty:hb,defineProperties:nx,getOwnPropertyDescriptor:M3}),u0({target:"Object",stat:!0,forced:!Wf},{getOwnPropertyNames:U3,getOwnPropertySymbols:rx}),u0({target:"Object",stat:!0,forced:HN(function(){qN.f(1)})},{getOwnPropertySymbols:function(n){return qN.f(kX(n))}}),QE&&u0({target:"JSON",stat:!0,forced:!Wf||HN(function(){var n=oh();return QE([n])!="[null]"||QE({a:n})!="{}"||QE(Object(n))!="{}"})},{stringify:function(n,r,o){var s=FX(arguments),l=r;if((DX(r)||n!==void 0)&&!WN(n))return xX(r)||(r=function(d,p){if(PX(l)&&(p=YE(l,this,d,p)),!WN(p))return p}),s[1]=r,AX(QE,null,s)}}),!Gf[A3]){var GX=Gf.valueOf;YN(Gf,A3,function(n){return YE(GX,this)})}BX(oh,db),R3[us]=!0,Bi("asyncIterator"),Bi("hasInstance"),Bi("isConcatSpreadable"),Bi("iterator"),Bi("match"),Bi("matchAll"),Bi("replace"),Bi("search"),Bi("species"),Bi("split"),Bi("toPrimitive"),Bi("toStringTag"),Bi("unscopables"),Ef(O.JSON,"JSON",!0);var zX=it.Symbol;Bi("asyncDispose"),Bi("dispose"),Bi("matcher"),Bi("metadata"),Bi("observable"),Bi("patternMatch"),Bi("replaceAll");var F3=zX,V3=qE.f("asyncIterator"),KX=V3;function j3(n){this.wrapped=n}function e_(n){var r,o;function s(d,p){try{var _=n[d](p),S=_.value,I=S instanceof j3;BN.resolve(I?S.wrapped:S).then(function(b){I?s(d==="return"?"return":"next",b):l(_.done?"return":"normal",b)},function(b){s("throw",b)})}catch(b){l("throw",b)}}function l(d,p){switch(d){case"return":r.resolve({value:p,done:!0});break;case"throw":r.reject(p);break;default:r.resolve({value:p,done:!1})}(r=r.next)?s(r.key,r.arg):o=null}this._invoke=function(d,p){return new BN(function(_,S){var I={key:d,arg:p,resolve:_,reject:S,next:null};o?o=o.next=I:(r=o=I,s(d,p))})},typeof n.return!="function"&&(this.return=void 0)}function _c(n){return function(){return new e_(n.apply(this,arguments))}}function Zt(n){return new j3(n)}e_.prototype[typeof F3=="function"&&KX||"@@asyncIterator"]=function(){return this},e_.prototype.next=function(n){return this._invoke("next",n)},e_.prototype.throw=function(n){return this._invoke("throw",n)},e_.prototype.return=function(n){return this._invoke("return",n)};var qX=qE.f("iterator");function fb(n,r){var o={},s=!1;function l(d,p){return s=!0,p=new BN(function(_){_(n[d](p))}),{done:!1,value:r(p)}}return o[F3!==void 0&&qX||"@@iterator"]=function(){return this},o.next=function(d){return s?(s=!1,d):l("next",d)},typeof n.throw=="function"&&(o.throw=function(d){if(s)throw s=!1,d;return l("throw",d)}),typeof n.return=="function"&&(o.return=function(d){return s?(s=!1,d):l("return",d)}),o}var B3=V3,Hr={exports:{}};function $3(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function H3(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?$3(Object(o),!0).forEach(function(s){L(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):$3(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}function ix(n,r,o,s,l,d,p){let _=[],S=[],I=[],b=[],A=!1,F=!1;if(Hr.exports.parse(n).mediaDescriptions.forEach(W=>{p&&p!==W.attributes.direction||(W.media.mediaType!=="video"||A||(S=W.attributes.payloads,b=W.attributes.extmaps,A=!0),W.media.mediaType!=="audio"||F||(_=W.attributes.payloads,I=W.attributes.extmaps,F=!0))}),!b||S.length===0)throw new Error("Cannot get video capabilities from SDP.");if(!I||_.length===0)throw new Error("Cannot get audio capabilities from SDP.");return S.forEach(W=>{var Z;(Z=W.rtpMap)!==null&&Z!==void 0&&Z.clockRate&&(W.rtpMap.clockRate=parseInt(W.rtpMap.clockRate))}),_.forEach(W=>{var Z;(Z=W.rtpMap)!==null&&Z!==void 0&&Z.clockRate&&(W.rtpMap.clockRate=parseInt(W.rtpMap.clockRate))}),r&&(_=_.filter(W=>{var Z;return((Z=W.rtpMap)===null||Z===void 0?void 0:Z.encodingName.toLowerCase())!=="rtx"}),S=S.filter(W=>{var Z;return((Z=W.rtpMap)===null||Z===void 0?void 0:Z.encodingName.toLowerCase())!=="rtx"})),o&&(S=S.filter(W=>{var Z;return!/(red)|(ulpfec)|(flexfec)/i.test(((Z=W.rtpMap)===null||Z===void 0?void 0:Z.encodingName)||"")})),s&&(_=_.filter(W=>{var Z;return!/(red)|(ulpfec)|(flexfec)/i.test(((Z=W.rtpMap)===null||Z===void 0?void 0:Z.encodingName)||"")})),l&&(l==null?void 0:l.length)>0&&(_=_.filter(W=>{var Z;return l.includes(((Z=W.rtpMap)===null||Z===void 0?void 0:Z.encodingName.toLowerCase())||"")})),d&&(d==null?void 0:d.length)>0&&(S=S.filter(W=>{var Z;return d.includes(((Z=W.rtpMap)===null||Z===void 0?void 0:Z.encodingName.toLowerCase())||"")})),{audioCodecs:_,videoCodecs:S,audioExtensions:I,videoExtensions:b}}function zf(n){const r=Hr.exports.parse(n);let o,s;for(const l of r.mediaDescriptions){if(!o){const d=l.attributes.iceUfrag,p=l.attributes.icePwd;if(!d||!p)throw new Error("Cannot get iceUfrag or icePwd from SDP.");o={iceUfrag:d,icePwd:p}}if(!s){const d=l.attributes.fingerprints;d.length>0&&(s={fingerprints:d})}}if(!s&&r.attributes.fingerprints.length>0&&(s={fingerprints:r.attributes.fingerprints}),!s||!o)throw new Error("Cannot get iceParameters or dtlsParameters from SDP.");return{iceParameters:o,dtlsParameters:s}}function W3(n,r){const o=[],s=n.attributes.ssrcGroups.filter(p=>p.semantic==="FID"),l=n.attributes.ssrcGroups.find(p=>p.semantic==="SIM"),d=n.attributes.ssrcs;if(l)l.ssrcIds.forEach(p=>{var _;const S=(_=s.find(I=>I.ssrcIds[0]===p))===null||_===void 0?void 0:_.ssrcIds[1];o.push({ssrcId:p,rtx:r?S:void 0})});else if(s.length>0){const p=s[0].ssrcIds[0],_=s[0].ssrcIds[1];o.push({ssrcId:p,rtx:r?_:void 0})}else{if(d.length===0)throw new Error("No ssrcs found on local media description.");o.push({ssrcId:d[0].ssrcId})}return o}function G3(n,r){const{cname:o}=n;let s;r&&r.ip&&typeof r.port=="number"?(s=[{foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:r.ip,port:r.port.toString(),type:"host",extension:{}}],j.debug("Using remote candidate from AP ".concat(r.ip,":").concat(r.port)),r.ip6&&(s.push({foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:r.ip6,port:r.port.toString(),type:"host",extension:{}}),j.debug("Using IPV6 remote candidate from AP ".concat(r.ip6,":").concat(r.port)))):s=n.iceParameters.candidates.map(_=>({foundation:_.foundation,componentId:"1",transport:_.protocol,priority:_.priority.toString(),connectionAddress:_.ip,port:_.port.toString(),type:_.type,extension:{}}));const l={fingerprints:n.dtlsParameters.fingerprints.map(_=>({hashFunction:_.algorithm,fingerprint:_.fingerprint}))},d={iceUfrag:n.iceParameters.iceUfrag,icePwd:n.iceParameters.icePwd};let p;switch(n.dtlsParameters.role){case"server":p="passive";break;case"client":p="active";break;case"auto":p="actpass"}return{dtlsParameters:l,iceParameters:d,candidates:s,rtpCapabilities:sx(n.rtpCapabilities),setup:p,cname:o}}function Ms(n,r,o){const s=[],l=[];return n.forEach(d=>{let{ssrcId:p,rtx:_}=d;const S=Yn(8,"track-"),I={ssrcId:p,attributes:H3({label:S,mslabel:o=o||Yn(10,""),msid:"".concat(o," ").concat(S)},r&&{cname:r})};if(s.push(I),_!==void 0){const b={ssrcId:_,attributes:H3({label:S,mslabel:o,msid:"".concat(o," ").concat(S)},r&&{cname:r})};s.push(b),l.push({semantic:"FID",ssrcIds:[p,_]})}}),n.length>1&&l.push({semantic:"SIM",ssrcIds:n.map(d=>{let{ssrcId:p}=d;return p})}),{ssrcs:s,ssrcGroups:l}}function h0(n,r){r instanceof no&&n.attributes.payloads.forEach(o=>{var s;const l=(s=o.rtpMap)===null||s===void 0?void 0:s.encodingName.toLowerCase();if(!l||["opus","pcmu","pcma","g722"].indexOf(l)===-1)return;o.fmtp||(o.fmtp={parameters:{}}),o.fmtp.parameters.minptime="10",o.fmtp.parameters.useinbandfec="1";const d=r._encoderConfig;d&&l!=="pcmu"&&l!=="pcma"&&l!=="g722"&&(d.bitrate&&!nr()&&(o.fmtp.parameters.maxaveragebitrate="".concat(Math.floor(1e3*d.bitrate))),d.sampleRate&&(o.fmtp.parameters.maxplaybackrate="".concat(d.sampleRate),o.fmtp.parameters["sprop-maxcapturerate"]="".concat(d.sampleRate)),d.stereo&&(o.fmtp.parameters.stereo="1",o.fmtp.parameters["sprop-stereo"]="1"))})}function ox(n){const r=n.attributes.unrecognized.findIndex(o=>o.attField==="x-google-flag"&&o.attValue==="conference");r!==-1&&n.attributes.unrecognized.splice(r,1)}function ax(n,r){if(!(r instanceof $r&&r._encoderConfig&&r._hints.indexOf(ai.SCREEN_TRACK)===-1))return;const o=r._encoderConfig;Pr().supportMinBitrate&&o.bitrateMin&&n.attributes.payloads.forEach(s=>{var l;["h264","h265","vp8","vp9","av1"].includes(((l=s.rtpMap)===null||l===void 0?void 0:l.encodingName.toLowerCase())||"")&&(s.fmtp||(s.fmtp={parameters:{}}),s.fmtp.parameters["x-google-min-bitrate"]="".concat(o.bitrateMin))}),Pr().supportMinBitrate&&!r._hints.includes(ai.LOW_STREAM)&&o.bitrateMax&&n.attributes.payloads.forEach(s=>{var l;["h264","h265","vp8","vp9","av1"].includes(((l=s.rtpMap)===null||l===void 0?void 0:l.encodingName.toLowerCase())||"")&&(s.fmtp||(s.fmtp={parameters:{}}),s.fmtp.parameters["x-google-start-bitrate"]="".concat(de("X_GOOGLE_START_BITRATE")||Math.floor(o.bitrateMax)))})}function z3(n){if(n.media.mediaType!=="video")return;const r=un();if(r.name!==gn.SAFARI&&r.os!==Oi.IOS)return;const o=n.attributes.extmaps.findIndex(s=>/video-orientation/g.test(s.extensionName));o!==-1&&n.attributes.extmaps.splice(o,1)}function pb(n,r,o){if(!r)return;let s,l;if(n.media.mediaType==="video"?(s=o.videoExtensions,l=o.videoCodecs):(s=o.audioExtensions,l=o.audioCodecs),r.twcc===!0){const d=s.find(p=>p.extensionName==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01");d&&(n.attributes.extmaps.find(p=>p.extensionName==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01")||n.attributes.extmaps.push({entry:d.entry,extensionName:"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"}),function(p,_){return _.filter(S=>!!p.find(I=>I.payloadType===S.payloadType&&!!I.rtcpFeedbacks.find(b=>b.type==="transport-cc")))}(l,n.attributes.payloads).forEach(p=>{p.rtcpFeedbacks.find(_=>_.type==="transport-cc")||p.rtcpFeedbacks.push({type:"transport-cc"})}))}else if(r.twcc===!1){const d=n.attributes.extmaps.findIndex(p=>p.extensionName==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01");d!==-1&&n.attributes.extmaps.splice(d,1),n.attributes.payloads.forEach(p=>{const _=p.rtcpFeedbacks.findIndex(S=>S.type==="transport-cc");_!==-1&&p.rtcpFeedbacks.splice(_,1)})}if(r.remb===!0){const d=s.find(p=>p.extensionName==="http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time");d&&(n.attributes.extmaps.find(p=>p.extensionName==="http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time")||n.attributes.extmaps.push({entry:d.entry,extensionName:"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"}),function(p,_){return _.filter(S=>!!p.find(I=>I.payloadType===S.payloadType&&!!I.rtcpFeedbacks.find(b=>b.type==="goog-remb")))}(l,n.attributes.payloads).forEach(p=>{p.rtcpFeedbacks.find(_=>_.type==="goog-remb")||p.rtcpFeedbacks.push({type:"goog-remb"})}))}else if(r.remb===!1){const d=n.attributes.extmaps.findIndex(p=>p.extensionName==="http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time");d!==-1&&n.attributes.extmaps.splice(d,1),n.attributes.payloads.forEach(p=>{const _=p.rtcpFeedbacks.findIndex(S=>S.type==="goog-remb");_!==-1&&p.rtcpFeedbacks.splice(_,1)})}}function K3(n,r,o){if(nr()||n.media.mediaType!=="video"||!(r instanceof $r)||o!=="vp9"&&o!=="vp8"||o==="vp8"&&!de("SIMULCAST")||r._scalabiltyMode===void 0||r._scalabiltyMode.numSpatialLayers<=1)return;const s=o==="vp8"?2:r._scalabiltyMode.numSpatialLayers,l=n.attributes.ssrcs[0],d=n.attributes.ssrcGroups.find(_=>_.semantic==="FID"&&_.ssrcIds[0]===l.ssrcId),p={semantic:"SIM",ssrcIds:[l.ssrcId]};for(let _=1;_<s;_++)n.attributes.ssrcs.push({ssrcId:l.ssrcId+_,attributes:Br(l.attributes)}),p.ssrcIds.push(l.ssrcId+_),d&&(n.attributes.ssrcs.push({ssrcId:d.ssrcIds[1]+_,attributes:Br(l.attributes)}),n.attributes.ssrcGroups.push({semantic:"FID",ssrcIds:[l.ssrcId+_,d.ssrcIds[1]+_]}));n.attributes.ssrcGroups.unshift(p)}async function q3(n,r,o,s,l){const d=new RTCPeerConnection;d.addTransceiver("video",{direction:"sendonly"}),d.addTransceiver("audio",{direction:"sendonly"}),d.addTransceiver("video",{direction:"recvonly"}),d.addTransceiver("audio",{direction:"recvonly"});const p=(await d.createOffer()).sdp,_=ix(p,n,r,o,s,l,"sendonly"),S=ix(p,n,r,o,s,l,"recvonly"),I={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},b={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},A={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]};if(mb(_,S,"videoExtensions",I,b,A),mb(_,S,"videoCodecs",I,b,A),mb(_,S,"audioExtensions",I,b,A),mb(_,S,"audioCodecs",I,b,A),de("RAISE_H264_BASELINE_PRIORITY")){const F=A.videoCodecs.findIndex(W=>{var Z,ee;return((Z=W.rtpMap)===null||Z===void 0?void 0:Z.encodingName.toLocaleLowerCase())==="h264"&&((ee=W.fmtp)===null||ee===void 0?void 0:ee.parameters["profile-level-id"])==="42001f"});if(F!==-1){const W=A.videoCodecs.findIndex(Z=>{var ee;return((ee=Z.rtpMap)===null||ee===void 0?void 0:ee.encodingName.toLocaleLowerCase())==="h264"});if(W<F){j.debug("raising H264 baseline profile priority");const Z=A.videoCodecs[F];A.videoCodecs.splice(F,1),A.videoCodecs.splice(W,0,Z)}W!==-1&&(b.videoCodecs=b.videoCodecs.filter(Z=>{var ee,te;return!(((ee=Z.rtpMap)===null||ee===void 0?void 0:ee.encodingName.toLocaleLowerCase())==="h264"&&((te=Z.fmtp)===null||te===void 0?void 0:te.parameters["profile-level-id"])!=="42001f")})),W!==-1&&de("FILTER_SEND_H264_BASELINE")&&(I.videoCodecs=I.videoCodecs.filter(Z=>{var ee,te;return!(((ee=Z.rtpMap)===null||ee===void 0?void 0:ee.encodingName.toLocaleLowerCase())==="h264"&&((te=Z.fmtp)===null||te===void 0?void 0:te.parameters["profile-level-id"])!=="42001f")}))}}try{d.close()}catch{}return{send:I,recv:b,sendrecv:A}}function mb(n,r,o,s,l,d){if(o==="videoExtensions"||o==="audioExtensions"){const p=[];return n[o].forEach(_=>{r[o].some((S,I)=>{if(_.entry===S.entry&&_.extensionName===S.extensionName)return p.push(I),!0})?d[o].push(_):s[o].push(_)}),void r[o].forEach((_,S)=>{p.indexOf(S)===-1&&l[o].push(_)})}if(o==="videoCodecs"||o==="audioCodecs"){const p=[];return n[o].forEach(_=>{r[o].some((S,I)=>{if(_.payloadType===S.payloadType&&JSON.stringify(_)===JSON.stringify(S))return p.push(I),!0})?d[o].push(_):s[o].push(_)}),void r[o].forEach((_,S)=>{p.indexOf(S)===-1&&l[o].push(_)})}}function sx(n){const{send:r,recv:o,sendrecv:s}=n;if(!s){if(!r||!o)throw new Error("cannot merge rtp capabilities because one of send or recv is empty!");return{send:r,recv:o}}let l,d;return r?(l={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},l.audioCodecs=[...r.audioCodecs,...s.audioCodecs],l.videoCodecs=[...r.videoCodecs,...s.videoCodecs],l.audioExtensions=[...r.audioExtensions,...s.audioExtensions],l.videoExtensions=[...r.videoExtensions,...s.videoExtensions]):l=s,o?(d={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},d.audioCodecs=[...o.audioCodecs,...s.audioCodecs],d.videoCodecs=[...o.videoCodecs,...s.videoCodecs],d.audioExtensions=[...o.audioExtensions,...s.audioExtensions],d.videoExtensions=[...o.videoExtensions,...s.videoExtensions]):d=s,{send:l,recv:d}}function sh(n){n.media.mediaType==="audio"&&n.attributes.payloads.filter(r=>{var o;return((o=r.rtpMap)===null||o===void 0?void 0:o.encodingName.toLowerCase())==="opus"}).forEach(r=>{r.fmtp||(r.fmtp={parameters:{}}),r.fmtp.parameters.stereo="1",r.fmtp.parameters["sprop-stereo"]="1"})}function Y3(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function X3(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?Y3(Object(o),!0).forEach(function(s){L(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):Y3(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}(function(n,r){n.exports=(()=>{var o={8:(d,p,_)=>{_.r(p),_.d(p,{Parser:()=>Bn,Printer:()=>_a,parse:()=>yt,print:()=>ln});const S=`
`,I="".concat("\r").concat(S),b=" ";let A;function F(je){return je>="0"&&je<="9"}function W(je){return je>="!"&&je<="~"}function Z(je){return W(je)||je>=""&&je<="ÿ"}function ee(je){return je==="!"||je>="#"&&je<="'"||je>="*"&&je<="+"||je>="-"&&je<="."||je>="0"&&je<="9"||je>="A"&&je<="Z"||je>="^"&&je<="~"}function te(je){return je>="1"&&je<="9"}function Ee(je){return je>="A"&&je<="Z"||je>="a"&&je<="z"}function ye(je){return je==="d"||je==="h"||je==="m"||je==="s"}function Pe(je){return je>""&&je<"	"||je>"\v"&&je<"\f"||je>""&&je<"ÿ"}function Xe(je){return Ee(je)||F(je)||je==="+"||je==="/"}function ke(je){return F(je)||Ee(je)||je==="+"||je==="/"||je==="-"||je==="_"}function Ve(je){return Ee(je)||F(je)||je==="+"||je==="/"}function xe(je,U){var ne=Object.keys(je);if(Object.getOwnPropertySymbols){var se=Object.getOwnPropertySymbols(je);U&&(se=se.filter(function(Oe){return Object.getOwnPropertyDescriptor(je,Oe).enumerable})),ne.push.apply(ne,se)}return ne}function $e(je){for(var U=1;U<arguments.length;U++){var ne=arguments[U]!=null?arguments[U]:{};U%2?xe(Object(ne),!0).forEach(function(se){En(je,se,ne[se])}):Object.getOwnPropertyDescriptors?Object.defineProperties(je,Object.getOwnPropertyDescriptors(ne)):xe(Object(ne)).forEach(function(se){Object.defineProperty(je,se,Object.getOwnPropertyDescriptor(ne,se))})}return je}function En(je,U,ne){return U in je?Object.defineProperty(je,U,{value:ne,enumerable:!0,configurable:!0,writable:!0}):je[U]=ne,je}(function(je){je.VERSION="v",je.ORIGIN="o",je.SESSION_NAME="s",je.INFORMATION="i",je.URI="u",je.EMAIL="e",je.PHONE="p",je.CONNECTION="c",je.BANDWIDTH="b",je.TIME="t",je.REPEAT="r",je.ZONE_ADJUSTMENTS="z",je.KEY="k",je.ATTRIBUTE="a",je.MEDIA="m"})(A||(A={}));class ct{consumeText(U,ne){let se=ne;for(;se<U.length;){const Oe=U[se];if(Oe==="\0"||Oe==="\r"||Oe===S)break;se+=1}if(se-ne==0)throw new Error("Invalid text, at ".concat(U));return se}consumeUnicastAddress(U,ne,se){return this.consumeTill(U,ne,b)}consumeOneOrMore(U,ne,se){let Oe=ne;for(;se(U[Oe]);)Oe++;if(Oe-ne==0)throw new Error("Invalid rule at ".concat(ne,"."));return Oe}consumeSpace(U,ne){if(U[ne]===b)return ne+1;throw new Error("Invalid space at ".concat(ne,"."))}consumeIP4Address(U,ne){let se=ne;for(let Oe=0;Oe<4;Oe++)if(se=this.consumeDecimalUChar(U,se),Oe!==3){if(U[se]!==".")throw new Error("Invalid IP4 address.");se++}return se}consumeDecimalUChar(U,ne){let se=ne;for(let Rt=0;Rt<3&&F(U[se]);Rt++,se++);if(se-ne==0)throw new Error("Invalid decimal uchar.");const Oe=parseInt(U.slice(ne,se));if(Oe>=0&&Oe<=255)return se;throw new Error("Invalid decimal uchar")}consumeIP6Address(U,ne){let se=this.consumeHexpart(U,ne);return U[se]===":"&&(se+=1,se=this.consumeIP4Address(U,se)),se}consumeHexpart(U,ne){let se=ne;if(U[se]===":"&&U[se+1]===":"){se+=2;try{se=this.consumeHexseq(U,se)}catch{}return se}if(se=this.consumeHexseq(U,se),U[se]===":"&&U[se+1]===":"){se+=2;try{se=this.consumeHexseq(U,se)}catch{}return se}return se}consumeHexseq(U,ne){let se=ne;for(;se=this.consumeHex4(U,se),U[se]===":"&&U[se+1]!==":";)se+=1;return se}consumeHex4(U,ne){let se=0;for(;se<4;se++)if(!((Oe=U[ne+se])>="0"&&Oe<="9"||Oe>="a"&&Oe<="f"||Oe>="A"&&Oe<="F")){if(se===0)throw new Error("Invalid hex 4");break}var Oe;return ne+se}consumeFQDN(U,ne){let se=ne;for(;F(U[se])||Ee(U[se])||U[se]==="-"||U[se]===".";)se+=1;if(se-ne<4)throw new Error("Invalid FQDN");return se}consumeExtnAddr(U,ne){return this.consumeOneOrMore(U,ne,Z)}consumeMulticastAddress(U,ne,se){switch(se){case"IP4":case"ip4":return this.consumeIP4MulticastAddress(U,ne);case"IP6":case"ip6":return this.consumeIP6MulticastAddress(U,ne);default:try{return this.consumeFQDN(U,ne)}catch{return this.consumeExtnAddr(U,ne)}}}consumeIP6MulticastAddress(U,ne){const se=this.consumeHexpart(U,ne);return U[se]==="/"?this.consumeInteger(U,se+1):se}consumeIP4MulticastAddress(U,ne){let se=ne+3;const Oe=U.slice(ne,se),Rt=parseInt(Oe);if(Rt<224||Rt>239)throw new Error("Invalid IP4 multicast address, IPv4 multicast addresses may be in the range 224.0.0.0 to 239.255.255.255.");for(let $n=0;$n<3;$n++){if(U[se]!==".")throw new Error("Invalid IP4 multicast address.");se+=1,se=this.consumeDecimalUChar(U,se)}return U[se]==="/"&&(se+=1),se=this.consumeTTL(U,se),U[se]==="/"&&(se=this.consumeInteger(U,se)),se}consumeInteger(U,ne){if(!te(U[ne]))throw new Error("Invalid integer.");for(ne+=1;F(U[ne]);)ne+=1;return ne}consumeTTL(U,ne){if(U[ne]==="0")return ne+1;if(!te(U[ne]))throw new Error("Invalid TTL.");ne+=1;for(let se=0;se<2&&F(U[ne]);se++)ne+=1;return ne}consumeToken(U,ne){return this.consumeOneOrMore(U,ne,ee)}consumeTime(U,ne){let se=ne;if(U[se]==="0")return se+1;for(te(U[se])&&(se+=1);F(U[se]);)se++;if(se-ne<10)throw new Error("Invalid time");return se}consumeAddress(U,ne){return this.consumeTill(U,ne,b)}consumeTypedTime(U,ne){let se=ne;return se=this.consumeOneOrMore(U,se,F),ye(U[se])?se+1:se}consumeRepeatInterval(U,ne){if(!te(U[ne]))throw new Error("Invalid repeat interval");for(ne+=1;F(U[ne]);)ne+=1;return ye(U[ne])&&(ne+=1),ne}consumePort(U,ne){return this.consumeOneOrMore(U,ne,F)}consume(U,ne,se){for(let Oe=0;Oe<se.length;Oe++){if(ne+Oe>=U.length)throw new Error("consume exceeding value length");if(U[ne+Oe]!==se[Oe])throw new Error("consume ".concat(se," failed at ").concat(Oe))}return ne+se.length}consumeTill(U,ne,se){let Oe=ne;for(;Oe<U.length&&(typeof se!="string"||U[Oe]!==se)&&(typeof se!="function"||!se(U[Oe]));)Oe++;return Oe}}class Bn extends ct{constructor(){super(),En(this,"records",[]),En(this,"currentLine",0)}parse(U){const ne=this.probeEOL(U);this.records=U.split(ne).filter(Ko=>!!Ko.trim()).map(this.parseLine),this.currentLine=0;const se=this.parseVersion(),Oe=this.parseOrigin(),Rt=this.parseSessionName(),$n=this.parseInformation(),Hi=this.parseUri(),Tc=this.parseEmail(),fh=this.parsePhone(),js=this.parseConnection(),ph=this.parseBandWidth(),E0=this.parseTimeFields(),Er=this.parseKey(),Wr=this.parseSessionAttribute(),Mn=this.parseMediaDescription();if(this.currentLine!==this.records.length)throw new Error("parsing failed, non exhaustive sdp lines.");return{version:se,origin:Oe,sessionName:Rt,information:$n,uri:Hi,emails:Tc,phones:fh,connection:js,bandwidths:ph,timeFields:E0,key:Er,attributes:Wr,mediaDescriptions:Mn}}getCurrentRecord(){const U=this.records[this.currentLine];if(!U)throw new Error("Record doesn't exit.");return U}probeEOL(U){for(let ne=0;ne<U.length;ne++)if(U[ne]===S)return U[ne-1]==="\r"?I:S;throw new Error("Invalid newline character.")}parseLine(U,ne){if(U.length<2)throw new Error("Invalid sdp line, sdp line should be of form <type>=<value>.");const se=U[0];if(U[1]!=="=")throw new Error('Invalid sdp line, <type> should be a single character followed by an "=" sign.');return{type:se,value:U.slice(2),line:ne,cur:0}}parseSessionAttribute(){const U=new Lr;for(;this.currentLine<this.records.length;){const ne=this.getCurrentRecord();if(ne.type!==A.ATTRIBUTE)break;const se={attField:this.extractOneOrMore(ne,Oe=>ee(Oe)&&Oe!==":"),_cur:0};ne.value[ne.cur]===":"&&(ne.cur+=1,se.attValue=this.extractOneOrMore(ne,Pe)),U.parse(se),this.currentLine++}return U.digest()}parseMediaAttributes(U){const ne=new $i(U);for(;this.currentLine<this.records.length;){const se=this.getCurrentRecord();if(se.type!==A.ATTRIBUTE)break;const Oe={attField:this.extractOneOrMore(se,Rt=>ee(Rt)&&Rt!==":"),_cur:0};se.value[se.cur]===":"&&(se.cur+=1,Oe.attValue=this.extractOneOrMore(se,Pe)),ne.parse(Oe),this.currentLine++}return ne.digest()}parseKey(){const U=this.getCurrentRecord();if(U.type===A.KEY){if(U.value==="prompt"||U.value==="clear:"||U.value==="base64:"||U.value==="uri:")return U.value;throw this.currentLine++,new Error("Invalid key.")}}parseZone(){const U=this.getCurrentRecord();if(U.type===A.ZONE_ADJUSTMENTS){const ne=[];for(;;)try{const se=this.extract(U,this.consumeTime);this.consumeSpaceForRecord(U);let Oe=!1;U.value[U.cur]==="-"&&(Oe=!0,U.cur+=1);const Rt=this.extract(U,this.consumeTypedTime);ne.push({time:se,typedTime:Rt,back:Oe})}catch{break}if(ne.length===0)throw new Error("Invalid zone adjustments");return this.currentLine++,ne}return[]}parseRepeat(){const U=[];for(;;){const ne=this.getCurrentRecord();if(ne.type!==A.REPEAT)break;{const se=this.extract(ne,this.consumeRepeatInterval),Oe=this.parseTypedTime(ne);U.push({repeatInterval:se,typedTimes:Oe}),this.currentLine++}}return U}parseTypedTime(U){const ne=[];for(;;)try{this.consumeSpaceForRecord(U),ne.push(this.extract(U,this.consumeTypedTime))}catch{break}if(ne.length===0)throw new Error("Invalid typed time.");return ne}parseTime(){const U=this.getCurrentRecord(),ne=this.extract(U,this.consumeTime);this.consumeSpaceForRecord(U);const se=this.extract(U,this.consumeTime);return this.currentLine++,{startTime:ne,stopTime:se}}parseBandWidth(){const U=[];for(;this.currentLine<this.records.length;){const ne=this.getCurrentRecord();if(ne.type!==A.BANDWIDTH)break;{const se=this.extractOneOrMore(ne,ee);if(ne.value[ne.cur]!==":")throw new Error("Invalid bandwidth field.");ne.cur++;const Oe=this.extractOneOrMore(ne,F);U.push({bwtype:se,bandwidth:Oe}),this.currentLine++}}return U}parseVersion(){const U=this.getCurrentRecord();if(U.type!==A.VERSION)throw new Error("first sdp record must be version");const ne=U.value.slice(0,this.consumeOneOrMore(U.value,0,F));if(ne.length!==U.value.length)throw new Error('invalid proto version, "v='.concat(U.value,'"'));return this.currentLine++,ne}parseOrigin(){const U=this.getCurrentRecord();if(U.type!==A.ORIGIN)throw new Error("second line of sdp must be origin");const ne=this.extractOneOrMore(U,Z);this.consumeSpaceForRecord(U);const se=this.extractOneOrMore(U,F);this.consumeSpaceForRecord(U);const Oe=this.extractOneOrMore(U,F);this.consumeSpaceForRecord(U);const Rt=this.extractOneOrMore(U,ee);this.consumeSpaceForRecord(U);const $n=this.extractOneOrMore(U,ee);this.consumeSpaceForRecord(U);const Hi=this.extract(U,this.consumeUnicastAddress);return this.currentLine++,{username:ne,sessId:se,sessVersion:Oe,nettype:Rt,addrtype:$n,unicastAddress:Hi}}parseSessionName(){const U=this.getCurrentRecord();if(U.type===A.SESSION_NAME){const ne=this.extract(U,this.consumeText);return this.currentLine++,ne}}parseInformation(){const U=this.getCurrentRecord();if(U.type!==A.INFORMATION)return;const ne=this.extract(U,this.consumeText);return this.currentLine++,ne}parseUri(){const U=this.getCurrentRecord();if(U.type===A.URI)return this.currentLine++,U.value}parseEmail(){const U=[];for(;;){const ne=this.getCurrentRecord();if(ne.type!==A.EMAIL)break;U.push(ne.value),this.currentLine++}return U}parsePhone(){const U=[];for(;;){const ne=this.getCurrentRecord();if(ne.type!==A.PHONE)break;U.push(ne.value),this.currentLine++}return U}parseConnection(){const U=this.getCurrentRecord();if(U.type===A.CONNECTION){const ne=this.extractOneOrMore(U,ee);this.consumeSpaceForRecord(U);const se=this.extractOneOrMore(U,ee);this.consumeSpaceForRecord(U);const Oe=this.extract(U,this.consumeAddress);return this.currentLine++,{nettype:ne,addrtype:se,address:Oe}}}parseMedia(){const U=this.getCurrentRecord(),ne=this.extract(U,this.consumeToken);this.consumeSpaceForRecord(U);let se=this.extract(U,this.consumePort);U.value[U.cur]==="/"&&(U.cur+=1,se+=this.extract(U,this.consumeInteger)),this.consumeSpaceForRecord(U);const Oe=[];for(Oe.push(this.extract(U,this.consumeToken));U.value[U.cur]==="/";)U.cur+=1,Oe.push(this.extract(U,this.consumeToken));if(Oe.length===0)throw new Error("Invalid proto");const Rt=this.parseFmt(U);return this.currentLine++,{mediaType:ne,port:se,protos:Oe,fmts:Rt}}parseTimeFields(){const U=[];for(;this.getCurrentRecord().type===A.TIME;){const ne=this.parseTime(),se=this.parseRepeat(),Oe=this.parseZone();U.push({time:ne,repeats:se,zones:Oe})}return U}parseMediaDescription(){const U=[];for(;this.currentLine<this.records.length&&this.getCurrentRecord().type===A.MEDIA;){const ne=this.parseMedia(),se=this.parseInformation(),Oe=this.parseConnections(),Rt=this.parseBandWidth(),$n=this.parseKey(),Hi=this.parseMediaAttributes(ne);U.push({media:ne,information:se,connections:Oe,bandwidths:Rt,key:$n,attributes:Hi})}return U}parseConnections(){const U=[];for(;this.currentLine<this.records.length&&this.getCurrentRecord().type===A.CONNECTION;)U.push(this.parseConnection());return U}parseFmt(U){const ne=[];for(;;)try{this.consumeSpaceForRecord(U),ne.push(this.extract(U,this.consumeToken))}catch{break}if(ne.length===0)throw new Error("Invalid fmts");return ne}extract(U,ne,...se){const Oe=ne.call(this,U.value,U.cur,...se),Rt=U.value.slice(U.cur,Oe);return U.cur=Oe,Rt}extractOneOrMore(U,ne){const se=this.consumeOneOrMore(U.value,U.cur,ne),Oe=U.value.slice(U.cur,se);return U.cur=se,Oe}consumeSpaceForRecord(U){if(U.value[U.cur]!==b)throw new Error("Invalid space at ".concat(U.cur,"."));U.cur+=1}}class On extends ct{constructor(...U){super(...U),En(this,"attributes",void 0),En(this,"digested",!1)}extractOneOrMore(U,ne,se){const Oe=this.consumeOneOrMore(U.attValue,U._cur,ne),Rt=U.attValue.slice(U._cur,Oe),[$n,Hi]=se||[];if(typeof $n=="number"&&Rt.length<$n)throw new Error("error in length, should be more or equal than ".concat($n," characters."));if(typeof Hi=="number"&&Rt.length>Hi)throw new Error("error in length, should be less or equal than ".concat(Hi," characters."));return U._cur=Oe,Rt}consumeAttributeSpace(U){if(U.attValue[U._cur]!==b)throw new Error("Invalid space at ".concat(U._cur,"."));U._cur+=1}extract(U,ne,...se){if(!U.attValue)throw new Error("Nothing to extract from attValue.");const Oe=ne.call(this,U.attValue,U._cur,...se),Rt=U.attValue.slice(U._cur,Oe);return U._cur=Oe,Rt}atEnd(U){if(!U.attValue)throw new Error;return U._cur>=U.attValue.length}peekChar(U){if(!U.attValue)throw new Error;return U.attValue[U._cur]}peek(U,ne){if(!U.attValue)throw new Error;for(let se=0;se<ne.length;se++)if(ne[se]!==U.attValue[U._cur+se])return!1;return!0}parseIceUfrag(U){if(this.attributes.iceUfrag)throw new Error("Invalid ice-ufrag, should be only a single line if 'a=ice-ufrag'");this.attributes.iceUfrag=this.extractOneOrMore(U,Xe,[4,256])}parseIcePwd(U){if(this.attributes.icePwd)throw new Error("Invalid ice-pwd, should be only a single line if 'a=ice-pwd'");this.attributes.icePwd=this.extractOneOrMore(U,Xe,[22,256])}parseIceOptions(U){if(this.attributes.iceOptions)throw new Error("Invalid ice-options, should be only one 'ice-options' line");const ne=[];for(;!this.atEnd(U);){ne.push(this.extractOneOrMore(U,Xe));try{this.consumeAttributeSpace(U)}catch(se){if(this.atEnd(U))break;throw se}}this.attributes.iceOptions=ne}parseFingerprint(U){const ne=this.extract(U,this.consumeToken);this.consumeAttributeSpace(U);const se=this.extract(U,this.consumeTill);this.attributes.fingerprints.push({hashFunction:ne,fingerprint:se})}parseExtmap(U){const ne=this.extractOneOrMore(U,F);let se;this.peekChar(U)==="/"&&(this.extract(U,this.consume,"/"),se=this.extract(U,this.consumeToken)),this.consumeAttributeSpace(U);const Oe=this.extract(U,this.consumeTill,b),Rt=$e($e({entry:parseInt(ne,10)},se&&{direction:se}),{},{extensionName:Oe});this.peekChar(U)===b&&(this.consumeAttributeSpace(U),Rt.extensionAttributes=this.extract(U,this.consumeTill)),this.attributes.extmaps.push(Rt)}parseSetup(U){if(this.attributes.setup)throw new Error("must only be one single 'a=setup' line.");const ne=this.extract(U,this.consumeTill);if(ne!=="active"&&ne!=="passive"&&ne!=="actpass"&&ne!=="holdconn")throw new Error("role must be one of 'active', 'passive', 'actpass', 'holdconn'.");this.attributes.setup=ne}}class Lr extends On{constructor(...U){super(...U),En(this,"attributes",{unrecognized:[],groups:[],extmaps:[],fingerprints:[],identities:[]})}parse(U){if(this.digested)throw new Error("already digested");try{switch(U.attField){case"group":this.parseGroup(U);break;case"ice-lite":this.parseIceLite();break;case"ice-ufrag":this.parseIceUfrag(U);break;case"ice-pwd":this.parseIcePwd(U);break;case"ice-options":this.parseIceOptions(U);break;case"fingerprint":this.parseFingerprint(U);break;case"setup":this.parseSetup(U);break;case"tls-id":this.parseTlsId(U);break;case"identity":this.parseIdentity(U);break;case"extmap":this.parseExtmap(U);break;case"msid-semantic":this.parseMsidSemantic(U);break;default:U.ignored=!0,this.attributes.unrecognized.push(U)}}catch(ne){throw console.error("parsing session attribute ".concat(U.attField,' error, "a=').concat(U.attField,":").concat(U.attValue,'"')),ne}if(!U.ignored&&U.attValue&&!this.atEnd(U))throw new Error("attribute parsing error")}digest(){return this.digested=!0,this.attributes}parseGroup(U){const ne=this.extract(U,this.consumeToken),se=[];for(;!this.atEnd(U)&&this.peekChar(U)===b;)this.consumeAttributeSpace(U),se.push(this.extract(U,this.consumeToken));this.attributes.groups.push({semantic:ne,identificationTag:se})}parseIceLite(){if(this.attributes.iceLite)throw new Error("Invalid ice-lite, should be only a single line of 'a=ice-lite'");this.attributes.iceLite=!0}parseTlsId(U){if(this.attributes.tlsId)throw new Error("must be only one tld-id line");this.attributes.tlsId=this.extractOneOrMore(U,ke)}parseIdentity(U){const ne=this.extractOneOrMore(U,Ve),se=[];for(;!this.atEnd(U)&&this.peekChar(U)===b;){this.consumeAttributeSpace(U);const Oe=this.extract(U,this.consumeToken);this.extract(U,this.consume,"=");const Rt=this.extractOneOrMore(U,$n=>$n!==b&&Pe($n));se.push({name:Oe,value:Rt})}this.attributes.identities.push({assertionValue:ne,extensions:se})}parseMsidSemantic(U){this.peekChar(U)===b&&this.consumeAttributeSpace(U);const ne={semantic:this.extract(U,this.consumeToken),identifierList:[]};for(;;){try{this.consumeAttributeSpace(U)}catch{break}if(this.peekChar(U)==="*"){this.extract(U,this.consume,"*"),ne.applyForAll=!0;break}{const se=this.extract(U,this.consumeTill,b);ne.identifierList.push(se)}}this.attributes.msidSemantic=ne}}class $i extends On{constructor(U){super(),En(this,"attributes",void 0),U.protos.indexOf("RTP")!==-1||U.protos.indexOf("rtp"),this.attributes={unrecognized:[],candidates:[],extmaps:[],fingerprints:[],imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:[],ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:[]}}parse(U){if(this.digested)throw new Error("already digested");try{switch(U.attField){case"extmap":this.parseExtmap(U);break;case"setup":this.parseSetup(U);break;case"ice-ufrag":this.parseIceUfrag(U);break;case"ice-pwd":this.parseIcePwd(U);break;case"ice-options":this.parseIceOptions(U);break;case"candidate":this.parseCandidate(U);break;case"remote-candidate":this.parseRemoteCandidate(U);break;case"end-of-candidates":this.parseEndOfCandidates();break;case"fingerprint":this.parseFingerprint(U);break;case"rtpmap":this.parseRtpmap(U);break;case"ptime":this.parsePtime(U);break;case"maxptime":this.parseMaxPtime(U);break;case"sendrecv":case"recvonly":case"sendonly":case"inactive":this.parseDirection(U);break;case"ssrc":this.parseSSRC(U);break;case"fmtp":this.parseFmtp(U);break;case"rtcp-fb":this.parseRtcpFb(U);break;case"rtcp-mux":this.parseRTCPMux();break;case"rtcp-mux-only":this.parseRTCPMuxOnly();break;case"rtcp-rsize":this.parseRTCPRsize();break;case"rtcp":this.parseRTCP(U);break;case"mid":this.parseMid(U);break;case"msid":this.parseMsid(U);break;case"imageattr":this.parseImageAttr(U);break;case"rid":this.parseRid(U);break;case"simulcast":this.parseSimulcast(U);break;case"sctp-port":this.parseSctpPort(U);break;case"max-message-size":this.parseMaxMessageSize(U);break;case"ssrc-group":this.parseSSRCGroup(U);break;default:U.ignored=!0,this.attributes.unrecognized.push(U)}}catch(ne){throw console.error("parsing media attribute ".concat(U.attField,' error, "a=').concat(U.attField,":").concat(U.attValue,'"')),ne}if(!U.ignored&&U.attValue&&!this.atEnd(U))throw new Error("attribute parsing error")}parseCandidate(U){const ne=this.extractOneOrMore(U,Xe,[1,32]);this.consumeAttributeSpace(U);const se=this.extractOneOrMore(U,F,[1,5]);this.consumeAttributeSpace(U);const Oe=this.extract(U,this.consumeToken);this.consumeAttributeSpace(U);const Rt=this.extractOneOrMore(U,F,[1,10]);this.consumeAttributeSpace(U);const $n=this.extract(U,this.consumeAddress);this.consumeAttributeSpace(U);const Hi=this.extract(U,this.consumePort);this.consumeAttributeSpace(U),this.extract(U,this.consume,"typ"),this.consumeAttributeSpace(U);const Tc={foundation:ne,componentId:se,transport:Oe,priority:Rt,connectionAddress:$n,port:Hi,type:this.extract(U,this.consumeToken),extension:{}};for(this.peek(U," raddr")&&(this.extract(U,this.consume," raddr"),this.consumeAttributeSpace(U),Tc.relAddr=this.extract(U,this.consumeAddress)),this.peek(U," rport")&&(this.extract(U,this.consume," rport"),this.consumeAttributeSpace(U),Tc.relPort=this.extract(U,this.consumePort));this.peekChar(U)===b;){this.consumeAttributeSpace(U);const fh=this.extract(U,this.consumeToken);this.consumeAttributeSpace(U),Tc.extension[fh]=this.extractOneOrMore(U,W)}this.attributes.candidates.push(Tc)}parseRemoteCandidate(U){const ne=[];for(;;){const se=this.extractOneOrMore(U,F,[1,5]);this.consumeAttributeSpace(U);const Oe=this.extract(U,this.consumeAddress);this.consumeAttributeSpace(U);const Rt=this.extract(U,this.consumePort);ne.push({componentId:se,connectionAddress:Oe,port:Rt});try{this.consumeAttributeSpace(U)}catch{break}}this.attributes.remoteCandidatesList.push(ne)}parseEndOfCandidates(){if(this.attributes.endOfCandidates)throw new Error("must be only one line of end-of-candidates");this.attributes.endOfCandidates=!0}parseRtpmap(U){const ne=this.extract(U,this.consumeToken);this.consumeAttributeSpace(U);const se=this.extract(U,this.consumeTill,"/");this.extract(U,this.consume,"/");const Oe={encodingName:se,clockRate:this.extractOneOrMore(U,F)};this.atEnd(U)||this.peekChar(U)!=="/"||(this.extract(U,this.consume,"/"),Oe.encodingParameters=parseInt(this.extract(U,this.consumeTill),10));const Rt=this.attributes.payloads.find($n=>$n.payloadType===parseInt(ne,10));Rt?Rt.rtpMap=Oe:this.attributes.payloads.push({payloadType:parseInt(ne,10),rtpMap:Oe,rtcpFeedbacks:[]})}parsePtime(U){if(this.attributes.ptime)throw new Error("must be only one line of ptime");this.attributes.ptime=this.extract(U,this.consumeTill)}parseMaxPtime(U){if(this.attributes.maxPtime)throw new Error("must be only one line of ptime");this.attributes.maxPtime=this.extract(U,this.consumeTill)}parseDirection(U){if(this.attributes.direction)throw new Error("must be only one line of direction info");this.attributes.direction=U.attField}parseSSRC(U){const ne=this.extractOneOrMore(U,F);this.consumeAttributeSpace(U);const se=this.extract(U,this.consumeTill,":");let Oe;this.peekChar(U)===":"&&(this.extract(U,this.consume,":"),Oe=this.extract(U,this.consumeTill));const Rt=this.attributes.ssrcs.find($n=>$n.ssrcId===parseInt(ne,10));Rt?Rt.attributes[se]=Oe:this.attributes.ssrcs.push({ssrcId:parseInt(ne,10),attributes:{[se]:Oe}})}parseFmtp(U){const ne=this.extract(U,this.consumeTill,b);this.consumeAttributeSpace(U);const se=this.extract(U,this.consumeTill),Oe={};se.split(";").forEach($n=>{let[Hi,Tc]=$n.split("=");Hi=Hi.trim();const fh=typeof Tc=="string"?Tc.trim():null;typeof Hi=="string"&&Hi.length>0&&(Oe[Hi]=fh)});const Rt=this.attributes.payloads.find($n=>$n.payloadType===parseInt(ne,10));Rt?Rt.fmtp={parameters:Oe}:this.attributes.payloads.push({payloadType:parseInt(ne,10),rtcpFeedbacks:[],fmtp:{parameters:Oe}})}parseFmtParameters(U){const ne={},se=this.extract(U,this.consumeTill,"=");U._cur++;const Oe=this.extract(U,this.consumeTill,";");for(ne[se]=Oe;U.attValue[U._cur]===";";){const Rt=this.extract(U,this.consumeTill,"=");U._cur++;const $n=this.extract(U,this.consumeTill,";");ne[Rt]=$n}return ne}parseRtcpFb(U){let ne="";ne=this.peekChar(U)==="*"?this.extract(U,this.consume,"*"):this.extract(U,this.consumeTill,b),this.consumeAttributeSpace(U);const se=this.extract(U,this.consumeTill,b);let Oe;switch(se){case"trr-int":Oe={type:se,interval:this.extract(U,this.consumeTill)};break;case"ack":case"nack":default:{const Rt={type:se};this.peekChar(U)===b&&(this.consumeAttributeSpace(U),Rt.parameter=this.extract(U,this.consumeToken),this.peekChar(U)===b&&(Rt.additional=this.extract(U,this.consumeTill))),Oe=Rt}}if(ne==="*")this.attributes.rtcpFeedbackWildcards.push(Oe);else{const Rt=this.attributes.payloads.find($n=>$n.payloadType===parseInt(ne,10));Rt?Rt.rtcpFeedbacks.push(Oe):this.attributes.payloads.push({payloadType:parseInt(ne,10),rtcpFeedbacks:[Oe]})}}parseRTCPMux(){if(this.attributes.rtcpMux)throw new Error("must be single line of rtcp-mux");this.attributes.rtcpMux=!0}parseRTCPMuxOnly(){if(this.attributes.rtcpMuxOnly)throw new Error("must be single line of rtcp-only");this.attributes.rtcpMuxOnly=!0}parseRTCPRsize(){if(this.attributes.rtcpRsize)throw new Error("must be single line of rtcp-rsize");this.attributes.rtcpRsize=!0}parseRTCP(U){if(this.attributes.rtcp)throw new Error("must be single line of rtcp");const ne={port:this.extract(U,this.consumePort)};this.peekChar(U)===b&&(this.consumeAttributeSpace(U),ne.netType=this.extractOneOrMore(U,ee),this.consumeAttributeSpace(U),ne.addressType=this.extractOneOrMore(U,ee),this.consumeAttributeSpace(U),ne.address=this.extract(U,this.consumeAddress)),this.attributes.rtcp=ne}parseMsid(U){const ne={id:this.extractOneOrMore(U,ee,[1,64])};this.peekChar(U)===b&&(this.consumeAttributeSpace(U),ne.appdata=this.extractOneOrMore(U,ee,[1,64])),this.attributes.msids.push(ne)}parseImageAttr(U){this.attributes.imageattr.push(U.attValue)}parseRid(U){const ne=this.extractOneOrMore(U,Oe=>Ee(Oe)||F(Oe)||Oe==="_"||Oe==="-");this.consumeAttributeSpace(U);const se={id:ne,direction:this.extract(U,this.consumeToken),params:[]};if(this.peekChar(U)===b){if(this.consumeAttributeSpace(U),this.peek(U,"pt=")){this.extract(U,this.consume,"pt=");const Oe=[];for(;;){const Rt=this.extract(U,this.consumeToken);Oe.push(Rt);try{this.extract(U,this.consume,",")}catch{break}}se.payloads=Oe,this.peekChar(U)===b&&this.extract(U,this.consume,b)}for(;;){const Oe=this.extract(U,this.consumeToken);switch(Oe){case"depend":{const Rt={type:Oe,rids:this.extract(U,this.consume,"=").split(",")};se.params.push(Rt);break}case"max-width":case"height-width":case"max-fps":case"max-fs":case"max-br":case"max-pps":case"max-bpp":default:{const Rt={type:Oe};this.peekChar(U)==="="&&(this.extract(U,this.consume,"="),Rt.val=this.extract(U,this.consumeTill,";")),se.params.push(Rt)}}try{this.extract(U,this.consume,";")}catch{break}}}this.attributes.rids.push(se)}parseSimulcast(U){if(this.attributes.simulcast)throw new Error("must be single line of simulcast");this.attributes.simulcast=U.attValue,this.extract(U,this.consumeTill)}parseSctpPort(U){this.attributes.sctpPort=this.extractOneOrMore(U,F,[1,5])}parseMaxMessageSize(U){this.attributes.maxMessageSize=this.extractOneOrMore(U,F,[1,void 0])}digest(){return this.digested=!0,this.attributes}parseMid(U){this.attributes.mid=this.extract(U,this.consumeToken)}parseSSRCGroup(U){const ne=this.extract(U,this.consumeToken),se=[];for(;;)try{this.consumeAttributeSpace(U);const Oe=this.extract(U,this.consumeInteger);se.push(parseInt(Oe,10))}catch{break}this.attributes.ssrcGroups.push({semantic:ne,ssrcIds:se})}}function Rr(je,U,ne){return U in je?Object.defineProperty(je,U,{value:ne,enumerable:!0,configurable:!0,writable:!0}):je[U]=ne,je}class _a{constructor(){Rr(this,"eol",I)}print(U,ne){let se="";return ne&&(this.eol=ne),se+=this.printVersion(U.version),se+=this.printOrigin(U.origin),se+=this.printSessionName(U.sessionName),se+=this.printInformation(U.information),se+=this.printUri(U.uri),se+=this.printEmail(U.emails),se+=this.printPhone(U.phones),se+=this.printConnection(U.connection),se+=this.printBandwidth(U.bandwidths),se+=this.printTimeFields(U.timeFields),se+=this.printKey(U.key),se+=this.printSessionAttributes(U.attributes),se+=this.printMediaDescription(U.mediaDescriptions),se}printVersion(U){return"v=".concat(U).concat(this.eol)}printOrigin(U){return"o=".concat(U.username," ").concat(U.sessId," ").concat(U.sessVersion," ").concat(U.nettype," ").concat(U.addrtype," ").concat(U.unicastAddress).concat(this.eol)}printSessionName(U){return U?"s=".concat(U).concat(this.eol):""}printInformation(U){return U?"i=".concat(U).concat(this.eol):""}printUri(U){return U?"u=".concat(U).concat(this.eol):""}printEmail(U){let ne="";for(const se of U)ne+="e=".concat(se).concat(this.eol);return ne}printPhone(U){let ne="";for(const se of U)ne+="e=".concat(se).concat(this.eol);return ne}printConnection(U){return U?"c=".concat(U.nettype," ").concat(U.addrtype," ").concat(U.address).concat(this.eol):""}printBandwidth(U){let ne="";for(const se of U)ne+="b=".concat(se.bwtype,":").concat(se.bandwidth).concat(this.eol);return ne}printTimeFields(U){let ne="";for(const se of U){ne+="t=".concat(se.time.startTime," ").concat(se.time.startTime).concat(this.eol);for(const Oe of se.repeats)ne+="r=".concat(Oe.repeatInterval," ").concat(Oe.typedTimes.join(" ")).concat(this.eol);se.zoneAdjustments&&(ne+="z=",ne+="z=".concat(se.zoneAdjustments.map(Oe=>"".concat(Oe.time," ").concat(Oe.back?"-":""," ").concat(Oe.typedTime)).join(" ")).concat(this.eol),ne+=this.eol)}return ne}printKey(U){return U?"k=".concat(U).concat(this.eol):""}printAttributes(U){let ne="";for(const se of U)ne+="a=".concat(se.attField).concat(se.attValue?":".concat(se.attValue):"").concat(this.eol);return ne}printMediaDescription(U){let ne="";for(const se of U)ne+=this.printMedia(se.media),ne+=this.printInformation(se.information),ne+=this.printConnections(se.connections),ne+=this.printBandwidth(se.bandwidths),ne+=this.printKey(se.key),ne+=this.printMediaAttributes(se);return ne}printConnections(U){let ne="";for(const se of U)ne+=this.printConnection(se);return ne}printMedia(U){return"m=".concat(U.mediaType," ").concat(U.port," ").concat(U.protos.join("/")," ").concat(U.fmts.join(" ")).concat(this.eol)}printSessionAttributes(U){return new De(this.eol).print(U)}printMediaAttributes(U){return new ze(this.eol).print(U)}}class Ie{constructor(U){Rr(this,"eol",void 0),this.eol=U}printIceUfrag(U){return U===void 0?"":"a=ice-ufrag:".concat(U).concat(this.eol)}printIcePwd(U){return U===void 0?"":"a=ice-pwd:".concat(U).concat(this.eol)}printIceOptions(U){return U===void 0?"":"a=ice-options:".concat(U.join(b)).concat(this.eol)}printFingerprints(U){return U.length>0?U.map(ne=>"a=fingerprint:".concat(ne.hashFunction).concat(b).concat(ne.fingerprint)).join(this.eol)+this.eol:""}printExtmap(U){return U.map(ne=>"a=extmap:".concat(ne.entry).concat(ne.direction?"/".concat(ne.direction):"").concat(b).concat(ne.extensionName).concat(ne.extensionAttributes?"".concat(b).concat(ne.extensionAttributes):"").concat(this.eol)).join("")}printSetup(U){return U===void 0?"":"a=setup:".concat(U).concat(this.eol)}printUnrecognized(U){return U.map(ne=>"a=".concat(ne.attField).concat(ne.attValue?":".concat(ne.attValue):"").concat(this.eol)).join("")}}class De extends Ie{print(U){let ne="";return ne+=this.printGroups(U.groups),ne+=this.printMsidSemantic(U.msidSemantic),ne+=this.printIceLite(U.iceLite),ne+=this.printIceUfrag(U.iceUfrag),ne+=this.printIcePwd(U.icePwd),ne+=this.printIceOptions(U.iceOptions),ne+=this.printFingerprints(U.fingerprints),ne+=this.printSetup(U.setup),ne+=this.printTlsId(U.tlsId),ne+=this.printIdentity(U.identities),ne+=this.printExtmap(U.extmaps),ne+=this.printUnrecognized(U.unrecognized),ne}printGroups(U){let ne="";return U.length>0&&(ne+=U.map(se=>"a=group:".concat(se.semantic).concat(se.identificationTag.map(Oe=>"".concat(b).concat(Oe)).join("")).concat(this.eol)).join("")),ne}printIceLite(U){return U===void 0?"":"a=ice-lite"+this.eol}printTlsId(U){return U?"a=tls-id:".concat(U).concat(this.eol):""}printIdentity(U){return U.length===0?"":U.map(ne=>"a=identity:".concat(ne.assertionValue).concat(ne.extensions.map(se=>"".concat(b).concat(se.name).concat(se.value?"=".concat(se.value):"")))).join(this.eol)+this.eol}printMsidSemantic(U){if(!U)return"";let ne="a=msid-semantic:".concat(U.semantic);return U.applyForAll?ne+="".concat(b,"*"):U.identifierList.length>0&&(ne+=U.identifierList.map(se=>"".concat(b).concat(se))),ne+this.eol}}class ze extends Ie{print(U){const ne=U.attributes;let se="";return se+=this.printRTCP(ne.rtcp),se+=this.printIceUfrag(ne.iceUfrag),se+=this.printIcePwd(ne.icePwd),se+=this.printIceOptions(ne.iceOptions),se+=this.printCandidates(ne.candidates),se+=this.printRemoteCandidatesList(ne.remoteCandidatesList),se+=this.printEndOfCandidates(ne.endOfCandidates),se+=this.printFingerprints(ne.fingerprints),se+=this.printSetup(ne.setup),se+=this.printMid(ne.mid),se+=this.printExtmap(ne.extmaps),se+=this.printRTPRelated(ne),se+=this.printPtime(ne.ptime),se+=this.printMaxPtime(ne.maxPtime),se+=this.printDirection(ne.direction),se+=this.printSSRCGroups(ne.ssrcGroups),se+=this.printSSRC(ne.ssrcs),se+=this.printRTCPMux(ne.rtcpMux),se+=this.printRTCPMuxOnly(ne.rtcpMuxOnly),se+=this.printRTCPRsize(ne.rtcpRsize),se+=this.printMSId(ne.msids),se+=this.printImageattr(ne.imageattr),se+=this.printRid(ne.rids),se+=this.printSimulcast(ne.simulcast),se+=this.printSCTPPort(ne.sctpPort),se+=this.printMaxMessageSize(ne.maxMessageSize),se+=this.printUnrecognized(ne.unrecognized),se}printCandidates(U){return U.map(ne=>"a=candidate:".concat(ne.foundation).concat(b).concat(ne.componentId).concat(b).concat(ne.transport).concat(b).concat(ne.priority).concat(b).concat(ne.connectionAddress).concat(b).concat(ne.port).concat(b,"typ").concat(b).concat(ne.type).concat(ne.relAddr?"".concat(b,"raddr").concat(b).concat(ne.relAddr):"").concat(ne.relPort?"".concat(b,"rport").concat(b).concat(ne.relPort):"").concat(Object.keys(ne.extension).map(se=>"".concat(b).concat(se).concat(b).concat(ne.extension[se])).join("")).concat(this.eol)).join("")}printRemoteCandidatesList(U){return U.map(ne=>"a=remote-candidates:".concat(ne.join(b)).concat(this.eol)).join("")}printEndOfCandidates(U){return U===void 0?"":"a=end-of-candidates"+this.eol}printRTPRelated(U){if(!U.payloads)return"";const ne=U.payloads;let se="";se+=U.rtcpFeedbackWildcards.map(Oe=>this.printRTCPFeedback("*",Oe)).join("");for(const Oe of ne)se+=this.printRtpMap(Oe.payloadType,Oe.rtpMap),se+=this.printFmtp(Oe.payloadType,Oe.fmtp),se+=Oe.rtcpFeedbacks.map(Rt=>this.printRTCPFeedback(Oe.payloadType,Rt)).join("");return se}printFmtp(U,ne){if(!ne)return"";const se=Object.keys(ne.parameters);return se.length===1&&ne.parameters[se[0]]===null?"a=fmtp:".concat(U).concat(b).concat(se[0]).concat(this.eol):"a=fmtp:".concat(U).concat(b).concat(Object.keys(ne.parameters).map(Oe=>"".concat(Oe,"=").concat(ne.parameters[Oe])).join(";")).concat(this.eol)}printRtpMap(U,ne){return ne?"a=rtpmap:".concat(U).concat(b).concat(ne.encodingName,"/").concat(ne.clockRate).concat(ne.encodingParameters?"/".concat(ne.encodingParameters):"").concat(this.eol):""}printRTCPFeedback(U,ne){let se="a=rtcp-fb:".concat(U).concat(b),Oe=ne;switch(Oe.type){case"trr-int":se+="ttr-int".concat(b).concat(Oe.interval);break;case"ack":case"nack":default:Oe=Oe,se+="".concat(Oe.type),Oe.parameter&&(se+="".concat(b).concat(Oe.parameter),Oe.additional&&(se+="".concat(b).concat(Oe.additional)))}return se+this.eol}printPtime(U){return U===void 0?"":"a=ptime:".concat(U).concat(this.eol)}printMaxPtime(U){return U===void 0?"":"a=maxptime:".concat(U).concat(this.eol)}printDirection(U){return U===void 0?"":"a=".concat(U).concat(this.eol)}printSSRC(U){return U.map(ne=>Object.keys(ne.attributes).map(se=>"a=ssrc:".concat(ne.ssrcId.toString(10)).concat(b).concat(se).concat(ne.attributes[se]?":".concat(ne.attributes[se]):"").concat(this.eol)).join("")).join("")}printRTCPMux(U){return U===void 0?"":"a=rtcp-mux".concat(this.eol)}printRTCPMuxOnly(U){return U===void 0?"":"a=rtcp-mux-only".concat(this.eol)}printRTCPRsize(U){return U===void 0?"":"a=rtcp-rsize".concat(this.eol)}printRTCP(U){if(U===void 0)return"";let ne="a=rtcp:".concat(U.port);return U.netType&&(ne+="".concat(b).concat(U.netType)),U.addressType&&(ne+="".concat(b).concat(U.addressType)),U.address&&(ne+="".concat(b).concat(U.address)),ne+this.eol}printMSId(U){return U.map(ne=>"a=msid:".concat(ne.id).concat(ne.appdata?"".concat(b).concat(ne.appdata):"").concat(this.eol)).join("")}printImageattr(U){return U.map(ne=>"a=imageattr:".concat(ne).concat(this.eol)).join("")}printRid(U){return U.map(ne=>{let se="a=rid:".concat(ne.id).concat(b).concat(ne.direction);return ne.payloads&&(se+="".concat(b,"pt=").concat(ne.payloads.join(","))),ne.params.length>0&&(se+="".concat(b).concat(ne.params.map(Oe=>Oe.type==="depend"?"depend=".concat(Oe.rids.join(",")):"".concat(Oe.type,"=").concat(Oe.val)).join(";"))),se+this.eol}).join("")}printSimulcast(U){return U===void 0?"":"a=simulcast:".concat(U).concat(this.eol)}printSCTPPort(U){return U===void 0?"":"a=sctp-port:".concat(U).concat(this.eol)}printMaxMessageSize(U){return U===void 0?"":"a=max-message-size:".concat(U).concat(this.eol)}printMid(U){return U===void 0?"":"a=mid:".concat(U).concat(this.eol)}printSSRCGroups(U){return U.map(ne=>"a=ssrc-group:".concat(ne.semantic).concat(ne.ssrcIds.map(se=>"".concat(b).concat(se.toString(10))).join("")).concat(this.eol)).join("")}}function yt(je){return new Bn().parse(je)}function ln(je,U){return new _a().print(je,U)}}},s={};function l(d){if(s[d])return s[d].exports;var p=s[d]={exports:{}};return o[d](p,p.exports,l),p.exports}return l.d=(d,p)=>{for(var _ in p)l.o(p,_)&&!l.o(d,_)&&Object.defineProperty(d,_,{enumerable:!0,get:p[_]})},l.o=(d,p)=>Object.prototype.hasOwnProperty.call(d,p),l.r=d=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(d,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(d,"__esModule",{value:!0})},l(8)})()})(Hr);class YX{constructor(r){L(this,"sessionDesc",void 0),L(this,"localCapabilities",void 0),L(this,"rtpCapabilities",void 0),L(this,"candidates",void 0),L(this,"iceParameters",void 0),L(this,"dtlsParameters",void 0),L(this,"setup",void 0),L(this,"currentMidIndex",void 0),L(this,"cname",void 0),r=Br(r);const{remoteIceParameters:o,remoteDtlsParameters:s,candidates:l,remoteRTPCapabilities:d,remoteSetup:p,localCapabilities:_,sdkCodec:S,cname:I}=r,b=Hr.exports.parse(`v=0
o=- 0 0 IN IP4 127.0.0.1
s=AgoraGateway
t=0 0
a=group:BUNDLE audio video
a=msid-semantic: WMS
a=ice-lite
m=audio 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendrecv
a=rtcp-mux
a=rtcp-rsize
a=mid:audio
m=video 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendrecv
a=rtcp-mux
a=rtcp-rsize
a=mid:video
`);this.rtpCapabilities=d,this.candidates=l,this.iceParameters=o,this.dtlsParameters=s,this.setup=p,this.localCapabilities=_,this.cname=I;for(let A=0;A<b.mediaDescriptions.length;A++){const F=b.mediaDescriptions[A];F.attributes.iceUfrag=o.iceUfrag,F.attributes.icePwd=o.icePwd,F.attributes.fingerprints=s.fingerprints,F.attributes.candidates=l,F.attributes.setup=p,F.media.mediaType==="video"&&(F.media.fmts=d.videoCodecs.map(W=>W.payloadType.toString(10)),F.attributes.payloads=d.videoCodecs,F.attributes.extmaps=d.videoExtensions),F.media.mediaType==="audio"&&(F.media.fmts=d.audioCodecs.map(W=>W.payloadType.toString(10)),F.attributes.payloads=d.audioCodecs,F.attributes.extmaps=d.audioExtensions),b.mediaDescriptions[A]=this.mungMediaDesc(F)}this.sessionDesc=b,this.currentMidIndex=b.mediaDescriptions.length-1}toString(){return Hr.exports.print(this.sessionDesc)}send(r,o,s){const{ssrcs:l,ssrcGroups:d}=Ms(o,this.cname),p=this.sessionDesc.mediaDescriptions.find(I=>r===Pt.VIDEO?I.media.mediaType==="video":I.media.mediaType==="audio"),_=l[0].attributes.label,S=l[0].attributes.mslabel;return p.attributes.ssrcs=p.attributes.ssrcs.concat(l),p.attributes.ssrcGroups=p.attributes.ssrcGroups.concat(d),{id:_,mslabel:S}}batchSend(r){return r.map(o=>{let{kind:s,ssrcMsg:l}=o;return this.send(s,l,void 0)})}stopSending(r){this.sessionDesc.mediaDescriptions.forEach(o=>{const s=[],l=[],d=[];o.attributes.ssrcs.forEach(p=>{r.includes(p.attributes.label||"")?d.push(p):s.push(p)}),o.attributes.ssrcGroups.forEach(p=>{d.map(_=>_.ssrcId).includes(p.ssrcIds[0])||l.push(p)}),o.attributes.ssrcs=s,o.attributes.ssrcGroups=l})}mute(r){const o=this.sessionDesc.mediaDescriptions.find(s=>s.attributes.mid===r);if(!o)throw new Error("mediaDescription not found with ".concat(r," in remote SDP when calling RemoteSDP.mute."));o.attributes.direction="inactive"}unmute(r){const o=this.sessionDesc.mediaDescriptions.find(s=>s.attributes.mid===r);if(!o)throw new Error("mediaDescription not found with ".concat(r," in remote SDP when calling RemoteSDP.unmute."));o.attributes.direction="sendonly"}receive(r,o,s){r.forEach((l,d)=>{const p=l._mediaStreamTrack,_=this.sessionDesc.mediaDescriptions.findIndex(I=>I.attributes.mid===p.kind),S=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[_],l);this.sessionDesc.mediaDescriptions[_]=S})}stopReceiving(r){}updateCandidates(r){r===ji.TCP?this.candidates.forEach(o=>{this.candidates.findIndex(s=>s.transport==="tcp"&&s.connectionAddress===o.connectionAddress&&s.port===o.port)===-1&&this.candidates.push(X3(X3({},o),{},{foundation:"tcpcandidate",priority:Number(o.priority)-1+"",transport:"tcp",port:Number(o.port)+90+""}))}):this.candidates=this.candidates.filter(o=>o.transport!=="tcp");for(const o of this.sessionDesc.mediaDescriptions)o.attributes.candidates=this.candidates}restartICE(r){r=Br(r),this.iceParameters=r,this.sessionDesc.mediaDescriptions.forEach(o=>{o.attributes.iceUfrag=r.iceUfrag,o.attributes.icePwd=r.icePwd})}predictReceivingMids(r){const o=[];for(let s=0;s<r;s++)o.push((this.currentMidIndex+s+1).toString(10));return o}mungRecvMediaDsec(r,o){const s=Br(r);return h0(s,o),ax(s,o),s}updateRecvMedia(r,o){const s=this.sessionDesc.mediaDescriptions.findIndex(l=>l.attributes.mid===r);if(s!==-1){const l=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[s],o);this.sessionDesc.mediaDescriptions[s]=l}}bumpMid(r){this.currentMidIndex+=r}updateTrackLabel(r,o,s){const l=this.sessionDesc.mediaDescriptions.find(p=>r===Pt.VIDEO?p.attributes.mid==="video":p.attributes.mid==="audio");if(l){const p=l.attributes.ssrcs.find(_=>_.attributes.label===o);var d;p&&(p.attributes.label=s,(d=p.attributes.msid)===null||d===void 0||d.replace(o,s))}}mungMediaDesc(r){const o=Br(r);return ox(o),function(s){const l=s.attributes.extmaps.find(d=>d.extensionName==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01");l&&s.attributes.extmaps.splice(s.attributes.extmaps.indexOf(l),1),s.attributes.payloads.forEach(d=>{const p=d.rtcpFeedbacks.findIndex(_=>_.type==="transport-cc");p!==-1&&d.rtcpFeedbacks.splice(p,1)})}(o),o}getSSRC(r){for(const o of this.sessionDesc.mediaDescriptions)for(const s of o.attributes.ssrcs)if(s.attributes.label===r)return[s]}}function Sc(n){if(Array.isArray(n))return n.map(o=>o);if(!J3(n))return n;const r={};for(const o in n)J3(n[o])||Array.isArray(n[o])?r[o]=Sc(n[o]):r[o]=n[o];return r}function J3(n){return!(typeof n!="object"||Array.isArray(n)||!n)}function XX(){const n=navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]*/i);return n&&n[0]?Number(n[0].split("/")[1]):null}function JX(n){return window.RTCStatsReport?n.getStats()instanceof Le:!1}class cx{constructor(r){L(this,"input",[]),L(this,"size",void 0),this.size=r}add(r){this.input.push(r),this.input.length>this.size&&this.input.splice(0,1)}diffMean(){return this.input.length===0?0:(this.input[this.input.length-1]-this.input[0])/this.input.length}}const ch={address:"unknown",candidateType:"unknown",id:"unknown",port:0,priority:0,protocol:"unknown",type:"unknown"},t_={timestamp:0,bitrate:{actualEncoded:0,transmit:0},sendPacketLossRate:0,recvPacketLossRate:0,videoRecv:[],videoSend:[],audioRecv:[],audioSend:[],selectedCandidatePair:{id:"unknown",localCandidate:ch,remoteCandidate:ch}},Q3={firsCount:0,nacksCount:0,plisCount:0,framesDecodeCount:0,framesDecodeInterval:0,framesDecodeFreezeTime:0,decodeFrameRate:0,bytes:0,packetsLost:0,packetLostRate:0,packets:0,ssrc:0,qpSumPerFrame:0},Z3={firsCount:0,nacksCount:0,plisCount:0,frameCount:0,bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0,qpSumPerFrame:0},eV={bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0},tV={jitterBufferMs:0,jitterMs:0,bytes:0,packetsLost:0,packetLostRate:0,packets:0,ssrc:0,receivedFrames:0,droppedFrames:0,concealedSamples:0};function nV(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function rV(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?nV(Object(o),!0).forEach(function(s){L(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):nV(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}class lx{constructor(r,o){L(this,"onFirstVideoReceived",void 0),L(this,"onFirstVideoDecoded",void 0),L(this,"onFirstAudioReceived",void 0),L(this,"onFirstVideoDecodedTimeout",void 0),L(this,"onFirstAudioDecoded",void 0),L(this,"onSelectedLocalCandidateChanged",void 0),L(this,"onSelectedRemoteCandidateChanged",void 0),L(this,"videoIsReady",!1),L(this,"videoIsReady2",{}),L(this,"pc",void 0),L(this,"options",void 0),L(this,"intervalTimer",void 0),L(this,"stats",Sc(t_)),L(this,"isFirstVideoReceived",{}),L(this,"isFirstVideoDecoded",{}),L(this,"isFirstAudioReceived",{}),L(this,"isFirstAudioDecoded",{}),L(this,"isFirstVideoDecodedTimeout",{}),L(this,"lossRateWindowStats",[]),this.pc=r,this.options=o,this.intervalTimer=window.setInterval(async()=>{this.updateStats()},this.options.updateInterval)}getStats(){return this.stats}getSelectedCandidatePair(){return new Le(r=>{r({local:rV({},ch),remote:rV({},ch)})})}setVideoIsReady(r){this.videoIsReady=r}setVideoIsReady2(r,o){this.videoIsReady2[r]=o}getVideoIsReady(r){return this.videoIsReady2[r]||!1}setIsFirstAudioDecoded(r){}destroy(){window.clearInterval(this.intervalTimer),this.pc=void 0}calcLossRate(r){this.lossRateWindowStats.push(r),this.lossRateWindowStats.length>this.options.lossRateInterval&&this.lossRateWindowStats.splice(0,1);const o=this.lossRateWindowStats.length,s=["videoSend","audioSend","videoRecv","audioRecv"];let l=0,d=0,p=0,_=0;for(const S of s)r[S].forEach((I,b)=>{if(!this.lossRateWindowStats[o-1][S][b]||!this.lossRateWindowStats[0][S][b])return;const A=this.lossRateWindowStats[o-1][S][b].packets-this.lossRateWindowStats[0][S][b].packets,F=this.lossRateWindowStats[o-1][S][b].packetsLost-this.lossRateWindowStats[0][S][b].packetsLost;S==="videoSend"||S==="audioSend"?(l+=A,p+=F):(d+=A,_+=F),Number.isNaN(A)||Number.isNaN(A)?I.packetLostRate=0:I.packetLostRate=A<=0||F<=0?0:F/(A+F)});r.sendPacketLossRate=l<=0||p<=0?0:p/(l+p),r.recvPacketLossRate=d<=0||_<=0?0:_/(d+_)}}function iV(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function QX(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?iV(Object(o),!0).forEach(function(s){L(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):iV(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}class ZX extends lx{constructor(){super(...arguments),L(this,"_stats",t_),L(this,"lastDecodeVideoReceiverStats",new Map)}async updateStats(){const r=await this._getStats(),o=this.statsResponsesToObjects(r);this._stats=Sc(t_);const s=o.filter(d=>d.type==="ssrc");this.processSSRCStats(s);const l=o.find(d=>d.type==="VideoBwe");l&&this.processBandwidthStats(l),this._stats.timestamp=Date.now(),this.calcLossRate(this._stats),this.stats=this._stats}processBandwidthStats(r){this._stats.bitrate={actualEncoded:Number(r.googActualEncBitrate),targetEncoded:Number(r.googTargetEncBitrate),retransmit:Number(r.googRetransmitBitrate),transmit:Number(r.googTransmitBitrate)},this._stats.sendBandwidth=Number(r.googAvailableSendBandwidth)}processSSRCStats(r){r.forEach(o=>{const s=o.id.includes("send");switch("".concat(o.mediaType,"_").concat(s?"send":"recv")){case"video_send":{const l=Sc(Z3);l.codec=o.googCodecName,l.adaptionChangeReason="none",o.googCpuLimitedResolution&&(l.adaptionChangeReason="cpu"),o.googBandwidthLimitedResolution&&(l.adaptionChangeReason="bandwidth"),l.avgEncodeMs=Number(o.googAvgEncodeMs),l.inputFrame={width:Number(o.googFrameWidthInput)||Number(o.googFrameWidthSent),height:Number(o.googFrameHeightInput)||Number(o.googFrameHeightSent),frameRate:Number(o.googFrameRateInput)},l.sentFrame={width:Number(o.googFrameWidthSent),height:Number(o.googFrameHeightSent),frameRate:Number(o.googFrameRateInput)},l.firsCount=Number(o.googFirReceived),l.nacksCount=Number(o.googNacksReceived),l.plisCount=Number(o.googPlisReceived),l.frameCount=Number(o.framesEncoded),l.bytes=Number(o.bytesSent),l.packets=Number(o.packetsSent),l.packetsLost=Number(o.packetsLost),l.ssrc=Number(o.ssrc),l.rttMs=Number(o.googRtt||0),this._stats.videoSend.push(l),this._stats.rtt=l.rttMs;break}case"video_recv":{const l=Sc(Q3),d=this.lastDecodeVideoReceiverStats.get(Number(o.ssrc));if(l.codec=o.googCodecName,l.targetDelayMs=Number(o.googTargetDelayMs),l.renderDelayMs=Number(o.googRenderDelayMs),l.currentDelayMs=Number(o.googCurrentDelayMs),l.minPlayoutDelayMs=Number(o.googMinPlayoutDelayMs),l.decodeMs=Number(o.googDecodeMs),l.maxDecodeMs=Number(o.googMaxDecodeMs),l.receivedFrame={width:Number(o.googFrameWidthReceived),height:Number(o.googFrameHeightReceived),frameRate:Number(o.googFrameRateReceived)},l.decodedFrame={width:Number(o.googFrameWidthReceived),height:Number(o.googFrameHeightReceived),frameRate:Number(o.googFrameRateDecoded)},l.decodeFrameRate=Number(o.googFrameRateDecoded),l.outputFrame={width:Number(o.googFrameWidthReceived),height:Number(o.googFrameHeightReceived),frameRate:Number(o.googFrameRateOutput)},l.jitterBufferMs=Number(o.googJitterBufferMs),l.firsCount=Number(o.googFirsSent),l.nacksCount=Number(o.googNacksSent),l.plisCount=Number(o.googPlisSent),l.framesDecodeCount=Number(o.framesDecoded),l.bytes=Number(o.bytesReceived),l.packets=Number(o.packetsReceived),l.packetsLost=Number(o.packetsLost),l.ssrc=Number(o.ssrc),l.packets>0&&!this.isFirstVideoReceived[l.ssrc]&&(this.onFirstVideoReceived&&this.onFirstVideoReceived(l.ssrc),this.isFirstVideoReceived[l.ssrc]=!0),l.framesDecodeCount>0&&!this.isFirstVideoDecoded[l.ssrc]&&(this.onFirstVideoDecoded&&this.onFirstVideoDecoded(l.ssrc,l.decodedFrame.width,l.decodedFrame.height),this.isFirstVideoDecoded[l.ssrc]=!0),d){const p=d.stats,_=Date.now()-d.lts;l.framesDecodeFreezeTime=p.framesDecodeFreezeTime,l.framesDecodeInterval=p.framesDecodeInterval,l.framesDecodeCount>p.framesDecodeCount&&this.isFirstVideoDecoded[l.ssrc]?(d.lts=Date.now(),l.framesDecodeInterval=_,l.framesDecodeInterval>=this.options.freezeRateLimit&&(this.getVideoIsReady(parseInt(o.ssrc,10))?l.framesDecodeFreezeTime+=l.framesDecodeInterval:this.setVideoIsReady2(parseInt(o.ssrc,10),!0))):l.framesDecodeCount<d.stats.framesDecodeCount&&(l.framesDecodeInterval=0)}this.lastDecodeVideoReceiverStats.set(l.ssrc,{stats:QX({},l),lts:Date.now()}),this._stats.videoRecv.push(l);break}case"audio_recv":{const l=Sc(tV);l.codec=o.googCodecName,l.outputLevel=Math.abs(Number(o.audioOutputLevel))/32767,l.decodingCNG=Number(o.googDecodingCNG),l.decodingCTN=Number(o.googDecodingCTN),l.decodingCTSG=Number(o.googDecodingCTSG),l.decodingNormal=Number(o.googDecodingNormal),l.decodingPLC=Number(o.googDecodingPLC),l.decodingPLCCNG=Number(o.googDecodingPLCCNG),l.expandRate=Number(o.googExpandRate),l.accelerateRate=Number(o.googAccelerateRate),l.preemptiveExpandRate=Number(o.googPreemptiveExpandRate),l.secondaryDecodedRate=Number(o.googSecondaryDecodedRate),l.speechExpandRate=Number(o.googSpeechExpandRate),l.preferredJitterBufferMs=Number(o.googPreferredJitterBufferMs),l.jitterBufferMs=Number(o.googJitterBufferMs),l.jitterMs=Number(o.googJitterReceived),l.bytes=Number(o.bytesReceived),l.packets=Number(o.packetsReceived),l.packetsLost=Number(o.packetsLost),l.ssrc=Number(o.ssrc),l.receivedFrames=Number(o.googDecodingCTN)||Number(o.packetsReceived),l.droppedFrames=Number(o.googDecodingPLC)+Number(o.googDecodingPLCCNG)||Number(o.packetsLost),l.receivedFrames>0&&!this.isFirstAudioReceived[l.ssrc]&&(this.onFirstAudioReceived&&this.onFirstAudioReceived(l.ssrc),this.isFirstAudioReceived[l.ssrc]=!0),l.decodingNormal>0&&!this.isFirstAudioDecoded[l.ssrc]&&(this.onFirstAudioDecoded&&this.onFirstAudioDecoded(l.ssrc),this.isFirstAudioDecoded[l.ssrc]=!0),this._stats.audioRecv.push(l);break}case"audio_send":{const l=Sc(eV);l.codec=o.googCodecName,l.inputLevel=Math.abs(Number(o.audioInputLevel))/32767,l.aecReturnLoss=Number(o.googEchoCancellationReturnLoss||0),l.aecReturnLossEnhancement=Number(o.googEchoCancellationReturnLossEnhancement||0),l.residualEchoLikelihood=Number(o.googResidualEchoLikelihood||0),l.residualEchoLikelihoodRecentMax=Number(o.googResidualEchoLikelihoodRecentMax||0),l.bytes=Number(o.bytesSent),l.packets=Number(o.packetsSent),l.packetsLost=Number(o.packetsLost),l.ssrc=Number(o.ssrc),l.rttMs=Number(o.googRtt||0),this._stats.rtt=l.rttMs,this._stats.audioSend.push(l);break}}})}_getStats(){return new Le((r,o)=>{this.pc.getStats(r,o)})}statsResponsesToObjects(r){const o=[];return r.result().forEach(s=>{const l={id:s.id,timestamp:s.timestamp.valueOf().toString(),type:s.type};s.names().forEach(d=>{l[d]=s.stat(d)}),o.push(l)}),o}}function oV(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function Kf(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?oV(Object(o),!0).forEach(function(s){L(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):oV(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}class aV extends lx{constructor(){super(...arguments),L(this,"_stats",t_),L(this,"report",void 0),L(this,"lastDecodeVideoReceiverStats",new Map),L(this,"lastVideoFramesRecv",new Map),L(this,"lastVideoFramesSent",new Map),L(this,"lastVideoFramesDecode",new Map),L(this,"lastVideoJBDelay",new Map),L(this,"lastAudioJBDelay",new Map),L(this,"mediaBytesSent",new Map),L(this,"mediaBytesRetransmit",new Map),L(this,"mediaBytesTargetEncode",new Map),L(this,"lastEncoderMs",new Map)}async updateStats(){this.report=await this.pc.getStats(),this._stats=Sc(t_),this.report.forEach(r=>{switch(r.type){case da.OUTBOUND:r.mediaType==="audio"?this.processAudioOutboundStats(r):r.mediaType==="video"&&this.processVideoOutboundStats(r);break;case da.INBOUND:r.mediaType==="audio"?this.processAudioInboundStats(r):r.mediaType==="video"&&this.processVideoInboundStats(r);break;case da.TRANSPORT:{const o=this.report.get(r.selectedCandidatePairId);o&&this.processCandidatePairStats(o);break}case da.CANDIDATE_PAIR:r.selected&&this.processCandidatePairStats(r)}}),this.updateSendBitrate(),this._stats.timestamp=Date.now(),this.calcLossRate(this._stats),this.stats=this._stats}async getSelectedCandidatePair(){const r=await this.pc.getStats(),o={local:Kf({},ch),remote:Kf({},ch)};return r.forEach(s=>{let l;if(s.type===da.TRANSPORT&&(l=r.get(s.selectedCandidatePairId)),s.type===da.CANDIDATE_PAIR&&s.selected&&(l=s),l){const d=(p,_)=>{p.type=_.type,p.id=_.id,_.address&&(p.address=_.address),_.candidateType&&(p.candidateType=_.candidateType),_.port&&(p.port=_.port),_.priority&&(p.priority=_.priority),_.protocol&&(p.protocol=_.protocol),_.relayProtocol&&(p.relayProtocol=_.relayProtocol)};if(l.localCandidateId){const p=r.get(l.localCandidateId);p&&d(o.local,p)}if(l.remoteCandidateId){const p=r.get(l.remoteCandidateId);p&&d(o.remote,p)}}}),o}processCandidatePairStats(r){if(this._stats.sendBandwidth=r.availableOutgoingBitrate||0,r.currentRoundTripTime&&(this._stats.rtt=1e3*r.currentRoundTripTime),this._stats.videoSend.forEach(o=>{r.currentRoundTripTime&&(o.rttMs=1e3*r.currentRoundTripTime)}),this._stats.audioSend.forEach(o=>{r.currentRoundTripTime&&(o.rttMs=1e3*r.currentRoundTripTime)}),this._stats.selectedCandidatePair.id=r.id,r.localCandidateId){const o=this.report.get(r.localCandidateId);o&&this.processCandidateStats(o)}if(r.remoteCandidateId){const o=this.report.get(r.remoteCandidateId);o&&this.processCandidateStats(o)}}processCandidateStats(r){let o;r.type===da.LOCAL_CANDIDATE&&(o=this._stats.selectedCandidatePair.localCandidate),r.type===da.REMOTE_CANDIDATE&&(o=this._stats.selectedCandidatePair.remoteCandidate),o&&(o.type=r.type,o.id=r.id,r.address&&(o.address=r.address),r.candidateType&&(o.candidateType=r.candidateType),r.port&&(o.port=r.port),r.priority&&(o.priority=r.priority),r.protocol&&(o.protocol=r.protocol),r.relayProtocol&&(o.relayProtocol=r.relayProtocol),r.type===da.LOCAL_CANDIDATE&&this.stats.selectedCandidatePair.localCandidate.id!==o.id&&this.onSelectedLocalCandidateChanged&&this.onSelectedLocalCandidateChanged(Kf({},o),Kf({},this.stats.selectedCandidatePair.localCandidate)),r.type===da.REMOTE_CANDIDATE&&this.stats.selectedCandidatePair.remoteCandidate.id!==o.id&&this.onSelectedRemoteCandidateChanged&&this.onSelectedRemoteCandidateChanged(Kf({},o),Kf({},this.stats.selectedCandidatePair.remoteCandidate)))}processAudioInboundStats(r){let o=this._stats.audioRecv.find(s=>s.ssrc===r.ssrc);o||(o=Sc(tV),this._stats.audioRecv.push(o)),o.ssrc=r.ssrc,o.packets=r.packetsReceived,o.packetsLost=r.packetsLost,o.bytes=r.bytesReceived,o.jitterMs=1e3*r.jitter,this.processAudioTrackReceiverStats(r,r.trackId,o),r.codecId&&(o.codec=this.getCodecFromCodecStats(r.codecId)),o.receivedFrames||(o.receivedFrames=r.packetsReceived),o.droppedFrames||(o.droppedFrames=r.packetsLost),o.receivedFrames>0&&!this.isFirstAudioReceived[o.ssrc]&&(this.onFirstAudioReceived&&this.onFirstAudioReceived(o.ssrc),this.isFirstAudioReceived[o.ssrc]=!0),o.outputLevel&&o.outputLevel>0&&!this.isFirstAudioDecoded[o.ssrc]&&(this.onFirstAudioDecoded&&this.onFirstAudioDecoded(o.ssrc),this.isFirstAudioDecoded[o.ssrc]=!0),typeof r.concealedSamples=="number"&&(o.concealedSamples=r.concealedSamples)}processVideoInboundStats(r){let o=this._stats.videoRecv.find(p=>p.ssrc===r.ssrc);o||(o=Sc(Q3),this._stats.videoRecv.push(o)),o.ssrc=r.ssrc,o.packets=r.packetsReceived,o.packetsLost=r.packetsLost,o.bytes=r.bytesReceived,o.firsCount=r.firCount,o.nacksCount=r.nackCount,o.plisCount=r.pliCount,o.framesDecodeCount=r.framesDecoded,o.totalInterFrameDelay=r.totalInterFrameDelay,o.totalSquaredInterFrameDelay=r.totalSquaredInterFrameDelay;const s=this.lastDecodeVideoReceiverStats.get(o.ssrc),l=this.lastVideoFramesDecode.get(o.ssrc),d=Date.now();if(o.framesDecodeCount>0&&!this.isFirstVideoDecoded[o.ssrc]){const p=o.decodedFrame?o.decodedFrame.width:0,_=o.decodedFrame?o.decodedFrame.height:0;this.onFirstVideoDecoded&&this.onFirstVideoDecoded(o.ssrc,p,_),this.isFirstVideoDecoded[o.ssrc]=!0}if(s){const p=s.stats,_=d-s.lts;o.framesDecodeFreezeTime=p.framesDecodeFreezeTime,o.framesDecodeInterval=p.framesDecodeInterval,!this.isFirstVideoDecoded[o.ssrc]&&_>this.options.firstVideoDecodedTimeout&&!this.isFirstVideoDecodedTimeout[o.ssrc]&&(this.onFirstVideoDecodedTimeout&&this.onFirstVideoDecodedTimeout(o.ssrc),this.isFirstVideoDecodedTimeout[o.ssrc]=!0),o.framesDecodeCount>p.framesDecodeCount&&this.isFirstVideoDecoded[o.ssrc]?(s.lts=Date.now(),o.framesDecodeInterval=_,o.framesDecodeInterval>=this.options.freezeRateLimit&&(this.getVideoIsReady(parseInt(r.ssrc))?o.framesDecodeFreezeTime+=o.framesDecodeInterval:this.setVideoIsReady2(parseInt(r.ssrc,10),!0))):o.framesDecodeCount<p.framesDecodeCount&&(o.framesDecodeInterval=0),r.framesDecoded&&r.qpSum&&(s.stats.framesDecodeCount>r.framesDecoded?o.qpSumPerFrame=r.qpSum/r.framesDecoded:o.qpSumPerFrame=(r.qpSum-s.qpSum)/(r.framesDecoded-s.stats.framesDecodeCount))}l&&d-l.lts>=800?(o.decodeFrameRate=Math.round((o.framesDecodeCount-l.count)/((d-l.lts)/1e3)),this.lastVideoFramesDecode.set(o.ssrc,{count:o.framesDecodeCount,lts:d,rate:o.decodeFrameRate})):l?o.decodeFrameRate=l.rate:this.lastVideoFramesDecode.set(o.ssrc,{count:o.framesDecodeCount,lts:d,rate:0}),r.totalDecodeTime&&(o.decodeMs=1e3*r.totalDecodeTime),this.processVideoTrackReceiverStats(r,r.trackId,o),r.codecId&&(o.codec=this.getCodecFromCodecStats(r.codecId)),r.framerateMean&&(o.framesRateFirefox=r.framerateMean),o.packets>0&&!this.isFirstVideoReceived[o.ssrc]&&(this.onFirstVideoReceived&&this.onFirstVideoReceived(o.ssrc),this.isFirstVideoReceived[o.ssrc]=!0),this.lastDecodeVideoReceiverStats.set(o.ssrc,{stats:Kf({},o),lts:s?s.lts:Date.now(),qpSum:r.qpSum})}processVideoOutboundStats(r){let o=this._stats.videoSend.find(l=>l.ssrc===r.ssrc);o||(o=Sc(Z3),this._stats.videoSend.push(o));const s=this.mediaBytesSent.get(r.ssrc);if(s)s.add(r.bytesSent);else{const l=new cx(10);l.add(r.bytesSent),this.mediaBytesSent.set(r.ssrc,l)}if(r.retransmittedBytesSent!==void 0){const l=this.mediaBytesRetransmit.get(r.ssrc);if(l)l.add(r.retransmittedBytesSent);else{const d=new cx(10);d.add(r.retransmittedBytesSent),this.mediaBytesRetransmit.set(r.ssrc,d)}}if(r.totalEncodedBytesTarget){const l=this.mediaBytesTargetEncode.get(r.ssrc);if(l)l.add(r.totalEncodedBytesTarget);else{const d=new cx(10);d.add(r.totalEncodedBytesTarget),this.mediaBytesTargetEncode.set(r.ssrc,d)}}if(o.ssrc=r.ssrc,o.bytes=r.bytesSent,o.packets=r.packetsSent,o.firsCount=r.firCount,o.nacksCount=r.nackCount,o.plisCount=r.pliCount,o.frameCount=r.framesEncoded,o.adaptionChangeReason=r.qualityLimitationReason,o.scalabilityMode=r.scalabilityMode,r.totalEncodeTime&&r.framesEncoded){const l=this.lastEncoderMs.get(r.ssrc);if(!l||l.lastFrameCount>r.framesEncoded)o.avgEncodeMs=1e3*r.totalEncodeTime/r.framesEncoded;else{const d=r.framesEncoded-l.lastFrameCount,p=r.totalEncodeTime-l.lastEncoderTime;o.avgEncodeMs=1e3*p/d}}if(r.framesEncoded&&r.qpSum){const l=this.lastEncoderMs.get(r.ssrc);!l||l.lastFrameCount>r.framesEncoded?o.qpSumPerFrame=r.qpSum/r.framesEncoded:o.qpSumPerFrame=(r.qpSum-l.lastQpSum)/(r.framesEncoded-l.lastFrameCount)}if(this.lastEncoderMs.set(r.ssrc,{lastFrameCount:r.framesEncoded,lastEncoderTime:r.totalEncodeTime,lastQpSum:r.qpSum,lts:Date.now()}),r.codecId&&(o.codec=this.getCodecFromCodecStats(r.codecId)),r.mediaSourceId&&this.processVideoMediaSource(r.mediaSourceId,o),this.processVideoTrackSenderStats(r,r.trackId,o),r.remoteId)this.processRemoteInboundStats(r.remoteId,o);else{const l=this.findRemoteStatsId(r.ssrc,da.REMOTE_INBOUND);l&&this.processRemoteInboundStats(l,o)}}processAudioOutboundStats(r){let o=this._stats.audioSend.find(s=>s.ssrc===r.ssrc);if(o||(o=Sc(eV),this._stats.audioSend.push(o)),o.ssrc=r.ssrc,o.packets=r.packetsSent,o.bytes=r.bytesSent,r.mediaSourceId&&this.processAudioMediaSource(r.mediaSourceId,o),r.codecId&&(o.codec=this.getCodecFromCodecStats(r.codecId)),this.processAudioTrackSenderStats(r,r.trackId,o),r.remoteId)this.processRemoteInboundStats(r.remoteId,o);else{const s=this.findRemoteStatsId(r.ssrc,da.REMOTE_INBOUND);s&&this.processRemoteInboundStats(s,o)}}findRemoteStatsId(r,o){var s;const l=Array.from(lu(s=this.report).call(s)).find(d=>d.type===o&&d.ssrc===r);return l?l.id:null}processVideoMediaSource(r,o){const s=this.report.get(r);s&&s.width&&s.height&&s.framesPerSecond&&(o.inputFrame={width:s.width,height:s.height,frameRate:s.framesPerSecond})}processAudioMediaSource(r,o){const s=this.report.get(r);s&&(o.inputLevel=s.audioLevel)}processVideoTrackSenderStats(r,o,s){var l,d,p;const _=o?this.report.get(o):void 0,S=(l=_==null?void 0:_.framesSent)!==null&&l!==void 0?l:r.framesSent;let I=(d=_==null?void 0:_.frameWidth)!==null&&d!==void 0?d:r.frameWidth,b=(p=_==null?void 0:_.frameHeight)!==null&&p!==void 0?p:r.frameHeight;if(typeof S!="number")return;typeof I=="number"&&typeof b=="number"||(I=0,b=0);let A=0;const F=Date.now(),W=this.lastVideoFramesSent.get(s.ssrc);W&&F-W.lts>=800?(A=Math.round((S-W.count)/((F-W.lts)/1e3)),this.lastVideoFramesSent.set(s.ssrc,{count:S,lts:F,rate:A})):W?A=W.rate:this.lastVideoFramesSent.set(s.ssrc,{count:S,lts:F,rate:0}),s.sentFrame={width:I,height:b,frameRate:Math.max(0,A)}}processVideoTrackReceiverStats(r,o,s){var l,d,p,_,S;const I=o?this.report.get(o):void 0,b=(l=I==null?void 0:I.framesReceived)!==null&&l!==void 0?l:r.framesReceived,A=(d=I==null?void 0:I.frameWidth)!==null&&d!==void 0?d:r.frameWidth,F=(p=I==null?void 0:I.frameHeight)!==null&&p!==void 0?p:r.frameHeight,W=(_=I==null?void 0:I.jitterBufferDelay)!==null&&_!==void 0?_:r.jitterBufferDelay,Z=(S=I==null?void 0:I.jitterBufferEmittedCount)!==null&&S!==void 0?S:r.jitterBufferEmittedCount;if(typeof b=="number"){const ee=this.lastVideoFramesRecv.get(s.ssrc),te=Date.now();s.framesReceivedCount=b;let Ee=0;ee&&te-ee.lts>=800?(Ee=Math.round((b-ee.count)/((te-ee.lts)/1e3)),this.lastVideoFramesRecv.set(s.ssrc,{count:b,lts:te,rate:Ee})):ee?Ee=ee.rate:this.lastVideoFramesRecv.set(s.ssrc,{count:b,lts:te,rate:0}),s.receivedFrame={width:A||0,height:F||0,frameRate:Ee||0},s.decodedFrame={width:A||0,height:F||0,frameRate:s.decodeFrameRate||0},s.outputFrame={width:A||0,height:F||0,frameRate:s.decodeFrameRate||0}}if(W&&Z){let ee=this.lastVideoJBDelay.get(s.ssrc);this.lastVideoJBDelay.set(s.ssrc,{jitterBufferDelay:W,jitterBufferEmittedCount:Z}),ee||(ee={jitterBufferDelay:0,jitterBufferEmittedCount:0});const te=1e3*(W-ee.jitterBufferDelay)/(Z-ee.jitterBufferEmittedCount);s.jitterBufferMs=te,s.currentDelayMs=Math.round(te)}}processAudioTrackSenderStats(r,o,s){var l,d,p,_;const S=o?this.report.get(o):void 0,I=(l=(d=S==null?void 0:S.echoReturnLoss)!==null&&d!==void 0?d:r.echoReturnLoss)!==null&&l!==void 0?l:0,b=(p=(_=S==null?void 0:S.echoReturnLossEnhancement)!==null&&_!==void 0?_:r.echoReturnLossEnhancement)!==null&&p!==void 0?p:0;s.aecReturnLoss=I,s.aecReturnLossEnhancement=b}processAudioTrackReceiverStats(r,o,s){var l,d,p,_,S,I,b;const A=o?this.report.get(o):void 0,F=(l=A==null?void 0:A.removedSamplesForAcceleration)!==null&&l!==void 0?l:r.removedSamplesForAcceleration,W=(d=A==null?void 0:A.totalSamplesReceived)!==null&&d!==void 0?d:r.totalSamplesReceived,Z=(p=A==null?void 0:A.jitterBufferDelay)!==null&&p!==void 0?p:r.jitterBufferDelay,ee=(_=A==null?void 0:A.jitterBufferEmittedCount)!==null&&_!==void 0?_:r.jitterBufferEmittedCount,te=(S=A==null?void 0:A.audioLevel)!==null&&S!==void 0?S:r==null?void 0:r.audioLevel,Ee=(I=A==null?void 0:A.totalSamplesDuration)!==null&&I!==void 0?I:r==null?void 0:r.totalSamplesDuration,ye=(b=A==null?void 0:A.concealedSamples)!==null&&b!==void 0?b:r.concealedSamples;if(F&&W&&(s.accelerateRate=F/W),Z&&ee){let Xe=this.lastAudioJBDelay.get(s.ssrc);this.lastAudioJBDelay.set(s.ssrc,{jitterBufferDelay:Z,jitterBufferEmittedCount:ee}),Xe||(Xe={jitterBufferDelay:0,jitterBufferEmittedCount:0});const ke=1e3*(Z-Xe.jitterBufferDelay)/(ee-Xe.jitterBufferEmittedCount);s.jitterBufferMs=Math.round(ke)}s.outputLevel=te;let Pe=1920;Ee&&W&&(Pe=W/Ee/50,s.receivedFrames=Math.round(W/Pe)),ye&&(s.droppedFrames=Math.round(ye/Pe))}processRemoteInboundStats(r,o){const s=this.report.get(r);s&&(o.packetsLost=s.packetsLost,s.roundTripTime&&(o.rttMs=1e3*s.roundTripTime))}getCodecFromCodecStats(r){const o=this.report.get(r);if(!o)return"";const s=o.mimeType.match(/\/(.*)$/);return s&&s[1]?s[1]:""}updateSendBitrate(){let r=0,o=null,s=null;this.mediaBytesSent.forEach(d=>{r+=d.diffMean()}),this.mediaBytesRetransmit.forEach(d=>{o=o===null?d.diffMean():o+d.diffMean()}),this.mediaBytesTargetEncode.forEach(d=>{s=s===null?d.diffMean():s+d.diffMean()});const l=o!==null?r-o:r;this._stats.bitrate={actualEncoded:8*l/(this.options.updateInterval/1e3),transmit:8*r/(this.options.updateInterval/1e3)},o!==null&&(this._stats.bitrate.retransmit=8*o/(this.options.updateInterval/1e3)),s!==null&&(this._stats.bitrate.targetEncoded=8*s/(this.options.updateInterval/1e3))}}class eJ extends lx{updateStats(){return Le.resolve()}}function ux(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:250,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:8,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:500,l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1e4;const d=XX();return d?d<76?new ZX(n,{updateInterval:r,lossRateInterval:o,freezeRateLimit:s,firstVideoDecodedTimeout:l}):new aV(n,{updateInterval:r,lossRateInterval:o,freezeRateLimit:s,firstVideoDecodedTimeout:l}):JX(n)?new aV(n,{updateInterval:r,lossRateInterval:o,freezeRateLimit:s,firstVideoDecodedTimeout:l}):new eJ(n,{updateInterval:r,lossRateInterval:o,freezeRateLimit:s,firstVideoDecodedTimeout:l})}var Nn;function sV(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function cV(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?sV(Object(o),!0).forEach(function(s){L(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):sV(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}let n_=(Ne((Nn=class C_ extends zT{get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}constructor(r,o){super(r,o),L(this,"store",void 0),L(this,"peerConnection",void 0),L(this,"remoteSDP",void 0),L(this,"initialOffer",void 0),L(this,"statsFilter",void 0),L(this,"useRTX",!1),L(this,"localCapabilities",void 0),L(this,"localCandidateCount",0),L(this,"allCandidatesReceived",!1),L(this,"establishPromise",void 0),L(this,"mutex",new xo("P2PConnection-mutex")),this.store=o,this.peerConnection=new RTCPeerConnection(C_.resolvePCConfiguration(r),{optional:[{googDscp:!0}]}),this.statsFilter=ux(this.peerConnection,de("STATS_UPDATE_INTERVAL"),void 0,nr()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1,this.establishPromise=this.establish()}async establish(){try{const r=await this.peerConnection.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});if(!r.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const o=zf(r.sdp),s=ix(r.sdp,!this.useRTX,de("FILTER_VIDEO_FEC"),de("FILTER_AUDIO_FEC"),["opus"]);return this.localCapabilities=s,this.initialOffer=r,cV(cV({},o),{},{rtpCapabilities:{send:{audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},recv:{audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},sendrecv:s},offerSDP:r.sdp})}catch(r){throw new re(q.GET_LOCAL_CONNECTION_PARAMS_FAILED,r.toString())}}async connect(r,o,s,l,d,p){try{if(!this.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");this.remoteSDP=new YX({remoteIceParameters:r,remoteDtlsParameters:o,candidates:s,remoteRTPCapabilities:l.send,remoteSetup:d,localCapabilities:this.localCapabilities,sdkCodec:this.store.codec,cname:p});const _=this.remoteSDP.toString();await this.peerConnection.setLocalDescription(this.initialOffer),await this.peerConnection.setRemoteDescription({type:"answer",sdp:_})}catch(_){throw new re(q.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(_.toString()))}}send(r,o){var s=this;return _c(function*(){const l=yield Zt(s.mutex.lock());try{if(!s.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");const d=r.map(F=>s.peerConnection.addTrack(F._mediaStreamTrack)),p=yield Zt(s.peerConnection.createOffer()),_=Hr.exports.parse(p.sdp),S=r.map(F=>{const W=F._mediaStreamTrack,Z=_.mediaDescriptions.find(ee=>ee.attributes.mid===W.kind);if(!Z)throw new Error("Cannot extract ssrc from mediaDescription.");return function(ee,te,Ee){const ye=ee.attributes.ssrcs.filter(Xe=>Xe.attributes.label===te),Pe=ee.attributes.ssrcGroups;if(ye.length===0)throw new Error("Cannot extract ssrc from plan-b SDP.");if(Pe&&ye.length>1){const Xe=Pe.find(ke=>ke.ssrcIds.indexOf(ye[0].ssrcId)!==-1);return Xe?[{ssrcId:Xe.ssrcIds[0],rtx:Ee?Xe.ssrcIds[1]:void 0}]:[{ssrcId:ye[0].ssrcId}]}return[{ssrcId:ye[0].ssrcId}]}(Z,W.id,s.useRTX)});let I;try{I=yield S}catch(F){throw d.forEach(W=>{Yi()&&W.replaceTrack(null),s.peerConnection.removeTrack(W)}),F}const b=s.mungSendOfferSDP(p.sdp,r);s.remoteSDP.receive(r,o,I);const A=s.remoteSDP.toString();return yield Zt(s.peerConnection.setLocalDescription({type:"offer",sdp:b})),yield Zt(s.applySendEncodings(d,r)),yield Zt(s.peerConnection.setRemoteDescription({type:"answer",sdp:A})),r.map((F,W)=>{const Z=F._mediaStreamTrack.id;return{localSSRC:S[W],id:Z}})}catch(d){throw new re(q.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(d.toString()))}finally{l()}})()}async stopSending(r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");const o=this.peerConnection.getSenders().filter(d=>{var p;return r.indexOf(((p=d.track)===null||p===void 0?void 0:p.id)||"")!==-1});if(o.length!==r.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.");o.map(d=>{Yi()&&d.replaceTrack(null),this.peerConnection.removeTrack(d)});const s=await this.peerConnection.createOffer();await this.peerConnection.setLocalDescription(s),this.remoteSDP.stopReceiving(r);const l=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"answer",sdp:l})}catch(o){throw new re(q.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(o.toString()))}}async receive(r,o,s,l){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(r," before remoteSDP created."));const{id:d,mslabel:p}=this.remoteSDP.send(r,o,l),_=new Le((b,A)=>{const F=setTimeout(()=>{A(new Error("Cannot receive track, id: ".concat(d)))},1e4),W=Z=>{const ee=un();if((ee.name==="Safari"&&Number(ee.version)===11||Ui())&&Z.track.id!==d&&Z.streams[0].id===p){var te;const Ee=Z.streams[0].getTracks()[0];return(te=this.remoteSDP)===null||te===void 0||te.updateTrackLabel(r,d,Z.track.id),this.peerConnection.removeEventListener("track",W),clearTimeout(F),void b(Ee)}if(Z.track.id===d)return this.peerConnection.removeEventListener("track",W),clearTimeout(F),void b(Z.track)};this.peerConnection.addEventListener("track",W)}),S=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:S});const I=await this.peerConnection.createAnswer();return await this.peerConnection.setLocalDescription(I),{track:await _,id:d}}catch(d){throw new re(q.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(d.toString()))}}async stopReceiving(r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");this.remoteSDP.stopSending(r);const o=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:o});const s=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(s)}catch(o){throw new re(q.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(o.toString()))}}async muteRemote(r){}async unmuteRemote(r){}async muteLocal(r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");const o=this.peerConnection.getSenders().filter(s=>{var l;return r.indexOf(((l=s.track)===null||l===void 0?void 0:l.id)||"")!==-1});if(o.length!==r.length)throw new Error("sender' length doesn't match mids' length.");o.map(s=>{if(Yi()&&s.track)s.track.enabled=!1;else{const l=s.getParameters();l.encodings.forEach(d=>d.active=!1),s.setParameters(l)}})}catch(o){throw new re(q.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(o.toString()))}}async unmuteLocal(r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");const o=this.peerConnection.getSenders().filter(d=>{var p;return r.indexOf(((p=d.track)===null||p===void 0?void 0:p.id)||"")!==-1});if(o.length!==r.length)throw new Error("Senders' length doesn't match mids' length.");o.map(async d=>{if(Yi()&&d.track)d.track.enabled=!0;else{const p=d.getParameters();p.encodings.forEach(_=>_.active=!0),await d.setParameters(p)}});const s=await this.peerConnection.createOffer();await this.peerConnection.setLocalDescription(s);const l=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"answer",sdp:l})}catch(o){throw new re(q.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(o.toString()))}}restartICE(r){var o=this;return _c(function*(){const s=yield Zt(o.mutex.lock("From P2PConnection.restartICE"));try{if(!o.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");if(Pr().supportPCSetConfiguration){const S=o.peerConnection.getConfiguration(),I=r===ji.RELAY?"relay":"all";S.iceTransportPolicy!==I&&(j.debug("[".concat(o.store.clientId,"] restartICE change iceTransportPolicy from [").concat(S.iceTransportPolicy,"] to [").concat(I,"]")),S.iceTransportPolicy=I,o.peerConnection.setConfiguration(S))}else if(r===ji.RELAY)return;r!==ji.RELAY&&o.remoteSDP.updateCandidates(r);const l=yield Zt(o.peerConnection.createOffer({iceRestart:!0}));if(!l.sdp)throw new Error("Cannot restartICE because restart offer SDP does not exist.");const d=zf(l.sdp),{remoteIceParameters:p}=yield d.iceParameters;o.remoteSDP.restartICE(p);const _=o.remoteSDP.toString();yield Zt(o.peerConnection.setLocalDescription(l)),yield Zt(o.peerConnection.setRemoteDescription({type:"answer",sdp:_}))}catch(l){j.warning("[".concat(o.store.clientId,"] restart ICE failed, abort operation"),l)}finally{s()}})()}close(){var r;this.peerConnection.close(),(r=this.onConnectionStateChange)===null||r===void 0||r.call(this,"closed"),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.statsFilter.destroy()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(r){return this.statsFilter.getVideoIsReady(r)}async updateEncoderConfig(r,o){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");const s=await this.peerConnection.createOffer(),l=this.mungSendOfferSDP(s.sdp,[o]);this.remoteSDP.updateRecvMedia(o._mediaStreamTrack.kind,o);const d=this.remoteSDP.toString();await this.peerConnection.setLocalDescription({type:"offer",sdp:l}),await this.peerConnection.setRemoteDescription({type:"answer",sdp:d})}catch(s){throw new re(q.EXCHANGE_SDP_FAILED,s.toString())}}async updateSendParameters(r,o){const s=this.peerConnection.getSenders().filter(l=>{var d;return((d=l.track)===null||d===void 0?void 0:d.id)===r});s.length===1&&await this.applySendEncodings(s,[o])}setStatsRemoteVideoIsReady(r,o){this.statsFilter.setVideoIsReady2(r,o)}async replaceTrack(r,o){const s=this.peerConnection.getSenders().find(l=>{var d;return((d=l.track)===null||d===void 0?void 0:d.id)===o});s&&await s.replaceTrack(r._mediaStreamTrack)}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var r;(r=this.onICEConnectionStateChange)===null||r===void 0||r.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var r;(r=this.onConnectionStateChange)===null||r===void 0||r.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidate=r=>{r.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,j.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},setTimeout(()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,j.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))},de("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(r){const o={iceServers:[],sdpSemantics:"plan-b"};return r.iceServers?o.iceServers=r.iceServers:r.turnServer&&r.turnServer.mode!=="off"&&(VE(r.turnServer.servers)?o.iceServers=r.turnServer.servers:(o.iceServers&&o.iceServers.push(...C_.turnServerConfigToIceServers(r.turnServer.servers)),de("USE_TURN_SERVER_OF_GATEWAY")&&o.iceServers&&r.turnServer.serversFromGateway&&o.iceServers.push(...C_.turnServerConfigToIceServers(r.turnServer.serversFromGateway)),r.turnServer.servers.concat(r.turnServer.serversFromGateway||[]).forEach(s=>{s.forceturn&&(o.iceTransportPolicy="relay")}))),o}static turnServerConfigToIceServers(r){const o=[];return r.forEach(s=>{s.security?s.tcpport&&o.push({username:s.username,credential:s.password,credentialType:"password",urls:"turns:".concat(s.turnServerURL,":").concat(s.tcpport,"?transport=tcp")}):(s.udpport&&o.push({username:s.username,credential:s.password,credentialType:"password",urls:"turn:".concat(s.turnServerURL,":").concat(s.udpport,"?transport=udp")}),s.tcpport&&o.push({username:s.username,credential:s.password,credentialType:"password",urls:"turn:".concat(s.turnServerURL,":").concat(s.tcpport,"?transport=tcp")}))}),o}async applySendEncodings(r,o){try{if(!Pr().supportSetRtpSenderParameters||r.length!==o.length)return;for(let l=0;l<r.length;l++){var s;const d=r[l],p=o[l];if(!p)continue;const _={},S={};if(p instanceof $r)switch(p._optimizationMode){case"motion":_.degradationPreference="maintain-framerate";break;case"detail":_.degradationPreference="maintain-resolution";break;default:_.degradationPreference="balanced"}if(de("DSCP_TYPE")&&au()){const A=de("DSCP_TYPE");["very-low","low","medium","high"].includes(A)&&(S.networkPriority=A)}const I=d.getParameters(),b=(s=I.encodings)===null||s===void 0?void 0:s[0];b&&Object.assign(b,S),Object.assign(I,_),await d.setParameters(I)}}catch{j.debug("[".concat(this.store.clientId,"] Apply RTPSendEncodings failed."))}}mungSendOfferSDP(r,o){const s=Hr.exports.parse(r);return o.forEach((l,d)=>{const p=l._mediaStreamTrack,_=s.mediaDescriptions.find(S=>S.attributes.mid===p.kind);_&&h0(_,l)}),Hr.exports.print(s)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=r=>{var o;(o=this.onFirstAudioReceived)===null||o===void 0||o.call(this,r)},this.statsFilter.onFirstVideoReceived=r=>{var o;(o=this.onFirstVideoReceived)===null||o===void 0||o.call(this,r)},this.statsFilter.onFirstAudioDecoded=r=>{var o;(o=this.onFirstAudioDecoded)===null||o===void 0||o.call(this,r)},this.statsFilter.onFirstVideoDecoded=(r,o,s)=>{var l;(l=this.onFirstVideoDecoded)===null||l===void 0||l.call(this,r,o,s)},this.statsFilter.onSelectedLocalCandidateChanged=(r,o)=>{var s;(s=this.onSelectedLocalCandidateChanged)===null||s===void 0||s.call(this,r,o)},this.statsFilter.onSelectedRemoteCandidateChanged=(r,o)=>{var s;(s=this.onSelectedRemoteCandidateChanged)===null||s===void 0||s.call(this,r,o)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0}async batchReceive(r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.batchReceive before remoteSDP created.");const o=this.remoteSDP.batchSend(r).map((d,p)=>{let{id:_,mslabel:S}=d;const{kind:I}=r[p];return new Le((b,A)=>{const F=setTimeout(()=>{A(new Error("Cannot receive track, id: ".concat(_)))},1e4),W=Z=>{const ee=un();if(ee.name==="Safari"&&Number(ee.version)===11&&Z.track.id!==_&&Z.streams[0].id===S){var te;const Ee=Z.streams[0].getTracks()[0];return(te=this.remoteSDP)===null||te===void 0||te.updateTrackLabel(I,_,Z.track.id),this.peerConnection.removeEventListener("track",W),clearTimeout(F),void b({track:Ee,id:_})}if(Z.track.id===_)return this.peerConnection.removeEventListener("track",W),clearTimeout(F),void b({track:Z.track,id:_})};this.peerConnection.addEventListener("track",W)})}),s=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:s});const l=await this.peerConnection.createAnswer();return await this.peerConnection.setLocalDescription(l),await Le.all(o)}catch(o){throw new re(q.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(o.toString()))}}async getRemoteSSRC(r){if(!this.remoteSDP)return;const o=this.remoteSDP.getSSRC(r);return o==null?void 0:o[0].ssrcId}setConfiguration(r){if(Pr().supportPCSetConfiguration){const o=C_.resolvePCConfiguration(r);this.peerConnection.setConfiguration(o)}}}).prototype,"connect",[Us],Object.getOwnPropertyDescriptor(Nn.prototype,"connect"),Nn.prototype),Ne(Nn.prototype,"stopSending",[Us],Object.getOwnPropertyDescriptor(Nn.prototype,"stopSending"),Nn.prototype),Ne(Nn.prototype,"receive",[Us],Object.getOwnPropertyDescriptor(Nn.prototype,"receive"),Nn.prototype),Ne(Nn.prototype,"stopReceiving",[Us],Object.getOwnPropertyDescriptor(Nn.prototype,"stopReceiving"),Nn.prototype),Ne(Nn.prototype,"muteRemote",[Us],Object.getOwnPropertyDescriptor(Nn.prototype,"muteRemote"),Nn.prototype),Ne(Nn.prototype,"unmuteRemote",[Us],Object.getOwnPropertyDescriptor(Nn.prototype,"unmuteRemote"),Nn.prototype),Ne(Nn.prototype,"muteLocal",[Us],Object.getOwnPropertyDescriptor(Nn.prototype,"muteLocal"),Nn.prototype),Ne(Nn.prototype,"unmuteLocal",[Us],Object.getOwnPropertyDescriptor(Nn.prototype,"unmuteLocal"),Nn.prototype),Ne(Nn.prototype,"close",[Us],Object.getOwnPropertyDescriptor(Nn.prototype,"close"),Nn.prototype),Ne(Nn.prototype,"updateEncoderConfig",[Us],Object.getOwnPropertyDescriptor(Nn.prototype,"updateEncoderConfig"),Nn.prototype),Ne(Nn.prototype,"updateSendParameters",[Us],Object.getOwnPropertyDescriptor(Nn.prototype,"updateSendParameters"),Nn.prototype),Ne(Nn.prototype,"replaceTrack",[Us],Object.getOwnPropertyDescriptor(Nn.prototype,"replaceTrack"),Nn.prototype),Ne(Nn.prototype,"getRemoteSSRC",[Us],Object.getOwnPropertyDescriptor(Nn.prototype,"getRemoteSSRC"),Nn.prototype),Nn);function Us(n,r,o){const s=n[r];if(typeof s!="function")throw new Error("Cannot use mutex on object property.");return o.value=async function(){const l=this.mutex,d=await l.lock("Locking from P2PConnection.".concat(r));try{for(var p=arguments.length,_=new Array(p),S=0;S<p;S++)_[S]=arguments[S];return await s.apply(this,_)}finally{d()}},o}function lV(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function uV(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?lV(Object(o),!0).forEach(function(s){L(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):lV(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}const gb="9",dV=4e4;class tJ{get localCapabilities(){return Br(this._localCapabilities)}get rtpCapabilities(){return Br(this._rtpCapabilities)}get candidates(){return Br(this._candidates)}get iceParameters(){return Br(this._iceParameters)}get dtlsParameters(){return Br(this._dtlsParameters)}constructor(r){L(this,"sessionDesc",void 0),L(this,"_localCapabilities",void 0),L(this,"_rtpCapabilities",void 0),L(this,"_candidates",void 0),L(this,"_iceParameters",void 0),L(this,"_dtlsParameters",void 0),L(this,"setup",void 0),L(this,"currentMidIndex",void 0),L(this,"cname",void 0),L(this,"firefoxSsrcMidMap",new Map),r=Br(r);const{remoteIceParameters:o,remoteDtlsParameters:s,candidates:l,remoteRTPCapabilities:d,remoteSetup:p,localCapabilities:_,cname:S}=r,I=Hr.exports.parse(`v=0
o=- 0 0 IN IP4 127.0.0.1
s=AgoraGateway
t=0 0
a=group:BUNDLE 0 1
a=msid-semantic: WMS
a=ice-lite
m=video 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendonly
a=rtcp-mux
a=rtcp-rsize
a=mid:0
m=audio 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendonly
a=rtcp-mux
a=rtcp-rsize
a=mid:1
`);this._rtpCapabilities=d,this._candidates=l,this._iceParameters=o,this._dtlsParameters=s,this._localCapabilities=_,this.setup=p,this.cname=S;const b=this.rtpCapabilities.send;for(const A of I.mediaDescriptions){if(A.attributes.iceUfrag=o.iceUfrag,A.attributes.icePwd=o.icePwd,A.attributes.fingerprints=s.fingerprints,A.attributes.candidates=l,A.attributes.setup=p,A.media.mediaType==="video"&&(A.media.fmts=b.videoCodecs.map(F=>F.payloadType.toString(10)),A.attributes.payloads=b.videoCodecs,A.attributes.extmaps=b.videoExtensions,de("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:F,ssrcGroups:W}=Ms([{ssrcId:dV,rtx:de("USE_SUB_RTX")?40001:void 0}],this.cname);A.attributes.ssrcs=F,A.attributes.ssrcGroups=W}if(A.media.mediaType==="audio"&&(A.media.fmts=b.audioCodecs.map(F=>F.payloadType.toString(10)),A.attributes.payloads=b.audioCodecs,A.attributes.extmaps=b.audioExtensions,sh(A),de("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:F,ssrcGroups:W}=Ms([{ssrcId:2e4}],this.cname);A.attributes.ssrcs=F,A.attributes.ssrcGroups=W}}this.sessionDesc=I,this.currentMidIndex=I.mediaDescriptions.length-1}preloadRemoteMedia(){const r=de("PRELOAD_MEDIA_COUNT");this.rtpCapabilities;const o=this.candidates,s=this.dtlsParameters,l=this.iceParameters,d=this.rtpCapabilities.send;for(let p=1;p<r;p++){const _=2*p+2e4,S=2*p+dV,{ssrcs:I,ssrcGroups:b}=Ms([{ssrcId:_}],this.cname),{ssrcs:A,ssrcGroups:F}=Ms([{ssrcId:S,rtx:de("USE_SUB_RTX")?S+1:void 0}],this.cname);this.sessionDesc.mediaDescriptions.push({media:{mediaType:"video",port:gb,protos:["UDP","TLS","RTP","SAVPF"],fmts:d.videoCodecs.map(W=>W.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:l.iceUfrag,icePwd:l.icePwd,unrecognized:[],candidates:o,extmaps:d.videoExtensions,fingerprints:s.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:A,ssrcGroups:F,rtcpFeedbackWildcards:[],payloads:d.videoCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*p)}}),this.sessionDesc.mediaDescriptions.push({media:{mediaType:"audio",port:gb,protos:["UDP","TLS","RTP","SAVPF"],fmts:d.audioCodecs.map(W=>W.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:l.iceUfrag,icePwd:l.icePwd,unrecognized:[],candidates:o,extmaps:d.audioExtensions,fingerprints:s.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:I,ssrcGroups:b,rtcpFeedbackWildcards:[],payloads:d.audioCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*p+1)}}),this.currentMidIndex+=2}this.updateBundleMids()}toString(){return Hr.exports.print(this.sessionDesc)}send(r,o,s,l){const{ssrcs:d,ssrcGroups:p}=Ms(o,this.cname,de("SYNC_GROUP")?s:void 0),_=this.findPreloadMediaDesc(d);if(_){if(nr()&&this.firefoxSsrcMidMap.set(d[0].ssrcId,_.attributes.mid),l&&(l.twcc||l.remb)){const S=this.sessionDesc.mediaDescriptions.indexOf(_);return this.sessionDesc.mediaDescriptions[S]=this.mungSendMediaDesc(_,l),{mid:_.attributes.mid,needExchangeSDP:!0}}return{mid:_.attributes.mid,needExchangeSDP:!1}}{const S=this.findAvailableMediaIndex(r,d);let I;return S===-1||S===1&&(Yi()||vT())||S===0&&de("USE_SUB_RTX")||ju()?(I=this.createOrRecycleSendMedia(r,d,p,"sendonly",l),this.updateBundleMids()):(I=Br(this.sessionDesc.mediaDescriptions[S]),I.attributes.direction="sendonly",I.attributes.ssrcs=d,I.attributes.ssrcGroups=p,this.sessionDesc.mediaDescriptions[S]=this.mungSendMediaDesc(I,l)),nr()&&this.firefoxSsrcMidMap.set(d[0].ssrcId,I.attributes.mid),{mid:I.attributes.mid,needExchangeSDP:!0}}}batchSend(r){const o=r.map(d=>{let{kind:p,ssrcMsg:_,mslabel:S}=d;return this.send(p,_,S)}),s=[];let l=!1;return o.forEach(d=>{let{mid:p,needExchangeSDP:_}=d;_&&(l=!0),s.push(p)}),{mids:s,needExchangeSDP:l}}stopSending(r){const o=this.sessionDesc.mediaDescriptions.filter(s=>s.attributes.mid&&r.indexOf(s.attributes.mid)!==-1);if(o.length!==r.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.stopSending.");o.forEach(s=>{s.attributes.mid==="0"||nr()||ju()?s.attributes.ssrcs=[]:(s.attributes.ssrcs=[],s.attributes.direction="inactive",s.media.port="0")}),this.updateBundleMids()}mute(r){const o=this.sessionDesc.mediaDescriptions.find(s=>s.attributes.mid===r);if(!o)throw new Error("mediaDescription not found with ".concat(r," in remote SDP when calling RemoteSDP.mute."));o.attributes.direction="inactive"}unmute(r){const o=this.sessionDesc.mediaDescriptions.find(s=>s.attributes.mid===r);if(!o)throw new Error("mediaDescription not found with ".concat(r," in remote SDP when calling RemoteSDP.unmute."));o.attributes.direction="sendonly"}muteRemote(r){const o=this.sessionDesc.mediaDescriptions.filter(s=>r.includes(s.attributes.mid||""));if(o.length!==r.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");o.forEach(s=>{s.attributes.direction="inactive"})}unmuteRemote(r){const o=this.sessionDesc.mediaDescriptions.filter(s=>r.includes(s.attributes.mid||""));if(o.length!==r.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");o.forEach(s=>{s.attributes.direction="recvonly"})}receive(r,o,s,l){r.forEach((d,p)=>{this.createOrRecycleRecvMedia(d,[],"recvonly",o,s,l[p])}),this.updateBundleMids()}stopReceiving(r){const o=this.sessionDesc.mediaDescriptions.filter(s=>r.indexOf(s.attributes.mid)!==-1);if(o.length!==r.length)throw new Error("MediaDescriptions' length doesn't match mids's length when calling RemoteSDP.receive.");o.forEach(s=>{s.media.port="0",s.attributes.direction="inactive"}),this.updateBundleMids()}updateCandidates(r){r===ji.TCP?this._candidates.forEach(o=>{this._candidates.findIndex(s=>s.transport==="tcp"&&s.connectionAddress===o.connectionAddress&&s.port===o.port)===-1&&this._candidates.push(uV(uV({},o),{},{foundation:"tcpcandidate",priority:Number(o.priority)-1+"",transport:"tcp",port:Number(o.port)+90+""}))}):this._candidates=this._candidates.filter(o=>o.transport!=="tcp");for(const o of this.sessionDesc.mediaDescriptions)o.attributes.candidates=this.candidates}restartICE(r){r=Br(r),this._iceParameters=r,this.sessionDesc.mediaDescriptions.forEach(o=>{o.attributes.iceUfrag=r.iceUfrag,o.attributes.icePwd=r.icePwd})}predictReceivingMids(r){const o=[];for(let s=0;s<r;s++)o.push((this.currentMidIndex+s+1).toString(10));return o}findAvailableMediaIndex(r,o){return this.sessionDesc.mediaDescriptions.findIndex(s=>{const l=s.media.mediaType===r&&s.media.port!=="0"&&(s.attributes.direction==="sendonly"||s.attributes.direction==="sendrecv")&&s.attributes.ssrcs.length===0;if(nr()){if(l){const d=this.firefoxSsrcMidMap.get(o[0].ssrcId);return!(d||s.attributes.mid!=="0"&&s.attributes.mid!=="1")||!(!d||d!==s.attributes.mid)}return!1}return l})}createOrRecycleRecvMedia(r,o,s,l,d,p){const _=r._mediaStreamTrack.kind,S=this.rtpCapabilities.recv,I=this.localCapabilities.send;let b=[];if(_===Pt.VIDEO){var A,F;if(de("H264_PROFILE_LEVEL_ID")&&l==="h264"&&(b=S.videoCodecs.filter(Ee=>{var ye,Pe;return(((ye=Ee.rtpMap)===null||ye===void 0?void 0:ye.encodingName.toLowerCase())||"").includes(l)&&(Ee==null||(Pe=Ee.fmtp)===null||Pe===void 0?void 0:Pe.parameters["profile-level-id"])===de("H264_PROFILE_LEVEL_ID")})),!b||((A=b)===null||A===void 0?void 0:A.length)===0){const Ee=I.videoCodecs.filter(ye=>{var Pe;return(((Pe=ye.rtpMap)===null||Pe===void 0?void 0:Pe.encodingName.toLowerCase())||"").includes(l)});Ee.length!==0&&(b=S.videoCodecs.filter(ye=>Ee.some(Pe=>Pe.payloadType===ye.payloadType)))}if(de("USE_PUB_RTX")){const Ee=b.map(Pe=>Pe.payloadType.toString()),ye=S.videoCodecs.filter(Pe=>{var Xe,ke;return((Xe=Pe.rtpMap)===null||Xe===void 0?void 0:Xe.encodingName)==="rtx"&&Ee.includes(((ke=Pe.fmtp)===null||ke===void 0?void 0:ke.parameters.apt)||"")});b=[...b,...ye]}b.length===0&&(j.warning("codec ".concat(l," not included in rtpCapabilities, fallback to default payloads: ").concat((F=S.videoCodecs[0].rtpMap)===null||F===void 0?void 0:F.encodingName)),b=S.videoCodecs)}else b=S.audioCodecs.filter(Ee=>{var ye;return(((ye=Ee.rtpMap)===null||ye===void 0?void 0:ye.encodingName.toLowerCase())||"").includes(d)}),b.length===0&&(j.warning("codec ".concat(d," not included in rtpCapabilities, fallback to opus")),b=S.audioCodecs.filter(Ee=>{var ye;return(((ye=Ee.rtpMap)===null||ye===void 0?void 0:ye.encodingName.toLowerCase())||"").includes("opus")}));const W=_===Pt.VIDEO?S.videoExtensions:S.audioExtensions;this.currentMidIndex+=1;const Z="".concat(this.currentMidIndex);let ee={media:{mediaType:_,port:gb,protos:["UDP","TLS","RTP","SAVPF"],fmts:b.map(Ee=>Ee.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:W,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:o,ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:b,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:s,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(Z)}};ee=this.mungRecvMediaDsec(ee,r,p);const te=this.findFirstClosedMedia(_);if(te){const Ee=this.sessionDesc.mediaDescriptions.indexOf(te);this.sessionDesc.mediaDescriptions[Ee]=ee}else this.sessionDesc.mediaDescriptions.push(ee);return ee}createOrRecycleSendMedia(r,o,s,l,d){const p=this.rtpCapabilities.send,_=r===Pt.VIDEO?p.videoCodecs:p.audioCodecs,S=r===Pt.VIDEO?p.videoExtensions:p.audioExtensions;this.currentMidIndex+=1;const I="".concat(this.currentMidIndex);let b={media:{mediaType:r,port:gb,protos:["UDP","TLS","RTP","SAVPF"],fmts:_.map(F=>F.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:S,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:o,ssrcGroups:s,rtcpFeedbackWildcards:[],payloads:_,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:l,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(I)}};b=this.mungSendMediaDesc(b,d);const A=this.findFirstClosedMedia(r);if(A){const F=this.sessionDesc.mediaDescriptions.indexOf(A);this.sessionDesc.mediaDescriptions[F]=b}else this.sessionDesc.mediaDescriptions.push(b);return b}updateBundleMids(){this.sessionDesc.attributes.groups[0].identificationTag=this.sessionDesc.mediaDescriptions.filter(r=>r.media.port!=="0").map(r=>r.attributes.mid)}mungRecvMediaDsec(r,o,s){const l=Br(r);return ox(l),h0(l,o),ax(l,o),z3(l),pb(l,s,this.localCapabilities.send),l}mungSendMediaDesc(r,o){const s=Br(r);return pb(s,o,this.localCapabilities.recv),sh(s),s}updateRecvMedia(r,o){const s=this.sessionDesc.mediaDescriptions.findIndex(l=>l.attributes.mid===r);if(s!==-1){const l=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[s],o);this.sessionDesc.mediaDescriptions[s]=l}}bumpMid(r){this.currentMidIndex+=r}findFirstClosedMedia(r){return this.sessionDesc.mediaDescriptions.find(o=>nr()?o.media.port==="0"&&o.media.mediaType===r:o.media.port==="0")}findPreloadMediaDesc(r){return this.sessionDesc.mediaDescriptions.find(o=>{var s,l;return((s=o.attributes)===null||s===void 0||(l=s.ssrcs[0])===null||l===void 0?void 0:l.ssrcId)===r[0].ssrcId})}getSSRC(r){var o;return(o=this.sessionDesc.mediaDescriptions.find(s=>s.attributes.mid===r))===null||o===void 0?void 0:o.attributes.ssrcs}}var xn;function hV(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function f0(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?hV(Object(o),!0).forEach(function(s){L(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):hV(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}let qu=(Ne((xn=class T_ extends zT{get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get dtlsTransportState(){var r,o,s;return(r=(o=this.peerConnection.getReceivers()[0])===null||o===void 0||(s=o.transport)===null||s===void 0?void 0:s.state)!==null&&r!==void 0?r:null}constructor(r,o){super(r,o),L(this,"store",void 0),L(this,"peerConnection",void 0),L(this,"remoteSDP",void 0),L(this,"initialOffer",void 0),L(this,"transportEventReceiver",void 0),L(this,"statsFilter",void 0),L(this,"localCapabilities",void 0),L(this,"localCandidateCount",0),L(this,"allCandidatesReceived",!1),L(this,"selectedCandidatePairTimer",void 0),L(this,"establishPromise",void 0),L(this,"mutex",new xo("P2PConnection-mutex")),this.store=o,this.peerConnection=new RTCPeerConnection(T_.resolvePCConfiguration(r),{optional:[{googDscp:!0}]}),this.statsFilter=ux(this.peerConnection,de("STATS_UPDATE_INTERVAL"),void 0,nr()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1,this.establishPromise=this.establish()}async establish(){try{this.peerConnection.addTransceiver("video",{direction:"recvonly"}),this.peerConnection.addTransceiver("audio",{direction:"recvonly"});const r=await this.peerConnection.createOffer();if(!r.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const o=zf(r.sdp),s=await q3(!de("USE_PUB_RTX")&&!de("USE_SUB_RTX"),de("FILTER_VIDEO_FEC"),de("FILTER_AUDIO_FEC"));return this.localCapabilities=sx(s),this.initialOffer=r,f0(f0({},o),{},{rtpCapabilities:s,offerSDP:r.sdp})}catch(r){throw new re(q.GET_LOCAL_CONNECTION_PARAMS_FAILED,r.toString())}}async connect(r,o,s,l,d,p){try{if(!this.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");this.remoteSDP=new tJ({remoteIceParameters:r,remoteDtlsParameters:o,candidates:s,remoteRTPCapabilities:l,remoteSetup:d,localCapabilities:this.localCapabilities,cname:p});const _=this.remoteSDP.toString(),S=Hr.exports.parse(this.initialOffer.sdp),I=S.mediaDescriptions.find(W=>W.media.mediaType==="audio");I&&sh(I);const b=Hr.exports.print(S),A=this.logSDPExchange(b||"","offer","local","connect");this.store.descriptionStart(),await this.peerConnection.setLocalDescription({type:"offer",sdp:b}),A==null||A(_),await this.peerConnection.setRemoteDescription({type:"answer",sdp:_});const F=this.peerConnection.getTransceivers()[0];if(F!=null&&F.receiver&&this.tryBindTransportEvents(F.receiver),de("PRELOAD_MEDIA_COUNT")>0){this.remoteSDP.preloadRemoteMedia();const W=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:W});const Z=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(Z)}}catch(_){throw new re(q.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(_.toString()))}}send(r,o,s){var l=this;return _c(function*(){const d=yield Zt(l.mutex.lock("From P2PConnection.send"));try{if(!l.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");const p=[];r.forEach(ee=>{const te=l.peerConnection.addTransceiver(ee._mediaStreamTrack,{direction:"sendonly"});p.push(te),ee._updateRtpTransceiver(te)}),nr()&&de("SIMULCAST")===!0&&(yield Zt(l.applySimulcastForFirefox(p,r)));const _=yield Zt(l.peerConnection.createOffer()),S=l.remoteSDP.predictReceivingMids(r.length),I=l.mungSendOfferSDP(_.sdp,r,S),b=Hr.exports.parse(I),A=S.map(ee=>{const te=b.mediaDescriptions.find(Ee=>Ee.attributes.mid===ee);if(!te)throw new Error("Cannot extract ssrc from mediaDescription.");return W3(te,de("USE_PUB_RTX"))});let F;try{F=yield A}catch(ee){F=[],l.remoteSDP.receive(r,o,s,F);const te=l.remoteSDP.toString();throw yield Zt(l.peerConnection.setLocalDescription({type:"offer",sdp:I})),yield Zt(l.peerConnection.setRemoteDescription({type:"answer",sdp:te})),yield Zt(l.stopSending(S,!0)),ee}l.remoteSDP.receive(r,o,s,F);const W=l.remoteSDP.toString(),Z=l.logSDPExchange(I,"offer","local","send");return yield Zt(l.peerConnection.setLocalDescription({type:"offer",sdp:I})),yield Zt(l.applySimulcastEncodings(p,r)),yield Zt(l.applySendEncodings(p,r)),Z==null||Z(W),yield Zt(l.peerConnection.setRemoteDescription({type:"answer",sdp:W})),p.map((ee,te)=>{const Ee=S[te];return{localSSRC:A[te],id:Ee,transceiver:ee}})}catch(p){throw p instanceof re?p:new re(q.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(p.toString()))}finally{d()}})()}async stopSending(r,o){const s=o?void 0:await this.mutex.lock("From P2PConnection.stopSending");try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");const l=this.peerConnection.getTransceivers().filter(S=>r.indexOf(S.mid)!==-1);if(l.length!==r.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.");l.map(S=>{var I;S.direction="inactive",(I=S.stop)===null||I===void 0||I.call(S)});const d=await this.peerConnection.createOffer(),p=this.logSDPExchange(d.sdp||"","offer","local","stopSending");await this.peerConnection.setLocalDescription(d),this.remoteSDP.stopReceiving(r);const _=this.remoteSDP.toString();p==null||p(_),await this.peerConnection.setRemoteDescription({type:"answer",sdp:_})}catch(l){throw new re(q.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(l.toString()))}finally{s&&s()}}async receive(r,o,s,l){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(r," before remoteSDP created."));const{mid:d,needExchangeSDP:p}=this.remoteSDP.send(r,o,s,l);if(p){const S=this.remoteSDP.toString(),I=this.logSDPExchange(S,"offer","remote","receive");await this.peerConnection.setRemoteDescription({type:"offer",sdp:S});const b=await this.peerConnection.createAnswer(),A=this.mungReceiveAnswerSDP(b.sdp,d,r);I==null||I(A||""),await this.peerConnection.setLocalDescription({type:"answer",sdp:A}),j.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(r," by exchanging SDP."))}else j.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(r," no need to exchange SDP."));const _=this.peerConnection.getTransceivers().find(S=>S.mid===d);if(!_)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:_.receiver.track,id:d,transceiver:_}}catch(d){throw new re(q.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(d.toString()))}}async batchReceive(r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.batchReceive before remoteSDP created.");const{mids:o,needExchangeSDP:s}=this.remoteSDP.batchSend(r);if(s){const l=this.remoteSDP.toString(),d=this.logSDPExchange(l,"offer","remote","receive");await this.peerConnection.setRemoteDescription({type:"offer",sdp:l});const p=await this.peerConnection.createAnswer();d==null||d(p.sdp||""),await this.peerConnection.setLocalDescription(p),j.debug("[".concat(this.store.clientId,"] [P2PConnection] batchReceive by exchanging SDP."))}else j.debug("[".concat(this.store.clientId,"] [P2PConnection] batchReceive no need to exchange SDP."));return o.map(l=>{const d=this.peerConnection.getTransceivers().find(p=>p.mid===l);if(!d)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:d.receiver.track,id:l,transceiver:d}})}catch(o){throw new re(q.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(o.toString()))}}async stopReceiving(r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");this.remoteSDP.stopSending(r);const o=this.remoteSDP.toString(),s=this.logSDPExchange(o,"offer","remote","stopReceiving");await this.peerConnection.setRemoteDescription({type:"offer",sdp:o});const l=await this.peerConnection.createAnswer();s==null||s(l.sdp||""),await this.peerConnection.setLocalDescription(l)}catch(o){throw new re(q.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(o.toString()))}}async muteRemote(r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteRemote mid=".concat(r," before remote SDP created."));this.remoteSDP.mute(r);const o=this.remoteSDP.toString(),s=this.logSDPExchange(o,"offer","remote","muteRemote");await this.peerConnection.setRemoteDescription({type:"offer",sdp:o});const l=await this.peerConnection.createAnswer();s==null||s(l.sdp||""),await this.peerConnection.setLocalDescription(l)}catch(o){throw new re(q.EXCHANGE_SDP_FAILED,"P2PConnection.muteRemote failed; ".concat(o.toString()))}}async unmuteRemote(r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteRemote mid=".concat(r," before remote SDP created."));this.remoteSDP.unmute(r);const o=this.remoteSDP.toString(),s=this.logSDPExchange(o,"offer","remote","unmuteRemote");await this.peerConnection.setRemoteDescription({type:"offer",sdp:o});const l=await this.peerConnection.createAnswer();s==null||s(l.sdp||""),await this.peerConnection.setLocalDescription(l)}catch(o){throw new re(q.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteRemote failed; ".concat(o.toString()))}}async muteLocal(r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");const o=this.peerConnection.getTransceivers().filter(p=>p.mid&&r.indexOf(p.mid)!==-1);if(o.length!==r.length)throw new Error("Transceivers' length doesn't match mids' length.");o.map(p=>{p.direction="inactive"});const s=await this.peerConnection.createOffer(),l=this.logSDPExchange(s.sdp||"","offer","local","muteLocal");await this.peerConnection.setLocalDescription(s),this.remoteSDP.muteRemote(r);const d=this.remoteSDP.toString();l==null||l(d),await this.peerConnection.setRemoteDescription({type:"answer",sdp:d})}catch(o){throw new re(q.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(o.toString()))}}async unmuteLocal(r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");const o=this.peerConnection.getTransceivers().filter(p=>p.mid&&r.indexOf(p.mid)!==-1);if(o.length!==r.length)throw new Error("Transceivers' length doesn't match mids' length.");o.map(async(p,_)=>{p.direction="sendonly"});const s=await this.peerConnection.createOffer(),l=this.logSDPExchange(s.sdp||"","offer","local","unmuteLocal");await this.peerConnection.setLocalDescription(s),this.remoteSDP.unmuteRemote(r);const d=this.remoteSDP.toString();l==null||l(d),await this.peerConnection.setRemoteDescription({type:"answer",sdp:d})}catch(o){throw new re(q.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(o.toString()))}}restartICE(r){var o=this;return _c(function*(){const s=yield Zt(o.mutex.lock("From P2PConnection.restartICE"));try{if(!o.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");if(Pr().supportPCSetConfiguration){const I=o.peerConnection.getConfiguration(),b=r===ji.RELAY?"relay":"all";I.iceTransportPolicy!==b&&(j.debug("[".concat(o.store.clientId,"] restartICE change iceTransportPolicy from [").concat(I.iceTransportPolicy,"] to [").concat(b,"]")),I.iceTransportPolicy=b,o.peerConnection.setConfiguration(I))}else if(r===ji.RELAY)return;r!==ji.RELAY&&o.remoteSDP.updateCandidates(r);const l=yield Zt(o.peerConnection.createOffer({iceRestart:!0}));if(!l.sdp)throw new Error("Cannot restartICE because restart offer SDP does not exist.");const d=zf(l.sdp),{remoteIceParameters:p}=yield d.iceParameters;o.remoteSDP.restartICE(p);const _=o.remoteSDP.toString(),S=o.logSDPExchange(l.sdp||"","offer","local","restartICE");o.store.descriptionStart(),yield Zt(o.peerConnection.setLocalDescription(l)),S==null||S(_),yield Zt(o.peerConnection.setRemoteDescription({type:"answer",sdp:_}))}catch(l){j.warning("[".concat(o.store.clientId,"] restart ICE failed, abort operation"),l)}finally{s()}})()}close(){var r;this.peerConnection.close(),(r=this.onConnectionStateChange)===null||r===void 0||r.call(this,"closed"),this.tryUnbindTransportEvents(),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.transportEventReceiver=void 0,this.statsFilter.destroy()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(r){return this.statsFilter.getVideoIsReady(r)}async updateEncoderConfig(r,o){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");const s=await this.peerConnection.createOffer(),l=this.mungSendOfferSDP(s.sdp,[o],[r]);this.remoteSDP.updateRecvMedia(r,o);const d=this.remoteSDP.toString(),p=this.logSDPExchange(l,"offer","local","updateEncoderConfig");await this.peerConnection.setLocalDescription({type:"offer",sdp:l}),p==null||p(d),await this.peerConnection.setRemoteDescription({type:"answer",sdp:d})}catch(s){throw new re(q.EXCHANGE_SDP_FAILED,s.toString())}}async updateSendParameters(r,o){const s=this.peerConnection.getTransceivers().filter(l=>l.mid===r);s.length===1&&(this.isVP8Simulcast(o)?nr()||await this.applySimulcastEncodings(s,[o]):await this.applySendEncodings(s,[o]))}setStatsRemoteVideoIsReady(r,o){this.statsFilter.setVideoIsReady2(r,o)}async replaceTrack(r,o){const s=this.peerConnection.getTransceivers().find(l=>l.mid===o);s&&await s.sender.replaceTrack(r._mediaStreamTrack)}async getSelectedCandidatePair(){const r=this.peerConnection.getReceivers();if(r.length>0&&r[0].transport&&r[0].transport.iceTransport&&r[0].transport.iceTransport.getSelectedCandidatePair&&r[0].transport.iceTransport.getSelectedCandidatePair()){const o=r[0].transport.iceTransport,{local:s,remote:l}=o.getSelectedCandidatePair();return{local:f0(f0({},ch),{},{candidateType:s.type,protocol:s.protocol,address:s.address,port:s.port}),remote:f0(f0({},ch),{},{candidateType:l.type,protocol:l.protocol,address:l.address,port:l.port})}}return this.statsFilter.getSelectedCandidatePair()}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var r;(r=this.onICEConnectionStateChange)===null||r===void 0||r.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var r;(r=this.onConnectionStateChange)===null||r===void 0||r.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidate=r=>{r.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,j.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},setTimeout(()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,j.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))},de("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(r){const o={iceServers:[]};return r.iceServers?o.iceServers=r.iceServers:r.turnServer&&r.turnServer.mode!=="off"&&(VE(r.turnServer.servers)?o.iceServers=r.turnServer.servers:(o.iceServers&&o.iceServers.push(...T_.turnServerConfigToIceServers(r.turnServer.servers)),de("USE_TURN_SERVER_OF_GATEWAY")&&o.iceServers&&r.turnServer.serversFromGateway&&o.iceServers.push(...T_.turnServerConfigToIceServers(r.turnServer.serversFromGateway)),de("FORCE_TURN_TCP")?o.iceTransportPolicy="relay":r.turnServer.servers.concat(r.turnServer.serversFromGateway||[]).forEach(s=>{s.forceturn&&(o.iceTransportPolicy="relay")}))),de("ENABLE_ENCODED_TRANSFORM")&&Pr().supportWebRTCEncodedTransform&&(o.encodedInsertableStreams=!0),o}static turnServerConfigToIceServers(r){const o=[];return r.forEach(s=>{s.security?s.tcpport&&o.push({username:s.username,credential:s.password,credentialType:"password",urls:"turns:".concat(eb(s.turnServerURL),":").concat(s.tcpport,"?transport=tcp")}):(s.udpport&&!de("FORCE_TURN_TCP")&&o.push({username:s.username,credential:s.password,credentialType:"password",urls:"turn:".concat(s.turnServerURL,":").concat(s.udpport,"?transport=udp")}),s.tcpport&&o.push({username:s.username,credential:s.password,credentialType:"password",urls:"turn:".concat(s.turnServerURL,":").concat(s.tcpport,"?transport=tcp")}))}),o}tryBindTransportEvents(r){const o=r.transport;if(o){this.transportEventReceiver=r,o.onstatechange=()=>{var l;o!=null&&o.state&&((l=this.onDTLSTransportStateChange)===null||l===void 0||l.call(this,o.state))},o.onerror=l=>{var d;(d=this.onDTLSTransportError)===null||d===void 0||d.call(this,"error"in l?l.error:l)};const s=o.iceTransport;s&&(s.onstatechange=()=>{const l=o==null?void 0:o.iceTransport.state;var d;l&&((d=this.onICETransportStateChange)===null||d===void 0||d.call(this,l))},s.getSelectedCandidatePair&&(s.onselectedcandidatepairchange=()=>{if(s.getSelectedCandidatePair()){const{local:l,remote:d}=s.getSelectedCandidatePair();j.info("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] selectedcandidatepairchange: local ").concat(JSON.stringify({candidateType:l.type,protocol:l.protocol}),", remote ").concat(JSON.stringify({candidateType:d.type,protocol:d.protocol,address:d.address,port:d.port})," )"))}}))}}tryUnbindTransportEvents(){this.transportEventReceiver&&this.transportEventReceiver.transport&&(this.transportEventReceiver.transport.onstatechange=null,this.transportEventReceiver.transport.onerror=null,this.transportEventReceiver.transport.iceTransport&&(this.transportEventReceiver.transport.iceTransport.onstatechange=null))}async applySendEncodings(r,o){try{if(!Pr().supportSetRtpSenderParameters||r.length!==o.length)return;for(let I=0;I<r.length;I++){const b=r[I],A=o[I];if(A&&A instanceof $r){var s,l;if(this.isVP8Simulcast(A))continue;const F={},W={};switch(A._optimizationMode){case"motion":F.degradationPreference="maintain-framerate";break;case"detail":F.degradationPreference="maintain-resolution";break;default:F.degradationPreference="balanced"}var d,p,_,S;if((s=A._encoderConfig)!==null&&s!==void 0&&s.bitrateMax&&(W.maxBitrate=1e3*((d=A._encoderConfig)===null||d===void 0?void 0:d.bitrateMax)),A._hints.includes(ai.LOW_STREAM)&&((p=A._encoderConfig)!==null&&p!==void 0&&p.frameRate&&(W.maxFramerate=Gu(A._encoderConfig.frameRate)),(_=A._encoderConfig)!==null&&_!==void 0&&_.scaleResolutionDownBy&&((S=A._encoderConfig)===null||S===void 0?void 0:S.scaleResolutionDownBy)>1&&(W.scaleResolutionDownBy=A._encoderConfig.scaleResolutionDownBy)),de("DSCP_TYPE")&&au()){const te=de("DSCP_TYPE");["very-low","low","medium","high"].includes(te)&&(W.networkPriority=te)}const Z=b.sender.getParameters(),ee=(l=Z.encodings)===null||l===void 0?void 0:l[0];nr()&&!ee&&(F.encodings=[W]),ee&&Object.assign(ee,W),Object.assign(Z,F),await b.sender.setParameters(Z)}}}catch{j.debug("[".concat(this.store.clientId,"] Apply RTPSendEncodings failed."))}}mungSendOfferSDP(r,o,s){const l=Hr.exports.parse(r);return o.forEach((d,p)=>{const _=s[p],S=l.mediaDescriptions.find(I=>I.attributes.mid===_);S&&(h0(S,d),K3(S,d,this.store.codec))}),Hr.exports.print(l)}mungReceiveAnswerSDP(r,o,s){const l=Hr.exports.parse(r),d=l.mediaDescriptions.find(p=>p.attributes.mid===o);return d&&s===Pt.AUDIO&&d.media.mediaType==="audio"&&sh(d),Hr.exports.print(l)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=r=>{var o;(o=this.onFirstAudioReceived)===null||o===void 0||o.call(this,r)},this.statsFilter.onFirstVideoReceived=r=>{var o;(o=this.onFirstVideoReceived)===null||o===void 0||o.call(this,r)},this.statsFilter.onFirstAudioDecoded=r=>{var o;(o=this.onFirstAudioDecoded)===null||o===void 0||o.call(this,r)},this.statsFilter.onFirstVideoDecoded=(r,o,s)=>{var l;(l=this.onFirstVideoDecoded)===null||l===void 0||l.call(this,r,o,s)},this.statsFilter.onSelectedLocalCandidateChanged=(r,o)=>{var s;(s=this.onSelectedLocalCandidateChanged)===null||s===void 0||s.call(this,r,o)},this.statsFilter.onSelectedRemoteCandidateChanged=(r,o)=>{var s;(s=this.onSelectedRemoteCandidateChanged)===null||s===void 0||s.call(this,r,o)},this.statsFilter.onFirstVideoDecodedTimeout=r=>{var o;(o=this.onFirstVideoDecodedTimeout)===null||o===void 0||o.call(this,r)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0,this.statsFilter.onFirstVideoDecodedTimeout=void 0}async applySimulcastForFirefox(r,o){if(r.length===o.length)for(let _=0;_<r.length;_++){var s,l,d,p;const S=r[_],I=o[_];if(I instanceof $r&&!I._hints.includes(ai.LOW_STREAM)&&(s=I._encoderConfig)!==null&&s!==void 0&&s.bitrateMax&&((l=I._encoderConfig)===null||l===void 0?void 0:l.bitrateMax)>200&&(d=I._scalabiltyMode)!==null&&d!==void 0&&d.numSpatialLayers&&((p=I._scalabiltyMode)===null||p===void 0?void 0:p.numSpatialLayers)>1&&this.store.codec==="vp8"){const b={},A={high:1e3*(I._encoderConfig.bitrateMax-50),medium:5e4};b.encodings=[{rid:"m",active:!0,maxBitrate:A.medium,scaleResolutionDownBy:4},{rid:"h",active:!0,maxBitrate:A.high}];const F=S.sender.getParameters();await S.sender.setParameters(Object.assign(F,b))}}}async applySimulcastEncodings(r,o){if(!nr()&&r.length===o.length)for(let s=0;s<r.length;s++){const l=o[s];if(l instanceof $r&&this.isVP8Simulcast(l)){const d=r[s],p={},_={high:1e3*(l._encoderConfig.bitrateMax-50),medium:5e4};p.encodings=[{active:!0,adaptivePtime:!1,networkPriority:"high",priority:"high",maxBitrate:_.high},{active:!0,adaptivePtime:!1,networkPriority:"low",priority:"low",maxBitrate:_.medium,scaleResolutionDownBy:4}];const S=d.sender.getParameters();await d.sender.setParameters(Object.assign(S,p))}}}isVP8Simulcast(r){var o,s,l,d;return!!(r instanceof $r&&de("SIMULCAST")&&this.store.codec==="vp8"&&!r._hints.includes(ai.LOW_STREAM)&&(o=r._encoderConfig)!==null&&o!==void 0&&o.bitrateMax&&((s=r._encoderConfig)===null||s===void 0?void 0:s.bitrateMax)>200&&(l=r._scalabiltyMode)!==null&&l!==void 0&&l.numSpatialLayers&&((d=r._scalabiltyMode)===null||d===void 0?void 0:d.numSpatialLayers)>1)}logSDPExchange(r,o,s,l){if(de("SDP_LOGGING"))return j.upload("[".concat(this.store.clientId,"] exchanging ").concat(s," ").concat(o," SDP during P2PConnection.").concat(l,`
`),r),o==="offer"?d=>{this.logSDPExchange(d,"answer",s==="local"?"remote":"local",l)}:void 0}async getRemoteSSRC(r){if(!this.remoteSDP)return;const o=this.remoteSDP.getSSRC(r);return o==null?void 0:o[0].ssrcId}setConfiguration(r){if(Pr().supportPCSetConfiguration){const o=T_.resolvePCConfiguration(r);this.peerConnection.setConfiguration(o)}}}).prototype,"connect",[Fs],Object.getOwnPropertyDescriptor(xn.prototype,"connect"),xn.prototype),Ne(xn.prototype,"receive",[Fs],Object.getOwnPropertyDescriptor(xn.prototype,"receive"),xn.prototype),Ne(xn.prototype,"batchReceive",[Fs],Object.getOwnPropertyDescriptor(xn.prototype,"batchReceive"),xn.prototype),Ne(xn.prototype,"stopReceiving",[Fs],Object.getOwnPropertyDescriptor(xn.prototype,"stopReceiving"),xn.prototype),Ne(xn.prototype,"muteRemote",[Fs],Object.getOwnPropertyDescriptor(xn.prototype,"muteRemote"),xn.prototype),Ne(xn.prototype,"unmuteRemote",[Fs],Object.getOwnPropertyDescriptor(xn.prototype,"unmuteRemote"),xn.prototype),Ne(xn.prototype,"muteLocal",[Fs],Object.getOwnPropertyDescriptor(xn.prototype,"muteLocal"),xn.prototype),Ne(xn.prototype,"unmuteLocal",[Fs],Object.getOwnPropertyDescriptor(xn.prototype,"unmuteLocal"),xn.prototype),Ne(xn.prototype,"close",[Fs],Object.getOwnPropertyDescriptor(xn.prototype,"close"),xn.prototype),Ne(xn.prototype,"updateEncoderConfig",[Fs],Object.getOwnPropertyDescriptor(xn.prototype,"updateEncoderConfig"),xn.prototype),Ne(xn.prototype,"updateSendParameters",[Fs],Object.getOwnPropertyDescriptor(xn.prototype,"updateSendParameters"),xn.prototype),Ne(xn.prototype,"replaceTrack",[Fs],Object.getOwnPropertyDescriptor(xn.prototype,"replaceTrack"),xn.prototype),Ne(xn.prototype,"getRemoteSSRC",[Fs],Object.getOwnPropertyDescriptor(xn.prototype,"getRemoteSSRC"),xn.prototype),xn);function Fs(n,r,o){const s=n[r];if(typeof s!="function")throw new Error("Cannot use mutex on object property.");return o.value=async function(){const l=this.mutex,d=await l.lock("From P2PConnection.".concat(r));try{for(var p=arguments.length,_=new Array(p),S=0;S<p;S++)_[S]=arguments[S];return await s.apply(this,_)}finally{d()}},o}function fV(n,r){let o=document.createElement("video"),s=document.createElement("canvas");o.setAttribute("style","display:none"),s.setAttribute("style","display:none"),o.setAttribute("muted",""),o.muted=!0,o.setAttribute("autoplay",""),o.autoplay=!0,o.setAttribute("playsinline",""),s.width=Gu(r.width),s.height=Gu(r.height);const l=Gu(r.framerate||15);document.body.append(o),document.body.append(s);let d=n._mediaStreamTrack;o.srcObject=new MediaStream([d]),o.play();const p=s.getContext("2d");if(!p)throw new re(q.UNEXPECTED_ERROR,"can not get canvas context");const _=Pr(),S=s.captureStream(_.supportRequestFrame?0:l).getVideoTracks()[0],I=MU(()=>(()=>{if(o.paused&&o.play(),o.videoHeight>2&&o.videoWidth>2){const A=o.videoWidth,F=o.videoHeight/A,W=s.width*F;Math.abs(W-s.height)>=2&&(j.debug("adjust low stream resolution","".concat(s.width,"x").concat(s.height," -> ").concat(s.width,"x").concat(W)),s.height=W)}p.drawImage(o,0,0,s.width,s.height),S.requestFrame&&S.requestFrame(),d!==n._mediaStreamTrack&&(d=n._mediaStreamTrack,o.srcObject=new MediaStream([d]))})(),l),b=S.stop;return S.stop=()=>{b.call(S),I(),o&&(o.remove(),o=null),s&&(s.width=0,s.remove(),s=null),j.debug("clean low stream renderer")},S}var pV,mV,gV,vV,Vs,EV,_V,SV,yV,CV,TV,So;function bV(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function vb(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?bV(Object(o),!0).forEach(function(s){L(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):bV(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}class RV extends PU{getUserId(){return this._userId}constructor(r,o,s,l){super(r,"track-".concat(r.kind,"-").concat(o,"-").concat(l.clientId,"_").concat(Yn(5,""))),L(this,"_userId",void 0),L(this,"_uintId",void 0),L(this,"_isDestroyed",!1),L(this,"store",void 0),L(this,"processor",void 0),L(this,"processorContext",void 0),this._userId=o,this._uintId=s,this.store=l}_updateOriginMediaStreamTrack(r){this._originMediaStreamTrack=r,this._mediaStreamTrack=r,this._updatePlayerSource(),this.processor&&this.processor.updateInput({track:this._originMediaStreamTrack,context:this.processorContext})}_destroy(){this._isDestroyed=!0,j.info("[".concat(this.getTrackId(),"] is destroyed")),this.stop(),super.close()}getProcessorStats(){return this.processorContext.gatherStats()}getProcessorUsage(){return this.processorContext.gatherUsage()}}let Eb=(pV=lt({argsMap:(n,r,o)=>[n.getTrackId(),typeof r=="string"?r:r instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement",o]}),mV=lt({argsMap:n=>[n.getTrackId()]}),gV=lt({argsMap:(n,r)=>[n.getTrackId(),r.name]}),vV=lt({argsMap:n=>[n.getTrackId()]}),Ne((Vs=class extends RV{get isPlaying(){return!(!this._player||this._player.videoElementStatus!==Qi.PLAYING)}get __className__(){return"RemoteVideoTrack"}constructor(n,r,o,s){super(n,r,o,s),L(this,"_videoVisibleTimer",null),L(this,"_previousVideoVisibleStatus",void 0),L(this,"_clearPreviousVideoVisibleStatus",()=>this._previousVideoVisibleStatus=void 0),L(this,"trackMediaType","video"),L(this,"_videoWidth",void 0),L(this,"_videoHeight",void 0),L(this,"_player",void 0),L(this,"processorDestination",void 0),L(this,"processorContext",void 0),this.updateMediaStreamTrackResolution(),this.processorContext=new KU(this.getTrackId(),"remote"),this.processorDestination=new zU(this.processorContext),this.bindProcessorDestinationEvents()}getStats(){return HE(()=>{j.warning("[deprecated] RemoteVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteVideoStats instead")},"remoteVideoTrackGetStatsWarning"),Ec(this,Et.GET_STATS)||vb({},uU)}play(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof n=="string"){const s=document.getElementById(n);s?n=s:(j.warning("[".concat(this.getTrackId(),'] can not find "#').concat(n,'" element, use document.body')),n=document.body)}j.debug("[".concat(this.getTrackId(),"] start video playback in ").concat(n instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement"),JSON.stringify(r));const o=vb(vb({fit:"cover"},r),{},{trackId:this.getTrackId(),element:n});this._player?this._player.updateConfig(o):(n instanceof HTMLVideoElement?this._player=new VN(o):this._player=new wF(o),this._player.updateVideoTrack(this._mediaStreamTrack),this._player.onFirstVideoFrameDecoded=()=>{this.store.subscribe(this.getUserId(),"video",void 0,void 0,Date.now()),this.safeEmit(e0.FIRST_FRAME_DECODED)}),this._player.play(this.store.sessionId||void 0),this._videoVisibleTimer&&window.clearInterval(this._videoVisibleTimer),this._clearPreviousVideoVisibleStatus(),this._videoVisibleTimer=window.setInterval(()=>{try{const s=this.getVideoElementVisibleStatus();this.safeEmit(e0.VIDEO_ELEMENT_VISIBLE_STATUS,s)}catch{}},de("CHECK_VIDEO_VISIBLE_INTERVAL"))}stop(){this._player&&(this._videoVisibleTimer&&(window.clearInterval(this._videoVisibleTimer),this._videoVisibleTimer=null),this._clearPreviousVideoVisibleStatus(),this._player.destroy(),this._player=void 0,j.debug("[".concat(this.getTrackId(),"] stop video playback")))}getCurrentFrameData(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}updateMediaStreamTrackResolution(){H4(this._originMediaStreamTrack).then(n=>{let[r,o]=n;this._videoHeight=o,this._videoWidth=r}).catch(nb)}_updatePlayerSource(){j.debug("[".concat(this.getTrackId(),"] update player source track")),this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}getVideoElementVisibleStatus(){try{var n,r;const o=this==null||(n=this._player)===null||n===void 0?void 0:n.getContainerElement(),s={track:this,element:this==null||(r=this._player)===null||r===void 0?void 0:r.getVideoElement(),slot:o==null?void 0:o.parentElement},{element:l,slot:d}=s;if(this.isPlaying&&l instanceof HTMLVideoElement&&d instanceof HTMLElement){const p=s3.checkOneElementVisible(l),_=Object.assign({},p);if(_.visible!==this._previousVideoVisibleStatus){this._previousVideoVisibleStatus=_.visible;const S=Ze.reportApiInvoke(null,{tag:cr.TRACER,name:Fr.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE,options:[this.getTrackId()]});_.visible?S.onSuccess("Video is visible"):S.onSuccess("Invisible because of ".concat(_.reason))}return _}return}catch(o){throw new re(q.GET_VIDEO_ELEMENT_VISIBLE_ERROR,o.message)}}pipe(n){if(this.processor===n)return n;if(n._source)throw new re(q.INVALID_OPERATION,"Processor ".concat(n.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=n,this.processor._source=this,n.updateInput({track:this._originMediaStreamTrack,context:this.processorContext}),n}unpipe(){if(!this.processor)return;const n=this.processor;this.processor._source=void 0,this.processor=void 0,n.reset()}bindProcessorDestinationEvents(){this.processorDestination.on(to.ON_TRACK,async n=>{n?n!==this._mediaStreamTrack&&(this._mediaStreamTrack=n,this._updatePlayerSource()):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource())})}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(to.ON_TRACK)}_destroy(){super._destroy(),this.unbindProcessorDestinationEvents()}}).prototype,"play",[pV],Object.getOwnPropertyDescriptor(Vs.prototype,"play"),Vs.prototype),Ne(Vs.prototype,"stop",[mV],Object.getOwnPropertyDescriptor(Vs.prototype,"stop"),Vs.prototype),Ne(Vs.prototype,"pipe",[gV],Object.getOwnPropertyDescriptor(Vs.prototype,"pipe"),Vs.prototype),Ne(Vs.prototype,"unpipe",[vV],Object.getOwnPropertyDescriptor(Vs.prototype,"unpipe"),Vs.prototype),Vs),_b=(EV=lt({argsMap:(n,r)=>[n.getTrackId(),r],throttleTime:300}),_V=lt({argsMap:(n,r)=>[n.getTrackId(),r]}),SV=lt({argsMap:n=>[n.getTrackId()]}),yV=lt({argsMap:n=>[n.getTrackId()]}),CV=lt({argsMap:(n,r)=>[n.getTrackId(),r.name]}),TV=lt({argsMap:n=>[n.getTrackId()]}),Ne((So=class extends RV{get isPlaying(){return this._useAudioElement?La.isPlaying(this.getTrackId()):this._source.isPlayed}get __className__(){return"RemoteAudioTrack"}constructor(n,r,o,s){super(n,r,o,s),L(this,"trackMediaType","audio"),L(this,"_source",void 0),L(this,"_useAudioElement",!0),L(this,"_volume",100),L(this,"processorContext",void 0),L(this,"processorDestination",void 0),L(this,"_played",!1),L(this,"_bypassWebAudio",!1),de("DISABLE_WEBAUDIO")?(this._source=new RN,this._bypassWebAudio=!0,this._useAudioElement=!0):(this._source=new CN(n,!0),de("REMOTE_AUDIO_TRACK_USES_WEB_AUDIO")&&(this._useAudioElement=!1)),this._source.once(ma.RECEIVE_TRACK_BUFFER,()=>{this.safeEmit(e0.FIRST_FRAME_DECODED)}),this.processorContext=new YU(this._source.context,this.getTrackId(),"remote"),this.processorDestination=new qU(this.processorContext),this.bindProcessorDestinationEvents(),this._source.on(ma.UPDATE_SOURCE,()=>{this.processor&&this.processor.updateInput({node:this._source.processSourceNode,context:this.processorContext})})}setAudioFrameCallback(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:4096;if(!n)return this._source.removeAllListeners(ma.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(r),this._source.removeAllListeners(ma.ON_AUDIO_BUFFER),this._source.on(ma.ON_AUDIO_BUFFER,o=>n(o))}setVolume(n){this._volume=n,this._useAudioElement?La.setVolume(this.getTrackId(),n):this._source.setVolume(n/100)}async setPlaybackDevice(n){if(!this._useAudioElement)throw new re(q.NOT_SUPPORTED,"your browser does not support setting the audio output device");await La.setSinkID(this.getTrackId(),n)}getVolumeLevel(){return this._source.getAccurateVolumeLevel()}getStats(){return HE(()=>{j.warning("[deprecated] RemoteAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteAudioStats instead")},"remoteAudioTrackGetStatsWarning"),Ec(this,Et.GET_STATS)||vb({},lU)}play(){j.debug("[".concat(this.getTrackId(),"] start audio playback")),this._played=!0,this._useAudioElement?(j.debug("[".concat(this.getTrackId(),"] use audio element to play")),La.play(this._mediaStreamTrack,this.getTrackId(),this._volume,this.store.sessionId||void 0)):this._source.play()}stop(){j.debug("[".concat(this.getTrackId(),"] stop audio playback")),this._played=!1,this._useAudioElement?La.stop(this.getTrackId()):this._source.stop()}_destroy(){super._destroy(),this._played=!1,this.unbindProcessorDestinationEvents(),this._source.destroy()}_isFreeze(){return this._source.isFreeze}_updatePlayerSource(){let n=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];j.debug("[".concat(this.getTrackId(),"] update player source track")),n&&this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&La.updateTrack(this.getTrackId(),this._mediaStreamTrack)}pipe(n){if(this._bypassWebAudio)throw new re(q.NOT_SUPPORTED,"can not pipe extension when WebAudio disabled");if(this.processor===n)return n;if(n._source)throw new re(q.INVALID_OPERATION,"Processor ".concat(n.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=n,this.processor._source=this,n.updateInput({track:this._originMediaStreamTrack,node:this._source.processSourceNode,context:this.processorContext}),n}unpipe(){var n;if(this._bypassWebAudio)throw new re(q.NOT_SUPPORTED,"can not unpipe extension when WebAudio disabled");if(!this.processor)return;const r=this.processor;(n=this._source.processSourceNode)===null||n===void 0||n.disconnect(),this.processor._source=!1,this.processor=void 0,r.reset()}bindProcessorDestinationEvents(){this.processorDestination.on(to.ON_TRACK,async n=>{n?n!==this._mediaStreamTrack&&(this._mediaStreamTrack=n,this._updatePlayerSource(!1),this._source.processedNode=this._source.createMediaStreamSourceNode(n)):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource())}),this.processorDestination.on(to.ON_NODE,n=>{this._source.processedNode=n;const r=!n;this._useAudioElement!==r&&(this._played?(this.stop(),this._useAudioElement=r,this.play()):this._useAudioElement=r)})}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(to.ON_TRACK),this.processorDestination.removeAllListeners(to.ON_NODE)}}).prototype,"setVolume",[EV],Object.getOwnPropertyDescriptor(So.prototype,"setVolume"),So.prototype),Ne(So.prototype,"setPlaybackDevice",[_V],Object.getOwnPropertyDescriptor(So.prototype,"setPlaybackDevice"),So.prototype),Ne(So.prototype,"play",[SV],Object.getOwnPropertyDescriptor(So.prototype,"play"),So.prototype),Ne(So.prototype,"stop",[yV],Object.getOwnPropertyDescriptor(So.prototype,"stop"),So.prototype),Ne(So.prototype,"pipe",[CV],Object.getOwnPropertyDescriptor(So.prototype,"pipe"),So.prototype),Ne(So.prototype,"unpipe",[TV],Object.getOwnPropertyDescriptor(So.prototype,"unpipe"),So.prototype),So);function IV(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function wV(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?IV(Object(o),!0).forEach(function(s){L(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):IV(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}class nJ extends ur{constructor(){super(),L(this,"uplinkStatsUploadInterval",void 0),L(this,"uplinkRelatedStatsUploadInterval",void 0),L(this,"uplinkDenoiserStatsUploadInterval",void 0),L(this,"transportStatsUploadInterval",void 0),L(this,"uplinkExtensionStatsUploadInterval",void 0),L(this,"downlinkExtensionStatsUploadInterval",void 0),L(this,"extensionUsageStatsUploadInterval",void 0),L(this,"downlinkStatsUploadInterval",void 0),L(this,"downlinkRelatedStatsUploadInterval",void 0),L(this,"lastStats",void 0),L(this,"uploadUnplinkStarted",!1),L(this,"uploadDownlinkStarted",!1),L(this,"uploadTransportStarted",!1),L(this,"uploadExtensionUsageStarted",!1),L(this,"requestStats",void 0),L(this,"requestLocalMedia",void 0),L(this,"requestRemoteMedia",void 0),L(this,"requestAllTracks",void 0),L(this,"requestVideoIsReady",void 0),L(this,"requestUpload",void 0)}startUploadTransportStats(){this.uploadTransportStarted||(this.uploadTransportStarted=!0,this.transportStatsUploadInterval&&window.clearInterval(this.transportStatsUploadInterval),this.transportStatsUploadInterval=window.setInterval(()=>{var r;const o=(r=this.requestStats)===null||r===void 0?void 0:r.call(this);o&&this.uploadTransportStats(o)},1e3))}startUploadExtensionUsageStats(){if(this.uploadExtensionUsageStarted)return;this.uploadExtensionUsageStarted=!0,this.extensionUsageStatsUploadInterval&&window.clearInterval(this.extensionUsageStatsUploadInterval);const r=new Map;this.extensionUsageStatsUploadInterval=window.setInterval(async()=>{var o,s,l;const d=Date.now(),p={connectionInterval:de("EXTENSION_USAGE_UPLOAD_INTERVAL")/1e3,details:[],lts:d};let _=[];const S=((o=this.requestAllTracks)===null||o===void 0?void 0:o.call(this))||[];for(const F of S)!F.muted&&F.enabled&&(_=_.concat(await F.getProcessorUsage()));const I=((s=this.requestRemoteMedia)===null||s===void 0?void 0:s.call(this))||[];for(const[F,W]of I)W.has(Pt.VIDEO)&&F.videoTrack&&(_=_.concat(await F.videoTrack.getProcessorUsage())),W.has(Pt.AUDIO)&&F.audioTrack&&(_=_.concat(await F.audioTrack.getProcessorUsage()));if(_.length===0)return;p.details=function(F,W){const Z={};for(const{id:ye,value:Pe,level:Xe,direction:ke}of F){var ee;const Ve=(ee=W.get(ye))!==null&&ee!==void 0?ee:0,xe=Pe===2?Ve+de("EXTENSION_USAGE_UPLOAD_INTERVAL")/1e3:Ve;var te,Ee;W.set(ye,xe),Z[ye]?(Pe===2&&(Z[ye].value=Pe),Xe>Z[ye].level&&(Z[ye].level=Xe),ke==="remote"&&(Z[ye].remoteUidCount+=1),Z[ye].totalTs=(te=W.get(ye))!==null&&te!==void 0?te:0):Z[ye]={value:Pe,level:Xe,remoteUidCount:ke==="local"?0:1,totalTs:(Ee=W.get(ye))!==null&&Ee!==void 0?Ee:0}}return Object.keys(Z).map(ye=>{const{level:Pe,value:Xe,totalTs:ke}=Z[ye];return{id:ye,level:Pe,value:Xe,totalTs:ke}})}(_,r);const b=Date.now(),A=b>d?b:d+1;(l=this.requestUpload)===null||l===void 0||l.call(this,Pa.EXTENSION_USAGE_STATS,{usageStats:p,sendTs:A})},de("EXTENSION_USAGE_UPLOAD_INTERVAL"))}startUploadUplinkStats(){this.uploadUnplinkStarted||(this.uploadUnplinkStarted=!0,this.uplinkStatsUploadInterval&&window.clearInterval(this.uplinkStatsUploadInterval),this.uplinkStatsUploadInterval=window.setInterval(()=>{var r;const o=(r=this.requestStats)===null||r===void 0?void 0:r.call(this);o&&(this.uploadUplinkStats(o),this.lastStats=o)},3e3),this.uplinkRelatedStatsUploadInterval&&window.clearInterval(this.uplinkRelatedStatsUploadInterval),this.uplinkRelatedStatsUploadInterval=window.setInterval(()=>{var r;const o=(r=this.requestStats)===null||r===void 0?void 0:r.call(this);o&&this.uploadRelatedUplinkStats(o,this.lastStats),this.lastStats=o},1e3),this.uplinkDenoiserStatsUploadInterval&&window.clearInterval(this.uplinkDenoiserStatsUploadInterval),this.uplinkDenoiserStatsUploadInterval=window.setInterval(()=>{var r;const o=(r=this.requestAllTracks)===null||r===void 0?void 0:r.call(this);o&&this.uploadDenoiserStats(o)},2e3),this.uplinkExtensionStatsUploadInterval&&window.clearInterval(this.uplinkExtensionStatsUploadInterval),this.uplinkExtensionStatsUploadInterval=window.setInterval(()=>{var r;const o=(r=this.requestAllTracks)===null||r===void 0?void 0:r.call(this);o&&this.uploadExtensionStats(o)},2e3))}uploadTransportStats(r){sl(()=>{var o;(o=this.requestUpload)===null||o===void 0||o.call(this,Pa.TRANSPORT_STATS,function(s){const l={connectionType:100,googRtt:s.rtt};if(s.selectedCandidatePair.localCandidate.candidateType==="relay"){const d=s.selectedCandidatePair.localCandidate.relayProtocol;d==="udp"&&(l.connectionType=101),d==="tcp"&&(l.connectionType=103),d==="tls"&&(l.connectionType=104)}return l}(r))})}uploadUplinkStats(r){var o;(((o=this.requestLocalMedia)===null||o===void 0?void 0:o.call(this))||[]).forEach(s=>{let[l,{track:d,ssrcs:p}]=s;switch(l){case Je.LocalVideoLowTrack:case Je.LocalVideoTrack:{const _=function(b,A,F){var W;const Z=A.videoSend.find(te=>te.ssrc===b);if(!Z)return null;const ee={id:Yn(10,""),timestamp:new Date(A.timestamp).toISOString(),mediaType:"video",type:"ssrc",ssrc:Z.ssrc.toString()};switch(ee.A_vstd=F._originMediaStreamTrack&&!F._originMediaStreamTrack.enabled||F._mediaStreamTrack&&!F._mediaStreamTrack.enabled?"1":"0",Z.sentFrame&&(ee.A_fhs=Z.sentFrame.height.toString(),ee.A_frs=Z.sentFrame.frameRate.toString(),ee.A_fws=Z.sentFrame.width.toString()),Z.adaptionChangeReason){case"none":ee.A_ac="0";break;case"cpu":ee.A_ac="1";break;case"bandwidth":ee.A_ac="2";break;case"other":ee.A_ac="3"}return ee.A_lvps=rN[F._player?F._player.videoElementStatus:"uninit"].toString(),ee.A_nr=(W=Z.nacksCount)===null||W===void 0?void 0:W.toString(),Z.avgEncodeMs&&(ee.A_aem=Z.avgEncodeMs.toFixed(0).toString()),ee}(p[0].ssrcId,r,d),S=l===Je.LocalVideoTrack?function(b,A,F){var W,Z,ee,te,Ee,ye,Pe,Xe;const ke=A.videoSend.find(ct=>ct.ssrc===b);if(!ke)return null;const Ve={id:Yn(10,""),timestamp:new Date(A.timestamp).toISOString(),mediaType:"video",type:"ssrc",ssrc:ke.ssrc.toString()},xe=(W=(Z=(ee=ke.inputFrame)===null||ee===void 0?void 0:ee.height)!==null&&Z!==void 0?Z:F==null?void 0:F._videoHeight)!==null&&W!==void 0?W:0,$e=(te=(Ee=(ye=ke.inputFrame)===null||ye===void 0?void 0:ye.width)!==null&&Ee!==void 0?Ee:F==null?void 0:F._videoWidth)!==null&&te!==void 0?te:0,En=(Pe=(Xe=ke.inputFrame)===null||Xe===void 0?void 0:Xe.frameRate)!==null&&Pe!==void 0?Pe:0;return xe&&(Ve.A_fhi=xe+""),$e&&(Ve.A_fwi=$e+""),En&&(Ve.A_fri=En+""),Ve}(p[0].ssrcId,r,d):null;_&&sl(()=>{var b;return(b=this.requestUpload)===null||b===void 0?void 0:b.call(this,Pa.PUBLISH_STATS,{stream_type:l===Je.LocalVideoLowTrack?"low":"high",stats:wV(wV({},_),S)})});const I=function(b){const A={id:"bweforvideo",timestamp:new Date(b.timestamp).toISOString(),type:"VideoBwe"};return b.bitrate.retransmit&&(A.A_rb=b.bitrate.retransmit.toString()),b.bitrate.targetEncoded&&(A.A_teb=b.bitrate.targetEncoded.toString()),A.A_aeb=b.bitrate.actualEncoded.toString(),A.A_tb=b.bitrate.transmit.toString(),b.sendBandwidth!==void 0&&(A.A_asb=b.sendBandwidth.toString()),A}(r);I&&setTimeout(()=>{var b;return(b=this.requestUpload)===null||b===void 0?void 0:b.call(this,Pa.PUBLISH_STATS,{stream_type:l===Je.LocalVideoLowTrack?"low":"high",stats:I})},1e3);break}case Je.LocalAudioTrack:{const _=function(S,I,b){const A=I.audioSend.find(W=>W.ssrc===S);if(!A)return null;const F={id:Yn(10,""),timestamp:new Date(I.timestamp).toISOString(),mediaType:"audio",type:"ssrc",ssrc:A.ssrc.toString()};return F.A_astd=b._originMediaStreamTrack&&!b._originMediaStreamTrack.enabled||b._mediaStreamTrack&&!b._mediaStreamTrack.enabled?"1":"0",A.inputLevel?F.A_ail=Math.round(100*A.inputLevel).toString():F.A_ail=Math.round(100*b._source.getAccurateVolumeLevel()).toString(),F.A_apil=Math.round(100*b._source.getAccurateVolumeLevel()).toString(),A.aecReturnLoss&&(F.A_ecrl=Math.round(A.aecReturnLoss).toString()),A.aecReturnLossEnhancement&&(F.A_ecrle=Math.round(A.aecReturnLossEnhancement).toString()),F}(p[0].ssrcId,r,d);_&&sl(()=>{var S;return(S=this.requestUpload)===null||S===void 0?void 0:S.call(this,Pa.PUBLISH_STATS,{stream_type:"high",stats:_})});break}}})}uploadRelatedUplinkStats(r,o){var s;(((s=this.requestLocalMedia)===null||s===void 0?void 0:s.call(this))||[]).filter(l=>{let[d]=l;return d===Je.LocalVideoLowTrack||d===Je.LocalVideoTrack}).forEach(l=>{let[d,{ssrcs:p}]=l;const _=function(S,I){const b=I.videoSend.find(A=>A.ssrc===S);return b?{mediaType:"video",isVideoMute:!1,frameRateInput:b.inputFrame&&b.inputFrame.frameRate.toString(),frameRateSent:b.sentFrame&&b.sentFrame.frameRate.toString(),googRtt:b.rttMs.toString(),qpSumPerFrame:Math.floor(b.qpSumPerFrame).toString()}:null}(p[0].ssrcId,r);_&&sl(()=>{var S;(S=this.requestUpload)===null||S===void 0||S.call(this,Pa.PUBLISH_RELATED_STATS,{stream_type:d===Je.LocalVideoLowTrack?"low":"high",stats:_})})})}uploadDenoiserStats(r){for(let d=0;d<r.length;d++){const p=r[d];if(p instanceof QT){var o,s,l;const _=(o=(s=p._external).getDenoiserStats)===null||o===void 0?void 0:o.call(s);return void(_&&((l=this.requestUpload)===null||l===void 0||l.call(this,Pa.DENOISER_STATS,_)))}}}uploadExtensionStats(r){for(let o=0;o<r.length;o++)r[o].getProcessorStats().forEach(s=>{var l;(l=this.requestUpload)===null||l===void 0||l.call(this,s.type,s.stats)})}stopUploadUplinkStats(){this.uploadUnplinkStarted&&(this.uploadUnplinkStarted=!1,this.uplinkStatsUploadInterval&&window.clearInterval(this.uplinkStatsUploadInterval),this.uplinkRelatedStatsUploadInterval&&window.clearInterval(this.uplinkRelatedStatsUploadInterval),this.uplinkDenoiserStatsUploadInterval&&window.clearInterval(this.uplinkDenoiserStatsUploadInterval),this.uplinkStatsUploadInterval=void 0,this.uplinkRelatedStatsUploadInterval=void 0,this.uplinkDenoiserStatsUploadInterval=void 0)}startUploadDownlinkStats(){if(this.uploadDownlinkStarted)return;let r;this.uploadDownlinkStarted=!0,this.downlinkStatsUploadInterval&&window.clearInterval(this.downlinkStatsUploadInterval);let o=!1;this.downlinkStatsUploadInterval=window.setInterval(()=>{var s;const l=(s=this.requestStats)===null||s===void 0?void 0:s.call(this);l&&(this.uploadDownlinkStats(l,o,r),r=l),o=!o},3e3),this.downlinkRelatedStatsUploadInterval&&window.clearInterval(this.downlinkRelatedStatsUploadInterval),this.downlinkRelatedStatsUploadInterval=window.setInterval(()=>{var s;const l=(s=this.requestStats)===null||s===void 0?void 0:s.call(this);l&&(this.uploadRelatedDownlinkStats(l,this.lastStats),this.lastStats=l)},1e3),this.downlinkExtensionStatsUploadInterval&&window.clearInterval(this.downlinkExtensionStatsUploadInterval),this.downlinkExtensionStatsUploadInterval=window.setInterval(()=>{var s;const l=(s=this.requestRemoteMedia)===null||s===void 0?void 0:s.call(this);l&&this.uploadDownlinkExtensionStats(l)},2e3)}uploadDownlinkStats(r,o,s){var l;(((l=this.requestRemoteMedia)===null||l===void 0?void 0:l.call(this))||[]).forEach(d=>{let[p,_]=d;if(_.has(Pt.VIDEO)&&p.videoTrack){const S=p.videoTrack?function(I,b,A,F,W){const Z=b.videoRecv.find(ye=>ye.ssrc===I);if(!Z)return null;const ee={id:Yn(10,""),timestamp:new Date(b.timestamp).toISOString(),mediaType:"video",type:"ssrc",ssrc:Z.ssrc.toString()};var te,Ee;if(ee.bytesReceived=Z.bytes.toString(),ee.packetsLost=Z.packetsLost.toString(),ee.packetsReceived=Z.packets.toString(),Z.framesRateFirefox&&(ee.A_frr=Z.framesRateFirefox.toString()),Z.receivedFrame?(ee.A_frr=Z.receivedFrame.frameRate.toString(),ee.A_fhr=Z.receivedFrame.height.toString(),ee.A_fwr=Z.receivedFrame.width.toString()):(ee.A_fhr=(te=F._videoHeight)===null||te===void 0?void 0:te.toString(),ee.A_fwr=(Ee=F._videoWidth)===null||Ee===void 0?void 0:Ee.toString()),ee.A_frd=Z.decodeFrameRate.toString(),Z.outputFrame&&(ee.A_fro=Z.outputFrame.frameRate.toString()),Z.jitterBufferMs!==void 0&&(ee.A_jbm=Math.floor(Z.jitterBufferMs).toString()),Z.currentDelayMs!==void 0&&(ee.A_cdm=Math.floor(Z.currentDelayMs).toString()),ee.A_fs=Z.firsCount.toString(),ee.A_ns=Z.nacksCount.toString(),ee.A_ps=Z.plisCount.toString(),F&&(ee.A_vrtd=F._originMediaStreamTrack.enabled&&F._mediaStreamTrack.enabled?"0":"1"),F._player&&F._player.freezeTimeCounterList.length>0&&(ee.A_vrft=Math.round(F._player.freezeTimeCounterList.splice(0,1)[0]).toString()),W&&F._player&&Wu.visibility==="visible"){const ye=Math.min(6e3,F._player.renderFreezeAccTime);ee.A_vrrft=Math.round(ye).toString(),F._player.renderFreezeAccTime=Math.max(0,F._player.renderFreezeAccTime-ye)}if(ee.A_rvps=rN[F._player?F._player.videoElementStatus:"uninit"].toString(),A){const ye=A.videoRecv.find(Pe=>Pe.ssrc===I);if(ye&&Z.totalInterFrameDelay!==void 0&&Z.totalSquaredInterFrameDelay!==void 0&&ye.totalInterFrameDelay!==void 0&&ye.totalSquaredInterFrameDelay!==void 0){const Pe=Z.totalInterFrameDelay-ye.totalInterFrameDelay,Xe=Z.totalSquaredInterFrameDelay-ye.totalSquaredInterFrameDelay,ke=Z.framesDecodeCount-ye.framesDecodeCount,Ve=Pe/ke*1e3,xe=Math.round(1e3*Math.sqrt((Xe-Math.pow(Pe,2)/ke)/ke));!isNaN(xe)&&Ve+xe>Math.max(3*Ve,Ve+150)&&(ee.A_ifdsd=xe.toString())}}return ee}(p._videoSSRC,r,s,p.videoTrack,o):void 0;S&&sl(()=>{var I;return(I=this.requestUpload)===null||I===void 0?void 0:I.call(this,Pa.SUBSCRIBE_STATS,{stream_id:p.uid,stats:S})})}if(_.has(Pt.AUDIO)&&p.audioTrack){const S=p.audioTrack?function(I,b,A,F){const W=b.audioRecv.find(ee=>ee.ssrc===I);if(!W)return null;const Z={id:Yn(10,""),timestamp:new Date(b.timestamp).toISOString(),mediaType:"audio",type:"ssrc",ssrc:W.ssrc.toString()};if(Z.bytesReceived=W.bytes.toString(),Z.packetsLost=W.packetsLost.toString(),Z.packetsReceived=W.packets.toString(),W.outputLevel?Z.A_aol=Math.round(100*W.outputLevel).toString():Z.A_aol=Math.round(100*F._source.getAccurateVolumeLevel()).toString(),Z.A_apol=Math.round(100*F._source.getAccurateVolumeLevel()).toString(),F&&(Z.A_artd=F._originMediaStreamTrack.enabled&&F._mediaStreamTrack.enabled?"0":"1"),Z.A_jr=W.jitterMs.toString(),Z.A_jbm=Math.floor(W.jitterBufferMs).toString(),Z.A_cdm=Math.floor(W.jitterBufferMs).toString(),Z.A_raps=rN[La.getPlayerState(F.getTrackId())].toString(),A){const ee=A.audioRecv.find(te=>te.ssrc===I);if(ee){const te=W.concealedSamples-ee.concealedSamples;te>0&&(Z.A_cs=Math.round(te).toString())}}return Z}(p._audioSSRC,r,s,p.audioTrack):void 0;S&&sl(()=>{var I;return(I=this.requestUpload)===null||I===void 0?void 0:I.call(this,Pa.SUBSCRIBE_STATS,{stream_id:p.uid,stats:S})})}})}uploadRelatedDownlinkStats(r,o){var s;(((s=this.requestRemoteMedia)===null||s===void 0?void 0:s.call(this))||[]).forEach(l=>{let[d,p]=l;if(p.has(Pt.VIDEO)&&d.videoTrack){var _;const S=(d._videoSSRC&&((_=this.requestVideoIsReady)===null||_===void 0?void 0:_.call(this,d._videoSSRC))||!1)===!0,I=function(b,A,F,W,Z,ee){const te=F.videoRecv.find(Xe=>Xe.ssrc===b),Ee=Z?Z.videoRecv.find(Xe=>Xe.ssrc===b):void 0;if(!te)return null;const ye=o0.isRemoteVideoFreeze(ee,te,Ee)&&A,Pe={mediaType:"video",isVideoMute:!1,peerId:W,frameRateReceived:te.receivedFrame&&te.receivedFrame.frameRate.toString(),frameRateDecoded:te.decodedFrame&&te.decodedFrame.frameRate.toString(),isFreeze:ye,bytesReceived:te.bytes.toString(),packetsReceived:te.packets.toString(),packetsLost:te.packetsLost.toString(),qpSumPerFrame:Math.floor(te.qpSumPerFrame).toString()};return te.framesRateFirefox&&(Pe.frameRateDecoded=te.framesRateFirefox.toString(),Pe.frameRateReceived=te.framesRateFirefox.toString()),Pe}(d._videoSSRC,S,r,d.uid,o,d.videoTrack);I&&sl(()=>{var b;(b=this.requestUpload)===null||b===void 0||b.call(this,Pa.SUBSCRIBE_RELATED_STATS,{stream_id:d.uid,stats:I})})}if(p.has(Pt.AUDIO)&&d.audioTrack){const S=function(I,b,A,F){const W=b.audioRecv.find(ee=>ee.ssrc===I);if(!W)return null;const Z=o0.isRemoteAudioFreeze(F);return{mediaType:"audio",isAudioMute:!1,peerId:A,googJitterReceived:W.jitterMs.toString(),isFreeze:Z,bytesReceived:W.bytes.toString(),packetsReceived:W.packets.toString(),packetsLost:W.packetsLost.toString(),frameReceived:W.receivedFrames.toString(),frameDropped:W.droppedFrames.toString()}}(d._audioSSRC,r,d.uid,d.audioTrack);S&&sl(()=>{var I;(I=this.requestUpload)===null||I===void 0||I.call(this,Pa.SUBSCRIBE_RELATED_STATS,{stream_id:d.uid,stats:S})})}})}stopUploadDownlinkStats(){this.uploadDownlinkStarted&&(this.uploadDownlinkStarted=!1,this.downlinkStatsUploadInterval&&window.clearInterval(this.downlinkStatsUploadInterval),this.downlinkRelatedStatsUploadInterval&&window.clearInterval(this.downlinkRelatedStatsUploadInterval),this.downlinkStatsUploadInterval=void 0,this.downlinkRelatedStatsUploadInterval=void 0)}stopUploadTransportStats(){this.uploadTransportStarted&&(this.uploadTransportStarted=!1,this.transportStatsUploadInterval&&window.clearInterval(this.transportStatsUploadInterval),this.transportStatsUploadInterval=void 0)}stopUploadExtensionUsageStats(){this.uploadExtensionUsageStarted&&(this.uploadExtensionUsageStarted=!1,this.extensionUsageStatsUploadInterval&&window.clearInterval(this.extensionUsageStatsUploadInterval),this.extensionUsageStatsUploadInterval=void 0)}uploadDownlinkExtensionStats(r){r.forEach(o=>{let[s,l]=o;l.has(Pt.VIDEO)&&s.videoTrack&&s.videoTrack.getProcessorStats().forEach(d=>{var p;(p=this.requestUpload)===null||p===void 0||p.call(this,d.type,d.stats)}),l.has(Pt.AUDIO)&&s.audioTrack&&s.audioTrack.getProcessorStats().forEach(d=>{var p;(p=this.requestUpload)===null||p===void 0||p.call(this,d.type,d.stats)})})}}function OV(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function AV(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?OV(Object(o),!0).forEach(function(s){L(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):OV(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}const NV=`v=0
o=- 0 0 IN IP4 127.0.0.1
s=AgoraGateway
t=0 0
a=group:BUNDLE 0
a=msid-semantic: WMS
a=ice-lite
m=application 9 UDP/DTLS/SCTP webrtc-datachannel
c=IN IP4 127.0.0.1
a=mid:0
`,Sb="9",dx=2e4,hx=4e4;class rJ{get localCapabilities(){return Br(this._localCapabilities)}get rtpCapabilities(){return Br(this._rtpCapabilities)}get candidates(){return Br(this._candidates)}get iceParameters(){return Br(this._iceParameters)}get dtlsParameters(){return Br(this._dtlsParameters)}constructor(r){L(this,"sessionDesc",void 0),L(this,"_localCapabilities",void 0),L(this,"_rtpCapabilities",void 0),L(this,"_candidates",void 0),L(this,"_iceParameters",void 0),L(this,"_dtlsParameters",void 0),L(this,"setup",void 0),L(this,"currentMidIndex",void 0),L(this,"cname",void 0),L(this,"firefoxSsrcMidMap",new Map),r=Br(r);const{remoteIceParameters:o,remoteDtlsParameters:s,candidates:l,remoteRTPCapabilities:d,remoteSetup:p,localCapabilities:_,cname:S}=r,I=Hr.exports.parse(NV);this._rtpCapabilities=d,this._candidates=l,this._iceParameters=o,this._dtlsParameters=s,this._localCapabilities=_,this.setup=p,this.cname=S;const b=this.rtpCapabilities.send;for(const A of I.mediaDescriptions){if(A.attributes.iceUfrag=o.iceUfrag,A.attributes.icePwd=o.icePwd,A.attributes.fingerprints=s.fingerprints,A.attributes.candidates=l,A.attributes.setup=p,A.media.mediaType==="application"&&(A.attributes.sctpPort="5000"),A.media.mediaType==="video"&&(A.media.fmts=b.videoCodecs.map(F=>F.payloadType.toString(10)),A.attributes.payloads=b.videoCodecs,A.attributes.extmaps=b.videoExtensions,de("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:F,ssrcGroups:W}=Ms([{ssrcId:hx,rtx:de("USE_SUB_RTX")?40001:void 0}],this.cname);A.attributes.ssrcs=F,A.attributes.ssrcGroups=W}if(A.media.mediaType==="audio"&&(A.media.fmts=b.audioCodecs.map(F=>F.payloadType.toString(10)),A.attributes.payloads=b.audioCodecs,A.attributes.extmaps=b.audioExtensions,sh(A),de("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:F,ssrcGroups:W}=Ms([{ssrcId:dx}],this.cname);A.attributes.ssrcs=F,A.attributes.ssrcGroups=W}}this.sessionDesc=I,this.currentMidIndex=I.mediaDescriptions.length-1}updateRemoteRTPCapabilities(r){const o=Hr.exports.parse(NV);this._rtpCapabilities=r;const s=this.rtpCapabilities.send;for(const l of o.mediaDescriptions){if(l.attributes.iceUfrag=this._iceParameters.iceUfrag,l.attributes.icePwd=this._iceParameters.icePwd,l.attributes.fingerprints=this._dtlsParameters.fingerprints,l.attributes.candidates=this._candidates,l.attributes.setup=this.setup,l.media.mediaType==="application"&&(l.attributes.sctpPort="5000"),l.media.mediaType==="video"&&(l.media.fmts=s.videoCodecs.map(d=>d.payloadType.toString(10)),l.attributes.payloads=s.videoCodecs,l.attributes.extmaps=s.videoExtensions,de("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:d,ssrcGroups:p}=Ms([{ssrcId:hx,rtx:de("USE_SUB_RTX")?40001:void 0}],this.cname);l.attributes.ssrcs=d,l.attributes.ssrcGroups=p}if(l.media.mediaType==="audio"&&(l.media.fmts=s.audioCodecs.map(d=>d.payloadType.toString(10)),l.attributes.payloads=s.audioCodecs,l.attributes.extmaps=s.audioExtensions,de("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:d,ssrcGroups:p}=Ms([{ssrcId:dx}],this.cname);l.attributes.ssrcs=d,l.attributes.ssrcGroups=p}}this.sessionDesc=o,this.currentMidIndex=o.mediaDescriptions.length-1}preloadRemoteMedia(r){this.rtpCapabilities;const o=this.candidates,s=this.dtlsParameters,l=this.iceParameters,d=this.rtpCapabilities.send;for(let p=1;p<r;p++){const _=2*p+dx,S=2*p+hx,{ssrcs:I,ssrcGroups:b}=Ms([{ssrcId:_}],this.cname),{ssrcs:A,ssrcGroups:F}=Ms([{ssrcId:S,rtx:de("USE_SUB_RTX")?S+1:void 0}],this.cname);this.sessionDesc.mediaDescriptions.push({media:{mediaType:"video",port:Sb,protos:["UDP","TLS","RTP","SAVPF"],fmts:d.videoCodecs.map(W=>W.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:l.iceUfrag,icePwd:l.icePwd,unrecognized:[],candidates:o,extmaps:d.videoExtensions,fingerprints:s.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:A,ssrcGroups:F,rtcpFeedbackWildcards:[],payloads:d.videoCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*p-1)}}),this.sessionDesc.mediaDescriptions.push({media:{mediaType:"audio",port:Sb,protos:["UDP","TLS","RTP","SAVPF"],fmts:d.audioCodecs.map(W=>W.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:l.iceUfrag,icePwd:l.icePwd,unrecognized:[],candidates:o,extmaps:d.audioExtensions,fingerprints:s.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:I,ssrcGroups:b,rtcpFeedbackWildcards:[],payloads:d.audioCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*p)}}),this.currentMidIndex+=2}this.updateBundleMids()}toString(){return Hr.exports.print(this.sessionDesc)}send(r,o,s,l){const{ssrcs:d,ssrcGroups:p}=Ms(o,this.cname,de("SYNC_GROUP")?s:void 0),_=this.findPreloadMediaDesc(d);if(_){if(nr()&&this.firefoxSsrcMidMap.set(d[0].ssrcId,_.attributes.mid),l&&(l.twcc||l.remb)){const S=this.sessionDesc.mediaDescriptions.indexOf(_);return this.sessionDesc.mediaDescriptions[S]=this.mungSendMediaDesc(_,l),{mid:_.attributes.mid,needExchangeSDP:!0}}return{mid:_.attributes.mid,needExchangeSDP:!1}}{const S=this.findAvailableMediaIndex(r,d);let I;return S===-1||Yi()||Ui()||vT()||S===0&&de("USE_SUB_RTX")?(I=this.createOrRecycleSendMedia(r,d,p,"sendonly",l),this.updateBundleMids()):(I=Br(this.sessionDesc.mediaDescriptions[S]),I.attributes.direction="sendonly",I.attributes.ssrcs=d,I.attributes.ssrcGroups=p,this.sessionDesc.mediaDescriptions[S]=this.mungSendMediaDesc(I,l)),nr()&&this.firefoxSsrcMidMap.set(d[0].ssrcId,I.attributes.mid),{mid:I.attributes.mid,needExchangeSDP:!0}}}batchSend(r){const o=r.map(d=>{let{kind:p,ssrcMsg:_,mslabel:S}=d;return this.send(p,_,S)}),s=[];let l=!1;return o.forEach(d=>{let{mid:p,needExchangeSDP:_}=d;_&&(l=!0),s.push(p)}),{mids:s,needExchangeSDP:l}}stopSending(r){const o=this.sessionDesc.mediaDescriptions.filter(s=>s.attributes.mid&&r.indexOf(s.attributes.mid)!==-1);if(o.length!==r.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.stopSending.");o.forEach(s=>{s.attributes.mid==="0"||nr()||Yi()||Ui()?s.attributes.ssrcs=[]:(s.attributes.ssrcs=[],s.attributes.direction="inactive",s.media.port="0")}),this.updateBundleMids()}mute(r){const o=this.sessionDesc.mediaDescriptions.find(s=>s.attributes.mid===r);if(!o)throw new Error("mediaDescription not found with ".concat(r," in remote SDP when calling RemoteSDP.mute."));o.attributes.direction="inactive"}unmute(r){const o=this.sessionDesc.mediaDescriptions.find(s=>s.attributes.mid===r);if(!o)throw new Error("mediaDescription not found with ".concat(r," in remote SDP when calling RemoteSDP.unmute."));o.attributes.direction="sendonly"}muteRemote(r){const o=this.sessionDesc.mediaDescriptions.filter(s=>r.includes(s.attributes.mid||""));if(o.length!==r.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");o.forEach(s=>{s.attributes.direction="inactive"})}unmuteRemote(r){const o=this.sessionDesc.mediaDescriptions.filter(s=>r.includes(s.attributes.mid||""));if(o.length!==r.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");o.forEach(s=>{s.attributes.direction="recvonly"})}receive(r,o,s,l){r.forEach((d,p)=>{this.createOrRecycleRecvMedia(d,[],"recvonly",o,s,l[p])}),this.updateBundleMids()}stopReceiving(r){const o=this.sessionDesc.mediaDescriptions.filter(s=>r.indexOf(s.attributes.mid)!==-1);if(o.length!==r.length)throw new Error("MediaDescriptions' length doesn't match mids's length when calling RemoteSDP.receive.");o.forEach(s=>{s.media.port="0",s.attributes.direction="inactive"}),this.updateBundleMids()}updateCandidates(r){r===ji.TCP?this._candidates.forEach(o=>{this._candidates.findIndex(s=>s.transport==="tcp"&&s.connectionAddress===o.connectionAddress&&s.port===o.port)===-1&&this._candidates.push(AV(AV({},o),{},{foundation:"tcpcandidate",priority:Number(o.priority)-1+"",transport:"tcp",port:Number(o.port)+90+""}))}):this._candidates=this._candidates.filter(o=>o.transport!=="tcp");for(const o of this.sessionDesc.mediaDescriptions)o.attributes.candidates=this.candidates}restartICE(r){r=Br(r),this._iceParameters=r,this.sessionDesc.mediaDescriptions.forEach(o=>{o.attributes.iceUfrag=r.iceUfrag,o.attributes.icePwd=r.icePwd})}predictReceivingMids(r){const o=[];for(let s=0;s<r;s++)o.push((this.currentMidIndex+s+1).toString(10));return o}findAvailableMediaIndex(r,o){return this.sessionDesc.mediaDescriptions.findIndex(s=>{const l=s.media.mediaType===r&&s.media.port!=="0"&&(s.attributes.direction==="sendonly"||s.attributes.direction==="sendrecv")&&s.attributes.ssrcs.length===0;if(nr()){if(l){const d=this.firefoxSsrcMidMap.get(o[0].ssrcId);return!(d||s.attributes.mid!=="0"&&s.attributes.mid!=="1")||!(!d||d!==s.attributes.mid)}return!1}return l})}createOrRecycleRecvMedia(r,o,s,l,d,p){const _=r._mediaStreamTrack.kind,S=this.rtpCapabilities.recv,I=this.localCapabilities.send;let b=[];if(_===Pt.VIDEO){var A,F;if(de("H264_PROFILE_LEVEL_ID")&&l==="h264"&&(b=S.videoCodecs.filter(Ee=>{var ye,Pe;return(((ye=Ee.rtpMap)===null||ye===void 0?void 0:ye.encodingName.toLowerCase())||"").includes(l)&&(Ee==null||(Pe=Ee.fmtp)===null||Pe===void 0?void 0:Pe.parameters["profile-level-id"])===de("H264_PROFILE_LEVEL_ID")})),!b||((A=b)===null||A===void 0?void 0:A.length)===0){const Ee=I.videoCodecs.filter(ye=>{var Pe;return(((Pe=ye.rtpMap)===null||Pe===void 0?void 0:Pe.encodingName.toLowerCase())||"").includes(l)});Ee.length!==0&&(b=S.videoCodecs.filter(ye=>Ee.some(Pe=>Pe.payloadType===ye.payloadType)))}if(de("USE_PUB_RTX")){const Ee=b.map(Pe=>Pe.payloadType.toString()),ye=S.videoCodecs.filter(Pe=>{var Xe,ke;return((Xe=Pe.rtpMap)===null||Xe===void 0?void 0:Xe.encodingName)==="rtx"&&Ee.includes(((ke=Pe.fmtp)===null||ke===void 0?void 0:ke.parameters.apt)||"")});b=[...b,...ye]}b.length===0&&(j.warning("codec ".concat(l," not included in rtpCapabilities, fallback to default payloads: ").concat((F=S.videoCodecs[0].rtpMap)===null||F===void 0?void 0:F.encodingName)),b=S.videoCodecs)}else b=S.audioCodecs.filter(Ee=>{var ye;return(((ye=Ee.rtpMap)===null||ye===void 0?void 0:ye.encodingName.toLowerCase())||"").includes(d)}),b.length===0&&(j.warning("codec ".concat(d," not included in rtpCapabilities, fallback to opus")),b=S.audioCodecs.filter(Ee=>{var ye;return(((ye=Ee.rtpMap)===null||ye===void 0?void 0:ye.encodingName.toLowerCase())||"").includes("opus")}));const W=_===Pt.VIDEO?S.videoExtensions:S.audioExtensions;this.currentMidIndex+=1;const Z="".concat(this.currentMidIndex);let ee={media:{mediaType:_,port:Sb,protos:["UDP","TLS","RTP","SAVPF"],fmts:b.map(Ee=>Ee.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:W,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:o,ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:b,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:s,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(Z)}};ee=this.mungRecvMediaDsec(ee,r,p);const te=this.findFirstClosedMedia(_);if(te){const Ee=this.sessionDesc.mediaDescriptions.indexOf(te);this.sessionDesc.mediaDescriptions[Ee]=ee}else this.sessionDesc.mediaDescriptions.push(ee);return ee}createOrRecycleSendMedia(r,o,s,l,d){const p=this.rtpCapabilities.send,_=r===Pt.VIDEO?p.videoCodecs:p.audioCodecs,S=r===Pt.VIDEO?p.videoExtensions:p.audioExtensions;this.currentMidIndex+=1;const I="".concat(this.currentMidIndex);let b={media:{mediaType:r,port:Sb,protos:["UDP","TLS","RTP","SAVPF"],fmts:_.map(F=>F.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:S,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:o,ssrcGroups:s,rtcpFeedbackWildcards:[],payloads:_,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:l,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(I)}};b=this.mungSendMediaDesc(b,d);const A=this.findFirstClosedMedia(r);if(A){const F=this.sessionDesc.mediaDescriptions.indexOf(A);this.sessionDesc.mediaDescriptions[F]=b}else this.sessionDesc.mediaDescriptions.push(b);return b}updateBundleMids(){this.sessionDesc.attributes.groups[0].identificationTag=this.sessionDesc.mediaDescriptions.filter(r=>r.media.port!=="0").map(r=>r.attributes.mid)}mungRecvMediaDsec(r,o,s){const l=Br(r);return ox(l),h0(l,o),ax(l,o),z3(l),pb(l,s,this.localCapabilities.send),l}mungSendMediaDesc(r,o){const s=Br(r);return pb(s,o,this.localCapabilities.recv),sh(s),s}updateRecvMedia(r,o){const s=this.sessionDesc.mediaDescriptions.findIndex(l=>l.attributes.mid===r);if(s!==-1){const l=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[s],o);this.sessionDesc.mediaDescriptions[s]=l}}bumpMid(r){this.currentMidIndex+=r}findFirstClosedMedia(r){return this.sessionDesc.mediaDescriptions.find(o=>nr()?o.media.port==="0"&&o.media.mediaType===r:o.media.port==="0")}findPreloadMediaDesc(r){return this.sessionDesc.mediaDescriptions.find(o=>{var s,l;return((s=o.attributes)===null||s===void 0||(l=s.ssrcs[0])===null||l===void 0?void 0:l.ssrcId)===r[0].ssrcId})}getSSRC(r){var o;return(o=this.sessionDesc.mediaDescriptions.find(s=>s.attributes.mid===r))===null||o===void 0?void 0:o.attributes.ssrcs}}var bn;function xV(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function yb(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?xV(Object(o),!0).forEach(function(s){L(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):xV(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}let iJ=(Ne((bn=class vR extends zT{get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}constructor(r,o,s){super(r,o),L(this,"store",void 0),L(this,"peerConnection",void 0),L(this,"remoteSDP",void 0),L(this,"initialOffer",void 0),L(this,"transportEventReceiver",void 0),L(this,"statsFilter",void 0),L(this,"localCapabilities",void 0),L(this,"localCandidateCount",0),L(this,"allCandidatesReceived",!1),L(this,"establishPromise",void 0),L(this,"mutex",new xo("NVExtentionsConnection-mutex")),L(this,"rtcMedia",void 0),this.store=o,this.peerConnection=s,this.statsFilter=ux(this.peerConnection,de("STATS_UPDATE_INTERVAL"),void 0,nr()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1,this.establishPromise=this.establish()}async establish(r){try{const o=await this.peerConnection.createOffer();if(!o.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const s=zf(o.sdp),l=await q3(!de("USE_PUB_RTX")&&!de("USE_SUB_RTX"),de("FILTER_VIDEO_FEC"),de("FILTER_AUDIO_FEC"));return this.localCapabilities=l,this.initialOffer=o,yb(yb({},s),{},{rtpCapabilities:l,offerSDP:o.sdp})}catch(o){throw new re(q.GET_LOCAL_CONNECTION_PARAMS_FAILED,o.toString())}}async connect(r,o,s,l,d,p){try{if(!this.initialOffer)throw new Error("Cannot establish NVConnection without initial offer.");this.remoteSDP=new rJ({remoteIceParameters:r,remoteDtlsParameters:o,candidates:s,remoteRTPCapabilities:l,remoteSetup:d,localCapabilities:sx(this.localCapabilities),cname:p});const _=this.remoteSDP.toString(),S=Hr.exports.parse(this.initialOffer.sdp),I=S.mediaDescriptions.find(F=>F.media.mediaType==="audio");I&&sh(I);const b=Hr.exports.print(S),A=this.logSDPExchange(b||"","offer","local","connect");await this.peerConnection.setLocalDescription({type:"offer",sdp:b}),A==null||A(_),await this.peerConnection.setRemoteDescription({type:"answer",sdp:_})}catch(_){throw new re(q.EXCHANGE_SDP_FAILED,"NV.connect failed; ".concat(_.toString()))}}async updateRemoteConnect(r){var o,s,l;(o=this.remoteSDP)===null||o===void 0||o.updateRemoteRTPCapabilities(r),(s=this.remoteSDP)===null||s===void 0||s.preloadRemoteMedia(2);const d=(l=this.remoteSDP)===null||l===void 0?void 0:l.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:d});const p=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(p),j.debug("[NVExtentionsConnection] updateRemoteRTPCapabilities by exchanging SDP.")}send(r,o,s){var l=this;return _c(function*(){const d=yield Zt(l.mutex.lock("From NVExtentionsConnection.send"));try{if(!l.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.send before remote SDP created");const p=[];r.forEach(ee=>{const te=l.peerConnection.addTransceiver(ee._mediaStreamTrack,{direction:"sendonly"});p.push(te)}),nr()&&de("SIMULCAST")===!0&&(yield Zt(l.applySimulcastForFirefox(p,r)));const _=yield Zt(l.peerConnection.createOffer()),S=l.remoteSDP.predictReceivingMids(r.length),I=l.mungSendOfferSDP(_.sdp,r,S),b=Hr.exports.parse(I),A=S.map(ee=>{const te=b.mediaDescriptions.find(Ee=>Ee.attributes.mid===ee);if(!te)throw new Error("Cannot extract ssrc from mediaDescription.");return W3(te,de("USE_PUB_RTX"))});let F;try{F=yield A}catch(ee){F=[],l.remoteSDP.receive(r,o,s,F);const te=l.remoteSDP.toString();throw yield Zt(l.peerConnection.setLocalDescription({type:"offer",sdp:I})),yield Zt(l.peerConnection.setRemoteDescription({type:"answer",sdp:te})),yield Zt(l.stopSending(S,!0)),ee}l.remoteSDP.receive(r,o,s,F);const W=l.remoteSDP.toString(),Z=l.logSDPExchange(I,"offer","local","send");return yield Zt(l.peerConnection.setLocalDescription({type:"offer",sdp:I})),yield Zt(l.applySimulcastEncodings(p,r)),yield Zt(l.applySendEncodings(p,r)),Z==null||Z(W),yield Zt(l.peerConnection.setRemoteDescription({type:"answer",sdp:W})),p.map((ee,te)=>{const Ee=S[te];return{localSSRC:A[te],id:Ee,transceiver:ee}})}catch(p){throw p instanceof re?p:new re(q.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.send failed; ".concat(p.toString()))}finally{d()}})()}async stopSending(r,o){const s=o?void 0:await this.mutex.lock("From NVExtentionsConnection.stopSending");try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.stopSending before remote SDP created");const l=this.peerConnection.getTransceivers().filter(S=>r.indexOf(S.mid)!==-1);if(l.length!==r.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call NVExtentionsConnection.stopSending.");l.map(S=>{var I;S.direction="inactive",(I=S.stop)===null||I===void 0||I.call(S)});const d=await this.peerConnection.createOffer(),p=this.logSDPExchange(d.sdp||"","offer","local","stopSending");await this.peerConnection.setLocalDescription(d),this.remoteSDP.stopReceiving(r);const _=this.remoteSDP.toString();p==null||p(_),await this.peerConnection.setRemoteDescription({type:"answer",sdp:_})}catch(l){throw new re(q.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.stopSending failed; ".concat(l.toString()))}finally{s&&s()}}async receive(r,o,s,l){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.receive ".concat(r," before remoteSDP created."));const{mid:d,needExchangeSDP:p}=this.remoteSDP.send(r,o,s,l);if(p){const S=this.remoteSDP.toString(),I=this.logSDPExchange(S,"offer","remote","receive");await this.peerConnection.setRemoteDescription({type:"offer",sdp:S});const b=await this.peerConnection.createAnswer(),A=this.mungReceiveAnswerSDP(b.sdp,d,r);I==null||I(A||""),await this.peerConnection.setLocalDescription({type:"answer",sdp:A}),j.debug("[NVExtentionsConnection] receive ".concat(r," by exchanging SDP."))}else j.debug("[NVExtentionsConnection] receive ".concat(r," no need to exchange SDP."));const _=this.peerConnection.getTransceivers().find(S=>S.mid===d);if(!_)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:_.receiver.track,id:d}}catch(d){throw new re(q.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.receive failed; ".concat(d.toString()))}}async batchReceive(r){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.batchReceive before remoteSDP created.");const{mids:o,needExchangeSDP:s}=this.remoteSDP.batchSend(r);if(s){const l=this.remoteSDP.toString(),d=this.logSDPExchange(l,"offer","remote","receive");await this.peerConnection.setRemoteDescription({type:"offer",sdp:l});const p=await this.peerConnection.createAnswer();d==null||d(p.sdp||""),await this.peerConnection.setLocalDescription(p),j.debug("[NVExtentionsConnection] batchReceive by exchanging SDP.")}else j.debug("[NVExtentionsConnection] batchReceive no need to exchange SDP.");return o.map(l=>{const d=this.peerConnection.getTransceivers().find(p=>p.mid===l);if(!d)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:d.receiver.track,id:l}})}catch(o){throw new re(q.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.receive failed; ".concat(o.toString()))}}async stopReceiving(r){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.stopReceiving before remote SDP created.");this.remoteSDP.stopSending(r);const o=this.remoteSDP.toString(),s=this.logSDPExchange(o,"offer","remote","stopReceiving");await this.peerConnection.setRemoteDescription({type:"offer",sdp:o});const l=await this.peerConnection.createAnswer();s==null||s(l.sdp||""),await this.peerConnection.setLocalDescription(l)}catch(o){throw new re(q.EXCHANGE_SDP_FAILED,"NVExtentionsConnection stopReceiving failed; ".concat(o.toString()))}}async muteRemote(r){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.muteRemote mid=".concat(r," before remote SDP created."));this.remoteSDP.mute(r);const o=this.remoteSDP.toString(),s=this.logSDPExchange(o,"offer","remote","muteRemote");await this.peerConnection.setRemoteDescription({type:"offer",sdp:o});const l=await this.peerConnection.createAnswer();s==null||s(l.sdp||""),await this.peerConnection.setLocalDescription(l)}catch(o){throw new re(q.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.muteRemote failed; ".concat(o.toString()))}}async unmuteRemote(r){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.unmuteRemote mid=".concat(r," before remote SDP created."));this.remoteSDP.unmute(r);const o=this.remoteSDP.toString(),s=this.logSDPExchange(o,"offer","remote","unmuteRemote");await this.peerConnection.setRemoteDescription({type:"offer",sdp:o});const l=await this.peerConnection.createAnswer();s==null||s(l.sdp||""),await this.peerConnection.setLocalDescription(l)}catch(o){throw new re(q.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.unmuteRemote failed; ".concat(o.toString()))}}async muteLocal(r){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.muteLocal before remote SDP created.");const o=this.peerConnection.getTransceivers().filter(p=>p.mid&&r.indexOf(p.mid)!==-1);if(o.length!==r.length)throw new Error("Transceivers' length doesn't match mids' length.");o.map(p=>{p.direction="inactive"});const s=await this.peerConnection.createOffer(),l=this.logSDPExchange(s.sdp||"","offer","local","muteLocal");await this.peerConnection.setLocalDescription(s),this.remoteSDP.muteRemote(r);const d=this.remoteSDP.toString();l==null||l(d),await this.peerConnection.setRemoteDescription({type:"answer",sdp:d})}catch(o){throw new re(q.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.muteLocal failed; ".concat(o.toString()))}}async unmuteLocal(r){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.unmuteLocal before remote SDP created.");const o=this.peerConnection.getTransceivers().filter(p=>p.mid&&r.indexOf(p.mid)!==-1);if(o.length!==r.length)throw new Error("Transceivers' length doesn't match mids' length.");o.map(async(p,_)=>{p.direction="sendonly"});const s=await this.peerConnection.createOffer(),l=this.logSDPExchange(s.sdp||"","offer","local","unmuteLocal");await this.peerConnection.setLocalDescription(s),this.remoteSDP.unmuteRemote(r);const d=this.remoteSDP.toString();l==null||l(d),await this.peerConnection.setRemoteDescription({type:"answer",sdp:d})}catch(o){throw new re(q.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.unmuteLocal failed; ".concat(o.toString()))}}restartICE(r){var o=this;return _c(function*(){const s=yield Zt(o.mutex.lock("From NVExtentionsConnection.restartICE"));try{if(!o.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");if(Pr().supportPCSetConfiguration){const I=o.peerConnection.getConfiguration(),b=r===ji.RELAY?"relay":"all";I.iceTransportPolicy!==b&&(j.debug("restartICE change iceTransportPolicy from [".concat(I.iceTransportPolicy,"] to [").concat(b,"]")),I.iceTransportPolicy=b,o.peerConnection.setConfiguration(I))}else if(r===ji.RELAY)return;r!==ji.RELAY&&o.remoteSDP.updateCandidates(r);const l=yield Zt(o.peerConnection.createOffer({iceRestart:!0}));if(!l.sdp)throw new Error("Cannot restartICE because restart offer SDP does not exist.");const d=zf(l.sdp),{remoteIceParameters:p}=yield d.iceParameters;o.remoteSDP.restartICE(p);const _=o.remoteSDP.toString(),S=o.logSDPExchange(l.sdp||"","offer","local","restartICE");yield Zt(o.peerConnection.setLocalDescription(l)),S==null||S(_),yield Zt(o.peerConnection.setRemoteDescription({type:"answer",sdp:_}))}catch(l){j.warning("restart ICE failed, abort operation",l)}finally{s()}})()}close(){var r;(r=this.onConnectionStateChange)===null||r===void 0||r.call(this,"closed"),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.transportEventReceiver=void 0,this.statsFilter.destroy()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(r){return this.statsFilter.getVideoIsReady(r)}async updateEncoderConfig(r,o){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.updateEncoderConfig before remote SDP created.");const s=await this.peerConnection.createOffer(),l=this.mungSendOfferSDP(s.sdp,[o],[r]);this.remoteSDP.updateRecvMedia(r,o);const d=this.remoteSDP.toString(),p=this.logSDPExchange(l,"offer","local","updateEncoderConfig");await this.peerConnection.setLocalDescription({type:"offer",sdp:l}),p==null||p(d),await this.peerConnection.setRemoteDescription({type:"answer",sdp:d})}catch(s){throw new re(q.EXCHANGE_SDP_FAILED,s.toString())}}async updateSendParameters(r,o){const s=this.peerConnection.getTransceivers().filter(l=>l.mid===r);s.length===1&&(this.isVP8Simulcast(o)?nr()||await this.applySimulcastEncodings(s,[o]):await this.applySendEncodings(s,[o]))}setStatsRemoteVideoIsReady(r,o){this.statsFilter.setVideoIsReady2(r,o)}async replaceTrack(r,o){const s=this.peerConnection.getTransceivers().find(l=>l.mid===o);s&&await s.sender.replaceTrack(r._mediaStreamTrack)}getP2PConnectionParams(){var r;if((r=this.peerConnection.currentLocalDescription)===null||r===void 0||!r.sdp||!this.localCapabilities)throw new Error;return yb(yb({},zf(this.peerConnection.currentLocalDescription.sdp)),{},{rtpCapabilities:this.localCapabilities})}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var r;(r=this.onICEConnectionStateChange)===null||r===void 0||r.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var r;(r=this.onConnectionStateChange)===null||r===void 0||r.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidate=r=>{r.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,j.debug("[pc-".concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},setTimeout(()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,j.debug("[pc-".concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))},de("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(r){const o={iceServers:[]};return r.iceServers?o.iceServers=r.iceServers:r.turnServer&&r.turnServer.mode!=="off"&&(VE(r.turnServer.servers)?o.iceServers=r.turnServer.servers:(o.iceServers&&o.iceServers.push(...vR.turnServerConfigToIceServers(r.turnServer.servers)),de("USE_TURN_SERVER_OF_GATEWAY")&&o.iceServers&&r.turnServer.serversFromGateway&&o.iceServers.push(...vR.turnServerConfigToIceServers(r.turnServer.serversFromGateway)),de("FORCE_TURN_TCP")?o.iceTransportPolicy="relay":r.turnServer.servers.concat(r.turnServer.serversFromGateway||[]).forEach(s=>{s.forceturn&&(o.iceTransportPolicy="relay")}))),o}static turnServerConfigToIceServers(r){const o=[];return r.forEach(s=>{s.security?s.tcpport&&o.push({username:s.username,credential:s.password,credentialType:"password",urls:"turns:".concat(eb(s.turnServerURL),":").concat(s.tcpport,"?transport=tcp")}):(s.udpport&&!de("FORCE_TURN_TCP")&&o.push({username:s.username,credential:s.password,credentialType:"password",urls:"turn:".concat(s.turnServerURL,":").concat(s.udpport,"?transport=udp")}),s.tcpport&&o.push({username:s.username,credential:s.password,credentialType:"password",urls:"turn:".concat(s.turnServerURL,":").concat(s.tcpport,"?transport=tcp")}))}),o}async applySendEncodings(r,o){try{if(!Pr().supportSetRtpSenderParameters||r.length!==o.length)return;for(let I=0;I<r.length;I++){const b=r[I],A=o[I];if(A&&A instanceof $r){var s,l;if(this.isVP8Simulcast(A))continue;const F={},W={};switch(A._optimizationMode){case"motion":F.degradationPreference="maintain-framerate";break;case"detail":F.degradationPreference="maintain-resolution";break;default:F.degradationPreference="balanced"}var d,p,_,S;if((s=A._encoderConfig)!==null&&s!==void 0&&s.bitrateMax&&(W.maxBitrate=1e3*((d=A._encoderConfig)===null||d===void 0?void 0:d.bitrateMax)),A._hints.includes(ai.LOW_STREAM)&&((p=A._encoderConfig)!==null&&p!==void 0&&p.frameRate&&(W.maxFramerate=Gu(A._encoderConfig.frameRate)),(_=A._encoderConfig)!==null&&_!==void 0&&_.scaleResolutionDownBy&&((S=A._encoderConfig)===null||S===void 0?void 0:S.scaleResolutionDownBy)>1&&(W.scaleResolutionDownBy=A._encoderConfig.scaleResolutionDownBy)),de("DSCP_TYPE")&&au()){const te=de("DSCP_TYPE");["very-low","low","medium","high"].includes(te)&&(W.networkPriority=te)}const Z=b.sender.getParameters(),ee=(l=Z.encodings)===null||l===void 0?void 0:l[0];nr()&&!ee&&(F.encodings=[W]),ee&&Object.assign(ee,W),Object.assign(Z,F),await b.sender.setParameters(Z)}}}catch{j.debug("Apply RTPSendEncodings failed.")}}mungSendOfferSDP(r,o,s){const l=Hr.exports.parse(r);return o.forEach((d,p)=>{const _=s[p],S=l.mediaDescriptions.find(I=>I.attributes.mid===_);S&&(h0(S,d),K3(S,d,this.store.codec))}),Hr.exports.print(l)}mungReceiveAnswerSDP(r,o,s){const l=Hr.exports.parse(r),d=l.mediaDescriptions.find(p=>p.attributes.mid===o);return d&&s===Pt.AUDIO&&d.media.mediaType==="audio"&&sh(d),Hr.exports.print(l)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=r=>{var o;(o=this.onFirstAudioReceived)===null||o===void 0||o.call(this,r)},this.statsFilter.onFirstVideoReceived=r=>{var o;(o=this.onFirstVideoReceived)===null||o===void 0||o.call(this,r)},this.statsFilter.onFirstAudioDecoded=r=>{var o;(o=this.onFirstAudioDecoded)===null||o===void 0||o.call(this,r)},this.statsFilter.onFirstVideoDecoded=(r,o,s)=>{var l;(l=this.onFirstVideoDecoded)===null||l===void 0||l.call(this,r,o,s)},this.statsFilter.onSelectedLocalCandidateChanged=(r,o)=>{var s;(s=this.onSelectedLocalCandidateChanged)===null||s===void 0||s.call(this,r,o)},this.statsFilter.onSelectedRemoteCandidateChanged=(r,o)=>{var s;(s=this.onSelectedRemoteCandidateChanged)===null||s===void 0||s.call(this,r,o)},this.statsFilter.onFirstVideoDecodedTimeout=r=>{var o;(o=this.onFirstVideoDecodedTimeout)===null||o===void 0||o.call(this,r)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0,this.statsFilter.onFirstVideoDecodedTimeout=void 0}async applySimulcastForFirefox(r,o){if(r.length===o.length)for(let _=0;_<r.length;_++){var s,l,d,p;const S=r[_],I=o[_];if(I instanceof $r&&!I._hints.includes(ai.LOW_STREAM)&&(s=I._encoderConfig)!==null&&s!==void 0&&s.bitrateMax&&((l=I._encoderConfig)===null||l===void 0?void 0:l.bitrateMax)>200&&(d=I._scalabiltyMode)!==null&&d!==void 0&&d.numSpatialLayers&&((p=I._scalabiltyMode)===null||p===void 0?void 0:p.numSpatialLayers)>1&&this.store.codec==="vp8"){const b={},A={high:1e3*(I._encoderConfig.bitrateMax-50),medium:5e4};b.encodings=[{rid:"m",active:!0,maxBitrate:A.medium,scaleResolutionDownBy:4},{rid:"h",active:!0,maxBitrate:A.high}];const F=S.sender.getParameters();await S.sender.setParameters(Object.assign(F,b))}}}async applySimulcastEncodings(r,o){if(!nr()&&r.length===o.length)for(let s=0;s<r.length;s++){const l=o[s];if(l instanceof $r&&this.isVP8Simulcast(l)){const d=r[s],p={},_={high:1e3*(l._encoderConfig.bitrateMax-50),medium:5e4};p.encodings=[{active:!0,adaptivePtime:!1,networkPriority:"high",priority:"high",maxBitrate:_.high},{active:!0,adaptivePtime:!1,networkPriority:"low",priority:"low",maxBitrate:_.medium,scaleResolutionDownBy:4}];const S=d.sender.getParameters();await d.sender.setParameters(Object.assign(S,p))}}}isVP8Simulcast(r){var o,s,l,d;return!!(r instanceof $r&&de("SIMULCAST")&&this.store.codec==="vp8"&&!r._hints.includes(ai.LOW_STREAM)&&(o=r._encoderConfig)!==null&&o!==void 0&&o.bitrateMax&&((s=r._encoderConfig)===null||s===void 0?void 0:s.bitrateMax)>200&&(l=r._scalabiltyMode)!==null&&l!==void 0&&l.numSpatialLayers&&((d=r._scalabiltyMode)===null||d===void 0?void 0:d.numSpatialLayers)>1)}logSDPExchange(r,o,s,l){if(de("SDP_LOGGING"))return j.upload("exchanging ".concat(s," ").concat(o," SDP during NVExtentionsConnection.").concat(l,`
`),r),o==="offer"?d=>{this.logSDPExchange(d,"answer",s==="local"?"remote":"local",l)}:void 0}async getRemoteSSRC(r){if(!this.remoteSDP)return;const o=this.remoteSDP.getSSRC(r);return o==null?void 0:o[0].ssrcId}setConfiguration(r){if(Pr().supportPCSetConfiguration){const o=vR.resolvePCConfiguration(r);this.peerConnection.setConfiguration(o)}}}).prototype,"connect",[ds],Object.getOwnPropertyDescriptor(bn.prototype,"connect"),bn.prototype),Ne(bn.prototype,"updateRemoteConnect",[ds],Object.getOwnPropertyDescriptor(bn.prototype,"updateRemoteConnect"),bn.prototype),Ne(bn.prototype,"receive",[ds],Object.getOwnPropertyDescriptor(bn.prototype,"receive"),bn.prototype),Ne(bn.prototype,"batchReceive",[ds],Object.getOwnPropertyDescriptor(bn.prototype,"batchReceive"),bn.prototype),Ne(bn.prototype,"stopReceiving",[ds],Object.getOwnPropertyDescriptor(bn.prototype,"stopReceiving"),bn.prototype),Ne(bn.prototype,"muteRemote",[ds],Object.getOwnPropertyDescriptor(bn.prototype,"muteRemote"),bn.prototype),Ne(bn.prototype,"unmuteRemote",[ds],Object.getOwnPropertyDescriptor(bn.prototype,"unmuteRemote"),bn.prototype),Ne(bn.prototype,"muteLocal",[ds],Object.getOwnPropertyDescriptor(bn.prototype,"muteLocal"),bn.prototype),Ne(bn.prototype,"unmuteLocal",[ds],Object.getOwnPropertyDescriptor(bn.prototype,"unmuteLocal"),bn.prototype),Ne(bn.prototype,"close",[ds],Object.getOwnPropertyDescriptor(bn.prototype,"close"),bn.prototype),Ne(bn.prototype,"updateEncoderConfig",[ds],Object.getOwnPropertyDescriptor(bn.prototype,"updateEncoderConfig"),bn.prototype),Ne(bn.prototype,"updateSendParameters",[ds],Object.getOwnPropertyDescriptor(bn.prototype,"updateSendParameters"),bn.prototype),Ne(bn.prototype,"replaceTrack",[ds],Object.getOwnPropertyDescriptor(bn.prototype,"replaceTrack"),bn.prototype),Ne(bn.prototype,"getRemoteSSRC",[ds],Object.getOwnPropertyDescriptor(bn.prototype,"getRemoteSSRC"),bn.prototype),bn);function ds(n,r,o){const s=n[r];if(typeof s!="function")throw new Error("Cannot use mutex on object property.");return o.value=async function(){const l=this.mutex,d=await l.lock("From NVExtentionsConnection.".concat(r));try{for(var p=arguments.length,_=new Array(p),S=0;S<p;S++)_[S]=arguments[S];return await s.apply(this,_)}finally{d()}},o}var jn;function PV(n){var r,o,s,l=2;for(typeof Symbol<"u"&&(o=B3,s=Symbol.iterator);l--;){if(o&&(r=n[o])!=null)return r.call(n);if(s&&(r=n[s])!=null)return new fx(r.call(n));o="@@asyncIterator",s="@@iterator"}throw new TypeError("Object is not async iterable")}function fx(n){function r(o){if(Object(o)!==o)return Le.reject(new TypeError(o+" is not an object."));var s=o.done;return Le.resolve(o.value).then(function(l){return{value:l,done:s}})}return(fx=function(o){this.s=o,this.n=o.next}).prototype={s:null,n:null,next:function(){return r(this.n.apply(this.s,arguments))},return:function(o){var s=this.s.return;return s===void 0?Le.resolve({value:o,done:!0}):r(s.apply(this.s,arguments))},throw:function(o){var s=this.s.return;return s===void 0?Le.reject(o):r(s.apply(this.s,arguments))}},new fx(n)}let lh=(Ne((jn=class ER extends zT{get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}constructor(r,o){super(r,o),L(this,"store",void 0),L(this,"peerConnection",void 0),L(this,"cname",void 0),L(this,"mutex",new xo("DataChannelConnection-mutex")),L(this,"dataChannel",void 0),L(this,"_p2pConnection",void 0),L(this,"establishPromise",void 0),L(this,"_nvMedia",void 0),this.store=o,this.store.dcId=this.store.dcId+1,this.peerConnection=new RTCPeerConnection(ER.resolvePCConfiguration(r),{optional:[{googDscp:!0}]}),this.dataChannel=this.peerConnection.createDataChannel("agora-signal",{ordered:!1,maxPacketLifeTime:50}),this.dataChannel.binaryType="arraybuffer",this._p2pConnection=new iJ(r,o,this.peerConnection),this.bindPCEvents(),this.establishPromise=this._p2pConnection.establishPromise}async establish(){var r;const o=(r=this._nvMedia)===null||r===void 0?void 0:r.getLocalRtpCapabilities();return await this._p2pConnection.establish(o)}getP2PConnectionParams(){return this._p2pConnection.getP2PConnectionParams()}async connect(r,o,s,l,d,p){return this.cname=p,await this._p2pConnection.connect(r,o,s,l,d,p),await new Le((_,S)=>{const I=setTimeout(()=>{this.closeSignal(),S(new re(q.DATACHANNEL_CONNECTION_TIMEOUT,"Datachannel connection timed out, candidates: ".concat(JSON.stringify(s))))},2e3);this.dataChannel.onopen=()=>{if(this.dataChannel.readyState==="open")return clearTimeout(I),void _()},this.dataChannel.onerror=b=>{this.closeSignal(),S(b)}}),{transmitter:this.dataChannel,close:this.closeSignal.bind(this)}}send(r,o,s){var l=this;return _c(function*(){const d=yield Zt(l.mutex.lock("From DataChannelConnection.send"));try{return yield*fb(PV(l._p2pConnection.send(r,o,s)),Zt)}finally{d()}})()}async stopSending(r,o){return this._p2pConnection.stopSending(r,o)}async receive(r,o,s,l){return this._nvMedia?(j.debug("[DataChannelConnection] receive ".concat(r," by DataChannel.")),await this._nvMedia.reveiveByRTCMedia(r,o,this.cname)):(j.debug("[DataChannelConnection] receive ".concat(r," by WebRTC.")),await this._p2pConnection.receive(r,o,s,l))}async batchReceive(r){return[...await this._p2pConnection.batchReceive(r)]}async stopReceiving(r){return await this._p2pConnection.stopReceiving(r)}async muteRemote(r){return await this._p2pConnection.muteRemote(r)}async unmuteRemote(r){return await this._p2pConnection.unmuteRemote(r)}async muteLocal(r){return await this._p2pConnection.muteLocal(r)}async unmuteLocal(r){return await this._p2pConnection.unmuteLocal(r)}restartICE(r){var o=this;return _c(function*(){return yield*fb(PV(o._p2pConnection.restartICE(r)),Zt)})()}close(){var r;(r=this._nvMedia)===null||r===void 0||r.close(),this._p2pConnection.close(),this.unbindConnectionEvents(this._p2pConnection)}getStats(){return this._p2pConnection.getStats()}getRemoteVideoIsReady(r){return this._p2pConnection.getRemoteVideoIsReady(r)}updateRemoteConnect(r){var o;(o=this._nvMedia)===null||o===void 0||o.setRemoteRtpCapabilities(r),this._p2pConnection.updateRemoteConnect(r)}async updateEncoderConfig(r,o){return await this._p2pConnection.updateEncoderConfig(r,o)}async updateSendParameters(r,o){return await this._p2pConnection.updateSendParameters(r,o)}setStatsRemoteVideoIsReady(r,o){this._p2pConnection.setStatsRemoteVideoIsReady(r,o)}async replaceTrack(r,o){return await this._p2pConnection.replaceTrack(r,o)}async getRemoteSSRC(r){return this._p2pConnection.getRemoteSSRC(r)}logSDPExchange(r,o,s,l){if(de("SDP_LOGGING"))return j.upload("exchanging ".concat(s," ").concat(o," SDP during DataChannelConnection.").concat(l,`
`),r),o==="offer"?d=>{this.logSDPExchange(d,"answer",s==="local"?"remote":"local",l)}:void 0}static resolvePCConfiguration(r){const o={iceServers:[]};return r.iceServers?o.iceServers=r.iceServers:r.turnServer&&r.turnServer.mode!=="off"&&(VE(r.turnServer.servers)?o.iceServers=r.turnServer.servers:(o.iceServers&&o.iceServers.push(...ER.turnServerConfigToIceServers(r.turnServer.servers)),de("USE_TURN_SERVER_OF_GATEWAY")&&o.iceServers&&r.turnServer.serversFromGateway&&o.iceServers.push(...ER.turnServerConfigToIceServers(r.turnServer.serversFromGateway)),de("FORCE_TURN_TCP")?o.iceTransportPolicy="relay":r.turnServer.servers.concat(r.turnServer.serversFromGateway||[]).forEach(s=>{s.forceturn&&(o.iceTransportPolicy="relay")}))),o}static turnServerConfigToIceServers(r){const o=[];return r.forEach(s=>{s.security?s.tcpport&&o.push({username:s.username,credential:s.password,credentialType:"password",urls:"turns:".concat(eb(s.turnServerURL),":").concat(s.tcpport,"?transport=tcp")}):(s.udpport&&!de("FORCE_TURN_TCP")&&o.push({username:s.username,credential:s.password,credentialType:"password",urls:"turn:".concat(s.turnServerURL,":").concat(s.udpport,"?transport=udp")}),s.tcpport&&o.push({username:s.username,credential:s.password,credentialType:"password",urls:"turn:".concat(s.turnServerURL,":").concat(s.tcpport,"?transport=tcp")}))}),o}bindPCEvents(){this._p2pConnection.onICEConnectionStateChange=r=>{var o;return(o=this.onICEConnectionStateChange)===null||o===void 0?void 0:o.call(this,r)},this._p2pConnection.onConnectionStateChange=r=>{var o;return(o=this.onConnectionStateChange)===null||o===void 0?void 0:o.call(this,r)},this._p2pConnection.onDTLSTransportStateChange=r=>{var o;return(o=this.onDTLSTransportStateChange)===null||o===void 0?void 0:o.call(this,r)},this._p2pConnection.onDTLSTransportError=r=>{var o;return(o=this.onDTLSTransportError)===null||o===void 0?void 0:o.call(this,r)},this._p2pConnection.onICETransportStateChange=r=>{var o;return(o=this.onICETransportStateChange)===null||o===void 0?void 0:o.call(this,r)},this._p2pConnection.onFirstAudioReceived=r=>{var o;return(o=this.onFirstAudioReceived)===null||o===void 0?void 0:o.call(this,r)},this._p2pConnection.onFirstVideoReceived=r=>{var o;return(o=this.onFirstVideoReceived)===null||o===void 0?void 0:o.call(this,r)},this._p2pConnection.onFirstAudioDecoded=r=>{var o;return(o=this.onFirstAudioDecoded)===null||o===void 0?void 0:o.call(this,r)},this._p2pConnection.onFirstVideoDecoded=(r,o,s)=>{var l;return(l=this.onFirstVideoDecoded)===null||l===void 0?void 0:l.call(this,r,o,s)},this._p2pConnection.onFirstVideoDecodedTimeout=r=>{var o;return(o=this.onFirstVideoDecodedTimeout)===null||o===void 0?void 0:o.call(this,r)},this._p2pConnection.onSelectedLocalCandidateChanged=(r,o)=>{var s;return(s=this.onSelectedLocalCandidateChanged)===null||s===void 0?void 0:s.call(this,r,o)},this._p2pConnection.onSelectedRemoteCandidateChanged=(r,o)=>{var s;return(s=this.onSelectedRemoteCandidateChanged)===null||s===void 0?void 0:s.call(this,r,o)}}closeSignal(){this.dataChannel.close(),this.peerConnection.close()}unbindConnectionEvents(r){r.onConnectionStateChange=void 0,r.onICEConnectionStateChange=void 0,r.onICETransportStateChange=void 0,r.onDTLSTransportStateChange=void 0,r.onDTLSTransportError=void 0,r.onFirstAudioDecoded=void 0,r.onFirstAudioReceived=void 0,r.onFirstVideoDecoded=void 0,r.onFirstVideoReceived=void 0,r.onSelectedLocalCandidateChanged=void 0,r.onSelectedRemoteCandidateChanged=void 0,r.onFirstVideoDecodedTimeout=void 0}setConfiguration(r){this._p2pConnection.setConfiguration(r)}}).prototype,"connect",[yc],Object.getOwnPropertyDescriptor(jn.prototype,"connect"),jn.prototype),Ne(jn.prototype,"receive",[yc],Object.getOwnPropertyDescriptor(jn.prototype,"receive"),jn.prototype),Ne(jn.prototype,"stopReceiving",[yc],Object.getOwnPropertyDescriptor(jn.prototype,"stopReceiving"),jn.prototype),Ne(jn.prototype,"muteRemote",[yc],Object.getOwnPropertyDescriptor(jn.prototype,"muteRemote"),jn.prototype),Ne(jn.prototype,"unmuteRemote",[yc],Object.getOwnPropertyDescriptor(jn.prototype,"unmuteRemote"),jn.prototype),Ne(jn.prototype,"muteLocal",[yc],Object.getOwnPropertyDescriptor(jn.prototype,"muteLocal"),jn.prototype),Ne(jn.prototype,"unmuteLocal",[yc],Object.getOwnPropertyDescriptor(jn.prototype,"unmuteLocal"),jn.prototype),Ne(jn.prototype,"close",[yc],Object.getOwnPropertyDescriptor(jn.prototype,"close"),jn.prototype),Ne(jn.prototype,"updateEncoderConfig",[yc],Object.getOwnPropertyDescriptor(jn.prototype,"updateEncoderConfig"),jn.prototype),Ne(jn.prototype,"updateSendParameters",[yc],Object.getOwnPropertyDescriptor(jn.prototype,"updateSendParameters"),jn.prototype),Ne(jn.prototype,"replaceTrack",[yc],Object.getOwnPropertyDescriptor(jn.prototype,"replaceTrack"),jn.prototype),Ne(jn.prototype,"getRemoteSSRC",[yc],Object.getOwnPropertyDescriptor(jn.prototype,"getRemoteSSRC"),jn.prototype),jn);function yc(n,r,o){const s=n[r];if(typeof s!="function")throw new Error("Cannot use mutex on object property.");return o.value=async function(){const l=this.mutex,d=await l.lock("From DataChannelConnection.".concat(r));try{for(var p=arguments.length,_=new Array(p),S=0;S<p;S++)_[S]=arguments[S];return await s.apply(this,_)}finally{d()}},o}var dn;function DV(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function uh(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?DV(Object(o),!0).forEach(function(s){L(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):DV(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}function LV(n){var r,o,s,l=2;for(typeof Symbol<"u"&&(o=B3,s=Symbol.iterator);l--;){if(o&&(r=n[o])!=null)return r.call(n);if(s&&(r=n[s])!=null)return new px(r.call(n));o="@@asyncIterator",s="@@iterator"}throw new TypeError("Object is not async iterable")}function px(n){function r(o){if(Object(o)!==o)return Le.reject(new TypeError(o+" is not an object."));var s=o.done;return Le.resolve(o.value).then(function(l){return{value:l,done:s}})}return(px=function(o){this.s=o,this.n=o.next}).prototype={s:null,n:null,next:function(){return r(this.n.apply(this.s,arguments))},return:function(o){var s=this.s.return;return s===void 0?Le.resolve({value:o,done:!0}):r(s.apply(this.s,arguments))},throw:function(o){var s=this.s.return;return s===void 0?Le.reject(o):r(s.apply(this.s,arguments))}},new px(n)}let oJ=(Ne((dn=class extends ur{get state(){return this._state}set state(n){const r=this._state;this._state=n,this.emit(on.StateChange,r,this._state)}constructor(n,r){super(),L(this,"store",void 0),L(this,"statsUploader",void 0),L(this,"connection",void 0),L(this,"localTrackMap",new Map),L(this,"remoteUserMap",new Map),L(this,"pendingLocalTracks",[]),L(this,"pendingRemoteTracks",[]),L(this,"statsCollector",void 0),L(this,"isPlanB",!1),L(this,"shouldForwardP2PCreation",void 0),L(this,"iceFailedCount",0),L(this,"dtlsFailedCount",0),L(this,"mutex",new xo("P2PChannel-mutex")),L(this,"_state",si.Disconnected),L(this,"_pcStatsUploadType",de("NEW_ICE_RESTART")?ol.FIRST_CONNECTION:ol.OLD_FIRST_CONNECTION),L(this,"_isInRestartIce",!1),L(this,"_isStartRestartIce",!1),L(this,"_restartStates",["disconnected","failed"]),L(this,"_restartTimer",void 0),L(this,"_isFirstConnected",!0),L(this,"handleMuteLocalTrack",async(o,s,l)=>{const d=await this.mutex.lock("Locking from P2PChannel.handleMuteLocalTrack");try{if(!this.connection||this.state!==si.Connected)return void l(new re(q.INVALID_OPERATION,"Cannot call P2PChannel.handleMuteLocalTrack before connection established."));const p=this.filterTobeMutedTracks(o);if(p.length===0)return void s();const _=p.find(I=>I[0]==="videoLowTrack");_&&_[1].track._originMediaStreamTrack.stop(),await this.connection.muteLocal(p.map(I=>{let[,{id:b}]=I;return b}));const S=this.createMuteMessage(p);await vr(this,on.RequestMuteLocal,S),s()}catch(p){l(p)}finally{d()}}),L(this,"handleUnmuteLocalTrack",async(o,s,l)=>{const d=await this.mutex.lock("Locking from P2PChannel.handleUnmuteLocalTrack");try{if(!this.connection||this.state!==si.Connected)return void l(new re(q.INVALID_OPERATION,"Cannot call P2PChannel.handleUnmuteLocalTrack before connection established."));const p=this.filterTobeUnmutedTracks(o);if(p.length===0)return void s();const _=p.find(I=>I[0]==="videoLowTrack");if(_){const I=_[1];if(I.track._originMediaStreamTrack.stop(),Pr().supportDualStreamEncoding){const b=o._mediaStreamTrack.clone();I.track._mediaStreamTrack=b,I.track._originMediaStreamTrack=b}else{const b=fV(o,$f(this,on.RequestLowStreamParameter));I.track._mediaStreamTrack=b,I.track._originMediaStreamTrack=b}await new Le((b,A)=>{this.handleReplaceTrack(I.track,b,A,!0)})}await this.connection.unmuteLocal(p.map(I=>{let[,{id:b}]=I;return b}));const S=this.createUnmuteMessage(p);await vr(this,on.RequestUnmuteLocal,S),s()}catch(p){l(p)}finally{d()}}),L(this,"handleUpdateVideoEncoder",async(o,s,l)=>{const d=await this.mutex.lock("Locking from P2PChannel.handleSetVideoEncoder");try{const p=this.localTrackMap.get(Je.LocalVideoTrack);if(!this.connection||!p||p.track!==o||this.state!==si.Connected)return void s();const{id:_,track:S}=p;await this.connection.updateSendParameters(_,S),await this.connection.updateEncoderConfig(_,S),this.emit(on.UpdateVideoEncoder,S),s()}catch(p){l(p)}finally{d()}}),L(this,"handleSetOptimizationMode",async(o,s,l)=>{const d=await this.mutex.lock("Locking from P2PChannel.handleSetOptimizationMode");try{const p=this.localTrackMap.get(Je.LocalVideoTrack);if(!this.connection||!p||p.track!==o||this.state!==si.Connected)return;const{id:_,track:S}=p;await this.connection.updateSendParameters(_,S),s()}catch(p){l(p)}finally{d()}}),L(this,"handleReplaceTrack",async(o,s,l,d)=>{let p;j.debug("[".concat(this.store.clientId,"] P2PChannel handleReplaceTrack for [track-id-").concat(o.getTrackId(),"]")),typeof d=="boolean"&&d||(p=await this.mutex.lock("From P2PChannel.handleReplaceTrack"));try{var _;const I=Array.from(this.localTrackMap.entries()).find(b=>{let[,{track:A}]=b;return o===A});if(!this.connection||!I||this.state!==si.Connected)return void s();if(await((_=this.connection)===null||_===void 0?void 0:_.replaceTrack(o,I[1].id)),this.isPlanB){const b=I[1];b.id=o._mediaStreamTrack.id,this.localTrackMap.set(I[0],b)}if(I[0]===Je.LocalVideoTrack&&Pr().supportDualStreamEncoding){const b=this.localTrackMap.get(Je.LocalVideoLowTrack);if(b){const A=o._mediaStreamTrack.clone();b.track._originMediaStreamTrack.stop(),b.track._mediaStreamTrack=A,b.track._originMediaStreamTrack=A,await new Le((F,W)=>{this.handleReplaceTrack(b.track,F,W,!0)})}}s()}catch(I){l(I)}finally{var S;(S=p)===null||S===void 0||S()}}),L(this,"handleGetLocalVideoStats",o=>{o(this.statsCollector.getLocalVideoTrackStats())}),L(this,"handleGetLocalAudioStats",o=>{o(this.statsCollector.getLocalAudioTrackStats())}),L(this,"handleGetRemoteVideoStats",o=>this.statsCollector.getRemoteVideoTrackStats(o.uid)[o.uid]),L(this,"handleGetRemoteAudioStats",o=>this.statsCollector.getRemoteAudioTrackStats(o.uid)[o.uid]),this.store=n,this.statsCollector=r,this.statsCollector.addP2PChannel(this),this.statsUploader=new nJ,this.bindStatsUploaderEvents(),this.isPlanB=!Pr().supportUnifiedPlan||de("CHROME_FORCE_PLAN_B")&&au(),this.shouldForwardP2PCreation=de("FORWARD_P2P_CREATION")&&Pr().supportPCSetConfiguration,this.shouldForwardP2PCreation&&(this.connection=this.store.useDataChannel?new lh({},this.store):this.isPlanB?new n_({},this.store):new qu({},this.store),this.bindConnectionEvents(this.connection))}async startP2PConnection(n,r){var o;this.state=si.New;const s=this.shouldForwardP2PCreation&&((o=this.connection)===null||o===void 0?void 0:o.peerConnectionState)==="closed";if(this.shouldForwardP2PCreation&&!s||(s&&this.connection&&(j.warning("[".concat(this.store.clientId,"] P2PChannel.startP2PConnection ForwardP2P closed.")),this.connection.close(),this.unbindConnectionEvents(this.connection)),this.connection=this.store.useDataChannel?new lh(n,this.store):this.isPlanB?new n_(n,this.store):new qu(n,this.store),this.bindConnectionEvents(this.connection)),!this.connection)throw new re(q.UNEXPECTED_ERROR,"Cannot P2PChannel.startConnection before P2PConnection initialization .");return this._pcStatsUploadType=de("NEW_ICE_RESTART")?ol.FIRST_CONNECTION:ol.OLD_FIRST_CONNECTION,this._isFirstConnected=!0,this._isInRestartIce=!1,this._isStartRestartIce=!1,this.connection.setConfiguration(n),this.connection.establishPromise}async connect(n,r,o,s,l,d){if(!this.connection)throw new re(q.UNEXPECTED_ERROR,"Cannot P2PChannel.connect before P2PChannel.startP2PConnection .");this.connection instanceof lh?this.connection.updateRemoteConnect(s):(this.store.peerConnectionStart(),await this.connection.connect(n,r,o,s,l,d),this.statsUploader.startUploadTransportStats(),this.statsUploader.startUploadExtensionUsageStats(),this.state=si.Connected)}async preConnect(n,r,o,s,l,d){if(!this.connection)throw new re(q.UNEXPECTED_ERROR,"Cannot P2PChannel.connect before P2PChannel.startP2PConnection .");this.store.peerConnectionStart();const p=await this.connection.connect(n,r,o,s,l,d);return this.statsUploader.startUploadTransportStats(),this.statsUploader.startUploadExtensionUsageStats(),this.state=si.Connected,p}getEstablishParams(){if(this.connection instanceof lh)return this.connection.getP2PConnectionParams();throw new Error("Only DataChannelConnection needs to obtain establishParams")}publish(n,r,o){var s=this;return _c(function*(){const l=yield Zt(s.mutex.lock("From P2PChannel.publish"));try{if(!s.connection||s.state!==si.Connected){if(s.state===si.Disconnected)throw new re(q.UNEXPECTED_ERROR,"PeerConnection already disconnected.");s.throwIfTrackTypeNotMatch(n);const p=n.filter(_=>s.pendingLocalTracks.indexOf(_)===-1);return void(s.pendingLocalTracks=s.pendingLocalTracks.concat(p))}s.store.pubId=s.store.pubId+1,Ds.markPublishStart(s.store.clientId,s.store.pubId);const d=s.filterTobePublishedTracks(n,r,o);if(d.length===0)return void(yield Zt(s.tryToUnmuteAudio(n)));yield*fb(LV(s.doPublish(s.connection,d)),Zt)}finally{l()}})()}doPublish(n,r){var o=this;return _c(function*(){r.forEach(I=>{let{track:b,type:A}=I;const F=Date.now();o.store.publish(b.getTrackId(),A===Je.LocalAudioTrack?"audio":"video",F)}),o.bindLocalTrackEvents(r);const s=yield Zt(n.send(r.map(I=>{let{track:b}=I;return b}),o.store.codec,o.store.audioCodec)),l=(yield Zt(s.next())).value,d=o.createGatewayPublishMessage(r,l);let p;try{p=yield d}catch(I){throw s.throw(I),(I==null?void 0:I.code)===q.WS_ABORT&&r.forEach(b=>{let{track:A}=b;o.pendingLocalTracks.indexOf(A)===-1&&o.pendingLocalTracks.push(A)}),o.unbindLocalTrackEvents(r),I}const _=o.mapPubResToRemoteConfig(d,p),S=(yield Zt(s.next(_))).value;r.forEach(I=>{let{type:b}=I;o.statsCollector.addLocalStats(b)}),o.assignLocalTracks(r,S),o.statsUploader.startUploadUplinkStats(),r.forEach(I=>{let{track:b,type:A}=I;const F=Date.now();o.store.publish(b.getTrackId(),A===Je.LocalAudioTrack?"audio":"video",void 0,F)})})()}publishLowStream(n){var r=this;return _c(function*(){if(!r.connection||r.state!==si.Connected)return;const o=yield Zt(r.mutex.lock("Locking from P2PChannel.publishLowStream"));try{const l=r.localTrackMap.get(Je.LocalVideoTrack);if(!l)throw new re(q.UNEXPECTED_ERROR,"Could not find high stream");if(r.localTrackMap.has(Je.LocalVideoLowTrack))throw new re(q.UNEXPECTED_ERROR,"[".concat(r.store.clientId,"] Can't publish low stream when stream already publish"));const d=[{track:r.getLowVideoTrack(l.track,n),type:Je.LocalVideoLowTrack}];if(yield*fb(LV(r.doPublish(r.connection,d)),Zt),l.track.muted||!l.track.enabled){var s;const p=(s=r.localTrackMap.get(Je.LocalVideoLowTrack))===null||s===void 0?void 0:s.id;p!==void 0&&(yield Zt(r.connection.muteLocal([p])))}}finally{o()}})()}async republish(){this.pendingLocalTracks.length>0&&(j.debug("[".concat(this.store.clientId,"] Emit P2PChannelEvents.RequestRePublish to republish tracks.")),await io(this,on.RequestRePublish,this.pendingLocalTracks),this.emit(on.MediaReconnectEnd,this.store.uid),this.pendingLocalTracks=[])}async reSubscribe(n){for(let r=this.pendingRemoteTracks.length-1;r>=0;r--){const{user:o,kind:s}=this.pendingRemoteTracks[r];(s!==Pt.AUDIO||o._audio_added_&&o._audioSSRC)&&(s!==Pt.VIDEO||o._video_added_&&o._videoSSRC)||this.pendingRemoteTracks.splice(r,1)}if(n)await io(this,on.RequestReSubscribe,this.pendingRemoteTracks);else for(const{user:r,kind:o}of this.pendingRemoteTracks)await this.subscribe(r,o,o===Pt.VIDEO?r._videoSSRC:r._audioSSRC);this.pendingRemoteTracks.forEach(r=>{let{user:o}=r;this.emit(on.MediaReconnectEnd,o.uid)}),this.pendingRemoteTracks=[]}async unpublish(n){if(!this.connection||this.state!==si.Connected)return void n.forEach(s=>{const l=this.pendingLocalTracks.indexOf(s);l!==-1&&this.pendingLocalTracks.splice(l,1)});const r=this.filterTobeUnpublishedTracks(n);if(r.length===0)return;const o=r.find(s=>s[0]==="videoLowTrack");return o&&o[1].track.close(),this.doUnpublish(this.connection,r)}async unpublishLowStream(){if(!this.connection||this.state!==si.Connected)return;const n=this.localTrackMap.get(Je.LocalVideoLowTrack);if(!n)return;n.track.close();const r=[[Je.LocalVideoLowTrack,n]];return this.doUnpublish(this.connection,r)}async doUnpublish(n,r){const o=this.createGatewayUnpublishMessage(r);return await n.stopSending(r.map(s=>{let[,{id:l}]=s;return l})),this.withdrawLocalTracks(r),this.unbindLocalTrackEvents(r.map(s=>{let[l,{track:d}]=s;return{type:l,track:d}})),r.forEach(s=>{let[l]=s;this.statsCollector.removeLocalStats(l)}),this.localTrackMap.size===0&&this.statsUploader.stopUploadUplinkStats(),o}async subscribe(n,r,o,s,l){var d;if(!this.connection||this.state!==si.Connected)throw new re(q.INVALID_OPERATION,"Cannot subscribe remote user when peerConnection disconnected.");if((d=this.remoteUserMap.get(n))!==null&&d!==void 0&&d.has(r))return;let p,_,S;if(l){const A=l.find(W=>{let{stream_type:Z}=W;return Z===r});if(!A)throw new re(q.UNEXPECTED_ERROR,"Cannot subscribe to remote ".concat(r," for user: ").concat(n.uid," because subscribe answer from gateway does not contain stream_type: ").concat(r,"."));const F=await this.connection.receive(r,A.ssrcs,String(n._uintid),A.attributes);this.connection instanceof qu&&(S=F.transceiver),p=F.track,_=F.id}else{const A=await this.connection.receive(r,[{ssrcId:o,rtx:s}],String(n._uintid),void 0);this.connection instanceof qu&&(S=A.transceiver),p=A.track,_=A.id}r===Pt.AUDIO?(n._audioTrack?n._audioTrack._updateOriginMediaStreamTrack(p):(n._audioTrack=new _b(p,n.uid,n._uintid,this.store),j.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote audio track: ").concat(n._audioTrack.getTrackId()))),S&&n._audioTrack._updateRtpTransceiver(S),this.bindRemoteTrackEvents(n,n._audioTrack)):(n._videoTrack?n._videoTrack._updateOriginMediaStreamTrack(p):(n._videoTrack=new Eb(p,n.uid,n._uintid,this.store),j.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote video track: ").concat(n._videoTrack.getTrackId()))),S&&n._videoTrack._updateRtpTransceiver(S),this.bindRemoteTrackEvents(n,n._videoTrack));const I=this.remoteUserMap.get(n);I?I.set(r,_):this.remoteUserMap.set(n,new Map([[r,_]])),this.statsCollector.addRemoteStats(n.uid),this.statsUploader.startUploadDownlinkStats();const b=this.pendingRemoteTracks.findIndex(A=>{let{user:F,kind:W}=A;return F.uid===n.uid&&r===W});b!==-1&&(this.pendingRemoteTracks.splice(b,1),this.emit(on.MediaReconnectEnd,n.uid))}async massSubscribe(n){return this.massSubscribeNoLock(n)}async massSubscribeNoLock(n){if(!this.connection||this.state!==si.Connected)throw new re(q.INVALID_OPERATION,"Cannot subscribeAll remote users when peerConnection disconnected.");n=n.filter(o=>{var s;let{user:l,mediaType:d}=o;return!((s=this.remoteUserMap.get(l))!==null&&s!==void 0&&s.has(d))});const r=await this.connection.batchReceive(n.map(o=>{let{user:s,mediaType:l,ssrcId:d,rtxSsrcId:p}=o;return{kind:l,ssrcMsg:[{ssrcId:d,rtx:p}],mslabel:String(s._uintid)}}));n.forEach((o,s)=>{let{user:l,mediaType:d}=o;const{track:p,id:_,transceiver:S}=r[s];d===Pt.AUDIO?(l._audioTrack?l._audioTrack._updateOriginMediaStreamTrack(p):(l._audioTrack=new _b(p,l.uid,l._uintid,this.store),j.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote audio track: ").concat(l._audioTrack.getTrackId()))),S&&l._audioTrack._updateRtpTransceiver(S),this.bindRemoteTrackEvents(l,l._audioTrack)):(l._videoTrack?l._videoTrack._updateOriginMediaStreamTrack(p):(l._videoTrack=new Eb(p,l.uid,l._uintid,this.store),j.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote video track: ").concat(l._videoTrack.getTrackId()))),S&&l._videoTrack._updateRtpTransceiver(S),this.bindRemoteTrackEvents(l,l._videoTrack));const I=this.remoteUserMap.get(l);I?I.set(d,_):this.remoteUserMap.set(l,new Map([[d,_]])),this.statsCollector.addRemoteStats(l.uid),this.statsUploader.startUploadDownlinkStats();const b=this.pendingRemoteTracks.findIndex(A=>{let{user:F,kind:W}=A;return F.uid===l.uid&&d===W});b!==-1&&(this.pendingRemoteTracks.splice(b,1),this.emit(on.MediaReconnectEnd,l.uid))})}async unsubscribe(n,r,o){const s=this.pendingRemoteTracks.filter(p=>{let{user:_,kind:S}=p;return r!==void 0?_.uid===n.uid&&r===S:_.uid===n.uid});if(s.forEach(p=>{const _=this.pendingRemoteTracks.indexOf(p);this.pendingRemoteTracks.splice(_,1)}),this.connection&&this.state===si.Connected||o||s.forEach(p=>{let{kind:_}=p;var S;if(_===Pt.AUDIO)(S=n._audioTrack)===null||S===void 0||S._destroy(),n._audioTrack=void 0;else if(_===Pt.VIDEO){var I;(I=n._videoTrack)===null||I===void 0||I._destroy(),n._videoTrack=void 0}}),!this.connection||this.state!==si.Connected)return;const l=this.filterTobeUnSubscribedTracks(n,r);if(l.length===0)return;await this.connection.stopReceiving(l.map(p=>{let[,{id:_}]=p;return _}));const d=this.createUnsubscribeMessage(l);return this.withdrawRemoteTracks(l),this.remoteUserMap.size===0&&this.statsUploader.stopUploadDownlinkStats(),l.forEach(p=>{let[_,{kind:S}]=p;var I,b;if(S===Pt.VIDEO&&_._videoSSRC&&((I=this.connection)===null||I===void 0||I.setStatsRemoteVideoIsReady(_._videoSSRC,!1)),S===Pt.VIDEO)this.unbindRemoteTrackEvents(_._videoTrack),o||((b=_._videoTrack)===null||b===void 0||b._destroy(),_._videoTrack=void 0);else if(S===Pt.AUDIO){var A;this.unbindRemoteTrackEvents(_._audioTrack),!o&&((A=_._audioTrack)===null||A===void 0||A._destroy(),_._audioTrack=void 0)}}),d}async massUnsubscribe(n){return this.massUnsubscribeNoLock(n)}async massUnsubscribeNoLock(n){let r=[];for(const{user:l,mediaType:d}of n){const p=this.pendingRemoteTracks.filter(_=>{let{user:S,kind:I}=_;return d!==void 0?S.uid===l.uid&&d===I:S.uid===l.uid});p.forEach(_=>{const S=this.pendingRemoteTracks.indexOf(_);this.pendingRemoteTracks.splice(S,1)}),r=r.concat(p)}if(!this.connection||this.state!==si.Connected)return void r.forEach(l=>{let{user:d,kind:p}=l;var _;if(p===Pt.AUDIO)(_=d._audioTrack)===null||_===void 0||_._destroy(),d._audioTrack=void 0;else if(p===Pt.VIDEO){var S;(S=d._videoTrack)===null||S===void 0||S._destroy(),d._videoTrack=void 0}});const o=Gl(n).call(n,(l,d)=>{let{user:p,mediaType:_}=d;const S=this.filterTobeUnSubscribedTracks(p,_);return l.concat(S)},[]);if(o.length===0)return;await this.connection.stopReceiving(o.map(l=>{let[,{id:d}]=l;return d}));const s=this.createUnsubscribeAllMessage(o);return this.withdrawRemoteTracks(o),this.remoteUserMap.size===0&&this.statsUploader.stopUploadDownlinkStats(),o.forEach(l=>{let[d,{kind:p}]=l;var _,S;if(p===Pt.VIDEO&&d._videoSSRC&&((_=this.connection)===null||_===void 0||_.setStatsRemoteVideoIsReady(d._videoSSRC,!1)),p===Pt.VIDEO)this.unbindRemoteTrackEvents(d._videoTrack),(S=d._videoTrack)===null||S===void 0||S._destroy(),d._videoTrack=void 0;else if(p===Pt.AUDIO){var I;this.unbindRemoteTrackEvents(d._audioTrack),(I=d._audioTrack)===null||I===void 0||I._destroy(),d._audioTrack=void 0}}),s}async muteRemote(n,r){if(!this.connection)return;const o=this.remoteUserMap.get(n);if(!o)return void j.warning("[".concat(this.store.clientId,"] P2PChannel.muteRemote has no remote user ").concat(n.uid,"."));if(!o.get(r))return void j.warning("[".concat(this.store.clientId,"] P2PChannel.muteRemote has no remote user ").concat(n.uid," media type ").concat(r,"."));const s=r===Pt.VIDEO?n._videoSSRC:n._audioSSRC;s!==void 0&&this.connection.setStatsRemoteVideoIsReady(s,!1)}async unmuteRemote(n,r){return this.unmuteRemoteNoLock(n,r)}async unmuteRemoteNoLock(n,r){if(!this.connection)return;const o=this.remoteUserMap.get(n);if(!o)return void j.warning("[".concat(this.store.clientId,"] P2PChannel.unmuteRemote has no remote user ").concat(n.uid,"."));o.get(r)||j.warning("[".concat(this.store.clientId,"] P2PChannel.unmuteRemote has no remote user ").concat(n.uid," media type ").concat(r,"."))}getAllTracks(n){const r=this.localTrackMap.get(Je.LocalAudioTrack);if((r==null?void 0:r.track)instanceof va){const o=r.track;return Array.from(this.localTrackMap.entries()).filter(s=>{let[l]=s;return l!==Je.LocalAudioTrack}).filter(s=>{let[l]=s;return!(n&&l===Je.LocalVideoLowTrack)}).map(s=>{let[,{track:l}]=s;return l}).concat(o.trackList)}return Array.from(this.localTrackMap.entries()).filter(o=>{let[s]=o;return!(n&&s===Je.LocalVideoLowTrack)}).map(o=>{let[,{track:s}]=o;return s})}reportPublishEvent(n,r,o,s,l){if(n){const p=this.localTrackMap.get(Je.LocalAudioTrack),_=s?this.localTrackMap.get(Je.LocalVideoLowTrack):this.localTrackMap.get(Je.LocalVideoTrack);Ze.publish(this.store.sessionId,{eventElapse:Ds.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:n,ec:r,audioName:p==null?void 0:p.track.getTrackLabel(),videoName:_==null?void 0:_.track.getTrackLabel(),screenshare:(_==null?void 0:_.track._hints.indexOf(ai.SCREEN_TRACK))!==-1,audio:!!p,video:!!_,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:l})}else{var d;o||(o=[]);const p=o.find(S=>S instanceof no),_=s?(d=this.localTrackMap.get(Je.LocalVideoTrack))===null||d===void 0?void 0:d.track:o.find(S=>S instanceof $r);Ze.publish(this.store.sessionId,{eventElapse:Ds.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:n,ec:r,audioName:p==null?void 0:p.getTrackLabel(),videoName:_==null?void 0:_.getTrackLabel(),screenshare:(_==null?void 0:_._hints.indexOf(ai.SCREEN_TRACK))!==-1,audio:!!p,video:!!_,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:l})}}reportSubscribeEvent(n,r,o,s){const l=s===Pt.VIDEO?o._videoSSRC:o._audioSSRC;l&&Ze.subscribe(this.store.sessionId,{succ:n,ec:r,video:s===Pt.VIDEO,audio:s===Pt.AUDIO,peerid:o.uid,subscribeRequestid:s===Pt.VIDEO?o._videoSSRC:o._audioSSRC,p2pid:this.store.p2pId,eventElapse:Ds.measureFromSubscribeStart(this.store.clientId,l)})}reset(){j.debug("[".concat(this.store.clientId,"] P2PChannel.reset")),this.mutex=new xo("P2PChannel-mutex"),this.connection&&(this.connection.close(),this.unbindConnectionEvents(this.connection),this.connection=void 0),this.shouldForwardP2PCreation&&(this.connection=this.store.useDataChannel?new lh({},this.store):this.isPlanB?new n_({},this.store):new qu({},this.store),this.bindConnectionEvents(this.connection)),this.statsUploader.stopUploadUplinkStats(),this.statsUploader.stopUploadDownlinkStats(),this.statsUploader.stopUploadTransportStats(),this.statsUploader.stopUploadExtensionUsageStats(),this.unbindLocalTrackEvents(),this.unbindAllRemoteTrackEvents(),this.unbindRtpTransceiver();const n=this.localTrackMap.get(Je.LocalAudioTrack);if((n==null?void 0:n.track)instanceof va){if(n.track.trackList.length>0){const r=n.track;n.track.trackList.forEach(o=>{r.removeAudioTrack(o)})}n.track.close()}this.localTrackMap.clear(),this.remoteUserMap.clear(),this.statsCollector.removeRemoteStats(),this.statsCollector.removeLocalStats(),this.iceFailedCount=0,this.dtlsFailedCount=0,this.pendingLocalTracks=[],this.pendingRemoteTracks=[],this.state=si.Disconnected}getStats(){var n;return(n=this.connection)===null||n===void 0?void 0:n.getStats()}getRemoteVideoIsReady(n){var r;return((r=this.connection)===null||r===void 0?void 0:r.getRemoteVideoIsReady(n))||!1}getLocalAudioVolume(){const n=this.localTrackMap.get(Je.LocalAudioTrack);if(n)return n.track.getVolumeLevel()}getLocalVideoSize(){const n=this.localTrackMap.get(Je.LocalVideoTrack);if(n)return{width:n.track._videoWidth||0,height:n.track._videoHeight||0}}getEncoderConfig(n){const r=this.localTrackMap.get(n);return r&&r.track instanceof $r||r&&r.track instanceof no?r.track._encoderConfig:void 0}getLocalMedia(n){return this.localTrackMap.get(n)}hasLocalMedia(){return this.localTrackMap.size>0}hasRemoteMedia(n,r){if(!n)return this.remoteUserMap.size>0;const o=this.remoteUserMap.get(n);return!!o&&(!r||o.has(r))}async hasRemoteMediaWithLock(n,r){if(!n)return this.remoteUserMap.size>0;const o=this.remoteUserMap.get(n);return!!o&&(!r||o.has(r))}getRemoteMedia(n){var r;const o=Array.from(Ff(r=this.remoteUserMap).call(r)).find(s=>s.uid===n);return o?{audioTrack:o.audioTrack,audioSSRC:o._audioSSRC,videoTrack:o.videoTrack,videoSSRC:o._videoSSRC}:{}}getAudioLevels(){let n=Array.from(this.remoteUserMap.entries()).map(o=>{let[s]=o;return{uid:s.uid,level:s.audioTrack?100*s.audioTrack._source.getAccurateVolumeLevel():0}});const r=this.localTrackMap.get(Je.LocalAudioTrack);return r&&n.push({level:100*r.track._source.getAccurateVolumeLevel(),uid:this.store.uid}),n=ZA(n).call(n,(o,s)=>o.level-s.level),n}async disconnectForReconnect(){this.connection&&(j.debug("[".concat(this.store.clientId,"] P2PChannel.disconnectForReconnect closing P2PConnection")),this.state=si.Reconnecting,de("KEEP_LAST_FRAME")&&this.remoteUserMap.size!==0&&Array.from(this.remoteUserMap.entries()).forEach(n=>{let[r]=n;var o;r._videoTrack&&r._videoTrack._player&&((o=r._videoTrack._player.getVideoElement())===null||o===void 0||o.pause(),r._videoTrack._player.isKeepLastFrame=!0,r._videoTrack._originMediaStreamTrack.stop())}),this.connection.close(),this.unbindConnectionEvents(this.connection),this.connection=void 0,this.shouldForwardP2PCreation&&(this.connection=this.store.useDataChannel?new lh({},this.store):this.isPlanB?new n_({},this.store):new qu({},this.store),this.bindConnectionEvents(this.connection)),this.localTrackMap.size!==0&&(Array.from(this.localTrackMap.entries()).forEach(n=>{let[r,{track:o}]=n;switch(r){case Je.LocalVideoTrack:o._hints.includes(ai.LOW_STREAM)?o.close():this.pendingLocalTracks.push(o);break;case Je.LocalAudioTrack:o instanceof va?this.pendingLocalTracks=this.pendingLocalTracks.concat(o.trackList):this.pendingLocalTracks.push(o);break;case Je.LocalVideoLowTrack:}}),this.emit(on.MediaReconnectStart,this.store.uid)),this.unbindLocalTrackEvents(),this.localTrackMap.clear(),this.remoteUserMap.size!==0&&Array.from(this.remoteUserMap.entries()).forEach(n=>{let[r,o]=n;Array.from(Ff(o).call(o)).forEach(s=>{this.setPendingRemoteMedia(r,s)}),this.emit(on.MediaReconnectStart,r.uid)}),this.unbindAllRemoteTrackEvents(),this.remoteUserMap.clear(),this.statsUploader.stopUploadUplinkStats(),this.statsUploader.stopUploadDownlinkStats(),this.statsUploader.stopUploadTransportStats(),j.debug("[".concat(this.store.clientId,"] P2PChannel disconnected, waiting to reconnect.")))}hasPendingRemoteMedia(n,r){for(const o of this.pendingRemoteTracks){const{user:s,kind:l}=o;if((n instanceof jN?n.uid:n)===s.uid&&r===l)return!0}return!1}setPendingRemoteMedia(n,r){this.hasPendingRemoteMedia(n,r)||this.pendingRemoteTracks.push({user:n,kind:r})}restartICE(n){var r=this;return _c(function*(){if(!r.connection||r.state!==si.Connected||r.connection instanceof lh)return;const o=yield Zt(r.mutex.lock("From P2PChannel.restartICE"));let s;try{s=yield Zt(r.connection.restartICE(n));const d=yield Zt(s.next());if(d.done)return;const p=d.value,_=yield p;switch(r.reportPCDisconnectedOrFailed(n),n){case ji.TCP:r._pcStatsUploadType=ol.TCP_RESTART;break;case ji.RELAY:r._pcStatsUploadType=ol.RELAY_RESTART;break;default:r._pcStatsUploadType=ol.OLD_RESTART}r._isInRestartIce=!0,s.next(_)}catch(d){var l;(l=s)===null||l===void 0||l.throw(d)}finally{o()}})()}getUplinkNetworkQuality(){if(!this.connection)return 0;const n=this.connection.getStats(),r=this.localTrackMap.get(Je.LocalVideoTrack),o=this.localTrackMap.get(Je.LocalAudioTrack),s=n.videoSend.find(W=>W.ssrc===(r==null?void 0:r.ssrcs[0].ssrcId)),l=n.audioSend.find(W=>W.ssrc===(o==null?void 0:o.ssrcs[0].ssrcId));if(!s||!l)return 1;const d=Ec(this,on.NeedSignalRTT),p=s?s.rttMs:void 0,_=l?l.rttMs:void 0,S=p&&_?(p+_)/2:p||_,I=(S&&d?(S+d)/2:S||d)||0,b=100*n.sendPacketLossRate*.7/50+.3*I/1500,A=b<.17?1:b<.36?2:b<.59?3:b<.1?4:5,F=r==null?void 0:r.track;if(F&&F._encoderConfig&&F._hints.indexOf(ai.SCREEN_TRACK)===-1){const W=F._encoderConfig.bitrateMax,Z=n.bitrate.actualEncoded;if(W&&Z){const ee=(1e3*W-Z)/(1e3*W);return kK[ee<.15?0:ee<.3?1:ee<.45?2:ee<.6?3:4][A]}}return A}getDownlinkNetworkQuality(){if(!this.connection)return 0;const n=this.connection.getStats();let r=0;return Array.from(this.remoteUserMap.entries()).forEach(o=>{let[s]=o;const l=s._audioSSRC,d=s._videoSSRC,p=n.audioRecv.find(Z=>Z.ssrc===l),_=n.videoRecv.find(Z=>Z.ssrc===d);if(!p&&!_)return void(r+=1);const S=Ec(this,on.NeedSignalRTT),I=n.rtt,b=(I&&S?(I+S)/2:I||S)||0,A=p?p.jitterMs:void 0,F=n.recvPacketLossRate;let W=.7*F*100/50+.3*b/1500;A&&(W=.6*F*100/50+.2*b/1500+.2*A/400),r+=W<.1?1:W<.17?2:W<.36?3:W<.59?4:5}),this.remoteUserMap.size>0?Math.round(r/this.remoteUserMap.size):r}async muteLocalTrack(n){return new Le((r,o)=>{this.handleMuteLocalTrack(n,r,o)})}filterTobePublishedTracks(n,r,o){const s=[],l=Pr(),d=this.getAllTracks();n=W4(n=n.filter(S=>d.indexOf(S)===-1));let p=!1,_=!1;for(const S of n){if(S instanceof $r&&(this.localTrackMap.has(Je.LocalVideoTrack)||p?new re(q.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS).throw():(s.push({track:S,type:Je.LocalVideoTrack}),p=!0),r)){const I=this.getLowVideoTrack(S,o);s.push({track:I,type:Je.LocalVideoLowTrack})}if(S instanceof no){const I=this.localTrackMap.get(Je.LocalAudioTrack);if(I){if(!(I.track instanceof va))throw new re(q.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing");if(S._bypassWebAudio)throw new re(q.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");I.track.addAudioTrack(S),this.bindLocalAudioTrackEvents(S,!0)}else if(_){const b=s.find(A=>{let{type:F}=A;return F===Je.LocalAudioTrack});if(!(b.track instanceof va))throw new re(q.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing");if(S._bypassWebAudio)throw new re(q.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");b.track.addAudioTrack(S)}else{if(!l.webAudioMediaStreamDest||S instanceof va||S._bypassWebAudio)s.push({track:S,type:Je.LocalAudioTrack});else{const b=new va;b.addAudioTrack(S),s.push({track:b,type:Je.LocalAudioTrack})}_=!0}}}return s}filterTobeUnpublishedTracks(n){const r=[],o=this.getAllTracks();n=W4(n=n.filter(s=>o.indexOf(s)!==-1));for(const s of n){if(s instanceof no){const l=this.localTrackMap.get(Je.LocalAudioTrack);if(!l)continue;l.track instanceof va?(l.track.removeAudioTrack(s),this.unbindLocalAudioTrackEvents(s),l.track.trackList.length===0&&(r.push([Je.LocalAudioTrack,l]),l.track.close())):r.push([Je.LocalAudioTrack,l])}if(s instanceof $r){const l=this.localTrackMap.get(Je.LocalVideoTrack);if(!l)continue;r.push([Je.LocalVideoTrack,l]);const d=this.localTrackMap.get(Je.LocalVideoLowTrack);d&&r.push([Je.LocalVideoLowTrack,d])}}return r}bindLocalTrackEvents(n){n.forEach(r=>{let{track:o,type:s}=r;switch(s){case Je.LocalVideoTrack:o.addListener(Et.GET_STATS,this.handleGetLocalVideoStats),o.addListener(Et.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),o.addListener(Et.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),o.addListener(Et.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),o.addListener(Et.SET_OPTIMIZATION_MODE,this.handleSetOptimizationMode),o.addListener(Et.NEED_REPLACE_TRACK,this.handleReplaceTrack),o.addListener(Et.NEED_MUTE_TRACK,this.handleMuteLocalTrack),o.addListener(Et.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case Je.LocalAudioTrack:this.bindLocalAudioTrackEvents(o);break;case Je.LocalVideoLowTrack:}})}bindLocalAudioTrackEvents(n,r){n instanceof va?n.trackList.forEach(o=>{o.addListener(Et.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),o.addListener(Et.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),o.addListener(Et.GET_STATS,this.handleGetLocalAudioStats),o.addListener(Et.NEED_MUTE_TRACK,this.handleMuteLocalTrack),o.addListener(Et.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)}):(n.addListener(Et.GET_STATS,this.handleGetLocalAudioStats),n.addListener(Et.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),n.addListener(Et.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),n.addListener(Et.NEED_MUTE_TRACK,this.handleMuteLocalTrack),n.addListener(Et.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack),r||n.addListener(Et.NEED_REPLACE_TRACK,this.handleReplaceTrack))}unbindLocalTrackEvents(n){n||(n=Array.from(this.localTrackMap.entries()).map(r=>{let[o,{track:s}]=r;return{track:s,type:o}})),n.forEach(r=>{let{track:o,type:s}=r;switch(s){case Je.LocalVideoTrack:o.off(Et.GET_STATS,this.handleGetLocalVideoStats),o.off(Et.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),o.off(Et.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),o.off(Et.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),o.off(Et.SET_OPTIMIZATION_MODE,this.handleSetOptimizationMode),o.off(Et.NEED_REPLACE_TRACK,this.handleReplaceTrack),o.off(Et.NEED_MUTE_TRACK,this.handleMuteLocalTrack),o.off(Et.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case Je.LocalAudioTrack:this.unbindLocalAudioTrackEvents(o);break;case Je.LocalVideoLowTrack:}})}unbindLocalAudioTrackEvents(n){n instanceof va?n.trackList.forEach(r=>{r.off(Et.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),r.off(Et.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),r.off(Et.GET_STATS,this.handleGetLocalAudioStats),r.off(Et.NEED_MUTE_TRACK,this.handleMuteLocalTrack),r.off(Et.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)}):(n.off(Et.GET_STATS,this.handleGetLocalAudioStats),n.off(Et.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),n.off(Et.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),n.off(Et.NEED_REPLACE_TRACK,this.handleReplaceTrack),n.off(Et.NEED_MUTE_TRACK,this.handleMuteLocalTrack),n.off(Et.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack))}bindRemoteTrackEvents(n,r){r instanceof Eb&&r.addListener(Et.GET_STATS,o=>{o(this.handleGetRemoteVideoStats(n))}),r instanceof _b&&r.addListener(Et.GET_STATS,o=>{o(this.handleGetRemoteAudioStats(n))})}unbindRemoteTrackEvents(n){n&&n.removeAllListeners(Et.GET_STATS)}unbindAllRemoteTrackEvents(){Array.from(this.remoteUserMap.entries()).forEach(n=>{let[r,o]=n;o.has(Pt.AUDIO)&&this.unbindRemoteTrackEvents(r._audioTrack),o.has(Pt.VIDEO)&&this.unbindRemoteTrackEvents(r._videoTrack)})}createGatewayPublishMessage(n,r){return n.map((o,s)=>{let l,d,{track:p,type:_}=o;switch(_){case Je.LocalAudioTrack:l=Xr.Audio,d={dtx:p instanceof QT&&p._config.DTX,hq:!1,lq:!1,stereo:!1,speech:!1};break;case Je.LocalVideoTrack:l=p._hints.includes(ai.SCREEN_TRACK)?Xr.Screen:Xr.High,d=uh(uh({},j4(p)),{},{codec:this.store.codec});break;case Je.LocalVideoLowTrack:l=Xr.Low,d=uh(uh({},j4(p)),{},{codec:this.store.codec})}return{stream_type:l,attributes:d,ssrcs:r[s]}})}createGatewayUnpublishMessage(n){return n.map(r=>{let o,[s,{track:l,ssrcs:d,id:p}]=r;switch(s){case Je.LocalVideoTrack:o=l._hints.includes(ai.SCREEN_TRACK)?Xr.Screen:Xr.High;break;case Je.LocalAudioTrack:o=Xr.Audio;break;case Je.LocalVideoLowTrack:o=Xr.Low}return{stream_type:o,ssrcs:d,mid:p}})}assignLocalTracks(n,r){n.forEach((o,s)=>{let{track:l,type:d}=o;this.localTrackMap.set(d,{track:l,id:r[s].id,ssrcs:r[s].localSSRC})})}withdrawLocalTracks(n){n.forEach(r=>{let[o]=r;this.localTrackMap.delete(o)})}bindConnectionEvents(n){n.onConnectionStateChange=async r=>{if(j.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onConnectionStateChange(").concat(r,")")),this.emit(on.PeerConnectionStateChange,r),r!=="connected"||this.store.keyMetrics.peerConnectionEnd||this.store.peerConnectionEnd(),r==="connected"&&(this._restartTimer&&(clearTimeout(this._restartTimer),this._restartTimer=void 0),(this._isFirstConnected||this._isInRestartIce)&&this.reportPCStats(Date.now(),!0,this._pcStatsUploadType),this._isInRestartIce=!1,this._isFirstConnected=!1,this._isStartRestartIce=!1),de("NEW_ICE_RESTART")){if(this._restartStates.includes(r)){if(this._isStartRestartIce)return;this._isStartRestartIce=!0;const o=d=>{(n.iceConnectionState==="disconnected"||n.iceConnectionState==="checking"||n.iceConnectionState==="failed")&&(j.debug("[".concat(this.store.clientId,"] [P2PChannel] start use restartICE, type is ").concat(d)),Ec(this,on.QueryClientConnectionState)==="CONNECTED"&&this.emit(on.RequestRestartICE,d))},s=()=>{n.iceConnectionState!=="disconnected"&&n.iceConnectionState!=="checking"&&n.iceConnectionState!=="failed"||(this.reportPCStats(Date.now(),!1,this._pcStatsUploadType),j.debug("[".concat(this.store.clientId,"] P2PConnection disconnected timeout, force reconnect")),setTimeout(()=>this.emit(on.P2PLost),0),this.iceFailedCount+=1,this.requestReconnect())},l=de("ICE_RESTART_INTERVAL");return void(this._restartTimer=window.setTimeout(()=>{if(de("JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE")&&Pr().supportPCSetConfiguration)o(ji.RELAY),this._restartTimer=window.setTimeout(s,l);else if(nr())o(ji.UDP),this._restartTimer=window.setTimeout(s,4e3);else{if(o(ji.TCP),Pr().supportPCSetConfiguration)return void(this._restartTimer=window.setTimeout(()=>{o(ji.RELAY),this._restartTimer=window.setTimeout(s,l)},l));this._restartTimer=window.setTimeout(s,l)}},800))}}else{if(r==="disconnected"&&n.iceConnectionState==="disconnected")return setTimeout(()=>{n.iceConnectionState==="disconnected"&&de("ICE_RESTART")&&Ec(this,on.QueryClientConnectionState)==="CONNECTED"&&this.emit(on.RequestRestartICE)},800),void setTimeout(()=>{n.peerConnectionState==="disconnected"&&(j.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection disconnected timeout 4000ms, force reconnect")),this.reportPCStats(Date.now(),!1,this._pcStatsUploadType),this._isInRestartIce=!1,setTimeout(()=>this.emit(on.P2PLost),0),this.iceFailedCount+=1,this.requestReconnect())},4e3);r==="failed"&&(j.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection state failed, force reconnect")),this.reportPCDisconnectedOrFailed(),setTimeout(()=>this.emit(on.P2PLost),0),this.iceFailedCount+=1,await this.requestReconnect())}},n.onICEConnectionStateChange=r=>{r!=="connected"||this.store.keyMetrics.iceConnectionEnd||this.store.iceConnectionEnd(),j.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICEConnectionStateChange(").concat(r,")")),Ze.reportApiInvoke(this.store.sessionId,{name:"ICEConnectionStateChange",options:r,tag:cr.TRACER}).onSuccess(),this.emit(on.IceConnectionStateChange,r)},n.onICETransportStateChange=r=>{j.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICETransportStateChange(").concat(r,")"))},n.onDTLSTransportStateChange=r=>{j.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportStateChange(").concat(r,")"))},n.onDTLSTransportError=r=>{j.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportError(").concat(r,")"))},n.onFirstAudioDecoded=r=>{var o;const s=Array.from(Ff(o=this.remoteUserMap).call(o)).find(d=>d._audioSSRC===r);var l;s&&(this.store.subscribe(s.uid,"audio",void 0,void 0,void 0,Date.now()),(l=s.audioTrack)===null||l===void 0||l.emit(e0.FIRST_FRAME_DECODED),Ze.firstRemoteFrame(this.store.sessionId,Vi.FIRST_AUDIO_DECODE,dr.FIRST_AUDIO_DECODE,{peer:s._uintid,subscribeElapse:Ds.measureFromSubscribeStart(this.store.clientId,r),subscribeRequestid:r,p2pid:this.store.p2pId}))},n.onFirstAudioReceived=r=>{var o;const s=Array.from(Ff(o=this.remoteUserMap).call(o)).find(l=>l._audioSSRC===r);s&&Ze.firstRemoteFrame(this.store.sessionId,Vi.FIRST_AUDIO_RECEIVED,dr.FIRST_AUDIO_RECEIVED,{peer:s._uintid,subscribeElapse:Ds.measureFromSubscribeStart(this.store.clientId,r),subscribeRequestid:r,p2pid:this.store.p2pId})},n.onFirstVideoDecoded=(r,o,s)=>{this.reportVideoFirstFrameDecoded(r,o,s)},n.onFirstVideoReceived=r=>{var o;const s=Array.from(Ff(o=this.remoteUserMap).call(o)).find(l=>l._videoSSRC===r);s&&Ze.firstRemoteFrame(this.store.sessionId,Vi.FIRST_VIDEO_RECEIVED,dr.FIRST_VIDEO_RECEIVED,{peer:s._uintid,subscribeElapse:Ds.measureFromSubscribeStart(this.store.clientId,r),subscribeRequestid:r,p2pid:this.store.p2pId})},n.onSelectedLocalCandidateChanged=(r,o)=>{const s=r.candidateType==="relay",l=o.candidateType==="relay";o.candidateType!=="unknown"&&s===l||this.emit(on.ConnectionTypeChange,s),j.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.SelectedLocalCandidateChanged(").concat(JSON.stringify(tb(o))," -> ").concat(JSON.stringify(tb(r)),")"))},n.onSelectedRemoteCandidateChanged=(r,o)=>{j.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.SelectedRemoteCandidateChanged(").concat(JSON.stringify(tb(o))," -> ").concat(JSON.stringify(tb(r)),")"))},n.onFirstVideoDecodedTimeout=r=>{this.reportVideoFirstFrameDecoded(r,void 0,void 0,!0)}}unbindConnectionEvents(n){n.onConnectionStateChange=void 0,n.onICEConnectionStateChange=void 0,n.onICETransportStateChange=void 0,n.onDTLSTransportStateChange=void 0,n.onDTLSTransportError=void 0,n.onFirstAudioDecoded=void 0,n.onFirstAudioReceived=void 0,n.onFirstVideoDecoded=void 0,n.onFirstVideoReceived=void 0,n.onSelectedLocalCandidateChanged=void 0,n.onSelectedRemoteCandidateChanged=void 0,n.onFirstVideoDecodedTimeout=void 0}filterTobeMutedTracks(n){const r=[];if(this.getAllTracks().indexOf(n)===-1)return r;const o=this.localTrackMap.get(Je.LocalAudioTrack);if(n instanceof no&&(o==null?void 0:o.track)instanceof va)return o.track.isActive||r.push([Je.LocalAudioTrack,o]),r;const s=Array.from(this.localTrackMap.entries()).find(l=>{let[,{track:d}]=l;return n===d});if(s&&(r.push(s),s[0]===Je.LocalVideoTrack)){const l=this.localTrackMap.get(Je.LocalVideoLowTrack);l&&r.push([Je.LocalVideoLowTrack,l])}return r}filterTobeUnmutedTracks(n){const r=[],o=this.localTrackMap.get(Je.LocalAudioTrack);if(n instanceof no&&(o==null?void 0:o.track)instanceof va)return o.track.isActive&&r.push([Je.LocalAudioTrack,o]),r;const s=Array.from(this.localTrackMap.entries()).find(l=>{let[,{track:d}]=l;return n===d});if(s)if(s[0]===Je.LocalVideoTrack){r.push(s);const l=this.localTrackMap.get(Je.LocalVideoLowTrack);l&&r.push([Je.LocalVideoLowTrack,l])}else r.push(s);return r}createMuteMessage(n){return n.map(r=>{let o,[s,{track:l,ssrcs:d,id:p}]=r;switch(s){case Je.LocalAudioTrack:o=Xr.Audio;break;case Je.LocalVideoTrack:o=l._hints.includes(ai.SCREEN_TRACK)?Xr.Screen:Xr.High;break;case Je.LocalVideoLowTrack:o=Xr.Low}return{stream_type:o,ssrcs:d,mid:p}})}createUnmuteMessage(n){return n.map(r=>{let o,[s,{track:l,ssrcs:d,id:p}]=r;switch(s){case Je.LocalAudioTrack:o=Xr.Audio;break;case Je.LocalVideoTrack:o=l._hints.includes(ai.SCREEN_TRACK)?Xr.Screen:Xr.High;break;case Je.LocalVideoLowTrack:o=Xr.Low}return{stream_type:o,ssrcs:d,mid:p}})}filterTobeUnSubscribedTracks(n,r){const o=[],s=this.remoteUserMap.get(n);if(!s)return o;if(r){const l=s.get(r);if(!l)return o;o.push([n,{kind:r,id:l}])}else Array.from(s.entries()).forEach(l=>{let[d,p]=l;o.push([n,{kind:d,id:p}])});return o}createUnsubscribeMessage(n){const r=[];return n.forEach(o=>{let[s,{kind:l,id:d}]=o;switch(l){case Pt.VIDEO:return void(s._videoSSRC&&r.push({stream_type:Pt.VIDEO,ssrcId:s._videoSSRC}));case Pt.AUDIO:return void(s._audioSSRC&&r.push({stream_type:Pt.AUDIO,ssrcId:s._audioSSRC}))}}),r}createUnsubscribeAllMessage(n){const r=new Map;return n.forEach(o=>{let[s,{kind:l}]=o;if(r.has(s)){let d=r.get(s);l===Pt.VIDEO?d|=Vr.Video:d|=Vr.Audio,r.set(s,d)}else l===Pt.VIDEO?r.set(s,Vr.Video):r.set(s,Vr.Audio)}),{users:Array.from(r.entries()).map(o=>{let[s,l]=o;return{stream_id:s.uid,stream_type:l}})}}withdrawRemoteTracks(n){n.forEach(r=>{let[o,{kind:s}]=r;const l=this.remoteUserMap.get(o);l&&(l.delete(s),Array.from(l.entries()).length===0&&this.remoteUserMap.delete(o))})}async updateBitrateLimit(n){const r=this.localTrackMap.get(Je.LocalVideoTrack),o=this.localTrackMap.get(Je.LocalVideoLowTrack);r&&await r.track.setBitrateLimit(n.uplink),o&&n.low_stream_uplink&&await o.track.setBitrateLimit({max_bitrate:n.low_stream_uplink.bitrate,min_bitrate:n.low_stream_uplink.bitrate||0})}isP2PDisconnected(){return this.connection?this.connection.peerConnectionState!=="connected":!0}mapPubResToRemoteConfig(n,r){return n.map((o,s)=>{var l;let{stream_type:d}=o;return(l=r.find(p=>{let{stream_type:_}=p;return d===_}))===null||l===void 0?void 0:l.attributes})}async tryToUnmuteAudio(n){for(let o=0;o<n.length;o++)if(n[o]instanceof no){var r;const s=this.filterTobeUnmutedTracks(n[o]);if(s.length===0)continue;await((r=this.connection)===null||r===void 0?void 0:r.unmuteLocal(s.map(d=>{let[,{id:p}]=d;return p})));const l=this.createUnmuteMessage(s);return void await vr(this,on.RequestUnmuteLocal,l)}}bindStatsUploaderEvents(){this.statsUploader.requestStats=()=>this.getStats(),this.statsUploader.requestLocalMedia=()=>Array.from(this.localTrackMap.entries()),this.statsUploader.requestRemoteMedia=()=>Array.from(this.remoteUserMap.entries()),this.statsUploader.requestVideoIsReady=n=>{var r;return!((r=this.connection)===null||r===void 0||!r.getRemoteVideoIsReady(n))},this.statsUploader.requestUpload=(n,r)=>this.emit(on.RequestUploadStats,n,r),this.statsUploader.requestAllTracks=()=>this.getAllTracks()}unbindStatsUploaderEvents(){this.statsUploader.requestStats=void 0,this.statsUploader.requestLocalMedia=void 0,this.statsUploader.requestRemoteMedia=void 0,this.statsUploader.requestVideoIsReady=void 0}async requestReconnect(){this.dtlsFailedCount+=1,await ro(HA(this.dtlsFailedCount,Ur)),this.emit(on.RequestReconnect)}async reconnectP2P(){const n=Array.from(this.localTrackMap.entries()),r=this.createGatewayUnpublishMessage(n);Array.from(this.remoteUserMap.entries()),r.length>0&&await io(this,on.RequestUnpublishForReconnectPC,r),this.disconnectForReconnect(),this.emit(on.RequestReconnectPC)}canPublishLowStream(){return this.localTrackMap.has(Je.LocalVideoTrack)||this.pendingLocalTracks.some(n=>n instanceof $r)}throwIfTrackTypeNotMatch(n){if(n.filter(r=>r instanceof $r).length>1)throw new re(q.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(n.filter(r=>r instanceof no).length>1&&(n.some(r=>r instanceof no&&r._bypassWebAudio)||!Pr().webAudioMediaStreamDest))throw new re(q.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode");for(const r of n){if(r instanceof $r&&this.pendingLocalTracks.some(o=>o instanceof $r))throw new re(q.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(r instanceof no&&this.pendingLocalTracks.some(o=>o instanceof no)&&(!Pr().webAudioMediaStreamDest||r._bypassWebAudio||this.pendingLocalTracks.some(o=>o instanceof no&&o._bypassWebAudio)))throw new re(q.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode")}}getLowVideoTrack(n,r){const o=Pr().supportDualStreamEncoding,s=uh(uh({},{width:160,height:120,framerate:15,bitrate:50}),r);let l;l=o?n._mediaStreamTrack.clone():fV(n,s);const d=Yn(8,"track-low-"),p=new $r(l,uh(uh({},o&&{scaleResolutionDownBy:FY(s,n)}),{},{frameRate:s.framerate,bitrateMax:s.bitrate,bitrateMin:s.bitrate}),void 0,void 0,d);return p.on(jE.TRANSCEIVER_UPDATED,_=>{n._updateRtpTransceiver(_,Zm.LOW_STREAM)}),p._hints.push(ai.LOW_STREAM),n.addListener(Et.NEED_CLOSE,()=>{p.close()}),p}async globalLock(){return this.mutex.lock("From P2PChannel.globalLock")}async reportPCStats(n,r,o){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;if(this.connection&&this.connection instanceof qu){var l,d,p,_;const S=this.store.keyMetrics.descriptionStart||0,{iceConnectionState:I,dtlsTransportState:b,peerConnectionState:A}=this.connection,{local:F,remote:W}=await this.connection.getSelectedCandidatePair();Ze.pcStats(this.store.sessionId,{startTime:S,eventElapse:n-S||0,iceconnectionsate:I,dtlsstate:b,connectionstate:A,intSucc:r?1:2,error:s,selectedLocalCandidateProtocol:(l=F==null?void 0:F.protocol)!==null&&l!==void 0?l:"",selectedLocalCandidateType:(d=F.candidateType)!==null&&d!==void 0?d:"",selectedLocalCandidateAddress:"".concat(F.address,":").concat(F.port),selectedRemoteCandidateProtocol:(p=W.protocol)!==null&&p!==void 0?p:"",selectedRemoteCandidateType:(_=W.candidateType)!==null&&_!==void 0?_:"",selectedRemoteCandidateAddress:"".concat(W.address,":").concat(W.port),restartCnt:o})}}reportVideoFirstFrameDecoded(n,r,o,s){var l;const d=Array.from(Ff(l=this.remoteUserMap).call(l)).find(p=>p._videoSSRC===n);if(d){s||this.store.subscribe(d.uid,"video",void 0,void 0,void 0,void 0,Date.now());const p=this.store.keyMetrics,_=p.subscribe.find(S=>S.userId===d.uid&&S.type==="video");Ze.firstRemoteVideoDecode(this.store.sessionId,Vi.FIRST_VIDEO_DECODE,dr.FIRST_VIDEO_DECODE,{peer:d._uintid,videowidth:r,videoheight:o,subscribeElapse:Ds.measureFromSubscribeStart(this.store.clientId,n),subscribeRequestid:n,p2pid:this.store.p2pId,apEnd:p.requestAPEnd||0,apStart:p.requestAPStart||0,joinGwEnd:p.joinGatewayEnd||0,joinGwStart:p.joinGatewayStart||0,pcEnd:p.peerConnectionEnd||0,pcStart:p.peerConnectionStart||0,subscriberEnd:(_==null?void 0:_.subscribeEnd)||0,subscriberStart:(_==null?void 0:_.subscribeStart)||0,videoAddNotify:(_==null?void 0:_.streamAdded)||0,state:s?1:0})}}async remoteMediaSsrcChanged(n,r,o){if(!this.connection)return!1;const s=this.remoteUserMap.get(n);if(!s)return!1;const l=s.get(r);if(!l)return!1;const d=await this.connection.getRemoteSSRC(l);return d!==void 0&&d!==o}resetConnection(n){j.debug("[".concat(this.store.clientId,"] [P2PChannel] reset connection to ").concat(n)),this.state===si.Connected?(j.debug("[".concat(this.store.clientId,"] [P2PChannel] fallback to websocket but P2PChannel state still connected, disconnect first")),this.disconnectForReconnect()):(this.connection&&(this.connection.close(),this.unbindConnectionEvents(this.connection),this.connection=void 0),this.shouldForwardP2PCreation&&(this.connection=n===WT.datachannel?new lh({},this.store):this.isPlanB?new n_({},this.store):new qu({},this.store),this.bindConnectionEvents(this.connection)))}unbindRtpTransceiver(){this.localTrackMap.size!==0&&Array.from(this.localTrackMap.entries()).forEach(n=>{let[r,{track:o}]=n;r===Je.LocalVideoLowTrack?o._updateRtpTransceiver(void 0,Zm.LOW_STREAM):o._updateRtpTransceiver(void 0)})}reportPCDisconnectedOrFailed(n){this.connection&&this.connection instanceof qu&&(this.connection.iceConnectionState!=="disconnected"&&this.connection.iceConnectionState!=="checking"&&this.connection.iceConnectionState!=="failed"||(this._isFirstConnected?(this.reportPCStats(Date.now(),!1,this._pcStatsUploadType),this._isFirstConnected=!1):this._pcStatsUploadType===ol.TCP_RESTART&&n===ji.RELAY?this.reportPCStats(Date.now(),!1,this._pcStatsUploadType):this.reportPCStats(Date.now(),!1,ol.DISCONNECTED_OR_FAILED)))}}).prototype,"startP2PConnection",[ka],Object.getOwnPropertyDescriptor(dn.prototype,"startP2PConnection"),dn.prototype),Ne(dn.prototype,"connect",[ka],Object.getOwnPropertyDescriptor(dn.prototype,"connect"),dn.prototype),Ne(dn.prototype,"preConnect",[ka],Object.getOwnPropertyDescriptor(dn.prototype,"preConnect"),dn.prototype),Ne(dn.prototype,"unpublish",[ka],Object.getOwnPropertyDescriptor(dn.prototype,"unpublish"),dn.prototype),Ne(dn.prototype,"unpublishLowStream",[ka],Object.getOwnPropertyDescriptor(dn.prototype,"unpublishLowStream"),dn.prototype),Ne(dn.prototype,"subscribe",[ka],Object.getOwnPropertyDescriptor(dn.prototype,"subscribe"),dn.prototype),Ne(dn.prototype,"massSubscribe",[ka],Object.getOwnPropertyDescriptor(dn.prototype,"massSubscribe"),dn.prototype),Ne(dn.prototype,"unsubscribe",[ka],Object.getOwnPropertyDescriptor(dn.prototype,"unsubscribe"),dn.prototype),Ne(dn.prototype,"massUnsubscribe",[ka],Object.getOwnPropertyDescriptor(dn.prototype,"massUnsubscribe"),dn.prototype),Ne(dn.prototype,"muteRemote",[ka],Object.getOwnPropertyDescriptor(dn.prototype,"muteRemote"),dn.prototype),Ne(dn.prototype,"unmuteRemote",[ka],Object.getOwnPropertyDescriptor(dn.prototype,"unmuteRemote"),dn.prototype),Ne(dn.prototype,"hasRemoteMediaWithLock",[ka],Object.getOwnPropertyDescriptor(dn.prototype,"hasRemoteMediaWithLock"),dn.prototype),Ne(dn.prototype,"disconnectForReconnect",[ka],Object.getOwnPropertyDescriptor(dn.prototype,"disconnectForReconnect"),dn.prototype),Ne(dn.prototype,"updateBitrateLimit",[ka],Object.getOwnPropertyDescriptor(dn.prototype,"updateBitrateLimit"),dn.prototype),Ne(dn.prototype,"remoteMediaSsrcChanged",[ka],Object.getOwnPropertyDescriptor(dn.prototype,"remoteMediaSsrcChanged"),dn.prototype),dn);function ka(n,r,o){const s=n[r];if(typeof s!="function")throw new Error("Cannot use mutex on object property.");return o.value=async function(){const l=this.mutex,d=await l.lock("From P2PChannel.".concat(r));try{for(var p=arguments.length,_=new Array(p),S=0;S<p;S++)_[S]=arguments[S];return await s.apply(this,_)}finally{d()}},o}function kV(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function et(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?kV(Object(o),!0).forEach(function(s){L(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):kV(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}var Yt;(function(n){n.SET_SESSION_ID="SET_SESSION_ID",n.SET_P2P_ID="SET_P2P_id",n.SET_DC_ID="SET_DC_id",n.SET_UID="SET_UID",n.SET_PUB_ID="SET_PUB_ID",n.SET_CLOUD_PROXY_SERVER_MODE="SET_CLOUD_PROXY_SERVER_MODE",n.KEY_METRIC_CLIENT_CREATED="KEY_METRIC_CLIENT_CREATED",n.KEY_METRIC_JOIN_START="KEY_METRIC_JOIN_START",n.AVOID_JOIN_START="AVOID_JOIN_START",n.KEY_METRIC_JOIN_END="KEY_METRIC_JOIN_END",n.KEY_METRIC_REQUEST_AP_START="KEY_METRIC_REQUEST_AP_START",n.KEY_METRIC_REQUEST_AP_END="KEY_METRIC_REQUEST_AP_END",n.KEY_METRIC_JOIN_GATEWAY_START="KEY_METRIC_JOIN_GATEWAY_START",n.KEY_METRIC_JOIN_GATEWAY_END="KEY_METRIC_JOIN_GATEWAY_END",n.KEY_METRIC_PEER_CONNECTION_START="KEY_METRIC_PEER_CONNECTION_START",n.KEY_METRIC_PEER_CONNECTION_END="KEY_METRIC_PEER_CONNECTION_END",n.KEY_METRIC_DESCRIPTION_START="KEY_METRIC_DESCRIPTION_START",n.KEY_METRIC_ICE_CONNECTION_END="KEY_METRIC_ICE_CONNECTION_END",n.KEY_METRIC_SIGNAL_CHANNEL_OPEN="KEY_METRIC_SIGNAL_CHANNEL_OPEN",n.KEY_METRIC_PUBLISH="KEY_METRIC_PUBLISH",n.KEY_METRIC_SUBSCRIBE="KEY_METRIC_SUBSCRIBE",n.RECORD_JOIN_CHANNEL_SERVICE="RECORD_JOIN_CHANNEL_SERVICE",n.RESET_JOIN_CHANNEL_SERVICE_RECORDS="RESET_JOIN_CHANNEL_SERVICE_RECORDS",n.RESET_KEY_METRICS="RESET_KEY_METRICS",n.SET_USE_DATACHANNEL="SET_USE_DATACHANNEL"})(Yt||(Yt={}));class aJ{constructor(r,o,s,l){L(this,"state",void 0),this.state={codec:r,audioCodec:o,mode:s,clientId:l,sessionId:null,p2pId:0,dcId:0,pubId:0,subId:0,avoidJoinStart:0,keyMetrics:{publish:[],subscribe:[]},joinChannelServiceRecords:[],cloudProxyServerMode:"disabled",useDataChannel:!1}}dispatch(r){this.state=function(o,s){switch(s.type){case Yt.SET_SESSION_ID:return et(et({},o),{},{sessionId:s.sessionId});case Yt.SET_P2P_ID:return et(et({},o),{},{p2pId:s.p2pId});case Yt.SET_UID:return et(et({},o),{},{uid:s.uid});case Yt.SET_PUB_ID:return et(et({},o),{},{pubId:s.pubId});case Yt.KEY_METRIC_CLIENT_CREATED:return et(et({},o),{},{keyMetrics:et(et({},o.keyMetrics),{},{clientCreated:s.metric})});case Yt.KEY_METRIC_JOIN_START:return et(et({},o),{},{keyMetrics:et(et({},o.keyMetrics),{},{joinStart:s.metric})});case Yt.AVOID_JOIN_START:return et(et({},o),{},{avoidJoinStart:s.avoidJoinStart});case Yt.KEY_METRIC_JOIN_END:return et(et({},o),{},{keyMetrics:et(et({},o.keyMetrics),{},{joinEnd:s.metric})});case Yt.KEY_METRIC_REQUEST_AP_START:return et(et({},o),{},{keyMetrics:et(et({},o.keyMetrics),{},{requestAPStart:s.metric})});case Yt.KEY_METRIC_REQUEST_AP_END:return et(et({},o),{},{keyMetrics:et(et({},o.keyMetrics),{},{requestAPEnd:s.metric})});case Yt.KEY_METRIC_JOIN_GATEWAY_START:return et(et({},o),{},{keyMetrics:et(et({},o.keyMetrics),{},{joinGatewayStart:s.metric})});case Yt.KEY_METRIC_JOIN_GATEWAY_END:return et(et({},o),{},{keyMetrics:et(et({},o.keyMetrics),{},{joinGatewayEnd:s.metric})});case Yt.KEY_METRIC_PEER_CONNECTION_START:return et(et({},o),{},{keyMetrics:et(et({},o.keyMetrics),{},{peerConnectionStart:s.metric})});case Yt.KEY_METRIC_PEER_CONNECTION_END:return et(et({},o),{},{keyMetrics:et(et({},o.keyMetrics),{},{peerConnectionEnd:s.metric})});case Yt.KEY_METRIC_DESCRIPTION_START:return et(et({},o),{},{keyMetrics:et(et({},o.keyMetrics),{},{descriptionStart:s.metric})});case Yt.KEY_METRIC_SIGNAL_CHANNEL_OPEN:return et(et({},o),{},{keyMetrics:et(et({},o.keyMetrics),{},{signalChannelOpen:s.metric})});case Yt.KEY_METRIC_ICE_CONNECTION_END:return et(et({},o),{},{keyMetrics:et(et({},o.keyMetrics),{},{iceConnectionEnd:s.metric})});case Yt.KEY_METRIC_PUBLISH:{const l=o.keyMetrics.publish,d=l.findIndex(p=>p.trackId===s.metric.trackId);return d!==-1?(l[d]=et(et({},l[d]),s.metric),et(et({},o),{},{keyMetrics:et(et({},o.keyMetrics),{},{publish:[...l]})})):et(et({},o),{},{keyMetrics:et(et({},o.keyMetrics),{},{publish:[...o.keyMetrics.publish,s.metric]})})}case Yt.KEY_METRIC_SUBSCRIBE:{const l=o.keyMetrics.subscribe,d=l.findIndex(p=>p.userId===s.metric.userId&&p.type===s.metric.type);return d!==-1?(l[d]=et(et({},l[d]),s.metric),et(et({},o),{},{keyMetrics:et(et({},o.keyMetrics),{},{subscribe:[...l]})})):et(et({},o),{},{keyMetrics:et(et({},o.keyMetrics),{},{subscribe:[...o.keyMetrics.subscribe,s.metric]})})}case Yt.SET_CLOUD_PROXY_SERVER_MODE:return o.cloudProxyServerMode=s.mode,o;case Yt.RECORD_JOIN_CHANNEL_SERVICE:return typeof s.index!="number"?o.joinChannelServiceRecords=[...o.joinChannelServiceRecords,s.record]:(o.joinChannelServiceRecords[s.index]=et(et({},o.joinChannelServiceRecords[s.index]),s.record),o.joinChannelServiceRecords=[...o.joinChannelServiceRecords]),o;case Yt.RESET_JOIN_CHANNEL_SERVICE_RECORDS:return o.joinChannelServiceRecords=[],o;case Yt.RESET_KEY_METRICS:return o.keyMetrics={publish:[],subscribe:[]},o;case Yt.SET_USE_DATACHANNEL:return et(et({},o),{},{useDataChannel:s.val});default:return o}}(this.state,r)}set sessionId(r){this.dispatch({type:Yt.SET_SESSION_ID,sessionId:r})}get sessionId(){return this.state.sessionId}get codec(){return this.state.codec}get audioCodec(){return this.state.audioCodec}get clientId(){return this.state.clientId}set p2pId(r){this.dispatch({type:Yt.SET_P2P_ID,p2pId:r})}get p2pId(){return this.state.p2pId}set dcId(r){this.dispatch({type:Yt.SET_DC_ID,dcId:r})}get dcId(){return this.state.dcId}set uid(r){this.dispatch({type:Yt.SET_UID,uid:r})}get uid(){return this.state.uid}set pubId(r){this.dispatch({type:Yt.SET_PUB_ID,pubId:r})}get pubId(){return this.state.pubId}set cloudProxyServerMode(r){this.dispatch({type:Yt.SET_CLOUD_PROXY_SERVER_MODE,mode:r})}get cloudProxyServerMode(){return this.state.cloudProxyServerMode}set useDataChannel(r){this.dispatch({type:Yt.SET_USE_DATACHANNEL,val:r})}get useDataChannel(){return this.state.useDataChannel}clientCreated(){this.dispatch({type:Yt.KEY_METRIC_CLIENT_CREATED,metric:Date.now()})}joinStart(){this.dispatch({type:Yt.KEY_METRIC_JOIN_START,metric:Date.now()})}joinEnd(){this.dispatch({type:Yt.KEY_METRIC_JOIN_END,metric:Date.now()})}requestAPStart(){this.dispatch({type:Yt.KEY_METRIC_REQUEST_AP_START,metric:Date.now()})}requestAPEnd(){this.dispatch({type:Yt.KEY_METRIC_REQUEST_AP_END,metric:Date.now()})}joinGatewayStart(){this.dispatch({type:Yt.KEY_METRIC_JOIN_GATEWAY_START,metric:Date.now()})}joinGatewayEnd(){this.dispatch({type:Yt.KEY_METRIC_JOIN_GATEWAY_END,metric:Date.now()})}peerConnectionStart(){this.dispatch({type:Yt.KEY_METRIC_PEER_CONNECTION_START,metric:Date.now()})}peerConnectionEnd(){this.dispatch({type:Yt.KEY_METRIC_PEER_CONNECTION_END,metric:Date.now()})}descriptionStart(){this.dispatch({type:Yt.KEY_METRIC_DESCRIPTION_START,metric:Date.now()})}signalChannelOpen(){this.dispatch({type:Yt.KEY_METRIC_SIGNAL_CHANNEL_OPEN,metric:Date.now()})}iceConnectionEnd(){this.dispatch({type:Yt.KEY_METRIC_ICE_CONNECTION_END,metric:Date.now()})}publish(r,o,s,l){this.dispatch({type:Yt.KEY_METRIC_PUBLISH,metric:et(et({trackId:r,type:o},s&&{publishStart:s}),l&&{publishEnd:l})})}subscribe(r,o,s,l,d,p,_){this.dispatch({type:Yt.KEY_METRIC_SUBSCRIBE,metric:et(et(et(et(et({userId:r,type:o},s&&{subscribeStart:s}),l&&{subscribeEnd:l}),d&&{firstFrame:d}),p&&{streamAdded:p}),_&&{firstDecoded:_})})}massSubscribe(r,o,s,l){r.forEach(d=>{this.dispatch({type:Yt.KEY_METRIC_SUBSCRIBE,metric:et(et(et({userId:d.userId,type:d.type},o&&{subscribeStart:o}),s&&{subscribeEnd:s}),l&&{firstFrame:l})})})}get keyMetrics(){return this.state.keyMetrics}recordJoinChannelService(r,o){r.service==="gateway"&&Array.isArray(r.urls)&&(r.urls=r.urls.map(s=>s.replace(/(\d+)-\d+-\d+-(\d+)/,"$1-*-*-$2")));try{return typeof o!="number"?(this.dispatch({type:Yt.RECORD_JOIN_CHANNEL_SERVICE,record:et(et({},r),{},{sessionId:this.sessionId,cloudProxyMode:this.cloudProxyServerMode,uid:this.uid})}),this.state.joinChannelServiceRecords.length-1):(o<0||o>=this.state.joinChannelServiceRecords.length||this.dispatch({type:Yt.RECORD_JOIN_CHANNEL_SERVICE,record:r,index:o}),o)}catch{return 0}}resetJoinChannelServiceRecords(){this.dispatch({type:Yt.RESET_JOIN_CHANNEL_SERVICE_RECORDS})}resetKeyMetrics(){this.dispatch({type:Yt.RESET_KEY_METRICS})}get joinChannelServiceRecords(){try{return this.state.joinChannelServiceRecords}catch{return[]}}get avoidJoinStart(){return this.state.avoidJoinStart}set avoidJoinStart(r){this.dispatch({type:Yt.AVOID_JOIN_START,avoidJoinStart:r})}}let Cb;const sJ=()=>(Cb||Cb||(Cb=(window.location.protocol.split(":")[0]||"").toUpperCase(),Cb))==="HTTPS",MV=()=>window.isSecureContext!==void 0;function cJ(n){let r=VV();return function(o,s){let l=o.appId;l!==void 0&&(vn(s,10),hu(s,l));let d=o.cid;d!==void 0&&(vn(s,16),vn(s,d));let p=o.cname;p!==void 0&&(vn(s,26),hu(s,p));let _=o.deviceId;_!==void 0&&(vn(s,34),hu(s,_));let S=o.elapse;S!==void 0&&(vn(s,40),dh(s,S));let I=o.fileSize;I!==void 0&&(vn(s,48),dh(s,p0(I)));let b=o.height;b!==void 0&&(vn(s,56),dh(s,p0(b)));let A=o.jpg;A!==void 0&&(vn(s,66),vn(s,A.length),function(_a,Ie){let De=m0(_a,Ie.length);_a.bytes.set(Ie,De)}(s,A));let F=o.networkType;F!==void 0&&(vn(s,72),dh(s,p0(F)));let W=o.osType;W!==void 0&&(vn(s,80),dh(s,p0(W)));let Z=o.requestId;Z!==void 0&&(vn(s,90),hu(s,Z));let ee=o.sdkVersion;ee!==void 0&&(vn(s,98),hu(s,ee));let te=o.sequence;te!==void 0&&(vn(s,104),dh(s,p0(te)));let Ee=o.sid;Ee!==void 0&&(vn(s,114),hu(s,Ee));let ye=o.timestamp;ye!==void 0&&(vn(s,120),dh(s,ye));let Pe=o.uid;Pe!==void 0&&(vn(s,128),vn(s,Pe));let Xe=o.vid;Xe!==void 0&&(vn(s,136),vn(s,Xe));let ke=o.width;ke!==void 0&&(vn(s,144),dh(s,p0(ke)));let Ve=o.service;Ve!==void 0&&(vn(s,152),vn(s,Ve));let xe=o.callbackData;xe!==void 0&&(vn(s,162),hu(s,xe));let $e=o.jpgEncryption;$e!==void 0&&(vn(s,168),vn(s,$e));let En=o.requestType;En!==void 0&&(vn(s,176),vn(s,En));let ct=o.scorePorn;ct!==void 0&&(vn(s,185),_x(s,ct));let Bn=o.scoreSexy;Bn!==void 0&&(vn(s,193),_x(s,Bn));let On=o.scoreNeutral;On!==void 0&&(vn(s,201),_x(s,On));let Lr=o.scene;Lr!==void 0&&(vn(s,208),vn(s,Lr));let $i=o.ossFilePrefix;$i!==void 0&&(vn(s,218),hu(s,$i));let Rr=o.serviceVendor;if(Rr!==void 0)for(let _a of Rr){vn(s,226);let Ie=VV();dJ(_a,Ie),vn(s,Ie.limit),mJ(s,Ie),pJ(Ie)}}(n,r),function(o){let s=o.bytes,l=o.limit;return s.length===l?s:s.subarray(0,l)}(r)}function lJ(n){return function(o){let s={};e:for(;!jV(o);){let l=fu(o);switch(l>>>3){case 0:break e;case 1:s.code=fu(o);break;case 2:s.msg=BV(o,fu(o));break;case 3:{let d=hJ(o);s.data=uJ(o),o.limit=d;break}default:UV(o,7&l)}}return s}({bytes:r=n,offset:0,limit:r.length});var r}function uJ(n){let r={};e:for(;!jV(n);){let o=fu(n);switch(o>>>3){case 0:break e;case 1:r.requestId=BV(n,fu(n));break;case 2:r.requestType=fu(n)>>>0;break;case 3:r.scorePorn=Ex(n);break;case 4:r.scoreSexy=Ex(n);break;case 5:r.scoreNeutral=Ex(n);break;case 6:r.requestScene=fu(n)>>>0;break;case 7:r.scene=fu(n)>>>0;break;default:UV(n,7&o)}}return r}function dJ(n,r){let o=n.service;o!==void 0&&(vn(r,8),vn(r,o));let s=n.vendor;s!==void 0&&(vn(r,16),vn(r,s));let l=n.token;l!==void 0&&(vn(r,26),hu(r,l));let d=n.callbackUrl;d!==void 0&&(vn(r,34),hu(r,d))}function hJ(n){let r=fu(n),o=n.limit;return n.limit=n.offset+r,o}function UV(n,r){switch(r){case 0:for(;128&$V(n););break;case 2:gx(n,fu(n));break;case 5:gx(n,4);break;case 1:gx(n,8);break;default:throw new Error("Unimplemented type: "+r)}}let fJ=new Float32Array(1);new Uint8Array(fJ.buffer);let mx=new Float64Array(1),Ea=new Uint8Array(mx.buffer);function p0(n){return{low:n|=0,high:n>>31,unsigned:n>=0}}let FV=[];function VV(){const n=FV.pop();return n?(n.offset=n.limit=0,n):{bytes:new Uint8Array(64),offset:0,limit:0}}function pJ(n){FV.push(n)}function gx(n,r){if(n.offset+r>n.limit)throw new Error("Skip past limit");n.offset+=r}function jV(n){return n.offset>=n.limit}function m0(n,r){let o=n.bytes,s=n.offset,l=n.limit,d=s+r;if(d>o.length){let p=new Uint8Array(2*d);p.set(o),n.bytes=p}return n.offset=d,d>l&&(n.limit=d),s}function vx(n,r){let o=n.offset;if(o+r>n.limit)throw new Error("Read past limit");return n.offset+=r,o}function BV(n,r){let o=vx(n,r),s=String.fromCharCode,l=n.bytes,d="�",p="";for(let _=0;_<r;_++){let S,I,b,A,F=l[_+o];128&F?(224&F)==192?_+1>=r?p+=d:(S=l[_+o+1],(192&S)!=128?p+=d:(A=(31&F)<<6|63&S,A<128?p+=d:(p+=s(A),_++))):(240&F)==224?_+2>=r?p+=d:(S=l[_+o+1],I=l[_+o+2],(49344&(S|I<<8))!=32896?p+=d:(A=(15&F)<<12|(63&S)<<6|63&I,A<2048||A>=55296&&A<=57343?p+=d:(p+=s(A),_+=2))):(248&F)==240?_+3>=r?p+=d:(S=l[_+o+1],I=l[_+o+2],b=l[_+o+3],(12632256&(S|I<<8|b<<16))!=8421504?p+=d:(A=(7&F)<<18|(63&S)<<12|(63&I)<<6|63&b,A<65536||A>1114111?p+=d:(A-=65536,p+=s(55296+(A>>10),56320+(1023&A)),_+=3))):p+=d:p+=s(F)}return p}function hu(n,r){let o=r.length,s=0;for(let p=0;p<o;p++){let _=r.charCodeAt(p);_>=55296&&_<=56319&&p+1<o&&(_=(_<<10)+r.charCodeAt(++p)-56613888),s+=_<128?1:_<2048?2:_<65536?3:4}vn(n,s);let l=m0(n,s),d=n.bytes;for(let p=0;p<o;p++){let _=r.charCodeAt(p);_>=55296&&_<=56319&&p+1<o&&(_=(_<<10)+r.charCodeAt(++p)-56613888),_<128?d[l++]=_:(_<2048?d[l++]=_>>6&31|192:(_<65536?d[l++]=_>>12&15|224:(d[l++]=_>>18&7|240,d[l++]=_>>12&63|128),d[l++]=_>>6&63|128),d[l++]=63&_|128)}}function mJ(n,r){let o=m0(n,r.limit),s=n.bytes,l=r.bytes;for(let d=0,p=r.limit;d<p;d++)s[d+o]=l[d]}function $V(n){return n.bytes[vx(n,1)]}function HV(n,r){let o=m0(n,1);n.bytes[o]=r}function Ex(n){let r=vx(n,8),o=n.bytes;return Ea[0]=o[r++],Ea[1]=o[r++],Ea[2]=o[r++],Ea[3]=o[r++],Ea[4]=o[r++],Ea[5]=o[r++],Ea[6]=o[r++],Ea[7]=o[r++],mx[0]}function _x(n,r){let o=m0(n,8),s=n.bytes;mx[0]=r,s[o++]=Ea[0],s[o++]=Ea[1],s[o++]=Ea[2],s[o++]=Ea[3],s[o++]=Ea[4],s[o++]=Ea[5],s[o++]=Ea[6],s[o++]=Ea[7]}function fu(n){let r,o=0,s=0;do r=$V(n),o<32&&(s|=(127&r)<<o),o+=7;while(128&r);return s}function vn(n,r){for(r>>>=0;r>=128;)HV(n,127&r|128),r>>>=7;HV(n,r)}function dh(n,r){let o=r.low>>>0,s=(r.low>>>28|r.high<<4)>>>0,l=r.high>>>24,d=l===0?s===0?o<16384?o<128?1:2:o<1<<21?3:4:s<16384?s<128?5:6:s<1<<21?7:8:l<128?9:10,p=m0(n,d),_=n.bytes;switch(d){case 10:_[p+9]=l>>>7&1;case 9:_[p+8]=d!==9?128|l:127&l;case 8:_[p+7]=d!==8?s>>>21|128:s>>>21&127;case 7:_[p+6]=d!==7?s>>>14|128:s>>>14&127;case 6:_[p+5]=d!==6?s>>>7|128:s>>>7&127;case 5:_[p+4]=d!==5?128|s:127&s;case 4:_[p+3]=d!==4?o>>>21|128:o>>>21&127;case 3:_[p+2]=d!==3?o>>>14|128:o>>>14&127;case 2:_[p+1]=d!==2?o>>>7|128:o>>>7&127;case 1:_[p]=d!==1?128|o:127&o}}const gJ=async(n,r,o)=>{const s=function(p){const _=[];for(let S=0;S<p.length;S+=2)_.push(parseInt(p.slice(S,S+2),16));return Uint8Array.from(_)}(function(p){const _="0123456789abcdef";function S(En){let ct,Bn="";for(ct=0;ct<=3;ct++)Bn+=_.charAt(En>>8*ct+4&15)+_.charAt(En>>8*ct&15);return Bn}function I(En,ct){const Bn=(65535&En)+(65535&ct);return(En>>16)+(ct>>16)+(Bn>>16)<<16|65535&Bn}function b(En,ct,Bn,On,Lr,$i){return I(function(Rr,_a){return Rr<<_a|Rr>>>32-_a}(I(I(ct,En),I(On,$i)),Lr),Bn)}function A(En,ct,Bn,On,Lr,$i,Rr){return b(ct&Bn|~ct&On,En,ct,Lr,$i,Rr)}function F(En,ct,Bn,On,Lr,$i,Rr){return b(ct&On|Bn&~On,En,ct,Lr,$i,Rr)}function W(En,ct,Bn,On,Lr,$i,Rr){return b(ct^Bn^On,En,ct,Lr,$i,Rr)}function Z(En,ct,Bn,On,Lr,$i,Rr){return b(Bn^(ct|~On),En,ct,Lr,$i,Rr)}const ee=function(En){let ct;const Bn=1+(En.length+8>>6),On=new Array(16*Bn);for(ct=0;ct<16*Bn;ct++)On[ct]=0;for(ct=0;ct<En.length;ct++)On[ct>>2]|=En.charCodeAt(ct)<<ct%4*8;return On[ct>>2]|=128<<ct%4*8,On[16*Bn-2]=8*En.length,On}(p);let te,Ee,ye,Pe,Xe,ke=1732584193,Ve=-271733879,xe=-1732584194,$e=271733878;for(te=0;te<ee.length;te+=16)Ee=ke,ye=Ve,Pe=xe,Xe=$e,ke=A(ke,Ve,xe,$e,ee[te+0],7,-680876936),$e=A($e,ke,Ve,xe,ee[te+1],12,-389564586),xe=A(xe,$e,ke,Ve,ee[te+2],17,606105819),Ve=A(Ve,xe,$e,ke,ee[te+3],22,-1044525330),ke=A(ke,Ve,xe,$e,ee[te+4],7,-176418897),$e=A($e,ke,Ve,xe,ee[te+5],12,1200080426),xe=A(xe,$e,ke,Ve,ee[te+6],17,-1473231341),Ve=A(Ve,xe,$e,ke,ee[te+7],22,-45705983),ke=A(ke,Ve,xe,$e,ee[te+8],7,1770035416),$e=A($e,ke,Ve,xe,ee[te+9],12,-1958414417),xe=A(xe,$e,ke,Ve,ee[te+10],17,-42063),Ve=A(Ve,xe,$e,ke,ee[te+11],22,-1990404162),ke=A(ke,Ve,xe,$e,ee[te+12],7,1804603682),$e=A($e,ke,Ve,xe,ee[te+13],12,-40341101),xe=A(xe,$e,ke,Ve,ee[te+14],17,-1502002290),Ve=A(Ve,xe,$e,ke,ee[te+15],22,1236535329),ke=F(ke,Ve,xe,$e,ee[te+1],5,-165796510),$e=F($e,ke,Ve,xe,ee[te+6],9,-1069501632),xe=F(xe,$e,ke,Ve,ee[te+11],14,643717713),Ve=F(Ve,xe,$e,ke,ee[te+0],20,-373897302),ke=F(ke,Ve,xe,$e,ee[te+5],5,-701558691),$e=F($e,ke,Ve,xe,ee[te+10],9,38016083),xe=F(xe,$e,ke,Ve,ee[te+15],14,-660478335),Ve=F(Ve,xe,$e,ke,ee[te+4],20,-405537848),ke=F(ke,Ve,xe,$e,ee[te+9],5,568446438),$e=F($e,ke,Ve,xe,ee[te+14],9,-1019803690),xe=F(xe,$e,ke,Ve,ee[te+3],14,-187363961),Ve=F(Ve,xe,$e,ke,ee[te+8],20,1163531501),ke=F(ke,Ve,xe,$e,ee[te+13],5,-1444681467),$e=F($e,ke,Ve,xe,ee[te+2],9,-51403784),xe=F(xe,$e,ke,Ve,ee[te+7],14,1735328473),Ve=F(Ve,xe,$e,ke,ee[te+12],20,-1926607734),ke=W(ke,Ve,xe,$e,ee[te+5],4,-378558),$e=W($e,ke,Ve,xe,ee[te+8],11,-2022574463),xe=W(xe,$e,ke,Ve,ee[te+11],16,1839030562),Ve=W(Ve,xe,$e,ke,ee[te+14],23,-35309556),ke=W(ke,Ve,xe,$e,ee[te+1],4,-1530992060),$e=W($e,ke,Ve,xe,ee[te+4],11,1272893353),xe=W(xe,$e,ke,Ve,ee[te+7],16,-155497632),Ve=W(Ve,xe,$e,ke,ee[te+10],23,-1094730640),ke=W(ke,Ve,xe,$e,ee[te+13],4,681279174),$e=W($e,ke,Ve,xe,ee[te+0],11,-358537222),xe=W(xe,$e,ke,Ve,ee[te+3],16,-722521979),Ve=W(Ve,xe,$e,ke,ee[te+6],23,76029189),ke=W(ke,Ve,xe,$e,ee[te+9],4,-640364487),$e=W($e,ke,Ve,xe,ee[te+12],11,-421815835),xe=W(xe,$e,ke,Ve,ee[te+15],16,530742520),Ve=W(Ve,xe,$e,ke,ee[te+2],23,-995338651),ke=Z(ke,Ve,xe,$e,ee[te+0],6,-198630844),$e=Z($e,ke,Ve,xe,ee[te+7],10,1126891415),xe=Z(xe,$e,ke,Ve,ee[te+14],15,-1416354905),Ve=Z(Ve,xe,$e,ke,ee[te+5],21,-57434055),ke=Z(ke,Ve,xe,$e,ee[te+12],6,1700485571),$e=Z($e,ke,Ve,xe,ee[te+3],10,-1894986606),xe=Z(xe,$e,ke,Ve,ee[te+10],15,-1051523),Ve=Z(Ve,xe,$e,ke,ee[te+1],21,-2054922799),ke=Z(ke,Ve,xe,$e,ee[te+8],6,1873313359),$e=Z($e,ke,Ve,xe,ee[te+15],10,-30611744),xe=Z(xe,$e,ke,Ve,ee[te+6],15,-1560198380),Ve=Z(Ve,xe,$e,ke,ee[te+13],21,1309151649),ke=Z(ke,Ve,xe,$e,ee[te+4],6,-145523070),$e=Z($e,ke,Ve,xe,ee[te+11],10,-1120210379),xe=Z(xe,$e,ke,Ve,ee[te+2],15,718787259),Ve=Z(Ve,xe,$e,ke,ee[te+9],21,-343485551),ke=I(ke,Ee),Ve=I(Ve,ye),xe=I(xe,Pe),$e=I($e,Xe);return S(ke)+S(Ve)+S(xe)+S($e)}(""+r+o)).slice(0,16),l=s.slice(0,12),d=await window.crypto.subtle.importKey("raw",s,"AES-GCM",!0,["encrypt"]);return new Uint8Array(await window.crypto.subtle.encrypt({name:"AES-GCM",iv:l},d,n))},WV=async(n,r,o)=>await gJ(n.buffer,r,o);function GV(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}const vJ=new Map([["moderation",1],["supervise",2]]);class Tb extends ur{get connectionState(){return this._connectionState}set connectionState(r){if(this._connectionState===r)return;const o=this._connectionState;this._connectionState=r,this.emit(Jr.CONNECTION_STATE_CHANGE,o,r)}get inspectType(){return this._inspectType}set inspectType(r){var o;this._inspectMode=Gl(o=r.map(s=>vJ.get(s)||0)).call(o,(s,l)=>s+l),this._inspectType=r}get quality(){return this._quality}set quality(r){this._quality=r>1?1:r<.1?.1:r,this.qualityTimer&&(window.clearTimeout(this.qualityTimer),this.qualityTimer=null),this._quality>=1||(this.qualityTimer=window.setTimeout(()=>{this.quality=this._quality/this.qualityRatio},6e4))}constructor(r){super(),L(this,"name","AgoraRTCVideoContentInspect"),L(this,"_connectionState",os.CONNECTING),L(this,"_innerConnectionState",void 0),L(this,"sequence",0),L(this,"inspectStartTime",void 0),L(this,"workerManagerConnection",void 0),L(this,"workerConnection",void 0),L(this,"workerMessageLengthLimit",void 0),L(this,"inspectIntervalMinimum",void 0),L(this,"qualityRatio",void 0),L(this,"_connectInfo",void 0),L(this,"_cancelTokenSource",ns.CancelToken.source()),L(this,"_retryConfig",void 0),L(this,"wmSequence",0),L(this,"inspectInterval",void 0),L(this,"inspectTimer",null),L(this,"ossFilePrefix",void 0),L(this,"extraInfo",void 0),L(this,"_inspectType",void 0),L(this,"_inspectMode",void 0),L(this,"_quality",1),L(this,"qualityTimer",null),L(this,"_inspectId",void 0),L(this,"_needWorkUrlOnly",!1),L(this,"inspectImage",()=>{if(this.connectionState!==os.CONNECTED)throw new re(q.OPERATION_ABORTED,"content inspect service connection status is ".concat(this.connectionState));this.inspectTimer&&(window.clearInterval(this.inspectTimer),this.inspectTimer=null),this.inspectTimer=window.setInterval(()=>{this.connectionState===os.CONNECTED?this.requestToInspectImage():j.debug("[".concat(this._inspectId,"] Inspect State is not connected , "),this.connectionState)},this.inspectInterval<this.inspectIntervalMinimum?this.inspectIntervalMinimum:this.inspectInterval),this.requestToInspectImage()}),this._inspectId=Yn(5,"inspect-"),this.workerMessageLengthLimit=de("VIDEO_INSPECT_WORKER_MESSAGE_LENGTH_LIMIT"),this.inspectIntervalMinimum=de("VIDEO_INSPECT_INTERVAL_MINIMUM"),this.qualityRatio=de("VIDEO_INSPECT_QUALITY_RATIO"),this.inspectInterval=r.interval,this.ossFilePrefix=r.ossFilePrefix,this.extraInfo=r.extraInfo,this.inspectType=r.inspectType,this.inspectStartTime=Number(Date.now()),this.workerManagerConnection=new Hf("worker-manager-"+this._inspectId,Ur),this.on(Jr.STATE_CHANGE,(o,s)=>{this._innerConnectionState=o,j.debug("[".concat(this._inspectId,"] Inspect operation :").concat(as[o]," ").concat(s||""))}),this.handleWorkerManagerEvents(),this.workerConnection=new Hf("worker-"+this._inspectId,Ur),this.handleWorkerEvents()}async init(r,o){this.emit(Jr.STATE_CHANGE,as.CONNECT_AP),this._connectInfo=r;const s=this._cancelTokenSource.token;return this._retryConfig=o,new Le((l,d)=>{this.on(Jr.CONNECTION_STATE_CHANGE,(p,_)=>{_===os.CONNECTED&&l()}),this.requestAP(r,s,o).then(p=>{this.connectWorkerManager(p)}).catch(p=>{d(p)})})}async requestAP(r,o,s){const l=de("WEBCS_DOMAIN").map(_=>"https://".concat(_,"/api/v1")),d=await function(_,S,I,b){let{appId:A,areaCode:F,cname:W,sid:Z,token:ee,uid:te}=S;c0++;const Ee="image_moderation_api",ye={service_name:Ee,json_body:JSON.stringify({appId:A,areaCode:F,cname:W,command:"allocateEdge",requestId:c0,seq:c0,sid:Z,token:ee,ts:Date.now(),uid:te+""})};let Pe,Xe,ke=_[0];return rl(async()=>{Pe=Date.now();const Ve=await gc(ke,{data:ye,cancelToken:I,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"},params:{action:"wrtc_gateway"}});if(Xe=Date.now()-Pe,Ve.code!==0){const ct=new re(q.UNEXPECTED_RESPONSE,"image inspect ap error, code"+Ve.code,{retry:!0,responseTime:Xe});throw j.error(ct.toString()),ct}const xe=JSON.parse(Ve.json_body);if(xe.code!==200){const ct=new re(q.UNEXPECTED_RESPONSE,"image inspect ap error, code: ".concat(xe.code,", reason: ").concat(xe.reason),{code:xe.code,responseTime:Xe});throw j.error(ct.toString()),ct}if(!xe.servers||!Array.isArray(xe.servers)||xe.servers.length===0){const ct=new re(q.UNEXPECTED_RESPONSE,"image inspect ap empty server",{code:xe.code,responseTime:Xe});throw j.error(ct.toString()),ct}const $e=de("VIDEO_INSPECT_WORKER_MANAGER_HOST"),En=de("VIDEO_INSPECT_WORKER_MANAGER_PORT");return{addressList:xe.servers.map(ct=>{let{address:Bn,wss:On}=ct;if(Bn&&On)return"wss://".concat(Bn.replace(/\./g,"-"),".").concat($e,":").concat(En||On)}).filter(ct=>!!ct),workerToken:xe.workerToken,vid:xe.vid,responseTime:Xe}},(Ve,xe)=>(Ze.apworkerEvent(Z,{success:!0,sc:200,serviceName:Ee,responseDetail:JSON.stringify(Ve.addressList),firstSuccess:xe===0,responseTime:Xe,serverIp:_[xe%_.length]}),!1),(Ve,xe)=>(Ze.apworkerEvent(Z,{success:!1,sc:Ve.data&&Ve.data.code||200,serviceName:Ee,responseTime:Xe,serverIp:_[xe%_.length]}),!!(Ve.code!==q.OPERATION_ABORTED&&Ve.code!==q.UNEXPECTED_RESPONSE||Ve.data&&Ve.data.retry)&&(ke=_[(xe+1)%_.length],!0)),b)}(l,r,o,s);this.emit(Jr.STATE_CHANGE,as.AP_CONNECTED);const{addressList:p}=d;return this.wmSequence++,p}async connectWorkerManager(r){let o=arguments.length>1&&arguments[1]!==void 0&&arguments[1];this._needWorkUrlOnly=o,this.emit(Jr.STATE_CHANGE,as.CONNECT_WORKER_MANAGER),await this.workerManagerConnection.init(r,1e4)}async connectWorker(r){await this.workerConnection.init([r])}handleWorkerManagerEvents(){this.workerManagerConnection.on(bt.CONNECTED,async()=>{this.emit(Jr.STATE_CHANGE,as.WORKER_MANAGER_CONNECTED,this.workerManagerConnection.url),this.workerManagerConnection.sendMessage({appId:this._connectInfo.appId,cname:this._connectInfo.cname,uid:this._connectInfo.uid+"",sdkVersion:"4.18.2",sid:this._connectInfo.sid,seq:this.wmSequence,ts:Number(Date.now()),requestId:Math.floor(1e12*Math.random()),allocate:!0,clientRequest:{command:"join"}},!0)}),this.workerManagerConnection.on(bt.CLOSED,()=>{this._innerConnectionState<as.GET_WORKER_MANAGER_RESPONSE&&j.debug("[".concat(this._inspectId,"] Inspect worker manager is closed before connecting worker"))}),this.workerManagerConnection.on(bt.FAILED,()=>{this._innerConnectionState<as.GET_WORKER_MANAGER_RESPONSE&&j.debug("[".concat(this._inspectId,"] Connecting inspect worker manager is failed before connecting worker"))}),this.workerManagerConnection.on(bt.RECONNECTING,()=>{this._innerConnectionState<as.GET_WORKER_MANAGER_RESPONSE&&j.debug("[".concat(this._inspectId,"] Inspect worker manager is reconnecting before connecting worker"))}),this.workerManagerConnection.on(bt.ON_MESSAGE,async r=>{this.emit(Jr.STATE_CHANGE,as.GET_WORKER_MANAGER_RESPONSE);const o=this.workerManagerConnection.url;this.workerManagerConnection.close();const s=JSON.parse(r.data);if(s.code!==200)throw j.error("[".concat(this._inspectId,"] Unexpected code ").concat(s.code," from worker manager")),new re(q.UNEXPECTED_RESPONSE,"response code of worker is unexpected",s);if(!(s.serverResponse&&s.serverResponse.portWss&&o))throw j.error("[".concat(this._inspectId,"] Unexpected content from worker manager : ").concat(JSON.stringify(s))),new re(q.UNEXPECTED_RESPONSE,"response content of worker is unexpected",s);{const l=de("VIDEO_INSPECT_WORKER_PORT")||s.serverResponse.portWss,d=o.replace(/:\d+\/?$/,":".concat(l));this.emit(Jr.STATE_CHANGE,as.CONNECT_WORKER,d),this._needWorkUrlOnly?this.emit(Jr.REQUEST_NEW_WORKER_URL,d):await this.connectWorker(d)}}),this.workerManagerConnection.on(bt.WILL_RECONNECT,(r,o)=>{o(r)}),this.workerManagerConnection.on(bt.REQUEST_NEW_URLS,(r,o)=>{this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then(r).catch(o)})}handleWorkerEvents(){this.workerConnection.on(bt.CONNECTED,async()=>{this.emit(Jr.STATE_CHANGE,as.WORKER_CONNECTED,this.workerConnection.url),this.connectionState=os.CONNECTED}),this.workerConnection.on(bt.ON_MESSAGE,async r=>{if(r.data instanceof ArrayBuffer){const s=lJ(new Uint8Array(r.data));if(de("SHOW_VIDEO_INSPECT_WORKER_MESSAGE")&&j.debug("[".concat(this._inspectId,"] Response message for worker of inspect content "),JSON.stringify(s)),s.code===200){if(Array.isArray(this.inspectType)&&this.inspectType.length===1&&this.inspectType[0]==="supervise")return void this.emit(Jr.INSPECT_RESULT,void 0,void 0);if(s.data&&s.data.scorePorn&&s.data.scoreSexy&&s.data.scoreNeutral){var o;const l={porn:s.data.scorePorn,sexy:s.data.scoreSexy,neutral:s.data.scoreNeutral},d=Gl(o=Object.keys(l)).call(o,(_,S)=>l[_]>l[S]?_:S,"porn"),p=Object.keys(l).find(_=>_===d);this.emit(Jr.INSPECT_RESULT,p)}else this.emit(Jr.INSPECT_RESULT,void 0,new re(q.UNEXPECTED_RESPONSE,s.code+"","There is an unexpected data on message"))}else this.emit(Jr.INSPECT_RESULT,void 0,new re(q.UNEXPECTED_RESPONSE,s.code+"",s.msg))}else j.error("[".concat(this._inspectId,"] Unexpected message type from worker")),this.emit(Jr.INSPECT_RESULT,void 0,new re(q.UNEXPECTED_RESPONSE,"invalid worker message type"))}),this.workerConnection.on(bt.CLOSED,()=>{this.connectionState=os.CLOSED}),this.workerConnection.on(bt.FAILED,()=>{this.connectionState=os.CLOSED}),this.workerConnection.on(bt.RECONNECTING,()=>{this.connectionState=this.connectionState===os.CONNECTED?os.RECONNECTING:os.CONNECTING}),this.workerConnection.on(bt.WILL_RECONNECT,(r,o)=>{r==="recover"&&o(r),o("tryNext")}),this.workerConnection.on(bt.REQUEST_NEW_URLS,(r,o)=>{this.workerManagerConnection.close(),this.once(Jr.REQUEST_NEW_WORKER_URL,s=>{r([s])}),this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then(s=>{this.connectWorkerManager(s,!0)}).catch(s=>{o(s)})})}static intToLong(r){return{low:r|=0,high:r>>31,unsigned:r>=0}}async requestToInspectImage(){this.sequence++;const r=Ec(this,Jr.CLIENT_LOCAL_VIDEO_TRACK),o={appId:this._connectInfo.appId,cname:this._connectInfo.cname,cid:this._connectInfo.cid,sid:this._connectInfo.sid,uid:this._connectInfo.uid,vid:this._connectInfo.vid};if(r){if(!r.isPlaying)return void this.emit(Jr.INSPECT_RESULT,void 0,new re(q.INVALID_OPERATION,"Only the track being played can be inspected"));const s=await this.generateRequestData(r,o);this.workerConnection.sendMessage(s,!0,!0)}else this.emit(Jr.INSPECT_RESULT,void 0,new re(q.INVALID_OPERATION,"Only the track being published can be inspected"))}async generateRequestData(r,o){let{appId:s,cname:l,cid:d,vid:p,sid:_,uid:S}=o;const I=Date.now(),b=await r.getCurrentFrameImage("image/jpeg",this.quality),A=await WV(b,s,l),F=this.sequence+"-"+d+"-"+S+"-"+I+"-"+Yn(12,""),W={appId:s,cid:d,cname:l,deviceId:"",elapse:Tb.intToLong(Number(I-this.inspectStartTime)),fileSize:A.byteLength,jpgEncryption:2,height:b.height,width:b.width,jpg:A,networkType:6,osType:7,requestId:F,sdkVersion:"4.18.2",sequence:this.sequence,sid:_,timestamp:Tb.intToLong(I),uid:S,vid:p,service:this._inspectMode,callbackData:this.extraInfo,ossFilePrefix:this.ossFilePrefix};this.extraInfo===void 0&&delete W.callbackData,this.ossFilePrefix===void 0&&delete W.ossFilePrefix;const Z=cJ(W);if(Z.byteLength<this.workerMessageLengthLimit){if(de("SHOW_VIDEO_INSPECT_WORKER_MESSAGE")){const ee=function(te){for(var Ee=1;Ee<arguments.length;Ee++){var ye=arguments[Ee]!=null?arguments[Ee]:{};Ee%2?GV(Object(ye),!0).forEach(function(Pe){L(te,Pe,ye[Pe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(te,Object.getOwnPropertyDescriptors(ye)):GV(Object(ye)).forEach(function(Pe){Object.defineProperty(te,Pe,Object.getOwnPropertyDescriptor(ye,Pe))})}return te}({},W);delete ee.jpg,j.debug("[".concat(this._inspectId,"] Request message for worker of inspect content "),JSON.stringify(ee))}return Z}{const ee=this.quality*this.qualityRatio;return this.quality=ee,await this.generateRequestData(r,{appId:s,cname:l,cid:d,vid:p,sid:_,uid:S})}}close(){this._cancelTokenSource.cancel(),this._cancelTokenSource=ns.CancelToken.source(),this.workerManagerConnection&&this.workerManagerConnection.close(),this.workerConnection&&this.workerConnection.close(),this.inspectTimer&&window.clearInterval(this.inspectTimer),this.inspectTimer=null,this.connectionState=os.CLOSED,this.emit(Jr.STATE_CHANGE,as.CLOSED)}}function EJ(n){let r=function(){const o=yJ.pop();return o?(o.offset=o.limit=0,o):{bytes:new Uint8Array(64),offset:0,limit:0}}();return function(o,s){let l=o.appId;l!==void 0&&(Dr(s,10),qf(s,l));let d=o.cid;d!==void 0&&(Dr(s,16),Dr(s,d));let p=o.cname;p!==void 0&&(Dr(s,26),qf(s,p));let _=o.deviceId;_!==void 0&&(Dr(s,34),qf(s,_));let S=o.elapse;S!==void 0&&(Dr(s,40),hh(s,S));let I=o.fileSize;I!==void 0&&(Dr(s,48),hh(s,g0(I)));let b=o.height;b!==void 0&&(Dr(s,56),hh(s,g0(b)));let A=o.jpg;A!==void 0&&(Dr(s,66),Dr(s,A.length),KV(s,A));let F=o.networkType;F!==void 0&&(Dr(s,72),hh(s,g0(F)));let W=o.osType;W!==void 0&&(Dr(s,80),hh(s,g0(W)));let Z=o.requestId;Z!==void 0&&(Dr(s,90),qf(s,Z));let ee=o.sdkVersion;ee!==void 0&&(Dr(s,98),qf(s,ee));let te=o.sequence;te!==void 0&&(Dr(s,104),hh(s,g0(te)));let Ee=o.sid;Ee!==void 0&&(Dr(s,114),qf(s,Ee));let ye=o.timestamp;ye!==void 0&&(Dr(s,120),hh(s,ye));let Pe=o.uid;Pe!==void 0&&(Dr(s,128),Dr(s,Pe));let Xe=o.vid;Xe!==void 0&&(Dr(s,136),Dr(s,Xe));let ke=o.width;ke!==void 0&&(Dr(s,144),hh(s,g0(ke)));let Ve=o.service;Ve!==void 0&&(Dr(s,152),Dr(s,Ve));let xe=o.callbackData;xe!==void 0&&(Dr(s,162),Dr(s,xe.length),KV(s,xe));let $e=o.ticket;$e!==void 0&&(Dr(s,170),qf(s,$e))}(n,r),function(o){let s=o.bytes,l=o.limit;return s.length===l?s:s.subarray(0,l)}(r)}function _J(n){return function(o){let s={};e:for(;!CJ(o);){let l=r_(o);switch(l>>>3){case 0:break e;case 1:s.code=r_(o);break;case 2:s.msg=qV(o,r_(o));break;case 3:s.requestId=qV(o,r_(o));break;case 4:s.timestamp=TJ(o,!1);break;default:SJ(o,7&l)}}return s}({bytes:r=n,offset:0,limit:r.length});var r}function SJ(n,r){switch(r){case 0:for(;128&Cc(n););break;case 2:Sx(n,r_(n));break;case 5:Sx(n,4);break;case 1:Sx(n,8);break;default:throw new Error("Unimplemented type: "+r)}}function g0(n){return{low:n|=0,high:n>>31,unsigned:n>=0}}let yJ=[];function Sx(n,r){if(n.offset+r>n.limit)throw new Error("Skip past limit");n.offset+=r}function CJ(n){return n.offset>=n.limit}function bb(n,r){let o=n.bytes,s=n.offset,l=n.limit,d=s+r;if(d>o.length){let p=new Uint8Array(2*d);p.set(o),n.bytes=p}return n.offset=d,d>l&&(n.limit=d),s}function zV(n,r){let o=n.offset;if(o+r>n.limit)throw new Error("Read past limit");return n.offset+=r,o}function KV(n,r){let o=bb(n,r.length);n.bytes.set(r,o)}function qV(n,r){let o=zV(n,r),s=String.fromCharCode,l=n.bytes,d="�",p="";for(let _=0;_<r;_++){let S,I,b,A,F=l[_+o];128&F?(224&F)==192?_+1>=r?p+=d:(S=l[_+o+1],(192&S)!=128?p+=d:(A=(31&F)<<6|63&S,A<128?p+=d:(p+=s(A),_++))):(240&F)==224?_+2>=r?p+=d:(S=l[_+o+1],I=l[_+o+2],(49344&(S|I<<8))!=32896?p+=d:(A=(15&F)<<12|(63&S)<<6|63&I,A<2048||A>=55296&&A<=57343?p+=d:(p+=s(A),_+=2))):(248&F)==240?_+3>=r?p+=d:(S=l[_+o+1],I=l[_+o+2],b=l[_+o+3],(12632256&(S|I<<8|b<<16))!=8421504?p+=d:(A=(7&F)<<18|(63&S)<<12|(63&I)<<6|63&b,A<65536||A>1114111?p+=d:(A-=65536,p+=s(55296+(A>>10),56320+(1023&A)),_+=3))):p+=d:p+=s(F)}return p}function qf(n,r){let o=r.length,s=0;for(let p=0;p<o;p++){let _=r.charCodeAt(p);_>=55296&&_<=56319&&p+1<o&&(_=(_<<10)+r.charCodeAt(++p)-56613888),s+=_<128?1:_<2048?2:_<65536?3:4}Dr(n,s);let l=bb(n,s),d=n.bytes;for(let p=0;p<o;p++){let _=r.charCodeAt(p);_>=55296&&_<=56319&&p+1<o&&(_=(_<<10)+r.charCodeAt(++p)-56613888),_<128?d[l++]=_:(_<2048?d[l++]=_>>6&31|192:(_<65536?d[l++]=_>>12&15|224:(d[l++]=_>>18&7|240,d[l++]=_>>12&63|128),d[l++]=_>>6&63|128),d[l++]=63&_|128)}}function Cc(n){return n.bytes[zV(n,1)]}function YV(n,r){let o=bb(n,1);n.bytes[o]=r}function r_(n){let r,o=0,s=0;do r=Cc(n),o<32&&(s|=(127&r)<<o),o+=7;while(128&r);return s}function Dr(n,r){for(r>>>=0;r>=128;)YV(n,127&r|128),r>>>=7;YV(n,r)}function TJ(n,r){let o,s=0,l=0,d=0;return o=Cc(n),s=127&o,128&o&&(o=Cc(n),s|=(127&o)<<7,128&o&&(o=Cc(n),s|=(127&o)<<14,128&o&&(o=Cc(n),s|=(127&o)<<21,128&o&&(o=Cc(n),l=127&o,128&o&&(o=Cc(n),l|=(127&o)<<7,128&o&&(o=Cc(n),l|=(127&o)<<14,128&o&&(o=Cc(n),l|=(127&o)<<21,128&o&&(o=Cc(n),d=127&o,128&o&&(o=Cc(n),d|=(127&o)<<7))))))))),{low:s|l<<28,high:l>>>4|d<<24,unsigned:r}}function hh(n,r){let o=r.low>>>0,s=(r.low>>>28|r.high<<4)>>>0,l=r.high>>>24,d=l===0?s===0?o<16384?o<128?1:2:o<1<<21?3:4:s<16384?s<128?5:6:s<1<<21?7:8:l<128?9:10,p=bb(n,d),_=n.bytes;switch(d){case 10:_[p+9]=l>>>7&1;case 9:_[p+8]=d!==9?128|l:127&l;case 8:_[p+7]=d!==8?s>>>21|128:s>>>21&127;case 7:_[p+6]=d!==7?s>>>14|128:s>>>14&127;case 6:_[p+5]=d!==6?s>>>7|128:s>>>7&127;case 5:_[p+4]=d!==5?128|s:127&s;case 4:_[p+3]=d!==4?o>>>21|128:o>>>21&127;case 3:_[p+2]=d!==3?o>>>14|128:o>>>14&127;case 2:_[p+1]=d!==2?o>>>7|128:o>>>7&127;case 1:_[p]=d!==1?128|o:127&o}}const XV={},JV={},QV=4294967296,ZV=18446744073709552e3,ej=ZV/2,yx=nj(0,!0),tj=nj(0),bJ=v0(0,-2147483648,!1),RJ=v0(-1,2147483647,!1),IJ=v0(-1,-1,!0);function nj(n,r){let o,s,l;return r?(l=0<=(n>>>=0)&&n<256)&&(s=JV[n],s)?s:(o=v0(n,0,!0),l&&(JV[n]=o),o):(l=-128<=(n|=0)&&n<128)&&(s=XV[n],s)?s:(o=v0(n,n<0?-1:0,!1),l&&(XV[n]=o),o)}function v0(n,r,o){return{low:0|n,high:0|r,unsigned:!!o}}function wJ(n,r){if(isNaN(n))return r?yx:tj;if(r){if(n<0)return yx;if(n>=ZV)return IJ}else{if(n<=-ej)return bJ;if(n+1>=ej)return RJ}return n<0?r?yx:tj:v0(n%QV|0,n/QV|0,r)}function rj(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}class Cx extends ur{get connectionState(){return this._connectionState}set connectionState(r){if(this._connectionState===r)return;const o=this._connectionState;this._connectionState=r,this.emit(Ps.CONNECTION_STATE_CHANGE,r,o)}get quality(){return this._quality}set quality(r){this._quality=r>1?1:r<.1?.1:r,this._qualityTimer&&(window.clearTimeout(this._qualityTimer),this._qualityTimer=null),this._quality>=1||(this._qualityTimer=window.setTimeout(()=>{this.quality=this._quality/this._qualityRatio},6e4))}constructor(r){var o;super(),L(this,"name","AgoraRTCImageModeration"),L(this,"_connectionState",Da.CONNECTING),L(this,"_sequence",0),L(this,"_moderationStartTime",void 0),L(this,"_workerConnection",void 0),L(this,"_workerMessageLengthLimit",void 0),L(this,"_qualityRatio",void 0),L(this,"_connectInfo",void 0),L(this,"_cancelTokenSource",ns.CancelToken.source()),L(this,"_retryConfig",void 0),L(this,"_moderationInterval",void 0),L(this,"_moderationTimer",null),L(this,"_moderationMode",1),L(this,"_quality",1),L(this,"_qualityTimer",null),L(this,"_ticket",void 0),L(this,"_moderationIntervalMinimum",void 0),L(this,"_uploadFailedNum",0),L(this,"_uploadNum",0),L(this,"_uploadTimer",null),L(this,"_moderationId",void 0),L(this,"inspectImage",()=>{if(this.connectionState!==Da.CONNECTED)throw new re(q.OPERATION_ABORTED,"image moderation service connection status is ".concat(this.connectionState));this._moderationTimer&&(window.clearInterval(this._moderationTimer),this._moderationTimer=null),this._moderationTimer=window.setInterval(()=>{this.connectionState===Da.CONNECTED?this.requestToInspectImage():j.debug("[".concat(this._moderationId,"] Moderation State is not connected , "),this.connectionState)},this._moderationInterval<this._moderationIntervalMinimum?this._moderationIntervalMinimum:this._moderationInterval),this.requestToInspectImage()}),this._moderationId=Yn(5,"image-moderation-"),this._workerMessageLengthLimit=de("IMAGE_MODERATION_WORKER_MESSAGE_LENGTH_LIMIT"),this._moderationIntervalMinimum=de("IMAGE_MODERATION_INTERVAL_MINIMUM"),this._moderationInterval=(o=r.interval)!==null&&o!==void 0?o:1e3,this._qualityRatio=de("IMAGE_MODERATION_QUALITY_RATIO"),this._moderationStartTime=Number(Date.now()),this._workerConnection=new Hf("worker-"+this._moderationId,Ur),this.on(Ps.STATE_CHANGE,(s,l)=>{j.debug("[".concat(this._moderationId,"] Moderation operation :").concat(rh[s]," ").concat(l||""))}),this.handleWorkerEvents()}async init(r,o){this.emit(Ps.STATE_CHANGE,rh.CONNECT_AP),this._connectInfo=r;const s=this._cancelTokenSource.token;return this._retryConfig=o,new Le((l,d)=>{this.on(Ps.CONNECTION_STATE_CHANGE,(p,_)=>{p===Da.CONNECTED&&l()}),this.requestAP(r,s,o).then(p=>{this.connectWorker(p)}).catch(p=>{d(p)})})}updateConfig(r){var o;this._moderationInterval=(o=r.interval)!==null&&o!==void 0?o:1e3,j.debug("[".concat(this._moderationId,"] updateConfig: ").concat(JSON.stringify(r))),this.connectionState===Da.CONNECTED&&this.inspectImage()}async requestAP(r,o,s){const l=de("WEBCS_DOMAIN").map(S=>"https://".concat(S,"/api/v1")),d=await function(S,I,b,A){let{appId:F,areaCode:W,cname:Z,sid:ee,token:te,uid:Ee}=I;c0++;const ye="moderation_plugin",Pe={service_name:ye,json_body:JSON.stringify({appId:F,areaCode:W,cname:Z,command:"allocateEdge",requestId:c0,seq:c0,sid:ee,appToken:te,ts:Date.now(),uid:Ee+""})};let Xe,ke,Ve=S[0];return rl(async()=>{Xe=Date.now();const xe=await gc(Ve,{data:Pe,cancelToken:b,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"},params:{action:"wrtc_gateway"}});if(ke=Date.now()-Xe,xe.code!==0){const ct=new re(q.UNEXPECTED_RESPONSE,"moderation plugin ap error, code"+xe.code,{retry:!0,responseTime:ke});throw j.error(ct.toString()),ct}const $e=JSON.parse(xe.json_body);if($e.code!==200){const ct=new re(q.UNEXPECTED_RESPONSE,"moderation plugin ap error, code: ".concat($e.code,", reason: ").concat($e.reason),{code:$e.code,responseTime:ke});throw j.error(ct.toString()),ct}if(!$e.servers||!Array.isArray($e.servers)||$e.servers.length===0){const ct=new re(q.UNEXPECTED_RESPONSE,"moderation plugin ap empty server",{code:$e.code,responseTime:ke});throw j.error(ct.toString()),ct}if(!$e.servers.some(ct=>!!ct.wss)){const ct=new re(q.UNEXPECTED_RESPONSE,"moderation plugin ap empty port",{code:$e.code,responseTime:ke});throw j.error(ct.toString()),ct}const En=de("IMAGE_MODERATION_WORKER_HOST");return{addressList:$e.servers.map(ct=>{let{address:Bn,wss:On}=ct;if(Bn&&On)return"wss://".concat(Bn.replace(/\./g,"-"),".").concat(En,":").concat(On,"/moderation")}).filter(ct=>!!ct),workerToken:$e.workerToken,vid:$e.vid,ticket:$e.appTicket,responseTime:ke}},(xe,$e)=>(Ze.apworkerEvent(ee,{success:!0,sc:200,serviceName:ye,responseDetail:JSON.stringify(xe.addressList),firstSuccess:$e===0,responseTime:ke,serverIp:S[$e%S.length]}),!1),(xe,$e)=>(Ze.apworkerEvent(ee,{success:!1,sc:xe.data&&xe.data.code||200,serviceName:ye,responseTime:ke,serverIp:S[$e%S.length]}),!!(xe.code!==q.OPERATION_ABORTED&&xe.code!==q.UNEXPECTED_RESPONSE||xe.data&&xe.data.retry)&&(Ve=S[($e+1)%S.length],!0)),A)}(l,r,o,s);this.emit(Ps.STATE_CHANGE,rh.AP_CONNECTED);const{addressList:p,ticket:_}=d;return this._ticket=_,p}async connectWorker(r){this.emit(Ps.STATE_CHANGE,rh.CONNECT_WORKER),await this._workerConnection.init(r,1e4)}handleWorkerEvents(){this._workerConnection.on(bt.CONNECTED,async()=>{this.emit(Ps.STATE_CHANGE,rh.WORKER_CONNECTED,this._workerConnection.url),this.connectionState=Da.CONNECTED}),this._workerConnection.on(bt.CLOSED,()=>{this.connectionState=Da.CLOSED}),this._workerConnection.on(bt.FAILED,()=>{this.connectionState=Da.CLOSED}),this._workerConnection.on(bt.RECONNECTING,()=>{this.connectionState=this.connectionState===Da.CONNECTED?Da.RECONNECTING:Da.CONNECTING}),this._workerConnection.on(bt.ON_MESSAGE,async r=>{if(r.data instanceof ArrayBuffer){const o=_J(new Uint8Array(r.data));de("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")&&j.debug("[".concat(this._moderationId,"] Response message for worker of image moderation "),JSON.stringify(o)),this._uploadNum++,o.code===void 0||o.code===0||(this._uploadFailedNum++,j.error("[".concat(this._moderationId,"] Error response from worke, code is ").concat(o.code,", msg is ").concat(o.msg)),this._uploadTimer||(this._uploadTimer=window.setTimeout(()=>{Ze.reportApiInvoke(this._connectInfo.sid||null,{name:Fr.IMAGE_MODERATION_UPLOAD,options:[this._uploadFailedNum,this._uploadNum,o.code],tag:cr.TRACER}).onError(new re(q.IMAGE_MODERATION_UPLOAD_FAILED,o.msg)),this._uploadTimer=null},de("IMAGE_MODERATION_UPLOAD_REPORT_INTERVAL"))))}else j.error("[".concat(this._moderationId,"] Unexpected message type from worker"))}),this._workerConnection.on(bt.WILL_RECONNECT,(r,o)=>{r==="recover"&&o(r),o("tryNext")}),this._workerConnection.on(bt.REQUEST_NEW_URLS,(r,o)=>{this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then(r).catch(o)})}static intToLong(r){return{low:r|=0,high:r>>31,unsigned:r>=0}}async requestToInspectImage(){const r=Ec(this,Ps.CLIENT_LOCAL_VIDEO_TRACK),o={appId:this._connectInfo.appId,cname:this._connectInfo.cname,cid:this._connectInfo.cid,sid:this._connectInfo.sid,uid:this._connectInfo.uid,vid:this._connectInfo.vid};if(r){if(!r.isPlaying)return void(de("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")&&j.debug("Only the track being played can be inspected"));this._sequence++;const s=await this.generateRequestData(r,o);this._workerConnection.sendMessage(s,!0,!0)}else de("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")&&j.debug("Only the track being published can be inspected")}async generateRequestData(r,o){let{appId:s,cname:l,cid:d,vid:p,sid:_,uid:S}=o;const I=Date.now(),b=await r.getCurrentFrameImage("image/jpeg",this.quality),A=await WV(b,s,l),F=this._sequence+"-"+d+"-"+S+"-"+I+"-"+Yn(12,""),W={appId:s,cid:d,cname:l,deviceId:"",elapse:Cx.intToLong(Number(I-this._moderationStartTime)),fileSize:b.buffer.byteLength,height:b.height,width:b.width,jpg:A,networkType:6,osType:7,requestId:F,sdkVersion:"4.18.2",sequence:this._sequence,sid:_,timestamp:wJ(I),uid:S,vid:p,service:this._moderationMode,ticket:this._ticket},Z=EJ(W);if(Z.byteLength<this._workerMessageLengthLimit){if(de("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")){const ee=function(te){for(var Ee=1;Ee<arguments.length;Ee++){var ye=arguments[Ee]!=null?arguments[Ee]:{};Ee%2?rj(Object(ye),!0).forEach(function(Pe){L(te,Pe,ye[Pe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(te,Object.getOwnPropertyDescriptors(ye)):rj(Object(ye)).forEach(function(Pe){Object.defineProperty(te,Pe,Object.getOwnPropertyDescriptor(ye,Pe))})}return te}({},W);delete ee.jpg,j.debug("[".concat(this._moderationId,"] Request message for worker of image moderation service: "),JSON.stringify(ee))}return Z}{const ee=this.quality*this._qualityRatio;return this.quality=ee,await this.generateRequestData(r,{appId:s,cname:l,cid:d,vid:p,sid:_,uid:S})}}close(){this._cancelTokenSource.cancel(),this._cancelTokenSource=ns.CancelToken.source(),this._workerConnection&&this._workerConnection.close(),this._moderationTimer&&window.clearInterval(this._moderationTimer),this._moderationTimer=null,this._uploadTimer&&window.clearTimeout(this._uploadTimer),this._uploadTimer=null,this.connectionState=Da.CLOSED,this.emit(Ps.STATE_CHANGE,rh.CLOSED)}}var ij,oj,aj,sj,cj,lj,uj,dj,hj,fj,pj,mj,gj,vj,Ej,_j,Sj,yj,Cj,Tj,bj,Rj,Ij,wj,Oj,Aj,Nj,xj,Pj,Dj,Lj,kj,Mj,Uj,Fj,Vj,jj,Bj,$j,Ge;function Hj(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function i_(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?Hj(Object(o),!0).forEach(function(s){L(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):Hj(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}let OJ=(ij=lt(),oj=lt({argsMap:(n,r)=>(Array.isArray(r)||(r=[r]),r.map(o=>o?Object(o).toString():"null"))}),aj=lt({argsMap:(n,r)=>(r||(r=[]),Array.isArray(r)||(r=[r]),r.map(o=>o.getTrackId()))}),sj=lt({argsMap:(n,r,o)=>[r.uid,o]}),cj=lt({argsMap:(n,r)=>r.map(o=>{let{user:s,mediaType:l}=o;return[s==null?void 0:s.uid,l]})}),lj=lt({argsMap:(n,r,o)=>[r.uid,o]}),uj=lt({argsMap:(n,r)=>r.map(o=>{let{user:s,mediaType:l}=o;return{uid:s==null?void 0:s.uid,mediaType:l}})}),dj=lt(),hj=lt(),fj=lt(),pj=lt(),mj=lt(),gj=lt(),vj=lt(),Ej=lt(),_j=lt(),Sj=lt(),yj=lt(),Cj=lt(),Tj=lt(),bj=lt(),Rj=lt({argsMap:(n,r)=>[r]}),Ij=lt(),wj=lt(),Oj=lt(),Aj=lt(),Nj=lt(),xj=lt(),Pj=lt(),Dj=lt(),Lj=lt(),kj=lt(),Mj=lt({argsMap:(n,r)=>(Array.isArray(r)||(r=[r]),[JSON.stringify(r)])}),Uj=lt(),Fj=lt(),Vj=lt(),jj=lt(),Bj=lt({reportResult:!0}),$j=lt(),Ne((Ge=class extends ur{get connectionState(){return this._gateway.state}get remoteUsers(){return this._users}get localTracks(){return this._p2pChannel.getAllTracks(!0)}get uid(){return this._uid}get channelName(){return this._channelName}get mode(){return this._config.mode}get role(){var n;return((n=this._config)===null||n===void 0?void 0:n.role)||"audience"}get codec(){return this._config.codec}get audioCodec(){return this._config.audioCodec||"opus"}get isStringUID(){return!!this._joinInfo&&!!this._joinInfo.stringUid}get __className__(){return"Client"}constructor(n){let r;if(super(),L(this,"store",void 0),L(this,"_uid",void 0),L(this,"_channelName",void 0),L(this,"_uintUid",void 0),L(this,"_users",[]),L(this,"_config",void 0),L(this,"_clientId",void 0),L(this,"_appId",void 0),L(this,"_sessionId",null),L(this,"_key",void 0),L(this,"_joinInfo",void 0),L(this,"_gateway",void 0),L(this,"_statsCollector",void 0),L(this,"_configDistribute",void 0),L(this,"_leaveMutex",new xo("client-leave")),L(this,"_publishMutex",new xo("client-publish")),L(this,"_renewTokenMutex",new xo("client-renewtoken")),L(this,"_subscribeMutex",new xo("client-subscribe")),L(this,"_encryptionMode","none"),L(this,"_encryptionSecret",null),L(this,"_encryptionSalt",null),L(this,"_proxyServer",void 0),L(this,"_turnServer",{servers:[],mode:"auto"}),L(this,"_cloudProxyServerMode","disabled"),L(this,"_isDualStreamEnabled",!1),L(this,"_defaultStreamFallbackType",void 0),L(this,"_lowStreamParameter",void 0),L(this,"_streamFallbackTypeCacheMap",new Map),L(this,"_remoteStreamTypeCacheMap",new Map),L(this,"_axiosCancelSource",ns.CancelToken.source()),L(this,"_audioVolumeIndicationInterval",void 0),L(this,"_networkQualityInterval",void 0),L(this,"_userOfflineTimeout",void 0),L(this,"_streamRemovedTimeout",void 0),L(this,"_injectStreamingClient",void 0),L(this,"_liveTranscodeStreamingClient",void 0),L(this,"_liveRawStreamingClient",void 0),L(this,"_channelMediaRelayClient",void 0),L(this,"_networkQualitySensitivity","normal"),L(this,"_p2pChannel",void 0),L(this,"_useLocalAccessPoint",!1),L(this,"_setLocalAPVersion",void 0),L(this,"_joinAndNotLeaveYet",!1),L(this,"_numberOfJoinCount",0),L(this,"_remoteDefaultVideoStreamType",void 0),L(this,"_inspect",void 0),L(this,"_moderation",void 0),L(this,"_license",void 0),L(this,"_handleLocalTrackEnable",(o,s,l)=>{this.publish(o,!1).then(s).catch(l)}),L(this,"_handleLocalTrackDisable",(o,s,l)=>{this.unpublish(o).then(s).catch(l)}),L(this,"_handleUserOnline",o=>{if(de("BLOCK_LOCAL_CLIENT")&&Mf(o.uid,this.channelName))return void j.debug("[".concat(o.uid,"] will be ignored in local"));this.isStringUID&&typeof o.uid!="string"&&j.error("[".concat(this._clientId,"] StringUID is Mixed with UintUID"));const s=this._users.find(l=>l.uid===o.uid);if(s)s._trust_in_room_=!0;else{const l=new jN(o.uid,o.uint_id||o.uid);this._users.push(l),j.debug("[".concat(this._clientId,"] user online"),o.uid),this.safeEmit(Jt.USER_JOINED,l)}}),L(this,"_handleUserOffline",o=>{if(de("BLOCK_LOCAL_CLIENT")&&Mf(o.uid,this.channelName))return;const s=this._users.find(l=>l.uid===o.uid);s&&(this._handleRemoveStream(o),NN(this._users,s),this._remoteStreamTypeCacheMap.delete(s.uid),this._streamFallbackTypeCacheMap.delete(s.uid),j.debug("[".concat(this._clientId,"] user offline"),o.uid,"reason:",o.reason),this.safeEmit(Jt.USER_LEAVED,s,o.reason))}),L(this,"_handleAddAudioOrVideoStream",(o,s,l,d,p,_,S)=>{if(de("BLOCK_LOCAL_CLIENT")&&Mf(s,this.channelName))return;const I=this._users.find(A=>A.uid===s);if(!I)return void j.error("[".concat(this._clientId,"] can not find target user!(on_add_stream)"));j.debug("[".concat(this._clientId,"] stream added with uid ").concat(s,", type ").concat(o)),this.store.subscribe(I.uid,o,void 0,void 0,void 0,Date.now());const b=o==="audio"?I.hasAudio:I.hasVideo;I._uintid||(I._uintid=p||s),o==="audio"?I._trust_audio_stream_added_state_=!0:I._trust_video_stream_added_state_=!0,o==="audio"?(I._audio_added_=!0,l!==void 0&&(I._audioSSRC=l),d!==void 0&&(I._cname=d),_&&(I._audioOrtc=_)):(I._video_added_=!0,l!==void 0&&(I._videoSSRC=l),d!==void 0&&(I._cname=d),S!==void 0&&(I._rtxSsrcId=S),_&&(I._videoOrtc=_)),(o==="audio"?I.hasAudio:I.hasVideo)&&!b&&(j.info("[".concat(this._clientId,"] remote user ").concat(I.uid," published ").concat(o)),this.safeEmit(Jt.USER_PUBLISHED,I,o)),o==="video"?Ze.onGatewayStream(this._sessionId,Vi.ON_ADD_VIDEO_STREAM,dr.ON_ADD_VIDEO_STREAM,{peer:p||s}):Ze.onGatewayStream(this._sessionId,Vi.ON_ADD_AUDIO_STREAM,dr.ON_ADD_AUDIO_STREAM,{peer:p||s}),this._p2pChannel.remoteMediaSsrcChanged(I,o,l).then(A=>{if(A)return j.debug("[".concat(this._clientId,"] resubscribe ").concat(o," for user ").concat(I.uid," after rejoin because SSRC id changed.")),this._p2pChannel.unsubscribe(I,o,!0).then(()=>this._subscribe(I,o,!0).catch(F=>{j.error("[".concat(this._clientId,"] resubscribe error"),F.toString())}))}),this._p2pChannel.hasPendingRemoteMedia(I,o)&&(j.debug("[".concat(this._clientId,"] resubscribe ").concat(o," for user ").concat(I.uid," after reconnect.")),this._subscribe(I,o,!0).catch(A=>{j.error("[".concat(this._clientId,"] resubscribe error"),A.toString())}))}),L(this,"_handleRemoveStream",o=>{if(de("BLOCK_LOCAL_CLIENT")&&Mf(o.uid,this.channelName))return;const s=this._users.find(d=>d.uid===o.uid);if(!s)return void j.warning("[".concat(this._clientId,"] can not find target user!(on_remove_stream)"));j.debug("[".concat(this._clientId,"] stream removed with uid ").concat(o.uid));let l=()=>{};s.hasAudio&&s.hasVideo?l=()=>{j.info("[".concat(this._clientId,"] remote user ").concat(s.uid," unpublished audio track")),this.safeEmit(Jt.USER_UNPUBLISHED,s,"audio"),j.info("[".concat(this._clientId,"] remote user ").concat(s.uid," unpublished video track")),this.safeEmit(Jt.USER_UNPUBLISHED,s,"video")}:s.hasVideo?l=()=>{j.info("[".concat(this._clientId,"] remote user ").concat(s.uid," unpublished video track")),this.safeEmit(Jt.USER_UNPUBLISHED,s,"video")}:s.hasAudio&&(l=()=>{j.info("[".concat(this._clientId,"] remote user ").concat(s.uid," unpublished audio track")),this.safeEmit(Jt.USER_UNPUBLISHED,s,"audio")}),s._trust_audio_stream_added_state_=!0,s._trust_video_stream_added_state_=!0,s._audio_added_=!1,s._video_added_=!1,this._p2pChannel.unsubscribe(s).then(d=>{if(d)return this._gateway.unsubscribe(d,s.uid)}),s._audioSSRC=void 0,s._videoSSRC=void 0,s._audioOrtc=void 0,s._videoOrtc=void 0,s._rtxSsrcId=void 0,Ze.onGatewayStream(this._sessionId,Vi.ON_REMOVE_STREAM,dr.ON_REMOVE_STREAM,{peer:o.uint_id||o.uid}),l()}),L(this,"_handleSetStreamLocalEnable",(o,s,l)=>{if(de("BLOCK_LOCAL_CLIENT")&&Mf(s,this.channelName))return;const d=this._users.find(S=>S.uid===s);if(!d)return void j.error("[".concat(this._clientId,"] can not find target user!(disable_local)"));j.debug("[".concat(this._clientId,"] local ").concat(o," ").concat(l?"enabled":"disabled"," with uid ").concat(s));const p=o==="audio"?d.hasAudio:d.hasVideo;if(o==="audio"){d._trust_audio_enabled_state_=!0;const S=d._audio_enabled_;if(d._audio_enabled_=l,d._audio_enabled_===S)return;{const I=d._audio_enabled_?"enable-local-audio":"disable-local-audio";j.debug("[".concat(this._clientId,"] user-info-updated, uid: ").concat(s,", msg: ").concat(I)),this.safeEmit(Jt.USER_INFO_UPDATED,s,I)}}else{d._trust_video_enabled_state_=!0;const S=d._video_enabled_;if(d._video_enabled_=l,d._video_enabled_===S)return;{const I=d._video_enabled_?"enable-local-video":"disable-local-video";j.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(s,", msg: ").concat(I)),this.safeEmit(Jt.USER_INFO_UPDATED,s,I)}}const _=o==="audio"?d.hasAudio:d.hasVideo;return p!==_?!p&&_?(j.info("[".concat(this._clientId,"] remote user ").concat(s," published ").concat(o)),void this.safeEmit(Jt.USER_PUBLISHED,d,o)):(o==="video"&&d._videoTrack&&d._videoTrack._destroy(),o==="audio"&&d._audioTrack,this._p2pChannel.muteRemote(d,o),j.info("[".concat(this._clientId,"] remote user ").concat(s," unpublished ").concat(o)),void this.safeEmit(Jt.USER_UNPUBLISHED,d,o)):void 0}),L(this,"_handleMuteStream",(o,s,l)=>{if(de("BLOCK_LOCAL_CLIENT")&&Mf(o,this.channelName))return;j.debug("[".concat(this._clientId,"] receive mute message"),o,s,l);const d=this._users.find(S=>S.uid===o);if(!d)return void j.warning("[".concat(this._clientId,"] can not find remote user, ignore mute event, uid: ").concat(o));const p=s==="audio"?d.hasAudio:d.hasVideo;if(s==="audio"){d._trust_audio_mute_state_=!0;const S=d._audio_muted_;if(d._audio_muted_=l,d._audio_muted_===S)return;{const I=d._audio_muted_?"mute-audio":"unmute-audio";j.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(o,", msg: ").concat(I)),this.safeEmit(Jt.USER_INFO_UPDATED,o,I)}}else{d._trust_video_mute_state_=!0;const S=d._video_muted_;if(d._video_muted_=l,d._video_muted_===S)return;{const I=d._video_muted_?"mute-video":"unmute-video";j.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(o,", msg: ").concat(I)),this.safeEmit(Jt.USER_INFO_UPDATED,o,I)}}const _=s==="audio"?d.hasAudio:d.hasVideo;if(p!==_){if(!p&&_)return(s==="audio"?d._audioSSRC:d._videoSSRC)?(j.info("[".concat(this._clientId,"] remote user ").concat(o," published ").concat(s)),void this.safeEmit(Jt.USER_PUBLISHED,d,s)):void j.warning("[".concat(this._clientId,"] remote user ").concat(o," receive ").concat(s," unmute message  before add stream message, ").concat(s," SSRC doesn't exist yet."));s==="video"&&d._videoTrack&&d._videoTrack._destroy(),s==="audio"&&d._audioTrack,this._p2pChannel.muteRemote(d,s),j.info("[".concat(this._clientId,"] remote user ").concat(o," unpublished ").concat(s)),this.safeEmit(Jt.USER_UNPUBLISHED,d,s)}}),L(this,"_handleP2PLost",async o=>{j.debug("[".concat(this._clientId,"] receive p2p lost"),o),parseInt(o.p2pid,10)===this.store.p2pId?await this._p2pChannel.requestReconnect():j.warning("[".concat(this._clientId,"] P2PLost stream not found"),o)}),L(this,"_handleTokenWillExpire",()=>{j.debug("[".concat(this._clientId,"] received message onTokenPrivilegeWillExpire")),this.safeEmit(Jt.ON_TOKEN_PRIVILEGE_WILL_EXPIRE)}),L(this,"_handleBeforeUnload",o=>{o.type==="beforeunload"&&o.returnValue!==void 0&&o.returnValue!==""||(this.leave(),j.info("[".concat(this._clientId,"] auto leave onbeforeunload or pagehide")))}),L(this,"_handleUpdateNetworkQuality",()=>{if(this._networkQualitySensitivity==="normal")return;if(navigator&&navigator.onLine!==void 0&&!navigator.onLine)return void this.safeEmit(Jt.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6});const o={downlinkNetworkQuality:0,uplinkNetworkQuality:0};o.uplinkNetworkQuality=this._p2pChannel.getUplinkNetworkQuality(),o.downlinkNetworkQuality=this._p2pChannel.getDownlinkNetworkQuality(),this.safeEmit(Jt.NETWORK_QUALITY,o)}),this._config=n,this._clientId=Yn(5,"client-"),this.store=new aJ(n.codec,n.audioCodec,n.mode,this._clientId),this.store.clientCreated(),n.proxyServer&&this.setProxyServer(n.proxyServer,!0),n.turnServer&&this.setTurnServer(n.turnServer,!0),j.info("[".concat(this._clientId,"] Initializing AgoraRTC client v").concat(xs," build: ").concat(GA,", mode: ").concat(this.mode,", codec: ").concat(this.codec)),n.clientRoleOptions)try{cU(n.clientRoleOptions),r=Object.assign({},n.clientRoleOptions)}catch(o){j.warning("[".concat(this._clientId,"] ").concat(o.toString()))}this._statsCollector=new o0(this.store),this._statsCollector.onStatsException=(o,s,l)=>{j.debug("[".concat(this._clientId,"] receive exception msg, code: ").concat(o,", msg: ").concat(s,", uid: ").concat(l)),this.safeEmit(Jt.EXCEPTION,{code:o,msg:s,uid:l})},this._statsCollector.onUploadPublishDuration=(o,s,l,d)=>{const p=this._users.find(_=>_.uid===o);p&&Ze.peerPublishStatus(this._sessionId,{subscribeElapse:d,audioPublishDuration:s,videoPublishDuration:l,peer:p._uintid})},this.store.useDataChannel=Pr().supportDataChannel&&de("SIGNAL_CHANNEL"),this._gateway=new WY(this.store,{clientId:this._clientId,mode:this.mode,codec:this.codec,websocketRetryConfig:n.websocketRetryConfig||Ur,httpRetryConfig:n.httpRetryConfig||Ur,forceWaitGatewayResponse:n.forceWaitGatewayResponse===void 0||n.forceWaitGatewayResponse,statsCollector:this._statsCollector,role:n.role,clientRoleOptions:r}),this._configDistribute=new ZY,this._p2pChannel=new oJ(this.store,this._statsCollector),this._handleP2PChannelEvents(),this._handleGatewayEvents(),this._handleGatewaySignalEvents()}async join(n,r,o,s,l){const d=++this._numberOfJoinCount;this.store.joinStart(),s&&(this.store.uid=s);const p=sJ(),_=MV()?window.isSecureContext:"Browser Not Support";if(!MV()&&!p||!window.isSecureContext){const W="The website must be running in a secure context (About secure context: https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts ), otherwise the media collection will be restricted by the browser";j.warning(W)}const S=AN();this.connectionState==="DISCONNECTED"&&(this.store.avoidJoinStart=Math.round(Date.now()),j.debug("[".concat(this._clientId,"] set avoidJoinStart to ").concat(this.store.avoidJoinStart)));const I=Ze.reportApiInvoke(S,{name:Fr.JOIN,options:[n,r,o,s],states:{isHttps:p,isSecureContext:_},tag:cr.TRACER});Ze.setAppId(n);try{if(!o&&o!==null)throw new re(q.INVALID_PARAMS,"Invalid token: ".concat(o,". If you don not use token, set it to null"));o&&Ji(o,"token",1,2047),Ji(n,"appid",1,2047),tN(r),s&&nN(s),l&&Ji(l,"optionalInfo",1,2047)}catch(W){throw I.onError(W),W}if(j.info("[".concat(this._clientId,"] start join channel ").concat(r,", join number: ").concat(d)),this._leaveMutex.isLocked&&(j.debug("[".concat(this._clientId,"] join: waiting leave operation")),(await this._leaveMutex.lock())(),j.debug("[".concat(this._clientId,"] join: continue"))),this._joinAndNotLeaveYet=!0,this.connectionState!=="DISCONNECTED"){const W=new re(q.INVALID_OPERATION,"[".concat(this._clientId,"] Client already in connecting/connected state"));throw I.onError(W),W}this._sessionId||(this._sessionId=S,this.store.sessionId=this._sessionId),this._gateway.state="CONNECTING";const b=i_({clientId:this._clientId,appId:n,sid:this._sessionId,cname:r,uid:typeof s!="string"?s:null,turnServer:this._turnServer,proxyServer:this._proxyServer,token:o||n,cloudProxyServer:this._cloudProxyServerMode,optionalInfo:l,license:this._license,useLocalAccessPoint:this._useLocalAccessPoint},this._remoteDefaultVideoStreamType!==void 0&&{defaultVideoStream:this._remoteDefaultVideoStreamType});if(this._useLocalAccessPoint&&(b.setLocalAPVersion=this._setLocalAPVersion),typeof s=="string"&&(b.stringUid=s,this._uintUid?(b.uid=this._uintUid,this._uintUid=void 0):b.uid=0),this._encryptionMode!=="none"&&this._encryptionSecret){if(b.aesmode=this._encryptionMode,b.aespassword=await(async W=>{const Z=xN(`MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDCMnXAHkKIGAM+x4N22gCI+Wyu
STM9ztkT3uYslTT2PuKmZfPzhH6kVdO7PTjGCOZnAsyb3oTtWat0KcxQ4jxvqQV+
HvYl3iI1Yd4vl2c3qRMJPLtRDfNxa2Mcxgq7e9aEUibzdd0st+OJAy3tOj/Y0aVy
xQiYDz3vqa6bP29adwIDAQAB`),ee=await window.crypto.subtle.importKey("spki",Z,{name:"RSA-OAEP",hash:"SHA-256"},!0,["encrypt"]),te=_N(W),Ee=await window.crypto.subtle.encrypt({name:"RSA-OAEP"},ee,te);return rb(new Uint8Array(Ee))})(this._encryptionSecret),!this._joinAndNotLeaveYet)throw new re(q.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));this._encryptionSalt&&(b.aessalt=this._encryptionSalt)}this._startSession(this._sessionId,{channel:r,appId:n});const A=this._sessionId;setTimeout(()=>{this.connectionState==="CONNECTING"&&A===this._sessionId&&Ze.joinChannelTimeout(this._sessionId,5)},5e3);try{let W;const Z=b.cloudProxyServer;if(["proxy3","proxy4","proxy5"].includes(Z)){const ye=de("PROXY_SERVER_TYPE3");Array.isArray(ye)?b.proxyServer=ye[0]:b.proxyServer=ye}if(Ze.setProxyServer(b.proxyServer),j.setProxyServer(b.proxyServer),this.store.requestAPStart(),b.stringUid&&!b.uid){const ye=await pF(b.stringUid,b,this._axiosCancelSource.token,this._config.httpRetryConfig||Ur,this.store);j.debug("[".concat(this._clientId,"] getUserAccount Success ").concat(b.stringUid," => ").concat(ye)),b.uid=ye,W=await fF(b,this._axiosCancelSource.token,this._config.httpRetryConfig||Ur,!0,this.store)}else W=await fF(b,this._axiosCancelSource.token,this._config.httpRetryConfig||Ur,!0,this.store);if(!this._joinAndNotLeaveYet)throw new re(q.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));this.store.requestAPEnd(),setTimeout(()=>{this._configDistribute.startGetConfigDistribute(b,this._axiosCancelSource.token),this._configDistribute.on(BE.UPDATE_BITRATE_LIMIT,ye=>{this._p2pChannel.updateBitrateLimit(ye)})},0),this._key=o||n;const ee=W.gatewayInfo;this._joinInfo=i_(i_({},b),{},{cid:ee.cid,uid:b.uid?b.uid:ee.uid,vid:ee.vid,apResponse:ee.res,uni_lbs_ip:ee.uni_lbs_ip,gatewayAddrs:ee.gatewayAddrs});const te=await this._joinGateway();if(!this._joinAndNotLeaveYet)throw new re(q.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));I.onSuccess(te),this._appId=n,this._channelName=b.cname,this._uid=te,this.store.uid=te,setTimeout(()=>{this._networkQualityInterval&&window.clearInterval(this._networkQualityInterval),this._networkQualityInterval=window.setInterval(this._handleUpdateNetworkQuality,2e3),window.addEventListener(Yi()?"beforeunload":"pagehide",this._handleBeforeUnload)},0);const Ee=b.stringUid?"string uid: ".concat(b.stringUid,",uid: ").concat(b.uid):"uid: ".concat(this._uid);return j.info("[".concat(this._clientId,"] Joining channel success: channel: ").concat(r,",").concat(Ee)),setTimeout(()=>{j.startUpload()},5e3),this.store.joinEnd(),F=this,kf.includes(F)||kf.push(F),te}catch(W){const Z=Array.isArray(W)?W[0]:W;throw Z&&Z.code===q.OPERATION_ABORTED?j.warning("[".concat(this._clientId,"] join number: ").concat(d,", Joining channel failed, rollback"),Z):j.error("[".concat(this._clientId,"] join number: ").concat(d,", Joining channel failed, rollback"),Z),Z.code!==q.OPERATION_ABORTED&&this._numberOfJoinCount===d&&(this._gateway.state="DISCONNECTED",this._reset()),I.onError(Z),Z}var F}_joinGateway(){if(!this._joinInfo||!this._key)throw new re(q.INVALID_OPERATION);return this._gateway.join(this._joinInfo,this._key,!(this._joinInfo.cloudProxyServer!=="disabled"||this._joinInfo.proxyServer||!de("JOIN_WITH_FALLBACK_SIGNAL_PROXY"))).then(n=>n).catch(n=>{if(n.code===q.INIT_WEBSOCKET_TIMEOUT)return this._gateway.leave(!0,yn.FALLBACK),n;if(n.code===q.INIT_DATACHANNEL_TIMEOUT)return this._gateway.leave(!0,yn.FALLBACK),n;throw n}).then(n=>{if(n instanceof re){if(n.code===q.INIT_WEBSOCKET_TIMEOUT){if(j.info("[".concat(this._clientId,"] join timeout, fallback to proxy")),!this._joinInfo||!this._key)throw new re(q.INVALID_OPERATION);this._joinInfo.cloudProxyServer="fallback",this._cloudProxyServerMode="fallback",this.store.cloudProxyServerMode="fallback";const r=de("PROXY_SERVER_TYPE3");if(Array.isArray(r))if(this._joinInfo.apUrl){const s=/^https?:\/\/(.+?)(\/.*)?$/.exec(this._joinInfo.apUrl)[1].split("."),l=s.slice(s.length-2).join(".");r.forEach(d=>{this._joinInfo&&d.includes(l)&&(this._joinInfo.proxyServer=d)}),this._joinInfo.proxyServer||(this._joinInfo.proxyServer=r[0])}else this._joinInfo.proxyServer=r[0];else this._joinInfo.proxyServer=r;const o=de("LOG_UPLOAD_SERVER").match(/.+:(\d{1,5})$/);return o&&o[1]&&o[1]!=="443"&&j.setProxyServer(this._joinInfo.proxyServer),de("STATS_COLLECTOR_PORT").toString()!=="443"&&Ze.setProxyServer(this._joinInfo.proxyServer),Ze.reportApiInvoke(this._sessionId,{name:Fr.JOIN_FALLBACK_TO_PROXY,options:[this._joinInfo.proxyServer],tag:cr.TRACER}).onSuccess(),this.safeEmit(Jt.JOIN_FALLBACK_TO_PROXY,this._joinInfo.proxyServer),de("JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE")&&this._joinInfo.turnServer.servers.forEach(s=>{"forceturn"in s&&(s.forceturn=!0)}),this._gateway.join(this._joinInfo,this._key)}if(j.info("[".concat(this._clientId,"] join by datachannel timeout, fallback to websocket")),!this._joinInfo||!this._key)throw new re(q.INVALID_OPERATION);return Ze.reportApiInvoke(this._sessionId,{name:Fr.DATACHANNEL_FAILBACK,options:[this.store.clientId],tag:cr.TRACER}).onSuccess(),this._joinGateway()}return n}).then(n=>n)}async leave(){j.info("[".concat(this._clientId,"] Leaving channel")),window.removeEventListener(Yi()?"beforeunload":"pagehide",this._handleBeforeUnload),this._reset(),function(r){const o=kf.indexOf(r);o!==-1&&kf.splice(o,1)}(this);const n=await this._leaveMutex.lock();if(this.connectionState==="DISCONNECTED")return j.info("[".concat(this._clientId,"] Leaving channel repeated, success")),void n();await this._gateway.leave(this.connectionState!=="CONNECTED"),j.info("[".concat(this._clientId,"] Leaving channel success")),this._joinAndNotLeaveYet=!1,this.store.resetJoinChannelServiceRecords(),n()}async publish(n){let r=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(Array.isArray(n)||(n=[n]),n.length===0)throw new re(q.INVALID_PARAMS,"track list is empty");if(this._gateway.role==="audience")throw new re(q.INVALID_OPERATION,"audience can not publish stream");for(const s of n){if(!(s instanceof SN))throw new re(q.INVALID_PARAMS,"parameter is not local track");if(!s._enabled&&r)throw new re(q.TRACK_IS_DISABLED,"can not publish a disabled track: ".concat(s.getTrackId()))}j.info("[".concat(this._clientId,"] Publishing tracks, id ").concat(n.map(s=>"".concat(s.getTrackId()," "))));const o=await this._publishMutex.lock();await this._configDistribute.awaitConfigDistributeComplete(),r&&n.forEach(s=>{const l=this._configDistribute.getBitrateLimit();s instanceof $r&&l&&s.setBitrateLimit(l.uplink)});try{await this._publishHighStream(n),j.info("[".concat(this._clientId,"] Publish success, id ").concat(n.map(s=>"".concat(s.getTrackId()," "))))}catch(s){throw j.error("[".concat(this._clientId,"] publish error"),s.toString()),s}finally{o()}}async unpublish(n){if(!this._joinInfo||this._uid===void 0)throw new re(q.INVALID_OPERATION,"Can't unpublish stream, haven't joined yet!");n?Array.isArray(n)||(n=[n]):n=this._p2pChannel.getAllTracks(!0),j.info("[".concat(this._clientId,"] Unpublish tracks, tracks ").concat(n.map(o=>"".concat(o.getTrackId()," "))," "));const r=await this._publishMutex.lock();try{const o=await this._p2pChannel.unpublish(n);o&&await this._gateway.unpublish(o,this._uid),j.info("[".concat(this._clientId,"] Unpublish success,tracks ").concat(n.map(s=>"".concat(s.getTrackId()))))}catch(o){throw j.error("[".concat(this._clientId,"] unpublish error"),o.toString()),o}finally{r&&r()}}async subscribe(n,r){return this._subscribe(n,r)}async _subscribe(n,r,o){if(Si(r,"mediaType",["audio","video"]),!this._joinInfo)throw new re(q.INVALID_OPERATION,"Can't subscribe stream, not joined");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new re(q.INVALID_OPERATION,"Can't subscribe stream in ".concat(this.connectionState," state"));if(!this._users.find(S=>S===n)){const S=new re(q.INVALID_REMOTE_USER,"user is not in the channel");throw j.error("[".concat(this._clientId,"] can not subscribe ").concat(n.uid,", this user is not in the channel")),S}if(!n.hasAudio&&!n.hasVideo){const S=new re(q.INVALID_REMOTE_USER,"user is not published");throw j.error("[".concat(this._clientId,"] can not subscribe ").concat(n.uid,", user is not published")),S}if(!(o||(r!=="audio"||n.hasAudio&&n._audioSSRC!==void 0)&&(r!=="video"||n.hasVideo&&n._videoSSRC!==void 0))){const S=new re(q.REMOTE_USER_IS_NOT_PUBLISHED);throw j.error("[".concat(this._clientId,"] can not subscribe ").concat(n.uid," with mediaType ").concat(r,", remote track is not published")),S}const s=r==="audio"?n._audioSSRC:n._videoSSRC,l=r==="audio"?n._audioOrtc:n._videoOrtc,d=r==="video"?n._rtxSsrcId:void 0,p={stream_type:r==="audio"?Pt.AUDIO:Pt.VIDEO,ssrcId:s},_=await this._subscribeMutex.lock();j.info("[".concat(this._clientId,"] subscribe user ").concat(n.uid,", mediaType: ").concat(r));try{if(await this._p2pChannel.hasRemoteMediaWithLock(n,r))await this._p2pChannel.unmuteRemote(n,r);else try{Ds.markSubscribeStart(this.store.clientId,s),this.store.subscribe(n.uid,r,Date.now()),await this._p2pChannel.subscribe(n,r,s,d,l);try{await this._gateway.subscribe(n.uid,p,!0)}catch(I){if((I==null?void 0:I.code)!==q.WS_ABORT)throw await this._p2pChannel.unsubscribe(n,r),I;await this._p2pChannel.unsubscribe(n,r,!0),this._p2pChannel.setPendingRemoteMedia(n,r)}this.store.subscribe(n.uid,r,void 0,Date.now()),this._p2pChannel.reportSubscribeEvent(!0,null,n,r)}catch(I){throw this._p2pChannel.reportSubscribeEvent(!1,I==null?void 0:I.code,n,r),I}j.info("[".concat(this._clientId,"] subscribe success user ").concat(n.uid,", mediaType: ").concat(r)),this._defaultStreamFallbackType&&this.setStreamFallbackOption(n.uid,this._defaultStreamFallbackType).catch(I=>{j.warning("[".concat(this._clientId,"] auto set fallback failed"),I)});const S=r==="audio"?n._audioTrack:n._videoTrack;if(!S)throw new re(q.UNEXPECTED_ERROR,"can not find remote track in user object");return S}catch(S){throw j.error("[".concat(this._clientId,"] subscribe user ").concat(n.uid," error"),S),S}finally{_()}}async massSubscribe(n){if($u(n,"subscribeList"),!this._joinInfo)throw new re(q.INVALID_OPERATION,"Can't subscribe stream, not joined");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new re(q.INVALID_OPERATION,"Can't subscribe stream in ".concat(this.connectionState," state"));const r=Date.now(),o=new Map,s=await this._subscribeMutex.lock();j.info("[".concat(this._clientId,"]start massSubscribe user ").concat(n.map(_=>{let{user:S,mediaType:I}=_;return"user: ".concat(S==null?void 0:S.uid,", mediaType: ").concat(I)}).join("; ")));const l=(n=[...n]).map(_=>{let{user:S,mediaType:I}=_;return{user:S,mediaType:I}}),d=await this._p2pChannel.globalLock();try{var p;for(let S=n.length-1;S>=0;S--){const I=n[S],{user:b,mediaType:A}=I;if(Si(A,"mediaType",["audio","video"]),!b){const Z=new re(q.INVALID_PARAMS,"user property does not exist in subscribeList item");throw j.error("[".concat(this._clientId,"] user property does not exist in subscribeList item")),Z}if(!this._users.find(Z=>Z===b)){const Z=new re(q.INVALID_REMOTE_USER,"user is not in the channel");j.error("[".concat(this._clientId,"] can not massSubscribe ").concat(b.uid,", this user is not in the channel")),l[S].error=Z,n.splice(S,1);continue}if(A==="audio"&&(!b.hasAudio||b._audioSSRC===void 0)||A==="video"&&(!b.hasVideo||b._videoSSRC===void 0)){const Z=new re(q.REMOTE_USER_IS_NOT_PUBLISHED);j.error("[".concat(this._clientId,"] can not subscribe ").concat(b.uid," with mediaType ").concat(A,", remote user is not published")),l[S].error=Z,n.splice(S,1);continue}const F=Vr.Video|Vr.LwoVideo,W=o.get(b);if(W){if(A==="video"?W&F:W&Vr.Audio){n.splice(S,1),j.warning("[".concat(this._clientId,"] repeat massSubscribe user:").concat(b.uid,", mediaType:").concat(A," twice"));continue}o.set(b,W|(A==="video"?F:Vr.Audio))}else o.set(b,A==="video"?F:Vr.Audio)}for(let S=n.length-1;S>=0;S--){const I=n[S],{user:b,mediaType:A}=I,F=Vr.Video|Vr.LwoVideo;if(this._p2pChannel.hasRemoteMedia(b,A)){await this._p2pChannel.unmuteRemoteNoLock(b,A);const W=o.get(b);o.set(b,A==="video"?W^F:W^Vr.Audio),n.splice(S,1)}}this.store.massSubscribe(n.map(S=>({userId:S.user.uid,type:S.mediaType})),r);const _=Gl(p=Array.from(o.entries())).call(p,(S,I)=>{let[b,A]=I;if(A===0)return S;const F={stream_id:b.uid,stream_type:A};return A&Vr.Audio&&(F.audio_ssrc=b._audioSSRC),A&Vr.Video&&(F.video_ssrc=b._videoSSRC),S.push(F),S},[]);try{n.length>0&&await this._p2pChannel.massSubscribeNoLock(n.map(I=>{let{user:b,mediaType:A}=I;return{user:b,mediaType:A,ssrcId:A===Pt.VIDEO?b._videoSSRC:b._audioSSRC,rtxSsrcId:A===Pt.VIDEO?b._rtxSsrcId:void 0}}));const S=new Map;if(_.length>0){const I=await this._gateway.subscribeAll(_,!0);((I==null?void 0:I.users)||[]).forEach(b=>{let{stream_id:A,video_error_code:F,audio_error_code:W,error_code:Z}=b;(F||W||Z)&&S.set(A,{video_error_code:F,audio_error_code:W,error_code:Z})})}if(Array.from(S.entries()).length>0){const I=Array.from(S.entries()).map(b=>{let A,[F,W]=b;return W.error_code||W.video_error_code&&W.audio_error_code?A=void 0:W.video_error_code?A=Pt.VIDEO:W.audio_error_code&&(A=Pt.AUDIO),{user:this.remoteUsers.find(Z=>Z.uid===F),mediaType:A}});await this._p2pChannel.massUnsubscribeNoLock(I)}for(const I of l){const b=S.get(I.user.uid);if(b){const A=b.error_code||I.mediaType==="audio"&&b.audio_error_code||I.mediaType==="video"&&b.video_error_code;if(A){const F=GE(A);j.error("user:".concat(I.user.uid," mediaType:").concat(I.mediaType," has massSubscribe error ").concat(F.desc)),I.error=new re(q.SUBSCRIBE_FAILED,"code ".concat(A,": ").concat(F.desc))}}I.error||(I.mediaType==="video"?I.track=I.user.videoTrack:I.track=I.user.audioTrack)}return this.store.massSubscribe(l.filter(I=>!I.error).map(I=>({userId:I.user.uid,type:I.mediaType})),void 0,Date.now()),l.forEach(I=>{var b;Ze.subscribe(this.store.sessionId,{succ:!!I.error,ec:((b=I.error)===null||b===void 0?void 0:b.code)||null,video:I.mediaType===Pt.VIDEO,audio:I.mediaType===Pt.AUDIO,peerid:I.user.uid,subscribeRequestid:I.mediaType===Pt.VIDEO?I.user._videoSSRC:I.user._audioSSRC,p2pid:this.store.p2pId,eventElapse:Math.floor(performance.now()-r)},!0)}),j.info("[".concat(this._clientId,"] massSubscribe success ").concat(n.map(I=>{let{user:b,mediaType:A}=I;return"user: ".concat(b==null?void 0:b.uid,", mediaType: ").concat(A)}).join("; "))),l}catch(S){throw await this._p2pChannel.massUnsubscribeNoLock(n),S}}finally{d(),s()}}async unsubscribe(n,r){if(r&&Si(r,"mediaType",["audio","video"]),!this._joinInfo)throw new re(q.INVALID_OPERATION,"Can't unsubscribe stream, haven't joined yet!");if(!this._users.find(s=>s===n)){const s=new re(q.INVALID_REMOTE_USER,"user is not in the channel");throw j.error("[".concat(this._clientId,"] can not unsubscribe ").concat(n.uid,", user is not in the channel")),s}j.info("[".concat(this._clientId,"] unsubscribe uid: ").concat(n.uid,", mediaType: ").concat(r));const o=await this._subscribeMutex.lock();try{const s=await this._p2pChannel.unsubscribe(n,r);s&&await this._gateway.unsubscribe(s,n.uid),j.info("[".concat(this._clientId,"] unsubscribe success uid: ").concat(n.uid,", mediaType: ").concat(r))}catch(s){if(s.code===q.DISCONNECT_P2P)return void j.warning("disconnecting p2p, abort unsubscribe request.");throw j.error("[".concat(this._clientId,"] unsubscribe user ").concat(n.uid," error"),s.toString()),s}finally{o()}}async massUnsubscribe(n){if($u(n,"unsubscribeList"),!this._joinInfo)throw new re(q.INVALID_OPERATION,"Can't unsubscribeAll stream, haven't joined yet!");j.info("[".concat(this._clientId,"] start massUnsubscribe ").concat(n.map(o=>{let{user:s,mediaType:l}=o;return"user: ".concat(s==null?void 0:s.uid,", mediaType: ").concat(l,";")}).join())),n=[...n];const r=new Map;for(let o=n.length-1;o>=0;o--){const{user:s,mediaType:l}=n[o];if(!s){const p=new re(q.INVALID_PARAMS,"user property does not exist in unsubscribeList item");throw j.error("[".concat(this._clientId,"] user property does not exist in unsubscribeList item")),p}if(Si(l,"mediaType",["video","audio",void 0]),!this._users.find(p=>p===s)){j.warning("[".concat(this._clientId,"] can not unsubscribe ").concat(s.uid,", user is not in the channel")),n.splice(o,1);continue}const d=Vr.Video|Vr.LwoVideo;if(r.has(s)){const p=r.get(s);let _;switch(l){case"video":_=p&d;break;case"audio":_=p&Vr.Audio;break;default:_=p&(Vr.Audio|d)}if(_){j.warning("[".concat(this._clientId,"] repeat massUnsubscribe user:").concat(s.uid,",mediaType:").concat(l," twice.")),n.splice(o,1);continue}l?l==="audio"?r.set(s,p|Vr.Audio):l==="video"&&r.set(s,p|d):r.set(s,p|Vr.Audio|d)}else l?l==="audio"?r.set(s,Vr.Audio):l==="video"&&r.set(s,d):r.set(s,Vr.Audio|d)}try{const o=await this._p2pChannel.massUnsubscribe(n);o&&await this._gateway.massUnsubscribe(o),j.info("[".concat(this._clientId,"] massUnsubscribe success ").concat(n.map(s=>{let{user:l,mediaType:d}=s;return"user: ".concat(l==null?void 0:l.uid,", mediaType: ").concat(d,";")}).join()))}catch(o){if(o.code===q.DISCONNECT_P2P)return void j.warning("[".concat(this._clientId,"] disconnecting p2p, abort unsubscribe request."));throw j.error("[".concat(this._clientId,"] massUnsubscribe error"),o.toString()),o}}setLowStreamParameter(n){(function(o){if(!o)throw new re(q.INVALID_PARAMS);rr(o.width)||eN(o.width,"streamParameter.width"),rr(o.height)||eN(o.height,"streamParameter.height"),rr(o.framerate)||eN(o.framerate,"streamParameter.framerate"),rr(o.bitrate)||Vn(o.bitrate,"streamParameter.bitrate")})(n),(!n.width&&n.height||n.width&&!n.height)&&j.warning("[".concat(this._clientId,"] The width and height parameters take effect only when both are set")),j.info("[".concat(this._clientId,"] set low stream parameter to"),JSON.stringify(n));const r=this._configDistribute.getLowStreamConfigDistribute();r&&r.bitrate&&n.bitrate&&r.bitrate<n.bitrate&&(n.bitrate=r.bitrate),this._lowStreamParameter=n}async enableDualStream(){if(!Pr().supportDualStream)throw Ze.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!1}),new re(q.NOT_SUPPORTED,"Your browser is not support dual stream");if(this._isDualStreamEnabled)throw new re(q.INVALID_OPERATION,"Dual stream is already enabled");if(this._p2pChannel.canPublishLowStream())try{await this._publishLowStream()}catch(n){throw Ze.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!1}),n}this._isDualStreamEnabled=!0,Ze.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!0}),j.info("[".concat(this._clientId,"] enable dual stream"))}async disableDualStream(){if(this._isDualStreamEnabled){if(!this._joinInfo)throw new re(q.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if(this._p2pChannel.getLocalMedia(Je.LocalVideoLowTrack))try{const n=await this._p2pChannel.unpublishLowStream();n&&await this._gateway.unpublish(n,this._joinInfo.stringUid||this._joinInfo.uid)}catch(n){throw Ze.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!1,succ:!1}),n}this._isDualStreamEnabled=!1,Ze.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!1,succ:!0}),j.info("[".concat(this._clientId,"] disable dual stream"))}}async setClientRole(n,r){if(function(o){Si(o,"role",["audience","host"])}(n),r&&cU(r),this.mode==="rtc")throw j.warning("[".concat(this._clientId,"]rtc mode can not use setClientRole")),new re(q.INVALID_OPERATION,"rtc mode can not use setClientRole");if(r&&r.level&&n==="host")throw new re(q.INVALID_OPERATION,"host mode can not set audience latency level");if(n==="audience"&&this._p2pChannel.hasLocalMedia())throw new re(q.INVALID_OPERATION,"can not set client role to audience when publishing stream");await this._gateway.setClientRole(n,r),this._config.role=n,j.info("[".concat(this._clientId,"] set client role to ").concat(n,", level: ").concat(r&&r.level))}setProxyServer(n,r){if(Ji(n,"proxyServer"),!r){if(this.connectionState!=="DISCONNECTED")throw new re(q.INVALID_OPERATION,"Set proxy server before join channel");if(this._cloudProxyServerMode!=="disabled"||this._useLocalAccessPoint)throw new re(q.INVALID_OPERATION,"You have already set the proxy")}this._proxyServer=n,Ze.setProxyServer(this._proxyServer),j.setProxyServer(this._proxyServer),j.info("[".concat(this._clientId,"] Set proxy server ").concat(r?"by initialize call":""," success."))}setTurnServer(n,r){if(Array.isArray(n)||(n=[n]),!r){if(this.connectionState!=="DISCONNECTED")throw new re(q.INVALID_OPERATION,"Set turn server before join channel");if(this._cloudProxyServerMode!=="disabled"||this._useLocalAccessPoint)throw new re(q.INVALID_OPERATION,"You have already set the proxy")}if(VE(n))return this._turnServer={servers:n,mode:"original-manual"},void j.info("[".concat(this._clientId,"] Set original turnserver ").concat(r?"by initialize call":""," success: ").concat(n.map(o=>o.urls).join(","),"."));n.forEach(o=>sU(o)),this._turnServer={servers:n,mode:"manual"},j.info("[".concat(this._clientId,"] Set turnserver ").concat(r?"by initialize call":""," success."))}setLicense(n){if(this.connectionState!=="DISCONNECTED")throw new re(q.INVALID_OPERATION,"you should set license before join channel");if(Ji(n,"license",32,32),!/^[A-Za-z\d]+$/.test(n))throw new re(q.INVALID_PARAMS,"license should only contains characters from A-Z a-z 0-9");this._license=n,j.info("[".concat(this._clientId,"] set license success"),n)}startProxyServer(n){if(this.connectionState!=="DISCONNECTED")throw new re(q.INVALID_OPERATION,"Start proxy server before join channel");if(this._proxyServer||this._turnServer.mode==="manual"||this._useLocalAccessPoint)throw new re(q.INVALID_OPERATION,"You have already set the proxy");const r=[3,4,5];let o;switch(n===void 0&&(n=3),n){case 1:case 2:throw new re(q.NOT_SUPPORTED,"proxy mode 1/2 has been deprecated and not supported.");case 3:o="proxy3";break;case 4:o="proxy4";break;case 5:o="proxy5";break;default:throw new re(q.INVALID_PARAMS,"proxy server mode must be ".concat(r.join("|")))}this._cloudProxyServerMode=o,this.store.cloudProxyServerMode=o,j.info("[".concat(this._clientId,"] set cloud proxy server mode to"),this._cloudProxyServerMode)}stopProxyServer(){if(this.connectionState!=="DISCONNECTED")throw new re(q.INVALID_OPERATION,"Stop proxy server after leave channel");Ze.setProxyServer(),j.setProxyServer(),this._cloudProxyServerMode="disabled",this.store.cloudProxyServerMode="disabled",j.info("[".concat(this._clientId,"] set cloud proxy server mode to"),this._cloudProxyServerMode),this._proxyServer=void 0,this._turnServer={mode:"auto",servers:[]}}setLocalAccessPointsV2(n){if(!n.accessPoints)throw new re(q.INVALID_PARAMS,"accessPoints is required.");$u(n.accessPoints.serverList,"accessPoints.serverList"),Ji(n.accessPoints.domain,"accessPoints.domain");const r=(F,W)=>{Vn(F,W,0,65535,!0)};let o=443;if(n.accessPoints.port&&(r(n.accessPoints.port,"accessPoints.port"),o=n.accessPoints.port),this._proxyServer||this._cloudProxyServerMode!=="disabled")throw new re(q.INVALID_OPERATION,"set local access point failed, You have already set the cloud proxy");de("CLOSE_AFB_FOR_LOCAL_AP")&&(Dn("JOIN_WITH_FALLBACK_SIGNAL_PROXY",!1),Dn("JOIN_WITH_FALLBACK_MEDIA_PROXY",!1));const s=/^((\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.){3}(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/,l=n.accessPoints.domain,d=n.accessPoints.serverList.map(F=>s.test(F)?"".concat(F.replace(/\./g,"-"),".").concat(l):F),p=d.map(F=>"".concat(F,":").concat(o));this._useLocalAccessPoint=!0,this._setLocalAPVersion=2,Dn("WEBCS_DOMAIN",p),Dn("WEBCS_DOMAIN_BACKUP_LIST",p),Dn("GATEWAY_DOMAINS",[l]),n.report&&n.report.hostname&&Array.isArray(n.report.hostname)&&n.report.hostname.length?($u(n.report.hostname,"report.hostname"),Dn("EVENT_REPORT_DOMAIN",n.report.hostname[0]),Dn("EVENT_REPORT_BACKUP_DOMAIN",n.report.hostname[1]||n.report.hostname[0])):(Dn("EVENT_REPORT_DOMAIN",d[0]),Dn("EVENT_REPORT_BACKUP_DOMAIN",d[1]||d[0]));let _=6443;n.report&&n.report.port&&(r(n.report.port,"report.port"),_=n.report.port),Dn("STATS_COLLECTOR_PORT",_),n.report?Dn("ENABLE_EVENT_REPORT",!0):Dn("ENABLE_EVENT_REPORT",!1);let S="";n.log&&n.log.hostname&&Array.isArray(n.log.hostname)&&n.log.hostname.length?($u(n.log.hostname,"log.hostname"),S=n.log.hostname[0]):S=d[0];let I=6444;n.log&&n.log.port&&(r(n.log.port,"log.port"),I=n.log.port),Dn("LOG_UPLOAD_SERVER","".concat(S,":").concat(I));let b=[];n.cds&&n.cds.hostname&&Array.isArray(n.cds.hostname)&&n.cds.hostname.length?($u(n.cds.hostname,"cds.hostname"),b=n.cds.hostname):b=d;let A=443;n.cds&&n.cds.port&&(r(n.cds.port,"cds.port"),A=n.cds.port),Dn("CDS_AP",b.map(F=>"".concat(F,":").concat(A))),n.cds?Dn("ENABLE_CONFIG_DISTRIBUTE",!0):Dn("ENABLE_CONFIG_DISTRIBUTE",!1),j.info("set local access point v2 success")}setLocalAccessPoints(n,r){if($u(n,"serverList"),Ji(r,"domain"),this._proxyServer||this._cloudProxyServerMode!=="disabled")throw new re(q.INVALID_OPERATION,"set local access point failed, You have already set the cloud proxy");const o=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/;n=n.map(s=>o.test(s)?"".concat(s.replace(/\./g,"-"),".").concat(r):s),this._useLocalAccessPoint=!0,this._setLocalAPVersion=1,Dn("WEBCS_DOMAIN",n),Dn("WEBCS_DOMAIN_BACKUP_LIST",n),Dn("GATEWAY_DOMAINS",[r]),Dn("EVENT_REPORT_DOMAIN",n[0]),Dn("EVENT_REPORT_BACKUP_DOMAIN",n[1]||n[0]),Dn("LOG_UPLOAD_SERVER","".concat(n[0],":6444")),j.info("[".concat(this._clientId,"] set local access point success"))}async setRemoteDefaultVideoStreamType(n){if(Si(n,"streamType",[0,1]),this._remoteDefaultVideoStreamType=n,this._joinInfo)try{await this._gateway.setDefaultRemoteVideoStreamType(n),this._joinInfo.defaultVideoStream=this._remoteDefaultVideoStreamType}catch(r){throw j.error("[".concat(this._clientId,"] set default remote video stream type error"),r.toString()),r}else j.debug("[".concat(this._clientId,"] haven't joined yet, cache remoteDefaultVideoStreamType ").concat(n))}async setRemoteVideoStreamType(n,r){Si(r,"streamType",[0,1]);try{await this._gateway.setRemoteVideoStreamType(n,r),setTimeout(()=>{const o=this._users.find(s=>s.uid===n);o&&o.videoTrack&&o.videoTrack.updateMediaStreamTrackResolution()},2e3)}catch(o){throw j.error("[".concat(this._clientId,"] set remote video stream type error"),o.toString()),o}j.info("[".concat(this._clientId,"] set remote ").concat(n," video stream type to ").concat(r)),this._remoteStreamTypeCacheMap.set(n,r)}async setStreamFallbackOption(n,r){Si(r,"fallbackType",[0,1,2]);try{await this._gateway.setStreamFallbackOption(n,r)}catch(o){throw j.error("[".concat(this._clientId,"] set stream fallback option"),o.toString()),o}j.info("[".concat(this._clientId,"] set remote ").concat(n," stream fallback type to ").concat(r)),this._streamFallbackTypeCacheMap.set(n,r)}setEncryptionConfig(n,r,o){if(function(s){Si(s,"encryptionMode",["aes-128-xts","aes-256-xts","aes-128-ecb","sm4-128-ecb","aes-128-gcm","aes-256-gcm","aes-128-gcm2","aes-256-gcm2","none"])}(n),Ji(r,"secret"),["aes-128-gcm2","aes-256-gcm2"].includes(n)){if(!o||!(o instanceof Uint8Array&&o.length===32))throw new re(q.INVALID_PARAMS,"salt must be an Uint8Array and exactly equal to 32 bytes")}else if(o)throw new re(q.INVALID_PARAMS,"current encrypt mode does not need salt");new RegExp(`^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*,.<>?/:;'"|{}\\[\\]])(?=.{8,})`).test(r)||j.warning(`The secret is not strong:
      The secret must contain at least 1 lowercase alphabetical character,
      The secret must contain at least 1 uppercase alphabetical character,
      The secret must contain at least 1 numeric character,
      The secret must contain at least one special character,
      The secret must be eight characters or longer.
      `),this._encryptionMode=n,this._encryptionSecret=r,o&&(this._encryptionSalt=rb(o))}async renewToken(n){if(Ji(n,"token",1,2047),!this._key||!this._joinInfo)throw new re(q.INVALID_OPERATION,"renewToken should not be called before user join");const r=this._key;this._key=n,this._joinInfo&&(this._joinInfo.token=n);const o=await this._renewTokenMutex.lock();try{if(de("USE_NEW_TOKEN")){j.debug("[".concat(this._clientId,"] start renew token with ticket from unilbs"));const s=await QY(this._joinInfo,this._axiosCancelSource.token,this._config.httpRetryConfig||Ur);j.debug("[".concat(this._clientId,"] get ticket from unilbs success")),await this._gateway.renewToken({token:n,ticket:s})}else j.debug("[".concat(this._clientId,"] start renew token without ticket")),await this._gateway.renewToken({token:n});j.debug("[".concat(this._clientId,"] renewToken success"))}catch(s){throw this._key=r,this._joinInfo.token=r,j.error("[".concat(this._clientId,"] renewToken failed"),s.toString()),s}finally{o()}}enableAudioVolumeIndicator(){this._audioVolumeIndicationInterval?j.warning("you have already enabled audio volume indicator!"):this._audioVolumeIndicationInterval=window.setInterval(()=>{const n=this._p2pChannel.getAudioLevels();this.safeEmit(Jt.VOLUME_INDICATOR,n)},de("AUDIO_VOLUME_INDICATION_INTERVAL")||2e3)}getRTCStats(){const n=this._statsCollector.getRTCStats(),r=this._gateway.getInChannelInfo();return n.Duration=Math.round(r.duration/1e3),n}async startLiveStreaming(n,r){if(!r){if(this.codec!=="h264")throw new re(q.LIVE_STREAMING_INVALID_RAW_STREAM,"raw streaming is only support h264");if(!this._p2pChannel.hasLocalMedia())throw new re(q.LIVE_STREAMING_INVALID_RAW_STREAM,"can not find stream to raw streaming")}if(this._liveRawStreamingClient&&this._liveRawStreamingClient.hasUrl(n)||this._liveTranscodeStreamingClient&&this._liveTranscodeStreamingClient.hasUrl(n))throw new re(q.LIVE_STREAMING_TASK_CONFLICT);const o=r?Yr.TRANSCODE:Yr.RAW;return this._createLiveStreamingClient(o).startLiveStreamingTask(n,o)}setLiveTranscoding(n){return this._createLiveStreamingClient(Yr.TRANSCODE).setTranscodingConfig(n)}async stopLiveStreaming(n){const r=[this._liveRawStreamingClient,this._liveTranscodeStreamingClient].filter(o=>o&&o.hasUrl(n));if(!r.length)throw new re(q.INVALID_PARAMS,"can not find live streaming url to stop");await Le.all(r.map(o=>o&&o.stopLiveStreamingTask(n)))}async addInjectStreamUrl(n,r){if(!this._joinInfo)throw new re(q.INVALID_OPERATION,"can not addInjectStreamUrl, no joininfo");const o=this._createLiveStreamingClient(Yr.INJECT);o.setInjectStreamConfig(r,0),await o.startLiveStreamingTask(n,Yr.INJECT)}async removeInjectStreamUrl(){var n;const r=this._createLiveStreamingClient(Yr.INJECT),o=Array.from(lu(n=r.streamingTasks).call(n)).find(s=>s.mode===Yr.INJECT);if(!this._joinInfo||!o)throw new re(q.INVALID_OPERATION,"can remove addInjectStreamUrl, no joininfo or inject task");await r.stopLiveStreamingTask(o.url)}async startChannelMediaRelay(n){CF(n),await this._createChannelMediaRelayClient().startChannelMediaRelay(n)}async updateChannelMediaRelay(n){CF(n),await this._createChannelMediaRelayClient().updateChannelMediaRelay(n)}async stopChannelMediaRelay(){await this._createChannelMediaRelayClient().stopChannelMediaRelay(),this._statsCollector.onStatsChanged&&(this._statsCollector.onStatsChanged=void 0)}sendStreamMessage(n){let r=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(!this._joinInfo)throw new re(q.INVALID_OPERATION,"can not send data stream, not joined");if(typeof n=="string"&&(n=new TextEncoder().encode(n)),new Blob([n]).size>1024)throw new re(q.INVALID_PARAMS,"stream message out of range.");return this._gateway.signal.request(mt.DATA_STREAM,{payload:rb(n)},!r)}sendMetadata(n){if(!this._joinInfo)throw new re(q.INVALID_OPERATION,"can not send metadata, not joined");if(new Blob([n]).size>1024)throw new re(q.METADATA_OUT_OF_RANGE);return this._gateway.signal.request(mt.SEND_METADATA,{session_id:this._joinInfo.sid,metadata:rb(n)})}async sendCustomReportMessage(n){if(Array.isArray(n)||(n=[n]),n.forEach(hq),!this._joinInfo)throw new re(q.INVALID_OPERATION,"can not send custom report, not joined");await Ze.sendCustomReportMessage(this._joinInfo.sid,n)}getLocalAudioStats(){return this._statsCollector.getLocalAudioTrackStats()}getRemoteAudioStats(){return this._statsCollector.getRemoteAudioTrackStats()}getLocalVideoStats(){return this._statsCollector.getLocalVideoTrackStats()}getRemoteVideoStats(){return this._statsCollector.getRemoteVideoTrackStats()}getRemoteNetworkQuality(){return this._statsCollector.getRemoteNetworkQualityStats()}async pickSVCLayer(n,r){Si(r.spatialLayer,"spatialLayer",[0,1,2,3]),Si(r.temporalLayer,"temporalLayer",[0,1,2,3]);try{await this._gateway.pickSVCLayer(n,r)}catch(o){throw j.error("[".concat(this._clientId,"] pick SVC layer failed"),o.toString()),o}}_reset(){if(j.debug("[".concat(this._clientId,"] reset client")),this._axiosCancelSource.cancel(),this._axiosCancelSource=ns.CancelToken.source(),this._streamFallbackTypeCacheMap=new Map,this._remoteStreamTypeCacheMap=new Map,this._configDistribute.stopGetConfigDistribute(),this._joinInfo=void 0,this._proxyServer=void 0,this._defaultStreamFallbackType=void 0,this._sessionId=null,this.store.sessionId=null,this._statsCollector.reset(),this._key=void 0,this._appId=void 0,this._uid=void 0,this.store.uid=void 0,this._channelName=void 0,this._encryptionMode="none",this._encryptionSecret=null,this._encryptionSalt=null,this._users.forEach(n=>{n._audioTrack&&n._audioTrack._destroy(),n._videoTrack&&n._videoTrack._destroy()}),this._users=[],this._audioVolumeIndicationInterval&&(window.clearInterval(this._audioVolumeIndicationInterval),this._audioVolumeIndicationInterval=void 0),this._cloudProxyServerMode==="fallback"&&(this._cloudProxyServerMode="disabled",this.store.cloudProxyServerMode="disabled"),this._p2pChannel.reset(),this._publishMutex=new xo("client-publish"),this._subscribeMutex=new xo("client-subscribe"),this._networkQualityInterval&&(window.clearInterval(this._networkQualityInterval),this._networkQualityInterval=void 0),this._injectStreamingClient&&(this._injectStreamingClient.terminate(),this._injectStreamingClient.removeAllListeners(),this._injectStreamingClient=void 0),this._liveRawStreamingClient&&(this._liveRawStreamingClient.terminate(),this._liveRawStreamingClient.removeAllListeners(),this._liveRawStreamingClient=void 0),this._liveTranscodeStreamingClient&&(this._liveTranscodeStreamingClient.terminate(),this._liveTranscodeStreamingClient.removeAllListeners(),this._liveTranscodeStreamingClient=void 0),this._channelMediaRelayClient&&(this._channelMediaRelayClient.dispose(),this._channelMediaRelayClient=void 0),this._inspect)try{this._inspect.close(),this._inspect=void 0}catch{}if(this._moderation)try{this.setImageModeration(!1)}catch{}}_startSession(n,r){const o=n||AN();n?j.debug("[".concat(this._clientId,"] new Session ").concat(o)):j.debug("[".concat(this._clientId,"] renewSession ").concat(this._sessionId," => ").concat(o)),this._sessionId=o,this.store.sessionId=o,r?Ze.sessionInit(this._sessionId,{lts:new Date().getTime(),cname:r.channel,appid:r.appId,mode:this.mode}):this._joinInfo?Ze.sessionInit(this._sessionId,{lts:new Date().getTime(),cname:this._joinInfo.cname,appid:this._joinInfo.appId,mode:this.mode}):this._gateway.joinInfo&&Ze.sessionInit(this._sessionId,{lts:new Date().getTime(),cname:this._gateway.joinInfo.cname,appid:this._gateway.joinInfo.appId,mode:this.mode}),this._joinInfo&&(this._joinInfo.sid=o),this._gateway.joinInfo&&(this._gateway.joinInfo.sid=o)}async _publishHighStream(n){if(!this._joinInfo||this._uid===void 0)throw new re(q.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new re(q.INVALID_OPERATION,"can not publish stream in ".concat(this.connectionState," state"));if(this._turnServer.mode==="auto"&&de("FORCE_TURN")&&!de("TURN_ENABLE_TCP")&&!de("TURN_ENABLE_UDP"))throw new re(q.UNEXPECTED_ERROR,"force TURN With No TURN Configuration");j.debug("[".concat(this._clientId,"] publish high stream"));try{const o=await this._p2pChannel.publish(n,this._isDualStreamEnabled,this._lowStreamParameter),s=(await o.next()).value;if(s){var r;let l;try{l=await this._gateway.publish(this._uid,s,!0)}catch(d){if(d.code!==q.DISCONNECT_P2P)throw o.throw(d),d}await o.next(((r=l)===null||r===void 0?void 0:r.ortc)||[])}this._p2pChannel.reportPublishEvent(!0,null);for(const l of n)l instanceof $r&&l._encoderConfig&&this._gateway.setVideoProfile(l._encoderConfig),!l.muted&&l.enabled||await this._p2pChannel.muteLocalTrack(l)}catch(o){if(this._p2pChannel.reportPublishEvent(!1,o==null?void 0:o.code,n),(o==null?void 0:o.code)===q.WS_ABORT)return;throw o}}async _publishLowStream(){if(!this._joinInfo||this._uid===void 0)throw new re(q.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new re(q.INVALID_OPERATION,"can not publish stream in ".concat(this.connectionState," state"));j.debug("[".concat(this._clientId,"] publish low stream"));const n=this._configDistribute.getLowStreamConfigDistribute();n&&n.bitrate&&(this._lowStreamParameter||(this._lowStreamParameter={width:160,height:120,framerate:15,bitrate:50}),this._lowStreamParameter&&this._lowStreamParameter.bitrate&&n.bitrate<this._lowStreamParameter.bitrate&&(this._lowStreamParameter.bitrate=n.bitrate));try{const o=await this._p2pChannel.publishLowStream(this._lowStreamParameter),s=(await o.next()).value;if(s){var r;let l;try{l=await this._gateway.publish(this._uid,s,!0)}catch(d){if(d.code!==q.DISCONNECT_P2P)throw o.throw(d),d}o.next(((r=l)===null||r===void 0?void 0:r.ortc)||[]),this._p2pChannel.reportPublishEvent(!0,null,void 0,!0)}}catch(o){if(this._p2pChannel.reportPublishEvent(!1,o==null?void 0:o.code,void 0,!0),(o==null?void 0:o.code)===q.WS_ABORT)return;throw o}}_createLiveStreamingClient(n){if(!this._joinInfo||!this._appId)return new re(q.INVALID_OPERATION,"can not create live streaming client, please join channel first").throw();const r=()=>new tX(this._joinInfo,this._config.websocketRetryConfig||Ur,this._config.httpRetryConfig||Ur),o=s=>{s.onLiveStreamError=(l,d)=>{Ze.reportApiInvoke(this._sessionId,{name:Fr.ON_LIVE_STREAM_ERROR,options:[l,d],tag:cr.TRACER}).onSuccess(),this.safeEmit(Jt.LIVE_STREAMING_ERROR,l,d)},s.onLiveStreamWarning=(l,d)=>{Ze.reportApiInvoke(this._sessionId,{name:Fr.ON_LIVE_STREAM_WARNING,options:[l,d],tag:cr.TRACER}).onSuccess(),this.safeEmit(Jt.LIVE_STREAMING_WARNING,l,d)},s.on(Qm.REQUEST_WORKER_MANAGER_LIST,(l,d,p)=>{if(!this._joinInfo)return p(new re(q.INVALID_OPERATION,"can not find join info to get worker manager"));gF(l,this._joinInfo,this._axiosCancelSource.token,Ur).then(d).catch(p)})};switch(n){case Yr.RAW:return this._liveRawStreamingClient||(this._liveRawStreamingClient=r(),o(this._liveRawStreamingClient)),this._liveRawStreamingClient;case Yr.TRANSCODE:return this._liveTranscodeStreamingClient||(this._liveTranscodeStreamingClient=r(),o(this._liveTranscodeStreamingClient)),this._liveTranscodeStreamingClient;case Yr.INJECT:return this._injectStreamingClient||(this._injectStreamingClient=r(),this._injectStreamingClient.on(Qm.REQUEST_WORKER_MANAGER_LIST,(s,l,d)=>{if(!this._joinInfo)return d(new re(q.INVALID_OPERATION,"can not find join info to get worker manager"));gF(s,this._joinInfo,this._axiosCancelSource.token,Ur).then(l).catch(d)}),this._injectStreamingClient.onInjectStatusChange=(s,l,d)=>{this.emit(Jt.INJECT_STREAM_STATUS,s,l,d)}),this._injectStreamingClient}}_createChannelMediaRelayClient(){if(!this._joinInfo)return new re(q.INVALID_OPERATION,"can not create channel media relay client, please join channel first").throw();if(!this._channelMediaRelayClient){const{sendResolutionWidth:n,sendResolutionHeight:r}=this.getLocalVideoStats(),o={width:n,height:r};this._channelMediaRelayClient=new rX(this._joinInfo,this._clientId,this._config.websocketRetryConfig||Ur,this._config.httpRetryConfig||Ur,o),this._channelMediaRelayClient.on("state",s=>{s===No.RELAY_STATE_FAILURE&&this._channelMediaRelayClient&&this._channelMediaRelayClient.dispose(),this.safeEmit(Jt.CHANNEL_MEDIA_RELAY_STATE,s)}),this._channelMediaRelayClient.on("event",s=>{this.safeEmit(Jt.CHANNEL_MEDIA_RELAY_EVENT,s)}),this._statsCollector.onStatsChanged=(s,l)=>{var d;s==="resolution"&&((d=this._channelMediaRelayClient)===null||d===void 0||d.setVideoProfile(l))}}return this._channelMediaRelayClient}_handleGatewayEvents(){this._gateway.on(lr.DISCONNECT_P2P,async()=>{await this._p2pChannel.disconnectForReconnect()}),this._gateway.on(lr.CONNECTION_STATE_CHANGE,(n,r,o)=>{var s;if(o===yn.FALLBACK)return;const l=()=>{this.safeEmit(Jt.CONNECTION_STATE_CHANGE,n,r,o)};if(Ze.reportApiInvoke(this._sessionId||((s=this._gateway.joinInfo)===null||s===void 0?void 0:s.sid)||null,{name:Fr.CONNECTION_STATE_CHANGE,options:[n,r,o],tag:cr.TRACER}).onSuccess(JSON.stringify({cur:n,prev:r,reason:o})),j.info("[".concat(this._clientId,"] connection state change: ").concat(r," -> ").concat(n)),n==="DISCONNECTED")return this._reset(),void l();if(n==="RECONNECTING")this._users.forEach(p=>{p._trust_in_room_=!1,p._trust_audio_enabled_state_=!1,p._trust_video_enabled_state_=!1,p._trust_audio_mute_state_=!1,p._trust_video_mute_state_=!1,p._trust_audio_stream_added_state_=!1,p._trust_video_stream_added_state_=!1,p._audioSSRC=void 0,p._videoSSRC=void 0,p._videoOrtc=void 0,p._audioOrtc=void 0,p._cname=void 0,p._rtxSsrcId=void 0}),this._userOfflineTimeout&&window.clearTimeout(this._userOfflineTimeout),this._streamRemovedTimeout&&window.clearTimeout(this._streamRemovedTimeout),this._userOfflineTimeout=void 0,this._streamRemovedTimeout=void 0;else if(n==="CONNECTED"){var d;this._streamFallbackTypeCacheMap.forEach((p,_)=>{this._gateway.setStreamFallbackOption(_,p).catch(S=>{j.warning("[".concat(this._clientId,"] auto set stream fallback option failed"),S)})}),this._remoteStreamTypeCacheMap.forEach((p,_)=>{this._gateway.setRemoteVideoStreamType(_,p).catch(S=>{j.warning("[".concat(this._clientId,"] auto set remote stream type failed"),S)})}),this._remoteDefaultVideoStreamType!==void 0&&((d=this._joinInfo)===null||d===void 0?void 0:d.defaultVideoStream)===void 0&&this.setRemoteDefaultVideoStreamType(this._remoteDefaultVideoStreamType).then(()=>{j.debug("[".concat(this._clientId,"] setRemoteDefaultVideoStreamType after gateway connected"))}).catch(p=>{j.error("[".concat(this._clientId,"] setRemoteDefaultVideoStreamType after gateway failed, ").concat(p))}),this._p2pChannel.republish(),this._userOfflineTimeout=window.setTimeout(()=>{this.connectionState==="CONNECTED"&&(this._userOfflineTimeout=void 0,this._users.filter(p=>!p._trust_in_room_).forEach(p=>{j.debug("[".concat(this._clientId,"] user offline timeout, emit user offline ").concat(p.uid)),this._handleUserOffline({uid:p.uid})}))},3e3),this._streamRemovedTimeout=window.setTimeout(()=>{this.connectionState==="CONNECTED"&&(this._streamRemovedTimeout=void 0,this._users.forEach(p=>{p._trust_audio_mute_state_||(j.debug("[".concat(this._clientId,"] auto dispatch audio unmute event ").concat(p.uid)),this._handleMuteStream(p.uid,"audio",!1)),p._trust_video_mute_state_||(j.debug("[".concat(this._clientId,"] auto dispatch video unmute event ").concat(p.uid)),this._handleMuteStream(p.uid,"video",!1)),p._trust_audio_enabled_state_||(j.debug("[".concat(this._clientId,"] auto dispatch enable local audio ").concat(p.uid)),this._handleSetStreamLocalEnable("audio",p.uid,!0)),p._trust_video_enabled_state_||(j.debug("[".concat(this._clientId,"] auto dispatch enable local video ").concat(p.uid)),this._handleSetStreamLocalEnable("video",p.uid,!0)),p._trust_video_stream_added_state_||(j.debug("[".concat(this._clientId,"] auto dispatch reset video stream added ").concat(p.uid)),this._handleResetAddStream(p,"video")),p._trust_audio_stream_added_state_||(j.debug("[".concat(this._clientId,"] auto dispatch reset audio stream added ").concat(p.uid)),this._handleResetAddStream(p,"audio")),p._video_added_||p._audio_added_||(j.debug("[".concat(this._clientId,"] auto dispatch stream remove ").concat(p.uid)),this._handleRemoveStream({uid:p.uid,uint_id:p._uintid}))}))},1e3)}l()}),this._gateway.on(lr.REQUEST_NEW_GATEWAY_LIST,(n,r)=>{if(!this._joinInfo)return r(new re(q.UNEXPECTED_ERROR,"can not recover, no join info"));UN(this._joinInfo,this._axiosCancelSource.token,this._config.httpRetryConfig||Ur,this.store).then(o=>{this._joinInfo&&(this._joinInfo.apResponse=o.gatewayInfo.res,this._joinInfo.gatewayAddrs=o.gatewayInfo.gatewayAddrs,this._joinInfo.uni_lbs_ip=o.gatewayInfo.uni_lbs_ip),n(o.gatewayInfo.gatewayAddrs.map(s=>{if(this._joinInfo&&this._joinInfo.proxyServer){const l=s.address.split(":");return"wss://".concat(this._joinInfo.proxyServer,"/ws/?h=").concat(l[0],"&p=").concat(l[1])}return"wss://".concat(s.address)}))}).catch(r)}),this._gateway.on(lr.NETWORK_QUALITY,n=>{this._networkQualitySensitivity==="normal"&&this.safeEmit(Jt.NETWORK_QUALITY,n)}),this._gateway.on(lr.STREAM_TYPE_CHANGE,(n,r)=>{this.safeEmit(Jt.STREAM_TYPE_CHANGED,n,r),Ze.reportApiInvoke(this._sessionId,{name:Fr.STREAM_TYPE_CHANGE,options:[n,r],tag:cr.TRACER}).onSuccess(JSON.stringify({uid:n,streamType:r}))}),this._gateway.on(lr.IS_P2P_DISCONNECTED,n=>{this._p2pChannel.isP2PDisconnected()?n(!0):this._p2pChannel.hasLocalMedia()||this._p2pChannel.hasRemoteMedia()?n(!1):n(!0)}),this._gateway.on(lr.NEED_RENEW_SESSION,()=>{this._startSession()}),this._gateway.on(lr.REQUEST_P2P_CONNECTION_PARAMS,async(n,r,o)=>{try{r(await this._p2pChannel.startP2PConnection(n))}catch(s){o(s)}}),this._gateway.on(lr.JOIN_RESPONSE,(n,r)=>{const{dtlsParameters:o,iceParameters:s,candidates:l,rtpCapabilities:d,setup:p,cname:_}=G3(n.ortc,r);this._p2pChannel.connect(s,o,l,d,p,_)}),this._gateway.on(lr.REQUEST_DC_CONNECTION_PARAMS,n=>{n(this._p2pChannel.getEstablishParams())}),this._gateway.on(lr.RESET_SIGNAL,n=>{this._p2pChannel.resetConnection(n),this._handleGatewaySignalEvents()}),this._gateway.on(lr.DATACHANNEL_FAILBACK,()=>{this._joinGateway()}),this._gateway.on(lr.DATACHANNEL_PRECONNECT,async(n,r,o,s)=>{var l,d,p,_,S,I;await this._p2pChannel.startP2PConnection({turnServer:(l=this._joinInfo)===null||l===void 0?void 0:l.turnServer},!0);const b=function(A,F){let W;return F&&F.ip&&typeof F.port=="number"?(W=[{foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:F.ip,port:F.port.toString(),type:"host",extension:{}}],j.debug("Using remote candidate from AP ".concat(F.ip,":").concat(F.port)),F.ip6&&(W.push({foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:F.ip6,port:F.port.toString(),type:"host",extension:{}}),j.debug("Using IPV6 remote candidate from AP ".concat(F.ip6,":").concat(F.port)))):W=[{foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:A.ip,port:A.port.toString(),type:"host",extension:{}}],W}(n,r);return this._p2pChannel.preConnect({iceUfrag:"".concat((d=this._joinInfo)===null||d===void 0?void 0:d.apResponse.cid,"_").concat((p=this._joinInfo)===null||p===void 0?void 0:p.apResponse.cert),icePwd:"".concat((_=this._joinInfo)===null||_===void 0?void 0:_.apResponse.cid,"_").concat((S=this._joinInfo)===null||S===void 0?void 0:S.apResponse.cert)},{fingerprints:[{hashFunction:"sha-256",fingerprint:(I=de("FINGERPRINT"))!==null&&I!==void 0?I:n.fingerprint}]},b,{send:{audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]},recv:{audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]}},"active","o/i14u9pJrxRKAsu").then(o).catch(s)})}_handleGatewaySignalEvents(){this._gateway.signal.on(Bt.ON_USER_ONLINE,this._handleUserOnline),this._gateway.signal.on(Bt.ON_USER_OFFLINE,this._handleUserOffline),this._gateway.signal.on(Bt.ON_ADD_AUDIO_STREAM,n=>this._handleAddAudioOrVideoStream("audio",n.uid,n.ssrcId,n.cname,n.uint_id,n.ortc)),this._gateway.signal.on(Bt.ON_ADD_VIDEO_STREAM,n=>this._handleAddAudioOrVideoStream("video",n.uid,n.ssrcId,n.cname,n.uint_id,n.ortc,n.rtxSsrcId)),this._gateway.signal.on(Bt.ON_REMOVE_STREAM,this._handleRemoveStream),this._gateway.signal.on(Bt.ON_P2P_LOST,this._handleP2PLost),this._gateway.signal.on(Bt.MUTE_AUDIO,n=>this._handleMuteStream(n.uid,"audio",!0)),this._gateway.signal.on(Bt.UNMUTE_AUDIO,n=>this._handleMuteStream(n.uid,"audio",!1)),this._gateway.signal.on(Bt.MUTE_VIDEO,n=>this._handleMuteStream(n.uid,"video",!0)),this._gateway.signal.on(Bt.UNMUTE_VIDEO,n=>this._handleMuteStream(n.uid,"video",!1)),this._gateway.signal.on(Bt.RECEIVE_METADATA,n=>{const r=xN(n.metadata);this.safeEmit(Jt.RECEIVE_METADATA,n.uid,r)}),this._gateway.signal.on(Bt.ON_DATA_STREAM,n=>{n.seq&&delete n.seq,n.payload=xN(n.payload),this.safeEmit(Jt.STREAM_MESSAGE,n.uid,n.payload),this.onStreamMessage&&this.onStreamMessage(n)}),this._gateway.signal.on(Bt.ON_CRYPT_ERROR,()=>{HE(()=>{j.warning("[".concat(this._clientId,"] on crypt error")),this.safeEmit(Jt.CRYPT_ERROR)},this._sessionId)}),this._gateway.signal.on(Bt.ON_TOKEN_PRIVILEGE_WILL_EXPIRE,this._handleTokenWillExpire),this._gateway.signal.on(Bt.ON_TOKEN_PRIVILEGE_DID_EXPIRE,()=>{j.warning("[".concat(this._clientId,"] received message onTokenPrivilegeDidExpire, please get new token and join again")),this._gateway.leave(!0),this.safeEmit(Jt.ON_TOKEN_PRIVILEGE_DID_EXPIRE),this._reset()}),this._gateway.signal.on(Bt.ON_STREAM_FALLBACK_UPDATE,n=>{j.debug("[".concat(this._clientId,"] stream fallback peerId: ").concat(n.stream_id,", attr: ").concat(n.stream_type)),this.safeEmit(Jt.STREAM_FALLBACK,n.stream_id,n.stream_type===1?"fallback":"recover")}),this._gateway.signal.on(Bt.ON_PUBLISH_STREAM,n=>{this.uid===this._uid&&(this._p2pChannel.reportPublishEvent(!0,null,void 0,!1,JSON.stringify({proxy:n.proxy})),j.info("[".concat(this._clientId,"] on publish stream, ").concat(JSON.stringify(n))))}),this._gateway.signal.on(Bt.ENABLE_LOCAL_VIDEO,n=>{this._handleSetStreamLocalEnable("video",n.uid,!0)}),this._gateway.signal.on(Bt.DISABLE_LOCAL_VIDEO,n=>{this._handleSetStreamLocalEnable("video",n.uid,!1)}),this._gateway.signal.on(rt.REQUEST_TIMEOUT,(n,r)=>{if(this._joinInfo)switch(n){case mt.PUBLISH:{if(!r)return;const p=(r=r).ortc;if(p){var o,s,l,d;const _=p.some(b=>{let{stream_type:A}=b;return A===Xr.Audio}),S=p.some(b=>{let{stream_type:A}=b;return A!==Xr.Audio}),I=p.some(b=>{let{stream_type:A}=b;return A===Xr.Screen||A===Xr.ScreenLow});r.state==="offer"&&Ze.publish(this._joinInfo.sid,{eventElapse:Ds.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:!1,ec:q.TIMEOUT,audio:_,video:S,p2pid:r.p2p_id,publishRequestid:this.store.pubId,screenshare:I,audioName:_?(o=p.find(b=>{let{stream_type:A}=b;return A===Xr.Audio}))===null||o===void 0||(s=o.ssrcs[0])===null||s===void 0?void 0:s.ssrcId.toString():void 0,videoName:S?(l=p.find(b=>{let{stream_type:A}=b;return A!==Xr.Audio}))===null||l===void 0||(d=l.ssrcs[0])===null||d===void 0?void 0:d.ssrcId.toString():void 0})}break}case mt.SUBSCRIBE:(r=r)&&Ze.subscribe(this._joinInfo.sid,{succ:!1,ec:q.TIMEOUT,audio:r.stream_type===Pt.AUDIO,video:r.stream_type===Pt.VIDEO,peerid:r.stream_id,subscribeRequestid:r.ssrcId,p2pid:this.store.p2pId,eventElapse:Ds.measureFromSubscribeStart(this.store.clientId,r.ssrcId)})}}),this._gateway.signal.on(Bt.ON_P2P_OK,n=>{this.uid,this._uid}),this._gateway.signal.on(Bt.ON_PUBLISHED_USER_LIST,n=>{if(n==null||!n.users)return;de("BLOCK_LOCAL_CLIENT")&&(n.users=n.users.filter(s=>!Mf(s.audio_ssrc,this.channelName)));const r=[],o=[];for(const s of n.users){let l=this._users.find(I=>I.uid===s.stream_id);l?l._trust_in_room_=!0:(l=new jN(s.stream_id,s.stream_id),this._users.push(l),this.getListeners(Jt.PUBLISHED_USER_LIST).length===0&&(j.debug("[".concat(this._clientId,"] user online"),s.stream_id),this.safeEmit(Jt.USER_JOINED,l)));const d=Vr.Audio&s.stream_type,p=(Vr.Video|Vr.LwoVideo)&s.stream_type,_=d&&l.hasAudio,S=p&&l.hasVideo;p&&(l._trust_video_stream_added_state_=!0,l._video_added_=!0,l._videoSSRC=s.video_ssrc,l._rtxSsrcId=s.video_rtx),d&&(l._trust_audio_stream_added_state_=!0,l._audio_added_=!0,l._audioSSRC=s.audio_ssrc),d&&!_&&this.getListeners(Jt.PUBLISHED_USER_LIST).length===0&&(j.info("[".concat(this._clientId,"] remote user ").concat(l.uid," published audio")),this.safeEmit(Jt.USER_PUBLISHED,l,"audio")),p&&!S&&this.getListeners(Jt.PUBLISHED_USER_LIST).length===0&&(j.info("[".concat(this._clientId,"] remote user ").concat(l.uid," published video")),this.safeEmit(Jt.USER_PUBLISHED,l,"video")),(d&&!_||p&&!S)&&r.push(l),p&&this._p2pChannel.hasPendingRemoteMedia(l,"video")&&o.push({user:l,mediaType:"video"}),d&&this._p2pChannel.hasPendingRemoteMedia(l,"audio")&&o.push({user:l,mediaType:"audio"})}o.length>0&&(j.debug("[".concat(this._clientId,"] RE massSubscribe after reconnect ").concat(o.map(s=>"user: ".concat(s.user.uid,", mediaType: ").concat(s.mediaType)).join("; ")," ")),this.massSubscribe(o).catch(s=>{j.error("[".concat(this._clientId,"] mass resubscribe error"),s.toString())})),this.getListeners(Jt.PUBLISHED_USER_LIST).length>0?(j.info("[".concat(this._clientId,"] client emit user-list event, users: ").concat(r.map(s=>s.uid).join(", "))),this.safeEmit(Jt.PUBLISHED_USER_LIST,r)):j.info("[".concat(this._clientId,"] client not emit user-list event case there is no user-list listener, users: ").concat(r.map(s=>s.uid).join(", ")))})}_handleP2PChannelEvents(){this._p2pChannel.on(on.RequestMuteLocal,async(n,r,o)=>{if(this._joinInfo)try{await this._gateway.muteLocal(n,this._joinInfo.stringUid||this._joinInfo.uid),r()}catch(s){s.code===q.DISCONNECT_P2P?r():o(s)}else r()}),this._p2pChannel.on(on.RequestUnmuteLocal,async(n,r,o)=>{if(this._joinInfo)try{await this._gateway.unmuteLocal(n,this._joinInfo.stringUid||this._joinInfo.uid),r()}catch(s){s.code===q.DISCONNECT_P2P?r():o(s)}else r()}),this._p2pChannel.on(on.RequestRePublish,(n,r,o)=>{this.publish(n,!1).then(r).catch(o)}),this._p2pChannel.on(on.RequestReSubscribe,async(n,r,o)=>{try{for(const{user:s,kind:l}of n)l===Pt.VIDEO?await this.subscribe(s,"video"):await this.subscribe(s,"audio");r()}catch(s){o(s)}}),this._p2pChannel.on(on.RequestUploadStats,(n,r)=>{this._gateway.uploadStats(n,r)}),this._p2pChannel.on(on.MediaReconnectStart,n=>{this.safeEmit(Jt.MEDIA_RECONNECT_START,n)}),this._p2pChannel.on(on.MediaReconnectEnd,n=>{this.safeEmit(Jt.MEDIA_RECONNECT_END,n)}),this._p2pChannel.on(on.NeedSignalRTT,n=>{n(this._gateway.getSignalRTT())}),this._p2pChannel.on(on.RequestRestartICE,async n=>{const r=await this._p2pChannel.restartICE(n),o=await r.next();if(o.done)return;const s=o.value;let l;try{l=await this._gateway.restartICE({iceParameters:s})}catch(p){return void r.throw(p)}const{iceParameters:d}=function(p){const _=p.iceParameters;return{iceParameters:{iceUfrag:_.iceUfrag,icePwd:_.icePwd}}}(l);await r.next({remoteIceParameters:d})}),this._p2pChannel.on(on.RequestReconnect,async()=>{this._gateway.reconnect()}),this._p2pChannel.on(on.RequestReconnectPC,async()=>{var n;const{iceParameters:r,dtlsParameters:o,rtpCapabilities:s}=await this._p2pChannel.startP2PConnection({turnServer:(n=this._joinInfo)===null||n===void 0?void 0:n.turnServer}),{gatewayEstablishParams:l,gatewayAddress:d}=await this._gateway.reconnectPC({iceParameters:r,dtlsParameters:o,rtpCapabilities:s}),{dtlsParameters:p,iceParameters:_,candidates:S,rtpCapabilities:I,setup:b,cname:A}=G3(l,d);await this._p2pChannel.connect(_,p,S,I,b,A),await this._p2pChannel.republish(),await this._p2pChannel.reSubscribe()}),this._p2pChannel.on(on.RequestUnpublishForReconnectPC,async(n,r,o)=>{this._joinInfo&&this._uid!==void 0?(await this._gateway.unpublish(n,this._uid),r()):o()}),this._p2pChannel.on(on.P2PLost,()=>{this.safeEmit(Jt.P2P_LOST,this.store.uid)}),this._p2pChannel.on(on.UpdateVideoEncoder,n=>{n._encoderConfig&&this._gateway.setVideoProfile(n._encoderConfig)}),this._p2pChannel.on(on.ConnectionTypeChange,n=>{this.safeEmit(Jt.IS_USING_CLOUD_PROXY,n)}),this._p2pChannel.on(on.RequestLowStreamParameter,n=>{n(this._lowStreamParameter||{width:160,height:120,framerate:15,bitrate:50})}),this._p2pChannel.on(on.QueryClientConnectionState,n=>{n(this.connectionState)})}getKeyMetrics(){return this.store.keyMetrics}async enableContentInspect(n){if(this.connectionState!=="CONNECTED"||!this._joinInfo)throw new re(q.INVALID_OPERATION,"[".concat(this._clientId,"] Client did not join channel"));if(this._inspect)throw new re(q.INVALID_OPERATION,"[".concat(this._clientId,"] Inspect content service already in connecting/connected state"));if(!n)throw new re(q.INVALID_PARAMS,"[".concat(this._clientId,"] inspectConfig is necessary"));if(!n.inspectType||!Array.isArray(n.inspectType))throw new re(q.INVALID_PARAMS,"[".concat(this._clientId,"] inspectConfig.inspectType is necessary and is an instance of Array."));{const r=[...new Set(n.inspectType)];r.forEach(o=>{if(!["supervise","moderation"].includes(o))throw new re(q.INVALID_PARAMS,"[".concat(this._clientId,"] ").concat(o," is not a valid inspect type."))}),n.inspectType=r}if(n&&n.extraInfo&&n.extraInfo.length>1024)throw new re(q.INVALID_PARAMS,"[".concat(this._clientId,"] inspectConfig.extraInfo length cannot exceed 1024 bytes"));try{const r=new Tb(n);this._inspect=r,this.handleVideoInspectEvents(this._inspect),await r.init({appId:this._joinInfo.appId,areaCode:"",cname:this._joinInfo.cname,sid:this._joinInfo.sid,token:this._joinInfo.token,uid:this._joinInfo.uid,cid:this._joinInfo.cid,vid:this._joinInfo.vid?Number(this._joinInfo.vid):0},Ur)}catch(r){throw Array.isArray(r)?r[0]:r}}async disableContentInspect(){if(!this._inspect)throw new re(q.INVALID_OPERATION,"[".concat(this._clientId,"] inspectVideoContent not started"));try{this._inspect.close(),this._inspect=void 0}catch(n){throw Array.isArray(n)?n[0]:n}}async setImageModeration(n,r){if(Xm(n,"enabled"),n){if(!r)throw new re(q.INVALID_PARAMS,"[".concat(this._clientId,"] config is necessary"));if(Vn(r.interval,"interval",1e3,1/0),this.connectionState!=="CONNECTED"||!this._joinInfo)throw new re(q.INVALID_OPERATION,"[".concat(this._clientId,'] can not enable image moderation, not joined"'));try{if(this._moderation)return void this._moderation.updateConfig(r);const o=new Cx(r);this._moderation=o,this.handleImageModerationEvents(this._moderation),await o.init({appId:this._joinInfo.appId,areaCode:"",cname:this._joinInfo.cname,sid:this._joinInfo.sid,token:this._joinInfo.token,uid:this._joinInfo.uid,cid:this._joinInfo.cid,vid:this._joinInfo.vid?Number(this._joinInfo.vid):0},Ur)}catch(o){throw Array.isArray(o)?o[0]:o}}else{if(!this._moderation)throw new re(q.INVALID_OPERATION,"[".concat(this._clientId,"] image moderation not started"));try{this._moderation.close(),this._moderation.removeAllListeners(),this._moderation=void 0}catch(o){throw Array.isArray(o)?o[0]:o}}}handleImageModerationEvents(n){n.on(Ps.CONNECTION_STATE_CHANGE,(r,o)=>{switch(this.emit(Jt.IMAGE_MODERATION_CONNECTION_STATE_CHANGE,r,o),r){case Da.CONNECTED:if(this.connectionState!=="CONNECTED")throw this.setImageModeration(!1),new re(q.OPERATION_ABORTED,"Image moderation was cancelled because it left the channel");n.inspectImage()}}),n.on(Ps.CLIENT_LOCAL_VIDEO_TRACK,r=>{r(this.localTracks.filter(o=>o.trackMediaType==="video")[0])})}handleVideoInspectEvents(n){n.on(Jr.CONNECTION_STATE_CHANGE,(r,o)=>{switch(this.emit(Jt.CONTENT_INSPECT_CONNECTION_STATE_CHANGE,r,o),o){case os.CONNECTED:if(this.connectionState!=="CONNECTED")return void this.emit(Jt.CONTENT_INSPECT_ERROR,new re(q.OPERATION_ABORTED,"Content inspect was cancelled because it left the channel"));n.inspectImage()}}),n.on(Jr.INSPECT_RESULT,(r,o)=>{var s;if((o==null?void 0:o.code)===q.INVALID_OPERATION&&this.connectionState==="DISCONNECTED")return j.debug("Stop inspect content because that has left channel"),this==null||(s=this._inspect)===null||s===void 0||s.close(),void(this._inspect=void 0);this.emit(Jt.CONTENT_INSPECT_RESULT,r,o)}),n.on(Jr.CLIENT_LOCAL_VIDEO_TRACK,r=>{r(this.localTracks.filter(o=>o.trackMediaType==="video")[0])})}getJoinChannelServiceRecords(){return j.debug("getJoinChannelServiceRecords"),this.store.joinChannelServiceRecords}async setPublishAudioFilterEnabled(n){Xm(n,"enabled"),Dn("ENABLE_PUBLISH_AUDIO_FILTER",n),this._joinInfo&&await this._gateway.setPublishAudioFilterEnabled(n)}_handleResetAddStream(n,r){switch(r){case"audio":n._audio_added_=!1,n._trust_audio_stream_added_state_=!0;break;case"video":n._video_added_=!1,n._trust_video_stream_added_state_=!0}}}).prototype,"leave",[ij],Object.getOwnPropertyDescriptor(Ge.prototype,"leave"),Ge.prototype),Ne(Ge.prototype,"publish",[oj],Object.getOwnPropertyDescriptor(Ge.prototype,"publish"),Ge.prototype),Ne(Ge.prototype,"unpublish",[aj],Object.getOwnPropertyDescriptor(Ge.prototype,"unpublish"),Ge.prototype),Ne(Ge.prototype,"subscribe",[sj],Object.getOwnPropertyDescriptor(Ge.prototype,"subscribe"),Ge.prototype),Ne(Ge.prototype,"massSubscribe",[cj],Object.getOwnPropertyDescriptor(Ge.prototype,"massSubscribe"),Ge.prototype),Ne(Ge.prototype,"unsubscribe",[lj],Object.getOwnPropertyDescriptor(Ge.prototype,"unsubscribe"),Ge.prototype),Ne(Ge.prototype,"massUnsubscribe",[uj],Object.getOwnPropertyDescriptor(Ge.prototype,"massUnsubscribe"),Ge.prototype),Ne(Ge.prototype,"setLowStreamParameter",[dj],Object.getOwnPropertyDescriptor(Ge.prototype,"setLowStreamParameter"),Ge.prototype),Ne(Ge.prototype,"enableDualStream",[hj],Object.getOwnPropertyDescriptor(Ge.prototype,"enableDualStream"),Ge.prototype),Ne(Ge.prototype,"disableDualStream",[fj],Object.getOwnPropertyDescriptor(Ge.prototype,"disableDualStream"),Ge.prototype),Ne(Ge.prototype,"setClientRole",[pj],Object.getOwnPropertyDescriptor(Ge.prototype,"setClientRole"),Ge.prototype),Ne(Ge.prototype,"setProxyServer",[mj],Object.getOwnPropertyDescriptor(Ge.prototype,"setProxyServer"),Ge.prototype),Ne(Ge.prototype,"setTurnServer",[gj],Object.getOwnPropertyDescriptor(Ge.prototype,"setTurnServer"),Ge.prototype),Ne(Ge.prototype,"setLicense",[vj],Object.getOwnPropertyDescriptor(Ge.prototype,"setLicense"),Ge.prototype),Ne(Ge.prototype,"startProxyServer",[Ej],Object.getOwnPropertyDescriptor(Ge.prototype,"startProxyServer"),Ge.prototype),Ne(Ge.prototype,"stopProxyServer",[_j],Object.getOwnPropertyDescriptor(Ge.prototype,"stopProxyServer"),Ge.prototype),Ne(Ge.prototype,"setLocalAccessPointsV2",[Sj],Object.getOwnPropertyDescriptor(Ge.prototype,"setLocalAccessPointsV2"),Ge.prototype),Ne(Ge.prototype,"setLocalAccessPoints",[yj],Object.getOwnPropertyDescriptor(Ge.prototype,"setLocalAccessPoints"),Ge.prototype),Ne(Ge.prototype,"setRemoteDefaultVideoStreamType",[Cj],Object.getOwnPropertyDescriptor(Ge.prototype,"setRemoteDefaultVideoStreamType"),Ge.prototype),Ne(Ge.prototype,"setRemoteVideoStreamType",[Tj],Object.getOwnPropertyDescriptor(Ge.prototype,"setRemoteVideoStreamType"),Ge.prototype),Ne(Ge.prototype,"setStreamFallbackOption",[bj],Object.getOwnPropertyDescriptor(Ge.prototype,"setStreamFallbackOption"),Ge.prototype),Ne(Ge.prototype,"setEncryptionConfig",[Rj],Object.getOwnPropertyDescriptor(Ge.prototype,"setEncryptionConfig"),Ge.prototype),Ne(Ge.prototype,"renewToken",[Ij],Object.getOwnPropertyDescriptor(Ge.prototype,"renewToken"),Ge.prototype),Ne(Ge.prototype,"enableAudioVolumeIndicator",[wj],Object.getOwnPropertyDescriptor(Ge.prototype,"enableAudioVolumeIndicator"),Ge.prototype),Ne(Ge.prototype,"startLiveStreaming",[Oj],Object.getOwnPropertyDescriptor(Ge.prototype,"startLiveStreaming"),Ge.prototype),Ne(Ge.prototype,"setLiveTranscoding",[Aj],Object.getOwnPropertyDescriptor(Ge.prototype,"setLiveTranscoding"),Ge.prototype),Ne(Ge.prototype,"stopLiveStreaming",[Nj],Object.getOwnPropertyDescriptor(Ge.prototype,"stopLiveStreaming"),Ge.prototype),Ne(Ge.prototype,"addInjectStreamUrl",[xj],Object.getOwnPropertyDescriptor(Ge.prototype,"addInjectStreamUrl"),Ge.prototype),Ne(Ge.prototype,"removeInjectStreamUrl",[Pj],Object.getOwnPropertyDescriptor(Ge.prototype,"removeInjectStreamUrl"),Ge.prototype),Ne(Ge.prototype,"startChannelMediaRelay",[Dj],Object.getOwnPropertyDescriptor(Ge.prototype,"startChannelMediaRelay"),Ge.prototype),Ne(Ge.prototype,"updateChannelMediaRelay",[Lj],Object.getOwnPropertyDescriptor(Ge.prototype,"updateChannelMediaRelay"),Ge.prototype),Ne(Ge.prototype,"stopChannelMediaRelay",[kj],Object.getOwnPropertyDescriptor(Ge.prototype,"stopChannelMediaRelay"),Ge.prototype),Ne(Ge.prototype,"sendCustomReportMessage",[Mj],Object.getOwnPropertyDescriptor(Ge.prototype,"sendCustomReportMessage"),Ge.prototype),Ne(Ge.prototype,"pickSVCLayer",[Uj],Object.getOwnPropertyDescriptor(Ge.prototype,"pickSVCLayer"),Ge.prototype),Ne(Ge.prototype,"enableContentInspect",[Fj],Object.getOwnPropertyDescriptor(Ge.prototype,"enableContentInspect"),Ge.prototype),Ne(Ge.prototype,"disableContentInspect",[Vj],Object.getOwnPropertyDescriptor(Ge.prototype,"disableContentInspect"),Ge.prototype),Ne(Ge.prototype,"setImageModeration",[jj],Object.getOwnPropertyDescriptor(Ge.prototype,"setImageModeration"),Ge.prototype),Ne(Ge.prototype,"getJoinChannelServiceRecords",[Bj],Object.getOwnPropertyDescriptor(Ge.prototype,"getJoinChannelServiceRecords"),Ge.prototype),Ne(Ge.prototype,"setPublishAudioFilterEnabled",[$j],Object.getOwnPropertyDescriptor(Ge.prototype,"setPublishAudioFilterEnabled"),Ge.prototype),Ge);class AJ extends FU{set currentState(r){r!==this._currentState&&(this._currentState=r,this.safeEmit(ma.AUDIO_SOURCE_STATE_CHANGE,this._currentState))}get currentState(){return this._currentState}constructor(r){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),L(this,"audioBuffer",void 0),L(this,"sourceNode",void 0),L(this,"startPlayTime",0),L(this,"startPlayOffset",0),L(this,"pausePlayTime",0),L(this,"options",void 0),L(this,"currentLoopCount",0),L(this,"currentPlaybackSpeed",100),L(this,"_currentState","stopped"),this.audioBuffer=r,this.options=o,this.startPlayOffset=this.options.startPlayTime||0}createWebAudioDiagram(){return this.context.createGain()}get duration(){return this.audioBuffer.duration}get playbackSpeed(){return this.currentPlaybackSpeed}get currentTime(){return this.currentState==="stopped"?0:this.currentState==="paused"?this.pausePlayTime:((this.context.currentTime-this.startPlayTime)*(this.playbackSpeed/100)+this.startPlayOffset)%this.audioBuffer.duration}updateOptions(r){this.currentState==="stopped"?(this.options=r,this.startPlayOffset=this.options.startPlayTime||0):j.warning("can not set audio source options")}startProcessAudioBuffer(){this.sourceNode&&this.stopProcessAudioBuffer(),this.sourceNode=this.createSourceNode(),this.startSourceNode(),this.currentState="playing"}pauseProcessAudioBuffer(){this.sourceNode&&this.currentState==="playing"&&(this.pausePlayTime=this.currentTime,this.sourceNode.onended=null,this.sourceNode.stop(),this.sourceNode.buffer=null,this.sourceNode=this.createSourceNode(),this.currentState="paused")}seekAudioBuffer(r){this.sourceNode&&(this.sourceNode.onended=null,this.currentState==="playing"&&this.sourceNode.stop(),this.sourceNode=this.createSourceNode(),this.currentState==="playing"?(this.startPlayOffset=r,this.startSourceNode()):this.currentState==="paused"&&(this.pausePlayTime=r))}resumeProcessAudioBuffer(){this.currentState==="paused"&&this.sourceNode&&(this.startPlayOffset=this.pausePlayTime,this.pausePlayTime=0,this.startSourceNode(),this.currentState="playing")}stopProcessAudioBuffer(){if(this.sourceNode){this.sourceNode.onended=null;try{this.sourceNode.stop()}catch{}this.reset()}}setAudioBufferPlaybackSpeed(r){this.sourceNode&&(this.currentState==="playing"&&(this.startPlayOffset=this.currentTime,this.startPlayTime=this.context.currentTime),this.sourceNode.playbackRate.value=r/100),this.currentPlaybackSpeed=r}startSourceNode(){this.sourceNode&&this.sourceNode.buffer&&(this.sourceNode.start(0,this.startPlayOffset),this.startPlayTime=this.context.currentTime,this.sourceNode.onended=this.handleSourceNodeEnded.bind(this))}createSourceNode(){const r=this.context.createBufferSource();return r.buffer=this.audioBuffer,r.loop=!!this.options.loop,r.connect(this.outputNode),r.playbackRate.value=this.currentPlaybackSpeed/100,r}handleSourceNodeEnded(){if(this.currentLoopCount+=1,this.options.cycle&&this.options.cycle>this.currentLoopCount)return this.startPlayOffset=0,this.sourceNode=void 0,void this.startProcessAudioBuffer();this.reset()}reset(){this.startPlayOffset=this.options.startPlayTime||0,this.currentState="stopped",this.sourceNode&&(this.sourceNode.disconnect(),this.sourceNode=void 0),this.currentLoopCount=0}}const Wj=new Map;async function NJ(n,r){let o=null;if(typeof n=="string"){const l=Wj.get(n);if(l)return j.debug("use cached audio resource: ",n),l;try{o=(await rl(()=>ns.get(n,{responseType:"arraybuffer"}),void 0,void 0,{maxRetryCount:3})).data}catch(d){throw new re(q.FETCH_AUDIO_FILE_FAILED,d.toString())}}else o=await new Le((d,p)=>{const _=new FileReader;_.onload=S=>{S.target?d(S.target.result):p(new re(q.READ_LOCAL_AUDIO_FILE_ERROR))},_.onerror=()=>{p(new re(q.READ_LOCAL_AUDIO_FILE_ERROR))},_.readAsArrayBuffer(n)});const s=await function(l){const d=n0();return new Le((p,_)=>{d.decodeAudioData(l,S=>{p(S)},S=>{_(new re(q.DECODE_AUDIO_FILE_FAILED,S.toString()))})})}(o);return typeof n=="string"&&r&&Wj.set(n,s),s}function Gj(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function Rb(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?Gj(Object(o),!0).forEach(function(s){L(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):Gj(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}function Tx(n,r,o,s){o.optimizationMode&&(s&&s.width&&s.height?(o.encoderConfig=Rb(Rb({},s),{},{bitrateMin:s.bitrateMin,bitrateMax:s.bitrateMax}),o.optimizationMode!=="motion"&&o.optimizationMode!=="detail"||(r.contentHint=o.optimizationMode,r.contentHint===o.optimizationMode?j.debug("[".concat(n,"] set content hint to"),o.optimizationMode):j.debug("[".concat(n,"] set content hint failed")))):j.warning("[".concat(n,"] can not apply optimization mode bitrate config, no encoderConfig")))}const xJ=un().name;function PJ(n,r,o,s){let l,d=0,p=null;return new Le((_,S)=>{setTimeout(()=>{l&&(l(),_(d))},r),l=MU(()=>{(function(){d>s&&l&&(l(),_(d));const I=o.getContext("2d");if(!I){const F=new re(q.UNEXPECTED_ERROR,"can not get canvas 2d context.");return j.error(F.toString()),void S(F)}I.drawImage(n,0,0,160,120);const b=I.getImageData(0,0,o.width,o.height),A=Math.floor(b.data.length/3);if(p){for(let F=0;F<A;F+=3)if(b.data[F]!==p[F])return d+=1,void(p=b.data);p=b.data}else p=b.data})()},30)})}class o_{constructor(r,o){L(this,"id",0),L(this,"element",void 0),L(this,"peerPair",void 0),L(this,"context",void 0),L(this,"audioPlayerElement",void 0),L(this,"audioTrack",void 0),o_.count+=1,this.id=o_.count,this.element=r,this.context=o}initPeers(){this.peerPair=[new RTCPeerConnection,new RTCPeerConnection],this.peerPair[1].ontrack=r=>{const o=document.createElement("audio");o.srcObject=new MediaStream([r.track]),o.play(),this.audioPlayerElement=o}}async switchSdp(){if(!this.peerPair)return;const r=async(s,l)=>{const d=l==="offer"?await s.createOffer():await s.createAnswer();return await s.setLocalDescription(d),s.iceGatheringState==="complete"?s.localDescription:new Le(p=>{s.onicegatheringstatechange=()=>{s.iceGatheringState==="complete"&&p(s.localDescription)}})},o=async(s,l)=>await s.setRemoteDescription(l);try{const s=await r(this.peerPair[0],"offer");await o(this.peerPair[1],s);const l=await r(this.peerPair[1],"answer");await o(this.peerPair[0],l)}catch(s){throw new re(q.LOCAL_AEC_ERROR,s.toString()).print()}}async getTracksFromMediaElement(r){if(this.audioTrack)return this.audioTrack;let o;try{r instanceof HTMLVideoElement&&(r.captureStream?r.captureStream():r.mozCaptureStream()),o=this.context.createMediaStreamDestination(),this.context.createMediaElementSource(r).connect(o)}catch(l){throw new re(q.LOCAL_AEC_ERROR,l.toString()).print()}if(!o)throw new re(q.LOCAL_AEC_ERROR,"no dest node when local aec").print();const s=o.stream.getAudioTracks()[0];return this.audioTrack=s,s}getElement(){return this.element}async startEchoCancellation(){this.context.resume(),this.peerPair&&this.close(),this.initPeers();const r=this.element,o=await this.getTracksFromMediaElement(r);this.peerPair&&this.peerPair[0].addTrack(o),await this.switchSdp()}close(){j.debug("close echo cancellation unit, id is",this.id),this.audioPlayerElement&&this.audioPlayerElement.pause(),this.peerPair&&this.peerPair.forEach(r=>{r.close()}),this.peerPair=void 0,this.audioPlayerElement=void 0}}var zj,Ib;L(o_,"count",0);const DJ=window.AudioContext||window.webkitAudioContext,LJ=new(zj=lt({report:Ze}),Ne((Ib=class{constructor(){L(this,"units",[]),L(this,"context",void 0)}processExternalMediaAEC(n){if(!this._doesEnvironmentNeedAEC())return j.debug("the system does not need to process local aec"),-1;this.context||(this.context=new DJ);let r=this.units.find(o=>o&&o.getElement()===n);return r||(r=new o_(n,this.context),this.units.push(r)),r.startEchoCancellation(),j.debug("start processing local audio echo cancellation, id is",r.id),r.id}_doesEnvironmentNeedAEC(){return un().name!==gn.SAFARI}}).prototype,"processExternalMediaAEC",[zj],Object.getOwnPropertyDescriptor(Ib.prototype,"processExternalMediaAEC"),Ib.prototype),Ib);function Kj(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function qj(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?Kj(Object(o),!0).forEach(function(s){L(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):Kj(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}const bx=window||document;function Yj(n){let r=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!bx)return;const o=ci._cspEventHandlerPointer;if(o&&r)return void console.error(o,r);const s=l=>{if(!(l&&l.blockedURI&&(ci.onSecurityPolicyViolation||ci.getListeners(al.SECURITY_POLICY_VIOLATION).length>0)))return;const d=l.blockedURI;de("CSP_DETECTED_HOSTNAME_LIST").some(p=>d.includes(p))&&(ci.onSecurityPolicyViolation&&typeof ci.onSecurityPolicyViolation=="function"&&ci.onSecurityPolicyViolation(l),ci.getListeners(al.SECURITY_POLICY_VIOLATION).length>0&&ci.safeEmit(al.SECURITY_POLICY_VIOLATION,l))};o&&bx.removeEventListener("securitypolicyviolation",o),(r||n&&typeof n=="function"||ci.getListeners(al.SECURITY_POLICY_VIOLATION).length>0)&&bx.addEventListener("securitypolicyviolation",s),ci._cspEventHandlerPointer=s}Dn("PROCESS_ID","process-".concat(Yn(8,""),"-").concat(Yn(4,""),"-").concat(Yn(4,""),"-").concat(Yn(4,""),"-").concat(Yn(12,""))),function(){const n=un();Eo.getDisplayMedia=function(r){return!!(navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia)}(),Eo.getStreamFromExtension=n.name===gn.CHROME&&Number(n.version)>34,Eo.supportUnifiedPlan=function(){if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;const r=new RTCPeerConnection;let o=!1;try{r.addTransceiver("audio"),o=!0}catch{}return r.close(),o}(),Eo.supportMinBitrate=n.name===gn.CHROME||n.name===gn.EDGE,Eo.supportSetRtpSenderParameters=function(){const r=un();return!window.RTCRtpSender||!window.RTCRtpSender.prototype.setParameters||!window.RTCRtpSender.prototype.getParameters?!1:!!au()||!(!Yi()&&!Fm())||r.name===gn.FIREFOX&&Number(r.version)>=64}(),n.name===gn.SAFARI&&(Number(n.version)>=14?Eo.supportDualStream=!0:Eo.supportDualStream=!1),Eo.webAudioMediaStreamDest=function(){const r=un();return!(r.name===gn.SAFARI&&Number(r.version)<12)}(),Eo.supportReplaceTrack=function(){return window.RTCRtpSender?typeof RTCRtpSender.prototype.replaceTrack=="function":!1}(),Eo.supportWebGL=typeof WebGLRenderingContext<"u",Eo.supportRequestFrame=!!window.CanvasCaptureMediaStreamTrack,au()||(Eo.webAudioWithAEC=!0),Eo.supportShareAudio=function(){const r=un();return(r.os===Oi.WIN_10||r.os===Oi.WIN_81||r.os===Oi.WIN_7||r.os===Oi.LINUX||r.os===Oi.MAC_OS)&&r.name===gn.CHROME&&Number(r.version)>=74}(),Eo.supportDualStreamEncoding=function(){const r=un();return de("DISABLE_WEBAUDIO")?!0:r.name==="Safari"&&Number(r.version)>=14||!!(r.name==="Chrome"&&/Windows/i.test(r.os||"")&&Number(r.version)>=100&&de("CHROME_DUAL_STREAM_USE_ENCODING"))}(),Eo.supportDataChannel=function(){return!!(CE(76)||function(r){const o=un();return!(o.name!==gn.FIREFOX||!o.osVersion)&&Number(o.version)>=r}(68)||function(r){const o=un();return!(o.name!==gn.SAFARI||!o.osVersion)&&Number(o.version)>=r}(14))}(),Eo.supportPCSetConfiguration=function(){const r=window.RTCPeerConnection;return!nr()&&!!r&&r.prototype.setConfiguration instanceof Function}(),Eo.supportWebRTCEncodedTransform=function(){const r=un();return r.name==="Chrome"&&Number(r.version)>=86}(),j.info("browser compatibility",JSON.stringify(Eo),JSON.stringify(n))}(),function(){let n;try{n=window.localStorage.getItem("websdk_ng_global_parameter")}catch(r){return void j.error("Error loading sdk config",r.message)}if(n)try{const r=JSON.parse(window.atob(n)),o=Date.now();j.debug("Loading global parameters from cache",r),Object.keys(r).forEach(s=>{if(Object.prototype.hasOwnProperty.call(pa,s)){const{value:l,expires:d}=r[s];if(d&&d<=o)return;Lf[s]=l,pa[s]=l}})}catch(r){j.error("Error loading mutableParamsCache: ".concat(n),r.message)}}(),Array.isArray(Lf.AREAS)&&Lf.AREAS.length>0&&LN(Lf.AREAS,!0);const ci=function(n){const r=new ur,o=n,s={getListeners:r.getListeners.bind(r),on:(l,d)=>(function(p,_){p===al.SECURITY_POLICY_VIOLATION&&Yj(_,!0)}(l,d),r.on.bind(r)(l,d)),addListener:r.addListener.bind(r),once:r.once.bind(r),off:r.off.bind(r),removeAllListeners:r.removeAllListeners.bind(r),emit:r.emit.bind(r),safeEmit:r.safeEmit.bind(r)};return qj(qj({},o),s)}({__CLIENT_LIST__:kf,__TRACK_LIST__:UE,VERSION:xs,BUILD:GA,setParameter:(n,r,o)=>{j.debug("setParameter key:".concat(n,", value:").concat(JSON.stringify(r))),Dn(n,r,o)},getParameter:de,getSupportedCodec:async function(){let n={audio:[],video:[]};try{let r=new RTCPeerConnection;r.addTransceiver("video",{direction:"recvonly"}),r.addTransceiver("audio",{direction:"recvonly"});const o=(await r.createOffer()).sdp;if(!o)return n;r.close(),r=null,n=function(s){const l={video:[],audio:[]};return s.match(/ VP8/i)&&l.video.push("VP8"),s.match(/ VP9/i)&&l.video.push("VP9"),s.match(/ AV1/i)&&l.video.push("AV1"),s.match(/ H264/i)&&l.video.push("H264"),s.match(/ H265/i)&&l.video.push("H265"),s.match(/ opus/i)&&l.audio.push("OPUS"),s.match(/ PCMU/i)&&l.audio.push("PCMU"),s.match(/ PCMA/i)&&l.audio.push("PCMA"),s.match(/ G722/i)&&l.audio.push("G722"),l}(o)}catch(r){throw new re(q.CREATE_OFFER_FAILED,r.toString&&r.toString()).print()}return n},checkSystemRequirements:function(){const n=Ze.reportApiInvoke(null,{name:Fr.CHECK_SYSTEM_REQUIREMENTS,options:[],tag:cr.TRACER});let r=!1;try{const d=window.RTCPeerConnection,p=navigator.mediaDevices&&navigator.mediaDevices.getUserMedia,_=window.WebSocket;r=!!(d&&p&&_)}catch(d){return j.error("check system requirement failed: ",d),!1}let o=!1;const s=un();s.name===gn.CHROME&&Number(s.version)>=58&&(!vA()||pT())&&(o=!0),s.name===gn.FIREFOX&&Number(s.version)>=56&&(o=!0),s.name===gn.OPERA&&Number(s.version)>=45&&(o=!0),s.name===gn.SAFARI&&Number(s.version)>=11&&(o=!0),(_T()||un().name===gn.QQ)&&(o=!0),j.debug("checkSystemRequirements, api:",r,"browser",o);const l=r&&o;return n.onSuccess(l),l},getDevices:function(n){return ls.enumerateDevices(!0,!0,n)},getMicrophones:function(n){return ls.getRecordingDevices(n)},getCameras:function(n){return ls.getCamerasDevices(n)},getElectronScreenSources:jU,getPlaybackDevices:function(n){return ls.getSpeakers(n)},createClient:function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{codec:"vp8",audioCodec:"opus",mode:"rtc"};const r=Ze.reportApiInvoke(null,{name:Fr.CREATE_CLIENT,options:[n],tag:cr.TRACER});try{pq(n)}catch(o){throw r.onError(o),o}return n.audioCodec===void 0&&(n.audioCodec="opus"),r.onSuccess(),new OJ(i_(i_({forceWaitGatewayResponse:!0},n),{},{role:n.mode==="rtc"?"host":n.role||"audience"}))},createCameraVideoTrack:async function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=Ze.reportApiInvoke(null,{tag:cr.TRACER,name:Fr.CREATE_CAM_VIDEO_TRACK,options:[Rb({},n)]}),o=sb(n),s=Yn(8,"track-cam-");let l=null;j.info("start create camera video track with config",JSON.stringify(n),"trackId",s);try{l=(await vc({video:o},s)).getVideoTracks()[0]||null}catch(p){throw r.onError(p),p}if(!l){const p=new re(q.UNEXPECTED_ERROR,"can not find track in media stream");return r.onError(p),p.throw()}n.optimizationMode&&Tx(s,l,n,Df(n.encoderConfig));const d=new l3(l,n,o,n.scalabiltyMode?$T(n.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},n.optimizationMode,s);return r.onSuccess(d.getTrackId()),j.info("create camera video success, trackId:",s),d},createCustomVideoTrack:function(n){const r=Ze.reportApiInvoke(null,{tag:cr.TRACER,name:Fr.CREATE_CUSTOM_VIDEO_TRACK,options:[n]}),o=new $r(n.mediaStreamTrack,{width:n.width,height:n.height,frameRate:n.frameRate,bitrateMax:n.bitrateMax,bitrateMin:n.bitrateMin},n.scalabiltyMode?$T(n.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},n.optimizationMode,Yn(8,"track-cus-"),[ai.CUSTOM_TRACK]);return r.onSuccess(o.getTrackId()),j.info("create custom video track success with config",n,"trackId",o.getTrackId()),o},createScreenVideoTrack:async function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"disable";const o=Ze.reportApiInvoke(null,{tag:cr.TRACER,name:Fr.CREATE_SCREEN_VIDEO_TRACK,options:[Rb({},n),r]});n.encoderConfig?typeof n.encoderConfig=="string"||n.encoderConfig.width&&n.encoderConfig.height||(n.encoderConfig.width={max:1920},n.encoderConfig.height={max:1080}):n.encoderConfig="1080p_2";const s=iX(n),l=Yn(8,"track-scr-v-");let d=null,p=null;const _=Pr();if(!_.supportShareAudio&&r==="enable"){const b=new re(q.NOT_SUPPORTED,"your browser or platform is not support share-screen with audio");return o.onError(b),b.throw()}j.info("start create screen video track with config",n,"withAudio",r,"trackId",l);try{const b=await vc({screen:s,screenAudio:r==="auto"?_.supportShareAudio:r==="enable"},l);d=b.getVideoTracks()[0]||null,p=b.getAudioTracks()[0]||null}catch(b){throw o.onError(b),b}if(!d){const b=new re(q.UNEXPECTED_ERROR,"can not find track in media stream");return o.onError(b),b.throw()}if(!p&&r==="enable"){d&&d.stop();const b=new re(q.SHARE_AUDIO_NOT_ALLOWED);return o.onError(b),b.throw()}n.optimizationMode||(n.optimizationMode="detail"),n.optimizationMode&&(Tx(l,d,n,n.encoderConfig&&KA(n.encoderConfig)),n.encoderConfig&&typeof n.encoderConfig!="string"&&(n.encoderConfig.bitrateMin=n.encoderConfig.bitrateMax));const S=new $r(d,n.encoderConfig?KA(n.encoderConfig):{},n.scalabiltyMode?$T(n.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},n.optimizationMode,l,[ai.SCREEN_TRACK]);if(!p)return o.onSuccess(S.getTrackId()),j.info("create screen video track success","video:",S.getTrackId()),S;const I=new no(p,void 0,Yn(8,"track-scr-a-"),!1,!0);return o.onSuccess([S.getTrackId(),I.getTrackId()]),j.info("create screen video track success","video:",S.getTrackId(),"audio:",I.getTrackId()),[S,I]},createMicrophoneAndCameraTracks:async function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const o=Ze.reportApiInvoke(null,{tag:cr.TRACER,name:Fr.CREATE_MIC_AND_CAM_TRACKS,options:[n,r]}),s=sb(r),l=OF(n),d=Yn(8,"track-mic-"),p=Yn(8,"track-cam-");let _=null,S=null;j.info("start create camera video track(".concat(p,") and microphone audio track(").concat(d,") with config, audio: ").concat(JSON.stringify(n),", video: ").concat(JSON.stringify(r)));try{const A=await vc({audio:l,video:s},"".concat(d,"-").concat(p));_=A.getAudioTracks()[0],S=A.getVideoTracks()[0]}catch(A){throw o.onError(A),A}if(!_||!S){const A=new re(q.UNEXPECTED_ERROR,"can not find tracks in media stream");return o.onError(A),A.throw()}r.optimizationMode&&Tx(p,S,r,Df(r.encoderConfig));const I=new QT(_,n,l,d),b=new l3(S,r,s,r.scalabiltyMode?$T(r.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},r.optimizationMode,p);return o.onSuccess([I.getTrackId(),b.getTrackId()]),j.info("create camera video track(".concat(p,") and microphone audio track(").concat(d,") success")),[I,b]},createMicrophoneAudioTrack:async function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=Ze.reportApiInvoke(null,{tag:cr.TRACER,name:Fr.CREATE_MIC_AUDIO_TRACK,options:[n]}),o=OF(n),s=Yn(8,"track-mic-");let l=null;j.info("start create microphone audio track with config",JSON.stringify(n),"trackId",s);try{l=(await vc({audio:o},s)).getAudioTracks()[0]||null}catch(p){throw r.onError(p),p}if(!l){const p=new re(q.UNEXPECTED_ERROR,"can not find track in media stream");return r.onError(p),p.throw()}const d=new QT(l,n,o,s);return r.onSuccess(d.getTrackId()),j.info("create microphone audio track success, trackId:",s),d},createCustomAudioTrack:function(n){const r=Ze.reportApiInvoke(null,{tag:cr.TRACER,name:Fr.CREATE_CUSTOM_AUDIO_TRACK,options:[n]}),o=new no(n.mediaStreamTrack,n.encoderConfig?HT(n.encoderConfig):{},Yn(8,"track-cus-"),!1,!0);return j.info("create custom audio track success with config",n,"trackId",o.getTrackId()),r.onSuccess(o.getTrackId()),o},createBufferSourceAudioTrack:async function(n){const r=Ze.reportApiInvoke(null,{tag:cr.TRACER,name:Fr.CREATE_BUFFER_AUDIO_TRACK,options:[n]});if(de("DISABLE_WEBAUDIO"))throw new re(q.NOT_SUPPORTED,"can not create BufferSourceAudioTrack when WebAudio disabled");const o=Yn(8,"track-buf-");j.info("start create buffer source audio track with config",JSON.stringify(n),"trackId",o);const s=n.source;if(!(n.source instanceof AudioBuffer))try{n.source=await NJ(n.source,n.cacheOnlineFile)}catch(p){return r.onError(p),p.throw()}const l=new AJ(n.source),d=new kY(s,l,n.encoderConfig?HT(n.encoderConfig):{},o);return j.info("create buffer source audio track success, trackId:",o),r.onSuccess(d.getTrackId()),d},setAppType:function(n){if(j.debug("setAppType: ".concat(n)),!(Number.isInteger(n)&&n>=0))throw j.debug("Invalid appType"),new re(q.INVALID_PARAMS,"invalid app type",n);Dn("APP_TYPE",Math.floor(n))},setLogLevel:function(n){j.setLogLevel(n)},enableLogUpload:function(){de("USE_NEW_LOG")?Dn("UPLOAD_LOG",!0):j.enableLogUpload()},disableLogUpload:function(){de("USE_NEW_LOG")?Dn("UPLOAD_LOG",!1):j.disableLogUpload()},createChannelMediaRelayConfiguration:function(){return new yF},checkAudioTrackIsActive:async function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5e3;const o=Ze.reportApiInvoke(null,{tag:cr.TRACER,name:Fr.CHECK_AUDIO_TRACK_IS_ACTIVE,options:[r]});if(!(n instanceof no||n instanceof _b)){const S=new re(q.INVALID_TRACK,"the parameter is not a audio track");return o.onError(S),S.throw()}r&&r<1e3&&(r=1e3);const s=n instanceof no?n.getTrackLabel():"remote_track",l=n.getVolumeLevel();let d=l,p=l;const _=Date.now();return new Le(S=>{const I=setInterval(()=>{const b=n.getVolumeLevel();d=b>d?b:d,p=b<p?b:p;const A=d-p>1e-4,F=Date.now()-_;if(A||F>r){clearInterval(I);const W=A,Z={duration:F,deviceLabel:s,maxVolumeLevel:d,result:W};j.info("[track-".concat(n.getTrackId(),"] check audio track active completed. ").concat(JSON.stringify(Z))),o.onSuccess(Z),S(W)}},200)})},checkVideoTrackIsActive:async function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5e3;const o=Ze.reportApiInvoke(null,{tag:cr.TRACER,name:Fr.CHECK_VIDEO_TRACK_IS_ACTIVE,options:[r]});if(!(n instanceof $r||n instanceof Eb)){const F=new re(q.INVALID_TRACK,"the parameter is not a video track");return o.onError(F),F.throw()}const s=4;r&&r<1e3&&(r=1e3);const l=n instanceof $r?n.getTrackLabel():"remote_track",d=n.getMediaStreamTrack(!0),p=document.createElement("video");p.style.width="1px",p.style.height="1px",p.setAttribute("muted",""),p.muted=!0,p.setAttribute("playsinline",""),p.controls=!1,(Yi()||Fm())&&(p.style.opacity="0.01",p.style.position="fixed",p.style.left="0",p.style.top="0",document.body.appendChild(p)),p.srcObject=new MediaStream([d]),p.play();const _=document.createElement("canvas");_.width=160,_.height=120;let S=0,I=0;try{const F=Date.now();S=await PJ(p,r,_,s),I=Date.now()-F}catch(F){throw o.onError(F),F}xJ===gn.SAFARI&&(p.pause(),p.remove()),p.srcObject=null;const b=S>s,A={duration:I,changedPicNum:S,deviceLabel:l,result:b};return j.info("[track-".concat(n.getTrackId(),"] check video track active completed. ").concat(JSON.stringify(A))),o.onSuccess(A),b},setArea:LN,audioElementPlayCenter:La,processExternalMediaAEC:function(n){LJ.processExternalMediaAEC(n)},registerExtensions:function(n){n.forEach(r=>{const o=r;o.__registered__=!0,o.logger.hookLog=j.extLog,o.reporter.hookApiInvoke=Ze.extApiInvoke,o.parameters&&Object.keys(o.parameters).forEach(s=>{o.parameters[s]=de(s)})})},ChannelMediaRelayError:eh,ChannelMediaRelayEvent:il,ChannelMediaRelayState:No,RemoteStreamFallbackType:dN,RemoteStreamType:uN,ConnectionDisconnectedReason:yn,AudienceLatencyLevelType:oN,AREAS:nn});return Object.defineProperties(ci,{onAudioAutoplayFailed:{get:()=>ss.onAudioAutoplayFailed,set:n=>{ss.onAudioAutoplayFailed=n}},onAutoplayFailed:{get:()=>ss.onAutoplayFailed,set:n=>{ss.onAutoplayFailed=n}},_onSecurityPolicyViolation:{value:void 0,writable:!0},_cspEventHandlerPointer:{value:void 0,writable:!0},onSecurityPolicyViolation:{get:()=>ci._onSecurityPolicyViolation,set(n){ci._onSecurityPolicyViolation=n,Yj(n)}}}),ls.on(Hu.CAMERA_DEVICE_CHANGED,n=>{j.info("camera device changed",JSON.stringify(n)),ci.onCameraChanged&&ci.onCameraChanged(n),ci.safeEmit(al.CAMERA_CHANGED,n)}),ls.on(Hu.RECORDING_DEVICE_CHANGED,n=>{j.info("microphone device changed",JSON.stringify(n)),ci.onMicrophoneChanged&&ci.onMicrophoneChanged(n),ci.safeEmit(al.MICROPHONE_CHANGED,n)}),ls.on(Hu.PLAYOUT_DEVICE_CHANGED,n=>{j.debug("playout device changed",JSON.stringify(n)),ci.onPlaybackDeviceChanged&&ci.onPlaybackDeviceChanged(n),ci.safeEmit(al.PLAYBACK_DEVICE_CHANGED,n)}),La.onAutoplayFailed=()=>{j.info("detect audio element autoplay failed"),ss.onAudioAutoplayFailed&&ss.onAudioAutoplayFailed()},Cn.on("autoplay-failed",()=>{j.info("detect webaudio autoplay failed"),ss.onAudioAutoplayFailed&&ss.onAudioAutoplayFailed(),ci.safeEmit(al.AUTOPLAY_FAILED)}),window&&(window.__ARTC__=ci),ci})})(N$);var oQ=N$.exports;const dp=jh(oQ);var TD={},P$={exports:{}},Qs={},D$={exports:{}},L$={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(ve,Re){var Ce=ve.length;ve.push(Re);e:for(;0<Ce;){var pe=Ce-1>>>1,fe=ve[pe];if(0<c(fe,Re))ve[pe]=Re,ve[Ce]=fe,Ce=pe;else break e}}function i(ve){return ve.length===0?null:ve[0]}function a(ve){if(ve.length===0)return null;var Re=ve[0],Ce=ve.pop();if(Ce!==Re){ve[0]=Ce;e:for(var pe=0,fe=ve.length,_e=fe>>>1;pe<_e;){var ge=2*(pe+1)-1,Ue=ve[ge],Fe=ge+1,ot=ve[Fe];if(0>c(Ue,Ce))Fe<fe&&0>c(ot,Ue)?(ve[pe]=ot,ve[Fe]=Ce,pe=Fe):(ve[pe]=Ue,ve[ge]=Ce,pe=ge);else if(Fe<fe&&0>c(ot,Ce))ve[pe]=ot,ve[Fe]=Ce,pe=Fe;else break e}}return Re}function c(ve,Re){var Ce=ve.sortIndex-Re.sortIndex;return Ce!==0?Ce:ve.id-Re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;e.unstable_now=function(){return u.now()}}else{var f=Date,m=f.now();e.unstable_now=function(){return f.now()-m}}var g=[],E=[],y=1,T=null,R=3,P=!1,O=!1,N=!1,M=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(ve){for(var Re=i(E);Re!==null;){if(Re.callback===null)a(E);else if(Re.startTime<=ve)a(E),Re.sortIndex=Re.expirationTime,t(g,Re);else break;Re=i(E)}}function V(ve){if(N=!1,k(ve),!O)if(i(g)!==null)O=!0,he(H);else{var Re=i(E);Re!==null&&Se(V,Re.startTime-ve)}}function H(ve,Re){O=!1,N&&(N=!1,D(K),K=-1),P=!0;var Ce=R;try{for(k(Re),T=i(g);T!==null&&(!(T.expirationTime>Re)||ve&&!ie());){var pe=T.callback;if(typeof pe=="function"){T.callback=null,R=T.priorityLevel;var fe=pe(T.expirationTime<=Re);Re=e.unstable_now(),typeof fe=="function"?T.callback=fe:T===i(g)&&a(g),k(Re)}else a(g);T=i(g)}if(T!==null)var _e=!0;else{var ge=i(E);ge!==null&&Se(V,ge.startTime-Re),_e=!1}return _e}finally{T=null,R=Ce,P=!1}}var $=!1,G=null,K=-1,Q=5,z=-1;function ie(){return!(e.unstable_now()-z<Q)}function J(){if(G!==null){var ve=e.unstable_now();z=ve;var Re=!0;try{Re=G(!0,ve)}finally{Re?Y():($=!1,G=null)}}else $=!1}var Y;if(typeof x=="function")Y=function(){x(J)};else if(typeof MessageChannel<"u"){var oe=new MessageChannel,ue=oe.port2;oe.port1.onmessage=J,Y=function(){ue.postMessage(null)}}else Y=function(){M(J,0)};function he(ve){G=ve,$||($=!0,Y())}function Se(ve,Re){K=M(function(){ve(e.unstable_now())},Re)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ve){ve.callback=null},e.unstable_continueExecution=function(){O||P||(O=!0,he(H))},e.unstable_forceFrameRate=function(ve){0>ve||125<ve?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Q=0<ve?Math.floor(1e3/ve):5},e.unstable_getCurrentPriorityLevel=function(){return R},e.unstable_getFirstCallbackNode=function(){return i(g)},e.unstable_next=function(ve){switch(R){case 1:case 2:case 3:var Re=3;break;default:Re=R}var Ce=R;R=Re;try{return ve()}finally{R=Ce}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(ve,Re){switch(ve){case 1:case 2:case 3:case 4:case 5:break;default:ve=3}var Ce=R;R=ve;try{return Re()}finally{R=Ce}},e.unstable_scheduleCallback=function(ve,Re,Ce){var pe=e.unstable_now();switch(typeof Ce=="object"&&Ce!==null?(Ce=Ce.delay,Ce=typeof Ce=="number"&&0<Ce?pe+Ce:pe):Ce=pe,ve){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=Ce+fe,ve={id:y++,callback:Re,priorityLevel:ve,startTime:Ce,expirationTime:fe,sortIndex:-1},Ce>pe?(ve.sortIndex=Ce,t(E,ve),i(g)===null&&ve===i(E)&&(N?(D(K),K=-1):N=!0,Se(V,Ce-pe))):(ve.sortIndex=fe,t(g,ve),O||P||(O=!0,he(H))),ve},e.unstable_shouldYield=ie,e.unstable_wrapCallback=function(ve){var Re=R;return function(){var Ce=R;R=Re;try{return ve.apply(this,arguments)}finally{R=Ce}}}})(L$);D$.exports=L$;var aQ=D$.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k$=C,Xs=aQ;function tt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var M$=new Set,Y_={};function Ep(e,t){ig(e,t),ig(e+"Capture",t)}function ig(e,t){for(Y_[e]=t,e=0;e<t.length;e++)M$.add(t[e])}var od=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),bD=Object.prototype.hasOwnProperty,sQ=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,eB={},tB={};function cQ(e){return bD.call(tB,e)?!0:bD.call(eB,e)?!1:sQ.test(e)?tB[e]=!0:(eB[e]=!0,!1)}function lQ(e,t,i,a){if(i!==null&&i.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return a?!1:i!==null?!i.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function uQ(e,t,i,a){if(t===null||typeof t>"u"||lQ(e,t,i,a))return!0;if(a)return!1;if(i!==null)switch(i.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Va(e,t,i,a,c,u,f){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=a,this.attributeNamespace=c,this.mustUseProperty=i,this.propertyName=e,this.type=t,this.sanitizeURL=u,this.removeEmptyString=f}var ta={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ta[e]=new Va(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ta[t]=new Va(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ta[e]=new Va(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ta[e]=new Va(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ta[e]=new Va(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ta[e]=new Va(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ta[e]=new Va(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ta[e]=new Va(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ta[e]=new Va(e,5,!1,e.toLowerCase(),null,!1,!1)});var Ok=/[\-:]([a-z])/g;function Ak(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Ok,Ak);ta[t]=new Va(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Ok,Ak);ta[t]=new Va(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Ok,Ak);ta[t]=new Va(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ta[e]=new Va(e,1,!1,e.toLowerCase(),null,!1,!1)});ta.xlinkHref=new Va("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ta[e]=new Va(e,1,!1,e.toLowerCase(),null,!0,!0)});function Nk(e,t,i,a){var c=ta.hasOwnProperty(t)?ta[t]:null;(c!==null?c.type!==0:a||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(uQ(t,i,c,a)&&(i=null),a||c===null?cQ(t)&&(i===null?e.removeAttribute(t):e.setAttribute(t,""+i)):c.mustUseProperty?e[c.propertyName]=i===null?c.type===3?!1:"":i:(t=c.attributeName,a=c.attributeNamespace,i===null?e.removeAttribute(t):(c=c.type,i=c===3||c===4&&i===!0?"":""+i,a?e.setAttributeNS(a,t,i):e.setAttribute(t,i))))}var pd=k$.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ab=Symbol.for("react.element"),D0=Symbol.for("react.portal"),L0=Symbol.for("react.fragment"),xk=Symbol.for("react.strict_mode"),RD=Symbol.for("react.profiler"),U$=Symbol.for("react.provider"),F$=Symbol.for("react.context"),Pk=Symbol.for("react.forward_ref"),ID=Symbol.for("react.suspense"),wD=Symbol.for("react.suspense_list"),Dk=Symbol.for("react.memo"),_h=Symbol.for("react.lazy"),V$=Symbol.for("react.offscreen"),nB=Symbol.iterator;function a_(e){return e===null||typeof e!="object"?null:(e=nB&&e[nB]||e["@@iterator"],typeof e=="function"?e:null)}var Ri=Object.assign,Ix;function b_(e){if(Ix===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);Ix=t&&t[1]||""}return`
`+Ix+e}var wx=!1;function Ox(e,t){if(!e||wx)return"";wx=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(E){var a=E}Reflect.construct(e,[],t)}else{try{t.call()}catch(E){a=E}e.call(t.prototype)}else{try{throw Error()}catch(E){a=E}e()}}catch(E){if(E&&a&&typeof E.stack=="string"){for(var c=E.stack.split(`
`),u=a.stack.split(`
`),f=c.length-1,m=u.length-1;1<=f&&0<=m&&c[f]!==u[m];)m--;for(;1<=f&&0<=m;f--,m--)if(c[f]!==u[m]){if(f!==1||m!==1)do if(f--,m--,0>m||c[f]!==u[m]){var g=`
`+c[f].replace(" at new "," at ");return e.displayName&&g.includes("<anonymous>")&&(g=g.replace("<anonymous>",e.displayName)),g}while(1<=f&&0<=m);break}}}finally{wx=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?b_(e):""}function dQ(e){switch(e.tag){case 5:return b_(e.type);case 16:return b_("Lazy");case 13:return b_("Suspense");case 19:return b_("SuspenseList");case 0:case 2:case 15:return e=Ox(e.type,!1),e;case 11:return e=Ox(e.type.render,!1),e;case 1:return e=Ox(e.type,!0),e;default:return""}}function OD(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case L0:return"Fragment";case D0:return"Portal";case RD:return"Profiler";case xk:return"StrictMode";case ID:return"Suspense";case wD:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case F$:return(e.displayName||"Context")+".Consumer";case U$:return(e._context.displayName||"Context")+".Provider";case Pk:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Dk:return t=e.displayName||null,t!==null?t:OD(e.type)||"Memo";case _h:t=e._payload,e=e._init;try{return OD(e(t))}catch{}}return null}function hQ(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return OD(t);case 8:return t===xk?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Mh(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function j$(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function fQ(e){var t=j$(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var c=i.get,u=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(f){a=""+f,u.call(this,f)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return a},setValue:function(f){a=""+f},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Nb(e){e._valueTracker||(e._valueTracker=fQ(e))}function B$(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),a="";return e&&(a=j$(e)?e.checked?"true":"false":e.value),e=a,e!==i?(t.setValue(e),!0):!1}function jR(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function AD(e,t){var i=t.checked;return Ri({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??e._wrapperState.initialChecked})}function rB(e,t){var i=t.defaultValue==null?"":t.defaultValue,a=t.checked!=null?t.checked:t.defaultChecked;i=Mh(t.value!=null?t.value:i),e._wrapperState={initialChecked:a,initialValue:i,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function $$(e,t){t=t.checked,t!=null&&Nk(e,"checked",t,!1)}function ND(e,t){$$(e,t);var i=Mh(t.value),a=t.type;if(i!=null)a==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?xD(e,t.type,i):t.hasOwnProperty("defaultValue")&&xD(e,t.type,Mh(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function iB(e,t,i){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!(a!=="submit"&&a!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,i||t===e.value||(e.value=t),e.defaultValue=t}i=e.name,i!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,i!==""&&(e.name=i)}function xD(e,t,i){(t!=="number"||jR(e.ownerDocument)!==e)&&(i==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}var R_=Array.isArray;function Y0(e,t,i,a){if(e=e.options,t){t={};for(var c=0;c<i.length;c++)t["$"+i[c]]=!0;for(i=0;i<e.length;i++)c=t.hasOwnProperty("$"+e[i].value),e[i].selected!==c&&(e[i].selected=c),c&&a&&(e[i].defaultSelected=!0)}else{for(i=""+Mh(i),t=null,c=0;c<e.length;c++){if(e[c].value===i){e[c].selected=!0,a&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function PD(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(tt(91));return Ri({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function oB(e,t){var i=t.value;if(i==null){if(i=t.children,t=t.defaultValue,i!=null){if(t!=null)throw Error(tt(92));if(R_(i)){if(1<i.length)throw Error(tt(93));i=i[0]}t=i}t==null&&(t=""),i=t}e._wrapperState={initialValue:Mh(i)}}function H$(e,t){var i=Mh(t.value),a=Mh(t.defaultValue);i!=null&&(i=""+i,i!==e.value&&(e.value=i),t.defaultValue==null&&e.defaultValue!==i&&(e.defaultValue=i)),a!=null&&(e.defaultValue=""+a)}function aB(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function W$(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function DD(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?W$(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var xb,G$=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,i,a,c){MSApp.execUnsafeLocalFunction(function(){return e(t,i,a,c)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(xb=xb||document.createElement("div"),xb.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=xb.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function X_(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var N_={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pQ=["Webkit","ms","Moz","O"];Object.keys(N_).forEach(function(e){pQ.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),N_[t]=N_[e]})});function z$(e,t,i){return t==null||typeof t=="boolean"||t===""?"":i||typeof t!="number"||t===0||N_.hasOwnProperty(e)&&N_[e]?(""+t).trim():t+"px"}function K$(e,t){e=e.style;for(var i in t)if(t.hasOwnProperty(i)){var a=i.indexOf("--")===0,c=z$(i,t[i],a);i==="float"&&(i="cssFloat"),a?e.setProperty(i,c):e[i]=c}}var mQ=Ri({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function LD(e,t){if(t){if(mQ[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(tt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(tt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(tt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(tt(62))}}function kD(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var MD=null;function Lk(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var UD=null,X0=null,J0=null;function sB(e){if(e=AS(e)){if(typeof UD!="function")throw Error(tt(280));var t=e.stateNode;t&&(t=W1(t),UD(e.stateNode,e.type,t))}}function q$(e){X0?J0?J0.push(e):J0=[e]:X0=e}function Y$(){if(X0){var e=X0,t=J0;if(J0=X0=null,sB(e),t)for(e=0;e<t.length;e++)sB(t[e])}}function X$(e,t){return e(t)}function J$(){}var Ax=!1;function Q$(e,t,i){if(Ax)return e(t,i);Ax=!0;try{return X$(e,t,i)}finally{Ax=!1,(X0!==null||J0!==null)&&(J$(),Y$())}}function J_(e,t){var i=e.stateNode;if(i===null)return null;var a=W1(i);if(a===null)return null;i=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(tt(231,t,typeof i));return i}var FD=!1;if(od)try{var s_={};Object.defineProperty(s_,"passive",{get:function(){FD=!0}}),window.addEventListener("test",s_,s_),window.removeEventListener("test",s_,s_)}catch{FD=!1}function gQ(e,t,i,a,c,u,f,m,g){var E=Array.prototype.slice.call(arguments,3);try{t.apply(i,E)}catch(y){this.onError(y)}}var x_=!1,BR=null,$R=!1,VD=null,vQ={onError:function(e){x_=!0,BR=e}};function EQ(e,t,i,a,c,u,f,m,g){x_=!1,BR=null,gQ.apply(vQ,arguments)}function _Q(e,t,i,a,c,u,f,m,g){if(EQ.apply(this,arguments),x_){if(x_){var E=BR;x_=!1,BR=null}else throw Error(tt(198));$R||($R=!0,VD=E)}}function _p(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function Z$(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function cB(e){if(_p(e)!==e)throw Error(tt(188))}function SQ(e){var t=e.alternate;if(!t){if(t=_p(e),t===null)throw Error(tt(188));return t!==e?null:e}for(var i=e,a=t;;){var c=i.return;if(c===null)break;var u=c.alternate;if(u===null){if(a=c.return,a!==null){i=a;continue}break}if(c.child===u.child){for(u=c.child;u;){if(u===i)return cB(c),e;if(u===a)return cB(c),t;u=u.sibling}throw Error(tt(188))}if(i.return!==a.return)i=c,a=u;else{for(var f=!1,m=c.child;m;){if(m===i){f=!0,i=c,a=u;break}if(m===a){f=!0,a=c,i=u;break}m=m.sibling}if(!f){for(m=u.child;m;){if(m===i){f=!0,i=u,a=c;break}if(m===a){f=!0,a=u,i=c;break}m=m.sibling}if(!f)throw Error(tt(189))}}if(i.alternate!==a)throw Error(tt(190))}if(i.tag!==3)throw Error(tt(188));return i.stateNode.current===i?e:t}function eH(e){return e=SQ(e),e!==null?tH(e):null}function tH(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=tH(e);if(t!==null)return t;e=e.sibling}return null}var nH=Xs.unstable_scheduleCallback,lB=Xs.unstable_cancelCallback,yQ=Xs.unstable_shouldYield,CQ=Xs.unstable_requestPaint,Gi=Xs.unstable_now,TQ=Xs.unstable_getCurrentPriorityLevel,kk=Xs.unstable_ImmediatePriority,rH=Xs.unstable_UserBlockingPriority,HR=Xs.unstable_NormalPriority,bQ=Xs.unstable_LowPriority,iH=Xs.unstable_IdlePriority,j1=null,Su=null;function RQ(e){if(Su&&typeof Su.onCommitFiberRoot=="function")try{Su.onCommitFiberRoot(j1,e,void 0,(e.current.flags&128)===128)}catch{}}var yl=Math.clz32?Math.clz32:OQ,IQ=Math.log,wQ=Math.LN2;function OQ(e){return e>>>=0,e===0?32:31-(IQ(e)/wQ|0)|0}var Pb=64,Db=4194304;function I_(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function WR(e,t){var i=e.pendingLanes;if(i===0)return 0;var a=0,c=e.suspendedLanes,u=e.pingedLanes,f=i&268435455;if(f!==0){var m=f&~c;m!==0?a=I_(m):(u&=f,u!==0&&(a=I_(u)))}else f=i&~c,f!==0?a=I_(f):u!==0&&(a=I_(u));if(a===0)return 0;if(t!==0&&t!==a&&!(t&c)&&(c=a&-a,u=t&-t,c>=u||c===16&&(u&4194240)!==0))return t;if(a&4&&(a|=i&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=a;0<t;)i=31-yl(t),c=1<<i,a|=e[i],t&=~c;return a}function AQ(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function NQ(e,t){for(var i=e.suspendedLanes,a=e.pingedLanes,c=e.expirationTimes,u=e.pendingLanes;0<u;){var f=31-yl(u),m=1<<f,g=c[f];g===-1?(!(m&i)||m&a)&&(c[f]=AQ(m,t)):g<=t&&(e.expiredLanes|=m),u&=~m}}function jD(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function oH(){var e=Pb;return Pb<<=1,!(Pb&4194240)&&(Pb=64),e}function Nx(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function wS(e,t,i){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-yl(t),e[t]=i}function xQ(e,t){var i=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<i;){var c=31-yl(i),u=1<<c;t[c]=0,a[c]=-1,e[c]=-1,i&=~u}}function Mk(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var a=31-yl(i),c=1<<a;c&t|e[a]&t&&(e[a]|=t),i&=~c}}var Ir=0;function aH(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var sH,Uk,cH,lH,uH,BD=!1,Lb=[],Oh=null,Ah=null,Nh=null,Q_=new Map,Z_=new Map,yh=[],PQ="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function uB(e,t){switch(e){case"focusin":case"focusout":Oh=null;break;case"dragenter":case"dragleave":Ah=null;break;case"mouseover":case"mouseout":Nh=null;break;case"pointerover":case"pointerout":Q_.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Z_.delete(t.pointerId)}}function c_(e,t,i,a,c,u){return e===null||e.nativeEvent!==u?(e={blockedOn:t,domEventName:i,eventSystemFlags:a,nativeEvent:u,targetContainers:[c]},t!==null&&(t=AS(t),t!==null&&Uk(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function DQ(e,t,i,a,c){switch(t){case"focusin":return Oh=c_(Oh,e,t,i,a,c),!0;case"dragenter":return Ah=c_(Ah,e,t,i,a,c),!0;case"mouseover":return Nh=c_(Nh,e,t,i,a,c),!0;case"pointerover":var u=c.pointerId;return Q_.set(u,c_(Q_.get(u)||null,e,t,i,a,c)),!0;case"gotpointercapture":return u=c.pointerId,Z_.set(u,c_(Z_.get(u)||null,e,t,i,a,c)),!0}return!1}function dH(e){var t=ep(e.target);if(t!==null){var i=_p(t);if(i!==null){if(t=i.tag,t===13){if(t=Z$(i),t!==null){e.blockedOn=t,uH(e.priority,function(){cH(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function _R(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=$D(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(i===null){i=e.nativeEvent;var a=new i.constructor(i.type,i);MD=a,i.target.dispatchEvent(a),MD=null}else return t=AS(i),t!==null&&Uk(t),e.blockedOn=i,!1;t.shift()}return!0}function dB(e,t,i){_R(e)&&i.delete(t)}function LQ(){BD=!1,Oh!==null&&_R(Oh)&&(Oh=null),Ah!==null&&_R(Ah)&&(Ah=null),Nh!==null&&_R(Nh)&&(Nh=null),Q_.forEach(dB),Z_.forEach(dB)}function l_(e,t){e.blockedOn===t&&(e.blockedOn=null,BD||(BD=!0,Xs.unstable_scheduleCallback(Xs.unstable_NormalPriority,LQ)))}function eS(e){function t(c){return l_(c,e)}if(0<Lb.length){l_(Lb[0],e);for(var i=1;i<Lb.length;i++){var a=Lb[i];a.blockedOn===e&&(a.blockedOn=null)}}for(Oh!==null&&l_(Oh,e),Ah!==null&&l_(Ah,e),Nh!==null&&l_(Nh,e),Q_.forEach(t),Z_.forEach(t),i=0;i<yh.length;i++)a=yh[i],a.blockedOn===e&&(a.blockedOn=null);for(;0<yh.length&&(i=yh[0],i.blockedOn===null);)dH(i),i.blockedOn===null&&yh.shift()}var Q0=pd.ReactCurrentBatchConfig,GR=!0;function kQ(e,t,i,a){var c=Ir,u=Q0.transition;Q0.transition=null;try{Ir=1,Fk(e,t,i,a)}finally{Ir=c,Q0.transition=u}}function MQ(e,t,i,a){var c=Ir,u=Q0.transition;Q0.transition=null;try{Ir=4,Fk(e,t,i,a)}finally{Ir=c,Q0.transition=u}}function Fk(e,t,i,a){if(GR){var c=$D(e,t,i,a);if(c===null)jx(e,t,a,zR,i),uB(e,a);else if(DQ(c,e,t,i,a))a.stopPropagation();else if(uB(e,a),t&4&&-1<PQ.indexOf(e)){for(;c!==null;){var u=AS(c);if(u!==null&&sH(u),u=$D(e,t,i,a),u===null&&jx(e,t,a,zR,i),u===c)break;c=u}c!==null&&a.stopPropagation()}else jx(e,t,a,null,i)}}var zR=null;function $D(e,t,i,a){if(zR=null,e=Lk(a),e=ep(e),e!==null)if(t=_p(e),t===null)e=null;else if(i=t.tag,i===13){if(e=Z$(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return zR=e,null}function hH(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(TQ()){case kk:return 1;case rH:return 4;case HR:case bQ:return 16;case iH:return 536870912;default:return 16}default:return 16}}var Th=null,Vk=null,SR=null;function fH(){if(SR)return SR;var e,t=Vk,i=t.length,a,c="value"in Th?Th.value:Th.textContent,u=c.length;for(e=0;e<i&&t[e]===c[e];e++);var f=i-e;for(a=1;a<=f&&t[i-a]===c[u-a];a++);return SR=c.slice(e,1<a?1-a:void 0)}function yR(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function kb(){return!0}function hB(){return!1}function Zs(e){function t(i,a,c,u,f){this._reactName=i,this._targetInst=c,this.type=a,this.nativeEvent=u,this.target=f,this.currentTarget=null;for(var m in e)e.hasOwnProperty(m)&&(i=e[m],this[m]=i?i(u):u[m]);return this.isDefaultPrevented=(u.defaultPrevented!=null?u.defaultPrevented:u.returnValue===!1)?kb:hB,this.isPropagationStopped=hB,this}return Ri(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=kb)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=kb)},persist:function(){},isPersistent:kb}),t}var vg={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jk=Zs(vg),OS=Ri({},vg,{view:0,detail:0}),UQ=Zs(OS),xx,Px,u_,B1=Ri({},OS,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bk,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==u_&&(u_&&e.type==="mousemove"?(xx=e.screenX-u_.screenX,Px=e.screenY-u_.screenY):Px=xx=0,u_=e),xx)},movementY:function(e){return"movementY"in e?e.movementY:Px}}),fB=Zs(B1),FQ=Ri({},B1,{dataTransfer:0}),VQ=Zs(FQ),jQ=Ri({},OS,{relatedTarget:0}),Dx=Zs(jQ),BQ=Ri({},vg,{animationName:0,elapsedTime:0,pseudoElement:0}),$Q=Zs(BQ),HQ=Ri({},vg,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),WQ=Zs(HQ),GQ=Ri({},vg,{data:0}),pB=Zs(GQ),zQ={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},KQ={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qQ={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function YQ(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=qQ[e])?!!t[e]:!1}function Bk(){return YQ}var XQ=Ri({},OS,{key:function(e){if(e.key){var t=zQ[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=yR(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?KQ[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bk,charCode:function(e){return e.type==="keypress"?yR(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?yR(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),JQ=Zs(XQ),QQ=Ri({},B1,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mB=Zs(QQ),ZQ=Ri({},OS,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bk}),eZ=Zs(ZQ),tZ=Ri({},vg,{propertyName:0,elapsedTime:0,pseudoElement:0}),nZ=Zs(tZ),rZ=Ri({},B1,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),iZ=Zs(rZ),oZ=[9,13,27,32],$k=od&&"CompositionEvent"in window,P_=null;od&&"documentMode"in document&&(P_=document.documentMode);var aZ=od&&"TextEvent"in window&&!P_,pH=od&&(!$k||P_&&8<P_&&11>=P_),gB=String.fromCharCode(32),vB=!1;function mH(e,t){switch(e){case"keyup":return oZ.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gH(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var k0=!1;function sZ(e,t){switch(e){case"compositionend":return gH(t);case"keypress":return t.which!==32?null:(vB=!0,gB);case"textInput":return e=t.data,e===gB&&vB?null:e;default:return null}}function cZ(e,t){if(k0)return e==="compositionend"||!$k&&mH(e,t)?(e=fH(),SR=Vk=Th=null,k0=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return pH&&t.locale!=="ko"?null:t.data;default:return null}}var lZ={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function EB(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!lZ[e.type]:t==="textarea"}function vH(e,t,i,a){q$(a),t=KR(t,"onChange"),0<t.length&&(i=new jk("onChange","change",null,i,a),e.push({event:i,listeners:t}))}var D_=null,tS=null;function uZ(e){OH(e,0)}function $1(e){var t=F0(e);if(B$(t))return e}function dZ(e,t){if(e==="change")return t}var EH=!1;if(od){var Lx;if(od){var kx="oninput"in document;if(!kx){var _B=document.createElement("div");_B.setAttribute("oninput","return;"),kx=typeof _B.oninput=="function"}Lx=kx}else Lx=!1;EH=Lx&&(!document.documentMode||9<document.documentMode)}function SB(){D_&&(D_.detachEvent("onpropertychange",_H),tS=D_=null)}function _H(e){if(e.propertyName==="value"&&$1(tS)){var t=[];vH(t,tS,e,Lk(e)),Q$(uZ,t)}}function hZ(e,t,i){e==="focusin"?(SB(),D_=t,tS=i,D_.attachEvent("onpropertychange",_H)):e==="focusout"&&SB()}function fZ(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return $1(tS)}function pZ(e,t){if(e==="click")return $1(t)}function mZ(e,t){if(e==="input"||e==="change")return $1(t)}function gZ(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var bl=typeof Object.is=="function"?Object.is:gZ;function nS(e,t){if(bl(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(a=0;a<i.length;a++){var c=i[a];if(!bD.call(t,c)||!bl(e[c],t[c]))return!1}return!0}function yB(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function CB(e,t){var i=yB(e);e=0;for(var a;i;){if(i.nodeType===3){if(a=e+i.textContent.length,e<=t&&a>=t)return{node:i,offset:t-e};e=a}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=yB(i)}}function SH(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?SH(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function yH(){for(var e=window,t=jR();t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=jR(e.document)}return t}function Hk(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function vZ(e){var t=yH(),i=e.focusedElem,a=e.selectionRange;if(t!==i&&i&&i.ownerDocument&&SH(i.ownerDocument.documentElement,i)){if(a!==null&&Hk(i)){if(t=a.start,e=a.end,e===void 0&&(e=t),"selectionStart"in i)i.selectionStart=t,i.selectionEnd=Math.min(e,i.value.length);else if(e=(t=i.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var c=i.textContent.length,u=Math.min(a.start,c);a=a.end===void 0?u:Math.min(a.end,c),!e.extend&&u>a&&(c=a,a=u,u=c),c=CB(i,u);var f=CB(i,a);c&&f&&(e.rangeCount!==1||e.anchorNode!==c.node||e.anchorOffset!==c.offset||e.focusNode!==f.node||e.focusOffset!==f.offset)&&(t=t.createRange(),t.setStart(c.node,c.offset),e.removeAllRanges(),u>a?(e.addRange(t),e.extend(f.node,f.offset)):(t.setEnd(f.node,f.offset),e.addRange(t)))}}for(t=[],e=i;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<t.length;i++)e=t[i],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var EZ=od&&"documentMode"in document&&11>=document.documentMode,M0=null,HD=null,L_=null,WD=!1;function TB(e,t,i){var a=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;WD||M0==null||M0!==jR(a)||(a=M0,"selectionStart"in a&&Hk(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),L_&&nS(L_,a)||(L_=a,a=KR(HD,"onSelect"),0<a.length&&(t=new jk("onSelect","select",null,t,i),e.push({event:t,listeners:a}),t.target=M0)))}function Mb(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var U0={animationend:Mb("Animation","AnimationEnd"),animationiteration:Mb("Animation","AnimationIteration"),animationstart:Mb("Animation","AnimationStart"),transitionend:Mb("Transition","TransitionEnd")},Mx={},CH={};od&&(CH=document.createElement("div").style,"AnimationEvent"in window||(delete U0.animationend.animation,delete U0.animationiteration.animation,delete U0.animationstart.animation),"TransitionEvent"in window||delete U0.transitionend.transition);function H1(e){if(Mx[e])return Mx[e];if(!U0[e])return e;var t=U0[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in CH)return Mx[e]=t[i];return e}var TH=H1("animationend"),bH=H1("animationiteration"),RH=H1("animationstart"),IH=H1("transitionend"),wH=new Map,bB="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Bh(e,t){wH.set(e,t),Ep(t,[e])}for(var Ux=0;Ux<bB.length;Ux++){var Fx=bB[Ux],_Z=Fx.toLowerCase(),SZ=Fx[0].toUpperCase()+Fx.slice(1);Bh(_Z,"on"+SZ)}Bh(TH,"onAnimationEnd");Bh(bH,"onAnimationIteration");Bh(RH,"onAnimationStart");Bh("dblclick","onDoubleClick");Bh("focusin","onFocus");Bh("focusout","onBlur");Bh(IH,"onTransitionEnd");ig("onMouseEnter",["mouseout","mouseover"]);ig("onMouseLeave",["mouseout","mouseover"]);ig("onPointerEnter",["pointerout","pointerover"]);ig("onPointerLeave",["pointerout","pointerover"]);Ep("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ep("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ep("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ep("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ep("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ep("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var w_="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yZ=new Set("cancel close invalid load scroll toggle".split(" ").concat(w_));function RB(e,t,i){var a=e.type||"unknown-event";e.currentTarget=i,_Q(a,t,void 0,e),e.currentTarget=null}function OH(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var a=e[i],c=a.event;a=a.listeners;e:{var u=void 0;if(t)for(var f=a.length-1;0<=f;f--){var m=a[f],g=m.instance,E=m.currentTarget;if(m=m.listener,g!==u&&c.isPropagationStopped())break e;RB(c,m,E),u=g}else for(f=0;f<a.length;f++){if(m=a[f],g=m.instance,E=m.currentTarget,m=m.listener,g!==u&&c.isPropagationStopped())break e;RB(c,m,E),u=g}}}if($R)throw e=VD,$R=!1,VD=null,e}function li(e,t){var i=t[YD];i===void 0&&(i=t[YD]=new Set);var a=e+"__bubble";i.has(a)||(AH(t,e,2,!1),i.add(a))}function Vx(e,t,i){var a=0;t&&(a|=4),AH(i,e,a,t)}var Ub="_reactListening"+Math.random().toString(36).slice(2);function rS(e){if(!e[Ub]){e[Ub]=!0,M$.forEach(function(i){i!=="selectionchange"&&(yZ.has(i)||Vx(i,!1,e),Vx(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ub]||(t[Ub]=!0,Vx("selectionchange",!1,t))}}function AH(e,t,i,a){switch(hH(t)){case 1:var c=kQ;break;case 4:c=MQ;break;default:c=Fk}i=c.bind(null,t,i,e),c=void 0,!FD||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),a?c!==void 0?e.addEventListener(t,i,{capture:!0,passive:c}):e.addEventListener(t,i,!0):c!==void 0?e.addEventListener(t,i,{passive:c}):e.addEventListener(t,i,!1)}function jx(e,t,i,a,c){var u=a;if(!(t&1)&&!(t&2)&&a!==null)e:for(;;){if(a===null)return;var f=a.tag;if(f===3||f===4){var m=a.stateNode.containerInfo;if(m===c||m.nodeType===8&&m.parentNode===c)break;if(f===4)for(f=a.return;f!==null;){var g=f.tag;if((g===3||g===4)&&(g=f.stateNode.containerInfo,g===c||g.nodeType===8&&g.parentNode===c))return;f=f.return}for(;m!==null;){if(f=ep(m),f===null)return;if(g=f.tag,g===5||g===6){a=u=f;continue e}m=m.parentNode}}a=a.return}Q$(function(){var E=u,y=Lk(i),T=[];e:{var R=wH.get(e);if(R!==void 0){var P=jk,O=e;switch(e){case"keypress":if(yR(i)===0)break e;case"keydown":case"keyup":P=JQ;break;case"focusin":O="focus",P=Dx;break;case"focusout":O="blur",P=Dx;break;case"beforeblur":case"afterblur":P=Dx;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":P=fB;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":P=VQ;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":P=eZ;break;case TH:case bH:case RH:P=$Q;break;case IH:P=nZ;break;case"scroll":P=UQ;break;case"wheel":P=iZ;break;case"copy":case"cut":case"paste":P=WQ;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":P=mB}var N=(t&4)!==0,M=!N&&e==="scroll",D=N?R!==null?R+"Capture":null:R;N=[];for(var x=E,k;x!==null;){k=x;var V=k.stateNode;if(k.tag===5&&V!==null&&(k=V,D!==null&&(V=J_(x,D),V!=null&&N.push(iS(x,V,k)))),M)break;x=x.return}0<N.length&&(R=new P(R,O,null,i,y),T.push({event:R,listeners:N}))}}if(!(t&7)){e:{if(R=e==="mouseover"||e==="pointerover",P=e==="mouseout"||e==="pointerout",R&&i!==MD&&(O=i.relatedTarget||i.fromElement)&&(ep(O)||O[ad]))break e;if((P||R)&&(R=y.window===y?y:(R=y.ownerDocument)?R.defaultView||R.parentWindow:window,P?(O=i.relatedTarget||i.toElement,P=E,O=O?ep(O):null,O!==null&&(M=_p(O),O!==M||O.tag!==5&&O.tag!==6)&&(O=null)):(P=null,O=E),P!==O)){if(N=fB,V="onMouseLeave",D="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(N=mB,V="onPointerLeave",D="onPointerEnter",x="pointer"),M=P==null?R:F0(P),k=O==null?R:F0(O),R=new N(V,x+"leave",P,i,y),R.target=M,R.relatedTarget=k,V=null,ep(y)===E&&(N=new N(D,x+"enter",O,i,y),N.target=k,N.relatedTarget=M,V=N),M=V,P&&O)t:{for(N=P,D=O,x=0,k=N;k;k=_0(k))x++;for(k=0,V=D;V;V=_0(V))k++;for(;0<x-k;)N=_0(N),x--;for(;0<k-x;)D=_0(D),k--;for(;x--;){if(N===D||D!==null&&N===D.alternate)break t;N=_0(N),D=_0(D)}N=null}else N=null;P!==null&&IB(T,R,P,N,!1),O!==null&&M!==null&&IB(T,M,O,N,!0)}}e:{if(R=E?F0(E):window,P=R.nodeName&&R.nodeName.toLowerCase(),P==="select"||P==="input"&&R.type==="file")var H=dZ;else if(EB(R))if(EH)H=mZ;else{H=fZ;var $=hZ}else(P=R.nodeName)&&P.toLowerCase()==="input"&&(R.type==="checkbox"||R.type==="radio")&&(H=pZ);if(H&&(H=H(e,E))){vH(T,H,i,y);break e}$&&$(e,R,E),e==="focusout"&&($=R._wrapperState)&&$.controlled&&R.type==="number"&&xD(R,"number",R.value)}switch($=E?F0(E):window,e){case"focusin":(EB($)||$.contentEditable==="true")&&(M0=$,HD=E,L_=null);break;case"focusout":L_=HD=M0=null;break;case"mousedown":WD=!0;break;case"contextmenu":case"mouseup":case"dragend":WD=!1,TB(T,i,y);break;case"selectionchange":if(EZ)break;case"keydown":case"keyup":TB(T,i,y)}var G;if($k)e:{switch(e){case"compositionstart":var K="onCompositionStart";break e;case"compositionend":K="onCompositionEnd";break e;case"compositionupdate":K="onCompositionUpdate";break e}K=void 0}else k0?mH(e,i)&&(K="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(K="onCompositionStart");K&&(pH&&i.locale!=="ko"&&(k0||K!=="onCompositionStart"?K==="onCompositionEnd"&&k0&&(G=fH()):(Th=y,Vk="value"in Th?Th.value:Th.textContent,k0=!0)),$=KR(E,K),0<$.length&&(K=new pB(K,e,null,i,y),T.push({event:K,listeners:$}),G?K.data=G:(G=gH(i),G!==null&&(K.data=G)))),(G=aZ?sZ(e,i):cZ(e,i))&&(E=KR(E,"onBeforeInput"),0<E.length&&(y=new pB("onBeforeInput","beforeinput",null,i,y),T.push({event:y,listeners:E}),y.data=G))}OH(T,t)})}function iS(e,t,i){return{instance:e,listener:t,currentTarget:i}}function KR(e,t){for(var i=t+"Capture",a=[];e!==null;){var c=e,u=c.stateNode;c.tag===5&&u!==null&&(c=u,u=J_(e,i),u!=null&&a.unshift(iS(e,u,c)),u=J_(e,t),u!=null&&a.push(iS(e,u,c))),e=e.return}return a}function _0(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function IB(e,t,i,a,c){for(var u=t._reactName,f=[];i!==null&&i!==a;){var m=i,g=m.alternate,E=m.stateNode;if(g!==null&&g===a)break;m.tag===5&&E!==null&&(m=E,c?(g=J_(i,u),g!=null&&f.unshift(iS(i,g,m))):c||(g=J_(i,u),g!=null&&f.push(iS(i,g,m)))),i=i.return}f.length!==0&&e.push({event:t,listeners:f})}var CZ=/\r\n?/g,TZ=/\u0000|\uFFFD/g;function wB(e){return(typeof e=="string"?e:""+e).replace(CZ,`
`).replace(TZ,"")}function Fb(e,t,i){if(t=wB(t),wB(e)!==t&&i)throw Error(tt(425))}function qR(){}var GD=null,zD=null;function KD(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var qD=typeof setTimeout=="function"?setTimeout:void 0,bZ=typeof clearTimeout=="function"?clearTimeout:void 0,OB=typeof Promise=="function"?Promise:void 0,RZ=typeof queueMicrotask=="function"?queueMicrotask:typeof OB<"u"?function(e){return OB.resolve(null).then(e).catch(IZ)}:qD;function IZ(e){setTimeout(function(){throw e})}function Bx(e,t){var i=t,a=0;do{var c=i.nextSibling;if(e.removeChild(i),c&&c.nodeType===8)if(i=c.data,i==="/$"){if(a===0){e.removeChild(c),eS(t);return}a--}else i!=="$"&&i!=="$?"&&i!=="$!"||a++;i=c}while(i);eS(t)}function xh(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function AB(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(t===0)return e;t--}else i==="/$"&&t++}e=e.previousSibling}return null}var Eg=Math.random().toString(36).slice(2),_u="__reactFiber$"+Eg,oS="__reactProps$"+Eg,ad="__reactContainer$"+Eg,YD="__reactEvents$"+Eg,wZ="__reactListeners$"+Eg,OZ="__reactHandles$"+Eg;function ep(e){var t=e[_u];if(t)return t;for(var i=e.parentNode;i;){if(t=i[ad]||i[_u]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=AB(e);e!==null;){if(i=e[_u])return i;e=AB(e)}return t}e=i,i=e.parentNode}return null}function AS(e){return e=e[_u]||e[ad],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function F0(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(tt(33))}function W1(e){return e[oS]||null}var XD=[],V0=-1;function $h(e){return{current:e}}function ui(e){0>V0||(e.current=XD[V0],XD[V0]=null,V0--)}function Qr(e,t){V0++,XD[V0]=e.current,e.current=t}var Uh={},Ia=$h(Uh),ms=$h(!1),hp=Uh;function og(e,t){var i=e.type.contextTypes;if(!i)return Uh;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var c={},u;for(u in i)c[u]=t[u];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=c),c}function gs(e){return e=e.childContextTypes,e!=null}function YR(){ui(ms),ui(Ia)}function NB(e,t,i){if(Ia.current!==Uh)throw Error(tt(168));Qr(Ia,t),Qr(ms,i)}function NH(e,t,i){var a=e.stateNode;if(t=t.childContextTypes,typeof a.getChildContext!="function")return i;a=a.getChildContext();for(var c in a)if(!(c in t))throw Error(tt(108,hQ(e)||"Unknown",c));return Ri({},i,a)}function XR(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Uh,hp=Ia.current,Qr(Ia,e),Qr(ms,ms.current),!0}function xB(e,t,i){var a=e.stateNode;if(!a)throw Error(tt(169));i?(e=NH(e,t,hp),a.__reactInternalMemoizedMergedChildContext=e,ui(ms),ui(Ia),Qr(Ia,e)):ui(ms),Qr(ms,i)}var Qu=null,G1=!1,$x=!1;function xH(e){Qu===null?Qu=[e]:Qu.push(e)}function AZ(e){G1=!0,xH(e)}function Hh(){if(!$x&&Qu!==null){$x=!0;var e=0,t=Ir;try{var i=Qu;for(Ir=1;e<i.length;e++){var a=i[e];do a=a(!0);while(a!==null)}Qu=null,G1=!1}catch(c){throw Qu!==null&&(Qu=Qu.slice(e+1)),nH(kk,Hh),c}finally{Ir=t,$x=!1}}return null}var j0=[],B0=0,JR=null,QR=0,wc=[],Oc=0,fp=null,ed=1,td="";function Yf(e,t){j0[B0++]=QR,j0[B0++]=JR,JR=e,QR=t}function PH(e,t,i){wc[Oc++]=ed,wc[Oc++]=td,wc[Oc++]=fp,fp=e;var a=ed;e=td;var c=32-yl(a)-1;a&=~(1<<c),i+=1;var u=32-yl(t)+c;if(30<u){var f=c-c%5;u=(a&(1<<f)-1).toString(32),a>>=f,c-=f,ed=1<<32-yl(t)+c|i<<c|a,td=u+e}else ed=1<<u|i<<c|a,td=e}function Wk(e){e.return!==null&&(Yf(e,1),PH(e,1,0))}function Gk(e){for(;e===JR;)JR=j0[--B0],j0[B0]=null,QR=j0[--B0],j0[B0]=null;for(;e===fp;)fp=wc[--Oc],wc[Oc]=null,td=wc[--Oc],wc[Oc]=null,ed=wc[--Oc],wc[Oc]=null}var Ks=null,Gs=null,vi=!1,vl=null;function DH(e,t){var i=Ac(5,null,null,0);i.elementType="DELETED",i.stateNode=t,i.return=e,t=e.deletions,t===null?(e.deletions=[i],e.flags|=16):t.push(i)}function PB(e,t){switch(e.tag){case 5:var i=e.type;return t=t.nodeType!==1||i.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ks=e,Gs=xh(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ks=e,Gs=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(i=fp!==null?{id:ed,overflow:td}:null,e.memoizedState={dehydrated:t,treeContext:i,retryLane:1073741824},i=Ac(18,null,null,0),i.stateNode=t,i.return=e,e.child=i,Ks=e,Gs=null,!0):!1;default:return!1}}function JD(e){return(e.mode&1)!==0&&(e.flags&128)===0}function QD(e){if(vi){var t=Gs;if(t){var i=t;if(!PB(e,t)){if(JD(e))throw Error(tt(418));t=xh(i.nextSibling);var a=Ks;t&&PB(e,t)?DH(a,i):(e.flags=e.flags&-4097|2,vi=!1,Ks=e)}}else{if(JD(e))throw Error(tt(418));e.flags=e.flags&-4097|2,vi=!1,Ks=e}}}function DB(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ks=e}function Vb(e){if(e!==Ks)return!1;if(!vi)return DB(e),vi=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!KD(e.type,e.memoizedProps)),t&&(t=Gs)){if(JD(e))throw LH(),Error(tt(418));for(;t;)DH(e,t),t=xh(t.nextSibling)}if(DB(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(tt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"){if(t===0){Gs=xh(e.nextSibling);break e}t--}else i!=="$"&&i!=="$!"&&i!=="$?"||t++}e=e.nextSibling}Gs=null}}else Gs=Ks?xh(e.stateNode.nextSibling):null;return!0}function LH(){for(var e=Gs;e;)e=xh(e.nextSibling)}function ag(){Gs=Ks=null,vi=!1}function zk(e){vl===null?vl=[e]:vl.push(e)}var NZ=pd.ReactCurrentBatchConfig;function hl(e,t){if(e&&e.defaultProps){t=Ri({},t),e=e.defaultProps;for(var i in e)t[i]===void 0&&(t[i]=e[i]);return t}return t}var ZR=$h(null),e1=null,$0=null,Kk=null;function qk(){Kk=$0=e1=null}function Yk(e){var t=ZR.current;ui(ZR),e._currentValue=t}function ZD(e,t,i){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===i)break;e=e.return}}function Z0(e,t){e1=e,Kk=$0=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(fs=!0),e.firstContext=null)}function Pc(e){var t=e._currentValue;if(Kk!==e)if(e={context:e,memoizedValue:t,next:null},$0===null){if(e1===null)throw Error(tt(308));$0=e,e1.dependencies={lanes:0,firstContext:e}}else $0=$0.next=e;return t}var tp=null;function Xk(e){tp===null?tp=[e]:tp.push(e)}function kH(e,t,i,a){var c=t.interleaved;return c===null?(i.next=i,Xk(t)):(i.next=c.next,c.next=i),t.interleaved=i,sd(e,a)}function sd(e,t){e.lanes|=t;var i=e.alternate;for(i!==null&&(i.lanes|=t),i=e,e=e.return;e!==null;)e.childLanes|=t,i=e.alternate,i!==null&&(i.childLanes|=t),i=e,e=e.return;return i.tag===3?i.stateNode:null}var Sh=!1;function Jk(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function MH(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function nd(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ph(e,t,i){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,ir&2){var c=a.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),a.pending=t,sd(e,i)}return c=a.interleaved,c===null?(t.next=t,Xk(a)):(t.next=c.next,c.next=t),a.interleaved=t,sd(e,i)}function CR(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194240)!==0)){var a=t.lanes;a&=e.pendingLanes,i|=a,t.lanes=i,Mk(e,i)}}function LB(e,t){var i=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,i===a)){var c=null,u=null;if(i=i.firstBaseUpdate,i!==null){do{var f={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};u===null?c=u=f:u=u.next=f,i=i.next}while(i!==null);u===null?c=u=t:u=u.next=t}else c=u=t;i={baseState:a.baseState,firstBaseUpdate:c,lastBaseUpdate:u,shared:a.shared,effects:a.effects},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}function t1(e,t,i,a){var c=e.updateQueue;Sh=!1;var u=c.firstBaseUpdate,f=c.lastBaseUpdate,m=c.shared.pending;if(m!==null){c.shared.pending=null;var g=m,E=g.next;g.next=null,f===null?u=E:f.next=E,f=g;var y=e.alternate;y!==null&&(y=y.updateQueue,m=y.lastBaseUpdate,m!==f&&(m===null?y.firstBaseUpdate=E:m.next=E,y.lastBaseUpdate=g))}if(u!==null){var T=c.baseState;f=0,y=E=g=null,m=u;do{var R=m.lane,P=m.eventTime;if((a&R)===R){y!==null&&(y=y.next={eventTime:P,lane:0,tag:m.tag,payload:m.payload,callback:m.callback,next:null});e:{var O=e,N=m;switch(R=t,P=i,N.tag){case 1:if(O=N.payload,typeof O=="function"){T=O.call(P,T,R);break e}T=O;break e;case 3:O.flags=O.flags&-65537|128;case 0:if(O=N.payload,R=typeof O=="function"?O.call(P,T,R):O,R==null)break e;T=Ri({},T,R);break e;case 2:Sh=!0}}m.callback!==null&&m.lane!==0&&(e.flags|=64,R=c.effects,R===null?c.effects=[m]:R.push(m))}else P={eventTime:P,lane:R,tag:m.tag,payload:m.payload,callback:m.callback,next:null},y===null?(E=y=P,g=T):y=y.next=P,f|=R;if(m=m.next,m===null){if(m=c.shared.pending,m===null)break;R=m,m=R.next,R.next=null,c.lastBaseUpdate=R,c.shared.pending=null}}while(1);if(y===null&&(g=T),c.baseState=g,c.firstBaseUpdate=E,c.lastBaseUpdate=y,t=c.shared.interleaved,t!==null){c=t;do f|=c.lane,c=c.next;while(c!==t)}else u===null&&(c.shared.lanes=0);mp|=f,e.lanes=f,e.memoizedState=T}}function kB(e,t,i){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var a=e[t],c=a.callback;if(c!==null){if(a.callback=null,a=i,typeof c!="function")throw Error(tt(191,c));c.call(a)}}}var UH=new k$.Component().refs;function eL(e,t,i,a){t=e.memoizedState,i=i(a,t),i=i==null?t:Ri({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var z1={isMounted:function(e){return(e=e._reactInternals)?_p(e)===e:!1},enqueueSetState:function(e,t,i){e=e._reactInternals;var a=Ua(),c=Lh(e),u=nd(a,c);u.payload=t,i!=null&&(u.callback=i),t=Ph(e,u,c),t!==null&&(Cl(t,e,c,a),CR(t,e,c))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var a=Ua(),c=Lh(e),u=nd(a,c);u.tag=1,u.payload=t,i!=null&&(u.callback=i),t=Ph(e,u,c),t!==null&&(Cl(t,e,c,a),CR(t,e,c))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=Ua(),a=Lh(e),c=nd(i,a);c.tag=2,t!=null&&(c.callback=t),t=Ph(e,c,a),t!==null&&(Cl(t,e,a,i),CR(t,e,a))}};function MB(e,t,i,a,c,u,f){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,u,f):t.prototype&&t.prototype.isPureReactComponent?!nS(i,a)||!nS(c,u):!0}function FH(e,t,i){var a=!1,c=Uh,u=t.contextType;return typeof u=="object"&&u!==null?u=Pc(u):(c=gs(t)?hp:Ia.current,a=t.contextTypes,u=(a=a!=null)?og(e,c):Uh),t=new t(i,u),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=z1,e.stateNode=t,t._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=c,e.__reactInternalMemoizedMaskedChildContext=u),t}function UB(e,t,i,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,a),t.state!==e&&z1.enqueueReplaceState(t,t.state,null)}function tL(e,t,i,a){var c=e.stateNode;c.props=i,c.state=e.memoizedState,c.refs=UH,Jk(e);var u=t.contextType;typeof u=="object"&&u!==null?c.context=Pc(u):(u=gs(t)?hp:Ia.current,c.context=og(e,u)),c.state=e.memoizedState,u=t.getDerivedStateFromProps,typeof u=="function"&&(eL(e,t,u,i),c.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(t=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),t!==c.state&&z1.enqueueReplaceState(c,c.state,null),t1(e,i,c,a),c.state=e.memoizedState),typeof c.componentDidMount=="function"&&(e.flags|=4194308)}function d_(e,t,i){if(e=i.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(tt(309));var a=i.stateNode}if(!a)throw Error(tt(147,e));var c=a,u=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===u?t.ref:(t=function(f){var m=c.refs;m===UH&&(m=c.refs={}),f===null?delete m[u]:m[u]=f},t._stringRef=u,t)}if(typeof e!="string")throw Error(tt(284));if(!i._owner)throw Error(tt(290,e))}return e}function jb(e,t){throw e=Object.prototype.toString.call(t),Error(tt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function FB(e){var t=e._init;return t(e._payload)}function VH(e){function t(D,x){if(e){var k=D.deletions;k===null?(D.deletions=[x],D.flags|=16):k.push(x)}}function i(D,x){if(!e)return null;for(;x!==null;)t(D,x),x=x.sibling;return null}function a(D,x){for(D=new Map;x!==null;)x.key!==null?D.set(x.key,x):D.set(x.index,x),x=x.sibling;return D}function c(D,x){return D=kh(D,x),D.index=0,D.sibling=null,D}function u(D,x,k){return D.index=k,e?(k=D.alternate,k!==null?(k=k.index,k<x?(D.flags|=2,x):k):(D.flags|=2,x)):(D.flags|=1048576,x)}function f(D){return e&&D.alternate===null&&(D.flags|=2),D}function m(D,x,k,V){return x===null||x.tag!==6?(x=Yx(k,D.mode,V),x.return=D,x):(x=c(x,k),x.return=D,x)}function g(D,x,k,V){var H=k.type;return H===L0?y(D,x,k.props.children,V,k.key):x!==null&&(x.elementType===H||typeof H=="object"&&H!==null&&H.$$typeof===_h&&FB(H)===x.type)?(V=c(x,k.props),V.ref=d_(D,x,k),V.return=D,V):(V=OR(k.type,k.key,k.props,null,D.mode,V),V.ref=d_(D,x,k),V.return=D,V)}function E(D,x,k,V){return x===null||x.tag!==4||x.stateNode.containerInfo!==k.containerInfo||x.stateNode.implementation!==k.implementation?(x=Xx(k,D.mode,V),x.return=D,x):(x=c(x,k.children||[]),x.return=D,x)}function y(D,x,k,V,H){return x===null||x.tag!==7?(x=sp(k,D.mode,V,H),x.return=D,x):(x=c(x,k),x.return=D,x)}function T(D,x,k){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Yx(""+x,D.mode,k),x.return=D,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Ab:return k=OR(x.type,x.key,x.props,null,D.mode,k),k.ref=d_(D,null,x),k.return=D,k;case D0:return x=Xx(x,D.mode,k),x.return=D,x;case _h:var V=x._init;return T(D,V(x._payload),k)}if(R_(x)||a_(x))return x=sp(x,D.mode,k,null),x.return=D,x;jb(D,x)}return null}function R(D,x,k,V){var H=x!==null?x.key:null;if(typeof k=="string"&&k!==""||typeof k=="number")return H!==null?null:m(D,x,""+k,V);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Ab:return k.key===H?g(D,x,k,V):null;case D0:return k.key===H?E(D,x,k,V):null;case _h:return H=k._init,R(D,x,H(k._payload),V)}if(R_(k)||a_(k))return H!==null?null:y(D,x,k,V,null);jb(D,k)}return null}function P(D,x,k,V,H){if(typeof V=="string"&&V!==""||typeof V=="number")return D=D.get(k)||null,m(x,D,""+V,H);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case Ab:return D=D.get(V.key===null?k:V.key)||null,g(x,D,V,H);case D0:return D=D.get(V.key===null?k:V.key)||null,E(x,D,V,H);case _h:var $=V._init;return P(D,x,k,$(V._payload),H)}if(R_(V)||a_(V))return D=D.get(k)||null,y(x,D,V,H,null);jb(x,V)}return null}function O(D,x,k,V){for(var H=null,$=null,G=x,K=x=0,Q=null;G!==null&&K<k.length;K++){G.index>K?(Q=G,G=null):Q=G.sibling;var z=R(D,G,k[K],V);if(z===null){G===null&&(G=Q);break}e&&G&&z.alternate===null&&t(D,G),x=u(z,x,K),$===null?H=z:$.sibling=z,$=z,G=Q}if(K===k.length)return i(D,G),vi&&Yf(D,K),H;if(G===null){for(;K<k.length;K++)G=T(D,k[K],V),G!==null&&(x=u(G,x,K),$===null?H=G:$.sibling=G,$=G);return vi&&Yf(D,K),H}for(G=a(D,G);K<k.length;K++)Q=P(G,D,K,k[K],V),Q!==null&&(e&&Q.alternate!==null&&G.delete(Q.key===null?K:Q.key),x=u(Q,x,K),$===null?H=Q:$.sibling=Q,$=Q);return e&&G.forEach(function(ie){return t(D,ie)}),vi&&Yf(D,K),H}function N(D,x,k,V){var H=a_(k);if(typeof H!="function")throw Error(tt(150));if(k=H.call(k),k==null)throw Error(tt(151));for(var $=H=null,G=x,K=x=0,Q=null,z=k.next();G!==null&&!z.done;K++,z=k.next()){G.index>K?(Q=G,G=null):Q=G.sibling;var ie=R(D,G,z.value,V);if(ie===null){G===null&&(G=Q);break}e&&G&&ie.alternate===null&&t(D,G),x=u(ie,x,K),$===null?H=ie:$.sibling=ie,$=ie,G=Q}if(z.done)return i(D,G),vi&&Yf(D,K),H;if(G===null){for(;!z.done;K++,z=k.next())z=T(D,z.value,V),z!==null&&(x=u(z,x,K),$===null?H=z:$.sibling=z,$=z);return vi&&Yf(D,K),H}for(G=a(D,G);!z.done;K++,z=k.next())z=P(G,D,K,z.value,V),z!==null&&(e&&z.alternate!==null&&G.delete(z.key===null?K:z.key),x=u(z,x,K),$===null?H=z:$.sibling=z,$=z);return e&&G.forEach(function(J){return t(D,J)}),vi&&Yf(D,K),H}function M(D,x,k,V){if(typeof k=="object"&&k!==null&&k.type===L0&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case Ab:e:{for(var H=k.key,$=x;$!==null;){if($.key===H){if(H=k.type,H===L0){if($.tag===7){i(D,$.sibling),x=c($,k.props.children),x.return=D,D=x;break e}}else if($.elementType===H||typeof H=="object"&&H!==null&&H.$$typeof===_h&&FB(H)===$.type){i(D,$.sibling),x=c($,k.props),x.ref=d_(D,$,k),x.return=D,D=x;break e}i(D,$);break}else t(D,$);$=$.sibling}k.type===L0?(x=sp(k.props.children,D.mode,V,k.key),x.return=D,D=x):(V=OR(k.type,k.key,k.props,null,D.mode,V),V.ref=d_(D,x,k),V.return=D,D=V)}return f(D);case D0:e:{for($=k.key;x!==null;){if(x.key===$)if(x.tag===4&&x.stateNode.containerInfo===k.containerInfo&&x.stateNode.implementation===k.implementation){i(D,x.sibling),x=c(x,k.children||[]),x.return=D,D=x;break e}else{i(D,x);break}else t(D,x);x=x.sibling}x=Xx(k,D.mode,V),x.return=D,D=x}return f(D);case _h:return $=k._init,M(D,x,$(k._payload),V)}if(R_(k))return O(D,x,k,V);if(a_(k))return N(D,x,k,V);jb(D,k)}return typeof k=="string"&&k!==""||typeof k=="number"?(k=""+k,x!==null&&x.tag===6?(i(D,x.sibling),x=c(x,k),x.return=D,D=x):(i(D,x),x=Yx(k,D.mode,V),x.return=D,D=x),f(D)):i(D,x)}return M}var sg=VH(!0),jH=VH(!1),NS={},yu=$h(NS),aS=$h(NS),sS=$h(NS);function np(e){if(e===NS)throw Error(tt(174));return e}function Qk(e,t){switch(Qr(sS,t),Qr(aS,e),Qr(yu,NS),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:DD(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=DD(t,e)}ui(yu),Qr(yu,t)}function cg(){ui(yu),ui(aS),ui(sS)}function BH(e){np(sS.current);var t=np(yu.current),i=DD(t,e.type);t!==i&&(Qr(aS,e),Qr(yu,i))}function Zk(e){aS.current===e&&(ui(yu),ui(aS))}var Ci=$h(0);function n1(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Hx=[];function e2(){for(var e=0;e<Hx.length;e++)Hx[e]._workInProgressVersionPrimary=null;Hx.length=0}var TR=pd.ReactCurrentDispatcher,Wx=pd.ReactCurrentBatchConfig,pp=0,bi=null,yo=null,Po=null,r1=!1,k_=!1,cS=0,xZ=0;function ya(){throw Error(tt(321))}function t2(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!bl(e[i],t[i]))return!1;return!0}function n2(e,t,i,a,c,u){if(pp=u,bi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,TR.current=e===null||e.memoizedState===null?kZ:MZ,e=i(a,c),k_){u=0;do{if(k_=!1,cS=0,25<=u)throw Error(tt(301));u+=1,Po=yo=null,t.updateQueue=null,TR.current=UZ,e=i(a,c)}while(k_)}if(TR.current=i1,t=yo!==null&&yo.next!==null,pp=0,Po=yo=bi=null,r1=!1,t)throw Error(tt(300));return e}function r2(){var e=cS!==0;return cS=0,e}function gu(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Po===null?bi.memoizedState=Po=e:Po=Po.next=e,Po}function Dc(){if(yo===null){var e=bi.alternate;e=e!==null?e.memoizedState:null}else e=yo.next;var t=Po===null?bi.memoizedState:Po.next;if(t!==null)Po=t,yo=e;else{if(e===null)throw Error(tt(310));yo=e,e={memoizedState:yo.memoizedState,baseState:yo.baseState,baseQueue:yo.baseQueue,queue:yo.queue,next:null},Po===null?bi.memoizedState=Po=e:Po=Po.next=e}return Po}function lS(e,t){return typeof t=="function"?t(e):t}function Gx(e){var t=Dc(),i=t.queue;if(i===null)throw Error(tt(311));i.lastRenderedReducer=e;var a=yo,c=a.baseQueue,u=i.pending;if(u!==null){if(c!==null){var f=c.next;c.next=u.next,u.next=f}a.baseQueue=c=u,i.pending=null}if(c!==null){u=c.next,a=a.baseState;var m=f=null,g=null,E=u;do{var y=E.lane;if((pp&y)===y)g!==null&&(g=g.next={lane:0,action:E.action,hasEagerState:E.hasEagerState,eagerState:E.eagerState,next:null}),a=E.hasEagerState?E.eagerState:e(a,E.action);else{var T={lane:y,action:E.action,hasEagerState:E.hasEagerState,eagerState:E.eagerState,next:null};g===null?(m=g=T,f=a):g=g.next=T,bi.lanes|=y,mp|=y}E=E.next}while(E!==null&&E!==u);g===null?f=a:g.next=m,bl(a,t.memoizedState)||(fs=!0),t.memoizedState=a,t.baseState=f,t.baseQueue=g,i.lastRenderedState=a}if(e=i.interleaved,e!==null){c=e;do u=c.lane,bi.lanes|=u,mp|=u,c=c.next;while(c!==e)}else c===null&&(i.lanes=0);return[t.memoizedState,i.dispatch]}function zx(e){var t=Dc(),i=t.queue;if(i===null)throw Error(tt(311));i.lastRenderedReducer=e;var a=i.dispatch,c=i.pending,u=t.memoizedState;if(c!==null){i.pending=null;var f=c=c.next;do u=e(u,f.action),f=f.next;while(f!==c);bl(u,t.memoizedState)||(fs=!0),t.memoizedState=u,t.baseQueue===null&&(t.baseState=u),i.lastRenderedState=u}return[u,a]}function $H(){}function HH(e,t){var i=bi,a=Dc(),c=t(),u=!bl(a.memoizedState,c);if(u&&(a.memoizedState=c,fs=!0),a=a.queue,i2(zH.bind(null,i,a,e),[e]),a.getSnapshot!==t||u||Po!==null&&Po.memoizedState.tag&1){if(i.flags|=2048,uS(9,GH.bind(null,i,a,c,t),void 0,null),Lo===null)throw Error(tt(349));pp&30||WH(i,t,c)}return c}function WH(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=bi.updateQueue,t===null?(t={lastEffect:null,stores:null},bi.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function GH(e,t,i,a){t.value=i,t.getSnapshot=a,KH(t)&&qH(e)}function zH(e,t,i){return i(function(){KH(t)&&qH(e)})}function KH(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!bl(e,i)}catch{return!0}}function qH(e){var t=sd(e,1);t!==null&&Cl(t,e,1,-1)}function VB(e){var t=gu();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:lS,lastRenderedState:e},t.queue=e,e=e.dispatch=LZ.bind(null,bi,e),[t.memoizedState,e]}function uS(e,t,i,a){return e={tag:e,create:t,destroy:i,deps:a,next:null},t=bi.updateQueue,t===null?(t={lastEffect:null,stores:null},bi.updateQueue=t,t.lastEffect=e.next=e):(i=t.lastEffect,i===null?t.lastEffect=e.next=e:(a=i.next,i.next=e,e.next=a,t.lastEffect=e)),e}function YH(){return Dc().memoizedState}function bR(e,t,i,a){var c=gu();bi.flags|=e,c.memoizedState=uS(1|t,i,void 0,a===void 0?null:a)}function K1(e,t,i,a){var c=Dc();a=a===void 0?null:a;var u=void 0;if(yo!==null){var f=yo.memoizedState;if(u=f.destroy,a!==null&&t2(a,f.deps)){c.memoizedState=uS(t,i,u,a);return}}bi.flags|=e,c.memoizedState=uS(1|t,i,u,a)}function jB(e,t){return bR(8390656,8,e,t)}function i2(e,t){return K1(2048,8,e,t)}function XH(e,t){return K1(4,2,e,t)}function JH(e,t){return K1(4,4,e,t)}function QH(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function ZH(e,t,i){return i=i!=null?i.concat([e]):null,K1(4,4,QH.bind(null,t,e),i)}function o2(){}function eW(e,t){var i=Dc();t=t===void 0?null:t;var a=i.memoizedState;return a!==null&&t!==null&&t2(t,a[1])?a[0]:(i.memoizedState=[e,t],e)}function tW(e,t){var i=Dc();t=t===void 0?null:t;var a=i.memoizedState;return a!==null&&t!==null&&t2(t,a[1])?a[0]:(e=e(),i.memoizedState=[e,t],e)}function nW(e,t,i){return pp&21?(bl(i,t)||(i=oH(),bi.lanes|=i,mp|=i,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,fs=!0),e.memoizedState=i)}function PZ(e,t){var i=Ir;Ir=i!==0&&4>i?i:4,e(!0);var a=Wx.transition;Wx.transition={};try{e(!1),t()}finally{Ir=i,Wx.transition=a}}function rW(){return Dc().memoizedState}function DZ(e,t,i){var a=Lh(e);if(i={lane:a,action:i,hasEagerState:!1,eagerState:null,next:null},iW(e))oW(t,i);else if(i=kH(e,t,i,a),i!==null){var c=Ua();Cl(i,e,a,c),aW(i,t,a)}}function LZ(e,t,i){var a=Lh(e),c={lane:a,action:i,hasEagerState:!1,eagerState:null,next:null};if(iW(e))oW(t,c);else{var u=e.alternate;if(e.lanes===0&&(u===null||u.lanes===0)&&(u=t.lastRenderedReducer,u!==null))try{var f=t.lastRenderedState,m=u(f,i);if(c.hasEagerState=!0,c.eagerState=m,bl(m,f)){var g=t.interleaved;g===null?(c.next=c,Xk(t)):(c.next=g.next,g.next=c),t.interleaved=c;return}}catch{}finally{}i=kH(e,t,c,a),i!==null&&(c=Ua(),Cl(i,e,a,c),aW(i,t,a))}}function iW(e){var t=e.alternate;return e===bi||t!==null&&t===bi}function oW(e,t){k_=r1=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function aW(e,t,i){if(i&4194240){var a=t.lanes;a&=e.pendingLanes,i|=a,t.lanes=i,Mk(e,i)}}var i1={readContext:Pc,useCallback:ya,useContext:ya,useEffect:ya,useImperativeHandle:ya,useInsertionEffect:ya,useLayoutEffect:ya,useMemo:ya,useReducer:ya,useRef:ya,useState:ya,useDebugValue:ya,useDeferredValue:ya,useTransition:ya,useMutableSource:ya,useSyncExternalStore:ya,useId:ya,unstable_isNewReconciler:!1},kZ={readContext:Pc,useCallback:function(e,t){return gu().memoizedState=[e,t===void 0?null:t],e},useContext:Pc,useEffect:jB,useImperativeHandle:function(e,t,i){return i=i!=null?i.concat([e]):null,bR(4194308,4,QH.bind(null,t,e),i)},useLayoutEffect:function(e,t){return bR(4194308,4,e,t)},useInsertionEffect:function(e,t){return bR(4,2,e,t)},useMemo:function(e,t){var i=gu();return t=t===void 0?null:t,e=e(),i.memoizedState=[e,t],e},useReducer:function(e,t,i){var a=gu();return t=i!==void 0?i(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=DZ.bind(null,bi,e),[a.memoizedState,e]},useRef:function(e){var t=gu();return e={current:e},t.memoizedState=e},useState:VB,useDebugValue:o2,useDeferredValue:function(e){return gu().memoizedState=e},useTransition:function(){var e=VB(!1),t=e[0];return e=PZ.bind(null,e[1]),gu().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,i){var a=bi,c=gu();if(vi){if(i===void 0)throw Error(tt(407));i=i()}else{if(i=t(),Lo===null)throw Error(tt(349));pp&30||WH(a,t,i)}c.memoizedState=i;var u={value:i,getSnapshot:t};return c.queue=u,jB(zH.bind(null,a,u,e),[e]),a.flags|=2048,uS(9,GH.bind(null,a,u,i,t),void 0,null),i},useId:function(){var e=gu(),t=Lo.identifierPrefix;if(vi){var i=td,a=ed;i=(a&~(1<<32-yl(a)-1)).toString(32)+i,t=":"+t+"R"+i,i=cS++,0<i&&(t+="H"+i.toString(32)),t+=":"}else i=xZ++,t=":"+t+"r"+i.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},MZ={readContext:Pc,useCallback:eW,useContext:Pc,useEffect:i2,useImperativeHandle:ZH,useInsertionEffect:XH,useLayoutEffect:JH,useMemo:tW,useReducer:Gx,useRef:YH,useState:function(){return Gx(lS)},useDebugValue:o2,useDeferredValue:function(e){var t=Dc();return nW(t,yo.memoizedState,e)},useTransition:function(){var e=Gx(lS)[0],t=Dc().memoizedState;return[e,t]},useMutableSource:$H,useSyncExternalStore:HH,useId:rW,unstable_isNewReconciler:!1},UZ={readContext:Pc,useCallback:eW,useContext:Pc,useEffect:i2,useImperativeHandle:ZH,useInsertionEffect:XH,useLayoutEffect:JH,useMemo:tW,useReducer:zx,useRef:YH,useState:function(){return zx(lS)},useDebugValue:o2,useDeferredValue:function(e){var t=Dc();return yo===null?t.memoizedState=e:nW(t,yo.memoizedState,e)},useTransition:function(){var e=zx(lS)[0],t=Dc().memoizedState;return[e,t]},useMutableSource:$H,useSyncExternalStore:HH,useId:rW,unstable_isNewReconciler:!1};function lg(e,t){try{var i="",a=t;do i+=dQ(a),a=a.return;while(a);var c=i}catch(u){c=`
Error generating stack: `+u.message+`
`+u.stack}return{value:e,source:t,stack:c,digest:null}}function Kx(e,t,i){return{value:e,source:null,stack:i??null,digest:t??null}}function nL(e,t){try{console.error(t.value)}catch(i){setTimeout(function(){throw i})}}var FZ=typeof WeakMap=="function"?WeakMap:Map;function sW(e,t,i){i=nd(-1,i),i.tag=3,i.payload={element:null};var a=t.value;return i.callback=function(){a1||(a1=!0,hL=a),nL(e,t)},i}function cW(e,t,i){i=nd(-1,i),i.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var c=t.value;i.payload=function(){return a(c)},i.callback=function(){nL(e,t)}}var u=e.stateNode;return u!==null&&typeof u.componentDidCatch=="function"&&(i.callback=function(){nL(e,t),typeof a!="function"&&(Dh===null?Dh=new Set([this]):Dh.add(this));var f=t.stack;this.componentDidCatch(t.value,{componentStack:f!==null?f:""})}),i}function BB(e,t,i){var a=e.pingCache;if(a===null){a=e.pingCache=new FZ;var c=new Set;a.set(t,c)}else c=a.get(t),c===void 0&&(c=new Set,a.set(t,c));c.has(i)||(c.add(i),e=QZ.bind(null,e,t,i),t.then(e,e))}function $B(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function HB(e,t,i,a,c){return e.mode&1?(e.flags|=65536,e.lanes=c,e):(e===t?e.flags|=65536:(e.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(t=nd(-1,1),t.tag=2,Ph(i,t,1))),i.lanes|=1),e)}var VZ=pd.ReactCurrentOwner,fs=!1;function Ma(e,t,i,a){t.child=e===null?jH(t,null,i,a):sg(t,e.child,i,a)}function WB(e,t,i,a,c){i=i.render;var u=t.ref;return Z0(t,c),a=n2(e,t,i,a,u,c),i=r2(),e!==null&&!fs?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,cd(e,t,c)):(vi&&i&&Wk(t),t.flags|=1,Ma(e,t,a,c),t.child)}function GB(e,t,i,a,c){if(e===null){var u=i.type;return typeof u=="function"&&!f2(u)&&u.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(t.tag=15,t.type=u,lW(e,t,u,a,c)):(e=OR(i.type,null,a,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(u=e.child,!(e.lanes&c)){var f=u.memoizedProps;if(i=i.compare,i=i!==null?i:nS,i(f,a)&&e.ref===t.ref)return cd(e,t,c)}return t.flags|=1,e=kh(u,a),e.ref=t.ref,e.return=t,t.child=e}function lW(e,t,i,a,c){if(e!==null){var u=e.memoizedProps;if(nS(u,a)&&e.ref===t.ref)if(fs=!1,t.pendingProps=a=u,(e.lanes&c)!==0)e.flags&131072&&(fs=!0);else return t.lanes=e.lanes,cd(e,t,c)}return rL(e,t,i,a,c)}function uW(e,t,i){var a=t.pendingProps,c=a.children,u=e!==null?e.memoizedState:null;if(a.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qr(W0,Ws),Ws|=i;else{if(!(i&1073741824))return e=u!==null?u.baseLanes|i:i,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Qr(W0,Ws),Ws|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=u!==null?u.baseLanes:i,Qr(W0,Ws),Ws|=a}else u!==null?(a=u.baseLanes|i,t.memoizedState=null):a=i,Qr(W0,Ws),Ws|=a;return Ma(e,t,c,i),t.child}function dW(e,t){var i=t.ref;(e===null&&i!==null||e!==null&&e.ref!==i)&&(t.flags|=512,t.flags|=2097152)}function rL(e,t,i,a,c){var u=gs(i)?hp:Ia.current;return u=og(t,u),Z0(t,c),i=n2(e,t,i,a,u,c),a=r2(),e!==null&&!fs?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,cd(e,t,c)):(vi&&a&&Wk(t),t.flags|=1,Ma(e,t,i,c),t.child)}function zB(e,t,i,a,c){if(gs(i)){var u=!0;XR(t)}else u=!1;if(Z0(t,c),t.stateNode===null)RR(e,t),FH(t,i,a),tL(t,i,a,c),a=!0;else if(e===null){var f=t.stateNode,m=t.memoizedProps;f.props=m;var g=f.context,E=i.contextType;typeof E=="object"&&E!==null?E=Pc(E):(E=gs(i)?hp:Ia.current,E=og(t,E));var y=i.getDerivedStateFromProps,T=typeof y=="function"||typeof f.getSnapshotBeforeUpdate=="function";T||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(m!==a||g!==E)&&UB(t,f,a,E),Sh=!1;var R=t.memoizedState;f.state=R,t1(t,a,f,c),g=t.memoizedState,m!==a||R!==g||ms.current||Sh?(typeof y=="function"&&(eL(t,i,y,a),g=t.memoizedState),(m=Sh||MB(t,i,m,a,R,g,E))?(T||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(t.flags|=4194308)):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=g),f.props=a,f.state=g,f.context=E,a=m):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{f=t.stateNode,MH(e,t),m=t.memoizedProps,E=t.type===t.elementType?m:hl(t.type,m),f.props=E,T=t.pendingProps,R=f.context,g=i.contextType,typeof g=="object"&&g!==null?g=Pc(g):(g=gs(i)?hp:Ia.current,g=og(t,g));var P=i.getDerivedStateFromProps;(y=typeof P=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(m!==T||R!==g)&&UB(t,f,a,g),Sh=!1,R=t.memoizedState,f.state=R,t1(t,a,f,c);var O=t.memoizedState;m!==T||R!==O||ms.current||Sh?(typeof P=="function"&&(eL(t,i,P,a),O=t.memoizedState),(E=Sh||MB(t,i,E,a,R,O,g)||!1)?(y||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(a,O,g),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(a,O,g)),typeof f.componentDidUpdate=="function"&&(t.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof f.componentDidUpdate!="function"||m===e.memoizedProps&&R===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||m===e.memoizedProps&&R===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=O),f.props=a,f.state=O,f.context=g,a=E):(typeof f.componentDidUpdate!="function"||m===e.memoizedProps&&R===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||m===e.memoizedProps&&R===e.memoizedState||(t.flags|=1024),a=!1)}return iL(e,t,i,a,u,c)}function iL(e,t,i,a,c,u){dW(e,t);var f=(t.flags&128)!==0;if(!a&&!f)return c&&xB(t,i,!1),cd(e,t,u);a=t.stateNode,VZ.current=t;var m=f&&typeof i.getDerivedStateFromError!="function"?null:a.render();return t.flags|=1,e!==null&&f?(t.child=sg(t,e.child,null,u),t.child=sg(t,null,m,u)):Ma(e,t,m,u),t.memoizedState=a.state,c&&xB(t,i,!0),t.child}function hW(e){var t=e.stateNode;t.pendingContext?NB(e,t.pendingContext,t.pendingContext!==t.context):t.context&&NB(e,t.context,!1),Qk(e,t.containerInfo)}function KB(e,t,i,a,c){return ag(),zk(c),t.flags|=256,Ma(e,t,i,a),t.child}var oL={dehydrated:null,treeContext:null,retryLane:0};function aL(e){return{baseLanes:e,cachePool:null,transitions:null}}function fW(e,t,i){var a=t.pendingProps,c=Ci.current,u=!1,f=(t.flags&128)!==0,m;if((m=f)||(m=e!==null&&e.memoizedState===null?!1:(c&2)!==0),m?(u=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(c|=1),Qr(Ci,c&1),e===null)return QD(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(f=a.children,e=a.fallback,u?(a=t.mode,u=t.child,f={mode:"hidden",children:f},!(a&1)&&u!==null?(u.childLanes=0,u.pendingProps=f):u=X1(f,a,0,null),e=sp(e,a,i,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=aL(i),t.memoizedState=oL,e):a2(t,f));if(c=e.memoizedState,c!==null&&(m=c.dehydrated,m!==null))return jZ(e,t,f,a,m,c,i);if(u){u=a.fallback,f=t.mode,c=e.child,m=c.sibling;var g={mode:"hidden",children:a.children};return!(f&1)&&t.child!==c?(a=t.child,a.childLanes=0,a.pendingProps=g,t.deletions=null):(a=kh(c,g),a.subtreeFlags=c.subtreeFlags&14680064),m!==null?u=kh(m,u):(u=sp(u,f,i,null),u.flags|=2),u.return=t,a.return=t,a.sibling=u,t.child=a,a=u,u=t.child,f=e.child.memoizedState,f=f===null?aL(i):{baseLanes:f.baseLanes|i,cachePool:null,transitions:f.transitions},u.memoizedState=f,u.childLanes=e.childLanes&~i,t.memoizedState=oL,a}return u=e.child,e=u.sibling,a=kh(u,{mode:"visible",children:a.children}),!(t.mode&1)&&(a.lanes=i),a.return=t,a.sibling=null,e!==null&&(i=t.deletions,i===null?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=a,t.memoizedState=null,a}function a2(e,t){return t=X1({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Bb(e,t,i,a){return a!==null&&zk(a),sg(t,e.child,null,i),e=a2(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function jZ(e,t,i,a,c,u,f){if(i)return t.flags&256?(t.flags&=-257,a=Kx(Error(tt(422))),Bb(e,t,f,a)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(u=a.fallback,c=t.mode,a=X1({mode:"visible",children:a.children},c,0,null),u=sp(u,c,f,null),u.flags|=2,a.return=t,u.return=t,a.sibling=u,t.child=a,t.mode&1&&sg(t,e.child,null,f),t.child.memoizedState=aL(f),t.memoizedState=oL,u);if(!(t.mode&1))return Bb(e,t,f,null);if(c.data==="$!"){if(a=c.nextSibling&&c.nextSibling.dataset,a)var m=a.dgst;return a=m,u=Error(tt(419)),a=Kx(u,a,void 0),Bb(e,t,f,a)}if(m=(f&e.childLanes)!==0,fs||m){if(a=Lo,a!==null){switch(f&-f){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}c=c&(a.suspendedLanes|f)?0:c,c!==0&&c!==u.retryLane&&(u.retryLane=c,sd(e,c),Cl(a,e,c,-1))}return h2(),a=Kx(Error(tt(421))),Bb(e,t,f,a)}return c.data==="$?"?(t.flags|=128,t.child=e.child,t=ZZ.bind(null,e),c._reactRetry=t,null):(e=u.treeContext,Gs=xh(c.nextSibling),Ks=t,vi=!0,vl=null,e!==null&&(wc[Oc++]=ed,wc[Oc++]=td,wc[Oc++]=fp,ed=e.id,td=e.overflow,fp=t),t=a2(t,a.children),t.flags|=4096,t)}function qB(e,t,i){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),ZD(e.return,t,i)}function qx(e,t,i,a,c){var u=e.memoizedState;u===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:i,tailMode:c}:(u.isBackwards=t,u.rendering=null,u.renderingStartTime=0,u.last=a,u.tail=i,u.tailMode=c)}function pW(e,t,i){var a=t.pendingProps,c=a.revealOrder,u=a.tail;if(Ma(e,t,a.children,i),a=Ci.current,a&2)a=a&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&qB(e,i,t);else if(e.tag===19)qB(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(Qr(Ci,a),!(t.mode&1))t.memoizedState=null;else switch(c){case"forwards":for(i=t.child,c=null;i!==null;)e=i.alternate,e!==null&&n1(e)===null&&(c=i),i=i.sibling;i=c,i===null?(c=t.child,t.child=null):(c=i.sibling,i.sibling=null),qx(t,!1,c,i,u);break;case"backwards":for(i=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&n1(e)===null){t.child=c;break}e=c.sibling,c.sibling=i,i=c,c=e}qx(t,!0,i,null,u);break;case"together":qx(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function RR(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function cd(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),mp|=t.lanes,!(i&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(tt(153));if(t.child!==null){for(e=t.child,i=kh(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=kh(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function BZ(e,t,i){switch(t.tag){case 3:hW(t),ag();break;case 5:BH(t);break;case 1:gs(t.type)&&XR(t);break;case 4:Qk(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,c=t.memoizedProps.value;Qr(ZR,a._currentValue),a._currentValue=c;break;case 13:if(a=t.memoizedState,a!==null)return a.dehydrated!==null?(Qr(Ci,Ci.current&1),t.flags|=128,null):i&t.child.childLanes?fW(e,t,i):(Qr(Ci,Ci.current&1),e=cd(e,t,i),e!==null?e.sibling:null);Qr(Ci,Ci.current&1);break;case 19:if(a=(i&t.childLanes)!==0,e.flags&128){if(a)return pW(e,t,i);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),Qr(Ci,Ci.current),a)break;return null;case 22:case 23:return t.lanes=0,uW(e,t,i)}return cd(e,t,i)}var mW,sL,gW,vW;mW=function(e,t){for(var i=t.child;i!==null;){if(i.tag===5||i.tag===6)e.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};sL=function(){};gW=function(e,t,i,a){var c=e.memoizedProps;if(c!==a){e=t.stateNode,np(yu.current);var u=null;switch(i){case"input":c=AD(e,c),a=AD(e,a),u=[];break;case"select":c=Ri({},c,{value:void 0}),a=Ri({},a,{value:void 0}),u=[];break;case"textarea":c=PD(e,c),a=PD(e,a),u=[];break;default:typeof c.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=qR)}LD(i,a);var f;i=null;for(E in c)if(!a.hasOwnProperty(E)&&c.hasOwnProperty(E)&&c[E]!=null)if(E==="style"){var m=c[E];for(f in m)m.hasOwnProperty(f)&&(i||(i={}),i[f]="")}else E!=="dangerouslySetInnerHTML"&&E!=="children"&&E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&E!=="autoFocus"&&(Y_.hasOwnProperty(E)?u||(u=[]):(u=u||[]).push(E,null));for(E in a){var g=a[E];if(m=c!=null?c[E]:void 0,a.hasOwnProperty(E)&&g!==m&&(g!=null||m!=null))if(E==="style")if(m){for(f in m)!m.hasOwnProperty(f)||g&&g.hasOwnProperty(f)||(i||(i={}),i[f]="");for(f in g)g.hasOwnProperty(f)&&m[f]!==g[f]&&(i||(i={}),i[f]=g[f])}else i||(u||(u=[]),u.push(E,i)),i=g;else E==="dangerouslySetInnerHTML"?(g=g?g.__html:void 0,m=m?m.__html:void 0,g!=null&&m!==g&&(u=u||[]).push(E,g)):E==="children"?typeof g!="string"&&typeof g!="number"||(u=u||[]).push(E,""+g):E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&(Y_.hasOwnProperty(E)?(g!=null&&E==="onScroll"&&li("scroll",e),u||m===g||(u=[])):(u=u||[]).push(E,g))}i&&(u=u||[]).push("style",i);var E=u;(t.updateQueue=E)&&(t.flags|=4)}};vW=function(e,t,i,a){i!==a&&(t.flags|=4)};function h_(e,t){if(!vi)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function Ca(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,a=0;if(t)for(var c=e.child;c!==null;)i|=c.lanes|c.childLanes,a|=c.subtreeFlags&14680064,a|=c.flags&14680064,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)i|=c.lanes|c.childLanes,a|=c.subtreeFlags,a|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=a,e.childLanes=i,t}function $Z(e,t,i){var a=t.pendingProps;switch(Gk(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ca(t),null;case 1:return gs(t.type)&&YR(),Ca(t),null;case 3:return a=t.stateNode,cg(),ui(ms),ui(Ia),e2(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Vb(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,vl!==null&&(mL(vl),vl=null))),sL(e,t),Ca(t),null;case 5:Zk(t);var c=np(sS.current);if(i=t.type,e!==null&&t.stateNode!=null)gW(e,t,i,a,c),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(t.stateNode===null)throw Error(tt(166));return Ca(t),null}if(e=np(yu.current),Vb(t)){a=t.stateNode,i=t.type;var u=t.memoizedProps;switch(a[_u]=t,a[oS]=u,e=(t.mode&1)!==0,i){case"dialog":li("cancel",a),li("close",a);break;case"iframe":case"object":case"embed":li("load",a);break;case"video":case"audio":for(c=0;c<w_.length;c++)li(w_[c],a);break;case"source":li("error",a);break;case"img":case"image":case"link":li("error",a),li("load",a);break;case"details":li("toggle",a);break;case"input":rB(a,u),li("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!u.multiple},li("invalid",a);break;case"textarea":oB(a,u),li("invalid",a)}LD(i,u),c=null;for(var f in u)if(u.hasOwnProperty(f)){var m=u[f];f==="children"?typeof m=="string"?a.textContent!==m&&(u.suppressHydrationWarning!==!0&&Fb(a.textContent,m,e),c=["children",m]):typeof m=="number"&&a.textContent!==""+m&&(u.suppressHydrationWarning!==!0&&Fb(a.textContent,m,e),c=["children",""+m]):Y_.hasOwnProperty(f)&&m!=null&&f==="onScroll"&&li("scroll",a)}switch(i){case"input":Nb(a),iB(a,u,!0);break;case"textarea":Nb(a),aB(a);break;case"select":case"option":break;default:typeof u.onClick=="function"&&(a.onclick=qR)}a=c,t.updateQueue=a,a!==null&&(t.flags|=4)}else{f=c.nodeType===9?c:c.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=W$(i)),e==="http://www.w3.org/1999/xhtml"?i==="script"?(e=f.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=f.createElement(i,{is:a.is}):(e=f.createElement(i),i==="select"&&(f=e,a.multiple?f.multiple=!0:a.size&&(f.size=a.size))):e=f.createElementNS(e,i),e[_u]=t,e[oS]=a,mW(e,t,!1,!1),t.stateNode=e;e:{switch(f=kD(i,a),i){case"dialog":li("cancel",e),li("close",e),c=a;break;case"iframe":case"object":case"embed":li("load",e),c=a;break;case"video":case"audio":for(c=0;c<w_.length;c++)li(w_[c],e);c=a;break;case"source":li("error",e),c=a;break;case"img":case"image":case"link":li("error",e),li("load",e),c=a;break;case"details":li("toggle",e),c=a;break;case"input":rB(e,a),c=AD(e,a),li("invalid",e);break;case"option":c=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},c=Ri({},a,{value:void 0}),li("invalid",e);break;case"textarea":oB(e,a),c=PD(e,a),li("invalid",e);break;default:c=a}LD(i,c),m=c;for(u in m)if(m.hasOwnProperty(u)){var g=m[u];u==="style"?K$(e,g):u==="dangerouslySetInnerHTML"?(g=g?g.__html:void 0,g!=null&&G$(e,g)):u==="children"?typeof g=="string"?(i!=="textarea"||g!=="")&&X_(e,g):typeof g=="number"&&X_(e,""+g):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Y_.hasOwnProperty(u)?g!=null&&u==="onScroll"&&li("scroll",e):g!=null&&Nk(e,u,g,f))}switch(i){case"input":Nb(e),iB(e,a,!1);break;case"textarea":Nb(e),aB(e);break;case"option":a.value!=null&&e.setAttribute("value",""+Mh(a.value));break;case"select":e.multiple=!!a.multiple,u=a.value,u!=null?Y0(e,!!a.multiple,u,!1):a.defaultValue!=null&&Y0(e,!!a.multiple,a.defaultValue,!0);break;default:typeof c.onClick=="function"&&(e.onclick=qR)}switch(i){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ca(t),null;case 6:if(e&&t.stateNode!=null)vW(e,t,e.memoizedProps,a);else{if(typeof a!="string"&&t.stateNode===null)throw Error(tt(166));if(i=np(sS.current),np(yu.current),Vb(t)){if(a=t.stateNode,i=t.memoizedProps,a[_u]=t,(u=a.nodeValue!==i)&&(e=Ks,e!==null))switch(e.tag){case 3:Fb(a.nodeValue,i,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Fb(a.nodeValue,i,(e.mode&1)!==0)}u&&(t.flags|=4)}else a=(i.nodeType===9?i:i.ownerDocument).createTextNode(a),a[_u]=t,t.stateNode=a}return Ca(t),null;case 13:if(ui(Ci),a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(vi&&Gs!==null&&t.mode&1&&!(t.flags&128))LH(),ag(),t.flags|=98560,u=!1;else if(u=Vb(t),a!==null&&a.dehydrated!==null){if(e===null){if(!u)throw Error(tt(318));if(u=t.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(tt(317));u[_u]=t}else ag(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ca(t),u=!1}else vl!==null&&(mL(vl),vl=null),u=!0;if(!u)return t.flags&65536?t:null}return t.flags&128?(t.lanes=i,t):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(t.child.flags|=8192,t.mode&1&&(e===null||Ci.current&1?Co===0&&(Co=3):h2())),t.updateQueue!==null&&(t.flags|=4),Ca(t),null);case 4:return cg(),sL(e,t),e===null&&rS(t.stateNode.containerInfo),Ca(t),null;case 10:return Yk(t.type._context),Ca(t),null;case 17:return gs(t.type)&&YR(),Ca(t),null;case 19:if(ui(Ci),u=t.memoizedState,u===null)return Ca(t),null;if(a=(t.flags&128)!==0,f=u.rendering,f===null)if(a)h_(u,!1);else{if(Co!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(f=n1(e),f!==null){for(t.flags|=128,h_(u,!1),a=f.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=i,i=t.child;i!==null;)u=i,e=a,u.flags&=14680066,f=u.alternate,f===null?(u.childLanes=0,u.lanes=e,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=f.childLanes,u.lanes=f.lanes,u.child=f.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=f.memoizedProps,u.memoizedState=f.memoizedState,u.updateQueue=f.updateQueue,u.type=f.type,e=f.dependencies,u.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return Qr(Ci,Ci.current&1|2),t.child}e=e.sibling}u.tail!==null&&Gi()>ug&&(t.flags|=128,a=!0,h_(u,!1),t.lanes=4194304)}else{if(!a)if(e=n1(f),e!==null){if(t.flags|=128,a=!0,i=e.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),h_(u,!0),u.tail===null&&u.tailMode==="hidden"&&!f.alternate&&!vi)return Ca(t),null}else 2*Gi()-u.renderingStartTime>ug&&i!==1073741824&&(t.flags|=128,a=!0,h_(u,!1),t.lanes=4194304);u.isBackwards?(f.sibling=t.child,t.child=f):(i=u.last,i!==null?i.sibling=f:t.child=f,u.last=f)}return u.tail!==null?(t=u.tail,u.rendering=t,u.tail=t.sibling,u.renderingStartTime=Gi(),t.sibling=null,i=Ci.current,Qr(Ci,a?i&1|2:i&1),t):(Ca(t),null);case 22:case 23:return d2(),a=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(t.flags|=8192),a&&t.mode&1?Ws&1073741824&&(Ca(t),t.subtreeFlags&6&&(t.flags|=8192)):Ca(t),null;case 24:return null;case 25:return null}throw Error(tt(156,t.tag))}function HZ(e,t){switch(Gk(t),t.tag){case 1:return gs(t.type)&&YR(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return cg(),ui(ms),ui(Ia),e2(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Zk(t),null;case 13:if(ui(Ci),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(tt(340));ag()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ui(Ci),null;case 4:return cg(),null;case 10:return Yk(t.type._context),null;case 22:case 23:return d2(),null;case 24:return null;default:return null}}var $b=!1,Ra=!1,WZ=typeof WeakSet=="function"?WeakSet:Set,It=null;function H0(e,t){var i=e.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(a){xi(e,t,a)}else i.current=null}function cL(e,t,i){try{i()}catch(a){xi(e,t,a)}}var YB=!1;function GZ(e,t){if(GD=GR,e=yH(),Hk(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var a=i.getSelection&&i.getSelection();if(a&&a.rangeCount!==0){i=a.anchorNode;var c=a.anchorOffset,u=a.focusNode;a=a.focusOffset;try{i.nodeType,u.nodeType}catch{i=null;break e}var f=0,m=-1,g=-1,E=0,y=0,T=e,R=null;t:for(;;){for(var P;T!==i||c!==0&&T.nodeType!==3||(m=f+c),T!==u||a!==0&&T.nodeType!==3||(g=f+a),T.nodeType===3&&(f+=T.nodeValue.length),(P=T.firstChild)!==null;)R=T,T=P;for(;;){if(T===e)break t;if(R===i&&++E===c&&(m=f),R===u&&++y===a&&(g=f),(P=T.nextSibling)!==null)break;T=R,R=T.parentNode}T=P}i=m===-1||g===-1?null:{start:m,end:g}}else i=null}i=i||{start:0,end:0}}else i=null;for(zD={focusedElem:e,selectionRange:i},GR=!1,It=t;It!==null;)if(t=It,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,It=e;else for(;It!==null;){t=It;try{var O=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(O!==null){var N=O.memoizedProps,M=O.memoizedState,D=t.stateNode,x=D.getSnapshotBeforeUpdate(t.elementType===t.type?N:hl(t.type,N),M);D.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var k=t.stateNode.containerInfo;k.nodeType===1?k.textContent="":k.nodeType===9&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(tt(163))}}catch(V){xi(t,t.return,V)}if(e=t.sibling,e!==null){e.return=t.return,It=e;break}It=t.return}return O=YB,YB=!1,O}function M_(e,t,i){var a=t.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var c=a=a.next;do{if((c.tag&e)===e){var u=c.destroy;c.destroy=void 0,u!==void 0&&cL(t,i,u)}c=c.next}while(c!==a)}}function q1(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var i=t=t.next;do{if((i.tag&e)===e){var a=i.create;i.destroy=a()}i=i.next}while(i!==t)}}function lL(e){var t=e.ref;if(t!==null){var i=e.stateNode;switch(e.tag){case 5:e=i;break;default:e=i}typeof t=="function"?t(e):t.current=e}}function EW(e){var t=e.alternate;t!==null&&(e.alternate=null,EW(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[_u],delete t[oS],delete t[YD],delete t[wZ],delete t[OZ])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function _W(e){return e.tag===5||e.tag===3||e.tag===4}function XB(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||_W(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function uL(e,t,i){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?i.nodeType===8?i.parentNode.insertBefore(e,t):i.insertBefore(e,t):(i.nodeType===8?(t=i.parentNode,t.insertBefore(e,i)):(t=i,t.appendChild(e)),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=qR));else if(a!==4&&(e=e.child,e!==null))for(uL(e,t,i),e=e.sibling;e!==null;)uL(e,t,i),e=e.sibling}function dL(e,t,i){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(dL(e,t,i),e=e.sibling;e!==null;)dL(e,t,i),e=e.sibling}var qo=null,fl=!1;function gh(e,t,i){for(i=i.child;i!==null;)SW(e,t,i),i=i.sibling}function SW(e,t,i){if(Su&&typeof Su.onCommitFiberUnmount=="function")try{Su.onCommitFiberUnmount(j1,i)}catch{}switch(i.tag){case 5:Ra||H0(i,t);case 6:var a=qo,c=fl;qo=null,gh(e,t,i),qo=a,fl=c,qo!==null&&(fl?(e=qo,i=i.stateNode,e.nodeType===8?e.parentNode.removeChild(i):e.removeChild(i)):qo.removeChild(i.stateNode));break;case 18:qo!==null&&(fl?(e=qo,i=i.stateNode,e.nodeType===8?Bx(e.parentNode,i):e.nodeType===1&&Bx(e,i),eS(e)):Bx(qo,i.stateNode));break;case 4:a=qo,c=fl,qo=i.stateNode.containerInfo,fl=!0,gh(e,t,i),qo=a,fl=c;break;case 0:case 11:case 14:case 15:if(!Ra&&(a=i.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){c=a=a.next;do{var u=c,f=u.destroy;u=u.tag,f!==void 0&&(u&2||u&4)&&cL(i,t,f),c=c.next}while(c!==a)}gh(e,t,i);break;case 1:if(!Ra&&(H0(i,t),a=i.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=i.memoizedProps,a.state=i.memoizedState,a.componentWillUnmount()}catch(m){xi(i,t,m)}gh(e,t,i);break;case 21:gh(e,t,i);break;case 22:i.mode&1?(Ra=(a=Ra)||i.memoizedState!==null,gh(e,t,i),Ra=a):gh(e,t,i);break;default:gh(e,t,i)}}function JB(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var i=e.stateNode;i===null&&(i=e.stateNode=new WZ),t.forEach(function(a){var c=eee.bind(null,e,a);i.has(a)||(i.add(a),a.then(c,c))})}}function ul(e,t){var i=t.deletions;if(i!==null)for(var a=0;a<i.length;a++){var c=i[a];try{var u=e,f=t,m=f;e:for(;m!==null;){switch(m.tag){case 5:qo=m.stateNode,fl=!1;break e;case 3:qo=m.stateNode.containerInfo,fl=!0;break e;case 4:qo=m.stateNode.containerInfo,fl=!0;break e}m=m.return}if(qo===null)throw Error(tt(160));SW(u,f,c),qo=null,fl=!1;var g=c.alternate;g!==null&&(g.return=null),c.return=null}catch(E){xi(c,t,E)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)yW(t,e),t=t.sibling}function yW(e,t){var i=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ul(t,e),mu(e),a&4){try{M_(3,e,e.return),q1(3,e)}catch(N){xi(e,e.return,N)}try{M_(5,e,e.return)}catch(N){xi(e,e.return,N)}}break;case 1:ul(t,e),mu(e),a&512&&i!==null&&H0(i,i.return);break;case 5:if(ul(t,e),mu(e),a&512&&i!==null&&H0(i,i.return),e.flags&32){var c=e.stateNode;try{X_(c,"")}catch(N){xi(e,e.return,N)}}if(a&4&&(c=e.stateNode,c!=null)){var u=e.memoizedProps,f=i!==null?i.memoizedProps:u,m=e.type,g=e.updateQueue;if(e.updateQueue=null,g!==null)try{m==="input"&&u.type==="radio"&&u.name!=null&&$$(c,u),kD(m,f);var E=kD(m,u);for(f=0;f<g.length;f+=2){var y=g[f],T=g[f+1];y==="style"?K$(c,T):y==="dangerouslySetInnerHTML"?G$(c,T):y==="children"?X_(c,T):Nk(c,y,T,E)}switch(m){case"input":ND(c,u);break;case"textarea":H$(c,u);break;case"select":var R=c._wrapperState.wasMultiple;c._wrapperState.wasMultiple=!!u.multiple;var P=u.value;P!=null?Y0(c,!!u.multiple,P,!1):R!==!!u.multiple&&(u.defaultValue!=null?Y0(c,!!u.multiple,u.defaultValue,!0):Y0(c,!!u.multiple,u.multiple?[]:"",!1))}c[oS]=u}catch(N){xi(e,e.return,N)}}break;case 6:if(ul(t,e),mu(e),a&4){if(e.stateNode===null)throw Error(tt(162));c=e.stateNode,u=e.memoizedProps;try{c.nodeValue=u}catch(N){xi(e,e.return,N)}}break;case 3:if(ul(t,e),mu(e),a&4&&i!==null&&i.memoizedState.isDehydrated)try{eS(t.containerInfo)}catch(N){xi(e,e.return,N)}break;case 4:ul(t,e),mu(e);break;case 13:ul(t,e),mu(e),c=e.child,c.flags&8192&&(u=c.memoizedState!==null,c.stateNode.isHidden=u,!u||c.alternate!==null&&c.alternate.memoizedState!==null||(l2=Gi())),a&4&&JB(e);break;case 22:if(y=i!==null&&i.memoizedState!==null,e.mode&1?(Ra=(E=Ra)||y,ul(t,e),Ra=E):ul(t,e),mu(e),a&8192){if(E=e.memoizedState!==null,(e.stateNode.isHidden=E)&&!y&&e.mode&1)for(It=e,y=e.child;y!==null;){for(T=It=y;It!==null;){switch(R=It,P=R.child,R.tag){case 0:case 11:case 14:case 15:M_(4,R,R.return);break;case 1:H0(R,R.return);var O=R.stateNode;if(typeof O.componentWillUnmount=="function"){a=R,i=R.return;try{t=a,O.props=t.memoizedProps,O.state=t.memoizedState,O.componentWillUnmount()}catch(N){xi(a,i,N)}}break;case 5:H0(R,R.return);break;case 22:if(R.memoizedState!==null){ZB(T);continue}}P!==null?(P.return=R,It=P):ZB(T)}y=y.sibling}e:for(y=null,T=e;;){if(T.tag===5){if(y===null){y=T;try{c=T.stateNode,E?(u=c.style,typeof u.setProperty=="function"?u.setProperty("display","none","important"):u.display="none"):(m=T.stateNode,g=T.memoizedProps.style,f=g!=null&&g.hasOwnProperty("display")?g.display:null,m.style.display=z$("display",f))}catch(N){xi(e,e.return,N)}}}else if(T.tag===6){if(y===null)try{T.stateNode.nodeValue=E?"":T.memoizedProps}catch(N){xi(e,e.return,N)}}else if((T.tag!==22&&T.tag!==23||T.memoizedState===null||T===e)&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===e)break e;for(;T.sibling===null;){if(T.return===null||T.return===e)break e;y===T&&(y=null),T=T.return}y===T&&(y=null),T.sibling.return=T.return,T=T.sibling}}break;case 19:ul(t,e),mu(e),a&4&&JB(e);break;case 21:break;default:ul(t,e),mu(e)}}function mu(e){var t=e.flags;if(t&2){try{e:{for(var i=e.return;i!==null;){if(_W(i)){var a=i;break e}i=i.return}throw Error(tt(160))}switch(a.tag){case 5:var c=a.stateNode;a.flags&32&&(X_(c,""),a.flags&=-33);var u=XB(e);dL(e,u,c);break;case 3:case 4:var f=a.stateNode.containerInfo,m=XB(e);uL(e,m,f);break;default:throw Error(tt(161))}}catch(g){xi(e,e.return,g)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function zZ(e,t,i){It=e,CW(e)}function CW(e,t,i){for(var a=(e.mode&1)!==0;It!==null;){var c=It,u=c.child;if(c.tag===22&&a){var f=c.memoizedState!==null||$b;if(!f){var m=c.alternate,g=m!==null&&m.memoizedState!==null||Ra;m=$b;var E=Ra;if($b=f,(Ra=g)&&!E)for(It=c;It!==null;)f=It,g=f.child,f.tag===22&&f.memoizedState!==null?e8(c):g!==null?(g.return=f,It=g):e8(c);for(;u!==null;)It=u,CW(u),u=u.sibling;It=c,$b=m,Ra=E}QB(e)}else c.subtreeFlags&8772&&u!==null?(u.return=c,It=u):QB(e)}}function QB(e){for(;It!==null;){var t=It;if(t.flags&8772){var i=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ra||q1(5,t);break;case 1:var a=t.stateNode;if(t.flags&4&&!Ra)if(i===null)a.componentDidMount();else{var c=t.elementType===t.type?i.memoizedProps:hl(t.type,i.memoizedProps);a.componentDidUpdate(c,i.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var u=t.updateQueue;u!==null&&kB(t,u,a);break;case 3:var f=t.updateQueue;if(f!==null){if(i=null,t.child!==null)switch(t.child.tag){case 5:i=t.child.stateNode;break;case 1:i=t.child.stateNode}kB(t,f,i)}break;case 5:var m=t.stateNode;if(i===null&&t.flags&4){i=m;var g=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":g.autoFocus&&i.focus();break;case"img":g.src&&(i.src=g.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var E=t.alternate;if(E!==null){var y=E.memoizedState;if(y!==null){var T=y.dehydrated;T!==null&&eS(T)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(tt(163))}Ra||t.flags&512&&lL(t)}catch(R){xi(t,t.return,R)}}if(t===e){It=null;break}if(i=t.sibling,i!==null){i.return=t.return,It=i;break}It=t.return}}function ZB(e){for(;It!==null;){var t=It;if(t===e){It=null;break}var i=t.sibling;if(i!==null){i.return=t.return,It=i;break}It=t.return}}function e8(e){for(;It!==null;){var t=It;try{switch(t.tag){case 0:case 11:case 15:var i=t.return;try{q1(4,t)}catch(g){xi(t,i,g)}break;case 1:var a=t.stateNode;if(typeof a.componentDidMount=="function"){var c=t.return;try{a.componentDidMount()}catch(g){xi(t,c,g)}}var u=t.return;try{lL(t)}catch(g){xi(t,u,g)}break;case 5:var f=t.return;try{lL(t)}catch(g){xi(t,f,g)}}}catch(g){xi(t,t.return,g)}if(t===e){It=null;break}var m=t.sibling;if(m!==null){m.return=t.return,It=m;break}It=t.return}}var KZ=Math.ceil,o1=pd.ReactCurrentDispatcher,s2=pd.ReactCurrentOwner,Nc=pd.ReactCurrentBatchConfig,ir=0,Lo=null,co=null,Qo=0,Ws=0,W0=$h(0),Co=0,dS=null,mp=0,Y1=0,c2=0,U_=null,hs=null,l2=0,ug=1/0,Ju=null,a1=!1,hL=null,Dh=null,Hb=!1,bh=null,s1=0,F_=0,fL=null,IR=-1,wR=0;function Ua(){return ir&6?Gi():IR!==-1?IR:IR=Gi()}function Lh(e){return e.mode&1?ir&2&&Qo!==0?Qo&-Qo:NZ.transition!==null?(wR===0&&(wR=oH()),wR):(e=Ir,e!==0||(e=window.event,e=e===void 0?16:hH(e.type)),e):1}function Cl(e,t,i,a){if(50<F_)throw F_=0,fL=null,Error(tt(185));wS(e,i,a),(!(ir&2)||e!==Lo)&&(e===Lo&&(!(ir&2)&&(Y1|=i),Co===4&&Ch(e,Qo)),vs(e,a),i===1&&ir===0&&!(t.mode&1)&&(ug=Gi()+500,G1&&Hh()))}function vs(e,t){var i=e.callbackNode;NQ(e,t);var a=WR(e,e===Lo?Qo:0);if(a===0)i!==null&&lB(i),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(i!=null&&lB(i),t===1)e.tag===0?AZ(t8.bind(null,e)):xH(t8.bind(null,e)),RZ(function(){!(ir&6)&&Hh()}),i=null;else{switch(aH(a)){case 1:i=kk;break;case 4:i=rH;break;case 16:i=HR;break;case 536870912:i=iH;break;default:i=HR}i=NW(i,TW.bind(null,e))}e.callbackPriority=t,e.callbackNode=i}}function TW(e,t){if(IR=-1,wR=0,ir&6)throw Error(tt(327));var i=e.callbackNode;if(eg()&&e.callbackNode!==i)return null;var a=WR(e,e===Lo?Qo:0);if(a===0)return null;if(a&30||a&e.expiredLanes||t)t=c1(e,a);else{t=a;var c=ir;ir|=2;var u=RW();(Lo!==e||Qo!==t)&&(Ju=null,ug=Gi()+500,ap(e,t));do try{XZ();break}catch(m){bW(e,m)}while(1);qk(),o1.current=u,ir=c,co!==null?t=0:(Lo=null,Qo=0,t=Co)}if(t!==0){if(t===2&&(c=jD(e),c!==0&&(a=c,t=pL(e,c))),t===1)throw i=dS,ap(e,0),Ch(e,a),vs(e,Gi()),i;if(t===6)Ch(e,a);else{if(c=e.current.alternate,!(a&30)&&!qZ(c)&&(t=c1(e,a),t===2&&(u=jD(e),u!==0&&(a=u,t=pL(e,u))),t===1))throw i=dS,ap(e,0),Ch(e,a),vs(e,Gi()),i;switch(e.finishedWork=c,e.finishedLanes=a,t){case 0:case 1:throw Error(tt(345));case 2:Xf(e,hs,Ju);break;case 3:if(Ch(e,a),(a&130023424)===a&&(t=l2+500-Gi(),10<t)){if(WR(e,0)!==0)break;if(c=e.suspendedLanes,(c&a)!==a){Ua(),e.pingedLanes|=e.suspendedLanes&c;break}e.timeoutHandle=qD(Xf.bind(null,e,hs,Ju),t);break}Xf(e,hs,Ju);break;case 4:if(Ch(e,a),(a&4194240)===a)break;for(t=e.eventTimes,c=-1;0<a;){var f=31-yl(a);u=1<<f,f=t[f],f>c&&(c=f),a&=~u}if(a=c,a=Gi()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*KZ(a/1960))-a,10<a){e.timeoutHandle=qD(Xf.bind(null,e,hs,Ju),a);break}Xf(e,hs,Ju);break;case 5:Xf(e,hs,Ju);break;default:throw Error(tt(329))}}}return vs(e,Gi()),e.callbackNode===i?TW.bind(null,e):null}function pL(e,t){var i=U_;return e.current.memoizedState.isDehydrated&&(ap(e,t).flags|=256),e=c1(e,t),e!==2&&(t=hs,hs=i,t!==null&&mL(t)),e}function mL(e){hs===null?hs=e:hs.push.apply(hs,e)}function qZ(e){for(var t=e;;){if(t.flags&16384){var i=t.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var a=0;a<i.length;a++){var c=i[a],u=c.getSnapshot;c=c.value;try{if(!bl(u(),c))return!1}catch{return!1}}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ch(e,t){for(t&=~c2,t&=~Y1,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var i=31-yl(t),a=1<<i;e[i]=-1,t&=~a}}function t8(e){if(ir&6)throw Error(tt(327));eg();var t=WR(e,0);if(!(t&1))return vs(e,Gi()),null;var i=c1(e,t);if(e.tag!==0&&i===2){var a=jD(e);a!==0&&(t=a,i=pL(e,a))}if(i===1)throw i=dS,ap(e,0),Ch(e,t),vs(e,Gi()),i;if(i===6)throw Error(tt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Xf(e,hs,Ju),vs(e,Gi()),null}function u2(e,t){var i=ir;ir|=1;try{return e(t)}finally{ir=i,ir===0&&(ug=Gi()+500,G1&&Hh())}}function gp(e){bh!==null&&bh.tag===0&&!(ir&6)&&eg();var t=ir;ir|=1;var i=Nc.transition,a=Ir;try{if(Nc.transition=null,Ir=1,e)return e()}finally{Ir=a,Nc.transition=i,ir=t,!(ir&6)&&Hh()}}function d2(){Ws=W0.current,ui(W0)}function ap(e,t){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(i!==-1&&(e.timeoutHandle=-1,bZ(i)),co!==null)for(i=co.return;i!==null;){var a=i;switch(Gk(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&YR();break;case 3:cg(),ui(ms),ui(Ia),e2();break;case 5:Zk(a);break;case 4:cg();break;case 13:ui(Ci);break;case 19:ui(Ci);break;case 10:Yk(a.type._context);break;case 22:case 23:d2()}i=i.return}if(Lo=e,co=e=kh(e.current,null),Qo=Ws=t,Co=0,dS=null,c2=Y1=mp=0,hs=U_=null,tp!==null){for(t=0;t<tp.length;t++)if(i=tp[t],a=i.interleaved,a!==null){i.interleaved=null;var c=a.next,u=i.pending;if(u!==null){var f=u.next;u.next=c,a.next=f}i.pending=a}tp=null}return e}function bW(e,t){do{var i=co;try{if(qk(),TR.current=i1,r1){for(var a=bi.memoizedState;a!==null;){var c=a.queue;c!==null&&(c.pending=null),a=a.next}r1=!1}if(pp=0,Po=yo=bi=null,k_=!1,cS=0,s2.current=null,i===null||i.return===null){Co=1,dS=t,co=null;break}e:{var u=e,f=i.return,m=i,g=t;if(t=Qo,m.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){var E=g,y=m,T=y.tag;if(!(y.mode&1)&&(T===0||T===11||T===15)){var R=y.alternate;R?(y.updateQueue=R.updateQueue,y.memoizedState=R.memoizedState,y.lanes=R.lanes):(y.updateQueue=null,y.memoizedState=null)}var P=$B(f);if(P!==null){P.flags&=-257,HB(P,f,m,u,t),P.mode&1&&BB(u,E,t),t=P,g=E;var O=t.updateQueue;if(O===null){var N=new Set;N.add(g),t.updateQueue=N}else O.add(g);break e}else{if(!(t&1)){BB(u,E,t),h2();break e}g=Error(tt(426))}}else if(vi&&m.mode&1){var M=$B(f);if(M!==null){!(M.flags&65536)&&(M.flags|=256),HB(M,f,m,u,t),zk(lg(g,m));break e}}u=g=lg(g,m),Co!==4&&(Co=2),U_===null?U_=[u]:U_.push(u),u=f;do{switch(u.tag){case 3:u.flags|=65536,t&=-t,u.lanes|=t;var D=sW(u,g,t);LB(u,D);break e;case 1:m=g;var x=u.type,k=u.stateNode;if(!(u.flags&128)&&(typeof x.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(Dh===null||!Dh.has(k)))){u.flags|=65536,t&=-t,u.lanes|=t;var V=cW(u,m,t);LB(u,V);break e}}u=u.return}while(u!==null)}wW(i)}catch(H){t=H,co===i&&i!==null&&(co=i=i.return);continue}break}while(1)}function RW(){var e=o1.current;return o1.current=i1,e===null?i1:e}function h2(){(Co===0||Co===3||Co===2)&&(Co=4),Lo===null||!(mp&268435455)&&!(Y1&268435455)||Ch(Lo,Qo)}function c1(e,t){var i=ir;ir|=2;var a=RW();(Lo!==e||Qo!==t)&&(Ju=null,ap(e,t));do try{YZ();break}catch(c){bW(e,c)}while(1);if(qk(),ir=i,o1.current=a,co!==null)throw Error(tt(261));return Lo=null,Qo=0,Co}function YZ(){for(;co!==null;)IW(co)}function XZ(){for(;co!==null&&!yQ();)IW(co)}function IW(e){var t=AW(e.alternate,e,Ws);e.memoizedProps=e.pendingProps,t===null?wW(e):co=t,s2.current=null}function wW(e){var t=e;do{var i=t.alternate;if(e=t.return,t.flags&32768){if(i=HZ(i,t),i!==null){i.flags&=32767,co=i;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Co=6,co=null;return}}else if(i=$Z(i,t,Ws),i!==null){co=i;return}if(t=t.sibling,t!==null){co=t;return}co=t=e}while(t!==null);Co===0&&(Co=5)}function Xf(e,t,i){var a=Ir,c=Nc.transition;try{Nc.transition=null,Ir=1,JZ(e,t,i,a)}finally{Nc.transition=c,Ir=a}return null}function JZ(e,t,i,a){do eg();while(bh!==null);if(ir&6)throw Error(tt(327));i=e.finishedWork;var c=e.finishedLanes;if(i===null)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(tt(177));e.callbackNode=null,e.callbackPriority=0;var u=i.lanes|i.childLanes;if(xQ(e,u),e===Lo&&(co=Lo=null,Qo=0),!(i.subtreeFlags&2064)&&!(i.flags&2064)||Hb||(Hb=!0,NW(HR,function(){return eg(),null})),u=(i.flags&15990)!==0,i.subtreeFlags&15990||u){u=Nc.transition,Nc.transition=null;var f=Ir;Ir=1;var m=ir;ir|=4,s2.current=null,GZ(e,i),yW(i,e),vZ(zD),GR=!!GD,zD=GD=null,e.current=i,zZ(i),CQ(),ir=m,Ir=f,Nc.transition=u}else e.current=i;if(Hb&&(Hb=!1,bh=e,s1=c),u=e.pendingLanes,u===0&&(Dh=null),RQ(i.stateNode),vs(e,Gi()),t!==null)for(a=e.onRecoverableError,i=0;i<t.length;i++)c=t[i],a(c.value,{componentStack:c.stack,digest:c.digest});if(a1)throw a1=!1,e=hL,hL=null,e;return s1&1&&e.tag!==0&&eg(),u=e.pendingLanes,u&1?e===fL?F_++:(F_=0,fL=e):F_=0,Hh(),null}function eg(){if(bh!==null){var e=aH(s1),t=Nc.transition,i=Ir;try{if(Nc.transition=null,Ir=16>e?16:e,bh===null)var a=!1;else{if(e=bh,bh=null,s1=0,ir&6)throw Error(tt(331));var c=ir;for(ir|=4,It=e.current;It!==null;){var u=It,f=u.child;if(It.flags&16){var m=u.deletions;if(m!==null){for(var g=0;g<m.length;g++){var E=m[g];for(It=E;It!==null;){var y=It;switch(y.tag){case 0:case 11:case 15:M_(8,y,u)}var T=y.child;if(T!==null)T.return=y,It=T;else for(;It!==null;){y=It;var R=y.sibling,P=y.return;if(EW(y),y===E){It=null;break}if(R!==null){R.return=P,It=R;break}It=P}}}var O=u.alternate;if(O!==null){var N=O.child;if(N!==null){O.child=null;do{var M=N.sibling;N.sibling=null,N=M}while(N!==null)}}It=u}}if(u.subtreeFlags&2064&&f!==null)f.return=u,It=f;else e:for(;It!==null;){if(u=It,u.flags&2048)switch(u.tag){case 0:case 11:case 15:M_(9,u,u.return)}var D=u.sibling;if(D!==null){D.return=u.return,It=D;break e}It=u.return}}var x=e.current;for(It=x;It!==null;){f=It;var k=f.child;if(f.subtreeFlags&2064&&k!==null)k.return=f,It=k;else e:for(f=x;It!==null;){if(m=It,m.flags&2048)try{switch(m.tag){case 0:case 11:case 15:q1(9,m)}}catch(H){xi(m,m.return,H)}if(m===f){It=null;break e}var V=m.sibling;if(V!==null){V.return=m.return,It=V;break e}It=m.return}}if(ir=c,Hh(),Su&&typeof Su.onPostCommitFiberRoot=="function")try{Su.onPostCommitFiberRoot(j1,e)}catch{}a=!0}return a}finally{Ir=i,Nc.transition=t}}return!1}function n8(e,t,i){t=lg(i,t),t=sW(e,t,1),e=Ph(e,t,1),t=Ua(),e!==null&&(wS(e,1,t),vs(e,t))}function xi(e,t,i){if(e.tag===3)n8(e,e,i);else for(;t!==null;){if(t.tag===3){n8(t,e,i);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Dh===null||!Dh.has(a))){e=lg(i,e),e=cW(t,e,1),t=Ph(t,e,1),e=Ua(),t!==null&&(wS(t,1,e),vs(t,e));break}}t=t.return}}function QZ(e,t,i){var a=e.pingCache;a!==null&&a.delete(t),t=Ua(),e.pingedLanes|=e.suspendedLanes&i,Lo===e&&(Qo&i)===i&&(Co===4||Co===3&&(Qo&130023424)===Qo&&500>Gi()-l2?ap(e,0):c2|=i),vs(e,t)}function OW(e,t){t===0&&(e.mode&1?(t=Db,Db<<=1,!(Db&130023424)&&(Db=4194304)):t=1);var i=Ua();e=sd(e,t),e!==null&&(wS(e,t,i),vs(e,i))}function ZZ(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),OW(e,i)}function eee(e,t){var i=0;switch(e.tag){case 13:var a=e.stateNode,c=e.memoizedState;c!==null&&(i=c.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(tt(314))}a!==null&&a.delete(t),OW(e,i)}var AW;AW=function(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps||ms.current)fs=!0;else{if(!(e.lanes&i)&&!(t.flags&128))return fs=!1,BZ(e,t,i);fs=!!(e.flags&131072)}else fs=!1,vi&&t.flags&1048576&&PH(t,QR,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;RR(e,t),e=t.pendingProps;var c=og(t,Ia.current);Z0(t,i),c=n2(null,t,a,e,c,i);var u=r2();return t.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,gs(a)?(u=!0,XR(t)):u=!1,t.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,Jk(t),c.updater=z1,t.stateNode=c,c._reactInternals=t,tL(t,a,e,i),t=iL(null,t,a,!0,u,i)):(t.tag=0,vi&&u&&Wk(t),Ma(null,t,c,i),t=t.child),t;case 16:a=t.elementType;e:{switch(RR(e,t),e=t.pendingProps,c=a._init,a=c(a._payload),t.type=a,c=t.tag=nee(a),e=hl(a,e),c){case 0:t=rL(null,t,a,e,i);break e;case 1:t=zB(null,t,a,e,i);break e;case 11:t=WB(null,t,a,e,i);break e;case 14:t=GB(null,t,a,hl(a.type,e),i);break e}throw Error(tt(306,a,""))}return t;case 0:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:hl(a,c),rL(e,t,a,c,i);case 1:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:hl(a,c),zB(e,t,a,c,i);case 3:e:{if(hW(t),e===null)throw Error(tt(387));a=t.pendingProps,u=t.memoizedState,c=u.element,MH(e,t),t1(t,a,null,i);var f=t.memoizedState;if(a=f.element,u.isDehydrated)if(u={element:a,isDehydrated:!1,cache:f.cache,pendingSuspenseBoundaries:f.pendingSuspenseBoundaries,transitions:f.transitions},t.updateQueue.baseState=u,t.memoizedState=u,t.flags&256){c=lg(Error(tt(423)),t),t=KB(e,t,a,i,c);break e}else if(a!==c){c=lg(Error(tt(424)),t),t=KB(e,t,a,i,c);break e}else for(Gs=xh(t.stateNode.containerInfo.firstChild),Ks=t,vi=!0,vl=null,i=jH(t,null,a,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(ag(),a===c){t=cd(e,t,i);break e}Ma(e,t,a,i)}t=t.child}return t;case 5:return BH(t),e===null&&QD(t),a=t.type,c=t.pendingProps,u=e!==null?e.memoizedProps:null,f=c.children,KD(a,c)?f=null:u!==null&&KD(a,u)&&(t.flags|=32),dW(e,t),Ma(e,t,f,i),t.child;case 6:return e===null&&QD(t),null;case 13:return fW(e,t,i);case 4:return Qk(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=sg(t,null,a,i):Ma(e,t,a,i),t.child;case 11:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:hl(a,c),WB(e,t,a,c,i);case 7:return Ma(e,t,t.pendingProps,i),t.child;case 8:return Ma(e,t,t.pendingProps.children,i),t.child;case 12:return Ma(e,t,t.pendingProps.children,i),t.child;case 10:e:{if(a=t.type._context,c=t.pendingProps,u=t.memoizedProps,f=c.value,Qr(ZR,a._currentValue),a._currentValue=f,u!==null)if(bl(u.value,f)){if(u.children===c.children&&!ms.current){t=cd(e,t,i);break e}}else for(u=t.child,u!==null&&(u.return=t);u!==null;){var m=u.dependencies;if(m!==null){f=u.child;for(var g=m.firstContext;g!==null;){if(g.context===a){if(u.tag===1){g=nd(-1,i&-i),g.tag=2;var E=u.updateQueue;if(E!==null){E=E.shared;var y=E.pending;y===null?g.next=g:(g.next=y.next,y.next=g),E.pending=g}}u.lanes|=i,g=u.alternate,g!==null&&(g.lanes|=i),ZD(u.return,i,t),m.lanes|=i;break}g=g.next}}else if(u.tag===10)f=u.type===t.type?null:u.child;else if(u.tag===18){if(f=u.return,f===null)throw Error(tt(341));f.lanes|=i,m=f.alternate,m!==null&&(m.lanes|=i),ZD(f,i,t),f=u.sibling}else f=u.child;if(f!==null)f.return=u;else for(f=u;f!==null;){if(f===t){f=null;break}if(u=f.sibling,u!==null){u.return=f.return,f=u;break}f=f.return}u=f}Ma(e,t,c.children,i),t=t.child}return t;case 9:return c=t.type,a=t.pendingProps.children,Z0(t,i),c=Pc(c),a=a(c),t.flags|=1,Ma(e,t,a,i),t.child;case 14:return a=t.type,c=hl(a,t.pendingProps),c=hl(a.type,c),GB(e,t,a,c,i);case 15:return lW(e,t,t.type,t.pendingProps,i);case 17:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:hl(a,c),RR(e,t),t.tag=1,gs(a)?(e=!0,XR(t)):e=!1,Z0(t,i),FH(t,a,c),tL(t,a,c,i),iL(null,t,a,!0,e,i);case 19:return pW(e,t,i);case 22:return uW(e,t,i)}throw Error(tt(156,t.tag))};function NW(e,t){return nH(e,t)}function tee(e,t,i,a){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ac(e,t,i,a){return new tee(e,t,i,a)}function f2(e){return e=e.prototype,!(!e||!e.isReactComponent)}function nee(e){if(typeof e=="function")return f2(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Pk)return 11;if(e===Dk)return 14}return 2}function kh(e,t){var i=e.alternate;return i===null?(i=Ac(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&14680064,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function OR(e,t,i,a,c,u){var f=2;if(a=e,typeof e=="function")f2(e)&&(f=1);else if(typeof e=="string")f=5;else e:switch(e){case L0:return sp(i.children,c,u,t);case xk:f=8,c|=8;break;case RD:return e=Ac(12,i,t,c|2),e.elementType=RD,e.lanes=u,e;case ID:return e=Ac(13,i,t,c),e.elementType=ID,e.lanes=u,e;case wD:return e=Ac(19,i,t,c),e.elementType=wD,e.lanes=u,e;case V$:return X1(i,c,u,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case U$:f=10;break e;case F$:f=9;break e;case Pk:f=11;break e;case Dk:f=14;break e;case _h:f=16,a=null;break e}throw Error(tt(130,e==null?e:typeof e,""))}return t=Ac(f,i,t,c),t.elementType=e,t.type=a,t.lanes=u,t}function sp(e,t,i,a){return e=Ac(7,e,a,t),e.lanes=i,e}function X1(e,t,i,a){return e=Ac(22,e,a,t),e.elementType=V$,e.lanes=i,e.stateNode={isHidden:!1},e}function Yx(e,t,i){return e=Ac(6,e,null,t),e.lanes=i,e}function Xx(e,t,i){return t=Ac(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ree(e,t,i,a,c){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Nx(0),this.expirationTimes=Nx(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nx(0),this.identifierPrefix=a,this.onRecoverableError=c,this.mutableSourceEagerHydrationData=null}function p2(e,t,i,a,c,u,f,m,g){return e=new ree(e,t,i,m,g),t===1?(t=1,u===!0&&(t|=8)):t=0,u=Ac(3,null,null,t),e.current=u,u.stateNode=e,u.memoizedState={element:a,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},Jk(u),e}function iee(e,t,i){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:D0,key:a==null?null:""+a,children:e,containerInfo:t,implementation:i}}function xW(e){if(!e)return Uh;e=e._reactInternals;e:{if(_p(e)!==e||e.tag!==1)throw Error(tt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(gs(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(tt(171))}if(e.tag===1){var i=e.type;if(gs(i))return NH(e,i,t)}return t}function PW(e,t,i,a,c,u,f,m,g){return e=p2(i,a,!0,e,c,u,f,m,g),e.context=xW(null),i=e.current,a=Ua(),c=Lh(i),u=nd(a,c),u.callback=t??null,Ph(i,u,c),e.current.lanes=c,wS(e,c,a),vs(e,a),e}function J1(e,t,i,a){var c=t.current,u=Ua(),f=Lh(c);return i=xW(i),t.context===null?t.context=i:t.pendingContext=i,t=nd(u,f),t.payload={element:e},a=a===void 0?null:a,a!==null&&(t.callback=a),e=Ph(c,t,f),e!==null&&(Cl(e,c,f,u),CR(e,c,f)),f}function l1(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function r8(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function m2(e,t){r8(e,t),(e=e.alternate)&&r8(e,t)}function oee(){return null}var DW=typeof reportError=="function"?reportError:function(e){console.error(e)};function g2(e){this._internalRoot=e}Q1.prototype.render=g2.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(tt(409));J1(e,t,null,null)};Q1.prototype.unmount=g2.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;gp(function(){J1(null,e,null,null)}),t[ad]=null}};function Q1(e){this._internalRoot=e}Q1.prototype.unstable_scheduleHydration=function(e){if(e){var t=lH();e={blockedOn:null,target:e,priority:t};for(var i=0;i<yh.length&&t!==0&&t<yh[i].priority;i++);yh.splice(i,0,e),i===0&&dH(e)}};function v2(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Z1(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function i8(){}function aee(e,t,i,a,c){if(c){if(typeof a=="function"){var u=a;a=function(){var E=l1(f);u.call(E)}}var f=PW(t,a,e,0,null,!1,!1,"",i8);return e._reactRootContainer=f,e[ad]=f.current,rS(e.nodeType===8?e.parentNode:e),gp(),f}for(;c=e.lastChild;)e.removeChild(c);if(typeof a=="function"){var m=a;a=function(){var E=l1(g);m.call(E)}}var g=p2(e,0,!1,null,null,!1,!1,"",i8);return e._reactRootContainer=g,e[ad]=g.current,rS(e.nodeType===8?e.parentNode:e),gp(function(){J1(t,g,i,a)}),g}function eI(e,t,i,a,c){var u=i._reactRootContainer;if(u){var f=u;if(typeof c=="function"){var m=c;c=function(){var g=l1(f);m.call(g)}}J1(t,f,e,c)}else f=aee(i,t,e,c,a);return l1(f)}sH=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var i=I_(t.pendingLanes);i!==0&&(Mk(t,i|1),vs(t,Gi()),!(ir&6)&&(ug=Gi()+500,Hh()))}break;case 13:gp(function(){var a=sd(e,1);if(a!==null){var c=Ua();Cl(a,e,1,c)}}),m2(e,1)}};Uk=function(e){if(e.tag===13){var t=sd(e,134217728);if(t!==null){var i=Ua();Cl(t,e,134217728,i)}m2(e,134217728)}};cH=function(e){if(e.tag===13){var t=Lh(e),i=sd(e,t);if(i!==null){var a=Ua();Cl(i,e,t,a)}m2(e,t)}};lH=function(){return Ir};uH=function(e,t){var i=Ir;try{return Ir=e,t()}finally{Ir=i}};UD=function(e,t,i){switch(t){case"input":if(ND(e,i),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<i.length;t++){var a=i[t];if(a!==e&&a.form===e.form){var c=W1(a);if(!c)throw Error(tt(90));B$(a),ND(a,c)}}}break;case"textarea":H$(e,i);break;case"select":t=i.value,t!=null&&Y0(e,!!i.multiple,t,!1)}};X$=u2;J$=gp;var see={usingClientEntryPoint:!1,Events:[AS,F0,W1,q$,Y$,u2]},f_={findFiberByHostInstance:ep,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},cee={bundleType:f_.bundleType,version:f_.version,rendererPackageName:f_.rendererPackageName,rendererConfig:f_.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:pd.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=eH(e),e===null?null:e.stateNode},findFiberByHostInstance:f_.findFiberByHostInstance||oee,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wb=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wb.isDisabled&&Wb.supportsFiber)try{j1=Wb.inject(cee),Su=Wb}catch{}}Qs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=see;Qs.createPortal=function(e,t){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!v2(t))throw Error(tt(200));return iee(e,t,null,i)};Qs.createRoot=function(e,t){if(!v2(e))throw Error(tt(299));var i=!1,a="",c=DW;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(c=t.onRecoverableError)),t=p2(e,1,!1,null,null,i,!1,a,c),e[ad]=t.current,rS(e.nodeType===8?e.parentNode:e),new g2(t)};Qs.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(tt(188)):(e=Object.keys(e).join(","),Error(tt(268,e)));return e=eH(t),e=e===null?null:e.stateNode,e};Qs.flushSync=function(e){return gp(e)};Qs.hydrate=function(e,t,i){if(!Z1(t))throw Error(tt(200));return eI(null,e,t,!0,i)};Qs.hydrateRoot=function(e,t,i){if(!v2(e))throw Error(tt(405));var a=i!=null&&i.hydratedSources||null,c=!1,u="",f=DW;if(i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onRecoverableError!==void 0&&(f=i.onRecoverableError)),t=PW(t,null,e,1,i??null,c,!1,u,f),e[ad]=t.current,rS(e),a)for(e=0;e<a.length;e++)i=a[e],c=i._getVersion,c=c(i._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[i,c]:t.mutableSourceEagerHydrationData.push(i,c);return new Q1(t)};Qs.render=function(e,t,i){if(!Z1(t))throw Error(tt(200));return eI(null,e,t,!1,i)};Qs.unmountComponentAtNode=function(e){if(!Z1(e))throw Error(tt(40));return e._reactRootContainer?(gp(function(){eI(null,null,e,!1,function(){e._reactRootContainer=null,e[ad]=null})}),!0):!1};Qs.unstable_batchedUpdates=u2;Qs.unstable_renderSubtreeIntoContainer=function(e,t,i,a){if(!Z1(i))throw Error(tt(200));if(e==null||e._reactInternals===void 0)throw Error(tt(38));return eI(e,t,i,!1,a)};Qs.version="18.2.0-next-9e3b772b8-20220608";function LW(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(LW)}catch(e){console.error(e)}}LW(),P$.exports=Qs;var Wh=P$.exports;const kW=jh(Wh),lee=_$({__proto__:null,default:kW},[Wh]);var o8=Wh;TD.createRoot=o8.createRoot,TD.hydrateRoot=o8.hydrateRoot;/**
 * @remix-run/router v1.7.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hS(){return hS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},hS.apply(this,arguments)}var Rh;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Rh||(Rh={}));const a8="popstate";function uee(e){e===void 0&&(e={});function t(c,u){let{pathname:f="/",search:m="",hash:g=""}=Sp(c.location.hash.substr(1));return gL("",{pathname:f,search:m,hash:g},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function i(c,u){let f=c.document.querySelector("base"),m="";if(f&&f.getAttribute("href")){let g=c.location.href,E=g.indexOf("#");m=E===-1?g:g.slice(0,E)}return m+"#"+(typeof u=="string"?u:MW(u))}function a(c,u){tI(c.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(u)+")")}return hee(t,i,a,e)}function To(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function tI(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function dee(){return Math.random().toString(36).substr(2,8)}function s8(e,t){return{usr:e.state,key:e.key,idx:t}}function gL(e,t,i,a){return i===void 0&&(i=null),hS({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Sp(t):t,{state:i,key:t&&t.key||a||dee()})}function MW(e){let{pathname:t="/",search:i="",hash:a=""}=e;return i&&i!=="?"&&(t+=i.charAt(0)==="?"?i:"?"+i),a&&a!=="#"&&(t+=a.charAt(0)==="#"?a:"#"+a),t}function Sp(e){let t={};if(e){let i=e.indexOf("#");i>=0&&(t.hash=e.substr(i),e=e.substr(0,i));let a=e.indexOf("?");a>=0&&(t.search=e.substr(a),e=e.substr(0,a)),e&&(t.pathname=e)}return t}function hee(e,t,i,a){a===void 0&&(a={});let{window:c=document.defaultView,v5Compat:u=!1}=a,f=c.history,m=Rh.Pop,g=null,E=y();E==null&&(E=0,f.replaceState(hS({},f.state,{idx:E}),""));function y(){return(f.state||{idx:null}).idx}function T(){m=Rh.Pop;let M=y(),D=M==null?null:M-E;E=M,g&&g({action:m,location:N.location,delta:D})}function R(M,D){m=Rh.Push;let x=gL(N.location,M,D);i&&i(x,M),E=y()+1;let k=s8(x,E),V=N.createHref(x);try{f.pushState(k,"",V)}catch(H){if(H instanceof DOMException&&H.name==="DataCloneError")throw H;c.location.assign(V)}u&&g&&g({action:m,location:N.location,delta:1})}function P(M,D){m=Rh.Replace;let x=gL(N.location,M,D);i&&i(x,M),E=y();let k=s8(x,E),V=N.createHref(x);f.replaceState(k,"",V),u&&g&&g({action:m,location:N.location,delta:0})}function O(M){let D=c.location.origin!=="null"?c.location.origin:c.location.href,x=typeof M=="string"?M:MW(M);return To(D,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,D)}let N={get action(){return m},get location(){return e(c,f)},listen(M){if(g)throw new Error("A history only accepts one active listener");return c.addEventListener(a8,T),g=M,()=>{c.removeEventListener(a8,T),g=null}},createHref(M){return t(c,M)},createURL:O,encodeLocation(M){let D=O(M);return{pathname:D.pathname,search:D.search,hash:D.hash}},push:R,replace:P,go(M){return f.go(M)}};return N}var c8;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(c8||(c8={}));function fee(e,t,i){i===void 0&&(i="/");let a=typeof t=="string"?Sp(t):t,c=VW(a.pathname||"/",i);if(c==null)return null;let u=UW(e);pee(u);let f=null;for(let m=0;f==null&&m<u.length;++m)f=Tee(u[m],Iee(c));return f}function UW(e,t,i,a){t===void 0&&(t=[]),i===void 0&&(i=[]),a===void 0&&(a="");let c=(u,f,m)=>{let g={relativePath:m===void 0?u.path||"":m,caseSensitive:u.caseSensitive===!0,childrenIndex:f,route:u};g.relativePath.startsWith("/")&&(To(g.relativePath.startsWith(a),'Absolute route path "'+g.relativePath+'" nested under path '+('"'+a+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),g.relativePath=g.relativePath.slice(a.length));let E=cp([a,g.relativePath]),y=i.concat(g);u.children&&u.children.length>0&&(To(u.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+E+'".')),UW(u.children,t,y,E)),!(u.path==null&&!u.index)&&t.push({path:E,score:yee(E,u.index),routesMeta:y})};return e.forEach((u,f)=>{var m;if(u.path===""||!((m=u.path)!=null&&m.includes("?")))c(u,f);else for(let g of FW(u.path))c(u,f,g)}),t}function FW(e){let t=e.split("/");if(t.length===0)return[];let[i,...a]=t,c=i.endsWith("?"),u=i.replace(/\?$/,"");if(a.length===0)return c?[u,""]:[u];let f=FW(a.join("/")),m=[];return m.push(...f.map(g=>g===""?u:[u,g].join("/"))),c&&m.push(...f),m.map(g=>e.startsWith("/")&&g===""?"/":g)}function pee(e){e.sort((t,i)=>t.score!==i.score?i.score-t.score:Cee(t.routesMeta.map(a=>a.childrenIndex),i.routesMeta.map(a=>a.childrenIndex)))}const mee=/^:\w+$/,gee=3,vee=2,Eee=1,_ee=10,See=-2,l8=e=>e==="*";function yee(e,t){let i=e.split("/"),a=i.length;return i.some(l8)&&(a+=See),t&&(a+=vee),i.filter(c=>!l8(c)).reduce((c,u)=>c+(mee.test(u)?gee:u===""?Eee:_ee),a)}function Cee(e,t){return e.length===t.length&&e.slice(0,-1).every((a,c)=>a===t[c])?e[e.length-1]-t[t.length-1]:0}function Tee(e,t){let{routesMeta:i}=e,a={},c="/",u=[];for(let f=0;f<i.length;++f){let m=i[f],g=f===i.length-1,E=c==="/"?t:t.slice(c.length)||"/",y=bee({path:m.relativePath,caseSensitive:m.caseSensitive,end:g},E);if(!y)return null;Object.assign(a,y.params);let T=m.route;u.push({params:a,pathname:cp([c,y.pathname]),pathnameBase:Pee(cp([c,y.pathnameBase])),route:T}),y.pathnameBase!=="/"&&(c=cp([c,y.pathnameBase]))}return u}function bee(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[i,a]=Ree(e.path,e.caseSensitive,e.end),c=t.match(i);if(!c)return null;let u=c[0],f=u.replace(/(.)\/+$/,"$1"),m=c.slice(1);return{params:a.reduce((E,y,T)=>{if(y==="*"){let R=m[T]||"";f=u.slice(0,u.length-R.length).replace(/(.)\/+$/,"$1")}return E[y]=wee(m[T]||"",y),E},{}),pathname:u,pathnameBase:f,pattern:e}}function Ree(e,t,i){t===void 0&&(t=!1),i===void 0&&(i=!0),tI(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let a=[],c="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(f,m)=>(a.push(m),"/([^\\/]+)"));return e.endsWith("*")?(a.push("*"),c+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?c+="\\/*$":e!==""&&e!=="/"&&(c+="(?:(?=\\/|$))"),[new RegExp(c,t?void 0:"i"),a]}function Iee(e){try{return decodeURI(e)}catch(t){return tI(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function wee(e,t){try{return decodeURIComponent(e)}catch(i){return tI(!1,'The value for the URL param "'+t+'" will not be decoded because'+(' the string "'+e+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+i+").")),e}}function VW(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let i=t.endsWith("/")?t.length-1:t.length,a=e.charAt(i);return a&&a!=="/"?null:e.slice(i)||"/"}function Oee(e,t){t===void 0&&(t="/");let{pathname:i,search:a="",hash:c=""}=typeof e=="string"?Sp(e):e;return{pathname:i?i.startsWith("/")?i:Aee(i,t):t,search:Dee(a),hash:Lee(c)}}function Aee(e,t){let i=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(c=>{c===".."?i.length>1&&i.pop():c!=="."&&i.push(c)}),i.length>1?i.join("/"):"/"}function Jx(e,t,i,a){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(a)+"].  Please separate it out to the ")+("`to."+i+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Nee(e){return e.filter((t,i)=>i===0||t.route.path&&t.route.path.length>0)}function xee(e,t,i,a){a===void 0&&(a=!1);let c;typeof e=="string"?c=Sp(e):(c=hS({},e),To(!c.pathname||!c.pathname.includes("?"),Jx("?","pathname","search",c)),To(!c.pathname||!c.pathname.includes("#"),Jx("#","pathname","hash",c)),To(!c.search||!c.search.includes("#"),Jx("#","search","hash",c)));let u=e===""||c.pathname==="",f=u?"/":c.pathname,m;if(a||f==null)m=i;else{let T=t.length-1;if(f.startsWith("..")){let R=f.split("/");for(;R[0]==="..";)R.shift(),T-=1;c.pathname=R.join("/")}m=T>=0?t[T]:"/"}let g=Oee(c,m),E=f&&f!=="/"&&f.endsWith("/"),y=(u||f===".")&&i.endsWith("/");return!g.pathname.endsWith("/")&&(E||y)&&(g.pathname+="/"),g}const cp=e=>e.join("/").replace(/\/\/+/g,"/"),Pee=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Dee=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Lee=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function kee(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const jW=["post","put","patch","delete"];new Set(jW);const Mee=["get",...jW];new Set(Mee);/**
 * React Router v6.14.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function u1(){return u1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},u1.apply(this,arguments)}const E2=C.createContext(null),Uee=C.createContext(null),nI=C.createContext(null),rI=C.createContext(null),_g=C.createContext({outlet:null,matches:[],isDataRoute:!1}),BW=C.createContext(null);function iI(){return C.useContext(rI)!=null}function $W(){return iI()||To(!1),C.useContext(rI).location}function HW(e){C.useContext(nI).static||C.useLayoutEffect(e)}function Fee(){let{isDataRoute:e}=C.useContext(_g);return e?Jee():Vee()}function Vee(){iI()||To(!1);let e=C.useContext(E2),{basename:t,navigator:i}=C.useContext(nI),{matches:a}=C.useContext(_g),{pathname:c}=$W(),u=JSON.stringify(Nee(a).map(g=>g.pathnameBase)),f=C.useRef(!1);return HW(()=>{f.current=!0}),C.useCallback(function(g,E){if(E===void 0&&(E={}),!f.current)return;if(typeof g=="number"){i.go(g);return}let y=xee(g,JSON.parse(u),c,E.relative==="path");e==null&&t!=="/"&&(y.pathname=y.pathname==="/"?t:cp([t,y.pathname])),(E.replace?i.replace:i.push)(y,E.state,E)},[t,i,u,c,e])}function jee(e,t){return Bee(e,t)}function Bee(e,t,i){iI()||To(!1);let{navigator:a}=C.useContext(nI),{matches:c}=C.useContext(_g),u=c[c.length-1],f=u?u.params:{};u&&u.pathname;let m=u?u.pathnameBase:"/";u&&u.route;let g=$W(),E;if(t){var y;let N=typeof t=="string"?Sp(t):t;m==="/"||(y=N.pathname)!=null&&y.startsWith(m)||To(!1),E=N}else E=g;let T=E.pathname||"/",R=m==="/"?T:T.slice(m.length)||"/",P=fee(e,{pathname:R}),O=zee(P&&P.map(N=>Object.assign({},N,{params:Object.assign({},f,N.params),pathname:cp([m,a.encodeLocation?a.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?m:cp([m,a.encodeLocation?a.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),c,i);return t&&O?C.createElement(rI.Provider,{value:{location:u1({pathname:"/",search:"",hash:"",state:null,key:"default"},E),navigationType:Rh.Pop}},O):O}function $ee(){let e=Xee(),t=kee(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),i=e instanceof Error?e.stack:null,c={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},u=null;return C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},t),i?C.createElement("pre",{style:c},i):null,u)}const Hee=C.createElement($ee,null);class Wee extends C.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,i){return i.location!==t.location||i.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error||i.error,location:i.location,revalidation:t.revalidation||i.revalidation}}componentDidCatch(t,i){console.error("React Router caught the following error during render",t,i)}render(){return this.state.error?C.createElement(_g.Provider,{value:this.props.routeContext},C.createElement(BW.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Gee(e){let{routeContext:t,match:i,children:a}=e,c=C.useContext(E2);return c&&c.static&&c.staticContext&&(i.route.errorElement||i.route.ErrorBoundary)&&(c.staticContext._deepestRenderedBoundaryId=i.route.id),C.createElement(_g.Provider,{value:t},a)}function zee(e,t,i){var a;if(t===void 0&&(t=[]),i===void 0&&(i=null),e==null){var c;if((c=i)!=null&&c.errors)e=i.matches;else return null}let u=e,f=(a=i)==null?void 0:a.errors;if(f!=null){let m=u.findIndex(g=>g.route.id&&(f==null?void 0:f[g.route.id]));m>=0||To(!1),u=u.slice(0,Math.min(u.length,m+1))}return u.reduceRight((m,g,E)=>{let y=g.route.id?f==null?void 0:f[g.route.id]:null,T=null;i&&(T=g.route.errorElement||Hee);let R=t.concat(u.slice(0,E+1)),P=()=>{let O;return y?O=T:g.route.Component?O=C.createElement(g.route.Component,null):g.route.element?O=g.route.element:O=m,C.createElement(Gee,{match:g,routeContext:{outlet:m,matches:R,isDataRoute:i!=null},children:O})};return i&&(g.route.ErrorBoundary||g.route.errorElement||E===0)?C.createElement(Wee,{location:i.location,revalidation:i.revalidation,component:T,error:y,children:P(),routeContext:{outlet:null,matches:R,isDataRoute:!0}}):P()},null)}var vL;(function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate"})(vL||(vL={}));var fS;(function(e){e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId"})(fS||(fS={}));function Kee(e){let t=C.useContext(E2);return t||To(!1),t}function qee(e){let t=C.useContext(Uee);return t||To(!1),t}function Yee(e){let t=C.useContext(_g);return t||To(!1),t}function WW(e){let t=Yee(),i=t.matches[t.matches.length-1];return i.route.id||To(!1),i.route.id}function Xee(){var e;let t=C.useContext(BW),i=qee(fS.UseRouteError),a=WW(fS.UseRouteError);return t||((e=i.errors)==null?void 0:e[a])}function Jee(){let{router:e}=Kee(vL.UseNavigateStable),t=WW(fS.UseNavigateStable),i=C.useRef(!1);return HW(()=>{i.current=!0}),C.useCallback(function(c,u){u===void 0&&(u={}),i.current&&(typeof c=="number"?e.navigate(c):e.navigate(c,u1({fromRouteId:t},u)))},[e,t])}function Jf(e){To(!1)}function Qee(e){let{basename:t="/",children:i=null,location:a,navigationType:c=Rh.Pop,navigator:u,static:f=!1}=e;iI()&&To(!1);let m=t.replace(/^\/*/,"/"),g=C.useMemo(()=>({basename:m,navigator:u,static:f}),[m,u,f]);typeof a=="string"&&(a=Sp(a));let{pathname:E="/",search:y="",hash:T="",state:R=null,key:P="default"}=a,O=C.useMemo(()=>{let N=VW(E,m);return N==null?null:{location:{pathname:N,search:y,hash:T,state:R,key:P},navigationType:c}},[m,E,y,T,R,P,c]);return O==null?null:C.createElement(nI.Provider,{value:g},C.createElement(rI.Provider,{children:i,value:O}))}function Zee(e){let{children:t,location:i}=e;return jee(EL(t),i)}var u8;(function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"})(u8||(u8={}));new Promise(()=>{});function EL(e,t){t===void 0&&(t=[]);let i=[];return C.Children.forEach(e,(a,c)=>{if(!C.isValidElement(a))return;let u=[...t,c];if(a.type===C.Fragment){i.push.apply(i,EL(a.props.children,u));return}a.type!==Jf&&To(!1),!a.props.index||!a.props.children||To(!1);let f={id:a.props.id||u.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(f.children=EL(a.props.children,u)),i.push(f)}),i}/**
 * React Router DOM v6.14.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const ete="startTransition",d8=rg[ete];function tte(e){let{basename:t,children:i,future:a,window:c}=e,u=C.useRef();u.current==null&&(u.current=uee({window:c,v5Compat:!0}));let f=u.current,[m,g]=C.useState({action:f.action,location:f.location}),{v7_startTransition:E}=a||{},y=C.useCallback(T=>{E&&d8?d8(()=>g(T)):g(T)},[g,E]);return C.useLayoutEffect(()=>f.listen(y),[f,y]),C.createElement(Qee,{basename:t,children:i,location:m.location,navigationType:m.action,navigator:f})}var h8;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher"})(h8||(h8={}));var f8;(function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(f8||(f8={}));function kc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Sr(e){"@babel/helpers - typeof";return Sr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sr(e)}function nte(e,t){if(Sr(e)!=="object"||e===null)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t||"default");if(Sr(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function GW(e){var t=nte(e,"string");return Sr(t)==="symbol"?t:String(t)}function p8(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,GW(a.key),a)}}function Mc(e,t,i){return t&&p8(e.prototype,t),i&&p8(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function _L(e,t){return _L=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,c){return a.__proto__=c,a},_L(e,t)}function Sg(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_L(e,t)}function d1(e){return d1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},d1(e)}function rte(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function h1(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ite(e,t){if(t&&(Sr(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return h1(e)}function yg(e){var t=rte();return function(){var a=d1(e),c;if(t){var u=d1(this).constructor;c=Reflect.construct(a,arguments,u)}else c=a.apply(this,arguments);return ite(this,c)}}var zW={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function i(){for(var a=[],c=0;c<arguments.length;c++){var u=arguments[c];if(u){var f=typeof u;if(f==="string"||f==="number")a.push(u);else if(Array.isArray(u)){if(u.length){var m=i.apply(null,u);m&&a.push(m)}}else if(f==="object"){if(u.toString!==Object.prototype.toString&&!u.toString.toString().includes("[native code]")){a.push(u.toString());continue}for(var g in u)t.call(u,g)&&u[g]&&a.push(g)}}}return a.join(" ")}e.exports?(i.default=i,e.exports=i):window.classNames=i})()})(zW);var ote=zW.exports;const nt=jh(ote);function st(){return st=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},st.apply(this,arguments)}var KW={exports:{}},Or={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ko=typeof Symbol=="function"&&Symbol.for,_2=ko?Symbol.for("react.element"):60103,S2=ko?Symbol.for("react.portal"):60106,oI=ko?Symbol.for("react.fragment"):60107,aI=ko?Symbol.for("react.strict_mode"):60108,sI=ko?Symbol.for("react.profiler"):60114,cI=ko?Symbol.for("react.provider"):60109,lI=ko?Symbol.for("react.context"):60110,y2=ko?Symbol.for("react.async_mode"):60111,uI=ko?Symbol.for("react.concurrent_mode"):60111,dI=ko?Symbol.for("react.forward_ref"):60112,hI=ko?Symbol.for("react.suspense"):60113,ate=ko?Symbol.for("react.suspense_list"):60120,fI=ko?Symbol.for("react.memo"):60115,pI=ko?Symbol.for("react.lazy"):60116,ste=ko?Symbol.for("react.block"):60121,cte=ko?Symbol.for("react.fundamental"):60117,lte=ko?Symbol.for("react.responder"):60118,ute=ko?Symbol.for("react.scope"):60119;function ec(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case _2:switch(e=e.type,e){case y2:case uI:case oI:case sI:case aI:case hI:return e;default:switch(e=e&&e.$$typeof,e){case lI:case dI:case pI:case fI:case cI:return e;default:return t}}case S2:return t}}}function qW(e){return ec(e)===uI}Or.AsyncMode=y2;Or.ConcurrentMode=uI;Or.ContextConsumer=lI;Or.ContextProvider=cI;Or.Element=_2;Or.ForwardRef=dI;Or.Fragment=oI;Or.Lazy=pI;Or.Memo=fI;Or.Portal=S2;Or.Profiler=sI;Or.StrictMode=aI;Or.Suspense=hI;Or.isAsyncMode=function(e){return qW(e)||ec(e)===y2};Or.isConcurrentMode=qW;Or.isContextConsumer=function(e){return ec(e)===lI};Or.isContextProvider=function(e){return ec(e)===cI};Or.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===_2};Or.isForwardRef=function(e){return ec(e)===dI};Or.isFragment=function(e){return ec(e)===oI};Or.isLazy=function(e){return ec(e)===pI};Or.isMemo=function(e){return ec(e)===fI};Or.isPortal=function(e){return ec(e)===S2};Or.isProfiler=function(e){return ec(e)===sI};Or.isStrictMode=function(e){return ec(e)===aI};Or.isSuspense=function(e){return ec(e)===hI};Or.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===oI||e===uI||e===sI||e===aI||e===hI||e===ate||typeof e=="object"&&e!==null&&(e.$$typeof===pI||e.$$typeof===fI||e.$$typeof===cI||e.$$typeof===lI||e.$$typeof===dI||e.$$typeof===cte||e.$$typeof===lte||e.$$typeof===ute||e.$$typeof===ste)};Or.typeOf=ec;KW.exports=Or;var C2=KW.exports;function ld(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=[];return Nt.Children.forEach(e,function(a){a==null&&!t.keepEmpty||(Array.isArray(a)?i=i.concat(ld(a)):C2.isFragment(a)&&a.props?i=i.concat(ld(a.props.children,t)):i.push(a))}),i}var SL={},dte=function(t){};function hte(e,t){}function fte(e,t){}function pte(){SL={}}function YW(e,t,i){!t&&!SL[i]&&(e(!1,i),SL[i]=!0)}function Es(e,t){YW(hte,e,t)}function mte(e,t){YW(fte,e,t)}Es.preMessage=dte;Es.resetWarned=pte;Es.noteOnce=mte;function Ct(e,t,i){return t=GW(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function m8(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),i.push.apply(i,a)}return i}function Ae(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?m8(Object(i),!0).forEach(function(a){Ct(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):m8(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function mI(e,t,i){var a=C.useRef({});return(!("value"in a.current)||i(a.current.condition,t))&&(a.current.value=e(),a.current.condition=t),a.current.value}function T2(e,t){typeof e=="function"?e(t):Sr(e)==="object"&&e&&"current"in e&&(e.current=t)}function Ol(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var a=t.filter(function(c){return c});return a.length<=1?a[0]:function(c){t.forEach(function(u){T2(u,c)})}}function b2(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return mI(function(){return Ol.apply(void 0,t)},t,function(a,c){return a.length===c.length&&a.every(function(u,f){return u===c[f]})})}function Cg(e){var t,i,a=C2.isMemo(e)?e.type.type:e.type;return!(typeof a=="function"&&!((t=a.prototype)!==null&&t!==void 0&&t.render)||typeof e=="function"&&!((i=e.prototype)!==null&&i!==void 0&&i.render))}function f1(e){return e instanceof HTMLElement||e instanceof SVGElement}function yL(e){return f1(e)?e:e instanceof Nt.Component?kW.findDOMNode(e):null}var XW=function(){if(typeof Map<"u")return Map;function e(t,i){var a=-1;return t.some(function(c,u){return c[0]===i?(a=u,!0):!1}),a}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(i){var a=e(this.__entries__,i),c=this.__entries__[a];return c&&c[1]},t.prototype.set=function(i,a){var c=e(this.__entries__,i);~c?this.__entries__[c][1]=a:this.__entries__.push([i,a])},t.prototype.delete=function(i){var a=this.__entries__,c=e(a,i);~c&&a.splice(c,1)},t.prototype.has=function(i){return!!~e(this.__entries__,i)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(i,a){a===void 0&&(a=null);for(var c=0,u=this.__entries__;c<u.length;c++){var f=u[c];i.call(a,f[1],f[0])}},t}()}(),CL=typeof window<"u"&&typeof document<"u"&&window.document===document,p1=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),gte=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(p1):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)}}(),vte=2;function Ete(e,t){var i=!1,a=!1,c=0;function u(){i&&(i=!1,e()),a&&m()}function f(){gte(u)}function m(){var g=Date.now();if(i){if(g-c<vte)return;a=!0}else i=!0,a=!1,setTimeout(f,t);c=g}return m}var _te=20,Ste=["top","right","bottom","left","width","height","size","weight"],yte=typeof MutationObserver<"u",Cte=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=Ete(this.refresh.bind(this),_te)}return e.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},e.prototype.removeObserver=function(t){var i=this.observers_,a=i.indexOf(t);~a&&i.splice(a,1),!i.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){var t=this.updateObservers_();t&&this.refresh()},e.prototype.updateObservers_=function(){var t=this.observers_.filter(function(i){return i.gatherActive(),i.hasActive()});return t.forEach(function(i){return i.broadcastActive()}),t.length>0},e.prototype.connect_=function(){!CL||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),yte?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){!CL||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(t){var i=t.propertyName,a=i===void 0?"":i,c=Ste.some(function(u){return!!~a.indexOf(u)});c&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),JW=function(e,t){for(var i=0,a=Object.keys(t);i<a.length;i++){var c=a[i];Object.defineProperty(e,c,{value:t[c],enumerable:!1,writable:!1,configurable:!0})}return e},dg=function(e){var t=e&&e.ownerDocument&&e.ownerDocument.defaultView;return t||p1},QW=gI(0,0,0,0);function m1(e){return parseFloat(e)||0}function g8(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];return t.reduce(function(a,c){var u=e["border-"+c+"-width"];return a+m1(u)},0)}function Tte(e){for(var t=["top","right","bottom","left"],i={},a=0,c=t;a<c.length;a++){var u=c[a],f=e["padding-"+u];i[u]=m1(f)}return i}function bte(e){var t=e.getBBox();return gI(0,0,t.width,t.height)}function Rte(e){var t=e.clientWidth,i=e.clientHeight;if(!t&&!i)return QW;var a=dg(e).getComputedStyle(e),c=Tte(a),u=c.left+c.right,f=c.top+c.bottom,m=m1(a.width),g=m1(a.height);if(a.boxSizing==="border-box"&&(Math.round(m+u)!==t&&(m-=g8(a,"left","right")+u),Math.round(g+f)!==i&&(g-=g8(a,"top","bottom")+f)),!wte(e)){var E=Math.round(m+u)-t,y=Math.round(g+f)-i;Math.abs(E)!==1&&(m-=E),Math.abs(y)!==1&&(g-=y)}return gI(c.left,c.top,m,g)}var Ite=function(){return typeof SVGGraphicsElement<"u"?function(e){return e instanceof dg(e).SVGGraphicsElement}:function(e){return e instanceof dg(e).SVGElement&&typeof e.getBBox=="function"}}();function wte(e){return e===dg(e).document.documentElement}function Ote(e){return CL?Ite(e)?bte(e):Rte(e):QW}function Ate(e){var t=e.x,i=e.y,a=e.width,c=e.height,u=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,f=Object.create(u.prototype);return JW(f,{x:t,y:i,width:a,height:c,top:i,right:t+a,bottom:c+i,left:t}),f}function gI(e,t,i,a){return{x:e,y:t,width:i,height:a}}var Nte=function(){function e(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=gI(0,0,0,0),this.target=t}return e.prototype.isActive=function(){var t=Ote(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},e}(),xte=function(){function e(t,i){var a=Ate(i);JW(this,{target:t,contentRect:a})}return e}(),Pte=function(){function e(t,i,a){if(this.activeObservations_=[],this.observations_=new XW,typeof t!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=i,this.callbackCtx_=a}return e.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof dg(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var i=this.observations_;i.has(t)||(i.set(t,new Nte(t)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof dg(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var i=this.observations_;i.has(t)&&(i.delete(t),i.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(i){i.isActive()&&t.activeObservations_.push(i)})},e.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,i=this.activeObservations_.map(function(a){return new xte(a.target,a.broadcastRect())});this.callback_.call(t,i,t),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),ZW=typeof WeakMap<"u"?new WeakMap:new XW,e7=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var i=Cte.getInstance(),a=new Pte(t,i,this);ZW.set(this,a)}return e}();["observe","unobserve","disconnect"].forEach(function(e){e7.prototype[e]=function(){var t;return(t=ZW.get(this))[e].apply(t,arguments)}});var Dte=function(){return typeof p1.ResizeObserver<"u"?p1.ResizeObserver:e7}(),Ih=new Map;function Lte(e){e.forEach(function(t){var i,a=t.target;(i=Ih.get(a))===null||i===void 0||i.forEach(function(c){return c(a)})})}var t7=new Dte(Lte);function kte(e,t){Ih.has(e)||(Ih.set(e,new Set),t7.observe(e)),Ih.get(e).add(t)}function Mte(e,t){Ih.has(e)&&(Ih.get(e).delete(t),Ih.get(e).size||(t7.unobserve(e),Ih.delete(e)))}var Ute=function(e){Sg(i,e);var t=yg(i);function i(){return kc(this,i),t.apply(this,arguments)}return Mc(i,[{key:"render",value:function(){return this.props.children}}]),i}(C.Component),TL=C.createContext(null);function Fte(e){var t=e.children,i=e.onBatchResize,a=C.useRef(0),c=C.useRef([]),u=C.useContext(TL),f=C.useCallback(function(m,g,E){a.current+=1;var y=a.current;c.current.push({size:m,element:g,data:E}),Promise.resolve().then(function(){y===a.current&&(i==null||i(c.current),c.current=[])}),u==null||u(m,g,E)},[i,u]);return C.createElement(TL.Provider,{value:f},t)}function Vte(e,t){var i=e.children,a=e.disabled,c=C.useRef(null),u=C.useRef(null),f=C.useContext(TL),m=typeof i=="function",g=m?i(c):i,E=C.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),y=!m&&C.isValidElement(g)&&Cg(g),T=y?g.ref:null,R=C.useMemo(function(){return Ol(T,c)},[T,c]),P=function(){return yL(c.current)||yL(u.current)};C.useImperativeHandle(t,function(){return P()});var O=C.useRef(e);O.current=e;var N=C.useCallback(function(M){var D=O.current,x=D.onResize,k=D.data,V=M.getBoundingClientRect(),H=V.width,$=V.height,G=M.offsetWidth,K=M.offsetHeight,Q=Math.floor(H),z=Math.floor($);if(E.current.width!==Q||E.current.height!==z||E.current.offsetWidth!==G||E.current.offsetHeight!==K){var ie={width:Q,height:z,offsetWidth:G,offsetHeight:K};E.current=ie;var J=G===Math.round(H)?H:G,Y=K===Math.round($)?$:K,oe=Ae(Ae({},ie),{},{offsetWidth:J,offsetHeight:Y});f==null||f(oe,M,k),x&&Promise.resolve().then(function(){x(oe,M)})}},[]);return C.useEffect(function(){var M=P();return M&&!a&&kte(M,N),function(){return Mte(M,N)}},[c.current,a]),C.createElement(Ute,{ref:u},y?C.cloneElement(g,{ref:R}):g)}var jte=C.forwardRef(Vte),Bte="rc-observer-key";function $te(e,t){var i=e.children,a=typeof i=="function"?[i]:ld(i);return a.map(function(c,u){var f=(c==null?void 0:c.key)||"".concat(Bte,"-").concat(u);return C.createElement(jte,st({},e,{key:f,ref:u===0?t:void 0}),c)})}var yp=C.forwardRef($te);yp.Collection=Fte;function ys(e,t){var i=Ae({},e);return Array.isArray(t)&&t.forEach(function(a){delete i[a]}),i}function bL(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function Hte(e){if(Array.isArray(e))return bL(e)}function n7(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function R2(e,t){if(e){if(typeof e=="string")return bL(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return bL(e,t)}}function Wte(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gt(e){return Hte(e)||n7(e)||R2(e)||Wte()}var r7=function(t){return+setTimeout(t,16)},i7=function(t){return clearTimeout(t)};typeof window<"u"&&"requestAnimationFrame"in window&&(r7=function(t){return window.requestAnimationFrame(t)},i7=function(t){return window.cancelAnimationFrame(t)});var v8=0,I2=new Map;function o7(e){I2.delete(e)}var Zo=function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;v8+=1;var a=v8;function c(u){if(u===0)o7(a),t();else{var f=r7(function(){c(u-1)});I2.set(a,f)}}return c(i),a};Zo.cancel=function(e){var t=I2.get(e);return o7(t),i7(t)};function w2(e){for(var t=0,i,a=0,c=e.length;c>=4;++a,c-=4)i=e.charCodeAt(a)&255|(e.charCodeAt(++a)&255)<<8|(e.charCodeAt(++a)&255)<<16|(e.charCodeAt(++a)&255)<<24,i=(i&65535)*1540483477+((i>>>16)*59797<<16),i^=i>>>24,t=(i&65535)*1540483477+((i>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(c){case 3:t^=(e.charCodeAt(a+2)&255)<<16;case 2:t^=(e.charCodeAt(a+1)&255)<<8;case 1:t^=e.charCodeAt(a)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}function Gte(e,t){if(e==null)return{};var i={},a=Object.keys(e),c,u;for(u=0;u<a.length;u++)c=a[u],!(t.indexOf(c)>=0)&&(i[c]=e[c]);return i}function Xn(e,t){if(e==null)return{};var i=Gte(e,t),a,c;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(c=0;c<u.length;c++)a=u[c],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function O2(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=new Set;function c(u,f){var m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,g=a.has(u);if(Es(!g,"Warning: There may be circular references"),g)return!1;if(u===f)return!0;if(i&&m>1)return!1;a.add(u);var E=m+1;if(Array.isArray(u)){if(!Array.isArray(f)||u.length!==f.length)return!1;for(var y=0;y<u.length;y++)if(!c(u[y],f[y],E))return!1;return!0}if(u&&f&&Sr(u)==="object"&&Sr(f)==="object"){var T=Object.keys(u);return T.length!==Object.keys(f).length?!1:T.every(function(R){return c(u[R],f[R],E)})}return!1}return c(e,t)}var zte=function(){function e(t){kc(this,e),Ct(this,"instanceId",void 0),Ct(this,"cache",new Map),this.instanceId=t}return Mc(e,[{key:"get",value:function(i){return this.cache.get(i.join("%"))||null}},{key:"update",value:function(i,a){var c=i.join("%"),u=this.cache.get(c),f=a(u);f===null?this.cache.delete(c):this.cache.set(c,f)}}]),e}(),RL="data-token-hash",tg="data-css-hash",G0="__cssinjs_instance__";function Kte(){var e=Math.random().toString(12).slice(2);if(typeof document<"u"&&document.head&&document.body){var t=document.body.querySelectorAll("style[".concat(tg,"]"))||[],i=document.head.firstChild;Array.from(t).forEach(function(c){c[G0]=c[G0]||e,c[G0]===e&&document.head.insertBefore(c,i)});var a={};Array.from(document.querySelectorAll("style[".concat(tg,"]"))).forEach(function(c){var u=c.getAttribute(tg);if(a[u]){if(c[G0]===e){var f;(f=c.parentNode)===null||f===void 0||f.removeChild(c)}}else a[u]=!0})}return new zte(e)}var qte=C.createContext({hashPriority:"low",cache:Kte(),defaultCache:!0});const A2=qte;function _s(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function Yte(e,t){if(!e)return!1;if(e.contains)return e.contains(t);for(var i=t;i;){if(i===e)return!0;i=i.parentNode}return!1}var E8="data-rc-order",Xte="rc-util-key",IL=new Map;function a7(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.mark;return t?t.startsWith("data-")?t:"data-".concat(t):Xte}function vI(e){if(e.attachTo)return e.attachTo;var t=document.querySelector("head");return t||document.body}function Jte(e){return e==="queue"?"prependQueue":e?"prepend":"append"}function s7(e){return Array.from((IL.get(e)||e).children).filter(function(t){return t.tagName==="STYLE"})}function c7(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!_s())return null;var i=t.csp,a=t.prepend,c=document.createElement("style");c.setAttribute(E8,Jte(a)),i!=null&&i.nonce&&(c.nonce=i==null?void 0:i.nonce),c.innerHTML=e;var u=vI(t),f=u.firstChild;if(a){if(a==="queue"){var m=s7(u).filter(function(g){return["prepend","prependQueue"].includes(g.getAttribute(E8))});if(m.length)return u.insertBefore(c,m[m.length-1].nextSibling),c}u.insertBefore(c,f)}else u.appendChild(c);return c}function l7(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=vI(t);return s7(i).find(function(a){return a.getAttribute(a7(t))===e})}function g1(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=l7(e,t);if(i){var a=vI(t);a.removeChild(i)}}function Qte(e,t){var i=IL.get(e);if(!i||!Yte(document,i)){var a=c7("",t),c=a.parentNode;IL.set(e,c),e.removeChild(a)}}function pS(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=vI(i);Qte(a,i);var c=l7(t,i);if(c){var u,f;if((u=i.csp)!==null&&u!==void 0&&u.nonce&&c.nonce!==((f=i.csp)===null||f===void 0?void 0:f.nonce)){var m;c.nonce=(m=i.csp)===null||m===void 0?void 0:m.nonce}return c.innerHTML!==e&&(c.innerHTML=e),c}var g=c7(e,i);return g.setAttribute(a7(i),t),g}function v1(e){var t="";return Object.keys(e).forEach(function(i){var a=e[i];t+=i,a&&Sr(a)==="object"?t+=v1(a):t+=a}),t}function Zte(e,t){return w2("".concat(t,"_").concat(v1(e)))}var V_="layer-".concat(Date.now(),"-").concat(Math.random()).replace(/\./g,""),u7="903px";function ene(e,t){if(_s()){var i;pS(e,V_);var a=document.createElement("div");a.style.position="fixed",a.style.left="0",a.style.top="0",t==null||t(a),document.body.appendChild(a);var c=getComputedStyle(a).width===u7;return(i=a.parentNode)===null||i===void 0||i.removeChild(a),g1(V_),c}return!1}var Qx=void 0;function tne(){return Qx===void 0&&(Qx=ene("@layer ".concat(V_," { .").concat(V_," { width: ").concat(u7,"!important; } }"),function(e){e.className=V_})),Qx}function d7(e){if(Array.isArray(e))return e}function nne(e,t){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var a,c,u,f,m=[],g=!0,E=!1;try{if(u=(i=i.call(e)).next,t===0){if(Object(i)!==i)return;g=!1}else for(;!(g=(a=u.call(i)).done)&&(m.push(a.value),m.length!==t);g=!0);}catch(y){E=!0,c=y}finally{try{if(!g&&i.return!=null&&(f=i.return(),Object(f)!==f))return}finally{if(E)throw c}}return m}}function h7(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ye(e,t){return d7(e)||nne(e,t)||R2(e,t)||h7()}var _8=_s()?C.useLayoutEffect:C.useEffect,Ti=function(t,i){var a=C.useRef(!0);_8(function(){return t(a.current)},i),_8(function(){return a.current=!1,function(){a.current=!0}},[])},S8=function(t,i){Ti(function(a){if(!a)return t()},i)},rne=Ae({},rg),y8=rne.useInsertionEffect,ine=function(t,i,a){C.useMemo(t,a),Ti(i,a)},one=y8?function(e,t,i){return y8(function(){return e(),t()},i)}:ine;const ane=one;function f7(e,t,i,a,c){var u=C.useContext(A2),f=u.cache,m=[e].concat(gt(t)),g=m.join("_"),E=function(R){f.update(m,function(P){var O=P||[],N=Ye(O,2),M=N[0],D=M===void 0?0:M,x=N[1],k=x,V=k||i(),H=[D,V];return R?R(H):H})};C.useMemo(function(){return E()},[g]);var y=f.get(m)[1];return ane(function(){c==null||c(y)},function(){return E(function(T){var R=Ye(T,2),P=R[0],O=R[1];return[P+1,O]}),function(){f.update(m,function(T){var R=T||[],P=Ye(R,2),O=P[0],N=O===void 0?0:O,M=P[1],D=N-1;return D===0?(a==null||a(M,!1),null):[N-1,M]})}},[g]),y}var sne={},cne="css",Zf=new Map;function lne(e){Zf.set(e,(Zf.get(e)||0)+1)}function une(e,t){if(typeof document<"u"){var i=document.querySelectorAll("style[".concat(RL,'="').concat(e,'"]'));i.forEach(function(a){if(a[G0]===t){var c;(c=a.parentNode)===null||c===void 0||c.removeChild(a)}})}}function dne(e,t){Zf.set(e,(Zf.get(e)||0)-1);var i=Array.from(Zf.keys()),a=i.filter(function(c){var u=Zf.get(c)||0;return u<=0});a.length<i.length&&a.forEach(function(c){une(c,t),Zf.delete(c)})}var p7=function(t,i,a,c){var u=a.getDerivativeToken(t),f=Ae(Ae({},u),i);return c&&(f=c(f)),f};function hne(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=C.useContext(A2),c=a.cache.instanceId,u=i.salt,f=u===void 0?"":u,m=i.override,g=m===void 0?sne:m,E=i.formatToken,y=C.useMemo(function(){return Object.assign.apply(Object,[{}].concat(gt(t)))},[t]),T=C.useMemo(function(){return v1(y)},[y]),R=C.useMemo(function(){return v1(g)},[g]),P=f7("token",[f,e.id,T,R],function(){var O=p7(y,g,e,E),N=Zte(O,f);O._tokenKey=N,lne(N);var M="".concat(cne,"-").concat(w2(N));return O._hashId=M,[O,M]},function(O){dne(O[0]._tokenKey,c)});return P}var fne={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},m7="comm",g7="rule",v7="decl",pne="@import",mne="@keyframes",gne="@layer",vne=Math.abs,N2=String.fromCharCode;function E7(e){return e.trim()}function AR(e,t,i){return e.replace(t,i)}function Ene(e,t){return e.indexOf(t)}function mS(e,t){return e.charCodeAt(t)|0}function gS(e,t,i){return e.slice(t,i)}function Zu(e){return e.length}function _ne(e){return e.length}function Gb(e,t){return t.push(e),e}var EI=1,hg=1,_7=0,Lc=0,ao=0,Tg="";function x2(e,t,i,a,c,u,f,m){return{value:e,root:t,parent:i,type:a,props:c,children:u,line:EI,column:hg,length:f,return:"",siblings:m}}function Sne(){return ao}function yne(){return ao=Lc>0?mS(Tg,--Lc):0,hg--,ao===10&&(hg=1,EI--),ao}function Tl(){return ao=Lc<_7?mS(Tg,Lc++):0,hg++,ao===10&&(hg=1,EI++),ao}function lp(){return mS(Tg,Lc)}function NR(){return Lc}function _I(e,t){return gS(Tg,e,t)}function wL(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Cne(e){return EI=hg=1,_7=Zu(Tg=e),Lc=0,[]}function Tne(e){return Tg="",e}function Zx(e){return E7(_I(Lc-1,OL(e===91?e+2:e===40?e+1:e)))}function bne(e){for(;(ao=lp())&&ao<33;)Tl();return wL(e)>2||wL(ao)>3?"":" "}function Rne(e,t){for(;--t&&Tl()&&!(ao<48||ao>102||ao>57&&ao<65||ao>70&&ao<97););return _I(e,NR()+(t<6&&lp()==32&&Tl()==32))}function OL(e){for(;Tl();)switch(ao){case e:return Lc;case 34:case 39:e!==34&&e!==39&&OL(ao);break;case 40:e===41&&OL(e);break;case 92:Tl();break}return Lc}function Ine(e,t){for(;Tl()&&e+ao!==47+10;)if(e+ao===42+42&&lp()===47)break;return"/*"+_I(t,Lc-1)+"*"+N2(e===47?e:Tl())}function wne(e){for(;!wL(lp());)Tl();return _I(e,Lc)}function One(e){return Tne(xR("",null,null,null,[""],e=Cne(e),0,[0],e))}function xR(e,t,i,a,c,u,f,m,g){for(var E=0,y=0,T=f,R=0,P=0,O=0,N=1,M=1,D=1,x=0,k="",V=c,H=u,$=a,G=k;M;)switch(O=x,x=Tl()){case 40:if(O!=108&&mS(G,T-1)==58){Ene(G+=AR(Zx(x),"&","&\f"),"&\f")!=-1&&(D=-1);break}case 34:case 39:case 91:G+=Zx(x);break;case 9:case 10:case 13:case 32:G+=bne(O);break;case 92:G+=Rne(NR()-1,7);continue;case 47:switch(lp()){case 42:case 47:Gb(Ane(Ine(Tl(),NR()),t,i,g),g);break;default:G+="/"}break;case 123*N:m[E++]=Zu(G)*D;case 125*N:case 59:case 0:switch(x){case 0:case 125:M=0;case 59+y:D==-1&&(G=AR(G,/\f/g,"")),P>0&&Zu(G)-T&&Gb(P>32?T8(G+";",a,i,T-1,g):T8(AR(G," ","")+";",a,i,T-2,g),g);break;case 59:G+=";";default:if(Gb($=C8(G,t,i,E,y,c,m,k,V=[],H=[],T,u),u),x===123)if(y===0)xR(G,t,$,$,V,u,T,m,H);else switch(R===99&&mS(G,3)===110?100:R){case 100:case 108:case 109:case 115:xR(e,$,$,a&&Gb(C8(e,$,$,0,0,c,m,k,c,V=[],T,H),H),c,H,T,m,a?V:H);break;default:xR(G,$,$,$,[""],H,0,m,H)}}E=y=P=0,N=D=1,k=G="",T=f;break;case 58:T=1+Zu(G),P=O;default:if(N<1){if(x==123)--N;else if(x==125&&N++==0&&yne()==125)continue}switch(G+=N2(x),x*N){case 38:D=y>0?1:(G+="\f",-1);break;case 44:m[E++]=(Zu(G)-1)*D,D=1;break;case 64:lp()===45&&(G+=Zx(Tl())),R=lp(),y=T=Zu(k=G+=wne(NR())),x++;break;case 45:O===45&&Zu(G)==2&&(N=0)}}return u}function C8(e,t,i,a,c,u,f,m,g,E,y,T){for(var R=c-1,P=c===0?u:[""],O=_ne(P),N=0,M=0,D=0;N<a;++N)for(var x=0,k=gS(e,R+1,R=vne(M=f[N])),V=e;x<O;++x)(V=E7(M>0?P[x]+" "+k:AR(k,/&\f/g,P[x])))&&(g[D++]=V);return x2(e,t,i,c===0?g7:m,g,E,y,T)}function Ane(e,t,i,a){return x2(e,t,i,m7,N2(Sne()),gS(e,2,-2),0,a)}function T8(e,t,i,a,c){return x2(e,t,i,v7,gS(e,0,a),gS(e,a+1,-1),a,c)}function AL(e,t){for(var i="",a=0;a<e.length;a++)i+=t(e[a],a,e,t)||"";return i}function Nne(e,t,i,a){switch(e.type){case gne:if(e.children.length)break;case pne:case v7:return e.return=e.return||e.value;case m7:return"";case mne:return e.return=e.value+"{"+AL(e.children,a)+"}";case g7:if(!Zu(e.value=e.props.join(",")))return""}return Zu(i=AL(e.children,a))?e.return=e.value+"{"+i+"}":""}var b8=_s(),xne="_skip_check_",S7="_multi_value_";function R8(e){var t=AL(One(e),Nne);return t.replace(/\{%%%\:[^;];}/g,";")}function Pne(e){return Sr(e)==="object"&&e&&(xne in e||S7 in e)}function Dne(e,t,i){if(!t)return e;var a=".".concat(t),c=i==="low"?":where(".concat(a,")"):a,u=e.split(",").map(function(f){var m,g=f.trim().split(/\s+/),E=g[0]||"",y=((m=E.match(/^\w+/))===null||m===void 0?void 0:m[0])||"";return E="".concat(y).concat(c).concat(E.slice(y.length)),[E].concat(gt(g.slice(1))).join(" ")});return u.join(",")}var Lne=function e(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{root:!0,parentSelectors:[]},c=a.root,u=a.injectHash,f=a.parentSelectors,m=i.hashId,g=i.layer;i.path;var E=i.hashPriority,y=i.transformers,T=y===void 0?[]:y;i.linters;var R="",P={};function O(k){var V=k.getName(m);if(!P[V]){var H=e(k.style,i,{root:!1,parentSelectors:f}),$=Ye(H,1),G=$[0];P[V]="@keyframes ".concat(k.getName(m)).concat(G)}}function N(k){var V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return k.forEach(function(H){Array.isArray(H)?N(H,V):H&&V.push(H)}),V}var M=N(Array.isArray(t)?t:[t]);if(M.forEach(function(k){var V=typeof k=="string"&&!c?{}:k;if(typeof V=="string")R+="".concat(V,`
`);else if(V._keyframe)O(V);else{var H=T.reduce(function($,G){var K;return(G==null||(K=G.visit)===null||K===void 0?void 0:K.call(G,$))||$},V);Object.keys(H).forEach(function($){var G=H[$];if(Sr(G)==="object"&&G&&($!=="animationName"||!G._keyframe)&&!Pne(G)){var K=!1,Q=$.trim(),z=!1;(c||u)&&m?Q.startsWith("@")?K=!0:Q=Dne($,m,E):c&&!m&&(Q==="&"||Q==="")&&(Q="",z=!0);var ie=e(G,i,{root:z,injectHash:K,parentSelectors:[].concat(gt(f),[Q])}),J=Ye(ie,2),Y=J[0],oe=J[1];P=Ae(Ae({},P),oe),R+="".concat(Q).concat(Y)}else{let ve=function(Re,Ce){var pe=Re.replace(/[A-Z]/g,function(_e){return"-".concat(_e.toLowerCase())}),fe=Ce;!fne[Re]&&typeof fe=="number"&&fe!==0&&(fe="".concat(fe,"px")),Re==="animationName"&&Ce!==null&&Ce!==void 0&&Ce._keyframe&&(O(Ce),fe=Ce.getName(m)),R+="".concat(pe,":").concat(fe,";")};var Se=ve,ue,he=(ue=G==null?void 0:G.value)!==null&&ue!==void 0?ue:G;Sr(G)==="object"&&G!==null&&G!==void 0&&G[S7]&&Array.isArray(he)?he.forEach(function(Re){ve($,Re)}):ve($,he)}})}}),!c)R="{".concat(R,"}");else if(g&&tne()){var D=g.split(","),x=D[D.length-1].trim();R="@layer ".concat(x," {").concat(R,"}"),D.length>1&&(R="@layer ".concat(g,"{%%%:%}").concat(R))}return[R,P]};function kne(e,t){return w2("".concat(e.join("%")).concat(t))}function Mne(){return null}function NL(e,t){var i=e.token,a=e.path,c=e.hashId,u=e.layer,f=e.nonce,m=C.useContext(A2),g=m.autoClear;m.mock;var E=m.defaultCache,y=m.hashPriority,T=m.container,R=m.ssrInline,P=m.transformers,O=m.linters,N=m.cache,M=i._tokenKey,D=[M].concat(gt(a)),x=b8,k=f7("style",D,function(){var K=t(),Q=Lne(K,{hashId:c,hashPriority:y,layer:u,path:a.join("-"),transformers:P,linters:O}),z=Ye(Q,2),ie=z[0],J=z[1],Y=R8(ie),oe=kne(D,Y);return[Y,M,oe,J]},function(K,Q){var z=Ye(K,3),ie=z[2];(Q||g)&&b8&&g1(ie,{mark:tg})},function(K){var Q=Ye(K,4),z=Q[0];Q[1];var ie=Q[2],J=Q[3];if(x){var Y={mark:tg,prepend:"queue",attachTo:T},oe=typeof f=="function"?f():f;oe&&(Y.csp={nonce:oe});var ue=pS(z,ie,Y);ue[G0]=N.instanceId,ue.setAttribute(RL,M),Object.keys(J).forEach(function(he){pS(R8(J[he]),"_effect-".concat(he),Y)})}}),V=Ye(k,3),H=V[0],$=V[1],G=V[2];return function(K){var Q;if(!R||x||!E)Q=C.createElement(Mne,null);else{var z;Q=C.createElement("style",st({},(z={},Ct(z,RL,$),Ct(z,tg,G),z),{dangerouslySetInnerHTML:{__html:H}}))}return C.createElement(C.Fragment,null,Q,K)}}var di=function(){function e(t,i){kc(this,e),Ct(this,"name",void 0),Ct(this,"style",void 0),Ct(this,"_keyframe",!0),this.name=t,this.style=i}return Mc(e,[{key:"getName",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return i?"".concat(i,"-").concat(this.name):this.name}}]),e}();function Une(e,t){if(e.length!==t.length)return!1;for(var i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}var P2=function(){function e(){kc(this,e),Ct(this,"cache",void 0),Ct(this,"keys",void 0),Ct(this,"cacheCallTimes",void 0),this.cache=new Map,this.keys=[],this.cacheCallTimes=0}return Mc(e,[{key:"size",value:function(){return this.keys.length}},{key:"internalGet",value:function(i){var a,c,u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,f={map:this.cache};return i.forEach(function(m){if(!f)f=void 0;else{var g,E;f=(g=f)===null||g===void 0||(E=g.map)===null||E===void 0?void 0:E.get(m)}}),(a=f)!==null&&a!==void 0&&a.value&&u&&(f.value[1]=this.cacheCallTimes++),(c=f)===null||c===void 0?void 0:c.value}},{key:"get",value:function(i){var a;return(a=this.internalGet(i,!0))===null||a===void 0?void 0:a[0]}},{key:"has",value:function(i){return!!this.internalGet(i)}},{key:"set",value:function(i,a){var c=this;if(!this.has(i)){if(this.size()+1>e.MAX_CACHE_SIZE+e.MAX_CACHE_OFFSET){var u=this.keys.reduce(function(E,y){var T=Ye(E,2),R=T[1];return c.internalGet(y)[1]<R?[y,c.internalGet(y)[1]]:E},[this.keys[0],this.cacheCallTimes]),f=Ye(u,1),m=f[0];this.delete(m)}this.keys.push(i)}var g=this.cache;i.forEach(function(E,y){if(y===i.length-1)g.set(E,{value:[a,c.cacheCallTimes++]});else{var T=g.get(E);T?T.map||(T.map=new Map):g.set(E,{map:new Map}),g=g.get(E).map}})}},{key:"deleteByPath",value:function(i,a){var c=i.get(a[0]);if(a.length===1){var u;return c.map?i.set(a[0],{map:c.map}):i.delete(a[0]),(u=c.value)===null||u===void 0?void 0:u[0]}var f=this.deleteByPath(c.map,a.slice(1));return(!c.map||c.map.size===0)&&!c.value&&i.delete(a[0]),f}},{key:"delete",value:function(i){if(this.has(i))return this.keys=this.keys.filter(function(a){return!Une(a,i)}),this.deleteByPath(this.cache,i)}}]),e}();Ct(P2,"MAX_CACHE_SIZE",20);Ct(P2,"MAX_CACHE_OFFSET",5);var I8=0,Fne=function(){function e(t){kc(this,e),Ct(this,"derivatives",void 0),Ct(this,"id",void 0),this.derivatives=Array.isArray(t)?t:[t],this.id=I8,t.length===0&&(t.length>0,void 0),I8+=1}return Mc(e,[{key:"getDerivativeToken",value:function(i){return this.derivatives.reduce(function(a,c){return c(i,a)},void 0)}}]),e}(),eP=new P2;function E1(e){var t=Array.isArray(e)?e:[e];return eP.has(t)||eP.set(t,new Fne(t)),eP.get(t)}function S0(e){return e.notSplit=!0,e}S0(["borderTop","borderBottom"]),S0(["borderTop"]),S0(["borderBottom"]),S0(["borderLeft","borderRight"]),S0(["borderLeft"]),S0(["borderRight"]);const Vne=C.createContext({}),D2=Vne;function jne(e){return d7(e)||n7(e)||R2(e)||h7()}function _l(e,t){for(var i=e,a=0;a<t.length;a+=1){if(i==null)return;i=i[t[a]]}return i}function y7(e,t,i,a){if(!t.length)return i;var c=jne(t),u=c[0],f=c.slice(1),m;return!e&&typeof u=="number"?m=[]:Array.isArray(e)?m=gt(e):m=Ae({},e),a&&i===void 0&&f.length===1?delete m[u][f[0]]:m[u]=y7(m[u],f,i,a),m}function pl(e,t,i){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return t.length&&a&&i===void 0&&!_l(e,t.slice(0,-1))?e:y7(e,t,i,a)}function Bne(e){return Sr(e)==="object"&&e!==null&&Object.getPrototypeOf(e)===Object.prototype}function w8(e){return Array.isArray(e)?[]:{}}var $ne=typeof Reflect>"u"?Object.keys:Reflect.ownKeys;function z0(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var a=w8(t[0]);return t.forEach(function(c){function u(f,m){var g=new Set(m),E=_l(c,f),y=Array.isArray(E);if(y||Bne(E)){if(!g.has(E)){g.add(E);var T=_l(a,f);y?a=pl(a,f,[]):(!T||Sr(T)!=="object")&&(a=pl(a,f,w8(E))),$ne(E).forEach(function(R){u([].concat(gt(f),[R]),g)})}}else a=pl(a,f,E)}u([])}),a}const C7=C.createContext(void 0),Hne={items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"};var Wne={locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"OK",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"};const Gne={placeholder:"Select time",rangePlaceholder:["Start time","End time"]},T7=Gne,zne={lang:Object.assign({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeQuarterPlaceholder:["Start quarter","End quarter"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},Wne),timePickerLocale:Object.assign({},T7)},O8=zne,Bs="${label} is not a valid ${type}",Kne={locale:"en",Pagination:Hne,DatePicker:O8,TimePicker:T7,Calendar:O8,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",filterCheckall:"Select all items",filterSearchPlaceholder:"Search in filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Tour:{Next:"Next",Previous:"Previous",Finish:"Finish"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand"},PageHeader:{back:"Back"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:Bs,method:Bs,array:Bs,object:Bs,number:Bs,date:Bs,boolean:Bs,integer:Bs,float:Bs,regexp:Bs,email:Bs,url:Bs,hex:Bs},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"},QRCode:{expired:"QR code expired",refresh:"Refresh"},ColorPicker:{presetEmpty:"Empty"}},fg=Kne;let tP=Object.assign({},fg.Modal);function A8(e){e?tP=Object.assign(Object.assign({},tP),e):tP=Object.assign({},fg.Modal)}const qne=C.createContext(void 0),L2=qne,Yne=(e,t)=>{const i=C.useContext(L2),a=C.useMemo(()=>{var u;const f=t||fg[e],m=(u=i==null?void 0:i[e])!==null&&u!==void 0?u:{};return Object.assign(Object.assign({},typeof f=="function"?f():f),m||{})},[e,t,i]),c=C.useMemo(()=>{const u=i==null?void 0:i.locale;return i!=null&&i.exist&&!u?fg.locale:u},[i]);return[a,c]},b7=Yne,Xne="internalMark",Jne=e=>{const{locale:t={},children:i,_ANT_MARK__:a}=e;C.useEffect(()=>(A8(t&&t.Modal),()=>{A8()}),[t]);const c=C.useMemo(()=>Object.assign(Object.assign({},t),{exist:!0}),[t]);return C.createElement(L2.Provider,{value:c},i)},Qne=Jne,Zne="5.6.4",_1=["blue","purple","cyan","green","magenta","pink","red","orange","yellow","volcano","geekblue","lime","gold"];function ea(e,t){ere(e)&&(e="100%");var i=tre(e);return e=t===360?e:Math.min(t,Math.max(0,parseFloat(e))),i&&(e=parseInt(String(e*t),10)/100),Math.abs(e-t)<1e-6?1:(t===360?e=(e<0?e%t+t:e%t)/parseFloat(String(t)):e=e%t/parseFloat(String(t)),e)}function zb(e){return Math.min(1,Math.max(0,e))}function ere(e){return typeof e=="string"&&e.indexOf(".")!==-1&&parseFloat(e)===1}function tre(e){return typeof e=="string"&&e.indexOf("%")!==-1}function R7(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function Kb(e){return e<=1?"".concat(Number(e)*100,"%"):e}function rp(e){return e.length===1?"0"+e:String(e)}function nre(e,t,i){return{r:ea(e,255)*255,g:ea(t,255)*255,b:ea(i,255)*255}}function N8(e,t,i){e=ea(e,255),t=ea(t,255),i=ea(i,255);var a=Math.max(e,t,i),c=Math.min(e,t,i),u=0,f=0,m=(a+c)/2;if(a===c)f=0,u=0;else{var g=a-c;switch(f=m>.5?g/(2-a-c):g/(a+c),a){case e:u=(t-i)/g+(t<i?6:0);break;case t:u=(i-e)/g+2;break;case i:u=(e-t)/g+4;break}u/=6}return{h:u,s:f,l:m}}function nP(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+(t-e)*(6*i):i<1/2?t:i<2/3?e+(t-e)*(2/3-i)*6:e}function rre(e,t,i){var a,c,u;if(e=ea(e,360),t=ea(t,100),i=ea(i,100),t===0)c=i,u=i,a=i;else{var f=i<.5?i*(1+t):i+t-i*t,m=2*i-f;a=nP(m,f,e+1/3),c=nP(m,f,e),u=nP(m,f,e-1/3)}return{r:a*255,g:c*255,b:u*255}}function xL(e,t,i){e=ea(e,255),t=ea(t,255),i=ea(i,255);var a=Math.max(e,t,i),c=Math.min(e,t,i),u=0,f=a,m=a-c,g=a===0?0:m/a;if(a===c)u=0;else{switch(a){case e:u=(t-i)/m+(t<i?6:0);break;case t:u=(i-e)/m+2;break;case i:u=(e-t)/m+4;break}u/=6}return{h:u,s:g,v:f}}function ire(e,t,i){e=ea(e,360)*6,t=ea(t,100),i=ea(i,100);var a=Math.floor(e),c=e-a,u=i*(1-t),f=i*(1-c*t),m=i*(1-(1-c)*t),g=a%6,E=[i,f,u,u,m,i][g],y=[m,i,i,f,u,u][g],T=[u,u,m,i,i,f][g];return{r:E*255,g:y*255,b:T*255}}function PL(e,t,i,a){var c=[rp(Math.round(e).toString(16)),rp(Math.round(t).toString(16)),rp(Math.round(i).toString(16))];return a&&c[0].startsWith(c[0].charAt(1))&&c[1].startsWith(c[1].charAt(1))&&c[2].startsWith(c[2].charAt(1))?c[0].charAt(0)+c[1].charAt(0)+c[2].charAt(0):c.join("")}function ore(e,t,i,a,c){var u=[rp(Math.round(e).toString(16)),rp(Math.round(t).toString(16)),rp(Math.round(i).toString(16)),rp(are(a))];return c&&u[0].startsWith(u[0].charAt(1))&&u[1].startsWith(u[1].charAt(1))&&u[2].startsWith(u[2].charAt(1))&&u[3].startsWith(u[3].charAt(1))?u[0].charAt(0)+u[1].charAt(0)+u[2].charAt(0)+u[3].charAt(0):u.join("")}function are(e){return Math.round(parseFloat(e)*255).toString(16)}function x8(e){return Hs(e)/255}function Hs(e){return parseInt(e,16)}function sre(e){return{r:e>>16,g:(e&65280)>>8,b:e&255}}var DL={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function x0(e){var t={r:0,g:0,b:0},i=1,a=null,c=null,u=null,f=!1,m=!1;return typeof e=="string"&&(e=ure(e)),typeof e=="object"&&(Yu(e.r)&&Yu(e.g)&&Yu(e.b)?(t=nre(e.r,e.g,e.b),f=!0,m=String(e.r).substr(-1)==="%"?"prgb":"rgb"):Yu(e.h)&&Yu(e.s)&&Yu(e.v)?(a=Kb(e.s),c=Kb(e.v),t=ire(e.h,a,c),f=!0,m="hsv"):Yu(e.h)&&Yu(e.s)&&Yu(e.l)&&(a=Kb(e.s),u=Kb(e.l),t=rre(e.h,a,u),f=!0,m="hsl"),Object.prototype.hasOwnProperty.call(e,"a")&&(i=e.a)),i=R7(i),{ok:f,format:e.format||m,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:i}}var cre="[-\\+]?\\d+%?",lre="[-\\+]?\\d*\\.\\d+%?",wh="(?:".concat(lre,")|(?:").concat(cre,")"),rP="[\\s|\\(]+(".concat(wh,")[,|\\s]+(").concat(wh,")[,|\\s]+(").concat(wh,")\\s*\\)?"),iP="[\\s|\\(]+(".concat(wh,")[,|\\s]+(").concat(wh,")[,|\\s]+(").concat(wh,")[,|\\s]+(").concat(wh,")\\s*\\)?"),dl={CSS_UNIT:new RegExp(wh),rgb:new RegExp("rgb"+rP),rgba:new RegExp("rgba"+iP),hsl:new RegExp("hsl"+rP),hsla:new RegExp("hsla"+iP),hsv:new RegExp("hsv"+rP),hsva:new RegExp("hsva"+iP),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function ure(e){if(e=e.trim().toLowerCase(),e.length===0)return!1;var t=!1;if(DL[e])e=DL[e],t=!0;else if(e==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var i=dl.rgb.exec(e);return i?{r:i[1],g:i[2],b:i[3]}:(i=dl.rgba.exec(e),i?{r:i[1],g:i[2],b:i[3],a:i[4]}:(i=dl.hsl.exec(e),i?{h:i[1],s:i[2],l:i[3]}:(i=dl.hsla.exec(e),i?{h:i[1],s:i[2],l:i[3],a:i[4]}:(i=dl.hsv.exec(e),i?{h:i[1],s:i[2],v:i[3]}:(i=dl.hsva.exec(e),i?{h:i[1],s:i[2],v:i[3],a:i[4]}:(i=dl.hex8.exec(e),i?{r:Hs(i[1]),g:Hs(i[2]),b:Hs(i[3]),a:x8(i[4]),format:t?"name":"hex8"}:(i=dl.hex6.exec(e),i?{r:Hs(i[1]),g:Hs(i[2]),b:Hs(i[3]),format:t?"name":"hex"}:(i=dl.hex4.exec(e),i?{r:Hs(i[1]+i[1]),g:Hs(i[2]+i[2]),b:Hs(i[3]+i[3]),a:x8(i[4]+i[4]),format:t?"name":"hex8"}:(i=dl.hex3.exec(e),i?{r:Hs(i[1]+i[1]),g:Hs(i[2]+i[2]),b:Hs(i[3]+i[3]),format:t?"name":"hex"}:!1)))))))))}function Yu(e){return!!dl.CSS_UNIT.exec(String(e))}var Jo=function(){function e(t,i){t===void 0&&(t=""),i===void 0&&(i={});var a;if(t instanceof e)return t;typeof t=="number"&&(t=sre(t)),this.originalInput=t;var c=x0(t);this.originalInput=t,this.r=c.r,this.g=c.g,this.b=c.b,this.a=c.a,this.roundA=Math.round(100*this.a)/100,this.format=(a=i.format)!==null&&a!==void 0?a:c.format,this.gradientType=i.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=c.ok}return e.prototype.isDark=function(){return this.getBrightness()<128},e.prototype.isLight=function(){return!this.isDark()},e.prototype.getBrightness=function(){var t=this.toRgb();return(t.r*299+t.g*587+t.b*114)/1e3},e.prototype.getLuminance=function(){var t=this.toRgb(),i,a,c,u=t.r/255,f=t.g/255,m=t.b/255;return u<=.03928?i=u/12.92:i=Math.pow((u+.055)/1.055,2.4),f<=.03928?a=f/12.92:a=Math.pow((f+.055)/1.055,2.4),m<=.03928?c=m/12.92:c=Math.pow((m+.055)/1.055,2.4),.2126*i+.7152*a+.0722*c},e.prototype.getAlpha=function(){return this.a},e.prototype.setAlpha=function(t){return this.a=R7(t),this.roundA=Math.round(100*this.a)/100,this},e.prototype.isMonochrome=function(){var t=this.toHsl().s;return t===0},e.prototype.toHsv=function(){var t=xL(this.r,this.g,this.b);return{h:t.h*360,s:t.s,v:t.v,a:this.a}},e.prototype.toHsvString=function(){var t=xL(this.r,this.g,this.b),i=Math.round(t.h*360),a=Math.round(t.s*100),c=Math.round(t.v*100);return this.a===1?"hsv(".concat(i,", ").concat(a,"%, ").concat(c,"%)"):"hsva(".concat(i,", ").concat(a,"%, ").concat(c,"%, ").concat(this.roundA,")")},e.prototype.toHsl=function(){var t=N8(this.r,this.g,this.b);return{h:t.h*360,s:t.s,l:t.l,a:this.a}},e.prototype.toHslString=function(){var t=N8(this.r,this.g,this.b),i=Math.round(t.h*360),a=Math.round(t.s*100),c=Math.round(t.l*100);return this.a===1?"hsl(".concat(i,", ").concat(a,"%, ").concat(c,"%)"):"hsla(".concat(i,", ").concat(a,"%, ").concat(c,"%, ").concat(this.roundA,")")},e.prototype.toHex=function(t){return t===void 0&&(t=!1),PL(this.r,this.g,this.b,t)},e.prototype.toHexString=function(t){return t===void 0&&(t=!1),"#"+this.toHex(t)},e.prototype.toHex8=function(t){return t===void 0&&(t=!1),ore(this.r,this.g,this.b,this.a,t)},e.prototype.toHex8String=function(t){return t===void 0&&(t=!1),"#"+this.toHex8(t)},e.prototype.toHexShortString=function(t){return t===void 0&&(t=!1),this.a===1?this.toHexString(t):this.toHex8String(t)},e.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},e.prototype.toRgbString=function(){var t=Math.round(this.r),i=Math.round(this.g),a=Math.round(this.b);return this.a===1?"rgb(".concat(t,", ").concat(i,", ").concat(a,")"):"rgba(".concat(t,", ").concat(i,", ").concat(a,", ").concat(this.roundA,")")},e.prototype.toPercentageRgb=function(){var t=function(i){return"".concat(Math.round(ea(i,255)*100),"%")};return{r:t(this.r),g:t(this.g),b:t(this.b),a:this.a}},e.prototype.toPercentageRgbString=function(){var t=function(i){return Math.round(ea(i,255)*100)};return this.a===1?"rgb(".concat(t(this.r),"%, ").concat(t(this.g),"%, ").concat(t(this.b),"%)"):"rgba(".concat(t(this.r),"%, ").concat(t(this.g),"%, ").concat(t(this.b),"%, ").concat(this.roundA,")")},e.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var t="#"+PL(this.r,this.g,this.b,!1),i=0,a=Object.entries(DL);i<a.length;i++){var c=a[i],u=c[0],f=c[1];if(t===f)return u}return!1},e.prototype.toString=function(t){var i=!!t;t=t??this.format;var a=!1,c=this.a<1&&this.a>=0,u=!i&&c&&(t.startsWith("hex")||t==="name");return u?t==="name"&&this.a===0?this.toName():this.toRgbString():(t==="rgb"&&(a=this.toRgbString()),t==="prgb"&&(a=this.toPercentageRgbString()),(t==="hex"||t==="hex6")&&(a=this.toHexString()),t==="hex3"&&(a=this.toHexString(!0)),t==="hex4"&&(a=this.toHex8String(!0)),t==="hex8"&&(a=this.toHex8String()),t==="name"&&(a=this.toName()),t==="hsl"&&(a=this.toHslString()),t==="hsv"&&(a=this.toHsvString()),a||this.toHexString())},e.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},e.prototype.clone=function(){return new e(this.toString())},e.prototype.lighten=function(t){t===void 0&&(t=10);var i=this.toHsl();return i.l+=t/100,i.l=zb(i.l),new e(i)},e.prototype.brighten=function(t){t===void 0&&(t=10);var i=this.toRgb();return i.r=Math.max(0,Math.min(255,i.r-Math.round(255*-(t/100)))),i.g=Math.max(0,Math.min(255,i.g-Math.round(255*-(t/100)))),i.b=Math.max(0,Math.min(255,i.b-Math.round(255*-(t/100)))),new e(i)},e.prototype.darken=function(t){t===void 0&&(t=10);var i=this.toHsl();return i.l-=t/100,i.l=zb(i.l),new e(i)},e.prototype.tint=function(t){return t===void 0&&(t=10),this.mix("white",t)},e.prototype.shade=function(t){return t===void 0&&(t=10),this.mix("black",t)},e.prototype.desaturate=function(t){t===void 0&&(t=10);var i=this.toHsl();return i.s-=t/100,i.s=zb(i.s),new e(i)},e.prototype.saturate=function(t){t===void 0&&(t=10);var i=this.toHsl();return i.s+=t/100,i.s=zb(i.s),new e(i)},e.prototype.greyscale=function(){return this.desaturate(100)},e.prototype.spin=function(t){var i=this.toHsl(),a=(i.h+t)%360;return i.h=a<0?360+a:a,new e(i)},e.prototype.mix=function(t,i){i===void 0&&(i=50);var a=this.toRgb(),c=new e(t).toRgb(),u=i/100,f={r:(c.r-a.r)*u+a.r,g:(c.g-a.g)*u+a.g,b:(c.b-a.b)*u+a.b,a:(c.a-a.a)*u+a.a};return new e(f)},e.prototype.analogous=function(t,i){t===void 0&&(t=6),i===void 0&&(i=30);var a=this.toHsl(),c=360/i,u=[this];for(a.h=(a.h-(c*t>>1)+720)%360;--t;)a.h=(a.h+c)%360,u.push(new e(a));return u},e.prototype.complement=function(){var t=this.toHsl();return t.h=(t.h+180)%360,new e(t)},e.prototype.monochromatic=function(t){t===void 0&&(t=6);for(var i=this.toHsv(),a=i.h,c=i.s,u=i.v,f=[],m=1/t;t--;)f.push(new e({h:a,s:c,v:u})),u=(u+m)%1;return f},e.prototype.splitcomplement=function(){var t=this.toHsl(),i=t.h;return[this,new e({h:(i+72)%360,s:t.s,l:t.l}),new e({h:(i+216)%360,s:t.s,l:t.l})]},e.prototype.onBackground=function(t){var i=this.toRgb(),a=new e(t).toRgb(),c=i.a+a.a*(1-i.a);return new e({r:(i.r*i.a+a.r*a.a*(1-i.a))/c,g:(i.g*i.a+a.g*a.a*(1-i.a))/c,b:(i.b*i.a+a.b*a.a*(1-i.a))/c,a:c})},e.prototype.triad=function(){return this.polyad(3)},e.prototype.tetrad=function(){return this.polyad(4)},e.prototype.polyad=function(t){for(var i=this.toHsl(),a=i.h,c=[this],u=360/t,f=1;f<t;f++)c.push(new e({h:(a+f*u)%360,s:i.s,l:i.l}));return c},e.prototype.equals=function(t){return this.toRgbString()===new e(t).toRgbString()},e}(),qb=2,P8=.16,dre=.05,hre=.05,fre=.15,I7=5,w7=4,pre=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function D8(e){var t=e.r,i=e.g,a=e.b,c=xL(t,i,a);return{h:c.h*360,s:c.s,v:c.v}}function Yb(e){var t=e.r,i=e.g,a=e.b;return"#".concat(PL(t,i,a,!1))}function mre(e,t,i){var a=i/100,c={r:(t.r-e.r)*a+e.r,g:(t.g-e.g)*a+e.g,b:(t.b-e.b)*a+e.b};return c}function L8(e,t,i){var a;return Math.round(e.h)>=60&&Math.round(e.h)<=240?a=i?Math.round(e.h)-qb*t:Math.round(e.h)+qb*t:a=i?Math.round(e.h)+qb*t:Math.round(e.h)-qb*t,a<0?a+=360:a>=360&&(a-=360),a}function k8(e,t,i){if(e.h===0&&e.s===0)return e.s;var a;return i?a=e.s-P8*t:t===w7?a=e.s+P8:a=e.s+dre*t,a>1&&(a=1),i&&t===I7&&a>.1&&(a=.1),a<.06&&(a=.06),Number(a.toFixed(2))}function M8(e,t,i){var a;return i?a=e.v+hre*t:a=e.v-fre*t,a>1&&(a=1),Number(a.toFixed(2))}function ud(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=[],a=x0(e),c=I7;c>0;c-=1){var u=D8(a),f=Yb(x0({h:L8(u,c,!0),s:k8(u,c,!0),v:M8(u,c,!0)}));i.push(f)}i.push(Yb(a));for(var m=1;m<=w7;m+=1){var g=D8(a),E=Yb(x0({h:L8(g,m),s:k8(g,m),v:M8(g,m)}));i.push(E)}return t.theme==="dark"?pre.map(function(y){var T=y.index,R=y.opacity,P=Yb(mre(x0(t.backgroundColor||"#141414"),x0(i[T]),R*100));return P}):i}var oP={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1677FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},j_={},aP={};Object.keys(oP).forEach(function(e){j_[e]=ud(oP[e]),j_[e].primary=j_[e][5],aP[e]=ud(oP[e],{theme:"dark",backgroundColor:"#141414"}),aP[e].primary=aP[e][5]});var gre=j_.gold,vre=j_.blue;const Ere=e=>{const{controlHeight:t}=e;return{controlHeightSM:t*.75,controlHeightXS:t*.5,controlHeightLG:t*1.25}},O7=Ere;function _re(e){const{sizeUnit:t,sizeStep:i}=e;return{sizeXXL:t*(i+8),sizeXL:t*(i+4),sizeLG:t*(i+2),sizeMD:t*(i+1),sizeMS:t*i,size:t*i,sizeSM:t*(i-1),sizeXS:t*(i-2),sizeXXS:t*(i-3)}}const k2={blue:"#1677ff",purple:"#722ED1",cyan:"#13C2C2",green:"#52C41A",magenta:"#EB2F96",pink:"#eb2f96",red:"#F5222D",orange:"#FA8C16",yellow:"#FADB14",volcano:"#FA541C",geekblue:"#2F54EB",gold:"#FAAD14",lime:"#A0D911"},Sre=Object.assign(Object.assign({},k2),{colorPrimary:"#1677ff",colorSuccess:"#52c41a",colorWarning:"#faad14",colorError:"#ff4d4f",colorInfo:"#1677ff",colorTextBase:"",colorBgBase:"",fontFamily:`-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial,
'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',
'Noto Color Emoji'`,fontFamilyCode:"'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace",fontSize:14,lineWidth:1,lineType:"solid",motionUnit:.1,motionBase:0,motionEaseOutCirc:"cubic-bezier(0.08, 0.82, 0.17, 1)",motionEaseInOutCirc:"cubic-bezier(0.78, 0.14, 0.15, 0.86)",motionEaseOut:"cubic-bezier(0.215, 0.61, 0.355, 1)",motionEaseInOut:"cubic-bezier(0.645, 0.045, 0.355, 1)",motionEaseOutBack:"cubic-bezier(0.12, 0.4, 0.29, 1.46)",motionEaseInBack:"cubic-bezier(0.71, -0.46, 0.88, 0.6)",motionEaseInQuint:"cubic-bezier(0.755, 0.05, 0.855, 0.06)",motionEaseOutQuint:"cubic-bezier(0.23, 1, 0.32, 1)",borderRadius:6,sizeUnit:4,sizeStep:4,sizePopupArrow:16,controlHeight:32,zIndexBase:0,zIndexPopupBase:1e3,opacityImage:1,wireframe:!1,motion:!0}),xS=Sre;function A7(e,t){let{generateColorPalettes:i,generateNeutralColorPalettes:a}=t;const{colorSuccess:c,colorWarning:u,colorError:f,colorInfo:m,colorPrimary:g,colorBgBase:E,colorTextBase:y}=e,T=i(g),R=i(c),P=i(u),O=i(f),N=i(m),M=a(E,y);return Object.assign(Object.assign({},M),{colorPrimaryBg:T[1],colorPrimaryBgHover:T[2],colorPrimaryBorder:T[3],colorPrimaryBorderHover:T[4],colorPrimaryHover:T[5],colorPrimary:T[6],colorPrimaryActive:T[7],colorPrimaryTextHover:T[8],colorPrimaryText:T[9],colorPrimaryTextActive:T[10],colorSuccessBg:R[1],colorSuccessBgHover:R[2],colorSuccessBorder:R[3],colorSuccessBorderHover:R[4],colorSuccessHover:R[4],colorSuccess:R[6],colorSuccessActive:R[7],colorSuccessTextHover:R[8],colorSuccessText:R[9],colorSuccessTextActive:R[10],colorErrorBg:O[1],colorErrorBgHover:O[2],colorErrorBorder:O[3],colorErrorBorderHover:O[4],colorErrorHover:O[5],colorError:O[6],colorErrorActive:O[7],colorErrorTextHover:O[8],colorErrorText:O[9],colorErrorTextActive:O[10],colorWarningBg:P[1],colorWarningBgHover:P[2],colorWarningBorder:P[3],colorWarningBorderHover:P[4],colorWarningHover:P[4],colorWarning:P[6],colorWarningActive:P[7],colorWarningTextHover:P[8],colorWarningText:P[9],colorWarningTextActive:P[10],colorInfoBg:N[1],colorInfoBgHover:N[2],colorInfoBorder:N[3],colorInfoBorderHover:N[4],colorInfoHover:N[4],colorInfo:N[6],colorInfoActive:N[7],colorInfoTextHover:N[8],colorInfoText:N[9],colorInfoTextActive:N[10],colorBgMask:new Jo("#000").setAlpha(.45).toRgbString(),colorWhite:"#fff"})}const yre=e=>{let t=e,i=e,a=e,c=e;return e<6&&e>=5?t=e+1:e<16&&e>=6?t=e+2:e>=16&&(t=16),e<7&&e>=5?i=4:e<8&&e>=7?i=5:e<14&&e>=8?i=6:e<16&&e>=14?i=7:e>=16&&(i=8),e<6&&e>=2?a=1:e>=6&&(a=2),e>4&&e<8?c=4:e>=8&&(c=6),{borderRadius:e>16?16:e,borderRadiusXS:a,borderRadiusSM:i,borderRadiusLG:t,borderRadiusOuter:c}},Cre=yre;function Tre(e){const{motionUnit:t,motionBase:i,borderRadius:a,lineWidth:c}=e;return Object.assign({motionDurationFast:`${(i+t).toFixed(1)}s`,motionDurationMid:`${(i+t*2).toFixed(1)}s`,motionDurationSlow:`${(i+t*3).toFixed(1)}s`,lineWidthBold:c+1},Cre(a))}const Xu=(e,t)=>new Jo(e).setAlpha(t).toRgbString(),p_=(e,t)=>new Jo(e).darken(t).toHexString(),bre=e=>{const t=ud(e);return{1:t[0],2:t[1],3:t[2],4:t[3],5:t[4],6:t[5],7:t[6],8:t[4],9:t[5],10:t[6]}},Rre=(e,t)=>{const i=e||"#fff",a=t||"#000";return{colorBgBase:i,colorTextBase:a,colorText:Xu(a,.88),colorTextSecondary:Xu(a,.65),colorTextTertiary:Xu(a,.45),colorTextQuaternary:Xu(a,.25),colorFill:Xu(a,.15),colorFillSecondary:Xu(a,.06),colorFillTertiary:Xu(a,.04),colorFillQuaternary:Xu(a,.02),colorBgLayout:p_(i,4),colorBgContainer:p_(i,0),colorBgElevated:p_(i,0),colorBgSpotlight:Xu(a,.85),colorBorder:p_(i,15),colorBorderSecondary:p_(i,6)}};function Ire(e){const t=new Array(10).fill(null).map((i,a)=>{const c=a-1,u=e*Math.pow(2.71828,c/5),f=a>1?Math.floor(u):Math.ceil(u);return Math.floor(f/2)*2});return t[1]=e,t.map(i=>{const a=i+8;return{size:i,lineHeight:a/i}})}const wre=e=>{const t=Ire(e),i=t.map(c=>c.size),a=t.map(c=>c.lineHeight);return{fontSizeSM:i[0],fontSize:i[1],fontSizeLG:i[2],fontSizeXL:i[3],fontSizeHeading1:i[6],fontSizeHeading2:i[5],fontSizeHeading3:i[4],fontSizeHeading4:i[3],fontSizeHeading5:i[2],lineHeight:a[1],lineHeightLG:a[2],lineHeightSM:a[0],lineHeightHeading1:a[6],lineHeightHeading2:a[5],lineHeightHeading3:a[4],lineHeightHeading4:a[3],lineHeightHeading5:a[2]}},N7=wre;function PS(e){const t=Object.keys(k2).map(i=>{const a=ud(e[i]);return new Array(10).fill(1).reduce((c,u,f)=>(c[`${i}-${f+1}`]=a[f],c[`${i}${f+1}`]=a[f],c),{})}).reduce((i,a)=>(i=Object.assign(Object.assign({},i),a),i),{});return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},e),t),A7(e,{generateColorPalettes:bre,generateNeutralColorPalettes:Rre})),N7(e.fontSize)),_re(e)),O7(e)),Tre(e))}function sP(e){return e>=0&&e<=255}function Xb(e,t){const{r:i,g:a,b:c,a:u}=new Jo(e).toRgb();if(u<1)return e;const{r:f,g:m,b:g}=new Jo(t).toRgb();for(let E=.01;E<=1;E+=.01){const y=Math.round((i-f*(1-E))/E),T=Math.round((a-m*(1-E))/E),R=Math.round((c-g*(1-E))/E);if(sP(y)&&sP(T)&&sP(R))return new Jo({r:y,g:T,b:R,a:Math.round(E*100)/100}).toRgbString()}return new Jo({r:i,g:a,b:c,a:1}).toRgbString()}var Ore=globalThis&&globalThis.__rest||function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(i[a[c]]=e[a[c]]);return i};function x7(e){const{override:t}=e,i=Ore(e,["override"]),a=Object.assign({},t);Object.keys(xS).forEach(R=>{delete a[R]});const c=Object.assign(Object.assign({},i),a),u=480,f=576,m=768,g=992,E=1200,y=1600;if(c.motion===!1){const R="0s";c.motionDurationFast=R,c.motionDurationMid=R,c.motionDurationSlow=R}return Object.assign(Object.assign(Object.assign({},c),{colorLink:c.colorInfoText,colorLinkHover:c.colorInfoHover,colorLinkActive:c.colorInfoActive,colorFillContent:c.colorFillSecondary,colorFillContentHover:c.colorFill,colorFillAlter:c.colorFillQuaternary,colorBgContainerDisabled:c.colorFillTertiary,colorBorderBg:c.colorBgContainer,colorSplit:Xb(c.colorBorderSecondary,c.colorBgContainer),colorTextPlaceholder:c.colorTextQuaternary,colorTextDisabled:c.colorTextQuaternary,colorTextHeading:c.colorText,colorTextLabel:c.colorTextSecondary,colorTextDescription:c.colorTextTertiary,colorTextLightSolid:c.colorWhite,colorHighlight:c.colorError,colorBgTextHover:c.colorFillSecondary,colorBgTextActive:c.colorFill,colorIcon:c.colorTextTertiary,colorIconHover:c.colorText,colorErrorOutline:Xb(c.colorErrorBg,c.colorBgContainer),colorWarningOutline:Xb(c.colorWarningBg,c.colorBgContainer),fontSizeIcon:c.fontSizeSM,lineWidthFocus:c.lineWidth*4,lineWidth:c.lineWidth,controlOutlineWidth:c.lineWidth*2,controlInteractiveSize:c.controlHeight/2,controlItemBgHover:c.colorFillTertiary,controlItemBgActive:c.colorPrimaryBg,controlItemBgActiveHover:c.colorPrimaryBgHover,controlItemBgActiveDisabled:c.colorFill,controlTmpOutline:c.colorFillQuaternary,controlOutline:Xb(c.colorPrimaryBg,c.colorBgContainer),lineType:c.lineType,borderRadius:c.borderRadius,borderRadiusXS:c.borderRadiusXS,borderRadiusSM:c.borderRadiusSM,borderRadiusLG:c.borderRadiusLG,fontWeightStrong:600,opacityLoading:.65,linkDecoration:"none",linkHoverDecoration:"none",linkFocusDecoration:"none",controlPaddingHorizontal:12,controlPaddingHorizontalSM:8,paddingXXS:c.sizeXXS,paddingXS:c.sizeXS,paddingSM:c.sizeSM,padding:c.size,paddingMD:c.sizeMD,paddingLG:c.sizeLG,paddingXL:c.sizeXL,paddingContentHorizontalLG:c.sizeLG,paddingContentVerticalLG:c.sizeMS,paddingContentHorizontal:c.sizeMS,paddingContentVertical:c.sizeSM,paddingContentHorizontalSM:c.size,paddingContentVerticalSM:c.sizeXS,marginXXS:c.sizeXXS,marginXS:c.sizeXS,marginSM:c.sizeSM,margin:c.size,marginMD:c.sizeMD,marginLG:c.sizeLG,marginXL:c.sizeXL,marginXXL:c.sizeXXL,boxShadow:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowSecondary:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTertiary:`
      0 1px 2px 0 rgba(0, 0, 0, 0.03),
      0 1px 6px -1px rgba(0, 0, 0, 0.02),
      0 2px 4px 0 rgba(0, 0, 0, 0.02)
    `,screenXS:u,screenXSMin:u,screenXSMax:f-1,screenSM:f,screenSMMin:f,screenSMMax:m-1,screenMD:m,screenMDMin:m,screenMDMax:g-1,screenLG:g,screenLGMin:g,screenLGMax:E-1,screenXL:E,screenXLMin:E,screenXLMax:y-1,screenXXL:y,screenXXLMin:y,boxShadowPopoverArrow:"2px 2px 5px rgba(0, 0, 0, 0.05)",boxShadowCard:`
      0 1px 2px -2px ${new Jo("rgba(0, 0, 0, 0.16)").toRgbString()},
      0 3px 6px 0 ${new Jo("rgba(0, 0, 0, 0.12)").toRgbString()},
      0 5px 12px 4px ${new Jo("rgba(0, 0, 0, 0.09)").toRgbString()}
    `,boxShadowDrawerRight:`
      -6px 0 16px 0 rgba(0, 0, 0, 0.08),
      -3px 0 6px -4px rgba(0, 0, 0, 0.12),
      -9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerLeft:`
      6px 0 16px 0 rgba(0, 0, 0, 0.08),
      3px 0 6px -4px rgba(0, 0, 0, 0.12),
      9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerUp:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerDown:`
      0 -6px 16px 0 rgba(0, 0, 0, 0.08),
      0 -3px 6px -4px rgba(0, 0, 0, 0.12),
      0 -9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTabsOverflowLeft:"inset 10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowRight:"inset -10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowTop:"inset 0 10px 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowBottom:"inset 0 -10px 8px -8px rgba(0, 0, 0, 0.08)"}),a)}function El(e){var t=C.useRef();t.current=e;var i=C.useCallback(function(){for(var a,c=arguments.length,u=new Array(c),f=0;f<c;f++)u[f]=arguments[f];return(a=t.current)===null||a===void 0?void 0:a.call.apply(a,[t].concat(u))},[]);return i}function up(e){var t=C.useRef(!1),i=C.useState(e),a=Ye(i,2),c=a[0],u=a[1];C.useEffect(function(){return t.current=!1,function(){t.current=!0}},[]);function f(m,g){g&&t.current||u(m)}return[c,f]}function cP(e){return e!==void 0}function rd(e,t){var i=t||{},a=i.defaultValue,c=i.value,u=i.onChange,f=i.postState,m=up(function(){return cP(c)?c:cP(a)?typeof a=="function"?a():a:typeof e=="function"?e():e}),g=Ye(m,2),E=g[0],y=g[1],T=c!==void 0?c:E,R=f?f(T):T,P=El(u),O=up([T]),N=Ye(O,2),M=N[0],D=N[1];S8(function(){var k=M[0];E!==k&&P(E,k)},[M]),S8(function(){cP(c)||y(c)},[c]);var x=El(function(k,V){y(k,V),D([T],V)});return[R,x]}const M2="anticon",Are=(e,t)=>t||(e?`ant-${e}`:"ant"),wr=C.createContext({getPrefixCls:Are,iconPrefixCls:M2}),P7=e=>({color:e.colorLink,textDecoration:"none",outline:"none",cursor:"pointer",transition:`color ${e.motionDurationSlow}`,"&:focus, &:hover":{color:e.colorLinkHover},"&:active":{color:e.colorLinkActive}}),Nre=(e,t,i,a,c)=>{const u=e/2,f=0,m=u,g=i*1/Math.sqrt(2),E=u-i*(1-1/Math.sqrt(2)),y=u-t*(1/Math.sqrt(2)),T=i*(Math.sqrt(2)-1)+t*(1/Math.sqrt(2)),R=2*u-y,P=T,O=2*u-g,N=E,M=2*u-f,D=m,x=u*Math.sqrt(2)+i*(Math.sqrt(2)-2),k=i*(Math.sqrt(2)-1);return{pointerEvents:"none",width:e,height:e,overflow:"hidden","&::before":{position:"absolute",bottom:0,insetInlineStart:0,width:e,height:e/2,background:a,clipPath:{_multi_value_:!0,value:[`polygon(${k}px 100%, 50% ${k}px, ${2*u-k}px 100%, ${k}px 100%)`,`path('M ${f} ${m} A ${i} ${i} 0 0 0 ${g} ${E} L ${y} ${T} A ${t} ${t} 0 0 1 ${R} ${P} L ${O} ${N} A ${i} ${i} 0 0 0 ${M} ${D} Z')`]},content:'""'},"&::after":{content:'""',position:"absolute",width:x,height:x,bottom:0,insetInline:0,margin:"auto",borderRadius:{_skip_check_:!0,value:`0 0 ${t}px 0`},transform:"translateY(50%) rotate(-135deg)",boxShadow:c,zIndex:0,background:"transparent"}}},xre={overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},Cp=e=>({boxSizing:"border-box",margin:0,padding:0,color:e.colorText,fontSize:e.fontSize,lineHeight:e.lineHeight,listStyle:"none",fontFamily:e.fontFamily}),D7=()=>({display:"inline-flex",alignItems:"center",color:"inherit",fontStyle:"normal",lineHeight:0,textAlign:"center",textTransform:"none",verticalAlign:"-0.125em",textRendering:"optimizeLegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","> *":{lineHeight:1},svg:{display:"inline-block"}}),LL=()=>({"&::before":{display:"table",content:'""'},"&::after":{display:"table",clear:"both",content:'""'}}),Pre=e=>({a:{color:e.colorLink,textDecoration:e.linkDecoration,backgroundColor:"transparent",outline:"none",cursor:"pointer",transition:`color ${e.motionDurationSlow}`,"-webkit-text-decoration-skip":"objects","&:hover":{color:e.colorLinkHover},"&:active":{color:e.colorLinkActive},"&:active,\n  &:hover":{textDecoration:e.linkHoverDecoration,outline:0},"&:focus":{textDecoration:e.linkFocusDecoration,outline:0},"&[disabled]":{color:e.colorTextDisabled,cursor:"not-allowed"}}}),Dre=(e,t)=>{const{fontFamily:i,fontSize:a}=e,c=`[class^="${t}"], [class*=" ${t}"]`;return{[c]:{fontFamily:i,fontSize:a,boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"},[c]:{boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"}}}}},L7=e=>({outline:`${e.lineWidthFocus}px solid ${e.colorPrimaryBorder}`,outlineOffset:1,transition:"outline-offset 0s, outline 0s"}),Lre=e=>({"&:focus-visible":Object.assign({},L7(e))});function Al(e,t,i,a){return c=>{const[u,f,m]=bg(),{getPrefixCls:g,iconPrefixCls:E,csp:y}=C.useContext(wr),T=g(),R={theme:u,token:f,hashId:m,nonce:()=>y==null?void 0:y.nonce};return NL(Object.assign(Object.assign({},R),{path:["Shared",T]}),()=>[{"&":Pre(f)}]),[NL(Object.assign(Object.assign({},R),{path:[e,c,E]}),()=>{const{token:P,flush:O}=Mre(f),N=Object.assign({},f[e]);if(a!=null&&a.deprecatedTokens){const{deprecatedTokens:H}=a;H.forEach($=>{let[G,K]=$;var Q;(N!=null&&N[G]||N!=null&&N[K])&&((Q=N[K])!==null&&Q!==void 0||(N[K]=N==null?void 0:N[G]))})}const M=typeof i=="function"?i(na(P,N??{})):i,D=Object.assign(Object.assign({},M),N),x=`.${c}`,k=na(P,{componentCls:x,prefixCls:c,iconCls:`.${E}`,antCls:`.${T}`},D),V=t(k,{hashId:m,prefixCls:c,rootPrefixCls:T,iconPrefixCls:E,overrideComponentToken:N});return O(e,D),[(a==null?void 0:a.resetStyle)===!1?null:Dre(f,c),V]}),m]}}const k7=typeof CSSINJS_STATISTIC<"u";let kL=!0;function na(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];if(!k7)return Object.assign.apply(Object,[{}].concat(t));kL=!1;const a={};return t.forEach(c=>{Object.keys(c).forEach(f=>{Object.defineProperty(a,f,{configurable:!0,enumerable:!0,get:()=>c[f]})})}),kL=!0,a}function kre(){}function Mre(e){let t,i=e,a=kre;return k7&&(t=new Set,i=new Proxy(e,{get(c,u){return kL&&t.add(u),c[u]}}),a=(c,u)=>{Array.from(t)}),{token:i,keys:t,flush:a}}function Ure(e,t){return _1.reduce((i,a)=>{const c=e[`${a}1`],u=e[`${a}3`],f=e[`${a}6`],m=e[`${a}7`];return Object.assign(Object.assign({},i),t(a,{lightColor:c,lightBorderColor:u,darkColor:f,textColor:m}))},{})}const Fre=E1(PS),S1={token:xS,hashed:!0},M7=Nt.createContext(S1);function bg(){const{token:e,hashed:t,theme:i,components:a}=Nt.useContext(M7),c=`${Zne}-${t||""}`,u=i||Fre,[f,m]=hne(u,[xS,e],{salt:c,override:Object.assign({override:e},a),formatToken:x7});return[u,f,t?m:""]}const Vre=`-ant-${Date.now()}-${Math.random()}`;function jre(e,t){const i={},a=(f,m)=>{let g=f.clone();return g=(m==null?void 0:m(g))||g,g.toRgbString()},c=(f,m)=>{const g=new Jo(f),E=ud(g.toRgbString());i[`${m}-color`]=a(g),i[`${m}-color-disabled`]=E[1],i[`${m}-color-hover`]=E[4],i[`${m}-color-active`]=E[6],i[`${m}-color-outline`]=g.clone().setAlpha(.2).toRgbString(),i[`${m}-color-deprecated-bg`]=E[0],i[`${m}-color-deprecated-border`]=E[2]};if(t.primaryColor){c(t.primaryColor,"primary");const f=new Jo(t.primaryColor),m=ud(f.toRgbString());m.forEach((E,y)=>{i[`primary-${y+1}`]=E}),i["primary-color-deprecated-l-35"]=a(f,E=>E.lighten(35)),i["primary-color-deprecated-l-20"]=a(f,E=>E.lighten(20)),i["primary-color-deprecated-t-20"]=a(f,E=>E.tint(20)),i["primary-color-deprecated-t-50"]=a(f,E=>E.tint(50)),i["primary-color-deprecated-f-12"]=a(f,E=>E.setAlpha(E.getAlpha()*.12));const g=new Jo(m[0]);i["primary-color-active-deprecated-f-30"]=a(g,E=>E.setAlpha(E.getAlpha()*.3)),i["primary-color-active-deprecated-d-02"]=a(g,E=>E.darken(2))}return t.successColor&&c(t.successColor,"success"),t.warningColor&&c(t.warningColor,"warning"),t.errorColor&&c(t.errorColor,"error"),t.infoColor&&c(t.infoColor,"info"),`
  :root {
    ${Object.keys(i).map(f=>`--${e}-${f}: ${i[f]};`).join(`
`)}
  }
  `.trim()}function Bre(e,t){const i=jre(e,t);_s()&&pS(i,`${Vre}-dynamic-theme`)}const ML=C.createContext(!1),U7=e=>{let{children:t,disabled:i}=e;const a=C.useContext(ML);return C.createElement(ML.Provider,{value:i??a},t)},DS=ML,$re=e=>{const t=Nt.useContext(SI);return Nt.useMemo(()=>e?typeof e=="string"?e??t:e instanceof Function?e(t):t:t,[e,t])},Rg=$re,F7=C.createContext(void 0),V7=e=>{let{children:t,size:i}=e;const a=Rg(i);return C.createElement(F7.Provider,{value:a},t)},SI=F7;function Hre(){const e=C.useContext(DS),t=C.useContext(SI);return{componentDisabled:e,componentSize:t}}function Wre(e,t){const i=e||{},a=i.inherit===!1||!t?S1:t;return mI(()=>{if(!e)return t;const u=Object.assign({},a.components);return Object.keys(e.components||{}).forEach(f=>{u[f]=Object.assign(Object.assign({},u[f]),e.components[f])}),Object.assign(Object.assign(Object.assign({},a),i),{token:Object.assign(Object.assign({},a.token),i.token),components:u})},[i,a],(u,f)=>u.some((m,g)=>{const E=f[g];return!O2(m,E,!0)}))}var Gre=["children"],j7=C.createContext({});function zre(e){var t=e.children,i=Xn(e,Gre);return C.createElement(j7.Provider,{value:i},t)}var Kre=function(e){Sg(i,e);var t=yg(i);function i(){return kc(this,i),t.apply(this,arguments)}return Mc(i,[{key:"render",value:function(){return this.props.children}}]),i}(C.Component),Qf="none",Jb="appear",Qb="enter",Zb="leave",U8="none",ml="prepare",K0="start",q0="active",U2="end",B7="prepared";function F8(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit".concat(e)]="webkit".concat(t),i["Moz".concat(e)]="moz".concat(t),i["ms".concat(e)]="MS".concat(t),i["O".concat(e)]="o".concat(t.toLowerCase()),i}function qre(e,t){var i={animationend:F8("Animation","AnimationEnd"),transitionend:F8("Transition","TransitionEnd")};return e&&("AnimationEvent"in t||delete i.animationend.animation,"TransitionEvent"in t||delete i.transitionend.transition),i}var Yre=qre(_s(),typeof window<"u"?window:{}),$7={};if(_s()){var Xre=document.createElement("div");$7=Xre.style}var eR={};function H7(e){if(eR[e])return eR[e];var t=Yre[e];if(t)for(var i=Object.keys(t),a=i.length,c=0;c<a;c+=1){var u=i[c];if(Object.prototype.hasOwnProperty.call(t,u)&&u in $7)return eR[e]=t[u],eR[e]}return""}var W7=H7("animationend"),G7=H7("transitionend"),z7=!!(W7&&G7),V8=W7||"animationend",j8=G7||"transitionend";function B8(e,t){if(!e)return null;if(Sr(e)==="object"){var i=t.replace(/-\w/g,function(a){return a[1].toUpperCase()});return e[i]}return"".concat(e,"-").concat(t)}const Jre=function(e){var t=C.useRef(),i=C.useRef(e);i.current=e;var a=C.useCallback(function(f){i.current(f)},[]);function c(f){f&&(f.removeEventListener(j8,a),f.removeEventListener(V8,a))}function u(f){t.current&&t.current!==f&&c(t.current),f&&f!==t.current&&(f.addEventListener(j8,a),f.addEventListener(V8,a),t.current=f)}return C.useEffect(function(){return function(){c(t.current)}},[]),[u,c]};var K7=_s()?C.useLayoutEffect:C.useEffect;const Qre=function(){var e=C.useRef(null);function t(){Zo.cancel(e.current)}function i(a){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;t();var u=Zo(function(){c<=1?a({isCanceled:function(){return u!==e.current}}):i(a,c-1)});e.current=u}return C.useEffect(function(){return function(){t()}},[]),[i,t]};var Zre=[ml,K0,q0,U2],eie=[ml,B7],q7=!1,tie=!0;function Y7(e){return e===q0||e===U2}const nie=function(e,t,i){var a=up(U8),c=Ye(a,2),u=c[0],f=c[1],m=Qre(),g=Ye(m,2),E=g[0],y=g[1];function T(){f(ml,!0)}var R=t?eie:Zre;return K7(function(){if(u!==U8&&u!==U2){var P=R.indexOf(u),O=R[P+1],N=i(u);N===q7?f(O,!0):O&&E(function(M){function D(){M.isCanceled()||f(O,!0)}N===!0?D():Promise.resolve(N).then(D)})}},[e,u]),C.useEffect(function(){return function(){y()}},[]),[T,u]};function rie(e,t,i,a){var c=a.motionEnter,u=c===void 0?!0:c,f=a.motionAppear,m=f===void 0?!0:f,g=a.motionLeave,E=g===void 0?!0:g,y=a.motionDeadline,T=a.motionLeaveImmediately,R=a.onAppearPrepare,P=a.onEnterPrepare,O=a.onLeavePrepare,N=a.onAppearStart,M=a.onEnterStart,D=a.onLeaveStart,x=a.onAppearActive,k=a.onEnterActive,V=a.onLeaveActive,H=a.onAppearEnd,$=a.onEnterEnd,G=a.onLeaveEnd,K=a.onVisibleChanged,Q=up(),z=Ye(Q,2),ie=z[0],J=z[1],Y=up(Qf),oe=Ye(Y,2),ue=oe[0],he=oe[1],Se=up(null),ve=Ye(Se,2),Re=ve[0],Ce=ve[1],pe=C.useRef(!1),fe=C.useRef(null);function _e(){return i()}var ge=C.useRef(!1);function Ue(){he(Qf,!0),Ce(null,!0)}function Fe(dt){var at=_e();if(!(dt&&!dt.deadline&&dt.target!==at)){var ht=ge.current,Ot;ue===Jb&&ht?Ot=H==null?void 0:H(at,dt):ue===Qb&&ht?Ot=$==null?void 0:$(at,dt):ue===Zb&&ht&&(Ot=G==null?void 0:G(at,dt)),ue!==Qf&&ht&&Ot!==!1&&Ue()}}var ot=Jre(Fe),qe=Ye(ot,1),wt=qe[0],kt=function(at){var ht,Ot,Vt;switch(at){case Jb:return ht={},Ct(ht,ml,R),Ct(ht,K0,N),Ct(ht,q0,x),ht;case Qb:return Ot={},Ct(Ot,ml,P),Ct(Ot,K0,M),Ct(Ot,q0,k),Ot;case Zb:return Vt={},Ct(Vt,ml,O),Ct(Vt,K0,D),Ct(Vt,q0,V),Vt;default:return{}}},_t=C.useMemo(function(){return kt(ue)},[ue]),vt=nie(ue,!e,function(dt){if(dt===ml){var at=_t[ml];return at?at(_e()):q7}if(Mt in _t){var ht;Ce(((ht=_t[Mt])===null||ht===void 0?void 0:ht.call(_t,_e(),null))||null)}return Mt===q0&&(wt(_e()),y>0&&(clearTimeout(fe.current),fe.current=setTimeout(function(){Fe({deadline:!0})},y))),Mt===B7&&Ue(),tie}),At=Ye(vt,2),it=At[0],Mt=At[1],rn=Y7(Mt);ge.current=rn,K7(function(){J(t);var dt=pe.current;pe.current=!0;var at;!dt&&t&&m&&(at=Jb),dt&&t&&u&&(at=Qb),(dt&&!t&&E||!dt&&T&&!t&&E)&&(at=Zb);var ht=kt(at);at&&(e||ht[ml])?(he(at),it()):he(Qf)},[t]),C.useEffect(function(){(ue===Jb&&!m||ue===Qb&&!u||ue===Zb&&!E)&&he(Qf)},[m,u,E]),C.useEffect(function(){return function(){pe.current=!1,clearTimeout(fe.current)}},[]);var Ft=C.useRef(!1);C.useEffect(function(){ie&&(Ft.current=!0),ie!==void 0&&ue===Qf&&((Ft.current||ie)&&(K==null||K(ie)),Ft.current=!0)},[ie,ue]);var ft=Re;return _t[ml]&&Mt===K0&&(ft=Ae({transition:"none"},ft)),[ue,Mt,ft,ie??t]}function iie(e){var t=e;Sr(e)==="object"&&(t=e.transitionSupport);function i(c,u){return!!(c.motionName&&t&&u!==!1)}var a=C.forwardRef(function(c,u){var f=c.visible,m=f===void 0?!0:f,g=c.removeOnLeave,E=g===void 0?!0:g,y=c.forceRender,T=c.children,R=c.motionName,P=c.leavedClassName,O=c.eventProps,N=C.useContext(j7),M=N.motion,D=i(c,M),x=C.useRef(),k=C.useRef();function V(){try{return x.current instanceof HTMLElement?x.current:yL(k.current)}catch{return null}}var H=rie(D,m,V,c),$=Ye(H,4),G=$[0],K=$[1],Q=$[2],z=$[3],ie=C.useRef(z);z&&(ie.current=!0);var J=C.useCallback(function(Ce){x.current=Ce,T2(u,Ce)},[u]),Y,oe=Ae(Ae({},O),{},{visible:m});if(!T)Y=null;else if(G===Qf)z?Y=T(Ae({},oe),J):!E&&ie.current&&P?Y=T(Ae(Ae({},oe),{},{className:P}),J):y||!E&&!P?Y=T(Ae(Ae({},oe),{},{style:{display:"none"}}),J):Y=null;else{var ue,he;K===ml?he="prepare":Y7(K)?he="active":K===K0&&(he="start");var Se=B8(R,"".concat(G,"-").concat(he));Y=T(Ae(Ae({},oe),{},{className:nt(B8(R,G),(ue={},Ct(ue,Se,Se&&he),Ct(ue,R,typeof R=="string"),ue)),style:Q}),J)}if(C.isValidElement(Y)&&Cg(Y)){var ve=Y,Re=ve.ref;Re||(Y=C.cloneElement(Y,{ref:J}))}return C.createElement(Kre,{ref:k},Y)});return a.displayName="CSSMotion",a}const Tp=iie(z7);var UL="add",FL="keep",VL="remove",lP="removed";function oie(e){var t;return e&&Sr(e)==="object"&&"key"in e?t=e:t={key:e},Ae(Ae({},t),{},{key:String(t.key)})}function jL(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return e.map(oie)}function aie(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=[],a=0,c=t.length,u=jL(e),f=jL(t);u.forEach(function(E){for(var y=!1,T=a;T<c;T+=1){var R=f[T];if(R.key===E.key){a<T&&(i=i.concat(f.slice(a,T).map(function(P){return Ae(Ae({},P),{},{status:UL})})),a=T),i.push(Ae(Ae({},R),{},{status:FL})),a+=1,y=!0;break}}y||i.push(Ae(Ae({},E),{},{status:VL}))}),a<c&&(i=i.concat(f.slice(a).map(function(E){return Ae(Ae({},E),{},{status:UL})})));var m={};i.forEach(function(E){var y=E.key;m[y]=(m[y]||0)+1});var g=Object.keys(m).filter(function(E){return m[E]>1});return g.forEach(function(E){i=i.filter(function(y){var T=y.key,R=y.status;return T!==E||R!==VL}),i.forEach(function(y){y.key===E&&(y.status=FL)})}),i}var sie=["component","children","onVisibleChanged","onAllRemoved"],cie=["status"],lie=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];function uie(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Tp,i=function(a){Sg(u,a);var c=yg(u);function u(){var f;kc(this,u);for(var m=arguments.length,g=new Array(m),E=0;E<m;E++)g[E]=arguments[E];return f=c.call.apply(c,[this].concat(g)),Ct(h1(f),"state",{keyEntities:[]}),Ct(h1(f),"removeKey",function(y){var T=f.state.keyEntities,R=T.map(function(P){return P.key!==y?P:Ae(Ae({},P),{},{status:lP})});return f.setState({keyEntities:R}),R.filter(function(P){var O=P.status;return O!==lP}).length}),f}return Mc(u,[{key:"render",value:function(){var m=this,g=this.state.keyEntities,E=this.props,y=E.component,T=E.children,R=E.onVisibleChanged,P=E.onAllRemoved,O=Xn(E,sie),N=y||C.Fragment,M={};return lie.forEach(function(D){M[D]=O[D],delete O[D]}),delete O.keys,C.createElement(N,O,g.map(function(D){var x=D.status,k=Xn(D,cie),V=x===UL||x===FL;return C.createElement(t,st({},M,{key:k.key,visible:V,eventProps:k,onVisibleChanged:function($){if(R==null||R($,{key:k.key}),!$){var G=m.removeKey(k.key);G===0&&P&&P()}}}),T)}))}}],[{key:"getDerivedStateFromProps",value:function(m,g){var E=m.keys,y=g.keyEntities,T=jL(E),R=aie(y,T);return{keyEntities:R.filter(function(P){var O=y.find(function(N){var M=N.key;return P.key===M});return!(O&&O.status===lP&&P.status===VL)})}}}]),u}(C.Component);return Ct(i,"defaultProps",{component:"div"}),i}const X7=uie(z7);function die(e){const{children:t}=e,[,i]=bg(),{motion:a}=i,c=C.useRef(!1);return c.current=c.current||a===!1,c.current?C.createElement(zre,{motion:a},t):t}const hie=(e,t)=>{const[i,a]=bg();return NL({theme:i,token:a,hashId:"",path:["ant-design-icons",e],nonce:()=>t==null?void 0:t.nonce},()=>[{[`.${e}`]:Object.assign(Object.assign({},D7()),{[`.${e} .${e}-icon`]:{display:"block"}})}])},fie=hie;var pie=globalThis&&globalThis.__rest||function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(i[a[c]]=e[a[c]]);return i};const mie=["getTargetContainer","getPopupContainer","renderEmpty","pageHeader","input","pagination","form","select","button"],gie="ant";let y1,J7,Q7;function PR(){return y1||gie}function vie(){return J7||M2}function Eie(e){return Object.keys(e).some(t=>t.endsWith("Color"))}const _ie=e=>{let{prefixCls:t,iconPrefixCls:i,theme:a}=e;t!==void 0&&(y1=t),i!==void 0&&(J7=i),a&&(Eie(a)?Bre(PR(),a):Q7=a)},Z7=()=>({getPrefixCls:(e,t)=>t||(e?`${PR()}-${e}`:PR()),getIconPrefixCls:vie,getRootPrefixCls:()=>y1||PR(),getTheme:()=>Q7}),Sie=e=>{const{children:t,csp:i,autoInsertSpaceInButton:a,form:c,locale:u,componentSize:f,direction:m,space:g,virtual:E,dropdownMatchSelectWidth:y,popupMatchSelectWidth:T,popupOverflow:R,legacyLocale:P,parentContext:O,iconPrefixCls:N,theme:M,componentDisabled:D}=e,x=C.useCallback((ue,he)=>{const{prefixCls:Se}=e;if(he)return he;const ve=Se||O.getPrefixCls("");return ue?`${ve}-${ue}`:ve},[O.getPrefixCls,e.prefixCls]),k=N||O.iconPrefixCls||M2,V=k!==O.iconPrefixCls,H=i||O.csp,$=fie(k,H),G=Wre(M,O.theme),K={csp:H,autoInsertSpaceInButton:a,locale:u||P,direction:m,space:g,virtual:E,popupMatchSelectWidth:T??y,popupOverflow:R,getPrefixCls:x,iconPrefixCls:k,theme:G},Q=Object.assign({},O);Object.keys(K).forEach(ue=>{K[ue]!==void 0&&(Q[ue]=K[ue])}),mie.forEach(ue=>{const he=e[ue];he&&(Q[ue]=he)});const z=mI(()=>Q,Q,(ue,he)=>{const Se=Object.keys(ue),ve=Object.keys(he);return Se.length!==ve.length||Se.some(Re=>ue[Re]!==he[Re])}),ie=C.useMemo(()=>({prefixCls:k,csp:H}),[k,H]);let J=V?$(t):t;const Y=C.useMemo(()=>{var ue,he,Se;return z0(((ue=fg.Form)===null||ue===void 0?void 0:ue.defaultValidateMessages)||{},((Se=(he=z.locale)===null||he===void 0?void 0:he.Form)===null||Se===void 0?void 0:Se.defaultValidateMessages)||{},(c==null?void 0:c.validateMessages)||{})},[z,c==null?void 0:c.validateMessages]);Object.keys(Y).length>0&&(J=C.createElement(C7.Provider,{value:Y},t)),u&&(J=C.createElement(Qne,{locale:u,_ANT_MARK__:Xne},J)),(k||H)&&(J=C.createElement(D2.Provider,{value:ie},J)),f&&(J=C.createElement(V7,{size:f},J)),J=C.createElement(die,null,J);const oe=C.useMemo(()=>{const ue=G||{},{algorithm:he,token:Se}=ue,ve=pie(ue,["algorithm","token"]),Re=he&&(!Array.isArray(he)||he.length>0)?E1(he):void 0;return Object.assign(Object.assign({},ve),{theme:Re,token:Object.assign(Object.assign({},xS),Se)})},[G]);return M&&(J=C.createElement(M7.Provider,{value:oe},J)),D!==void 0&&(J=C.createElement(U7,{disabled:D},J)),C.createElement(wr.Provider,{value:z},J)},Ig=e=>{const t=C.useContext(wr),i=C.useContext(L2);return C.createElement(Sie,Object.assign({parentContext:t,legacyLocale:i},e))};Ig.ConfigContext=wr;Ig.SizeContext=SI;Ig.config=_ie;Ig.useConfig=Hre;Object.defineProperty(Ig,"SizeContext",{get:()=>SI});var eG={};Object.defineProperty(eG,"__esModule",{value:!0});var yie={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"}}]},name:"check-circle",theme:"filled"},Cie=eG.default=yie,C1={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */C1.exports;(function(e,t){(function(){var i,a="4.17.21",c=200,u="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",f="Expected a function",m="Invalid `variable` option passed into `_.template`",g="__lodash_hash_undefined__",E=500,y="__lodash_placeholder__",T=1,R=2,P=4,O=1,N=2,M=1,D=2,x=4,k=8,V=16,H=32,$=64,G=128,K=256,Q=512,z=30,ie="...",J=800,Y=16,oe=1,ue=2,he=3,Se=1/0,ve=9007199254740991,Re=17976931348623157e292,Ce=0/0,pe=4294967295,fe=pe-1,_e=pe>>>1,ge=[["ary",G],["bind",M],["bindKey",D],["curry",k],["curryRight",V],["flip",Q],["partial",H],["partialRight",$],["rearg",K]],Ue="[object Arguments]",Fe="[object Array]",ot="[object AsyncFunction]",qe="[object Boolean]",wt="[object Date]",kt="[object DOMException]",_t="[object Error]",vt="[object Function]",At="[object GeneratorFunction]",it="[object Map]",Mt="[object Number]",rn="[object Null]",Ft="[object Object]",ft="[object Promise]",dt="[object Proxy]",at="[object RegExp]",ht="[object Set]",Ot="[object String]",Vt="[object Symbol]",zt="[object Undefined]",Kt="[object WeakMap]",mn="[object WeakSet]",Hn="[object ArrayBuffer]",Zr="[object DataView]",yr="[object Float32Array]",or="[object Float64Array]",Ln="[object Int8Array]",Gr="[object Int16Array]",Wn="[object Int32Array]",hn="[object Uint8Array]",fn="[object Uint8ClampedArray]",Ro="[object Uint16Array]",zi="[object Uint32Array]",ei=/\b__p \+= '';/g,Gn=/\b(__p \+=) '' \+/g,Qe=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Tt=/&(?:amp|lt|gt|quot|#39);/g,Un=/[&<>"']/g,an=RegExp(Tt.source),Ki=RegExp(Un.source),hi=/<%-([\s\S]+?)%>/g,Cr=/<%([\s\S]+?)%>/g,jt=/<%=([\s\S]+?)%>/g,_n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Pn=/^\w*$/,zr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ei=/[\\^$.*+?()[\]{}|]/g,ti=RegExp(Ei.source),Kr=/^\s+/,uo=/\s/,Io=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Uo=/\{\n\/\* \[wrapped with (.+)\] \*/,Fo=/,? & /,Fc=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ii=/[()=,{}\[\]\/\s]/,Vc=/\\(\\)?/g,Pl=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,pr=/\w*$/,Dl=/^[-+]0x[0-9a-f]+$/i,ho=/^0b[01]+$/i,Ll=/^\[object .+?Constructor\]$/,kl=/^0o[0-7]+$/i,wa=/^(?:0|[1-9]\d*)$/,jc=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,oa=/($^)/,aa=/['\n\r\u2028\u2029\\]/g,Cs="\\ud800-\\udfff",Ml="\\u0300-\\u036f",Ba="\\ufe20-\\ufe2f",Di="\\u20d0-\\u20ff",_i=Ml+Ba+Di,sa="\\u2700-\\u27bf",nc="a-z\\xdf-\\xf6\\xf8-\\xff",Ar="\\xac\\xb1\\xd7\\xf7",Bc="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Ul="\\u2000-\\u206f",rc=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Fl="A-Z\\xc0-\\xd6\\xd8-\\xde",Vl="\\ufe0e\\ufe0f",jl=Ar+Bc+Ul+rc,Qn="['’]",zn="["+Cs+"]",Zn="["+jl+"]",ni="["+_i+"]",ri="\\d+",Vo="["+sa+"]",fo="["+nc+"]",$a="[^"+Cs+jl+ri+sa+nc+Fl+"]",Ts="\\ud83c[\\udffb-\\udfff]",Gh="(?:"+ni+"|"+Ts+")",Li="[^"+Cs+"]",$c="(?:\\ud83c[\\udde6-\\uddff]){2}",Bl="[\\ud800-\\udbff][\\udc00-\\udfff]",jo="["+Fl+"]",ic="\\u200d",Hc="(?:"+fo+"|"+$a+")",Ru="(?:"+jo+"|"+$a+")",gd="(?:"+Qn+"(?:d|ll|m|re|s|t|ve))?",vd="(?:"+Qn+"(?:D|LL|M|RE|S|T|VE))?",Iu=Gh+"?",Ed="["+Vl+"]?",Ut="(?:"+ic+"(?:"+[Li,$c,Bl].join("|")+")"+Ed+Iu+")*",pn="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ar="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",ii=Ed+Iu+Ut,Mr="(?:"+[Vo,$c,Bl].join("|")+")"+ii,wp="(?:"+[Li+ni+"?",ni,$c,Bl,zn].join("|")+")",_d=RegExp(Qn,"g"),Sd=RegExp(ni,"g"),yd=RegExp(Ts+"(?="+Ts+")|"+wp+ii,"g"),Cd=RegExp([jo+"?"+fo+"+"+gd+"(?="+[Zn,jo,"$"].join("|")+")",Ru+"+"+vd+"(?="+[Zn,jo+Hc,"$"].join("|")+")",jo+"?"+Hc+"+"+gd,jo+"+"+vd,ar,pn,ri,Mr].join("|"),"g"),HI=RegExp("["+ic+Cs+_i+Vl+"]"),zh=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,bs=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],YS=-1,Nr={};Nr[yr]=Nr[or]=Nr[Ln]=Nr[Gr]=Nr[Wn]=Nr[hn]=Nr[fn]=Nr[Ro]=Nr[zi]=!0,Nr[Ue]=Nr[Fe]=Nr[Hn]=Nr[qe]=Nr[Zr]=Nr[wt]=Nr[_t]=Nr[vt]=Nr[it]=Nr[Mt]=Nr[Ft]=Nr[at]=Nr[ht]=Nr[Ot]=Nr[Kt]=!1;var xr={};xr[Ue]=xr[Fe]=xr[Hn]=xr[Zr]=xr[qe]=xr[wt]=xr[yr]=xr[or]=xr[Ln]=xr[Gr]=xr[Wn]=xr[it]=xr[Mt]=xr[Ft]=xr[at]=xr[ht]=xr[Ot]=xr[Vt]=xr[hn]=xr[fn]=xr[Ro]=xr[zi]=!0,xr[_t]=xr[vt]=xr[Kt]=!1;var WI={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},GI={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Rs={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},zI={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},KI=parseFloat,qI=parseInt,Kh=typeof Xt=="object"&&Xt&&Xt.Object===Object&&Xt,XS=typeof self=="object"&&self&&self.Object===Object&&self,po=Kh||XS||Function("return this")(),qh=t&&!t.nodeType&&t,wu=qh&&!0&&e&&!e.nodeType&&e,JS=wu&&wu.exports===qh,Vg=JS&&Kh.process,Ha=function(){try{var be=wu&&wu.require&&wu.require("util").types;return be||Vg&&Vg.binding&&Vg.binding("util")}catch{}}(),QS=Ha&&Ha.isArrayBuffer,ZS=Ha&&Ha.isDate,$l=Ha&&Ha.isMap,Yh=Ha&&Ha.isRegExp,ey=Ha&&Ha.isSet,ty=Ha&&Ha.isTypedArray;function Oa(be,Be,Me){switch(Me.length){case 0:return be.call(Be);case 1:return be.call(Be,Me[0]);case 2:return be.call(Be,Me[0],Me[1]);case 3:return be.call(Be,Me[0],Me[1],Me[2])}return be.apply(Be,Me)}function YI(be,Be,Me,St){for(var cn=-1,er=be==null?0:be.length;++cn<er;){var ki=be[cn];Be(St,ki,Me(ki),be)}return St}function Wa(be,Be){for(var Me=-1,St=be==null?0:be.length;++Me<St&&Be(be[Me],Me,be)!==!1;);return be}function Td(be,Be){for(var Me=be==null?0:be.length;Me--&&Be(be[Me],Me,be)!==!1;);return be}function ny(be,Be){for(var Me=-1,St=be==null?0:be.length;++Me<St;)if(!Be(be[Me],Me,be))return!1;return!0}function Aa(be,Be){for(var Me=-1,St=be==null?0:be.length,cn=0,er=[];++Me<St;){var ki=be[Me];Be(ki,Me,be)&&(er[cn++]=ki)}return er}function Xh(be,Be){var Me=be==null?0:be.length;return!!Me&&bd(be,Be,0)>-1}function jg(be,Be,Me){for(var St=-1,cn=be==null?0:be.length;++St<cn;)if(Me(Be,be[St]))return!0;return!1}function Rn(be,Be){for(var Me=-1,St=be==null?0:be.length,cn=Array(St);++Me<St;)cn[Me]=Be(be[Me],Me,be);return cn}function Hl(be,Be){for(var Me=-1,St=Be.length,cn=be.length;++Me<St;)be[cn+Me]=Be[Me];return be}function Bg(be,Be,Me,St){var cn=-1,er=be==null?0:be.length;for(St&&er&&(Me=be[++cn]);++cn<er;)Me=Be(Me,be[cn],cn,be);return Me}function $g(be,Be,Me,St){var cn=be==null?0:be.length;for(St&&cn&&(Me=be[--cn]);cn--;)Me=Be(Me,be[cn],cn,be);return Me}function Hg(be,Be){for(var Me=-1,St=be==null?0:be.length;++Me<St;)if(Be(be[Me],Me,be))return!0;return!1}var XI=Gg("length");function JI(be){return be.split("")}function Wl(be){return be.match(Fc)||[]}function ry(be,Be,Me){var St;return Me(be,function(cn,er,ki){if(Be(cn,er,ki))return St=er,!1}),St}function Op(be,Be,Me,St){for(var cn=be.length,er=Me+(St?1:-1);St?er--:++er<cn;)if(Be(be[er],er,be))return er;return-1}function bd(be,Be,Me){return Be===Be?dy(be,Be,Me):Op(be,iy,Me)}function QI(be,Be,Me,St){for(var cn=Me-1,er=be.length;++cn<er;)if(St(be[cn],Be))return cn;return-1}function iy(be){return be!==be}function Wg(be,Be){var Me=be==null?0:be.length;return Me?Kg(be,Be)/Me:Ce}function Gg(be){return function(Be){return Be==null?i:Be[be]}}function zg(be){return function(Be){return be==null?i:be[Be]}}function Ap(be,Be,Me,St,cn){return cn(be,function(er,ki,Tr){Me=St?(St=!1,er):Be(Me,er,ki,Tr)}),Me}function Np(be,Be){var Me=be.length;for(be.sort(Be);Me--;)be[Me]=be[Me].value;return be}function Kg(be,Be){for(var Me,St=-1,cn=be.length;++St<cn;){var er=Be(be[St]);er!==i&&(Me=Me===i?er:Me+er)}return Me}function xp(be,Be){for(var Me=-1,St=Array(be);++Me<be;)St[Me]=Be(Me);return St}function ZI(be,Be){return Rn(Be,function(Me){return[Me,be[Me]]})}function oy(be){return be&&be.slice(0,Zh(be)+1).replace(Kr,"")}function wi(be){return function(Be){return be(Be)}}function qg(be,Be){return Rn(Be,function(Me){return be[Me]})}function Jh(be,Be){return be.has(Be)}function ay(be,Be){for(var Me=-1,St=be.length;++Me<St&&bd(Be,be[Me],0)>-1;);return Me}function Pp(be,Be){for(var Me=be.length;Me--&&bd(Be,be[Me],0)>-1;);return Me}function sy(be,Be){for(var Me=be.length,St=0;Me--;)be[Me]===Be&&++St;return St}var Gl=zg(WI),cy=zg(GI);function ly(be){return"\\"+zI[be]}function Dp(be,Be){return be==null?i:be[Be]}function Ga(be){return HI.test(be)}function ew(be){return zh.test(be)}function tw(be){for(var Be,Me=[];!(Be=be.next()).done;)Me.push(Be.value);return Me}function Lp(be){var Be=-1,Me=Array(be.size);return be.forEach(function(St,cn){Me[++Be]=[cn,St]}),Me}function kp(be,Be){return function(Me){return be(Be(Me))}}function zl(be,Be){for(var Me=-1,St=be.length,cn=0,er=[];++Me<St;){var ki=be[Me];(ki===Be||ki===y)&&(be[Me]=y,er[cn++]=Me)}return er}function Qh(be){var Be=-1,Me=Array(be.size);return be.forEach(function(St){Me[++Be]=St}),Me}function uy(be){var Be=-1,Me=Array(be.size);return be.forEach(function(St){Me[++Be]=[St,St]}),Me}function dy(be,Be,Me){for(var St=Me-1,cn=be.length;++St<cn;)if(be[St]===Be)return St;return-1}function nw(be,Be,Me){for(var St=Me+1;St--;)if(be[St]===Be)return St;return St}function Rd(be){return Ga(be)?iw(be):XI(be)}function za(be){return Ga(be)?ow(be):JI(be)}function Zh(be){for(var Be=be.length;Be--&&uo.test(be.charAt(Be)););return Be}var rw=zg(Rs);function iw(be){for(var Be=yd.lastIndex=0;yd.test(be);)++Be;return Be}function ow(be){return be.match(yd)||[]}function aw(be){return be.match(Cd)||[]}var sw=function be(Be){Be=Be==null?po:Id.defaults(po.Object(),Be,Id.pick(po,bs));var Me=Be.Array,St=Be.Date,cn=Be.Error,er=Be.Function,ki=Be.Math,Tr=Be.Object,Yg=Be.RegExp,cw=Be.String,Ka=Be.TypeError,Mp=Me.prototype,Up=er.prototype,wd=Tr.prototype,Fp=Be["__core-js_shared__"],Vp=Up.toString,tr=wd.hasOwnProperty,lw=0,hy=function(){var h=/[^.]+$/.exec(Fp&&Fp.keys&&Fp.keys.IE_PROTO||"");return h?"Symbol(src)_1."+h:""}(),jp=wd.toString,fy=Vp.call(Tr),uw=po._,Bp=Yg("^"+Vp.call(tr).replace(Ei,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Od=JS?Be.Buffer:i,Kl=Be.Symbol,$p=Be.Uint8Array,py=Od?Od.allocUnsafe:i,ef=kp(Tr.getPrototypeOf,Tr),Xg=Tr.create,Hp=wd.propertyIsEnumerable,Wp=Mp.splice,my=Kl?Kl.isConcatSpreadable:i,Ou=Kl?Kl.iterator:i,Au=Kl?Kl.toStringTag:i,Gp=function(){try{var h=ru(Tr,"defineProperty");return h({},"",{}),h}catch{}}(),dw=Be.clearTimeout!==po.clearTimeout&&Be.clearTimeout,hw=St&&St.now!==po.Date.now&&St.now,fw=Be.setTimeout!==po.setTimeout&&Be.setTimeout,zp=ki.ceil,tf=ki.floor,Jg=Tr.getOwnPropertySymbols,pw=Od?Od.isBuffer:i,gy=Be.isFinite,Qg=Mp.join,mw=kp(Tr.keys,Tr),Mi=ki.max,qi=ki.min,gw=St.now,vw=Be.parseInt,vy=ki.random,Ew=Mp.reverse,Zg=ru(Be,"DataView"),nf=ru(Be,"Map"),Ad=ru(Be,"Promise"),Nu=ru(Be,"Set"),rf=ru(Be,"WeakMap"),of=ru(Tr,"create"),af=rf&&new rf,Nd={},_w=ws(Zg),Sw=ws(nf),Ey=ws(Ad),ev=ws(Nu),_y=ws(rf),sf=Kl?Kl.prototype:i,ql=sf?sf.valueOf:i,cf=sf?sf.toString:i;function ae(h){if(oi(h)&&!Le(h)&&!(h instanceof kn)){if(h instanceof qa)return h;if(tr.call(h,"__wrapped__"))return _m(h)}return new qa(h)}var xd=function(){function h(){}return function(v){if(!qr(v))return{};if(Xg)return Xg(v);h.prototype=v;var w=new h;return h.prototype=i,w}}();function lf(){}function qa(h,v){this.__wrapped__=h,this.__actions__=[],this.__chain__=!!v,this.__index__=0,this.__values__=i}ae.templateSettings={escape:hi,evaluate:Cr,interpolate:jt,variable:"",imports:{_:ae}},ae.prototype=lf.prototype,ae.prototype.constructor=ae,qa.prototype=xd(lf.prototype),qa.prototype.constructor=qa;function kn(h){this.__wrapped__=h,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=pe,this.__views__=[]}function yw(){var h=new kn(this.__wrapped__);return h.__actions__=$o(this.__actions__),h.__dir__=this.__dir__,h.__filtered__=this.__filtered__,h.__iteratees__=$o(this.__iteratees__),h.__takeCount__=this.__takeCount__,h.__views__=$o(this.__views__),h}function Pd(){if(this.__filtered__){var h=new kn(this);h.__dir__=-1,h.__filtered__=!0}else h=this.clone(),h.__dir__*=-1;return h}function Cw(){var h=this.__wrapped__.value(),v=this.__dir__,w=Le(h),B=v<0,X=w?h.length:0,ce=aO(0,X,this.__views__),me=ce.start,Te=ce.end,we=Te-me,He=B?Te:me-1,We=this.__iteratees__,Ke=We.length,pt=0,xt=qi(we,this.__takeCount__);if(!w||!B&&X==we&&xt==we)return jy(h,this.__actions__);var Ht=[];e:for(;we--&&pt<xt;){He+=v;for(var Wt=-1,qt=h[He];++Wt<Ke;){var An=We[Wt],Fn=An.iteratee,Ni=An.type,go=Fn(qt);if(Ni==ue)qt=go;else if(!go){if(Ni==oe)continue e;break e}}Ht[pt++]=qt}return Ht}kn.prototype=xd(lf.prototype),kn.prototype.constructor=kn;function xu(h){var v=-1,w=h==null?0:h.length;for(this.clear();++v<w;){var B=h[v];this.set(B[0],B[1])}}function Tw(){this.__data__=of?of(null):{},this.size=0}function Sy(h){var v=this.has(h)&&delete this.__data__[h];return this.size-=v?1:0,v}function tv(h){var v=this.__data__;if(of){var w=v[h];return w===g?i:w}return tr.call(v,h)?v[h]:i}function bw(h){var v=this.__data__;return of?v[h]!==i:tr.call(v,h)}function Rw(h,v){var w=this.__data__;return this.size+=this.has(h)?0:1,w[h]=of&&v===i?g:v,this}xu.prototype.clear=Tw,xu.prototype.delete=Sy,xu.prototype.get=tv,xu.prototype.has=bw,xu.prototype.set=Rw;function Wc(h){var v=-1,w=h==null?0:h.length;for(this.clear();++v<w;){var B=h[v];this.set(B[0],B[1])}}function Kp(){this.__data__=[],this.size=0}function Iw(h){var v=this.__data__,w=qp(v,h);if(w<0)return!1;var B=v.length-1;return w==B?v.pop():Wp.call(v,w,1),--this.size,!0}function ww(h){var v=this.__data__,w=qp(v,h);return w<0?i:v[w][1]}function Ow(h){return qp(this.__data__,h)>-1}function Yl(h,v){var w=this.__data__,B=qp(w,h);return B<0?(++this.size,w.push([h,v])):w[B][1]=v,this}Wc.prototype.clear=Kp,Wc.prototype.delete=Iw,Wc.prototype.get=ww,Wc.prototype.has=Ow,Wc.prototype.set=Yl;function Gc(h){var v=-1,w=h==null?0:h.length;for(this.clear();++v<w;){var B=h[v];this.set(B[0],B[1])}}function yy(){this.size=0,this.__data__={hash:new xu,map:new(nf||Wc),string:new xu}}function Aw(h){var v=tu(this,h).delete(h);return this.size-=v?1:0,v}function Nw(h){return tu(this,h).get(h)}function Cy(h){return tu(this,h).has(h)}function xw(h,v){var w=tu(this,h),B=w.size;return w.set(h,v),this.size+=w.size==B?0:1,this}Gc.prototype.clear=yy,Gc.prototype.delete=Aw,Gc.prototype.get=Nw,Gc.prototype.has=Cy,Gc.prototype.set=xw;function Pu(h){var v=-1,w=h==null?0:h.length;for(this.__data__=new Gc;++v<w;)this.add(h[v])}function Pw(h){return this.__data__.set(h,g),this}function Dw(h){return this.__data__.has(h)}Pu.prototype.add=Pu.prototype.push=Pw,Pu.prototype.has=Dw;function Is(h){var v=this.__data__=new Wc(h);this.size=v.size}function Lw(){this.__data__=new Wc,this.size=0}function kw(h){var v=this.__data__,w=v.delete(h);return this.size=v.size,w}function Ty(h){return this.__data__.get(h)}function Mw(h){return this.__data__.has(h)}function Uw(h,v){var w=this.__data__;if(w instanceof Wc){var B=w.__data__;if(!nf||B.length<c-1)return B.push([h,v]),this.size=++w.size,this;w=this.__data__=new Gc(B)}return w.set(h,v),this.size=w.size,this}Is.prototype.clear=Lw,Is.prototype.delete=kw,Is.prototype.get=Ty,Is.prototype.has=Mw,Is.prototype.set=Uw;function by(h,v){var w=Le(h),B=!w&&ou(h),X=!w&&!B&&Zc(h),ce=!w&&!B&&!X&&Vu(h),me=w||B||X||ce,Te=me?xp(h.length,cw):[],we=Te.length;for(var He in h)(v||tr.call(h,He))&&!(me&&(He=="length"||X&&(He=="offset"||He=="parent")||ce&&(He=="buffer"||He=="byteLength"||He=="byteOffset")||Xc(He,we)))&&Te.push(He);return Te}function Ry(h){var v=h.length;return v?h[tm(0,v-1)]:i}function Fw(h,v){return Rf($o(h),oc(v,0,h.length))}function Vw(h){return Rf($o(h))}function nv(h,v,w){(w!==i&&!xa(h[v],w)||w===i&&!(v in h))&&Ya(h,v,w)}function Dd(h,v,w){var B=h[v];(!(tr.call(h,v)&&xa(B,w))||w===i&&!(v in h))&&Ya(h,v,w)}function qp(h,v){for(var w=h.length;w--;)if(xa(h[w][0],v))return w;return-1}function jw(h,v,w,B){return Xl(h,function(X,ce,me){v(B,X,w(X),me)}),B}function rv(h,v){return h&&ac(v,Ai(v),h)}function Bw(h,v){return h&&ac(v,Ao(v),h)}function Ya(h,v,w){v=="__proto__"&&Gp?Gp(h,v,{configurable:!0,enumerable:!0,value:w,writable:!0}):h[v]=w}function Yp(h,v){for(var w=-1,B=v.length,X=Me(B),ce=h==null;++w<B;)X[w]=ce?i:Kd(h,v[w]);return X}function oc(h,v,w){return h===h&&(w!==i&&(h=h<=w?h:w),v!==i&&(h=h>=v?h:v)),h}function Xa(h,v,w,B,X,ce){var me,Te=v&T,we=v&R,He=v&P;if(w&&(me=X?w(h,B,X,ce):w(h)),me!==i)return me;if(!qr(h))return h;var We=Le(h);if(We){if(me=sO(h),!Te)return $o(h,me)}else{var Ke=wo(h),pt=Ke==vt||Ke==At;if(Zc(h))return Hy(h,Te);if(Ke==Ft||Ke==Ue||pt&&!X){if(me=we||pt?{}:Ov(h),!Te)return we?Sv(h,Bw(me,h)):lm(h,rv(me,h))}else{if(!xr[Ke])return X?h:{};me=Av(h,Ke,Te)}}ce||(ce=new Is);var xt=ce.get(h);if(xt)return xt;ce.set(h,me),dE(h)?h.forEach(function(qt){me.add(Xa(qt,v,w,qt,h,ce))}):lE(h)&&h.forEach(function(qt,An){me.set(An,Xa(qt,v,w,An,h,ce))});var Ht=He?we?Sf:mm:we?Ao:Ai,Wt=We?i:Ht(h);return Wa(Wt||h,function(qt,An){Wt&&(An=qt,qt=h[An]),Dd(me,An,Xa(qt,v,w,An,h,ce))}),me}function $w(h){var v=Ai(h);return function(w){return Du(w,h,v)}}function Du(h,v,w){var B=w.length;if(h==null)return!B;for(h=Tr(h);B--;){var X=w[B],ce=v[X],me=h[X];if(me===i&&!(X in h)||!ce(me))return!1}return!0}function Iy(h,v,w){if(typeof h!="function")throw new Ka(f);return Tf(function(){h.apply(i,w)},v)}function uf(h,v,w,B){var X=-1,ce=Xh,me=!0,Te=h.length,we=[],He=v.length;if(!Te)return we;w&&(v=Rn(v,wi(w))),B?(ce=jg,me=!1):v.length>=c&&(ce=Jh,me=!1,v=new Pu(v));e:for(;++X<Te;){var We=h[X],Ke=w==null?We:w(We);if(We=B||We!==0?We:0,me&&Ke===Ke){for(var pt=He;pt--;)if(v[pt]===Ke)continue e;we.push(We)}else ce(v,Ke,B)||we.push(We)}return we}var Xl=yv(Ja),wy=yv(iv,!0);function Hw(h,v){var w=!0;return Xl(h,function(B,X,ce){return w=!!v(B,X,ce),w}),w}function Xp(h,v,w){for(var B=-1,X=h.length;++B<X;){var ce=h[B],me=v(ce);if(me!=null&&(Te===i?me===me&&!la(me):w(me,Te)))var Te=me,we=ce}return we}function Ww(h,v,w,B){var X=h.length;for(w=Sn(w),w<0&&(w=-w>X?0:X+w),B=B===i||B>X?X:Sn(B),B<0&&(B+=X),B=w>B?0:cT(B);w<B;)h[w++]=v;return h}function df(h,v){var w=[];return Xl(h,function(B,X,ce){v(B,X,ce)&&w.push(B)}),w}function mo(h,v,w,B,X){var ce=-1,me=h.length;for(w||(w=Na),X||(X=[]);++ce<me;){var Te=h[ce];v>0&&w(Te)?v>1?mo(Te,v-1,w,B,X):Hl(X,Te):B||(X[X.length]=Te)}return X}var Jp=Ky(),hf=Ky(!0);function Ja(h,v){return h&&Jp(h,v,Ai)}function iv(h,v){return h&&hf(h,v,Ai)}function Qp(h,v){return Aa(v,function(w){return dc(h[w])})}function Lu(h,v){v=Kc(v,h);for(var w=0,B=v.length;h!=null&&w<B;)h=h[Oo(v[w++])];return w&&w==B?h:i}function Oy(h,v,w){var B=v(h);return Le(h)?B:Hl(B,w(h))}function Bo(h){return h==null?h===i?zt:rn:Au&&Au in Tr(h)?wv(h):Dv(h)}function ov(h,v){return h>v}function Zp(h,v){return h!=null&&tr.call(h,v)}function Gw(h,v){return h!=null&&v in Tr(h)}function ff(h,v,w){return h>=qi(v,w)&&h<Mi(v,w)}function pf(h,v,w){for(var B=w?jg:Xh,X=h[0].length,ce=h.length,me=ce,Te=Me(ce),we=1/0,He=[];me--;){var We=h[me];me&&v&&(We=Rn(We,wi(v))),we=qi(We.length,we),Te[me]=!w&&(v||X>=120&&We.length>=120)?new Pu(me&&We):i}We=h[0];var Ke=-1,pt=Te[0];e:for(;++Ke<X&&He.length<we;){var xt=We[Ke],Ht=v?v(xt):xt;if(xt=w||xt!==0?xt:0,!(pt?Jh(pt,Ht):B(He,Ht,w))){for(me=ce;--me;){var Wt=Te[me];if(!(Wt?Jh(Wt,Ht):B(h[me],Ht,w)))continue e}pt&&pt.push(Ht),He.push(xt)}}return He}function zw(h,v,w,B){return Ja(h,function(X,ce,me){v(B,w(X),ce,me)}),B}function ku(h,v,w){v=Kc(v,h),h=Lv(h,v);var B=h==null?h:h[Oo(Za(v))];return B==null?i:Oa(B,h,w)}function Ay(h){return oi(h)&&Bo(h)==Ue}function em(h){return oi(h)&&Bo(h)==Hn}function mf(h){return oi(h)&&Bo(h)==wt}function Jl(h,v,w,B,X){return h===v?!0:h==null||v==null||!oi(h)&&!oi(v)?h!==h&&v!==v:av(h,v,w,B,Jl,X)}function av(h,v,w,B,X,ce){var me=Le(h),Te=Le(v),we=me?Fe:wo(h),He=Te?Fe:wo(v);we=we==Ue?Ft:we,He=He==Ue?Ft:He;var We=we==Ft,Ke=He==Ft,pt=we==He;if(pt&&Zc(h)){if(!Zc(v))return!1;me=!0,We=!1}if(pt&&!We)return ce||(ce=new Is),me||Vu(h)?rC(h,v,w,B,X,ce):oO(h,v,we,w,B,X,ce);if(!(w&O)){var xt=We&&tr.call(h,"__wrapped__"),Ht=Ke&&tr.call(v,"__wrapped__");if(xt||Ht){var Wt=xt?h.value():h,qt=Ht?v.value():v;return ce||(ce=new Is),X(Wt,qt,w,B,ce)}}return pt?(ce||(ce=new Is),iC(h,v,w,B,X,ce)):!1}function Kw(h){return oi(h)&&wo(h)==it}function sv(h,v,w,B){var X=w.length,ce=X,me=!B;if(h==null)return!ce;for(h=Tr(h);X--;){var Te=w[X];if(me&&Te[2]?Te[1]!==h[Te[0]]:!(Te[0]in h))return!1}for(;++X<ce;){Te=w[X];var we=Te[0],He=h[we],We=Te[1];if(me&&Te[2]){if(He===i&&!(we in h))return!1}else{var Ke=new Is;if(B)var pt=B(He,We,we,h,v,Ke);if(!(pt===i?Jl(We,He,O|N,B,Ke):pt))return!1}}return!0}function cv(h){if(!qr(h)||lC(h))return!1;var v=dc(h)?Bp:Ll;return v.test(ws(h))}function qw(h){return oi(h)&&Bo(h)==at}function Ny(h){return oi(h)&&wo(h)==ht}function lv(h){return oi(h)&&Wd(h.length)&&!!Nr[Bo(h)]}function xy(h){return typeof h=="function"?h:h==null?ha:typeof h=="object"?Le(h)?hv(h[0],h[1]):Dy(h):Nf(h)}function uv(h){if(!Ud(h))return mw(h);var v=[];for(var w in Tr(h))tr.call(h,w)&&w!="constructor"&&v.push(w);return v}function dv(h){if(!qr(h))return uO(h);var v=Ud(h),w=[];for(var B in h)B=="constructor"&&(v||!tr.call(h,B))||w.push(B);return w}function gf(h,v){return h<v}function Py(h,v){var w=-1,B=Wo(h)?Me(h.length):[];return Xl(h,function(X,ce,me){B[++w]=v(X,ce,me)}),B}function Dy(h){var v=nu(h);return v.length==1&&v[0][2]?dC(v[0][0],v[0][1]):function(w){return w===h||sv(w,h,v)}}function hv(h,v){return vm(h)&&uC(v)?dC(Oo(h),v):function(w){var B=Kd(w,h);return B===i&&B===v?EE(w,h):Jl(v,B,O|N)}}function Ld(h,v,w,B,X){h!==v&&Jp(v,function(ce,me){if(X||(X=new Is),qr(ce))Yw(h,v,me,w,Ld,B,X);else{var Te=B?B(Cf(h,me),ce,me+"",h,v,X):i;Te===i&&(Te=ce),nv(h,me,Te)}},Ao)}function Yw(h,v,w,B,X,ce,me){var Te=Cf(h,w),we=Cf(v,w),He=me.get(we);if(He){nv(h,w,He);return}var We=ce?ce(Te,we,w+"",h,v,me):i,Ke=We===i;if(Ke){var pt=Le(we),xt=!pt&&Zc(we),Ht=!pt&&!xt&&Vu(we);We=we,pt||xt||Ht?Le(Te)?We=Te:fi(Te)?We=$o(Te):xt?(Ke=!1,We=Hy(we,!0)):Ht?(Ke=!1,We=Wy(we,!0)):We=[]:Gd(we)||ou(we)?(We=Te,ou(Te)?We=lT(Te):(!qr(Te)||dc(Te))&&(We=Ov(we))):Ke=!1}Ke&&(me.set(we,We),X(We,we,B,ce,me),me.delete(we)),nv(h,w,We)}function Ql(h,v){var w=h.length;if(w)return v+=v<0?w:0,Xc(v,w)?h[v]:i}function Ly(h,v,w){v.length?v=Rn(v,function(ce){return Le(ce)?function(me){return Lu(me,ce.length===1?ce[0]:ce)}:ce}):v=[ha];var B=-1;v=Rn(v,wi($t()));var X=Py(h,function(ce,me,Te){var we=Rn(v,function(He){return He(ce)});return{criteria:we,index:++B,value:ce}});return Np(X,function(ce,me){return nO(ce,me,w)})}function ky(h,v){return My(h,v,function(w,B){return EE(h,B)})}function My(h,v,w){for(var B=-1,X=v.length,ce={};++B<X;){var me=v[B],Te=Lu(h,me);w(Te,me)&&Mu(ce,Kc(me,h),Te)}return ce}function kd(h){return function(v){return Lu(v,h)}}function zc(h,v,w,B){var X=B?QI:bd,ce=-1,me=v.length,Te=h;for(h===v&&(v=$o(v)),w&&(Te=Rn(h,wi(w)));++ce<me;)for(var we=0,He=v[ce],We=w?w(He):He;(we=X(Te,We,we,B))>-1;)Te!==h&&Wp.call(Te,we,1),Wp.call(h,we,1);return h}function fv(h,v){for(var w=h?v.length:0,B=w-1;w--;){var X=v[w];if(w==B||X!==ce){var ce=X;Xc(X)?Wp.call(h,X,1):sm(h,X)}}return h}function tm(h,v){return h+tf(vy()*(v-h+1))}function nm(h,v,w,B){for(var X=-1,ce=Mi(zp((v-h)/(w||1)),0),me=Me(ce);ce--;)me[B?ce:++X]=h,h+=w;return me}function vf(h,v){var w="";if(!h||v<1||v>ve)return w;do v%2&&(w+=h),v=tf(v/2),v&&(h+=h);while(v);return w}function In(h,v){return bf(hC(h,v,ha),h+"")}function Uy(h){return Ry(ju(h))}function Xw(h,v){var w=ju(h);return Rf(w,oc(v,0,w.length))}function Mu(h,v,w,B){if(!qr(h))return h;v=Kc(v,h);for(var X=-1,ce=v.length,me=ce-1,Te=h;Te!=null&&++X<ce;){var we=Oo(v[X]),He=w;if(we==="__proto__"||we==="constructor"||we==="prototype")return h;if(X!=me){var We=Te[we];He=B?B(We,we,Te):i,He===i&&(He=qr(We)?We:Xc(v[X+1])?[]:{})}Dd(Te,we,He),Te=Te[we]}return h}var pv=af?function(h,v){return af.set(h,v),h}:ha,Jw=Gp?function(h,v){return Gp(h,"toString",{configurable:!0,enumerable:!1,value:Fi(v),writable:!0})}:ha;function rm(h){return Rf(ju(h))}function Qa(h,v,w){var B=-1,X=h.length;v<0&&(v=-v>X?0:X+v),w=w>X?X:w,w<0&&(w+=X),X=v>w?0:w-v>>>0,v>>>=0;for(var ce=Me(X);++B<X;)ce[B]=h[B+v];return ce}function Qw(h,v){var w;return Xl(h,function(B,X,ce){return w=v(B,X,ce),!w}),!!w}function im(h,v,w){var B=0,X=h==null?B:h.length;if(typeof v=="number"&&v===v&&X<=_e){for(;B<X;){var ce=B+X>>>1,me=h[ce];me!==null&&!la(me)&&(w?me<=v:me<v)?B=ce+1:X=ce}return X}return om(h,v,ha,w)}function om(h,v,w,B){var X=0,ce=h==null?0:h.length;if(ce===0)return 0;v=w(v);for(var me=v!==v,Te=v===null,we=la(v),He=v===i;X<ce;){var We=tf((X+ce)/2),Ke=w(h[We]),pt=Ke!==i,xt=Ke===null,Ht=Ke===Ke,Wt=la(Ke);if(me)var qt=B||Ht;else He?qt=Ht&&(B||pt):Te?qt=Ht&&pt&&(B||!xt):we?qt=Ht&&pt&&!xt&&(B||!Wt):xt||Wt?qt=!1:qt=B?Ke<=v:Ke<v;qt?X=We+1:ce=We}return qi(ce,fe)}function Fy(h,v){for(var w=-1,B=h.length,X=0,ce=[];++w<B;){var me=h[w],Te=v?v(me):me;if(!w||!xa(Te,we)){var we=Te;ce[X++]=me===0?0:me}}return ce}function am(h){return typeof h=="number"?h:la(h)?Ce:+h}function ca(h){if(typeof h=="string")return h;if(Le(h))return Rn(h,ca)+"";if(la(h))return cf?cf.call(h):"";var v=h+"";return v=="0"&&1/h==-Se?"-0":v}function Zl(h,v,w){var B=-1,X=Xh,ce=h.length,me=!0,Te=[],we=Te;if(w)me=!1,X=jg;else if(ce>=c){var He=v?null:Qy(h);if(He)return Qh(He);me=!1,X=Jh,we=new Pu}else we=v?[]:Te;e:for(;++B<ce;){var We=h[B],Ke=v?v(We):We;if(We=w||We!==0?We:0,me&&Ke===Ke){for(var pt=we.length;pt--;)if(we[pt]===Ke)continue e;v&&we.push(Ke),Te.push(We)}else X(we,Ke,w)||(we!==Te&&we.push(Ke),Te.push(We))}return Te}function sm(h,v){return v=Kc(v,h),h=Lv(h,v),h==null||delete h[Oo(Za(v))]}function Vy(h,v,w,B){return Mu(h,v,w(Lu(h,v)),B)}function cm(h,v,w,B){for(var X=h.length,ce=B?X:-1;(B?ce--:++ce<X)&&v(h[ce],ce,h););return w?Qa(h,B?0:ce,B?ce+1:X):Qa(h,B?ce+1:0,B?X:ce)}function jy(h,v){var w=h;return w instanceof kn&&(w=w.value()),Bg(v,function(B,X){return X.func.apply(X.thisArg,Hl([B],X.args))},w)}function mv(h,v,w){var B=h.length;if(B<2)return B?Zl(h[0]):[];for(var X=-1,ce=Me(B);++X<B;)for(var me=h[X],Te=-1;++Te<B;)Te!=X&&(ce[X]=uf(ce[X]||me,h[Te],v,w));return Zl(mo(ce,1),v,w)}function By(h,v,w){for(var B=-1,X=h.length,ce=v.length,me={};++B<X;){var Te=B<ce?v[B]:i;w(me,h[B],Te)}return me}function gv(h){return fi(h)?h:[]}function vv(h){return typeof h=="function"?h:ha}function Kc(h,v){return Le(h)?h:vm(h,v)?[h]:Vd(sr(h))}var Ef=In;function eu(h,v,w){var B=h.length;return w=w===i?B:w,!v&&w>=B?h:Qa(h,v,w)}var $y=dw||function(h){return po.clearTimeout(h)};function Hy(h,v){if(v)return h.slice();var w=h.length,B=py?py(w):new h.constructor(w);return h.copy(B),B}function Ev(h){var v=new h.constructor(h.byteLength);return new $p(v).set(new $p(h)),v}function Zw(h,v){var w=v?Ev(h.buffer):h.buffer;return new h.constructor(w,h.byteOffset,h.byteLength)}function eO(h){var v=new h.constructor(h.source,pr.exec(h));return v.lastIndex=h.lastIndex,v}function tO(h){return ql?Tr(ql.call(h)):{}}function Wy(h,v){var w=v?Ev(h.buffer):h.buffer;return new h.constructor(w,h.byteOffset,h.length)}function Gy(h,v){if(h!==v){var w=h!==i,B=h===null,X=h===h,ce=la(h),me=v!==i,Te=v===null,we=v===v,He=la(v);if(!Te&&!He&&!ce&&h>v||ce&&me&&we&&!Te&&!He||B&&me&&we||!w&&we||!X)return 1;if(!B&&!ce&&!He&&h<v||He&&w&&X&&!B&&!ce||Te&&w&&X||!me&&X||!we)return-1}return 0}function nO(h,v,w){for(var B=-1,X=h.criteria,ce=v.criteria,me=X.length,Te=w.length;++B<me;){var we=Gy(X[B],ce[B]);if(we){if(B>=Te)return we;var He=w[B];return we*(He=="desc"?-1:1)}}return h.index-v.index}function zy(h,v,w,B){for(var X=-1,ce=h.length,me=w.length,Te=-1,we=v.length,He=Mi(ce-me,0),We=Me(we+He),Ke=!B;++Te<we;)We[Te]=v[Te];for(;++X<me;)(Ke||X<ce)&&(We[w[X]]=h[X]);for(;He--;)We[Te++]=h[X++];return We}function _v(h,v,w,B){for(var X=-1,ce=h.length,me=-1,Te=w.length,we=-1,He=v.length,We=Mi(ce-Te,0),Ke=Me(We+He),pt=!B;++X<We;)Ke[X]=h[X];for(var xt=X;++we<He;)Ke[xt+we]=v[we];for(;++me<Te;)(pt||X<ce)&&(Ke[xt+w[me]]=h[X++]);return Ke}function $o(h,v){var w=-1,B=h.length;for(v||(v=Me(B));++w<B;)v[w]=h[w];return v}function ac(h,v,w,B){var X=!w;w||(w={});for(var ce=-1,me=v.length;++ce<me;){var Te=v[ce],we=B?B(w[Te],h[Te],Te,w,h):i;we===i&&(we=h[Te]),X?Ya(w,Te,we):Dd(w,Te,we)}return w}function lm(h,v){return ac(h,yf(h),v)}function Sv(h,v){return ac(h,oC(h),v)}function _f(h,v){return function(w,B){var X=Le(w)?YI:jw,ce=v?v():{};return X(w,h,$t(B,2),ce)}}function qc(h){return In(function(v,w){var B=-1,X=w.length,ce=X>1?w[X-1]:i,me=X>2?w[2]:i;for(ce=h.length>3&&typeof ce=="function"?(X--,ce):i,me&&Ho(w[0],w[1],me)&&(ce=X<3?i:ce,X=1),v=Tr(v);++B<X;){var Te=w[B];Te&&h(v,Te,B,ce)}return v})}function yv(h,v){return function(w,B){if(w==null)return w;if(!Wo(w))return h(w,B);for(var X=w.length,ce=v?X:-1,me=Tr(w);(v?ce--:++ce<X)&&B(me[ce],ce,me)!==!1;);return w}}function Ky(h){return function(v,w,B){for(var X=-1,ce=Tr(v),me=B(v),Te=me.length;Te--;){var we=me[h?Te:++X];if(w(ce[we],we,ce)===!1)break}return v}}function qy(h,v,w){var B=v&M,X=Md(h);function ce(){var me=this&&this!==po&&this instanceof ce?X:h;return me.apply(B?w:this,arguments)}return ce}function Yy(h){return function(v){v=sr(v);var w=Ga(v)?za(v):i,B=w?w[0]:v.charAt(0),X=w?eu(w,1).join(""):v.slice(1);return B[h]()+X}}function Uu(h){return function(v){return Bg($m(au(v).replace(_d,"")),h,"")}}function Md(h){return function(){var v=arguments;switch(v.length){case 0:return new h;case 1:return new h(v[0]);case 2:return new h(v[0],v[1]);case 3:return new h(v[0],v[1],v[2]);case 4:return new h(v[0],v[1],v[2],v[3]);case 5:return new h(v[0],v[1],v[2],v[3],v[4]);case 6:return new h(v[0],v[1],v[2],v[3],v[4],v[5]);case 7:return new h(v[0],v[1],v[2],v[3],v[4],v[5],v[6])}var w=xd(h.prototype),B=h.apply(w,v);return qr(B)?B:w}}function rO(h,v,w){var B=Md(h);function X(){for(var ce=arguments.length,me=Me(ce),Te=ce,we=cc(X);Te--;)me[Te]=arguments[Te];var He=ce<3&&me[0]!==we&&me[ce-1]!==we?[]:zl(me,we);if(ce-=He.length,ce<w)return Jy(h,v,um,X.placeholder,i,me,He,i,i,w-ce);var We=this&&this!==po&&this instanceof X?B:h;return Oa(We,this,me)}return X}function Cv(h){return function(v,w,B){var X=Tr(v);if(!Wo(v)){var ce=$t(w,3);v=Ai(v),w=function(Te){return ce(X[Te],Te,X)}}var me=h(v,w,B);return me>-1?X[ce?v[me]:me]:i}}function Xy(h){return Yc(function(v){var w=v.length,B=w,X=qa.prototype.thru;for(h&&v.reverse();B--;){var ce=v[B];if(typeof ce!="function")throw new Ka(f);if(X&&!me&&gm(ce)=="wrapper")var me=new qa([],!0)}for(B=me?B:w;++B<w;){ce=v[B];var Te=gm(ce),we=Te=="wrapper"?Iv(ce):i;we&&Nv(we[0])&&we[1]==(G|k|H|K)&&!we[4].length&&we[9]==1?me=me[gm(we[0])].apply(me,we[3]):me=ce.length==1&&Nv(ce)?me[Te]():me.thru(ce)}return function(){var He=arguments,We=He[0];if(me&&He.length==1&&Le(We))return me.plant(We).value();for(var Ke=0,pt=w?v[Ke].apply(this,He):We;++Ke<w;)pt=v[Ke].call(this,pt);return pt}})}function um(h,v,w,B,X,ce,me,Te,we,He){var We=v&G,Ke=v&M,pt=v&D,xt=v&(k|V),Ht=v&Q,Wt=pt?i:Md(h);function qt(){for(var An=arguments.length,Fn=Me(An),Ni=An;Ni--;)Fn[Ni]=arguments[Ni];if(xt)var go=cc(qt),fa=sy(Fn,go);if(B&&(Fn=zy(Fn,B,X,xt)),ce&&(Fn=_v(Fn,ce,me,xt)),An-=fa,xt&&An<He){var pi=zl(Fn,go);return Jy(h,v,um,qt.placeholder,w,Fn,pi,Te,we,He-An)}var As=Ke?w:this,fc=pt?As[h]:h;return An=Fn.length,Te?Fn=dO(Fn,Te):Ht&&An>1&&Fn.reverse(),We&&we<An&&(Fn.length=we),this&&this!==po&&this instanceof qt&&(fc=Wt||Md(fc)),fc.apply(As,Fn)}return qt}function Tv(h,v){return function(w,B){return zw(w,h,v(B),{})}}function dm(h,v){return function(w,B){var X;if(w===i&&B===i)return v;if(w!==i&&(X=w),B!==i){if(X===i)return B;typeof w=="string"||typeof B=="string"?(w=ca(w),B=ca(B)):(w=am(w),B=am(B)),X=h(w,B)}return X}}function bv(h){return Yc(function(v){return v=Rn(v,wi($t())),In(function(w){var B=this;return h(v,function(X){return Oa(X,B,w)})})})}function hm(h,v){v=v===i?" ":ca(v);var w=v.length;if(w<2)return w?vf(v,h):v;var B=vf(v,zp(h/Rd(v)));return Ga(v)?eu(za(B),0,h).join(""):B.slice(0,h)}function iO(h,v,w,B){var X=v&M,ce=Md(h);function me(){for(var Te=-1,we=arguments.length,He=-1,We=B.length,Ke=Me(We+we),pt=this&&this!==po&&this instanceof me?ce:h;++He<We;)Ke[He]=B[He];for(;we--;)Ke[He++]=arguments[++Te];return Oa(pt,X?w:this,Ke)}return me}function Rv(h){return function(v,w,B){return B&&typeof B!="number"&&Ho(v,w,B)&&(w=B=i),v=es(v),w===i?(w=v,v=0):w=es(w),B=B===i?v<w?1:-1:es(B),nm(v,w,B,h)}}function fm(h){return function(v,w){return typeof v=="string"&&typeof w=="string"||(v=ua(v),w=ua(w)),h(v,w)}}function Jy(h,v,w,B,X,ce,me,Te,we,He){var We=v&k,Ke=We?me:i,pt=We?i:me,xt=We?ce:i,Ht=We?i:ce;v|=We?H:$,v&=~(We?$:H),v&x||(v&=~(M|D));var Wt=[h,v,X,xt,Ke,Ht,pt,Te,we,He],qt=w.apply(i,Wt);return Nv(h)&&Fd(qt,Wt),qt.placeholder=B,Em(qt,h,v)}function pm(h){var v=ki[h];return function(w,B){if(w=ua(w),B=B==null?0:qi(Sn(B),292),B&&gy(w)){var X=(sr(w)+"e").split("e"),ce=v(X[0]+"e"+(+X[1]+B));return X=(sr(ce)+"e").split("e"),+(X[0]+"e"+(+X[1]-B))}return v(w)}}var Qy=Nu&&1/Qh(new Nu([,-0]))[1]==Se?function(h){return new Nu(h)}:su;function Zy(h){return function(v){var w=wo(v);return w==it?Lp(v):w==ht?uy(v):ZI(v,h(v))}}function sc(h,v,w,B,X,ce,me,Te){var we=v&D;if(!we&&typeof h!="function")throw new Ka(f);var He=B?B.length:0;if(He||(v&=~(H|$),B=X=i),me=me===i?me:Mi(Sn(me),0),Te=Te===i?Te:Sn(Te),He-=X?X.length:0,v&$){var We=B,Ke=X;B=X=i}var pt=we?i:Iv(h),xt=[h,v,w,B,X,We,Ke,ce,me,Te];if(pt&&Pv(xt,pt),h=xt[0],v=xt[1],w=xt[2],B=xt[3],X=xt[4],Te=xt[9]=xt[9]===i?we?0:h.length:Mi(xt[9]-He,0),!Te&&v&(k|V)&&(v&=~(k|V)),!v||v==M)var Ht=qy(h,v,w);else v==k||v==V?Ht=rO(h,v,Te):(v==H||v==(M|H))&&!X.length?Ht=iO(h,v,w,B):Ht=um.apply(i,xt);var Wt=pt?pv:Fd;return Em(Wt(Ht,xt),h,v)}function eC(h,v,w,B){return h===i||xa(h,wd[w])&&!tr.call(B,w)?v:h}function tC(h,v,w,B,X,ce){return qr(h)&&qr(v)&&(ce.set(v,h),Ld(h,v,i,tC,ce),ce.delete(v)),h}function nC(h){return Gd(h)?i:h}function rC(h,v,w,B,X,ce){var me=w&O,Te=h.length,we=v.length;if(Te!=we&&!(me&&we>Te))return!1;var He=ce.get(h),We=ce.get(v);if(He&&We)return He==v&&We==h;var Ke=-1,pt=!0,xt=w&N?new Pu:i;for(ce.set(h,v),ce.set(v,h);++Ke<Te;){var Ht=h[Ke],Wt=v[Ke];if(B)var qt=me?B(Wt,Ht,Ke,v,h,ce):B(Ht,Wt,Ke,h,v,ce);if(qt!==i){if(qt)continue;pt=!1;break}if(xt){if(!Hg(v,function(An,Fn){if(!Jh(xt,Fn)&&(Ht===An||X(Ht,An,w,B,ce)))return xt.push(Fn)})){pt=!1;break}}else if(!(Ht===Wt||X(Ht,Wt,w,B,ce))){pt=!1;break}}return ce.delete(h),ce.delete(v),pt}function oO(h,v,w,B,X,ce,me){switch(w){case Zr:if(h.byteLength!=v.byteLength||h.byteOffset!=v.byteOffset)return!1;h=h.buffer,v=v.buffer;case Hn:return!(h.byteLength!=v.byteLength||!ce(new $p(h),new $p(v)));case qe:case wt:case Mt:return xa(+h,+v);case _t:return h.name==v.name&&h.message==v.message;case at:case Ot:return h==v+"";case it:var Te=Lp;case ht:var we=B&O;if(Te||(Te=Qh),h.size!=v.size&&!we)return!1;var He=me.get(h);if(He)return He==v;B|=N,me.set(h,v);var We=rC(Te(h),Te(v),B,X,ce,me);return me.delete(h),We;case Vt:if(ql)return ql.call(h)==ql.call(v)}return!1}function iC(h,v,w,B,X,ce){var me=w&O,Te=mm(h),we=Te.length,He=mm(v),We=He.length;if(we!=We&&!me)return!1;for(var Ke=we;Ke--;){var pt=Te[Ke];if(!(me?pt in v:tr.call(v,pt)))return!1}var xt=ce.get(h),Ht=ce.get(v);if(xt&&Ht)return xt==v&&Ht==h;var Wt=!0;ce.set(h,v),ce.set(v,h);for(var qt=me;++Ke<we;){pt=Te[Ke];var An=h[pt],Fn=v[pt];if(B)var Ni=me?B(Fn,An,pt,v,h,ce):B(An,Fn,pt,h,v,ce);if(!(Ni===i?An===Fn||X(An,Fn,w,B,ce):Ni)){Wt=!1;break}qt||(qt=pt=="constructor")}if(Wt&&!qt){var go=h.constructor,fa=v.constructor;go!=fa&&"constructor"in h&&"constructor"in v&&!(typeof go=="function"&&go instanceof go&&typeof fa=="function"&&fa instanceof fa)&&(Wt=!1)}return ce.delete(h),ce.delete(v),Wt}function Yc(h){return bf(hC(h,i,EC),h+"")}function mm(h){return Oy(h,Ai,yf)}function Sf(h){return Oy(h,Ao,oC)}var Iv=af?function(h){return af.get(h)}:su;function gm(h){for(var v=h.name+"",w=Nd[v],B=tr.call(Nd,v)?w.length:0;B--;){var X=w[B],ce=X.func;if(ce==null||ce==h)return X.name}return v}function cc(h){var v=tr.call(ae,"placeholder")?ae:h;return v.placeholder}function $t(){var h=ae.iteratee||Xd;return h=h===Xd?xy:h,arguments.length?h(arguments[0],arguments[1]):h}function tu(h,v){var w=h.__data__;return cO(v)?w[typeof v=="string"?"string":"hash"]:w.map}function nu(h){for(var v=Ai(h),w=v.length;w--;){var B=v[w],X=h[B];v[w]=[B,X,uC(X)]}return v}function ru(h,v){var w=Dp(h,v);return cv(w)?w:i}function wv(h){var v=tr.call(h,Au),w=h[Au];try{h[Au]=i;var B=!0}catch{}var X=jp.call(h);return B&&(v?h[Au]=w:delete h[Au]),X}var yf=Jg?function(h){return h==null?[]:(h=Tr(h),Aa(Jg(h),function(v){return Hp.call(h,v)}))}:Wm,oC=Jg?function(h){for(var v=[];h;)Hl(v,yf(h)),h=ef(h);return v}:Wm,wo=Bo;(Zg&&wo(new Zg(new ArrayBuffer(1)))!=Zr||nf&&wo(new nf)!=it||Ad&&wo(Ad.resolve())!=ft||Nu&&wo(new Nu)!=ht||rf&&wo(new rf)!=Kt)&&(wo=function(h){var v=Bo(h),w=v==Ft?h.constructor:i,B=w?ws(w):"";if(B)switch(B){case _w:return Zr;case Sw:return it;case Ey:return ft;case ev:return ht;case _y:return Kt}return v});function aO(h,v,w){for(var B=-1,X=w.length;++B<X;){var ce=w[B],me=ce.size;switch(ce.type){case"drop":h+=me;break;case"dropRight":v-=me;break;case"take":v=qi(v,h+me);break;case"takeRight":h=Mi(h,v-me);break}}return{start:h,end:v}}function aC(h){var v=h.match(Uo);return v?v[1].split(Fo):[]}function sC(h,v,w){v=Kc(v,h);for(var B=-1,X=v.length,ce=!1;++B<X;){var me=Oo(v[B]);if(!(ce=h!=null&&w(h,me)))break;h=h[me]}return ce||++B!=X?ce:(X=h==null?0:h.length,!!X&&Wd(X)&&Xc(me,X)&&(Le(h)||ou(h)))}function sO(h){var v=h.length,w=new h.constructor(v);return v&&typeof h[0]=="string"&&tr.call(h,"index")&&(w.index=h.index,w.input=h.input),w}function Ov(h){return typeof h.constructor=="function"&&!Ud(h)?xd(ef(h)):{}}function Av(h,v,w){var B=h.constructor;switch(v){case Hn:return Ev(h);case qe:case wt:return new B(+h);case Zr:return Zw(h,w);case yr:case or:case Ln:case Gr:case Wn:case hn:case fn:case Ro:case zi:return Wy(h,w);case it:return new B;case Mt:case Ot:return new B(h);case at:return eO(h);case ht:return new B;case Vt:return tO(h)}}function cC(h,v){var w=v.length;if(!w)return h;var B=w-1;return v[B]=(w>1?"& ":"")+v[B],v=v.join(w>2?", ":" "),h.replace(Io,`{
/* [wrapped with `+v+`] */
`)}function Na(h){return Le(h)||ou(h)||!!(my&&h&&h[my])}function Xc(h,v){var w=typeof h;return v=v??ve,!!v&&(w=="number"||w!="symbol"&&wa.test(h))&&h>-1&&h%1==0&&h<v}function Ho(h,v,w){if(!qr(w))return!1;var B=typeof v;return(B=="number"?Wo(w)&&Xc(v,w.length):B=="string"&&v in w)?xa(w[v],h):!1}function vm(h,v){if(Le(h))return!1;var w=typeof h;return w=="number"||w=="symbol"||w=="boolean"||h==null||la(h)?!0:Pn.test(h)||!_n.test(h)||v!=null&&h in Tr(v)}function cO(h){var v=typeof h;return v=="string"||v=="number"||v=="symbol"||v=="boolean"?h!=="__proto__":h===null}function Nv(h){var v=gm(h),w=ae[v];if(typeof w!="function"||!(v in kn.prototype))return!1;if(h===w)return!0;var B=Iv(w);return!!B&&h===B[0]}function lC(h){return!!hy&&hy in h}var lO=Fp?dc:xf;function Ud(h){var v=h&&h.constructor,w=typeof v=="function"&&v.prototype||wd;return h===w}function uC(h){return h===h&&!qr(h)}function dC(h,v){return function(w){return w==null?!1:w[h]===v&&(v!==i||h in Tr(w))}}function xv(h){var v=Nm(h,function(B){return w.size===E&&w.clear(),B}),w=v.cache;return v}function Pv(h,v){var w=h[1],B=v[1],X=w|B,ce=X<(M|D|G),me=B==G&&w==k||B==G&&w==K&&h[7].length<=v[8]||B==(G|K)&&v[7].length<=v[8]&&w==k;if(!(ce||me))return h;B&M&&(h[2]=v[2],X|=w&M?0:x);var Te=v[3];if(Te){var we=h[3];h[3]=we?zy(we,Te,v[4]):Te,h[4]=we?zl(h[3],y):v[4]}return Te=v[5],Te&&(we=h[5],h[5]=we?_v(we,Te,v[6]):Te,h[6]=we?zl(h[5],y):v[6]),Te=v[7],Te&&(h[7]=Te),B&G&&(h[8]=h[8]==null?v[8]:qi(h[8],v[8])),h[9]==null&&(h[9]=v[9]),h[0]=v[0],h[1]=X,h}function uO(h){var v=[];if(h!=null)for(var w in Tr(h))v.push(w);return v}function Dv(h){return jp.call(h)}function hC(h,v,w){return v=Mi(v===i?h.length-1:v,0),function(){for(var B=arguments,X=-1,ce=Mi(B.length-v,0),me=Me(ce);++X<ce;)me[X]=B[v+X];X=-1;for(var Te=Me(v+1);++X<v;)Te[X]=B[X];return Te[v]=w(me),Oa(h,this,Te)}}function Lv(h,v){return v.length<2?h:Lu(h,Qa(v,0,-1))}function dO(h,v){for(var w=h.length,B=qi(v.length,w),X=$o(h);B--;){var ce=v[B];h[B]=Xc(ce,w)?X[ce]:i}return h}function Cf(h,v){if(!(v==="constructor"&&typeof h[v]=="function")&&v!="__proto__")return h[v]}var Fd=kv(pv),Tf=fw||function(h,v){return po.setTimeout(h,v)},bf=kv(Jw);function Em(h,v,w){var B=v+"";return bf(h,cC(B,jd(aC(B),w)))}function kv(h){var v=0,w=0;return function(){var B=gw(),X=Y-(B-w);if(w=B,X>0){if(++v>=J)return arguments[0]}else v=0;return h.apply(i,arguments)}}function Rf(h,v){var w=-1,B=h.length,X=B-1;for(v=v===i?B:v;++w<v;){var ce=tm(w,X),me=h[ce];h[ce]=h[w],h[w]=me}return h.length=v,h}var Vd=xv(function(h){var v=[];return h.charCodeAt(0)===46&&v.push(""),h.replace(zr,function(w,B,X,ce){v.push(X?ce.replace(Vc,"$1"):B||w)}),v});function Oo(h){if(typeof h=="string"||la(h))return h;var v=h+"";return v=="0"&&1/h==-Se?"-0":v}function ws(h){if(h!=null){try{return Vp.call(h)}catch{}try{return h+""}catch{}}return""}function jd(h,v){return Wa(ge,function(w){var B="_."+w[0];v&w[1]&&!Xh(h,B)&&h.push(B)}),h.sort()}function _m(h){if(h instanceof kn)return h.clone();var v=new qa(h.__wrapped__,h.__chain__);return v.__actions__=$o(h.__actions__),v.__index__=h.__index__,v.__values__=h.__values__,v}function Mv(h,v,w){(w?Ho(h,v,w):v===i)?v=1:v=Mi(Sn(v),0);var B=h==null?0:h.length;if(!B||v<1)return[];for(var X=0,ce=0,me=Me(zp(B/v));X<B;)me[ce++]=Qa(h,X,X+=v);return me}function Uv(h){for(var v=-1,w=h==null?0:h.length,B=0,X=[];++v<w;){var ce=h[v];ce&&(X[B++]=ce)}return X}function fC(){var h=arguments.length;if(!h)return[];for(var v=Me(h-1),w=arguments[0],B=h;B--;)v[B-1]=arguments[B];return Hl(Le(w)?$o(w):[w],mo(v,1))}var pC=In(function(h,v){return fi(h)?uf(h,mo(v,1,fi,!0)):[]}),hO=In(function(h,v){var w=Za(v);return fi(w)&&(w=i),fi(h)?uf(h,mo(v,1,fi,!0),$t(w,2)):[]}),fO=In(function(h,v){var w=Za(v);return fi(w)&&(w=i),fi(h)?uf(h,mo(v,1,fi,!0),i,w):[]});function pO(h,v,w){var B=h==null?0:h.length;return B?(v=w||v===i?1:Sn(v),Qa(h,v<0?0:v,B)):[]}function Fu(h,v,w){var B=h==null?0:h.length;return B?(v=w||v===i?1:Sn(v),v=B-v,Qa(h,0,v<0?0:v)):[]}function mC(h,v){return h&&h.length?cm(h,$t(v,3),!0,!0):[]}function mO(h,v){return h&&h.length?cm(h,$t(v,3),!0):[]}function Fv(h,v,w,B){var X=h==null?0:h.length;return X?(w&&typeof w!="number"&&Ho(h,v,w)&&(w=0,B=X),Ww(h,v,w,B)):[]}function gC(h,v,w){var B=h==null?0:h.length;if(!B)return-1;var X=w==null?0:Sn(w);return X<0&&(X=Mi(B+X,0)),Op(h,$t(v,3),X)}function vC(h,v,w){var B=h==null?0:h.length;if(!B)return-1;var X=B-1;return w!==i&&(X=Sn(w),X=w<0?Mi(B+X,0):qi(X,B-1)),Op(h,$t(v,3),X,!0)}function EC(h){var v=h==null?0:h.length;return v?mo(h,1):[]}function Vv(h){var v=h==null?0:h.length;return v?mo(h,Se):[]}function _C(h,v){var w=h==null?0:h.length;return w?(v=v===i?1:Sn(v),mo(h,v)):[]}function SC(h){for(var v=-1,w=h==null?0:h.length,B={};++v<w;){var X=h[v];B[X[0]]=X[1]}return B}function jv(h){return h&&h.length?h[0]:i}function Sm(h,v,w){var B=h==null?0:h.length;if(!B)return-1;var X=w==null?0:Sn(w);return X<0&&(X=Mi(B+X,0)),bd(h,v,X)}function yC(h){var v=h==null?0:h.length;return v?Qa(h,0,-1):[]}var CC=In(function(h){var v=Rn(h,gv);return v.length&&v[0]===h[0]?pf(v):[]}),gO=In(function(h){var v=Za(h),w=Rn(h,gv);return v===Za(w)?v=i:w.pop(),w.length&&w[0]===h[0]?pf(w,$t(v,2)):[]}),Bd=In(function(h){var v=Za(h),w=Rn(h,gv);return v=typeof v=="function"?v:i,v&&w.pop(),w.length&&w[0]===h[0]?pf(w,i,v):[]});function TC(h,v){return h==null?"":Qg.call(h,v)}function Za(h){var v=h==null?0:h.length;return v?h[v-1]:i}function vO(h,v,w){var B=h==null?0:h.length;if(!B)return-1;var X=B;return w!==i&&(X=Sn(w),X=X<0?Mi(B+X,0):qi(X,B-1)),v===v?nw(h,v,X):Op(h,iy,X,!0)}function EO(h,v){return h&&h.length?Ql(h,Sn(v)):i}var _O=In(Bv);function Bv(h,v){return h&&h.length&&v&&v.length?zc(h,v):h}function SO(h,v,w){return h&&h.length&&v&&v.length?zc(h,v,$t(w,2)):h}function ym(h,v,w){return h&&h.length&&v&&v.length?zc(h,v,i,w):h}var bC=Yc(function(h,v){var w=h==null?0:h.length,B=Yp(h,v);return fv(h,Rn(v,function(X){return Xc(X,w)?+X:X}).sort(Gy)),B});function $v(h,v){var w=[];if(!(h&&h.length))return w;var B=-1,X=[],ce=h.length;for(v=$t(v,3);++B<ce;){var me=h[B];v(me,B,h)&&(w.push(me),X.push(B))}return fv(h,X),w}function Cm(h){return h==null?h:Ew.call(h)}function Hv(h,v,w){var B=h==null?0:h.length;return B?(w&&typeof w!="number"&&Ho(h,v,w)?(v=0,w=B):(v=v==null?0:Sn(v),w=w===i?B:Sn(w)),Qa(h,v,w)):[]}function yO(h,v){return im(h,v)}function Tm(h,v,w){return om(h,v,$t(w,2))}function Jc(h,v){var w=h==null?0:h.length;if(w){var B=im(h,v);if(B<w&&xa(h[B],v))return B}return-1}function CO(h,v){return im(h,v,!0)}function iu(h,v,w){return om(h,v,$t(w,2),!0)}function Wv(h,v){var w=h==null?0:h.length;if(w){var B=im(h,v,!0)-1;if(xa(h[B],v))return B}return-1}function TO(h){return h&&h.length?Fy(h):[]}function bO(h,v){return h&&h.length?Fy(h,$t(v,2)):[]}function RO(h){var v=h==null?0:h.length;return v?Qa(h,1,v):[]}function Gv(h,v,w){return h&&h.length?(v=w||v===i?1:Sn(v),Qa(h,0,v<0?0:v)):[]}function bm(h,v,w){var B=h==null?0:h.length;return B?(v=w||v===i?1:Sn(v),v=B-v,Qa(h,v<0?0:v,B)):[]}function IO(h,v){return h&&h.length?cm(h,$t(v,3),!1,!0):[]}function wO(h,v){return h&&h.length?cm(h,$t(v,3)):[]}var OO=In(function(h){return Zl(mo(h,1,fi,!0))}),RC=In(function(h){var v=Za(h);return fi(v)&&(v=i),Zl(mo(h,1,fi,!0),$t(v,2))}),AO=In(function(h){var v=Za(h);return v=typeof v=="function"?v:i,Zl(mo(h,1,fi,!0),i,v)});function NO(h){return h&&h.length?Zl(h):[]}function IC(h,v){return h&&h.length?Zl(h,$t(v,2)):[]}function zv(h,v){return v=typeof v=="function"?v:i,h&&h.length?Zl(h,i,v):[]}function Kv(h){if(!(h&&h.length))return[];var v=0;return h=Aa(h,function(w){if(fi(w))return v=Mi(w.length,v),!0}),xp(v,function(w){return Rn(h,Gg(w))})}function wC(h,v){if(!(h&&h.length))return[];var w=Kv(h);return v==null?w:Rn(w,function(B){return Oa(v,i,B)})}var OC=In(function(h,v){return fi(h)?uf(h,v):[]}),qv=In(function(h){return mv(Aa(h,fi))}),xO=In(function(h){var v=Za(h);return fi(v)&&(v=i),mv(Aa(h,fi),$t(v,2))}),Yv=In(function(h){var v=Za(h);return v=typeof v=="function"?v:i,mv(Aa(h,fi),i,v)}),PO=In(Kv);function DO(h,v){return By(h||[],v||[],Dd)}function Rm(h,v){return By(h||[],v||[],Mu)}var AC=In(function(h){var v=h.length,w=v>1?h[v-1]:i;return w=typeof w=="function"?(h.pop(),w):i,wC(h,w)});function NC(h){var v=ae(h);return v.__chain__=!0,v}function lc(h,v){return v(h),h}function If(h,v){return v(h)}var LO=Yc(function(h){var v=h.length,w=v?h[0]:0,B=this.__wrapped__,X=function(ce){return Yp(ce,h)};return v>1||this.__actions__.length||!(B instanceof kn)||!Xc(w)?this.thru(X):(B=B.slice(w,+w+(v?1:0)),B.__actions__.push({func:If,args:[X],thisArg:i}),new qa(B,this.__chain__).thru(function(ce){return v&&!ce.length&&ce.push(i),ce}))});function kO(){return NC(this)}function MO(){return new qa(this.value(),this.__chain__)}function uc(){this.__values__===i&&(this.__values__=hE(this.value()));var h=this.__index__>=this.__values__.length,v=h?i:this.__values__[this.__index__++];return{done:h,value:v}}function Im(){return this}function xC(h){for(var v,w=this;w instanceof lf;){var B=_m(w);B.__index__=0,B.__values__=i,v?X.__wrapped__=B:v=B;var X=B;w=w.__wrapped__}return X.__wrapped__=h,v}function Xv(){var h=this.__wrapped__;if(h instanceof kn){var v=h;return this.__actions__.length&&(v=new kn(this)),v=v.reverse(),v.__actions__.push({func:If,args:[Cm],thisArg:i}),new qa(v,this.__chain__)}return this.thru(Cm)}function Jv(){return jy(this.__wrapped__,this.__actions__)}var $d=_f(function(h,v,w){tr.call(h,w)?++h[w]:Ya(h,w,1)});function UO(h,v,w){var B=Le(h)?ny:Hw;return w&&Ho(h,v,w)&&(v=i),B(h,$t(v,3))}function FO(h,v){var w=Le(h)?Aa:df;return w(h,$t(v,3))}var PC=Cv(gC),DC=Cv(vC);function wm(h,v){return mo(Qc(h,v),1)}function VO(h,v){return mo(Qc(h,v),Se)}function LC(h,v,w){return w=w===i?1:Sn(w),mo(Qc(h,v),w)}function Qv(h,v){var w=Le(h)?Wa:Xl;return w(h,$t(v,3))}function Zv(h,v){var w=Le(h)?Td:wy;return w(h,$t(v,3))}var kC=_f(function(h,v,w){tr.call(h,w)?h[w].push(v):Ya(h,w,[v])});function jO(h,v,w,B){h=Wo(h)?h:ju(h),w=w&&!B?Sn(w):0;var X=h.length;return w<0&&(w=Mi(X+w,0)),Of(h)?w<=X&&h.indexOf(v,w)>-1:!!X&&bd(h,v,w)>-1}var MC=In(function(h,v,w){var B=-1,X=typeof v=="function",ce=Wo(h)?Me(h.length):[];return Xl(h,function(me){ce[++B]=X?Oa(v,me,w):ku(me,v,w)}),ce}),BO=_f(function(h,v,w){Ya(h,w,v)});function Qc(h,v){var w=Le(h)?Rn:Py;return w(h,$t(v,3))}function Hd(h,v,w,B){return h==null?[]:(Le(v)||(v=v==null?[]:[v]),w=B?i:w,Le(w)||(w=w==null?[]:[w]),Ly(h,v,w))}var eE=_f(function(h,v,w){h[w?0:1].push(v)},function(){return[[],[]]});function $O(h,v,w){var B=Le(h)?Bg:Ap,X=arguments.length<3;return B(h,$t(v,4),w,X,Xl)}function HO(h,v,w){var B=Le(h)?$g:Ap,X=arguments.length<3;return B(h,$t(v,4),w,X,wy)}function WO(h,v){var w=Le(h)?Aa:df;return w(h,wf($t(v,3)))}function GO(h){var v=Le(h)?Ry:Uy;return v(h)}function zO(h,v,w){(w?Ho(h,v,w):v===i)?v=1:v=Sn(v);var B=Le(h)?Fw:Xw;return B(h,v)}function KO(h){var v=Le(h)?Vw:rm;return v(h)}function qO(h){if(h==null)return 0;if(Wo(h))return Of(h)?Rd(h):h.length;var v=wo(h);return v==it||v==ht?h.size:uv(h).length}function YO(h,v,w){var B=Le(h)?Hg:Qw;return w&&Ho(h,v,w)&&(v=i),B(h,$t(v,3))}var XO=In(function(h,v){if(h==null)return[];var w=v.length;return w>1&&Ho(h,v[0],v[1])?v=[]:w>2&&Ho(v[0],v[1],v[2])&&(v=[v[0]]),Ly(h,mo(v,1),[])}),Om=hw||function(){return po.Date.now()};function JO(h,v){if(typeof v!="function")throw new Ka(f);return h=Sn(h),function(){if(--h<1)return v.apply(this,arguments)}}function tE(h,v,w){return v=w?i:v,v=h&&v==null?h.length:v,sc(h,G,i,i,i,i,v)}function nE(h,v){var w;if(typeof v!="function")throw new Ka(f);return h=Sn(h),function(){return--h>0&&(w=v.apply(this,arguments)),h<=1&&(v=i),w}}var rE=In(function(h,v,w){var B=M;if(w.length){var X=zl(w,cc(rE));B|=H}return sc(h,B,v,w,X)}),UC=In(function(h,v,w){var B=M|D;if(w.length){var X=zl(w,cc(UC));B|=H}return sc(v,B,h,w,X)});function FC(h,v,w){v=w?i:v;var B=sc(h,k,i,i,i,i,i,v);return B.placeholder=FC.placeholder,B}function iE(h,v,w){v=w?i:v;var B=sc(h,V,i,i,i,i,i,v);return B.placeholder=iE.placeholder,B}function Am(h,v,w){var B,X,ce,me,Te,we,He=0,We=!1,Ke=!1,pt=!0;if(typeof h!="function")throw new Ka(f);v=ua(v)||0,qr(w)&&(We=!!w.leading,Ke="maxWait"in w,ce=Ke?Mi(ua(w.maxWait)||0,v):ce,pt="trailing"in w?!!w.trailing:pt);function xt(pi){var As=B,fc=X;return B=X=i,He=pi,me=h.apply(fc,As),me}function Ht(pi){return He=pi,Te=Tf(An,v),We?xt(pi):me}function Wt(pi){var As=pi-we,fc=pi-He,kE=v-As;return Ke?qi(kE,ce-fc):kE}function qt(pi){var As=pi-we,fc=pi-He;return we===i||As>=v||As<0||Ke&&fc>=ce}function An(){var pi=Om();if(qt(pi))return Fn(pi);Te=Tf(An,Wt(pi))}function Fn(pi){return Te=i,pt&&B?xt(pi):(B=X=i,me)}function Ni(){Te!==i&&$y(Te),He=0,B=we=X=Te=i}function go(){return Te===i?me:Fn(Om())}function fa(){var pi=Om(),As=qt(pi);if(B=arguments,X=this,we=pi,As){if(Te===i)return Ht(we);if(Ke)return $y(Te),Te=Tf(An,v),xt(we)}return Te===i&&(Te=Tf(An,v)),me}return fa.cancel=Ni,fa.flush=go,fa}var QO=In(function(h,v){return Iy(h,1,v)}),ZO=In(function(h,v,w){return Iy(h,ua(v)||0,w)});function eA(h){return sc(h,Q)}function Nm(h,v){if(typeof h!="function"||v!=null&&typeof v!="function")throw new Ka(f);var w=function(){var B=arguments,X=v?v.apply(this,B):B[0],ce=w.cache;if(ce.has(X))return ce.get(X);var me=h.apply(this,B);return w.cache=ce.set(X,me)||ce,me};return w.cache=new(Nm.Cache||Gc),w}Nm.Cache=Gc;function wf(h){if(typeof h!="function")throw new Ka(f);return function(){var v=arguments;switch(v.length){case 0:return!h.call(this);case 1:return!h.call(this,v[0]);case 2:return!h.call(this,v[0],v[1]);case 3:return!h.call(this,v[0],v[1],v[2])}return!h.apply(this,v)}}function tA(h){return nE(2,h)}var VC=Ef(function(h,v){v=v.length==1&&Le(v[0])?Rn(v[0],wi($t())):Rn(mo(v,1),wi($t()));var w=v.length;return In(function(B){for(var X=-1,ce=qi(B.length,w);++X<ce;)B[X]=v[X].call(this,B[X]);return Oa(h,this,B)})}),oE=In(function(h,v){var w=zl(v,cc(oE));return sc(h,H,i,v,w)}),jC=In(function(h,v){var w=zl(v,cc(jC));return sc(h,$,i,v,w)}),BC=Yc(function(h,v){return sc(h,K,i,i,i,v)});function nA(h,v){if(typeof h!="function")throw new Ka(f);return v=v===i?v:Sn(v),In(h,v)}function $C(h,v){if(typeof h!="function")throw new Ka(f);return v=v==null?0:Mi(Sn(v),0),In(function(w){var B=w[v],X=eu(w,0,v);return B&&Hl(X,B),Oa(h,this,X)})}function rA(h,v,w){var B=!0,X=!0;if(typeof h!="function")throw new Ka(f);return qr(w)&&(B="leading"in w?!!w.leading:B,X="trailing"in w?!!w.trailing:X),Am(h,v,{leading:B,maxWait:v,trailing:X})}function iA(h){return tE(h,1)}function oA(h,v){return oE(vv(v),h)}function aA(){if(!arguments.length)return[];var h=arguments[0];return Le(h)?h:[h]}function sA(h){return Xa(h,P)}function cA(h,v){return v=typeof v=="function"?v:i,Xa(h,P,v)}function lA(h){return Xa(h,T|P)}function HC(h,v){return v=typeof v=="function"?v:i,Xa(h,T|P,v)}function WC(h,v){return v==null||Du(h,v,Ai(v))}function xa(h,v){return h===v||h!==h&&v!==v}var GC=fm(ov),aE=fm(function(h,v){return h>=v}),ou=Ay(function(){return arguments}())?Ay:function(h){return oi(h)&&tr.call(h,"callee")&&!Hp.call(h,"callee")},Le=Me.isArray,zC=QS?wi(QS):em;function Wo(h){return h!=null&&Wd(h.length)&&!dc(h)}function fi(h){return oi(h)&&Wo(h)}function KC(h){return h===!0||h===!1||oi(h)&&Bo(h)==qe}var Zc=pw||xf,qC=ZS?wi(ZS):mf;function YC(h){return oi(h)&&h.nodeType===1&&!Gd(h)}function XC(h){if(h==null)return!0;if(Wo(h)&&(Le(h)||typeof h=="string"||typeof h.splice=="function"||Zc(h)||Vu(h)||ou(h)))return!h.length;var v=wo(h);if(v==it||v==ht)return!h.size;if(Ud(h))return!uv(h).length;for(var w in h)if(tr.call(h,w))return!1;return!0}function JC(h,v){return Jl(h,v)}function sE(h,v,w){w=typeof w=="function"?w:i;var B=w?w(h,v):i;return B===i?Jl(h,v,i,w):!!B}function xm(h){if(!oi(h))return!1;var v=Bo(h);return v==_t||v==kt||typeof h.message=="string"&&typeof h.name=="string"&&!Gd(h)}function QC(h){return typeof h=="number"&&gy(h)}function dc(h){if(!qr(h))return!1;var v=Bo(h);return v==vt||v==At||v==ot||v==dt}function cE(h){return typeof h=="number"&&h==Sn(h)}function Wd(h){return typeof h=="number"&&h>-1&&h%1==0&&h<=ve}function qr(h){var v=typeof h;return h!=null&&(v=="object"||v=="function")}function oi(h){return h!=null&&typeof h=="object"}var lE=$l?wi($l):Kw;function ZC(h,v){return h===v||sv(h,v,nu(v))}function eT(h,v,w){return w=typeof w=="function"?w:i,sv(h,v,nu(v),w)}function tT(h){return uE(h)&&h!=+h}function nT(h){if(lO(h))throw new cn(u);return cv(h)}function rT(h){return h===null}function iT(h){return h==null}function uE(h){return typeof h=="number"||oi(h)&&Bo(h)==Mt}function Gd(h){if(!oi(h)||Bo(h)!=Ft)return!1;var v=ef(h);if(v===null)return!0;var w=tr.call(v,"constructor")&&v.constructor;return typeof w=="function"&&w instanceof w&&Vp.call(w)==fy}var Pm=Yh?wi(Yh):qw;function oT(h){return cE(h)&&h>=-ve&&h<=ve}var dE=ey?wi(ey):Ny;function Of(h){return typeof h=="string"||!Le(h)&&oi(h)&&Bo(h)==Ot}function la(h){return typeof h=="symbol"||oi(h)&&Bo(h)==Vt}var Vu=ty?wi(ty):lv;function aT(h){return h===i}function sT(h){return oi(h)&&wo(h)==Kt}function uA(h){return oi(h)&&Bo(h)==mn}var dA=fm(gf),hA=fm(function(h,v){return h<=v});function hE(h){if(!h)return[];if(Wo(h))return Of(h)?za(h):$o(h);if(Ou&&h[Ou])return tw(h[Ou]());var v=wo(h),w=v==it?Lp:v==ht?Qh:ju;return w(h)}function es(h){if(!h)return h===0?h:0;if(h=ua(h),h===Se||h===-Se){var v=h<0?-1:1;return v*Re}return h===h?h:0}function Sn(h){var v=es(h),w=v%1;return v===v?w?v-w:v:0}function cT(h){return h?oc(Sn(h),0,pe):0}function ua(h){if(typeof h=="number")return h;if(la(h))return Ce;if(qr(h)){var v=typeof h.valueOf=="function"?h.valueOf():h;h=qr(v)?v+"":v}if(typeof h!="string")return h===0?h:+h;h=oy(h);var w=ho.test(h);return w||kl.test(h)?qI(h.slice(2),w?2:8):Dl.test(h)?Ce:+h}function lT(h){return ac(h,Ao(h))}function fA(h){return h?oc(Sn(h),-ve,ve):h===0?h:0}function sr(h){return h==null?"":ca(h)}var uT=qc(function(h,v){if(Ud(v)||Wo(v)){ac(v,Ai(v),h);return}for(var w in v)tr.call(v,w)&&Dd(h,w,v[w])}),dT=qc(function(h,v){ac(v,Ao(v),h)}),Dm=qc(function(h,v,w,B){ac(v,Ao(v),h,B)}),pA=qc(function(h,v,w,B){ac(v,Ai(v),h,B)}),mA=Yc(Yp);function fE(h,v){var w=xd(h);return v==null?w:rv(w,v)}var el=In(function(h,v){h=Tr(h);var w=-1,B=v.length,X=B>2?v[2]:i;for(X&&Ho(v[0],v[1],X)&&(B=1);++w<B;)for(var ce=v[w],me=Ao(ce),Te=-1,we=me.length;++Te<we;){var He=me[Te],We=h[He];(We===i||xa(We,wd[He])&&!tr.call(h,He))&&(h[He]=ce[He])}return h}),pE=In(function(h){return h.push(i,tC),Oa(un,i,h)});function zd(h,v){return ry(h,$t(v,3),Ja)}function gA(h,v){return ry(h,$t(v,3),iv)}function Lm(h,v){return h==null?h:Jp(h,$t(v,3),Ao)}function mE(h,v){return h==null?h:hf(h,$t(v,3),Ao)}function km(h,v){return h&&Ja(h,$t(v,3))}function Mm(h,v){return h&&iv(h,$t(v,3))}function gE(h){return h==null?[]:Qp(h,Ai(h))}function vE(h){return h==null?[]:Qp(h,Ao(h))}function Kd(h,v,w){var B=h==null?i:Lu(h,v);return B===i?w:B}function Um(h,v){return h!=null&&sC(h,v,Zp)}function EE(h,v){return h!=null&&sC(h,v,Gw)}var Oi=Tv(function(h,v,w){v!=null&&typeof v.toString!="function"&&(v=jp.call(v)),h[v]=w},Fi(ha)),gn=Tv(function(h,v,w){v!=null&&typeof v.toString!="function"&&(v=jp.call(v)),tr.call(h,v)?h[v].push(w):h[v]=[w]},$t),_E=In(ku);function Ai(h){return Wo(h)?by(h):uv(h)}function Ao(h){return Wo(h)?by(h,!0):dv(h)}function da(h,v){var w={};return v=$t(v,3),Ja(h,function(B,X,ce){Ya(w,v(B,X,ce),B)}),w}function tl(h,v){var w={};return v=$t(v,3),Ja(h,function(B,X,ce){Ya(w,X,v(B,X,ce))}),w}var SE=qc(function(h,v,w){Ld(h,v,w)}),un=qc(function(h,v,w,B){Ld(h,v,w,B)}),hT=Yc(function(h,v){var w={};if(h==null)return w;var B=!1;v=Rn(v,function(ce){return ce=Kc(ce,h),B||(B=ce.length>1),ce}),ac(h,Sf(h),w),B&&(w=Xa(w,T|R|P,nC));for(var X=v.length;X--;)sm(w,v[X]);return w});function fT(h,v){return pT(h,wf($t(v)))}var Fm=Yc(function(h,v){return h==null?{}:ky(h,v)});function pT(h,v){if(h==null)return{};var w=Rn(Sf(h),function(B){return[B]});return v=$t(v),My(h,w,function(B,X){return v(B,X[0])})}function vA(h,v,w){v=Kc(v,h);var B=-1,X=v.length;for(X||(X=1,h=i);++B<X;){var ce=h==null?i:h[Oo(v[B])];ce===i&&(B=X,ce=w),h=dc(ce)?ce.call(h):ce}return h}function yE(h,v,w){return h==null?h:Mu(h,v,w)}function Yi(h,v,w,B){return B=typeof B=="function"?B:i,h==null?h:Mu(h,v,w,B)}var nr=Zy(Ai),Ui=Zy(Ao);function CE(h,v,w){var B=Le(h),X=B||Zc(h)||Vu(h);if(v=$t(v,4),w==null){var ce=h&&h.constructor;X?w=B?new ce:[]:qr(h)?w=dc(ce)?xd(ef(h)):{}:w={}}return(X?Wa:Ja)(h,function(me,Te,we){return v(w,me,Te,we)}),w}function mT(h,v){return h==null?!0:sm(h,v)}function gT(h,v,w){return h==null?h:Vy(h,v,vv(w))}function vT(h,v,w,B){return B=typeof B=="function"?B:i,h==null?h:Vy(h,v,vv(w),B)}function ju(h){return h==null?[]:qg(h,Ai(h))}function qd(h){return h==null?[]:qg(h,Ao(h))}function TE(h,v,w){return w===i&&(w=v,v=i),w!==i&&(w=ua(w),w=w===w?w:0),v!==i&&(v=ua(v),v=v===v?v:0),oc(ua(h),v,w)}function ET(h,v,w){return v=es(v),w===i?(w=v,v=0):w=es(w),h=ua(h),ff(h,v,w)}function hc(h,v,w){if(w&&typeof w!="boolean"&&Ho(h,v,w)&&(v=w=i),w===i&&(typeof v=="boolean"?(w=v,v=i):typeof h=="boolean"&&(w=h,h=i)),h===i&&v===i?(h=0,v=1):(h=es(h),v===i?(v=h,h=0):v=es(v)),h>v){var B=h;h=v,v=B}if(w||h%1||v%1){var X=vy();return qi(h+X*(v-h+KI("1e-"+((X+"").length-1))),v)}return tm(h,v)}var _T=Uu(function(h,v,w){return v=v.toLowerCase(),h+(w?bE(v):v)});function bE(h){return NE(sr(h).toLowerCase())}function au(h){return h=sr(h),h&&h.replace(jc,Gl).replace(Sd,"")}function Vm(h,v,w){h=sr(h),v=ca(v);var B=h.length;w=w===i?B:oc(Sn(w),0,B);var X=w;return w-=v.length,w>=0&&h.slice(w,X)==v}function Af(h){return h=sr(h),h&&Ki.test(h)?h.replace(Un,cy):h}function ST(h){return h=sr(h),h&&ti.test(h)?h.replace(Ei,"\\$&"):h}var EA=Uu(function(h,v,w){return h+(w?"-":"")+v.toLowerCase()}),_A=Uu(function(h,v,w){return h+(w?" ":"")+v.toLowerCase()}),yT=Yy("toLowerCase");function CT(h,v,w){h=sr(h),v=Sn(v);var B=v?Rd(h):0;if(!v||B>=v)return h;var X=(v-B)/2;return hm(tf(X),w)+h+hm(zp(X),w)}function SA(h,v,w){h=sr(h),v=Sn(v);var B=v?Rd(h):0;return v&&B<v?h+hm(v-B,w):h}function TT(h,v,w){h=sr(h),v=Sn(v);var B=v?Rd(h):0;return v&&B<v?hm(v-B,w)+h:h}function L(h,v,w){return w||v==null?v=0:v&&(v=+v),vw(sr(h).replace(Kr,""),v||0)}function RE(h,v,w){return(w?Ho(h,v,w):v===i)?v=1:v=Sn(v),vf(sr(h),v)}function IE(){var h=arguments,v=sr(h[0]);return h.length<3?v:v.replace(h[1],h[2])}var bT=Uu(function(h,v,w){return h+(w?"_":"")+v.toLowerCase()});function yA(h,v,w){return w&&typeof w!="number"&&Ho(h,v,w)&&(v=w=i),w=w===i?pe:w>>>0,w?(h=sr(h),h&&(typeof v=="string"||v!=null&&!Pm(v))&&(v=ca(v),!v&&Ga(h))?eu(za(h),0,w):h.split(v,w)):[]}var wE=Uu(function(h,v,w){return h+(w?" ":"")+NE(v)});function OE(h,v,w){return h=sr(h),w=w==null?0:oc(Sn(w),0,h.length),v=ca(v),h.slice(w,w+v.length)==v}function Bu(h,v,w){var B=ae.templateSettings;w&&Ho(h,v,w)&&(v=i),h=sr(h),v=Dm({},v,B,eC);var X=Dm({},v.imports,B.imports,eC),ce=Ai(X),me=qg(X,ce),Te,we,He=0,We=v.interpolate||oa,Ke="__p += '",pt=Yg((v.escape||oa).source+"|"+We.source+"|"+(We===jt?Pl:oa).source+"|"+(v.evaluate||oa).source+"|$","g"),xt="//# sourceURL="+(tr.call(v,"sourceURL")?(v.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++YS+"]")+`
`;h.replace(pt,function(qt,An,Fn,Ni,go,fa){return Fn||(Fn=Ni),Ke+=h.slice(He,fa).replace(aa,ly),An&&(Te=!0,Ke+=`' +
__e(`+An+`) +
'`),go&&(we=!0,Ke+=`';
`+go+`;
__p += '`),Fn&&(Ke+=`' +
((__t = (`+Fn+`)) == null ? '' : __t) +
'`),He=fa+qt.length,qt}),Ke+=`';
`;var Ht=tr.call(v,"variable")&&v.variable;if(!Ht)Ke=`with (obj) {
`+Ke+`
}
`;else if(Ii.test(Ht))throw new cn(m);Ke=(we?Ke.replace(ei,""):Ke).replace(Gn,"$1").replace(Qe,"$1;"),Ke="function("+(Ht||"obj")+`) {
`+(Ht?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Te?", __e = _.escape":"")+(we?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Ke+`return __p
}`;var Wt=wT(function(){return er(ce,xt+"return "+Ke).apply(i,me)});if(Wt.source=Ke,xm(Wt))throw Wt;return Wt}function AE(h){return sr(h).toLowerCase()}function jm(h){return sr(h).toUpperCase()}function RT(h,v,w){if(h=sr(h),h&&(w||v===i))return oy(h);if(!h||!(v=ca(v)))return h;var B=za(h),X=za(v),ce=ay(B,X),me=Pp(B,X)+1;return eu(B,ce,me).join("")}function IT(h,v,w){if(h=sr(h),h&&(w||v===i))return h.slice(0,Zh(h)+1);if(!h||!(v=ca(v)))return h;var B=za(h),X=Pp(B,za(v))+1;return eu(B,0,X).join("")}function Bm(h,v,w){if(h=sr(h),h&&(w||v===i))return h.replace(Kr,"");if(!h||!(v=ca(v)))return h;var B=za(h),X=ay(B,za(v));return eu(B,X).join("")}function CA(h,v){var w=z,B=ie;if(qr(v)){var X="separator"in v?v.separator:X;w="length"in v?Sn(v.length):w,B="omission"in v?ca(v.omission):B}h=sr(h);var ce=h.length;if(Ga(h)){var me=za(h);ce=me.length}if(w>=ce)return h;var Te=w-Rd(B);if(Te<1)return B;var we=me?eu(me,0,Te).join(""):h.slice(0,Te);if(X===i)return we+B;if(me&&(Te+=we.length-Te),Pm(X)){if(h.slice(Te).search(X)){var He,We=we;for(X.global||(X=Yg(X.source,sr(pr.exec(X))+"g")),X.lastIndex=0;He=X.exec(We);)var Ke=He.index;we=we.slice(0,Ke===i?Te:Ke)}}else if(h.indexOf(ca(X),Te)!=Te){var pt=we.lastIndexOf(X);pt>-1&&(we=we.slice(0,pt))}return we+B}function TA(h){return h=sr(h),h&&an.test(h)?h.replace(Tt,rw):h}var bA=Uu(function(h,v,w){return h+(w?" ":"")+v.toUpperCase()}),NE=Yy("toUpperCase");function $m(h,v,w){return h=sr(h),v=w?i:v,v===i?ew(h)?aw(h):Wl(h):h.match(v)||[]}var wT=In(function(h,v){try{return Oa(h,i,v)}catch(w){return xm(w)?w:new cn(w)}}),xE=Yc(function(h,v){return Wa(v,function(w){w=Oo(w),Ya(h,w,rE(h[w],h))}),h});function PE(h){var v=h==null?0:h.length,w=$t();return h=v?Rn(h,function(B){if(typeof B[1]!="function")throw new Ka(f);return[w(B[0]),B[1]]}):[],In(function(B){for(var X=-1;++X<v;){var ce=h[X];if(Oa(ce[0],this,B))return Oa(ce[1],this,B)}})}function RA(h){return $w(Xa(h,T))}function Fi(h){return function(){return h}}function Yd(h,v){return h==null||h!==h?v:h}var OT=Xy(),AT=Xy(!0);function ha(h){return h}function Xd(h){return xy(typeof h=="function"?h:Xa(h,T))}function IA(h){return Dy(Xa(h,T))}function wA(h,v){return hv(h,Xa(v,T))}var NT=In(function(h,v){return function(w){return ku(w,h,v)}}),Jd=In(function(h,v){return function(w){return ku(h,w,v)}});function Hm(h,v,w){var B=Ai(v),X=Qp(v,B);w==null&&!(qr(v)&&(X.length||!B.length))&&(w=v,v=h,h=this,X=Qp(v,Ai(v)));var ce=!(qr(w)&&"chain"in w)||!!w.chain,me=dc(h);return Wa(X,function(Te){var we=v[Te];h[Te]=we,me&&(h.prototype[Te]=function(){var He=this.__chain__;if(ce||He){var We=h(this.__wrapped__),Ke=We.__actions__=$o(this.__actions__);return Ke.push({func:we,args:arguments,thisArg:h}),We.__chain__=He,We}return we.apply(h,Hl([this.value()],arguments))})}),h}function xT(){return po._===this&&(po._=uw),this}function su(){}function PT(h){return h=Sn(h),In(function(v){return Ql(v,h)})}var Os=bv(Rn),DT=bv(ny),DE=bv(Hg);function Nf(h){return vm(h)?Gg(Oo(h)):kd(h)}function OA(h){return function(v){return h==null?i:Lu(h,v)}}var AA=Rv(),NA=Rv(!0);function Wm(){return[]}function xf(){return!1}function xA(){return{}}function LT(){return""}function PA(){return!0}function LE(h,v){if(h=Sn(h),h<1||h>ve)return[];var w=pe,B=qi(h,pe);v=$t(v),h-=pe;for(var X=xp(B,v);++w<h;)v(w);return X}function kT(h){return Le(h)?Rn(h,Oo):la(h)?[h]:$o(Vd(sr(h)))}function Gm(h){var v=++lw;return sr(h)+v}var Pf=dm(function(h,v){return h+v},0),DA=pm("ceil"),LA=dm(function(h,v){return h/v},1),kA=pm("floor");function MA(h){return h&&h.length?Xp(h,ha,ov):i}function UA(h,v){return h&&h.length?Xp(h,$t(v,2),ov):i}function FA(h){return Wg(h,ha)}function VA(h,v){return Wg(h,$t(v,2))}function nl(h){return h&&h.length?Xp(h,ha,gf):i}function jA(h,v){return h&&h.length?Xp(h,$t(v,2),gf):i}var BA=dm(function(h,v){return h*v},1),$A=pm("round"),Xi=dm(function(h,v){return h-v},0);function MT(h){return h&&h.length?Kg(h,ha):0}function UT(h,v){return h&&h.length?Kg(h,$t(v,2)):0}return ae.after=JO,ae.ary=tE,ae.assign=uT,ae.assignIn=dT,ae.assignInWith=Dm,ae.assignWith=pA,ae.at=mA,ae.before=nE,ae.bind=rE,ae.bindAll=xE,ae.bindKey=UC,ae.castArray=aA,ae.chain=NC,ae.chunk=Mv,ae.compact=Uv,ae.concat=fC,ae.cond=PE,ae.conforms=RA,ae.constant=Fi,ae.countBy=$d,ae.create=fE,ae.curry=FC,ae.curryRight=iE,ae.debounce=Am,ae.defaults=el,ae.defaultsDeep=pE,ae.defer=QO,ae.delay=ZO,ae.difference=pC,ae.differenceBy=hO,ae.differenceWith=fO,ae.drop=pO,ae.dropRight=Fu,ae.dropRightWhile=mC,ae.dropWhile=mO,ae.fill=Fv,ae.filter=FO,ae.flatMap=wm,ae.flatMapDeep=VO,ae.flatMapDepth=LC,ae.flatten=EC,ae.flattenDeep=Vv,ae.flattenDepth=_C,ae.flip=eA,ae.flow=OT,ae.flowRight=AT,ae.fromPairs=SC,ae.functions=gE,ae.functionsIn=vE,ae.groupBy=kC,ae.initial=yC,ae.intersection=CC,ae.intersectionBy=gO,ae.intersectionWith=Bd,ae.invert=Oi,ae.invertBy=gn,ae.invokeMap=MC,ae.iteratee=Xd,ae.keyBy=BO,ae.keys=Ai,ae.keysIn=Ao,ae.map=Qc,ae.mapKeys=da,ae.mapValues=tl,ae.matches=IA,ae.matchesProperty=wA,ae.memoize=Nm,ae.merge=SE,ae.mergeWith=un,ae.method=NT,ae.methodOf=Jd,ae.mixin=Hm,ae.negate=wf,ae.nthArg=PT,ae.omit=hT,ae.omitBy=fT,ae.once=tA,ae.orderBy=Hd,ae.over=Os,ae.overArgs=VC,ae.overEvery=DT,ae.overSome=DE,ae.partial=oE,ae.partialRight=jC,ae.partition=eE,ae.pick=Fm,ae.pickBy=pT,ae.property=Nf,ae.propertyOf=OA,ae.pull=_O,ae.pullAll=Bv,ae.pullAllBy=SO,ae.pullAllWith=ym,ae.pullAt=bC,ae.range=AA,ae.rangeRight=NA,ae.rearg=BC,ae.reject=WO,ae.remove=$v,ae.rest=nA,ae.reverse=Cm,ae.sampleSize=zO,ae.set=yE,ae.setWith=Yi,ae.shuffle=KO,ae.slice=Hv,ae.sortBy=XO,ae.sortedUniq=TO,ae.sortedUniqBy=bO,ae.split=yA,ae.spread=$C,ae.tail=RO,ae.take=Gv,ae.takeRight=bm,ae.takeRightWhile=IO,ae.takeWhile=wO,ae.tap=lc,ae.throttle=rA,ae.thru=If,ae.toArray=hE,ae.toPairs=nr,ae.toPairsIn=Ui,ae.toPath=kT,ae.toPlainObject=lT,ae.transform=CE,ae.unary=iA,ae.union=OO,ae.unionBy=RC,ae.unionWith=AO,ae.uniq=NO,ae.uniqBy=IC,ae.uniqWith=zv,ae.unset=mT,ae.unzip=Kv,ae.unzipWith=wC,ae.update=gT,ae.updateWith=vT,ae.values=ju,ae.valuesIn=qd,ae.without=OC,ae.words=$m,ae.wrap=oA,ae.xor=qv,ae.xorBy=xO,ae.xorWith=Yv,ae.zip=PO,ae.zipObject=DO,ae.zipObjectDeep=Rm,ae.zipWith=AC,ae.entries=nr,ae.entriesIn=Ui,ae.extend=dT,ae.extendWith=Dm,Hm(ae,ae),ae.add=Pf,ae.attempt=wT,ae.camelCase=_T,ae.capitalize=bE,ae.ceil=DA,ae.clamp=TE,ae.clone=sA,ae.cloneDeep=lA,ae.cloneDeepWith=HC,ae.cloneWith=cA,ae.conformsTo=WC,ae.deburr=au,ae.defaultTo=Yd,ae.divide=LA,ae.endsWith=Vm,ae.eq=xa,ae.escape=Af,ae.escapeRegExp=ST,ae.every=UO,ae.find=PC,ae.findIndex=gC,ae.findKey=zd,ae.findLast=DC,ae.findLastIndex=vC,ae.findLastKey=gA,ae.floor=kA,ae.forEach=Qv,ae.forEachRight=Zv,ae.forIn=Lm,ae.forInRight=mE,ae.forOwn=km,ae.forOwnRight=Mm,ae.get=Kd,ae.gt=GC,ae.gte=aE,ae.has=Um,ae.hasIn=EE,ae.head=jv,ae.identity=ha,ae.includes=jO,ae.indexOf=Sm,ae.inRange=ET,ae.invoke=_E,ae.isArguments=ou,ae.isArray=Le,ae.isArrayBuffer=zC,ae.isArrayLike=Wo,ae.isArrayLikeObject=fi,ae.isBoolean=KC,ae.isBuffer=Zc,ae.isDate=qC,ae.isElement=YC,ae.isEmpty=XC,ae.isEqual=JC,ae.isEqualWith=sE,ae.isError=xm,ae.isFinite=QC,ae.isFunction=dc,ae.isInteger=cE,ae.isLength=Wd,ae.isMap=lE,ae.isMatch=ZC,ae.isMatchWith=eT,ae.isNaN=tT,ae.isNative=nT,ae.isNil=iT,ae.isNull=rT,ae.isNumber=uE,ae.isObject=qr,ae.isObjectLike=oi,ae.isPlainObject=Gd,ae.isRegExp=Pm,ae.isSafeInteger=oT,ae.isSet=dE,ae.isString=Of,ae.isSymbol=la,ae.isTypedArray=Vu,ae.isUndefined=aT,ae.isWeakMap=sT,ae.isWeakSet=uA,ae.join=TC,ae.kebabCase=EA,ae.last=Za,ae.lastIndexOf=vO,ae.lowerCase=_A,ae.lowerFirst=yT,ae.lt=dA,ae.lte=hA,ae.max=MA,ae.maxBy=UA,ae.mean=FA,ae.meanBy=VA,ae.min=nl,ae.minBy=jA,ae.stubArray=Wm,ae.stubFalse=xf,ae.stubObject=xA,ae.stubString=LT,ae.stubTrue=PA,ae.multiply=BA,ae.nth=EO,ae.noConflict=xT,ae.noop=su,ae.now=Om,ae.pad=CT,ae.padEnd=SA,ae.padStart=TT,ae.parseInt=L,ae.random=hc,ae.reduce=$O,ae.reduceRight=HO,ae.repeat=RE,ae.replace=IE,ae.result=vA,ae.round=$A,ae.runInContext=be,ae.sample=GO,ae.size=qO,ae.snakeCase=bT,ae.some=YO,ae.sortedIndex=yO,ae.sortedIndexBy=Tm,ae.sortedIndexOf=Jc,ae.sortedLastIndex=CO,ae.sortedLastIndexBy=iu,ae.sortedLastIndexOf=Wv,ae.startCase=wE,ae.startsWith=OE,ae.subtract=Xi,ae.sum=MT,ae.sumBy=UT,ae.template=Bu,ae.times=LE,ae.toFinite=es,ae.toInteger=Sn,ae.toLength=cT,ae.toLower=AE,ae.toNumber=ua,ae.toSafeInteger=fA,ae.toString=sr,ae.toUpper=jm,ae.trim=RT,ae.trimEnd=IT,ae.trimStart=Bm,ae.truncate=CA,ae.unescape=TA,ae.uniqueId=Gm,ae.upperCase=bA,ae.upperFirst=NE,ae.each=Qv,ae.eachRight=Zv,ae.first=jv,Hm(ae,function(){var h={};return Ja(ae,function(v,w){tr.call(ae.prototype,w)||(h[w]=v)}),h}(),{chain:!1}),ae.VERSION=a,Wa(["bind","bindKey","curry","curryRight","partial","partialRight"],function(h){ae[h].placeholder=ae}),Wa(["drop","take"],function(h,v){kn.prototype[h]=function(w){w=w===i?1:Mi(Sn(w),0);var B=this.__filtered__&&!v?new kn(this):this.clone();return B.__filtered__?B.__takeCount__=qi(w,B.__takeCount__):B.__views__.push({size:qi(w,pe),type:h+(B.__dir__<0?"Right":"")}),B},kn.prototype[h+"Right"]=function(w){return this.reverse()[h](w).reverse()}}),Wa(["filter","map","takeWhile"],function(h,v){var w=v+1,B=w==oe||w==he;kn.prototype[h]=function(X){var ce=this.clone();return ce.__iteratees__.push({iteratee:$t(X,3),type:w}),ce.__filtered__=ce.__filtered__||B,ce}}),Wa(["head","last"],function(h,v){var w="take"+(v?"Right":"");kn.prototype[h]=function(){return this[w](1).value()[0]}}),Wa(["initial","tail"],function(h,v){var w="drop"+(v?"":"Right");kn.prototype[h]=function(){return this.__filtered__?new kn(this):this[w](1)}}),kn.prototype.compact=function(){return this.filter(ha)},kn.prototype.find=function(h){return this.filter(h).head()},kn.prototype.findLast=function(h){return this.reverse().find(h)},kn.prototype.invokeMap=In(function(h,v){return typeof h=="function"?new kn(this):this.map(function(w){return ku(w,h,v)})}),kn.prototype.reject=function(h){return this.filter(wf($t(h)))},kn.prototype.slice=function(h,v){h=Sn(h);var w=this;return w.__filtered__&&(h>0||v<0)?new kn(w):(h<0?w=w.takeRight(-h):h&&(w=w.drop(h)),v!==i&&(v=Sn(v),w=v<0?w.dropRight(-v):w.take(v-h)),w)},kn.prototype.takeRightWhile=function(h){return this.reverse().takeWhile(h).reverse()},kn.prototype.toArray=function(){return this.take(pe)},Ja(kn.prototype,function(h,v){var w=/^(?:filter|find|map|reject)|While$/.test(v),B=/^(?:head|last)$/.test(v),X=ae[B?"take"+(v=="last"?"Right":""):v],ce=B||/^find/.test(v);X&&(ae.prototype[v]=function(){var me=this.__wrapped__,Te=B?[1]:arguments,we=me instanceof kn,He=Te[0],We=we||Le(me),Ke=function(An){var Fn=X.apply(ae,Hl([An],Te));return B&&pt?Fn[0]:Fn};We&&w&&typeof He=="function"&&He.length!=1&&(we=We=!1);var pt=this.__chain__,xt=!!this.__actions__.length,Ht=ce&&!pt,Wt=we&&!xt;if(!ce&&We){me=Wt?me:new kn(this);var qt=h.apply(me,Te);return qt.__actions__.push({func:If,args:[Ke],thisArg:i}),new qa(qt,pt)}return Ht&&Wt?h.apply(this,Te):(qt=this.thru(Ke),Ht?B?qt.value()[0]:qt.value():qt)})}),Wa(["pop","push","shift","sort","splice","unshift"],function(h){var v=Mp[h],w=/^(?:push|sort|unshift)$/.test(h)?"tap":"thru",B=/^(?:pop|shift)$/.test(h);ae.prototype[h]=function(){var X=arguments;if(B&&!this.__chain__){var ce=this.value();return v.apply(Le(ce)?ce:[],X)}return this[w](function(me){return v.apply(Le(me)?me:[],X)})}}),Ja(kn.prototype,function(h,v){var w=ae[v];if(w){var B=w.name+"";tr.call(Nd,B)||(Nd[B]=[]),Nd[B].push({name:v,func:w})}}),Nd[um(i,D).name]=[{name:"wrapper",func:i}],kn.prototype.clone=yw,kn.prototype.reverse=Pd,kn.prototype.value=Cw,ae.prototype.at=LO,ae.prototype.chain=kO,ae.prototype.commit=MO,ae.prototype.next=uc,ae.prototype.plant=xC,ae.prototype.reverse=Xv,ae.prototype.toJSON=ae.prototype.valueOf=ae.prototype.value=Jv,ae.prototype.first=ae.prototype.head,Ou&&(ae.prototype[Ou]=Im),ae},Id=sw();wu?((wu.exports=Id)._=Id,qh._=Id):po._=Id}).call(Xt)})(C1,C1.exports);var Tie=C1.exports,LS={},tG={exports:{}};(function(e){function t(i){return i&&i.__esModule?i:{default:i}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(tG);var bie=tG.exports,F2={};Object.defineProperty(F2,"__esModule",{value:!0});F2.default=Rie;function Rie(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var V2={};Object.defineProperty(V2,"__esModule",{value:!0});V2.default=Iie;function Iie(e,t){if(!e)return!1;if(e.contains)return e.contains(t);for(var i=t;i;){if(i===e)return!0;i=i.parentNode}return!1}var nG=bie.default;Object.defineProperty(LS,"__esModule",{value:!0});LS.clearContainerCache=Lie;LS.injectCSS=j2;LS.removeCSS=Pie;var wie=LS.updateCSS=kie,Oie=nG(F2),Aie=nG(V2),$8="data-rc-order",Nie="rc-util-key",T1=new Map;function rG(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.mark;return t?t.startsWith("data-")?t:"data-".concat(t):Nie}function yI(e){if(e.attachTo)return e.attachTo;var t=document.querySelector("head");return t||document.body}function xie(e){return e==="queue"?"prependQueue":e?"prepend":"append"}function iG(e){return Array.from((T1.get(e)||e).children).filter(function(t){return t.tagName==="STYLE"})}function j2(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!(0,Oie.default)())return null;var i=t.csp,a=t.prepend,c=document.createElement("style");c.setAttribute($8,xie(a)),i!=null&&i.nonce&&(c.nonce=i==null?void 0:i.nonce),c.innerHTML=e;var u=yI(t),f=u.firstChild;if(a){if(a==="queue"){var m=iG(u).filter(function(g){return["prepend","prependQueue"].includes(g.getAttribute($8))});if(m.length)return u.insertBefore(c,m[m.length-1].nextSibling),c}u.insertBefore(c,f)}else u.appendChild(c);return c}function oG(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=yI(t);return iG(i).find(function(a){return a.getAttribute(rG(t))===e})}function Pie(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=oG(e,t);if(i){var a=yI(t);a.removeChild(i)}}function Die(e,t){var i=T1.get(e);if(!i||!(0,Aie.default)(document,i)){var a=j2("",t),c=a.parentNode;T1.set(e,c),e.removeChild(a)}}function Lie(){T1.clear()}function kie(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=yI(i);Die(a,i);var c=oG(t,i);if(c){var u,f;if((u=i.csp)!==null&&u!==void 0&&u.nonce&&c.nonce!==((f=i.csp)===null||f===void 0?void 0:f.nonce)){var m;c.nonce=(m=i.csp)===null||m===void 0?void 0:m.nonce}return c.innerHTML!==e&&(c.innerHTML=e),c}var g=j2(e,i);return g.setAttribute(rG(i),t),g}var B2={};Object.defineProperty(B2,"__esModule",{value:!0});var Mie=B2.getShadowRoot=Uie;B2.inShadow=sG;function aG(e){var t;return e==null||(t=e.getRootNode)===null||t===void 0?void 0:t.call(e)}function sG(e){return aG(e)!==(e==null?void 0:e.ownerDocument)}function Uie(e){return sG(e)?aG(e):null}var Nl={};Object.defineProperty(Nl,"__esModule",{value:!0});Nl.call=$2;var cG=Nl.default=void 0;Nl.note=dG;Nl.noteOnce=fG;Nl.preMessage=void 0;Nl.resetWarned=hG;Nl.warning=uG;Nl.warningOnce=kS;var BL={},lG=function(t){};Nl.preMessage=lG;function uG(e,t){}function dG(e,t){}function hG(){BL={}}function $2(e,t,i){!t&&!BL[i]&&(e(!1,i),BL[i]=!0)}function kS(e,t){$2(uG,e,t)}function fG(e,t){$2(dG,e,t)}kS.preMessage=lG;kS.resetWarned=hG;kS.noteOnce=fG;var Fie=kS;cG=Nl.default=Fie;function Vie(e,t){cG(e,`[@ant-design/icons] ${t}`)}function H8(e){return typeof e=="object"&&typeof e.name=="string"&&typeof e.theme=="string"&&(typeof e.icon=="object"||typeof e.icon=="function")}function W8(e={}){return Object.keys(e).reduce((t,i)=>{const a=e[i];switch(i){case"class":t.className=a,delete t.class;break;default:delete t[i],t[Tie.camelCase(i)]=a}return t},{})}function $L(e,t,i){return i?Nt.createElement(e.tag,{key:t,...W8(e.attrs),...i},(e.children||[]).map((a,c)=>$L(a,`${t}-${e.tag}-${c}`))):Nt.createElement(e.tag,{key:t,...W8(e.attrs)},(e.children||[]).map((a,c)=>$L(a,`${t}-${e.tag}-${c}`)))}function pG(e){return ud(e)[0]}function mG(e){return e?Array.isArray(e)?e:[e]:[]}const jie=`
.anticon {
  display: inline-block;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`,Bie=e=>{const{csp:t,prefixCls:i}=C.useContext(D2);let a=jie;i&&(a=a.replace(/anticon/g,i)),C.useEffect(()=>{const c=e.current,u=Mie(c);wie(a,"@ant-design-icons",{prepend:!0,csp:t,attachTo:u})},[])},B_={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};function $ie({primaryColor:e,secondaryColor:t}){B_.primaryColor=e,B_.secondaryColor=t||pG(e),B_.calculated=!!t}function Hie(){return{...B_}}const CI=e=>{const{icon:t,className:i,onClick:a,style:c,primaryColor:u,secondaryColor:f,...m}=e,g=C.useRef();let E=B_;if(u&&(E={primaryColor:u,secondaryColor:f||pG(u)}),Bie(g),Vie(H8(t),`icon should be icon definiton, but got ${t}`),!H8(t))return null;let y=t;return y&&typeof y.icon=="function"&&(y={...y,icon:y.icon(E.primaryColor,E.secondaryColor)}),$L(y.icon,`svg-${y.name}`,{className:i,onClick:a,style:c,"data-icon":y.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",...m,ref:g})};CI.displayName="IconReact";CI.getTwoToneColors=Hie;CI.setTwoToneColors=$ie;const H2=CI;function gG(e){const[t,i]=mG(e);return H2.setTwoToneColors({primaryColor:t,secondaryColor:i})}function Wie(){const e=H2.getTwoToneColors();return e.calculated?[e.primaryColor,e.secondaryColor]:e.primaryColor}gG(vre.primary);const TI=C.forwardRef((e,t)=>{const{className:i,icon:a,spin:c,rotate:u,tabIndex:f,onClick:m,twoToneColor:g,...E}=e,{prefixCls:y="anticon",rootClassName:T}=C.useContext(D2),R=nt(T,y,{[`${y}-${a.name}`]:!!a.name,[`${y}-spin`]:!!c||a.name==="loading"},i);let P=f;P===void 0&&m&&(P=-1);const O=u?{msTransform:`rotate(${u}deg)`,transform:`rotate(${u}deg)`}:void 0,[N,M]=mG(g);return C.createElement("span",{role:"img","aria-label":a.name,...E,ref:t,tabIndex:P,onClick:m,className:R},C.createElement(H2,{icon:a,primaryColor:N,secondaryColor:M,style:O}))});TI.displayName="AntdIcon";TI.getTwoToneColor=Wie;TI.setTwoToneColor=gG;const Mo=TI,Gie=(e,t)=>C.createElement(Mo,{...e,ref:t,icon:Cie}),vG=C.forwardRef(Gie);var EG={};Object.defineProperty(EG,"__esModule",{value:!0});var zie={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm127.98 274.82h-.04l-.08.06L512 466.75 384.14 338.88c-.04-.05-.06-.06-.08-.06a.12.12 0 00-.07 0c-.03 0-.05.01-.09.05l-45.02 45.02a.2.2 0 00-.05.09.12.12 0 000 .07v.02a.27.27 0 00.06.06L466.75 512 338.88 639.86c-.05.04-.06.06-.06.08a.12.12 0 000 .07c0 .03.01.05.05.09l45.02 45.02a.2.2 0 00.09.05.12.12 0 00.07 0c.02 0 .04-.01.08-.05L512 557.25l127.86 127.87c.04.04.06.05.08.05a.12.12 0 00.07 0c.03 0 .05-.01.09-.05l45.02-45.02a.2.2 0 00.05-.09.12.12 0 000-.07v-.02a.27.27 0 00-.05-.06L557.25 512l127.87-127.86c.04-.04.05-.06.05-.08a.12.12 0 000-.07c0-.03-.01-.05-.05-.09l-45.02-45.02a.2.2 0 00-.09-.05.12.12 0 00-.07 0z"}}]},name:"close-circle",theme:"filled"},Kie=EG.default=zie;const qie=(e,t)=>C.createElement(Mo,{...e,ref:t,icon:Kie}),bI=C.forwardRef(qie);var _G={};Object.defineProperty(_G,"__esModule",{value:!0});var Yie={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M799.86 166.31c.02 0 .04.02.08.06l57.69 57.7c.04.03.05.05.06.08a.12.12 0 010 .06c0 .03-.02.05-.06.09L569.93 512l287.7 287.7c.04.04.05.06.06.09a.12.12 0 010 .07c0 .02-.02.04-.06.08l-57.7 57.69c-.03.04-.05.05-.07.06a.12.12 0 01-.07 0c-.03 0-.05-.02-.09-.06L512 569.93l-287.7 287.7c-.04.04-.06.05-.09.06a.12.12 0 01-.07 0c-.02 0-.04-.02-.08-.06l-57.69-57.7c-.04-.03-.05-.05-.06-.07a.12.12 0 010-.07c0-.03.02-.05.06-.09L454.07 512l-287.7-287.7c-.04-.04-.05-.06-.06-.09a.12.12 0 010-.07c0-.02.02-.04.06-.08l57.7-57.69c.03-.04.05-.05.07-.06a.12.12 0 01.07 0c.03 0 .05.02.09.06L512 454.07l287.7-287.7c.04-.04.06-.05.09-.06a.12.12 0 01.07 0z"}}]},name:"close",theme:"outlined"},Xie=_G.default=Yie;const Jie=(e,t)=>C.createElement(Mo,{...e,ref:t,icon:Xie}),Qie=C.forwardRef(Jie);var SG={};Object.defineProperty(SG,"__esModule",{value:!0});var Zie={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm-32 232c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296zm32 440a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"exclamation-circle",theme:"filled"},eoe=SG.default=Zie;const toe=(e,t)=>C.createElement(Mo,{...e,ref:t,icon:eoe}),yG=C.forwardRef(toe);var CG={};Object.defineProperty(CG,"__esModule",{value:!0});var noe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"info-circle",theme:"filled"},roe=CG.default=noe;const ioe=(e,t)=>C.createElement(Mo,{...e,ref:t,icon:roe}),ooe=C.forwardRef(ioe),{isValidElement:Fh}=rg;function TG(e){return e&&Fh(e)&&e.type===C.Fragment}function aoe(e,t,i){return Fh(e)?C.cloneElement(e,typeof i=="function"?i(e.props||{}):i):t}function Rl(e,t){return aoe(e,e,t)}const G8=e=>typeof e=="object"&&e!=null&&e.nodeType===1,z8=(e,t)=>(!t||e!=="hidden")&&e!=="visible"&&e!=="clip",uP=(e,t)=>{if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){const i=getComputedStyle(e,null);return z8(i.overflowY,t)||z8(i.overflowX,t)||(a=>{const c=(u=>{if(!u.ownerDocument||!u.ownerDocument.defaultView)return null;try{return u.ownerDocument.defaultView.frameElement}catch{return null}})(a);return!!c&&(c.clientHeight<a.scrollHeight||c.clientWidth<a.scrollWidth)})(e)}return!1},tR=(e,t,i,a,c,u,f,m)=>u<e&&f>t||u>e&&f<t?0:u<=e&&m<=i||f>=t&&m>=i?u-e-a:f>t&&m<i||u<e&&m>i?f-t+c:0,soe=e=>{const t=e.parentElement;return t??(e.getRootNode().host||null)},K8=(e,t)=>{var i,a,c,u;if(typeof document>"u")return[];const{scrollMode:f,block:m,inline:g,boundary:E,skipOverflowHiddenElements:y}=t,T=typeof E=="function"?E:J=>J!==E;if(!G8(e))throw new TypeError("Invalid target");const R=document.scrollingElement||document.documentElement,P=[];let O=e;for(;G8(O)&&T(O);){if(O=soe(O),O===R){P.push(O);break}O!=null&&O===document.body&&uP(O)&&!uP(document.documentElement)||O!=null&&uP(O,y)&&P.push(O)}const N=(a=(i=window.visualViewport)==null?void 0:i.width)!=null?a:innerWidth,M=(u=(c=window.visualViewport)==null?void 0:c.height)!=null?u:innerHeight,{scrollX:D,scrollY:x}=window,{height:k,width:V,top:H,right:$,bottom:G,left:K}=e.getBoundingClientRect();let Q=m==="start"||m==="nearest"?H:m==="end"?G:H+k/2,z=g==="center"?K+V/2:g==="end"?$:K;const ie=[];for(let J=0;J<P.length;J++){const Y=P[J],{height:oe,width:ue,top:he,right:Se,bottom:ve,left:Re}=Y.getBoundingClientRect();if(f==="if-needed"&&H>=0&&K>=0&&G<=M&&$<=N&&H>=he&&G<=ve&&K>=Re&&$<=Se)return ie;const Ce=getComputedStyle(Y),pe=parseInt(Ce.borderLeftWidth,10),fe=parseInt(Ce.borderTopWidth,10),_e=parseInt(Ce.borderRightWidth,10),ge=parseInt(Ce.borderBottomWidth,10);let Ue=0,Fe=0;const ot="offsetWidth"in Y?Y.offsetWidth-Y.clientWidth-pe-_e:0,qe="offsetHeight"in Y?Y.offsetHeight-Y.clientHeight-fe-ge:0,wt="offsetWidth"in Y?Y.offsetWidth===0?0:ue/Y.offsetWidth:0,kt="offsetHeight"in Y?Y.offsetHeight===0?0:oe/Y.offsetHeight:0;if(R===Y)Ue=m==="start"?Q:m==="end"?Q-M:m==="nearest"?tR(x,x+M,M,fe,ge,x+Q,x+Q+k,k):Q-M/2,Fe=g==="start"?z:g==="center"?z-N/2:g==="end"?z-N:tR(D,D+N,N,pe,_e,D+z,D+z+V,V),Ue=Math.max(0,Ue+x),Fe=Math.max(0,Fe+D);else{Ue=m==="start"?Q-he-fe:m==="end"?Q-ve+ge+qe:m==="nearest"?tR(he,ve,oe,fe,ge+qe,Q,Q+k,k):Q-(he+oe/2)+qe/2,Fe=g==="start"?z-Re-pe:g==="center"?z-(Re+ue/2)+ot/2:g==="end"?z-Se+_e+ot:tR(Re,Se,ue,pe,_e+ot,z,z+V,V);const{scrollLeft:_t,scrollTop:vt}=Y;Ue=Math.max(0,Math.min(vt+Ue/kt,Y.scrollHeight-oe/kt+qe)),Fe=Math.max(0,Math.min(_t+Fe/wt,Y.scrollWidth-ue/wt+ot)),Q+=vt-Ue,z+=_t-Fe}ie.push({el:Y,top:Ue,left:Fe})}return ie},coe=e=>e===!1?{block:"end",inline:"nearest"}:(t=>t===Object(t)&&Object.keys(t).length!==0)(e)?e:{block:"start",inline:"nearest"};function loe(e,t){if(!e.isConnected||!(a=>{let c=a;for(;c&&c.parentNode;){if(c.parentNode===document)return!0;c=c.parentNode instanceof ShadowRoot?c.parentNode.host:c.parentNode}return!1})(e))return;if((a=>typeof a=="object"&&typeof a.behavior=="function")(t))return t.behavior(K8(e,t));const i=typeof t=="boolean"||t==null?void 0:t.behavior;for(const{el:a,top:c,left:u}of K8(e,coe(t)))a.scroll({top:c,left:u,behavior:i})}var Lt={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(t){var i=t.keyCode;if(t.altKey&&!t.ctrlKey||t.metaKey||i>=Lt.F1&&i<=Lt.F12)return!1;switch(i){case Lt.ALT:case Lt.CAPS_LOCK:case Lt.CONTEXT_MENU:case Lt.CTRL:case Lt.DOWN:case Lt.END:case Lt.ESC:case Lt.HOME:case Lt.INSERT:case Lt.LEFT:case Lt.MAC_FF_META:case Lt.META:case Lt.NUMLOCK:case Lt.NUM_CENTER:case Lt.PAGE_DOWN:case Lt.PAGE_UP:case Lt.PAUSE:case Lt.PRINT_SCREEN:case Lt.RIGHT:case Lt.SHIFT:case Lt.UP:case Lt.WIN_KEY:case Lt.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(t){if(t>=Lt.ZERO&&t<=Lt.NINE||t>=Lt.NUM_ZERO&&t<=Lt.NUM_MULTIPLY||t>=Lt.A&&t<=Lt.Z||window.navigator.userAgent.indexOf("WebKit")!==-1&&t===0)return!0;switch(t){case Lt.SPACE:case Lt.QUESTION_MARK:case Lt.NUM_PLUS:case Lt.NUM_MINUS:case Lt.NUM_PERIOD:case Lt.NUM_DIVISION:case Lt.SEMICOLON:case Lt.DASH:case Lt.EQUALS:case Lt.COMMA:case Lt.PERIOD:case Lt.SLASH:case Lt.APOSTROPHE:case Lt.SINGLE_QUOTE:case Lt.OPEN_SQUARE_BRACKET:case Lt.BACKSLASH:case Lt.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},uoe=C.forwardRef(function(e,t){var i=e.prefixCls,a=e.style,c=e.className,u=e.duration,f=u===void 0?4.5:u,m=e.eventKey,g=e.content,E=e.closable,y=e.closeIcon,T=y===void 0?"x":y,R=e.props,P=e.onClick,O=e.onNoticeClose,N=e.times,M=C.useState(!1),D=Ye(M,2),x=D[0],k=D[1],V=function(){O(m)},H=function(K){(K.key==="Enter"||K.code==="Enter"||K.keyCode===Lt.ENTER)&&V()};C.useEffect(function(){if(!x&&f>0){var G=setTimeout(function(){V()},f*1e3);return function(){clearTimeout(G)}}},[f,x,N]);var $="".concat(i,"-notice");return C.createElement("div",st({},R,{ref:t,className:nt($,c,Ct({},"".concat($,"-closable"),E)),style:a,onMouseEnter:function(){k(!0)},onMouseLeave:function(){k(!1)},onClick:P}),C.createElement("div",{className:"".concat($,"-content")},g),E&&C.createElement("a",{tabIndex:0,className:"".concat($,"-close"),onKeyDown:H,onClick:function(K){K.preventDefault(),K.stopPropagation(),V()}},T))});const bG=uoe;var doe=C.forwardRef(function(e,t){var i=e.prefixCls,a=i===void 0?"rc-notification":i,c=e.container,u=e.motion,f=e.maxCount,m=e.className,g=e.style,E=e.onAllRemoved,y=C.useState([]),T=Ye(y,2),R=T[0],P=T[1],O=function(G){var K,Q=R.find(function(z){return z.key===G});Q==null||(K=Q.onClose)===null||K===void 0||K.call(Q),P(function(z){return z.filter(function(ie){return ie.key!==G})})};C.useImperativeHandle(t,function(){return{open:function(G){P(function(K){var Q=gt(K),z=Q.findIndex(function(Y){return Y.key===G.key}),ie=Ae({},G);if(z>=0){var J;ie.times=(((J=K[z])===null||J===void 0?void 0:J.times)||0)+1,Q[z]=ie}else ie.times=0,Q.push(ie);return f>0&&Q.length>f&&(Q=Q.slice(-f)),Q})},close:function(G){O(G)},destroy:function(){P([])}}});var N=C.useState({}),M=Ye(N,2),D=M[0],x=M[1];C.useEffect(function(){var $={};R.forEach(function(G){var K=G.placement,Q=K===void 0?"topRight":K;Q&&($[Q]=$[Q]||[],$[Q].push(G))}),Object.keys(D).forEach(function(G){$[G]=$[G]||[]}),x($)},[R]);var k=function(G){x(function(K){var Q=Ae({},K),z=Q[G]||[];return z.length||delete Q[G],Q})},V=C.useRef(!1);if(C.useEffect(function(){Object.keys(D).length>0?V.current=!0:V.current&&(E==null||E(),V.current=!1)},[D]),!c)return null;var H=Object.keys(D);return Wh.createPortal(C.createElement(C.Fragment,null,H.map(function($){var G=D[$],K=G.map(function(z){return{config:z,key:z.key}}),Q=typeof u=="function"?u($):u;return C.createElement(X7,st({key:$,className:nt(a,"".concat(a,"-").concat($),m==null?void 0:m($)),style:g==null?void 0:g($),keys:K,motionAppear:!0},Q,{onAllRemoved:function(){k($)}}),function(z,ie){var J=z.config,Y=z.className,oe=z.style,ue=J.key,he=J.times,Se=J.className,ve=J.style;return C.createElement(bG,st({},J,{ref:ie,prefixCls:a,className:nt(Y,Se),style:Ae(Ae({},oe),ve),times:he,key:ue,eventKey:ue,onNoticeClose:O}))})})),c)}),hoe=["getContainer","motion","prefixCls","maxCount","className","style","onAllRemoved"],foe=function(){return document.body},q8=0;function poe(){for(var e={},t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];return i.forEach(function(c){c&&Object.keys(c).forEach(function(u){var f=c[u];f!==void 0&&(e[u]=f)})}),e}function moe(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.getContainer,i=t===void 0?foe:t,a=e.motion,c=e.prefixCls,u=e.maxCount,f=e.className,m=e.style,g=e.onAllRemoved,E=Xn(e,hoe),y=C.useState(),T=Ye(y,2),R=T[0],P=T[1],O=C.useRef(),N=C.createElement(doe,{container:R,ref:O,prefixCls:c,motion:a,maxCount:u,className:f,style:m,onAllRemoved:g}),M=C.useState([]),D=Ye(M,2),x=D[0],k=D[1],V=C.useMemo(function(){return{open:function($){var G=poe(E,$);(G.key===null||G.key===void 0)&&(G.key="rc-notification-".concat(q8),q8+=1),k(function(K){return[].concat(gt(K),[{type:"open",config:G}])})},close:function($){k(function(G){return[].concat(gt(G),[{type:"close",key:$}])})},destroy:function(){k(function($){return[].concat(gt($),[{type:"destroy"}])})}}},[]);return C.useEffect(function(){P(i())}),C.useEffect(function(){O.current&&x.length&&(x.forEach(function(H){switch(H.type){case"open":O.current.open(H.config);break;case"close":O.current.close(H.key);break;case"destroy":O.current.destroy();break}}),k([]))},[x]),[V,N]}var RG={};Object.defineProperty(RG,"__esModule",{value:!0});var goe={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"},voe=RG.default=goe;const Eoe=(e,t)=>C.createElement(Mo,{...e,ref:t,icon:voe}),IG=C.forwardRef(Eoe);function Js(){Js=function(){return e};var e={},t=Object.prototype,i=t.hasOwnProperty,a=Object.defineProperty||function(J,Y,oe){J[Y]=oe.value},c=typeof Symbol=="function"?Symbol:{},u=c.iterator||"@@iterator",f=c.asyncIterator||"@@asyncIterator",m=c.toStringTag||"@@toStringTag";function g(J,Y,oe){return Object.defineProperty(J,Y,{value:oe,enumerable:!0,configurable:!0,writable:!0}),J[Y]}try{g({},"")}catch{g=function(oe,ue,he){return oe[ue]=he}}function E(J,Y,oe,ue){var he=Y&&Y.prototype instanceof R?Y:R,Se=Object.create(he.prototype),ve=new Q(ue||[]);return a(Se,"_invoke",{value:H(J,oe,ve)}),Se}function y(J,Y,oe){try{return{type:"normal",arg:J.call(Y,oe)}}catch(ue){return{type:"throw",arg:ue}}}e.wrap=E;var T={};function R(){}function P(){}function O(){}var N={};g(N,u,function(){return this});var M=Object.getPrototypeOf,D=M&&M(M(z([])));D&&D!==t&&i.call(D,u)&&(N=D);var x=O.prototype=R.prototype=Object.create(N);function k(J){["next","throw","return"].forEach(function(Y){g(J,Y,function(oe){return this._invoke(Y,oe)})})}function V(J,Y){function oe(he,Se,ve,Re){var Ce=y(J[he],J,Se);if(Ce.type!=="throw"){var pe=Ce.arg,fe=pe.value;return fe&&Sr(fe)=="object"&&i.call(fe,"__await")?Y.resolve(fe.__await).then(function(_e){oe("next",_e,ve,Re)},function(_e){oe("throw",_e,ve,Re)}):Y.resolve(fe).then(function(_e){pe.value=_e,ve(pe)},function(_e){return oe("throw",_e,ve,Re)})}Re(Ce.arg)}var ue;a(this,"_invoke",{value:function(Se,ve){function Re(){return new Y(function(Ce,pe){oe(Se,ve,Ce,pe)})}return ue=ue?ue.then(Re,Re):Re()}})}function H(J,Y,oe){var ue="suspendedStart";return function(he,Se){if(ue==="executing")throw new Error("Generator is already running");if(ue==="completed"){if(he==="throw")throw Se;return ie()}for(oe.method=he,oe.arg=Se;;){var ve=oe.delegate;if(ve){var Re=$(ve,oe);if(Re){if(Re===T)continue;return Re}}if(oe.method==="next")oe.sent=oe._sent=oe.arg;else if(oe.method==="throw"){if(ue==="suspendedStart")throw ue="completed",oe.arg;oe.dispatchException(oe.arg)}else oe.method==="return"&&oe.abrupt("return",oe.arg);ue="executing";var Ce=y(J,Y,oe);if(Ce.type==="normal"){if(ue=oe.done?"completed":"suspendedYield",Ce.arg===T)continue;return{value:Ce.arg,done:oe.done}}Ce.type==="throw"&&(ue="completed",oe.method="throw",oe.arg=Ce.arg)}}}function $(J,Y){var oe=Y.method,ue=J.iterator[oe];if(ue===void 0)return Y.delegate=null,oe==="throw"&&J.iterator.return&&(Y.method="return",Y.arg=void 0,$(J,Y),Y.method==="throw")||oe!=="return"&&(Y.method="throw",Y.arg=new TypeError("The iterator does not provide a '"+oe+"' method")),T;var he=y(ue,J.iterator,Y.arg);if(he.type==="throw")return Y.method="throw",Y.arg=he.arg,Y.delegate=null,T;var Se=he.arg;return Se?Se.done?(Y[J.resultName]=Se.value,Y.next=J.nextLoc,Y.method!=="return"&&(Y.method="next",Y.arg=void 0),Y.delegate=null,T):Se:(Y.method="throw",Y.arg=new TypeError("iterator result is not an object"),Y.delegate=null,T)}function G(J){var Y={tryLoc:J[0]};1 in J&&(Y.catchLoc=J[1]),2 in J&&(Y.finallyLoc=J[2],Y.afterLoc=J[3]),this.tryEntries.push(Y)}function K(J){var Y=J.completion||{};Y.type="normal",delete Y.arg,J.completion=Y}function Q(J){this.tryEntries=[{tryLoc:"root"}],J.forEach(G,this),this.reset(!0)}function z(J){if(J){var Y=J[u];if(Y)return Y.call(J);if(typeof J.next=="function")return J;if(!isNaN(J.length)){var oe=-1,ue=function he(){for(;++oe<J.length;)if(i.call(J,oe))return he.value=J[oe],he.done=!1,he;return he.value=void 0,he.done=!0,he};return ue.next=ue}}return{next:ie}}function ie(){return{value:void 0,done:!0}}return P.prototype=O,a(x,"constructor",{value:O,configurable:!0}),a(O,"constructor",{value:P,configurable:!0}),P.displayName=g(O,m,"GeneratorFunction"),e.isGeneratorFunction=function(J){var Y=typeof J=="function"&&J.constructor;return!!Y&&(Y===P||(Y.displayName||Y.name)==="GeneratorFunction")},e.mark=function(J){return Object.setPrototypeOf?Object.setPrototypeOf(J,O):(J.__proto__=O,g(J,m,"GeneratorFunction")),J.prototype=Object.create(x),J},e.awrap=function(J){return{__await:J}},k(V.prototype),g(V.prototype,f,function(){return this}),e.AsyncIterator=V,e.async=function(J,Y,oe,ue,he){he===void 0&&(he=Promise);var Se=new V(E(J,Y,oe,ue),he);return e.isGeneratorFunction(Y)?Se:Se.next().then(function(ve){return ve.done?ve.value:Se.next()})},k(x),g(x,m,"Generator"),g(x,u,function(){return this}),g(x,"toString",function(){return"[object Generator]"}),e.keys=function(J){var Y=Object(J),oe=[];for(var ue in Y)oe.push(ue);return oe.reverse(),function he(){for(;oe.length;){var Se=oe.pop();if(Se in Y)return he.value=Se,he.done=!1,he}return he.done=!0,he}},e.values=z,Q.prototype={constructor:Q,reset:function(Y){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(K),!Y)for(var oe in this)oe.charAt(0)==="t"&&i.call(this,oe)&&!isNaN(+oe.slice(1))&&(this[oe]=void 0)},stop:function(){this.done=!0;var Y=this.tryEntries[0].completion;if(Y.type==="throw")throw Y.arg;return this.rval},dispatchException:function(Y){if(this.done)throw Y;var oe=this;function ue(pe,fe){return ve.type="throw",ve.arg=Y,oe.next=pe,fe&&(oe.method="next",oe.arg=void 0),!!fe}for(var he=this.tryEntries.length-1;he>=0;--he){var Se=this.tryEntries[he],ve=Se.completion;if(Se.tryLoc==="root")return ue("end");if(Se.tryLoc<=this.prev){var Re=i.call(Se,"catchLoc"),Ce=i.call(Se,"finallyLoc");if(Re&&Ce){if(this.prev<Se.catchLoc)return ue(Se.catchLoc,!0);if(this.prev<Se.finallyLoc)return ue(Se.finallyLoc)}else if(Re){if(this.prev<Se.catchLoc)return ue(Se.catchLoc,!0)}else{if(!Ce)throw new Error("try statement without catch or finally");if(this.prev<Se.finallyLoc)return ue(Se.finallyLoc)}}}},abrupt:function(Y,oe){for(var ue=this.tryEntries.length-1;ue>=0;--ue){var he=this.tryEntries[ue];if(he.tryLoc<=this.prev&&i.call(he,"finallyLoc")&&this.prev<he.finallyLoc){var Se=he;break}}Se&&(Y==="break"||Y==="continue")&&Se.tryLoc<=oe&&oe<=Se.finallyLoc&&(Se=null);var ve=Se?Se.completion:{};return ve.type=Y,ve.arg=oe,Se?(this.method="next",this.next=Se.finallyLoc,T):this.complete(ve)},complete:function(Y,oe){if(Y.type==="throw")throw Y.arg;return Y.type==="break"||Y.type==="continue"?this.next=Y.arg:Y.type==="return"?(this.rval=this.arg=Y.arg,this.method="return",this.next="end"):Y.type==="normal"&&oe&&(this.next=oe),T},finish:function(Y){for(var oe=this.tryEntries.length-1;oe>=0;--oe){var ue=this.tryEntries[oe];if(ue.finallyLoc===Y)return this.complete(ue.completion,ue.afterLoc),K(ue),T}},catch:function(Y){for(var oe=this.tryEntries.length-1;oe>=0;--oe){var ue=this.tryEntries[oe];if(ue.tryLoc===Y){var he=ue.completion;if(he.type==="throw"){var Se=he.arg;K(ue)}return Se}}throw new Error("illegal catch attempt")},delegateYield:function(Y,oe,ue){return this.delegate={iterator:z(Y),resultName:oe,nextLoc:ue},this.method==="next"&&(this.arg=void 0),T}},e}function Y8(e,t,i,a,c,u,f){try{var m=e[u](f),g=m.value}catch(E){i(E);return}m.done?t(g):Promise.resolve(g).then(a,c)}function wg(e){return function(){var t=this,i=arguments;return new Promise(function(a,c){var u=e.apply(t,i);function f(g){Y8(u,a,c,f,m,"next",g)}function m(g){Y8(u,a,c,f,m,"throw",g)}f(void 0)})}}var MS=Ae({},lee),_oe=MS.version,Soe=MS.render,yoe=MS.unmountComponentAtNode,RI;try{var Coe=Number((_oe||"").split(".")[0]);Coe>=18&&(RI=MS.createRoot)}catch{}function X8(e){var t=MS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;t&&Sr(t)==="object"&&(t.usingClientEntryPoint=e)}var b1="__rc_react_root__";function Toe(e,t){X8(!0);var i=t[b1]||RI(t);X8(!1),i.render(e),t[b1]=i}function boe(e,t){Soe(e,t)}function wG(e,t){if(RI){Toe(e,t);return}boe(e,t)}function Roe(e){return HL.apply(this,arguments)}function HL(){return HL=wg(Js().mark(function e(t){return Js().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",Promise.resolve().then(function(){var c;(c=t[b1])===null||c===void 0||c.unmount(),delete t[b1]}));case 1:case"end":return a.stop()}},e)})),HL.apply(this,arguments)}function Ioe(e){yoe(e)}function woe(e){return WL.apply(this,arguments)}function WL(){return WL=wg(Js().mark(function e(t){return Js().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(RI===void 0){a.next=2;break}return a.abrupt("return",Roe(t));case 2:Ioe(t);case 3:case"end":return a.stop()}},e)})),WL.apply(this,arguments)}const II=function(e){if(!e)return!1;if(e instanceof Element){if(e.offsetParent)return!0;if(e.getBBox){var t=e.getBBox(),i=t.width,a=t.height;if(i||a)return!0}if(e.getBoundingClientRect){var c=e.getBoundingClientRect(),u=c.width,f=c.height;if(u||f)return!0}}return!1},Ooe=e=>{const{componentCls:t,colorPrimary:i}=e;return{[t]:{position:"absolute",background:"transparent",pointerEvents:"none",boxSizing:"border-box",color:`var(--wave-color, ${i})`,boxShadow:"0 0 0 0 currentcolor",opacity:.2,"&.wave-motion-appear":{transition:[`box-shadow 0.4s ${e.motionEaseOutCirc}`,`opacity 2s ${e.motionEaseOutCirc}`].join(","),"&-active":{boxShadow:"0 0 0 6px currentcolor",opacity:0}}}}},Aoe=Al("Wave",e=>[Ooe(e)]);function Noe(e){const t=(e||"").match(/rgba?\((\d*), (\d*), (\d*)(, [\d.]*)?\)/);return t&&t[1]&&t[2]&&t[3]?!(t[1]===t[2]&&t[2]===t[3]):!0}function dP(e){return e&&e!=="#fff"&&e!=="#ffffff"&&e!=="rgb(255, 255, 255)"&&e!=="rgba(255, 255, 255, 1)"&&Noe(e)&&!/rgba\((?:\d*, ){3}0\)/.test(e)&&e!=="transparent"}function xoe(e){const{borderTopColor:t,borderColor:i,backgroundColor:a}=getComputedStyle(e);return dP(t)?t:dP(i)?i:dP(a)?a:null}function hP(e){return Number.isNaN(e)?0:e}const Poe=e=>{const{className:t,target:i}=e,a=C.useRef(null),[c,u]=C.useState(null),[f,m]=C.useState([]),[g,E]=C.useState(0),[y,T]=C.useState(0),[R,P]=C.useState(0),[O,N]=C.useState(0),[M,D]=C.useState(!1),x={left:g,top:y,width:R,height:O,borderRadius:f.map(V=>`${V}px`).join(" ")};c&&(x["--wave-color"]=c);function k(){const V=getComputedStyle(i);u(xoe(i));const H=V.position==="static",{borderLeftWidth:$,borderTopWidth:G}=V;E(H?i.offsetLeft:hP(-parseFloat($))),T(H?i.offsetTop:hP(-parseFloat(G))),P(i.offsetWidth),N(i.offsetHeight);const{borderTopLeftRadius:K,borderTopRightRadius:Q,borderBottomLeftRadius:z,borderBottomRightRadius:ie}=V;m([K,Q,ie,z].map(J=>hP(parseFloat(J))))}return C.useEffect(()=>{if(i){const V=Zo(()=>{k(),D(!0)});let H;return typeof ResizeObserver<"u"&&(H=new ResizeObserver(k),H.observe(i)),()=>{Zo.cancel(V),H==null||H.disconnect()}}},[]),M?C.createElement(Tp,{visible:!0,motionAppear:!0,motionName:"wave-motion",motionDeadline:5e3,onAppearEnd:(V,H)=>{var $;if(H.deadline||H.propertyName==="opacity"){const G=($=a.current)===null||$===void 0?void 0:$.parentElement;woe(G).then(()=>{G==null||G.remove()})}return!1}},V=>{let{className:H}=V;return C.createElement("div",{ref:a,className:nt(t,H),style:x})}):null};function Doe(e,t){const i=document.createElement("div");i.style.position="absolute",i.style.left="0px",i.style.top="0px",e==null||e.insertBefore(i,e==null?void 0:e.firstChild),wG(C.createElement(Poe,{target:e,className:t}),i)}function Loe(e,t){function i(){const a=e.current;Doe(a,t)}return i}const koe=e=>{const{children:t,disabled:i}=e,{getPrefixCls:a}=C.useContext(wr),c=C.useRef(null),u=a("wave"),[,f]=Aoe(u),m=Loe(c,nt(u,f));if(Nt.useEffect(()=>{const E=c.current;if(!E||E.nodeType!==1||i)return;const y=T=>{T.target.tagName==="INPUT"||!II(T.target)||!E.getAttribute||E.getAttribute("disabled")||E.disabled||E.className.includes("disabled")||E.className.includes("-leave")||m()};return E.addEventListener("click",y,!0),()=>{E.removeEventListener("click",y,!0)}},[i]),!Nt.isValidElement(t))return t??null;const g=Cg(t)?Ol(t.ref,c):c;return Rl(t,{ref:g})},Moe=koe;globalThis&&globalThis.__rest;const OG=C.createContext(null),W2=(e,t)=>{const i=C.useContext(OG),a=C.useMemo(()=>{if(!i)return"";const{compactDirection:c,isFirstItem:u,isLastItem:f}=i,m=c==="vertical"?"-vertical-":"-";return nt({[`${e}-compact${m}item`]:!0,[`${e}-compact${m}first-item`]:u,[`${e}-compact${m}last-item`]:f,[`${e}-compact${m}item-rtl`]:t==="rtl"})},[e,t,i]);return{compactSize:i==null?void 0:i.compactSize,compactDirection:i==null?void 0:i.compactDirection,compactItemClassnames:a}},GL=e=>{let{children:t}=e;return C.createElement(OG.Provider,{value:null},t)},Uoe=C.forwardRef((e,t)=>{const{className:i,style:a,children:c,prefixCls:u}=e,f=nt(`${u}-icon`,i);return Nt.createElement("span",{ref:t,className:f,style:a},c)}),AG=Uoe,J8=C.forwardRef((e,t)=>{let{prefixCls:i,className:a,style:c,iconClassName:u}=e;const f=nt(`${i}-loading-icon`,a);return Nt.createElement(AG,{prefixCls:i,className:f,style:c,ref:t},Nt.createElement(IG,{className:u}))}),fP=()=>({width:0,opacity:0,transform:"scale(0)"}),pP=e=>({width:e.scrollWidth,opacity:1,transform:"scale(1)"}),Foe=e=>{let{prefixCls:t,loading:i,existIcon:a,className:c,style:u}=e;const f=!!i;return a?Nt.createElement(J8,{prefixCls:t,className:c,style:u}):Nt.createElement(Tp,{visible:f,motionName:`${t}-loading-icon-motion`,removeOnLeave:!0,onAppearStart:fP,onAppearActive:pP,onEnterStart:fP,onEnterActive:pP,onLeaveStart:pP,onLeaveActive:fP},(m,g)=>{let{className:E,style:y}=m;return Nt.createElement(J8,{prefixCls:t,className:c,style:Object.assign(Object.assign({},u),y),ref:g,iconClassName:E})})},Voe=Foe;var joe=globalThis&&globalThis.__rest||function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(i[a[c]]=e[a[c]]);return i};const NG=C.createContext(void 0),Boe=e=>{const{getPrefixCls:t,direction:i}=C.useContext(wr),{prefixCls:a,size:c,className:u}=e,f=joe(e,["prefixCls","size","className"]),m=t("btn-group",a),[,,g]=bg();let E="";switch(c){case"large":E="lg";break;case"small":E="sm";break}const y=nt(m,{[`${m}-${E}`]:E,[`${m}-rtl`]:i==="rtl"},u,g);return C.createElement(NG.Provider,{value:c},C.createElement("div",Object.assign({},f,{className:y})))},$oe=Boe,Q8=/^[\u4e00-\u9fa5]{2}$/,zL=Q8.test.bind(Q8);function Hoe(e){return typeof e=="string"}function mP(e){return e==="text"||e==="link"}function Woe(e,t){if(e==null)return;const i=t?" ":"";return typeof e!="string"&&typeof e!="number"&&Hoe(e.type)&&zL(e.props.children)?Rl(e,{children:e.props.children.split("").join(i)}):typeof e=="string"?zL(e)?Nt.createElement("span",null,e.split("").join(i)):Nt.createElement("span",null,e):TG(e)?Nt.createElement("span",null,e):e}function Goe(e,t){let i=!1;const a=[];return Nt.Children.forEach(e,c=>{const u=typeof c,f=u==="string"||u==="number";if(i&&f){const m=a.length-1,g=a[m];a[m]=`${g}${c}`}else a.push(c);i=f}),Nt.Children.map(a,c=>Woe(c,t))}function zoe(e,t,i){const{focusElCls:a,focus:c,borderElCls:u}=i,f=u?"> *":"",m=["hover",c?"focus":null,"active"].filter(Boolean).map(g=>`&:${g} ${f}`).join(",");return{[`&-item:not(${t}-last-item)`]:{marginInlineEnd:-e.lineWidth},"&-item":Object.assign(Object.assign({[m]:{zIndex:2}},a?{[`&${a}`]:{zIndex:2}}:{}),{[`&[disabled] ${f}`]:{zIndex:0}})}}function Koe(e,t,i){const{borderElCls:a}=i,c=a?`> ${a}`:"";return{[`&-item:not(${t}-first-item):not(${t}-last-item) ${c}`]:{borderRadius:0},[`&-item:not(${t}-last-item)${t}-first-item`]:{[`& ${c}, &${e}-sm ${c}, &${e}-lg ${c}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&-item:not(${t}-first-item)${t}-last-item`]:{[`& ${c}, &${e}-sm ${c}, &${e}-lg ${c}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}}}function xG(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{focus:!0};const{componentCls:i}=e,a=`${i}-compact`;return{[a]:Object.assign(Object.assign({},zoe(e,a,t)),Koe(i,a,t))}}function qoe(e,t){return{[`&-item:not(${t}-last-item)`]:{marginBottom:-e.lineWidth},"&-item":{"&:hover,&:focus,&:active":{zIndex:2},"&[disabled]":{zIndex:0}}}}function Yoe(e,t){return{[`&-item:not(${t}-first-item):not(${t}-last-item)`]:{borderRadius:0},[`&-item${t}-first-item:not(${t}-last-item)`]:{[`&, &${e}-sm, &${e}-lg`]:{borderEndEndRadius:0,borderEndStartRadius:0}},[`&-item${t}-last-item:not(${t}-first-item)`]:{[`&, &${e}-sm, &${e}-lg`]:{borderStartStartRadius:0,borderStartEndRadius:0}}}}function Xoe(e){const t=`${e.componentCls}-compact-vertical`;return{[t]:Object.assign(Object.assign({},qoe(e,t)),Yoe(e.componentCls,t))}}const Z8=(e,t)=>({[`> span, > ${e}`]:{"&:not(:last-child)":{[`&, & > ${e}`]:{"&:not(:disabled)":{borderInlineEndColor:t}}},"&:not(:first-child)":{[`&, & > ${e}`]:{"&:not(:disabled)":{borderInlineStartColor:t}}}}}),Joe=e=>{const{componentCls:t,fontSize:i,lineWidth:a,colorPrimaryHover:c,colorErrorHover:u}=e;return{[`${t}-group`]:[{position:"relative",display:"inline-flex",[`> span, > ${t}`]:{"&:not(:last-child)":{[`&, & > ${t}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},"&:not(:first-child)":{marginInlineStart:-a,[`&, & > ${t}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}},[t]:{position:"relative",zIndex:1,"&:hover,\n          &:focus,\n          &:active":{zIndex:2},"&[disabled]":{zIndex:0}},[`${t}-icon-only`]:{fontSize:i}},Z8(`${t}-primary`,c),Z8(`${t}-danger`,u)]}},Qoe=Joe,Zoe=e=>{const{componentCls:t,iconCls:i,buttonFontWeight:a}=e;return{[t]:{outline:"none",position:"relative",display:"inline-block",fontWeight:a,whiteSpace:"nowrap",textAlign:"center",backgroundImage:"none",backgroundColor:"transparent",border:`${e.lineWidth}px ${e.lineType} transparent`,cursor:"pointer",transition:`all ${e.motionDurationMid} ${e.motionEaseInOut}`,userSelect:"none",touchAction:"manipulation",lineHeight:e.lineHeight,color:e.colorText,"&:disabled > *":{pointerEvents:"none"},"> span":{display:"inline-block"},[`${t}-icon`]:{lineHeight:0},[`> ${i} + span, > span + ${i}`]:{marginInlineStart:e.marginXS},[`&:not(${t}-icon-only) > ${t}-icon`]:{[`&${t}-loading-icon, &:not(:last-child)`]:{marginInlineEnd:e.marginXS}},"> a":{color:"currentColor"},"&:not(:disabled)":Object.assign({},Lre(e)),[`&-icon-only${t}-compact-item`]:{flex:"none"},[`&-compact-item${t}-primary`]:{[`&:not([disabled]) + ${t}-compact-item${t}-primary:not([disabled])`]:{position:"relative","&:before":{position:"absolute",top:-e.lineWidth,insetInlineStart:-e.lineWidth,display:"inline-block",width:e.lineWidth,height:`calc(100% + ${e.lineWidth*2}px)`,backgroundColor:e.colorPrimaryHover,content:'""'}}},"&-compact-vertical-item":{[`&${t}-primary`]:{[`&:not([disabled]) + ${t}-compact-vertical-item${t}-primary:not([disabled])`]:{position:"relative","&:before":{position:"absolute",top:-e.lineWidth,insetInlineStart:-e.lineWidth,display:"inline-block",width:`calc(100% + ${e.lineWidth*2}px)`,height:e.lineWidth,backgroundColor:e.colorPrimaryHover,content:'""'}}}}}}},dd=(e,t,i)=>({[`&:not(:disabled):not(${e}-disabled)`]:{"&:hover":t,"&:active":i}}),eae=e=>({minWidth:e.controlHeight,paddingInlineStart:0,paddingInlineEnd:0,borderRadius:"50%"}),tae=e=>({borderRadius:e.controlHeight,paddingInlineStart:e.controlHeight/2,paddingInlineEnd:e.controlHeight/2}),nae=e=>({cursor:"not-allowed",borderColor:e.colorBorder,color:e.colorTextDisabled,backgroundColor:e.colorBgContainerDisabled,boxShadow:"none"}),R1=(e,t,i,a,c,u,f)=>({[`&${e}-background-ghost`]:Object.assign(Object.assign({color:t||void 0,backgroundColor:"transparent",borderColor:i||void 0,boxShadow:"none"},dd(e,Object.assign({backgroundColor:"transparent"},u),Object.assign({backgroundColor:"transparent"},f))),{"&:disabled":{cursor:"not-allowed",color:a||void 0,borderColor:c||void 0}})}),G2=e=>({[`&:disabled, &${e.componentCls}-disabled`]:Object.assign({},nae(e))}),PG=e=>Object.assign({},G2(e)),I1=e=>({[`&:disabled, &${e.componentCls}-disabled`]:{cursor:"not-allowed",color:e.colorTextDisabled}}),DG=e=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},PG(e)),{backgroundColor:e.colorBgContainer,borderColor:e.colorBorder,boxShadow:`0 ${e.controlOutlineWidth}px 0 ${e.controlTmpOutline}`}),dd(e.componentCls,{color:e.colorPrimaryHover,borderColor:e.colorPrimaryHover},{color:e.colorPrimaryActive,borderColor:e.colorPrimaryActive})),R1(e.componentCls,e.colorBgContainer,e.colorBgContainer,e.colorTextDisabled,e.colorBorder)),{[`&${e.componentCls}-dangerous`]:Object.assign(Object.assign(Object.assign({color:e.colorError,borderColor:e.colorError},dd(e.componentCls,{color:e.colorErrorHover,borderColor:e.colorErrorBorderHover},{color:e.colorErrorActive,borderColor:e.colorErrorActive})),R1(e.componentCls,e.colorError,e.colorError,e.colorTextDisabled,e.colorBorder)),G2(e))}),rae=e=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},PG(e)),{color:e.colorTextLightSolid,backgroundColor:e.colorPrimary,boxShadow:`0 ${e.controlOutlineWidth}px 0 ${e.controlOutline}`}),dd(e.componentCls,{color:e.colorTextLightSolid,backgroundColor:e.colorPrimaryHover},{color:e.colorTextLightSolid,backgroundColor:e.colorPrimaryActive})),R1(e.componentCls,e.colorPrimary,e.colorPrimary,e.colorTextDisabled,e.colorBorder,{color:e.colorPrimaryHover,borderColor:e.colorPrimaryHover},{color:e.colorPrimaryActive,borderColor:e.colorPrimaryActive})),{[`&${e.componentCls}-dangerous`]:Object.assign(Object.assign(Object.assign({backgroundColor:e.colorError,boxShadow:`0 ${e.controlOutlineWidth}px 0 ${e.colorErrorOutline}`},dd(e.componentCls,{backgroundColor:e.colorErrorHover},{backgroundColor:e.colorErrorActive})),R1(e.componentCls,e.colorError,e.colorError,e.colorTextDisabled,e.colorBorder,{color:e.colorErrorHover,borderColor:e.colorErrorHover},{color:e.colorErrorActive,borderColor:e.colorErrorActive})),G2(e))}),iae=e=>Object.assign(Object.assign({},DG(e)),{borderStyle:"dashed"}),oae=e=>Object.assign(Object.assign(Object.assign({color:e.colorLink},dd(e.componentCls,{color:e.colorLinkHover},{color:e.colorLinkActive})),I1(e)),{[`&${e.componentCls}-dangerous`]:Object.assign(Object.assign({color:e.colorError},dd(e.componentCls,{color:e.colorErrorHover},{color:e.colorErrorActive})),I1(e))}),aae=e=>Object.assign(Object.assign(Object.assign({},dd(e.componentCls,{color:e.colorText,backgroundColor:e.colorBgTextHover},{color:e.colorText,backgroundColor:e.colorBgTextActive})),I1(e)),{[`&${e.componentCls}-dangerous`]:Object.assign(Object.assign({color:e.colorError},I1(e)),dd(e.componentCls,{color:e.colorErrorHover,backgroundColor:e.colorErrorBg},{color:e.colorErrorHover,backgroundColor:e.colorErrorBg}))}),sae=e=>{const{componentCls:t}=e;return{[`${t}-default`]:DG(e),[`${t}-primary`]:rae(e),[`${t}-dashed`]:iae(e),[`${t}-link`]:oae(e),[`${t}-text`]:aae(e)}},z2=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const{componentCls:i,controlHeight:a,fontSize:c,lineHeight:u,lineWidth:f,borderRadius:m,buttonPaddingHorizontal:g,iconCls:E}=e,y=Math.max(0,(a-c*u)/2-f),T=g-f,R=`${i}-icon-only`;return[{[`${i}${t}`]:{fontSize:c,height:a,padding:`${y}px ${T}px`,borderRadius:m,[`&${R}`]:{width:a,paddingInlineStart:0,paddingInlineEnd:0,[`&${i}-round`]:{width:"auto"},[E]:{fontSize:e.buttonIconOnlyFontSize}},[`&${i}-loading`]:{opacity:e.opacityLoading,cursor:"default"},[`${i}-loading-icon`]:{transition:`width ${e.motionDurationSlow} ${e.motionEaseInOut}, opacity ${e.motionDurationSlow} ${e.motionEaseInOut}`}}},{[`${i}${i}-circle${t}`]:eae(e)},{[`${i}${i}-round${t}`]:tae(e)}]},cae=e=>z2(e),lae=e=>{const t=na(e,{controlHeight:e.controlHeightSM,padding:e.paddingXS,buttonPaddingHorizontal:8,borderRadius:e.borderRadiusSM,buttonIconOnlyFontSize:e.fontSizeLG-2});return z2(t,`${e.componentCls}-sm`)},uae=e=>{const t=na(e,{controlHeight:e.controlHeightLG,fontSize:e.fontSizeLG,borderRadius:e.borderRadiusLG,buttonIconOnlyFontSize:e.fontSizeLG+2});return z2(t,`${e.componentCls}-lg`)},dae=e=>{const{componentCls:t}=e;return{[t]:{[`&${t}-block`]:{width:"100%"}}}},hae=Al("Button",e=>{const{controlTmpOutline:t,paddingContentHorizontal:i}=e,a=na(e,{colorOutlineDefault:t,buttonPaddingHorizontal:i,buttonIconOnlyFontSize:e.fontSizeLG,buttonFontWeight:400});return[Zoe(a),lae(a),cae(a),uae(a),dae(a),sae(a),Qoe(a),xG(e),Xoe(e)]});var fae=globalThis&&globalThis.__rest||function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(i[a[c]]=e[a[c]]);return i};function pae(e){if(typeof e=="object"&&e){const t=e==null?void 0:e.delay;return{loading:!1,delay:!Number.isNaN(t)&&typeof t=="number"?t:0}}return{loading:!!e,delay:0}}const mae=(e,t)=>{var i,a;const{loading:c=!1,prefixCls:u,type:f="default",danger:m,shape:g="default",size:E,styles:y,disabled:T,className:R,rootClassName:P,children:O,icon:N,ghost:M=!1,block:D=!1,htmlType:x="button",classNames:k,style:V={}}=e,H=fae(e,["loading","prefixCls","type","danger","shape","size","styles","disabled","className","rootClassName","children","icon","ghost","block","htmlType","classNames","style"]),{getPrefixCls:$,autoInsertSpaceInButton:G,direction:K,button:Q}=C.useContext(wr),z=$("btn",u),[ie,J]=hae(z),Y=C.useContext(DS),oe=T??Y,ue=C.useContext(NG),he=C.useMemo(()=>pae(c),[c]),[Se,ve]=C.useState(he.loading),[Re,Ce]=C.useState(!1),fe=Ol(t,C.createRef()),_e=C.Children.count(O)===1&&!N&&!mP(f);C.useEffect(()=>{let at=null;he.delay>0?at=setTimeout(()=>{at=null,ve(!0)},he.delay):ve(he.loading);function ht(){at&&(clearTimeout(at),at=null)}return ht},[he]),C.useEffect(()=>{if(!fe||!fe.current||G===!1)return;const at=fe.current.textContent;_e&&zL(at)?Re||Ce(!0):Re&&Ce(!1)},[fe]);const ge=at=>{const{onClick:ht}=e;if(Se||oe){at.preventDefault();return}ht==null||ht(at)},Ue=G!==!1,{compactSize:Fe,compactItemClassnames:ot}=W2(z,K),qe={large:"lg",small:"sm",middle:void 0},wt=Rg(at=>{var ht,Ot;return(Ot=(ht=E??Fe)!==null&&ht!==void 0?ht:ue)!==null&&Ot!==void 0?Ot:at}),kt=wt&&qe[wt]||"",_t=Se?"loading":N,vt=ys(H,["navigate"]),At=nt(z,J,{[`${z}-${g}`]:g!=="default"&&g,[`${z}-${f}`]:f,[`${z}-${kt}`]:kt,[`${z}-icon-only`]:!O&&O!==0&&!!_t,[`${z}-background-ghost`]:M&&!mP(f),[`${z}-loading`]:Se,[`${z}-two-chinese-chars`]:Re&&Ue&&!Se,[`${z}-block`]:D,[`${z}-dangerous`]:!!m,[`${z}-rtl`]:K==="rtl"},ot,R,P,Q==null?void 0:Q.className),it=Object.assign(Object.assign({},Q==null?void 0:Q.style),V),Mt=nt(k==null?void 0:k.icon,(i=Q==null?void 0:Q.classNames)===null||i===void 0?void 0:i.icon),rn=Object.assign(Object.assign({},(y==null?void 0:y.icon)||{}),((a=Q==null?void 0:Q.styles)===null||a===void 0?void 0:a.icon)||{}),Ft=N&&!Se?Nt.createElement(AG,{prefixCls:z,className:Mt,style:rn},N):Nt.createElement(Voe,{existIcon:!!N,prefixCls:z,loading:!!Se}),ft=O||O===0?Goe(O,_e&&Ue):null;if(vt.href!==void 0)return ie(Nt.createElement("a",Object.assign({},vt,{className:nt(At,{[`${z}-disabled`]:oe}),style:it,onClick:ge,ref:fe}),Ft,ft));let dt=Nt.createElement("button",Object.assign({},H,{type:x,className:At,style:it,onClick:ge,disabled:oe,ref:fe}),Ft,ft);return mP(f)||(dt=Nt.createElement(Moe,{disabled:!!Se},dt)),ie(dt)},K2=C.forwardRef(mae);K2.Group=$oe;K2.__ANT_BUTTON=!0;const Do=K2,gP=()=>({height:0,opacity:0}),e6=e=>{const{scrollHeight:t}=e;return{height:t,opacity:1}},gae=e=>({height:e?e.offsetHeight:0}),vP=(e,t)=>(t==null?void 0:t.deadline)===!0||t.propertyName==="height",vae=function(){return{motionName:`${arguments.length>0&&arguments[0]!==void 0?arguments[0]:"ant"}-motion-collapse`,onAppearStart:gP,onEnterStart:gP,onAppearActive:e6,onEnterActive:e6,onLeaveStart:gae,onLeaveActive:gP,onAppearEnd:vP,onEnterEnd:vP,onLeaveEnd:vP,motionDeadline:500}},Eae=(e,t,i)=>i!==void 0?i:`${e}-${t}`,KL=vae;var LG=C.createContext(null),t6=[];function _ae(e,t){var i=C.useState(function(){if(!_s())return null;var O=document.createElement("div");return O}),a=Ye(i,1),c=a[0],u=C.useRef(!1),f=C.useContext(LG),m=C.useState(t6),g=Ye(m,2),E=g[0],y=g[1],T=f||(u.current?void 0:function(O){y(function(N){var M=[O].concat(gt(N));return M})});function R(){c.parentElement||document.body.appendChild(c),u.current=!0}function P(){var O;(O=c.parentElement)===null||O===void 0||O.removeChild(c),u.current=!1}return Ti(function(){return e?f?f(R):R():P(),P},[e]),Ti(function(){E.length&&(E.forEach(function(O){return O()}),y(t6))},[E]),[c,T]}var EP;function Sae(e){if(typeof document>"u")return 0;if(e||EP===void 0){var t=document.createElement("div");t.style.width="100%",t.style.height="200px";var i=document.createElement("div"),a=i.style;a.position="absolute",a.top="0",a.left="0",a.pointerEvents="none",a.visibility="hidden",a.width="200px",a.height="150px",a.overflow="hidden",i.appendChild(t),document.body.appendChild(i);var c=t.offsetWidth;i.style.overflow="scroll";var u=t.offsetWidth;c===u&&(u=i.clientWidth),document.body.removeChild(i),EP=c-u}return EP}function yae(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth}var Cae="rc-util-locker-".concat(Date.now()),n6=0;function Tae(e){var t=!!e,i=C.useState(function(){return n6+=1,"".concat(Cae,"_").concat(n6)}),a=Ye(i,1),c=a[0];Ti(function(){if(t){var u=Sae(),f=yae();pS(`
html body {
  overflow-y: hidden;
  `.concat(f?"width: calc(100% - ".concat(u,"px);"):"",`
}`),c)}else g1(c);return function(){g1(c)}},[t,c])}var r6=!1;function bae(e){return typeof e=="boolean"&&(r6=e),r6}var i6=function(t){return t===!1?!1:!_s()||!t?null:typeof t=="string"?document.querySelector(t):typeof t=="function"?t():t},kG=C.forwardRef(function(e,t){var i=e.open,a=e.autoLock,c=e.getContainer;e.debug;var u=e.autoDestroy,f=u===void 0?!0:u,m=e.children,g=C.useState(i),E=Ye(g,2),y=E[0],T=E[1],R=y||i;C.useEffect(function(){(f||i)&&T(i)},[i,f]);var P=C.useState(function(){return i6(c)}),O=Ye(P,2),N=O[0],M=O[1];C.useEffect(function(){var ie=i6(c);M(ie??null)});var D=_ae(R&&!N),x=Ye(D,2),k=x[0],V=x[1],H=N??k;Tae(a&&i&&_s()&&(H===k||H===document.body));var $=null;if(m&&Cg(m)&&t){var G=m;$=G.ref}var K=b2($,t);if(!R||!_s()||N===void 0)return null;var Q=H===!1||bae(),z=m;return t&&(z=C.cloneElement(m,{ref:K})),C.createElement(LG.Provider,{value:V},Q?z:Wh.createPortal(z,H))});function Rae(){var e=Ae({},rg);return e.useId}var o6=0;function Iae(e){var t=C.useState("ssr-id"),i=Ye(t,2),a=i[0],c=i[1],u=Rae(),f=u==null?void 0:u();return C.useEffect(function(){if(!u){var m=o6;o6+=1,c("rc_unique_".concat(m))}},[]),e||f||a}var MG=function(t){if(_s()&&window.document.documentElement){var i=Array.isArray(t)?t:[t],a=window.document.documentElement;return i.some(function(c){return c in a.style})}return!1},wae=function(t,i){if(!MG(t))return!1;var a=document.createElement("div"),c=a.style[t];return a.style[t]=i,a.style[t]!==c};function a6(e,t){return!Array.isArray(e)&&t!==void 0?wae(e,t):MG(e)}const Oae=()=>_s()&&window.document.documentElement;let nR;const Aae=()=>{if(!Oae())return!1;if(nR!==void 0)return nR;const e=document.createElement("div");return e.style.display="flex",e.style.flexDirection="column",e.style.rowGap="1px",e.appendChild(document.createElement("div")),e.appendChild(document.createElement("div")),document.body.appendChild(e),nR=e.scrollHeight===1,document.body.removeChild(e),nR};var ip="RC_FORM_INTERNAL_HOOKS",kr=function(){Es(!1,"Can not find FormContext. Please make sure you wrap Field under Form.")},vp=C.createContext({getFieldValue:kr,getFieldsValue:kr,getFieldError:kr,getFieldWarning:kr,getFieldsError:kr,isFieldsTouched:kr,isFieldTouched:kr,isFieldValidating:kr,isFieldsValidating:kr,resetFields:kr,setFields:kr,setFieldValue:kr,setFieldsValue:kr,validateFields:kr,submit:kr,getInternalHooks:function(){return kr(),{dispatch:kr,initEntityValue:kr,registerField:kr,useSubscribe:kr,setInitialValues:kr,destroyForm:kr,setCallbacks:kr,registerWatch:kr,getFields:kr,setValidateMessages:kr,setPreserve:kr,getInitialValue:kr}}}),vS=C.createContext(null);function qL(e){return e==null?[]:Array.isArray(e)?e:[e]}function Nae(e){return e&&!!e._init}function op(){return op=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},op.apply(this,arguments)}function xae(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,ES(e,t)}function YL(e){return YL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},YL(e)}function ES(e,t){return ES=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,c){return a.__proto__=c,a},ES(e,t)}function Pae(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function DR(e,t,i){return Pae()?DR=Reflect.construct.bind():DR=function(c,u,f){var m=[null];m.push.apply(m,u);var g=Function.bind.apply(c,m),E=new g;return f&&ES(E,f.prototype),E},DR.apply(null,arguments)}function Dae(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function XL(e){var t=typeof Map=="function"?new Map:void 0;return XL=function(a){if(a===null||!Dae(a))return a;if(typeof a!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t<"u"){if(t.has(a))return t.get(a);t.set(a,c)}function c(){return DR(a,arguments,YL(this).constructor)}return c.prototype=Object.create(a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),ES(c,a)},XL(e)}var Lae=/%[sdj%]/g,kae=function(){};typeof process<"u"&&process.env;function JL(e){if(!e||!e.length)return null;var t={};return e.forEach(function(i){var a=i.field;t[a]=t[a]||[],t[a].push(i)}),t}function zs(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),a=1;a<t;a++)i[a-1]=arguments[a];var c=0,u=i.length;if(typeof e=="function")return e.apply(null,i);if(typeof e=="string"){var f=e.replace(Lae,function(m){if(m==="%%")return"%";if(c>=u)return m;switch(m){case"%s":return String(i[c++]);case"%d":return Number(i[c++]);case"%j":try{return JSON.stringify(i[c++])}catch{return"[Circular]"}break;default:return m}});return f}return e}function Mae(e){return e==="string"||e==="url"||e==="hex"||e==="email"||e==="date"||e==="pattern"}function bo(e,t){return!!(e==null||t==="array"&&Array.isArray(e)&&!e.length||Mae(t)&&typeof e=="string"&&!e)}function Uae(e,t,i){var a=[],c=0,u=e.length;function f(m){a.push.apply(a,m||[]),c++,c===u&&i(a)}e.forEach(function(m){t(m,f)})}function s6(e,t,i){var a=0,c=e.length;function u(f){if(f&&f.length){i(f);return}var m=a;a=a+1,m<c?t(e[m],u):i([])}u([])}function Fae(e){var t=[];return Object.keys(e).forEach(function(i){t.push.apply(t,e[i]||[])}),t}var c6=function(e){xae(t,e);function t(i,a){var c;return c=e.call(this,"Async Validation Error")||this,c.errors=i,c.fields=a,c}return t}(XL(Error));function Vae(e,t,i,a,c){if(t.first){var u=new Promise(function(R,P){var O=function(D){return a(D),D.length?P(new c6(D,JL(D))):R(c)},N=Fae(e);s6(N,i,O)});return u.catch(function(R){return R}),u}var f=t.firstFields===!0?Object.keys(e):t.firstFields||[],m=Object.keys(e),g=m.length,E=0,y=[],T=new Promise(function(R,P){var O=function(M){if(y.push.apply(y,M),E++,E===g)return a(y),y.length?P(new c6(y,JL(y))):R(c)};m.length||(a(y),R(c)),m.forEach(function(N){var M=e[N];f.indexOf(N)!==-1?s6(M,i,O):Uae(M,i,O)})});return T.catch(function(R){return R}),T}function jae(e){return!!(e&&e.message!==void 0)}function Bae(e,t){for(var i=e,a=0;a<t.length;a++){if(i==null)return i;i=i[t[a]]}return i}function l6(e,t){return function(i){var a;return e.fullFields?a=Bae(t,e.fullFields):a=t[i.field||e.fullField],jae(i)?(i.field=i.field||e.fullField,i.fieldValue=a,i):{message:typeof i=="function"?i():i,fieldValue:a,field:i.field||e.fullField}}}function u6(e,t){if(t){for(var i in t)if(t.hasOwnProperty(i)){var a=t[i];typeof a=="object"&&typeof e[i]=="object"?e[i]=op({},e[i],a):e[i]=a}}return e}var UG=function(t,i,a,c,u,f){t.required&&(!a.hasOwnProperty(t.field)||bo(i,f||t.type))&&c.push(zs(u.messages.required,t.fullField))},$ae=function(t,i,a,c,u){(/^\s+$/.test(i)||i==="")&&c.push(zs(u.messages.whitespace,t.fullField))},rR,Hae=function(){if(rR)return rR;var e="[a-fA-F\\d:]",t=function(V){return V&&V.includeBoundaries?"(?:(?<=\\s|^)(?="+e+")|(?<="+e+")(?=\\s|$))":""},i="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",a="[a-fA-F\\d]{1,4}",c=(`
(?:
(?:`+a+":){7}(?:"+a+`|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:`+a+":){6}(?:"+i+"|:"+a+`|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:`+a+":){5}(?::"+i+"|(?::"+a+`){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:`+a+":){4}(?:(?::"+a+"){0,1}:"+i+"|(?::"+a+`){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:`+a+":){3}(?:(?::"+a+"){0,2}:"+i+"|(?::"+a+`){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:`+a+":){2}(?:(?::"+a+"){0,3}:"+i+"|(?::"+a+`){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:`+a+":){1}(?:(?::"+a+"){0,4}:"+i+"|(?::"+a+`){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::`+a+"){0,5}:"+i+"|(?::"+a+`){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`).replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),u=new RegExp("(?:^"+i+"$)|(?:^"+c+"$)"),f=new RegExp("^"+i+"$"),m=new RegExp("^"+c+"$"),g=function(V){return V&&V.exact?u:new RegExp("(?:"+t(V)+i+t(V)+")|(?:"+t(V)+c+t(V)+")","g")};g.v4=function(k){return k&&k.exact?f:new RegExp(""+t(k)+i+t(k),"g")},g.v6=function(k){return k&&k.exact?m:new RegExp(""+t(k)+c+t(k),"g")};var E="(?:(?:[a-z]+:)?//)",y="(?:\\S+(?::\\S*)?@)?",T=g.v4().source,R=g.v6().source,P="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",O="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",N="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",M="(?::\\d{2,5})?",D='(?:[/?#][^\\s"]*)?',x="(?:"+E+"|www\\.)"+y+"(?:localhost|"+T+"|"+R+"|"+P+O+N+")"+M+D;return rR=new RegExp("(?:^"+x+"$)","i"),rR},d6={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},O_={integer:function(t){return O_.number(t)&&parseInt(t,10)===t},float:function(t){return O_.number(t)&&!O_.integer(t)},array:function(t){return Array.isArray(t)},regexp:function(t){if(t instanceof RegExp)return!0;try{return!!new RegExp(t)}catch{return!1}},date:function(t){return typeof t.getTime=="function"&&typeof t.getMonth=="function"&&typeof t.getYear=="function"&&!isNaN(t.getTime())},number:function(t){return isNaN(t)?!1:typeof t=="number"},object:function(t){return typeof t=="object"&&!O_.array(t)},method:function(t){return typeof t=="function"},email:function(t){return typeof t=="string"&&t.length<=320&&!!t.match(d6.email)},url:function(t){return typeof t=="string"&&t.length<=2048&&!!t.match(Hae())},hex:function(t){return typeof t=="string"&&!!t.match(d6.hex)}},Wae=function(t,i,a,c,u){if(t.required&&i===void 0){UG(t,i,a,c,u);return}var f=["integer","float","array","regexp","object","method","email","number","date","url","hex"],m=t.type;f.indexOf(m)>-1?O_[m](i)||c.push(zs(u.messages.types[m],t.fullField,t.type)):m&&typeof i!==t.type&&c.push(zs(u.messages.types[m],t.fullField,t.type))},Gae=function(t,i,a,c,u){var f=typeof t.len=="number",m=typeof t.min=="number",g=typeof t.max=="number",E=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,y=i,T=null,R=typeof i=="number",P=typeof i=="string",O=Array.isArray(i);if(R?T="number":P?T="string":O&&(T="array"),!T)return!1;O&&(y=i.length),P&&(y=i.replace(E,"_").length),f?y!==t.len&&c.push(zs(u.messages[T].len,t.fullField,t.len)):m&&!g&&y<t.min?c.push(zs(u.messages[T].min,t.fullField,t.min)):g&&!m&&y>t.max?c.push(zs(u.messages[T].max,t.fullField,t.max)):m&&g&&(y<t.min||y>t.max)&&c.push(zs(u.messages[T].range,t.fullField,t.min,t.max))},y0="enum",zae=function(t,i,a,c,u){t[y0]=Array.isArray(t[y0])?t[y0]:[],t[y0].indexOf(i)===-1&&c.push(zs(u.messages[y0],t.fullField,t[y0].join(", ")))},Kae=function(t,i,a,c,u){if(t.pattern){if(t.pattern instanceof RegExp)t.pattern.lastIndex=0,t.pattern.test(i)||c.push(zs(u.messages.pattern.mismatch,t.fullField,i,t.pattern));else if(typeof t.pattern=="string"){var f=new RegExp(t.pattern);f.test(i)||c.push(zs(u.messages.pattern.mismatch,t.fullField,i,t.pattern))}}},Kn={required:UG,whitespace:$ae,type:Wae,range:Gae,enum:zae,pattern:Kae},qae=function(t,i,a,c,u){var f=[],m=t.required||!t.required&&c.hasOwnProperty(t.field);if(m){if(bo(i,"string")&&!t.required)return a();Kn.required(t,i,c,f,u,"string"),bo(i,"string")||(Kn.type(t,i,c,f,u),Kn.range(t,i,c,f,u),Kn.pattern(t,i,c,f,u),t.whitespace===!0&&Kn.whitespace(t,i,c,f,u))}a(f)},Yae=function(t,i,a,c,u){var f=[],m=t.required||!t.required&&c.hasOwnProperty(t.field);if(m){if(bo(i)&&!t.required)return a();Kn.required(t,i,c,f,u),i!==void 0&&Kn.type(t,i,c,f,u)}a(f)},Xae=function(t,i,a,c,u){var f=[],m=t.required||!t.required&&c.hasOwnProperty(t.field);if(m){if(i===""&&(i=void 0),bo(i)&&!t.required)return a();Kn.required(t,i,c,f,u),i!==void 0&&(Kn.type(t,i,c,f,u),Kn.range(t,i,c,f,u))}a(f)},Jae=function(t,i,a,c,u){var f=[],m=t.required||!t.required&&c.hasOwnProperty(t.field);if(m){if(bo(i)&&!t.required)return a();Kn.required(t,i,c,f,u),i!==void 0&&Kn.type(t,i,c,f,u)}a(f)},Qae=function(t,i,a,c,u){var f=[],m=t.required||!t.required&&c.hasOwnProperty(t.field);if(m){if(bo(i)&&!t.required)return a();Kn.required(t,i,c,f,u),bo(i)||Kn.type(t,i,c,f,u)}a(f)},Zae=function(t,i,a,c,u){var f=[],m=t.required||!t.required&&c.hasOwnProperty(t.field);if(m){if(bo(i)&&!t.required)return a();Kn.required(t,i,c,f,u),i!==void 0&&(Kn.type(t,i,c,f,u),Kn.range(t,i,c,f,u))}a(f)},ese=function(t,i,a,c,u){var f=[],m=t.required||!t.required&&c.hasOwnProperty(t.field);if(m){if(bo(i)&&!t.required)return a();Kn.required(t,i,c,f,u),i!==void 0&&(Kn.type(t,i,c,f,u),Kn.range(t,i,c,f,u))}a(f)},tse=function(t,i,a,c,u){var f=[],m=t.required||!t.required&&c.hasOwnProperty(t.field);if(m){if(i==null&&!t.required)return a();Kn.required(t,i,c,f,u,"array"),i!=null&&(Kn.type(t,i,c,f,u),Kn.range(t,i,c,f,u))}a(f)},nse=function(t,i,a,c,u){var f=[],m=t.required||!t.required&&c.hasOwnProperty(t.field);if(m){if(bo(i)&&!t.required)return a();Kn.required(t,i,c,f,u),i!==void 0&&Kn.type(t,i,c,f,u)}a(f)},rse="enum",ise=function(t,i,a,c,u){var f=[],m=t.required||!t.required&&c.hasOwnProperty(t.field);if(m){if(bo(i)&&!t.required)return a();Kn.required(t,i,c,f,u),i!==void 0&&Kn[rse](t,i,c,f,u)}a(f)},ose=function(t,i,a,c,u){var f=[],m=t.required||!t.required&&c.hasOwnProperty(t.field);if(m){if(bo(i,"string")&&!t.required)return a();Kn.required(t,i,c,f,u),bo(i,"string")||Kn.pattern(t,i,c,f,u)}a(f)},ase=function(t,i,a,c,u){var f=[],m=t.required||!t.required&&c.hasOwnProperty(t.field);if(m){if(bo(i,"date")&&!t.required)return a();if(Kn.required(t,i,c,f,u),!bo(i,"date")){var g;i instanceof Date?g=i:g=new Date(i),Kn.type(t,g,c,f,u),g&&Kn.range(t,g.getTime(),c,f,u)}}a(f)},sse=function(t,i,a,c,u){var f=[],m=Array.isArray(i)?"array":typeof i;Kn.required(t,i,c,f,u,m),a(f)},_P=function(t,i,a,c,u){var f=t.type,m=[],g=t.required||!t.required&&c.hasOwnProperty(t.field);if(g){if(bo(i,f)&&!t.required)return a();Kn.required(t,i,c,m,u,f),bo(i,f)||Kn.type(t,i,c,m,u)}a(m)},cse=function(t,i,a,c,u){var f=[],m=t.required||!t.required&&c.hasOwnProperty(t.field);if(m){if(bo(i)&&!t.required)return a();Kn.required(t,i,c,f,u)}a(f)},$_={string:qae,method:Yae,number:Xae,boolean:Jae,regexp:Qae,integer:Zae,float:ese,array:tse,object:nse,enum:ise,pattern:ose,date:ase,url:_P,hex:_P,email:_P,required:sse,any:cse};function QL(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var t=JSON.parse(JSON.stringify(this));return t.clone=this.clone,t}}}var ZL=QL(),US=function(){function e(i){this.rules=null,this._messages=ZL,this.define(i)}var t=e.prototype;return t.define=function(a){var c=this;if(!a)throw new Error("Cannot configure a schema with no rules");if(typeof a!="object"||Array.isArray(a))throw new Error("Rules must be an object");this.rules={},Object.keys(a).forEach(function(u){var f=a[u];c.rules[u]=Array.isArray(f)?f:[f]})},t.messages=function(a){return a&&(this._messages=u6(QL(),a)),this._messages},t.validate=function(a,c,u){var f=this;c===void 0&&(c={}),u===void 0&&(u=function(){});var m=a,g=c,E=u;if(typeof g=="function"&&(E=g,g={}),!this.rules||Object.keys(this.rules).length===0)return E&&E(null,m),Promise.resolve(m);function y(N){var M=[],D={};function x(V){if(Array.isArray(V)){var H;M=(H=M).concat.apply(H,V)}else M.push(V)}for(var k=0;k<N.length;k++)x(N[k]);M.length?(D=JL(M),E(M,D)):E(null,m)}if(g.messages){var T=this.messages();T===ZL&&(T=QL()),u6(T,g.messages),g.messages=T}else g.messages=this.messages();var R={},P=g.keys||Object.keys(this.rules);P.forEach(function(N){var M=f.rules[N],D=m[N];M.forEach(function(x){var k=x;typeof k.transform=="function"&&(m===a&&(m=op({},m)),D=m[N]=k.transform(D)),typeof k=="function"?k={validator:k}:k=op({},k),k.validator=f.getValidationMethod(k),k.validator&&(k.field=N,k.fullField=k.fullField||N,k.type=f.getType(k),R[N]=R[N]||[],R[N].push({rule:k,value:D,source:m,field:N}))})});var O={};return Vae(R,g,function(N,M){var D=N.rule,x=(D.type==="object"||D.type==="array")&&(typeof D.fields=="object"||typeof D.defaultField=="object");x=x&&(D.required||!D.required&&N.value),D.field=N.field;function k($,G){return op({},G,{fullField:D.fullField+"."+$,fullFields:D.fullFields?[].concat(D.fullFields,[$]):[$]})}function V($){$===void 0&&($=[]);var G=Array.isArray($)?$:[$];!g.suppressWarning&&G.length&&e.warning("async-validator:",G),G.length&&D.message!==void 0&&(G=[].concat(D.message));var K=G.map(l6(D,m));if(g.first&&K.length)return O[D.field]=1,M(K);if(!x)M(K);else{if(D.required&&!N.value)return D.message!==void 0?K=[].concat(D.message).map(l6(D,m)):g.error&&(K=[g.error(D,zs(g.messages.required,D.field))]),M(K);var Q={};D.defaultField&&Object.keys(N.value).map(function(J){Q[J]=D.defaultField}),Q=op({},Q,N.rule.fields);var z={};Object.keys(Q).forEach(function(J){var Y=Q[J],oe=Array.isArray(Y)?Y:[Y];z[J]=oe.map(k.bind(null,J))});var ie=new e(z);ie.messages(g.messages),N.rule.options&&(N.rule.options.messages=g.messages,N.rule.options.error=g.error),ie.validate(N.value,N.rule.options||g,function(J){var Y=[];K&&K.length&&Y.push.apply(Y,K),J&&J.length&&Y.push.apply(Y,J),M(Y.length?Y:null)})}}var H;if(D.asyncValidator)H=D.asyncValidator(D,N.value,V,N.source,g);else if(D.validator){try{H=D.validator(D,N.value,V,N.source,g)}catch($){console.error==null||console.error($),g.suppressValidatorError||setTimeout(function(){throw $},0),V($.message)}H===!0?V():H===!1?V(typeof D.message=="function"?D.message(D.fullField||D.field):D.message||(D.fullField||D.field)+" fails"):H instanceof Array?V(H):H instanceof Error&&V(H.message)}H&&H.then&&H.then(function(){return V()},function($){return V($)})},function(N){y(N)},m)},t.getType=function(a){if(a.type===void 0&&a.pattern instanceof RegExp&&(a.type="pattern"),typeof a.validator!="function"&&a.type&&!$_.hasOwnProperty(a.type))throw new Error(zs("Unknown rule type %s",a.type));return a.type||"string"},t.getValidationMethod=function(a){if(typeof a.validator=="function")return a.validator;var c=Object.keys(a),u=c.indexOf("message");return u!==-1&&c.splice(u,1),c.length===1&&c[0]==="required"?$_.required:$_[this.getType(a)]||void 0},e}();US.register=function(t,i){if(typeof i!="function")throw new Error("Cannot register a validator by type, validator is not a function");$_[t]=i};US.warning=kae;US.messages=ZL;US.validators=$_;var $s="'${name}' is not a valid ${type}",FG={default:"Validation error on field '${name}'",required:"'${name}' is required",enum:"'${name}' must be one of [${enum}]",whitespace:"'${name}' cannot be empty",date:{format:"'${name}' is invalid for format date",parse:"'${name}' could not be parsed as date",invalid:"'${name}' is invalid date"},types:{string:$s,method:$s,array:$s,object:$s,number:$s,date:$s,boolean:$s,integer:$s,float:$s,regexp:$s,email:$s,url:$s,hex:$s},string:{len:"'${name}' must be exactly ${len} characters",min:"'${name}' must be at least ${min} characters",max:"'${name}' cannot be longer than ${max} characters",range:"'${name}' must be between ${min} and ${max} characters"},number:{len:"'${name}' must equal ${len}",min:"'${name}' cannot be less than ${min}",max:"'${name}' cannot be greater than ${max}",range:"'${name}' must be between ${min} and ${max}"},array:{len:"'${name}' must be exactly ${len} in length",min:"'${name}' cannot be less than ${min} in length",max:"'${name}' cannot be greater than ${max} in length",range:"'${name}' must be between ${min} and ${max} in length"},pattern:{mismatch:"'${name}' does not match pattern ${pattern}"}},h6=US;function lse(e,t){return e.replace(/\$\{\w+\}/g,function(i){var a=i.slice(2,-1);return t[a]})}var f6="CODE_LOGIC_ERROR";function ek(e,t,i,a,c){return tk.apply(this,arguments)}function tk(){return tk=wg(Js().mark(function e(t,i,a,c,u){var f,m,g,E,y,T,R,P,O;return Js().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return f=Ae({},a),delete f.ruleIndex,h6.warning=function(){},f.validator&&(m=f.validator,f.validator=function(){try{return m.apply(void 0,arguments)}catch(D){return console.error(D),Promise.reject(f6)}}),g=null,f&&f.type==="array"&&f.defaultField&&(g=f.defaultField,delete f.defaultField),E=new h6(Ct({},t,[f])),y=z0(FG,c.validateMessages),E.messages(y),T=[],M.prev=10,M.next=13,Promise.resolve(E.validate(Ct({},t,i),Ae({},c)));case 13:M.next=18;break;case 15:M.prev=15,M.t0=M.catch(10),M.t0.errors&&(T=M.t0.errors.map(function(D,x){var k=D.message,V=k===f6?y.default:k;return C.isValidElement(V)?C.cloneElement(V,{key:"error_".concat(x)}):V}));case 18:if(!(!T.length&&g)){M.next=23;break}return M.next=21,Promise.all(i.map(function(D,x){return ek("".concat(t,".").concat(x),D,g,c,u)}));case 21:return R=M.sent,M.abrupt("return",R.reduce(function(D,x){return[].concat(gt(D),gt(x))},[]));case 23:return P=Ae(Ae({},a),{},{name:t,enum:(a.enum||[]).join(", ")},u),O=T.map(function(D){return typeof D=="string"?lse(D,P):D}),M.abrupt("return",O);case 26:case"end":return M.stop()}},e,null,[[10,15]])})),tk.apply(this,arguments)}function use(e,t,i,a,c,u){var f=e.join("."),m=i.map(function(y,T){var R=y.validator,P=Ae(Ae({},y),{},{ruleIndex:T});return R&&(P.validator=function(O,N,M){var D=!1,x=function(){for(var H=arguments.length,$=new Array(H),G=0;G<H;G++)$[G]=arguments[G];Promise.resolve().then(function(){Es(!D,"Your validator function has already return a promise. `callback` will be ignored."),D||M.apply(void 0,$)})},k=R(O,N,x);D=k&&typeof k.then=="function"&&typeof k.catch=="function",Es(D,"`callback` is deprecated. Please return a promise instead."),D&&k.then(function(){M()}).catch(function(V){M(V||" ")})}),P}).sort(function(y,T){var R=y.warningOnly,P=y.ruleIndex,O=T.warningOnly,N=T.ruleIndex;return!!R==!!O?P-N:R?1:-1}),g;if(c===!0)g=new Promise(function(){var y=wg(Js().mark(function T(R,P){var O,N,M;return Js().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:O=0;case 1:if(!(O<m.length)){x.next=12;break}return N=m[O],x.next=5,ek(f,t,N,a,u);case 5:if(M=x.sent,!M.length){x.next=9;break}return P([{errors:M,rule:N}]),x.abrupt("return");case 9:O+=1,x.next=1;break;case 12:R([]);case 13:case"end":return x.stop()}},T)}));return function(T,R){return y.apply(this,arguments)}}());else{var E=m.map(function(y){return ek(f,t,y,a,u).then(function(T){return{errors:T,rule:y}})});g=(c?hse(E):dse(E)).then(function(y){return Promise.reject(y)})}return g.catch(function(y){return y}),g}function dse(e){return nk.apply(this,arguments)}function nk(){return nk=wg(Js().mark(function e(t){return Js().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",Promise.all(t).then(function(c){var u,f=(u=[]).concat.apply(u,gt(c));return f}));case 1:case"end":return a.stop()}},e)})),nk.apply(this,arguments)}function hse(e){return rk.apply(this,arguments)}function rk(){return rk=wg(Js().mark(function e(t){var i;return Js().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return i=0,c.abrupt("return",new Promise(function(u){t.forEach(function(f){f.then(function(m){m.errors.length&&u([m]),i+=1,i===t.length&&u([])})})}));case 2:case"end":return c.stop()}},e)})),rk.apply(this,arguments)}function Wi(e){return qL(e)}function p6(e,t){var i={};return t.forEach(function(a){var c=_l(e,a);i=pl(i,a,c)}),i}function H_(e,t){return e&&e.some(function(i){return VG(i,t)})}function VG(e,t){return!e||!t||e.length!==t.length?!1:e.every(function(i,a){return t[a]===i})}function fse(e,t){if(e===t)return!0;if(!e&&t||e&&!t||!e||!t||Sr(e)!=="object"||Sr(t)!=="object")return!1;var i=Object.keys(e),a=Object.keys(t),c=new Set([].concat(i,a));return gt(c).every(function(u){var f=e[u],m=t[u];return typeof f=="function"&&typeof m=="function"?!0:f===m})}function pse(e){var t=arguments.length<=1?void 0:arguments[1];return t&&t.target&&Sr(t.target)==="object"&&e in t.target?t.target[e]:t}function m6(e,t,i){var a=e.length;if(t<0||t>=a||i<0||i>=a)return e;var c=e[t],u=t-i;return u>0?[].concat(gt(e.slice(0,i)),[c],gt(e.slice(i,t)),gt(e.slice(t+1,a))):u<0?[].concat(gt(e.slice(0,t)),gt(e.slice(t+1,i+1)),[c],gt(e.slice(i+1,a))):e}var mse=["name"],bc=[];function g6(e,t,i,a,c,u){return typeof e=="function"?e(t,i,"source"in u?{source:u.source}:{}):a!==c}var q2=function(e){Sg(i,e);var t=yg(i);function i(a){var c;if(kc(this,i),c=t.call(this,a),c.state={resetCount:0},c.cancelRegisterFunc=null,c.mounted=!1,c.touched=!1,c.dirty=!1,c.validatePromise=void 0,c.prevValidating=void 0,c.errors=bc,c.warnings=bc,c.cancelRegister=function(){var g=c.props,E=g.preserve,y=g.isListField,T=g.name;c.cancelRegisterFunc&&c.cancelRegisterFunc(y,E,Wi(T)),c.cancelRegisterFunc=null},c.getNamePath=function(){var g=c.props,E=g.name,y=g.fieldContext,T=y.prefixName,R=T===void 0?[]:T;return E!==void 0?[].concat(gt(R),gt(E)):[]},c.getRules=function(){var g=c.props,E=g.rules,y=E===void 0?[]:E,T=g.fieldContext;return y.map(function(R){return typeof R=="function"?R(T):R})},c.refresh=function(){c.mounted&&c.setState(function(g){var E=g.resetCount;return{resetCount:E+1}})},c.triggerMetaEvent=function(g){var E=c.props.onMetaChange;E==null||E(Ae(Ae({},c.getMeta()),{},{destroy:g}))},c.onStoreChange=function(g,E,y){var T=c.props,R=T.shouldUpdate,P=T.dependencies,O=P===void 0?[]:P,N=T.onReset,M=y.store,D=c.getNamePath(),x=c.getValue(g),k=c.getValue(M),V=E&&H_(E,D);switch(y.type==="valueUpdate"&&y.source==="external"&&x!==k&&(c.touched=!0,c.dirty=!0,c.validatePromise=null,c.errors=bc,c.warnings=bc,c.triggerMetaEvent()),y.type){case"reset":if(!E||V){c.touched=!1,c.dirty=!1,c.validatePromise=void 0,c.errors=bc,c.warnings=bc,c.triggerMetaEvent(),N==null||N(),c.refresh();return}break;case"remove":{if(R){c.reRender();return}break}case"setField":{if(V){var H=y.data;"touched"in H&&(c.touched=H.touched),"validating"in H&&!("originRCField"in H)&&(c.validatePromise=H.validating?Promise.resolve([]):null),"errors"in H&&(c.errors=H.errors||bc),"warnings"in H&&(c.warnings=H.warnings||bc),c.dirty=!0,c.triggerMetaEvent(),c.reRender();return}if(R&&!D.length&&g6(R,g,M,x,k,y)){c.reRender();return}break}case"dependenciesUpdate":{var $=O.map(Wi);if($.some(function(G){return H_(y.relatedFields,G)})){c.reRender();return}break}default:if(V||(!O.length||D.length||R)&&g6(R,g,M,x,k,y)){c.reRender();return}break}R===!0&&c.reRender()},c.validateRules=function(g){var E=c.getNamePath(),y=c.getValue(),T=g||{},R=T.triggerName,P=T.validateOnly,O=P===void 0?!1:P,N=Promise.resolve().then(function(){if(!c.mounted)return[];var M=c.props,D=M.validateFirst,x=D===void 0?!1:D,k=M.messageVariables,V=c.getRules();R&&(V=V.filter(function($){return $}).filter(function($){var G=$.validateTrigger;if(!G)return!0;var K=qL(G);return K.includes(R)}));var H=use(E,y,V,g,x,k);return H.catch(function($){return $}).then(function(){var $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:bc;if(c.validatePromise===N){var G;c.validatePromise=null;var K=[],Q=[];(G=$.forEach)===null||G===void 0||G.call($,function(z){var ie=z.rule.warningOnly,J=z.errors,Y=J===void 0?bc:J;ie?Q.push.apply(Q,gt(Y)):K.push.apply(K,gt(Y))}),c.errors=K,c.warnings=Q,c.triggerMetaEvent(),c.reRender()}}),H});return O||(c.validatePromise=N,c.dirty=!0,c.errors=bc,c.warnings=bc,c.triggerMetaEvent(),c.reRender()),N},c.isFieldValidating=function(){return!!c.validatePromise},c.isFieldTouched=function(){return c.touched},c.isFieldDirty=function(){if(c.dirty||c.props.initialValue!==void 0)return!0;var g=c.props.fieldContext,E=g.getInternalHooks(ip),y=E.getInitialValue;return y(c.getNamePath())!==void 0},c.getErrors=function(){return c.errors},c.getWarnings=function(){return c.warnings},c.isListField=function(){return c.props.isListField},c.isList=function(){return c.props.isList},c.isPreserve=function(){return c.props.preserve},c.getMeta=function(){c.prevValidating=c.isFieldValidating();var g={touched:c.isFieldTouched(),validating:c.prevValidating,errors:c.errors,warnings:c.warnings,name:c.getNamePath(),validated:c.validatePromise===null};return g},c.getOnlyChild=function(g){if(typeof g=="function"){var E=c.getMeta();return Ae(Ae({},c.getOnlyChild(g(c.getControlled(),E,c.props.fieldContext))),{},{isFunction:!0})}var y=ld(g);return y.length!==1||!C.isValidElement(y[0])?{child:y,isFunction:!1}:{child:y[0],isFunction:!1}},c.getValue=function(g){var E=c.props.fieldContext.getFieldsValue,y=c.getNamePath();return _l(g||E(!0),y)},c.getControlled=function(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},E=c.props,y=E.trigger,T=E.validateTrigger,R=E.getValueFromEvent,P=E.normalize,O=E.valuePropName,N=E.getValueProps,M=E.fieldContext,D=T!==void 0?T:M.validateTrigger,x=c.getNamePath(),k=M.getInternalHooks,V=M.getFieldsValue,H=k(ip),$=H.dispatch,G=c.getValue(),K=N||function(J){return Ct({},O,J)},Q=g[y],z=Ae(Ae({},g),K(G));z[y]=function(){c.touched=!0,c.dirty=!0,c.triggerMetaEvent();for(var J,Y=arguments.length,oe=new Array(Y),ue=0;ue<Y;ue++)oe[ue]=arguments[ue];R?J=R.apply(void 0,oe):J=pse.apply(void 0,[O].concat(oe)),P&&(J=P(J,G,V(!0))),$({type:"updateValue",namePath:x,value:J}),Q&&Q.apply(void 0,oe)};var ie=qL(D||[]);return ie.forEach(function(J){var Y=z[J];z[J]=function(){Y&&Y.apply(void 0,arguments);var oe=c.props.rules;oe&&oe.length&&$({type:"validateField",namePath:x,triggerName:J})}}),z},a.fieldContext){var u=a.fieldContext.getInternalHooks,f=u(ip),m=f.initEntityValue;m(h1(c))}return c}return Mc(i,[{key:"componentDidMount",value:function(){var c=this.props,u=c.shouldUpdate,f=c.fieldContext;if(this.mounted=!0,f){var m=f.getInternalHooks,g=m(ip),E=g.registerField;this.cancelRegisterFunc=E(this)}u===!0&&this.reRender()}},{key:"componentWillUnmount",value:function(){this.cancelRegister(),this.triggerMetaEvent(!0),this.mounted=!1}},{key:"reRender",value:function(){this.mounted&&this.forceUpdate()}},{key:"render",value:function(){var c=this.state.resetCount,u=this.props.children,f=this.getOnlyChild(u),m=f.child,g=f.isFunction,E;return g?E=m:C.isValidElement(m)?E=C.cloneElement(m,this.getControlled(m.props)):(Es(!m,"`children` of Field is not validate ReactElement."),E=m),C.createElement(C.Fragment,{key:c},E)}}]),i}(C.Component);q2.contextType=vp;q2.defaultProps={trigger:"onChange",valuePropName:"value"};function Y2(e){var t=e.name,i=Xn(e,mse),a=C.useContext(vp),c=C.useContext(vS),u=t!==void 0?Wi(t):void 0,f="keep";return i.isListField||(f="_".concat((u||[]).join("_"))),C.createElement(q2,st({key:f,name:u,isListField:!!c},i,{fieldContext:a}))}var jG=function(t){var i=t.name,a=t.initialValue,c=t.children,u=t.rules,f=t.validateTrigger,m=t.isListField,g=C.useContext(vp),E=C.useContext(vS),y=C.useRef({keys:[],id:0}),T=y.current,R=C.useMemo(function(){var M=Wi(g.prefixName)||[];return[].concat(gt(M),gt(Wi(i)))},[g.prefixName,i]),P=C.useMemo(function(){return Ae(Ae({},g),{},{prefixName:R})},[g,R]),O=C.useMemo(function(){return{getKey:function(D){var x=R.length,k=D[x];return[T.keys[k],D.slice(x+1)]}}},[R]);if(typeof c!="function")return Es(!1,"Form.List only accepts function as children."),null;var N=function(D,x,k){var V=k.source;return V==="internal"?!1:D!==x};return C.createElement(vS.Provider,{value:O},C.createElement(vp.Provider,{value:P},C.createElement(Y2,{name:[],shouldUpdate:N,rules:u,validateTrigger:f,initialValue:a,isList:!0,isListField:m??!!E},function(M,D){var x=M.value,k=x===void 0?[]:x,V=M.onChange,H=g.getFieldValue,$=function(){var z=H(R||[]);return z||[]},G={add:function(z,ie){var J=$();ie>=0&&ie<=J.length?(T.keys=[].concat(gt(T.keys.slice(0,ie)),[T.id],gt(T.keys.slice(ie))),V([].concat(gt(J.slice(0,ie)),[z],gt(J.slice(ie))))):(T.keys=[].concat(gt(T.keys),[T.id]),V([].concat(gt(J),[z]))),T.id+=1},remove:function(z){var ie=$(),J=new Set(Array.isArray(z)?z:[z]);J.size<=0||(T.keys=T.keys.filter(function(Y,oe){return!J.has(oe)}),V(ie.filter(function(Y,oe){return!J.has(oe)})))},move:function(z,ie){if(z!==ie){var J=$();z<0||z>=J.length||ie<0||ie>=J.length||(T.keys=m6(T.keys,z,ie),V(m6(J,z,ie)))}}},K=k||[];return Array.isArray(K)||(K=[]),c(K.map(function(Q,z){var ie=T.keys[z];return ie===void 0&&(T.keys[z]=T.id,ie=T.keys[z],T.id+=1),{name:z,key:ie,isListField:!0}}),G,D)})))};function gse(e){var t=!1,i=e.length,a=[];return e.length?new Promise(function(c,u){e.forEach(function(f,m){f.catch(function(g){return t=!0,g}).then(function(g){i-=1,a[m]=g,!(i>0)&&(t&&u(a),c(a))})})}):Promise.resolve([])}var BG="__@field_split__";function SP(e){return e.map(function(t){return"".concat(Sr(t),":").concat(t)}).join(BG)}var C0=function(){function e(){kc(this,e),this.kvs=new Map}return Mc(e,[{key:"set",value:function(i,a){this.kvs.set(SP(i),a)}},{key:"get",value:function(i){return this.kvs.get(SP(i))}},{key:"update",value:function(i,a){var c=this.get(i),u=a(c);u?this.set(i,u):this.delete(i)}},{key:"delete",value:function(i){this.kvs.delete(SP(i))}},{key:"map",value:function(i){return gt(this.kvs.entries()).map(function(a){var c=Ye(a,2),u=c[0],f=c[1],m=u.split(BG);return i({key:m.map(function(g){var E=g.match(/^([^:]*):(.*)$/),y=Ye(E,3),T=y[1],R=y[2];return T==="number"?Number(R):R}),value:f})})}},{key:"toJSON",value:function(){var i={};return this.map(function(a){var c=a.key,u=a.value;return i[c.join(".")]=u,null}),i}}]),e}(),vse=["name"],Ese=Mc(function e(t){var i=this;kc(this,e),this.formHooked=!1,this.forceRootUpdate=void 0,this.subscribable=!0,this.store={},this.fieldEntities=[],this.initialValues={},this.callbacks={},this.validateMessages=null,this.preserve=null,this.lastValidatePromise=null,this.getForm=function(){return{getFieldValue:i.getFieldValue,getFieldsValue:i.getFieldsValue,getFieldError:i.getFieldError,getFieldWarning:i.getFieldWarning,getFieldsError:i.getFieldsError,isFieldsTouched:i.isFieldsTouched,isFieldTouched:i.isFieldTouched,isFieldValidating:i.isFieldValidating,isFieldsValidating:i.isFieldsValidating,resetFields:i.resetFields,setFields:i.setFields,setFieldValue:i.setFieldValue,setFieldsValue:i.setFieldsValue,validateFields:i.validateFields,submit:i.submit,_init:!0,getInternalHooks:i.getInternalHooks}},this.getInternalHooks=function(a){return a===ip?(i.formHooked=!0,{dispatch:i.dispatch,initEntityValue:i.initEntityValue,registerField:i.registerField,useSubscribe:i.useSubscribe,setInitialValues:i.setInitialValues,destroyForm:i.destroyForm,setCallbacks:i.setCallbacks,setValidateMessages:i.setValidateMessages,getFields:i.getFields,setPreserve:i.setPreserve,getInitialValue:i.getInitialValue,registerWatch:i.registerWatch}):(Es(!1,"`getInternalHooks` is internal usage. Should not call directly."),null)},this.useSubscribe=function(a){i.subscribable=a},this.prevWithoutPreserves=null,this.setInitialValues=function(a,c){if(i.initialValues=a||{},c){var u,f=z0(a,i.store);(u=i.prevWithoutPreserves)===null||u===void 0||u.map(function(m){var g=m.key;f=pl(f,g,_l(a,g))}),i.prevWithoutPreserves=null,i.updateStore(f)}},this.destroyForm=function(){var a=new C0;i.getFieldEntities(!0).forEach(function(c){i.isMergedPreserve(c.isPreserve())||a.set(c.getNamePath(),!0)}),i.prevWithoutPreserves=a},this.getInitialValue=function(a){var c=_l(i.initialValues,a);return a.length?z0(c):c},this.setCallbacks=function(a){i.callbacks=a},this.setValidateMessages=function(a){i.validateMessages=a},this.setPreserve=function(a){i.preserve=a},this.watchList=[],this.registerWatch=function(a){return i.watchList.push(a),function(){i.watchList=i.watchList.filter(function(c){return c!==a})}},this.notifyWatch=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];if(i.watchList.length){var c=i.getFieldsValue(),u=i.getFieldsValue(!0);i.watchList.forEach(function(f){f(c,u,a)})}},this.timeoutId=null,this.warningUnhooked=function(){},this.updateStore=function(a){i.store=a},this.getFieldEntities=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return a?i.fieldEntities.filter(function(c){return c.getNamePath().length}):i.fieldEntities},this.getFieldsMap=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,c=new C0;return i.getFieldEntities(a).forEach(function(u){var f=u.getNamePath();c.set(f,u)}),c},this.getFieldEntitiesForNamePathList=function(a){if(!a)return i.getFieldEntities(!0);var c=i.getFieldsMap(!0);return a.map(function(u){var f=Wi(u);return c.get(f)||{INVALIDATE_NAME_PATH:Wi(u)}})},this.getFieldsValue=function(a,c){if(i.warningUnhooked(),a===!0&&!c)return i.store;var u=i.getFieldEntitiesForNamePathList(Array.isArray(a)?a:null),f=[];return u.forEach(function(m){var g,E="INVALIDATE_NAME_PATH"in m?m.INVALIDATE_NAME_PATH:m.getNamePath();if(!(!a&&(!((g=m.isListField)===null||g===void 0)&&g.call(m))))if(!c)f.push(E);else{var y="getMeta"in m?m.getMeta():null;c(y)&&f.push(E)}}),p6(i.store,f.map(Wi))},this.getFieldValue=function(a){i.warningUnhooked();var c=Wi(a);return _l(i.store,c)},this.getFieldsError=function(a){i.warningUnhooked();var c=i.getFieldEntitiesForNamePathList(a);return c.map(function(u,f){return u&&!("INVALIDATE_NAME_PATH"in u)?{name:u.getNamePath(),errors:u.getErrors(),warnings:u.getWarnings()}:{name:Wi(a[f]),errors:[],warnings:[]}})},this.getFieldError=function(a){i.warningUnhooked();var c=Wi(a),u=i.getFieldsError([c])[0];return u.errors},this.getFieldWarning=function(a){i.warningUnhooked();var c=Wi(a),u=i.getFieldsError([c])[0];return u.warnings},this.isFieldsTouched=function(){i.warningUnhooked();for(var a=arguments.length,c=new Array(a),u=0;u<a;u++)c[u]=arguments[u];var f=c[0],m=c[1],g,E=!1;c.length===0?g=null:c.length===1?Array.isArray(f)?(g=f.map(Wi),E=!1):(g=null,E=f):(g=f.map(Wi),E=m);var y=i.getFieldEntities(!0),T=function(M){return M.isFieldTouched()};if(!g)return E?y.every(T):y.some(T);var R=new C0;g.forEach(function(N){R.set(N,[])}),y.forEach(function(N){var M=N.getNamePath();g.forEach(function(D){D.every(function(x,k){return M[k]===x})&&R.update(D,function(x){return[].concat(gt(x),[N])})})});var P=function(M){return M.some(T)},O=R.map(function(N){var M=N.value;return M});return E?O.every(P):O.some(P)},this.isFieldTouched=function(a){return i.warningUnhooked(),i.isFieldsTouched([a])},this.isFieldsValidating=function(a){i.warningUnhooked();var c=i.getFieldEntities();if(!a)return c.some(function(f){return f.isFieldValidating()});var u=a.map(Wi);return c.some(function(f){var m=f.getNamePath();return H_(u,m)&&f.isFieldValidating()})},this.isFieldValidating=function(a){return i.warningUnhooked(),i.isFieldsValidating([a])},this.resetWithFieldInitialValue=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=new C0,u=i.getFieldEntities(!0);u.forEach(function(g){var E=g.props.initialValue,y=g.getNamePath();if(E!==void 0){var T=c.get(y)||new Set;T.add({entity:g,value:E}),c.set(y,T)}});var f=function(E){E.forEach(function(y){var T=y.props.initialValue;if(T!==void 0){var R=y.getNamePath(),P=i.getInitialValue(R);if(P!==void 0)Es(!1,"Form already set 'initialValues' with path '".concat(R.join("."),"'. Field can not overwrite it."));else{var O=c.get(R);if(O&&O.size>1)Es(!1,"Multiple Field with path '".concat(R.join("."),"' set 'initialValue'. Can not decide which one to pick."));else if(O){var N=i.getFieldValue(R);(!a.skipExist||N===void 0)&&i.updateStore(pl(i.store,R,gt(O)[0].value))}}}})},m;a.entities?m=a.entities:a.namePathList?(m=[],a.namePathList.forEach(function(g){var E=c.get(g);if(E){var y;(y=m).push.apply(y,gt(gt(E).map(function(T){return T.entity})))}})):m=u,f(m)},this.resetFields=function(a){i.warningUnhooked();var c=i.store;if(!a){i.updateStore(z0(i.initialValues)),i.resetWithFieldInitialValue(),i.notifyObservers(c,null,{type:"reset"}),i.notifyWatch();return}var u=a.map(Wi);u.forEach(function(f){var m=i.getInitialValue(f);i.updateStore(pl(i.store,f,m))}),i.resetWithFieldInitialValue({namePathList:u}),i.notifyObservers(c,u,{type:"reset"}),i.notifyWatch(u)},this.setFields=function(a){i.warningUnhooked();var c=i.store,u=[];a.forEach(function(f){var m=f.name,g=Xn(f,vse),E=Wi(m);u.push(E),"value"in g&&i.updateStore(pl(i.store,E,g.value)),i.notifyObservers(c,[E],{type:"setField",data:f})}),i.notifyWatch(u)},this.getFields=function(){var a=i.getFieldEntities(!0),c=a.map(function(u){var f=u.getNamePath(),m=u.getMeta(),g=Ae(Ae({},m),{},{name:f,value:i.getFieldValue(f)});return Object.defineProperty(g,"originRCField",{value:!0}),g});return c},this.initEntityValue=function(a){var c=a.props.initialValue;if(c!==void 0){var u=a.getNamePath(),f=_l(i.store,u);f===void 0&&i.updateStore(pl(i.store,u,c))}},this.isMergedPreserve=function(a){var c=a!==void 0?a:i.preserve;return c??!0},this.registerField=function(a){i.fieldEntities.push(a);var c=a.getNamePath();if(i.notifyWatch([c]),a.props.initialValue!==void 0){var u=i.store;i.resetWithFieldInitialValue({entities:[a],skipExist:!0}),i.notifyObservers(u,[a.getNamePath()],{type:"valueUpdate",source:"internal"})}return function(f,m){var g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(i.fieldEntities=i.fieldEntities.filter(function(T){return T!==a}),!i.isMergedPreserve(m)&&(!f||g.length>1)){var E=f?void 0:i.getInitialValue(c);if(c.length&&i.getFieldValue(c)!==E&&i.fieldEntities.every(function(T){return!VG(T.getNamePath(),c)})){var y=i.store;i.updateStore(pl(y,c,E,!0)),i.notifyObservers(y,[c],{type:"remove"}),i.triggerDependenciesUpdate(y,c)}}i.notifyWatch([c])}},this.dispatch=function(a){switch(a.type){case"updateValue":{var c=a.namePath,u=a.value;i.updateValue(c,u);break}case"validateField":{var f=a.namePath,m=a.triggerName;i.validateFields([f],{triggerName:m});break}}},this.notifyObservers=function(a,c,u){if(i.subscribable){var f=Ae(Ae({},u),{},{store:i.getFieldsValue(!0)});i.getFieldEntities().forEach(function(m){var g=m.onStoreChange;g(a,c,f)})}else i.forceRootUpdate()},this.triggerDependenciesUpdate=function(a,c){var u=i.getDependencyChildrenFields(c);return u.length&&i.validateFields(u),i.notifyObservers(a,u,{type:"dependenciesUpdate",relatedFields:[c].concat(gt(u))}),u},this.updateValue=function(a,c){var u=Wi(a),f=i.store;i.updateStore(pl(i.store,u,c)),i.notifyObservers(f,[u],{type:"valueUpdate",source:"internal"}),i.notifyWatch([u]);var m=i.triggerDependenciesUpdate(f,u),g=i.callbacks.onValuesChange;if(g){var E=p6(i.store,[u]);g(E,i.getFieldsValue())}i.triggerOnFieldsChange([u].concat(gt(m)))},this.setFieldsValue=function(a){i.warningUnhooked();var c=i.store;if(a){var u=z0(i.store,a);i.updateStore(u)}i.notifyObservers(c,null,{type:"valueUpdate",source:"external"}),i.notifyWatch()},this.setFieldValue=function(a,c){i.setFields([{name:a,value:c}])},this.getDependencyChildrenFields=function(a){var c=new Set,u=[],f=new C0;i.getFieldEntities().forEach(function(g){var E=g.props.dependencies;(E||[]).forEach(function(y){var T=Wi(y);f.update(T,function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Set;return R.add(g),R})})});var m=function g(E){var y=f.get(E)||new Set;y.forEach(function(T){if(!c.has(T)){c.add(T);var R=T.getNamePath();T.isFieldDirty()&&R.length&&(u.push(R),g(R))}})};return m(a),u},this.triggerOnFieldsChange=function(a,c){var u=i.callbacks.onFieldsChange;if(u){var f=i.getFields();if(c){var m=new C0;c.forEach(function(E){var y=E.name,T=E.errors;m.set(y,T)}),f.forEach(function(E){E.errors=m.get(E.name)||E.errors})}var g=f.filter(function(E){var y=E.name;return H_(a,y)});g.length&&u(g,f)}},this.validateFields=function(a,c){i.warningUnhooked();var u,f;Array.isArray(a)||typeof a=="string"||typeof c=="string"?(u=a,f=c):f=a;var m=!!u,g=m?u.map(Wi):[],E=[],y=String(Date.now()),T=new Set;i.getFieldEntities(!0).forEach(function(N){var M;if(m||g.push(N.getNamePath()),!((M=f)===null||M===void 0)&&M.recursive&&m){var D=N.getNamePath();D.every(function(V,H){return u[H]===V||u[H]===void 0})&&g.push(D)}if(!(!N.props.rules||!N.props.rules.length)){var x=N.getNamePath();if(T.add(x.join(y)),!m||H_(g,x)){var k=N.validateRules(Ae({validateMessages:Ae(Ae({},FG),i.validateMessages)},f));E.push(k.then(function(){return{name:x,errors:[],warnings:[]}}).catch(function(V){var H,$=[],G=[];return(H=V.forEach)===null||H===void 0||H.call(V,function(K){var Q=K.rule.warningOnly,z=K.errors;Q?G.push.apply(G,gt(z)):$.push.apply($,gt(z))}),$.length?Promise.reject({name:x,errors:$,warnings:G}):{name:x,errors:$,warnings:G}}))}}});var R=gse(E);i.lastValidatePromise=R,R.catch(function(N){return N}).then(function(N){var M=N.map(function(D){var x=D.name;return x});i.notifyObservers(i.store,M,{type:"validateFinish"}),i.triggerOnFieldsChange(M,N)});var P=R.then(function(){return i.lastValidatePromise===R?Promise.resolve(i.getFieldsValue(g)):Promise.reject([])}).catch(function(N){var M=N.filter(function(D){return D&&D.errors.length});return Promise.reject({values:i.getFieldsValue(g),errorFields:M,outOfDate:i.lastValidatePromise!==R})});P.catch(function(N){return N});var O=g.filter(function(N){return T.has(N.join(y))});return i.triggerOnFieldsChange(O),P},this.submit=function(){i.warningUnhooked(),i.validateFields().then(function(a){var c=i.callbacks.onFinish;if(c)try{c(a)}catch(u){console.error(u)}}).catch(function(a){var c=i.callbacks.onFinishFailed;c&&c(a)})},this.forceRootUpdate=t});function X2(e){var t=C.useRef(),i=C.useState({}),a=Ye(i,2),c=a[1];if(!t.current)if(e)t.current=e;else{var u=function(){c({})},f=new Ese(u);t.current=f.getForm()}return[t.current]}var ik=C.createContext({triggerFormChange:function(){},triggerFormFinish:function(){},registerForm:function(){},unregisterForm:function(){}}),$G=function(t){var i=t.validateMessages,a=t.onFormChange,c=t.onFormFinish,u=t.children,f=C.useContext(ik),m=C.useRef({});return C.createElement(ik.Provider,{value:Ae(Ae({},f),{},{validateMessages:Ae(Ae({},f.validateMessages),i),triggerFormChange:function(E,y){a&&a(E,{changedFields:y,forms:m.current}),f.triggerFormChange(E,y)},triggerFormFinish:function(E,y){c&&c(E,{values:y,forms:m.current}),f.triggerFormFinish(E,y)},registerForm:function(E,y){E&&(m.current=Ae(Ae({},m.current),{},Ct({},E,y))),f.registerForm(E,y)},unregisterForm:function(E){var y=Ae({},m.current);delete y[E],m.current=y,f.unregisterForm(E)}})},u)},_se=["name","initialValues","fields","form","preserve","children","component","validateMessages","validateTrigger","onValuesChange","onFieldsChange","onFinish","onFinishFailed"],Sse=function(t,i){var a=t.name,c=t.initialValues,u=t.fields,f=t.form,m=t.preserve,g=t.children,E=t.component,y=E===void 0?"form":E,T=t.validateMessages,R=t.validateTrigger,P=R===void 0?"onChange":R,O=t.onValuesChange,N=t.onFieldsChange,M=t.onFinish,D=t.onFinishFailed,x=Xn(t,_se),k=C.useContext(ik),V=X2(f),H=Ye(V,1),$=H[0],G=$.getInternalHooks(ip),K=G.useSubscribe,Q=G.setInitialValues,z=G.setCallbacks,ie=G.setValidateMessages,J=G.setPreserve,Y=G.destroyForm;C.useImperativeHandle(i,function(){return $}),C.useEffect(function(){return k.registerForm(a,$),function(){k.unregisterForm(a)}},[k,$,a]),ie(Ae(Ae({},k.validateMessages),T)),z({onValuesChange:O,onFieldsChange:function(fe){if(k.triggerFormChange(a,fe),N){for(var _e=arguments.length,ge=new Array(_e>1?_e-1:0),Ue=1;Ue<_e;Ue++)ge[Ue-1]=arguments[Ue];N.apply(void 0,[fe].concat(ge))}},onFinish:function(fe){k.triggerFormFinish(a,fe),M&&M(fe)},onFinishFailed:D}),J(m);var oe=C.useRef(null);Q(c,!oe.current),oe.current||(oe.current=!0),C.useEffect(function(){return Y},[]);var ue,he=typeof g=="function";if(he){var Se=$.getFieldsValue(!0);ue=g(Se,$)}else ue=g;K(!he);var ve=C.useRef();C.useEffect(function(){fse(ve.current||[],u||[])||$.setFields(u||[]),ve.current=u},[u,$]);var Re=C.useMemo(function(){return Ae(Ae({},$),{},{validateTrigger:P})},[$,P]),Ce=C.createElement(vS.Provider,{value:null},C.createElement(vp.Provider,{value:Re},ue));return y===!1?Ce:C.createElement(y,st({},x,{onSubmit:function(fe){fe.preventDefault(),fe.stopPropagation(),$.submit()},onReset:function(fe){var _e;fe.preventDefault(),$.resetFields(),(_e=x.onReset)===null||_e===void 0||_e.call(x,fe)}}),Ce)};function v6(e){try{return JSON.stringify(e)}catch{return Math.random()}}function HG(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var a=t[0],c=a===void 0?[]:a,u=t[1],f=u===void 0?{}:u,m=Nae(f)?{form:f}:f,g=m.form,E=C.useState(),y=Ye(E,2),T=y[0],R=y[1],P=C.useMemo(function(){return v6(T)},[T]),O=C.useRef(P);O.current=P;var N=C.useContext(vp),M=g||N,D=M&&M._init,x=Wi(c),k=C.useRef(x);return k.current=x,C.useEffect(function(){if(D){var V=M.getFieldsValue,H=M.getInternalHooks,$=H(ip),G=$.registerWatch,K=G(function(z,ie){var J=_l(m.preserve?ie:z,k.current),Y=v6(J);O.current!==Y&&(O.current=Y,R(J))}),Q=_l(m.preserve?V(!0):V(),k.current);return R(Q),K}},[D]),T}var yse=C.forwardRef(Sse),Og=yse;Og.FormProvider=$G;Og.Field=Y2;Og.List=jG;Og.useForm=X2;Og.useWatch=HG;const Vh=C.createContext({labelAlign:"right",vertical:!1,itemRef:()=>{}}),WG=C.createContext(null),GG=e=>{const t=ys(e,["prefixCls"]);return C.createElement($G,Object.assign({},t))},J2=C.createContext({prefixCls:""}),hd=C.createContext({}),E6=e=>{let{children:t,status:i,override:a}=e;const c=C.useContext(hd),u=C.useMemo(()=>{const f=Object.assign({},c);return a&&delete f.isFormItemInput,i&&(delete f.status,delete f.hasFeedback,delete f.feedbackIcon),f},[i,a,c]);return C.createElement(hd.Provider,{value:u},t)},Cse=e=>({animationDuration:e,animationFillMode:"both"}),Tse=e=>({animationDuration:e,animationFillMode:"both"}),zG=function(e,t,i,a){const u=(arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1)?"&":"";return{[`
      ${u}${e}-enter,
      ${u}${e}-appear
    `]:Object.assign(Object.assign({},Cse(a)),{animationPlayState:"paused"}),[`${u}${e}-leave`]:Object.assign(Object.assign({},Tse(a)),{animationPlayState:"paused"}),[`
      ${u}${e}-enter${e}-enter-active,
      ${u}${e}-appear${e}-appear-active
    `]:{animationName:t,animationPlayState:"running"},[`${u}${e}-leave${e}-leave-active`]:{animationName:i,animationPlayState:"running",pointerEvents:"none"}}},bse=new di("antSlideUpIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1}}),Rse=new di("antSlideUpOut",{"0%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0}}),Ise=new di("antSlideDownIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1}}),wse=new di("antSlideDownOut",{"0%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0}}),Ose=new di("antSlideLeftIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1}}),Ase=new di("antSlideLeftOut",{"0%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0}}),Nse=new di("antSlideRightIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1}}),xse=new di("antSlideRightOut",{"0%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0}}),Pse={"slide-up":{inKeyframes:bse,outKeyframes:Rse},"slide-down":{inKeyframes:Ise,outKeyframes:wse},"slide-left":{inKeyframes:Ose,outKeyframes:Ase},"slide-right":{inKeyframes:Nse,outKeyframes:xse}},_6=(e,t)=>{const{antCls:i}=e,a=`${i}-${t}`,{inKeyframes:c,outKeyframes:u}=Pse[t];return[zG(a,c,u,e.motionDurationMid),{[`
      ${a}-enter,
      ${a}-appear
    `]:{transform:"scale(0)",transformOrigin:"0% 0%",opacity:0,animationTimingFunction:e.motionEaseOutQuint,"&-prepare":{transform:"scale(1)"}},[`${a}-leave`]:{animationTimingFunction:e.motionEaseInQuint}}]},Q2=new di("antZoomIn",{"0%":{transform:"scale(0.2)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),Dse=new di("antZoomOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.2)",opacity:0}}),S6=new di("antZoomBigIn",{"0%":{transform:"scale(0.8)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),y6=new di("antZoomBigOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.8)",opacity:0}}),Lse=new di("antZoomUpIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 0%"}}),kse=new di("antZoomUpOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 0%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0}}),Mse=new di("antZoomLeftIn",{"0%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"0% 50%"}}),Use=new di("antZoomLeftOut",{"0%":{transform:"scale(1)",transformOrigin:"0% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0}}),Fse=new di("antZoomRightIn",{"0%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"100% 50%"}}),Vse=new di("antZoomRightOut",{"0%":{transform:"scale(1)",transformOrigin:"100% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0}}),jse=new di("antZoomDownIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 100%"}}),Bse=new di("antZoomDownOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 100%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0}}),$se={zoom:{inKeyframes:Q2,outKeyframes:Dse},"zoom-big":{inKeyframes:S6,outKeyframes:y6},"zoom-big-fast":{inKeyframes:S6,outKeyframes:y6},"zoom-left":{inKeyframes:Mse,outKeyframes:Use},"zoom-right":{inKeyframes:Fse,outKeyframes:Vse},"zoom-up":{inKeyframes:Lse,outKeyframes:kse},"zoom-down":{inKeyframes:jse,outKeyframes:Bse}},KG=(e,t)=>{const{antCls:i}=e,a=`${i}-${t}`,{inKeyframes:c,outKeyframes:u}=$se[t];return[zG(a,c,u,t==="zoom-big-fast"?e.motionDurationFast:e.motionDurationMid),{[`
        ${a}-enter,
        ${a}-appear
      `]:{transform:"scale(0)",opacity:0,animationTimingFunction:e.motionEaseOutCirc,"&-prepare":{transform:"none"}},[`${a}-leave`]:{animationTimingFunction:e.motionEaseInOutCirc}}]},Hse=e=>({[e.componentCls]:{[`${e.antCls}-motion-collapse-legacy`]:{overflow:"hidden","&-active":{transition:`height ${e.motionDurationMid} ${e.motionEaseInOut},
        opacity ${e.motionDurationMid} ${e.motionEaseInOut} !important`}},[`${e.antCls}-motion-collapse`]:{overflow:"hidden",transition:`height ${e.motionDurationMid} ${e.motionEaseInOut},
        opacity ${e.motionDurationMid} ${e.motionEaseInOut} !important`}}}),qG=Hse,Wse=e=>{const{componentCls:t,width:i,notificationMarginEdge:a}=e,c=new di("antNotificationTopFadeIn",{"0%":{marginTop:"-100%",opacity:0},"100%":{marginTop:0,opacity:1}}),u=new di("antNotificationBottomFadeIn",{"0%":{marginBottom:"-100%",opacity:0},"100%":{marginBottom:0,opacity:1}}),f=new di("antNotificationLeftFadeIn",{"0%":{right:{_skip_check_:!0,value:i},opacity:0},"100%":{right:{_skip_check_:!0,value:0},opacity:1}});return{[`&${t}-top, &${t}-bottom`]:{marginInline:0},[`&${t}-top`]:{[`${t}-fade-enter${t}-fade-enter-active, ${t}-fade-appear${t}-fade-appear-active`]:{animationName:c}},[`&${t}-bottom`]:{[`${t}-fade-enter${t}-fade-enter-active, ${t}-fade-appear${t}-fade-appear-active`]:{animationName:u}},[`&${t}-topLeft, &${t}-bottomLeft`]:{marginInlineEnd:0,marginInlineStart:a,[`${t}-fade-enter${t}-fade-enter-active, ${t}-fade-appear${t}-fade-appear-active`]:{animationName:f}}}},Gse=Wse,zse=e=>{const{iconCls:t,componentCls:i,boxShadow:a,fontSizeLG:c,notificationMarginBottom:u,borderRadiusLG:f,colorSuccess:m,colorInfo:g,colorWarning:E,colorError:y,colorTextHeading:T,notificationBg:R,notificationPadding:P,notificationMarginEdge:O,motionDurationMid:N,motionEaseInOut:M,fontSize:D,lineHeight:x,width:k,notificationIconSize:V,colorText:H}=e,$=`${i}-notice`,G=new di("antNotificationFadeIn",{"0%":{left:{_skip_check_:!0,value:k},opacity:0},"100%":{left:{_skip_check_:!0,value:0},opacity:1}}),K=new di("antNotificationFadeOut",{"0%":{maxHeight:e.animationMaxHeight,marginBottom:u,opacity:1},"100%":{maxHeight:0,marginBottom:0,paddingTop:0,paddingBottom:0,opacity:0}}),Q={position:"relative",width:k,maxWidth:`calc(100vw - ${O*2}px)`,marginBottom:u,marginInlineStart:"auto",padding:P,overflow:"hidden",lineHeight:x,wordWrap:"break-word",background:R,borderRadius:f,boxShadow:a,[`${i}-close-icon`]:{fontSize:D,cursor:"pointer"},[`${$}-message`]:{marginBottom:e.marginXS,color:T,fontSize:c,lineHeight:e.lineHeightLG},[`${$}-description`]:{fontSize:D,color:H},[`&${$}-closable ${$}-message`]:{paddingInlineEnd:e.paddingLG},[`${$}-with-icon ${$}-message`]:{marginBottom:e.marginXS,marginInlineStart:e.marginSM+V,fontSize:c},[`${$}-with-icon ${$}-description`]:{marginInlineStart:e.marginSM+V,fontSize:D},[`${$}-icon`]:{position:"absolute",fontSize:V,lineHeight:0,[`&-success${t}`]:{color:m},[`&-info${t}`]:{color:g},[`&-warning${t}`]:{color:E},[`&-error${t}`]:{color:y}},[`${$}-close`]:{position:"absolute",top:e.notificationPaddingVertical,insetInlineEnd:e.notificationPaddingHorizontal,color:e.colorIcon,outline:"none",width:e.notificationCloseButtonSize,height:e.notificationCloseButtonSize,borderRadius:e.borderRadiusSM,transition:`background-color ${e.motionDurationMid}, color ${e.motionDurationMid}`,display:"flex",alignItems:"center",justifyContent:"center","&:hover":{color:e.colorIconHover,backgroundColor:e.wireframe?"transparent":e.colorFillContent}},[`${$}-btn`]:{float:"right",marginTop:e.marginSM}};return[{[i]:Object.assign(Object.assign(Object.assign(Object.assign({},Cp(e)),{position:"fixed",zIndex:e.zIndexPopup,marginInlineEnd:O,[`${i}-hook-holder`]:{position:"relative"},[`&${i}-top, &${i}-bottom`]:{[$]:{marginInline:"auto auto"}},[`&${i}-topLeft, &${i}-bottomLeft`]:{[$]:{marginInlineEnd:"auto",marginInlineStart:0}},[`${i}-fade-enter, ${i}-fade-appear`]:{animationDuration:e.motionDurationMid,animationTimingFunction:M,animationFillMode:"both",opacity:0,animationPlayState:"paused"},[`${i}-fade-leave`]:{animationTimingFunction:M,animationFillMode:"both",animationDuration:N,animationPlayState:"paused"},[`${i}-fade-enter${i}-fade-enter-active, ${i}-fade-appear${i}-fade-appear-active`]:{animationName:G,animationPlayState:"running"},[`${i}-fade-leave${i}-fade-leave-active`]:{animationName:K,animationPlayState:"running"}}),Gse(e)),{"&-rtl":{direction:"rtl",[`${$}-btn`]:{float:"left"}}})},{[i]:{[$]:Object.assign({},Q)}},{[`${$}-pure-panel`]:Object.assign(Object.assign({},Q),{margin:0})}]},YG=Al("Notification",e=>{const t=e.paddingMD,i=e.paddingLG,a=na(e,{notificationBg:e.colorBgElevated,notificationPaddingVertical:t,notificationPaddingHorizontal:i,notificationIconSize:e.fontSizeLG*e.lineHeightLG,notificationCloseButtonSize:e.controlHeightLG*.55,notificationMarginBottom:e.margin,notificationPadding:`${e.paddingMD}px ${e.paddingContentHorizontalLG}px`,notificationMarginEdge:e.marginLG,animationMaxHeight:150});return[zse(a)]},e=>({zIndexPopup:e.zIndexPopupBase+50,width:384}));var Kse=globalThis&&globalThis.__rest||function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(i[a[c]]=e[a[c]]);return i};function XG(e,t){return t||C.createElement("span",{className:`${e}-close-x`},C.createElement(Qie,{className:`${e}-close-icon`}))}const qse={success:vG,info:ooe,error:bI,warning:yG};function JG(e){let{prefixCls:t,icon:i,type:a,message:c,description:u,btn:f,role:m="alert"}=e,g=null;return i?g=C.createElement("span",{className:`${t}-icon`},i):a&&(g=C.createElement(qse[a]||null,{className:nt(`${t}-icon`,`${t}-icon-${a}`)})),C.createElement("div",{className:nt({[`${t}-with-icon`]:g}),role:m},g,C.createElement("div",{className:`${t}-message`},c),C.createElement("div",{className:`${t}-description`},u),f&&C.createElement("div",{className:`${t}-btn`},f))}function Yse(e){const{prefixCls:t,className:i,icon:a,type:c,message:u,description:f,btn:m,closable:g=!0,closeIcon:E}=e,y=Kse(e,["prefixCls","className","icon","type","message","description","btn","closable","closeIcon"]),{getPrefixCls:T}=C.useContext(wr),R=t||T("notification"),P=`${R}-notice`,[,O]=YG(R);return C.createElement(bG,Object.assign({},y,{prefixCls:R,className:nt(i,O,`${P}-pure-panel`),eventKey:"pure",duration:null,closable:g,closeIcon:XG(R,E),content:C.createElement(JG,{prefixCls:P,icon:a,type:c,message:u,description:f,btn:m})}))}function Xse(e,t,i){let a;switch(e){case"top":a={left:"50%",transform:"translateX(-50%)",right:"auto",top:t,bottom:"auto"};break;case"topLeft":a={left:0,top:t,bottom:"auto"};break;case"topRight":a={right:0,top:t,bottom:"auto"};break;case"bottom":a={left:"50%",transform:"translateX(-50%)",right:"auto",top:"auto",bottom:i};break;case"bottomLeft":a={left:0,top:"auto",bottom:i};break;default:a={right:0,top:"auto",bottom:i};break}return a}function Jse(e){return{motionName:`${e}-fade`}}var Qse=globalThis&&globalThis.__rest||function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(i[a[c]]=e[a[c]]);return i};const C6=24,Zse=4.5,ece=C.forwardRef((e,t)=>{const{top:i,bottom:a,prefixCls:c,getContainer:u,maxCount:f,rtl:m,onAllRemoved:g}=e,{getPrefixCls:E,getPopupContainer:y}=C.useContext(wr),T=c||E("notification"),R=x=>Xse(x,i??C6,a??C6),[,P]=YG(T),O=()=>nt(P,{[`${T}-rtl`]:m}),N=()=>Jse(T),[M,D]=moe({prefixCls:T,style:R,className:O,motion:N,closable:!0,closeIcon:XG(T),duration:Zse,getContainer:()=>(u==null?void 0:u())||(y==null?void 0:y())||document.body,maxCount:f,onAllRemoved:g});return C.useImperativeHandle(t,()=>Object.assign(Object.assign({},M),{prefixCls:T,hashId:P})),D});function QG(e){const t=C.useRef(null);return[C.useMemo(()=>{const a=m=>{if(!t.current)return;const{open:g,prefixCls:E,hashId:y}=t.current,T=`${E}-notice`,{message:R,description:P,icon:O,type:N,btn:M,className:D,role:x="alert"}=m,k=Qse(m,["message","description","icon","type","btn","className","role"]);return g(Object.assign(Object.assign({placement:"topRight"},k),{content:C.createElement(JG,{prefixCls:T,icon:O,type:N,message:R,description:P,btn:M,role:x}),className:nt(N&&`${T}-${N}`,y,D)}))},u={open:a,destroy:m=>{var g,E;m!==void 0?(g=t.current)===null||g===void 0||g.close(m):(E=t.current)===null||E===void 0||E.destroy()}};return["success","info","warning","error"].forEach(m=>{u[m]=g=>a(Object.assign(Object.assign({},g),{type:m}))}),u},[]),C.createElement(ece,Object.assign({key:"notification-holder"},e,{ref:t}))]}function tce(e){return QG(e)}const nce=function(){if(typeof navigator>"u"||typeof window>"u")return!1;var e=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(e==null?void 0:e.substr(0,4))};var rce=["prefixCls","invalidate","item","renderItem","responsive","responsiveDisabled","registerSize","itemKey","className","style","children","display","order","component"],T0=void 0;function ice(e,t){var i=e.prefixCls,a=e.invalidate,c=e.item,u=e.renderItem,f=e.responsive,m=e.responsiveDisabled,g=e.registerSize,E=e.itemKey,y=e.className,T=e.style,R=e.children,P=e.display,O=e.order,N=e.component,M=N===void 0?"div":N,D=Xn(e,rce),x=f&&!P;function k(K){g(E,K)}C.useEffect(function(){return function(){k(null)}},[]);var V=u&&c!==T0?u(c):R,H;a||(H={opacity:x?0:1,height:x?0:T0,overflowY:x?"hidden":T0,order:f?O:T0,pointerEvents:x?"none":T0,position:x?"absolute":T0});var $={};x&&($["aria-hidden"]=!0);var G=C.createElement(M,st({className:nt(!a&&i,y),style:Ae(Ae({},H),T)},$,D,{ref:t}),V);return f&&(G=C.createElement(yp,{onResize:function(Q){var z=Q.offsetWidth;k(z)},disabled:m},G)),G}var W_=C.forwardRef(ice);W_.displayName="Item";function oce(e){if(typeof MessageChannel>"u")Zo(e);else{var t=new MessageChannel;t.port1.onmessage=function(){return e()},t.port2.postMessage(void 0)}}function ace(){var e=C.useRef(null),t=function(a){e.current||(e.current=[],oce(function(){Wh.unstable_batchedUpdates(function(){e.current.forEach(function(c){c()}),e.current=null})})),e.current.push(a)};return t}function m_(e,t){var i=C.useState(t),a=Ye(i,2),c=a[0],u=a[1],f=El(function(m){e(function(){u(m)})});return[c,f]}var w1=Nt.createContext(null),sce=["component"],cce=["className"],lce=["className"],uce=function(t,i){var a=C.useContext(w1);if(!a){var c=t.component,u=c===void 0?"div":c,f=Xn(t,sce);return C.createElement(u,st({},f,{ref:i}))}var m=a.className,g=Xn(a,cce),E=t.className,y=Xn(t,lce);return C.createElement(w1.Provider,{value:null},C.createElement(W_,st({ref:i,className:nt(m,E)},g,y)))},ZG=C.forwardRef(uce);ZG.displayName="RawItem";var dce=["prefixCls","data","renderItem","renderRawItem","itemKey","itemWidth","ssr","style","className","maxCount","renderRest","renderRawRest","suffix","component","itemComponent","onVisibleChange"],ez="responsive",tz="invalidate";function hce(e){return"+ ".concat(e.length," ...")}function fce(e,t){var i=e.prefixCls,a=i===void 0?"rc-overflow":i,c=e.data,u=c===void 0?[]:c,f=e.renderItem,m=e.renderRawItem,g=e.itemKey,E=e.itemWidth,y=E===void 0?10:E,T=e.ssr,R=e.style,P=e.className,O=e.maxCount,N=e.renderRest,M=e.renderRawRest,D=e.suffix,x=e.component,k=x===void 0?"div":x,V=e.itemComponent,H=e.onVisibleChange,$=Xn(e,dce),G=T==="full",K=ace(),Q=m_(K,null),z=Ye(Q,2),ie=z[0],J=z[1],Y=ie||0,oe=m_(K,new Map),ue=Ye(oe,2),he=ue[0],Se=ue[1],ve=m_(K,0),Re=Ye(ve,2),Ce=Re[0],pe=Re[1],fe=m_(K,0),_e=Ye(fe,2),ge=_e[0],Ue=_e[1],Fe=m_(K,0),ot=Ye(Fe,2),qe=ot[0],wt=ot[1],kt=C.useState(null),_t=Ye(kt,2),vt=_t[0],At=_t[1],it=C.useState(null),Mt=Ye(it,2),rn=Mt[0],Ft=Mt[1],ft=C.useMemo(function(){return rn===null&&G?Number.MAX_SAFE_INTEGER:rn||0},[rn,ie]),dt=C.useState(!1),at=Ye(dt,2),ht=at[0],Ot=at[1],Vt="".concat(a,"-item"),zt=Math.max(Ce,ge),Kt=O===ez,mn=u.length&&Kt,Hn=O===tz,Zr=mn||typeof O=="number"&&u.length>O,yr=C.useMemo(function(){var jt=u;return mn?ie===null&&G?jt=u:jt=u.slice(0,Math.min(u.length,Y/y)):typeof O=="number"&&(jt=u.slice(0,O)),jt},[u,y,ie,O,mn]),or=C.useMemo(function(){return mn?u.slice(ft+1):u.slice(yr.length)},[u,yr,mn,ft]),Ln=C.useCallback(function(jt,_n){var Pn;return typeof g=="function"?g(jt):(Pn=g&&(jt==null?void 0:jt[g]))!==null&&Pn!==void 0?Pn:_n},[g]),Gr=C.useCallback(f||function(jt){return jt},[f]);function Wn(jt,_n,Pn){rn===jt&&(_n===void 0||_n===vt)||(Ft(jt),Pn||(Ot(jt<u.length-1),H==null||H(jt)),_n!==void 0&&At(_n))}function hn(jt,_n){J(_n.clientWidth)}function fn(jt,_n){Se(function(Pn){var zr=new Map(Pn);return _n===null?zr.delete(jt):zr.set(jt,_n),zr})}function Ro(jt,_n){Ue(_n),pe(ge)}function zi(jt,_n){wt(_n)}function ei(jt){return he.get(Ln(yr[jt],jt))}Ti(function(){if(Y&&typeof zt=="number"&&yr){var jt=qe,_n=yr.length,Pn=_n-1;if(!_n){Wn(0,null);return}for(var zr=0;zr<_n;zr+=1){var Ei=ei(zr);if(G&&(Ei=Ei||0),Ei===void 0){Wn(zr-1,void 0,!0);break}if(jt+=Ei,Pn===0&&jt<=Y||zr===Pn-1&&jt+ei(Pn)<=Y){Wn(Pn,null);break}else if(jt+zt>Y){Wn(zr-1,jt-Ei-qe+ge);break}}D&&ei(0)+qe>Y&&At(null)}},[Y,he,ge,qe,Ln,yr]);var Gn=ht&&!!or.length,Qe={};vt!==null&&mn&&(Qe={position:"absolute",left:vt,top:0});var Tt={prefixCls:Vt,responsive:mn,component:V,invalidate:Hn},Un=m?function(jt,_n){var Pn=Ln(jt,_n);return C.createElement(w1.Provider,{key:Pn,value:Ae(Ae({},Tt),{},{order:_n,item:jt,itemKey:Pn,registerSize:fn,display:_n<=ft})},m(jt,_n))}:function(jt,_n){var Pn=Ln(jt,_n);return C.createElement(W_,st({},Tt,{order:_n,key:Pn,item:jt,renderItem:Gr,itemKey:Pn,registerSize:fn,display:_n<=ft}))},an,Ki={order:Gn?ft:Number.MAX_SAFE_INTEGER,className:"".concat(Vt,"-rest"),registerSize:Ro,display:Gn};if(M)M&&(an=C.createElement(w1.Provider,{value:Ae(Ae({},Tt),Ki)},M(or)));else{var hi=N||hce;an=C.createElement(W_,st({},Tt,Ki),typeof hi=="function"?hi(or):hi)}var Cr=C.createElement(k,st({className:nt(!Hn&&a,P),style:R,ref:t},$),yr.map(Un),Zr?an:null,D&&C.createElement(W_,st({},Tt,{responsive:Kt,responsiveDisabled:!mn,order:ft,className:"".concat(Vt,"-suffix"),registerSize:zi,display:!0,style:Qe}),D));return Kt&&(Cr=C.createElement(yp,{onResize:hn,disabled:!mn},Cr)),Cr}var id=C.forwardRef(fce);id.displayName="Overflow";id.Item=ZG;id.RESPONSIVE=ez;id.INVALIDATE=tz;function nz(e){var t;return e==null||(t=e.getRootNode)===null||t===void 0?void 0:t.call(e)}function pce(e){return nz(e)!==(e==null?void 0:e.ownerDocument)}function ok(e){return pce(e)?nz(e):null}var T6=C.createContext(null);function b6(e){return e?Array.isArray(e)?e:[e]:[]}function mce(e,t,i,a){return C.useMemo(function(){var c=b6(i??t),u=b6(a??t),f=new Set(c),m=new Set(u);return e&&(f.has("hover")&&(f.delete("hover"),f.add("click")),m.has("hover")&&(m.delete("hover"),m.add("click"))),[f,m]},[e,t,i,a])}function gce(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0;return i?e[0]===t[0]:e[0]===t[0]&&e[1]===t[1]}function vce(e,t,i,a){for(var c=i.points,u=Object.keys(e),f=0;f<u.length;f+=1){var m,g=u[f];if(gce((m=e[g])===null||m===void 0?void 0:m.points,c,a))return"".concat(t,"-placement-").concat(g)}return""}function R6(e,t,i,a){return t||(i?{motionName:"".concat(e,"-").concat(i)}:a?{motionName:a}:null)}function FS(e){return e.ownerDocument.defaultView}function ak(e){for(var t=[],i=e==null?void 0:e.parentElement,a=["hidden","scroll","clip","auto"];i;){var c=FS(i).getComputedStyle(i),u=c.overflowX,f=c.overflowY,m=c.overflow;[u,f,m].some(function(g){return a.includes(g)})&&t.push(i),i=i.parentElement}return t}function _S(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return Number.isNaN(e)?t:e}function g_(e){return _S(parseFloat(e),0)}function I6(e,t){var i=Ae({},e);return(t||[]).forEach(function(a){if(!(a instanceof HTMLBodyElement)){var c=FS(a).getComputedStyle(a),u=c.overflow,f=c.overflowClipMargin,m=c.borderTopWidth,g=c.borderBottomWidth,E=c.borderLeftWidth,y=c.borderRightWidth,T=a.getBoundingClientRect(),R=a.offsetHeight,P=a.clientHeight,O=a.offsetWidth,N=a.clientWidth,M=g_(m),D=g_(g),x=g_(E),k=g_(y),V=_S(Math.round(T.width/O*1e3)/1e3),H=_S(Math.round(T.height/R*1e3)/1e3),$=(O-N-x-k)*V,G=(R-P-M-D)*H,K=M*H,Q=D*H,z=x*V,ie=k*V,J=0,Y=0;if(u==="clip"){var oe=g_(f);J=oe*V,Y=oe*H}var ue=T.x+z-J,he=T.y+K-Y,Se=ue+T.width+2*J-z-ie-$,ve=he+T.height+2*Y-K-Q-G;i.left=Math.max(i.left,ue),i.top=Math.max(i.top,he),i.right=Math.min(i.right,Se),i.bottom=Math.min(i.bottom,ve)}}),i}function w6(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i="".concat(t),a=i.match(/^(.*)\%$/);return a?e*(parseFloat(a[1])/100):parseFloat(i)}function O6(e,t){var i=t||[],a=Ye(i,2),c=a[0],u=a[1];return[w6(e.width,c),w6(e.height,u)]}function A6(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return[e[0],e[1]]}function b0(e,t){var i=t[0],a=t[1],c,u;return i==="t"?u=e.y:i==="b"?u=e.y+e.height:u=e.y+e.height/2,a==="l"?c=e.x:a==="r"?c=e.x+e.width:c=e.x+e.width/2,{x:c,y:u}}function vh(e,t){var i={t:"b",b:"t",l:"r",r:"l"};return e.map(function(a,c){return c===t?i[a]||"c":a}).join("")}function Ece(e,t,i,a,c,u,f){var m=C.useState({ready:!1,offsetX:0,offsetY:0,offsetR:0,offsetB:0,arrowX:0,arrowY:0,scaleX:1,scaleY:1,align:c[a]||{}}),g=Ye(m,2),E=g[0],y=g[1],T=C.useRef(0),R=C.useMemo(function(){return t?ak(t):[]},[t]),P=C.useRef({}),O=function(){P.current={}};e||O();var N=El(function(){if(t&&i&&e){let Li=function(Bl,jo){var ic=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Mt,Hc=J.x+Bl,Ru=J.y+jo,gd=Hc+ge,vd=Ru+_e,Iu=Math.max(Hc,ic.left),Ed=Math.max(Ru,ic.top),Ut=Math.min(gd,ic.right),pn=Math.min(vd,ic.bottom);return Math.max(0,(Ut-Iu)*(pn-Ed))},$c=function(){Kr=J.y+Qe,uo=Kr+_e,Io=J.x+Gn,Uo=Io+ge};var Ts=Li,Gh=$c,x=t,k=x.style.left,V=x.style.top,H=x.style.right,$=x.style.bottom,G=x.ownerDocument,K=FS(x),Q=Ae(Ae({},c[a]),u);x.style.left="0",x.style.top="0",x.style.right="auto",x.style.bottom="auto";var z;if(Array.isArray(i))z={x:i[0],y:i[1],width:0,height:0};else{var ie=i.getBoundingClientRect();z={x:ie.x,y:ie.y,width:ie.width,height:ie.height}}var J=x.getBoundingClientRect(),Y=K.getComputedStyle(x),oe=Y.width,ue=Y.height,he=G.documentElement,Se=he.clientWidth,ve=he.clientHeight,Re=he.scrollWidth,Ce=he.scrollHeight,pe=he.scrollTop,fe=he.scrollLeft,_e=J.height,ge=J.width,Ue=z.height,Fe=z.width,ot={left:0,top:0,right:Se,bottom:ve},qe={left:-fe,top:-pe,right:Re-fe,bottom:Ce-pe},wt=Q.htmlRegion,kt="visible",_t="visibleFirst";wt!=="scroll"&&wt!==_t&&(wt=kt);var vt=wt===_t,At=I6(qe,R),it=I6(ot,R),Mt=wt===kt?it:At,rn=vt?it:Mt;x.style.left="auto",x.style.top="auto",x.style.right="0",x.style.bottom="0";var Ft=x.getBoundingClientRect();x.style.left=k,x.style.top=V,x.style.right=H,x.style.bottom=$;var ft=_S(Math.round(ge/parseFloat(oe)*1e3)/1e3),dt=_S(Math.round(_e/parseFloat(ue)*1e3)/1e3);if(ft===0||dt===0||f1(i)&&!II(i))return;var at=Q.offset,ht=Q.targetOffset,Ot=O6(J,at),Vt=Ye(Ot,2),zt=Vt[0],Kt=Vt[1],mn=O6(z,ht),Hn=Ye(mn,2),Zr=Hn[0],yr=Hn[1];z.x-=Zr,z.y-=yr;var or=Q.points||[],Ln=Ye(or,2),Gr=Ln[0],Wn=Ln[1],hn=A6(Wn),fn=A6(Gr),Ro=b0(z,hn),zi=b0(J,fn),ei=Ae({},Q),Gn=Ro.x-zi.x+zt,Qe=Ro.y-zi.y+Kt,Tt=Li(Gn,Qe),Un=Li(Gn,Qe,it),an=b0(z,["t","l"]),Ki=b0(J,["t","l"]),hi=b0(z,["b","r"]),Cr=b0(J,["b","r"]),jt=Q.overflow||{},_n=jt.adjustX,Pn=jt.adjustY,zr=jt.shiftX,Ei=jt.shiftY,ti=function(jo){return typeof jo=="boolean"?jo:jo>=0},Kr,uo,Io,Uo;$c();var Fo=ti(Pn),Fc=fn[0]===hn[0];if(Fo&&fn[0]==="t"&&(uo>rn.bottom||P.current.bt)){var Ii=Qe;Fc?Ii-=_e-Ue:Ii=an.y-Cr.y-Kt;var Vc=Li(Gn,Ii),Pl=Li(Gn,Ii,it);Vc>Tt||Vc===Tt&&(!vt||Pl>=Un)?(P.current.bt=!0,Qe=Ii,ei.points=[vh(fn,0),vh(hn,0)]):P.current.bt=!1}if(Fo&&fn[0]==="b"&&(Kr<rn.top||P.current.tb)){var pr=Qe;Fc?pr+=_e-Ue:pr=hi.y-Ki.y-Kt;var Dl=Li(Gn,pr),ho=Li(Gn,pr,it);Dl>Tt||Dl===Tt&&(!vt||ho>=Un)?(P.current.tb=!0,Qe=pr,ei.points=[vh(fn,0),vh(hn,0)]):P.current.tb=!1}var Ll=ti(_n),kl=fn[1]===hn[1];if(Ll&&fn[1]==="l"&&(Uo>rn.right||P.current.rl)){var wa=Gn;kl?wa-=ge-Fe:wa=an.x-Cr.x-zt;var jc=Li(wa,Qe),oa=Li(wa,Qe,it);jc>Tt||jc===Tt&&(!vt||oa>=Un)?(P.current.rl=!0,Gn=wa,ei.points=[vh(fn,1),vh(hn,1)]):P.current.rl=!1}if(Ll&&fn[1]==="r"&&(Io<rn.left||P.current.lr)){var aa=Gn;kl?aa+=ge-Fe:aa=hi.x-Ki.x-zt;var Cs=Li(aa,Qe),Ml=Li(aa,Qe,it);Cs>Tt||Cs===Tt&&(!vt||Ml>=Un)?(P.current.lr=!0,Gn=aa,ei.points=[vh(fn,1),vh(hn,1)]):P.current.lr=!1}$c();var Ba=zr===!0?0:zr;typeof Ba=="number"&&(Io<it.left&&(Gn-=Io-it.left,z.x+Fe<it.left+Ba&&(Gn+=z.x-it.left+Fe-Ba)),Uo>it.right&&(Gn-=Uo-it.right,z.x>it.right-Ba&&(Gn+=z.x-it.right+Ba)));var Di=Ei===!0?0:Ei;typeof Di=="number"&&(Kr<it.top&&(Qe-=Kr-it.top,z.y+Ue<it.top+Di&&(Qe+=z.y-it.top+Ue-Di)),uo>it.bottom&&(Qe-=uo-it.bottom,z.y>it.bottom-Di&&(Qe+=z.y-it.bottom+Di)));var _i=J.x+Gn,sa=_i+ge,nc=J.y+Qe,Ar=nc+_e,Bc=z.x,Ul=Bc+Fe,rc=z.y,Fl=rc+Ue,Vl=Math.max(_i,Bc),jl=Math.min(sa,Ul),Qn=(Vl+jl)/2,zn=Qn-_i,Zn=Math.max(nc,rc),ni=Math.min(Ar,Fl),ri=(Zn+ni)/2,Vo=ri-nc;f==null||f(t,ei);var fo=Ft.right-J.x-(Gn+J.width),$a=Ft.bottom-J.y-(Qe+J.height);y({ready:!0,offsetX:Gn/ft,offsetY:Qe/dt,offsetR:fo/ft,offsetB:$a/dt,arrowX:zn/ft,arrowY:Vo/dt,scaleX:ft,scaleY:dt,align:ei})}}),M=function(){T.current+=1;var k=T.current;Promise.resolve().then(function(){T.current===k&&N()})},D=function(){y(function(k){return Ae(Ae({},k),{},{ready:!1})})};return Ti(D,[a]),Ti(function(){e||D()},[e]),[E.ready,E.offsetX,E.offsetY,E.offsetR,E.offsetB,E.arrowX,E.arrowY,E.scaleX,E.scaleY,E.align,M]}function _ce(e,t,i,a){Ti(function(){if(e&&t&&i){let T=function(){a()};var y=T,c=t,u=i,f=ak(c),m=ak(u),g=FS(u),E=new Set([g].concat(gt(f),gt(m)));return E.forEach(function(R){R.addEventListener("scroll",T,{passive:!0})}),g.addEventListener("resize",T,{passive:!0}),a(),function(){E.forEach(function(R){R.removeEventListener("scroll",T),g.removeEventListener("resize",T)})}}},[e,t,i])}function Sce(e,t,i,a,c,u,f,m){var g=C.useRef(e),E=C.useRef(!1);g.current!==e&&(E.current=!0,g.current=e),C.useEffect(function(){var y=Zo(function(){E.current=!1});return function(){Zo.cancel(y)}},[e]),C.useEffect(function(){if(t&&a&&(!c||u)){var y=function(){var $=!1,G=function(z){var ie=z.target;$=f(ie)},K=function(z){var ie=z.target;!E.current&&g.current&&!$&&!f(ie)&&m(!1)};return[G,K]},T=y(),R=Ye(T,2),P=R[0],O=R[1],N=y(),M=Ye(N,2),D=M[0],x=M[1],k=FS(a);k.addEventListener("mousedown",P),k.addEventListener("click",O),k.addEventListener("contextmenu",O);var V=ok(i);return V&&(V.addEventListener("mousedown",D),V.addEventListener("click",x),V.addEventListener("contextmenu",x)),function(){k.removeEventListener("mousedown",P),k.removeEventListener("click",O),k.removeEventListener("contextmenu",O),V&&(V.removeEventListener("mousedown",D),V.removeEventListener("click",x),V.removeEventListener("contextmenu",x))}}},[t,i,a,c,u])}function yce(e){var t=e.prefixCls,i=e.align,a=e.arrow,c=e.arrowPos,u=a||{},f=u.className,m=u.content,g=c.x,E=g===void 0?0:g,y=c.y,T=y===void 0?0:y,R=C.useRef();if(!i||!i.points)return null;var P={position:"absolute"};if(i.autoArrow!==!1){var O=i.points[0],N=i.points[1],M=O[0],D=O[1],x=N[0],k=N[1];M===x||!["t","b"].includes(M)?P.top=T:M==="t"?P.top=0:P.bottom=0,D===k||!["l","r"].includes(D)?P.left=E:D==="l"?P.left=0:P.right=0}return C.createElement("div",{ref:R,className:nt("".concat(t,"-arrow"),f),style:P},m)}function Cce(e){var t=e.prefixCls,i=e.open,a=e.zIndex,c=e.mask,u=e.motion;return c?C.createElement(Tp,st({},u,{motionAppear:!0,visible:i,removeOnLeave:!0}),function(f){var m=f.className;return C.createElement("div",{style:{zIndex:a},className:nt("".concat(t,"-mask"),m)})}):null}var Tce=C.memo(function(e){var t=e.children;return t},function(e,t){return t.cache}),bce=C.forwardRef(function(e,t){var i=e.popup,a=e.className,c=e.prefixCls,u=e.style,f=e.target,m=e.onVisibleChanged,g=e.open,E=e.keepDom,y=e.onClick,T=e.mask,R=e.arrow,P=e.arrowPos,O=e.align,N=e.motion,M=e.maskMotion,D=e.forceRender,x=e.getPopupContainer,k=e.autoDestroy,V=e.portal,H=e.zIndex,$=e.onMouseEnter,G=e.onMouseLeave,K=e.ready,Q=e.offsetX,z=e.offsetY,ie=e.offsetR,J=e.offsetB,Y=e.onAlign,oe=e.onPrepare,ue=e.stretch,he=e.targetWidth,Se=e.targetHeight,ve=typeof i=="function"?i():i,Re=g||E,Ce=(x==null?void 0:x.length)>0,pe=C.useState(!x||!Ce),fe=Ye(pe,2),_e=fe[0],ge=fe[1];if(Ti(function(){!_e&&Ce&&f&&ge(!0)},[_e,Ce,f]),!_e)return null;var Ue="auto",Fe={left:"-1000vw",top:"-1000vh",right:Ue,bottom:Ue};if(K||!g){var ot=O.points,qe=O._experimental,wt=qe==null?void 0:qe.dynamicInset,kt=wt&&ot[0][1]==="r",_t=wt&&ot[0][0]==="b";kt?(Fe.right=ie,Fe.left=Ue):(Fe.left=Q,Fe.right=Ue),_t?(Fe.bottom=J,Fe.top=Ue):(Fe.top=z,Fe.bottom=Ue)}var vt={};return ue&&(ue.includes("height")&&Se?vt.height=Se:ue.includes("minHeight")&&Se&&(vt.minHeight=Se),ue.includes("width")&&he?vt.width=he:ue.includes("minWidth")&&he&&(vt.minWidth=he)),g||(vt.pointerEvents="none"),C.createElement(V,{open:D||Re,getContainer:x&&function(){return x(f)},autoDestroy:k},C.createElement(Cce,{prefixCls:c,open:g,zIndex:H,mask:T,motion:M}),C.createElement(yp,{onResize:Y,disabled:!g},function(At){return C.createElement(Tp,st({motionAppear:!0,motionEnter:!0,motionLeave:!0,removeOnLeave:!1,forceRender:D,leavedClassName:"".concat(c,"-hidden")},N,{onAppearPrepare:oe,onEnterPrepare:oe,visible:g,onVisibleChanged:function(Mt){var rn;N==null||(rn=N.onVisibleChanged)===null||rn===void 0||rn.call(N,Mt),m(Mt)}}),function(it,Mt){var rn=it.className,Ft=it.style,ft=nt(c,rn,a);return C.createElement("div",{ref:Ol(At,t,Mt),className:ft,style:Ae(Ae(Ae(Ae({"--arrow-x":"".concat(P.x||0,"px"),"--arrow-y":"".concat(P.y||0,"px")},Fe),vt),Ft),{},{boxSizing:"border-box",zIndex:H},u),onMouseEnter:$,onMouseLeave:G,onClick:y},R&&C.createElement(yce,{prefixCls:c,arrow:R,arrowPos:P,align:O}),C.createElement(Tce,{cache:!g},ve))})}))}),Rce=C.forwardRef(function(e,t){var i=e.children,a=e.getTriggerDOMNode,c=Cg(i),u=C.useCallback(function(m){T2(t,a?a(m):m)},[a]),f=b2(u,i.ref);return c?C.cloneElement(i,{ref:f}):i}),Ice=["prefixCls","children","action","showAction","hideAction","popupVisible","defaultPopupVisible","onPopupVisibleChange","afterPopupVisibleChange","mouseEnterDelay","mouseLeaveDelay","focusDelay","blurDelay","mask","maskClosable","getPopupContainer","forceRender","autoDestroy","destroyPopupOnHide","popup","popupClassName","popupStyle","popupPlacement","builtinPlacements","popupAlign","zIndex","stretch","getPopupClassNameFromAlign","alignPoint","onPopupClick","onPopupAlign","arrow","popupMotion","maskMotion","popupTransitionName","popupAnimation","maskTransitionName","maskAnimation","className","getTriggerDOMNode"];function wce(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:kG,t=C.forwardRef(function(i,a){var c=i.prefixCls,u=c===void 0?"rc-trigger-popup":c,f=i.children,m=i.action,g=m===void 0?"hover":m,E=i.showAction,y=i.hideAction,T=i.popupVisible,R=i.defaultPopupVisible,P=i.onPopupVisibleChange,O=i.afterPopupVisibleChange,N=i.mouseEnterDelay,M=i.mouseLeaveDelay,D=M===void 0?.1:M,x=i.focusDelay,k=i.blurDelay,V=i.mask,H=i.maskClosable,$=H===void 0?!0:H,G=i.getPopupContainer,K=i.forceRender,Q=i.autoDestroy,z=i.destroyPopupOnHide,ie=i.popup,J=i.popupClassName,Y=i.popupStyle,oe=i.popupPlacement,ue=i.builtinPlacements,he=ue===void 0?{}:ue,Se=i.popupAlign,ve=i.zIndex,Re=i.stretch,Ce=i.getPopupClassNameFromAlign,pe=i.alignPoint,fe=i.onPopupClick,_e=i.onPopupAlign,ge=i.arrow,Ue=i.popupMotion,Fe=i.maskMotion,ot=i.popupTransitionName,qe=i.popupAnimation,wt=i.maskTransitionName,kt=i.maskAnimation,_t=i.className,vt=i.getTriggerDOMNode,At=Xn(i,Ice),it=Q||z||!1,Mt=C.useState(!1),rn=Ye(Mt,2),Ft=rn[0],ft=rn[1];Ti(function(){ft(nce())},[]);var dt=C.useRef({}),at=C.useContext(T6),ht=C.useMemo(function(){return{registerSubPopup:function(pn,ar){dt.current[pn]=ar,at==null||at.registerSubPopup(pn,ar)}}},[at]),Ot=Iae(),Vt=C.useState(null),zt=Ye(Vt,2),Kt=zt[0],mn=zt[1],Hn=El(function(Ut){f1(Ut)&&Kt!==Ut&&mn(Ut),at==null||at.registerSubPopup(Ot,Ut)}),Zr=C.useState(null),yr=Ye(Zr,2),or=yr[0],Ln=yr[1],Gr=El(function(Ut){f1(Ut)&&or!==Ut&&Ln(Ut)}),Wn=C.Children.only(f),hn=(Wn==null?void 0:Wn.props)||{},fn={},Ro=El(function(Ut){var pn,ar,ii=or;return(ii==null?void 0:ii.contains(Ut))||((pn=ok(ii))===null||pn===void 0?void 0:pn.host)===Ut||Ut===ii||(Kt==null?void 0:Kt.contains(Ut))||((ar=ok(Kt))===null||ar===void 0?void 0:ar.host)===Ut||Ut===Kt||Object.values(dt.current).some(function(Mr){return(Mr==null?void 0:Mr.contains(Ut))||Ut===Mr})}),zi=R6(u,Ue,qe,ot),ei=R6(u,Fe,kt,wt),Gn=C.useState(R||!1),Qe=Ye(Gn,2),Tt=Qe[0],Un=Qe[1],an=T??Tt,Ki=El(function(Ut){T===void 0&&Un(Ut)});Ti(function(){Un(T||!1)},[T]);var hi=C.useRef(an);hi.current=an;var Cr=El(function(Ut){an!==Ut&&(Ki(Ut),P==null||P(Ut))}),jt=C.useRef(),_n=function(){clearTimeout(jt.current)},Pn=function(pn){var ar=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;_n(),ar===0?Cr(pn):jt.current=setTimeout(function(){Cr(pn)},ar*1e3)};C.useEffect(function(){return _n},[]);var zr=C.useState(!1),Ei=Ye(zr,2),ti=Ei[0],Kr=Ei[1];Ti(function(Ut){(!Ut||an)&&Kr(!0)},[an]);var uo=C.useState(null),Io=Ye(uo,2),Uo=Io[0],Fo=Io[1],Fc=C.useState([0,0]),Ii=Ye(Fc,2),Vc=Ii[0],Pl=Ii[1],pr=function(pn){Pl([pn.clientX,pn.clientY])},Dl=Ece(an,Kt,pe?Vc:or,oe,he,Se,_e),ho=Ye(Dl,11),Ll=ho[0],kl=ho[1],wa=ho[2],jc=ho[3],oa=ho[4],aa=ho[5],Cs=ho[6],Ml=ho[7],Ba=ho[8],Di=ho[9],_i=ho[10],sa=El(function(){ti||_i()});_ce(an,or,Kt,sa),Ti(function(){sa()},[Vc,oe]),Ti(function(){an&&!(he!=null&&he[oe])&&sa()},[JSON.stringify(Se)]);var nc=C.useMemo(function(){var Ut=vce(he,u,Di,pe);return nt(Ut,Ce==null?void 0:Ce(Di))},[Di,Ce,he,u,pe]);C.useImperativeHandle(a,function(){return{forceAlign:sa}});var Ar=function(pn){Kr(!1),_i(),O==null||O(pn)},Bc=function(){return new Promise(function(pn){Fo(function(){return pn})})};Ti(function(){Uo&&(_i(),Uo(),Fo(null))},[Uo]);var Ul=C.useState(0),rc=Ye(Ul,2),Fl=rc[0],Vl=rc[1],jl=C.useState(0),Qn=Ye(jl,2),zn=Qn[0],Zn=Qn[1],ni=function(pn,ar){if(sa(),Re){var ii=ar.getBoundingClientRect();Vl(ii.width),Zn(ii.height)}},ri=mce(Ft,g,E,y),Vo=Ye(ri,2),fo=Vo[0],$a=Vo[1],Ts=function(pn,ar,ii,Mr){fn[pn]=function(wp){var _d;Mr==null||Mr(wp),Pn(ar,ii);for(var Sd=arguments.length,yd=new Array(Sd>1?Sd-1:0),Cd=1;Cd<Sd;Cd++)yd[Cd-1]=arguments[Cd];(_d=hn[pn])===null||_d===void 0||_d.call.apply(_d,[hn,wp].concat(yd))}},Gh=fo.has("click"),Li=$a.has("click")||$a.has("contextMenu");(Gh||Li)&&(fn.onClick=function(Ut){var pn;hi.current&&Li?Pn(!1):!hi.current&&Gh&&(pr(Ut),Pn(!0));for(var ar=arguments.length,ii=new Array(ar>1?ar-1:0),Mr=1;Mr<ar;Mr++)ii[Mr-1]=arguments[Mr];(pn=hn.onClick)===null||pn===void 0||pn.call.apply(pn,[hn,Ut].concat(ii))}),Sce(an,Li,or,Kt,V,$,Ro,Pn);var $c=fo.has("hover"),Bl=$a.has("hover"),jo,ic;$c&&(Ts("onMouseEnter",!0,N,function(Ut){pr(Ut)}),jo=function(){Pn(!0,N)},pe&&(fn.onMouseMove=function(Ut){var pn;(pn=hn.onMouseMove)===null||pn===void 0||pn.call(hn,Ut)})),Bl&&(Ts("onMouseLeave",!1,D),ic=function(){Pn(!1,D)}),fo.has("focus")&&Ts("onFocus",!0,x),$a.has("focus")&&Ts("onBlur",!1,k),fo.has("contextMenu")&&(fn.onContextMenu=function(Ut){var pn;hi.current&&$a.has("contextMenu")?Pn(!1):(pr(Ut),Pn(!0)),Ut.preventDefault();for(var ar=arguments.length,ii=new Array(ar>1?ar-1:0),Mr=1;Mr<ar;Mr++)ii[Mr-1]=arguments[Mr];(pn=hn.onContextMenu)===null||pn===void 0||pn.call.apply(pn,[hn,Ut].concat(ii))}),_t&&(fn.className=nt(hn.className,_t));var Hc=Ae(Ae({},hn),fn),Ru={},gd=["onContextMenu","onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur"];gd.forEach(function(Ut){At[Ut]&&(Ru[Ut]=function(){for(var pn,ar=arguments.length,ii=new Array(ar),Mr=0;Mr<ar;Mr++)ii[Mr]=arguments[Mr];(pn=Hc[Ut])===null||pn===void 0||pn.call.apply(pn,[Hc].concat(ii)),At[Ut].apply(At,ii)})});var vd=C.cloneElement(Wn,Ae(Ae({},Hc),Ru)),Iu={x:aa,y:Cs},Ed=ge?Ae({},ge!==!0?ge:{}):null;return C.createElement(C.Fragment,null,C.createElement(yp,{disabled:!an,ref:Gr,onResize:ni},C.createElement(Rce,{getTriggerDOMNode:vt},vd)),C.createElement(T6.Provider,{value:ht},C.createElement(bce,{portal:e,ref:Hn,prefixCls:u,popup:ie,className:nt(J,nc),style:Y,target:or,onMouseEnter:jo,onMouseLeave:ic,zIndex:ve,open:an,keepDom:ti,onClick:fe,mask:V,motion:zi,maskMotion:ei,onVisibleChanged:Ar,onPrepare:Bc,forceRender:K,autoDestroy:it,getPopupContainer:G,align:Di,arrow:Ed,arrowPos:Iu,ready:Ll,offsetX:kl,offsetY:wa,offsetR:jc,offsetB:oa,onAlign:sa,stretch:Re,targetWidth:Fl/Ml,targetHeight:zn/Ba})))});return t}const rz=wce(kG);function G_(e,t,i){return nt({[`${e}-status-success`]:t==="success",[`${e}-status-warning`]:t==="warning",[`${e}-status-error`]:t==="error",[`${e}-status-validating`]:t==="validating",[`${e}-has-feedback`]:i})}const iz=(e,t)=>t||e;var oz={};Object.defineProperty(oz,"__esModule",{value:!0});var Oce={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"},Ace=oz.default=Oce;const Nce=(e,t)=>C.createElement(Mo,{...e,ref:t,icon:Ace}),xce=C.forwardRef(Nce);var az={};Object.defineProperty(az,"__esModule",{value:!0});var Pce={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"}}]},name:"search",theme:"outlined"},Dce=az.default=Pce;const Lce=(e,t)=>C.createElement(Mo,{...e,ref:t,icon:Dce}),kce=C.forwardRef(Lce),SS=["xxl","xl","lg","md","sm","xs"],Mce=e=>({xs:`(max-width: ${e.screenXSMax}px)`,sm:`(min-width: ${e.screenSM}px)`,md:`(min-width: ${e.screenMD}px)`,lg:`(min-width: ${e.screenLG}px)`,xl:`(min-width: ${e.screenXL}px)`,xxl:`(min-width: ${e.screenXXL}px)`}),Uce=e=>{const t=e,i=[].concat(SS).reverse();return i.forEach((a,c)=>{const u=a.toUpperCase(),f=`screen${u}Min`,m=`screen${u}`;if(!(t[f]<=t[m]))throw new Error(`${f}<=${m} fails : !(${t[f]}<=${t[m]})`);if(c<i.length-1){const g=`screen${u}Max`;if(!(t[m]<=t[g]))throw new Error(`${m}<=${g} fails : !(${t[m]}<=${t[g]})`);const y=`screen${i[c+1].toUpperCase()}Min`;if(!(t[g]<=t[y]))throw new Error(`${g}<=${y} fails : !(${t[g]}<=${t[y]})`)}}),e};function Fce(){const[,e]=bg(),t=Mce(Uce(e));return Nt.useMemo(()=>{const i=new Map;let a=-1,c={};return{matchHandlers:{},dispatch(u){return c=u,i.forEach(f=>f(c)),i.size>=1},subscribe(u){return i.size||this.register(),a+=1,i.set(a,u),u(c),a},unsubscribe(u){i.delete(u),i.size||this.unregister()},unregister(){Object.keys(t).forEach(u=>{const f=t[u],m=this.matchHandlers[f];m==null||m.mql.removeListener(m==null?void 0:m.listener)}),i.clear()},register(){Object.keys(t).forEach(u=>{const f=t[u],m=E=>{let{matches:y}=E;this.dispatch(Object.assign(Object.assign({},c),{[u]:y}))},g=window.matchMedia(f);g.addListener(m),this.matchHandlers[f]={mql:g,listener:m},m(g)})},responsiveMap:t}},[e])}var R0={shiftX:64,adjustY:1},I0={adjustX:1,shiftY:!0},Rc=[0,0],Vce={left:{points:["cr","cl"],overflow:I0,offset:[-4,0],targetOffset:Rc},right:{points:["cl","cr"],overflow:I0,offset:[4,0],targetOffset:Rc},top:{points:["bc","tc"],overflow:R0,offset:[0,-4],targetOffset:Rc},bottom:{points:["tc","bc"],overflow:R0,offset:[0,4],targetOffset:Rc},topLeft:{points:["bl","tl"],overflow:R0,offset:[0,-4],targetOffset:Rc},leftTop:{points:["tr","tl"],overflow:I0,offset:[-4,0],targetOffset:Rc},topRight:{points:["br","tr"],overflow:R0,offset:[0,-4],targetOffset:Rc},rightTop:{points:["tl","tr"],overflow:I0,offset:[4,0],targetOffset:Rc},bottomRight:{points:["tr","br"],overflow:R0,offset:[0,4],targetOffset:Rc},rightBottom:{points:["bl","br"],overflow:I0,offset:[4,0],targetOffset:Rc},bottomLeft:{points:["tl","bl"],overflow:R0,offset:[0,4],targetOffset:Rc},leftBottom:{points:["br","bl"],overflow:I0,offset:[-4,0],targetOffset:Rc}};function sz(e){var t=e.children,i=e.prefixCls,a=e.id,c=e.overlayInnerStyle,u=e.className,f=e.style;return C.createElement("div",{className:nt("".concat(i,"-content"),u),style:f},C.createElement("div",{className:"".concat(i,"-inner"),id:a,role:"tooltip",style:c},typeof t=="function"?t():t))}var jce=["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","afterVisibleChange","transitionName","animation","motion","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer","overlayInnerStyle","arrowContent","overlay","id","showArrow"],Bce=function(t,i){var a=t.overlayClassName,c=t.trigger,u=c===void 0?["hover"]:c,f=t.mouseEnterDelay,m=f===void 0?0:f,g=t.mouseLeaveDelay,E=g===void 0?.1:g,y=t.overlayStyle,T=t.prefixCls,R=T===void 0?"rc-tooltip":T,P=t.children,O=t.onVisibleChange,N=t.afterVisibleChange,M=t.transitionName,D=t.animation,x=t.motion,k=t.placement,V=k===void 0?"right":k,H=t.align,$=H===void 0?{}:H,G=t.destroyTooltipOnHide,K=G===void 0?!1:G,Q=t.defaultVisible,z=t.getTooltipContainer,ie=t.overlayInnerStyle;t.arrowContent;var J=t.overlay,Y=t.id,oe=t.showArrow,ue=oe===void 0?!0:oe,he=Xn(t,jce),Se=C.useRef(null);C.useImperativeHandle(i,function(){return Se.current});var ve=Ae({},he);"visible"in t&&(ve.popupVisible=t.visible);var Re=function(){return C.createElement(sz,{key:"content",prefixCls:R,id:Y,overlayInnerStyle:ie},J)};return C.createElement(rz,st({popupClassName:a,prefixCls:R,popup:Re,action:u,builtinPlacements:Vce,popupPlacement:V,ref:Se,popupAlign:$,getPopupContainer:z,onPopupVisibleChange:O,afterPopupVisibleChange:N,popupTransitionName:M,popupAnimation:D,popupMotion:x,defaultPopupVisible:Q,autoDestroy:K,mouseLeaveDelay:E,popupStyle:y,mouseEnterDelay:m,arrow:ue},ve),P)};const $ce=C.forwardRef(Bce),cz=8;function lz(e){const t=cz,{contentRadius:i,limitVerticalRadius:a}=e,c=i>12?i+2:12;return{dropdownArrowOffset:c,dropdownArrowOffsetVertical:a?t:c}}function iR(e,t){return e?t:{}}function Hce(e,t){const{componentCls:i,sizePopupArrow:a,borderRadiusXS:c,borderRadiusOuter:u,boxShadowPopoverArrow:f}=e,{colorBg:m,contentRadius:g=e.borderRadiusLG,limitVerticalRadius:E,arrowDistance:y=0,arrowPlacement:T={left:!0,right:!0,top:!0,bottom:!0}}=t,{dropdownArrowOffsetVertical:R,dropdownArrowOffset:P}=lz({contentRadius:g,limitVerticalRadius:E});return{[i]:Object.assign(Object.assign(Object.assign(Object.assign({[`${i}-arrow`]:[Object.assign(Object.assign({position:"absolute",zIndex:1,display:"block"},Nre(a,c,u,m,f)),{"&:before":{background:m}})]},iR(!!T.top,{[[`&-placement-top ${i}-arrow`,`&-placement-topLeft ${i}-arrow`,`&-placement-topRight ${i}-arrow`].join(",")]:{bottom:y,transform:"translateY(100%) rotate(180deg)"},[`&-placement-top ${i}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(100%) rotate(180deg)"},[`&-placement-topLeft ${i}-arrow`]:{left:{_skip_check_:!0,value:P}},[`&-placement-topRight ${i}-arrow`]:{right:{_skip_check_:!0,value:P}}})),iR(!!T.bottom,{[[`&-placement-bottom ${i}-arrow`,`&-placement-bottomLeft ${i}-arrow`,`&-placement-bottomRight ${i}-arrow`].join(",")]:{top:y,transform:"translateY(-100%)"},[`&-placement-bottom ${i}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(-100%)"},[`&-placement-bottomLeft ${i}-arrow`]:{left:{_skip_check_:!0,value:P}},[`&-placement-bottomRight ${i}-arrow`]:{right:{_skip_check_:!0,value:P}}})),iR(!!T.left,{[[`&-placement-left ${i}-arrow`,`&-placement-leftTop ${i}-arrow`,`&-placement-leftBottom ${i}-arrow`].join(",")]:{right:{_skip_check_:!0,value:y},transform:"translateX(100%) rotate(90deg)"},[`&-placement-left ${i}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(100%) rotate(90deg)"},[`&-placement-leftTop ${i}-arrow`]:{top:R},[`&-placement-leftBottom ${i}-arrow`]:{bottom:R}})),iR(!!T.right,{[[`&-placement-right ${i}-arrow`,`&-placement-rightTop ${i}-arrow`,`&-placement-rightBottom ${i}-arrow`].join(",")]:{left:{_skip_check_:!0,value:y},transform:"translateX(-100%) rotate(-90deg)"},[`&-placement-right ${i}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(-100%) rotate(-90deg)"},[`&-placement-rightTop ${i}-arrow`]:{top:R},[`&-placement-rightBottom ${i}-arrow`]:{bottom:R}}))}}function Wce(e,t,i,a){if(a===!1)return{adjustX:!1,adjustY:!1};const c=a&&typeof a=="object"?a:{},u={};switch(e){case"top":case"bottom":u.shiftX=t.dropdownArrowOffset*2+i;break;case"left":case"right":u.shiftY=t.dropdownArrowOffsetVertical*2+i;break}const f=Object.assign(Object.assign({},u),c);return f.shiftX||(f.adjustX=!0),f.shiftY||(f.adjustY=!0),f}const N6={left:{points:["cr","cl"]},right:{points:["cl","cr"]},top:{points:["bc","tc"]},bottom:{points:["tc","bc"]},topLeft:{points:["bl","tl"]},leftTop:{points:["tr","tl"]},topRight:{points:["br","tr"]},rightTop:{points:["tl","tr"]},bottomRight:{points:["tr","br"]},rightBottom:{points:["bl","br"]},bottomLeft:{points:["tl","bl"]},leftBottom:{points:["br","bl"]}},Gce={topLeft:{points:["bl","tc"]},leftTop:{points:["tr","cl"]},topRight:{points:["br","tc"]},rightTop:{points:["tl","cr"]},bottomRight:{points:["tr","bc"]},rightBottom:{points:["bl","cr"]},bottomLeft:{points:["tl","bc"]},leftBottom:{points:["br","cl"]}},zce=new Set(["topLeft","topRight","bottomLeft","bottomRight","leftTop","leftBottom","rightTop","rightBottom"]);function Kce(e){const{arrowWidth:t,autoAdjustOverflow:i,arrowPointAtCenter:a,offset:c,borderRadius:u,visibleFirst:f}=e,m=t/2,g={};return Object.keys(N6).forEach(E=>{const y=a&&Gce[E]||N6[E],T=Object.assign(Object.assign({},y),{offset:[0,0]});switch(g[E]=T,zce.has(E)&&(T.autoArrow=!1),E){case"top":case"topLeft":case"topRight":T.offset[1]=-m-c;break;case"bottom":case"bottomLeft":case"bottomRight":T.offset[1]=m+c;break;case"left":case"leftTop":case"leftBottom":T.offset[0]=-m-c;break;case"right":case"rightTop":case"rightBottom":T.offset[0]=m+c;break}const R=lz({contentRadius:u,limitVerticalRadius:!0});if(a)switch(E){case"topLeft":case"bottomLeft":T.offset[0]=-R.dropdownArrowOffset-m;break;case"topRight":case"bottomRight":T.offset[0]=R.dropdownArrowOffset+m;break;case"leftTop":case"rightTop":T.offset[1]=-R.dropdownArrowOffset-m;break;case"leftBottom":case"rightBottom":T.offset[1]=R.dropdownArrowOffset+m;break}T.overflow=Wce(E,R,t,i),f&&(T.htmlRegion="visibleFirst")}),g}const qce=e=>{const t=e!=null&&e.algorithm?E1(e.algorithm):E1(PS),i=Object.assign(Object.assign({},xS),e==null?void 0:e.token);return p7(i,{override:e==null?void 0:e.token},t,x7)},Yce=qce;function Xce(e){const{sizeUnit:t,sizeStep:i}=e,a=i-2;return{sizeXXL:t*(a+10),sizeXL:t*(a+6),sizeLG:t*(a+2),sizeMD:t*(a+2),sizeMS:t*(a+1),size:t*a,sizeSM:t*a,sizeXS:t*(a-1),sizeXXS:t*(a-1)}}const Jce=(e,t)=>{const i=t??PS(e),a=i.fontSizeSM,c=i.controlHeight-4;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},i),Xce(t??e)),N7(a)),{controlHeight:c}),O7(Object.assign(Object.assign({},i),{controlHeight:c})))},Qce=Jce,Eh=(e,t)=>new Jo(e).setAlpha(t).toRgbString(),w0=(e,t)=>new Jo(e).lighten(t).toHexString(),Zce=e=>{const t=ud(e,{theme:"dark"});return{1:t[0],2:t[1],3:t[2],4:t[3],5:t[6],6:t[5],7:t[4],8:t[6],9:t[5],10:t[4]}},ele=(e,t)=>{const i=e||"#000",a=t||"#fff";return{colorBgBase:i,colorTextBase:a,colorText:Eh(a,.85),colorTextSecondary:Eh(a,.65),colorTextTertiary:Eh(a,.45),colorTextQuaternary:Eh(a,.25),colorFill:Eh(a,.18),colorFillSecondary:Eh(a,.12),colorFillTertiary:Eh(a,.08),colorFillQuaternary:Eh(a,.04),colorBgElevated:w0(i,12),colorBgContainer:w0(i,8),colorBgLayout:w0(i,0),colorBgSpotlight:w0(i,26),colorBorder:w0(i,26),colorBorderSecondary:w0(i,19)}},tle=(e,t)=>{const i=Object.keys(k2).map(c=>{const u=ud(e[c],{theme:"dark"});return new Array(10).fill(1).reduce((f,m,g)=>(f[`${c}-${g+1}`]=u[g],f[`${c}${g+1}`]=u[g],f),{})}).reduce((c,u)=>(c=Object.assign(Object.assign({},c),u),c),{}),a=t??PS(e);return Object.assign(Object.assign(Object.assign({},a),i),A7(e,{generateColorPalettes:Zce,generateNeutralColorPalettes:ele}))},nle=tle;function rle(){const[e,t,i]=bg();return{theme:e,token:t,hashId:i}}const ile={defaultConfig:S1,defaultSeed:S1.token,useToken:rle,defaultAlgorithm:PS,darkAlgorithm:nle,compactAlgorithm:Qce,getDesignToken:Yce},ole=e=>{const{componentCls:t,tooltipMaxWidth:i,tooltipColor:a,tooltipBg:c,tooltipBorderRadius:u,zIndexPopup:f,controlHeight:m,boxShadowSecondary:g,paddingSM:E,paddingXS:y,tooltipRadiusOuter:T}=e;return[{[t]:Object.assign(Object.assign(Object.assign(Object.assign({},Cp(e)),{position:"absolute",zIndex:f,display:"block",width:"max-content",maxWidth:i,visibility:"visible",transformOrigin:"var(--arrow-x, 50%) var(--arrow-y, 50%)","&-hidden":{display:"none"},"--antd-arrow-background-color":c,[`${t}-inner`]:{minWidth:m,minHeight:m,padding:`${E/2}px ${y}px`,color:a,textAlign:"start",textDecoration:"none",wordWrap:"break-word",backgroundColor:c,borderRadius:u,boxShadow:g,boxSizing:"border-box"},[["&-placement-left","&-placement-leftTop","&-placement-leftBottom","&-placement-right","&-placement-rightTop","&-placement-rightBottom"].join(",")]:{[`${t}-inner`]:{borderRadius:Math.min(u,cz)}},[`${t}-content`]:{position:"relative"}}),Ure(e,(R,P)=>{let{darkColor:O}=P;return{[`&${t}-${R}`]:{[`${t}-inner`]:{backgroundColor:O},[`${t}-arrow`]:{"--antd-arrow-background-color":O}}}})),{"&-rtl":{direction:"rtl"}})},Hce(na(e,{borderRadiusOuter:T}),{colorBg:"var(--antd-arrow-background-color)",contentRadius:u,limitVerticalRadius:!0}),{[`${t}-pure`]:{position:"relative",maxWidth:"none",margin:e.sizePopupArrow}}]},uz=(e,t)=>Al("Tooltip",a=>{if(t===!1)return[];const{borderRadius:c,colorTextLightSolid:u,colorBgDefault:f,borderRadiusOuter:m}=a,g=na(a,{tooltipMaxWidth:250,tooltipColor:u,tooltipBorderRadius:c,tooltipBg:f,tooltipRadiusOuter:m>4?4:m});return[ole(g),KG(a,"zoom-big-fast")]},a=>{let{zIndexPopupBase:c,colorBgSpotlight:u}=a;return{zIndexPopup:c+70,colorBgDefault:u}},{resetStyle:!1})(e),ale=_1.map(e=>`${e}-inverse`);function sle(e){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0)?[].concat(gt(ale),gt(_1)).includes(e):_1.includes(e)}function dz(e,t){const i=sle(t),a=nt({[`${e}-${t}`]:t&&i}),c={},u={};return t&&!i&&(c.background=t,u["--antd-arrow-background-color"]=t),{className:a,overlayStyle:c,arrowStyle:u}}function cle(e){const{prefixCls:t,className:i,placement:a="top",title:c,color:u,overlayInnerStyle:f}=e,{getPrefixCls:m}=C.useContext(wr),g=m("tooltip",t),[E,y]=uz(g,!0),T=dz(g,u),R=Object.assign(Object.assign({},f),T.overlayStyle),P=T.arrowStyle;return E(C.createElement("div",{className:nt(y,g,`${g}-pure`,`${g}-placement-${a}`,i,T.className),style:P},C.createElement("div",{className:`${g}-arrow`}),C.createElement(sz,Object.assign({},e,{className:y,prefixCls:g,overlayInnerStyle:R}),c)))}var lle=globalThis&&globalThis.__rest||function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(i[a[c]]=e[a[c]]);return i};const{useToken:ule}=ile,dle=(e,t)=>{const i={},a=Object.assign({},e);return t.forEach(c=>{e&&c in e&&(i[c]=e[c],delete a[c])}),{picked:i,omitted:a}};function hle(e,t){const i=e.type;if((i.__ANT_BUTTON===!0||e.type==="button")&&e.props.disabled||i.__ANT_SWITCH===!0&&(e.props.disabled||e.props.loading)||i.__ANT_RADIO===!0&&e.props.disabled){const{picked:a,omitted:c}=dle(e.props.style,["position","left","right","top","bottom","float","display","zIndex"]),u=Object.assign(Object.assign({display:"inline-block"},a),{cursor:"not-allowed",width:e.props.block?"100%":void 0}),f=Object.assign(Object.assign({},c),{pointerEvents:"none"}),m=Rl(e,{style:f,className:null});return C.createElement("span",{style:u,className:nt(e.props.className,`${t}-disabled-compatible-wrapper`)},m)}return e}const hz=C.forwardRef((e,t)=>{var i,a;const{prefixCls:c,openClassName:u,getTooltipContainer:f,overlayClassName:m,color:g,overlayInnerStyle:E,children:y,afterOpenChange:T,afterVisibleChange:R,destroyTooltipOnHide:P,arrow:O=!0,title:N,overlay:M,builtinPlacements:D,arrowPointAtCenter:x=!1,autoAdjustOverflow:k=!0}=e,V=!!O,{token:H}=ule(),{getPopupContainer:$,getPrefixCls:G,direction:K}=C.useContext(wr),Q=C.useRef(null),z=()=>{var ft;(ft=Q.current)===null||ft===void 0||ft.forceAlign()};C.useImperativeHandle(t,()=>({forceAlign:z,forcePopupAlign:()=>{z()}}));const[ie,J]=rd(!1,{value:(i=e.open)!==null&&i!==void 0?i:e.visible,defaultValue:(a=e.defaultOpen)!==null&&a!==void 0?a:e.defaultVisible}),Y=!N&&!M&&N!==0,oe=ft=>{var dt,at;J(Y?!1:ft),Y||((dt=e.onOpenChange)===null||dt===void 0||dt.call(e,ft),(at=e.onVisibleChange)===null||at===void 0||at.call(e,ft))},ue=C.useMemo(()=>{var ft,dt;let at=x;return typeof O=="object"&&(at=(dt=(ft=O.pointAtCenter)!==null&&ft!==void 0?ft:O.arrowPointAtCenter)!==null&&dt!==void 0?dt:x),D||Kce({arrowPointAtCenter:at,autoAdjustOverflow:k,arrowWidth:V?H.sizePopupArrow:0,borderRadius:H.borderRadius,offset:H.marginXXS,visibleFirst:!0})},[x,O,D,H]),he=C.useMemo(()=>N===0?N:M||N||"",[M,N]),Se=C.createElement(GL,null,typeof he=="function"?he():he),{getPopupContainer:ve,placement:Re="top",mouseEnterDelay:Ce=.1,mouseLeaveDelay:pe=.1,overlayStyle:fe,rootClassName:_e}=e,ge=lle(e,["getPopupContainer","placement","mouseEnterDelay","mouseLeaveDelay","overlayStyle","rootClassName"]),Ue=G("tooltip",c),Fe=G(),ot=e["data-popover-inject"];let qe=ie;!("open"in e)&&!("visible"in e)&&Y&&(qe=!1);const wt=hle(Fh(y)&&!TG(y)?y:C.createElement("span",null,y),Ue),kt=wt.props,_t=!kt.className||typeof kt.className=="string"?nt(kt.className,{[u||`${Ue}-open`]:!0}):kt.className,[vt,At]=uz(Ue,!ot),it=dz(Ue,g),Mt=Object.assign(Object.assign({},E),it.overlayStyle),rn=it.arrowStyle,Ft=nt(m,{[`${Ue}-rtl`]:K==="rtl"},it.className,_e,At);return vt(C.createElement($ce,Object.assign({},ge,{showArrow:V,placement:Re,mouseEnterDelay:Ce,mouseLeaveDelay:pe,prefixCls:Ue,overlayClassName:Ft,overlayStyle:Object.assign(Object.assign({},rn),fe),getTooltipContainer:ve||f||$,ref:Q,builtinPlacements:ue,overlay:Se,visible:qe,onVisibleChange:oe,afterVisibleChange:T??R,overlayInnerStyle:Mt,arrowContent:C.createElement("span",{className:`${Ue}-arrow-content`}),motion:{motionName:Eae(Fe,"zoom-big-fast",e.transitionName),motionDeadline:1e3},destroyTooltipOnHide:!!P}),qe?Rl(wt,{className:_t}):wt))});hz._InternalPanelDoNotUseOrYouWillBeFired=cle;const yS=hz;var fz={};Object.defineProperty(fz,"__esModule",{value:!0});var fle={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M765.7 486.8L314.9 134.7A7.97 7.97 0 00302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 000-50.4z"}}]},name:"right",theme:"outlined"},ple=fz.default=fle;const mle=(e,t)=>C.createElement(Mo,{...e,ref:t,icon:ple}),x6=C.forwardRef(mle);var pz=C.createContext(null);function Z2(e,t){return e===void 0?null:"".concat(e,"-").concat(t)}function mz(e){var t=C.useContext(pz);return Z2(t,e)}var gle=["children","locked"],Il=C.createContext(null);function vle(e,t){var i=Ae({},e);return Object.keys(t).forEach(function(a){var c=t[a];c!==void 0&&(i[a]=c)}),i}function CS(e){var t=e.children,i=e.locked,a=Xn(e,gle),c=C.useContext(Il),u=mI(function(){return vle(c,a)},[c,a],function(f,m){return!i&&(f[0]!==m[0]||!O2(f[1],m[1],!0))});return C.createElement(Il.Provider,{value:u},t)}var Ele=[],gz=C.createContext(null);function wI(){return C.useContext(gz)}var vz=C.createContext(Ele);function Ag(e){var t=C.useContext(vz);return C.useMemo(function(){return e!==void 0?[].concat(gt(t),[e]):t},[t,e])}var Ez=C.createContext(null),eM=C.createContext({});function P6(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(II(e)){var i=e.nodeName.toLowerCase(),a=["input","select","textarea","button"].includes(i)||e.isContentEditable||i==="a"&&!!e.getAttribute("href"),c=e.getAttribute("tabindex"),u=Number(c),f=null;return c&&!Number.isNaN(u)?f=u:a&&f===null&&(f=0),a&&e.disabled&&(f=null),f!==null&&(f>=0||t&&f<0)}return!1}function _le(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=gt(e.querySelectorAll("*")).filter(function(a){return P6(a,t)});return P6(e,t)&&i.unshift(e),i}var sk=Lt.LEFT,ck=Lt.RIGHT,lk=Lt.UP,LR=Lt.DOWN,kR=Lt.ENTER,_z=Lt.ESC,v_=Lt.HOME,E_=Lt.END,D6=[lk,LR,sk,ck];function Sle(e,t,i,a){var c,u,f,m,g="prev",E="next",y="children",T="parent";if(e==="inline"&&a===kR)return{inlineTrigger:!0};var R=(c={},Ct(c,lk,g),Ct(c,LR,E),c),P=(u={},Ct(u,sk,i?E:g),Ct(u,ck,i?g:E),Ct(u,LR,y),Ct(u,kR,y),u),O=(f={},Ct(f,lk,g),Ct(f,LR,E),Ct(f,kR,y),Ct(f,_z,T),Ct(f,sk,i?y:T),Ct(f,ck,i?T:y),f),N={inline:R,horizontal:P,vertical:O,inlineSub:R,horizontalSub:O,verticalSub:O},M=(m=N["".concat(e).concat(t?"":"Sub")])===null||m===void 0?void 0:m[a];switch(M){case g:return{offset:-1,sibling:!0};case E:return{offset:1,sibling:!0};case T:return{offset:-1,sibling:!1};case y:return{offset:1,sibling:!1};default:return null}}function yle(e){for(var t=e;t;){if(t.getAttribute("data-menu-list"))return t;t=t.parentElement}return null}function Cle(e,t){for(var i=e||document.activeElement;i;){if(t.has(i))return i;i=i.parentElement}return null}function Sz(e,t){var i=_le(e,!0);return i.filter(function(a){return t.has(a)})}function L6(e,t,i){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;if(!e)return null;var c=Sz(e,t),u=c.length,f=c.findIndex(function(m){return i===m});return a<0?f===-1?f=u-1:f-=1:a>0&&(f+=1),f=(f+u)%u,c[f]}function Tle(e,t,i,a,c,u,f,m,g,E){var y=C.useRef(),T=C.useRef();T.current=t;var R=function(){Zo.cancel(y.current)};return C.useEffect(function(){return function(){R()}},[]),function(P){var O=P.which;if([].concat(D6,[kR,_z,v_,E_]).includes(O)){var N,M,D,x=function(){N=new Set,M=new Map,D=new Map;var ue=u();return ue.forEach(function(he){var Se=document.querySelector("[data-menu-id='".concat(Z2(a,he),"']"));Se&&(N.add(Se),D.set(Se,he),M.set(he,Se))}),N};x();var k=M.get(t),V=Cle(k,N),H=D.get(V),$=Sle(e,f(H,!0).length===1,i,O);if(!$&&O!==v_&&O!==E_)return;(D6.includes(O)||[v_,E_].includes(O))&&P.preventDefault();var G=function(ue){if(ue){var he=ue,Se=ue.querySelector("a");Se!=null&&Se.getAttribute("href")&&(he=Se);var ve=D.get(ue);m(ve),R(),y.current=Zo(function(){T.current===ve&&he.focus()})}};if([v_,E_].includes(O)||$.sibling||!V){var K;!V||e==="inline"?K=c.current:K=yle(V);var Q,z=Sz(K,N);O===v_?Q=z[0]:O===E_?Q=z[z.length-1]:Q=L6(K,N,V,$.offset),G(Q)}else if($.inlineTrigger)g(H);else if($.offset>0)g(H,!0),R(),y.current=Zo(function(){x();var oe=V.getAttribute("aria-controls"),ue=document.getElementById(oe),he=L6(ue,N);G(he)},5);else if($.offset<0){var ie=f(H,!0),J=ie[ie.length-2],Y=M.get(J);g(J,!1),G(Y)}}E==null||E(P)}}function ble(e){Promise.resolve().then(e)}var tM="__RC_UTIL_PATH_SPLIT__",k6=function(t){return t.join(tM)},Rle=function(t){return t.split(tM)},uk="rc-menu-more";function Ile(){var e=C.useState({}),t=Ye(e,2),i=t[1],a=C.useRef(new Map),c=C.useRef(new Map),u=C.useState([]),f=Ye(u,2),m=f[0],g=f[1],E=C.useRef(0),y=C.useRef(!1),T=function(){y.current||i({})},R=C.useCallback(function(k,V){var H=k6(V);c.current.set(H,k),a.current.set(k,H),E.current+=1;var $=E.current;ble(function(){$===E.current&&T()})},[]),P=C.useCallback(function(k,V){var H=k6(V);c.current.delete(H),a.current.delete(k)},[]),O=C.useCallback(function(k){g(k)},[]),N=C.useCallback(function(k,V){var H=a.current.get(k)||"",$=Rle(H);return V&&m.includes($[0])&&$.unshift(uk),$},[m]),M=C.useCallback(function(k,V){return k.some(function(H){var $=N(H,!0);return $.includes(V)})},[N]),D=function(){var V=gt(a.current.keys());return m.length&&V.push(uk),V},x=C.useCallback(function(k){var V="".concat(a.current.get(k)).concat(tM),H=new Set;return gt(c.current.keys()).forEach(function($){$.startsWith(V)&&H.add(c.current.get($))}),H},[]);return C.useEffect(function(){return function(){y.current=!0}},[]),{registerPath:R,unregisterPath:P,refreshOverflowKeys:O,isSubPathKey:M,getKeyPath:N,getKeys:D,getSubPathKeys:x}}function A_(e){var t=C.useRef(e);t.current=e;var i=C.useCallback(function(){for(var a,c=arguments.length,u=new Array(c),f=0;f<c;f++)u[f]=arguments[f];return(a=t.current)===null||a===void 0?void 0:a.call.apply(a,[t].concat(u))},[]);return e?i:void 0}var wle=Math.random().toFixed(5).toString().slice(2),M6=0;function Ole(e){var t=rd(e,{value:e}),i=Ye(t,2),a=i[0],c=i[1];return C.useEffect(function(){M6+=1;var u="".concat(wle,"-").concat(M6);c("rc-menu-uuid-".concat(u))},[]),a}function yz(e,t,i,a){var c=C.useContext(Il),u=c.activeKey,f=c.onActive,m=c.onInactive,g={active:u===e};return t||(g.onMouseEnter=function(E){i==null||i({key:e,domEvent:E}),f(e)},g.onMouseLeave=function(E){a==null||a({key:e,domEvent:E}),m(e)}),g}function Cz(e){var t=C.useContext(Il),i=t.mode,a=t.rtl,c=t.inlineIndent;if(i!=="inline")return null;var u=e;return a?{paddingRight:u*c}:{paddingLeft:u*c}}function Tz(e){var t=e.icon,i=e.props,a=e.children,c;return typeof t=="function"?c=C.createElement(t,Ae({},i)):c=t,c||a||null}var Ale=["item"];function O1(e){var t=e.item,i=Xn(e,Ale);return Object.defineProperty(i,"item",{get:function(){return Es(!1,"`info.item` is deprecated since we will move to function component that not provides React Node instance in future."),t}}),i}var Nle=["title","attribute","elementRef"],xle=["style","className","eventKey","warnKey","disabled","itemIcon","children","role","onMouseEnter","onMouseLeave","onClick","onKeyDown","onFocus"],Ple=["active"],Dle=function(e){Sg(i,e);var t=yg(i);function i(){return kc(this,i),t.apply(this,arguments)}return Mc(i,[{key:"render",value:function(){var c=this.props,u=c.title,f=c.attribute,m=c.elementRef,g=Xn(c,Nle),E=ys(g,["eventKey","popupClassName","popupOffset","onTitleClick"]);return Es(!f,"`attribute` of Menu.Item is deprecated. Please pass attribute directly."),C.createElement(id.Item,st({},f,{title:typeof u=="string"?u:void 0},E,{ref:m}))}}]),i}(C.Component),Lle=C.forwardRef(function(e,t){var i,a=e.style,c=e.className,u=e.eventKey;e.warnKey;var f=e.disabled,m=e.itemIcon,g=e.children,E=e.role,y=e.onMouseEnter,T=e.onMouseLeave,R=e.onClick,P=e.onKeyDown,O=e.onFocus,N=Xn(e,xle),M=mz(u),D=C.useContext(Il),x=D.prefixCls,k=D.onItemClick,V=D.disabled,H=D.overflowDisabled,$=D.itemIcon,G=D.selectedKeys,K=D.onActive,Q=C.useContext(eM),z=Q._internalRenderMenuItem,ie="".concat(x,"-item"),J=C.useRef(),Y=C.useRef(),oe=V||f,ue=b2(t,Y),he=Ag(u),Se=function(kt){return{key:u,keyPath:gt(he).reverse(),item:J.current,domEvent:kt}},ve=m||$,Re=yz(u,oe,y,T),Ce=Re.active,pe=Xn(Re,Ple),fe=G.includes(u),_e=Cz(he.length),ge=function(kt){if(!oe){var _t=Se(kt);R==null||R(O1(_t)),k(_t)}},Ue=function(kt){if(P==null||P(kt),kt.which===Lt.ENTER){var _t=Se(kt);R==null||R(O1(_t)),k(_t)}},Fe=function(kt){K(u),O==null||O(kt)},ot={};e.role==="option"&&(ot["aria-selected"]=fe);var qe=C.createElement(Dle,st({ref:J,elementRef:ue,role:E===null?"none":E||"menuitem",tabIndex:f?null:-1,"data-menu-id":H&&M?null:M},N,pe,ot,{component:"li","aria-disabled":f,style:Ae(Ae({},_e),a),className:nt(ie,(i={},Ct(i,"".concat(ie,"-active"),Ce),Ct(i,"".concat(ie,"-selected"),fe),Ct(i,"".concat(ie,"-disabled"),oe),i),c),onClick:ge,onKeyDown:Ue,onFocus:Fe}),g,C.createElement(Tz,{props:Ae(Ae({},e),{},{isSelected:fe}),icon:ve}));return z&&(qe=z(qe,e,{selected:fe})),qe});function kle(e,t){var i=e.eventKey,a=wI(),c=Ag(i);return C.useEffect(function(){if(a)return a.registerPath(i,c),function(){a.unregisterPath(i,c)}},[c]),a?null:C.createElement(Lle,st({},e,{ref:t}))}const OI=C.forwardRef(kle);var Mle=["className","children"],Ule=function(t,i){var a=t.className,c=t.children,u=Xn(t,Mle),f=C.useContext(Il),m=f.prefixCls,g=f.mode,E=f.rtl;return C.createElement("ul",st({className:nt(m,E&&"".concat(m,"-rtl"),"".concat(m,"-sub"),"".concat(m,"-").concat(g==="inline"?"inline":"vertical"),a),role:"menu"},u,{"data-menu-list":!0,ref:i}),c)},nM=C.forwardRef(Ule);nM.displayName="SubMenuList";var Fle=["label","children","key","type"];function rM(e,t){return ld(e).map(function(i,a){if(C.isValidElement(i)){var c,u,f=i.key,m=(c=(u=i.props)===null||u===void 0?void 0:u.eventKey)!==null&&c!==void 0?c:f,g=m==null;g&&(m="tmp_key-".concat([].concat(gt(t),[a]).join("-")));var E={key:m,eventKey:m};return C.cloneElement(i,E)}return i})}function dk(e){return(e||[]).map(function(t,i){if(t&&Sr(t)==="object"){var a=t,c=a.label,u=a.children,f=a.key,m=a.type,g=Xn(a,Fle),E=f??"tmp-".concat(i);return u||m==="group"?m==="group"?C.createElement(NI,st({key:E},g,{title:c}),dk(u)):C.createElement(AI,st({key:E},g,{title:c}),dk(u)):m==="divider"?C.createElement(iM,st({key:E},g)):C.createElement(OI,st({key:E},g),c)}return null}).filter(function(t){return t})}function Vle(e,t,i){var a=e;return t&&(a=dk(t)),rM(a,i)}var ba={adjustX:1,adjustY:1},jle={topLeft:{points:["bl","tl"],overflow:ba},topRight:{points:["br","tr"],overflow:ba},bottomLeft:{points:["tl","bl"],overflow:ba},bottomRight:{points:["tr","br"],overflow:ba},leftTop:{points:["tr","tl"],overflow:ba},leftBottom:{points:["br","bl"],overflow:ba},rightTop:{points:["tl","tr"],overflow:ba},rightBottom:{points:["bl","br"],overflow:ba}},Ble={topLeft:{points:["bl","tl"],overflow:ba},topRight:{points:["br","tr"],overflow:ba},bottomLeft:{points:["tl","bl"],overflow:ba},bottomRight:{points:["tr","br"],overflow:ba},rightTop:{points:["tr","tl"],overflow:ba},rightBottom:{points:["br","bl"],overflow:ba},leftTop:{points:["tl","tr"],overflow:ba},leftBottom:{points:["bl","br"],overflow:ba}};function bz(e,t,i){if(t)return t;if(i)return i[e]||i.other}var $le={horizontal:"bottomLeft",vertical:"rightTop","vertical-left":"rightTop","vertical-right":"leftTop"};function Hle(e){var t=e.prefixCls,i=e.visible,a=e.children,c=e.popup,u=e.popupClassName,f=e.popupOffset,m=e.disabled,g=e.mode,E=e.onVisibleChange,y=C.useContext(Il),T=y.getPopupContainer,R=y.rtl,P=y.subMenuOpenDelay,O=y.subMenuCloseDelay,N=y.builtinPlacements,M=y.triggerSubMenuAction,D=y.forceSubMenuRender,x=y.rootClassName,k=y.motion,V=y.defaultMotions,H=C.useState(!1),$=Ye(H,2),G=$[0],K=$[1],Q=Ae(R?Ae({},Ble):Ae({},jle),N),z=$le[g],ie=bz(g,k,V),J=C.useRef(ie);g!=="inline"&&(J.current=ie);var Y=Ae(Ae({},J.current),{},{leavedClassName:"".concat(t,"-hidden"),removeOnLeave:!1,motionAppear:!0}),oe=C.useRef();return C.useEffect(function(){return oe.current=Zo(function(){K(i)}),function(){Zo.cancel(oe.current)}},[i]),C.createElement(rz,{prefixCls:t,popupClassName:nt("".concat(t,"-popup"),Ct({},"".concat(t,"-rtl"),R),u,x),stretch:g==="horizontal"?"minWidth":null,getPopupContainer:T,builtinPlacements:Q,popupPlacement:z,popupVisible:G,popup:c,popupAlign:f&&{offset:f},action:m?[]:[M],mouseEnterDelay:P,mouseLeaveDelay:O,onPopupVisibleChange:E,forceRender:D,popupMotion:Y},a)}function Wle(e){var t=e.id,i=e.open,a=e.keyPath,c=e.children,u="inline",f=C.useContext(Il),m=f.prefixCls,g=f.forceSubMenuRender,E=f.motion,y=f.defaultMotions,T=f.mode,R=C.useRef(!1);R.current=T===u;var P=C.useState(!R.current),O=Ye(P,2),N=O[0],M=O[1],D=R.current?i:!1;C.useEffect(function(){R.current&&M(!1)},[T]);var x=Ae({},bz(u,E,y));a.length>1&&(x.motionAppear=!1);var k=x.onVisibleChanged;return x.onVisibleChanged=function(V){return!R.current&&!V&&M(!0),k==null?void 0:k(V)},N?null:C.createElement(CS,{mode:u,locked:!R.current},C.createElement(Tp,st({visible:D},x,{forceRender:g,removeOnLeave:!1,leavedClassName:"".concat(m,"-hidden")}),function(V){var H=V.className,$=V.style;return C.createElement(nM,{id:t,className:H,style:$},c)}))}var Gle=["style","className","title","eventKey","warnKey","disabled","internalPopupClose","children","itemIcon","expandIcon","popupClassName","popupOffset","onClick","onMouseEnter","onMouseLeave","onTitleClick","onTitleMouseEnter","onTitleMouseLeave"],zle=["active"],Kle=function(t){var i,a=t.style,c=t.className,u=t.title,f=t.eventKey;t.warnKey;var m=t.disabled,g=t.internalPopupClose,E=t.children,y=t.itemIcon,T=t.expandIcon,R=t.popupClassName,P=t.popupOffset,O=t.onClick,N=t.onMouseEnter,M=t.onMouseLeave,D=t.onTitleClick,x=t.onTitleMouseEnter,k=t.onTitleMouseLeave,V=Xn(t,Gle),H=mz(f),$=C.useContext(Il),G=$.prefixCls,K=$.mode,Q=$.openKeys,z=$.disabled,ie=$.overflowDisabled,J=$.activeKey,Y=$.selectedKeys,oe=$.itemIcon,ue=$.expandIcon,he=$.onItemClick,Se=$.onOpenChange,ve=$.onActive,Re=C.useContext(eM),Ce=Re._internalRenderSubMenuItem,pe=C.useContext(Ez),fe=pe.isSubPathKey,_e=Ag(),ge="".concat(G,"-submenu"),Ue=z||m,Fe=C.useRef(),ot=C.useRef(),qe=y||oe,wt=T||ue,kt=Q.includes(f),_t=!ie&&kt,vt=fe(Y,f),At=yz(f,Ue,x,k),it=At.active,Mt=Xn(At,zle),rn=C.useState(!1),Ft=Ye(rn,2),ft=Ft[0],dt=Ft[1],at=function(fn){Ue||dt(fn)},ht=function(fn){at(!0),N==null||N({key:f,domEvent:fn})},Ot=function(fn){at(!1),M==null||M({key:f,domEvent:fn})},Vt=C.useMemo(function(){return it||(K!=="inline"?ft||fe([J],f):!1)},[K,it,J,ft,f,fe]),zt=Cz(_e.length),Kt=function(fn){Ue||(D==null||D({key:f,domEvent:fn}),K==="inline"&&Se(f,!kt))},mn=A_(function(hn){O==null||O(O1(hn)),he(hn)}),Hn=function(fn){K!=="inline"&&Se(f,fn)},Zr=function(){ve(f)},yr=H&&"".concat(H,"-popup"),or=C.createElement("div",st({role:"menuitem",style:zt,className:"".concat(ge,"-title"),tabIndex:Ue?null:-1,ref:Fe,title:typeof u=="string"?u:null,"data-menu-id":ie&&H?null:H,"aria-expanded":_t,"aria-haspopup":!0,"aria-controls":yr,"aria-disabled":Ue,onClick:Kt,onFocus:Zr},Mt),u,C.createElement(Tz,{icon:K!=="horizontal"?wt:null,props:Ae(Ae({},t),{},{isOpen:_t,isSubMenu:!0})},C.createElement("i",{className:"".concat(ge,"-arrow")}))),Ln=C.useRef(K);if(K!=="inline"&&_e.length>1?Ln.current="vertical":Ln.current=K,!ie){var Gr=Ln.current;or=C.createElement(Hle,{mode:Gr,prefixCls:ge,visible:!g&&_t&&K!=="inline",popupClassName:R,popupOffset:P,popup:C.createElement(CS,{mode:Gr==="horizontal"?"vertical":Gr},C.createElement(nM,{id:yr,ref:ot},E)),disabled:Ue,onVisibleChange:Hn},or)}var Wn=C.createElement(id.Item,st({role:"none"},V,{component:"li",style:a,className:nt(ge,"".concat(ge,"-").concat(K),c,(i={},Ct(i,"".concat(ge,"-open"),_t),Ct(i,"".concat(ge,"-active"),Vt),Ct(i,"".concat(ge,"-selected"),vt),Ct(i,"".concat(ge,"-disabled"),Ue),i)),onMouseEnter:ht,onMouseLeave:Ot}),or,!ie&&C.createElement(Wle,{id:yr,open:_t,keyPath:_e},E));return Ce&&(Wn=Ce(Wn,t,{selected:vt,active:Vt,open:_t,disabled:Ue})),C.createElement(CS,{onItemClick:mn,mode:K==="horizontal"?"vertical":K,itemIcon:qe,expandIcon:wt},Wn)};function AI(e){var t=e.eventKey,i=e.children,a=Ag(t),c=rM(i,a),u=wI();C.useEffect(function(){if(u)return u.registerPath(t,a),function(){u.unregisterPath(t,a)}},[a]);var f;return u?f=c:f=C.createElement(Kle,e,c),C.createElement(vz.Provider,{value:a},f)}var qle=["prefixCls","rootClassName","style","className","tabIndex","items","children","direction","id","mode","inlineCollapsed","disabled","disabledOverflow","subMenuOpenDelay","subMenuCloseDelay","forceSubMenuRender","defaultOpenKeys","openKeys","activeKey","defaultActiveFirst","selectable","multiple","defaultSelectedKeys","selectedKeys","onSelect","onDeselect","inlineIndent","motion","defaultMotions","triggerSubMenuAction","builtinPlacements","itemIcon","expandIcon","overflowedIndicator","overflowedIndicatorPopupClassName","getPopupContainer","onClick","onOpenChange","onKeyDown","openAnimation","openTransitionName","_internalRenderMenuItem","_internalRenderSubMenuItem"],O0=[],Yle=C.forwardRef(function(e,t){var i,a,c=e,u=c.prefixCls,f=u===void 0?"rc-menu":u,m=c.rootClassName,g=c.style,E=c.className,y=c.tabIndex,T=y===void 0?0:y,R=c.items,P=c.children,O=c.direction,N=c.id,M=c.mode,D=M===void 0?"vertical":M,x=c.inlineCollapsed,k=c.disabled,V=c.disabledOverflow,H=c.subMenuOpenDelay,$=H===void 0?.1:H,G=c.subMenuCloseDelay,K=G===void 0?.1:G,Q=c.forceSubMenuRender,z=c.defaultOpenKeys,ie=c.openKeys,J=c.activeKey,Y=c.defaultActiveFirst,oe=c.selectable,ue=oe===void 0?!0:oe,he=c.multiple,Se=he===void 0?!1:he,ve=c.defaultSelectedKeys,Re=c.selectedKeys,Ce=c.onSelect,pe=c.onDeselect,fe=c.inlineIndent,_e=fe===void 0?24:fe,ge=c.motion,Ue=c.defaultMotions,Fe=c.triggerSubMenuAction,ot=Fe===void 0?"hover":Fe,qe=c.builtinPlacements,wt=c.itemIcon,kt=c.expandIcon,_t=c.overflowedIndicator,vt=_t===void 0?"...":_t,At=c.overflowedIndicatorPopupClassName,it=c.getPopupContainer,Mt=c.onClick,rn=c.onOpenChange,Ft=c.onKeyDown;c.openAnimation,c.openTransitionName;var ft=c._internalRenderMenuItem,dt=c._internalRenderSubMenuItem,at=Xn(c,qle),ht=C.useMemo(function(){return Vle(P,R,O0)},[P,R]),Ot=C.useState(!1),Vt=Ye(Ot,2),zt=Vt[0],Kt=Vt[1],mn=C.useRef(),Hn=Ole(N),Zr=O==="rtl",yr=rd(z,{value:ie,postState:function(zn){return zn||O0}}),or=Ye(yr,2),Ln=or[0],Gr=or[1],Wn=function(zn){var Zn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;function ni(){Gr(zn),rn==null||rn(zn)}Zn?Wh.flushSync(ni):ni()},hn=C.useState(Ln),fn=Ye(hn,2),Ro=fn[0],zi=fn[1],ei=C.useRef(!1),Gn=C.useMemo(function(){return(D==="inline"||D==="vertical")&&x?["vertical",x]:[D,!1]},[D,x]),Qe=Ye(Gn,2),Tt=Qe[0],Un=Qe[1],an=Tt==="inline",Ki=C.useState(Tt),hi=Ye(Ki,2),Cr=hi[0],jt=hi[1],_n=C.useState(Un),Pn=Ye(_n,2),zr=Pn[0],Ei=Pn[1];C.useEffect(function(){jt(Tt),Ei(Un),ei.current&&(an?Gr(Ro):Wn(O0))},[Tt,Un]);var ti=C.useState(0),Kr=Ye(ti,2),uo=Kr[0],Io=Kr[1],Uo=uo>=ht.length-1||Cr!=="horizontal"||V;C.useEffect(function(){an&&zi(Ln)},[Ln]),C.useEffect(function(){return ei.current=!0,function(){ei.current=!1}},[]);var Fo=Ile(),Fc=Fo.registerPath,Ii=Fo.unregisterPath,Vc=Fo.refreshOverflowKeys,Pl=Fo.isSubPathKey,pr=Fo.getKeyPath,Dl=Fo.getKeys,ho=Fo.getSubPathKeys,Ll=C.useMemo(function(){return{registerPath:Fc,unregisterPath:Ii}},[Fc,Ii]),kl=C.useMemo(function(){return{isSubPathKey:Pl}},[Pl]);C.useEffect(function(){Vc(Uo?O0:ht.slice(uo+1).map(function(Qn){return Qn.key}))},[uo,Uo]);var wa=rd(J||Y&&((i=ht[0])===null||i===void 0?void 0:i.key),{value:J}),jc=Ye(wa,2),oa=jc[0],aa=jc[1],Cs=A_(function(Qn){aa(Qn)}),Ml=A_(function(){aa(void 0)});C.useImperativeHandle(t,function(){return{list:mn.current,focus:function(zn){var Zn,ni=oa??((Zn=ht.find(function($a){return!$a.props.disabled}))===null||Zn===void 0?void 0:Zn.key);if(ni){var ri,Vo,fo;(ri=mn.current)===null||ri===void 0||(Vo=ri.querySelector("li[data-menu-id='".concat(Z2(Hn,ni),"']")))===null||Vo===void 0||(fo=Vo.focus)===null||fo===void 0||fo.call(Vo,zn)}}}});var Ba=rd(ve||[],{value:Re,postState:function(zn){return Array.isArray(zn)?zn:zn==null?O0:[zn]}}),Di=Ye(Ba,2),_i=Di[0],sa=Di[1],nc=function(zn){if(ue){var Zn=zn.key,ni=_i.includes(Zn),ri;Se?ni?ri=_i.filter(function(fo){return fo!==Zn}):ri=[].concat(gt(_i),[Zn]):ri=[Zn],sa(ri);var Vo=Ae(Ae({},zn),{},{selectedKeys:ri});ni?pe==null||pe(Vo):Ce==null||Ce(Vo)}!Se&&Ln.length&&Cr!=="inline"&&Wn(O0)},Ar=A_(function(Qn){Mt==null||Mt(O1(Qn)),nc(Qn)}),Bc=A_(function(Qn,zn){var Zn=Ln.filter(function(ri){return ri!==Qn});if(zn)Zn.push(Qn);else if(Cr!=="inline"){var ni=ho(Qn);Zn=Zn.filter(function(ri){return!ni.has(ri)})}O2(Ln,Zn,!0)||Wn(Zn,!0)}),Ul=function(zn,Zn){var ni=Zn??!Ln.includes(zn);Bc(zn,ni)},rc=Tle(Cr,oa,Zr,Hn,mn,Dl,pr,aa,Ul,Ft);C.useEffect(function(){Kt(!0)},[]);var Fl=C.useMemo(function(){return{_internalRenderMenuItem:ft,_internalRenderSubMenuItem:dt}},[ft,dt]),Vl=Cr!=="horizontal"||V?ht:ht.map(function(Qn,zn){return C.createElement(CS,{key:Qn.key,overflowDisabled:zn>uo},Qn)}),jl=C.createElement(id,st({id:N,ref:mn,prefixCls:"".concat(f,"-overflow"),component:"ul",itemComponent:OI,className:nt(f,"".concat(f,"-root"),"".concat(f,"-").concat(Cr),E,(a={},Ct(a,"".concat(f,"-inline-collapsed"),zr),Ct(a,"".concat(f,"-rtl"),Zr),a),m),dir:O,style:g,role:"menu",tabIndex:T,data:Vl,renderRawItem:function(zn){return zn},renderRawRest:function(zn){var Zn=zn.length,ni=Zn?ht.slice(-Zn):null;return C.createElement(AI,{eventKey:uk,title:vt,disabled:Uo,internalPopupClose:Zn===0,popupClassName:At},ni)},maxCount:Cr!=="horizontal"||V?id.INVALIDATE:id.RESPONSIVE,ssr:"full","data-menu-list":!0,onVisibleChange:function(zn){Io(zn)},onKeyDown:rc},at));return C.createElement(eM.Provider,{value:Fl},C.createElement(pz.Provider,{value:Hn},C.createElement(CS,{prefixCls:f,rootClassName:m,mode:Cr,openKeys:Ln,rtl:Zr,disabled:k,motion:zt?ge:null,defaultMotions:zt?Ue:null,activeKey:oa,onActive:Cs,onInactive:Ml,selectedKeys:_i,inlineIndent:_e,subMenuOpenDelay:$,subMenuCloseDelay:K,forceSubMenuRender:Q,builtinPlacements:qe,triggerSubMenuAction:ot,getPopupContainer:it,itemIcon:wt,expandIcon:kt,onItemClick:Ar,onOpenChange:Bc},C.createElement(Ez.Provider,{value:kl},jl),C.createElement("div",{style:{display:"none"},"aria-hidden":!0},C.createElement(gz.Provider,{value:Ll},ht)))))}),Xle=["className","title","eventKey","children"],Jle=["children"],Qle=function(t){var i=t.className,a=t.title;t.eventKey;var c=t.children,u=Xn(t,Xle),f=C.useContext(Il),m=f.prefixCls,g="".concat(m,"-item-group");return C.createElement("li",st({role:"presentation"},u,{onClick:function(y){return y.stopPropagation()},className:nt(g,i)}),C.createElement("div",{role:"presentation",className:"".concat(g,"-title"),title:typeof a=="string"?a:void 0},a),C.createElement("ul",{role:"group",className:"".concat(g,"-list")},c))};function NI(e){var t=e.children,i=Xn(e,Jle),a=Ag(i.eventKey),c=rM(t,a),u=wI();return u?c:C.createElement(Qle,ys(i,["warnKey"]),c)}function iM(e){var t=e.className,i=e.style,a=C.useContext(Il),c=a.prefixCls,u=wI();return u?null:C.createElement("li",{className:nt("".concat(c,"-item-divider"),t),style:i})}var VS=Yle;VS.Item=OI;VS.SubMenu=AI;VS.ItemGroup=NI;VS.Divider=iM;var Rz={};Object.defineProperty(Rz,"__esModule",{value:!0});var Zle={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M176 511a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"ellipsis",theme:"outlined"},eue=Rz.default=Zle;const tue=(e,t)=>C.createElement(Mo,{...e,ref:t,icon:eue}),nue=C.forwardRef(tue),rue=C.createContext({prefixCls:"",firstLevel:!0,inlineCollapsed:!1}),A1=rue;globalThis&&globalThis.__rest;const iue=C.createContext(null),U6=iue;var oue=globalThis&&globalThis.__rest||function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(i[a[c]]=e[a[c]]);return i};const aue=e=>{const{prefixCls:t,className:i,dashed:a}=e,c=oue(e,["prefixCls","className","dashed"]),{getPrefixCls:u}=C.useContext(wr),f=u("menu",t),m=nt({[`${f}-item-divider-dashed`]:!!a},i);return C.createElement(iM,Object.assign({className:m},c))},Iz=aue;var wz={};Object.defineProperty(wz,"__esModule",{value:!0});var sue={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM104 228a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"bars",theme:"outlined"},cue=wz.default=sue;const lue=(e,t)=>C.createElement(Mo,{...e,ref:t,icon:cue}),uue=C.forwardRef(lue);var Oz={};Object.defineProperty(Oz,"__esModule",{value:!0});var due={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 000 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"}}]},name:"left",theme:"outlined"},hue=Oz.default=due;const fue=(e,t)=>C.createElement(Mo,{...e,ref:t,icon:hue}),F6=C.forwardRef(fue),pue=e=>!isNaN(parseFloat(e))&&isFinite(e),mue=pue,gue=e=>{const{componentCls:t,colorBgContainer:i,colorBgBody:a,colorText:c}=e;return{[`${t}-sider-light`]:{background:i,[`${t}-sider-trigger`]:{color:c,background:i},[`${t}-sider-zero-width-trigger`]:{color:c,background:i,border:`1px solid ${a}`,borderInlineStart:0}}}},vue=gue,Eue=e=>{const{antCls:t,componentCls:i,colorText:a,colorTextLightSolid:c,colorBgHeader:u,colorBgBody:f,colorBgTrigger:m,layoutHeaderHeight:g,layoutHeaderPaddingInline:E,layoutHeaderColor:y,layoutFooterPadding:T,layoutTriggerHeight:R,layoutZeroTriggerSize:P,motionDurationMid:O,motionDurationSlow:N,fontSize:M,borderRadius:D}=e;return{[i]:Object.assign(Object.assign({display:"flex",flex:"auto",flexDirection:"column",minHeight:0,background:f,"&, *":{boxSizing:"border-box"},[`&${i}-has-sider`]:{flexDirection:"row",[`> ${i}, > ${i}-content`]:{width:0}},[`${i}-header, &${i}-footer`]:{flex:"0 0 auto"},[`${i}-sider`]:{position:"relative",minWidth:0,background:u,transition:`all ${O}, background 0s`,"&-children":{height:"100%",marginTop:-.1,paddingTop:.1,[`${t}-menu${t}-menu-inline-collapsed`]:{width:"auto"}},"&-has-trigger":{paddingBottom:R},"&-right":{order:1},"&-trigger":{position:"fixed",bottom:0,zIndex:1,height:R,color:c,lineHeight:`${R}px`,textAlign:"center",background:m,cursor:"pointer",transition:`all ${O}`},"&-zero-width":{"> *":{overflow:"hidden"},"&-trigger":{position:"absolute",top:g,insetInlineEnd:-P,zIndex:1,width:P,height:P,color:c,fontSize:e.fontSizeXL,display:"flex",alignItems:"center",justifyContent:"center",background:u,borderStartStartRadius:0,borderStartEndRadius:D,borderEndEndRadius:D,borderEndStartRadius:0,cursor:"pointer",transition:`background ${N} ease`,"&::after":{position:"absolute",inset:0,background:"transparent",transition:`all ${N}`,content:'""'},"&:hover::after":{background:"rgba(255, 255, 255, 0.2)"},"&-right":{insetInlineStart:-P,borderStartStartRadius:D,borderStartEndRadius:0,borderEndEndRadius:0,borderEndStartRadius:D}}}}},vue(e)),{"&-rtl":{direction:"rtl"}}),[`${i}-header`]:{height:g,paddingInline:E,color:y,lineHeight:`${g}px`,background:u,[`${t}-menu`]:{lineHeight:"inherit"}},[`${i}-footer`]:{padding:T,color:a,fontSize:M,background:f},[`${i}-content`]:{flex:"auto",minHeight:0}}},Az=Al("Layout",e=>{const{colorText:t,controlHeightSM:i,controlHeight:a,controlHeightLG:c,marginXXS:u}=e,f=c*1.25,m=na(e,{layoutHeaderHeight:a*2,layoutHeaderPaddingInline:f,layoutHeaderColor:t,layoutFooterPadding:`${i}px ${f}px`,layoutTriggerHeight:c+u*2,layoutZeroTriggerSize:c});return[Eue(m)]},e=>{const{colorBgLayout:t}=e;return{colorBgHeader:"#001529",colorBgBody:t,colorBgTrigger:"#002140"}});var Nz=globalThis&&globalThis.__rest||function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(i[a[c]]=e[a[c]]);return i};const xz=C.createContext({siderHook:{addSider:()=>null,removeSider:()=>null}});function xI(e){let{suffixCls:t,tagName:i,displayName:a}=e;return c=>C.forwardRef((f,m)=>C.createElement(c,Object.assign({ref:m,suffixCls:t,tagName:i},f)))}const oM=C.forwardRef((e,t)=>{const{prefixCls:i,suffixCls:a,className:c,tagName:u}=e,f=Nz(e,["prefixCls","suffixCls","className","tagName"]),{getPrefixCls:m}=C.useContext(wr),g=m("layout",i),[E,y]=Az(g),T=a?`${g}-${a}`:g;return E(C.createElement(u,Object.assign({className:nt(i||T,c,y),ref:t},f)))}),_ue=C.forwardRef((e,t)=>{const{direction:i}=C.useContext(wr),[a,c]=C.useState([]),{prefixCls:u,className:f,rootClassName:m,children:g,hasSider:E,tagName:y}=e,T=Nz(e,["prefixCls","className","rootClassName","children","hasSider","tagName"]),R=ys(T,["suffixCls"]),{getPrefixCls:P}=C.useContext(wr),O=P("layout",u),[N,M]=Az(O),D=nt(O,{[`${O}-has-sider`]:typeof E=="boolean"?E:a.length>0,[`${O}-rtl`]:i==="rtl"},f,m,M),x=C.useMemo(()=>({siderHook:{addSider:k=>{c(V=>[].concat(gt(V),[k]))},removeSider:k=>{c(V=>V.filter(H=>H!==k))}}}),[]);return N(C.createElement(xz.Provider,{value:x},C.createElement(y,Object.assign({ref:t,className:D},R),g)))}),Sue=xI({tagName:"section",displayName:"Layout"})(_ue),yue=xI({suffixCls:"header",tagName:"header",displayName:"Header"})(oM),Cue=xI({suffixCls:"footer",tagName:"footer",displayName:"Footer"})(oM),Tue=xI({suffixCls:"content",tagName:"main",displayName:"Content"})(oM),bue=Sue;var Rue=globalThis&&globalThis.__rest||function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(i[a[c]]=e[a[c]]);return i};const V6={xs:"479.98px",sm:"575.98px",md:"767.98px",lg:"991.98px",xl:"1199.98px",xxl:"1599.98px"},aM=C.createContext({}),Iue=(()=>{let e=0;return function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return e+=1,`${t}${e}`}})(),wue=C.forwardRef((e,t)=>{var{prefixCls:i,className:a,trigger:c,children:u,defaultCollapsed:f=!1,theme:m="dark",style:g={},collapsible:E=!1,reverseArrow:y=!1,width:T=200,collapsedWidth:R=80,zeroWidthTriggerStyle:P,breakpoint:O,onCollapse:N,onBreakpoint:M}=e,D=Rue(e,["prefixCls","className","trigger","children","defaultCollapsed","theme","style","collapsible","reverseArrow","width","collapsedWidth","zeroWidthTriggerStyle","breakpoint","onCollapse","onBreakpoint"]);const{siderHook:x}=C.useContext(xz),[k,V]=C.useState("collapsed"in D?D.collapsed:f),[H,$]=C.useState(!1);C.useEffect(()=>{"collapsed"in D&&V(D.collapsed)},[D.collapsed]);const G=(Y,oe)=>{"collapsed"in D||V(Y),N==null||N(Y,oe)},K=C.useRef();K.current=Y=>{$(Y.matches),M==null||M(Y.matches),k!==Y.matches&&G(Y.matches,"responsive")},C.useEffect(()=>{function Y(ue){return K.current(ue)}let oe;if(typeof window<"u"){const{matchMedia:ue}=window;if(ue&&O&&O in V6){oe=ue(`(max-width: ${V6[O]})`);try{oe.addEventListener("change",Y)}catch{oe.addListener(Y)}Y(oe)}}return()=>{try{oe==null||oe.removeEventListener("change",Y)}catch{oe==null||oe.removeListener(Y)}}},[O]),C.useEffect(()=>{const Y=Iue("ant-sider-");return x.addSider(Y),()=>x.removeSider(Y)},[]);const Q=()=>{G(!k,"clickTrigger")},{getPrefixCls:z}=C.useContext(wr),ie=()=>{const Y=z("layout-sider",i),oe=ys(D,["collapsed"]),ue=k?R:T,he=mue(ue)?`${ue}px`:String(ue),Se=parseFloat(String(R||0))===0?C.createElement("span",{onClick:Q,className:nt(`${Y}-zero-width-trigger`,`${Y}-zero-width-trigger-${y?"right":"left"}`),style:P},c||C.createElement(uue,null)):null,Ce={expanded:y?C.createElement(x6,null):C.createElement(F6,null),collapsed:y?C.createElement(F6,null):C.createElement(x6,null)}[k?"collapsed":"expanded"],pe=c!==null?Se||C.createElement("div",{className:`${Y}-trigger`,onClick:Q,style:{width:he}},c||Ce):null,fe=Object.assign(Object.assign({},g),{flex:`0 0 ${he}`,maxWidth:he,minWidth:he,width:he}),_e=nt(Y,`${Y}-${m}`,{[`${Y}-collapsed`]:!!k,[`${Y}-has-trigger`]:E&&c!==null&&!Se,[`${Y}-below`]:!!H,[`${Y}-zero-width`]:parseFloat(he)===0},a);return C.createElement("aside",Object.assign({className:_e},oe,{style:fe,ref:t}),C.createElement("div",{className:`${Y}-children`},u),E||H&&Se?pe:null)},J=C.useMemo(()=>({siderCollapsed:k}),[k]);return C.createElement(aM.Provider,{value:J},ie())}),Oue=wue,Aue=e=>{var t;const{className:i,children:a,icon:c,title:u,danger:f}=e,{prefixCls:m,firstLevel:g,direction:E,disableMenuItemTitleTooltip:y,inlineCollapsed:T}=C.useContext(A1),R=x=>{const k=C.createElement("span",{className:`${m}-title-content`},a);return(!c||Fh(a)&&a.type==="span")&&a&&x&&g&&typeof a=="string"?C.createElement("div",{className:`${m}-inline-collapsed-noicon`},a.charAt(0)):k},{siderCollapsed:P}=C.useContext(aM);let O=u;typeof u>"u"?O=g?a:"":u===!1&&(O="");const N={title:O};!P&&!T&&(N.title=null,N.open=!1);const M=ld(a).length;let D=C.createElement(OI,Object.assign({},ys(e,["title","icon","danger"]),{className:nt({[`${m}-item-danger`]:f,[`${m}-item-only-child`]:(c?M+1:M)===1},i),title:typeof u=="string"?u:void 0}),Rl(c,{className:nt(Fh(c)?(t=c.props)===null||t===void 0?void 0:t.className:"",`${m}-item-icon`)}),R(T));return y||(D=C.createElement(yS,Object.assign({},N,{placement:E==="rtl"?"left":"right",overlayClassName:`${m}-inline-collapsed-tooltip`}),D)),D},Pz=Aue,Nue=e=>{var t;const{popupClassName:i,icon:a,title:c,theme:u}=e,f=C.useContext(A1),{prefixCls:m,inlineCollapsed:g,theme:E}=f,y=Ag();let T;if(!a)T=g&&!y.length&&c&&typeof c=="string"?C.createElement("div",{className:`${m}-inline-collapsed-noicon`},c.charAt(0)):C.createElement("span",{className:`${m}-title-content`},c);else{const P=Fh(c)&&c.type==="span";T=C.createElement(C.Fragment,null,Rl(a,{className:nt(Fh(a)?(t=a.props)===null||t===void 0?void 0:t.className:"",`${m}-item-icon`)}),P?c:C.createElement("span",{className:`${m}-title-content`},c))}const R=C.useMemo(()=>Object.assign(Object.assign({},f),{firstLevel:!1}),[f]);return C.createElement(A1.Provider,{value:R},C.createElement(AI,Object.assign({},ys(e,["icon"]),{title:T,popupClassName:nt(m,i,`${m}-${u||E}`)})))},Dz=Nue;var xue=globalThis&&globalThis.__rest||function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(i[a[c]]=e[a[c]]);return i};function hk(e){return(e||[]).map((t,i)=>{if(t&&typeof t=="object"){const a=t,{label:c,children:u,key:f,type:m}=a,g=xue(a,["label","children","key","type"]),E=f??`tmp-${i}`;return u||m==="group"?m==="group"?C.createElement(NI,Object.assign({key:E},g,{title:c}),hk(u)):C.createElement(Dz,Object.assign({key:E},g,{title:c}),hk(u)):m==="divider"?C.createElement(Iz,Object.assign({key:E},g)):C.createElement(Pz,Object.assign({key:E},g),c)}return null}).filter(t=>t)}function Pue(e){return C.useMemo(()=>e&&hk(e),[e])}const Due=e=>{const{componentCls:t,motionDurationSlow:i,menuHorizontalHeight:a,colorSplit:c,lineWidth:u,lineType:f,menuItemPaddingInline:m}=e;return{[`${t}-horizontal`]:{lineHeight:`${a}px`,border:0,borderBottom:`${u}px ${f} ${c}`,boxShadow:"none","&::after":{display:"block",clear:"both",height:0,content:'"\\20"'},[`${t}-item, ${t}-submenu`]:{position:"relative",display:"inline-block",verticalAlign:"bottom",paddingInline:m},[`> ${t}-item:hover,
        > ${t}-item-active,
        > ${t}-submenu ${t}-submenu-title:hover`]:{backgroundColor:"transparent"},[`${t}-item, ${t}-submenu-title`]:{transition:[`border-color ${i}`,`background ${i}`].join(",")},[`${t}-submenu-arrow`]:{display:"none"}}}},Lue=Due,kue=e=>{let{componentCls:t,menuArrowOffset:i}=e;return{[`${t}-rtl`]:{direction:"rtl"},[`${t}-submenu-rtl`]:{transformOrigin:"100% 0"},[`${t}-rtl${t}-vertical,
    ${t}-submenu-rtl ${t}-vertical`]:{[`${t}-submenu-arrow`]:{"&::before":{transform:`rotate(-45deg) translateY(-${i})`},"&::after":{transform:`rotate(45deg) translateY(${i})`}}}}},Mue=kue,j6=e=>Object.assign({},L7(e)),Uue=(e,t)=>{const{componentCls:i,itemColor:a,itemSelectedColor:c,groupTitleColor:u,itemBg:f,subMenuItemBg:m,itemSelectedBg:g,activeBarHeight:E,activeBarWidth:y,activeBarBorderWidth:T,motionDurationSlow:R,motionEaseInOut:P,motionEaseOut:O,menuItemPaddingInline:N,motionDurationMid:M,itemHoverColor:D,lineType:x,colorSplit:k,itemDisabledColor:V,dangerItemColor:H,dangerItemHoverColor:$,dangerItemSelectedColor:G,dangerItemActiveBg:K,dangerItemSelectedBg:Q,itemHoverBg:z,menuSubMenuBg:ie,horizontalItemSelectedColor:J,horizontalItemSelectedBg:Y,horizontalItemBorderRadius:oe,horizontalItemHoverBg:ue}=e;return{[`${i}-${t}, ${i}-${t} > ${i}`]:{color:a,background:f,[`&${i}-root:focus-visible`]:Object.assign({},j6(e)),[`${i}-item-group-title`]:{color:u},[`${i}-submenu-selected`]:{[`> ${i}-submenu-title`]:{color:c}},[`${i}-item-disabled, ${i}-submenu-disabled`]:{color:`${V} !important`},[`${i}-item:hover, ${i}-submenu-title:hover`]:{[`&:not(${i}-item-selected):not(${i}-submenu-selected)`]:{color:D}},[`&:not(${i}-horizontal)`]:{[`${i}-item:not(${i}-item-selected)`]:{"&:hover":{backgroundColor:z},"&:active":{backgroundColor:g}},[`${i}-submenu-title`]:{"&:hover":{backgroundColor:z},"&:active":{backgroundColor:g}}},[`${i}-item-danger`]:{color:H,[`&${i}-item:hover`]:{[`&:not(${i}-item-selected):not(${i}-submenu-selected)`]:{color:$}},[`&${i}-item:active`]:{background:K}},[`${i}-item a`]:{"&, &:hover":{color:"inherit"}},[`${i}-item-selected`]:{color:c,[`&${i}-item-danger`]:{color:G},"a, a:hover":{color:"inherit"}},[`& ${i}-item-selected`]:{backgroundColor:g,[`&${i}-item-danger`]:{backgroundColor:Q}},[`${i}-item, ${i}-submenu-title`]:{[`&:not(${i}-item-disabled):focus-visible`]:Object.assign({},j6(e))},[`&${i}-submenu > ${i}`]:{backgroundColor:ie},[`&${i}-popup > ${i}`]:{backgroundColor:f},[`&${i}-horizontal`]:Object.assign(Object.assign({},t==="dark"?{borderBottom:0}:{}),{[`> ${i}-item, > ${i}-submenu`]:{top:T,marginTop:-T,marginBottom:0,borderRadius:oe,"&::after":{position:"absolute",insetInline:N,bottom:0,borderBottom:`${E}px solid transparent`,transition:`border-color ${R} ${P}`,content:'""'},"&:hover, &-active, &-open":{background:ue,"&::after":{borderBottomWidth:E,borderBottomColor:J}},"&-selected":{color:J,backgroundColor:Y,"&::after":{borderBottomWidth:E,borderBottomColor:J}}}}),[`&${i}-root`]:{[`&${i}-inline, &${i}-vertical`]:{borderInlineEnd:`${T}px ${x} ${k}`}},[`&${i}-inline`]:{[`${i}-sub${i}-inline`]:{background:m},[`${i}-item, ${i}-submenu-title`]:T&&y?{width:`calc(100% + ${T}px)`}:{},[`${i}-item`]:{position:"relative","&::after":{position:"absolute",insetBlock:0,insetInlineEnd:0,borderInlineEnd:`${y}px solid ${c}`,transform:"scaleY(0.0001)",opacity:0,transition:[`transform ${M} ${O}`,`opacity ${M} ${O}`].join(","),content:'""'},[`&${i}-item-danger`]:{"&::after":{borderInlineEndColor:G}}},[`${i}-selected, ${i}-item-selected`]:{"&::after":{transform:"scaleY(1)",opacity:1,transition:[`transform ${M} ${P}`,`opacity ${M} ${P}`].join(",")}}}}}},B6=Uue,$6=e=>{const{componentCls:t,menuItemHeight:i,itemMarginInline:a,padding:c,menuArrowSize:u,marginXS:f,marginXXS:m}=e,g=c+u+f;return{[`${t}-item`]:{position:"relative",overflow:"hidden"},[`${t}-item, ${t}-submenu-title`]:{height:i,lineHeight:`${i}px`,paddingInline:c,overflow:"hidden",textOverflow:"ellipsis",marginInline:a,marginBlock:m,width:`calc(100% - ${a*2}px)`},[`> ${t}-item,
            > ${t}-submenu > ${t}-submenu-title`]:{height:i,lineHeight:`${i}px`},[`${t}-item-group-list ${t}-submenu-title,
            ${t}-submenu-title`]:{paddingInlineEnd:g}}},Fue=e=>{const{componentCls:t,iconCls:i,menuItemHeight:a,colorTextLightSolid:c,dropdownWidth:u,controlHeightLG:f,motionDurationMid:m,motionEaseOut:g,paddingXL:E,itemMarginInline:y,fontSizeLG:T,motionDurationSlow:R,paddingXS:P,boxShadowSecondary:O}=e,N={height:a,lineHeight:`${a}px`,listStylePosition:"inside",listStyleType:"disc"};return[{[t]:{"&-inline, &-vertical":Object.assign({[`&${t}-root`]:{boxShadow:"none"}},$6(e))},[`${t}-submenu-popup`]:{[`${t}-vertical`]:Object.assign(Object.assign({},$6(e)),{boxShadow:O})}},{[`${t}-submenu-popup ${t}-vertical${t}-sub`]:{minWidth:u,maxHeight:`calc(100vh - ${f*2.5}px)`,padding:"0",overflow:"hidden",borderInlineEnd:0,"&:not([class*='-active'])":{overflowX:"hidden",overflowY:"auto"}}},{[`${t}-inline`]:{width:"100%",[`&${t}-root`]:{[`${t}-item, ${t}-submenu-title`]:{display:"flex",alignItems:"center",transition:[`border-color ${R}`,`background ${R}`,`padding ${m} ${g}`].join(","),[`> ${t}-title-content`]:{flex:"auto",minWidth:0,overflow:"hidden",textOverflow:"ellipsis"},"> *":{flex:"none"}}},[`${t}-sub${t}-inline`]:{padding:0,border:0,borderRadius:0,boxShadow:"none",[`& > ${t}-submenu > ${t}-submenu-title`]:N,[`& ${t}-item-group-title`]:{paddingInlineStart:E}},[`${t}-item`]:N}},{[`${t}-inline-collapsed`]:{width:a*2,[`&${t}-root`]:{[`${t}-item, ${t}-submenu ${t}-submenu-title`]:{[`> ${t}-inline-collapsed-noicon`]:{fontSize:T,textAlign:"center"}}},[`> ${t}-item,
          > ${t}-item-group > ${t}-item-group-list > ${t}-item,
          > ${t}-item-group > ${t}-item-group-list > ${t}-submenu > ${t}-submenu-title,
          > ${t}-submenu > ${t}-submenu-title`]:{insetInlineStart:0,paddingInline:`calc(50% - ${T/2}px - ${y}px)`,textOverflow:"clip",[`
            ${t}-submenu-arrow,
            ${t}-submenu-expand-icon
          `]:{opacity:0},[`${t}-item-icon, ${i}`]:{margin:0,fontSize:T,lineHeight:`${a}px`,"+ span":{display:"inline-block",opacity:0}}},[`${t}-item-icon, ${i}`]:{display:"inline-block"},"&-tooltip":{pointerEvents:"none",[`${t}-item-icon, ${i}`]:{display:"none"},"a, a:hover":{color:c}},[`${t}-item-group-title`]:Object.assign(Object.assign({},xre),{paddingInline:P})}}]},Vue=Fue,H6=e=>{const{componentCls:t,fontSize:i,motionDurationSlow:a,motionDurationMid:c,motionEaseInOut:u,motionEaseOut:f,iconCls:m,controlHeightSM:g}=e;return{[`${t}-item, ${t}-submenu-title`]:{position:"relative",display:"block",margin:0,whiteSpace:"nowrap",cursor:"pointer",transition:[`border-color ${a}`,`background ${a}`,`padding ${a} ${u}`].join(","),[`${t}-item-icon, ${m}`]:{minWidth:i,fontSize:i,transition:[`font-size ${c} ${f}`,`margin ${a} ${u}`,`color ${a}`].join(","),"+ span":{marginInlineStart:g-i,opacity:1,transition:[`opacity ${a} ${u}`,`margin ${a}`,`color ${a}`].join(",")}},[`${t}-item-icon`]:Object.assign({},D7()),[`&${t}-item-only-child`]:{[`> ${m}, > ${t}-item-icon`]:{marginInlineEnd:0}}},[`${t}-item-disabled, ${t}-submenu-disabled`]:{background:"none !important",cursor:"not-allowed","&::after":{borderColor:"transparent !important"},a:{color:"inherit !important"},[`> ${t}-submenu-title`]:{color:"inherit !important",cursor:"not-allowed"}}}},W6=e=>{const{componentCls:t,motionDurationSlow:i,motionEaseInOut:a,borderRadius:c,menuArrowSize:u,menuArrowOffset:f}=e;return{[`${t}-submenu`]:{"&-expand-icon, &-arrow":{position:"absolute",top:"50%",insetInlineEnd:e.margin,width:u,color:"currentcolor",transform:"translateY(-50%)",transition:`transform ${i} ${a}, opacity ${i}`},"&-arrow":{"&::before, &::after":{position:"absolute",width:u*.6,height:u*.15,backgroundColor:"currentcolor",borderRadius:c,transition:[`background ${i} ${a}`,`transform ${i} ${a}`,`top ${i} ${a}`,`color ${i} ${a}`].join(","),content:'""'},"&::before":{transform:`rotate(45deg) translateY(-${f})`},"&::after":{transform:`rotate(-45deg) translateY(${f})`}}}}},jue=e=>{const{antCls:t,componentCls:i,fontSize:a,motionDurationSlow:c,motionDurationMid:u,motionEaseInOut:f,lineHeight:m,paddingXS:g,padding:E,colorSplit:y,lineWidth:T,zIndexPopup:R,borderRadiusLG:P,subMenuItemBorderRadius:O,menuArrowSize:N,menuArrowOffset:M,lineType:D,menuPanelMaskInset:x}=e;return[{"":{[`${i}`]:Object.assign(Object.assign({},LL()),{"&-hidden":{display:"none"}})},[`${i}-submenu-hidden`]:{display:"none"}},{[i]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Cp(e)),LL()),{marginBottom:0,paddingInlineStart:0,fontSize:a,lineHeight:0,listStyle:"none",outline:"none",transition:`width ${c} cubic-bezier(0.2, 0, 0, 1) 0s`,"ul, ol":{margin:0,padding:0,listStyle:"none"},"&-overflow":{display:"flex",[`${i}-item`]:{flex:"none"}},[`${i}-item, ${i}-submenu, ${i}-submenu-title`]:{borderRadius:e.itemBorderRadius},[`${i}-item-group-title`]:{padding:`${g}px ${E}px`,fontSize:a,lineHeight:m,transition:`all ${c}`},[`&-horizontal ${i}-submenu`]:{transition:[`border-color ${c} ${f}`,`background ${c} ${f}`].join(",")},[`${i}-submenu, ${i}-submenu-inline`]:{transition:[`border-color ${c} ${f}`,`background ${c} ${f}`,`padding ${u} ${f}`].join(",")},[`${i}-submenu ${i}-sub`]:{cursor:"initial",transition:[`background ${c} ${f}`,`padding ${c} ${f}`].join(",")},[`${i}-title-content`]:{transition:`color ${c}`},[`${i}-item a`]:{"&::before":{position:"absolute",inset:0,backgroundColor:"transparent",content:'""'}},[`${i}-item-divider`]:{overflow:"hidden",lineHeight:0,borderColor:y,borderStyle:D,borderWidth:0,borderTopWidth:T,marginBlock:T,padding:0,"&-dashed":{borderStyle:"dashed"}}}),H6(e)),{[`${i}-item-group`]:{[`${i}-item-group-list`]:{margin:0,padding:0,[`${i}-item, ${i}-submenu-title`]:{paddingInline:`${a*2}px ${E}px`}}},"&-submenu":{"&-popup":{position:"absolute",zIndex:R,borderRadius:P,boxShadow:"none",transformOrigin:"0 0",[`&${i}-submenu`]:{background:"transparent"},"&::before":{position:"absolute",inset:`${x}px 0 0`,zIndex:-1,width:"100%",height:"100%",opacity:0,content:'""'}},"&-placement-rightTop::before":{top:0,insetInlineStart:x},"\n          &-placement-leftTop,\n          &-placement-bottomRight,\n          ":{transformOrigin:"100% 0"},"\n          &-placement-leftBottom,\n          &-placement-topRight,\n          ":{transformOrigin:"100% 100%"},"\n          &-placement-rightBottom,\n          &-placement-topLeft,\n          ":{transformOrigin:"0 100%"},"\n          &-placement-bottomLeft,\n          &-placement-rightTop,\n          ":{transformOrigin:"0 0"},"\n          &-placement-leftTop,\n          &-placement-leftBottom\n          ":{paddingInlineEnd:e.paddingXS},"\n          &-placement-rightTop,\n          &-placement-rightBottom\n          ":{paddingInlineStart:e.paddingXS},"\n          &-placement-topRight,\n          &-placement-topLeft\n          ":{paddingBottom:e.paddingXS},"\n          &-placement-bottomRight,\n          &-placement-bottomLeft\n          ":{paddingTop:e.paddingXS},[`> ${i}`]:Object.assign(Object.assign(Object.assign({borderRadius:P},H6(e)),W6(e)),{[`${i}-item, ${i}-submenu > ${i}-submenu-title`]:{borderRadius:O},[`${i}-submenu-title::after`]:{transition:`transform ${c} ${f}`}})}}),W6(e)),{[`&-inline-collapsed ${i}-submenu-arrow,
        &-inline ${i}-submenu-arrow`]:{"&::before":{transform:`rotate(-45deg) translateX(${M})`},"&::after":{transform:`rotate(45deg) translateX(-${M})`}},[`${i}-submenu-open${i}-submenu-inline > ${i}-submenu-title > ${i}-submenu-arrow`]:{transform:`translateY(-${N*.2}px)`,"&::after":{transform:`rotate(-45deg) translateX(-${M})`},"&::before":{transform:`rotate(45deg) translateX(${M})`}}})},{[`${t}-layout-header`]:{[i]:{lineHeight:"inherit"}}}]},Bue=(e,t)=>Al("Menu",(a,c)=>{let{overrideComponentToken:u}=c;if(t===!1)return[];const{colorBgElevated:f,colorPrimary:m,colorError:g,colorErrorHover:E,colorTextLightSolid:y,controlHeightLG:T,fontSize:R}=a,P=R/7*5,O=na(a,{menuItemHeight:T,menuItemPaddingInline:a.margin,menuArrowSize:P,menuHorizontalHeight:T*1.15,menuArrowOffset:`${P*.25}px`,menuPanelMaskInset:-7,menuSubMenuBg:f}),N=new Jo(y).setAlpha(.65).toRgbString(),M=na(O,{itemColor:N,itemHoverColor:y,groupTitleColor:N,itemSelectedColor:y,itemBg:"#001529",subMenuItemBg:"#000c17",itemActiveBg:"transparent",itemSelectedBg:m,activeBarWidth:0,activeBarHeight:0,activeBarBorderWidth:0,itemDisabledColor:new Jo(y).setAlpha(.25).toRgbString(),dangerItemColor:g,dangerItemHoverColor:E,dangerItemSelectedColor:y,dangerItemActiveBg:g,dangerItemSelectedBg:g,menuSubMenuBg:"#001529",horizontalItemSelectedColor:y,horizontalItemSelectedBg:m},Object.assign({},u));return[jue(O),Lue(O),Vue(O),B6(O,"light"),B6(M,"dark"),Mue(O),qG(O),_6(O,"slide-up"),_6(O,"slide-down"),KG(O,"zoom-big")]},a=>{const{colorPrimary:c,colorError:u,colorTextDisabled:f,colorErrorBg:m,colorText:g,colorTextDescription:E,colorBgContainer:y,colorFillAlter:T,colorFillContent:R,lineWidth:P,lineWidthBold:O,controlItemBgActive:N,colorBgTextHover:M}=a;return{dropdownWidth:160,zIndexPopup:a.zIndexPopupBase+50,radiusItem:a.borderRadiusLG,itemBorderRadius:a.borderRadiusLG,radiusSubMenuItem:a.borderRadiusSM,subMenuItemBorderRadius:a.borderRadiusSM,colorItemText:g,itemColor:g,colorItemTextHover:g,itemHoverColor:g,colorItemTextHoverHorizontal:c,horizontalItemHoverColor:c,colorGroupTitle:E,groupTitleColor:E,colorItemTextSelected:c,itemSelectedColor:c,colorItemTextSelectedHorizontal:c,horizontalItemSelectedColor:c,colorItemBg:y,itemBg:y,colorItemBgHover:M,itemHoverBg:M,colorItemBgActive:R,itemActiveBg:R,colorSubItemBg:T,subMenuItemBg:T,colorItemBgSelected:N,itemSelectedBg:N,colorItemBgSelectedHorizontal:"transparent",horizontalItemSelectedBg:"transparent",colorActiveBarWidth:0,activeBarWidth:0,colorActiveBarHeight:O,activeBarHeight:O,colorActiveBarBorderSize:P,activeBarBorderWidth:P,colorItemTextDisabled:f,itemDisabledColor:f,colorDangerItemText:u,dangerItemColor:u,colorDangerItemTextHover:u,dangerItemHoverColor:u,colorDangerItemTextSelected:u,dangerItemSelectedColor:u,colorDangerItemBgActive:m,dangerItemActiveBg:m,colorDangerItemBgSelected:m,dangerItemSelectedBg:m,itemMarginInline:a.marginXXS,horizontalItemBorderRadius:0,horizontalItemHoverBg:"transparent"}},{deprecatedTokens:[["colorGroupTitle","groupTitleColor"],["radiusItem","itemBorderRadius"],["radiusSubMenuItem","subMenuItemBorderRadius"],["colorItemText","itemColor"],["colorItemTextHover","itemHoverColor"],["colorItemTextHoverHorizontal","horizontalItemHoverColor"],["colorItemTextSelected","itemSelectedColor"],["colorItemTextSelectedHorizontal","horizontalItemSelectedColor"],["colorItemTextDisabled","itemDisabledColor"],["colorDangerItemText","dangerItemColor"],["colorDangerItemTextHover","dangerItemHoverColor"],["colorDangerItemTextSelected","dangerItemSelectedColor"],["colorDangerItemBgActive","dangerItemActiveBg"],["colorDangerItemBgSelected","dangerItemSelectedBg"],["colorItemBg","itemBg"],["colorItemBgHover","itemHoverBg"],["colorSubItemBg","subMenuItemBg"],["colorItemBgActive","itemActiveBg"],["colorItemBgSelectedHorizontal","horizontalItemSelectedBg"],["colorActiveBarWidth","activeBarWidth"],["colorActiveBarHeight","activeBarHeight"],["colorActiveBarBorderSize","activeBarBorderWidth"]]})(e);var $ue=globalThis&&globalThis.__rest||function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(i[a[c]]=e[a[c]]);return i};const Hue=C.forwardRef((e,t)=>{var i,a;const c=C.useContext(U6),u=c||{},{getPrefixCls:f,getPopupContainer:m,direction:g}=C.useContext(wr),E=f(),{prefixCls:y,className:T,theme:R="light",expandIcon:P,_internalDisableMenuItemTitleTooltip:O,inlineCollapsed:N,siderCollapsed:M,items:D,children:x,rootClassName:k,mode:V,selectable:H,onClick:$,overflowedIndicatorPopupClassName:G}=e,K=$ue(e,["prefixCls","className","theme","expandIcon","_internalDisableMenuItemTitleTooltip","inlineCollapsed","siderCollapsed","items","children","rootClassName","mode","selectable","onClick","overflowedIndicatorPopupClassName"]),Q=ys(K,["collapsedWidth"]),z=Pue(D)||x;(i=u.validator)===null||i===void 0||i.call(u,{mode:V});const ie=El(function(){var fe;$==null||$.apply(void 0,arguments),(fe=u.onClick)===null||fe===void 0||fe.call(u)}),J=u.mode||V,Y=H??u.selectable,oe=C.useMemo(()=>M!==void 0?M:N,[N,M]),ue={horizontal:{motionName:`${E}-slide-up`},inline:KL(E),other:{motionName:`${E}-zoom-big`}},he=f("menu",y||u.prefixCls),[Se,ve]=Bue(he,!c),Re=nt(`${he}-${R}`,T);let Ce;if(typeof P=="function")Ce=P;else{const fe=P||u.expandIcon;Ce=Rl(fe,{className:nt(`${he}-submenu-expand-icon`,(a=fe==null?void 0:fe.props)===null||a===void 0?void 0:a.className)})}const pe=C.useMemo(()=>({prefixCls:he,inlineCollapsed:oe||!1,direction:g,firstLevel:!0,theme:R,mode:J,disableMenuItemTitleTooltip:O}),[he,oe,g,O,R]);return Se(C.createElement(U6.Provider,{value:null},C.createElement(A1.Provider,{value:pe},C.createElement(VS,Object.assign({getPopupContainer:m,overflowedIndicator:C.createElement(nue,null),overflowedIndicatorPopupClassName:nt(he,`${he}-${R}`,G),mode:J,selectable:Y,onClick:ie},Q,{inlineCollapsed:oe,className:Re,prefixCls:he,direction:g,defaultMotions:ue,expandIcon:Ce,ref:t,rootClassName:nt(k,ve)}),z))))}),Wue=Hue,jS=C.forwardRef((e,t)=>{const i=C.useRef(null),a=C.useContext(aM);return C.useImperativeHandle(t,()=>({menu:i.current,focus:c=>{var u;(u=i.current)===null||u===void 0||u.focus(c)}})),C.createElement(Wue,Object.assign({ref:i},e,a))});jS.Item=Pz;jS.SubMenu=Dz;jS.Divider=Iz;jS.ItemGroup=NI;const Gue=jS,zue=e=>({"&::-moz-placeholder":{opacity:1},"&::placeholder":{color:e,userSelect:"none"},"&:placeholder-shown":{textOverflow:"ellipsis"}}),sM=e=>({borderColor:e.inputBorderHoverColor,borderInlineEndWidth:e.lineWidth}),fk=e=>({borderColor:e.inputBorderHoverColor,boxShadow:`0 0 0 ${e.controlOutlineWidth}px ${e.controlOutline}`,borderInlineEndWidth:e.lineWidth,outline:0}),Lz=e=>({color:e.colorTextDisabled,backgroundColor:e.colorBgContainerDisabled,borderColor:e.colorBorder,boxShadow:"none",cursor:"not-allowed",opacity:1,"&:hover":Object.assign({},sM(na(e,{inputBorderHoverColor:e.colorBorder})))}),kz=e=>{const{inputPaddingVerticalLG:t,fontSizeLG:i,lineHeightLG:a,borderRadiusLG:c,inputPaddingHorizontalLG:u}=e;return{padding:`${t}px ${u}px`,fontSize:i,lineHeight:a,borderRadius:c}},Mz=e=>({padding:`${e.inputPaddingVerticalSM}px ${e.controlPaddingHorizontalSM-1}px`,borderRadius:e.borderRadiusSM}),Uz=(e,t)=>{const{componentCls:i,colorError:a,colorWarning:c,colorErrorOutline:u,colorWarningOutline:f,colorErrorBorderHover:m,colorWarningBorderHover:g}=e;return{[`&-status-error:not(${t}-disabled):not(${t}-borderless)${t}`]:{borderColor:a,"&:hover":{borderColor:m},"&:focus, &-focused":Object.assign({},fk(na(e,{inputBorderActiveColor:a,inputBorderHoverColor:a,controlOutline:u}))),[`${i}-prefix, ${i}-suffix`]:{color:a}},[`&-status-warning:not(${t}-disabled):not(${t}-borderless)${t}`]:{borderColor:c,"&:hover":{borderColor:g},"&:focus, &-focused":Object.assign({},fk(na(e,{inputBorderActiveColor:c,inputBorderHoverColor:c,controlOutline:f}))),[`${i}-prefix, ${i}-suffix`]:{color:c}}}},Fz=e=>Object.assign(Object.assign({position:"relative",display:"inline-block",width:"100%",minWidth:0,padding:`${e.inputPaddingVertical}px ${e.inputPaddingHorizontal}px`,color:e.colorText,fontSize:e.fontSize,lineHeight:e.lineHeight,backgroundColor:e.colorBgContainer,backgroundImage:"none",borderWidth:e.lineWidth,borderStyle:e.lineType,borderColor:e.colorBorder,borderRadius:e.borderRadius,transition:`all ${e.motionDurationMid}`},zue(e.colorTextPlaceholder)),{"&:hover":Object.assign({},sM(e)),"&:focus, &-focused":Object.assign({},fk(e)),"&-disabled, &[disabled]":Object.assign({},Lz(e)),"&-borderless":{"&, &:hover, &:focus, &-focused, &-disabled, &[disabled]":{backgroundColor:"transparent",border:"none",boxShadow:"none"}},"textarea&":{maxWidth:"100%",height:"auto",minHeight:e.controlHeight,lineHeight:e.lineHeight,verticalAlign:"bottom",transition:`all ${e.motionDurationSlow}, height 0s`,resize:"vertical"},"&-lg":Object.assign({},kz(e)),"&-sm":Object.assign({},Mz(e)),"&-rtl":{direction:"rtl"},"&-textarea-rtl":{direction:"rtl"}}),Kue=e=>{const{componentCls:t,antCls:i}=e;return{position:"relative",display:"table",width:"100%",borderCollapse:"separate",borderSpacing:0,"&[class*='col-']":{paddingInlineEnd:e.paddingXS,"&:last-child":{paddingInlineEnd:0}},[`&-lg ${t}, &-lg > ${t}-group-addon`]:Object.assign({},kz(e)),[`&-sm ${t}, &-sm > ${t}-group-addon`]:Object.assign({},Mz(e)),[`&-lg ${i}-select-single ${i}-select-selector`]:{height:e.controlHeightLG},[`&-sm ${i}-select-single ${i}-select-selector`]:{height:e.controlHeightSM},[`> ${t}`]:{display:"table-cell","&:not(:first-child):not(:last-child)":{borderRadius:0}},[`${t}-group`]:{"&-addon, &-wrap":{display:"table-cell",width:1,whiteSpace:"nowrap",verticalAlign:"middle","&:not(:first-child):not(:last-child)":{borderRadius:0}},"&-wrap > *":{display:"block !important"},"&-addon":{position:"relative",padding:`0 ${e.inputPaddingHorizontal}px`,color:e.colorText,fontWeight:"normal",fontSize:e.fontSize,textAlign:"center",backgroundColor:e.colorFillAlter,border:`${e.lineWidth}px ${e.lineType} ${e.colorBorder}`,borderRadius:e.borderRadius,transition:`all ${e.motionDurationSlow}`,lineHeight:1,[`${i}-select`]:{margin:`-${e.inputPaddingVertical+1}px -${e.inputPaddingHorizontal}px`,[`&${i}-select-single:not(${i}-select-customize-input)`]:{[`${i}-select-selector`]:{backgroundColor:"inherit",border:`${e.lineWidth}px ${e.lineType} transparent`,boxShadow:"none"}},"&-open, &-focused":{[`${i}-select-selector`]:{color:e.colorPrimary}}},[`${i}-cascader-picker`]:{margin:`-9px -${e.inputPaddingHorizontal}px`,backgroundColor:"transparent",[`${i}-cascader-input`]:{textAlign:"start",border:0,boxShadow:"none"}}},"&-addon:first-child":{borderInlineEnd:0},"&-addon:last-child":{borderInlineStart:0}},[`${t}`]:{width:"100%",marginBottom:0,textAlign:"inherit","&:focus":{zIndex:1,borderInlineEndWidth:1},"&:hover":{zIndex:1,borderInlineEndWidth:1,[`${t}-search-with-button &`]:{zIndex:0}}},[`> ${t}:first-child, ${t}-group-addon:first-child`]:{borderStartEndRadius:0,borderEndEndRadius:0,[`${i}-select ${i}-select-selector`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${t}-affix-wrapper`]:{[`&:not(:first-child) ${t}`]:{borderStartStartRadius:0,borderEndStartRadius:0},[`&:not(:last-child) ${t}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${t}:last-child, ${t}-group-addon:last-child`]:{borderStartStartRadius:0,borderEndStartRadius:0,[`${i}-select ${i}-select-selector`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`${t}-affix-wrapper`]:{"&:not(:last-child)":{borderStartEndRadius:0,borderEndEndRadius:0,[`${t}-search &`]:{borderStartStartRadius:e.borderRadius,borderEndStartRadius:e.borderRadius}},[`&:not(:first-child), ${t}-search &:not(:first-child)`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`&${t}-group-compact`]:Object.assign(Object.assign({display:"block"},LL()),{[`${t}-group-addon, ${t}-group-wrap, > ${t}`]:{"&:not(:first-child):not(:last-child)":{borderInlineEndWidth:e.lineWidth,"&:hover":{zIndex:1},"&:focus":{zIndex:1}}},"& > *":{display:"inline-block",float:"none",verticalAlign:"top",borderRadius:0},[`
        & > ${t}-affix-wrapper,
        & > ${t}-number-affix-wrapper,
        & > ${i}-picker-range
      `]:{display:"inline-flex"},"& > *:not(:last-child)":{marginInlineEnd:-e.lineWidth,borderInlineEndWidth:e.lineWidth},[`${t}`]:{float:"none"},[`& > ${i}-select > ${i}-select-selector,
      & > ${i}-select-auto-complete ${t},
      & > ${i}-cascader-picker ${t},
      & > ${t}-group-wrapper ${t}`]:{borderInlineEndWidth:e.lineWidth,borderRadius:0,"&:hover":{zIndex:1},"&:focus":{zIndex:1}},[`& > ${i}-select-focused`]:{zIndex:1},[`& > ${i}-select > ${i}-select-arrow`]:{zIndex:1},[`& > *:first-child,
      & > ${i}-select:first-child > ${i}-select-selector,
      & > ${i}-select-auto-complete:first-child ${t},
      & > ${i}-cascader-picker:first-child ${t}`]:{borderStartStartRadius:e.borderRadius,borderEndStartRadius:e.borderRadius},[`& > *:last-child,
      & > ${i}-select:last-child > ${i}-select-selector,
      & > ${i}-cascader-picker:last-child ${t},
      & > ${i}-cascader-picker-focused:last-child ${t}`]:{borderInlineEndWidth:e.lineWidth,borderStartEndRadius:e.borderRadius,borderEndEndRadius:e.borderRadius},[`& > ${i}-select-auto-complete ${t}`]:{verticalAlign:"top"},[`${t}-group-wrapper + ${t}-group-wrapper`]:{marginInlineStart:-e.lineWidth,[`${t}-affix-wrapper`]:{borderRadius:0}},[`${t}-group-wrapper:not(:last-child)`]:{[`&${t}-search > ${t}-group`]:{[`& > ${t}-group-addon > ${t}-search-button`]:{borderRadius:0},[`& > ${t}`]:{borderStartStartRadius:e.borderRadius,borderStartEndRadius:0,borderEndEndRadius:0,borderEndStartRadius:e.borderRadius}}}})}},que=e=>{const{componentCls:t,controlHeightSM:i,lineWidth:a}=e,c=16,u=(i-a*2-c)/2;return{[t]:Object.assign(Object.assign(Object.assign(Object.assign({},Cp(e)),Fz(e)),Uz(e,t)),{'&[type="color"]':{height:e.controlHeight,[`&${t}-lg`]:{height:e.controlHeightLG},[`&${t}-sm`]:{height:i,paddingTop:u,paddingBottom:u}},'&[type="search"]::-webkit-search-cancel-button, &[type="search"]::-webkit-search-decoration':{"-webkit-appearance":"none"}})}},Yue=e=>{const{componentCls:t}=e;return{[`${t}-clear-icon`]:{margin:0,color:e.colorTextQuaternary,fontSize:e.fontSizeIcon,verticalAlign:-1,cursor:"pointer",transition:`color ${e.motionDurationSlow}`,"&:hover":{color:e.colorTextTertiary},"&:active":{color:e.colorText},"&-hidden":{visibility:"hidden"},"&-has-suffix":{margin:`0 ${e.inputAffixPadding}px`}}}},Xue=e=>{const{componentCls:t,inputAffixPadding:i,colorTextDescription:a,motionDurationSlow:c,colorIcon:u,colorIconHover:f,iconCls:m}=e;return{[`${t}-affix-wrapper`]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Fz(e)),{display:"inline-flex",[`&:not(${t}-affix-wrapper-disabled):hover`]:Object.assign(Object.assign({},sM(e)),{zIndex:1,[`${t}-search-with-button &`]:{zIndex:0}}),"&-focused, &:focus":{zIndex:1},"&-disabled":{[`${t}[disabled]`]:{background:"transparent"}},[`> input${t}`]:{padding:0,fontSize:"inherit",border:"none",borderRadius:0,outline:"none","&::-ms-reveal":{display:"none"},"&:focus":{boxShadow:"none !important"}},"&::before":{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'},[`${t}`]:{"&-prefix, &-suffix":{display:"flex",flex:"none",alignItems:"center","> *:not(:last-child)":{marginInlineEnd:e.paddingXS}},"&-show-count-suffix":{color:a},"&-show-count-has-suffix":{marginInlineEnd:e.paddingXXS},"&-prefix":{marginInlineEnd:i},"&-suffix":{marginInlineStart:i}}}),Yue(e)),{[`${m}${t}-password-icon`]:{color:u,cursor:"pointer",transition:`all ${c}`,"&:hover":{color:f}}}),Uz(e,`${t}-affix-wrapper`))}},Jue=e=>{const{componentCls:t,colorError:i,colorWarning:a,borderRadiusLG:c,borderRadiusSM:u}=e;return{[`${t}-group`]:Object.assign(Object.assign(Object.assign({},Cp(e)),Kue(e)),{"&-rtl":{direction:"rtl"},"&-wrapper":{display:"inline-block",width:"100%",textAlign:"start",verticalAlign:"top","&-rtl":{direction:"rtl"},"&-lg":{[`${t}-group-addon`]:{borderRadius:c}},"&-sm":{[`${t}-group-addon`]:{borderRadius:u}},"&-status-error":{[`${t}-group-addon`]:{color:i,borderColor:i}},"&-status-warning":{[`${t}-group-addon`]:{color:a,borderColor:a}},"&-disabled":{[`${t}-group-addon`]:Object.assign({},Lz(e))},[`&:not(${t}-compact-first-item):not(${t}-compact-last-item)${t}-compact-item`]:{[`${t}, ${t}-group-addon`]:{borderRadius:0}},[`&:not(${t}-compact-last-item)${t}-compact-first-item`]:{[`${t}, ${t}-group-addon`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&:not(${t}-compact-first-item)${t}-compact-last-item`]:{[`${t}, ${t}-group-addon`]:{borderStartStartRadius:0,borderEndStartRadius:0}}}})}},Que=e=>{const{componentCls:t,antCls:i}=e,a=`${t}-search`;return{[a]:{[`${t}`]:{"&:hover, &:focus":{borderColor:e.colorPrimaryHover,[`+ ${t}-group-addon ${a}-button:not(${i}-btn-primary)`]:{borderInlineStartColor:e.colorPrimaryHover}}},[`${t}-affix-wrapper`]:{borderRadius:0},[`${t}-lg`]:{lineHeight:e.lineHeightLG-2e-4},[`> ${t}-group`]:{[`> ${t}-group-addon:last-child`]:{insetInlineStart:-1,padding:0,border:0,[`${a}-button`]:{paddingTop:0,paddingBottom:0,borderStartStartRadius:0,borderStartEndRadius:e.borderRadius,borderEndEndRadius:e.borderRadius,borderEndStartRadius:0},[`${a}-button:not(${i}-btn-primary)`]:{color:e.colorTextDescription,"&:hover":{color:e.colorPrimaryHover},"&:active":{color:e.colorPrimaryActive},[`&${i}-btn-loading::before`]:{insetInlineStart:0,insetInlineEnd:0,insetBlockStart:0,insetBlockEnd:0}}}},[`${a}-button`]:{height:e.controlHeight,"&:hover, &:focus":{zIndex:1}},[`&-large ${a}-button`]:{height:e.controlHeightLG},[`&-small ${a}-button`]:{height:e.controlHeightSM},"&-rtl":{direction:"rtl"},[`&${t}-compact-item`]:{[`&:not(${t}-compact-last-item)`]:{[`${t}-group-addon`]:{[`${t}-search-button`]:{marginInlineEnd:-e.lineWidth,borderRadius:0}}},[`&:not(${t}-compact-first-item)`]:{[`${t},${t}-affix-wrapper`]:{borderRadius:0}},[`> ${t}-group-addon ${t}-search-button,
        > ${t},
        ${t}-affix-wrapper`]:{"&:hover,&:focus,&:active":{zIndex:2}},[`> ${t}-affix-wrapper-focused`]:{zIndex:2}}}}};function Vz(e){return na(e,{inputAffixPadding:e.paddingXXS,inputPaddingVertical:Math.max(Math.round((e.controlHeight-e.fontSize*e.lineHeight)/2*10)/10-e.lineWidth,3),inputPaddingVerticalLG:Math.ceil((e.controlHeightLG-e.fontSizeLG*e.lineHeightLG)/2*10)/10-e.lineWidth,inputPaddingVerticalSM:Math.max(Math.round((e.controlHeightSM-e.fontSize*e.lineHeight)/2*10)/10-e.lineWidth,0),inputPaddingHorizontal:e.paddingSM-e.lineWidth,inputPaddingHorizontalSM:e.paddingXS-e.lineWidth,inputPaddingHorizontalLG:e.controlPaddingHorizontal-e.lineWidth,inputBorderHoverColor:e.colorPrimaryHover,inputBorderActiveColor:e.colorPrimaryHover})}const Zue=e=>{const{componentCls:t,paddingLG:i}=e,a=`${t}-textarea`;return{[a]:{position:"relative","&-show-count":{[`> ${t}`]:{height:"100%"},[`${t}-data-count`]:{position:"absolute",bottom:-e.fontSize*e.lineHeight,insetInlineEnd:0,color:e.colorTextDescription,whiteSpace:"nowrap",pointerEvents:"none"}},"&-allow-clear":{[`> ${t}`]:{paddingInlineEnd:i}},[`&-affix-wrapper${a}-has-feedback`]:{[`${t}`]:{paddingInlineEnd:i}},[`&-affix-wrapper${t}-affix-wrapper`]:{padding:0,[`> textarea${t}`]:{fontSize:"inherit",border:"none",outline:"none","&:focus":{boxShadow:"none !important"}},[`${t}-suffix`]:{margin:0,"> *:not(:last-child)":{marginInline:0},[`${t}-clear-icon`]:{position:"absolute",insetInlineEnd:e.paddingXS,insetBlockStart:e.paddingXS},[`${a}-suffix`]:{position:"absolute",top:0,insetInlineEnd:e.inputPaddingHorizontal,bottom:0,zIndex:1,display:"inline-flex",alignItems:"center",margin:"auto",pointerEvents:"none"}}}}}},cM=Al("Input",e=>{const t=Vz(e);return[que(t),Zue(t),Xue(t),Jue(t),Que(t),xG(t)]}),ede=C.createContext({}),jz=ede,tde=e=>{const{componentCls:t}=e;return{[t]:{display:"flex",flexFlow:"row wrap",minWidth:0,"&::before, &::after":{display:"flex"},"&-no-wrap":{flexWrap:"nowrap"},"&-start":{justifyContent:"flex-start"},"&-center":{justifyContent:"center"},"&-end":{justifyContent:"flex-end"},"&-space-between":{justifyContent:"space-between"},"&-space-around":{justifyContent:"space-around"},"&-space-evenly":{justifyContent:"space-evenly"},"&-top":{alignItems:"flex-start"},"&-middle":{alignItems:"center"},"&-bottom":{alignItems:"flex-end"}}}},nde=e=>{const{componentCls:t}=e;return{[t]:{position:"relative",maxWidth:"100%",minHeight:1}}},rde=(e,t)=>{const{componentCls:i,gridColumns:a}=e,c={};for(let u=a;u>=0;u--)u===0?(c[`${i}${t}-${u}`]={display:"none"},c[`${i}-push-${u}`]={insetInlineStart:"auto"},c[`${i}-pull-${u}`]={insetInlineEnd:"auto"},c[`${i}${t}-push-${u}`]={insetInlineStart:"auto"},c[`${i}${t}-pull-${u}`]={insetInlineEnd:"auto"},c[`${i}${t}-offset-${u}`]={marginInlineStart:0},c[`${i}${t}-order-${u}`]={order:0}):(c[`${i}${t}-${u}`]={display:"block",flex:`0 0 ${u/a*100}%`,maxWidth:`${u/a*100}%`},c[`${i}${t}-push-${u}`]={insetInlineStart:`${u/a*100}%`},c[`${i}${t}-pull-${u}`]={insetInlineEnd:`${u/a*100}%`},c[`${i}${t}-offset-${u}`]={marginInlineStart:`${u/a*100}%`},c[`${i}${t}-order-${u}`]={order:u});return c},pk=(e,t)=>rde(e,t),ide=(e,t,i)=>({[`@media (min-width: ${t}px)`]:Object.assign({},pk(e,i))}),ode=Al("Grid",e=>[tde(e)]),ade=Al("Grid",e=>{const t=na(e,{gridColumns:24}),i={"-sm":t.screenSMMin,"-md":t.screenMDMin,"-lg":t.screenLGMin,"-xl":t.screenXLMin,"-xxl":t.screenXXLMin};return[nde(t),pk(t,""),pk(t,"-xs"),Object.keys(i).map(a=>ide(t,i[a],a)).reduce((a,c)=>Object.assign(Object.assign({},a),c),{})]});var sde=globalThis&&globalThis.__rest||function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(i[a[c]]=e[a[c]]);return i};function cde(e){return typeof e=="number"?`${e} ${e} auto`:/^\d+(\.\d+)?(px|em|rem|%)$/.test(e)?`0 0 ${e}`:e}const lde=["xs","sm","md","lg","xl","xxl"],ude=C.forwardRef((e,t)=>{const{getPrefixCls:i,direction:a}=C.useContext(wr),{gutter:c,wrap:u,supportFlexGap:f}=C.useContext(jz),{prefixCls:m,span:g,order:E,offset:y,push:T,pull:R,className:P,children:O,flex:N,style:M}=e,D=sde(e,["prefixCls","span","order","offset","push","pull","className","children","flex","style"]),x=i("col",m),[k,V]=ade(x);let H={};lde.forEach(K=>{let Q={};const z=e[K];typeof z=="number"?Q.span=z:typeof z=="object"&&(Q=z||{}),delete D[K],H=Object.assign(Object.assign({},H),{[`${x}-${K}-${Q.span}`]:Q.span!==void 0,[`${x}-${K}-order-${Q.order}`]:Q.order||Q.order===0,[`${x}-${K}-offset-${Q.offset}`]:Q.offset||Q.offset===0,[`${x}-${K}-push-${Q.push}`]:Q.push||Q.push===0,[`${x}-${K}-pull-${Q.pull}`]:Q.pull||Q.pull===0,[`${x}-${K}-flex-${Q.flex}`]:Q.flex||Q.flex==="auto",[`${x}-rtl`]:a==="rtl"})});const $=nt(x,{[`${x}-${g}`]:g!==void 0,[`${x}-order-${E}`]:E,[`${x}-offset-${y}`]:y,[`${x}-push-${T}`]:T,[`${x}-pull-${R}`]:R},P,H,V),G={};if(c&&c[0]>0){const K=c[0]/2;G.paddingLeft=K,G.paddingRight=K}if(c&&c[1]>0&&!f){const K=c[1]/2;G.paddingTop=K,G.paddingBottom=K}return N&&(G.flex=cde(N),u===!1&&!G.minWidth&&(G.minWidth=0)),k(C.createElement("div",Object.assign({},D,{style:Object.assign(Object.assign({},G),M),className:$,ref:t}),O))}),Bz=ude,dde=()=>{const[e,t]=C.useState(!1);return C.useEffect(()=>{t(Aae())},[]),e};var hde=globalThis&&globalThis.__rest||function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(i[a[c]]=e[a[c]]);return i};function G6(e,t){const[i,a]=C.useState(typeof e=="string"?e:""),c=()=>{if(typeof e=="string"&&a(e),typeof e=="object")for(let u=0;u<SS.length;u++){const f=SS[u];if(!t[f])continue;const m=e[f];if(m!==void 0){a(m);return}}};return C.useEffect(()=>{c()},[JSON.stringify(e),t]),i}const fde=C.forwardRef((e,t)=>{const{prefixCls:i,justify:a,align:c,className:u,style:f,children:m,gutter:g=0,wrap:E}=e,y=hde(e,["prefixCls","justify","align","className","style","children","gutter","wrap"]),{getPrefixCls:T,direction:R}=C.useContext(wr),[P,O]=C.useState({xs:!0,sm:!0,md:!0,lg:!0,xl:!0,xxl:!0}),[N,M]=C.useState({xs:!1,sm:!1,md:!1,lg:!1,xl:!1,xxl:!1}),D=G6(c,N),x=G6(a,N),k=dde(),V=C.useRef(g),H=Fce();C.useEffect(()=>{const ve=H.subscribe(Re=>{M(Re);const Ce=V.current||0;(!Array.isArray(Ce)&&typeof Ce=="object"||Array.isArray(Ce)&&(typeof Ce[0]=="object"||typeof Ce[1]=="object"))&&O(Re)});return()=>H.unsubscribe(ve)},[]);const $=()=>{const ve=[void 0,void 0];return(Array.isArray(g)?g:[g,void 0]).forEach((Ce,pe)=>{if(typeof Ce=="object")for(let fe=0;fe<SS.length;fe++){const _e=SS[fe];if(P[_e]&&Ce[_e]!==void 0){ve[pe]=Ce[_e];break}}else ve[pe]=Ce}),ve},G=T("row",i),[K,Q]=ode(G),z=$(),ie=nt(G,{[`${G}-no-wrap`]:E===!1,[`${G}-${x}`]:x,[`${G}-${D}`]:D,[`${G}-rtl`]:R==="rtl"},u,Q),J={},Y=z[0]!=null&&z[0]>0?z[0]/-2:void 0,oe=z[1]!=null&&z[1]>0?z[1]/-2:void 0;Y&&(J.marginLeft=Y,J.marginRight=Y),k?[,J.rowGap]=z:oe&&(J.marginTop=oe,J.marginBottom=oe);const[ue,he]=z,Se=C.useMemo(()=>({gutter:[ue,he],wrap:E,supportFlexGap:k}),[ue,he,E,k]);return K(C.createElement(jz.Provider,{value:Se},C.createElement("div",Object.assign({},y,{className:ie,style:Object.assign(Object.assign({},J),f),ref:t}),m)))}),pde=fde,mde=e=>{const{getPrefixCls:t,direction:i}=C.useContext(wr),{prefixCls:a,className:c=""}=e,u=t("input-group",a),f=t("input"),[m,g]=cM(f),E=nt(u,{[`${u}-lg`]:e.size==="large",[`${u}-sm`]:e.size==="small",[`${u}-compact`]:e.compact,[`${u}-rtl`]:i==="rtl"},g,c),y=C.useContext(hd),T=C.useMemo(()=>Object.assign(Object.assign({},y),{isFormItemInput:!1}),[y]);return m(C.createElement("span",{className:E,style:e.style,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,onFocus:e.onFocus,onBlur:e.onBlur},C.createElement(hd.Provider,{value:T},e.children)))},gde=mde;function A0(e){return!!(e.addonBefore||e.addonAfter)}function yP(e){return!!(e.prefix||e.suffix||e.allowClear)}function z_(e,t,i,a){if(i){var c=t;if(t.type==="click"){var u=e.cloneNode(!0);c=Object.create(t,{target:{value:u},currentTarget:{value:u}}),u.value="",i(c);return}if(a!==void 0){c=Object.create(t,{target:{value:e},currentTarget:{value:e}}),e.value=a,i(c);return}i(c)}}function vde(e,t){if(e){e.focus(t);var i=t||{},a=i.cursor;if(a){var c=e.value.length;switch(a){case"start":e.setSelectionRange(0,0);break;case"end":e.setSelectionRange(c,c);break;default:e.setSelectionRange(0,c)}}}}function mk(e){return typeof e>"u"||e===null?"":String(e)}var $z=function(t){var i,a,c=t.inputElement,u=t.prefixCls,f=t.prefix,m=t.suffix,g=t.addonBefore,E=t.addonAfter,y=t.className,T=t.style,R=t.disabled,P=t.readOnly,O=t.focused,N=t.triggerFocus,M=t.allowClear,D=t.value,x=t.handleReset,k=t.hidden,V=t.classes,H=t.classNames,$=t.dataAttrs,G=t.styles,K=C.useRef(null),Q=function(pe){var fe;(fe=K.current)!==null&&fe!==void 0&&fe.contains(pe.target)&&(N==null||N())},z=function(){var pe;if(!M)return null;var fe=!R&&!P&&D,_e="".concat(u,"-clear-icon"),ge=Sr(M)==="object"&&M!==null&&M!==void 0&&M.clearIcon?M.clearIcon:"✖";return Nt.createElement("span",{onClick:x,onMouseDown:function(Fe){return Fe.preventDefault()},className:nt(_e,(pe={},Ct(pe,"".concat(_e,"-hidden"),!fe),Ct(pe,"".concat(_e,"-has-suffix"),!!m),pe)),role:"button",tabIndex:-1},ge)},ie=C.cloneElement(c,{value:D,hidden:k,className:nt((i=c.props)===null||i===void 0?void 0:i.className,!yP(t)&&!A0(t)&&y)||null,style:Ae(Ae({},(a=c.props)===null||a===void 0?void 0:a.style),!yP(t)&&!A0(t)?T:{})});if(yP(t)){var J,Y="".concat(u,"-affix-wrapper"),oe=nt(Y,(J={},Ct(J,"".concat(Y,"-disabled"),R),Ct(J,"".concat(Y,"-focused"),O),Ct(J,"".concat(Y,"-readonly"),P),Ct(J,"".concat(Y,"-input-with-clear-btn"),m&&M&&D),J),!A0(t)&&y,V==null?void 0:V.affixWrapper),ue=(m||M)&&Nt.createElement("span",{className:nt("".concat(u,"-suffix"),H==null?void 0:H.suffix),style:G==null?void 0:G.suffix},z(),m);ie=Nt.createElement("span",st({className:oe,style:A0(t)?void 0:T,hidden:!A0(t)&&k,onClick:Q},$==null?void 0:$.affixWrapper,{ref:K}),f&&Nt.createElement("span",{className:nt("".concat(u,"-prefix"),H==null?void 0:H.prefix),style:G==null?void 0:G.prefix},f),C.cloneElement(c,{value:D,hidden:null}),ue)}if(A0(t)){var he="".concat(u,"-group"),Se="".concat(he,"-addon"),ve=nt("".concat(u,"-wrapper"),he,V==null?void 0:V.wrapper),Re=nt("".concat(u,"-group-wrapper"),y,V==null?void 0:V.group);return Nt.createElement("span",{className:Re,style:T,hidden:k},Nt.createElement("span",{className:ve},g&&Nt.createElement("span",{className:Se},g),C.cloneElement(ie,{hidden:null}),E&&Nt.createElement("span",{className:Se},E)))}return ie},Ede=["autoComplete","onChange","onFocus","onBlur","onPressEnter","onKeyDown","prefixCls","disabled","htmlSize","className","maxLength","suffix","showCount","type","classes","classNames","styles"],_de=C.forwardRef(function(e,t){var i=e.autoComplete,a=e.onChange,c=e.onFocus,u=e.onBlur,f=e.onPressEnter,m=e.onKeyDown,g=e.prefixCls,E=g===void 0?"rc-input":g,y=e.disabled,T=e.htmlSize,R=e.className,P=e.maxLength,O=e.suffix,N=e.showCount,M=e.type,D=M===void 0?"text":M,x=e.classes,k=e.classNames,V=e.styles,H=Xn(e,Ede),$=rd(e.defaultValue,{value:e.value}),G=Ye($,2),K=G[0],Q=G[1],z=C.useState(!1),ie=Ye(z,2),J=ie[0],Y=ie[1],oe=C.useRef(null),ue=function(ge){oe.current&&vde(oe.current,ge)};C.useImperativeHandle(t,function(){return{focus:ue,blur:function(){var ge;(ge=oe.current)===null||ge===void 0||ge.blur()},setSelectionRange:function(ge,Ue,Fe){var ot;(ot=oe.current)===null||ot===void 0||ot.setSelectionRange(ge,Ue,Fe)},select:function(){var ge;(ge=oe.current)===null||ge===void 0||ge.select()},input:oe.current}}),C.useEffect(function(){Y(function(_e){return _e&&y?!1:_e})},[y]);var he=function(ge){e.value===void 0&&Q(ge.target.value),oe.current&&z_(oe.current,ge,a)},Se=function(ge){f&&ge.key==="Enter"&&f(ge),m==null||m(ge)},ve=function(ge){Y(!0),c==null||c(ge)},Re=function(ge){Y(!1),u==null||u(ge)},Ce=function(ge){Q(""),ue(),oe.current&&z_(oe.current,ge,a)},pe=function(){var ge=ys(e,["prefixCls","onPressEnter","addonBefore","addonAfter","prefix","suffix","allowClear","defaultValue","showCount","classes","htmlSize","styles","classNames"]);return Nt.createElement("input",st({autoComplete:i},ge,{onChange:he,onFocus:ve,onBlur:Re,onKeyDown:Se,className:nt(E,Ct({},"".concat(E,"-disabled"),y),k==null?void 0:k.input),style:V==null?void 0:V.input,ref:oe,size:T,type:D}))},fe=function(){var ge=Number(P)>0;if(O||N){var Ue=mk(K),Fe=gt(Ue).length,ot=Sr(N)==="object"?N.formatter({value:Ue,count:Fe,maxLength:P}):"".concat(Fe).concat(ge?" / ".concat(P):"");return Nt.createElement(Nt.Fragment,null,!!N&&Nt.createElement("span",{className:nt("".concat(E,"-show-count-suffix"),Ct({},"".concat(E,"-show-count-has-suffix"),!!O),k==null?void 0:k.count),style:Ae({},V==null?void 0:V.count)},ot),O)}return null};return Nt.createElement($z,st({},H,{prefixCls:E,className:R,inputElement:pe(),handleReset:Ce,value:mk(K),focused:J,triggerFocus:ue,suffix:fe(),disabled:y,classes:x,classNames:k,styles:V}))});function Hz(e,t){const i=C.useRef([]),a=()=>{i.current.push(setTimeout(()=>{var c,u,f,m;!((c=e.current)===null||c===void 0)&&c.input&&((u=e.current)===null||u===void 0?void 0:u.input.getAttribute("type"))==="password"&&(!((f=e.current)===null||f===void 0)&&f.input.hasAttribute("value"))&&((m=e.current)===null||m===void 0||m.input.removeAttribute("value"))}))};return C.useEffect(()=>(t&&a(),()=>i.current.forEach(c=>{c&&clearTimeout(c)})),[]),a}function Sde(e){return!!(e.prefix||e.suffix||e.allowClear)}var yde=globalThis&&globalThis.__rest||function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(i[a[c]]=e[a[c]]);return i};function Cde(e,t){if(!e)return;e.focus(t);const{cursor:i}=t||{};if(i){const a=e.value.length;switch(i){case"start":e.setSelectionRange(0,0);break;case"end":e.setSelectionRange(a,a);break;default:e.setSelectionRange(0,a);break}}}const Tde=C.forwardRef((e,t)=>{const{prefixCls:i,bordered:a=!0,status:c,size:u,disabled:f,onBlur:m,onFocus:g,suffix:E,allowClear:y,addonAfter:T,addonBefore:R,className:P,rootClassName:O,onChange:N,classNames:M}=e,D=yde(e,["prefixCls","bordered","status","size","disabled","onBlur","onFocus","suffix","allowClear","addonAfter","addonBefore","className","rootClassName","onChange","classNames"]),{getPrefixCls:x,direction:k,input:V}=Nt.useContext(wr),H=x("input",i),$=C.useRef(null),[G,K]=cM(H),{compactSize:Q,compactItemClassnames:z}=W2(H,k),ie=Rg(Fe=>{var ot;return(ot=u??Q)!==null&&ot!==void 0?ot:Fe}),J=Nt.useContext(DS),Y=f??J,{status:oe,hasFeedback:ue,feedbackIcon:he}=C.useContext(hd),Se=iz(oe,c),ve=Sde(e)||!!ue,Re=C.useRef(ve);C.useEffect(()=>{ve&&Re.current,Re.current=ve},[ve]);const Ce=Hz($,!0),pe=Fe=>{Ce(),m==null||m(Fe)},fe=Fe=>{Ce(),g==null||g(Fe)},_e=Fe=>{Ce(),N==null||N(Fe)},ge=(ue||E)&&Nt.createElement(Nt.Fragment,null,E,ue&&he);let Ue;return typeof y=="object"&&(y!=null&&y.clearIcon)?Ue=y:y&&(Ue={clearIcon:Nt.createElement(bI,null)}),G(Nt.createElement(_de,Object.assign({ref:Ol(t,$),prefixCls:H,autoComplete:V==null?void 0:V.autoComplete},D,{disabled:Y,onBlur:pe,onFocus:fe,suffix:ge,allowClear:Ue,className:nt(P,O,z),onChange:_e,addonAfter:T&&Nt.createElement(GL,null,Nt.createElement(E6,{override:!0,status:!0},T)),addonBefore:R&&Nt.createElement(GL,null,Nt.createElement(E6,{override:!0,status:!0},R)),classNames:Object.assign(Object.assign({},M),{input:nt({[`${H}-sm`]:ie==="small",[`${H}-lg`]:ie==="large",[`${H}-rtl`]:k==="rtl",[`${H}-borderless`]:!a},!ve&&G_(H,Se),M==null?void 0:M.input,K)}),classes:{affixWrapper:nt({[`${H}-affix-wrapper-sm`]:ie==="small",[`${H}-affix-wrapper-lg`]:ie==="large",[`${H}-affix-wrapper-rtl`]:k==="rtl",[`${H}-affix-wrapper-borderless`]:!a},G_(`${H}-affix-wrapper`,Se,ue),K),wrapper:nt({[`${H}-group-rtl`]:k==="rtl"},K),group:nt({[`${H}-group-wrapper-sm`]:ie==="small",[`${H}-group-wrapper-lg`]:ie==="large",[`${H}-group-wrapper-rtl`]:k==="rtl",[`${H}-group-wrapper-disabled`]:Y},G_(`${H}-group-wrapper`,Se,ue),K)}})))}),lM=Tde;var Wz={};Object.defineProperty(Wz,"__esModule",{value:!0});var bde={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2Q889.47 375.11 816.7 305l-50.88 50.88C807.31 395.53 843.45 447.4 874.7 512 791.5 684.2 673.4 766 512 766q-72.67 0-133.87-22.38L323 798.75Q408 838 512 838q288.3 0 430.2-300.3a60.29 60.29 0 000-51.5zm-63.57-320.64L836 122.88a8 8 0 00-11.32 0L715.31 232.2Q624.86 186 512 186q-288.3 0-430.2 300.3a60.3 60.3 0 000 51.5q56.69 119.4 136.5 191.41L112.48 835a8 8 0 000 11.31L155.17 889a8 8 0 0011.31 0l712.15-712.12a8 8 0 000-11.32zM149.3 512C232.6 339.8 350.7 258 512 258c54.54 0 104.13 9.36 149.12 28.39l-70.3 70.3a176 176 0 00-238.13 238.13l-83.42 83.42C223.1 637.49 183.3 582.28 149.3 512zm246.7 0a112.11 112.11 0 01146.2-106.69L401.31 546.2A112 112 0 01396 512z"}},{tag:"path",attrs:{d:"M508 624c-3.46 0-6.87-.16-10.25-.47l-52.82 52.82a176.09 176.09 0 00227.42-227.42l-52.82 52.82c.31 3.38.47 6.79.47 10.25a111.94 111.94 0 01-112 112z"}}]},name:"eye-invisible",theme:"outlined"},Rde=Wz.default=bde;const Ide=(e,t)=>C.createElement(Mo,{...e,ref:t,icon:Rde}),wde=C.forwardRef(Ide);var Gz={};Object.defineProperty(Gz,"__esModule",{value:!0});var Ode={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"}}]},name:"eye",theme:"outlined"},Ade=Gz.default=Ode;const Nde=(e,t)=>C.createElement(Mo,{...e,ref:t,icon:Ade}),xde=C.forwardRef(Nde);var Pde=globalThis&&globalThis.__rest||function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(i[a[c]]=e[a[c]]);return i};const Dde=e=>e?C.createElement(xde,null):C.createElement(wde,null),Lde={click:"onClick",hover:"onMouseOver"},kde=C.forwardRef((e,t)=>{const{visibilityToggle:i=!0}=e,a=typeof i=="object"&&i.visible!==void 0,[c,u]=C.useState(()=>a?i.visible:!1),f=C.useRef(null);C.useEffect(()=>{a&&u(i.visible)},[a,i]);const m=Hz(f),g=()=>{const{disabled:H}=e;H||(c&&m(),u($=>{var G;const K=!$;return typeof i=="object"&&((G=i.onVisibleChange)===null||G===void 0||G.call(i,K)),K}))},E=H=>{const{action:$="click",iconRender:G=Dde}=e,K=Lde[$]||"",Q=G(c),z={[K]:g,className:`${H}-icon`,key:"passwordIcon",onMouseDown:ie=>{ie.preventDefault()},onMouseUp:ie=>{ie.preventDefault()}};return C.cloneElement(C.isValidElement(Q)?Q:C.createElement("span",null,Q),z)},{className:y,prefixCls:T,inputPrefixCls:R,size:P}=e,O=Pde(e,["className","prefixCls","inputPrefixCls","size"]),{getPrefixCls:N}=C.useContext(wr),M=N("input",R),D=N("input-password",T),x=i&&E(D),k=nt(D,y,{[`${D}-${P}`]:!!P}),V=Object.assign(Object.assign({},ys(O,["suffix","iconRender","visibilityToggle"])),{type:c?"text":"password",className:k,prefixCls:M,suffix:x});return P&&(V.size=P),C.createElement(lM,Object.assign({ref:Ol(t,f)},V))}),Mde=kde;var Ude=globalThis&&globalThis.__rest||function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(i[a[c]]=e[a[c]]);return i};const Fde=C.forwardRef((e,t)=>{const{prefixCls:i,inputPrefixCls:a,className:c,size:u,suffix:f,enterButton:m=!1,addonAfter:g,loading:E,disabled:y,onSearch:T,onChange:R,onCompositionStart:P,onCompositionEnd:O}=e,N=Ude(e,["prefixCls","inputPrefixCls","className","size","suffix","enterButton","addonAfter","loading","disabled","onSearch","onChange","onCompositionStart","onCompositionEnd"]),{getPrefixCls:M,direction:D}=C.useContext(wr),x=C.useRef(!1),k=M("input-search",i),V=M("input",a),{compactSize:H}=W2(k,D),$=Rg(Ce=>{var pe;return(pe=u??H)!==null&&pe!==void 0?pe:Ce}),G=C.useRef(null),K=Ce=>{Ce&&Ce.target&&Ce.type==="click"&&T&&T(Ce.target.value,Ce),R&&R(Ce)},Q=Ce=>{var pe;document.activeElement===((pe=G.current)===null||pe===void 0?void 0:pe.input)&&Ce.preventDefault()},z=Ce=>{var pe,fe;T&&T((fe=(pe=G.current)===null||pe===void 0?void 0:pe.input)===null||fe===void 0?void 0:fe.value,Ce)},ie=Ce=>{x.current||E||z(Ce)},J=typeof m=="boolean"?C.createElement(kce,null):null,Y=`${k}-button`;let oe;const ue=m||{},he=ue.type&&ue.type.__ANT_BUTTON===!0;he||ue.type==="button"?oe=Rl(ue,Object.assign({onMouseDown:Q,onClick:Ce=>{var pe,fe;(fe=(pe=ue==null?void 0:ue.props)===null||pe===void 0?void 0:pe.onClick)===null||fe===void 0||fe.call(pe,Ce),z(Ce)},key:"enterButton"},he?{className:Y,size:$}:{})):oe=C.createElement(Do,{className:Y,type:m?"primary":void 0,size:$,disabled:y,key:"enterButton",onMouseDown:Q,onClick:z,loading:E,icon:J},m),g&&(oe=[oe,Rl(g,{key:"addonAfter"})]);const Se=nt(k,{[`${k}-rtl`]:D==="rtl",[`${k}-${$}`]:!!$,[`${k}-with-button`]:!!m},c),ve=Ce=>{x.current=!0,P==null||P(Ce)},Re=Ce=>{x.current=!1,O==null||O(Ce)};return C.createElement(lM,Object.assign({ref:Ol(G,t),onPressEnter:ie},N,{size:$,onCompositionStart:ve,onCompositionEnd:Re,prefixCls:V,addonAfter:oe,suffix:f,onChange:K,className:Se,disabled:y}))}),Vde=Fde;var jde=`
  min-height:0 !important;
  max-height:none !important;
  height:0 !important;
  visibility:hidden !important;
  overflow:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
  pointer-events: none !important;
`,Bde=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","font-variant","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break","white-space"],CP={},Ic;function $de(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=e.getAttribute("id")||e.getAttribute("data-reactid")||e.getAttribute("name");if(t&&CP[i])return CP[i];var a=window.getComputedStyle(e),c=a.getPropertyValue("box-sizing")||a.getPropertyValue("-moz-box-sizing")||a.getPropertyValue("-webkit-box-sizing"),u=parseFloat(a.getPropertyValue("padding-bottom"))+parseFloat(a.getPropertyValue("padding-top")),f=parseFloat(a.getPropertyValue("border-bottom-width"))+parseFloat(a.getPropertyValue("border-top-width")),m=Bde.map(function(E){return"".concat(E,":").concat(a.getPropertyValue(E))}).join(";"),g={sizingStyle:m,paddingSize:u,borderSize:f,boxSizing:c};return t&&i&&(CP[i]=g),g}function Hde(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;Ic||(Ic=document.createElement("textarea"),Ic.setAttribute("tab-index","-1"),Ic.setAttribute("aria-hidden","true"),document.body.appendChild(Ic)),e.getAttribute("wrap")?Ic.setAttribute("wrap",e.getAttribute("wrap")):Ic.removeAttribute("wrap");var c=$de(e,t),u=c.paddingSize,f=c.borderSize,m=c.boxSizing,g=c.sizingStyle;Ic.setAttribute("style","".concat(g,";").concat(jde)),Ic.value=e.value||e.placeholder||"";var E=void 0,y=void 0,T,R=Ic.scrollHeight;if(m==="border-box"?R+=f:m==="content-box"&&(R-=u),i!==null||a!==null){Ic.value=" ";var P=Ic.scrollHeight-u;i!==null&&(E=P*i,m==="border-box"&&(E=E+u+f),R=Math.max(E,R)),a!==null&&(y=P*a,m==="border-box"&&(y=y+u+f),T=R>y?"":"hidden",R=Math.min(y,R))}var O={height:R,overflowY:T,resize:"none"};return E&&(O.minHeight=E),y&&(O.maxHeight=y),O}var Wde=["prefixCls","onPressEnter","defaultValue","value","autoSize","onResize","className","style","disabled","onChange","onInternalAutoSize"],TP=0,bP=1,RP=2,Gde=C.forwardRef(function(e,t){var i=e,a=i.prefixCls;i.onPressEnter;var c=i.defaultValue,u=i.value,f=i.autoSize,m=i.onResize,g=i.className,E=i.style,y=i.disabled,T=i.onChange;i.onInternalAutoSize;var R=Xn(i,Wde),P=rd(c,{value:u,postState:function(ge){return ge??""}}),O=Ye(P,2),N=O[0],M=O[1],D=function(ge){M(ge.target.value),T==null||T(ge)},x=C.useRef();C.useImperativeHandle(t,function(){return{textArea:x.current}});var k=C.useMemo(function(){return f&&Sr(f)==="object"?[f.minRows,f.maxRows]:[]},[f]),V=Ye(k,2),H=V[0],$=V[1],G=!!f,K=function(){try{if(document.activeElement===x.current){var ge=x.current,Ue=ge.selectionStart,Fe=ge.selectionEnd,ot=ge.scrollTop;x.current.setSelectionRange(Ue,Fe),x.current.scrollTop=ot}}catch{}},Q=C.useState(RP),z=Ye(Q,2),ie=z[0],J=z[1],Y=C.useState(),oe=Ye(Y,2),ue=oe[0],he=oe[1],Se=function(){J(TP)};Ti(function(){G&&Se()},[u,H,$,G]),Ti(function(){if(ie===TP)J(bP);else if(ie===bP){var _e=Hde(x.current,!1,H,$);J(RP),he(_e)}else K()},[ie]);var ve=C.useRef(),Re=function(){Zo.cancel(ve.current)},Ce=function(ge){ie===RP&&(m==null||m(ge),f&&(Re(),ve.current=Zo(function(){Se()})))};C.useEffect(function(){return Re},[]);var pe=G?ue:null,fe=Ae(Ae({},E),pe);return(ie===TP||ie===bP)&&(fe.overflowY="hidden",fe.overflowX="hidden"),C.createElement(yp,{onResize:Ce,disabled:!(f||m)},C.createElement("textarea",st({},R,{ref:x,style:fe,className:nt(a,g,Ct({},"".concat(a,"-disabled"),y)),disabled:y,value:N,onChange:D})))}),zde=["defaultValue","value","onFocus","onBlur","onChange","allowClear","maxLength","onCompositionStart","onCompositionEnd","suffix","prefixCls","classes","showCount","className","style","disabled","hidden","classNames","styles","onResize"];function zz(e,t){return gt(e||"").slice(0,t).join("")}function z6(e,t,i,a){var c=i;return e?c=zz(i,a):gt(t||"").length<i.length&&gt(i||"").length>a&&(c=t),c}var Kde=Nt.forwardRef(function(e,t){var i,a=e.defaultValue,c=e.value,u=e.onFocus,f=e.onBlur,m=e.onChange,g=e.allowClear,E=e.maxLength,y=e.onCompositionStart,T=e.onCompositionEnd,R=e.suffix,P=e.prefixCls,O=P===void 0?"rc-textarea":P,N=e.classes,M=e.showCount,D=e.className,x=e.style,k=e.disabled,V=e.hidden,H=e.classNames,$=e.styles,G=e.onResize,K=Xn(e,zde),Q=rd(a,{value:c,defaultValue:a}),z=Ye(Q,2),ie=z[0],J=z[1],Y=C.useRef(null),oe=Nt.useState(!1),ue=Ye(oe,2),he=ue[0],Se=ue[1],ve=Nt.useState(!1),Re=Ye(ve,2),Ce=Re[0],pe=Re[1],fe=Nt.useRef(),_e=Nt.useRef(0),ge=Nt.useState(null),Ue=Ye(ge,2),Fe=Ue[0],ot=Ue[1],qe=function(){Y.current.textArea.focus()};C.useImperativeHandle(t,function(){return{resizableTextArea:Y.current,focus:qe,blur:function(){Y.current.textArea.blur()}}}),C.useEffect(function(){Se(function(Vt){return!k&&Vt})},[k]);var wt=Number(E)>0,kt=function(zt){pe(!0),fe.current=ie,_e.current=zt.currentTarget.selectionStart,y==null||y(zt)},_t=function(zt){pe(!1);var Kt=zt.currentTarget.value;if(wt){var mn,Hn=_e.current>=E+1||_e.current===((mn=fe.current)===null||mn===void 0?void 0:mn.length);Kt=z6(Hn,fe.current,Kt,E)}Kt!==ie&&(J(Kt),z_(zt.currentTarget,zt,m,Kt)),T==null||T(zt)},vt=function(zt){var Kt=zt.target.value;if(!Ce&&wt){var mn=zt.target.selectionStart>=E+1||zt.target.selectionStart===Kt.length||!zt.target.selectionStart;Kt=z6(mn,ie,Kt,E)}J(Kt),z_(zt.currentTarget,zt,m,Kt)},At=function(zt){var Kt=K.onPressEnter,mn=K.onKeyDown;zt.key==="Enter"&&Kt&&Kt(zt),mn==null||mn(zt)},it=function(zt){Se(!0),u==null||u(zt)},Mt=function(zt){Se(!1),f==null||f(zt)},rn=function(zt){J(""),qe(),z_(Y.current.textArea,zt,m)},Ft=mk(ie);!Ce&&wt&&c==null&&(Ft=zz(Ft,E));var ft=R,dt;if(M){var at=gt(Ft).length;Sr(M)==="object"?dt=M.formatter({value:Ft,count:at,maxLength:E}):dt="".concat(at).concat(wt?" / ".concat(E):""),ft=Nt.createElement(Nt.Fragment,null,ft,Nt.createElement("span",{className:nt("".concat(O,"-data-count"),H==null?void 0:H.count),style:$==null?void 0:$.count},dt))}var ht=function(zt){G==null||G(zt),Fe===null?ot("mounted"):Fe==="mounted"&&ot("resized")},Ot=Nt.createElement($z,{value:Ft,allowClear:g,handleReset:rn,suffix:ft,prefixCls:O,classes:{affixWrapper:nt(N==null?void 0:N.affixWrapper,(i={},Ct(i,"".concat(O,"-show-count"),M),Ct(i,"".concat(O,"-textarea-allow-clear"),g),i))},disabled:k,focused:he,className:D,style:Ae(Ae({},x),Fe==="resized"?{height:"auto"}:{}),dataAttrs:{affixWrapper:{"data-count":typeof dt=="string"?dt:void 0}},hidden:V,inputElement:Nt.createElement(Gde,st({},K,{onKeyDown:At,onChange:vt,onFocus:it,onBlur:Mt,onCompositionStart:kt,onCompositionEnd:_t,className:H==null?void 0:H.textarea,style:Ae(Ae({},$==null?void 0:$.textarea),{},{resize:x==null?void 0:x.resize}),disabled:k,prefixCls:O,onResize:ht,ref:Y}))});return Ot}),qde=globalThis&&globalThis.__rest||function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(i[a[c]]=e[a[c]]);return i};const Yde=C.forwardRef((e,t)=>{var{prefixCls:i,bordered:a=!0,size:c,disabled:u,status:f,allowClear:m,showCount:g,classNames:E}=e,y=qde(e,["prefixCls","bordered","size","disabled","status","allowClear","showCount","classNames"]);const{getPrefixCls:T,direction:R}=C.useContext(wr),P=Rg(c),O=C.useContext(DS),N=u??O,{status:M,hasFeedback:D,feedbackIcon:x}=C.useContext(hd),k=iz(M,f),V=C.useRef(null);C.useImperativeHandle(t,()=>{var Q;return{resizableTextArea:(Q=V.current)===null||Q===void 0?void 0:Q.resizableTextArea,focus:z=>{var ie,J;Cde((J=(ie=V.current)===null||ie===void 0?void 0:ie.resizableTextArea)===null||J===void 0?void 0:J.textArea,z)},blur:()=>{var z;return(z=V.current)===null||z===void 0?void 0:z.blur()}}});const H=T("input",i);let $;typeof m=="object"&&(m!=null&&m.clearIcon)?$=m:m&&($={clearIcon:C.createElement(bI,null)});const[G,K]=cM(H);return G(C.createElement(Kde,Object.assign({},y,{disabled:N,allowClear:$,classes:{affixWrapper:nt(`${H}-textarea-affix-wrapper`,{[`${H}-affix-wrapper-rtl`]:R==="rtl",[`${H}-affix-wrapper-borderless`]:!a,[`${H}-affix-wrapper-sm`]:P==="small",[`${H}-affix-wrapper-lg`]:P==="large",[`${H}-textarea-show-count`]:g},G_(`${H}-affix-wrapper`,k),K)},classNames:Object.assign(Object.assign({},E),{textarea:nt({[`${H}-borderless`]:!a,[`${H}-sm`]:P==="small",[`${H}-lg`]:P==="large"},G_(H,k),K,E==null?void 0:E.textarea)}),prefixCls:H,suffix:D&&C.createElement("span",{className:`${H}-textarea-suffix`},x),showCount:g,ref:V})))}),Kz=Yde,BS=lM;BS.Group=gde;BS.Search=Vde;BS.TextArea=Kz;BS.Password=Mde;const Xde=BS;function N1(e){const[t,i]=C.useState(e);return C.useEffect(()=>{const a=setTimeout(()=>{i(e)},e.length?0:10);return()=>{clearTimeout(a)}},[e]),t}const Jde=e=>{const{componentCls:t}=e,i=`${t}-show-help`,a=`${t}-show-help-item`;return{[i]:{transition:`opacity ${e.motionDurationSlow} ${e.motionEaseInOut}`,"&-appear, &-enter":{opacity:0,"&-active":{opacity:1}},"&-leave":{opacity:1,"&-active":{opacity:0}},[a]:{overflow:"hidden",transition:`height ${e.motionDurationSlow} ${e.motionEaseInOut},
                     opacity ${e.motionDurationSlow} ${e.motionEaseInOut},
                     transform ${e.motionDurationSlow} ${e.motionEaseInOut} !important`,[`&${a}-appear, &${a}-enter`]:{transform:"translateY(-5px)",opacity:0,"&-active":{transform:"translateY(0)",opacity:1}},[`&${a}-leave-active`]:{transform:"translateY(-5px)"}}}}},Qde=Jde,Zde=e=>({legend:{display:"block",width:"100%",marginBottom:e.marginLG,padding:0,color:e.colorTextDescription,fontSize:e.fontSizeLG,lineHeight:"inherit",border:0,borderBottom:`${e.lineWidth}px ${e.lineType} ${e.colorBorder}`},label:{fontSize:e.fontSize},'input[type="search"]':{boxSizing:"border-box"},'input[type="radio"], input[type="checkbox"]':{lineHeight:"normal"},'input[type="file"]':{display:"block"},'input[type="range"]':{display:"block",width:"100%"},"select[multiple], select[size]":{height:"auto"},"input[type='file']:focus,\n  input[type='radio']:focus,\n  input[type='checkbox']:focus":{outline:0,boxShadow:`0 0 0 ${e.controlOutlineWidth}px ${e.controlOutline}`},output:{display:"block",paddingTop:15,color:e.colorText,fontSize:e.fontSize,lineHeight:e.lineHeight}}),K6=(e,t)=>{const{formItemCls:i}=e;return{[i]:{[`${i}-label > label`]:{height:t},[`${i}-control-input`]:{minHeight:t}}}},ehe=e=>{const{componentCls:t}=e;return{[e.componentCls]:Object.assign(Object.assign(Object.assign({},Cp(e)),Zde(e)),{[`${t}-text`]:{display:"inline-block",paddingInlineEnd:e.paddingSM},"&-small":Object.assign({},K6(e,e.controlHeightSM)),"&-large":Object.assign({},K6(e,e.controlHeightLG))})}},the=e=>{const{formItemCls:t,iconCls:i,componentCls:a,rootPrefixCls:c}=e;return{[t]:Object.assign(Object.assign({},Cp(e)),{marginBottom:e.marginLG,verticalAlign:"top","&-with-help":{transition:"none"},[`&-hidden,
        &-hidden.${c}-row`]:{display:"none"},"&-has-warning":{[`${t}-split`]:{color:e.colorError}},"&-has-error":{[`${t}-split`]:{color:e.colorWarning}},[`${t}-label`]:{display:"inline-block",flexGrow:0,overflow:"hidden",whiteSpace:"nowrap",textAlign:"end",verticalAlign:"middle","&-left":{textAlign:"start"},"&-wrap":{overflow:"unset",lineHeight:`${e.lineHeight} - 0.25em`,whiteSpace:"unset"},"> label":{position:"relative",display:"inline-flex",alignItems:"center",maxWidth:"100%",height:e.controlHeight,color:e.colorTextHeading,fontSize:e.fontSize,[`> ${i}`]:{fontSize:e.fontSize,verticalAlign:"top"},[`&${t}-required:not(${t}-required-mark-optional)::before`]:{display:"inline-block",marginInlineEnd:e.marginXXS,color:e.colorError,fontSize:e.fontSize,fontFamily:"SimSun, sans-serif",lineHeight:1,content:'"*"',[`${a}-hide-required-mark &`]:{display:"none"}},[`${t}-optional`]:{display:"inline-block",marginInlineStart:e.marginXXS,color:e.colorTextDescription,[`${a}-hide-required-mark &`]:{display:"none"}},[`${t}-tooltip`]:{color:e.colorTextDescription,cursor:"help",writingMode:"horizontal-tb",marginInlineStart:e.marginXXS},"&::after":{content:'":"',position:"relative",marginBlock:0,marginInlineStart:e.marginXXS/2,marginInlineEnd:e.marginXS},[`&${t}-no-colon::after`]:{content:'" "'}}},[`${t}-control`]:{display:"flex",flexDirection:"column",flexGrow:1,[`&:first-child:not([class^="'${c}-col-'"]):not([class*="' ${c}-col-'"])`]:{width:"100%"},"&-input":{position:"relative",display:"flex",alignItems:"center",minHeight:e.controlHeight,"&-content":{flex:"auto",maxWidth:"100%"}}},[t]:{"&-explain, &-extra":{clear:"both",color:e.colorTextDescription,fontSize:e.fontSize,lineHeight:e.lineHeight},"&-explain-connected":{width:"100%"},"&-extra":{minHeight:e.controlHeightSM,transition:`color ${e.motionDurationMid} ${e.motionEaseOut}`},"&-explain":{"&-error":{color:e.colorError},"&-warning":{color:e.colorWarning}}},[`&-with-help ${t}-explain`]:{height:"auto",opacity:1},[`${t}-feedback-icon`]:{fontSize:e.fontSize,textAlign:"center",visibility:"visible",animationName:Q2,animationDuration:e.motionDurationMid,animationTimingFunction:e.motionEaseOutBack,pointerEvents:"none","&-success":{color:e.colorSuccess},"&-error":{color:e.colorError},"&-warning":{color:e.colorWarning},"&-validating":{color:e.colorPrimary}}})}},nhe=e=>{const{componentCls:t,formItemCls:i,rootPrefixCls:a}=e;return{[`${t}-horizontal`]:{[`${i}-label`]:{flexGrow:0},[`${i}-control`]:{flex:"1 1 0",minWidth:0},[`${i}-label.${a}-col-24 + ${i}-control`]:{minWidth:"unset"}}}},rhe=e=>{const{componentCls:t,formItemCls:i}=e;return{[`${t}-inline`]:{display:"flex",flexWrap:"wrap",[i]:{flex:"none",marginInlineEnd:e.margin,marginBottom:0,"&-row":{flexWrap:"nowrap"},"&-with-help":{marginBottom:e.marginLG},[`> ${i}-label,
        > ${i}-control`]:{display:"inline-block",verticalAlign:"top"},[`> ${i}-label`]:{flex:"none"},[`${t}-text`]:{display:"inline-block"},[`${i}-has-feedback`]:{display:"inline-block"}}}}},P0=e=>({padding:`0 0 ${e.paddingXS}px`,whiteSpace:"initial",textAlign:"start","> label":{margin:0,"&::after":{display:"none"}}}),ihe=e=>{const{componentCls:t,formItemCls:i}=e;return{[`${i} ${i}-label`]:P0(e),[t]:{[i]:{flexWrap:"wrap",[`${i}-label,
          ${i}-control`]:{flex:"0 0 100%",maxWidth:"100%"}}}}},ohe=e=>{const{componentCls:t,formItemCls:i,rootPrefixCls:a}=e;return{[`${t}-vertical`]:{[i]:{"&-row":{flexDirection:"column"},"&-label > label":{height:"auto"},[`${t}-item-control`]:{width:"100%"}}},[`${t}-vertical ${i}-label,
      .${a}-col-24${i}-label,
      .${a}-col-xl-24${i}-label`]:P0(e),[`@media (max-width: ${e.screenXSMax}px)`]:[ihe(e),{[t]:{[`.${a}-col-xs-24${i}-label`]:P0(e)}}],[`@media (max-width: ${e.screenSMMax}px)`]:{[t]:{[`.${a}-col-sm-24${i}-label`]:P0(e)}},[`@media (max-width: ${e.screenMDMax}px)`]:{[t]:{[`.${a}-col-md-24${i}-label`]:P0(e)}},[`@media (max-width: ${e.screenLGMax}px)`]:{[t]:{[`.${a}-col-lg-24${i}-label`]:P0(e)}}}},uM=Al("Form",(e,t)=>{let{rootPrefixCls:i}=t;const a=na(e,{formItemCls:`${e.componentCls}-item`,rootPrefixCls:i});return[ehe(a),the(a),Qde(a),nhe(a),rhe(a),ohe(a),qG(a),Q2]}),q6=[];function IP(e,t,i){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;return{key:typeof e=="string"?e:`${t}-${a}`,error:e,errorStatus:i}}function qz(e){let{help:t,helpStatus:i,errors:a=q6,warnings:c=q6,className:u,fieldId:f,onVisibleChanged:m}=e;const{prefixCls:g}=C.useContext(J2),E=`${g}-item-explain`,[,y]=uM(g),T=C.useMemo(()=>KL(g),[g]),R=N1(a),P=N1(c),O=C.useMemo(()=>t!=null?[IP(t,"help",i)]:[].concat(gt(R.map((M,D)=>IP(M,"error","error",D))),gt(P.map((M,D)=>IP(M,"warning","warning",D)))),[t,i,R,P]),N={};return f&&(N.id=`${f}_help`),C.createElement(Tp,{motionDeadline:T.motionDeadline,motionName:`${g}-show-help`,visible:!!O.length,onVisibleChanged:m},M=>{const{className:D,style:x}=M;return C.createElement("div",Object.assign({},N,{className:nt(E,D,u,y),style:x,role:"alert"}),C.createElement(X7,Object.assign({keys:O},KL(g),{motionName:`${g}-show-help-item`,component:!1}),k=>{const{key:V,error:H,errorStatus:$,className:G,style:K}=k;return C.createElement("div",{key:V,className:nt(G,{[`${E}-${$}`]:$}),style:K},H)}))})}const ahe=["parentNode"],she="form_item";function K_(e){return e===void 0||e===!1?[]:Array.isArray(e)?e:[e]}function Yz(e,t){if(!e.length)return;const i=e.join("_");return t?`${t}_${i}`:ahe.includes(i)?`${she}_${i}`:i}function Y6(e){return K_(e).join("_")}function Xz(e){const[t]=X2(),i=C.useRef({}),a=C.useMemo(()=>e??Object.assign(Object.assign({},t),{__INTERNAL__:{itemRef:c=>u=>{const f=Y6(c);u?i.current[f]=u:delete i.current[f]}},scrollToField:function(c){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const f=K_(c),m=Yz(f,a.__INTERNAL__.name),g=m?document.getElementById(m):null;g&&loe(g,Object.assign({scrollMode:"if-needed",block:"nearest"},u))},getFieldInstance:c=>{const u=Y6(c);return i.current[u]}}),[e,t]);return[a]}var che=globalThis&&globalThis.__rest||function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(i[a[c]]=e[a[c]]);return i};const lhe=(e,t)=>{const i=C.useContext(DS),{getPrefixCls:a,direction:c,form:u}=C.useContext(wr),{prefixCls:f,className:m,rootClassName:g,size:E,disabled:y=i,form:T,colon:R,labelAlign:P,labelWrap:O,labelCol:N,wrapperCol:M,hideRequiredMark:D,layout:x="horizontal",scrollToFirstError:k,requiredMark:V,onFinishFailed:H,name:$}=e,G=che(e,["prefixCls","className","rootClassName","size","disabled","form","colon","labelAlign","labelWrap","labelCol","wrapperCol","hideRequiredMark","layout","scrollToFirstError","requiredMark","onFinishFailed","name"]),K=Rg(E),Q=C.useContext(C7),z=C.useMemo(()=>V!==void 0?V:u&&u.requiredMark!==void 0?u.requiredMark:!D,[D,V,u]),ie=R??(u==null?void 0:u.colon),J=a("form",f),[Y,oe]=uM(J),ue=nt(J,{[`${J}-${x}`]:!0,[`${J}-hide-required-mark`]:z===!1,[`${J}-rtl`]:c==="rtl",[`${J}-${K}`]:K},oe,m,g),[he]=Xz(T),{__INTERNAL__:Se}=he;Se.name=$;const ve=C.useMemo(()=>({name:$,labelAlign:P,labelCol:N,labelWrap:O,wrapperCol:M,vertical:x==="vertical",colon:ie,requiredMark:z,itemRef:Se.itemRef,form:he}),[$,P,N,M,x,ie,z,he]);C.useImperativeHandle(t,()=>he);const Re=(pe,fe)=>{if(pe){let _e={block:"nearest"};typeof pe=="object"&&(_e=pe),he.scrollToField(fe,_e)}},Ce=pe=>{if(H==null||H(pe),pe.errorFields.length){const fe=pe.errorFields[0].name;if(k!==void 0){Re(k,fe);return}u&&u.scrollToFirstError!==void 0&&Re(u.scrollToFirstError,fe)}};return Y(C.createElement(U7,{disabled:y},C.createElement(V7,{size:K},C.createElement(GG,{validateMessages:Q},C.createElement(Vh.Provider,{value:ve},C.createElement(Og,Object.assign({id:$},G,{name:$,onFinishFailed:Ce,form:he,className:ue})))))))},uhe=C.forwardRef(lhe),dhe=uhe,Jz=()=>{const{status:e,errors:t=[],warnings:i=[]}=C.useContext(hd);return{status:e,errors:t,warnings:i}};Jz.Context=hd;const hhe=Jz;function fhe(e){const[t,i]=C.useState(e),a=C.useRef(null),c=C.useRef([]),u=C.useRef(!1);C.useEffect(()=>(u.current=!1,()=>{u.current=!0,Zo.cancel(a.current),a.current=null}),[]);function f(m){u.current||(a.current===null&&(c.current=[],a.current=Zo(()=>{a.current=null,i(g=>{let E=g;return c.current.forEach(y=>{E=y(E)}),E})})),c.current.push(m))}return[t,f]}function phe(){const{itemRef:e}=C.useContext(Vh),t=C.useRef({});function i(a,c){const u=c&&typeof c=="object"&&c.ref,f=a.join("_");return(t.current.name!==f||t.current.originRef!==u)&&(t.current.name=f,t.current.originRef=u,t.current.ref=Ol(e(a),u)),t.current.ref}return i}const mhe=e=>{const{prefixCls:t,status:i,wrapperCol:a,children:c,errors:u,warnings:f,_internalItemRender:m,extra:g,help:E,fieldId:y,marginBottom:T,onErrorVisibleChanged:R}=e,P=`${t}-item`,O=C.useContext(Vh),N=a||O.wrapperCol||{},M=nt(`${P}-control`,N.className),D=C.useMemo(()=>Object.assign({},O),[O]);delete D.labelCol,delete D.wrapperCol;const x=C.createElement("div",{className:`${P}-control-input`},C.createElement("div",{className:`${P}-control-input-content`},c)),k=C.useMemo(()=>({prefixCls:t,status:i}),[t,i]),V=T!==null||u.length||f.length?C.createElement("div",{style:{display:"flex",flexWrap:"nowrap"}},C.createElement(J2.Provider,{value:k},C.createElement(qz,{fieldId:y,errors:u,warnings:f,help:E,helpStatus:i,className:`${P}-explain-connected`,onVisibleChanged:R})),!!T&&C.createElement("div",{style:{width:0,height:T}})):null,H={};y&&(H.id=`${y}_extra`);const $=g?C.createElement("div",Object.assign({},H,{className:`${P}-extra`}),g):null,G=m&&m.mark==="pro_table_render"&&m.render?m.render(e,{input:x,errorList:V,extra:$}):C.createElement(C.Fragment,null,x,V,$);return C.createElement(Vh.Provider,{value:D},C.createElement(Bz,Object.assign({},N,{className:M}),G))},ghe=mhe;var Qz={};Object.defineProperty(Qz,"__esModule",{value:!0});var vhe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M623.6 316.7C593.6 290.4 554 276 512 276s-81.6 14.5-111.6 40.7C369.2 344 352 380.7 352 420v7.6c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V420c0-44.1 43.1-80 96-80s96 35.9 96 80c0 31.1-22 59.6-56.1 72.7-21.2 8.1-39.2 22.3-52.1 40.9-13.1 19-19.9 41.8-19.9 64.9V620c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-22.7a48.3 48.3 0 0130.9-44.8c59-22.7 97.1-74.7 97.1-132.5.1-39.3-17.1-76-48.3-103.3zM472 732a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"question-circle",theme:"outlined"},Ehe=Qz.default=vhe;const _he=(e,t)=>C.createElement(Mo,{...e,ref:t,icon:Ehe}),She=C.forwardRef(_he);var yhe=globalThis&&globalThis.__rest||function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(i[a[c]]=e[a[c]]);return i};function Che(e){return e?typeof e=="object"&&!C.isValidElement(e)?e:{title:e}:null}const The=e=>{let{prefixCls:t,label:i,htmlFor:a,labelCol:c,labelAlign:u,colon:f,required:m,requiredMark:g,tooltip:E}=e;var y;const[T]=b7("Form"),{vertical:R,labelAlign:P,labelCol:O,labelWrap:N,colon:M}=C.useContext(Vh);if(!i)return null;const D=c||O||{},x=u||P,k=`${t}-item-label`,V=nt(k,x==="left"&&`${k}-left`,D.className,{[`${k}-wrap`]:!!N});let H=i;const $=f===!0||M!==!1&&f!==!1;$&&!R&&typeof i=="string"&&i.trim()!==""&&(H=i.replace(/[:|：]\s*$/,""));const K=Che(E);if(K){const{icon:z=C.createElement(She,null)}=K,ie=yhe(K,["icon"]),J=C.createElement(yS,Object.assign({},ie),C.cloneElement(z,{className:`${t}-item-tooltip`,title:""}));H=C.createElement(C.Fragment,null,H,J)}g==="optional"&&!m&&(H=C.createElement(C.Fragment,null,H,C.createElement("span",{className:`${t}-item-optional`,title:""},(T==null?void 0:T.optional)||((y=fg.Form)===null||y===void 0?void 0:y.optional))));const Q=nt({[`${t}-item-required`]:m,[`${t}-item-required-mark-optional`]:g==="optional",[`${t}-item-no-colon`]:!$});return C.createElement(Bz,Object.assign({},D,{className:V}),C.createElement("label",{htmlFor:a,className:Q,title:typeof i=="string"?i:""},H))},bhe=The;var Rhe=globalThis&&globalThis.__rest||function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(i[a[c]]=e[a[c]]);return i};const Ihe={success:vG,warning:yG,error:bI,validating:IG};function whe(e){const{prefixCls:t,className:i,rootClassName:a,style:c,help:u,errors:f,warnings:m,validateStatus:g,meta:E,hasFeedback:y,hidden:T,children:R,fieldId:P,required:O,isRequired:N,onSubItemMetaChange:M}=e,D=Rhe(e,["prefixCls","className","rootClassName","style","help","errors","warnings","validateStatus","meta","hasFeedback","hidden","children","fieldId","required","isRequired","onSubItemMetaChange"]),x=`${t}-item`,{requiredMark:k}=C.useContext(Vh),V=C.useRef(null),H=N1(f),$=N1(m),G=u!=null,K=!!(G||f.length||m.length),Q=!!V.current&&II(V.current),[z,ie]=C.useState(null);Ti(()=>{if(K&&V.current){const Se=getComputedStyle(V.current);ie(parseInt(Se.marginBottom,10))}},[K,Q]);const J=Se=>{Se||ie(null)},oe=function(){let Se=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,ve="";const Re=Se?H:E.errors,Ce=Se?$:E.warnings;return g!==void 0?ve=g:E.validating?ve="validating":Re.length?ve="error":Ce.length?ve="warning":(E.touched||y&&E.validated)&&(ve="success"),ve}(),ue=C.useMemo(()=>{let Se;if(y){const ve=oe&&Ihe[oe];Se=ve?C.createElement("span",{className:nt(`${x}-feedback-icon`,`${x}-feedback-icon-${oe}`)},C.createElement(ve,null)):null}return{status:oe,errors:f,warnings:m,hasFeedback:y,feedbackIcon:Se,isFormItemInput:!0}},[oe,y]),he=nt(x,i,a,{[`${x}-with-help`]:G||H.length||$.length,[`${x}-has-feedback`]:oe&&y,[`${x}-has-success`]:oe==="success",[`${x}-has-warning`]:oe==="warning",[`${x}-has-error`]:oe==="error",[`${x}-is-validating`]:oe==="validating",[`${x}-hidden`]:T});return C.createElement("div",{className:he,style:c,ref:V},C.createElement(pde,Object.assign({className:`${x}-row`},ys(D,["_internalItemRender","colon","dependencies","extra","fieldKey","getValueFromEvent","getValueProps","htmlFor","id","initialValue","isListField","label","labelAlign","labelCol","labelWrap","messageVariables","name","normalize","noStyle","preserve","requiredMark","rules","shouldUpdate","trigger","tooltip","validateFirst","validateTrigger","valuePropName","wrapperCol"])),C.createElement(bhe,Object.assign({htmlFor:P},e,{requiredMark:k,required:O??N,prefixCls:t})),C.createElement(ghe,Object.assign({},e,E,{errors:H,warnings:$,prefixCls:t,status:oe,help:u,marginBottom:z,onErrorVisibleChanged:J}),C.createElement(WG.Provider,{value:M},C.createElement(hd.Provider,{value:ue},R)))),!!z&&C.createElement("div",{className:`${x}-margin-offset`,style:{marginBottom:-z}}))}function Ohe(e){if(typeof e=="function")return e;const t=ld(e);return t.length<=1?t[0]:t}const Ahe="__SPLIT__",Nhe=C.memo(e=>{let{children:t}=e;return t},(e,t)=>e.value===t.value&&e.update===t.update&&e.childProps.length===t.childProps.length&&e.childProps.every((i,a)=>i===t.childProps[a]));function xhe(e){return e!=null}function X6(){return{errors:[],warnings:[],touched:!1,validating:!1,name:[],validated:!1}}function Phe(e){const{name:t,noStyle:i,className:a,dependencies:c,prefixCls:u,shouldUpdate:f,rules:m,children:g,required:E,label:y,messageVariables:T,trigger:R="onChange",validateTrigger:P,hidden:O,help:N}=e,{getPrefixCls:M}=C.useContext(wr),{name:D}=C.useContext(Vh),x=Ohe(g),k=typeof x=="function",V=C.useContext(WG),{validateTrigger:H}=C.useContext(vp),$=P!==void 0?P:H,G=xhe(t),K=M("form",u),[Q,z]=uM(K),ie=C.useContext(vS),J=C.useRef(),[Y,oe]=fhe({}),[ue,he]=up(()=>X6()),Se=ge=>{const Ue=ie==null?void 0:ie.getKey(ge.name);if(he(ge.destroy?X6():ge,!0),i&&N!==!1&&V){let Fe=ge.name;if(ge.destroy)Fe=J.current||Fe;else if(Ue!==void 0){const[ot,qe]=Ue;Fe=[ot].concat(gt(qe)),J.current=Fe}V(ge,Fe)}},ve=(ge,Ue)=>{oe(Fe=>{const ot=Object.assign({},Fe),wt=[].concat(gt(ge.name.slice(0,-1)),gt(Ue)).join(Ahe);return ge.destroy?delete ot[wt]:ot[wt]=ge,ot})},[Re,Ce]=C.useMemo(()=>{const ge=gt(ue.errors),Ue=gt(ue.warnings);return Object.values(Y).forEach(Fe=>{ge.push.apply(ge,gt(Fe.errors||[])),Ue.push.apply(Ue,gt(Fe.warnings||[]))}),[ge,Ue]},[Y,ue.errors,ue.warnings]),pe=phe();function fe(ge,Ue,Fe){return i&&!O?ge:C.createElement(whe,Object.assign({key:"row"},e,{className:nt(a,z),prefixCls:K,fieldId:Ue,isRequired:Fe,errors:Re,warnings:Ce,meta:ue,onSubItemMetaChange:ve}),ge)}if(!G&&!k&&!c)return Q(fe(x));let _e={};return typeof y=="string"?_e.label=y:t&&(_e.label=String(t)),T&&(_e=Object.assign(Object.assign({},_e),T)),Q(C.createElement(Y2,Object.assign({},e,{messageVariables:_e,trigger:R,validateTrigger:$,onMetaChange:Se}),(ge,Ue,Fe)=>{const ot=K_(t).length&&Ue?Ue.name:[],qe=Yz(ot,D),wt=E!==void 0?E:!!(m&&m.some(vt=>{if(vt&&typeof vt=="object"&&vt.required&&!vt.warningOnly)return!0;if(typeof vt=="function"){const At=vt(Fe);return At&&At.required&&!At.warningOnly}return!1})),kt=Object.assign({},ge);let _t=null;if(Array.isArray(x)&&G)_t=x;else if(!(k&&(!(f||c)||G))){if(!(c&&!k&&!G))if(Fh(x)){const vt=Object.assign(Object.assign({},x.props),kt);if(vt.id||(vt.id=qe),N||Re.length>0||Ce.length>0||e.extra){const Mt=[];(N||Re.length>0)&&Mt.push(`${qe}_help`),e.extra&&Mt.push(`${qe}_extra`),vt["aria-describedby"]=Mt.join(" ")}Re.length>0&&(vt["aria-invalid"]="true"),wt&&(vt["aria-required"]="true"),Cg(x)&&(vt.ref=pe(ot,x)),new Set([].concat(gt(K_(R)),gt(K_($)))).forEach(Mt=>{vt[Mt]=function(){for(var rn,Ft,ft,dt,at,ht=arguments.length,Ot=new Array(ht),Vt=0;Vt<ht;Vt++)Ot[Vt]=arguments[Vt];(ft=kt[Mt])===null||ft===void 0||(rn=ft).call.apply(rn,[kt].concat(Ot)),(at=(dt=x.props)[Mt])===null||at===void 0||(Ft=at).call.apply(Ft,[dt].concat(Ot))}});const it=[vt["aria-required"],vt["aria-invalid"],vt["aria-describedby"]];_t=C.createElement(Nhe,{value:kt[e.valuePropName||"value"],update:x,childProps:it},Rl(x,vt))}else k&&(f||c)&&!G?_t=x(Fe):_t=x}return fe(_t,qe,wt)}))}const Zz=Phe;Zz.useStatus=hhe;const Dhe=Zz;var Lhe=globalThis&&globalThis.__rest||function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(i[a[c]]=e[a[c]]);return i};const khe=e=>{var{prefixCls:t,children:i}=e,a=Lhe(e,["prefixCls","children"]);const{getPrefixCls:c}=C.useContext(wr),u=c("form",t),f=C.useMemo(()=>({prefixCls:u,status:"error"}),[u]);return C.createElement(jG,Object.assign({},a),(m,g,E)=>C.createElement(J2.Provider,{value:f},i(m.map(y=>Object.assign(Object.assign({},y),{fieldKey:y.key})),g,{errors:E.errors,warnings:E.warnings})))},Mhe=khe;function Uhe(){const{form:e}=C.useContext(Vh);return e}const md=dhe;md.Item=Dhe;md.List=Mhe;md.ErrorList=qz;md.useForm=Xz;md.useFormInstance=Uhe;md.useWatch=HG;md.Provider=GG;md.create=()=>{};const J6=md,$S=bue;$S.Header=yue;$S.Footer=Cue;$S.Content=Tue;$S.Sider=Oue;const gk=$S;let gl=null,MR=e=>e(),x1=[],P1={};function Fhe(){const{prefixCls:e,getContainer:t,rtl:i,maxCount:a,top:c,bottom:u}=P1,f=e??Z7().getPrefixCls("notification"),m=(t==null?void 0:t())||document.body;return{prefixCls:f,container:m,rtl:i,maxCount:a,top:c,bottom:u}}const Vhe=C.forwardRef((e,t)=>{const[i,a]=C.useState(),[c,u]=C.useState(),[f,m]=C.useState(),[g,E]=C.useState(),[y,T]=C.useState(),[R,P]=C.useState(),[O,N]=QG({prefixCls:i,getContainer:()=>c,maxCount:f,rtl:g,top:y,bottom:R}),M=Z7(),D=M.getRootPrefixCls(),x=M.getIconPrefixCls(),k=M.getTheme(),V=()=>{const{prefixCls:H,container:$,maxCount:G,rtl:K,top:Q,bottom:z}=Fhe();a(H),u($),m(G),E(K),T(Q),P(z)};return C.useEffect(V,[]),C.useImperativeHandle(t,()=>{const H=Object.assign({},O);return Object.keys(H).forEach($=>{H[$]=function(){return V(),O[$].apply(O,arguments)}}),{instance:H,sync:V}}),C.createElement(Ig,{prefixCls:D,iconPrefixCls:x,theme:k},N)});function dM(){if(!gl){const e=document.createDocumentFragment(),t={fragment:e};gl=t,MR(()=>{wG(C.createElement(Vhe,{ref:i=>{const{instance:a,sync:c}=i||{};Promise.resolve().then(()=>{!t.instance&&a&&(t.instance=a,t.sync=c,dM())})}}),e)});return}gl.instance&&(x1.forEach(e=>{switch(e.type){case"open":{MR(()=>{gl.instance.open(Object.assign(Object.assign({},P1),e.config))});break}case"destroy":MR(()=>{gl==null||gl.instance.destroy(e.key)});break}}),x1=[])}function jhe(e){P1=Object.assign(Object.assign({},P1),e),MR(()=>{var t;(t=gl==null?void 0:gl.sync)===null||t===void 0||t.call(gl)})}function e9(e){x1.push({type:"open",config:e}),dM()}function Bhe(e){x1.push({type:"destroy",key:e}),dM()}const $he=["success","info","warning","error"],Hhe={open:e9,destroy:Bhe,config:jhe,useNotification:tce,_InternalPanelDoNotUseOrYouWillBeFired:Yse},t9=Hhe;$he.forEach(e=>{t9[e]=t=>e9(Object.assign(Object.assign({},t),{type:e}))});const Whe=t9;var n9={};Object.defineProperty(n9,"__esModule",{value:!0});var Ghe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"}}]},name:"copy",theme:"outlined"},zhe=n9.default=Ghe;const Khe=(e,t)=>C.createElement(Mo,{...e,ref:t,icon:zhe}),qhe=C.forwardRef(Khe);var r9={};Object.defineProperty(r9,"__esModule",{value:!0});var Yhe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"},Xhe=r9.default=Yhe;const Jhe=(e,t)=>C.createElement(Mo,{...e,ref:t,icon:Xhe}),Qhe=C.forwardRef(Jhe);var i9={};Object.defineProperty(i9,"__esModule",{value:!0});var Zhe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 170h-60c-4.4 0-8 3.6-8 8v518H310v-73c0-6.7-7.8-10.5-13-6.3l-141.9 112a8 8 0 000 12.6l141.9 112c5.3 4.2 13 .4 13-6.3v-75h498c35.3 0 64-28.7 64-64V178c0-4.4-3.6-8-8-8z"}}]},name:"enter",theme:"outlined"},efe=i9.default=Zhe;const tfe=(e,t)=>C.createElement(Mo,{...e,ref:t,icon:efe}),nfe=C.forwardRef(tfe);var rfe=globalThis&&globalThis.__rest||function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(i[a[c]]=e[a[c]]);return i};const ife={border:0,background:"transparent",padding:0,lineHeight:"inherit",display:"inline-block"},ofe=C.forwardRef((e,t)=>{const i=E=>{const{keyCode:y}=E;y===Lt.ENTER&&E.preventDefault()},a=E=>{const{keyCode:y}=E,{onClick:T}=e;y===Lt.ENTER&&T&&T()},{style:c,noStyle:u,disabled:f}=e,m=rfe(e,["style","noStyle","disabled"]);let g={};return u||(g=Object.assign({},ife)),f&&(g.pointerEvents="none"),g=Object.assign(Object.assign({},g),c),C.createElement("div",Object.assign({role:"button",tabIndex:0,ref:t},m,{onKeyDown:i,onKeyUp:a,style:g}))}),Q6=ofe;var afe=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,i=[],a=0;a<e.rangeCount;a++)i.push(e.getRangeAt(a));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null;break}return e.removeAllRanges(),function(){e.type==="Caret"&&e.removeAllRanges(),e.rangeCount||i.forEach(function(c){e.addRange(c)}),t&&t.focus()}},sfe=afe,Z6={"text/plain":"Text","text/html":"Url",default:"Text"},cfe="Copy to clipboard: #{key}, Enter";function lfe(e){var t=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}function ufe(e,t){var i,a,c,u,f,m,g=!1;t||(t={}),i=t.debug||!1;try{c=sfe(),u=document.createRange(),f=document.getSelection(),m=document.createElement("span"),m.textContent=e,m.ariaHidden="true",m.style.all="unset",m.style.position="fixed",m.style.top=0,m.style.clip="rect(0, 0, 0, 0)",m.style.whiteSpace="pre",m.style.webkitUserSelect="text",m.style.MozUserSelect="text",m.style.msUserSelect="text",m.style.userSelect="text",m.addEventListener("copy",function(y){if(y.stopPropagation(),t.format)if(y.preventDefault(),typeof y.clipboardData>"u"){i&&console.warn("unable to use e.clipboardData"),i&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var T=Z6[t.format]||Z6.default;window.clipboardData.setData(T,e)}else y.clipboardData.clearData(),y.clipboardData.setData(t.format,e);t.onCopy&&(y.preventDefault(),t.onCopy(y.clipboardData))}),document.body.appendChild(m),u.selectNodeContents(m),f.addRange(u);var E=document.execCommand("copy");if(!E)throw new Error("copy command was unsuccessful");g=!0}catch(y){i&&console.error("unable to copy using execCommand: ",y),i&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),g=!0}catch(T){i&&console.error("unable to copy using clipboardData: ",T),i&&console.error("falling back to prompt"),a=lfe("message"in t?t.message:cfe),window.prompt(a,e)}}finally{f&&(typeof f.removeRange=="function"?f.removeRange(u):f.removeAllRanges()),m&&document.body.removeChild(m),c()}return g}var dfe=ufe;const hfe=jh(dfe),ffe=(e,t,i,a)=>{const{titleMarginBottom:c,fontWeightStrong:u}=a;return{marginBottom:c,color:i,fontWeight:u,fontSize:e,lineHeight:t}},pfe=e=>{const t=[1,2,3,4,5],i={};return t.forEach(a=>{i[`
      h${a}&,
      div&-h${a},
      div&-h${a} > textarea,
      h${a}
    `]=ffe(e[`fontSizeHeading${a}`],e[`lineHeightHeading${a}`],e.colorTextHeading,e)}),i},mfe=e=>{const{componentCls:t}=e;return{"a&, a":Object.assign(Object.assign({},P7(e)),{textDecoration:e.linkDecoration,"&:active, &:hover":{textDecoration:e.linkHoverDecoration},[`&[disabled], &${t}-disabled`]:{color:e.colorTextDisabled,cursor:"not-allowed","&:active, &:hover":{color:e.colorTextDisabled},"&:active":{pointerEvents:"none"}}})}},gfe=e=>({code:{margin:"0 0.2em",paddingInline:"0.4em",paddingBlock:"0.2em 0.1em",fontSize:"85%",fontFamily:e.fontFamilyCode,background:"rgba(150, 150, 150, 0.1)",border:"1px solid rgba(100, 100, 100, 0.2)",borderRadius:3},kbd:{margin:"0 0.2em",paddingInline:"0.4em",paddingBlock:"0.15em 0.1em",fontSize:"90%",fontFamily:e.fontFamilyCode,background:"rgba(150, 150, 150, 0.06)",border:"1px solid rgba(100, 100, 100, 0.2)",borderBottomWidth:2,borderRadius:3},mark:{padding:0,backgroundColor:gre[2]},"u, ins":{textDecoration:"underline",textDecorationSkipInk:"auto"},"s, del":{textDecoration:"line-through"},strong:{fontWeight:600},"ul, ol":{marginInline:0,marginBlock:"0 1em",padding:0,li:{marginInline:"20px 0",marginBlock:0,paddingInline:"4px 0",paddingBlock:0}},ul:{listStyleType:"circle",ul:{listStyleType:"disc"}},ol:{listStyleType:"decimal"},"pre, blockquote":{margin:"1em 0"},pre:{padding:"0.4em 0.6em",whiteSpace:"pre-wrap",wordWrap:"break-word",background:"rgba(150, 150, 150, 0.1)",border:"1px solid rgba(100, 100, 100, 0.2)",borderRadius:3,fontFamily:e.fontFamilyCode,code:{display:"inline",margin:0,padding:0,fontSize:"inherit",fontFamily:"inherit",background:"transparent",border:0}},blockquote:{paddingInline:"0.6em 0",paddingBlock:0,borderInlineStart:"4px solid rgba(100, 100, 100, 0.2)",opacity:.85}}),vfe=e=>{const{componentCls:t}=e,a=Vz(e).inputPaddingVertical+1;return{"&-edit-content":{position:"relative","div&":{insetInlineStart:-e.paddingSM,marginTop:-a,marginBottom:`calc(1em - ${a}px)`},[`${t}-edit-content-confirm`]:{position:"absolute",insetInlineEnd:e.marginXS+2,insetBlockEnd:e.marginXS,color:e.colorTextDescription,fontWeight:"normal",fontSize:e.fontSize,fontStyle:"normal",pointerEvents:"none"},textarea:{margin:"0!important",MozTransition:"none",height:"1em"}}}},Efe=e=>({"&-copy-success":{"\n    &,\n    &:hover,\n    &:focus":{color:e.colorSuccess}}}),_fe=()=>({"\n  a&-ellipsis,\n  span&-ellipsis\n  ":{display:"inline-block",maxWidth:"100%"},"&-single-line":{whiteSpace:"nowrap"},"&-ellipsis-single-line":{overflow:"hidden",textOverflow:"ellipsis","a&, span&":{verticalAlign:"bottom"}},"&-ellipsis-multiple-line":{display:"-webkit-box",overflow:"hidden",WebkitLineClamp:3,WebkitBoxOrient:"vertical"}}),Sfe=e=>{const{componentCls:t,titleMarginTop:i}=e;return{[t]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:e.colorText,wordBreak:"break-word",lineHeight:e.lineHeight,[`&${t}-secondary`]:{color:e.colorTextDescription},[`&${t}-success`]:{color:e.colorSuccess},[`&${t}-warning`]:{color:e.colorWarning},[`&${t}-danger`]:{color:e.colorError,"a&:active, a&:focus":{color:e.colorErrorActive},"a&:hover":{color:e.colorErrorHover}},[`&${t}-disabled`]:{color:e.colorTextDisabled,cursor:"not-allowed",userSelect:"none"},"\n        div&,\n        p\n      ":{marginBottom:"1em"}},pfe(e)),{[`
      & + h1${t},
      & + h2${t},
      & + h3${t},
      & + h4${t},
      & + h5${t}
      `]:{marginTop:i},"\n      div,\n      ul,\n      li,\n      p,\n      h1,\n      h2,\n      h3,\n      h4,\n      h5":{"\n        + h1,\n        + h2,\n        + h3,\n        + h4,\n        + h5\n        ":{marginTop:i}}}),gfe(e)),mfe(e)),{[`
        ${t}-expand,
        ${t}-edit,
        ${t}-copy
      `]:Object.assign(Object.assign({},P7(e)),{marginInlineStart:e.marginXXS})}),vfe(e)),Efe(e)),_fe()),{"&-rtl":{direction:"rtl"}})}},o9=Al("Typography",e=>[Sfe(e)],e=>({titleMarginTop:"1.2em",titleMarginBottom:"0.5em",fontWeightStrong:e.fontWeightStrong})),yfe=e=>{let{prefixCls:t,"aria-label":i,className:a,style:c,direction:u,maxLength:f,autoSize:m=!0,value:g,onSave:E,onCancel:y,onEnd:T,component:R,enterIcon:P=C.createElement(nfe,null)}=e;const O=C.useRef(null),N=C.useRef(!1),M=C.useRef(),[D,x]=C.useState(g);C.useEffect(()=>{x(g)},[g]),C.useEffect(()=>{if(O.current&&O.current.resizableTextArea){const{textArea:oe}=O.current.resizableTextArea;oe.focus();const{length:ue}=oe.value;oe.setSelectionRange(ue,ue)}},[]);const k=oe=>{let{target:ue}=oe;x(ue.value.replace(/[\n\r]/g,""))},V=()=>{N.current=!0},H=()=>{N.current=!1},$=oe=>{let{keyCode:ue}=oe;N.current||(M.current=ue)},G=()=>{E(D.trim())},K=oe=>{let{keyCode:ue,ctrlKey:he,altKey:Se,metaKey:ve,shiftKey:Re}=oe;M.current===ue&&!N.current&&!he&&!Se&&!ve&&!Re&&(ue===Lt.ENTER?(G(),T==null||T()):ue===Lt.ESC&&y())},Q=()=>{G()},z=R?`${t}-${R}`:"",[ie,J]=o9(t),Y=nt(t,`${t}-edit-content`,{[`${t}-rtl`]:u==="rtl"},a,z,J);return ie(C.createElement("div",{className:Y,style:c},C.createElement(Kz,{ref:O,maxLength:f,value:D,onChange:k,onKeyDown:$,onKeyUp:K,onCompositionStart:V,onCompositionEnd:H,onBlur:Q,"aria-label":i,rows:1,autoSize:m}),P!==null?Rl(P,{className:`${t}-edit-content-confirm`}):null))},Cfe=yfe;var Tfe=globalThis&&globalThis.__rest||function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(i[a[c]]=e[a[c]]);return i};const bfe=C.forwardRef((e,t)=>{var{prefixCls:i,component:a="article",className:c,rootClassName:u,setContentRef:f,children:m,direction:g}=e,E=Tfe(e,["prefixCls","component","className","rootClassName","setContentRef","children","direction"]);const{getPrefixCls:y,direction:T}=C.useContext(wr),R=g??T;let P=t;f&&(P=Ol(t,f));const O=y("typography",i),[N,M]=o9(O),D=nt(O,{[`${O}-rtl`]:R==="rtl"},c,u,M);return N(C.createElement(a,Object.assign({className:D,ref:P},E),m))}),a9=bfe;function wP(e,t){return C.useMemo(()=>{const i=!!e;return[i,Object.assign(Object.assign({},t),i&&typeof e=="object"?e:null)]},[e])}const Rfe=(e,t)=>{const i=C.useRef(!1);C.useEffect(()=>{i.current?e():i.current=!0},t)},Ife=Rfe;function s9(e){const t=typeof e;return t==="string"||t==="number"}function wfe(e){let t=0;return e.forEach(i=>{s9(i)?t+=String(i).length:t+=1}),t}function e5(e,t){let i=0;const a=[];for(let c=0;c<e.length;c+=1){if(i===t)return a;const u=e[c],m=s9(u)?String(u).length:1,g=i+m;if(g>t){const E=t-i;return a.push(String(u).slice(0,E)),a}a.push(u),i=g}return e}const Ofe=0,oR=1,t5=2,OP=3,n5=4,Afe=e=>{let{enabledMeasure:t,children:i,text:a,width:c,fontSize:u,rows:f,onEllipsis:m}=e;const[[g,E,y],T]=C.useState([0,0,0]),[R,P]=C.useState(Ofe),[O,N]=C.useState(0),M=C.useRef(null),D=C.useRef(null),x=C.useMemo(()=>ld(a),[a]),k=C.useMemo(()=>wfe(x),[x]),V=C.useMemo(()=>!t||R!==OP?i(x,!1):i(e5(x,E),E<k),[t,R,i,x,E,k]);Ti(()=>{t&&c&&u&&k&&(P(oR),T([0,Math.ceil(k/2),k]))},[t,c,u,a,k,f]),Ti(()=>{var K;R===oR&&N(((K=M.current)===null||K===void 0?void 0:K.offsetHeight)||0)},[R]),Ti(()=>{var K,Q;if(O){if(R===oR){const z=((K=D.current)===null||K===void 0?void 0:K.offsetHeight)||0,ie=f*O;z<=ie?(P(n5),m(!1)):P(t5)}else if(R===t5)if(g!==y){const z=((Q=D.current)===null||Q===void 0?void 0:Q.offsetHeight)||0,ie=f*O;let J=g,Y=y;g===y-1?Y=g:z<=ie?J=E:Y=E;const oe=Math.ceil((J+Y)/2);T([J,oe,Y])}else P(OP),m(!0)}},[R,g,y,f,O]);const H={width:c,whiteSpace:"normal",margin:0,padding:0},$=(K,Q,z)=>C.createElement("span",{"aria-hidden":!0,ref:Q,style:Object.assign({position:"fixed",display:"block",left:0,top:0,zIndex:-9999,visibility:"hidden",pointerEvents:"none",fontSize:Math.floor(u/2)*2},z)},K),G=(K,Q)=>{const z=e5(x,K);return $(i(z,!0),Q,H)};return C.createElement(C.Fragment,null,V,t&&R!==OP&&R!==n5&&C.createElement(C.Fragment,null,$("lg",M,{wordBreak:"keep-all",whiteSpace:"nowrap"}),R===oR?$(i(x,!1),D,H):G(E,D)))},Nfe=Afe,xfe=e=>{let{enabledEllipsis:t,isEllipsis:i,children:a,tooltipProps:c}=e;return!(c!=null&&c.title)||!t?a:C.createElement(yS,Object.assign({open:i?void 0:!1},c),a)},Pfe=xfe;var Dfe=globalThis&&globalThis.__rest||function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(i[a[c]]=e[a[c]]);return i};function Lfe(e,t){let{mark:i,code:a,underline:c,delete:u,strong:f,keyboard:m,italic:g}=e,E=t;function y(T,R){R&&(E=C.createElement(T,{},E))}return y("strong",f),y("u",c),y("del",u),y("code",a),y("mark",i),y("kbd",m),y("i",g),E}function aR(e,t,i){return e===!0||e===void 0?t:e||i&&t}function r5(e){return e===!1?[!1,!1]:Array.isArray(e)?e:[e]}const kfe="...",Mfe=C.forwardRef((e,t)=>{var i,a,c;const{prefixCls:u,className:f,style:m,type:g,disabled:E,children:y,ellipsis:T,editable:R,copyable:P,component:O,title:N}=e,M=Dfe(e,["prefixCls","className","style","type","disabled","children","ellipsis","editable","copyable","component","title"]),{getPrefixCls:D,direction:x}=C.useContext(wr),[k]=b7("Text"),V=C.useRef(null),H=C.useRef(null),$=D("typography",u),G=ys(M,["mark","code","delete","underline","strong","keyboard","italic"]),[K,Q]=wP(R),[z,ie]=rd(!1,{value:Q.editing}),{triggerType:J=["icon"]}=Q,Y=Qe=>{var Tt;Qe&&((Tt=Q.onStart)===null||Tt===void 0||Tt.call(Q)),ie(Qe)};Ife(()=>{var Qe;z||(Qe=H.current)===null||Qe===void 0||Qe.focus()},[z]);const oe=Qe=>{Qe==null||Qe.preventDefault(),Y(!0)},ue=Qe=>{var Tt;(Tt=Q.onChange)===null||Tt===void 0||Tt.call(Q,Qe),Y(!1)},he=()=>{var Qe;(Qe=Q.onCancel)===null||Qe===void 0||Qe.call(Q),Y(!1)},[Se,ve]=wP(P),[Re,Ce]=C.useState(!1),pe=C.useRef(null),fe={};ve.format&&(fe.format=ve.format);const _e=()=>{pe.current&&clearTimeout(pe.current)},ge=Qe=>{var Tt;Qe==null||Qe.preventDefault(),Qe==null||Qe.stopPropagation(),hfe(ve.text||String(y)||"",fe),Ce(!0),_e(),pe.current=setTimeout(()=>{Ce(!1)},3e3),(Tt=ve.onCopy)===null||Tt===void 0||Tt.call(ve,Qe)};C.useEffect(()=>_e,[]);const[Ue,Fe]=C.useState(!1),[ot,qe]=C.useState(!1),[wt,kt]=C.useState(!1),[_t,vt]=C.useState(!1),[At,it]=C.useState(!1),[Mt,rn]=C.useState(!0),[Ft,ft]=wP(T,{expandable:!1}),dt=Ft&&!wt,{rows:at=1}=ft,ht=C.useMemo(()=>!dt||ft.suffix!==void 0||ft.onEllipsis||ft.expandable||K||Se,[dt,ft,K,Se]);Ti(()=>{Ft&&!ht&&(Fe(a6("webkitLineClamp")),qe(a6("textOverflow")))},[ht,Ft]);const Ot=C.useMemo(()=>ht?!1:at===1?ot:Ue,[ht,ot,Ue]),Vt=dt&&(Ot?At:_t),zt=dt&&at===1&&Ot,Kt=dt&&at>1&&Ot,mn=Qe=>{var Tt;kt(!0),(Tt=ft.onExpand)===null||Tt===void 0||Tt.call(ft,Qe)},[Hn,Zr]=C.useState(0),[yr,or]=C.useState(0),Ln=(Qe,Tt)=>{let{offsetWidth:Un}=Qe;var an;Zr(Un),or(parseInt((an=window.getComputedStyle)===null||an===void 0?void 0:an.call(window,Tt).fontSize,10)||0)},Gr=Qe=>{var Tt;vt(Qe),_t!==Qe&&((Tt=ft.onEllipsis)===null||Tt===void 0||Tt.call(ft,Qe))};C.useEffect(()=>{const Qe=V.current;if(Ft&&Ot&&Qe){const Tt=Kt?Qe.offsetHeight<Qe.scrollHeight:Qe.offsetWidth<Qe.scrollWidth;At!==Tt&&it(Tt)}},[Ft,Ot,y,Kt,Mt]),C.useEffect(()=>{const Qe=V.current;if(typeof IntersectionObserver>"u"||!Qe||!Ot||!dt)return;const Tt=new IntersectionObserver(()=>{rn(!!Qe.offsetParent)});return Tt.observe(Qe),()=>{Tt.disconnect()}},[Ot,dt]);let Wn={};ft.tooltip===!0?Wn={title:(i=Q.text)!==null&&i!==void 0?i:y}:C.isValidElement(ft.tooltip)?Wn={title:ft.tooltip}:typeof ft.tooltip=="object"?Wn=Object.assign({title:(a=Q.text)!==null&&a!==void 0?a:y},ft.tooltip):Wn={title:ft.tooltip};const hn=C.useMemo(()=>{const Qe=Tt=>["string","number"].includes(typeof Tt);if(!(!Ft||Ot)){if(Qe(Q.text))return Q.text;if(Qe(y))return y;if(Qe(N))return N;if(Qe(Wn.title))return Wn.title}},[Ft,Ot,N,Wn.title,Vt]);if(z)return C.createElement(Cfe,{value:(c=Q.text)!==null&&c!==void 0?c:typeof y=="string"?y:"",onSave:ue,onCancel:he,onEnd:Q.onEnd,prefixCls:$,className:f,style:m,direction:x,component:O,maxLength:Q.maxLength,autoSize:Q.autoSize,enterIcon:Q.enterIcon});const fn=()=>{const{expandable:Qe,symbol:Tt}=ft;if(!Qe)return null;let Un;return Tt?Un=Tt:Un=k==null?void 0:k.expand,C.createElement("a",{key:"expand",className:`${$}-expand`,onClick:mn,"aria-label":k==null?void 0:k.expand},Un)},Ro=()=>{if(!K)return;const{icon:Qe,tooltip:Tt}=Q,Un=ld(Tt)[0]||(k==null?void 0:k.edit),an=typeof Un=="string"?Un:"";return J.includes("icon")?C.createElement(yS,{key:"edit",title:Tt===!1?"":Un},C.createElement(Q6,{ref:H,className:`${$}-edit`,onClick:oe,"aria-label":an},Qe||C.createElement(Qhe,{role:"button"}))):null},zi=()=>{if(!Se)return;const{tooltips:Qe,icon:Tt}=ve,Un=r5(Qe),an=r5(Tt),Ki=Re?aR(Un[1],k==null?void 0:k.copied):aR(Un[0],k==null?void 0:k.copy),hi=Re?k==null?void 0:k.copied:k==null?void 0:k.copy,Cr=typeof Ki=="string"?Ki:hi;return C.createElement(yS,{key:"copy",title:Ki},C.createElement(Q6,{className:nt(`${$}-copy`,Re&&`${$}-copy-success`),onClick:ge,"aria-label":Cr},Re?aR(an[1],C.createElement(xce,null),!0):aR(an[0],C.createElement(qhe,null),!0)))},ei=Qe=>[Qe&&fn(),Ro(),zi()],Gn=Qe=>[Qe&&C.createElement("span",{"aria-hidden":!0,key:"ellipsis"},kfe),ft.suffix,ei(Qe)];return C.createElement(yp,{onResize:Ln,disabled:!dt||Ot},Qe=>C.createElement(Pfe,{tooltipProps:Wn,enabledEllipsis:dt,isEllipsis:Vt},C.createElement(a9,Object.assign({className:nt({[`${$}-${g}`]:g,[`${$}-disabled`]:E,[`${$}-ellipsis`]:Ft,[`${$}-single-line`]:dt&&at===1,[`${$}-ellipsis-single-line`]:zt,[`${$}-ellipsis-multiple-line`]:Kt},f),prefixCls:u,style:Object.assign(Object.assign({},m),{WebkitLineClamp:Kt?at:void 0}),component:O,ref:Ol(Qe,V,t),direction:x,onClick:J.includes("text")?oe:void 0,"aria-label":hn==null?void 0:hn.toString(),title:N},G),C.createElement(Nfe,{enabledMeasure:dt&&!Ot,text:y,rows:at,width:Hn,fontSize:yr,onEllipsis:Gr},(Tt,Un)=>{let an=Tt;return Tt.length&&Un&&hn&&(an=C.createElement("span",{key:"show-content","aria-hidden":!0},an)),Lfe(e,C.createElement(C.Fragment,null,an,Gn(Un)))}))))}),PI=Mfe;var Ufe=globalThis&&globalThis.__rest||function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(i[a[c]]=e[a[c]]);return i};const Ffe=C.forwardRef((e,t)=>{var{ellipsis:i,rel:a}=e,c=Ufe(e,["ellipsis","rel"]);const u=Object.assign(Object.assign({},c),{rel:a===void 0&&c.target==="_blank"?"noopener noreferrer":a});return delete u.navigate,C.createElement(PI,Object.assign({},u,{ref:t,ellipsis:!!i,component:"a"}))}),Vfe=Ffe,jfe=C.forwardRef((e,t)=>C.createElement(PI,Object.assign({ref:t},e,{component:"div"}))),Bfe=jfe;var $fe=globalThis&&globalThis.__rest||function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(i[a[c]]=e[a[c]]);return i};const Hfe=(e,t)=>{var{ellipsis:i}=e,a=$fe(e,["ellipsis"]);const c=C.useMemo(()=>i&&typeof i=="object"?ys(i,["expandable","rows"]):i,[i]);return C.createElement(PI,Object.assign({ref:t},a,{ellipsis:c,component:"span"}))},Wfe=C.forwardRef(Hfe);var Gfe=globalThis&&globalThis.__rest||function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(i[a[c]]=e[a[c]]);return i};const zfe=[1,2,3,4,5],Kfe=C.forwardRef((e,t)=>{const{level:i=1}=e,a=Gfe(e,["level"]);let c;return zfe.includes(i)?c=`h${i}`:c="h1",C.createElement(PI,Object.assign({ref:t},a,{component:c}))}),qfe=Kfe,HS=a9;HS.Text=Wfe;HS.Link=Vfe;HS.Title=qfe;HS.Paragraph=Bfe;const ja=HS;function c9(e){var t,i,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(i=c9(e[t]))&&(a&&(a+=" "),a+=i);else for(t in e)e[t]&&(a&&(a+=" "),a+=t);return a}function hM(){for(var e,t,i=0,a="";i<arguments.length;)(e=arguments[i++])&&(t=c9(e))&&(a&&(a+=" "),a+=t);return a}const Yfe=C.forwardRef(({className:e,children:t},i)=>le.jsx("div",{className:hM(e,"b-1 b-solid b-coolgray-6 rd of-hidden relative"),ref:i,style:{width:288,height:216},children:t})),xc=Object.assign(C.forwardRef(({className:e,children:t},i)=>le.jsx("div",{className:hM(e,"flex-1 p-10 p-t-4 flex gap-5"),ref:i,children:t})),{Item:Yfe}),lo=({children:e})=>le.jsx("div",{className:"h-screen flex flex-col",children:e}),fd=({children:e})=>le.jsx("samp",{className:"z-2 inline-flex items-center gap-1 absolute bottom-0 bg-black c-white px-1 text-sm",children:e}),sR=14,cR=8,AP=8,NP=4;function Xfe({volumeLevel:e=0,noise:t=.075,...i}){const[a,c]=C.useState(0);return C.useEffect(()=>{if(e&&t){const u=Math.max(0,Math.min(1,t)),f=setInterval(()=>{c(e+Math.random()*u*(Math.random()>.5?1:-1))},50);return()=>clearInterval(f)}},[e,t]),le.jsxs("svg",{fill:"none",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",...i,children:[le.jsx("defs",{children:le.jsx("clipPath",{id:"icon-mic-v-clip",children:le.jsx("rect",{height:sR,rx:cR/2,width:cR,x:AP,y:NP})})}),le.jsx("path",{d:"M0 0h24v24H0z",fill:"#999CA3",opacity:".01"}),le.jsx("rect",{clipPath:"url(#icon-mic-v-clip)",fill:"#fff",height:sR,width:cR,x:AP,y:NP}),le.jsx("path",{d:"M4 16.625h2v-1.25H4v1.25Zm6 4h4v-1.25h-4v1.25Zm8-4h2v-1.25h-2v1.25Zm-4 4A4.625 4.625 0 0 0 18.625 16h-1.25A3.375 3.375 0 0 1 14 19.375v1.25ZM5.375 16A4.625 4.625 0 0 0 10 20.625v-1.25A3.375 3.375 0 0 1 6.625 16h-1.25Z",fill:"#fff"}),le.jsx("g",{clipPath:"url(#icon-mic-v-clip)",children:le.jsx("rect",{fill:"#44AD00",height:sR*2,style:{transform:`translateY(${(1-a)*sR}px)`,transition:"transform .1s"},width:cR,x:AP,y:NP})})]})}const Jfe=C.memo(function(t){return le.jsxs("svg",{fill:"none",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",...t,children:[le.jsx("path",{d:"m5 5 14 14",stroke:"rgb(225, 225, 225, 0.35)",strokeLinejoin:"round",strokeWidth:"1.25"}),le.jsx("path",{clipRule:"evenodd",d:"M19.277 16.625H20v-1.25h-1.973l1.25 1.25Zm-3.239 2.065.89.89a4.602 4.602 0 0 1-2.716 1.04l-.212.005h-4a4.626 4.626 0 0 1-4.55-3.787l-.033-.213H4v-1.25h2c.345 0 .625.28.625.625a3.375 3.375 0 0 0 3.19 3.37l.185.005h4a3.36 3.36 0 0 0 2.038-.685Zm.587-4.717V8a4.625 4.625 0 0 0-8.5-2.526l.911.91a3.374 3.374 0 0 1 6.281.991H14v1.25h1.375v.75H14v1.25h1.375v.75h-1.348l1.25 1.25h.098v.098l1.25 1.25Zm-2.587 2.717.89.89A4.625 4.625 0 0 1 7.375 14v-3.973l1.25 1.25v.098h.098l1.25 1.25H8.625V14a3.375 3.375 0 0 0 5.413 2.69Z",fill:"rgb(225, 225, 225, 0.35)",fillRule:"evenodd"})]})}),Qfe=C.memo(function(t){return le.jsxs("svg",{fill:"none",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",...t,children:[le.jsx("circle",{cx:"12",cy:"11",r:"7",stroke:"#fff",strokeLinejoin:"round",strokeWidth:"1.25"}),le.jsx("circle",{cx:"12",cy:"11",r:"3",stroke:"#fff",strokeLinejoin:"round",strokeWidth:"1.25"}),le.jsx("circle",{cx:"14.625",cy:"6.625",fill:"#fff",r:".625"}),le.jsx("path",{d:"M7 18.25a8.004 8.004 0 0 0 10 0",stroke:"#fff",strokeLinejoin:"round",strokeWidth:"1.25"})]})}),Zfe=C.memo(function(t){return le.jsxs("svg",{fill:"none",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",...t,children:[le.jsx("path",{d:"m5 5 14 14",stroke:"rgb(225, 225, 225, 0.35)",strokeLinejoin:"round",strokeWidth:"1.25"}),le.jsx("path",{clipRule:"evenodd",d:"m15.72 18.373.91.909a8.63 8.63 0 0 1-9.788-.364l-.232-.18.78-.976a7.38 7.38 0 0 0 8.33.61Zm2.434-2.87A7.625 7.625 0 0 0 7.497 4.846l.897.896a6.375 6.375 0 0 1 8.864 8.864l.896.897Zm-3.857 1.446.952.951A7.625 7.625 0 0 1 5.1 7.751l.951.952a6.375 6.375 0 0 0 8.246 8.246Zm.956-4.348a3.625 3.625 0 0 0-4.854-4.854l.964.964a2.378 2.378 0 0 1 2.926 2.926l.964.964Zm-.628-5.351a.625.625 0 1 0 0-1.25.625.625 0 0 0 0 1.25Z",fill:"rgb(225, 225, 225, 0.35)",fillRule:"evenodd"})]})});function ps(e,t,i){return e.on(t,i),()=>e.off(t,i)}function epe(e){try{return e()}catch(t){console.error(t)}}function Ng(e){return()=>e.forEach(epe)}function fM(e,t){const i=setTimeout(e,t);return()=>clearTimeout(i)}function l9(){let e,t,i;function a(){if(t){const E=t;t=void 0,E()}}async function c(){if(i){const E=i;i=void 0;try{await E()}catch(y){console.error(y)}}}async function u(E){e=!0,await c();try{i=await E()}catch(y){console.error(y)}e=!1,a()}async function f(){e=!0,await c(),e=!1,a()}function m(E){e?t=()=>u(E):u(E)}function g(){e?t=f:f()}return{run:m,dispose:g}}const u9=typeof document<"u"?C.useLayoutEffect:C.useEffect;function tpe(e){return e!=null&&typeof e.then=="function"}function bp(){const e=C.useRef(!1);return C.useEffect(()=>(e.current=!1,()=>{e.current=!0}),[]),e}function npe(){const e=bp();function t(i,a){return new Promise(async(c,u)=>{try{const f=await i;e.current||c(f)}catch(f){e.current?a&&a(f):u(f)}})}return C.useCallback(t,[e])}function DI(e){const t=npe(),[i,a]=C.useState();return u9(()=>{tpe(e)?t(e).then(a):a(e)},[e,t]),i}function xg(e,t){const i=C.useRef();C.useEffect(()=>{const{run:a,dispose:c}=i.current||(i.current=l9());return a(e),c},t)}function rpe(e,t){const i=e.split("."),a=t.split("."),c=Math.max(i.length,a.length);for(let u=0;u<c;u++){const f=parseInt(i[u]||"0"),m=parseInt(a[u]||"0");if(f>m)return 1;if(f<m)return-1}return 0}const d9=C.createContext(null);function h9({client:e,children:t}){return le.jsx(d9.Provider,{value:e,children:t})}function ipe(e){const t=C.useContext(d9);return e||t}function Uc(e){const t=ipe(e);if(!t)throw new Error("Agora RTC client not found. Should be wrapped in <AgoraRTCProvider value={client} />");return t}function ope(e){const t=Uc(e),[i,a]=C.useState(t?t.connectionState:"DISCONNECTED");return C.useEffect(()=>{if(t){a(t.connectionState);let c;return Ng([ps(t,"connection-state-change",u=>{c==null||c(),u==="CONNECTED"?c=fM(()=>a(u),0):a(u)}),()=>c==null?void 0:c()])}else a("DISCONNECTED")},[t]),i}function xl(e){const t=Uc(e),[i,a]=C.useState(t?t.connectionState==="CONNECTED":!1);return C.useEffect(()=>{if(t){a(t.connectionState==="CONNECTED");let c;return Ng([ps(t,"connection-state-change",u=>{c==null||c(),c=fM(()=>a(u==="CONNECTED"),0)}),()=>c==null?void 0:c()])}else a(!1)},[t]),i}function LI(e){const t=Uc(e),[i,a]=C.useState(t==null?void 0:t.uid);return C.useEffect(()=>{if(t)return ps(t,"connection-state-change",c=>{if(c==="CONNECTED")return fM(()=>a(t.uid),0);c==="DISCONNECTED"&&a(void 0)})},[t]),i}class qs extends Error{constructor(i,a){var t=(...args)=>{super(...args);wb(this,"rtcMethod");wb(this,"rtcError");wb(this,"name","AgoraRTCReactException")};t(typeof a=="string"?a:a.message),this.rtcMethod=i,this.rtcError=a}log(i){console[i](this)}}function ra(e,t=!0,i){const a=Uc(i),c=xl(i),[u,f]=C.useState(!1),[m,g]=C.useState(0),[E,y]=C.useState(null),T=bp();return xg(async()=>{if(T.current||(y(null),g(0),f(!1)),t&&a){try{T.current||f(!0);const{appid:R,channel:P,token:O,uid:N}=typeof e=="function"?await e():e,M=await a.join(R,P,O,N);T.current||g(M)}catch(R){console.error(R),T.current||y(new qs("IAgoraRTCClient.join",R))}return T.current||f(!1),()=>{for(const R of a.localTracks)R.isPlaying&&R.stop(),R.close();return a.leave()}}},[t,i]),{data:m,isLoading:u,isConnected:c,error:E}}const i5=()=>({uplink:0,downlink:0,delay:0});function ape(e){const t=Uc(e),[i,a]=C.useState(i5);return C.useEffect(()=>{if(t)return ps(t,"network-quality",c=>a({uplink:c.uplinkNetworkQuality,downlink:c.downlinkNetworkQuality,delay:t.getRTCStats().RTT??0}));a(i5())},[t]),i}function Pg(e,t=!0,i){const a=Uc(i),c=xl(i),u=C.useRef([]),[f,m]=C.useState(!1),[g,E]=C.useState(null),y=bp();return xg(async()=>{if(y.current||(m(!1),E(null)),!a||!c||!t)return;const T=e.filter(Boolean),R=N=>{const M=rpe(dp.VERSION,"4.18.2")>=0;return M||new qs("usePublish","please check your agora-rtc-sdk-ng version in package.json, it's recommend upgrade to >= 4.18.2").log("warn"),M?a.mode!=="live"||a.role!=="audience":!0},P=N=>u.current.some(M=>M&&M.getTrackId()===N.getTrackId()),O=N=>R()&&N.enabled&&t&&!P(N);for(let N=0;N<T.length;N++){const M=T[N];if(M&&O(M)){try{y.current||m(!0),await a.publish(M)}catch(D){console.error(D),y.current||E(new qs("IAgoraRTCClient.publish",D))}y.current||m(!1)}}u.current=T},[c,t,a,e]),{isLoading:f,error:g}}function Dg(e=!0,t={ANS:!0,AEC:!0},i){const a=xl(i),[c,u]=C.useState(null),[f,m]=C.useState(!1),[g,E]=C.useState(null),y=bp();return xg(async()=>{if(a&&e&&!c){try{y.current||m(!0);const T=await dp.createMicrophoneAudioTrack(t);y.current||u(T)}catch(T){console.error(T),y.current||E(new qs("IAgoraRTC.createMicrophoneAudioTrack",T))}y.current||m(!1)}!a&&!y.current&&u(null)},[a,e]),{localMicrophoneTrack:c,isLoading:f,error:g}}function Lg(e=!0,t){const i=xl(t),[a,c]=C.useState(null),[u,f]=C.useState(!1),[m,g]=C.useState(null),E=bp();return xg(async()=>{if(E.current||(f(!1),g(null)),i&&e&&!a){try{E.current||f(!0);const y=await dp.createCameraVideoTrack();E.current||c(y)}catch(y){console.error(y),E.current||g(new qs("IAgoraRTC.createCameraVideoTrack",y))}E.current||f(!1)}!i&&!E.current&&c(null)},[i,e]),{localCameraTrack:a,isLoading:u,error:m}}function WS(e,t){const i=Uc(t),[a,c]=C.useState([]),u=xl(),f=C.useRef([]),[m,g]=C.useState(!1),[E,y]=C.useState(null),T=bp();return xg(async()=>{if(T.current||y(null),!Array.isArray(e)||!u)return;const R=async N=>{if(!N.audioTrack&&e.some(({uid:M})=>N.uid===M)){try{T.current||g(!0),await i.subscribe(N,"audio")}catch(M){console.error(M),T.current||y(new qs("IAgoraRTCClient.subscribe",M))}N.audioTrack&&!f.current.some(M=>M.getUserId()===N.uid)&&f.current.push(N.audioTrack),f.current=f.current.map(M=>N.audioTrack&&M.getUserId()===N.uid&&M.getTrackId()!==N.audioTrack.getTrackId()?N.audioTrack:M),T.current||(c(f.current),g(!1))}},P=async N=>{if(e.some(({uid:M})=>N.uid===M)){T.current||(f.current=f.current.filter(M=>M.getUserId()!==N.uid),c(f.current));try{T.current||g(!0),await i.unsubscribe(N,"audio")}catch(M){console.error(M),T.current||y(new qs("IAgoraRTCClient.unsubscribe",M))}T.current||g(!1)}};e.map(N=>{!N.audioTrack&&N.hasAudio&&R(N)});const O=[];for(let N=0;N<f.current.length;N++){const M=f.current[N];if(!e.some(D=>D.uid===M.getUserId())){const D=i.remoteUsers.find(x=>x.uid===M.getUserId());D&&(O.push({user:D,mediaType:"audio"}),f.current.splice(N,1),N--)}}if(O.length>0){try{T.current||g(!0),await i.massUnsubscribe(O)}catch(N){console.error(N),T.current||y(new qs("IAgoraRTCClient.massUnsubscribe",N))}T.current||(c(f.current.slice()),g(!1))}return Ng([ps(i,"user-published",(N,M)=>{e.find(D=>D.uid===N.uid)&&M==="audio"&&R(N)}),ps(i,"user-unpublished",(N,M)=>{e.find(D=>D.uid===N.uid)&&M==="audio"&&P(N)})])},[u,i,e]),{audioTracks:a,isLoading:m,error:E}}function GS(e,t){const i=Uc(t),[a,c]=C.useState([]),u=xl(),f=C.useRef([]),[m,g]=C.useState(!1),[E,y]=C.useState(null),T=bp();return xg(async()=>{if(T.current||y(null),!Array.isArray(e)||!u)return;const R=async N=>{if(!N.videoTrack&&e.some(({uid:M})=>N.uid===M)){try{T.current||g(!0),await i.subscribe(N,"video")}catch(M){console.error(M),T.current||y(new qs("IAgoraRTCClient.subscribe",M))}N.videoTrack&&!f.current.some(M=>M.getUserId()===N.uid)&&f.current.push(N.videoTrack),f.current=f.current.map(M=>N.videoTrack&&M.getUserId()===N.uid&&M.getTrackId()!==N.videoTrack.getTrackId()?N.videoTrack:M),T.current||(c(f.current),g(!1))}},P=async N=>{if(e.some(({uid:M})=>N.uid===M)){T.current||(f.current=f.current.filter(M=>M.getUserId()!==N.uid),c(f.current));try{T.current||g(!0),await i.unsubscribe(N,"video")}catch(M){console.error(M),T.current||y(new qs("IAgoraRTCClient.unsubscribe",M))}T.current||g(!1)}};e.map(N=>{!N.videoTrack&&N.hasVideo&&R(N)});const O=[];for(let N=0;N<f.current.length;N++){const M=f.current[N];if(!e.some(D=>D.uid===M.getUserId())){const D=i.remoteUsers.find(x=>x.uid===M.getUserId());D&&(O.push({user:D,mediaType:"video"}),f.current.splice(N,1),N--)}}if(O.length>0){try{T.current||g(!0),await i.massUnsubscribe(O)}catch(N){console.error(N),T.current||y(new qs("IAgoraRTCClient.massUnsubscribe",N))}T.current||(c(f.current.slice()),g(!1))}return Ng([ps(i,"user-published",(N,M)=>{e.find(D=>D.uid===N.uid)&&M==="video"&&R(N)}),ps(i,"user-unpublished",(N,M)=>{e.find(D=>D.uid===N.uid)&&M==="video"&&P(N)})])},[u,i,e]),{videoTracks:a,isLoading:m,error:E}}function o5(e,t,i){const a=Uc(i),c=t==="audio"?"audioTrack":"videoTrack",[u,f]=C.useState(e&&e[c]),m=xl(),g=C.useRef(),[E,y]=C.useState(!1),[T,R]=C.useState(null);return C.useEffect(()=>{if(!e||!m)return;let P=!1;P||R(null);const O=t==="audio"?"hasAudio":"hasVideo",N=e.uid,M=async(k,V)=>{if(k[c]&&a.remoteUsers.some(({uid:H})=>k.uid===H))try{P||y(!0),await a.unsubscribe(k,V)}catch(H){P||R(new qs("IAgoraRTCClient.unsubscribe",H)),console.error(H)}P||(f(void 0),y(!1))},D=async(k,V)=>{try{!k[c]&&a.remoteUsers.some(({uid:H})=>k.uid===H)&&(P||y(!0),await a.subscribe(k,V)),P||f(k[c])}catch(H){P||R(new qs("IAgoraRTCClient.subscribe",H)),console.error(H)}P||y(!1)},x=g.current||(g.current=l9());return!e[c]&&e[O]?x.run(()=>D(e,t)):f(e[c]),Ng([()=>{P=!0,x.dispose()},ps(a,"user-published",(k,V)=>{k.uid===N&&V===t&&x.run(()=>D(k,t))}),ps(a,"user-unpublished",(k,V)=>{k.uid===N&&V===t&&x.run(()=>M(k,t))})])},[m,a,e,t,c]),{track:u,isLoading:E,error:T}}function bu(e){const t=Uc(e),[i,a]=C.useState(t?t.remoteUsers:[]);return C.useEffect(()=>{if(t){const c=()=>a(t.remoteUsers.slice());return Ng([ps(t,"user-joined",c),ps(t,"user-left",c),ps(t,"user-published",c),ps(t,"user-unpublished",c)])}},[t]),i}const f9=C.createContext(void 0);function pM(e,t,i){const a=C.useContext(f9);C.useEffect(()=>{if(e)return i&&t?e.play(i):e.stop(),a?(a.onMount(e),()=>a.onUnmount(e)):()=>{e.isPlaying&&e.stop()}},[e,i,t,a])}function mM(e,t){const i=C.useContext(f9);u9(()=>{if(e)return t?e.play():e.stop(),i?(i.onMount(e),()=>i.onUnmount(e)):()=>{e.isPlaying&&e.stop()}},[e,t,i])}function gM({track:e,play:t=!1,volume:i,disabled:a,muted:c,children:u}){const f=DI(e);return mM(f,t),C.useEffect(()=>{f&&i!=null&&f.setVolume(i)},[f,i]),C.useEffect(()=>{f&&a!=null&&f.setEnabled(!a).catch(console.warn)},[a,f]),C.useEffect(()=>{f&&c!=null&&f.setMuted(c).catch(console.warn)},[c,f]),u?le.jsx(le.Fragment,{children:u}):null}const kI={position:"relative",width:"100%",height:"100%",overflow:"hidden",background:"#000"},p9={width:"100%",height:"100%"},zS={position:"absolute",top:0,left:0,width:"100%",height:"100%",overflow:"hidden",zIndex:2},kg=(e,t)=>C.useMemo(()=>({...e,...t}),[e,t]);function vM({track:e,play:t,disabled:i,muted:a,style:c,...u}){const f=kg(p9,c),[m,g]=C.useState(null),E=DI(e);return pM(E,t,m),C.useEffect(()=>{E&&i!=null&&E.setEnabled(!i).catch(console.warn)},[i,E]),C.useEffect(()=>{E&&a!=null&&E.setMuted(a).catch(console.warn)},[a,E]),le.jsx("div",{...u,ref:g,style:f})}const spe={width:"100%",height:"100%",background:"#1a1e21 center/cover no-repeat",filter:"blur(16px) brightness(0.4)"},cpe={position:"absolute",top:"50%",left:"50%",maxWidth:"50%",maxHeight:"50%",aspectRatio:"1",transform:"translate(-50%, -50%)",borderRadius:"50%",overflow:"hidden",objectFit:"cover"};function MI({cover:e}){return le.jsx("div",{style:zS,children:typeof e=="string"?le.jsxs(le.Fragment,{children:[le.jsx("div",{style:{...spe,backgroundImage:`url(${e})`}}),le.jsx("img",{src:e,style:cpe})]}):e()})}function m9({micOn:e,cameraOn:t,audioTrack:i,videoTrack:a,playAudio:c,playVideo:u,volume:f,cover:m,children:g,style:E,...y}){const T=kg(kI,E);return u=u??!!t,c=c??!!e,le.jsxs("div",{...y,style:T,children:[le.jsx(vM,{disabled:!t,play:u,track:a}),le.jsx(gM,{disabled:!e,play:c,track:i,volume:f}),m&&!t&&le.jsx(MI,{cover:m}),le.jsx("div",{style:zS,children:g})]})}function g9({track:e,play:t=!1,playbackDeviceId:i,volume:a,children:c}){return mM(e,t),C.useEffect(()=>{e&&i!=null&&e.setPlaybackDevice(i).catch(console.warn)},[e,i]),C.useEffect(()=>{e&&a!=null&&e.setVolume(a)},[e,a]),c?le.jsx(le.Fragment,{children:c}):null}function EM({track:e,play:t,style:i,...a}){const c=kg(p9,i),[u,f]=C.useState(null);return pM(e,t,u),le.jsx("div",{...a,ref:f,style:c})}function _M({user:e,playVideo:t,playAudio:i,playbackDeviceId:a,volume:c,cover:u,style:f,children:m,...g}){const E=kg(kI,f),{track:y}=o5(e,"video"),{track:T}=o5(e,"audio");return t=t??(e==null?void 0:e.hasVideo),i=i??(e==null?void 0:e.hasAudio),le.jsxs("div",{...g,style:E,children:[le.jsx(EM,{play:t,track:y}),le.jsx(g9,{play:i,playbackDeviceId:a,track:T,volume:c}),u&&!t&&le.jsx(MI,{cover:u}),le.jsx("div",{style:zS,children:m})]})}function lpe({track:e,deviceId:t,...i}){const a=DI(e);return C.useEffect(()=>{a&&t!=null&&a.setDevice(t).catch(console.warn)},[t,a]),le.jsx(gM,{track:e,...i})}function upe({track:e,deviceId:t,...i}){const a=DI(e);return C.useEffect(()=>{a&&t!=null&&a.setDevice(t).catch(console.warn)},[t,a]),le.jsx(vM,{track:e,...i})}function SM({micOn:e,cameraOn:t,audioTrack:i,videoTrack:a,playAudio:c=!1,playVideo:u,micDeviceId:f,cameraDeviceId:m,volume:g,cover:E,children:y,style:T,...R}){const P=kg(kI,T);return u=u??!!t,c=c??!!e,le.jsxs("div",{...R,style:P,children:[le.jsx(upe,{deviceId:m,disabled:!t,play:u,track:a}),le.jsx(lpe,{deviceId:f,disabled:!e,play:c,track:i,volume:g}),E&&!t&&le.jsx(MI,{cover:E}),le.jsx("div",{style:zS,children:y})]})}function KS({track:e,playVideo:t,cover:i,client:a,style:c,children:u,...f}){var y,T;const m=kg(kI,c),E=(T=(y=Uc(a).remoteUsers)==null?void 0:y.find(R=>R.uid===(e==null?void 0:e.getUserId())))==null?void 0:T.hasVideo;return t=t??E,le.jsxs("div",{...f,style:m,children:[le.jsx(EM,{play:t,track:e}),i&&!t&&le.jsx(MI,{cover:i}),le.jsx("div",{style:zS,children:u})]})}const yM=({published:e,total:t})=>le.jsx("div",{className:"p-4 text-xl",children:le.jsxs("span",{className:"inline-flex items-center gap-1 py-2 px-3 rd b-1 b-solid",children:[le.jsx("i",{className:"i-lucide-users"}),le.jsxs("samp",{className:"text-base",children:[e,"/",t]})]})});var CM={exports:{}};CM.exports;(function(e){(function(t,i,a){function c(g){var E=this,y=m();E.next=function(){var T=2091639*E.s0+E.c*23283064365386963e-26;return E.s0=E.s1,E.s1=E.s2,E.s2=T-(E.c=T|0)},E.c=1,E.s0=y(" "),E.s1=y(" "),E.s2=y(" "),E.s0-=y(g),E.s0<0&&(E.s0+=1),E.s1-=y(g),E.s1<0&&(E.s1+=1),E.s2-=y(g),E.s2<0&&(E.s2+=1),y=null}function u(g,E){return E.c=g.c,E.s0=g.s0,E.s1=g.s1,E.s2=g.s2,E}function f(g,E){var y=new c(g),T=E&&E.state,R=y.next;return R.int32=function(){return y.next()*4294967296|0},R.double=function(){return R()+(R()*2097152|0)*11102230246251565e-32},R.quick=R,T&&(typeof T=="object"&&u(T,y),R.state=function(){return u(y,{})}),R}function m(){var g=4022871197,E=function(y){y=String(y);for(var T=0;T<y.length;T++){g+=y.charCodeAt(T);var R=.02519603282416938*g;g=R>>>0,R-=g,R*=g,g=R>>>0,R-=g,g+=R*4294967296}return(g>>>0)*23283064365386963e-26};return E}i&&i.exports?i.exports=f:a&&a.amd?a(function(){return f}):this.alea=f})(Xt,e,!1)})(CM);var dpe=CM.exports,TM={exports:{}};TM.exports;(function(e){(function(t,i,a){function c(m){var g=this,E="";g.x=0,g.y=0,g.z=0,g.w=0,g.next=function(){var T=g.x^g.x<<11;return g.x=g.y,g.y=g.z,g.z=g.w,g.w^=g.w>>>19^T^T>>>8},m===(m|0)?g.x=m:E+=m;for(var y=0;y<E.length+64;y++)g.x^=E.charCodeAt(y)|0,g.next()}function u(m,g){return g.x=m.x,g.y=m.y,g.z=m.z,g.w=m.w,g}function f(m,g){var E=new c(m),y=g&&g.state,T=function(){return(E.next()>>>0)/4294967296};return T.double=function(){do var R=E.next()>>>11,P=(E.next()>>>0)/4294967296,O=(R+P)/(1<<21);while(O===0);return O},T.int32=E.next,T.quick=T,y&&(typeof y=="object"&&u(y,E),T.state=function(){return u(E,{})}),T}i&&i.exports?i.exports=f:a&&a.amd?a(function(){return f}):this.xor128=f})(Xt,e,!1)})(TM);var hpe=TM.exports,bM={exports:{}};bM.exports;(function(e){(function(t,i,a){function c(m){var g=this,E="";g.next=function(){var T=g.x^g.x>>>2;return g.x=g.y,g.y=g.z,g.z=g.w,g.w=g.v,(g.d=g.d+362437|0)+(g.v=g.v^g.v<<4^(T^T<<1))|0},g.x=0,g.y=0,g.z=0,g.w=0,g.v=0,m===(m|0)?g.x=m:E+=m;for(var y=0;y<E.length+64;y++)g.x^=E.charCodeAt(y)|0,y==E.length&&(g.d=g.x<<10^g.x>>>4),g.next()}function u(m,g){return g.x=m.x,g.y=m.y,g.z=m.z,g.w=m.w,g.v=m.v,g.d=m.d,g}function f(m,g){var E=new c(m),y=g&&g.state,T=function(){return(E.next()>>>0)/4294967296};return T.double=function(){do var R=E.next()>>>11,P=(E.next()>>>0)/4294967296,O=(R+P)/(1<<21);while(O===0);return O},T.int32=E.next,T.quick=T,y&&(typeof y=="object"&&u(y,E),T.state=function(){return u(E,{})}),T}i&&i.exports?i.exports=f:a&&a.amd?a(function(){return f}):this.xorwow=f})(Xt,e,!1)})(bM);var fpe=bM.exports,RM={exports:{}};RM.exports;(function(e){(function(t,i,a){function c(m){var g=this;g.next=function(){var y=g.x,T=g.i,R,P;return R=y[T],R^=R>>>7,P=R^R<<24,R=y[T+1&7],P^=R^R>>>10,R=y[T+3&7],P^=R^R>>>3,R=y[T+4&7],P^=R^R<<7,R=y[T+7&7],R=R^R<<13,P^=R^R<<9,y[T]=P,g.i=T+1&7,P};function E(y,T){var R,P=[];if(T===(T|0))P[0]=T;else for(T=""+T,R=0;R<T.length;++R)P[R&7]=P[R&7]<<15^T.charCodeAt(R)+P[R+1&7]<<13;for(;P.length<8;)P.push(0);for(R=0;R<8&&P[R]===0;++R);for(R==8?P[7]=-1:P[R],y.x=P,y.i=0,R=256;R>0;--R)y.next()}E(g,m)}function u(m,g){return g.x=m.x.slice(),g.i=m.i,g}function f(m,g){m==null&&(m=+new Date);var E=new c(m),y=g&&g.state,T=function(){return(E.next()>>>0)/4294967296};return T.double=function(){do var R=E.next()>>>11,P=(E.next()>>>0)/4294967296,O=(R+P)/(1<<21);while(O===0);return O},T.int32=E.next,T.quick=T,y&&(y.x&&u(y,E),T.state=function(){return u(E,{})}),T}i&&i.exports?i.exports=f:a&&a.amd?a(function(){return f}):this.xorshift7=f})(Xt,e,!1)})(RM);var ppe=RM.exports,IM={exports:{}};IM.exports;(function(e){(function(t,i,a){function c(m){var g=this;g.next=function(){var y=g.w,T=g.X,R=g.i,P,O;return g.w=y=y+1640531527|0,O=T[R+34&127],P=T[R=R+1&127],O^=O<<13,P^=P<<17,O^=O>>>15,P^=P>>>12,O=T[R]=O^P,g.i=R,O+(y^y>>>16)|0};function E(y,T){var R,P,O,N,M,D=[],x=128;for(T===(T|0)?(P=T,T=null):(T=T+"\0",P=0,x=Math.max(x,T.length)),O=0,N=-32;N<x;++N)T&&(P^=T.charCodeAt((N+32)%T.length)),N===0&&(M=P),P^=P<<10,P^=P>>>15,P^=P<<4,P^=P>>>13,N>=0&&(M=M+1640531527|0,R=D[N&127]^=P+M,O=R==0?O+1:0);for(O>=128&&(D[(T&&T.length||0)&127]=-1),O=127,N=4*128;N>0;--N)P=D[O+34&127],R=D[O=O+1&127],P^=P<<13,R^=R<<17,P^=P>>>15,R^=R>>>12,D[O]=P^R;y.w=M,y.X=D,y.i=O}E(g,m)}function u(m,g){return g.i=m.i,g.w=m.w,g.X=m.X.slice(),g}function f(m,g){m==null&&(m=+new Date);var E=new c(m),y=g&&g.state,T=function(){return(E.next()>>>0)/4294967296};return T.double=function(){do var R=E.next()>>>11,P=(E.next()>>>0)/4294967296,O=(R+P)/(1<<21);while(O===0);return O},T.int32=E.next,T.quick=T,y&&(y.X&&u(y,E),T.state=function(){return u(E,{})}),T}i&&i.exports?i.exports=f:a&&a.amd?a(function(){return f}):this.xor4096=f})(Xt,e,!1)})(IM);var mpe=IM.exports,wM={exports:{}};wM.exports;(function(e){(function(t,i,a){function c(m){var g=this,E="";g.next=function(){var T=g.b,R=g.c,P=g.d,O=g.a;return T=T<<25^T>>>7^R,R=R-P|0,P=P<<24^P>>>8^O,O=O-T|0,g.b=T=T<<20^T>>>12^R,g.c=R=R-P|0,g.d=P<<16^R>>>16^O,g.a=O-T|0},g.a=0,g.b=0,g.c=-1640531527,g.d=1367130551,m===Math.floor(m)?(g.a=m/4294967296|0,g.b=m|0):E+=m;for(var y=0;y<E.length+20;y++)g.b^=E.charCodeAt(y)|0,g.next()}function u(m,g){return g.a=m.a,g.b=m.b,g.c=m.c,g.d=m.d,g}function f(m,g){var E=new c(m),y=g&&g.state,T=function(){return(E.next()>>>0)/4294967296};return T.double=function(){do var R=E.next()>>>11,P=(E.next()>>>0)/4294967296,O=(R+P)/(1<<21);while(O===0);return O},T.int32=E.next,T.quick=T,y&&(typeof y=="object"&&u(y,E),T.state=function(){return u(E,{})}),T}i&&i.exports?i.exports=f:a&&a.amd?a(function(){return f}):this.tychei=f})(Xt,e,!1)})(wM);var gpe=wM.exports,v9={exports:{}};(function(e){(function(t,i,a){var c=256,u=6,f=52,m="random",g=a.pow(c,u),E=a.pow(2,f),y=E*2,T=c-1,R;function P(V,H,$){var G=[];H=H==!0?{entropy:!0}:H||{};var K=D(M(H.entropy?[V,k(i)]:V??x(),3),G),Q=new O(G),z=function(){for(var ie=Q.g(u),J=g,Y=0;ie<E;)ie=(ie+Y)*c,J*=c,Y=Q.g(1);for(;ie>=y;)ie/=2,J/=2,Y>>>=1;return(ie+Y)/J};return z.int32=function(){return Q.g(4)|0},z.quick=function(){return Q.g(4)/4294967296},z.double=z,D(k(Q.S),i),(H.pass||$||function(ie,J,Y,oe){return oe&&(oe.S&&N(oe,Q),ie.state=function(){return N(Q,{})}),Y?(a[m]=ie,J):ie})(z,K,"global"in H?H.global:this==a,H.state)}function O(V){var H,$=V.length,G=this,K=0,Q=G.i=G.j=0,z=G.S=[];for($||(V=[$++]);K<c;)z[K]=K++;for(K=0;K<c;K++)z[K]=z[Q=T&Q+V[K%$]+(H=z[K])],z[Q]=H;(G.g=function(ie){for(var J,Y=0,oe=G.i,ue=G.j,he=G.S;ie--;)J=he[oe=T&oe+1],Y=Y*c+he[T&(he[oe]=he[ue=T&ue+J])+(he[ue]=J)];return G.i=oe,G.j=ue,Y})(c)}function N(V,H){return H.i=V.i,H.j=V.j,H.S=V.S.slice(),H}function M(V,H){var $=[],G=typeof V,K;if(H&&G=="object")for(K in V)try{$.push(M(V[K],H-1))}catch{}return $.length?$:G=="string"?V:V+"\0"}function D(V,H){for(var $=V+"",G,K=0;K<$.length;)H[T&K]=T&(G^=H[T&K]*19)+$.charCodeAt(K++);return k(H)}function x(){try{var V;return R&&(V=R.randomBytes)||(V=new Uint8Array(c),(t.crypto||t.msCrypto).getRandomValues(V)),k(V)}catch{var H=t.navigator,$=H&&H.plugins;return[+new Date,t,$,t.screen,k(i)]}}function k(V){return String.fromCharCode.apply(0,V)}D(a.random(),i),e.exports?e.exports=P:a["seed"+m]=P})(typeof self<"u"?self:Xt,[],Math)})(v9);var vpe=v9.exports,Epe=dpe,_pe=hpe,Spe=fpe,ype=ppe,Cpe=mpe,Tpe=gpe,Rp=vpe;Rp.alea=Epe;Rp.xor128=_pe;Rp.xorwow=Spe;Rp.xorshift7=ype;Rp.xor4096=Cpe;Rp.tychei=Tpe;var bpe=Rp;const E9=jh(bpe);let _9=E9();function Rpe(){return _9()}function a5(e){_9=E9(e)}function S9(e,t){const i=Array.isArray(e)?()=>Ipe(e):e;return(t==null?void 0:t.length)===void 0?i(0):Array.from({length:t.length},(a,c)=>i(c))}function Ipe(e){return e[Math.floor(Rpe()*e.length)]}function wpe(e,t){return S9(e,t)}var s5={withAccents:{male:["Adrián","Ægir","Álvaro","André","Andrés","Árni","Asbjørn","Björn","César","Daníel","Davíð","Emílio","Fañch","François","František","Gísli","Götz","Guðjón","Guðmundur","Günter","Halldór","Hans-Jörg","Hans-Jürgen","Hüseyin","Iñaki","János","Jesús","Jiří","Jóhann","Jóhannes","Jokūbas","Jón","José","Jörn","Julião","Jürgen","Kristján","Maël","Magnús","Mathéo","Mátyás","Michał","Noël","Nuñez","Ólafur","Óscar","Øyvind","Páll","Paweł","Pétur","Ramón","Raúl","René","Ruairí","Rubén","Seán","Sérgio","Sigurður","Sönke","Stefán","Tomáš","Þorsteinn"],female:["Ædel","Agnès","Alícia","Änne","Antónia","Ásta","Auður","Cäcilia","Chloë","Claúdia","Dörte","Elín","Elísabet","Eliška","Františka","Glória","Grażyna","Guðbjörg","Guðný","Guðrún","Henriëtte","Ingibjörg","Íris","Jóhanna","Jóna","Júlia","Käte","Katrín","Kolbrún","Kristín","KŠthe","Letícia","Lídia","Lúcia","Małgorzata","Margrét","María","Mónica","Natália","Ólöf","Patrícia","Ragnheiður","Renée","Ružena","Siân","Sigríður","Sigrún","Sílvia","Sørina","Věra","Virgínia","Zoë","Þóra","Þórunn"]},withoutAccents:{male:["Abdul","Abdullahi","Abubakar","Adam","Adamu","Adiy","Ahmad","Ajay","Akira","Alan","Alberto","Alejandro","Aleksander","Aleksandr","Aleksey","Alex","Alexander","Alexey","Ali","Aliyu","Aminu","Amit","Amiyr","Amiyt","Amnuai","Amphon","Anah","Anan","Andreas","Andrew","Andrey","Andri","Andries","Andrzej","Anil","Anthony","Anton","Antonio","Arnar","Artur","Artyom","Arun","Ashok","Atli","Avraham","Bartosz","Bello","Bernd","Bin","Birgir","Bjarni","Blessing","Bongani","Brian","Bunmi","Carlos","Carol","Chan","Chao","Charles","Charoen","Chen","Cheng","Christian","Christopher","Colin","Daniel","Daniyel","Dariusz","David","Denis","Dennis","Diego","Dieter","Dilip","Dinesh","Dmitriy","Dmitry","Einar","Eliyahu","Emmanuel","Evgeniy","Fernando","Fran","Francis","Francisco","Francisco-Javier","Frank","Franz","Gang","Gareth","Gary","George","Gerhard","Graham","Grzegorz","Gunnar","Guy","Haim","Haiyan","Hans","Hans-Ulrich","Haruna","Hassan","Heike","Heinz","Helgi","Helmut","Hendrik","Herbert","Hideo","Hiromi","Hiroshi","Hong","Horst","Hui","Ian","Ibrahim","Idris","Igor","Ilya","Isa","Isaac","Isah","Ivan","Jabulani","Jacek","Jacobus","Jakub","James","Jan","Janusz","Javier","Jean","Jerzy","Jesus","Jason","Jianguo","Jianhua","Jianjun","Jianping","Jin","Joan","Johan","Johannes","John","Jonathan","Jorge","Jose","Jose-Antonio","Jose-Luis","Jose-Manuel","Jose-Maria","Josef","Joseph","Joyce","Juan","Kabiru","Kai","Kamil","Karen","Karl","Karl-Heinz","Katsumi","Kazuo","Kelvin","Kenji","Kenneth","Kevin","Kiran","Kirill","Kiyoshi","Kjartan","Klaus","Ko","Koichi","Koji","Konstantin","Koshi","Krishna","Kristinn","Krzysztof","Kun","Lakshmi","Lan","Laxmi","Lei","Li","Lihua","Lijun","Lilian","Lin","Ling","Liping","Liyor","Luis","Lukasz","Maciej","Mahmood","Maksim","Manfred","Manoj","Manuel","Marcin","Mardkhay","Marek","Mariusz","Mark","Martin","Masami","Masao","Mateusz","Matt","Matthew","Meiyr","Michael","Michal","Miguel","Miguel-Angel","Mikhail","Min","Ming","Mitsuo","Miykhael","Miykhal","Mo","Mohamed","Mohammad","Mohammed","Mohan","Moses","Moshe","Mpho","Muhammad","Muhammed","Mukesh","Musa","Narong","Nathan","Nicola","Nikita","Nikolay","Ning","Nkosinathi","Noam","Oleg","Omer","Otieno","Pablo","Patrick","Paul","Pavel","Pawel","Pedro","Peng","Peter","Petrus","Philip","Pieter","Ping","Piotr","Prasit","Prasoet","Pricha","Pushpa","Qiang","Qing","Radha","Rafael","Ragnar","Raj","Rajendra","Rajesh","Raju","Rakesh","Ram","Ramesh","Raphael","Rattana","Ravi","Richard","Robert","Roman","Rong","Roy","Ryan","Salisu","Saman","Samran","Samuel","Sani","Sanjay","Santosh","Sam","Sammy","Sawat","Sebastian","Sergey","Sergio","Shankar","Shay","Shigeru","Shimon","Shlomo","Shoji","Sibusiso","Simon","Sipho","Sombat","Sombun","Somchai","Somchit","Somkhit","Somkiat","Sommai","Somnuek","Somphon","Somphong","Somsak","Sri","Stefan","Stephen","Steve","Steven","Suman","Sunday","Sunil","Sunthon","Suresh","Sushila","Suwit","Sveinn","Tadashi","Takashi","Takeshi","Tal","Tebogo","Thabo","Thawi","Themba","Thomas","Thulani","Tomasz","Toshio","Udom","Umar","Uriy","Usman","Uwe","Victor","Vijay","Viktor","Vincent","Vinod","Vladimir","Walter","Wanchai","Waraphon","Wei","Werner","Wichai","Wichian","Willem","William","Winai","Wirat","Wirot","Wojciech","Wolfgang","Xiang","Xiaohong","Xiaoli","Xiaoping","Xiaoyan","Xin","Xolani","Yaakv","Yahaya","Yakubu","Yan","Yasuo","Yhudah","Ying","Yisrael","Yong","Yosef","Yoshie","Yoshimi","Yoshio","Yu","Yue","Yukio","Yun","Yuriy","Yusuf","Yuval","Zbigniew","Zhen","Zhiqiang"],female:["Agata","Agnieszka","Aisha","Akira","Aleksandra","Alina","Alyona","Amina","Amnuai","Ana","Ana-Maria","Anah","Anan","Anastasiya","Andrea","Angela","Anita","Ann","Anna","Anong","Antonia","Asha","Barbara","Beata","Berglind","Bin","Birgit","Birna","Blessing","Brigitte","Bunmi","Busisiwe","Carmen","Carol","Caroline","Catherine","Chan","Chanah","Chao","Charoen","Chayah","Chen","Cheng","Christa","Christine","Claire","Claudia","Cristina","Darya","Dolores","Dorota","Edda","Ekaterina","Elena","Elisabeth","Elizabeth","Elke","Emiko","Emma","Erika","Erla","Erna","Ester","Esther","Eunice","Eva","Eugenia","Ewa","Faith","Fatima","Fiona","Fran","Francisca","Fumiko","Galina","Gabra","Gisela","Gita","Grace","Hadiza","Haiyan","Hanna","Haruna","Hauwa","Heike","Helen","Helga","Hildur","Hiroko","Hiromi","Hisako","Hong","Hui","Hulda","Inga","Ingrid","Irina","Isa","Isabel","Isah","Iwona","Jackline","Jan","Jane","Janet","Jean","Jennifer","Jianhua","Jianping","Jin","Joan","Joanna","Johanna","Josefa","Joy","Joyce","Juan","Julie","Justyna","Kai","Kanchana","Karen","Karin","Karolina","Kasia","Katarzyna","Katsumi","Keiko","Kiran","Kiyoko","Kristina","Kseniya","Kun","Lakshmi","Lalita","Lan","Latda","Laura","Laxmi","Leah","Lei","Li","Lihua","Lijun","Lilian","Lilja","Lin","Linda","Lindiwe","Ling","Liping","Lisa","Lucia","Lucy","Lyubov","Lyudmila","Magda","Magdalena","Mali","Manju","Margaret","Maria","Maria-Isabel","Maria-Jose","Maria-Pilar","Marina","Mariya","Marta","Martha","Mary","Maryam","Masako","Masami","Mei","Mercy","Michal","Michiko","Mieko","Min","Mina","Ming","Miriam","Miyoko","Mo","Monika","Mpho","Na","Nadezhda","Nan","Nancy","Natalya","Ngozi","Nicola","Ning","Nittaya","Noam","Nobuko","Nokuthula","Nonhlanhla","Noriko","Nushi","Olga","Omer","Patricia","Paula","Paulina","Peng","Petra","Phonthip","Pilar","Ping","Prani","Purity","Pushpa","Qing","Rachel","Radha","Rattana","Rebecca","Reiko","Rekha","Renate","Rita","Rong","Rosa","Rose","Rut","Ruth","Ryoko","Sabine","Sachiko","Samran","Santosh","Sara","Sarah","Sam","Sammy","Sawat","Shanti","Sharon","Shay","Shizuko","Shoshanah","Sibongile","Sita","Sombat","Sombun","Somchit","Somkhit","Sommai","Somnuek","Somphon","Somphong","Sri","Steinunn","Sukanya","Suman","Sunday","Sunita","Suphaphon","Susan","Susanne","Sushila","Svetlana","Takako","Tamar","Tatyana","Tal","Tebogo","Teruko","Thawi","Tomiko","Toshiko","Unnur","Urai","Urmila","Ursula","Usha","Valentina","Victoria","Wanjiru","Wanphen","Watsana","Wei","Wilai","Xiang","Xiaohong","Xiaoli","Xiaoping","Xiaoyan","Xin","Yael","Yan","Yasuko","Yelena","Yhudiyt","Ying","Yoko","Yong","Yoshie","Yoshiko","Yoshimi","Yu","Yue","Yuko","Yuliya","Yun","Yuval","Zainab","Zandile","Zanele","Zhen"]}};function Ope(e){var t,i;const a=(t=e==null?void 0:e.withAccents)!=null&&t,c=(i=e==null?void 0:e.gender)!=null?i:wpe(["male","female"]),u=e==null?void 0:e.locale;return S9(a?u?u==null?void 0:u.withAccents[c]:s5.withAccents[c]:u?u==null?void 0:u.withoutAccents[c]:s5.withoutAccents[c],e)}var Ape={china:["Peking roasted duck","Kung pao chicken","Sweet and sour pork","Hot pot","Dim sum","Dumplings","Ma po tofu","Char siu","Chicken chow mein","Beef chow mein","vegetable chow mein","Chicken fried rice","Beef fried rice","Vegetable fried Rice","Special fried Rice","Sichuan pork","Xiaolongbao","Zhajiangmian","Wonton soup","Sweet and sour pork","Duck spring Rolls","Vegetable spring Rolls","Wonton","Peking duck","Lamb hot pot","Spicy crayfish","Guilin rice noodles","Lanzhou hand-pulled noodles","Steamed crab","Shredded pork with garlic sauce","Red braised pork","Sweet and sour Ribs","Xinjiang","Braised pork with vermicelli"],italy:["Butternut squash risotto","Mushroom risotto","Beetroot risotto","Courgette risotto","Pizza","Gnocchi","Spaghetti bolognese","Spaghetti carbonara","Pesto alla Genovese","Beef lasagne","Vegetable lasagne","Gelato","Prosciutto di Parma","Ribollita","Bagna cauda","Polenta","Tortelli and ravioli","Focaccia","Garlic bread","Arancini","Il tartufo","Panzerotto fritto","Fiorentina","Minestrone","Frico","Arrosticini","Olive ascolante","Fritto misto piemontes","Tiramisù"],india:["Biryani","Dosa","Tandoori chicken","Samosas","Chaat","Plain naan","Garlic naan","Pilau rice","Steamed rice","Chicken madras","Vegetable madras","Chicken vindaloo","Chicken jalfrezi","Chicken roghan josh","Lamb roghan josh","Beef roghan josh","Butter chicken","Dosa","Gulab jamun","Chicken korma","Mutter paneer","Papadum","Paratha","Raita","Saag paneer","Tandoori chicken","Chicken tikka masala","Pakora","Dal","Chapati","Pasanda","Aloo gobi","Kofta","Chicken makhani","Paneer naan","Chana Aloo Curry"],mexico:["Chilaquiles","Pozole","Tacos al pastor","Tostadas","Chiles en nogada","Elote","Enchiladas","Mole","Guacamole","Tamales","Huevos rancheros","Machaca","Discada","Beef Burrito","Chicken Burrito","Pozole de pollo o duajolote","Menudo","Cochinita pibil","Tamale","Quesadilla","Frijoles puercos","Chile en nogada","Esquites","Alegria de amaranto","Pipián","Aguachile","Ceviche","Pescado zarandeado","Camarones a la diabla","Birria de chivo","Tlayuda","Guacamole con chapulines","Flautas","Torta Ahogada","Carnitas","Caldo Azteca","Gorditas de Nata"],japan:["Sushi","Udon","Tofu","Tempura","Yakitori","Sashimi","Ramen","Donburi","Natto","Oden","Tamagoyaki","Soba","Tonkatsu","Kashipan","Sukiyaki","Miso soup","Okonomiyaki","Mentaiko","Nikujaga","Unagi no kabayaki","Shabu Shabu","Onigiri","Gyoza","Takoyaki","aiseki ryori","Edamame","Yakisoba","Chawanmushi","Wagashi"],france:["Foie gras","Huîtres","Cassoulet","Poulet basquaise","Escargots au beurre persillé","Mouclade charentaise","Galettes bretonnes","Flemish carbonnade","Quiche lorraine","Raclette","Cheese fondue","Beef fondue","Gratin dauphinois","Tartiflette","Bouillabaisse","Ratatouille","Boeuf bourguignon","Blanquette de veau","Pot-au-feu","Coq-au-vin","Hachis parmentier","Steak tartare","Choucroute","Soufflé au fromage","Cuisses de grenouilles","Soupe à l’oignon","Baguette","Croissant","French cheeses","Fondant au chocolat","Tarte tatin","Macarons","Crème brûlée","Île flottante","Profiteroles","Pain au chocolat"],lebanon:["Kibbeh","Kafta","Kanafeh","Hummus","Rice pilaf","Fattoush","Manakish","Tabbouleh","Sfeeha","Fattoush","Labneh","Muhammara","Lahm bi ajin","Kaak","Chanklich","Mssabaha","Shawarma","Kebbe","Falafel","Halewit el jeben","Namoura","Maamoul","Foul mdammas","Balila","Kawarma","Fattouch"],thailand:["Pad kra pao moo","Tom kha gai","Khao Pad","Chicken pad Thai","Vegetable pad Thai","Moo satay","Tom yum goong","Khao niew mamuang","Kai yad sai","Khao soi","Pad see ew","Laab moo","Gaeng panang","Gai pad med ma muang","Som tam","Poh pia tod","Gaeng massaman","Pla kapung nueng manao","Tod mun pla","Gaeng ped","Gaeng garee","Gaeng keow wan","Moo ping","Durian","Sai ooah","Hoy tod","Kuay teow reua","Mu kratha","Kao ka moo","Yam nua"],greece:["Moussaka","Papoutsakia","Pastitsio","Souvlaki","Soutzoukakia","Stifado","Tomatokeftedes","Tzatziki","Kolokithokeftedes","Giouvetsi","Choriatiki","Kleftiko","Gemista","Fasolada","Bougatsa","Tiropita","Spanakopita","Feta Cheese with Honey","Horta","Tirokroketes","Briam","Saganaki","Gigantes","Dolmades","Fasolatha","Koulouri","Loukoumades","Gyros","Galaktoboureko","Baklava"],turkey:["Şiş kebap","Döner","Köfte","Pide","Kumpir","Meze","Mantı","Lahmacun","Menemen","Şiş kebap","İskender kebab","Corba","Kuzu tandir","Çiğ Köfte","Pilav","Yaprak sarma","Dolma","İmam bayıldı","Borek","Durum","Kumpir","Balik ekmek","Simit","Kunefe","Baklava","Lokum","Halva","Mozzaik pasta","Güllaç","Mercimek Köftesi","Haydari","Tursu suyu","Kahvalti","Kazan dibi","Hunkar begendi","Islak burgers","Salep","Yogurtlu kebab"],spain:["Tortilla de patatas","Fabada asturiana","Calçots","Boquerones al vinagre","Empanada gallega","Paella","Gazpacho","Gachas","Migas","Bocadillo de calamares","Pulpo a feira","Caldo gallego","Lentejas con chorizo","Cocido madrileño","Cachopo","Caracoles"],venezuela:["Pabellón criollo","Arepa","Mondongo","Empanadas","Quesillo","Chicha andina","Tequeños","Cachapa","Hallaca","Perico","Pasticho","Mandocas","Caraotas negras","Patacones","Dulce de leche","Pan de Jamón"],chile:["Humitas","Empanadas","Porotos con riendas","Completos","Manjar","Cordero al palo","Pastel de choclo","Mote con huesillos","Sopaipillas","Curanto"],argentina:["Milanesas","Empanadas","Pizza fugazeta","Asado","Choripan","Bondiola","Bife de chorizo"],colombia:["Bandeja paisa","Chuleta valluna","Sancocho trifásico","Empanada valluna","Salpicon de frutas","Pastel de garbanzo","Ajiaco","Arepas","Arroz de lisa","Sancocho","Pan de bono","Cuchuco","Oblea","Cazuela de mariscos","Pan de yuca","Bollo Limpio","Almojábana","Empanadas","Arroz con Coco","Sopa de mondongo","Cazuela de Mariscos","Arroz con Pollo","Arepa de Huevo","Mote de Queso"],ecuador:["Encebollado","Ceviche","Tigrillo","Bolon de verde","Llapingacho","Mote pillo","Locro de papa","Churrasco"],peru:["Ceviche","Arroz con pollo","Aji de gallina","Llunca de gallina"],"el salvador":["Pupusa","Sopa de patas","Rigua","Flor de izote con huevo","Gallo en chicha"],romania:["Sarmale","Mici","Pomana porcului","Ciorbă de fasole cu ciolan","Ciorbă de burtă","Ciorbă rădăuțeană","Plăcintă cu brânză","Ciorbă de potroace","Mămăligă cu brânză și smântână","Tochitură","Piftie","Iahnie de fasole","Slănină afumată","Cârnați afumați","Varză a la Cluj","Gulaș de cartofi cu afumătură","Cozonac de casă","Ciorbă ardelenească de porc","Mucenici moldovenești","Salată de boeuf","Dovleac copt","Papanași cu brânză de vacă și afine","Drob de miel","Pârjoale moldovenești","Zacuscă de vinete","Zacuscă de fasole","Turtă dulce","Clătitele cu gem","Clătitele cu brânza de vacă","Balmoș","Cozonac","Chiftele"]},c5;(c5=Object.keys(Ape))==null||c5.length;var l5,Npe={olympic:["Archery","Artistic Gymnastics","Artistic Swimming","Athletics","Badminton","Baseball Softball","Basketball","Beach Volleyball","BMX Freestyle","BMX Racing","Boxing","Kayak Flatwater","Kayak Slalom","Diving","Equestrian","Fencing","Football","Golf","Handball","Hockey","Judo","Karate","Marathon Swimming","Modern Pentathlon","Mountain Bike","Rhythmic Gymnastics","Road Cycling","Rowing","Rugby","Sailing","Shooting","Skateboarding","Sport Climbing","Surfing","Swimming","Table Tennis","Taekwondo","Tennis","Track Cycling","Trampoline","Triathlon","Volleyball","Water Polo","Weightlifting","Wrestling"],winterOlympic:["Alpine Skiing","Biathlon","Bobsleigh","Cross-Country Skiing","Curling","Figure Skating","Freestyle Skiing","Ice Hockey","Luge","Nordic Combined","Short Track Speed Skating","Skeleton","Ski Jumping","Snowboard","Speed Skating"],outdoor:["Archery","Athletics","Badminton","Baseball","Basketball","Bowling","Boxing","Camping","Canoeing","Climbing","Cricket","Curling","Cycling","Equestrian","Fencing","Football","Golf","Gymnastics","Handball","Hang Gliding","High Jumping","Hockey","Ice Hockey","Judo","Karate","Kite Flying","Monkey Bars","Motorsports","Netball","Rowing","Rugby","Running","Sailing","Skateboarding","Slide","Snow Skiing","Soccer","Street Hockey","Surfing","Swimming","Table Tennis","Tennis","Trekking","Triathlon","Volleyball","Weightlifting","Wrestling"]};(l5=Object.keys(Npe))==null||l5.length;var y9={exports:{}};function xpe(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var xP={exports:{}};const Ppe={},Dpe=Object.freeze(Object.defineProperty({__proto__:null,default:Ppe},Symbol.toStringTag,{value:"Module"})),Lpe=UJ(Dpe);var u5;function Jn(){return u5||(u5=1,function(e,t){(function(i,a){e.exports=a()})(Xt,function(){var i=i||function(a,c){var u;if(typeof window<"u"&&window.crypto&&(u=window.crypto),typeof self<"u"&&self.crypto&&(u=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(u=globalThis.crypto),!u&&typeof window<"u"&&window.msCrypto&&(u=window.msCrypto),!u&&typeof Xt<"u"&&Xt.crypto&&(u=Xt.crypto),!u&&typeof xpe=="function")try{u=Lpe}catch{}var f=function(){if(u){if(typeof u.getRandomValues=="function")try{return u.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof u.randomBytes=="function")try{return u.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},m=Object.create||function(){function x(){}return function(k){var V;return x.prototype=k,V=new x,x.prototype=null,V}}(),g={},E=g.lib={},y=E.Base=function(){return{extend:function(x){var k=m(this);return x&&k.mixIn(x),(!k.hasOwnProperty("init")||this.init===k.init)&&(k.init=function(){k.$super.init.apply(this,arguments)}),k.init.prototype=k,k.$super=this,k},create:function(){var x=this.extend();return x.init.apply(x,arguments),x},init:function(){},mixIn:function(x){for(var k in x)x.hasOwnProperty(k)&&(this[k]=x[k]);x.hasOwnProperty("toString")&&(this.toString=x.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),T=E.WordArray=y.extend({init:function(x,k){x=this.words=x||[],k!=c?this.sigBytes=k:this.sigBytes=x.length*4},toString:function(x){return(x||P).stringify(this)},concat:function(x){var k=this.words,V=x.words,H=this.sigBytes,$=x.sigBytes;if(this.clamp(),H%4)for(var G=0;G<$;G++){var K=V[G>>>2]>>>24-G%4*8&255;k[H+G>>>2]|=K<<24-(H+G)%4*8}else for(var Q=0;Q<$;Q+=4)k[H+Q>>>2]=V[Q>>>2];return this.sigBytes+=$,this},clamp:function(){var x=this.words,k=this.sigBytes;x[k>>>2]&=4294967295<<32-k%4*8,x.length=a.ceil(k/4)},clone:function(){var x=y.clone.call(this);return x.words=this.words.slice(0),x},random:function(x){for(var k=[],V=0;V<x;V+=4)k.push(f());return new T.init(k,x)}}),R=g.enc={},P=R.Hex={stringify:function(x){for(var k=x.words,V=x.sigBytes,H=[],$=0;$<V;$++){var G=k[$>>>2]>>>24-$%4*8&255;H.push((G>>>4).toString(16)),H.push((G&15).toString(16))}return H.join("")},parse:function(x){for(var k=x.length,V=[],H=0;H<k;H+=2)V[H>>>3]|=parseInt(x.substr(H,2),16)<<24-H%8*4;return new T.init(V,k/2)}},O=R.Latin1={stringify:function(x){for(var k=x.words,V=x.sigBytes,H=[],$=0;$<V;$++){var G=k[$>>>2]>>>24-$%4*8&255;H.push(String.fromCharCode(G))}return H.join("")},parse:function(x){for(var k=x.length,V=[],H=0;H<k;H++)V[H>>>2]|=(x.charCodeAt(H)&255)<<24-H%4*8;return new T.init(V,k)}},N=R.Utf8={stringify:function(x){try{return decodeURIComponent(escape(O.stringify(x)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(x){return O.parse(unescape(encodeURIComponent(x)))}},M=E.BufferedBlockAlgorithm=y.extend({reset:function(){this._data=new T.init,this._nDataBytes=0},_append:function(x){typeof x=="string"&&(x=N.parse(x)),this._data.concat(x),this._nDataBytes+=x.sigBytes},_process:function(x){var k,V=this._data,H=V.words,$=V.sigBytes,G=this.blockSize,K=G*4,Q=$/K;x?Q=a.ceil(Q):Q=a.max((Q|0)-this._minBufferSize,0);var z=Q*G,ie=a.min(z*4,$);if(z){for(var J=0;J<z;J+=G)this._doProcessBlock(H,J);k=H.splice(0,z),V.sigBytes-=ie}return new T.init(k,ie)},clone:function(){var x=y.clone.call(this);return x._data=this._data.clone(),x},_minBufferSize:0});E.Hasher=M.extend({cfg:y.extend(),init:function(x){this.cfg=this.cfg.extend(x),this.reset()},reset:function(){M.reset.call(this),this._doReset()},update:function(x){return this._append(x),this._process(),this},finalize:function(x){x&&this._append(x);var k=this._doFinalize();return k},blockSize:16,_createHelper:function(x){return function(k,V){return new x.init(V).finalize(k)}},_createHmacHelper:function(x){return function(k,V){return new D.HMAC.init(x,V).finalize(k)}}});var D=g.algo={};return g}(Math);return i})}(xP)),xP.exports}var PP={exports:{}},d5;function UI(){return d5||(d5=1,function(e,t){(function(i,a){e.exports=a(Jn())})(Xt,function(i){return function(a){var c=i,u=c.lib,f=u.Base,m=u.WordArray,g=c.x64={};g.Word=f.extend({init:function(E,y){this.high=E,this.low=y}}),g.WordArray=f.extend({init:function(E,y){E=this.words=E||[],y!=a?this.sigBytes=y:this.sigBytes=E.length*8},toX32:function(){for(var E=this.words,y=E.length,T=[],R=0;R<y;R++){var P=E[R];T.push(P.high),T.push(P.low)}return m.create(T,this.sigBytes)},clone:function(){for(var E=f.clone.call(this),y=E.words=this.words.slice(0),T=y.length,R=0;R<T;R++)y[R]=y[R].clone();return E}})}(),i})}(PP)),PP.exports}var DP={exports:{}},h5;function kpe(){return h5||(h5=1,function(e,t){(function(i,a){e.exports=a(Jn())})(Xt,function(i){return function(){if(typeof ArrayBuffer=="function"){var a=i,c=a.lib,u=c.WordArray,f=u.init,m=u.init=function(g){if(g instanceof ArrayBuffer&&(g=new Uint8Array(g)),(g instanceof Int8Array||typeof Uint8ClampedArray<"u"&&g instanceof Uint8ClampedArray||g instanceof Int16Array||g instanceof Uint16Array||g instanceof Int32Array||g instanceof Uint32Array||g instanceof Float32Array||g instanceof Float64Array)&&(g=new Uint8Array(g.buffer,g.byteOffset,g.byteLength)),g instanceof Uint8Array){for(var E=g.byteLength,y=[],T=0;T<E;T++)y[T>>>2]|=g[T]<<24-T%4*8;f.call(this,y,E)}else f.apply(this,arguments)};m.prototype=u}}(),i.lib.WordArray})}(DP)),DP.exports}var LP={exports:{}},f5;function Mpe(){return f5||(f5=1,function(e,t){(function(i,a){e.exports=a(Jn())})(Xt,function(i){return function(){var a=i,c=a.lib,u=c.WordArray,f=a.enc;f.Utf16=f.Utf16BE={stringify:function(g){for(var E=g.words,y=g.sigBytes,T=[],R=0;R<y;R+=2){var P=E[R>>>2]>>>16-R%4*8&65535;T.push(String.fromCharCode(P))}return T.join("")},parse:function(g){for(var E=g.length,y=[],T=0;T<E;T++)y[T>>>1]|=g.charCodeAt(T)<<16-T%2*16;return u.create(y,E*2)}},f.Utf16LE={stringify:function(g){for(var E=g.words,y=g.sigBytes,T=[],R=0;R<y;R+=2){var P=m(E[R>>>2]>>>16-R%4*8&65535);T.push(String.fromCharCode(P))}return T.join("")},parse:function(g){for(var E=g.length,y=[],T=0;T<E;T++)y[T>>>1]|=m(g.charCodeAt(T)<<16-T%2*16);return u.create(y,E*2)}};function m(g){return g<<8&4278255360|g>>>8&16711935}}(),i.enc.Utf16})}(LP)),LP.exports}var kP={exports:{}},p5;function Mg(){return p5||(p5=1,function(e,t){(function(i,a){e.exports=a(Jn())})(Xt,function(i){return function(){var a=i,c=a.lib,u=c.WordArray,f=a.enc;f.Base64={stringify:function(g){var E=g.words,y=g.sigBytes,T=this._map;g.clamp();for(var R=[],P=0;P<y;P+=3)for(var O=E[P>>>2]>>>24-P%4*8&255,N=E[P+1>>>2]>>>24-(P+1)%4*8&255,M=E[P+2>>>2]>>>24-(P+2)%4*8&255,D=O<<16|N<<8|M,x=0;x<4&&P+x*.75<y;x++)R.push(T.charAt(D>>>6*(3-x)&63));var k=T.charAt(64);if(k)for(;R.length%4;)R.push(k);return R.join("")},parse:function(g){var E=g.length,y=this._map,T=this._reverseMap;if(!T){T=this._reverseMap=[];for(var R=0;R<y.length;R++)T[y.charCodeAt(R)]=R}var P=y.charAt(64);if(P){var O=g.indexOf(P);O!==-1&&(E=O)}return m(g,E,T)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function m(g,E,y){for(var T=[],R=0,P=0;P<E;P++)if(P%4){var O=y[g.charCodeAt(P-1)]<<P%4*2,N=y[g.charCodeAt(P)]>>>6-P%4*2,M=O|N;T[R>>>2]|=M<<24-R%4*8,R++}return u.create(T,R)}}(),i.enc.Base64})}(kP)),kP.exports}var MP={exports:{}},m5;function Upe(){return m5||(m5=1,function(e,t){(function(i,a){e.exports=a(Jn())})(Xt,function(i){return function(){var a=i,c=a.lib,u=c.WordArray,f=a.enc;f.Base64url={stringify:function(g,E=!0){var y=g.words,T=g.sigBytes,R=E?this._safe_map:this._map;g.clamp();for(var P=[],O=0;O<T;O+=3)for(var N=y[O>>>2]>>>24-O%4*8&255,M=y[O+1>>>2]>>>24-(O+1)%4*8&255,D=y[O+2>>>2]>>>24-(O+2)%4*8&255,x=N<<16|M<<8|D,k=0;k<4&&O+k*.75<T;k++)P.push(R.charAt(x>>>6*(3-k)&63));var V=R.charAt(64);if(V)for(;P.length%4;)P.push(V);return P.join("")},parse:function(g,E=!0){var y=g.length,T=E?this._safe_map:this._map,R=this._reverseMap;if(!R){R=this._reverseMap=[];for(var P=0;P<T.length;P++)R[T.charCodeAt(P)]=P}var O=T.charAt(64);if(O){var N=g.indexOf(O);N!==-1&&(y=N)}return m(g,y,R)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function m(g,E,y){for(var T=[],R=0,P=0;P<E;P++)if(P%4){var O=y[g.charCodeAt(P-1)]<<P%4*2,N=y[g.charCodeAt(P)]>>>6-P%4*2,M=O|N;T[R>>>2]|=M<<24-R%4*8,R++}return u.create(T,R)}}(),i.enc.Base64url})}(MP)),MP.exports}var UP={exports:{}},g5;function Ug(){return g5||(g5=1,function(e,t){(function(i,a){e.exports=a(Jn())})(Xt,function(i){return function(a){var c=i,u=c.lib,f=u.WordArray,m=u.Hasher,g=c.algo,E=[];(function(){for(var N=0;N<64;N++)E[N]=a.abs(a.sin(N+1))*4294967296|0})();var y=g.MD5=m.extend({_doReset:function(){this._hash=new f.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(N,M){for(var D=0;D<16;D++){var x=M+D,k=N[x];N[x]=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360}var V=this._hash.words,H=N[M+0],$=N[M+1],G=N[M+2],K=N[M+3],Q=N[M+4],z=N[M+5],ie=N[M+6],J=N[M+7],Y=N[M+8],oe=N[M+9],ue=N[M+10],he=N[M+11],Se=N[M+12],ve=N[M+13],Re=N[M+14],Ce=N[M+15],pe=V[0],fe=V[1],_e=V[2],ge=V[3];pe=T(pe,fe,_e,ge,H,7,E[0]),ge=T(ge,pe,fe,_e,$,12,E[1]),_e=T(_e,ge,pe,fe,G,17,E[2]),fe=T(fe,_e,ge,pe,K,22,E[3]),pe=T(pe,fe,_e,ge,Q,7,E[4]),ge=T(ge,pe,fe,_e,z,12,E[5]),_e=T(_e,ge,pe,fe,ie,17,E[6]),fe=T(fe,_e,ge,pe,J,22,E[7]),pe=T(pe,fe,_e,ge,Y,7,E[8]),ge=T(ge,pe,fe,_e,oe,12,E[9]),_e=T(_e,ge,pe,fe,ue,17,E[10]),fe=T(fe,_e,ge,pe,he,22,E[11]),pe=T(pe,fe,_e,ge,Se,7,E[12]),ge=T(ge,pe,fe,_e,ve,12,E[13]),_e=T(_e,ge,pe,fe,Re,17,E[14]),fe=T(fe,_e,ge,pe,Ce,22,E[15]),pe=R(pe,fe,_e,ge,$,5,E[16]),ge=R(ge,pe,fe,_e,ie,9,E[17]),_e=R(_e,ge,pe,fe,he,14,E[18]),fe=R(fe,_e,ge,pe,H,20,E[19]),pe=R(pe,fe,_e,ge,z,5,E[20]),ge=R(ge,pe,fe,_e,ue,9,E[21]),_e=R(_e,ge,pe,fe,Ce,14,E[22]),fe=R(fe,_e,ge,pe,Q,20,E[23]),pe=R(pe,fe,_e,ge,oe,5,E[24]),ge=R(ge,pe,fe,_e,Re,9,E[25]),_e=R(_e,ge,pe,fe,K,14,E[26]),fe=R(fe,_e,ge,pe,Y,20,E[27]),pe=R(pe,fe,_e,ge,ve,5,E[28]),ge=R(ge,pe,fe,_e,G,9,E[29]),_e=R(_e,ge,pe,fe,J,14,E[30]),fe=R(fe,_e,ge,pe,Se,20,E[31]),pe=P(pe,fe,_e,ge,z,4,E[32]),ge=P(ge,pe,fe,_e,Y,11,E[33]),_e=P(_e,ge,pe,fe,he,16,E[34]),fe=P(fe,_e,ge,pe,Re,23,E[35]),pe=P(pe,fe,_e,ge,$,4,E[36]),ge=P(ge,pe,fe,_e,Q,11,E[37]),_e=P(_e,ge,pe,fe,J,16,E[38]),fe=P(fe,_e,ge,pe,ue,23,E[39]),pe=P(pe,fe,_e,ge,ve,4,E[40]),ge=P(ge,pe,fe,_e,H,11,E[41]),_e=P(_e,ge,pe,fe,K,16,E[42]),fe=P(fe,_e,ge,pe,ie,23,E[43]),pe=P(pe,fe,_e,ge,oe,4,E[44]),ge=P(ge,pe,fe,_e,Se,11,E[45]),_e=P(_e,ge,pe,fe,Ce,16,E[46]),fe=P(fe,_e,ge,pe,G,23,E[47]),pe=O(pe,fe,_e,ge,H,6,E[48]),ge=O(ge,pe,fe,_e,J,10,E[49]),_e=O(_e,ge,pe,fe,Re,15,E[50]),fe=O(fe,_e,ge,pe,z,21,E[51]),pe=O(pe,fe,_e,ge,Se,6,E[52]),ge=O(ge,pe,fe,_e,K,10,E[53]),_e=O(_e,ge,pe,fe,ue,15,E[54]),fe=O(fe,_e,ge,pe,$,21,E[55]),pe=O(pe,fe,_e,ge,Y,6,E[56]),ge=O(ge,pe,fe,_e,Ce,10,E[57]),_e=O(_e,ge,pe,fe,ie,15,E[58]),fe=O(fe,_e,ge,pe,ve,21,E[59]),pe=O(pe,fe,_e,ge,Q,6,E[60]),ge=O(ge,pe,fe,_e,he,10,E[61]),_e=O(_e,ge,pe,fe,G,15,E[62]),fe=O(fe,_e,ge,pe,oe,21,E[63]),V[0]=V[0]+pe|0,V[1]=V[1]+fe|0,V[2]=V[2]+_e|0,V[3]=V[3]+ge|0},_doFinalize:function(){var N=this._data,M=N.words,D=this._nDataBytes*8,x=N.sigBytes*8;M[x>>>5]|=128<<24-x%32;var k=a.floor(D/4294967296),V=D;M[(x+64>>>9<<4)+15]=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360,M[(x+64>>>9<<4)+14]=(V<<8|V>>>24)&16711935|(V<<24|V>>>8)&4278255360,N.sigBytes=(M.length+1)*4,this._process();for(var H=this._hash,$=H.words,G=0;G<4;G++){var K=$[G];$[G]=(K<<8|K>>>24)&16711935|(K<<24|K>>>8)&4278255360}return H},clone:function(){var N=m.clone.call(this);return N._hash=this._hash.clone(),N}});function T(N,M,D,x,k,V,H){var $=N+(M&D|~M&x)+k+H;return($<<V|$>>>32-V)+M}function R(N,M,D,x,k,V,H){var $=N+(M&x|D&~x)+k+H;return($<<V|$>>>32-V)+M}function P(N,M,D,x,k,V,H){var $=N+(M^D^x)+k+H;return($<<V|$>>>32-V)+M}function O(N,M,D,x,k,V,H){var $=N+(D^(M|~x))+k+H;return($<<V|$>>>32-V)+M}c.MD5=m._createHelper(y),c.HmacMD5=m._createHmacHelper(y)}(Math),i.MD5})}(UP)),UP.exports}var FP={exports:{}},v5;function OM(){return v5||(v5=1,function(e,t){(function(i,a){e.exports=a(Jn())})(Xt,function(i){return function(){var a=i,c=a.lib,u=c.WordArray,f=c.Hasher,m=a.algo,g=[],E=m.SHA1=f.extend({_doReset:function(){this._hash=new u.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(y,T){for(var R=this._hash.words,P=R[0],O=R[1],N=R[2],M=R[3],D=R[4],x=0;x<80;x++){if(x<16)g[x]=y[T+x]|0;else{var k=g[x-3]^g[x-8]^g[x-14]^g[x-16];g[x]=k<<1|k>>>31}var V=(P<<5|P>>>27)+D+g[x];x<20?V+=(O&N|~O&M)+1518500249:x<40?V+=(O^N^M)+1859775393:x<60?V+=(O&N|O&M|N&M)-1894007588:V+=(O^N^M)-899497514,D=M,M=N,N=O<<30|O>>>2,O=P,P=V}R[0]=R[0]+P|0,R[1]=R[1]+O|0,R[2]=R[2]+N|0,R[3]=R[3]+M|0,R[4]=R[4]+D|0},_doFinalize:function(){var y=this._data,T=y.words,R=this._nDataBytes*8,P=y.sigBytes*8;return T[P>>>5]|=128<<24-P%32,T[(P+64>>>9<<4)+14]=Math.floor(R/4294967296),T[(P+64>>>9<<4)+15]=R,y.sigBytes=T.length*4,this._process(),this._hash},clone:function(){var y=f.clone.call(this);return y._hash=this._hash.clone(),y}});a.SHA1=f._createHelper(E),a.HmacSHA1=f._createHmacHelper(E)}(),i.SHA1})}(FP)),FP.exports}var VP={exports:{}},E5;function C9(){return E5||(E5=1,function(e,t){(function(i,a){e.exports=a(Jn())})(Xt,function(i){return function(a){var c=i,u=c.lib,f=u.WordArray,m=u.Hasher,g=c.algo,E=[],y=[];(function(){function P(D){for(var x=a.sqrt(D),k=2;k<=x;k++)if(!(D%k))return!1;return!0}function O(D){return(D-(D|0))*4294967296|0}for(var N=2,M=0;M<64;)P(N)&&(M<8&&(E[M]=O(a.pow(N,1/2))),y[M]=O(a.pow(N,1/3)),M++),N++})();var T=[],R=g.SHA256=m.extend({_doReset:function(){this._hash=new f.init(E.slice(0))},_doProcessBlock:function(P,O){for(var N=this._hash.words,M=N[0],D=N[1],x=N[2],k=N[3],V=N[4],H=N[5],$=N[6],G=N[7],K=0;K<64;K++){if(K<16)T[K]=P[O+K]|0;else{var Q=T[K-15],z=(Q<<25|Q>>>7)^(Q<<14|Q>>>18)^Q>>>3,ie=T[K-2],J=(ie<<15|ie>>>17)^(ie<<13|ie>>>19)^ie>>>10;T[K]=z+T[K-7]+J+T[K-16]}var Y=V&H^~V&$,oe=M&D^M&x^D&x,ue=(M<<30|M>>>2)^(M<<19|M>>>13)^(M<<10|M>>>22),he=(V<<26|V>>>6)^(V<<21|V>>>11)^(V<<7|V>>>25),Se=G+he+Y+y[K]+T[K],ve=ue+oe;G=$,$=H,H=V,V=k+Se|0,k=x,x=D,D=M,M=Se+ve|0}N[0]=N[0]+M|0,N[1]=N[1]+D|0,N[2]=N[2]+x|0,N[3]=N[3]+k|0,N[4]=N[4]+V|0,N[5]=N[5]+H|0,N[6]=N[6]+$|0,N[7]=N[7]+G|0},_doFinalize:function(){var P=this._data,O=P.words,N=this._nDataBytes*8,M=P.sigBytes*8;return O[M>>>5]|=128<<24-M%32,O[(M+64>>>9<<4)+14]=a.floor(N/4294967296),O[(M+64>>>9<<4)+15]=N,P.sigBytes=O.length*4,this._process(),this._hash},clone:function(){var P=m.clone.call(this);return P._hash=this._hash.clone(),P}});c.SHA256=m._createHelper(R),c.HmacSHA256=m._createHmacHelper(R)}(Math),i.SHA256})}(VP)),VP.exports}var jP={exports:{}},_5;function Fpe(){return _5||(_5=1,function(e,t){(function(i,a,c){e.exports=a(Jn(),C9())})(Xt,function(i){return function(){var a=i,c=a.lib,u=c.WordArray,f=a.algo,m=f.SHA256,g=f.SHA224=m.extend({_doReset:function(){this._hash=new u.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var E=m._doFinalize.call(this);return E.sigBytes-=4,E}});a.SHA224=m._createHelper(g),a.HmacSHA224=m._createHmacHelper(g)}(),i.SHA224})}(jP)),jP.exports}var BP={exports:{}},S5;function T9(){return S5||(S5=1,function(e,t){(function(i,a,c){e.exports=a(Jn(),UI())})(Xt,function(i){return function(){var a=i,c=a.lib,u=c.Hasher,f=a.x64,m=f.Word,g=f.WordArray,E=a.algo;function y(){return m.create.apply(m,arguments)}var T=[y(1116352408,3609767458),y(1899447441,602891725),y(3049323471,3964484399),y(3921009573,2173295548),y(961987163,4081628472),y(1508970993,3053834265),y(2453635748,2937671579),y(2870763221,3664609560),y(3624381080,2734883394),y(310598401,1164996542),y(607225278,1323610764),y(1426881987,3590304994),y(1925078388,4068182383),y(2162078206,991336113),y(2614888103,633803317),y(3248222580,3479774868),y(3835390401,2666613458),y(4022224774,944711139),y(264347078,2341262773),y(604807628,2007800933),y(770255983,1495990901),y(1249150122,1856431235),y(1555081692,3175218132),y(1996064986,2198950837),y(2554220882,3999719339),y(2821834349,766784016),y(2952996808,2566594879),y(3210313671,3203337956),y(3336571891,1034457026),y(3584528711,2466948901),y(113926993,3758326383),y(338241895,168717936),y(666307205,1188179964),y(773529912,1546045734),y(1294757372,1522805485),y(1396182291,2643833823),y(1695183700,2343527390),y(1986661051,1014477480),y(2177026350,1206759142),y(2456956037,344077627),y(2730485921,1290863460),y(2820302411,3158454273),y(3259730800,3505952657),y(3345764771,106217008),y(3516065817,3606008344),y(3600352804,1432725776),y(4094571909,1467031594),y(275423344,851169720),y(430227734,3100823752),y(506948616,1363258195),y(659060556,3750685593),y(883997877,3785050280),y(958139571,3318307427),y(1322822218,3812723403),y(1537002063,2003034995),y(1747873779,3602036899),y(1955562222,1575990012),y(2024104815,1125592928),y(2227730452,2716904306),y(2361852424,442776044),y(2428436474,593698344),y(2756734187,3733110249),y(3204031479,2999351573),y(3329325298,3815920427),y(3391569614,3928383900),y(3515267271,566280711),y(3940187606,3454069534),y(4118630271,4000239992),y(116418474,1914138554),y(174292421,2731055270),y(289380356,3203993006),y(460393269,320620315),y(685471733,587496836),y(852142971,1086792851),y(1017036298,365543100),y(1126000580,2618297676),y(1288033470,3409855158),y(1501505948,4234509866),y(1607167915,987167468),y(1816402316,1246189591)],R=[];(function(){for(var O=0;O<80;O++)R[O]=y()})();var P=E.SHA512=u.extend({_doReset:function(){this._hash=new g.init([new m.init(1779033703,4089235720),new m.init(3144134277,2227873595),new m.init(1013904242,4271175723),new m.init(2773480762,1595750129),new m.init(1359893119,2917565137),new m.init(2600822924,725511199),new m.init(528734635,4215389547),new m.init(1541459225,327033209)])},_doProcessBlock:function(O,N){for(var M=this._hash.words,D=M[0],x=M[1],k=M[2],V=M[3],H=M[4],$=M[5],G=M[6],K=M[7],Q=D.high,z=D.low,ie=x.high,J=x.low,Y=k.high,oe=k.low,ue=V.high,he=V.low,Se=H.high,ve=H.low,Re=$.high,Ce=$.low,pe=G.high,fe=G.low,_e=K.high,ge=K.low,Ue=Q,Fe=z,ot=ie,qe=J,wt=Y,kt=oe,_t=ue,vt=he,At=Se,it=ve,Mt=Re,rn=Ce,Ft=pe,ft=fe,dt=_e,at=ge,ht=0;ht<80;ht++){var Ot,Vt,zt=R[ht];if(ht<16)Vt=zt.high=O[N+ht*2]|0,Ot=zt.low=O[N+ht*2+1]|0;else{var Kt=R[ht-15],mn=Kt.high,Hn=Kt.low,Zr=(mn>>>1|Hn<<31)^(mn>>>8|Hn<<24)^mn>>>7,yr=(Hn>>>1|mn<<31)^(Hn>>>8|mn<<24)^(Hn>>>7|mn<<25),or=R[ht-2],Ln=or.high,Gr=or.low,Wn=(Ln>>>19|Gr<<13)^(Ln<<3|Gr>>>29)^Ln>>>6,hn=(Gr>>>19|Ln<<13)^(Gr<<3|Ln>>>29)^(Gr>>>6|Ln<<26),fn=R[ht-7],Ro=fn.high,zi=fn.low,ei=R[ht-16],Gn=ei.high,Qe=ei.low;Ot=yr+zi,Vt=Zr+Ro+(Ot>>>0<yr>>>0?1:0),Ot=Ot+hn,Vt=Vt+Wn+(Ot>>>0<hn>>>0?1:0),Ot=Ot+Qe,Vt=Vt+Gn+(Ot>>>0<Qe>>>0?1:0),zt.high=Vt,zt.low=Ot}var Tt=At&Mt^~At&Ft,Un=it&rn^~it&ft,an=Ue&ot^Ue&wt^ot&wt,Ki=Fe&qe^Fe&kt^qe&kt,hi=(Ue>>>28|Fe<<4)^(Ue<<30|Fe>>>2)^(Ue<<25|Fe>>>7),Cr=(Fe>>>28|Ue<<4)^(Fe<<30|Ue>>>2)^(Fe<<25|Ue>>>7),jt=(At>>>14|it<<18)^(At>>>18|it<<14)^(At<<23|it>>>9),_n=(it>>>14|At<<18)^(it>>>18|At<<14)^(it<<23|At>>>9),Pn=T[ht],zr=Pn.high,Ei=Pn.low,ti=at+_n,Kr=dt+jt+(ti>>>0<at>>>0?1:0),ti=ti+Un,Kr=Kr+Tt+(ti>>>0<Un>>>0?1:0),ti=ti+Ei,Kr=Kr+zr+(ti>>>0<Ei>>>0?1:0),ti=ti+Ot,Kr=Kr+Vt+(ti>>>0<Ot>>>0?1:0),uo=Cr+Ki,Io=hi+an+(uo>>>0<Cr>>>0?1:0);dt=Ft,at=ft,Ft=Mt,ft=rn,Mt=At,rn=it,it=vt+ti|0,At=_t+Kr+(it>>>0<vt>>>0?1:0)|0,_t=wt,vt=kt,wt=ot,kt=qe,ot=Ue,qe=Fe,Fe=ti+uo|0,Ue=Kr+Io+(Fe>>>0<ti>>>0?1:0)|0}z=D.low=z+Fe,D.high=Q+Ue+(z>>>0<Fe>>>0?1:0),J=x.low=J+qe,x.high=ie+ot+(J>>>0<qe>>>0?1:0),oe=k.low=oe+kt,k.high=Y+wt+(oe>>>0<kt>>>0?1:0),he=V.low=he+vt,V.high=ue+_t+(he>>>0<vt>>>0?1:0),ve=H.low=ve+it,H.high=Se+At+(ve>>>0<it>>>0?1:0),Ce=$.low=Ce+rn,$.high=Re+Mt+(Ce>>>0<rn>>>0?1:0),fe=G.low=fe+ft,G.high=pe+Ft+(fe>>>0<ft>>>0?1:0),ge=K.low=ge+at,K.high=_e+dt+(ge>>>0<at>>>0?1:0)},_doFinalize:function(){var O=this._data,N=O.words,M=this._nDataBytes*8,D=O.sigBytes*8;N[D>>>5]|=128<<24-D%32,N[(D+128>>>10<<5)+30]=Math.floor(M/4294967296),N[(D+128>>>10<<5)+31]=M,O.sigBytes=N.length*4,this._process();var x=this._hash.toX32();return x},clone:function(){var O=u.clone.call(this);return O._hash=this._hash.clone(),O},blockSize:1024/32});a.SHA512=u._createHelper(P),a.HmacSHA512=u._createHmacHelper(P)}(),i.SHA512})}(BP)),BP.exports}var $P={exports:{}},y5;function Vpe(){return y5||(y5=1,function(e,t){(function(i,a,c){e.exports=a(Jn(),UI(),T9())})(Xt,function(i){return function(){var a=i,c=a.x64,u=c.Word,f=c.WordArray,m=a.algo,g=m.SHA512,E=m.SHA384=g.extend({_doReset:function(){this._hash=new f.init([new u.init(3418070365,3238371032),new u.init(1654270250,914150663),new u.init(2438529370,812702999),new u.init(355462360,4144912697),new u.init(1731405415,4290775857),new u.init(2394180231,1750603025),new u.init(3675008525,1694076839),new u.init(1203062813,3204075428)])},_doFinalize:function(){var y=g._doFinalize.call(this);return y.sigBytes-=16,y}});a.SHA384=g._createHelper(E),a.HmacSHA384=g._createHmacHelper(E)}(),i.SHA384})}($P)),$P.exports}var HP={exports:{}},C5;function jpe(){return C5||(C5=1,function(e,t){(function(i,a,c){e.exports=a(Jn(),UI())})(Xt,function(i){return function(a){var c=i,u=c.lib,f=u.WordArray,m=u.Hasher,g=c.x64,E=g.Word,y=c.algo,T=[],R=[],P=[];(function(){for(var M=1,D=0,x=0;x<24;x++){T[M+5*D]=(x+1)*(x+2)/2%64;var k=D%5,V=(2*M+3*D)%5;M=k,D=V}for(var M=0;M<5;M++)for(var D=0;D<5;D++)R[M+5*D]=D+(2*M+3*D)%5*5;for(var H=1,$=0;$<24;$++){for(var G=0,K=0,Q=0;Q<7;Q++){if(H&1){var z=(1<<Q)-1;z<32?K^=1<<z:G^=1<<z-32}H&128?H=H<<1^113:H<<=1}P[$]=E.create(G,K)}})();var O=[];(function(){for(var M=0;M<25;M++)O[M]=E.create()})();var N=y.SHA3=m.extend({cfg:m.cfg.extend({outputLength:512}),_doReset:function(){for(var M=this._state=[],D=0;D<25;D++)M[D]=new E.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(M,D){for(var x=this._state,k=this.blockSize/2,V=0;V<k;V++){var H=M[D+2*V],$=M[D+2*V+1];H=(H<<8|H>>>24)&16711935|(H<<24|H>>>8)&4278255360,$=($<<8|$>>>24)&16711935|($<<24|$>>>8)&4278255360;var G=x[V];G.high^=$,G.low^=H}for(var K=0;K<24;K++){for(var Q=0;Q<5;Q++){for(var z=0,ie=0,J=0;J<5;J++){var G=x[Q+5*J];z^=G.high,ie^=G.low}var Y=O[Q];Y.high=z,Y.low=ie}for(var Q=0;Q<5;Q++)for(var oe=O[(Q+4)%5],ue=O[(Q+1)%5],he=ue.high,Se=ue.low,z=oe.high^(he<<1|Se>>>31),ie=oe.low^(Se<<1|he>>>31),J=0;J<5;J++){var G=x[Q+5*J];G.high^=z,G.low^=ie}for(var ve=1;ve<25;ve++){var z,ie,G=x[ve],Re=G.high,Ce=G.low,pe=T[ve];pe<32?(z=Re<<pe|Ce>>>32-pe,ie=Ce<<pe|Re>>>32-pe):(z=Ce<<pe-32|Re>>>64-pe,ie=Re<<pe-32|Ce>>>64-pe);var fe=O[R[ve]];fe.high=z,fe.low=ie}var _e=O[0],ge=x[0];_e.high=ge.high,_e.low=ge.low;for(var Q=0;Q<5;Q++)for(var J=0;J<5;J++){var ve=Q+5*J,G=x[ve],Ue=O[ve],Fe=O[(Q+1)%5+5*J],ot=O[(Q+2)%5+5*J];G.high=Ue.high^~Fe.high&ot.high,G.low=Ue.low^~Fe.low&ot.low}var G=x[0],qe=P[K];G.high^=qe.high,G.low^=qe.low}},_doFinalize:function(){var M=this._data,D=M.words;this._nDataBytes*8;var x=M.sigBytes*8,k=this.blockSize*32;D[x>>>5]|=1<<24-x%32,D[(a.ceil((x+1)/k)*k>>>5)-1]|=128,M.sigBytes=D.length*4,this._process();for(var V=this._state,H=this.cfg.outputLength/8,$=H/8,G=[],K=0;K<$;K++){var Q=V[K],z=Q.high,ie=Q.low;z=(z<<8|z>>>24)&16711935|(z<<24|z>>>8)&4278255360,ie=(ie<<8|ie>>>24)&16711935|(ie<<24|ie>>>8)&4278255360,G.push(ie),G.push(z)}return new f.init(G,H)},clone:function(){for(var M=m.clone.call(this),D=M._state=this._state.slice(0),x=0;x<25;x++)D[x]=D[x].clone();return M}});c.SHA3=m._createHelper(N),c.HmacSHA3=m._createHmacHelper(N)}(Math),i.SHA3})}(HP)),HP.exports}var WP={exports:{}},T5;function Bpe(){return T5||(T5=1,function(e,t){(function(i,a){e.exports=a(Jn())})(Xt,function(i){/** @preserve
			(c) 2012 by Cédric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return function(a){var c=i,u=c.lib,f=u.WordArray,m=u.Hasher,g=c.algo,E=f.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),y=f.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),T=f.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),R=f.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),P=f.create([0,1518500249,1859775393,2400959708,2840853838]),O=f.create([1352829926,1548603684,1836072691,2053994217,0]),N=g.RIPEMD160=m.extend({_doReset:function(){this._hash=f.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function($,G){for(var K=0;K<16;K++){var Q=G+K,z=$[Q];$[Q]=(z<<8|z>>>24)&16711935|(z<<24|z>>>8)&4278255360}var ie=this._hash.words,J=P.words,Y=O.words,oe=E.words,ue=y.words,he=T.words,Se=R.words,ve,Re,Ce,pe,fe,_e,ge,Ue,Fe,ot;_e=ve=ie[0],ge=Re=ie[1],Ue=Ce=ie[2],Fe=pe=ie[3],ot=fe=ie[4];for(var qe,K=0;K<80;K+=1)qe=ve+$[G+oe[K]]|0,K<16?qe+=M(Re,Ce,pe)+J[0]:K<32?qe+=D(Re,Ce,pe)+J[1]:K<48?qe+=x(Re,Ce,pe)+J[2]:K<64?qe+=k(Re,Ce,pe)+J[3]:qe+=V(Re,Ce,pe)+J[4],qe=qe|0,qe=H(qe,he[K]),qe=qe+fe|0,ve=fe,fe=pe,pe=H(Ce,10),Ce=Re,Re=qe,qe=_e+$[G+ue[K]]|0,K<16?qe+=V(ge,Ue,Fe)+Y[0]:K<32?qe+=k(ge,Ue,Fe)+Y[1]:K<48?qe+=x(ge,Ue,Fe)+Y[2]:K<64?qe+=D(ge,Ue,Fe)+Y[3]:qe+=M(ge,Ue,Fe)+Y[4],qe=qe|0,qe=H(qe,Se[K]),qe=qe+ot|0,_e=ot,ot=Fe,Fe=H(Ue,10),Ue=ge,ge=qe;qe=ie[1]+Ce+Fe|0,ie[1]=ie[2]+pe+ot|0,ie[2]=ie[3]+fe+_e|0,ie[3]=ie[4]+ve+ge|0,ie[4]=ie[0]+Re+Ue|0,ie[0]=qe},_doFinalize:function(){var $=this._data,G=$.words,K=this._nDataBytes*8,Q=$.sigBytes*8;G[Q>>>5]|=128<<24-Q%32,G[(Q+64>>>9<<4)+14]=(K<<8|K>>>24)&16711935|(K<<24|K>>>8)&4278255360,$.sigBytes=(G.length+1)*4,this._process();for(var z=this._hash,ie=z.words,J=0;J<5;J++){var Y=ie[J];ie[J]=(Y<<8|Y>>>24)&16711935|(Y<<24|Y>>>8)&4278255360}return z},clone:function(){var $=m.clone.call(this);return $._hash=this._hash.clone(),$}});function M($,G,K){return $^G^K}function D($,G,K){return $&G|~$&K}function x($,G,K){return($|~G)^K}function k($,G,K){return $&K|G&~K}function V($,G,K){return $^(G|~K)}function H($,G){return $<<G|$>>>32-G}c.RIPEMD160=m._createHelper(N),c.HmacRIPEMD160=m._createHmacHelper(N)}(),i.RIPEMD160})}(WP)),WP.exports}var GP={exports:{}},b5;function AM(){return b5||(b5=1,function(e,t){(function(i,a){e.exports=a(Jn())})(Xt,function(i){(function(){var a=i,c=a.lib,u=c.Base,f=a.enc,m=f.Utf8,g=a.algo;g.HMAC=u.extend({init:function(E,y){E=this._hasher=new E.init,typeof y=="string"&&(y=m.parse(y));var T=E.blockSize,R=T*4;y.sigBytes>R&&(y=E.finalize(y)),y.clamp();for(var P=this._oKey=y.clone(),O=this._iKey=y.clone(),N=P.words,M=O.words,D=0;D<T;D++)N[D]^=1549556828,M[D]^=909522486;P.sigBytes=O.sigBytes=R,this.reset()},reset:function(){var E=this._hasher;E.reset(),E.update(this._iKey)},update:function(E){return this._hasher.update(E),this},finalize:function(E){var y=this._hasher,T=y.finalize(E);y.reset();var R=y.finalize(this._oKey.clone().concat(T));return R}})})()})}(GP)),GP.exports}var zP={exports:{}},R5;function $pe(){return R5||(R5=1,function(e,t){(function(i,a,c){e.exports=a(Jn(),OM(),AM())})(Xt,function(i){return function(){var a=i,c=a.lib,u=c.Base,f=c.WordArray,m=a.algo,g=m.SHA1,E=m.HMAC,y=m.PBKDF2=u.extend({cfg:u.extend({keySize:128/32,hasher:g,iterations:1}),init:function(T){this.cfg=this.cfg.extend(T)},compute:function(T,R){for(var P=this.cfg,O=E.create(P.hasher,T),N=f.create(),M=f.create([1]),D=N.words,x=M.words,k=P.keySize,V=P.iterations;D.length<k;){var H=O.update(R).finalize(M);O.reset();for(var $=H.words,G=$.length,K=H,Q=1;Q<V;Q++){K=O.finalize(K),O.reset();for(var z=K.words,ie=0;ie<G;ie++)$[ie]^=z[ie]}N.concat(H),x[0]++}return N.sigBytes=k*4,N}});a.PBKDF2=function(T,R,P){return y.create(P).compute(T,R)}}(),i.PBKDF2})}(zP)),zP.exports}var KP={exports:{}},I5;function Ip(){return I5||(I5=1,function(e,t){(function(i,a,c){e.exports=a(Jn(),OM(),AM())})(Xt,function(i){return function(){var a=i,c=a.lib,u=c.Base,f=c.WordArray,m=a.algo,g=m.MD5,E=m.EvpKDF=u.extend({cfg:u.extend({keySize:128/32,hasher:g,iterations:1}),init:function(y){this.cfg=this.cfg.extend(y)},compute:function(y,T){for(var R,P=this.cfg,O=P.hasher.create(),N=f.create(),M=N.words,D=P.keySize,x=P.iterations;M.length<D;){R&&O.update(R),R=O.update(y).finalize(T),O.reset();for(var k=1;k<x;k++)R=O.finalize(R),O.reset();N.concat(R)}return N.sigBytes=D*4,N}});a.EvpKDF=function(y,T,R){return E.create(R).compute(y,T)}}(),i.EvpKDF})}(KP)),KP.exports}var qP={exports:{}},w5;function ia(){return w5||(w5=1,function(e,t){(function(i,a,c){e.exports=a(Jn(),Ip())})(Xt,function(i){i.lib.Cipher||function(a){var c=i,u=c.lib,f=u.Base,m=u.WordArray,g=u.BufferedBlockAlgorithm,E=c.enc;E.Utf8;var y=E.Base64,T=c.algo,R=T.EvpKDF,P=u.Cipher=g.extend({cfg:f.extend(),createEncryptor:function(z,ie){return this.create(this._ENC_XFORM_MODE,z,ie)},createDecryptor:function(z,ie){return this.create(this._DEC_XFORM_MODE,z,ie)},init:function(z,ie,J){this.cfg=this.cfg.extend(J),this._xformMode=z,this._key=ie,this.reset()},reset:function(){g.reset.call(this),this._doReset()},process:function(z){return this._append(z),this._process()},finalize:function(z){z&&this._append(z);var ie=this._doFinalize();return ie},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function z(ie){return typeof ie=="string"?Q:$}return function(ie){return{encrypt:function(J,Y,oe){return z(Y).encrypt(ie,J,Y,oe)},decrypt:function(J,Y,oe){return z(Y).decrypt(ie,J,Y,oe)}}}}()});u.StreamCipher=P.extend({_doFinalize:function(){var z=this._process(!0);return z},blockSize:1});var O=c.mode={},N=u.BlockCipherMode=f.extend({createEncryptor:function(z,ie){return this.Encryptor.create(z,ie)},createDecryptor:function(z,ie){return this.Decryptor.create(z,ie)},init:function(z,ie){this._cipher=z,this._iv=ie}}),M=O.CBC=function(){var z=N.extend();z.Encryptor=z.extend({processBlock:function(J,Y){var oe=this._cipher,ue=oe.blockSize;ie.call(this,J,Y,ue),oe.encryptBlock(J,Y),this._prevBlock=J.slice(Y,Y+ue)}}),z.Decryptor=z.extend({processBlock:function(J,Y){var oe=this._cipher,ue=oe.blockSize,he=J.slice(Y,Y+ue);oe.decryptBlock(J,Y),ie.call(this,J,Y,ue),this._prevBlock=he}});function ie(J,Y,oe){var ue,he=this._iv;he?(ue=he,this._iv=a):ue=this._prevBlock;for(var Se=0;Se<oe;Se++)J[Y+Se]^=ue[Se]}return z}(),D=c.pad={},x=D.Pkcs7={pad:function(z,ie){for(var J=ie*4,Y=J-z.sigBytes%J,oe=Y<<24|Y<<16|Y<<8|Y,ue=[],he=0;he<Y;he+=4)ue.push(oe);var Se=m.create(ue,Y);z.concat(Se)},unpad:function(z){var ie=z.words[z.sigBytes-1>>>2]&255;z.sigBytes-=ie}};u.BlockCipher=P.extend({cfg:P.cfg.extend({mode:M,padding:x}),reset:function(){var z;P.reset.call(this);var ie=this.cfg,J=ie.iv,Y=ie.mode;this._xformMode==this._ENC_XFORM_MODE?z=Y.createEncryptor:(z=Y.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==z?this._mode.init(this,J&&J.words):(this._mode=z.call(Y,this,J&&J.words),this._mode.__creator=z)},_doProcessBlock:function(z,ie){this._mode.processBlock(z,ie)},_doFinalize:function(){var z,ie=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(ie.pad(this._data,this.blockSize),z=this._process(!0)):(z=this._process(!0),ie.unpad(z)),z},blockSize:128/32});var k=u.CipherParams=f.extend({init:function(z){this.mixIn(z)},toString:function(z){return(z||this.formatter).stringify(this)}}),V=c.format={},H=V.OpenSSL={stringify:function(z){var ie,J=z.ciphertext,Y=z.salt;return Y?ie=m.create([1398893684,1701076831]).concat(Y).concat(J):ie=J,ie.toString(y)},parse:function(z){var ie,J=y.parse(z),Y=J.words;return Y[0]==1398893684&&Y[1]==1701076831&&(ie=m.create(Y.slice(2,4)),Y.splice(0,4),J.sigBytes-=16),k.create({ciphertext:J,salt:ie})}},$=u.SerializableCipher=f.extend({cfg:f.extend({format:H}),encrypt:function(z,ie,J,Y){Y=this.cfg.extend(Y);var oe=z.createEncryptor(J,Y),ue=oe.finalize(ie),he=oe.cfg;return k.create({ciphertext:ue,key:J,iv:he.iv,algorithm:z,mode:he.mode,padding:he.padding,blockSize:z.blockSize,formatter:Y.format})},decrypt:function(z,ie,J,Y){Y=this.cfg.extend(Y),ie=this._parse(ie,Y.format);var oe=z.createDecryptor(J,Y).finalize(ie.ciphertext);return oe},_parse:function(z,ie){return typeof z=="string"?ie.parse(z,this):z}}),G=c.kdf={},K=G.OpenSSL={execute:function(z,ie,J,Y){Y||(Y=m.random(64/8));var oe=R.create({keySize:ie+J}).compute(z,Y),ue=m.create(oe.words.slice(ie),J*4);return oe.sigBytes=ie*4,k.create({key:oe,iv:ue,salt:Y})}},Q=u.PasswordBasedCipher=$.extend({cfg:$.cfg.extend({kdf:K}),encrypt:function(z,ie,J,Y){Y=this.cfg.extend(Y);var oe=Y.kdf.execute(J,z.keySize,z.ivSize);Y.iv=oe.iv;var ue=$.encrypt.call(this,z,ie,oe.key,Y);return ue.mixIn(oe),ue},decrypt:function(z,ie,J,Y){Y=this.cfg.extend(Y),ie=this._parse(ie,Y.format);var oe=Y.kdf.execute(J,z.keySize,z.ivSize,ie.salt);Y.iv=oe.iv;var ue=$.decrypt.call(this,z,ie,oe.key,Y);return ue}})}()})}(qP)),qP.exports}var YP={exports:{}},O5;function Hpe(){return O5||(O5=1,function(e,t){(function(i,a,c){e.exports=a(Jn(),ia())})(Xt,function(i){return i.mode.CFB=function(){var a=i.lib.BlockCipherMode.extend();a.Encryptor=a.extend({processBlock:function(u,f){var m=this._cipher,g=m.blockSize;c.call(this,u,f,g,m),this._prevBlock=u.slice(f,f+g)}}),a.Decryptor=a.extend({processBlock:function(u,f){var m=this._cipher,g=m.blockSize,E=u.slice(f,f+g);c.call(this,u,f,g,m),this._prevBlock=E}});function c(u,f,m,g){var E,y=this._iv;y?(E=y.slice(0),this._iv=void 0):E=this._prevBlock,g.encryptBlock(E,0);for(var T=0;T<m;T++)u[f+T]^=E[T]}return a}(),i.mode.CFB})}(YP)),YP.exports}var XP={exports:{}},A5;function Wpe(){return A5||(A5=1,function(e,t){(function(i,a,c){e.exports=a(Jn(),ia())})(Xt,function(i){return i.mode.CTR=function(){var a=i.lib.BlockCipherMode.extend(),c=a.Encryptor=a.extend({processBlock:function(u,f){var m=this._cipher,g=m.blockSize,E=this._iv,y=this._counter;E&&(y=this._counter=E.slice(0),this._iv=void 0);var T=y.slice(0);m.encryptBlock(T,0),y[g-1]=y[g-1]+1|0;for(var R=0;R<g;R++)u[f+R]^=T[R]}});return a.Decryptor=c,a}(),i.mode.CTR})}(XP)),XP.exports}var JP={exports:{}},N5;function Gpe(){return N5||(N5=1,function(e,t){(function(i,a,c){e.exports=a(Jn(),ia())})(Xt,function(i){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return i.mode.CTRGladman=function(){var a=i.lib.BlockCipherMode.extend();function c(m){if((m>>24&255)===255){var g=m>>16&255,E=m>>8&255,y=m&255;g===255?(g=0,E===255?(E=0,y===255?y=0:++y):++E):++g,m=0,m+=g<<16,m+=E<<8,m+=y}else m+=1<<24;return m}function u(m){return(m[0]=c(m[0]))===0&&(m[1]=c(m[1])),m}var f=a.Encryptor=a.extend({processBlock:function(m,g){var E=this._cipher,y=E.blockSize,T=this._iv,R=this._counter;T&&(R=this._counter=T.slice(0),this._iv=void 0),u(R);var P=R.slice(0);E.encryptBlock(P,0);for(var O=0;O<y;O++)m[g+O]^=P[O]}});return a.Decryptor=f,a}(),i.mode.CTRGladman})}(JP)),JP.exports}var QP={exports:{}},x5;function zpe(){return x5||(x5=1,function(e,t){(function(i,a,c){e.exports=a(Jn(),ia())})(Xt,function(i){return i.mode.OFB=function(){var a=i.lib.BlockCipherMode.extend(),c=a.Encryptor=a.extend({processBlock:function(u,f){var m=this._cipher,g=m.blockSize,E=this._iv,y=this._keystream;E&&(y=this._keystream=E.slice(0),this._iv=void 0),m.encryptBlock(y,0);for(var T=0;T<g;T++)u[f+T]^=y[T]}});return a.Decryptor=c,a}(),i.mode.OFB})}(QP)),QP.exports}var ZP={exports:{}},P5;function Kpe(){return P5||(P5=1,function(e,t){(function(i,a,c){e.exports=a(Jn(),ia())})(Xt,function(i){return i.mode.ECB=function(){var a=i.lib.BlockCipherMode.extend();return a.Encryptor=a.extend({processBlock:function(c,u){this._cipher.encryptBlock(c,u)}}),a.Decryptor=a.extend({processBlock:function(c,u){this._cipher.decryptBlock(c,u)}}),a}(),i.mode.ECB})}(ZP)),ZP.exports}var eD={exports:{}},D5;function qpe(){return D5||(D5=1,function(e,t){(function(i,a,c){e.exports=a(Jn(),ia())})(Xt,function(i){return i.pad.AnsiX923={pad:function(a,c){var u=a.sigBytes,f=c*4,m=f-u%f,g=u+m-1;a.clamp(),a.words[g>>>2]|=m<<24-g%4*8,a.sigBytes+=m},unpad:function(a){var c=a.words[a.sigBytes-1>>>2]&255;a.sigBytes-=c}},i.pad.Ansix923})}(eD)),eD.exports}var tD={exports:{}},L5;function Ype(){return L5||(L5=1,function(e,t){(function(i,a,c){e.exports=a(Jn(),ia())})(Xt,function(i){return i.pad.Iso10126={pad:function(a,c){var u=c*4,f=u-a.sigBytes%u;a.concat(i.lib.WordArray.random(f-1)).concat(i.lib.WordArray.create([f<<24],1))},unpad:function(a){var c=a.words[a.sigBytes-1>>>2]&255;a.sigBytes-=c}},i.pad.Iso10126})}(tD)),tD.exports}var nD={exports:{}},k5;function Xpe(){return k5||(k5=1,function(e,t){(function(i,a,c){e.exports=a(Jn(),ia())})(Xt,function(i){return i.pad.Iso97971={pad:function(a,c){a.concat(i.lib.WordArray.create([2147483648],1)),i.pad.ZeroPadding.pad(a,c)},unpad:function(a){i.pad.ZeroPadding.unpad(a),a.sigBytes--}},i.pad.Iso97971})}(nD)),nD.exports}var rD={exports:{}},M5;function Jpe(){return M5||(M5=1,function(e,t){(function(i,a,c){e.exports=a(Jn(),ia())})(Xt,function(i){return i.pad.ZeroPadding={pad:function(a,c){var u=c*4;a.clamp(),a.sigBytes+=u-(a.sigBytes%u||u)},unpad:function(a){for(var c=a.words,u=a.sigBytes-1,u=a.sigBytes-1;u>=0;u--)if(c[u>>>2]>>>24-u%4*8&255){a.sigBytes=u+1;break}}},i.pad.ZeroPadding})}(rD)),rD.exports}var iD={exports:{}},U5;function Qpe(){return U5||(U5=1,function(e,t){(function(i,a,c){e.exports=a(Jn(),ia())})(Xt,function(i){return i.pad.NoPadding={pad:function(){},unpad:function(){}},i.pad.NoPadding})}(iD)),iD.exports}var oD={exports:{}},F5;function Zpe(){return F5||(F5=1,function(e,t){(function(i,a,c){e.exports=a(Jn(),ia())})(Xt,function(i){return function(a){var c=i,u=c.lib,f=u.CipherParams,m=c.enc,g=m.Hex,E=c.format;E.Hex={stringify:function(y){return y.ciphertext.toString(g)},parse:function(y){var T=g.parse(y);return f.create({ciphertext:T})}}}(),i.format.Hex})}(oD)),oD.exports}var aD={exports:{}},V5;function eme(){return V5||(V5=1,function(e,t){(function(i,a,c){e.exports=a(Jn(),Mg(),Ug(),Ip(),ia())})(Xt,function(i){return function(){var a=i,c=a.lib,u=c.BlockCipher,f=a.algo,m=[],g=[],E=[],y=[],T=[],R=[],P=[],O=[],N=[],M=[];(function(){for(var k=[],V=0;V<256;V++)V<128?k[V]=V<<1:k[V]=V<<1^283;for(var H=0,$=0,V=0;V<256;V++){var G=$^$<<1^$<<2^$<<3^$<<4;G=G>>>8^G&255^99,m[H]=G,g[G]=H;var K=k[H],Q=k[K],z=k[Q],ie=k[G]*257^G*16843008;E[H]=ie<<24|ie>>>8,y[H]=ie<<16|ie>>>16,T[H]=ie<<8|ie>>>24,R[H]=ie;var ie=z*16843009^Q*65537^K*257^H*16843008;P[G]=ie<<24|ie>>>8,O[G]=ie<<16|ie>>>16,N[G]=ie<<8|ie>>>24,M[G]=ie,H?(H=K^k[k[k[z^K]]],$^=k[k[$]]):H=$=1}})();var D=[0,1,2,4,8,16,32,64,128,27,54],x=f.AES=u.extend({_doReset:function(){var k;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var V=this._keyPriorReset=this._key,H=V.words,$=V.sigBytes/4,G=this._nRounds=$+6,K=(G+1)*4,Q=this._keySchedule=[],z=0;z<K;z++)z<$?Q[z]=H[z]:(k=Q[z-1],z%$?$>6&&z%$==4&&(k=m[k>>>24]<<24|m[k>>>16&255]<<16|m[k>>>8&255]<<8|m[k&255]):(k=k<<8|k>>>24,k=m[k>>>24]<<24|m[k>>>16&255]<<16|m[k>>>8&255]<<8|m[k&255],k^=D[z/$|0]<<24),Q[z]=Q[z-$]^k);for(var ie=this._invKeySchedule=[],J=0;J<K;J++){var z=K-J;if(J%4)var k=Q[z];else var k=Q[z-4];J<4||z<=4?ie[J]=k:ie[J]=P[m[k>>>24]]^O[m[k>>>16&255]]^N[m[k>>>8&255]]^M[m[k&255]]}}},encryptBlock:function(k,V){this._doCryptBlock(k,V,this._keySchedule,E,y,T,R,m)},decryptBlock:function(k,V){var H=k[V+1];k[V+1]=k[V+3],k[V+3]=H,this._doCryptBlock(k,V,this._invKeySchedule,P,O,N,M,g);var H=k[V+1];k[V+1]=k[V+3],k[V+3]=H},_doCryptBlock:function(k,V,H,$,G,K,Q,z){for(var ie=this._nRounds,J=k[V]^H[0],Y=k[V+1]^H[1],oe=k[V+2]^H[2],ue=k[V+3]^H[3],he=4,Se=1;Se<ie;Se++){var ve=$[J>>>24]^G[Y>>>16&255]^K[oe>>>8&255]^Q[ue&255]^H[he++],Re=$[Y>>>24]^G[oe>>>16&255]^K[ue>>>8&255]^Q[J&255]^H[he++],Ce=$[oe>>>24]^G[ue>>>16&255]^K[J>>>8&255]^Q[Y&255]^H[he++],pe=$[ue>>>24]^G[J>>>16&255]^K[Y>>>8&255]^Q[oe&255]^H[he++];J=ve,Y=Re,oe=Ce,ue=pe}var ve=(z[J>>>24]<<24|z[Y>>>16&255]<<16|z[oe>>>8&255]<<8|z[ue&255])^H[he++],Re=(z[Y>>>24]<<24|z[oe>>>16&255]<<16|z[ue>>>8&255]<<8|z[J&255])^H[he++],Ce=(z[oe>>>24]<<24|z[ue>>>16&255]<<16|z[J>>>8&255]<<8|z[Y&255])^H[he++],pe=(z[ue>>>24]<<24|z[J>>>16&255]<<16|z[Y>>>8&255]<<8|z[oe&255])^H[he++];k[V]=ve,k[V+1]=Re,k[V+2]=Ce,k[V+3]=pe},keySize:256/32});a.AES=u._createHelper(x)}(),i.AES})}(aD)),aD.exports}var sD={exports:{}},j5;function tme(){return j5||(j5=1,function(e,t){(function(i,a,c){e.exports=a(Jn(),Mg(),Ug(),Ip(),ia())})(Xt,function(i){return function(){var a=i,c=a.lib,u=c.WordArray,f=c.BlockCipher,m=a.algo,g=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],E=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],y=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],T=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],R=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],P=m.DES=f.extend({_doReset:function(){for(var D=this._key,x=D.words,k=[],V=0;V<56;V++){var H=g[V]-1;k[V]=x[H>>>5]>>>31-H%32&1}for(var $=this._subKeys=[],G=0;G<16;G++){for(var K=$[G]=[],Q=y[G],V=0;V<24;V++)K[V/6|0]|=k[(E[V]-1+Q)%28]<<31-V%6,K[4+(V/6|0)]|=k[28+(E[V+24]-1+Q)%28]<<31-V%6;K[0]=K[0]<<1|K[0]>>>31;for(var V=1;V<7;V++)K[V]=K[V]>>>(V-1)*4+3;K[7]=K[7]<<5|K[7]>>>27}for(var z=this._invSubKeys=[],V=0;V<16;V++)z[V]=$[15-V]},encryptBlock:function(D,x){this._doCryptBlock(D,x,this._subKeys)},decryptBlock:function(D,x){this._doCryptBlock(D,x,this._invSubKeys)},_doCryptBlock:function(D,x,k){this._lBlock=D[x],this._rBlock=D[x+1],O.call(this,4,252645135),O.call(this,16,65535),N.call(this,2,858993459),N.call(this,8,16711935),O.call(this,1,1431655765);for(var V=0;V<16;V++){for(var H=k[V],$=this._lBlock,G=this._rBlock,K=0,Q=0;Q<8;Q++)K|=T[Q][((G^H[Q])&R[Q])>>>0];this._lBlock=G,this._rBlock=$^K}var z=this._lBlock;this._lBlock=this._rBlock,this._rBlock=z,O.call(this,1,1431655765),N.call(this,8,16711935),N.call(this,2,858993459),O.call(this,16,65535),O.call(this,4,252645135),D[x]=this._lBlock,D[x+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function O(D,x){var k=(this._lBlock>>>D^this._rBlock)&x;this._rBlock^=k,this._lBlock^=k<<D}function N(D,x){var k=(this._rBlock>>>D^this._lBlock)&x;this._lBlock^=k,this._rBlock^=k<<D}a.DES=f._createHelper(P);var M=m.TripleDES=f.extend({_doReset:function(){var D=this._key,x=D.words;if(x.length!==2&&x.length!==4&&x.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var k=x.slice(0,2),V=x.length<4?x.slice(0,2):x.slice(2,4),H=x.length<6?x.slice(0,2):x.slice(4,6);this._des1=P.createEncryptor(u.create(k)),this._des2=P.createEncryptor(u.create(V)),this._des3=P.createEncryptor(u.create(H))},encryptBlock:function(D,x){this._des1.encryptBlock(D,x),this._des2.decryptBlock(D,x),this._des3.encryptBlock(D,x)},decryptBlock:function(D,x){this._des3.decryptBlock(D,x),this._des2.encryptBlock(D,x),this._des1.decryptBlock(D,x)},keySize:192/32,ivSize:64/32,blockSize:64/32});a.TripleDES=f._createHelper(M)}(),i.TripleDES})}(sD)),sD.exports}var cD={exports:{}},B5;function nme(){return B5||(B5=1,function(e,t){(function(i,a,c){e.exports=a(Jn(),Mg(),Ug(),Ip(),ia())})(Xt,function(i){return function(){var a=i,c=a.lib,u=c.StreamCipher,f=a.algo,m=f.RC4=u.extend({_doReset:function(){for(var y=this._key,T=y.words,R=y.sigBytes,P=this._S=[],O=0;O<256;O++)P[O]=O;for(var O=0,N=0;O<256;O++){var M=O%R,D=T[M>>>2]>>>24-M%4*8&255;N=(N+P[O]+D)%256;var x=P[O];P[O]=P[N],P[N]=x}this._i=this._j=0},_doProcessBlock:function(y,T){y[T]^=g.call(this)},keySize:256/32,ivSize:0});function g(){for(var y=this._S,T=this._i,R=this._j,P=0,O=0;O<4;O++){T=(T+1)%256,R=(R+y[T])%256;var N=y[T];y[T]=y[R],y[R]=N,P|=y[(y[T]+y[R])%256]<<24-O*8}return this._i=T,this._j=R,P}a.RC4=u._createHelper(m);var E=f.RC4Drop=m.extend({cfg:m.cfg.extend({drop:192}),_doReset:function(){m._doReset.call(this);for(var y=this.cfg.drop;y>0;y--)g.call(this)}});a.RC4Drop=u._createHelper(E)}(),i.RC4})}(cD)),cD.exports}var lD={exports:{}},$5;function rme(){return $5||($5=1,function(e,t){(function(i,a,c){e.exports=a(Jn(),Mg(),Ug(),Ip(),ia())})(Xt,function(i){return function(){var a=i,c=a.lib,u=c.StreamCipher,f=a.algo,m=[],g=[],E=[],y=f.Rabbit=u.extend({_doReset:function(){for(var R=this._key.words,P=this.cfg.iv,O=0;O<4;O++)R[O]=(R[O]<<8|R[O]>>>24)&16711935|(R[O]<<24|R[O]>>>8)&4278255360;var N=this._X=[R[0],R[3]<<16|R[2]>>>16,R[1],R[0]<<16|R[3]>>>16,R[2],R[1]<<16|R[0]>>>16,R[3],R[2]<<16|R[1]>>>16],M=this._C=[R[2]<<16|R[2]>>>16,R[0]&4294901760|R[1]&65535,R[3]<<16|R[3]>>>16,R[1]&4294901760|R[2]&65535,R[0]<<16|R[0]>>>16,R[2]&4294901760|R[3]&65535,R[1]<<16|R[1]>>>16,R[3]&4294901760|R[0]&65535];this._b=0;for(var O=0;O<4;O++)T.call(this);for(var O=0;O<8;O++)M[O]^=N[O+4&7];if(P){var D=P.words,x=D[0],k=D[1],V=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,H=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360,$=V>>>16|H&4294901760,G=H<<16|V&65535;M[0]^=V,M[1]^=$,M[2]^=H,M[3]^=G,M[4]^=V,M[5]^=$,M[6]^=H,M[7]^=G;for(var O=0;O<4;O++)T.call(this)}},_doProcessBlock:function(R,P){var O=this._X;T.call(this),m[0]=O[0]^O[5]>>>16^O[3]<<16,m[1]=O[2]^O[7]>>>16^O[5]<<16,m[2]=O[4]^O[1]>>>16^O[7]<<16,m[3]=O[6]^O[3]>>>16^O[1]<<16;for(var N=0;N<4;N++)m[N]=(m[N]<<8|m[N]>>>24)&16711935|(m[N]<<24|m[N]>>>8)&4278255360,R[P+N]^=m[N]},blockSize:128/32,ivSize:64/32});function T(){for(var R=this._X,P=this._C,O=0;O<8;O++)g[O]=P[O];P[0]=P[0]+1295307597+this._b|0,P[1]=P[1]+3545052371+(P[0]>>>0<g[0]>>>0?1:0)|0,P[2]=P[2]+886263092+(P[1]>>>0<g[1]>>>0?1:0)|0,P[3]=P[3]+1295307597+(P[2]>>>0<g[2]>>>0?1:0)|0,P[4]=P[4]+3545052371+(P[3]>>>0<g[3]>>>0?1:0)|0,P[5]=P[5]+886263092+(P[4]>>>0<g[4]>>>0?1:0)|0,P[6]=P[6]+1295307597+(P[5]>>>0<g[5]>>>0?1:0)|0,P[7]=P[7]+3545052371+(P[6]>>>0<g[6]>>>0?1:0)|0,this._b=P[7]>>>0<g[7]>>>0?1:0;for(var O=0;O<8;O++){var N=R[O]+P[O],M=N&65535,D=N>>>16,x=((M*M>>>17)+M*D>>>15)+D*D,k=((N&4294901760)*N|0)+((N&65535)*N|0);E[O]=x^k}R[0]=E[0]+(E[7]<<16|E[7]>>>16)+(E[6]<<16|E[6]>>>16)|0,R[1]=E[1]+(E[0]<<8|E[0]>>>24)+E[7]|0,R[2]=E[2]+(E[1]<<16|E[1]>>>16)+(E[0]<<16|E[0]>>>16)|0,R[3]=E[3]+(E[2]<<8|E[2]>>>24)+E[1]|0,R[4]=E[4]+(E[3]<<16|E[3]>>>16)+(E[2]<<16|E[2]>>>16)|0,R[5]=E[5]+(E[4]<<8|E[4]>>>24)+E[3]|0,R[6]=E[6]+(E[5]<<16|E[5]>>>16)+(E[4]<<16|E[4]>>>16)|0,R[7]=E[7]+(E[6]<<8|E[6]>>>24)+E[5]|0}a.Rabbit=u._createHelper(y)}(),i.Rabbit})}(lD)),lD.exports}var uD={exports:{}},H5;function ime(){return H5||(H5=1,function(e,t){(function(i,a,c){e.exports=a(Jn(),Mg(),Ug(),Ip(),ia())})(Xt,function(i){return function(){var a=i,c=a.lib,u=c.StreamCipher,f=a.algo,m=[],g=[],E=[],y=f.RabbitLegacy=u.extend({_doReset:function(){var R=this._key.words,P=this.cfg.iv,O=this._X=[R[0],R[3]<<16|R[2]>>>16,R[1],R[0]<<16|R[3]>>>16,R[2],R[1]<<16|R[0]>>>16,R[3],R[2]<<16|R[1]>>>16],N=this._C=[R[2]<<16|R[2]>>>16,R[0]&4294901760|R[1]&65535,R[3]<<16|R[3]>>>16,R[1]&4294901760|R[2]&65535,R[0]<<16|R[0]>>>16,R[2]&4294901760|R[3]&65535,R[1]<<16|R[1]>>>16,R[3]&4294901760|R[0]&65535];this._b=0;for(var M=0;M<4;M++)T.call(this);for(var M=0;M<8;M++)N[M]^=O[M+4&7];if(P){var D=P.words,x=D[0],k=D[1],V=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,H=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360,$=V>>>16|H&4294901760,G=H<<16|V&65535;N[0]^=V,N[1]^=$,N[2]^=H,N[3]^=G,N[4]^=V,N[5]^=$,N[6]^=H,N[7]^=G;for(var M=0;M<4;M++)T.call(this)}},_doProcessBlock:function(R,P){var O=this._X;T.call(this),m[0]=O[0]^O[5]>>>16^O[3]<<16,m[1]=O[2]^O[7]>>>16^O[5]<<16,m[2]=O[4]^O[1]>>>16^O[7]<<16,m[3]=O[6]^O[3]>>>16^O[1]<<16;for(var N=0;N<4;N++)m[N]=(m[N]<<8|m[N]>>>24)&16711935|(m[N]<<24|m[N]>>>8)&4278255360,R[P+N]^=m[N]},blockSize:128/32,ivSize:64/32});function T(){for(var R=this._X,P=this._C,O=0;O<8;O++)g[O]=P[O];P[0]=P[0]+1295307597+this._b|0,P[1]=P[1]+3545052371+(P[0]>>>0<g[0]>>>0?1:0)|0,P[2]=P[2]+886263092+(P[1]>>>0<g[1]>>>0?1:0)|0,P[3]=P[3]+1295307597+(P[2]>>>0<g[2]>>>0?1:0)|0,P[4]=P[4]+3545052371+(P[3]>>>0<g[3]>>>0?1:0)|0,P[5]=P[5]+886263092+(P[4]>>>0<g[4]>>>0?1:0)|0,P[6]=P[6]+1295307597+(P[5]>>>0<g[5]>>>0?1:0)|0,P[7]=P[7]+3545052371+(P[6]>>>0<g[6]>>>0?1:0)|0,this._b=P[7]>>>0<g[7]>>>0?1:0;for(var O=0;O<8;O++){var N=R[O]+P[O],M=N&65535,D=N>>>16,x=((M*M>>>17)+M*D>>>15)+D*D,k=((N&4294901760)*N|0)+((N&65535)*N|0);E[O]=x^k}R[0]=E[0]+(E[7]<<16|E[7]>>>16)+(E[6]<<16|E[6]>>>16)|0,R[1]=E[1]+(E[0]<<8|E[0]>>>24)+E[7]|0,R[2]=E[2]+(E[1]<<16|E[1]>>>16)+(E[0]<<16|E[0]>>>16)|0,R[3]=E[3]+(E[2]<<8|E[2]>>>24)+E[1]|0,R[4]=E[4]+(E[3]<<16|E[3]>>>16)+(E[2]<<16|E[2]>>>16)|0,R[5]=E[5]+(E[4]<<8|E[4]>>>24)+E[3]|0,R[6]=E[6]+(E[5]<<16|E[5]>>>16)+(E[4]<<16|E[4]>>>16)|0,R[7]=E[7]+(E[6]<<8|E[6]>>>24)+E[5]|0}a.RabbitLegacy=u._createHelper(y)}(),i.RabbitLegacy})}(uD)),uD.exports}(function(e,t){(function(i,a,c){e.exports=a(Jn(),UI(),kpe(),Mpe(),Mg(),Upe(),Ug(),OM(),C9(),Fpe(),T9(),Vpe(),jpe(),Bpe(),AM(),$pe(),Ip(),ia(),Hpe(),Wpe(),Gpe(),zpe(),Kpe(),qpe(),Ype(),Xpe(),Jpe(),Qpe(),Zpe(),eme(),tme(),nme(),rme(),ime())})(Xt,function(i){return i})})(y9);var ome=y9.exports;const W5=jh(ome);let b9="U2FsdGVkX1/nIO3//tPu/+LNS4S4tsxT3MzmKKuvXDxFFYxlol+eYrZkKcLoUBHMNoDedcuF62hF/qfPSSy59Q==";{const e=W5.AES.decrypt("U2FsdGVkX1/nIO3//tPu/+LNS4S4tsxT3MzmKKuvXDxFFYxlol+eYrZkKcLoUBHMNoDedcuF62hF/qfPSSy59Q==","U2FsdGVkX1/fp5K6GAphzVxz");b9=JSON.parse(e.toString(W5.enc.Utf8))}const Gt={appId:b9,channel:{}.AGORA_CHANNEL||"test",token:{}.AGORA_TOKEN?{}.AGORA_TOKEN:null};function ame(){return[{channel:{}.AGORA_CHANNEL_0||"test0",token:{}.AGORA_TOKEN_0},{channel:{}.AGORA_CHANNEL_1||"test1",token:{}.AGORA_TOKEN_1},{channel:{}.AGORA_CHANNEL_2||"test2",token:{}.AGORA_TOKEN_2},{channel:{}.AGORA_CHANNEL_3||"test3",token:{}.AGORA_TOKEN_3},{channel:{}.AGORA_CHANNEL_4||"test4",token:{}.AGORA_TOKEN_4},{channel:{}.AGORA_CHANNEL_5||"test5",token:{}.AGORA_TOKEN_5},{channel:{}.AGORA_CHANNEL_6||"test6",token:{}.AGORA_TOKEN_6},{channel:{}.AGORA_CHANNEL_7||"test7",token:{}.AGORA_TOKEN_7},{channel:{}.AGORA_CHANNEL_8||"test8",token:{}.AGORA_TOKEN_8},{channel:{}.AGORA_CHANNEL_9||"test9",token:{}.AGORA_TOKEN_9}]}const wl=e=>{a5(String(e));const t=Ope();return a5(),t},Tu=()=>"https://www.agora.io/en/wp-content/uploads/2022/10/3d-spatial-audio-icon.svg";function NM({micOn:e,cameraOn:t,renderAction:i,renderLocalUser:a,renderRemoteUsers:c}){const u=xl(),f=LI()||0,m=C.useMemo(()=>wl(f),[f]),g=C.useMemo(()=>Tu(),[]),E=bu(),y=E.filter(O=>O.hasAudio||O.hasVideo),T=e||t,{localMicrophoneTrack:R}=Dg(e),{localCameraTrack:P}=Lg(t);return Pg([R,P]),le.jsxs(le.Fragment,{children:[i?i():void 0,le.jsx(yM,{published:y.length+(T?1:0),total:E.length+1}),le.jsxs(xc,{children:[u&&(a?a():le.jsx(xc.Item,{children:le.jsx(SM,{audioTrack:R,cameraOn:t,cover:g,micOn:e,videoTrack:P,children:le.jsx(fd,{children:`${m}{${f}}`})})})),c?c():void 0]})]})}const lR=({children:e,clientConfig:t={mode:"rtc",codec:"vp8"}})=>{const[i]=C.useState(()=>dp.createClient(t));return le.jsx(h9,{client:i,children:e})},tc=({calling:e,micOn:t,cameraOn:i,setMic:a,setCamera:c,setCalling:u})=>le.jsx(le.Fragment,{children:le.jsxs("div",{className:"inset-0 top-a flex justify-center items-center gap-3 px-6 py-3 bg-#21242c c-coolgray-3",children:[le.jsxs("div",{className:"flex-1 flex top-0 left-0 h-full items-center gap-3 px-6 py-3",children:[a&&le.jsx("button",{className:"btn",onClick:()=>a(),children:t?le.jsx(Xfe,{}):le.jsx(Jfe,{})}),c&&le.jsx("button",{className:"btn",onClick:()=>c(),children:i?le.jsx(Qfe,{}):le.jsx(Zfe,{})})]}),u&&le.jsx("button",{className:hM("btn btn-phone",{"btn-phone-active":e}),onClick:()=>u(),children:e?le.jsx("i",{className:"i-mdi-phone-hangup"}):le.jsx("i",{className:"i-mdi-phone"})})]})}),G5=e=>{let t;const i=new Set,a=(g,E)=>{const y=typeof g=="function"?g(t):g;if(!Object.is(y,t)){const T=t;t=E??typeof y!="object"?y:Object.assign({},t,y),i.forEach(R=>R(t,T))}},c=()=>t,m={setState:a,getState:c,subscribe:g=>(i.add(g),()=>i.delete(g)),destroy:()=>{i.clear()}};return t=e(a,c,m),m},sme=e=>e?G5(e):G5;var R9={exports:{}},I9={},w9={exports:{}},O9={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pg=C;function cme(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var lme=typeof Object.is=="function"?Object.is:cme,ume=pg.useState,dme=pg.useEffect,hme=pg.useLayoutEffect,fme=pg.useDebugValue;function pme(e,t){var i=t(),a=ume({inst:{value:i,getSnapshot:t}}),c=a[0].inst,u=a[1];return hme(function(){c.value=i,c.getSnapshot=t,dD(c)&&u({inst:c})},[e,i,t]),dme(function(){return dD(c)&&u({inst:c}),e(function(){dD(c)&&u({inst:c})})},[e]),fme(i),i}function dD(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!lme(e,i)}catch{return!0}}function mme(e,t){return t()}var gme=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?mme:pme;O9.useSyncExternalStore=pg.useSyncExternalStore!==void 0?pg.useSyncExternalStore:gme;w9.exports=O9;var vme=w9.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FI=C,Eme=vme;function _me(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Sme=typeof Object.is=="function"?Object.is:_me,yme=Eme.useSyncExternalStore,Cme=FI.useRef,Tme=FI.useEffect,bme=FI.useMemo,Rme=FI.useDebugValue;I9.useSyncExternalStoreWithSelector=function(e,t,i,a,c){var u=Cme(null);if(u.current===null){var f={hasValue:!1,value:null};u.current=f}else f=u.current;u=bme(function(){function g(P){if(!E){if(E=!0,y=P,P=a(P),c!==void 0&&f.hasValue){var O=f.value;if(c(O,P))return T=O}return T=P}if(O=T,Sme(y,P))return O;var N=a(P);return c!==void 0&&c(O,N)?O:(y=P,T=N)}var E=!1,y,T,R=i===void 0?null:i;return[function(){return g(t())},R===null?void 0:function(){return g(R())}]},[t,i,a,c]);var m=yme(e,u[0],u[1]);return Tme(function(){f.hasValue=!0,f.value=m},[m]),Rme(m),m};R9.exports=I9;var Ime=R9.exports;const wme=jh(Ime),{useSyncExternalStoreWithSelector:Ome}=wme;function Ame(e,t=e.getState,i){const a=Ome(e.subscribe,e.getState,e.getServerState||e.getState,t,i);return C.useDebugValue(a),a}const z5=e=>{const t=typeof e=="function"?sme(e):e,i=(a,c)=>Ame(t,a,c);return Object.assign(i,t),i},Nme=e=>e?z5(e):z5,xme=Gt.appId,Pme=ame(),q_=Nme((e,t)=>({getRooms:()=>{let{rooms:i}=t();i=Pme.map(({token:a,channel:c})=>{const u=dp.createClient({mode:"live",codec:"vp8"});return u.join(xme,c,a||null,null),{channel:c,token:a,client:u}}),e({rooms:i})},selectChannel:async i=>{let{hostRoom:a,localTracks:c}=t();const{rooms:u}=t();if(!i){a&&(c&&a.client.localTracks.length>0&&await a.client.unpublish(c),a.client.setClientRole("audience"),a=null,e({hostRoom:a,localTracks:c}));return}if(a){if(a.client.channelName===i)return;c&&await a.client.unpublish(c),await a.client.setClientRole("audience")}a=u==null?void 0:u.find(f=>f.client.channelName===i),a&&(await a.client.setClientRole("host"),c||(c=await dp.createMicrophoneAndCameraTracks()),await a.client.publish(c)),e({localTracks:c,hostRoom:a})},dispose:()=>{const{rooms:i,hostRoom:a}=t();if(a==null||a.client.leave(),i)for(const c of i)c.client.leave()}}));var Dme=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function Lme(e){var t=e.defaultInputValue,i=t===void 0?"":t,a=e.defaultMenuIsOpen,c=a===void 0?!1:a,u=e.defaultValue,f=u===void 0?null:u,m=e.inputValue,g=e.menuIsOpen,E=e.onChange,y=e.onInputChange,T=e.onMenuClose,R=e.onMenuOpen,P=e.value,O=Xn(e,Dme),N=C.useState(m!==void 0?m:i),M=Ye(N,2),D=M[0],x=M[1],k=C.useState(g!==void 0?g:c),V=Ye(k,2),H=V[0],$=V[1],G=C.useState(P!==void 0?P:f),K=Ye(G,2),Q=K[0],z=K[1],ie=C.useCallback(function(ve,Re){typeof E=="function"&&E(ve,Re),z(ve)},[E]),J=C.useCallback(function(ve,Re){var Ce;typeof y=="function"&&(Ce=y(ve,Re)),x(Ce!==void 0?Ce:ve)},[y]),Y=C.useCallback(function(){typeof R=="function"&&R(),$(!0)},[R]),oe=C.useCallback(function(){typeof T=="function"&&T(),$(!1)},[T]),ue=m!==void 0?m:D,he=g!==void 0?g:H,Se=P!==void 0?P:Q;return Ae(Ae({},O),{},{inputValue:ue,menuIsOpen:he,onChange:ie,onInputChange:J,onMenuClose:oe,onMenuOpen:Y,value:Se})}function kme(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function Mme(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var Ume=function(){function e(i){var a=this;this._insertTag=function(c){var u;a.tags.length===0?a.insertionPoint?u=a.insertionPoint.nextSibling:a.prepend?u=a.container.firstChild:u=a.before:u=a.tags[a.tags.length-1].nextSibling,a.container.insertBefore(c,u),a.tags.push(c)},this.isSpeedy=i.speedy===void 0?!0:i.speedy,this.tags=[],this.ctr=0,this.nonce=i.nonce,this.key=i.key,this.container=i.container,this.prepend=i.prepend,this.insertionPoint=i.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(a){a.forEach(this._insertTag)},t.insert=function(a){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(Mme(this));var c=this.tags[this.tags.length-1];if(this.isSpeedy){var u=kme(c);try{u.insertRule(a,u.cssRules.length)}catch{}}else c.appendChild(document.createTextNode(a));this.ctr++},t.flush=function(){this.tags.forEach(function(a){return a.parentNode&&a.parentNode.removeChild(a)}),this.tags=[],this.ctr=0},e}(),Ta="-ms-",D1="-moz-",hr="-webkit-",A9="comm",xM="rule",PM="decl",Fme="@import",N9="@keyframes",Vme="@layer",jme=Math.abs,VI=String.fromCharCode,Bme=Object.assign;function $me(e,t){return Xo(e,0)^45?(((t<<2^Xo(e,0))<<2^Xo(e,1))<<2^Xo(e,2))<<2^Xo(e,3):0}function x9(e){return e.trim()}function Hme(e,t){return(e=t.exec(e))?e[0]:e}function fr(e,t,i){return e.replace(t,i)}function vk(e,t){return e.indexOf(t)}function Xo(e,t){return e.charCodeAt(t)|0}function TS(e,t,i){return e.slice(t,i)}function vu(e){return e.length}function DM(e){return e.length}function uR(e,t){return t.push(e),e}function Wme(e,t){return e.map(t).join("")}var jI=1,mg=1,P9=0,Ss=0,so=0,Fg="";function BI(e,t,i,a,c,u,f){return{value:e,root:t,parent:i,type:a,props:c,children:u,line:jI,column:mg,length:f,return:""}}function __(e,t){return Bme(BI("",null,null,"",null,null,0),e,{length:-e.length},t)}function Gme(){return so}function zme(){return so=Ss>0?Xo(Fg,--Ss):0,mg--,so===10&&(mg=1,jI--),so}function Ys(){return so=Ss<P9?Xo(Fg,Ss++):0,mg++,so===10&&(mg=1,jI++),so}function Cu(){return Xo(Fg,Ss)}function UR(){return Ss}function qS(e,t){return TS(Fg,e,t)}function bS(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function D9(e){return jI=mg=1,P9=vu(Fg=e),Ss=0,[]}function L9(e){return Fg="",e}function FR(e){return x9(qS(Ss-1,Ek(e===91?e+2:e===40?e+1:e)))}function Kme(e){for(;(so=Cu())&&so<33;)Ys();return bS(e)>2||bS(so)>3?"":" "}function qme(e,t){for(;--t&&Ys()&&!(so<48||so>102||so>57&&so<65||so>70&&so<97););return qS(e,UR()+(t<6&&Cu()==32&&Ys()==32))}function Ek(e){for(;Ys();)switch(so){case e:return Ss;case 34:case 39:e!==34&&e!==39&&Ek(so);break;case 40:e===41&&Ek(e);break;case 92:Ys();break}return Ss}function Yme(e,t){for(;Ys()&&e+so!==47+10;)if(e+so===42+42&&Cu()===47)break;return"/*"+qS(t,Ss-1)+"*"+VI(e===47?e:Ys())}function Xme(e){for(;!bS(Cu());)Ys();return qS(e,Ss)}function Jme(e){return L9(VR("",null,null,null,[""],e=D9(e),0,[0],e))}function VR(e,t,i,a,c,u,f,m,g){for(var E=0,y=0,T=f,R=0,P=0,O=0,N=1,M=1,D=1,x=0,k="",V=c,H=u,$=a,G=k;M;)switch(O=x,x=Ys()){case 40:if(O!=108&&Xo(G,T-1)==58){vk(G+=fr(FR(x),"&","&\f"),"&\f")!=-1&&(D=-1);break}case 34:case 39:case 91:G+=FR(x);break;case 9:case 10:case 13:case 32:G+=Kme(O);break;case 92:G+=qme(UR()-1,7);continue;case 47:switch(Cu()){case 42:case 47:uR(Qme(Yme(Ys(),UR()),t,i),g);break;default:G+="/"}break;case 123*N:m[E++]=vu(G)*D;case 125*N:case 59:case 0:switch(x){case 0:case 125:M=0;case 59+y:D==-1&&(G=fr(G,/\f/g,"")),P>0&&vu(G)-T&&uR(P>32?q5(G+";",a,i,T-1):q5(fr(G," ","")+";",a,i,T-2),g);break;case 59:G+=";";default:if(uR($=K5(G,t,i,E,y,c,m,k,V=[],H=[],T),u),x===123)if(y===0)VR(G,t,$,$,V,u,T,m,H);else switch(R===99&&Xo(G,3)===110?100:R){case 100:case 108:case 109:case 115:VR(e,$,$,a&&uR(K5(e,$,$,0,0,c,m,k,c,V=[],T),H),c,H,T,m,a?V:H);break;default:VR(G,$,$,$,[""],H,0,m,H)}}E=y=P=0,N=D=1,k=G="",T=f;break;case 58:T=1+vu(G),P=O;default:if(N<1){if(x==123)--N;else if(x==125&&N++==0&&zme()==125)continue}switch(G+=VI(x),x*N){case 38:D=y>0?1:(G+="\f",-1);break;case 44:m[E++]=(vu(G)-1)*D,D=1;break;case 64:Cu()===45&&(G+=FR(Ys())),R=Cu(),y=T=vu(k=G+=Xme(UR())),x++;break;case 45:O===45&&vu(G)==2&&(N=0)}}return u}function K5(e,t,i,a,c,u,f,m,g,E,y){for(var T=c-1,R=c===0?u:[""],P=DM(R),O=0,N=0,M=0;O<a;++O)for(var D=0,x=TS(e,T+1,T=jme(N=f[O])),k=e;D<P;++D)(k=x9(N>0?R[D]+" "+x:fr(x,/&\f/g,R[D])))&&(g[M++]=k);return BI(e,t,i,c===0?xM:m,g,E,y)}function Qme(e,t,i){return BI(e,t,i,A9,VI(Gme()),TS(e,2,-2),0)}function q5(e,t,i,a){return BI(e,t,i,PM,TS(e,0,a),TS(e,a+1,-1),a)}function ng(e,t){for(var i="",a=DM(e),c=0;c<a;c++)i+=t(e[c],c,e,t)||"";return i}function Zme(e,t,i,a){switch(e.type){case Vme:if(e.children.length)break;case Fme:case PM:return e.return=e.return||e.value;case A9:return"";case N9:return e.return=e.value+"{"+ng(e.children,a)+"}";case xM:e.value=e.props.join(",")}return vu(i=ng(e.children,a))?e.return=e.value+"{"+i+"}":""}function e0e(e){var t=DM(e);return function(i,a,c,u){for(var f="",m=0;m<t;m++)f+=e[m](i,a,c,u)||"";return f}}function t0e(e){return function(t){t.root||(t=t.return)&&e(t)}}function n0e(e){var t=Object.create(null);return function(i){return t[i]===void 0&&(t[i]=e(i)),t[i]}}var r0e=function(t,i,a){for(var c=0,u=0;c=u,u=Cu(),c===38&&u===12&&(i[a]=1),!bS(u);)Ys();return qS(t,Ss)},i0e=function(t,i){var a=-1,c=44;do switch(bS(c)){case 0:c===38&&Cu()===12&&(i[a]=1),t[a]+=r0e(Ss-1,i,a);break;case 2:t[a]+=FR(c);break;case 4:if(c===44){t[++a]=Cu()===58?"&\f":"",i[a]=t[a].length;break}default:t[a]+=VI(c)}while(c=Ys());return t},o0e=function(t,i){return L9(i0e(D9(t),i))},Y5=new WeakMap,a0e=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var i=t.value,a=t.parent,c=t.column===a.column&&t.line===a.line;a.type!=="rule";)if(a=a.parent,!a)return;if(!(t.props.length===1&&i.charCodeAt(0)!==58&&!Y5.get(a))&&!c){Y5.set(t,!0);for(var u=[],f=o0e(i,u),m=a.props,g=0,E=0;g<f.length;g++)for(var y=0;y<m.length;y++,E++)t.props[E]=u[g]?f[g].replace(/&\f/g,m[y]):m[y]+" "+f[g]}}},s0e=function(t){if(t.type==="decl"){var i=t.value;i.charCodeAt(0)===108&&i.charCodeAt(2)===98&&(t.return="",t.value="")}};function k9(e,t){switch($me(e,t)){case 5103:return hr+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return hr+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return hr+e+D1+e+Ta+e+e;case 6828:case 4268:return hr+e+Ta+e+e;case 6165:return hr+e+Ta+"flex-"+e+e;case 5187:return hr+e+fr(e,/(\w+).+(:[^]+)/,hr+"box-$1$2"+Ta+"flex-$1$2")+e;case 5443:return hr+e+Ta+"flex-item-"+fr(e,/flex-|-self/,"")+e;case 4675:return hr+e+Ta+"flex-line-pack"+fr(e,/align-content|flex-|-self/,"")+e;case 5548:return hr+e+Ta+fr(e,"shrink","negative")+e;case 5292:return hr+e+Ta+fr(e,"basis","preferred-size")+e;case 6060:return hr+"box-"+fr(e,"-grow","")+hr+e+Ta+fr(e,"grow","positive")+e;case 4554:return hr+fr(e,/([^-])(transform)/g,"$1"+hr+"$2")+e;case 6187:return fr(fr(fr(e,/(zoom-|grab)/,hr+"$1"),/(image-set)/,hr+"$1"),e,"")+e;case 5495:case 3959:return fr(e,/(image-set\([^]*)/,hr+"$1$`$1");case 4968:return fr(fr(e,/(.+:)(flex-)?(.*)/,hr+"box-pack:$3"+Ta+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+hr+e+e;case 4095:case 3583:case 4068:case 2532:return fr(e,/(.+)-inline(.+)/,hr+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(vu(e)-1-t>6)switch(Xo(e,t+1)){case 109:if(Xo(e,t+4)!==45)break;case 102:return fr(e,/(.+:)(.+)-([^]+)/,"$1"+hr+"$2-$3$1"+D1+(Xo(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~vk(e,"stretch")?k9(fr(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(Xo(e,t+1)!==115)break;case 6444:switch(Xo(e,vu(e)-3-(~vk(e,"!important")&&10))){case 107:return fr(e,":",":"+hr)+e;case 101:return fr(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+hr+(Xo(e,14)===45?"inline-":"")+"box$3$1"+hr+"$2$3$1"+Ta+"$2box$3")+e}break;case 5936:switch(Xo(e,t+11)){case 114:return hr+e+Ta+fr(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return hr+e+Ta+fr(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return hr+e+Ta+fr(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return hr+e+Ta+e+e}return e}var c0e=function(t,i,a,c){if(t.length>-1&&!t.return)switch(t.type){case PM:t.return=k9(t.value,t.length);break;case N9:return ng([__(t,{value:fr(t.value,"@","@"+hr)})],c);case xM:if(t.length)return Wme(t.props,function(u){switch(Hme(u,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return ng([__(t,{props:[fr(u,/:(read-\w+)/,":"+D1+"$1")]})],c);case"::placeholder":return ng([__(t,{props:[fr(u,/:(plac\w+)/,":"+hr+"input-$1")]}),__(t,{props:[fr(u,/:(plac\w+)/,":"+D1+"$1")]}),__(t,{props:[fr(u,/:(plac\w+)/,Ta+"input-$1")]})],c)}return""})}},l0e=[c0e],u0e=function(t){var i=t.key;if(i==="css"){var a=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(a,function(N){var M=N.getAttribute("data-emotion");M.indexOf(" ")!==-1&&(document.head.appendChild(N),N.setAttribute("data-s",""))})}var c=t.stylisPlugins||l0e,u={},f,m=[];f=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+i+' "]'),function(N){for(var M=N.getAttribute("data-emotion").split(" "),D=1;D<M.length;D++)u[M[D]]=!0;m.push(N)});var g,E=[a0e,s0e];{var y,T=[Zme,t0e(function(N){y.insert(N)})],R=e0e(E.concat(c,T)),P=function(M){return ng(Jme(M),R)};g=function(M,D,x,k){y=x,P(M?M+"{"+D.styles+"}":D.styles),k&&(O.inserted[D.name]=!0)}}var O={key:i,sheet:new Ume({key:i,container:f,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:u,registered:{},insert:g};return O.sheet.hydrate(m),O},M9=C2,d0e={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},h0e={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},U9={};U9[M9.ForwardRef]=d0e;U9[M9.Memo]=h0e;var f0e=!0;function p0e(e,t,i){var a="";return i.split(" ").forEach(function(c){e[c]!==void 0?t.push(e[c]+";"):a+=c+" "}),a}var F9=function(t,i,a){var c=t.key+"-"+i.name;(a===!1||f0e===!1)&&t.registered[c]===void 0&&(t.registered[c]=i.styles)},m0e=function(t,i,a){F9(t,i,a);var c=t.key+"-"+i.name;if(t.inserted[i.name]===void 0){var u=i;do t.insert(i===u?"."+c:"",u,t.sheet,!0),u=u.next;while(u!==void 0)}};function g0e(e){for(var t=0,i,a=0,c=e.length;c>=4;++a,c-=4)i=e.charCodeAt(a)&255|(e.charCodeAt(++a)&255)<<8|(e.charCodeAt(++a)&255)<<16|(e.charCodeAt(++a)&255)<<24,i=(i&65535)*1540483477+((i>>>16)*59797<<16),i^=i>>>24,t=(i&65535)*1540483477+((i>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(c){case 3:t^=(e.charCodeAt(a+2)&255)<<16;case 2:t^=(e.charCodeAt(a+1)&255)<<8;case 1:t^=e.charCodeAt(a)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var v0e={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},E0e=/[A-Z]|^ms/g,_0e=/_EMO_([^_]+?)_([^]*?)_EMO_/g,V9=function(t){return t.charCodeAt(1)===45},X5=function(t){return t!=null&&typeof t!="boolean"},hD=n0e(function(e){return V9(e)?e:e.replace(E0e,"-$&").toLowerCase()}),J5=function(t,i){switch(t){case"animation":case"animationName":if(typeof i=="string")return i.replace(_0e,function(a,c,u){return Eu={name:c,styles:u,next:Eu},c})}return v0e[t]!==1&&!V9(t)&&typeof i=="number"&&i!==0?i+"px":i};function RS(e,t,i){if(i==null)return"";if(i.__emotion_styles!==void 0)return i;switch(typeof i){case"boolean":return"";case"object":{if(i.anim===1)return Eu={name:i.name,styles:i.styles,next:Eu},i.name;if(i.styles!==void 0){var a=i.next;if(a!==void 0)for(;a!==void 0;)Eu={name:a.name,styles:a.styles,next:Eu},a=a.next;var c=i.styles+";";return c}return S0e(e,t,i)}case"function":{if(e!==void 0){var u=Eu,f=i(e);return Eu=u,RS(e,t,f)}break}}if(t==null)return i;var m=t[i];return m!==void 0?m:i}function S0e(e,t,i){var a="";if(Array.isArray(i))for(var c=0;c<i.length;c++)a+=RS(e,t,i[c])+";";else for(var u in i){var f=i[u];if(typeof f!="object")t!=null&&t[f]!==void 0?a+=u+"{"+t[f]+"}":X5(f)&&(a+=hD(u)+":"+J5(u,f)+";");else if(Array.isArray(f)&&typeof f[0]=="string"&&(t==null||t[f[0]]===void 0))for(var m=0;m<f.length;m++)X5(f[m])&&(a+=hD(u)+":"+J5(u,f[m])+";");else{var g=RS(e,t,f);switch(u){case"animation":case"animationName":{a+=hD(u)+":"+g+";";break}default:a+=u+"{"+g+"}"}}}return a}var Q5=/label:\s*([^\s;\n{]+)\s*(;|$)/g,Eu,j9=function(t,i,a){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var c=!0,u="";Eu=void 0;var f=t[0];f==null||f.raw===void 0?(c=!1,u+=RS(a,i,f)):u+=f[0];for(var m=1;m<t.length;m++)u+=RS(a,i,t[m]),c&&(u+=f[m]);Q5.lastIndex=0;for(var g="",E;(E=Q5.exec(u))!==null;)g+="-"+E[1];var y=g0e(u)+g;return{name:y,styles:u,next:Eu}},y0e=function(t){return t()},C0e=rg["useInsertionEffect"]?rg["useInsertionEffect"]:!1,T0e=C0e||y0e,LM={}.hasOwnProperty,B9=C.createContext(typeof HTMLElement<"u"?u0e({key:"css"}):null);B9.Provider;var b0e=function(t){return C.forwardRef(function(i,a){var c=C.useContext(B9);return t(i,c,a)})},R0e=C.createContext({}),_k="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",I0e=function(t,i){var a={};for(var c in i)LM.call(i,c)&&(a[c]=i[c]);return a[_k]=t,a},w0e=function(t){var i=t.cache,a=t.serialized,c=t.isStringTag;return F9(i,a,c),T0e(function(){return m0e(i,a,c)}),null},O0e=b0e(function(e,t,i){var a=e.css;typeof a=="string"&&t.registered[a]!==void 0&&(a=t.registered[a]);var c=e[_k],u=[a],f="";typeof e.className=="string"?f=p0e(t.registered,u,e.className):e.className!=null&&(f=e.className+" ");var m=j9(u,void 0,C.useContext(R0e));f+=t.key+"-"+m.name;var g={};for(var E in e)LM.call(e,E)&&E!=="css"&&E!==_k&&(g[E]=e[E]);return g.ref=i,g.className=f,C.createElement(C.Fragment,null,C.createElement(w0e,{cache:t,serialized:m,isStringTag:typeof c=="string"}),C.createElement(c,g))}),A0e=O0e,en=function(t,i){var a=arguments;if(i==null||!LM.call(i,"css"))return C.createElement.apply(void 0,a);var c=a.length,u=new Array(c);u[0]=A0e,u[1]=I0e(t,i);for(var f=2;f<c;f++)u[f]=a[f];return C.createElement.apply(null,u)};function kM(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return j9(t)}var N0e=function(){var t=kM.apply(void 0,arguments),i="animation-"+t.name;return{name:i,styles:"@keyframes "+i+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};function x0e(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function P0e(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}const D0e=["top","right","bottom","left"];D0e.reduce((e,t)=>e.concat(t,t+"-start",t+"-end"),[]);function Sl(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function $9(e){return Sl(e).getComputedStyle(e)}function H9(e){return e instanceof Sl(e).Node}function W9(e){return H9(e)?(e.nodeName||"").toLowerCase():"#document"}function MM(e){return e instanceof Sl(e).HTMLElement}function Z5(e){return typeof ShadowRoot<"u"&&(e instanceof Sl(e).ShadowRoot||e instanceof ShadowRoot)}function G9(e){const{overflow:t,overflowX:i,overflowY:a,display:c}=$9(e);return/auto|scroll|overlay|hidden|clip/.test(t+a+i)&&!["inline","contents"].includes(c)}function L0e(){return!(typeof CSS>"u"||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function k0e(e){return["html","body","#document"].includes(W9(e))}const M0e=Math.min,U0e=Math.max,L1=Math.round,dR=Math.floor,k1=e=>({x:e,y:e});function F0e(e){const t=$9(e);let i=parseFloat(t.width)||0,a=parseFloat(t.height)||0;const c=MM(e),u=c?e.offsetWidth:i,f=c?e.offsetHeight:a,m=L1(i)!==u||L1(a)!==f;return m&&(i=u,a=f),{width:i,height:a,$:m}}function Sk(e){return e instanceof Sl(e).Element}function UM(e){return Sk(e)?e:e.contextElement}function fD(e){const t=UM(e);if(!MM(t))return k1(1);const i=t.getBoundingClientRect(),{width:a,height:c,$:u}=F0e(t);let f=(u?L1(i.width):i.width)/a,m=(u?L1(i.height):i.height)/c;return f&&Number.isFinite(f)||(f=1),m&&Number.isFinite(m)||(m=1),{x:f,y:m}}const V0e=k1(0);function j0e(e){const t=Sl(e);return L0e()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:V0e}function e$(e,t,i,a){t===void 0&&(t=!1),i===void 0&&(i=!1);const c=e.getBoundingClientRect(),u=UM(e);let f=k1(1);t&&(a?Sk(a)&&(f=fD(a)):f=fD(e));const m=function(R,P,O){return P===void 0&&(P=!1),!(!O||P&&O!==Sl(R))&&P}(u,i,a)?j0e(u):k1(0);let g=(c.left+m.x)/f.x,E=(c.top+m.y)/f.y,y=c.width/f.x,T=c.height/f.y;if(u){const R=Sl(u),P=a&&Sk(a)?Sl(a):a;let O=R.frameElement;for(;O&&a&&P!==R;){const N=fD(O),M=O.getBoundingClientRect(),D=getComputedStyle(O),x=M.left+(O.clientLeft+parseFloat(D.paddingLeft))*N.x,k=M.top+(O.clientTop+parseFloat(D.paddingTop))*N.y;g*=N.x,E*=N.y,y*=N.x,T*=N.y,g+=x,E+=k,O=Sl(O).frameElement}}return P0e({width:y,height:T,x:g,y:E})}function z9(e){return((H9(e)?e.ownerDocument:e.document)||window.document).documentElement}function B0e(e){if(W9(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Z5(e)&&e.host||z9(e);return Z5(t)?t.host:t}function K9(e){const t=B0e(e);return k0e(t)?e.ownerDocument?e.ownerDocument.body:e.body:MM(t)&&G9(t)?t:K9(t)}function yk(e,t){var i;t===void 0&&(t=[]);const a=K9(e),c=a===((i=e.ownerDocument)==null?void 0:i.body),u=Sl(a);return c?t.concat(u,u.visualViewport||[],G9(a)?a:[]):t.concat(a,yk(a))}function $0e(e,t,i,a){a===void 0&&(a={});const{ancestorScroll:c=!0,ancestorResize:u=!0,elementResize:f=typeof ResizeObserver=="function",layoutShift:m=typeof IntersectionObserver=="function",animationFrame:g=!1}=a,E=UM(e),y=c||u?[...E?yk(E):[],...yk(t)]:[];y.forEach(M=>{c&&M.addEventListener("scroll",i,{passive:!0}),u&&M.addEventListener("resize",i)});const T=E&&m?function(M,D){let x,k=null;const V=z9(M);function H(){clearTimeout(x),k&&k.disconnect(),k=null}return function $(G,K){G===void 0&&(G=!1),K===void 0&&(K=1),H();const{left:Q,top:z,width:ie,height:J}=M.getBoundingClientRect();if(G||D(),!ie||!J)return;const Y={rootMargin:-dR(z)+"px "+-dR(V.clientWidth-(Q+ie))+"px "+-dR(V.clientHeight-(z+J))+"px "+-dR(Q)+"px",threshold:U0e(0,M0e(1,K))||1};let oe=!0;function ue(he){const Se=he[0].intersectionRatio;if(Se!==K){if(!oe)return $();Se?$(!1,Se):x=setTimeout(()=>{$(!1,1e-7)},100)}oe=!1}try{k=new IntersectionObserver(ue,{...Y,root:V.ownerDocument})}catch{k=new IntersectionObserver(ue,Y)}k.observe(M)}(!0),H}(E,i):null;let R,P=-1,O=null;f&&(O=new ResizeObserver(M=>{let[D]=M;D&&D.target===E&&O&&(O.unobserve(t),cancelAnimationFrame(P),P=requestAnimationFrame(()=>{O&&O.observe(t)})),i()}),E&&!g&&O.observe(E),O.observe(t));let N=g?e$(e):null;return g&&function M(){const D=e$(e);!N||D.x===N.x&&D.y===N.y&&D.width===N.width&&D.height===N.height||i(),N=D,R=requestAnimationFrame(M)}(),i(),()=>{y.forEach(M=>{c&&M.removeEventListener("scroll",i),u&&M.removeEventListener("resize",i)}),T&&T(),O&&O.disconnect(),O=null,g&&cancelAnimationFrame(R)}}var Ck=C.useLayoutEffect,H0e=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],M1=function(){};function W0e(e,t){return t?t[0]==="-"?e+t:e+"__"+t:e}function G0e(e,t){for(var i=arguments.length,a=new Array(i>2?i-2:0),c=2;c<i;c++)a[c-2]=arguments[c];var u=[].concat(a);if(t&&e)for(var f in t)t.hasOwnProperty(f)&&t[f]&&u.push("".concat(W0e(e,f)));return u.filter(function(m){return m}).map(function(m){return String(m).trim()}).join(" ")}var t$=function(t){return ege(t)?t.filter(Boolean):Sr(t)==="object"&&t!==null?[t]:[]},q9=function(t){t.className,t.clearValue,t.cx,t.getStyles,t.getClassNames,t.getValue,t.hasValue,t.isMulti,t.isRtl,t.options,t.selectOption,t.selectProps,t.setValue,t.theme;var i=Xn(t,H0e);return Ae({},i)},Pi=function(t,i,a){var c=t.cx,u=t.getStyles,f=t.getClassNames,m=t.className;return{css:u(i,t),className:c(a??{},f(i,t),m)}};function $I(e){return[document.documentElement,document.body,window].indexOf(e)>-1}function z0e(e){return $I(e)?window.innerHeight:e.clientHeight}function Y9(e){return $I(e)?window.pageYOffset:e.scrollTop}function U1(e,t){if($I(e)){window.scrollTo(0,t);return}e.scrollTop=t}function K0e(e){var t=getComputedStyle(e),i=t.position==="absolute",a=/(auto|scroll)/;if(t.position==="fixed")return document.documentElement;for(var c=e;c=c.parentElement;)if(t=getComputedStyle(c),!(i&&t.position==="static")&&a.test(t.overflow+t.overflowY+t.overflowX))return c;return document.documentElement}function q0e(e,t,i,a){return i*((e=e/a-1)*e*e+1)+t}function hR(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:M1,c=Y9(e),u=t-c,f=10,m=0;function g(){m+=f;var E=q0e(m,c,u,i);U1(e,E),m<i?window.requestAnimationFrame(g):a(e)}g()}function n$(e,t){var i=e.getBoundingClientRect(),a=t.getBoundingClientRect(),c=t.offsetHeight/3;a.bottom+c>i.bottom?U1(e,Math.min(t.offsetTop+t.clientHeight-e.offsetHeight+c,e.scrollHeight)):a.top-c<i.top&&U1(e,Math.max(t.offsetTop-c,0))}function Y0e(e){var t=e.getBoundingClientRect();return{bottom:t.bottom,height:t.height,left:t.left,right:t.right,top:t.top,width:t.width}}function r$(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function X0e(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var X9=!1,J0e={get passive(){return X9=!0}},fR=typeof window<"u"?window:{};fR.addEventListener&&fR.removeEventListener&&(fR.addEventListener("p",M1,J0e),fR.removeEventListener("p",M1,!1));var Q0e=X9;function Z0e(e){return e!=null}function ege(e){return Array.isArray(e)}function pR(e,t,i){return e?t:i}var tge=function(t){for(var i=arguments.length,a=new Array(i>1?i-1:0),c=1;c<i;c++)a[c-1]=arguments[c];var u=Object.entries(t).filter(function(f){var m=Ye(f,1),g=m[0];return!a.includes(g)});return u.reduce(function(f,m){var g=Ye(m,2),E=g[0],y=g[1];return f[E]=y,f},{})};function nge(e){var t=e.maxHeight,i=e.menuEl,a=e.minHeight,c=e.placement,u=e.shouldScroll,f=e.isFixedPosition,m=e.controlHeight,g=K0e(i),E={placement:"bottom",maxHeight:t};if(!i||!i.offsetParent)return E;var y=g.getBoundingClientRect(),T=y.height,R=i.getBoundingClientRect(),P=R.bottom,O=R.height,N=R.top,M=i.offsetParent.getBoundingClientRect(),D=M.top,x=f?window.innerHeight:z0e(g),k=Y9(g),V=parseInt(getComputedStyle(i).marginBottom,10),H=parseInt(getComputedStyle(i).marginTop,10),$=D-H,G=x-N,K=$+k,Q=T-k-N,z=P-x+k+V,ie=k+N-H,J=160;switch(c){case"auto":case"bottom":if(G>=O)return{placement:"bottom",maxHeight:t};if(Q>=O&&!f)return u&&hR(g,z,J),{placement:"bottom",maxHeight:t};if(!f&&Q>=a||f&&G>=a){u&&hR(g,z,J);var Y=f?G-V:Q-V;return{placement:"bottom",maxHeight:Y}}if(c==="auto"||f){var oe=t,ue=f?$:K;return ue>=a&&(oe=Math.min(ue-V-m,t)),{placement:"top",maxHeight:oe}}if(c==="bottom")return u&&U1(g,z),{placement:"bottom",maxHeight:t};break;case"top":if($>=O)return{placement:"top",maxHeight:t};if(K>=O&&!f)return u&&hR(g,ie,J),{placement:"top",maxHeight:t};if(!f&&K>=a||f&&$>=a){var he=t;return(!f&&K>=a||f&&$>=a)&&(he=f?$-H:K-H),u&&hR(g,ie,J),{placement:"top",maxHeight:he}}return{placement:"bottom",maxHeight:t};default:throw new Error('Invalid placement provided "'.concat(c,'".'))}return E}function rge(e){var t={bottom:"top",top:"bottom"};return e?t[e]:"bottom"}var J9=function(t){return t==="auto"?"bottom":t},ige=function(t,i){var a,c=t.placement,u=t.theme,f=u.borderRadius,m=u.spacing,g=u.colors;return Ae((a={label:"menu"},Ct(a,rge(c),"100%"),Ct(a,"position","absolute"),Ct(a,"width","100%"),Ct(a,"zIndex",1),a),i?{}:{backgroundColor:g.neutral0,borderRadius:f,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:m.menuGutter,marginTop:m.menuGutter})},Q9=C.createContext(null),oge=function(t){var i=t.children,a=t.minMenuHeight,c=t.maxMenuHeight,u=t.menuPlacement,f=t.menuPosition,m=t.menuShouldScrollIntoView,g=t.theme,E=C.useContext(Q9)||{},y=E.setPortalPlacement,T=C.useRef(null),R=C.useState(c),P=Ye(R,2),O=P[0],N=P[1],M=C.useState(null),D=Ye(M,2),x=D[0],k=D[1],V=g.spacing.controlHeight;return Ck(function(){var H=T.current;if(H){var $=f==="fixed",G=m&&!$,K=nge({maxHeight:c,menuEl:H,minHeight:a,placement:u,shouldScroll:G,isFixedPosition:$,controlHeight:V});N(K.maxHeight),k(K.placement),y==null||y(K.placement)}},[c,u,f,m,a,y,V]),i({ref:T,placerProps:Ae(Ae({},t),{},{placement:x||J9(u),maxHeight:O})})},age=function(t){var i=t.children,a=t.innerRef,c=t.innerProps;return en("div",st({},Pi(t,"menu",{menu:!0}),{ref:a},c),i)},sge=age,cge=function(t,i){var a=t.maxHeight,c=t.theme.spacing.baseUnit;return Ae({maxHeight:a,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},i?{}:{paddingBottom:c,paddingTop:c})},lge=function(t){var i=t.children,a=t.innerProps,c=t.innerRef,u=t.isMulti;return en("div",st({},Pi(t,"menuList",{"menu-list":!0,"menu-list--is-multi":u}),{ref:c},a),i)},Z9=function(t,i){var a=t.theme,c=a.spacing.baseUnit,u=a.colors;return Ae({textAlign:"center"},i?{}:{color:u.neutral40,padding:"".concat(c*2,"px ").concat(c*3,"px")})},uge=Z9,dge=Z9,eK=function(t){var i=t.children,a=t.innerProps;return en("div",st({},Pi(t,"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),a),i)};eK.defaultProps={children:"No options"};var tK=function(t){var i=t.children,a=t.innerProps;return en("div",st({},Pi(t,"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),a),i)};tK.defaultProps={children:"Loading..."};var hge=function(t){var i=t.rect,a=t.offset,c=t.position;return{left:i.left,position:c,top:a,width:i.width,zIndex:1}},fge=function(t){var i=t.appendTo,a=t.children,c=t.controlElement,u=t.innerProps,f=t.menuPlacement,m=t.menuPosition,g=C.useRef(null),E=C.useRef(null),y=C.useState(J9(f)),T=Ye(y,2),R=T[0],P=T[1],O=C.useMemo(function(){return{setPortalPlacement:P}},[]),N=C.useState(null),M=Ye(N,2),D=M[0],x=M[1],k=C.useCallback(function(){if(c){var G=Y0e(c),K=m==="fixed"?0:window.pageYOffset,Q=G[R]+K;(Q!==(D==null?void 0:D.offset)||G.left!==(D==null?void 0:D.rect.left)||G.width!==(D==null?void 0:D.rect.width))&&x({offset:Q,rect:G})}},[c,m,R,D==null?void 0:D.offset,D==null?void 0:D.rect.left,D==null?void 0:D.rect.width]);Ck(function(){k()},[k]);var V=C.useCallback(function(){typeof E.current=="function"&&(E.current(),E.current=null),c&&g.current&&(E.current=$0e(c,g.current,k,{elementResize:"ResizeObserver"in window}))},[c,k]);Ck(function(){V()},[V]);var H=C.useCallback(function(G){g.current=G,V()},[V]);if(!i&&m!=="fixed"||!D)return null;var $=en("div",st({ref:H},Pi(Ae(Ae({},t),{},{offset:D.offset,position:m,rect:D.rect}),"menuPortal",{"menu-portal":!0}),u),a);return en(Q9.Provider,{value:O},i?Wh.createPortal($,i):$)},pge=function(t){var i=t.isDisabled,a=t.isRtl;return{label:"container",direction:a?"rtl":void 0,pointerEvents:i?"none":void 0,position:"relative"}},mge=function(t){var i=t.children,a=t.innerProps,c=t.isDisabled,u=t.isRtl;return en("div",st({},Pi(t,"container",{"--is-disabled":c,"--is-rtl":u}),a),i)},gge=function(t,i){var a=t.theme.spacing,c=t.isMulti,u=t.hasValue,f=t.selectProps.controlShouldRenderValue;return Ae({alignItems:"center",display:c&&u&&f?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},i?{}:{padding:"".concat(a.baseUnit/2,"px ").concat(a.baseUnit*2,"px")})},vge=function(t){var i=t.children,a=t.innerProps,c=t.isMulti,u=t.hasValue;return en("div",st({},Pi(t,"valueContainer",{"value-container":!0,"value-container--is-multi":c,"value-container--has-value":u}),a),i)},Ege=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},_ge=function(t){var i=t.children,a=t.innerProps;return en("div",st({},Pi(t,"indicatorsContainer",{indicators:!0}),a),i)},i$,Sge=["size"],yge={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},nK=function(t){var i=t.size,a=Xn(t,Sge);return en("svg",st({height:i,width:i,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:yge},a))},FM=function(t){return en(nK,st({size:20},t),en("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},rK=function(t){return en(nK,st({size:20},t),en("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},iK=function(t,i){var a=t.isFocused,c=t.theme,u=c.spacing.baseUnit,f=c.colors;return Ae({label:"indicatorContainer",display:"flex",transition:"color 150ms"},i?{}:{color:a?f.neutral60:f.neutral20,padding:u*2,":hover":{color:a?f.neutral80:f.neutral40}})},Cge=iK,Tge=function(t){var i=t.children,a=t.innerProps;return en("div",st({},Pi(t,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),a),i||en(rK,null))},bge=iK,Rge=function(t){var i=t.children,a=t.innerProps;return en("div",st({},Pi(t,"clearIndicator",{indicator:!0,"clear-indicator":!0}),a),i||en(FM,null))},Ige=function(t,i){var a=t.isDisabled,c=t.theme,u=c.spacing.baseUnit,f=c.colors;return Ae({label:"indicatorSeparator",alignSelf:"stretch",width:1},i?{}:{backgroundColor:a?f.neutral10:f.neutral20,marginBottom:u*2,marginTop:u*2})},wge=function(t){var i=t.innerProps;return en("span",st({},i,Pi(t,"indicatorSeparator",{"indicator-separator":!0})))},Oge=N0e(i$||(i$=x0e([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),Age=function(t,i){var a=t.isFocused,c=t.size,u=t.theme,f=u.colors,m=u.spacing.baseUnit;return Ae({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:c,lineHeight:1,marginRight:c,textAlign:"center",verticalAlign:"middle"},i?{}:{color:a?f.neutral60:f.neutral20,padding:m*2})},pD=function(t){var i=t.delay,a=t.offset;return en("span",{css:kM({animation:"".concat(Oge," 1s ease-in-out ").concat(i,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:a?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},oK=function(t){var i=t.innerProps,a=t.isRtl;return en("div",st({},Pi(t,"loadingIndicator",{indicator:!0,"loading-indicator":!0}),i),en(pD,{delay:0,offset:a}),en(pD,{delay:160,offset:!0}),en(pD,{delay:320,offset:!a}))};oK.defaultProps={size:4};var Nge=function(t,i){var a=t.isDisabled,c=t.isFocused,u=t.theme,f=u.colors,m=u.borderRadius,g=u.spacing;return Ae({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:g.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},i?{}:{backgroundColor:a?f.neutral5:f.neutral0,borderColor:a?f.neutral10:c?f.primary:f.neutral20,borderRadius:m,borderStyle:"solid",borderWidth:1,boxShadow:c?"0 0 0 1px ".concat(f.primary):void 0,"&:hover":{borderColor:c?f.primary:f.neutral30}})},xge=function(t){var i=t.children,a=t.isDisabled,c=t.isFocused,u=t.innerRef,f=t.innerProps,m=t.menuIsOpen;return en("div",st({ref:u},Pi(t,"control",{control:!0,"control--is-disabled":a,"control--is-focused":c,"control--menu-is-open":m}),f),i)},Pge=xge,Dge=["data"],Lge=function(t,i){var a=t.theme.spacing;return i?{}:{paddingBottom:a.baseUnit*2,paddingTop:a.baseUnit*2}},kge=function(t){var i=t.children,a=t.cx,c=t.getStyles,u=t.getClassNames,f=t.Heading,m=t.headingProps,g=t.innerProps,E=t.label,y=t.theme,T=t.selectProps;return en("div",st({},Pi(t,"group",{group:!0}),g),en(f,st({},m,{selectProps:T,theme:y,getStyles:c,getClassNames:u,cx:a}),E),en("div",null,i))},Mge=function(t,i){var a=t.theme,c=a.colors,u=a.spacing;return Ae({label:"group",cursor:"default",display:"block"},i?{}:{color:c.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:u.baseUnit*3,paddingRight:u.baseUnit*3,textTransform:"uppercase"})},Uge=function(t){var i=q9(t);i.data;var a=Xn(i,Dge);return en("div",st({},Pi(t,"groupHeading",{"group-heading":!0}),a))},Fge=kge,Vge=["innerRef","isDisabled","isHidden","inputClassName"],jge=function(t,i){var a=t.isDisabled,c=t.value,u=t.theme,f=u.spacing,m=u.colors;return Ae(Ae({visibility:a?"hidden":"visible",transform:c?"translateZ(0)":""},Bge),i?{}:{margin:f.baseUnit/2,paddingBottom:f.baseUnit/2,paddingTop:f.baseUnit/2,color:m.neutral80})},aK={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},Bge={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":Ae({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},aK)},$ge=function(t){return Ae({label:"input",color:"inherit",background:0,opacity:t?0:1,width:"100%"},aK)},Hge=function(t){var i=t.cx,a=t.value,c=q9(t),u=c.innerRef,f=c.isDisabled,m=c.isHidden,g=c.inputClassName,E=Xn(c,Vge);return en("div",st({},Pi(t,"input",{"input-container":!0}),{"data-value":a||""}),en("input",st({className:i({input:!0},g),ref:u,style:$ge(m),disabled:f},E)))},Wge=Hge,Gge=function(t,i){var a=t.theme,c=a.spacing,u=a.borderRadius,f=a.colors;return Ae({label:"multiValue",display:"flex",minWidth:0},i?{}:{backgroundColor:f.neutral10,borderRadius:u/2,margin:c.baseUnit/2})},zge=function(t,i){var a=t.theme,c=a.borderRadius,u=a.colors,f=t.cropWithEllipsis;return Ae({overflow:"hidden",textOverflow:f||f===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},i?{}:{borderRadius:c/2,color:u.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},Kge=function(t,i){var a=t.theme,c=a.spacing,u=a.borderRadius,f=a.colors,m=t.isFocused;return Ae({alignItems:"center",display:"flex"},i?{}:{borderRadius:u/2,backgroundColor:m?f.dangerLight:void 0,paddingLeft:c.baseUnit,paddingRight:c.baseUnit,":hover":{backgroundColor:f.dangerLight,color:f.danger}})},sK=function(t){var i=t.children,a=t.innerProps;return en("div",a,i)},qge=sK,Yge=sK;function Xge(e){var t=e.children,i=e.innerProps;return en("div",st({role:"button"},i),t||en(FM,{size:14}))}var Jge=function(t){var i=t.children,a=t.components,c=t.data,u=t.innerProps,f=t.isDisabled,m=t.removeProps,g=t.selectProps,E=a.Container,y=a.Label,T=a.Remove;return en(E,{data:c,innerProps:Ae(Ae({},Pi(t,"multiValue",{"multi-value":!0,"multi-value--is-disabled":f})),u),selectProps:g},en(y,{data:c,innerProps:Ae({},Pi(t,"multiValueLabel",{"multi-value__label":!0})),selectProps:g},i),en(T,{data:c,innerProps:Ae(Ae({},Pi(t,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(i||"option")},m),selectProps:g}))},Qge=Jge,Zge=function(t,i){var a=t.isDisabled,c=t.isFocused,u=t.isSelected,f=t.theme,m=f.spacing,g=f.colors;return Ae({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},i?{}:{backgroundColor:u?g.primary:c?g.primary25:"transparent",color:a?g.neutral20:u?g.neutral0:"inherit",padding:"".concat(m.baseUnit*2,"px ").concat(m.baseUnit*3,"px"),":active":{backgroundColor:a?void 0:u?g.primary:g.primary50}})},eve=function(t){var i=t.children,a=t.isDisabled,c=t.isFocused,u=t.isSelected,f=t.innerRef,m=t.innerProps;return en("div",st({},Pi(t,"option",{option:!0,"option--is-disabled":a,"option--is-focused":c,"option--is-selected":u}),{ref:f,"aria-disabled":a},m),i)},tve=eve,nve=function(t,i){var a=t.theme,c=a.spacing,u=a.colors;return Ae({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},i?{}:{color:u.neutral50,marginLeft:c.baseUnit/2,marginRight:c.baseUnit/2})},rve=function(t){var i=t.children,a=t.innerProps;return en("div",st({},Pi(t,"placeholder",{placeholder:!0}),a),i)},ive=rve,ove=function(t,i){var a=t.isDisabled,c=t.theme,u=c.spacing,f=c.colors;return Ae({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},i?{}:{color:a?f.neutral40:f.neutral80,marginLeft:u.baseUnit/2,marginRight:u.baseUnit/2})},ave=function(t){var i=t.children,a=t.isDisabled,c=t.innerProps;return en("div",st({},Pi(t,"singleValue",{"single-value":!0,"single-value--is-disabled":a}),c),i)},sve=ave,cve={ClearIndicator:Rge,Control:Pge,DropdownIndicator:Tge,DownChevron:rK,CrossIcon:FM,Group:Fge,GroupHeading:Uge,IndicatorsContainer:_ge,IndicatorSeparator:wge,Input:Wge,LoadingIndicator:oK,Menu:sge,MenuList:lge,MenuPortal:fge,LoadingMessage:tK,NoOptionsMessage:eK,MultiValue:Qge,MultiValueContainer:qge,MultiValueLabel:Yge,MultiValueRemove:Xge,Option:tve,Placeholder:ive,SelectContainer:mge,SingleValue:sve,ValueContainer:vge},lve=function(t){return Ae(Ae({},cve),t.components)},o$=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function uve(e,t){return!!(e===t||o$(e)&&o$(t))}function dve(e,t){if(e.length!==t.length)return!1;for(var i=0;i<e.length;i++)if(!uve(e[i],t[i]))return!1;return!0}function hve(e,t){t===void 0&&(t=dve);var i=null;function a(){for(var c=[],u=0;u<arguments.length;u++)c[u]=arguments[u];if(i&&i.lastThis===this&&t(c,i.lastArgs))return i.lastResult;var f=e.apply(this,c);return i={lastResult:f,lastArgs:c,lastThis:this},f}return a.clear=function(){i=null},a}var fve={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},pve=function(t){return en("span",st({css:fve},t))},a$=pve,mve={guidance:function(t){var i=t.isSearchable,a=t.isMulti,c=t.isDisabled,u=t.tabSelectsValue,f=t.context;switch(f){case"menu":return"Use Up and Down to choose options".concat(c?"":", press Enter to select the currently focused option",", press Escape to exit the menu").concat(u?", press Tab to select the option and exit the menu":"",".");case"input":return"".concat(t["aria-label"]||"Select"," is focused ").concat(i?",type to refine list":"",", press Down to open the menu, ").concat(a?" press left to focus selected values":"");case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(t){var i=t.action,a=t.label,c=a===void 0?"":a,u=t.labels,f=t.isDisabled;switch(i){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(c,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(u.length>1?"s":""," ").concat(u.join(","),", selected.");case"select-option":return f?"option ".concat(c," is disabled. Select another option."):"option ".concat(c,", selected.");default:return""}},onFocus:function(t){var i=t.context,a=t.focused,c=t.options,u=t.label,f=u===void 0?"":u,m=t.selectValue,g=t.isDisabled,E=t.isSelected,y=function(O,N){return O&&O.length?"".concat(O.indexOf(N)+1," of ").concat(O.length):""};if(i==="value"&&m)return"value ".concat(f," focused, ").concat(y(m,a),".");if(i==="menu"){var T=g?" disabled":"",R="".concat(E?"selected":"focused").concat(T);return"option ".concat(f," ").concat(R,", ").concat(y(c,a),".")}return""},onFilter:function(t){var i=t.inputValue,a=t.resultsMessage;return"".concat(a).concat(i?" for search term "+i:"",".")}},gve=function(t){var i=t.ariaSelection,a=t.focusedOption,c=t.focusedValue,u=t.focusableOptions,f=t.isFocused,m=t.selectValue,g=t.selectProps,E=t.id,y=g.ariaLiveMessages,T=g.getOptionLabel,R=g.inputValue,P=g.isMulti,O=g.isOptionDisabled,N=g.isSearchable,M=g.menuIsOpen,D=g.options,x=g.screenReaderStatus,k=g.tabSelectsValue,V=g["aria-label"],H=g["aria-live"],$=C.useMemo(function(){return Ae(Ae({},mve),y||{})},[y]),G=C.useMemo(function(){var oe="";if(i&&$.onChange){var ue=i.option,he=i.options,Se=i.removedValue,ve=i.removedValues,Re=i.value,Ce=function(ot){return Array.isArray(ot)?null:ot},pe=Se||ue||Ce(Re),fe=pe?T(pe):"",_e=he||ve||void 0,ge=_e?_e.map(T):[],Ue=Ae({isDisabled:pe&&O(pe,m),label:fe,labels:ge},i);oe=$.onChange(Ue)}return oe},[i,$,O,m,T]),K=C.useMemo(function(){var oe="",ue=a||c,he=!!(a&&m&&m.includes(a));if(ue&&$.onFocus){var Se={focused:ue,label:T(ue),isDisabled:O(ue,m),isSelected:he,options:u,context:ue===a?"menu":"value",selectValue:m};oe=$.onFocus(Se)}return oe},[a,c,T,O,$,u,m]),Q=C.useMemo(function(){var oe="";if(M&&D.length&&$.onFilter){var ue=x({count:u.length});oe=$.onFilter({inputValue:R,resultsMessage:ue})}return oe},[u,R,M,$,D,x]),z=C.useMemo(function(){var oe="";if($.guidance){var ue=c?"value":M?"menu":"input";oe=$.guidance({"aria-label":V,context:ue,isDisabled:a&&O(a,m),isMulti:P,isSearchable:N,tabSelectsValue:k})}return oe},[V,a,c,P,O,N,M,$,m,k]),ie="".concat(K," ").concat(Q," ").concat(z),J=en(C.Fragment,null,en("span",{id:"aria-selection"},G),en("span",{id:"aria-context"},ie)),Y=(i==null?void 0:i.action)==="initial-input-focus";return en(C.Fragment,null,en(a$,{id:E},Y&&J),en(a$,{"aria-live":H,"aria-atomic":"false","aria-relevant":"additions text"},f&&!Y&&J))},vve=gve,Tk=[{base:"A",letters:"AⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",letters:"Ꜳ"},{base:"AE",letters:"ÆǼǢ"},{base:"AO",letters:"Ꜵ"},{base:"AU",letters:"Ꜷ"},{base:"AV",letters:"ꜸꜺ"},{base:"AY",letters:"Ꜽ"},{base:"B",letters:"BⒷＢḂḄḆɃƂƁ"},{base:"C",letters:"CⒸＣĆĈĊČÇḈƇȻꜾ"},{base:"D",letters:"DⒹＤḊĎḌḐḒḎĐƋƊƉꝹ"},{base:"DZ",letters:"ǱǄ"},{base:"Dz",letters:"ǲǅ"},{base:"E",letters:"EⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎ"},{base:"F",letters:"FⒻＦḞƑꝻ"},{base:"G",letters:"GⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾ"},{base:"H",letters:"HⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",letters:"IⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",letters:"JⒿＪĴɈ"},{base:"K",letters:"KⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",letters:"LⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",letters:"Ǉ"},{base:"Lj",letters:"ǈ"},{base:"M",letters:"MⓂＭḾṀṂⱮƜ"},{base:"N",letters:"NⓃＮǸŃÑṄŇṆŅṊṈȠƝꞐꞤ"},{base:"NJ",letters:"Ǌ"},{base:"Nj",letters:"ǋ"},{base:"O",letters:"OⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OI",letters:"Ƣ"},{base:"OO",letters:"Ꝏ"},{base:"OU",letters:"Ȣ"},{base:"P",letters:"PⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",letters:"QⓆＱꝖꝘɊ"},{base:"R",letters:"RⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",letters:"SⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",letters:"TⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"TZ",letters:"Ꜩ"},{base:"U",letters:"UⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",letters:"VⓋＶṼṾƲꝞɅ"},{base:"VY",letters:"Ꝡ"},{base:"W",letters:"WⓌＷẀẂŴẆẄẈⱲ"},{base:"X",letters:"XⓍＸẊẌ"},{base:"Y",letters:"YⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",letters:"ZⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",letters:"aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐ"},{base:"aa",letters:"ꜳ"},{base:"ae",letters:"æǽǣ"},{base:"ao",letters:"ꜵ"},{base:"au",letters:"ꜷ"},{base:"av",letters:"ꜹꜻ"},{base:"ay",letters:"ꜽ"},{base:"b",letters:"bⓑｂḃḅḇƀƃɓ"},{base:"c",letters:"cⓒｃćĉċčçḉƈȼꜿↄ"},{base:"d",letters:"dⓓｄḋďḍḑḓḏđƌɖɗꝺ"},{base:"dz",letters:"ǳǆ"},{base:"e",letters:"eⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇɛǝ"},{base:"f",letters:"fⓕｆḟƒꝼ"},{base:"g",letters:"gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ"},{base:"h",letters:"hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",letters:"ƕ"},{base:"i",letters:"iⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",letters:"jⓙｊĵǰɉ"},{base:"k",letters:"kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",letters:"lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ"},{base:"lj",letters:"ǉ"},{base:"m",letters:"mⓜｍḿṁṃɱɯ"},{base:"n",letters:"nⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥ"},{base:"nj",letters:"ǌ"},{base:"o",letters:"oⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿɔꝋꝍɵ"},{base:"oi",letters:"ƣ"},{base:"ou",letters:"ȣ"},{base:"oo",letters:"ꝏ"},{base:"p",letters:"pⓟｐṕṗƥᵽꝑꝓꝕ"},{base:"q",letters:"qⓠｑɋꝗꝙ"},{base:"r",letters:"rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",letters:"sⓢｓßśṥŝṡšṧṣṩșşȿꞩꞅẛ"},{base:"t",letters:"tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"tz",letters:"ꜩ"},{base:"u",letters:"uⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",letters:"vⓥｖṽṿʋꝟʌ"},{base:"vy",letters:"ꝡ"},{base:"w",letters:"wⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",letters:"xⓧｘẋẍ"},{base:"y",letters:"yⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",letters:"zⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],Eve=new RegExp("["+Tk.map(function(e){return e.letters}).join("")+"]","g"),cK={};for(var mD=0;mD<Tk.length;mD++)for(var gD=Tk[mD],vD=0;vD<gD.letters.length;vD++)cK[gD.letters[vD]]=gD.base;var lK=function(t){return t.replace(Eve,function(i){return cK[i]})},_ve=hve(lK),s$=function(t){return t.replace(/^\s+|\s+$/g,"")},Sve=function(t){return"".concat(t.label," ").concat(t.value)},yve=function(t){return function(i,a){if(i.data.__isNew__)return!0;var c=Ae({ignoreCase:!0,ignoreAccents:!0,stringify:Sve,trim:!0,matchFrom:"any"},t),u=c.ignoreCase,f=c.ignoreAccents,m=c.stringify,g=c.trim,E=c.matchFrom,y=g?s$(a):a,T=g?s$(m(i)):m(i);return u&&(y=y.toLowerCase(),T=T.toLowerCase()),f&&(y=_ve(y),T=lK(T)),E==="start"?T.substr(0,y.length)===y:T.indexOf(y)>-1}},Cve=["innerRef"];function Tve(e){var t=e.innerRef,i=Xn(e,Cve),a=tge(i,"onExited","in","enter","exit","appear");return en("input",st({ref:t},a,{css:kM({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var bve=function(t){t.preventDefault(),t.stopPropagation()};function Rve(e){var t=e.isEnabled,i=e.onBottomArrive,a=e.onBottomLeave,c=e.onTopArrive,u=e.onTopLeave,f=C.useRef(!1),m=C.useRef(!1),g=C.useRef(0),E=C.useRef(null),y=C.useCallback(function(M,D){if(E.current!==null){var x=E.current,k=x.scrollTop,V=x.scrollHeight,H=x.clientHeight,$=E.current,G=D>0,K=V-H-k,Q=!1;K>D&&f.current&&(a&&a(M),f.current=!1),G&&m.current&&(u&&u(M),m.current=!1),G&&D>K?(i&&!f.current&&i(M),$.scrollTop=V,Q=!0,f.current=!0):!G&&-D>k&&(c&&!m.current&&c(M),$.scrollTop=0,Q=!0,m.current=!0),Q&&bve(M)}},[i,a,c,u]),T=C.useCallback(function(M){y(M,M.deltaY)},[y]),R=C.useCallback(function(M){g.current=M.changedTouches[0].clientY},[]),P=C.useCallback(function(M){var D=g.current-M.changedTouches[0].clientY;y(M,D)},[y]),O=C.useCallback(function(M){if(M){var D=Q0e?{passive:!1}:!1;M.addEventListener("wheel",T,D),M.addEventListener("touchstart",R,D),M.addEventListener("touchmove",P,D)}},[P,R,T]),N=C.useCallback(function(M){M&&(M.removeEventListener("wheel",T,!1),M.removeEventListener("touchstart",R,!1),M.removeEventListener("touchmove",P,!1))},[P,R,T]);return C.useEffect(function(){if(t){var M=E.current;return O(M),function(){N(M)}}},[t,O,N]),function(M){E.current=M}}var c$=["boxSizing","height","overflow","paddingRight","position"],l$={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function u$(e){e.preventDefault()}function d$(e){e.stopPropagation()}function h$(){var e=this.scrollTop,t=this.scrollHeight,i=e+this.offsetHeight;e===0?this.scrollTop=1:i===t&&(this.scrollTop=e-1)}function f$(){return"ontouchstart"in window||navigator.maxTouchPoints}var p$=!!(typeof window<"u"&&window.document&&window.document.createElement),S_=0,N0={capture:!1,passive:!1};function Ive(e){var t=e.isEnabled,i=e.accountForScrollbars,a=i===void 0?!0:i,c=C.useRef({}),u=C.useRef(null),f=C.useCallback(function(g){if(p$){var E=document.body,y=E&&E.style;if(a&&c$.forEach(function(O){var N=y&&y[O];c.current[O]=N}),a&&S_<1){var T=parseInt(c.current.paddingRight,10)||0,R=document.body?document.body.clientWidth:0,P=window.innerWidth-R+T||0;Object.keys(l$).forEach(function(O){var N=l$[O];y&&(y[O]=N)}),y&&(y.paddingRight="".concat(P,"px"))}E&&f$()&&(E.addEventListener("touchmove",u$,N0),g&&(g.addEventListener("touchstart",h$,N0),g.addEventListener("touchmove",d$,N0))),S_+=1}},[a]),m=C.useCallback(function(g){if(p$){var E=document.body,y=E&&E.style;S_=Math.max(S_-1,0),a&&S_<1&&c$.forEach(function(T){var R=c.current[T];y&&(y[T]=R)}),E&&f$()&&(E.removeEventListener("touchmove",u$,N0),g&&(g.removeEventListener("touchstart",h$,N0),g.removeEventListener("touchmove",d$,N0)))}},[a]);return C.useEffect(function(){if(t){var g=u.current;return f(g),function(){m(g)}}},[t,f,m]),function(g){u.current=g}}var wve=function(){return document.activeElement&&document.activeElement.blur()},Ove={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function Ave(e){var t=e.children,i=e.lockEnabled,a=e.captureEnabled,c=a===void 0?!0:a,u=e.onBottomArrive,f=e.onBottomLeave,m=e.onTopArrive,g=e.onTopLeave,E=Rve({isEnabled:c,onBottomArrive:u,onBottomLeave:f,onTopArrive:m,onTopLeave:g}),y=Ive({isEnabled:i}),T=function(P){E(P),y(P)};return en(C.Fragment,null,i&&en("div",{onClick:wve,css:Ove}),t(T))}var Nve={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},xve=function(t){var i=t.name,a=t.onFocus;return en("input",{required:!0,name:i,tabIndex:-1,"aria-hidden":"true",onFocus:a,css:Nve,value:"",onChange:function(){}})},Pve=xve,Dve=function(t){return t.label},Lve=function(t){return t.label},kve=function(t){return t.value},Mve=function(t){return!!t.isDisabled},Uve={clearIndicator:bge,container:pge,control:Nge,dropdownIndicator:Cge,group:Lge,groupHeading:Mge,indicatorsContainer:Ege,indicatorSeparator:Ige,input:jge,loadingIndicator:Age,loadingMessage:dge,menu:ige,menuList:cge,menuPortal:hge,multiValue:Gge,multiValueLabel:zge,multiValueRemove:Kge,noOptionsMessage:uge,option:Zge,placeholder:nve,singleValue:ove,valueContainer:gge},Fve={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},Vve=4,uK=4,jve=38,Bve=uK*2,$ve={baseUnit:uK,controlHeight:jve,menuGutter:Bve},ED={borderRadius:Vve,colors:Fve,spacing:$ve},Hve={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:r$(),captureMenuScroll:!r$(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:yve(),formatGroupLabel:Dve,getOptionLabel:Lve,getOptionValue:kve,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:Mve,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!X0e(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(t){var i=t.count;return"".concat(i," result").concat(i!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function m$(e,t,i,a){var c=pK(e,t,i),u=mK(e,t,i),f=fK(e,t),m=F1(e,t);return{type:"option",data:t,isDisabled:c,isSelected:u,label:f,value:m,index:a}}function dK(e,t){return e.options.map(function(i,a){if("options"in i){var c=i.options.map(function(f,m){return m$(e,f,t,m)}).filter(function(f){return g$(e,f)});return c.length>0?{type:"group",data:i,options:c,index:a}:void 0}var u=m$(e,i,t,a);return g$(e,u)?u:void 0}).filter(Z0e)}function hK(e){return e.reduce(function(t,i){return i.type==="group"?t.push.apply(t,gt(i.options.map(function(a){return a.data}))):t.push(i.data),t},[])}function Wve(e,t){return hK(dK(e,t))}function g$(e,t){var i=e.inputValue,a=i===void 0?"":i,c=t.data,u=t.isSelected,f=t.label,m=t.value;return(!vK(e)||!u)&&gK(e,{label:f,value:m,data:c},a)}function Gve(e,t){var i=e.focusedValue,a=e.selectValue,c=a.indexOf(i);if(c>-1){var u=t.indexOf(i);if(u>-1)return i;if(c<t.length)return t[c]}return null}function zve(e,t){var i=e.focusedOption;return i&&t.indexOf(i)>-1?i:t[0]}var fK=function(t,i){return t.getOptionLabel(i)},F1=function(t,i){return t.getOptionValue(i)};function pK(e,t,i){return typeof e.isOptionDisabled=="function"?e.isOptionDisabled(t,i):!1}function mK(e,t,i){if(i.indexOf(t)>-1)return!0;if(typeof e.isOptionSelected=="function")return e.isOptionSelected(t,i);var a=F1(e,t);return i.some(function(c){return F1(e,c)===a})}function gK(e,t,i){return e.filterOption?e.filterOption(t,i):!0}var vK=function(t){var i=t.hideSelectedOptions,a=t.isMulti;return i===void 0?a:i},Kve=1,EK=function(e){Sg(i,e);var t=yg(i);function i(a){var c;if(kc(this,i),c=t.call(this,a),c.state={ariaSelection:null,focusedOption:null,focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0},c.blockOptionHover=!1,c.isComposing=!1,c.commonProps=void 0,c.initialTouchX=0,c.initialTouchY=0,c.instancePrefix="",c.openAfterFocus=!1,c.scrollToFocusedOptionOnUpdate=!1,c.userIsDragging=void 0,c.controlRef=null,c.getControlRef=function(m){c.controlRef=m},c.focusedOptionRef=null,c.getFocusedOptionRef=function(m){c.focusedOptionRef=m},c.menuListRef=null,c.getMenuListRef=function(m){c.menuListRef=m},c.inputRef=null,c.getInputRef=function(m){c.inputRef=m},c.focus=c.focusInput,c.blur=c.blurInput,c.onChange=function(m,g){var E=c.props,y=E.onChange,T=E.name;g.name=T,c.ariaOnChange(m,g),y(m,g)},c.setValue=function(m,g,E){var y=c.props,T=y.closeMenuOnSelect,R=y.isMulti,P=y.inputValue;c.onInputChange("",{action:"set-value",prevInputValue:P}),T&&(c.setState({inputIsHiddenAfterUpdate:!R}),c.onMenuClose()),c.setState({clearFocusValueOnUpdate:!0}),c.onChange(m,{action:g,option:E})},c.selectOption=function(m){var g=c.props,E=g.blurInputOnSelect,y=g.isMulti,T=g.name,R=c.state.selectValue,P=y&&c.isOptionSelected(m,R),O=c.isOptionDisabled(m,R);if(P){var N=c.getOptionValue(m);c.setValue(R.filter(function(M){return c.getOptionValue(M)!==N}),"deselect-option",m)}else if(!O)y?c.setValue([].concat(gt(R),[m]),"select-option",m):c.setValue(m,"select-option");else{c.ariaOnChange(m,{action:"select-option",option:m,name:T});return}E&&c.blurInput()},c.removeValue=function(m){var g=c.props.isMulti,E=c.state.selectValue,y=c.getOptionValue(m),T=E.filter(function(P){return c.getOptionValue(P)!==y}),R=pR(g,T,T[0]||null);c.onChange(R,{action:"remove-value",removedValue:m}),c.focusInput()},c.clearValue=function(){var m=c.state.selectValue;c.onChange(pR(c.props.isMulti,[],null),{action:"clear",removedValues:m})},c.popValue=function(){var m=c.props.isMulti,g=c.state.selectValue,E=g[g.length-1],y=g.slice(0,g.length-1),T=pR(m,y,y[0]||null);c.onChange(T,{action:"pop-value",removedValue:E})},c.getValue=function(){return c.state.selectValue},c.cx=function(){for(var m=arguments.length,g=new Array(m),E=0;E<m;E++)g[E]=arguments[E];return G0e.apply(void 0,[c.props.classNamePrefix].concat(g))},c.getOptionLabel=function(m){return fK(c.props,m)},c.getOptionValue=function(m){return F1(c.props,m)},c.getStyles=function(m,g){var E=c.props.unstyled,y=Uve[m](g,E);y.boxSizing="border-box";var T=c.props.styles[m];return T?T(y,g):y},c.getClassNames=function(m,g){var E,y;return(E=(y=c.props.classNames)[m])===null||E===void 0?void 0:E.call(y,g)},c.getElementId=function(m){return"".concat(c.instancePrefix,"-").concat(m)},c.getComponents=function(){return lve(c.props)},c.buildCategorizedOptions=function(){return dK(c.props,c.state.selectValue)},c.getCategorizedOptions=function(){return c.props.menuIsOpen?c.buildCategorizedOptions():[]},c.buildFocusableOptions=function(){return hK(c.buildCategorizedOptions())},c.getFocusableOptions=function(){return c.props.menuIsOpen?c.buildFocusableOptions():[]},c.ariaOnChange=function(m,g){c.setState({ariaSelection:Ae({value:m},g)})},c.onMenuMouseDown=function(m){m.button===0&&(m.stopPropagation(),m.preventDefault(),c.focusInput())},c.onMenuMouseMove=function(m){c.blockOptionHover=!1},c.onControlMouseDown=function(m){if(!m.defaultPrevented){var g=c.props.openMenuOnClick;c.state.isFocused?c.props.menuIsOpen?m.target.tagName!=="INPUT"&&m.target.tagName!=="TEXTAREA"&&c.onMenuClose():g&&c.openMenu("first"):(g&&(c.openAfterFocus=!0),c.focusInput()),m.target.tagName!=="INPUT"&&m.target.tagName!=="TEXTAREA"&&m.preventDefault()}},c.onDropdownIndicatorMouseDown=function(m){if(!(m&&m.type==="mousedown"&&m.button!==0)&&!c.props.isDisabled){var g=c.props,E=g.isMulti,y=g.menuIsOpen;c.focusInput(),y?(c.setState({inputIsHiddenAfterUpdate:!E}),c.onMenuClose()):c.openMenu("first"),m.preventDefault()}},c.onClearIndicatorMouseDown=function(m){m&&m.type==="mousedown"&&m.button!==0||(c.clearValue(),m.preventDefault(),c.openAfterFocus=!1,m.type==="touchend"?c.focusInput():setTimeout(function(){return c.focusInput()}))},c.onScroll=function(m){typeof c.props.closeMenuOnScroll=="boolean"?m.target instanceof HTMLElement&&$I(m.target)&&c.props.onMenuClose():typeof c.props.closeMenuOnScroll=="function"&&c.props.closeMenuOnScroll(m)&&c.props.onMenuClose()},c.onCompositionStart=function(){c.isComposing=!0},c.onCompositionEnd=function(){c.isComposing=!1},c.onTouchStart=function(m){var g=m.touches,E=g&&g.item(0);E&&(c.initialTouchX=E.clientX,c.initialTouchY=E.clientY,c.userIsDragging=!1)},c.onTouchMove=function(m){var g=m.touches,E=g&&g.item(0);if(E){var y=Math.abs(E.clientX-c.initialTouchX),T=Math.abs(E.clientY-c.initialTouchY),R=5;c.userIsDragging=y>R||T>R}},c.onTouchEnd=function(m){c.userIsDragging||(c.controlRef&&!c.controlRef.contains(m.target)&&c.menuListRef&&!c.menuListRef.contains(m.target)&&c.blurInput(),c.initialTouchX=0,c.initialTouchY=0)},c.onControlTouchEnd=function(m){c.userIsDragging||c.onControlMouseDown(m)},c.onClearIndicatorTouchEnd=function(m){c.userIsDragging||c.onClearIndicatorMouseDown(m)},c.onDropdownIndicatorTouchEnd=function(m){c.userIsDragging||c.onDropdownIndicatorMouseDown(m)},c.handleInputChange=function(m){var g=c.props.inputValue,E=m.currentTarget.value;c.setState({inputIsHiddenAfterUpdate:!1}),c.onInputChange(E,{action:"input-change",prevInputValue:g}),c.props.menuIsOpen||c.onMenuOpen()},c.onInputFocus=function(m){c.props.onFocus&&c.props.onFocus(m),c.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(c.openAfterFocus||c.props.openMenuOnFocus)&&c.openMenu("first"),c.openAfterFocus=!1},c.onInputBlur=function(m){var g=c.props.inputValue;if(c.menuListRef&&c.menuListRef.contains(document.activeElement)){c.inputRef.focus();return}c.props.onBlur&&c.props.onBlur(m),c.onInputChange("",{action:"input-blur",prevInputValue:g}),c.onMenuClose(),c.setState({focusedValue:null,isFocused:!1})},c.onOptionHover=function(m){c.blockOptionHover||c.state.focusedOption===m||c.setState({focusedOption:m})},c.shouldHideSelectedOptions=function(){return vK(c.props)},c.onValueInputFocus=function(m){m.preventDefault(),m.stopPropagation(),c.focus()},c.onKeyDown=function(m){var g=c.props,E=g.isMulti,y=g.backspaceRemovesValue,T=g.escapeClearsValue,R=g.inputValue,P=g.isClearable,O=g.isDisabled,N=g.menuIsOpen,M=g.onKeyDown,D=g.tabSelectsValue,x=g.openMenuOnFocus,k=c.state,V=k.focusedOption,H=k.focusedValue,$=k.selectValue;if(!O&&!(typeof M=="function"&&(M(m),m.defaultPrevented))){switch(c.blockOptionHover=!0,m.key){case"ArrowLeft":if(!E||R)return;c.focusValue("previous");break;case"ArrowRight":if(!E||R)return;c.focusValue("next");break;case"Delete":case"Backspace":if(R)return;if(H)c.removeValue(H);else{if(!y)return;E?c.popValue():P&&c.clearValue()}break;case"Tab":if(c.isComposing||m.shiftKey||!N||!D||!V||x&&c.isOptionSelected(V,$))return;c.selectOption(V);break;case"Enter":if(m.keyCode===229)break;if(N){if(!V||c.isComposing)return;c.selectOption(V);break}return;case"Escape":N?(c.setState({inputIsHiddenAfterUpdate:!1}),c.onInputChange("",{action:"menu-close",prevInputValue:R}),c.onMenuClose()):P&&T&&c.clearValue();break;case" ":if(R)return;if(!N){c.openMenu("first");break}if(!V)return;c.selectOption(V);break;case"ArrowUp":N?c.focusOption("up"):c.openMenu("last");break;case"ArrowDown":N?c.focusOption("down"):c.openMenu("first");break;case"PageUp":if(!N)return;c.focusOption("pageup");break;case"PageDown":if(!N)return;c.focusOption("pagedown");break;case"Home":if(!N)return;c.focusOption("first");break;case"End":if(!N)return;c.focusOption("last");break;default:return}m.preventDefault()}},c.instancePrefix="react-select-"+(c.props.instanceId||++Kve),c.state.selectValue=t$(a.value),a.menuIsOpen&&c.state.selectValue.length){var u=c.buildFocusableOptions(),f=u.indexOf(c.state.selectValue[0]);c.state.focusedOption=u[f]}return c}return Mc(i,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&n$(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(c){var u=this.props,f=u.isDisabled,m=u.menuIsOpen,g=this.state.isFocused;(g&&!f&&c.isDisabled||g&&m&&!c.menuIsOpen)&&this.focusInput(),g&&f&&!c.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!g&&!f&&c.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(n$(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(c,u){this.props.onInputChange(c,u)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(c){var u=this,f=this.state,m=f.selectValue,g=f.isFocused,E=this.buildFocusableOptions(),y=c==="first"?0:E.length-1;if(!this.props.isMulti){var T=E.indexOf(m[0]);T>-1&&(y=T)}this.scrollToFocusedOptionOnUpdate=!(g&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:E[y]},function(){return u.onMenuOpen()})}},{key:"focusValue",value:function(c){var u=this.state,f=u.selectValue,m=u.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var g=f.indexOf(m);m||(g=-1);var E=f.length-1,y=-1;if(f.length){switch(c){case"previous":g===0?y=0:g===-1?y=E:y=g-1;break;case"next":g>-1&&g<E&&(y=g+1);break}this.setState({inputIsHidden:y!==-1,focusedValue:f[y]})}}}},{key:"focusOption",value:function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",u=this.props.pageSize,f=this.state.focusedOption,m=this.getFocusableOptions();if(m.length){var g=0,E=m.indexOf(f);f||(E=-1),c==="up"?g=E>0?E-1:m.length-1:c==="down"?g=(E+1)%m.length:c==="pageup"?(g=E-u,g<0&&(g=0)):c==="pagedown"?(g=E+u,g>m.length-1&&(g=m.length-1)):c==="last"&&(g=m.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:m[g],focusedValue:null})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(ED):Ae(Ae({},ED),this.props.theme):ED}},{key:"getCommonProps",value:function(){var c=this.clearValue,u=this.cx,f=this.getStyles,m=this.getClassNames,g=this.getValue,E=this.selectOption,y=this.setValue,T=this.props,R=T.isMulti,P=T.isRtl,O=T.options,N=this.hasValue();return{clearValue:c,cx:u,getStyles:f,getClassNames:m,getValue:g,hasValue:N,isMulti:R,isRtl:P,options:O,selectOption:E,selectProps:T,setValue:y,theme:this.getTheme()}}},{key:"hasValue",value:function(){var c=this.state.selectValue;return c.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var c=this.props,u=c.isClearable,f=c.isMulti;return u===void 0?f:u}},{key:"isOptionDisabled",value:function(c,u){return pK(this.props,c,u)}},{key:"isOptionSelected",value:function(c,u){return mK(this.props,c,u)}},{key:"filterOption",value:function(c,u){return gK(this.props,c,u)}},{key:"formatOptionLabel",value:function(c,u){if(typeof this.props.formatOptionLabel=="function"){var f=this.props.inputValue,m=this.state.selectValue;return this.props.formatOptionLabel(c,{context:u,inputValue:f,selectValue:m})}else return this.getOptionLabel(c)}},{key:"formatGroupLabel",value:function(c){return this.props.formatGroupLabel(c)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var c=this.props,u=c.isDisabled,f=c.isSearchable,m=c.inputId,g=c.inputValue,E=c.tabIndex,y=c.form,T=c.menuIsOpen,R=c.required,P=this.getComponents(),O=P.Input,N=this.state,M=N.inputIsHidden,D=N.ariaSelection,x=this.commonProps,k=m||this.getElementId("input"),V=Ae(Ae(Ae({"aria-autocomplete":"list","aria-expanded":T,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":R,role:"combobox"},T&&{"aria-controls":this.getElementId("listbox"),"aria-owns":this.getElementId("listbox")}),!f&&{"aria-readonly":!0}),this.hasValue()?(D==null?void 0:D.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return f?C.createElement(O,st({},x,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:k,innerRef:this.getInputRef,isDisabled:u,isHidden:M,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:E,form:y,type:"text",value:g},V)):C.createElement(Tve,st({id:k,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:M1,onFocus:this.onInputFocus,disabled:u,tabIndex:E,inputMode:"none",form:y,value:""},V))}},{key:"renderPlaceholderOrValue",value:function(){var c=this,u=this.getComponents(),f=u.MultiValue,m=u.MultiValueContainer,g=u.MultiValueLabel,E=u.MultiValueRemove,y=u.SingleValue,T=u.Placeholder,R=this.commonProps,P=this.props,O=P.controlShouldRenderValue,N=P.isDisabled,M=P.isMulti,D=P.inputValue,x=P.placeholder,k=this.state,V=k.selectValue,H=k.focusedValue,$=k.isFocused;if(!this.hasValue()||!O)return D?null:C.createElement(T,st({},R,{key:"placeholder",isDisabled:N,isFocused:$,innerProps:{id:this.getElementId("placeholder")}}),x);if(M)return V.map(function(K,Q){var z=K===H,ie="".concat(c.getOptionLabel(K),"-").concat(c.getOptionValue(K));return C.createElement(f,st({},R,{components:{Container:m,Label:g,Remove:E},isFocused:z,isDisabled:N,key:ie,index:Q,removeProps:{onClick:function(){return c.removeValue(K)},onTouchEnd:function(){return c.removeValue(K)},onMouseDown:function(Y){Y.preventDefault()}},data:K}),c.formatOptionLabel(K,"value"))});if(D)return null;var G=V[0];return C.createElement(y,st({},R,{data:G,isDisabled:N}),this.formatOptionLabel(G,"value"))}},{key:"renderClearIndicator",value:function(){var c=this.getComponents(),u=c.ClearIndicator,f=this.commonProps,m=this.props,g=m.isDisabled,E=m.isLoading,y=this.state.isFocused;if(!this.isClearable()||!u||g||!this.hasValue()||E)return null;var T={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return C.createElement(u,st({},f,{innerProps:T,isFocused:y}))}},{key:"renderLoadingIndicator",value:function(){var c=this.getComponents(),u=c.LoadingIndicator,f=this.commonProps,m=this.props,g=m.isDisabled,E=m.isLoading,y=this.state.isFocused;if(!u||!E)return null;var T={"aria-hidden":"true"};return C.createElement(u,st({},f,{innerProps:T,isDisabled:g,isFocused:y}))}},{key:"renderIndicatorSeparator",value:function(){var c=this.getComponents(),u=c.DropdownIndicator,f=c.IndicatorSeparator;if(!u||!f)return null;var m=this.commonProps,g=this.props.isDisabled,E=this.state.isFocused;return C.createElement(f,st({},m,{isDisabled:g,isFocused:E}))}},{key:"renderDropdownIndicator",value:function(){var c=this.getComponents(),u=c.DropdownIndicator;if(!u)return null;var f=this.commonProps,m=this.props.isDisabled,g=this.state.isFocused,E={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return C.createElement(u,st({},f,{innerProps:E,isDisabled:m,isFocused:g}))}},{key:"renderMenu",value:function(){var c=this,u=this.getComponents(),f=u.Group,m=u.GroupHeading,g=u.Menu,E=u.MenuList,y=u.MenuPortal,T=u.LoadingMessage,R=u.NoOptionsMessage,P=u.Option,O=this.commonProps,N=this.state.focusedOption,M=this.props,D=M.captureMenuScroll,x=M.inputValue,k=M.isLoading,V=M.loadingMessage,H=M.minMenuHeight,$=M.maxMenuHeight,G=M.menuIsOpen,K=M.menuPlacement,Q=M.menuPosition,z=M.menuPortalTarget,ie=M.menuShouldBlockScroll,J=M.menuShouldScrollIntoView,Y=M.noOptionsMessage,oe=M.onMenuScrollToTop,ue=M.onMenuScrollToBottom;if(!G)return null;var he=function(_e,ge){var Ue=_e.type,Fe=_e.data,ot=_e.isDisabled,qe=_e.isSelected,wt=_e.label,kt=_e.value,_t=N===Fe,vt=ot?void 0:function(){return c.onOptionHover(Fe)},At=ot?void 0:function(){return c.selectOption(Fe)},it="".concat(c.getElementId("option"),"-").concat(ge),Mt={id:it,onClick:At,onMouseMove:vt,onMouseOver:vt,tabIndex:-1};return C.createElement(P,st({},O,{innerProps:Mt,data:Fe,isDisabled:ot,isSelected:qe,key:it,label:wt,type:Ue,value:kt,isFocused:_t,innerRef:_t?c.getFocusedOptionRef:void 0}),c.formatOptionLabel(_e.data,"menu"))},Se;if(this.hasOptions())Se=this.getCategorizedOptions().map(function(fe){if(fe.type==="group"){var _e=fe.data,ge=fe.options,Ue=fe.index,Fe="".concat(c.getElementId("group"),"-").concat(Ue),ot="".concat(Fe,"-heading");return C.createElement(f,st({},O,{key:Fe,data:_e,options:ge,Heading:m,headingProps:{id:ot,data:fe.data},label:c.formatGroupLabel(fe.data)}),fe.options.map(function(qe){return he(qe,"".concat(Ue,"-").concat(qe.index))}))}else if(fe.type==="option")return he(fe,"".concat(fe.index))});else if(k){var ve=V({inputValue:x});if(ve===null)return null;Se=C.createElement(T,O,ve)}else{var Re=Y({inputValue:x});if(Re===null)return null;Se=C.createElement(R,O,Re)}var Ce={minMenuHeight:H,maxMenuHeight:$,menuPlacement:K,menuPosition:Q,menuShouldScrollIntoView:J},pe=C.createElement(oge,st({},O,Ce),function(fe){var _e=fe.ref,ge=fe.placerProps,Ue=ge.placement,Fe=ge.maxHeight;return C.createElement(g,st({},O,Ce,{innerRef:_e,innerProps:{onMouseDown:c.onMenuMouseDown,onMouseMove:c.onMenuMouseMove,id:c.getElementId("listbox")},isLoading:k,placement:Ue}),C.createElement(Ave,{captureEnabled:D,onTopArrive:oe,onBottomArrive:ue,lockEnabled:ie},function(ot){return C.createElement(E,st({},O,{innerRef:function(wt){c.getMenuListRef(wt),ot(wt)},isLoading:k,maxHeight:Fe,focusedOption:N}),Se)}))});return z||Q==="fixed"?C.createElement(y,st({},O,{appendTo:z,controlElement:this.controlRef,menuPlacement:K,menuPosition:Q}),pe):pe}},{key:"renderFormField",value:function(){var c=this,u=this.props,f=u.delimiter,m=u.isDisabled,g=u.isMulti,E=u.name,y=u.required,T=this.state.selectValue;if(y&&!this.hasValue()&&!m)return C.createElement(Pve,{name:E,onFocus:this.onValueInputFocus});if(!(!E||m))if(g)if(f){var R=T.map(function(N){return c.getOptionValue(N)}).join(f);return C.createElement("input",{name:E,type:"hidden",value:R})}else{var P=T.length>0?T.map(function(N,M){return C.createElement("input",{key:"i-".concat(M),name:E,type:"hidden",value:c.getOptionValue(N)})}):C.createElement("input",{name:E,type:"hidden",value:""});return C.createElement("div",null,P)}else{var O=T[0]?this.getOptionValue(T[0]):"";return C.createElement("input",{name:E,type:"hidden",value:O})}}},{key:"renderLiveRegion",value:function(){var c=this.commonProps,u=this.state,f=u.ariaSelection,m=u.focusedOption,g=u.focusedValue,E=u.isFocused,y=u.selectValue,T=this.getFocusableOptions();return C.createElement(vve,st({},c,{id:this.getElementId("live-region"),ariaSelection:f,focusedOption:m,focusedValue:g,isFocused:E,selectValue:y,focusableOptions:T}))}},{key:"render",value:function(){var c=this.getComponents(),u=c.Control,f=c.IndicatorsContainer,m=c.SelectContainer,g=c.ValueContainer,E=this.props,y=E.className,T=E.id,R=E.isDisabled,P=E.menuIsOpen,O=this.state.isFocused,N=this.commonProps=this.getCommonProps();return C.createElement(m,st({},N,{className:y,innerProps:{id:T,onKeyDown:this.onKeyDown},isDisabled:R,isFocused:O}),this.renderLiveRegion(),C.createElement(u,st({},N,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:R,isFocused:O,menuIsOpen:P}),C.createElement(g,st({},N,{isDisabled:R}),this.renderPlaceholderOrValue(),this.renderInput()),C.createElement(f,st({},N,{isDisabled:R}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(c,u){var f=u.prevProps,m=u.clearFocusValueOnUpdate,g=u.inputIsHiddenAfterUpdate,E=u.ariaSelection,y=u.isFocused,T=u.prevWasFocused,R=c.options,P=c.value,O=c.menuIsOpen,N=c.inputValue,M=c.isMulti,D=t$(P),x={};if(f&&(P!==f.value||R!==f.options||O!==f.menuIsOpen||N!==f.inputValue)){var k=O?Wve(c,D):[],V=m?Gve(u,D):null,H=zve(u,k);x={selectValue:D,focusedOption:H,focusedValue:V,clearFocusValueOnUpdate:!1}}var $=g!=null&&c!==f?{inputIsHidden:g,inputIsHiddenAfterUpdate:void 0}:{},G=E,K=y&&T;return y&&!K&&(G={value:pR(M,D,D[0]||null),options:D,action:"initial-input-focus"},K=!T),(E==null?void 0:E.action)==="initial-input-focus"&&(G=null),Ae(Ae(Ae({},x),$),{},{prevProps:c,ariaSelection:G,prevWasFocused:K})}}]),i}(C.Component);EK.defaultProps=Hve;var qve=C.forwardRef(function(e,t){var i=Lme(e);return C.createElement(EK,st({ref:t},i))}),Yve=qve;const{Title:Xve,Paragraph:Jve}=ja,Qve=C.memo(function({label:t}){const a=bu().filter(g=>g.hasAudio||g.hasVideo),c=q_(g=>g.localTracks),u=q_(g=>g.hostRoom),f=xl(),m=Uc();return le.jsxs("div",{className:"room-selector-item",children:[le.jsx("i",{className:"i-mdi-chat-processing-outline text-5 color-zinc"}),le.jsx("code",{className:"bg-rose color-white px-2 rounded",children:t}),f&&c&&m.uid&&(u==null?void 0:u.client.channelName)===m.channelName&&le.jsxs("div",{className:"user",children:[le.jsx(m9,{audioTrack:c[0],cameraOn:!0,micOn:!0,videoTrack:c[1]}),le.jsx("div",{className:"mask"}),le.jsx("label",{className:"label",children:wl(m.uid)})]},m.uid),le.jsx(le.Fragment,{children:a.map(g=>le.jsxs("div",{className:"user",children:[le.jsx(_M,{user:g}),le.jsx("div",{className:"mask"}),le.jsx("label",{className:"label",children:wl(g.uid)})]},g.uid))})]})}),Zve=({innerProps:e,isDisabled:t,label:i,data:a})=>{const{client:c}=a.value;return t?null:le.jsx("div",{...e,children:le.jsx(h9,{client:c,children:le.jsx(Qve,{label:i})})})},eEe=()=>{const e=q_(f=>f.getRooms),[t,i]=C.useState(!1);C.useEffect(()=>{e()},[]);const a=q_(f=>f.rooms),c=q_(f=>f.selectChannel),u=C.useMemo(()=>a==null?void 0:a.map(f=>({label:f.channel.replace(/[^0-9]*/,"Room"),value:f})),[a]);return le.jsx(lo,{children:t?le.jsx("div",{className:"max-w-lg p-10",children:le.jsx(Yve,{components:{Option:Zve},isMulti:!1,menuIsOpen:!0,onChange:f=>{var m;return c((m=f==null?void 0:f.value)==null?void 0:m.channel)},options:u})}):le.jsxs("div",{className:"h-screen p-3",children:[le.jsx(Xve,{children:"multi-channel"}),le.jsx(Jve,{children:"This is multi-channel example. By create multi Agora Client. You can join multi-channel"}),le.jsx("div",{className:"text-xl",children:le.jsx(Do,{onClick:()=>i(!0),type:"primary",children:"show demo"})})]})})};const{Title:tEe,Paragraph:nEe,Text:rEe}=ja,iEe=()=>{const[e,t]=C.useState(!1);ra({appid:Gt.appId,channel:Gt.channel,token:Gt.token},e);const[i,a]=C.useState(!1),[c,u]=C.useState(!1),f=bu(),[m,g]=C.useState(!0),{videoTracks:E}=GS(m?f:f.filter((P,O)=>O==0)),{audioTracks:y}=WS(f);y.map(P=>P.play());const T=()=>le.jsx("div",{className:"p-4 text-xl",children:le.jsx(Do,{onClick:()=>g(P=>!P),type:"primary",children:`switch to layout ${m?2:1}`})}),R=()=>le.jsx(le.Fragment,{children:m?le.jsx(oEe,{videoTracks:E}):le.jsx(aEe,{videoTracks:E})});return le.jsxs(lo,{children:[e?le.jsx(NM,{cameraOn:c,micOn:i,renderAction:T,renderRemoteUsers:R}):le.jsxs("div",{className:"h-screen p-3",children:[le.jsx(tEe,{children:"SwitchLayout"}),le.jsxs(nEe,{children:["By using ",le.jsx(rEe,{keyboard:!0,children:"useRemoteVideoTracks"})," hook to dynamically switch the camera track, this will not generate a new track, but only dynamically subscribe and unsubscribe the track according to your needs."]})]}),le.jsx(tc,{calling:e,cameraOn:c,micOn:i,setCalling:()=>{t(P=>!P)},setCamera:()=>{u(P=>!P)},setMic:()=>{a(P=>!P)}})]})};function oEe({videoTracks:e}){return le.jsx(le.Fragment,{children:e.map(t=>le.jsxs(xc.Item,{children:[le.jsx(KS,{cover:Tu(),track:t},t.getUserId()),le.jsx(fd,{children:`Layout1 ${wl(t.getUserId())}{${t.getUserId()}}`})]},t.getUserId()))})}function aEe({videoTracks:e}){return le.jsx(le.Fragment,{children:e.map(t=>le.jsxs(xc.Item,{children:[le.jsx(KS,{cover:Tu(),track:t},t.getUserId()),le.jsx(fd,{children:`Layout2 ${wl(t.getUserId())}{${t.getUserId()}}`})]},t.getUserId()))})}const _K=[{label:"switch-layout",component:iEe},{label:"multi-channel",component:eEe}];function sEe({videoTracks:e}){return le.jsx(le.Fragment,{children:e.map(t=>le.jsxs(xc.Item,{children:[le.jsx(KS,{cover:Tu(),track:t},t.getUserId()),le.jsx(fd,{children:`${wl(t.getUserId())}{${t.getUserId()}}`})]},t.getUserId()))})}const cEe=()=>{const[e,t]=C.useState(!1);ra({appid:Gt.appId,channel:Gt.channel,token:Gt.token},e);const[i,a]=C.useState(!1),[c,u]=C.useState(!1),f=bu(),{videoTracks:m}=GS(f),{audioTracks:g}=WS(f);return g.map(E=>E.play()),le.jsxs(lo,{children:[e?le.jsx(NM,{cameraOn:c,micOn:i,renderRemoteUsers:()=>le.jsx(sEe,{videoTracks:m})}):le.jsx(lo,{}),le.jsx(tc,{calling:e,cameraOn:c,micOn:i,setCalling:()=>{t(E=>!E)},setCamera:()=>{u(E=>!E)},setMic:()=>{a(E=>!E)}})]})},SK=[{label:"overview",component:cEe}],{Title:lEe,Paragraph:_D}=ja,uEe=()=>{ra({appid:Gt.appId,channel:Gt.channel,token:Gt.token},!0);const[e,t]=C.useState(!1),[i,a]=C.useState(),{localMicrophoneTrack:c}=Dg(e);return Pg([c]),C.useEffect(()=>{c&&a({muted:c.muted,isPlaying:c.isPlaying,enabled:c.enabled})},[e,c]),le.jsxs(lo,{children:[le.jsxs("div",{className:"h-screen p-3",children:[le.jsx(lEe,{children:"local audio track status"}),i&&le.jsxs(le.Fragment,{children:[le.jsx(_D,{children:`muted: ${i==null?void 0:i.muted}`}),le.jsx(_D,{children:`isPlaying: ${i.isPlaying}`}),le.jsx(_D,{children:`enabled: ${i==null?void 0:i.enabled}`})]}),le.jsx(gM,{disabled:!e,track:c})]}),le.jsx(tc,{micOn:e,setMic:()=>{t(u=>!u)}})]})},{Title:dEe}=ja,hEe=()=>{ra({appid:Gt.appId,channel:Gt.channel,token:Gt.token},!0);const[e,t]=C.useState(!1),[i,a]=C.useState(!1),[c,u]=C.useState(!1),[f,m]=C.useState(!1),{localMicrophoneTrack:g}=Dg(e),{localCameraTrack:E}=Lg(i);return Pg([g,E]),le.jsxs(lo,{children:[le.jsxs("div",{className:"h-screen p-3 overflow-auto",children:[le.jsx(dEe,{children:"local user status"}),le.jsxs(Do,{className:"m-2",onClick:()=>{m(y=>!y)},type:f?"primary":"default",children:["playAudio : ",JSON.stringify(f)]}),le.jsxs(Do,{className:"m-2",onClick:()=>{u(y=>!y)},type:c?"primary":"default",children:["playVideo : ",JSON.stringify(c)]}),le.jsx(Do,{className:"m-2",onClick:()=>{u(!0),a(!1)},type:"primary",children:"cameraOn=false playVideo=true"}),le.jsx(Do,{className:"m-2",onClick:()=>{u(!1),a(!0)},type:"primary",children:"cameraOn=true playVideo=false"}),le.jsx(m9,{audioTrack:g,cameraOn:i,className:"m-2",micOn:e,playAudio:f,playVideo:c,style:{width:"300px",height:"300px"},videoTrack:E})]}),le.jsx(tc,{cameraOn:i,micOn:e,setCamera:()=>{a(y=>!y)},setMic:()=>{t(y=>!y)}})]})},{Title:fEe}=ja,pEe=()=>{ra({appid:Gt.appId,channel:Gt.channel,token:Gt.token},!0);const[e,t]=C.useState(!1),{localCameraTrack:i}=Lg();return Pg([i]),le.jsxs(lo,{children:[le.jsxs("div",{className:"h-screen p-3",children:[le.jsx(fEe,{children:"local video track"}),le.jsx(vM,{disabled:!e,play:e,style:{width:"300px",height:"300px"},track:i})]}),le.jsx(tc,{cameraOn:e,setCamera:()=>{t(a=>!a)}})]})},{Title:mEe}=ja,gEe=()=>{const[e,t]=C.useState(!1);ra({appid:Gt.appId,channel:Gt.channel,token:Gt.token},e);const[i,a]=C.useState(),c=bu(),{audioTracks:u}=WS(c);return C.useEffect(()=>{if(u&&u.length>0){const f=[];u.map(m=>{f.push({isPlay:m.isPlaying,id:m.getTrackId(),track:m})}),a(f)}else a([])},[u]),C.useEffect(()=>{e||a([])},[e]),le.jsxs(lo,{children:[le.jsxs("div",{className:"h-screen p-3",children:[le.jsx(mEe,{children:"remote audio track status"}),i&&i.length>0&&i.map(f=>le.jsxs("div",{children:[le.jsx("div",{className:"p-4 text-xl",children:le.jsx(Do,{onClick:()=>{f.isPlay=!f.isPlay,a([...i])},type:"primary",children:"switch this remote audio track play status"})}),f.isPlay,le.jsx(g9,{play:f.isPlay,track:f.track})]},f.id))]}),le.jsx(tc,{calling:e,setCalling:()=>{t(f=>!f)}})]})},{Title:vEe}=ja,EEe=()=>{const[e,t]=C.useState(!1),i=C.useMemo(()=>Tu(),[]);ra({appid:Gt.appId,channel:Gt.channel,token:Gt.token},e);const[a,c]=C.useState(),u=bu();return C.useEffect(()=>{if(u.length>0){const f=[];u.map(m=>{f.push({playVideo:!0,playAudio:!0,id:m.uid,user:m})}),c(f)}else c([])},[u]),C.useEffect(()=>{e||c([])},[e]),le.jsxs(lo,{children:[le.jsxs("div",{className:"h-screen p-3",children:[le.jsx(vEe,{children:"RemoteUser"}),a&&a.length>0&&a.map(f=>le.jsxs("div",{children:[le.jsxs("div",{className:"text-xl",children:[le.jsx(Do,{className:"m-2",onClick:()=>{f.playVideo=!f.playVideo,c([...a])},type:f.playVideo?"default":"primary",children:`${f.playVideo?"stop":"play"} RemoteUser Video`}),le.jsx(Do,{className:"m-2",onClick:()=>{f.playAudio=!f.playAudio,c([...a])},type:f.playAudio?"default":"primary",children:`${f.playAudio?"stop":"play"} RemoteUser Audio`})]}),le.jsx("div",{className:"p-4 text-xl",children:le.jsx(_M,{cover:i,playAudio:f.playAudio,playVideo:f.playVideo,style:{width:"150px",height:"100px"},user:f.user})})]},f.id))]}),le.jsx(tc,{calling:e,setCalling:()=>{t(f=>!f)}})]})},{Title:_Ee}=ja,SEe=()=>{const[e,t]=C.useState(!1);ra({appid:Gt.appId,channel:Gt.channel,token:Gt.token},e);const[i,a]=C.useState(),c=bu(),{videoTracks:u}=GS(c);return C.useEffect(()=>{if(u&&u.length>0){const f=[];u.map(m=>{f.push({isPlay:!0,id:m.getTrackId(),track:m})}),a(f)}else a([])},[u]),C.useEffect(()=>{e||a([])},[e]),le.jsxs(lo,{children:[le.jsxs("div",{className:"h-screen p-3",children:[le.jsx(_Ee,{children:"remote video track status"}),i&&i.length>0&&i.map(f=>le.jsxs("div",{children:[le.jsx("div",{className:"p-4 text-xl",children:le.jsx(Do,{onClick:()=>{f.isPlay=!f.isPlay,a([...i])},type:"primary",children:"switch this remote video track play status"})}),le.jsx("div",{className:"p-4 text-xl",children:le.jsx(EM,{play:f.isPlay,style:{width:"150px",height:"100px"},track:f.track})})]},f.id))]}),le.jsx(tc,{calling:e,setCalling:()=>{t(f=>!f)}})]})},yK=[{label:"LocalAudioTrack",component:uEe},{label:"RemoteAudioTrack",component:gEe},{label:"LocalVideoTrack",component:pEe},{label:"RemoteVideoTrack",component:SEe},{label:"LocalUser",component:hEe},{label:"RemoteUser",component:EEe}],{Title:yEe}=ja,CEe=()=>{ra({appid:Gt.appId,channel:Gt.channel,token:Gt.token},!0);const[e,t]=C.useState(!1),{localMicrophoneTrack:i}=Dg();return mM(i,e),le.jsxs(lo,{children:[le.jsx("div",{className:"h-screen p-3",children:le.jsx(yEe,{children:"useAutoPlayAudioTrack"})}),le.jsx(tc,{micOn:e,setMic:()=>{t(a=>!a)}})]})},{Title:TEe}=ja,bEe=()=>{ra({appid:Gt.appId,channel:Gt.channel,token:Gt.token},!0);const[e,t]=C.useState(!1),i=C.useRef(null),{localCameraTrack:a}=Lg();return pM(a,e,i.current),le.jsxs(lo,{children:[le.jsxs("div",{className:"h-screen p-3",children:[le.jsx(TEe,{children:"useAutoPlayVideoTrack"}),le.jsx("div",{className:"p-4 text-xl",children:le.jsx("div",{ref:c=>i.current=c,style:{width:"150px",height:"100px"}})})]}),le.jsx(tc,{cameraOn:e,setCamera:()=>{t(c=>!c)}})]})},{Title:REe,Paragraph:SD,Text:IEe}=ja,wEe=()=>{const[e,t]=C.useState(!1),i=ope();return ra({appid:Gt.appId,channel:Gt.channel,token:Gt.token},e),le.jsx(lo,{children:le.jsxs("div",{className:"h-screen p-3",children:[le.jsx(REe,{children:"useConnectionState"}),le.jsxs(SD,{children:["By using ",le.jsx(IEe,{keyboard:!0,children:"useConnectionState"})," hook to get the current connection state of the client."]}),le.jsx(SD,{children:`result: ${i}`}),le.jsxs(SD,{children:[le.jsx(Do,{className:"m-1",onClick:()=>t(!0),type:"primary",children:"Join"}),le.jsx(Do,{className:"m-1",onClick:()=>t(!1),type:"default",children:"Leave"})]})]})})},{Title:OEe,Paragraph:yD,Text:AEe}=ja,NEe=()=>{const[e,t]=C.useState(!1),i=LI();return ra({appid:Gt.appId,channel:Gt.channel,token:Gt.token},e),le.jsx(lo,{children:le.jsxs("div",{className:"h-screen p-3",children:[le.jsx(OEe,{children:"useCurrentUID"}),le.jsxs(yD,{children:["By using ",le.jsx(AEe,{keyboard:!0,children:"useCurrentUID"})," hook to get the UID of the current user."]}),le.jsx(yD,{children:`result: ${i}`}),le.jsxs(yD,{children:[le.jsx(Do,{className:"m-1",onClick:()=>t(!0),type:"primary",children:"Join"}),le.jsx(Do,{className:"m-1",onClick:()=>t(!1),type:"default",children:"Leave"})]})]})})},{Title:xEe,Paragraph:CD,Text:PEe}=ja,DEe=()=>{const[e,t]=C.useState(!1),i=xl();return ra({appid:Gt.appId,channel:Gt.channel,token:Gt.token},e),le.jsx(lo,{children:le.jsxs("div",{className:"h-screen p-3",children:[le.jsx(xEe,{children:"useIsConnected"}),le.jsxs(CD,{children:["By using ",le.jsx(PEe,{keyboard:!0,children:"useIsConnected"})," hook to determines whether the client is successfully connected to Agora server."]}),le.jsx(CD,{children:`result: ${i}`}),le.jsxs(CD,{children:[le.jsx(Do,{className:"m-1",onClick:()=>t(!0),type:"primary",children:"Join"}),le.jsx(Do,{className:"m-1",onClick:()=>t(!1),type:"default",children:"Leave"})]})]})})},{Title:LEe,Paragraph:v$,Text:y_}=ja,kEe=()=>{const[e,t]=C.useState(!1),{data:i,isLoading:a,isConnected:c,error:u}=ra({appid:Gt.appId,channel:Gt.channel,token:Gt.token},e),[f,m]=C.useState(!1),[g,E]=C.useState(!1),y=bu(),{videoTracks:T}=GS(y),{audioTracks:R}=WS(y);R.map(O=>O.play());const P=()=>le.jsx(le.Fragment,{children:T.map(O=>le.jsxs(xc.Item,{children:[le.jsx(KS,{cover:Tu(),track:O},O.getUserId()),le.jsx(fd,{children:`${wl(O.getUserId())}{${O.getUserId()}}`})]},O.getUserId()))});return le.jsxs(lo,{children:[le.jsxs("div",{className:"h-screen p-3",children:[le.jsx(LEe,{children:"UseJoin"}),le.jsxs(v$,{children:["By using ",le.jsx(y_,{keyboard:!0,children:"UseJoin"})," hook to join room."]}),le.jsxs(v$,{children:["You can do some actions like fetching token before calling join.",le.jsx("br",{}),"Below is the returned data."]}),le.jsxs(y_,{children:["data: ",i]}),le.jsxs(y_,{className:"pl-3",children:["isLoading: ",`${a}`]}),le.jsxs(y_,{className:"pl-3",children:["isConnected: ",`${c}`]}),le.jsxs(y_,{className:"pl-3",children:["error: ",`${JSON.stringify(u)}`]})]}),e&&le.jsx(NM,{cameraOn:g,micOn:f,renderRemoteUsers:P}),le.jsx(tc,{calling:e,cameraOn:g,micOn:f,setCalling:()=>{t(O=>!O)},setCamera:()=>{E(O=>!O)},setMic:()=>{m(O=>!O)}})]})},{Title:MEe,Paragraph:UEe}=ja,FEe=()=>{const e=ape();return ra({appid:Gt.appId,channel:Gt.channel,token:Gt.token},!0),le.jsx(lo,{children:le.jsxs("div",{className:"h-screen p-3",children:[le.jsx(MEe,{children:"useNetworkQuality"}),le.jsx(UEe,{children:`result: ${JSON.stringify(e)}`})]})})},VEe=()=>{const[e,t]=C.useState(!1),i=LI()||0,a=C.useMemo(()=>wl(i),[i]),c=C.useMemo(()=>Tu(),[]),{isConnected:u}=ra({appid:Gt.appId,channel:Gt.channel,token:Gt.token},e),[f,m]=C.useState(!1),[g,E]=C.useState(!1),{localMicrophoneTrack:y}=Dg(f),{localCameraTrack:T}=Lg(g);Pg([y,T]);const R=bu(),P=R.filter(D=>D.hasAudio||D.hasVideo),{videoTracks:O}=GS(R),{audioTracks:N}=WS(R);N.map(D=>D.play());const M=()=>le.jsx(le.Fragment,{children:O.map(D=>le.jsxs(xc.Item,{children:[le.jsx(KS,{cover:Tu(),track:D},D.getUserId()),le.jsx(fd,{children:`Layout1 ${wl(D.getUserId())}{${D.getUserId()}}`})]},D.getUserId()))});return le.jsxs(lo,{children:[le.jsxs(le.Fragment,{children:[le.jsx(yM,{published:P.length+(f||g?1:0),total:R.length+1}),le.jsxs(xc,{children:[u&&le.jsx(xc.Item,{children:le.jsx(SM,{audioTrack:y,cameraOn:g,cover:c,micOn:f,videoTrack:T,children:le.jsx(fd,{children:`${a}{${i}}`})})}),M?M():void 0]})]}),le.jsx(tc,{calling:e,cameraOn:g,micOn:f,setCalling:()=>t(D=>!D),setCamera:()=>{E(D=>!D)},setMic:()=>{m(D=>!D)}})]})},jEe=()=>{const[e,t]=C.useState(!1),i=xl(),a=LI()||0,c=C.useMemo(()=>wl(a),[a]),u=C.useMemo(()=>Tu(),[]);ra({appid:Gt.appId,channel:Gt.channel,token:Gt.token},e);const[f,m]=C.useState(!1),[g,E]=C.useState(!1),{localMicrophoneTrack:y}=Dg(f),{localCameraTrack:T}=Lg(g);Pg([y,T]);const R=bu(),P=R.filter(O=>O.hasAudio||O.hasVideo);return le.jsxs(lo,{children:[le.jsxs(le.Fragment,{children:[le.jsx(yM,{published:P.length+(f||g?1:0),total:R.length+1}),le.jsxs(xc,{children:[i&&le.jsx(xc.Item,{children:le.jsx(SM,{audioTrack:y,cameraOn:g,cover:u,micOn:f,videoTrack:T,children:le.jsx(fd,{children:`${c}{${a}}`})})}),R.map(O=>le.jsxs(xc.Item,{children:[le.jsx(_M,{cover:Tu(),user:O}),le.jsx(fd,{children:`${wl(O.uid)}{${O.uid}}`})]},O.uid))]})]}),le.jsx(tc,{calling:e,cameraOn:g,micOn:f,setCalling:()=>t(O=>!O),setCamera:()=>{E(O=>!O)},setMic:()=>{m(O=>!O)}})]})},CK=[{label:"useJoin",component:kEe},{label:"usePublish",component:VEe},{label:"useRemoteUsers",component:jEe},{label:"useConnectionState",component:wEe},{label:"useIsConnected",component:DEe},{label:"useCurrentUID",component:NEe},{label:"useAutoPlayAudioTrack",component:CEe},{label:"useAutoPlayVideoTrack",component:bEe},{label:"useNetworkQuality",component:FEe}],E$=()=>{const[e,t]=C.useState(Gt.channel),i=g=>{t(g.target.value)},[a,c]=Whe.useNotification(),u=g=>{a[g]({message:"Configuration Saved",description:"Go to other pages and try it now!"})},f=()=>{Gt.channel=e,u("success")},m={wrapperCol:{span:14,offset:4}};return le.jsxs(lo,{children:[c,le.jsx("div",{className:"p-4",children:le.jsx(J6.Item,{label:"Channel Name",children:le.jsx(Xde,{onChange:i,style:{width:"200px"},value:e})})}),le.jsx(J6.Item,{...m,children:le.jsx(Do,{onClick:f,type:"primary",children:"Save configuration"})})]})},{Content:BEe,Sider:$Ee}=gk,Yo=["Basic","Hooks","Components","Advanced","Setting"],HEe=[{label:Yo[0],key:Yo[0],children:SK.map(e=>({key:`/${Yo[0]}/${e.label}`,label:e.label}))},{label:Yo[1],key:Yo[1],children:CK.map(e=>({key:`/${Yo[1]}/${e.label}`,label:e.label}))},{label:Yo[2],key:Yo[2],children:yK.map(e=>({key:`/${Yo[2]}/${e.label}`,label:e.label}))},{label:Yo[3],key:Yo[3],children:_K.map(e=>({key:`/${Yo[3]}/${e.label}`,label:e.label}))},{label:"settings",key:"/setting"}];function WEe(){const[e,t]=C.useState(!1),[i,a]=C.useState([window.location.hash.slice(1).split("/")[1]]),c=f=>{const m=f.find(g=>i.indexOf(g)===-1);m&&Yo.indexOf(m)===-1?a(f):a(m?[m]:[])},u=Fee();return le.jsx(le.Fragment,{children:le.jsxs(gk,{children:[le.jsx($Ee,{collapsed:e,collapsible:!0,onCollapse:f=>t(f),style:{overflow:"auto",height:"100vh",position:"fixed",left:0,top:0,bottom:0},children:le.jsx(Gue,{items:HEe,mode:"inline",onClick:f=>{u(f.key)},onOpenChange:c,openKeys:i,selectedKeys:[window.location.hash.slice(1)],theme:"dark"})}),le.jsx(gk,{style:{marginLeft:e?80:200},children:le.jsxs(BEe,{children:[le.jsxs(Zee,{children:[le.jsx(Jf,{Component:()=>le.jsx(E$,{}),path:"/*"}),le.jsx(Jf,{Component:()=>le.jsx(E$,{}),path:"/setting"}),SK.map(({label:f,component:m})=>{const g=m;return le.jsx(Jf,{Component:()=>le.jsx(lR,{children:le.jsx(g,{})}),path:`/${Yo[0]}/${f}`},f)}),CK.map(({label:f,component:m})=>{const g=m;return le.jsx(Jf,{Component:()=>le.jsx(lR,{children:le.jsx(g,{})}),path:`/${Yo[1]}/${f}`},f)}),yK.map(({label:f,component:m})=>{const g=m;return le.jsx(Jf,{Component:()=>le.jsx(lR,{children:le.jsx(g,{})}),path:`/${Yo[2]}/${f}`},f)}),_K.map(({label:f,component:m})=>{const g=m;return le.jsx(Jf,{Component:()=>le.jsx(lR,{children:le.jsx(g,{})}),path:`/${Yo[3]}/${f}`},f)})]}),le.jsx("a",{"aria-label":"View source on GitHub",className:"github-corner",href:"https://github.com/AgoraIO-Extensions/agora-rtc-react",rel:"noreferrer",target:"_blank",children:le.jsxs("svg",{"aria-hidden":"true",className:"github-corner-svg",height:"80",viewBox:"0 0 250 250",width:"80",children:[le.jsx("path",{d:"M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"}),le.jsx("path",{className:"github-corner-svg-arm",d:"M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2",fill:"currentColor"}),le.jsx("path",{className:"github-corner-svg-body",d:"M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z",fill:"currentColor"})]})})]})})]})})}dp.setLogLevel(2);TD.createRoot(document.getElementById("root")).render(le.jsx(C.StrictMode,{children:le.jsx(tte,{children:le.jsx(WEe,{})})}));
