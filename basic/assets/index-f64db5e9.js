var z0e=Object.defineProperty;var W0e=(t,r,o)=>r in t?z0e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[r]=o;var uy=(t,r,o)=>(W0e(t,typeof r!="symbol"?r+"":r,o),o);function jG(t,r){for(var o=0;o<r.length;o++){const s=r[o];if(typeof s!="string"&&!Array.isArray(s)){for(const c in s)if(c!=="default"&&!(c in t)){const d=Object.getOwnPropertyDescriptor(s,c);d&&Object.defineProperty(t,c,d.get?d:{enumerable:!0,get:()=>s[c]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))s(c);new MutationObserver(c=>{for(const d of c)if(d.type==="childList")for(const f of d.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function o(c){const d={};return c.integrity&&(d.integrity=c.integrity),c.referrerPolicy&&(d.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?d.credentials="include":c.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function s(c){if(c.ep)return;c.ep=!0;const d=o(c);fetch(c.href,d)}})();var On=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Od(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function G0e(t){if(t.__esModule)return t;var r=t.default;if(typeof r=="function"){var o=function s(){return this instanceof s?Reflect.construct(r,arguments,this.constructor):r.apply(this,arguments)};o.prototype=r.prototype}else o={};return Object.defineProperty(o,"__esModule",{value:!0}),Object.keys(t).forEach(function(s){var c=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(o,s,c.get?c:{enumerable:!0,get:function(){return t[s]}})}),o}var $G={exports:{}},Cb={},HG={exports:{}},dr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jv=Symbol.for("react.element"),K0e=Symbol.for("react.portal"),Y0e=Symbol.for("react.fragment"),q0e=Symbol.for("react.strict_mode"),X0e=Symbol.for("react.profiler"),J0e=Symbol.for("react.provider"),Q0e=Symbol.for("react.context"),Z0e=Symbol.for("react.forward_ref"),ege=Symbol.for("react.suspense"),tge=Symbol.for("react.memo"),nge=Symbol.for("react.lazy"),IH=Symbol.iterator;function rge(t){return t===null||typeof t!="object"?null:(t=IH&&t[IH]||t["@@iterator"],typeof t=="function"?t:null)}var zG={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},WG=Object.assign,GG={};function ym(t,r,o){this.props=t,this.context=r,this.refs=GG,this.updater=o||zG}ym.prototype.isReactComponent={};ym.prototype.setState=function(t,r){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,r,"setState")};ym.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function KG(){}KG.prototype=ym.prototype;function _D(t,r,o){this.props=t,this.context=r,this.refs=GG,this.updater=o||zG}var SD=_D.prototype=new KG;SD.constructor=_D;WG(SD,ym.prototype);SD.isPureReactComponent=!0;var AH=Array.isArray,YG=Object.prototype.hasOwnProperty,yD={current:null},qG={key:!0,ref:!0,__self:!0,__source:!0};function XG(t,r,o){var s,c={},d=null,f=null;if(r!=null)for(s in r.ref!==void 0&&(f=r.ref),r.key!==void 0&&(d=""+r.key),r)YG.call(r,s)&&!qG.hasOwnProperty(s)&&(c[s]=r[s]);var v=arguments.length-2;if(v===1)c.children=o;else if(1<v){for(var g=Array(v),_=0;_<v;_++)g[_]=arguments[_+2];c.children=g}if(t&&t.defaultProps)for(s in v=t.defaultProps,v)c[s]===void 0&&(c[s]=v[s]);return{$$typeof:jv,type:t,key:d,ref:f,props:c,_owner:yD.current}}function ige(t,r){return{$$typeof:jv,type:t.type,key:r,ref:t.ref,props:t.props,_owner:t._owner}}function CD(t){return typeof t=="object"&&t!==null&&t.$$typeof===jv}function oge(t){var r={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(o){return r[o]})}var OH=/\/+/g;function tO(t,r){return typeof t=="object"&&t!==null&&t.key!=null?oge(""+t.key):r.toString(36)}function qy(t,r,o,s,c){var d=typeof t;(d==="undefined"||d==="boolean")&&(t=null);var f=!1;if(t===null)f=!0;else switch(d){case"string":case"number":f=!0;break;case"object":switch(t.$$typeof){case jv:case K0e:f=!0}}if(f)return f=t,c=c(f),t=s===""?"."+tO(f,0):s,AH(c)?(o="",t!=null&&(o=t.replace(OH,"$&/")+"/"),qy(c,r,o,"",function(_){return _})):c!=null&&(CD(c)&&(c=ige(c,o+(!c.key||f&&f.key===c.key?"":(""+c.key).replace(OH,"$&/")+"/")+t)),r.push(c)),1;if(f=0,s=s===""?".":s+":",AH(t))for(var v=0;v<t.length;v++){d=t[v];var g=s+tO(d,v);f+=qy(d,r,o,g,c)}else if(g=rge(t),typeof g=="function")for(t=g.call(t),v=0;!(d=t.next()).done;)d=d.value,g=s+tO(d,v++),f+=qy(d,r,o,g,c);else if(d==="object")throw r=String(t),Error("Objects are not valid as a React child (found: "+(r==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":r)+"). If you meant to render a collection of children, use an array instead.");return f}function dy(t,r,o){if(t==null)return t;var s=[],c=0;return qy(t,s,"","",function(d){return r.call(o,d,c++)}),s}function age(t){if(t._status===-1){var r=t._result;r=r(),r.then(function(o){(t._status===0||t._status===-1)&&(t._status=1,t._result=o)},function(o){(t._status===0||t._status===-1)&&(t._status=2,t._result=o)}),t._status===-1&&(t._status=0,t._result=r)}if(t._status===1)return t._result.default;throw t._result}var Pa={current:null},Xy={transition:null},sge={ReactCurrentDispatcher:Pa,ReactCurrentBatchConfig:Xy,ReactCurrentOwner:yD};function JG(){throw Error("act(...) is not supported in production builds of React.")}dr.Children={map:dy,forEach:function(t,r,o){dy(t,function(){r.apply(this,arguments)},o)},count:function(t){var r=0;return dy(t,function(){r++}),r},toArray:function(t){return dy(t,function(r){return r})||[]},only:function(t){if(!CD(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};dr.Component=ym;dr.Fragment=Y0e;dr.Profiler=X0e;dr.PureComponent=_D;dr.StrictMode=q0e;dr.Suspense=ege;dr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sge;dr.act=JG;dr.cloneElement=function(t,r,o){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var s=WG({},t.props),c=t.key,d=t.ref,f=t._owner;if(r!=null){if(r.ref!==void 0&&(d=r.ref,f=yD.current),r.key!==void 0&&(c=""+r.key),t.type&&t.type.defaultProps)var v=t.type.defaultProps;for(g in r)YG.call(r,g)&&!qG.hasOwnProperty(g)&&(s[g]=r[g]===void 0&&v!==void 0?v[g]:r[g])}var g=arguments.length-2;if(g===1)s.children=o;else if(1<g){v=Array(g);for(var _=0;_<g;_++)v[_]=arguments[_+2];s.children=v}return{$$typeof:jv,type:t.type,key:c,ref:d,props:s,_owner:f}};dr.createContext=function(t){return t={$$typeof:Q0e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:J0e,_context:t},t.Consumer=t};dr.createElement=XG;dr.createFactory=function(t){var r=XG.bind(null,t);return r.type=t,r};dr.createRef=function(){return{current:null}};dr.forwardRef=function(t){return{$$typeof:Z0e,render:t}};dr.isValidElement=CD;dr.lazy=function(t){return{$$typeof:nge,_payload:{_status:-1,_result:t},_init:age}};dr.memo=function(t,r){return{$$typeof:tge,type:t,compare:r===void 0?null:r}};dr.startTransition=function(t){var r=Xy.transition;Xy.transition={};try{t()}finally{Xy.transition=r}};dr.unstable_act=JG;dr.useCallback=function(t,r){return Pa.current.useCallback(t,r)};dr.useContext=function(t){return Pa.current.useContext(t)};dr.useDebugValue=function(){};dr.useDeferredValue=function(t){return Pa.current.useDeferredValue(t)};dr.useEffect=function(t,r){return Pa.current.useEffect(t,r)};dr.useId=function(){return Pa.current.useId()};dr.useImperativeHandle=function(t,r,o){return Pa.current.useImperativeHandle(t,r,o)};dr.useInsertionEffect=function(t,r){return Pa.current.useInsertionEffect(t,r)};dr.useLayoutEffect=function(t,r){return Pa.current.useLayoutEffect(t,r)};dr.useMemo=function(t,r){return Pa.current.useMemo(t,r)};dr.useReducer=function(t,r,o){return Pa.current.useReducer(t,r,o)};dr.useRef=function(t){return Pa.current.useRef(t)};dr.useState=function(t){return Pa.current.useState(t)};dr.useSyncExternalStore=function(t,r,o){return Pa.current.useSyncExternalStore(t,r,o)};dr.useTransition=function(){return Pa.current.useTransition()};dr.version="18.3.1";HG.exports=dr;var y=HG.exports;const ze=Od(y),Fh=jG({__proto__:null,default:ze},[y]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cge=y,lge=Symbol.for("react.element"),uge=Symbol.for("react.fragment"),dge=Object.prototype.hasOwnProperty,hge=cge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,fge={key:!0,ref:!0,__self:!0,__source:!0};function QG(t,r,o){var s,c={},d=null,f=null;o!==void 0&&(d=""+o),r.key!==void 0&&(d=""+r.key),r.ref!==void 0&&(f=r.ref);for(s in r)dge.call(r,s)&&!fge.hasOwnProperty(s)&&(c[s]=r[s]);if(t&&t.defaultProps)for(s in r=t.defaultProps,r)c[s]===void 0&&(c[s]=r[s]);return{$$typeof:lge,type:t,key:d,ref:f,props:c,_owner:hge.current}}Cb.Fragment=uge;Cb.jsx=QG;Cb.jsxs=QG;$G.exports=Cb;var fe=$G.exports;var ZG={exports:{}};(function(t,r){(function(o,s){t.exports=s()})(On,function(){function o(e,n){return n.forEach(function(i){i&&typeof i!="string"&&!Array.isArray(i)&&Object.keys(i).forEach(function(a){if(a!=="default"&&!(a in e)){var l=Object.getOwnPropertyDescriptor(i,a);Object.defineProperty(e,a,l.get?l:{enumerable:!0,get:function(){return i[a]}})}})}),Object.freeze(e)}var s=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof On<"u"?On:typeof self<"u"?self:{};function c(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var d=function(e){try{return!!e()}catch{return!0}},f=!d(function(){var e=(function(){}).bind();return typeof e!="function"||e.hasOwnProperty("prototype")}),v=f,g=Function.prototype,_=g.call,C=v&&g.bind.bind(_,_),b=v?C:function(e){return function(){return _.apply(e,arguments)}},T=b({}.isPrototypeOf),A=function(e){return e&&e.Math===Math&&e},I=A(typeof globalThis=="object"&&globalThis)||A(typeof window=="object"&&window)||A(typeof self=="object"&&self)||A(typeof s=="object"&&s)||A(typeof s=="object"&&s)||function(){return this}()||Function("return this")(),N=f,P=Function.prototype,D=P.apply,x=P.call,L=typeof Reflect=="object"&&Reflect.apply||(N?x.bind(D):function(){return x.apply(D,arguments)}),M=b,F=M({}.toString),V=M("".slice),$=function(e){return V(F(e),8,-1)},z=$,K=b,G=function(e){if(z(e)==="Function")return K(e)},J=typeof document=="object"&&document.all,ne=J===void 0&&J!==void 0?function(e){return typeof e=="function"||e===J}:function(e){return typeof e=="function"},te={},ce=!d(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),ge=f,oe=Function.prototype.call,ae=ge?oe.bind(oe):function(){return oe.apply(oe,arguments)},ie={},ve={}.propertyIsEnumerable,me=Object.getOwnPropertyDescriptor,le=me&&!ve.call({1:2},1);ie.f=le?function(e){var n=me(this,e);return!!n&&n.enumerable}:ve;var de,Ee,se=function(e,n){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:n}},Te=d,we=$,Le=Object,Ie=b("".split),De=Te(function(){return!Le("z").propertyIsEnumerable(0)})?function(e){return we(e)==="String"?Ie(e,""):Le(e)}:Le,Ye=function(e){return e==null},Me=Ye,Oe=TypeError,$e=function(e){if(Me(e))throw new Oe("Can't call method on "+e);return e},tt=De,je=$e,ke=function(e){return tt(je(e))},dt=ne,Ze=function(e){return typeof e=="object"?e!==null:dt(e)},ut={},Tt=ut,pt=I,ht=ne,qe=function(e){return ht(e)?e:void 0},Je=function(e,n){return arguments.length<2?qe(Tt[e])||qe(pt[e]):Tt[e]&&Tt[e][n]||pt[e]&&pt[e][n]},Ct=I.navigator,Nt=Ct&&Ct.userAgent,Ot=Nt?String(Nt):"",on=I,Vt=Ot,kt=on.process,Kt=on.Deno,Zt=kt&&kt.versions||Kt&&Kt.version,Ft=Zt&&Zt.v8;Ft&&(Ee=(de=Ft.split("."))[0]>0&&de[0]<4?1:+(de[0]+de[1])),!Ee&&Vt&&(!(de=Vt.match(/Edge\/(\d+)/))||de[1]>=74)&&(de=Vt.match(/Chrome\/(\d+)/))&&(Ee=+de[1]);var _t=Ee,At=_t,mt=d,Pt=I.String,gn=!!Object.getOwnPropertySymbols&&!mt(function(){var e=Symbol("symbol detection");return!Pt(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&At&&At<41}),Mn=gn&&!Symbol.sham&&typeof Symbol.iterator=="symbol",pi=Je,Zr=ne,Si=T,Dr=Object,Gn=Mn?function(e){return typeof e=="symbol"}:function(e){var n=pi("Symbol");return Zr(n)&&Si(n.prototype,Dr(e))},Ir=String,vn=function(e){try{return Ir(e)}catch{return"Object"}},Qt=ne,Dt=vn,bt=TypeError,un=function(e){if(Qt(e))return e;throw new bt(Dt(e)+" is not a function")},Sn=un,ft=Ye,gt=function(e,n){var i=e[n];return ft(i)?void 0:Sn(i)},Wt=ae,Yt=ne,jt=Ze,dn=TypeError,ar={exports:{}},Xn=I,$n=Object.defineProperty,nr=I,Wr=function(e,n){try{$n(Xn,e,{value:n,configurable:!0,writable:!0})}catch{Xn[e]=n}return n},ai="__core-js_shared__",si=ar.exports=nr[ai]||Wr(ai,{});(si.versions||(si.versions=[])).push({version:"3.42.0",mode:"pure",copyright:"© 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.42.0/LICENSE",source:"https://github.com/zloirock/core-js"});var Vi=ar.exports,Fr=Vi,Lr=function(e,n){return Fr[e]||(Fr[e]=n||{})},St=$e,Gt=Object,cn=function(e){return Gt(St(e))},Ln=cn,ur=b({}.hasOwnProperty),Jn=Object.hasOwn||function(e,n){return ur(Ln(e),n)},ji=b,ka=0,an=Math.random(),Pn=ji(1 .toString),Hn=function(e){return"Symbol("+(e===void 0?"":e)+")_"+Pn(++ka+an,36)},yi=Lr,Ho=Jn,rl=Hn,xo=gn,zo=Mn,Wo=I.Symbol,Ma=yi("wks"),oa=zo?Wo.for||Wo:Wo&&Wo.withoutSetter||rl,hr=function(e){return Ho(Ma,e)||(Ma[e]=xo&&Ho(Wo,e)?Wo[e]:oa("Symbol."+e)),Ma[e]},Ar=ae,qt=Ze,Ut=Gn,yr=gt,Cr=function(e,n){var i,a;if(n==="string"&&Yt(i=e.toString)&&!jt(a=Wt(i,e))||Yt(i=e.valueOf)&&!jt(a=Wt(i,e))||n!=="string"&&Yt(i=e.toString)&&!jt(a=Wt(i,e)))return a;throw new dn("Can't convert object to primitive value")},$r=TypeError,ci=hr("toPrimitive"),Go=function(e,n){if(!qt(e)||Ut(e))return e;var i,a=yr(e,ci);if(a){if(n===void 0&&(n="default"),i=Ar(a,e,n),!qt(i)||Ut(i))return i;throw new $r("Can't convert object to primitive value")}return n===void 0&&(n="number"),Cr(e,n)},go=Gn,vo=function(e){var n=Go(e,"string");return go(n)?n:n+""},Eo=Ze,_o=I.document,Fa=Eo(_o)&&Eo(_o.createElement),So=function(e){return Fa?_o.createElement(e):{}},Vm=So,jm=!ce&&!d(function(){return Object.defineProperty(Vm("div"),"a",{get:function(){return 7}}).a!==7}),hE=ce,Ko=ae,Cu=ie,bu=se,il=ke,Tu=vo,sf=Jn,cf=jm,lf=Object.getOwnPropertyDescriptor;te.f=hE?lf:function(e,n){if(e=il(e),n=Tu(n),cf)try{return lf(e,n)}catch{}if(sf(e,n))return bu(!Ko(Cu.f,e,n),e[n])};var tn=d,In=ne,mi=/#|\.prototype\./,li=function(e,n){var i=uf[gi(e)];return i===fE||i!==$m&&(In(n)?tn(n):!!n)},gi=li.normalize=function(e){return String(e).replace(mi,".").toLowerCase()},uf=li.data={},$m=li.NATIVE="N",fE=li.POLYFILL="P",Md=li,fee=un,pee=f,mee=G(G.bind),Ru=function(e,n){return fee(e),n===void 0?e:pee?mee(e,n):function(){return e.apply(n,arguments)}},Ls={},jL=ce&&d(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),gee=Ze,vee=String,Eee=TypeError,Ca=function(e){if(gee(e))return e;throw new Eee(vee(e)+" is not an object")},_ee=ce,See=jm,yee=jL,pE=Ca,$L=vo,Cee=TypeError,XT=Object.defineProperty,bee=Object.getOwnPropertyDescriptor,JT="enumerable",QT="configurable",ZT="writable";Ls.f=_ee?yee?function(e,n,i){if(pE(e),n=$L(n),pE(i),typeof e=="function"&&n==="prototype"&&"value"in i&&ZT in i&&!i[ZT]){var a=bee(e,n);a&&a[ZT]&&(e[n]=i.value,i={configurable:QT in i?i[QT]:a[QT],enumerable:JT in i?i[JT]:a[JT],writable:!1})}return XT(e,n,i)}:XT:function(e,n,i){if(pE(e),n=$L(n),pE(i),See)try{return XT(e,n,i)}catch{}if("get"in i||"set"in i)throw new Cee("Accessors not supported");return"value"in i&&(e[n]=i.value),e};var Tee=Ls,Ree=se,Fd=ce?function(e,n,i){return Tee.f(e,n,Ree(1,i))}:function(e,n,i){return e[n]=i,e},Hm=I,wee=L,Iee=G,Aee=ne,Oee=te.f,xee=Md,df=ut,Nee=Ru,hf=Fd,HL=Jn,Pee=function(e){var n=function(i,a,l){if(this instanceof n){switch(arguments.length){case 0:return new e;case 1:return new e(i);case 2:return new e(i,a)}return new e(i,a,l)}return wee(e,this,arguments)};return n.prototype=e.prototype,n},Vn=function(e,n){var i,a,l,u,h,p,m,E,S,R=e.target,w=e.global,O=e.stat,H=e.proto,B=w?Hm:O?Hm[R]:Hm[R]&&Hm[R].prototype,j=w?df:df[R]||hf(df,R,{})[R],q=j.prototype;for(u in n)a=!(i=xee(w?u:R+(O?".":"#")+u,e.forced))&&B&&HL(B,u),p=j[u],a&&(m=e.dontCallGetSet?(S=Oee(B,u))&&S.value:B[u]),h=a&&m?m:n[u],(i||H||typeof p!=typeof h)&&(E=e.bind&&a?Nee(h,Hm):e.wrap&&a?Pee(h):H&&Aee(h)?Iee(h):h,(e.sham||h&&h.sham||p&&p.sham)&&hf(E,"sham",!0),hf(j,u,E),H&&(HL(df,l=R+"Prototype")||hf(df,l,{}),hf(df[l],u,h),e.real&&q&&(i||!q[u])&&hf(q,u,h)))},Dee=Math.ceil,Lee=Math.floor,kee=Math.trunc||function(e){var n=+e;return(n>0?Lee:Dee)(n)},Mee=kee,e1=function(e){var n=+e;return n!=n||n===0?0:Mee(n)},Fee=e1,Uee=Math.max,Bee=Math.min,t1=function(e,n){var i=Fee(e);return i<0?Uee(i+n,0):Bee(i,n)},Vee=e1,jee=Math.min,zL=function(e){var n=Vee(e);return n>0?jee(n,9007199254740991):0},$ee=zL,wu=function(e){return $ee(e.length)},Hee=ke,zee=t1,Wee=wu,WL=function(e){return function(n,i,a){var l=Hee(n),u=Wee(l);if(u===0)return!e&&-1;var h,p=zee(a,u);if(e&&i!=i){for(;u>p;)if((h=l[p++])!=h)return!0}else for(;u>p;p++)if((e||p in l)&&l[p]===i)return e||p||0;return!e&&-1}},n1={includes:WL(!0),indexOf:WL(!1)},Gee=n1.includes;Vn({target:"Array",proto:!0,forced:d(function(){return!Array(1).includes()})},{includes:function(e){return Gee(this,e,arguments.length>1?arguments[1]:void 0)}});var Kee=I,Yee=ut,ks=function(e,n){var i=Yee[e+"Prototype"],a=i&&i[n];if(a)return a;var l=Kee[e],u=l&&l.prototype;return u&&u[n]},qee=ks("Array","includes"),Xee=Ze,Jee=$,Qee=hr("match"),GL=function(e){var n;return Xee(e)&&((n=e[Qee])!==void 0?!!n:Jee(e)==="RegExp")},Zee=GL,ete=TypeError,KL={};KL[hr("toStringTag")]="z";var r1=String(KL)==="[object z]",tte=r1,nte=ne,mE=$,rte=hr("toStringTag"),ite=Object,ote=mE(function(){return arguments}())==="Arguments",Iu=tte?mE:function(e){var n,i,a;return e===void 0?"Undefined":e===null?"Null":typeof(i=function(l,u){try{return l[u]}catch{}}(n=ite(e),rte))=="string"?i:ote?mE(n):(a=mE(n))==="Object"&&nte(n.callee)?"Arguments":a},ate=Iu,ste=String,Ua=function(e){if(ate(e)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return ste(e)},cte=hr("match"),lte=Vn,ute=function(e){if(Zee(e))throw new ete("The method doesn't accept regular expressions");return e},dte=$e,YL=Ua,hte=function(e){var n=/./;try{"/./"[e](n)}catch{try{return n[cte]=!1,"/./"[e](n)}catch{}}return!1},fte=b("".indexOf);lte({target:"String",proto:!0,forced:!hte("includes")},{includes:function(e){return!!~fte(YL(dte(this)),YL(ute(e)),arguments.length>1?arguments[1]:void 0)}});var pte=ks("String","includes"),qL=T,mte=qee,gte=pte,i1=Array.prototype,o1=String.prototype,vte=function(e){var n=e.includes;return e===i1||qL(i1,e)&&n===i1.includes?mte:typeof e=="string"||e===o1||qL(o1,e)&&n===o1.includes?gte:n},Ge=c(vte),Ete=un,_te=cn,Ste=De,yte=wu,XL=TypeError,JL="Reduce of empty array with no initial value",QL=function(e){return function(n,i,a,l){var u=_te(n),h=Ste(u),p=yte(u);if(Ete(i),p===0&&a<2)throw new XL(JL);var m=e?p-1:0,E=e?-1:1;if(a<2)for(;;){if(m in h){l=h[m],m+=E;break}if(m+=E,e?m<0:p<=m)throw new XL(JL)}for(;e?m>=0:p>m;m+=E)m in h&&(l=i(l,h[m],m,u));return l}},Cte={left:QL(!1),right:QL(!0)},bte=d,gE=function(e,n){var i=[][e];return!!i&&bte(function(){i.call(null,n||function(){return 1},1)})},zm=I,Tte=Ot,Rte=$,vE=function(e){return Tte.slice(0,e.length)===e},a1=vE("Bun/")?"BUN":vE("Cloudflare-Workers")?"CLOUDFLARE":vE("Deno/")?"DENO":vE("Node.js/")?"NODE":zm.Bun&&typeof Bun.version=="string"?"BUN":zm.Deno&&typeof Deno.version=="object"?"DENO":Rte(zm.process)==="process"?"NODE":zm.window&&zm.document?"BROWSER":"REST",EE=a1==="NODE",wte=Cte.left;Vn({target:"Array",proto:!0,forced:!EE&&_t>79&&_t<83||!gE("reduce")},{reduce:function(e){var n=arguments.length;return wte(this,e,n,n>1?arguments[1]:void 0)}});var Ite=ks("Array","reduce"),Ate=T,Ote=Ite,s1=Array.prototype,xte=function(e){var n=e.reduce;return e===s1||Ate(s1,e)&&n===s1.reduce?Ote:n},ZL=xte,Ms=c(ZL),Nte=$,Wm=Array.isArray||function(e){return Nte(e)==="Array"},Pte=Vn,Dte=Wm,Lte=b([].reverse),ek=[1,2];Pte({target:"Array",proto:!0,forced:String(ek)===String(ek.reverse())},{reverse:function(){return Dte(this)&&(this.length=this.length),Lte(this)}});var kte=ks("Array","reverse"),Mte=T,Fte=kte,c1=Array.prototype,Ute=function(e){var n=e.reverse;return e===c1||Mte(c1,e)&&n===c1.reverse?Fte:n},tk=Ute,nk=c(tk),Bte=Hn,rk=Lr("keys"),_E=function(e){return rk[e]||(rk[e]=Bte(e))},Vte=!d(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),jte=Jn,$te=ne,Hte=cn,zte=Vte,ik=_E("IE_PROTO"),l1=Object,Wte=l1.prototype,u1=zte?l1.getPrototypeOf:function(e){var n=Hte(e);if(jte(n,ik))return n[ik];var i=n.constructor;return $te(i)&&n instanceof i?i.prototype:n instanceof l1?Wte:null},Gte=b,Kte=un,Yte=Ze,qte=function(e){return Yte(e)||e===null},Xte=String,Jte=TypeError,Qte=function(e,n,i){try{return Gte(Kte(Object.getOwnPropertyDescriptor(e,n)[i]))}catch{}},Zte=Ze,ene=$e,tne=function(e){if(qte(e))return e;throw new Jte("Can't set "+Xte(e)+" as a prototype")},nne=Object.setPrototypeOf||("__proto__"in{}?function(){var e,n=!1,i={};try{(e=Qte(Object.prototype,"__proto__","set"))(i,[]),n=i instanceof Array}catch{}return function(a,l){return ene(a),tne(l),Zte(a)&&(n?e(a,l):a.__proto__=l),a}}():void 0),SE={},yE={},d1=Jn,rne=ke,ine=n1.indexOf,one=yE,ok=b([].push),ak=function(e,n){var i,a=rne(e),l=0,u=[];for(i in a)!d1(one,i)&&d1(a,i)&&ok(u,i);for(;n.length>l;)d1(a,i=n[l++])&&(~ine(u,i)||ok(u,i));return u},h1=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],ane=ak,sne=h1.concat("length","prototype");SE.f=Object.getOwnPropertyNames||function(e){return ane(e,sne)};var Gm={};Gm.f=Object.getOwnPropertySymbols;var cne=Je,lne=SE,une=Gm,dne=Ca,hne=b([].concat),fne=cne("Reflect","ownKeys")||function(e){var n=lne.f(dne(e)),i=une.f;return i?hne(n,i(e)):n},sk=Jn,pne=fne,mne=te,gne=Ls,f1={},vne=ak,Ene=h1,CE=Object.keys||function(e){return vne(e,Ene)},_ne=ce,Sne=jL,yne=Ls,Cne=Ca,bne=ke,Tne=CE;f1.f=_ne&&!Sne?Object.defineProperties:function(e,n){Cne(e);for(var i,a=bne(n),l=Tne(n),u=l.length,h=0;u>h;)yne.f(e,i=l[h++],a[i]);return e};var bE,ck=Je("document","documentElement"),Rne=Ca,wne=f1,lk=h1,Ine=yE,Ane=ck,One=So,p1="prototype",m1="script",uk=_E("IE_PROTO"),g1=function(){},dk=function(e){return"<"+m1+">"+e+"</"+m1+">"},hk=function(e){e.write(dk("")),e.close();var n=e.parentWindow.Object;return e=null,n},TE=function(){try{bE=new ActiveXObject("htmlfile")}catch{}var e,n,i;TE=typeof document<"u"?document.domain&&bE?hk(bE):(n=One("iframe"),i="java"+m1+":",n.style.display="none",Ane.appendChild(n),n.src=String(i),(e=n.contentWindow.document).open(),e.write(dk("document.F=Object")),e.close(),e.F):hk(bE);for(var a=lk.length;a--;)delete TE[p1][lk[a]];return TE()};Ine[uk]=!0;var Km=Object.create||function(e,n){var i;return e!==null?(g1[p1]=Rne(e),i=new g1,g1[p1]=null,i[uk]=e):i=TE(),n===void 0?i:wne.f(i,n)},xne=Ze,Nne=Fd,fk=Error,Pne=b("".replace),Dne=String(new fk("zxcasd").stack),pk=/\n\s*at [^:]*:[^\n]*/,Lne=pk.test(Dne),kne=se,Mne=!d(function(){var e=new Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",kne(1,7)),e.stack!==7)}),Fne=Fd,Une=function(e,n){if(Lne&&typeof e=="string"&&!fk.prepareStackTrace)for(;n--;)e=Pne(e,pk,"");return e},Bne=Mne,mk=Error.captureStackTrace,ff={},Vne=ff,jne=hr("iterator"),$ne=Array.prototype,gk=function(e){return e!==void 0&&(Vne.Array===e||$ne[jne]===e)},Hne=Iu,vk=gt,zne=Ye,Wne=ff,Gne=hr("iterator"),RE=function(e){if(!zne(e))return vk(e,Gne)||vk(e,"@@iterator")||Wne[Hne(e)]},Kne=ae,Yne=un,qne=Ca,Xne=vn,Jne=RE,Qne=TypeError,v1=function(e,n){var i=arguments.length<2?Jne(e):n;if(Yne(i))return qne(Kne(i,e));throw new Qne(Xne(e)+" is not iterable")},Zne=ae,Ek=Ca,ere=gt,_k=function(e,n,i){var a,l;Ek(e);try{if(!(a=ere(e,"return"))){if(n==="throw")throw i;return i}a=Zne(a,e)}catch(u){l=!0,a=u}if(n==="throw")throw i;if(l)throw a;return Ek(a),i},tre=Ru,nre=ae,rre=Ca,ire=vn,ore=gk,are=wu,Sk=T,sre=v1,cre=RE,yk=_k,lre=TypeError,wE=function(e,n){this.stopped=e,this.result=n},Ck=wE.prototype,Ym=function(e,n,i){var a,l,u,h,p,m,E,S=i&&i.that,R=!(!i||!i.AS_ENTRIES),w=!(!i||!i.IS_RECORD),O=!(!i||!i.IS_ITERATOR),H=!(!i||!i.INTERRUPTED),B=tre(n,S),j=function(Y){return a&&yk(a,"normal",Y),new wE(!0,Y)},q=function(Y){return R?(rre(Y),H?B(Y[0],Y[1],j):B(Y[0],Y[1])):H?B(Y,j):B(Y)};if(w)a=e.iterator;else if(O)a=e;else{if(!(l=cre(e)))throw new lre(ire(e)+" is not iterable");if(ore(l)){for(u=0,h=are(e);h>u;u++)if((p=q(e[u]))&&Sk(Ck,p))return p;return new wE(!1)}a=sre(e,l)}for(m=w?e.next:a.next;!(E=nre(m,a)).done;){try{p=q(E.value)}catch(Y){yk(a,"throw",Y)}if(typeof p=="object"&&p&&Sk(Ck,p))return p}return new wE(!1)},ure=Ua,dre=Vn,hre=T,fre=u1,IE=nne,pre=function(e,n,i){for(var a=pne(n),l=gne.f,u=mne.f,h=0;h<a.length;h++){var p=a[h];sk(e,p)||i&&sk(i,p)||l(e,p,u(n,p))}},bk=Km,E1=Fd,_1=se,mre=function(e,n){xne(n)&&"cause"in n&&Nne(e,"cause",n.cause)},gre=function(e,n,i,a){Bne&&(mk?mk(e,n):Fne(e,"stack",Une(i,a)))},vre=Ym,Ere=function(e,n){return e===void 0?arguments.length<2?"":n:ure(e)},_re=hr("toStringTag"),AE=Error,Sre=[].push,pf=function(e,n){var i,a=hre(S1,this);IE?i=IE(new AE,a?fre(this):S1):(i=a?this:bk(S1),E1(i,_re,"Error")),n!==void 0&&E1(i,"message",Ere(n)),gre(i,pf,i.stack,1),arguments.length>2&&mre(i,arguments[2]);var l=[];return vre(e,Sre,{that:l}),E1(i,"errors",l),i};IE?IE(pf,AE):pre(pf,AE,{name:!0});var S1=pf.prototype=bk(AE.prototype,{constructor:_1(1,pf),message:_1(1,""),name:_1(1,"AggregateError")});dre({global:!0,constructor:!0,arity:2},{AggregateError:pf});var OE,qm,xE,yre=ne,Tk=I.WeakMap,Cre=yre(Tk)&&/native code/.test(String(Tk)),Rk=I,bre=Ze,Tre=Fd,y1=Jn,C1=Vi,Rre=_E,wre=yE,wk="Object already initialized",b1=Rk.TypeError,Ire=Rk.WeakMap;if(Cre||C1.state){var ol=C1.state||(C1.state=new Ire);ol.get=ol.get,ol.has=ol.has,ol.set=ol.set,OE=function(e,n){if(ol.has(e))throw new b1(wk);return n.facade=e,ol.set(e,n),n},qm=function(e){return ol.get(e)||{}},xE=function(e){return ol.has(e)}}else{var mf=Rre("state");wre[mf]=!0,OE=function(e,n){if(y1(e,mf))throw new b1(wk);return n.facade=e,Tre(e,mf,n),n},qm=function(e){return y1(e,mf)?e[mf]:{}},xE=function(e){return y1(e,mf)}}var Ud,Ik,Ak,Bd={set:OE,get:qm,has:xE,enforce:function(e){return xE(e)?qm(e):OE(e,{})},getterFor:function(e){return function(n){var i;if(!bre(n)||(i=qm(n)).type!==e)throw new b1("Incompatible receiver, "+e+" required");return i}}},T1=ce,Are=Jn,Ok=Function.prototype,Ore=T1&&Object.getOwnPropertyDescriptor,R1=Are(Ok,"name"),xk={EXISTS:R1,PROPER:R1&&(function(){}).name==="something",CONFIGURABLE:R1&&(!T1||T1&&Ore(Ok,"name").configurable)},xre=Fd,Au=function(e,n,i,a){return a&&a.enumerable?e[n]=i:xre(e,n,i),e},Nre=d,Pre=ne,Dre=Ze,Lre=Km,Nk=u1,kre=Au,w1=hr("iterator"),Pk=!1;[].keys&&("next"in(Ak=[].keys())?(Ik=Nk(Nk(Ak)))!==Object.prototype&&(Ud=Ik):Pk=!0);var Mre=!Dre(Ud)||Nre(function(){var e={};return Ud[w1].call(e)!==e});Pre((Ud=Mre?{}:Lre(Ud))[w1])||kre(Ud,w1,function(){return this});var Dk={IteratorPrototype:Ud,BUGGY_SAFARI_ITERATORS:Pk},Fre=Iu,Ure=r1?{}.toString:function(){return"[object "+Fre(this)+"]"},Bre=r1,Vre=Ls.f,jre=Fd,$re=Jn,Hre=Ure,Lk=hr("toStringTag"),jl=function(e,n,i,a){var l=i?e:e&&e.prototype;l&&($re(l,Lk)||Vre(l,Lk,{configurable:!0,value:n}),a&&!Bre&&jre(l,"toString",Hre))},zre=Dk.IteratorPrototype,Wre=Km,Gre=se,Kre=jl,Yre=ff,qre=function(){return this},I1=function(e,n,i,a){var l=n+" Iterator";return e.prototype=Wre(zre,{next:Gre(+!a,i)}),Kre(e,l,!1,!0),Yre[l]=qre,e},Xre=Vn,Jre=ae,Qre=xk,Zre=I1,eie=u1,tie=jl,kk=Au,Mk=ff,nie=Dk,rie=Qre.PROPER,NE=nie.BUGGY_SAFARI_ITERATORS,A1=hr("iterator"),Fk="keys",PE="values",Uk="entries",iie=function(){return this},Bk=function(e,n,i,a,l,u,h){Zre(i,n,a);var p,m,E,S=function(q){if(q===l&&B)return B;if(!NE&&q&&q in O)return O[q];switch(q){case Fk:case PE:case Uk:return function(){return new i(this,q)}}return function(){return new i(this)}},R=n+" Iterator",w=!1,O=e.prototype,H=O[A1]||O["@@iterator"]||l&&O[l],B=!NE&&H||S(l),j=n==="Array"&&O.entries||H;if(j&&(p=eie(j.call(new e)))!==Object.prototype&&p.next&&(tie(p,R,!0,!0),Mk[R]=iie),rie&&l===PE&&H&&H.name!==PE&&(w=!0,B=function(){return Jre(H,this)}),l)if(m={values:S(PE),keys:u?B:S(Fk),entries:S(Uk)},h)for(E in m)(NE||w||!(E in O))&&kk(O,E,m[E]);else Xre({target:n,proto:!0,forced:NE||w},m);return h&&O[A1]!==B&&kk(O,A1,B,{name:l}),Mk[n]=B,m},DE=function(e,n){return{value:e,done:n}},oie=ke,Vk=ff,jk=Bd;Ls.f;var aie=Bk,LE=DE,$k="Array Iterator",sie=jk.set,cie=jk.getterFor($k);aie(Array,"Array",function(e,n){sie(this,{type:$k,target:oie(e),index:0,kind:n})},function(){var e=cie(this),n=e.target,i=e.index++;if(!n||i>=n.length)return e.target=null,LE(void 0,!0);switch(e.kind){case"keys":return LE(i,!1);case"values":return LE(n[i],!1)}return LE([i,n[i]],!1)},"values"),Vk.Arguments=Vk.Array;var lie=Ls,kE=function(e,n,i){return lie.f(e,n,i)},uie=Je,die=kE,hie=ce,Hk=hr("species"),fie=T,pie=TypeError,O1=function(e,n){if(fie(n,e))return e;throw new pie("Incorrect invocation")},mie=ne,x1=Vi,gie=b(Function.toString);mie(x1.inspectSource)||(x1.inspectSource=function(e){return gie(e)});var zk=x1.inspectSource,vie=b,Eie=d,Wk=ne,_ie=Iu,Sie=zk,Gk=function(){},Kk=Je("Reflect","construct"),N1=/^\s*(?:class|function)\b/,yie=vie(N1.exec),Cie=!N1.test(Gk),Xm=function(e){if(!Wk(e))return!1;try{return Kk(Gk,[],e),!0}catch{return!1}},Yk=function(e){if(!Wk(e))return!1;switch(_ie(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Cie||!!yie(N1,Sie(e))}catch{return!0}};Yk.sham=!0;var Jm,gf,qk,P1,ME=!Kk||Eie(function(){var e;return Xm(Xm.call)||!Xm(Object)||!Xm(function(){e=!0})||e})?Yk:Xm,bie=ME,Tie=vn,Rie=TypeError,Xk=Ca,wie=function(e){if(bie(e))return e;throw new Rie(Tie(e)+" is not a constructor")},Iie=Ye,Aie=hr("species"),D1=function(e,n){var i,a=Xk(e).constructor;return a===void 0||Iie(i=Xk(a)[Aie])?n:wie(i)},Ou=b([].slice),Oie=TypeError,Vd=function(e,n){if(e<n)throw new Oie("Not enough arguments");return e},Jk=/(?:ipad|iphone|ipod).*applewebkit/i.test(Ot),as=I,xie=L,Nie=Ru,Qk=ne,Pie=Jn,Zk=d,eM=ck,Die=Ou,tM=So,Lie=Vd,kie=Jk,Mie=EE,L1=as.setImmediate,k1=as.clearImmediate,Fie=as.process,M1=as.Dispatch,Uie=as.Function,nM=as.MessageChannel,Bie=as.String,F1=0,Qm={},rM="onreadystatechange";Zk(function(){Jm=as.location});var U1=function(e){if(Pie(Qm,e)){var n=Qm[e];delete Qm[e],n()}},B1=function(e){return function(){U1(e)}},iM=function(e){U1(e.data)},oM=function(e){as.postMessage(Bie(e),Jm.protocol+"//"+Jm.host)};L1&&k1||(L1=function(e){Lie(arguments.length,1);var n=Qk(e)?e:Uie(e),i=Die(arguments,1);return Qm[++F1]=function(){xie(n,void 0,i)},gf(F1),F1},k1=function(e){delete Qm[e]},Mie?gf=function(e){Fie.nextTick(B1(e))}:M1&&M1.now?gf=function(e){M1.now(B1(e))}:nM&&!kie?(P1=(qk=new nM).port2,qk.port1.onmessage=iM,gf=Nie(P1.postMessage,P1)):as.addEventListener&&Qk(as.postMessage)&&!as.importScripts&&Jm&&Jm.protocol!=="file:"&&!Zk(oM)?(gf=oM,as.addEventListener("message",iM,!1)):gf=rM in tM("script")?function(e){eM.appendChild(tM("script"))[rM]=function(){eM.removeChild(this),U1(e)}}:function(e){setTimeout(B1(e),0)});var FE={set:L1,clear:k1},aM=I,Vie=ce,jie=Object.getOwnPropertyDescriptor,sM=function(e){if(!Vie)return aM[e];var n=jie(aM,e);return n&&n.value},cM=function(){this.head=null,this.tail=null};cM.prototype={add:function(e){var n={item:e,next:null},i=this.tail;i?i.next=n:this.head=n,this.tail=n},get:function(){var e=this.head;if(e)return(this.head=e.next)===null&&(this.tail=null),e.item}};var vf,V1,j1,$1,lM,uM=cM,$ie=/ipad|iphone|ipod/i.test(Ot)&&typeof Pebble<"u",Hie=/web0s(?!.*chrome)/i.test(Ot),Ef=I,zie=sM,dM=Ru,H1=FE.set,Wie=uM,Gie=Jk,Kie=$ie,Yie=Hie,z1=EE,hM=Ef.MutationObserver||Ef.WebKitMutationObserver,fM=Ef.document,pM=Ef.process,UE=Ef.Promise,W1=zie("queueMicrotask");if(!W1){var BE=new Wie,VE=function(){var e,n;for(z1&&(e=pM.domain)&&e.exit();n=BE.get();)try{n()}catch(i){throw BE.head&&vf(),i}e&&e.enter()};Gie||z1||Yie||!hM||!fM?!Kie&&UE&&UE.resolve?(($1=UE.resolve(void 0)).constructor=UE,lM=dM($1.then,$1),vf=function(){lM(VE)}):z1?vf=function(){pM.nextTick(VE)}:(H1=dM(H1,Ef),vf=function(){H1(VE)}):(V1=!0,j1=fM.createTextNode(""),new hM(VE).observe(j1,{characterData:!0}),vf=function(){j1.data=V1=!V1}),W1=function(e){BE.head||vf(),BE.add(e)}}var mM=W1,_f=function(e){try{return{error:!1,value:e()}}catch(n){return{error:!0,value:n}}},jd=I.Promise,qie=I,Zm=jd,Xie=ne,Jie=Md,Qie=zk,Zie=hr,gM=a1,G1=_t,vM=Zm&&Zm.prototype,eoe=Zie("species"),EM=!1,_M=Xie(qie.PromiseRejectionEvent),toe=Jie("Promise",function(){var e=Qie(Zm),n=e!==String(Zm);if(!n&&G1===66||!vM.catch||!vM.finally)return!0;if(!G1||G1<51||!/native code/.test(e)){var i=new Zm(function(l){l(1)}),a=function(l){l(function(){},function(){})};if((i.constructor={})[eoe]=a,!(EM=i.then(function(){})instanceof a))return!0}return!(n||gM!=="BROWSER"&&gM!=="DENO"||_M)}),e0={CONSTRUCTOR:toe,REJECTION_EVENT:_M,SUBCLASSING:EM},al={},SM=un,noe=TypeError,roe=function(e){var n,i;this.promise=new e(function(a,l){if(n!==void 0||i!==void 0)throw new noe("Bad Promise constructor");n=a,i=l}),this.resolve=SM(n),this.reject=SM(i)};al.f=function(e){return new roe(e)};var K1,yM,ioe=Vn,jE=EE,xu=I,t0=ae,ooe=Au,aoe=jl,soe=function(e){var n=uie(e);hie&&n&&!n[Hk]&&die(n,Hk,{configurable:!0,get:function(){return this}})},coe=un,Y1=ne,loe=Ze,uoe=O1,doe=D1,CM=FE.set,q1=mM,hoe=function(e,n){try{arguments.length===1?console.error(e):console.error(e,n)}catch{}},foe=_f,poe=uM,bM=Bd,X1=jd,TM=e0,RM=al,$E="Promise",wM=TM.CONSTRUCTOR,moe=TM.REJECTION_EVENT,J1=bM.getterFor($E),goe=bM.set,voe=X1&&X1.prototype,n0=X1,Q1=voe,IM=xu.TypeError,Z1=xu.document,eR=xu.process,tR=RM.f,Eoe=tR,_oe=!!(Z1&&Z1.createEvent&&xu.dispatchEvent),AM="unhandledrejection",OM=function(e){var n;return!(!loe(e)||!Y1(n=e.then))&&n},xM=function(e,n){var i,a,l,u=n.value,h=n.state===1,p=h?e.ok:e.fail,m=e.resolve,E=e.reject,S=e.domain;try{p?(h||(n.rejection===2&&yoe(n),n.rejection=1),p===!0?i=u:(S&&S.enter(),i=p(u),S&&(S.exit(),l=!0)),i===e.promise?E(new IM("Promise-chain cycle")):(a=OM(i))?t0(a,i,m,E):m(i)):E(u)}catch(R){S&&!l&&S.exit(),E(R)}},NM=function(e,n){e.notified||(e.notified=!0,q1(function(){for(var i,a=e.reactions;i=a.get();)xM(i,e);e.notified=!1,n&&!e.rejection&&Soe(e)}))},PM=function(e,n,i){var a,l;_oe?((a=Z1.createEvent("Event")).promise=n,a.reason=i,a.initEvent(e,!1,!0),xu.dispatchEvent(a)):a={promise:n,reason:i},!moe&&(l=xu["on"+e])?l(a):e===AM&&hoe("Unhandled promise rejection",i)},Soe=function(e){t0(CM,xu,function(){var n,i=e.facade,a=e.value;if(DM(e)&&(n=foe(function(){jE?eR.emit("unhandledRejection",a,i):PM(AM,i,a)}),e.rejection=jE||DM(e)?2:1,n.error))throw n.value})},DM=function(e){return e.rejection!==1&&!e.parent},yoe=function(e){t0(CM,xu,function(){var n=e.facade;jE?eR.emit("rejectionHandled",n):PM("rejectionhandled",n,e.value)})},Sf=function(e,n,i){return function(a){e(n,a,i)}},yf=function(e,n,i){e.done||(e.done=!0,i&&(e=i),e.value=n,e.state=2,NM(e,!0))},nR=function(e,n,i){if(!e.done){e.done=!0,i&&(e=i);try{if(e.facade===n)throw new IM("Promise can't be resolved itself");var a=OM(n);a?q1(function(){var l={done:!1};try{t0(a,n,Sf(nR,l,e),Sf(yf,l,e))}catch(u){yf(l,u,e)}}):(e.value=n,e.state=1,NM(e,!1))}catch(l){yf({done:!1},l,e)}}};wM&&(Q1=(n0=function(e){uoe(this,Q1),coe(e),t0(K1,this);var n=J1(this);try{e(Sf(nR,n),Sf(yf,n))}catch(i){yf(n,i)}}).prototype,(K1=function(e){goe(this,{type:$E,done:!1,notified:!1,parent:!1,reactions:new poe,rejection:!1,state:0,value:null})}).prototype=ooe(Q1,"then",function(e,n){var i=J1(this),a=tR(doe(this,n0));return i.parent=!0,a.ok=!Y1(e)||e,a.fail=Y1(n)&&n,a.domain=jE?eR.domain:void 0,i.state===0?i.reactions.add(a):q1(function(){xM(a,i)}),a.promise}),yM=function(){var e=new K1,n=J1(e);this.promise=e,this.resolve=Sf(nR,n),this.reject=Sf(yf,n)},RM.f=tR=function(e){return e===n0||e===void 0?new yM(e):Eoe(e)}),ioe({global:!0,constructor:!0,wrap:!0,forced:wM},{Promise:n0}),aoe(n0,$E,!1,!0),soe($E);var LM=hr("iterator"),kM=!1;try{var Coe=0,MM={next:function(){return{done:!!Coe++}},return:function(){kM=!0}};MM[LM]=function(){return this},Array.from(MM,function(){throw 2})}catch{}var boe=jd,Toe=function(e,n){try{if(!n&&!kM)return!1}catch{return!1}var i=!1;try{var a={};a[LM]=function(){return{next:function(){return{done:i=!0}}}},e(a)}catch{}return i},HE=e0.CONSTRUCTOR||!Toe(function(e){boe.all(e).then(void 0,function(){})}),Roe=ae,woe=un,Ioe=al,Aoe=_f,Ooe=Ym;Vn({target:"Promise",stat:!0,forced:HE},{all:function(e){var n=this,i=Ioe.f(n),a=i.resolve,l=i.reject,u=Aoe(function(){var h=woe(n.resolve),p=[],m=0,E=1;Ooe(e,function(S){var R=m++,w=!1;E++,Roe(h,n,S).then(function(O){w||(w=!0,p[R]=O,--E||a(p))},l)}),--E||a(p)});return u.error&&l(u.value),i.promise}});var xoe=Vn,Noe=e0.CONSTRUCTOR;jd&&jd.prototype,xoe({target:"Promise",proto:!0,forced:Noe,real:!0},{catch:function(e){return this.then(void 0,e)}});var Poe=ae,Doe=un,Loe=al,koe=_f,Moe=Ym;Vn({target:"Promise",stat:!0,forced:HE},{race:function(e){var n=this,i=Loe.f(n),a=i.reject,l=koe(function(){var u=Doe(n.resolve);Moe(e,function(h){Poe(u,n,h).then(i.resolve,a)})});return l.error&&a(l.value),i.promise}});var Foe=al;Vn({target:"Promise",stat:!0,forced:e0.CONSTRUCTOR},{reject:function(e){var n=Foe.f(this);return(0,n.reject)(e),n.promise}});var Uoe=Ca,Boe=Ze,Voe=al,FM=function(e,n){if(Uoe(e),Boe(n)&&n.constructor===e)return n;var i=Voe.f(e);return(0,i.resolve)(n),i.promise},joe=Vn,$oe=jd,Hoe=e0.CONSTRUCTOR,zoe=FM,Woe=Je("Promise"),Goe=!Hoe;joe({target:"Promise",stat:!0,forced:!0},{resolve:function(e){return zoe(Goe&&this===Woe?$oe:this,e)}});var Koe=ae,Yoe=un,qoe=al,Xoe=_f,Joe=Ym;Vn({target:"Promise",stat:!0,forced:HE},{allSettled:function(e){var n=this,i=qoe.f(n),a=i.resolve,l=i.reject,u=Xoe(function(){var h=Yoe(n.resolve),p=[],m=0,E=1;Joe(e,function(S){var R=m++,w=!1;E++,Koe(h,n,S).then(function(O){w||(w=!0,p[R]={status:"fulfilled",value:O},--E||a(p))},function(O){w||(w=!0,p[R]={status:"rejected",reason:O},--E||a(p))})}),--E||a(p)});return u.error&&l(u.value),i.promise}});var Qoe=ae,Zoe=un,eae=Je,tae=al,nae=_f,rae=Ym,UM="No one promise resolved";Vn({target:"Promise",stat:!0,forced:HE},{any:function(e){var n=this,i=eae("AggregateError"),a=tae.f(n),l=a.resolve,u=a.reject,h=nae(function(){var p=Zoe(n.resolve),m=[],E=0,S=1,R=!1;rae(e,function(w){var O=E++,H=!1;S++,Qoe(p,n,w).then(function(B){H||R||(R=!0,l(B))},function(B){H||R||(H=!0,m[O]=B,--S||u(new i(m,UM)))})}),--S||u(new i(m,UM))});return h.error&&u(h.value),a.promise}});var iae=Vn,oae=L,aae=Ou,sae=al,cae=un,BM=_f,rR=I.Promise,VM=!1;iae({target:"Promise",stat:!0,forced:!rR||!rR.try||BM(function(){rR.try(function(e){VM=e===8},8)}).error||!VM},{try:function(e){var n=arguments.length>1?aae(arguments,1):[],i=sae.f(this),a=BM(function(){return oae(cae(e),void 0,n)});return(a.error?i.reject:i.resolve)(a.value),i.promise}});var lae=al;Vn({target:"Promise",stat:!0},{withResolvers:function(){var e=lae.f(this);return{promise:e.promise,resolve:e.resolve,reject:e.reject}}});var uae=Vn,iR=jd,dae=d,hae=Je,fae=ne,pae=D1,jM=FM,mae=iR&&iR.prototype;uae({target:"Promise",proto:!0,real:!0,forced:!!iR&&dae(function(){mae.finally.call({then:function(){}},function(){})})},{finally:function(e){var n=pae(this,hae("Promise")),i=fae(e);return this.then(i?function(a){return jM(n,e()).then(function(){return a})}:e,i?function(a){return jM(n,e()).then(function(){throw a})}:e)}});var oR=b,gae=e1,vae=Ua,Eae=$e,_ae=oR("".charAt),$M=oR("".charCodeAt),Sae=oR("".slice),HM=function(e){return function(n,i){var a,l,u=vae(Eae(n)),h=gae(i),p=u.length;return h<0||h>=p?e?"":void 0:(a=$M(u,h))<55296||a>56319||h+1===p||(l=$M(u,h+1))<56320||l>57343?e?_ae(u,h):a:e?Sae(u,h,h+2):l-56320+(a-55296<<10)+65536}},aR={codeAt:HM(!1),charAt:HM(!0)},yae=aR.charAt,Cae=Ua,zM=Bd,bae=Bk,WM=DE,GM="String Iterator",Tae=zM.set,Rae=zM.getterFor(GM);bae(String,"String",function(e){Tae(this,{type:GM,string:Cae(e),index:0})},function(){var e,n=Rae(this),i=n.string,a=n.index;return a>=i.length?WM(void 0,!0):(e=yae(i,a),n.index+=e.length,WM(e,!1))});var wae=ut.Promise,Iae={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Aae=I,Oae=jl,KM=ff;for(var sR in Iae)Oae(Aae[sR],sR),KM[sR]=KM.Array;var YM=wae,et=c(YM),xae=ks("Array","values"),Nae=Iu,Pae=Jn,Dae=T,Lae=xae,cR=Array.prototype,kae={DOMTokenList:!0,NodeList:!0},Mae=function(e){var n=e.values;return e===cR||Dae(cR,e)&&n===cR.values||Pae(kae,Nae(e))?Lae:n},ba=c(Mae),qM=vn,Fae=TypeError,XM=Ou,Uae=Math.floor,lR=function(e,n){var i=e.length;if(i<8)for(var a,l,u=1;u<i;){for(l=u,a=e[u];l&&n(e[l-1],a)>0;)e[l]=e[--l];l!==u++&&(e[l]=a)}else for(var h=Uae(i/2),p=lR(XM(e,0,h),n),m=lR(XM(e,h),n),E=p.length,S=m.length,R=0,w=0;R<E||w<S;)e[R+w]=R<E&&w<S?n(p[R],m[w])<=0?p[R++]:m[w++]:R<E?p[R++]:m[w++];return e},JM=lR,QM=Ot.match(/firefox\/(\d+)/i),Bae=!!QM&&+QM[1],Vae=/MSIE|Trident/.test(Ot),ZM=Ot.match(/AppleWebKit\/(\d+)\./),jae=!!ZM&&+ZM[1],$ae=Vn,eF=b,Hae=un,zae=cn,tF=wu,Wae=function(e,n){if(!delete e[n])throw new Fae("Cannot delete property "+qM(n)+" of "+qM(e))},nF=Ua,uR=d,Gae=JM,Kae=gE,rF=Bae,Yae=Vae,iF=_t,oF=jae,Nu=[],aF=eF(Nu.sort),qae=eF(Nu.push),Xae=uR(function(){Nu.sort(void 0)}),Jae=uR(function(){Nu.sort(null)}),Qae=Kae("sort"),sF=!uR(function(){if(iF)return iF<70;if(!(rF&&rF>3)){if(Yae)return!0;if(oF)return oF<603;var e,n,i,a,l="";for(e=65;e<76;e++){switch(n=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:i=3;break;case 68:case 71:i=4;break;default:i=2}for(a=0;a<47;a++)Nu.push({k:n+a,v:i})}for(Nu.sort(function(u,h){return h.v-u.v}),a=0;a<Nu.length;a++)n=Nu[a].k.charAt(0),l.charAt(l.length-1)!==n&&(l+=n);return l!=="DGBEFHACIJK"}});$ae({target:"Array",proto:!0,forced:Xae||!Jae||!Qae||!sF},{sort:function(e){e!==void 0&&Hae(e);var n=zae(this);if(sF)return e===void 0?aF(n):aF(n,e);var i,a,l=[],u=tF(n);for(a=0;a<u;a++)a in n&&qae(l,n[a]);for(Gae(l,function(h){return function(p,m){return m===void 0?-1:p===void 0?1:h!==void 0?+h(p,m)||0:nF(p)>nF(m)?1:-1}}(e)),i=tF(l),a=0;a<i;)n[a]=l[a++];for(;a<u;)Wae(n,a++);return n}});var Zae=ks("Array","sort"),ese=T,tse=Zae,dR=Array.prototype,nse=function(e){var n=e.sort;return e===dR||ese(dR,e)&&n===dR.sort?tse:n},$d=c(nse),rse=Vn,ise=b,ose=t1,ase=RangeError,cF=String.fromCharCode,lF=String.fromCodePoint,sse=ise([].join);rse({target:"String",stat:!0,arity:1,forced:!!lF&&lF.length!==1},{fromCodePoint:function(e){for(var n,i=[],a=arguments.length,l=0;a>l;){if(n=+arguments[l++],ose(n,1114111)!==n)throw new ase(n+" is not a valid code point");i[l]=n<65536?cF(n):cF(55296+((n-=65536)>>10),n%1024+56320)}return sse(i,"")}});var cse=d,lse=hr("iterator"),zE=!cse(function(){var e=new URL("b?a=1&b=2&c=3","https://a"),n=e.searchParams,i=new URLSearchParams("a=1&a=2&b=3"),a="";return e.pathname="c%20d",n.forEach(function(l,u){n.delete("b"),a+=u+l}),i.delete("a",2),i.delete("b",void 0),!e.toJSON||!i.has("a",1)||i.has("a",2)||!i.has("a",void 0)||i.has("b")||!n.size&&!0||!n.sort||e.href!=="https://a/c%20d?a=1&c=3"||n.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!n[lse]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("https://тест").host!=="xn--e1aybc"||new URL("https://a#б").hash!=="#%D0%B1"||a!=="a1c3"||new URL("https://x",void 0).host!=="x"}),use=Au,hR=Vn,uF=I,fR=sM,dse=Je,WE=ae,_c=b,r0=ce,dF=zE,hF=Au,hse=kE,fse=function(e,n,i){for(var a in n)i&&i.unsafe&&e[a]?e[a]=n[a]:use(e,a,n[a],i);return e},pse=jl,mse=I1,pR=Bd,fF=O1,mR=ne,gse=Jn,vse=Ru,Ese=Iu,_se=Ca,pF=Ze,Ta=Ua,Sse=Km,mF=se,gF=v1,yse=RE,GE=DE,Cf=Vd,Cse=JM,bse=hr("iterator"),bf="URLSearchParams",vF=bf+"Iterator",EF=pR.set,Fs=pR.getterFor(bf),Tse=pR.getterFor(vF),_F=fR("fetch"),KE=fR("Request"),i0=fR("Headers"),gR=KE&&KE.prototype,SF=i0&&i0.prototype,Rse=uF.TypeError,wse=uF.encodeURIComponent,Ise=String.fromCharCode,Ase=dse("String","fromCodePoint"),Ose=parseInt,YE=_c("".charAt),yF=_c([].join),Pu=_c([].push),CF=_c("".replace),xse=_c([].shift),bF=_c([].splice),TF=_c("".split),RF=_c("".slice),Nse=_c(/./.exec),Pse=/\+/g,Dse=/^[0-9a-f]+$/i,wF=function(e,n){var i=RF(e,n,n+2);return Nse(Dse,i)?Ose(i,16):NaN},Lse=function(e){for(var n=0,i=128;i>0&&e&i;i>>=1)n++;return n},kse=function(e){var n=null;switch(e.length){case 1:n=e[0];break;case 2:n=(31&e[0])<<6|63&e[1];break;case 3:n=(15&e[0])<<12|(63&e[1])<<6|63&e[2];break;case 4:n=(7&e[0])<<18|(63&e[1])<<12|(63&e[2])<<6|63&e[3]}return n>1114111?null:n},IF=function(e){for(var n=(e=CF(e,Pse," ")).length,i="",a=0;a<n;){var l=YE(e,a);if(l==="%"){if(YE(e,a+1)==="%"||a+3>n){i+="%",a++;continue}var u=wF(e,a+1);if(u!=u){i+=l,a++;continue}a+=2;var h=Lse(u);if(h===0)l=Ise(u);else{if(h===1||h>4){i+="�",a++;continue}for(var p=[u],m=1;m<h&&!(++a+3>n||YE(e,a)!=="%");){var E=wF(e,a+1);if(E!=E){a+=3;break}if(E>191||E<128)break;Pu(p,E),a+=2,m++}if(p.length!==h){i+="�";continue}var S=kse(p);S===null?i+="�":l=Ase(S)}}i+=l,a++}return i},Mse=/[!'()~]|%20/g,Fse={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},Use=function(e){return Fse[e]},AF=function(e){return CF(wse(e),Mse,Use)},vR=mse(function(e,n){EF(this,{type:vF,target:Fs(e).entries,index:0,kind:n})},bf,function(){var e=Tse(this),n=e.target,i=e.index++;if(!n||i>=n.length)return e.target=null,GE(void 0,!0);var a=n[i];switch(e.kind){case"keys":return GE(a.key,!1);case"values":return GE(a.value,!1)}return GE([a.key,a.value],!1)},!0),OF=function(e){this.entries=[],this.url=null,e!==void 0&&(pF(e)?this.parseObject(e):this.parseQuery(typeof e=="string"?YE(e,0)==="?"?RF(e,1):e:Ta(e)))};OF.prototype={type:bf,bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var n,i,a,l,u,h,p,m=this.entries,E=yse(e);if(E)for(i=(n=gF(e,E)).next;!(a=WE(i,n)).done;){if(u=(l=gF(_se(a.value))).next,(h=WE(u,l)).done||(p=WE(u,l)).done||!WE(u,l).done)throw new Rse("Expected sequence with length 2");Pu(m,{key:Ta(h.value),value:Ta(p.value)})}else for(var S in e)gse(e,S)&&Pu(m,{key:S,value:Ta(e[S])})},parseQuery:function(e){if(e)for(var n,i,a=this.entries,l=TF(e,"&"),u=0;u<l.length;)(n=l[u++]).length&&(i=TF(n,"="),Pu(a,{key:IF(xse(i)),value:IF(yF(i,"="))}))},serialize:function(){for(var e,n=this.entries,i=[],a=0;a<n.length;)e=n[a++],Pu(i,AF(e.key)+"="+AF(e.value));return yF(i,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var qE=function(){fF(this,Tf);var e=EF(this,new OF(arguments.length>0?arguments[0]:void 0));r0||(this.size=e.entries.length)},Tf=qE.prototype;if(fse(Tf,{append:function(e,n){var i=Fs(this);Cf(arguments.length,2),Pu(i.entries,{key:Ta(e),value:Ta(n)}),r0||this.length++,i.updateURL()},delete:function(e){for(var n=Fs(this),i=Cf(arguments.length,1),a=n.entries,l=Ta(e),u=i<2?void 0:arguments[1],h=u===void 0?u:Ta(u),p=0;p<a.length;){var m=a[p];if(m.key!==l||h!==void 0&&m.value!==h)p++;else if(bF(a,p,1),h!==void 0)break}r0||(this.size=a.length),n.updateURL()},get:function(e){var n=Fs(this).entries;Cf(arguments.length,1);for(var i=Ta(e),a=0;a<n.length;a++)if(n[a].key===i)return n[a].value;return null},getAll:function(e){var n=Fs(this).entries;Cf(arguments.length,1);for(var i=Ta(e),a=[],l=0;l<n.length;l++)n[l].key===i&&Pu(a,n[l].value);return a},has:function(e){for(var n=Fs(this).entries,i=Cf(arguments.length,1),a=Ta(e),l=i<2?void 0:arguments[1],u=l===void 0?l:Ta(l),h=0;h<n.length;){var p=n[h++];if(p.key===a&&(u===void 0||p.value===u))return!0}return!1},set:function(e,n){var i=Fs(this);Cf(arguments.length,1);for(var a,l=i.entries,u=!1,h=Ta(e),p=Ta(n),m=0;m<l.length;m++)(a=l[m]).key===h&&(u?bF(l,m--,1):(u=!0,a.value=p));u||Pu(l,{key:h,value:p}),r0||(this.size=l.length),i.updateURL()},sort:function(){var e=Fs(this);Cse(e.entries,function(n,i){return n.key>i.key?1:-1}),e.updateURL()},forEach:function(e){for(var n,i=Fs(this).entries,a=vse(e,arguments.length>1?arguments[1]:void 0),l=0;l<i.length;)a((n=i[l++]).value,n.key,this)},keys:function(){return new vR(this,"keys")},values:function(){return new vR(this,"values")},entries:function(){return new vR(this,"entries")}},{enumerable:!0}),hF(Tf,bse,Tf.entries,{name:"entries"}),hF(Tf,"toString",function(){return Fs(this).serialize()},{enumerable:!0}),r0&&hse(Tf,"size",{get:function(){return Fs(this).entries.length},configurable:!0,enumerable:!0}),pse(qE,bf),hR({global:!0,constructor:!0,forced:!dF},{URLSearchParams:qE}),!dF&&mR(i0)){var Bse=_c(SF.has),Vse=_c(SF.set),xF=function(e){if(pF(e)){var n,i=e.body;if(Ese(i)===bf)return n=e.headers?new i0(e.headers):new i0,Bse(n,"content-type")||Vse(n,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),Sse(e,{body:mF(0,Ta(i)),headers:mF(0,n)})}return e};if(mR(_F)&&hR({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(e){return _F(e,arguments.length>1?xF(arguments[1]):{})}}),mR(KE)){var ER=function(e){return fF(this,gR),new KE(e,arguments.length>1?xF(arguments[1]):{})};gR.constructor=ER,ER.prototype=gR,hR({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:ER})}}var Us,jse={URLSearchParams:qE,getState:Fs},$se=ut.URLSearchParams,NF=ce,Hse=b,zse=ae,Wse=d,_R=CE,Gse=Gm,Kse=ie,Yse=cn,qse=De,Rf=Object.assign,PF=Object.defineProperty,Xse=Hse([].concat),Jse=!Rf||Wse(function(){if(NF&&Rf({b:1},Rf(PF({},"a",{enumerable:!0,get:function(){PF(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var e={},n={},i=Symbol("assign detection"),a="abcdefghijklmnopqrst";return e[i]=7,a.split("").forEach(function(l){n[l]=l}),Rf({},e)[i]!==7||_R(Rf({},n)).join("")!==a})?function(e,n){for(var i=Yse(e),a=arguments.length,l=1,u=Gse.f,h=Kse.f;a>l;)for(var p,m=qse(arguments[l++]),E=u?Xse(_R(m),u(m)):_R(m),S=E.length,R=0;S>R;)p=E[R++],NF&&!zse(h,m,p)||(i[p]=m[p]);return i}:Rf,Qse=Ca,Zse=_k,ece=ce,tce=Ls,nce=se,SR=function(e,n,i){ece?tce.f(e,n,nce(0,i)):e[n]=i},rce=Ru,ice=ae,oce=cn,ace=function(e,n,i,a){try{return a?n(Qse(i)[0],i[1]):n(i)}catch(l){Zse(e,"throw",l)}},sce=gk,cce=ME,lce=wu,DF=SR,uce=v1,dce=RE,LF=Array,Hd=b,yR=2147483647,hce=/[^\0-\u007E]/,kF=/[.\u3002\uFF0E\uFF61]/g,MF="Overflow: input needs wider integers to process",FF=RangeError,fce=Hd(kF.exec),wf=Math.floor,CR=String.fromCharCode,UF=Hd("".charCodeAt),BF=Hd([].join),Du=Hd([].push),pce=Hd("".replace),mce=Hd("".split),gce=Hd("".toLowerCase),VF=function(e){return e+22+75*(e<26)},vce=function(e,n,i){var a=0;for(e=i?wf(e/700):e>>1,e+=wf(e/n);e>455;)e=wf(e/35),a+=36;return wf(a+36*e/(e+38))},Ece=function(e){var n=[];e=function(q){for(var Y=[],Z=0,pe=q.length;Z<pe;){var he=UF(q,Z++);if(he>=55296&&he<=56319&&Z<pe){var re=UF(q,Z++);(64512&re)==56320?Du(Y,((1023&he)<<10)+(1023&re)+65536):(Du(Y,he),Z--)}else Du(Y,he)}return Y}(e);var i,a,l=e.length,u=128,h=0,p=72;for(i=0;i<e.length;i++)(a=e[i])<128&&Du(n,CR(a));var m=n.length,E=m;for(m&&Du(n,"-");E<l;){var S=yR;for(i=0;i<e.length;i++)(a=e[i])>=u&&a<S&&(S=a);var R=E+1;if(S-u>wf((yR-h)/R))throw new FF(MF);for(h+=(S-u)*R,u=S,i=0;i<e.length;i++){if((a=e[i])<u&&++h>yR)throw new FF(MF);if(a===u){for(var w=h,O=36;;){var H=O<=p?1:O>=p+26?26:O-p;if(w<H)break;var B=w-H,j=36-H;Du(n,CR(VF(H+B%j))),w=wf(B/j),O+=36}Du(n,CR(VF(w))),p=vce(h,R,E===m),h=0,E++}}h++,u++}return BF(n,"")},_ce=Vn,bR=ce,Sce=zE,TR=I,jF=Ru,Bs=b,XE=Au,Vs=kE,yce=O1,RR=Jn,wR=Jse,If=function(e){var n=oce(e),i=cce(this),a=arguments.length,l=a>1?arguments[1]:void 0,u=l!==void 0;u&&(l=rce(l,a>2?arguments[2]:void 0));var h,p,m,E,S,R,w=dce(n),O=0;if(!w||this===LF&&sce(w))for(h=lce(n),p=i?new this(h):LF(h);h>O;O++)R=u?l(n[O],O):n[O],DF(p,O,R);else for(p=i?new this:[],S=(E=uce(n,w)).next;!(m=ice(S,E)).done;O++)R=u?ace(E,l,[m.value,O],!0):m.value,DF(p,O,R);return p.length=O,p},Sc=Ou,Cce=aR.codeAt,bce=function(e){var n,i,a=[],l=mce(pce(gce(e),kF,"."),".");for(n=0;n<l.length;n++)i=l[n],Du(a,fce(hce,i)?"xn--"+Ece(i):i);return BF(a,".")},$l=Ua,Tce=jl,Rce=Vd,$F=jse,HF=Bd,wce=HF.set,JE=HF.getterFor("URL"),Ice=$F.URLSearchParams,Ace=$F.getState,o0=TR.URL,IR=TR.TypeError,QE=TR.parseInt,Oce=Math.floor,zF=Math.pow,js=Bs("".charAt),yc=Bs(/./.exec),a0=Bs([].join),xce=Bs(1 .toString),Nce=Bs([].pop),Af=Bs([].push),AR=Bs("".replace),Pce=Bs([].shift),Dce=Bs("".split),s0=Bs("".slice),ZE=Bs("".toLowerCase),Lce=Bs([].unshift),OR="Invalid scheme",zd="Invalid host",WF="Invalid port",GF=/[a-z]/i,kce=/[\d+-.a-z]/i,xR=/\d/,Mce=/^0x/i,Fce=/^[0-7]+$/,Uce=/^\d+$/,KF=/^[\da-f]+$/i,Bce=/[\0\t\n\r #%/:<>?@[\\\]^|]/,Vce=/[\0\t\n\r #/:<>?@[\\\]^|]/,jce=/^[\u0000-\u0020]+/,$ce=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,Hce=/[\t\n\r]/g,c0=function(e){var n,i,a,l;if(typeof e=="number"){for(n=[],i=0;i<4;i++)Lce(n,e%256),e=Oce(e/256);return a0(n,".")}if(typeof e=="object"){for(n="",a=function(u){for(var h=null,p=1,m=null,E=0,S=0;S<8;S++)u[S]!==0?(E>p&&(h=m,p=E),m=null,E=0):(m===null&&(m=S),++E);return E>p?m:h}(e),i=0;i<8;i++)l&&e[i]===0||(l&&(l=!1),a===i?(n+=i?":":"::",l=!0):(n+=xce(e[i],16),i<7&&(n+=":")));return"["+n+"]"}return e},e_={},YF=wR({},e_,{" ":1,'"':1,"<":1,">":1,"`":1}),qF=wR({},YF,{"#":1,"?":1,"{":1,"}":1}),NR=wR({},qF,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Lu=function(e,n){var i=Cce(e,0);return i>32&&i<127&&!RR(n,e)?e:encodeURIComponent(e)},t_={ftp:21,file:null,http:80,https:443,ws:80,wss:443},l0=function(e,n){var i;return e.length===2&&yc(GF,js(e,0))&&((i=js(e,1))===":"||!n&&i==="|")},XF=function(e){var n;return e.length>1&&l0(s0(e,0,2))&&(e.length===2||(n=js(e,2))==="/"||n==="\\"||n==="?"||n==="#")},zce=function(e){return e==="."||ZE(e)==="%2e"},PR={},JF={},DR={},QF={},ZF={},LR={},e4={},t4={},n_={},r_={},kR={},MR={},FR={},UR={},n4={},BR={},Of={},sl={},r4={},Wd={},Hl={},VR=function(e,n,i){var a,l,u,h=$l(e);if(n){if(l=this.parse(h))throw new IR(l);this.searchParams=null}else{if(i!==void 0&&(a=new VR(i,!0)),l=this.parse(h,null,a))throw new IR(l);(u=Ace(new Ice)).bindURL(this),this.searchParams=u}};VR.prototype={type:"URL",parse:function(e,n,i){var a,l,u,h,p,m=this,E=n||PR,S=0,R="",w=!1,O=!1,H=!1;for(e=$l(e),n||(m.scheme="",m.username="",m.password="",m.host=null,m.port=null,m.path=[],m.query=null,m.fragment=null,m.cannotBeABaseURL=!1,e=AR(e,jce,""),e=AR(e,$ce,"$1")),e=AR(e,Hce,""),a=If(e);S<=a.length;){switch(l=a[S],E){case PR:if(!l||!yc(GF,l)){if(n)return OR;E=DR;continue}R+=ZE(l),E=JF;break;case JF:if(l&&(yc(kce,l)||l==="+"||l==="-"||l==="."))R+=ZE(l);else{if(l!==":"){if(n)return OR;R="",E=DR,S=0;continue}if(n&&(m.isSpecial()!==RR(t_,R)||R==="file"&&(m.includesCredentials()||m.port!==null)||m.scheme==="file"&&!m.host))return;if(m.scheme=R,n)return void(m.isSpecial()&&t_[m.scheme]===m.port&&(m.port=null));R="",m.scheme==="file"?E=UR:m.isSpecial()&&i&&i.scheme===m.scheme?E=QF:m.isSpecial()?E=t4:a[S+1]==="/"?(E=ZF,S++):(m.cannotBeABaseURL=!0,Af(m.path,""),E=r4)}break;case DR:if(!i||i.cannotBeABaseURL&&l!=="#")return OR;if(i.cannotBeABaseURL&&l==="#"){m.scheme=i.scheme,m.path=Sc(i.path),m.query=i.query,m.fragment="",m.cannotBeABaseURL=!0,E=Hl;break}E=i.scheme==="file"?UR:LR;continue;case QF:if(l!=="/"||a[S+1]!=="/"){E=LR;continue}E=n_,S++;break;case ZF:if(l==="/"){E=r_;break}E=sl;continue;case LR:if(m.scheme=i.scheme,l===Us)m.username=i.username,m.password=i.password,m.host=i.host,m.port=i.port,m.path=Sc(i.path),m.query=i.query;else if(l==="/"||l==="\\"&&m.isSpecial())E=e4;else if(l==="?")m.username=i.username,m.password=i.password,m.host=i.host,m.port=i.port,m.path=Sc(i.path),m.query="",E=Wd;else{if(l!=="#"){m.username=i.username,m.password=i.password,m.host=i.host,m.port=i.port,m.path=Sc(i.path),m.path.length--,E=sl;continue}m.username=i.username,m.password=i.password,m.host=i.host,m.port=i.port,m.path=Sc(i.path),m.query=i.query,m.fragment="",E=Hl}break;case e4:if(!m.isSpecial()||l!=="/"&&l!=="\\"){if(l!=="/"){m.username=i.username,m.password=i.password,m.host=i.host,m.port=i.port,E=sl;continue}E=r_}else E=n_;break;case t4:if(E=n_,l!=="/"||js(R,S+1)!=="/")continue;S++;break;case n_:if(l!=="/"&&l!=="\\"){E=r_;continue}break;case r_:if(l==="@"){w&&(R="%40"+R),w=!0,u=If(R);for(var B=0;B<u.length;B++){var j=u[B];if(j!==":"||H){var q=Lu(j,NR);H?m.password+=q:m.username+=q}else H=!0}R=""}else if(l===Us||l==="/"||l==="?"||l==="#"||l==="\\"&&m.isSpecial()){if(w&&R==="")return"Invalid authority";S-=If(R).length+1,R="",E=kR}else R+=l;break;case kR:case MR:if(n&&m.scheme==="file"){E=BR;continue}if(l!==":"||O){if(l===Us||l==="/"||l==="?"||l==="#"||l==="\\"&&m.isSpecial()){if(m.isSpecial()&&R==="")return zd;if(n&&R===""&&(m.includesCredentials()||m.port!==null))return;if(h=m.parseHost(R))return h;if(R="",E=Of,n)return;continue}l==="["?O=!0:l==="]"&&(O=!1),R+=l}else{if(R==="")return zd;if(h=m.parseHost(R))return h;if(R="",E=FR,n===MR)return}break;case FR:if(!yc(xR,l)){if(l===Us||l==="/"||l==="?"||l==="#"||l==="\\"&&m.isSpecial()||n){if(R!==""){var Y=QE(R,10);if(Y>65535)return WF;m.port=m.isSpecial()&&Y===t_[m.scheme]?null:Y,R=""}if(n)return;E=Of;continue}return WF}R+=l;break;case UR:if(m.scheme="file",l==="/"||l==="\\")E=n4;else{if(!i||i.scheme!=="file"){E=sl;continue}switch(l){case Us:m.host=i.host,m.path=Sc(i.path),m.query=i.query;break;case"?":m.host=i.host,m.path=Sc(i.path),m.query="",E=Wd;break;case"#":m.host=i.host,m.path=Sc(i.path),m.query=i.query,m.fragment="",E=Hl;break;default:XF(a0(Sc(a,S),""))||(m.host=i.host,m.path=Sc(i.path),m.shortenPath()),E=sl;continue}}break;case n4:if(l==="/"||l==="\\"){E=BR;break}i&&i.scheme==="file"&&!XF(a0(Sc(a,S),""))&&(l0(i.path[0],!0)?Af(m.path,i.path[0]):m.host=i.host),E=sl;continue;case BR:if(l===Us||l==="/"||l==="\\"||l==="?"||l==="#"){if(!n&&l0(R))E=sl;else if(R===""){if(m.host="",n)return;E=Of}else{if(h=m.parseHost(R))return h;if(m.host==="localhost"&&(m.host=""),n)return;R="",E=Of}continue}R+=l;break;case Of:if(m.isSpecial()){if(E=sl,l!=="/"&&l!=="\\")continue}else if(n||l!=="?")if(n||l!=="#"){if(l!==Us&&(E=sl,l!=="/"))continue}else m.fragment="",E=Hl;else m.query="",E=Wd;break;case sl:if(l===Us||l==="/"||l==="\\"&&m.isSpecial()||!n&&(l==="?"||l==="#")){if((p=ZE(p=R))===".."||p==="%2e."||p===".%2e"||p==="%2e%2e"?(m.shortenPath(),l==="/"||l==="\\"&&m.isSpecial()||Af(m.path,"")):zce(R)?l==="/"||l==="\\"&&m.isSpecial()||Af(m.path,""):(m.scheme==="file"&&!m.path.length&&l0(R)&&(m.host&&(m.host=""),R=js(R,0)+":"),Af(m.path,R)),R="",m.scheme==="file"&&(l===Us||l==="?"||l==="#"))for(;m.path.length>1&&m.path[0]==="";)Pce(m.path);l==="?"?(m.query="",E=Wd):l==="#"&&(m.fragment="",E=Hl)}else R+=Lu(l,qF);break;case r4:l==="?"?(m.query="",E=Wd):l==="#"?(m.fragment="",E=Hl):l!==Us&&(m.path[0]+=Lu(l,e_));break;case Wd:n||l!=="#"?l!==Us&&(l==="'"&&m.isSpecial()?m.query+="%27":m.query+=l==="#"?"%23":Lu(l,e_)):(m.fragment="",E=Hl);break;case Hl:l!==Us&&(m.fragment+=Lu(l,YF))}S++}},parseHost:function(e){var n,i,a;if(js(e,0)==="["){if(js(e,e.length-1)!=="]"||(n=function(l){var u,h,p,m,E,S,R,w=[0,0,0,0,0,0,0,0],O=0,H=null,B=0,j=function(){return js(l,B)};if(j()===":"){if(js(l,1)!==":")return;B+=2,H=++O}for(;j();){if(O===8)return;if(j()!==":"){for(u=h=0;h<4&&yc(KF,j());)u=16*u+QE(j(),16),B++,h++;if(j()==="."){if(h===0||(B-=h,O>6))return;for(p=0;j();){if(m=null,p>0){if(!(j()==="."&&p<4))return;B++}if(!yc(xR,j()))return;for(;yc(xR,j());){if(E=QE(j(),10),m===null)m=E;else{if(m===0)return;m=10*m+E}if(m>255)return;B++}w[O]=256*w[O]+m,++p!=2&&p!==4||O++}if(p!==4)return;break}if(j()===":"){if(B++,!j())return}else if(j())return;w[O++]=u}else{if(H!==null)return;B++,H=++O}}if(H!==null)for(S=O-H,O=7;O!==0&&S>0;)R=w[O],w[O--]=w[H+S-1],w[H+--S]=R;else if(O!==8)return;return w}(s0(e,1,-1)),!n))return zd;this.host=n}else if(this.isSpecial()){if(e=bce(e),yc(Bce,e)||(n=function(l){var u,h,p,m,E,S,R,w=Dce(l,".");if(w.length&&w[w.length-1]===""&&w.length--,(u=w.length)>4)return l;for(h=[],p=0;p<u;p++){if((m=w[p])==="")return l;if(E=10,m.length>1&&js(m,0)==="0"&&(E=yc(Mce,m)?16:8,m=s0(m,E===8?1:2)),m==="")S=0;else{if(!yc(E===10?Uce:E===8?Fce:KF,m))return l;S=QE(m,E)}Af(h,S)}for(p=0;p<u;p++)if(S=h[p],p===u-1){if(S>=zF(256,5-u))return null}else if(S>255)return null;for(R=Nce(h),p=0;p<h.length;p++)R+=h[p]*zF(256,3-p);return R}(e),n===null))return zd;this.host=n}else{if(yc(Vce,e))return zd;for(n="",i=If(e),a=0;a<i.length;a++)n+=Lu(i[a],e_);this.host=n}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||this.scheme==="file"},includesCredentials:function(){return this.username!==""||this.password!==""},isSpecial:function(){return RR(t_,this.scheme)},shortenPath:function(){var e=this.path,n=e.length;!n||this.scheme==="file"&&n===1&&l0(e[0],!0)||e.length--},serialize:function(){var e=this,n=e.scheme,i=e.username,a=e.password,l=e.host,u=e.port,h=e.path,p=e.query,m=e.fragment,E=n+":";return l!==null?(E+="//",e.includesCredentials()&&(E+=i+(a?":"+a:"")+"@"),E+=c0(l),u!==null&&(E+=":"+u)):n==="file"&&(E+="//"),E+=e.cannotBeABaseURL?h[0]:h.length?"/"+a0(h,"/"):"",p!==null&&(E+="?"+p),m!==null&&(E+="#"+m),E},setHref:function(e){var n=this.parse(e);if(n)throw new IR(n);this.searchParams.update()},getOrigin:function(){var e=this.scheme,n=this.port;if(e==="blob")try{return new xf(e.path[0]).origin}catch{return"null"}return e!=="file"&&this.isSpecial()?e+"://"+c0(this.host)+(n!==null?":"+n:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(e){this.parse($l(e)+":",PR)},getUsername:function(){return this.username},setUsername:function(e){var n=If($l(e));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var i=0;i<n.length;i++)this.username+=Lu(n[i],NR)}},getPassword:function(){return this.password},setPassword:function(e){var n=If($l(e));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var i=0;i<n.length;i++)this.password+=Lu(n[i],NR)}},getHost:function(){var e=this.host,n=this.port;return e===null?"":n===null?c0(e):c0(e)+":"+n},setHost:function(e){this.cannotBeABaseURL||this.parse(e,kR)},getHostname:function(){var e=this.host;return e===null?"":c0(e)},setHostname:function(e){this.cannotBeABaseURL||this.parse(e,MR)},getPort:function(){var e=this.port;return e===null?"":$l(e)},setPort:function(e){this.cannotHaveUsernamePasswordPort()||((e=$l(e))===""?this.port=null:this.parse(e,FR))},getPathname:function(){var e=this.path;return this.cannotBeABaseURL?e[0]:e.length?"/"+a0(e,"/"):""},setPathname:function(e){this.cannotBeABaseURL||(this.path=[],this.parse(e,Of))},getSearch:function(){var e=this.query;return e?"?"+e:""},setSearch:function(e){(e=$l(e))===""?this.query=null:(js(e,0)==="?"&&(e=s0(e,1)),this.query="",this.parse(e,Wd)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var e=this.fragment;return e?"#"+e:""},setHash:function(e){(e=$l(e))!==""?(js(e,0)==="#"&&(e=s0(e,1)),this.fragment="",this.parse(e,Hl)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var xf=function(e){var n=yce(this,Ra),i=Rce(arguments.length,1)>1?arguments[1]:void 0,a=wce(n,new VR(e,!1,i));bR||(n.href=a.serialize(),n.origin=a.getOrigin(),n.protocol=a.getProtocol(),n.username=a.getUsername(),n.password=a.getPassword(),n.host=a.getHost(),n.hostname=a.getHostname(),n.port=a.getPort(),n.pathname=a.getPathname(),n.search=a.getSearch(),n.searchParams=a.getSearchParams(),n.hash=a.getHash())},Ra=xf.prototype,$s=function(e,n){return{get:function(){return JE(this)[e]()},set:n&&function(i){return JE(this)[n](i)},configurable:!0,enumerable:!0}};if(bR&&(Vs(Ra,"href",$s("serialize","setHref")),Vs(Ra,"origin",$s("getOrigin")),Vs(Ra,"protocol",$s("getProtocol","setProtocol")),Vs(Ra,"username",$s("getUsername","setUsername")),Vs(Ra,"password",$s("getPassword","setPassword")),Vs(Ra,"host",$s("getHost","setHost")),Vs(Ra,"hostname",$s("getHostname","setHostname")),Vs(Ra,"port",$s("getPort","setPort")),Vs(Ra,"pathname",$s("getPathname","setPathname")),Vs(Ra,"search",$s("getSearch","setSearch")),Vs(Ra,"searchParams",$s("getSearchParams")),Vs(Ra,"hash",$s("getHash","setHash"))),XE(Ra,"toJSON",function(){return JE(this).serialize()},{enumerable:!0}),XE(Ra,"toString",function(){return JE(this).serialize()},{enumerable:!0}),o0){var i4=o0.createObjectURL,o4=o0.revokeObjectURL;i4&&XE(xf,"createObjectURL",jF(i4,o0)),o4&&XE(xf,"revokeObjectURL",jF(o4,o0))}Tce(xf,"URL"),_ce({global:!0,constructor:!0,forced:!Sce,sham:!bR},{URL:xf});var Wce=Vn,a4=d,Gce=Vd,s4=Ua,Kce=zE,jR=Je("URL"),Yce=Kce&&a4(function(){jR.canParse()}),qce=a4(function(){return jR.canParse.length!==1});Wce({target:"URL",stat:!0,forced:!Yce||qce},{canParse:function(e){var n=Gce(arguments.length,1),i=s4(e),a=n<2||arguments[1]===void 0?void 0:s4(arguments[1]);try{return!!new jR(i,a)}catch{return!1}}});var Xce=Vn,Jce=Vd,c4=Ua,Qce=zE,Zce=Je("URL");Xce({target:"URL",stat:!0,forced:!Qce},{parse:function(e){var n=Jce(arguments.length,1),i=c4(e),a=n<2||arguments[1]===void 0?void 0:c4(arguments[1]);try{return new Zce(i,a)}catch{return null}}});var i_=c(ut.URL);let l4=!0,u4=!0;function o_(e,n,i){const a=e.match(n);return a&&a.length>=i&&parseInt(a[i],10)}function Gd(e,n,i){if(!e.RTCPeerConnection)return;const a=e.RTCPeerConnection.prototype,l=a.addEventListener;a.addEventListener=function(h,p){if(h!==n)return l.apply(this,arguments);const m=E=>{const S=i(E);S&&(p.handleEvent?p.handleEvent(S):p(S))};return this._eventMap=this._eventMap||{},this._eventMap[n]||(this._eventMap[n]=new Map),this._eventMap[n].set(p,m),l.apply(this,[h,m])};const u=a.removeEventListener;a.removeEventListener=function(h,p){if(h!==n||!this._eventMap||!this._eventMap[n])return u.apply(this,arguments);if(!this._eventMap[n].has(p))return u.apply(this,arguments);const m=this._eventMap[n].get(p);return this._eventMap[n].delete(p),this._eventMap[n].size===0&&delete this._eventMap[n],Object.keys(this._eventMap).length===0&&delete this._eventMap,u.apply(this,[h,m])},Object.defineProperty(a,"on"+n,{get(){return this["_on"+n]},set(h){this["_on"+n]&&(this.removeEventListener(n,this["_on"+n]),delete this["_on"+n]),h&&this.addEventListener(n,this["_on"+n]=h)},enumerable:!0,configurable:!0})}function ele(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(l4=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function tle(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(u4=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function d4(){if(typeof window=="object"){if(l4)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function $R(e,n){u4&&console.warn(e+" is deprecated, please use "+n+" instead.")}function h4(e){return Object.prototype.toString.call(e)==="[object Object]"}function f4(e){var n;return h4(e)?Ms(n=Object.keys(e)).call(n,function(i,a){const l=h4(e[a]),u=l?f4(e[a]):e[a],h=l&&!Object.keys(u).length;return u===void 0||h?i:Object.assign(i,{[a]:u})},{}):e}function HR(e,n,i){n&&!i.has(n.id)&&(i.set(n.id,n),Object.keys(n).forEach(a=>{a.endsWith("Id")?HR(e,e.get(n[a]),i):a.endsWith("Ids")&&n[a].forEach(l=>{HR(e,e.get(l),i)})}))}function p4(e,n,i){const a=i?"outbound-rtp":"inbound-rtp",l=new Map;if(n===null)return l;const u=[];return e.forEach(h=>{h.type==="track"&&h.trackIdentifier===n.id&&u.push(h)}),u.forEach(h=>{e.forEach(p=>{p.type===a&&p.trackId===h.id&&HR(e,p,l)})}),l}const m4=d4;function g4(e,n){const i=e&&e.navigator;if(!i.mediaDevices)return;const a=function(h){if(typeof h!="object"||h.mandatory||h.optional)return h;const p={};return Object.keys(h).forEach(m=>{if(m==="require"||m==="advanced"||m==="mediaSource")return;const E=typeof h[m]=="object"?h[m]:{ideal:h[m]};E.exact!==void 0&&typeof E.exact=="number"&&(E.min=E.max=E.exact);const S=function(R,w){return R?R+w.charAt(0).toUpperCase()+w.slice(1):w==="deviceId"?"sourceId":w};if(E.ideal!==void 0){p.optional=p.optional||[];let R={};typeof E.ideal=="number"?(R[S("min",m)]=E.ideal,p.optional.push(R),R={},R[S("max",m)]=E.ideal,p.optional.push(R)):(R[S("",m)]=E.ideal,p.optional.push(R))}E.exact!==void 0&&typeof E.exact!="number"?(p.mandatory=p.mandatory||{},p.mandatory[S("",m)]=E.exact):["min","max"].forEach(R=>{E[R]!==void 0&&(p.mandatory=p.mandatory||{},p.mandatory[S(R,m)]=E[R])})}),h.advanced&&(p.optional=(p.optional||[]).concat(h.advanced)),p},l=function(h,p){if(n.version>=61)return p(h);if((h=JSON.parse(JSON.stringify(h)))&&typeof h.audio=="object"){const m=function(E,S,R){S in E&&!(R in E)&&(E[R]=E[S],delete E[S])};m((h=JSON.parse(JSON.stringify(h))).audio,"autoGainControl","googAutoGainControl"),m(h.audio,"noiseSuppression","googNoiseSuppression"),h.audio=a(h.audio)}if(h&&typeof h.video=="object"){let m=h.video.facingMode;m=m&&(typeof m=="object"?m:{ideal:m});const E=n.version<66;if(m&&(m.exact==="user"||m.exact==="environment"||m.ideal==="user"||m.ideal==="environment")&&(!i.mediaDevices.getSupportedConstraints||!i.mediaDevices.getSupportedConstraints().facingMode||E)){let S;if(delete h.video.facingMode,m.exact==="environment"||m.ideal==="environment"?S=["back","rear"]:m.exact!=="user"&&m.ideal!=="user"||(S=["front"]),S)return i.mediaDevices.enumerateDevices().then(R=>{R=R.filter(O=>O.kind==="videoinput");let w=R.find(O=>S.some(H=>{var B;return Ge(B=O.label.toLowerCase()).call(B,H)}));return!w&&R.length&&Ge(S).call(S,"back")&&(w=R[R.length-1]),w&&(h.video.deviceId=m.exact?{exact:w.deviceId}:{ideal:w.deviceId}),h.video=a(h.video),m4("chrome: "+JSON.stringify(h)),p(h)})}h.video=a(h.video)}return m4("chrome: "+JSON.stringify(h)),p(h)},u=function(h){return n.version>=64?h:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[h.name]||h.name,message:h.message,constraint:h.constraint||h.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(i.getUserMedia=(function(h,p,m){l(h,E=>{i.webkitGetUserMedia(E,p,S=>{m&&m(u(S))})})}).bind(i),i.mediaDevices.getUserMedia){const h=i.mediaDevices.getUserMedia.bind(i.mediaDevices);i.mediaDevices.getUserMedia=function(p){return l(p,m=>h(m).then(E=>{if(m.audio&&!E.getAudioTracks().length||m.video&&!E.getVideoTracks().length)throw E.getTracks().forEach(S=>{S.stop()}),new DOMException("","NotFoundError");return E},E=>et.reject(u(E))))}}}function v4(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function E4(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(i){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=i)},enumerable:!0,configurable:!0});const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=i=>{i.stream.addEventListener("addtrack",a=>{let l;l=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(h=>h.track&&h.track.id===a.track.id):{track:a.track};const u=new Event("track");u.track=a.track,u.receiver=l,u.transceiver={receiver:l},u.streams=[i.stream],this.dispatchEvent(u)}),i.stream.getTracks().forEach(a=>{let l;l=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(h=>h.track&&h.track.id===a.id):{track:a};const u=new Event("track");u.track=a,u.receiver=l,u.transceiver={receiver:l},u.streams=[i.stream],this.dispatchEvent(u)})},this.addEventListener("addstream",this._ontrackpoly)),n.apply(this,arguments)}}else Gd(e,"track",n=>(n.transceiver||Object.defineProperty(n,"transceiver",{value:{receiver:n.receiver}}),n))}function _4(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const n=function(l,u){return{track:u,get dtmf(){return this._dtmf===void 0&&(u.kind==="audio"?this._dtmf=l.createDTMFSender(u):this._dtmf=null),this._dtmf},_pc:l}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const l=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(h,p){let m=l.apply(this,arguments);return m||(m=n(this,h),this._senders.push(m)),m};const u=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(h){u.apply(this,arguments);const p=this._senders.indexOf(h);p!==-1&&this._senders.splice(p,1)}}const i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(l){this._senders=this._senders||[],i.apply(this,[l]),l.getTracks().forEach(u=>{this._senders.push(n(this,u))})};const a=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(l){this._senders=this._senders||[],a.apply(this,[l]),l.getTracks().forEach(u=>{const h=this._senders.find(p=>p.track===u);h&&this._senders.splice(this._senders.indexOf(h),1)})}}else if(typeof e=="object"&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const n=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const i=n.apply(this,[]);return i.forEach(a=>a._pc=this),i},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function S4(e){if(!e.RTCPeerConnection)return;const n=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[i,a,l]=arguments;if(arguments.length>0&&typeof i=="function")return n.apply(this,arguments);if(n.length===0&&(arguments.length===0||typeof i!="function"))return n.apply(this,[]);const u=function(p){const m={};return p.result().forEach(E=>{const S={id:E.id,timestamp:E.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[E.type]||E.type};E.names().forEach(R=>{S[R]=E.stat(R)}),m[S.id]=S}),m},h=function(p){return new Map(Object.keys(p).map(m=>[m,p[m]]))};if(arguments.length>=2){const p=function(m){a(h(u(m)))};return n.apply(this,[p,i])}return new et((p,m)=>{n.apply(this,[function(E){p(h(u(E)))},m])}).then(a,l)}}function y4(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const i=e.RTCPeerConnection.prototype.getSenders;i&&(e.RTCPeerConnection.prototype.getSenders=function(){const l=i.apply(this,[]);return l.forEach(u=>u._pc=this),l});const a=e.RTCPeerConnection.prototype.addTrack;a&&(e.RTCPeerConnection.prototype.addTrack=function(){const l=a.apply(this,arguments);return l._pc=this,l}),e.RTCRtpSender.prototype.getStats=function(){const l=this;return this._pc.getStats().then(u=>p4(u,l.track,!0))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const i=e.RTCPeerConnection.prototype.getReceivers;i&&(e.RTCPeerConnection.prototype.getReceivers=function(){const a=i.apply(this,[]);return a.forEach(l=>l._pc=this),a}),Gd(e,"track",a=>(a.receiver._pc=a.srcElement,a)),e.RTCRtpReceiver.prototype.getStats=function(){const a=this;return this._pc.getStats().then(l=>p4(l,a.track,!1))}}if(!("getStats"in e.RTCRtpSender.prototype)||!("getStats"in e.RTCRtpReceiver.prototype))return;const n=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const i=arguments[0];let a,l,u;return this.getSenders().forEach(h=>{h.track===i&&(a?u=!0:a=h)}),this.getReceivers().forEach(h=>(h.track===i&&(l?u=!0:l=h),h.track===i)),u||a&&l?et.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):a?a.getStats():l?l.getStats():et.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return n.apply(this,arguments)}}function C4(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(u=>this._shimmedLocalStreams[u][0])};const n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(u,h){if(!h)return n.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const p=n.apply(this,arguments);return this._shimmedLocalStreams[h.id]?this._shimmedLocalStreams[h.id].indexOf(p)===-1&&this._shimmedLocalStreams[h.id].push(p):this._shimmedLocalStreams[h.id]=[h,p],p};const i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(u){this._shimmedLocalStreams=this._shimmedLocalStreams||{},u.getTracks().forEach(m=>{if(this.getSenders().find(S=>S.track===m))throw new DOMException("Track already exists.","InvalidAccessError")});const h=this.getSenders();i.apply(this,arguments);const p=this.getSenders().filter(m=>h.indexOf(m)===-1);this._shimmedLocalStreams[u.id]=[u].concat(p)};const a=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(u){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[u.id],a.apply(this,arguments)};const l=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(u){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},u&&Object.keys(this._shimmedLocalStreams).forEach(h=>{const p=this._shimmedLocalStreams[h].indexOf(u);p!==-1&&this._shimmedLocalStreams[h].splice(p,1),this._shimmedLocalStreams[h].length===1&&delete this._shimmedLocalStreams[h]}),l.apply(this,arguments)}}function b4(e,n){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&n.version>=65)return C4(e);const i=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const m=i.apply(this);return this._reverseStreams=this._reverseStreams||{},m.map(E=>this._reverseStreams[E.id])};const a=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(m){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},m.getTracks().forEach(E=>{if(this.getSenders().find(R=>R.track===E))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[m.id]){const E=new e.MediaStream(m.getTracks());this._streams[m.id]=E,this._reverseStreams[E.id]=m,m=E}a.apply(this,[m])};const l=e.RTCPeerConnection.prototype.removeStream;function u(m,E){let S=E.sdp;return Object.keys(m._reverseStreams||[]).forEach(R=>{const w=m._reverseStreams[R],O=m._streams[w.id];S=S.replace(new RegExp(O.id,"g"),w.id)}),new RTCSessionDescription({type:E.type,sdp:S})}e.RTCPeerConnection.prototype.removeStream=function(m){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},l.apply(this,[this._streams[m.id]||m]),delete this._reverseStreams[this._streams[m.id]?this._streams[m.id].id:m.id],delete this._streams[m.id]},e.RTCPeerConnection.prototype.addTrack=function(m,E){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const S=[].slice.call(arguments,1);if(S.length!==1||!S[0].getTracks().find(O=>O===m))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(O=>O.track===m))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const w=this._streams[E.id];if(w)w.addTrack(m),et.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const O=new e.MediaStream([m]);this._streams[E.id]=O,this._reverseStreams[O.id]=E,this.addStream(O)}return this.getSenders().find(O=>O.track===m)},["createOffer","createAnswer"].forEach(function(m){const E=e.RTCPeerConnection.prototype[m],S={[m](){const R=arguments;return arguments.length&&typeof arguments[0]=="function"?E.apply(this,[w=>{const O=u(this,w);R[0].apply(null,[O])},w=>{R[1]&&R[1].apply(null,w)},arguments[2]]):E.apply(this,arguments).then(w=>u(this,w))}};e.RTCPeerConnection.prototype[m]=S[m]});const h=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=function(m,E){let S=E.sdp;return Object.keys(m._reverseStreams||[]).forEach(R=>{const w=m._reverseStreams[R],O=m._streams[w.id];S=S.replace(new RegExp(w.id,"g"),O.id)}),new RTCSessionDescription({type:E.type,sdp:S})}(this,arguments[0]),h.apply(this,arguments)):h.apply(this,arguments)};const p=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const m=p.get.apply(this);return m.type===""?m:u(this,m)}}),e.RTCPeerConnection.prototype.removeTrack=function(m){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!m._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(m._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let E;this._streams=this._streams||{},Object.keys(this._streams).forEach(S=>{this._streams[S].getTracks().find(R=>m.track===R)&&(E=this._streams[S])}),E&&(E.getTracks().length===1?this.removeStream(this._reverseStreams[E.id]):E.removeTrack(m.track),this.dispatchEvent(new Event("negotiationneeded")))}}function zR(e,n){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&n.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){const a=e.RTCPeerConnection.prototype[i],l={[i](){return arguments[0]=new(i==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),a.apply(this,arguments)}};e.RTCPeerConnection.prototype[i]=l[i]})}function T4(e,n){Gd(e,"negotiationneeded",i=>{const a=i.target;if(!(n.version<72||a.getConfiguration&&a.getConfiguration().sdpSemantics==="plan-b")||a.signalingState==="stable")return i})}var R4=Object.freeze({__proto__:null,fixNegotiationNeeded:T4,shimAddTrackRemoveTrack:b4,shimAddTrackRemoveTrackWithNative:C4,shimGetDisplayMedia:function(e,n){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(typeof n=="function"?e.navigator.mediaDevices.getDisplayMedia=function(i){return n(i).then(a=>{const l=i.video&&i.video.width,u=i.video&&i.video.height,h=i.video&&i.video.frameRate;return i.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:a,maxFrameRate:h||3}},l&&(i.video.mandatory.maxWidth=l),u&&(i.video.mandatory.maxHeight=u),e.navigator.mediaDevices.getUserMedia(i)})}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))},shimGetSendersWithDtmf:_4,shimGetStats:S4,shimGetUserMedia:g4,shimMediaStream:v4,shimOnTrack:E4,shimPeerConnection:zR,shimSenderReceiverGetStats:y4});function w4(e,n){const i=e&&e.navigator,a=e&&e.MediaStreamTrack;if(i.getUserMedia=function(l,u,h){$R("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),i.mediaDevices.getUserMedia(l).then(u,h)},!(n.version>55&&"autoGainControl"in i.mediaDevices.getSupportedConstraints())){const l=function(h,p,m){p in h&&!(m in h)&&(h[m]=h[p],delete h[p])},u=i.mediaDevices.getUserMedia.bind(i.mediaDevices);if(i.mediaDevices.getUserMedia=function(h){return typeof h=="object"&&typeof h.audio=="object"&&(h=JSON.parse(JSON.stringify(h)),l(h.audio,"autoGainControl","mozAutoGainControl"),l(h.audio,"noiseSuppression","mozNoiseSuppression")),u(h)},a&&a.prototype.getSettings){const h=a.prototype.getSettings;a.prototype.getSettings=function(){const p=h.apply(this,arguments);return l(p,"mozAutoGainControl","autoGainControl"),l(p,"mozNoiseSuppression","noiseSuppression"),p}}if(a&&a.prototype.applyConstraints){const h=a.prototype.applyConstraints;a.prototype.applyConstraints=function(p){return this.kind==="audio"&&typeof p=="object"&&(p=JSON.parse(JSON.stringify(p)),l(p,"autoGainControl","mozAutoGainControl"),l(p,"noiseSuppression","mozNoiseSuppression")),h.apply(this,[p])}}}}function I4(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function WR(e,n){if(typeof e!="object"||!e.RTCPeerConnection&&!e.mozRTCPeerConnection)return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),n.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(l){const u=e.RTCPeerConnection.prototype[l],h={[l](){return arguments[0]=new(l==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),u.apply(this,arguments)}};e.RTCPeerConnection.prototype[l]=h[l]});const i={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},a=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[l,u,h]=arguments;return a.apply(this,[l||null]).then(p=>{if(n.version<53&&!u)try{p.forEach(m=>{m.type=i[m.type]||m.type})}catch(m){if(m.name!=="TypeError")throw m;p.forEach((E,S)=>{p.set(S,Object.assign({},E,{type:i[E.type]||E.type}))})}return p}).then(u,h)}}function A4(e){if(typeof e!="object"||!e.RTCPeerConnection||!e.RTCRtpSender||e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const n=e.RTCPeerConnection.prototype.getSenders;n&&(e.RTCPeerConnection.prototype.getSenders=function(){const a=n.apply(this,[]);return a.forEach(l=>l._pc=this),a});const i=e.RTCPeerConnection.prototype.addTrack;i&&(e.RTCPeerConnection.prototype.addTrack=function(){const a=i.apply(this,arguments);return a._pc=this,a}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):et.resolve(new Map)}}function O4(e){if(typeof e!="object"||!e.RTCPeerConnection||!e.RTCRtpSender||e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const n=e.RTCPeerConnection.prototype.getReceivers;n&&(e.RTCPeerConnection.prototype.getReceivers=function(){const i=n.apply(this,[]);return i.forEach(a=>a._pc=this),i}),Gd(e,"track",i=>(i.receiver._pc=i.srcElement,i)),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function x4(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(n){$R("removeStream","removeTrack"),this.getSenders().forEach(i=>{var a;i.track&&Ge(a=n.getTracks()).call(a,i.track)&&this.removeTrack(i)})})}function N4(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function P4(e){if(typeof e!="object"||!e.RTCPeerConnection)return;const n=e.RTCPeerConnection.prototype.addTransceiver;n&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let i=arguments[1]&&arguments[1].sendEncodings;i===void 0&&(i=[]),i=[...i];const a=i.length>0;a&&i.forEach(u=>{if("rid"in u&&!/^[a-z0-9]{0,16}$/i.test(u.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in u&&!(parseFloat(u.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in u&&!(parseFloat(u.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const l=n.apply(this,arguments);if(a){const{sender:u}=l,h=u.getParameters();(!("encodings"in h)||h.encodings.length===1&&Object.keys(h.encodings[0]).length===0)&&(h.encodings=i,u.sendEncodings=i,this.setParametersPromises.push(u.setParameters(h).then(()=>{delete u.sendEncodings}).catch(()=>{delete u.sendEncodings})))}return l})}function D4(e){if(typeof e!="object"||!e.RTCRtpSender)return;const n=e.RTCRtpSender.prototype.getParameters;n&&(e.RTCRtpSender.prototype.getParameters=function(){const i=n.apply(this,arguments);return"encodings"in i||(i.encodings=[].concat(this.sendEncodings||[{}])),i})}function L4(e){if(typeof e!="object"||!e.RTCPeerConnection)return;const n=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?et.all(this.setParametersPromises).then(()=>n.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):n.apply(this,arguments)}}function k4(e){if(typeof e!="object"||!e.RTCPeerConnection)return;const n=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?et.all(this.setParametersPromises).then(()=>n.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):n.apply(this,arguments)}}var M4=Object.freeze({__proto__:null,shimAddTransceiver:P4,shimCreateAnswer:k4,shimCreateOffer:L4,shimGetDisplayMedia:function(e,n){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(i){if(!i||!i.video){const a=new DOMException("getDisplayMedia without video constraints is undefined");return a.name="NotFoundError",a.code=8,et.reject(a)}return i.video===!0?i.video={mediaSource:n}:i.video.mediaSource=n,e.navigator.mediaDevices.getUserMedia(i)})},shimGetParameters:D4,shimGetUserMedia:w4,shimOnTrack:I4,shimPeerConnection:WR,shimRTCDataChannel:N4,shimReceiverGetStats:O4,shimRemoveStream:x4,shimSenderGetStats:A4});function F4(e){if(typeof e=="object"&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(i){var a;this._localStreams||(this._localStreams=[]),Ge(a=this._localStreams).call(a,i)||this._localStreams.push(i),i.getAudioTracks().forEach(l=>n.call(this,l,i)),i.getVideoTracks().forEach(l=>n.call(this,l,i))},e.RTCPeerConnection.prototype.addTrack=function(i){for(var a=arguments.length,l=new Array(a>1?a-1:0),u=1;u<a;u++)l[u-1]=arguments[u];return l&&l.forEach(h=>{var p;this._localStreams?Ge(p=this._localStreams).call(p,h)||this._localStreams.push(h):this._localStreams=[h]}),n.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const i=this._localStreams.indexOf(n);if(i===-1)return;this._localStreams.splice(i,1);const a=n.getTracks();this.getSenders().forEach(l=>{Ge(a).call(a,l.track)&&this.removeTrack(l)})})}}function U4(e){if(typeof e=="object"&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(i){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=i),this.addEventListener("track",this._onaddstreampoly=a=>{a.streams.forEach(l=>{var u;if(this._remoteStreams||(this._remoteStreams=[]),Ge(u=this._remoteStreams).call(u,l))return;this._remoteStreams.push(l);const h=new Event("addstream");h.stream=l,this.dispatchEvent(h)})})}});const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const i=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(a){a.streams.forEach(l=>{if(i._remoteStreams||(i._remoteStreams=[]),i._remoteStreams.indexOf(l)>=0)return;i._remoteStreams.push(l);const u=new Event("addstream");u.stream=l,i.dispatchEvent(u)})}),n.apply(i,arguments)}}}function B4(e){if(typeof e!="object"||!e.RTCPeerConnection)return;const n=e.RTCPeerConnection.prototype,i=n.createOffer,a=n.createAnswer,l=n.setLocalDescription,u=n.setRemoteDescription,h=n.addIceCandidate;n.createOffer=function(m,E){const S=arguments.length>=2?arguments[2]:arguments[0],R=i.apply(this,[S]);return E?(R.then(m,E),et.resolve()):R},n.createAnswer=function(m,E){const S=arguments.length>=2?arguments[2]:arguments[0],R=a.apply(this,[S]);return E?(R.then(m,E),et.resolve()):R};let p=function(m,E,S){const R=l.apply(this,[m]);return S?(R.then(E,S),et.resolve()):R};n.setLocalDescription=p,p=function(m,E,S){const R=u.apply(this,[m]);return S?(R.then(E,S),et.resolve()):R},n.setRemoteDescription=p,p=function(m,E,S){const R=h.apply(this,[m]);return S?(R.then(E,S),et.resolve()):R},n.addIceCandidate=p}function V4(e){const n=e&&e.navigator;if(n.mediaDevices&&n.mediaDevices.getUserMedia){const i=n.mediaDevices,a=i.getUserMedia.bind(i);n.mediaDevices.getUserMedia=l=>a(j4(l))}!n.getUserMedia&&n.mediaDevices&&n.mediaDevices.getUserMedia&&(n.getUserMedia=(function(i,a,l){n.mediaDevices.getUserMedia(i).then(a,l)}).bind(n))}function j4(e){return e&&e.video!==void 0?Object.assign({},e,{video:f4(e.video)}):e}function $4(e){if(!e.RTCPeerConnection)return;const n=e.RTCPeerConnection;e.RTCPeerConnection=function(i,a){if(i&&i.iceServers){const l=[];for(let u=0;u<i.iceServers.length;u++){let h=i.iceServers[u];!h.hasOwnProperty("urls")&&h.hasOwnProperty("url")?($R("RTCIceServer.url","RTCIceServer.urls"),h=JSON.parse(JSON.stringify(h)),h.urls=h.url,delete h.url,l.push(h)):l.push(i.iceServers[u])}i.iceServers=l}return new n(i,a)},e.RTCPeerConnection.prototype=n.prototype,"generateCertificate"in n&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:()=>n.generateCertificate})}function H4(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function z4(e){const n=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(i){if(i){i.offerToReceiveAudio!==void 0&&(i.offerToReceiveAudio=!!i.offerToReceiveAudio);const a=this.getTransceivers().find(u=>u.receiver.track.kind==="audio");i.offerToReceiveAudio===!1&&a?a.direction==="sendrecv"?a.setDirection?a.setDirection("sendonly"):a.direction="sendonly":a.direction==="recvonly"&&(a.setDirection?a.setDirection("inactive"):a.direction="inactive"):i.offerToReceiveAudio!==!0||a||this.addTransceiver("audio",{direction:"recvonly"}),i.offerToReceiveVideo!==void 0&&(i.offerToReceiveVideo=!!i.offerToReceiveVideo);const l=this.getTransceivers().find(u=>u.receiver.track.kind==="video");i.offerToReceiveVideo===!1&&l?l.direction==="sendrecv"?l.setDirection?l.setDirection("sendonly"):l.direction="sendonly":l.direction==="recvonly"&&(l.setDirection?l.setDirection("inactive"):l.direction="inactive"):i.offerToReceiveVideo!==!0||l||this.addTransceiver("video",{direction:"recvonly"})}return n.apply(this,arguments)}}function W4(e){typeof e!="object"||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}var G4=Object.freeze({__proto__:null,shimAudioContext:W4,shimCallbacksAPI:B4,shimConstraints:j4,shimCreateOfferLegacy:z4,shimGetUserMedia:V4,shimLocalStreamsAPI:F4,shimRTCIceServerUrls:$4,shimRemoteStreamsAPI:U4,shimTrackEventTransceiver:H4}),K4=`	
\v\f\r                　\u2028\u2029\uFEFF`,nle=$e,rle=Ua,GR=K4,Y4=b("".replace),ile=RegExp("^["+GR+"]+"),ole=RegExp("(^|[^"+GR+"])["+GR+"]+$"),KR=function(e){return function(n){var i=rle(nle(n));return 1&e&&(i=Y4(i,ile,"")),2&e&&(i=Y4(i,ole,"$1")),i}},ale={start:KR(1),end:KR(2),trim:KR(3)},sle=xk.PROPER,cle=d,q4=K4,lle=ale.trim;Vn({target:"String",proto:!0,forced:function(e){return cle(function(){return!!q4[e]()||"​᠎"[e]()!=="​᠎"||sle&&q4[e].name!==e})}("trim")},{trim:function(){return lle(this)}});var ule=ks("String","trim"),dle=T,hle=ule,YR=String.prototype,fle=function(e){var n=e.trim;return typeof e=="string"||e===YR||dle(YR,e)&&n===YR.trim?hle:n},yo=c(fle),X4={exports:{}};(function(e){const n={generateIdentifier:function(){return Math.random().toString(36).substring(2,12)}};n.localCName=n.generateIdentifier(),n.splitLines=function(i){return i.trim().split(`
`).map(a=>a.trim())},n.splitSections=function(i){return i.split(`
m=`).map((a,l)=>(l>0?"m="+a:a).trim()+`\r
`)},n.getDescription=function(i){const a=n.splitSections(i);return a&&a[0]},n.getMediaSections=function(i){const a=n.splitSections(i);return a.shift(),a},n.matchPrefix=function(i,a){return n.splitLines(i).filter(l=>l.indexOf(a)===0)},n.parseCandidate=function(i){let a;a=i.indexOf("a=candidate:")===0?i.substring(12).split(" "):i.substring(10).split(" ");const l={foundation:a[0],component:{1:"rtp",2:"rtcp"}[a[1]]||a[1],protocol:a[2].toLowerCase(),priority:parseInt(a[3],10),ip:a[4],address:a[4],port:parseInt(a[5],10),type:a[7]};for(let u=8;u<a.length;u+=2)switch(a[u]){case"raddr":l.relatedAddress=a[u+1];break;case"rport":l.relatedPort=parseInt(a[u+1],10);break;case"tcptype":l.tcpType=a[u+1];break;case"ufrag":l.ufrag=a[u+1],l.usernameFragment=a[u+1];break;default:l[a[u]]===void 0&&(l[a[u]]=a[u+1])}return l},n.writeCandidate=function(i){const a=[];a.push(i.foundation);const l=i.component;l==="rtp"?a.push(1):l==="rtcp"?a.push(2):a.push(l),a.push(i.protocol.toUpperCase()),a.push(i.priority),a.push(i.address||i.ip),a.push(i.port);const u=i.type;return a.push("typ"),a.push(u),u!=="host"&&i.relatedAddress&&i.relatedPort&&(a.push("raddr"),a.push(i.relatedAddress),a.push("rport"),a.push(i.relatedPort)),i.tcpType&&i.protocol.toLowerCase()==="tcp"&&(a.push("tcptype"),a.push(i.tcpType)),(i.usernameFragment||i.ufrag)&&(a.push("ufrag"),a.push(i.usernameFragment||i.ufrag)),"candidate:"+a.join(" ")},n.parseIceOptions=function(i){return i.substring(14).split(" ")},n.parseRtpMap=function(i){let a=i.substring(9).split(" ");const l={payloadType:parseInt(a.shift(),10)};return a=a[0].split("/"),l.name=a[0],l.clockRate=parseInt(a[1],10),l.channels=a.length===3?parseInt(a[2],10):1,l.numChannels=l.channels,l},n.writeRtpMap=function(i){let a=i.payloadType;i.preferredPayloadType!==void 0&&(a=i.preferredPayloadType);const l=i.channels||i.numChannels||1;return"a=rtpmap:"+a+" "+i.name+"/"+i.clockRate+(l!==1?"/"+l:"")+`\r
`},n.parseExtmap=function(i){const a=i.substring(9).split(" ");return{id:parseInt(a[0],10),direction:a[0].indexOf("/")>0?a[0].split("/")[1]:"sendrecv",uri:a[1],attributes:a.slice(2).join(" ")}},n.writeExtmap=function(i){return"a=extmap:"+(i.id||i.preferredId)+(i.direction&&i.direction!=="sendrecv"?"/"+i.direction:"")+" "+i.uri+(i.attributes?" "+i.attributes:"")+`\r
`},n.parseFmtp=function(i){const a={};let l;const u=i.substring(i.indexOf(" ")+1).split(";");for(let h=0;h<u.length;h++)l=u[h].trim().split("="),a[l[0].trim()]=l[1];return a},n.writeFmtp=function(i){let a="",l=i.payloadType;if(i.preferredPayloadType!==void 0&&(l=i.preferredPayloadType),i.parameters&&Object.keys(i.parameters).length){const u=[];Object.keys(i.parameters).forEach(h=>{i.parameters[h]!==void 0?u.push(h+"="+i.parameters[h]):u.push(h)}),a+="a=fmtp:"+l+" "+u.join(";")+`\r
`}return a},n.parseRtcpFb=function(i){const a=i.substring(i.indexOf(" ")+1).split(" ");return{type:a.shift(),parameter:a.join(" ")}},n.writeRtcpFb=function(i){let a="",l=i.payloadType;return i.preferredPayloadType!==void 0&&(l=i.preferredPayloadType),i.rtcpFeedback&&i.rtcpFeedback.length&&i.rtcpFeedback.forEach(u=>{a+="a=rtcp-fb:"+l+" "+u.type+(u.parameter&&u.parameter.length?" "+u.parameter:"")+`\r
`}),a},n.parseSsrcMedia=function(i){const a=i.indexOf(" "),l={ssrc:parseInt(i.substring(7,a),10)},u=i.indexOf(":",a);return u>-1?(l.attribute=i.substring(a+1,u),l.value=i.substring(u+1)):l.attribute=i.substring(a+1),l},n.parseSsrcGroup=function(i){const a=i.substring(13).split(" ");return{semantics:a.shift(),ssrcs:a.map(l=>parseInt(l,10))}},n.getMid=function(i){const a=n.matchPrefix(i,"a=mid:")[0];if(a)return a.substring(6)},n.parseFingerprint=function(i){const a=i.substring(14).split(" ");return{algorithm:a[0].toLowerCase(),value:a[1].toUpperCase()}},n.getDtlsParameters=function(i,a){return{role:"auto",fingerprints:n.matchPrefix(i+a,"a=fingerprint:").map(n.parseFingerprint)}},n.writeDtlsParameters=function(i,a){let l="a=setup:"+a+`\r
`;return i.fingerprints.forEach(u=>{l+="a=fingerprint:"+u.algorithm+" "+u.value+`\r
`}),l},n.parseCryptoLine=function(i){const a=i.substring(9).split(" ");return{tag:parseInt(a[0],10),cryptoSuite:a[1],keyParams:a[2],sessionParams:a.slice(3)}},n.writeCryptoLine=function(i){return"a=crypto:"+i.tag+" "+i.cryptoSuite+" "+(typeof i.keyParams=="object"?n.writeCryptoKeyParams(i.keyParams):i.keyParams)+(i.sessionParams?" "+i.sessionParams.join(" "):"")+`\r
`},n.parseCryptoKeyParams=function(i){if(i.indexOf("inline:")!==0)return null;const a=i.substring(7).split("|");return{keyMethod:"inline",keySalt:a[0],lifeTime:a[1],mkiValue:a[2]?a[2].split(":")[0]:void 0,mkiLength:a[2]?a[2].split(":")[1]:void 0}},n.writeCryptoKeyParams=function(i){return i.keyMethod+":"+i.keySalt+(i.lifeTime?"|"+i.lifeTime:"")+(i.mkiValue&&i.mkiLength?"|"+i.mkiValue+":"+i.mkiLength:"")},n.getCryptoParameters=function(i,a){return n.matchPrefix(i+a,"a=crypto:").map(n.parseCryptoLine)},n.getIceParameters=function(i,a){const l=n.matchPrefix(i+a,"a=ice-ufrag:")[0],u=n.matchPrefix(i+a,"a=ice-pwd:")[0];return l&&u?{usernameFragment:l.substring(12),password:u.substring(10)}:null},n.writeIceParameters=function(i){let a="a=ice-ufrag:"+i.usernameFragment+`\r
a=ice-pwd:`+i.password+`\r
`;return i.iceLite&&(a+=`a=ice-lite\r
`),a},n.parseRtpParameters=function(i){const a={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},l=n.splitLines(i)[0].split(" ");a.profile=l[2];for(let h=3;h<l.length;h++){const p=l[h],m=n.matchPrefix(i,"a=rtpmap:"+p+" ")[0];if(m){const E=n.parseRtpMap(m),S=n.matchPrefix(i,"a=fmtp:"+p+" ");switch(E.parameters=S.length?n.parseFmtp(S[0]):{},E.rtcpFeedback=n.matchPrefix(i,"a=rtcp-fb:"+p+" ").map(n.parseRtcpFb),a.codecs.push(E),E.name.toUpperCase()){case"RED":case"ULPFEC":a.fecMechanisms.push(E.name.toUpperCase())}}}n.matchPrefix(i,"a=extmap:").forEach(h=>{a.headerExtensions.push(n.parseExtmap(h))});const u=n.matchPrefix(i,"a=rtcp-fb:* ").map(n.parseRtcpFb);return a.codecs.forEach(h=>{u.forEach(p=>{h.rtcpFeedback.find(m=>m.type===p.type&&m.parameter===p.parameter)||h.rtcpFeedback.push(p)})}),a},n.writeRtpDescription=function(i,a){let l="";l+="m="+i+" ",l+=a.codecs.length>0?"9":"0",l+=" "+(a.profile||"UDP/TLS/RTP/SAVPF")+" ",l+=a.codecs.map(h=>h.preferredPayloadType!==void 0?h.preferredPayloadType:h.payloadType).join(" ")+`\r
`,l+=`c=IN IP4 0.0.0.0\r
`,l+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,a.codecs.forEach(h=>{l+=n.writeRtpMap(h),l+=n.writeFmtp(h),l+=n.writeRtcpFb(h)});let u=0;return a.codecs.forEach(h=>{h.maxptime>u&&(u=h.maxptime)}),u>0&&(l+="a=maxptime:"+u+`\r
`),a.headerExtensions&&a.headerExtensions.forEach(h=>{l+=n.writeExtmap(h)}),l},n.parseRtpEncodingParameters=function(i){const a=[],l=n.parseRtpParameters(i),u=l.fecMechanisms.indexOf("RED")!==-1,h=l.fecMechanisms.indexOf("ULPFEC")!==-1,p=n.matchPrefix(i,"a=ssrc:").map(w=>n.parseSsrcMedia(w)).filter(w=>w.attribute==="cname"),m=p.length>0&&p[0].ssrc;let E;const S=n.matchPrefix(i,"a=ssrc-group:FID").map(w=>w.substring(17).split(" ").map(O=>parseInt(O,10)));S.length>0&&S[0].length>1&&S[0][0]===m&&(E=S[0][1]),l.codecs.forEach(w=>{if(w.name.toUpperCase()==="RTX"&&w.parameters.apt){let O={ssrc:m,codecPayloadType:parseInt(w.parameters.apt,10)};m&&E&&(O.rtx={ssrc:E}),a.push(O),u&&(O=JSON.parse(JSON.stringify(O)),O.fec={ssrc:m,mechanism:h?"red+ulpfec":"red"},a.push(O))}}),a.length===0&&m&&a.push({ssrc:m});let R=n.matchPrefix(i,"b=");return R.length&&(R=R[0].indexOf("b=TIAS:")===0?parseInt(R[0].substring(7),10):R[0].indexOf("b=AS:")===0?1e3*parseInt(R[0].substring(5),10)*.95-16e3:void 0,a.forEach(w=>{w.maxBitrate=R})),a},n.parseRtcpParameters=function(i){const a={},l=n.matchPrefix(i,"a=ssrc:").map(p=>n.parseSsrcMedia(p)).filter(p=>p.attribute==="cname")[0];l&&(a.cname=l.value,a.ssrc=l.ssrc);const u=n.matchPrefix(i,"a=rtcp-rsize");a.reducedSize=u.length>0,a.compound=u.length===0;const h=n.matchPrefix(i,"a=rtcp-mux");return a.mux=h.length>0,a},n.writeRtcpParameters=function(i){let a="";return i.reducedSize&&(a+=`a=rtcp-rsize\r
`),i.mux&&(a+=`a=rtcp-mux\r
`),i.ssrc!==void 0&&i.cname&&(a+="a=ssrc:"+i.ssrc+" cname:"+i.cname+`\r
`),a},n.parseMsid=function(i){let a;const l=n.matchPrefix(i,"a=msid:");if(l.length===1)return a=l[0].substring(7).split(" "),{stream:a[0],track:a[1]};const u=n.matchPrefix(i,"a=ssrc:").map(h=>n.parseSsrcMedia(h)).filter(h=>h.attribute==="msid");return u.length>0?(a=u[0].value.split(" "),{stream:a[0],track:a[1]}):void 0},n.parseSctpDescription=function(i){const a=n.parseMLine(i),l=n.matchPrefix(i,"a=max-message-size:");let u;l.length>0&&(u=parseInt(l[0].substring(19),10)),isNaN(u)&&(u=65536);const h=n.matchPrefix(i,"a=sctp-port:");if(h.length>0)return{port:parseInt(h[0].substring(12),10),protocol:a.fmt,maxMessageSize:u};const p=n.matchPrefix(i,"a=sctpmap:");if(p.length>0){const m=p[0].substring(10).split(" ");return{port:parseInt(m[0],10),protocol:m[1],maxMessageSize:u}}},n.writeSctpDescription=function(i,a){let l=[];return l=i.protocol!=="DTLS/SCTP"?["m="+i.kind+" 9 "+i.protocol+" "+a.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+a.port+`\r
`]:["m="+i.kind+" 9 "+i.protocol+" "+a.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+a.port+" "+a.protocol+` 65535\r
`],a.maxMessageSize!==void 0&&l.push("a=max-message-size:"+a.maxMessageSize+`\r
`),l.join("")},n.generateSessionId=function(){return Math.random().toString().substr(2,22)},n.writeSessionBoilerplate=function(i,a,l){let u;const h=a!==void 0?a:2;return u=i||n.generateSessionId(),`v=0\r
o=`+(l||"thisisadapterortc")+" "+u+" "+h+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},n.getDirection=function(i,a){const l=n.splitLines(i);for(let u=0;u<l.length;u++)switch(l[u]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return l[u].substring(2)}return a?n.getDirection(a):"sendrecv"},n.getKind=function(i){return n.splitLines(i)[0].split(" ")[0].substring(2)},n.isRejected=function(i){return i.split(" ",2)[1]==="0"},n.parseMLine=function(i){const a=n.splitLines(i)[0].substring(2).split(" ");return{kind:a[0],port:parseInt(a[1],10),protocol:a[2],fmt:a.slice(3).join(" ")}},n.parseOLine=function(i){const a=n.matchPrefix(i,"o=")[0].substring(2).split(" ");return{username:a[0],sessionId:a[1],sessionVersion:parseInt(a[2],10),netType:a[3],addressType:a[4],address:a[5]}},n.isValidSDP=function(i){if(typeof i!="string"||i.length===0)return!1;const a=n.splitLines(i);for(let l=0;l<a.length;l++)if(a[l].length<2||a[l].charAt(1)!=="=")return!1;return!0},e.exports=n})(X4);var J4=X4.exports,Nf=c(J4),ple=o({__proto__:null,default:Nf},[J4]);function a_(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const n=e.RTCIceCandidate;e.RTCIceCandidate=function(i){if(typeof i=="object"&&i.candidate&&i.candidate.indexOf("a=")===0&&((i=JSON.parse(JSON.stringify(i))).candidate=i.candidate.substr(2)),i.candidate&&i.candidate.length){const a=new n(i),l=Nf.parseCandidate(i.candidate),u=Object.assign(a,l);return u.toJSON=function(){return{candidate:u.candidate,sdpMid:u.sdpMid,sdpMLineIndex:u.sdpMLineIndex,usernameFragment:u.usernameFragment}},u}return new n(i)},e.RTCIceCandidate.prototype=n.prototype,Gd(e,"icecandidate",i=>(i.candidate&&Object.defineProperty(i,"candidate",{value:new e.RTCIceCandidate(i.candidate),writable:"false"}),i))}function qR(e){!e.RTCIceCandidate||e.RTCIceCandidate&&"relayProtocol"in e.RTCIceCandidate.prototype||Gd(e,"icecandidate",n=>{if(n.candidate){const i=Nf.parseCandidate(n.candidate.candidate);i.type==="relay"&&(n.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[i.priority>>24])}return n})}function s_(e,n){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return this._sctp===void 0?null:this._sctp}});const i=function(p){if(!p||!p.sdp)return!1;const m=Nf.splitSections(p.sdp);return m.shift(),m.some(E=>{const S=Nf.parseMLine(E);return S&&S.kind==="application"&&S.protocol.indexOf("SCTP")!==-1})},a=function(p){const m=p.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(m===null||m.length<2)return-1;const E=parseInt(m[1],10);return E!=E?-1:E},l=function(p){let m=65536;return n.browser==="firefox"&&(m=n.version<57?p===-1?16384:2147483637:n.version<60?n.version===57?65535:65536:2147483637),m},u=function(p,m){let E=65536;n.browser==="firefox"&&n.version===57&&(E=65535);const S=Nf.matchPrefix(p.sdp,"a=max-message-size:");return S.length>0?E=parseInt(S[0].substr(19),10):n.browser==="firefox"&&m!==-1&&(E=2147483637),E},h=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,n.browser==="chrome"&&n.version>=76){const{sdpSemantics:p}=this.getConfiguration();p==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return this._sctp===void 0?null:this._sctp},enumerable:!0,configurable:!0})}if(i(arguments[0])){const p=a(arguments[0]),m=l(p),E=u(arguments[0],p);let S;S=m===0&&E===0?Number.POSITIVE_INFINITY:m===0||E===0?Math.max(m,E):Math.min(m,E);const R={};Object.defineProperty(R,"maxMessageSize",{get:()=>S}),this._sctp=R}return h.apply(this,arguments)}}function c_(e){if(!e.RTCPeerConnection||!("createDataChannel"in e.RTCPeerConnection.prototype))return;function n(a,l){const u=a.send;a.send=function(){const h=arguments[0],p=h.length||h.size||h.byteLength;if(a.readyState==="open"&&l.sctp&&p>l.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+l.sctp.maxMessageSize+" bytes)");return u.apply(a,arguments)}}const i=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const a=i.apply(this,arguments);return n(a,this),a},Gd(e,"datachannel",a=>(n(a.channel,a.target),a))}function XR(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const n=e.RTCPeerConnection.prototype;Object.defineProperty(n,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(n,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(i){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),i&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=i)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(i=>{const a=n[i];n[i]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=l=>{const u=l.target;if(u._lastConnectionState!==u.connectionState){u._lastConnectionState=u.connectionState;const h=new Event("connectionstatechange",l);u.dispatchEvent(h)}return l},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),a.apply(this,arguments)}})}function JR(e,n){if(!e.RTCPeerConnection||n.browser==="chrome"&&n.version>=71||n.browser==="safari"&&n.version>=605)return;const i=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(a){if(a&&a.sdp&&a.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const l=a.sdp.split(`
`).filter(u=>yo(u).call(u)!=="a=extmap-allow-mixed").join(`
`);e.RTCSessionDescription&&a instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:a.type,sdp:l}):a.sdp=l}return i.apply(this,arguments)}}function l_(e,n){if(!e.RTCPeerConnection||!e.RTCPeerConnection.prototype)return;const i=e.RTCPeerConnection.prototype.addIceCandidate;i&&i.length!==0&&(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(n.browser==="chrome"&&n.version<78||n.browser==="firefox"&&n.version<68||n.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?et.resolve():i.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),et.resolve())})}function u_(e,n){if(!e.RTCPeerConnection||!e.RTCPeerConnection.prototype)return;const i=e.RTCPeerConnection.prototype.setLocalDescription;i&&i.length!==0&&(e.RTCPeerConnection.prototype.setLocalDescription=function(){let a=arguments[0]||{};if(typeof a!="object"||a.type&&a.sdp)return i.apply(this,arguments);if(a={type:a.type,sdp:a.sdp},!a.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":a.type="offer";break;default:a.type="answer"}return a.sdp||a.type!=="offer"&&a.type!=="answer"?i.apply(this,[a]):(a.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(l=>i.apply(this,[l]))})}var mle=Object.freeze({__proto__:null,removeExtmapAllowMixed:JR,shimAddIceCandidateNullOrEmpty:l_,shimConnectionState:XR,shimMaxMessageSize:s_,shimParameterlessSetLocalDescription:u_,shimRTCIceCandidate:a_,shimRTCIceCandidateRelayProtocol:qR,shimSendThrowTypeError:c_});(function(){let{window:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0};const i=d4,a=function(u){const h={browser:null,version:null};if(u===void 0||!u.navigator)return h.browser="Not a browser.",h;const{navigator:p}=u;if(p.mozGetUserMedia)h.browser="firefox",h.version=o_(p.userAgent,/Firefox\/(\d+)\./,1);else if(p.webkitGetUserMedia||u.isSecureContext===!1&&u.webkitRTCPeerConnection)h.browser="chrome",h.version=o_(p.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else{if(!u.RTCPeerConnection||!p.userAgent.match(/AppleWebKit\/(\d+)\./))return h.browser="Not a supported browser.",h;h.browser="safari",h.version=o_(p.userAgent,/AppleWebKit\/(\d+)\./,1),h.supportsUnifiedPlan=u.RTCRtpTransceiver&&"currentDirection"in u.RTCRtpTransceiver.prototype}return h}(e),l={browserDetails:a,commonShim:mle,extractVersion:o_,disableLog:ele,disableWarnings:tle,sdp:ple};switch(a.browser){case"chrome":if(!R4||!zR||!n.shimChrome)return i("Chrome shim is not included in this adapter release."),l;if(a.version===null)return i("Chrome shim can not determine version, not shimming."),l;i("adapter.js shimming chrome."),l.browserShim=R4,l_(e,a),u_(e),g4(e,a),v4(e),zR(e,a),E4(e),b4(e,a),_4(e),S4(e),y4(e),T4(e,a),a_(e),qR(e),XR(e),s_(e,a),c_(e),JR(e,a);break;case"firefox":if(!M4||!WR||!n.shimFirefox)return i("Firefox shim is not included in this adapter release."),l;i("adapter.js shimming firefox."),l.browserShim=M4,l_(e,a),u_(e),w4(e,a),WR(e,a),I4(e),x4(e),A4(e),O4(e),N4(e),P4(e),D4(e),L4(e),k4(e),a_(e),XR(e),s_(e,a),c_(e);break;case"safari":if(!G4||!n.shimSafari)return i("Safari shim is not included in this adapter release."),l;i("adapter.js shimming safari."),l.browserShim=G4,l_(e,a),u_(e),$4(e),z4(e),B4(e),F4(e),U4(e),H4(e),V4(e),W4(e),a_(e),qR(e),s_(e,a),c_(e),JR(e,a);break;default:i("Unsupported browser!")}})({window:typeof window>"u"?void 0:window});var QR=I;Vn({global:!0,forced:QR.globalThis!==QR},{globalThis:QR});var Q4=c(I),ZR={exports:{}};(function(e,n){(function(i,a){var l="function",u="undefined",h="object",p="string",m="major",E="model",S="name",R="type",w="vendor",O="version",H="architecture",B="console",j="mobile",q="tablet",Y="smarttv",Z="wearable",pe="embedded",he="Amazon",re="Apple",Se="ASUS",Ae="BlackBerry",Ne="Browser",Be="Chrome",nn="Firefox",sn="Google",Lt="Huawei",kn="LG",Nn="Microsoft",eo="Motorola",xe="Opera",We="Samsung",ot="Sharp",Pe="Sony",U="Xiaomi",ee="Zebra",ue="Facebook",He="Chromium OS",zt="Mac OS",tr=" Browser",hi=function(ni){for(var fi={},lr=0;lr<ni.length;lr++)fi[ni[lr].toUpperCase()]=ni[lr];return fi},vs=function(ni,fi){return typeof ni===p&&nc(fi).indexOf(nc(ni))!==-1},nc=function(ni){return ni.toLowerCase()},pg=function(ni,fi){if(typeof ni===p)return ni=ni.replace(/^\s\s*/,""),typeof fi===u?ni:ni.substring(0,500)},Sh=function(ni,fi){for(var lr,ha,Fc,zr,nu,bn,Uc=0;Uc<fi.length&&!nu;){var yh=fi[Uc],Rl=fi[Uc+1];for(lr=ha=0;lr<yh.length&&!nu&&yh[lr];)if(nu=yh[lr++].exec(ni))for(Fc=0;Fc<Rl.length;Fc++)bn=nu[++ha],typeof(zr=Rl[Fc])===h&&zr.length>0?zr.length===2?typeof zr[1]==l?this[zr[0]]=zr[1].call(this,bn):this[zr[0]]=zr[1]:zr.length===3?typeof zr[1]!==l||zr[1].exec&&zr[1].test?this[zr[0]]=bn?bn.replace(zr[1],zr[2]):a:this[zr[0]]=bn?zr[1].call(this,bn,zr[2]):a:zr.length===4&&(this[zr[0]]=bn?zr[3].call(this,bn.replace(zr[1],zr[2])):a):this[zr]=bn||a;Uc+=2}},wp=function(ni,fi){for(var lr in fi)if(typeof fi[lr]===h&&fi[lr].length>0){for(var ha=0;ha<fi[lr].length;ha++)if(vs(fi[lr][ha],ni))return lr==="?"?a:lr}else if(vs(fi[lr],ni))return lr==="?"?a:lr;return fi.hasOwnProperty("*")?fi["*"]:ni},sy={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},cy={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[O,[S,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[O,[S,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[S,O],[/opios[\/ ]+([\w\.]+)/i],[O,[S,xe+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[O,[S,xe+" GX"]],[/\bopr\/([\w\.]+)/i],[O,[S,xe]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[O,[S,"Baidu"]],[/\b(?:mxbrowser|mxios|myie2)\/?([-\w\.]*)\b/i],[O,[S,"Maxthon"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim(?:browser|boat|jet))[\/ ]?([\d\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio|(?=comodo_)?dragon)\/([-\w\.]+)/i,/(heytap|ovi|115)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[S,O],[/quark(?:pc)?\/([-\w\.]+)/i],[O,[S,"Quark"]],[/\bddg\/([\w\.]+)/i],[O,[S,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[O,[S,"UC"+Ne]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[O,[S,"WeChat"]],[/konqueror\/([\w\.]+)/i],[O,[S,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[O,[S,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[O,[S,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[O,[S,"Smart Lenovo "+Ne]],[/(avast|avg)\/([\w\.]+)/i],[[S,/(.+)/,"$1 Secure "+Ne],O],[/\bfocus\/([\w\.]+)/i],[O,[S,nn+" Focus"]],[/\bopt\/([\w\.]+)/i],[O,[S,xe+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[O,[S,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[O,[S,"Dolphin"]],[/coast\/([\w\.]+)/i],[O,[S,xe+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[O,[S,"MIUI"+tr]],[/fxios\/([\w\.-]+)/i],[O,[S,nn]],[/\bqihoobrowser\/?([\w\.]*)/i],[O,[S,"360"]],[/\b(qq)\/([\w\.]+)/i],[[S,/(.+)/,"$1Browser"],O],[/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i],[[S,/(.+)/,"$1"+tr],O],[/samsungbrowser\/([\w\.]+)/i],[O,[S,We+" Internet"]],[/metasr[\/ ]?([\d\.]+)/i],[O,[S,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[S,"Sogou Mobile"],O],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345(?=browser|chrome|explorer))\w*[\/ ]?v?([\w\.]+)/i],[S,O],[/(lbbrowser|rekonq)/i,/\[(linkedin)app\]/i],[S],[/ome\/([\w\.]+) \w* ?(iron) saf/i,/ome\/([\w\.]+).+qihu (360)[es]e/i],[O,S],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[S,ue],O],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[S,O],[/\bgsa\/([\w\.]+) .*safari\//i],[O,[S,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[O,[S,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[O,[S,Be+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[S,Be+" WebView"],O],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[O,[S,"Android "+Ne]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[S,O],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[O,[S,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[O,S],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[S,[O,wp,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[S,O],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[S,"Netscape"],O],[/(wolvic|librewolf)\/([\w\.]+)/i],[S,O],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[O,[S,nn+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[S,[O,/_/g,"."]],[/(cobalt)\/([\w\.]+)/i],[S,[O,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[H,"amd64"]],[/(ia32(?=;))/i],[[H,nc]],[/((?:i[346]|x)86)[;\)]/i],[[H,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[H,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[H,"armhf"]],[/windows (ce|mobile); ppc;/i],[[H,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[H,/ower/,"",nc]],[/(sun4\w)[;\)]/i],[[H,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[H,nc]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[E,[w,We],[R,q]],[/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]((?!sm-[lr])[-\w]+)/i,/sec-(sgh\w+)/i],[E,[w,We],[R,j]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[E,[w,re],[R,j]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[E,[w,re],[R,q]],[/(macintosh);/i],[E,[w,re]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[E,[w,ot],[R,j]],[/(?:honor)([-\w ]+)[;\)]/i],[E,[w,"Honor"],[R,j]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[E,[w,Lt],[R,q]],[/(?:huawei)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[E,[w,Lt],[R,j]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\))/i],[[E,/_/g," "],[w,U],[R,j]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[E,/_/g," "],[w,U],[R,q]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[E,[w,"OPPO"],[R,j]],[/\b(opd2\d{3}a?) bui/i],[E,[w,"OPPO"],[R,q]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[E,[w,"Vivo"],[R,j]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[E,[w,"Realme"],[R,j]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[E,[w,eo],[R,j]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[E,[w,eo],[R,q]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[E,[w,kn],[R,q]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[E,[w,kn],[R,j]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[E,[w,"Lenovo"],[R,q]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[E,/_/g," "],[w,"Nokia"],[R,j]],[/(pixel c)\b/i],[E,[w,sn],[R,q]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[E,[w,sn],[R,j]],[/droid.+; (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[E,[w,Pe],[R,j]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[E,"Xperia Tablet"],[w,Pe],[R,q]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[E,[w,"OnePlus"],[R,j]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[E,[w,he],[R,q]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[E,/(.+)/g,"Fire Phone $1"],[w,he],[R,j]],[/(playbook);[-\w\),; ]+(rim)/i],[E,w,[R,q]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[E,[w,Ae],[R,j]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[E,[w,Se],[R,q]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[E,[w,Se],[R,j]],[/(nexus 9)/i],[E,[w,"HTC"],[R,q]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[w,[E,/_/g," "],[R,j]],[/droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])\w*(\)| bui)/i],[E,[w,"TCL"],[R,q]],[/(itel) ((\w+))/i],[[w,nc],E,[R,wp,{tablet:["p10001l","w7001"],"*":"mobile"}]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[E,[w,"Acer"],[R,q]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[E,[w,"Meizu"],[R,j]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[E,[w,"Ulefone"],[R,j]],[/; (energy ?\w+)(?: bui|\))/i,/; energizer ([\w ]+)(?: bui|\))/i],[E,[w,"Energizer"],[R,j]],[/; cat (b35);/i,/; (b15q?|s22 flip|s48c|s62 pro)(?: bui|\))/i],[E,[w,"Cat"],[R,j]],[/((?:new )?andromax[\w- ]+)(?: bui|\))/i],[E,[w,"Smartfren"],[R,j]],[/droid.+; (a(?:015|06[35]|142p?))/i],[E,[w,"Nothing"],[R,j]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno|micromax|advan)[-_ ]?([-\w]*)/i,/; (imo) ((?!tab)[\w ]+?)(?: bui|\))/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[w,E,[R,j]],[/(imo) (tab \w+)/i,/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[w,E,[R,q]],[/(surface duo)/i],[E,[w,Nn],[R,q]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[E,[w,"Fairphone"],[R,j]],[/(u304aa)/i],[E,[w,"AT&T"],[R,j]],[/\bsie-(\w*)/i],[E,[w,"Siemens"],[R,j]],[/\b(rct\w+) b/i],[E,[w,"RCA"],[R,q]],[/\b(venue[\d ]{2,7}) b/i],[E,[w,"Dell"],[R,q]],[/\b(q(?:mv|ta)\w+) b/i],[E,[w,"Verizon"],[R,q]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[E,[w,"Barnes & Noble"],[R,q]],[/\b(tm\d{3}\w+) b/i],[E,[w,"NuVision"],[R,q]],[/\b(k88) b/i],[E,[w,"ZTE"],[R,q]],[/\b(nx\d{3}j) b/i],[E,[w,"ZTE"],[R,j]],[/\b(gen\d{3}) b.+49h/i],[E,[w,"Swiss"],[R,j]],[/\b(zur\d{3}) b/i],[E,[w,"Swiss"],[R,q]],[/\b((zeki)?tb.*\b) b/i],[E,[w,"Zeki"],[R,q]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[w,"Dragon Touch"],E,[R,q]],[/\b(ns-?\w{0,9}) b/i],[E,[w,"Insignia"],[R,q]],[/\b((nxa|next)-?\w{0,9}) b/i],[E,[w,"NextBook"],[R,q]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[w,"Voice"],E,[R,j]],[/\b(lvtel\-)?(v1[12]) b/i],[[w,"LvTel"],E,[R,j]],[/\b(ph-1) /i],[E,[w,"Essential"],[R,j]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[E,[w,"Envizen"],[R,q]],[/\b(trio[-\w\. ]+) b/i],[E,[w,"MachSpeed"],[R,q]],[/\btu_(1491) b/i],[E,[w,"Rotor"],[R,q]],[/(shield[\w ]+) b/i],[E,[w,"Nvidia"],[R,q]],[/(sprint) (\w+)/i],[w,E,[R,j]],[/(kin\.[onetw]{3})/i],[[E,/\./g," "],[w,Nn],[R,j]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[E,[w,ee],[R,q]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[E,[w,ee],[R,j]],[/smart-tv.+(samsung)/i],[w,[R,Y]],[/hbbtv.+maple;(\d+)/i],[[E,/^/,"SmartTV"],[w,We],[R,Y]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[w,kn],[R,Y]],[/(apple) ?tv/i],[w,[E,re+" TV"],[R,Y]],[/crkey/i],[[E,Be+"cast"],[w,sn],[R,Y]],[/droid.+aft(\w+)( bui|\))/i],[E,[w,he],[R,Y]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[E,[w,ot],[R,Y]],[/(bravia[\w ]+)( bui|\))/i],[E,[w,Pe],[R,Y]],[/(mitv-\w{5}) bui/i],[E,[w,U],[R,Y]],[/Hbbtv.*(technisat) (.*);/i],[w,E,[R,Y]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[w,pg],[E,pg],[R,Y]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[R,Y]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[w,E,[R,B]],[/droid.+; (shield) bui/i],[E,[w,"Nvidia"],[R,B]],[/(playstation [345portablevi]+)/i],[E,[w,Pe],[R,B]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[E,[w,Nn],[R,B]],[/\b(sm-[lr]\d\d[05][fnuw]?s?)\b/i],[E,[w,We],[R,Z]],[/((pebble))app/i],[w,E,[R,Z]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[E,[w,re],[R,Z]],[/droid.+; (glass) \d/i],[E,[w,sn],[R,Z]],[/droid.+; (wt63?0{2,3})\)/i],[E,[w,ee],[R,Z]],[/droid.+; (glass) \d/i],[E,[w,sn],[R,Z]],[/(pico) (4|neo3(?: link|pro)?)/i],[w,E,[R,Z]],[/; (quest( \d| pro)?)/i],[E,[w,ue],[R,Z]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[w,[R,pe]],[/(aeobc)\b/i],[E,[w,he],[R,pe]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[E,[R,j]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[E,[R,q]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[R,q]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[R,j]],[/(android[-\w\. ]{0,9});.+buil/i],[E,[w,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[O,[S,"EdgeHTML"]],[/(arkweb)\/([\w\.]+)/i],[S,O],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[O,[S,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna|servo)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[S,O],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[O,S]],os:[[/microsoft (windows) (vista|xp)/i],[S,O],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[S,[O,wp,sy]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[O,wp,sy],[S,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[O,/_/g,"."],[S,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[S,zt],[O,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[O,S],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish|openharmony)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[S,O],[/\(bb(10);/i],[O,[S,Ae]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[O,[S,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[O,[S,nn+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[O,[S,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[O,[S,"watchOS"]],[/crkey\/([\d\.]+)/i],[O,[S,Be+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[S,He],O],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[S,O],[/(sunos) ?([\w\.\d]*)/i],[[S,"Solaris"],O],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[S,O]]},Es=function(ni,fi){if(typeof ni===h&&(fi=ni,ni=a),!(this instanceof Es))return new Es(ni,fi).getResult();var lr=typeof i!==u&&i.navigator?i.navigator:a,ha=ni||(lr&&lr.userAgent?lr.userAgent:""),Fc=lr&&lr.userAgentData?lr.userAgentData:a,zr=fi?function(bn,Uc){var yh={};for(var Rl in bn)Uc[Rl]&&Uc[Rl].length%2==0?yh[Rl]=Uc[Rl].concat(bn[Rl]):yh[Rl]=bn[Rl];return yh}(cy,fi):cy,nu=lr&&lr.userAgent==ha;return this.getBrowser=function(){var bn={};return bn[S]=a,bn[O]=a,Sh.call(bn,ha,zr.browser),bn[m]=function(Uc){return typeof Uc===p?Uc.replace(/[^\d\.]/g,"").split(".")[0]:a}(bn[O]),nu&&lr&&lr.brave&&typeof lr.brave.isBrave==l&&(bn[S]="Brave"),bn},this.getCPU=function(){var bn={};return bn[H]=a,Sh.call(bn,ha,zr.cpu),bn},this.getDevice=function(){var bn={};return bn[w]=a,bn[E]=a,bn[R]=a,Sh.call(bn,ha,zr.device),nu&&!bn[R]&&Fc&&Fc.mobile&&(bn[R]=j),nu&&bn[E]=="Macintosh"&&lr&&typeof lr.standalone!==u&&lr.maxTouchPoints&&lr.maxTouchPoints>2&&(bn[E]="iPad",bn[R]=q),bn},this.getEngine=function(){var bn={};return bn[S]=a,bn[O]=a,Sh.call(bn,ha,zr.engine),bn},this.getOS=function(){var bn={};return bn[S]=a,bn[O]=a,Sh.call(bn,ha,zr.os),nu&&!bn[S]&&Fc&&Fc.platform&&Fc.platform!="Unknown"&&(bn[S]=Fc.platform.replace(/chrome os/i,He).replace(/macos/i,zt)),bn},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return ha},this.setUA=function(bn){return ha=typeof bn===p&&bn.length>500?pg(bn,500):bn,this},this.setUA(ha),this};Es.VERSION="0.7.40",Es.BROWSER=hi([S,O,m]),Es.CPU=hi([H]),Es.DEVICE=hi([E,w,R,B,j,Y,q,Z,pe]),Es.ENGINE=Es.OS=hi([S,O]),e.exports&&(n=e.exports=Es),n.UAParser=Es;var tu=typeof i!==u&&(i.jQuery||i.Zepto);if(tu&&!tu.ua){var ly=new Es;tu.ua=ly.getResult(),tu.ua.get=function(){return ly.getUA()},tu.ua.set=function(ni){ly.setUA(ni);var fi=ly.getResult();for(var lr in fi)tu.ua[lr]=fi[lr]}}})(typeof window=="object"?window:s)})(ZR,ZR.exports);var gle=c(ZR.exports),Z4=FE.clear;Vn({global:!0,bind:!0,enumerable:!0,forced:I.clearImmediate!==Z4},{clearImmediate:Z4});var eU=I,vle=L,Ele=ne,_le=a1,Sle=Ot,yle=Ou,Cle=Vd,ble=eU.Function,Tle=/MSIE .\./.test(Sle)||_le==="BUN"&&function(){var e=eU.Bun.version.split(".");return e.length<3||e[0]==="0"&&(e[1]<3||e[1]==="3"&&e[2]==="0")}(),Rle=Vn,tU=I,nU=FE.set,wle=function(e,n){var i=n?2:1;return Tle?function(a,l){var u=Cle(arguments.length,1)>i,h=Ele(a)?a:ble(a),p=u?yle(arguments,i):[],m=u?function(){vle(h,this,p)}:h;return n?e(m,l):e(m)}:e},rU=tU.setImmediate?wle(nU,!1):nU;Rle({global:!0,bind:!0,enumerable:!0,forced:tU.setImmediate!==rU},{setImmediate:rU});var iU=c(ut.setImmediate),Ile=I,Ale=mM,Ole=un,xle=Vd,Nle=ce;Vn({global:!0,enumerable:!0,dontCallGetSet:!0,forced:d(function(){return Nle&&Object.getOwnPropertyDescriptor(Ile,"queueMicrotask").value.length!==1})},{queueMicrotask:function(e){xle(arguments.length,1),Ale(Ole(e))}});var oU=c(ut.queueMicrotask);function aU(e,n){return function(){return e.apply(n,arguments)}}const{toString:Ple}=Object.prototype,{getPrototypeOf:ew}=Object,{iterator:d_,toStringTag:sU}=Symbol,h_=(tw=Object.create(null),e=>{const n=Ple.call(e);return tw[n]||(tw[n]=n.slice(8,-1).toLowerCase())});var tw;const Cc=e=>(e=e.toLowerCase(),n=>h_(n)===e),f_=e=>n=>typeof n===e,{isArray:Pf}=Array,u0=f_("undefined"),cU=Cc("ArrayBuffer"),Dle=f_("string"),Ba=f_("function"),lU=f_("number"),p_=e=>e!==null&&typeof e=="object",m_=e=>{if(h_(e)!=="object")return!1;const n=ew(e);return!(n!==null&&n!==Object.prototype&&Object.getPrototypeOf(n)!==null||sU in e||d_ in e)},Lle=Cc("Date"),kle=Cc("File"),Mle=Cc("Blob"),Fle=Cc("FileList"),Ule=Cc("URLSearchParams"),[Ble,Vle,jle,$le]=["ReadableStream","Request","Response","Headers"].map(Cc);function d0(e,n){let i,a,{allOwnKeys:l=!1}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(e!=null)if(typeof e!="object"&&(e=[e]),Pf(e))for(i=0,a=e.length;i<a;i++)n.call(null,e[i],i,e);else{const u=l?Object.getOwnPropertyNames(e):Object.keys(e),h=u.length;let p;for(i=0;i<h;i++)p=u[i],n.call(null,e[p],p,e)}}function uU(e,n){n=n.toLowerCase();const i=Object.keys(e);let a,l=i.length;for(;l-- >0;)if(a=i[l],n===a.toLowerCase())return a;return null}const Kd=Q4!==void 0?Q4:typeof self<"u"?self:typeof window<"u"?window:On,dU=e=>!u0(e)&&e!==Kd,Hle=(nw=typeof Uint8Array<"u"&&ew(Uint8Array),e=>nw&&e instanceof nw);var nw;const zle=Cc("HTMLFormElement"),hU=(e=>{let{hasOwnProperty:n}=e;return(i,a)=>n.call(i,a)})(Object.prototype),Wle=Cc("RegExp"),fU=(e,n)=>{const i=Object.getOwnPropertyDescriptors(e),a={};d0(i,(l,u)=>{let h;(h=n(l,u,e))!==!1&&(a[u]=h||l)}),Object.defineProperties(e,a)},Gle=Cc("AsyncFunction"),pU=(mU=typeof iU=="function",gU=Ba(Kd.postMessage),mU?iU:gU?(rw="axios@".concat(Math.random()),g_=[],Kd.addEventListener("message",e=>{let{source:n,data:i}=e;n===Kd&&i===rw&&g_.length&&g_.shift()()},!1),e=>{g_.push(e),Kd.postMessage(rw,"*")}):e=>setTimeout(e));var mU,gU,rw,g_;const Kle=oU!==void 0?oU.bind(Kd):typeof process<"u"&&process.nextTick||pU;var Qe={isArray:Pf,isArrayBuffer:cU,isBuffer:function(e){return e!==null&&!u0(e)&&e.constructor!==null&&!u0(e.constructor)&&Ba(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let n;return e&&(typeof FormData=="function"&&e instanceof FormData||Ba(e.append)&&((n=h_(e))==="formdata"||n==="object"&&Ba(e.toString)&&e.toString()==="[object FormData]"))},isArrayBufferView:function(e){let n;return n=typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&cU(e.buffer),n},isString:Dle,isNumber:lU,isBoolean:e=>e===!0||e===!1,isObject:p_,isPlainObject:m_,isReadableStream:Ble,isRequest:Vle,isResponse:jle,isHeaders:$le,isUndefined:u0,isDate:Lle,isFile:kle,isBlob:Mle,isRegExp:Wle,isFunction:Ba,isStream:e=>p_(e)&&Ba(e.pipe),isURLSearchParams:Ule,isTypedArray:Hle,isFileList:Fle,forEach:d0,merge:function e(){const{caseless:n}=dU(this)&&this||{},i={},a=(l,u)=>{const h=n&&uU(i,u)||u;m_(i[h])&&m_(l)?i[h]=e(i[h],l):m_(l)?i[h]=e({},l):Pf(l)?i[h]=l.slice():i[h]=l};for(let l=0,u=arguments.length;l<u;l++)arguments[l]&&d0(arguments[l],a);return i},extend:function(e,n,i){let{allOwnKeys:a}=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return d0(n,(l,u)=>{i&&Ba(l)?e[u]=aU(l,i):e[u]=l},{allOwnKeys:a}),e},trim:e=>yo(e)?yo(e).call(e):e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),inherits:(e,n,i,a)=>{e.prototype=Object.create(n.prototype,a),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:n.prototype}),i&&Object.assign(e.prototype,i)},toFlatObject:(e,n,i,a)=>{let l,u,h;const p={};if(n=n||{},e==null)return n;do{for(l=Object.getOwnPropertyNames(e),u=l.length;u-- >0;)h=l[u],a&&!a(h,e,n)||p[h]||(n[h]=e[h],p[h]=!0);e=i!==!1&&ew(e)}while(e&&(!i||i(e,n))&&e!==Object.prototype);return n},kindOf:h_,kindOfTest:Cc,endsWith:(e,n,i)=>{e=String(e),(i===void 0||i>e.length)&&(i=e.length),i-=n.length;const a=e.indexOf(n,i);return a!==-1&&a===i},toArray:e=>{if(!e)return null;if(Pf(e))return e;let n=e.length;if(!lU(n))return null;const i=new Array(n);for(;n-- >0;)i[n]=e[n];return i},forEachEntry:(e,n)=>{const i=(e&&e[d_]).call(e);let a;for(;(a=i.next())&&!a.done;){const l=a.value;n.call(e,l[0],l[1])}},matchAll:(e,n)=>{let i;const a=[];for(;(i=e.exec(n))!==null;)a.push(i);return a},isHTMLForm:zle,hasOwnProperty:hU,hasOwnProp:hU,reduceDescriptors:fU,freezeMethods:e=>{fU(e,(n,i)=>{if(Ba(e)&&["arguments","caller","callee"].indexOf(i)!==-1)return!1;const a=e[i];Ba(a)&&(n.enumerable=!1,"writable"in n?n.writable=!1:n.set||(n.set=()=>{throw Error("Can not rewrite read-only method '"+i+"'")}))})},toObjectSet:(e,n)=>{const i={},a=l=>{l.forEach(u=>{i[u]=!0})};return Pf(e)?a(e):a(String(e).split(n)),i},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,i,a){return i.toUpperCase()+a}),noop:()=>{},toFiniteNumber:(e,n)=>e!=null&&Number.isFinite(e=+e)?e:n,findKey:uU,global:Kd,isContextDefined:dU,isSpecCompliantForm:function(e){return!!(e&&Ba(e.append)&&e[sU]==="FormData"&&e[d_])},toJSONObject:e=>{const n=new Array(10),i=(a,l)=>{if(p_(a)){if(n.indexOf(a)>=0)return;if(!("toJSON"in a)){n[l]=a;const u=Pf(a)?[]:{};return d0(a,(h,p)=>{const m=i(h,l+1);!u0(m)&&(u[p]=m)}),n[l]=void 0,u}}return a};return i(e,0)},isAsyncFn:Gle,isThenable:e=>e&&(p_(e)||Ba(e))&&Ba(e.then)&&Ba(e.catch),setImmediate:pU,asap:Kle,isIterable:e=>e!=null&&Ba(e[d_])};function Kn(e,n,i,a,l){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",n&&(this.code=n),i&&(this.config=i),a&&(this.request=a),l&&(this.response=l,this.status=l.status?l.status:null)}Qe.inherits(Kn,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Qe.toJSONObject(this.config),code:this.code,status:this.status}}});const vU=Kn.prototype,EU={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{EU[e]={value:e}}),Object.defineProperties(Kn,EU),Object.defineProperty(vU,"isAxiosError",{value:!0}),Kn.from=(e,n,i,a,l,u)=>{const h=Object.create(vU);return Qe.toFlatObject(e,h,function(p){return p!==Error.prototype},p=>p!=="isAxiosError"),Kn.call(h,e.message,n,i,a,l),h.cause=e,h.name=e.name,u&&Object.assign(h,u),h};function iw(e){return Qe.isPlainObject(e)||Qe.isArray(e)}function _U(e){return Qe.endsWith(e,"[]")?e.slice(0,-2):e}function SU(e,n,i){return e?e.concat(n).map(function(a,l){return a=_U(a),!i&&l?"["+a+"]":a}).join(i?".":""):n}const Yle=Qe.toFlatObject(Qe,{},null,function(e){return/^is[A-Z]/.test(e)});function v_(e,n,i){if(!Qe.isObject(e))throw new TypeError("target must be an object");n=n||new FormData;const a=(i=Qe.toFlatObject(i,{metaTokens:!0,dots:!1,indexes:!1},!1,function(w,O){return!Qe.isUndefined(O[w])})).metaTokens,l=i.visitor||E,u=i.dots,h=i.indexes,p=(i.Blob||typeof Blob<"u"&&Blob)&&Qe.isSpecCompliantForm(n);if(!Qe.isFunction(l))throw new TypeError("visitor must be a function");function m(w){if(w===null)return"";if(Qe.isDate(w))return w.toISOString();if(!p&&Qe.isBlob(w))throw new Kn("Blob is not supported. Use a Buffer instead.");return Qe.isArrayBuffer(w)||Qe.isTypedArray(w)?p&&typeof Blob=="function"?new Blob([w]):Buffer.from(w):w}function E(w,O,H){let B=w;if(w&&!H&&typeof w=="object"){if(Qe.endsWith(O,"{}"))O=a?O:O.slice(0,-2),w=JSON.stringify(w);else if(Qe.isArray(w)&&function(j){return Qe.isArray(j)&&!j.some(iw)}(w)||(Qe.isFileList(w)||Qe.endsWith(O,"[]"))&&(B=Qe.toArray(w)))return O=_U(O),B.forEach(function(j,q){!Qe.isUndefined(j)&&j!==null&&n.append(h===!0?SU([O],q,u):h===null?O:O+"[]",m(j))}),!1}return!!iw(w)||(n.append(SU(H,O,u),m(w)),!1)}const S=[],R=Object.assign(Yle,{defaultVisitor:E,convertValue:m,isVisitable:iw});if(!Qe.isObject(e))throw new TypeError("data must be an object");return function w(O,H){if(!Qe.isUndefined(O)){if(S.indexOf(O)!==-1)throw Error("Circular reference detected in "+H.join("."));S.push(O),Qe.forEach(O,function(B,j){(!(Qe.isUndefined(B)||B===null)&&l.call(n,B,Qe.isString(j)?yo(j).call(j):j,H,R))===!0&&w(B,H?H.concat(j):[j])}),S.pop()}}(e),n}function yU(e){const n={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(i){return n[i]})}function ow(e,n){this._pairs=[],e&&v_(e,this,n)}const CU=ow.prototype;function qle(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function bU(e,n,i){if(!n)return e;const a=i&&i.encode||qle;Qe.isFunction(i)&&(i={serialize:i});const l=i&&i.serialize;let u;if(u=l?l(n,i):Qe.isURLSearchParams(n)?n.toString():new ow(n,i).toString(a),u){const h=e.indexOf("#");h!==-1&&(e=e.slice(0,h)),e+=(e.indexOf("?")===-1?"?":"&")+u}return e}CU.append=function(e,n){this._pairs.push([e,n])},CU.toString=function(e){const n=e?function(i){return e.call(this,i,yU)}:yU;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};var TU=class{constructor(){this.handlers=[]}use(e,n,i){return this.handlers.push({fulfilled:e,rejected:n,synchronous:!!i&&i.synchronous,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Qe.forEach(this.handlers,function(n){n!==null&&e(n)})}},RU={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},wU={exports:{}},Xle=Vn,Jle=ce,IU=Ls.f;Xle({target:"Object",stat:!0,forced:Object.defineProperty!==IU,sham:!Jle},{defineProperty:IU});var AU=ut.Object,Qle=wU.exports=function(e,n,i){return AU.defineProperty(e,n,i)};AU.defineProperty.sham&&(Qle.sham=!0);var OU=c(wU.exports),Zle=TypeError,xU=Wm,eue=ME,tue=Ze,nue=hr("species"),NU=Array,rue=function(e){var n;return xU(e)&&(n=e.constructor,(eue(n)&&(n===NU||xU(n.prototype))||tue(n)&&(n=n[nue])===null)&&(n=void 0)),n===void 0?NU:n},PU=function(e,n){return new(rue(e))(n===0?0:n)},iue=d,oue=_t,aue=hr("species"),DU=function(e){return oue>=51||!iue(function(){var n=[];return(n.constructor={})[aue]=function(){return{foo:1}},n[e](Boolean).foo!==1})},sue=Vn,cue=d,lue=Wm,uue=Ze,due=cn,hue=wu,LU=function(e){if(e>9007199254740991)throw Zle("Maximum allowed index exceeded");return e},kU=SR,fue=PU,pue=DU,mue=_t,MU=hr("isConcatSpreadable"),gue=mue>=51||!cue(function(){var e=[];return e[MU]=!1,e.concat()[0]!==e}),vue=function(e){if(!uue(e))return!1;var n=e[MU];return n!==void 0?!!n:lue(e)};sue({target:"Array",proto:!0,arity:1,forced:!gue||!pue("concat")},{concat:function(e){var n,i,a,l,u,h=due(this),p=fue(h,0),m=0;for(n=-1,a=arguments.length;n<a;n++)if(vue(u=n===-1?h:arguments[n]))for(l=hue(u),LU(m+l),i=0;i<l;i++,m++)i in u&&kU(p,m,u[i]);else LU(m+1),kU(p,m++,u);return p.length=m,p}});var FU={},Eue=$,_ue=ke,UU=SE.f,Sue=Ou,BU=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];FU.f=function(e){return BU&&Eue(e)==="Window"?function(n){try{return UU(n)}catch{return Sue(BU)}}(e):UU(_ue(e))};var Df={},yue=hr;Df.f=yue;var VU=ut,Cue=Jn,bue=Df,Tue=Ls.f,xi=function(e){var n=VU.Symbol||(VU.Symbol={});Cue(n,e)||Tue(n,e,{value:bue.f(e)})},Rue=ae,wue=Je,Iue=hr,Aue=Au,jU=function(){var e=wue("Symbol"),n=e&&e.prototype,i=n&&n.valueOf,a=Iue("toPrimitive");n&&!n[a]&&Aue(n,a,function(l){return Rue(i,this)},{arity:1})},Oue=Ru,xue=De,Nue=cn,Pue=wu,Due=PU,$U=b([].push),ku=function(e){var n=e===1,i=e===2,a=e===3,l=e===4,u=e===6,h=e===7,p=e===5||u;return function(m,E,S,R){for(var w,O,H=Nue(m),B=xue(H),j=Pue(B),q=Oue(E,S),Y=0,Z=R||Due,pe=n?Z(m,j):i||h?Z(m,0):void 0;j>Y;Y++)if((p||Y in B)&&(O=q(w=B[Y],Y,H),e))if(n)pe[Y]=O;else if(O)switch(e){case 3:return!0;case 5:return w;case 6:return Y;case 2:$U(pe,w)}else switch(e){case 4:return!1;case 7:$U(pe,w)}return u?-1:a||l?l:pe}},HU={forEach:ku(0),map:ku(1),filter:ku(2),some:ku(3),every:ku(4),find:ku(5),findIndex:ku(6),filterReject:ku(7)},E_=Vn,h0=I,aw=ae,Lue=b,Lf=ce,kf=gn,kue=d,No=Jn,Mue=T,sw=Ca,__=ke,cw=vo,Fue=Ua,lw=se,Mf=Km,zU=CE,Uue=SE,WU=FU,Bue=Gm,GU=te,KU=Ls,Vue=f1,YU=ie,qU=Au,jue=kE,uw=Lr,XU=yE,JU=Hn,$ue=hr,Hue=Df,zue=xi,Wue=jU,Gue=jl,QU=Bd,S_=HU.forEach,Va=_E("hidden"),y_="Symbol",f0="prototype",Kue=QU.set,ZU=QU.getterFor(y_),bc=Object[f0],Yd=h0.Symbol,C_=Yd&&Yd[f0],Yue=h0.RangeError,que=h0.TypeError,dw=h0.QObject,eB=GU.f,qd=KU.f,tB=WU.f,Xue=YU.f,nB=Lue([].push),zl=uw("symbols"),p0=uw("op-symbols"),Jue=uw("wks"),hw=!dw||!dw[f0]||!dw[f0].findChild,rB=function(e,n,i){var a=eB(bc,n);a&&delete bc[n],qd(e,n,i),a&&e!==bc&&qd(bc,n,a)},fw=Lf&&kue(function(){return Mf(qd({},"a",{get:function(){return qd(this,"a",{value:7}).a}})).a!==7})?rB:qd,pw=function(e,n){var i=zl[e]=Mf(C_);return Kue(i,{type:y_,tag:e,description:n}),Lf||(i.description=n),i},b_=function(e,n,i){e===bc&&b_(p0,n,i),sw(e);var a=cw(n);return sw(i),No(zl,a)?(i.enumerable?(No(e,Va)&&e[Va][a]&&(e[Va][a]=!1),i=Mf(i,{enumerable:lw(0,!1)})):(No(e,Va)||qd(e,Va,lw(1,Mf(null))),e[Va][a]=!0),fw(e,a,i)):qd(e,a,i)},mw=function(e,n){sw(e);var i=__(n),a=zU(i).concat(sB(i));return S_(a,function(l){Lf&&!aw(iB,i,l)||b_(e,l,i[l])}),e},iB=function(e){var n=cw(e),i=aw(Xue,this,n);return!(this===bc&&No(zl,n)&&!No(p0,n))&&(!(i||!No(this,n)||!No(zl,n)||No(this,Va)&&this[Va][n])||i)},oB=function(e,n){var i=__(e),a=cw(n);if(i!==bc||!No(zl,a)||No(p0,a)){var l=eB(i,a);return!l||!No(zl,a)||No(i,Va)&&i[Va][a]||(l.enumerable=!0),l}},aB=function(e){var n=tB(__(e)),i=[];return S_(n,function(a){No(zl,a)||No(XU,a)||nB(i,a)}),i},sB=function(e){var n=e===bc,i=tB(n?p0:__(e)),a=[];return S_(i,function(l){!No(zl,l)||n&&!No(bc,l)||nB(a,zl[l])}),a};kf||(Yd=function(){if(Mue(C_,this))throw new que("Symbol is not a constructor");var e=arguments.length&&arguments[0]!==void 0?Fue(arguments[0]):void 0,n=JU(e),i=function(a){var l=this===void 0?h0:this;l===bc&&aw(i,p0,a),No(l,Va)&&No(l[Va],n)&&(l[Va][n]=!1);var u=lw(1,a);try{fw(l,n,u)}catch(h){if(!(h instanceof Yue))throw h;rB(l,n,u)}};return Lf&&hw&&fw(bc,n,{configurable:!0,set:i}),pw(n,e)},qU(C_=Yd[f0],"toString",function(){return ZU(this).tag}),qU(Yd,"withoutSetter",function(e){return pw(JU(e),e)}),YU.f=iB,KU.f=b_,Vue.f=mw,GU.f=oB,Uue.f=WU.f=aB,Bue.f=sB,Hue.f=function(e){return pw($ue(e),e)},Lf&&jue(C_,"description",{configurable:!0,get:function(){return ZU(this).description}})),E_({global:!0,constructor:!0,wrap:!0,forced:!kf,sham:!kf},{Symbol:Yd}),S_(zU(Jue),function(e){zue(e)}),E_({target:y_,stat:!0,forced:!kf},{useSetter:function(){hw=!0},useSimple:function(){hw=!1}}),E_({target:"Object",stat:!0,forced:!kf,sham:!Lf},{create:function(e,n){return n===void 0?Mf(e):mw(Mf(e),n)},defineProperty:b_,defineProperties:mw,getOwnPropertyDescriptor:oB}),E_({target:"Object",stat:!0,forced:!kf},{getOwnPropertyNames:aB}),Wue(),Gue(Yd,y_),XU[Va]=!0;var cB=gn&&!!Symbol.for&&!!Symbol.keyFor,Que=Vn,Zue=Je,ede=Jn,tde=Ua,lB=Lr,nde=cB,gw=lB("string-to-symbol-registry"),rde=lB("symbol-to-string-registry");Que({target:"Symbol",stat:!0,forced:!nde},{for:function(e){var n=tde(e);if(ede(gw,n))return gw[n];var i=Zue("Symbol")(n);return gw[n]=i,rde[i]=n,i}});var ide=Vn,ode=Jn,ade=Gn,sde=vn,cde=cB,uB=Lr("symbol-to-string-registry");ide({target:"Symbol",stat:!0,forced:!cde},{keyFor:function(e){if(!ade(e))throw new TypeError(sde(e)+" is not a symbol");if(ode(uB,e))return uB[e]}});var dB=Wm,lde=ne,hB=$,ude=Ua,fB=b([].push),dde=Vn,pB=Je,mB=L,hde=ae,m0=b,gB=d,vB=ne,EB=Gn,_B=Ou,fde=function(e){if(lde(e))return e;if(dB(e)){for(var n=e.length,i=[],a=0;a<n;a++){var l=e[a];typeof l=="string"?fB(i,l):typeof l!="number"&&hB(l)!=="Number"&&hB(l)!=="String"||fB(i,ude(l))}var u=i.length,h=!0;return function(p,m){if(h)return h=!1,m;if(dB(this))return m;for(var E=0;E<u;E++)if(i[E]===p)return m}}},pde=gn,mde=String,Mu=pB("JSON","stringify"),T_=m0(/./.exec),SB=m0("".charAt),gde=m0("".charCodeAt),vde=m0("".replace),Ede=m0(1 .toString),_de=/[\uD800-\uDFFF]/g,yB=/^[\uD800-\uDBFF]$/,CB=/^[\uDC00-\uDFFF]$/,bB=!pde||gB(function(){var e=pB("Symbol")("stringify detection");return Mu([e])!=="[null]"||Mu({a:e})!=="{}"||Mu(Object(e))!=="{}"}),TB=gB(function(){return Mu("\uDF06\uD834")!=='"\\udf06\\ud834"'||Mu("\uDEAD")!=='"\\udead"'}),Sde=function(e,n){var i=_B(arguments),a=fde(n);if(vB(a)||e!==void 0&&!EB(e))return i[1]=function(l,u){if(vB(a)&&(u=hde(a,this,mde(l),u)),!EB(u))return u},mB(Mu,null,i)},yde=function(e,n,i){var a=SB(i,n-1),l=SB(i,n+1);return T_(yB,e)&&!T_(CB,l)||T_(CB,e)&&!T_(yB,a)?"\\u"+Ede(gde(e,0),16):e};Mu&&dde({target:"JSON",stat:!0,arity:3,forced:bB||TB},{stringify:function(e,n,i){var a=_B(arguments),l=mB(bB?Sde:Mu,null,a);return TB&&typeof l=="string"?vde(l,_de,yde):l}});var RB=Gm,Cde=cn;Vn({target:"Object",stat:!0,forced:!gn||d(function(){RB.f(1)})},{getOwnPropertySymbols:function(e){var n=RB.f;return n?n(Cde(e)):[]}}),xi("asyncIterator"),xi("hasInstance"),xi("isConcatSpreadable"),xi("iterator"),xi("match"),xi("matchAll"),xi("replace"),xi("search"),xi("species"),xi("split");var bde=jU;xi("toPrimitive"),bde();var Tde=Je,Rde=jl;xi("toStringTag"),Rde(Tde("Symbol"),"Symbol"),xi("unscopables"),jl(I.JSON,"JSON",!0);var wde=ut.Symbol,Ide=hr,Ade=Ls.f,wB=Ide("metadata"),IB=Function.prototype;IB[wB]===void 0&&Ade(IB,wB,{value:null}),xi("asyncDispose"),xi("dispose"),xi("metadata");var Ode=wde,xde=b,vw=Je("Symbol"),Nde=vw.keyFor,Pde=xde(vw.prototype.valueOf),AB=vw.isRegisteredSymbol||function(e){try{return Nde(Pde(e))!==void 0}catch{return!1}};Vn({target:"Symbol",stat:!0},{isRegisteredSymbol:AB});for(var Dde=Lr,OB=Je,Lde=b,kde=Gn,Mde=hr,R_=OB("Symbol"),xB=R_.isWellKnownSymbol,NB=OB("Object","getOwnPropertyNames"),Fde=Lde(R_.prototype.valueOf),PB=Dde("wks"),Ew=0,DB=NB(R_),Ude=DB.length;Ew<Ude;Ew++)try{var LB=DB[Ew];kde(R_[LB])&&Mde(LB)}catch{}var kB=function(e){if(xB&&xB(e))return!0;try{for(var n=Fde(e),i=0,a=NB(PB),l=a.length;i<l;i++)if(PB[a[i]]==n)return!0}catch{}return!1};Vn({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:kB}),xi("customMatcher"),xi("observable"),Vn({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:AB}),Vn({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:kB}),xi("matcher"),xi("metadataKey"),xi("patternMatch"),xi("replaceAll");var Ff=c(Ode),MB=c(Df.f("iterator"));function g0(e){return g0=typeof Ff=="function"&&typeof MB=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Ff=="function"&&n.constructor===Ff&&n!==Ff.prototype?"symbol":typeof n},g0(e)}var Bde=c(Df.f("toPrimitive"));function Vde(e){var n=function(i,a){if(g0(i)!="object"||!i)return i;var l=i[Bde];if(l!==void 0){var u=l.call(i,a||"default");if(g0(u)!="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(i)}(e,"string");return g0(n)=="symbol"?n:n+""}function W(e,n,i){return(n=Vde(n))in e?OU(e,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[n]=i,e}var FB=c($se),jde={isBrowser:!0,classes:{URLSearchParams:FB!==void 0?FB:ow,FormData:typeof FormData<"u"?FormData:null,Blob:typeof Blob<"u"?Blob:null},protocols:["http","https","file","blob","url","data"]};const _w=typeof window<"u"&&typeof document<"u",Sw=typeof navigator=="object"&&navigator||void 0,$de=_w&&(!Sw||["ReactNative","NativeScript","NS"].indexOf(Sw.product)<0),Hde=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",zde=_w&&window.location.href||"http://localhost";function UB(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),i.push.apply(i,a)}return i}function BB(e){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?UB(Object(i),!0).forEach(function(a){W(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):UB(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}var aa=BB(BB({},Object.freeze({__proto__:null,hasBrowserEnv:_w,hasStandardBrowserEnv:$de,hasStandardBrowserWebWorkerEnv:Hde,navigator:Sw,origin:zde})),jde),Wde=Ca,Gde=ae,Kde=Jn,Yde=T,qde=function(){var e=Wde(this),n="";return e.hasIndices&&(n+="d"),e.global&&(n+="g"),e.ignoreCase&&(n+="i"),e.multiline&&(n+="m"),e.dotAll&&(n+="s"),e.unicode&&(n+="u"),e.unicodeSets&&(n+="v"),e.sticky&&(n+="y"),n},VB=RegExp.prototype,jB=function(e){var n=e.flags;return n!==void 0||"flags"in VB||Kde(e,"flags")||!Yde(VB,e)?n:Gde(qde,e)},Xde=aR.charAt,$B=ae,Jde=Ca,Qde=ne,Zde=$,ehe=/./.exec,the=TypeError,nhe=Vn,HB=ae,zB=G,rhe=I1,w_=DE,WB=$e,GB=zL,v0=Ua,ihe=Ca,ohe=Ze,ahe=$,she=GL,KB=jB,che=gt,lhe=d,uhe=D1,dhe=function(e,n,i){return n+(i?Xde(e,n).length:1)},hhe=function(e,n){var i=e.exec;if(Qde(i)){var a=$B(i,e,n);return a!==null&&Jde(a),a}if(Zde(e)==="RegExp")return $B(ehe,e,n);throw new the("RegExp#exec called on incompatible receiver")},YB=Bd,fhe=hr("matchAll"),qB="RegExp String",XB=qB+" Iterator",phe=YB.set,mhe=YB.getterFor(XB),ghe=TypeError,yw=zB("".indexOf),I_=zB("".matchAll),Cw=!!I_&&!lhe(function(){I_("a",/./)}),vhe=rhe(function(e,n,i,a){phe(this,{type:XB,regexp:e,string:n,global:i,unicode:a,done:!1})},qB,function(){var e=mhe(this);if(e.done)return w_(void 0,!0);var n=e.regexp,i=e.string,a=hhe(n,i);return a===null?(e.done=!0,w_(void 0,!0)):e.global?(v0(a[0])===""&&(n.lastIndex=dhe(i,GB(n.lastIndex),e.unicode)),w_(a,!1)):(e.done=!0,w_(a,!1))}),JB=function(e){var n,i,a,l=ihe(this),u=v0(e),h=uhe(l,RegExp),p=v0(KB(l));return n=new h(h===RegExp?l.source:l,p),i=!!~yw(p,"g"),a=!!~yw(p,"u"),n.lastIndex=GB(l.lastIndex),new vhe(n,u,i,a)};nhe({target:"String",proto:!0,forced:Cw},{matchAll:function(e){var n,i,a,l,u=WB(this);if(ohe(e)){if(she(e)&&(n=v0(WB(KB(e))),!~yw(n,"g")))throw new ghe("`.matchAll` does not allow non-global regexes");if(Cw)return I_(u,e);if((a=che(e,fhe))===void 0&&ahe(e)==="RegExp"&&(a=JB),a)return HB(a,e,u)}else if(Cw)return I_(u,e);return i=v0(u),l=new RegExp(e,"g"),HB(JB,l,i)}});var Ehe=ks("String","matchAll"),_he=T,She=Ehe,bw=String.prototype,yhe=function(e){var n=e.matchAll;return typeof e=="string"||e===bw||_he(bw,e)&&n===bw.matchAll?She:n},Che=c(yhe);function QB(e){function n(i,a,l,u){let h=i[u++];if(h==="__proto__")return!0;const p=Number.isFinite(+h),m=u>=i.length;return h=!h&&Qe.isArray(l)?l.length:h,m?(Qe.hasOwnProp(l,h)?l[h]=[l[h],a]:l[h]=a,!p):(l[h]&&Qe.isObject(l[h])||(l[h]=[]),n(i,a,l[h],u)&&Qe.isArray(l[h])&&(l[h]=function(E){const S={},R=Object.keys(E);let w;const O=R.length;let H;for(w=0;w<O;w++)H=R[w],S[H]=E[H];return S}(l[h])),!p)}if(Qe.isFormData(e)&&Qe.isFunction(e.entries)){const i={};return Qe.forEachEntry(e,(a,l)=>{n(function(u){return Che(Qe).call(Qe,/\w+|\[(\w*)]/g,u).map(h=>h[0]==="[]"?"":h[1]||h[0])}(a),l,i,0)}),i}return null}const Tw={transitional:RU,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const i=n.getContentType()||"",a=i.indexOf("application/json")>-1,l=Qe.isObject(e);if(l&&Qe.isHTMLForm(e)&&(e=new FormData(e)),Qe.isFormData(e))return a?JSON.stringify(QB(e)):e;if(Qe.isArrayBuffer(e)||Qe.isBuffer(e)||Qe.isStream(e)||Qe.isFile(e)||Qe.isBlob(e)||Qe.isReadableStream(e))return e;if(Qe.isArrayBufferView(e))return e.buffer;if(Qe.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let u;if(l){if(i.indexOf("application/x-www-form-urlencoded")>-1)return function(h,p){return v_(h,new aa.classes.URLSearchParams,Object.assign({visitor:function(m,E,S,R){return aa.isNode&&Qe.isBuffer(m)?(this.append(E,m.toString("base64")),!1):R.defaultVisitor.apply(this,arguments)}},p))}(e,this.formSerializer).toString();if((u=Qe.isFileList(e))||i.indexOf("multipart/form-data")>-1){const h=this.env&&this.env.FormData;return v_(u?{"files[]":e}:e,h&&new h,this.formSerializer)}}return l||a?(n.setContentType("application/json",!1),function(h,p,m){if(Qe.isString(h))try{return(p||JSON.parse)(h),yo(Qe).call(Qe,h)}catch(E){if(E.name!=="SyntaxError")throw E}return(m||JSON.stringify)(h)}(e)):e}],transformResponse:[function(e){const n=this.transitional||Tw.transitional,i=n&&n.forcedJSONParsing,a=this.responseType==="json";if(Qe.isResponse(e)||Qe.isReadableStream(e))return e;if(e&&Qe.isString(e)&&(i&&!this.responseType||a)){const l=!(n&&n.silentJSONParsing)&&a;try{return JSON.parse(e)}catch(u){if(l)throw u.name==="SyntaxError"?Kn.from(u,Kn.ERR_BAD_RESPONSE,this,null,this.response):u}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:aa.classes.FormData,Blob:aa.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Qe.forEach(["delete","get","head","post","put","patch"],e=>{Tw.headers[e]={}});var Rw=Tw;const bhe=Qe.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),ZB=Symbol("internals");function E0(e){var n;return e&&yo(n=String(e)).call(n).toLowerCase()}function A_(e){return e===!1||e==null?e:Qe.isArray(e)?e.map(A_):String(e)}function ww(e,n,i,a,l){return Qe.isFunction(a)?a.call(this,n,i):(l&&(n=i),Qe.isString(n)?Qe.isString(a)?n.indexOf(a)!==-1:Qe.isRegExp(a)?a.test(n):void 0:void 0)}class O_{constructor(n){n&&this.set(n)}set(n,i,a){const l=this;function u(m,E,S){const R=E0(E);if(!R)throw new Error("header name must be a non-empty string");const w=Qe.findKey(l,R);(!w||l[w]===void 0||S===!0||S===void 0&&l[w]!==!1)&&(l[w||E]=A_(m))}const h=(m,E)=>Qe.forEach(m,(S,R)=>u(S,R,E));if(Qe.isPlainObject(n)||n instanceof this.constructor)h(n,i);else if(Qe.isString(n)&&(n=yo(n).call(n))&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(yo(p=n).call(p)))h((m=>{const E={};let S,R,w;return m&&m.split(`
`).forEach(function(O){var H,B;w=O.indexOf(":"),S=yo(H=O.substring(0,w)).call(H).toLowerCase(),R=yo(B=O.substring(w+1)).call(B),!S||E[S]&&bhe[S]||(S==="set-cookie"?E[S]?E[S].push(R):E[S]=[R]:E[S]=E[S]?E[S]+", "+R:R)}),E})(n),i);else if(Qe.isObject(n)&&Qe.isIterable(n)){let m,E,S={};for(const R of n){if(!Qe.isArray(R))throw TypeError("Object iterator must return a key-value pair");S[E=R[0]]=(m=S[E])?Qe.isArray(m)?[...m,R[1]]:[m,R[1]]:R[1]}h(S,i)}else n!=null&&u(i,n,a);var p;return this}get(n,i){if(n=E0(n)){const a=Qe.findKey(this,n);if(a){const l=this[a];if(!i)return l;if(i===!0)return function(u){const h=Object.create(null),p=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let m;for(;m=p.exec(u);)h[m[1]]=m[2];return h}(l);if(Qe.isFunction(i))return i.call(this,l,a);if(Qe.isRegExp(i))return i.exec(l);throw new TypeError("parser must be boolean|regexp|function")}}}has(n,i){if(n=E0(n)){const a=Qe.findKey(this,n);return!(!a||this[a]===void 0||i&&!ww(0,this[a],a,i))}return!1}delete(n,i){const a=this;let l=!1;function u(h){if(h=E0(h)){const p=Qe.findKey(a,h);!p||i&&!ww(0,a[p],p,i)||(delete a[p],l=!0)}}return Qe.isArray(n)?n.forEach(u):u(n),l}clear(n){const i=Object.keys(this);let a=i.length,l=!1;for(;a--;){const u=i[a];n&&!ww(0,this[u],u,n,!0)||(delete this[u],l=!0)}return l}normalize(n){const i=this,a={};return Qe.forEach(this,(l,u)=>{var h;const p=Qe.findKey(a,u);if(p)return i[p]=A_(l),void delete i[u];const m=n?function(E){return yo(E).call(E).toLowerCase().replace(/([a-z\d])(\w*)/g,(S,R,w)=>R.toUpperCase()+w)}(u):yo(h=String(u)).call(h);m!==u&&delete i[u],i[m]=A_(l),a[m]=!0}),this}concat(){for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return this.constructor.concat(this,...i)}toJSON(n){const i=Object.create(null);return Qe.forEach(this,(a,l)=>{a!=null&&a!==!1&&(i[l]=n&&Qe.isArray(a)?a.join(", "):a)}),i}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(n=>{let[i,a]=n;return i+": "+a}).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(n){return n instanceof this?n:new this(n)}static concat(n){const i=new this(n);for(var a=arguments.length,l=new Array(a>1?a-1:0),u=1;u<a;u++)l[u-1]=arguments[u];return l.forEach(h=>i.set(h)),i}static accessor(n){const i=(this[ZB]=this[ZB]={accessors:{}}).accessors,a=this.prototype;function l(u){const h=E0(u);i[h]||(function(p,m){const E=Qe.toCamelCase(" "+m);["get","set","has"].forEach(S=>{Object.defineProperty(p,S+E,{value:function(R,w,O){return this[S].call(this,m,R,w,O)},configurable:!0})})}(a,u),i[h]=!0)}return Qe.isArray(n)?n.forEach(l):l(n),this}}O_.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Qe.reduceDescriptors(O_.prototype,(e,n)=>{let{value:i}=e,a=n[0].toUpperCase()+n.slice(1);return{get:()=>i,set(l){this[a]=l}}}),Qe.freezeMethods(O_);var Tc=O_;function Iw(e,n){const i=this||Rw,a=n||i,l=Tc.from(a.headers);let u=a.data;return Qe.forEach(e,function(h){u=h.call(i,u,l.normalize(),n?n.status:void 0)}),l.normalize(),u}function e3(e){return!(!e||!e.__CANCEL__)}function Uf(e,n,i){Kn.call(this,e??"canceled",Kn.ERR_CANCELED,n,i),this.name="CanceledError"}function t3(e,n,i){const a=i.config.validateStatus;i.status&&a&&!a(i.status)?n(new Kn("Request failed with status code "+i.status,[Kn.ERR_BAD_REQUEST,Kn.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i)):e(i)}Qe.inherits(Uf,Kn,{__CANCEL__:!0});const x_=function(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:3,a=0;const l=function(u,h){u=u||10;const p=new Array(u),m=new Array(u);let E,S=0,R=0;return h=h!==void 0?h:1e3,function(w){const O=Date.now(),H=m[R];E||(E=O),p[S]=w,m[S]=O;let B=R,j=0;for(;B!==S;)j+=p[B++],B%=u;if(S=(S+1)%u,S===R&&(R=(R+1)%u),O-E<h)return;const q=H&&O-H;return q?Math.round(1e3*j/q):void 0}}(50,250);return function(u,h){let p,m,E=0,S=1e3/h;const R=function(w){E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Date.now(),p=null,m&&(clearTimeout(m),m=null),u.apply(null,w)};return[function(){const w=Date.now(),O=w-E;for(var H=arguments.length,B=new Array(H),j=0;j<H;j++)B[j]=arguments[j];O>=S?R(B,w):(p=B,m||(m=setTimeout(()=>{m=null,R(p)},S-O)))},()=>p&&R(p)]}(u=>{const h=u.loaded,p=u.lengthComputable?u.total:void 0,m=h-a,E=l(m);a=h,e({loaded:h,total:p,progress:p?h/p:void 0,bytes:m,rate:E||void 0,estimated:E&&p&&h<=p?(p-h)/E:void 0,event:u,lengthComputable:p!=null,[n?"download":"upload"]:!0})},i)},n3=(e,n)=>{const i=e!=null;return[a=>n[0]({lengthComputable:i,total:e,loaded:a}),n[1]]},r3=e=>function(){for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return Qe.asap(()=>e(...i))};var The=aa.hasStandardBrowserEnv?((e,n)=>i=>(i=new i_(i,aa.origin),e.protocol===i.protocol&&e.host===i.host&&(n||e.port===i.port)))(new i_(aa.origin),aa.navigator&&/(msie|trident)/i.test(aa.navigator.userAgent)):()=>!0,Rhe=aa.hasStandardBrowserEnv?{write(e,n,i,a,l,u){const h=[e+"="+encodeURIComponent(n)];Qe.isNumber(i)&&h.push("expires="+new Date(i).toGMTString()),Qe.isString(a)&&h.push("path="+a),Qe.isString(l)&&h.push("domain="+l),u===!0&&h.push("secure"),document.cookie=h.join("; ")},read(e){const n=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function i3(e,n,i){let a=!function(l){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(l)}(n);return e&&(a||i==0)?function(l,u){return u?l.replace(/\/?\/$/,"")+"/"+u.replace(/^\/+/,""):l}(e,n):n}function o3(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),i.push.apply(i,a)}return i}const a3=e=>e instanceof Tc?function(n){for(var i=1;i<arguments.length;i++){var a=arguments[i]!=null?arguments[i]:{};i%2?o3(Object(a),!0).forEach(function(l){W(n,l,a[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):o3(Object(a)).forEach(function(l){Object.defineProperty(n,l,Object.getOwnPropertyDescriptor(a,l))})}return n}({},e):e;function Xd(e,n){n=n||{};const i={};function a(E,S,R,w){return Qe.isPlainObject(E)&&Qe.isPlainObject(S)?Qe.merge.call({caseless:w},E,S):Qe.isPlainObject(S)?Qe.merge({},S):Qe.isArray(S)?S.slice():S}function l(E,S,R,w){return Qe.isUndefined(S)?Qe.isUndefined(E)?void 0:a(void 0,E,0,w):a(E,S,0,w)}function u(E,S){if(!Qe.isUndefined(S))return a(void 0,S)}function h(E,S){return Qe.isUndefined(S)?Qe.isUndefined(E)?void 0:a(void 0,E):a(void 0,S)}function p(E,S,R){return R in n?a(E,S):R in e?a(void 0,E):void 0}const m={url:u,method:u,data:u,baseURL:h,transformRequest:h,transformResponse:h,paramsSerializer:h,timeout:h,timeoutMessage:h,withCredentials:h,withXSRFToken:h,adapter:h,responseType:h,xsrfCookieName:h,xsrfHeaderName:h,onUploadProgress:h,onDownloadProgress:h,decompress:h,maxContentLength:h,maxBodyLength:h,beforeRedirect:h,transport:h,httpAgent:h,httpsAgent:h,cancelToken:h,socketPath:h,responseEncoding:h,validateStatus:p,headers:(E,S,R)=>l(a3(E),a3(S),0,!0)};return Qe.forEach(Object.keys(Object.assign({},e,n)),function(E){const S=m[E]||l,R=S(e[E],n[E],E);Qe.isUndefined(R)&&S!==p||(i[E]=R)}),i}var s3=e=>{const n=Xd({},e);let i,{data:a,withXSRFToken:l,xsrfHeaderName:u,xsrfCookieName:h,headers:p,auth:m}=n;if(n.headers=p=Tc.from(p),n.url=bU(i3(n.baseURL,n.url,n.allowAbsoluteUrls),e.params,e.paramsSerializer),m&&p.set("Authorization","Basic "+btoa((m.username||"")+":"+(m.password?unescape(encodeURIComponent(m.password)):""))),Qe.isFormData(a)){if(aa.hasStandardBrowserEnv||aa.hasStandardBrowserWebWorkerEnv)p.setContentType(void 0);else if((i=p.getContentType())!==!1){const[E,...S]=i?i.split(";").map(R=>yo(R).call(R)).filter(Boolean):[];p.setContentType([E||"multipart/form-data",...S].join("; "))}}if(aa.hasStandardBrowserEnv&&(l&&Qe.isFunction(l)&&(l=l(n)),l||l!==!1&&The(n.url))){const E=u&&h&&Rhe.read(h);E&&p.set(u,E)}return n},whe=typeof XMLHttpRequest<"u"&&function(e){return new et(function(n,i){const a=s3(e);let l=a.data;const u=Tc.from(a.headers).normalize();let h,p,m,E,S,{responseType:R,onUploadProgress:w,onDownloadProgress:O}=a;function H(){E&&E(),S&&S(),a.cancelToken&&a.cancelToken.unsubscribe(h),a.signal&&a.signal.removeEventListener("abort",h)}let B=new XMLHttpRequest;function j(){if(!B)return;const Y=Tc.from("getAllResponseHeaders"in B&&B.getAllResponseHeaders());t3(function(Z){n(Z),H()},function(Z){i(Z),H()},{data:R&&R!=="text"&&R!=="json"?B.response:B.responseText,status:B.status,statusText:B.statusText,headers:Y,config:e,request:B}),B=null}B.open(a.method.toUpperCase(),a.url,!0),B.timeout=a.timeout,"onloadend"in B?B.onloadend=j:B.onreadystatechange=function(){B&&B.readyState===4&&(B.status!==0||B.responseURL&&B.responseURL.indexOf("file:")===0)&&setTimeout(j)},B.onabort=function(){B&&(i(new Kn("Request aborted",Kn.ECONNABORTED,e,B)),B=null)},B.onerror=function(){i(new Kn("Network Error",Kn.ERR_NETWORK,e,B)),B=null},B.ontimeout=function(){let Y=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const Z=a.transitional||RU;a.timeoutErrorMessage&&(Y=a.timeoutErrorMessage),i(new Kn(Y,Z.clarifyTimeoutError?Kn.ETIMEDOUT:Kn.ECONNABORTED,e,B)),B=null},l===void 0&&u.setContentType(null),"setRequestHeader"in B&&Qe.forEach(u.toJSON(),function(Y,Z){B.setRequestHeader(Z,Y)}),Qe.isUndefined(a.withCredentials)||(B.withCredentials=!!a.withCredentials),R&&R!=="json"&&(B.responseType=a.responseType),O&&([m,S]=x_(O,!0),B.addEventListener("progress",m)),w&&B.upload&&([p,E]=x_(w),B.upload.addEventListener("progress",p),B.upload.addEventListener("loadend",E)),(a.cancelToken||a.signal)&&(h=Y=>{B&&(i(!Y||Y.type?new Uf(null,e,B):Y),B.abort(),B=null)},a.cancelToken&&a.cancelToken.subscribe(h),a.signal&&(a.signal.aborted?h():a.signal.addEventListener("abort",h)));const q=function(Y){const Z=/^([-+\w]{1,25})(:?\/\/|:)/.exec(Y);return Z&&Z[1]||""}(a.url);q&&aa.protocols.indexOf(q)===-1?i(new Kn("Unsupported protocol "+q+":",Kn.ERR_BAD_REQUEST,e)):B.send(l||null)})},Ihe=(e,n)=>{const{length:i}=e=e?e.filter(Boolean):[];if(n||i){let a,l=new AbortController;const u=function(E){if(!a){a=!0,p();const S=E instanceof Error?E:this.reason;l.abort(S instanceof Kn?S:new Uf(S instanceof Error?S.message:S))}};let h=n&&setTimeout(()=>{h=null,u(new Kn("timeout ".concat(n," of ms exceeded"),Kn.ETIMEDOUT))},n);const p=()=>{e&&(h&&clearTimeout(h),h=null,e.forEach(E=>{E.unsubscribe?E.unsubscribe(u):E.removeEventListener("abort",u)}),e=null)};e.forEach(E=>E.addEventListener("abort",u));const{signal:m}=l;return m.unsubscribe=()=>Qe.asap(p),m}},Aw=c(YM),c3=Df.f("asyncIterator"),Ahe=c(c3);function Ow(e,n){this.v=e,this.k=n}function ss(e){return function(){return new _0(e.apply(this,arguments))}}function _0(e){var n,i;function a(u,h){try{var p=e[u](h),m=p.value,E=m instanceof Ow;Aw.resolve(E?m.v:m).then(function(S){if(E){var R=u==="return"?"return":"next";if(!m.k||S.done)return a(R,S);S=e[R](S).value}l(p.done?"return":"normal",S)},function(S){a("throw",S)})}catch(S){l("throw",S)}}function l(u,h){switch(u){case"return":n.resolve({value:h,done:!0});break;case"throw":n.reject(h);break;default:n.resolve({value:h,done:!1})}(n=n.next)?a(n.key,n.arg):i=null}this._invoke=function(u,h){return new Aw(function(p,m){var E={key:u,arg:h,resolve:p,reject:m,next:null};i?i=i.next=E:(n=i=E,a(u,h))})},typeof e.return!="function"&&(this.return=void 0)}function Tn(e){return new Ow(e,0)}function N_(e){var n={},i=!1;function a(l,u){return i=!0,u=new Aw(function(h){h(e[l](u))}),{done:!1,value:new Ow(u,1)}}return n[Ff!==void 0&&MB||"@@iterator"]=function(){return this},n.next=function(l){return i?(i=!1,l):a("next",l)},typeof e.throw=="function"&&(n.throw=function(l){if(i)throw i=!1,l;return a("throw",l)}),typeof e.return=="function"&&(n.return=function(l){return i?(i=!1,l):a("return",l)}),n}_0.prototype[typeof Ff=="function"&&Ahe||"@@asyncIterator"]=function(){return this},_0.prototype.next=function(e){return this._invoke("next",e)},_0.prototype.throw=function(e){return this._invoke("throw",e)},_0.prototype.return=function(e){return this._invoke("return",e)};var xw=c(c3);function Nw(e){var n,i,a,l=2;for(typeof Symbol<"u"&&(i=xw,a=Symbol.iterator);l--;){if(i&&(n=e[i])!=null)return n.call(e);if(a&&(n=e[a])!=null)return new P_(n.call(e));i="@@asyncIterator",a="@@iterator"}throw new TypeError("Object is not async iterable")}function P_(e){function n(i){if(Object(i)!==i)return et.reject(new TypeError(i+" is not an object."));var a=i.done;return et.resolve(i.value).then(function(l){return{value:l,done:a}})}return P_=function(i){this.s=i,this.n=i.next},P_.prototype={s:null,n:null,next:function(){return n(this.n.apply(this.s,arguments))},return:function(i){var a=this.s.return;return a===void 0?et.resolve({value:i,done:!0}):n(a.apply(this.s,arguments))},throw:function(i){var a=this.s.return;return a===void 0?et.reject(i):n(a.apply(this.s,arguments))}},new P_(e)}const Ohe=function*(e,n){let i=e.byteLength;if(!n||i<n)return void(yield e);let a,l=0;for(;l<i;)a=l+n,yield e.slice(l,a),l=a},xhe=function(){var e=ss(function*(n,i){var a,l=!1,u=!1;try{for(var h,p=Nw(Nhe(n));l=!(h=yield Tn(p.next())).done;l=!1){const m=h.value;yield*N_(Nw(Ohe(m,i)))}}catch(m){u=!0,a=m}finally{try{l&&p.return!=null&&(yield Tn(p.return()))}finally{if(u)throw a}}});return function(n,i){return e.apply(this,arguments)}}(),Nhe=function(){var e=ss(function*(n){if(n[xw])return void(yield*N_(Nw(n)));const i=n.getReader();try{for(;;){const{done:a,value:l}=yield Tn(i.read());if(a)break;yield l}}finally{yield Tn(i.cancel())}});return function(n){return e.apply(this,arguments)}}(),l3=(e,n,i,a)=>{const l=xhe(e,n);let u,h=0,p=m=>{u||(u=!0,a&&a(m))};return new ReadableStream({async pull(m){try{const{done:E,value:S}=await l.next();if(E)return p(),void m.close();let R=S.byteLength;if(i){let w=h+=R;i(w)}m.enqueue(new Uint8Array(S))}catch(E){throw p(E),E}},cancel:m=>(p(m),l.return())},{highWaterMark:2})};function u3(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),i.push.apply(i,a)}return i}function d3(e){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?u3(Object(i),!0).forEach(function(a){W(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):u3(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}const D_=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",h3=D_&&typeof ReadableStream=="function",Phe=D_&&(typeof TextEncoder=="function"?(f3=new TextEncoder,e=>f3.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer()));var f3;const p3=function(e){try{for(var n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];return!!e(...i)}catch{return!1}},Dhe=h3&&p3(()=>{let e=!1;const n=new Request(aa.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!n}),Pw=h3&&p3(()=>Qe.isReadableStream(new Response("").body)),L_={stream:Pw&&(e=>e.body)};var m3;D_&&(m3=new Response,["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!L_[e]&&(L_[e]=Qe.isFunction(m3[e])?n=>n[e]():(n,i)=>{throw new Kn("Response type '".concat(e,"' is not supported"),Kn.ERR_NOT_SUPPORT,i)})}));const Lhe=async(e,n)=>{const i=Qe.toFiniteNumber(e.getContentLength());return i??(async a=>a==null?0:Qe.isBlob(a)?a.size:Qe.isSpecCompliantForm(a)?(await new Request(aa.origin,{method:"POST",body:a}).arrayBuffer()).byteLength:Qe.isArrayBufferView(a)||Qe.isArrayBuffer(a)?a.byteLength:(Qe.isURLSearchParams(a)&&(a+=""),Qe.isString(a)?(await Phe(a)).byteLength:void 0))(n)};var khe=D_&&(async e=>{let{url:n,method:i,data:a,signal:l,cancelToken:u,timeout:h,onDownloadProgress:p,onUploadProgress:m,responseType:E,headers:S,withCredentials:R="same-origin",fetchOptions:w}=s3(e);E=E?(E+"").toLowerCase():"text";let O,H=Ihe([l,u&&u.toAbortSignal()],h);const B=H&&H.unsubscribe&&(()=>{H.unsubscribe()});let j;try{if(m&&Dhe&&i!=="get"&&i!=="head"&&(j=await Lhe(S,a))!==0){let he,re=new Request(n,{method:"POST",body:a,duplex:"half"});if(Qe.isFormData(a)&&(he=re.headers.get("content-type"))&&S.setContentType(he),re.body){const[Se,Ae]=n3(j,x_(r3(m)));a=l3(re.body,65536,Se,Ae)}}Qe.isString(R)||(R=R?"include":"omit");const q="credentials"in Request.prototype;O=new Request(n,d3(d3({},w),{},{signal:H,method:i.toUpperCase(),headers:S.normalize().toJSON(),body:a,duplex:"half",credentials:q?R:void 0}));let Y=await fetch(O);const Z=Pw&&(E==="stream"||E==="response");if(Pw&&(p||Z&&B)){const he={};["status","statusText","headers"].forEach(Ne=>{he[Ne]=Y[Ne]});const re=Qe.toFiniteNumber(Y.headers.get("content-length")),[Se,Ae]=p&&n3(re,x_(r3(p),!0))||[];Y=new Response(l3(Y.body,65536,Se,()=>{Ae&&Ae(),B&&B()}),he)}E=E||"text";let pe=await L_[Qe.findKey(L_,E)||"text"](Y,e);return!Z&&B&&B(),await new et((he,re)=>{t3(he,re,{data:pe,headers:Tc.from(Y.headers),status:Y.status,statusText:Y.statusText,config:e,request:O})})}catch(q){throw B&&B(),q&&q.name==="TypeError"&&/Load failed|fetch/i.test(q.message)?Object.assign(new Kn("Network Error",Kn.ERR_NETWORK,e,O),{cause:q.cause||q}):Kn.from(q,q&&q.code,e,O)}});const Dw={http:null,xhr:whe,fetch:khe};Qe.forEach(Dw,(e,n)=>{if(e){try{Object.defineProperty(e,"name",{value:n})}catch{}Object.defineProperty(e,"adapterName",{value:n})}});const g3=e=>"- ".concat(e),Mhe=e=>Qe.isFunction(e)||e===null||e===!1;var v3={getAdapter:e=>{e=Qe.isArray(e)?e:[e];const{length:n}=e;let i,a;const l={};for(let u=0;u<n;u++){let h;if(i=e[u],a=i,!Mhe(i)&&(a=Dw[(h=String(i)).toLowerCase()],a===void 0))throw new Kn("Unknown adapter '".concat(h,"'"));if(a)break;l[h||"#"+u]=a}if(!a){const u=Object.entries(l).map(h=>{let[p,m]=h;return"adapter ".concat(p," ")+(m===!1?"is not supported by the environment":"is not available in the build")});throw new Kn("There is no suitable adapter to dispatch the request "+(n?u.length>1?`since :
`+u.map(g3).join(`
`):" "+g3(u[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return a},adapters:Dw};function Lw(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Uf(null,e)}function E3(e){return Lw(e),e.headers=Tc.from(e.headers),e.data=Iw.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),v3.getAdapter(e.adapter||Rw.adapter)(e).then(function(n){return Lw(e),n.data=Iw.call(e,e.transformResponse,n),n.headers=Tc.from(n.headers),n},function(n){return e3(n)||(Lw(e),n&&n.response&&(n.response.data=Iw.call(e,e.transformResponse,n.response),n.response.headers=Tc.from(n.response.headers))),et.reject(n)})}const _3="1.9.0",k_={};["object","boolean","number","function","string","symbol"].forEach((e,n)=>{k_[e]=function(i){return typeof i===e||"a"+(n<1?"n ":" ")+e}});const S3={};k_.transitional=function(e,n,i){function a(l,u){return"[Axios v"+_3+"] Transitional option '"+l+"'"+u+(i?". "+i:"")}return(l,u,h)=>{if(e===!1)throw new Kn(a(u," has been removed"+(n?" in "+n:"")),Kn.ERR_DEPRECATED);return n&&!S3[u]&&(S3[u]=!0,console.warn(a(u," has been deprecated since v"+n+" and will be removed in the near future"))),!e||e(l,u,h)}},k_.spelling=function(e){return(n,i)=>(console.warn("".concat(i," is likely a misspelling of ").concat(e)),!0)};var M_={assertOptions:function(e,n,i){if(typeof e!="object")throw new Kn("options must be an object",Kn.ERR_BAD_OPTION_VALUE);const a=Object.keys(e);let l=a.length;for(;l-- >0;){const u=a[l],h=n[u];if(h){const p=e[u],m=p===void 0||h(p,u,e);if(m!==!0)throw new Kn("option "+u+" must be "+m,Kn.ERR_BAD_OPTION_VALUE)}else if(i!==!0)throw new Kn("Unknown option "+u,Kn.ERR_BAD_OPTION)}},validators:k_};const cl=M_.validators;let F_=class{constructor(e){this.defaults=e||{},this.interceptors={request:new TU,response:new TU}}async request(e,n){try{return await this._request(e,n)}catch(i){if(i instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const l=a.stack?a.stack.replace(/^.+\n/,""):"";try{i.stack?l&&!String(i.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+l):i.stack=l}catch{}}throw i}}_request(e,n){typeof e=="string"?(n=n||{}).url=e:n=e||{},n=Xd(this.defaults,n);const{transitional:i,paramsSerializer:a,headers:l}=n;i!==void 0&&M_.assertOptions(i,{silentJSONParsing:cl.transitional(cl.boolean),forcedJSONParsing:cl.transitional(cl.boolean),clarifyTimeoutError:cl.transitional(cl.boolean)},!1),a!=null&&(Qe.isFunction(a)?n.paramsSerializer={serialize:a}:M_.assertOptions(a,{encode:cl.function,serialize:cl.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),M_.assertOptions(n,{baseUrl:cl.spelling("baseURL"),withXsrfToken:cl.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let u=l&&Qe.merge(l.common,l[n.method]);l&&Qe.forEach(["delete","get","head","post","put","patch","common"],O=>{delete l[O]}),n.headers=Tc.concat(u,l);const h=[];let p=!0;this.interceptors.request.forEach(function(O){typeof O.runWhen=="function"&&O.runWhen(n)===!1||(p=p&&O.synchronous,h.unshift(O.fulfilled,O.rejected))});const m=[];let E;this.interceptors.response.forEach(function(O){m.push(O.fulfilled,O.rejected)});let S,R=0;if(!p){const O=[E3.bind(this),void 0];for(O.unshift.apply(O,h),O.push.apply(O,m),S=O.length,E=et.resolve(n);R<S;)E=E.then(O[R++],O[R++]);return E}S=h.length;let w=n;for(R=0;R<S;){const O=h[R++],H=h[R++];try{w=O(w)}catch(B){H.call(this,B);break}}try{E=E3.call(this,w)}catch(O){return et.reject(O)}for(R=0,S=m.length;R<S;)E=E.then(m[R++],m[R++]);return E}getUri(e){return bU(i3((e=Xd(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}};Qe.forEach(["delete","get","head","options"],function(e){F_.prototype[e]=function(n,i){return this.request(Xd(i||{},{method:e,url:n,data:(i||{}).data}))}}),Qe.forEach(["post","put","patch"],function(e){function n(i){return function(a,l,u){return this.request(Xd(u||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:a,data:l}))}}F_.prototype[e]=n(),F_.prototype[e+"Form"]=n(!0)});var U_=F_;class kw{constructor(n){if(typeof n!="function")throw new TypeError("executor must be a function.");let i;this.promise=new et(function(l){i=l});const a=this;this.promise.then(l=>{if(!a._listeners)return;let u=a._listeners.length;for(;u-- >0;)a._listeners[u](l);a._listeners=null}),this.promise.then=l=>{let u;const h=new et(p=>{a.subscribe(p),u=p}).then(l);return h.cancel=function(){a.unsubscribe(u)},h},n(function(l,u,h){a.reason||(a.reason=new Uf(l,u,h),i(a.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(n){this.reason?n(this.reason):this._listeners?this._listeners.push(n):this._listeners=[n]}unsubscribe(n){if(!this._listeners)return;const i=this._listeners.indexOf(n);i!==-1&&this._listeners.splice(i,1)}toAbortSignal(){const n=new AbortController,i=a=>{n.abort(a)};return this.subscribe(i),n.signal.unsubscribe=()=>this.unsubscribe(i),n.signal}static source(){let n;return{token:new kw(function(a){n=a}),cancel:n}}}var Fhe=kw;const Mw={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Mw).forEach(e=>{let[n,i]=e;Mw[i]=n});var Uhe=Mw;const so=function e(n){const i=new U_(n),a=aU(U_.prototype.request,i);return Qe.extend(a,U_.prototype,i,{allOwnKeys:!0}),Qe.extend(a,i,null,{allOwnKeys:!0}),a.create=function(l){return e(Xd(n,l))},a}(Rw);so.Axios=U_,so.CanceledError=Uf,so.CancelToken=Fhe,so.isCancel=e3,so.VERSION=_3,so.toFormData=v_,so.AxiosError=Kn,so.Cancel=so.CanceledError,so.all=function(e){return et.all(e)},so.spread=function(e){return function(n){return e.apply(null,n)}},so.isAxiosError=function(e){return Qe.isObject(e)&&e.isAxiosError===!0},so.mergeConfig=Xd,so.AxiosHeaders=Tc,so.formToJSON=e=>QB(Qe.isHTMLForm(e)?new FormData(e):e),so.getAdapter=v3.getAdapter,so.HttpStatusCode=Uhe,so.default=so;var Yo=so;const Bhe=()=>{};function S0(){const e={promise:void 0,isResolved:!1,isRejected:!1,isFinished:!1,resolve:void 0,reject:void 0,cancel:Bhe};return e.promise=new et((n,i)=>{e.resolve=a=>{e.isFinished||(e.isResolved=!0,e.isFinished=!0,n(a),e.value=a)},e.reject=a=>{e.isFinished||(e.isRejected=!0,e.isFinished=!0,i(a))}}),e}const B_=new Map,V_=new Map,ll=new Map;let Ci=function(e){return e.WIN_10="Windows 10",e.WIN_81="Windows 8.1",e.WIN_8="Windows 8",e.WIN_7="Windows 7",e.WIN_VISTA="Windows Vista",e.WIN_SERVER_2003="Windows Server 2003",e.WIN_XP="Windows XP",e.WIN_2000="Windows 2000",e.ANDROID="Android",e.HARMONY_OS="HarmonyOS",e.OPEN_BSD="Open BSD",e.SUN_OS="Sun OS",e.LINUX="Linux",e.IOS="iOS",e.MAC_OS="Mac OS",e.CHROMIUM_OS="Chromium OS",e.QNX="QNX",e.UNIX="UNIX",e.BEOS="BeOS",e.OS_2="OS/2",e.SEARCH_BOT="Search Bot",e}({}),An=function(e){return e.CHROME="Chrome",e.SAFARI="Safari",e.EDGE="Edge",e.FIREFOX="Firefox",e.OPERA="OPR",e.QQ="QQBrowser",e.WECHAT="MicroMessenger",e}({});const Fw=new gle;let Rc=Fw.getResult(),Uw=null;function yn(e){if(!Uw){e&&Fw.setUA(e),Rc=Fw.getResult();const n=function(p){if(p.engine.name==="Blink"&&p.browser.name!=="WeChat")return An.CHROME;switch(p.browser.name){case"Chrome Headless":case"Chrome":case"Chromium":return An.CHROME;case"Safari":case"Mobile Safari":return An.SAFARI;case"Edge":return An.EDGE;case"Firefox":return An.FIREFOX;case"QQ":case"QQBrowser":return An.QQ;case"Opera":return An.OPERA;case"WeChat":return An.WECHAT;default:return p.browser.name||""}}(Rc),i=y3(Rc),a=function(p){return p.os.name==="Windows"?p.os.version?p.os.name+" "+p.os.version:p.os.name:p.os.name||""}(Rc),l=Rc.os.version,u=y3(Rc,!1),h=Rc.device.type;if(!(n&&i&&a&&l))return{name:n,version:i,os:a,osVersion:l,browserVersion:u,deviceType:h};Uw={name:n,version:i,os:a,osVersion:l,browserVersion:u,deviceType:h}}return Uw}function y3(e){let n,i=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return n=e.engine.name==="Blink"?e.engine.version||"":e.browser.version||"",i?n.split(".")[0]:n}function j_(){return yn().os}function C3(){const e=yn();return"".concat(e.os," ").concat(e.osVersion)}function $_(){const e=yn();return!!(Rc.engine.name==="WebKit"&&e.os===Ci.MAC_OS&&navigator.maxTouchPoints&&navigator.maxTouchPoints>0&&e.name!==An.SAFARI||co()&&e.name!==An.SAFARI)}function Wl(){return yn().name===An.CHROME}function $i(){return yn().name===An.SAFARI}function b3(){const e=yn();if(e.name!==An.SAFARI||!e.browserVersion)return!1;const n=e.browserVersion.split(".");return Number(n[0])>15||Number(n[0])===15&&Number(n[1])>=4}function T3(){return yn().name===An.EDGE}function Or(){return yn().name===An.FIREFOX}function co(){return yn().os===Ci.IOS}function Bf(e){const n=yn();return!(n.name!==An.CHROME||!n.osVersion)&&Number(n.version)>=e}function R3(e){const n=yn();return!(n.name!==An.CHROME||!n.osVersion)&&Number(n.version)<e}function Bw(e,n,i){const a=yn();return!(a.name!==e||!a.osVersion)&&(i?Number(a.version)>=n&&Number(a.version)<=i:Number(a.version)===n)}function Vw(e){const n=yn();return!(n.name!==An.EDGE||!n.osVersion)&&Number(n.version)>=e}function jw(e){const n=yn();return!(n.name!==An.FIREFOX||!n.osVersion)&&Number(n.version)>=e}function w3(e){const n=yn();return!(n.name!==An.SAFARI||!n.osVersion)&&Number(n.version)>=e}function I3(e,n,i){const a=yn();if(a.os!==Ci.IOS||!a.osVersion)return!1;const l=a.osVersion.split(".");return i?n&&Number(l[0])===e&&Number(l[1])>n||Number(l[0])>e:n?Number(l[0])===e&&Number(l[1])>=n||Number(l[0])>e:Number(l[0])>=e}function A3(e,n,i){const a=yn();if(a.os!==Ci.IOS||!a.osVersion)return!1;const l=a.osVersion.split(".");return i?n&&Number(l[0])===e&&Number(l[1])<n||Number(l[0])<e:n?Number(l[0])===e&&Number(l[1])<=n||Number(l[0])<e:Number(l[0])<=e}function $w(e,n,i){const a=yn();if(a.name!==An.SAFARI||!a.osVersion||!a.browserVersion)return!1;const l=a.browserVersion.split(".");return i?n&&Number(l[0])===e&&Number(l[1])<n||Number(l[0])<e:n?Number(l[0])===e&&Number(l[1])<=n||Number(l[0])<e:Number(l[0])<=e}function Hw(e){const n=yn();return!(n.name!==An.OPERA||!n.osVersion)&&Number(n.version)>=e}function O3(){const e=yn();if(e.os!==Ci.IOS||!e.osVersion)return!1;const n=e.osVersion.split(".");return Number(n[0])<14||Number(n[0])===14&&Number(n[1])<=6}function Vf(){const e=yn();if(e.os!==Ci.IOS||!e.osVersion)return!1;const n=e.osVersion.split(".");return Number(n[0])===15}function zw(){const e=yn();if(e.os!==Ci.IOS||!e.osVersion)return!1;const n=e.osVersion.split(".");return Number(n[0])===16}function x3(){const e=yn();if(e.os!==Ci.IOS||!e.osVersion)return!1;const n=e.osVersion.split(".");return Number(n[0])===15&&Number(n[1])>=1}function Hs(){return $i()&&navigator.maxTouchPoints>0}function N3(){return yn().name===An.WECHAT}function P3(){return window.navigator.appVersion&&window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)!==null&&window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)[1]<=35}function Ww(){const e=j_();return function(){const{deviceType:n}=yn();return n==="mobile"||n==="tablet"}()||e===Ci.ANDROID||e===Ci.IOS||e===Ci.HARMONY_OS}function Gl(){const e=yn();return e.name!==An.EDGE&&e.name!==An.SAFARI&&!!navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]./i)}function H_(){return j_()===Ci.ANDROID}function y0(){const e=yn();return H_()&&(e.name===An.CHROME||e.name===An.WECHAT||/chrome|chromium/i.test(navigator.userAgent))}function Bt(e,n,i){return(n=function(a){var l=function(u,h){if(typeof u!="object"||!u)return u;var p=u[Symbol.toPrimitive];if(p!==void 0){var m=p.call(u,"string");if(typeof m!="object")return m;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(u)}(a);return typeof l=="symbol"?l:l+""}(n))in e?Object.defineProperty(e,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[n]=i,e}function D3(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),i.push.apply(i,a)}return i}function Ve(e){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?D3(Object(i),!0).forEach(function(a){Bt(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):D3(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}let X=function(e){return e.UNEXPECTED_ERROR="UNEXPECTED_ERROR",e.UNEXPECTED_RESPONSE="UNEXPECTED_RESPONSE",e.TIMEOUT="TIMEOUT",e.INVALID_PARAMS="INVALID_PARAMS",e.NOT_READABLE="NOT_READABLE",e.NOT_SUPPORTED="NOT_SUPPORTED",e.INVALID_OPERATION="INVALID_OPERATION",e.OPERATION_ABORTED="OPERATION_ABORTED",e.WEB_SECURITY_RESTRICT="WEB_SECURITY_RESTRICT",e.EXCHANGE_SDP_FAILED="EXCHANGE_SDP_FAILED",e.ADD_CANDIDATE_FAILED="ADD_CANDIDATE_FAILED",e.DATACHANNEL_FAILED="DATACHANNEL_FAILED",e.NETWORK_ERROR="NETWORK_ERROR",e.NETWORK_TIMEOUT="NETWORK_TIMEOUT",e.NETWORK_RESPONSE_ERROR="NETWORK_RESPONSE_ERROR",e.API_INVOKE_TIMEOUT="API_INVOKE_TIMEOUT",e.ENUMERATE_DEVICES_FAILED="ENUMERATE_DEVICES_FAILED",e.DEVICE_NOT_FOUND="DEVICE_NOT_FOUND",e.ELECTRON_IS_NULL="ELECTRON_IS_NULL",e.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR="ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR",e.CHROME_PLUGIN_NO_RESPONSE="CHROME_PLUGIN_NO_RESPONSE",e.CHROME_PLUGIN_NOT_INSTALL="CHROME_PLUGIN_NOT_INSTALL",e.MEDIA_OPTION_INVALID="MEDIA_OPTION_INVALID",e.PERMISSION_DENIED="PERMISSION_DENIED",e.CONSTRAINT_NOT_SATISFIED="CONSTRAINT_NOT_SATISFIED",e.TRACK_IS_DISABLED="TRACK_IS_DISABLED",e.GET_VIDEO_ELEMENT_VISIBLE_ERROR="GET_VIDEO_ELEMENT_VISIBLE_ERROR",e.SHARE_AUDIO_NOT_ALLOWED="SHARE_AUDIO_NOT_ALLOWED",e.LOW_STREAM_ENCODING_ERROR="LOW_STREAM_ENCODING_ERROR",e.SET_ENCODING_PARAMETER_ERROR="SET_ENCODING_PARAMETER_ERROR",e.TRACK_STATE_UNREACHABLE="TRACK_STATE_UNREACHABLE",e.INVALID_UINT_UID_FROM_STRING_UID="INVALID_UINT_UID_FROM_STRING_UID",e.CAN_NOT_GET_PROXY_SERVER="CAN_NOT_GET_PROXY_SERVER",e.CAN_NOT_GET_GATEWAY_SERVER="CAN_NOT_GET_GATEWAY_SERVER",e.VOID_GATEWAY_ADDRESS="VOID_GATEWAY_ADDRESS",e.UID_CONFLICT="UID_CONFLICT",e.MULTI_UNILBS_RESPONSE_ERROR="MULTI_UNILBS_RESPONSE_ERROR",e.UPDATE_TICKET_FAILED="UPDATE_TICKET_FAILED",e.TOKEN_EXPIRE="TOKEN_EXPIRE",e.INVALID_LOCAL_TRACK="INVALID_LOCAL_TRACK",e.INVALID_TRACK="INVALID_TRACK",e.SENDER_NOT_FOUND="SENDER_NOT_FOUND",e.CREATE_OFFER_FAILED="CREATE_OFFER_FAILED",e.SET_ANSWER_FAILED="SET_ANSWER_FAILED",e.ICE_FAILED="ICE_FAILED",e.PC_CLOSED="PC_CLOSED",e.SENDER_REPLACE_FAILED="SENDER_REPLACE_FAILED",e.GET_LOCAL_CAPABILITIES_FAILED="GET_LOCAL_CAPABILITIES_FAILED",e.GET_LOCAL_CONNECTION_PARAMS_FAILED="GET_LOCAL_CONNECTION_PARAMS_FAILED",e.SUBSCRIBE_FAILED="SUBSCRIBE_FAILED",e.UNSUBSCRIBE_FAILED="UNSUBSCRIBE_FAILED",e.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",e.NO_ICE_CANDIDATE="NO_ICE_CANDIDATE",e.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS="CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS",e.EXIST_DISABLED_VIDEO_TRACK="EXIST_DISABLED_VIDEO_TRACK",e.INVALID_REMOTE_USER="INVALID_REMOTE_USER",e.REMOTE_USER_IS_NOT_PUBLISHED="REMOTE_USER_IS_NOT_PUBLISHED",e.CUSTOM_REPORT_SEND_FAILED="CUSTOM_REPORT_SEND_FAILED",e.CUSTOM_REPORT_FREQUENCY_TOO_HIGH="CUSTOM_REPORT_FREQUENCY_TOO_HIGH",e.FETCH_AUDIO_FILE_FAILED="FETCH_AUDIO_FILE_FAILED",e.READ_LOCAL_AUDIO_FILE_ERROR="READ_LOCAL_AUDIO_FILE_ERROR",e.DECODE_AUDIO_FILE_FAILED="DECODE_AUDIO_FILE_FAILED",e.WS_ABORT="WS_ABORT",e.WS_DISCONNECT="WS_DISCONNECT",e.WS_ERR="WS_ERR",e.EXTERNAL_SIGNAL_ABORT="EXTERNAL_SIGNAL_ABORT",e.LIVE_STREAMING_TASK_CONFLICT="LIVE_STREAMING_TASK_CONFLICT",e.LIVE_STREAMING_INVALID_ARGUMENT="LIVE_STREAMING_INVALID_ARGUMENT",e.LIVE_STREAMING_INTERNAL_SERVER_ERROR="LIVE_STREAMING_INTERNAL_SERVER_ERROR",e.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED="LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED",e.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED="LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED",e.LIVE_STREAMING_CDN_ERROR="LIVE_STREAMING_CDN_ERROR",e.LIVE_STREAMING_INVALID_RAW_STREAM="LIVE_STREAMING_INVALID_RAW_STREAM",e.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT="LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT",e.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE="LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE",e.LIVE_STREAMING_WARN_FREQUENT_REQUEST="LIVE_STREAMING_WARN_FREQUENT_REQUEST",e.WEBGL_INTERNAL_ERROR="WEBGL_INTERNAL_ERROR",e.BEAUTY_PROCESSOR_INTERNAL_ERROR="BEAUTY_PROCESSOR_INTERNAL_ERROR",e.CROSS_CHANNEL_WAIT_STATUS_ERROR="CROSS_CHANNEL_WAIT_STATUS_ERROR",e.CROSS_CHANNEL_FAILED_JOIN_SRC="CROSS_CHANNEL_FAILED_JOIN_SEC",e.CROSS_CHANNEL_FAILED_JOIN_DEST="CROSS_CHANNEL_FAILED_JOIN_DEST",e.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST="CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST",e.CROSS_CHANNEL_SERVER_ERROR_RESPONSE="CROSS_CHANNEL_SERVER_ERROR_RESPONSE",e.METADATA_OUT_OF_RANGE="METADATA_OUT_OF_RANGE",e.LOCAL_AEC_ERROR="LOCAL_AEC_ERROR",e.INVALID_PLUGIN="INVALID_PLUGIN",e.DISCONNECT_P2P="DISCONNECT_P2P",e.CONVERTING_IMAGEDATA_TO_BLOB_FAILED="CONVERTING_IMAGEDATA_TO_BLOB_FAILED",e.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED="CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED",e.INIT_DATACHANNEL_TIMEOUT="INIT_DATACHANNEL_TIMEOUT",e.CREATE_DATACHANNEL_ERROR="CREATE_DATACHANNEL_ERROR",e.DATACHANNEL_CONNECTION_TIMEOUT="DATACHANNEL_CONNECTION_TIMEOUT",e.PROHIBITED_OPERATION="PROHIBITED_OPERATION",e.IMAGE_MODERATION_UPLOAD_FAILED="IMAGE_MODERATION_UPLOAD_FAILED",e.P2P_MESSAGE_FAILED="P2P_MESSAGE_FAILED",e}({}),Re=class extends Error{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",i=arguments.length>2?arguments[2]:void 0;super(n),Bt(this,"code",void 0),Bt(this,"message",void 0),Bt(this,"data",void 0),Bt(this,"name","AgoraRTCException"),this.code=e,this.message="AgoraRTCError ".concat(this.code,": ").concat(n),this.data=i}toString(){return this.data?"".concat(this.message,`
data: `).concat(JSON.stringify(this.data)):this.message}print(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"error",n=arguments.length>1?arguments[1]:void 0;return e==="error"&&(n||console).error(this.toString()),e==="warning"&&(n||console).warn(this.toString()),this}throw(e){throw this.print("error",e),this}};function wc(e,n){if(typeof e!="boolean")throw new Re(X.INVALID_PARAMS,"Invalid ".concat(n,": The value is of the boolean type."))}function vi(e,n,i){if(!Ge(i).call(i,e))throw new Re(X.INVALID_PARAMS,"".concat(n," can only be set as ").concat(JSON.stringify(i)))}function Yn(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1e4;if(e<i||e>a||(!(arguments.length>4&&arguments[4]!==void 0)||arguments[4])&&!function(l){return typeof l=="number"&&l%1==0}(e))throw new Re(X.INVALID_PARAMS,"invalid ".concat(n,": the value range is [").concat(i,", ").concat(a,"]. integer only"))}function Gw(e,n){if(typeof e!="number"){if(!(e.min||e.max||e.ideal||e.exact))throw new Re(X.INVALID_PARAMS,"".concat(n," is not a valid ConstrainLong"));e.min!==void 0&&Yn(e.min,"".concat(n,".min"),0,1/0),e.max!==void 0&&Yn(e.max,"".concat(n,".max"),1,1/0),e.exact!==void 0&&Yn(e.exact,"".concat(n,".exact"),1,1/0),e.ideal!==void 0&&Yn(e.ideal,"".concat(n,".ideal"),1,1/0)}else Yn(e,n,1,1/0)}function Ni(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:255,l=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4];if(e==null)throw new Re(X.INVALID_PARAMS,"".concat(n||"param"," cannot be empty"));if(!L3(e,i,a,l))throw new Re(X.INVALID_PARAMS,"Invalid ".concat(n||"string param",": Length of the string: [").concat(i,",").concat(a,"].").concat(l?" ASCII characters only.":""))}function Kl(e,n){if(!Array.isArray(e))throw new Re(X.INVALID_PARAMS,"".concat(n," should be an array"))}function xr(e){return e==null}function L3(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:255,a=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];return typeof e=="string"&&e.length<=i&&e.length>=n&&(!a||function(l){if(typeof l!="string")return!1;for(let u=0;u<l.length;u+=1){const h=l.charCodeAt(u);if(h<0||h>255)return!1}return!0}(e))}var C0=function(e){return e.COVERED="COVERED",e.POSITION="POSITION",e.SIZE="SIZE",e.STYLE="STYLE",e}(C0||{}),Kw=function(e){return e.UNMOUNTED="UNMOUNTED",e.INVALID_HTML_ELEMENT="INVALID_HTML_ELEMENT",e}(Kw||{});const k3=new class{constructor(){Bt(this,"_clientSize",null),Bt(this,"getClientWidth",()=>document.documentElement?document.documentElement.clientWidth:document.body.clientWidth),Bt(this,"getClientHeight",()=>document.documentElement?document.documentElement.clientHeight:document.body.clientHeight),Bt(this,"getStyle",e=>window.getComputedStyle(e,null)),Bt(this,"checkCssVisibleProperty",e=>{var n;let i=!0;const a=this.getStyle(e),{display:l,visibility:u,opacity:h,filter:p}=a;return(l==="none"||Ge(n=["hidden","collapse"]).call(n,u)||Number(h)<.1)&&(i=!1),!!i&&(p&&p.split(" ").filter(m=>{var E;const S=m.split("(")[0];return Ge(E=["brightness","blur","opacity"]).call(E,S)}).map(m=>{const[E,S]=m.split(/\(|\)/);return[E,Number(S.match(/^[0-9\.]+/))]}).forEach(m=>{const[E,S]=m;switch(E){case"brightness":(S<.1||S>3)&&(i=!1);break;case"blur":S>3&&(i=!1);break;case"opacity":S<.1&&(i=!1)}}),i)}),Bt(this,"checkPropertyUpToAllParentNodes",(e,n)=>{let i=!0,a=!0;const l=h=>n(h);let u=e;for(;u&&a;)l(u)||(i=!1,a=!1),u=u.parentElement,u||(a=!1);return i}),Bt(this,"checkActualCssVisibleIncludeInherit",e=>this.checkPropertyUpToAllParentNodes(e,this.checkCssVisibleProperty)),Bt(this,"getSizeAboutClient",e=>{const{width:n,height:i,left:a,right:l,top:u,bottom:h}=e.getBoundingClientRect(),p=this.getClientWidth(),m=this.getClientHeight();return{width:n,height:i,left:a,right:l,top:u,bottom:h,clientWidth:p,clientHeight:m,clientMin:Math.min(p,m)}}),Bt(this,"checkActualSize",()=>{const{width:e,height:n,clientMin:i}=this._clientSize;return this.checkSizeIsVisible(e,n,i)}),Bt(this,"elementFromPoint",(e,n)=>document.elementFromPoint?document.elementFromPoint(e,n):null),Bt(this,"checkCoverForAPoint",(e,n,i)=>{const a=this.elementFromPoint(e,n);return a!==null&&a!==i}),Bt(this,"getPointPositionList",()=>{const{width:e,height:n,left:i,top:a}=this._clientSize,l=e/6,u=n/6,h=[],p=10**6;for(let m=0;m<5;m++)for(let E=0;E<5;E++){const S=(i*p+(m===0?.1:m===4?(l*m*p-1e5)/p:l*m)*p)/p,R=(a*p+(E===0?.1:E===4?(u*E*p-1e5)/p:u*E)*p)/p;h.push({x:S,y:R})}return[...h]}),Bt(this,"checkElementCover",e=>this.getPointPositionList().map(n=>this.checkCoverForAPoint(n.x,n.y,e)).filter(n=>!!n).length>6),Bt(this,"checkSizeIsVisible",(e,n,i)=>(e>50||i/e<=10)&&(n>50||i/n<=10)),Bt(this,"checkSizeOfPartInClient",()=>{const{left:e,right:n,top:i,bottom:a,clientHeight:l,clientWidth:u,clientMin:h}=this._clientSize;let p,m,E,S;if(e<0)p=0;else{if(!(e<u))return!1;p=e}if(n<0)return!1;if(m=n<u?n:u,i<0)E=0;else{if(!(i<l))return!1;E=i}if(a<0)return!1;S=a<l?a:l;const R=m-p,w=S-E;return this.checkSizeIsVisible(R,w,h)}),Bt(this,"returnHiddenResult",e=>(this._clientSize=null,{visible:!1,reason:e})),Bt(this,"checkOneElementVisible",e=>{if(e instanceof HTMLElement){if(this.checkElementIsMountedOnDom(e)){if(this.checkActualCssVisibleIncludeInherit(e)){if(this._clientSize=this.getSizeAboutClient(e),this.checkElementCover(e))return this.returnHiddenResult(C0.COVERED);{const n=this.checkActualSize(),i=this.checkSizeOfPartInClient();return n&&!i?this.returnHiddenResult(C0.POSITION):n?(this._clientSize=null,{visible:!0}):this.returnHiddenResult(C0.SIZE)}}return this.returnHiddenResult(C0.STYLE)}return this.returnHiddenResult(Kw.UNMOUNTED)}return this.returnHiddenResult(Kw.INVALID_HTML_ELEMENT)}),Bt(this,"checkElementIsMountedOnDom",e=>this.checkPropertyUpToAllParentNodes(e,n=>n.nodeName.toUpperCase()!=="HTML"?n.parentElement!==null:!!document.documentElement))}};function Yw(e){return new TextEncoder().encode(e)}const M3=function(e,n){const i=new Uint8Array(e.byteLength+n.byteLength);return i.set(new Uint8Array(e),0),i.set(new Uint8Array(n),e.byteLength),i},qw=async e=>function(n,i){let a="";return new Uint8Array(n).forEach(l=>{a+=l.toString(i).padStart(2,"0")}),a}(await crypto.subtle.digest("SHA-256",Yw(e)),16);class br{constructor(){Bt(this,"_events",{}),Bt(this,"addListener",this.on)}getListeners(n){return this._events[n]?this._events[n].map(i=>i.listener):[]}on(n,i){this._events[n]||(this._events[n]=[]);const a=this._events[n];this._indexOfListener(a,i)===-1&&a.push({listener:i,once:!1})}once(n,i){this._events[n]||(this._events[n]=[]);const a=this._events[n];this._indexOfListener(a,i)===-1&&a.push({listener:i,once:!0})}off(n,i){if(!this._events[n])return;const a=this._events[n],l=this._indexOfListener(a,i);l!==-1&&a.splice(l,1),this._events[n].length===0&&delete this._events[n]}removeAllListeners(n){n?delete this._events[n]:this._events={}}emit(n){this._events[n]||(this._events[n]=[]);const i=this._events[n].map(h=>h);for(var a=arguments.length,l=new Array(a>1?a-1:0),u=1;u<a;u++)l[u-1]=arguments[u];for(let h=0;h<i.length;h+=1){const p=i[h];p.once&&this.off(n,p.listener),p.listener.apply(this,l||[])}}safeEmit(n){for(var i=arguments.length,a=new Array(i>1?i-1:0),l=1;l<i;l++)a[l-1]=arguments[l];[...this._events[n]||[]].forEach(u=>{u.once&&this.off(n,u.listener);try{u.listener.apply(this,a)}catch(h){console.error("safeEmit event:".concat(n," error ").concat(h==null?void 0:h.toString()))}})}_indexOfListener(n,i){let a=n.length;for(;a--;)if(n[a].listener===i)return a;return-1}}let b0=null;function F3(){if(b0)return b0;if(window.electron)return b0=window.electron;if(!window.require)return null;try{return b0=window.require("electron"),b0}catch{return null}}let Ur=function(e){return e.CREATE_CLIENT="createClient",e.CHECK_SYSTEM_REQUIREMENTS="checkSystemRequirements",e.SET_AREA="setArea",e.PRELOAD="PRELOAD",e.CHECK_VIDEO_TRACK_IS_ACTIVE="checkVideoTrackIsActive",e.CHECK_AUDIO_TRACK_IS_ACTIVE="checkAudioTrackIsActive",e.CREATE_MIC_AUDIO_TRACK="createMicrophoneAudioTrack",e.CREATE_CUSTOM_AUDIO_TRACK="createCustomAudioTrack",e.CREATE_BUFFER_AUDIO_TRACK="createBufferSourceAudioTrack",e.CREATE_CAM_VIDEO_TRACK="createCameraVideoTrack",e.CREATE_CUSTOM_VIDEO_TRACK="createCustomVideoTrack",e.CREATE_MIC_AND_CAM_TRACKS="createMicrophoneAndCameraTracks",e.CREATE_SCREEN_VIDEO_TRACK="createScreenVideoTrack",e.SET_ENCRYPTION_CONFIG="Client.setEncryptionConfig",e.START_PROXY_SERVER="Client.startProxyServer",e.STOP_PROXY_SERVER="Client.stopProxyServer",e.SET_PROXY_SERVER="Client.setProxyServer",e.SET_TURN_SERVER="Client.setTurnServer",e.SET_CLIENT_ROLE="Client.setClientRole",e.SET_LOW_STREAM_PARAMETER="Client.setLowStreamParameter",e.ENABLE_DUAL_STREAM="Client.enableDualStream",e.DISABLE_DUAL_STREAM="Client.disableDualStream",e.JOIN="Client.join",e.LEAVE="Client.leave",e.PUBLISH="Client.publish",e.UNPUBLISH="Client.unpublish",e.SUBSCRIBE="Client.subscribe",e.MASS_SUBSCRIBE="Client.massSubscribe",e.MASS_UNSUBSCRIBE="Client.massUnsubscribe",e.UNSUBSCRIBE="Client.unsubscribe",e.RENEW_TOKEN="Client.renewToken",e.SET_REMOTE_VIDEO_STREAM_TYPE="Client.setRemoteVideoStreamType",e.SET_STREAM_FALLBACK_OPTION="Client.setStreamFallbackOption",e.ENABLE_AUDIO_VOLUME_INDICATOR="Client.enableAudioVolumeIndicator",e.SEND_CUSTOM_REPORT_MESSAGE="Client.sendCustomReportMessage",e.INSPECT_VIDEO_CONTENT="Client.inspectVideoContent",e.STOP_INSPECT_VIDEO_CONTENT="Client.stopInspectVideoContent",e.JOIN_FALLBACK_TO_PROXY="Client._joinFallbackToProxy",e.ON_LIVE_STREAM_WARNING="Client.onLiveStreamWarning",e.ON_LIVE_STREAM_ERROR="Client.onLiveStreamingError",e.START_LIVE_STREAMING="Client.startLiveStreaming",e.SET_LIVE_TRANSCODING="Client.setLiveTranscoding",e.STOP_LIVE_STREAMING="Client.stopLiveStreaming",e.START_CHANNEL_MEDIA_RELAY="Client.startChannelMediaRelay",e.UPDATE_CHANNEL_MEDIA_RELAY="Client.updateChannelMediaRelay",e.STOP_CHANNEL_MEDIA_RELAY="Client.stopChannelMediaRelay",e.REQUEST_CONFIG_DISTRIBUTE="_config-distribute-request",e.SET_CONFIG_DISTRIBUTE="_configDistribute",e.LOCAL_TRACK_SET_MUTED="LocalTrack.setMute",e.LOCAL_AUDIO_TRACK_PLAY="LocalAudioTrack.play",e.LOCAL_AUDIO_TRACK_PLAY_IN_ELEMENT="LocalAudioTrack.playInElement",e.LOCAL_AUDIO_TRACK_STOP="LocalAudioTrack.stop",e.LOCAL_AUDIO_TRACK_SET_VOLUME="LocalAudioTrack.setVolume",e.MIC_AUDIO_TRACK_SET_DEVICE="MicrophoneAudioTrack.setDevice",e.BUFFER_AUDIO_TRACK_START="BufferSourceAudioTrack.startProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_STOP="BufferSourceAudioTrack.stopProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_PAUSE="BufferSourceAudioTrack.pauseProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_RESUME="BufferSourceAudioTrack.resumeProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_SEEK="BufferSourceAudioTrack.seekAudioBuffer",e.LOCAL_VIDEO_TRACK_PLAY="LocalVideoTrack.play",e.LOCAL_VIDEO_TRACK_STOP="LocalVideoTrack.stop",e.LOCAL_VIDEO_TRACK_GET_VIDEO_VISIBLE="LocalVideoTrack.getVideoElementVisibleStatus",e.LOCAL_VIDEO_TRACK_BEAUTY="LocalVideoTrack.setBeautyEffect",e.LOCAL_VIDEO_SEND_SEI_DATA="LocalVideoTrack.sendSeiData",e.CAM_VIDEO_TRACK_SET_DEVICE="CameraVideoTrack.setDevice",e.CAM_VIDEO_TRACK_SET_ENCODER_CONFIG="CameraVideoTrack.setEncoderConfiguration",e.REMOTE_VIDEO_TRACK_PLAY="RemoteVideoTrack.play",e.REMOTE_VIDEO_TRACK_STOP="RemoteVideoTrack.stop",e.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE="RemoteVideoTrack.getVideoElementVisibleStatus",e.REMOTE_AUDIO_TRACK_PLAY="RemoteAudioTrack.play",e.REMOTE_AUDIO_TRACK_STOP="RemoteAudioTrack.stop",e.REMOTE_AUDIO_SET_VOLUME="RemoteAudioTrack.setVolume",e.REMOTE_AUDIO_SET_OUTPUT_DEVICE="RemoteAudioTrack.setOutputDevice",e.GET_MEDIA_STREAM_TRACK="Track.getMediaStreamTrack",e.STREAM_TYPE_CHANGE="streamTypeChange",e.CONNECTION_STATE_CHANGE="connectionStateChange",e.LOAD_CONFIG_FROM_LOCALSTORAGE="loadConfigFromLocalStorage",e.IMAGE_MODERATION_UPLOAD="imageModerationUpload",e.REPUB_AFTER_PC_CONNECTED="repubAfterPCConnected",e.PRELOAD_MEDIA_FAILED="preloadMediaFailed",e.MISMATCH_DTLS_PARAMETERS="mismatchDtlsParameters",e}({}),gr=function(e){return e.TRACER="tracer",e}({});function U3(e){return Yn(e.timeout,"config.timeout",0,1e5),Yn(e.timeoutFactor,"config.timeoutFactor",0,100,!1),Yn(e.maxRetryCount,"config.maxRetryConfig",0,1/0),Yn(e.maxRetryTimeout,"config.maxRetryTimeout",0,1/0),!0}let Vhe=function(e){return e[e.AUDIENCE_LEVEL_LOW_LATENCY=1]="AUDIENCE_LEVEL_LOW_LATENCY",e[e.AUDIENCE_LEVEL_ULTRA_LOW_LATENCY=2]="AUDIENCE_LEVEL_ULTRA_LOW_LATENCY",e[e.AUDIENCE_LEVEL_SYNC_LATENCY=3]="AUDIENCE_LEVEL_SYNC_LATENCY",e}({}),Fn=function(e){return e.LEAVE="LEAVE",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.UID_BANNED="UID_BANNED",e.FALLBACK="FALLBACK",e.IP_BANNED="IP_BANNED",e.CHANNEL_BANNED="CHANNEL_BANNED",e.LICENSE_MISSING="LICENSE_MISSING",e.LICENSE_EXPIRED="LICENSE_EXPIRED",e.LICENSE_MINUTES_EXCEEDED="LICENSE_MINUTES_EXCEEDED",e.LICENSE_PERIOD_INVALID="LICENSE_PERIOD_INVALID",e.LICENSE_MULTIPLE_SDK_SERVICE="LICENSE_MULTIPLE_SDK_SERVICE",e.LICENSE_ILLEGAL="LICENSE_ILLEGAL",e.TOKEN_EXPIRE="TOKEN_EXPIRE",e}({});function T0(e){if(!Array.isArray(e)||e.length<1)return!1;try{e.forEach(n=>{if(!n.urls)throw Error()})}catch{return!1}return!0}function B3(e){return Ni(e.turnServerURL,"turnServerURL"),Ni(e.username,"username"),Ni(e.password,"password"),e.udpport&&Yn(e.udpport,"udpport",1,99999,!0),e.forceturn&&wc(e.forceturn,"forceturn"),e.security&&wc(e.security,"security"),e.tcpport&&Yn(e.tcpport,"tcpport",1,99999,!0),!0}function Xw(e){return e.level!==void 0&&vi(e.level,"level",[1,2,3]),e.delay!==void 0&&Yn(e.delay,"delay",0,3e3,!0),!0}let pn=function(e){return e.PEERCONNECTION_STATE_CHANGE="peerconnection-state-change",e.AUDIO_METADATA="audio-metadata",e.AUDIO_PTS="audio-pts",e.CONNECTION_STATE_CHANGE="connection-state-change",e.MEDIA_RECONNECT_START="media-reconnect-start",e.MEDIA_RECONNECT_END="media-reconnect-end",e.IS_USING_CLOUD_PROXY="is-using-cloud-proxy",e.USER_JOINED="user-joined",e.USER_LEAVED="user-left",e.USER_PUBLISHED="user-published",e.USER_UNPUBLISHED="user-unpublished",e.USER_INFO_UPDATED="user-info-updated",e.CLIENT_BANNED="client-banned",e.CHANNEL_MEDIA_RELAY_STATE="channel-media-relay-state",e.CHANNEL_MEDIA_RELAY_EVENT="channel-media-relay-event",e.VOLUME_INDICATOR="volume-indicator",e.CRYPT_ERROR="crypt-error",e.ON_TOKEN_PRIVILEGE_WILL_EXPIRE="token-privilege-will-expire",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE="token-privilege-did-expire",e.NETWORK_QUALITY="network-quality",e.STREAM_TYPE_CHANGED="stream-type-changed",e.STREAM_FALLBACK="stream-fallback",e.RECEIVE_METADATA="receive-metadata",e.STREAM_MESSAGE="stream-message",e.LIVE_STREAMING_ERROR="live-streaming-error",e.LIVE_STREAMING_WARNING="live-streaming-warning",e.EXCEPTION="exception",e.ERROR="error",e.P2P_LOST="p2p_lost",e.JOIN_FALLBACK_TO_PROXY="join-fallback-to-proxy",e.CHANNEL_FALLBACK_TO_WEBSOCKET="channel-fallback-to-websocket",e.MEDIA_CONNECTION_TYPE_CHANGE="media-connection-type-change",e.PUBLISHED_USER_LIST="published-user-list",e.CONTENT_INSPECT_CONNECTION_STATE_CHANGE="content-inspect-connection-state-change",e.CONTENT_INSPECT_ERROR="content-inspect-error",e.CONTENT_INSPECT_RESULT="content-inspect-result",e.IMAGE_MODERATION_CONNECTION_STATE_CHANGE="image-moderation-connection-state-change",e}({}),Hi=function(e){return e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.MULTI_IP="MULTI_IP",e.TIMEOUT="TIMEOUT",e.OFFLINE="OFFLINE",e.LEAVE="LEAVE",e.P2P_FAILED="P2P_FAILED",e.FALLBACK="FALLBACK",e.REGIONAL_DISTRIBUTION="REGIONAL_DISTRIBUTION",e}({}),wa=function(e){return e.ONLINE="ONLINE",e.OFFLINE="OFFLINE",e}({}),jf=function(e){return e.NETWORK_STATE_CHANGE="NETWORK_STATE_CHANGE",e.ONLINE="ONLINE",e.OFFLINE="OFFLINE",e}({});function zi(e,n){for(var i=arguments.length,a=new Array(i>2?i-2:0),l=2;l<i;l++)a[l-2]=arguments[l];return e.getListeners(n).length===0?et.reject(new Re(X.UNEXPECTED_ERROR,"can not emit promise")):new et((u,h)=>{e.emit(n,...a,u,h)})}function Qn(e,n){if(e.getListeners(n).length===0)return et.resolve();for(var i=arguments.length,a=new Array(i>2?i-2:0),l=2;l<i;l++)a[l-2]=arguments[l];return zi(e,n,...a)}function ja(e,n){if(e.getListeners(n).length===0)return null;for(var i=arguments.length,a=new Array(i>2?i-2:0),l=2;l<i;l++)a[l-2]=arguments[l];return R0(e,n,...a)}function R0(e,n){let i=null,a=null;for(var l=arguments.length,u=new Array(l>2?l-2:0),h=2;h<l;h++)u[h-2]=arguments[h];if(e.emit(n,...u,p=>{i=p},p=>{a=p}),a!==null)throw a;if(i===null)throw new Re(X.UNEXPECTED_ERROR,"handler is not sync");return i}const Gr=new class extends br{set networkState(e){this.emit(jf.NETWORK_STATE_CHANGE,e,this._networkState),e===wa.ONLINE?this.emit(jf.ONLINE):e===wa.OFFLINE&&(this.onlineWaiter=new et(n=>{this.once(jf.ONLINE,()=>{this.onlineWaiter=void 0,n(wa.ONLINE)})}),this.emit(jf.OFFLINE)),this._networkState=e}get networkState(){return this._networkState}get isOnline(){return this._networkState===wa.ONLINE}constructor(){super(),Bt(this,"_moduleName","network-indicator"),Bt(this,"_networkState",wa.ONLINE),Bt(this,"onlineWaiter",void 0),window.addEventListener("online",()=>{this.networkState=wa.ONLINE}),window.addEventListener("offline",()=>{this.networkState=wa.OFFLINE})}};function z_(e,n){const i=e.indexOf(n);i!==-1&&e.splice(i,1)}function $f(e){const n=[];return e.forEach(i=>{n.indexOf(i)===-1&&n.push(i)}),n}function W_(e){et!==void 0?et.resolve().then(e):setTimeout(e,0)}function vr(e){return JSON.parse(JSON.stringify(e))}function Jd(e){try{return vr(e)}catch{return e}}const V3={};function Fu(e,n){V3[n]||(V3[n]=!0,e())}function Qd(e){const n=window.atob(e),i=new Uint8Array(new ArrayBuffer(n.length));for(let a=0;a<n.length;a+=1)i[a]=n.charCodeAt(a);return i}function Uu(e){let n="";for(let i=0;i<e.length;i+=1)n+=String.fromCharCode(e[i]);return window.btoa(n)}function j3(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:16,i=new TextEncoder().encode(e);if(i.length>n)i=i.slice(0,n);else if(i.length<n){const a=new Uint8Array(n);a.set(i),i=a}return i}function $3(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];const a=Ms(n).call(n,(h,p)=>h+p.length,0),l=new Uint8Array(new ArrayBuffer(a));let u=0;return n.forEach(h=>{l.set(h,u),u+=h.length}),l}function ul(e){return window.TextEncoder?new TextEncoder().encode(e).length:e.length}function H3(e){let n=0;return(/DingTalk/i.test(navigator.userAgent)||/AliApp/i.test(navigator.userAgent))&&e.realFormData&&(e=e.realFormData),e.forEach(i=>{n+=typeof i=="string"?ul(i):i.size}),n+138}function jhe(e){const n=new Re(X.TIMEOUT,"timeout");return new et((i,a)=>{window.setTimeout(()=>a(n),e)})}function Pi(e){return new et(n=>{window.setTimeout(n,e)})}function Zn(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:7,n=arguments.length>1?arguments[1]:void 0;const i=Math.random().toString(16).substr(2,e).toLowerCase();return i.length===e?"".concat(n).concat(i):"".concat(n).concat(i)+Zn(e-i.length,"")}function Zd(){return Zn(32,"").toUpperCase()}const G_=()=>{},z3=new class{constructor(){Bt(this,"fnMap",new Map)}throttleByKey(e,n,i,a){for(var l=arguments.length,u=new Array(l>4?l-4:0),h=4;h<l;h++)u[h-4]=arguments[h];if(this.fnMap.has(n)){const p=this.fnMap.get(n);if(p.threshold!==i){p.fn(...p.args),clearTimeout(p.timer);const m=window.setTimeout(()=>{const E=this.fnMap.get(n);E&&E.fn(...E.args),this.fnMap.delete(n)},i);this.fnMap.set(n,{fn:e,threshold:i,timer:m,args:u,skipFn:a})}else p.skipFn&&p.skipFn(...p.args),this.fnMap.set(n,Ve(Ve({},p),{},{fn:e,args:u,skipFn:a}))}else{const p=window.setTimeout(()=>{const m=this.fnMap.get(n);m&&m.fn(...m.args),this.fnMap.delete(n)},i);this.fnMap.set(n,{fn:e,threshold:i,timer:p,args:u,skipFn:a})}}},W3=z3.throttleByKey.bind(z3);function G3(e){return typeof e=="object"&&e!==null&&!(e instanceof RegExp)}function Jw(e,n){if(!G3(e)||!G3(n)||Array.isArray(e)&&!Array.isArray(n)||!Array.isArray(e)&&Array.isArray(n))return n;if(Array.isArray(n)&&Array.isArray(e)){const i=[...e];for(let a=0;a<n.length;a++)i[a]=Jw(e[a],n[a]);return i}{const i=Ve({},e);for(const a in n)Object.prototype.hasOwnProperty.call(n,a)&&(Object.prototype.hasOwnProperty.call(e,a)?i[a]=Jw(e[a],n[a]):i[a]=n[a]);return i}}function K3(e,n){let i=[0];if(n&&(i=new Array(n).fill(0)),e===0)return i;let a=0;for(;e>0&&(i[a]=255&e,e>>=8,a++,!n||a!==n););return i}function Hf(e){return typeof e=="number"?e:e.exact||e.ideal||e.max||e.min||0}function Qw(e){return Ms(e).call(e,(n,i)=>n+i,0)}function Y3(e){const n="0123456789abcdef";function i(Z){let pe,he="";for(pe=0;pe<=3;pe++)he+=n.charAt(Z>>8*pe+4&15)+n.charAt(Z>>8*pe&15);return he}function a(Z,pe){const he=(65535&Z)+(65535&pe);return(Z>>16)+(pe>>16)+(he>>16)<<16|65535&he}function l(Z,pe,he,re,Se,Ae){return a(function(Ne,Be){return Ne<<Be|Ne>>>32-Be}(a(a(pe,Z),a(re,Ae)),Se),he)}function u(Z,pe,he,re,Se,Ae,Ne){return l(pe&he|~pe&re,Z,pe,Se,Ae,Ne)}function h(Z,pe,he,re,Se,Ae,Ne){return l(pe&re|he&~re,Z,pe,Se,Ae,Ne)}function p(Z,pe,he,re,Se,Ae,Ne){return l(pe^he^re,Z,pe,Se,Ae,Ne)}function m(Z,pe,he,re,Se,Ae,Ne){return l(he^(pe|~re),Z,pe,Se,Ae,Ne)}const E=function(Z){let pe;const he=1+(Z.length+8>>6),re=new Array(16*he);for(pe=0;pe<16*he;pe++)re[pe]=0;for(pe=0;pe<Z.length;pe++)re[pe>>2]|=Z.charCodeAt(pe)<<pe%4*8;return re[pe>>2]|=128<<pe%4*8,re[16*he-2]=8*Z.length,re}(e);let S,R,w,O,H,B=1732584193,j=-271733879,q=-1732584194,Y=271733878;for(S=0;S<E.length;S+=16)R=B,w=j,O=q,H=Y,B=u(B,j,q,Y,E[S+0],7,-680876936),Y=u(Y,B,j,q,E[S+1],12,-389564586),q=u(q,Y,B,j,E[S+2],17,606105819),j=u(j,q,Y,B,E[S+3],22,-1044525330),B=u(B,j,q,Y,E[S+4],7,-176418897),Y=u(Y,B,j,q,E[S+5],12,1200080426),q=u(q,Y,B,j,E[S+6],17,-1473231341),j=u(j,q,Y,B,E[S+7],22,-45705983),B=u(B,j,q,Y,E[S+8],7,1770035416),Y=u(Y,B,j,q,E[S+9],12,-1958414417),q=u(q,Y,B,j,E[S+10],17,-42063),j=u(j,q,Y,B,E[S+11],22,-1990404162),B=u(B,j,q,Y,E[S+12],7,1804603682),Y=u(Y,B,j,q,E[S+13],12,-40341101),q=u(q,Y,B,j,E[S+14],17,-1502002290),j=u(j,q,Y,B,E[S+15],22,1236535329),B=h(B,j,q,Y,E[S+1],5,-165796510),Y=h(Y,B,j,q,E[S+6],9,-1069501632),q=h(q,Y,B,j,E[S+11],14,643717713),j=h(j,q,Y,B,E[S+0],20,-373897302),B=h(B,j,q,Y,E[S+5],5,-701558691),Y=h(Y,B,j,q,E[S+10],9,38016083),q=h(q,Y,B,j,E[S+15],14,-660478335),j=h(j,q,Y,B,E[S+4],20,-405537848),B=h(B,j,q,Y,E[S+9],5,568446438),Y=h(Y,B,j,q,E[S+14],9,-1019803690),q=h(q,Y,B,j,E[S+3],14,-187363961),j=h(j,q,Y,B,E[S+8],20,1163531501),B=h(B,j,q,Y,E[S+13],5,-1444681467),Y=h(Y,B,j,q,E[S+2],9,-51403784),q=h(q,Y,B,j,E[S+7],14,1735328473),j=h(j,q,Y,B,E[S+12],20,-1926607734),B=p(B,j,q,Y,E[S+5],4,-378558),Y=p(Y,B,j,q,E[S+8],11,-2022574463),q=p(q,Y,B,j,E[S+11],16,1839030562),j=p(j,q,Y,B,E[S+14],23,-35309556),B=p(B,j,q,Y,E[S+1],4,-1530992060),Y=p(Y,B,j,q,E[S+4],11,1272893353),q=p(q,Y,B,j,E[S+7],16,-155497632),j=p(j,q,Y,B,E[S+10],23,-1094730640),B=p(B,j,q,Y,E[S+13],4,681279174),Y=p(Y,B,j,q,E[S+0],11,-358537222),q=p(q,Y,B,j,E[S+3],16,-722521979),j=p(j,q,Y,B,E[S+6],23,76029189),B=p(B,j,q,Y,E[S+9],4,-640364487),Y=p(Y,B,j,q,E[S+12],11,-421815835),q=p(q,Y,B,j,E[S+15],16,530742520),j=p(j,q,Y,B,E[S+2],23,-995338651),B=m(B,j,q,Y,E[S+0],6,-198630844),Y=m(Y,B,j,q,E[S+7],10,1126891415),q=m(q,Y,B,j,E[S+14],15,-1416354905),j=m(j,q,Y,B,E[S+5],21,-57434055),B=m(B,j,q,Y,E[S+12],6,1700485571),Y=m(Y,B,j,q,E[S+3],10,-1894986606),q=m(q,Y,B,j,E[S+10],15,-1051523),j=m(j,q,Y,B,E[S+1],21,-2054922799),B=m(B,j,q,Y,E[S+8],6,1873313359),Y=m(Y,B,j,q,E[S+15],10,-30611744),q=m(q,Y,B,j,E[S+6],15,-1560198380),j=m(j,q,Y,B,E[S+13],21,1309151649),B=m(B,j,q,Y,E[S+4],6,-145523070),Y=m(Y,B,j,q,E[S+11],10,-1120210379),q=m(q,Y,B,j,E[S+2],15,718787259),j=m(j,q,Y,B,E[S+9],21,-343485551),B=a(B,R),j=a(j,w),q=a(q,O),Y=a(Y,H);return i(B)+i(j)+i(q)+i(Y)}let $he=1,q3=console,qi=class{static setLogger(e){q3=e}constructor(e,n){Bt(this,"id",void 0),Bt(this,"lockingPromise",et.resolve()),Bt(this,"locks",0),Bt(this,"name",""),Bt(this,"lockId",void 0),this.lockId=$he++,e&&(this.name=e),n&&(this.id=n),this.logger("created")}logger(e,n){const i=(this.id?"[".concat(this.id,"]"):"")+"[lock-".concat(this.name,"-").concat(this.lockId,"]"),a=e==="created"?"is ".concat(e,"."):"is ".concat(e,", current queue ").concat(this.locks,". ").concat(n??"");q3.debug("".concat(i," ").concat(a))}setId(e){this.id=e}get isLocked(){return this.locks>0}lock(e){let n;this.locks+=1,this.logger("locked",e);const i=new et(l=>{n=()=>{this.locks-=1,this.logger("unlocked",e),l()}}),a=this.lockingPromise.then(()=>n);return this.lockingPromise=this.lockingPromise.then(()=>i),a}};function zf(e,n){return function(i,a,l){const u=l.value;if(typeof u!="function")throw new Error("Cannot use mutex on object property.");return l.value=async function(){const h=this[n];if(!h)throw new Error("mutex property key ".concat(n," doesn't exist on ").concat(e));const p=await h.lock("From ".concat(e,".").concat(a));try{for(var m=arguments.length,E=new Array(m),S=0;S<m;S++)E[S]=arguments[S];return await u.apply(this,E)}finally{p()}},l}}const ei={timeout:500,timeoutFactor:1.5,maxRetryCount:1/0,maxRetryTimeout:1e4};function Zw(e,n){const i=Math.floor(n.timeout*Math.pow(n.timeoutFactor,e));return Math.min(n.maxRetryTimeout,i)}function Ic(e,n,i,a){const l=Object.assign({},ei,a);let u=l.timeout;const h=async()=>{await function(E){return new et(S=>{window.setTimeout(S,E)})}(u),u*=l.timeoutFactor,u=Math.min(l.maxRetryTimeout,u)};let p=!1;const m=new et(async(E,S)=>{n=n||(()=>!1),i=i||(()=>!0);for(let R=0;R<l.maxRetryCount;R+=1){if(p)return S(new Re(X.OPERATION_ABORTED));try{const w=await e();if(!n(w,R)||R+1===l.maxRetryCount)return E(w);await h()}catch(w){if(!i(w,R)||R+1===l.maxRetryCount)return S(w);await h()}}});return m.cancel=()=>p=!0,m}let K_,X3=class{constructor(e){Bt(this,"input",[]),Bt(this,"size",void 0),this.size=e}add(e){this.input.push(e),this.input.length>this.size&&this.input.splice(0,1)}mean(){var e;return this.input.length===0?0:Ms(e=this.input).call(e,(n,i)=>n+i)/this.input.length}},Y_=0,eI=0;function tI(e,n,i,a){return new et((l,u)=>{n.responseType=n.responseType||"json",n.data&&!i?(n.data=JSON.stringify(n.data),Y_+=ul(n.data)):i&&(n.data.size?Y_+=n.data.size:n.data instanceof FormData?Y_+=H3(n.data):Y_+=ul(JSON.stringify(n.data))),n.headers=n.headers||{},n.headers["Content-Type"]=n.headers["Content-Type"]||"application/json",n.method="POST",n.url=e,Yo.request(n).then(h=>{typeof h.data=="string"?eI+=ul(h.data):h.data instanceof ArrayBuffer||h.data instanceof Uint8Array?eI+=h.data.byteLength:eI+=ul(JSON.stringify(h.data)),a&&l({data:h.data,headers:h.headers}),l(h.data)}).catch(h=>{Yo.isCancel(h)?u(new Re(X.OPERATION_ABORTED,"cancel token canceled")):h.code==="ECONNABORTED"?u(new Re(X.NETWORK_TIMEOUT,h.message)):h.response?u(new Re(X.NETWORK_RESPONSE_ERROR,h.response.status)):u(new Re(X.NETWORK_ERROR,h.message))})})}async function Hhe(e,n){const i=new Blob([n.data],{type:"buffer"});return await tI(e,Ve(Ve({},n),{},{data:i,headers:{"Content-Type":"application/octet-stream"}}),!0)}const J3=()=>window.isSecureContext!==void 0;function zs(e){if(Array.isArray(e))return e.map(i=>i);if(!Q3(e))return e;const n={};for(const i in e){const a=e[i];Q3(a)||Array.isArray(a)?n[i]=zs(a):n[i]=a}return n}function Q3(e){return!(typeof e!="object"||Array.isArray(e)||!e)}let nI=class{constructor(e){Bt(this,"input",[]),Bt(this,"size",void 0),this.size=e}add(e){this.input.push(e),this.input.length>this.size&&this.input.splice(0,1)}diffMean(){return this.input.length===0?0:(this.input[this.input.length-1]-this.input[0])/this.input.length}};const dl={address:"unknown",candidateType:"unknown",id:"unknown",port:0,priority:0,protocol:"unknown",type:"unknown"},w0={timestamp:0,bitrate:{actualEncoded:0,transmit:0},sendPacketLossRate:0,recvPacketLossRate:0,videoRecv:[],videoSend:[],audioRecv:[],audioSend:[],selectedCandidatePair:{id:"unknown",localCandidate:dl,remoteCandidate:dl},updateInterval:0},Z3={firsCount:0,nacksCount:0,plisCount:0,framesDecodeCount:0,framesDecodeInterval:0,framesDecodeFreezeTime:0,decodeFrameRate:0,bytes:0,packetsLost:0,packetLostRate:0,packets:0,ssrc:0,qpSumPerFrame:0,framesDroppedCount:0,outputFrameRate:0,packetsDiscarded:0,framesAssembledFromMultiplePackets:0,totalProcessingDelay:0,avgDecodeMs:0,avgFramesAssembledFromMultiplePacketsMs:0,avgProcessingDelayMs:0,avgInterFrameDelayMs:0,totalAssemblyTime:0},eV={firsCount:0,nacksCount:0,plisCount:0,frameCount:0,bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0,jitterMs:0,qpSumPerFrame:0},tV={bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0,jitterMs:0},nV={jitterBufferMs:0,jitterMs:0,bytes:0,packetsLost:0,packetLostRate:0,packetsDiscarded:0,packets:0,ssrc:0,receivedFrames:0,droppedFrames:0,concealedSamples:0,totalSamplesReceived:0,silentConcealedSamples:0,concealmentEvents:0,freezeMs80:0,freezeMs200:0,freezeSamples80:0,freezeSamples200:0};let rI=class{constructor(e,n){Bt(this,"onFirstVideoReceived",void 0),Bt(this,"onFirstVideoDecoded",void 0),Bt(this,"onFirstAudioReceived",void 0),Bt(this,"onFirstVideoDecodedTimeout",void 0),Bt(this,"onFirstAudioDecoded",void 0),Bt(this,"onSelectedLocalCandidateChanged",void 0),Bt(this,"onSelectedRemoteCandidateChanged",void 0),Bt(this,"videoIsReady",!1),Bt(this,"videoIsReady2",{}),Bt(this,"pc",void 0),Bt(this,"options",void 0),Bt(this,"intervalTimer",void 0),Bt(this,"stats",zs(w0)),Bt(this,"isFirstVideoReceived",{}),Bt(this,"isFirstVideoDecoded",{}),Bt(this,"isFirstAudioReceived",{}),Bt(this,"isFirstAudioDecoded",{}),Bt(this,"isFirstVideoDecodedTimeout",{}),Bt(this,"lossRateWindowStats",[]),this.pc=e,this.options=n,this.intervalTimer=window.setInterval(async()=>{this.updateStats()},this.options.updateInterval)}getStats(){return this.stats}getSelectedCandidatePair(){return new et(e=>{e({local:Ve({},dl),remote:Ve({},dl)})})}setVideoIsReady(e){this.videoIsReady=e}setVideoIsReady2(e,n){this.videoIsReady2[e]=n}getVideoIsReady(e){return this.videoIsReady2[e]||!1}setIsFirstAudioDecoded(e){}destroy(){window.clearInterval(this.intervalTimer),this.pc=void 0}calcLossRate(e){this.lossRateWindowStats.push(e),this.lossRateWindowStats.length>this.options.lossRateInterval&&this.lossRateWindowStats.splice(0,1);const n=this.lossRateWindowStats.length,i=["videoSend","audioSend","videoRecv","audioRecv"];let a=0,l=0,u=0,h=0;for(const p of i)e[p].forEach((m,E)=>{if(!this.lossRateWindowStats[n-1][p][E]||!this.lossRateWindowStats[0][p][E])return;const S=this.lossRateWindowStats[n-1][p][E].packets-this.lossRateWindowStats[0][p][E].packets,R=this.lossRateWindowStats[n-1][p][E].packetsLost-this.lossRateWindowStats[0][p][E].packetsLost;p==="videoSend"||p==="audioSend"?(a+=S,u+=R):(l+=S,h+=R),Number.isNaN(S)||Number.isNaN(S)?m.packetLostRate=0:m.packetLostRate=S<=0||R<=0?0:R/(S+R)});e.sendPacketLossRate=a<=0||u<=0?0:u/(a+u),e.recvPacketLossRate=l<=0||h<=0?0:h/(l+h)}},zhe=class extends rI{constructor(){super(...arguments),Bt(this,"_stats",w0),Bt(this,"lastDecodeVideoReceiverStats",new Map)}async updateStats(){const e=await this._getStats(),n=this.statsResponsesToObjects(e);this._stats=zs(w0);const i=n.filter(l=>l.type==="ssrc");this.processSSRCStats(i);const a=n.find(l=>l.type==="VideoBwe");a&&this.processBandwidthStats(a),this._stats.timestamp=Date.now(),this.calcLossRate(this._stats),this.stats=this._stats}processBandwidthStats(e){this._stats.bitrate={actualEncoded:Number(e.googActualEncBitrate),targetEncoded:Number(e.googTargetEncBitrate),retransmit:Number(e.googRetransmitBitrate),transmit:Number(e.googTransmitBitrate)},this._stats.sendBandwidth=Number(e.googAvailableSendBandwidth)}processSSRCStats(e){e.forEach(n=>{var i;const a=Ge(i=n.id).call(i,"send");switch("".concat(n.mediaType,"_").concat(a?"send":"recv")){case"video_send":{const l=zs(eV);l.codec=n.googCodecName,l.adaptionChangeReason="none",n.googCpuLimitedResolution&&(l.adaptionChangeReason="cpu"),n.googBandwidthLimitedResolution&&(l.adaptionChangeReason="bandwidth"),l.avgEncodeMs=Number(n.googAvgEncodeMs),l.inputFrame={width:Number(n.googFrameWidthInput)||Number(n.googFrameWidthSent),height:Number(n.googFrameHeightInput)||Number(n.googFrameHeightSent),frameRate:Number(n.googFrameRateInput)},l.sentFrame={width:Number(n.googFrameWidthSent),height:Number(n.googFrameHeightSent),frameRate:Number(n.googFrameRateInput)},l.firsCount=Number(n.googFirReceived),l.nacksCount=Number(n.googNacksReceived),l.plisCount=Number(n.googPlisReceived),l.frameCount=Number(n.framesEncoded),l.bytes=Number(n.bytesSent),l.packets=Number(n.packetsSent),l.packetsLost=Number(n.packetsLost),l.ssrc=Number(n.ssrc),l.rttMs=Number(n.googRtt||0),this._stats.videoSend.push(l),this._stats.rtt=l.rttMs;break}case"video_recv":{const l=zs(Z3),u=this.lastDecodeVideoReceiverStats.get(Number(n.ssrc));if(l.codec=n.googCodecName,l.targetDelayMs=Number(n.googTargetDelayMs),l.renderDelayMs=Number(n.googRenderDelayMs),l.currentDelayMs=Number(n.googCurrentDelayMs),l.minPlayoutDelayMs=Number(n.googMinPlayoutDelayMs),l.decodeMs=Number(n.googDecodeMs),l.maxDecodeMs=Number(n.googMaxDecodeMs),l.receivedFrame={width:Number(n.googFrameWidthReceived),height:Number(n.googFrameHeightReceived),frameRate:Number(n.googFrameRateReceived)},l.decodedFrame={width:Number(n.googFrameWidthReceived),height:Number(n.googFrameHeightReceived),frameRate:Number(n.googFrameRateDecoded)},l.decodeFrameRate=Number(n.googFrameRateDecoded),l.outputFrame={width:Number(n.googFrameWidthReceived),height:Number(n.googFrameHeightReceived),frameRate:Number(n.googFrameRateOutput)},l.jitterBufferMs=Number(n.googJitterBufferMs),l.firsCount=Number(n.googFirsSent),l.nacksCount=Number(n.googNacksSent),l.plisCount=Number(n.googPlisSent),l.framesDecodeCount=Number(n.framesDecoded),l.bytes=Number(n.bytesReceived),l.packets=Number(n.packetsReceived),l.packetsLost=Number(n.packetsLost),l.ssrc=Number(n.ssrc),l.packets>0&&!this.isFirstVideoReceived[l.ssrc]&&(this.onFirstVideoReceived&&this.onFirstVideoReceived(l.ssrc),this.isFirstVideoReceived[l.ssrc]=!0),l.framesDecodeCount>0&&!this.isFirstVideoDecoded[l.ssrc]&&(this.onFirstVideoDecoded&&this.onFirstVideoDecoded(l.ssrc,l.decodedFrame.width,l.decodedFrame.height),this.isFirstVideoDecoded[l.ssrc]=!0),u){const h=u.stats,p=Date.now()-u.lts;l.framesDecodeFreezeTime=h.framesDecodeFreezeTime,l.framesDecodeInterval=h.framesDecodeInterval,l.framesDecodeCount>h.framesDecodeCount&&this.isFirstVideoDecoded[l.ssrc]?(u.lts=Date.now(),l.framesDecodeInterval=p,l.framesDecodeInterval>=this.options.freezeRateLimit&&(this.getVideoIsReady(parseInt(n.ssrc,10))?l.framesDecodeFreezeTime+=l.framesDecodeInterval:this.setVideoIsReady2(parseInt(n.ssrc,10),!0))):l.framesDecodeCount<u.stats.framesDecodeCount&&(l.framesDecodeInterval=0)}this.lastDecodeVideoReceiverStats.set(l.ssrc,{stats:Ve({},l),lts:Date.now()}),this._stats.videoRecv.push(l);break}case"audio_recv":{const l=zs(nV);l.codec=n.googCodecName,l.outputLevel=Math.abs(Number(n.audioOutputLevel))/32767,l.decodingCNG=Number(n.googDecodingCNG),l.decodingCTN=Number(n.googDecodingCTN),l.decodingCTSG=Number(n.googDecodingCTSG),l.decodingNormal=Number(n.googDecodingNormal),l.decodingPLC=Number(n.googDecodingPLC),l.decodingPLCCNG=Number(n.googDecodingPLCCNG),l.expandRate=Number(n.googExpandRate),l.accelerateRate=Number(n.googAccelerateRate),l.preemptiveExpandRate=Number(n.googPreemptiveExpandRate),l.secondaryDecodedRate=Number(n.googSecondaryDecodedRate),l.speechExpandRate=Number(n.googSpeechExpandRate),l.preferredJitterBufferMs=Number(n.googPreferredJitterBufferMs),l.jitterBufferMs=Number(n.googJitterBufferMs),l.jitterMs=Number(n.googJitterReceived),l.bytes=Number(n.bytesReceived),l.packets=Number(n.packetsReceived),l.packetsLost=Number(n.packetsLost),l.ssrc=Number(n.ssrc),l.receivedFrames=Number(n.googDecodingCTN)||Number(n.packetsReceived),l.droppedFrames=Number(n.googDecodingPLC)+Number(n.googDecodingPLCCNG)||Number(n.packetsLost),l.receivedFrames>0&&!this.isFirstAudioReceived[l.ssrc]&&(this.onFirstAudioReceived&&this.onFirstAudioReceived(l.ssrc),this.isFirstAudioReceived[l.ssrc]=!0),l.decodingNormal>0&&!this.isFirstAudioDecoded[l.ssrc]&&(this.onFirstAudioDecoded&&this.onFirstAudioDecoded(l.ssrc),this.isFirstAudioDecoded[l.ssrc]=!0),this._stats.audioRecv.push(l);break}case"audio_send":{const l=zs(tV);l.codec=n.googCodecName,l.inputLevel=Math.abs(Number(n.audioInputLevel))/32767,l.aecReturnLoss=Number(n.googEchoCancellationReturnLoss||0),l.aecReturnLossEnhancement=Number(n.googEchoCancellationReturnLossEnhancement||0),l.residualEchoLikelihood=Number(n.googResidualEchoLikelihood||0),l.residualEchoLikelihoodRecentMax=Number(n.googResidualEchoLikelihoodRecentMax||0),l.bytes=Number(n.bytesSent),l.packets=Number(n.packetsSent),l.packetsLost=Number(n.packetsLost),l.ssrc=Number(n.ssrc),l.rttMs=Number(n.googRtt||0),this._stats.rtt=l.rttMs,this._stats.audioSend.push(l);break}}})}_getStats(){return new et((e,n)=>{this.pc.getStats(e,n)})}statsResponsesToObjects(e){const n=[];return e.result().forEach(i=>{const a={id:i.id,timestamp:i.timestamp.valueOf().toString(),type:i.type};i.names().forEach(l=>{a[l]=i.stat(l)}),n.push(a)}),n}},I0=function(e){return e.BANDWIDTH="bandwidth",e.CPU="cpu",e.NONE="none",e.OTHER="other",e}({}),q_=function(e){return e.L1T1="L1T1",e.L1T2="L1T2",e.L1T3="L1T3",e.L1T3_KEY="L1T3_KEY",e.L2T1_KEY="L2T1_KEY",e.L2T2_KEY="L2T2_KEY",e.L2T3_KEY="L2T3_KEY",e.L3T1_KEY="L3T1_KEY",e.L3T2_KEY="L3T2_KEY",e.L3T3_KEY="L3T3_KEY",e}({}),iI=function(e){return e[e.new=0]="new",e[e.connecting=1]="connecting",e[e.connected=2]="connected",e[e.disconnected=3]="disconnected",e[e.failed=4]="failed",e[e.closed=5]="closed",e}({}),$a=function(e){return e.CERTIFICATE="certificate",e.CODEC="codec",e.CANDIDATE_PAIR="candidate-pair",e.LOCAL_CANDIDATE="local-candidate",e.REMOTE_CANDIDATE="remote-candidate",e.INBOUND="inbound-rtp",e.TRACK="track",e.OUTBOUND="outbound-rtp",e.PC="peer-connection",e.REMOTE_INBOUND="remote-inbound-rtp",e.REMOTE_OUTBOUND="remote-outbound-rtp",e.TRANSPORT="transport",e.CSRC="csrc",e.DATA_CHANNEL="data-channel",e.STREAM="stream",e.SENDER="sender",e.RECEIVER="receiver",e}({});var Wf=function(e){return e[e.kNone=1]="kNone",e[e.kMillisecondsFromSeconds=1e3]="kMillisecondsFromSeconds",e[e.kBytesToBits=8]="kBytesToBits",e}(Wf||{});function A0(e,n,i,a){let l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:Wf.kNone;if(!n)return;const u=Number(n[i]);if(typeof u!="number")return;const h=Number(n[a]);if(typeof h!="number")return;if(!e)return h?u/h*l:void 0;const p=Number(e[i]);if(typeof p!="number")return;const m=Number(e[a]);if(typeof m!="number")return;const E=h-m;return E?(u-p)/E*l:void 0}let rV=class extends rI{constructor(){super(...arguments),Bt(this,"_stats",w0),Bt(this,"report",void 0),Bt(this,"lastDecodeVideoReceiverStats",new Map),Bt(this,"lastVideoFramesRecv",new Map),Bt(this,"lastVideoFramesSent",new Map),Bt(this,"lastVideoFramesDecode",new Map),Bt(this,"lastVideoFramesOutput",new Map),Bt(this,"lastVideoJBDelay",new Map),Bt(this,"lastAudioJBDelay",new Map),Bt(this,"mediaBytesSent",new Map),Bt(this,"mediaBytesRetransmit",new Map),Bt(this,"mediaBytesTargetEncode",new Map),Bt(this,"lastDecodeAudioReceiverStats",new Map),Bt(this,"lastAudioConcealment",new Map),Bt(this,"lastEncoderMs",new Map)}async updateStats(){this.report=await this.pc.getStats(),this._stats=zs(w0),this.report.forEach(e=>{switch(e.type){case $a.OUTBOUND:case $a.INBOUND:{const n=e.mediaType||e.kind,i=!n&&"frameWidth"in e,a=!n&&!("frameWidth"in e);e.type===$a.OUTBOUND?n==="audio"||a?this.processAudioOutboundStats(e):(n==="video"||i)&&this.processVideoOutboundStats(e):e.type===$a.INBOUND&&(n==="audio"||a?this.processAudioInboundStats(e):(n==="video"||i)&&this.processVideoInboundStats(e));break}case $a.TRANSPORT:{const n=this.report.get(e.selectedCandidatePairId);n&&this.processCandidatePairStats(n);break}case $a.CANDIDATE_PAIR:e.selected&&this.processCandidatePairStats(e)}}),this.updateSendBitrate(),this._stats.updateInterval=Date.now()-this.stats.timestamp,this._stats.timestamp=Date.now(),this.calcLossRate(this._stats),this.stats=this._stats}async getSelectedCandidatePair(){const e=await this.pc.getStats(),n={local:Ve({},dl),remote:Ve({},dl)};return e.forEach(i=>{let a;if(i.type===$a.TRANSPORT&&(a=e.get(i.selectedCandidatePairId)),i.type===$a.CANDIDATE_PAIR&&i.selected&&(a=i),a){const l=(u,h)=>{u.type=h.type,u.id=h.id,h.address&&(u.address=h.address),h.candidateType&&(u.candidateType=h.candidateType),h.port&&(u.port=h.port),h.priority&&(u.priority=h.priority),h.protocol&&(u.protocol=h.protocol),h.relayProtocol&&(u.relayProtocol=h.relayProtocol)};if(a.localCandidateId){const u=e.get(a.localCandidateId);u&&l(n.local,u)}if(a.remoteCandidateId){const u=e.get(a.remoteCandidateId);u&&l(n.remote,u)}}}),n}processCandidatePairStats(e){if(this._stats.sendBandwidth=e.availableOutgoingBitrate||0,e.currentRoundTripTime&&(this._stats.rtt=1e3*e.currentRoundTripTime),this._stats.videoSend.forEach(n=>{e.currentRoundTripTime&&(n.rttMs=1e3*e.currentRoundTripTime)}),this._stats.audioSend.forEach(n=>{e.currentRoundTripTime&&(n.rttMs=1e3*e.currentRoundTripTime)}),this._stats.selectedCandidatePair.id=e.id,e.localCandidateId){const n=this.report.get(e.localCandidateId);n&&this.processCandidateStats(n)}if(e.remoteCandidateId){const n=this.report.get(e.remoteCandidateId);n&&this.processCandidateStats(n)}}processCandidateStats(e){let n;e.type===$a.LOCAL_CANDIDATE&&(n=this._stats.selectedCandidatePair.localCandidate),e.type===$a.REMOTE_CANDIDATE&&(n=this._stats.selectedCandidatePair.remoteCandidate),n&&(n.type=e.type,n.id=e.id,e.address&&(n.address=e.address),e.candidateType&&(n.candidateType=e.candidateType),e.port&&(n.port=e.port),e.priority&&(n.priority=e.priority),e.protocol&&(n.protocol=e.protocol),e.relayProtocol&&(n.relayProtocol=e.relayProtocol),e.type===$a.LOCAL_CANDIDATE&&this.stats.selectedCandidatePair.localCandidate.id!==n.id&&this.onSelectedLocalCandidateChanged&&this.onSelectedLocalCandidateChanged(Ve({},n),Ve({},this.stats.selectedCandidatePair.localCandidate)),e.type===$a.REMOTE_CANDIDATE&&this.stats.selectedCandidatePair.remoteCandidate.id!==n.id&&this.onSelectedRemoteCandidateChanged&&this.onSelectedRemoteCandidateChanged(Ve({},n),Ve({},this.stats.selectedCandidatePair.remoteCandidate)))}processAudioInboundStats(e){let n=this._stats.audioRecv.find(a=>a.ssrc===e.ssrc);n||(n=zs(nV),this._stats.audioRecv.push(n)),n.ssrc=e.ssrc,n.packets=e.packetsReceived,n.packetsLost=e.packetsLost,n.packetsDiscarded=e.packetsDiscarded,n.bytes=e.bytesReceived,n.jitterMs=1e3*e.jitter,n.retransmittedBytesReceived=e.retransmittedBytesReceived,n.retransmittedPacketsReceived=e.retransmittedPacketsReceived,n.totalProcessingDelay=e.totalProcessingDelay,n.jitterBufferEmittedCount=e.jitterBufferEmittedCount;const i=this.lastDecodeAudioReceiverStats.get(n.ssrc);n.avgProcessingDelayMs=A0(i,n,"totalProcessingDelay","jitterBufferEmittedCount",Wf.kMillisecondsFromSeconds),this.processAudioTrackReceiverStats(e,e.trackId,n),this.calculateAudioFreeze(n,i,e),e.codecId&&(n.codec=this.getCodecFromCodecStats(e.codecId)),n.receivedFrames||(n.receivedFrames=e.packetsReceived),n.droppedFrames||(n.droppedFrames=e.packetsLost),n.receivedFrames>0&&!this.isFirstAudioReceived[n.ssrc]&&(this.onFirstAudioReceived&&this.onFirstAudioReceived(n.ssrc),this.isFirstAudioReceived[n.ssrc]=!0),n.outputLevel&&n.outputLevel>0&&!this.isFirstAudioDecoded[n.ssrc]&&(this.onFirstAudioDecoded&&this.onFirstAudioDecoded(n.ssrc),this.isFirstAudioDecoded[n.ssrc]=!0),typeof e.concealedSamples=="number"&&(n.concealedSamples=e.concealedSamples),this.lastDecodeAudioReceiverStats.set(n.ssrc,Ve({},n))}calculateAudioFreeze(e,n,i){const a=this.lastAudioConcealment.get(e.ssrc);if(n!=null&&a!=null){const l=a.lts,u=i.timestamp,h=u-l;if(h<=0)return;const p=e.concealedSamples-n.concealedSamples-0,m=a.nonSilent+p,E=e.totalSamplesReceived-n.totalSamplesReceived;if(E<=0)return;const S=80*E/h,R=200*E/h,w=h/E;let O=0;e.freezeSamples80=n.freezeSamples80,e.freezeMs80=n.freezeMs80,m>S&&(a.plc80>0?(e.freezeSamples80+=p,e.freezeMs80+=Math.round(p*w)):(e.freezeSamples80+=m,e.freezeMs80+=Math.round(m*w)),O=a.plc80+1);let H=0;e.freezeSamples200=n.freezeSamples200,e.freezeMs200=n.freezeMs200,m>R&&(a.plc200>0?(e.freezeSamples200+=p,e.freezeMs200+=Math.round(p*w)):(e.freezeSamples200+=m,e.freezeMs200+=Math.round(m*w)),H=a.plc200+1),this.lastAudioConcealment.set(e.ssrc,{nonSilent:p,lts:u,plc80:O,plc200:H})}else e.freezeSamples80=0,e.freezeSamples200=0,e.freezeMs80=0,e.freezeMs200=0,this.lastAudioConcealment.set(e.ssrc,{nonSilent:0,lts:i.timestamp,plc80:0,plc200:0})}processVideoInboundStats(e){let n=this._stats.videoRecv.find(h=>h.ssrc===e.ssrc);n||(n=zs(Z3),this._stats.videoRecv.push(n)),n.ssrc=e.ssrc,n.packets=e.packetsReceived,n.packetsLost=e.packetsLost,n.bytes=e.bytesReceived,n.firsCount=e.firCount,n.nacksCount=e.nackCount,n.plisCount=e.pliCount,n.framesDecodeCount=e.framesDecoded,n.framesDroppedCount=e.framesDropped,n.totalInterFrameDelay=e.totalInterFrameDelay,n.totalSquaredInterFrameDelay=e.totalSquaredInterFrameDelay,n.totalFreezesDuration=e.totalFreezesDuration,n.totalProcessingDelay=e.totalProcessingDelay,n.packetsDiscarded=e.packetsDiscarded,n.framesAssembledFromMultiplePackets=e.framesAssembledFromMultiplePackets,n.totalAssemblyTime=e.totalAssemblyTime,n.keyFramesDecoded=e.keyFramesDecoded,n.retransmittedBytesReceived=e.retransmittedBytesReceived,n.retransmittedPacketsReceived=e.retransmittedPacketsReceived;const i=this.lastDecodeVideoReceiverStats.get(n.ssrc),a=this.lastVideoFramesDecode.get(n.ssrc),l=this.lastVideoFramesOutput.get(n.ssrc),u=Date.now();if(n.framesDecodeCount>0&&!this.isFirstVideoDecoded[n.ssrc]){const h=n.decodedFrame?n.decodedFrame.width:0,p=n.decodedFrame?n.decodedFrame.height:0;this.onFirstVideoDecoded&&this.onFirstVideoDecoded(n.ssrc,h,p),this.isFirstVideoDecoded[n.ssrc]=!0}if(i){const h=i.stats,p=u-i.lts;n.framesDecodeFreezeTime=h.framesDecodeFreezeTime,n.framesDecodeInterval=h.framesDecodeInterval,!this.isFirstVideoDecoded[n.ssrc]&&p>this.options.firstVideoDecodedTimeout&&!this.isFirstVideoDecodedTimeout[n.ssrc]&&(this.onFirstVideoDecodedTimeout&&this.onFirstVideoDecodedTimeout(n.ssrc),this.isFirstVideoDecodedTimeout[n.ssrc]=!0),n.framesDecodeCount>h.framesDecodeCount&&this.isFirstVideoDecoded[n.ssrc]?(i.lts=Date.now(),n.framesDecodeInterval=p,n.framesDecodeInterval>=this.options.freezeRateLimit&&(this.getVideoIsReady(parseInt(e.ssrc))?n.framesDecodeFreezeTime+=n.framesDecodeInterval:this.setVideoIsReady2(parseInt(e.ssrc,10),!0))):n.framesDecodeCount<h.framesDecodeCount&&(n.framesDecodeInterval=0),e.framesDecoded&&e.qpSum&&(i.stats.framesDecodeCount>e.framesDecoded?n.qpSumPerFrame=e.qpSum/e.framesDecoded:n.qpSumPerFrame=(e.qpSum-i.qpSum)/(e.framesDecoded-i.stats.framesDecodeCount))}e.totalDecodeTime&&(n.decodeMs=1e3*e.totalDecodeTime,n.avgDecodeMs=A0(i==null?void 0:i.stats,n,"decodeMs","framesDecodeCount")),n.avgProcessingDelayMs=A0(i==null?void 0:i.stats,n,"totalProcessingDelay","framesDecodeCount",Wf.kMillisecondsFromSeconds),n.avgFramesAssembledFromMultiplePacketsMs=A0(i==null?void 0:i.stats,n,"totalAssemblyTime","framesAssembledFromMultiplePackets",Wf.kMillisecondsFromSeconds),n.avgInterFrameDelayMs=A0(i==null?void 0:i.stats,n,"totalInterFrameDelay","framesDecodeCount",Wf.kMillisecondsFromSeconds),a&&u-a.lts>=800?(n.decodeFrameRate=Math.round((n.framesDecodeCount-a.count)/((u-a.lts)/1e3)),this.lastVideoFramesDecode.set(n.ssrc,{count:n.framesDecodeCount,lts:u,rate:n.decodeFrameRate})):a?n.decodeFrameRate=a.rate:this.lastVideoFramesDecode.set(n.ssrc,{count:n.framesDecodeCount,lts:u,rate:0}),n.framesDroppedCount&&e.framesReceived&&(l&&u-l.lts>=800?(n.outputFrameRate=Math.round((e.framesReceived-n.framesDroppedCount-l.count)/((u-l.lts)/1e3)),this.lastVideoFramesOutput.set(n.ssrc,{count:e.framesReceived-n.framesDroppedCount,lts:u,rate:Math.max(n.outputFrameRate,0)})):l?n.outputFrameRate=l.rate:this.lastVideoFramesOutput.set(n.ssrc,{count:e.framesReceived-n.framesDroppedCount,lts:u,rate:0})),this.processVideoTrackReceiverStats(e,e.trackId,n),e.codecId&&(n.codec=this.getCodecFromCodecStats(e.codecId)),e.framerateMean&&(n.framesRateFirefox=e.framerateMean),n.packets>0&&!this.isFirstVideoReceived[n.ssrc]&&(this.onFirstVideoReceived&&this.onFirstVideoReceived(n.ssrc),this.isFirstVideoReceived[n.ssrc]=!0),this.lastDecodeVideoReceiverStats.set(n.ssrc,{stats:Ve({},n),lts:i?i.lts:Date.now(),qpSum:e.qpSum})}processVideoOutboundStats(e){let n=this._stats.videoSend.find(a=>a.ssrc===e.ssrc);n||(n=zs(eV),this._stats.videoSend.push(n));const i=this.mediaBytesSent.get(e.ssrc);if(i)i.add(e.bytesSent);else{const a=new nI(10);a.add(e.bytesSent),this.mediaBytesSent.set(e.ssrc,a)}if(e.retransmittedBytesSent!==void 0){const a=this.mediaBytesRetransmit.get(e.ssrc);if(a)a.add(e.retransmittedBytesSent);else{const l=new nI(10);l.add(e.retransmittedBytesSent),this.mediaBytesRetransmit.set(e.ssrc,l)}}if(e.totalEncodedBytesTarget){const a=this.mediaBytesTargetEncode.get(e.ssrc);if(a)a.add(e.totalEncodedBytesTarget);else{const l=new nI(10);l.add(e.totalEncodedBytesTarget),this.mediaBytesTargetEncode.set(e.ssrc,l)}}if(n.ssrc=e.ssrc,n.bytes=e.bytesSent,n.packets=e.packetsSent,n.firsCount=e.firCount,n.nacksCount=e.nackCount,n.plisCount=e.pliCount,n.frameCount=e.framesEncoded,n.adaptionChangeReason=e.qualityLimitationReason,n.scalabilityMode=e.scalabilityMode,n.retransmittedBytesSent=e.retransmittedBytesSent,n.retransmittedPacketsSent=e.retransmittedPacketsSent,n.hugeFramesSent=e.hugeFramesSent,n.keyFramesEncoded=e.keyFramesEncoded,n.targetBitrate=e.targetBitrate,e.totalEncodeTime&&e.framesEncoded){const a=this.lastEncoderMs.get(e.ssrc);if(!a||a.lastFrameCount>e.framesEncoded)n.avgEncodeMs=1e3*e.totalEncodeTime/e.framesEncoded;else{const l=e.framesEncoded-a.lastFrameCount,u=e.totalEncodeTime-a.lastEncoderTime;n.avgEncodeMs=1e3*u/l}}if(e.framesEncoded&&e.qpSum){const a=this.lastEncoderMs.get(e.ssrc);!a||a.lastFrameCount>e.framesEncoded?n.qpSumPerFrame=e.qpSum/e.framesEncoded:n.qpSumPerFrame=(e.qpSum-a.lastQpSum)/(e.framesEncoded-a.lastFrameCount)}if(this.lastEncoderMs.set(e.ssrc,{lastFrameCount:e.framesEncoded,lastEncoderTime:e.totalEncodeTime,lastQpSum:e.qpSum,lts:Date.now()}),e.codecId&&(n.codec=this.getCodecFromCodecStats(e.codecId)),e.mediaSourceId&&this.processVideoMediaSource(e.mediaSourceId,n),this.processVideoTrackSenderStats(e,e.trackId,n),e.remoteId)this.processRemoteInboundStats(e.remoteId,n);else{const a=this.findRemoteStatsId(e.ssrc,$a.REMOTE_INBOUND);a&&this.processRemoteInboundStats(a,n)}}processAudioOutboundStats(e){let n=this._stats.audioSend.find(i=>i.ssrc===e.ssrc);if(n||(n=zs(tV),this._stats.audioSend.push(n)),n.ssrc=e.ssrc,n.packets=e.packetsSent,n.bytes=e.bytesSent,n.retransmittedBytesSent=e.retransmittedBytesSent,n.retransmittedPacketsSent=e.retransmittedPacketsSent,e.mediaSourceId&&this.processAudioMediaSource(e.mediaSourceId,n),e.codecId&&(n.codec=this.getCodecFromCodecStats(e.codecId)),this.processAudioTrackSenderStats(e,e.trackId,n),e.remoteId)this.processRemoteInboundStats(e.remoteId,n);else{const i=this.findRemoteStatsId(e.ssrc,$a.REMOTE_INBOUND);i&&this.processRemoteInboundStats(i,n)}}findRemoteStatsId(e,n){var i;const a=Array.from(ba(i=this.report).call(i)).find(l=>l.type===n&&l.ssrc===e);return a?a.id:null}processVideoMediaSource(e,n){const i=this.report.get(e);i&&i.width&&i.height&&i.framesPerSecond&&(n.inputFrame={width:i.width,height:i.height,frameRate:i.framesPerSecond})}processAudioMediaSource(e,n){const i=this.report.get(e);i&&(n.inputLevel=i.audioLevel)}processVideoTrackSenderStats(e,n,i){var a,l,u,h;const p=n?this.report.get(n):void 0,m=(a=p==null?void 0:p.framesSent)!==null&&a!==void 0?a:e.framesSent;if(typeof m!="number")return;let E=(l=p==null?void 0:p.frameWidth)!==null&&l!==void 0?l:e.frameWidth,S=(u=p==null?void 0:p.frameHeight)!==null&&u!==void 0?u:e.frameHeight,R=(h=p==null?void 0:p.framesPerSecond)!==null&&h!==void 0?h:e.framesPerSecond;if(typeof E=="number"&&typeof S=="number"||(E=0,S=0),R==null){const w=Date.now(),O=this.lastVideoFramesSent.get(i.ssrc);O&&w-O.lts>=800?(R=Math.round((m-O.count)/((w-O.lts)/1e3)),this.lastVideoFramesSent.set(i.ssrc,{count:m,lts:w,rate:R})):O?R=O.rate:this.lastVideoFramesSent.set(i.ssrc,{count:m,lts:w,rate:0})}i.sentFrame={width:E,height:S,frameRate:Math.max(0,R)}}processVideoTrackReceiverStats(e,n,i){var a,l,u,h,p;const m=n?this.report.get(n):void 0,E=(a=m==null?void 0:m.framesReceived)!==null&&a!==void 0?a:e.framesReceived,S=(l=m==null?void 0:m.frameWidth)!==null&&l!==void 0?l:e.frameWidth,R=(u=m==null?void 0:m.frameHeight)!==null&&u!==void 0?u:e.frameHeight,w=(h=m==null?void 0:m.jitterBufferDelay)!==null&&h!==void 0?h:e.jitterBufferDelay,O=(p=m==null?void 0:m.jitterBufferEmittedCount)!==null&&p!==void 0?p:e.jitterBufferEmittedCount;if(typeof E=="number"){const H=this.lastVideoFramesRecv.get(i.ssrc),B=Date.now();i.framesReceivedCount=E;let j=0;H&&B-H.lts>=800?(j=Math.round((E-H.count)/((B-H.lts)/1e3)),this.lastVideoFramesRecv.set(i.ssrc,{count:E,lts:B,rate:j})):H?j=H.rate:this.lastVideoFramesRecv.set(i.ssrc,{count:E,lts:B,rate:0}),i.receivedFrame={width:S||0,height:R||0,frameRate:j||0},i.decodedFrame={width:S||0,height:R||0,frameRate:i.decodeFrameRate||0},i.outputFrame={width:S||0,height:R||0,frameRate:i.outputFrameRate||i.decodeFrameRate||0}}if(w&&O){const H=this.lastVideoJBDelay.get(i.ssrc)||{jitterBufferDelay:0,jitterBufferEmittedCount:0,jitterBufferMs:0};let B=H.jitterBufferMs;const j=O-H.jitterBufferEmittedCount;j>0&&(B=1e3*(w-H.jitterBufferDelay)/j),i.jitterBufferMs=B,i.currentDelayMs=Math.round(B),this.lastVideoJBDelay.set(i.ssrc,{jitterBufferDelay:w,jitterBufferEmittedCount:O,jitterBufferMs:i.currentDelayMs})}}processAudioTrackSenderStats(e,n,i){var a,l,u,h;const p=n?this.report.get(n):void 0,m=(a=(l=p==null?void 0:p.echoReturnLoss)!==null&&l!==void 0?l:e.echoReturnLoss)!==null&&a!==void 0?a:0,E=(u=(h=p==null?void 0:p.echoReturnLossEnhancement)!==null&&h!==void 0?h:e.echoReturnLossEnhancement)!==null&&u!==void 0?u:0;i.aecReturnLoss=m,i.aecReturnLossEnhancement=E}processAudioTrackReceiverStats(e,n,i){var a,l,u,h,p,m,E,S,R;const w=n?this.report.get(n):void 0,O=(a=w==null?void 0:w.removedSamplesForAcceleration)!==null&&a!==void 0?a:e.removedSamplesForAcceleration,H=(l=w==null?void 0:w.totalSamplesReceived)!==null&&l!==void 0?l:e.totalSamplesReceived,B=(u=w==null?void 0:w.jitterBufferDelay)!==null&&u!==void 0?u:e.jitterBufferDelay,j=(h=w==null?void 0:w.jitterBufferEmittedCount)!==null&&h!==void 0?h:e.jitterBufferEmittedCount,q=(p=w==null?void 0:w.audioLevel)!==null&&p!==void 0?p:e==null?void 0:e.audioLevel,Y=(m=w==null?void 0:w.totalSamplesDuration)!==null&&m!==void 0?m:e==null?void 0:e.totalSamplesDuration,Z=(E=w==null?void 0:w.concealedSamples)!==null&&E!==void 0?E:e.concealedSamples,pe=(S=w==null?void 0:w.silentConcealedSamples)!==null&&S!==void 0?S:e.silentConcealedSamples,he=(R=w==null?void 0:w.concealmentEvents)!==null&&R!==void 0?R:e.concealmentEvents;if(typeof H=="number"&&(i.totalSamplesReceived=H),typeof pe=="number"&&(i.silentConcealedSamples=pe),typeof he=="number"&&(i.concealmentEvents=he),typeof Z=="number"&&(i.concealedSamples=Z),O&&H&&(i.accelerateRate=O/H),B&&j){const Se=this.lastAudioJBDelay.get(i.ssrc)||{jitterBufferDelay:0,jitterBufferEmittedCount:0,jitterBufferMs:0};let Ae=Se.jitterBufferMs;const Ne=j-Se.jitterBufferEmittedCount;Ne>0&&(Ae=1e3*(B-Se.jitterBufferDelay)/Ne),i.jitterBufferMs=Math.round(Ae),this.lastAudioJBDelay.set(i.ssrc,{jitterBufferDelay:B,jitterBufferEmittedCount:j,jitterBufferMs:i.jitterBufferMs})}i.outputLevel=q;let re=1920;Y&&H&&(re=H/Y/50,i.receivedFrames=Math.round(H/re)),Z&&(i.droppedFrames=Math.round(Z/re))}processRemoteInboundStats(e,n){const i=this.report.get(e);i&&(n.packetsLost=i.packetsLost,i.roundTripTime&&(n.rttMs=1e3*i.roundTripTime),i.jitter&&(n.jitterMs=1e3*i.jitter),i.timestamp&&(n.timestamp=i.timestamp))}getCodecFromCodecStats(e){const n=this.report.get(e);if(!n)return"";const i=n.mimeType.match(/\/(.*)$/);return i&&i[1]?i[1]:""}updateSendBitrate(){let e=0,n=null,i=null;this.mediaBytesSent.forEach(l=>{e+=l.diffMean()}),this.mediaBytesRetransmit.forEach(l=>{n=n===null?l.diffMean():n+l.diffMean()}),this.mediaBytesTargetEncode.forEach(l=>{i=i===null?l.diffMean():i+l.diffMean()});const a=n!==null?e-n:e;this._stats.bitrate={actualEncoded:8*a/(this.options.updateInterval/1e3),transmit:8*e/(this.options.updateInterval/1e3)},n!==null&&(this._stats.bitrate.retransmit=8*n/(this.options.updateInterval/1e3)),i!==null&&(this._stats.bitrate.targetEncoded=8*i/(this.options.updateInterval/1e3))}},Whe=class extends rI{updateStats(){return et.resolve()}};function oI(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:250,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:8,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:500,l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1e4;const u=function(){const h=navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]*/i);return h&&h[0]?Number(h[0].split("/")[1]):null}();return u?u<76?new zhe(e,{updateInterval:n,lossRateInterval:i,freezeRateLimit:a,firstVideoDecodedTimeout:l}):new rV(e,{updateInterval:n,lossRateInterval:i,freezeRateLimit:a,firstVideoDecodedTimeout:l}):function(h){if(!window.RTCStatsReport)return!1;const p=h.getStats();return!!(p instanceof et||function(m){return!!m&&(typeof m=="object"||typeof m=="function")&&typeof m.then=="function"}(p))}(e)?new rV(e,{updateInterval:n,lossRateInterval:i,freezeRateLimit:a,firstVideoDecodedTimeout:l}):new Whe(e,{updateInterval:n,lossRateInterval:i,freezeRateLimit:a,firstVideoDecodedTimeout:l})}const iV="websdk_ng_install_id";function aI(){try{if(Q("INSTALL_ID"))return Q("INSTALL_ID");let e=window.localStorage.getItem(iV);return e||(e=Zd(),window.localStorage.setItem(iV,e)),zn("INSTALL_ID",e),e}catch{return}}const cs=function(e){if(e.match(/[0-9]+\.[0-9]+\.[0-9]+$/))return e;const n=e.match(/([0-9]+\.[0-9]+\.[0-9]+)\-([0-9]+)/);if(n&&n[1]&&n[2]){const i=n[1],a=n[2];return"".concat(i,".").concat(a)}return"4.0.0.999"}("4.24.0"),sI=function(){try{return JSON.parse("true")===!0}catch{return!0}}();let eh=function(e){return e.Default="default",e.Auto="auto",e.Relay="relay",e.SdRtn="sd-rtn",e}({});const Wi=function(){const e="us".concat("erna","me"),n="pa".concat("sswo","rd"),i=["t","s","t"];i.splice(1,0,"e");const a=i.join(""),l=[];for(let p=0;p<6;p++)l.push("1");const u=l.join(""),h={};return h[e]=a,h[n]=u,Object.assign(h,{turnServerURL:"",tcpport:3433,udpport:3478,forceturn:!1})}();window.DEFAULT_TURN_CONFIG=Wi;const X_={ENABLE_PUBLISHED_USER_LIST:!0,MAX_SUBSCRIPTION:50,SUBSCRIBE_AUDIO_FILTER_TOPN:void 0,ENABLE_PUBLISH_AUDIO_FILTER:void 0,ENABLE_USER_LICENSE_CHECK:!0,DISABLE_FEC:void 0,ENABLE_NTP_REPORT:!1,ENABLE_INSTANT_VIDEO:!1,ENABLE_USER_AUTO_REBALANCE_CHECK:!0,ENABLE_LOSSBASED_BWE:!0,ENABLE_AUT_CC:!0,FORCE_ENABLE_AUT_CC:!1,ENABLE_CC_FALLBACK:void 0,SUBSCRIBE_TWCC:!0,PUBLISH_TWCC:!1,ENABLE_SVC_DEFAULT_CODECS:["H264","VP8","VP9","AV1"],SVC:[],ENABLE_FULL_LINK_AV_SYNC:!1,SVC_MODE:null,PRE_SUB_NUM:1,ENABLE_AUT_FEEDBACK:!0,SVC_EXTENDED:["VP9"]},cI={MIN_FRAME_RATE:1,MAX_FRAME_RATE:30,MAX_THRESHOLD_FRAMERATE:30,BITRATE_MIN_THRESHOLD:100,BITRATE_MAX_THRESHOLD:100,MAX_SCALE:5,BWE_SCALE_UP_THRESHOLD:.6,BWE_SCALE_DOWN_THRESHOLD:.6,PERF_SCALE_UP_THRESHOLD:.7,PERF_SCALE_DOWN_THRESHOLD:.6,MOTION_RESOLUTION_FACTOR:.8,MOTION_BITRATE_FACTOR:.6,DETAIL_FRAMERATE_FACTOR:.8,DETAIL_BITRATE_FACTOR:.6,BALANCE_RESOLUTION_FACTOR:.9,BALANCE_FRAMERATE_FACTOR:.9,BALANCE_BITRATE_FACTOR:.6,OVERUSE_TIMES_THRESHOLD:10,UNDERUSE_TIMES_THRESHOLD:40},lI="v4.24.0-0-gf2267710-dirty(7/31/2025, 7:00:42 PM)",uI={ENABLE_EVENT_REPORT:!0,UPLOAD_LOG:!1,ENABLE_AG_ADAPTATION:!0,FORCE_AG_HIGH_FRAMERATE:!1,FORCE_SUPPORT_AG_ADAPTATION:!1,ENCODER_CONFIG_LIMIT:{},CAMERA_CAPTURE_CONFIG:void 0,ENABLE_PRELOAD:!0,NEW_ICE_RESTART:!0,ICE_RESTART_INTERVAL:1e4,RESTART_SEQUENCE:["udp_tcp_relay","relay"],FIRST_TCP_CANDIDATE:!1,FIRST_TCP_CANDIDATE_INTERVAL:1e3,TURN_DOMAIN:"edge.agora.io",USE_TURN_IP:!0,NEW_TURN_MODE:4,NEW_FORCE_TURN:!1,USE_NEW_RENDER_FREEZE_TIME:!1,ENCODE_EXCEPTION_TIMES:5,ENABLE_ENCODE_EXCEPTION:!0,ENCODE_EXCEPTION_VALIDATE_CODEC:["h264"],VIDEO_ENCODER_CONFIG_LIST:[{width:240,height:180},{width:320,height:240},{width:400,height:300},{width:480,height:360},{width:560,height:420},{width:640,height:480}],DELETE_NEQ_AFTER_USER_LEAVE:!0},fr=Ve(Ve(Ve(Ve({},uI),{},{PROCESS_ID:"",ENCRYPT_AES:!0,AREAS:["CHINA","GLOBAL"],WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io","webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io","webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-web-2.ap.sd-rtn.com","cds-ap-web-3.agora.io","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-web-2.ap.sd-rtn.com","sua-ap-web-3.agora.io","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-ap-web-1.agora.io","uap-web-2.ap.sd-rtn.com","uap-ap-web-3.agora.io","uap-web-4.ap.sd-rtn.com"],LOG_UPLOAD_SERVER:"logservice.agora.io",EVENT_REPORT_DOMAIN:"statscollector-1.agora.io",EVENT_REPORT_BACKUP_DOMAIN:"web-2.statscollector.sd-rtn.com",GATEWAY_ADDRESS:[],GATEWAY_WSS_ADDRESS:"",LIVE_STREAMING_ADDRESS:"",HTTP_CONNECT_TIMEOUT:5e3,SIGNAL_REQUEST_TIMEOUT:1e4,REPORT_STATS:!0,NOT_REPORT_EVENT:[],PING_PONG_TIME_OUT:10,WEBSOCKET_TIMEOUT_MIN:1e4,EVENT_REPORT_SEND_INTERVAL:3e3,CONFIG_DISTRIBUTE_INTERVAL:3e5,ENABLE_CONFIG_DISTRIBUTE:!0,CANDIDATE_TIMEOUT:5e3,SHOW_REPORT_INVOKER_LOG:!1,SHOW_REPORT_USER_INVOKER_LOG:!0,JOIN_EXTEND:"",PUB_EXTEND:"",SUB_EXTEND:"",FORCE_TURN:!1,TURN_ENABLE_TCP:!0,TURN_ENABLE_UDP:!0,MAX_UPLOAD_CACHE:50,UPLOAD_CACHE_INTERVAL:2e3,AJAX_REQUEST_CONCURRENT:3,REPORT_APP_SCENARIO:void 0,GATEWAY_DOMAINS:["edge.agora.io","edge.sd-rtn.com"],CONNECT_GATEWAY_WITHOUT_DOMAIN:!1,WORKER_DOMAIN:"edge.agora.io",EVENT_REPORT_RETRY:!0,CHROME_FORCE_PLAN_B:!1,AUDIO_SOURCE_VOLUME_UPDATE_INTERVAL:400,AUDIO_SOURCE_AVG_VOLUME_DURATION:3e3,AUDIO_VOLUME_INDICATION_INTERVAL:2e3,VOLUME_VOICE_WEIGHT:10,GET_VOLUME_OF_MUTED_AUDIO_TRACK:!1,STATS_UPDATE_INTERVAL:250,NORMAL_EVENT_QUEUE_CAPACITY:100,CUSTOM_REPORT:!0,CUSTOM_REPORT_LIMIT:20,PROXY_SERVER_TYPE2:"webnginx-proxy.agora.io",PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com","webrtc-cloud-proxy.agora.io"],CUSTOM_PUB_ANSWER_MODIFIER:null,CUSTOM_SUB_ANSWER_MODIFIER:null,CUSTOM_PUB_OFFER_MODIFIER:null,CUSTOM_SUB_OFFER_MODIFIER:null,DSCP_TYPE:"high",REMOVE_NEW_CODECS:!0,FRAGEMENT_LENGTH:3,WEBSOCKET_COMPRESS:!1,SIMULCAST:!1,CHECK_VIDEO_VISIBLE_INTERVAL:3e4,CHECK_LOCAL_STATS_INTERVAL:250,PROFILE_SWITCH_INTERVAL:2e3,UNSUPPORTED_VIDEO_CODEC:[],ENUMERATE_DEVICES_INTERVAL:!1,ENUMERATE_DEVICES_INTERVAL_TIME:1e4,USE_NEW_TOKEN:!1,CLOSE_AFB_FOR_LOCAL_AP:!0,JOIN_MAX_CONCURRENCY:6,JOIN_WITH_FALLBACK_SIGNAL_PROXY:!0,JOIN_WITH_FALLBACK_MEDIA_PROXY:!0,JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE:!1,JOIN_GATEWAY_TRY_443PORT_DURATION:2e3,JOIN_GATEWAY_USE_443PORT_ONLY:!1,JOIN_GATEWAY_USE_DUAL_DOMAIN:!0,JOIN_GATEWAY_FALLBACK_PORT:443,USE_TURN_SERVER_OF_GATEWAY:!1,H264_PROFILE_LEVEL_ID:"",USE_NEW_LOG:!1,LOG_VERSION:3,MEDIA_DEVICE_CONSTRAINTS:null,ENCRYPT_PROXY_USERNAME_AND_PSW:!0,SDP_LOGGING:!1,CSP_DETECTED_HOSTNAME_LIST:["agora.io","sd-rtn.com"],REMOTE_AUDIO_TRACK_USES_WEB_AUDIO:!1,LOCAL_AUDIO_TRACK_USES_WEB_AUDIO:!1,BITRATE_ADAPTER_TYPE:"STANDARD_BITRATE",AI_DENOISER_PARAMETERS:{excludedLinks:[]},ADJUST_3A_FROM_PLUGINS:!0,RAISE_H264_BASELINE_PRIORITY:!0,FILTER_SEND_H264_BASELINE:!1,FIRST_H264_PROFILE_LEVEL_ID:"42001f",FIRST_PACKETIZATION_MODE:"",X_GOOGLE_START_BITRATE:void 0,NEW_REPORT_SERVER:!1,NEW_REPORT_SERVER_DOMAINS:["data-reporting.agora.io","data-reporting.agora.io"],VIDEO_INSPECT_WORKER_MESSAGE_LENGTH_LIMIT:3e5,VIDEO_INSPECT_INTERVAL_MINIMUM:1e3,VIDEO_INSPECT_QUALITY_RATIO:.9,VIDEO_INSPECT_WORKER_MANAGER_HOST:"edge.agora.io",VIDEO_INSPECT_WORKER_MANAGER_PORT:"",VIDEO_INSPECT_WORKER_PORT:"",SHOW_VIDEO_INSPECT_WORKER_MESSAGE:!1,STATS_COLLECTOR_PORT:443,FORCE_TURN_TCP:!1,WEBAUDIO_INIT_OPTIONS:void 0,FILTER_VIDEO_FEC:!0,FILTER_AUDIO_FEC:!1,CHROME_DUAL_STREAM_USE_ENCODING:!0,DISABLE_DUAL_STREAM_USE_ENCODING:!1,EXTENSION_USAGE_UPLOAD_INTERVAL:1e4,ICE_RESTART:!0,FINGERPRINT:null,ENABLE_VIDEO_FRAME_CALLBACK:!0,VIDEO_FREEZE_DURATION:500,SPATIALIZER_PARAMETERS:{},UPLOAD_LOG_INTERVAL:3e3,UPLOAD_LOG_REQUEST_RETRY_INTERVAL:2e3,UPLOAD_LOG_REQUEST_MAX_RETRY_INTERVAL:2e4,UPLOAD_LOG_TRY_INTERVAL_WHILE_OFF:5e3,UPLOAD_LOG_RETRY_INTERVAL_V1:1e4,UPLOAD_LOG_TWICE_RETRY_INTERVAL_V1:200,UPLOAD_LOG_LENGTH_EACH_TIME:10,APP_TYPE:0,DISABLE_WEBAUDIO:!1,CHANNEL_MEDIA_RELAY_SERVERS:void 0,KEEP_LAST_FRAME:!0,FORWARD_P2P_CREATION:!0,SYNC_GROUP:!0,BLOCK_LOCAL_CLIENT:!1,ENABLE_AUDIO_TOPN:!1,ENABLE_AUDIO_METADATA:!1,ENABLE_AUDIO_PTS:!1,TOPN_SMOOTH_LEVEL:void 0,TOPN_NEW_SPEAKER_DELAY:void 0,TOPN_SWITCH_HOLD_MS:void 0,TOPN_AUDIO_GAIN:void 0,TOPN_SILENCE_THRESHOLD:250,AP_AREA:!0,ENABLE_ENCODED_TRANSFORM:!1,ENABLE_VIDEO_SEI:!1,IMAGE_MODERATION_WORKER_HOST:"edge.agora.io",IMAGE_MODERATION_WORKER_MESSAGE_LENGTH_LIMIT:3e5,IMAGE_MODERATION_INTERVAL_MINIMUM:1e3,SHOW_IMAGE_MODERATION_WORKER_MESSAGE:!1,IMAGE_MODERATION_QUALITY_RATIO:.9,IMAGE_MODERATION_UPLOAD_REPORT_INTERVAL:5e3,SHOW_GLOBAL_CLIENT_LIST:!1,DATASTREAM_MAX_RETRANSMITS:10,TCP_CANDIDATE_ONLY:!1,EXTERNAL_SIGNAL_REQUEST_TIMEOUT:3e3,SHOW_P2P_LOG:!1,MAX_P2P_TIMEOUT:3e4,P2P_TOKEN_INTERVAL:1e3,SHOW_DATASTREAM2_LOG:!1,RESTRICTION_SET_PLAYBACK_DEVICE:!0,USE_PURE_ENCRYPTION_MASTER_KEY:!1,ENABLE_AUDIO_RED:!1,OPUS_PTIME:void 0,AUDIO_DUPLICATE_NUM:void 0,ENABLE_ABSSENDTIME_AS_SENTTS:!0,ACCOUNT_REGISTER_RETRY_TIMEOUT:1,ACCOUNT_REGISTER_RETRY_RATIO:2,ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX:6e4,ACCOUNT_REGISTER_RETRY_COUNT_MAX:1e5,AUDIO_CONTEXT:null,WEBCS_BACKUP_CONNECT_TIMEOUT:6e3,PLAYER_STATE_DEFER:2e3,SIGNAL_REQUEST_WATCH_INTERVAL:1e3,FILEPATH_LENMAX:255,DUALSTREAM_OPERATION_CHECK:!0,MEDIA_ELEMENT_EXISTS_DEPTH:3,SHIM_CANDIDATE:!1,LEAVE_MSG_TIMEOUT:2e3,STATS_FILTER:{transportId:!0,googTrackId:!0},FILTER_VIDEO_CODEC:[],UNSUPPORTED_VIDEO_UPLINK_CODEC:[],UNSUPPORTED_VIDEO_DOWNLINK_CODEC:[],USE_NEW_NETWORK_CONFIG:!1,AUTO_RESET_AUDIO_ROUTE:!1,PLUGIN_INFO:[],OVERUSE_DETECTOR_PARAMS:cI,CUSTOM_ADAPTATION_DEFAULT_MODE:"",HIDE_NO_POSTER:!1,AP_CACHE_NUM:10,AP_UPDATE_INTERVAL:12e4,AP_CACHE_LIFETIME:12e4,MAX_PRELOAD_ASYNC_LENGTH:3,DISABLE_SCREEN_SHARE_REMB:!1},X_),{},{USE_CANDIDATE_FROM_AP_DETAIL:!1,AP_REQUEST_DETAIL:void 0,ENABLE_ROLE_SELECT_EDGE:!1,CLIENT_ROLE_OPTIONS:void 0,COMPATIBLE_SDP_EXTENSION:["gdpr_forbidden"],LIMIT_BITRATE:void 0,EXPERIMENTS:{},USE_PUB_RTX:!0,USE_SUB_RTX:!0,ENABLE_DATASTREAM_2:!1,USE_XR:!0,ENABLE_PREALLOC_PC:!1,ENABLE_PRE_SUB:!1,ENABLE_SVC:!1,ENABLE_PRE_RENDER:!1,FORCE_DISABLE_AUTO_SUB:!1,ENABLE_PRE_SUB_WITH_PRE_PC:!1,PRE_USE_LOCAL_CODECS:!0},{INSTALL_ID:""}),{},{K_MIN_RENDER_DELAY:66,USE_STANDARD_BITRATE_DEFAULT:!1,VIDEO_NEW_BITRATE_RATIO:void 0,VIDEO_STANDARD_BITRATE_VERSION:2,BASELINE_MORE_H264_BITRATE_RATIO:1.1});function zn(e,n,i){var a,l,u;Ge(a=Object.keys(fr)).call(a,e)&&(!i&&Ge(l=Object.keys(Ac)).call(l,e)||(fr[e]=n,e!=="ENABLE_VIDEO_SEI"&&e!=="ENABLE_AUDIO_TOPN"&&e!=="ENABLE_AUDIO_METADATA"&&e!=="ENABLE_AUDIO_PTS"||n!==!0||(fr.ENABLE_ENCODED_TRANSFORM=!0),e==="USE_NEW_NETWORK_CONFIG"&&n&&(u=!!n,fr.USE_NEW_NETWORK_CONFIG=u,u&&(fr.WEBCS_DOMAIN=["webrtc2-2.ap.sd-rtn.com"],fr.WEBCS_DOMAIN_BACKUP_LIST=["webrtc2-4.ap.sd-rtn.com"],fr.CDS_AP=["cds-web-2.ap.sd-rtn.com","cds-web-4.ap.sd-rtn.com"],fr.ACCOUNT_REGISTER=["sua-web-2.ap.sd-rtn.com","sua-web-4.ap.sd-rtn.com"],fr.EVENT_REPORT_DOMAIN="web-2.statscollector.sd-rtn.com",fr.EVENT_REPORT_BACKUP_DOMAIN="statscollector-1.agora.io",fr.GATEWAY_DOMAINS=["edge.sd-rtn.com"])),e==="ENABLE_PRE_SUB"&&n&&(fr.ENABLE_INSTANT_VIDEO=!0,fr.ENABLE_PREALLOC_PC=!0),e==="ENABLE_SVC"&&n&&(fr.ENABLE_AUT_CC=!0),e==="NEW_FORCE_TURN"&&n&&(fr.NEW_TURN_MODE||(fr.NEW_TURN_MODE=4))))}function Q(e){return fr[e]}sI||(fr.WEBCS_DOMAIN=["ap-web-1-oversea.agora.io","ap-web-1-north-america.agora.io"],fr.WEBCS_DOMAIN_BACKUP_LIST=["ap-web-2-oversea.agora.io","ap-web-2-north-america.agora.io"],fr.PROXY_CS=["proxy-ap-web-oversea.agora.io","proxy-ap-web-america.agora.io"],fr.CDS_AP=["cds-ap-web-oversea.agora.io","cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],fr.ACCOUNT_REGISTER=["sua-ap-web-oversea.agora.io","sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],fr.UAP_AP=["uap-ap-web-oversea.agora.io","uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],fr.LOG_UPLOAD_SERVER="logservice-oversea.agora.io",fr.EVENT_REPORT_DOMAIN="statscollector-1-oversea.agora.io",fr.EVENT_REPORT_BACKUP_DOMAIN="statscollector-2-oversea.agora.io",fr.PROXY_SERVER_TYPE3="webrtc-cloud-proxy.agora.io",fr.AREAS=["NORTH_AMERICA","OVERSEA"]);let oV=function(e){return e[e.REALTIME=1]="REALTIME",e}({});const Ac={};var $t=function(e){return e.SET_SESSION_ID="SET_SESSION_ID",e.SET_P2P_ID="SET_P2P_id",e.SET_DC_ID="SET_DC_id",e.SET_UID="SET_UID",e.SET_INT_UID="SET_INT_UID",e.SET_PUB_ID="SET_PUB_ID",e.SET_CLOUD_PROXY_SERVER_MODE="SET_CLOUD_PROXY_SERVER_MODE",e.KEY_METRIC_CLIENT_CREATED="KEY_METRIC_CLIENT_CREATED",e.KEY_METRIC_JOIN_START="KEY_METRIC_JOIN_START",e.KEY_METRIC_PRELOAD_START="KEY_METRIC_PRELOAD_START",e.KEY_METRIC_PRELOAD_END="KEY_METRIC_PRELOAD_END",e.KEY_METRIC_JOIN_END="KEY_METRIC_JOIN_END",e.KEY_METRIC_REQUEST_AP_START="KEY_METRIC_REQUEST_AP_START",e.KEY_METRIC_REQUEST_AP_END="KEY_METRIC_REQUEST_AP_END",e.KEY_METRIC_REQUEST_SUA_END="KEY_METRIC_REQUEST_SUA_END",e.KEY_METRIC_BEFORE_CONNECT="KEY_METRIC_BEFORE_CONNECT",e.KEY_METRIC_PEER_RECEIVER="KEY_METRIC_PEER_RECEIVER",e.KEY_METRIC_SIGNAL_CONNECTED="KEY_METRIC_SIGNAL_CONNECTED",e.KEY_METRIC_JOIN_REQ="KEY_METRIC_JOIN_REQ",e.KEY_METRIC_JOIN_REP="KEY_METRIC_JOIN_REP",e.KEY_METRIC_JOIN_GATEWAY_START="KEY_METRIC_JOIN_GATEWAY_START",e.KEY_METRIC_JOIN_GATEWAY_END="KEY_METRIC_JOIN_GATEWAY_END",e.KEY_METRIC_PEER_CONNECTION_START="KEY_METRIC_PEER_CONNECTION_START",e.KEY_METRIC_PEER_CONNECTION_END="KEY_METRIC_PEER_CONNECTION_END",e.KEY_METRIC_FIRST_VIDEO_FRAME_DECODED="KEY_METRIC_FIRST_VIDEO_FRAME_DECODED",e.KEY_METRIC_DESCRIPTION_START="KEY_METRIC_DESCRIPTION_START",e.KEY_METRIC_ICE_CONNECTION_END="KEY_METRIC_ICE_CONNECTION_END",e.KEY_METRIC_SIGNAL_CHANNEL_OPEN="KEY_METRIC_SIGNAL_CHANNEL_OPEN",e.KEY_METRIC_PUBLISH="KEY_METRIC_PUBLISH",e.KEY_METRIC_SUBSCRIBE="KEY_METRIC_SUBSCRIBE",e.RECORD_JOIN_CHANNEL_SERVICE="RECORD_JOIN_CHANNEL_SERVICE",e.RESET_JOIN_CHANNEL_SERVICE_RECORDS="RESET_JOIN_CHANNEL_SERVICE_RECORDS",e.RESET_KEY_METRICS="RESET_KEY_METRICS",e.RESET_FIRST_VIDEO_FRAME_DECODED="RESET_FIRST_VIDEO_FRAME_DECODED",e.SET_USE_P2P="SET_USE_P2P",e.SET_TRANSPORT_TYPE="SET_TRANSPORT_TYPE",e}($t||{});let O0=function(e){return e.h264="h264",e.h265="h265",e.vp8="vp8",e.vp9="vp9",e.av1="av1",e}({});(function(e){e.opus="opus",e.pcma="pcma",e.pcmu="pcmu",e.g722="g722"})({});const aV=128,Ghe=96,sV=1e3,Gf=10;let Khe=0;var cV=(()=>{var e={8:(a,l,u)=>{u.r(l),u.d(l,{Parser:()=>Ne,Printer:()=>kn,parse:()=>We,print:()=>ot});const h=`
`,p="".concat("\r").concat(h),m=" ";let E;function S(Pe){return Pe>="0"&&Pe<="9"}function R(Pe){return Pe>="!"&&Pe<="~"}function w(Pe){return R(Pe)||Pe>=""&&Pe<="ÿ"}function O(Pe){return Pe==="!"||Pe>="#"&&Pe<="'"||Pe>="*"&&Pe<="+"||Pe>="-"&&Pe<="."||Pe>="0"&&Pe<="9"||Pe>="A"&&Pe<="Z"||Pe>="^"&&Pe<="~"}function H(Pe){return Pe>="1"&&Pe<="9"}function B(Pe){return Pe>="A"&&Pe<="Z"||Pe>="a"&&Pe<="z"}function j(Pe){return Pe==="d"||Pe==="h"||Pe==="m"||Pe==="s"}function q(Pe){return Pe>""&&Pe<"	"||Pe>"\v"&&Pe<"\f"||Pe>""&&Pe<"ÿ"}function Y(Pe){return B(Pe)||S(Pe)||Pe==="+"||Pe==="/"}function Z(Pe){return S(Pe)||B(Pe)||Pe==="+"||Pe==="/"||Pe==="-"||Pe==="_"}function pe(Pe){return B(Pe)||S(Pe)||Pe==="+"||Pe==="/"}function he(Pe,U){var ee=Object.keys(Pe);if(Object.getOwnPropertySymbols){var ue=Object.getOwnPropertySymbols(Pe);U&&(ue=ue.filter(function(He){return Object.getOwnPropertyDescriptor(Pe,He).enumerable})),ee.push.apply(ee,ue)}return ee}function re(Pe){for(var U=1;U<arguments.length;U++){var ee=arguments[U]!=null?arguments[U]:{};U%2?he(Object(ee),!0).forEach(function(ue){Se(Pe,ue,ee[ue])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Pe,Object.getOwnPropertyDescriptors(ee)):he(Object(ee)).forEach(function(ue){Object.defineProperty(Pe,ue,Object.getOwnPropertyDescriptor(ee,ue))})}return Pe}function Se(Pe,U,ee){return U in Pe?Object.defineProperty(Pe,U,{value:ee,enumerable:!0,configurable:!0,writable:!0}):Pe[U]=ee,Pe}(function(Pe){Pe.VERSION="v",Pe.ORIGIN="o",Pe.SESSION_NAME="s",Pe.INFORMATION="i",Pe.URI="u",Pe.EMAIL="e",Pe.PHONE="p",Pe.CONNECTION="c",Pe.BANDWIDTH="b",Pe.TIME="t",Pe.REPEAT="r",Pe.ZONE_ADJUSTMENTS="z",Pe.KEY="k",Pe.ATTRIBUTE="a",Pe.MEDIA="m"})(E||(E={}));class Ae{consumeText(U,ee){let ue=ee;for(;ue<U.length;){const He=U[ue];if(He==="\0"||He==="\r"||He===h)break;ue+=1}if(ue-ee==0)throw new Error("Invalid text, at ".concat(U));return ue}consumeUnicastAddress(U,ee,ue){return this.consumeTill(U,ee,m)}consumeOneOrMore(U,ee,ue){let He=ee;for(;ue(U[He]);)He++;if(He-ee==0)throw new Error("Invalid rule at ".concat(ee,"."));return He}consumeSpace(U,ee){if(U[ee]===m)return ee+1;throw new Error("Invalid space at ".concat(ee,"."))}consumeIP4Address(U,ee){let ue=ee;for(let He=0;He<4;He++)if(ue=this.consumeDecimalUChar(U,ue),He!==3){if(U[ue]!==".")throw new Error("Invalid IP4 address.");ue++}return ue}consumeDecimalUChar(U,ee){let ue=ee;for(let zt=0;zt<3&&S(U[ue]);zt++,ue++);if(ue-ee==0)throw new Error("Invalid decimal uchar.");const He=parseInt(U.slice(ee,ue));if(He>=0&&He<=255)return ue;throw new Error("Invalid decimal uchar")}consumeIP6Address(U,ee){let ue=this.consumeHexpart(U,ee);return U[ue]===":"&&(ue+=1,ue=this.consumeIP4Address(U,ue)),ue}consumeHexpart(U,ee){let ue=ee;if(U[ue]===":"&&U[ue+1]===":"){ue+=2;try{ue=this.consumeHexseq(U,ue)}catch{}return ue}if(ue=this.consumeHexseq(U,ue),U[ue]===":"&&U[ue+1]===":"){ue+=2;try{ue=this.consumeHexseq(U,ue)}catch{}return ue}return ue}consumeHexseq(U,ee){let ue=ee;for(;ue=this.consumeHex4(U,ue),U[ue]===":"&&U[ue+1]!==":";)ue+=1;return ue}consumeHex4(U,ee){let ue=0;for(;ue<4;ue++)if(!((He=U[ee+ue])>="0"&&He<="9"||He>="a"&&He<="f"||He>="A"&&He<="F")){if(ue===0)throw new Error("Invalid hex 4");break}var He;return ee+ue}consumeFQDN(U,ee){let ue=ee;for(;S(U[ue])||B(U[ue])||U[ue]==="-"||U[ue]===".";)ue+=1;if(ue-ee<4)throw new Error("Invalid FQDN");return ue}consumeExtnAddr(U,ee){return this.consumeOneOrMore(U,ee,w)}consumeMulticastAddress(U,ee,ue){switch(ue){case"IP4":case"ip4":return this.consumeIP4MulticastAddress(U,ee);case"IP6":case"ip6":return this.consumeIP6MulticastAddress(U,ee);default:try{return this.consumeFQDN(U,ee)}catch{return this.consumeExtnAddr(U,ee)}}}consumeIP6MulticastAddress(U,ee){const ue=this.consumeHexpart(U,ee);return U[ue]==="/"?this.consumeInteger(U,ue+1):ue}consumeIP4MulticastAddress(U,ee){let ue=ee+3;const He=U.slice(ee,ue),zt=parseInt(He);if(zt<224||zt>239)throw new Error("Invalid IP4 multicast address, IPv4 multicast addresses may be in the range 224.0.0.0 to 239.255.255.255.");for(let tr=0;tr<3;tr++){if(U[ue]!==".")throw new Error("Invalid IP4 multicast address.");ue+=1,ue=this.consumeDecimalUChar(U,ue)}return U[ue]==="/"&&(ue+=1),ue=this.consumeTTL(U,ue),U[ue]==="/"&&(ue=this.consumeInteger(U,ue)),ue}consumeInteger(U,ee){if(!H(U[ee]))throw new Error("Invalid integer.");for(ee+=1;S(U[ee]);)ee+=1;return ee}consumeTTL(U,ee){if(U[ee]==="0")return ee+1;if(!H(U[ee]))throw new Error("Invalid TTL.");ee+=1;for(let ue=0;ue<2&&S(U[ee]);ue++)ee+=1;return ee}consumeToken(U,ee){return this.consumeOneOrMore(U,ee,O)}consumeTime(U,ee){let ue=ee;if(U[ue]==="0")return ue+1;for(H(U[ue])&&(ue+=1);S(U[ue]);)ue++;if(ue-ee<10)throw new Error("Invalid time");return ue}consumeAddress(U,ee){return this.consumeTill(U,ee,m)}consumeTypedTime(U,ee){let ue=ee;return ue=this.consumeOneOrMore(U,ue,S),j(U[ue])?ue+1:ue}consumeRepeatInterval(U,ee){if(!H(U[ee]))throw new Error("Invalid repeat interval");for(ee+=1;S(U[ee]);)ee+=1;return j(U[ee])&&(ee+=1),ee}consumePort(U,ee){return this.consumeOneOrMore(U,ee,S)}consume(U,ee,ue){for(let He=0;He<ue.length;He++){if(ee+He>=U.length)throw new Error("consume exceeding value length");if(U[ee+He]!==ue[He])throw new Error("consume ".concat(ue," failed at ").concat(He))}return ee+ue.length}consumeTill(U,ee,ue){let He=ee;for(;He<U.length&&(typeof ue!="string"||U[He]!==ue)&&(typeof ue!="function"||!ue(U[He]));)He++;return He}}class Ne extends Ae{constructor(){super(),Se(this,"records",[]),Se(this,"currentLine",0)}parse(U){const ee=this.probeEOL(U);this.records=U.split(ee).filter(tu=>!!yo(tu).call(tu)).map(this.parseLine),this.currentLine=0;const ue=this.parseVersion(),He=this.parseOrigin(),zt=this.parseSessionName(),tr=this.parseInformation(),hi=this.parseUri(),vs=this.parseEmail(),nc=this.parsePhone(),pg=this.parseConnection(),Sh=this.parseBandWidth(),wp=this.parseTimeFields(),sy=this.parseKey(),cy=this.parseSessionAttribute(),Es=this.parseMediaDescription();if(this.currentLine!==this.records.length)throw new Error("parsing failed, non exhaustive sdp lines.");return{version:ue,origin:He,sessionName:zt,information:tr,uri:hi,emails:vs,phones:nc,connection:pg,bandwidths:Sh,timeFields:wp,key:sy,attributes:cy,mediaDescriptions:Es}}getCurrentRecord(){const U=this.records[this.currentLine];if(!U)throw new Error("Record doesn't exit.");return U}probeEOL(U){for(let ee=0;ee<U.length;ee++)if(U[ee]===h)return U[ee-1]==="\r"?p:h;throw new Error("Invalid newline character.")}parseLine(U,ee){if(U.length<2)throw new Error("Invalid sdp line, sdp line should be of form <type>=<value>.");const ue=U[0];if(U[1]!=="=")throw new Error('Invalid sdp line, <type> should be a single character followed by an "=" sign.');return{type:ue,value:U.slice(2),line:ee,cur:0}}parseSessionAttribute(){const U=new nn;for(;this.currentLine<this.records.length;){const ee=this.getCurrentRecord();if(ee.type!==E.ATTRIBUTE)break;const ue={attField:this.extractOneOrMore(ee,He=>O(He)&&He!==":"),_cur:0};ee.value[ee.cur]===":"&&(ee.cur+=1,ue.attValue=this.extractOneOrMore(ee,q)),U.parse(ue),this.currentLine++}return U.digest()}parseMediaAttributes(U){const ee=new sn(U);for(;this.currentLine<this.records.length;){const ue=this.getCurrentRecord();if(ue.type!==E.ATTRIBUTE)break;const He={attField:this.extractOneOrMore(ue,zt=>O(zt)&&zt!==":"),_cur:0};ue.value[ue.cur]===":"&&(ue.cur+=1,He.attValue=this.extractOneOrMore(ue,q)),ee.parse(He),this.currentLine++}return ee.digest()}parseKey(){const U=this.getCurrentRecord();if(U.type===E.KEY){if(U.value==="prompt"||U.value==="clear:"||U.value==="base64:"||U.value==="uri:")return U.value;throw this.currentLine++,new Error("Invalid key.")}}parseZone(){const U=this.getCurrentRecord();if(U.type===E.ZONE_ADJUSTMENTS){const ee=[];for(;;)try{const ue=this.extract(U,this.consumeTime);this.consumeSpaceForRecord(U);let He=!1;U.value[U.cur]==="-"&&(He=!0,U.cur+=1);const zt=this.extract(U,this.consumeTypedTime);ee.push({time:ue,typedTime:zt,back:He})}catch{break}if(ee.length===0)throw new Error("Invalid zone adjustments");return this.currentLine++,ee}return[]}parseRepeat(){const U=[];for(;;){const ee=this.getCurrentRecord();if(ee.type!==E.REPEAT)break;{const ue=this.extract(ee,this.consumeRepeatInterval),He=this.parseTypedTime(ee);U.push({repeatInterval:ue,typedTimes:He}),this.currentLine++}}return U}parseTypedTime(U){const ee=[];for(;;)try{this.consumeSpaceForRecord(U),ee.push(this.extract(U,this.consumeTypedTime))}catch{break}if(ee.length===0)throw new Error("Invalid typed time.");return ee}parseTime(){const U=this.getCurrentRecord(),ee=this.extract(U,this.consumeTime);this.consumeSpaceForRecord(U);const ue=this.extract(U,this.consumeTime);return this.currentLine++,{startTime:ee,stopTime:ue}}parseBandWidth(){const U=[];for(;this.currentLine<this.records.length;){const ee=this.getCurrentRecord();if(ee.type!==E.BANDWIDTH)break;{const ue=this.extractOneOrMore(ee,O);if(ee.value[ee.cur]!==":")throw new Error("Invalid bandwidth field.");ee.cur++;const He=this.extractOneOrMore(ee,S);U.push({bwtype:ue,bandwidth:He}),this.currentLine++}}return U}parseVersion(){const U=this.getCurrentRecord();if(U.type!==E.VERSION)throw new Error("first sdp record must be version");const ee=U.value.slice(0,this.consumeOneOrMore(U.value,0,S));if(ee.length!==U.value.length)throw new Error('invalid proto version, "v='.concat(U.value,'"'));return this.currentLine++,ee}parseOrigin(){const U=this.getCurrentRecord();if(U.type!==E.ORIGIN)throw new Error("second line of sdp must be origin");const ee=this.extractOneOrMore(U,w);this.consumeSpaceForRecord(U);const ue=this.extractOneOrMore(U,S);this.consumeSpaceForRecord(U);const He=this.extractOneOrMore(U,S);this.consumeSpaceForRecord(U);const zt=this.extractOneOrMore(U,O);this.consumeSpaceForRecord(U);const tr=this.extractOneOrMore(U,O);this.consumeSpaceForRecord(U);const hi=this.extract(U,this.consumeUnicastAddress);return this.currentLine++,{username:ee,sessId:ue,sessVersion:He,nettype:zt,addrtype:tr,unicastAddress:hi}}parseSessionName(){const U=this.getCurrentRecord();if(U.type===E.SESSION_NAME){const ee=this.extract(U,this.consumeText);return this.currentLine++,ee}}parseInformation(){const U=this.getCurrentRecord();if(U.type!==E.INFORMATION)return;const ee=this.extract(U,this.consumeText);return this.currentLine++,ee}parseUri(){const U=this.getCurrentRecord();if(U.type===E.URI)return this.currentLine++,U.value}parseEmail(){const U=[];for(;;){const ee=this.getCurrentRecord();if(ee.type!==E.EMAIL)break;U.push(ee.value),this.currentLine++}return U}parsePhone(){const U=[];for(;;){const ee=this.getCurrentRecord();if(ee.type!==E.PHONE)break;U.push(ee.value),this.currentLine++}return U}parseConnection(){const U=this.getCurrentRecord();if(U.type===E.CONNECTION){const ee=this.extractOneOrMore(U,O);this.consumeSpaceForRecord(U);const ue=this.extractOneOrMore(U,O);this.consumeSpaceForRecord(U);const He=this.extract(U,this.consumeAddress);return this.currentLine++,{nettype:ee,addrtype:ue,address:He}}}parseMedia(){const U=this.getCurrentRecord(),ee=this.extract(U,this.consumeToken);this.consumeSpaceForRecord(U);let ue=this.extract(U,this.consumePort);U.value[U.cur]==="/"&&(U.cur+=1,ue+=this.extract(U,this.consumeInteger)),this.consumeSpaceForRecord(U);const He=[];for(He.push(this.extract(U,this.consumeToken));U.value[U.cur]==="/";)U.cur+=1,He.push(this.extract(U,this.consumeToken));if(He.length===0)throw new Error("Invalid proto");const zt=this.parseFmt(U);return this.currentLine++,{mediaType:ee,port:ue,protos:He,fmts:zt}}parseTimeFields(){const U=[];for(;this.getCurrentRecord().type===E.TIME;){const ee=this.parseTime(),ue=this.parseRepeat(),He=this.parseZone();U.push({time:ee,repeats:ue,zones:He})}return U}parseMediaDescription(){const U=[];for(;this.currentLine<this.records.length&&this.getCurrentRecord().type===E.MEDIA;){const ee=this.parseMedia(),ue=this.parseInformation(),He=this.parseConnections(),zt=this.parseBandWidth(),tr=this.parseKey(),hi=this.parseMediaAttributes(ee);U.push({media:ee,information:ue,connections:He,bandwidths:zt,key:tr,attributes:hi})}return U}parseConnections(){const U=[];for(;this.currentLine<this.records.length&&this.getCurrentRecord().type===E.CONNECTION;)U.push(this.parseConnection());return U}parseFmt(U){const ee=[];for(;;)try{this.consumeSpaceForRecord(U),ee.push(this.extract(U,this.consumeToken))}catch{break}if(ee.length===0)throw new Error("Invalid fmts");return ee}extract(U,ee){for(var ue=arguments.length,He=new Array(ue>2?ue-2:0),zt=2;zt<ue;zt++)He[zt-2]=arguments[zt];const tr=ee.call(this,U.value,U.cur,...He),hi=U.value.slice(U.cur,tr);return U.cur=tr,hi}extractOneOrMore(U,ee){const ue=this.consumeOneOrMore(U.value,U.cur,ee),He=U.value.slice(U.cur,ue);return U.cur=ue,He}consumeSpaceForRecord(U){if(U.value[U.cur]!==m)throw new Error("Invalid space at ".concat(U.cur,"."));U.cur+=1}}class Be extends Ae{constructor(){super(...arguments),Se(this,"attributes",void 0),Se(this,"digested",!1)}extractOneOrMore(U,ee,ue){const He=this.consumeOneOrMore(U.attValue,U._cur,ee),zt=U.attValue.slice(U._cur,He),[tr,hi]=ue||[];if(typeof tr=="number"&&zt.length<tr)throw new Error("error in length, should be more or equal than ".concat(tr," characters."));if(typeof hi=="number"&&zt.length>hi)throw new Error("error in length, should be less or equal than ".concat(hi," characters."));return U._cur=He,zt}consumeAttributeSpace(U){if(U.attValue[U._cur]!==m)throw new Error("Invalid space at ".concat(U._cur,"."));U._cur+=1}extract(U,ee){if(!U.attValue)throw new Error("Nothing to extract from attValue.");for(var ue=arguments.length,He=new Array(ue>2?ue-2:0),zt=2;zt<ue;zt++)He[zt-2]=arguments[zt];const tr=ee.call(this,U.attValue,U._cur,...He),hi=U.attValue.slice(U._cur,tr);return U._cur=tr,hi}atEnd(U){if(!U.attValue)throw new Error;return U._cur>=U.attValue.length}peekChar(U){if(!U.attValue)throw new Error;return U.attValue[U._cur]}peek(U,ee){if(!U.attValue)throw new Error;for(let ue=0;ue<ee.length;ue++)if(ee[ue]!==U.attValue[U._cur+ue])return!1;return!0}parseIceUfrag(U){if(this.attributes.iceUfrag)throw new Error("Invalid ice-ufrag, should be only a single line if 'a=ice-ufrag'");this.attributes.iceUfrag=this.extractOneOrMore(U,Y,[4,256])}parseIcePwd(U){if(this.attributes.icePwd)throw new Error("Invalid ice-pwd, should be only a single line if 'a=ice-pwd'");this.attributes.icePwd=this.extractOneOrMore(U,Y,[22,256])}parseIceOptions(U){if(this.attributes.iceOptions)throw new Error("Invalid ice-options, should be only one 'ice-options' line");const ee=[];for(;!this.atEnd(U);){ee.push(this.extractOneOrMore(U,Y));try{this.consumeAttributeSpace(U)}catch(ue){if(this.atEnd(U))break;throw ue}}this.attributes.iceOptions=ee}parseFingerprint(U){const ee=this.extract(U,this.consumeToken);this.consumeAttributeSpace(U);const ue=this.extract(U,this.consumeTill);this.attributes.fingerprints.push({hashFunction:ee,fingerprint:ue})}parseExtmap(U){const ee=this.extractOneOrMore(U,S);let ue;this.peekChar(U)==="/"&&(this.extract(U,this.consume,"/"),ue=this.extract(U,this.consumeToken)),this.consumeAttributeSpace(U);const He=this.extract(U,this.consumeTill,m),zt=re(re({entry:parseInt(ee,10)},ue&&{direction:ue}),{},{extensionName:He});this.peekChar(U)===m&&(this.consumeAttributeSpace(U),zt.extensionAttributes=this.extract(U,this.consumeTill)),this.attributes.extmaps.push(zt)}parseSetup(U){if(this.attributes.setup)throw new Error("must only be one single 'a=setup' line.");const ee=this.extract(U,this.consumeTill);if(ee!=="active"&&ee!=="passive"&&ee!=="actpass"&&ee!=="holdconn")throw new Error("role must be one of 'active', 'passive', 'actpass', 'holdconn'.");this.attributes.setup=ee}}class nn extends Be{constructor(){super(...arguments),Se(this,"attributes",{unrecognized:[],groups:[],extmaps:[],fingerprints:[],identities:[]})}parse(U){if(this.digested)throw new Error("already digested");try{switch(U.attField){case"group":this.parseGroup(U);break;case"ice-lite":this.parseIceLite();break;case"ice-ufrag":this.parseIceUfrag(U);break;case"ice-pwd":this.parseIcePwd(U);break;case"ice-options":this.parseIceOptions(U);break;case"fingerprint":this.parseFingerprint(U);break;case"setup":this.parseSetup(U);break;case"tls-id":this.parseTlsId(U);break;case"identity":this.parseIdentity(U);break;case"extmap":this.parseExtmap(U);break;case"msid-semantic":this.parseMsidSemantic(U);break;default:U.ignored=!0,this.attributes.unrecognized.push(U)}}catch(ee){throw console.error("parsing session attribute ".concat(U.attField,' error, "a=').concat(U.attField,":").concat(U.attValue,'"')),ee}if(!U.ignored&&U.attValue&&!this.atEnd(U))throw new Error("attribute parsing error")}digest(){return this.digested=!0,this.attributes}parseGroup(U){const ee=this.extract(U,this.consumeToken),ue=[];for(;!this.atEnd(U)&&this.peekChar(U)===m;)this.consumeAttributeSpace(U),ue.push(this.extract(U,this.consumeToken));this.attributes.groups.push({semantic:ee,identificationTag:ue})}parseIceLite(){if(this.attributes.iceLite)throw new Error("Invalid ice-lite, should be only a single line of 'a=ice-lite'");this.attributes.iceLite=!0}parseTlsId(U){if(this.attributes.tlsId)throw new Error("must be only one tld-id line");this.attributes.tlsId=this.extractOneOrMore(U,Z)}parseIdentity(U){const ee=this.extractOneOrMore(U,pe),ue=[];for(;!this.atEnd(U)&&this.peekChar(U)===m;){this.consumeAttributeSpace(U);const He=this.extract(U,this.consumeToken);this.extract(U,this.consume,"=");const zt=this.extractOneOrMore(U,tr=>tr!==m&&q(tr));ue.push({name:He,value:zt})}this.attributes.identities.push({assertionValue:ee,extensions:ue})}parseMsidSemantic(U){this.peekChar(U)===m&&this.consumeAttributeSpace(U);const ee={semantic:this.extract(U,this.consumeToken),identifierList:[]};for(;;){try{this.consumeAttributeSpace(U)}catch{break}if(this.peekChar(U)==="*"){this.extract(U,this.consume,"*"),ee.applyForAll=!0;break}{const ue=this.extract(U,this.consumeTill,m);ee.identifierList.push(ue)}}this.attributes.msidSemantic=ee}}class sn extends Be{constructor(U){super(),Se(this,"attributes",void 0),U.protos.indexOf("RTP")!==-1||U.protos.indexOf("rtp"),this.attributes={unrecognized:[],candidates:[],extmaps:[],fingerprints:[],imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:[],ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:[]}}parse(U){if(this.digested)throw new Error("already digested");try{switch(U.attField){case"extmap":this.parseExtmap(U);break;case"setup":this.parseSetup(U);break;case"ice-ufrag":this.parseIceUfrag(U);break;case"ice-pwd":this.parseIcePwd(U);break;case"ice-options":this.parseIceOptions(U);break;case"candidate":this.parseCandidate(U);break;case"remote-candidate":this.parseRemoteCandidate(U);break;case"end-of-candidates":this.parseEndOfCandidates();break;case"fingerprint":this.parseFingerprint(U);break;case"rtpmap":this.parseRtpmap(U);break;case"ptime":this.parsePtime(U);break;case"maxptime":this.parseMaxPtime(U);break;case"sendrecv":case"recvonly":case"sendonly":case"inactive":this.parseDirection(U);break;case"ssrc":this.parseSSRC(U);break;case"fmtp":this.parseFmtp(U);break;case"rtcp-fb":this.parseRtcpFb(U);break;case"rtcp-mux":this.parseRTCPMux();break;case"rtcp-mux-only":this.parseRTCPMuxOnly();break;case"rtcp-rsize":this.parseRTCPRsize();break;case"rtcp":this.parseRTCP(U);break;case"mid":this.parseMid(U);break;case"msid":this.parseMsid(U);break;case"imageattr":this.parseImageAttr(U);break;case"rid":this.parseRid(U);break;case"simulcast":this.parseSimulcast(U);break;case"sctp-port":this.parseSctpPort(U);break;case"max-message-size":this.parseMaxMessageSize(U);break;case"ssrc-group":this.parseSSRCGroup(U);break;default:U.ignored=!0,this.attributes.unrecognized.push(U)}}catch(ee){throw console.error("parsing media attribute ".concat(U.attField,' error, "a=').concat(U.attField,":").concat(U.attValue,'"')),ee}if(!U.ignored&&U.attValue&&!this.atEnd(U))throw new Error("attribute parsing error")}parseCandidate(U){const ee=this.extractOneOrMore(U,Y,[1,32]);this.consumeAttributeSpace(U);const ue=this.extractOneOrMore(U,S,[1,5]);this.consumeAttributeSpace(U);const He=this.extract(U,this.consumeToken);this.consumeAttributeSpace(U);const zt=this.extractOneOrMore(U,S,[1,10]);this.consumeAttributeSpace(U);const tr=this.extract(U,this.consumeAddress);this.consumeAttributeSpace(U);const hi=this.extract(U,this.consumePort);this.consumeAttributeSpace(U),this.extract(U,this.consume,"typ"),this.consumeAttributeSpace(U);const vs={foundation:ee,componentId:ue,transport:He,priority:zt,connectionAddress:tr,port:hi,type:this.extract(U,this.consumeToken),extension:{}};for(this.peek(U," raddr")&&(this.extract(U,this.consume," raddr"),this.consumeAttributeSpace(U),vs.relAddr=this.extract(U,this.consumeAddress)),this.peek(U," rport")&&(this.extract(U,this.consume," rport"),this.consumeAttributeSpace(U),vs.relPort=this.extract(U,this.consumePort));this.peekChar(U)===m;){this.consumeAttributeSpace(U);const nc=this.extract(U,this.consumeToken);this.consumeAttributeSpace(U),vs.extension[nc]=this.extractOneOrMore(U,R)}this.attributes.candidates.push(vs)}parseRemoteCandidate(U){const ee=[];for(;;){const ue=this.extractOneOrMore(U,S,[1,5]);this.consumeAttributeSpace(U);const He=this.extract(U,this.consumeAddress);this.consumeAttributeSpace(U);const zt=this.extract(U,this.consumePort);ee.push({componentId:ue,connectionAddress:He,port:zt});try{this.consumeAttributeSpace(U)}catch{break}}this.attributes.remoteCandidatesList.push(ee)}parseEndOfCandidates(){if(this.attributes.endOfCandidates)throw new Error("must be only one line of end-of-candidates");this.attributes.endOfCandidates=!0}parseRtpmap(U){const ee=this.extract(U,this.consumeToken);this.consumeAttributeSpace(U);const ue=this.extract(U,this.consumeTill,"/");this.extract(U,this.consume,"/");const He={encodingName:ue,clockRate:this.extractOneOrMore(U,S)};this.atEnd(U)||this.peekChar(U)!=="/"||(this.extract(U,this.consume,"/"),He.encodingParameters=parseInt(this.extract(U,this.consumeTill),10));const zt=this.attributes.payloads.find(tr=>tr.payloadType===parseInt(ee,10));zt?zt.rtpMap=He:this.attributes.payloads.push({payloadType:parseInt(ee,10),rtpMap:He,rtcpFeedbacks:[]})}parsePtime(U){if(this.attributes.ptime)throw new Error("must be only one line of ptime");this.attributes.ptime=this.extract(U,this.consumeTill)}parseMaxPtime(U){if(this.attributes.maxPtime)throw new Error("must be only one line of ptime");this.attributes.maxPtime=this.extract(U,this.consumeTill)}parseDirection(U){if(this.attributes.direction)throw new Error("must be only one line of direction info");this.attributes.direction=U.attField}parseSSRC(U){const ee=this.extractOneOrMore(U,S);this.consumeAttributeSpace(U);const ue=this.extract(U,this.consumeTill,":");let He;this.peekChar(U)===":"&&(this.extract(U,this.consume,":"),He=this.extract(U,this.consumeTill));const zt=this.attributes.ssrcs.find(tr=>tr.ssrcId===parseInt(ee,10));zt?zt.attributes[ue]=He:this.attributes.ssrcs.push({ssrcId:parseInt(ee,10),attributes:{[ue]:He}})}parseFmtp(U){const ee=this.extract(U,this.consumeTill,m);this.consumeAttributeSpace(U);const ue=this.extract(U,this.consumeTill),He={};ue.split(";").forEach(tr=>{let[hi,vs]=tr.split("=");hi=yo(hi).call(hi);const nc=typeof vs=="string"?yo(vs).call(vs):null;typeof hi=="string"&&hi.length>0&&(He[hi]=nc)});const zt=this.attributes.payloads.find(tr=>tr.payloadType===parseInt(ee,10));zt?zt.fmtp={parameters:He}:this.attributes.payloads.push({payloadType:parseInt(ee,10),rtcpFeedbacks:[],fmtp:{parameters:He}})}parseFmtParameters(U){const ee={},ue=this.extract(U,this.consumeTill,"=");U._cur++;const He=this.extract(U,this.consumeTill,";");for(ee[ue]=He;U.attValue[U._cur]===";";){const zt=this.extract(U,this.consumeTill,"=");U._cur++;const tr=this.extract(U,this.consumeTill,";");ee[zt]=tr}return ee}parseRtcpFb(U){let ee="";ee=this.peekChar(U)==="*"?this.extract(U,this.consume,"*"):this.extract(U,this.consumeTill,m),this.consumeAttributeSpace(U);const ue=this.extract(U,this.consumeTill,m);let He;if(ue==="trr-int")He={type:ue,interval:this.extract(U,this.consumeTill)};else{const zt={type:ue};this.peekChar(U)===m&&(this.consumeAttributeSpace(U),zt.parameter=this.extract(U,this.consumeToken),this.peekChar(U)===m&&(zt.additional=this.extract(U,this.consumeTill))),He=zt}if(ee==="*")this.attributes.rtcpFeedbackWildcards.push(He);else{const zt=this.attributes.payloads.find(tr=>tr.payloadType===parseInt(ee,10));zt?zt.rtcpFeedbacks.push(He):this.attributes.payloads.push({payloadType:parseInt(ee,10),rtcpFeedbacks:[He]})}}parseRTCPMux(){if(this.attributes.rtcpMux)throw new Error("must be single line of rtcp-mux");this.attributes.rtcpMux=!0}parseRTCPMuxOnly(){if(this.attributes.rtcpMuxOnly)throw new Error("must be single line of rtcp-only");this.attributes.rtcpMuxOnly=!0}parseRTCPRsize(){if(this.attributes.rtcpRsize)throw new Error("must be single line of rtcp-rsize");this.attributes.rtcpRsize=!0}parseRTCP(U){if(this.attributes.rtcp)throw new Error("must be single line of rtcp");const ee={port:this.extract(U,this.consumePort)};this.peekChar(U)===m&&(this.consumeAttributeSpace(U),ee.netType=this.extractOneOrMore(U,O),this.consumeAttributeSpace(U),ee.addressType=this.extractOneOrMore(U,O),this.consumeAttributeSpace(U),ee.address=this.extract(U,this.consumeAddress)),this.attributes.rtcp=ee}parseMsid(U){const ee={id:this.extractOneOrMore(U,O,[1,64])};this.peekChar(U)===m&&(this.consumeAttributeSpace(U),ee.appdata=this.extractOneOrMore(U,O,[1,64])),this.attributes.msids.push(ee)}parseImageAttr(U){this.attributes.imageattr.push(U.attValue)}parseRid(U){const ee=this.extractOneOrMore(U,He=>B(He)||S(He)||He==="_"||He==="-");this.consumeAttributeSpace(U);const ue={id:ee,direction:this.extract(U,this.consumeToken),params:[]};if(this.peekChar(U)===m){if(this.consumeAttributeSpace(U),this.peek(U,"pt=")){this.extract(U,this.consume,"pt=");const He=[];for(;;){const zt=this.extract(U,this.consumeToken);He.push(zt);try{this.extract(U,this.consume,",")}catch{break}}ue.payloads=He,this.peekChar(U)===m&&this.extract(U,this.consume,m)}for(;;){const He=this.extract(U,this.consumeToken);switch(He){case"depend":{const zt={type:He,rids:this.extract(U,this.consume,"=").split(",")};ue.params.push(zt);break}default:{const zt={type:He};this.peekChar(U)==="="&&(this.extract(U,this.consume,"="),zt.val=this.extract(U,this.consumeTill,";")),ue.params.push(zt)}}try{this.extract(U,this.consume,";")}catch{break}}}this.attributes.rids.push(ue)}parseSimulcast(U){if(this.attributes.simulcast)throw new Error("must be single line of simulcast");this.attributes.simulcast=U.attValue,this.extract(U,this.consumeTill)}parseSctpPort(U){this.attributes.sctpPort=this.extractOneOrMore(U,S,[1,5])}parseMaxMessageSize(U){this.attributes.maxMessageSize=this.extractOneOrMore(U,S,[1,void 0])}digest(){return this.digested=!0,this.attributes}parseMid(U){this.attributes.mid=this.extract(U,this.consumeToken)}parseSSRCGroup(U){const ee=this.extract(U,this.consumeToken),ue=[];for(;;)try{this.consumeAttributeSpace(U);const He=this.extract(U,this.consumeInteger);ue.push(parseInt(He,10))}catch{break}this.attributes.ssrcGroups.push({semantic:ee,ssrcIds:ue})}}function Lt(Pe,U,ee){return U in Pe?Object.defineProperty(Pe,U,{value:ee,enumerable:!0,configurable:!0,writable:!0}):Pe[U]=ee,Pe}class kn{constructor(){Lt(this,"eol",p)}print(U,ee){let ue="";return ee&&(this.eol=ee),ue+=this.printVersion(U.version),ue+=this.printOrigin(U.origin),ue+=this.printSessionName(U.sessionName),ue+=this.printInformation(U.information),ue+=this.printUri(U.uri),ue+=this.printEmail(U.emails),ue+=this.printPhone(U.phones),ue+=this.printConnection(U.connection),ue+=this.printBandwidth(U.bandwidths),ue+=this.printTimeFields(U.timeFields),ue+=this.printKey(U.key),ue+=this.printSessionAttributes(U.attributes),ue+=this.printMediaDescription(U.mediaDescriptions),ue}printVersion(U){return"v=".concat(U).concat(this.eol)}printOrigin(U){return"o=".concat(U.username," ").concat(U.sessId," ").concat(U.sessVersion," ").concat(U.nettype," ").concat(U.addrtype," ").concat(U.unicastAddress).concat(this.eol)}printSessionName(U){return U?"s=".concat(U).concat(this.eol):""}printInformation(U){return U?"i=".concat(U).concat(this.eol):""}printUri(U){return U?"u=".concat(U).concat(this.eol):""}printEmail(U){let ee="";for(const ue of U)ee+="e=".concat(ue).concat(this.eol);return ee}printPhone(U){let ee="";for(const ue of U)ee+="e=".concat(ue).concat(this.eol);return ee}printConnection(U){return U?"c=".concat(U.nettype," ").concat(U.addrtype," ").concat(U.address).concat(this.eol):""}printBandwidth(U){let ee="";for(const ue of U)ee+="b=".concat(ue.bwtype,":").concat(ue.bandwidth).concat(this.eol);return ee}printTimeFields(U){let ee="";for(const ue of U){ee+="t=".concat(ue.time.startTime," ").concat(ue.time.startTime).concat(this.eol);for(const He of ue.repeats)ee+="r=".concat(He.repeatInterval," ").concat(He.typedTimes.join(" ")).concat(this.eol);ue.zoneAdjustments&&(ee+="z=",ee+="z=".concat(ue.zoneAdjustments.map(He=>"".concat(He.time," ").concat(He.back?"-":""," ").concat(He.typedTime)).join(" ")).concat(this.eol),ee+=this.eol)}return ee}printKey(U){return U?"k=".concat(U).concat(this.eol):""}printAttributes(U){let ee="";for(const ue of U)ee+="a=".concat(ue.attField).concat(ue.attValue?":".concat(ue.attValue):"").concat(this.eol);return ee}printMediaDescription(U){let ee="";for(const ue of U)ee+=this.printMedia(ue.media),ee+=this.printInformation(ue.information),ee+=this.printConnections(ue.connections),ee+=this.printBandwidth(ue.bandwidths),ee+=this.printKey(ue.key),ee+=this.printMediaAttributes(ue);return ee}printConnections(U){let ee="";for(const ue of U)ee+=this.printConnection(ue);return ee}printMedia(U){return"m=".concat(U.mediaType," ").concat(U.port," ").concat(U.protos.join("/")," ").concat(U.fmts.join(" ")).concat(this.eol)}printSessionAttributes(U){return new eo(this.eol).print(U)}printMediaAttributes(U){return new xe(this.eol).print(U)}}class Nn{constructor(U){Lt(this,"eol",void 0),this.eol=U}printIceUfrag(U){return U===void 0?"":"a=ice-ufrag:".concat(U).concat(this.eol)}printIcePwd(U){return U===void 0?"":"a=ice-pwd:".concat(U).concat(this.eol)}printIceOptions(U){return U===void 0?"":"a=ice-options:".concat(U.join(m)).concat(this.eol)}printFingerprints(U){return U.length>0?U.map(ee=>"a=fingerprint:".concat(ee.hashFunction).concat(m).concat(ee.fingerprint)).join(this.eol)+this.eol:""}printExtmap(U){return U.map(ee=>"a=extmap:".concat(ee.entry).concat(ee.direction?"/".concat(ee.direction):"").concat(m).concat(ee.extensionName).concat(ee.extensionAttributes?"".concat(m).concat(ee.extensionAttributes):"").concat(this.eol)).join("")}printSetup(U){return U===void 0?"":"a=setup:".concat(U).concat(this.eol)}printUnrecognized(U){return U.map(ee=>"a=".concat(ee.attField).concat(ee.attValue?":".concat(ee.attValue):"").concat(this.eol)).join("")}}class eo extends Nn{print(U){let ee="";return ee+=this.printGroups(U.groups),ee+=this.printMsidSemantic(U.msidSemantic),ee+=this.printIceLite(U.iceLite),ee+=this.printIceUfrag(U.iceUfrag),ee+=this.printIcePwd(U.icePwd),ee+=this.printIceOptions(U.iceOptions),ee+=this.printFingerprints(U.fingerprints),ee+=this.printSetup(U.setup),ee+=this.printTlsId(U.tlsId),ee+=this.printIdentity(U.identities),ee+=this.printExtmap(U.extmaps),ee+=this.printUnrecognized(U.unrecognized),ee}printGroups(U){let ee="";return U.length>0&&(ee+=U.map(ue=>"a=group:".concat(ue.semantic).concat(ue.identificationTag.map(He=>"".concat(m).concat(He)).join("")).concat(this.eol)).join("")),ee}printIceLite(U){return U===void 0?"":"a=ice-lite"+this.eol}printTlsId(U){return U?"a=tls-id:".concat(U).concat(this.eol):""}printIdentity(U){return U.length===0?"":U.map(ee=>"a=identity:".concat(ee.assertionValue).concat(ee.extensions.map(ue=>"".concat(m).concat(ue.name).concat(ue.value?"=".concat(ue.value):"")))).join(this.eol)+this.eol}printMsidSemantic(U){if(!U)return"";let ee="a=msid-semantic:".concat(U.semantic);return U.applyForAll?ee+="".concat(m,"*"):U.identifierList.length>0&&(ee+=U.identifierList.map(ue=>"".concat(m).concat(ue))),ee+this.eol}}class xe extends Nn{print(U){const ee=U.attributes;let ue="";return ue+=this.printRTCP(ee.rtcp),ue+=this.printIceUfrag(ee.iceUfrag),ue+=this.printIcePwd(ee.icePwd),ue+=this.printIceOptions(ee.iceOptions),ue+=this.printCandidates(ee.candidates),ue+=this.printRemoteCandidatesList(ee.remoteCandidatesList),ue+=this.printEndOfCandidates(ee.endOfCandidates),ue+=this.printFingerprints(ee.fingerprints),ue+=this.printSetup(ee.setup),ue+=this.printMid(ee.mid),ue+=this.printExtmap(ee.extmaps),ue+=this.printRTPRelated(ee),ue+=this.printPtime(ee.ptime),ue+=this.printMaxPtime(ee.maxPtime),ue+=this.printDirection(ee.direction),ue+=this.printSSRCGroups(ee.ssrcGroups),ue+=this.printSSRC(ee.ssrcs),ue+=this.printRTCPMux(ee.rtcpMux),ue+=this.printRTCPMuxOnly(ee.rtcpMuxOnly),ue+=this.printRTCPRsize(ee.rtcpRsize),ue+=this.printMSId(ee.msids),ue+=this.printImageattr(ee.imageattr),ue+=this.printRid(ee.rids),ue+=this.printSimulcast(ee.simulcast),ue+=this.printSCTPPort(ee.sctpPort),ue+=this.printMaxMessageSize(ee.maxMessageSize),ue+=this.printUnrecognized(ee.unrecognized),ue}printCandidates(U){return U.map(ee=>"a=candidate:".concat(ee.foundation).concat(m).concat(ee.componentId).concat(m).concat(ee.transport).concat(m).concat(ee.priority).concat(m).concat(ee.connectionAddress).concat(m).concat(ee.port).concat(m,"typ").concat(m).concat(ee.type).concat(ee.relAddr?"".concat(m,"raddr").concat(m).concat(ee.relAddr):"").concat(ee.relPort?"".concat(m,"rport").concat(m).concat(ee.relPort):"").concat(Object.keys(ee.extension).map(ue=>"".concat(m).concat(ue).concat(m).concat(ee.extension[ue])).join("")).concat(this.eol)).join("")}printRemoteCandidatesList(U){return U.map(ee=>"a=remote-candidates:".concat(ee.join(m)).concat(this.eol)).join("")}printEndOfCandidates(U){return U===void 0?"":"a=end-of-candidates"+this.eol}printRTPRelated(U){if(!U.payloads)return"";const ee=U.payloads;let ue="";ue+=U.rtcpFeedbackWildcards.map(He=>this.printRTCPFeedback("*",He)).join("");for(const He of ee)ue+=this.printRtpMap(He.payloadType,He.rtpMap),ue+=this.printFmtp(He.payloadType,He.fmtp),ue+=He.rtcpFeedbacks.map(zt=>this.printRTCPFeedback(He.payloadType,zt)).join("");return ue}printFmtp(U,ee){if(!ee)return"";const ue=Object.keys(ee.parameters);return ue.length===1&&ee.parameters[ue[0]]===null?"a=fmtp:".concat(U).concat(m).concat(ue[0]).concat(this.eol):"a=fmtp:".concat(U).concat(m).concat(Object.keys(ee.parameters).map(He=>"".concat(He,"=").concat(ee.parameters[He])).join(";")).concat(this.eol)}printRtpMap(U,ee){return ee?"a=rtpmap:".concat(U).concat(m).concat(ee.encodingName,"/").concat(ee.clockRate).concat(ee.encodingParameters?"/".concat(ee.encodingParameters):"").concat(this.eol):""}printRTCPFeedback(U,ee){let ue="a=rtcp-fb:".concat(U).concat(m),He=ee;return He.type==="trr-int"?ue+="ttr-int".concat(m).concat(He.interval):(ue+="".concat(He.type),He.parameter&&(ue+="".concat(m).concat(He.parameter),He.additional&&(ue+="".concat(m).concat(He.additional)))),ue+this.eol}printPtime(U){return U===void 0?"":"a=ptime:".concat(U).concat(this.eol)}printMaxPtime(U){return U===void 0?"":"a=maxptime:".concat(U).concat(this.eol)}printDirection(U){return U===void 0?"":"a=".concat(U).concat(this.eol)}printSSRC(U){return U.map(ee=>Object.keys(ee.attributes).map(ue=>"a=ssrc:".concat(ee.ssrcId.toString(10)).concat(m).concat(ue).concat(ee.attributes[ue]?":".concat(ee.attributes[ue]):"").concat(this.eol)).join("")).join("")}printRTCPMux(U){return U===void 0?"":"a=rtcp-mux".concat(this.eol)}printRTCPMuxOnly(U){return U===void 0?"":"a=rtcp-mux-only".concat(this.eol)}printRTCPRsize(U){return U===void 0?"":"a=rtcp-rsize".concat(this.eol)}printRTCP(U){if(U===void 0)return"";let ee="a=rtcp:".concat(U.port);return U.netType&&(ee+="".concat(m).concat(U.netType)),U.addressType&&(ee+="".concat(m).concat(U.addressType)),U.address&&(ee+="".concat(m).concat(U.address)),ee+this.eol}printMSId(U){return U.map(ee=>"a=msid:".concat(ee.id).concat(ee.appdata?"".concat(m).concat(ee.appdata):"").concat(this.eol)).join("")}printImageattr(U){return U.map(ee=>"a=imageattr:".concat(ee).concat(this.eol)).join("")}printRid(U){return U.map(ee=>{let ue="a=rid:".concat(ee.id).concat(m).concat(ee.direction);return ee.payloads&&(ue+="".concat(m,"pt=").concat(ee.payloads.join(","))),ee.params.length>0&&(ue+="".concat(m).concat(ee.params.map(He=>He.type==="depend"?"depend=".concat(He.rids.join(",")):"".concat(He.type,"=").concat(He.val)).join(";"))),ue+this.eol}).join("")}printSimulcast(U){return U===void 0?"":"a=simulcast:".concat(U).concat(this.eol)}printSCTPPort(U){return U===void 0?"":"a=sctp-port:".concat(U).concat(this.eol)}printMaxMessageSize(U){return U===void 0?"":"a=max-message-size:".concat(U).concat(this.eol)}printMid(U){return U===void 0?"":"a=mid:".concat(U).concat(this.eol)}printSSRCGroups(U){return U.map(ee=>"a=ssrc-group:".concat(ee.semantic).concat(ee.ssrcIds.map(ue=>"".concat(m).concat(ue.toString(10))).join("")).concat(this.eol)).join("")}}function We(Pe){return new Ne().parse(Pe)}function ot(Pe,U){return new kn().print(Pe,U)}}},n={};function i(a){if(n[a])return n[a].exports;var l=n[a]={exports:{}};return e[a](l,l.exports,i),l.exports}return i.d=(a,l)=>{for(var u in l)i.o(l,u)&&!i.o(a,u)&&Object.defineProperty(a,u,{enumerable:!0,get:l[u]})},i.o=(a,l)=>Object.prototype.hasOwnProperty.call(a,l),i.r=a=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},i(8)})();function sa(e){return cV.parse(e)}function Bu(e,n){return cV.print(e,n)}var Yhe=ks("Array","keys"),qhe=Iu,Xhe=Jn,Jhe=T,Qhe=Yhe,dI=Array.prototype,Zhe={DOMTokenList:!0,NodeList:!0},efe=function(e){var n=e.keys;return e===dI||Jhe(dI,e)&&n===dI.keys||Xhe(Zhe,qhe(e))?Qhe:n},ca=c(efe);function Nr(e,n,i){return(n=function(a){var l=function(u,h){if(typeof u!="object"||!u)return u;var p=u[Symbol.toPrimitive];if(p!==void 0){var m=p.call(u,"string");if(typeof m!="object")return m;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(u)}(a);return typeof l=="symbol"?l:l+""}(n))in e?Object.defineProperty(e,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[n]=i,e}function lV(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),i.push.apply(i,a)}return i}function en(e){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?lV(Object(i),!0).forEach(function(a){Nr(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):lV(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}const uV=new class extends br{constructor(){super(...arguments),Nr(this,"currentUploadLogID",0)}reportLogUploadError(e){const{errorRange:n}=e;n[n.length-1]&&n[n.length-1]>this.currentUploadLogID&&(this.currentUploadLogID=n[n.length-1],this.emit("REPORT_LOG_UPLOAD",e))}};class tfe{constructor(n){Nr(this,"logger",void 0),Nr(this,"prefixLists",[]),this.logger=n}debug(){for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];this.logger.debug(...this.prefixLists,...i)}info(){for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];this.logger.info(...this.prefixLists,...i)}warning(){for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];this.logger.warning(...this.prefixLists,...i)}error(){for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];this.logger.error(...this.prefixLists,...i)}prefix(n){return this.prefixLists.push(n),this}popPrefix(){return this.prefixLists.pop(),this}}function hI(){const e=new Date;return e.toTimeString().split(" ")[0]+":"+e.getMilliseconds()}function dV(){const e=new Date,n=/((\d+:){2}\d+)/.exec(new Date().toUTCString());return n?(n==null?void 0:n[0])+":"+e.getUTCMilliseconds():e.toTimeString().split(" ")[0]+":"+e.getMilliseconds()}const ls={DEBUG:0,INFO:1,WARNING:2,ERROR:3,NONE:4},J_=Date.now(),x0=e=>{for(const n in ls)if(Object.prototype.hasOwnProperty.call(ls,n)&&ls[n]===e)return n;return"DEFAULT"},k=new class{constructor(){Nr(this,"proxyServerURL",void 0),Nr(this,"logLevel",ls.DEBUG),Nr(this,"uploadState","collecting"),Nr(this,"uploadLogWaitingList",[]),Nr(this,"uploadLogUploadingList",[]),Nr(this,"uploadErrorCount",0),Nr(this,"currentLogID",0),Nr(this,"url",void 0),Nr(this,"extLog",(e,n)=>{this.appendLogToWaitingList(e,...n)})}debug(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];const a=[ls.DEBUG].concat(n);this.log.apply(this,a)}info(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];const a=[ls.INFO].concat(n);this.log.apply(this,a)}warning(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];const a=[ls.WARNING].concat(n);this.log.apply(this,a)}warn(){this.warning(...arguments)}error(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];const a=[ls.ERROR].concat(n);this.log.apply(this,a)}upload(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];const a=[ls.DEBUG].concat(n);this.uploadLog.apply(this,a)}setLogLevel(e){e=Math.min(Math.max(0,e),4),this.logLevel=e}enableLogUpload(){zn("UPLOAD_LOG",!0)}disableLogUpload(){zn("UPLOAD_LOG",!1),this.uploadLogUploadingList=[],this.uploadLogWaitingList=[]}setProxyServer(e){this.proxyServerURL=e}prefix(e){return new tfe(this).prefix(e)}log(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];if(Date.now()-J_<100)return void setTimeout(()=>{this.log(...n)},Date.now()-J_);const a=Math.max(0,Math.min(4,n[0]));if(n[0]=hI()+" Agora-SDK [".concat(x0(a),"]:"),this.appendLogToWaitingList(a,...n),a<this.logLevel)return;const l=hI()+" %cAgora-SDK [".concat(x0(a),"]:");let u=[];if(!Q("USE_NEW_LOG"))switch(a){case ls.DEBUG:u=[l,"color: #64B5F6;"].concat(n.slice(1)),console.log.apply(console,u);break;case ls.INFO:u=[l,"color: #1E88E5; font-weight: bold;"].concat(n.slice(1)),console.log.apply(console,u);break;case ls.WARNING:u=[l,"color: #FB8C00; font-weight: bold;"].concat(n.slice(1)),console.warn.apply(console,u);break;case ls.ERROR:u=[l,"color: #B00020; font-weight: bold;"].concat(n.slice(1)),console.error.apply(console,u)}}uploadLog(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];if(Date.now()-J_<100)return void setTimeout(()=>{this.uploadLog(...n)},Date.now()-J_);const a=Math.max(0,Math.min(4,n[0]));n[0]=hI()+" Agora-SDK [".concat(x0(a),"]:"),this.appendLogToWaitingList(a,...n)}appendLogToWaitingList(e){if(!Q("UPLOAD_LOG"))return;for(var n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];Array.isArray(i[0])?i[0][0]=dV()+" Agora-SDK [".concat(x0(e),"]:"):i[0]=dV()+" Agora-SDK [".concat(x0(e),"]:");let l="";i.forEach(u=>{typeof u=="object"&&(u=JSON.stringify(u)),l+="".concat(u," ")}),this.uploadLogWaitingList.push({payload_str:l,log_level:e,log_item_id:this.currentLogID++}),this.uploadState==="uploading"&&this.uploadLogUploadingList.length===0&&this.uploadLogInterval()}startUpload(){this.uploadState="uploading",this.uploadLogUploadingList.length===0&&this.uploadLogInterval()}async uploadLogs(){const e=this.uploadLogUploadingList,n={sdk_version:cs,process_id:Q("PROCESS_ID"),payload:JSON.stringify(e)};return Ic(async()=>{const i=await Yo.post(this.url||(this.proxyServerURL?"https://".concat(this.proxyServerURL,"/ls/?h=").concat(Q("LOG_UPLOAD_SERVER"),"&p=443&d=upload/v1"):"https://".concat(Q("LOG_UPLOAD_SERVER"),"/upload/v1")),n,{responseType:"text"});if(i.data!=="OK"){const a=new Error("unexpected upload log response");throw a.response=i,a}},()=>(this.uploadLogUploadingList=[],!1),i=>{const a={status:-1,message:i.message,errorRange:e.map(l=>l.log_item_id)};return i.response?(a.status=i.response.status,a.data=i.response.data,a.headers=i.response.headers):i.request&&(a.status=i.request.status),uV.reportLogUploadError(a),!0},{timeout:Q("UPLOAD_LOG_REQUEST_RETRY_INTERVAL"),maxRetryTimeout:Q("UPLOAD_LOG_REQUEST_MAX_RETRY_INTERVAL")})}uploadLogInterval(){this.uploadLogUploadingList.length===0&&this.uploadLogWaitingList.length===0||(this.uploadLogUploadingList.length===0&&(this.uploadLogUploadingList=this.uploadLogWaitingList.splice(0,Q("UPLOAD_LOG_LENGTH_EACH_TIME"))),this.uploadLogs().then(()=>{this.uploadErrorCount=0,this.uploadLogWaitingList.length>0&&window.setTimeout(()=>this.uploadLogInterval(),Q("UPLOAD_LOG_INTERVAL"))}).catch(e=>{this.uploadErrorCount+=1,this.uploadErrorCount<2?window.setTimeout(()=>this.uploadLogInterval(),Q("UPLOAD_LOG_TWICE_RETRY_INTERVAL_V1")):window.setTimeout(()=>this.uploadLogInterval(),Q("UPLOAD_LOG_RETRY_INTERVAL_V1"))}))}};var hV;function nfe(e){return Ni(e.reportId,"params.reportId",0,100,!1),Ni(e.category,"params.category",0,100,!1),Ni(e.event,"params.event",0,100,!1),Ni(e.label,"params.label",0,100,!1),Yn(e.value,"params.value",Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,!1),!0}(hV={}).FREE="free",hV.UPLOADING="uploading",function(e){e[e.MISC=0]="MISC",e[e.INTERNAL_EVENT=1]="INTERNAL_EVENT",e[e.PUBLIC_EVENT=2]="PUBLIC_EVENT",e[e.WEB_EVENT=3]="WEB_EVENT",e[e.INTERNAL_API=4]="INTERNAL_API",e[e.WEB_API=5]="WEB_API",e[e.PUBLIC_API=6]="PUBLIC_API"}({});const rfe={sid:"",lts:0,success:null,cname:null,uid:null,peer:null,cid:null,elapse:null,extend:null,vid:0};let Ei=function(e){return e.PUBLISH="publish",e.SUBSCRIBE="subscribe",e.WS_COMPRESSOR_INIT="ws_compressor_init",e.SESSION_INIT="session_init",e.JOIN_CHOOSE_SERVER="join_choose_server",e.REQ_USER_ACCOUNT="req_user_account",e.JOIN_GATEWAY="join_gateway",e.REJOIN_GATEWAY="rejoin_gateway",e.STREAM_SWITCH="stream_switch",e.REQUEST_PROXY_WORKER_MANAGER="request_proxy_worker_manager",e.REQUEST_PROXY_APPCENTER="request_proxy_appcenter",e.FIRST_VIDEO_RECEIVED="first_video_received",e.FIRST_AUDIO_RECEIVED="first_audio_received",e.FIRST_VIDEO_DECODE="first_video_decode",e.FIRST_AUDIO_DECODE="first_audio_decode",e.XLA_PEER_FIRST_VIDEO_FRAME="xla_peer_first_video_frame",e.ON_ADD_AUDIO_STREAM="on_add_audio_stream",e.ON_ADD_VIDEO_STREAM="on_add_video_stream",e.ON_UPDATE_STREAM="on_update_stream",e.ON_REMOVE_STREAM="on_remove_stream",e.USER_ANALYTICS="req_user_analytics",e.PC_STATS="pc_stats",e.UPDATE_REMOTE_RTPCAPABILITIES="update_remote_rtpCapabilities",e.AB_TEST="ab_test",e}({}),pr=function(e){return e.SESSION="io.agora.pb.Wrtc.Session",e.JOIN_CHOOSE_SERVER="io.agora.pb.Wrtc.JoinChooseServer",e.REQ_USER_ACCOUNT="io.agora.pb.Wrtc.ReqUserAccount",e.JOIN_GATEWAY="io.agora.pb.Wrtc.JoinGateway",e.RE_JOIN_GATEWAY="io.agora.pb.Wrtc.ReJoinGateway",e.PUBLISH="io.agora.pb.Wrtc.Publish",e.SUBSCRIBE="io.agora.pb.Wrtc.Subscribe",e.WS_COMPRESSOR_INIT="io.agora.pb.Wrtc.WsCompressorInit",e.STREAM_SWITCH="io.agora.pb.Wrtc.StreamSwitch",e.AUDIO_SENDING_STOPPED="io.agora.pb.Wrtc.AudioSendingStopped",e.VIDEO_SENDING_STOPPED="io.agora.pb.Wrtc.VideoSendingStopped",e.REQUEST_PROXY_APPCENTER="io.agora.pb.Wrtc.RequestProxyAppCenter",e.REQUEST_PROXY_WORKER_MANAGER="io.agora.pb.Wrtc.RequestProxyWorkerManager",e.API_INVOKE="io.agora.pb.Wrtc.ApiInvoke",e.FIRST_VIDEO_RECEIVED="io.agora.pb.Wrtc.FirstVideoReceived",e.FIRST_AUDIO_RECEIVED="io.agora.pb.Wrtc.FirstAudioReceived",e.FIRST_VIDEO_DECODE="io.agora.pb.Wrtc.FirstVideoDecode",e.FIRST_AUDIO_DECODE="io.agora.pb.Wrtc.FirstAudioDecode",e.XLA_PEER_FIRST_VIDEO_FRAME="io.agora.pb.Wrtc.XLAPeerFirstVideoFrame",e.ON_ADD_AUDIO_STREAM="io.agora.pb.Wrtc.OnAddAudioStream",e.ON_ADD_VIDEO_STREAM="io.agora.pb.Wrtc.OnAddVideoStream",e.ON_UPDATE_STREAM="io.agora.pb.Wrtc.OnUpdateStream",e.ON_REMOVE_STREAM="io.agora.pb.Wrtc.OnRemoveStream",e.JOIN_CHANNEL_TIMEOUT="io.agora.pb.Wrtc.JoinChannelTimeout",e.PEER_PUBLISH_STATUS="io.agora.pb.Wrtc.PeerPublishStatus",e.WORKER_EVENT="io.agora.pb.Wrtc.WorkerEvent",e.AP_WORKER_EVENT="io.agora.pb.Wrtc.APWorkerEvent",e.JOIN_WEB_PROXY_AP="io.agora.pb.Wrtc.JoinWebProxyAP",e.WEBSOCKET_QUIT="io.agora.pb.Wrtc.WebSocketQuit",e.USER_ANALYTICS="io.agora.pb.Wrtc.UserAnalytics",e.AUTOPLAY_FAILED="io.agora.pb.Wrtc.AutoplayFailed",e.PC_STATS="io.agora.pb.Wrtc.PCStats",e.UPDATE_REMOTE_RTPCAPABILITIES="io.agora.pb.Wrtc.UpdateRemoteRTPCapabilities",e.AB_TEST="io.agora.pb.Wrtc.ABTest",e}({});(function(e){e[e.WORKER_EVENT=156]="WORKER_EVENT",e[e.AP_WORKER_EVENT=160]="AP_WORKER_EVENT"})({});let ife=function(e){return e[e.SESSION=26]="SESSION",e[e.JOIN_CHOOSE_SERVER=27]="JOIN_CHOOSE_SERVER",e[e.REQ_USER_ACCOUNT=196]="REQ_USER_ACCOUNT",e[e.JOIN_GATEWAY=28]="JOIN_GATEWAY",e[e.PUBLISH=30]="PUBLISH",e[e.SUBSCRIBE=29]="SUBSCRIBE",e[e.WS_COMPRESSOR_INIT=9430]="WS_COMPRESSOR_INIT",e[e.STREAM_SWITCH=32]="STREAM_SWITCH",e[e.AUDIO_SENDING_STOPPED=33]="AUDIO_SENDING_STOPPED",e[e.VIDEO_SENDING_STOPPED=34]="VIDEO_SENDING_STOPPED",e[e.REQUEST_PROXY_APPCENTER=35]="REQUEST_PROXY_APPCENTER",e[e.REQUEST_PROXY_WORKER_MANAGER=36]="REQUEST_PROXY_WORKER_MANAGER",e[e.API_INVOKE=41]="API_INVOKE",e[e.FIRST_VIDEO_RECEIVED=348]="FIRST_VIDEO_RECEIVED",e[e.FIRST_AUDIO_RECEIVED=349]="FIRST_AUDIO_RECEIVED",e[e.FIRST_VIDEO_DECODE=350]="FIRST_VIDEO_DECODE",e[e.FIRST_AUDIO_DECODE=351]="FIRST_AUDIO_DECODE",e[e.ON_ADD_AUDIO_STREAM=352]="ON_ADD_AUDIO_STREAM",e[e.ON_ADD_VIDEO_STREAM=353]="ON_ADD_VIDEO_STREAM",e[e.ON_UPDATE_STREAM=356]="ON_UPDATE_STREAM",e[e.ON_REMOVE_STREAM=355]="ON_REMOVE_STREAM",e[e.JOIN_CHANNEL_TIMEOUT=407]="JOIN_CHANNEL_TIMEOUT",e[e.PEER_PUBLISH_STATUS=408]="PEER_PUBLISH_STATUS",e[e.WORKER_EVENT=156]="WORKER_EVENT",e[e.AP_WORKER_EVENT=160]="AP_WORKER_EVENT",e[e.JOIN_WEB_PROXY_AP=700]="JOIN_WEB_PROXY_AP",e[e.WEBSOCKET_QUIT=671]="WEBSOCKET_QUIT",e[e.USER_ANALYTICS=1e4]="USER_ANALYTICS",e[e.AUTOPLAY_FAILED=9178]="AUTOPLAY_FAILED",e}({});function It(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return function(n,i,a){const l=a.value;if(typeof l=="function"){const u=e.className||n.__className__||(n.constructor.name==="AgoraRTCClient"?"Client":n.constructor.name);a.value=function(){for(var h,p=arguments.length,m=new Array(p),E=0;E<p;E++)m[E]=arguments[E];let S=m;if(e.argsMap)try{S=e.argsMap(this,...m)}catch(w){k.warning(w),S=[]}try{JSON.stringify(S)}catch{k.warning("arguments for method ".concat(u,".").concat(String(i)," not serializable for apiInvoke.")),S=[]}const R=(e.report||ct).reportApiInvoke(this._sessionId||null,{id:this._clientId||((h=this.store)===null||h===void 0?void 0:h.clientId)||this._ID,name:"".concat(u,".").concat(String(i)),options:S,tag:gr.TRACER,reportResult:e.reportResult},e.throttleTime);try{const w=l.apply(this,m);return w instanceof et?w.then(O=>(R.onSuccess(e.reportResult&&O),O)).catch(O=>{throw R.onError(O),O}):(R.onSuccess(e.reportResult&&w),w)}catch(w){throw R.onError(w),w}}}return a}}const ct=new class{constructor(){Nr(this,"baseInfoMap",new Map),Nr(this,"proxyServer",void 0),Nr(this,"eventUploadTimer",void 0),Nr(this,"setSessionIdTimer",void 0),Nr(this,"url",void 0),Nr(this,"sids",new Set),Nr(this,"backupUrl",void 0),Nr(this,"_appId",void 0),Nr(this,"_aid",0),Nr(this,"keyEventUploadPendingItems",[]),Nr(this,"normalEventUploadPendingItems",[]),Nr(this,"apiInvokeUploadPendingItems",[]),Nr(this,"apiInvokeCount",0),Nr(this,"apiInvokeLoggedCount",0),Nr(this,"ltsList",[]),Nr(this,"lastSendNormalEventTime",Date.now()),Nr(this,"customReportCounterTimer",void 0),Nr(this,"customReportCount",0),Nr(this,"extApiInvoke",async e=>{for(const n of e){const i=en(en({},n),{},{sid:null,invokeId:++this.apiInvokeCount,tag:gr.TRACER});this.sendApiInvoke(i)}}),this.eventUploadTimer=window.setInterval(this.doSend.bind(this),Q("EVENT_REPORT_SEND_INTERVAL")),this.setSessionIdTimer=window.setInterval(this.appendSessionId.bind(this),Q("EVENT_REPORT_SEND_INTERVAL"))}getBaseInfoBySessionId(e){return this.baseInfoMap.get(e)}setAppId(e){this._appId=e,this._aid=parseInt(e.replace(/[a-fA-F0-9]{8}/g,n=>{let[i,a]=n;return i+a}),16)||0}reportApiInvoke(e,n,i){n.timeout=n.timeout||6e4,n.reportResult=n.reportResult===void 0||n.reportResult;const a=Date.now();this.apiInvokeCount+=1;const l=this.apiInvokeCount,u=!!Q("SHOW_REPORT_INVOKER_LOG"),h=!!Q("SHOW_REPORT_USER_INVOKER_LOG"),p=u||h&&n.id;p&&(this.apiInvokeLoggedCount+=1);const m=this.apiInvokeLoggedCount;function E(O,H){if(p){let B="[apiInvoke-".concat(m,"]");if(n.id&&(B+="[".concat(n.id,"]")),n.name&&(B+="[".concat(n.name,"]"),n.name===Ur.JOIN))return k.info("".concat(B," ").concat(O));k.info("".concat(B," ").concat(O),O==="start"?n.options:H||"")}}const S=()=>({tag:n.tag,invokeId:l,sid:e,name:n.name,apiInvokeTime:a,options:n.options,states:n.states||null});E("start");let R=!1;Pi(n.timeout).then(()=>{R||(this.sendApiInvoke(en(en({},S()),{},{error:X.API_INVOKE_TIMEOUT,success:!1})),E("timeout"))});const w=new Re(X.UNEXPECTED_ERROR,"".concat(n.name,": this api invoke is end"));return{onSuccess:O=>{const H=()=>{if(R)throw w;return R=!0,this.sendApiInvoke(en(en({},S()),{},{success:!0},n.reportResult&&{result:O})),E("onSuccess"),O};return i?W3(H,n.name+"Success",i,()=>R=!0):H()},onError:O=>{const H=()=>{if(R)throw O;R=!0,this.sendApiInvoke(en(en({},S()),{},{success:!1,error:O})),E("onFailure",O.toString())};return i?W3(H,n.name+"Error",i,()=>R=!0):H()}}}sessionInit(e,n){if(this.baseInfoMap.has(e))return;const i=Date.now(),a=this.createBaseInfo(e,i);a.cname=n.cname;const l=Object.assign({},{willUploadConsoleLog:Q("UPLOAD_LOG"),maxTouchPoints:navigator.maxTouchPoints,areaVersion:sI?"global":"oversea",areas:Q("AREAS")&&Q("AREAS").join(",")},n.extend),{stringUid:u,channelProfile:h,channelMode:p,isABTestSuccess:m,lsid:E,clientRole:S}=n,R=Date.now(),w=en(en({},a),{},{eventType:Ei.SESSION_INIT,appid:n.appid,browser:navigator.userAgent,buildFormat:n.buildFormat,build:lI,lts:R,elapse:R-i,extend:JSON.stringify(l),mode:n.mode,process:Q("PROCESS_ID"),appType:Q("APP_TYPE"),success:!0,version:cs,stringUid:u,channelProfile:h,channelMode:p,isABTestSuccess:m,lsid:E,clientType:Ge(O=window.navigator.userAgent).call(O,"AgoraWebView")?42:20,clientRole:S,serviceId:Q("PROCESS_ID"),extensionID:Q("PLUGIN_INFO").join(",")||""});var O;this.send({type:pr.SESSION,data:w},!0)}joinChooseServer(e,n){const i=this.baseInfoMap.get(e);if(!i)return;const a=i.info,l=Date.now(),u=en(en({},a),{},{role:n.role,eventType:Ei.JOIN_CHOOSE_SERVER,lts:l,eventElapse:n.elapse||l-n.lts,chooseServerAddr:n.csAddr,errorCode:n.ec,elapse:l-i.startTime,success:n.succ,chooseServerAddrList:JSON.stringify(n.serverList),uid:n.uid?parseInt(n.uid):null,cid:n.cid?parseInt(n.cid):null,chooseServerIp:n.csIp||"",opid:n.opid,unilbsServerIds:n.unilbsServerIds,extend:n.extend||void 0,isHttp3:n.isHttp3,corssRegionTagReq:n.corssRegionTagReq||void 0,corssRegionTagRes:n.corssRegionTagRes||void 0,resourceTimingInfo:n.resourceTimingInfo||void 0});this.send({type:pr.JOIN_CHOOSE_SERVER,data:u},!0)}reqUserAccount(e,n){const i=this.baseInfoMap.get(e);if(!i)return;const a=i.info,l=Date.now(),u=en(en({},a),{},{eventType:Ei.REQ_USER_ACCOUNT,lts:l,success:n.success,serverAddress:n.serverAddr,stringUid:n.stringUid,uid:n.uid,errorCode:n.errorCode,elapse:n.elapse||l-i.startTime,eventElapse:l-n.lts,extend:JSON.stringify(n.extend)});this.send({type:pr.REQ_USER_ACCOUNT,data:u},!0)}joinGateway(e,n){const i=this.baseInfoMap.get(e);if(!i)return;const a=i.info;n.vid&&(a.vid=n.vid),a.uid=n.uid,a.cid=n.cid;const l=Date.now(),{firstSuccess:u,addr:h,isProxy:p}=n,m=l-i.startTime,E=en(en({},a),{},{eventType:Ei.JOIN_GATEWAY,lts:l,gatewayAddr:n.addr,success:n.succ,errorCode:n.ec,errorMsg:n.errorMsg||"",elapse:m,eventElapse:l-n.lts,firstSuccess:u,signalChannel:n.signalChannel,preload:n.preload?1:0,installId:aI(),isABTestSuccess:n.isABTestSuccess?1:0}),S=E.success?1:0;if(n.succ&&(i.lastJoinSuccessTime=l),u)this.send({type:pr.JOIN_GATEWAY,data:E},!0);else{let R;if(h)if(p){const O=h.match(/h=(\d{1,3}-){3}\d{1,3}/g),H=h.match(/p=[0-9]{1,6}/g);R={isSuccess:S,gatewayIp:O&&O.length?O[0].split("=")[1].replace(/-/g,"."):"",port:H&&H.length?H[0].split("=")[1]:"",isProxy:p?1:0}}else{const O=h.match(/wss:\/\/(\d{1,3}-){3}\d{1,3}/g),H=h.match(/(:|p=)[0-9]{1,6}/g);R={isSuccess:S,gatewayIp:O&&O.length?O[0].split("//")[1].replace(/-/g,"."):"",port:H&&H.length?H[0].split(/:|p=/g)[1]:"",isProxy:p?1:0}}else R={isSuccess:S,gatewayIp:"",port:"",isProxy:p?1:0};delete E.success,delete E.eventType,delete E.firstSuccess,E.vid=Number(E.vid);const w=Object.assign({},E,R,{eventType:Ei.REJOIN_GATEWAY});this.send({type:pr.RE_JOIN_GATEWAY,data:w},!0)}}joinChannelTimeout(e,n){const i=this.baseInfoMap.get(e);if(!i)return;const a=Date.now(),l=en(en({},i.info),{},{lts:a,timeout:n,elapse:a-i.startTime});this.send({type:pr.JOIN_CHANNEL_TIMEOUT,data:l},!0)}publish(e,n){const i=this.baseInfoMap.get(e);if(!i)return;const a=i.info,l=Date.now(),u=en(en({},a),{},{eventType:Ei.PUBLISH,lts:l,eventElapse:n.eventElapse,elapse:l-i.startTime,success:n.succ,errorCode:n.ec,videoName:n.videoName,audioName:n.audioName,screenName:n.screenName,screenshare:n.screenshare,audio:n.audio,video:n.video,p2pid:n.p2pid,publishRequestid:n.publishRequestid});this.send({type:pr.PUBLISH,data:u},!0)}subscribe(e,n,i){const a=this.baseInfoMap.get(e);if(!a)return;const l=a.info,u=Date.now(),h=en(en({},l),{},{eventType:Ei.SUBSCRIBE,lts:u,eventElapse:n.eventElapse,elapse:u-a.startTime,success:n.succ,errorCode:n.ec,video:n.video,audio:n.audio,subscribeRequestid:n.subscribeRequestid,p2pid:n.p2pid,preSsrc:n.preSsrc?1:0},i&&{extend:JSON.stringify({isMassSubscribe:!0})});typeof n.peerid=="string"?h.peerSuid=n.peerid:h.peer=n.peerid,this.send({type:pr.SUBSCRIBE,data:h},!0)}wsCompressorInit(e){var n;const i=[...ca(n=this.baseInfoMap).call(n)],a=i.length?i[0]:"UnableToGetSid",l=this.baseInfoMap.get(a);if(!l)return;const u=l.info,h=Date.now(),p=en(en({},u),{},{eventType:Ei.WS_COMPRESSOR_INIT,lts:h,eventElapse:e.eventElapse,elapse:h-l.startTime,status:e.status?1:2});this.send({type:pr.WS_COMPRESSOR_INIT,data:p},!0)}firstXLAPeerFirstVideoFrame(e,n){const i=this.baseInfoMap.get(e);if(!i)return;const a=i.info,l=Date.now(),u=n.peerPubStatusMs-(i.lastJoinSuccessTime||l),h=en(en({},a),{},{elapse:l-i.startTime,eventType:Ei.XLA_PEER_FIRST_VIDEO_FRAME,lts:l,peer:n.peer,width:n.width,height:n.height,ssrc:n.ssrc,p2pid:n.p2pid,peerPublishDuration:n.peerPublishDuration,joinChannelSuccessElapse:u,peerPubStatusMs:n.peerPubStatusMs-n.joinChannelStart,availablePublish:n.peerPublishDuration>u?1:0,preloadStart:Math.max(n.preloadStart-n.joinChannelStart,0),preloadEnd:Math.max(n.preloadEnd-n.joinChannelStart,0),encrypt:Math.max(n.apStart-n.joinChannelStart,0),ap:Math.max(n.apEnd-n.joinChannelStart,0),sua:Math.max(n.suaEnd-n.joinChannelStart,0),beforeConnect:Math.max(n.beforeConnect-n.joinChannelStart,0),peerRecevier:Math.max(n.peerReceiver-n.joinChannelStart,0),ice:Math.max(n.ice-n.joinChannelStart,0),pc:Math.max(n.pc-n.joinChannelStart,0),signalConnected:Math.max(n.signalConnected-n.joinChannelStart,0),joinReq:Math.max(n.joinReq-n.joinChannelStart,0),joinRes:Math.max(n.joinRes-n.joinChannelStart,0),userJoinNotify:Math.max(n.userJoinNotify-n.joinChannelStart,0),videoSsrcNotify:Math.max(n.videoAddNotify-n.joinChannelStart,0),subscribeDelayMs:Math.max(n.subscribeStart-n.videoAddNotify,0),subscribeStart:Math.max(n.subscribeStart-n.joinChannelStart,0),subscribeEnd:Math.max(n.subscribeEnd-n.joinChannelStart,0),firstReceived:Math.max(n.firstReceived-n.joinChannelStart,0),firstDecoded:Math.max(n.firstDecoded-n.joinChannelStart,0),firstPreRender:Math.max(n.firstPreRender-n.joinChannelStart,0),firstRender:Math.max(n.firstRender-n.joinChannelStart,0),playDelayMs:Math.max(n.playStart-n.subscribeEnd,0),playStart:Math.max(n.playStart-n.joinChannelStart,0),playEnd:Math.max(n.playEnd-n.joinChannelStart,0),isPreSub:n.isPreSub?1:0,isPrePc:n.isPrePc?1:0,isPreInstantVideo:n.isPreInstantVideo?1:0});this.send({type:pr.XLA_PEER_FIRST_VIDEO_FRAME,data:h},!0)}firstRemoteVideoDecode(e,n,i,a){const l=this.baseInfoMap.get(e);if(!l)return;const u=l.info,h=Date.now(),p=en(en(en({},u),a),{},{elapse:h-l.startTime,eventType:n,lts:h,firstDecodeFrame:Math.max((a.firstFrame||h)-l.startTime,0),apEnd:Math.max(a.apEnd-l.startTime,0),apStart:Math.max(a.apStart-l.startTime,0),joinGwEnd:Math.max(a.joinGwEnd-l.startTime,0),joinGwStart:Math.max(a.joinGwStart-l.startTime,0),pcEnd:Math.max(a.pcEnd-l.startTime,0),pcStart:Math.max(a.pcStart-l.startTime,0),subscriberEnd:Math.max(a.subscriberEnd-l.startTime,0),subscriberStart:Math.max(a.subscriberStart-l.startTime,0),videoAddNotify:Math.max(a.videoAddNotify-l.startTime,0)});this.send({type:i,data:p},!0)}firstRemoteFrame(e,n,i,a){const l=this.baseInfoMap.get(e);if(!l)return;const u=l.info,h=Date.now(),p=en(en(en({},u),a),{},{elapse:h-l.startTime,eventType:n,lts:h});this.send({type:i,data:p},!0)}abTest(e,n){const i=this.baseInfoMap.get(e);if(!i)return;const a=i.info,l=Date.now(),u=en(en(en({},a),n),{},{vid:a.vid===void 0?0:Number(a.vid),elapse:l-i.startTime,eventType:Ei.AB_TEST,lts:l});this.send({type:pr.AB_TEST,data:u},!0)}pcStats(e,n){const i=this.baseInfoMap.get(e);if(!i)return;const a=i.info,l=Date.now(),u=en(en(en({},a),n),{},{vid:a.vid===void 0?0:Number(a.vid),elapse:l-i.startTime,eventType:Ei.PC_STATS,lts:l,preallocation:n.preallocation?1:0});this.send({type:pr.PC_STATS,data:u},!0)}updateRemoteRTPCapabilities(e,n){if(e){const i=this.baseInfoMap.get(e);if(!i)return;const a=i.info,l=Date.now(),u=en(en(en({},a),n),{},{vid:a.vid===void 0?0:Number(a.vid),eventType:Ei.UPDATE_REMOTE_RTPCAPABILITIES,lts:l});this.send({type:pr.UPDATE_REMOTE_RTPCAPABILITIES,data:u},!0)}}onGatewayStream(e,n,i,a){const l=this.baseInfoMap.get(e);if(!l)return;const u=l.info,h=Date.now(),p=en(en(en({},u),a),{},{eventType:n,lts:h});this.send({type:i,data:p},!0)}streamSwitch(e,n){const i=this.baseInfoMap.get(e);if(!i)return;const a=i.info,l=Date.now(),u=en(en({},a),{},{eventType:Ei.STREAM_SWITCH,lts:l,isDual:n.isdual,elapse:l-i.startTime,success:n.succ});this.send({type:pr.STREAM_SWITCH,data:u},!0)}requestProxyAppCenter(e,n){const i=this.baseInfoMap.get(e);if(!i)return;const a=i.info,l=Date.now(),u=en(en({},a),{},{eventType:Ei.REQUEST_PROXY_APPCENTER,lts:l,eventElapse:l-n.lts,elapse:l-i.startTime,APAddr:n.APAddr,workerManagerList:n.workerManagerList,response:n.response,errorCode:n.ec,success:n.succ});this.send({type:pr.REQUEST_PROXY_APPCENTER,data:u},!0)}requestProxyWorkerManager(e,n){const i=this.baseInfoMap.get(e);if(!i)return;const a=i.info,l=Date.now(),u=en(en({},a),{},{eventType:Ei.REQUEST_PROXY_WORKER_MANAGER,lts:l,eventElapse:l-n.lts,elapse:l-i.startTime,workerManagerAddr:n.workerManagerAddr,response:n.response,errorCode:n.ec,success:n.succ});this.send({type:pr.REQUEST_PROXY_WORKER_MANAGER,data:u},!0)}setProxyServer(e){this.proxyServer=e,e?k.debug("reportProxyServerurl: ".concat(e)):k.debug("disable reportProxyServerurl: ".concat(e))}peerPublishStatus(e,n){const i=this.baseInfoMap.get(e);if(!i)return;const a=i.info,l=Date.now(),u=en(en({},a),{},{subscribeElapse:n.subscribeElapse,peer:n.peer,peerPublishDuration:Math.max(n.audioPublishDuration,n.videoPublishDuration),audiotag:n.audioPublishDuration>0?1:-1,videotag:n.videoPublishDuration>0?1:-1,lts:l,elapse:l-i.startTime,joinChannelSuccessElapse:l-(i.lastJoinSuccessTime||l),peerPublishDurationVideo:n.videoPublishDuration,peerPublishDurationAudio:n.audioPublishDuration});this.send({type:pr.PEER_PUBLISH_STATUS,data:u},!0)}workerEvent(e,n){const i=this.baseInfoMap.get(e);if(!i)return;const a=i.info,l=Date.now();(function(u,h,p){const m=u[h];if(!m||typeof m!="string")return[u];u[h]="";const E=ul(JSON.stringify(u));let S=0;const R=[];let w=0;for(let O=0;O<m.length;O++)w+=m.charCodeAt(O)<=127?1:3,w<=p-E||(R[R.length]=Ve(Ve({},u),{},{[h]:m.substring(S,O)}),S=O,w=m.charCodeAt(O)<=127?1:3);return S!==m.length-1&&(R[R.length]=Ve(Ve({},u),{},{[h]:m.substring(S)})),R})(en(en(en({},a),n),{},{elapse:l-i.startTime,lts:l,productType:"WebRTC"}),"payload",1300).forEach(u=>this.send({type:pr.WORKER_EVENT,data:u},!0))}apworkerEvent(e,n){const i=this.baseInfoMap.get(e);if(!i)return;const a=i.info,l=Date.now(),u=en(en(en({},a),n),{},{elapse:l-i.startTime,lts:l});this.send({type:pr.AP_WORKER_EVENT,data:u},!0)}joinWebProxyAP(e,n){const i=this.baseInfoMap.get(e);if(!i)return;const a=i.info,l=Date.now(),u=en(en(en({},a),n),{},{elapse:l-i.startTime,lts:l,extend:n.extend||void 0});this.send({type:pr.JOIN_WEB_PROXY_AP,data:u},!0)}WebSocketQuit(e,n){const i=this.baseInfoMap.get(e);if(!i)return;const a=i.info,l=Date.now(),u=en(en(en({},a),n),{},{elapse:l-i.startTime,lts:l});this.send({type:pr.WEBSOCKET_QUIT,data:u},!0)}async sendCustomReportMessage(e,n){if(this.customReportCount+=n.length,this.customReportCount>Q("CUSTOM_REPORT_LIMIT"))throw new Re(X.CUSTOM_REPORT_FREQUENCY_TOO_HIGH);this.customReportCounterTimer||(this.customReportCounterTimer=window.setInterval(()=>{this.customReportCount=0},5e3));const i=Date.now(),a=n.map(l=>({type:pr.USER_ANALYTICS,data:en(en({sid:e},l),{},{lts:i})}));try{Q("NEW_REPORT_SERVER")?await this.postDataToStatsCollector2(a):await this.postDataToStatsCollector(a)}catch(l){throw k.error("send custom report message failed",l.toString()),new Re(X.CUSTOM_REPORT_SEND_FAILED,l.message)}}sendApiInvoke(e){const n=Q("NOT_REPORT_EVENT");if(e.tag&&Ge(n)&&Ge(n).call(n,e.tag))return!1;if(e.sid===null)return this.apiInvokeUploadPendingItems.push(e),!1;const i=this.baseInfoMap.get(e.sid);if(!i)return this.apiInvokeUploadPendingItems.push(e),!1;const{cname:a,uid:l,cid:u}=i.info;let h;if(e.lts=e.lts||Date.now(),e.error)if(e.error instanceof Re){const{code:m,message:E}=e.error;h=m||E||e.error.toString()}else h=e.error.toString();const p={invokeId:e.invokeId,sid:e.sid,cname:a,cid:u,uid:l,lts:e.lts,success:e.success,elapse:e.lts-i.startTime,execElapse:e.lts-e.apiInvokeTime,apiName:e.name,options:e.options?JSON.stringify(e.options):void 0,execStates:e.states?JSON.stringify(e.states):void 0,execResult:e.result?JSON.stringify(e.result):void 0,errorCode:e.error?h:void 0,errorMsg:e.error?JSON.stringify(e.error):void 0};return this.send({type:pr.API_INVOKE,data:p},!1),!0}addSid(e){this.sids.add(e)}removeSid(e){this.sids.delete(e)}appendSessionId(){const e=this.apiInvokeUploadPendingItems;if(e.length===0)return;const n=Array.from(this.sids).find(i=>i!==null);n&&e.forEach(i=>{i&&(i.sid=n,this.sendApiInvoke(Object.assign({},i)))}),e.length=0}send(e,n){if(n)return this.keyEventUploadPendingItems.push(e),void this.sendItems(this.keyEventUploadPendingItems,!0);this.normalEventUploadPendingItems.push(e),this.normalEventUploadPendingItems.length>Q("NORMAL_EVENT_QUEUE_CAPACITY")&&this.normalEventUploadPendingItems.splice(0,1),this.normalEventUploadPendingItems.length>=10&&this.sendItems(this.normalEventUploadPendingItems,!1)}doSend(){this.keyEventUploadPendingItems.length>0&&this.sendItems(this.keyEventUploadPendingItems,!0),this.normalEventUploadPendingItems.length>0&&Date.now()-this.lastSendNormalEventTime>=5e3&&this.sendItems(this.normalEventUploadPendingItems,!1)}sendItems(e,n){const i=[],a=[];for(;e.length;){const u=e.shift();i.length<20?i.push(u):a.push(u)}e.push(...a);for(const u of[...i]){var l;this.ltsList.indexOf(u.data.lts)!==-1?(u.data.lts=this.ltsList[this.ltsList.length-1]+1,this.ltsList.push(u.data.lts)):(this.ltsList.push(u.data.lts),$d(l=this.ltsList).call(l,(h,p)=>h-p))}return n||(this.lastSendNormalEventTime=Date.now()),Q("ENABLE_EVENT_REPORT")&&i.length&&(Q("NEW_REPORT_SERVER")?this.postDataToStatsCollector2(i):this.postDataToStatsCollector(i)).catch((u=>h=>{Q("EVENT_REPORT_RETRY")&&(n?this.keyEventUploadPendingItems=this.keyEventUploadPendingItems.concat(u):(this.normalEventUploadPendingItems=this.normalEventUploadPendingItems.concat(u),this.normalEventUploadPendingItems.length>Q("NORMAL_EVENT_QUEUE_CAPACITY")&&(this.normalEventUploadPendingItems.splice(0,this.normalEventUploadPendingItems.length-Q("NORMAL_EVENT_QUEUE_CAPACITY")),k.warning("report: drop normal events"))))})(i)),e}async postDataToStatsCollector2(e){Gr.networkState===wa.OFFLINE&&await et.race([Gr.onlineWaiter,Pi(2*ei.maxRetryTimeout)]);const n=l=>{let u=new Uint8Array;return l.forEach(h=>{const p=Yw(JSON.stringify(h.data)),m=new ArrayBuffer(5),E=(R=>{let w=0;return Object.entries(pr).forEach(O=>{let[H,B]=O;B===R.type&&(w=ife[H])}),w})(h),S=new DataView(m);S.setUint16(0,p.byteLength,!0),S.setUint8(2,255&E),S.setUint8(3,E>>>8&255),S.setUint8(4,E>>>16&255),u=M3(u,new Uint8Array(m)),u=M3(u,p)}),u},i="event";let a=this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(Q("NEW_REPORT_SERVER_DOMAINS")[0],"&p=443&d=").concat(i):"https://".concat(Q("NEW_REPORT_SERVER_DOMAINS")[0],"/").concat(i);for(let l=0;l<2;l+=1){l===1&&(a=this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(Q("NEW_REPORT_SERVER_DOMAINS")[1],"&p=443&d=").concat(i):"https://".concat(Q("NEW_REPORT_SERVER_DOMAINS")[1],"/").concat(i));try{await tI(a,{timeout:1e4,data:n(e),headers:en(en({biz:"webrtc",sendts:Math.round(Date.now()/1e3),debug:"false"},this._appId&&{appid:this._appId}),{},{"Content-Type":"application/octet-stream"})},!0)}catch(u){if(l===1)throw u;continue}return}}async postDataToStatsCollector(e){let n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const i=(p=>{const m=p&&p.data.sid&&this.baseInfoMap.get(p.data.sid);return m&&m.info.vid&&+m.info.vid||0})(e[0]),a=i?void 0:this._aid,l={msgType:"EventMessages",sentTs:Math.round(Date.now()/1e3),payloads:e.map(p=>JSON.stringify(p)),vid:i,aid:a};Gr.networkState===wa.OFFLINE&&await et.race([Gr.onlineWaiter,Pi(2*ei.maxRetryTimeout)]);const u=n?"/events/proto-raws":"/events/messages";let h=this.url||(this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(Q("EVENT_REPORT_DOMAIN"),"&p=").concat(Q("STATS_COLLECTOR_PORT"),"&d=").concat(u):"https://".concat(Q("EVENT_REPORT_DOMAIN"),":").concat(Q("STATS_COLLECTOR_PORT")).concat(u));for(let p=0;p<2;p+=1){p===1&&(h=this.backupUrl||(this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(Q("EVENT_REPORT_BACKUP_DOMAIN"),"&p=").concat(Q("STATS_COLLECTOR_PORT"),"&d=").concat(u):"https://".concat(Q("EVENT_REPORT_BACKUP_DOMAIN"),":").concat(Q("STATS_COLLECTOR_PORT")).concat(u)));try{n?await Hhe(h,{timeout:1e4,data:l}):await tI(h,{timeout:1e4,data:l})}catch(m){if(p===1)throw m;continue}return}}createBaseInfo(e,n){const i=Object.assign({},rfe);return i.sid=e,this.baseInfoMap.set(e,{info:i,startTime:n}),i}reportResourceTiming(e,n){const i=performance.getEntriesByName(e),a=i[i.length-1];a&&this.reportApiInvoke(n,{name:"Client.resourceTiming",options:a,tag:gr.TRACER}).onSuccess()}};uV.on("REPORT_LOG_UPLOAD",e=>{e.networkState=Gr.networkState,ct.reportApiInvoke(null,{name:"logUploadError",options:e,tag:gr.TRACER}).onSuccess("logUploadError")});class Ce extends Re{constructor(n){super(n,arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",arguments.length>2?arguments[2]:void 0),Nr(this,"name","AgoraRTCException")}print(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"error";return super.print(n,k)}throw(){super.throw(k)}}const Di={getDisplayMedia:!1,getStreamFromExtension:!1,supportUnifiedPlan:!1,supportMinBitrate:!1,supportSetRtpSenderParameters:!1,supportDualStream:!0,webAudioMediaStreamDest:!1,supportReplaceTrack:!1,supportWebGL:!1,webAudioWithAEC:!1,supportRequestFrame:!1,supportShareAudio:!1,supportDualStreamEncoding:!1,supportDataChannel:!1,supportPCSetConfiguration:!1,supportWebRTCEncodedTransform:!1,supportWebRTCInsertableStream:!1,supportRequestVideoFrameCallback:!1,supportWebCrypto:!1};function Rn(){return Di}function fV(){return"setSinkId"in HTMLAudioElement.prototype&&(!Q("RESTRICTION_SET_PLAYBACK_DEVICE")||(Wl()||T3())&&!Ww())}function Q_(){return!Di.supportUnifiedPlan||Q("CHROME_FORCE_PLAN_B")&&Gl()}function fI(e){return!(Or()||R3(87)||Q_()||!Q("ENABLE_PRE_SUB")&&(e==null||!e.autoSubscribe||Q("FORCE_DISABLE_AUTO_SUB")))}function pV(e){return!!Q("ENABLE_INSTANT_VIDEO")||!(e==null||!e.autoSubscribe||Q("FORCE_DISABLE_AUTO_SUB"))}let Li=function(e){return e.IOS_15_16_INTERRUPTION_START="ios15_16-interruption-start",e.IOS_15_16_INTERRUPTION_END="ios15_16-interruption-end",e.IOS_INTERRUPTION_START="ios-interruption-start",e.IOS_INTERRUPTION_END="ios-interruption-end",e.STATE_CHANGE="state-change",e}({});function Kf(e,n,i){return{sampleRate:e,stereo:n,bitrate:i}}function wn(e,n,i,a,l){return{width:e,height:n,frameRate:i,bitrateMin:a,bitrateMax:l}}function Ws(e,n,i,a,l){return{width:{max:e},height:{max:n},frameRate:i,bitrateMin:a,bitrateMax:l}}function pI(e,n){return{numSpatialLayers:e,numTemporalLayers:n}}const ofe={"90p":wn(160,90),"90p_1":wn(160,90),"120p":wn(160,120,15,30,65),"120p_1":wn(160,120,15,30,65),"120p_3":wn(120,120,15,30,50),"120p_4":wn(212,120),"180p":wn(320,180,15,30,140),"180p_1":wn(320,180,15,30,140),"180p_3":wn(180,180,15,30,100),"180p_4":wn(240,180,15,30,120),"240p":wn(320,240,15,40,200),"240p_1":wn(320,240,15,40,200),"240p_3":wn(240,240,15,40,140),"240p_4":wn(424,240,15,40,220),"360p":wn(640,360,15,80,400),"360p_1":wn(640,360,15,80,400),"360p_3":wn(360,360,15,80,260),"360p_4":wn(640,360,30,80,600),"360p_6":wn(360,360,30,80,400),"360p_7":wn(480,360,15,80,320),"360p_8":wn(480,360,30,80,490),"360p_9":wn(640,360,15,80,800),"360p_10":wn(640,360,24,80,800),"360p_11":wn(640,360,24,80,1e3),"480p":wn(640,480,15,100,500),"480p_1":wn(640,480,15,100,500),"480p_2":wn(640,480,30,100,1e3),"480p_3":wn(480,480,15,100,400),"480p_4":wn(640,480,30,100,750),"480p_6":wn(480,480,30,100,600),"480p_8":wn(848,480,15,100,610),"480p_9":wn(848,480,30,100,930),"480p_10":wn(640,480,10,100,400),"720p":wn(1280,720,15,120,1130),"720p_auto":wn(1280,720,30,900,3e3),"720p_1":wn(1280,720,15,120,1130),"720p_2":wn(1280,720,30,120,2e3),"720p_3":wn(1280,720,30,120,1710),"720p_5":wn(960,720,15,120,910),"720p_6":wn(960,720,30,120,1380),"1080p":wn(1920,1080,15,120,2080),"1080p_1":wn(1920,1080,15,120,2080),"1080p_2":wn(1920,1080,30,120,3e3),"1080p_3":wn(1920,1080,30,120,3150),"1080p_5":wn(1920,1080,60,120,4780),"1440p":wn(2560,1440,30,120,4850),"1440p_1":wn(2560,1440,30,120,4850),"1440p_2":wn(2560,1440,60,120,7350),"4k":wn(3840,2160,30,120,8910),"4k_1":wn(3840,2160,30,120,8910),"4k_3":wn(3840,2160,60,120,13500)},afe={"480p":Ws(640,480,5),"480p_1":Ws(640,480,5),"480p_2":Ws(640,480,30),"480p_3":Ws(640,480,15),"720p":Ws(1280,720,5),"720p_auto":wn(1280,720,30,900,3e3),"720p_1":Ws(1280,720,5),"720p_2":Ws(1280,720,30),"720p_3":Ws(1280,720,15),"1080p":Ws(1920,1080,5),"1080p_1":Ws(1920,1080,5),"1080p_2":Ws(1920,1080,30),"1080p_3":Ws(1920,1080,15)},sfe={"1SL1TL":pI(1,1),"3SL3TL":pI(3,3),"2SL3TL":pI(2,3)};function Gs(e){return e||(e="480p_1"),typeof e=="string"?Object.assign({},ofe[e]):e}function mI(e){return typeof e=="string"?Object.assign({},afe[e]):e}function Z_(e){return typeof e=="string"?Object.assign({},sfe[e]):e}const cfe={speech_low_quality:Kf(16e3,!1),speech_standard:Kf(32e3,!1,18),music_standard:Kf(48e3,!1),standard_stereo:Kf(48e3,!0,56),high_quality:Kf(48e3,!1,128),high_quality_stereo:Kf(48e3,!0,192)};function eS(e){return typeof e=="string"?Object.assign({},cfe[e]):e}const Yf=[];function mV(e){return vi(e,"mediaSource",["screen","window","application"]),!0}let at=function(e){return e.NEED_RENEGOTIATE="@need_renegotiate",e.NEED_REPLACE_TRACK="@need_replace_track",e.NEED_REPLACE_MIXING_TRACK="@need_replace_mixing_track",e.NEED_CLOSE="@need_close",e.NEED_ENABLE_TRACK="@need_enable_track",e.NEED_DISABLE_TRACK="@need_disable_track",e.NEED_SESSION_ID="@need_sid",e.SET_OPTIMIZATION_MODE="@set_optimization_mode",e.GET_STATS="@get_stats",e.GET_RTC_STATS="@get_rtc_stats",e.GET_LOW_VIDEO_TRACK="@get_low_video_track",e.NEED_RESET_REMOTE_SDP="@need_reset_remote_sdp",e.NEED_UPDATE_VIDEO_ENCODER="@need_update_video_encoder",e.NEED_UPDATE_VIDEO_SEND_PARAMETERS="@need_update_video_send_parameters",e.NEED_MUTE_TRACK="@need_mute_track",e.NEED_UNMUTE_TRACK="@need_unmute_track",e}({}),qn=function(e){return e.SCREEN_TRACK="screen_track",e.CUSTOM_TRACK="custome_track",e.LOW_STREAM="low_stream",e.SCREEN_LOW_TRACK="screen_low_track",e}({}),qf=function(e){return e[e.HIGH_STREAM=0]="HIGH_STREAM",e[e.LOW_STREAM=1]="LOW_STREAM",e}({}),lfe=function(e){return e[e.HIGH_STREAM=0]="HIGH_STREAM",e[e.LOW_STREAM=1]="LOW_STREAM",e[e.HIGH_STREAM_LAYER1=4]="HIGH_STREAM_LAYER1",e[e.HIGH_STREAM_LAYER2=5]="HIGH_STREAM_LAYER2",e[e.HIGH_STREAM_LAYER3=6]="HIGH_STREAM_LAYER3",e[e.HIGH_STREAM_LAYER4=7]="HIGH_STREAM_LAYER4",e[e.HIGH_STREAM_LAYER5=8]="HIGH_STREAM_LAYER5",e[e.HIGH_STREAM_LAYER6=9]="HIGH_STREAM_LAYER6",e}({}),ufe=function(e){return e[e.DISABLE=0]="DISABLE",e[e.LOW_STREAM=1]="LOW_STREAM",e[e.AUDIO_ONLY=2]="AUDIO_ONLY",e[e.HIGH_STREAM_LAYER1=3]="HIGH_STREAM_LAYER1",e[e.HIGH_STREAM_LAYER2=4]="HIGH_STREAM_LAYER2",e[e.HIGH_STREAM_LAYER3=5]="HIGH_STREAM_LAYER3",e[e.HIGH_STREAM_LAYER4=6]="HIGH_STREAM_LAYER4",e[e.HIGH_STREAM_LAYER5=7]="HIGH_STREAM_LAYER5",e[e.HIGH_STREAM_LAYER6=8]="HIGH_STREAM_LAYER6",e}({}),th=function(e){return e.TRANSCEIVER_UPDATED="transceiver-updated",e.SEI_TO_SEND="sei-to-send",e.SEI_RECEIVED="sei-received",e.TRACK_UPDATED="track-updated",e}({}),Xf=function(e){return e.SOURCE_STATE_CHANGE="source-state-change",e.TRACK_ENDED="track-ended",e.BEAUTY_EFFECT_OVERLOAD="beauty-effect-overload",e.VIDEO_ELEMENT_VISIBLE_STATUS="video-element-visible-status",e.CLOSED="closed",e}({}),us=function(e){return e.FIRST_FRAME_DECODED="first-frame-decoded",e.VIDEO_ELEMENT_VISIBLE_STATUS="video-element-visible-status",e.VIDEO_STATE_CHANGED="video-state-changed",e.PLAY_START="play-start",e.PLAY_END="play-end",e.FIRST_FRAME_RENDER="first-frame-render",e}({}),Jf=function(e){return e.AUDIO="audio",e.VIDEO="video",e.DATA="data",e}({}),Ha=function(e){return e.AUDIO_SOURCE_STATE_CHANGE="audio_source_state_change",e.RECEIVE_TRACK_BUFFER="receive_track_buffer",e.ON_AUDIO_BUFFER="on_audio_buffer",e.UPDATE_SOURCE="update_source",e}({});(function(e){e.UPDATE_TRACK_SOURCE="update-track-source"})({});const gI={sendVolumeLevel:0,sendBitrate:0,sendBytes:0,sendPackets:0,sendPacketsLost:0,sendJitterMs:0,sendRttMs:0,currentPacketLossRate:0},vI={sendBytes:0,sendBitrate:0,sendPackets:0,sendPacketsLost:0,sendJitterMs:0,sendRttMs:0,sendResolutionHeight:0,sendResolutionWidth:0,captureResolutionHeight:0,captureResolutionWidth:0,targetSendBitrate:0,totalDuration:0,totalFreezeTime:0,currentPacketLossRate:0},gV={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveLevel:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,receivePacketsDiscarded:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1},dfe={uplinkNetworkQuality:0,downlinkNetworkQuality:0},vV={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,receiveResolutionHeight:0,receiveResolutionWidth:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1};let Po=function(e){return e.ON_TRACK="on_track",e.ON_NODE="on_node",e}({}),za=function(e){return e.REQUEST_UPDATE_CONSTRAINTS="request_update_constraints",e.REQUEST_CONSTRAINTS="request_constraints",e}({}),N0=function(e){return e.IDLE="IDLE",e.INITING="INITING",e.INITEND="INITEND",e}({}),nh=function(e){return e.STATE_CHANGE="state_change",e.RECORDING_DEVICE_CHANGED="recordingDeviceChanged",e.PLAYOUT_DEVICE_CHANGED="playoutDeviceChanged",e.CAMERA_DEVICE_CHANGED="cameraDeviceChanged",e}({}),Xi=function(e){return e.NONE="none",e.INIT="init",e.CANPLAY="canplay",e.PLAYING="playing",e.PAUSED="paused",e.SUSPEND="suspend",e.STALLED="stalled",e.WAITING="waiting",e.ERROR="error",e.DESTROYED="destroyed",e.ABORT="abort",e.ENDED="ended",e.EMPTIED="emptied",e.LOADEDDATA="loadeddata",e}({}),hl=function(e){return e[e.VideoStateStopped=0]="VideoStateStopped",e[e.VideoStateStarting=1]="VideoStateStarting",e[e.VideoStateDecoding=2]="VideoStateDecoding",e[e.VideoStateFrozen=3]="VideoStateFrozen",e}({});const EI={uninit:100,none:110,init:120,loadeddata:130,canplay:200,playing:210,paused:220,suspend:300,stalled:310,waiting:320,error:330,destroyed:340,abort:350,ended:360,emptied:370};let tS=function(e){return e.OPEN="open",e.MESSAGE="message",e.CLOSE="close",e.CLOSING="closing",e.ERROR="error",e}({});function _n(e,n,i,a,l){var u,h,p={};return Object.keys(a).forEach(function(m){p[m]=a[m]}),p.enumerable=!!p.enumerable,p.configurable=!!p.configurable,("value"in p||p.initializer)&&(p.writable=!0),p=Ms(u=nk(h=i.slice()).call(h)).call(u,function(m,E){return E(e,n,m)||m},p),l&&p.initializer!==void 0&&(p.value=p.initializer?p.initializer.call(l):void 0,p.initializer=void 0),p.initializer===void 0?(Object.defineProperty(e,n,p),null):p}function ye(e,n,i){return(n=function(a){var l=function(u,h){if(typeof u!="object"||!u)return u;var p=u[Symbol.toPrimitive];if(p!==void 0){var m=p.call(u,"string");if(typeof m!="object")return m;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(u)}(a);return typeof l=="symbol"?l:l+""}(n))in e?Object.defineProperty(e,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[n]=i,e}function EV(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),i.push.apply(i,a)}return i}function rr(e){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?EV(Object(i),!0).forEach(function(a){ye(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):EV(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}class _V extends br{set _mediaStreamTrack(n){n!==this.mediaStreamTrack&&(this.safeEmit(th.TRACK_UPDATED,n),this.mediaStreamTrack=n)}get _mediaStreamTrack(){return this.mediaStreamTrack}constructor(n,i){super(),ye(this,"trackMediaType",void 0),ye(this,"_ID",void 0),ye(this,"_rtpTransceiver",void 0),ye(this,"_lowRtpTransceiver",void 0),ye(this,"_hints",[]),ye(this,"_isClosed",!1),ye(this,"_originMediaStreamTrack",void 0),ye(this,"mediaStreamTrack",void 0),ye(this,"_external",{}),this._ID=i||Zn(8,"track-"),this._originMediaStreamTrack=n,this.mediaStreamTrack=n,function(a){Ge(Yf).call(Yf,a)||Yf.push(a)}(this)}toString(){return this._ID}getTrackId(){return this._ID}getMediaStreamTrack(n){return n||Fu(()=>{var i;ct.reportApiInvoke(null,{name:Ur.GET_MEDIA_STREAM_TRACK,options:[],tag:gr.TRACER}).onSuccess(((i=this._mediaStreamTrack)===null||i===void 0?void 0:i.label)||"")},this.mediaStreamTrack.id||this.getTrackId()),this._mediaStreamTrack}getRTCRtpTransceiver(n){return n===qf.LOW_STREAM?this._lowRtpTransceiver:this._rtpTransceiver}getMediaStreamTrackSettings(){return this.getMediaStreamTrack(!0).getSettings()}close(){this._isClosed=!0,this._lowRtpTransceiver=void 0,this._rtpTransceiver=void 0,function(n){const i=Yf.indexOf(n);i!==-1&&Yf.splice(i,1)}(this),this.emit(Xf.CLOSED),this.removeAllListeners(th.SEI_RECEIVED)}_updateRtpTransceiver(n,i){if(i===qf.LOW_STREAM){if(this._lowRtpTransceiver===n)return;this._lowRtpTransceiver=n}else{if(this._rtpTransceiver===n)return;this._rtpTransceiver=n}this.emit(th.TRANSCEIVER_UPDATED,n,i)}}class Qf extends _V{get isExternalTrack(){return this._isExternalTrack}get muted(){return this._muted}get enabled(){return this._enabled}get processorContext(){return this._processorContext}constructor(n,i){super(n,i),ye(this,"_enabled",!0),ye(this,"_muted",!1),ye(this,"_isExternalTrack",!1),ye(this,"_isClosed",!1),ye(this,"_enabledMutex",void 0),ye(this,"processor",void 0),ye(this,"_processorContext",void 0),ye(this,"_handleTrackEnded",()=>{this.onTrackEnded()}),this._enabledMutex=new qi("".concat(this.getTrackId())),n.addEventListener("ended",this._handleTrackEnded)}getTrackLabel(){var n,i;return(n=(i=this._originMediaStreamTrack)===null||i===void 0?void 0:i.label)!==null&&n!==void 0?n:""}close(){this._isClosed||(this.stop(),this._originMediaStreamTrack.stop(),this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack.stop(),this._mediaStreamTrack=null),this._originMediaStreamTrack=null,this._enabledMutex=null,k.debug("[".concat(this.getTrackId(),"] close")),this.emit(at.NEED_CLOSE),super.close())}async _updateOriginMediaStreamTrack(n,i){let a=arguments.length>2&&arguments[2]!==void 0&&arguments[2];this._isExternalTrack=a,n!==this._originMediaStreamTrack&&(this._originMediaStreamTrack&&(this._originMediaStreamTrack.removeEventListener("ended",this._handleTrackEnded),i&&this._originMediaStreamTrack.stop()),n.addEventListener("ended",this._handleTrackEnded),this._originMediaStreamTrack=n,this._muted&&(this._originMediaStreamTrack.enabled=!1),this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await Qn(this,at.NEED_REPLACE_TRACK,this),this.processor&&this._processorContext&&this.processor.updateInput({track:this._originMediaStreamTrack,context:this._processorContext}))}_getDefaultPlayerConfig(){return{}}onTrackEnded(){k.debug("[".concat(this.getTrackId(),"] track ended")),this.safeEmit(Xf.TRACK_ENDED)}stateCheck(n,i){if(k.debug("check track state, [muted: ".concat(this._muted,", enabled: ").concat(this._enabled,"] to [").concat(n,": ").concat(i,"]")),wc(i,n),this._enabled&&this._muted&&n==="enabled"&&i===!1)throw new Re(X.TRACK_STATE_UNREACHABLE,"cannot set enabled while the track is muted").print("error",k);if(!this._enabled&&!this._muted&&n==="muted"&&i===!0)throw new Re(X.TRACK_STATE_UNREACHABLE,"cannot set muted while the track is disabled").print("error",k)}getProcessorStats(){return this._processorContext&&this._processorContext.gatherStats()||[]}getProcessorUsage(){return this._processorContext?this._processorContext.gatherUsage():et.resolve([])}}const SV=window.AudioContext||window.webkitAudioContext;let Wa=null;const Wn=new class extends br{constructor(){super(...arguments),ye(this,"prevState",void 0),ye(this,"curState",void 0),ye(this,"currentTime",void 0),ye(this,"currentTimeStuckAt",void 0),ye(this,"interruptDetectorTrack",void 0),ye(this,"onLocalAudioTrackMute",()=>{k.info("ios15-interruption-start"),this.emit(Li.IOS_15_16_INTERRUPTION_START)}),ye(this,"onLocalAudioTrackUnmute",async()=>{k.info("ios15-interruption-end"),this.curState!=="running"||this.duringInterruption?k.info("ios15-interruption-end-canceled"):(Wa&&await Wa.suspend(),this.emit(Li.IOS_15_16_INTERRUPTION_END))})}get duringInterruption(){return this.prevState==="running"&&this.curState==="interrupted"}bindInterruptDetectorTrack(e){k.debug("webaudio bindInterruptDetectorTrack ".concat(e.getTrackId())),this.interruptDetectorTrack||(this.interruptDetectorTrack=e,this.interruptDetectorTrack._mediaStreamTrack.onmute=this.onLocalAudioTrackMute,this.interruptDetectorTrack._mediaStreamTrack.onunmute=this.onLocalAudioTrackUnmute)}unbindInterruptDetectorTrack(e){k.debug("webaudio unbindInterruptDetectorTrack ".concat(e.getTrackId())),this.interruptDetectorTrack&&this.interruptDetectorTrack===e&&(this.interruptDetectorTrack._mediaStreamTrack&&(this.interruptDetectorTrack._mediaStreamTrack.onmute=null,this.interruptDetectorTrack._mediaStreamTrack.onunmute=null),this.interruptDetectorTrack=void 0)}};function Zf(){if(!Wa){if(function(){if(!SV)return void k.error("your browser is not support web audio");k.info("create audio context");const e=rr({},Q("WEBAUDIO_INIT_OPTIONS"));k.debug("audio context init option:",JSON.stringify(e)),Wa=new SV(e),Wn.curState=Wa.state,Wa.onstatechange=()=>{Wn.prevState=Wn.curState,Wn.curState=Wa?Wa.state:void 0;const{prevState:n,curState:i}=Wn,a=i==="running",l=i==="interrupted",u=n==="running",h=n==="suspended",p=n==="interrupted",m=yn().osVersion;(co()||Hs())&&u&&l&&(k.info("ios".concat(m,"-interruption-start")),Wn.emit(Li.IOS_INTERRUPTION_START)),(co()||Hs())&&(h||p)&&a&&(k.info("ios".concat(m,"-interruption-end")),Wn.emit(Li.IOS_INTERRUPTION_END)),n!==i&&Wn.emit(Li.STATE_CHANGE,i,n)},setInterval(()=>{var n;const i=(n=Wa)===null||n===void 0?void 0:n.currentTime;Wn.currentTime!==i?(Wn.currentTimeStuckAt&&(k.debug("AudioContext current time resume at ".concat(i)),Wn.currentTimeStuckAt=void 0),Wn.currentTime=i):(i!==Wn.currentTimeStuckAt&&(ct.reportApiInvoke(null,{name:"WEB_AUDIO_CURRENT_TIME_STUCK",options:{currentTime:i},tag:gr.TRACER}).onSuccess(),k.warning("AudioContext current time stuck at ".concat(i))),Wn.currentTimeStuckAt=i)},5e3),async function(n){const i=["click","contextmenu","auxclick","dblclick","mousedown","mouseup","touchend","keydown","keyup"];let a,l=!1,u=!1,h=!1;function p(B){n.state==="running"?m(!1):co()||Hs()?n.state==="suspended"&&(m(!0),B&&n.resume().then(E,E)):n.state!=="closed"&&(m(!0),B&&n.resume().then(E,E))}function m(B){if(l!==B){l=B;for(let j=0,q=i;j<q.length;j+=1){const Y=q[j];B?window.addEventListener(Y,S,{capture:!0,passive:!0}):window.removeEventListener(Y,S,{capture:!0,passive:!0})}}}function E(){p(!1)}function S(){p(!0)}function R(B){if(!h)if(a.paused)if(B){let j;w(!1),h=!0;try{j=a.play(),j?j.then(O,O):(a.addEventListener("playing",O),a.addEventListener("abort",O),a.addEventListener("error",O))}catch{O()}}else w(!0);else w(!1)}function w(B){if(u!==B){u=B;for(let j=0,q=i;j<q.length;j++){const Y=q[j];B?window.addEventListener(Y,H,{capture:!0,passive:!0}):window.removeEventListener(Y,H,{capture:!0,passive:!0})}}}function O(){a.removeEventListener("playing",O),a.removeEventListener("abort",O),a.removeEventListener("error",O),h=!1,R(!1)}function H(){R(!0)}if(co()){const B=n.createMediaStreamDestination(),j=document.createElement("div");j.innerHTML="<audio x-webkit-airplay='deny'></audio>",a=j.children.item(0),a.controls=!1,a.disableRemotePlayback=!0,a.preload="auto",a.srcObject=B.stream,R(!0)}Wn.on(Li.STATE_CHANGE,function(){p(!0)}),p(!1)}(Wa)}(),!Wa)throw new Re(X.NOT_SUPPORTED,"can not create audio context");return Wa}return Wa}function rh(e){if(function(){if(_I!==null)return _I;const a=Zf(),l=a.createBufferSource(),u=a.createGain(),h=a.createGain();l.connect(u),l.connect(h),l.disconnect(u);let p=!1;try{l.disconnect(u)}catch{p=!0}return l.disconnect(),_I=p,p}())return;const n=e.connect,i=e.disconnect;e.connect=(a,l,u)=>{var h;return e._inputNodes||(e._inputNodes=[]),Ge(h=e._inputNodes).call(h,a)||(a instanceof AudioNode?(e._inputNodes.push(a),n.call(e,a,l,u)):n.call(e,a,l)),e},e.disconnect=(a,l,u)=>{i.call(e),a?z_(e._inputNodes,a):e._inputNodes=[];for(const h of e._inputNodes)n.call(e,h)}}let _I=null;function SI(e,n){let i=!1;const a=1/n;if(Q("DISABLE_WEBAUDIO")){const l=window.setInterval(()=>{i?window.clearInterval(l):e(performance.now()/1e3)},1e3*a)}else{const l=Zf();let u=l.createGain();u.gain.value=0,u.connect(l.destination);const h=()=>{if(i)return void(u=null);const p=l.createOscillator();p.onended=h,p.connect(u),p.start(0),p.stop(l.currentTime+a),e(l.currentTime)};h()}return()=>{i=!0}}class yV{constructor(){ye(this,"context",void 0),ye(this,"analyserNode",void 0),ye(this,"sourceNode",void 0),this.context=Zf(),this.analyserNode=this.context.createAnalyser(),this.analyserNode.fftSize=2048,this.analyserNode.smoothingTimeConstant=.4}updateSource(n){if(n!==this.sourceNode){if(this.sourceNode)try{this.sourceNode.disconnect(this.analyserNode)}catch{}this.sourceNode=n,n==null||n.connect(this.analyserNode)}}getVolumeLevel(){if(!this.sourceNode||(!this.context||co()||Hs()||this.context.state!=="running"&&this.context.resume(),!this.analyserNode))return 0;const n=new Float32Array(this.analyserNode.fftSize);if(this.analyserNode.getFloatTimeDomainData)this.analyserNode.getFloatTimeDomainData(n);else{const a=new Uint8Array(this.analyserNode.fftSize);this.analyserNode.getByteTimeDomainData(a);for(let l=0;l<n.length;++l)n[l]=a[l]/128-1}const i=Ms(n).call(n,(a,l)=>a+l*l,0)/n.length;return Math.max(10*Math.log10(i)+100,0)/100}getAnalyserNode(){return this.analyserNode}rebuildAnalyser(){try{var n,i;(n=this.sourceNode)===null||n===void 0||n.disconnect(this.analyserNode),this.analyserNode=this.context.createAnalyser(),this.analyserNode.fftSize=2048,this.analyserNode.smoothingTimeConstant=.4,(i=this.sourceNode)===null||i===void 0||i.connect(this.analyserNode)}catch{k.warning("rebuild analyser node failed.")}}destroy(){this.updateSource(void 0)}}class CV extends br{get processSourceNode(){return this.sourceNode}set processedNode(n){var i;if(!this.isDestroyed&&this._processedNode!==n){try{var a;(a=this.sourceNode)===null||a===void 0||a.disconnect(this.outputNode)}catch{}(i=this._processedNode)===null||i===void 0||i.disconnect(),this._processedNode=n,this.connect()}}get processedNode(){return this._processedNode}constructor(){super(),ye(this,"outputNode",void 0),ye(this,"outputTrack",void 0),ye(this,"isPlayed",!1),ye(this,"sourceNode",void 0),ye(this,"context",void 0),ye(this,"audioBufferNode",void 0),ye(this,"destNode",void 0),ye(this,"audioOutputLevel",0),ye(this,"volumeLevelAnalyser",void 0),ye(this,"_processedNode",void 0),ye(this,"playNode",void 0),ye(this,"isDestroyed",!1),ye(this,"onNoAudioInput",void 0),ye(this,"isNoAudioInput",!1),ye(this,"_noAudioInputCount",0),this.context=Zf(),this.playNode=this.context.destination,this.outputNode=this.context.createGain(),rh(this.outputNode),this.volumeLevelAnalyser=new yV}startGetAudioBuffer(n){this.audioBufferNode||(this.audioBufferNode=this.context.createScriptProcessor(n),this.outputNode.connect(this.audioBufferNode),this.audioBufferNode.connect(this.context.destination),this.audioBufferNode.onaudioprocess=i=>{this.emit(Ha.ON_AUDIO_BUFFER,function(a){for(let l=0;l<a.outputBuffer.numberOfChannels;l+=1){const u=a.outputBuffer.getChannelData(l);for(let h=0;h<u.length;h+=1)u[h]=0}return a.inputBuffer}(i))})}stopGetAudioBuffer(){this.audioBufferNode&&(this.audioBufferNode.onaudioprocess=null,this.outputNode.disconnect(this.audioBufferNode),this.audioBufferNode=void 0)}createOutputTrack(){if(!Rn().webAudioMediaStreamDest)throw new Re(X.NOT_SUPPORTED,"your browser is not support audio processor");return this.destNode&&this.outputTrack||(this.destNode=this.context.createMediaStreamDestination(),this.outputNode.connect(this.destNode),this.outputTrack=this.destNode.stream.getAudioTracks()[0]),this.outputTrack}play(n){this.context.state!=="running"&&W_(()=>{Wn.emit("autoplay-failed")}),this.isPlayed=!0,this.playNode=n||this.context.destination,this.outputNode.connect(this.playNode)}stop(){if(this.isPlayed)try{this.outputNode.disconnect(this.playNode)}catch{}this.isPlayed=!1}getAccurateVolumeLevel(){return this.volumeLevelAnalyser.getVolumeLevel()}async checkHasAudioInput(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;if(n>5)return this.isNoAudioInput=!0,this.onNoAudioInput&&this.onNoAudioInput(),!1;co()||Hs()?this.context.state==="suspended"&&this.context.resume():this.context.state!=="running"&&this.context.resume();const i=this.volumeLevelAnalyser.getAnalyserNode();let a;i.getFloatTimeDomainData?(a=new Float32Array(i.fftSize),i.getFloatTimeDomainData(a)):(a=new Uint8Array(i.fftSize),i.getByteTimeDomainData(a));let l=!1;for(let u=0;u<a.length;u++)a[u]!==0&&(l=!0);return l?(this.isNoAudioInput=!1,!0):(await Pi(200),await this.checkHasAudioInput(n?n+1:1)&&l)}getAudioVolume(){return this.outputNode.gain.value}setVolume(n){this.outputNode.gain.setValueAtTime(n,this.context.currentTime)}destroy(){this.disconnect(),this.stop(),this.isDestroyed=!0,this.onNoAudioInput=void 0}disconnect(){var n,i;(n=this.processedNode)===null||n===void 0||n.disconnect(),(i=this.sourceNode)===null||i===void 0||i.disconnect(),this.outputNode&&this.outputNode.disconnect()}connect(){var n;this.processedNode?(n=this.processedNode)===null||n===void 0||n.connect(this.outputNode):this.sourceNode&&this.sourceNode.connect(this.outputNode),this.volumeLevelAnalyser.updateSource(this.outputNode)}}class bV extends CV{get isFreeze(){return!1}constructor(n,i,a){var l;if(super(),ye(this,"sourceNode",void 0),ye(this,"track",void 0),ye(this,"clonedTrack",void 0),ye(this,"audioElement",void 0),ye(this,"isCurrentTrackCloned",!1),ye(this,"isRemoteTrack",!1),ye(this,"originVolumeLevelAnalyser",void 0),ye(this,"rebuildWebAudio",async()=>{if(k.debug("ready to rebuild web audio, state:",this.context.state),this.isNoAudioInput&&await this.checkHasAudioInput(),!this.isNoAudioInput||this.isDestroyed)return document.body.removeEventListener("click",this.rebuildWebAudio,!0),void k.debug("rebuild web audio success, current volume status",this.getAccurateVolumeLevel());this.context.resume().then(()=>k.info("resume success")),k.debug("rebuild web audio because of ios 12 bugs"),this.disconnect();const p=this.track;this.track=this.track.clone(),this.isCurrentTrackCloned?p.stop():this.isCurrentTrackCloned=!0;const m=new MediaStream([this.track]);this.sourceNode=this.context.createMediaStreamSource(m),rh(this.sourceNode),this.volumeLevelAnalyser.rebuildAnalyser();const E=this.outputNode.gain.value;this.outputNode=this.context.createGain(),this.outputNode.gain.setValueAtTime(E,this.context.currentTime),rh(this.outputNode),this.emit(Ha.UPDATE_SOURCE),this.connect(),this.audioElement.srcObject=m,this.isPlayed&&this.play(this.playNode),this.checkHasAudioInput()}),n.kind!=="audio")throw new Re(X.UNEXPECTED_ERROR);this.track=n;const u=new MediaStream([this.track]);if(this.isRemoteTrack=!!i,this.sourceNode=this.context.createMediaStreamSource(u),rh(this.sourceNode),a){const p=a.clone();p.enabled=!0,this.clonedTrack=p,k.debug("create an unmuted track ".concat(p.id," from the original track ").concat(a.id," to get the volume"));const m=this.context.createMediaStreamSource(new MediaStream([p]));rh(m),this.originVolumeLevelAnalyser=new yV,this.originVolumeLevelAnalyser.updateSource(m)}this.connect(),this.audioElement=document.createElement("audio"),this.audioElement.srcObject=u;const h=yn();i&&h.os===Ci.IOS&&Number((l=h.osVersion)===null||l===void 0?void 0:l.split(".")[0])<15&&(Wn.on(Li.STATE_CHANGE,()=>{this.context.state==="suspended"?document.body.addEventListener("click",this.rebuildWebAudio,!0):this.context.state==="running"&&this.rebuildWebAudio()}),this.checkHasAudioInput().then(p=>{p||document.body.addEventListener("click",this.rebuildWebAudio,!0)}))}updateTrack(n){this.sourceNode.disconnect(),this.track=n,this.isCurrentTrackCloned=!1;const i=new MediaStream([n]);this.sourceNode=this.context.createMediaStreamSource(i),rh(this.sourceNode),this.processedNode||this.sourceNode.connect(this.outputNode),this.emit(Ha.UPDATE_SOURCE),this.audioElement.srcObject=i}destroy(){var n;this.audioElement.srcObject=null,this.audioElement.remove(),Wn.off("state-change",this.rebuildWebAudio),(n=this.originVolumeLevelAnalyser)===null||n===void 0||n.destroy(),this.clonedTrack=void 0,super.destroy()}createMediaStreamSourceNode(n){return this.context.createMediaStreamSource(new MediaStream([n]))}updateOriginTrack(n){const i=n.clone();i.enabled=!0,this.clonedTrack&&(this.clonedTrack.stop(),this.clonedTrack=i),k.debug("create an unmuted track ".concat(i.id," from the original track ").concat(n.id," to get the volume"));const a=this.context.createMediaStreamSource(new MediaStream([i]));rh(a),this.originVolumeLevelAnalyser&&this.originVolumeLevelAnalyser.updateSource(a)}getOriginVolumeLevel(){return this.originVolumeLevelAnalyser?this.originVolumeLevelAnalyser.getVolumeLevel():this.getAccurateVolumeLevel()}}async function TV(e,n,i){const a=(u,h)=>u?typeof u!="number"?u.max||u.exact||u.ideal||u.min||h:u:h,l={audio:!!i&&{mandatory:{chromeMediaSource:"desktop"}},video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:e,maxHeight:a(n.height,1080),maxWidth:a(n.width,1920)}}};return n.frameRate&&typeof n.frameRate!="number"?(l.video.mandatory.maxFrameRate=n.frameRate.max,l.video.mandatory.minFrameRate=n.frameRate.min):typeof n.frameRate=="number"&&(l.video.mandatory.maxFrameRate=n.frameRate),await navigator.mediaDevices.getUserMedia(l)}async function hfe(e,n){const i=await RV(e.mediaSource),{sourceId:a,audio:l}=await function(u){let h=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return new et((p,m)=>{const E=document.createElement("div");E.innerText="share screen",E.setAttribute("style","text-align: center; height: 25px; line-height: 25px; border-radius: 4px 4px 0 0; background: #D4D2D4; border-bottom:  solid 1px #B9B8B9;");const S=document.createElement("div");S.setAttribute("style","width: 100%; height: 500px; padding: 15px 25px ; box-sizing: border-box;");const R=document.createElement("div");R.innerText="Agora Web Screensharing wants to share the contents of your screen with webdemo.agorabeckon.com. Choose what you'd like to share.",R.setAttribute("style","height: 12%;");const w=document.createElement("div");w.setAttribute("style","width: 100%; height: 80%; background: #FFF; border:  solid 1px #CBCBCB; display: flex; flex-wrap: wrap; justify-content: space-around; overflow-y: scroll; padding: 0 15px; box-sizing: border-box;");const O=document.createElement("div");O.setAttribute("style","display: flex; justify-content: space-between; padding: 16px 0;");const H=document.createElement("button");H.innerHTML="cancel",H.setAttribute("style","width: 85px;"),H.onclick=()=>{document.body.removeChild(q);const Y=new Error("NotAllowedError");Y.name="NotAllowedError",m(Y)};let B=h;const j=document.createElement("div");if(h){const Y=document.createElement("input");Y.setAttribute("type","checkbox");const Z=document.createElement("span");Y.setAttribute("style","margin-right: 6px;"),Z.innerText="Share audio",Y.checked=B,Y.onchange=()=>{B=Y.checked},j.appendChild(Y),j.appendChild(Z)}O.appendChild(j),O.appendChild(H),S.appendChild(R),S.appendChild(w),S.appendChild(O);const q=document.createElement("div");q.setAttribute("style","position: fixed; z-index: 99999999; top: 50%; left: 50%; width: 620px; height: 525px; background: #ECECEC; border-radius: 4px; -webkit-transform: translate(-50%,-50%); transform: translate(-50%,-50%);"),q.appendChild(E),q.appendChild(S),document.body.appendChild(q),u.map(Y=>{if(Y.id){const Z=document.createElement("div");Z.setAttribute("style","width: 30%; height: 160px; padding: 20px 0; text-align: center;box-sizing: content-box;");let pe=Y.thumbnail;try{const{width:he}=pe.getSize();he>1920&&(pe=pe.resize({width:1920}))}catch(he){throw he&&he.message.startsWith("Illegal invocation")&&console.error("Operate thumbnail error, please try to set contextIsolation: false. (https://github.com/electron/electron/issues/34953)"),he}Z.innerHTML='<div style="height: 120px; display: table-cell; vertical-align: middle;"><img style="width: 100%; background: #333333; box-shadow: 1px 1px 1px 1px rgba(0, 0, 0, 0.2);" src='+pe.toDataURL()+' /></div><span style="	height: 40px; line-height: 40px; display: inline-block; width: 70%; word-break: keep-all; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">'+Y.name.replace(/[\u00A0-\u9999<>\&]/g,function(he){return"&#"+he.charCodeAt(0)+";"})+"</span>",Z.onclick=()=>{document.body.removeChild(q),p({sourceId:Y.id,audio:B})},w.appendChild(Z)}})})}(i,n);return await TV(a,e,l)}async function RV(e){let n=["window","screen"];e!=="application"&&e!=="window"||(n=["window"]),e==="screen"&&(n=["screen"]);const i=F3();if(!i)throw console.error("failed to fetch electron, please mount it to window"),new Re(X.ELECTRON_IS_NULL);let a=null;try{var l;a=((l=i.desktopCapturer)===null||l===void 0?void 0:l.getSources({types:n}))||i.ipcRenderer.invoke("DESKTOP_CAPTURER_GET_SOURCES",{types:n})}catch{a=null}a&&a.then||(a=new et((u,h)=>{i.desktopCapturer.getSources({types:n},(p,m)=>{p?h(p):u(m)})}));try{return await a}catch(u){throw new Re(X.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR,u.toString())}}const yI=new qi("safari");let wV=!1,IV=!1;async function Ga(e,n){let i=0,a=null;for(;i<2;)try{a=await ffe(e,n,i>0);break}catch(l){if(l instanceof Re)throw k.error("[".concat(n,"] ").concat(l.toString())),l;const u=nS(l.name||l.code||l,l.message);if(u.code===X.MEDIA_OPTION_INVALID){k.debug("[".concat(n,"] detect media option invalid, retry")),i+=1,await Pi(500);continue}throw k.error("[".concat(n,"] ").concat(u.toString())),u}if(!a)throw new Re(X.UNEXPECTED_ERROR,"can not find stream after getUserMedia");return a}async function ffe(e,n,i){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Re(X.NOT_SUPPORTED,"can not find getUserMedia");i&&(e.video&&(delete e.video.width,delete e.video.height),e.screen&&(delete e.screen.width,delete e.screen.height));const a=Rn(),l=new MediaStream;if(e.audioSource&&l.addTrack(e.audioSource),e.videoSource&&l.addTrack(e.videoSource),!e.audio&&!e.video&&!e.screen)return k.debug("Using Video Source/ Audio Source"),l;if(e.screen)if(F3())e.screen.sourceId?ep(l,await TV(e.screen.sourceId,e.screen,!!e.screenAudio)):ep(l,await hfe(e.screen,!!e.screenAudio));else if(Wl()&&e.screen.extensionId&&e.screen.mandatory){if(!a.getStreamFromExtension)throw new Re(X.NOT_SUPPORTED,"This browser does not support screen sharing");k.debug("[".concat(n,'] Screen access on chrome stable, looking for extension"'));const w=await(h=e.screen.extensionId,p=n,new et((O,H)=>{try{chrome.runtime.sendMessage(h,{getStream:!0},B=>{if(!B||!B.streamId)return k.error("[".concat(p,"] No response from Chrome Plugin. Plugin not installed properly"),B),void H(new Re(X.CHROME_PLUGIN_NO_RESPONSE,"No response from Chrome Plugin. Plugin not installed properly"));O(B.streamId)})}catch(B){k.error("[".concat(p,"] AgoraRTC screensharing plugin is not accessible(").concat(h,")"),B.toString()),H(new Re(X.CHROME_PLUGIN_NOT_INSTALL))}}));e.screen.mandatory.chromeMediaSourceId=w,ep(l,await navigator.mediaDevices.getUserMedia({video:{mandatory:e.screen.mandatory}}))}else if(a.getDisplayMedia){var u;e.screen.mediaSource&&mV(e.screen.mediaSource);const w={width:e.screen.width,height:e.screen.height,frameRate:e.screen.frameRate,displaySurface:(u=e.screen.displaySurface)!==null&&u!==void 0?u:e.screen.mediaSource==="screen"?"monitor":e.screen.mediaSource},{selfBrowserSurface:O,surfaceSwitching:H,systemAudio:B,preferCurrentTab:j}=e.screen,q={selfBrowserSurface:O,surfaceSwitching:H,systemAudio:B,preferCurrentTab:j};!O&&delete q.selfBrowserSurface,!H&&delete q.surfaceSwitching,!B&&delete q.systemAudio,!j&&delete q.preferCurrentTab,k.debug("[".concat(n,"] getDisplayMedia:"),JSON.stringify({video:w,audio:e.screenAudio,controls:q})),ep(l,await navigator.mediaDevices.getDisplayMedia(rr({video:w,audio:e.screenAudio},q)))}else{if(!Or())throw k.error("[".concat(n,"] This browser does not support screenSharing")),new Re(X.NOT_SUPPORTED,"This browser does not support screen sharing");{e.screen.mediaSource&&mV(e.screen.mediaSource);const w={video:{mediaSource:e.screen.mediaSource,width:e.screen.width,height:e.screen.height,frameRate:e.screen.frameRate}};k.debug("[".concat(n,"] getUserMedia: ").concat(JSON.stringify(w))),ep(l,await navigator.mediaDevices.getUserMedia(w))}}var h,p;if(!e.video&&!e.audio)return l;let m={video:e.video,audio:e.audio},E=Q("MEDIA_DEVICE_CONSTRAINTS");if(E)try{typeof E=="string"&&(E=JSON.parse(E)),m=Jw(m,E)}catch{}k.debug("[".concat(n,"] GetUserMedia"),JSON.stringify(m)),yn();let S,R=null;($i()||co()||$_())&&(R=await yI.lock());try{S=await navigator.mediaDevices.getUserMedia(m)}catch(w){throw R&&R(),w}return m.audio&&(wV=!0),m.video&&(IV=!0),ep(l,S),R&&R(),l}function nS(e,n){switch(e){case"Starting video failed":case"OverconstrainedError":case"TrackStartError":return new Re(X.MEDIA_OPTION_INVALID,"".concat(e,": ").concat(n));case"NotFoundError":case"DevicesNotFoundError":return new Re(X.DEVICE_NOT_FOUND,"".concat(e,": ").concat(n));case"NotSupportedError":return new Re(X.NOT_SUPPORTED,"".concat(e,": ").concat(n));case"NotReadableError":return new Re(X.NOT_READABLE,"".concat(e,": ").concat(n));case"InvalidStateError":case"NotAllowedError":case"PERMISSION_DENIED":case"PermissionDeniedError":return new Re(X.PERMISSION_DENIED,"".concat(e,": ").concat(n));case"ConstraintNotSatisfiedError":return new Re(X.CONSTRAINT_NOT_SATISFIED,"".concat(e,": ").concat(n));default:return k.error("getUserMedia unexpected error",e),new Re(X.UNEXPECTED_ERROR,"".concat(e,": ").concat(n))}}function ep(e,n){const i=e.getVideoTracks()[0],a=e.getAudioTracks()[0],l=n.getVideoTracks()[0],u=n.getAudioTracks()[0];u&&(a&&e.removeTrack(a),e.addTrack(u)),l&&(i&&e.removeTrack(i),e.addTrack(l))}const Ka=new class extends br{get state(){return this._state}set state(e){e!==this._state&&(this.emit(nh.STATE_CHANGE,e),this._state=e)}constructor(){super(),ye(this,"_state",N0.IDLE),ye(this,"isAccessMicrophonePermission",!1),ye(this,"isAccessCameraPermission",!1),ye(this,"lastAccessMicrophonePermission",!1),ye(this,"lastAccessCameraPermission",!1),ye(this,"checkdeviceMatched",!1),ye(this,"deviceInfoMap",new Map),this.init().then(()=>{navigator.mediaDevices.addEventListener&&navigator.mediaDevices.addEventListener("devicechange",this.updateDevicesInfo.bind(this)),window.setInterval(()=>{(Q("ENUMERATE_DEVICES_INTERVAL")||(H_()||j_()===Ci.HARMONY_OS)&&Gl())&&this.updateDevicesInfo()},Q("ENUMERATE_DEVICES_INTERVAL_TIME"))}).catch(e=>k.error(e.toString()))}async enumerateDevices(e,n){let i=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return new Re(X.NOT_SUPPORTED,"enumerateDevices() not supported.").throw();const a=await navigator.mediaDevices.enumerateDevices(),l=this.checkMediaDeviceInfoIsOk(a);let u=!this.isAccessMicrophonePermission&&e,h=!this.isAccessCameraPermission&&n;l.audio&&(u=!1),l.video&&(h=!1);let p=null,m=null,E=null;if(!i&&(u||h)){if(yI.isLocked&&(k.debug("[device manager] wait GUM lock"),(await yI.lock())(),k.debug("[device manager] GUM unlock")),wV&&(u=!1,this.isAccessMicrophonePermission=!0),IV&&(h=!1,this.isAccessCameraPermission=!0),k.debug("[device manager] check media device permissions",e,n,u,h),u&&h){try{E=await navigator.mediaDevices.getUserMedia({audio:!0,video:!0})}catch(S){const R=nS(S.name||S.code||S,S.message);if(R.code===X.PERMISSION_DENIED)throw R;k.warning("getUserMedia failed in getDevices",R)}this.isAccessCameraPermission=!0,this.isAccessMicrophonePermission=!0}else if(u){try{p=await navigator.mediaDevices.getUserMedia({audio:e})}catch(S){const R=nS(S.name||S.code||S,S.message);if(R.code===X.PERMISSION_DENIED)throw R;k.warning("getUserMedia failed in getDevices",R)}this.isAccessMicrophonePermission=!0}else if(h){try{m=await navigator.mediaDevices.getUserMedia({video:n})}catch(S){const R=nS(S.name||S.code||S,S.message);if(R.code===X.PERMISSION_DENIED)throw R;k.warning("getUserMedia failed in getDevices",R)}this.isAccessCameraPermission=!0}k.debug("[device manager] mic permission",e,"cam permission",n)}try{const S=await navigator.mediaDevices.enumerateDevices();return p&&p.getTracks().forEach(R=>R.stop()),m&&m.getTracks().forEach(R=>R.stop()),E&&E.getTracks().forEach(R=>R.stop()),p=null,m=null,E=null,S}catch(S){return p&&p.getTracks().forEach(R=>R.stop()),m&&m.getTracks().forEach(R=>R.stop()),E&&E.getTracks().forEach(R=>R.stop()),p=null,m=null,E=null,new Re(X.ENUMERATE_DEVICES_FAILED,S.toString()).throw()}}async getRecordingDevices(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return(await this.enumerateDevices(!0,!1,e)).filter(n=>n.kind==="audioinput")}async getCamerasDevices(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return(await this.enumerateDevices(!1,!0,e)).filter(n=>n.kind==="videoinput")}async getSpeakers(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return(await this.enumerateDevices(!0,!1,e)).filter(n=>n.kind==="audiooutput")}searchDeviceIdByName(e){let n=null;return this.deviceInfoMap.forEach(i=>{i.device.label===e&&(n=i.device.deviceId)}),n}async getDeviceById(e){const n=(await this.enumerateDevices(!0,!0,!0)).find(i=>i.deviceId===e);if(!n)throw new Re(X.DEVICE_NOT_FOUND,"deviceId: ".concat(e));return n}async init(){this.state=N0.INITING;try{await this.updateDevicesInfo(),this.state=N0.INITEND}catch(e){throw k.warning("Device Detection functionality cannot start properly.",e.toString()),this.state=N0.IDLE,(typeof isSecureContext=="boolean"?isSecureContext:location.protocol==="https:"||location.protocol==="file:"||location.hostname==="localhost"||location.hostname==="127.0.0.1"||location.hostname==="::1")||new Re(X.WEB_SECURITY_RESTRICT,"Your context is limited by web security, please try using https protocol or localhost.").throw(),e}}async updateDevicesInfo(){const e=await this.enumerateDevices(!0,!0,!0),n=Date.now(),i=[];if(e[0]&&e[0].label&&this.checkdeviceMatched===!1){this.checkdeviceMatched=!0;const l=e.find(h=>h.kind==="audioinput"&&h.deviceId==="default"),u=e.find(h=>h.kind==="audiooutput"&&h.deviceId==="default");l&&u?u.groupId===l.groupId?k.debug("[device-check] default input ".concat(l.label," and output ").concat(u.label," is the same group")):k.debug("[device-check] default input ".concat(l.label," and output ").concat(u.label," is not the same group")):k.debug("[device-check] default input or output not found")}const a=this.checkMediaDeviceInfoIsOk(e);if(e.forEach(l=>{if(!l.deviceId)return;const u=this.deviceInfoMap.get("".concat(l.kind,"_").concat(l.deviceId));if((u?u.state:"INACTIVE")!=="ACTIVE"){const h={initAt:n,updateAt:n,device:l,state:"ACTIVE"};this.deviceInfoMap.set("".concat(l.kind,"_").concat(l.deviceId),h),i.push(h)}u&&(u.updateAt=n)}),this.deviceInfoMap.forEach((l,u)=>{l.state==="ACTIVE"&&l.updateAt!==n&&(l.state="INACTIVE",i.push(l))}),this.state!==N0.INITEND)return a.audio&&(this.lastAccessMicrophonePermission=!0,this.isAccessMicrophonePermission=!0),void(a.video&&(this.lastAccessCameraPermission=!0,this.isAccessCameraPermission=!0));i.forEach(l=>{switch(l.device.kind){case"audioinput":this.lastAccessMicrophonePermission&&this.isAccessMicrophonePermission&&this.emit(nh.RECORDING_DEVICE_CHANGED,l);break;case"videoinput":this.lastAccessCameraPermission&&this.isAccessCameraPermission&&this.emit(nh.CAMERA_DEVICE_CHANGED,l);break;case"audiooutput":this.lastAccessMicrophonePermission&&this.isAccessMicrophonePermission&&this.emit(nh.PLAYOUT_DEVICE_CHANGED,l)}}),a.audio&&(this.lastAccessMicrophonePermission=!0,this.isAccessMicrophonePermission=!0),a.video&&(this.lastAccessCameraPermission=!0,this.isAccessCameraPermission=!0)}checkMediaDeviceInfoIsOk(e){const n=e.filter(l=>l.kind==="audioinput"),i=e.filter(l=>l.kind==="videoinput"),a={audio:!1,video:!1};for(const l of n)if(l.label&&l.deviceId){a.audio=!0;break}for(const l of i)if(l.label&&l.deviceId){a.video=!0;break}return a}};let CI=!1;const Ya=new class extends br{constructor(){super(...arguments),ye(this,"onAutoplayFailed",void 0),ye(this,"onAudioAutoplayFailed",void 0)}};function AV(){if(yn(),!CI){const e=n=>{n.preventDefault(),CI=!1,y0()?document.body.removeEventListener("click",e,!0):(document.body.removeEventListener("touchstart",e,!0),document.body.removeEventListener("mousedown",e,!0))};CI=!0,y0()?document.body.addEventListener("click",e,!0):(document.body.addEventListener("touchstart",e,!0),document.body.addEventListener("mousedown",e,!0)),k.info("detect media autoplay failed, document: https://docs.agora.io/cn/Voice/autoplay_policy_web_ng?platform=Web"),Ya.onAutoplayFailed?Ya.onAutoplayFailed():Ya.onAudioAutoplayFailed?k.warning(`AgoraRTC.onAudioAutoplayFailed has been deprecated in favor of AgoraRTC.onAutoplayFailed.

  Please refer to the Agora document to migrate the newer API, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web .`):k.warning(`We have detected a media autoplay failed event, and found out that you haven't implemented AgoraRTC.onAutoplayFailed callback yet.

  It will cause audio/video element not playing automatically on some browsers without user interaction, possibly hurting user experiences.

  Please refer to the Agora document to properly handle autoplay failed event, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web .`),Ya.emit("autoplay-failed")}}function OV(e,n,i,a){if(!e)return;const l=ct.getBaseInfoBySessionId(e);if(!l)return;const u=l.info,h=Date.now(),p=rr(rr({},u),{},{vid:u.vid===void 0?0:Number(u.vid),lts:h,elapse:h-l.startTime,cbRegistered:Ya.onAutoplayFailed||Ya.onAudioAutoplayFailed?1:-1,errorMsg:i,mediaType:n,trackId:a,extend:void 0});ct.send({type:pr.AUTOPLAY_FAILED,data:p},!0)}const pfe=["play","playing","loadeddata","canplay","pause","stalled","suspend","waiting","abort","emptied","ended","error"],qo=new class{constructor(){ye(this,"onAutoplayFailed",void 0),ye(this,"elementMap",new Map),ye(this,"elementStateMap",new Map),ye(this,"elementsNeedToResume",[]),ye(this,"sinkIdMap",new Map),ye(this,"autoResumeAfterInterruption",e=>{Array.from(this.elementMap.entries()).forEach(n=>{let[i,a]=n;const l=this.elementStateMap.get(i),u=a.srcObject.getAudioTracks()[0],h=u&&u.readyState;if(k.debug("resume after interrupted, ele: ".concat(l," audio: ").concat(h," ").concat(e)),h==="live"){if(e)return a.pause(),void a.play();if(Wn.curState==="running")return Vf()?(a.pause(),void a.play()):void(l&&l==="paused"&&a.play())}})}),ye(this,"autoResumeAfterInterruptionOnIOS15_16",()=>{Array.from(this.elementMap.entries()).forEach(e=>{let[n,i]=e;const a=i.srcObject.getAudioTracks()[0];a&&a.readyState==="live"&&(k.debug("auto resume after interruption inside autoResumeAfterInterruptionOnIOS15"),i.pause(),i.play())})}),this.autoResumeAudioElement(),Wn.on(Li.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),Wn.on(Li.IOS_15_16_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15_16),Wn.on(Li.STATE_CHANGE,()=>{co()&&Wn.prevState==="suspended"&&Wn.curState==="running"&&this.autoResumeAfterInterruption()})}async setSinkID(e,n){const i=this.elementMap.get(e);if(this.sinkIdMap.set(e,n),i)try{await i.setSinkId(n)}catch(a){throw new Re(X.PERMISSION_DENIED,"can not set sink id: "+a.toString())}}play(e,n,i,a){if(this.elementMap.has(n))return;const l=document.createElement("audio");l.autoplay=!0,l.srcObject=new MediaStream([e]),this.bindAudioElementEvents(n,l),this.elementMap.set(n,l),this.elementStateMap.set(n,Xi.INIT),this.setVolume(n,i);const u=this.sinkIdMap.get(n);if(u)try{l.setSinkId(u).catch(p=>{k.warning("[".concat(n,"] set sink id failed"),p.toString())})}catch(p){k.warning("[".concat(n,"] set sink id failed"),p.toString())}const h=l.play();h&&h.then&&h.catch(p=>{a&&OV(a,"audio",p.message,n),k.warning("audio element play warning",p.toString()),this.elementMap.has(n)&&p.name==="NotAllowedError"&&(k.warning("detected audio element autoplay failed"),this.elementsNeedToResume.push(l),W_(()=>{this.onAutoplayFailed&&this.onAutoplayFailed(),AV()}))})}updateTrack(e,n){const i=this.elementMap.get(e);i&&(i.srcObject=new MediaStream([n]))}isPlaying(e){return this.elementMap.has(e)&&this.elementStateMap.get(e)==="playing"}setVolume(e,n){const i=this.elementMap.get(e);i&&(n=Math.max(0,Math.min(100,n)),i.volume=n/100)}stop(e){const n=this.elementMap.get(e);if(this.sinkIdMap.delete(e),!n)return;const i=this.elementsNeedToResume.indexOf(n);this.elementsNeedToResume.splice(i,1),n.srcObject=null,n.remove(),this.elementMap.delete(e),this.elementStateMap.delete(e)}bindAudioElementEvents(e,n){pfe.forEach(i=>{n.addEventListener(i,a=>{const l=this.elementStateMap.get(e),u=a.type==="pause"?"paused":a.type;if(k.debug("[".concat(e,"] audio-element-status change ").concat(l," => ").concat(u)),a.type==="error"){const h=n==null?void 0:n.error;h&&k.error("[".concat(e,"] media error, code: ").concat(h.code,", message: ").concat(h.message))}this.elementStateMap.set(e,u)})})}getPlayerState(e){return this.elementStateMap.get(e)||"uninit"}autoResumeAudioElement(){const e=()=>{this.elementsNeedToResume.forEach(n=>{n.play().then(i=>{k.debug("Auto resume audio element success")}).catch(i=>{k.warning("Auto resume audio element failed!",i)})}),this.elementsNeedToResume=[]};new et(n=>{document.body?n():window.addEventListener("load",()=>n())}).then(()=>{y0()?document.body.addEventListener("click",e,!0):(document.body.addEventListener("touchstart",e,!0),document.body.addEventListener("mousedown",e,!0))})}};function kr(){return function(e,n,i){const a=i.value;return typeof a=="function"&&(i.value=function(){this._isClosed&&new Re(X.INVALID_OPERATION,"[".concat(this.getTrackId(),"] cannot operate a closed track")).print("warning",k);for(var l=arguments.length,u=new Array(l),h=0;h<l;h++)u[h]=arguments[h];const p=a.apply(this,u);return p instanceof et?new et((m,E)=>{p.then(m).catch(E)}):p}),i}}class xV extends br{constructor(n){super(),ye(this,"name","VideoProcessorDestination"),ye(this,"ID","0"),ye(this,"_source",void 0),ye(this,"videoContext",void 0),ye(this,"inputTrack",void 0),this.videoContext=n}get kind(){return"video"}get enabled(){return!0}pipe(){throw new Re(X.NOT_SUPPORTED,"VideoProcessor cannot pipe to any other Processor")}unpipe(){throw new Re(X.NOT_SUPPORTED,"VideoProcessor cannot unpipe to any other Processor")}enable(){}disable(){}updateInput(n){if(n.context!==this.videoContext)throw new Error(`ProcessorContext passed to VideoTrack.processorDestination doesn't match it's belonging VideoTrack's context.
Probably you are making pipeline like this:
videoTrack1.pipe(processor).pipe(videoTrack2.processorDestination).`);n.track&&n.track!==this.inputTrack&&(this.videoContext.chained=!0,this.inputTrack=n.track,this.emit(Po.ON_TRACK,n.track))}reset(){this.inputTrack=void 0,this.videoContext.chained=!1,this.emit(Po.ON_TRACK,void 0)}}class NV extends br{set chained(n){this._chained=n}get chained(){return this._chained}constructor(n,i){super(),ye(this,"constraintsMap",new Map),ye(this,"statsRegistry",[]),ye(this,"usageRegistry",[]),ye(this,"trackId",void 0),ye(this,"direction",void 0),ye(this,"_chained",!1),this.trackId=n,this.direction=i}async getConstraints(){return await zi(this,za.REQUEST_CONSTRAINTS)}async requestApplyConstraints(n,i){var a;return k.info("processor ".concat(i.name," requestApplyConstraints for ").concat(this.trackId)),n&&this.constraintsMap.set(i,n),Qn(this,za.REQUEST_UPDATE_CONSTRAINTS,Array.from(ba(a=this.constraintsMap).call(a)))}async requestRevertConstraints(n){var i;if(this.constraintsMap.has(n))return k.info("processor ".concat(n.name," requestRevertConstraints for ").concat(this.trackId)),this.constraintsMap.delete(n),Qn(this,za.REQUEST_UPDATE_CONSTRAINTS,Array.from(ba(i=this.constraintsMap).call(i)))}registerStats(n,i,a){this.statsRegistry.find(l=>l.processorID===n.ID&&l.processorName===n.name&&l.type===i)||this.statsRegistry.push({processorName:n.name,processorID:n.ID,type:i,cb:a})}unregisterStats(n,i){const a=this.statsRegistry.findIndex(l=>l.processorID===n.ID&&l.processorName===n.name&&l.type===i);a!==-1&&this.statsRegistry.splice(a,1)}gatherStats(){const n=[];for(const{processorID:i,processorName:a,type:l,cb:u}of this.statsRegistry)try{const h=u();n.push({processorID:i,processorName:a,type:l,stats:h})}catch(h){k.error(new Re(X.UNEXPECTED_ERROR,h.message))}return n}registerUsage(n,i){this.usageRegistry.find(a=>a.processorID===n.ID&&a.processorName===n.name)||this.usageRegistry.push({processorID:n.ID,processorName:n.name,cb:i})}unregisterUsage(n){const i=this.usageRegistry.findIndex(a=>a.processorID===n.ID&&a.processorName===n.name);i!==-1&&this.usageRegistry.splice(i,1)}async gatherUsage(){const n=[];if(!this.chained)return[];for(const{cb:i}of this.usageRegistry)try{let a=i();a instanceof et&&(a=await a),n.push(rr(rr({},a),{},{direction:this.direction}))}catch(a){k.error("gather extension usage error",a)}return n}getDirection(){return this.direction}}class PV extends br{constructor(n){super(),ye(this,"name","AudioProcessorDestination"),ye(this,"ID","0"),ye(this,"inputTrack",void 0),ye(this,"inputNode",void 0),ye(this,"audioProcessorContext",void 0),ye(this,"_source",void 0),this.audioProcessorContext=n}get kind(){return"audio"}get enabled(){return!0}pipe(){throw new Re(X.NOT_SUPPORTED,"AudioProcessorDestination cannot pipe to any other Processor")}unpipe(){throw new Re(X.NOT_SUPPORTED,"AudioProcessor cannot unpipe to any other Processor")}enable(){}disable(){}reset(){this.inputTrack=void 0,this.inputNode=void 0,this.audioProcessorContext.chained=!1,this.emit(Po.ON_TRACK,void 0),this.emit(Po.ON_NODE,void 0)}updateInput(n){if(n.context!==this.audioProcessorContext)throw new Error(`ProcessorContext passed to AudioTrack.processorDestination doesn't match it's belonging AudioTrack's context.
        Probably you are making pipeline like this: audioTrack1.pipe(processor).pipe(audioTrack2.processorDestination).`);n.track&&this.inputTrack!==n.track&&(this.audioProcessorContext.chained=!0,this.inputTrack=n.track,this.emit(Po.ON_TRACK,this.inputTrack)),n.node&&this.inputNode!==n.node&&(this.audioProcessorContext.chained=!0,this.inputNode=n.node,this.emit(Po.ON_NODE,this.inputNode))}}class DV extends br{set chained(n){this._chained=n}get chained(){return this._chained}constructor(n,i,a){super(),ye(this,"constraintsMap",new Map),ye(this,"statsRegistry",[]),ye(this,"audioContext",void 0),ye(this,"trackId",void 0),ye(this,"direction",void 0),ye(this,"usageRegistry",[]),ye(this,"_chained",!1),this.audioContext=n,this.trackId=i,this.direction=a}async getConstraints(){return zi(this,za.REQUEST_CONSTRAINTS)}getAudioContext(){return this.audioContext}async requestApplyConstraints(n,i){var a;return k.info("processor ".concat(i.name," requestApplyConstraints for ").concat(this.trackId)),n&&this.constraintsMap.set(i,n),Qn(this,za.REQUEST_UPDATE_CONSTRAINTS,Array.from(ba(a=this.constraintsMap).call(a)))}async requestRevertConstraints(n){var i;if(this.constraintsMap.has(n))return this.constraintsMap.delete(n),Qn(this,za.REQUEST_UPDATE_CONSTRAINTS,Array.from(ba(i=this.constraintsMap).call(i)))}registerStats(n,i,a){this.statsRegistry.find(l=>l.processorID===n.ID&&l.processorName===n.name&&l.type===i)||this.statsRegistry.push({processorName:n.name,processorID:n.ID,type:i,cb:a})}unregisterStats(n,i){const a=this.statsRegistry.findIndex(l=>l.processorID===n.ID&&l.processorName===n.name&&l.type===i);a!==-1&&this.statsRegistry.splice(a,1)}gatherStats(){const n=[];for(const{processorID:i,processorName:a,type:l,cb:u}of this.statsRegistry)try{const h=u();n.push({processorID:i,processorName:a,type:l,stats:h})}catch(h){k.error(new Re(X.UNEXPECTED_ERROR,h.message))}return n}registerUsage(n,i){this.usageRegistry.find(a=>a.processorID===n.ID&&a.processorName===n.name)||this.usageRegistry.push({processorID:n.ID,processorName:n.name,cb:i})}unregisterUsage(n){const i=this.usageRegistry.findIndex(a=>a.processorID===n.ID&&a.processorName===n.name);i!==-1&&this.usageRegistry.splice(i,1)}async gatherUsage(){const n=[];if(!this.chained)return[];for(const{cb:i}of this.usageRegistry)try{let a=i();a instanceof et&&(a=await a),n.push(rr(rr({},a),{},{direction:this.direction}))}catch(a){k.error("gather extension usage error",a)}return n}getDirection(){return this.direction}}class bI extends br{get isPlayed(){return!0}get isFreeze(){return!1}constructor(){super(),ye(this,"context",void 0),ye(this,"processSourceNode",void 0),ye(this,"outputTrack",void 0),ye(this,"processedNode",void 0),ye(this,"clonedTrack",void 0),ye(this,"outputNode",void 0),this.outputNode=new mfe}setVolume(){}createOutputTrack(){throw new Re(X.NOT_SUPPORTED,"can not create output MediaStreamTrack when WebAudio disabled")}getOriginVolumeLevel(){return 0}getAccurateVolumeLevel(){return 0}stopGetAudioBuffer(){}startGetAudioBuffer(){}play(){}stop(){}destroy(){}updateTrack(){}updateOriginTrack(){}createMediaStreamSourceNode(){}}class mfe{disconnect(){}connect(){}}function LV(e){return new et((n,i)=>{let a=!1;const l=document.createElement("video");l.setAttribute("autoplay",""),l.setAttribute("muted",""),l.muted=!0,l.autoplay=!0,l.setAttribute("playsinline",""),l.setAttribute("style","position: fixed; top: 0; left: 0; width: 1px; height: 1px"),document.body.appendChild(l);const u=co()?"canplay":"playing";l.addEventListener(u,()=>{const h=l.videoWidth,p=l.videoHeight;!h&&Or()||(a=!0,l.srcObject=null,l.remove(),n([h,p]))}),l.srcObject=new MediaStream([e]),l.play().catch(G_),setTimeout(()=>{a||(l.srcObject=null,l.remove(),n([l.videoWidth,l.videoHeight]))},4e3)})}function rS(e){const n={};e.facingMode&&(n.facingMode=e.facingMode),e.cameraId&&(n.deviceId={exact:e.cameraId});const i=Gs(e.encoderConfig);return i.width!=null&&(n.width=i.width),i.height!=null&&(n.height=i.height),!P3()&&i.frameRate&&(n.frameRate=i.frameRate),T3()&&typeof n.frameRate=="object"&&(n.frameRate.max=60),Or()&&(n.frameRate={ideal:30,max:30}),n}function kV(e){const n={};return P3()||(e.AGC!==void 0&&(n.autoGainControl=e.AGC),e.AEC!==void 0&&(n.echoCancellation=e.AEC),e.ANS!==void 0&&(n.noiseSuppression=e.ANS,Wl()&&e.ANS&&(n.googHighpassFilter=e.ANS))),n}function MV(e){const n=kV(e);if(e.encoderConfig){const i=eS(e.encoderConfig);n.channelCount=i.stereo?2:1,n.sampleRate=i.sampleRate,n.sampleSize=i.sampleSize}return e.microphoneId&&(n.deviceId={exact:e.microphoneId}),H_()&&(n.sampleRate=void 0),n}const gfe=e=>{const n=e._encoderConfig;if(!n)return;const{frameRate:i,width:a,height:l}=e.getMediaStreamTrackSettings();let{frameRate:u=i,width:h=a,height:p=l}=n;if(!u||!h||!p)return;h=Hf(h),p=Hf(p),u=Hf(u);const{max:m,min:E}=function(O,H,B){const j=200*Math.pow(B/15,.6)*Math.pow(O*H/640/360,.75);return{min:Math.floor(j),max:Math.floor(4*j)}}(h,p,u),{bitrateMax:S,bitrateMin:R}=n||{};S||k.debug("calculate bitrate: [w: ".concat(h,", h: ").concat(p,", fps: ").concat(u,"] => [brMax: ").concat(S,", brMin: ").concat(R,"]"));const{maxFramerate:w}=Q("ENCODER_CONFIG_LIMIT");return w&&typeof w=="number"&&(u=Math.min(u,w)),{frameRate:u,bitrateMax:S||m,bitrateMin:R||E,scaleResolutionDownBy:1,scale:0}},FV=async(e,n,i)=>await(async(a,l,u)=>{const h=function(E){const S=[];for(let R=0;R<E.length;R+=2)S.push(parseInt(E.slice(R,R+2),16));return Uint8Array.from(S)}(Y3(""+l+u)).slice(0,16),p=h.slice(0,12),m=await window.crypto.subtle.importKey("raw",h,"AES-GCM",!0,["encrypt"]);return new Uint8Array(await window.crypto.subtle.encrypt({name:"AES-GCM",iv:p},m,a))})(e.buffer,n,i),TI=e=>{const n=document.createElement("canvas");return n.width=2,n.height=2,new et((i,a)=>{n.toBlob(async l=>{if(n.remove(),l){const u=await UV(l);i({buffer:u,width:n.width,height:n.height})}else a(new Re(X.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED))},e,1)})},UV=async e=>{const n=await e.arrayBuffer();return new Uint8Array(n)};var BV,VV,jV,$V,HV,zV,WV,GV,KV,YV,qV,XV,JV,QV,ZV,e5,t5,n5,Tr,r5,i5,o5,a5,s5,c5,fl,l5,u5,d5,h5,f5,p5,m5,g5,v5,E5,_5,S5,y5,Gi;let Mr=(BV=It({argsMap:(e,n)=>[e.getTrackId(),n],throttleTime:300}),VV=It({argsMap:(e,n)=>[e.getTrackId(),n]}),jV=kr(),$V=zf("LocalAudioTrack","_enabledMutex"),HV=It({argsMap:(e,n)=>[e.getTrackId(),n]}),zV=kr(),WV=zf("LocalAudioTrack","_enabledMutex"),GV=It({argsMap:(e,n)=>[e.getTrackId(),n]}),KV=kr(),YV=kr(),qV=kr(),XV=It({argsMap:e=>[e.getTrackId()]}),JV=kr(),QV=It({argsMap:e=>[e.getTrackId()]}),ZV=kr(),e5=It({argsMap:e=>[e.getTrackId()]}),t5=It({argsMap:(e,n)=>[e.getTrackId(),n.name]}),n5=It({argsMap:e=>[e.getTrackId()]}),_n((Tr=class extends Qf{get _source(){return this.initWebAudio()}set _source(e){this._trackSource=e}get processorContext(){return this._processorContext||(this._processorContext=this.initProcessor().processorContext),this._processorContext}get processorDestination(){return this._processorDestination||(this._processorDestination=this.initProcessor().processorDestination),this._processorDestination}get isPlaying(){return this._useAudioElement?qo.isPlaying(this.getTrackId()):this._source.isPlayed}get __className__(){return"LocalAudioTrack"}constructor(e,n,i,a){super(e,i),ye(this,"trackMediaType",Jf.AUDIO),ye(this,"_encoderConfig",void 0),ye(this,"_trackSource",void 0),ye(this,"metadata",[]),ye(this,"_enabled",!0),ye(this,"_volume",100),ye(this,"_useAudioElement",!0),ye(this,"_bypassWebAudio",!1),ye(this,"processor",void 0),ye(this,"_processorContext",void 0),ye(this,"_processorDestination",void 0),ye(this,"_getOriginVolumeLevel",void 0),this._encoderConfig=n,this._getOriginVolumeLevel=!!a,this._trackSource=new bI,Q("DISABLE_WEBAUDIO")&&(this._bypassWebAudio=!0),Q("LOCAL_AUDIO_TRACK_USES_WEB_AUDIO")&&(this._useAudioElement=!1),$i()&&!Wa?setTimeout(()=>this.initWebAudio()):this.initWebAudio()}setVolume(e){Yn(e,"volume",0,1e3),this._volume=e,this._source.setVolume(e/100),this._useAudioElement&&qo.setVolume(this.getTrackId(),e);try{if(this._bypassWebAudio)return void k.debug("[".concat(this.getTrackId(),"] setVolume returned because no pass through WebAudio."));const n=this._source.createOutputTrack();this._mediaStreamTrack!==n&&(this._mediaStreamTrack=n,Qn(this,at.NEED_REPLACE_TRACK,this).then(()=>{k.debug("[".concat(this.getTrackId(),"] replace web audio track success"))}).catch(i=>{k.warning("[".concat(this.getTrackId(),"] replace web audio track failed"),i)}))}catch{}}getVolumeLevel(){return this._muted&&this.enabled&&this._getOriginVolumeLevel?this._source.getOriginVolumeLevel():this._source.getAccurateVolumeLevel()}async setPlaybackDevice(e){if(!this._useAudioElement||!fV())throw new Re(X.NOT_SUPPORTED,"your browser does not support setting the audio output device");await qo.setSinkID(this.getTrackId(),e)}async setEnabled(e,n,i){return this._setEnabled(e,n,i)}async _setEnabled(e,n,i){if(!i){if(e===this._enabled)return;this.stateCheck("enabled",e)}if(k.info("[".concat(this.getTrackId(),"] start setEnabled"),e),e){this._originMediaStreamTrack.enabled=!0;try{i||(this._enabled=!0),await Qn(this,at.NEED_ENABLE_TRACK,this),k.info("[".concat(this.getTrackId(),"] setEnabled to ").concat(e," success"))}catch(a){throw i||(this._enabled=!1),k.error("[".concat(this.getTrackId(),"] setEnabled to true error"),a.toString()),a}}else{this._originMediaStreamTrack.enabled=!1,i||(this._enabled=!1);try{await Qn(this,at.NEED_DISABLE_TRACK,this)}catch(a){throw i||(this._enabled=!0),k.error("[".concat(this.getTrackId(),"] setEnabled to false error"),a.toString()),a}}}async setMuted(e){e!==this._muted&&(this.stateCheck("muted",e),this._muted=e,this._originMediaStreamTrack.enabled=!e,k.debug("[".concat(this.getTrackId(),"] start set muted: ").concat(e)),e?await Qn(this,at.NEED_MUTE_TRACK,this):await Qn(this,at.NEED_UNMUTE_TRACK,this))}getStats(){return Fu(()=>{k.warning("[deprecated] LocalAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalAudioStats instead")},"localAudioTrackGetStatsWarning"),ja(this,at.GET_STATS)||rr({},gI)}setAudioFrameCallback(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:4096;if(!e)return this._source.removeAllListeners(Ha.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(n),this._source.removeAllListeners(Ha.ON_AUDIO_BUFFER),this._source.on(Ha.ON_AUDIO_BUFFER,i=>e(i))}play(){k.debug("[".concat(this.getTrackId(),"] start audio playback")),this._useAudioElement?(k.debug("[".concat(this.getTrackId(),"] start audio playback in element")),qo.play(this._mediaStreamTrack,this.getTrackId(),this._volume)):this._source.play()}stop(){k.debug("[".concat(this.getTrackId(),"] stop audio playback")),this._useAudioElement?qo.stop(this.getTrackId()):this._source.stop()}close(){super.close(),this._processorDestination&&this.unbindProcessorDestinationEvents(this._processorDestination),this._processorContext&&this.unbindProcessorContextEvents(this._processorContext),this.unpipe(),this._processorDestination&&this._processorDestination._source&&this._processorDestination._source.unpipe(),this._source.destroy()}_updatePlayerSource(){let e=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];k.debug("[".concat(this.getTrackId(),"] update player source track")),e&&this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&qo.updateTrack(this.getTrackId(),this._mediaStreamTrack)}async _updateOriginMediaStreamTrack(e,n){this._originMediaStreamTrack!==e&&(this._originMediaStreamTrack&&(this._originMediaStreamTrack.removeEventListener("ended",this._handleTrackEnded),n&&this._originMediaStreamTrack.stop()),e.addEventListener("ended",this._handleTrackEnded),this._originMediaStreamTrack=e,this._muted&&(this._originMediaStreamTrack.enabled=!1),this.processor&&this._processorContext&&this.processor.updateInput({track:e,context:this._processorContext}),this._mediaStreamTrack!==this._source.outputTrack?(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await Qn(this,at.NEED_REPLACE_TRACK,this)):this._source.updateTrack(this._originMediaStreamTrack),this._getOriginVolumeLevel&&this._source.updateOriginTrack(e))}renewMediaStreamTrack(e){return et.resolve(void 0)}pipe(e){if(this._bypassWebAudio)throw new Re(X.INVALID_OPERATION,"Can not process AudioTrack when bypassWebAudio set to true.");if(this.processor===e)return e;if(e._source)throw new Re(X.INVALID_OPERATION,"Processor ".concat(e.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=e,this.processor._source=this,e.updateInput({track:this._originMediaStreamTrack,node:this._source.processSourceNode,context:this.processorContext}),e}unpipe(){var e;if(!this.processor)return;const n=this.processor;(e=this._source.processSourceNode)===null||e===void 0||e.disconnect(),this.processor._source=!1,this.processor=void 0,n.reset()}bindProcessorDestinationEvents(e){e.on(Po.ON_TRACK,async n=>{n?n!==this._mediaStreamTrack&&(this._mediaStreamTrack=n,this._updatePlayerSource(!1),this._source.processedNode=this._source.createMediaStreamSourceNode(n),await Qn(this,at.NEED_REPLACE_TRACK,this)):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await Qn(this,at.NEED_REPLACE_TRACK,this))}),e.on(Po.ON_NODE,n=>{this._source.processedNode=n})}unbindProcessorDestinationEvents(e){e.removeAllListeners(Po.ON_TRACK),e.removeAllListeners(Po.ON_NODE)}bindProcessorContextEvents(e){e.on(za.REQUEST_CONSTRAINTS,async n=>{n(this._originMediaStreamTrack.getSettings())})}unbindProcessorContextEvents(e){e.removeAllListeners(za.REQUEST_CONSTRAINTS)}initWebAudio(){return this._trackSource instanceof bI&&(this._trackSource=new bV(this._mediaStreamTrack,!1,this._getOriginVolumeLevel?this._mediaStreamTrack:void 0)),this._trackSource}initProcessor(){const e=new DV(this._source.context,this.getTrackId(),"local"),n=new PV(e);return this._processorContext=e,this._processorDestination=n,this.bindProcessorContextEvents(e),this.bindProcessorDestinationEvents(n),this._source.on(Ha.UPDATE_SOURCE,()=>{this.processor&&this.processor.updateInput({node:this._source.processSourceNode,context:e})}),this._useAudioElement&&(this._useAudioElement=!1,this.isPlaying&&(qo.stop(this.getTrackId()),this._source.play()),Qn(this,at.NEED_REPLACE_MIXING_TRACK,this).then(()=>{k.debug("[".concat(this.getTrackId(),"] replace from origin track to web audio track success"))}).catch(i=>{k.warning("[".concat(this.getTrackId(),"] replace from origin track to web audio track failed"),i)})),{processorContext:e,processorDestination:n}}}).prototype,"setVolume",[BV],Object.getOwnPropertyDescriptor(Tr.prototype,"setVolume"),Tr.prototype),_n(Tr.prototype,"setPlaybackDevice",[VV,jV],Object.getOwnPropertyDescriptor(Tr.prototype,"setPlaybackDevice"),Tr.prototype),_n(Tr.prototype,"setEnabled",[$V,HV,zV],Object.getOwnPropertyDescriptor(Tr.prototype,"setEnabled"),Tr.prototype),_n(Tr.prototype,"setMuted",[WV,GV,KV],Object.getOwnPropertyDescriptor(Tr.prototype,"setMuted"),Tr.prototype),_n(Tr.prototype,"getStats",[YV],Object.getOwnPropertyDescriptor(Tr.prototype,"getStats"),Tr.prototype),_n(Tr.prototype,"setAudioFrameCallback",[qV],Object.getOwnPropertyDescriptor(Tr.prototype,"setAudioFrameCallback"),Tr.prototype),_n(Tr.prototype,"play",[XV,JV],Object.getOwnPropertyDescriptor(Tr.prototype,"play"),Tr.prototype),_n(Tr.prototype,"stop",[QV,ZV],Object.getOwnPropertyDescriptor(Tr.prototype,"stop"),Tr.prototype),_n(Tr.prototype,"close",[e5],Object.getOwnPropertyDescriptor(Tr.prototype,"close"),Tr.prototype),_n(Tr.prototype,"pipe",[t5],Object.getOwnPropertyDescriptor(Tr.prototype,"pipe"),Tr.prototype),_n(Tr.prototype,"unpipe",[n5],Object.getOwnPropertyDescriptor(Tr.prototype,"unpipe"),Tr.prototype),Tr),P0=(r5=It({argsMap:(e,n)=>[e.getTrackId(),n]}),i5=kr(),o5=zf("MicrophoneAudioTrack","_enabledMutex"),a5=It({argsMap:(e,n,i)=>[e.getTrackId(),n,i]}),s5=kr(),c5=It({argsMap:e=>[e.getTrackId()]}),_n((fl=class extends Mr{get __className__(){return"MicrophoneAudioTrack"}constructor(e,n,i,a){super(e,n.encoderConfig?eS(n.encoderConfig):{},a,Q("GET_VOLUME_OF_MUTED_AUDIO_TRACK")),ye(this,"_config",void 0),ye(this,"_deviceName","default"),ye(this,"_constraints",void 0),ye(this,"_originalConstraints",void 0),ye(this,"_enabled",!0),this._config=n,this._constraints=i,this._originalConstraints=i,this._deviceName=e.label,typeof n.bypassWebAudio=="boolean"&&(this._bypassWebAudio=n.bypassWebAudio),(Vf()||zw())&&Wn.bindInterruptDetectorTrack(this)}async setDevice(e){if(k.info("[".concat(this.getTrackId(),"] start set device to ").concat(e)),this._enabled)try{const n=await Ka.getDeviceById(e),i={};i.audio=rr({},this._constraints),i.audio.deviceId={exact:e},this._originMediaStreamTrack.stop();let a=null;try{a=await Ga(i,this.getTrackId())}catch(l){throw k.error("[".concat(this.getTrackId(),"] setDevice failed"),l.toString()),a=await Ga({audio:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(a.getAudioTracks()[0],!1),l}await this._updateOriginMediaStreamTrack(a.getAudioTracks()[0],!1),this._deviceName=n.label,this._config.microphoneId=e,this._constraints.deviceId={exact:e}}catch(n){throw k.error("[".concat(this.getTrackId(),"] setDevice error"),n.toString()),n}else try{const n=await Ka.getDeviceById(e);this._deviceName=n.label,this._config.microphoneId=e,this._constraints.deviceId={exact:e}}catch(n){throw k.error("[".concat(this.getTrackId(),"] setDevice error"),n.toString()),n}k.info("[".concat(this.getTrackId(),"] set device to ").concat(e," success"))}async setEnabled(e,n,i){if(n)return k.debug("[".concat(this.getTrackId(),"] setEnabled false (do not close microphone)")),await super._setEnabled(e);if(!i){if(e===this._enabled)return;this.stateCheck("enabled",e)}if(k.info("[".concat(this.getTrackId(),"] start setEnabled"),e),Q("AUTO_RESET_AUDIO_ROUTE")&&(co()||Hs())){const h=navigator.audioSession;h&&(e||(h.type="playback"),h.type="auto")}if(!e){var a;this._originMediaStreamTrack.onended=null,this._originMediaStreamTrack.stop(),(a=this._source.clonedTrack)===null||a===void 0||a.stop(),i||(this._enabled=!1);try{await Qn(this,at.NEED_DISABLE_TRACK,this)}catch(h){throw k.error("[".concat(this.getTrackId(),"] setEnabled false failed"),h.toString()),h}return}const l=rr({},this._constraints),u=Ka.searchDeviceIdByName(this._deviceName);u&&!l.deviceId&&(l.deviceId=u);try{i||(this._enabled=!0);const h=await Ga({audio:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(h.getAudioTracks()[0],!1),await Qn(this,at.NEED_ENABLE_TRACK,this)}catch(h){throw i||(this._enabled=!1),k.error("[".concat(this.getTrackId(),"] setEnabled true failed"),h.toString()),h}k.info("[".concat(this.getTrackId(),"] setEnabled success"))}close(){super.close(),(Vf()||zw())&&Wn.unbindInterruptDetectorTrack(this)}onTrackEnded(){if((co()||Hs())&&this._enabled&&!this._isClosed&&Wn.duringInterruption){const e=async()=>{Wn.off(Li.IOS_INTERRUPTION_END,e),this._enabled&&!this._isClosed&&(k.debug("[".concat(this.getTrackId(),"] try capture microphone media device for interrupted iOS device.")),await this.setEnabled(!1),await this.setEnabled(!0))};Wn.on(Li.IOS_INTERRUPTION_END,e)}else k.debug("[".concat(this.getTrackId(),"] track ended")),this.safeEmit(Xf.TRACK_ENDED)}async renewMediaStreamTrack(e){const n=e||this._constraints,i=Ka.searchDeviceIdByName(this._deviceName);if(i&&!n.deviceId&&(n.deviceId=i),this._constraints=n,this._enabled){this._originMediaStreamTrack.stop();const a=await Ga({audio:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(a.getAudioTracks()[0],!0)}}bindProcessorContextEvents(e){super.bindProcessorContextEvents(e),e.on(za.REQUEST_UPDATE_CONSTRAINTS,async(n,i,a)=>{try{const l=Object.assign({},this._originalConstraints,...n);await this.renewMediaStreamTrack(l),i()}catch(l){a(l)}})}unbindProcessorContextEvents(e){super.unbindProcessorContextEvents(e),e.removeAllListeners(za.REQUEST_UPDATE_CONSTRAINTS)}}).prototype,"setDevice",[r5,i5],Object.getOwnPropertyDescriptor(fl.prototype,"setDevice"),fl.prototype),_n(fl.prototype,"setEnabled",[o5,a5,s5],Object.getOwnPropertyDescriptor(fl.prototype,"setEnabled"),fl.prototype),_n(fl.prototype,"close",[c5],Object.getOwnPropertyDescriptor(fl.prototype,"close"),fl.prototype),fl),vfe=(l5=It({argsMap:(e,n)=>[e.getTrackId(),n,e.duration]}),u5=kr(),d5=It({argsMap:e=>[e.getTrackId()]}),h5=kr(),f5=It({argsMap:e=>[e.getTrackId()]}),p5=kr(),m5=It({argsMap:e=>[e.getTrackId()]}),g5=kr(),v5=It({argsMap:e=>[e.getTrackId()]}),E5=kr(),_5=It({argsMap:e=>[e.getTrackId()]}),S5=It({argsMap:e=>[e.getTrackId()]}),y5=kr(),_n((Gi=class extends Mr{get __className__(){return"BufferSourceAudioTrack"}constructor(e,n,i,a){super(n.createOutputTrack(),i,a),ye(this,"source",void 0),ye(this,"_bufferSource",void 0),this._useAudioElement=!1,this.source=e,this._bufferSource=n,this._bufferSource.on(Ha.AUDIO_SOURCE_STATE_CHANGE,l=>{this.safeEmit(Xf.SOURCE_STATE_CHANGE,l)});try{this._mediaStreamTrack=this._source.createOutputTrack()}catch{}}get currentState(){return this._bufferSource.currentState}get duration(){return this._bufferSource.duration}get playbackSpeed(){return this._bufferSource.playbackSpeed}getCurrentTime(){return this._bufferSource.currentTime}startProcessAudioBuffer(e){e&&this._bufferSource.updateOptions(e),this._bufferSource.startProcessAudioBuffer()}pauseProcessAudioBuffer(){this._bufferSource.pauseProcessAudioBuffer()}seekAudioBuffer(e){this._bufferSource.seekAudioBuffer(e)}resumeProcessAudioBuffer(){this._bufferSource.resumeProcessAudioBuffer()}stopProcessAudioBuffer(){this._bufferSource.stopProcessAudioBuffer()}close(){this.source=null,this._bufferSource.destroy(),super.close()}setAudioBufferPlaybackSpeed(e){Yn(e,"speed",0),this._bufferSource.setAudioBufferPlaybackSpeed(e)}}).prototype,"startProcessAudioBuffer",[l5,u5],Object.getOwnPropertyDescriptor(Gi.prototype,"startProcessAudioBuffer"),Gi.prototype),_n(Gi.prototype,"pauseProcessAudioBuffer",[d5,h5],Object.getOwnPropertyDescriptor(Gi.prototype,"pauseProcessAudioBuffer"),Gi.prototype),_n(Gi.prototype,"seekAudioBuffer",[f5,p5],Object.getOwnPropertyDescriptor(Gi.prototype,"seekAudioBuffer"),Gi.prototype),_n(Gi.prototype,"resumeProcessAudioBuffer",[m5,g5],Object.getOwnPropertyDescriptor(Gi.prototype,"resumeProcessAudioBuffer"),Gi.prototype),_n(Gi.prototype,"stopProcessAudioBuffer",[v5,E5],Object.getOwnPropertyDescriptor(Gi.prototype,"stopProcessAudioBuffer"),Gi.prototype),_n(Gi.prototype,"close",[_5],Object.getOwnPropertyDescriptor(Gi.prototype,"close"),Gi.prototype),_n(Gi.prototype,"setAudioBufferPlaybackSpeed",[S5,y5],Object.getOwnPropertyDescriptor(Gi.prototype,"setAudioBufferPlaybackSpeed"),Gi.prototype),Gi);class ui extends Mr{get __className__(){return"MixingAudioTrack"}get isActive(){for(const n of this.trackList)if(n._enabled&&!n._isClosed&&!n.muted)return!0;return!1}constructor(){const n=Zf().createMediaStreamDestination();super(n.stream.getAudioTracks()[0],void 0,Zn(8,"track-mix-")),ye(this,"trackList",void 0),ye(this,"destNode",void 0),this._useAudioElement=!1;try{this._mediaStreamTrack=this._source.createOutputTrack()}catch{}this.destNode=n,this.trackList=[]}hasAudioTrack(n){return this.trackList.indexOf(n)!==-1}addAudioTrack(n){this.trackList.indexOf(n)===-1?(k.debug("add ".concat(n.getTrackId()," to mixing track")),n._source.outputNode.connect(this.destNode),this.trackList.push(n),this.updateEncoderConfig()):k.debug("track ".concat(n.getTrackId()," is already added"))}removeAudioTrack(n){if(this.trackList.indexOf(n)!==-1){k.debug("remove ".concat(n.getTrackId()," from mixing track"));try{n._source.outputNode.disconnect(this.destNode)}catch{}z_(this.trackList,n),this.updateEncoderConfig()}}updateEncoderConfig(){const n={};this.trackList.forEach(i=>{i._encoderConfig&&((i._encoderConfig.bitrate||0)>(n.bitrate||0)&&(n.bitrate=i._encoderConfig.bitrate),(i._encoderConfig.sampleRate||0)>(n.sampleRate||0)&&(n.sampleRate=i._encoderConfig.sampleRate),(i._encoderConfig.sampleSize||0)>(n.sampleSize||0)&&(n.sampleSize=i._encoderConfig.sampleSize),i._encoderConfig.stereo&&(n.stereo=!0))}),this._encoderConfig=n}_updateRtpTransceiver(n){this._rtpTransceiver!==n&&(this._rtpTransceiver=n,this.trackList.forEach(i=>{i instanceof ui?i.emit(th.TRANSCEIVER_UPDATED,n):i._updateRtpTransceiver(n)}))}}class Efe extends CV{set currentState(n){n!==this._currentState&&(this._currentState=n,this.safeEmit(Ha.AUDIO_SOURCE_STATE_CHANGE,this._currentState))}get currentState(){return this._currentState}constructor(n){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),ye(this,"audioBuffer",void 0),ye(this,"sourceNode",void 0),ye(this,"startPlayTime",0),ye(this,"startPlayOffset",0),ye(this,"pausePlayTime",0),ye(this,"options",void 0),ye(this,"currentLoopCount",0),ye(this,"currentPlaybackSpeed",100),ye(this,"_currentState","stopped"),this.audioBuffer=n,this.options=i,this.startPlayOffset=this.options.startPlayTime||0}createWebAudioDiagram(){return this.context.createGain()}get duration(){return this.audioBuffer?this.audioBuffer.duration:0}get playbackSpeed(){return this.currentPlaybackSpeed}get currentTime(){return this.audioBuffer?this.currentState==="stopped"?0:this.currentState==="paused"?this.pausePlayTime:((this.context.currentTime-this.startPlayTime)*(this.playbackSpeed/100)+this.startPlayOffset)%this.audioBuffer.duration:0}updateOptions(n){this.currentState==="stopped"?(this.options=n,this.startPlayOffset=this.options.startPlayTime||0):k.warning("can not set audio source options")}startProcessAudioBuffer(){this.sourceNode&&this.stopProcessAudioBuffer(),this.sourceNode=this.createSourceNode(),this.startSourceNode(),this.currentState="playing"}pauseProcessAudioBuffer(){this.sourceNode&&this.currentState==="playing"&&(this.pausePlayTime=this.currentTime,this.sourceNode.onended=null,this.sourceNode.stop(),this.sourceNode.buffer=null,this.sourceNode=this.createSourceNode(),this.currentState="paused")}seekAudioBuffer(n){this.sourceNode&&(this.sourceNode.onended=null,this.currentState==="playing"&&this.sourceNode.stop(),this.sourceNode=this.createSourceNode(),this.currentState==="playing"?(this.startPlayOffset=n,this.startSourceNode()):this.currentState==="paused"&&(this.pausePlayTime=n))}resumeProcessAudioBuffer(){this.currentState==="paused"&&this.sourceNode&&(this.startPlayOffset=this.pausePlayTime,this.pausePlayTime=0,this.startSourceNode(),this.currentState="playing")}stopProcessAudioBuffer(){if(this.sourceNode){this.sourceNode.onended=null;try{this.sourceNode.stop()}catch{}this.reset()}}destroy(){this.audioBuffer=null,super.destroy()}setAudioBufferPlaybackSpeed(n){this.sourceNode&&(this.currentState==="playing"&&(this.startPlayOffset=this.currentTime,this.startPlayTime=this.context.currentTime),this.sourceNode.playbackRate.value=n/100),this.currentPlaybackSpeed=n}startSourceNode(){this.sourceNode&&this.sourceNode.buffer&&(this.sourceNode.start(0,this.startPlayOffset),this.startPlayTime=this.context.currentTime,this.sourceNode.onended=this.handleSourceNodeEnded.bind(this))}createSourceNode(){const n=this.context.createBufferSource();return n.buffer=this.audioBuffer,n.loop=!!this.options.loop,n.connect(this.outputNode),n.playbackRate.value=this.currentPlaybackSpeed/100,n}handleSourceNodeEnded(){if(this.currentLoopCount+=1,this.options.cycle&&this.options.cycle>this.currentLoopCount)return this.startPlayOffset=0,this.sourceNode=void 0,void this.startProcessAudioBuffer();this.reset()}reset(){this.startPlayOffset=this.options.startPlayTime||0,this.currentState="stopped",this.sourceNode&&(this.sourceNode.disconnect(),this.sourceNode=void 0),this.currentLoopCount=0}}const C5=new Map;function b5(e,n){if(e.length===0||n.length===0)return 1/0;const i=Qw(e),a=Qw(n);return Math.floor(a/i)}class RI{get rendFrameRate(){const n=Math.max(1,b5(this._render_interframe_delays_sizes,this._render_interframe_delays));return Math.floor(1e3/n)}get videoElementStatus(){return this._isInPage?this._videoElementStatus:Xi.DESTROYED}set videoElementStatus(n){n!==this._videoElementStatus&&(k.debug("[".concat(this.trackId,"] video-element-status change ").concat(this._videoElementStatus," => ").concat(n)),this._videoElementStatus=n)}get videoState(){return this._videoState}set videoState(n){var i;n!==this._videoState&&(this._videoState=n,(i=this.onVideoStateChanged)===null||i===void 0||i.call(this,this.videoState))}constructor(n){ye(this,"trackId",void 0),ye(this,"config",void 0),ye(this,"onFirstVideoFrameDecoded",void 0),ye(this,"onFirstVideoFrameRender",void 0),ye(this,"onVideoStateChanged",void 0),ye(this,"freezeTimeCounterList",[]),ye(this,"renderFreezeAccTime",0),ye(this,"renderFreezeAccTime2",0),ye(this,"isKeepLastFrame",!1),ye(this,"isDestroyed",!1),ye(this,"timeUpdatedCount",0),ye(this,"freezeTime",0),ye(this,"playbackTime",0),ye(this,"lastTimeUpdatedTime",0),ye(this,"autoplayFailed",!1),ye(this,"videoTrack",void 0),ye(this,"videoElement",void 0),ye(this,"cacheVideoElement",void 0),ye(this,"internal",!1),ye(this,"_render_interframe_delays",[]),ye(this,"_render_interframe_delays_sizes",[]),ye(this,"_videoState",hl.VideoStateStopped),ye(this,"videoElementCheckInterval",void 0),ye(this,"videoElementFreezeTimeout",void 0),ye(this,"_videoElementStatus",Xi.NONE),ye(this,"_isInPage",!0),ye(this,"isGettingVideoDimensions",!1),ye(this,"startGetVideoDimensions",()=>{const i=()=>{if(this.isGettingVideoDimensions=!0,this.videoElement.videoWidth*this.videoElement.videoHeight>4)return k.debug("[".concat(this.trackId,"] current video dimensions:"),this.videoElement.videoWidth,this.videoElement.videoHeight),void(this.isGettingVideoDimensions=!1);setTimeout(i,500)};!this.isGettingVideoDimensions&&i()}),ye(this,"autoResumeAfterInterruption",()=>{this.videoTrack&&this.videoTrack.readyState==="live"&&Wn.curState==="running"&&(k.debug("[track-".concat(this.trackId,"] video element paused, auto resume for ").concat(C3())),x3()?(this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):(this.videoElement.pause(),this.videoElement.play()))}),ye(this,"handleVideoEvents",i=>{switch(i.type){case"play":case"playing":i.type==="play"&&k.debug("[".concat(this.trackId,"] video element status: play")),this.startGetVideoDimensions(),this.videoElementStatus=Xi.PLAYING;break;case"loadeddata":if(this.videoState=hl.VideoStateStarting,this.onFirstVideoFrameRender&&this.onFirstVideoFrameRender(),this.onFirstVideoFrameDecoded&&this.onFirstVideoFrameDecoded(),this.cacheVideoElement){try{this.cacheVideoElement.srcObject=null,this.cacheVideoElement.remove()}catch{}this.cacheVideoElement=void 0}break;case"canplay":this.videoElementStatus=Xi.CANPLAY;break;case"stalled":this.videoElementStatus=Xi.STALLED;break;case"suspend":this.videoElementStatus=Xi.SUSPEND;break;case"pause":this.videoElementStatus=Xi.PAUSED,co()||Hs()||$i()&&this.autoplayFailed||!this.videoTrack||this.videoTrack.readyState!=="live"||(k.debug("[track-".concat(this.trackId,"] video element paused, auto resume")),this.videoElement.play());break;case"waiting":this.videoElementStatus=Xi.WAITING;break;case"abort":this.videoElementStatus=Xi.ABORT;break;case"ended":this.videoElementStatus=Xi.ENDED;break;case"emptied":this.videoElementStatus=Xi.EMPTIED;break;case"error":{const a=this.videoElement.error;a&&(this.videoElementStatus=Xi.ERROR,k.error("[".concat(this.trackId,"] media error: ").concat(a.message," (").concat(a.code,")")));break}case"timeupdate":{const a=performance.now();if(this.timeUpdatedCount+=1,this.timeUpdatedCount<10)return void(this.lastTimeUpdatedTime=a);const l=a-this.lastTimeUpdatedTime,u=this.lastTimeUpdatedTime;if(this.lastTimeUpdatedTime=a,pl.lastVisibleTime<pl.lastHiddenTime||u<pl.lastHiddenTime||u<pl.lastVisibleTime||this.isSkipCalcRenderFreezeTime())return;for(l>Q("VIDEO_FREEZE_DURATION")&&(this.freezeTime+=l),this.playbackTime+=l;this.playbackTime>=6e3;){this.playbackTime-=6e3;const h=Math.min(6e3,this.freezeTime);this.freezeTimeCounterList.push(h),this.freezeTime=Math.max(0,this.freezeTime-6e3)}break}}}),ye(this,"autoResumeAfterInterruptionOnIOS15_16",()=>{this.videoTrack&&this.videoTrack.readyState==="live"&&(k.debug("[track-".concat(this.trackId,"] video element paused, auto resume for ").concat(C3())),x3()?(this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):(this.videoElement.pause(),this.videoElement.play()))}),this.trackId=n.trackId,this.config=n,n.element instanceof HTMLVideoElement?this.videoElement=n.element:this.videoElement=document.createElement("video"),Wn.on(Li.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),Wn.on(Li.IOS_15_16_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15_16)}getVideoElement(){return this.videoElement}getContainerElement(){var n;return(n=this.videoElement.parentElement)!==null&&n!==void 0?n:void 0}updateConfig(n){this.config=n,this.trackId=n.trackId,n.element!==this.videoElement&&(this.destroy(),this.videoElement=n.element),this.videoTrack&&this.initVideoElement()}updateVideoTrack(n){this.videoTrack!==n&&(this.videoTrack=n,this.initVideoElement())}play(n){const i=this.videoElement.play();i&&i.catch&&i.catch(l=>{n&&OV(n,"video",l.message,this.trackId),l.name==="NotAllowedError"?(k.warning("detected video element autoplay failed",l),this.autoplayFailed=!0,this.handleAutoPlayFailed()):k.warning("[".concat(this.trackId,"] play warning: "),l)});const a=yn();if((a.name==="Safari"&&Number(a.version)===15||Vf())&&i&&i.then){const l=()=>{this.config.mirror&&(this.videoElement.style.transform="rotateY(180deg)")};i.then(l).catch(l)}}getCurrentFrame(){const n=document.createElement("canvas");n.width=this.videoElement.videoWidth,n.height=this.videoElement.videoHeight;const i=n.getContext("2d");if(!i)return k.error("create canvas context failed!"),new ImageData(2,2);i.drawImage(this.videoElement,0,0,n.width,n.height);const a=i.getImageData(0,0,n.width,n.height);return n.remove(),a}async getCurrentFrameToUint8Array(n){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const a=document.createElement("canvas");a.width=this.videoElement.videoWidth,a.height=this.videoElement.videoHeight;const l=a.getContext("2d");return l?(l.drawImage(this.videoElement,0,0,a.width,a.height),new et((u,h)=>{a.toBlob(async p=>{if(a.remove(),p){const m=await UV(p);u({buffer:m,width:a.width,height:a.height})}else h(new Re(X.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED))},n,i<0?.1:i>1?1:i)})):await TI(n)}destroy(){this.isDestroyed=!0,Wn.off(Li.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),Wn.off(Li.IOS_15_16_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15_16),this.videoElement.srcObject=null,this.resetVideoElement(),this.freezeTimeCounterList=[],this.videoState=hl.VideoStateStopped}initVideoElement(){if(this.videoElementStatus=Xi.INIT,!this.videoElementCheckInterval&&(T5.forEach(u=>{this.videoElement.addEventListener(u,this.handleVideoEvents)}),this.videoElementCheckInterval=window.setInterval(()=>{this._isInPage=function(u){return u!==document.body&&document.body.contains(u)}(this.videoElement)},1e3),Q("ENABLE_VIDEO_FRAME_CALLBACK"))){var n,i;let u;const h=()=>{document.visibilityState==="visible"&&(document.removeEventListener("visibilitychange",h),this.videoElementFreezeTimeout=window.setTimeout(p,Q("VIDEO_FREEZE_DURATION")))},p=()=>{this.videoElementFreezeTimeout=void 0,this.videoState===hl.VideoStateDecoding&&(document.visibilityState==="visible"?this.videoState=hl.VideoStateFrozen:document.addEventListener("visibilitychange",h))},m=(E,S)=>{if(this.videoElementStatus===Xi.PLAYING){if(u){const O=S.presentationTime-u.presentationTime,H=S.presentedFrames-u.presentedFrames;this._render_interframe_delays_sizes.push(H),this._render_interframe_delays.push(O);const B=Qw(this._render_interframe_delays_sizes),j=B-this._render_interframe_delays_sizes[0];if(B>30&&j>5&&(this._render_interframe_delays_sizes.shift(),this._render_interframe_delays.shift()),this.videoState===hl.VideoStateStarting&&(this.videoState=hl.VideoStateDecoding),this.videoState===hl.VideoStateDecoding&&this.onVideoStateChanged&&(this.videoElementFreezeTimeout&&window.clearTimeout(this.videoElementFreezeTimeout),this.videoElementFreezeTimeout=window.setTimeout(p,Q("VIDEO_FREEZE_DURATION"))),O<Q("VIDEO_FREEZE_DURATION")&&this.videoState===hl.VideoStateFrozen&&(this.videoState=hl.VideoStateDecoding),O>Q("VIDEO_FREEZE_DURATION")&&pl.lastVisibleTime>=pl.lastHiddenTime&&u.timestamp>pl.lastVisibleTime&&u.timestamp>pl.lastHiddenTime){const q=Math.min(66,b5(this._render_interframe_delays_sizes,this._render_interframe_delays)),Y=Math.max(0,O-(H-1)*q);this.renderFreezeAccTime2+=Y>q?Y:0,this.renderFreezeAccTime+=O}}u=rr(rr({},S),{},{timestamp:E})}else this.isSkipCalcRenderFreezeTime()&&(u=rr(rr({},S),{},{timestamp:E}));var R,w;Q("ENABLE_VIDEO_FRAME_CALLBACK")&&((R=(w=this.videoElement).requestVideoFrameCallback)===null||R===void 0||R.call(w,m))};(n=(i=this.videoElement).requestVideoFrameCallback)===null||n===void 0||n.call(i,m)}this.videoElement.controls=!1,this.videoElement.setAttribute("playsinline",""),H_()&&!Q("HIDE_NO_POSTER")&&(this.videoElement.poster="noposter");const a=yn();a.name==="Safari"&&Number(a.version)===15||Vf()||!this.config.mirror||(this.videoElement.style.transform="rotateY(180deg)"),this.config.fit?this.videoElement.style.objectFit=this.config.fit:this.videoElement.style.objectFit="cover",this.videoElement.setAttribute("muted",""),this.videoElement.muted=!0,this.videoElement.srcObject&&this.videoElement.srcObject instanceof MediaStream?this.videoElement.srcObject.getVideoTracks()[0]!==this.videoTrack&&(this.videoElement.srcObject=this.videoTrack?new MediaStream([this.videoTrack]):null,Or()&&this.videoElement.load()):(this.videoElement.srcObject=this.videoTrack?new MediaStream([this.videoTrack]):null,Or()&&this.videoElement.load());const l=this.videoElement.play();l!==void 0&&l.catch(u=>{k.debug("[".concat(this.trackId,"] playback interrupted"),u.toString())})}resetVideoElement(){T5.forEach(n=>{this.videoElement&&this.videoElement.removeEventListener(n,this.handleVideoEvents)}),this.videoElementCheckInterval&&(window.clearInterval(this.videoElementCheckInterval),this.videoElementCheckInterval=void 0),this.videoElementStatus=Xi.NONE}isSkipCalcRenderFreezeTime(){return this.videoElementStatus===Xi.DESTROYED||this.internal}handleAutoPlayFailed(){const n=i=>{i.preventDefault(),this.videoElement.play().then(()=>{k.debug("[".concat(this.trackId,"] Video element for trackId:").concat(this.trackId," autoplay resumed."))}).catch(a=>{k.error(a)}),this.autoplayFailed=!1,y0()?document.body.removeEventListener("click",n,!0):(document.body.removeEventListener("touchstart",n,!0),document.body.removeEventListener("mousedown",n,!0))};y0()?document.body.addEventListener("click",n,!0):(document.body.addEventListener("touchstart",n,!0),document.body.addEventListener("mousedown",n,!0)),AV()}}const T5=["play","playing","loadeddata","canplay","pause","stalled","suspend","waiting","abort","emptied","ended","timeupdate","error"];class wI extends RI{constructor(n){let i=arguments.length>1&&arguments[1]!==void 0&&arguments[1];super(n),ye(this,"container",void 0),ye(this,"slot",void 0),this.slot=n.element,this.internal=i,this.updateConfig(n)}updateConfig(n){this.config=n,this.trackId=n.trackId;const i=n.element;var a;!this.internal||this.slot?(i!==this.slot&&(this.destroy(),this.slot=i),this.createElements()):(this.slot=i,i&&this.container?(this.internal=!1,this.container.id="agora-video-player-".concat(this.trackId),this.videoElement.id="video_".concat(this.trackId),this.config.fit?this.videoElement.style.objectFit=this.config.fit:this.videoElement.style.objectFit="cover",(a=this.slot)===null||a===void 0||a.appendChild(this.container)):this.createElements())}updateVideoTrack(n){this.videoTrack!==n&&(this.videoTrack=n,this.createElements())}play(n){var i;(i=this.container)!==null&&i!==void 0&&i.contains(this.videoElement)&&super.play(n)}getCurrentFrame(){var n;return(n=this.container)!==null&&n!==void 0&&n.contains(this.videoElement)?super.getCurrentFrame():new ImageData(2,2)}async getCurrentFrameToUint8Array(n){var i;let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return(i=this.container)!==null&&i!==void 0&&i.contains(this.videoElement)?await super.getCurrentFrameToUint8Array(n,a):await TI(n)}destroy(){if(super.destroy(),this.videoElement.remove(),this.videoElement=document.createElement("video"),this.container){try{var n;this.container.remove(),(n=this.slot)===null||n===void 0||n.removeChild(this.container)}catch{}this.container=void 0}}createElements(){var n;this.container||(this.container=document.createElement("div")),this.container.id="agora-video-player-".concat(this.trackId),this.container.style.width="100%",this.container.style.height="100%",this.container.style.position="relative",this.container.style.overflow="hidden",this.videoTrack?(this.container.style.backgroundColor="black",Q("KEEP_LAST_FRAME")&&this.isKeepLastFrame&&this.videoElement.paused&&this.resetVideoElement(),this.mountedVideoElement()):this.unmountedVideoElement(),(n=this.slot)===null||n===void 0||n.appendChild(this.container)}mountedVideoElement(){var n;!this.container||(n=this.container)!==null&&n!==void 0&&n.contains(this.videoElement)||this.container.appendChild(this.videoElement),super.initVideoElement(),this.videoElement.id="video_".concat(this.trackId),this.videoElement.className="agora_video_player",this.videoElement.style.width="100%",this.videoElement.style.height="100%",this.videoElement.style.position="absolute",this.videoElement.style.left="0",this.videoElement.style.top="0"}unmountedVideoElement(){var n;if((n=this.container)!==null&&n!==void 0&&n.contains(this.videoElement)){super.resetVideoElement();try{this.container&&this.container.removeChild(this.videoElement)}catch{}this.videoElement=document.createElement("video")}}resetVideoElement(){var n;(n=this.container)!==null&&n!==void 0&&n.contains(this.videoElement)&&(super.resetVideoElement(),this.cacheVideoElement=this.videoElement,this.videoElement=document.createElement("video"))}getContainerElement(){return this.container}}var R5,w5,I5,A5,O5,x5,N5,P5,D5,L5,k5,M5,F5,U5,B5,V5,j5,$5,H5,z5,W5,G5,K5,Y5,q5,X5,J5,Q5,hn,Z5,e6,t6,n6,r6,i6,o6,a6,qa;let sr=(R5=It({argsMap:(e,n,i)=>[e.getTrackId(),typeof n=="string"?n:n instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement",i]}),w5=kr(),I5=It({argsMap:e=>[e.getTrackId()]}),A5=zf("LocalVideoTrack","_enabledMutex"),O5=It({argsMap:(e,n)=>[e.getTrackId(),n]}),x5=kr(),N5=zf("LocalVideoTrack","_enabledMutex"),P5=It({argsMap:(e,n)=>[e.getTrackId(),n]}),D5=kr(),L5=It({argsMap:(e,n)=>[e.getTrackId(),n,e._saveEncodeBitrateRatio]}),k5=kr(),M5=It({argsMap:(e,n)=>[e.getTrackId(),n]}),F5=kr(),U5=kr(),B5=It({argsMap:(e,n,i)=>[e.getTrackId(),n,i]}),V5=kr(),j5=kr(),$5=kr(),H5=It({argsMap:e=>[e.getTrackId()]}),z5=kr(),W5=kr(),G5=kr(),K5=kr(),Y5=kr(),q5=It({argsMap:(e,n)=>[e.getTrackId(),n.name]}),X5=It({argsMap:e=>[e.getTrackId()]}),J5=It({argsMap:e=>[e.getTrackId()]}),Q5=It({argsMap:(e,n,i)=>[e.getTrackId(),n.label,i]}),hn=class eK extends Qf{get videoHeight(){if($i()){const{height:n}=this._mediaStreamTrack.getSettings();return this._videoHeight=n,this._videoHeight}return this._videoHeight}get videoWidth(){if($i()){const{width:n}=this._mediaStreamTrack.getSettings();return this._videoWidth=n,this._videoWidth}return this._videoWidth}get isPlaying(){return!(!this._player||this._player.videoElementStatus!==Xi.PLAYING)}get processorDestination(){return this._processorDestination}get processorContext(){return this._processorContext}set processorContext(n){this._processorContext=n}get __className__(){return"LocalVideoTrack"}constructor(n,i,a,l,u,h){if(super(n,u),ye(this,"trackMediaType",Jf.VIDEO),ye(this,"_player",void 0),ye(this,"isUseScaleResolutionDownBy",!1),ye(this,"_videoVisibleTimer",null),ye(this,"_previousVideoVisibleStatus",void 0),ye(this,"_clearPreviousVideoVisibleStatus",()=>this._previousVideoVisibleStatus=void 0),ye(this,"_encoderConfig",void 0),ye(this,"_scalabilityMode",{numSpatialLayers:1,numTemporalLayers:1}),ye(this,"_optimizationMode",void 0),ye(this,"_saveEncodeBitrateRatio",1),ye(this,"_videoHeight",void 0),ye(this,"_videoWidth",void 0),ye(this,"_forceBitrateLimit",void 0),ye(this,"_enabled",!0),ye(this,"_processorDestination",void 0),ye(this,"_processorContext",void 0),$i()){const{width:p,height:m}=n.getSettings();this._videoWidth=p,this._videoHeight=m}else this.updateMediaStreamTrackResolution();if(this._scalabilityMode=a,this._optimizationMode=l,this._hints=h||[],i&&this._hints.indexOf(qn.CUSTOM_TRACK)!==-1?this._encoderConfig=vr(i):this._encoderConfig=i,this._hints.indexOf(qn.SCREEN_TRACK)===-1)this.updateBitrateFromProfile();else if(Bw(An.CHROME,115)&&j_().indexOf("Windows")!==-1){const p=function(m,E){if("VideoFrame"in window&&"TransformStream"in window&&Rn().supportWebRTCInsertableStream){const S=new MediaStreamTrackProcessor(m),R=new MediaStreamTrackGenerator({kind:"video"});let w,O,H=Date.now();const B=()=>{j&&(clearInterval(j),j=void 0),w&&(w.close(),w=void 0),m.stop(),O=void 0,R.removeEventListener("ended",B)};let j=window.setInterval(()=>{if(O&&w&&Date.now()-H>(E??1e3))try{R.readyState==="live"?O.enqueue(w.clone()):B()}catch{B()}},E??1e3);const q=new TransformStream({transform:(Y,Z)=>{R.readyState==="live"?(O=Z,H=Date.now(),w===void 0?(w=Y,Z.enqueue(Y.clone())):(Z.enqueue(w),w=Y)):Y.close()}});return R.addEventListener("ended",B),S.readable.pipeThrough(q).pipeTo(R.writable),R}}(n);p&&(k.info("local screen video track begin to inject frame"),this._mediaStreamTrack=p)}i&&this._hints.indexOf(qn.CUSTOM_TRACK)!==-1&&this.setEncoderConfiguration(i),this._processorContext=new NV(this.getTrackId(),"local"),this._processorDestination=new xV(this.processorContext),this.bindProcessorDestinationEvents()}play(n){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof n=="string"){const l=document.getElementById(n);l?n=l:(k.warning("[".concat(this.getTrackId(),'] can not find "#').concat(n,'" element, use document.body')),n=document.body)}k.debug("[".concat(this.getTrackId(),"] start video playback in ").concat(n instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement"),JSON.stringify(i));const a=rr(rr(rr({},this._getDefaultPlayerConfig()),i),{},{trackId:this.getTrackId(),element:n});this._player?this._player.updateConfig(a):(n instanceof HTMLVideoElement?this._player=new RI(a):this._player=new wI(a),this._player.updateVideoTrack(this._mediaStreamTrack)),this._player.play(),this._videoVisibleTimer&&window.clearInterval(this._videoVisibleTimer),this._clearPreviousVideoVisibleStatus(),this._videoVisibleTimer=window.setInterval(()=>{try{const l=this.getVideoElementVisibleStatus();this.safeEmit(Xf.VIDEO_ELEMENT_VISIBLE_STATUS,l)}catch{}},Q("CHECK_VIDEO_VISIBLE_INTERVAL"))}stop(){this._player&&(this._videoVisibleTimer&&(window.clearInterval(this._videoVisibleTimer),this._videoVisibleTimer=null),this._clearPreviousVideoVisibleStatus(),this._player.destroy(),this._player=void 0,k.debug("[".concat(this.getTrackId(),"] stop video playback")))}async setEnabled(n,i){if(!i){if(n===this._enabled)return;this.stateCheck("enabled",n)}if(k.info("[".concat(this.getTrackId(),"] start setEnabled"),n),!n){this._originMediaStreamTrack.enabled=!1;try{await Qn(this,at.NEED_DISABLE_TRACK,this)}catch(a){throw k.error("[".concat(this.getTrackId(),"] setEnabled to false error"),a.toString()),a}return i||(this._enabled=!1),void k.info("[".concat(this.getTrackId(),"] setEnabled to false success"))}this._originMediaStreamTrack.enabled=!0;try{await Qn(this,at.NEED_ENABLE_TRACK,this)}catch(a){throw k.error("[".concat(this.getTrackId(),"] setEnabled to true error"),a.toString()),a}k.info("[".concat(this.getTrackId(),"] setEnabled to true success")),i||(this._enabled=!0)}async setMuted(n){n!==this._muted&&(this.stateCheck("muted",n),this._muted=n,this._originMediaStreamTrack.enabled=!n,k.debug("[".concat(this.getTrackId(),"] start set muted: ").concat(n)),n?await Qn(this,at.NEED_MUTE_TRACK,this):await Qn(this,at.NEED_UNMUTE_TRACK,this))}async setSaveEncodeBitrateRatio(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this._saveEncodeBitrateRatio;if(this._saveEncodeBitrateRatio!==1&&this._encoderConfig&&this._encoderConfig.bitrateMax&&this._encoderConfig.bitrateMin){this._encoderConfig.bitrateMin=Math.floor(this._encoderConfig.bitrateMin*n),this._encoderConfig.bitrateMax=Math.floor(this._encoderConfig.bitrateMax*n),k.debug("[".concat(this.getTrackId(),"] set save encode bitrate ratio, ").concat(n)),this._saveEncodeBitrateRatio=1;try{await Qn(this,at.NEED_UPDATE_VIDEO_ENCODER,this)}catch(i){return i.throw(k)}}}async setEncoderConfiguration(n,i){if(!this._enabled)throw new Re(X.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled");if(n=Gs(n),Q("USE_STANDARD_BITRATE_DEFAULT")&&(delete n.bitrateMax,delete n.bitrateMin),this._forceBitrateLimit&&(n.bitrateMax=this._forceBitrateLimit.max_bitrate?this._forceBitrateLimit.max_bitrate:n.bitrateMax,n.bitrateMin=this._forceBitrateLimit.min_bitrate?this._forceBitrateLimit.min_bitrate:n.bitrateMin),n.width||n.height||n.frameRate){const a=rS({encoderConfig:n});($i()||co()||Hs())&&(a.deviceId=void 0),k.debug("[".concat(this.getTrackId(),"] setEncoderConfiguration applyConstraints"),JSON.stringify(n),JSON.stringify(a));try{await this._originMediaStreamTrack.applyConstraints(a),this.updateMediaStreamTrackResolution()}catch(l){const u=new Re(X.UNEXPECTED_ERROR,l.toString());throw k.error("[".concat(this.getTrackId(),"] applyConstraints error"),u.toString()),u}}this._encoderConfig=n,this._hints.indexOf(qn.SCREEN_TRACK)===-1&&this.updateBitrateFromProfile();try{await Qn(this,at.NEED_UPDATE_VIDEO_ENCODER,this)}catch(a){return a.throw(k)}}getStats(){return Fu(()=>{k.warning("[deprecated] LocalVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalVideoStats instead")},"localVideoTrackGetStatsWarning"),ja(this,at.GET_STATS)||rr({},vI)}async setBeautyEffect(n){k.error("LocalVideoTrack.setBeautyEffect was deprecated, please migrate to agora-extension-beauty-effect")}getCurrentFrameData(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}async getCurrentFrameImage(n){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return this._player?this._player.getCurrentFrameToUint8Array(n,i):await TI(n)}async findClosestProfile(){const{width:n,height:i,frameRate:a}=this.getMediaStreamTrackSettings(),{width:l,height:u,frameRate:h}=this._encoderConfig||{},p=Hf(this._videoWidth||n||l||0),m=Hf(this._videoHeight||i||u||0),E=function(S,R,w){if(!Array.isArray(Q("VIDEO_ENCODER_CONFIG_LIST"))||Q("VIDEO_ENCODER_CONFIG_LIST").length===0)return!1;const O=Math.min(S,R);return!(O>=480)&&rr(rr({},Q("VIDEO_ENCODER_CONFIG_LIST").find(H=>H.height>O)),{},{frameRate:w})}(p,m,Hf(a||h||15));if(E)return k.debug("[".concat(this.getTrackId(),"] find closest profile, ").concat(p,"x").concat(m," => ").concat(JSON.stringify(E))),this.setEncoderConfiguration(E)}async setBitrateLimit(n){k.debug("[".concat(this.getTrackId(),"] set bitrate limit, ").concat(JSON.stringify(n))),n&&(this._forceBitrateLimit=n,this._encoderConfig&&(this._encoderConfig.bitrateMax?this._encoderConfig.bitrateMax=this._encoderConfig.bitrateMax<n.max_bitrate?this._encoderConfig.bitrateMax:n.max_bitrate:this._encoderConfig.bitrateMax=n.max_bitrate,this._encoderConfig.bitrateMin,this._encoderConfig.bitrateMin=n.min_bitrate))}async setOptimizationMode(n){if(n!=="motion"&&n!=="detail"&&n!=="balanced")return void k.error(X.INVALID_PARAMS,"optimization mode must be motion, detail or balanced");const i=this._optimizationMode;try{this._optimizationMode=n,await Qn(this,at.NEED_UPDATE_VIDEO_SEND_PARAMETERS,this)}catch(a){throw this._optimizationMode=i,k.error("[".concat(this.getTrackId(),"] set optimization mode failed"),a.toString()),a}k.info("[".concat(this.getTrackId(),"] set optimization mode success (").concat(n,")"))}setScalabiltyMode(n){if(n.numSpatialLayers===1&&n.numTemporalLayers!==1)return k.error(X.INVALID_PARAMS,"scalability mode currently not supported, no SVC."),void(this._scalabilityMode={numSpatialLayers:1,numTemporalLayers:1});this._scalabilityMode=n,k.info("[".concat(this.getTrackId(),"] set scalability mode success (").concat(n,")"))}updateMediaStreamTrackResolution(){LV(this._originMediaStreamTrack).then(n=>{let[i,a]=n;this._videoHeight=a,this._videoWidth=i}).catch(G_)}_updatePlayerSource(){this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}_getDefaultPlayerConfig(){return{fit:"contain"}}async setSenderConfiguration(n){if(!this._enabled)throw new Re(X.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled");k.debug("[".concat(this.getTrackId(),"] setSenderConfiguration applyConstraints"),JSON.stringify(n)),n=Gs(n),this._forceBitrateLimit&&(n.bitrateMax=this._forceBitrateLimit.max_bitrate?this._forceBitrateLimit.max_bitrate:n.bitrateMax,n.bitrateMin=this._forceBitrateLimit.min_bitrate?this._forceBitrateLimit.min_bitrate:n.bitrateMin),this._encoderConfig=n,this._hints.indexOf(qn.SCREEN_TRACK)===-1&&this.updateBitrateFromProfile();try{await Qn(this,at.NEED_UPDATE_VIDEO_ENCODER,this)}catch(i){return i.throw(k)}}updateBitrateFromProfile(){if(!this._encoderConfig)return;const{width:n,height:i,frameRate:a}=this.getMediaStreamTrackSettings();if(!n||!i||!a)return;const{bitrateMax:l,bitrateMin:u}=this._encoderConfig;if(u==null||l==null){const{max:h,min:p}=function(m,E,S,R,w){const O=Q("BITRATE_ADAPTER_TYPE");if(O==="DEFAULT_BITRATE")return{min:R,max:w};if(w===void 0){const H=Math.floor(200*Math.pow(S/15,.6)*Math.pow(m*E/640/360,.75));w=O==="STANDARD_BITRATE"?4*H:2*H,R=R??H}else R=R??Math.floor(w/10);return{min:R,max:w}}(n,i,a,u,l);if(this._encoderConfig.bitrateMin=p,this._encoderConfig.bitrateMax=h,Q("VIDEO_STANDARD_BITRATE_VERSION")&&u==null&&l==null){const[m,E]=function(S,R,w){const O=4*Math.floor(2e5*Math.pow(w/15,.6)*Math.pow(S*R/230400,.75)),H=S*R,B=new Map([[19200,.9],[230400,.85],[518400,.75],[921600,.7],[2073600,.6],[3686400,.5]]),j=new Map([[230400,.95],[518400,.9],[921600,.85],[2073600,.8]]);let q=ba(B).call(B).next().value,Y=1;if(B.has(H))q=B.get(H);else{var Z;const Be=$d(Z=Array.from(B.entries())).call(Z,(sn,Lt)=>{let[kn]=sn,[Nn]=Lt;return kn-Nn}),nn=Be.find(sn=>{let[Lt]=sn;return Lt>H});if(nn){const sn=Be.indexOf(nn);if(sn>0){const Lt=Be[sn-1],kn=(H-Lt[0])/(nn[0]-Lt[0]);q=Lt[1]+kn*(nn[1]-Lt[1])}else q=nn[1]}else q=Be[Be.length-1][1]}if(j.has(H))Y=j.get(H);else{var pe;const Be=$d(pe=Array.from(j.entries())).call(pe,(sn,Lt)=>{let[kn]=sn,[Nn]=Lt;return kn-Nn}),nn=Be.find(sn=>{let[Lt]=sn;return Lt>H});if(nn){const sn=Be.indexOf(nn);if(sn>0){const Lt=Be[sn-1],kn=(H-Lt[0])/(nn[0]-Lt[0]);Y=Lt[1]+kn*(nn[1]-Lt[1])}else Y=nn[1]}else Y=Be[Be.length-1][1]}const he=Q("VIDEO_NEW_BITRATE_RATIO");he&&he>0&&(q=he/100);const re=Math.floor(O*q),Se=Math.floor(65e4*Math.pow(S*R/230400,.5)*Math.pow(w/15,.69));let Ae=re;const Ne=Q("VIDEO_STANDARD_BITRATE_VERSION");return Ne&&Ne>0&&(Ne===1?Ae=O:Ne===2?Ae=re:Ne===3&&(Ae=Se)),[Math.floor(Ae/1e3),Y]}(n,i,a);this._encoderConfig.bitrateMax=m,this._encoderConfig.bitrateMin=p?Math.min(p,m):m,this._saveEncodeBitrateRatio=E,k.debug("[".concat(this.getTrackId(),"] update new bitrate from profile, [w: ").concat(n,", h: ").concat(i,", fps: ").concat(a,"] => [brMax: ").concat(this._encoderConfig.bitrateMax,", brMin: ").concat(this._encoderConfig.bitrateMin,", save_bitrate_ratio: ").concat(this._saveEncodeBitrateRatio,"]"))}else k.debug("[".concat(this.getTrackId(),"] update bitrate from profile, [w: ").concat(n,", h: ").concat(i,", fps: ").concat(a,"] => [brMax: ").concat(h,", brMin: ").concat(p,"]")),this._saveEncodeBitrateRatio=1}}getVideoElementVisibleStatus(){try{var n,i;const a=this==null||(n=this._player)===null||n===void 0?void 0:n.getContainerElement(),l={track:this,element:this==null||(i=this._player)===null||i===void 0?void 0:i.getVideoElement(),slot:a==null?void 0:a.parentElement},{element:u,slot:h}=l;if(this.isPlaying&&u instanceof HTMLVideoElement&&h instanceof HTMLElement){const p=k3.checkOneElementVisible(u),m=Object.assign({},p);if(m.visible!==this._previousVideoVisibleStatus){this._previousVideoVisibleStatus=m.visible;const E=ct.reportApiInvoke(null,{tag:gr.TRACER,name:Ur.LOCAL_VIDEO_TRACK_GET_VIDEO_VISIBLE,options:[this.getTrackId()]});m.visible?E.onSuccess("Video is visible"):E.onSuccess("Invisible because of ".concat(m.reason))}return m}return}catch(a){throw new Re(X.GET_VIDEO_ELEMENT_VISIBLE_ERROR,a.message)}}async renewMediaStreamTrack(n){}pipe(n){if(this.processor===n)return n;if(n._source)throw new Re(X.INVALID_OPERATION,"Processor ".concat(n.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=n,this.processor._source=this,n.updateInput({track:this._originMediaStreamTrack,context:this.processorContext}),n}unpipe(){if(!this.processor)return;const n=this.processor;this.processor._source=void 0,this.processor=void 0,n.reset()}close(){super.close(),this.unbindProcessorDestinationEvents(),this.unbindProcessorContextEvents(),this.unpipe(),this.processorDestination._source&&this.processorDestination._source.unpipe()}clone(n){let i=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],a=this._encoderConfig;n&&(a=rr(rr({},a),Gs(n))),a=Jd(a);const l=Zn(8,"track-video-cloned-"),u=new eK(i?this._mediaStreamTrack.clone():this._mediaStreamTrack,a,Jd(this._scalabilityMode),this._optimizationMode,l,Jd(this._hints));return n&&a&&u.setEncoderConfiguration(a),k.debug("clone video track from ".concat(this.getTrackId()," to ").concat(l,", clone ").concat(i)),u}async replaceTrack(n,i){if(!(n instanceof MediaStreamTrack))throw new Re(X.INVALID_PARAMS,"track should be an instance of MediaStreamTrack");if(n.kind!=="video")throw new Re(X.INVALID_PARAMS,"track should be a video MediaStreamTrack");await this._updateOriginMediaStreamTrack(n,i,!0),this.updateMediaStreamTrackResolution()}sendSeiData(n){if(Fu(()=>{ct.reportApiInvoke(null,{name:Ur.LOCAL_VIDEO_SEND_SEI_DATA,options:[],tag:gr.TRACER}).onSuccess("")},this._mediaStreamTrack.id||this.getTrackId()),!Q("ENABLE_VIDEO_SEI")||!Q("ENABLE_ENCODED_TRANSFORM"))return void k.warning('To send/receive SEI, please call AgoraRTC.setParameter("ENABLE_VIDEO_SEI", true) before instantiate IAgoraRtcClient');if(n instanceof Uint8Array==0)return new Re(X.INVALID_PARAMS,"Invalid argument type, ILocalVideoTrack.sendSeiData() only accept Uint8Array argument.").throw();const i=this.getRTCRtpTransceiver();if(!i)return void k.warning("Video track is not published, SEI can not be send");const a=i.sender.getParameters();if(a.codecs.length===0)return;const l=a.codecs[0].mimeType.toLocaleLowerCase();l==="video/h264"||l==="video/h265"?this.safeEmit("sei-to-send",n):k.warning("SEI is not supported by ".concat(l))}bindProcessorDestinationEvents(){this.processorDestination.on(Po.ON_TRACK,async n=>{n?n!==this._mediaStreamTrack&&(this._mediaStreamTrack=n,this._updatePlayerSource(),await Qn(this,at.NEED_REPLACE_TRACK,this)):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await Qn(this,at.NEED_REPLACE_TRACK,this))})}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(Po.ON_TRACK)}unbindProcessorContextEvents(){this.processorContext.removeAllListeners(za.REQUEST_UPDATE_CONSTRAINTS),this.processorContext.removeAllListeners(za.REQUEST_CONSTRAINTS)}},_n(hn.prototype,"play",[R5,w5],Object.getOwnPropertyDescriptor(hn.prototype,"play"),hn.prototype),_n(hn.prototype,"stop",[I5],Object.getOwnPropertyDescriptor(hn.prototype,"stop"),hn.prototype),_n(hn.prototype,"setEnabled",[A5,O5,x5],Object.getOwnPropertyDescriptor(hn.prototype,"setEnabled"),hn.prototype),_n(hn.prototype,"setMuted",[N5,P5,D5],Object.getOwnPropertyDescriptor(hn.prototype,"setMuted"),hn.prototype),_n(hn.prototype,"setSaveEncodeBitrateRatio",[L5,k5],Object.getOwnPropertyDescriptor(hn.prototype,"setSaveEncodeBitrateRatio"),hn.prototype),_n(hn.prototype,"setEncoderConfiguration",[M5,F5],Object.getOwnPropertyDescriptor(hn.prototype,"setEncoderConfiguration"),hn.prototype),_n(hn.prototype,"getStats",[U5],Object.getOwnPropertyDescriptor(hn.prototype,"getStats"),hn.prototype),_n(hn.prototype,"setBeautyEffect",[B5,V5],Object.getOwnPropertyDescriptor(hn.prototype,"setBeautyEffect"),hn.prototype),_n(hn.prototype,"getCurrentFrameData",[j5],Object.getOwnPropertyDescriptor(hn.prototype,"getCurrentFrameData"),hn.prototype),_n(hn.prototype,"getCurrentFrameImage",[$5],Object.getOwnPropertyDescriptor(hn.prototype,"getCurrentFrameImage"),hn.prototype),_n(hn.prototype,"findClosestProfile",[H5,z5],Object.getOwnPropertyDescriptor(hn.prototype,"findClosestProfile"),hn.prototype),_n(hn.prototype,"setBitrateLimit",[W5],Object.getOwnPropertyDescriptor(hn.prototype,"setBitrateLimit"),hn.prototype),_n(hn.prototype,"setOptimizationMode",[G5],Object.getOwnPropertyDescriptor(hn.prototype,"setOptimizationMode"),hn.prototype),_n(hn.prototype,"setScalabiltyMode",[K5],Object.getOwnPropertyDescriptor(hn.prototype,"setScalabiltyMode"),hn.prototype),_n(hn.prototype,"updateMediaStreamTrackResolution",[Y5],Object.getOwnPropertyDescriptor(hn.prototype,"updateMediaStreamTrackResolution"),hn.prototype),_n(hn.prototype,"pipe",[q5],Object.getOwnPropertyDescriptor(hn.prototype,"pipe"),hn.prototype),_n(hn.prototype,"unpipe",[X5],Object.getOwnPropertyDescriptor(hn.prototype,"unpipe"),hn.prototype),_n(hn.prototype,"close",[J5],Object.getOwnPropertyDescriptor(hn.prototype,"close"),hn.prototype),_n(hn.prototype,"replaceTrack",[Q5],Object.getOwnPropertyDescriptor(hn.prototype,"replaceTrack"),hn.prototype),hn),iS=(Z5=It({argsMap:(e,n)=>[e.getTrackId(),n]}),e6=kr(),t6=zf("CameraVideoTrack","_enabledMutex"),n6=It({argsMap:(e,n)=>[e.getTrackId(),n]}),r6=kr(),i6=It({argsMap:(e,n)=>[e.getTrackId(),n]}),o6=kr(),a6=It({argsMap:e=>[e.getTrackId()]}),qa=class tK extends sr{get __className__(){return"CameraVideoTrack"}constructor(n,i,a,l,u,h){super(n,Gs(i.encoderConfig),l,u,h),ye(this,"_config",void 0),ye(this,"_originalConstraints",void 0),ye(this,"_constraints",void 0),ye(this,"_enabled",!0),ye(this,"_deviceName","default"),ye(this,"tryResumeVideoForIOS15_16WeChat",async()=>{(Vf()||zw())&&!function(){const p=yn();if(p.os!==Ci.IOS||!p.osVersion)return!1;const m=p.osVersion.split(".");return Number(m[0])===15&&Number(m[1])>=2}()&&N3()&&this._enabled&&!this._isClosed&&(k.debug("[".concat(this.getTrackId(),"] try capture camera media device for interrupted iOS 15 device on WeChat.")),await this.renewMediaStreamTrack())}),this._config=i,this._originalConstraints=a,this._constraints=a,this._deviceName=n.label,this._encoderConfig=Gs(this._config.encoderConfig),Wn.on(Li.IOS_15_16_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat),Wn.on(Li.IOS_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat),this.bindProcessorContextEvents()}async setDevice(n){return typeof n=="string"?this._setDeviceById(n):n.deviceId?this._setDeviceById(n.deviceId):n.facingMode?this._setDeviceByFacingModel(n.facingMode):void 0}async _setDeviceById(n){if(k.info("[".concat(this.getTrackId(),"] set device to ").concat(n)),this._enabled)try{const i=await Ka.getDeviceById(n),a={};a.video=rr({},this._constraints),a.video.deviceId={exact:n},a.video.facingMode=void 0,this._originMediaStreamTrack.stop();let l=null;try{l=await Ga(a,this.getTrackId())}catch(u){throw k.error("[".concat(this.getTrackId(),"] setDevice failed"),u.toString()),l=await Ga({video:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(l.getVideoTracks()[0],!1),u}await this._updateOriginMediaStreamTrack(l.getVideoTracks()[0],!1),this.updateMediaStreamTrackResolution(),this._deviceName=i.label,this._config.cameraId=n,this._constraints.deviceId={exact:n}}catch(i){throw k.error("[".concat(this.getTrackId(),"] setDevice error"),i.toString()),i}else try{const i=await Ka.getDeviceById(n);this._deviceName=i.label,this._config.cameraId=n,this._constraints.deviceId={exact:n}}catch(i){throw k.error("[".concat(this.getTrackId(),"] setDevice error"),i.toString()),i}k.info("[".concat(this.getTrackId(),"] setDevice success"))}async _setDeviceByFacingModel(n){k.info("[".concat(this.getTrackId(),"] set facingMode ").concat(n));const i={video:rr(rr({},this._constraints),{},{deviceId:void 0,facingMode:{exact:n}})};if(this._enabled){this._originMediaStreamTrack.stop();let a=null;try{a=await Ga(i,this.getTrackId())}catch(l){throw k.error("[".concat(this.getTrackId(),"] setDeviceByFacingModel failed"),l.toString()),a=await Ga({video:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(a.getVideoTracks()[0],!1),l}await this._updateOriginMediaStreamTrack(a.getVideoTracks()[0],!1),this.updateMediaStreamTrackResolution()}this._deviceName="",this._config.facingMode=n,this._config.cameraId=void 0,this._constraints=rr({},i.video),k.info("[".concat(this.getTrackId(),"] setDeviceByFacingModel success"))}async setEnabled(n,i){if(!i){if(n===this._enabled)return;this.stateCheck("enabled",n)}if(k.info("[".concat(this.getTrackId(),"] start setEnabled"),n),n){try{if(this.isExternalTrack)this._originMediaStreamTrack.enabled=!0;else{const a=await Ga({video:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(a.getVideoTracks()[0],!1)}await Qn(this,at.NEED_ENABLE_TRACK,this)}catch(a){throw k.error("[".concat(this.getTrackId(),"] setEnabled true error"),a.toString()),a}this.updateMediaStreamTrackResolution(),k.info("[".concat(this.getTrackId(),"] setEnabled to true success")),i||(this._enabled=!0)}else{this.isExternalTrack?this._originMediaStreamTrack.enabled=!1:(this._originMediaStreamTrack.onended=null,this._originMediaStreamTrack.stop()),i||(this._enabled=!1);try{await Qn(this,at.NEED_DISABLE_TRACK,this)}catch(a){throw k.error("[".concat(this.getTrackId(),"] setEnabled to false error"),a.toString()),a}k.info("[".concat(this.getTrackId(),"] setEnabled to false success"))}}async setEncoderConfiguration(n,i){if(!this._enabled)throw new Re(X.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled");n=Gs(n),Q("USE_STANDARD_BITRATE_DEFAULT")&&(delete n.bitrateMax,delete n.bitrateMin),this._forceBitrateLimit&&(n.bitrateMax=this._forceBitrateLimit.max_bitrate||n.bitrateMax,n.bitrateMin=this._forceBitrateLimit.min_bitrate||n.bitrateMin);const a=vr(this._config);a.encoderConfig=n;const l=rS(a);($i()||co()||Hs())&&(l.deviceId=void 0),k.debug("[".concat(this.getTrackId(),"] setEncoderConfiguration applyConstraints"),JSON.stringify(n),JSON.stringify(l));try{await this._originMediaStreamTrack.applyConstraints(l),this.updateMediaStreamTrackResolution()}catch(u){const h=new Re(X.UNEXPECTED_ERROR,u.toString());throw k.error("[".concat(this.getTrackId(),"] applyConstraints error"),h.toString()),h}this._config=a,this._constraints=l,this._originalConstraints=l,this._encoderConfig=n,this._hints.indexOf(qn.SCREEN_TRACK)===-1&&this.updateBitrateFromProfile();try{await Qn(this,at.NEED_UPDATE_VIDEO_ENCODER,this)}catch(u){return u.throw(k)}}_getDefaultPlayerConfig(){return{mirror:!0,fit:"cover"}}onTrackEnded(){if((co()||Hs())&&this._enabled&&!this._isClosed&&Wn.duringInterruption){const n=async()=>{Wn.off(Li.IOS_INTERRUPTION_END,n),this._enabled&&!this._isClosed&&(k.debug("[".concat(this.getTrackId(),"] try capture camera media device for interrupted iOS device.")),await this.setEnabled(!1),await this.setEnabled(!0))};Wn.on(Li.IOS_INTERRUPTION_END,n)}else k.debug("[".concat(this.getTrackId(),"] track ended")),this.safeEmit(Xf.TRACK_ENDED)}async renewMediaStreamTrack(n){const i=n||this._constraints,a=Ka.searchDeviceIdByName(this._deviceName);if(a&&!i.deviceId&&(i.deviceId={exact:a}),this._enabled){const l=await Ga({video:i},this.getTrackId());this._constraints=i,await this._updateOriginMediaStreamTrack(l.getVideoTracks()[0],!0),this.updateMediaStreamTrackResolution()}}close(){super.close(),Wn.off(Li.IOS_15_16_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat),Wn.off(Li.IOS_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat)}clone(n){let i=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],a=this._encoderConfig;n&&(a=rr(rr({},a),Gs(n))),a=Jd(a);const l=Zn(8,"track-cam-cloned-"),u=new tK(i?this._mediaStreamTrack.clone():this._mediaStreamTrack,Jd(rr(rr({},this._config),{},{encoderConfig:a})),Jd(this._constraints),Jd(this._scalabilityMode),this._optimizationMode,l);return n&&a&&u.setEncoderConfiguration(a),k.debug("clone track from ".concat(this.getTrackId()," to ").concat(l,", clone ").concat(i)),u}bindProcessorContextEvents(){this.processorContext.on(za.REQUEST_UPDATE_CONSTRAINTS,async(n,i,a)=>{try{const l=Object.assign({},this._originalConstraints,...n);await this.renewMediaStreamTrack(l),i()}catch(l){a(l)}}),this.processorContext.on(za.REQUEST_CONSTRAINTS,async n=>{n(this._originMediaStreamTrack.getSettings())})}},_n(qa.prototype,"setDevice",[Z5,e6],Object.getOwnPropertyDescriptor(qa.prototype,"setDevice"),qa.prototype),_n(qa.prototype,"setEnabled",[t6,n6,r6],Object.getOwnPropertyDescriptor(qa.prototype,"setEnabled"),qa.prototype),_n(qa.prototype,"setEncoderConfiguration",[i6,o6],Object.getOwnPropertyDescriptor(qa.prototype,"setEncoderConfiguration"),qa.prototype),_n(qa.prototype,"close",[a6],Object.getOwnPropertyDescriptor(qa.prototype,"close"),qa.prototype),qa);function II(e,n,i,a){i.optimizationMode&&(a&&a.width&&a.height?(i.encoderConfig=rr(rr({},a),{},{bitrateMin:a.bitrateMin,bitrateMax:a.bitrateMax}),i.optimizationMode!=="motion"&&i.optimizationMode!=="detail"||(n.contentHint=i.optimizationMode,n.contentHint===i.optimizationMode?k.debug("[".concat(e,"] set content hint to"),i.optimizationMode):k.debug("[".concat(e,"] set content hint failed")))):k.warning("[".concat(e,"] can not apply optimization mode bitrate config, no encoderConfig")))}var s6,c6,l6,u6,ds,d6,h6,f6,p6,m6,g6,Co;class v6 extends _V{getUserId(){return this._userId}constructor(n,i,a,l){super(n,"track-".concat(n.kind,"-").concat(i,"-").concat(l.clientId,"_").concat(Zn(5,""))),ye(this,"_userId",void 0),ye(this,"_uintId",void 0),ye(this,"_isDestroyed",!1),ye(this,"store",void 0),ye(this,"processor",void 0),ye(this,"processorContext",void 0),this._userId=i,this._uintId=a,this.store=l}_updateOriginMediaStreamTrack(n){this._originMediaStreamTrack=n,this._mediaStreamTrack=n,this._updatePlayerSource(),this.processor&&this.processor.updateInput({track:this._originMediaStreamTrack,context:this.processorContext})}_destroy(){this._isDestroyed=!0,k.info("[".concat(this.getTrackId(),"] is destroyed")),this.stop(),super.close()}getProcessorStats(){return this.processorContext.gatherStats()}getProcessorUsage(){return this.processorContext.gatherUsage()}}let tp=(s6=It({argsMap:(e,n,i)=>[e.getTrackId(),typeof n=="string"?n:n instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement",i]}),c6=It({argsMap:e=>[e.getTrackId()]}),l6=It({argsMap:(e,n)=>[e.getTrackId(),n.name]}),u6=It({argsMap:e=>[e.getTrackId()]}),_n((ds=class extends v6{get isPlaying(){return!(!this._player||this._player.videoElementStatus!==Xi.PLAYING)}get __className__(){return"RemoteVideoTrack"}constructor(e,n,i,a,l){super(e,n,i,a),ye(this,"_videoVisibleTimer",null),ye(this,"_previousVideoVisibleStatus",void 0),ye(this,"_clearPreviousVideoVisibleStatus",()=>this._previousVideoVisibleStatus=void 0),ye(this,"trackMediaType",Jf.VIDEO),ye(this,"_videoWidth",void 0),ye(this,"_videoHeight",void 0),ye(this,"_player",void 0),ye(this,"_prePlayer",void 0),ye(this,"processorDestination",void 0),ye(this,"processorContext",void 0),this._prePlayer=l,this.updateMediaStreamTrackResolution(),this.processorContext=new NV(this.getTrackId(),"remote"),this.processorDestination=new xV(this.processorContext),this.bindProcessorDestinationEvents()}getStats(){return Fu(()=>{k.warning("[deprecated] RemoteVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteVideoStats instead")},"remoteVideoTrackGetStatsWarning"),ja(this,at.GET_STATS)||rr({},vV)}play(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.safeEmit(us.PLAY_START),typeof e=="string"){const a=document.getElementById(e);a?e=a:(k.warning("[".concat(this.getTrackId(),'] can not find "#').concat(e,'" element, use document.body')),e=document.body)}k.debug("[".concat(this.getTrackId(),"] start video playback in ").concat(e instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement"),JSON.stringify(n));const i=rr(rr({fit:"cover"},n),{},{trackId:this.getTrackId(),element:e});if(this._player)this._player.updateConfig(i);else{let a=!1,l=!1;e instanceof HTMLVideoElement?(this._player=new RI(i),this._prePlayer&&(this._prePlayer.destroy(),this._prePlayer=void 0,l=!0)):this._prePlayer&&!this._prePlayer.isDestroyed?(this._player=this._prePlayer,this._prePlayer=void 0,a=this._player.videoState>0,this._player.updateConfig(i)):this._player=new wI(i),this._player.updateVideoTrack(this._mediaStreamTrack),this._player.onFirstVideoFrameDecoded=()=>{this.store.subscribe(this.getUserId(),"video",void 0,void 0,Date.now()),this.safeEmit(us.FIRST_FRAME_DECODED),l&&this.safeEmit(us.FIRST_FRAME_RENDER)},this._player.onVideoStateChanged=u=>{this.safeEmit(us.VIDEO_STATE_CHANGED,u)},a&&(this._player.onFirstVideoFrameDecoded(),this._player.onVideoStateChanged(this._player.videoState))}this._player.play(this.store.sessionId||void 0),this._videoVisibleTimer&&window.clearInterval(this._videoVisibleTimer),this._clearPreviousVideoVisibleStatus(),this._videoVisibleTimer=window.setInterval(()=>{try{const a=this.getVideoElementVisibleStatus();this.safeEmit(us.VIDEO_ELEMENT_VISIBLE_STATUS,a)}catch{}},Q("CHECK_VIDEO_VISIBLE_INTERVAL")),this.safeEmit(us.PLAY_END)}stop(){this._player&&(this._videoVisibleTimer&&(window.clearInterval(this._videoVisibleTimer),this._videoVisibleTimer=null),this._clearPreviousVideoVisibleStatus(),this._player.destroy(),this._player=void 0,k.debug("[".concat(this.getTrackId(),"] stop video playback")))}getCurrentFrameData(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}updateMediaStreamTrackResolution(){LV(this._originMediaStreamTrack).then(e=>{let[n,i]=e;this._videoHeight=i,this._videoWidth=n}).catch(G_)}_updatePlayerSource(){k.debug("[".concat(this.getTrackId(),"] update player source track")),this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}getVideoElementVisibleStatus(){try{var e,n;const i=this==null||(e=this._player)===null||e===void 0?void 0:e.getContainerElement(),a={track:this,element:this==null||(n=this._player)===null||n===void 0?void 0:n.getVideoElement(),slot:i==null?void 0:i.parentElement},{element:l,slot:u}=a;if(this.isPlaying&&l instanceof HTMLVideoElement&&u instanceof HTMLElement){const h=k3.checkOneElementVisible(l),p=Object.assign({},h);if(p.visible!==this._previousVideoVisibleStatus){this._previousVideoVisibleStatus=p.visible;const m=ct.reportApiInvoke(null,{tag:gr.TRACER,name:Ur.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE,options:[this.getTrackId()]});p.visible?m.onSuccess("Video is visible"):m.onSuccess("Invisible because of ".concat(p.reason))}return p}return}catch(i){throw new Re(X.GET_VIDEO_ELEMENT_VISIBLE_ERROR,i.message)}}pipe(e){if(this.processor===e)return e;if(e._source)throw new Re(X.INVALID_OPERATION,"Processor ".concat(e.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=e,this.processor._source=this,e.updateInput({track:this._originMediaStreamTrack,context:this.processorContext}),e}unpipe(){if(!this.processor)return;const e=this.processor;this.processor._source=void 0,this.processor=void 0,e.reset()}bindProcessorDestinationEvents(){this.processorDestination.on(Po.ON_TRACK,async e=>{e?e!==this._mediaStreamTrack&&(this._mediaStreamTrack=e,this._updatePlayerSource()):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource())})}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(Po.ON_TRACK)}_destroy(){this._prePlayer&&(this._prePlayer.destroy(),this._prePlayer=void 0),super._destroy(),this.unbindProcessorDestinationEvents()}_onSei(e){this.emit(th.SEI_RECEIVED,e)}}).prototype,"play",[s6],Object.getOwnPropertyDescriptor(ds.prototype,"play"),ds.prototype),_n(ds.prototype,"stop",[c6],Object.getOwnPropertyDescriptor(ds.prototype,"stop"),ds.prototype),_n(ds.prototype,"pipe",[l6],Object.getOwnPropertyDescriptor(ds.prototype,"pipe"),ds.prototype),_n(ds.prototype,"unpipe",[u6],Object.getOwnPropertyDescriptor(ds.prototype,"unpipe"),ds.prototype),ds),np=(d6=It({argsMap:(e,n)=>[e.getTrackId(),n],throttleTime:300}),h6=It({argsMap:(e,n)=>[e.getTrackId(),n]}),f6=It({argsMap:e=>[e.getTrackId()]}),p6=It({argsMap:e=>[e.getTrackId()]}),m6=It({argsMap:(e,n)=>[e.getTrackId(),n.name]}),g6=It({argsMap:e=>[e.getTrackId()]}),_n((Co=class extends v6{get isPlaying(){return this._useAudioElement?qo.isPlaying(this.getTrackId()):this._source.isPlayed}get __className__(){return"RemoteAudioTrack"}constructor(e,n,i,a){super(e,n,i,a),ye(this,"trackMediaType",Jf.AUDIO),ye(this,"_source",void 0),ye(this,"_useAudioElement",!0),ye(this,"_volume",100),ye(this,"processorContext",void 0),ye(this,"processorDestination",void 0),ye(this,"_played",!1),ye(this,"_bypassWebAudio",!1),Q("DISABLE_WEBAUDIO")?(this._source=new bI,this._bypassWebAudio=!0,this._useAudioElement=!0):(this._source=new bV(e,!0),Q("REMOTE_AUDIO_TRACK_USES_WEB_AUDIO")&&(this._useAudioElement=!1)),this._source.once(Ha.RECEIVE_TRACK_BUFFER,()=>{this.safeEmit(us.FIRST_FRAME_DECODED)}),this.processorContext=new DV(this._source.context,this.getTrackId(),"remote"),this.processorDestination=new PV(this.processorContext),this.bindProcessorDestinationEvents(),this._source.on(Ha.UPDATE_SOURCE,()=>{this.processor&&this.processor.updateInput({node:this._source.processSourceNode,context:this.processorContext})})}setAudioFrameCallback(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:4096;if(!e)return this._source.removeAllListeners(Ha.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(n),this._source.removeAllListeners(Ha.ON_AUDIO_BUFFER),this._source.on(Ha.ON_AUDIO_BUFFER,i=>e(i))}setVolume(e){this._volume=e,this._useAudioElement?qo.setVolume(this.getTrackId(),e):this._source.setVolume(e/100)}async setPlaybackDevice(e){if(!this._useAudioElement||!fV())throw new Re(X.NOT_SUPPORTED,"your browser does not support setting the audio output device");await qo.setSinkID(this.getTrackId(),e)}getVolumeLevel(){return this._source.getAccurateVolumeLevel()}getStats(){return Fu(()=>{k.warning("[deprecated] RemoteAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteAudioStats instead")},"remoteAudioTrackGetStatsWarning"),ja(this,at.GET_STATS)||rr({},gV)}play(){k.debug("[".concat(this.getTrackId(),"] start audio playback")),this._played=!0,this._useAudioElement?(k.debug("[".concat(this.getTrackId(),"] use audio element to play")),qo.play(this._mediaStreamTrack,this.getTrackId(),this._volume,this.store.sessionId||void 0)):this._source.play()}stop(){k.debug("[".concat(this.getTrackId(),"] stop audio playback")),this._played=!1,this._useAudioElement?qo.stop(this.getTrackId()):this._source.stop()}_destroy(){super._destroy(),this._played=!1,this.unbindProcessorDestinationEvents(),this._source.destroy()}_isFreeze(){return this._source.isFreeze}_updatePlayerSource(){let e=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];k.debug("[".concat(this.getTrackId(),"] update player source track")),e&&this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&qo.updateTrack(this.getTrackId(),this._mediaStreamTrack)}pipe(e){if(this._bypassWebAudio)throw new Re(X.NOT_SUPPORTED,"can not pipe extension when WebAudio disabled");if(this.processor===e)return e;if(e._source)throw new Re(X.INVALID_OPERATION,"Processor ".concat(e.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=e,this.processor._source=this,e.updateInput({track:this._originMediaStreamTrack,node:this._source.processSourceNode,context:this.processorContext}),e}unpipe(){var e;if(this._bypassWebAudio)throw new Re(X.NOT_SUPPORTED,"can not unpipe extension when WebAudio disabled");if(!this.processor)return;const n=this.processor;(e=this._source.processSourceNode)===null||e===void 0||e.disconnect(),this.processor._source=!1,this.processor=void 0,n.reset()}bindProcessorDestinationEvents(){this.processorDestination.on(Po.ON_TRACK,async e=>{e?e!==this._mediaStreamTrack&&(this._mediaStreamTrack=e,this._updatePlayerSource(!1),this._source.processedNode=this._source.createMediaStreamSourceNode(e)):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource())}),this.processorDestination.on(Po.ON_NODE,e=>{this._source.processedNode=e;const n=!e;this._useAudioElement!==n&&(this._played?(this.stop(),this._useAudioElement=n,this.play()):this._useAudioElement=n)})}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(Po.ON_TRACK),this.processorDestination.removeAllListeners(Po.ON_NODE)}}).prototype,"setVolume",[d6],Object.getOwnPropertyDescriptor(Co.prototype,"setVolume"),Co.prototype),_n(Co.prototype,"setPlaybackDevice",[h6],Object.getOwnPropertyDescriptor(Co.prototype,"setPlaybackDevice"),Co.prototype),_n(Co.prototype,"play",[f6],Object.getOwnPropertyDescriptor(Co.prototype,"play"),Co.prototype),_n(Co.prototype,"stop",[p6],Object.getOwnPropertyDescriptor(Co.prototype,"stop"),Co.prototype),_n(Co.prototype,"pipe",[m6],Object.getOwnPropertyDescriptor(Co.prototype,"pipe"),Co.prototype),_n(Co.prototype,"unpipe",[g6],Object.getOwnPropertyDescriptor(Co.prototype,"unpipe"),Co.prototype),Co);const pl=new class extends br{get visibility(){return document.visibilityState}get lastHiddenTime(){return this._lastHiddenTime}get lastVisibleTime(){return this._lastVisibleTime}constructor(){super(),ye(this,"_lastHiddenTime",0),ye(this,"_lastVisibleTime",0),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"?this._lastHiddenTime=performance.now():this._lastVisibleTime=performance.now(),k.debug("current web page is ".concat(document.visibilityState)),this.emit("VISIBILITY_CHANGE",document.visibilityState)})}};class E6 extends br{constructor(n,i){super(),ye(this,"trackMediaType",Jf.DATA),ye(this,"_version",1),ye(this,"_type",3),ye(this,"_config",void 0),ye(this,"_originDataChannel",void 0),ye(this,"_dataStreamPacketHeader",new ArrayBuffer(4)),ye(this,"_dataStreamPacketHandler",{serialize:a=>a,deserialize:a=>a}),ye(this,"_datachannelEventMap",new Map),this._config=n,i&&(this._originDataChannel=i,this._bandDataChannelEvents(i)),this._initPacketHeader()}useDataStream(n){this._dataStreamPacketHandler=n}get id(){return this._config.id}get ordered(){return this._config.ordered}get maxRetransmits(){return Q("DATASTREAM_MAX_RETRANSMITS")}get metadata(){return this._config.metadata}get readyState(){var n,i;return(n=(i=this._originDataChannel)===null||i===void 0?void 0:i.readyState)!==null&&n!==void 0?n:"connecting"}get _originDataChannelId(){var n,i;return(n=(i=this._originDataChannel)===null||i===void 0?void 0:i.id)!==null&&n!==void 0?n:null}getChannelId(){return this.id}getConfig(){return this._config}_close(){this._originDataChannel&&(this._unbindDataChannelEvents(this._originDataChannel),this._originDataChannel=void 0)}async _waitTillOpen(){return new et((n,i)=>{if(this._originDataChannel){this._originDataChannel.readyState==="open"&&n();const a=setTimeout(()=>{var l;i(new Re(X.DATACHANNEL_CONNECTION_TIMEOUT,"Cannot create datachannel, id: ".concat((l=this._originDataChannel)===null||l===void 0?void 0:l.id)))},1e4);this._originDataChannel.onopen=()=>{clearTimeout(a),this._originDataChannel&&this._bandDataChannelEvents(this._originDataChannel),n()},this._originDataChannel.onerror=()=>{throw clearTimeout(a),new Re(X.DATACHANNEL_CONNECTION_TIMEOUT)}}else i(new Re(X.DATACHANNEL_CONNECTION_TIMEOUT,"cannot find dataChannel"))})}_updateOriginDataChannel(n){this._originDataChannel=n,this._bandDataChannelEvents(n)}_initPacketHeader(){const n=new DataView(this._dataStreamPacketHeader);n.setUint16(0,this._version),n.setUint8(2,this._type),n.setUint8(3,this._config.id)}_bandDataChannelEvents(n){this._unbindDataChannelEvents(n),[tS.OPEN,tS.CLOSE,tS.ERROR].forEach(i=>{const a=()=>{this.emit(i)};this._datachannelEventMap.set(i,a),n.addEventListener(i,a)})}_unbindDataChannelEvents(n){Array.from(this._datachannelEventMap.entries()).forEach(i=>{let[a,l]=i;n.removeEventListener(a,l)}),this._datachannelEventMap.clear()}}class _fe extends E6{constructor(n){super(n),ye(this,"_messageListener",void 0),this._messageListener=i=>{if(i.data.byteLength<this._dataStreamPacketHeader.byteLength)throw Error("invalid byteLength: the byte length must exceed "+this._dataStreamPacketHeader.byteLength);const a=i.data.slice(0,this._dataStreamPacketHeader.byteLength),l=new DataView(a).getUint8(3);if(l!==this.id)return void(Q("SHOW_DATASTREAM2_LOG")&&k.debug("invalid datachannel id: ".concat(l," !== ").concat(this.id)));let u=i.data.slice(this._dataStreamPacketHeader.byteLength);u=this._dataStreamPacketHandler.deserialize(u),this.emit(tS.MESSAGE,u)}}_updateOriginDataChannel(n){super._updateOriginDataChannel(n),this._bandRemoteDataChannelEvents()}_close(){this._originDataChannel&&(this._originDataChannel.removeEventListener("message",this._messageListener),super._close())}_bandRemoteDataChannelEvents(){this._originDataChannel&&this._originDataChannel.addEventListener("message",this._messageListener)}}class Sfe extends E6{send(n){if(this._originDataChannel){let i=n;i=this._dataStreamPacketHandler.serialize(n);const a=new Uint8Array(this._dataStreamPacketHeader.byteLength+i.byteLength);a.set(new Uint8Array(this._dataStreamPacketHeader),0),a.set(new Uint8Array(i),this._dataStreamPacketHeader.byteLength),this._originDataChannel.send(a.buffer)}}}function oS(){const e=new Blob([atob("Y29uc3QgdD0idmlkZW8vaDI2NCIsZT0idmlkZW8vaDI2NSI7ZnVuY3Rpb24gbih0LGUsbil7bGV0IGE9bmV3IFVpbnQ4QXJyYXkodCxlLG4pLHI9W10sbz0wO2Zvcig7ci5sZW5ndGg8bjspbyszPG4mJjA9PT1hW29dJiYwPT09YVtvKzFdJiYzPT09YVtvKzJdJiYoMD09PWFbbyszXXx8MT09PWFbbyszXXx8Mj09PWFbbyszXXx8Mz09PWFbbyszXSk/KHIucHVzaChhW29dLGFbbysxXSxhW28rM10pLG8rPTQpOihyLnB1c2goYVtvXSksbysrKTtyZXR1cm4gbmV3IFVpbnQ4QXJyYXkocil9ZnVuY3Rpb24gYShhLHIpe3N3aXRjaChyKXtjYXNlIHQ6cmV0dXJuIGZ1bmN0aW9uKHQpe2NvbnN0IGU9bmV3IERhdGFWaWV3KHQuZGF0YSk7bGV0IGE9MDtmb3IoO2ErNDx0LmRhdGEuYnl0ZUxlbmd0aDspe2lmKDA9PT1lLmdldFVpbnQ4KGErMCkmJjA9PT1lLmdldFVpbnQ4KGErMSkmJjA9PT1lLmdldFVpbnQ4KGErMikmJjE9PT1lLmdldFVpbnQ4KGErMykmJjY9PT1lLmdldFVpbnQ4KGErNCkpe2xldCByPWErNixvPTAsaT0wO2Zvcig7MjU1PT09KGk9ZS5nZXRVaW50OChyKyspKTspbys9MjU1O28rPWk7Y29uc3Qgcz1uKHQuZGF0YSxyLG8pO3JldHVybiBuZXcgVWludDhBcnJheShzKX1hKyt9cmV0dXJuIG51bGx9KGEpO2Nhc2UgZTpyZXR1cm4gZnVuY3Rpb24odCl7Y29uc3QgZT1uZXcgRGF0YVZpZXcodC5kYXRhKTtsZXQgYT0wO2Zvcig7YSs1PHQuZGF0YS5ieXRlTGVuZ3RoOyl7aWYoMD09PWUuZ2V0VWludDgoYSswKSYmMD09PWUuZ2V0VWludDgoYSsxKSYmMD09PWUuZ2V0VWludDgoYSsyKSYmMT09PWUuZ2V0VWludDgoYSszKSYmNzg9PT1lLmdldFVpbnQ4KGErNCkmJjE9PT1lLmdldFVpbnQ4KGErNSkmJjEwMT09PWUuZ2V0VWludDgoYSs2KSl7bGV0IHI9YSs3LG89MCxpPTA7Zm9yKDsyNTU9PT0oaT1lLmdldFVpbnQ4KHIrKykpOylvKz0yNTU7bys9aTtjb25zdCBzPW4odC5kYXRhLHIsbyk7cmV0dXJuIG5ldyBVaW50OEFycmF5KHMpfWErK31yZXR1cm4gbnVsbH0oYSk7ZGVmYXVsdDpyZXR1cm4gbnVsbH19ZnVuY3Rpb24gcih0KXtjb25zdCBlPXQubGVuZ3RoO2xldCBuPVtdLGE9MDtmb3IoO2E8ZTspYSsyPGUmJjA9PT10W2FdJiYwPT09dFthKzFdJiYoMD09PXRbYSsyXXx8MT09PXRbYSsyXXx8Mj09PXRbYSsyXXx8Mz09PXRbYSsyXSk/KG4ucHVzaCh0W2FdLHRbYSsxXSwzLHRbYSsyXSksYSs9Myk6KG4ucHVzaCh0W2FdKSxhKyspO3JldHVybiBuZXcgVWludDhBcnJheShuKX1mdW5jdGlvbiBvKG4sYSxvKXtzd2l0Y2gobyl7Y2FzZSB0OnJldHVybiBmdW5jdGlvbih0LGUpe2NvbnN0IG49cihlKSxhPW4ubGVuZ3RoLG89TWF0aC5mbG9vcihhLzI1NSksaT1hJTI1NSxzPW5ldyBVaW50OEFycmF5KDYrbysxK2ErdC5ieXRlTGVuZ3RoKTtzWzBdPTAsc1sxXT0wLHNbMl09MCxzWzNdPTEsc1s0XT02LHNbNV09MTAxO2xldCBmPTA7Zm9yKDtmPG87KXNbNitmXT0yNTUsZisrO3JldHVybiBzWzYrZl09aSxmKysscy5zZXQobiw2K2YpLHMuc2V0KG5ldyBVaW50OEFycmF5KHQpLDYrZithKSxzLmJ1ZmZlcn0obixhKTtjYXNlIGU6cmV0dXJuIGZ1bmN0aW9uKHQsZSl7Y29uc3Qgbj1yKGUpLGE9bi5sZW5ndGgsbz1NYXRoLmZsb29yKGEvMjU1KSxpPWElMjU1LHM9bmV3IFVpbnQ4QXJyYXkoNytvKzErYSsxK3QuYnl0ZUxlbmd0aCk7c1swXT0wLHNbMV09MCxzWzJdPTAsc1szXT0xLHNbNF09Nzgsc1s1XT0xLHNbNl09MTAxO2xldCBmPTA7Zm9yKDtmPG87KXNbNytmXT0yNTUsZisrO3JldHVybiBzWzcrZl09aSxmKysscy5zZXQobiw3K2YpLGYrPWEsc1s3K2ZdPTEyOCxmKysscy5zZXQobmV3IFVpbnQ4QXJyYXkodCksNytmKSxzLmJ1ZmZlcn0obixhKTtkZWZhdWx0OnJldHVybiBudWxsfX1mdW5jdGlvbiBpKG4pe2lmKG4ubGVuZ3RoPDUpcmV0dXJuIiI7bGV0IGE9LTE7Zm9yKGxldCB0PTA7dDxuLmxlbmd0aC0zO3QrKyl7aWYoMD09PW5bdF0mJjA9PT1uW3QrMV0mJjE9PT1uW3QrMl0pe2E9dDticmVha31pZih0PG4ubGVuZ3RoLTQmJjA9PT1uW3RdJiYwPT09blt0KzFdJiYwPT09blt0KzJdJiYxPT09blt0KzNdKXthPXQ7YnJlYWt9fWlmKC0xPT09YSlyZXR1cm4iIjtjb25zdCByPWErKDA9PT1uW2ErMl0/NDozKTtpZihyPj1uLmxlbmd0aClyZXR1cm4iIjtjb25zdCBvPW5bcl07aWYoMTI4Jm8pcmV0dXJuIiI7aWYoKG8+PjEmNjMpPj0zMilyZXR1cm4gZTtpZihyKzE8bi5sZW5ndGgpe2lmKDA9PSgyNDgmbltyKzFdKSlyZXR1cm4gZX1yZXR1cm4oMzEmbyk8PTMxP3Q6IiJ9Y29uc3Qgcz03MSxmPTEsbD0yLHU9MSxnPTI7dmFyIGM7ZnVuY3Rpb24gZCh0LGU9ITEpe2NvbnN0IG49dC5nZXRVaW50OCgwKTtpZihuIT09cylyZXR1cm47Y29uc3QgYT10LmdldFVpbnQxNigxKSxyPWYrbCthLG89bmV3IFVpbnQ4QXJyYXkodC5ieXRlTGVuZ3RoLXIpO28uc2V0KG5ldyBVaW50OEFycmF5KHQuYnVmZmVyLHIsdC5ieXRlTGVuZ3RoLXIpKTtjb25zdCBpPXttOm4sdGx2TGVuOmEsdGx2OltdLGZyYW1lOm99O2xldCBkPWYrbDtmb3IoO2Q8cjspe2NvbnN0IG49dC5nZXRVaW50OChkKSxhPXQuZ2V0VWludDE2KGQrdSkscj11K2c7aWYobj09PWMuQVVESU9fTEVWRUwpe2xldCBvPXQuZ2V0VWludDgoZCtyKTtmb3IobGV0IGU9MTtlPGE7ZSsrKW89bzw8OHx0LmdldFVpbnQ4KGQrcitlKTtpLnRsdi5wdXNoKHt0YWc6bixsZW5ndGg6YSx2YWx1ZTplPzEyN15vPj4xOjEyNyZvfSl9ZWxzZSBpZihuPT09Yy5NRVRBREFUQXx8bj09PWMuQVVESU9fNjRfQklUX1BUUyl7Y29uc3QgZT1uZXcgVWludDhBcnJheShhKTtmb3IobGV0IG49MDtuPGE7bisrKWVbbl09dC5nZXRVaW50OChkK3Irbik7aS50bHYucHVzaCh7dGFnOm4sbGVuZ3RoOmEsdmFsdWU6ZX0pfWQrPXIrYX1yZXR1cm4gaX0hZnVuY3Rpb24odCl7dFt0LkFVRElPX0xFVkVMPTFdPSJBVURJT19MRVZFTCIsdFt0Lk1FVEFEQVRBPTJdPSJNRVRBREFUQSIsdFt0LkFVRElPXzY0X0JJVF9QVFM9M109IkFVRElPXzY0X0JJVF9QVFMifShjfHwoYz17fSkpLHNlbGYub25ydGN0cmFuc2Zvcm09dD0+e2NvbnN0IGU9dC50cmFuc2Zvcm1lcjtsZXQgbj1bXSxyPVtdO2Uub3B0aW9ucy5wb3J0Lm9ubWVzc2FnZT10PT57dC5kYXRhLnNlaSYmbi5wdXNoKHQuZGF0YS5zZWkpLHQuZGF0YS5tZXRhZGF0YSYmci5wdXNoKHQuZGF0YS5tZXRhZGF0YSl9LHNlbGYucG9zdE1lc3NhZ2UoInN0YXJ0ZWQiKTtjb25zdCBoPWUucmVhZGFibGUuZ2V0UmVhZGVyKCksVT1lLndyaXRhYmxlLmdldFdyaXRlcigpOyJzZWktcngiPT09ZS5vcHRpb25zLm5hbWU/ZnVuY3Rpb24gdChlKXtoLnJlYWQoKS50aGVuKChuPT57aWYoIW4uZG9uZSl7aWYobi52YWx1ZSBpbnN0YW5jZW9mIFJUQ0VuY29kZWRWaWRlb0ZyYW1lKXtjb25zdCB0PWkobmV3IFVpbnQ4QXJyYXkobi52YWx1ZS5kYXRhKSkscj1hKG4udmFsdWUsdCk7ciYmZS5vcHRpb25zLnBvcnQucG9zdE1lc3NhZ2Uoe3NlaTpyfSl9VS53cml0ZShuLnZhbHVlKSxlLm9wdGlvbnMucG9ydC5wb3N0TWVzc2FnZSh7dHJhbnNmb3JtZWQ6ITB9KSx0KGUpfX0pKX0oZSk6InNlaS10eCI9PT1lLm9wdGlvbnMubmFtZT9mdW5jdGlvbiB0KGUpe2gucmVhZCgpLnRoZW4oKGE9PntpZighYS5kb25lKXtpZihhLnZhbHVlIGluc3RhbmNlb2YgUlRDRW5jb2RlZFZpZGVvRnJhbWUpe2NvbnN0IHQ9aShuZXcgVWludDhBcnJheShhLnZhbHVlLmRhdGEpKSxlPW4uc2hpZnQoKTtpZihlKXtjb25zdCBuPW8oYS52YWx1ZS5kYXRhLGUsdCk7biYmKGEudmFsdWUuZGF0YT1uKX19VS53cml0ZShhLnZhbHVlKSxlLm9wdGlvbnMucG9ydC5wb3N0TWVzc2FnZSh7dHJhbnNmb3JtZWQ6ITB9KSx0KGUpfX0pKX0oZSk6ImF1ZGlvLW1ldGFkYXRhLXJ4Ij09PWUub3B0aW9ucy5uYW1lP2Z1bmN0aW9uIHQoZSl7aC5yZWFkKCkudGhlbigobj0+e2lmKCFuLmRvbmUpe2lmKG4udmFsdWUgaW5zdGFuY2VvZiBSVENFbmNvZGVkQXVkaW9GcmFtZSl7Y29uc3QgdD1uZXcgRGF0YVZpZXcobi52YWx1ZS5kYXRhKSxhPXQuZ2V0VWludDgoMCk7bGV0IHI7aWYoMCE9KDEyOCZhKSYmNzEhPT1hKXtsZXQgZT1mdW5jdGlvbih0KXtpZih0LmJ5dGVMZW5ndGg8PTApcmV0dXJuW107Y29uc3QgZT1bXTtsZXQgbj0wO2Zvcig7bjx0LmJ5dGVMZW5ndGg7KXtjb25zdCBhPSgxMjgmdC5nZXRVaW50OChuKSk+Pjcscj0xMjcmdC5nZXRVaW50OChuKTtpZighKGEmJm4rNDw9dC5ieXRlTGVuZ3RoKSl7bisrO2JyZWFrfXtjb25zdCBhPXQuZ2V0VWludDMyKG4sITEpLG89KDE2Nzc2MTkyJmEpPj4xMCxpPTEwMjMmYTtlLnB1c2goe3B0OnIsdHNfb2Zmc2V0Om8sbGVuZ3RoOmksZGF0YTpuZXcgVWludDhBcnJheX0pLG4rPTR9fWxldCBhPXQuYnl0ZUxlbmd0aC1uO2Zvcihjb25zdCByIG9mIGUpe2lmKHIubGVuZ3RoPmEpcmV0dXJuIGNvbnNvbGUud2FybigiQnJva2VuIHJlZCBwYXlsb2FkIiksW107ci5sZW5ndGg+MCYmKHIuZGF0YT1uZXcgVWludDhBcnJheSh0LmJ1ZmZlcix0LmJ5dGVPZmZzZXQrbixyLmxlbmd0aCksbis9ci5sZW5ndGgsYS09ci5sZW5ndGgpfWlmKGE+MCl7Y29uc3Qgcj17cHQ6ZS5sZW5ndGg+MD9lW2UubGVuZ3RoLTFdLnB0OjAsdHNfb2Zmc2V0OjAsbGVuZ3RoOmEsZGF0YTpuZXcgVWludDhBcnJheSh0LmJ1ZmZlcix0LmJ5dGVPZmZzZXQrbixhKX07ZS5wdXNoKHIpfXJldHVybiBlfSh0KTtpZihlLmxlbmd0aD4wKXtjb25zdCB0PWZ1bmN0aW9uKHQpe2xldCBlPTA7Zm9yKGxldCBuPTA7bjx0Lmxlbmd0aDtuKyspZSs9bjx0Lmxlbmd0aC0xPzQ6MSxlKz10W25dLmxlbmd0aDtjb25zdCBuPW5ldyBVaW50OEFycmF5KGUpO2xldCBhPTA7Zm9yKGxldCBlPTA7ZTx0Lmxlbmd0aDtlKyspaWYoZTx0Lmxlbmd0aC0xKXtjb25zdCByPSgyMTQ3NDgzNjQ4fCgxMjcmdFtlXS5wdCk8PDI0fCgyNjIxNDMmdFtlXS50c19vZmZzZXQpPDwxMHwxMDIzJnRbZV0ubGVuZ3RoKT4+PjA7blthKytdPXI+PjI0JjI1NSxuW2ErK109cj4+MTYmMjU1LG5bYSsrXT1yPj44JjI1NSxuW2ErK109MjU1JnJ9ZWxzZSBuW2ErK109MTI3JnRbZV0ucHQ7Zm9yKGNvbnN0IGUgb2YgdCluLnNldChlLmRhdGEsYSksYSs9ZS5sZW5ndGg7cmV0dXJuIG59KGUubWFwKCh0PT57bGV0IGU9bmV3IFVpbnQ4QXJyYXkodC5sZW5ndGgpO2Uuc2V0KHQuZGF0YSk7Y29uc3Qgbj1kKG5ldyBEYXRhVmlldyhlLmJ1ZmZlcikpO3JldHVybiBuPy5mcmFtZSYmKHQuZGF0YT1uPy5mcmFtZSkscj1uLHR9KSkpO24udmFsdWUuZGF0YT10LmJ1ZmZlcn19ZWxzZSByPWQodCksciYmKG4udmFsdWUuZGF0YT1yLmZyYW1lLmJ1ZmZlcik7aWYocil7bGV0IHQ9ci50bHYuZmluZCgodD0+dC50YWc9PT1jLk1FVEFEQVRBKSk7aWYodCYmdC52YWx1ZSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkmJmUub3B0aW9ucy5wb3J0LnBvc3RNZXNzYWdlKHttZXRhZGF0YTp0LnZhbHVlfSksdD1yLnRsdi5maW5kKCh0PT50LnRhZz09PWMuQVVESU9fNjRfQklUX1BUUykpLHQmJnQudmFsdWUgaW5zdGFuY2VvZiBVaW50OEFycmF5JiY4PT10LnZhbHVlLmxlbmd0aCl7Y29uc3Qgbj1uZXcgRGF0YVZpZXcodC52YWx1ZS5idWZmZXIpLmdldEJpZ1VpbnQ2NCgwLCEwKTt0JiZ0LnZhbHVlIGluc3RhbmNlb2YgVWludDhBcnJheSYmZS5vcHRpb25zLnBvcnQucG9zdE1lc3NhZ2Uoe3B0czpufSl9fX1VLndyaXRlKG4udmFsdWUpLGUub3B0aW9ucy5wb3J0LnBvc3RNZXNzYWdlKHt0cmFuc2Zvcm1lZDohMH0pLHQoZSl9fSkpfShlKToiYXVkaW8tbWV0YWRhdGEtdHgiPT09ZS5vcHRpb25zLm5hbWUmJmZ1bmN0aW9uIHQoZSl7aC5yZWFkKCkudGhlbigobj0+e2lmKCFuLmRvbmUpe2lmKGUub3B0aW9ucy5wb3J0LnBvc3RNZXNzYWdlKHtnZXRNZXRhZGF0YTohMH0pLG4udmFsdWUgaW5zdGFuY2VvZiBSVENFbmNvZGVkQXVkaW9GcmFtZSl7Y29uc3QgdD1yLnNoaWZ0KCk7dCYmKG4udmFsdWUuZGF0YT1mdW5jdGlvbih0LGUsbil7Y29uc3QgYT1uLmJ5dGVMZW5ndGgscj1hK3UrZyxvPWYrbCtyLGk9bmV3IEFycmF5QnVmZmVyKHQuYnl0ZUxlbmd0aCtvKSxjPW5ldyBEYXRhVmlldyhpKTtjLnNldFVpbnQ4KDAscyksYy5zZXRVaW50MTYoMSxyKSxjLnNldFVpbnQ4KDMsZSksYy5zZXRVaW50MTYoNCxhKTtmb3IobGV0IHQ9MDt0PGE7dCsrKWMuc2V0VWludDgoNit0LG5bdF0pO2NvbnN0IGQ9bmV3IFVpbnQ4QXJyYXkoYy5idWZmZXIpO3JldHVybiBkLnNldChuZXcgVWludDhBcnJheSh0KSxvKSxkLmJ1ZmZlcn0obi52YWx1ZS5kYXRhLGMuQVVESU9fNjRfQklUX1BUUyx0KSl9VS53cml0ZShuLnZhbHVlKSxlLm9wdGlvbnMucG9ydC5wb3N0TWVzc2FnZSh7dHJhbnNmb3JtZWQ6ITB9KSx0KGUpfX0pKX0oZSl9LHNlbGYucG9zdE1lc3NhZ2UoInJlZ2lzdGVyZWQiKTsK")],{type:"text/javascript"});return setTimeout(()=>i_.revokeObjectURL(e),0),new Worker(i_.createObjectURL(e))}const _6=71,AI=1,OI=2,xI=1,S6=2;var Vu=function(e){return e[e.AUDIO_LEVEL=1]="AUDIO_LEVEL",e[e.METADATA=2]="METADATA",e[e.AUDIO_64_BIT_PTS=3]="AUDIO_64_BIT_PTS",e}(Vu||{});function NI(e){let n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const i=e.getUint8(0);if(i!==_6)return;const a=e.getUint16(1),l=AI+OI+a,u=new Uint8Array(e.byteLength-l);u.set(new Uint8Array(e.buffer,l,e.byteLength-l));const h={m:i,tlvLen:a,tlv:[],frame:u};let p=AI+OI;for(;p<l;){const m=e.getUint8(p),E=e.getUint16(p+xI),S=xI+S6;if(m===Vu.AUDIO_LEVEL){let R=e.getUint8(p+S);for(let w=1;w<E;w++)R=R<<8|e.getUint8(p+S+w);h.tlv.push({tag:m,length:E,value:n?127^R>>1:127&R})}else if(m===Vu.METADATA||m===Vu.AUDIO_64_BIT_PTS){const R=new Uint8Array(E);for(let w=0;w<E;w++)R[w]=e.getUint8(p+S+w);h.tlv.push({tag:m,length:E,value:R})}p+=S+E}return h}const aS=new Map,sS=127,ih=1e-10,PI=139/13,cS=new Map;function DI(e,n,i){const a="".concat(e,"-").concat(n,"-").concat(i);let l=0;return cS.has(a)?l=cS.get(a):(l=Math.log(function(h,p){const m=h-p;p<m&&(p=m);let E=1;for(let S=h,R=1;S>p;S--,R++)E=E*S/R;return E}(n,e))+e*Math.log(.5)+(n-e)*Math.log(1-.5)-Math.log(i)+i*e,cS.set(a,l)),l<ih&&(l=ih),l}function y6(e,n,i){const a=n.length,l=e.length/a;let u=!1;for(let h=0,p=0;h<a;h++){let m=0;for(let E=p+l;p<E;p++)e[p]>i&&m++;n[h]!==m&&(n[h]=m,u=!0)}return u}window.cache=cS;let yfe=0;class C6{constructor(n){ye(this,"id",void 0),ye(this,"immediates",[]),ye(this,"lastNonSilence",-1),ye(this,"immediateSpeechActivityScore",ih),ye(this,"lastLevelChangedTime",Date.now()),ye(this,"levels",[]),ye(this,"longs",[]),ye(this,"longSpeechActivityScore",ih),ye(this,"mediums",[]),ye(this,"mediumSpeechActivityScore",ih),ye(this,"minLevel",0),ye(this,"nextMinLevel",0),ye(this,"nextMinLevelWindowLength",0),ye(this,"energyScore",0),this.id=n||"".concat(yfe++),this.immediates.length=50,this.mediums.length=10,this.longs.length=1,this.levels.length=this.immediates.length}computeImmediates(){const n=this.immediates,i=this.levels,a=this.minLevel+PI;let l=!1;for(let u=0;u<n.length;++u){let h=i[u];h<a&&(h=0);const p=Math.floor(h/PI);n[u]!==p&&(n[u]=p,l=!0)}return l}computeLongs(){return y6(this.mediums,this.longs,4)}computeMediums(){return y6(this.immediates,this.mediums,7)}evaluateImmediateSpeechActivityScore(){this.immediateSpeechActivityScore=DI(this.immediates[0],13,.78)}evaluateLongSpeechActivityScore(n){this.longSpeechActivityScore=DI(this.longs[0],10,47),this.longSpeechActivityScore>ih&&(this.lastNonSilence=n)}evaluateMediumSpeechActivityScore(){this.mediumSpeechActivityScore=DI(this.mediums[0],5,24)}evaluateSpeechActivityScores(n){this.computeImmediates()&&(this.evaluateImmediateSpeechActivityScore(),this.computeMediums()&&(this.evaluateMediumSpeechActivityScore(),this.computeLongs()&&this.evaluateLongSpeechActivityScore(n)))}getLastLevelChangedTime(){return this.lastLevelChangedTime}getLevels(){var n;return"[".concat(nk(n=[...this.levels]).call(n).join(),"]")}getSpeechActivityScore(n){switch(n){case 0:return this.immediateSpeechActivityScore;case 1:return this.mediumSpeechActivityScore;case 2:return this.longSpeechActivityScore;default:throw new Error("interval "+n)}}levelChanged(n,i){if(this.lastLevelChangedTime<=i){this.lastLevelChangedTime=i;let a=n;return n<0&&(a=0),n>sS&&(a=sS),this.levels.unshift(a),this.levels.length>this.immediates.length&&this.levels.pop(),this.updateMinLevel(a),a>=this.minLevel+PI?a:a/2}return-1}levelTimedOut(){this.levelChanged(0,this.lastLevelChangedTime)}updateMinLevel(n){if(n!==0){if(this.minLevel===0||this.minLevel>n)return this.minLevel=n,this.nextMinLevel=0,void(this.nextMinLevelWindowLength=0);if(this.nextMinLevel===0)return this.nextMinLevel=n,void(this.nextMinLevelWindowLength=1);if(this.nextMinLevel>n&&(this.nextMinLevel=n),this.nextMinLevelWindowLength++,this.nextMinLevelWindowLength>=750){let i=Math.sqrt(this.minLevel*this.nextMinLevel);i<0?i=0:i>sS&&(i=sS),this.minLevel=i,this.nextMinLevel=0,this.nextMinLevelWindowLength=0}}}}class Cfe{constructor(n){ye(this,"algorithm",void 0),this.algorithm=n}execute(){let n=!this.algorithm;if(!n)try{const i=this.algorithm.runInDecisionMaker(this);i<=0?n=!0:setTimeout(this.execute.bind(this),i)}catch{n=!0}n&&this.algorithm&&this.algorithm.decisionMakerExited(this)}}class LI{constructor(n,i,a){ye(this,"isDominant",void 0),ye(this,"energyRanking",void 0),ye(this,"energyScore",void 0),this.isDominant=n,this.energyRanking=i,this.energyScore=a}}class bfe extends br{constructor(n){super(),ye(this,"dominantId",null),ye(this,"lastDecisionTime",0),ye(this,"lastLevelChangedTime",0),ye(this,"lastLevelIdleTime",0),ye(this,"relativeSpeechActivities",[]),ye(this,"speakers",new Map),ye(this,"enableSilence",!1),ye(this,"timeoutToSilenceInterval",0),ye(this,"decisionMaker",null),ye(this,"loudest",[]),ye(this,"numLoudestToTrack",3),ye(this,"energyExpireTimeMs",250),ye(this,"energyAlphaPct",50),this.timeoutToSilenceInterval=n,this.enableSilence=n>0,this.relativeSpeechActivities.length=3}setLoudestConfig(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:3,i=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0;this.numLoudestToTrack=n,i!=null&&(this.energyExpireTimeMs=i),a!=null&&(this.energyAlphaPct=a),this.loudest.length>n&&this.loudest.splice(n)}getDominantSpeaker(){return this.dominantId}isAmongLoudest(n){return this.loudest.some(i=>i.id===n)}levelChanged(n,i){const a=Date.now(),l=this.getOrCreateSpeaker(n);this.lastLevelChangedTime<a&&(this.lastLevelChangedTime=a,this.maybeStartDecisionMaker());const u=l.levelChanged(i,a);return this.updateLoudestList(l,u,a)}runInDecisionMaker(n){return this.decisionMaker!==n||this.lastDecisionTime>0&&this.lastDecisionTime-this.lastLevelChangedTime>=15e3?-1:this._runInDecisionMaker()}decisionMakerExited(n){this.decisionMaker===n&&(this.decisionMaker=null)}destroy(){this.decisionMaker=null,this.loudest.length=0,this.speakers.clear(),this.removeAllListeners()}addSpeakers(n){n.forEach(i=>{this.speakers.has(i.id)||this.speakers.set(i.id,i)})}removeSpeakers(n){n.forEach(i=>{this.speakers.delete(i.id)})}getOrCreateSpeaker(n){let i=this.speakers.get(n);return i||(i=new C6(n),this.speakers.set(n,i),this.maybeStartDecisionMaker()),i}updateLoudestList(n,i,a){const l=n.id===this.dominantId;if(i<0){let m=0;for(;m<this.loudest.length&&this.loudest[m]!==n;)++m;return new LI(l,m,n.energyScore)}if(n.energyScore=Math.floor((this.energyAlphaPct*i+(100-this.energyAlphaPct)*n.energyScore+50)/100),this.numLoudestToTrack===0)return new LI(l,0,n.energyScore);const u=a-this.energyExpireTimeMs;let h=0;for(;h<this.loudest.length;){const m=this.loudest[h];if(m.getLastLevelChangedTime()<u&&this.loudest.length>=this.numLoudestToTrack)this.loudest.splice(h,1);else if(m.id!==n.id)++h;else if(this.loudest.splice(h,1),this.loudest.length<this.numLoudestToTrack)break}let p=0;for(;p<this.loudest.length&&!(this.loudest[p].energyScore<n.energyScore);)++p;return p<this.numLoudestToTrack&&(this.loudest.splice(p,0,n),this.loudest.length>this.numLoudestToTrack&&this.loudest.splice(this.numLoudestToTrack,1)),new LI(l,p,n.energyScore)}maybeStartDecisionMaker(){!this.decisionMaker&&this.speakers.size>0&&(this.decisionMaker=new Cfe(this),this.decisionMaker.execute())}makeDecision(n){let i=null,a=null;const l=this.speakers.size;let u=null;if(l===0)u=null;else if(l===1){var h;const p=ba(h=this.speakers).call(h).next().value;this.enableSilence&&p&&(u=p.id,p.evaluateSpeechActivityScores(n),n-p.lastNonSilence>this.timeoutToSilenceInterval&&(u=null))}else{let p=this.dominantId==null?null:this.speakers.get(this.dominantId);if(p==null){const S=this.speakers.entries().next();S.value&&(u=S.value[0],p=S.value[1])}else u=p.id;p!=null&&p.evaluateSpeechActivityScores(n);const m=this.relativeSpeechActivities;let E=2;for(const S of this.speakers.entries()){const[R,w]=S;if(w===p)continue;w.evaluateSpeechActivityScores(n);for(let j=0;j<m.length;++j){const q=p==null?ih:p.getSpeechActivityScore(j);m[j]=Math.log(w.getSpeechActivityScore(j)/q)}const O=m[0],H=m[1],B=m[2];O>3&&H>2&&B>0&&H>E&&(E=H,u=R)}this.enableSilence&&p!=null&&u===p.id&&n-p.lastNonSilence>this.timeoutToSilenceInterval&&(u=null)}u==null&&!this.enableSilence||u===this.dominantId||(i=this.dominantId,this.dominantId=u,a=this.dominantId),a==null&&!this.enableSilence||a===i||this.emit("ActiveSpeakerChanged",a)}_runInDecisionMaker(){const n=Date.now(),i=300-(n-this.lastLevelIdleTime);let a=0;i<=0?(this.lastLevelIdleTime!==0&&this.timeoutIdleLevels(n),this.lastLevelIdleTime=n):a=i;let l=300-(n-this.lastDecisionTime);return l<=0&&(this.lastDecisionTime=n,this.makeDecision(n),l=300-(Date.now()-n)),l>0&&a>l&&(a=l),a}timeoutIdleLevels(n){const i=[];for(const l of ba(a=this.speakers).call(a)){var a;const u=n-l.getLastLevelChangedTime();36e5<u&&(this.dominantId==null||l.id!==this.dominantId)?i.push(l.id):300<u&&l.levelTimedOut()}i.forEach(l=>this.speakers.delete(l))}}const rp=new Map;let Oc=null,lS=null;const b6=3;let oh=[];const xc=new Map,uS=new Map;class Tfe{get samples(){return this.actives+this.inactives}get activeRate(){return this.actives/this.samples}constructor(n,i){ye(this,"id",void 0),ye(this,"track",void 0),ye(this,"score",0),ye(this,"active",!0),ye(this,"muted",!1),ye(this,"timer",0),ye(this,"actives",0),ye(this,"inactives",0),this.id=n,this.track=i,this.setActive(xc.size<3)}autoCheckActive(){this.autoSetActive(),this.autoAdjustActive(),this.resetTimer(),this.actives=0,this.inactives=0}autoSetActive(){const n=this.active;this.active=this.activeRate>=.8;const{actives:i,inactives:a}=function(){const l=[],u=[];return Array.from(ba(xc).call(xc)).forEach(h=>{h.active?l.push(h):u.push(h)}),{actives:l,inactives:u}}();if(i.length>3){let l;i.forEach(u=>{(!l||l.score>u.score)&&(l=u)}),l&&l.setActive(!1)}if(i.length<3&&a.length>0){let l;a.forEach(u=>{(!l||l.score<u.score)&&u.id!==this.id&&(l=u)}),l&&n&&!this.active&&(l.samples>40&&l.activeRate-this.activeRate>.4?l.setActive(!0):this.active=!0)}this.setMuted(!this.active)}setActive(n){this.active=n,this.resetTimer(),this.setMuted(!n)}autoAdjustActive(){this.active?this.autoSwitchToInactive():this.autoSwitchToActive()}autoSwitchToActive(){const n=function(i){let a;return Array.from(ba(xc).call(xc)).forEach(l=>{!l.active||l.id===i||l.samples<40||(!a||l.score<a.score)&&(a=l)}),a}(this.id);n&&this.activeRate-n.activeRate>.4&&(n.setActive(!1),this.setActive(!0))}autoSwitchToInactive(){const n=function(i){let a;return Array.from(ba(xc).call(xc)).forEach(l=>{l.active||l.id===i||l.samples<40||(!a||l.score>a.score)&&(a=l)}),a}(this.id);n&&n.activeRate-this.activeRate>.4&&(n.setActive(!0),this.setActive(!1))}addSample(n){n?this.actives+=1:this.inactives+=1,this.samples>66.66666666666667&&this.autoCheckActive()}setMuted(n){this.track&&(this.track.enabled=!n,this.muted=n)}resetTimer(){this.clearTimer(),this.timer=window.setTimeout(()=>{if(this.samples!==0)return this.samples<50?this.resetTimer():void this.autoCheckActive()},1e3)}clearTimer(){this.timer&&(clearTimeout(this.timer),this.timer=0)}}let dS;function T6(e){const n=xc.get(e);n&&(xc.delete(e),n.clearTimer())}const hS=new Map,Rfe=new Map,kI="video/h264",MI="video/h265";function R6(e,n,i){let a=new Uint8Array(e,n,i),l=[],u=0;for(;l.length<i;)u+3<i&&a[u]===0&&a[u+1]===0&&a[u+2]===3&&(a[u+3]===0||a[u+3]===1||a[u+3]===2||a[u+3]===3)?(l.push(a[u],a[u+1],a[u+3]),u+=4):(l.push(a[u]),u++);return new Uint8Array(l)}function w6(e){const n=e.length;let i=[],a=0;for(;a<n;)a+2<n&&e[a]===0&&e[a+1]===0&&(e[a+2]===0||e[a+2]===1||e[a+2]===2||e[a+2]===3)?(i.push(e[a],e[a+1],3,e[a+2]),a+=3):(i.push(e[a]),a++);return new Uint8Array(i)}function I6(e){if(e.length<5)return"";let n=-1;for(let l=0;l<e.length-3;l++){if(e[l]===0&&e[l+1]===0&&e[l+2]===1){n=l;break}if(l<e.length-4&&e[l]===0&&e[l+1]===0&&e[l+2]===0&&e[l+3]===1){n=l;break}}if(n===-1)return"";const i=n+(e[n+2]===0?4:3);if(i>=e.length)return"";const a=e[i];return 128&a?"":(a>>1&63)>=32||i+1<e.length&&!(248&e[i+1])?MI:(31&a)<=31?kI:""}const fS=new Map,D0=new Map;(function(){const e=yn();Di.getDisplayMedia=!(!navigator.mediaDevices||!navigator.mediaDevices.getDisplayMedia),Di.getStreamFromExtension=e.name===An.CHROME&&Number(e.version)>34,Di.supportUnifiedPlan=function(){if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;const n=new RTCPeerConnection;let i=!1;try{n.addTransceiver("audio"),i=!0}catch{}return n.close(),i}(),Di.supportMinBitrate=e.name===An.CHROME||e.name===An.EDGE,Di.supportSetRtpSenderParameters=function(){const n=yn();return!!(window.RTCRtpSender&&window.RTCRtpSender.prototype.setParameters&&window.RTCRtpSender.prototype.getParameters)&&(!!Gl()||!(!$i()&&!$_())||n.name===An.FIREFOX&&Number(n.version)>=64)}(),e.name===An.SAFARI&&(Number(e.version)>=14?Di.supportDualStream=!0:Di.supportDualStream=!1),Di.webAudioMediaStreamDest=function(){const n=yn();return!(n.name===An.SAFARI&&Number(n.version)<12)}(),Di.supportReplaceTrack=!!window.RTCRtpSender&&typeof RTCRtpSender.prototype.replaceTrack=="function",Di.supportWebGL=typeof WebGLRenderingContext<"u",Di.supportRequestFrame=!!window.CanvasCaptureMediaStreamTrack,Gl()||(Di.webAudioWithAEC=!0),Di.supportShareAudio=function(){const n=yn();return(n.os===Ci.WIN_10||n.os===Ci.WIN_81||n.os===Ci.WIN_7||n.os===Ci.LINUX||n.os===Ci.MAC_OS||n.os===Ci.CHROMIUM_OS)&&n.name===An.CHROME&&Number(n.version)>=74}(),Di.supportDataChannel=!!(Bf(76)||jw(68)||w3(14)),Di.supportPCSetConfiguration=function(){const n=window.RTCPeerConnection;return!Or()&&!!n&&n.prototype.setConfiguration instanceof Function}(),Di.supportWebRTCEncodedTransform=Bf(87)||b3()||jw(117),Di.supportWebRTCInsertableStream=function(){const n=yn();return(n.name===An.CHROME||n.name===An.EDGE)&&Number(n.version)>=94&&"MediaStreamTrackGenerator"in window&&"MediaStreamTrackProcessor"in window}(),Di.supportRequestVideoFrameCallback="requestVideoFrameCallback"in HTMLVideoElement.prototype,Di.supportWebCrypto=typeof window<"u"&&window.crypto!==void 0&&window.crypto.subtle!==void 0,W_(()=>{Di.supportDualStreamEncoding=function(){const n=yn();return!!Q("DISABLE_WEBAUDIO")||n.name==="Safari"&&Number(n.version)>=14||!!(n.name==="Chrome"&&/Windows/i.test(n.os||"")&&Number(n.version)>=100&&Q("CHROME_DUAL_STREAM_USE_ENCODING"))}(),k.debug("browser ua: ",navigator.userAgent),k.info("browser info: ",e),k.info("browser compatibility: ",Di)})})();const wfe=["CHINA","GLOBAL"],A6=[[0,1,2,3,4,5,5],[0,2,2,3,4,5,5],[0,3,3,3,4,5,5],[0,4,4,4,4,5,5],[0,5,5,5,5,5,5]],ah=[],ip=[];function sh(e,n){return!!n&&ah.some(i=>i.uid===e&&i.channelName===n)}function FI(){return ip.length>0}var Ife=HU.forEach,O6=gE("forEach")?[].forEach:function(e){return Ife(this,e,arguments.length>1?arguments[1]:void 0)};Vn({target:"Array",proto:!0,forced:[].forEach!==O6},{forEach:O6});var Afe=ks("Array","forEach"),Ofe=Iu,xfe=Jn,Nfe=T,Pfe=Afe,UI=Array.prototype,Dfe={DOMTokenList:!0,NodeList:!0},Lfe=function(e){var n=e.forEach;return e===UI||Nfe(UI,e)&&n===UI.forEach||xfe(Dfe,Ofe(e))?Pfe:n},kfe=c(Lfe),Mfe=cn,x6=CE;Vn({target:"Object",stat:!0,forced:d(function(){x6(1)})},{keys:function(e){return x6(Mfe(e))}});var Ffe=c(ut.Object.keys),Ufe=c(ZL),Bfe=c(tk),Vfe=Vn,N6=Wm,jfe=ME,$fe=Ze,P6=t1,Hfe=wu,zfe=ke,Wfe=SR,Gfe=hr,Kfe=Ou,Yfe=DU("slice"),qfe=Gfe("species"),BI=Array,Xfe=Math.max;Vfe({target:"Array",proto:!0,forced:!Yfe},{slice:function(e,n){var i,a,l,u=zfe(this),h=Hfe(u),p=P6(e,h),m=P6(n===void 0?h:n,h);if(N6(u)&&(i=u.constructor,(jfe(i)&&(i===BI||N6(i.prototype))||$fe(i)&&(i=i[qfe])===null)&&(i=void 0),i===BI||i===void 0))return Kfe(u,p,m);for(a=new(i===void 0?BI:i)(Xfe(m-p,0)),l=0;p<m;p++,l++)p in u&&Wfe(a,l,u[p]);return a.length=l,a}});var Jfe=ks("Array","slice"),Qfe=T,Zfe=Jfe,VI=Array.prototype,epe=function(e){var n=e.slice;return e===VI||Qfe(VI,e)&&n===VI.slice?Zfe:n},tpe=c(epe);function st(e,n,i,a,l){var u,h,p,m={};return kfe(u=Ffe(a)).call(u,function(E){m[E]=a[E]}),m.enumerable=!!m.enumerable,m.configurable=!!m.configurable,("value"in m||m.initializer)&&(m.writable=!0),m=Ufe(h=Bfe(p=tpe(i).call(i)).call(p)).call(h,function(E,S){return S(e,n,E)||E},m),l&&m.initializer!==void 0&&(m.value=m.initializer?m.initializer.call(l):void 0,m.initializer=void 0),m.initializer===void 0?(OU(e,n,m),null):m}let pS=function(e){return e[e.ACCESS_POINT=101]="ACCESS_POINT",e[e.UNILBS=201]="UNILBS",e[e.STRING_UID_ALLOCATOR=901]="STRING_UID_ALLOCATOR",e}({}),jI=function(e){return e[e.IIIEGAL_APPID=1]="IIIEGAL_APPID",e[e.IIIEGAL_UID=2]="IIIEGAL_UID",e[e.INTERNAL_ERROR=3]="INTERNAL_ERROR",e}({}),Ks=function(e){return e[e.INVALID_VENDOR_KEY=5]="INVALID_VENDOR_KEY",e[e.INVALID_CHANNEL_NAME=7]="INVALID_CHANNEL_NAME",e[e.INTERNAL_ERROR=8]="INTERNAL_ERROR",e[e.NO_AUTHORIZED=9]="NO_AUTHORIZED",e[e.DYNAMIC_KEY_TIMEOUT=10]="DYNAMIC_KEY_TIMEOUT",e[e.NO_ACTIVE_STATUS=11]="NO_ACTIVE_STATUS",e[e.DYNAMIC_KEY_EXPIRED=13]="DYNAMIC_KEY_EXPIRED",e[e.STATIC_USE_DYNAMIC_KEY=14]="STATIC_USE_DYNAMIC_KEY",e[e.DYNAMIC_USE_STATIC_KEY=15]="DYNAMIC_USE_STATIC_KEY",e[e.USER_OVERLOAD=16]="USER_OVERLOAD",e[e.FORBIDDEN_REGION=18]="FORBIDDEN_REGION",e[e.CANNOT_MEET_AREA_DEMAND=19]="CANNOT_MEET_AREA_DEMAND",e}({}),Do=function(e){return e[e.NO_FLAG_SET=100]="NO_FLAG_SET",e[e.FLAG_SET_BUT_EMPTY=101]="FLAG_SET_BUT_EMPTY",e[e.INVALID_FALG_SET=102]="INVALID_FALG_SET",e[e.FLAG_SET_BUT_NO_RE=103]="FLAG_SET_BUT_NO_RE",e[e.INVALID_SERVICE_ID=104]="INVALID_SERVICE_ID",e[e.NO_SERVICE_AVAILABLE=200]="NO_SERVICE_AVAILABLE",e[e.NO_SERVICE_AVAILABLE_P2P=201]="NO_SERVICE_AVAILABLE_P2P",e[e.NO_SERVICE_AVAILABLE_VOICE=202]="NO_SERVICE_AVAILABLE_VOICE",e[e.NO_SERVICE_AVAILABLE_WEBRTC=203]="NO_SERVICE_AVAILABLE_WEBRTC",e[e.NO_SERVICE_AVAILABLE_CDS=204]="NO_SERVICE_AVAILABLE_CDS",e[e.NO_SERVICE_AVAILABLE_CDN=205]="NO_SERVICE_AVAILABLE_CDN",e[e.NO_SERVICE_AVAILABLE_TDS=206]="NO_SERVICE_AVAILABLE_TDS",e[e.NO_SERVICE_AVAILABLE_REPORT=207]="NO_SERVICE_AVAILABLE_REPORT",e[e.NO_SERVICE_AVAILABLE_APP_CENTER=208]="NO_SERVICE_AVAILABLE_APP_CENTER",e[e.NO_SERVICE_AVAILABLE_ENV0=209]="NO_SERVICE_AVAILABLE_ENV0",e[e.NO_SERVICE_AVAILABLE_VOET=210]="NO_SERVICE_AVAILABLE_VOET",e[e.NO_SERVICE_AVAILABLE_STRING_UID=211]="NO_SERVICE_AVAILABLE_STRING_UID",e[e.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS=212]="NO_SERVICE_AVAILABLE_WEBRTC_UNILBS",e[e.NO_SERVICE_AVAILABLE_UNILBS_FLV=213]="NO_SERVICE_AVAILABLE_UNILBS_FLV",e}({}),Rt=function(e){return e[e.K_TIMESTAMP_EXPIRED=2]="K_TIMESTAMP_EXPIRED",e[e.K_CHANNEL_PERMISSION_INVALID=3]="K_CHANNEL_PERMISSION_INVALID",e[e.K_CERTIFICATE_INVALID=4]="K_CERTIFICATE_INVALID",e[e.K_CHANNEL_NAME_EMPTY=5]="K_CHANNEL_NAME_EMPTY",e[e.K_CHANNEL_NOT_FOUND=6]="K_CHANNEL_NOT_FOUND",e[e.K_TICKET_INVALID=7]="K_TICKET_INVALID",e[e.K_CHANNEL_CONFLICTED=8]="K_CHANNEL_CONFLICTED",e[e.K_SERVICE_NOT_READY=9]="K_SERVICE_NOT_READY",e[e.K_SERVICE_TOO_HEAVY=10]="K_SERVICE_TOO_HEAVY",e[e.K_UID_BANNED=14]="K_UID_BANNED",e[e.K_IP_BANNED=15]="K_IP_BANNED",e[e.K_CHANNEL_BANNED=16]="K_CHANNEL_BANNED",e[e.DATASTREAM2_NOT_AVAILABLE=27]="DATASTREAM2_NOT_AVAILABLE",e[e.K_AUTO_REBALANCE=28]="K_AUTO_REBALANCE",e[e.WARN_NO_AVAILABLE_CHANNEL=103]="WARN_NO_AVAILABLE_CHANNEL",e[e.WARN_LOOKUP_CHANNEL_TIMEOUT=104]="WARN_LOOKUP_CHANNEL_TIMEOUT",e[e.WARN_LOOKUP_CHANNEL_REJECTED=105]="WARN_LOOKUP_CHANNEL_REJECTED",e[e.WARN_OPEN_CHANNEL_TIMEOUT=106]="WARN_OPEN_CHANNEL_TIMEOUT",e[e.WARN_OPEN_CHANNEL_REJECTED=107]="WARN_OPEN_CHANNEL_REJECTED",e[e.WARN_REQUEST_DEFERRED=108]="WARN_REQUEST_DEFERRED",e[e.ERR_DYNAMIC_KEY_TIMEOUT=109]="ERR_DYNAMIC_KEY_TIMEOUT",e[e.ERR_NO_AUTHORIZED=110]="ERR_NO_AUTHORIZED",e[e.ERR_VOM_SERVICE_UNAVAILABLE=111]="ERR_VOM_SERVICE_UNAVAILABLE",e[e.ERR_NO_CHANNEL_AVAILABLE_CODE=112]="ERR_NO_CHANNEL_AVAILABLE_CODE",e[e.ERR_MASTER_VOCS_UNAVAILABLE=114]="ERR_MASTER_VOCS_UNAVAILABLE",e[e.ERR_INTERNAL_ERROR=115]="ERR_INTERNAL_ERROR",e[e.ERR_NO_ACTIVE_STATUS=116]="ERR_NO_ACTIVE_STATUS",e[e.ERR_INVALID_UID=117]="ERR_INVALID_UID",e[e.ERR_DYNAMIC_KEY_EXPIRED=118]="ERR_DYNAMIC_KEY_EXPIRED",e[e.ERR_STATIC_USE_DYANMIC_KE=119]="ERR_STATIC_USE_DYANMIC_KE",e[e.ERR_DYNAMIC_USE_STATIC_KE=120]="ERR_DYNAMIC_USE_STATIC_KE",e[e.ERR_NO_VOCS_AVAILABLE=2e3]="ERR_NO_VOCS_AVAILABLE",e[e.ERR_NO_VOS_AVAILABLE=2001]="ERR_NO_VOS_AVAILABLE",e[e.ERR_JOIN_CHANNEL_TIMEOUT=2002]="ERR_JOIN_CHANNEL_TIMEOUT",e[e.ERR_REPEAT_JOIN_CHANNEL=2003]="ERR_REPEAT_JOIN_CHANNEL",e[e.ERR_JOIN_BY_MULTI_IP=2004]="ERR_JOIN_BY_MULTI_IP",e[e.ERR_NOT_JOINED=2011]="ERR_NOT_JOINED",e[e.ERR_REPEAT_JOIN_REQUEST=2012]="ERR_REPEAT_JOIN_REQUEST",e[e.ERR_INVALID_VENDOR_KEY=2013]="ERR_INVALID_VENDOR_KEY",e[e.ERR_INVALID_CHANNEL_NAME=2014]="ERR_INVALID_CHANNEL_NAME",e[e.ERR_INVALID_STRINGUID=2015]="ERR_INVALID_STRINGUID",e[e.ERR_TOO_MANY_USERS=2016]="ERR_TOO_MANY_USERS",e[e.ERR_SET_CLIENT_ROLE_TIMEOUT=2017]="ERR_SET_CLIENT_ROLE_TIMEOUT",e[e.ERR_SET_CLIENT_ROLE_NO_PERMISSION=2018]="ERR_SET_CLIENT_ROLE_NO_PERMISSION",e[e.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE=2019]="ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",e[e.ERR_PUBLISH_REQUEST_INVALID=2020]="ERR_PUBLISH_REQUEST_INVALID",e[e.ERR_SUBSCRIBE_REQUEST_INVALID=2021]="ERR_SUBSCRIBE_REQUEST_INVALID",e[e.ERR_NOT_SUPPORTED_MESSAGE=2022]="ERR_NOT_SUPPORTED_MESSAGE",e[e.ERR_ILLEAGAL_PLUGIN=2023]="ERR_ILLEAGAL_PLUGIN",e[e.ERR_REJOIN_TOKEN_INVALID=2024]="ERR_REJOIN_TOKEN_INVALID",e[e.ERR_REJOIN_USER_NOT_JOINED=2025]="ERR_REJOIN_USER_NOT_JOINED",e[e.ERR_INVALID_OPTIONAL_INFO=2027]="ERR_INVALID_OPTIONAL_INFO",e[e.ILLEGAL_AES_PASSWORD=2028]="ILLEGAL_AES_PASSWORD",e[e.ILLEGAL_CLIENT_ROLE_LEVEL=2029]="ILLEGAL_CLIENT_ROLE_LEVEL",e[e.ERR_TOO_MANY_BROADCASTERS=2031]="ERR_TOO_MANY_BROADCASTERS",e[e.ERR_TOO_MANY_SUBSCRIBERS=2032]="ERR_TOO_MANY_SUBSCRIBERS",e[e.ERR_LICENSE_MISSING=32769]="ERR_LICENSE_MISSING",e[e.ERR_LICENSE_EXPIRED=32771]="ERR_LICENSE_EXPIRED",e[e.ERR_LICENSE_MINUTES_EXCEEDED=32773]="ERR_LICENSE_MINUTES_EXCEEDED",e[e.ERR_LICENSE_PERIOD_INVALID=32774]="ERR_LICENSE_PERIOD_INVALID",e[e.ERR_LICENSE_MULTIPLE_SDK_SERVICE=32778]="ERR_LICENSE_MULTIPLE_SDK_SERVICE",e[e.ERR_LICENSE_ILLEGAL=32783]="ERR_LICENSE_ILLEGAL",e[e.ERR_TEST_RECOVER=9e3]="ERR_TEST_RECOVER",e[e.ERR_TEST_TRYNEXT=9001]="ERR_TEST_TRYNEXT",e[e.ERR_TEST_RETRY=9002]="ERR_TEST_RETRY",e}({}),ir=function(e){return e.CONNECTING="connecting",e.CONNECTED="connected",e.RECONNECTING="reconnecting",e.CLOSED="closed",e}({}),Mt=function(e){return e.WS_CONNECTED="ws_connected",e.WS_RECONNECTING="ws_reconnecting",e.WS_CLOSED="ws_closed",e.WS_RECONNECT_CREATE_CONNECTION="ws_reconnect_create_connection",e.ON_BINARY_DATA="on_binary_data",e.REQUEST_RECOVER="request_recover",e.REQUEST_JOIN_INFO="request_join_info",e.REQUEST_REJOIN_INFO="req_rejoin_info",e.IS_P2P_DISCONNECTED="is_p2p_dis",e.DISCONNECT_P2P="dis_p2p",e.ABORT_P2P_EXECUTION="abort_p2p_execution",e.NEED_RENEW_SESSION="need-sid",e.REPORT_JOIN_GATEWAY="report_join_gateway",e.REQUEST_TIMEOUT="request_timeout",e.REQUEST_SUCCESS="request_success",e.JOIN_RESPONSE="join_response",e.PRE_CONNECT_PC="pre_connect_pc",e.P2P_CONNECTION="p2p_connection",e.P2P_REMOTE_CANDIDATE_UPDATE="p2p_remote_candidate_update",e.P2P_SUBSCRIBE="p2p_subscribe",e.P2P_UNSUBSCRIBE="p2p_unsubscribe",e.P2P_EXCHANGE_SDP="p2p_exchange_sdp",e.P2P_ON_ADD_VIDEO_STREAM="p2p_on_add_video_stream",e.P2P_ON_ADD_AUDIO_STREAM="p2p_on_add_audio_stream",e.RECOVER_NOTIFICATION="recover_notification",e}({}),xt=function(e){return e.PING="ping",e.PING_BACK="ping_back",e.JOIN="join_v3",e.REJOIN="rejoin_v3",e.LEAVE="leave",e.SET_CLIENT_ROLE="set_client_role",e.PUBLISH="publish",e.PUBLISH_DATASTREAM="publish_datastream",e.UNPUBLISH="unpublish",e.UNPUBLISH_DATASTREAM="unpublish_datastream",e.SUBSCRIBE="subscribe",e.PRE_SUBSCRIBE="pre_subscribe",e.SUBSCRIBE_DATASTREAM="subscribe_datastream",e.SUBSCRIBE_STREAMS="subscribe_streams",e.UNSUBSCRIBE="unsubscribe",e.UNSUBSCRIBE_DATASTREAM="unsubscribe_datastream",e.UNSUBSCRIBE_STREAMS="unsubscribe_streams",e.SUBSCRIBE_CHANGE="subscribe_change",e.TRAFFIC_STATS="traffic_stats",e.RENEW_TOKEN="renew_token",e.SWITCH_VIDEO_STREAM="switch_video_stream",e.DEFAULT_VIDEO_STREAM="default_video_stream",e.SET_FALLBACK_OPTION="set_fallback_option",e.GATEWAY_INFO="gateway_info",e.CONTROL="control",e.SEND_METADATA="send_metadata",e.DATA_STREAM="data_stream",e.PICK_SVC_LAYER="pick_svc_layer",e.RESTART_ICE="restart_ice",e.CONNECT_PC="connect_pc",e.SET_VIDEO_PROFILE="set_video_profile",e.SET_PARAMETER="set_parameter",e.SET_RTM2_FLAG="set_rtm2_flag",e.DOWNGRADE_CODEC="downgrade_codec",e}({}),L0=function(e){return e.WRTC_STATS="wrtc_stats",e.WS_INFLATE_DATA_LENGTH="ws_inflate_data_length",e.DENOISER_STATS="denoiser_stats",e.EXTENSION_USAGE_STATS="extension_usage_stats",e}({}),mn=function(e){return e.ON_USER_ONLINE="on_user_online",e.ON_USER_OFFLINE="on_user_offline",e.ON_STREAM_FALLBACK_UPDATE="on_stream_fallback_update",e.ON_PUBLISH_STREAM="on_publish_stream",e.ON_UPLINK_STATS="on_uplink_stats",e.ON_P2P_LOST="on_p2p_lost",e.ON_REMOVE_STREAM="on_remove_stream",e.ON_ADD_AUDIO_STREAM="on_add_audio_stream",e.ON_ADD_VIDEO_STREAM="on_add_video_stream",e.ON_TOKEN_PRIVILEGE_WILL_EXPIRE="on_token_privilege_will_expire",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE="on_token_privilege_did_expire",e.ON_USER_BANNED="on_user_banned",e.ON_USER_LICENSE_BANNED="on_user_license_banned",e.ON_NOTIFICATION="on_notification",e.ON_CRYPT_ERROR="on_crypt_error",e.MUTE_AUDIO="mute_audio",e.MUTE_VIDEO="mute_video",e.UNMUTE_AUDIO="unmute_audio",e.UNMUTE_VIDEO="unmute_video",e.ON_P2P_OK="on_p2p_ok",e.RECEIVE_METADATA="receive_metadata",e.ON_DATA_STREAM="on_data_stream",e.ON_RTP_CAPABILITY_CHANGE="on_rtp_capability_change",e.ON_REMOTE_DATASTREAM_UPDATE="on_remote_datastream_update",e.ON_REMOTE_FULL_DATASTREAM_INFO="on_remote_full_datastream_info",e.ENABLE_LOCAL_VIDEO="enable_local_video",e.DISABLE_LOCAL_VIDEO="disable_local_video",e.ENABLE_LOCAL_AUDIO="enable_local_audio",e.DISABLE_LOCAL_AUDIO="disable_local_audio",e.ON_PUBLISHED_USER_LIST="on_published_user_list",e}({}),Lo=function(e){return e.SEND_ONLY="SEND_ONLY",e.RECEIVE_ONLY="RECEIVE_ONLY",e}({}),Xt=function(e){return e.CONNECTED="websocket:connected",e.RECONNECTING="websocket:reconnecting",e.WILL_RECONNECT="websocket:will_reconnect",e.CLOSED="websocket:closed",e.FAILED="websocket:failed",e.ON_MESSAGE="websocket:on_message",e.REQUEST_NEW_URLS="websocket:request_new_urls",e.RECONNECT_CREATE_CONNECTION="websocket:reconnect_create_connection",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE="websocket:on_token_privilege_did_expire",e}({});function mS(e){if(typeof e!="string"||!/^[a-zA-Z0-9 \!\#\$\%\&\(\)\+\-\:\;\<\=\.\>\?\@\[\]\^\_\{\}\|\~\,]{1,64}$/.test(e))throw k.error("Invalid Channel Name ".concat(e)),new Ce(X.INVALID_PARAMS,"The length must be within 64 bytes. The supported characters: a-z,A-Z,0-9,space,!, #, $, %, &, (, ), +, -, :, ;, <, =, ., >, ?, @, [, ], ^, _,  {, }, |, ~, ,")}function gS(e){if(n=e,!(typeof n=="number"&&Math.floor(n)===n&&0<=n&&n<=4294967295||L3(e,1,255)))throw new Ce(X.INVALID_PARAMS,"[String uid] Length of the string: [1,255]. ASCII characters only. [Number uid] The value range is [0,10000]");var n;typeof e=="string"&&k.warn("You input a string as the user ID, to ensure better end-user experience, Agora highly suggests not using a string as the user ID.")}let ml=function(e){return e.TRANSCODE="mix_streaming",e.RAW="raw_streaming",e}({});const npe={alpha:1,height:640,width:360,x:0,y:0,zOrder:0,audioChannel:0},$I={x:0,y:0,width:160,height:160,zOrder:255,alpha:1};function HI(e,n){Ni(e.url,"".concat(n,".url"),1,1e3,!1),xr(e.x)||Yn(e.x,"".concat(n,".x"),0,1e4),xr(e.y)||Yn(e.y,"".concat(n,".y"),0,1e4),xr(e.width)||Yn(e.width,"".concat(n,".width"),0,1e4),xr(e.height)||Yn(e.height,"".concat(n,".height"),0,1e4),xr(e.zOrder)||Yn(e.zOrder,"".concat(n,".zOrder"),0,255),xr(e.alpha)||Yn(e.alpha,"".concat(n,".alpha"),0,1,!1)}const rpe={audioBitrate:48,audioChannels:1,audioSampleRate:48e3,backgroundColor:0,height:360,lowLatency:!1,videoBitrate:400,videoCodecProfile:100,videoCodecType:1,videoFrameRate:15,videoGop:30,width:640,images:[],userConfigs:[],userConfigExtraInfo:""};let ju=function(e){return e.WARNING="@live_uap-warning",e.ERROR="@line_uap-error",e.PUBLISH_STREAM_STATUS="@live_uap-publish-status",e.WORKER_STATUS="@live_uap-worker-status",e.REQUEST_NEW_ADDRESS="@live_uap-request-address",e}({}),zI=function(e){return e.REQUEST_WORKER_MANAGER_LIST="@live_req_worker_manager",e}({}),di=function(e){return e[e.LIVE_STREAM_RESPONSE_SUCCEED=200]="LIVE_STREAM_RESPONSE_SUCCEED",e[e.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM=454]="LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM",e[e.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR=450]="LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR",e[e.LIVE_STREAM_RESPONSE_BAD_STREAM=451]="LIVE_STREAM_RESPONSE_BAD_STREAM",e[e.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR=400]="LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR",e[e.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST=404]="LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST",e[e.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED=456]="LIVE_STREAM_RESPONSE_NOT_AUTHORIZED",e[e.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE=457]="LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE",e[e.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN=429]="LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN",e[e.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH=452]="LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH",e[e.LIVE_STREAM_RESPONSE_NOT_SUPPORTED=453]="LIVE_STREAM_RESPONSE_NOT_SUPPORTED",e[e.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM=455]="LIVE_STREAM_RESPONSE_MAX_STREAM_NUM",e[e.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR=500]="LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR",e[e.LIVE_STREAM_RESPONSE_WORKER_LOST=501]="LIVE_STREAM_RESPONSE_WORKER_LOST",e[e.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT=502]="LIVE_STREAM_RESPONSE_RESOURCE_LIMIT",e[e.LIVE_STREAM_RESPONSE_WORKER_QUIT=503]="LIVE_STREAM_RESPONSE_WORKER_QUIT",e[e.ERROR_FAIL_SEND_MESSAGE=504]="ERROR_FAIL_SEND_MESSAGE",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE=30]="PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT=31]="PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH=32]="PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH",e[e.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN=33]="PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN",e}({});function D6(e){if(!e.channelName)throw new Ce(X.INVALID_PARAMS,"invalid channelName in info");if(typeof e.uid!="number")throw new Ce(X.INVALID_PARAMS,"invalid uid in info, uid must be a number");return e.token&&Ni(e.token,"info.token",1,2047),gS(e.uid),mS(e.channelName),!0}let ko=function(e){return e[e.SetSdkProfile=0]="SetSdkProfile",e[e.SetSourceChannel=1]="SetSourceChannel",e[e.SetSourceUserId=2]="SetSourceUserId",e[e.SetDestChannel=3]="SetDestChannel",e[e.StartPacketTransfer=4]="StartPacketTransfer",e[e.StopPacketTransfer=5]="StopPacketTransfer",e[e.UpdateDestChannel=6]="UpdateDestChannel",e[e.Reconnect=7]="Reconnect",e[e.SetVideoProfile=8]="SetVideoProfile",e}({}),Yl=function(e){return e.NETWORK_DISCONNECTED="NETWORK_DISCONNECTED",e.NETWORK_CONNECTED="NETWORK_CONNECTED",e.PACKET_JOINED_SRC_CHANNEL="PACKET_JOINED_SRC_CHANNEL",e.PACKET_JOINED_DEST_CHANNEL="PACKET_JOINED_DEST_CHANNEL",e.PACKET_SENT_TO_DEST_CHANNEL="PACKET_SENT_TO_DEST_CHANNEL",e.PACKET_RECEIVED_VIDEO_FROM_SRC="PACKET_RECEIVED_VIDEO_FROM_SRC",e.PACKET_RECEIVED_AUDIO_FROM_SRC="PACKET_RECEIVED_AUDIO_FROM_SRC",e.PACKET_UPDATE_DEST_CHANNEL="PACKET_UPDATE_DEST_CHANNEL",e.PACKET_UPDATE_DEST_CHANNEL_REFUSED="PACKET_UPDATE_DEST_CHANNEL_REFUSED",e.PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE="PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE",e}({}),la=function(e){return e.RELAY_STATE_IDLE="RELAY_STATE_IDLE",e.RELAY_STATE_CONNECTING="RELAY_STATE_CONNECTING",e.RELAY_STATE_RUNNING="RELAY_STATE_RUNNING",e.RELAY_STATE_FAILURE="RELAY_STATE_FAILURE",e}({}),op=function(e){return e.RELAY_OK="RELAY_OK",e.SERVER_CONNECTION_LOST="SERVER_CONNECTION_LOST",e.SRC_TOKEN_EXPIRED="SRC_TOKEN_EXPIRED",e.DEST_TOKEN_EXPIRED="DEST_TOKEN_EXPIRED",e}({}),Bn=function(e){return e.High="high",e.Low="low",e.Audio="audio",e.Screen="screen",e.ScreenLow="screen_low",e}({}),wi=function(e){return e.DISCONNECT="disconnect",e.CONNECTION_STATE_CHANGE="connection-state-change",e.NETWORK_QUALITY="network-quality",e.STREAM_TYPE_CHANGE="stream-type-change",e.IS_P2P_DISCONNECTED="is-p2p-dis",e.DISCONNECT_P2P="dis-p2p",e.REQUEST_NEW_GATEWAY_LIST="req-gate-url",e.NEED_RENEW_SESSION="need-sid",e.REQUEST_P2P_CONNECTION_PARAMS="request-p2p-connection-params",e.JOIN_RESPONSE="join-response",e.RESET_CONNECTION_EVENTS="reset-connection-events",e.PRE_CONNECT_PC="pre-connect_pc",e.UPDATE_GATEWAY_CONFIG="update-gateway-config",e}({}),vS=function(e){return e.P2P_DISCONNECTED="P2P_DISCONNECTED",e.A_ROUND_WS_FAILED="A_ROUND_WS_FAILED",e.TIMEOUT="TIMEOUT",e.UNKNOWN_REASON="UNKNOWN_REASON",e}({}),bi=function(e){return e[e.Nothing=0]="Nothing",e[e.Audio=1]="Audio",e[e.LwoVideo=2]="LwoVideo",e[e.Video=4]="Video",e[e.Data=8]="Data",e[e.DataStream0=256]="DataStream0",e[e.DataStream1=512]="DataStream1",e[e.DataStream2=1024]="DataStream2",e[e.DataStream3=2048]="DataStream3",e[e.DataStream4=4096]="DataStream4",e[e.DataStream5=8192]="DataStream5",e[e.DataStream6=16384]="DataStream6",e[e.DataStream7=32768]="DataStream7",e}({}),Dn=function(e){return e.CHINA="CHINA",e.ASIA="ASIA",e.NORTH_AMERICA="NORTH_AMERICA",e.EUROPE="EUROPE",e.JAPAN="JAPAN",e.INDIA="INDIA",e.KOREA="KOREA",e.HKMC="HKMC",e.US="US",e.OCEANIA="OCEANIA",e.SOUTH_AMERICA="SOUTH_AMERICA",e.AFRICA="AFRICA",e.OVERSEA="OVERSEA",e.GLOBAL="GLOBAL",e.EXTENSIONS="EXTENSIONS",e}({});const L6=[Dn.AFRICA,Dn.ASIA,Dn.CHINA,Dn.EUROPE,Dn.GLOBAL,Dn.INDIA,Dn.JAPAN,Dn.NORTH_AMERICA,Dn.OCEANIA,Dn.OVERSEA,Dn.SOUTH_AMERICA];let Ji=function(e){return e.CHINA="CN",e.ASIA="AS",e.NORTH_AMERICA="NA",e.EUROPE="EU",e.JAPAN="JP",e.INDIA="IN",e.KOREA="KR",e.HKMC="HK",e.US="US",e.OCEANIA="OC",e.SOUTH_AMERICA="SA",e.AFRICA="AF",e.OVERSEA="OVERSEA",e.GLOBAL="GLOBAL",e.EXTENSIONS="GLOBAL",e}({});const ES={CHINA:{},ASIA:{CODE:Ji.ASIA,WEBCS_DOMAIN:["ap-web-1-asia.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-asia.agora.io"],PROXY_CS:["proxy-ap-web-asia.agora.io"],CDS_AP:["cds-ap-web-asia.agora.io","cds-ap-web-asia2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-asia.agora.io","sua-ap-web-asia2.agora.io"],UAP_AP:["uap-ap-web-asia.agora.io","uap-ap-web-asia2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-asia.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-asia.agora.io"],LOG_UPLOAD_SERVER:["logservice-asia.agora.io"],PROXY_SERVER_TYPE3:["southeast-asia.webrtc-cloud-proxy.sd-rtn.com"]},NORTH_AMERICA:{CODE:Ji.NORTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-north-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-north-america.agora.io"],PROXY_CS:["proxy-ap-web-america.agora.io"],CDS_AP:["cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],UAP_AP:["uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-north-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-north-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-north-america.agora.io"],PROXY_SERVER_TYPE3:["east-usa.webrtc-cloud-proxy.sd-rtn.com"]},EUROPE:{CODE:Ji.EUROPE,WEBCS_DOMAIN:["ap-web-1-europe.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-europe.agora.io"],PROXY_CS:["proxy-ap-web-europe.agora.io"],CDS_AP:["cds-ap-web-europe.agora.io","cds-ap-web-europe2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-europe.agora.io","sua-ap-web-europe.agora.io"],UAP_AP:["uap-ap-web-europe.agora.io","uap-ap-web-europe2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-europe.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-europe.agora.io"],LOG_UPLOAD_SERVER:["logservice-europe.agora.io"],PROXY_SERVER_TYPE3:["europe.webrtc-cloud-proxy.sd-rtn.com"]},JAPAN:{CODE:Ji.JAPAN,WEBCS_DOMAIN:["ap-web-1-japan.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-japan.agora.io"],PROXY_CS:["proxy-ap-web-japan.agora.io"],CDS_AP:["cds-ap-web-japan.agora.io","cds-ap-web-japan2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-japan.agora.io","sua-ap-web-japan2.agora.io"],UAP_AP:["uap-ap-web-japan.agora.io","uap-ap-web-japan2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-japan.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-japan.agora.io"],LOG_UPLOAD_SERVER:["logservice-japan.agora.io"],PROXY_SERVER_TYPE3:["japan.webrtc-cloud-proxy.sd-rtn.com"]},INDIA:{CODE:Ji.INDIA,WEBCS_DOMAIN:["ap-web-1-india.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-india.agora.io"],PROXY_CS:["proxy-ap-web-india.agora.io"],CDS_AP:["cds-ap-web-india.agora.io","cds-ap-web-india2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-india.agora.io","sua-ap-web-india2.agora.io"],UAP_AP:["uap-ap-web-india.agora.io","uap-ap-web-india2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-india.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-india.agora.io"],LOG_UPLOAD_SERVER:["logservice-india.agora.io"],PROXY_SERVER_TYPE3:["india.webrtc-cloud-proxy.sd-rtn.com"]},KOREA:{CODE:Ji.KOREA,WEBCS_DOMAIN:["ap-web-1-korea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-korea.agora.io"],PROXY_CS:["proxy-ap-web-korea.agora.io"],CDS_AP:["cds-ap-web-korea.agora.io","cds-ap-web-korea2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-korea.agora.io","sua-ap-web-korea2.agora.io"],UAP_AP:["uap-ap-web-korea.agora.io","uap-ap-web-korea2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-korea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-korea.agora.io"],LOG_UPLOAD_SERVER:["logservice-korea.agora.io"],PROXY_SERVER_TYPE3:["korea.webrtc-cloud-proxy.sd-rtn.com"]},HKMC:{CODE:Ji.HKMC,WEBCS_DOMAIN:["ap-web-1-hkmc.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-hkmc.agora.io"],PROXY_CS:["proxy-ap-web-hkmc.agora.io"],CDS_AP:["cds-ap-web-hkmc.agora.io","cds-ap-web-hkmc2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-hkmc.agora.io","sua-ap-web-hkmc2.agora.io"],UAP_AP:["uap-ap-web-hkmc.agora.io","uap-ap-web-hkmc2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-hkmc.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-hkmc.agora.io"],LOG_UPLOAD_SERVER:["logservice-hkmc.agora.io"],PROXY_SERVER_TYPE3:["hkmc.webrtc-cloud-proxy.sd-rtn.com"]},US:{CODE:Ji.US,WEBCS_DOMAIN:["ap-web-1-us.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-us.agora.io"],PROXY_CS:["proxy-ap-web-us.agora.io"],CDS_AP:["cds-ap-web-us.agora.io","cds-ap-web-us2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-us.agora.io","sua-ap-web-us2.agora.io"],UAP_AP:["uap-ap-web-us.agora.io","uap-ap-web-us2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-us.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-us.agora.io"],LOG_UPLOAD_SERVER:["logservice-us.agora.io"],PROXY_SERVER_TYPE3:["us.webrtc-cloud-proxy.sd-rtn.com"]},OVERSEA:{CODE:Ji.OVERSEA,WEBCS_DOMAIN:["ap-web-1-oversea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oversea.agora.io"],PROXY_CS:["proxy-ap-web-oversea.agora.io"],CDS_AP:["cds-ap-web-oversea.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oversea.agora.io"],UAP_AP:["uap-ap-web-oversea.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oversea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oversea.agora.io"],LOG_UPLOAD_SERVER:["logservice-oversea.agora.io"],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.agora.io"]},GLOBAL:{CODE:Ji.GLOBAL,WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-ap-web-3.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-ap-web-3.agora.io"],UAP_AP:["uap-ap-web-1.agora.io","uap-ap-web-3.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2.agora.io"],LOG_UPLOAD_SERVER:["logservice.agora.io"],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com"]},OCEANIA:{CODE:Ji.OCEANIA,WEBCS_DOMAIN:["ap-web-1-oceania.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oceania.agora.io"],PROXY_CS:["proxy-ap-web-oceania.agora.io"],CDS_AP:["cds-ap-web-oceania.agora.io","cds-ap-web-oceania2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oceania.agora.io","sua-ap-web-oceania2.agora.io"],UAP_AP:["uap-ap-web-oceania.agora.io","uap-ap-web-oceania2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oceania.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oceania.agora.io"],LOG_UPLOAD_SERVER:["logservice-oceania.agora.io"],PROXY_SERVER_TYPE3:["oceania.webrtc-cloud-proxy.sd-rtn.com"]},SOUTH_AMERICA:{CODE:Ji.SOUTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-south-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-south-america.agora.io"],PROXY_CS:["proxy-ap-web-south-america.agora.io"],CDS_AP:["cds-ap-web-south-america.agora.io","cds-ap-web-south-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-south-america.agora.io","sua-ap-web-south-america2.agora.io"],UAP_AP:["uap-ap-web-south-america.agora.io","uap-ap-web-south-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-south-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-south-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-america.agora.io"],PROXY_SERVER_TYPE3:["south-america.webrtc-cloud-proxy.sd-rtn.com"]},AFRICA:{CODE:Ji.AFRICA,WEBCS_DOMAIN:["ap-web-1-africa.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-africa.agora.io"],PROXY_CS:["proxy-ap-web-africa.agora.io"],CDS_AP:["cds-ap-web-africa.agora.io","cds-ap-web-africa2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-africa.agora.io","sua-ap-web-africa2.agora.io"],UAP_AP:["uap-ap-web-africa.agora.io","uap-ap-web-africa2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-africa.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-africa.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-africa.agora.io"],PROXY_SERVER_TYPE3:["africa.webrtc-cloud-proxy.sd-rtn.com"]},EXTENSIONS:{}};sI&&(ES.CHINA={CODE:Ji.CHINA,WEBCS_DOMAIN:["webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["proxy-web.ap.sd-rtn.com"],CDS_AP:["cds-web-2.ap.sd-rtn.com","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-web-2.ap.sd-rtn.com","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-web-2.ap.sd-rtn.com","uap-web-4.ap.sd-rtn.com"],EVENT_REPORT_DOMAIN:["web-3.statscollector.sd-rtn.com"],EVENT_REPORT_BACKUP_DOMAIN:["web-4.statscollector.sd-rtn.com"],LOG_UPLOAD_SERVER:["logservice-china.agora.io"],PROXY_SERVER_TYPE3:["east-cn.webrtc-cloud-proxy.sd-rtn.com"]});let k0=function(e){return e.UPDATE_BITRATE_LIMIT="update_bitrate_limit",e.UPDATE_CLIENT_ROLE_OPTIONS="update_client_role_options",e}({});function k6(e){return!!e&&!(!e.uplink||!e.id)&&e.uplink.max_bitrate!==void 0&&e.uplink.min_bitrate!==void 0}class M6 extends br{constructor(n,i){super(),W(this,"onICEConnectionStateChange",void 0),W(this,"onConnectionStateChange",void 0),W(this,"onDTLSTransportStateChange",void 0),W(this,"onDTLSTransportError",void 0),W(this,"onICETransportStateChange",void 0),W(this,"onFirstAudioReceived",void 0),W(this,"onFirstVideoReceived",void 0),W(this,"onFirstAudioDecoded",void 0),W(this,"onFirstVideoDecoded",void 0),W(this,"onFirstVideoRender",void 0),W(this,"onFirstVideoDecodedTimeout",void 0),W(this,"onSelectedLocalCandidateChanged",void 0),W(this,"onSelectedRemoteCandidateChanged",void 0),W(this,"onICECandidateError",void 0),W(this,"getLocalVideoStats",void 0)}}class F6 extends M6{constructor(n,i){super(n,i),W(this,"establishPromise",void 0)}}let it=function(e){return e.VIDEO="video",e.AUDIO="audio",e}({}),Qi=function(e){return e.UDP_RELAY="udp_relay",e.UDP_TCP_RELAY="udp_tcp_relay",e.TCP_RELAY="tcp_relay",e.RELAY="relay",e}({}),ql=function(e){return e[e.FIRST_CONNECTION=0]="FIRST_CONNECTION",e[e.UDP_TCP_RESTART=1]="UDP_TCP_RESTART",e[e.RELAY_RESTART=2]="RELAY_RESTART",e[e.TCP_RESTART=3]="TCP_RESTART",e[e.OLD_FIRST_CONNECTION=10]="OLD_FIRST_CONNECTION",e[e.OLD_RESTART=11]="OLD_RESTART",e[e.DISCONNECTED_OR_FAILED=20]="DISCONNECTED_OR_FAILED",e}({});const U6=["disconnected","failed"];let Fe=function(e){return e.LocalVideoTrack="videoTrack",e.LocalAudioTrack="audioTrack",e.LocalVideoLowTrack="videoLowTrack",e}({}),Un=function(e){return e.New="new",e.Connected="connected",e.Reconnecting="reconnecting",e.Disconnected="disconnected",e}({}),vt=function(e){return e.AudioMetadata="audioMetadata",e.AudioPts="audioPts",e.StateChange="stateChange",e.IceConnectionStateChange="iceConnectionStateChange",e.RequestMuteLocal="requestMuteLocal",e.RequestUnmuteLocal="requestUnmuteLocal",e.RequestRePublish="requestRePublish",e.RequestRePublishDataChannel="requestRePublishDataChannel",e.RequestReSubscribe="requestReSubscribe",e.RequestUploadStats="requestUploadStats",e.RequestUpload="requestUpload",e.MediaReconnectStart="MediaReconnectStart",e.MediaReconnectEnd="MediaReconnectEnd",e.NeedSignalRTT="NeedSignalRTT",e.RequestRestartICE="RequestRestartIce",e.PeerConnectionStateChange="PeerConnectionStateChange",e.RequestReconnect="RequestReconnect",e.RequestReconnectPC="RequestReconnectPC",e.RequestUnpublishForReconnectPC="RequestUnpublishForReconnectPC",e.P2PLost="P2PLost",e.UpdateVideoEncoder="UpdateVideoEncoder",e.ConnectionTypeChange="ConnectionTypeChange",e.RequestLowStreamParameter="RequestLowStreamParameter",e.QueryClientConnectionState="QueryClientConnectionState",e.LocalCandidate="LocalCandidate",e.RequestP2PMuteLocal="requestP2PMuteLocal",e.RequestP2PUnPublish="RequestP2PUnPublish",e.RequestP2PUnmuteRemote="RequestP2PUnmuteRemote",e.RequestP2PMuteRemote="RequestP2PMuteRemote",e.RequestP2PRestartICE="RequestP2PRestartICE",e}({}),Ys=function(e){return e.CONNECTING="CONNECTING",e.RECONNECTING="RECONNECTING",e.CONNECTED="CONNECTED",e.CLOSED="CLOSED",e}({}),qs=function(e){return e[e.CONNECT_AP=0]="CONNECT_AP",e[e.AP_CONNECTED=1]="AP_CONNECTED",e[e.CONNECT_WORKER_MANAGER=2]="CONNECT_WORKER_MANAGER",e[e.WORKER_MANAGER_CONNECTED=3]="WORKER_MANAGER_CONNECTED",e[e.GET_WORKER_MANAGER_RESPONSE=4]="GET_WORKER_MANAGER_RESPONSE",e[e.CONNECT_WORKER=5]="CONNECT_WORKER",e[e.WORKER_CONNECTED=6]="WORKER_CONNECTED",e[e.CLOSED=7]="CLOSED",e}({}),Ii=function(e){return e.CONNECTION_STATE_CHANGE="connection-state-change",e.STATE_CHANGE="state-change",e.INSPECT_RESULT="inspect-result",e.CLIENT_LOCAL_VIDEO_TRACK="client-local-video-track",e.REQUEST_NEW_WORKER_URL="request-new-worker-url",e}({}),B6=function(e){return e.CONNECTED="transmitter:connected",e.RECONNECTING="transmitter:reconnecting",e.WILL_RECONNECT="transmitter:will_reconnect",e.CLOSED="transmitter:closed",e.FAILED="transmitter:failed",e.ON_MESSAGE="transmitter:on_message",e.REQUEST_NEW_URLS="transmitter:request_new_urls",e.RECONNECT_CREATE_CONNECTION="transmitter:reconnect_create_connection",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE="transmitter:on_token_privilege_did_expire",e.TO_CONNECT_DATACHANNEL="transmitter:to_connect_datachannel",e.FAILBACK="transmitter:failback",e.PRE_CONNECT_PC="transmitter:pre_connect_pc",e}({}),gl=function(e){return e.CAMERA_CHANGED="camera-changed",e.MICROPHONE_CHANGED="microphone-changed",e.PLAYBACK_DEVICE_CHANGED="playback-device-changed",e.AUDIO_AUTOPLAY_FAILED="audio-autoplay-failed",e.AUTOPLAY_FAILED="autoplay-failed",e.AUDIO_CONTEXT_STATE_CHANGED="audio-context-state-changed",e.SECURITY_POLICY_VIOLATION="security-policy-violation",e}({}),hs=function(e){return e.CONNECTING="CONNECTING",e.RECONNECTING="RECONNECTING",e.CONNECTED="CONNECTED",e.CLOSED="CLOSED",e}({}),Nc=function(e){return e.CONNECTION_STATE_CHANGE="connection-state-change",e.STATE_CHANGE="state-change",e.INSPECT_RESULT="inspect-result",e.CLIENT_LOCAL_VIDEO_TRACK="client-local-video-track",e.REQUEST_NEW_WORKER_URL="request-new-worker-url",e}({}),ap=function(e){return e[e.CONNECT_AP=0]="CONNECT_AP",e[e.AP_CONNECTED=1]="AP_CONNECTED",e[e.CONNECT_WORKER_MANAGER=2]="CONNECT_WORKER_MANAGER",e[e.WORKER_MANAGER_CONNECTED=3]="WORKER_MANAGER_CONNECTED",e[e.GET_WORKER_MANAGER_RESPONSE=4]="GET_WORKER_MANAGER_RESPONSE",e[e.CONNECT_WORKER=5]="CONNECT_WORKER",e[e.WORKER_CONNECTED=6]="WORKER_CONNECTED",e[e.CLOSED=7]="CLOSED",e}({}),Hr=function(e){return e.CALL="call",e.CANDIDATE="candidate",e.PUBLISH="publish",e.UNPUBLISH="unpublish",e.CONTROL="control",e.RESTART_ICE="restart_ice",e.ACK="ack",e.RESPONSE="response",e.JOIN="join",e.CHECK="check",e}({}),sp=function(e){return e.ABORT="abort",e}({}),$u=function(e){return e.MUTE_LOCAL_AUDIO="mute_local_audio",e.MUTE_LOCAL_VIDEO="mute_local_video",e.UNMUTE_LOCAL_AUDIO="unmute_local_audio",e.UNMUTE_LOCAL_VIDEO="unmute_local_video",e}({}),ipe=function(e){return e.P2P_TOKEN_TIMEOUT="p2p_token_timeout",e.P2P_TOKEN_CHANGED="p2p_token_changed",e}({});const ope={[pS.ACCESS_POINT]:{[Do.NO_FLAG_SET]:{desc:"flag is zero",retry:!1},[Do.FLAG_SET_BUT_EMPTY]:{desc:"flag is empty",retry:!1},[Do.INVALID_FALG_SET]:{desc:"invalid flag",retry:!1},[Do.FLAG_SET_BUT_NO_RE]:{desc:"flag set unilbs but no request",retry:!1},[Do.INVALID_SERVICE_ID]:{desc:"invalid service id",retry:!1},[Do.NO_SERVICE_AVAILABLE]:{desc:"no service available",retry:!0},[Do.NO_SERVICE_AVAILABLE_P2P]:{desc:"no unilbs p2p service available",retry:!0},[Do.NO_SERVICE_AVAILABLE_VOICE]:{desc:"no unilbs voice service available",retry:!0},[Do.NO_SERVICE_AVAILABLE_WEBRTC]:{desc:"no unilbs webrtc service available",retry:!0},[Do.NO_SERVICE_AVAILABLE_CDS]:{desc:"no cds service available",retry:!0},[Do.NO_SERVICE_AVAILABLE_CDN]:{desc:"no cdn dispatcher service available",retry:!0},[Do.NO_SERVICE_AVAILABLE_TDS]:{desc:"no tds service available",retry:!0},[Do.NO_SERVICE_AVAILABLE_REPORT]:{desc:"no unilbs report service available",retry:!0},[Do.NO_SERVICE_AVAILABLE_APP_CENTER]:{desc:"no app center service available",retry:!0},[Do.NO_SERVICE_AVAILABLE_ENV0]:{desc:"no unilbs sig env0 service available",retry:!0},[Do.NO_SERVICE_AVAILABLE_VOET]:{desc:"no unilbs voet service available",retry:!0},[Do.NO_SERVICE_AVAILABLE_STRING_UID]:{desc:"no string uid service available",retry:!0},[Do.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS]:{desc:"no webrtc unilbs service available",retry:!0}},[pS.UNILBS]:{[Ks.INVALID_VENDOR_KEY]:{desc:"invalid vendor key, can not find appid",retry:!1},[Ks.INVALID_CHANNEL_NAME]:{desc:"invalid channel name",retry:!1},[Ks.INTERNAL_ERROR]:{desc:"unilbs internal error",retry:!1},[Ks.NO_AUTHORIZED]:{desc:"invalid token, authorized failed",retry:!1},[Ks.DYNAMIC_KEY_TIMEOUT]:{desc:"dynamic key or token timeout",retry:!1},[Ks.NO_ACTIVE_STATUS]:{desc:"no active status",retry:!1},[Ks.DYNAMIC_KEY_EXPIRED]:{desc:"dynamic key expired",retry:!1},[Ks.STATIC_USE_DYNAMIC_KEY]:{desc:"static use dynamic key",retry:!1},[Ks.DYNAMIC_USE_STATIC_KEY]:{desc:"dynamic use static key",retry:!1},[Ks.USER_OVERLOAD]:{desc:"amount of users over load",retry:!1},[Ks.FORBIDDEN_REGION]:{desc:"the request is forbidden in this area",retry:!1},[Ks.CANNOT_MEET_AREA_DEMAND]:{desc:"unable to allocate services in this area",retry:!1}},[pS.STRING_UID_ALLOCATOR]:{[jI.IIIEGAL_APPID]:{desc:"invalid appid",retry:!1},[jI.IIIEGAL_UID]:{desc:"invalid string uid",retry:!1},[jI.INTERNAL_ERROR]:{desc:"string uid allocator internal error",retry:!0}}};function cp(e){const n=ope[Math.floor(e/1e4)];if(!n)return{desc:"unknown error",retry:!1};const i=n[e%1e4];if(!i){if(Math.floor(e/1e4)===pS.ACCESS_POINT){const a=e%1e4;if(a.toString()[0]==="1")return{desc:e.toString(),retry:!1};if(a.toString()[0]==="2")return{desc:e.toString(),retry:!0}}return{desc:"unknown error",retry:!1}}return i}const ape={[Rt.K_TIMESTAMP_EXPIRED]:{desc:"K_TIMESTAMP_EXPIRED",action:"failed"},[Rt.K_CHANNEL_PERMISSION_INVALID]:{desc:"K_CHANNEL_PERMISSION_INVALID",action:"failed"},[Rt.K_CERTIFICATE_INVALID]:{desc:"K_CERTIFICATE_INVALID",action:"failed"},[Rt.K_CHANNEL_NAME_EMPTY]:{desc:"K_CHANNEL_NAME_EMPTY",action:"failed"},[Rt.K_CHANNEL_NOT_FOUND]:{desc:"K_CHANNEL_NOT_FOUND",action:"failed"},[Rt.K_TICKET_INVALID]:{desc:"K_TICKET_INVALID",action:"failed"},[Rt.K_CHANNEL_CONFLICTED]:{desc:"K_CHANNEL_CONFLICTED",action:"failed"},[Rt.K_SERVICE_NOT_READY]:{desc:"K_SERVICE_NOT_READY",action:"tryNext"},[Rt.K_SERVICE_TOO_HEAVY]:{desc:"K_SERVICE_TOO_HEAVY",action:"tryNext"},[Rt.K_UID_BANNED]:{desc:"K_UID_BANNED",action:"failed"},[Rt.K_IP_BANNED]:{desc:"K_IP_BANNED",action:"failed"},[Rt.DATASTREAM2_NOT_AVAILABLE]:{desc:"DATASTREAM2_NOT_AVAILABLE",action:"quit"},[Rt.K_AUTO_REBALANCE]:{desc:"k_AUTO_REBALANCE",action:"recover"},[Rt.ERR_INVALID_VENDOR_KEY]:{desc:"ERR_INVALID_VENDOR_KEY",action:"failed"},[Rt.ERR_INVALID_CHANNEL_NAME]:{desc:"ERR_INVALID_CHANNEL_NAME",action:"failed"},[Rt.WARN_NO_AVAILABLE_CHANNEL]:{desc:"WARN_NO_AVAILABLE_CHANNEL",action:"failed"},[Rt.WARN_LOOKUP_CHANNEL_TIMEOUT]:{desc:"WARN_LOOKUP_CHANNEL_TIMEOUT",action:"tryNext"},[Rt.WARN_LOOKUP_CHANNEL_REJECTED]:{desc:"WARN_LOOKUP_CHANNEL_REJECTED",action:"failed"},[Rt.WARN_OPEN_CHANNEL_TIMEOUT]:{desc:"WARN_OPEN_CHANNEL_TIMEOUT",action:"tryNext"},[Rt.WARN_OPEN_CHANNEL_REJECTED]:{desc:"WARN_OPEN_CHANNEL_REJECTED",action:"failed"},[Rt.WARN_REQUEST_DEFERRED]:{desc:"WARN_REQUEST_DEFERRED",action:"failed"},[Rt.ERR_DYNAMIC_KEY_TIMEOUT]:{desc:"ERR_DYNAMIC_KEY_TIMEOUT",action:"failed"},[Rt.ERR_NO_AUTHORIZED]:{desc:"ERR_NO_AUTHORIZED",action:"failed"},[Rt.ERR_VOM_SERVICE_UNAVAILABLE]:{desc:"ERR_VOM_SERVICE_UNAVAILABLE",action:"tryNext"},[Rt.ERR_NO_CHANNEL_AVAILABLE_CODE]:{desc:"ERR_NO_CHANNEL_AVAILABLE_CODE",action:"failed"},[Rt.ERR_MASTER_VOCS_UNAVAILABLE]:{desc:"ERR_MASTER_VOCS_UNAVAILABLE",action:"tryNext"},[Rt.ERR_INTERNAL_ERROR]:{desc:"ERR_INTERNAL_ERROR",action:"tryNext"},[Rt.ERR_NO_ACTIVE_STATUS]:{desc:"ERR_NO_ACTIVE_STATUS",action:"failed"},[Rt.ERR_INVALID_UID]:{desc:"ERR_INVALID_UID",action:"failed"},[Rt.ERR_DYNAMIC_KEY_EXPIRED]:{desc:"ERR_DYNAMIC_KEY_EXPIRED",action:"failed"},[Rt.ERR_STATIC_USE_DYANMIC_KE]:{desc:"ERR_STATIC_USE_DYANMIC_KE",action:"failed"},[Rt.ERR_DYNAMIC_USE_STATIC_KE]:{desc:"ERR_DYNAMIC_USE_STATIC_KE",action:"failed"},[Rt.ERR_NO_VOCS_AVAILABLE]:{desc:"ERR_NO_VOCS_AVAILABLE",action:"tryNext"},[Rt.ERR_NO_VOS_AVAILABLE]:{desc:"ERR_NO_VOS_AVAILABLE",action:"tryNext"},[Rt.ERR_JOIN_CHANNEL_TIMEOUT]:{desc:"ERR_JOIN_CHANNEL_TIMEOUT",action:"tryNext"},[Rt.ERR_JOIN_BY_MULTI_IP]:{desc:"ERR_JOIN_BY_MULTI_IP",action:"recover"},[Rt.ERR_NOT_JOINED]:{desc:"ERR_NOT_JOINED",action:"failed"},[Rt.ERR_REPEAT_JOIN_REQUEST]:{desc:"ERR_REPEAT_JOIN_REQUEST",action:"quit"},[Rt.ERR_REPEAT_JOIN_CHANNEL]:{desc:"ERR_REPEAT_JOIN_CHANNEL",action:"quit"},[Rt.ERR_INVALID_STRINGUID]:{desc:"ERR_INVALID_STRINGUID",action:"failed"},[Rt.ERR_TOO_MANY_USERS]:{desc:"ERR_TOO_MANY_USERS",action:"tryNext"},[Rt.ERR_SET_CLIENT_ROLE_TIMEOUT]:{desc:"ERR_SET_CLIENT_ROLE_TIMEOUT",action:"failed"},[Rt.ERR_SET_CLIENT_ROLE_NO_PERMISSION]:{desc:"ERR_SET_CLIENT_ROLE_TIMEOUT",action:"failed"},[Rt.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE]:{desc:"ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",action:"success"},[Rt.ERR_PUBLISH_REQUEST_INVALID]:{desc:"ERR_PUBLISH_REQUEST_INVALID",action:"failed"},[Rt.ERR_SUBSCRIBE_REQUEST_INVALID]:{desc:"ERR_SUBSCRIBE_REQUEST_INVALID",action:"failed"},[Rt.ERR_NOT_SUPPORTED_MESSAGE]:{desc:"ERR_NOT_SUPPORTED_MESSAGE",action:"failed"},[Rt.ERR_ILLEAGAL_PLUGIN]:{desc:"ERR_ILLEAGAL_PLUGIN",action:"failed"},[Rt.ILLEGAL_CLIENT_ROLE_LEVEL]:{desc:"ILLEGAL_CLIENT_ROLE_LEVEL",action:"failed"},[Rt.ERR_REJOIN_TOKEN_INVALID]:{desc:"ERR_REJOIN_TOKEN_INVALID",action:"failed"},[Rt.ERR_REJOIN_USER_NOT_JOINED]:{desc:"ERR_REJOIN_NOT_JOINED",action:"failed"},[Rt.ERR_INVALID_OPTIONAL_INFO]:{desc:"ERR_INVALID_OPTIONAL_INFO",action:"quit"},[Rt.ERR_TEST_RECOVER]:{desc:"ERR_TEST_RECOVER",action:"recover"},[Rt.ERR_TEST_TRYNEXT]:{desc:"ERR_TEST_TRYNEXT",action:"recover"},[Rt.ERR_TEST_RETRY]:{desc:"ERR_TEST_RETRY",action:"recover"},[Rt.ILLEGAL_AES_PASSWORD]:{desc:"ERR_TEST_RETRY",action:"failed"},[Rt.ERR_TOO_MANY_BROADCASTERS]:{desc:"ERR_TOO_MANY_BROADCASTERS",action:"failed"},[Rt.ERR_TOO_MANY_SUBSCRIBERS]:{desc:"ERR_TOO_MANY_SUBSCRIBERS",action:"failed"},[Rt.ERR_LICENSE_ILLEGAL]:{desc:"ERR_LICENSE_ILLEGAL",action:"quit"},[Rt.ERR_LICENSE_MISSING]:{desc:"ERR_LICENSE_MISSING",action:"quit"},[Rt.ERR_LICENSE_EXPIRED]:{desc:"ERR_LICENSE_EXPIRED",action:"quit"},[Rt.ERR_LICENSE_MINUTES_EXCEEDED]:{desc:"ERR_LICENSE_MINUTES_EXCEEDED",action:"quit"},[Rt.ERR_LICENSE_PERIOD_INVALID]:{desc:"ERR_LICENSE_PERIOD_INVALID",action:"quit"},[Rt.ERR_LICENSE_MULTIPLE_SDK_SERVICE]:{desc:"ERR_LICENSE_MULTIPLE_SDK_SERVICE",action:"quit"}};function M0(e){return ape[e]||{desc:"UNKNOWN_ERROR_".concat(e),action:"failed"}}function V6(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),i.push.apply(i,a)}return i}function WI(e){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?V6(Object(i),!0).forEach(function(a){W(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):V6(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function GI(e,n){if(typeof e=="string")return e;const{proxy:i,host:a,port:l}=e;if(n){const u=Q("JOIN_GATEWAY_FALLBACK_PORT")||443;return u===443?"wss://".concat(a,"/ws/?p=").concat(Number(l)+150):"wss://".concat(a,":").concat(u,"/ws/?p=").concat(Number(l)+150)}return i?"wss://".concat(i,"/ws/?h=").concat(a,"&p=").concat(l):"wss://".concat(a,":").concat(l)}const spe=/wss:\/\/(.+)\/ws\/\?h=(.+)&p=([0-9]+)\/?/,cpe=/wss:\/\/(.+)\/ws\/\?p=([0-9]+)\/?/,lpe=/wss:\/\/(.+):([0-9]+)\/?/,upe=/wss:\/\/(.[^\/]+)\/?/;let dpe=0;class hpe{constructor(n,i){W(this,"id",0),W(this,"store",void 0),W(this,"recordIndex",void 0),W(this,"websockets",[]),W(this,"try443PortDuration",2e3),W(this,"forceCloseWSDuration",5e3),W(this,"try443PortTimeout",null),W(this,"forceCloseTimeout",null),W(this,"isTry443PortFailed",!1),W(this,"isNormalPortFailed",!1),W(this,"useDoubleDomain",!1),W(this,"useProxy",!1),W(this,"startTime",Date.now()),this.id=++dpe,this.try443PortDuration=Q("JOIN_GATEWAY_TRY_443PORT_DURATION")||2e3,this.forceCloseWSDuration=n||5e3,this.store=i}closeAllWebsockets(){this.websockets.forEach(n=>{n.onopen=null,n.onclose=null,n.onmessage=null,n.close()}),this.websockets.length=0}clearTimeout(){this.forceCloseTimeout&&clearTimeout(this.forceCloseTimeout),this.try443PortTimeout&&clearTimeout(this.try443PortTimeout),this.forceCloseTimeout=null,this.try443PortTimeout=null}logger(){var n;const i=Date.now()-this.startTime;for(var a=arguments.length,l=new Array(a),u=0;u<a;u++)l[u]=arguments[u];k.debug("[choose-best-ws ".concat((n=this.store)===null||n===void 0?void 0:n.clientId," ").concat(this.id,"] ").concat(i,"ms:"),...l)}createWebSocket(n,i,a){this.logger("createWebSocket:",n,{isTry443Port:i,hasTimeoutDetection:a});const l=Q("GATEWAY_DOMAINS"),u=Date.now(),h=[],p=l.find(w=>{var O;return Ge(O=n.host).call(O,w)});p||(this.useDoubleDomain=!1);const m=[];if(this.useDoubleDomain)l.forEach(w=>{m.push(GI(WI(WI({},n),{},{host:n.host.replace(p,w)}),i))});else{const w=WI({},n);if(i&&p){const O=l.find(H=>H!==p);O&&(w.host=w.host.replace(p,O))}m.push(GI(w,i))}try{m.forEach(w=>{const O=new WebSocket(w);O.binaryType="arraybuffer",h.push(O),this.logger("ws is connecting:",O.url)})}catch(w){if(this.logger("ws create failed"),h.forEach(O=>O.close()),h.length=0,this.useDoubleDomain)return this.useDoubleDomain=!1,this.createWebSocket(n,i,a);if(!i&&Number(n.port)!==443)return this.createWebSocket(n,!0,a);throw new Ce(X.WS_ERR,"init websocket failed! Error: ".concat(w.toString()))}const E=S0();this.store&&this.store.recordJoinChannelService({urls:h.map(w=>w.url),service:"gateway"},this.recordIndex),h.forEach(w=>{w.onopen=()=>{this.logger("onopen: ws ".concat(w.url," open cost ").concat(Date.now()-u,"ms")),this.websockets.forEach(O=>{O!==w&&(O.onopen=null,O.onclose=null,O.onmessage=null,O.close(),this.logger("close backup websocket: ".concat(O.url)))}),this.websockets.length=0,E.resolve(w)},w.onclose=O=>{this.logger("onclose: ws ".concat(w.url," closed cost ").concat(Date.now()-u,"ms state: ").concat(w.readyState));const H=h.every(B=>B.readyState===WebSocket.CLOSED||B.readyState===WebSocket.CLOSING);this.logger("".concat(i?"443":"47xx"," websocket closed, all failed: ").concat(H)),H&&(i||this.isTry443PortFailed||this.useProxy)?(this.logger("onclose: all websocket is closed, ".concat(O.reason)),E.reject({code:O.code,reason:vS.A_ROUND_WS_FAILED})):!i&&H&&!this.isNormalPortFailed&&this.try443PortTimeout&&(this.logger("all 47xx websocket is closed, try 443 port"),this.clearTimeout(),R()),i?this.isTry443PortFailed=H:this.isNormalPortFailed=H},w.onmessage=O=>this.logger("".concat(w.url," onmessage: ").concat(O.data))}),this.websockets.push(...h);const S=()=>{this.websockets.forEach(w=>w.readyState!==WebSocket.OPEN&&w.close())},R=()=>{if(E.isResolved)return S();yn().os===Ci.MAC_OS&&Or()&&S(),this.createWebSocket(n,!0,!0).then(w=>{E.resolve(w)}).catch(w=>{this.isNormalPortFailed&&E.reject(w),this.logger("try 443 port to create ws failed")}),this.forceCloseTimeout=window.setTimeout(()=>{this.logger("5s timeout close un-opens, isWebsocket created: ",E.isResolved),this.forceCloseTimeout=null,S()},this.forceCloseWSDuration)};return a||(()=>{if(i||this.useProxy)return this.logger("add 5s timeout at ".concat(i?"try-443":"proxy"," condition")),this.forceCloseTimeout=window.setTimeout(()=>{this.forceCloseTimeout=null,S()},this.forceCloseWSDuration);this.try443PortTimeout=window.setTimeout(()=>{this.logger("2s timeout, isWebsocket created: ",E.isResolved),this.try443PortTimeout=null,R()},this.try443PortDuration)})(),E.promise}chooseBestWebsocket(n,i,a,l){return this.useDoubleDomain=!!i,typeof n=="string"&&(n=function(u){let h,p,m;return[,h,p,m]=u.match(spe)||[],h||([,p,m]=u.match(cpe)||[]),p&&m||([,p,m]=u.match(lpe)||[]),p&&m||([,p]=u.match(upe)||[]),p||k.warning("un-destructible url: ",u),{proxy:h,host:p,port:m||"443"}}(n)),this.recordIndex=l,this.useProxy=!!n.proxy,a&&this.useProxy&&(k.warn("cannot use 443 only when use proxy"),a=!1),this.createWebSocket(n,!!a,!1).finally(()=>this.clearTimeout())}}function j6(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),i.push.apply(i,a)}return i}class $6 extends br{get url(){return this.websocket&&this.websocket.url||this._websocketUrl}get reconnectMode(){return this._reconnectMode}set reconnectMode(n){var i;Ge(i=["tryNext","recover"]).call(i,n)&&this.resetReconnectCount(n),this._reconnectMode=n}get state(){return this._state}set state(n){n!==this._state&&(this._state=n,this._state==="reconnecting"?this.emit(Xt.RECONNECTING,this.reconnectReason):this._state==="connected"?this.emit(Xt.CONNECTED):this._state==="closed"?this.emit(Xt.CLOSED):this._state==="failed"&&this.emit(Xt.FAILED))}resetReconnectCount(n){k.debug("websocket reset reconnect count, reason: "+n),this.reconnectCount=0}constructor(n,i){let a=arguments.length>2&&arguments[2]!==void 0&&arguments[2],l=arguments.length>3&&arguments[3]!==void 0&&arguments[3],u=arguments.length>4&&arguments[4]!==void 0&&arguments[4],h=arguments.length>5?arguments[5]:void 0;super(),W(this,"_websocketUrl",null),W(this,"connectionID",0),W(this,"currentURLIndex",0),W(this,"urls",[]),W(this,"_reconnectMode","tryNext"),W(this,"reconnectReason",void 0),W(this,"_initMutex",void 0),W(this,"name",void 0),W(this,"_state","closed"),W(this,"reconnectInterrupter",void 0),W(this,"websocket",void 0),W(this,"retryConfig",void 0),W(this,"reconnectCount",0),W(this,"forceCloseTimeout",5e3),W(this,"onlineReconnectListener",void 0),W(this,"useCompress",void 0),W(this,"tryDoubleDomain",!1),W(this,"use443PortOnly",!1),W(this,"wsInflateLength",0),W(this,"wsDeflateLength",0),W(this,"closeEstablishingWs",()=>{}),W(this,"store",void 0),W(this,"joinGatewayRecordIndex",void 0),this.store=h,this.name=n,this.retryConfig=function(R){for(var w=1;w<arguments.length;w++){var O=arguments[w]!=null?arguments[w]:{};w%2?j6(Object(O),!0).forEach(function(H){W(R,H,O[H])}):Object.getOwnPropertyDescriptors?Object.defineProperties(R,Object.getOwnPropertyDescriptors(O)):j6(Object(O)).forEach(function(H){Object.defineProperty(R,H,Object.getOwnPropertyDescriptor(O,H))})}return R}({},i),this.useCompress=a,this.tryDoubleDomain=l,this.use443PortOnly=u,this._initMutex=new qi("websocket",h?h.clientId:void 0);const{timeout:p,timeoutFactor:m}=i,E=Math.max(300,Math.floor(3*p/5)),S=Math.max(1.2,Math.floor(8*m)/10);wa.ONLINE&&(this.retryConfig.timeout=E,this.retryConfig.timeoutFactor=S),Gr.on(jf.NETWORK_STATE_CHANGE,(R,w)=>{R!==w&&(this.resetReconnectCount("network state change: ".concat(w," -> ").concat(R)),R===wa.ONLINE?(this.retryConfig.timeout=E,this.retryConfig.timeoutFactor=S):(this.retryConfig.timeout=p,this.retryConfig.timeoutFactor=m))})}getConnection(){return this.websocket||void 0}async init(n){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5e3;const a=await this._initMutex.lock();this._reconnectMode="tryNext",this.forceCloseTimeout=i,this.urls=n,this.state="connecting";try{var l;const u=S0(),h=this.urls[this.currentURLIndex];(l=this.store)===null||l===void 0||l.beforeConnect(),function(p){return!(Q_()||Q("USE_NEW_TOKEN")||!Q("ENABLE_PREALLOC_PC")&&(p==null||!p.autoSubscribe||Q("FORCE_DISABLE_AUTO_SUB")))}(this.store)&&this.emit(B6.PRE_CONNECT_PC),this.createWebSocketConnection(h).then(u.resolve).catch(u.reject),this.once(Xt.CLOSED,()=>{u.reject(new Re(X.WS_DISCONNECT))}),this.once(Xt.CONNECTED,u.resolve),await u.promise}catch{}finally{a()}}close(n,i){if(this.currentURLIndex=0,this.resetReconnectCount("close"),this.reconnectInterrupter&&this.reconnectInterrupter(),this.websocket){this.websocket.onclose=null,this.websocket.onopen=null,this.websocket.onmessage=null;const a=this.websocket;i?setTimeout(()=>a.close(),500):a.close(),this.websocket=void 0,this._websocketUrl=null}this.state=n?"failed":"closed",this.closeEstablishingWs&&this.closeEstablishingWs()}reconnect(n,i){if(!this.websocket)return void k.warning("[".concat(this.name,"] can not reconnect, no websocket"));n!==void 0&&(this.reconnectMode=n),k.debug("[".concat(this.name,"] reconnect is triggered initiative")),typeof this.joinGatewayRecordIndex=="number"&&this.store&&this.store.recordJoinChannelService({status:"error",errors:[new Error(i)]},this.joinGatewayRecordIndex);const a=this.websocket.onclose;this.websocket.onclose=null,this.websocket.close(),a&&a.bind(this.websocket)({code:9999,reason:i})}sendMessage(n){let i=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(!this.websocket||this.websocket.readyState!==WebSocket.OPEN)throw new Re(X.WS_ABORT,"websocket is not ready");try{i||(n=JSON.stringify(n)),this.websocket.send(n)}catch(a){throw new Re(X.WS_ERR,"send websocket message error"+a.toString())}}setWsInflateData(n){this.wsDeflateLength=this.wsDeflateLength+n.originLength,this.wsInflateLength=this.wsInflateLength+n.compressedLength}getWsInflateData(){const n=this.wsInflateLength,i=this.wsDeflateLength;return this.clearWsInflateData(),{wsInflateLength:n,wsDeflateLength:i}}clearWsInflateData(){this.wsInflateLength=0,this.wsDeflateLength=0}async createWebSocketConnection(n){var i;const a=S0();this.connectionID+=1,this.joinGatewayRecordIndex=void 0;const l=S=>{var R;(R=this.store)===null||R===void 0||R.signalChannelOpen(),k.debug("[".concat(this.name,"] websocket opened:"),S),this.reconnectMode="retry",this.state="connected",this.resetReconnectCount("opened"),a.resolve()},u=async S=>{var R;if(k.debug("[".concat(this.name,"] websocket close ").concat((R=this.websocket)===null||R===void 0?void 0:R.url,", code: ").concat(S.code,", reason: ").concat(S.reason,", current mode: ").concat(this.reconnectMode)),this.reconnectCount>=this.retryConfig.maxRetryCount)a.reject(new Re(X.WS_DISCONNECT,"websocket close: ".concat(S.code))),this.close();else{this.state==="connected"&&(this.reconnectReason=S.reason,this.state="reconnecting");const w=ja(this,Xt.WILL_RECONNECT,this.reconnectMode,S.reason)||this.reconnectMode,O=await this.reconnectWithAction(w);if(this.state==="closed")return void k.debug("[".concat(this.connectionID,"] ws is closed, no need to reconnect"));if(!O)return a.reject(new Re(X.WS_DISCONNECT,"websocket reconnect failed: ".concat(S.code))),this.close(!0);a.resolve()}},h=S=>{this.emit(Xt.ON_MESSAGE,S)},p=S=>{k.warn("[".concat(this.connectionID,"] ws open error ").concat(S))};this.websocket&&(this.websocket.onclose=null,this.websocket.close()),Q("GATEWAY_WSS_ADDRESS")&&this.name.startsWith("gateway")&&(n=Q("GATEWAY_WSS_ADDRESS")),k.debug("[".concat(this.name,"] start connect, url:"),n);const m=(i=this.store)===null||i===void 0?void 0:i.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"gateway"});try{var E;this._websocketUrl=GI(n);const S=await this.chooseBestWebsocketConnection(n);this.websocket=S,l&&l(this.websocket.url),this.websocket.onclose=u,this.websocket.onmessage=h,this.websocket.onerror=p,(E=this.store)===null||E===void 0||E.recordJoinChannelService({endTs:Date.now(),status:"success"},m),this.joinGatewayRecordIndex=m}catch(S){const R=this.state==="closed",w=S instanceof Re,O=w&&S.code===X.WS_ABORT,H=w&&S.code===X.WS_ERR,B=w?S.message:S&&(S.reason||S.toString());k.warning("[choose-best-ws] chooseBestWebsocket error: ".concat(B)),this.store&&this.store.recordJoinChannelService({endTs:Date.now(),status:O?"aborted":"error",errors:[S]},m),R||H?(a.reject(R?new Re(X.WS_DISCONNECT,"websocket is closed: ".concat(B)):new Re(X.WS_ERR,"init websocket failed: ".concat(B))),H&&k.error("[".concat(this.name,"] init websocket failed: ").concat(B))):u&&u(S)}return a.promise}async reconnectWithAction(n){let i=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(this.reconnectCount>=this.retryConfig.maxRetryCount||this.urls.length===0||this.state==="closed")return!1;k.warning("[choose-best-ws] action: =>",n),this.onlineReconnectListener||Gr.isOnline||!Gr.onlineWaiter||(this.onlineReconnectListener=Gr.onlineWaiter.then(()=>{this.onlineReconnectListener=void 0}));let a=!0;if(this.reconnectInterrupter=()=>a=!1,i){const h=Zw(this.reconnectCount,this.retryConfig);k.debug("[".concat(this.name,"] wait ").concat(h,"ms to reconnect websocket, mode: ").concat(n)),await et.race([Pi(h),this.onlineReconnectListener||new et(()=>{})])}if(this._state==="closed"||!a)return!1;this.reconnectCount+=1;const l=async(h,p)=>{this.emit(Xt.RECONNECT_CREATE_CONNECTION,p),await this.createWebSocketConnection(h)};try{if(n==="retry")await l(this.urls[this.currentURLIndex],n);else if(n==="tryNext"){if(this.currentURLIndex+=1,this.currentURLIndex>=this.urls.length)return this.reconnectWithAction("recover",!1);k.debug("[".concat(this.name,"] websocket url length: ").concat(this.urls.length," current index: ").concat(this.currentURLIndex)),await l(this.urls[this.currentURLIndex],n)}else n==="recover"&&(k.debug("[".concat(this.name,"] request new urls")),this.resetReconnectCount("recover mode"),this.urls=await zi(this,Xt.REQUEST_NEW_URLS),this.currentURLIndex=0,await l(this.urls[this.currentURLIndex],n))}catch(h){var u;k.error("[".concat(this.name,"] reconnect failed ").concat(h&&h.toString()));const p=h==null||(u=h.data)===null||u===void 0?void 0:u.desc;return Array.isArray(p)&&Ge(p).call(p,"dynamic key expired")?(this.emit(Xt.ON_TOKEN_PRIVILEGE_DID_EXPIRE),!1):this.reconnectWithAction(n,i)}return!0}}class KI extends $6{constructor(n,i){super(n,i,arguments.length>2&&arguments[2]!==void 0&&arguments[2],arguments.length>3&&arguments[3]!==void 0&&arguments[3],arguments.length>4&&arguments[4]!==void 0&&arguments[4],arguments.length>5?arguments[5]:void 0)}async chooseBestWebsocketConnection(n,i){const a=S0(),l=function(h,p){return new hpe(h,p)}(this.forceCloseTimeout,this.store);this.closeEstablishingWs=()=>{k.debug("[choose-best-ws] close establishing websockets"),l.closeAllWebsockets(),a.reject(new Re(X.WS_ABORT,"choose best websocket aborted"))};const u=Q("GATEWAY_DOMAINS");return k.debug("[choose-best-ws] currentDomain: ",n,", domains: ",u,"total: ".concat(this.urls.length),"current: ".concat(this.currentURLIndex+1)),l.chooseBestWebsocket(n,this.tryDoubleDomain,this.use443PortOnly,i).then(a.resolve).catch(a.reject),a.promise.finally(()=>{this.closeEstablishingWs=void 0})}}class F0 extends $6{constructor(n,i){super(n,i,arguments.length>2&&arguments[2]!==void 0&&arguments[2],arguments.length>3&&arguments[3]!==void 0&&arguments[3],arguments.length>4&&arguments[4]!==void 0&&arguments[4],arguments.length>5?arguments[5]:void 0)}async chooseBestWebsocketConnection(n,i){return new et((a,l)=>{let u=!1;const h=[];this.closeEstablishingWs=()=>{k.debug("[choose-best-ws] close establishing websockets"),h.forEach(H=>{H.onclose=null,H.onopen=null,H.onmessage=null,H.close()}),l(new Re(X.WS_ABORT,"choose best websocket aborted"))};const p=Q("GATEWAY_DOMAINS");let m;const E=n.indexOf("?h="),S=p.find(H=>E!==-1?Ge(n).call(n,H,E):Ge(n).call(n,H));k.debug("[choose-best-ws] currentDomain: ",S,", domains: ",p);let R=!this.tryDoubleDomain||!S;if(!R&&S){var w;const H=Date.now();try{p.forEach(B=>{const j=E===-1?n.replace(S,B):n.substr(0,E)+n.substr(E).replace(S,B),q=new WebSocket(j);q.binaryType="arraybuffer",h.push(q),k.debug("[choose-best-ws] ws is connecting:",q.url)})}catch{for(k.debug("[choose-best-ws] ws create failed, fallback to single url"),h.forEach(j=>j.close());h.length;)h.pop();R=!0}(w=this.store)===null||w===void 0||w.recordJoinChannelService({urls:h.map(B=>B.url),service:"gateway"},i),h.forEach(B=>{B.onopen=()=>{if(u)return;const j=Date.now()-H;k.debug("[choose-best-ws] ws open cost ".concat(j,"ms")),h.filter(q=>q!==B).forEach(q=>{k.debug("[choose-best-ws]close backup websocket: ".concat(q.url)),q.close()}),u=!0,a(B)},B.onclose=j=>{m=j,!u&&(h.find(q=>!(q.readyState===WebSocket.CLOSED||q.readyState===WebSocket.CLOSING))||(k.debug("[choose-best-ws] all websocket is closed"),u=!0,l(m)))},B.onmessage=j=>{k.debug("[choose-best-ws]".concat(B.url," onmessage: ").concat(j.data))}}),Pi(this.forceCloseTimeout).then(()=>{h.forEach(B=>{B.readyState!==WebSocket.OPEN&&B.close()})})}if(R){var O;let H;k.debug("[choose-best-ws] use single url: ",n),(O=this.store)===null||O===void 0||O.recordJoinChannelService({urls:[n],service:"gateway"},i);try{H=new WebSocket(n),h.push(H),H.binaryType="arraybuffer"}catch(B){const j=new Re(X.WS_ERR,"init websocket failed! Error: ".concat(B.toString()));return k.error("[".concat(this.name,"]").concat(j)),void l(j)}H.onopen=()=>{a(H)},H.onclose=B=>{l(B)},H.onmessage=B=>{k.debug("[choose-best-ws]".concat(H.url," onmessage: ").concat(B.data))},Pi(this.forceCloseTimeout).then(()=>{H&&H.readyState!==WebSocket.OPEN&&H.close()})}}).then(a=>(this.closeEstablishingWs=void 0,a)).catch(a=>{throw this.closeEstablishingWs=void 0,a})}}class fpe extends br{get connectionState(){return this._connectionState}set connectionState(n){n!==this._connectionState&&(this._connectionState=n,n===ir.CONNECTED?this.emit(Mt.WS_CONNECTED):n===ir.RECONNECTING?this.emit(Mt.WS_RECONNECTING,this._websocketReconnectReason):n===ir.CLOSED&&this.emit(Mt.WS_CLOSED,this._disconnectedReason))}get currentURLIndex(){return this.websocket.currentURLIndex}get url(){return this.websocket&&this.websocket.url||null}get rtt(){return this.rttRolling.mean()}constructor(n,i){super(),W(this,"_disconnectedReason",void 0),W(this,"_websocketReconnectReason",void 0),W(this,"_connectionState",ir.CLOSED),W(this,"reconnectToken",void 0),W(this,"websocket",void 0),W(this,"openConnectionTime",void 0),W(this,"clientId",void 0),W(this,"lastMsgTime",Date.now()),W(this,"uploadCache",[]),W(this,"uploadCacheInterval",void 0),W(this,"rttRolling",new X3(5)),W(this,"pingpongTimer",void 0),W(this,"wsInflateDataTimer",void 0),W(this,"pingpongTimeoutCount",0),W(this,"ortc",void 0),W(this,"joinResponse",void 0),W(this,"multiIpOption",void 0),W(this,"initError",void 0),W(this,"spec",void 0),W(this,"store",void 0),W(this,"onWebsocketMessage",a=>{if(a.data instanceof ArrayBuffer)return void this.emit(Mt.ON_BINARY_DATA,a.data);const l=JSON.parse(a.data);if(this.lastMsgTime=Date.now(),Object.prototype.hasOwnProperty.call(l,"_id")){const u="res-@".concat(l._id);this.emit(u,l._result,l._message)}else if(Object.prototype.hasOwnProperty.call(l,"_type")){if(this.emit(l._type,l._message),l._type===mn.ON_NOTIFICATION&&this.handleNotification(l._message),l._type===mn.ON_USER_BANNED)switch(l._message.error_code){case 14:this.close(Fn.UID_BANNED);break;case 15:this.close(Fn.IP_BANNED);break;case 16:this.close(Fn.CHANNEL_BANNED)}if(l._type===mn.ON_USER_LICENSE_BANNED)switch(l._message.error_code){case Rt.ERR_LICENSE_MISSING:this.close(Fn.LICENSE_MISSING);break;case Rt.ERR_LICENSE_EXPIRED:this.close(Fn.LICENSE_EXPIRED);break;case Rt.ERR_LICENSE_MINUTES_EXCEEDED:this.close(Fn.LICENSE_MINUTES_EXCEEDED);break;case Rt.ERR_LICENSE_PERIOD_INVALID:this.close(Fn.LICENSE_PERIOD_INVALID);break;case Rt.ERR_LICENSE_MULTIPLE_SDK_SERVICE:this.close(Fn.LICENSE_MULTIPLE_SDK_SERVICE);break;case Rt.ERR_LICENSE_ILLEGAL:this.close(Fn.LICENSE_ILLEGAL);break;default:this.close()}}}),this.clientId=n.clientId,this.spec=n,this.store=i,this.websocket=new KI("gateway-".concat(this.clientId),this.spec.retryConfig,!0,Q("JOIN_GATEWAY_USE_DUAL_DOMAIN"),Q("JOIN_GATEWAY_USE_443PORT_ONLY"),i),this.handleWebsocketEvents(),window.addEventListener("offline",()=>{this.connectionState===ir.CONNECTED&&this.reconnect("retry",Hi.OFFLINE)})}async request(n,i,a,l){const u=Zn(6,""),h={_id:u,_type:n,_message:i},p=this.websocket.connectionID,m=()=>new et((H,B)=>{if(this.connectionState===ir.CONNECTED)return H();const j=()=>{this.off(Mt.WS_CLOSED,q),H()},q=()=>{this.off(Mt.WS_CONNECTED,j),B(new Ce(X.WS_ABORT))};this.once(Mt.WS_CONNECTED,j),this.once(Mt.WS_CLOSED,q),n!==xt.PUBLISH&&n!==xt.PUBLISH_DATASTREAM&&n!==xt.SUBSCRIBE&&n!==xt.SUBSCRIBE_DATASTREAM&&n!==xt.UNSUBSCRIBE&&n!==xt.UNSUBSCRIBE_DATASTREAM&&n!==xt.UNPUBLISH&&n!==xt.UNPUBLISH_DATASTREAM&&n!==xt.CONTROL&&n!==xt.RESTART_ICE||this.once(Mt.DISCONNECT_P2P,()=>{B(new Ce(X.DISCONNECT_P2P))}),n!==xt.PUBLISH&&n!==xt.RESTART_ICE||this.once(Mt.ABORT_P2P_EXECUTION,()=>{B(new Ce(X.DISCONNECT_P2P))})});if(this.connectionState!==ir.CONNECTING&&this.connectionState!==ir.RECONNECTING||n===xt.JOIN||n===xt.REJOIN||await m(),this.websocket.sendMessage(h,!0),l)return;const E=new et((H,B)=>{let j=!1;const q=(Z,pe)=>{j=!0,H({isSuccess:Z==="success",message:pe||{}}),this.off(Mt.WS_CLOSED,Y),this.off(Mt.WS_RECONNECTING,Y),this.emit(Mt.REQUEST_SUCCESS,n,i)};this.once("res-@".concat(u),q);const Y=()=>{B(new Ce(X.WS_ABORT,"type: ".concat(n))),this.off(Mt.WS_CLOSED,Y),this.off(Mt.WS_RECONNECTING,Y),this.off("res-@".concat(u),q)};this.once(Mt.WS_CLOSED,Y),this.once(Mt.WS_RECONNECTING,Y),Pi(Q("SIGNAL_REQUEST_TIMEOUT")).then(()=>{this.websocket.connectionID!==p||j||(k.warning("[".concat(this.clientId,"] ws request timeout, type: ").concat(n)),this.emit(Mt.REQUEST_TIMEOUT,n,i))})});let S=null;try{S=await E}catch(H){if(this.connectionState===ir.CLOSED||n===xt.LEAVE)throw new Ce(X.WS_ABORT);return!this.spec.forceWaitGatewayResponse||a?H.throw():n===xt.JOIN||n===xt.REJOIN?null:(await m(),await this.request(n,i))}if(S.isSuccess)return S.message;const R=Number(S.message.error_code||S.message.code),w=M0(R),O=new Ce(X.UNEXPECTED_RESPONSE,"".concat(w.desc,": ").concat(S.message.error_str),{code:R,data:S.message,desc:w.desc});return w.action==="success"?S.message:(k.warning("[".concat(this.clientId,"] [").concat(this.websocket.connectionID,"] unexpected response from type ").concat(n,", error_code: ").concat(R,", message: ").concat(w.desc,", action: ").concat(w.action)),R===Rt.ERR_TOO_MANY_BROADCASTERS?((n===xt.JOIN||n===xt.REJOIN)&&(this.initError=O,this.close()),O.throw()):w.action==="failed"?O.throw():w.action==="quit"?(this.initError=O,this.close(),O.throw()):(R===Rt.ERR_JOIN_BY_MULTI_IP?(this.multiIpOption=S.message.option,k.warning("[".concat(this.clientId,"] detect multi ip, recover")),this.reconnect("recover",Hi.MULTI_IP)):this.reconnect(w.action,Hi.SERVER_ERROR),n===xt.JOIN||n===xt.REJOIN?null:await this.request(n,i)))}waitMessage(n,i){return new et(a=>{const l=u=>{(!i||i(u))&&(this.off(n,l),a(u))};this.on(n,l)})}uploadWRTCStats(n){if(!this.store.sessionId)return void k.warn("[".concat(this.clientId,"] no session id when upload wrtc stats"));const i={lts:Date.now(),sid:this.store.sessionId,uid:this.store.intUid,stats:n};this.upload(L0.WRTC_STATS,i)}upload(n,i){const a={_type:n,_message:i};try{this.websocket.sendMessage(a)}catch{const u=Q("MAX_UPLOAD_CACHE")||50;this.uploadCache.push(a),this.uploadCache.length>u&&this.uploadCache.splice(0,1),this.uploadCache.length>0&&!this.uploadCacheInterval&&(this.uploadCacheInterval=window.setInterval(()=>{if(this.connectionState!==ir.CONNECTED)return;const h=this.uploadCache.splice(0,1)[0];this.uploadCache.length===0&&(window.clearInterval(this.uploadCacheInterval),this.uploadCacheInterval=void 0),this.upload(h._type,h._message)},Q("UPLOAD_CACHE_INTERVAL")||2e3))}}send(n,i){const a={_type:n,_message:i};this.websocket.sendMessage(a)}init(n){return this.initError=void 0,this.multiIpOption=void 0,this.joinResponse=void 0,this.reconnectToken=void 0,this.openConnectionTime=void 0,new et((i,a)=>{this.once(Mt.WS_CONNECTED,()=>i(this.joinResponse)),this.once(Mt.WS_CLOSED,l=>a(this.initError||new Ce(X.WS_ABORT,l))),this.connectionState=ir.CONNECTING,this.websocket.init(n).catch(a),this.wsInflateDataTimer&&window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=window.setInterval(()=>{this.handleWsInflateData()},2e4)})}close(n){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.wsInflateDataTimer&&(this.handleWsInflateData(),window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=void 0),this.reconnectToken=void 0,this.joinResponse=void 0,this._disconnectedReason=n||Fn.LEAVE,this.connectionState=ir.CLOSED,k.debug("[".concat(this.clientId,"] ")+"will close websocket in signal"),this.websocket.close()}async join(){if(!this.joinResponse){this.emit(Mt.ABORT_P2P_EXECUTION),this.store.signalConnected();const n=await zi(this,Mt.REQUEST_JOIN_INFO);this.store.joinReq();const i=await this.request(xt.JOIN,n);if(this.ortc=n==null?void 0:n.ortc,this.store.joinRep(),!i)return this.emit(Mt.REPORT_JOIN_GATEWAY,vS.TIMEOUT,this.url||""),!1;this.joinResponse=i,this.emit(Mt.JOIN_RESPONSE,this.joinResponse),this.reconnectToken=this.joinResponse.rejoin_token}return this.connectionState=ir.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),!0}async rejoin(){if(!this.reconnectToken)throw new Ce(X.UNEXPECTED_ERROR,"can not rejoin, no rejoin token");const n=R0(this,Mt.REQUEST_REJOIN_INFO);n.token=this.reconnectToken;const i=await this.request(xt.REJOIN,n);return!!i&&(this.connectionState=ir.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),i.peers&&i.peers.forEach(a=>{this.emit(mn.ON_USER_ONLINE,{uid:a.uid}),a.audio&&this.emit(mn.ON_ADD_AUDIO_STREAM,{uid:a.uid,uint_id:a.uint_id,audio:!0,ssrcId:a.audio_ssrc}),a.video&&this.emit(mn.ON_ADD_VIDEO_STREAM,{uid:a.uid,uint_id:a.uint_id,video:!0,ssrcId:a.video_ssrc}),a.audio_mute?this.emit(mn.MUTE_AUDIO,{uid:a.uid}):this.emit(mn.UNMUTE_AUDIO,{uid:a.uid}),a.video_mute?this.emit(mn.MUTE_VIDEO,{uid:a.uid}):this.emit(mn.UNMUTE_VIDEO,{uid:a.uid}),a.audio_enable_local?this.emit(mn.ENABLE_LOCAL_AUDIO,{uid:a.uid}):this.emit(mn.DISABLE_LOCAL_AUDIO,{uid:a.uid}),a.video_enable_local?this.emit(mn.ENABLE_LOCAL_VIDEO,{uid:a.uid}):this.emit(mn.DISABLE_LOCAL_VIDEO,{uid:a.uid}),a.audio||a.video||this.emit(mn.ON_REMOVE_STREAM,{uid:a.uid,uint_id:a.uint_id})}),!0)}reconnect(n,i){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.websocket.reconnect(n,i)}async downgradeCodec(n){if(!this.ortc)return!1;const i={downgrade_codec:n,ortc:this.ortc};return!!await this.request(xt.DOWNGRADE_CODEC,i)}handleNotification(n){k.debug("[".concat(this.clientId,"] receive notification: "),n);const i=M0(n.code);if(n.code===28&&"detail"in n&&(k.info("[".concat(this.clientId,"] receive recover notification: "),n.detail),this.emit(Mt.RECOVER_NOTIFICATION,n.detail)),i.action!=="success"){if(i.action!=="failed")return i.action==="quit"?(i.desc==="ERR_REPEAT_JOIN_CHANNEL"&&this.close(Fn.UID_BANNED),void this.close()):void this.reconnect(i.action,Hi.SERVER_ERROR);k.error("[".concat(this.clientId,"] ignore error: "),i.desc)}}handlePingPong(){if(!this.websocket||this.websocket.state!=="connected")return;this.pingpongTimeoutCount>0&&this.rttRolling.add(3e3),this.pingpongTimeoutCount+=1;const n=Q("PING_PONG_TIME_OUT"),i=Date.now();this.pingpongTimeoutCount>=n&&(k.warning("[".concat(this.clientId,"] PING-PONG Timeout. Last Socket Message: ").concat(i-this.lastMsgTime,"ms")),i-this.lastMsgTime>Q("WEBSOCKET_TIMEOUT_MIN"))?this.reconnect("retry",Hi.TIMEOUT):this.request(xt.PING,void 0,!0).then(()=>{this.pingpongTimeoutCount=0;const a=Date.now()-i;this.rttRolling.add(a),Q("REPORT_STATS")&&this.send(xt.PING_BACK,{pingpongElapse:a})}).catch(a=>{})}handleWsInflateData(){const{wsInflateLength:n,wsDeflateLength:i}=this.websocket.getWsInflateData();n!==0&&i!==0&&this.upload(L0.WS_INFLATE_DATA_LENGTH,{ws_deflate_length:i,ws_inflate_length:n})}handleWebsocketEvents(){this.websocket.on(Xt.RECONNECT_CREATE_CONNECTION,n=>{this.emit(Mt.WS_RECONNECT_CREATE_CONNECTION,n)}),this.websocket.on(Xt.ON_MESSAGE,this.onWebsocketMessage),this.websocket.on(Xt.CLOSED,()=>{this.connectionState=ir.CLOSED}),this.websocket.on(Xt.FAILED,()=>{this._disconnectedReason=Fn.NETWORK_ERROR,this.connectionState=ir.CLOSED}),this.websocket.on(Xt.RECONNECTING,n=>{this._websocketReconnectReason=n,this.joinResponse=void 0,this.connectionState===ir.CONNECTED?this.connectionState=ir.RECONNECTING:this.connectionState=ir.CONNECTING}),this.websocket.on(Xt.WILL_RECONNECT,(n,i,a)=>{const l=R0(this,Mt.IS_P2P_DISCONNECTED),u=l||n!=="retry";l&&n==="retry"&&(k.debug("".concat(this.clientId," reconnect mode is retry, but p2p lost, change to tryNext")),n="tryNext",i=vS.P2P_DISCONNECTED),u&&(k.debug("".concat(this.clientId," will renewSession, reconnect mode: ").concat(n)),this.emit(Mt.REPORT_JOIN_GATEWAY,i||vS.UNKNOWN_REASON,this.url||""),this.reconnectToken=void 0,this.emit(Mt.DISCONNECT_P2P)),a(n)}),this.websocket.on(Xt.CONNECTED,()=>{this.openConnectionTime=Date.now(),this.reconnectToken?this.rejoin().catch(n=>{k.warning("[".concat(this.clientId,"] rejoin failed ").concat(n)),this.reconnect("tryNext",Hi.SERVER_ERROR)}):this.join().catch(n=>{if(this.emit(Mt.REPORT_JOIN_GATEWAY,n,this.url||""),n instanceof Ce){if(n.code===X.UNEXPECTED_RESPONSE&&n.data.code===Rt.ERR_NO_AUTHORIZED)return this.initError=new Ce(X.TOKEN_EXPIRE,"dynamic key expired"),void this.close(Fn.TOKEN_EXPIRE);k.error("[".concat(this.clientId,"] join gateway request failed"),n.toString()),this.spec.forceWaitGatewayResponse?this.reconnect("tryNext",Hi.SERVER_ERROR):(this.initError=n,this.close())}})}),this.websocket.on(Xt.REQUEST_NEW_URLS,(n,i)=>{zi(this,Mt.REQUEST_RECOVER,this.multiIpOption).then(n).catch(i)}),this.websocket.on(Xt.ON_TOKEN_PRIVILEGE_DID_EXPIRE,()=>{this.emit(mn.ON_TOKEN_PRIVILEGE_DID_EXPIRE)}),this.websocket.on(B6.PRE_CONNECT_PC,()=>{this.emit(Mt.PRE_CONNECT_PC)})}}let ppe=function(e){return e.NATIVE_RTC="native_rtc",e.NATIVE_RTM="native_rtm",e.WEB_RTC="web_rtc",e.WEB_RTM="web_rtm",e}({}),Kr=function(e){return e[e.CHOOSE_SERVER=11]="CHOOSE_SERVER",e[e.CLOUD_PROXY=18]="CLOUD_PROXY",e[e.CLOUD_PROXY_5=20]="CLOUD_PROXY_5",e[e.CLOUD_PROXY_FALLBACK=26]="CLOUD_PROXY_FALLBACK",e}({});function H6(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),i.push.apply(i,a)}return i}function _S(e){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?H6(Object(i),!0).forEach(function(a){W(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):H6(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function Hu(e){return e.match(/^[\.\:\d]+$/)?"".concat(e.replace(/[^\d]/g,"-"),".").concat(Q("TURN_DOMAIN")):(k.debug("Cannot recognized as ip address: ".concat(e,", use as host2")),e)}function SS(e){try{const n=Q("GATEWAY_DOMAINS").concat(Q("TURN_DOMAIN")).find(i=>Ge(e).call(e,i));return n?e.split(".".concat(n))[0].replace(/-/g,"."):e}catch{return k.debug("serverUrlToIp error, fallback to url",e),e}}function YI(e,n){e.addresses||(e.addresses=[]);const i=function(p,m){if(Q("CONNECT_GATEWAY_WITHOUT_DOMAIN"))return p.map(R=>{let{ip:w,port:O}=R;return{address:"".concat(w,":").concat(O)}});const E=Q("GATEWAY_DOMAINS");let S=E[1]&&Ge(m).call(m,E[1])?1:0;return p.map(R=>{let{domain_prefix:w,port:O,ip:H}=R;if(w)return{address:"".concat(w,".").concat(E[S++%E.length],":").concat(O)};const B=/^[\.\:\d]+$/.test(H),j=B?"".concat(H.replace(/[^\d]/g,"-"),".").concat(E[S++%E.length],":").concat(O):"".concat(H,":").concat(O);return B||k.debug("Cannot recognized as ip address: ".concat(H,", use as host3")),{ip:H,port:O,address:j}})}(e.addresses,n),a=Array.isArray(e.detail)&&e.detail[18];if(a&&typeof a=="string"){const p=a.split(";");for(let m=0;m<p.length;m++){var l;const E=yo(l=p[m]).call(l);i[m]&&E&&(i[m].ip6=E)}}const u=e.detail&&e.detail.candidate;let h;if(u){const[p,m]=u.split(":");p&&m&&(h={port:Number(m),ip:p,address:"".concat(p,":").concat(m)})}return{gatewayAddrs:i,apGatewayAddress:h,uid:e.uid,cid:e.cid,cert:e.cert,vid:e.detail&&e.detail[8],uni_lbs_ip:e.detail&&e.detail[1],res:e,csIp:e.detail&&e.detail[502]}}function Ia(e){return typeof e=="number"?e:e.exact||e.ideal||e.max||e.min||0}function z6(e){const n=e._encoderConfig;if(!n)return{};const i={resolution:n.width&&n.height?"".concat(Ia(n.width),"x").concat(Ia(n.height)):void 0,maxVideoBW:n.bitrateMax,minVideoBW:n.bitrateMin};return typeof n.frameRate=="number"?(i.maxFrameRate=n.frameRate,i.minFrameRate=n.frameRate):n.frameRate&&(i.maxFrameRate=n.frameRate.max||n.frameRate.ideal||n.frameRate.exact||n.frameRate.min,i.minFrameRate=n.frameRate.min||n.frameRate.ideal||n.frameRate.exact||n.frameRate.max),i}function W6(e){return e>=0&&e<.17?1:e>=.17&&e<.36?2:e>=.36&&e<.59?3:e>=.59&&e<=1?4:e>1?5:0}function U0(e,n){let i,a,l;switch(n){case Kr.CHOOSE_SERVER:a=4096,l="choose server";break;case Kr.CLOUD_PROXY:a=1048576,l="proxy";break;case Kr.CLOUD_PROXY_5:a=4194304,l="proxy5";break;case Kr.CLOUD_PROXY_FALLBACK:a=4194310,l="proxy fallback";break;default:throw new Ce(X.UNEXPECTED_ERROR,"multi unlibs response transformer get unknown service id",{csIp:e.detail&&e.detail[502],retry:!1})}if(e.response_body.forEach(u=>{u.buffer&&u.buffer.flag===a&&(i={code:u.buffer.code,addresses:(u.buffer.edges_services||[]).map(h=>_S(_S({},h),{},{ticket:u.buffer.cert})),server_ts:e.enter_ts,uid:u.buffer.uid,cid:u.buffer.cid,cname:u.buffer.cname,detail:_S(_S({},u.buffer.detail),e.detail),flag:u.buffer.flag,opid:e.opid,cert:u.buffer.cert})}),!i)throw new Ce(X.MULTI_UNILBS_RESPONSE_ERROR,"cannot parse response ".concat(l," from multi unilbs response"),{csIp:e.detail&&e.detail[502]});return i}async function G6(e,n){return await et.all(e.addresses.map(async i=>({address:Hu(i.ip),tcpport:i.port,udpport:i.port,username:n&&Q("ENCRYPT_PROXY_USERNAME_AND_PSW")&&window.isSecureContext?n.toString():Wi.username,password:n&&Q("ENCRYPT_PROXY_USERNAME_AND_PSW")&&window.isSecureContext?await qw(n.toString()):Wi.password})))}function qI(e,n){const i=n.getMediaStreamTrack(!0).getSettings(),a=n.videoHeight||i.height,l=n.videoWidth||i.width;return a&&l?Math.max(Math.min(a,l)/Math.min(Ia(e.height),Ia(e.width)),1):(k.warning("can't get ori-track's height, default scale down 4 times for low stream"),4)}function zu(e){let{candidateType:n,relayProtocol:i,type:a,address:l,port:u,protocol:h}=e;const p={candidateType:n,relayProtocol:i,protocol:h};if(a!=="local-candidate"){const m=l.split(".");m.length>=4&&(m[1]="*",m[2]="*"),p.address=m.join("."),p.port=u}return p}function ch(e){const n=e.split(":"),i=e.split(/[-.]/),a=Ge(e).call(e,"-")?"-":".";let l=e;return n.length>1?i.length>1?(i[1]="**",l=i[0]+a+"**:"+n[n.length-1]):l=n.length>2?n[0]+a+"**:"+n[n.length-1]:"**:"+n[n.length-1]:i.length>1&&(l=i[0]+a+"**"),l}function yS(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Q("SVC_MODE");if(Q("ENABLE_SVC"))return function(n){return n in q_}(e)?e:q_.L1T3}const K6={[it.VIDEO]:[{key:"abs-send-time",extensionName:"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"},{key:"video-orientation",extensionName:"urn:3gpp:video-orientation"},{key:"draft-holmer-rmcat-transport-wide-cc-extensions-01",extensionName:"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"},{key:"playout-delay",extensionName:"http://www.webrtc.org/experiments/rtp-hdrext/playout-delay"},{key:"video-content-type",extensionName:"http://www.webrtc.org/experiments/rtp-hdrext/video-content-type"},{key:"color-space",extensionName:"http://www.webrtc.org/experiments/rtp-hdrext/color-space"},{key:"video-timing",extensionName:"http://www.webrtc.org/experiments/rtp-hdrext/video-timing"}],[it.AUDIO]:[{key:"ssrc-audio-level",extensionName:"urn:ietf:params:rtp-hdrext:ssrc-audio-level"},{key:"draft-holmer-rmcat-transport-wide-cc-extensions-01",extensionName:"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"},{key:"abs-send-time",extensionName:"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"}]};function CS(e,n,i){n.forEach(a=>{var l;const u=K6[e].find(p=>{var m;let{key:E}=p;return Ge(m=a.extensionName).call(m,E)});if(!u)return;const h=i.find(p=>{let{extensionName:m}=p;return Ge(m).call(m,u.key)});h&&Ge(l=h.extensionName).call(l,"gdpr_forbidden")&&(a.extensionName=h.extensionName)})}function lp(e,n){n.forEach(i=>{var a;const l=K6[e].find(u=>{var h;let{key:p}=u;return Ge(h=i.extensionName).call(h,p)});Ge(a=i.extensionName).call(a,"gdpr_forbidden")&&l&&(i.extensionName=l.extensionName)})}function Y6(e){return e==="http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"||Ge(e).call(e,"abs-send-time")}function bS(e){return e==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"||Ge(e).call(e,"draft-holmer-rmcat-transport-wide-cc-extensions-01")}function q6(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),i.push.apply(i,a)}return i}function X6(e){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?q6(Object(i),!0).forEach(function(a){W(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):q6(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function B0(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=arguments.length>3?arguments[3]:void 0;const{filterRTX:l,filterVideoFec:u,filterAudioFec:h,filterAudioCodec:p,filterVideoCodec:m,unsupportedVideoUplinkCodec:E,unsupportedVideoDownlinkCodec:S}=n,{useXR:R}=i;let w=[],O=[],H=[],B=[],j=!1,q=!1;if(sa(e).mediaDescriptions.forEach(Z=>{a&&a!==Z.attributes.direction||(Z.media.mediaType!=="video"||j||(O=Z.attributes.payloads,B=Z.attributes.extmaps,j=!0),Z.media.mediaType!=="audio"||q||(w=Z.attributes.payloads,H=Z.attributes.extmaps,q=!0))}),!B||O.length===0)throw new Error("Cannot get video capabilities from SDP.");if(!H||w.length===0)throw new Error("Cannot get audio capabilities from SDP.");if(O.forEach(Z=>{var pe;(pe=Z.rtpMap)!==null&&pe!==void 0&&pe.clockRate&&(Z.rtpMap.clockRate=parseInt(Z.rtpMap.clockRate)),R&&Z.rtcpFeedbacks.push({type:"rrtr"})}),w.forEach(Z=>{var pe;(pe=Z.rtpMap)!==null&&pe!==void 0&&pe.clockRate&&(Z.rtpMap.clockRate=parseInt(Z.rtpMap.clockRate)),R&&Z.rtcpFeedbacks.push({type:"rrtr"})}),l&&(w=w.filter(Z=>{var pe;return((pe=Z.rtpMap)===null||pe===void 0?void 0:pe.encodingName.toLowerCase())!=="rtx"}),O=O.filter(Z=>{var pe;return((pe=Z.rtpMap)===null||pe===void 0?void 0:pe.encodingName.toLowerCase())!=="rtx"})),u){const Z=O.filter(re=>{var Se;return/(red)|(ulpfec)|(flexfec)/i.test(((Se=re.rtpMap)===null||Se===void 0?void 0:Se.encodingName)||"")}),pe=Gu(Z,O).map(re=>re.payloadType),he=[...Z.map(re=>re.payloadType),...pe];O=O.filter(re=>!Ge(he).call(he,re.payloadType))}if(h&&(w=w.filter(Z=>{var pe;return!/(red)|(ulpfec)|(flexfec)/i.test(((pe=Z.rtpMap)===null||pe===void 0?void 0:pe.encodingName)||"")})),p&&(p==null?void 0:p.length)>0&&(w=w.filter(Z=>{var pe;return Ge(p).call(p,((pe=Z.rtpMap)===null||pe===void 0?void 0:pe.encodingName.toLowerCase())||"")})),m&&(m==null?void 0:m.length)>0){const Z=O.filter(pe=>{var he;return Ge(m).call(m,((he=pe.rtpMap)===null||he===void 0?void 0:he.encodingName.toLowerCase())||"")});O=Z.concat(l?[]:Gu(Z,O))}const Y=Q("UNSUPPORTED_VIDEO_CODEC");if(Y&&Y.length>0){const Z=O.filter(re=>re.rtpMap&&Ge(Y).call(Y,re.rtpMap.encodingName.toLowerCase())),pe=Gu(Z,O),he=Z.concat(pe).map(re=>re.payloadType);O=O.filter(re=>!Ge(he).call(he,re.payloadType)),k.debug("unsupportedVideoCodec: ".concat(Y,", toBeRemoved: ").concat(he))}if(E&&E.length>0&&a==="sendonly"){const Z=O.filter(re=>re.rtpMap&&Ge(E).call(E,re.rtpMap.encodingName.toLowerCase())),pe=Gu(Z,O),he=Z.concat(pe).map(re=>re.payloadType);O=O.filter(re=>!Ge(he).call(he,re.payloadType)),k.debug("unsupportedVideoUplinkCodec: ".concat(E,", toBeRemoved: ").concat(he))}if(S&&S.length>0&&a==="recvonly"){const Z=O.filter(re=>re.rtpMap&&Ge(S).call(S,re.rtpMap.encodingName.toLowerCase())),pe=Gu(Z,O),he=Z.concat(pe).map(re=>re.payloadType);O=O.filter(re=>!Ge(he).call(he,re.payloadType)),k.debug("unsupportedVideoDownlinkCodec: ".concat(S,", toBeRemoved: ").concat(he))}return{audioCodecs:w,videoCodecs:O,audioExtensions:H,videoExtensions:B}}function Wu(e){const n=sa(e);let i,a;for(const l of n.mediaDescriptions){if(!i){const u=l.attributes.iceUfrag,h=l.attributes.icePwd;if(!u||!h)throw new Error("Cannot get iceUfrag or icePwd from SDP.");i={iceUfrag:u,icePwd:h}}if(!a){const u=l.attributes.fingerprints;u.length>0&&(a={fingerprints:u})}}if(!a&&n.attributes.fingerprints.length>0&&(a={fingerprints:n.attributes.fingerprints}),!a||!i)throw new Error("Cannot get iceParameters or dtlsParameters from SDP.");return{iceParameters:i,dtlsParameters:a}}function J6(e,n){const i=[],a=e.attributes.ssrcGroups.filter(h=>h.semantic==="FID"),l=e.attributes.ssrcGroups.find(h=>h.semantic==="SIM"),u=e.attributes.ssrcs;if(l)l.ssrcIds.forEach(h=>{var p;const m=(p=a.find(E=>E.ssrcIds[0]===h))===null||p===void 0?void 0:p.ssrcIds[1];i.push({ssrcId:h,rtx:n?m:void 0})});else if(a.length>0){const h=a[0].ssrcIds[0],p=a[0].ssrcIds[1];i.push({ssrcId:h,rtx:n?p:void 0})}else{if(u.length===0)throw new Error("No ssrcs found on local media description.");i.push({ssrcId:u[0].ssrcId})}return i}function Q6(e,n,i){const{cname:a}=e;let l=[];n&&(l=Z6(n)),l.length===0&&(l=e.iceParameters.candidates.map(S=>({foundation:S.foundation,componentId:"1",transport:S.protocol,priority:S.priority.toString(),connectionAddress:S.ip,port:S.port.toString(),type:S.type,extension:{}})),k.debug("Using candidates from gateway."));const u={fingerprints:e.dtlsParameters.fingerprints.map(S=>({hashFunction:S.algorithm,fingerprint:S.fingerprint}))},h={iceUfrag:e.iceParameters.iceUfrag,icePwd:e.iceParameters.icePwd};let p;switch(e.dtlsParameters.role){case"server":p="passive";break;case"client":p="active";break;case"auto":p="actpass"}const m=RS(e.rtpCapabilities),E=[];return Array.isArray(i)&&i.length>0&&i.forEach(S=>{E.push({kind:it.VIDEO,ssrcMsg:[{ssrcId:S.v,rtx:S.v_rtx}],mslabel:"".concat(S.v,"_").concat(S.a)},{kind:it.AUDIO,ssrcMsg:[{ssrcId:S.a}],mslabel:"".concat(S.v,"_").concat(S.a)})}),{dtlsParameters:u,iceParameters:h,candidates:l,rtpCapabilities:m,setup:p,cname:a,preSSRCs:E}}function Z6(e){let n=[];return e.ip&&typeof e.port=="number"&&(n=[{foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:e.ip,port:e.port.toString(),type:"host",extension:{}}],k.debug("Using remote candidate from AP ".concat(ch(e.ip),":").concat(e.port)),e.ip6&&(n.push({foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:e.ip6,port:e.port.toString(),type:"host",extension:{}}),k.debug("Using IPV6 remote candidate from AP ".concat(ch(e.ip6),":").concat(e.port)))),n}function V0(e,n,i){const a=[],l=[];return e.forEach(u=>{let{ssrcId:h,rtx:p}=u;const m=Zn(8,"track-"),E={ssrcId:h,attributes:X6({label:m,mslabel:i=i||Zn(10,""),msid:"".concat(i," ").concat(m)},n&&{cname:n})};if(a.push(E),p!==void 0){const S={ssrcId:p,attributes:X6({label:m,mslabel:i,msid:"".concat(i," ").concat(m)},n&&{cname:n})};a.push(S),l.push({semantic:"FID",ssrcIds:[h,p]})}}),e.length>1&&l.push({semantic:"SIM",ssrcIds:e.map(u=>{let{ssrcId:h}=u;return h})}),{ssrcs:a,ssrcGroups:l}}function up(e,n){n instanceof Mr&&e.attributes.payloads.forEach(i=>{var a;const l=(a=i.rtpMap)===null||a===void 0?void 0:a.encodingName.toLowerCase();if(!l||["opus","pcmu","pcma","g722"].indexOf(l)===-1)return;i.fmtp||(i.fmtp={parameters:{}}),l==="opus"&&typeof Q("OPUS_PTIME")=="number"?i.fmtp.parameters.ptime=Q("OPUS_PTIME"):i.fmtp.parameters.minptime="10",i.fmtp.parameters.useinbandfec="1";const u=n._encoderConfig;u&&(l!=="pcmu"&&l!=="pcma"&&l!=="g722"&&(u.bitrate&&!Or()&&(i.fmtp.parameters.maxaveragebitrate="".concat(Math.floor(1e3*u.bitrate))),u.sampleRate&&(i.fmtp.parameters.maxplaybackrate="".concat(u.sampleRate),i.fmtp.parameters["sprop-maxcapturerate"]="".concat(u.sampleRate)),u.stereo&&(i.fmtp.parameters.stereo="1",i.fmtp.parameters["sprop-stereo"]="1")),n instanceof P0&&l==="opus"&&n._config.DTX&&(i.fmtp.parameters.usedtx="1"))})}function XI(e){const n=e.attributes.unrecognized.findIndex(i=>i.attField==="x-google-flag"&&i.attValue==="conference");n!==-1&&e.attributes.unrecognized.splice(n,1)}function JI(e,n){var i;if(!(n instanceof sr&&n._encoderConfig&&n._hints.indexOf(qn.SCREEN_TRACK)===-1))return;const a=n._encoderConfig;Rn().supportMinBitrate&&a.bitrateMin&&e.attributes.payloads.forEach(l=>{var u,h;Ge(u=["h264","h265","vp8","vp9","av1"]).call(u,((h=l.rtpMap)===null||h===void 0?void 0:h.encodingName.toLowerCase())||"")&&(l.fmtp||(l.fmtp={parameters:{}}),l.fmtp.parameters["x-google-min-bitrate"]="".concat(a.bitrateMin))}),Rn().supportMinBitrate&&!Ge(i=n._hints).call(i,qn.LOW_STREAM)&&a.bitrateMax&&e.attributes.payloads.forEach(l=>{var u,h;Ge(u=["h264","h265","vp8","vp9","av1"]).call(u,((h=l.rtpMap)===null||h===void 0?void 0:h.encodingName.toLowerCase())||"")&&(l.fmtp||(l.fmtp={parameters:{}}),l.fmtp.parameters["x-google-start-bitrate"]="".concat(Q("X_GOOGLE_START_BITRATE")||Math.floor(a.bitrateMax)))})}function e8(e){if(e.media.mediaType!=="video")return;const n=yn();if(n.name!==An.SAFARI&&n.os!==Ci.IOS)return;const i=e.attributes.extmaps.findIndex(a=>/video-orientation/g.test(a.extensionName));i!==-1&&e.attributes.extmaps.splice(i,1)}function TS(e,n,i){if(!n)return;let a,l;if(e.media.mediaType==="video"?(a=i.videoExtensions,l=i.videoCodecs):(a=i.audioExtensions,l=i.audioCodecs),n.twcc===!0){const u=a.find(h=>bS(h.extensionName));if(u){const h=u.extensionName;e.attributes.extmaps.find(m=>bS(m.extensionName))||e.attributes.extmaps.push({entry:u.entry,extensionName:h}),function(m,E){return E.filter(S=>!!m.find(R=>R.payloadType===S.payloadType&&!!R.rtcpFeedbacks.find(w=>w.type==="transport-cc")))}(l,e.attributes.payloads).forEach(m=>{m.rtcpFeedbacks.find(E=>E.type==="transport-cc")||m.rtcpFeedbacks.push({type:"transport-cc"})})}}else if(n.twcc===!1){const u=e.attributes.extmaps.findIndex(h=>bS(h.extensionName));u!==-1&&e.attributes.extmaps.splice(u,1),e.attributes.payloads.forEach(h=>{const p=h.rtcpFeedbacks.findIndex(m=>m.type==="transport-cc");p!==-1&&h.rtcpFeedbacks.splice(p,1)})}if(n.remb===!0){const u=a.find(h=>Y6(h.extensionName));if(u){const h=u.extensionName;e.attributes.extmaps.find(m=>m.extensionName===h)||e.attributes.extmaps.push({entry:u.entry,extensionName:h}),function(m,E){return E.filter(S=>!!m.find(R=>R.payloadType===S.payloadType&&!!R.rtcpFeedbacks.find(w=>w.type==="goog-remb")))}(l,e.attributes.payloads).forEach(m=>{m.rtcpFeedbacks.find(E=>E.type==="goog-remb")||m.rtcpFeedbacks.push({type:"goog-remb"})})}}else if(n.remb===!1){const u=e.attributes.extmaps.findIndex(h=>Y6(h.extensionName));u!==-1&&e.attributes.extmaps.splice(u,1),e.attributes.payloads.forEach(h=>{const p=h.rtcpFeedbacks.findIndex(m=>m.type==="goog-remb");p!==-1&&h.rtcpFeedbacks.splice(p,1)})}}function t8(e,n,i){if(Or()||e.media.mediaType!=="video"||!(n instanceof sr)||i!=="vp9"&&i!=="vp8"||i==="vp8"&&!Q("SIMULCAST")||i==="vp9"&&Q("ENABLE_SVC")||n._scalabilityMode===void 0||n._scalabilityMode.numSpatialLayers<=1)return;const a=i==="vp8"?2:n._scalabilityMode.numSpatialLayers,l=e.attributes.ssrcs[0],u=e.attributes.ssrcGroups.find(p=>p.semantic==="FID"&&p.ssrcIds[0]===l.ssrcId),h={semantic:"SIM",ssrcIds:[l.ssrcId]};for(let p=1;p<a;p++)e.attributes.ssrcs.push({ssrcId:l.ssrcId+p,attributes:vr(l.attributes)}),h.ssrcIds.push(l.ssrcId+p),u&&(e.attributes.ssrcs.push({ssrcId:u.ssrcIds[1]+p,attributes:vr(l.attributes)}),e.attributes.ssrcGroups.push({semantic:"FID",ssrcIds:[l.ssrcId+p,u.ssrcIds[1]+p]}));e.attributes.ssrcGroups.unshift(h)}async function n8(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=new RTCPeerConnection;i.addTransceiver("video",{direction:"sendonly"}),i.addTransceiver("audio",{direction:"sendonly"}),i.addTransceiver("video",{direction:"recvonly"}),i.addTransceiver("audio",{direction:"recvonly"});const a=(await i.createOffer()).sdp,{send:l,recv:u,sendrecv:h}=function(){let p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},E=arguments.length>2?arguments[2]:void 0;const S=B0(E,p,m,"sendonly"),R=B0(E,p,m,"recvonly"),w={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},O={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},H={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]};if(Xs(S,R,"videoExtensions",w,O,H),Xs(S,R,"videoCodecs",w,O,H),Xs(S,R,"audioExtensions",w,O,H),Xs(S,R,"audioCodecs",w,O,H),Q("RAISE_H264_BASELINE_PRIORITY")){const B=[],j=[];if(H.videoCodecs.forEach((q,Y)=>{var Z;if(((Z=q.rtpMap)===null||Z===void 0?void 0:Z.encodingName.toLocaleLowerCase())==="h264"){var pe,he;const re=H.videoCodecs[Y+1],Se=re&&s8(q,re),Ae=(pe=q.fmtp)===null||pe===void 0?void 0:pe.parameters["profile-level-id"],Ne=(he=q.fmtp)===null||he===void 0?void 0:he.parameters["packetization-mode"];!Ae||Ae!==Q("FIRST_H264_PROFILE_LEVEL_ID")||Q("FIRST_PACKETIZATION_MODE")&&Ne!==Q("FIRST_PACKETIZATION_MODE")?Se?j.push([q,re]):j.push([q]):Se?B.push([q,re]):B.push([q])}}),B.length>0&&j.length>0){k.debug("raising H264 baseline profile priority"),H.videoCodecs.forEach((Y,Z)=>{var pe;if(((pe=Y.rtpMap)===null||pe===void 0?void 0:pe.encodingName.toLocaleLowerCase())==="h264"){const he=s8(Y,H.videoCodecs[Z+1]),re=B.shift()||j.shift()||[];re.length>0&&(he?H.videoCodecs.splice(Z,2,...re):H.videoCodecs.splice(Z,1,...re))}});const q=O.videoCodecs.filter(Y=>{var Z,pe;return((Z=Y.rtpMap)===null||Z===void 0?void 0:Z.encodingName.toLocaleLowerCase())==="h264"&&((pe=Y.fmtp)===null||pe===void 0?void 0:pe.parameters["profile-level-id"])!==Q("FIRST_H264_PROFILE_LEVEL_ID")});if(q.length>0){const Y=Gu(q,O.videoCodecs).map(pe=>pe.payloadType),Z=[...q.map(pe=>pe.payloadType),...Y];O.videoCodecs=O.videoCodecs.filter(pe=>!Ge(Z).call(Z,pe.payloadType))}Q("FILTER_SEND_H264_BASELINE")&&(w.videoCodecs=w.videoCodecs.filter(Y=>{var Z,pe;return!(((Z=Y.rtpMap)===null||Z===void 0?void 0:Z.encodingName.toLocaleLowerCase())==="h264"&&((pe=Y.fmtp)===null||pe===void 0?void 0:pe.parameters["profile-level-id"])!==Q("FIRST_H264_PROFILE_LEVEL_ID"))}))}return{send:w,recv:O,sendrecv:H}}return{send:w,recv:O,sendrecv:H}}(e,n,a);try{i.close()}catch{}return{send:l,recv:u,sendrecv:h}}function r8(){const e={audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]},n=B0(arguments.length>2?arguments[2]:void 0,arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},"recvonly"),i={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},a={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},l={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]};if(Xs(e,n,"videoExtensions",i,a,l),Xs(e,n,"videoCodecs",i,a,l),Xs(e,n,"audioExtensions",i,a,l),Xs(e,n,"audioCodecs",i,a,l),Q("RAISE_H264_BASELINE_PRIORITY")){const u=l.videoCodecs.findIndex(h=>h.rtpMap&&h.rtpMap.encodingName.toLocaleLowerCase()==="h264"&&h.fmtp&&h.fmtp.parameters["profile-level-id"]==="42001f");if(u!==-1){const h=l.videoCodecs.findIndex(p=>p.rtpMap&&p.rtpMap.encodingName.toLocaleLowerCase()==="h264");if(h<u){k.debug("raising H264 baseline profile priority");const p=l.videoCodecs[u];l.videoCodecs.splice(u,1),l.videoCodecs.splice(h,0,p)}h!==-1&&(a.videoCodecs=a.videoCodecs.filter(p=>!(p.rtpMap&&p.rtpMap.encodingName.toLocaleLowerCase()==="h264"&&p.fmtp&&p.fmtp.parameters["profile-level-id"]!=="42001f")))}}return{send:i,recv:a,sendrecv:l}}function Xs(e,n,i,a,l,u){if(i==="videoExtensions"||i==="audioExtensions"){const h=[];return e[i].forEach(p=>{n[i].some((m,E)=>{if(p.entry===m.entry&&p.extensionName===m.extensionName)return h.push(E),!0})?u[i].push(p):a[i].push(p)}),void n[i].forEach((p,m)=>{h.indexOf(m)===-1&&l[i].push(p)})}if(i==="videoCodecs"||i==="audioCodecs"){const h=[];return e[i].forEach(p=>{n[i].some((m,E)=>{if(p.payloadType===m.payloadType&&JSON.stringify(p)===JSON.stringify(m))return h.push(E),!0})?u[i].push(p):a[i].push(p)}),void n[i].forEach((p,m)=>{h.indexOf(m)===-1&&l[i].push(p)})}}function RS(e){const{send:n,recv:i,sendrecv:a}=e;if(!a){if(!n||!i)throw new Error("cannot merge rtp capabilities because one of send or recv is empty!");return{send:n,recv:i}}let l,u;return n?(l={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},l.audioCodecs=[...n.audioCodecs,...a.audioCodecs],l.videoCodecs=[...n.videoCodecs,...a.videoCodecs],l.audioExtensions=[...n.audioExtensions,...a.audioExtensions],l.videoExtensions=[...n.videoExtensions,...a.videoExtensions]):l=a,i?(u={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},u.audioCodecs=[...i.audioCodecs,...a.audioCodecs],u.videoCodecs=[...i.videoCodecs,...a.videoCodecs],u.audioExtensions=[...i.audioExtensions,...a.audioExtensions],u.videoExtensions=[...i.videoExtensions,...a.videoExtensions]):u=a,{send:l,recv:u}}function dp(e){e.media.mediaType==="audio"&&e.attributes.payloads.filter(n=>{var i;return((i=n.rtpMap)===null||i===void 0?void 0:i.encodingName.toLowerCase())==="opus"}).forEach(n=>{n.fmtp||(n.fmtp={parameters:{}}),n.fmtp.parameters.stereo="1",n.fmtp.parameters["sprop-stereo"]="1"})}function j0(e,n,i,a){let l=[];if(e===it.VIDEO){if(Q("H264_PROFILE_LEVEL_ID")&&a==="h264"&&(l=n.videoCodecs.filter(u=>{var h;return Ge(h=u.rtpMap&&u.rtpMap.encodingName.toLowerCase()||"").call(h,a)&&u&&u.fmtp&&u.fmtp.parameters["profile-level-id"]===Q("H264_PROFILE_LEVEL_ID")})),!Array.isArray(l)||l.length===0){let u=[];const h=[],p=[],m=[];if(i.videoCodecs.forEach(E=>{const S=E.rtpMap&&E.rtpMap.encodingName.toLowerCase()||"";Ge(S).call(S,a)?u.push(E):Ge(S).call(S,"vp9")?h.push(E):Ge(S).call(S,"vp8")?p.push(E):Ge(S).call(S,"h264")&&m.push(E)}),u.length===0){let E="";h.length!==0?(u=h,E="vp9"):p.length!==0?(u=p,E="vp8"):m.length!==0&&(u=m,E="h264"),k.warning("codec ".concat(a," not included in rtpCapabilities, fallback to default payloads: ").concat(E))}u.length!==0&&(l=n.videoCodecs.filter(E=>u.some(S=>S.payloadType===E.payloadType)))}if(l.length===0&&(k.warning("codec ".concat(a," not included in rtpCapabilities, fallback to default payloads: ").concat(n.videoCodecs[0].rtpMap&&n.videoCodecs[0].rtpMap.encodingName)),l=n.videoCodecs),Q("USE_PUB_RTX")||Q("USE_SUB_RTX")){const u=Gu(l,n.videoCodecs);l=[...l,...u]}}else{l=n.audioCodecs.filter(h=>{var p;return Ge(p=h.rtpMap&&h.rtpMap.encodingName.toLowerCase()||"").call(p,a)});const u=n.audioCodecs.filter(h=>{var p;return Ge(p=h.rtpMap&&h.rtpMap.encodingName.toLowerCase()||"").call(p,"red")});l.length===0&&(k.warning("codec ".concat(a," not included in rtpCapabilities, fallback to opus")),l=n.audioCodecs.filter(h=>{var p;return Ge(p=h.rtpMap&&h.rtpMap.encodingName.toLowerCase()||"").call(p,"opus")})),Q("ENABLE_AUDIO_RED")&&u.length!==0&&(l=[...u,...l])}return l}function Gu(e,n){const i=e.map(a=>a.payloadType.toString());return n.filter(a=>a.rtpMap&&a.rtpMap.encodingName==="rtx"&&a.fmtp&&a.fmtp.parameters.apt&&Ge(i).call(i,a.fmtp&&a.fmtp.parameters.apt))}async function Ku(e,n,i){const a=n.toString(),l=o8(a,"offer","remote","exchangeSDP");await e.setRemoteDescription({type:"offer",sdp:a});const u=await e.createAnswer();if(!u.sdp)throw new Error("cannot get answer sdp");let h=u.sdp;h=i8(h,i||{}),l==null||l(h||""),await e.setLocalDescription({type:"answer",sdp:h})}function i8(e,n,i){const a=sa(e),{useXR:l}=n;return a.mediaDescriptions.forEach(u=>{var h;u.attributes.mid&&(Array.isArray(i)&&!Ge(i).call(i,u.attributes.mid)||(u.media.mediaType==="audio"&&dp(u),l&&Ge(h=["audio","video"]).call(h,u.media.mediaType)&&u.attributes.payloads.forEach(p=>{p.rtcpFeedbacks.findIndex(m=>m.type==="rrtr")===-1&&p.rtcpFeedbacks.push({type:"rrtr"})})))}),Bu(a)}function o8(e,n,i,a){if(Q("SDP_LOGGING"))return k.upload("exchanging ".concat(i," ").concat(n," SDP during P2PConnection.").concat(a,`
`),e),n==="offer"?l=>{o8(l,"answer",i==="local"?"remote":"local",a)}:void 0}function a8(e){const n=Q("COMPATIBLE_SDP_EXTENSION");return!!(Array.isArray(n)&&n.length>0)&&n.some(i=>Ge(e).call(e,i))}function s8(e,n){try{var i;return((i=e.fmtp)===null||i===void 0?void 0:i.parameters.apt)===n.payloadType.toString()}catch{return!1}}function c8(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),i.push.apply(i,a)}return i}function Xa(e,n){return typeof Q(e)===n?Q(e):void 0}function mpe(){try{const e=Q("EXPERIMENTS")||{};return typeof e=="string"||Array.isArray(e)?{}:function(n){for(var i=1;i<arguments.length;i++){var a=arguments[i]!=null?arguments[i]:{};i%2?c8(Object(a),!0).forEach(function(l){W(n,l,a[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):c8(Object(a)).forEach(function(l){Object.defineProperty(n,l,Object.getOwnPropertyDescriptor(a,l))})}return n}({},e)}catch(e){return k.debug("handle gateway attributes failed: ",e),{}}}const l8={};function Yu(e){(!(arguments.length>1&&arguments[1]!==void 0)||arguments[1])&&k.debug("install service ".concat(e.name)),l8[e.name]=e}function Xl(e){const n=l8[e];if(!n)throw new Re(X.INVALID_OPERATION,"".concat(e," not found, please use AgoraRTC.use(").concat(e,"Service) to load it first"));return n}function u8(e,n){return Xl("DataStream").create(e,n)}function wS(){return Xl("InterceptFrame").create()}function d8(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),i.push.apply(i,a)}return i}function lo(e){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?d8(Object(i),!0).forEach(function(a){W(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):d8(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}const QI=new Map;class gpe extends br{get state(){return this._state}set state(n){if(n===this._state)return;const i=this._state;this._state=n,n==="DISCONNECTED"&&this._disconnectedReason?this.emit(wi.CONNECTION_STATE_CHANGE,n,i,this._disconnectedReason):this.emit(wi.CONNECTION_STATE_CHANGE,n,i)}get joinGatewayStartTime(){return this._joinGatewayStartTime}set joinGatewayStartTime(n){k.debug("[".concat(this.store.clientId,"] set joinGatewayStartTime at ").concat(n)),this._joinGatewayStartTime=n}constructor(n,i){var a,l,u;super(),W(this,"store",void 0),W(this,"joinInfo",void 0),W(this,"key",void 0),W(this,"ntpOffset",0),W(this,"signal",void 0),W(this,"role",void 0),W(this,"isPreallocation",void 0),W(this,"isPreSub",void 0),W(this,"inChannelInfo",{joinAt:null,duration:0}),W(this,"spec",void 0),W(this,"_state","DISCONNECTED"),W(this,"_statsCollector",void 0),W(this,"_disconnectedReason",void 0),W(this,"isSignalRecover",!1),W(this,"hasChangeBGPAddress",!1),W(this,"trafficStatsInterval",void 0),W(this,"networkQualityInterval",void 0),W(this,"_joinGatewayStartTime",0),W(this,"_signalTimeout",!1),W(this,"_clientRoleOptions",void 0),W(this,"_isProactiveJoin",!1),this.store=n,this.spec=i,this.signal=this.store.useP2P?(a={spec:lo(lo({},i),{},{retryConfig:i.websocketRetryConfig}),store:n},(l=(u=Xl("P2PChannel")).createSubmodule)===null||l===void 0?void 0:l.call(u,a)):new fpe(lo(lo({},i),{},{retryConfig:i.websocketRetryConfig}),n),this._statsCollector=i.statsCollector,this.role=i.role||"audience",this._clientRoleOptions=i.clientRoleOptions,this.handleSignalEvents()}async join(n,i,a){this.store.joinGatewayStart(),n.cloudProxyServer!=="disabled"&&(this.hasChangeBGPAddress=!0);const l=Date.now();let u=QI.get(n.cname);if(u||(u=new Map,QI.set(n.cname,u)),this._isProactiveJoin=!0,u.has(n.uid)){const E=new Ce(X.UID_CONFLICT);throw ct.joinGateway(n.sid,{lts:l,succ:!1,ec:E.code,addr:null,uid:n.uid,cid:n.cid,firstSuccess:this._isProactiveJoin,isProxy:!!n.proxyServer,signalChannel:"0",preload:n.preload}),E}u.set(n.uid,!0),this.joinInfo=n,this.key=i;let h=0;this.joinGatewayStartTime=l;const p=n.proxyServer;try{k.debug("[".concat(this.store.clientId,"] use websocket join uid ").concat(h));const E=n.gatewayAddrs.map(S=>{let{address:R}=S;const[w,O]=R.split(":"),H={host:w,port:O};return n.proxyServer&&(H.proxy=n.proxyServer),H});h=(await this.signal.init(E)).uid,k.debug("[".concat(this.store.clientId,"] websocket join uid ").concat(h," cost ").concat(Date.now()-this.joinGatewayStartTime))}catch(E){var m;throw k.error("[".concat(this.store.clientId,"] User join failed"),E.toString()),ct.joinGateway(n.sid,{lts:l,succ:!1,ec:((m=E.data)===null||m===void 0?void 0:m.desc)||E.code,errorMsg:E.message,addr:this.signal.url,uid:n.uid,cid:n.cid,firstSuccess:this._isProactiveJoin,isProxy:!!p,signalChannel:"0",preload:n.preload}),u.delete(n.uid),this.signal.close(),E}return this.state="CONNECTED",this.inChannelInfo.joinAt=Date.now(),k.debug("[".concat(this.store.clientId,"] Connected to gateway server")),this.trafficStatsInterval=window.setInterval(()=>{this.updateTrafficStats().catch(E=>{k.warning("[".concat(this.store.clientId,"] get traffic stats error"),E.toString())})},3e3),this.networkQualityInterval=window.setInterval(()=>{navigator&&navigator.onLine!==void 0&&!navigator.onLine?this.emit(wi.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6}):this._signalTimeout?this.emit(wi.NETWORK_QUALITY,{downlinkNetworkQuality:5,uplinkNetworkQuality:5}):this.state==="CONNECTED"&&this._statsCollector.trafficStats?this.emit(wi.NETWORK_QUALITY,{uplinkNetworkQuality:W6(this._statsCollector.trafficStats.B_unq),downlinkNetworkQuality:W6(this._statsCollector.trafficStats.B_dnq)}):this.emit(wi.NETWORK_QUALITY,{uplinkNetworkQuality:0,downlinkNetworkQuality:0})},2e3),this.store.joinGatewayEnd(),h}async leave(){let n=arguments.length>0&&arguments[0]!==void 0&&arguments[0],i=arguments.length>1?arguments[1]:void 0;if(this.state!=="DISCONNECTED"){i!==Fn.FALLBACK&&(this.state="DISCONNECTING");try{n||this.signal.connectionState!==ir.CONNECTED||await function(a,l){return l===1/0?a:et.race([a,jhe(l)])}(this.signal.request(xt.LEAVE,void 0,!0),3e3)}catch(a){k.warning("[".concat(this.store.clientId,"] leave request failed, ignore"),a)}this.signal.close(i),i!==Fn.FALLBACK&&(this.state="DISCONNECTED"),this.reset()}}async publish(n,i,a){if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new Ce(X.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));const l={state:"offer",p2p_id:this.store.p2pId,ortc:i,mode:this.spec.mode,extend:Q("PUB_EXTEND"),twcc:!!Q("PUBLISH_TWCC"),rtx:!!Q("USE_PUB_RTX")};try{return(await this.signal.request(xt.PUBLISH,l,!0))._message}catch(u){if(a&&u.data&&u.data.code===Rt.ERR_PUBLISH_REQUEST_INVALID)return k.warning("[".concat(this.store.clientId,"] receive publish error code, retry"),u.toString()),await this.tryUnpubBeforeRepub(n,i),this.publish(n,i,!1);throw u}}async publishDataChannel(n,i,a){var l;if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new Ce(X.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));const u={stream_id:i.streamId,ordered:i.ordered?1:0,max_retrans_times:(l=i.maxRetransmits)!==null&&l!==void 0?l:10,channel_id:i.channelId,metadata:i.metadata};try{await this.signal.request(xt.PUBLISH_DATASTREAM,u,!0)}catch(h){if(a&&h.data&&h.data.code===Rt.ERR_PUBLISH_REQUEST_INVALID)return k.warning("[".concat(this.store.clientId,"] receive publish datachannels error code, retry"),h.toString()),await this.tryUnpubDataChannelBeforeRepub(n,i),this.publishDataChannel(n,i,!1);throw h}}async unpublish(n,i){try{if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new Ce(X.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));await this.signal.request(xt.UNPUBLISH,{stream_id:i,ortc:n},!0)}catch(a){k.warning("[".concat(this.store.clientId,"] unpublish warning: "),a)}}async unpublishDataChannel(n){try{if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new Ce(X.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));await et.all(n.map(i=>this.signal.request(xt.UNPUBLISH_DATASTREAM,{channel_id:i},!0)))}catch(i){k.warning("unpublish datachannels warning: ",i)}}async presubscribe(n,i,a){if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new Ce(X.INVALID_OPERATION,"can not presubscribe when connection state is ".concat(this.state));const l={stream_id:n,stream_type:i,mode:this.spec.mode,codec:this.spec.codec,p2p_id:this.store.p2pId,twcc:!!Q("SUBSCRIBE_TWCC"),rtx:!!Q("USE_SUB_RTX")||void 0,extend:Q("SUB_EXTEND"),svc:Array.isArray(Q("SVC"))&&Q("SVC").length!==0?Q("SVC"):void 0};try{return await this.signal.request(xt.PRE_SUBSCRIBE,l,!0)}catch(u){if(a&&u.data&&u.data.code===Rt.ERR_SUBSCRIBE_REQUEST_INVALID)return k.warning("[".concat(this.store.clientId,"] pre-subscribe error, retry"),u.toString()),this.presubscribe(n,i,!1);throw u}}async subscribe(n,i,a){if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new Ce(X.INVALID_OPERATION,"can not subscribe when connection state is ".concat(this.state));const l={stream_id:n,stream_type:i.stream_type,mode:this.spec.mode,codec:this.spec.codec,p2p_id:this.store.p2pId,twcc:!!Q("SUBSCRIBE_TWCC"),rtx:!!Q("USE_SUB_RTX"),extend:Q("SUB_EXTEND"),ssrcId:i.ssrcId,svc:Array.isArray(Q("SVC"))&&Q("SVC").length!==0?Q("SVC"):void 0};try{return(await this.signal.request(xt.SUBSCRIBE,l,!0))._message}catch(u){if(a&&u.data&&u.data.code===Rt.ERR_SUBSCRIBE_REQUEST_INVALID)return k.warning("[".concat(this.store.clientId,"] receiver subscribe error code, retry"),u.toString()),await this.tryUnsubBeforeResub(n,i),await this.subscribe(n,i,!1);throw u}}async subscribeDataChannel(n,i,a){if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new Ce(X.INVALID_OPERATION,"can not subscribe datachannel when connection state is ".concat(this.state));const l={uid:n,stream_id:i.id,channel_id:i.datachannelId};try{return void await this.signal.request(xt.SUBSCRIBE_DATASTREAM,l,!0)}catch(u){if(a&&u.data&&u.data.code===Rt.ERR_SUBSCRIBE_REQUEST_INVALID)return k.warning("[".concat(this.store.clientId,"] receiver subscribe datachannel error code, retry"),u.toString()),await this.tryUnsubDataChannelBeforeResub(n,i),await this.subscribeDataChannel(n,i,!1);throw u}}async subscribeAll(n,i){if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new Ce(X.INVALID_OPERATION,"can not massSubscribe when connection state is ".concat(this.state));const a={p2p_id:this.store.p2pId,users:n,dtx:!1,rtx:!!Q("USE_SUB_RTX"),twcc:!!Q("SUBSCRIBE_TWCC"),svc:Array.isArray(Q("SVC"))&&Q("SVC").length!==0?Q("SVC"):void 0};try{return await this.signal.request(xt.SUBSCRIBE_STREAMS,a,!0)}catch(l){if(i&&l.data&&l.data.code===Rt.ERR_SUBSCRIBE_REQUEST_INVALID)return k.warning("[".concat(this.store.clientId,"] receiver massSubscribe error code, retry"),l.toString()),await this.tryMassUnsubBeforeResub(n),await this.subscribeAll(n,!1);throw l}}async setVideoProfile(n){const i=function(a){if(!(a.bitrateMax&&a.bitrateMin&&a.frameRate&&a.height&&a.width))return;let l=a.frameRate,u=a.width,h=a.height,p=!0;return typeof l!="number"&&(l=l.exact||l.ideal||l.max||l.min||0,l||(p=!1)),typeof u!="number"&&(u=u.exact||u.ideal||u.max||u.min||0,u||(p=!1)),typeof h!="number"&&(h=h.exact||h.ideal||h.max||h.min||0,l||(p=!1)),p?{stream_type:0,width:u,height:h,fps:l,start_bps:1e3*a.bitrateMax,min_bps:1e3*a.bitrateMin,target_bps:1e3*a.bitrateMax}:void 0}(n);if(i)return this.signal.request(xt.SET_VIDEO_PROFILE,i);k.debug("[".concat(this.store.clientId,"] encoder config is not complete, do not report to gateway"))}async unsubscribe(n,i){try{await this.signal.request(xt.UNSUBSCRIBE,{p2p_id:this.store.p2pId,ortc:n,stream_id:i},!0)}catch(a){k.warning("[".concat(this.store.clientId,"] unsubscribe warning: "),a)}}async unsubscribeDataChannel(n,i){try{if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new Ce(X.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));await et.all(n.map(a=>this.signal.request(xt.UNSUBSCRIBE_DATASTREAM,{stream_id:a,uid:i},!0)))}catch(a){k.warning("unsubscribeDataChannel warning: ",a)}}async massUnsubscribe(n){try{await this.signal.request(xt.UNSUBSCRIBE_STREAMS,n,!0)}catch(i){k.warning("[".concat(this.store.clientId,"] massUnsubscribeAll warning: "),i)}}async reconnectPC(n){const{iceParameters:i,dtlsParameters:a,rtpCapabilities:l}=n;return{gatewayEstablishParams:await this.signal.request(xt.CONNECT_PC,{p2p_id:this.store.p2pId,stream_id:this.store.uid,ortc:{iceParameters:i,dtlsParameters:a,rtpCapabilities:l}},!0),gatewayAddress:this.getCurrentGatewayAddress()}}getGatewayInfo(){return this.signal.request(xt.GATEWAY_INFO)}async renewToken(n){await this.signal.request(xt.RENEW_TOKEN,n),this.key=n.token}updateClientRole(n,i){i&&(this._clientRoleOptions=Object.assign({},i)),Q("CLIENT_ROLE_OPTIONS")&&(k.debug("[".concat(this.store.clientId,"] Set roleOptions for ").concat(JSON.stringify(Q("CLIENT_ROLE_OPTIONS"))," instead of ").concat(JSON.stringify(this._clientRoleOptions)," ")),this._clientRoleOptions=Object.assign({},Q("CLIENT_ROLE_OPTIONS"))),this.role=n}async setClientRole(n,i){if(i&&(this._clientRoleOptions=Object.assign({},i)),Q("CLIENT_ROLE_OPTIONS")&&(this._clientRoleOptions=Object.assign({},Q("CLIENT_ROLE_OPTIONS")),k.debug("[".concat(this.store.clientId,"] Set roleOptions for ").concat(JSON.stringify(Q("CLIENT_ROLE_OPTIONS"))," instead of ").concat(JSON.stringify(this._clientRoleOptions)," "))),this.state!=="CONNECTED")return void(this.role=n);let a,l=0;n==="audience"?this._clientRoleOptions&&this._clientRoleOptions.delay?(a=this._clientRoleOptions.delay,l=1):l=this._clientRoleOptions&&this._clientRoleOptions.level?this._clientRoleOptions.level:2:l=0;const u=Object.assign({},i);delete u.delay,delete u.level,await this.signal.request(xt.SET_CLIENT_ROLE,lo(lo({role:n,level:l,delay:a},u),{},{client_ts:Date.now()})),this.role=n}async setRemoteVideoStreamType(n,i){await this.signal.request(xt.SWITCH_VIDEO_STREAM,{stream_id:n,stream_type:i})}async setDefaultRemoteVideoStreamType(n){await this.signal.request(xt.DEFAULT_VIDEO_STREAM,{stream_type:n})}async setStreamFallbackOption(n,i){await this.signal.request(xt.SET_FALLBACK_OPTION,{stream_id:n,fallback_type:i})}async pickSVCLayer(n,i){await this.signal.request(xt.PICK_SVC_LAYER,{stream_id:n,spatial_layer:i.spatialLayer,temporal_layer:i.temporalLayer})}async setRTM2Flag(n){await this.signal.request(xt.SET_RTM2_FLAG,{rtm2_flag:n})}async sendExtensionMessage(n,i,a){if(this.store.useP2P)return this.signal.sendExtensionMessage(n,i,a)}getInChannelInfo(){return this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=Date.now()-this.inChannelInfo.joinAt),lo({},this.inChannelInfo)}async getGatewayVersion(){return(await this.signal.request(xt.GATEWAY_INFO)).version}reset(){if(this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=Date.now()-this.inChannelInfo.joinAt,this.inChannelInfo.joinAt=null),this.trafficStatsInterval&&(window.clearInterval(this.trafficStatsInterval),this.trafficStatsInterval=void 0),this.joinInfo){const n=QI.get(this.joinInfo.cname);n&&n.delete(this.joinInfo.uid)}this.joinInfo=void 0,this.key=void 0,this.networkQualityInterval&&(window.clearInterval(this.networkQualityInterval),this.networkQualityInterval=void 0)}updateTurnConfigFromSignal(){if(!this.joinInfo)return;const n=function(i){let a;return a=i.startsWith("dc")?i.match(/(dc\:\/\/)?([^:]+):(\d+)/):i.match(/(wss\:\/\/)?([^:]+):(\d+)/),a?{username:Wi.username,password:Wi.password,turnServerURL:a[2],tcpport:parseInt(a[3])+30,udpport:parseInt(a[3])+30,forceturn:!1}:null}((this.joinInfo.cloudProxyServer==="disabled"?this.signal.url:this.joinInfo.gatewayAddrs[this.signal.currentURLIndex].address)||"");this.joinInfo.turnServer.serversFromGateway=[],n&&this.joinInfo.turnServer.mode!=="off"&&this.joinInfo.cloudProxyServer==="disabled"&&this.joinInfo.turnServer.serversFromGateway.push(lo(lo({},Wi),{},{turnServerURL:n.turnServerURL,tcpport:n.tcpport,udpport:n.udpport,username:this.joinInfo.uid.toString(),password:this.joinInfo.token}))}async updateTrafficStats(){if(this.state!=="CONNECTED")return;const n=await this.signal.request(xt.TRAFFIC_STATS,void 0,!0);n.timestamp=Date.now(),n.ntp_offset!=null&&(this.ntpOffset=n.ntp_offset),n.peer_delay.forEach(i=>{const a=this._statsCollector.trafficStats&&this._statsCollector.trafficStats.peer_delay.find(l=>l.peer_uid===i.peer_uid);a&&a.B_st!==i.B_st&&W_(()=>{this.emit(wi.STREAM_TYPE_CHANGE,i.peer_uid,i.B_st)})}),this._statsCollector.updateTrafficStats(n)}getJoinMessage(n){var i,a;if(!this.joinInfo||!this.key)throw new Ce(X.UNEXPECTED_ERROR,"can not generate join message, no join info");const l=Object.assign({},this.joinInfo.apResponse);let u=Q("REPORT_APP_SCENARIO");if(typeof u!="string")try{u=JSON.stringify(u)}catch{u=void 0}var h;u&&u.length>128&&(u=void 0),this.store.hasStartJoinChannel=!0,this.store.isABTestSuccess||this.emit(wi.UPDATE_GATEWAY_CONFIG),h=this.store.clientId,Ge(ip).call(ip,h)||ip.push(h);const p=fI(this.store),m=!((i=this.isPreallocation)===null||i===void 0||!i.call(this)),E=pV(this.store),S=mpe(),R=Bf(87)||b3()||jw(117),w=(function(){const H=yn();if(H.name!==An.SAFARI||!H.browserVersion)return!1;const B=H.browserVersion.split(".");return Number(B[0])>18||Number(B[0])===18&&Number(B[1])>=4}()||I3(18,4,!1))&&$w(18,6,!0)&&this.spec.codec==="h264"&&Q("ENABLE_ABSSENDTIME_AS_SENTTS"),O=lo({license:this.joinInfo.license,p2p_id:this.store.p2pId,session_id:this.joinInfo.sid,app_id:this.joinInfo.appId,channel_key:this.key,channel_name:this.joinInfo.cname,sdk_version:cs,browser:navigator.userAgent,process_id:Q("PROCESS_ID"),mode:this.store.useP2P?"p2p":this.spec.mode,codec:this.spec.codec,role:this.role,has_changed_gateway:this.hasChangeBGPAddress,ap_response:l,extend:Q("JOIN_EXTEND"),details:{6:this.joinInfo.stringUid,cservice_map:this.joinInfo.cloudProxyServer==="proxy3"?"1":this.joinInfo.cloudProxyServer==="proxy5"?"2":void 0},features:{rejoin:!0},optionalInfo:this.joinInfo.optionalInfo,appScenario:u,attributes:{userAttributes:lo(lo({enableEncodedTransform:(!!Q("ENABLE_AUDIO_METADATA")||!!Q("ENABLE_AUDIO_PTS"))&&R||!!Q("ENABLE_AUDIO_TOPN")&&Bw(An.CHROME,87,116)||void 0,enableAudioMetadata:!!Q("ENABLE_AUDIO_METADATA")&&R,enableAudioPts:!!Q("ENABLE_AUDIO_PTS")&&R,topnSmoothLevel:Q("TOPN_SMOOTH_LEVEL"),topnNewSpeakerDelay:Q("TOPN_NEW_SPEAKER_DELAY"),topnSwitchHoldMs:Q("TOPN_SWITCH_HOLD_MS"),topnAudioGain:Q("TOPN_AUDIO_GAIN"),enablePublishedUserList:Q("ENABLE_PUBLISHED_USER_LIST"),maxSubscription:Q("MAX_SUBSCRIPTION"),subscribeAudioFilterTopN:Xa("SUBSCRIBE_AUDIO_FILTER_TOPN","number"),enablePublishAudioFilter:Xa("ENABLE_PUBLISH_AUDIO_FILTER","boolean"),enableUserLicenseCheck:Xa("ENABLE_USER_LICENSE_CHECK","boolean"),enableRTX:Q("USE_PUB_RTX")===!0||Q("USE_SUB_RTX")===!0||void 0,disableFEC:Q("DISABLE_FEC"),enableNTPReport:!!Q("ENABLE_NTP_REPORT")||void 0,enableInstantVideo:E,enableFulllinkAvSync:!!Q("ENABLE_FULL_LINK_AV_SYNC")||void 0,enableDataStream2:Xa("ENABLE_DATASTREAM_2","boolean"),enableAutFeedback:!!Q("FORCE_ENABLE_AUT_CC")||!Q_()&&(!!Q("ENABLE_AUT_FEEDBACK")||void 0),rtm2Flag:typeof this.joinInfo.rtmFlag=="number"?this.joinInfo.rtmFlag:void 0,enableUserAutoRebalanceCheck:!!Q("ENABLE_USER_AUTO_REBALANCE_CHECK"),enableXR:Xa("USE_XR","boolean"),enableLossbasedBwe:Xa("ENABLE_LOSSBASED_BWE","boolean"),enableAutCC:!!Q("FORCE_ENABLE_AUT_CC")||!Q_()&&(!!Q("ENABLE_AUT_CC")||void 0),enableCCFallback:Xa("ENABLE_CC_FALLBACK","boolean"),enablePreallocPC:m,preSubNum:p?Xa("PRE_SUB_NUM","number"):void 0,enablePubTWCC:Xa("PUBLISH_TWCC","boolean"),enableSubTWCC:Xa("SUBSCRIBE_TWCC","boolean"),enablePubRTX:Xa("USE_PUB_RTX","boolean"),enableSubRTX:Xa("USE_SUB_RTX","boolean"),enableSubSVC:Q("ENABLE_SVC")?Q("ENABLE_SVC_DEFAULT_CODECS"):Array.isArray(Q("SVC"))&&Q("SVC").length!==0?Q("SVC"):void 0,enableSvcExtended:Q("ENABLE_SVC")&&Array.isArray(Q("SVC_EXTENDED"))&&Q("SVC_EXTENDED").length!==0?Q("SVC_EXTENDED"):void 0},S),{},{audioDuplicate:Xa("ENABLE_AUDIO_RED","boolean")?(a=Xa("AUDIO_DUPLICATE_NUM","number"))!==null&&a!==void 0?a:2:void 0,senttsUsesAbsSendTime:!!w||void 0})},join_ts:this.joinGatewayStartTime},n);return this.joinInfo.stringUid&&(O.string_uid=this.joinInfo.stringUid),this.joinInfo.aesmode&&this.joinInfo.aespassword&&(O.aes_mode=this.joinInfo.aesmode,Q("ENCRYPT_AES")?(O.aes_secret=this.joinInfo.aespassword,O.aes_encrypt=!0):O.aes_secret=this.joinInfo.aespassword,this.joinInfo.aessalt&&(O.aes_salt=this.joinInfo.aessalt)),l.addresses[this.signal.websocket.currentURLIndex]&&(O.ap_response.ticket=l.addresses[this.signal.websocket.currentURLIndex].ticket,delete l.addresses),this.joinInfo.defaultVideoStream!==void 0&&(O.default_video_stream=this.joinInfo.defaultVideoStream),O}getRejoinMessage(){if(!this.joinInfo)throw new Ce(X.UNEXPECTED_ERROR,"can not generate rejoin message, no join info");return{session_id:this.joinInfo.sid,channel_name:this.joinInfo.cname,cid:this.joinInfo.cid,uid:this.joinInfo.uid,vid:Number(this.joinInfo.vid)}}handleSignalEvents(){this.signal.on(Mt.WS_RECONNECT_CREATE_CONNECTION,n=>{this.joinGatewayStartTime=Date.now()}),this.signal.on(Mt.WS_RECONNECTING,n=>{this.joinInfo&&ct.WebSocketQuit(this.joinInfo.sid,{lts:Date.now(),succ:-1,cname:this.joinInfo.cname,uid:this.joinInfo.uid,cid:this.joinInfo.cid,errorCode:n||Hi.NETWORK_ERROR}),this.joinInfo&&(this.state="RECONNECTING",ct.sessionInit(this.joinInfo.sid,{lts:new Date().getTime(),extend:this.isSignalRecover?{recover:!0}:{rejoin:!0},cname:this.joinInfo.cname,appid:this.joinInfo.appId,mode:this.spec.mode,stringUid:this.joinInfo.stringUid,channelProfile:this.spec.mode==="live"?1:0,channelMode:0,lsid:this.joinInfo.sid,clientRole:this.role==="audience"?2:1,buildFormat:1}),this.isSignalRecover=!1,this.joinGatewayStartTime=Date.now())}),this.signal.on(Mt.WS_CLOSED,n=>{let i;switch(n){case Fn.LEAVE:i=Hi.LEAVE;break;case Fn.UID_BANNED:case Fn.IP_BANNED:case Fn.CHANNEL_BANNED:case Fn.SERVER_ERROR:i=Hi.SERVER_ERROR;break;case Fn.FALLBACK:i=Hi.FALLBACK;break;case Fn.LICENSE_MISSING:case Fn.LICENSE_EXPIRED:case Fn.LICENSE_MINUTES_EXCEEDED:case Fn.LICENSE_PERIOD_INVALID:case Fn.LICENSE_MULTIPLE_SDK_SERVICE:case Fn.LICENSE_ILLEGAL:case Fn.TOKEN_EXPIRE:i=n;break;default:i=Hi.NETWORK_ERROR}k.debug("[".concat(this.store.clientId,"] [signal] websocket closed, reason: ").concat(i||"undefined -> "+Hi.NETWORK_ERROR)),this.joinInfo&&ct.WebSocketQuit(this.joinInfo.sid,{lts:Date.now(),succ:n===Fn.LEAVE?1:-1,cname:this.joinInfo.cname,uid:this.joinInfo.uid,cid:this.joinInfo.cid,errorCode:i}),this._disconnectedReason=n,n!==Fn.FALLBACK&&(this.state="DISCONNECTED"),this.reset()}),this.signal.on(Mt.WS_CONNECTED,()=>{if(this.updateTurnConfigFromSignal(),this.state="CONNECTED",this.joinInfo){if(this.role==="audience"){const n=Q("CLIENT_ROLE_OPTIONS")||this._clientRoleOptions;n&&(n.level||n.delay)&&(k.debug("[".concat(this.store.clientId,"] patch to send set client role, role: ").concat(this.role,", mode: ").concat(this.spec.mode,", level: ").concat(n.level,", delay: ").concat(n.delay)),this.setClientRole(this.role,n))}if(ct.joinGateway(this.joinInfo.sid,{lts:this.joinGatewayStartTime,succ:!0,ec:null,vid:this.joinInfo.vid,addr:this.signal.url,uid:this.joinInfo.uid,cid:this.joinInfo.cid,firstSuccess:this._isProactiveJoin,isProxy:!!this.joinInfo.proxyServer,signalChannel:"0",preload:this.joinInfo.preload,isABTestSuccess:this.store.isABTestSuccess}),this._isProactiveJoin=!1,this.joinInfo.useLocalAccessPoint&&this.joinInfo.setLocalAPVersion===1){const n=this.signal.url&&this.signal.url.match(/wss\:\/\/([^:]+):(\d+)/);if(!n)return void k.error("[".concat(this.store.clientId,"] set local access point after joined failed: ").concat(n));zn("EVENT_REPORT_DOMAIN",n[1]),zn("EVENT_REPORT_BACKUP_DOMAIN",n[1]),zn("LOG_UPLOAD_SERVER","".concat(n[1],":6444"))}}}),this.signal.on(mn.ON_UPLINK_STATS,n=>{this._statsCollector.updateUplinkStats(n)}),this.signal.on(Mt.REQUEST_RECOVER,(n,i,a)=>{if(!this.joinInfo)return a(new Ce(X.UNEXPECTED_ERROR,"gateway: can not recover, no join info"));n&&(this.joinInfo.multiIP=n,this.hasChangeBGPAddress=!0),this.isSignalRecover=!0,zi(this,wi.REQUEST_NEW_GATEWAY_LIST).then(i).catch(a)}),this.signal.on(Mt.REQUEST_JOIN_INFO,async(n,i,a)=>{var l,u,h;if(this.updateTurnConfigFromSignal(),this.store.useP2P)return void n(this.getJoinMessage({ortc:{}}));const p=vr((l=this.joinInfo)===null||l===void 0?void 0:l.turnServer);if(Q("NEW_TURN_MODE")&&p&&((u=this.joinInfo)===null||u===void 0?void 0:u.cloudProxyServer)==="disabled"){var m;let w=p.servers.map(B=>"turnServerURL"in B&&Q("USE_TURN_IP")?lo(lo({},B),{},{turnServerURL:SS(B.turnServerURL)}):B),O=(m=p.serversFromGateway)===null||m===void 0?void 0:m.map(B=>Q("USE_TURN_IP")?lo(lo({},B),{},{turnServerURL:SS(B.turnServerURL)}):B);const H=this.signal.currentURLIndex;w.length>0&&(w=[w[H%w.length]],p.servers=w),Array.isArray(O)&&O.length>0&&(O=[O[0]],p.serversFromGateway=O),k.debug("[".concat(this.store.clientId,"] use single turn, use turn server index: ").concat(H))}const{iceParameters:E,dtlsParameters:S,rtpCapabilities:R}=await zi(this,wi.REQUEST_P2P_CONNECTION_PARAMS,{turnServer:p,cloudProxyServer:(h=this.joinInfo)===null||h===void 0?void 0:h.cloudProxyServer});try{n(this.getJoinMessage({ortc:{iceParameters:E,dtlsParameters:S,rtpCapabilities:R,version:"2"}}))}catch(w){i(w)}}),this.signal.on(Mt.REQUEST_REJOIN_INFO,n=>{n(this.getRejoinMessage())}),this.signal.on(Mt.REPORT_JOIN_GATEWAY,(n,i)=>{if(!this.joinInfo)return;let a,l="";var u;n instanceof Ce?(a=((u=n.data)===null||u===void 0?void 0:u.desc)||n.code,l=n.message):a=n,ct.joinGateway(this.joinInfo.sid,{lts:this.joinGatewayStartTime,succ:!1,ec:a,errorMsg:l,addr:i,uid:this.joinInfo.uid,cid:this.joinInfo.cid,firstSuccess:this._isProactiveJoin,isProxy:!!this.joinInfo.proxyServer,signalChannel:"0",preload:this.joinInfo.preload})}),this.signal.on(Mt.IS_P2P_DISCONNECTED,n=>{n(R0(this,wi.IS_P2P_DISCONNECTED))}),this.signal.on(Mt.DISCONNECT_P2P,()=>{this.emit(wi.DISCONNECT_P2P)}),this.signal.on(Mt.REQUEST_SUCCESS,()=>{this._signalTimeout=!1}),this.signal.on(Mt.REQUEST_TIMEOUT,()=>{this._signalTimeout=!0}),this.signal.on(Mt.JOIN_RESPONSE,n=>{const i=this.getCurrentGatewayAddress();this.emit(wi.JOIN_RESPONSE,n,i)}),this.signal.on(Mt.PRE_CONNECT_PC,async()=>{if(this.joinInfo){var n,i;this.updateTurnConfigFromSignal();const l=this.getCurrentGatewayAddress(),u=vr((n=this.joinInfo)===null||n===void 0?void 0:n.turnServer);if(Q("NEW_TURN_MODE")&&u&&((i=this.joinInfo)===null||i===void 0?void 0:i.cloudProxyServer)==="disabled"){var a;let p=u.servers.map(S=>"turnServerURL"in S&&Q("USE_TURN_IP")?lo(lo({},S),{},{turnServerURL:SS(S.turnServerURL)}):S),m=(a=u.serversFromGateway)===null||a===void 0?void 0:a.map(S=>Q("USE_TURN_IP")?lo(lo({},S),{},{turnServerURL:SS(S.turnServerURL)}):S);const E=this.signal.currentURLIndex;p.length>0&&(p=[p[E%p.length]],u.servers=p),Array.isArray(m)&&m.length>0&&(m=[m[0]],u.serversFromGateway=m),k.debug("[".concat(this.store.clientId,"] use single turn, use turn server index: ").concat(E,",in pre pc"))}const h=Q("FINGERPRINT")||this.joinInfo.apResponse.addresses[this.signal.currentURLIndex].fingerprint;if(l&&h){const p=Z6(l);this.emit(wi.PRE_CONNECT_PC,{candidates:p,fingerprint:h,turnServer:u})}}}),this.signal.on(Mt.RECOVER_NOTIFICATION,n=>{this.joinInfo&&typeof Q("AP_REQUEST_DETAIL")=="string"&&(this.joinInfo.apRequestDetail="".concat(Q("AP_REQUEST_DETAIL"),";").concat(n))})}async tryUnsubBeforeResub(n,i){try{await this.signal.request(xt.UNSUBSCRIBE,{p2p_id:this.store.p2pId,stream_id:n,ortc:[i]},!0)}catch(a){throw k.warning("[".concat(this.store.clientId,"] tryUnsubBeforeResub warning"),a),a}}async tryUnsubDataChannelBeforeResub(n,i){try{await this.signal.request(xt.UNSUBSCRIBE,{stream_id:i.id},!0)}catch(a){throw k.warning("unsubscribe datachannel warning",a),a}}async tryUnpubBeforeRepub(n,i){try{await this.signal.request(xt.UNPUBLISH,{stream_id:n,ortc:i},!0)}catch(a){throw k.warning("[".concat(this.store.clientId,"] tryUnpubBeforeRepub warning: "),a),a}}async tryUnpubDataChannelBeforeRepub(n,i){try{await this.signal.request(xt.UNPUBLISH_DATASTREAM,{channnel_id:i.channelId},!0)}catch(a){throw k.warning("unpublish datastream warning: ",a),a}}async tryMassUnsubBeforeResub(n){const i={users:n.map(a=>({stream_id:a.stream_id,stream_type:a.stream_type}))};try{await this.signal.request(xt.UNSUBSCRIBE_STREAMS,i,!0)}catch(a){throw k.warning("[".concat(this.store.clientId,"] tryMassUnsubBeforeResub warning"),a),a}}async muteLocal(n,i){const a={action:n.find(l=>l.stream_type===Bn.Audio)?"mute_local_audio":"mute_local_video",p2p_id:this.store.p2pId,ortc:n,stream_id:i};try{await this.signal.request(xt.CONTROL,a,!0,!0)}catch(l){throw k.warning("[".concat(this.store.clientId,"] gateway muteLocal warning: "),l),l}}async unmuteLocal(n,i){const a={action:n.find(l=>l.stream_type===Bn.Audio)?"unmute_local_audio":"unmute_local_video",p2p_id:this.store.p2pId,ortc:n,stream_id:i};try{await this.signal.request(xt.CONTROL,a,!0,!0)}catch(l){throw k.warning("[".concat(this.store.clientId,"] gateway unmuteLocal warning: "),l),l}}async muteRemote(n,i){const a={action:n===it.AUDIO?"mute_remote_audio":"mute_remote_video",p2p_id:this.store.p2pId,stream_id:i};try{await this.signal.request(xt.CONTROL,a,!0,!0)}catch(l){throw k.warning("[".concat(this.store.clientId,"] gateway muteRemote warning: "),l),l}}async unmuteRemote(n,i){const a={action:n===it.AUDIO?"unmute_remote_audio":"unmute_remote_video",p2p_id:this.store.p2pId,stream_id:i};try{await this.signal.request(xt.CONTROL,a,!0,!0)}catch(l){throw k.warning("[".concat(this.store.clientId,"] gateway unmuteRemote warning: "),l),l}}uploadWRTCStats(n){this.signal.uploadWRTCStats(n)}upload(n,i){this.signal.upload(n,i)}getSignalRTT(){return this.signal.rtt}async restartICE(n){const i={p2p_id:this.store.p2pId,stream_id:this.store.uid,ortc:n};try{return await this.signal.request(xt.RESTART_ICE,i,!0)}catch(a){throw k.warning("[".concat(this.store.clientId,"] P2PChannel.restartICE warning: "),a),a}}reconnect(n,i){this.state==="CONNECTED"&&this.signal.reconnect(n||void 0,i||Hi.P2P_FAILED)}getCurrentGatewayAddress(){var n,i;if(!Q("GATEWAY_WSS_ADDRESS"))return Q("USE_CANDIDATE_FROM_AP_DETAIL")&&(n=this.joinInfo)!==null&&n!==void 0&&n.apGatewayAddress?(k.debug("[".concat(this.store.clientId,"] use candidate from ap detail, ").concat(JSON.stringify(this.joinInfo.apGatewayAddress))),this.joinInfo.apGatewayAddress):(i=this.joinInfo)!==null&&i!==void 0&&i.gatewayAddrs?this.joinInfo.gatewayAddrs[this.signal.currentURLIndex]:void 0}async setPublishAudioFilterEnabled(n){await this.signal.request(xt.SET_PARAMETER,{enablePublishAudioFilter:n})}downgradeCodec(n){this.signal.downgradeCodec(n)}}let IS=0,ZI=0;function Pc(e,n,i,a){return new et((l,u)=>{n.timeout=n.timeout||Q("HTTP_CONNECT_TIMEOUT"),n.responseType=n.responseType||"json",n.data&&!i?(n.data=JSON.stringify(n.data),IS+=ul(n.data)):i&&(n.data.size?IS+=n.data.size:n.data instanceof FormData?IS+=H3(n.data):IS+=ul(JSON.stringify(n.data))),n.headers=n.headers||{},n.headers["Content-Type"]=n.headers["Content-Type"]||"application/json",n.method="POST",n.url=e,Yo.request(n).then(h=>{typeof h.data=="string"?ZI+=ul(h.data):h.data instanceof ArrayBuffer||h.data instanceof Uint8Array?ZI+=h.data.byteLength:ZI+=ul(JSON.stringify(h.data)),a&&l({data:h.data,headers:h.headers}),l(h.data)}).catch(h=>{Yo.isCancel(h)?u(new Ce(X.OPERATION_ABORTED,"cancel token canceled")):h.code==="ECONNABORTED"?u(new Ce(X.NETWORK_TIMEOUT,h.message)):h.response?u(new Ce(X.NETWORK_RESPONSE_ERROR,h.response.status)):u(new Ce(X.NETWORK_ERROR,h.message))})})}/*! formdata-polyfill. MIT License. Jimmy W?rting <https://jimmy.warting.se/opensource> */(function(){var e;function n(xe){var We=0;return function(){return We<xe.length?{done:!1,value:xe[We++]}:{done:!0}}}var i=typeof Object.defineProperties=="function"?Object.defineProperty:function(xe,We,ot){return xe==Array.prototype||xe==Object.prototype||(xe[We]=ot.value),xe},a,l=function(xe){xe=[typeof globalThis=="object"&&globalThis,xe,typeof window=="object"&&window,typeof self=="object"&&self,typeof s=="object"&&s];for(var We=0;We<xe.length;++We){var ot=xe[We];if(ot&&ot.Math==Math)return ot}throw Error("Cannot find global object")}(this);function u(xe,We){if(We)e:{var ot=l;xe=xe.split(".");for(var Pe=0;Pe<xe.length-1;Pe++){var U=xe[Pe];if(!(U in ot))break e;ot=ot[U]}(We=We(Pe=ot[xe=xe[xe.length-1]]))!=Pe&&We!=null&&i(ot,xe,{configurable:!0,writable:!0,value:We})}}function h(xe){return(xe={next:xe})[Symbol.iterator]=function(){return this},xe}function p(xe){var We=typeof Symbol<"u"&&Symbol.iterator&&xe[Symbol.iterator];return We?We.call(xe):{next:n(xe)}}if(u("Symbol",function(xe){function We(U,ee){this.A=U,i(this,"description",{configurable:!0,writable:!0,value:ee})}if(xe)return xe;We.prototype.toString=function(){return this.A};var ot="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",Pe=0;return function U(ee){if(this instanceof U)throw new TypeError("Symbol is not a constructor");return new We(ot+(ee||"")+"_"+Pe++,ee)}}),u("Symbol.iterator",function(xe){if(xe)return xe;xe=Symbol("Symbol.iterator");for(var We="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),ot=0;ot<We.length;ot++){var Pe=l[We[ot]];typeof Pe=="function"&&typeof Pe.prototype[xe]!="function"&&i(Pe.prototype,xe,{configurable:!0,writable:!0,value:function(){return h(n(this))}})}return xe}),typeof Object.setPrototypeOf=="function")a=Object.setPrototypeOf;else{var m;e:{var E={};try{E.__proto__={a:!0},m=E.a;break e}catch{}m=!1}a=m?function(xe,We){if(xe.__proto__=We,xe.__proto__!==We)throw new TypeError(xe+" is not extensible");return xe}:null}var S=a;function R(){this.m=!1,this.j=null,this.v=void 0,this.h=1,this.u=this.C=0,this.l=null}function w(xe){if(xe.m)throw new TypeError("Generator is already running");xe.m=!0}function O(xe,We){return xe.h=3,{value:We}}function H(xe){this.g=new R,this.G=xe}function B(xe,We,ot,Pe){try{var U=We.call(xe.g.j,ot);if(!(U instanceof Object))throw new TypeError("Iterator result "+U+" is not an object");if(!U.done)return xe.g.m=!1,U;var ee=U.value}catch(ue){return xe.g.j=null,xe.g.s(ue),j(xe)}return xe.g.j=null,Pe.call(xe.g,ee),j(xe)}function j(xe){for(;xe.g.h;)try{var We=xe.G(xe.g);if(We)return xe.g.m=!1,{value:We.value,done:!1}}catch(ot){xe.g.v=void 0,xe.g.s(ot)}if(xe.g.m=!1,xe.g.l){if(We=xe.g.l,xe.g.l=null,We.F)throw We.D;return{value:We.return,done:!0}}return{value:void 0,done:!0}}function q(xe){this.next=function(We){return xe.o(We)},this.throw=function(We){return xe.s(We)},this.return=function(We){return function(ot,Pe){w(ot.g);var U=ot.g.j;return U?B(ot,"return"in U?U.return:function(ee){return{value:ee,done:!0}},Pe,ot.g.return):(ot.g.return(Pe),j(ot))}(xe,We)},this[Symbol.iterator]=function(){return this}}function Y(xe,We){return We=new q(new H(We)),S&&xe.prototype&&S(We,xe.prototype),We}if(R.prototype.o=function(xe){this.v=xe},R.prototype.s=function(xe){this.l={D:xe,F:!0},this.h=this.C||this.u},R.prototype.return=function(xe){this.l={return:xe},this.h=this.u},H.prototype.o=function(xe){return w(this.g),this.g.j?B(this,this.g.j.next,xe,this.g.o):(this.g.o(xe),j(this))},H.prototype.s=function(xe){return w(this.g),this.g.j?B(this,this.g.j.throw,xe,this.g.o):(this.g.s(xe),j(this))},u("Array.prototype.entries",function(xe){return xe||function(){return function(We,ot){We instanceof String&&(We+="");var Pe=0,U=!1,ee={next:function(){if(!U&&Pe<We.length){var ue=Pe++;return{value:ot(ue,We[ue]),done:!1}}return U=!0,{done:!0,value:void 0}}};return ee[Symbol.iterator]=function(){return ee},ee}(this,function(We,ot){return[We,ot]})}}),typeof Blob<"u"&&(typeof FormData>"u"||!FormData.prototype.keys)){var Z=function(xe,We){for(var ot=0;ot<xe.length;ot++)We(xe[ot])},pe=function(xe){return xe.replace(/\r?\n|\r/g,`\r
`)},he=function(xe,We,ot){return We instanceof Blob?(ot=ot!==void 0?ot+"":typeof We.name=="string"?We.name:"blob",We.name===ot&&Object.prototype.toString.call(We)!=="[object Blob]"||(We=new File([We],ot)),[String(xe),We]):[String(xe),String(We)]},re=function(xe,We){if(xe.length<We)throw new TypeError(We+" argument required, but only "+xe.length+" present.")},Se=typeof globalThis=="object"?globalThis:typeof window=="object"?window:typeof self=="object"?self:this,Ae=Se.FormData,Ne=Se.XMLHttpRequest&&Se.XMLHttpRequest.prototype.send,Be=Se.Request&&Se.fetch,nn=Se.navigator&&Se.navigator.sendBeacon,sn=Se.Element&&Se.Element.prototype,Lt=Se.Symbol&&Symbol.toStringTag;Lt&&(Blob.prototype[Lt]||(Blob.prototype[Lt]="Blob"),"File"in Se&&!File.prototype[Lt]&&(File.prototype[Lt]="File"));try{new File([],"")}catch{Se.File=function(We,ot,Pe){return We=new Blob(We,Pe||{}),Object.defineProperties(We,{name:{value:ot},lastModified:{value:+(Pe&&Pe.lastModified!==void 0?new Date(Pe.lastModified):new Date)},toString:{value:function(){return"[object File]"}}}),Lt&&Object.defineProperty(We,Lt,{value:"File"}),We}}var kn=function(xe){return xe.replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22")},Nn=function(xe){this.i=[];var We=this;xe&&Z(xe.elements,function(ot){if(ot.name&&!ot.disabled&&ot.type!=="submit"&&ot.type!=="button"&&!ot.matches("form fieldset[disabled] *"))if(ot.type==="file"){var Pe=ot.files&&ot.files.length?ot.files:[new File([],"",{type:"application/octet-stream"})];Z(Pe,function(U){We.append(ot.name,U)})}else ot.type==="select-multiple"||ot.type==="select-one"?Z(ot.options,function(U){!U.disabled&&U.selected&&We.append(ot.name,U.value)}):ot.type==="checkbox"||ot.type==="radio"?ot.checked&&We.append(ot.name,ot.value):(Pe=ot.type==="textarea"?pe(ot.value):ot.value,We.append(ot.name,Pe))})};if((e=Nn.prototype).append=function(xe,We,ot){re(arguments,2),this.i.push(he(xe,We,ot))},e.delete=function(xe){re(arguments,1);var We=[];xe=String(xe),Z(this.i,function(ot){ot[0]!==xe&&We.push(ot)}),this.i=We},e.entries=function xe(){var We,ot=this;return Y(xe,function(Pe){if(Pe.h==1&&(We=0),Pe.h!=3)return We<ot.i.length?Pe=O(Pe,ot.i[We]):(Pe.h=0,Pe=void 0),Pe;We++,Pe.h=2})},e.forEach=function(xe,We){re(arguments,1);for(var ot=p(this),Pe=ot.next();!Pe.done;Pe=ot.next()){var U=p(Pe.value);Pe=U.next().value,U=U.next().value,xe.call(We,U,Pe,this)}},e.get=function(xe){re(arguments,1);var We=this.i;xe=String(xe);for(var ot=0;ot<We.length;ot++)if(We[ot][0]===xe)return We[ot][1];return null},e.getAll=function(xe){re(arguments,1);var We=[];return xe=String(xe),Z(this.i,function(ot){ot[0]===xe&&We.push(ot[1])}),We},e.has=function(xe){re(arguments,1),xe=String(xe);for(var We=0;We<this.i.length;We++)if(this.i[We][0]===xe)return!0;return!1},e.keys=function xe(){var We,ot,Pe,U,ee=this;return Y(xe,function(ue){if(ue.h==1&&(We=p(ee),ot=We.next()),ue.h!=3)return ot.done?void(ue.h=0):(Pe=ot.value,U=p(Pe),O(ue,U.next().value));ot=We.next(),ue.h=2})},e.set=function(xe,We,ot){re(arguments,2),xe=String(xe);var Pe=[],U=he(xe,We,ot),ee=!0;Z(this.i,function(ue){ue[0]===xe?ee&&(ee=!Pe.push(U)):Pe.push(ue)}),ee&&Pe.push(U),this.i=Pe},e.values=function xe(){var We,ot,Pe,U,ee=this;return Y(xe,function(ue){if(ue.h==1&&(We=p(ee),ot=We.next()),ue.h!=3)return ot.done?void(ue.h=0):(Pe=ot.value,(U=p(Pe)).next(),O(ue,U.next().value));ot=We.next(),ue.h=2})},Nn.prototype._asNative=function(){for(var xe=new Ae,We=p(this),ot=We.next();!ot.done;ot=We.next()){var Pe=p(ot.value);ot=Pe.next().value,Pe=Pe.next().value,xe.append(ot,Pe)}return xe},Nn.prototype._blob=function(){var xe="----formdata-polyfill-"+Math.random(),We=[],ot="--"+xe+`\r
Content-Disposition: form-data; name="`;return this.forEach(function(Pe,U){return typeof Pe=="string"?We.push(ot+kn(pe(U))+`"\r
\r
`+pe(Pe)+`\r
`):We.push(ot+kn(pe(U))+'"; filename="'+kn(Pe.name)+`"\r
Content-Type: `+(Pe.type||"application/octet-stream")+`\r
\r
`,Pe,`\r
`)}),We.push("--"+xe+"--"),new Blob(We,{type:"multipart/form-data; boundary="+xe})},Nn.prototype[Symbol.iterator]=function(){return this.entries()},Nn.prototype.toString=function(){return"[object FormData]"},sn&&!sn.matches&&(sn.matches=sn.matchesSelector||sn.mozMatchesSelector||sn.msMatchesSelector||sn.oMatchesSelector||sn.webkitMatchesSelector||function(xe){for(var We=(xe=(this.document||this.ownerDocument).querySelectorAll(xe)).length;0<=--We&&xe.item(We)!==this;);return-1<We}),Lt&&(Nn.prototype[Lt]="FormData"),Ne){var eo=Se.XMLHttpRequest.prototype.setRequestHeader;Se.XMLHttpRequest.prototype.setRequestHeader=function(xe,We){eo.call(this,xe,We),xe.toLowerCase()==="content-type"&&(this.B=!0)},Se.XMLHttpRequest.prototype.send=function(xe){xe instanceof Nn?(xe=xe._blob(),this.B||this.setRequestHeader("Content-Type",xe.type),Ne.call(this,xe)):Ne.call(this,xe)}}Be&&(Se.fetch=function(xe,We){return We&&We.body&&We.body instanceof Nn&&(We.body=We.body._blob()),Be.call(this,xe,We)}),nn&&(Se.navigator.sendBeacon=function(xe,We){return We instanceof Nn&&(We=We._asNative()),nn.call(this,xe,We)}),Se.FormData=Nn}})();const $0=()=>{const e=Q("AREAS");return e.length===0&&e.push(Dn.GLOBAL),Ms(e).call(e,(n,i,a)=>{const l=h8(i);return l?a===0?l:"".concat(n,",").concat(l):n},"")},h8=e=>e===Dn.OVERSEA?"".concat(Ji.ASIA,",").concat(Ji.EUROPE,",").concat(Ji.AFRICA,",").concat(Ji.NORTH_AMERICA,",").concat(Ji.SOUTH_AMERICA,",").concat(Ji.OCEANIA):Ji[e],vpe=e=>{const n={CODE:"",WEBCS_DOMAIN:[],WEBCS_DOMAIN_BACKUP_LIST:[],PROXY_CS:[],CDS_AP:[],ACCOUNT_REGISTER:[],UAP_AP:[],EVENT_REPORT_DOMAIN:[],EVENT_REPORT_BACKUP_DOMAIN:[],LOG_UPLOAD_SERVER:[],PROXY_SERVER_TYPE3:[]};return e.map(i=>{const a=ES[i],l=Object.keys(a);l&&l.map(u=>{u!=="CODE"&&(n[u]=n[u].concat(a[u]))})}),n},AS={GLOBAL:{ASIA:[Dn.CHINA,Dn.JAPAN,Dn.INDIA,Dn.KOREA,Dn.HKMC],EUROPE:[],NORTH_AMERICA:[Dn.US],SOUTH_AMERICA:[],OCEANIA:[],AFRICA:[]}},OS=Object.keys(AS[Dn.GLOBAL]),eA=[Dn.CHINA,Dn.NORTH_AMERICA,Dn.EUROPE,Dn.ASIA,Dn.JAPAN,Dn.INDIA,Dn.OCEANIA,Dn.SOUTH_AMERICA,Dn.AFRICA,Dn.KOREA,Dn.HKMC,Dn.US],Epe=function(e,n){let i=[];if(Ge(e).call(e,Dn.GLOBAL)){const u=[Dn.GLOBAL,Dn.OVERSEA],h=Object.keys(ES);if(n===Dn.GLOBAL)throw new Ce(X.INVALID_PARAMS,"GLOBAL is an invalid excludedArea value");if(n===Dn.CHINA)i=[Dn.OVERSEA];else if(l=n,Ge(OS).call(OS,l)){const p=(a=n,AS[Dn.GLOBAL][a]||[]),m=[...u,n,...p];i=h.filter(E=>!Ge(m).call(m,E))}else if(function(p){let m=!1;return OS.forEach(E=>{var S;Ge(S=AS[Dn.GLOBAL][E]).call(S,p)&&(m=!0)}),m}(n)){const p=function(E){let S;return OS.forEach(R=>{var w;Ge(w=AS[Dn.GLOBAL][R]).call(w,E)&&(S=R)}),S}(n),m=[...u,p,n];i=h.filter(E=>!Ge(m).call(m,E))}else i=e;i=function(p){const m=[];return eA.forEach(E=>{Ge(p).call(p,E)&&m.push(E)}),m.concat(p.filter(E=>!Ge(eA).call(eA,E)))}(i)}else i=e;var a,l;return i};function f8(e){var n,i;if(!e&&Ge(n=Q("AREAS")).call(n,Dn.EXTENSIONS))return k.debug("update area from ap : reset"),void tA(wfe,!0);if(!Ge(i=Q("AREAS")).call(i,Dn.GLOBAL)||!e)return;let a=ES.EXTENSIONS;a&&(a={CODE:h8(Dn.EXTENSIONS),WEBCS_DOMAIN:["ap-web-1-".concat(e,".agora.io")],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-".concat(e,".ap.sd-rtn.com")],PROXY_CS:["proxy-ap-web-".concat(e,".agora.io")],CDS_AP:["cds-ap-web-1-".concat(e,".agora.io"),"cds-ap-web-2-".concat(e,".ap.sd-rtn.com")],ACCOUNT_REGISTER:["sua-ap-web-1-".concat(e,".agora.io"),"sua-ap-web-2-".concat(e,".ap.sd-rtn.com")],UAP_AP:["uap-ap-web-1-".concat(e,".agora.io"),"uap-ap-web-2-".concat(e,".ap.sd-rtn.com")],EVENT_REPORT_DOMAIN:["statscollector-1-".concat(e,".agora.io")],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-".concat(e,".agora.io")],LOG_UPLOAD_SERVER:["logservice-".concat(e,".agora.io")],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy-".concat(e,".agora.io")]},k.debug("update area from ap success: ".concat(e,",config is "),a),zn("AREAS",[Dn.EXTENSIONS],!0),Object.keys(a).map(l=>{l==="LOG_UPLOAD_SERVER"||l==="EVENT_REPORT_DOMAIN"||l==="EVENT_REPORT_BACKUP_DOMAIN"||l==="PROXY_SERVER_TYPE3"?zn(l,a[l][0]):zn(l,a[l])}))}function tA(e){let n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const i=ct.reportApiInvoke(null,{name:Ur.SET_AREA,options:e,tag:gr.TRACER});try{let a=[];if(typeof e=="string"&&(a=[e]),Array.isArray(e)&&(e.forEach(u=>{if(!Ge(L6).call(L6,u))throw new Ce(X.INVALID_PARAMS,"invalid area code")}),a=e),Object.prototype.toString.call(e)==="[object Object]"){const{areaCode:u,excludedArea:h}=e;if(!u)throw new Ce(X.INVALID_PARAMS,"area code is needed");let p=u;typeof u=="string"&&(p=[u]),a=h?Epe(p,h):p}if(!n){if(Ac.AREAS){const u=new Ce(X.PROHIBITED_OPERATION,"setArea is prohibited because of config-distribute");return i.onError(u),void k.warning("setArea is prohibited because of config-distribute")}if(Ge(a).call(a,Dn.GLOBAL)&&Q("AREAS")===Dn.EXTENSIONS){const u=new Ce(X.PROHIBITED_OPERATION,"setArea is prohibited because of ap extensions");return i.onError(u),void k.warning("setArea is prohibited because of ap extensions")}}zn("AREAS",a,n);const l=vpe(a);Object.keys(l).map(u=>{u==="LOG_UPLOAD_SERVER"||u==="EVENT_REPORT_DOMAIN"||u==="EVENT_REPORT_BACKUP_DOMAIN"||u==="PROXY_SERVER_TYPE3"?zn(u,l[u][0]):zn(u,l[u])}),k.debug("set area success:",a.join(","))}catch(a){throw i.onError(a),a}i.onSuccess()}function p8(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),i.push.apply(i,a)}return i}function vl(e){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?p8(Object(i),!0).forEach(function(a){W(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):p8(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}let nA=1;function _pe(e,n,i,a,l){nA+=1;const u={sid:i.sid,command:"convergeAllocateEdge",uid:"666",appId:i.appId,ts:Math.floor(Date.now()/1e3),seq:nA,requestId:nA,version:cs,cname:i.cname},h={service_name:n,json_body:JSON.stringify(u)};let p,m,E=e[0];return Ic(async()=>{p=Date.now();const S=await Pc(E,{data:h,cancelToken:a,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"}});if(m=Date.now()-p,S.code!==0){const O=new Ce(X.UNEXPECTED_RESPONSE,"live streaming ap error, code"+S.code,{retry:!0,responseTime:m});throw k.error(O.toString()),O}const R=JSON.parse(S.json_body);if(R.code!==200){const O=new Ce(X.UNEXPECTED_RESPONSE,"live streaming app center error, code: ".concat(R.code,", reason: ").concat(R.reason),{code:R.code,responseTime:m});throw k.error(O.toString()),O}if(!R.servers||R.servers.length===0){const O=new Ce(X.UNEXPECTED_RESPONSE,"live streaming app center empty server",{code:R.code,responseTime:m});throw k.error(O.toString()),O}const w=function(O,H){return{addressList:O.servers.map(B=>"wss://".concat(B.address.replace(/\./g,"-"),".").concat(Q("WORKER_DOMAIN"),":").concat(B.wss,"?serviceName=").concat(encodeURIComponent(H))),workerToken:O.workerToken,vid:O.vid}}(R,n);return Q("LIVE_STREAMING_ADDRESS")&&(w.addressList=Q("LIVE_STREAMING_ADDRESS")instanceof Array?Q("LIVE_STREAMING_ADDRESS"):[Q("LIVE_STREAMING_ADDRESS")]),vl(vl({},w),{},{responseTime:m})},(S,R)=>(ct.apworkerEvent(i.sid,{success:!0,sc:200,serviceName:n,responseDetail:JSON.stringify(S.addressList),firstSuccess:R===0,responseTime:m,serverIp:e[R%e.length]}),!1),(S,R)=>(ct.apworkerEvent(i.sid,{success:!1,sc:S.data&&S.data.code||200,serviceName:n,responseTime:m,serverIp:e[R%e.length]}),!!(S.code!==X.OPERATION_ABORTED&&S.code!==X.UNEXPECTED_RESPONSE||S.data&&S.data.retry)&&(E=e[(R+1)%e.length],!0)),l)}let rA=1;function m8(e,n,i,a){let{url:l,areaCode:u}=e;const{clientId:h,sid:p}=n,m=Date.now();let E;const S=n.role,[R,w]=oA(n,u,[Kr.CHOOSE_SERVER]);let O=Gr.networkState;return Ic(async()=>{O&&Gr.networkState===wa.OFFLINE&&Gr.onlineWaiter&&await et.race([Gr.onlineWaiter,Pi(a&&a.maxRetryTimeout||ei.maxRetryTimeout)]),O=Gr.networkState;const{data:H,headers:B}=await Pc(l,{data:R,cancelToken:i,headers:{"Content-Type":"multipart/form-data;"}},!0,!0);E=B.http3==="1"?1:-1,ct.reportResourceTiming(l,p),v8(H,l,n,m,[Kr.CHOOSE_SERVER],E);const j=U0(H,Kr.CHOOSE_SERVER);return iA(j),YI(j,l)},H=>(H&&ct.joinChooseServer(p,{role:S,lts:m,succ:!0,csAddr:l,opid:w,serverList:H.gatewayAddrs.map(B=>B.address),ec:null,cid:H.cid.toString(),uid:H.uid.toString(),csIp:H.csIp,unilbsServerIds:[Kr.CHOOSE_SERVER].toString(),isHttp3:E,corssRegionTagReq:n.apRequestDetail,corssRegionTagRes:H.res.detail&&H.res.detail[38]}),!1),H=>H.code!==X.OPERATION_ABORTED&&(H.code===X.CAN_NOT_GET_GATEWAY_SERVER?H.data.retry:(ct.joinChooseServer(p,{role:S,lts:m,succ:!1,csAddr:l,serverList:null,opid:w,ec:H.code,csIp:H.data&&H.data.csIp,unilbsServerIds:[Kr.CHOOSE_SERVER].toString(),extend:JSON.stringify({networkState:O}),isHttp3:E,corssRegionTagReq:n.apRequestDetail}),k.warning("[".concat(h||"sid-".concat(p.slice(0,6)),"] Choose server network error, retry"),H),!0)),a)}function g8(e,n,i,a){let l,{url:u,areaCode:h,serviceIds:p}=e;const m=Date.now(),E=n.role,[S,R]=oA(n,h,p);let w;return Ic(async()=>{w&&Gr.networkState===wa.OFFLINE&&Gr.onlineWaiter&&await et.race([Gr.onlineWaiter,Pi(a&&a.maxRetryTimeout||ei.maxRetryTimeout)]),w=Gr.networkState;const{data:O,headers:H}=await Pc(u,{data:S,cancelToken:i,headers:{"Content-Type":"multipart/form-data;"}},!0,!0);l=H.http3==="1"?1:-1,ct.reportResourceTiming(u,n.sid),v8(O,u,n,m,p,l);const B=U0(O,Kr.CHOOSE_SERVER),j=U0(O,n.cloudProxyServer==="proxy5"?Kr.CLOUD_PROXY_5:n.cloudProxyServer==="proxy3"||n.cloudProxyServer==="proxy4"?Kr.CLOUD_PROXY:Kr.CLOUD_PROXY_FALLBACK),q=performance.getEntriesByName(u),Y=q[q.length-1];let Z;return Y&&(Z={name:Y.name,protocol:"nextHopProtocol"in Y?Y.nextHopProtocol:"",dnscost:"domainLookupEnd"in Y&&"domainLookupStart"in Y&&typeof Y.domainLookupEnd=="number"&&typeof Y.domainLookupStart=="number"?Y.domainLookupEnd-Y.domainLookupStart:-1,tcpTlsCost:"connectEnd"in Y&&"connectStart"in Y&&typeof Y.connectEnd=="number"&&typeof Y.connectStart=="number"?Y.connectEnd-Y.connectStart:-1,reqCost:"requestStart"in Y&&typeof Y.requestStart=="number"&&"responseEnd"in Y&&typeof Y.responseEnd=="number"?Y.responseEnd-Y.requestStart:-1,handleCost:"leave_ts"in O&&"enter_ts"in O&&typeof O.leave_ts=="number"&&typeof O.enter_ts=="number"?O.leave_ts-O.enter_ts:-1}),iA(B),{gatewayInfo:YI(B,u),proxyInfo:j,url:u,resourceTimingInfo:Z}},O=>(O.gatewayInfo&&ct.joinChooseServer(n.sid,{role:E,lts:m,succ:!0,csAddr:u,serverList:O.gatewayInfo.gatewayAddrs.map(H=>H.address),ec:null,opid:R,cid:O.gatewayInfo.cid.toString(),uid:O.gatewayInfo.uid.toString(),csIp:O.gatewayInfo.csIp,unilbsServerIds:p.toString(),isHttp3:l,corssRegionTagReq:n.apRequestDetail,corssRegionTagRes:O.gatewayInfo.res.detail&&O.gatewayInfo.res.detail[38],resourceTimingInfo:O.resourceTimingInfo?JSON.stringify(O.resourceTimingInfo):void 0}),O.proxyInfo&&ct.joinWebProxyAP(n.sid,{lts:m,sucess:1,apServerAddr:u,turnServerAddrList:O.proxyInfo.addresses.map(H=>H.ip).join(","),errorCode:null,eventType:n.cloudProxyServer,unilbsServerIds:p.toString()}),!1),O=>O.code!==X.OPERATION_ABORTED&&(O.code===X.CAN_NOT_GET_GATEWAY_SERVER?O.data.retry:(ct.joinWebProxyAP(n.sid,{lts:m,sucess:0,apServerAddr:u,turnServerAddrList:null,errorCode:O.code,eventType:n.cloudProxyServer,unilbsServerIds:p.toString(),extend:JSON.stringify({networkState:w})}),k.warning("[".concat(n.clientId,"] multi unilbs network error, retry"),O),!0)),a)}const v8=(e,n,i,a,l,u)=>{const{sid:h,clientId:p,cloudProxyServer:m}=i,E=[],S=R=>{R.flag===4096?ct.joinChooseServer(h,{role:i.role,lts:a,succ:!1,csAddr:n,opid:e.opid,serverList:null,ec:R.error.message,csIp:R.error.data&&R.error.data.csIp,unilbsServerIds:l.toString(),isHttp3:u,corssRegionTagReq:i.apRequestDetail}):R.flag!==1048576&&R.flag!==4194304&&R.flag!==4194310||ct.joinWebProxyAP(h,{lts:a,sucess:0,apServerAddr:n,turnServerAddrList:null,errorCode:R.error.code,eventType:m,unilbsServerIds:l.toString()})};if(e.response_body.forEach(R=>{const w=R.buffer.code;if(R.uri===23&&w===0&&!R.buffer.edges_services)if(R.buffer.flag===4194310)k.warning("no edge services in ap response of proxy fallback, will not set proxy in iceServers"),R.buffer.edges_services=[];else{const O={error:new Ce(X.CAN_NOT_GET_GATEWAY_SERVER,"no edge services in ap response",{retry:!0,csIp:e.detail[502]}),flag:R.buffer.flag};E.push(O),S(O)}if(w!==0){const O=cp(w),H={error:new Ce(X.CAN_NOT_GET_GATEWAY_SERVER,O.desc,{desc:O.desc,retry:O.retry,csIp:e.detail[502]}),flag:R.buffer.flag};R.buffer.flag===4194310?k.warning(H.error.toString()):E.push(H),S(H)}}),E.length)throw k.warning("[".concat(p||"sid-".concat(h.slice(0,6)),"] multi unilbs ").concat(n," failed, ").concat(E.map(R=>"flag: ".concat(R.flag,", message: ").concat(R.error.message,", retry: ").concat(R.error.data.retry)).join(" | "))),new Ce(X.CAN_NOT_GET_GATEWAY_SERVER,E.map(R=>"flag: ".concat(R.flag,", message: ").concat(R.error.message)).join(" | "),{retry:!!E.find(R=>R.error.data.retry),csIp:e.detail[502],desc:[...new Set(E.map(R=>{var w;return R==null||(w=R.error)===null||w===void 0||(w=w.data)===null||w===void 0?void 0:w.desc}).filter(R=>!!R))]})},iA=e=>{var n,i,a,l;if(e.addresses&&e.addresses.length===0&&e.code===0)throw new Ce(X.CAN_NOT_GET_GATEWAY_SERVER,"void gateway address",{retry:!0,csIp:e.detail&&e.detail[502]});if(Q("AP_AREA")&&((a=e.detail)!==null&&a!==void 0&&a[23]&&typeof((l=e.detail)===null||l===void 0?void 0:l[23])=="string"?f8(e.detail[23].toLowerCase()):f8()),(n=e.detail)!==null&&n!==void 0&&n[19]&&typeof((i=e.detail)===null||i===void 0?void 0:i[19])=="string"){const h=e.detail[19],p=h==null?void 0:h.split(";");for(let m=0;m<p.length;m++){var u;const E=yo(u=p[m]).call(u);e.addresses[m]&&p&&(e.addresses[m].fingerprint=E)}}if(Q("GATEWAY_ADDRESS")&&Q("GATEWAY_ADDRESS").length>0){k.debug("assign gateway address to",Q("GATEWAY_ADDRESS"));const h=Q("GATEWAY_ADDRESS").map(p=>{var m,E;const S=(m=(E=e.addresses.find(R=>R.ip===p.ip&&R.port===p.port))===null||E===void 0?void 0:E.fingerprint)!==null&&m!==void 0?m:"";return{ip:p.ip,port:p.port,ticket:e.addresses[0]&&e.addresses[0].ticket,fingerprint:S}});e.addresses=h}},Spe=(e,n)=>{if(e.response_body&&e.response_body.length){const i=e.response_body[0];if(i.buffer.code!==0){const a=cp(i.buffer.code);throw new Ce(X.UPDATE_TICKET_FAILED,"[".concat(i.buffer.code,"]: ").concat(a.desc),{retry:a.retry})}return i.buffer.ticket}throw k.debug("update ticket request received ap response without response body:",n),new Ce(X.UPDATE_TICKET_FAILED,"cannot find response body from ap response",{retry:!1})},oA=(e,n,i)=>{const a=Math.floor(Math.random()*1e12),l=e.role==="host"?"1":e.role==="audience"?"2":void 0,u={appid:e.appId,client_ts:Date.now(),opid:a,sid:e.sid,request_bodies:[{uri:22,buffer:{cname:e.cname,detail:vl(vl(vl({6:e.stringUid,11:n,12:Q("USE_NEW_TOKEN")?"1":void 0},l?{17:l}:{}),{},{22:n},e.apRequestDetail?{33:e.apRequestDetail}:{}),e.apRTM?{26:"RTM2"}:{}),key:e.token,service_ids:i,uid:e.uid||0}}]};u.request_bodies.forEach(p=>{e.multiIP&&e.multiIP.gateway_ip&&(p.buffer.detail[5]=JSON.stringify({vocs_ip:[e.multiIP.uni_lbs_ip],vos_ip:[e.multiIP.gateway_ip]}))});const h=new FormData;return h.append("request",JSON.stringify(u)),[h,a]},ype=(e,n)=>{const i=Math.floor(Math.random()*1e12),a={appid:e.appId,client_ts:Date.now(),opid:i,sid:e.sid,request_bodies:[{uri:28,buffer:{cname:e.cname,detail:{1:"",6:e.stringUid,12:"1"},token:e.token,service_ids:n,uid:e.uid||0,edges_services:e.apResponse.addresses.map(u=>({ip:u.ip,port:u.port}))}}]},l=new FormData;return l.append("request",JSON.stringify(a)),[l,i]};let hp=0;function fp(e){return et.all(e.map(n=>n.then(i=>{throw i},i=>i))).then(n=>{throw n},n=>n)}const H0=async e=>{let{fragementLength:n,referenceList:i,asyncMapHandler:a,allFailedhandler:l,promisesCollector:u}=e,h=0;const p=n;let m,E=0;const S=async()=>{const R=(()=>{const w=h*p,O=w+p;return i.slice(w,O).map(a)})();u&&u.push(...R);try{m=await fp(R)}catch(w){if(E+=p,h++,!(E>=i.length))return void await S();l(w)}R.forEach(w=>w.cancel())};return await S(),m},E8=async e=>{let{referenceList:n,asyncMapHandler:i,closeFn:a}=e;const l=n.length;let u=0;const h=async()=>{const p=i(n.shift());try{return await p}catch(m){if(u++,u>=l||a!=null&&a(m))throw m;return h()}};return h()};async function Cpe(){if(typeof VideoDecoder>"u")return!0;let e;const n=[18,0,10,13,0,0,0,3,180,253,144,6,136,8,8,8,32,50,85,16,66,128,2,8,32,132,0,8,0,180,90,204,169,166,242,109,241,190,143,149,160,133,4,144,43,122,168,159,120,159,205,39,82,131,57,52,87,187,68,23,248,134,204,226,97,17,49,183,55,236,219,249,221,98,208,215,190,59,179,167,213,47,1,246,150,14,194,245,159,83,35,64,103,218,38,21,82,3,135,21,185,84,248,134],i=[18,0,10,13,0,0,0,3,180,253,144,6,136,8,8,8,32,50,87,16,66,128,2,8,32,132,0,8,0,180,90,204,169,166,242,109,241,190,143,148,62,134,140,92,172,141,77,35,94,181,164,65,169,65,156,154,43,221,162,11,252,67,102,113,48,136,137,219,62,43,113,239,23,126,250,186,252,10,138,218,25,193,244,74,68,194,209,107,23,52,206,199,78,72,98,103,151,71,96,62,51,210,158,72,231,158],a=[18,0,10,13,0,0,0,3,180,253,144,6,136,8,8,8,32,50,87,16,66,128,2,8,32,132,0,8,0,180,90,204,169,166,242,109,241,190,143,143,233,163,51,196,98,95,151,224,22,134,33,240,150,248,67,18,34,196,142,81,238,173,140,80,205,232,132,144,67,12,131,157,4,171,243,86,122,35,6,166,184,243,85,126,13,206,103,152,62,168,160,187,2,241,138,52,211,72,121,128,151,63,147,128,19,42],l=[18,0,50,138,1,48,192,64,253,248,65,17,67,192,32,0,16,0,0,0,0,0,0,0,195,12,48,144,64,32,0,209,75,61,9,204,25,115,79,226,115,63,63,208,70,210,220,153,126,241,237,37,107,195,153,1,99,112,230,189,209,169,130,10,11,22,167,215,159,205,197,7,183,162,26,48,254,141,134,103,32,16,235,45,1,15,18,119,169,110,206,251,51,115,202,60,148,1,46,39,109,25,28,86,168,15,77,211,239,2,58,43,146,26,230,184,81,48,140,226,226,250,222,146,171,133,164,13,188,180,64,122,142,146,32,208,238,170,193,35,53,44,225],u=[18,0,50,107,48,0,133,125,248,65,26,195,64,62,32,31,16,0,0,0,0,0,1,4,16,64,144,64,32,0,204,24,122,65,56,165,18,52,206,218,4,187,51,97,9,29,191,90,253,106,185,31,197,155,52,205,245,185,203,131,20,226,25,124,95,113,220,113,141,15,15,104,211,144,152,237,150,157,127,51,143,24,231,218,171,255,176,241,128,229,149,150,148,66,245,228,91,27,182,228,136,61,182,237,133,45,220,24,103,214,152],h=[18,0,50,122,48,1,9,253,248,65,26,67,64,62,32,31,16,0,0,0,0,0,1,4,16,64,144,64,32,0,198,182,231,242,220,235,163,140,12,36,36,166,46,132,210,4,71,23,218,132,27,30,17,45,244,79,31,243,195,136,100,169,76,88,142,85,204,217,121,168,29,163,198,17,251,223,73,12,212,244,139,123,151,179,75,216,96,208,136,40,229,42,59,149,10,116,228,85,99,93,221,108,255,140,248,20,30,167,122,109,206,164,108,197,110,251,23,243,133,160,63,13,207,177,12,128];return await new et((m,E)=>{let S;(async function(){e&&e.state!=="closed"||await async function(){e=new VideoDecoder({output:w=>{w.close(),clearTimeout(S),m(!0)},error:w=>{clearTimeout(S),m(!1)}}),await e.configure({codec:"av01.0.05M.08",width:160,height:90})}();const R=[n,i,a,l,u,h];for(let w=0;w<R.length;w++){const O=new EncodedVideoChunk({type:w==0?"key":"delta",timestamp:33333*w,duration:33333,data:new Uint8Array(R[w])});try{await e.decode(O)}catch{return void m(!1)}}})(),S=setTimeout(()=>{m(!1)},5e3)})}async function aA(e,n,i,a){return{gatewayInfo:await async function(u,h,p,m){let E=null;const S=[],R=async()=>{const O=Q("WEBCS_DOMAIN").slice(0,Q("AJAX_REQUEST_CONCURRENT")).map(j=>({url:u.proxyServer?"https://".concat(u.proxyServer,"/ap/?url=").concat(j+"/api/v2/transpond/webrtc?v=2"):"https://".concat(j,"/api/v2/transpond/webrtc?v=2"),areaCode:$0()})),H=m.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:O.map(j=>j.url)}),B=await H0({fragementLength:Q("FRAGEMENT_LENGTH"),referenceList:O,asyncMapHandler:j=>(k.debug("[".concat(u.clientId,"] Connect to choose_server:"),j.url),m8(j,u,h,p)),allFailedhandler:j=>{throw m.recordJoinChannelService({endTs:Date.now(),status:"error",errors:j},H),j[0]},promisesCollector:S});return m.recordJoinChannelService({endTs:Date.now(),status:"success"},H),B},w=async()=>{if(await Pi(1e3),E!==null)return E;const O=Q("WEBCS_DOMAIN_BACKUP_LIST").map(j=>({url:u.proxyServer?"https://".concat(u.proxyServer,"/ap/?url=").concat(j+"/api/v2/transpond/webrtc?v=2"):"https://".concat(j,"/api/v2/transpond/webrtc?v=2"),areaCode:$0()})),H=m.recordJoinChannelService({endTs:void 0,startTs:Date.now(),status:"pending",service:"chooseServer",urls:O.map(j=>j.url)}),B=await H0({fragementLength:Q("FRAGEMENT_LENGTH"),referenceList:O,asyncMapHandler:j=>(k.debug("[".concat(u.clientId,"] Connect to backup choose_server:"),j.url),m8(j,u,h,p)),allFailedhandler:j=>{throw m.recordJoinChannelService({endTs:Date.now(),status:"error",errors:j},H),j[0]},promisesCollector:S});return m.recordJoinChannelService({endTs:Date.now(),status:"success"},H),B};try{return E=await fp([R(),w()]),S.length&&S.forEach(O=>O.cancel&&typeof O.cancel=="function"&&O.cancel()),E}catch(O){throw O[0]}}(e,n,i,a)}}async function _8(e,n,i,a,l){const u=e.cloudProxyServer;if(u==="disabled"){if(!a)return;if(e.useLocalAccessPoint)return await aA(e,n,i,l);if(Q("JOIN_WITH_FALLBACK_MEDIA_PROXY")){const{gatewayInfo:w,proxyInfo:O}=await C8(e,n,i,l);if(e.turnServer&&e.turnServer.mode!=="auto")return{gatewayInfo:w};const H=O.map(B=>({turnServerURL:B.address,tcpport:B.tcpport||Wi.tcpport,udpport:B.udpport||Wi.udpport,username:B.username||Wi.username,password:B.password||Wi.password,forceturn:!1,security:!0}));if(l.useP2P){var h;const B=(h=e.uid)!==null&&h!==void 0?h:w.uid,j="glb:".concat(B.toString()),q=await qw(j),Y=O.map(Z=>({turnServerURL:Z.address,tcpport:Z.tcpport||Wi.tcpport,udpport:Z.udpport||Wi.udpport,username:j,password:q,forceturn:!1,security:!0}));H.push(...Y)}return e.turnServer={mode:"manual",servers:H},{gatewayInfo:w}}return await aA(e,n,i,l)}const{proxyInfo:p,gatewayInfo:m}=await C8(e,n,i,l),E={gatewayInfo:m},S=p.map(w=>({turnServerURL:w.address,tcpport:u==="proxy3"?void 0:w.tcpport?w.tcpport:Wi.tcpport,udpport:u==="proxy4"?void 0:w.udpport?w.udpport:Wi.udpport,username:w.username||Wi.username,password:w.password||Wi.password,forceturn:u!=="proxy4",security:u==="proxy5"}));if(l.useP2P){var R;const w=(R=e.uid)!==null&&R!==void 0?R:m.uid,O="glb:".concat(w.toString()),H=await qw(O),B=p.map(j=>({turnServerURL:j.address,tcpport:u==="proxy3"?void 0:j.tcpport||Wi.tcpport,udpport:u==="proxy4"?void 0:j.udpport||Wi.udpport,username:O,password:H,forceturn:u!=="proxy4",security:u==="proxy5"}));S.push(...B)}return e.turnServer={mode:"manual",servers:S},k.debug("[".concat(e.clientId,"] set proxy server: ").concat(e.proxyServer,", mode: ").concat(u)),E}async function S8(e,n,i,a,l){const u=Q("ACCOUNT_REGISTER").slice(0,Q("AJAX_REQUEST_CONCURRENT"));let h=[];h=n.proxyServer?u.map(m=>"https://".concat(n.proxyServer,"/ap/?url=").concat(m+"/api/v1")):u.map(m=>"https://".concat(m,"/api/v1"));const p=l==null?void 0:l.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"stringUID",urls:h});try{const m=await async function(E,S,R,w,O){const H=Date.now(),B={sid:R.sid,opid:10,appid:R.appId,string_uid:S};let j=E[0];const q=await Ic(()=>Pc(j+"".concat(j.indexOf("?")===-1?"?":"&","action=stringuid"),{data:B,cancelToken:w,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":72}}),(Y,Z)=>{if(Y.code===0){if(Y.uid<=0||Y.uid>=Math.pow(2,32))throw k.error("Invalid Uint Uid ".concat(S," => ").concat(Y.uid),Y),ct.reqUserAccount(B.sid,{lts:H,success:!1,serverAddr:j,stringUid:B.string_uid,uid:Y.uid,errorCode:X.INVALID_UINT_UID_FROM_STRING_UID,extend:B}),new Ce(X.INVALID_UINT_UID_FROM_STRING_UID);return ct.reqUserAccount(B.sid,{lts:H,success:!0,serverAddr:j,stringUid:B.string_uid,uid:Y.uid,errorCode:null,extend:B}),!1}const pe=cp(Y.code);return pe.retry&&(j=E[(Z+1)%E.length]),ct.reqUserAccount(B.sid,{lts:H,success:!1,serverAddr:j,stringUid:B.string_uid,uid:Y.uid,errorCode:pe.desc,extend:B}),pe.retry},(Y,Z)=>Y.code!==X.OPERATION_ABORTED&&(ct.reqUserAccount(B.sid,{lts:H,success:!1,serverAddr:j,stringUid:B.string_uid,uid:null,errorCode:Y.code,extend:B}),j=E[(Z+1)%E.length],!0),O);if(q.code!==0){const Y=cp(q.code);throw new Ce(X.UNEXPECTED_RESPONSE,Y.desc)}return q}(h,e,n,i,a);return l==null||l.recordJoinChannelService({status:"success",endTs:Date.now()},p),m.uid}catch(m){throw l==null||l.recordJoinChannelService({status:"error",endTs:Date.now(),errors:[m]},p),m}}async function bpe(e,n,i){const a=Q("ACCOUNT_REGISTER");let l=[];l=n.proxyServer?a.map(u=>"https://".concat(n.proxyServer,"/ap/?url=").concat(u+"/api/v1")):a.map(u=>"https://".concat(u,"/api/v1"));try{return await E8({referenceList:l,asyncMapHandler:h=>async function(p,m,E,S){const R=Date.now(),w={sid:E.sid,opid:10,appid:E.appId,string_uid:m};try{const O=await Pc(p+"".concat(p.indexOf("?")===-1?"?":"&","action=stringuid"),{data:w,cancelToken:S,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":72}});if(O.code!==0){const H=cp(O.code);throw new Ce(X.UNEXPECTED_RESPONSE,"preload sua error:".concat(H.desc),H)}if(O.uid<=0||O.uid>=Math.pow(2,32))throw new Ce(X.INVALID_UINT_UID_FROM_STRING_UID);return{requestTime:R,url:p,req:w,uid:O.uid,elapse:Date.now()-R}}catch(O){throw O}}(h,e,n,i),closeFn:h=>h.code===X.OPERATION_ABORTED||h.code===X.UNEXPECTED_RESPONSE&&!h.data.retry})}catch(u){throw u}}async function Tpe(e,n,i){const a=Q("CDS_AP").slice(0,Q("AJAX_REQUEST_CONCURRENT")).map(m=>e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(m+"/api/v1"):"https://".concat(m,"/api/v1?action=config")),l=a.map(m=>function(E,S,R,w){const O=yn(),H={flag:64,cipher_method:0,features:vl(vl(vl(vl(vl({install_id:aI(),device:O.name,system:O.os,system_general:navigator.userAgent,vendor:S.appId,version:cs,cname:S.cname,session_id:S.sid,proxyServer:S.proxyServer,sdk_type:ppe.WEB_RTC,browser_name:O.name,browser_version:O.version,user_agent:navigator.userAgent,channel_name:S.cname},S.stringUid&&{string_uid:S.stringUid}),S.uid&&{uid:S.uid+""}),O.os&&{os_name:O.os}),O.osVersion&&{os_version:O.osVersion}),{},{detail:""})};return Ic(()=>Pc(E,{data:H,timeout:1e3,cancelToken:R,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":54}}),void 0,B=>B.code!==X.OPERATION_ABORTED,w)}(m,e,n,i));let u=null,h=null,p={};try{u=await fp(l)}catch(m){if(m.code===X.OPERATION_ABORTED)throw m;h=m}if(l.forEach(m=>m.cancel()),ct.reportApiInvoke(e.sid,{name:Ur.REQUEST_CONFIG_DISTRIBUTE,options:{error:h,res:u}}).onSuccess(),u&&u.test_tags)try{p=function(m){if(!m.test_tags)return{};const E=m.test_tags,S=Object.keys(E),R={};return S.forEach(w=>{var O;const H=yo(O=w.slice(4)).call(O),B=JSON.parse(E[w]),j=B[1];R[H]={tag:B[0]||"",value:j}}),R}(u)}catch{}return p}async function y8(e,n){const i=Q("WEBCS_DOMAIN").concat(Q("WEBCS_DOMAIN_BACKUP_LIST")).map(a=>({url:"https://".concat(a,"/api/v2/transpond/webrtc?v=2"),areaCode:$0(),serviceIds:[Kr.CHOOSE_SERVER,Kr.CLOUD_PROXY_FALLBACK]}));try{return await E8({referenceList:i,asyncMapHandler:l=>async function(u,h,p){let m,{url:E,areaCode:S,serviceIds:R}=u;const w=Date.now(),[O,H]=oA(h,S,R);let B=Gr.networkState;try{B&&Gr.networkState===wa.OFFLINE&&Gr.onlineWaiter&&await et.race([Gr.onlineWaiter,Pi(ei.maxRetryTimeout)]),B=Gr.networkState;const{data:j,headers:q}=await Pc(E,{data:O,cancelToken:p,headers:{"Content-Type":"multipart/form-data;"}},!0,!0);m=q.http3==="1"?1:-1,(he=>{const re=[];if(he.response_body.forEach(Se=>{const Ae=Se.buffer.code;if(Se.uri===23&&Ae===0&&!Se.buffer.edges_services)if(Se.buffer.flag===4194310)Se.buffer.edges_services=[];else{const Ne={error:new Ce(X.CAN_NOT_GET_GATEWAY_SERVER,"no edge services in ap response",{retry:!0,csIp:he.detail[502]}),flag:Se.buffer.flag};re.push(Ne)}if(Ae!==0){const Ne=cp(Ae),Be={error:new Ce(X.CAN_NOT_GET_GATEWAY_SERVER,Ne.desc,{desc:Ne.desc,retry:Ne.retry,csIp:he.detail[502]}),flag:Se.buffer.flag};Se.buffer.flag===4194310?k.warning(Be.error.toString()):re.push(Be)}}),re.length)throw new Ce(X.CAN_NOT_GET_GATEWAY_SERVER,re.map(Se=>"flag: ".concat(Se.flag,", message: ").concat(Se.error.message)).join(" | "),{retry:!!re.find(Se=>Se.error.data.retry),csIp:he.detail[502],desc:[...new Set(re.map(Se=>{var Ae;return Se==null||(Ae=Se.error)===null||Ae===void 0||(Ae=Ae.data)===null||Ae===void 0?void 0:Ae.desc}).filter(Se=>!!Se))]})})(j);const Z=U0(j,Kr.CHOOSE_SERVER),pe=U0(j,Kr.CLOUD_PROXY_FALLBACK);return iA(Z),{gatewayInfo:YI(Z,E),proxyInfo:pe,opid:H,requestTime:w,url:E,isHttp3:m,elapse:Date.now()-w}}catch(j){throw j}}(l,e,n),closeFn:l=>l.code===X.OPERATION_ABORTED||l.code===X.CAN_NOT_GET_GATEWAY_SERVER&&!l.data.retry})}catch(a){throw a}}async function C8(e,n,i,a){const l=Q("PROXY_SERVER_TYPE3"),u=(O,H,B)=>{let j=B||l;return Array.isArray(j)&&(j=H%2==0&&l[1]||l[0]),"https://".concat(j,"/ap/?url=").concat(O)};let h=null;const p=[],m=async()=>{const O=Q("WEBCS_DOMAIN").slice(0,Q("AJAX_REQUEST_CONCURRENT")).map((j,q)=>{let Y;return Y=e.cloudProxyServer==="disabled"&&e.proxyServer?u("".concat(j,"/api/v2/transpond/webrtc?v=2"),q,e.proxyServer):e.cloudProxyServer==="disabled"||e.cloudProxyServer==="fallback"?"https://".concat(j,"/api/v2/transpond/webrtc?v=2"):u("".concat(j,"/api/v2/transpond/webrtc?v=2"),q),{url:Y,areaCode:$0(),serviceIds:[Kr.CHOOSE_SERVER,e.cloudProxyServer==="proxy5"?Kr.CLOUD_PROXY_5:e.cloudProxyServer==="proxy3"||e.cloudProxyServer==="proxy4"?Kr.CLOUD_PROXY:Kr.CLOUD_PROXY_FALLBACK]}}),H=a.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:O.map(j=>j.url)}),B=await H0({fragementLength:Q("FRAGEMENT_LENGTH"),referenceList:O,asyncMapHandler:j=>(k.debug("[".concat(e.clientId,"] Connect to choose_server:"),j.url),g8(j,e,n,i)),allFailedhandler:j=>{throw a.recordJoinChannelService({endTs:Date.now(),status:"error",errors:j},H),j[0]},promisesCollector:p});return a.recordJoinChannelService({endTs:Date.now(),status:"success"},H),B},E=async()=>{if(await Pi(1e3),h!==null)return h;const O=Q("WEBCS_DOMAIN_BACKUP_LIST").map((j,q)=>{let Y;return Y=e.cloudProxyServer==="disabled"&&e.proxyServer?u("".concat(j,"/api/v2/transpond/webrtc?v=2"),q,e.proxyServer):e.cloudProxyServer==="disabled"||e.cloudProxyServer==="fallback"?"https://".concat(j,"/api/v2/transpond/webrtc?v=2"):u("".concat(j,"/api/v2/transpond/webrtc?v=2"),q),{url:Y,areaCode:$0(),serviceIds:[Kr.CHOOSE_SERVER,e.cloudProxyServer==="proxy5"?Kr.CLOUD_PROXY_5:e.cloudProxyServer==="proxy3"||e.cloudProxyServer==="proxy4"?Kr.CLOUD_PROXY:Kr.CLOUD_PROXY_FALLBACK]}}),H=a.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:O.map(j=>j.url)}),B=await H0({fragementLength:Q("FRAGEMENT_LENGTH"),referenceList:O,asyncMapHandler:j=>(k.debug("[".concat(e.clientId,"] Connect to backup choose_server:"),j.url),g8(j,e,n,i)),allFailedhandler:j=>{throw a.recordJoinChannelService({endTs:Date.now(),status:"error",errors:j},H),j[0]},promisesCollector:p});return a.recordJoinChannelService({endTs:Date.now(),status:"success"},H),B};let S,R,w;try{({gatewayInfo:S,proxyInfo:R,url:w}=await fp([m(),E()]))}catch(O){throw O[0]}if(p.length&&p.forEach(O=>O.cancel&&typeof O.cancel=="function"&&O.cancel()),!S||!R)throw new Ce(X.UNEXPECTED_ERROR,"missing gateway or proxy response").print();if(e.apUrl=w,e.cloudProxyServer!=="disabled"&&Array.isArray(l)&&w){const O=/^https?:\/\/(.+?)(\/.*)?$/.exec(w)[1];Ge(l).call(l,O)&&(e.proxyServer=O,k.setProxyServer(O),ct.setProxyServer(O))}return h={gatewayInfo:S,proxyInfo:await G6(R,S.uid)},h}async function Rpe(e,n,i){const a=Q("UAP_AP").slice(0,Q("AJAX_REQUEST_CONCURRENT")).map(u=>e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(u+"/api/v1?action=uap"):"https://".concat(u,"/api/v1?action=uap")),l=a.map(u=>function(h,p,m,E){const S={command:"convergeAllocateEdge",sid:p.sid,appId:p.appId,token:p.token,ts:Date.now(),version:cs,cname:p.cname,uid:p.uid.toString(),requestId:rA,seq:rA};rA+=1;const R={service_name:"tele_channel",json_body:JSON.stringify(S)};return Ic(async()=>{const w=await Pc(h,{data:R,cancelToken:m,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":61}});if(w.code!==0){const H=new Ce(X.UNEXPECTED_RESPONSE,"cross channel ap error, code"+w.code,{retry:!0});throw k.error(H.toString()),H}const O=JSON.parse(w.json_body);if(O.code!==200){const H=new Ce(X.UNEXPECTED_RESPONSE,"cross channel app center error, code: ".concat(O.code,", reason: ").concat(O.reason));throw k.error(H.toString()),H}if(!O.servers||O.servers.length===0){const H=new Ce(X.UNEXPECTED_RESPONSE,"cross channel app center empty server");throw k.error(H.toString()),H}return{vid:O.vid,workerToken:O.workerToken,addressList:(Q("CHANNEL_MEDIA_RELAY_SERVERS")||O.servers).map(H=>"wss://".concat(H.address.replace(/\./g,"-"),".").concat(Q("WORKER_DOMAIN"),":").concat(H.wss))}},void 0,w=>!!(w.code!==X.OPERATION_ABORTED&&w.code!==X.UNEXPECTED_RESPONSE||w.data&&w.data.retry),E)}(u,e,n,i));try{const u=await fp(l);return l.forEach(h=>h.cancel()),u}catch(u){throw u[0]}}async function wpe(e,n,i){let a=null;const l=[],u=async h=>{const p=Q(h?"WEBCS_DOMAIN_BACKUP_LIST":"WEBCS_DOMAIN").map(m=>e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(m+"/api/v2/transpond/webrtc?v=2"):"https://".concat(m,"/api/v2/transpond/webrtc?v=2"));return h&&(await Pi(1e3),a!==null)?a:await H0({fragementLength:Q("FRAGEMENT_LENGTH"),referenceList:p,asyncMapHandler:m=>(k.debug("[".concat(e.clientId,"] update ticket, Connect to ").concat(h?"backup":""," choose_server:"),m),function(E,S,R,w){const[O]=ype(S,[Kr.CHOOSE_SERVER]);let H=Gr.networkState;return Ic(async()=>{H&&Gr.networkState===wa.OFFLINE&&Gr.onlineWaiter&&await et.race([Gr.onlineWaiter,Pi(w&&w.maxRetryTimeout||ei.maxRetryTimeout)]),H=Gr.networkState;const B=await Pc(E,{data:O,cancelToken:R,headers:{"Content-Type":"multipart/form-data;"}},!0);return Spe(B,E)},()=>!1,B=>B.code!==X.OPERATION_ABORTED&&(B.code===X.UPDATE_TICKET_FAILED?B.data.retry:(k.warning("[".concat(S.clientId,"] update ticket network error, retry"),B),!0)),w)}(m,e,n,i)),allFailedhandler:m=>{throw m[0]},promisesCollector:l})};try{return a=await fp([u(!1),u(!0)]),l.length&&l.forEach(h=>h.cancel&&typeof h.cancel=="function"&&h.cancel()),a}catch(h){throw h[0]}}function b8(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),i.push.apply(i,a)}return i}function sA(e){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?b8(Object(i),!0).forEach(function(a){W(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):b8(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}class Ipe extends br{get isSuccess(){return!!this.configs}constructor(n,i){super(),W(this,"configs",void 0),W(this,"store",void 0),W(this,"joinInfo",void 0),W(this,"cancelToken",void 0),W(this,"retryConfig",{timeout:3e3,timeoutFactor:1.5,maxRetryCount:1,maxRetryTimeout:1e4}),W(this,"interval",void 0),W(this,"mutex",void 0),W(this,"mutableParamsRead",!1),W(this,"configCache",{}),W(this,"limit_bitrate",void 0),this.mutex=new qi("config-distribute",n),this.store=i}startGetConfigDistribute(n,i){this.joinInfo=n,this.cancelToken=i,this.interval&&this.stopGetConfigDistribute(),Q("ENABLE_CONFIG_DISTRIBUTE")&&(this.updateConfigDistribute(),this.interval=window.setInterval(()=>{this.updateConfigDistribute()},Q("CONFIG_DISTRIBUTE_INTERVAL")))}stopGetConfigDistribute(){this.interval&&clearInterval(this.interval),this.interval=void 0,this.joinInfo=void 0,this.cancelToken=void 0,this.configs=void 0,this.limit_bitrate=void 0}async awaitConfigDistributeComplete(){this.mutex.isLocked&&(await this.mutex.lock())()}async updateConfigDistribute(){if(this.mutableParamsRead||(this.mutableParamsRead=!0,ct.reportApiInvoke(null,{options:void 0,name:Ur.LOAD_CONFIG_FROM_LOCALSTORAGE,tag:gr.TRACER}).onSuccess(JSON.stringify(Ac))),!this.joinInfo||!this.cancelToken||!this.retryConfig)return void k.debug("[config-distribute] get config distribute interrupted have no joininfo");let n;const i=await this.mutex.lock();try{n=await Tpe(this.joinInfo,this.cancelToken,this.retryConfig),k.debug("[config-distribute] get config distribute",JSON.stringify(n));const a=function(l){var u;const h=$d(u=Object.keys(l).filter(E=>/^webrtc_ng_global_parameter/.test(E))).call(u);for(let E=0;E<h.length;E++)for(let S=h.length-1;S>E;S--){const R=h[S],w=l[R].value;if(typeof w.__priority=="number"){const O=w.__priority,H=h[S-1],B=l[H].value;if(typeof B.__priority=="number"){if(!(O>B.__priority))continue;{const j=R;h[S]=h[S-1],h[S-1]=j}}else{const j=R;h[S]=h[S-1],h[S-1]=j}}}const p=Date.now();let m={};return h.forEach(E=>{const S=l[E].value.__expires;S&&S<=p||(m[E]=l[E])}),m}(n);this.cacheGlobalParameterConfig(a),this.store.hasStartJoinChannel||(this.store.isABTestSuccess=!0),this.configs=a}catch(a){const l=new Ce(X.NETWORK_RESPONSE_ERROR,a);k.warning("[config-distribute] ".concat(l.toString()))}finally{i()}}getBitrateLimit(){return this.limit_bitrate||void 0}handleBitrateLimit(n){k6(n)&&(this.limit_bitrate?this.limit_bitrate&&this.limit_bitrate.id!==n.id&&this.emit(k0.UPDATE_BITRATE_LIMIT,n):this.emit(k0.UPDATE_BITRATE_LIMIT,n))}getLowStreamConfigDistribute(){return this.limit_bitrate&&sA({},this.limit_bitrate.low_stream_uplink)}handleABTestConfigDistribute(n){try{const i={},a=Object.keys(n),l=[];a.forEach(u=>{const h=n[u].value;i[u]=h;const p=h.__id;if(p&&this.configCache[u]&&this.configCache[u].__id===p)return;const m=h.__type,E=n[u].value,S=n[u].tag;let R=0;m?m===oV.REALTIME&&(R=1):Object.keys(E).some(w=>Object.prototype.hasOwnProperty.call(uI,w)||!FI()&&Object.prototype.hasOwnProperty.call(X_,w)?(R=1,!0):void 0),l.push({tag:S,isApplied:R,feature:u,params:JSON.stringify(h)})}),l.forEach(u=>{let{tag:h,feature:p,params:m,isApplied:E}=u;this.store.sessionId&&ct.abTest(this.store.sessionId,{intSucc:1,isApplied:E,tag:h,feature:p,params:m,cid:this.store.cid,uid:this.store.intUid})}),this.configCache=i}catch(i){k.debug("handleABTestConfigDistribute error",i)}}cacheGlobalParameterConfig(n){const i=function(l){const u={};return Object.keys(l).forEach(h=>{const p=l[h].value,m=p.__expires,E=p.__type;Object.keys(p).forEach(S=>{S==="__id"||S==="__type"||S==="__priority"||S==="__expires"||Object.prototype.hasOwnProperty.call(u,S)||(u[S]=sA(sA({value:p[S]},m&&{expires:m}),E&&{type:E}))})}),u}(n);try{var a;const l=(a=i.LIMIT_BITRATE)===null||a===void 0?void 0:a.value;delete i.LIMIT_BITRATE,l&&k6(l)&&this.handleBitrateLimit(l),this.limit_bitrate=l,this.handleGlobalParameterConfig(i),this.handleABTestConfigDistribute(n),function(p){try{const m=Date.now();Object.keys(p).forEach(E=>{const{value:S,type:R,expires:w}=p[E];w&&w<=m||((R===oV.REALTIME||Object.prototype.hasOwnProperty.call(uI,E))&&(Ac[E]=S,fr[E]=S,k.debug("Update realtime parameters from config distribute",E,S)),R||FI()||!Object.prototype.hasOwnProperty.call(X_,E)||(Ac[E]=S,fr[E]=S,k.debug("Update gateway parameters from config distribute",E,S)))})}catch(m){k.error("Error update config immediately: ".concat(p),m.message)}}(i);const u=JSON.stringify(i),h=window.btoa(u);window.localStorage.setItem("websdk_ng_global_parameter",h),k.debug("Caching global parameters ".concat(u))}catch(l){k.error("Error caching global parameters:",l.message)}}handleGlobalParameterConfig(n){try{const i=Date.now();Object.keys(n).forEach(a=>{if(a==="CLIENT_ROLE_OPTIONS"&&Object.prototype.hasOwnProperty.call(fr,a)){const{value:l,expires:u}=n[a];if(u&&u<=i)return;(function(h,p){try{return typeof h=="object"&&typeof p=="object"&&JSON.stringify(h)===JSON.stringify(p)}catch{return!1}})(fr[a],l)||(Ac[a]=l,fr[a]=l,this.emit(k0.UPDATE_CLIENT_ROLE_OPTIONS,l),k.debug("Updating client role options: ".concat(JSON.stringify(l))))}})}catch(i){k.error("Error handling global parameter config:",i.message)}}}class Ape extends br{constructor(){super(...arguments),W(this,"resultStorage",new Map)}setLocalAudioStats(n,i,a){this.record("AUDIO_INPUT_LEVEL_TOO_LOW",n,this.checkAudioInputLevel(a,i)),this.record("SEND_AUDIO_BITRATE_TOO_LOW",n,this.checkSendAudioBitrate(a,i))}setLocalVideoStats(n,i,a){this.record("SEND_VIDEO_BITRATE_TOO_LOW",n,this.checkSendVideoBitrate(a,i)),this.record("FRAMERATE_INPUT_TOO_LOW",n,this.checkFramerateInput(a,i)),this.record("FRAMERATE_SENT_TOO_LOW",n,this.checkFramerateSent(a)),!i.muted&&this.record("VIDEO_ENCODE_FAILED",n,this.checResolutionSent(a))}setRemoteAudioStats(n,i){const a=n.getUserId();this.record("AUDIO_OUTPUT_LEVEL_TOO_LOW",a,this.checkAudioOutputLevel(i))}setRemoteVideoStats(n,i){const a=n.getUserId();this.record("RECV_VIDEO_DECODE_FAILED",a,this.checkVideoDecode(i))}record(n,i,a){if(Q("STATS_UPDATE_INTERVAL")>500)return;this.resultStorage.has(n)||this.resultStorage.set(n,{result:[],isPrevNormal:!0});const l=this.resultStorage.get(n);if(!l)return;l.result.push(a);const u=n==="VIDEO_ENCODE_FAILED"?Q("ENCODE_EXCEPTION_TIMES"):5;if(l.result.length>=u){var h;const p=Ge(h=l.result).call(h,!0);l.isPrevNormal&&!p&&this.emit("exception",cA[n],n,i),!l.isPrevNormal&&p&&this.emit("exception",cA[n]+2e3,n+"_RECOVER",i),l.isPrevNormal=p,l.result=[]}}checkAudioOutputLevel(n){return!(n.receiveBitrate>0&&n.receiveLevel===0)}checkAudioInputLevel(n,i){return i instanceof ui&&!i.isActive||!!i.muted||n.sendVolumeLevel!==0}checkFramerateInput(n,i){let a=null;i._encoderConfig&&i._encoderConfig.frameRate&&(a=Ia(i._encoderConfig.frameRate));const l=n.captureFrameRate;return!a||!l||!(a>10&&l<5||a<10&&a>=5&&l<=1)}checkFramerateSent(n){return!(n.captureFrameRate&&n.sendFrameRate&&n.captureFrameRate>5&&n.sendFrameRate<=1)}checResolutionSent(n){var i;return!(!n.codecType||Ge(i=Q("ENCODE_EXCEPTION_VALIDATE_CODEC")).call(i,n.codecType.toLocaleLowerCase()))||!n.captureFrameRate||n.sendFrameRate!==0||n.sendResolutionWidth!==0||n.sendResolutionHeight!==0}checkSendVideoBitrate(n,i){return!!i.muted||n.sendBitrate!==0}checkSendAudioBitrate(n,i){return i instanceof ui&&!i.isActive||!!i.muted||n.sendBitrate!==0}checkVideoDecode(n){return n.receiveBitrate===0||n.decodeFrameRate!==0}}const cA={FRAMERATE_INPUT_TOO_LOW:1001,FRAMERATE_SENT_TOO_LOW:1002,SEND_VIDEO_BITRATE_TOO_LOW:1003,RECV_VIDEO_DECODE_FAILED:1005,AUDIO_INPUT_LEVEL_TOO_LOW:2001,AUDIO_OUTPUT_LEVEL_TOO_LOW:2002,SEND_AUDIO_BITRATE_TOO_LOW:2003,VIDEO_ENCODE_FAILED:2004},Zi=new class{markSubscribeStart(e,n){performance.mark("agora-web-sdk/".concat(e,"/subscribe-").concat(n))}markPublishStart(e,n){performance.mark("agora-web-sdk/".concat(e,"/publish-").concat(n))}measureFromSubscribeStart(e,n){const i=performance.getEntriesByName("agora-web-sdk/".concat(e,"/subscribe-").concat(n));if(i.length>0){const a=i[i.length-1];return Math.round(performance.now()-a.startTime)}return 0}measureFromPublishStart(e,n){const i=performance.getEntriesByName("agora-web-sdk/".concat(e,"/publish-").concat(n));if(i.length>0){const a=i[i.length-1];return Math.round(performance.now()-a.startTime)}return 0}};function T8(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),i.push.apply(i,a)}return i}function lh(e){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?T8(Object(i),!0).forEach(function(a){W(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):T8(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}class z0{constructor(n){W(this,"store",void 0),W(this,"onStatsException",void 0),W(this,"onUploadPublishDuration",void 0),W(this,"onStatsChanged",void 0),W(this,"onVideoCodecChanged",void 0),W(this,"localStats",new Map),W(this,"remoteStats",new Map),W(this,"updateStatsInterval",void 0),W(this,"trafficStats",void 0),W(this,"trafficStatsPeerList",[]),W(this,"uplinkStats",void 0),W(this,"exceptionMonitor",void 0),W(this,"p2pChannel",void 0),W(this,"scalabilityMode",q_.L1T1),W(this,"updateStats",()=>{this.p2pChannel&&(this.updateRemoteStats(this.p2pChannel),this.updateLocalStats(this.p2pChannel))}),this.store=n,this.exceptionMonitor=new Ape,this.exceptionMonitor.on("exception",(i,a,l)=>{this.onStatsException&&this.onStatsException(i,a,l)})}startUpdateStats(){this.updateStatsInterval||(this.updateStatsInterval=window.setInterval(this.updateStats,1e3))}stopUpdateStats(){this.updateStatsInterval&&(window.clearInterval(this.updateStatsInterval),this.updateStatsInterval=void 0)}reset(){this.localStats=new Map,this.remoteStats=new Map,this.trafficStats=void 0,this.trafficStatsPeerList=[],this.uplinkStats=void 0}getLocalAudioTrackStats(){return this.localStats.get(Fe.LocalAudioTrack)||lh({},gI)}getLocalVideoTrackStats(){return this.localStats.get(Fe.LocalVideoTrack)||lh({},vI)}getRemoteAudioTrackStats(n){const i=(u,h)=>{if(!this.trafficStats)return h;const p=this.trafficStats.peer_delay.find(m=>m.peer_uid===u);return p&&(h.publishDuration=p.B_ppad+(Date.now()-this.trafficStats.timestamp)),h},a={};if(n){var l;const u=(l=this.remoteStats.get(n))===null||l===void 0?void 0:l.audioStats;u&&(a[n]=i(n,u))}else Array.from(this.remoteStats.entries()).forEach(u=>{let[h,{audioStats:p}]=u;p&&(a[h]=i(h,p))});return a}getRemoteNetworkQualityStats(n){const i={};if(n){var a;const l=(a=this.remoteStats.get(n))===null||a===void 0?void 0:a.networkStats;l&&(i[n]=l)}else Array.from(this.remoteStats.entries()).forEach(l=>{let[u,{networkStats:h}]=l;h&&(i[u]=h)});return i}getRemoteVideoTrackStats(n){const i=(u,h)=>{if(!this.trafficStats)return h;const p=this.trafficStats.peer_delay.find(m=>m.peer_uid===u);return p&&(h.publishDuration=p.B_ppvd+(Date.now()-this.trafficStats.timestamp)),h},a={};if(n){var l;const u=(l=this.remoteStats.get(n))===null||l===void 0?void 0:l.videoStats;u&&(a[n]=i(n,u))}else Array.from(this.remoteStats.entries()).forEach(u=>{let[h,{videoStats:p}]=u;p&&(a[h]=i(h,p))});return a}getRTCStats(){let n=0,i=0,a=0,l=0;const u=this.localStats.get(Fe.LocalAudioTrack);u&&(n+=u.sendBytes,i+=u.sendBitrate);const h=this.localStats.get(Fe.LocalVideoTrack);h&&(n+=h.sendBytes,i+=h.sendBitrate);const p=this.localStats.get(Fe.LocalVideoLowTrack);p&&(n+=p.sendBytes,i+=p.sendBitrate),this.remoteStats.forEach(E=>{let{audioStats:S,videoStats:R}=E;S&&(a+=S.receiveBytes,l+=S.receiveBitrate),R&&(a+=R.receiveBytes,l+=R.receiveBitrate)});let m=1;return this.trafficStats&&(m+=this.trafficStats.peer_delay.length),{Duration:0,UserCount:m,SendBitrate:i,SendBytes:n,RecvBytes:a,RecvBitrate:l,OutgoingAvailableBandwidth:this.uplinkStats?this.uplinkStats.B_uab/1e3:0,RTT:this.trafficStats?2*this.trafficStats.B_acd:0}}addLocalStats(n){this.localStats.set(n,void 0)}removeLocalStats(n){n?this.localStats.delete(n):this.localStats.clear()}addRemoteStats(n){this.remoteStats.set(n,{})}removeRemoteStats(n){n?this.remoteStats.delete(n):this.remoteStats.clear()}addP2PChannel(n){this.p2pChannel=n}updateTrafficStats(n){n.peer_delay=n.peer_delay.filter(i=>i.B_ppad!==void 0||i.B_ppvd!==void 0),n.peer_delay.filter(i=>this.trafficStatsPeerList.indexOf(i.peer_uid)===-1).forEach(i=>{var a;const l=(a=this.p2pChannel)===null||a===void 0?void 0:a.getRemoteMedia(i.peer_uid),u=l!=null&&l.videoSSRC?Zi.measureFromSubscribeStart(this.store.clientId,l.videoSSRC):0,h=l!=null&&l.audioSSRC?Zi.measureFromSubscribeStart(this.store.clientId,l.audioSSRC):0;i.B_ppad!==void 0&&i.B_ppvd!==void 0&&(this.onUploadPublishDuration&&this.onUploadPublishDuration(i.peer_uid,i.B_ppad,i.B_ppvd,u>h?u:h),this.trafficStatsPeerList.push(i.peer_uid))}),this.trafficStats=n}updateUplinkStats(n){this.uplinkStats&&this.uplinkStats.B_fir!==n.B_fir&&k.debug("[".concat(this.store.clientId,"]: Period fir changes to ").concat(n.B_fir)),this.uplinkStats=n}static isRemoteVideoFreeze(n,i,a){if(!n)return!1;const l=!!a&&i.framesDecodeFreezeTime>a.framesDecodeFreezeTime,u=!a||i.framesDecodeCount>a.framesDecodeCount;return l||!u}static isRemoteAudioFreeze(n){return!!n&&n._isFreeze()}isLocalVideoFreeze(n){return!(!n.inputFrame||!n.sentFrame)&&n.inputFrame.frameRate>5&&n.sentFrame.frameRate<3}updateLocalStats(n){Array.from(this.localStats.entries()).forEach(i=>{let[a,l]=i;switch(a){case Fe.LocalVideoTrack:case Fe.LocalVideoLowTrack:{const p=l,m=lh({},vI),E=n.getStats(),S=n.getLocalMedia(a);if(E){const R=E.videoSend.find(w=>w.ssrc===(S==null?void 0:S.ssrcs[0].ssrcId));if(R){const w=n.getLocalVideoSize(),O=n.getEncoderConfig(Fe.LocalVideoTrack);var u;(R.codec==="H264"||R.codec==="H265"||R.codec==="VP8"||R.codec==="VP9"||R.codec==="AV1X"||R.codec==="AV1")&&(m.codecType=R.codec,(p==null?void 0:p.codecType)!==R.codec&&((u=this.onVideoCodecChanged)===null||u===void 0||u.call(this,R.codec.toLocaleLowerCase()))),m.sendBytes=R.bytes,m.sendBitrate=p?8*Math.max(0,m.sendBytes-p.sendBytes):0,R.inputFrame?(m.captureFrameRate=R.inputFrame.frameRate,m.captureResolutionHeight=R.inputFrame.height,m.captureResolutionWidth=R.inputFrame.width):w&&(m.captureResolutionWidth=w.width,m.captureResolutionHeight=w.height),R.sentFrame?(m.sendFrameRate=R.sentFrame.frameRate,m.sendResolutionHeight=R.sentFrame.height,m.sendResolutionWidth=R.sentFrame.width):w&&(m.sendResolutionWidth=w.width,m.sendResolutionHeight=w.height),R.avgEncodeMs&&(m.encodeDelay=R.avgEncodeMs),O&&O.bitrateMax?m.targetSendBitrate=1e3*O.bitrateMax:R.targetBitrate&&(m.targetSendBitrate=R.targetBitrate),m.sendPackets=R.packets,m.sendPacketsLost=R.packetsLost,m.sendJitterMs=R.jitterMs,m.sendRttMs=R.rttMs,m.totalDuration=p?p.totalDuration+1:1,m.totalFreezeTime=p?p.totalFreezeTime:0,this.isLocalVideoFreeze(R)&&(m.totalFreezeTime+=1),R.scalabilityMode&&this.scalabilityMode!==R.scalabilityMode&&(k.debug("[".concat(this.store.clientId,"]: The scalabilityMode of the video sending stream is ").concat(R.scalabilityMode)),this.scalabilityMode=R.scalabilityMode)}this.trafficStats&&(m.currentPacketLossRate=(this.trafficStats.B_pvlr4||0)/100)}var h;this.localStats.set(a,m),((p==null?void 0:p.sendResolutionWidth)!==m.sendResolutionWidth||(p==null?void 0:p.sendResolutionHeight)!==m.sendResolutionHeight)&&((h=this.onStatsChanged)===null||h===void 0||h.call(this,"resolution",{width:m.sendResolutionWidth,height:m.sendResolutionHeight})),m&&S&&this.exceptionMonitor.setLocalVideoStats(this.store.uid,S.track,m);break}case Fe.LocalAudioTrack:{const p=l,m=lh({},gI),E=n.getStats(),S=n.getLocalMedia(a);if(E){const R=E.audioSend.find(w=>w.ssrc===(S==null?void 0:S.ssrcs[0].ssrcId));if(R){if(R.codec!=="opus"&&R.codec!=="aac"&&R.codec!=="PCMU"&&R.codec!=="PCMA"&&R.codec!=="G722"||(m.codecType=R.codec),R.inputLevel)m.sendVolumeLevel=Math.round(32767*R.inputLevel);else{const w=n.getLocalAudioVolume();w&&(m.sendVolumeLevel=Math.round(32767*w))}m.sendBytes=R.bytes,m.sendPackets=R.packets,m.sendPacketsLost=R.packetsLost,m.sendJitterMs=R.jitterMs,m.sendRttMs=R.rttMs,m.sendBitrate=p?8*Math.max(0,m.sendBytes-p.sendBytes):0}}this.trafficStats&&(m.currentPacketLossRate=(this.trafficStats.B_palr4||0)/100),this.localStats.set(Fe.LocalAudioTrack,m),m&&S&&this.exceptionMonitor.setLocalAudioStats(this.store.uid,S.track,m);break}}})}updateRemoteStats(n){Array.from(this.remoteStats.entries()).forEach(i=>{var a,l;let[u,{videoStats:h,audioStats:p,videoPcStats:m}]=i;const E=p,S=h,R=m,w=lh({},gV),O=lh({},vV),H=lh({},dfe),{audioTrack:B,videoTrack:j,audioSSRC:q,videoSSRC:Y}=n.getRemoteMedia(u);let Z;Z=this.store.useP2P?n.getStats(!0):n.getStats();const pe=(a=Z)===null||a===void 0?void 0:a.audioRecv.find(Ae=>Ae.ssrc===q),he=(l=Z)===null||l===void 0?void 0:l.videoRecv.find(Ae=>Ae.ssrc===Y),re=this.trafficStats&&this.trafficStats.peer_delay.find(Ae=>Ae.peer_uid===u);if(pe&&(pe.codec!=="opus"&&pe.codec!=="aac"&&pe.codec!=="PCMU"&&pe.codec!=="PCMA"&&pe.codec!=="G722"||(w.codecType=pe.codec),pe.outputLevel?w.receiveLevel=Math.round(32767*pe.outputLevel):B&&(w.receiveLevel=Math.round(32767*B.getVolumeLevel())),w.receiveBytes=pe.bytes,w.receivePackets=pe.packets,w.receivePacketsLost=pe.packetsLost,w.receivePacketsDiscarded=pe.packetsDiscarded,w.packetLossRate=w.receivePacketsLost/(w.receivePackets+w.receivePacketsLost),w.receiveBitrate=E?8*Math.max(0,w.receiveBytes-E.receiveBytes):0,w.totalDuration=E?E.totalDuration+1:1,w.totalFreezeTime=E?E.totalFreezeTime:0,w.freezeRate=w.totalFreezeTime/w.totalDuration,w.receiveDelay=pe.jitterBufferMs,w.totalDuration>10&&z0.isRemoteAudioFreeze(B)&&(w.totalFreezeTime+=1)),he){var Se;he.codec!=="H264"&&he.codec!=="H265"&&he.codec!=="VP8"&&he.codec!=="VP9"&&he.codec!=="AV1X"&&he.codec!=="AV1"||(O.codecType=he.codec),O.receiveBytes=he.bytes,O.receiveBitrate=S?8*Math.max(0,O.receiveBytes-S.receiveBytes):0,O.decodeFrameRate=he.decodeFrameRate<0?0:he.decodeFrameRate,O.renderFrameRate=he.decodeFrameRate<0?0:he.decodeFrameRate,he.outputFrame&&(O.renderFrameRate=he.outputFrame.frameRate),he.receivedFrame?(O.receiveFrameRate=he.receivedFrame.frameRate,O.receiveResolutionHeight=he.receivedFrame.height,O.receiveResolutionWidth=he.receivedFrame.width):j&&(O.receiveResolutionHeight=j._videoHeight||0,O.receiveResolutionWidth=j._videoWidth||0),he.framesRateFirefox!==void 0&&(O.receiveFrameRate=Math.round(he.framesRateFirefox)),O.receivePackets=he.packets,O.receivePacketsLost=he.packetsLost,O.packetLossRate=O.receivePacketsLost/(O.receivePackets+O.receivePacketsLost);const Ae=S?S.totalFreezeTime:0,Ne=S?S.totalDuration:0;O.totalDuration=S?S.totalDuration+1:1,O.totalFreezeTime=(Se=he.totalFreezesDuration)!==null&&Se!==void 0?Se:Ae||0,O.receiveDelay=he.jitterBufferMs||0;const Be=!!Y&&n.getRemoteVideoIsReady(Y);he.totalFreezesDuration===void 0&&j&&Be&&z0.isRemoteVideoFreeze(j,he,R)&&(O.totalFreezeTime+=1),O.freezeRate=Math.max(0,Math.min((O.totalFreezeTime-Ae)/(O.totalDuration-Ne),1))}re&&(w.end2EndDelay=re.B_ad,O.end2EndDelay=re.B_vd,w.transportDelay=re.B_ed,O.transportDelay=re.B_ed,w.currentPacketLossRate=re.B_ealr4/100,O.currentPacketLossRate=re.B_evlr4/100,H.uplinkNetworkQuality=re.B_punq?re.B_punq:0,H.downlinkNetworkQuality=re.B_pdnq?re.B_pdnq:0),this.remoteStats.set(u,{audioStats:w,videoStats:O,videoPcStats:he,networkStats:H}),B&&this.exceptionMonitor.setRemoteAudioStats(B,w),j&&this.exceptionMonitor.setRemoteVideoStats(j,O)})}}class R8{constructor(){W(this,"destChannelMediaInfos",new Map),W(this,"srcChannelMediaInfo",void 0)}setSrcChannelInfo(n){D6(n),this.srcChannelMediaInfo=n}addDestChannelInfo(n){D6(n),this.destChannelMediaInfos.set(n.channelName,n)}removeDestChannelInfo(n){mS(n),this.destChannelMediaInfos.delete(n)}getSrcChannelMediaInfo(){return this.srcChannelMediaInfo}getDestChannelMediaInfo(){return this.destChannelMediaInfos}}function w8(e){if(!(e instanceof R8))return new Ce(X.INVALID_PARAMS,"Config should be instance of [ChannelMediaRelayConfiguration]").throw();const n=e.getSrcChannelMediaInfo(),i=e.getDestChannelMediaInfo();if(!n)return new Ce(X.INVALID_PARAMS,"srcChannelMediaInfo should not be empty").throw();if(i.size===0)return new Ce(X.INVALID_PARAMS,"destChannelMediaInfo should not be empty").throw()}class qu{get hasVideo(){return this._video_enabled_&&!this._video_muted_&&this._video_added_}get hasAudio(){return this._audio_enabled_&&!this._audio_muted_&&this._audio_added_}get audioTrack(){if(this.hasAudio||this._audio_pre_subscribed)return this._audioTrack}get videoTrack(){if(this.hasVideo||this._video_pre_subscribed)return this._videoTrack}get dataChannels(){return this._dataChannels}constructor(n,i){W(this,"uid",void 0),W(this,"_uintid",void 0),W(this,"_trust_in_room_",!0),W(this,"_trust_audio_enabled_state_",!0),W(this,"_trust_video_enabled_state_",!0),W(this,"_trust_audio_mute_state_",!0),W(this,"_trust_video_mute_state_",!0),W(this,"_audio_muted_",!1),W(this,"_video_muted_",!1),W(this,"_audio_enabled_",!0),W(this,"_video_enabled_",!0),W(this,"_audio_added_",!1),W(this,"_video_added_",!1),W(this,"_is_pre_created",!1),W(this,"_video_pre_subscribed",!1),W(this,"_audio_pre_subscribed",!1),W(this,"_trust_video_stream_added_state_",!0),W(this,"_trust_audio_stream_added_state_",!0),W(this,"_audioTrack",void 0),W(this,"_videoTrack",void 0),W(this,"_dataChannels",[]),W(this,"_audioSSRC",void 0),W(this,"_videoSSRC",void 0),W(this,"_audioOrtc",void 0),W(this,"_videoOrtc",void 0),W(this,"_cname",void 0),W(this,"_rtxSsrcId",void 0),W(this,"_videoMid",void 0),W(this,"_audioMid",void 0),this.uid=n,this._uintid=i}}function I8(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),i.push.apply(i,a)}return i}function lA(e){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?I8(Object(i),!0).forEach(function(a){W(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):I8(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}const xS="9",uA=2e4,NS=4e4;function A8(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),i.push.apply(i,a)}return i}function Jl(e){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?A8(Object(i),!0).forEach(function(a){W(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):A8(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}var pp=function(e){return e[e.DOWN=0]="DOWN",e[e.UP=1]="UP",e}(pp||{});const PS=new Map;function O8(e,n,i,a){let{scale:l}=e;if(l===0&&a===pp.UP||l>=n.length-1&&a===pp.DOWN)return e;let u=Jl(Jl({},e),{},{scale:a===pp.DOWN?++l:--l});switch(i){case"maintain-framerate":u=Jl(Jl({},u),n[l].motion);break;case"maintain-resolution":u=Jl(Jl({},u),n[l].detail);break;case"balanced":u=Jl(Jl({},u),n[l].balanced)}return u}function x8(e,n){if(n){const i={overUse:0,underUse:0,adaptationList:N8(n)};PS.set(e,i)}else PS.delete(e)}function N8(e){const n=Jl({},e),{bitrateMax:i,frameRate:a,scaleResolutionDownBy:l,bitrateMin:u}=n,{MIN_FRAME_RATE:h,MAX_THRESHOLD_FRAMERATE:p,MAX_SCALE:m,BITRATE_MIN_THRESHOLD:E,BITRATE_MAX_THRESHOLD:S,BWE_SCALE_UP_THRESHOLD:R,BWE_SCALE_DOWN_THRESHOLD:w,PERF_SCALE_DOWN_THRESHOLD:O,PERF_SCALE_UP_THRESHOLD:H,BALANCE_BITRATE_FACTOR:B,BALANCE_FRAMERATE_FACTOR:j,BALANCE_RESOLUTION_FACTOR:q,MOTION_RESOLUTION_FACTOR:Y,MOTION_BITRATE_FACTOR:Z,DETAIL_FRAMERATE_FACTOR:pe,DETAIL_BITRATE_FACTOR:he}=cI,re=Math.min(n.frameRate,p),Se=[{scale:0,threshold:{bwe_down:Math.round(Math.pow(w,1)*i),bwe_up:i,fps_down:Math.round(Math.pow(O,1)*re),fps_up:a},balanced:{scaleResolutionDownBy:1,frameRate:a,bitrateMax:i,bitrateMin:u},motion:{scaleResolutionDownBy:1,frameRate:a,bitrateMax:i,bitrateMin:u},detail:{scaleResolutionDownBy:1,frameRate:a,bitrateMax:i,bitrateMin:u}}];for(let Ae=1;Ae<=m;Ae++){const Ne={bwe_up:Math.round(Math.pow(R,Ae)*i),bwe_down:Math.round(Math.pow(w,Ae+1)*i),fps_up:Math.round(Math.pow(H,Ae)*re),fps_down:Math.round(Math.pow(O,Ae+1)*re)},Be={scaleResolutionDownBy:l/Math.pow(q,Ae),frameRate:Math.max(Math.round(Math.pow(j,Ae)*a),h),bitrateMax:Math.max(Math.round(Math.pow(B,Ae)*i),S),bitrateMin:Math.max(Math.round(Math.pow(B,Ae)*u),E)},nn={scaleResolutionDownBy:l/Math.pow(Y,Ae),frameRate:a,bitrateMax:Math.max(Math.round(Math.pow(Z,Ae)*i),S),bitrateMin:Math.max(Math.round(Math.pow(Z,Ae)*u),E)},sn={scaleResolutionDownBy:1,frameRate:Math.max(Math.round(Math.pow(pe,Ae)*a),h),bitrateMax:Math.max(Math.round(Math.pow(he,Ae)*i),S),bitrateMin:Math.max(Math.round(Math.pow(he,Ae)*u),E)};Se.push({scale:Ae,threshold:Ne,balanced:Be,motion:nn,detail:sn})}return Se}function Ope(e,n,i,a,l,u){const h=PS.get(e)||{overUse:0,underUse:0,adaptationList:N8(l)},{adaptationList:p}=h;PS.set(e,h);const{OVERUSE_TIMES_THRESHOLD:m,UNDERUSE_TIMES_THRESHOLD:E}=cI,{scale:S}=a;let R,w;return typeof n=="number"&&n>0&&function(O,H,B,j){if(H>=B.length)return!1;let{threshold:{fps_down:q}}=B[H];return Q("FORCE_AG_HIGH_FRAMERATE")&&j==="maintain-framerate"&&(q=B[0].threshold.fps_down),O<q}(n,S,p,u)&&(h.overUse++,w=I0.CPU,h.overUse>m)||typeof i=="number"&&i>0&&function(O,H,B){if(H>=B.length)return!1;const{threshold:{bwe_down:j}}=B[H];return O<j}(i,S,p)&&(h.overUse++,w=I0.BANDWIDTH,h.overUse>m)?(h.overUse=0,h.underUse=0,R=O8(a,p,u,pp.DOWN),[R,w]):(typeof n=="number"&&n>0&&typeof i=="number"&&i>0&&function(O,H,B,j){if(H===0)return;let{threshold:{fps_up:q}}=B[H];return Q("FORCE_AG_HIGH_FRAMERATE")&&j==="maintain-framerate"&&(q=B[1].threshold.fps_up),O>q}(n,S,p,u)&&function(O,H,B){if(H===0)return;const{threshold:{bwe_up:j}}=B[H];return O>j}(i,S,p)&&(h.underUse++,h.underUse>E&&(h.overUse=0,h.underUse=0,R=O8(a,p,u,pp.UP),R.scale===0&&(w=I0.NONE))),[R,w])}function P8(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),i.push.apply(i,a)}return i}function dA(e){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?P8(Object(i),!0).forEach(function(a){W(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):P8(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}const DS=new Map;function LS(e,n){const i=DS.get(e);if(i){const{timer:a}=i;window.clearTimeout(a),DS.delete(e)}n.qualityLimitationReason=I0.NONE,x8(e)}function xpe(e,n){var i;let a;switch(n){case Fe.LocalAudioTrack:a=Bn.Audio;break;case Fe.LocalVideoTrack:a=Ge(i=e._hints).call(i,qn.SCREEN_TRACK)?Bn.Screen:Bn.High;break;case Fe.LocalVideoLowTrack:a=Bn.Low}return a}function hA(e){const n=Rn();if(e.some(i=>i._bypassWebAudio))throw new Re(X.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");if(!n.webAudioMediaStreamDest)throw new Re(X.NOT_SUPPORTED,"cannot publish multiple tracks because your browser does not support audio mixing")}function fA(e,n){hA(e);const i=n||new ui;return e.forEach(a=>i.addAudioTrack(a)),i}const Npe=!Rn().supportUnifiedPlan||Q("CHROME_FORCE_PLAN_B")&&Gl();function kS(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var i;return Npe?(i={spec:n,store:e},Xl("PlanBConnection").create(i)):new fs(n,e)}function pA(e){return e&&(e.iceConnectionState==="disconnected"||e.iceConnectionState==="checking"||e.iceConnectionState==="failed")}function D8(e){try{if(e.iceServers)return!1;if(e.turnServer&&e.turnServer.mode!=="off"){if(T0(e.turnServer.servers))return!1;if(Q("FORCE_TURN_TCP")||e.turnServer.servers.concat(e.turnServer.serversFromGateway||[]).some(n=>n.forceturn))return!0}return!1}catch{return!1}}var Cn;function L8(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),i.push.apply(i,a)}return i}function Dc(e){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?L8(Object(i),!0).forEach(function(a){W(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):L8(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}let fs=(Cn=class Th extends F6{get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get dtlsTransportState(){var n,i;return(n=(i=this.peerConnection.getReceivers()[0])===null||i===void 0||(i=i.transport)===null||i===void 0?void 0:i.state)!==null&&n!==void 0?n:null}get localCodecs(){return[...new Set(this.localCapabilities&&this.localCapabilities.send.videoCodecs.map(n=>n.rtpMap&&n.rtpMap.encodingName.toLowerCase()||"").filter(n=>{var i;return Ge(i=Object.keys(O0)).call(i,n)}))]}constructor(n,i){super(n,i),W(this,"id",Zn(5,"connection-")),W(this,"store",void 0),W(this,"peerConnection",void 0),W(this,"forceTurn",!1),W(this,"remoteSDP",void 0),W(this,"initialOffer",void 0),W(this,"transportEventReceiver",void 0),W(this,"statsFilter",void 0),W(this,"extension",{useXR:Q("USE_XR")}),W(this,"localCapabilities",void 0),W(this,"remoteCodecs",void 0),W(this,"localCandidateCount",0),W(this,"allCandidatesReceived",!1),W(this,"isPreallocation",!1),W(this,"preMediaMap",new Map),W(this,"dataStreamChannelMap",new Map),W(this,"establishPromise",void 0),W(this,"recoveredDataChannelIds",[]),W(this,"currentDataChannelId",1),W(this,"supportAV1RtpSpec",!1),W(this,"mutex",void 0),W(this,"qualityLimitationReason",I0.NONE),W(this,"isFirstConnected",!1),this.store=i,this.forceTurn=D8(n),this.mutex=new qi("P2PConnection-mutex",i.clientId),this.peerConnection=new RTCPeerConnection(Th.resolvePCConfiguration(n),{optional:[{googDscp:!0}]}),this.isFirstConnected=!1,this.statsFilter=oI(this.peerConnection,Q("STATS_UPDATE_INTERVAL"),void 0,Or()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1,n.isPreallocation&&(this.isPreallocation=!0),this.establishPromise=this.establish()}getPreMedia(n){return this.preMediaMap.get(n)}isPreSub(){return this.preMediaMap.size>0}async updateRemoteRTPCapabilities(n,i){if(this.remoteCodecs=i,!this.remoteSDP)return void k.debug("[P2PConnection] cannot updateRemoteRTPCapabilities before remote SDP created, local codecs: ".concat(this.localCodecs,", codecs: ").concat(i));if(this.remoteSDP.updateRemoteCodec(n,i,this.store.codec)){const a=await this.peerConnection.createOffer(),l=this.logSDPExchange(a.sdp||"","offer","local","muteLocal");await this.peerConnection.setLocalDescription(a);const u=this.remoteSDP.toString();l==null||l(u),await this.peerConnection.setRemoteDescription({type:"answer",sdp:u})}else k.debug("[P2PConnection] updateRemoteRTPCapabilities no need to exchange SDP.")}async establish(){try{this.peerConnection.addTransceiver("video",{direction:"recvonly"}),this.peerConnection.addTransceiver("audio",{direction:"recvonly"});const a=await this.peerConnection.createOffer();if(!a.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const l=Wu(a.sdp),u=await n8({filterRTX:!Q("USE_PUB_RTX")&&!Q("USE_SUB_RTX"),filterVideoFec:Q("FILTER_VIDEO_FEC"),filterAudioFec:Q("FILTER_AUDIO_FEC"),filterVideoCodec:Q("FILTER_VIDEO_CODEC"),unsupportedVideoUplinkCodec:Q("UNSUPPORTED_VIDEO_UPLINK_CODEC"),unsupportedVideoDownlinkCodec:Q("UNSUPPORTED_VIDEO_DOWNLINK_CODEC")},this.extension);if(this.localCapabilities=RS(u),this.initialOffer=a,Q("ENABLE_SVC")&&this.store.codec=="av1"){const p=await async function(){try{const m=new RTCPeerConnection;m.addTransceiver("video",{direction:"sendonly",sendEncodings:[{scalabilityMode:q_.L1T3}]});const E=await m.createOffer();if(!E.sdp)return void m.close();const S=sa(E.sdp).mediaDescriptions[0];if(!S)return;const R=S.attributes.extmaps.find(w=>w.extensionName==="https://aomediacodec.github.io/av1-rtp-spec/#dependency-descriptor-rtp-header-extension");return m.close(),R}catch{return}}();var n;p&&(this.supportAV1RtpSpec=!0,(n=u.send)===null||n===void 0||n.videoExtensions.push(p))}let h;return a.sdp&&a8(a.sdp)&&(h=vr(u),(i=h).send&&(lp(it.VIDEO,i.send.videoExtensions),lp(it.AUDIO,i.send.audioExtensions)),i.recv&&(lp(it.VIDEO,i.recv.videoExtensions),lp(it.AUDIO,i.recv.audioExtensions)),i.sendrecv&&(lp(it.VIDEO,i.sendrecv.videoExtensions),lp(it.AUDIO,i.sendrecv.audioExtensions))),Dc(Dc({},l),{},{rtpCapabilities:h||u,offerSDP:a.sdp})}catch(a){throw new Re(X.GET_LOCAL_CONNECTION_PARAMS_FAILED,a.toString())}var i}async connect(n){try{if(!this.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");this.initialOffer.sdp&&a8(this.initialOffer.sdp)&&(i=n.rtpCapabilities,a=this.localCapabilities,i.send&&(CS(it.VIDEO,i.send.videoExtensions,a.send.videoExtensions),CS(it.AUDIO,i.send.audioExtensions,a.send.audioExtensions)),i.recv&&(CS(it.VIDEO,i.recv.videoExtensions,a.recv.videoExtensions),CS(it.AUDIO,i.recv.audioExtensions,a.recv.audioExtensions))),this.remoteSDP=new class{get localCapabilities(){return vr(this._localCapabilities)}get rtpCapabilities(){return vr(this._rtpCapabilities)}get candidates(){return vr(this._candidates)}get iceParameters(){return vr(this._iceParameters)}get dtlsParameters(){return vr(this._dtlsParameters)}constructor(m){let E=arguments.length>1&&arguments[1]!==void 0&&arguments[1],S=arguments.length>2&&arguments[2]!==void 0&&arguments[2];W(this,"sessionDesc",void 0),W(this,"_localCapabilities",void 0),W(this,"_rtpCapabilities",void 0),W(this,"_candidates",void 0),W(this,"_originCandidates",void 0),W(this,"_iceParameters",void 0),W(this,"_isUseExtmapAllowMixed",void 0),W(this,"_isUseLocalCodecs",void 0),W(this,"_dtlsParameters",void 0),W(this,"setup",void 0),W(this,"currentMidIndex",void 0),W(this,"cname",void 0),W(this,"useLocalCodecsMids",[]),W(this,"preloadSsrcs",[]),W(this,"firefoxSsrcMidMap",new Map),this._isUseExtmapAllowMixed=E,this._isUseLocalCodecs=S,m=vr(m);const{iceParameters:R,dtlsParameters:w,candidates:O,rtpCapabilities:H,setup:B,localCapabilities:j,cname:q}=m;this._rtpCapabilities=H,this._candidates=O,this._originCandidates=vr(O),this._iceParameters=R,this._dtlsParameters=w,this._localCapabilities=j,this.setup=B,this.cname=q,[this.sessionDesc]=this.updateRemoteRTPCapabilities(H),this.currentMidIndex=this.sessionDesc.mediaDescriptions.length-1}checkPreloadSsrcs(m){return m.length===this.preloadSsrcs.length&&m.every(E=>{var S;return Ge(S=this.preloadSsrcs).call(S,E)})}preloadRemoteMedia(m){let E=0;const S=[],R=[];for(;m>0;){const w=[lA({ssrcId:NS+E},Q("USE_SUB_RTX")?{rtx:NS+E+1}:{})],O="".concat(NS+E,"_").concat(uA+E),{ssrcs:H,ssrcGroups:B}=V0(w,this.cname,Q("SYNC_GROUP")?O:void 0),j=this.preCreateOrRecycleSendMedia("video",H,B,void 0),q=[{ssrcId:uA+E}],Y="".concat(NS+E,"_").concat(uA+E),{ssrcs:Z,ssrcGroups:pe}=V0(q,this.cname,Q("SYNC_GROUP")?Y:void 0),he=this.preCreateOrRecycleSendMedia("audio",Z,pe,void 0);m--,E+=2,S.push(j,he),R.push(H[0].ssrcId,Z[0].ssrcId)}return this.useLocalCodecsMids.push(...S),this.preloadSsrcs=R,{mids:S,preSSRCs:R,isAvailable:!0}}preCreateOrRecycleSendMedia(m,E,S,R){const w=this.rtpCapabilities.send.videoCodecs,O=this._isUseLocalCodecs||w.length===0?this.localCapabilities.recv:this.rtpCapabilities.send;k.debug("create or recycle send media without remote rtp capabilities, ssrcs ",E[0].ssrcId);const H=m===it.VIDEO?O.videoCodecs:O.audioCodecs,B=m===it.VIDEO?O.videoExtensions:O.audioExtensions;this.currentMidIndex+=1;const j="".concat(this.currentMidIndex);let q={media:{mediaType:m,port:xS,protos:["UDP","TLS","RTP","SAVPF"],fmts:H.map(Y=>Y.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:B,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:E,ssrcGroups:S,rtcpFeedbackWildcards:[],payloads:H,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(j)}};return q=this.mungSendMediaDesc(q,R),this.sessionDesc.mediaDescriptions.push(q),this.updateBundleMids(),j}toString(){return Bu(this.sessionDesc)}send(m,E,S,R){const{ssrcs:w,ssrcGroups:O}=V0(E,this.cname,Q("SYNC_GROUP")?S:void 0),H=this.findPreloadMediaDesc(w);if(H){if(Or()&&this.firefoxSsrcMidMap.set(w[0].ssrcId,H.attributes.mid),R&&(R.twcc||R.remb)){const B=this.sessionDesc.mediaDescriptions.indexOf(H);return this.sessionDesc.mediaDescriptions[B]=this.mungSendMediaDesc(H,R),{mid:H.attributes.mid,needExchangeSDP:!0}}return{mid:H.attributes.mid,needExchangeSDP:!1}}{const B=this.findAvailableMediaIndex(m,w);let j;return B===-1||B===1&&($i()||function(){const q=yn();return!(q.name!==An.CHROME||!q.osVersion)&&Number(q.version)<=90}()||Q("ENABLE_ENCODED_TRANSFORM")&&Wl())||B===0&&!function(q){const Y=yn();return!(Y.name!==An.FIREFOX||!Y.osVersion)&&Number(Y.version)===q}(138)&&Q("USE_SUB_RTX")||O3()?(j=this.createOrRecycleSendMedia(m,w,O,"sendonly",R),this.updateBundleMids()):(j=vr(this.sessionDesc.mediaDescriptions[B]),j.attributes.direction="sendonly",j.attributes.ssrcs=w,j.attributes.ssrcGroups=O,this.sessionDesc.mediaDescriptions[B]=this.mungSendMediaDesc(j,R)),Or()&&this.firefoxSsrcMidMap.set(w[0].ssrcId,j.attributes.mid),{mid:j.attributes.mid,needExchangeSDP:!0}}}sendDataChannel(){const{mediaDesc:m,needExchangeSDP:E}=this.createOrRecycleDataChannel();return this.updateBundleMids(),{mid:m.attributes.mid,needExchangeSDP:E}}batchSend(m){const E=m.map(w=>{let{kind:O,ssrcMsg:H,mslabel:B}=w;return this.send(O,H,B)}),S=[];let R=!1;return E.forEach(w=>{let{mid:O,needExchangeSDP:H}=w;H&&(R=!0),S.push(O)}),{mids:S,needExchangeSDP:R}}stopSending(m){const E=this.sessionDesc.mediaDescriptions.filter(S=>S.attributes.mid&&m.indexOf(S.attributes.mid)!==-1);if(E.length!==m.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.stopSending.");E.forEach(S=>{S.attributes.mid==="0"||Or()||O3()?S.attributes.ssrcs=[]:(S.attributes.ssrcs=[],S.attributes.direction="inactive",S.media.port="0")}),this.updateBundleMids()}mute(m){const E=this.sessionDesc.mediaDescriptions.find(S=>S.attributes.mid===m);if(!E)throw new Error("mediaDescription not found with ".concat(m," in remote SDP when calling RemoteSDP.mute."));E.attributes.direction="inactive"}unmute(m){const E=this.sessionDesc.mediaDescriptions.find(S=>S.attributes.mid===m);if(!E)throw new Error("mediaDescription not found with ".concat(m," in remote SDP when calling RemoteSDP.unmute."));E.attributes.direction="sendonly"}muteRemote(m){const E=this.sessionDesc.mediaDescriptions.filter(S=>Ge(m).call(m,S.attributes.mid||""));if(E.length!==m.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");E.forEach(S=>{S.attributes.direction="inactive"})}unmuteRemote(m){const E=this.sessionDesc.mediaDescriptions.filter(S=>Ge(m).call(m,S.attributes.mid||""));if(E.length!==m.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");E.forEach(S=>{S.attributes.direction="recvonly"})}receive(m,E,S,R){m.forEach((w,O)=>{this.createOrRecycleRecvMedia(w,[],"recvonly",E,S,R[O])}),this.updateBundleMids()}stopReceiving(m){const E=this.sessionDesc.mediaDescriptions.filter(S=>m.indexOf(S.attributes.mid)!==-1);if(E.length!==m.length)throw new Error("MediaDescriptions' length doesn't match mids's length when calling RemoteSDP.receive.");E.forEach(S=>{S.media.port="0",S.attributes.direction="inactive"}),this.updateBundleMids()}updateRemoteRTPCapabilities(m){const E=this.sessionDesc||sa((S=this._isUseExtmapAllowMixed,`v=0
o=- 0 0 IN IP4 127.0.0.1
s=AgoraGateway
t=0 0
a=group:BUNDLE 0 1
a=msid-semantic: WMS
a=ice-lite`.concat(S?`
a=extmap-allow-mixed`:"",`
m=video 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendonly
a=rtcp-mux
a=rtcp-rsize
a=mid:0
m=audio 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendonly
a=rtcp-mux
a=rtcp-rsize
a=mid:1
`)));var S;this._rtpCapabilities=m;let R=!1;const w=this.rtpCapabilities.send,O=this.localCapabilities.send,H=this.localCapabilities.recv,B=H.videoCodecs,j=H.audioCodecs,q=H.videoExtensions,Y=H.audioExtensions;for(const re of E.mediaDescriptions){var Z;if(re.attributes.direction!=="sendonly"||typeof re.attributes.mid!="string"||!Ge(Z=this.useLocalCodecsMids).call(Z,re.attributes.mid)){if(R=!0,re.attributes.iceUfrag=this._iceParameters.iceUfrag,re.attributes.icePwd=this._iceParameters.icePwd,re.attributes.fingerprints=this._dtlsParameters.fingerprints,re.attributes.candidates=this._candidates,re.attributes.setup=this.setup,re.media.mediaType==="application"&&(re.attributes.sctpPort="5000"),re.media.mediaType==="video")if(this._isUseLocalCodecs&&re.attributes.direction==="sendonly"){var pe;re.media.fmts=B.map(Ae=>Ae.payloadType.toString(10)),re.attributes.payloads=B,re.attributes.extmaps=q;const Se=re.attributes.mid;typeof Se!="string"||Ge(pe=this.useLocalCodecsMids).call(pe,Se)||this.useLocalCodecsMids.push(Se)}else if(w.videoCodecs.length===0){const Se=O.videoCodecs.filter(Ae=>{var Ne,Be;return(Ne=Ae.rtpMap)===null||Ne===void 0?void 0:Ge(Be=Ne.encodingName.toLowerCase()).call(Be,"vp8")})||[O.videoCodecs[0]];re.media.fmts=Se.map(Ae=>Ae.payloadType.toString(10)),re.attributes.payloads=Se,re.attributes.extmaps=[]}else re.media.fmts=w.videoCodecs.map(Se=>Se.payloadType.toString(10)),re.attributes.payloads=w.videoCodecs,re.attributes.extmaps=w.videoExtensions;if(re.media.mediaType==="audio")if(this._isUseLocalCodecs&&re.attributes.direction==="sendonly"){var he;re.media.fmts=j.map(Ae=>Ae.payloadType.toString(10)),re.attributes.payloads=j,re.attributes.extmaps=Y;const Se=re.attributes.mid;typeof Se!="string"||Ge(he=this.useLocalCodecsMids).call(he,Se)||this.useLocalCodecsMids.push(Se)}else if(w.audioCodecs.length===0){const Se=O.audioCodecs.filter(Ae=>{var Ne,Be;return(Ne=Ae.rtpMap)===null||Ne===void 0?void 0:Ge(Be=Ne.encodingName.toLowerCase()).call(Be,"opus")})||[O.audioCodecs[0]];re.media.fmts=Se.map(Ae=>Ae.payloadType.toString(10)),re.attributes.payloads=Se,re.attributes.extmaps=[]}else re.media.fmts=w.audioCodecs.map(Se=>Se.payloadType.toString(10)),re.attributes.payloads=w.audioCodecs,re.attributes.extmaps=w.audioExtensions,dp(re)}}return this.sessionDesc=E,this.currentMidIndex=E.mediaDescriptions.length-1,[this.sessionDesc,R]}updateCandidates(m){const E=this._originCandidates.filter(R=>R.transport==="udp"),S=[];if(E.forEach(R=>{S.push(lA(lA({},R),{},{foundation:"tcpcandidate",priority:Number(R.priority)-1+"",transport:"tcp",port:Number(R.port)+90+""}))}),E.length!==0){switch(m){case Qi.TCP_RELAY:this._candidates=S;break;case Qi.UDP_TCP_RELAY:case Qi.RELAY:this._candidates=[...E,...S];break;default:this._candidates=E}for(const R of this.sessionDesc.mediaDescriptions)R.attributes.candidates=this.candidates}}restartICE(m){m=vr(m),this._iceParameters=m,this.sessionDesc.mediaDescriptions.forEach(E=>{E.attributes.iceUfrag=m.iceUfrag,E.attributes.icePwd=m.icePwd})}predictReceivingMids(m){const E=[];for(let S=0;S<m;S++)E.push((this.currentMidIndex+S+1).toString(10));return E}findAvailableMediaIndex(m,E){return this.sessionDesc.mediaDescriptions.findIndex(S=>{const R=S.media.mediaType===m&&S.media.port!=="0"&&(S.attributes.direction==="sendonly"||S.attributes.direction==="sendrecv")&&S.attributes.ssrcs.length===0;if(Or()){if(R){const w=this.firefoxSsrcMidMap.get(E[0].ssrcId);return!(w||S.attributes.mid!=="0"&&S.attributes.mid!=="1")||!(!w||w!==S.attributes.mid)}return!1}return R})}createOrRecycleDataChannel(){for(const S of this.sessionDesc.mediaDescriptions)if(S.media.mediaType==="application")return{mediaDesc:S,needExchangeSDP:!1};this.currentMidIndex+=1;const m="".concat(this.currentMidIndex),E={media:{mediaType:"application",port:xS,protos:["UDP","DTLS","SCTP"],fmts:["webrtc-datachannel"]},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:[],fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:[],ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:[],rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,mid:"".concat(m),sctpPort:"5000"}};return this.sessionDesc.mediaDescriptions.push(E),{mediaDesc:E,needExchangeSDP:!0}}createOrRecycleRecvMedia(m,E,S,R,w,O){const H=m._mediaStreamTrack.kind,B=this.rtpCapabilities.recv,j=j0(H,B,this.localCapabilities.send,H===it.VIDEO?R:w),q=H===it.VIDEO?B.videoExtensions:B.audioExtensions;this.currentMidIndex+=1;const Y="".concat(this.currentMidIndex);let Z={media:{mediaType:H,port:xS,protos:["UDP","TLS","RTP","SAVPF"],fmts:j.map(he=>he.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:q,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:E,ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:j,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:S,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(Y)}};Z=this.mungRecvMediaDsec(Z,m,O);const pe=this.findFirstClosedMedia(H);if(pe){const he=this.sessionDesc.mediaDescriptions.indexOf(pe);this.sessionDesc.mediaDescriptions[he]=Z}else this.sessionDesc.mediaDescriptions.push(Z);return Z}updateRemoteDtlsParameters(m){const E=new Set(this._dtlsParameters.fingerprints.map(w=>w.fingerprint)),S=new Set(m.map(w=>w.fingerprint));let R=!1;E.size!==S.size&&(R=!0);for(const w of E)S.has(w)||(R=!0);return R}updateRemoteCodec(m,E,S){const R=[...new Set(this._rtpCapabilities.recv.videoCodecs.map(Z=>Z.rtpMap&&Z.rtpMap.encodingName.toLowerCase()||"").filter(Z=>{var pe;return Ge(pe=Object.keys(O0)).call(pe,Z)}))],w=new Set(E);if(R.every(Z=>w.has(Z)))return k.debug("codecs has not changed, no need to updateRemoteCodec, codecs: ".concat(E)),!1;const O=this._rtpCapabilities.recv.videoCodecs.filter(Z=>E.some(pe=>{var he;return Ge(he=Z.rtpMap&&Z.rtpMap.encodingName.toLowerCase()||"").call(he,pe)}));if(O.length===0)return k.debug("updateRemoteCodec failed, because cannot find matched codec, remoteCapabilities codecs: ".concat(R," codecs: ").concat(E)),!1;const H=[...new Set(O.map(Z=>Z.rtpMap&&Z.rtpMap.encodingName.toLowerCase()||""))];let B;if(k.debug("updateRemoteCodec, from ".concat(R," to ").concat(H)),m.length===0)B=this.sessionDesc.mediaDescriptions.filter(Z=>Z.media.mediaType==="video"&&Z.attributes.direction==="recvonly");else if(B=this.sessionDesc.mediaDescriptions.filter(Z=>Z.attributes.mid&&Z.media.mediaType==="video"&&Ge(m).call(m,Z.attributes.mid)&&Z.attributes.direction==="recvonly"),B.length!==m.length)return k.debug("updateRemoteCodec failed, because cannot find mids, mids: ".concat(m,", codecs: ").concat(E)),!1;if(Q("USE_PUB_RTX")||Q("USE_SUB_RTX")){const Z=Gu(O,this.rtpCapabilities.recv.videoCodecs);O.push(...Z)}this._rtpCapabilities.recv.videoCodecs=O;const j=this.localCapabilities.send,q=this.rtpCapabilities.recv,Y=j0(it.VIDEO,q,j,S);return B.forEach(Z=>{const pe=Y.map(he=>he.payloadType.toString(10));k.debug("updateRemoteCodec mid: ".concat(Z.attributes.mid,", from"),Z.attributes.payloads,"to",Y),Z.attributes.payloads=Y,Z.media.fmts=pe}),!0}createOrRecycleSendMedia(m,E,S,R,w){const O=this.rtpCapabilities.send.videoCodecs,H=this._isUseLocalCodecs||O.length===0?this.localCapabilities.recv:this.rtpCapabilities.send,B=m===it.VIDEO?H.videoCodecs:H.audioCodecs,j=m===it.VIDEO?H.videoExtensions:H.audioExtensions;this.currentMidIndex+=1;const q="".concat(this.currentMidIndex);let Y={media:{mediaType:m,port:xS,protos:["UDP","TLS","RTP","SAVPF"],fmts:B.map(pe=>pe.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:j,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:E,ssrcGroups:S,rtcpFeedbackWildcards:[],payloads:B,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:R,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(q)}};Y=this.mungSendMediaDesc(Y,w);const Z=this.findFirstClosedMedia(m);if(Z){const pe=this.sessionDesc.mediaDescriptions.indexOf(Z);this.sessionDesc.mediaDescriptions[pe]=Y}else this.sessionDesc.mediaDescriptions.push(Y);return Y}updateBundleMids(){this.sessionDesc.attributes.groups[0].identificationTag=this.sessionDesc.mediaDescriptions.filter(m=>m.media.port!=="0").map(m=>m.attributes.mid)}mungRecvMediaDsec(m,E,S){const R=vr(m);return XI(R),up(R,E),JI(R,E),e8(R),TS(R,S,this.localCapabilities.send),R}mungSendMediaDesc(m,E){const S=vr(m);return TS(S,E,this.localCapabilities.recv),dp(S),S}updateRecvMedia(m,E){const S=this.sessionDesc.mediaDescriptions.findIndex(R=>R.attributes.mid===m);if(S!==-1){const R=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[S],E);this.sessionDesc.mediaDescriptions[S]=R}}bumpMid(m){this.currentMidIndex+=m}findFirstClosedMedia(m){return this.sessionDesc.mediaDescriptions.find(E=>Or()?E.media.port==="0"&&E.media.mediaType===m:E.media.port==="0")}findPreloadMediaDesc(m){return this.sessionDesc.mediaDescriptions.find(E=>{var S;return((S=E.attributes)===null||S===void 0||(S=S.ssrcs[0])===null||S===void 0?void 0:S.ssrcId)===m[0].ssrcId})}getSSRC(m){var E;return(E=this.sessionDesc.mediaDescriptions.find(S=>S.attributes.mid===m))===null||E===void 0?void 0:E.attributes.ssrcs}}(Dc(Dc({},n),{},{localCapabilities:this.localCapabilities}),this.supportAV1RtpSpec,!(!Q("ENABLE_PRE_SUB_WITH_PRE_PC")||!Q("PRE_USE_LOCAL_CODECS"))&&fI(this.store)),n.preallocation&&(this.isPreallocation=!0),Array.isArray(this.remoteCodecs)&&this.remoteCodecs.length>0&&this.remoteSDP.updateRemoteCodec([],this.remoteCodecs,this.store.codec);const l=this.remoteSDP.toString(),u=i8(this.initialOffer.sdp,this.extension),h=this.logSDPExchange(u||"","offer","local","connect");this.store.descriptionStart(),await this.peerConnection.setLocalDescription({type:"offer",sdp:u}),h==null||h(l),await this.peerConnection.setRemoteDescription({type:"answer",sdp:l});const p=this.peerConnection.getTransceivers()[0];if(p!=null&&p.receiver&&this.tryBindTransportEvents(p.receiver),fI(this.store))if(n.preallocation&&Q("ENABLE_PRE_SUB_WITH_PRE_PC")){const m=Q("PRE_SUB_NUM"),{mids:E,preSSRCs:S}=this.remoteSDP.preloadRemoteMedia(m);await Ku(this.peerConnection,this.remoteSDP,this.extension),k.debug("[".concat(this.store.clientId,"] [P2PConnection] preload media, in pre pc,add preload ssrcs ").concat(S)),this.presetMedia(E,S)}else{const{preSSRCs:m=[]}=n,E=m.map(R=>R.ssrcMsg[0].ssrcId);if(m.length===0)return;const{mids:S}=this.remoteSDP.batchSend(m.map(R=>Object.assign({},R)));await Ku(this.peerConnection,this.remoteSDP,this.extension),k.debug("[P2PConnection.connect] preload media, after join, add preload ssrcs ".concat(E)),this.presetMedia(S,E)}}catch(l){throw new Re(X.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(l.toString()))}var i,a}presetMedia(n,i){n.forEach((a,l)=>{this.peerConnection.getTransceivers().forEach(u=>{if(u.mid!=null&&a===u.mid&&u.receiver.track){const h=u.receiver.track;let p;h.kind==="video"&&Q("ENABLE_PRE_RENDER")&&(p=new wI({trackId:"track-".concat(h.kind,"-unknown-").concat(this.store.clientId,"_").concat(Zn(5,""))},!0),p.updateVideoTrack(h),p.onFirstVideoFrameRender=()=>{var m;const E=this.preMediaMap.get(i[l]);E&&(E.firstVideoRender=Date.now()),(m=this.onFirstVideoRender)===null||m===void 0||m.call(this,i[l])},p.play(this.store.sessionId||void 0)),this.preMediaMap.set(i[l],{mid:a,track:h,player:p,transceiver:u})}}),this.store.peerReceiver()})}checkDtlsParameters(n){return!!this.remoteSDP&&n.length>0&&this.remoteSDP.updateRemoteDtlsParameters(n)}async updateRemoteConnect(n){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.updateRemoteConnect before remote SDP created");let i=!1;const{rtpCapabilities:a}=n;if([,i]=this.remoteSDP.updateRemoteRTPCapabilities(a),Array.isArray(this.remoteCodecs)&&this.remoteCodecs.length>0){const h=this.remoteSDP.updateRemoteCodec([],this.remoteCodecs,this.store.codec);i=i||h}const{preSSRCs:l=[]}=n,u=l.map(h=>h.ssrcMsg[0].ssrcId);if(!this.remoteSDP.checkPreloadSsrcs(u)){const h=[],p=[];if(Array.from(this.preMediaMap.entries()).every(m=>{let[E,{mid:S,player:R,track:w}]=m;return h.push(S),p.push(E),this.preMediaMap.delete(E),R&&R.destroy(),!0}),h.length>0&&(this.remoteSDP.stopSending(h),await Ku(this.peerConnection,this.remoteSDP,this.extension),k.warn("[P2PConnection.updateRemoteConnect] preload media, failed, del preload ssrcs ".concat(p)),ct.reportApiInvoke(this.store.sessionId,{name:Ur.PRELOAD_MEDIA_FAILED,options:[l,p],tag:gr.TRACER}).onSuccess()),l.length>0){const{mids:m}=this.remoteSDP.batchSend(l.map(E=>Object.assign({},E)));await Ku(this.peerConnection,this.remoteSDP,this.extension),k.debug("[P2PConnection.updateRemoteConnect] preload media, after join, add preload ssrcs ".concat(u)),this.presetMedia(m,u)}}i?(await Ku(this.peerConnection,this.remoteSDP,this.extension),k.debug("[P2PConnection] updateRemoteConnect by exchanging SDP.")):k.debug("[P2PConnection] updateRemoteConnect no need to exchange SDP, because no need to update remote codecs (use local codecs)")}catch(i){throw new Re(X.EXCHANGE_SDP_FAILED,"P2PConnection.updateRemoteConnect failed; ".concat(i.toString()))}}send(n,i,a){var l=this;return ss(function*(){const u=yield Tn(l.mutex.lock("From P2PConnection.send"));try{if(!l.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");const h=[],p=yS();n.forEach(j=>{const q=l.peerConnection.addTransceiver(j._mediaStreamTrack,Dc({direction:"sendonly"},j.trackMediaType==="video"&&l.supportAV1RtpSpec&&p?{sendEncodings:[{scalabilityMode:p}]}:{}));h.push(q),j._updateRtpTransceiver(q)}),Or()&&Q("SIMULCAST")===!0&&(yield Tn(l.applySimulcastForFirefox(h,n)));const m=yield Tn(l.peerConnection.createOffer()),E=l.remoteSDP.predictReceivingMids(n.length),S=l.mungSendOfferSDP(m.sdp,n,E),R=sa(S),w=E.map(j=>{const q=R.mediaDescriptions.find(Y=>Y.attributes.mid===j);if(!q)throw new Error("Cannot extract ssrc from mediaDescription.");return J6(q,Q("USE_PUB_RTX"))});let O;try{O=yield w}catch(j){O=[],l.remoteSDP.receive(n,i,a,O);const q=l.remoteSDP.toString();throw yield Tn(l.peerConnection.setLocalDescription({type:"offer",sdp:S})),yield Tn(l.peerConnection.setRemoteDescription({type:"answer",sdp:q})),yield Tn(l.stopSending(E,!0)),j}l.remoteSDP.receive(n,i,a,O);const H=l.remoteSDP.toString(),B=l.logSDPExchange(S,"offer","local","send");return yield Tn(l.peerConnection.setLocalDescription({type:"offer",sdp:S})),yield Tn(l.applySimulcastEncodings(h,n)),yield Tn(l.applySendEncodings(h,n)),B==null||B(H),yield Tn(l.peerConnection.setRemoteDescription({type:"answer",sdp:H})),h.map((j,q)=>{const Y=E[q];return{localSSRC:w[q],id:Y,transceiver:j}})}catch(h){throw h instanceof Re?h:new Re(X.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(h.toString()))}finally{u()}})()}async createDataChannels(n,i){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.createDataChannels before remote SDP created");let a=this.dataStreamChannelMap.get(n);if(a&&a.readyState==="open")k.debug("[P2PConnection] Channels are already available and can be reused directly.");else{const u=this.currentDataChannelId<1023?this.currentDataChannelId++:this.recoveredDataChannelIds.shift();if(typeof u!="number")throw new Error("create DataChannel error, because cannot get dc id");a=this.peerConnection.createDataChannel("datastream-channel",{id:u,negotiated:!0,ordered:!1,maxRetransmits:Q("DATASTREAM_MAX_RETRANSMITS")}),a.binaryType="arraybuffer",this.dataStreamChannelMap.set(n,a)}i.forEach(u=>{u._updateOriginDataChannel(a)});const{needExchangeSDP:l}=this.remoteSDP.sendDataChannel();if(l){const u=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:u});const h=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(h),k.debug("[P2PConnection] createDataChannels by exchanging SDP.")}else k.debug("[P2PConnection] createDataChannels no need to exchange SDP.");return}catch(a){throw a instanceof Re?a:new Re(X.EXCHANGE_SDP_FAILED,"P2PConnection.createDataChannels failed; ".concat(a.toString()))}}async stopDataChannels(n){try{const i=this.dataStreamChannelMap.get(n);return i&&(i.id&&this.recoveredDataChannelIds.push(i.id),i.close()),void this.dataStreamChannelMap.delete(n)}catch(i){throw i instanceof Re?i:new Re(X.DATACHANNEL_FAILED,"P2PConnection.stopDataChannels failed; ".concat(i.toString()))}}async stopSending(n,i){const a=i?void 0:await this.mutex.lock("From P2PConnection.stopSending");try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");const l=this.peerConnection.getTransceivers().filter(m=>n.indexOf(m.mid)!==-1);if(l.length!==n.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.");l.map(m=>{var E;LS(this.id+m.mid,this),m.direction="inactive",(E=m.stop)===null||E===void 0||E.call(m)});const u=await this.peerConnection.createOffer(),h=this.logSDPExchange(u.sdp||"","offer","local","stopSending");await this.peerConnection.setLocalDescription(u),this.remoteSDP.stopReceiving(n);const p=this.remoteSDP.toString();h==null||h(p),await this.peerConnection.setRemoteDescription({type:"answer",sdp:p})}catch(l){throw new Re(X.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(l.toString()))}finally{a&&a()}}async receive(n,i,a,l){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(n," before remoteSDP created."));const{mid:u,needExchangeSDP:h}=this.remoteSDP.send(n,i,a,l);h&&(await Ku(this.peerConnection,this.remoteSDP,this.extension),k.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(n," by exchanging SDP.")));const p=this.peerConnection.getTransceivers().find(m=>m.mid===u);if(!p)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:p.receiver.track,id:u,transceiver:p}}catch(u){throw new Re(X.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(u.toString()))}}async batchReceive(n){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.batchReceive before remoteSDP created.");const{mids:i,needExchangeSDP:a}=this.remoteSDP.batchSend(n);return a&&(await Ku(this.peerConnection,this.remoteSDP,this.extension),k.debug("[".concat(this.store.clientId,"] [P2PConnection] batchReceive by exchanging SDP."))),i.map(l=>{const u=this.peerConnection.getTransceivers().find(h=>h.mid===l);if(!u)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:u.receiver.track,id:l,transceiver:u}})}catch(i){throw new Re(X.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(i.toString()))}}async stopReceiving(n){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");n.forEach(u=>{Array.from(this.preMediaMap.entries()).some(h=>{let[p,{mid:m,player:E}]=h;if(m===u)return this.preMediaMap.delete(p),E&&E.destroy(),!0})}),this.remoteSDP.stopSending(n);const i=this.remoteSDP.toString(),a=this.logSDPExchange(i,"offer","remote","stopReceiving");await this.peerConnection.setRemoteDescription({type:"offer",sdp:i});const l=await this.peerConnection.createAnswer();a==null||a(l.sdp||""),await this.peerConnection.setLocalDescription(l)}catch(i){throw new Re(X.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(i.toString()))}}async muteRemote(n){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteRemote mid=".concat(n," before remote SDP created."));this.remoteSDP.mute(n);const i=this.remoteSDP.toString(),a=this.logSDPExchange(i,"offer","remote","muteRemote");await this.peerConnection.setRemoteDescription({type:"offer",sdp:i});const l=await this.peerConnection.createAnswer();a==null||a(l.sdp||""),await this.peerConnection.setLocalDescription(l)}catch(i){throw new Re(X.EXCHANGE_SDP_FAILED,"P2PConnection.muteRemote failed; ".concat(i.toString()))}}async unmuteRemote(n){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteRemote mid=".concat(n," before remote SDP created."));this.remoteSDP.unmute(n);const i=this.remoteSDP.toString(),a=this.logSDPExchange(i,"offer","remote","unmuteRemote");await this.peerConnection.setRemoteDescription({type:"offer",sdp:i});const l=await this.peerConnection.createAnswer();a==null||a(l.sdp||""),await this.peerConnection.setLocalDescription(l)}catch(i){throw new Re(X.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteRemote failed; ".concat(i.toString()))}}async muteLocal(n){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");const i=this.peerConnection.getTransceivers().filter(h=>h.mid&&n.indexOf(h.mid)!==-1);if(i.length!==n.length)throw new Error("Transceivers' length doesn't match mids' length.");i.map(h=>{h.direction="inactive"});const a=await this.peerConnection.createOffer(),l=this.logSDPExchange(a.sdp||"","offer","local","muteLocal");await this.peerConnection.setLocalDescription(a),this.remoteSDP.muteRemote(n);const u=this.remoteSDP.toString();l==null||l(u),await this.peerConnection.setRemoteDescription({type:"answer",sdp:u})}catch(i){throw new Re(X.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(i.toString()))}}async unmuteLocal(n){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");const i=this.peerConnection.getTransceivers().filter(h=>h.mid&&n.indexOf(h.mid)!==-1);if(i.length!==n.length)throw new Error("Transceivers' length doesn't match mids' length.");i.map(async(h,p)=>{h.direction="sendonly"});const a=await this.peerConnection.createOffer(),l=this.logSDPExchange(a.sdp||"","offer","local","unmuteLocal");await this.peerConnection.setLocalDescription(a),this.remoteSDP.unmuteRemote(n),Array.isArray(this.remoteCodecs)&&this.remoteCodecs.length>0&&this.remoteSDP.updateRemoteCodec(n,this.remoteCodecs,this.store.codec);const u=this.remoteSDP.toString();l==null||l(u),await this.peerConnection.setRemoteDescription({type:"answer",sdp:u})}catch(i){throw new Re(X.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(i.toString()))}}restartICE(n){var i=this;return ss(function*(){const a=yield Tn(i.mutex.lock("From P2PConnection.restartICE"));try{if(!i.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");const l=Rn().supportPCSetConfiguration,u=Q("FORCE_TURN_TCP")||i.forceTurn;if(n===Qi.RELAY&&!l)return;if(l&&!u){const R=n===Qi.RELAY?"relay":"all",w=i.peerConnection.getConfiguration();w.iceTransportPolicy!==R&&(k.debug("[".concat(i.store.clientId,"] restartICE change iceTransportPolicy from [").concat(w.iceTransportPolicy,"] to [").concat(R,"]")),w.iceTransportPolicy=R,i.peerConnection.setConfiguration(w))}i.remoteSDP.updateCandidates(n);const h=yield Tn(i.peerConnection.createOffer({iceRestart:!0}));if(!h.sdp)throw new Error("Cannot restartICE because restart offer SDP does not exist.");const p=Wu(h.sdp),{remoteIceParameters:m}=yield p.iceParameters;i.remoteSDP.restartICE(m);const E=i.remoteSDP.toString(),S=i.logSDPExchange(h.sdp||"","offer","local","restartICE");i.store.descriptionStart(),yield Tn(i.peerConnection.setLocalDescription(h)),S==null||S(E),yield Tn(i.peerConnection.setRemoteDescription({type:"answer",sdp:E}))}catch(l){k.warning("[".concat(i.store.clientId,"] restart ICE failed, abort operation"),l)}finally{a()}})()}async extendCandidate(){if(!this.remoteSDP||this.isFirstConnected)return;const n=await this.mutex.lock("From P2PConnection.extendCandidate");try{this.remoteSDP.updateCandidates(Qi.TCP_RELAY),await Ku(this.peerConnection,this.remoteSDP,this.extension)}catch(i){k.warning("[".concat(this.store.clientId,"] extend candidate failed, abort operation"),i)}finally{n()}}close(){var n;this.peerConnection.getTransceivers().forEach(i=>{LS(this.id+i.mid,this)}),this.preMediaMap.forEach(i=>{let{player:a}=i;a&&a.destroy()}),this.preMediaMap.clear(),this.peerConnection.close(),(n=this.onConnectionStateChange)===null||n===void 0||n.call(this,"closed"),this.tryUnbindTransportEvents(),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.transportEventReceiver=void 0,this.statsFilter.destroy(),this.dataStreamChannelMap.clear(),this.recoveredDataChannelIds=[],this.currentDataChannelId=1}getStats(){return Dc(Dc({},this.statsFilter.getStats()),{},{qualityLimitationReason:this.qualityLimitationReason})}getRemoteVideoIsReady(n){return this.statsFilter.getVideoIsReady(n)}async updateEncoderConfig(n,i){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");const a=await this.peerConnection.createOffer(),l=this.mungSendOfferSDP(a.sdp,[i],[n]);this.remoteSDP.updateRecvMedia(n,i);const u=this.remoteSDP.toString(),h=this.logSDPExchange(l,"offer","local","updateEncoderConfig");await this.peerConnection.setLocalDescription({type:"offer",sdp:l}),h==null||h(u),await this.peerConnection.setRemoteDescription({type:"answer",sdp:u})}catch(a){throw new Re(X.EXCHANGE_SDP_FAILED,a.toString())}}async updateSendParameters(n,i){const a=this.peerConnection.getTransceivers().filter(l=>l.mid===n);a.length===1&&(this.isVP8Simulcast(i)?Or()||await this.applySimulcastEncodings(a,[i]):await this.applySendEncodings(a,[i]))}setStatsRemoteVideoIsReady(n,i){this.statsFilter.setVideoIsReady2(n,i)}async replaceTrack(n,i){const a=this.peerConnection.getTransceivers().find(l=>l.mid===i);a&&await a.sender.replaceTrack(n._mediaStreamTrack)}async getSelectedCandidatePair(){const n=this.peerConnection.getReceivers();if(n.length>0&&n[0].transport&&n[0].transport.iceTransport&&n[0].transport.iceTransport.getSelectedCandidatePair&&n[0].transport.iceTransport.getSelectedCandidatePair()){const i=n[0].transport.iceTransport,{local:a,remote:l}=i.getSelectedCandidatePair();return{local:Dc(Dc({},dl),{},{candidateType:a.type,protocol:a.protocol,address:a.address,port:a.port}),remote:Dc(Dc({},dl),{},{candidateType:l.type,protocol:l.protocol,address:l.address,port:l.port})}}return this.statsFilter.getSelectedCandidatePair()}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var n;(n=this.onICEConnectionStateChange)===null||n===void 0||n.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var n;this.peerConnection.connectionState==="connected"&&(this.isFirstConnected=!0),(n=this.onConnectionStateChange)===null||n===void 0||n.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidateerror=n=>{if(n&&(n.errorCode||n.errorText)){var i;const a="code: ".concat(n.errorCode,", message: ").concat(n.errorText),l=n.port?"local: ".concat(n.port):"",u=ch(n.url||"");k.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICECandidateError(").concat(a,"), url: ").concat(u||"",", host_candidate:").concat(l)),(i=this.onICECandidateError)===null||i===void 0||i.call(this,a)}},this.peerConnection.onicegatheringstatechange=n=>{n&&n.target&&"iceGatheringState"in n.target&&k.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] RTCPeerConnection.onicegatheringstatechange(").concat(n.target.iceGatheringState,")"))},this.peerConnection.onicecandidate=n=>{n.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,k.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},setTimeout(()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,k.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))},Q("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(n){const i={iceServers:[]},a=n.cloudProxyServer||"disabled";return n.iceServers?i.iceServers=n.iceServers:n.turnServer&&(T0(n.turnServer.servers)?i.iceServers=n.turnServer.servers:Q("NEW_TURN_MODE")&&i.iceServers&&a==="disabled"?(Q("USE_TURN_SERVER_OF_GATEWAY")?n.turnServer.serversFromGateway&&i.iceServers.push(...Th.newTurnServerConfigToIceServers(n.turnServer.serversFromGateway)):i.iceServers.push(...Th.newTurnServerConfigToIceServers(n.turnServer.servers)),Q("NEW_FORCE_TURN")&&(i.iceTransportPolicy="relay")):n.turnServer.mode!=="off"&&(i.iceServers&&i.iceServers.push(...Th.turnServerConfigToIceServers(n.turnServer.servers)),Q("USE_TURN_SERVER_OF_GATEWAY")&&i.iceServers&&n.turnServer.serversFromGateway&&i.iceServers.push(...Th.turnServerConfigToIceServers(n.turnServer.serversFromGateway)),Q("FORCE_TURN_TCP")?i.iceTransportPolicy="relay":n.turnServer.servers.concat(n.turnServer.serversFromGateway||[]).forEach(l=>{l.forceturn&&(i.iceTransportPolicy="relay")}))),Q("ENABLE_ENCODED_TRANSFORM")&&Rn().supportWebRTCEncodedTransform&&(i.encodedInsertableStreams=!0),i}static turnServerConfigToIceServers(n){const i=[];return n.forEach(a=>{a.security?a.tcpport&&i.push({username:a.username,credential:a.password,credentialType:"password",urls:"turns:".concat(Hu(a.turnServerURL),":").concat(a.tcpport,"?transport=tcp")}):(a.udpport&&!Q("FORCE_TURN_TCP")&&i.push({username:a.username,credential:a.password,credentialType:"password",urls:"turn:".concat(a.turnServerURL,":").concat(a.udpport,"?transport=udp")}),a.tcpport&&i.push({username:a.username,credential:a.password,credentialType:"password",urls:"turn:".concat(a.turnServerURL,":").concat(a.tcpport,"?transport=tcp")}))}),i}static newTurnServerConfigToIceServers(n){const i=[];return n.forEach(a=>{const l=Q("NEW_TURN_MODE");l===1?i.push({username:a.username,credential:a.password,credentialType:"password",urls:"turn:".concat(a.turnServerURL,":3478?transport=udp")}):l===2?i.push({username:a.username,credential:a.password,credentialType:"password",urls:"turn:".concat(a.turnServerURL,":3478?transport=tcp")}):l===3?i.push({username:a.username,credential:a.password,credentialType:"password",urls:"turns:".concat(Hu(a.turnServerURL),":443?transport=tcp")}):l===4&&(i.push({username:a.username,credential:a.password,credentialType:"password",urls:"turn:".concat(a.turnServerURL,":3478?transport=udp")}),i.push({username:a.username,credential:a.password,credentialType:"password",urls:"turn:".concat(a.turnServerURL,":3478?transport=tcp")}),i.push({username:a.username,credential:a.password,credentialType:"password",urls:"turns:".concat(Hu(a.turnServerURL),":443?transport=tcp")}))}),i}tryBindTransportEvents(n){const i=n.transport;if(i){this.transportEventReceiver=n,i.onstatechange=()=>{var l;i!=null&&i.state&&((l=this.onDTLSTransportStateChange)===null||l===void 0||l.call(this,i.state))},i.onerror=l=>{var u;(u=this.onDTLSTransportError)===null||u===void 0||u.call(this,"error"in l?l.error:l)};const a=i.iceTransport;a&&(a.onstatechange=()=>{const l=i==null?void 0:i.iceTransport.state;var u;l&&((u=this.onICETransportStateChange)===null||u===void 0||u.call(this,l))},a.getSelectedCandidatePair&&(a.onselectedcandidatepairchange=()=>{if(a.getSelectedCandidatePair()){const{local:l,remote:u}=a.getSelectedCandidatePair()||{};if(l&&u){const h=l.address+":"+l.port,p=u.address+":"+u.port;k.info("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] selectedcandidatepairchange: local ").concat(JSON.stringify(ch(h)),", remote ").concat(JSON.stringify(ch(p))))}}}))}}tryUnbindTransportEvents(){this.transportEventReceiver&&this.transportEventReceiver.transport&&(this.transportEventReceiver.transport.onstatechange=null,this.transportEventReceiver.transport.onerror=null,this.transportEventReceiver.transport.iceTransport&&(this.transportEventReceiver.transport.iceTransport.onstatechange=null))}async updateRtpSenderEncodings(n,i){var a,l;if(i||(i=this.peerConnection.getSenders().find(j=>j.track===n._mediaStreamTrack)),!i)return k.warn("[".concat(n.getTrackId(),"] no rtpSender found}"));if(this.isVP8Simulcast(n))return k.warn("[updateRtpSenderEncodings] Track is VP8 simulcast, please apply simulcast encodings");if(!Rn().supportSetRtpSenderParameters)return k.warn("[updateRtpSenderEncodings] Browser not support set rtp-sender parameters");const u={},h={};switch(n._optimizationMode){case"motion":u.degradationPreference="maintain-framerate";break;case"detail":u.degradationPreference="maintain-resolution";break;case"balanced":u.degradationPreference="balanced"}const p=function(B,j){return B.getTransceivers().find(q=>q.sender.track===j||q.receiver.track===j)}(this.peerConnection,n._mediaStreamTrack),m=gfe(n);if(function(B){var j;return!(!Q("ENABLE_AG_ADAPTATION")||!(B instanceof iS||Ge(j=B._hints).call(j,qn.CUSTOM_TRACK))||!Q("FORCE_SUPPORT_AG_ADAPTATION")&&!(I3(14,0,!1)&&A3(17,4,!0)||w3(14)&&$w(17,4,!0)))}(n)&&p&&i&&m&&this.getLocalVideoStats&&Ge(a=["vp8","vp9"]).call(a,this.store.codec)){var E;const B=u.degradationPreference||(Ge(E=n._hints).call(E,qn.CUSTOM_TRACK)?Q("CUSTOM_ADAPTATION_DEFAULT_MODE"):"maintain-framerate");(function(j,q,Y,Z,pe,he){if(LS(j,Y),pe(q),Z!=="balanced"&&Z!=="maintain-framerate"&&Z!=="maintain-resolution")return;let re=-1;x8(j,q);const Se=window.setInterval(()=>{const Ne=DS.get(j);if(!Q("ENABLE_AG_ADAPTATION")||!Ne)return LS(j,Y),void pe(q);const Be=he();if(Be.sendPackets>0&&Be.OutgoingAvailableBandwidth>0){if(re===-1)return void(re=Date.now());if(Date.now()-re<1e3)return;const nn=Be.sendFrameRate,sn=Be.OutgoingAvailableBandwidth,[Lt,kn]=Ope(j,nn,sn,Ne.adaptationConfig,q,Z);kn&&(Y.qualityLimitationReason=kn),Lt&&Ne.adaptationConfig.scale!==Lt.scale&&(k.debug("[".concat(j,"] applyAdaptation: ").concat(Y.qualityLimitationReason,`
           sendFps `).concat(nn,", bwe ").concat(sn,", switch from ").concat(Ne.adaptationConfig.scale," to ").concat(Lt.scale," ")),Ne.adaptationConfig=dA(dA({},Ne.adaptationConfig),Lt),pe(Lt))}},Q("CHECK_LOCAL_STATS_INTERVAL")),Ae=dA({},q);DS.set(j,{timer:Se,adaptationConfig:Ae,originConfig:q,adaptationFunc:pe}),k.debug("[".concat(j,"] start adaptation, originConfig: ").concat(JSON.stringify(q),", degradationPreference: ").concat(Z))})(this.id+p.mid,m,this,B,j=>{i&&this.updateAdaptation(i,j)},this.getLocalVideoStats.bind(this))}if(n._encoderConfig){var S;const{bitrateMax:B,frameRate:j,scaleResolutionDownBy:q}=n._encoderConfig;B&&(h.maxBitrate=1e3*B),(Ge(S=n._hints).call(S,qn.LOW_STREAM)||n.isUseScaleResolutionDownBy)&&(j&&(h.maxFramerate=Ia(j)),q&&q>=1&&(h.scaleResolutionDownBy=q))}const{maxFramerate:R}=Q("ENCODER_CONFIG_LIMIT");if(R&&typeof R=="number"&&(h.maxFramerate=h.maxFramerate?Math.min(h.maxFramerate,R):R),Q("DSCP_TYPE")&&Gl()){var w;const B=Q("DSCP_TYPE");Ge(w=["very-low","low","medium","high"]).call(w,B)&&(h.networkPriority=B)}const O=i.getParameters(),H=(l=O.encodings)===null||l===void 0?void 0:l[0];Or()&&!H&&(u.encodings=[h]),H&&Object.assign(H,h),Object.assign(O,u),k.debug("[".concat(n.getTrackId(),"] updateRtpSenderEncodings: ").concat(JSON.stringify(O.encodings))),await i.setParameters(O),await async function(B,j,q){try{var Y;if(!Rn().supportSetRtpSenderParameters||!function(Se){return Se==="vp9"||Se==="av1"}(B)||!Q("ENABLE_SVC"))return;const Z={},pe={},he=j.getParameters(),re=(Y=he.encodings)===null||Y===void 0?void 0:Y[0];pe.scalabilityMode=yS(q),re&&Object.assign(re,pe),Object.assign(he,Z),await j.setParameters(he),k.debug("[updateAdaptation] updateRtpSenderEncodings scalabilityMode success: ".concat(JSON.stringify(he.encodings)))}catch(Z){k.debug("[updateAdaptation] updateRtpSenderEncodings scalabilityMode failed",Z)}}(this.store.codec,i,Q("SVC_MODE"))}async updateAdaptation(n,i){var a,l;if(!n)return k.debug("[updateAdaptation] no rtpSender found");if(!Rn().supportSetRtpSenderParameters)return k.debug("[updateAdaptation] Browser not support set rtp-sender parameters");const u={},{bitrateMax:h,frameRate:p,scaleResolutionDownBy:m}=i;h&&(u.maxBitrate=1e3*h),p&&(u.maxFramerate=Ia(p)),m&&m>=1&&Ge(a=["vp8","vp9"]).call(a,this.store.codec)&&(u.scaleResolutionDownBy=m);const E=n.getParameters(),S=(l=E.encodings)===null||l===void 0?void 0:l[0];S&&Object.assign(S,u),Object.assign(E,{});try{await n.setParameters(E),k.debug("[updateAdaptation] updateRtpSenderEncodings: ".concat(JSON.stringify(E.encodings)))}catch(R){!("transport"in n)||n.transport&&n.transport.state==="connected"?this.peerConnectionState!=="connected"?k.debug("[updateAdaptation] peerConnection not connected}"):k.debug("[updateAdaptation] updateRtpSenderEncodings failed",R):k.debug("[updateAdaptation] rtpSender transport not connected}")}}async applySendEncodings(n,i){try{if(!Rn().supportSetRtpSenderParameters||n.length!==i.length)return;for(let a=0;a<n.length;a++){const l=n[a],u=i[a];u instanceof sr&&!this.isVP8Simulcast(u)&&await this.updateRtpSenderEncodings(u,l.sender)}}catch{k.debug("[".concat(this.store.clientId,"] Apply RTPSendEncodings failed."))}}mungSendOfferSDP(n,i,a){const l=sa(n);return i.forEach((u,h)=>{const p=a[h],m=l.mediaDescriptions.find(E=>E.attributes.mid===p);m&&(up(m,u),t8(m,u,this.store.codec))}),Bu(l)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=n=>{var i;(i=this.onFirstAudioReceived)===null||i===void 0||i.call(this,n)},this.statsFilter.onFirstVideoReceived=n=>{var i;(i=this.onFirstVideoReceived)===null||i===void 0||i.call(this,n)},this.statsFilter.onFirstAudioDecoded=n=>{var i;(i=this.onFirstAudioDecoded)===null||i===void 0||i.call(this,n)},this.statsFilter.onFirstVideoDecoded=(n,i,a)=>{var l;(l=this.onFirstVideoDecoded)===null||l===void 0||l.call(this,n,i,a)},this.statsFilter.onSelectedLocalCandidateChanged=(n,i)=>{var a;(a=this.onSelectedLocalCandidateChanged)===null||a===void 0||a.call(this,n,i)},this.statsFilter.onSelectedRemoteCandidateChanged=(n,i)=>{var a;(a=this.onSelectedRemoteCandidateChanged)===null||a===void 0||a.call(this,n,i)},this.statsFilter.onFirstVideoDecodedTimeout=n=>{var i;(i=this.onFirstVideoDecodedTimeout)===null||i===void 0||i.call(this,n)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0,this.statsFilter.onFirstVideoDecodedTimeout=void 0}async applySimulcastForFirefox(n,i){if(n.length===i.length)for(let m=0;m<n.length;m++){var a,l,u,h,p;const E=n[m],S=i[m];if(S instanceof sr&&!Ge(a=S._hints).call(a,qn.LOW_STREAM)&&(l=S._encoderConfig)!==null&&l!==void 0&&l.bitrateMax&&((u=S._encoderConfig)===null||u===void 0?void 0:u.bitrateMax)>200&&(h=S._scalabilityMode)!==null&&h!==void 0&&h.numSpatialLayers&&((p=S._scalabilityMode)===null||p===void 0?void 0:p.numSpatialLayers)>1&&this.store.codec==="vp8"){const R={},w={high:1e3*(S._encoderConfig.bitrateMax-50),medium:5e4};R.encodings=[{rid:"m",active:!0,maxBitrate:w.medium,scaleResolutionDownBy:4},{rid:"h",active:!0,maxBitrate:w.high}];const O=E.sender.getParameters();await E.sender.setParameters(Object.assign(O,R))}}}async applySimulcastEncodings(n,i){if(!Or()&&n.length===i.length)for(let a=0;a<n.length;a++){const l=i[a];if(l instanceof sr&&this.isVP8Simulcast(l)){const u=n[a],h={},p={high:1e3*(l._encoderConfig.bitrateMax-50),medium:5e4};h.encodings=[{active:!0,adaptivePtime:!1,networkPriority:"high",priority:"high",maxBitrate:p.high},{active:!0,adaptivePtime:!1,networkPriority:"low",priority:"low",maxBitrate:p.medium,scaleResolutionDownBy:4}];const m=u.sender.getParameters();await u.sender.setParameters(Object.assign(m,h))}}}isVP8Simulcast(n){var i,a,l,u,h;return!!(n instanceof sr&&Q("SIMULCAST")&&this.store.codec==="vp8"&&!Ge(i=n._hints).call(i,qn.LOW_STREAM)&&(a=n._encoderConfig)!==null&&a!==void 0&&a.bitrateMax&&((l=n._encoderConfig)===null||l===void 0?void 0:l.bitrateMax)>200&&(u=n._scalabilityMode)!==null&&u!==void 0&&u.numSpatialLayers&&((h=n._scalabilityMode)===null||h===void 0?void 0:h.numSpatialLayers)>1)}logSDPExchange(n,i,a,l){if(Q("SDP_LOGGING"))return k.upload("[".concat(this.store.clientId,"] exchanging ").concat(a," ").concat(i," SDP during P2PConnection.").concat(l,`
`),n),i==="offer"?u=>{this.logSDPExchange(u,"answer",a==="local"?"remote":"local",l)}:void 0}async getRemoteSSRC(n){if(!this.remoteSDP)return;const i=this.remoteSDP.getSSRC(n);return i&&i.length!==0?i[0].ssrcId:void 0}setConfiguration(n){if(Rn().supportPCSetConfiguration){const i=Th.resolvePCConfiguration(n);this.peerConnection.setConfiguration(i)}n.isPreallocation&&(this.isPreallocation=!0)}},st(Cn.prototype,"updateRemoteRTPCapabilities",[Xo],Object.getOwnPropertyDescriptor(Cn.prototype,"updateRemoteRTPCapabilities"),Cn.prototype),st(Cn.prototype,"connect",[Xo],Object.getOwnPropertyDescriptor(Cn.prototype,"connect"),Cn.prototype),st(Cn.prototype,"updateRemoteConnect",[Xo],Object.getOwnPropertyDescriptor(Cn.prototype,"updateRemoteConnect"),Cn.prototype),st(Cn.prototype,"createDataChannels",[Xo],Object.getOwnPropertyDescriptor(Cn.prototype,"createDataChannels"),Cn.prototype),st(Cn.prototype,"receive",[Xo],Object.getOwnPropertyDescriptor(Cn.prototype,"receive"),Cn.prototype),st(Cn.prototype,"batchReceive",[Xo],Object.getOwnPropertyDescriptor(Cn.prototype,"batchReceive"),Cn.prototype),st(Cn.prototype,"stopReceiving",[Xo],Object.getOwnPropertyDescriptor(Cn.prototype,"stopReceiving"),Cn.prototype),st(Cn.prototype,"muteRemote",[Xo],Object.getOwnPropertyDescriptor(Cn.prototype,"muteRemote"),Cn.prototype),st(Cn.prototype,"unmuteRemote",[Xo],Object.getOwnPropertyDescriptor(Cn.prototype,"unmuteRemote"),Cn.prototype),st(Cn.prototype,"muteLocal",[Xo],Object.getOwnPropertyDescriptor(Cn.prototype,"muteLocal"),Cn.prototype),st(Cn.prototype,"unmuteLocal",[Xo],Object.getOwnPropertyDescriptor(Cn.prototype,"unmuteLocal"),Cn.prototype),st(Cn.prototype,"close",[Xo],Object.getOwnPropertyDescriptor(Cn.prototype,"close"),Cn.prototype),st(Cn.prototype,"updateEncoderConfig",[Xo],Object.getOwnPropertyDescriptor(Cn.prototype,"updateEncoderConfig"),Cn.prototype),st(Cn.prototype,"updateSendParameters",[Xo],Object.getOwnPropertyDescriptor(Cn.prototype,"updateSendParameters"),Cn.prototype),st(Cn.prototype,"replaceTrack",[Xo],Object.getOwnPropertyDescriptor(Cn.prototype,"replaceTrack"),Cn.prototype),st(Cn.prototype,"updateAdaptation",[Xo],Object.getOwnPropertyDescriptor(Cn.prototype,"updateAdaptation"),Cn.prototype),st(Cn.prototype,"getRemoteSSRC",[Xo],Object.getOwnPropertyDescriptor(Cn.prototype,"getRemoteSSRC"),Cn.prototype),Cn);function Xo(e,n,i){const a=e[n];if(typeof a!="function")throw new Error("Cannot use mutex on object property.");return i.value=async function(){const l=this.mutex,u=await l.lock("From P2PConnection.".concat(n));try{for(var h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];return await a.apply(this,p)}finally{u()}},i}function mA(e,n){let i=document.createElement("video"),a=document.createElement("canvas");i.setAttribute("style","display:none"),a.setAttribute("style","display:none"),i.setAttribute("muted",""),i.muted=!0,i.setAttribute("autoplay",""),i.autoplay=!0,i.setAttribute("playsinline",""),a.width=Ia(n.width),a.height=Ia(n.height);const l=Ia(n.framerate||15);document.body.append(i),document.body.append(a);let u=e._mediaStreamTrack;i.srcObject=new MediaStream([u]),i.play();const h=a.getContext("2d");if(!h)throw new Ce(X.UNEXPECTED_ERROR,"can not get canvas context");const p=Rn(),m=a.captureStream(p.supportRequestFrame?0:l).getVideoTracks()[0];m.canvas||(m.canvas=a),a.startCapture=()=>{if(!i)return a.stopCapture&&a.stopCapture();if(i.paused&&i.play(),i.videoHeight>2&&i.videoWidth>2){const S=i.videoWidth,R=i.videoHeight/S,w=a.width*R;Math.abs(w-a.height)>=2&&(k.debug("adjust low stream resolution","".concat(a.width,"x").concat(a.height," -> ").concat(a.width,"x").concat(w)),a.height=w)}h.drawImage(i,0,0,a.width,a.height),m.requestFrame&&m.requestFrame(),u!==e._mediaStreamTrack&&(u=e._mediaStreamTrack,i.srcObject=new MediaStream([u]))},a.stopCapture=SI(()=>a.startCapture&&a.startCapture(),l);const E=m.stop;return m.stop=()=>{E.call(m),i&&(i.remove(),i.srcObject=null,i=null),a&&(a.width=0,a.remove(),a.stopCapture&&a.stopCapture(),a.startCapture=void 0,a.stopCapture=void 0,a=null),k.debug("clean low stream renderer")},m}var k8=function(e){return e[e.Video_Send_Type=190]="Video_Send_Type",e}(k8||{}),Lc=function(e){return e[e.Video_Send_Qp_Sum=2143]="Video_Send_Qp_Sum",e[e.Video_Send_Freeze=2082]="Video_Send_Freeze",e[e.Video_Recv_Qp_Sum=2144]="Video_Recv_Qp_Sum",e[e.Video_Recv_Freeze=2084]="Video_Recv_Freeze",e[e.Video_Render_Freeze_Time=2109]="Video_Render_Freeze_Time",e[e.Video_Render_Freeze_Time_Render=2147]="Video_Render_Freeze_Time_Render",e[e.Video_Render_Freeze_Time_Render2=2223]="Video_Render_Freeze_Time_Render2",e[e.Audio_Recv_Freeze=2083]="Audio_Recv_Freeze",e}(Lc||{}),Ht=function(e){return e[e.Video_Send_Retransmit=2062]="Video_Send_Retransmit",e[e.Video_Send_Target_Encoded=2064]="Video_Send_Target_Encoded",e[e.Video_Send_Actual_Encoded=2060]="Video_Send_Actual_Encoded",e[e.Video_Send_Transmit=2066]="Video_Send_Transmit",e[e.Video_Send_Bandwidth=2061]="Video_Send_Bandwidth",e[e.Video_Capture_Height=2033]="Video_Capture_Height",e[e.Video_Capture_Width=2035]="Video_Capture_Width",e[e.Video_Capture_Frame_Rate=2034]="Video_Capture_Frame_Rate",e[e.Video_Send_Low_Height=2073]="Video_Send_Low_Height",e[e.Video_Send_Low_Frame_Rate=2075]="Video_Send_Low_Frame_Rate",e[e.Video_Send_Low_Width=2077]="Video_Send_Low_Width",e[e.Video_Send_Low_Bitrate=2069]="Video_Send_Low_Bitrate",e[e.Video_Send_Low_Package_Lost=2070]="Video_Send_Low_Package_Lost",e[e.Video_Send_Low_Package_Rate=2071]="Video_Send_Low_Package_Rate",e[e.Video_Send_Frame_Rate=2002]="Video_Send_Frame_Rate",e[e.Video_Send_Width=2003]="Video_Send_Width",e[e.Video_Send_Height=2004]="Video_Send_Height",e[e.Video_Send_Disabled=2095]="Video_Send_Disabled",e[e.Video_Send_Adaptation=2032]="Video_Send_Adaptation",e[e.Video_Send_Player_Status=2128]="Video_Send_Player_Status",e[e.Video_Send_Nacks=2009]="Video_Send_Nacks",e[e.Video_Send_Plis=2010]="Video_Send_Plis",e[e.Video_Send_Firs=2011]="Video_Send_Firs",e[e.Video_Send_Avg_Encode=2007]="Video_Send_Avg_Encode",e[e.Video_Send_Huge_Frame_Sent=2174]="Video_Send_Huge_Frame_Sent",e[e.Video_Send_Bytes_Retransmit=2173]="Video_Send_Bytes_Retransmit",e[e.Video_Send_Packages_Retransmit=2172]="Video_Send_Packages_Retransmit",e[e.Video_Send_Key_Frames_Encoded=2207]="Video_Send_Key_Frames_Encoded",e[e.Video_Send_Bitrate=2012]="Video_Send_Bitrate",e[e.Video_Send_Package_Rate=2031]="Video_Send_Package_Rate",e[e.Video_Send_Package_Lost=2005]="Video_Send_Package_Lost",e[e.Audio_Capture_PCM_Level=2104]="Audio_Capture_PCM_Level",e[e.Audio_Send_Level=2038]="Audio_Send_Level",e[e.Audio_Send_Bitrate=2039]="Audio_Send_Bitrate",e[e.Audio_Send_Package_Rate=2040]="Audio_Send_Package_Rate",e[e.Audio_Send_AEC_Return_Loss=2041]="Audio_Send_AEC_Return_Loss",e[e.Audio_Send_AEC_Return_Loss_Enhancement=2042]="Audio_Send_AEC_Return_Loss_Enhancement",e[e.Audio_Send_Freeze=2081]="Audio_Send_Freeze",e[e.Audio_Send_Disabled=2096]="Audio_Send_Disabled",e[e.Audio_Send_Bytes_Retransmit=2179]="Audio_Send_Bytes_Retransmit",e[e.Audio_Send_Packages_Retransmit=2180]="Audio_Send_Packages_Retransmit",e[e.Video_Recv_Height=2019]="Video_Recv_Height",e[e.Video_Recv_Width=2018]="Video_Recv_Width",e[e.Video_Recv_Frame_Rate_Output=2155]="Video_Recv_Frame_Rate_Output",e[e.Video_Recv_Jitter_Buffer=2023]="Video_Recv_Jitter_Buffer",e[e.Video_Recv_Current_Delay=2024]="Video_Recv_Current_Delay",e[e.Video_Recv_Nacks=2026]="Video_Recv_Nacks",e[e.Video_Recv_Plis=2027]="Video_Recv_Plis",e[e.Video_Recv_Firs=2028]="Video_Recv_Firs",e[e.Video_Recv_Disabled=2101]="Video_Recv_Disabled",e[e.Video_Recv_Player_Status=2129]="Video_Recv_Player_Status",e[e.Video_Recv_I_Frame_Delay=2149]="Video_Recv_I_Frame_Delay",e[e.Video_Render_Frame_Rate_Render=2022]="Video_Render_Frame_Rate_Render",e[e.Video_Render_Freeze_Duration=2156]="Video_Render_Freeze_Duration",e[e.Audio_Render_Level=2043]="Audio_Render_Level",e[e.Audio_Render_Freeze_Time_80ms=2226]="Audio_Render_Freeze_Time_80ms",e[e.Audio_Render_Freeze_Time_200ms=2227]="Audio_Render_Freeze_Time_200ms",e[e.Audio_Render_Freeze_Samples_80ms=2228]="Audio_Render_Freeze_Samples_80ms",e[e.Audio_Render_Freeze_Samples_200ms=2229]="Audio_Render_Freeze_Samples_200ms",e[e.Audio_Recv_PCM_Level=2105]="Audio_Recv_PCM_Level",e[e.Audio_Recv_Disabled=2102]="Audio_Recv_Disabled",e[e.Audio_Recv_Jitter_Buffer=2054]="Audio_Recv_Jitter_Buffer",e[e.Audio_Recv_Current_Delay=2047]="Audio_Recv_Current_Delay",e[e.Audio_Recv_Player_Status=2130]="Audio_Recv_Player_Status",e[e.Audio_Recv_Bitrate=2044]="Audio_Recv_Bitrate",e[e.Audio_Recv_Concealed_Samples=2148]="Audio_Recv_Concealed_Samples",e[e.Audio_Recv_Total_Samples_Received=2224]="Audio_Recv_Total_Samples_Received",e}(Ht||{}),ki=function(e){return e[e.Video_Render_Frame_Rate_Decode=2021]="Video_Render_Frame_Rate_Decode",e[e.Video_Recv_Frame_Rate=2020]="Video_Recv_Frame_Rate",e[e.Video_Recv_Frame_Dropped=2181]="Video_Recv_Frame_Dropped",e[e.Video_Recv_Bytes_Retransmit=2175]="Video_Recv_Bytes_Retransmit",e[e.Video_Recv_Packages_Retransmit=2176]="Video_Recv_Packages_Retransmit",e[e.Video_Recv_Packages_Discarded=2198]="Video_Recv_Packages_Discarded",e[e.Video_Recv_Avg_Decode=2200]="Video_Recv_Avg_Decode",e[e.Video_Recv_Avg_Processing_Delay=2202]="Video_Recv_Avg_Processing_Delay",e[e.Video_Recv_Avg_Assembly_Time=2203]="Video_Recv_Avg_Assembly_Time",e[e.Video_Recv_Avg_Inter_Frame_Delay=2204]="Video_Recv_Avg_Inter_Frame_Delay",e[e.Video_Recv_Key_Frames_Decoded=2206]="Video_Recv_Key_Frames_Decoded",e[e.Video_Recv_Package_Lost=2014]="Video_Recv_Package_Lost",e[e.Video_Recv_Bitrate=2029]="Video_Recv_Bitrate",e[e.Video_Recv_Package_Rate=2078]="Video_Recv_Package_Rate",e[e.Audio_Recv_Jitter=2055]="Audio_Recv_Jitter",e[e.Audio_Recv_Bytes_Retransmit=2178]="Audio_Recv_Bytes_Retransmit",e[e.Audio_Recv_Packages_Retransmit=2177]="Audio_Recv_Packages_Retransmit",e[e.Audio_Recv_Packages_Discarded=2199]="Audio_Recv_Packages_Discarded",e[e.Audio_Recv_Avg_Processing_Delay=2201]="Audio_Recv_Avg_Processing_Delay",e[e.Audio_Recv_Package_Rate=2046]="Audio_Recv_Package_Rate",e[e.Audio_Recv_Package_Lost=2045]="Audio_Recv_Package_Lost",e}(ki||{}),Jo=function(e){return e[e.RTT=2006]="RTT",e[e.CONN_TYPE=801]="CONN_TYPE",e[e.STATS_UPDATE_INTERVAL=2205]="STATS_UPDATE_INTERVAL",e}(Jo||{}),MS=function(e){return e[e.RTC_PEER_CONNECTION_STATE=2219]="RTC_PEER_CONNECTION_STATE",e}(MS||{});const uh=1e3,FS=6,W0=3,Ppe=Math.max(FS,W0,60);function wt(e,n,i){i!=null&&Number.isFinite(i)&&(e[n]=Math.round(Math.max(0,i)))}function M8(e){const n={[Jo.CONN_TYPE]:0,[Jo.RTT]:e.rtt,[Jo.STATS_UPDATE_INTERVAL]:e.updateInterval?Math.round(Math.max(0,e.updateInterval)):void 0};switch(e.selectedCandidatePair.localCandidate.candidateType){case"relay":{const i=e.selectedCandidatePair.localCandidate.relayProtocol;i==="udp"&&(n[Jo.CONN_TYPE]=1),i==="tcp"&&(n[Jo.CONN_TYPE]=3),i==="tls"&&(n[Jo.CONN_TYPE]=4);break}case"srflx":n[Jo.CONN_TYPE]=2;break;case"unknown":n[Jo.CONN_TYPE]=5;break;default:n[Jo.CONN_TYPE]=0}return n}function F8(e){let n=0;switch(e){case"none":n=0;break;case"cpu":n=1;break;case"bandwidth":n=2;break;case"other":n=3}return n}class U8 extends br{constructor(n){super(),W(this,"store",void 0),W(this,"uploadWRTCStatsTimer",void 0),W(this,"uploadOutboundDenoiserStatsTimer",void 0),W(this,"uploadExtStatsTimer",void 0),W(this,"uploadExtUsageStatsTimer",void 0),W(this,"uploadInboundExtStatsTimer",void 0),W(this,"requestStats",void 0),W(this,"requestTransportStats",void 0),W(this,"requestLocalMedia",void 0),W(this,"requestRemoteMedia",void 0),W(this,"requestAllTracks",void 0),W(this,"requestVideoIsReady",void 0),W(this,"requestUploadStats",void 0),W(this,"requestUpload",void 0),W(this,"uploadOutboundStarted",!1),W(this,"uploadInboundStarted",!1),W(this,"uploadTransportStarted",!1),W(this,"uploadBaseStatsStarted",!1),W(this,"uploadExtensionUsageStarted",!1),W(this,"lastRecvStats",void 0),W(this,"lastSendStats",void 0),W(this,"lastRefRecvStats",void 0),W(this,"lastRefSendStats",void 0),W(this,"lastNormalRecvStats",void 0),W(this,"lastNormalSendStats",void 0),W(this,"lastExtendStats",{}),W(this,"needUploadStats",{}),W(this,"needUploadRenderFreezeTime",!0),W(this,"lastUploadCompensateTime",-1),W(this,"uploadCompensateDeltaTime",0),this.store=n}uploadWRTCStats(n){if(!this.requestStats||!this.requestUploadStats)return;const i=n%W0==0,a=n%FS==0,l=n%60==0;let u,h;if(this.uploadTransportStarted&&(u=this.requestStats(),this.store.useP2P&&(h=this.requestStats(!0))),!u&&this.uploadOutboundStarted&&(u=this.requestStats()),!h&&this.uploadInboundStarted&&(h=this.requestStats(!0)),u||h){var p;const m={};if(this.uploadTransportStarted&&u){const S=this.getTransportStats(u,h,i);S&&(m.misc=[S])}if(this.uploadOutboundStarted&&u){const S=this.getOutboundStats(u,a?this.lastNormalSendStats:void 0,i?this.lastRefSendStats:void 0,this.lastSendStats,l);S&&(m.outbound=[S])}if(this.uploadInboundStarted&&h){this.uploadCompensateStats(n);const S=this.getInboundStats(h,a?this.lastNormalRecvStats:void 0,i?this.lastRefRecvStats:void 0,this.lastRecvStats);S&&(m.inbound=S)}const E=(p=this.requestTransportStats)===null||p===void 0?void 0:p.call(this).connectState;E&&(Array.isArray(m.misc)?m.misc[0]&&m.misc[0].addition&&(m.misc[0].addition[MS.RTC_PEER_CONNECTION_STATE]=iI[E]):m.misc=[{addition:{[MS.RTC_PEER_CONNECTION_STATE]:iI[E]}}]),this.needUploadStats.sendType&&(Array.isArray(m.outbound)&&m.outbound[0]&&m.outbound[0].high&&(m.outbound[0].high[k8.Video_Send_Type]=this.needUploadStats.sendType),this.needUploadStats.sendType=void 0),this.requestUploadStats(m)}this.lastRecvStats=h,this.lastSendStats=u,a&&(this.lastNormalRecvStats=h,this.lastNormalSendStats=u),i&&(this.lastRefRecvStats=h,this.lastRefSendStats=u)}startUploadWRTCStats(){if(this.uploadWRTCStatsTimer)return;this.uploadBaseStatsStarted=!0;let n=1;this.uploadWRTCStatsTimer=window.setInterval(()=>{if(!this.uploadTransportStarted&&!this.uploadInboundStarted&&!this.uploadOutboundStarted){if(this.uploadBaseStatsStarted){var i,a;const l=(i=this.requestTransportStats)===null||i===void 0?void 0:i.call(this);return void(l&&((a=this.requestUploadStats)===null||a===void 0||a.call(this,{misc:[{addition:{[MS.RTC_PEER_CONNECTION_STATE]:iI[l.connectState]}}]})))}return this.stopUploadWRTCStats()}this.uploadWRTCStats(n),++n===Ppe+1&&(n=1)},uh)}uploadCompensateStats(n){if(!this.requestStats||!this.requestUploadStats||!this.requestRemoteMedia)return;const i=n%W0==0&&this.needUploadRenderFreezeTime;if(!this.uploadInboundStarted||!i)return;if(this.lastUploadCompensateTime===-1)return void(this.lastUploadCompensateTime=Date.now());const a=Math.max(-6e3,Date.now()-this.lastUploadCompensateTime-6e3);if(this.uploadCompensateDeltaTime+=a,this.lastUploadCompensateTime=Date.now(),this.uploadCompensateDeltaTime<6e3)return;const l=Math.min(Math.floor(this.uploadCompensateDeltaTime/6e3),10);this.uploadCompensateDeltaTime-=6e3*l;const u=this.requestStats(!0);new Array(l).fill(0).forEach(()=>{if(!this.requestStats||!this.requestUploadStats||!this.requestRemoteMedia)return;const h={};if(this.uploadInboundStarted&&u){const p=this.requestRemoteMedia()||[],m=[];p.forEach(E=>{let[S,R]=E;const w={peer:S.uid};if(S._videoSSRC&&this.requestVideoIsReady&&this.requestVideoIsReady(S._videoSSRC)&&R.has(it.VIDEO)&&S.videoTrack){const O=function(H,B,j){if(!B.videoRecv.find(Y=>Y.ssrc===H))return;const q={};if(j&&j._player){const Y=j._player,{renderFreezeAccTime2:Z,videoElementStatus:pe}=Y;if(pl.visibility==="visible"&&pe===Xi.PLAYING&&Rn().supportRequestVideoFrameCallback){const he=Math.min(6e3,Z);Y.renderFreezeAccTime2=Math.max(0,Z-he),wt(q,Lc.Video_Render_Freeze_Time_Render2,he),Q("USE_NEW_RENDER_FREEZE_TIME")&&wt(q,Lc.Video_Render_Freeze_Time_Render,he)}}return q}(S._videoSSRC,u,S.videoTrack);O&&(w.video=O)}w.video&&m.push(w)}),m.length>0&&(h.inbound=m,this.requestUploadStats(h))}})}stopUploadWRTCStats(){window.clearInterval(this.uploadWRTCStatsTimer),this.uploadWRTCStatsTimer=void 0,this.lastSendStats&&(this.lastSendStats.videoSend=[],this.lastSendStats.audioSend=[],this.lastSendStats=void 0),this.lastRecvStats&&(this.lastRecvStats.videoRecv=[],this.lastRecvStats.audioRecv=[],this.lastRecvStats=void 0),this.lastRefSendStats&&(this.lastRefSendStats.videoSend=[],this.lastRefSendStats.audioSend=[],this.lastRefSendStats=void 0),this.lastRefRecvStats&&(this.lastRefRecvStats.videoRecv=[],this.lastRefRecvStats.audioRecv=[],this.lastRefRecvStats=void 0),this.lastNormalSendStats&&(this.lastNormalSendStats.videoSend=[],this.lastNormalSendStats.audioSend=[],this.lastNormalSendStats=void 0),this.lastNormalRecvStats&&(this.lastNormalRecvStats.videoRecv=[],this.lastNormalRecvStats.audioRecv=[],this.lastNormalRecvStats=void 0),this.lastExtendStats={},this.needUploadStats={},this.lastUploadCompensateTime=-1,this.uploadCompensateDeltaTime=0,this.needUploadRenderFreezeTime=!0}getTransportStats(n,i,a){if(!this.requestStats)return;if(!a)return n.rtt==null?void 0:{addition:{[Jo.RTT]:n.rtt,[Jo.CONN_TYPE]:void 0,[Jo.STATS_UPDATE_INTERVAL]:n.updateInterval||void 0}};const l=M8(n);if(this.store.useP2P){if(i){const u=M8(i);l[Jo.CONN_TYPE]+=u[Jo.CONN_TYPE]<<3}l[Jo.CONN_TYPE]+=110}else l[Jo.CONN_TYPE]+=100;return{addition:l}}getOutboundStats(n,i,a,l,u){if(!this.requestUploadStats||!this.requestLocalMedia)return;const h=this.requestLocalMedia();if(!h||h.length===0)return;let p,m,E;return h.forEach(S=>{let[R,{track:w,ssrcs:O}]=S;switch(R){case Fe.LocalVideoLowTrack:case Fe.LocalVideoTrack:if(R===Fe.LocalVideoTrack){var H;const B=function(Z,pe,he,re,Se,Ae){const Ne=pe.videoSend.find(Lt=>Lt.ssrc===Z);if(!Ne)return;const Be={},{sentFrame:nn,inputFrame:sn}=Ne;if(re&&(wt(Be,Lc.Video_Send_Qp_Sum,Ne.qpSumPerFrame),sn&&nn)){const Lt=sn.frameRate,kn=nn.frameRate;Be[Lc.Video_Send_Freeze]=function(Nn,eo){let xe=!0;return xe=!(Nn<=5)&&(Nn<=10?eo<3:Nn<=20?eo<4:eo<5),xe}(Lt,kn)?1:0}if(Se){switch(nn&&(wt(Be,Ht.Video_Send_Height,nn.height),wt(Be,Ht.Video_Send_Width,nn.width),wt(Be,Ht.Video_Send_Frame_Rate,nn.frameRate)),Be[Ht.Video_Send_Disabled]=he._originMediaStreamTrack&&!he._originMediaStreamTrack.enabled||he._mediaStreamTrack&&!he._mediaStreamTrack.enabled?1:0,Ne.adaptionChangeReason){case"none":Be[Ht.Video_Send_Adaptation]=0;break;case"cpu":Be[Ht.Video_Send_Adaptation]=1;break;case"bandwidth":Be[Ht.Video_Send_Adaptation]=2;break;case"other":Be[Ht.Video_Send_Adaptation]=3}let Lt=0;Ne.adaptionChangeReason&&(Lt+=F8(Ne.adaptionChangeReason)),pe.qualityLimitationReason&&(Lt+=F8(pe.qualityLimitationReason)<<3),Be[Ht.Video_Send_Adaptation]=Lt,Be[Ht.Video_Send_Player_Status]=EI[he._player?he._player.videoElementStatus:"uninit"],wt(Be,Ht.Video_Send_Nacks,Ne.nacksCount),wt(Be,Ht.Video_Send_Plis,Ne.plisCount),wt(Be,Ht.Video_Send_Firs,Ne.firsCount),wt(Be,Ht.Video_Send_Avg_Encode,Ne.avgEncodeMs),wt(Be,Ht.Video_Send_Huge_Frame_Sent,Ne.hugeFramesSent),wt(Be,Ht.Video_Send_Bytes_Retransmit,Ne.retransmittedBytesSent),wt(Be,Ht.Video_Send_Packages_Retransmit,Ne.retransmittedPacketsSent),wt(Be,Ht.Video_Send_Key_Frames_Encoded,Ne.keyFramesEncoded);const kn=Se.videoSend.find(Nn=>Nn.ssrc===Z);if(kn){let Nn=uh*W0;kn.timestamp&&Ne.timestamp&&(Nn=Ne.timestamp-kn.timestamp),kn.packets!=null&&Ne.packets!=null&&wt(Be,Ht.Video_Send_Package_Rate,1e3*(Ne.packets-kn.packets)/Nn),Ne.packetsLost!=null&&kn.packetsLost!=null&&wt(Be,Ht.Video_Send_Package_Lost,Ne.packetsLost-kn.packetsLost),kn.bytes!=null&&Ne.bytes!=null&&wt(Be,Ht.Video_Send_Bitrate,8*(Ne.bytes-kn.bytes)/Nn)}}return Be}(O[0].ssrcId,n,w,i,a),j=w.__className__==="CameraVideoTrack"?3:Ge(H=w._hints).call(H,qn.SCREEN_TRACK)?7:10;(this.lastExtendStats.sendType!==j||u)&&(this.needUploadStats={sendType:j},this.lastExtendStats.sendType=j);const q=w&&function(Z,pe,he,re){const Se=pe.videoSend.find(Ne=>Ne.ssrc===Z);if(!Se)return null;const Ae={};if(re){const Ne=Se.inputFrame,Be=Ne&&Ne.height||he.videoHeight||0,nn=Ne&&Ne.width||he.videoWidth||0,sn=Ne&&Ne.frameRate||0;wt(Ae,Ht.Video_Capture_Height,Be),wt(Ae,Ht.Video_Capture_Width,nn),wt(Ae,Ht.Video_Capture_Frame_Rate,sn)}return Ae}(O[0].ssrcId,n,w,!!a),Y=function(Z,pe){const he={};return pe&&(wt(he,Ht.Video_Send_Retransmit,Z.bitrate.retransmit),wt(he,Ht.Video_Send_Target_Encoded,Z.bitrate.targetEncoded),wt(he,Ht.Video_Send_Actual_Encoded,Z.bitrate.actualEncoded),wt(he,Ht.Video_Send_Transmit,Z.bitrate.transmit),wt(he,Ht.Video_Send_Bandwidth,Z.sendBandwidth)),he}(n,!!a);m=Object.assign({},B,q,Y)}else E=function(B,j,q,Y,Z){const pe=j.videoSend.find(re=>re.ssrc===B);if(!pe)return;const he={};if(Y){const re=pe.sentFrame;re&&(wt(he,Ht.Video_Send_Low_Height,re.height),wt(he,Ht.Video_Send_Low_Width,re.width),wt(he,Ht.Video_Send_Low_Frame_Rate,re.frameRate));const Se=Y.videoSend.find(Ae=>Ae.ssrc===B);if(Se){let Ae=uh*FS;Se.timestamp&&pe.timestamp&&(Ae=pe.timestamp-Se.timestamp),Se.packets!=null&&pe.packets!=null&&wt(he,Ht.Video_Send_Low_Package_Rate,1e3*(pe.packets-Se.packets)/Ae),pe.packetsLost!=null&&Se.packetsLost!=null&&wt(he,Ht.Video_Send_Low_Package_Lost,pe.packetsLost-Se.packetsLost),Se.bytes!=null&&pe.bytes!=null&&wt(he,Ht.Video_Send_Low_Bitrate,8*(pe.bytes-Se.bytes)/Ae)}}return he}(O[0].ssrcId,n,0,a);break;case Fe.LocalAudioTrack:p=w&&function(B,j,q,Y,Z,pe){const he=j.audioSend.find(Se=>Se.ssrc===B);if(!he)return;const re={};if(Z){re[Ht.Audio_Send_Disabled]=q._originMediaStreamTrack&&!q._originMediaStreamTrack.enabled||q._mediaStreamTrack&&!q._mediaStreamTrack.enabled?1:0;const Se=100*q._source.getAccurateVolumeLevel(),Ae=he.inputLevel;if(Ae!=null){const Be=Math.ceil(50*Math.log10(100*Ae+1));wt(re,Ht.Audio_Send_Level,Be)}wt(re,Ht.Audio_Capture_PCM_Level,Se),wt(re,Ht.Audio_Send_AEC_Return_Loss,he.aecReturnLoss),wt(re,Ht.Audio_Send_AEC_Return_Loss_Enhancement,he.aecReturnLossEnhancement),wt(re,Ht.Audio_Send_Bytes_Retransmit,he.retransmittedBytesSent),wt(re,Ht.Audio_Send_Packages_Retransmit,he.retransmittedPacketsSent),re[Ht.Audio_Send_Freeze]=0;const Ne=Z.audioSend.find(Be=>Be.ssrc===B);if(Ne){let Be=uh*FS;Ne.timestamp&&he.timestamp&&(Be=he.timestamp-Ne.timestamp),Ne.bytes!=null&&he.bytes!=null&&wt(re,Ht.Audio_Send_Bitrate,8*(he.bytes-Ne.bytes)/Be),Ne.packets!=null&&he.packets!=null&&wt(re,Ht.Audio_Send_Package_Rate,1e3*(he.packets-Ne.packets)/Be)}}return re}(O[0].ssrcId,n,w,0,a)}}),{high:m,low:E,audio:p}}getInboundStats(n,i,a,l){if(!this.requestRemoteMedia)return;const u=this.requestRemoteMedia()||[],h=[];return u.forEach(p=>{let[m,E]=p;const S={peer:m.uid};if(E.has(it.VIDEO)&&m.videoTrack){const R=m._videoSSRC&&this.requestVideoIsReady&&this.requestVideoIsReady(m._videoSSRC)||!1,w=m.videoTrack?function(O,H,B,j,q,Y,Z,pe){const he=H.videoRecv.find(Lt=>Lt.ssrc===O);if(!he)return;const re={},{receivedFrame:Se,outputFrame:Ae,decodeFrameRate:Ne}=he;wt(re,ki.Video_Render_Frame_Rate_Decode,Ne),he.framesRateFirefox&&wt(re,ki.Video_Recv_Frame_Rate,he.framesRateFirefox),Se&&wt(re,ki.Video_Recv_Frame_Rate,Se.frameRate),wt(re,ki.Video_Recv_Frame_Dropped,he.framesDroppedCount),wt(re,ki.Video_Recv_Bytes_Retransmit,he.retransmittedBytesReceived),wt(re,ki.Video_Recv_Packages_Retransmit,he.retransmittedPacketsReceived),wt(re,ki.Video_Recv_Packages_Discarded,he.packetsDiscarded),wt(re,ki.Video_Recv_Avg_Decode,he.avgDecodeMs),wt(re,ki.Video_Recv_Avg_Processing_Delay,he.avgProcessingDelayMs),wt(re,ki.Video_Recv_Avg_Assembly_Time,he.avgFramesAssembledFromMultiplePacketsMs),wt(re,ki.Video_Recv_Avg_Inter_Frame_Delay,he.avgInterFrameDelayMs),wt(re,ki.Video_Recv_Key_Frames_Decoded,he.keyFramesDecoded);const Be=pe&&pe.videoRecv.find(Lt=>Lt.ssrc===O);if(Be){const Lt=H.timestamp-pe.timestamp||uh;he.packetsLost!=null&&Be.packetsLost!=null&&wt(re,ki.Video_Recv_Package_Lost,he.packetsLost-Be.packetsLost),Be.bytes!=null&&he.bytes!=null&&wt(re,ki.Video_Recv_Bitrate,8*(he.bytes-Be.bytes)/Lt),Be.packets!=null&&he.packets!=null&&wt(re,ki.Video_Recv_Package_Rate,1e3*(he.packets-Be.packets)/Lt)}const nn=Y&&Y.videoRecv.find(Lt=>Lt.ssrc===O);if(nn&&(wt(re,Lc.Video_Recv_Qp_Sum,he.qpSumPerFrame),re[Lc.Video_Recv_Freeze]=j&&z0.isRemoteVideoFreeze(B,he,nn)?1:0),Z){var sn;const Lt=Z.videoRecv.find(Nn=>Nn.ssrc===O);Se?(wt(re,Ht.Video_Recv_Height,Se.height),wt(re,Ht.Video_Recv_Width,Se.width)):B&&(wt(re,Ht.Video_Recv_Height,B._videoHeight||0),wt(re,Ht.Video_Recv_Width,B._videoWidth||0)),Ae&&wt(re,Ht.Video_Recv_Frame_Rate_Output,Ae.frameRate);const kn=(sn=B._player)===null||sn===void 0?void 0:sn.rendFrameRate.toFixed(0);if(kn&&wt(re,Ht.Video_Render_Frame_Rate_Render,+kn),wt(re,Ht.Video_Recv_Jitter_Buffer,he.jitterBufferMs),wt(re,Ht.Video_Recv_Current_Delay,he.currentDelayMs),wt(re,Ht.Video_Recv_Firs,he.firsCount),wt(re,Ht.Video_Recv_Nacks,he.nacksCount),wt(re,Ht.Video_Recv_Plis,he.plisCount),B){re[Ht.Video_Recv_Disabled]=B._originMediaStreamTrack.enabled&&B._mediaStreamTrack.enabled?0:1;const Nn=B._player;if(Nn){const{freezeTimeCounterList:eo,renderFreezeAccTime:xe,renderFreezeAccTime2:We,videoElementStatus:ot}=Nn;if(eo&&eo.length>0&&wt(re,Lc.Video_Render_Freeze_Time,eo.splice(0,1)[0]),q&&pl.visibility==="visible"&&ot===Xi.PLAYING&&Rn().supportRequestVideoFrameCallback){const Pe=Math.min(6e3,We);Nn.renderFreezeAccTime2=Math.max(0,We-Pe),wt(re,Lc.Video_Render_Freeze_Time_Render2,Pe);const U=Math.min(6e3,xe);Nn.renderFreezeAccTime=Math.max(0,xe-U),wt(re,Lc.Video_Render_Freeze_Time_Render,Q("USE_NEW_RENDER_FREEZE_TIME")?Pe:U)}if(typeof he.totalFreezesDuration=="number"){const Pe=Lt&&Lt.totalFreezesDuration?he.totalFreezesDuration-Lt.totalFreezesDuration:he.totalFreezesDuration;wt(re,Ht.Video_Render_Freeze_Duration,1e3*Pe)}}}if(re[Ht.Video_Recv_Player_Status]=EI[B._player?B._player.videoElementStatus:"uninit"],Lt&&he.totalInterFrameDelay!==void 0&&he.totalSquaredInterFrameDelay!==void 0&&Lt.totalInterFrameDelay!==void 0&&Lt.totalSquaredInterFrameDelay!==void 0){const Nn=he.totalInterFrameDelay-Lt.totalInterFrameDelay,eo=he.totalSquaredInterFrameDelay-Lt.totalSquaredInterFrameDelay,xe=he.framesDecodeCount-Lt.framesDecodeCount,We=Nn/xe*1e3,ot=Math.round(1e3*Math.sqrt((eo-Math.pow(Nn,2)/xe)/xe));!isNaN(ot)&&We+ot>Math.max(3*We,We+150)&&(re[Ht.Video_Recv_I_Frame_Delay]=ot)}}return re}(m._videoSSRC,n,m.videoTrack,R===!0,this.needUploadRenderFreezeTime,i,a,l):void 0;w&&(S.video=w)}if(E.has(it.AUDIO)&&m.audioTrack){const R=m.audioTrack?function(w,O,H,B,j,q){const Y=O.audioRecv.find(re=>re.ssrc===w);if(!Y)return;const Z={};wt(Z,ki.Audio_Recv_Jitter,Y.jitterMs),wt(Z,ki.Audio_Recv_Bytes_Retransmit,Y.retransmittedBytesReceived),wt(Z,ki.Audio_Recv_Packages_Retransmit,Y.retransmittedPacketsReceived),wt(Z,ki.Audio_Recv_Packages_Discarded,Y.packetsDiscarded),wt(Z,ki.Audio_Recv_Avg_Processing_Delay,Y.avgProcessingDelayMs);const pe=q&&q.audioRecv.find(re=>re.ssrc===w);if(pe){const re=uh;Y.packets!=null&&pe.packets!=null&&wt(Z,ki.Audio_Recv_Package_Rate,1e3*(Y.packets-pe.packets)/re),Y.packetsLost!=null&&pe.packetsLost!=null&&wt(Z,ki.Audio_Recv_Package_Lost,Y.packetsLost-pe.packetsLost)}if(B){const{receivedFrames:re,droppedFrames:Se}=Y;re!=null&&Se!=null&&(Z[Lc.Audio_Recv_Freeze]=(he=re)===0||100*Se/he>20?1:0)}var he;if(j){const re=100*H._source.getAccurateVolumeLevel(),Se=Y.outputLevel;if(Se!=null){const Ne=Math.ceil(50*Math.log10(100*Se+1));wt(Z,Ht.Audio_Render_Level,Ne)}wt(Z,Ht.Audio_Recv_PCM_Level,re),H&&(Z[Ht.Audio_Recv_Disabled]=H._originMediaStreamTrack.enabled&&H._mediaStreamTrack.enabled?0:1),wt(Z,Ht.Audio_Recv_Jitter_Buffer,Y.jitterBufferMs),wt(Z,Ht.Audio_Recv_Current_Delay,Y.jitterBufferMs),Z[Ht.Audio_Recv_Player_Status]=EI[qo.getPlayerState(H.getTrackId())];const Ae=j.audioRecv.find(Ne=>Ne.ssrc===w);if(Ae){Ae.bytes!=null&&Y.bytes!=null&&wt(Z,Ht.Audio_Recv_Bitrate,8*(Y.bytes-Ae.bytes)/(uh*W0));const Ne=Y.concealedSamples-Ae.concealedSamples;Ne>0&&wt(Z,Ht.Audio_Recv_Concealed_Samples,Ne);const Be=Y.totalSamplesReceived-Ae.totalSamplesReceived;Be>0&&wt(Z,Ht.Audio_Recv_Total_Samples_Received,Be);const nn=Y.freezeSamples80-Ae.freezeSamples80;nn>0&&wt(Z,Ht.Audio_Render_Freeze_Samples_80ms,nn);const sn=Y.freezeSamples200-Ae.freezeSamples200;sn>0&&wt(Z,Ht.Audio_Render_Freeze_Samples_200ms,sn);const Lt=Y.freezeMs80-Ae.freezeMs80;wt(Z,Ht.Audio_Render_Freeze_Time_80ms,Lt<0?0:Lt);const kn=Y.freezeMs200-Ae.freezeMs200;wt(Z,Ht.Audio_Render_Freeze_Time_200ms,kn<0?0:kn)}}return Z}(m._audioSSRC,n,m.audioTrack,i,a,l):void 0;R&&(S.audio=R)}(S.video||S.audio)&&h.push(S)}),this.needUploadRenderFreezeTime=!this.needUploadRenderFreezeTime,h}startUploadTransportStats(){this.uploadTransportStarted=!0,this.uploadWRTCStatsTimer||this.startUploadWRTCStats()}stopUploadTransportStats(){this.uploadTransportStarted=!1}startUploadOutboundStats(){this.uploadOutboundStarted||(this.uploadOutboundStarted=!0,this.uploadWRTCStatsTimer||this.startUploadWRTCStats(),this.uploadOutboundDenoiserStatsTimer&&window.clearInterval(this.uploadOutboundDenoiserStatsTimer),this.uploadOutboundDenoiserStatsTimer=window.setInterval(()=>{if(!this.requestAllTracks||!this.requestUpload)return;const n=(this.requestAllTracks()||[]).find(i=>i instanceof P0);if(n&&n._external.getDenoiserStats){const i=n._external.getDenoiserStats();i&&this.requestUpload(L0.DENOISER_STATS,i)}},2e3),this.uploadExtStatsTimer&&window.clearInterval(this.uploadExtStatsTimer),this.uploadExtStatsTimer=window.setInterval(()=>{!this.requestAllTracks||!this.requestUpload||this.requestAllTracks().forEach(n=>{n.getProcessorStats().forEach(i=>{this.requestUpload&&this.requestUpload(i.type,i.stats)})})},2e3))}stopUploadOutboundStats(){this.uploadOutboundStarted&&(this.uploadOutboundStarted=!1,this.lastSendStats&&(this.lastSendStats.videoSend=[],this.lastSendStats.audioSend=[],this.lastSendStats=void 0),this.lastRefSendStats&&(this.lastRefSendStats.videoSend=[],this.lastRefSendStats.audioSend=[],this.lastRefSendStats=void 0),this.lastNormalSendStats&&(this.lastNormalSendStats.videoSend=[],this.lastNormalSendStats.audioSend=[],this.lastNormalSendStats=void 0),this.lastExtendStats={},this.needUploadStats={},this.uploadOutboundDenoiserStatsTimer&&window.clearInterval(this.uploadOutboundDenoiserStatsTimer),this.uploadOutboundDenoiserStatsTimer=void 0,this.uploadExtStatsTimer&&window.clearInterval(this.uploadExtStatsTimer),this.uploadExtStatsTimer=void 0)}startUploadInboundStats(){this.uploadInboundStarted||(this.uploadInboundStarted=!0,this.uploadWRTCStatsTimer||this.startUploadWRTCStats(),this.uploadInboundExtStatsTimer&&window.clearInterval(this.uploadInboundExtStatsTimer),this.uploadInboundExtStatsTimer=window.setInterval(()=>{!this.requestUpload||!this.requestRemoteMedia||(this.requestRemoteMedia()||[]).forEach(n=>{let[i,a]=n;a.has(it.VIDEO)&&i.videoTrack&&i.videoTrack.getProcessorStats().forEach(l=>{this.requestUpload&&this.requestUpload(l.type,l.stats)}),a.has(it.AUDIO)&&i.audioTrack&&i.audioTrack.getProcessorStats().forEach(l=>{this.requestUpload&&this.requestUpload(l.type,l.stats)})})},2e3))}stopUploadInboundStats(){this.uploadInboundStarted&&(this.uploadInboundStarted=!1,this.lastRecvStats&&(this.lastRecvStats.videoRecv=[],this.lastRecvStats.audioRecv=[],this.lastRecvStats=void 0),this.lastRefRecvStats&&(this.lastRefRecvStats.videoRecv=[],this.lastRefRecvStats.audioRecv=[],this.lastRefRecvStats=void 0),this.lastNormalRecvStats&&(this.lastNormalRecvStats.videoRecv=[],this.lastNormalRecvStats.audioRecv=[],this.lastNormalRecvStats=void 0),this.lastUploadCompensateTime=-1,this.uploadCompensateDeltaTime=0,this.needUploadRenderFreezeTime=!0,this.uploadInboundExtStatsTimer&&window.clearInterval(this.uploadInboundExtStatsTimer),this.uploadInboundExtStatsTimer=void 0)}startUploadExtensionUsageStats(){if(this.uploadExtensionUsageStarted)return;this.uploadExtensionUsageStarted=!0,this.uploadExtUsageStatsTimer&&window.clearInterval(this.uploadExtUsageStatsTimer);const n=new Map;this.uploadExtUsageStatsTimer=window.setInterval(async()=>{const i=Date.now(),a={connectionInterval:Q("EXTENSION_USAGE_UPLOAD_INTERVAL")/1e3,details:[],lts:i};let l=[];const u=this.requestAllTracks&&this.requestAllTracks()||[];for(const E of u)!E.muted&&E.enabled&&(l=l.concat(await E.getProcessorUsage()));const h=this.requestRemoteMedia&&this.requestRemoteMedia()||[];for(const[E,S]of h)S.has(it.VIDEO)&&E.videoTrack&&(l=l.concat(await E.videoTrack.getProcessorUsage())),S.has(it.AUDIO)&&E.audioTrack&&(l=l.concat(await E.audioTrack.getProcessorUsage()));if(l.length===0)return;a.details=function(E,S){const R={};for(const{id:B,value:j,level:q,direction:Y}of E){var w;const Z=(w=S.get(B))!==null&&w!==void 0?w:0,pe=j===2?Z+Q("EXTENSION_USAGE_UPLOAD_INTERVAL")/1e3:Z;var O,H;S.set(B,pe),R[B]?(j===2&&(R[B].value=j),q>R[B].level&&(R[B].level=q),Y==="remote"&&(R[B].remoteUidCount+=1),R[B].totalTs=(O=S.get(B))!==null&&O!==void 0?O:0):R[B]={value:j,level:q,remoteUidCount:Y==="local"?0:1,totalTs:(H=S.get(B))!==null&&H!==void 0?H:0}}return Object.keys(R).map(B=>{const{level:j,value:q,totalTs:Y}=R[B];return{id:B,level:j,value:q,totalTs:Y}})}(l,n);const p=Date.now(),m=p>i?p:i+1;this.requestUpload&&this.requestUpload(L0.EXTENSION_USAGE_STATS,{usageStats:a,sendTs:m})},Q("EXTENSION_USAGE_UPLOAD_INTERVAL"))}stopUploadExtensionUsageStats(){this.uploadExtensionUsageStarted&&(this.uploadExtensionUsageStarted=!1,this.uploadExtUsageStatsTimer&&window.clearInterval(this.uploadExtUsageStatsTimer),this.uploadExtUsageStatsTimer=void 0)}stopUploadBaseStats(){this.uploadBaseStatsStarted=!1}}const Dpe=Q("ICE_RESTART_INTERVAL");let US=new Map,mp=new Map,Xu=[Qi.UDP_TCP_RELAY,Qi.TCP_RELAY,Qi.RELAY],gA=Q("JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE")&&Rn().supportPCSetConfiguration;function B8(e){let n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const i=US.get(e.id);i&&(window.clearTimeout(i),US.delete(e.id));const a=mp.get(e.id);n&&a&&a.index===Xu.length-1&&(k.debug("[".concat(e.id,"] reset ICE restart policy")),mp.delete(e.id))}function V8(e,n,i){if(US.size===0&&mp.size===0&&(Array.isArray(Q("RESTART_SEQUENCE"))&&Q("RESTART_SEQUENCE").length>0&&!function(p,m){if(p.length!==m.length)return!1;for(let E=0;E<p.length;E+=1){const S=p[E];if(p.filter(R=>R===S).length!==m.filter(R=>R===S).length)return!1}return!0}(Xu,Q("RESTART_SEQUENCE"))&&(Xu=Q("RESTART_SEQUENCE").filter(p=>{var m;if(Ge(m=Object.values(Qi)).call(m,p))return!0}),k.debug("use reconnection policy from config distribution, queues: ".concat(Xu.join(" => ")))),gA=Q("JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE")&&Rn().supportPCSetConfiguration),Xu.length===0)return void i();let a,{index:l=0,type:u}=mp.get(e.id)||{};if(gA&&u===Qi.RELAY)return void i();let h=u&&l>=Xu.length-1;if(gA)u=Qi.RELAY;else{if(h)return void i();u?(l++,u=Xu[l]):(u=Xu[0],l=0)}k.debug("[".concat(e.id,"] choose ICE restart policy: ").concat(u,", index: ").concat(l)),n(u),mp.set(e.id,{index:l,type:u}),a=window.setTimeout(()=>V8(e,n,i),Dpe),US.set(e.id,a)}var fn;function j8(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),i.push.apply(i,a)}return i}function El(e){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?j8(Object(i),!0).forEach(function(a){W(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):j8(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function $8(e){var n,i,a,l=2;for(typeof Symbol<"u"&&(i=xw,a=Symbol.iterator);l--;){if(i&&(n=e[i])!=null)return n.call(e);if(a&&(n=e[a])!=null)return new BS(n.call(e));i="@@asyncIterator",a="@@iterator"}throw new TypeError("Object is not async iterable")}function BS(e){function n(i){if(Object(i)!==i)return et.reject(new TypeError(i+" is not an object."));var a=i.done;return et.resolve(i.value).then(function(l){return{value:l,done:a}})}return BS=function(i){this.s=i,this.n=i.next},BS.prototype={s:null,n:null,next:function(){return n(this.n.apply(this.s,arguments))},return:function(i){var a=this.s.return;return a===void 0?et.resolve({value:i,done:!0}):n(a.apply(this.s,arguments))},throw:function(i){var a=this.s.return;return a===void 0?et.reject(i):n(a.apply(this.s,arguments))}},new BS(e)}let G0=(fn=class extends br{get state(){return this._state}set state(e){const n=this._state;this._state=e,this.emit(vt.StateChange,n,this._state)}constructor(e,n){super(),W(this,"isPlanB",void 0),W(this,"store",void 0),W(this,"statsUploader",void 0),W(this,"connection",void 0),W(this,"localTrackMap",new Map),W(this,"remoteUserMap",new Map),W(this,"localDataChannels",[]),W(this,"remoteDataChannelMap",new Map),W(this,"pendingLocalTracks",[]),W(this,"pendingRemoteTracks",[]),W(this,"pendingLocalDataChannels",[]),W(this,"pendingRemoteDataChannels",[]),W(this,"statsCollector",void 0),W(this,"shouldForwardP2PCreation",void 0),W(this,"iceFailedCount",0),W(this,"dtlsFailedCount",0),W(this,"mutex",void 0),W(this,"_state",Un.Disconnected),W(this,"_pcStatsUploadType",Q("NEW_ICE_RESTART")?ql.FIRST_CONNECTION:ql.OLD_FIRST_CONNECTION),W(this,"_isStartRestartIce",!1),W(this,"_restartTimer",void 0),W(this,"_isTryConnecting",!1),W(this,"_iceError",null),W(this,"_forceTurn",!1),W(this,"_isWaitPcToRePub",!1),W(this,"handleMuteLocalTrack",async(i,a,l)=>{const u=await this.mutex.lock("Locking from P2PChannel.handleMuteLocalTrack");try{if(!this.connection||this.state!==Un.Connected)return void l(new Re(X.INVALID_OPERATION,"Cannot call P2PChannel.handleMuteLocalTrack before connection established."));const h=this.filterTobeMutedTracks(i);if(h.length===0)return void a();const p=h.find(E=>E[0]==="videoLowTrack");if(p){const E=p[1];this.store.enableInstantMuteRestore?(E.track._originMediaStreamTrack.enabled=!1,k.info("[".concat(this.store.clientId,"] P2PChannel muteLocalLowTrack without close sender because enableInstantMuteRestore is true"))):E.track._originMediaStreamTrack.stop()}this.store.enableInstantMuteRestore?k.info("[".concat(this.store.clientId,"] P2PChannel muteLocalTrack without close sender because enableInstantMuteRestore is true")):await this.connection.muteLocal(h.map(E=>{let[,{id:S}]=E;return S}));const m=this.createMuteMessage(h);await Qn(this,vt.RequestMuteLocal,m),a()}catch(h){l(h)}finally{u()}}),W(this,"handleUnmuteLocalTrack",async(i,a,l)=>{const u=await this.mutex.lock("Locking from P2PChannel.handleUnmuteLocalTrack");try{if(!this.connection||this.state!==Un.Connected)return void l(new Re(X.INVALID_OPERATION,"Cannot call P2PChannel.handleUnmuteLocalTrack before connection established."));const h=this.filterTobeUnmutedTracks(i);if(h.length===0)return void a();const p=h.find(E=>E[0]==="videoLowTrack");if(p){const E=p[1];if(this.store.enableInstantMuteRestore)E.track._originMediaStreamTrack.enabled=!0,k.info("[".concat(this.store.clientId,"] P2PChannel unmuteLocalLowTrack without close sender because enableInstantMuteRestore is true"));else{if(E.track._originMediaStreamTrack.stop(),!Q("DISABLE_DUAL_STREAM_USE_ENCODING")&&Rn().supportDualStreamEncoding){const S=i._mediaStreamTrack.clone();E.track._mediaStreamTrack=S,E.track._originMediaStreamTrack=S}else{const S=mA(i,R0(this,vt.RequestLowStreamParameter));E.track._mediaStreamTrack=S,E.track._originMediaStreamTrack=S}await new et((S,R)=>{this.handleReplaceTrack(E.track,S,R,!0)})}}this.store.enableInstantMuteRestore?k.info("[".concat(this.store.clientId,"] P2PChannel unmuteLocalTrack without close sender because enableInstantMuteRestore is true")):await this.connection.unmuteLocal(h.map(E=>{let[,{id:S}]=E;return S}));const m=this.createUnmuteMessage(h);await Qn(this,vt.RequestUnmuteLocal,m),a()}catch(h){l(h)}finally{u()}}),W(this,"handleUpdateVideoEncoder",async(i,a,l,u)=>{let h;u||(h=await this.mutex.lock("Locking from P2PChannel.handleUpdateVideoEncoder"));try{const m=this.localTrackMap.get(Fe.LocalVideoTrack);if(!this.connection||!m||m.track!==i||this.state!==Un.Connected)return void a();const{id:E,track:S}=m;await this.connection.updateSendParameters(E,S),await this.connection.updateEncoderConfig(E,S),this.emit(vt.UpdateVideoEncoder,S),a()}catch(m){l(m)}finally{var p;(p=h)===null||p===void 0||p()}}),W(this,"handleUpdateVideoSendParameters",async(i,a,l)=>{const u=await this.mutex.lock("Locking from P2PChannel.handleUpdateVideoSendParameters");try{const h=this.localTrackMap.get(Fe.LocalVideoTrack);if(!this.connection||!h||h.track!==i||this.state!==Un.Connected)return void a();const{id:p,track:m}=h;await this.connection.updateSendParameters(p,m),a()}catch(h){l(h)}finally{u()}}),W(this,"handleReplaceMixingTrack",async(i,a,l,u)=>{if(!this.connection||this.state!==Un.Connected)return void a();const h=fA([i]);let p;k.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection will replace audioTrack [").concat(h.getTrackId(),"]")),typeof u=="boolean"&&u||(p=await this.mutex.lock("From P2PChannel.handleReplaceMixingTrack"));try{await this.replaceTrack(i,h),a()}catch(E){l(E)}finally{var m;(m=p)===null||m===void 0||m()}}),W(this,"handleReplaceTrack",async(i,a,l,u)=>{let h;k.debug("[".concat(this.store.clientId,"] P2PChannel handleReplaceTrack for [track-id-").concat(i.getTrackId(),"]")),typeof u=="boolean"&&u||(h=await this.mutex.lock("From P2PChannel.handleReplaceTrack"));try{var p;const E=Array.from(this.localTrackMap.entries()).find(S=>{let[,{track:R}]=S;return i===R});if(!this.connection||!E||this.state!==Un.Connected)return void a();if(await((p=this.connection)===null||p===void 0?void 0:p.replaceTrack(i,E[1].id)),this.isPlanB){const S=E[1];S.id=i._mediaStreamTrack.id,this.localTrackMap.set(E[0],S)}if(E[0]===Fe.LocalVideoTrack&&!Q("DISABLE_DUAL_STREAM_USE_ENCODING")&&Rn().supportDualStreamEncoding){const S=this.localTrackMap.get(Fe.LocalVideoLowTrack);if(S){const R=i._mediaStreamTrack.clone();S.track._originMediaStreamTrack.stop(),S.track._mediaStreamTrack=R,S.track._originMediaStreamTrack=R,await new et((w,O)=>{this.handleReplaceTrack(S.track,w,O,!0)})}}a()}catch(E){l(E)}finally{var m;(m=h)===null||m===void 0||m()}}),W(this,"handleGetRTCStats",i=>{i(this.statsCollector.getRTCStats())}),W(this,"handleGetLocalVideoStats",i=>{i(this.statsCollector.getLocalVideoTrackStats())}),W(this,"handleGetLocalAudioStats",i=>{i(this.statsCollector.getLocalAudioTrackStats())}),W(this,"handleGetRemoteVideoStats",i=>this.statsCollector.getRemoteVideoTrackStats(i.uid)[i.uid]),W(this,"handleGetRemoteAudioStats",i=>this.statsCollector.getRemoteAudioTrackStats(i.uid)[i.uid]),this.store=e,this.statsCollector=n,this.statsCollector.addP2PChannel(this),this.statsUploader=new U8(this.store),this.bindStatsUploaderEvents(),this.mutex=new qi("P2PChannel-mutex",this.store.clientId),this.isPlanB=!Rn().supportUnifiedPlan||Q("CHROME_FORCE_PLAN_B")&&Gl(),this.shouldForwardP2PCreation=Q("FORWARD_P2P_CREATION")&&Rn().supportPCSetConfiguration&&Ww(),this.shouldForwardP2PCreation&&(this.connection=kS(this.store),this.emit(vt.PeerConnectionStateChange,this.connection.peerConnectionState),this.bindConnectionEvents(this.connection))}async startP2PConnection(e,n){var i;this.state=Un.New,this._forceTurn=D8(e),k.debug("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] forceTurn: ").concat(this._forceTurn));const a=this.shouldForwardP2PCreation&&((i=this.connection)===null||i===void 0?void 0:i.peerConnectionState)==="closed";if((!this.shouldForwardP2PCreation||a||n)&&((a||n)&&this.connection&&(k.warning("[".concat(this.store.clientId,"] P2PChannel.startP2PConnection ForwardP2P closed.")),this.resetConnection(this.connection)),this.connection=kS(this.store,e),this.emit(vt.PeerConnectionStateChange,this.connection.peerConnectionState),this.bindConnectionEvents(this.connection)),!this.connection)throw new Re(X.UNEXPECTED_ERROR,"Cannot P2PChannel.startConnection before P2PConnection initialization .");return this._pcStatsUploadType=Q("NEW_ICE_RESTART")?ql.FIRST_CONNECTION:ql.OLD_FIRST_CONNECTION,this._isTryConnecting=!0,this._isStartRestartIce=!1,this._iceError=null,this.connection.setConfiguration(e),this.connection.establishPromise}async connect(e){if(!this.connection)throw new Re(X.UNEXPECTED_ERROR,"Cannot P2PChannel.connect before P2PChannel.startP2PConnection .");if(this.isPreallocation()&&this.state===Un.Connected){if(this.connection instanceof fs&&this.connection.checkDtlsParameters(e.dtlsParameters.fingerprints))return k.debug("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] dtls parameters mismatch, try next.")),ct.reportApiInvoke(this.store.sessionId,{name:Ur.MISMATCH_DTLS_PARAMETERS,options:[e.dtlsParameters.fingerprints],tag:gr.TRACER}).onSuccess(),void setTimeout(()=>{this.emit(vt.RequestReconnect)});await this.connection.updateRemoteConnect(e)}else this.store.peerConnectionStart(),await this.connection.connect(e),this.statsUploader.startUploadTransportStats(),this.statsUploader.startUploadExtensionUsageStats(),this.state=Un.Connected}updateRemoteRTPCapabilities(e){const n=Array.from(this.localTrackMap.entries()).filter(l=>{var u;let[h]=l;return Ge(u=[Fe.LocalVideoLowTrack,Fe.LocalVideoTrack]).call(u,h)}),i=n.map(l=>{let[,{id:u}]=l;return u}),a=n.map(l=>{let[u]=l;return u});if(this.connection instanceof fs){if(ct.updateRemoteRTPCapabilities(this.store.sessionId,{trackTypes:JSON.stringify(a),localCodecs:JSON.stringify(this.connection.localCodecs),remoteCodecs:JSON.stringify(e)}),!Ge(e).call(e,this.store.codec)){const l=["vp9","vp8","h264"].find(u=>Ge(e).call(e,u));l&&(this.store.codec=l,k.debug("[".concat(this.store.clientId,"] [").concat(this.store.p2pId," updateRemoteRTPCapabilities] default codec is not available, hence the fallback to ").concat(l,".")))}this.connection.updateRemoteRTPCapabilities(i,e)}}async getEstablishParams(){var e;if(this.connection instanceof fs&&this.connection.peerConnectionState!=="closed"&&Ge(e=[Un.New,Un.Connected]).call(e,this.state))return this.connection.establishPromise}async publishDataChannel(e){if(!this.connection||this.state!==Un.Connected){if(this.state===Un.Disconnected)throw new Re(X.UNEXPECTED_ERROR,"PeerConnection already disconnected.");return e.forEach(i=>{var a;Ge(a=this.pendingLocalDataChannels).call(a,i)||this.pendingLocalDataChannels.push(i)}),[]}const n=this.filterTobePublishedDataChannels(e);return n.length===0?[]:(n.forEach(i=>{const a=Date.now();this.store.publish(i.id.toString(),"datachannel",a)}),await this.connection.createDataChannels(this.store.uid,n),n.forEach(i=>{this.localDataChannels.push(i);const a=Date.now();this.store.publish(i.id+"","datachannel",void 0,a)}),e.map(i=>({streamId:i.id,ordered:i.ordered,maxRetransmits:i.maxRetransmits,metadata:i.metadata,channelId:i._originDataChannelId})))}publish(e,n,i){var a=this;return ss(function*(){const l=yield Tn(a.mutex.lock("From P2PChannel.publish"));try{var u;const h=a.connection&&Ge(u=["disconnected","failed"]).call(u,a.connection.peerConnectionState);if(!a.connection||a.state!==Un.Connected||h){if(a.state===Un.Disconnected)throw new Re(X.UNEXPECTED_ERROR,"PeerConnection already disconnected.");a.throwIfTrackTypeNotMatch(e);const m=e.filter(E=>a.pendingLocalTracks.indexOf(E)===-1);return a.pendingLocalTracks=a.pendingLocalTracks.concat(m),void(h&&(a._isWaitPcToRePub=!0))}a.store.pubId=a.store.pubId+1,Zi.markPublishStart(a.store.clientId,a.store.pubId);const p=a.filterTobePublishedTracks(e,n,i);if(p.length===0)return void(yield Tn(a.tryToUnmuteAudio(e)));yield*N_($8(a.doPublish(a.connection,p)))}finally{l()}})()}doPublish(e,n){var i=this;return ss(function*(){n.forEach(w=>{let{track:O,type:H}=w;const B=Date.now();i.store.publish(O.getTrackId(),H===Fe.LocalAudioTrack?"audio":"video",B)}),i.bindLocalTrackEvents(n);const a=n.map(w=>{let{track:O}=w;return O}),l=yield Tn(e.send(a,i.store.codec,i.store.audioCodec)),u=(yield Tn(l.next())).value,h=i.createGatewayPublishMessage(n,u);let p;try{p=yield h}catch(w){throw l.throw(w),(w==null?void 0:w.code)===X.WS_ABORT&&n.forEach(O=>{let{track:H}=O;i.pendingLocalTracks.indexOf(H)===-1&&i.pendingLocalTracks.push(H)}),i.unbindLocalTrackEvents(n),w}const m=i.mapPubResToRemoteConfig(h,p,a),E=(yield Tn(l.next(m))).value;if(i.state===Un.Disconnected)throw new Re(X.UNEXPECTED_ERROR,"PeerConnection already disconnected.");Q("ENABLE_VIDEO_SEI");const S=Q("ENABLE_ENCODED_TRANSFORM"),R=Q("ENABLE_AUDIO_METADATA");a.forEach(async w=>{const O=w.getRTCRtpTransceiver();if(!O||!S)return;const{interceptLocalVideoFrame:H,interceptLocalAudioFrame:B}=wS();w.trackMediaType===it.VIDEO?await H(O.sender,w):w.trackMediaType===it.AUDIO&&await B(O.sender,{metadata:R?()=>{const j=w.metadata.shift();return j&&j.value}:void 0})}),n.forEach(w=>{let{type:O}=w;i.statsCollector.addLocalStats(O)}),i.assignLocalTracks(n,E),i.statsUploader.startUploadOutboundStats(),n.forEach(w=>{let{track:O,type:H}=w;const B=Date.now();i.store.publish(O.getTrackId(),H===Fe.LocalAudioTrack?"audio":"video",void 0,B)})})()}async updateVideoStreamParameter(e,n){const i=this.localTrackMap.get(n);if(!i||!this.connection)return;if(!(i.track instanceof sr))return k.warn("[updateVideoStreamParameter]: track is not an instance of LocalVideoTrack");const{track:a}=i,l=function(u,h){const p={};return u.height&&u.width&&(p.scaleResolutionDownBy=qI(u,h)),p.maxFramerate=u.framerate?Ia(u.framerate):void 0,p.maxBitrate=u.bitrate?1e3*u.bitrate:void 0,p}(e,a);if(a._encoderConfig||(a._encoderConfig={}),n!==Fe.LocalVideoLowTrack||!Q("DISABLE_DUAL_STREAM_USE_ENCODING")&&Rn().supportDualStreamEncoding)l.scaleResolutionDownBy!=null&&(a._encoderConfig.scaleResolutionDownBy=l.scaleResolutionDownBy);else{const u=a._originMediaStreamTrack;if(!u.canvas)return k.warn("[".concat(a.getTrackId(),"] no canvas on track"));(function(h,p){const m=h.canvas;p.width&&(m.width=Ia(p.width)),p.height&&(m.height=Ia(p.height)),p.framerate&&(m.stopCapture&&m.stopCapture(),m.stopCapture=SI(()=>{!m.startCapture&&m.stopCapture&&m.stopCapture(),m.startCapture&&m.startCapture()},Ia(p.framerate)))})(u,e)}l.maxBitrate!=null&&(a._encoderConfig.bitrateMax=l.maxBitrate/1e3),l.maxFramerate!=null&&(a._encoderConfig.frameRate&&typeof a._encoderConfig.frameRate=="object"?a._encoderConfig.frameRate.max=l.maxFramerate:a._encoderConfig.frameRate={max:l.maxFramerate}),k.debug("[".concat(a.getTrackId(),"] LowStreamEncoderConfig: , ").concat(JSON.stringify(a._encoderConfig))),await this.connection.updateRtpSenderEncodings(a)}publishLowStream(e){var n=this;return ss(function*(){if(!n.connection||n.state!==Un.Connected)return;const i=yield Tn(n.mutex.lock("Locking from P2PChannel.publishLowStream"));try{const l=n.localTrackMap.get(Fe.LocalVideoTrack);if(!l)throw new Re(X.UNEXPECTED_ERROR,"Could not find high stream");if(n.localTrackMap.has(Fe.LocalVideoLowTrack))throw new Re(X.UNEXPECTED_ERROR,"[".concat(n.store.clientId,"] Can't publish low stream when stream already publish"));const u=[{track:n.getLowVideoTrack(l.track,e),type:Fe.LocalVideoLowTrack}];if(yield*N_($8(n.doPublish(n.connection,u))),l.track.muted||!l.track.enabled){var a;const h=(a=n.localTrackMap.get(Fe.LocalVideoLowTrack))===null||a===void 0?void 0:a.id;h!==void 0&&(yield Tn(n.connection.muteLocal([h])))}}finally{i()}})()}async republish(){this.pendingLocalTracks.length>0&&(k.debug("[".concat(this.store.clientId,"] Emit P2PChannelEvents.RequestRePublish to republish tracks.")),await zi(this,vt.RequestRePublish,this.pendingLocalTracks),this.emit(vt.MediaReconnectEnd,this.store.uid),this.pendingLocalTracks=[]),this.pendingLocalDataChannels.length>0&&(k.debug("Emit P2PChannelEvents.RequestRePublishDataChannel to republish datachannels."),await zi(this,vt.RequestRePublishDataChannel,this.pendingLocalDataChannels),this.pendingLocalDataChannels=[]),this._isWaitPcToRePub=!1}async reSubscribe(e){for(let n=this.pendingRemoteTracks.length-1;n>=0;n--){const{user:i,kind:a}=this.pendingRemoteTracks[n];(a!==it.AUDIO||i._audio_added_&&i._audioSSRC)&&(a!==it.VIDEO||i._video_added_&&i._videoSSRC)||this.pendingRemoteTracks.splice(n,1)}if(e)await zi(this,vt.RequestReSubscribe,this.pendingRemoteTracks);else for(const{user:n,kind:i}of this.pendingRemoteTracks)await this.subscribe(n,i,i===it.VIDEO?n._videoSSRC:n._audioSSRC);this.pendingRemoteTracks.forEach(n=>{let{user:i}=n;this.emit(vt.MediaReconnectEnd,i.uid)}),this.pendingRemoteTracks=[]}async unpublish(e){if(!this.connection||this.state!==Un.Connected)return void e.forEach(a=>{const l=this.pendingLocalTracks.indexOf(a);l!==-1&&this.pendingLocalTracks.splice(l,1)});const n=this.filterTobeUnpublishedTracks(e);if(n.length===0)return;const i=n.find(a=>a[0]==="videoLowTrack");return i&&i[1].track.close(),this.doUnpublish(this.connection,n)}async unpublishDataChannel(e){if(!this.connection||this.state!==Un.Connected)return void e.forEach(i=>{const a=this.pendingLocalDataChannels.indexOf(i);a!==-1&&this.pendingLocalDataChannels.splice(a,1)});const n=this.filterTobeUnpublishedDataChannels(e);return n.length!==0?(n.forEach(i=>{const a=this.localDataChannels.indexOf(i);a!==-1&&this.localDataChannels.splice(a,1)}),this.localDataChannels.length===0&&await this.connection.stopDataChannels(this.store.uid),n.map(i=>i.id)):void 0}async unpublishLowStream(){if(!this.connection||this.state!==Un.Connected)return;const e=this.localTrackMap.get(Fe.LocalVideoLowTrack);if(!e)return;e.track.close();const n=[[Fe.LocalVideoLowTrack,e]];return this.doUnpublish(this.connection,n)}async doUnpublish(e,n){const i=this.createGatewayUnpublishMessage(n);return await e.stopSending(n.map(a=>{let[,{id:l}]=a;return l})),this.withdrawLocalTracks(n),this.unbindLocalTrackEvents(n.map(a=>{let[l,{track:u}]=a;return{type:l,track:u}})),n.forEach(a=>{let[l]=a;this.statsCollector.removeLocalStats(l)}),this.localTrackMap.size===0&&this.statsUploader.stopUploadOutboundStats(),i}async subscribeDataChannel(e,n){if(!this.connection||this.state!==Un.Connected)throw new Re(X.INVALID_OPERATION,"Cannot subscribe remote user when peerConnection disconnected.");const i=n.filter(a=>{var l;return!((l=this.remoteDataChannelMap.get(e))!==null&&l!==void 0&&l.get(a.id))});if(i.length!==0)return await this.connection.createDataChannels(e.uid,i),i.forEach(a=>{var l;this.remoteDataChannelMap.has(e)?(l=this.remoteDataChannelMap.get(e))===null||l===void 0||l.set(a.id,a):this.remoteDataChannelMap.set(e,new Map([[a.id,a]]));const u=this.pendingRemoteDataChannels.findIndex(h=>{let{user:p,id:m}=h;return p.uid===e.uid&&m===a.id});u!==-1&&this.pendingRemoteDataChannels.splice(u,1)}),i.map(a=>a.id)}async subscribe(e,n,i,a,l){var u;if(!this.connection||this.state!==Un.Connected)throw new Re(X.INVALID_OPERATION,"Cannot subscribe remote user when peerConnection disconnected.");if((u=this.remoteUserMap.get(e))!==null&&u!==void 0&&u.has(n))return;let h,p,m,E;const S=this.connection.getPreMedia(i);if(S)k.debug("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] preSSRCMap has ssrcId: ").concat(i,", no need to send sub to gateway.")),m=S.transceiver,h=S.track,p=S.mid,E=S.player,S.firstVideoRender&&this.store.firstVideoFrameDecoded(e.uid,{firstPreRender:S.firstVideoRender});else if(l){const O=l.find(B=>{let{stream_type:j}=B;return j===n});if(!O)throw new Re(X.UNEXPECTED_ERROR,"Cannot subscribe to remote ".concat(n," for user: ").concat(e.uid," because subscribe answer from gateway does not contain stream_type: ").concat(n,"."));const H=await this.connection.receive(n,O.ssrcs,String(e._uintid),O.attributes);this.connection instanceof fs&&(m=H.transceiver),h=H.track,p=H.id}else{const O=await this.connection.receive(n,[{ssrcId:i,rtx:a}],String(e._uintid),void 0);this.connection instanceof fs&&(m=O.transceiver),h=O.track,p=O.id}if(n===it.AUDIO?(e._audioTrack?e._audioTrack._updateOriginMediaStreamTrack(h):(e._audioTrack=new np(h,e.uid,e._uintid,this.store),k.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote audio track: ").concat(e._audioTrack.getTrackId()))),m&&e._audioTrack._updateRtpTransceiver(m),this.bindRemoteTrackEvents(e,e._audioTrack)):(e._videoTrack?e._videoTrack._updateOriginMediaStreamTrack(h):(e._videoTrack=new tp(h,e.uid,e._uintid,this.store,E),k.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote video track: ").concat(e._videoTrack.getTrackId())),e._videoTrack.once(us.PLAY_START,()=>{this.store.firstVideoFrameDecoded(e.uid,{playStart:Date.now()})}),e._videoTrack.once(us.PLAY_END,()=>{this.store.firstVideoFrameDecoded(e.uid,{playEnd:Date.now()}),this.reportVideoFirstFrameRender(e)}),E?e._videoTrack.once(us.FIRST_FRAME_RENDER,()=>{this.store.firstVideoFrameDecoded(e.uid,{firstRender:Date.now()}),this.reportVideoFirstFrameRender(e)}):e._videoTrack.once(us.FIRST_FRAME_DECODED,()=>{this.store.firstVideoFrameDecoded(e.uid,{firstRender:Date.now()}),this.reportVideoFirstFrameRender(e)})),m&&e._videoTrack._updateRtpTransceiver(m),this.bindRemoteTrackEvents(e,e._videoTrack)),m&&Q("ENABLE_ENCODED_TRANSFORM")){const{interceptRemoteVideoFrame:O,interceptRemoteAudioFrame:H}=wS();n==it.VIDEO?await O(m.receiver,{onSei:Q("ENABLE_VIDEO_SEI")&&(B=>{var j;return(j=e._videoTrack)===null||j===void 0?void 0:j._onSei(B)})}):n==it.AUDIO&&await H(m.receiver,{enableTopn:!!Q("ENABLE_AUDIO_TOPN"),enableMetadata:!!Q("ENABLE_AUDIO_METADATA"),enablePts:!!Q("ENABLE_AUDIO_PTS"),onMetadata:B=>{this.safeEmit(vt.AudioMetadata,B)},onPts:B=>{this.safeEmit(vt.AudioPts,B)}})}const R=this.remoteUserMap.get(e);R?R.set(n,p):this.remoteUserMap.set(e,new Map([[n,p]])),this.statsCollector.addRemoteStats(e.uid),this.statsUploader.startUploadInboundStats();const w=this.pendingRemoteTracks.findIndex(O=>{let{user:H,kind:B}=O;return H.uid===e.uid&&n===B});w!==-1&&(this.pendingRemoteTracks.splice(w,1),this.emit(vt.MediaReconnectEnd,e.uid))}async massSubscribe(e){return this.massSubscribeNoLock(e)}async massSubscribeNoLock(e){if(!this.connection||this.state!==Un.Connected)throw new Re(X.INVALID_OPERATION,"Cannot subscribeAll remote users when peerConnection disconnected.");e=e.filter(l=>{var u;let{user:h,mediaType:p}=l;return!((u=this.remoteUserMap.get(h))!==null&&u!==void 0&&u.has(p))});const n=[],i=new Map;e.forEach(l=>{if(!this.connection)return;const u=this.connection.getPreMedia(l.ssrcId);if(u){const{track:h,mid:p,transceiver:m,player:E}=u;i.set(l.ssrcId,{track:h,id:p,transceiver:m,player:E})}else n.push(l)});const a=await this.connection.batchReceive(n.map(l=>{let{user:u,mediaType:h,ssrcId:p,rtxSsrcId:m}=l;return{kind:h,ssrcMsg:[{ssrcId:p,rtx:m}],mslabel:String(u._uintid)}}));n.forEach((l,u)=>{i.set(l.ssrcId,a[u])});for(const{user:l,mediaType:u,ssrcId:h}of e){const p=i.get(h);if(!p)return void k.debug("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] cannot find ").concat(l.uid," subscribe data,").concat(u,", ").concat(h));const{track:m,id:E,transceiver:S,player:R}=p;if(S&&Q("ENABLE_ENCODED_TRANSFORM")){const{interceptRemoteVideoFrame:H,interceptRemoteAudioFrame:B}=wS();u==it.VIDEO?await H(S.receiver,{onSei:Q("ENABLE_VIDEO_SEI")&&(j=>{var q;return(q=l._videoTrack)===null||q===void 0?void 0:q._onSei(j)})}):u==it.AUDIO&&await B(S.receiver,{enableTopn:!!Q("ENABLE_AUDIO_TOPN"),enableMetadata:!!Q("ENABLE_AUDIO_METADATA"),enablePts:!!Q("ENABLE_AUDIO_PTS"),onMetadata:j=>{this.safeEmit(vt.AudioMetadata,j)},onPts:j=>{this.safeEmit(vt.AudioPts,j)}})}if(u===it.AUDIO?(l._audioTrack?l._audioTrack._updateOriginMediaStreamTrack(m):(l._audioTrack=new np(m,l.uid,l._uintid,this.store),k.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote audio track: ").concat(l._audioTrack.getTrackId()))),S&&l._audioTrack._updateRtpTransceiver(S),this.bindRemoteTrackEvents(l,l._audioTrack)):(l._videoTrack?l._videoTrack._updateOriginMediaStreamTrack(m):(l._videoTrack=new tp(m,l.uid,l._uintid,this.store,R),k.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote video track: ").concat(l._videoTrack.getTrackId()))),S&&l._videoTrack._updateRtpTransceiver(S),this.bindRemoteTrackEvents(l,l._videoTrack)),Q("ENABLE_VIDEO_SEI")&&S){const{interceptRemoteVideoFrame:H,interceptRemoteAudioFrame:B}=wS();u==it.VIDEO?await H(S.receiver,{onSei:j=>{var q;(q=l._videoTrack)===null||q===void 0||q._onSei(j)}}):u==it.AUDIO&&await B(S.receiver)}const w=this.remoteUserMap.get(l);w?w.set(u,E):this.remoteUserMap.set(l,new Map([[u,E]])),this.statsCollector.addRemoteStats(l.uid),this.statsUploader.startUploadInboundStats();const O=this.pendingRemoteTracks.findIndex(H=>{let{user:B,kind:j}=H;return B.uid===l.uid&&u===j});O!==-1&&(this.pendingRemoteTracks.splice(O,1),this.emit(vt.MediaReconnectEnd,l.uid))}}async unsubscribe(e,n,i){const a=this.pendingRemoteTracks.filter(h=>{let{user:p,kind:m}=h;return n!==void 0?p.uid===e.uid&&n===m:p.uid===e.uid});if(a.forEach(h=>{const p=this.pendingRemoteTracks.indexOf(h);this.pendingRemoteTracks.splice(p,1)}),this.connection&&this.state===Un.Connected||i||a.forEach(h=>{let{kind:p}=h;var m;if(p===it.AUDIO)(m=e._audioTrack)===null||m===void 0||m._destroy(),e._audioTrack=void 0;else if(p===it.VIDEO){var E;(E=e._videoTrack)===null||E===void 0||E._destroy(),e._videoTrack=void 0}}),!this.connection||this.state!==Un.Connected)return;const l=this.filterTobeUnSubscribedTracks(e,n);if(l.length===0)return;await this.connection.stopReceiving(l.map(h=>{let[,{id:p}]=h;return p}));const u=this.createUnsubscribeMessage(l);return this.withdrawRemoteTracks(l),this.remoteUserMap.size===0&&this.statsUploader.stopUploadInboundStats(),l.forEach(h=>{let[p,{kind:m}]=h;var E,S;if(m===it.VIDEO&&p._videoSSRC&&((E=this.connection)===null||E===void 0||E.setStatsRemoteVideoIsReady(p._videoSSRC,!1)),m===it.VIDEO)this.unbindRemoteTrackEvents(p._videoTrack),i||((S=p._videoTrack)===null||S===void 0||S._destroy(),p._videoTrack=void 0);else if(m===it.AUDIO){var R;this.unbindRemoteTrackEvents(p._audioTrack),!i&&((R=p._audioTrack)===null||R===void 0||R._destroy(),p._audioTrack=void 0)}}),u}async unsubscribeDataChannel(e,n){if(n.forEach(l=>{const u=this.pendingRemoteDataChannels.findIndex(h=>h.id===l.id);u!==-1&&this.pendingRemoteDataChannels.splice(u,1)}),!this.connection)return;const i=this.filterTobeUnSubscribedDataChannels(e,n);if(i.length===0)return;n.forEach(l=>{l._close()});const a=this.remoteDataChannelMap.get(e);return i.forEach(l=>{a&&a.delete(l.id)}),a&&a.size===0&&(this.remoteDataChannelMap.delete(e),await this.connection.stopDataChannels(e.uid)),i.map(l=>l.id)}async massUnsubscribe(e){return this.massUnsubscribeNoLock(e)}async massUnsubscribeNoLock(e){let n=[];for(const{user:l,mediaType:u}of e){const h=this.pendingRemoteTracks.filter(p=>{let{user:m,kind:E}=p;return u!==void 0?m.uid===l.uid&&u===E:m.uid===l.uid});h.forEach(p=>{const m=this.pendingRemoteTracks.indexOf(p);this.pendingRemoteTracks.splice(m,1)}),n=n.concat(h)}if(!this.connection||this.state!==Un.Connected)return void n.forEach(l=>{let{user:u,kind:h}=l;var p;if(h===it.AUDIO)(p=u._audioTrack)===null||p===void 0||p._destroy(),u._audioTrack=void 0;else if(h===it.VIDEO){var m;(m=u._videoTrack)===null||m===void 0||m._destroy(),u._videoTrack=void 0}});const i=Ms(e).call(e,(l,u)=>{let{user:h,mediaType:p}=u;const m=this.filterTobeUnSubscribedTracks(h,p);return l.concat(m)},[]);if(i.length===0)return;await this.connection.stopReceiving(i.map(l=>{let[,{id:u}]=l;return u}));const a=this.createUnsubscribeAllMessage(i);return this.withdrawRemoteTracks(i),this.remoteUserMap.size===0&&this.statsUploader.stopUploadInboundStats(),i.forEach(l=>{let[u,{kind:h}]=l;var p,m;if(h===it.VIDEO&&u._videoSSRC&&((p=this.connection)===null||p===void 0||p.setStatsRemoteVideoIsReady(u._videoSSRC,!1)),h===it.VIDEO)this.unbindRemoteTrackEvents(u._videoTrack),(m=u._videoTrack)===null||m===void 0||m._destroy(),u._videoTrack=void 0;else if(h===it.AUDIO){var E;this.unbindRemoteTrackEvents(u._audioTrack),(E=u._audioTrack)===null||E===void 0||E._destroy(),u._audioTrack=void 0}}),a}isPreSubScribe(e){return!this.connection||this.state!==Un.Connected?!1:!!this.connection.getPreMedia(e)}async muteRemote(e,n){if(!this.connection)return;const i=this.remoteUserMap.get(e);if(!i)return void k.warning("[".concat(this.store.clientId,"] P2PChannel.muteRemote has no remote user ").concat(e.uid,"."));if(!i.get(n))return void k.warning("[".concat(this.store.clientId,"] P2PChannel.muteRemote has no remote user ").concat(e.uid," media type ").concat(n,"."));const a=n===it.VIDEO?e._videoSSRC:e._audioSSRC;a!==void 0&&this.connection.setStatsRemoteVideoIsReady(a,!1)}async unmuteRemote(e,n){return this.unmuteRemoteNoLock(e,n)}async unmuteRemoteNoLock(e,n){if(!this.connection)return;const i=this.remoteUserMap.get(e);if(!i)return void k.warning("[".concat(this.store.clientId,"] P2PChannel.unmuteRemote has no remote user ").concat(e.uid,"."));i.get(n)||k.warning("[".concat(this.store.clientId,"] P2PChannel.unmuteRemote has no remote user ").concat(e.uid," media type ").concat(n,"."))}addAudioMetadata(e){const n=this.localTrackMap.get(Fe.LocalAudioTrack),i=n&&n.track;i&&i.metadata.push(e)}getAllTracks(e){const n=this.localTrackMap.get(Fe.LocalAudioTrack);if((n==null?void 0:n.track)instanceof ui){const i=n.track;return Array.from(this.localTrackMap.entries()).filter(a=>{let[l]=a;return l!==Fe.LocalAudioTrack}).filter(a=>{let[l]=a;return!(e&&l===Fe.LocalVideoLowTrack)}).map(a=>{let[,{track:l}]=a;return l}).concat(i.trackList)}return Array.from(this.localTrackMap.entries()).filter(i=>{let[a]=i;return!(e&&a===Fe.LocalVideoLowTrack)}).map(i=>{let[,{track:a}]=i;return a})}getAllDataChannels(){return this.localDataChannels}reportPublishEvent(e,n,i,a,l){if(e){const h=this.localTrackMap.get(Fe.LocalAudioTrack),p=a?this.localTrackMap.get(Fe.LocalVideoLowTrack):this.localTrackMap.get(Fe.LocalVideoTrack);ct.publish(this.store.sessionId,{eventElapse:Zi.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:e,ec:n,audioName:h==null?void 0:h.track.getTrackLabel(),videoName:p==null?void 0:p.track.getTrackLabel(),screenshare:(p==null?void 0:p.track._hints.indexOf(qn.SCREEN_TRACK))!==-1,audio:!!h,video:!!p,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:l})}else{var u;i||(i=[]);const h=i.find(m=>m instanceof Mr),p=a?(u=this.localTrackMap.get(Fe.LocalVideoTrack))===null||u===void 0?void 0:u.track:i.find(m=>m instanceof sr);ct.publish(this.store.sessionId,{eventElapse:Zi.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:e,ec:n,audioName:h==null?void 0:h.getTrackLabel(),videoName:p==null?void 0:p.getTrackLabel(),screenshare:(p==null?void 0:p._hints.indexOf(qn.SCREEN_TRACK))!==-1,audio:!!h,video:!!p,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:l})}}reportSubscribeEvent(e,n,i,a){const l=a===it.VIDEO?i._videoSSRC:i._audioSSRC;l&&ct.subscribe(this.store.sessionId,{succ:e,ec:n,video:a===it.VIDEO,audio:a===it.AUDIO,peerid:i.uid,subscribeRequestid:l,p2pid:this.store.p2pId,eventElapse:Zi.measureFromSubscribeStart(this.store.clientId,l),preSsrc:this.isPreSubScribe(l)})}reset(){k.debug("[".concat(this.store.clientId,"] P2PChannel.reset")),this.mutex=new qi("P2PChannel-mutex",this.store.clientId),this.connection&&(this.resetConnection(this.connection),this.connection=void 0),this.shouldForwardP2PCreation&&(this.connection=kS(this.store),this.emit(vt.PeerConnectionStateChange,this.connection.peerConnectionState),this.bindConnectionEvents(this.connection)),this.statsUploader.stopUploadOutboundStats(),this.statsUploader.stopUploadInboundStats(),this.statsUploader.stopUploadTransportStats(),this.statsUploader.stopUploadExtensionUsageStats(),this.statsUploader.stopUploadBaseStats(),this.unbindLocalTrackEvents(),this.unbindAllRemoteTrackEvents(),this.unbindRtpTransceiver();const e=this.localTrackMap.get(Fe.LocalAudioTrack);if((e==null?void 0:e.track)instanceof ui){if(e.track.trackList.length>0){const n=e.track;e.track.trackList.forEach(i=>{n.removeAudioTrack(i)})}e.track.close()}this.localTrackMap.clear(),this.remoteUserMap.clear(),this.statsCollector.removeRemoteStats(),this.statsCollector.removeLocalStats(),this.iceFailedCount=0,this.dtlsFailedCount=0,this.pendingLocalTracks=[],this.pendingRemoteTracks=[],this.localDataChannels=[],this.remoteDataChannelMap.clear(),this.pendingLocalDataChannels=[],this.pendingRemoteDataChannels=[],this.state=Un.Disconnected}getStats(){var e;return(e=this.connection)===null||e===void 0?void 0:e.getStats()}getRemoteVideoIsReady(e){var n;return((n=this.connection)===null||n===void 0?void 0:n.getRemoteVideoIsReady(e))||!1}getLocalAudioVolume(){const e=this.localTrackMap.get(Fe.LocalAudioTrack);if(e)return e.track.getVolumeLevel()}getLocalVideoSize(){const e=this.localTrackMap.get(Fe.LocalVideoTrack);if(e)return{width:e.track.videoWidth||0,height:e.track.videoHeight||0}}getEncoderConfig(e){const n=this.localTrackMap.get(e);return n&&n.track instanceof sr||n&&n.track instanceof Mr?n.track._encoderConfig:void 0}getLocalMedia(e){return this.localTrackMap.get(e)}hasLocalMedia(){return this.localTrackMap.size>0}hasRemoteMedia(e,n){if(!e)return this.remoteUserMap.size>0;const i=this.remoteUserMap.get(e);return!!i&&(!n||i.has(n))}async hasRemoteMediaWithLock(e,n){if(!e)return this.remoteUserMap.size>0;const i=this.remoteUserMap.get(e);return!!i&&(!n||i.has(n))}getRemoteMedia(e){var n;const i=Array.from(ca(n=this.remoteUserMap).call(n)).find(a=>a.uid===e);return i?{audioTrack:i.audioTrack,audioSSRC:i._audioSSRC,videoTrack:i.videoTrack,videoSSRC:i._videoSSRC}:{}}getAudioLevels(){let e=Array.from(this.remoteUserMap.entries()).map(i=>{let[a]=i;return{uid:a.uid,level:a.audioTrack?100*a.audioTrack._source.getAccurateVolumeLevel():0}});const n=this.localTrackMap.get(Fe.LocalAudioTrack);return n&&e.push({level:100*n.track._source.getAccurateVolumeLevel(),uid:this.store.uid}),e=$d(e).call(e,(i,a)=>i.level-a.level),e}async disconnectForReconnect(){this.connection&&(k.debug("[".concat(this.store.clientId,"] P2PChannel.disconnectForReconnect closing P2PConnection")),this.state=Un.Reconnecting,Q("KEEP_LAST_FRAME")&&this.remoteUserMap.size!==0&&Array.from(this.remoteUserMap.entries()).forEach(e=>{let[n]=e;var i;n._videoTrack&&n._videoTrack._player&&((i=n._videoTrack._player.getVideoElement())===null||i===void 0||i.pause(),n._videoTrack._player.isKeepLastFrame=!0,n._videoTrack._originMediaStreamTrack.stop())}),this.resetConnection(this.connection),this.connection=void 0,this.shouldForwardP2PCreation&&(this.connection=kS(this.store),this.emit(vt.PeerConnectionStateChange,this.connection.peerConnectionState),this.bindConnectionEvents(this.connection)),this.localTrackMap.size!==0&&(Array.from(this.localTrackMap.entries()).forEach(e=>{var n;let[i,{track:a}]=e;switch(i){case Fe.LocalVideoTrack:Ge(n=a._hints).call(n,qn.LOW_STREAM)?a.close():this.pendingLocalTracks.push(a);break;case Fe.LocalAudioTrack:a instanceof ui?this.pendingLocalTracks=this.pendingLocalTracks.concat(a.trackList):this.pendingLocalTracks.push(a);case Fe.LocalVideoLowTrack:}}),this.emit(vt.MediaReconnectStart,this.store.uid)),this.unbindLocalTrackEvents(),this.localTrackMap.clear(),this.remoteUserMap.size!==0&&Array.from(this.remoteUserMap.entries()).forEach(e=>{let[n,i]=e;Array.from(ca(i).call(i)).forEach(a=>{this.setPendingRemoteMedia(n,a)}),this.emit(vt.MediaReconnectStart,n.uid)}),this.unbindAllRemoteTrackEvents(),this.remoteUserMap.clear(),this.localDataChannels.length!==0&&(this.localDataChannels.forEach(e=>{this.pendingLocalDataChannels.push(e)}),this.localDataChannels.length=0),this.remoteDataChannelMap.size!==0&&(Array.from(this.remoteDataChannelMap.entries()).forEach(e=>{let[n,i]=e;Array.from(ca(i).call(i)).forEach(a=>{this.setPendingRemoteDataChannel(n,a)})}),this.remoteDataChannelMap.clear()),this.statsUploader.stopUploadOutboundStats(),this.statsUploader.stopUploadInboundStats(),this.statsUploader.stopUploadTransportStats(),k.debug("[".concat(this.store.clientId,"] P2PChannel disconnected, waiting to reconnect.")))}hasPendingRemoteDataChannel(e,n){for(const i of this.pendingRemoteDataChannels){const{user:a,id:l}=i;if((e instanceof qu?e.uid:e)===a.uid&&l===n)return!0}return!1}setPendingRemoteDataChannel(e,n){this.hasPendingRemoteDataChannel(e,n)||this.pendingRemoteDataChannels.push({user:e,id:n})}hasPendingRemoteMedia(e,n){for(const i of this.pendingRemoteTracks){const{user:a,kind:l}=i;if((e instanceof qu?e.uid:e)===a.uid&&n===l)return!0}return!1}setPendingRemoteMedia(e,n){this.hasPendingRemoteMedia(e,n)||this.pendingRemoteTracks.push({user:e,kind:n})}restartICE(e){var n=this;return ss(function*(){if(!n.connection||n.state!==Un.Connected)return;const i=yield Tn(n.mutex.lock("From P2PChannel.restartICE"));let a;try{a=yield Tn(n.connection.restartICE(e));const u=yield Tn(a.next());if(u.done)return;const h=u.value,p=yield h;switch(pA(n.connection)&&n.reportPCStats(Date.now(),!1,n._pcStatsUploadType),e){case Qi.UDP_TCP_RELAY:n._pcStatsUploadType=ql.UDP_TCP_RESTART;break;case Qi.TCP_RELAY:n._pcStatsUploadType=ql.TCP_RESTART;break;case Qi.RELAY:n._pcStatsUploadType=ql.RELAY_RESTART;break;default:n._pcStatsUploadType=ql.OLD_RESTART}n._isTryConnecting=!0,a.next(p)}catch(u){var l;(l=a)===null||l===void 0||l.throw(u)}finally{i()}})()}getUplinkNetworkQuality(){if(!this.connection)return 0;const e=this.connection.getStats(),n=this.localTrackMap.get(Fe.LocalVideoTrack),i=this.localTrackMap.get(Fe.LocalAudioTrack),a=e.videoSend.find(O=>O.ssrc===(n==null?void 0:n.ssrcs[0].ssrcId)),l=e.audioSend.find(O=>O.ssrc===(i==null?void 0:i.ssrcs[0].ssrcId));if(!a||!l)return 1;const u=ja(this,vt.NeedSignalRTT),h=a?a.rttMs:void 0,p=l?l.rttMs:void 0,m=h&&p?(h+p)/2:h||p,E=(m&&u?(m+u)/2:m||u)||0,S=100*e.sendPacketLossRate*.7/50+.3*E/1500,R=S<.17?1:S<.36?2:S<.59?3:S<.1?4:5,w=n==null?void 0:n.track;if(w&&w._encoderConfig&&w._hints.indexOf(qn.SCREEN_TRACK)===-1){const O=w._encoderConfig.bitrateMax,H=e.bitrate.actualEncoded;if(O&&H){const B=(1e3*O-H)/(1e3*O);return A6[B<.15?0:B<.3?1:B<.45?2:B<.6?3:4][R]}}return R}getDownlinkNetworkQuality(){if(!this.connection)return 0;const e=this.connection.getStats();let n=0;return Array.from(this.remoteUserMap.entries()).forEach(i=>{let[a]=i;const l=a._audioSSRC,u=a._videoSSRC,h=e.audioRecv.find(H=>H.ssrc===l),p=e.videoRecv.find(H=>H.ssrc===u);if(!h&&!p)return void(n+=1);const m=ja(this,vt.NeedSignalRTT),E=e.rtt,S=(E&&m?(E+m)/2:E||m)||0,R=h?h.jitterMs:void 0,w=e.recvPacketLossRate;let O=.7*w*100/50+.3*S/1500;R&&(O=.6*w*100/50+.2*S/1500+.2*R/400),n+=O<.1?1:O<.17?2:O<.36?3:O<.59?4:5}),this.remoteUserMap.size>0?Math.round(n/this.remoteUserMap.size):n}async muteLocalTrack(e){return new et((n,i)=>{this.handleMuteLocalTrack(e,n,i)})}async replaceTrack(e,n){var i;if(k.debug("[".concat(this.store.clientId,"] P2PChannel replaceTrack from [").concat(e.getTrackId(),"] to [").concat(n.getTrackId(),"]")),!this.connection||this.state!==Un.Connected)return;const a=Array.from(this.localTrackMap.entries()).find(u=>{let[,{track:h}]=u;return e===h});if(!a)return;const l=a[0];if(e!==n&&(this.unbindLocalTrackEvents([{track:e,type:l}]),this.bindLocalTrackEvents([{track:n,type:l}]),a[1].track=n),await((i=this.connection)===null||i===void 0?void 0:i.replaceTrack(n,a[1].id)),this.isPlanB){const u=a[1];u.id=n._mediaStreamTrack.id,this.localTrackMap.set(l,u)}if(l===Fe.LocalVideoTrack&&!Q("DISABLE_DUAL_STREAM_USE_ENCODING")&&Rn().supportDualStreamEncoding){const u=this.localTrackMap.get(Fe.LocalVideoLowTrack);if(u){const h=e._mediaStreamTrack.clone();u.track._originMediaStreamTrack.stop(),u.track._mediaStreamTrack=h,u.track._originMediaStreamTrack=h,await new et((p,m)=>{this.handleReplaceTrack(u.track,p,m,!0)})}}}filterTobePublishedTracks(e,n,i){const a=[],l=this.getAllTracks();e=$f(e=e.filter(m=>l.indexOf(m)===-1));let u,h=!1;const p=this.localTrackMap.get(Fe.LocalAudioTrack);for(const m of e){if(m instanceof sr&&(this.localTrackMap.has(Fe.LocalVideoTrack)||h?new Re(X.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS).throw():(a.push({track:m,type:Fe.LocalVideoTrack}),h=!0),n)){const E=this.getLowVideoTrack(m,i);a.push({track:E,type:Fe.LocalVideoLowTrack})}if(m instanceof Mr)if(p){const E=p.track;if(E instanceof ui)hA([m]),E.addAudioTrack(m),this.bindLocalAudioTrackEvents(m,!0);else{const S=fA([E,m]);k.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection will replace audioTrack [").concat(S.getTrackId(),"]")),this.replaceTrack(E,S)}}else u instanceof ui?(hA([m]),u.addAudioTrack(m)):u||!m._useAudioElement&&Rn().webAudioMediaStreamDest&&!m._bypassWebAudio?u=fA(u?[m,u]:[m]):u=m}return u&&(k.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection will send audioTrack [").concat(u.getTrackId(),"]")),a.push({track:u,type:Fe.LocalAudioTrack})),a}filterTobeUnpublishedTracks(e){const n=[],i=this.getAllTracks();e=$f(e=e.filter(a=>i.indexOf(a)!==-1));for(const a of e){if(a instanceof Mr){const l=this.localTrackMap.get(Fe.LocalAudioTrack);if(!l)continue;l.track instanceof ui?(l.track.removeAudioTrack(a),this.unbindLocalAudioTrackEvents(a),l.track.trackList.length===0&&(n.push([Fe.LocalAudioTrack,l]),l.track.close())):n.push([Fe.LocalAudioTrack,l])}if(a instanceof sr){const l=this.localTrackMap.get(Fe.LocalVideoTrack);if(!l)continue;n.push([Fe.LocalVideoTrack,l]);const u=this.localTrackMap.get(Fe.LocalVideoLowTrack);u&&n.push([Fe.LocalVideoLowTrack,u])}}return n}filterTobePublishedDataChannels(e){return e=(e=$f(e)).filter(n=>this.localDataChannels.findIndex(i=>i.id===n.id)===-1)}filterTobeUnpublishedDataChannels(e){return e=(e=(e=$f(e)).filter(n=>this.localDataChannels.indexOf(n)!==-1)).filter(n=>n._originDataChannel)}bindLocalTrackEvents(e){e.forEach(n=>{let{track:i,type:a}=n;switch(a){case Fe.LocalVideoTrack:i.addListener(at.GET_STATS,this.handleGetLocalVideoStats),i.addListener(at.GET_RTC_STATS,this.handleGetRTCStats),i.addListener(at.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),i.addListener(at.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),i.addListener(at.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),i.addListener(at.NEED_UPDATE_VIDEO_SEND_PARAMETERS,this.handleUpdateVideoSendParameters),i.addListener(at.NEED_REPLACE_TRACK,this.handleReplaceTrack),i.addListener(at.NEED_MUTE_TRACK,this.handleMuteLocalTrack),i.addListener(at.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case Fe.LocalAudioTrack:this.bindLocalAudioTrackEvents(i);case Fe.LocalVideoLowTrack:}})}bindLocalAudioTrackEvents(e,n){e instanceof ui?e.trackList.forEach(i=>{i.addListener(at.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),i.addListener(at.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),i.addListener(at.GET_STATS,this.handleGetLocalAudioStats),i.addListener(at.NEED_MUTE_TRACK,this.handleMuteLocalTrack),i.addListener(at.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)}):(e.addListener(at.GET_STATS,this.handleGetLocalAudioStats),e.addListener(at.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.addListener(at.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.addListener(at.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.addListener(at.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack),n||(e.addListener(at.NEED_REPLACE_TRACK,this.handleReplaceTrack),e.addListener(at.NEED_REPLACE_MIXING_TRACK,this.handleReplaceMixingTrack)))}unbindLocalTrackEvents(e){e||(e=Array.from(this.localTrackMap.entries()).map(n=>{let[i,{track:a}]=n;return{track:a,type:i}})),e.forEach(n=>{let{track:i,type:a}=n;switch(a){case Fe.LocalVideoTrack:i.off(at.GET_STATS,this.handleGetLocalVideoStats),i.off(at.GET_RTC_STATS,this.handleGetRTCStats),i.off(at.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),i.off(at.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),i.off(at.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),i.off(at.NEED_UPDATE_VIDEO_SEND_PARAMETERS,this.handleUpdateVideoSendParameters),i.off(at.NEED_REPLACE_TRACK,this.handleReplaceTrack),i.off(at.NEED_MUTE_TRACK,this.handleMuteLocalTrack),i.off(at.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case Fe.LocalAudioTrack:this.unbindLocalAudioTrackEvents(i);case Fe.LocalVideoLowTrack:}})}unbindLocalAudioTrackEvents(e){e instanceof ui?e.trackList.forEach(n=>{n.off(at.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),n.off(at.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),n.off(at.GET_STATS,this.handleGetLocalAudioStats),n.off(at.NEED_MUTE_TRACK,this.handleMuteLocalTrack),n.off(at.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)}):(e.off(at.GET_STATS,this.handleGetLocalAudioStats),e.off(at.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.off(at.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.off(at.NEED_REPLACE_TRACK,this.handleReplaceTrack),e.off(at.NEED_REPLACE_MIXING_TRACK,this.handleReplaceMixingTrack),e.off(at.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.off(at.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack))}bindRemoteTrackEvents(e,n){n instanceof tp&&n.addListener(at.GET_STATS,i=>{i(this.handleGetRemoteVideoStats(e))}),n instanceof np&&n.addListener(at.GET_STATS,i=>{i(this.handleGetRemoteAudioStats(e))})}unbindRemoteTrackEvents(e){e&&e.removeAllListeners(at.GET_STATS)}unbindAllRemoteTrackEvents(){Array.from(this.remoteUserMap.entries()).forEach(e=>{let[n,i]=e;i.has(it.AUDIO)&&this.unbindRemoteTrackEvents(n._audioTrack),i.has(it.VIDEO)&&this.unbindRemoteTrackEvents(n._videoTrack)})}createGatewayPublishMessage(e,n){return e.map((i,a)=>{var l;let u,h,{track:p,type:m}=i;switch(m){case Fe.LocalAudioTrack:u=Bn.Audio,h={dtx:p instanceof P0&&p._config.DTX,hq:!1,lq:!1,stereo:!1,speech:!1};break;case Fe.LocalVideoTrack:u=Ge(l=p._hints).call(l,qn.SCREEN_TRACK)?Bn.Screen:Bn.High,h=El(El({},z6(p)),{},{codec:this.store.codec,svc_mode:yS()});break;case Fe.LocalVideoLowTrack:u=Bn.Low,h=El(El({},z6(p)),{},{codec:this.store.codec,svc_mode:yS()})}return{stream_type:u,attributes:h,ssrcs:n[a]}})}createGatewayUnpublishMessage(e){return e.map(n=>{var i;let a,[l,{track:u,ssrcs:h,id:p}]=n;switch(l){case Fe.LocalVideoTrack:a=Ge(i=u._hints).call(i,qn.SCREEN_TRACK)?Bn.Screen:Bn.High;break;case Fe.LocalAudioTrack:a=Bn.Audio;break;case Fe.LocalVideoLowTrack:a=Bn.Low}return{stream_type:a,ssrcs:h,mid:p}})}assignLocalTracks(e,n){e.forEach((i,a)=>{let{track:l,type:u}=i;this.localTrackMap.set(u,{track:l,id:n[a].id,ssrcs:n[a].localSSRC})})}withdrawLocalTracks(e){e.forEach(n=>{let[i]=n;this.localTrackMap.delete(i)})}bindConnectionEvents(e){e.onConnectionStateChange=async n=>{if(k.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onConnectionStateChange(").concat(n,")")),this.emit(vt.PeerConnectionStateChange,n),n==="connecting"&&e instanceof fs&&!Or()&&Q("FIRST_TCP_CANDIDATE")&&window.setTimeout(()=>{n==="connecting"&&e.extendCandidate()},Q("FIRST_TCP_CANDIDATE_INTERVAL")),n!=="connected"||this.store.keyMetrics.peerConnectionEnd||this.store.peerConnectionEnd(),n==="connected"&&(this._restartTimer&&(window.clearTimeout(this._restartTimer),this._restartTimer=void 0),e instanceof fs&&B8(e,!0),this._isTryConnecting&&this.reportPCStats(Date.now(),!0,this._pcStatsUploadType),this._isTryConnecting=!1,this._isStartRestartIce=!1,this._pcStatsUploadType=ql.DISCONNECTED_OR_FAILED,ja(this,vt.QueryClientConnectionState)==="CONNECTED"&&this._isWaitPcToRePub)){const i=this.pendingLocalTracks.map(l=>l.getTrackId()),a=this.pendingLocalDataChannels.map(l=>"dc_".concat(l.id));ct.reportApiInvoke(this.store.sessionId,{name:Ur.REPUB_AFTER_PC_CONNECTED,options:i.concat(a),tag:gr.TRACER}).onSuccess(),this.republish()}if(Q("NEW_ICE_RESTART")&&e instanceof fs&&!Or()&&!this._forceTurn){if(Ge(U6).call(U6,n)){if(this._isStartRestartIce)return;this._isStartRestartIce=!0;const i=l=>{pA(e)&&(k.debug("[".concat(this.store.clientId,"] [P2PChannel] try to restartICE, type is ").concat(l)),ja(this,vt.QueryClientConnectionState)==="CONNECTED"&&this.emit(vt.RequestRestartICE,l))},a=()=>{pA(e)&&(this.reportPCStats(Date.now(),!1,this._pcStatsUploadType),k.debug("[".concat(this.store.clientId,"] P2PConnection disconnected timeout, force reconnect")),setTimeout(()=>this.emit(vt.P2PLost),0),this.iceFailedCount+=1,this.requestReconnect())};return void(this._restartTimer=window.setTimeout(()=>{V8(e,i,a)},800))}}else{if(n==="disconnected"&&e.iceConnectionState==="disconnected")return setTimeout(()=>{e.iceConnectionState==="disconnected"&&Q("ICE_RESTART")&&ja(this,vt.QueryClientConnectionState)==="CONNECTED"&&this.emit(vt.RequestRestartICE)},800),void setTimeout(()=>{e.peerConnectionState==="disconnected"&&(k.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection disconnected timeout 4000ms, force reconnect")),this.reportPCStats(Date.now(),!1,this._pcStatsUploadType),this._isTryConnecting=!1,setTimeout(()=>this.emit(vt.P2PLost),0),this.iceFailedCount+=1,this.requestReconnect())},4e3);n==="failed"&&(k.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection state failed, force reconnect")),this.reportPCStats(Date.now(),!1,this._pcStatsUploadType),setTimeout(()=>this.emit(vt.P2PLost),0),this.iceFailedCount+=1,await this.requestReconnect())}},e.onICEConnectionStateChange=n=>{n!=="connected"||this.store.keyMetrics.iceConnectionEnd||this.store.iceConnectionEnd(),k.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICEConnectionStateChange(").concat(n,")")),ct.reportApiInvoke(this.store.sessionId,{name:"ICEConnectionStateChange",options:n,tag:gr.TRACER}).onSuccess(),this.emit(vt.IceConnectionStateChange,n)},e.onICETransportStateChange=n=>{k.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICETransportStateChange(").concat(n,")"))},e.onDTLSTransportStateChange=n=>{k.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportStateChange(").concat(n,")"))},e.onDTLSTransportError=n=>{k.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportError(").concat(n,")"))},e.onFirstAudioDecoded=n=>{var i;const a=Array.from(ca(i=this.remoteUserMap).call(i)).find(u=>u._audioSSRC===n);var l;a&&(this.store.subscribe(a.uid,"audio",void 0,void 0,void 0,Date.now()),(l=a.audioTrack)===null||l===void 0||l.emit(us.FIRST_FRAME_DECODED),ct.firstRemoteFrame(this.store.sessionId,Ei.FIRST_AUDIO_DECODE,pr.FIRST_AUDIO_DECODE,{peer:a._uintid,subscribeElapse:Zi.measureFromSubscribeStart(this.store.clientId,n),subscribeRequestid:n,p2pid:this.store.p2pId}))},e.onFirstAudioReceived=n=>{var i;const a=Array.from(ca(i=this.remoteUserMap).call(i)).find(l=>l._audioSSRC===n);a&&ct.firstRemoteFrame(this.store.sessionId,Ei.FIRST_AUDIO_RECEIVED,pr.FIRST_AUDIO_RECEIVED,{peer:a._uintid,subscribeElapse:Zi.measureFromSubscribeStart(this.store.clientId,n),subscribeRequestid:n,p2pid:this.store.p2pId})},e.onFirstVideoDecoded=(n,i,a)=>{var l;const u=Array.from(ca(l=this.remoteUserMap).call(l)).find(h=>h._videoSSRC===n);u&&this.store.firstVideoFrameDecoded(u.uid,{firstDecoded:Date.now()}),this.reportVideoFirstFrameDecoded(n,i,a)},e.onFirstVideoRender=n=>{var i;const a=Array.from(ca(i=this.remoteUserMap).call(i)).find(l=>l._videoSSRC===n);a&&(this.store.firstVideoFrameDecoded(a.uid,{firstPreRender:Date.now()}),this.reportVideoFirstFrameRender(a))},e.onFirstVideoReceived=n=>{var i;const a=Array.from(ca(i=this.remoteUserMap).call(i)).find(l=>l._videoSSRC===n);a&&(this.store.firstVideoFrameDecoded(a.uid,{firstReceived:Date.now()}),ct.firstRemoteFrame(this.store.sessionId,Ei.FIRST_VIDEO_RECEIVED,pr.FIRST_VIDEO_RECEIVED,{peer:a._uintid,subscribeElapse:Zi.measureFromSubscribeStart(this.store.clientId,n),subscribeRequestid:n,p2pid:this.store.p2pId}))},e.onSelectedLocalCandidateChanged=(n,i)=>{const a=n.candidateType==="relay",l=i.candidateType==="relay";i.candidateType!=="unknown"&&a===l||this.emit(vt.ConnectionTypeChange,a),k.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.SelectedLocalCandidateChanged(").concat(JSON.stringify(zu(i))," -> ").concat(JSON.stringify(zu(n)),")"))},e.onSelectedRemoteCandidateChanged=(n,i)=>{k.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.SelectedRemoteCandidateChanged(").concat(JSON.stringify(zu(i))," -> ").concat(JSON.stringify(zu(n)),")"))},e.onFirstVideoDecodedTimeout=n=>{this.reportVideoFirstFrameDecoded(n,void 0,void 0,!0)},e.getLocalVideoStats=()=>{const n=this.statsCollector.getLocalVideoTrackStats(),i=this.statsCollector.getRTCStats();return El(El({},n),i)},e.onICECandidateError=n=>{this._iceError=n}}resetConnection(e){e instanceof fs&&function(n){mp.delete(n.id),B8(n)}(e),e.close(),this.emit(vt.PeerConnectionStateChange,"closed"),function(n){n.onConnectionStateChange=void 0,n.onICEConnectionStateChange=void 0,n.onICETransportStateChange=void 0,n.onDTLSTransportStateChange=void 0,n.onDTLSTransportError=void 0,n.onFirstAudioDecoded=void 0,n.onFirstAudioReceived=void 0,n.onFirstVideoDecoded=void 0,n.onFirstVideoReceived=void 0,n.onSelectedLocalCandidateChanged=void 0,n.onSelectedRemoteCandidateChanged=void 0,n.onFirstVideoDecodedTimeout=void 0,n.getLocalVideoStats=void 0}(e),this._isWaitPcToRePub=!1}filterTobeMutedTracks(e){const n=[];if(this.getAllTracks().indexOf(e)===-1)return n;const i=this.localTrackMap.get(Fe.LocalAudioTrack);if(e instanceof Mr&&(i==null?void 0:i.track)instanceof ui)return i.track.isActive||n.push([Fe.LocalAudioTrack,i]),n;const a=Array.from(this.localTrackMap.entries()).find(l=>{let[,{track:u}]=l;return e===u});if(a&&(n.push(a),a[0]===Fe.LocalVideoTrack)){const l=this.localTrackMap.get(Fe.LocalVideoLowTrack);l&&n.push([Fe.LocalVideoLowTrack,l])}return n}filterTobeUnmutedTracks(e){const n=[],i=this.localTrackMap.get(Fe.LocalAudioTrack);if(e instanceof Mr&&(i==null?void 0:i.track)instanceof ui)return i.track.isActive&&n.push([Fe.LocalAudioTrack,i]),n;const a=Array.from(this.localTrackMap.entries()).find(l=>{let[,{track:u}]=l;return e===u});if(a)if(a[0]===Fe.LocalVideoTrack){n.push(a);const l=this.localTrackMap.get(Fe.LocalVideoLowTrack);l&&n.push([Fe.LocalVideoLowTrack,l])}else n.push(a);return n}createMuteMessage(e){return e.map(n=>{var i;let a,[l,{track:u,ssrcs:h,id:p}]=n;switch(l){case Fe.LocalAudioTrack:a=Bn.Audio;break;case Fe.LocalVideoTrack:a=Ge(i=u._hints).call(i,qn.SCREEN_TRACK)?Bn.Screen:Bn.High;break;case Fe.LocalVideoLowTrack:a=Bn.Low}return{stream_type:a,ssrcs:h,mid:p}})}createUnmuteMessage(e){return e.map(n=>{var i;let a,[l,{track:u,ssrcs:h,id:p}]=n;switch(l){case Fe.LocalAudioTrack:a=Bn.Audio;break;case Fe.LocalVideoTrack:a=Ge(i=u._hints).call(i,qn.SCREEN_TRACK)?Bn.Screen:Bn.High;break;case Fe.LocalVideoLowTrack:a=Bn.Low}return{stream_type:a,ssrcs:h,mid:p}})}filterTobeUnSubscribedTracks(e,n){const i=[],a=this.remoteUserMap.get(e);if(!a)return i;if(n){const l=a.get(n);if(!l)return i;i.push([e,{kind:n,id:l}])}else Array.from(a.entries()).forEach(l=>{let[u,h]=l;i.push([e,{kind:u,id:h}])});return i}filterTobeUnSubscribedDataChannels(e,n){const i=[];return n.forEach(a=>{var l;(l=this.remoteDataChannelMap.get(e))!==null&&l!==void 0&&l.has(a.id)&&i.push(a)}),i}createUnsubscribeMessage(e){const n=[];return e.forEach(i=>{let[a,{kind:l,id:u}]=i;switch(l){case it.VIDEO:return void(a._videoSSRC&&n.push({stream_type:it.VIDEO,ssrcId:a._videoSSRC}));case it.AUDIO:return void(a._audioSSRC&&n.push({stream_type:it.AUDIO,ssrcId:a._audioSSRC}))}}),n}createUnsubscribeAllMessage(e){const n=new Map;return e.forEach(i=>{let[a,{kind:l}]=i;if(n.has(a)){let u=n.get(a);l===it.VIDEO?u|=bi.Video:u|=bi.Audio,n.set(a,u)}else l===it.VIDEO?n.set(a,bi.Video):n.set(a,bi.Audio)}),{users:Array.from(n.entries()).map(i=>{let[a,l]=i;return{stream_id:a.uid,stream_type:l}})}}withdrawRemoteTracks(e){e.forEach(n=>{let[i,{kind:a}]=n;const l=this.remoteUserMap.get(i);l&&(l.delete(a),Array.from(l.entries()).length===0&&this.remoteUserMap.delete(i))})}async updateBitrateLimit(e){const n=this.localTrackMap.get(Fe.LocalVideoTrack),i=this.localTrackMap.get(Fe.LocalVideoLowTrack);n&&(await n.track.setBitrateLimit(e.uplink),await new et((a,l)=>{this.handleUpdateVideoEncoder(n.track,a,l,!0)})),i&&e.low_stream_uplink&&(await i.track.setBitrateLimit({max_bitrate:e.low_stream_uplink.bitrate,min_bitrate:e.low_stream_uplink.bitrate||0}),await new et((a,l)=>{this.handleUpdateVideoEncoder(i.track,a,l,!0)}))}isP2PDisconnected(){return this.connection?this.connection.peerConnectionState!=="connected":!0}isPreallocation(){return this.connection instanceof fs&&this.connection.isPreallocation}isPreSub(){return this.connection instanceof fs&&this.connection.isPreSub()}mapPubResToRemoteConfig(e,n,i){return e.map((a,l)=>{var u;let{stream_type:h}=a;const p=(u=n.find(m=>{let{stream_type:E}=m;return h===E}))===null||u===void 0?void 0:u.attributes;if(p&&Q("DISABLE_SCREEN_SHARE_REMB")){const m=i[l]._hints;(Ge(m).call(m,qn.SCREEN_TRACK)||Ge(m).call(m,qn.SCREEN_LOW_TRACK))&&(p.remb=!1,k.debug("disable remb for screen share, hints:",m))}return p})}async tryToUnmuteAudio(e){for(let i=0;i<e.length;i++)if(e[i]instanceof Mr){var n;const a=this.filterTobeUnmutedTracks(e[i]);if(a.length===0)continue;await((n=this.connection)===null||n===void 0?void 0:n.unmuteLocal(a.map(u=>{let[,{id:h}]=u;return h})));const l=this.createUnmuteMessage(a);return void await Qn(this,vt.RequestUnmuteLocal,l)}}bindStatsUploaderEvents(){this.statsUploader.requestStats=()=>this.getStats(),this.statsUploader.requestLocalMedia=()=>Array.from(this.localTrackMap.entries()),this.statsUploader.requestRemoteMedia=()=>Array.from(this.remoteUserMap.entries()),this.statsUploader.requestVideoIsReady=e=>{var n;return!((n=this.connection)===null||n===void 0||!n.getRemoteVideoIsReady(e))},this.statsUploader.requestUpload=(e,n)=>this.emit(vt.RequestUpload,e,n),this.statsUploader.requestUploadStats=e=>this.emit(vt.RequestUploadStats,e),this.statsUploader.requestAllTracks=()=>this.getAllTracks(),this.statsUploader.requestTransportStats=()=>{var e;return{connectState:((e=this.connection)===null||e===void 0?void 0:e.peerConnectionState)||"closed"}}}unbindStatsUploaderEvents(){this.statsUploader.requestStats=void 0,this.statsUploader.requestLocalMedia=void 0,this.statsUploader.requestRemoteMedia=void 0,this.statsUploader.requestVideoIsReady=void 0}async requestReconnect(){this.dtlsFailedCount+=1,await Pi(Zw(this.dtlsFailedCount,ei)),this.emit(vt.RequestReconnect)}async reconnectP2P(){const e=Array.from(this.localTrackMap.entries()),n=this.createGatewayUnpublishMessage(e);Array.from(this.remoteUserMap.entries()),n.length>0&&await zi(this,vt.RequestUnpublishForReconnectPC,n),this.disconnectForReconnect(),this.emit(vt.RequestReconnectPC)}canPublishLowStream(){return this.localTrackMap.has(Fe.LocalVideoTrack)||this.pendingLocalTracks.some(e=>e instanceof sr)}throwIfTrackTypeNotMatch(e){if(e.filter(n=>n instanceof sr).length>1)throw new Re(X.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(e.filter(n=>n instanceof Mr).length>1&&(e.some(n=>n instanceof Mr&&n._bypassWebAudio)||!Rn().webAudioMediaStreamDest))throw new Re(X.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode");for(const n of e){if(n instanceof sr&&this.pendingLocalTracks.some(i=>i instanceof sr))throw new Re(X.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(n instanceof Mr&&this.pendingLocalTracks.some(i=>i instanceof Mr)&&(!Rn().webAudioMediaStreamDest||n._bypassWebAudio||this.pendingLocalTracks.some(i=>i instanceof Mr&&i._bypassWebAudio)))throw new Re(X.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode")}}getLowVideoTrack(e,n){var i;const a=!Q("DISABLE_DUAL_STREAM_USE_ENCODING")&&Rn().supportDualStreamEncoding,l=El(El({},{width:160,height:120,framerate:15,bitrate:50}),n);let u;u=a?e._mediaStreamTrack.clone():mA(e,l);const h=Zn(8,"track-low-"),p=new sr(u,El(El({},a&&{scaleResolutionDownBy:qI(l,e)}),{},{frameRate:l.framerate,bitrateMax:l.bitrate,bitrateMin:l.bitrate}),void 0,void 0,h);return p.on(th.TRANSCEIVER_UPDATED,m=>{e._updateRtpTransceiver(m,qf.LOW_STREAM)}),p._hints.push(qn.LOW_STREAM),Ge(i=e._hints).call(i,qn.SCREEN_TRACK)&&p._hints.push(qn.SCREEN_LOW_TRACK),e.on("sei-to-send",m=>{p.emit("sei-to-send",m)}),e.addListener(at.NEED_CLOSE,()=>{p.close()}),p}async globalLock(){return this.mutex.lock("From P2PChannel.globalLock")}async reportPCStats(e,n,i){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;if(this.connection&&this.connection instanceof fs){var l,u,h,p;const m=this.store.keyMetrics.descriptionStart||0,{iceConnectionState:E,dtlsTransportState:S,peerConnectionState:R}=this.connection,{local:w,remote:O}=await this.connection.getSelectedCandidatePair();ct.pcStats(this.store.sessionId,{startTime:m,eventElapse:e-m||0,iceconnectionsate:E,dtlsstate:S,connectionstate:R,intSucc:n?1:2,error:this._iceError||a||"",selectedLocalCandidateProtocol:(l=w==null?void 0:w.protocol)!==null&&l!==void 0?l:"",selectedLocalCandidateType:(u=w.candidateType)!==null&&u!==void 0?u:"",selectedLocalCandidateAddress:"".concat(w.address,":").concat(w.port),selectedRemoteCandidateProtocol:(h=O.protocol)!==null&&h!==void 0?h:"",selectedRemoteCandidateType:(p=O.candidateType)!==null&&p!==void 0?p:"",selectedRemoteCandidateAddress:"".concat(O.address,":").concat(O.port),restartCnt:i,preallocation:this.connection.isPreallocation}),this._iceError=null}}reportVideoFirstFrameRender(e){const n=this.store.keyMetrics,i=n.firstVideoFrameDecoded.find(S=>S.userId===e.uid);if(!i)return;const{isInternalUpload:a,isExternalUpload:l}=i;if(a&&l)return;const{subscribeEnd:u,firstPreRender:h,peerPublishDuration:p,peerPubStatusMs:m}=i;let{firstRender:E=0}=i;if(u&&(E||h)&&p&&m){i.isInternalUpload=!0;const{playEnd:S}=i;S&&(i.isExternalUpload=!0);const{firstPreRender:R=0}=i;E=R||E;const w=e.videoTrack,O={peer:e._uintid,width:(w==null?void 0:w._videoWidth)||0,height:(w==null?void 0:w._videoHeight)||0,ssrc:e._videoSSRC||0,p2pid:this.store.p2pId,peerPublishDuration:p,peerPubStatusMs:m,joinChannelStart:n.joinStart||0,preloadStart:n.preloadStart||0,preloadEnd:n.preloadEnd||0,apStart:n.requestAPStart||0,apEnd:n.requestAPEnd||0,suaEnd:n.requestSUAEnd||0,beforeConnect:n.beforeConnect||0,peerReceiver:n.peerReceiver||0,ice:n.iceConnectionEnd||0,pc:n.peerConnectionEnd||0,signalConnected:n.signalConnected||0,joinReq:n.joinReq||0,joinRes:n.joinRep||0,userJoinNotify:i.userJoinNotify||0,videoAddNotify:i.videoAddNotify||0,subscribeStart:i.subscribeStart||0,subscribeEnd:i.subscribeEnd||0,firstReceived:i.firstReceived||0,firstDecoded:i.firstDecoded||0,firstPreRender:R||0,firstRender:S?Math.max(E,S):Math.max(E,u),playStart:i.playStart||0,playEnd:i.playEnd||0,isPreSub:!(!e._videoSSRC||!this.isPreSubScribe(e._videoSSRC)),isPrePc:this.isPreallocation(),isPreInstantVideo:pV(this.store)};ct.firstXLAPeerFirstVideoFrame(this.store.sessionId,O)}}reportVideoFirstFrameDecoded(e,n,i,a){var l;const u=Array.from(ca(l=this.remoteUserMap).call(l)).find(h=>h._videoSSRC===e);if(u){a||this.store.subscribe(u.uid,"video",void 0,void 0,void 0,void 0,Date.now());const h=this.store.keyMetrics,p=h.subscribe.find(m=>m.userId===u.uid&&m.type==="video");ct.firstRemoteVideoDecode(this.store.sessionId,Ei.FIRST_VIDEO_DECODE,pr.FIRST_VIDEO_DECODE,{peer:u._uintid,videowidth:n,videoheight:i,subscribeElapse:Zi.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId,apEnd:h.requestAPEnd||0,apStart:h.requestAPStart||0,joinGwEnd:h.joinGatewayEnd||0,joinGwStart:h.joinGatewayStart||0,pcEnd:h.peerConnectionEnd||0,pcStart:h.peerConnectionStart||0,subscriberEnd:(p==null?void 0:p.subscribeEnd)||0,subscriberStart:(p==null?void 0:p.subscribeStart)||0,videoAddNotify:(p==null?void 0:p.streamAdded)||0,state:a?1:0,firstFrame:(p==null?void 0:p.firstFrame)||0})}}async remoteMediaSsrcChanged(e,n,i){if(!this.connection)return!1;const a=this.remoteUserMap.get(e);if(!a)return!1;const l=a.get(n);if(!l)return!1;const u=await this.connection.getRemoteSSRC(l);return u!==void 0&&u!==i}unbindRtpTransceiver(){this.localTrackMap.size!==0&&Array.from(this.localTrackMap.entries()).forEach(e=>{let[n,{track:i}]=e;n===Fe.LocalVideoLowTrack?i._updateRtpTransceiver(void 0,qf.LOW_STREAM):i._updateRtpTransceiver(void 0)})}},st(fn.prototype,"startP2PConnection",[bo],Object.getOwnPropertyDescriptor(fn.prototype,"startP2PConnection"),fn.prototype),st(fn.prototype,"connect",[bo],Object.getOwnPropertyDescriptor(fn.prototype,"connect"),fn.prototype),st(fn.prototype,"updateRemoteRTPCapabilities",[bo],Object.getOwnPropertyDescriptor(fn.prototype,"updateRemoteRTPCapabilities"),fn.prototype),st(fn.prototype,"publishDataChannel",[bo],Object.getOwnPropertyDescriptor(fn.prototype,"publishDataChannel"),fn.prototype),st(fn.prototype,"unpublish",[bo],Object.getOwnPropertyDescriptor(fn.prototype,"unpublish"),fn.prototype),st(fn.prototype,"unpublishDataChannel",[bo],Object.getOwnPropertyDescriptor(fn.prototype,"unpublishDataChannel"),fn.prototype),st(fn.prototype,"unpublishLowStream",[bo],Object.getOwnPropertyDescriptor(fn.prototype,"unpublishLowStream"),fn.prototype),st(fn.prototype,"subscribeDataChannel",[bo],Object.getOwnPropertyDescriptor(fn.prototype,"subscribeDataChannel"),fn.prototype),st(fn.prototype,"subscribe",[bo],Object.getOwnPropertyDescriptor(fn.prototype,"subscribe"),fn.prototype),st(fn.prototype,"massSubscribe",[bo],Object.getOwnPropertyDescriptor(fn.prototype,"massSubscribe"),fn.prototype),st(fn.prototype,"unsubscribe",[bo],Object.getOwnPropertyDescriptor(fn.prototype,"unsubscribe"),fn.prototype),st(fn.prototype,"unsubscribeDataChannel",[bo],Object.getOwnPropertyDescriptor(fn.prototype,"unsubscribeDataChannel"),fn.prototype),st(fn.prototype,"massUnsubscribe",[bo],Object.getOwnPropertyDescriptor(fn.prototype,"massUnsubscribe"),fn.prototype),st(fn.prototype,"muteRemote",[bo],Object.getOwnPropertyDescriptor(fn.prototype,"muteRemote"),fn.prototype),st(fn.prototype,"unmuteRemote",[bo],Object.getOwnPropertyDescriptor(fn.prototype,"unmuteRemote"),fn.prototype),st(fn.prototype,"hasRemoteMediaWithLock",[bo],Object.getOwnPropertyDescriptor(fn.prototype,"hasRemoteMediaWithLock"),fn.prototype),st(fn.prototype,"disconnectForReconnect",[bo],Object.getOwnPropertyDescriptor(fn.prototype,"disconnectForReconnect"),fn.prototype),st(fn.prototype,"updateBitrateLimit",[bo],Object.getOwnPropertyDescriptor(fn.prototype,"updateBitrateLimit"),fn.prototype),st(fn.prototype,"remoteMediaSsrcChanged",[bo],Object.getOwnPropertyDescriptor(fn.prototype,"remoteMediaSsrcChanged"),fn.prototype),fn);function bo(e,n,i){const a=e[n];if(typeof a!="function")throw new Error("Cannot use mutex on object property.");return i.value=async function(){const l=this.mutex,u=await l.lock("From P2PChannel.".concat(n));try{for(var h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];return await a.apply(this,p)}finally{u()}},i}function H8(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),i.push.apply(i,a)}return i}function z8(e){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?H8(Object(i),!0).forEach(function(a){W(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):H8(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}const Lpe=Date.now(),kpe=20,vA=new Map,VS=new Map;async function W8(e){const n=vA.get(e),i=Array.isArray(n)&&n[n.length-1],a=VS.get(e);if(!i)return void(a.isSyncing=!1);const l={uid:i.uid,payload:i.payload};a.firstRecvTs===0&&(a.firstRecvTs=i.recvTs,a.firstSendTs=i.sendTs);const u=i.sendTs-a.firstSendTs,h=u-(Date.now()-a.firstRecvTs);h>0&&(a.firstRecvTs=Date.now()-u);let p=i.mediaDelay+h;p<=0?(n.pop(),G8(i.context,l),p=0):p=Math.min(p,kpe),setTimeout(()=>n.length&&W8(e),p)}function G8(e,n){e.safeEmit(pn.STREAM_MESSAGE,n.uid,n.payload),e.onStreamMessage&&e.onStreamMessage(n)}function Mpe(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0;if(!e.syncWithAudio)return G8(i,{uid:e.uid,payload:e.payload});const a="".concat(i.id,"-").concat(e.uid),l=vA.get(a)||[],u=l.findIndex(E=>e.sendTs>=E.sendTs),h=z8(z8({},e),{},{context:i,mediaDelay:n,recvTs:Date.now()});u===-1?l.push(h):l.splice(u,0,h),vA.set(a,l);let p=!1;var m;VS.has(a)?p=!((m=VS.get(a))===null||m===void 0||!m.isSyncing):VS.set(a,{isSyncing:p,firstRecvTs:0,firstSendTs:0}),p||W8(a)}const Fpe=yn().name;function K8(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),i.push.apply(i,a)}return i}function Y8(e){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?K8(Object(i),!0).forEach(function(a){W(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):K8(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}const gp="websdk_ng_cache_parameter",Upe=Q("MAX_PRELOAD_ASYNC_LENGTH"),Bpe=1e4,dh=new Map,hh=[];let EA=null,_A=0,SA=0;const jS=new Map,Vpe=function(e,n){const i=[];let a=0;const l=async()=>{const u=i.shift();u&&await u(),i.length>0&&a<n?l():a--};return async function(){for(var u=arguments.length,h=new Array(u),p=0;p<u;p++)h[p]=arguments[p];return new et(async(m,E)=>{i.push(async()=>{try{const S=await e(...h);m(S)}catch(S){E(S)}}),a<n&&(a++,l())})}}(q8,Upe),yA=Yo.CancelToken.source();async function q8(e,n,i,a,l,u){try{if(!Q("ENABLE_PRELOAD"))return;if(!Rn().supportWebCrypto)return void Fu(()=>{k.warn("Your browser does not support preloading, this feature  be run in a secure environment")},"preload_webcrypto_not_supported");if(!i&&i!==null)throw new Re(X.INVALID_PARAMS,"Invalid token: ".concat(i,". If you don not use token, set it to null"));i&&Ni(i,"token",1,2047),Ni(e,"appid",1,2047),mS(n),a&&gS(a);const h=Zd();k.debug("preload channel ".concat(n,", uid is ").concat(a));const p={appId:e,cname:n,token:i||e,uid:typeof a!="string"?a:null,sid:h,proxyServer:l};let m,E;typeof a=="string"?(p.stringUid=a,[E,m]=await et.all([bpe(a,{sid:h,appId:e},yA.token),y8(Y8(Y8({},p),{},{token:i||e,uid:0}),yA.token)]),p.uid=E.uid,m.gatewayInfo.uid=p.uid,m.gatewayInfo.res.uid=p.uid):(u&&(p.stringUid=u),m=await y8(p,yA.token));const S={sid:h,appId:e,cname:n,token:i||e,uid:p.stringUid||a,intUid:p.uid||m.gatewayInfo.uid,stringUid:p.stringUid,ts:Date.now(),sua:E,ap:m};await async function(R){let w;try{R.uid&&J8({appId:R.appId,cname:R.cname,token:R.token,uid:R.uid,stringUid:R.stringUid});const O=tj(R),H=await async function(j,q){try{const Y=await window.crypto.subtle.importKey("raw",j3(q),"AES-GCM",!1,["encrypt"]),Z=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:new Uint8Array(1)},Y,Qd(window.btoa(JSON.stringify(j))));return Uu(new Uint8Array(Z))}catch{return}}(R,R.token||R.appId);if(!H)return;w=ej(gp);const B=w?JSON.parse(w):[];B.push({[O]:H}),B.length>Q("AP_CACHE_NUM")&&B.shift(),$S(gp,JSON.stringify(B))}catch(O){k.warn("Error caching server parameters:",O.message),$S(gp,"")}}(S),_A++}catch(h){throw SA++,function(p){EA||(EA=window.setTimeout(()=>{let E="";jS.forEach((S,R)=>{E+="".concat(R,": ").concat(S," ;")}),ct.reportApiInvoke(null,{name:Ur.PRELOAD,options:{success:_A,failed:SA,err:E}}).onError(p),_A=0,SA=0,jS.clear(),EA=null},Bpe));const m=jS.get(p.code)||0;jS.set(p.code,m+1)}(h),h}}async function X8(e){try{if(Q("AP_REQUEST_DETAIL")||Q("ENABLE_ROLE_SELECT_EDGE"))return;const n=J8(e);if(!n||e.cloudProxyServer!=="disabled")return;const i=await async function(a,l){try{const u=await window.crypto.subtle.importKey("raw",j3(l),"AES-GCM",!1,["decrypt"]),h=await window.crypto.subtle.decrypt({name:"AES-GCM",iv:new Uint8Array(1)},u,Qd(a));return JSON.parse(window.atob(Uu(new Uint8Array(h))))}catch{return}}(n,e.token||e.appId);if(!i||!function(a,l){return a.cname===l.cname&&a.appId===l.appId&&a.token===l.token?l.stringUid?a.stringUid===l.stringUid:typeof l.uid=="number"?a.uid===l.uid:a.uid==l.uid:!1}(i,e))return;if(i&&Date.now()-i.ts<Q("AP_CACHE_LIFETIME"))return i}catch(n){k.warn("Error get preloadInfo",n.message)}}function J8(e){let n;try{if(n=ej(gp),!n)return;const i=JSON.parse(n),a=tj(e),l=function(h,p){for(let m=h.length-1;m>=0;m--)if(p(h[m]))return m;return-1}(i,h=>a in h);if(l===-1)return;const u=i.splice(l,1)[0];return $S(gp,JSON.stringify(i)),u[a]}catch(i){k.warn("Error delete preload info: ".concat(n),i.message),$S(gp,"")}}function CA(e){if(e){let n=dh.get(e);n&&(window.clearTimeout(n),n=null,dh.delete(e)),Ge(hh).call(hh,e)||e.cloudProxyServer!=="disabled"||hh.push(e)}if(dh.size<Q("AP_CACHE_NUM")&&hh.length>0){const n=hh.shift();dh.set(n,window.setTimeout(async()=>{const{appId:i,cname:a,token:l,stringUid:u,uid:h,proxyServer:p}=n;try{await Vpe(i,a,l,h,p,u),dh.has(n)&&CA(n)}catch(m){k.warn("update preload failed",m.message),Q8(n)}},Q("AP_UPDATE_INTERVAL")))}}function Q8(e){const n=hh.indexOf(e);n!==-1&&hh.splice(n,1);let i=dh.get(e);i&&(window.clearTimeout(i),i=null,dh.delete(e),CA())}function Z8(e,n){const i=e.sua,a=e.ap;n&&i&&ct.reqUserAccount(e.sid,{lts:i.requestTime,elapse:i.elapse,success:!0,serverAddr:i.url,stringUid:n,uid:e.intUid,errorCode:null,extend:i.req}),ct.reportResourceTiming(e.ap.url,e.sid),ct.joinWebProxyAP(e.sid,{lts:a.requestTime,elapse:a.elapse,sucess:1,apServerAddr:a.url,turnServerAddrList:a.proxyInfo.addresses.map(l=>l.ip).join(","),eventType:"disabled",unilbsServerIds:[Kr.CHOOSE_SERVER,Kr.CLOUD_PROXY_FALLBACK].toString()}),ct.joinChooseServer(e.sid,{lts:a.requestTime,elapse:a.elapse,succ:!0,csAddr:a.url,opid:a.opid,serverList:a.gatewayInfo.gatewayAddrs.map(l=>l.address),ec:null,cid:a.gatewayInfo.cid.toString(),uid:a.gatewayInfo.uid.toString(),csIp:a.gatewayInfo.csIp,unilbsServerIds:[Kr.CHOOSE_SERVER].toString(),isHttp3:a.isHttp3})}function ej(e){return window.atob(window.localStorage.getItem(e)||"")}function $S(e,n){window.localStorage.setItem(e,window.btoa(n))}function tj(e){let n="".concat(e.appId,"_").concat(e.cname);return typeof e.uid=="string"&&(n+="_s_".concat(e.uid)),typeof e.uid=="number"&&(n+="_".concat(e.uid)),e.token&&(n+="_".concat(e.token)),Y3(n)}function jpe(e){let n=function(){const i=zpe.pop();return i?(i.offset=i.limit=0,i):{bytes:new Uint8Array(64),offset:0,limit:0}}();return function(i,a){let l=i.appId;l!==void 0&&(Yr(a,10),Ju(a,l));let u=i.cid;u!==void 0&&(Yr(a,16),Yr(a,u));let h=i.cname;h!==void 0&&(Yr(a,26),Ju(a,h));let p=i.deviceId;p!==void 0&&(Yr(a,34),Ju(a,p));let m=i.elapse;m!==void 0&&(Yr(a,40),Qu(a,m));let E=i.fileSize;E!==void 0&&(Yr(a,48),Qu(a,vp(E)));let S=i.height;S!==void 0&&(Yr(a,56),Qu(a,vp(S)));let R=i.jpg;R!==void 0&&(Yr(a,66),Yr(a,R.length),rj(a,R));let w=i.networkType;w!==void 0&&(Yr(a,72),Qu(a,vp(w)));let O=i.osType;O!==void 0&&(Yr(a,80),Qu(a,vp(O)));let H=i.requestId;H!==void 0&&(Yr(a,90),Ju(a,H));let B=i.sdkVersion;B!==void 0&&(Yr(a,98),Ju(a,B));let j=i.sequence;j!==void 0&&(Yr(a,104),Qu(a,vp(j)));let q=i.sid;q!==void 0&&(Yr(a,114),Ju(a,q));let Y=i.timestamp;Y!==void 0&&(Yr(a,120),Qu(a,Y));let Z=i.uid;Z!==void 0&&(Yr(a,128),Yr(a,Z));let pe=i.vid;pe!==void 0&&(Yr(a,136),Yr(a,pe));let he=i.width;he!==void 0&&(Yr(a,144),Qu(a,vp(he)));let re=i.service;re!==void 0&&(Yr(a,152),Yr(a,re));let Se=i.callbackData;Se!==void 0&&(Yr(a,162),Yr(a,Se.length),rj(a,Se));let Ae=i.ticket;Ae!==void 0&&(Yr(a,170),Ju(a,Ae));let Ne=i.vendorConfigs;Ne!==void 0&&(Yr(a,178),Ju(a,Ne))}(e,n),function(i){let a=i.bytes,l=i.limit;return a.length===l?a:a.subarray(0,l)}(n)}function $pe(e){return function(i){let a={};e:for(;!Wpe(i);){let l=K0(i);switch(l>>>3){case 0:break e;case 1:a.code=K0(i);break;case 2:a.msg=ij(i,K0(i));break;case 3:a.requestId=ij(i,K0(i));break;case 4:a.timestamp=Gpe(i,!1);break;default:Hpe(i,7&l)}}return a}({bytes:n=e,offset:0,limit:n.length});var n}function Hpe(e,n){switch(n){case 0:for(;128&Js(e););break;case 2:bA(e,K0(e));break;case 5:bA(e,4);break;case 1:bA(e,8);break;default:throw new Error("Unimplemented type: "+n)}}function vp(e){return{low:e|=0,high:e>>31,unsigned:e>=0}}let zpe=[];function bA(e,n){if(e.offset+n>e.limit)throw new Error("Skip past limit");e.offset+=n}function Wpe(e){return e.offset>=e.limit}function HS(e,n){let i=e.bytes,a=e.offset,l=e.limit,u=a+n;if(u>i.length){let h=new Uint8Array(2*u);h.set(i),e.bytes=h}return e.offset=u,u>l&&(e.limit=u),a}function nj(e,n){let i=e.offset;if(i+n>e.limit)throw new Error("Read past limit");return e.offset+=n,i}function rj(e,n){let i=HS(e,n.length);e.bytes.set(n,i)}function ij(e,n){let i=nj(e,n),a=String.fromCharCode,l=e.bytes,u="�",h="";for(let p=0;p<n;p++){let m,E,S,R,w=l[p+i];128&w?(224&w)==192?p+1>=n?h+=u:(m=l[p+i+1],(192&m)!=128?h+=u:(R=(31&w)<<6|63&m,R<128?h+=u:(h+=a(R),p++))):(240&w)==224?p+2>=n?h+=u:(m=l[p+i+1],E=l[p+i+2],(49344&(m|E<<8))!=32896?h+=u:(R=(15&w)<<12|(63&m)<<6|63&E,R<2048||R>=55296&&R<=57343?h+=u:(h+=a(R),p+=2))):(248&w)==240?p+3>=n?h+=u:(m=l[p+i+1],E=l[p+i+2],S=l[p+i+3],(12632256&(m|E<<8|S<<16))!=8421504?h+=u:(R=(7&w)<<18|(63&m)<<12|(63&E)<<6|63&S,R<65536||R>1114111?h+=u:(R-=65536,h+=a(55296+(R>>10),56320+(1023&R)),p+=3))):h+=u:h+=a(w)}return h}function Ju(e,n){let i=n.length,a=0;for(let h=0;h<i;h++){let p=n.charCodeAt(h);p>=55296&&p<=56319&&h+1<i&&(p=(p<<10)+n.charCodeAt(++h)-56613888),a+=p<128?1:p<2048?2:p<65536?3:4}Yr(e,a);let l=HS(e,a),u=e.bytes;for(let h=0;h<i;h++){let p=n.charCodeAt(h);p>=55296&&p<=56319&&h+1<i&&(p=(p<<10)+n.charCodeAt(++h)-56613888),p<128?u[l++]=p:(p<2048?u[l++]=p>>6&31|192:(p<65536?u[l++]=p>>12&15|224:(u[l++]=p>>18&7|240,u[l++]=p>>12&63|128),u[l++]=p>>6&63|128),u[l++]=63&p|128)}}function Js(e){return e.bytes[nj(e,1)]}function oj(e,n){let i=HS(e,1);e.bytes[i]=n}function K0(e){let n,i=0,a=0;do n=Js(e),i<32&&(a|=(127&n)<<i),i+=7;while(128&n);return a}function Yr(e,n){for(n>>>=0;n>=128;)oj(e,127&n|128),n>>>=7;oj(e,n)}function Gpe(e,n){let i,a=0,l=0,u=0;return i=Js(e),a=127&i,128&i&&(i=Js(e),a|=(127&i)<<7,128&i&&(i=Js(e),a|=(127&i)<<14,128&i&&(i=Js(e),a|=(127&i)<<21,128&i&&(i=Js(e),l=127&i,128&i&&(i=Js(e),l|=(127&i)<<7,128&i&&(i=Js(e),l|=(127&i)<<14,128&i&&(i=Js(e),l|=(127&i)<<21,128&i&&(i=Js(e),u=127&i,128&i&&(i=Js(e),u|=(127&i)<<7))))))))),{low:a|l<<28,high:l>>>4|u<<24,unsigned:n}}function Qu(e,n){let i=n.low>>>0,a=(n.low>>>28|n.high<<4)>>>0,l=n.high>>>24,u=l===0?a===0?i<16384?i<128?1:2:i<1<<21?3:4:a<16384?a<128?5:6:a<1<<21?7:8:l<128?9:10,h=HS(e,u),p=e.bytes;switch(u){case 10:p[h+9]=l>>>7&1;case 9:p[h+8]=u!==9?128|l:127&l;case 8:p[h+7]=u!==8?a>>>21|128:a>>>21&127;case 7:p[h+6]=u!==7?a>>>14|128:a>>>14&127;case 6:p[h+5]=u!==6?a>>>7|128:a>>>7&127;case 5:p[h+4]=u!==5?128|a:127&a;case 4:p[h+3]=u!==4?i>>>21|128:i>>>21&127;case 3:p[h+2]=u!==3?i>>>14|128:i>>>14&127;case 2:p[h+1]=u!==2?i>>>7|128:i>>>7&127;case 1:p[h]=u!==1?128|i:127&i}}const aj={},sj={},zS=4294967296,cj=zS*zS,lj=cj/2,TA=dj(0,!0),uj=dj(0),Kpe=Ep(0,-2147483648,!1),Ype=Ep(-1,2147483647,!1),qpe=Ep(-1,-1,!0);function dj(e,n){let i,a,l;return n?(l=0<=(e>>>=0)&&e<256)&&(a=sj[e],a)?a:(i=Ep(e,0,!0),l&&(sj[e]=i),i):(l=-128<=(e|=0)&&e<128)&&(a=aj[e],a)?a:(i=Ep(e,e<0?-1:0,!1),l&&(aj[e]=i),i)}function Ep(e,n,i){return{low:0|e,high:0|n,unsigned:!!i}}function hj(e,n){if(isNaN(e))return n?TA:uj;if(n){if(e<0)return TA;if(e>=cj)return qpe}else{if(e<=-lj)return Kpe;if(e+1>=lj)return Ype}return e<0?n?TA:uj:Ep(e%zS|0,e/zS|0,n)}function fj(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),i.push.apply(i,a)}return i}class RA extends br{get connectionState(){return this._connectionState}set connectionState(n){if(this._connectionState===n)return;const i=this._connectionState;this._connectionState=n,this.emit(Nc.CONNECTION_STATE_CHANGE,n,i)}get quality(){return this._quality}set quality(n){this._quality=n>1?1:n<.1?.1:n,this._qualityTimer&&(window.clearTimeout(this._qualityTimer),this._qualityTimer=null),this._quality>=1||(this._qualityTimer=window.setTimeout(()=>{this.quality=this._quality/this._qualityRatio},6e4))}constructor(n){var i;super(),W(this,"name","AgoraRTCImageModeration"),W(this,"_connectionState",hs.CONNECTING),W(this,"_sequence",0),W(this,"_moderationStartTime",void 0),W(this,"_workerConnection",void 0),W(this,"_workerMessageLengthLimit",void 0),W(this,"_qualityRatio",void 0),W(this,"_connectInfo",void 0),W(this,"_cancelTokenSource",Yo.CancelToken.source()),W(this,"_retryConfig",void 0),W(this,"_moderationInterval",void 0),W(this,"_moderationTimer",null),W(this,"_moderationMode",1),W(this,"_quality",1),W(this,"_qualityTimer",null),W(this,"_ticket",void 0),W(this,"_moderationIntervalMinimum",void 0),W(this,"_uploadFailedNum",0),W(this,"_uploadNum",0),W(this,"_uploadTimer",null),W(this,"_extraInfo",void 0),W(this,"_vendor",""),W(this,"_encoder",new TextEncoder),W(this,"_moderationId",void 0),W(this,"inspectImage",()=>{if(this.connectionState!==hs.CONNECTED)throw new Ce(X.OPERATION_ABORTED,"image moderation service connection status is ".concat(this.connectionState));this._moderationTimer&&(window.clearInterval(this._moderationTimer),this._moderationTimer=null),this._moderationTimer=window.setInterval(()=>{this.connectionState===hs.CONNECTED?this.requestToInspectImage():k.debug("[".concat(this._moderationId,"] Moderation State is not connected , "),this.connectionState)},this._moderationInterval<this._moderationIntervalMinimum?this._moderationIntervalMinimum:this._moderationInterval),this.requestToInspectImage()}),this._moderationId=Zn(5,"image-moderation-"),this._workerMessageLengthLimit=Q("IMAGE_MODERATION_WORKER_MESSAGE_LENGTH_LIMIT"),this._moderationIntervalMinimum=Q("IMAGE_MODERATION_INTERVAL_MINIMUM"),this._moderationInterval=(i=n.interval)!==null&&i!==void 0?i:1e3,n.extraInfo&&(this._extraInfo=this._encoder.encode(n.extraInfo)),n.vendor&&(this._vendor=n.vendor),this._qualityRatio=Q("IMAGE_MODERATION_QUALITY_RATIO"),this._moderationStartTime=Number(Date.now()),this._workerConnection=new F0("worker-"+this._moderationId,ei),this.on(Nc.STATE_CHANGE,(a,l)=>{k.debug("[".concat(this._moderationId,"] Moderation operation :").concat(ap[a]," ").concat(l||""))}),this.handleWorkerEvents()}async init(n,i){this.emit(Nc.STATE_CHANGE,ap.CONNECT_AP),this._connectInfo=n;const a=this._cancelTokenSource.token;return this._retryConfig=i,new et((l,u)=>{this.on(Nc.CONNECTION_STATE_CHANGE,(h,p)=>{h===hs.CONNECTED&&l()}),this.requestAP(n,a,i).then(h=>{this.connectWorker(h)}).catch(h=>{u(h)})})}updateConfig(n){var i;this._moderationInterval=(i=n.interval)!==null&&i!==void 0?i:1e3,n.extraInfo&&(this._extraInfo=this._encoder.encode(n.extraInfo)),n.vendor&&(this._vendor=n.vendor),k.debug("[".concat(this._moderationId,"] updateConfig: ").concat(JSON.stringify(n))),this.connectionState===hs.CONNECTED&&this.inspectImage()}async requestAP(n,i,a){const l=Q("WEBCS_DOMAIN").map(m=>"https://".concat(m,"/api/v1")),u=await function(m,E,S,R){let{appId:w,areaCode:O,cname:H,sid:B,token:j,uid:q}=E;hp++;const Y="moderation_plugin",Z={service_name:Y,json_body:JSON.stringify({appId:w,areaCode:O,cname:H,command:"allocateEdge",requestId:hp,seq:hp,sid:B,appToken:j,ts:Date.now(),uid:q+""})};let pe,he,re=m[0];return Ic(async()=>{pe=Date.now();const Se=await Pc(re,{data:Z,cancelToken:S,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"},params:{action:"wrtc_gateway"}});if(he=Date.now()-pe,Se.code!==0){const Be=new Ce(X.UNEXPECTED_RESPONSE,"moderation plugin ap error, code"+Se.code,{retry:!0,responseTime:he});throw k.error(Be.toString()),Be}const Ae=JSON.parse(Se.json_body);if(Ae.code!==200){const Be=new Ce(X.UNEXPECTED_RESPONSE,"moderation plugin ap error, code: ".concat(Ae.code,", reason: ").concat(Ae.reason),{code:Ae.code,responseTime:he});throw k.error(Be.toString()),Be}if(!Ae.servers||!Array.isArray(Ae.servers)||Ae.servers.length===0){const Be=new Ce(X.UNEXPECTED_RESPONSE,"moderation plugin ap empty server",{code:Ae.code,responseTime:he});throw k.error(Be.toString()),Be}if(!Ae.servers.some(Be=>!!Be.wss)){const Be=new Ce(X.UNEXPECTED_RESPONSE,"moderation plugin ap empty port",{code:Ae.code,responseTime:he});throw k.error(Be.toString()),Be}const Ne=Q("IMAGE_MODERATION_WORKER_HOST");return{addressList:Ae.servers.map(Be=>{let{address:nn,wss:sn}=Be;if(nn&&sn)return"wss://".concat(nn.replace(/\./g,"-"),".").concat(Ne,":").concat(sn,"/moderation")}).filter(Be=>!!Be),workerToken:Ae.workerToken,vid:Ae.vid,ticket:Ae.appTicket,responseTime:he}},(Se,Ae)=>(ct.apworkerEvent(B,{success:!0,sc:200,serviceName:Y,responseDetail:JSON.stringify(Se.addressList),firstSuccess:Ae===0,responseTime:he,serverIp:m[Ae%m.length]}),!1),(Se,Ae)=>(ct.apworkerEvent(B,{success:!1,sc:Se.data&&Se.data.code||200,serviceName:Y,responseTime:he,serverIp:m[Ae%m.length]}),!!(Se.code!==X.OPERATION_ABORTED&&Se.code!==X.UNEXPECTED_RESPONSE||Se.data&&Se.data.retry)&&(re=m[(Ae+1)%m.length],!0)),R)}(l,n,i,a);this.emit(Nc.STATE_CHANGE,ap.AP_CONNECTED);const{addressList:h,ticket:p}=u;return this._ticket=p,h}async connectWorker(n){this.emit(Nc.STATE_CHANGE,ap.CONNECT_WORKER),await this._workerConnection.init(n,1e4)}handleWorkerEvents(){this._workerConnection.on(Xt.CONNECTED,async()=>{this.emit(Nc.STATE_CHANGE,ap.WORKER_CONNECTED,this._workerConnection.url),this.connectionState=hs.CONNECTED}),this._workerConnection.on(Xt.CLOSED,()=>{this.connectionState=hs.CLOSED}),this._workerConnection.on(Xt.FAILED,()=>{this.connectionState=hs.CLOSED}),this._workerConnection.on(Xt.RECONNECTING,()=>{this.connectionState=this.connectionState===hs.CONNECTED?hs.RECONNECTING:hs.CONNECTING}),this._workerConnection.on(Xt.ON_MESSAGE,async n=>{if(n.data instanceof ArrayBuffer){const i=$pe(new Uint8Array(n.data));Q("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")&&k.debug("[".concat(this._moderationId,"] Response message for worker of image moderation "),JSON.stringify(i)),this._uploadNum++,i.code===void 0||i.code===0||(this._uploadFailedNum++,k.error("[".concat(this._moderationId,"] Error response from worke, code is ").concat(i.code,", msg is ").concat(i.msg)),this._uploadTimer||(this._uploadTimer=window.setTimeout(()=>{ct.reportApiInvoke(this._connectInfo.sid||null,{name:Ur.IMAGE_MODERATION_UPLOAD,options:[this._uploadFailedNum,this._uploadNum,i.code],tag:gr.TRACER}).onError(new Ce(X.IMAGE_MODERATION_UPLOAD_FAILED,i.msg)),this._uploadTimer=null},Q("IMAGE_MODERATION_UPLOAD_REPORT_INTERVAL"))))}else k.error("[".concat(this._moderationId,"] Unexpected message type from worker"))}),this._workerConnection.on(Xt.WILL_RECONNECT,(n,i,a)=>{n==="recover"&&a(n),a("tryNext")}),this._workerConnection.on(Xt.REQUEST_NEW_URLS,(n,i)=>{this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then(n).catch(i)})}static intToLong(n){return{low:n|=0,high:n>>31,unsigned:n>=0}}async requestToInspectImage(){const n=ja(this,Nc.CLIENT_LOCAL_VIDEO_TRACK),i={appId:this._connectInfo.appId,cname:this._connectInfo.cname,cid:this._connectInfo.cid,sid:this._connectInfo.sid,uid:this._connectInfo.uid,vid:this._connectInfo.vid};if(n){if(!n.isPlaying)return void(Q("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")&&k.debug("Only the track being played can be inspected"));this._sequence++;const a=await this.generateRequestData(n,i);this._workerConnection.sendMessage(a,!0,!0)}else Q("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")&&k.debug("Only the track being published can be inspected")}async generateRequestData(n,i){let{appId:a,cname:l,cid:u,vid:h,sid:p,uid:m}=i;const E=Date.now(),S=await n.getCurrentFrameImage("image/jpeg",this.quality),R=await FV(S,a,l),w=this._sequence+"-"+u+"-"+m+"-"+E+"-"+Zn(12,""),O={appId:a,cid:u,cname:l,deviceId:"",elapse:RA.intToLong(Number(E-this._moderationStartTime)),fileSize:S.buffer.byteLength,height:S.height,width:S.width,jpg:R,networkType:6,osType:7,requestId:w,sdkVersion:"4.24.0",sequence:this._sequence,sid:p,timestamp:hj(E),uid:m,vid:h,service:this._moderationMode,ticket:this._ticket,callbackData:this._extraInfo,vendorConfigs:this._vendor};this._extraInfo===void 0&&delete O.callbackData;const H=jpe(O);if(H.byteLength<this._workerMessageLengthLimit){if(Q("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")){const B=function(j){for(var q=1;q<arguments.length;q++){var Y=arguments[q]!=null?arguments[q]:{};q%2?fj(Object(Y),!0).forEach(function(Z){W(j,Z,Y[Z])}):Object.getOwnPropertyDescriptors?Object.defineProperties(j,Object.getOwnPropertyDescriptors(Y)):fj(Object(Y)).forEach(function(Z){Object.defineProperty(j,Z,Object.getOwnPropertyDescriptor(Y,Z))})}return j}({},O);delete B.jpg,k.debug("[".concat(this._moderationId,"] Request message for worker of image moderation service: "),JSON.stringify(B))}return H}{const B=this.quality*this._qualityRatio;return this.quality=B,await this.generateRequestData(n,{appId:a,cname:l,cid:u,vid:h,sid:p,uid:m})}}close(){this._cancelTokenSource.cancel(),this._cancelTokenSource=Yo.CancelToken.source(),this._workerConnection&&this._workerConnection.close(),this._moderationTimer&&window.clearInterval(this._moderationTimer),this._moderationTimer=null,this._uploadTimer&&window.clearTimeout(this._uploadTimer),this._uploadTimer=null,this.connectionState=hs.CLOSED,this.emit(Nc.STATE_CHANGE,ap.CLOSED)}}function pj(e){if(Yn(e.interval,"interval",1e3,1/0),e&&e.extraInfo&&e.extraInfo.length>1024)throw new Ce(X.INVALID_PARAMS,"config.extraInfo length cannot exceed 1024 bytes");if(e&&e.vendor&&e.vendor.length>1024)throw new Ce(X.INVALID_PARAMS,"config.vendor length cannot exceed 1024 bytes")}const Xpe={name:"ImageModeration",create:function(e){let{config:n}=e;return pj(n),new RA(n)}};var mj,gj,vj,Ej,_j,Sj,yj,Cj,bj,Tj,Rj,wj,Ij,Aj,Oj,xj,Nj,Pj,Dj,Lj,kj,Mj,Fj,Uj,Bj,Vj,jj,$j,Hj,zj,Wj,Gj,Kj,Yj,qj,Xj,Jj,Qj,Zj,e$,t$,rt;function n$(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),i.push.apply(i,a)}return i}function Qs(e){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?n$(Object(i),!0).forEach(function(a){W(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):n$(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}qi.setLogger(k);let Jpe=(mj=It(),gj=It({argsMap:(e,n)=>{if(!Array.isArray(n)){if(!(n instanceof Qf))return[n];n=[n]}return n.map(i=>i?Object(i).toString():"null")}}),vj=It({argsMap:(e,n)=>(n||(n=[]),Array.isArray(n)||n.trackMediaType!==Jf.DATA?(Array.isArray(n)||(n=[n]),n.map(i=>i.getTrackId())):[n.getChannelId()])}),Ej=It({argsMap:(e,n,i,a)=>[typeof n=="object"?n.uid:n,i,a]}),_j=It({argsMap:(e,n,i)=>[n,i]}),Sj=It({argsMap:(e,n)=>n.map(i=>{let{user:a,mediaType:l}=i;return[a==null?void 0:a.uid,l]})}),yj=It({argsMap:(e,n,i,a)=>[typeof n=="object"?n.uid:n,i,a]}),Cj=It({argsMap:(e,n)=>n.map(i=>{let{user:a,mediaType:l}=i;return{uid:a==null?void 0:a.uid,mediaType:l}})}),bj=It(),Tj=It(),Rj=It(),wj=It(),Ij=It(),Aj=It(),Oj=It(),xj=It(),Nj=It(),Pj=It(),Dj=It(),Lj=It(),kj=It(),Mj=It(),Fj=It(),Uj=It({argsMap:(e,n)=>[n]}),Bj=It(),Vj=It(),jj=It(),$j=It(),Hj=It(),zj=It(),Wj=It(),Gj=It(),Kj=It({argsMap:(e,n)=>(Array.isArray(n)||(n=[n]),[JSON.stringify(n)])}),Yj=It(),qj=It(),Xj=It(),Jj=It(),Qj=It(),Zj=It(),e$=It({reportResult:!0}),t$=It(),rt=class extends br{get connectionState(){return this._gateway.state}get remoteUsers(){return this._users}get localTracks(){return this._p2pChannel.getAllTracks(!0)}get uid(){return this._uid}get channelName(){return this._channelName}get localDataChannels(){return this._p2pChannel.getAllDataChannels()}get mode(){return this._config.mode}get role(){var e;return((e=this._config)===null||e===void 0?void 0:e.role)||"audience"}get codec(){return this._config.codec}get audioCodec(){return this._config.audioCodec||"opus"}get isStringUID(){return!!this._joinInfo&&!!this._joinInfo.stringUid}get __className__(){return"Client"}constructor(e,n){let i;if(super(),W(this,"store",void 0),W(this,"_uid",void 0),W(this,"_channelName",void 0),W(this,"_uintUid",void 0),W(this,"_users",[]),W(this,"_config",void 0),W(this,"_clientId",void 0),W(this,"_appId",void 0),W(this,"_sessionId",null),W(this,"_key",void 0),W(this,"_rtmConfig",{}),W(this,"_joinInfo",void 0),W(this,"_gateway",void 0),W(this,"_statsCollector",void 0),W(this,"_configDistribute",void 0),W(this,"_leaveMutex",void 0),W(this,"_publishMutex",void 0),W(this,"_renewTokenMutex",void 0),W(this,"_subscribeMutex",void 0),W(this,"_encryptionMode","none"),W(this,"_encryptionSecret",null),W(this,"_encryptionSalt",null),W(this,"_encryptDataStream",!1),W(this,"_encryptDataStreamKey",null),W(this,"_encryptDataStreamIv",null),W(this,"_proxyServer",void 0),W(this,"_turnServer",{servers:[],mode:"auto"}),W(this,"_cloudProxyServerMode","disabled"),W(this,"_isDualStreamEnabled",!1),W(this,"_defaultStreamFallbackType",void 0),W(this,"_lowStreamParameter",void 0),W(this,"_streamFallbackTypeCacheMap",new Map),W(this,"_remoteStreamTypeCacheMap",new Map),W(this,"_axiosCancelSource",Yo.CancelToken.source()),W(this,"_audioVolumeIndicationInterval",void 0),W(this,"_networkQualityInterval",void 0),W(this,"_userOfflineTimeout",void 0),W(this,"_streamRemovedTimeout",void 0),W(this,"_liveTranscodeStreamingClient",void 0),W(this,"_liveRawStreamingClient",void 0),W(this,"_channelMediaRelayClient",void 0),W(this,"_networkQualitySensitivity","normal"),W(this,"_p2pChannel",void 0),W(this,"_useLocalAccessPoint",!1),W(this,"_setLocalAPVersion",void 0),W(this,"_joinAndNotLeaveYet",!1),W(this,"_numberOfJoinCount",0),W(this,"_joinResponse",null),W(this,"_remoteDefaultVideoStreamType",void 0),W(this,"_inspect",void 0),W(this,"_moderation",void 0),W(this,"_license",void 0),W(this,"_pendingPublishedUsers",[]),W(this,"ntpAlignErrorCount",0),W(this,"remoteInboundOffset",0),W(this,"_peerConnectionState",void 0),W(this,"_handleLocalTrackEnable",(l,u,h)=>{this.publish(l,!1).then(u).catch(h)}),W(this,"_handleLocalTrackDisable",(l,u,h)=>{this.unpublish(l).then(u).catch(h)}),W(this,"_handleUserOnline",l=>{if(Q("BLOCK_LOCAL_CLIENT")&&sh(l.uid,this.channelName))return void k.debug("[".concat(l.uid,"] will be ignored in local"));this.isStringUID&&typeof l.uid!="string"&&k.error("[".concat(this._clientId,"] StringUID is Mixed with UintUID"));const u=this._users.find(h=>h.uid===l.uid);if(u)u._trust_in_room_=!0,u._is_pre_created&&(u._is_pre_created=!1,this.safeEmit(pn.USER_JOINED,u));else{const h=new qu(l.uid,l.uint_id||l.uid);this._users.push(h),k.debug("[".concat(this._clientId,"] user online"),l.uid),this.store.firstVideoFrameDecoded(h.uid,{userJoinNotify:Date.now()}),this.safeEmit(pn.USER_JOINED,h)}}),W(this,"_handleUserOffline",l=>{if(Q("BLOCK_LOCAL_CLIENT")&&sh(l.uid,this.channelName))return;const u=this._users.find(h=>h.uid===l.uid);u&&(this._handleRemoveStream(l),this._handleRemoveDataChannels(l),u._audio_pre_subscribed||u._video_pre_subscribed?u._is_pre_created=!0:z_(this._users,u),this._remoteStreamTypeCacheMap.delete(u.uid),this._streamFallbackTypeCacheMap.delete(u.uid),k.debug("[".concat(this._clientId,"] user offline"),l.uid,"reason:",l.reason),this.safeEmit(pn.USER_LEAVED,u,l.reason))}),W(this,"_handleAddAudioOrVideoStream",(l,u,h,p,m,E,S,R)=>{if(Q("BLOCK_LOCAL_CLIENT")&&sh(u,this.channelName))return;const w=this._users.find(H=>H.uid===u);if(!w)return void k.error("[".concat(this._clientId,"] can not find target user!(on_add_stream)"));k.debug("[".concat(this._clientId,"] stream added with uid ").concat(u,", type ").concat(l)),this.store.subscribe(w.uid,l,void 0,void 0,void 0,Date.now()),l==="video"&&this.store.firstVideoFrameDecoded(w.uid,{videoAddNotify:Date.now()});const O=l==="audio"?w.hasAudio:w.hasVideo;if(w._uintid||(w._uintid=E||u),l==="audio"?w._trust_audio_stream_added_state_=!0:w._trust_video_stream_added_state_=!0,l==="audio"?(w._audio_added_=!0,h!==void 0&&(w._audioSSRC=h),p!==void 0&&(w._cname=p),S&&(w._audioOrtc=S)):(w._video_added_=!0,h!==void 0&&(w._videoSSRC=h),p!==void 0&&(w._cname=p),R!==void 0&&(w._rtxSsrcId=R),S&&(w._videoOrtc=S)),(l==="audio"?w.hasAudio:w.hasVideo)&&!O&&(k.info("[".concat(this._clientId,"] remote user ").concat(w.uid," published ").concat(l)),this.safeEmit(pn.USER_PUBLISHED,w,l)),l==="video"?ct.onGatewayStream(this._sessionId,Ei.ON_ADD_VIDEO_STREAM,pr.ON_ADD_VIDEO_STREAM,{peer:E||u,ssrc:w._videoSSRC}):ct.onGatewayStream(this._sessionId,Ei.ON_ADD_AUDIO_STREAM,pr.ON_ADD_AUDIO_STREAM,{peer:E||u,ssrc:w._audioSSRC}),this._p2pChannel.remoteMediaSsrcChanged(w,l,h).then(H=>{if(H&&(k.debug("[".concat(this._clientId,"] resubscribe ").concat(l," for user ").concat(w.uid," after rejoin because SSRC id changed.")),this._p2pChannel instanceof G0))return this._p2pChannel.unsubscribe(w,l,!0).then(()=>this._subscribe(w,l,!0).catch(B=>{k.error("[".concat(this._clientId,"] resubscribe error"),B.toString())}))}),this._p2pChannel.hasPendingRemoteMedia(w,l)&&(k.debug("[".concat(this._clientId,"] resubscribe ").concat(l," for user ").concat(w.uid," after reconnect.")),this._subscribe(w,l,!0).catch(H=>{k.error("[".concat(this._clientId,"] resubscribe error"),H.toString())})),l==="video"&&!$i()&&!co()){const H=this._getEncodingName(m);(H==null?void 0:H.toLocaleLowerCase())==O0.av1&&Cpe().then(B=>{B||this._gateway.downgradeCodec(H)})}}),W(this,"_handleRemoveStream",l=>{if(Q("BLOCK_LOCAL_CLIENT")&&sh(l.uid,this.channelName))return;const u=this._users.find(p=>p.uid===l.uid);if(!u)return void k.warning("[".concat(this._clientId,"] can not find target user!(on_remove_stream)"));k.debug("[".concat(this._clientId,"] stream removed with uid ").concat(l.uid));let h=()=>{};u.hasAudio&&u.hasVideo?h=()=>{k.info("[".concat(this._clientId,"] remote user ").concat(u.uid," unpublished audio track")),this.safeEmit(pn.USER_UNPUBLISHED,u,"audio"),k.info("[".concat(this._clientId,"] remote user ").concat(u.uid," unpublished video track")),this.safeEmit(pn.USER_UNPUBLISHED,u,"video")}:u.hasVideo?h=()=>{k.info("[".concat(this._clientId,"] remote user ").concat(u.uid," unpublished video track")),this.safeEmit(pn.USER_UNPUBLISHED,u,"video")}:u.hasAudio&&(h=()=>{k.info("[".concat(this._clientId,"] remote user ").concat(u.uid," unpublished audio track")),this.safeEmit(pn.USER_UNPUBLISHED,u,"audio")}),u._video_pre_subscribed||u._audio_pre_subscribed||(u._trust_audio_stream_added_state_=!0,u._trust_video_stream_added_state_=!0,u._audio_added_=!1,u._video_added_=!1,this._p2pChannel instanceof G0&&this._p2pChannel.unsubscribe(u).then(p=>{if(p)return this._gateway.unsubscribe(p,u.uid)}),u._audioSSRC=void 0,u._videoSSRC=void 0,u._audioOrtc=void 0,u._videoOrtc=void 0,u._rtxSsrcId=void 0),ct.onGatewayStream(this._sessionId,Ei.ON_REMOVE_STREAM,pr.ON_REMOVE_STREAM,{peer:l.uint_id||l.uid}),h()}),W(this,"_handleSetStreamLocalEnable",(l,u,h)=>{if(Q("BLOCK_LOCAL_CLIENT")&&sh(u,this.channelName))return;const p=this._users.find(S=>S.uid===u);if(!p)return void k.error("[".concat(this._clientId,"] can not find target user!(disable_local)"));k.debug("[".concat(this._clientId,"] local ").concat(l," ").concat(h?"enabled":"disabled"," with uid ").concat(u));const m=l==="audio"?p.hasAudio:p.hasVideo;if(l==="audio"){p._trust_audio_enabled_state_=!0;const S=p._audio_enabled_;if(p._audio_enabled_=h,p._audio_enabled_===S)return;{const R=p._audio_enabled_?"enable-local-audio":"disable-local-audio";k.debug("[".concat(this._clientId,"] user-info-updated, uid: ").concat(u,", msg: ").concat(R)),this.safeEmit(pn.USER_INFO_UPDATED,u,R)}}else{p._trust_video_enabled_state_=!0;const S=p._video_enabled_;if(p._video_enabled_=h,p._video_enabled_===S)return;{const R=p._video_enabled_?"enable-local-video":"disable-local-video";k.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(u,", msg: ").concat(R)),this.safeEmit(pn.USER_INFO_UPDATED,u,R)}}const E=l==="audio"?p.hasAudio:p.hasVideo;return m!==E?!m&&E?(k.info("[".concat(this._clientId,"] remote user ").concat(u," published ").concat(l)),void this.safeEmit(pn.USER_PUBLISHED,p,l)):(l==="video"&&p._videoTrack&&p._videoTrack._destroy(),l==="audio"&&p._audioTrack,this._p2pChannel.muteRemote(p,l),k.info("[".concat(this._clientId,"] remote user ").concat(u," unpublished ").concat(l)),void this.safeEmit(pn.USER_UNPUBLISHED,p,l)):void 0}),W(this,"_handleMuteStream",(l,u,h)=>{if(Q("BLOCK_LOCAL_CLIENT")&&sh(l,this.channelName))return;k.debug("[".concat(this._clientId,"] receive mute message"),l,u,h);const p=this._users.find(S=>S.uid===l);if(!p)return void k.warning("[".concat(this._clientId,"] can not find remote user, ignore mute event, uid: ").concat(l));const m=u==="audio"?p.hasAudio:p.hasVideo;if(u==="audio"){p._trust_audio_mute_state_=!0;const S=p._audio_muted_;if(p._audio_muted_=h,p._audio_muted_===S)return;{const R=p._audio_muted_?"mute-audio":"unmute-audio";k.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(l,", msg: ").concat(R)),this.safeEmit(pn.USER_INFO_UPDATED,l,R)}}else{p._trust_video_mute_state_=!0;const S=p._video_muted_;if(p._video_muted_=h,p._video_muted_===S)return;{const R=p._video_muted_?"mute-video":"unmute-video";k.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(l,", msg: ").concat(R)),this.safeEmit(pn.USER_INFO_UPDATED,l,R)}}const E=u==="audio"?p.hasAudio:p.hasVideo;if(m!==E){if(!m&&E)return(u==="audio"?p._audioSSRC:p._videoSSRC)?(k.info("[".concat(this._clientId,"] remote user ").concat(l," published ").concat(u)),void this.safeEmit(pn.USER_PUBLISHED,p,u)):void k.warning("[".concat(this._clientId,"] remote user ").concat(l," receive ").concat(u," unmute message  before add stream message, ").concat(u," SSRC doesn't exist yet."));u==="video"&&p._videoTrack&&!p._video_pre_subscribed&&p._videoTrack._destroy(),u==="audio"&&p._audioTrack,this._p2pChannel.muteRemote(p,u),k.info("[".concat(this._clientId,"] remote user ").concat(l," unpublished ").concat(u)),this.safeEmit(pn.USER_UNPUBLISHED,p,u)}}),W(this,"_handleP2PLost",async l=>{k.debug("[".concat(this._clientId,"] receive p2p lost"),l),parseInt(l.p2pid,10)===this.store.p2pId?await this._p2pChannel.requestReconnect():k.warning("[".concat(this._clientId,"] P2PLost stream not found"),l)}),W(this,"_handleTokenWillExpire",()=>{k.debug("[".concat(this._clientId,"] received message onTokenPrivilegeWillExpire")),this.safeEmit(pn.ON_TOKEN_PRIVILEGE_WILL_EXPIRE)}),W(this,"_handleBeforeUnload",l=>{l.type==="beforeunload"&&l.returnValue!==void 0&&l.returnValue!==""||(this.leave(),k.info("[".concat(this._clientId,"] auto leave onbeforeunload or pagehide")))}),W(this,"_handleUpdateNetworkQuality",()=>{if(this._networkQualitySensitivity==="normal")return;if(navigator&&navigator.onLine!==void 0&&!navigator.onLine)return void this.safeEmit(pn.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6});const l={downlinkNetworkQuality:0,uplinkNetworkQuality:0};l.uplinkNetworkQuality=this._p2pChannel.getUplinkNetworkQuality(),l.downlinkNetworkQuality=this._p2pChannel.getDownlinkNetworkQuality(),this.safeEmit(pn.NETWORK_QUALITY,l)}),W(this,"_handleP2PAddAudioOrVideoStream",(l,u,h,p)=>{const m=this._users.find(S=>S.uid===u);if(!m)return void k.error("[".concat(this._clientId,"] can not find target user!(on_add_stream)"));k.debug("[".concat(this._clientId,"] stream added with uid ").concat(u,", type ").concat(l)),this.store.subscribe(m.uid,l,void 0,void 0,void 0,Date.now());const E=l==="audio"?m.hasAudio:m.hasVideo;l==="audio"?m._trust_audio_stream_added_state_=!0:m._trust_video_stream_added_state_=!0,l==="audio"?(m._audio_added_=!0,h!==void 0&&(m._audioSSRC=h),p!==void 0&&(m._audioMid=p)):(m._video_added_=!0,h!==void 0&&(m._videoSSRC=h),p!==void 0&&(m._videoMid=p)),(l==="audio"?m.hasAudio:m.hasVideo)&&!E&&(k.info("[".concat(this._clientId,"] remote user ").concat(m.uid," published ").concat(l)),this.safeEmit(pn.USER_PUBLISHED,m,l)),this._p2pChannel.hasPendingRemoteMedia(m,l)&&(k.debug("[".concat(this._clientId,"] resubscribe ").concat(l," for user ").concat(m.uid," after reconnect.")),this._subscribe(m,l,!0).catch(S=>{k.error("[".concat(this._clientId,"] resubscribe error"),S.toString())}))}),this._config=e,this._clientId=n||Zn(5,"client-"),this.store=new class{constructor(l,u,h,p){Bt(this,"state",void 0),this.state={codec:l,audioCodec:u,mode:h,clientId:p,sessionId:null,p2pId:0,dcId:0,pubId:0,subId:0,keyMetrics:{publish:[],subscribe:[],firstVideoFrameDecoded:[]},joinChannelServiceRecords:[],cloudProxyServerMode:"disabled",useP2P:!1,p2pTransport:eh.Default,hasStartJoinChannel:!1,isABTestSuccess:!1,autoSubscribe:!1,enableInstantMuteRestore:!1}}dispatch(l){this.state=function(u,h){switch(h.type){case $t.SET_SESSION_ID:return Ve(Ve({},u),{},{sessionId:h.sessionId});case $t.SET_P2P_ID:return Ve(Ve({},u),{},{p2pId:h.p2pId});case $t.SET_UID:return Ve(Ve({},u),{},{uid:h.uid});case $t.SET_INT_UID:return Ve(Ve({},u),{},{intUid:h.intUid});case $t.SET_PUB_ID:return Ve(Ve({},u),{},{pubId:h.pubId});case $t.KEY_METRIC_CLIENT_CREATED:return Ve(Ve({},u),{},{keyMetrics:Ve(Ve({},u.keyMetrics),{},{clientCreated:h.metric})});case $t.KEY_METRIC_JOIN_START:return Ve(Ve({},u),{},{keyMetrics:Ve(Ve({},u.keyMetrics),{},{joinStart:h.metric})});case $t.KEY_METRIC_PRELOAD_START:return Ve(Ve({},u),{},{keyMetrics:Ve(Ve({},u.keyMetrics),{},{preloadStart:h.metric})});case $t.KEY_METRIC_PRELOAD_END:return Ve(Ve({},u),{},{keyMetrics:Ve(Ve({},u.keyMetrics),{},{preloadEnd:h.metric})});case $t.KEY_METRIC_JOIN_END:return Ve(Ve({},u),{},{keyMetrics:Ve(Ve({},u.keyMetrics),{},{joinEnd:h.metric})});case $t.KEY_METRIC_REQUEST_AP_START:return Ve(Ve({},u),{},{keyMetrics:Ve(Ve({},u.keyMetrics),{},{requestAPStart:h.metric})});case $t.KEY_METRIC_REQUEST_AP_END:return Ve(Ve({},u),{},{keyMetrics:Ve(Ve({},u.keyMetrics),{},{requestAPEnd:h.metric})});case $t.KEY_METRIC_REQUEST_SUA_END:return Ve(Ve({},u),{},{keyMetrics:Ve(Ve({},u.keyMetrics),{},{requestSUAEnd:h.metric})});case $t.KEY_METRIC_BEFORE_CONNECT:return Ve(Ve({},u),{},{keyMetrics:Ve(Ve({},u.keyMetrics),{},{beforeConnect:h.metric})});case $t.KEY_METRIC_PEER_RECEIVER:return Ve(Ve({},u),{},{keyMetrics:Ve(Ve({},u.keyMetrics),{},{peerReceiver:h.metric})});case $t.KEY_METRIC_SIGNAL_CONNECTED:return Ve(Ve({},u),{},{keyMetrics:Ve(Ve({},u.keyMetrics),{},{signalConnected:h.metric})});case $t.KEY_METRIC_JOIN_REQ:return Ve(Ve({},u),{},{keyMetrics:Ve(Ve({},u.keyMetrics),{},{joinReq:h.metric})});case $t.KEY_METRIC_JOIN_REP:return Ve(Ve({},u),{},{keyMetrics:Ve(Ve({},u.keyMetrics),{},{joinRep:h.metric})});case $t.KEY_METRIC_JOIN_GATEWAY_START:return Ve(Ve({},u),{},{keyMetrics:Ve(Ve({},u.keyMetrics),{},{joinGatewayStart:h.metric})});case $t.KEY_METRIC_JOIN_GATEWAY_END:return Ve(Ve({},u),{},{keyMetrics:Ve(Ve({},u.keyMetrics),{},{joinGatewayEnd:h.metric})});case $t.KEY_METRIC_PEER_CONNECTION_START:return Ve(Ve({},u),{},{keyMetrics:Ve(Ve({},u.keyMetrics),{},{peerConnectionStart:h.metric})});case $t.KEY_METRIC_PEER_CONNECTION_END:return Ve(Ve({},u),{},{keyMetrics:Ve(Ve({},u.keyMetrics),{},{peerConnectionEnd:h.metric})});case $t.KEY_METRIC_DESCRIPTION_START:return Ve(Ve({},u),{},{keyMetrics:Ve(Ve({},u.keyMetrics),{},{descriptionStart:h.metric})});case $t.KEY_METRIC_SIGNAL_CHANNEL_OPEN:return Ve(Ve({},u),{},{keyMetrics:Ve(Ve({},u.keyMetrics),{},{signalChannelOpen:h.metric})});case $t.KEY_METRIC_ICE_CONNECTION_END:return Ve(Ve({},u),{},{keyMetrics:Ve(Ve({},u.keyMetrics),{},{iceConnectionEnd:h.metric})});case $t.KEY_METRIC_PUBLISH:{const p=u.keyMetrics.publish,m=p.findIndex(E=>E.trackId===h.metric.trackId);return m!==-1?(p[m]=Ve(Ve({},p[m]),h.metric),Ve(Ve({},u),{},{keyMetrics:Ve(Ve({},u.keyMetrics),{},{publish:[...p]})})):Ve(Ve({},u),{},{keyMetrics:Ve(Ve({},u.keyMetrics),{},{publish:[...u.keyMetrics.publish,h.metric]})})}case $t.KEY_METRIC_SUBSCRIBE:{const p=u.keyMetrics.subscribe,m=p.findIndex(E=>E.userId===h.metric.userId&&E.type===h.metric.type);return m!==-1?(p[m]=Ve(Ve({},p[m]),h.metric),Ve(Ve({},u),{},{keyMetrics:Ve(Ve({},u.keyMetrics),{},{subscribe:[...p]})})):Ve(Ve({},u),{},{keyMetrics:Ve(Ve({},u.keyMetrics),{},{subscribe:[...u.keyMetrics.subscribe,h.metric]})})}case $t.KEY_METRIC_FIRST_VIDEO_FRAME_DECODED:{const p=u.keyMetrics.firstVideoFrameDecoded,m=p.findIndex(E=>E.userId===h.metric.userId);return m!==-1?(p[m]=Ve(Ve({},p[m]),h.metric),Ve(Ve({},u),{},{keyMetrics:Ve(Ve({},u.keyMetrics),{},{firstVideoFrameDecoded:[...p]})})):Ve(Ve({},u),{},{keyMetrics:Ve(Ve({},u.keyMetrics),{},{firstVideoFrameDecoded:[...u.keyMetrics.firstVideoFrameDecoded,h.metric]})})}case $t.RESET_FIRST_VIDEO_FRAME_DECODED:return u.keyMetrics.firstVideoFrameDecoded=[],u;case $t.SET_CLOUD_PROXY_SERVER_MODE:return u.cloudProxyServerMode=h.mode,u;case $t.RECORD_JOIN_CHANNEL_SERVICE:return typeof h.index!="number"?u.joinChannelServiceRecords=[...u.joinChannelServiceRecords,h.record]:(u.joinChannelServiceRecords[h.index]=Ve(Ve({},u.joinChannelServiceRecords[h.index]),h.record),u.joinChannelServiceRecords=[...u.joinChannelServiceRecords]),u;case $t.RESET_JOIN_CHANNEL_SERVICE_RECORDS:return u.joinChannelServiceRecords=[],u;case $t.RESET_KEY_METRICS:return u.keyMetrics={publish:[],subscribe:[],firstVideoFrameDecoded:[]},u;case $t.SET_USE_P2P:return Ve(Ve({},u),{},{useP2P:h.val});case $t.SET_TRANSPORT_TYPE:return Ve(Ve({},u),{},{p2pTransport:h.val});default:return u}}(this.state,l)}set autoSubscribe(l){this.state.autoSubscribe=l}get autoSubscribe(){return this.state.autoSubscribe}set enableInstantMuteRestore(l){this.state.enableInstantMuteRestore=l}get enableInstantMuteRestore(){return this.state.enableInstantMuteRestore}set sessionId(l){this.dispatch({type:$t.SET_SESSION_ID,sessionId:l})}get sessionId(){return this.state.sessionId}set cid(l){this.state.cid=l}get cid(){return this.state.cid}set codec(l){this.state.codec=l}get codec(){return this.state.codec}get mode(){return this.state.mode}get audioCodec(){return this.state.audioCodec}get clientId(){return this.state.clientId}set p2pId(l){this.dispatch({type:$t.SET_P2P_ID,p2pId:l})}get p2pId(){return this.state.p2pId}set dcId(l){this.dispatch({type:$t.SET_DC_ID,dcId:l})}get dcId(){return this.state.dcId}set uid(l){this.dispatch({type:$t.SET_UID,uid:l})}get uid(){return this.state.uid}set intUid(l){this.dispatch({type:$t.SET_INT_UID,intUid:l})}get intUid(){return this.state.intUid}set pubId(l){this.dispatch({type:$t.SET_PUB_ID,pubId:l})}get pubId(){return this.state.pubId}set cloudProxyServerMode(l){this.dispatch({type:$t.SET_CLOUD_PROXY_SERVER_MODE,mode:l})}get cloudProxyServerMode(){return this.state.cloudProxyServerMode}set useP2P(l){this.dispatch({type:$t.SET_USE_P2P,val:l})}get useP2P(){return this.state.useP2P}set p2pTransport(l){this.dispatch({type:$t.SET_TRANSPORT_TYPE,val:l})}get p2pTransport(){return this.state.p2pTransport}set hasStartJoinChannel(l){this.state.hasStartJoinChannel=l}get hasStartJoinChannel(){return this.state.hasStartJoinChannel}set isABTestSuccess(l){this.state.isABTestSuccess=l}get isABTestSuccess(){return this.state.isABTestSuccess}clientCreated(){this.dispatch({type:$t.KEY_METRIC_CLIENT_CREATED,metric:Date.now()})}joinStart(){this.dispatch({type:$t.KEY_METRIC_JOIN_START,metric:Date.now()})}preloadStart(){this.dispatch({type:$t.KEY_METRIC_PRELOAD_START,metric:Date.now()})}preloadEnd(){this.dispatch({type:$t.KEY_METRIC_PRELOAD_END,metric:Date.now()})}joinEnd(){this.dispatch({type:$t.KEY_METRIC_JOIN_END,metric:Date.now()})}requestAPStart(){this.dispatch({type:$t.KEY_METRIC_REQUEST_AP_START,metric:Date.now()})}requestAPEnd(){this.dispatch({type:$t.KEY_METRIC_REQUEST_AP_END,metric:Date.now()})}requestSUAEnd(){this.dispatch({type:$t.KEY_METRIC_REQUEST_SUA_END,metric:Date.now()})}beforeConnect(){this.dispatch({type:$t.KEY_METRIC_BEFORE_CONNECT,metric:Date.now()})}peerReceiver(){this.dispatch({type:$t.KEY_METRIC_PEER_RECEIVER,metric:Date.now()})}signalConnected(){this.dispatch({type:$t.KEY_METRIC_SIGNAL_CONNECTED,metric:Date.now()})}joinReq(){this.dispatch({type:$t.KEY_METRIC_JOIN_REQ,metric:Date.now()})}joinRep(){this.dispatch({type:$t.KEY_METRIC_JOIN_REP,metric:Date.now()})}joinGatewayStart(){this.dispatch({type:$t.KEY_METRIC_JOIN_GATEWAY_START,metric:Date.now()})}joinGatewayEnd(){this.dispatch({type:$t.KEY_METRIC_JOIN_GATEWAY_END,metric:Date.now()})}peerConnectionStart(){this.dispatch({type:$t.KEY_METRIC_PEER_CONNECTION_START,metric:Date.now()})}peerConnectionEnd(){this.dispatch({type:$t.KEY_METRIC_PEER_CONNECTION_END,metric:Date.now()})}firstVideoFrameDecoded(l,u){this.dispatch({type:$t.KEY_METRIC_FIRST_VIDEO_FRAME_DECODED,metric:Ve({userId:l},u)})}descriptionStart(){this.dispatch({type:$t.KEY_METRIC_DESCRIPTION_START,metric:Date.now()})}signalChannelOpen(){this.dispatch({type:$t.KEY_METRIC_SIGNAL_CHANNEL_OPEN,metric:Date.now()})}iceConnectionEnd(){this.dispatch({type:$t.KEY_METRIC_ICE_CONNECTION_END,metric:Date.now()})}publish(l,u,h,p){this.dispatch({type:$t.KEY_METRIC_PUBLISH,metric:Ve(Ve({trackId:l,type:u},h&&{publishStart:h}),p&&{publishEnd:p})})}subscribe(l,u,h,p,m,E,S){this.dispatch({type:$t.KEY_METRIC_SUBSCRIBE,metric:Ve(Ve(Ve(Ve(Ve({userId:l,type:u},h&&{subscribeStart:h}),p&&{subscribeEnd:p}),m&&{firstFrame:m}),E&&{streamAdded:E}),S&&{firstDecoded:S})})}massSubscribe(l,u,h,p){l.forEach(m=>{this.dispatch({type:$t.KEY_METRIC_SUBSCRIBE,metric:Ve(Ve(Ve({userId:m.userId,type:m.type},u&&{subscribeStart:u}),h&&{subscribeEnd:h}),p&&{firstFrame:p})})})}get keyMetrics(){return this.state.keyMetrics}recordJoinChannelService(l,u){l.service==="gateway"&&Array.isArray(l.urls)&&(l.urls=l.urls.map(h=>h.replace(/(\d+)-\d+-\d+-(\d+)/,"$1-*-*-$2")));try{return typeof u!="number"?(this.dispatch({type:$t.RECORD_JOIN_CHANNEL_SERVICE,record:Ve(Ve({},l),{},{sessionId:this.sessionId,cloudProxyMode:this.cloudProxyServerMode,uid:this.uid})}),this.state.joinChannelServiceRecords.length-1):(u<0||u>=this.state.joinChannelServiceRecords.length||this.dispatch({type:$t.RECORD_JOIN_CHANNEL_SERVICE,record:l,index:u}),u)}catch{return 0}}resetJoinChannelServiceRecords(){this.dispatch({type:$t.RESET_JOIN_CHANNEL_SERVICE_RECORDS})}resetKeyMetrics(){this.dispatch({type:$t.RESET_KEY_METRICS})}resetFirstVideoFrameDecoded(){this.dispatch({type:$t.RESET_FIRST_VIDEO_FRAME_DECODED})}get joinChannelServiceRecords(){try{return this.state.joinChannelServiceRecords}catch{return[]}}}(e.codec,e.audioCodec,e.mode,this._clientId),this._leaveMutex=new qi("client-leave",this._clientId),this._publishMutex=new qi("client-publish",this._clientId),this._renewTokenMutex=new qi("client-renewtoken",this._clientId),this._subscribeMutex=new qi("client-subscribe",this._clientId),this.store.clientCreated(),e.proxyServer&&this.setProxyServer(e.proxyServer,!0),e.turnServer&&this.setTurnServer(e.turnServer,!0),k.info("[".concat(this._clientId,"] Initializing AgoraRTC client v").concat(cs," build: ").concat(lI,", mode: ").concat(this.mode,", codec: ").concat(this.codec)),e.clientRoleOptions)try{Xw(e.clientRoleOptions),i=Object.assign({},e.clientRoleOptions)}catch(l){k.warning("[".concat(this._clientId,"] ").concat(l.toString()))}var a;this._statsCollector=new z0(this.store),this._statsCollector.onStatsException=(l,u,h)=>{k.warn("[".concat(this._clientId,"] receive exception msg, code: ").concat(l,", msg: ").concat(u,", uid: ").concat(h)),l===cA.VIDEO_ENCODE_FAILED&&this.localTracks.forEach(p=>{p instanceof iS&&Q("ENABLE_ENCODE_EXCEPTION")&&p.findClosestProfile()}),this.safeEmit(pn.EXCEPTION,{code:l,msg:u,uid:h})},this._statsCollector.onUploadPublishDuration=(l,u,h,p)=>{const m=this._users.find(E=>E.uid===l);m&&(this.store.keyMetrics&&(this.store.firstVideoFrameDecoded(m._uintid,{peerPublishDuration:h,peerPubStatusMs:Date.now()}),this._p2pChannel.reportVideoFirstFrameRender(m)),ct.peerPublishStatus(this._sessionId,{subscribeElapse:p,audioPublishDuration:u,videoPublishDuration:h,peer:m._uintid}))},this._statsCollector.onVideoCodecChanged=l=>{if(Q("VIDEO_STANDARD_BITRATE_VERSION")&&(l==="av1"||l==="h265"||l==="h264")){const u=this.localTracks.find(h=>h instanceof sr);u&&u._saveEncodeBitrateRatio!==1&&u.setSaveEncodeBitrateRatio(l==="h264"?Q("BASELINE_MORE_H264_BITRATE_RATIO"):void 0)}},this.store.useP2P=e.mode==="p2p",this._gateway=new gpe(this.store,{clientId:this._clientId,mode:this.mode,codec:this.codec,websocketRetryConfig:e.websocketRetryConfig||ei,httpRetryConfig:e.httpRetryConfig||ei,forceWaitGatewayResponse:e.forceWaitGatewayResponse===void 0||e.forceWaitGatewayResponse,statsCollector:this._statsCollector,role:e.role,clientRoleOptions:i}),this._configDistribute=new Ipe(this._clientId,this.store),this.store.useP2P?(this._p2pChannel=(a={store:this.store,statsCollector:this._statsCollector},Xl("P2PChannel").create(a)),this._handleP2PEvents()):this._p2pChannel=new G0(this.store,this._statsCollector),this._handleP2PChannelEvents(),this._handleGatewayEvents(),this._handleGatewaySignalEvents()}async joinMeta(e,n,i,a,l){let u=!(arguments.length>5&&arguments[5]!==void 0)||arguments[5],h=arguments.length>6&&arguments[6]!==void 0&&arguments[6];zn("JOIN_GATEWAY_USE_443PORT_ONLY",u),zn("JOIN_GATEWAY_USE_DUAL_DOMAIN",h);const p=this._gateway.signal.websocket;return p instanceof KI&&(p.use443PortOnly=u,p.tryDoubleDomain=h),async function(m,E,S){B_.get(m)||B_.set(m,[]),V_.get(m)||V_.set(m,E),ll.get(m)||ll.set(m,0);const R=B_.get(m),w=V_.get(m);if(!R||!w)throw new Error("concurrent: deferQueue or maxConcurrency is null");if(ll.get(m)===w){const q=S0();R.push(q),await q.promise}ll.set(m,ll.get(m)+1);for(var O=arguments.length,H=new Array(O>3?O-3:0),B=3;B<O;B++)H[B-3]=arguments[B];const j=await S(...H);return ll.set(m,ll.get(m)-1),ll.get(m)===w-1&&R.length>0&&(R[0].resolve(),R.shift()),ll.get(m)===0&&(B_.set(m,[]),V_.set(m,0),ll.set(m,0)),j}("client.join",Q("JOIN_MAX_CONCURRENCY"),this.join.bind(this),e,n,i,a,l)}async join(e,n,i,a,l){const u=++this._numberOfJoinCount;this.store.joinStart(),a&&(this.store.uid=a);const h=(K_||K_||(K_=(window.location.protocol.split(":")[0]||"").toUpperCase(),K_))==="HTTPS",p=J3()?window.isSecureContext:"Browser Not Support";if(!J3()&&!h||!window.isSecureContext){const j="The website must be running in a secure context (About secure context: https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts ), otherwise the media collection will be restricted by the browser";k.warning(j)}let m;ct.setAppId(e);try{if(!i&&i!==null)throw new Ce(X.INVALID_PARAMS,"Invalid token: ".concat(i,". If you don not use token, set it to null"));if(i&&Ni(i,"token",1,2047),Ni(e,"appid",1,2047),mS(n),a&&gS(a),l)if(typeof l=="string")Ni(l,"optionalInfo",1,256),m=l;else{if(typeof l!="object")throw new Ce(X.INVALID_PARAMS,"Invalid options: options is not a string or object");{const{autoSubscribe:j,enableInstantMuteRestore:q}=l;j&&(wc(j,"autoSubscribe"),k.info("[".concat(this._clientId,"] join: autoSubscribe: ").concat(j)),this.store.autoSubscribe=j),q&&(wc(q,"enableInstantMuteRestore"),k.info("[".concat(this._clientId,"] join: enableInstantMuteRestore: ").concat(q)),this.store.enableInstantMuteRestore=q)}}}catch(j){throw ct.reportApiInvoke(Zd(),{name:Ur.JOIN,options:[e,n,i,a],states:{isHttps:h,isSecureContext:p},tag:gr.TRACER}).onError(j),j}if(this._leaveMutex.isLocked&&(k.debug("[".concat(this._clientId,"] join: waiting leave operation")),(await this._leaveMutex.lock())(),k.debug("[".concat(this._clientId,"] join: continue"))),this._joinAndNotLeaveYet=!0,this.connectionState!=="DISCONNECTED"){const j=new Ce(X.INVALID_OPERATION,"[".concat(this._clientId,"] Client already in connecting/connected state"));throw ct.reportApiInvoke(Zd(),{name:Ur.JOIN,options:[e,n,i,a],states:{isHttps:h,isSecureContext:p},tag:gr.TRACER}).onError(j),j}this._gateway.state="CONNECTING",this.store.preloadStart();const E=await X8({appId:e,cname:n,uid:a,stringUid:typeof a=="string"?a:void 0,token:i||e,cloudProxyServer:this._cloudProxyServerMode});if(this.store.preloadEnd(),!this._joinAndNotLeaveYet)throw new Ce(X.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));const S=(E==null?void 0:E.sid)||Zd();k.info("[".concat(this._clientId,"] start join channel ").concat(n,", join number: ").concat(u)),this._sessionId||(this._sessionId=S,this.store.sessionId=this._sessionId);const R=ct.reportApiInvoke(S,{id:this._clientId,name:Ur.JOIN,options:[e,n,i,a],states:{isHttps:h,isSecureContext:p},tag:gr.TRACER}),w=Qs(Qs(Qs({},this._rtmConfig),{},{role:this.role,clientId:this._clientId,appId:e,sid:this._sessionId,cname:n,uid:typeof a!="string"?a:null,turnServer:this._turnServer,proxyServer:this._proxyServer,token:i||e,cloudProxyServer:this._cloudProxyServerMode,optionalInfo:m,license:this._license,useLocalAccessPoint:this._useLocalAccessPoint,preload:!!E},this._remoteDefaultVideoStreamType!==void 0&&{defaultVideoStream:this._remoteDefaultVideoStreamType}),{},{apRequestDetail:Q("AP_REQUEST_DETAIL")||void 0});if(this._useLocalAccessPoint&&(w.setLocalAPVersion=this._setLocalAPVersion),typeof a=="string"&&(w.stringUid=a,this._uintUid?(w.uid=this._uintUid,this._uintUid=void 0):w.uid=0),this._encryptionMode!=="none"&&this._encryptionSecret){if(w.aesmode=this._encryptionMode,w.aespassword=await(async j=>{const q=function(he){const re=window.atob(`MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDCMnXAHkKIGAM+x4N22gCI+Wyu
STM9ztkT3uYslTT2PuKmZfPzhH6kVdO7PTjGCOZnAsyb3oTtWat0KcxQ4jxvqQV+
HvYl3iI1Yd4vl2c3qRMJPLtRDfNxa2Mcxgq7e9aEUibzdd0st+OJAy3tOj/Y0aVy
xQiYDz3vqa6bP29adwIDAQAB`),Se=new Uint8Array(new ArrayBuffer(re.length));for(let Ae=0;Ae<re.length;Ae+=1)Se[Ae]=re.charCodeAt(Ae);return Se}(),Y=await window.crypto.subtle.importKey("spki",q,{name:"RSA-OAEP",hash:"SHA-256"},!0,["encrypt"]),Z=Yw(j),pe=await window.crypto.subtle.encrypt({name:"RSA-OAEP"},Y,Z);return function(he){let re="";for(let Se=0;Se<he.length;Se+=1)re+=String.fromCharCode(he[Se]);return window.btoa(re)}(new Uint8Array(pe))})(this._encryptionSecret),!this._joinAndNotLeaveYet)throw new Ce(X.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));this._encryptionSalt&&(w.aessalt=this._encryptionSalt)}if(this._encryptDataStream&&(this._encryptionMode==="aes-128-gcm2"||this._encryptionMode==="aes-256-gcm2"))if(this._encryptionSalt&&this._encryptionSecret)if(window.crypto.subtle){const j=new TextEncoder,q=Q("USE_PURE_ENCRYPTION_MASTER_KEY")?j.encode(w.appId+this._encryptionSecret+this._encryptionSecret):j.encode(w.appId+w.cname+this._encryptionSecret);this._encryptDataStreamIv=await async function(Y,Z,pe){const he=await window.crypto.subtle.importKey("raw",Z,"PBKDF2",!1,["deriveBits","deriveKey"]),re=Y==="aes-128-gcm2"?128:256,Se=await window.crypto.subtle.deriveBits({name:"PBKDF2",iterations:sV,hash:"SHA-256",salt:pe},he,re+Ghe);return new Uint8Array(Se).subarray(re/8)}(this._encryptionMode,q,Qd(this._encryptionSalt)),this._encryptDataStreamKey=await async function(Y,Z,pe){const he=await window.crypto.subtle.importKey("raw",Z,"PBKDF2",!1,["deriveBits","deriveKey"]),re=Y==="aes-128-gcm2"?128:256;return await window.crypto.subtle.deriveKey({name:"PBKDF2",iterations:sV,hash:"SHA-256",salt:pe},he,{name:"AES-GCM",length:re},!0,["encrypt","decrypt"])}(this._encryptionMode,q,Qd(this._encryptionSalt))}else p?k.warning("[".concat(this._clientId,"] encrypt datastream must be running in a secure context, fallback to plain data stream")):k.warning("[".concat(this._clientId,"] current browser do not support WebCrypto ,fallback to plain data stream")),this._encryptDataStream=!1;else this._encryptDataStream=!1,k.debug("[".concat(this._clientId,"] no salt / secret, cannot support encrypt data stream, fallback to plain data stream"));this._startSession(this._sessionId,{channel:n,appId:e,stringUid:w.stringUid});const O=this._sessionId;setTimeout(()=>{this.connectionState==="CONNECTING"&&O===this._sessionId&&ct.joinChannelTimeout(this._sessionId,5)},5e3);try{var H;let j;const q=w.cloudProxyServer;if(Ge(H=["proxy3","proxy4","proxy5"]).call(H,q)){const re=Q("PROXY_SERVER_TYPE3");Array.isArray(re)?w.proxyServer=re[0]:w.proxyServer=re}if(ct.setProxyServer(w.proxyServer),k.setProxyServer(w.proxyServer),this.store.requestAPStart(),E){if(k.debug("[".concat(this._clientId,"] get serverInfo Success from Preload Cache ").concat(w.stringUid?", ".concat(w.stringUid," => ").concat(E.intUid):""," ")),w.stringUid&&!w.uid&&(w.uid=E.intUid),j={gatewayInfo:E.ap.gatewayInfo},Q("JOIN_WITH_FALLBACK_MEDIA_PROXY")&&w.turnServer.mode==="auto")if(E.ap.proxyInfo.addresses.length===0)k.warning("no edge services in ap response of proxy fallback, will not set proxy in iceServers");else{const re=(await G6(E.ap.proxyInfo,E.ap.gatewayInfo.uid)).map(Se=>({turnServerURL:Se.address,tcpport:Se.tcpport||Wi.tcpport,udpport:Se.udpport||Wi.udpport,username:Se.username||Wi.username,password:Se.password||Wi.password,forceturn:!1,security:!0}));w.turnServer={mode:"manual",servers:re}}Z8(E,w.stringUid)}else{if(w.stringUid&&!w.uid){let re;[re,j]=await et.all([S8(w.stringUid,w,this._axiosCancelSource.token,this._config.httpRetryConfig||ei,this.store).finally(()=>{this.store.requestSUAEnd()}),_8(w,this._axiosCancelSource.token,this._config.httpRetryConfig||ei,!0,this.store).finally(()=>{this.store.requestAPEnd()})]),k.debug("[".concat(this._clientId,"] getUserAccount Success ").concat(w.stringUid," => ").concat(re)),w.uid=re,j.gatewayInfo.uid=re,j.gatewayInfo.res.uid=re}else j=await _8(w,this._axiosCancelSource.token,this._config.httpRetryConfig||ei,!0,this.store);if(!this._joinAndNotLeaveYet)throw new Ce(X.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"))}this.store.requestAPEnd(),setTimeout(()=>{this._configDistribute.startGetConfigDistribute(w,this._axiosCancelSource.token),this._configDistribute.on(k0.UPDATE_BITRATE_LIMIT,re=>{this._p2pChannel.updateBitrateLimit(re)}),this._configDistribute.on(k0.UPDATE_CLIENT_ROLE_OPTIONS,re=>{this._setClientRoleOptions(re)})},0),this._key=i||e;const Y=j.gatewayInfo,Z=w.uid?w.uid:Y.uid;this._joinInfo=Qs(Qs({},w),{},{cid:Y.cid,uid:Z,vid:Y.vid,apResponse:Y.res,apGatewayAddress:Y.apGatewayAddress,uni_lbs_ip:Y.uni_lbs_ip,gatewayAddrs:Y.gatewayAddrs}),this.store.intUid=Z,this.store.cid=Y.cid;const pe=await this._joinGateway();if(!this._joinAndNotLeaveYet)throw new Ce(X.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));R.onSuccess(pe),this._appId=e,this._channelName=w.cname,this._uid=pe,this.store.uid=pe,setTimeout(()=>{this._networkQualityInterval&&window.clearInterval(this._networkQualityInterval),this._networkQualityInterval=window.setInterval(this._handleUpdateNetworkQuality,2e3),window.addEventListener($i()?"beforeunload":"pagehide",this._handleBeforeUnload),this._statsCollector.startUpdateStats()},0);const he=w.stringUid?"string uid: ".concat(w.stringUid,",uid: ").concat(w.uid):"uid: ".concat(this._uid);return k.info("[".concat(this._clientId,"] Joining channel success: channel: ").concat(n,",").concat(he)),setTimeout(()=>{k.startUpload()},5e3),this.store.joinEnd(),B=this,Ge(ah).call(ah,B)||ah.push(B),this._cloudProxyServerMode==="disabled"&&Rn().supportWebCrypto&&Q("ENABLE_PRELOAD")&&CA(this._joinInfo),pe}catch(j){const q=Array.isArray(j)?j[0]:j;throw q&&q.code===X.OPERATION_ABORTED?k.warning("[".concat(this._clientId,"] join number: ").concat(u,", Joining channel failed, rollback"),q):k.error("[".concat(this._clientId,"] join number: ").concat(u,", Joining channel failed, rollback"),q),q.code!==X.OPERATION_ABORTED&&this._numberOfJoinCount===u&&(this._gateway.state="DISCONNECTED",this._reset()),R.onError(q),q}var B}_joinGateway(){if(!this._joinInfo||!this._key)throw new Ce(X.INVALID_OPERATION);return this._gateway.join(this._joinInfo,this._key,!(this._joinInfo.cloudProxyServer!=="disabled"||this._joinInfo.proxyServer||!Q("JOIN_WITH_FALLBACK_SIGNAL_PROXY")))}async leave(){k.info("[".concat(this._clientId,"] Leaving channel")),window.removeEventListener($i()?"beforeunload":"pagehide",this._handleBeforeUnload),this._reset(),function(n){const i=ah.indexOf(n);i!==-1&&ah.splice(i,1)}(this),this._statsCollector.stopUpdateStats();const e=await this._leaveMutex.lock();if(this.connectionState==="DISCONNECTED")return k.info("[".concat(this._clientId,"] Leaving channel repeated, success")),void e();await this._gateway.leave(this.connectionState!=="CONNECTED",Fn.LEAVE),k.info("[".concat(this._clientId,"] Leaving channel success")),this._joinAndNotLeaveYet=!1,this.store.resetJoinChannelServiceRecords(),e()}async publish(e){let n=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(!Array.isArray(e)){if(!(e instanceof Qf))return this._publishDataChannel(e);e=[e]}if(e.length===0)throw new Ce(X.INVALID_PARAMS,"param list is empty");const i=e;if(this._gateway.role==="audience")throw new Ce(X.INVALID_OPERATION,"audience can not publish stream");for(const l of i){if(!(l instanceof Qf))throw new Ce(X.INVALID_PARAMS,"parameter is not local track");if(!l._enabled&&n)throw new Ce(X.TRACK_IS_DISABLED,"can not publish a disabled track: ".concat(l.getTrackId()))}k.info("[".concat(this._clientId,"] Publishing tracks, id ").concat(i.map(l=>"".concat(l.getTrackId()," "))));const a=await this._publishMutex.lock();await this._configDistribute.awaitConfigDistributeComplete(),n&&i.forEach(l=>{const u=this._configDistribute.getBitrateLimit();l instanceof sr&&u&&l.setBitrateLimit(u.uplink)});try{await this._publishHighStream(i),k.info("[".concat(this._clientId,"] Publish success, id ").concat(i.map(l=>"".concat(l.getTrackId()," "))))}catch(l){throw k.error("[".concat(this._clientId,"] publish error"),l.toString()),l}finally{a()}}async _publishDataChannel(e){if(e==null)throw new Ce(X.INVALID_PARAMS,"parameter is not local track or datachannel config, config is ".concat(JSON.stringify(e)));Yn(e.id,"id",0,65535,!0),wc(e.ordered,"ordered"),Ni(e.metadata,"metadata",0,512),k.info("[".concat(this._clientId,"] Publishing datachannels, id ").concat(e.id));const n=await this._publishMutex.lock();try{if(this._p2pChannel.getAllDataChannels().findIndex(l=>l.id===e.id)!==-1)throw new Ce(X.INVALID_PARAMS,"Invalid id: ".concat(e.id,". If you want to republish the datachannel, unpublish first"));if(!this._joinInfo||this._uid===void 0)throw new Ce(X.INVALID_OPERATION,"Can't publish datachannel, haven't joined yet!");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new Ce(X.INVALID_OPERATION,"can not publish datachannel in ".concat(this.connectionState," state"));if(this._turnServer.mode==="auto"&&Q("FORCE_TURN")&&!Q("TURN_ENABLE_TCP")&&!Q("TURN_ENABLE_UDP"))throw new Ce(X.UNEXPECTED_ERROR,"force TURN With No TURN Configuration");const i=function(l){return u8(l,!1)}(e),a=await this._p2pChannel.publishDataChannel([i]);if(a.length>0){if(typeof i._originDataChannelId!="number")throw k.error("[".concat(this._clientId,"] can not publish with mediaType datachannel, cannot get RTCDatachannel id")),new Ce(X.CREATE_DATACHANNEL_ERROR);try{await et.all(a.map(l=>this._uid&&this._gateway.publishDataChannel(this._uid,l,!0))),await i._waitTillOpen()}catch(l){if(l.code!==X.DISCONNECT_P2P)throw l}}return k.info("[".concat(this._clientId,"] Publish dataChannels success, id ").concat(i.id)),i}catch(i){throw k.error("[".concat(this._clientId,"] publish datachannels error"),i.toString()),i}finally{n()}}async unpublish(e){if(!this._joinInfo||this._uid===void 0)throw new Ce(X.INVALID_OPERATION,"Can't unpublish stream, haven't joined yet!");let n=[];if(e)if(Array.isArray(e))n=e;else{if(!(e instanceof Qf))return this._unpublishDataChannel([e]);n=[e]}else this.store.useP2P||await this._unpublishDataChannel(),n=this._p2pChannel.getAllTracks(!0);k.info("[".concat(this._clientId,"] Unpublish tracks, tracks ").concat(n.map(a=>"".concat(a.getTrackId()," "))," "));const i=await this._publishMutex.lock();try{if(this.store.useP2P){const a=await this._p2pChannel.unpublish(n);a&&await this._gateway.sendExtensionMessage(Hr.UNPUBLISH,{unpubMsg:a},!0)}else{const a=await this._p2pChannel.unpublish(n);a&&await this._gateway.unpublish(a,this._uid),k.info("[".concat(this._clientId,"] Unpublish success,tracks ").concat(n.map(l=>"".concat(l.getTrackId()))))}}catch(a){throw k.error("[".concat(this._clientId,"] unpublish error"),a.toString()),a}finally{i&&i()}}async _unpublishDataChannel(e){e!==void 0&&e.length!==0||(e=this._p2pChannel.getAllDataChannels()),k.info("[".concat(this._clientId,"] Unpublish datachannels, datachannels ").concat(e.map(i=>"".concat(i.id," "))," "));const n=await this._publishMutex.lock();try{const i=await this._p2pChannel.unpublishDataChannel(e);i&&await this._gateway.unpublishDataChannel(i),k.info("[".concat(this._clientId,"] Unpublish dataChannel success,dataChannel ").concat(e.map(a=>"".concat(a.id))))}catch(i){throw k.error("[".concat(this._clientId,"] unpublish dataChannel error"),i.toString()),i}finally{n&&n()}}async subscribe(e,n,i){if(!(e instanceof qu)){const a=this.remoteUsers.find(l=>l.uid===e);if(!a)throw new Ce(X.INVALID_REMOTE_USER,"user is not in the channel");e=a}return n==="datachannel"?this._subscribeDataChannel(e,i):this._subscribe(e,n)}async presubscribe(e,n){if(vi(n,"mediaType",["audio","video"]),this.store.useP2P)throw new Ce(X.INVALID_OPERATION,"can't presub at p2p mode");if(!this._joinInfo)throw new Ce(X.INVALID_OPERATION,"can't presub when not join");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new Ce(X.INVALID_OPERATION,"can't presub in ".concat(this.connectionState," state"));const i=n===it.AUDIO,a=n===it.VIDEO,l=await this._subscribeMutex.lock();try{const{ssrcId:u,ortc:h,rtxSsrcId:p,cname:m,uint_id:E}=await this._gateway.presubscribe(e,n,!0);if(u==null)throw new Ce(X.UNEXPECTED_RESPONSE,"no ssrc id");let S=this._users.find(w=>w.uid===e);S||(S=new qu(e,E||e),S._is_pre_created=!0,this._users.push(S)),m&&(S._cname=m),S._uintid||(S._uintid=E||e),i&&(S._audioSSRC=u,S._audio_pre_subscribed=!0,h&&(S._audioOrtc=h)),a&&(S._videoSSRC=u,S._video_pre_subscribed=!0,h&&(S._videoOrtc=h),p!=null&&(S._rtxSsrcId=p)),k.info("[".concat(this._clientId,"] presub succeed ssrc: ").concat(u)),await this._p2pChannel.subscribe(S,n,u,p,h);const R=i?S._audioTrack:S._videoTrack;if(!R)throw new Ce(X.UNEXPECTED_ERROR,"can not find remote track in user");return i&&(S._trust_audio_stream_added_state_=!0,S._audio_added_=!0),a&&(S._trust_video_stream_added_state_=!0,S._video_added_=!0),R}catch(u){throw k.error("[".concat(this._clientId,"] presub user ").concat(e," error"),u),u}finally{l()}}async _subscribeDataChannel(e,n){var i;if(Yn(n,"channelId",0,65535,!0),!this._joinInfo)throw new Ce(X.INVALID_OPERATION,"Can't subscribe datachannel, not joined");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new Ce(X.INVALID_OPERATION,"Can't subscribe datachannel in ".concat(this.connectionState," state"));if(!this._users.find(p=>p===e))throw k.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid,", this user is not in the channel")),new Ce(X.INVALID_REMOTE_USER,"user is not in the channel");if(!e.hasAudio&&!e.hasVideo&&e._dataChannels.length===0)throw k.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid,", user is not published")),new Ce(X.INVALID_REMOTE_USER,"user is not published");const l=(i=e._dataChannels)===null||i===void 0?void 0:i.find(p=>p.id===n);if(!l)throw k.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid," with mediaType datachannel, remote datachannel is not published")),new Ce(X.REMOTE_USER_IS_NOT_PUBLISHED);const u=await this._subscribeMutex.lock();k.info("[".concat(this._clientId,"] subscribe user ").concat(e.uid,", mediaType: datachannel"));try{const p=await this._p2pChannel.subscribeDataChannel(e,[l]);if(p&&Ge(p).call(p,l.id))try{var h;if(typeof l._originDataChannelId!="number")throw k.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid," with mediaType datachannel, cannot get RTCDatachannel")),new Ce(X.CREATE_DATACHANNEL_ERROR);const m={id:l.id,datachannelId:l._originDataChannelId,ordered:l.ordered,maxRetransmits:l.maxRetransmits,metadata:(h=l.metadata)!==null&&h!==void 0?h:""};await this._gateway.subscribeDataChannel(e.uid,m,!0),await l._waitTillOpen()}catch(m){if((m==null?void 0:m.code)!==X.WS_ABORT)throw await this._p2pChannel.unsubscribeDataChannel(e,[l]),m;await this._p2pChannel.unsubscribeDataChannel(e,[l]),this._p2pChannel.setPendingRemoteDataChannel(e,l.id)}return k.info("[".concat(this._clientId,"] subscribe success user ").concat(e.uid,", mediaType: datachannel")),l}finally{u()}}async _p2pSubscribe(e,n,i){if(vi(n,"mediaType",["audio","video"]),!this._joinInfo)throw new Ce(X.INVALID_OPERATION,"Can't subscribe stream, not joined");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new Ce(X.INVALID_OPERATION,"Can't subscribe stream in ".concat(this.connectionState," state"));if(!this._users.find(u=>u===e)){const u=new Ce(X.INVALID_REMOTE_USER,"user is not in the channel");throw k.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid,", this user is not in the channel")),u}if(!e.hasAudio&&!e.hasVideo){const u=new Ce(X.INVALID_REMOTE_USER,"user is not published");throw k.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid,", user is not published")),u}if(!i&&(n==="audio"&&!e.hasAudio||n==="video"&&!e.hasVideo)){const u=new Ce(X.REMOTE_USER_IS_NOT_PUBLISHED);throw k.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid," with mediaType ").concat(n,", remote track is not published")),u}const l=await this._subscribeMutex.lock();k.info("[".concat(this._clientId,"] subscribe user ").concat(e.uid,", mediaType: ").concat(n));try{if(await this._p2pChannel.hasRemoteMediaWithLock(e,n))await this._p2pChannel.unmuteRemote(e,n);else try{const h=n==="audio"?e._audioSSRC:e._videoSSRC,p=n==="audio"?e._audioMid:e._videoMid;this.store.subscribe(e.uid,n,Date.now()),this.store.useP2P&&await this._p2pChannel.subscribe(e,n,h,p)}catch(h){throw h}k.info("[".concat(this._clientId,"] subscribe success user ").concat(e.uid,", mediaType: ").concat(n)),this._defaultStreamFallbackType&&this.setStreamFallbackOption(e.uid,this._defaultStreamFallbackType).catch(h=>{k.warning("[".concat(this._clientId,"] auto set fallback failed"),h)});const u=n==="audio"?e._audioTrack:e._videoTrack;if(!u)throw new Ce(X.UNEXPECTED_ERROR,"can not find remote track in user object");return u}catch(u){throw k.error("[".concat(this._clientId,"] subscribe user ").concat(e.uid," error"),u),u}finally{l()}}async _subscribe(e,n,i){if(this.store.useP2P)return this._p2pSubscribe(e,n);if(vi(n,"mediaType",["audio","video"]),!this._joinInfo)throw new Ce(X.INVALID_OPERATION,"Can't subscribe stream, not joined");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new Ce(X.INVALID_OPERATION,"Can't subscribe stream in ".concat(this.connectionState," state"));if(!this._users.find(E=>E===e)){const E=new Ce(X.INVALID_REMOTE_USER,"user is not in the channel");throw k.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid,", this user is not in the channel")),E}if(!e.hasAudio&&!e.hasVideo){const E=new Ce(X.INVALID_REMOTE_USER,"user is not published");throw k.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid,", user is not published")),E}if(!(i||(n!=="audio"||e.hasAudio&&e._audioSSRC!==void 0)&&(n!=="video"||e.hasVideo&&e._videoSSRC!==void 0))){const E=new Ce(X.REMOTE_USER_IS_NOT_PUBLISHED);throw k.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid," with mediaType ").concat(n,", remote track is not published")),E}let l=n==="audio"?e._audioSSRC:e._videoSSRC,u=n==="audio"?e._audioOrtc:e._videoOrtc,h=n==="video"?e._rtxSsrcId:void 0,p={stream_type:n==="audio"?it.AUDIO:it.VIDEO,ssrcId:l};n==="video"&&this.store.firstVideoFrameDecoded(e.uid,{subscribeStart:Date.now()});const m=await this._subscribeMutex.lock();k.info("[".concat(this._clientId,"] subscribe user ").concat(e.uid,", mediaType: ").concat(n));try{if(await this._p2pChannel.hasRemoteMediaWithLock(e,n))await this._p2pChannel.unmuteRemote(e,n);else try{const S=n==="audio"?e._audioSSRC:e._videoSSRC;S!==void 0&&S!==l&&(l=S,u=n==="audio"?e._audioOrtc:e._videoOrtc,h=n==="video"?e._rtxSsrcId:void 0,p={stream_type:n==="audio"?it.AUDIO:it.VIDEO,ssrcId:l}),Zi.markSubscribeStart(this.store.clientId,l),this.store.subscribe(e.uid,n,Date.now()),await this._p2pChannel.subscribe(e,n,l,h,u);try{this._p2pChannel.isPreSubScribe(l)||await this._gateway.subscribe(e.uid,p,!0)}catch(R){if((R==null?void 0:R.code)!==X.WS_ABORT)throw await this._p2pChannel.unsubscribe(e,n),R;await this._p2pChannel.unsubscribe(e,n,!0),this._p2pChannel.setPendingRemoteMedia(e,n)}this.store.subscribe(e.uid,n,void 0,Date.now()),this._p2pChannel.reportSubscribeEvent(!0,null,e,n)}catch(S){throw this._p2pChannel.reportSubscribeEvent(!1,S==null?void 0:S.code,e,n),S}k.info("[".concat(this._clientId,"] subscribe success user ").concat(e.uid,", mediaType: ").concat(n)),this._defaultStreamFallbackType&&this.setStreamFallbackOption(e.uid,this._defaultStreamFallbackType).catch(S=>{k.warning("[".concat(this._clientId,"] auto set fallback failed"),S)});const E=n==="audio"?e._audioTrack:e._videoTrack;if(!E)throw new Ce(X.UNEXPECTED_ERROR,"can not find remote track in user object");return n==="video"&&(this.store.firstVideoFrameDecoded(e.uid,{subscribeEnd:Date.now()}),this._p2pChannel.reportVideoFirstFrameRender(e)),E}catch(E){throw k.error("[".concat(this._clientId,"] subscribe user ").concat(e.uid," error"),E),E}finally{m()}}async massSubscribe(e){if(Kl(e,"subscribeList"),!this._joinInfo)throw new Ce(X.INVALID_OPERATION,"Can't subscribe stream, not joined");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new Ce(X.INVALID_OPERATION,"Can't subscribe stream in ".concat(this.connectionState," state"));const n=Date.now(),i=new Map,a=await this._subscribeMutex.lock();k.info("[".concat(this._clientId,"]start massSubscribe user ").concat(e.map(p=>{let{user:m,mediaType:E}=p;return"user: ".concat(m==null?void 0:m.uid,", mediaType: ").concat(E)}).join("; ")));const l=(e=[...e]).map(p=>{let{user:m,mediaType:E}=p;return{user:m,mediaType:E}}),u=await this._p2pChannel.globalLock();try{var h;for(let m=e.length-1;m>=0;m--){const E=e[m],{user:S,mediaType:R}=E;if(vi(R,"mediaType",["audio","video"]),!S){const B=new Ce(X.INVALID_PARAMS,"user property does not exist in subscribeList item");throw k.error("[".concat(this._clientId,"] user property does not exist in subscribeList item")),B}if(!this._users.find(B=>B===S)){const B=new Ce(X.INVALID_REMOTE_USER,"user is not in the channel");k.error("[".concat(this._clientId,"] can not massSubscribe ").concat(S.uid,", this user is not in the channel")),l[m].error=B,e.splice(m,1);continue}if(R==="audio"&&(!S.hasAudio||S._audioSSRC===void 0)||R==="video"&&(!S.hasVideo||S._videoSSRC===void 0)){const B=new Ce(X.REMOTE_USER_IS_NOT_PUBLISHED);k.error("[".concat(this._clientId,"] can not subscribe ").concat(S.uid," with mediaType ").concat(R,", remote user is not published")),l[m].error=B,e.splice(m,1);continue}const O=bi.Video|bi.LwoVideo,H=i.get(S);if(H){if(R==="video"?H&O:H&bi.Audio){e.splice(m,1),k.warning("[".concat(this._clientId,"] repeat massSubscribe user:").concat(S.uid,", mediaType:").concat(R," twice"));continue}i.set(S,H|(R==="video"?O:bi.Audio))}else i.set(S,R==="video"?O:bi.Audio)}for(let m=e.length-1;m>=0;m--){const E=e[m],{user:S,mediaType:R}=E,w=bi.Video|bi.LwoVideo;if(this._p2pChannel.hasRemoteMedia(S,R)){await this._p2pChannel.unmuteRemoteNoLock(S,R);const O=i.get(S);i.set(S,R==="video"?O^w:O^bi.Audio),e.splice(m,1)}}this.store.massSubscribe(e.map(m=>({userId:m.user.uid,type:m.mediaType})),n);let p=Ms(h=Array.from(i.entries())).call(h,(m,E)=>{let[S,R]=E;if(R===0)return m;const w={stream_id:S.uid,stream_type:R};return R&bi.Audio&&(w.audio_ssrc=S._audioSSRC),R&bi.Video&&(w.video_ssrc=S._videoSSRC),m.push(w),m},[]);try{e.length>0&&await this._p2pChannel.massSubscribeNoLock(e.map(E=>{let{user:S,mediaType:R}=E;return{user:S,mediaType:R,ssrcId:R===it.VIDEO?S._videoSSRC:S._audioSSRC,rtxSsrcId:R===it.VIDEO?S._rtxSsrcId:void 0}}));const m=new Map;if(p=p.filter(E=>E.video_ssrc&&!this._p2pChannel.isPreSubScribe(E.video_ssrc)||E.audio_ssrc&&!this._p2pChannel.isPreSubScribe(E.audio_ssrc)||!E.video_ssrc&&!E.audio_ssrc),p.length>0){const E=await this._gateway.subscribeAll(p,!0);((E==null?void 0:E.users)||[]).forEach(S=>{let{stream_id:R,video_error_code:w,audio_error_code:O,error_code:H}=S;(w||O||H)&&m.set(R,{video_error_code:w,audio_error_code:O,error_code:H})})}if(Array.from(m.entries()).length>0){const E=[];Array.from(m.entries()).forEach(S=>{let[R,w]=S;const O=this.remoteUsers.find(H=>H.uid===R);if(O){let H;w.error_code||w.video_error_code&&w.audio_error_code?H=void 0:w.video_error_code?H=it.VIDEO:w.audio_error_code&&(H=it.AUDIO),E.push({user:O,mediaType:H})}}),E.length>0&&await this._p2pChannel.massUnsubscribeNoLock(E)}for(const E of l){const S=m.get(E.user.uid);if(S){const R=S.error_code||E.mediaType==="audio"&&S.audio_error_code||E.mediaType==="video"&&S.video_error_code;if(R){const w=M0(R);k.error("user:".concat(E.user.uid," mediaType:").concat(E.mediaType," has massSubscribe error ").concat(w.desc)),E.error=new Ce(X.SUBSCRIBE_FAILED,"code ".concat(R,": ").concat(w.desc))}}E.error||(E.mediaType==="video"?E.track=E.user.videoTrack:E.track=E.user.audioTrack)}return this.store.massSubscribe(l.filter(E=>!E.error).map(E=>({userId:E.user.uid,type:E.mediaType})),void 0,Date.now()),l.forEach(E=>{var S;ct.subscribe(this.store.sessionId,{succ:!!E.error,ec:((S=E.error)===null||S===void 0?void 0:S.code)||null,video:E.mediaType===it.VIDEO,audio:E.mediaType===it.AUDIO,peerid:E.user.uid,subscribeRequestid:E.mediaType===it.VIDEO?E.user._videoSSRC:E.user._audioSSRC,p2pid:this.store.p2pId,eventElapse:Math.floor(performance.now()-n),preSsrc:this._p2pChannel.isPreSubScribe(E.user._videoSSRC)},!0)}),k.info("[".concat(this._clientId,"] massSubscribe success ").concat(e.map(E=>{let{user:S,mediaType:R}=E;return"user: ".concat(S==null?void 0:S.uid,", mediaType: ").concat(R)}).join("; "))),l}catch(m){throw await this._p2pChannel.massUnsubscribeNoLock(e),m}}finally{u(),a()}}async unsubscribe(e,n,i){if(!(e instanceof qu)){const u=this.remoteUsers.find(h=>h.uid===e);if(!u)throw new Ce(X.INVALID_REMOTE_USER,"user is not in the channel");e=u}if(n||this.store.useP2P){if(n==="datachannel")return this._unsubscribeDataChannel(e,i)}else await this._unsubscribeDataChannel(e,i);if(n&&vi(n,"mediaType",["audio","video"]),!this._joinInfo)throw new Ce(X.INVALID_OPERATION,"Can't unsubscribe stream, haven't joined yet!");if(!this._users.find(u=>u===e)){const u=new Ce(X.INVALID_REMOTE_USER,"user is not in the channel");throw k.error("[".concat(this._clientId,"] can not unsubscribe ").concat(e.uid,", user is not in the channel")),u}k.info("[".concat(this._clientId,"] unsubscribe uid: ").concat(e.uid,", mediaType: ").concat(n));const l=await this._subscribeMutex.lock();try{if(this.store.useP2P)await this._p2pChannel.unsubscribe(e,n);else{const u=await this._p2pChannel.unsubscribe(e,n);u&&await this._gateway.unsubscribe(u,e.uid),n&&n!=="audio"||(e._audio_pre_subscribed=!1),n&&n!=="video"||(e._video_pre_subscribed=!1),e._is_pre_created&&z_(this._users,e),k.info("[".concat(this._clientId,"] unsubscribe success uid: ").concat(e.uid,", mediaType: ").concat(n))}}catch(u){if(u.code===X.DISCONNECT_P2P)return void k.warning("disconnecting p2p, abort unsubscribe request.");throw k.error("[".concat(this._clientId,"] unsubscribe user ").concat(e.uid," error"),u.toString()),u}finally{l()}}async _unsubscribeDataChannel(e,n){if(n&&Yn(n,"id",0,65535,!0),!this._joinInfo)throw new Ce(X.INVALID_OPERATION,"Can't unsubscribe datachannel, haven't joined yet!");if(!this._users.find(l=>l===e)){const l=new Ce(X.INVALID_REMOTE_USER,"user is not in the channel");throw k.error("[".concat(this._clientId,"] can not unsubscribe ").concat(e.uid,", user is not in the channel")),l}let a;if(typeof n=="number"){const l=e._dataChannels.find(u=>u.id===n);l&&(a=[l])}else a=e._dataChannels;if(a===void 0){const l=new Ce(X.REMOTE_USER_IS_NOT_PUBLISHED);throw k.error("[".concat(this._clientId,"] can not unsubscribe ").concat(e.uid," with channelId ").concat(n,", remote datachannel is not published")),l}k.info("[".concat(this._clientId,"] unsubscribe uid: ").concat(e.uid,", mediaType: datachannel, ids: ").concat(a.map(l=>l.id)));try{const l=await this._p2pChannel.unsubscribeDataChannel(e,a);l&&await this._gateway.unsubscribeDataChannel(l,e.uid),k.info("[".concat(this._clientId,"] unsubscribe datachannel success uid: ").concat(e.uid,", mediaType: datachannel, ids: ").concat(l))}catch(l){if(l.code===X.DISCONNECT_P2P)return void k.warning("disconnecting p2p, abort unsubscribe request.");throw k.error("[".concat(this._clientId,"] unsubscribe user ").concat(e.uid," error"),l.toString()),l}}async massUnsubscribe(e){if(Kl(e,"unsubscribeList"),!this._joinInfo)throw new Ce(X.INVALID_OPERATION,"Can't unsubscribeAll stream, haven't joined yet!");k.info("[".concat(this._clientId,"] start massUnsubscribe ").concat(e.map(i=>{let{user:a,mediaType:l}=i;return"user: ".concat(a==null?void 0:a.uid,", mediaType: ").concat(l,";")}).join())),e=[...e];const n=new Map;for(let i=e.length-1;i>=0;i--){const{user:a,mediaType:l}=e[i];if(!a){const p=new Ce(X.INVALID_PARAMS,"user property does not exist in unsubscribeList item");throw k.error("[".concat(this._clientId,"] user property does not exist in unsubscribeList item")),p}if(vi(l,"mediaType",["video","audio",void 0]),!this._users.find(p=>p===a)){k.warning("[".concat(this._clientId,"] can not unsubscribe ").concat(a.uid,", user is not in the channel")),e.splice(i,1);continue}const h=bi.Video|bi.LwoVideo;if(n.has(a)){const p=n.get(a);let m;switch(l){case"video":m=p&h;break;case"audio":m=p&bi.Audio;break;default:m=p&(bi.Audio|h)}if(m){k.warning("[".concat(this._clientId,"] repeat massUnsubscribe user:").concat(a.uid,",mediaType:").concat(l," twice.")),e.splice(i,1);continue}l?l==="audio"?n.set(a,p|bi.Audio):l==="video"&&n.set(a,p|h):n.set(a,p|bi.Audio|h)}else l?l==="audio"?n.set(a,bi.Audio):l==="video"&&n.set(a,h):n.set(a,bi.Audio|h)}try{const i=await this._p2pChannel.massUnsubscribe(e);i&&await this._gateway.massUnsubscribe(i),k.info("[".concat(this._clientId,"] massUnsubscribe success ").concat(e.map(a=>{let{user:l,mediaType:u}=a;return"user: ".concat(l==null?void 0:l.uid,", mediaType: ").concat(u,";")}).join()))}catch(i){if(i.code===X.DISCONNECT_P2P)return void k.warning("[".concat(this._clientId,"] disconnecting p2p, abort unsubscribe request."));throw k.error("[".concat(this._clientId,"] massUnsubscribe error"),i.toString()),i}}async setLowStreamParameter(e){(function(i){if(!i)throw new Re(X.INVALID_PARAMS);xr(i.width)||Gw(i.width,"streamParameter.width"),xr(i.height)||Gw(i.height,"streamParameter.height"),xr(i.framerate)||Gw(i.framerate,"streamParameter.framerate"),xr(i.bitrate)||Yn(i.bitrate,"streamParameter.bitrate")})(e),(!e.width&&e.height||e.width&&!e.height)&&k.warning("[".concat(this._clientId,"] The width and height parameters take effect only when both are set")),k.info("[".concat(this._clientId,"] set low stream parameter to"),JSON.stringify(e));const n=this._configDistribute.getLowStreamConfigDistribute();if(n&&n.bitrate&&e.bitrate&&n.bitrate<e.bitrate&&(e.bitrate=n.bitrate),this._lowStreamParameter=e,this._isDualStreamEnabled)return this._p2pChannel.updateVideoStreamParameter(e,Fe.LocalVideoLowTrack)}async enableDualStream(){if(!Rn().supportDualStream)throw ct.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!1}),new Ce(X.NOT_SUPPORTED,"Your browser is not support dual stream");if(this._isDualStreamEnabled)throw new Ce(X.INVALID_OPERATION,"Dual stream is already enabled");if(this._p2pChannel.canPublishLowStream())try{await this._publishLowStream()}catch(e){throw ct.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!1}),e}this._isDualStreamEnabled=!0,ct.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!0}),k.info("[".concat(this._clientId,"] enable dual stream"))}async disableDualStream(){if(this._isDualStreamEnabled){if(!this._joinInfo)throw new Ce(X.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if(this._p2pChannel.getLocalMedia(Fe.LocalVideoLowTrack))try{const e=await this._p2pChannel.unpublishLowStream();e&&await this._gateway.unpublish(e,this._joinInfo.stringUid||this._joinInfo.uid)}catch(e){throw ct.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!1,succ:!1}),e}this._isDualStreamEnabled=!1,ct.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!1,succ:!0}),k.info("[".concat(this._clientId,"] disable dual stream"))}}async setClientRole(e,n){if(function(a){vi(a,"role",["audience","host"])}(e),n&&Xw(n),this.mode==="rtc"||this.mode==="p2p")throw k.warning("[".concat(this._clientId,"]").concat(this.mode," mode can not use setClientRole")),new Ce(X.INVALID_OPERATION,"".concat(this.mode," mode can not use setClientRole"));if(n&&n.level&&e==="host")throw new Ce(X.INVALID_OPERATION,"host mode can not set audience latency level");if(e==="audience"&&this._p2pChannel.hasLocalMedia())throw new Ce(X.INVALID_OPERATION,"can not set client role to audience when publishing stream");const i=this._config.role;this._joinInfo&&(this._joinInfo.role=e),e!==i&&Q("ENABLE_ROLE_SELECT_EDGE")?(this._gateway.updateClientRole(e,n),this._config.role=e,this._gateway.reconnect("recover",Hi.REGIONAL_DISTRIBUTION)):(await this._gateway.setClientRole(e,n),this._config.role=e),k.info("[".concat(this._clientId,"] set client role to ").concat(e,", level: ").concat(n&&n.level))}async _setClientRoleOptions(e){if(this.mode==="rtc"||this.mode==="p2p"||this._config.role!=="audience"||this._p2pChannel.hasLocalMedia())return;let n=!1;try{e&&Xw(e),await this._gateway.setClientRole(this._config.role,e),n=!0}catch{}finally{k.info("[".concat(this._clientId,"] set client role options ").concat(n?"succeed":"failed",", options is ").concat(e))}}getRemoteInboundOffset(){var e;const n=(e=this._p2pChannel.getStats())===null||e===void 0?void 0:e.audioSend[0];if(!n||!n.timestamp)return 0;const i=n.timestamp-Date.now();return Math.abs(i)>1e3+n.rttMs+100?this.ntpAlignErrorCount+=1:this.ntpAlignErrorCount=0,this.ntpAlignErrorCount>=3?i:0}getNtpWallTimeInMs(){return document.visibilityState==="visible"&&(this.remoteInboundOffset=this.getRemoteInboundOffset()),this.remoteInboundOffset+Date.now()+this._gateway.ntpOffset}setProxyServer(e,n){if(Ni(e,"proxyServer"),!n){if(this.connectionState!=="DISCONNECTED")throw new Ce(X.INVALID_OPERATION,"Set proxy server before join channel");if(this._cloudProxyServerMode!=="disabled"||this._useLocalAccessPoint)throw new Ce(X.INVALID_OPERATION,"You have already set the proxy")}this._proxyServer=e,ct.setProxyServer(this._proxyServer),k.setProxyServer(this._proxyServer),k.info("[".concat(this._clientId,"] Set proxy server ").concat(n?"by initialize call":""," success."))}setTurnServer(e,n){if(Array.isArray(e)||(e=[e]),!n){if(this.connectionState!=="DISCONNECTED")throw new Ce(X.INVALID_OPERATION,"Set turn server before join channel");if(this._cloudProxyServerMode!=="disabled"||this._useLocalAccessPoint)throw new Ce(X.INVALID_OPERATION,"You have already set the proxy")}if(T0(e))return this._turnServer={servers:e,mode:"original-manual"},void k.info("[".concat(this._clientId,"] Set original turnserver ").concat(n?"by initialize call":""," success: ").concat(e.map(i=>i.urls).join(","),"."));e.forEach(i=>B3(i)),this._turnServer={servers:e,mode:"manual"},k.info("[".concat(this._clientId,"] Set turnserver ").concat(n?"by initialize call":""," success."))}setLicense(e){if(this.connectionState!=="DISCONNECTED")throw new Ce(X.INVALID_OPERATION,"you should set license before join channel");if(Ni(e,"license",32,32),!/^[A-Za-z\d]+$/.test(e))throw new Ce(X.INVALID_PARAMS,"license should only contains characters from A-Z a-z 0-9");this._license=e,k.info("[".concat(this._clientId,"] set license success"),e)}startProxyServer(e){if(this.connectionState!=="DISCONNECTED")throw new Ce(X.INVALID_OPERATION,"Start proxy server before join channel");if(this._proxyServer||this._turnServer.mode==="manual"||this._useLocalAccessPoint)throw new Ce(X.INVALID_OPERATION,"You have already set the proxy");const n=[3,4,5];let i;switch(e===void 0&&(e=3),e){case 1:case 2:throw new Ce(X.NOT_SUPPORTED,"proxy mode 1/2 has been deprecated and not supported.");case 3:i="proxy3";break;case 4:i="proxy4";break;case 5:i="proxy5";break;default:throw new Ce(X.INVALID_PARAMS,"proxy server mode must be ".concat(n.join("|")))}this._cloudProxyServerMode=i,this.store.cloudProxyServerMode=i,k.info("[".concat(this._clientId,"] set cloud proxy server mode to"),this._cloudProxyServerMode)}stopProxyServer(){if(this.connectionState!=="DISCONNECTED")throw new Ce(X.INVALID_OPERATION,"Stop proxy server after leave channel");ct.setProxyServer(),k.setProxyServer(),this._cloudProxyServerMode="disabled",this.store.cloudProxyServerMode="disabled",k.info("[".concat(this._clientId,"] set cloud proxy server mode to"),this._cloudProxyServerMode),this._proxyServer=void 0,this._turnServer={mode:"auto",servers:[]}}setLocalAccessPointsV2(e){if(!e.accessPoints)throw new Ce(X.INVALID_PARAMS,"accessPoints is required.");Kl(e.accessPoints.serverList,"accessPoints.serverList"),Ni(e.accessPoints.domain,"accessPoints.domain");const n=(w,O)=>{Yn(w,O,0,65535,!0)};let i=443;if(e.accessPoints.port&&(n(e.accessPoints.port,"accessPoints.port"),i=e.accessPoints.port),this._proxyServer||this._cloudProxyServerMode!=="disabled")throw new Ce(X.INVALID_OPERATION,"set local access point failed, You have already set the cloud proxy");Q("CLOSE_AFB_FOR_LOCAL_AP")&&(zn("JOIN_WITH_FALLBACK_SIGNAL_PROXY",!1),zn("JOIN_WITH_FALLBACK_MEDIA_PROXY",!1));const a=/^((\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.){3}(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/,l=e.accessPoints.domain,u=e.accessPoints.serverList.map(w=>a.test(w)?"".concat(w.replace(/\./g,"-"),".").concat(l):w),h=u.map(w=>"".concat(w,":").concat(i));this._useLocalAccessPoint=!0,this._setLocalAPVersion=2,zn("WEBCS_DOMAIN",h),zn("WEBCS_DOMAIN_BACKUP_LIST",h),zn("GATEWAY_DOMAINS",[l]),e.report&&e.report.hostname&&Array.isArray(e.report.hostname)&&e.report.hostname.length?(Kl(e.report.hostname,"report.hostname"),zn("EVENT_REPORT_DOMAIN",e.report.hostname[0]),zn("EVENT_REPORT_BACKUP_DOMAIN",e.report.hostname[1]||e.report.hostname[0])):(zn("EVENT_REPORT_DOMAIN",u[0]),zn("EVENT_REPORT_BACKUP_DOMAIN",u[1]||u[0]));let p=6443;e.report&&e.report.port&&(n(e.report.port,"report.port"),p=e.report.port),zn("STATS_COLLECTOR_PORT",p),e.report?zn("ENABLE_EVENT_REPORT",!0):zn("ENABLE_EVENT_REPORT",!1);let m="";e.log&&e.log.hostname&&Array.isArray(e.log.hostname)&&e.log.hostname.length?(Kl(e.log.hostname,"log.hostname"),m=e.log.hostname[0]):m=u[0];let E=6444;e.log&&e.log.port&&(n(e.log.port,"log.port"),E=e.log.port),zn("LOG_UPLOAD_SERVER","".concat(m,":").concat(E));let S=[];e.cds&&e.cds.hostname&&Array.isArray(e.cds.hostname)&&e.cds.hostname.length?(Kl(e.cds.hostname,"cds.hostname"),S=e.cds.hostname):S=u;let R=443;e.cds&&e.cds.port&&(n(e.cds.port,"cds.port"),R=e.cds.port),zn("CDS_AP",S.map(w=>"".concat(w,":").concat(R))),e.cds?zn("ENABLE_CONFIG_DISTRIBUTE",!0):zn("ENABLE_CONFIG_DISTRIBUTE",!1),k.info("set local access point v2 success")}setLocalAccessPoints(e,n){if(Kl(e,"serverList"),Ni(n,"domain"),this._proxyServer||this._cloudProxyServerMode!=="disabled")throw new Ce(X.INVALID_OPERATION,"set local access point failed, You have already set the cloud proxy");const i=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/;e=e.map(a=>i.test(a)?"".concat(a.replace(/\./g,"-"),".").concat(n):a),this._useLocalAccessPoint=!0,this._setLocalAPVersion=1,zn("WEBCS_DOMAIN",e),zn("WEBCS_DOMAIN_BACKUP_LIST",e),zn("GATEWAY_DOMAINS",[n]),zn("EVENT_REPORT_DOMAIN",e[0]),zn("EVENT_REPORT_BACKUP_DOMAIN",e[1]||e[0]),zn("LOG_UPLOAD_SERVER","".concat(e[0],":6444")),k.info("[".concat(this._clientId,"] set local access point success"))}async setRemoteDefaultVideoStreamType(e){if(vi(e,"streamType",[0,1,4,5,6,7,8,9]),this._remoteDefaultVideoStreamType=e,this._joinInfo)try{await this._gateway.setDefaultRemoteVideoStreamType(e),this._joinInfo.defaultVideoStream=this._remoteDefaultVideoStreamType}catch(n){throw k.error("[".concat(this._clientId,"] set default remote video stream type error"),n.toString()),n}else k.debug("[".concat(this._clientId,"] haven't joined yet, cache remoteDefaultVideoStreamType ").concat(e))}async setRemoteVideoStreamType(e,n){vi(n,"streamType",[0,1,4,5,6,7,8,9]);try{await this._gateway.setRemoteVideoStreamType(e,n),setTimeout(()=>{const i=this._users.find(a=>a.uid===e);i&&i.videoTrack&&i.videoTrack.updateMediaStreamTrackResolution()},2e3)}catch(i){throw k.error("[".concat(this._clientId,"] set remote video stream type error"),i.toString()),i}k.info("[".concat(this._clientId,"] set remote ").concat(e," video stream type to ").concat(n)),this._remoteStreamTypeCacheMap.set(e,n)}async setStreamFallbackOption(e,n){vi(n,"fallbackType",[0,1,2,3,4,5,6,7,8]);try{await this._gateway.setStreamFallbackOption(e,n)}catch(i){throw k.error("[".concat(this._clientId,"] set stream fallback option"),i.toString()),i}k.info("[".concat(this._clientId,"] set remote ").concat(e," stream fallback type to ").concat(n)),this._streamFallbackTypeCacheMap.set(e,n)}setEncryptionConfig(e,n,i,a){(function(u){vi(u,"encryptionMode",["aes-128-xts","aes-256-xts","aes-128-ecb","sm4-128-ecb","aes-128-gcm","aes-256-gcm","aes-128-gcm2","aes-256-gcm2","none"])})(e),Ni(n,"secret");const l=["aes-128-gcm2","aes-256-gcm2"];if(Ge(l).call(l,e)){if(!i||!(i instanceof Uint8Array&&i.length===32))throw new Ce(X.INVALID_PARAMS,"salt must be an Uint8Array and exactly equal to 32 bytes")}else if(i)throw new Ce(X.INVALID_PARAMS,"current encrypt mode does not need salt");if(a){if(wc(a,"encryptDataStream"),!Ge(l).call(l,e))throw new Ce(X.INVALID_PARAMS,"current encrypt mode does not support data stream");this._encryptDataStream=!0}new RegExp(`^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*,.<>?/:;'"|{}\\[\\]])(?=.{8,})`).test(n)||k.warning(`The secret is not strong:
      The secret must contain at least 1 lowercase alphabetical character,
      The secret must contain at least 1 uppercase alphabetical character,
      The secret must contain at least 1 numeric character,
      The secret must contain at least one special character,
      The secret must be eight characters or longer.
      `),this._encryptionMode=e,this._encryptionSecret=n,i&&(this._encryptionSalt=Uu(i))}async renewToken(e){if(Ni(e,"token",1,2047),!this._key||!this._joinInfo)throw new Ce(X.INVALID_OPERATION,"renewToken should not be called before user join");const n=this._key;this._key=e,this._joinInfo&&(this._joinInfo.token=e);const i=await this._renewTokenMutex.lock();try{if(Q("USE_NEW_TOKEN")){k.debug("[".concat(this._clientId,"] start renew token with ticket from unilbs"));const a=await wpe(this._joinInfo,this._axiosCancelSource.token,this._config.httpRetryConfig||ei);k.debug("[".concat(this._clientId,"] get ticket from unilbs success")),await this._gateway.renewToken({token:e,ticket:a})}else k.debug("[".concat(this._clientId,"] start renew token without ticket")),await this._gateway.renewToken({token:e});k.debug("[".concat(this._clientId,"] renewToken success"))}catch(a){throw this._key=n,this._joinInfo.token=n,k.error("[".concat(this._clientId,"] renewToken failed"),a.toString()),a}finally{i()}}enableAudioVolumeIndicator(){this._audioVolumeIndicationInterval?k.warning("you have already enabled audio volume indicator!"):this._audioVolumeIndicationInterval=window.setInterval(()=>{const e=this._p2pChannel.getAudioLevels();this.safeEmit(pn.VOLUME_INDICATOR,e)},Q("AUDIO_VOLUME_INDICATION_INTERVAL")||2e3)}getRTCStats(){const e=this._statsCollector.getRTCStats(),n=this._gateway.getInChannelInfo();return e.Duration=Math.round(n.duration/1e3),e}async startLiveStreaming(e,n){if(!n){if(this.codec!=="h264")throw new Ce(X.LIVE_STREAMING_INVALID_RAW_STREAM,"raw streaming is only support h264");if(!this._p2pChannel.hasLocalMedia())throw new Ce(X.LIVE_STREAMING_INVALID_RAW_STREAM,"can not find stream to raw streaming")}if(this._liveRawStreamingClient&&this._liveRawStreamingClient.hasUrl(e)||this._liveTranscodeStreamingClient&&this._liveTranscodeStreamingClient.hasUrl(e))throw new Ce(X.LIVE_STREAMING_TASK_CONFLICT);const i=n?ml.TRANSCODE:ml.RAW;return this._createLiveStreamingClient(i).startLiveStreamingTask(e,i)}setLiveTranscoding(e){return this._createLiveStreamingClient(ml.TRANSCODE).setTranscodingConfig(e)}async stopLiveStreaming(e){const n=[this._liveRawStreamingClient,this._liveTranscodeStreamingClient].filter(i=>i&&i.hasUrl(e));if(!n.length)throw new Ce(X.INVALID_PARAMS,"can not find live streaming url to stop");await et.all(n.map(i=>i&&i.stopLiveStreamingTask(e)))}async startChannelMediaRelay(e){w8(e),await this._createChannelMediaRelayClient().startChannelMediaRelay(e)}async updateChannelMediaRelay(e){w8(e),await this._createChannelMediaRelayClient().updateChannelMediaRelay(e)}async stopChannelMediaRelay(){await this._createChannelMediaRelayClient().stopChannelMediaRelay(),this._statsCollector.onStatsChanged&&(this._statsCollector.onStatsChanged=void 0)}sendAudioMetadata(e){this._p2pChannel instanceof G0&&this._p2pChannel.addAudioMetadata(e)}async sendStreamMessage(e){var n;let i=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(!this._joinInfo)throw new Ce(X.INVALID_OPERATION,"can not send data stream, not joined");if((typeof e=="string"||e instanceof Uint8Array)&&(e={payload:e}),typeof e.payload=="string"){const l=new TextEncoder;e.payload=l.encode(e.payload)}let a=!1;if(this._encryptDataStream&&this._encryptDataStreamIv&&this._encryptDataStreamKey&&window.crypto.subtle&&Ge(n=["aes-128-gcm2","aes-256-gcm2"]).call(n,this._encryptionMode)&&(a=!0,e.payload=await async function(l,u,h){var p;const m=Ms(p=Array.from(h)).call(p,(B,j)=>B+j,0),E={serverTs:0,seq:Khe++,length:h.length,checkSum:m},S=new Uint8Array(K3(m,2)),R=new ArrayBuffer(Gf),w=new DataView(R);w.setUint32(0,E.serverTs),w.setUint16(4,E.seq),w.setUint16(6,E.length),w.setUint16(8,E.checkSum);const O=16-h.length%16;h=$3(h,new Uint8Array(O));const H=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:l,tagLength:aV,additionalData:S},u,h);return $3(new Uint8Array(R),new Uint8Array(H))}(this._encryptDataStreamIv,this._encryptDataStreamKey,e.payload)),new Blob([e.payload]).size>1024)throw new Ce(X.INVALID_PARAMS,a?"encrypted stream message out of range.":"stream message out of range.");return this._gateway.signal.request(xt.DATA_STREAM,{payload:Uu(e.payload),syncWithAudio:e.syncWithAudio,sendTs:Date.now()-Lpe},!i)}sendMetadata(e){if(!this._joinInfo)throw new Ce(X.INVALID_OPERATION,"can not send metadata, not joined");if(new Blob([e]).size>1024)throw new Ce(X.METADATA_OUT_OF_RANGE);return this._gateway.signal.request(xt.SEND_METADATA,{session_id:this._joinInfo.sid,metadata:Uu(e)})}async sendCustomReportMessage(e){if(Array.isArray(e)||(e=[e]),e.forEach(nfe),!this._joinInfo)throw new Ce(X.INVALID_OPERATION,"can not send custom report, not joined");await ct.sendCustomReportMessage(this._joinInfo.sid,e)}getLocalAudioStats(){return this._statsCollector.getLocalAudioTrackStats()}getRemoteAudioStats(){return this._statsCollector.getRemoteAudioTrackStats()}getLocalVideoStats(){return this._statsCollector.getLocalVideoTrackStats()}getRemoteVideoStats(){return this._statsCollector.getRemoteVideoTrackStats()}getRemoteNetworkQuality(){const e=this._statsCollector.getRemoteNetworkQualityStats();if(Q("DELETE_NEQ_AFTER_USER_LEAVE")){const n=this._users.map(i=>i.uid+"");Object.keys(e).forEach(i=>{Ge(n).call(n,i)||delete e[i]})}return e}async pickSVCLayer(e,n){vi(n.spatialLayer,"spatialLayer",[0,1,2,3]),vi(n.temporalLayer,"temporalLayer",[0,1,2,3]);try{await this._gateway.pickSVCLayer(e,n)}catch(i){throw k.error("[".concat(this._clientId,"] pick SVC layer failed"),i.toString()),i}}async setRTMConfig(e){const{apRTM:n=!1,rtmFlag:i}=e;if(wc(n,"apRTM"),Yn(i,"rtmFlag",0),this._rtmConfig.apRTM=n,this._rtmConfig.rtmFlag=i,k.debug("[".concat(this._clientId,"] setRTMconfig ").concat(JSON.stringify(e)," in ").concat(this.connectionState," state")),(this.connectionState==="CONNECTED"||this.connectionState==="RECONNECTING")&&this._joinInfo)return this._joinInfo.apRTM=n,this._joinInfo.rtmFlag=i,this._gateway.setRTM2Flag(i)}_reset(){if(k.debug("[".concat(this._clientId,"] reset client")),function(e){const n=ip.indexOf(e);n!==-1&&ip.splice(n,1)}(this._clientId),this.store.hasStartJoinChannel=!1,this.store.isABTestSuccess=!1,this.store.autoSubscribe=!1,this._axiosCancelSource.cancel(),this._axiosCancelSource=Yo.CancelToken.source(),this._streamFallbackTypeCacheMap=new Map,this._remoteStreamTypeCacheMap=new Map,this._configDistribute.stopGetConfigDistribute(),this._joinInfo&&Q8(this._joinInfo),this._joinInfo=void 0,this._proxyServer=void 0,this._defaultStreamFallbackType=void 0,this._sessionId&&ct.removeSid(this._sessionId),this._sessionId=null,this.store.sessionId=null,this.store.resetFirstVideoFrameDecoded(),this._statsCollector.reset(),this._key=void 0,this._appId=void 0,this._uid=void 0,this.store.uid=void 0,this._channelName=void 0,this._encryptionMode="none",this._encryptionSecret=null,this._encryptionSalt=null,this._encryptDataStreamKey=null,this._encryptDataStreamIv=null,this._pendingPublishedUsers=[],this._users.forEach(e=>{e._audioTrack&&e._audioTrack._destroy(),e._videoTrack&&e._videoTrack._destroy(),e._dataChannels&&(e._dataChannels.forEach(n=>n._close()),e._dataChannels.length=0)}),this._users=[],this._audioVolumeIndicationInterval&&(window.clearInterval(this._audioVolumeIndicationInterval),this._audioVolumeIndicationInterval=void 0),this._cloudProxyServerMode==="fallback"&&(this._cloudProxyServerMode="disabled",this.store.cloudProxyServerMode="disabled"),this._p2pChannel.reset(),this._publishMutex=new qi("client-publish",this._clientId),this._subscribeMutex=new qi("client-subscribe",this._clientId),this._networkQualityInterval&&(window.clearInterval(this._networkQualityInterval),this._networkQualityInterval=void 0),this._liveRawStreamingClient&&(this._liveRawStreamingClient.terminate(),this._liveRawStreamingClient.removeAllListeners(),this._liveRawStreamingClient=void 0),this._liveTranscodeStreamingClient&&(this._liveTranscodeStreamingClient.terminate(),this._liveTranscodeStreamingClient.removeAllListeners(),this._liveTranscodeStreamingClient=void 0),this._channelMediaRelayClient&&(this._channelMediaRelayClient.dispose(),this._channelMediaRelayClient=void 0),this._inspect)try{this._inspect.close(),this._inspect=void 0}catch{}if(this._moderation)try{this.setImageModeration(!1)}catch{}}_startSession(e,n){var i;const a=e||Zd();e?k.debug("[".concat(this._clientId,"] new Session ").concat(a)):k.debug("[".concat(this._clientId,"] renewSession ").concat(this._sessionId," => ").concat(a));const l=e?"":this._sessionId||"";this._sessionId=a,this.store.sessionId=a,ct.addSid(a);const u={lts:new Date().getTime(),mode:this.mode,buildFormat:1,stringUid:(n==null?void 0:n.stringUid)||((i=this._joinInfo)===null||i===void 0?void 0:i.stringUid),channelProfile:this.mode==="live"?1:0,channelMode:0,isABTestSuccess:Number(this._configDistribute.isSuccess),lsid:l,clientRole:this.role==="audience"?2:1};ct.sessionInit(this._sessionId,Qs({cname:n.channel,appid:n.appId},u)),this._joinInfo&&(this._joinInfo.sid=a),this._gateway.joinInfo&&(this._gateway.joinInfo.sid=a)}async _publishHighStream(e){if(!this._joinInfo||this._uid===void 0)throw new Ce(X.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new Ce(X.INVALID_OPERATION,"can not publish stream in ".concat(this.connectionState," state"));if(this._turnServer.mode==="auto"&&Q("FORCE_TURN")&&!Q("TURN_ENABLE_TCP")&&!Q("TURN_ENABLE_UDP"))throw new Ce(X.UNEXPECTED_ERROR,"force TURN With No TURN Configuration");k.debug("[".concat(this._clientId,"] publish high stream"));try{const i=await this._p2pChannel.publish(e,this._isDualStreamEnabled,this._lowStreamParameter);if(this.store.useP2P){const a=(await i.next()).value;if(a){try{await this._gateway.sendExtensionMessage(Hr.PUBLISH,a,!0)}catch(l){throw i.throw(l),l}await i.next()}this._p2pChannel.reportPublishEvent(!0,null)}else{const a=(await i.next()).value;if(a){var n;let l;try{l=await this._gateway.publish(this._uid,a,!0)}catch(u){if(u.code!==X.DISCONNECT_P2P)throw i.throw(u),u}await i.next(((n=l)===null||n===void 0?void 0:n.ortc)||[])}this._p2pChannel.reportPublishEvent(!0,null);for(const l of e)l instanceof sr&&l._encoderConfig&&this._gateway.setVideoProfile(l._encoderConfig).catch(u=>{k.debug("[".concat(this._clientId,"] stop setVideoProfile, because websocket is closed"))}),!l.muted&&l.enabled||await this._p2pChannel.muteLocalTrack(l)}}catch(i){if(this._p2pChannel.reportPublishEvent(!1,i==null?void 0:i.code,e),(i==null?void 0:i.code)===X.WS_ABORT)return;throw i}}async _publishLowStream(){if(!this._joinInfo||this._uid===void 0)throw new Ce(X.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new Ce(X.INVALID_OPERATION,"can not publish stream in ".concat(this.connectionState," state"));k.debug("[".concat(this._clientId,"] publish low stream"));const e=this._configDistribute.getLowStreamConfigDistribute();e&&e.bitrate&&(this._lowStreamParameter||(this._lowStreamParameter={width:160,height:120,framerate:15,bitrate:50}),this._lowStreamParameter&&this._lowStreamParameter.bitrate&&e.bitrate<this._lowStreamParameter.bitrate&&(this._lowStreamParameter.bitrate=e.bitrate));try{const i=await this._p2pChannel.publishLowStream(this._lowStreamParameter),a=(await i.next()).value;if(a){var n;let l;try{l=await this._gateway.publish(this._uid,a,!0)}catch(u){if(u.code!==X.DISCONNECT_P2P)throw i.throw(u),u}i.next(((n=l)===null||n===void 0?void 0:n.ortc)||[]),this._p2pChannel.reportPublishEvent(!0,null,void 0,!0)}}catch(i){if(this._p2pChannel.reportPublishEvent(!1,i==null?void 0:i.code,void 0,!0),(i==null?void 0:i.code)===X.WS_ABORT)return;throw i}}_createLiveStreamingClient(e){const n=()=>{if(!this._joinInfo||!this._appId)return new Ce(X.INVALID_OPERATION,"can not create live streaming client, please join channel first").throw();const i=(a={joinInfo:this._joinInfo,appId:this._appId,websocketRetryConfig:this._config.websocketRetryConfig,httpRetryConfig:this._config.httpRetryConfig},Xl("LiveStreaming").create(a));var a;return i.onLiveStreamError=(l,u)=>{ct.reportApiInvoke(this._sessionId,{name:Ur.ON_LIVE_STREAM_ERROR,options:[l,u],tag:gr.TRACER}).onSuccess(),this.safeEmit(pn.LIVE_STREAMING_ERROR,l,u)},i.onLiveStreamWarning=(l,u)=>{ct.reportApiInvoke(this._sessionId,{name:Ur.ON_LIVE_STREAM_WARNING,options:[l,u],tag:gr.TRACER}).onSuccess(),this.safeEmit(pn.LIVE_STREAMING_WARNING,l,u)},i.on(zI.REQUEST_WORKER_MANAGER_LIST,(l,u,h)=>{if(!this._joinInfo)return h(new Ce(X.INVALID_OPERATION,"can not find join info to get worker manager"));(async function(p,m,E,S){const R=Q("UAP_AP").slice(0,Q("AJAX_REQUEST_CONCURRENT")).map(w=>m.proxyServer?"https://".concat(m.proxyServer,"/ap/?url=").concat(w+"/api/v1?action=uap"):"https://".concat(w,"/api/v1?action=uap"));return await _pe(R,p,m,E,S)})(l,this._joinInfo,this._axiosCancelSource.token,ei).then(u).catch(h)}),i};return e===ml.RAW?(this._liveRawStreamingClient=this._liveRawStreamingClient||n(),this._liveRawStreamingClient):(this._liveTranscodeStreamingClient=this._liveTranscodeStreamingClient||n(),this._liveTranscodeStreamingClient)}_createChannelMediaRelayClient(){if(!this._joinInfo)return new Ce(X.INVALID_OPERATION,"can not create channel media relay client, please join channel first").throw();if(!this._channelMediaRelayClient){const{sendResolutionWidth:n,sendResolutionHeight:i}=this.getLocalVideoStats(),a=(e={joinInfo:this._joinInfo,clientId:this._clientId,websocketRetryConfig:this._config.websocketRetryConfig,httpRetryConfig:this._config.httpRetryConfig,resolution:{width:n,height:i}},Xl("ChannelMediaRelay").create(e));a.on("state",l=>{l===la.RELAY_STATE_FAILURE&&a&&a.dispose(),this.safeEmit(pn.CHANNEL_MEDIA_RELAY_STATE,l)}),a.on("event",l=>{this.safeEmit(pn.CHANNEL_MEDIA_RELAY_EVENT,l)}),this._channelMediaRelayClient=a,this._statsCollector.onStatsChanged=(l,u)=>{var h;l==="resolution"&&((h=this._channelMediaRelayClient)===null||h===void 0||h.setVideoProfile(u))}}var e;return this._channelMediaRelayClient}_handleUpdateDataChannel(e,n){const{added:i,deleted:a}=e,l=[];if(n){const u=[];this._users.forEach(h=>{h._dataChannels.forEach(p=>{i.every(m=>m.uid!==h._uintid||m.stream_id!==p.id)&&u.push({uid:h._uintid,stream_id:p.id,ordered:p.ordered,max_retrans_times:p.maxRetransmits,metadata:p.metadata})})}),u.length>0&&this._handleUpdateDataChannel({added:[],deleted:u})}Array.isArray(i)&&i.length>0&&i.forEach(u=>{const{uid:h,stream_id:p,ordered:m,max_retrans_times:E,metadata:S}=u,R=this._users.find(w=>w._uintid===h);if(!R)return void k.error("[".concat(this._clientId,"] can not find target user!(on_add_data_channel)"));if(k.debug("[".concat(this._clientId,"] data_channel added with uid ").concat(h)),Ge(l).call(l,R)||l.push(R),R._uintid||(R._uintid=h),R._dataChannels.findIndex(w=>w.id===u.stream_id)===-1){const w={id:p,ordered:!!m,maxRetransmits:E,metadata:S},O=function(H){return u8(H,!0)}(w);R._dataChannels.push(O),k.info("[".concat(this._clientId,"] remote user ").concat(R.uid," published datachannel")),n||this.safeEmit(pn.USER_PUBLISHED,R,"datachannel",w)}this._p2pChannel.hasPendingRemoteDataChannel(R,u.stream_id)&&(k.debug("[".concat(this._clientId,"] resubscribe datachannel for user ").concat(R.uid," after reconnect.")),this._subscribeDataChannel(R,u.stream_id).catch(w=>{k.error("[".concat(this._clientId,"] resubscribe datachannel error"),w.toString())}))}),n&&(this.safeEmit(pn.PUBLISHED_USER_LIST,this._pendingPublishedUsers),this._pendingPublishedUsers=[]),Array.isArray(a)&&a.length>0&&a.forEach(u=>{const{uid:h,stream_id:p}=u,m=this._users.find(S=>S._uintid===h);if(!m)return void k.error("[".concat(this._clientId,"] can not find target user!(on_delete_data_channel)"));const E=m._dataChannels.find(S=>S.id===u.stream_id);E&&(k.debug("[".concat(this._clientId,"] data_stream delete with uid ").concat(h)),this._p2pChannel.unsubscribeDataChannel(m,[E]).then(S=>{if(m._dataChannels=m._dataChannels.filter(R=>R!==E),S)return this._gateway.unsubscribeDataChannel(S,m.uid)}),k.info("[".concat(this._clientId,"] remote user ").concat(h," unpublished datachannel ,id:").concat(E.id)),this.safeEmit(pn.USER_UNPUBLISHED,m,"datachannel",E._config))})}_getEncodingName(e){var n;if(!this._joinResponse)return;const i=(n=this._joinResponse.ortc.rtpCapabilities.sendrecv)===null||n===void 0?void 0:n.videoCodecs;if(i)for(const l of i){var a;if(l.payloadType===e)return l==null||(a=l.rtpMap)===null||a===void 0?void 0:a.encodingName}}_handleRemoveDataChannels(e){const n=this._users.find(i=>i.uid===e.uid);if(n){if(n._dataChannels!==void 0&&n._dataChannels.length>0){k.debug("[".concat(this._clientId,"] datachannel removed with uid ").concat(e.uid));const i=()=>{k.info("[".concat(this._clientId,"] remote user ").concat(n.uid," unpublished datachannel")),n._dataChannels.forEach(a=>{this.safeEmit(pn.USER_UNPUBLISHED,n,"datachannel",a._config)})};this._p2pChannel.unsubscribeDataChannel(n,n._dataChannels).then(a=>{if(a)return this._gateway.unsubscribeDataChannel(a,n.uid)}),i()}}else k.warning("[".concat(this._clientId,"] can not find target user!(on_remove_datachannel)"))}_handleGatewayEvents(){this._gateway.on(wi.UPDATE_GATEWAY_CONFIG,()=>{(function(){let e;try{e=window.localStorage.getItem("websdk_ng_global_parameter")}catch(n){return void k.error("Error loading sdk config",n.message)}if(e)try{const n=JSON.parse(window.atob(e)),i=Date.now();Object.keys(n).forEach(a=>{const{value:l,type:u,expires:h}=n[a];h&&h<=i||u||FI()||!Object.prototype.hasOwnProperty.call(X_,a)||(Ac[a]=l,fr[a]=l,k.debug("Update gateway parameters from config distribute",a,l))})}catch(n){k.error("Error update config from local cache",n.message)}})()}),this._gateway.on(wi.DISCONNECT_P2P,async()=>{await this._p2pChannel.disconnectForReconnect()}),this._gateway.on(wi.CONNECTION_STATE_CHANGE,(e,n,i)=>{var a;if(i===Fn.FALLBACK)return;const l=()=>{this.safeEmit(pn.CONNECTION_STATE_CHANGE,e,n,i)};if(ct.reportApiInvoke(this._sessionId||((a=this._gateway.joinInfo)===null||a===void 0?void 0:a.sid)||null,{name:Ur.CONNECTION_STATE_CHANGE,options:[e,n,i],tag:gr.TRACER}).onSuccess(JSON.stringify({cur:e,prev:n,reason:i})),k.info("[".concat(this._clientId,"] signal connection state change: ").concat(n," -> ").concat(e)),e==="DISCONNECTED")return this._reset(),void l();if(e==="RECONNECTING")this._users.forEach(h=>{h._trust_in_room_=!1,h._trust_audio_enabled_state_=!1,h._trust_video_enabled_state_=!1,h._trust_audio_mute_state_=!1,h._trust_video_mute_state_=!1,h._trust_audio_stream_added_state_=!1,h._trust_video_stream_added_state_=!1,h._is_pre_created||(h._audio_pre_subscribed||(h._audioSSRC=void 0,h._audioOrtc=void 0),h._video_pre_subscribed||(h._videoSSRC=void 0,h._videoOrtc=void 0,h._rtxSsrcId=void 0),h._cname=void 0)}),this._userOfflineTimeout&&window.clearTimeout(this._userOfflineTimeout),this._streamRemovedTimeout&&window.clearTimeout(this._streamRemovedTimeout),this._userOfflineTimeout=void 0,this._streamRemovedTimeout=void 0;else if(e==="CONNECTED"){var u;this._streamFallbackTypeCacheMap.forEach((h,p)=>{this._gateway.setStreamFallbackOption(p,h).catch(m=>{k.warning("[".concat(this._clientId,"] auto set stream fallback option failed"),m)})}),this._remoteStreamTypeCacheMap.forEach((h,p)=>{this._gateway.setRemoteVideoStreamType(p,h).catch(m=>{k.warning("[".concat(this._clientId,"] auto set remote stream type failed"),m)})}),this._remoteDefaultVideoStreamType!==void 0&&((u=this._joinInfo)===null||u===void 0?void 0:u.defaultVideoStream)===void 0&&this.setRemoteDefaultVideoStreamType(this._remoteDefaultVideoStreamType).then(()=>{k.debug("[".concat(this._clientId,"] setRemoteDefaultVideoStreamType after gateway connected"))}).catch(h=>{k.error("[".concat(this._clientId,"] setRemoteDefaultVideoStreamType after gateway failed, ").concat(h))}),this.store.useP2P||(this._p2pChannel.republish(),this._userOfflineTimeout=window.setTimeout(()=>{this.connectionState==="CONNECTED"&&(this._userOfflineTimeout=void 0,this._users.filter(h=>!h._trust_in_room_).forEach(h=>{k.debug("[".concat(this._clientId,"] user offline timeout, emit user offline ").concat(h.uid)),this._handleUserOffline({uid:h.uid})}))},3e3),this._streamRemovedTimeout=window.setTimeout(()=>{this.connectionState==="CONNECTED"&&(this._streamRemovedTimeout=void 0,this._users.forEach(h=>{h._trust_audio_mute_state_||(k.debug("[".concat(this._clientId,"] auto dispatch audio unmute event ").concat(h.uid)),this._handleMuteStream(h.uid,it.AUDIO,!1)),h._trust_video_mute_state_||(k.debug("[".concat(this._clientId,"] auto dispatch video unmute event ").concat(h.uid)),this._handleMuteStream(h.uid,it.VIDEO,!1)),h._trust_audio_enabled_state_||(k.debug("[".concat(this._clientId,"] auto dispatch enable local audio ").concat(h.uid)),this._handleSetStreamLocalEnable("audio",h.uid,!0)),h._trust_video_enabled_state_||(k.debug("[".concat(this._clientId,"] auto dispatch enable local video ").concat(h.uid)),this._handleSetStreamLocalEnable("video",h.uid,!0)),h._trust_video_stream_added_state_||(k.debug("[".concat(this._clientId,"] auto dispatch reset video stream added ").concat(h.uid)),this._handleResetAddStream(h,"video")),h._trust_audio_stream_added_state_||(k.debug("[".concat(this._clientId,"] auto dispatch reset audio stream added ").concat(h.uid)),this._handleResetAddStream(h,"audio")),h._video_added_||h._audio_added_||(k.debug("[".concat(this._clientId,"] auto dispatch stream remove ").concat(h.uid)),this._handleRemoveStream({uid:h.uid,uint_id:h._uintid}))}))},1e3))}l()}),this._gateway.on(wi.REQUEST_NEW_GATEWAY_LIST,async(e,n)=>{if(!this._joinInfo)return n(new Ce(X.UNEXPECTED_ERROR,"can not recover, no join info"));try{let i;const a=await X8(Qs(Qs({},this._joinInfo),{},{uid:this._joinInfo.uid,stringUid:void 0}));a?(i=a.ap,Z8(a),this._joinInfo.preload=!0):(i=await aA(this._joinInfo,this._axiosCancelSource.token,this._config.httpRetryConfig||ei,this.store),this._joinInfo.preload=!1),this._joinInfo&&(this._joinInfo.apResponse=i.gatewayInfo.res,this._joinInfo.gatewayAddrs=i.gatewayInfo.gatewayAddrs,this._joinInfo.uni_lbs_ip=i.gatewayInfo.uni_lbs_ip);const l=[];i.gatewayInfo.gatewayAddrs.forEach(u=>{let{address:h}=u;const[p,m]=h.split(":");this._joinInfo&&this._joinInfo.proxyServer?l.push({proxy:this._joinInfo.proxyServer,host:p,port:m}):l.push({host:p,port:m})}),e(l)}catch(i){n(i)}}),this._gateway.on(wi.NETWORK_QUALITY,e=>{this._networkQualitySensitivity==="normal"&&this.safeEmit(pn.NETWORK_QUALITY,e)}),this._gateway.on(wi.STREAM_TYPE_CHANGE,(e,n)=>{this.safeEmit(pn.STREAM_TYPE_CHANGED,e,n),ct.reportApiInvoke(this._sessionId,{name:Ur.STREAM_TYPE_CHANGE,options:[e,n],tag:gr.TRACER}).onSuccess(JSON.stringify({uid:e,streamType:n}))}),this._gateway.isPreSub=()=>"isPreSub"in this._p2pChannel&&this._p2pChannel.isPreSub(),this._gateway.isPreallocation=()=>"isPreallocation"in this._p2pChannel&&this._p2pChannel.isPreallocation(),this._gateway.on(wi.IS_P2P_DISCONNECTED,e=>{this._p2pChannel.isP2PDisconnected()?e(!0):this._p2pChannel.hasLocalMedia()||this._p2pChannel.hasRemoteMedia()?e(!1):e(!0)}),this._gateway.on(wi.REQUEST_P2P_CONNECTION_PARAMS,async(e,n,i)=>{try{let a=await this._p2pChannel.getEstablishParams();a&&"isPreallocation"in this._p2pChannel&&this._p2pChannel.isPreallocation()||(a=await this._p2pChannel.startP2PConnection(e)),n(a)}catch(a){i(a)}}),this._gateway.on(wi.JOIN_RESPONSE,(e,n)=>{if(this.store.useP2P)return;let i;this._joinResponse=e,e.attributes?i=e.attributes.userAttributes.preSubSsrcs:k.debug("no attributes in joinResponse");const a=Q6(e.ortc,n,i);this._p2pChannel.connect(a)}),this._gateway.on(wi.PRE_CONNECT_PC,async e=>{const{candidates:n,fingerprint:i,turnServer:a}=e;if(this._joinInfo&&n.length>0&&!this._p2pChannel.isPlanB){const{cert:u,cid:h}=this._joinInfo.apResponse,p="".concat(h,"_").concat(u);if(p.length<4||p.length>256)return;await this._p2pChannel.startP2PConnection({turnServer:a,cloudProxyServer:this._joinInfo.cloudProxyServer,isPreallocation:!0});try{var l;await this._p2pChannel.connect({iceParameters:{iceUfrag:"".concat(h,"_").concat(u),icePwd:"".concat(h,"_").concat(u)},dtlsParameters:{fingerprints:[{hashFunction:"sha-256",fingerprint:(l=Q("FINGERPRINT"))!==null&&l!==void 0?l:i}]},candidates:n,rtpCapabilities:{send:{audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]},recv:{audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]}},setup:"active",cname:"o/i14u9pJrxRKAsu",preallocation:!0})}catch(m){m.code&&m.code===X.EXCHANGE_SDP_FAILED&&await this._p2pChannel.startP2PConnection({turnServer:a,cloudProxyServer:this._joinInfo.cloudProxyServer},!0)}}})}_handleGatewaySignalEvents(){this._gateway.signal.on(mn.ON_USER_ONLINE,this._handleUserOnline),this._gateway.signal.on(mn.ON_USER_OFFLINE,this._handleUserOffline),this._gateway.signal.on(mn.ON_ADD_AUDIO_STREAM,e=>this._handleAddAudioOrVideoStream("audio",e.uid,e.ssrcId,e.cname,e.pt,e.uint_id,e.ortc)),this._gateway.signal.on(mn.ON_ADD_VIDEO_STREAM,e=>this._handleAddAudioOrVideoStream("video",e.uid,e.ssrcId,e.cname,e.pt,e.uint_id,e.ortc,e.rtxSsrcId)),this._gateway.signal.on(mn.ON_REMOTE_DATASTREAM_UPDATE,e=>{this._handleUpdateDataChannel(e)}),this._gateway.signal.on(mn.ON_REMOTE_FULL_DATASTREAM_INFO,e=>{this._handleUpdateDataChannel({added:e.datastreams||[],deleted:[]},!0)}),this._gateway.signal.on(mn.ON_REMOVE_STREAM,this._handleRemoveStream),this._gateway.signal.on(mn.ON_P2P_LOST,this._handleP2PLost),this._gateway.signal.on(mn.MUTE_AUDIO,e=>this._handleMuteStream(e.uid,it.AUDIO,!0)),this._gateway.signal.on(mn.UNMUTE_AUDIO,e=>this._handleMuteStream(e.uid,it.AUDIO,!1)),this._gateway.signal.on(mn.MUTE_VIDEO,e=>this._handleMuteStream(e.uid,it.VIDEO,!0)),this._gateway.signal.on(mn.UNMUTE_VIDEO,e=>this._handleMuteStream(e.uid,it.VIDEO,!1)),this._gateway.signal.on(mn.RECEIVE_METADATA,e=>{const n=Qd(e.metadata);this.safeEmit(pn.RECEIVE_METADATA,e.uid,n)}),this._gateway.signal.on(mn.ON_DATA_STREAM,async e=>{var n;if(!e)return;let i=Qd(e.payload);if(this._encryptDataStream&&this._encryptDataStreamIv&&this._encryptDataStreamKey&&window.crypto.subtle&&Ge(n=["aes-128-gcm2","aes-256-gcm2"]).call(n,this._encryptionMode)){if(e.payload.length<Gf)throw new Ce(X.UNEXPECTED_RESPONSE,"payload length ".concat(e.payload.length," is less than header length ").concat(Gf));i=await async function(u,h,p){const m=p.subarray(0,Gf),E=m.slice(8,Gf),S=(E[0]<<8)+E[1],R=(m[6]<<8)+m[7],w=await window.crypto.subtle.decrypt({name:"AES-GCM",iv:u,tagLength:aV,additionalData:new Uint8Array(K3(S,2))},h,p.subarray(Gf));return new Uint8Array(w).subarray(0,R)}(this._encryptDataStreamIv,this._encryptDataStreamKey,i)}let a=0;if(e.ordered||e.syncWithAudio){const l=this._p2pChannel.getStats(),u=this.remoteUsers.find(p=>p.uid===e.uid),h=l==null?void 0:l.audioRecv.find(p=>p.ssrc===(u==null?void 0:u._audioSSRC));a=h==null?void 0:h.jitterBufferMs}(a==null||Number.isNaN(a))&&(a=0),Mpe(Qs(Qs({},e),{},{payload:i}),a,{id:this._clientId,onStreamMessage:typeof this.onStreamMessage=="function"?this.onStreamMessage.bind(this):void 0,safeEmit:this.safeEmit.bind(this)})}),this._gateway.signal.on(mn.ON_CRYPT_ERROR,()=>{Fu(()=>{k.warning("[".concat(this._clientId,"] on crypt error")),this.safeEmit(pn.CRYPT_ERROR)},this._sessionId)}),this._gateway.signal.on(mn.ON_TOKEN_PRIVILEGE_WILL_EXPIRE,this._handleTokenWillExpire),this._gateway.signal.on(mn.ON_TOKEN_PRIVILEGE_DID_EXPIRE,()=>{k.warning("[".concat(this._clientId,"] received message onTokenPrivilegeDidExpire, please get new token and join again")),this._gateway.leave(!0,Fn.TOKEN_EXPIRE),this.safeEmit(pn.ON_TOKEN_PRIVILEGE_DID_EXPIRE),this._reset()}),this._gateway.signal.on(mn.ON_STREAM_FALLBACK_UPDATE,e=>{k.debug("[".concat(this._clientId,"] stream fallback peerId: ").concat(e.stream_id,", attr: ").concat(e.stream_type)),this.safeEmit(pn.STREAM_FALLBACK,e.stream_id,e.stream_type===1?"fallback":"recover")}),this._gateway.signal.on(mn.ON_PUBLISH_STREAM,e=>{this.uid===this._uid&&(this._p2pChannel.reportPublishEvent(!0,null,void 0,!1,JSON.stringify({proxy:e.proxy})),k.info("[".concat(this._clientId,"] on publish stream, ").concat(JSON.stringify(e))))}),this._gateway.signal.on(mn.ENABLE_LOCAL_VIDEO,e=>{this._handleSetStreamLocalEnable("video",e.uid,!0)}),this._gateway.signal.on(mn.DISABLE_LOCAL_VIDEO,e=>{this._handleSetStreamLocalEnable("video",e.uid,!1)}),this._gateway.signal.on(Mt.REQUEST_TIMEOUT,(e,n)=>{if(this._joinInfo)switch(e){case xt.PUBLISH:{if(!n)return;const l=n.ortc;if(l){var i,a;const u=l.some(m=>{let{stream_type:E}=m;return E===Bn.Audio}),h=l.some(m=>{let{stream_type:E}=m;return E!==Bn.Audio}),p=l.some(m=>{let{stream_type:E}=m;return E===Bn.Screen||E===Bn.ScreenLow});n.state==="offer"&&ct.publish(this._joinInfo.sid,{eventElapse:Zi.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:!1,ec:X.TIMEOUT,audio:u,video:h,p2pid:n.p2p_id,publishRequestid:this.store.pubId,screenshare:p,audioName:u?(i=l.find(m=>{let{stream_type:E}=m;return E===Bn.Audio}))===null||i===void 0||(i=i.ssrcs[0])===null||i===void 0?void 0:i.ssrcId.toString():void 0,videoName:h?(a=l.find(m=>{let{stream_type:E}=m;return E!==Bn.Audio}))===null||a===void 0||(a=a.ssrcs[0])===null||a===void 0?void 0:a.ssrcId.toString():void 0})}break}case xt.SUBSCRIBE:n&&ct.subscribe(this._joinInfo.sid,{succ:!1,ec:X.TIMEOUT,audio:n.stream_type===it.AUDIO,video:n.stream_type===it.VIDEO,peerid:n.stream_id,subscribeRequestid:n.ssrcId,p2pid:this.store.p2pId,eventElapse:Zi.measureFromSubscribeStart(this.store.clientId,n.ssrcId),preSsrc:this._p2pChannel.isPreSubScribe(n.ssrcId)})}}),this._gateway.signal.on(mn.ON_P2P_OK,e=>{this.uid,this._uid}),this._gateway.signal.on(mn.ON_PUBLISHED_USER_LIST,e=>{if(e==null||!e.users)return;Q("BLOCK_LOCAL_CLIENT")&&(e.users=e.users.filter(a=>!sh(a.string_id||a.stream_id,this.channelName)));const n=[],i=[];for(const a of e.users){let l=this._users.find(S=>S._uintid===a.stream_id);l?l._trust_in_room_=!0:(l=new qu(a.string_id||a.stream_id,a.stream_id),this._users.push(l),this.store.firstVideoFrameDecoded(l.uid,{userJoinNotify:Date.now()}),this.getListeners(pn.PUBLISHED_USER_LIST).length===0&&(k.debug("[".concat(this._clientId,"] user online"),a.stream_id),this.safeEmit(pn.USER_JOINED,l)));const u=bi.Audio&a.stream_type,h=(bi.Video|bi.LwoVideo)&a.stream_type,p=(65280&a.stream_type)!=0,m=u&&l.hasAudio,E=h&&l.hasVideo;h&&(l._trust_video_stream_added_state_=!0,l._video_added_=!0,l._videoSSRC=a.video_ssrc,l._rtxSsrcId=a.video_rtx),u&&(l._trust_audio_stream_added_state_=!0,l._audio_added_=!0,l._audioSSRC=a.audio_ssrc),u&&!m&&this.getListeners(pn.PUBLISHED_USER_LIST).length===0&&(k.info("[".concat(this._clientId,"] remote user ").concat(l.uid," published audio")),this.safeEmit(pn.USER_PUBLISHED,l,"audio")),h&&!E&&this.getListeners(pn.PUBLISHED_USER_LIST).length===0&&(k.info("[".concat(this._clientId,"] remote user ").concat(l.uid," published video")),this.safeEmit(pn.USER_PUBLISHED,l,"video")),(u&&!m||h&&!E||p)&&n.push(l),h&&this._p2pChannel.hasPendingRemoteMedia(l,"video")&&i.push({user:l,mediaType:"video"}),u&&this._p2pChannel.hasPendingRemoteMedia(l,"audio")&&i.push({user:l,mediaType:"audio"})}i.length>0&&(k.debug("[".concat(this._clientId,"] RE massSubscribe after reconnect ").concat(i.map(a=>"user: ".concat(a.user.uid,", mediaType: ").concat(a.mediaType)).join("; ")," ")),this.massSubscribe(i).catch(a=>{k.error("[".concat(this._clientId,"] mass resubscribe error"),a.toString())})),this.getListeners(pn.PUBLISHED_USER_LIST).length>0?Q("ENABLE_DATASTREAM_2")?this._pendingPublishedUsers=n:(k.info("[".concat(this._clientId,"] client emit user-list event, users: ").concat(n.map(a=>a.uid).join(", "))),this.safeEmit(pn.PUBLISHED_USER_LIST,n)):k.info("[".concat(this._clientId,"] client not emit user-list event case there is no user-list listener, users: ").concat(n.map(a=>a.uid).join(", ")))}),this._gateway.signal.on(mn.ON_RTP_CAPABILITY_CHANGE,e=>{const{video_codec:n}=e;this._p2pChannel instanceof G0&&this._p2pChannel.updateRemoteRTPCapabilities(n.map(i=>i.toLowerCase()).filter(i=>{var a;return Ge(a=Object.keys(O0)).call(a,i)}))})}_handleP2PEvents(){this._gateway.signal.on(mn.ON_USER_OFFLINE,()=>{this._p2pChannel.disconnectForReconnect()}),this._gateway.signal.on(Hr.PUBLISH,(e,n,i)=>{const{uid:a}=e;e.forEach(l=>{const{kind:u,ssrcs:h,mid:p,isMuted:m}=l;this._handleP2PAddAudioOrVideoStream(u,a,h[0].ssrcId,p);const E=this._users.find(S=>S.uid===a);return E&&this.store.useP2P?this._p2pChannel.mockSubscribe(E,u,h[0].ssrcId,p).then(()=>{n()}).catch(i):n(),this._handleMuteStream(a,u,!!m)})}),this._gateway.signal.on(Hr.CALL,async(e,n,i)=>{if(this.store.useP2P)try{var a;n(await this._p2pChannel.startP2P({turnServer:(a=this._joinInfo)===null||a===void 0?void 0:a.turnServer},e))}catch(l){i(l)}}),this._gateway.signal.on(Mt.P2P_CONNECTION,async e=>{this.store.useP2P&&(await this._p2pChannel).p2pConnect(e)}),this._gateway.signal.on(Hr.UNPUBLISH,async(e,n,i)=>{if(this.store.useP2P){const{unpubMsg:a,uid:l}=e,u=this._users.find(h=>h.uid===l);if(!u)return k.warning("[".concat(this._clientId,"] can not find remote user, ignore mute event, uid: ").concat(l)),void n();try{a.forEach(async h=>{let{stream_type:p}=h;const m=p===Bn.Audio?it.AUDIO:it.VIDEO;await this._p2pChannel.unsubscribe(u,m),this._handleMuteStream(l,m,!0)}),n()}catch(h){i(h)}}}),this._gateway.signal.on(Hr.CONTROL,async(e,n)=>{const{action:i}=e;switch(i){case $u.MUTE_LOCAL_VIDEO:this._handleMuteStream(n,it.VIDEO,!0);break;case $u.MUTE_LOCAL_AUDIO:this._handleMuteStream(n,it.AUDIO,!0);break;case $u.UNMUTE_LOCAL_VIDEO:this._handleP2PAddAudioOrVideoStream("video",n),this._handleMuteStream(n,it.VIDEO,!1);break;case $u.UNMUTE_LOCAL_AUDIO:this._handleP2PAddAudioOrVideoStream("audio",n),this._handleMuteStream(n,it.AUDIO,!1)}}),this._gateway.signal.on(Hr.RESTART_ICE,async(e,n,i)=>{if(this.store.useP2P)try{const{direction:a,iceParameter:l}=e;a!==Lo.SEND_ONLY||l?n(await this._p2pChannel.restartICE(a,l)):(this._p2pChannel.handleDisconnect(a),n())}catch(a){i(a)}}),this._gateway.signal.on(Hr.CANDIDATE,e=>{if(this.store.useP2P){const{candidate:n,direction:i}=e;this._p2pChannel.addRemoteCandidate(n,i)}}),this._p2pChannel.on(vt.RequestP2PRestartICE,async(e,n,i)=>{try{const{direction:a}=e;n(await this._gateway.sendExtensionMessage(Hr.RESTART_ICE,e,a===Lo.SEND_ONLY))}catch(a){i(a)}}),this._p2pChannel.on(vt.LocalCandidate,e=>{this._gateway.sendExtensionMessage(Hr.CANDIDATE,JSON.stringify(e),!0)}),this._p2pChannel.on(vt.RequestP2PMuteLocal,async(e,n,i)=>{try{await this._gateway.sendExtensionMessage(Hr.CONTROL,e,!0),n()}catch(a){i(a)}}),this._p2pChannel.on(vt.RequestP2PUnmuteRemote,async(e,n,i)=>{if(this._joinInfo)try{await this._gateway.unmuteRemote(e,this._joinInfo.stringUid||this._joinInfo.uid),n()}catch(a){a.code===X.DISCONNECT_P2P?n():i(a)}else n()}),this._p2pChannel.on(vt.RequestP2PMuteRemote,async(e,n,i)=>{if(this._joinInfo)try{await this._gateway.muteRemote(e,this._joinInfo.stringUid||this._joinInfo.uid),n()}catch(a){a.code===X.DISCONNECT_P2P?n():i(a)}else n()}),this._p2pChannel.on(vt.StateChange,(e,n)=>{n===Un.Connected&&this._p2pChannel.republish()})}_handleP2PChannelEvents(){this._p2pChannel.on(vt.PeerConnectionStateChange,e=>{const n=this._peerConnectionState;e!==n&&(this.safeEmit(pn.PEERCONNECTION_STATE_CHANGE,e,n),this._peerConnectionState=e)}),this._p2pChannel.on(vt.RequestMuteLocal,async(e,n,i)=>{if(this._joinInfo)try{await this._gateway.muteLocal(e,this._joinInfo.stringUid||this._joinInfo.uid),n()}catch(a){a.code===X.DISCONNECT_P2P?n():i(a)}else n()}),this._p2pChannel.on(vt.RequestUnmuteLocal,async(e,n,i)=>{if(this._joinInfo)try{await this._gateway.unmuteLocal(e,this._joinInfo.stringUid||this._joinInfo.uid),n()}catch(a){a.code===X.DISCONNECT_P2P?n():i(a)}else n()}),this._p2pChannel.on(vt.RequestRePublish,(e,n,i)=>{this.publish(e,!1).then(n).catch(i)}),this._p2pChannel.on(vt.RequestRePublishDataChannel,(e,n,i)=>{et.all(e.map(async a=>{const l=await this._p2pChannel.publishDataChannel([a]);try{l.forEach(u=>{this._uid&&this._gateway.publishDataChannel(this._uid,u,!0)})}catch(u){if(u.code!==X.DISCONNECT_P2P)throw u}})).then(n).catch(i)}),this._p2pChannel.on(vt.RequestReSubscribe,async(e,n,i)=>{try{for(const{user:a,kind:l}of e)l===it.VIDEO?await this.subscribe(a,"video"):await this.subscribe(a,"audio");n()}catch(a){i(a)}}),this._p2pChannel.on(vt.RequestUpload,(e,n)=>{this._gateway.upload(e,n)}),this._p2pChannel.on(vt.RequestUploadStats,e=>{this._gateway.uploadWRTCStats(e)}),this._p2pChannel.on(vt.MediaReconnectStart,e=>{this.safeEmit(pn.MEDIA_RECONNECT_START,e)}),this._p2pChannel.on(vt.MediaReconnectEnd,e=>{this.safeEmit(pn.MEDIA_RECONNECT_END,e)}),this._p2pChannel.on(vt.NeedSignalRTT,e=>{e(this._gateway.getSignalRTT())}),this._p2pChannel.on(vt.RequestRestartICE,async e=>{if(this.store.useP2P)return;const n=await this._p2pChannel.restartICE(e),i=await n.next();if(i.done)return;const a=i.value;let l;try{l=await this._gateway.restartICE({iceParameters:a})}catch(h){return void n.throw(h)}const{iceParameters:u}=function(h){const p=h.iceParameters;return{iceParameters:{iceUfrag:p.iceUfrag,icePwd:p.icePwd}}}(l);await n.next({remoteIceParameters:u})}),this._p2pChannel.on(vt.RequestReconnect,async()=>{this._gateway.reconnect()}),this._p2pChannel.on(vt.RequestReconnectPC,async()=>{var e;const{iceParameters:n,dtlsParameters:i,rtpCapabilities:a}=await this._p2pChannel.startP2PConnection({turnServer:(e=this._joinInfo)===null||e===void 0?void 0:e.turnServer}),{gatewayEstablishParams:l,gatewayAddress:u}=await this._gateway.reconnectPC({iceParameters:n,dtlsParameters:i,rtpCapabilities:a}),h=Q6(l,u);await this._p2pChannel.connect(h),await this._p2pChannel.republish(),await this._p2pChannel.reSubscribe()}),this._p2pChannel.on(vt.RequestUnpublishForReconnectPC,async(e,n,i)=>{this._joinInfo&&this._uid!==void 0?(await this._gateway.unpublish(e,this._uid),n()):i()}),this._p2pChannel.on(vt.P2PLost,()=>{this.safeEmit(pn.P2P_LOST,this.store.uid)}),this._p2pChannel.on(vt.UpdateVideoEncoder,e=>{e._encoderConfig&&this._gateway.setVideoProfile(e._encoderConfig)}),this._p2pChannel.on(vt.ConnectionTypeChange,e=>{this.safeEmit(pn.IS_USING_CLOUD_PROXY,e)}),this._p2pChannel.on(vt.RequestLowStreamParameter,e=>{e(this._lowStreamParameter||{width:160,height:120,framerate:15,bitrate:50})}),this._p2pChannel.on(vt.QueryClientConnectionState,e=>{e(this.connectionState)}),this._p2pChannel.on(vt.AudioMetadata,e=>{this.safeEmit(pn.AUDIO_METADATA,e)}),this._p2pChannel.on(vt.AudioPts,e=>{this.safeEmit(pn.AUDIO_PTS,Number(e))})}getKeyMetrics(){return this.store.keyMetrics}async enableContentInspect(e){if(!this._joinInfo||this.connectionState!=="CONNECTED")throw new Ce(X.INVALID_OPERATION,"[".concat(this._clientId,"] can not create content inspect, please join channel first"));if(this._inspect)throw new Ce(X.INVALID_OPERATION,"[".concat(this._clientId,"] Inspect content service already in connecting/connected state"));try{const i=(n={config:e},Xl("ContentInspect").create(n));this._inspect=i,this.handleVideoInspectEvents(i);const{appId:a,cname:l,sid:u,token:h,uid:p,cid:m,vid:E}=this._joinInfo;await i.init({appId:a,areaCode:"",cname:l,sid:u,token:h,uid:p,cid:m,vid:E?Number(E):0},ei)}catch(i){throw Array.isArray(i)?i[0]:i}var n}handleVideoInspectEvents(e){e.on(Ii.CONNECTION_STATE_CHANGE,(n,i)=>{if(this.safeEmit(pn.CONTENT_INSPECT_CONNECTION_STATE_CHANGE,n,i),i===Ys.CONNECTED){if(this.connectionState!=="CONNECTED")return void this.safeEmit(pn.CONTENT_INSPECT_ERROR,new Ce(X.OPERATION_ABORTED,"Content inspect was cancelled because it left the channel"));e.inspectImage()}}),e.on(Ii.INSPECT_RESULT,(n,i)=>{var a;if((i==null?void 0:i.code)===X.INVALID_OPERATION&&this.connectionState==="DISCONNECTED")return k.debug("Stop inspect content because that has left channel"),this==null||(a=this._inspect)===null||a===void 0||a.close(),void(this._inspect=void 0);this.safeEmit(pn.CONTENT_INSPECT_RESULT,n,i)}),e.on(Ii.CLIENT_LOCAL_VIDEO_TRACK,n=>{n(this.localTracks.filter(i=>i.trackMediaType==="video")[0])})}async disableContentInspect(){if(!this._inspect)throw new Ce(X.INVALID_OPERATION,"[".concat(this._clientId,"] inspectVideoContent not started"));try{this._inspect.close(),this._inspect=void 0}catch(e){throw Array.isArray(e)?e[0]:e}}async setImageModeration(e,n){if(wc(e,"enabled"),e){if(!n)throw new Ce(X.INVALID_PARAMS,"config is required");if(pj(n),!this._joinInfo)throw new Ce(X.INVALID_OPERATION,"can not create image moderation, please join channel first");try{if(this._moderation)this._moderation.updateConfig(n);else{const a=(i={config:n},Xl("ImageModeration").create(i));this._moderation=a,this.handleImageModerationEvents(a);const{appId:l,cname:u,sid:h,token:p,uid:m,cid:E,vid:S}=this._joinInfo;await a.init({appId:l,areaCode:"",cname:u,sid:h,token:p,uid:m,cid:E,vid:S?Number(S):0},ei)}}catch(a){throw Array.isArray(a)?a[0]:a}}else{var i;if(!this._moderation)throw new Ce(X.INVALID_OPERATION,"[".concat(this._clientId,"] image moderation not started"));try{this._moderation.close(),this._moderation.removeAllListeners(),this._moderation=void 0}catch(a){throw Array.isArray(a)?a[0]:a}}}handleImageModerationEvents(e){e.on(Nc.CONNECTION_STATE_CHANGE,(n,i)=>{if(this.safeEmit(pn.IMAGE_MODERATION_CONNECTION_STATE_CHANGE,n,i),n===hs.CONNECTED){if(this.connectionState!=="CONNECTED")throw this.setImageModeration(!1),new Ce(X.OPERATION_ABORTED,"Image moderation was cancelled because it left the channel");e.inspectImage()}}),e.on(Nc.CLIENT_LOCAL_VIDEO_TRACK,n=>{n(this.localTracks.filter(i=>i.trackMediaType==="video")[0])})}setP2PTransport(e){if(function(n){vi(n,"transport",["default","auto","relay","sd-rtn"])}(e),this.mode!=="p2p")throw new Ce(X.INVALID_OPERATION,"only p2p mode can set p2pTransport");this.store.p2pTransport=e,k.info("[".concat(this._clientId,"] set client p2pTransport to ").concat(e))}getJoinChannelServiceRecords(){return k.debug("getJoinChannelServiceRecords"),this.store.joinChannelServiceRecords}async setPublishAudioFilterEnabled(e){wc(e,"enabled"),zn("ENABLE_PUBLISH_AUDIO_FILTER",e),this._joinInfo&&await this._gateway.setPublishAudioFilterEnabled(e)}_handleResetAddStream(e,n){switch(n){case"audio":e._audio_added_=!1,e._trust_audio_stream_added_state_=!0;break;case"video":e._video_added_=!1,e._trust_video_stream_added_state_=!0}}},st(rt.prototype,"leave",[mj],Object.getOwnPropertyDescriptor(rt.prototype,"leave"),rt.prototype),st(rt.prototype,"publish",[gj],Object.getOwnPropertyDescriptor(rt.prototype,"publish"),rt.prototype),st(rt.prototype,"unpublish",[vj],Object.getOwnPropertyDescriptor(rt.prototype,"unpublish"),rt.prototype),st(rt.prototype,"subscribe",[Ej],Object.getOwnPropertyDescriptor(rt.prototype,"subscribe"),rt.prototype),st(rt.prototype,"presubscribe",[_j],Object.getOwnPropertyDescriptor(rt.prototype,"presubscribe"),rt.prototype),st(rt.prototype,"massSubscribe",[Sj],Object.getOwnPropertyDescriptor(rt.prototype,"massSubscribe"),rt.prototype),st(rt.prototype,"unsubscribe",[yj],Object.getOwnPropertyDescriptor(rt.prototype,"unsubscribe"),rt.prototype),st(rt.prototype,"massUnsubscribe",[Cj],Object.getOwnPropertyDescriptor(rt.prototype,"massUnsubscribe"),rt.prototype),st(rt.prototype,"setLowStreamParameter",[bj],Object.getOwnPropertyDescriptor(rt.prototype,"setLowStreamParameter"),rt.prototype),st(rt.prototype,"enableDualStream",[Tj],Object.getOwnPropertyDescriptor(rt.prototype,"enableDualStream"),rt.prototype),st(rt.prototype,"disableDualStream",[Rj],Object.getOwnPropertyDescriptor(rt.prototype,"disableDualStream"),rt.prototype),st(rt.prototype,"setClientRole",[wj],Object.getOwnPropertyDescriptor(rt.prototype,"setClientRole"),rt.prototype),st(rt.prototype,"_setClientRoleOptions",[Ij],Object.getOwnPropertyDescriptor(rt.prototype,"_setClientRoleOptions"),rt.prototype),st(rt.prototype,"setProxyServer",[Aj],Object.getOwnPropertyDescriptor(rt.prototype,"setProxyServer"),rt.prototype),st(rt.prototype,"setTurnServer",[Oj],Object.getOwnPropertyDescriptor(rt.prototype,"setTurnServer"),rt.prototype),st(rt.prototype,"setLicense",[xj],Object.getOwnPropertyDescriptor(rt.prototype,"setLicense"),rt.prototype),st(rt.prototype,"startProxyServer",[Nj],Object.getOwnPropertyDescriptor(rt.prototype,"startProxyServer"),rt.prototype),st(rt.prototype,"stopProxyServer",[Pj],Object.getOwnPropertyDescriptor(rt.prototype,"stopProxyServer"),rt.prototype),st(rt.prototype,"setLocalAccessPointsV2",[Dj],Object.getOwnPropertyDescriptor(rt.prototype,"setLocalAccessPointsV2"),rt.prototype),st(rt.prototype,"setLocalAccessPoints",[Lj],Object.getOwnPropertyDescriptor(rt.prototype,"setLocalAccessPoints"),rt.prototype),st(rt.prototype,"setRemoteDefaultVideoStreamType",[kj],Object.getOwnPropertyDescriptor(rt.prototype,"setRemoteDefaultVideoStreamType"),rt.prototype),st(rt.prototype,"setRemoteVideoStreamType",[Mj],Object.getOwnPropertyDescriptor(rt.prototype,"setRemoteVideoStreamType"),rt.prototype),st(rt.prototype,"setStreamFallbackOption",[Fj],Object.getOwnPropertyDescriptor(rt.prototype,"setStreamFallbackOption"),rt.prototype),st(rt.prototype,"setEncryptionConfig",[Uj],Object.getOwnPropertyDescriptor(rt.prototype,"setEncryptionConfig"),rt.prototype),st(rt.prototype,"renewToken",[Bj],Object.getOwnPropertyDescriptor(rt.prototype,"renewToken"),rt.prototype),st(rt.prototype,"enableAudioVolumeIndicator",[Vj],Object.getOwnPropertyDescriptor(rt.prototype,"enableAudioVolumeIndicator"),rt.prototype),st(rt.prototype,"startLiveStreaming",[jj],Object.getOwnPropertyDescriptor(rt.prototype,"startLiveStreaming"),rt.prototype),st(rt.prototype,"setLiveTranscoding",[$j],Object.getOwnPropertyDescriptor(rt.prototype,"setLiveTranscoding"),rt.prototype),st(rt.prototype,"stopLiveStreaming",[Hj],Object.getOwnPropertyDescriptor(rt.prototype,"stopLiveStreaming"),rt.prototype),st(rt.prototype,"startChannelMediaRelay",[zj],Object.getOwnPropertyDescriptor(rt.prototype,"startChannelMediaRelay"),rt.prototype),st(rt.prototype,"updateChannelMediaRelay",[Wj],Object.getOwnPropertyDescriptor(rt.prototype,"updateChannelMediaRelay"),rt.prototype),st(rt.prototype,"stopChannelMediaRelay",[Gj],Object.getOwnPropertyDescriptor(rt.prototype,"stopChannelMediaRelay"),rt.prototype),st(rt.prototype,"sendCustomReportMessage",[Kj],Object.getOwnPropertyDescriptor(rt.prototype,"sendCustomReportMessage"),rt.prototype),st(rt.prototype,"pickSVCLayer",[Yj],Object.getOwnPropertyDescriptor(rt.prototype,"pickSVCLayer"),rt.prototype),st(rt.prototype,"setRTMConfig",[qj],Object.getOwnPropertyDescriptor(rt.prototype,"setRTMConfig"),rt.prototype),st(rt.prototype,"enableContentInspect",[Xj],Object.getOwnPropertyDescriptor(rt.prototype,"enableContentInspect"),rt.prototype),st(rt.prototype,"disableContentInspect",[Jj],Object.getOwnPropertyDescriptor(rt.prototype,"disableContentInspect"),rt.prototype),st(rt.prototype,"setImageModeration",[Qj],Object.getOwnPropertyDescriptor(rt.prototype,"setImageModeration"),rt.prototype),st(rt.prototype,"setP2PTransport",[Zj],Object.getOwnPropertyDescriptor(rt.prototype,"setP2PTransport"),rt.prototype),st(rt.prototype,"getJoinChannelServiceRecords",[e$],Object.getOwnPropertyDescriptor(rt.prototype,"getJoinChannelServiceRecords"),rt.prototype),st(rt.prototype,"setPublishAudioFilterEnabled",[t$],Object.getOwnPropertyDescriptor(rt.prototype,"setPublishAudioFilterEnabled"),rt.prototype),rt);class Y0{constructor(n,i){W(this,"id",0),W(this,"element",void 0),W(this,"peerPair",void 0),W(this,"context",void 0),W(this,"audioPlayerElement",void 0),W(this,"audioTrack",void 0),Y0.count+=1,this.id=Y0.count,this.element=n,this.context=i}initPeers(){this.peerPair=[new RTCPeerConnection,new RTCPeerConnection],this.peerPair[1].ontrack=n=>{const i=document.createElement("audio");i.srcObject=new MediaStream([n.track]),i.play(),this.audioPlayerElement=i}}async switchSdp(){if(!this.peerPair)return;const n=async(a,l)=>{const u=l==="offer"?await a.createOffer():await a.createAnswer();return await a.setLocalDescription(u),a.iceGatheringState==="complete"?a.localDescription:new et(h=>{a.onicegatheringstatechange=()=>{a.iceGatheringState==="complete"&&h(a.localDescription)}})},i=async(a,l)=>await a.setRemoteDescription(l);try{const a=await n(this.peerPair[0],"offer");await i(this.peerPair[1],a);const l=await n(this.peerPair[1],"answer");await i(this.peerPair[0],l)}catch(a){throw new Ce(X.LOCAL_AEC_ERROR,a.toString()).print()}}async getTracksFromMediaElement(n){if(this.audioTrack)return this.audioTrack;let i;try{n instanceof HTMLVideoElement&&(n.captureStream?n.captureStream():n.mozCaptureStream()),i=this.context.createMediaStreamDestination(),this.context.createMediaElementSource(n).connect(i)}catch(l){throw new Ce(X.LOCAL_AEC_ERROR,l.toString()).print()}if(!i)throw new Ce(X.LOCAL_AEC_ERROR,"no dest node when local aec").print();const a=i.stream.getAudioTracks()[0];return this.audioTrack=a,a}getElement(){return this.element}async startEchoCancellation(){this.context.resume(),this.peerPair&&this.close(),this.initPeers();const n=this.element,i=await this.getTracksFromMediaElement(n);this.peerPair&&this.peerPair[0].addTrack(i),await this.switchSdp()}close(){k.debug("close echo cancellation unit, id is",this.id),this.audioPlayerElement&&this.audioPlayerElement.pause(),this.peerPair&&this.peerPair.forEach(n=>{n.close()}),this.peerPair=void 0,this.audioPlayerElement=void 0}}var r$,WS;W(Y0,"count",0);const Qpe=window.AudioContext||window.webkitAudioContext,Zpe=new(r$=It({report:ct}),st((WS=class{constructor(){W(this,"units",[]),W(this,"context",void 0)}processExternalMediaAEC(e){if(!this._doesEnvironmentNeedAEC())return k.debug("the system does not need to process local aec"),-1;this.context||(this.context=new Qpe);let n=this.units.find(i=>i&&i.getElement()===e);return n||(n=new Y0(e,this.context),this.units.push(n)),n.startEchoCancellation(),k.debug("start processing local audio echo cancellation, id is",n.id),n.id}_doesEnvironmentNeedAEC(){return yn().name!==An.SAFARI}}).prototype,"processExternalMediaAEC",[r$],Object.getOwnPropertyDescriptor(WS.prototype,"processExternalMediaAEC"),WS.prototype),WS);function i$(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),i.push.apply(i,a)}return i}function o$(e){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?i$(Object(i),!0).forEach(function(a){W(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):i$(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}const wA=window||document;function a$(e){let n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!wA)return;const i=ti._cspEventHandlerPointer;if(i&&n)return void console.error(i,n);const a=l=>{if(!(l&&l.blockedURI&&(ti.onSecurityPolicyViolation||ti.getListeners(gl.SECURITY_POLICY_VIOLATION).length>0)))return;const u=l.blockedURI;Q("CSP_DETECTED_HOSTNAME_LIST").some(h=>Ge(u).call(u,h))&&(ti.onSecurityPolicyViolation&&typeof ti.onSecurityPolicyViolation=="function"&&ti.onSecurityPolicyViolation(l),ti.getListeners(gl.SECURITY_POLICY_VIOLATION).length>0&&ti.safeEmit(gl.SECURITY_POLICY_VIOLATION,l))};i&&wA.removeEventListener("securitypolicyviolation",i),(n||e&&typeof e=="function"||ti.getListeners(gl.SECURITY_POLICY_VIOLATION).length>0)&&wA.addEventListener("securitypolicyviolation",a),ti._cspEventHandlerPointer=a}var eme=T,tme=jB,s$=RegExp.prototype,nme=function(e){return e===s$||eme(s$,e)?tme(e):e.flags},To=c(nme);function _p(e){let n=e.length;for(;--n>=0;)e[n]=0}const IA=256,c$=286,q0=30,X0=15,AA=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),GS=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),rme=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),l$=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Ql=new Array(576);_p(Ql);const J0=new Array(60);_p(J0);const Q0=new Array(512);_p(Q0);const Z0=new Array(256);_p(Z0);const OA=new Array(29);_p(OA);const KS=new Array(q0);function xA(e,n,i,a,l){this.static_tree=e,this.extra_bits=n,this.extra_base=i,this.elems=a,this.max_length=l,this.has_stree=e&&e.length}let u$,d$,h$;function NA(e,n){this.dyn_tree=e,this.max_code=0,this.stat_desc=n}_p(KS);const f$=e=>e<256?Q0[e]:Q0[256+(e>>>7)],eg=(e,n)=>{e.pending_buf[e.pending++]=255&n,e.pending_buf[e.pending++]=n>>>8&255},Ja=(e,n,i)=>{e.bi_valid>16-i?(e.bi_buf|=n<<e.bi_valid&65535,eg(e,e.bi_buf),e.bi_buf=n>>16-e.bi_valid,e.bi_valid+=i-16):(e.bi_buf|=n<<e.bi_valid&65535,e.bi_valid+=i)},_l=(e,n,i)=>{Ja(e,i[2*n],i[2*n+1])},p$=(e,n)=>{let i=0;do i|=1&e,e>>>=1,i<<=1;while(--n>0);return i>>>1},m$=(e,n,i)=>{const a=new Array(16);let l,u,h=0;for(l=1;l<=X0;l++)h=h+i[l-1]<<1,a[l]=h;for(u=0;u<=n;u++){let p=e[2*u+1];p!==0&&(e[2*u]=p$(a[p]++,p))}},g$=e=>{let n;for(n=0;n<c$;n++)e.dyn_ltree[2*n]=0;for(n=0;n<q0;n++)e.dyn_dtree[2*n]=0;for(n=0;n<19;n++)e.bl_tree[2*n]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},v$=e=>{e.bi_valid>8?eg(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},E$=(e,n,i,a)=>{const l=2*n,u=2*i;return e[l]<e[u]||e[l]===e[u]&&a[n]<=a[i]},PA=(e,n,i)=>{const a=e.heap[i];let l=i<<1;for(;l<=e.heap_len&&(l<e.heap_len&&E$(n,e.heap[l+1],e.heap[l],e.depth)&&l++,!E$(n,a,e.heap[l],e.depth));)e.heap[i]=e.heap[l],i=l,l<<=1;e.heap[i]=a},_$=(e,n,i)=>{let a,l,u,h,p=0;if(e.sym_next!==0)do a=255&e.pending_buf[e.sym_buf+p++],a+=(255&e.pending_buf[e.sym_buf+p++])<<8,l=e.pending_buf[e.sym_buf+p++],a===0?_l(e,l,n):(u=Z0[l],_l(e,u+IA+1,n),h=AA[u],h!==0&&(l-=OA[u],Ja(e,l,h)),a--,u=f$(a),_l(e,u,i),h=GS[u],h!==0&&(a-=KS[u],Ja(e,a,h)));while(p<e.sym_next);_l(e,256,n)},DA=(e,n)=>{const i=n.dyn_tree,a=n.stat_desc.static_tree,l=n.stat_desc.has_stree,u=n.stat_desc.elems;let h,p,m,E=-1;for(e.heap_len=0,e.heap_max=573,h=0;h<u;h++)i[2*h]!==0?(e.heap[++e.heap_len]=E=h,e.depth[h]=0):i[2*h+1]=0;for(;e.heap_len<2;)m=e.heap[++e.heap_len]=E<2?++E:0,i[2*m]=1,e.depth[m]=0,e.opt_len--,l&&(e.static_len-=a[2*m+1]);for(n.max_code=E,h=e.heap_len>>1;h>=1;h--)PA(e,i,h);m=u;do h=e.heap[1],e.heap[1]=e.heap[e.heap_len--],PA(e,i,1),p=e.heap[1],e.heap[--e.heap_max]=h,e.heap[--e.heap_max]=p,i[2*m]=i[2*h]+i[2*p],e.depth[m]=(e.depth[h]>=e.depth[p]?e.depth[h]:e.depth[p])+1,i[2*h+1]=i[2*p+1]=m,e.heap[1]=m++,PA(e,i,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((S,R)=>{const w=R.dyn_tree,O=R.max_code,H=R.stat_desc.static_tree,B=R.stat_desc.has_stree,j=R.stat_desc.extra_bits,q=R.stat_desc.extra_base,Y=R.stat_desc.max_length;let Z,pe,he,re,Se,Ae,Ne=0;for(re=0;re<=X0;re++)S.bl_count[re]=0;for(w[2*S.heap[S.heap_max]+1]=0,Z=S.heap_max+1;Z<573;Z++)pe=S.heap[Z],re=w[2*w[2*pe+1]+1]+1,re>Y&&(re=Y,Ne++),w[2*pe+1]=re,pe>O||(S.bl_count[re]++,Se=0,pe>=q&&(Se=j[pe-q]),Ae=w[2*pe],S.opt_len+=Ae*(re+Se),B&&(S.static_len+=Ae*(H[2*pe+1]+Se)));if(Ne!==0){do{for(re=Y-1;S.bl_count[re]===0;)re--;S.bl_count[re]--,S.bl_count[re+1]+=2,S.bl_count[Y]--,Ne-=2}while(Ne>0);for(re=Y;re!==0;re--)for(pe=S.bl_count[re];pe!==0;)he=S.heap[--Z],he>O||(w[2*he+1]!==re&&(S.opt_len+=(re-w[2*he+1])*w[2*he],w[2*he+1]=re),pe--)}})(e,n),m$(i,E,e.bl_count)},S$=(e,n,i)=>{let a,l,u=-1,h=n[1],p=0,m=7,E=4;for(h===0&&(m=138,E=3),n[2*(i+1)+1]=65535,a=0;a<=i;a++)l=h,h=n[2*(a+1)+1],++p<m&&l===h||(p<E?e.bl_tree[2*l]+=p:l!==0?(l!==u&&e.bl_tree[2*l]++,e.bl_tree[32]++):p<=10?e.bl_tree[34]++:e.bl_tree[36]++,p=0,u=l,h===0?(m=138,E=3):l===h?(m=6,E=3):(m=7,E=4))},y$=(e,n,i)=>{let a,l,u=-1,h=n[1],p=0,m=7,E=4;for(h===0&&(m=138,E=3),a=0;a<=i;a++)if(l=h,h=n[2*(a+1)+1],!(++p<m&&l===h)){if(p<E)do _l(e,l,e.bl_tree);while(--p!=0);else l!==0?(l!==u&&(_l(e,l,e.bl_tree),p--),_l(e,16,e.bl_tree),Ja(e,p-3,2)):p<=10?(_l(e,17,e.bl_tree),Ja(e,p-3,3)):(_l(e,18,e.bl_tree),Ja(e,p-11,7));p=0,u=l,h===0?(m=138,E=3):l===h?(m=6,E=3):(m=7,E=4)}};let C$=!1;const b$=(e,n,i,a)=>{Ja(e,0+(a?1:0),3),v$(e),eg(e,i),eg(e,~i),i&&e.pending_buf.set(e.window.subarray(n,n+i),e.pending),e.pending+=i};var ime=e=>{C$||((()=>{let n,i,a,l,u;const h=new Array(16);for(a=0,l=0;l<28;l++)for(OA[l]=a,n=0;n<1<<AA[l];n++)Z0[a++]=l;for(Z0[a-1]=l,u=0,l=0;l<16;l++)for(KS[l]=u,n=0;n<1<<GS[l];n++)Q0[u++]=l;for(u>>=7;l<q0;l++)for(KS[l]=u<<7,n=0;n<1<<GS[l]-7;n++)Q0[256+u++]=l;for(i=0;i<=X0;i++)h[i]=0;for(n=0;n<=143;)Ql[2*n+1]=8,n++,h[8]++;for(;n<=255;)Ql[2*n+1]=9,n++,h[9]++;for(;n<=279;)Ql[2*n+1]=7,n++,h[7]++;for(;n<=287;)Ql[2*n+1]=8,n++,h[8]++;for(m$(Ql,287,h),n=0;n<q0;n++)J0[2*n+1]=5,J0[2*n]=p$(n,5);u$=new xA(Ql,AA,257,c$,X0),d$=new xA(J0,GS,0,q0,X0),h$=new xA(new Array(0),rme,0,19,7)})(),C$=!0),e.l_desc=new NA(e.dyn_ltree,u$),e.d_desc=new NA(e.dyn_dtree,d$),e.bl_desc=new NA(e.bl_tree,h$),e.bi_buf=0,e.bi_valid=0,g$(e)},ome=(e,n,i,a)=>{let l,u,h=0;e.level>0?(e.strm.data_type===2&&(e.strm.data_type=(p=>{let m,E=4093624447;for(m=0;m<=31;m++,E>>>=1)if(1&E&&p.dyn_ltree[2*m]!==0)return 0;if(p.dyn_ltree[18]!==0||p.dyn_ltree[20]!==0||p.dyn_ltree[26]!==0)return 1;for(m=32;m<IA;m++)if(p.dyn_ltree[2*m]!==0)return 1;return 0})(e)),DA(e,e.l_desc),DA(e,e.d_desc),h=(p=>{let m;for(S$(p,p.dyn_ltree,p.l_desc.max_code),S$(p,p.dyn_dtree,p.d_desc.max_code),DA(p,p.bl_desc),m=18;m>=3&&p.bl_tree[2*l$[m]+1]===0;m--);return p.opt_len+=3*(m+1)+5+5+4,m})(e),l=e.opt_len+3+7>>>3,u=e.static_len+3+7>>>3,u<=l&&(l=u)):l=u=i+5,i+4<=l&&n!==-1?b$(e,n,i,a):e.strategy===4||u===l?(Ja(e,2+(a?1:0),3),_$(e,Ql,J0)):(Ja(e,4+(a?1:0),3),((p,m,E,S)=>{let R;for(Ja(p,m-257,5),Ja(p,E-1,5),Ja(p,S-4,4),R=0;R<S;R++)Ja(p,p.bl_tree[2*l$[R]+1],3);y$(p,p.dyn_ltree,m-1),y$(p,p.dyn_dtree,E-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,h+1),_$(e,e.dyn_ltree,e.dyn_dtree)),g$(e),a&&v$(e)},ame=(e,n,i)=>(e.pending_buf[e.sym_buf+e.sym_next++]=n,e.pending_buf[e.sym_buf+e.sym_next++]=n>>8,e.pending_buf[e.sym_buf+e.sym_next++]=i,n===0?e.dyn_ltree[2*i]++:(e.matches++,n--,e.dyn_ltree[2*(Z0[i]+IA+1)]++,e.dyn_dtree[2*f$(n)]++),e.sym_next===e.sym_end),sme=e=>{Ja(e,2,3),_l(e,256,Ql),(n=>{n.bi_valid===16?(eg(n,n.bi_buf),n.bi_buf=0,n.bi_valid=0):n.bi_valid>=8&&(n.pending_buf[n.pending++]=255&n.bi_buf,n.bi_buf>>=8,n.bi_valid-=8)})(e)},cme={_tr_init:ime,_tr_stored_block:b$,_tr_flush_block:ome,_tr_tally:ame,_tr_align:sme},tg=(e,n,i,a)=>{let l=65535&e|0,u=e>>>16&65535|0,h=0;for(;i!==0;){h=i>2e3?2e3:i,i-=h;do l=l+n[a++]|0,u=u+l|0;while(--h);l%=65521,u%=65521}return l|u<<16|0};const lme=new Uint32Array((()=>{let e,n=[];for(var i=0;i<256;i++){e=i;for(var a=0;a<8;a++)e=1&e?3988292384^e>>>1:e>>>1;n[i]=e}return n})());var Mo=(e,n,i,a)=>{const l=lme,u=a+i;e^=-1;for(let h=a;h<u;h++)e=e>>>8^l[255&(e^n[h])];return-1^e},fh={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Sp={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:ume,_tr_stored_block:LA,_tr_flush_block:dme,_tr_tally:Zu,_tr_align:hme}=cme,{Z_NO_FLUSH:ed,Z_PARTIAL_FLUSH:fme,Z_FULL_FLUSH:pme,Z_FINISH:Zs,Z_BLOCK:T$,Z_OK:Qo,Z_STREAM_END:R$,Z_STREAM_ERROR:Sl,Z_DATA_ERROR:mme,Z_BUF_ERROR:kA,Z_DEFAULT_COMPRESSION:gme,Z_FILTERED:vme,Z_HUFFMAN_ONLY:YS,Z_RLE:Eme,Z_FIXED:_me,Z_DEFAULT_STRATEGY:Sme,Z_UNKNOWN:yme,Z_DEFLATED:qS}=Sp,MA=286,Cme=30,bme=19,Tme=2*MA+1,Rme=15,ph=258,yl=262,yp=42,mh=113,ng=666,gh=(e,n)=>(e.msg=fh[n],n),w$=e=>2*e-(e>4?9:0),td=e=>{let n=e.length;for(;--n>=0;)e[n]=0},wme=e=>{let n,i,a,l=e.w_size;n=e.hash_size,a=n;do i=e.head[--a],e.head[a]=i>=l?i-l:0;while(--n);n=l,a=n;do i=e.prev[--a],e.prev[a]=i>=l?i-l:0;while(--n)};let nd=(e,n,i)=>(n<<e.hash_shift^i)&e.hash_mask;const ps=e=>{const n=e.state;let i=n.pending;i>e.avail_out&&(i=e.avail_out),i!==0&&(e.output.set(n.pending_buf.subarray(n.pending_out,n.pending_out+i),e.next_out),e.next_out+=i,n.pending_out+=i,e.total_out+=i,e.avail_out-=i,n.pending-=i,n.pending===0&&(n.pending_out=0))},ms=(e,n)=>{dme(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,n),e.block_start=e.strstart,ps(e.strm)},Br=(e,n)=>{e.pending_buf[e.pending++]=n},rg=(e,n)=>{e.pending_buf[e.pending++]=n>>>8&255,e.pending_buf[e.pending++]=255&n},FA=(e,n,i,a)=>{let l=e.avail_in;return l>a&&(l=a),l===0?0:(e.avail_in-=l,n.set(e.input.subarray(e.next_in,e.next_in+l),i),e.state.wrap===1?e.adler=tg(e.adler,n,l,i):e.state.wrap===2&&(e.adler=Mo(e.adler,n,l,i)),e.next_in+=l,e.total_in+=l,l)},I$=(e,n)=>{let i,a,l=e.max_chain_length,u=e.strstart,h=e.prev_length,p=e.nice_match;const m=e.strstart>e.w_size-yl?e.strstart-(e.w_size-yl):0,E=e.window,S=e.w_mask,R=e.prev,w=e.strstart+ph;let O=E[u+h-1],H=E[u+h];e.prev_length>=e.good_match&&(l>>=2),p>e.lookahead&&(p=e.lookahead);do if(i=n,E[i+h]===H&&E[i+h-1]===O&&E[i]===E[u]&&E[++i]===E[u+1]){u+=2,i++;do;while(E[++u]===E[++i]&&E[++u]===E[++i]&&E[++u]===E[++i]&&E[++u]===E[++i]&&E[++u]===E[++i]&&E[++u]===E[++i]&&E[++u]===E[++i]&&E[++u]===E[++i]&&u<w);if(a=ph-(w-u),u=w-ph,a>h){if(e.match_start=n,h=a,a>=p)break;O=E[u+h-1],H=E[u+h]}}while((n=R[n&S])>m&&--l!=0);return h<=e.lookahead?h:e.lookahead},Cp=e=>{const n=e.w_size;let i,a,l;do{if(a=e.window_size-e.lookahead-e.strstart,e.strstart>=n+(n-yl)&&(e.window.set(e.window.subarray(n,n+n-a),0),e.match_start-=n,e.strstart-=n,e.block_start-=n,e.insert>e.strstart&&(e.insert=e.strstart),wme(e),a+=n),e.strm.avail_in===0)break;if(i=FA(e.strm,e.window,e.strstart+e.lookahead,a),e.lookahead+=i,e.lookahead+e.insert>=3)for(l=e.strstart-e.insert,e.ins_h=e.window[l],e.ins_h=nd(e,e.ins_h,e.window[l+1]);e.insert&&(e.ins_h=nd(e,e.ins_h,e.window[l+3-1]),e.prev[l&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=l,l++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<yl&&e.strm.avail_in!==0)},A$=(e,n)=>{let i,a,l,u=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,h=0,p=e.strm.avail_in;do{if(i=65535,l=e.bi_valid+42>>3,e.strm.avail_out<l||(l=e.strm.avail_out-l,a=e.strstart-e.block_start,i>a+e.strm.avail_in&&(i=a+e.strm.avail_in),i>l&&(i=l),i<u&&(i===0&&n!==Zs||n===ed||i!==a+e.strm.avail_in)))break;h=n===Zs&&i===a+e.strm.avail_in?1:0,LA(e,0,0,h),e.pending_buf[e.pending-4]=i,e.pending_buf[e.pending-3]=i>>8,e.pending_buf[e.pending-2]=~i,e.pending_buf[e.pending-1]=~i>>8,ps(e.strm),a&&(a>i&&(a=i),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+a),e.strm.next_out),e.strm.next_out+=a,e.strm.avail_out-=a,e.strm.total_out+=a,e.block_start+=a,i-=a),i&&(FA(e.strm,e.strm.output,e.strm.next_out,i),e.strm.next_out+=i,e.strm.avail_out-=i,e.strm.total_out+=i)}while(h===0);return p-=e.strm.avail_in,p&&(p>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=p&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-p,e.strm.next_in),e.strstart),e.strstart+=p,e.insert+=p>e.w_size-e.insert?e.w_size-e.insert:p),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),h?4:n!==ed&&n!==Zs&&e.strm.avail_in===0&&e.strstart===e.block_start?2:(l=e.window_size-e.strstart,e.strm.avail_in>l&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,l+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),l>e.strm.avail_in&&(l=e.strm.avail_in),l&&(FA(e.strm,e.window,e.strstart,l),e.strstart+=l,e.insert+=l>e.w_size-e.insert?e.w_size-e.insert:l),e.high_water<e.strstart&&(e.high_water=e.strstart),l=e.bi_valid+42>>3,l=e.pending_buf_size-l>65535?65535:e.pending_buf_size-l,u=l>e.w_size?e.w_size:l,a=e.strstart-e.block_start,(a>=u||(a||n===Zs)&&n!==ed&&e.strm.avail_in===0&&a<=l)&&(i=a>l?l:a,h=n===Zs&&e.strm.avail_in===0&&i===a?1:0,LA(e,e.block_start,i,h),e.block_start+=i,ps(e.strm)),h?3:1)},UA=(e,n)=>{let i,a;for(;;){if(e.lookahead<yl){if(Cp(e),e.lookahead<yl&&n===ed)return 1;if(e.lookahead===0)break}if(i=0,e.lookahead>=3&&(e.ins_h=nd(e,e.ins_h,e.window[e.strstart+3-1]),i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),i!==0&&e.strstart-i<=e.w_size-yl&&(e.match_length=I$(e,i)),e.match_length>=3)if(a=Zu(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do e.strstart++,e.ins_h=nd(e,e.ins_h,e.window[e.strstart+3-1]),i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!=0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=nd(e,e.ins_h,e.window[e.strstart+1]);else a=Zu(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(a&&(ms(e,!1),e.strm.avail_out===0))return 1}return e.insert=e.strstart<2?e.strstart:2,n===Zs?(ms(e,!0),e.strm.avail_out===0?3:4):e.sym_next&&(ms(e,!1),e.strm.avail_out===0)?1:2},bp=(e,n)=>{let i,a,l;for(;;){if(e.lookahead<yl){if(Cp(e),e.lookahead<yl&&n===ed)return 1;if(e.lookahead===0)break}if(i=0,e.lookahead>=3&&(e.ins_h=nd(e,e.ins_h,e.window[e.strstart+3-1]),i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,i!==0&&e.prev_length<e.max_lazy_match&&e.strstart-i<=e.w_size-yl&&(e.match_length=I$(e,i),e.match_length<=5&&(e.strategy===vme||e.match_length===3&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){l=e.strstart+e.lookahead-3,a=Zu(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=l&&(e.ins_h=nd(e,e.ins_h,e.window[e.strstart+3-1]),i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!=0);if(e.match_available=0,e.match_length=2,e.strstart++,a&&(ms(e,!1),e.strm.avail_out===0))return 1}else if(e.match_available){if(a=Zu(e,0,e.window[e.strstart-1]),a&&ms(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(a=Zu(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,n===Zs?(ms(e,!0),e.strm.avail_out===0?3:4):e.sym_next&&(ms(e,!1),e.strm.avail_out===0)?1:2};function Cl(e,n,i,a,l){this.good_length=e,this.max_lazy=n,this.nice_length=i,this.max_chain=a,this.func=l}const ig=[new Cl(0,0,0,0,A$),new Cl(4,4,8,4,UA),new Cl(4,5,16,8,UA),new Cl(4,6,32,32,UA),new Cl(4,4,16,16,bp),new Cl(8,16,32,32,bp),new Cl(8,16,128,128,bp),new Cl(8,32,128,256,bp),new Cl(32,128,258,1024,bp),new Cl(32,258,258,4096,bp)];function Ime(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=qS,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(2*Tme),this.dyn_dtree=new Uint16Array(2*(2*Cme+1)),this.bl_tree=new Uint16Array(2*(2*bme+1)),td(this.dyn_ltree),td(this.dyn_dtree),td(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(Rme+1),this.heap=new Uint16Array(2*MA+1),td(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*MA+1),td(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const og=e=>{if(!e)return 1;const n=e.state;return!n||n.strm!==e||n.status!==yp&&n.status!==57&&n.status!==69&&n.status!==73&&n.status!==91&&n.status!==103&&n.status!==mh&&n.status!==ng?1:0},O$=e=>{if(og(e))return gh(e,Sl);e.total_in=e.total_out=0,e.data_type=yme;const n=e.state;return n.pending=0,n.pending_out=0,n.wrap<0&&(n.wrap=-n.wrap),n.status=n.wrap===2?57:n.wrap?yp:mh,e.adler=n.wrap===2?0:1,n.last_flush=-2,ume(n),Qo},x$=e=>{const n=O$(e);return n===Qo&&(i=>{i.window_size=2*i.w_size,td(i.head),i.max_lazy_match=ig[i.level].max_lazy,i.good_match=ig[i.level].good_length,i.nice_match=ig[i.level].nice_length,i.max_chain_length=ig[i.level].max_chain,i.strstart=0,i.block_start=0,i.lookahead=0,i.insert=0,i.match_length=i.prev_length=2,i.match_available=0,i.ins_h=0})(e.state),n},N$=(e,n,i,a,l,u)=>{if(!e)return Sl;let h=1;if(n===gme&&(n=6),a<0?(h=0,a=-a):a>15&&(h=2,a-=16),l<1||l>9||i!==qS||a<8||a>15||n<0||n>9||u<0||u>_me||a===8&&h!==1)return gh(e,Sl);a===8&&(a=9);const p=new Ime;return e.state=p,p.strm=e,p.status=yp,p.wrap=h,p.gzhead=null,p.w_bits=a,p.w_size=1<<p.w_bits,p.w_mask=p.w_size-1,p.hash_bits=l+7,p.hash_size=1<<p.hash_bits,p.hash_mask=p.hash_size-1,p.hash_shift=~~((p.hash_bits+3-1)/3),p.window=new Uint8Array(2*p.w_size),p.head=new Uint16Array(p.hash_size),p.prev=new Uint16Array(p.w_size),p.lit_bufsize=1<<l+6,p.pending_buf_size=4*p.lit_bufsize,p.pending_buf=new Uint8Array(p.pending_buf_size),p.sym_buf=p.lit_bufsize,p.sym_end=3*(p.lit_bufsize-1),p.level=n,p.strategy=u,p.method=i,x$(e)};var Ame=(e,n)=>{if(og(e)||n>T$||n<0)return e?gh(e,Sl):Sl;const i=e.state;if(!e.output||e.avail_in!==0&&!e.input||i.status===ng&&n!==Zs)return gh(e,e.avail_out===0?kA:Sl);const a=i.last_flush;if(i.last_flush=n,i.pending!==0){if(ps(e),e.avail_out===0)return i.last_flush=-1,Qo}else if(e.avail_in===0&&w$(n)<=w$(a)&&n!==Zs)return gh(e,kA);if(i.status===ng&&e.avail_in!==0)return gh(e,kA);if(i.status===yp&&i.wrap===0&&(i.status=mh),i.status===yp){let l=qS+(i.w_bits-8<<4)<<8,u=-1;if(u=i.strategy>=YS||i.level<2?0:i.level<6?1:i.level===6?2:3,l|=u<<6,i.strstart!==0&&(l|=32),l+=31-l%31,rg(i,l),i.strstart!==0&&(rg(i,e.adler>>>16),rg(i,65535&e.adler)),e.adler=1,i.status=mh,ps(e),i.pending!==0)return i.last_flush=-1,Qo}if(i.status===57){if(e.adler=0,Br(i,31),Br(i,139),Br(i,8),i.gzhead)Br(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),Br(i,255&i.gzhead.time),Br(i,i.gzhead.time>>8&255),Br(i,i.gzhead.time>>16&255),Br(i,i.gzhead.time>>24&255),Br(i,i.level===9?2:i.strategy>=YS||i.level<2?4:0),Br(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(Br(i,255&i.gzhead.extra.length),Br(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=Mo(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69;else if(Br(i,0),Br(i,0),Br(i,0),Br(i,0),Br(i,0),Br(i,i.level===9?2:i.strategy>=YS||i.level<2?4:0),Br(i,3),i.status=mh,ps(e),i.pending!==0)return i.last_flush=-1,Qo}if(i.status===69){if(i.gzhead.extra){let l=i.pending,u=(65535&i.gzhead.extra.length)-i.gzindex;for(;i.pending+u>i.pending_buf_size;){let p=i.pending_buf_size-i.pending;if(i.pending_buf.set(i.gzhead.extra.subarray(i.gzindex,i.gzindex+p),i.pending),i.pending=i.pending_buf_size,i.gzhead.hcrc&&i.pending>l&&(e.adler=Mo(e.adler,i.pending_buf,i.pending-l,l)),i.gzindex+=p,ps(e),i.pending!==0)return i.last_flush=-1,Qo;l=0,u-=p}let h=new Uint8Array(i.gzhead.extra);i.pending_buf.set(h.subarray(i.gzindex,i.gzindex+u),i.pending),i.pending+=u,i.gzhead.hcrc&&i.pending>l&&(e.adler=Mo(e.adler,i.pending_buf,i.pending-l,l)),i.gzindex=0}i.status=73}if(i.status===73){if(i.gzhead.name){let l,u=i.pending;do{if(i.pending===i.pending_buf_size){if(i.gzhead.hcrc&&i.pending>u&&(e.adler=Mo(e.adler,i.pending_buf,i.pending-u,u)),ps(e),i.pending!==0)return i.last_flush=-1,Qo;u=0}l=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,Br(i,l)}while(l!==0);i.gzhead.hcrc&&i.pending>u&&(e.adler=Mo(e.adler,i.pending_buf,i.pending-u,u)),i.gzindex=0}i.status=91}if(i.status===91){if(i.gzhead.comment){let l,u=i.pending;do{if(i.pending===i.pending_buf_size){if(i.gzhead.hcrc&&i.pending>u&&(e.adler=Mo(e.adler,i.pending_buf,i.pending-u,u)),ps(e),i.pending!==0)return i.last_flush=-1,Qo;u=0}l=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,Br(i,l)}while(l!==0);i.gzhead.hcrc&&i.pending>u&&(e.adler=Mo(e.adler,i.pending_buf,i.pending-u,u))}i.status=103}if(i.status===103){if(i.gzhead.hcrc){if(i.pending+2>i.pending_buf_size&&(ps(e),i.pending!==0))return i.last_flush=-1,Qo;Br(i,255&e.adler),Br(i,e.adler>>8&255),e.adler=0}if(i.status=mh,ps(e),i.pending!==0)return i.last_flush=-1,Qo}if(e.avail_in!==0||i.lookahead!==0||n!==ed&&i.status!==ng){let l=i.level===0?A$(i,n):i.strategy===YS?((u,h)=>{let p;for(;;){if(u.lookahead===0&&(Cp(u),u.lookahead===0)){if(h===ed)return 1;break}if(u.match_length=0,p=Zu(u,0,u.window[u.strstart]),u.lookahead--,u.strstart++,p&&(ms(u,!1),u.strm.avail_out===0))return 1}return u.insert=0,h===Zs?(ms(u,!0),u.strm.avail_out===0?3:4):u.sym_next&&(ms(u,!1),u.strm.avail_out===0)?1:2})(i,n):i.strategy===Eme?((u,h)=>{let p,m,E,S;const R=u.window;for(;;){if(u.lookahead<=ph){if(Cp(u),u.lookahead<=ph&&h===ed)return 1;if(u.lookahead===0)break}if(u.match_length=0,u.lookahead>=3&&u.strstart>0&&(E=u.strstart-1,m=R[E],m===R[++E]&&m===R[++E]&&m===R[++E])){S=u.strstart+ph;do;while(m===R[++E]&&m===R[++E]&&m===R[++E]&&m===R[++E]&&m===R[++E]&&m===R[++E]&&m===R[++E]&&m===R[++E]&&E<S);u.match_length=ph-(S-E),u.match_length>u.lookahead&&(u.match_length=u.lookahead)}if(u.match_length>=3?(p=Zu(u,1,u.match_length-3),u.lookahead-=u.match_length,u.strstart+=u.match_length,u.match_length=0):(p=Zu(u,0,u.window[u.strstart]),u.lookahead--,u.strstart++),p&&(ms(u,!1),u.strm.avail_out===0))return 1}return u.insert=0,h===Zs?(ms(u,!0),u.strm.avail_out===0?3:4):u.sym_next&&(ms(u,!1),u.strm.avail_out===0)?1:2})(i,n):ig[i.level].func(i,n);if(l!==3&&l!==4||(i.status=ng),l===1||l===3)return e.avail_out===0&&(i.last_flush=-1),Qo;if(l===2&&(n===fme?hme(i):n!==T$&&(LA(i,0,0,!1),n===pme&&(td(i.head),i.lookahead===0&&(i.strstart=0,i.block_start=0,i.insert=0))),ps(e),e.avail_out===0))return i.last_flush=-1,Qo}return n!==Zs?Qo:i.wrap<=0?R$:(i.wrap===2?(Br(i,255&e.adler),Br(i,e.adler>>8&255),Br(i,e.adler>>16&255),Br(i,e.adler>>24&255),Br(i,255&e.total_in),Br(i,e.total_in>>8&255),Br(i,e.total_in>>16&255),Br(i,e.total_in>>24&255)):(rg(i,e.adler>>>16),rg(i,65535&e.adler)),ps(e),i.wrap>0&&(i.wrap=-i.wrap),i.pending!==0?Qo:R$)},Ome=(e,n)=>{let i=n.length;if(og(e))return Sl;const a=e.state,l=a.wrap;if(l===2||l===1&&a.status!==yp||a.lookahead)return Sl;if(l===1&&(e.adler=tg(e.adler,n,i,0)),a.wrap=0,i>=a.w_size){l===0&&(td(a.head),a.strstart=0,a.block_start=0,a.insert=0);let m=new Uint8Array(a.w_size);m.set(n.subarray(i-a.w_size,i),0),n=m,i=a.w_size}const u=e.avail_in,h=e.next_in,p=e.input;for(e.avail_in=i,e.next_in=0,e.input=n,Cp(a);a.lookahead>=3;){let m=a.strstart,E=a.lookahead-2;do a.ins_h=nd(a,a.ins_h,a.window[m+3-1]),a.prev[m&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=m,m++;while(--E);a.strstart=m,a.lookahead=2,Cp(a)}return a.strstart+=a.lookahead,a.block_start=a.strstart,a.insert=a.lookahead,a.lookahead=0,a.match_length=a.prev_length=2,a.match_available=0,e.next_in=h,e.input=p,e.avail_in=u,a.wrap=l,Qo},ag={deflateInit:(e,n)=>N$(e,n,qS,15,8,Sme),deflateInit2:N$,deflateReset:x$,deflateResetKeep:O$,deflateSetHeader:(e,n)=>og(e)||e.state.wrap!==2?Sl:(e.state.gzhead=n,Qo),deflate:Ame,deflateEnd:e=>{if(og(e))return Sl;const n=e.state.status;return e.state=null,n===mh?gh(e,mme):Qo},deflateSetDictionary:Ome,deflateInfo:"pako deflate (from Nodeca project)"};const xme=(e,n)=>Object.prototype.hasOwnProperty.call(e,n);var XS={assign:function(e){const n=Array.prototype.slice.call(arguments,1);for(;n.length;){const i=n.shift();if(i){if(typeof i!="object")throw new TypeError(i+"must be non-object");for(const a in i)xme(i,a)&&(e[a]=i[a])}}return e},flattenChunks:e=>{let n=0;for(let a=0,l=e.length;a<l;a++)n+=e[a].length;const i=new Uint8Array(n);for(let a=0,l=0,u=e.length;a<u;a++){let h=e[a];i.set(h,l),l+=h.length}return i}};let P$=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{P$=!1}const sg=new Uint8Array(256);for(let e=0;e<256;e++)sg[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;sg[254]=sg[254]=1;var cg={string2buf:e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let n,i,a,l,u,h=e.length,p=0;for(l=0;l<h;l++)i=e.charCodeAt(l),(64512&i)==55296&&l+1<h&&(a=e.charCodeAt(l+1),(64512&a)==56320&&(i=65536+(i-55296<<10)+(a-56320),l++)),p+=i<128?1:i<2048?2:i<65536?3:4;for(n=new Uint8Array(p),u=0,l=0;u<p;l++)i=e.charCodeAt(l),(64512&i)==55296&&l+1<h&&(a=e.charCodeAt(l+1),(64512&a)==56320&&(i=65536+(i-55296<<10)+(a-56320),l++)),i<128?n[u++]=i:i<2048?(n[u++]=192|i>>>6,n[u++]=128|63&i):i<65536?(n[u++]=224|i>>>12,n[u++]=128|i>>>6&63,n[u++]=128|63&i):(n[u++]=240|i>>>18,n[u++]=128|i>>>12&63,n[u++]=128|i>>>6&63,n[u++]=128|63&i);return n},buf2string:(e,n)=>{const i=n||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,n));let a,l;const u=new Array(2*i);for(l=0,a=0;a<i;){let h=e[a++];if(h<128){u[l++]=h;continue}let p=sg[h];if(p>4)u[l++]=65533,a+=p-1;else{for(h&=p===2?31:p===3?15:7;p>1&&a<i;)h=h<<6|63&e[a++],p--;p>1?u[l++]=65533:h<65536?u[l++]=h:(h-=65536,u[l++]=55296|h>>10&1023,u[l++]=56320|1023&h)}}return((h,p)=>{if(p<65534&&h.subarray&&P$)return String.fromCharCode.apply(null,h.length===p?h:h.subarray(0,p));let m="";for(let E=0;E<p;E++)m+=String.fromCharCode(h[E]);return m})(u,l)},utf8border:(e,n)=>{(n=n||e.length)>e.length&&(n=e.length);let i=n-1;for(;i>=0&&(192&e[i])==128;)i--;return i<0||i===0?n:i+sg[e[i]]>n?i:n}},D$=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const L$=Object.prototype.toString,{Z_NO_FLUSH:Nme,Z_SYNC_FLUSH:Pme,Z_FULL_FLUSH:Dme,Z_FINISH:Lme,Z_OK:JS,Z_STREAM_END:kme,Z_DEFAULT_COMPRESSION:Mme,Z_DEFAULT_STRATEGY:Fme,Z_DEFLATED:Ume}=Sp;function lg(e){this.options=XS.assign({level:Mme,method:Ume,chunkSize:16384,windowBits:15,memLevel:8,strategy:Fme},e||{});let n=this.options;n.raw&&n.windowBits>0?n.windowBits=-n.windowBits:n.gzip&&n.windowBits>0&&n.windowBits<16&&(n.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new D$,this.strm.avail_out=0;let i=ag.deflateInit2(this.strm,n.level,n.method,n.windowBits,n.memLevel,n.strategy);if(i!==JS)throw new Error(fh[i]);if(n.header&&ag.deflateSetHeader(this.strm,n.header),n.dictionary){let a;if(a=typeof n.dictionary=="string"?cg.string2buf(n.dictionary):L$.call(n.dictionary)==="[object ArrayBuffer]"?new Uint8Array(n.dictionary):n.dictionary,i=ag.deflateSetDictionary(this.strm,a),i!==JS)throw new Error(fh[i]);this._dict_set=!0}}function BA(e,n){const i=new lg(n);if(i.push(e,!0),i.err)throw i.msg||fh[i.err];return i.result}lg.prototype.push=function(e,n){const i=this.strm,a=this.options.chunkSize;let l,u;if(this.ended)return!1;for(u=n===~~n?n:n===!0?Lme:Nme,typeof e=="string"?i.input=cg.string2buf(e):L$.call(e)==="[object ArrayBuffer]"?i.input=new Uint8Array(e):i.input=e,i.next_in=0,i.avail_in=i.input.length;;)if(i.avail_out===0&&(i.output=new Uint8Array(a),i.next_out=0,i.avail_out=a),(u===Pme||u===Dme)&&i.avail_out<=6)this.onData(i.output.subarray(0,i.next_out)),i.avail_out=0;else{if(l=ag.deflate(i,u),l===kme)return i.next_out>0&&this.onData(i.output.subarray(0,i.next_out)),l=ag.deflateEnd(this.strm),this.onEnd(l),this.ended=!0,l===JS;if(i.avail_out!==0){if(u>0&&i.next_out>0)this.onData(i.output.subarray(0,i.next_out)),i.avail_out=0;else if(i.avail_in===0)break}else this.onData(i.output)}return!0},lg.prototype.onData=function(e){this.chunks.push(e)},lg.prototype.onEnd=function(e){e===JS&&(this.result=XS.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var Bme={Deflate:lg,deflate:BA,deflateRaw:function(e,n){return(n=n||{}).raw=!0,BA(e,n)},gzip:function(e,n){return(n=n||{}).gzip=!0,BA(e,n)},constants:Sp};const QS=16209;var Vme=function(e,n){let i,a,l,u,h,p,m,E,S,R,w,O,H,B,j,q,Y,Z,pe,he,re,Se,Ae,Ne;const Be=e.state;i=e.next_in,Ae=e.input,a=i+(e.avail_in-5),l=e.next_out,Ne=e.output,u=l-(n-e.avail_out),h=l+(e.avail_out-257),p=Be.dmax,m=Be.wsize,E=Be.whave,S=Be.wnext,R=Be.window,w=Be.hold,O=Be.bits,H=Be.lencode,B=Be.distcode,j=(1<<Be.lenbits)-1,q=(1<<Be.distbits)-1;e:do{O<15&&(w+=Ae[i++]<<O,O+=8,w+=Ae[i++]<<O,O+=8),Y=H[w&j];t:for(;;){if(Z=Y>>>24,w>>>=Z,O-=Z,Z=Y>>>16&255,Z===0)Ne[l++]=65535&Y;else{if(!(16&Z)){if(!(64&Z)){Y=H[(65535&Y)+(w&(1<<Z)-1)];continue t}if(32&Z){Be.mode=16191;break e}e.msg="invalid literal/length code",Be.mode=QS;break e}pe=65535&Y,Z&=15,Z&&(O<Z&&(w+=Ae[i++]<<O,O+=8),pe+=w&(1<<Z)-1,w>>>=Z,O-=Z),O<15&&(w+=Ae[i++]<<O,O+=8,w+=Ae[i++]<<O,O+=8),Y=B[w&q];n:for(;;){if(Z=Y>>>24,w>>>=Z,O-=Z,Z=Y>>>16&255,!(16&Z)){if(!(64&Z)){Y=B[(65535&Y)+(w&(1<<Z)-1)];continue n}e.msg="invalid distance code",Be.mode=QS;break e}if(he=65535&Y,Z&=15,O<Z&&(w+=Ae[i++]<<O,O+=8,O<Z&&(w+=Ae[i++]<<O,O+=8)),he+=w&(1<<Z)-1,he>p){e.msg="invalid distance too far back",Be.mode=QS;break e}if(w>>>=Z,O-=Z,Z=l-u,he>Z){if(Z=he-Z,Z>E&&Be.sane){e.msg="invalid distance too far back",Be.mode=QS;break e}if(re=0,Se=R,S===0){if(re+=m-Z,Z<pe){pe-=Z;do Ne[l++]=R[re++];while(--Z);re=l-he,Se=Ne}}else if(S<Z){if(re+=m+S-Z,Z-=S,Z<pe){pe-=Z;do Ne[l++]=R[re++];while(--Z);if(re=0,S<pe){Z=S,pe-=Z;do Ne[l++]=R[re++];while(--Z);re=l-he,Se=Ne}}}else if(re+=S-Z,Z<pe){pe-=Z;do Ne[l++]=R[re++];while(--Z);re=l-he,Se=Ne}for(;pe>2;)Ne[l++]=Se[re++],Ne[l++]=Se[re++],Ne[l++]=Se[re++],pe-=3;pe&&(Ne[l++]=Se[re++],pe>1&&(Ne[l++]=Se[re++]))}else{re=l-he;do Ne[l++]=Ne[re++],Ne[l++]=Ne[re++],Ne[l++]=Ne[re++],pe-=3;while(pe>2);pe&&(Ne[l++]=Ne[re++],pe>1&&(Ne[l++]=Ne[re++]))}break}}break}}while(i<a&&l<h);pe=O>>3,i-=pe,O-=pe<<3,w&=(1<<O)-1,e.next_in=i,e.next_out=l,e.avail_in=i<a?a-i+5:5-(i-a),e.avail_out=l<h?h-l+257:257-(l-h),Be.hold=w,Be.bits=O};const ZS=15,jme=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),$me=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Hme=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),zme=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var ug=(e,n,i,a,l,u,h,p)=>{const m=p.bits;let E,S,R,w,O,H,B=0,j=0,q=0,Y=0,Z=0,pe=0,he=0,re=0,Se=0,Ae=0,Ne=null;const Be=new Uint16Array(16),nn=new Uint16Array(16);let sn,Lt,kn,Nn=null;for(B=0;B<=ZS;B++)Be[B]=0;for(j=0;j<a;j++)Be[n[i+j]]++;for(Z=m,Y=ZS;Y>=1&&Be[Y]===0;Y--);if(Z>Y&&(Z=Y),Y===0)return l[u++]=20971520,l[u++]=20971520,p.bits=1,0;for(q=1;q<Y&&Be[q]===0;q++);for(Z<q&&(Z=q),re=1,B=1;B<=ZS;B++)if(re<<=1,re-=Be[B],re<0)return-1;if(re>0&&(e===0||Y!==1))return-1;for(nn[1]=0,B=1;B<ZS;B++)nn[B+1]=nn[B]+Be[B];for(j=0;j<a;j++)n[i+j]!==0&&(h[nn[n[i+j]]++]=j);if(e===0?(Ne=Nn=h,H=20):e===1?(Ne=jme,Nn=$me,H=257):(Ne=Hme,Nn=zme,H=0),Ae=0,j=0,B=q,O=u,pe=Z,he=0,R=-1,Se=1<<Z,w=Se-1,e===1&&Se>852||e===2&&Se>592)return 1;for(;;){sn=B-he,h[j]+1<H?(Lt=0,kn=h[j]):h[j]>=H?(Lt=Nn[h[j]-H],kn=Ne[h[j]-H]):(Lt=96,kn=0),E=1<<B-he,S=1<<pe,q=S;do S-=E,l[O+(Ae>>he)+S]=sn<<24|Lt<<16|kn|0;while(S!==0);for(E=1<<B-1;Ae&E;)E>>=1;if(E!==0?(Ae&=E-1,Ae+=E):Ae=0,j++,--Be[B]==0){if(B===Y)break;B=n[i+h[j]]}if(B>Z&&(Ae&w)!==R){for(he===0&&(he=Z),O+=q,pe=B-he,re=1<<pe;pe+he<Y&&(re-=Be[pe+he],!(re<=0));)pe++,re<<=1;if(Se+=1<<pe,e===1&&Se>852||e===2&&Se>592)return 1;R=Ae&w,l[R]=Z<<24|pe<<16|O-u|0}}return Ae!==0&&(l[O+Ae]=B-he<<24|64<<16|0),p.bits=Z,0};const{Z_FINISH:k$,Z_BLOCK:Wme,Z_TREES:ey,Z_OK:vh,Z_STREAM_END:Gme,Z_NEED_DICT:Kme,Z_STREAM_ERROR:ec,Z_DATA_ERROR:M$,Z_MEM_ERROR:F$,Z_BUF_ERROR:Yme,Z_DEFLATED:U$}=Sp,ty=16180,ny=16190,Zl=16191,VA=16192,jA=16194,ry=16199,iy=16200,$A=16206,Ai=16209,B$=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function qme(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Eh=e=>{if(!e)return 1;const n=e.state;return!n||n.strm!==e||n.mode<ty||n.mode>16211?1:0},V$=e=>{if(Eh(e))return ec;const n=e.state;return e.total_in=e.total_out=n.total=0,e.msg="",n.wrap&&(e.adler=1&n.wrap),n.mode=ty,n.last=0,n.havedict=0,n.flags=-1,n.dmax=32768,n.head=null,n.hold=0,n.bits=0,n.lencode=n.lendyn=new Int32Array(852),n.distcode=n.distdyn=new Int32Array(592),n.sane=1,n.back=-1,vh},j$=e=>{if(Eh(e))return ec;const n=e.state;return n.wsize=0,n.whave=0,n.wnext=0,V$(e)},$$=(e,n)=>{let i;if(Eh(e))return ec;const a=e.state;return n<0?(i=0,n=-n):(i=5+(n>>4),n<48&&(n&=15)),n&&(n<8||n>15)?ec:(a.window!==null&&a.wbits!==n&&(a.window=null),a.wrap=i,a.wbits=n,j$(e))},H$=(e,n)=>{if(!e)return ec;const i=new qme;e.state=i,i.strm=e,i.window=null,i.mode=ty;const a=$$(e,n);return a!==vh&&(e.state=null),a};let HA,zA,z$=!0;const Xme=e=>{if(z$){HA=new Int32Array(512),zA=new Int32Array(32);let n=0;for(;n<144;)e.lens[n++]=8;for(;n<256;)e.lens[n++]=9;for(;n<280;)e.lens[n++]=7;for(;n<288;)e.lens[n++]=8;for(ug(1,e.lens,0,288,HA,0,e.work,{bits:9}),n=0;n<32;)e.lens[n++]=5;ug(2,e.lens,0,32,zA,0,e.work,{bits:5}),z$=!1}e.lencode=HA,e.lenbits=9,e.distcode=zA,e.distbits=5},W$=(e,n,i,a)=>{let l;const u=e.state;return u.window===null&&(u.wsize=1<<u.wbits,u.wnext=0,u.whave=0,u.window=new Uint8Array(u.wsize)),a>=u.wsize?(u.window.set(n.subarray(i-u.wsize,i),0),u.wnext=0,u.whave=u.wsize):(l=u.wsize-u.wnext,l>a&&(l=a),u.window.set(n.subarray(i-a,i-a+l),u.wnext),(a-=l)?(u.window.set(n.subarray(i-a,i),0),u.wnext=a,u.whave=u.wsize):(u.wnext+=l,u.wnext===u.wsize&&(u.wnext=0),u.whave<u.wsize&&(u.whave+=l))),0};var Jme=(e,n)=>{let i,a,l,u,h,p,m,E,S,R,w,O,H,B,j,q,Y,Z,pe,he,re,Se,Ae=0;const Ne=new Uint8Array(4);let Be,nn;const sn=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Eh(e)||!e.output||!e.input&&e.avail_in!==0)return ec;i=e.state,i.mode===Zl&&(i.mode=VA),h=e.next_out,l=e.output,m=e.avail_out,u=e.next_in,a=e.input,p=e.avail_in,E=i.hold,S=i.bits,R=p,w=m,Se=vh;e:for(;;)switch(i.mode){case ty:if(i.wrap===0){i.mode=VA;break}for(;S<16;){if(p===0)break e;p--,E+=a[u++]<<S,S+=8}if(2&i.wrap&&E===35615){i.wbits===0&&(i.wbits=15),i.check=0,Ne[0]=255&E,Ne[1]=E>>>8&255,i.check=Mo(i.check,Ne,2,0),E=0,S=0,i.mode=16181;break}if(i.head&&(i.head.done=!1),!(1&i.wrap)||(((255&E)<<8)+(E>>8))%31){e.msg="incorrect header check",i.mode=Ai;break}if((15&E)!==U$){e.msg="unknown compression method",i.mode=Ai;break}if(E>>>=4,S-=4,re=8+(15&E),i.wbits===0&&(i.wbits=re),re>15||re>i.wbits){e.msg="invalid window size",i.mode=Ai;break}i.dmax=1<<i.wbits,i.flags=0,e.adler=i.check=1,i.mode=512&E?16189:Zl,E=0,S=0;break;case 16181:for(;S<16;){if(p===0)break e;p--,E+=a[u++]<<S,S+=8}if(i.flags=E,(255&To(i))!==U$){e.msg="unknown compression method",i.mode=Ai;break}if(57344&To(i)){e.msg="unknown header flags set",i.mode=Ai;break}i.head&&(i.head.text=E>>8&1),512&To(i)&&4&i.wrap&&(Ne[0]=255&E,Ne[1]=E>>>8&255,i.check=Mo(i.check,Ne,2,0)),E=0,S=0,i.mode=16182;case 16182:for(;S<32;){if(p===0)break e;p--,E+=a[u++]<<S,S+=8}i.head&&(i.head.time=E),512&To(i)&&4&i.wrap&&(Ne[0]=255&E,Ne[1]=E>>>8&255,Ne[2]=E>>>16&255,Ne[3]=E>>>24&255,i.check=Mo(i.check,Ne,4,0)),E=0,S=0,i.mode=16183;case 16183:for(;S<16;){if(p===0)break e;p--,E+=a[u++]<<S,S+=8}i.head&&(i.head.xflags=255&E,i.head.os=E>>8),512&To(i)&&4&i.wrap&&(Ne[0]=255&E,Ne[1]=E>>>8&255,i.check=Mo(i.check,Ne,2,0)),E=0,S=0,i.mode=16184;case 16184:if(1024&To(i)){for(;S<16;){if(p===0)break e;p--,E+=a[u++]<<S,S+=8}i.length=E,i.head&&(i.head.extra_len=E),512&To(i)&&4&i.wrap&&(Ne[0]=255&E,Ne[1]=E>>>8&255,i.check=Mo(i.check,Ne,2,0)),E=0,S=0}else i.head&&(i.head.extra=null);i.mode=16185;case 16185:if(1024&To(i)&&(O=i.length,O>p&&(O=p),O&&(i.head&&(re=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Uint8Array(i.head.extra_len)),i.head.extra.set(a.subarray(u,u+O),re)),512&To(i)&&4&i.wrap&&(i.check=Mo(i.check,a,O,u)),p-=O,u+=O,i.length-=O),i.length))break e;i.length=0,i.mode=16186;case 16186:if(2048&To(i)){if(p===0)break e;O=0;do re=a[u+O++],i.head&&re&&i.length<65536&&(i.head.name+=String.fromCharCode(re));while(re&&O<p);if(512&To(i)&&4&i.wrap&&(i.check=Mo(i.check,a,O,u)),p-=O,u+=O,re)break e}else i.head&&(i.head.name=null);i.length=0,i.mode=16187;case 16187:if(4096&To(i)){if(p===0)break e;O=0;do re=a[u+O++],i.head&&re&&i.length<65536&&(i.head.comment+=String.fromCharCode(re));while(re&&O<p);if(512&To(i)&&4&i.wrap&&(i.check=Mo(i.check,a,O,u)),p-=O,u+=O,re)break e}else i.head&&(i.head.comment=null);i.mode=16188;case 16188:if(512&To(i)){for(;S<16;){if(p===0)break e;p--,E+=a[u++]<<S,S+=8}if(4&i.wrap&&E!==(65535&i.check)){e.msg="header crc mismatch",i.mode=Ai;break}E=0,S=0}i.head&&(i.head.hcrc=To(i)>>9&1,i.head.done=!0),e.adler=i.check=0,i.mode=Zl;break;case 16189:for(;S<32;){if(p===0)break e;p--,E+=a[u++]<<S,S+=8}e.adler=i.check=B$(E),E=0,S=0,i.mode=ny;case ny:if(i.havedict===0)return e.next_out=h,e.avail_out=m,e.next_in=u,e.avail_in=p,i.hold=E,i.bits=S,Kme;e.adler=i.check=1,i.mode=Zl;case Zl:if(n===Wme||n===ey)break e;case VA:if(i.last){E>>>=7&S,S-=7&S,i.mode=$A;break}for(;S<3;){if(p===0)break e;p--,E+=a[u++]<<S,S+=8}switch(i.last=1&E,E>>>=1,S-=1,3&E){case 0:i.mode=16193;break;case 1:if(Xme(i),i.mode=ry,n===ey){E>>>=2,S-=2;break e}break;case 2:i.mode=16196;break;case 3:e.msg="invalid block type",i.mode=Ai}E>>>=2,S-=2;break;case 16193:for(E>>>=7&S,S-=7&S;S<32;){if(p===0)break e;p--,E+=a[u++]<<S,S+=8}if((65535&E)!=(E>>>16^65535)){e.msg="invalid stored block lengths",i.mode=Ai;break}if(i.length=65535&E,E=0,S=0,i.mode=jA,n===ey)break e;case jA:i.mode=16195;case 16195:if(O=i.length,O){if(O>p&&(O=p),O>m&&(O=m),O===0)break e;l.set(a.subarray(u,u+O),h),p-=O,u+=O,m-=O,h+=O,i.length-=O;break}i.mode=Zl;break;case 16196:for(;S<14;){if(p===0)break e;p--,E+=a[u++]<<S,S+=8}if(i.nlen=257+(31&E),E>>>=5,S-=5,i.ndist=1+(31&E),E>>>=5,S-=5,i.ncode=4+(15&E),E>>>=4,S-=4,i.nlen>286||i.ndist>30){e.msg="too many length or distance symbols",i.mode=Ai;break}i.have=0,i.mode=16197;case 16197:for(;i.have<i.ncode;){for(;S<3;){if(p===0)break e;p--,E+=a[u++]<<S,S+=8}i.lens[sn[i.have++]]=7&E,E>>>=3,S-=3}for(;i.have<19;)i.lens[sn[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,Be={bits:i.lenbits},Se=ug(0,i.lens,0,19,i.lencode,0,i.work,Be),i.lenbits=Be.bits,Se){e.msg="invalid code lengths set",i.mode=Ai;break}i.have=0,i.mode=16198;case 16198:for(;i.have<i.nlen+i.ndist;){for(;Ae=i.lencode[E&(1<<i.lenbits)-1],j=Ae>>>24,q=Ae>>>16&255,Y=65535&Ae,!(j<=S);){if(p===0)break e;p--,E+=a[u++]<<S,S+=8}if(Y<16)E>>>=j,S-=j,i.lens[i.have++]=Y;else{if(Y===16){for(nn=j+2;S<nn;){if(p===0)break e;p--,E+=a[u++]<<S,S+=8}if(E>>>=j,S-=j,i.have===0){e.msg="invalid bit length repeat",i.mode=Ai;break}re=i.lens[i.have-1],O=3+(3&E),E>>>=2,S-=2}else if(Y===17){for(nn=j+3;S<nn;){if(p===0)break e;p--,E+=a[u++]<<S,S+=8}E>>>=j,S-=j,re=0,O=3+(7&E),E>>>=3,S-=3}else{for(nn=j+7;S<nn;){if(p===0)break e;p--,E+=a[u++]<<S,S+=8}E>>>=j,S-=j,re=0,O=11+(127&E),E>>>=7,S-=7}if(i.have+O>i.nlen+i.ndist){e.msg="invalid bit length repeat",i.mode=Ai;break}for(;O--;)i.lens[i.have++]=re}}if(i.mode===Ai)break;if(i.lens[256]===0){e.msg="invalid code -- missing end-of-block",i.mode=Ai;break}if(i.lenbits=9,Be={bits:i.lenbits},Se=ug(1,i.lens,0,i.nlen,i.lencode,0,i.work,Be),i.lenbits=Be.bits,Se){e.msg="invalid literal/lengths set",i.mode=Ai;break}if(i.distbits=6,i.distcode=i.distdyn,Be={bits:i.distbits},Se=ug(2,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,Be),i.distbits=Be.bits,Se){e.msg="invalid distances set",i.mode=Ai;break}if(i.mode=ry,n===ey)break e;case ry:i.mode=iy;case iy:if(p>=6&&m>=258){e.next_out=h,e.avail_out=m,e.next_in=u,e.avail_in=p,i.hold=E,i.bits=S,Vme(e,w),h=e.next_out,l=e.output,m=e.avail_out,u=e.next_in,a=e.input,p=e.avail_in,E=i.hold,S=i.bits,i.mode===Zl&&(i.back=-1);break}for(i.back=0;Ae=i.lencode[E&(1<<i.lenbits)-1],j=Ae>>>24,q=Ae>>>16&255,Y=65535&Ae,!(j<=S);){if(p===0)break e;p--,E+=a[u++]<<S,S+=8}if(q&&!(240&q)){for(Z=j,pe=q,he=Y;Ae=i.lencode[he+((E&(1<<Z+pe)-1)>>Z)],j=Ae>>>24,q=Ae>>>16&255,Y=65535&Ae,!(Z+j<=S);){if(p===0)break e;p--,E+=a[u++]<<S,S+=8}E>>>=Z,S-=Z,i.back+=Z}if(E>>>=j,S-=j,i.back+=j,i.length=Y,q===0){i.mode=16205;break}if(32&q){i.back=-1,i.mode=Zl;break}if(64&q){e.msg="invalid literal/length code",i.mode=Ai;break}i.extra=15&q,i.mode=16201;case 16201:if(i.extra){for(nn=i.extra;S<nn;){if(p===0)break e;p--,E+=a[u++]<<S,S+=8}i.length+=E&(1<<i.extra)-1,E>>>=i.extra,S-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=16202;case 16202:for(;Ae=i.distcode[E&(1<<i.distbits)-1],j=Ae>>>24,q=Ae>>>16&255,Y=65535&Ae,!(j<=S);){if(p===0)break e;p--,E+=a[u++]<<S,S+=8}if(!(240&q)){for(Z=j,pe=q,he=Y;Ae=i.distcode[he+((E&(1<<Z+pe)-1)>>Z)],j=Ae>>>24,q=Ae>>>16&255,Y=65535&Ae,!(Z+j<=S);){if(p===0)break e;p--,E+=a[u++]<<S,S+=8}E>>>=Z,S-=Z,i.back+=Z}if(E>>>=j,S-=j,i.back+=j,64&q){e.msg="invalid distance code",i.mode=Ai;break}i.offset=Y,i.extra=15&q,i.mode=16203;case 16203:if(i.extra){for(nn=i.extra;S<nn;){if(p===0)break e;p--,E+=a[u++]<<S,S+=8}i.offset+=E&(1<<i.extra)-1,E>>>=i.extra,S-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){e.msg="invalid distance too far back",i.mode=Ai;break}i.mode=16204;case 16204:if(m===0)break e;if(O=w-m,i.offset>O){if(O=i.offset-O,O>i.whave&&i.sane){e.msg="invalid distance too far back",i.mode=Ai;break}O>i.wnext?(O-=i.wnext,H=i.wsize-O):H=i.wnext-O,O>i.length&&(O=i.length),B=i.window}else B=l,H=h-i.offset,O=i.length;O>m&&(O=m),m-=O,i.length-=O;do l[h++]=B[H++];while(--O);i.length===0&&(i.mode=iy);break;case 16205:if(m===0)break e;l[h++]=i.length,m--,i.mode=iy;break;case $A:if(i.wrap){for(;S<32;){if(p===0)break e;p--,E|=a[u++]<<S,S+=8}if(w-=m,e.total_out+=w,i.total+=w,4&i.wrap&&w&&(e.adler=i.check=To(i)?Mo(i.check,l,w,h-w):tg(i.check,l,w,h-w)),w=m,4&i.wrap&&(To(i)?E:B$(E))!==i.check){e.msg="incorrect data check",i.mode=Ai;break}E=0,S=0}i.mode=16207;case 16207:if(i.wrap&&To(i)){for(;S<32;){if(p===0)break e;p--,E+=a[u++]<<S,S+=8}if(4&i.wrap&&E!==(4294967295&i.total)){e.msg="incorrect length check",i.mode=Ai;break}E=0,S=0}i.mode=16208;case 16208:Se=Gme;break e;case Ai:Se=M$;break e;case 16210:return F$;default:return ec}return e.next_out=h,e.avail_out=m,e.next_in=u,e.avail_in=p,i.hold=E,i.bits=S,(i.wsize||w!==e.avail_out&&i.mode<Ai&&(i.mode<$A||n!==k$))&&W$(e,e.output,e.next_out,w-e.avail_out),R-=e.avail_in,w-=e.avail_out,e.total_in+=R,e.total_out+=w,i.total+=w,4&i.wrap&&w&&(e.adler=i.check=To(i)?Mo(i.check,l,w,e.next_out-w):tg(i.check,l,w,e.next_out-w)),e.data_type=i.bits+(i.last?64:0)+(i.mode===Zl?128:0)+(i.mode===ry||i.mode===jA?256:0),(R===0&&w===0||n===k$)&&Se===vh&&(Se=Yme),Se},eu={inflateReset:j$,inflateReset2:$$,inflateResetKeep:V$,inflateInit:e=>H$(e,15),inflateInit2:H$,inflate:Jme,inflateEnd:e=>{if(Eh(e))return ec;let n=e.state;return n.window&&(n.window=null),e.state=null,vh},inflateGetHeader:(e,n)=>{if(Eh(e))return ec;const i=e.state;return 2&i.wrap?(i.head=n,n.done=!1,vh):ec},inflateSetDictionary:(e,n)=>{const i=n.length;let a,l,u;return Eh(e)?ec:(a=e.state,a.wrap!==0&&a.mode!==ny?ec:a.mode===ny&&(l=1,l=tg(l,n,i,0),l!==a.check)?M$:(u=W$(e,n,i,i),u?(a.mode=16210,F$):(a.havedict=1,vh)))},inflateInfo:"pako inflate (from Nodeca project)"},Qme=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const G$=Object.prototype.toString,{Z_NO_FLUSH:Zme,Z_FINISH:e0e,Z_OK:dg,Z_STREAM_END:WA,Z_NEED_DICT:GA,Z_STREAM_ERROR:t0e,Z_DATA_ERROR:K$,Z_MEM_ERROR:n0e}=Sp;function hg(e){this.options=XS.assign({chunkSize:65536,windowBits:15,to:""},e||{});const n=this.options;n.raw&&n.windowBits>=0&&n.windowBits<16&&(n.windowBits=-n.windowBits,n.windowBits===0&&(n.windowBits=-15)),!(n.windowBits>=0&&n.windowBits<16)||e&&e.windowBits||(n.windowBits+=32),n.windowBits>15&&n.windowBits<48&&!(15&n.windowBits)&&(n.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new D$,this.strm.avail_out=0;let i=eu.inflateInit2(this.strm,n.windowBits);if(i!==dg)throw new Error(fh[i]);if(this.header=new Qme,eu.inflateGetHeader(this.strm,this.header),n.dictionary&&(typeof n.dictionary=="string"?n.dictionary=cg.string2buf(n.dictionary):G$.call(n.dictionary)==="[object ArrayBuffer]"&&(n.dictionary=new Uint8Array(n.dictionary)),n.raw&&(i=eu.inflateSetDictionary(this.strm,n.dictionary),i!==dg)))throw new Error(fh[i])}function KA(e,n){const i=new hg(n);if(i.push(e),i.err)throw i.msg||fh[i.err];return i.result}hg.prototype.push=function(e,n){const i=this.strm,a=this.options.chunkSize,l=this.options.dictionary;let u,h,p;if(this.ended)return!1;for(h=n===~~n?n:n===!0?e0e:Zme,G$.call(e)==="[object ArrayBuffer]"?i.input=new Uint8Array(e):i.input=e,i.next_in=0,i.avail_in=i.input.length;;){for(i.avail_out===0&&(i.output=new Uint8Array(a),i.next_out=0,i.avail_out=a),u=eu.inflate(i,h),u===GA&&l&&(u=eu.inflateSetDictionary(i,l),u===dg?u=eu.inflate(i,h):u===K$&&(u=GA));i.avail_in>0&&u===WA&&i.state.wrap>0&&e[i.next_in]!==0;)eu.inflateReset(i),u=eu.inflate(i,h);switch(u){case t0e:case K$:case GA:case n0e:return this.onEnd(u),this.ended=!0,!1}if(p=i.avail_out,i.next_out&&(i.avail_out===0||u===WA))if(this.options.to==="string"){let m=cg.utf8border(i.output,i.next_out),E=i.next_out-m,S=cg.buf2string(i.output,m);i.next_out=E,i.avail_out=a-E,E&&i.output.set(i.output.subarray(m,m+E),0),this.onData(S)}else this.onData(i.output.length===i.next_out?i.output:i.output.subarray(0,i.next_out));if(u!==dg||p!==0){if(u===WA)return u=eu.inflateEnd(this.strm),this.onEnd(u),this.ended=!0,!0;if(i.avail_in===0)break}}return!0},hg.prototype.onData=function(e){this.chunks.push(e)},hg.prototype.onEnd=function(e){e===dg&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=XS.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var r0e={Inflate:hg,inflate:KA,inflateRaw:function(e,n){return(n=n||{}).raw=!0,KA(e,n)},ungzip:KA,constants:Sp};const{Deflate:_3e,deflate:i0e,deflateRaw:S3e,gzip:y3e}=Bme,{Inflate:C3e,inflate:o0e,inflateRaw:b3e,ungzip:T3e}=r0e;var a0e=i0e,s0e=o0e,Y$=function(e){return e[e.ONE_BYTE=0]="ONE_BYTE",e[e.TWO_BYTE=1]="TWO_BYTE",e}(Y$||{});class c0e{constructor(){W(this,"_sequence",0),W(this,"_startTime",Date.now()),W(this,"isUseOneByte",!0)}get startTime(){const n=Date.now()-this._startTime;return n<Math.pow(2,16)?n:(this._startTime+=Math.pow(2,16),this.startTime)}get sequence(){return this._sequence<Math.pow(2,32)?this._sequence++:(this._sequence-=Math.pow(2,32),this.sequence)}serialize(n){const i={commonPacketHeader:{length:0,reserved:0,extension:0,sequence:this.sequence},commonStreamHeader:this.startTime,extension:void 0,payload:n};if(n.byteLength>128){const p=new Uint8Array(4);p.set([1,0,0,0]);const m={id:0,length:4,data:p.buffer},E={profile:this.isUseOneByte?0:1,length:this.isUseOneByte?5:6,datas:[m]};i.commonPacketHeader.extension=1,i.extension=E,i.payload=this.compress(n),i.commonPacketHeader.length=8+(i.extension.length+2)+i.payload.byteLength}else i.commonPacketHeader.length=8+i.payload.byteLength;Q("SHOW_DATASTREAM2_LOG")&&k.debug("send data header: ".concat(JSON.stringify(i.commonPacketHeader)));const a=new ArrayBuffer(i.commonPacketHeader.length),l=new Uint8Array(a),u=new DataView(a);let h=0;if(u.setUint16(h,i.commonPacketHeader.extension<<15|i.commonPacketHeader.reserved<<14|i.commonPacketHeader.length,!0),h+=2,u.setUint32(h,i.commonPacketHeader.sequence,!0),h+=4,u.setUint16(h,i.commonStreamHeader,!0),h+=2,i.extension){const p=this.serializeExtension(i.extension);l.set(new Uint8Array(p),h),h+=p.byteLength}if(l.set(new Uint8Array(i.payload),h),h+=i.payload.byteLength,h!==i.commonPacketHeader.length)throw Error("serialize error!");return a}deserialize(n){if(n.byteLength<4)return new ArrayBuffer(0);const i=new DataView(n);let a=0;const l=i.getUint16(a,!0);a+=2;const u={length:16383&l,reserved:(16384&l)>>14,extension:(32768&l)>>15,sequence:i.getUint16(a+2,!0)<<16|i.getUint16(a,!0)};let h,p;if(a+=4,Q("SHOW_DATASTREAM2_LOG")&&k.debug("receive data header: ".concat(JSON.stringify(u))),i.getUint16(a,!0),a+=2,u.extension){p=this.deserializeExtension(n.slice(a)),a+=2+p.length,h=n.slice(a);let m=!1;if(p.datas.length>0){const E=p.datas.find(S=>S.id===0);E&&(m=(1&new DataView(E.data).getUint32(0,!0))==1)}h=m?this.decompress(h):h}else h=n.slice(8);return h}serializeExtension(n){const{profile:i,length:a,datas:l}=n,u=new ArrayBuffer(a+2),h=new Uint8Array(u),p=new DataView(u);let m=0;if(p.setUint8(m++,i),p.setUint8(m++,a),l.forEach(E=>{i?(p.setUint8(m++,E.id),p.setUint8(m++,E.length),h.set(new Uint8Array(E.data),m),m+=E.data.byteLength):(p.setUint8(m++,E.id|E.length<<4),h.set(new Uint8Array(E.data),m),m+=E.data.byteLength)}),m!==a+2)throw Error("serialize extension error, is ".concat(m,"!==").concat(a+2));return u}deserializeExtension(n){const i=new DataView(n);let a=0;const l=i.getUint8(a);a++;const u=i.getUint8(a);a++;const h=l===Y$.TWO_BYTE,p=[],m=new DataView(n,2);let E=0;for(;E<u;){let S=0,R=0,w=new ArrayBuffer(0);h?(S=m.getUint8(E),E++,R=m.getUint8(E),E++):(S=15&m.getUint8(E),R=m.getUint8(E)>>4,E++),R>0&&(w=m.buffer.slice(E+2,E+2+R),E+=w.byteLength),p.push({id:S,length:R,data:w})}if(E!==u)throw Error("parse error");return{profile:l,length:u,datas:p}}decompress(n){return s0e(new Uint8Array(n))}compress(n){return a0e(new Uint8Array(n))}}const l0e={name:"DataStream",create:(e,n)=>{const i=n?new _fe(e):new Sfe(e);return i.useDataStream(new c0e),i}};class u0e extends br{constructor(n,i,a){super(),W(this,"ws",void 0),W(this,"requestId",1),W(this,"heartBeatTimer",void 0),W(this,"joinInfo",void 0),W(this,"clientId",void 0),W(this,"onOpen",()=>{this.emit("open"),this.startHeartBeatCheck()}),W(this,"onClose",l=>{this.emit("close"),this.dispose()}),W(this,"onMessage",l=>{const u=JSON.parse(l.data);if(!u||u.command!=="serverResponse"||!u.requestId)return u&&u.command==="serverStatus"&&u.serverStatus&&u.serverStatus.command?(this.emit("status",u.serverStatus),void this.emit(u.serverStatus.command,u.serverStatus)):void 0;this.emit("req_".concat(u.requestId),u)}),this.joinInfo=n,this.clientId=i,this.ws=new F0("cross-channel-".concat(this.clientId),a),this.ws.on(Xt.RECONNECTING,()=>{this.ws.reconnectMode="retry",this.emit("reconnecting")}),this.ws.on(Xt.CONNECTED,this.onOpen),this.ws.on(Xt.ON_MESSAGE,this.onMessage),this.ws.on(Xt.CLOSED,this.onClose)}isConnect(){return this.ws.state==="connected"}sendMessage(n){const i=this.requestId++;return n.requestId=i,n.seq=i,this.ws.sendMessage(n),i}waitStatus(n){return new et((i,a)=>{const l=window.setTimeout(()=>{a(new Ce(X.TIMEOUT,"wait status timeout, status: ".concat(n)))},5e3);this.once(n,u=>{window.clearTimeout(l),u.state&&u.state!==0?a(new Ce(X.CROSS_CHANNEL_WAIT_STATUS_ERROR,"wait status error, status: ".concat(n))):i(void 0)}),this.once("dispose",()=>{window.clearTimeout(l),a(new Ce(X.WS_ABORT))})})}async request(n){if(this.ws.state==="closed")throw new Ce(X.WS_DISCONNECT);const i=()=>new et((h,p)=>{this.ws.once(Xt.CLOSED,()=>p(new Ce(X.WS_ABORT))),this.ws.once(Xt.CONNECTED,h)});this.ws.state!=="connected"&&await i();const a=this.sendMessage(n),l=new et((h,p)=>{const m=()=>{p(new Ce(X.WS_ABORT))};this.ws.once(Xt.RECONNECTING,m),this.ws.once(Xt.CLOSED,m),this.once("req_".concat(a),h),Pi(3e3).then(()=>{this.removeAllListeners("req_".concat(a)),this.ws.off(Xt.RECONNECTING,m),this.ws.off(Xt.CLOSED,m),p(new Ce(X.TIMEOUT,"cross channel ws request timeout"))})}),u=await l;if(!u||u.code!==200)throw new Ce(X.CROSS_CHANNEL_SERVER_ERROR_RESPONSE,"response: ".concat(JSON.stringify(u)));return u}async connect(n){this.ws.removeAllListeners(Xt.REQUEST_NEW_URLS),this.ws.on(Xt.REQUEST_NEW_URLS,i=>{i(n)}),await this.ws.init(n)}dispose(){this.clearHeartBeatCheck(),this.emit("dispose"),this.removeAllListeners(),this.ws.close()}sendPing(n){const i=this.requestId++;return n.requestId=i,this.ws.sendMessage(n),i}startHeartBeatCheck(){this.heartBeatTimer&&window.clearInterval(this.heartBeatTimer),this.heartBeatTimer=window.setInterval(()=>{this.sendPing({command:"ping",appId:this.joinInfo.appId,cname:this.joinInfo.cname,uid:this.joinInfo.uid.toString(),sid:this.joinInfo.sid,ts:+new Date,requestId:0})},3e3)}clearHeartBeatCheck(){window.clearInterval(this.heartBeatTimer),this.heartBeatTimer=void 0}}class d0e extends br{set state(n){n!==this._state&&(n!==la.RELAY_STATE_FAILURE&&(this.errorCode=op.RELAY_OK),this.emit("state",n,this.errorCode),this._state=n)}get state(){return this._state}constructor(n,i,a,l,u){super(),W(this,"joinInfo",void 0),W(this,"sid",void 0),W(this,"clientId",void 0),W(this,"cancelToken",Yo.CancelToken.source()),W(this,"workerToken",void 0),W(this,"requestId",0),W(this,"signal",void 0),W(this,"prevChannelMediaConfig",void 0),W(this,"httpRetryConfig",void 0),W(this,"_resolution",void 0),W(this,"_state",la.RELAY_STATE_IDLE),W(this,"errorCode",op.RELAY_OK),W(this,"onStatus",h=>{k.debug("[".concat(this.clientId,"] ChannelMediaStatus: ").concat(JSON.stringify(h))),h&&h.command&&(h.command==="onAudioPacketReceived"&&this.emit("event",Yl.PACKET_RECEIVED_AUDIO_FROM_SRC),h.command==="onVideoPacketReceived"&&this.emit("event",Yl.PACKET_RECEIVED_VIDEO_FROM_SRC),h.command==="onSrcTokenPrivilegeDidExpire"&&(this.errorCode=op.SRC_TOKEN_EXPIRED,this.state=la.RELAY_STATE_FAILURE),h.command==="onDestTokenPrivilegeDidExpire"&&(this.errorCode=op.DEST_TOKEN_EXPIRED,this.state=la.RELAY_STATE_FAILURE))}),W(this,"onReconnect",async()=>{k.debug("[".concat(this.clientId,"] ChannelMediaSocket disconnect, reconnecting")),this.emit("event",Yl.NETWORK_DISCONNECTED),this.state=la.RELAY_STATE_IDLE,this.prevChannelMediaConfig&&this.sendStartRelayMessage(this.prevChannelMediaConfig).catch(h=>{this.state!==la.RELAY_STATE_IDLE&&(k.error("auto restart channel media relay failed",h.toString()),this.errorCode=op.SERVER_CONNECTION_LOST,this.state=la.RELAY_STATE_FAILURE)})}),this.joinInfo=n,this.clientId=i,this.sid=Zd(),this.signal=new u0e(this.joinInfo,this.clientId,a),this.httpRetryConfig=l,this._resolution=u}async startChannelMediaRelay(n){if(this.state!==la.RELAY_STATE_IDLE)throw new Ce(X.INVALID_OPERATION);this.state=la.RELAY_STATE_CONNECTING,await this.connect(),k.debug("[".concat(this.clientId,"] startChannelMediaRelay: connect success"));try{await this.sendStartRelayMessage(n)}catch(i){throw i.data&&i.data.serverResponse&&i.data.serverResponse.command==="SetSourceChannel"?new Ce(X.CROSS_CHANNEL_FAILED_JOIN_SRC):i.data&&i.data.serverResponse&&i.serverResponse.command==="SetDestChannelStatus"?new Ce(X.CROSS_CHANNEL_FAILED_JOIN_DEST):i.data&&i.data.serverResponse&&i.serverResponse.command==="StartPacketTransfer"?new Ce(X.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST):i}this.prevChannelMediaConfig=n}async updateChannelMediaRelay(n){if(this.state!==la.RELAY_STATE_RUNNING)throw new Ce(X.INVALID_OPERATION);await this.sendUpdateMessage(n),this.prevChannelMediaConfig=n}async setVideoProfile(n){if(this._resolution=n,this.state!==la.RELAY_STATE_RUNNING)throw new Ce(X.INVALID_OPERATION);const i=this.genMessage(ko.SetVideoProfile);await this.signal.request(i),k.debug("[".concat(this.clientId,"] startChannelMediaRelay: setVideoProfile success"))}async stopChannelMediaRelay(){await this.sendStopRelayMessage(),k.debug("[".concat(this.clientId,"] stopChannelMediaRelay: send stop message success")),this.state=la.RELAY_STATE_IDLE,this.dispose()}dispose(){k.debug("[".concat(this.clientId,"] disposeChannelMediaRelay")),this.cancelToken.cancel(),this.cancelToken=Yo.CancelToken.source(),this.state=la.RELAY_STATE_IDLE,this.emit("dispose"),this.signal.dispose(),this.prevChannelMediaConfig=void 0}async connect(){const n=await Rpe(this.joinInfo,this.cancelToken.token,this.httpRetryConfig);this.workerToken=n.workerToken,await this.signal.connect(n.addressList),this.emit("event",Yl.NETWORK_CONNECTED),this.signal.on("status",this.onStatus),this.signal.on("reconnecting",this.onReconnect)}async sendStartRelayMessage(n){const i=this.genMessage(ko.StopPacketTransfer);await this.signal.request(i),await this.signal.waitStatus("Normal Quit"),k.debug("[".concat(this.clientId,"] startChannelMediaRelay: StopPacketTransfer success"));const a=this.genMessage(ko.SetSdkProfile,n);await this.signal.request(a),k.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSdkProfile success"));const l=this.genMessage(ko.SetSourceChannel,n);await this.signal.request(l),await this.signal.waitStatus("SetSourceChannelStatus"),this.emit("event",Yl.PACKET_JOINED_SRC_CHANNEL),k.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSourceChannel success"));const u=this.genMessage(ko.SetSourceUserId,n);await this.signal.request(u),k.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSourceUserId success"));const h=this.genMessage(ko.SetDestChannel,n);await this.signal.request(h),await this.signal.waitStatus("SetDestChannelStatus"),this.emit("event",Yl.PACKET_JOINED_DEST_CHANNEL),k.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetDestChannel success"));const p=this.genMessage(ko.StartPacketTransfer,n);await this.signal.request(p),this.emit("event",Yl.PACKET_SENT_TO_DEST_CHANNEL),this.state=la.RELAY_STATE_RUNNING,k.debug("[".concat(this.clientId,"] startChannelMediaRelay: StartPacketTransfer success")),this.setVideoProfile(this._resolution)}async sendUpdateMessage(n){const i=this.genMessage(ko.UpdateDestChannel,n);await this.signal.request(i),this.emit("event",Yl.PACKET_UPDATE_DEST_CHANNEL),k.debug("[".concat(this.clientId,"] sendUpdateMessage: UpdateDestChannel success"))}async sendStopRelayMessage(){const n=this.genMessage(ko.StopPacketTransfer);await this.signal.request(n),k.debug("[".concat(this.clientId,"] sendStopRelayMessage: StopPacketTransfer success"))}genMessage(n,i){const a=[],l=[],u=[];this.requestId+=1;const h={appId:this.joinInfo.appId,cname:this.joinInfo.cname,uid:this.joinInfo.uid.toString(),sdkVersion:cs,sid:this.sid,ts:Date.now(),requestId:this.requestId,seq:this.requestId,allocate:!0,clientRequest:{}};h.sdkVersion==="4.24.0"&&(h.sdkVersion="0.0.1");let p=null,m=null;switch(n){case ko.SetSdkProfile:return h.clientRequest={command:"SetSdkProfile",type:"multi_channel"},h;case ko.SetSourceChannel:if(m=i&&i.getSrcChannelMediaInfo(),!m)throw new Ce(X.UNEXPECTED_ERROR,"can not find source config");return h.clientRequest={command:"SetSourceChannel",uid:"0",channelName:m.channelName,token:m.token||this.joinInfo.appId},h;case ko.SetSourceUserId:if(m=i&&i.getSrcChannelMediaInfo(),!m)throw new Ce(X.UNEXPECTED_ERROR,"can not find source config");return h.clientRequest={command:"SetSourceUserId",uid:m.uid+""},h;case ko.SetDestChannel:if(p=i&&i.getDestChannelMediaInfo(),!p)throw new Ce(X.UNEXPECTED_ERROR,"can not find dest config");return p.forEach(E=>{a.push(E.channelName),l.push(E.uid+""),u.push(E.token||this.joinInfo.appId)}),h.clientRequest={command:"SetDestChannel",channelName:a,uid:l,token:u},h;case ko.StartPacketTransfer:return h.clientRequest={command:"StartPacketTransfer"},h;case ko.Reconnect:return h.clientRequest={command:"Reconnect"},h;case ko.StopPacketTransfer:return h.clientRequest={command:"StopPacketTransfer"},h;case ko.UpdateDestChannel:if(p=i&&i.getDestChannelMediaInfo(),!p)throw new Ce(X.UNEXPECTED_ERROR,"can not find dest config");return p.forEach(E=>{a.push(E.channelName),l.push(E.uid+""),u.push(E.token||this.joinInfo.appId)}),h.clientRequest={command:"UpdateDestChannel",channelName:a,uid:l,token:u},h;case ko.SetVideoProfile:h.clientRequest={command:"SetVideoProfile",width:this._resolution.width,height:this._resolution.height}}return h}}const h0e={name:"ChannelMediaRelay",create:function(e){return new d0e(e.joinInfo,e.clientId,e.websocketRetryConfig||ei,e.httpRetryConfig||ei,e.resolution)}};function q$(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),i.push.apply(i,a)}return i}function fg(e){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?q$(Object(i),!0).forEach(function(a){W(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):q$(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}class f0e extends br{constructor(n,i,a,l){super(),W(this,"spec",void 0),W(this,"token",void 0),W(this,"websocket",void 0),W(this,"pingpongTimer",void 0),W(this,"reconnectMode","retry"),W(this,"serviceMode",void 0),W(this,"reqId",0),W(this,"commandReqId",0),W(this,"handleWebSocketOpen",()=>{this.reconnectMode="retry",this.startPingPong()}),W(this,"handleWebSocketMessage",u=>{if(!u.data)return;const h=JSON.parse(u.data);h.requestId?this.emit("@".concat(h.requestId,"-").concat(h.sid),h):(ct.workerEvent(this.spec.sid,{actionType:"status",serverCode:h.code,workerType:this.serviceMode===ml.TRANSCODE?1:2}),this.emit(ju.PUBLISH_STREAM_STATUS,h))}),this.spec=i,this.token=n,this.serviceMode=l,this.websocket=new F0("live-streaming",a),this.websocket.on(Xt.CONNECTED,this.handleWebSocketOpen),this.websocket.on(Xt.ON_MESSAGE,this.handleWebSocketMessage),this.websocket.on(Xt.REQUEST_NEW_URLS,(u,h)=>{zi(this,ju.REQUEST_NEW_ADDRESS).then(u).catch(h)}),this.websocket.on(Xt.RECONNECTING,()=>{this.websocket.reconnectMode=this.reconnectMode})}init(n){return this.websocket.init(n)}async request(n,i,a,l){this.reqId+=1,n==="request"&&(this.commandReqId+=1);const u=this.commandReqId,h=this.reqId;if(!h||!this.websocket)throw new Ce(X.UNEXPECTED_ERROR);const p=fg({command:n,sdkVersion:cs==="4.24.0"?"0.0.1":cs,seq:h,requestId:h,allocate:a,cname:this.spec.cname,appId:this.spec.appId,sid:this.spec.sid,uid:this.spec.uid.toString(),ts:Math.floor(Date.now()/1e3)},i);if(this.websocket.state==="closed")throw new Ce(X.WS_DISCONNECT);const m=()=>new et((w,O)=>{this.websocket.once(Xt.CLOSED,()=>O(new Ce(X.WS_ABORT))),this.websocket.once(Xt.CONNECTED,w)});this.websocket.state!=="connected"&&await m(),p.clientRequest&&(p.clientRequest.workerToken=this.token);const E=new et((w,O)=>{const H=()=>{O(new Ce(X.WS_ABORT))};this.websocket.once(Xt.RECONNECTING,H),this.websocket.once(Xt.CLOSED,H),this.once("@".concat(h,"-").concat(this.spec.sid),B=>{w(B)})});l&&ct.workerEvent(this.spec.sid,fg(fg({},l),{},{requestId:u,actionType:"request",payload:JSON.stringify(i.clientRequest),serverCode:0,code:0}));const S=Date.now();this.websocket.sendMessage(p);let R=null;try{R=await E}catch(w){if(this.websocket.state==="closed")throw w;return await m(),await this.request(n,i,a)}return l&&ct.workerEvent(this.spec.sid,fg(fg({},l),{},{requestId:u,actionType:"response",payload:JSON.stringify(R.serverResponse),serverCode:R.code,success:R.code===200,responseTime:Date.now()-S})),R.code!==200&&this.handleResponseError(R),R}tryNextAddress(){this.reconnectMode="tryNext",this.websocket.reconnect("tryNext")}close(){const n=cs==="4.24.0"?"0.0.1":cs;this.reqId+=1,this.websocket.state==="connected"?(this.websocket.sendMessage({command:"request",appId:this.spec.appId,cname:this.spec.cname,uid:this.spec.uid.toString(),sdkVersion:n,sid:this.spec.sid,seq:this.reqId,ts:Math.floor(Date.now()/1e3),requestId:this.reqId,clientRequest:{command:"DestroyWorker"}}),this.websocket.close(!1,!0)):this.websocket.close(!1),this.pingpongTimer&&(window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0)}handleResponseError(n){switch(n.code){case di.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM:return void k.warning("live stream response already exists stream");case di.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR:case di.LIVE_STREAM_RESPONSE_BAD_STREAM:case di.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR:return new Ce(X.LIVE_STREAMING_INVALID_ARGUMENT,"",{code:n.code}).throw();case di.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST:if(n.serverResponse.command==="UnpublishStream")return;throw new Ce(X.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case di.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED:return new Ce(X.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED,"",{code:n.code}).throw();case di.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:{const i=new Ce(X.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE);return this.emit(ju.WARNING,i,n.serverResponse.url)}case di.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN:{const i=new Ce(X.LIVE_STREAMING_WARN_FREQUENT_REQUEST);return this.emit(ju.WARNING,i,n.serverResponse.url)}case di.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH:throw new Ce(X.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case di.LIVE_STREAM_RESPONSE_NOT_SUPPORTED:return new Ce(X.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED,"",{code:n.code}).throw();case di.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM:{const i=new Ce(X.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT);return this.emit(ju.WARNING,i,n.serverResponse.url)}case di.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR:return new Ce(X.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:n.code}).throw();case di.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT:throw new Ce(X.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream resource limit",{retry:!0,changeAddress:!0});case di.LIVE_STREAM_RESPONSE_WORKER_LOST:case di.LIVE_STREAM_RESPONSE_WORKER_QUIT:if(n.serverResponse.command==="UnpublishStream")return;throw new Ce(X.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case di.ERROR_FAIL_SEND_MESSAGE:if(n.serverResponse.command==="UnpublishStream")return;if(n.serverResponse.command==="UpdateTranscoding"||n.serverResponse.command==="ControlStream")return new Ce(X.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{code:n.code}).throw();throw new Ce(X.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case di.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case di.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case di.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case di.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:return new Ce(X.LIVE_STREAMING_CDN_ERROR,"",{code:n.code}).throw()}}startPingPong(){this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(()=>{this.websocket.state==="connected"&&this.request("ping",{}).catch(G_)},6e3)}}function X$(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),i.push.apply(i,a)}return i}function ua(e){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?X$(Object(i),!0).forEach(function(a){W(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):X$(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}class p0e extends br{constructor(n){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ei,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ei;super(),W(this,"onLiveStreamWarning",void 0),W(this,"onLiveStreamError",void 0),W(this,"spec",void 0),W(this,"retryTimeout",1e4),W(this,"connection",void 0),W(this,"httpRetryConfig",void 0),W(this,"wsRetryConfig",void 0),W(this,"streamingTasks",new Map),W(this,"isStartingStreamingTask",!1),W(this,"taskMutex",new qi("live-streaming")),W(this,"cancelToken",Yo.CancelToken.source()),W(this,"transcodingConfig",void 0),W(this,"uapResponse",void 0),W(this,"lastTaskId",1),W(this,"statusError",new Map),this.spec=n,this.httpRetryConfig=a,this.wsRetryConfig=i}async setTranscodingConfig(n){const i=ua(ua({},rpe),n);i.videoCodecProfile!==66&&i.videoCodecProfile!==77&&i.videoCodecProfile!==100&&(k.debug("[".concat(this.spec.clientId,"] set transcoding config, fix video codec profile: ").concat(i.videoCodecProfile," -> 100")),i.videoCodecProfile=100),i.transcodingUsers||(i.transcodingUsers=i.userConfigs),i.transcodingUsers&&(i.transcodingUsers=i.transcodingUsers.map(h=>ua(ua(ua({},npe),h),{},{zOrder:h.zOrder?h.zOrder+1:1}))),function(h){xr(h.width)||Yn(h.width,"config.width",0,1e4),xr(h.height)||Yn(h.height,"config.height",0,1e4),xr(h.videoBitrate)||Yn(h.videoBitrate,"config.videoBitrate",1,1e6),xr(h.videoFrameRate)||Yn(h.videoFrameRate,"config.videoFrameRate"),xr(h.lowLatency)||wc(h.lowLatency,"config.lowLatency"),xr(h.audioSampleRate)||vi(h.audioSampleRate,"config.audioSampleRate",[32e3,44100,48e3]),xr(h.audioBitrate)||Yn(h.audioBitrate,"config.audioBitrate",1,128),xr(h.audioChannels)||vi(h.audioChannels,"config.audioChannels",[1,2,3,4,5]),xr(h.videoGop)||Yn(h.videoGop,"config.videoGop"),xr(h.videoCodecProfile)||vi(h.videoCodecProfile,"config.videoCodecProfile",[66,77,100]),xr(h.userCount)||Yn(h.userCount,"config.userCount",0,17),xr(h.backgroundColor)||Yn(h.backgroundColor,"config.backgroundColor",0,16777215),xr(h.userConfigExtraInfo)||Ni(h.userConfigExtraInfo,"config.userConfigExtraInfo",0,4096,!1),h.transcodingUsers&&!xr(h.transcodingUsers)&&(Kl(h.transcodingUsers,"config.transcodingUsers"),h.transcodingUsers.forEach((p,m)=>{gS(p.uid),xr(p.x)||Yn(p.x,"transcodingUser[".concat(m,"].x"),0,1e4),xr(p.y)||Yn(p.y,"transcodingUser[".concat(m,"].y"),0,1e4),xr(p.width)||Yn(p.width,"transcodingUser[".concat(m,"].width"),0,1e4),xr(p.height)||Yn(p.height,"transcodingUser[".concat(m,"].height"),0,1e4),xr(p.zOrder)||Yn(p.zOrder-1,"transcodingUser[".concat(m,"].zOrder"),0,100),xr(p.alpha)||Yn(p.alpha,"transcodingUser[".concat(m,"].alpha"),0,1,!1)})),xr(h.watermark)||HI(h.watermark,"watermark"),xr(h.backgroundImage)||HI(h.backgroundImage,"backgroundImage"),h.images&&!xr(h.images)&&(Kl(h.images,"config.images"),h.images.forEach((p,m)=>{HI(p,"images[".concat(m,"]"))}))}(i);const a=[];i.images&&a.push(...i.images.map(h=>ua(ua(ua({},$I),h),{},{zOrder:255}))),i.backgroundImage&&(a.push(ua(ua(ua({},$I),i.backgroundImage),{},{zOrder:0})),delete i.backgroundImage),i.watermark&&(a.push(ua(ua(ua({},$I),i.watermark),{},{zOrder:255})),delete i.watermark),i.images=a,i.transcodingUsers&&(i.userConfigs=i.transcodingUsers.map(h=>ua({},h)),i.userCount=i.transcodingUsers.length,delete i.transcodingUsers);const l=(i.userConfigs||[]).map(h=>typeof h.uid=="number"?et.resolve(h.uid):S8(h.uid,this.spec,this.cancelToken.token,this.httpRetryConfig));if((await et.all(l)).forEach((h,p)=>{i.userConfigs&&i.userConfigs[p]&&(i.userConfigs[p].uid=h)}),this.transcodingConfig=i,this.connection)try{var u;const h=await this.connection.request("request",{clientRequest:{command:"UpdateTranscoding",transcodingConfig:this.transcodingConfig}},!1,{command:"UpdateTranscoding",workerType:1,requestByUser:!0,tid:Array.from(ba(u=this.streamingTasks).call(u)).map(p=>p.taskId).join("#")});k.debug("[".concat(this.spec.clientId,"] update live transcoding config success, code: ").concat(h.code,", config:"),JSON.stringify(this.transcodingConfig))}catch(h){if(!h.data||!h.data.retry)throw h;h.data.changeAddress&&this.connection.tryNextAddress(),this.streamingTasks.forEach(p=>{k.warning("[".concat(this.spec.clientId,"] live streaming receive error"),h.toString(),"try to republish",p.url),this.startLiveStreamingTask(p.url,p.mode,h).then(()=>{k.debug("[".concat(this.spec.clientId,"] live streaming republish ").concat(p.url," success"))}).catch(m=>{k.error("[".concat(this.spec.clientId,"] live streaming republish failed"),p.url,m.toString()),this.onLiveStreamError&&this.onLiveStreamError(p.url,m)})})}}async startLiveStreamingTask(n,i,a){if(!this.transcodingConfig&&i===ml.TRANSCODE)throw new Ce(X.INVALID_OPERATION,"[LiveStreaming] no transcoding config found, can not start transcoding streaming task");const l={command:"PublishStream",ts:Date.now(),url:n,uid:this.spec.uid.toString(),autoDestroyTime:100,acceptImageTimeout:!0};k.debug("[".concat(this.spec.clientId,"] start live streaming ").concat(n,", mode: ").concat(i));const u=await this.taskMutex.lock();if(!this.connection&&a)return void u();if(this.streamingTasks.get(n)&&!a)return u(),new Ce(X.LIVE_STREAMING_TASK_CONFLICT).throw();try{this.connection||(this.connection=await this.connect(i))}catch(p){throw u(),p}switch(i){case ml.TRANSCODE:l.transcodingConfig=ua({},this.transcodingConfig);case ml.RAW:}this.uapResponse&&this.uapResponse.vid&&(l.vid=this.uapResponse.vid),this.isStartingStreamingTask=!0;const h=this.lastTaskId++;try{const p=new et((E,S)=>{Pi(this.retryTimeout).then(()=>{if(a)return S(a);const R=this.statusError.get(n);return R?(this.statusError.delete(n),S(R)):void 0})}),m=await et.race([this.connection.request("request",{clientRequest:l},!0,{url:n,command:"PublishStream",workerType:i===ml.TRANSCODE?1:2,requestByUser:!a,tid:h.toString()}),p]);this.isStartingStreamingTask=!1,k.debug("[".concat(this.spec.clientId,"] live streaming started, code: ").concat(m.code)),this.streamingTasks.set(n,{clientRequest:l,mode:i,url:n,taskId:h}),u()}catch(p){if(u(),this.isStartingStreamingTask=!1,!p.data||!p.data.retry||a)throw p;return p.data.changeAddress?(this.connection.tryNextAddress(),await this.startLiveStreamingTask(n,i,p)):await this.startLiveStreamingTask(n,i,p)}}stopLiveStreamingTask(n){return new et((i,a)=>{const l=this.streamingTasks.get(n);if(!l||!this.connection)return new Ce(X.UNEXPECTED_ERROR,"can not find streaming task to stop").throw();const u=l.mode;l.abortTask=()=>{k.debug("[".concat(this.spec.clientId,"] stop live streaming success(worker exception)")),this.streamingTasks.delete(n),i()},this.connection.request("request",{clientRequest:{command:"UnpublishStream",url:l.url}},!1,{url:n,command:"UnPublishStream",workerType:u===ml.TRANSCODE?1:2,requestByUser:!0,tid:(this.lastTaskId++).toString()}).then(h=>{k.debug("[".concat(this.spec.clientId,"] stop live streaming success, code: ").concat(h.code)),this.streamingTasks.delete(n),this.streamingTasks.size===0&&(this.connection&&this.connection.close(),this.connection=void 0),i()}).catch(a)})}resetAllTask(){var n;const i=Array.from(ba(n=this.streamingTasks).call(n));this.terminate();for(const a of i)this.startLiveStreamingTask(a.url,a.mode).catch(l=>{this.onLiveStreamError&&this.onLiveStreamError(a.url,l)})}terminate(){this.cancelToken&&this.cancelToken.cancel(),this.streamingTasks=new Map,this.isStartingStreamingTask=!1,this.statusError=new Map,this.cancelToken=Yo.CancelToken.source(),this.uapResponse=void 0,this.connection&&this.connection.close(),this.connection=void 0}async connect(n){if(this.connection)throw new Ce(X.UNEXPECTED_ERROR,"live streaming connection has already connected");const i=await zi(this,zI.REQUEST_WORKER_MANAGER_LIST,n);return this.uapResponse=i,this.connection=new f0e(i.workerToken,this.spec,this.wsRetryConfig,n),this.connection.on(ju.WARNING,(a,l)=>this.onLiveStreamWarning&&this.onLiveStreamWarning(l,a)),this.connection.on(ju.PUBLISH_STREAM_STATUS,a=>this.handlePublishStreamServer(a)),this.connection.on(ju.REQUEST_NEW_ADDRESS,(a,l)=>{if(!this.connection)return l(new Ce(X.UNEXPECTED_ERROR,"can not get new live streaming address list"));zi(this,zI.REQUEST_WORKER_MANAGER_LIST,n).then(u=>{this.uapResponse=u,a(u.addressList)}).catch(l)}),await this.connection.init(i.addressList),this.connection}handlePublishStreamServer(n){const i=n.serverStatus&&n.serverStatus.url||"empty_url",a=this.streamingTasks.get(i),l=n.reason;switch(n.code){case di.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case di.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case di.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case di.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:{const h=new Ce(X.LIVE_STREAMING_CDN_ERROR,"",{code:n.code});if(a)return k.error(h.toString()),this.onLiveStreamError&&this.onLiveStreamError(i,h);if(!this.isStartingStreamingTask)return;this.statusError.set(i,h)}case di.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:{const h=new Ce(X.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE,l);return this.onLiveStreamWarning&&this.onLiveStreamWarning(i,h)}case di.LIVE_STREAM_RESPONSE_WORKER_LOST:case di.LIVE_STREAM_RESPONSE_WORKER_QUIT:{var u;if(!this.connection)return;this.connection.tryNextAddress();const h=Array.from(ba(u=this.streamingTasks).call(u));for(const p of h)p.abortTask?p.abortTask():(k.warning("[".concat(this.spec.clientId,"] publish stream status code"),n.code,"try to republish",p.url),this.startLiveStreamingTask(p.url,p.mode,new Ce(X.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:n.code})).then(()=>{k.debug("[".concat(this.spec.clientId,"] republish live stream success"),p.url)}).catch(m=>{k.error(m.toString()),this.onLiveStreamError&&this.onLiveStreamError(p.url,m)}));return}}}hasUrl(n){return this.streamingTasks.has(n)}}const m0e={name:"LiveStreaming",create:function(e){return new p0e(e.joinInfo,e.websocketRetryConfig||ei,e.httpRetryConfig||ei)}};function g0e(e){let n=Z$();return function(i,a){let l=i.appId;l!==void 0&&(jn(a,10),bl(a,l));let u=i.cid;u!==void 0&&(jn(a,16),jn(a,u));let h=i.cname;h!==void 0&&(jn(a,26),bl(a,h));let p=i.deviceId;p!==void 0&&(jn(a,34),bl(a,p));let m=i.elapse;m!==void 0&&(jn(a,40),rd(a,m));let E=i.fileSize;E!==void 0&&(jn(a,48),rd(a,Tp(E)));let S=i.height;S!==void 0&&(jn(a,56),rd(a,Tp(S)));let R=i.jpg;R!==void 0&&(jn(a,66),jn(a,R.length),function(eo,xe){let We=Rp(eo,xe.length);eo.bytes.set(xe,We)}(a,R));let w=i.networkType;w!==void 0&&(jn(a,72),rd(a,Tp(w)));let O=i.osType;O!==void 0&&(jn(a,80),rd(a,Tp(O)));let H=i.requestId;H!==void 0&&(jn(a,90),bl(a,H));let B=i.sdkVersion;B!==void 0&&(jn(a,98),bl(a,B));let j=i.sequence;j!==void 0&&(jn(a,104),rd(a,Tp(j)));let q=i.sid;q!==void 0&&(jn(a,114),bl(a,q));let Y=i.timestamp;Y!==void 0&&(jn(a,120),rd(a,Y));let Z=i.uid;Z!==void 0&&(jn(a,128),jn(a,Z));let pe=i.vid;pe!==void 0&&(jn(a,136),jn(a,pe));let he=i.width;he!==void 0&&(jn(a,144),rd(a,Tp(he)));let re=i.service;re!==void 0&&(jn(a,152),jn(a,re));let Se=i.callbackData;Se!==void 0&&(jn(a,162),bl(a,Se));let Ae=i.jpgEncryption;Ae!==void 0&&(jn(a,168),jn(a,Ae));let Ne=i.requestType;Ne!==void 0&&(jn(a,176),jn(a,Ne));let Be=i.scorePorn;Be!==void 0&&(jn(a,185),QA(a,Be));let nn=i.scoreSexy;nn!==void 0&&(jn(a,193),QA(a,nn));let sn=i.scoreNeutral;sn!==void 0&&(jn(a,201),QA(a,sn));let Lt=i.scene;Lt!==void 0&&(jn(a,208),jn(a,Lt));let kn=i.ossFilePrefix;kn!==void 0&&(jn(a,218),bl(a,kn));let Nn=i.serviceVendor;if(Nn!==void 0)for(let eo of Nn){jn(a,226);let xe=Z$();_0e(eo,xe),jn(a,xe.limit),b0e(a,xe),C0e(xe)}}(e,n),function(i){let a=i.bytes,l=i.limit;return a.length===l?a:a.subarray(0,l)}(n)}function v0e(e){return function(i){let a={};e:for(;!eH(i);){let l=Tl(i);switch(l>>>3){case 0:break e;case 1:a.code=Tl(i);break;case 2:a.msg=tH(i,Tl(i));break;case 3:{let u=S0e(i);a.data=E0e(i),i.limit=u;break}default:J$(i,7&l)}}return a}({bytes:n=e,offset:0,limit:n.length});var n}function E0e(e){let n={};e:for(;!eH(e);){let i=Tl(e);switch(i>>>3){case 0:break e;case 1:n.requestId=tH(e,Tl(e));break;case 2:n.requestType=Tl(e)>>>0;break;case 3:n.scorePorn=JA(e);break;case 4:n.scoreSexy=JA(e);break;case 5:n.scoreNeutral=JA(e);break;case 6:n.requestScene=Tl(e)>>>0;break;case 7:n.scene=Tl(e)>>>0;break;default:J$(e,7&i)}}return n}function _0e(e,n){let i=e.service;i!==void 0&&(jn(n,8),jn(n,i));let a=e.vendor;a!==void 0&&(jn(n,16),jn(n,a));let l=e.token;l!==void 0&&(jn(n,26),bl(n,l));let u=e.callbackUrl;u!==void 0&&(jn(n,34),bl(n,u))}function S0e(e){let n=Tl(e),i=e.limit;return e.limit=e.offset+n,i}function J$(e,n){switch(n){case 0:for(;128&nH(e););break;case 2:qA(e,Tl(e));break;case 5:qA(e,4);break;case 1:qA(e,8);break;default:throw new Error("Unimplemented type: "+n)}}let y0e=new Float32Array(1);new Uint8Array(y0e.buffer);let YA=new Float64Array(1),da=new Uint8Array(YA.buffer);function Tp(e){return{low:e|=0,high:e>>31,unsigned:e>=0}}let Q$=[];function Z$(){const e=Q$.pop();return e?(e.offset=e.limit=0,e):{bytes:new Uint8Array(64),offset:0,limit:0}}function C0e(e){Q$.push(e)}function qA(e,n){if(e.offset+n>e.limit)throw new Error("Skip past limit");e.offset+=n}function eH(e){return e.offset>=e.limit}function Rp(e,n){let i=e.bytes,a=e.offset,l=e.limit,u=a+n;if(u>i.length){let h=new Uint8Array(2*u);h.set(i),e.bytes=h}return e.offset=u,u>l&&(e.limit=u),a}function XA(e,n){let i=e.offset;if(i+n>e.limit)throw new Error("Read past limit");return e.offset+=n,i}function tH(e,n){let i=XA(e,n),a=String.fromCharCode,l=e.bytes,u="�",h="";for(let p=0;p<n;p++){let m,E,S,R,w=l[p+i];128&w?(224&w)==192?p+1>=n?h+=u:(m=l[p+i+1],(192&m)!=128?h+=u:(R=(31&w)<<6|63&m,R<128?h+=u:(h+=a(R),p++))):(240&w)==224?p+2>=n?h+=u:(m=l[p+i+1],E=l[p+i+2],(49344&(m|E<<8))!=32896?h+=u:(R=(15&w)<<12|(63&m)<<6|63&E,R<2048||R>=55296&&R<=57343?h+=u:(h+=a(R),p+=2))):(248&w)==240?p+3>=n?h+=u:(m=l[p+i+1],E=l[p+i+2],S=l[p+i+3],(12632256&(m|E<<8|S<<16))!=8421504?h+=u:(R=(7&w)<<18|(63&m)<<12|(63&E)<<6|63&S,R<65536||R>1114111?h+=u:(R-=65536,h+=a(55296+(R>>10),56320+(1023&R)),p+=3))):h+=u:h+=a(w)}return h}function bl(e,n){let i=n.length,a=0;for(let h=0;h<i;h++){let p=n.charCodeAt(h);p>=55296&&p<=56319&&h+1<i&&(p=(p<<10)+n.charCodeAt(++h)-56613888),a+=p<128?1:p<2048?2:p<65536?3:4}jn(e,a);let l=Rp(e,a),u=e.bytes;for(let h=0;h<i;h++){let p=n.charCodeAt(h);p>=55296&&p<=56319&&h+1<i&&(p=(p<<10)+n.charCodeAt(++h)-56613888),p<128?u[l++]=p:(p<2048?u[l++]=p>>6&31|192:(p<65536?u[l++]=p>>12&15|224:(u[l++]=p>>18&7|240,u[l++]=p>>12&63|128),u[l++]=p>>6&63|128),u[l++]=63&p|128)}}function b0e(e,n){let i=Rp(e,n.limit),a=e.bytes,l=n.bytes;for(let u=0,h=n.limit;u<h;u++)a[u+i]=l[u]}function nH(e){return e.bytes[XA(e,1)]}function rH(e,n){let i=Rp(e,1);e.bytes[i]=n}function JA(e){let n=XA(e,8),i=e.bytes;return da[0]=i[n++],da[1]=i[n++],da[2]=i[n++],da[3]=i[n++],da[4]=i[n++],da[5]=i[n++],da[6]=i[n++],da[7]=i[n++],YA[0]}function QA(e,n){let i=Rp(e,8),a=e.bytes;YA[0]=n,a[i++]=da[0],a[i++]=da[1],a[i++]=da[2],a[i++]=da[3],a[i++]=da[4],a[i++]=da[5],a[i++]=da[6],a[i++]=da[7]}function Tl(e){let n,i=0,a=0;do n=nH(e),i<32&&(a|=(127&n)<<i),i+=7;while(128&n);return a}function jn(e,n){for(n>>>=0;n>=128;)rH(e,127&n|128),n>>>=7;rH(e,n)}function rd(e,n){let i=n.low>>>0,a=(n.low>>>28|n.high<<4)>>>0,l=n.high>>>24,u=l===0?a===0?i<16384?i<128?1:2:i<1<<21?3:4:a<16384?a<128?5:6:a<1<<21?7:8:l<128?9:10,h=Rp(e,u),p=e.bytes;switch(u){case 10:p[h+9]=l>>>7&1;case 9:p[h+8]=u!==9?128|l:127&l;case 8:p[h+7]=u!==8?a>>>21|128:a>>>21&127;case 7:p[h+6]=u!==7?a>>>14|128:a>>>14&127;case 6:p[h+5]=u!==6?a>>>7|128:a>>>7&127;case 5:p[h+4]=u!==5?128|a:127&a;case 4:p[h+3]=u!==4?i>>>21|128:i>>>21&127;case 3:p[h+2]=u!==3?i>>>14|128:i>>>14&127;case 2:p[h+1]=u!==2?i>>>7|128:i>>>7&127;case 1:p[h]=u!==1?128|i:127&i}}function iH(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),i.push.apply(i,a)}return i}const T0e=new Map([["moderation",1],["supervise",2]]);class R0e extends br{get connectionState(){return this._connectionState}set connectionState(n){if(this._connectionState===n)return;const i=this._connectionState;this._connectionState=n,this.emit(Ii.CONNECTION_STATE_CHANGE,i,n)}get inspectType(){return this._inspectType}set inspectType(n){var i;this._inspectMode=Ms(i=n.map(a=>T0e.get(a)||0)).call(i,(a,l)=>a+l),this._inspectType=n}get quality(){return this._quality}set quality(n){this._quality=n>1?1:n<.1?.1:n,this.qualityTimer&&(window.clearTimeout(this.qualityTimer),this.qualityTimer=null),this._quality>=1||(this.qualityTimer=window.setTimeout(()=>{this.quality=this._quality/this.qualityRatio},6e4))}constructor(n){super(),W(this,"name","AgoraRTCVideoContentInspect"),W(this,"_connectionState",Ys.CONNECTING),W(this,"_innerConnectionState",void 0),W(this,"sequence",0),W(this,"inspectStartTime",void 0),W(this,"workerManagerConnection",void 0),W(this,"workerConnection",void 0),W(this,"workerMessageLengthLimit",void 0),W(this,"inspectIntervalMinimum",void 0),W(this,"qualityRatio",void 0),W(this,"_connectInfo",void 0),W(this,"_cancelTokenSource",Yo.CancelToken.source()),W(this,"_retryConfig",void 0),W(this,"wmSequence",0),W(this,"inspectInterval",void 0),W(this,"inspectTimer",null),W(this,"ossFilePrefix",void 0),W(this,"extraInfo",void 0),W(this,"_inspectType",void 0),W(this,"_inspectMode",void 0),W(this,"_quality",1),W(this,"qualityTimer",null),W(this,"_inspectId",void 0),W(this,"_needWorkUrlOnly",!1),W(this,"inspectImage",()=>{if(this.connectionState!==Ys.CONNECTED)throw new Ce(X.OPERATION_ABORTED,"content inspect service connection status is ".concat(this.connectionState));this.inspectTimer&&(window.clearInterval(this.inspectTimer),this.inspectTimer=null),this.inspectTimer=window.setInterval(()=>{this.connectionState===Ys.CONNECTED?this.requestToInspectImage():k.debug("[".concat(this._inspectId,"] Inspect State is not connected , "),this.connectionState)},this.inspectInterval<this.inspectIntervalMinimum?this.inspectIntervalMinimum:this.inspectInterval),this.requestToInspectImage()}),this._inspectId=Zn(5,"inspect-"),this.workerMessageLengthLimit=Q("VIDEO_INSPECT_WORKER_MESSAGE_LENGTH_LIMIT"),this.inspectIntervalMinimum=Q("VIDEO_INSPECT_INTERVAL_MINIMUM"),this.qualityRatio=Q("VIDEO_INSPECT_QUALITY_RATIO"),this.inspectInterval=n.interval,this.ossFilePrefix=n.ossFilePrefix,this.extraInfo=n.extraInfo,this.inspectType=n.inspectType,this.inspectStartTime=Number(Date.now()),this.workerManagerConnection=new F0("worker-manager-"+this._inspectId,ei),this.on(Ii.STATE_CHANGE,(i,a)=>{this._innerConnectionState=i,k.debug("[".concat(this._inspectId,"] Inspect operation :").concat(qs[i]," ").concat(a||""))}),this.handleWorkerManagerEvents(),this.workerConnection=new F0("worker-"+this._inspectId,ei),this.handleWorkerEvents()}async init(n,i){this.emit(Ii.STATE_CHANGE,qs.CONNECT_AP),this._connectInfo=n;const a=this._cancelTokenSource.token;return this._retryConfig=i,new et((l,u)=>{this.on(Ii.CONNECTION_STATE_CHANGE,(h,p)=>{p===Ys.CONNECTED&&l()}),this.requestAP(n,a,i).then(h=>{this.connectWorkerManager(h)}).catch(h=>{u(h)})})}async requestAP(n,i,a){const l=Q("WEBCS_DOMAIN").map(p=>"https://".concat(p,"/api/v1")),u=await function(p,m,E,S){let{appId:R,areaCode:w,cname:O,sid:H,token:B,uid:j}=m;hp++;const q="image_moderation_api",Y={service_name:q,json_body:JSON.stringify({appId:R,areaCode:w,cname:O,command:"allocateEdge",requestId:hp,seq:hp,sid:H,token:B,ts:Date.now(),uid:j+""})};let Z,pe,he=p[0];return Ic(async()=>{Z=Date.now();const re=await Pc(he,{data:Y,cancelToken:E,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"},params:{action:"wrtc_gateway"}});if(pe=Date.now()-Z,re.code!==0){const Be=new Ce(X.UNEXPECTED_RESPONSE,"image inspect ap error, code"+re.code,{retry:!0,responseTime:pe});throw k.error(Be.toString()),Be}const Se=JSON.parse(re.json_body);if(Se.code!==200){const Be=new Ce(X.UNEXPECTED_RESPONSE,"image inspect ap error, code: ".concat(Se.code,", reason: ").concat(Se.reason),{code:Se.code,responseTime:pe});throw k.error(Be.toString()),Be}if(!Se.servers||!Array.isArray(Se.servers)||Se.servers.length===0){const Be=new Ce(X.UNEXPECTED_RESPONSE,"image inspect ap empty server",{code:Se.code,responseTime:pe});throw k.error(Be.toString()),Be}const Ae=Q("VIDEO_INSPECT_WORKER_MANAGER_HOST"),Ne=Q("VIDEO_INSPECT_WORKER_MANAGER_PORT");return{addressList:Se.servers.map(Be=>{let{address:nn,wss:sn}=Be;if(nn&&sn)return"wss://".concat(nn.replace(/\./g,"-"),".").concat(Ae,":").concat(Ne||sn)}).filter(Be=>!!Be),workerToken:Se.workerToken,vid:Se.vid,responseTime:pe}},(re,Se)=>(ct.apworkerEvent(H,{success:!0,sc:200,serviceName:q,responseDetail:JSON.stringify(re.addressList),firstSuccess:Se===0,responseTime:pe,serverIp:p[Se%p.length]}),!1),(re,Se)=>(ct.apworkerEvent(H,{success:!1,sc:re.data&&re.data.code||200,serviceName:q,responseTime:pe,serverIp:p[Se%p.length]}),!!(re.code!==X.OPERATION_ABORTED&&re.code!==X.UNEXPECTED_RESPONSE||re.data&&re.data.retry)&&(he=p[(Se+1)%p.length],!0)),S)}(l,n,i,a);this.emit(Ii.STATE_CHANGE,qs.AP_CONNECTED);const{addressList:h}=u;return this.wmSequence++,h}async connectWorkerManager(n){let i=arguments.length>1&&arguments[1]!==void 0&&arguments[1];this._needWorkUrlOnly=i,this.emit(Ii.STATE_CHANGE,qs.CONNECT_WORKER_MANAGER),await this.workerManagerConnection.init(n,1e4)}async connectWorker(n){await this.workerConnection.init([n])}handleWorkerManagerEvents(){this.workerManagerConnection.on(Xt.CONNECTED,async()=>{this.emit(Ii.STATE_CHANGE,qs.WORKER_MANAGER_CONNECTED,this.workerManagerConnection.url),this.workerManagerConnection.sendMessage({appId:this._connectInfo.appId,cname:this._connectInfo.cname,uid:this._connectInfo.uid+"",sdkVersion:"4.24.0",sid:this._connectInfo.sid,seq:this.wmSequence,ts:Number(Date.now()),requestId:Math.floor(1e12*Math.random()),allocate:!0,clientRequest:{command:"join"}},!0)}),this.workerManagerConnection.on(Xt.CLOSED,()=>{this._innerConnectionState<qs.GET_WORKER_MANAGER_RESPONSE&&k.debug("[".concat(this._inspectId,"] Inspect worker manager is closed before connecting worker"))}),this.workerManagerConnection.on(Xt.FAILED,()=>{this._innerConnectionState<qs.GET_WORKER_MANAGER_RESPONSE&&k.debug("[".concat(this._inspectId,"] Connecting inspect worker manager is failed before connecting worker"))}),this.workerManagerConnection.on(Xt.RECONNECTING,()=>{this._innerConnectionState<qs.GET_WORKER_MANAGER_RESPONSE&&k.debug("[".concat(this._inspectId,"] Inspect worker manager is reconnecting before connecting worker"))}),this.workerManagerConnection.on(Xt.ON_MESSAGE,async n=>{this.emit(Ii.STATE_CHANGE,qs.GET_WORKER_MANAGER_RESPONSE);const i=this.workerManagerConnection.url;this.workerManagerConnection.close();const a=JSON.parse(n.data);if(a.code!==200)throw k.error("[".concat(this._inspectId,"] Unexpected code ").concat(a.code," from worker manager")),new Ce(X.UNEXPECTED_RESPONSE,"response code of worker is unexpected",a);if(!(a.serverResponse&&a.serverResponse.portWss&&i))throw k.error("[".concat(this._inspectId,"] Unexpected content from worker manager : ").concat(JSON.stringify(a))),new Ce(X.UNEXPECTED_RESPONSE,"response content of worker is unexpected",a);{const l=Q("VIDEO_INSPECT_WORKER_PORT")||a.serverResponse.portWss,u=i.replace(/:\d+\/?$/,":".concat(l));this.emit(Ii.STATE_CHANGE,qs.CONNECT_WORKER,u),this._needWorkUrlOnly?this.emit(Ii.REQUEST_NEW_WORKER_URL,u):await this.connectWorker(u)}}),this.workerManagerConnection.on(Xt.WILL_RECONNECT,(n,i,a)=>{a(n)}),this.workerManagerConnection.on(Xt.REQUEST_NEW_URLS,(n,i)=>{this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then(n).catch(i)})}handleWorkerEvents(){this.workerConnection.on(Xt.CONNECTED,async()=>{this.emit(Ii.STATE_CHANGE,qs.WORKER_CONNECTED,this.workerConnection.url),this.connectionState=Ys.CONNECTED}),this.workerConnection.on(Xt.ON_MESSAGE,async n=>{if(n.data instanceof ArrayBuffer){const a=v0e(new Uint8Array(n.data));if(Q("SHOW_VIDEO_INSPECT_WORKER_MESSAGE")&&k.debug("[".concat(this._inspectId,"] Response message for worker of inspect content "),JSON.stringify(a)),a.code===200){if(Array.isArray(this.inspectType)&&this.inspectType.length===1&&this.inspectType[0]==="supervise")return void this.emit(Ii.INSPECT_RESULT,void 0,void 0);if(a.data&&a.data.scorePorn&&a.data.scoreSexy&&a.data.scoreNeutral){var i;const l={porn:a.data.scorePorn,sexy:a.data.scoreSexy,neutral:a.data.scoreNeutral},u=Ms(i=Object.keys(l)).call(i,(p,m)=>l[p]>l[m]?p:m,"porn"),h=Object.keys(l).find(p=>p===u);this.emit(Ii.INSPECT_RESULT,h)}else this.emit(Ii.INSPECT_RESULT,void 0,new Ce(X.UNEXPECTED_RESPONSE,a.code+"","There is an unexpected data on message"))}else this.emit(Ii.INSPECT_RESULT,void 0,new Ce(X.UNEXPECTED_RESPONSE,a.code+"",a.msg))}else k.error("[".concat(this._inspectId,"] Unexpected message type from worker")),this.emit(Ii.INSPECT_RESULT,void 0,new Ce(X.UNEXPECTED_RESPONSE,"invalid worker message type"))}),this.workerConnection.on(Xt.CLOSED,()=>{this.connectionState=Ys.CLOSED}),this.workerConnection.on(Xt.FAILED,()=>{this.connectionState=Ys.CLOSED}),this.workerConnection.on(Xt.RECONNECTING,()=>{this.connectionState=this.connectionState===Ys.CONNECTED?Ys.RECONNECTING:Ys.CONNECTING}),this.workerConnection.on(Xt.WILL_RECONNECT,(n,i,a)=>{n==="recover"&&a(n),a("tryNext")}),this.workerConnection.on(Xt.REQUEST_NEW_URLS,(n,i)=>{this.workerManagerConnection.close(),this.once(Ii.REQUEST_NEW_WORKER_URL,a=>{n([a])}),this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then(a=>{this.connectWorkerManager(a,!0)}).catch(a=>{i(a)})})}async requestToInspectImage(){this.sequence++;const n=ja(this,Ii.CLIENT_LOCAL_VIDEO_TRACK),i={appId:this._connectInfo.appId,cname:this._connectInfo.cname,cid:this._connectInfo.cid,sid:this._connectInfo.sid,uid:this._connectInfo.uid,vid:this._connectInfo.vid};if(n){if(!n.isPlaying)return void this.emit(Ii.INSPECT_RESULT,void 0,new Ce(X.INVALID_OPERATION,"Only the track being played can be inspected"));const a=await this.generateRequestData(n,i);this.workerConnection.sendMessage(a,!0,!0)}else this.emit(Ii.INSPECT_RESULT,void 0,new Ce(X.INVALID_OPERATION,"Only the track being published can be inspected"))}async generateRequestData(n,i){let{appId:a,cname:l,cid:u,vid:h,sid:p,uid:m}=i;const E=Date.now(),S=await n.getCurrentFrameImage("image/jpeg",this.quality),R=await FV(S,a,l),w=this.sequence+"-"+u+"-"+m+"-"+E+"-"+Zn(12,""),O={appId:a,cid:u,cname:l,deviceId:"",elapse:(H=Number(E-this.inspectStartTime),{low:H|=0,high:H>>31,unsigned:H>=0}),fileSize:R.byteLength,jpgEncryption:2,height:S.height,width:S.width,jpg:R,networkType:6,osType:7,requestId:w,sdkVersion:"4.24.0",sequence:this.sequence,sid:p,timestamp:hj(E),uid:m,vid:h,service:this._inspectMode,callbackData:this.extraInfo,ossFilePrefix:this.ossFilePrefix};var H;this.extraInfo===void 0&&delete O.callbackData,this.ossFilePrefix===void 0&&delete O.ossFilePrefix;const B=g0e(O);if(B.byteLength<this.workerMessageLengthLimit){if(Q("SHOW_VIDEO_INSPECT_WORKER_MESSAGE")){const j=function(q){for(var Y=1;Y<arguments.length;Y++){var Z=arguments[Y]!=null?arguments[Y]:{};Y%2?iH(Object(Z),!0).forEach(function(pe){W(q,pe,Z[pe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(q,Object.getOwnPropertyDescriptors(Z)):iH(Object(Z)).forEach(function(pe){Object.defineProperty(q,pe,Object.getOwnPropertyDescriptor(Z,pe))})}return q}({},O);delete j.jpg,k.debug("[".concat(this._inspectId,"] Request message for worker of inspect content "),JSON.stringify(j))}return B}{const j=this.quality*this.qualityRatio;return this.quality=j,await this.generateRequestData(n,{appId:a,cname:l,cid:u,vid:h,sid:p,uid:m})}}close(){this._cancelTokenSource.cancel(),this._cancelTokenSource=Yo.CancelToken.source(),this.workerManagerConnection&&this.workerManagerConnection.close(),this.workerConnection&&this.workerConnection.close(),this.inspectTimer&&window.clearInterval(this.inspectTimer),this.inspectTimer=null,this.connectionState=Ys.CLOSED,this.emit(Ii.STATE_CHANGE,qs.CLOSED)}}const w0e={name:"ContentInspect",create:function(e){let{config:n}=e;return function(i){if(!i)throw new Ce(X.INVALID_PARAMS,"inspectConfig is necessary.");if(!i.inspectType||!Array.isArray(i.inspectType))throw new Ce(X.INVALID_PARAMS,"inspectConfig.inspectType is necessary and is an instance of Array.");{const a=[...new Set(i.inspectType)];a.forEach(l=>{var u;if(!Ge(u=["supervise","moderation"]).call(u,l))throw new Ce(X.INVALID_PARAMS,"".concat(l," is not a valid inspect type."))}),i.inspectType=a}if(i&&i.extraInfo&&i.extraInfo.length>1024)throw new Ce(X.INVALID_PARAMS,"inspectConfig.extraInfo length cannot exceed 1024 bytes")}(n),new R0e(n)}};var oH=c(ut.Object.getOwnPropertySymbols),I0e=Vn,A0e=n1.indexOf,O0e=gE,ZA=G([].indexOf),aH=!!ZA&&1/ZA([1],1,-0)<0;I0e({target:"Array",proto:!0,forced:aH||!O0e("indexOf")},{indexOf:function(e){var n=arguments.length>1?arguments[1]:void 0;return aH?ZA(this,e,n)||0:A0e(this,e,n)}});var x0e=ks("Array","indexOf"),N0e=T,P0e=x0e,eO=Array.prototype,D0e=function(e){var n=e.indexOf;return e===eO||N0e(eO,e)&&n===eO.indexOf?P0e:n},sH=c(D0e);function L0e(e,n){if(e==null)return{};var i,a,l=function(h,p){if(h==null)return{};var m={};for(var E in h)if({}.hasOwnProperty.call(h,E)){if(sH(p).call(p,E)!==-1)continue;m[E]=h[E]}return m}(e,n);if(oH){var u=oH(e);for(a=0;a<u.length;a++)i=u[a],sH(n).call(n,i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(l[i]=e[i])}return l}let cH=class{get localCapabilities(){return vr(this._localCapabilities)}get rtpCapabilities(){return vr(this._rtpCapabilities)}get candidates(){return vr(this._candidates)}get iceParameters(){return vr(this._iceParameters)}get dtlsParameters(){return vr(this._dtlsParameters)}constructor(e){W(this,"sessionDesc",void 0),W(this,"_localCapabilities",void 0),W(this,"_rtpCapabilities",void 0),W(this,"_candidates",void 0),W(this,"_iceParameters",void 0),W(this,"_dtlsParameters",void 0),W(this,"setup",void 0),W(this,"currentMidIndex",void 0),W(this,"cname","o/i14u9pJrxRKAsu"),W(this,"firefoxSsrcMidMap",new Map),e=vr(e);const{remoteIceParameters:n,remoteDtlsParameters:i,candidates:a,remoteRTPCapabilities:l,localCapabilities:u,direction:h,setup:p,videoCodec:m,audioCodec:E}=e;let S;this.setup=p,S=h===Lo.RECEIVE_ONLY?sa(`v=0
o=- 0 0 IN IP4 127.0.0.1
s=AgoraGateway
t=0 0
a=group:BUNDLE 0 1
a=msid-semantic: WMS
a=extmap-allow-mixed
m=video 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendonly
a=rtcp-mux
a=rtcp-rsize
a=mid:0
m=audio 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendonly
a=rtcp-mux
a=rtcp-rsize
a=mid:1
`):sa(`v=0
o=- 0 0 IN IP4 127.0.0.1
s=AgoraGateway
t=0 0
a=group:BUNDLE 0 1
a=msid-semantic: WMS
a=extmap-allow-mixed
m=video 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=recvonly
a=rtcp-mux
a=rtcp-rsize
a=mid:0
m=audio 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=recvonly
a=rtcp-mux
a=rtcp-rsize
a=mid:1
`),this._rtpCapabilities=l,this._candidates=a,this._iceParameters=n,this._dtlsParameters=i,this._localCapabilities=u;const R=h===Lo.RECEIVE_ONLY?this.rtpCapabilities.send:this.rtpCapabilities.recv,w=h===Lo.RECEIVE_ONLY?this._localCapabilities.recv:this._localCapabilities.send,O=h===Lo.RECEIVE_ONLY?l.send.videoCodecs:j0(it.VIDEO,R,w,m),H=h===Lo.RECEIVE_ONLY?l.send.audioCodecs:j0(it.AUDIO,R,w,E);for(const B of S.mediaDescriptions)B.attributes.iceUfrag=n.iceUfrag,B.attributes.icePwd=n.icePwd,B.attributes.fingerprints=i.fingerprints,B.attributes.candidates=a,B.attributes.setup=this.setup,B.media.mediaType==="application"&&(B.attributes.sctpPort="5000"),B.media.mediaType==="video"&&(B.media.fmts=O.map(j=>j.payloadType.toString(10)),B.attributes.payloads=O,B.attributes.extmaps=R.videoExtensions),B.media.mediaType==="audio"&&(B.media.fmts=H.map(j=>j.payloadType.toString(10)),B.attributes.payloads=H,B.attributes.extmaps=R.audioExtensions,dp(B));this.sessionDesc=S,this.currentMidIndex=S.mediaDescriptions.length-1}toString(){return Bu(this.sessionDesc)}hasMid(e){return Array.isArray(e)?e.every(n=>this.hasMid(n)):this.sessionDesc.mediaDescriptions.some(n=>n.attributes.mid===e)}send(e,n,i,a,l){i=i.replace(/ /g,"-");const{ssrcs:u,ssrcGroups:h}=V0(n,this.cname,Q("SYNC_GROUP")?i:void 0),p=this.findPreloadMediaDesc(u);if(p){if(Or()&&this.firefoxSsrcMidMap.set(u[0].ssrcId,p.attributes.mid),l&&(l.twcc||l.remb)){const m=this.sessionDesc.mediaDescriptions.indexOf(p);return this.sessionDesc.mediaDescriptions[m]=this.mungSendMediaDesc(p,l),{mid:p.attributes.mid,needExchangeSDP:!0}}return{mid:p.attributes.mid,needExchangeSDP:!1}}{const m=this.findAvailableMediaIndex(e,u,a);let E;return m===-1?(E=this.createOrRecycleSendMedia(e,u,h,"sendonly",a,l),this.updateBundleMids()):(E=vr(this.sessionDesc.mediaDescriptions[m]),E.attributes.direction="sendonly",E.attributes.ssrcs=u,E.attributes.ssrcGroups=h,this.sessionDesc.mediaDescriptions[m]=this.mungSendMediaDesc(E,l)),Or()&&this.firefoxSsrcMidMap.set(u[0].ssrcId,E.attributes.mid),{needExchangeSDP:!0,mid:E.attributes.mid}}}stopSending(e){const n=this.sessionDesc.mediaDescriptions.filter(i=>i.attributes.mid&&e.indexOf(i.attributes.mid)!==-1);if(n.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.stopSending.");n.forEach(i=>{i.attributes.ssrcs=[]}),this.updateBundleMids()}receive(e,n,i){const a=[];return e.forEach(l=>{const u=l._mediaStreamTrack.kind,h=this.findAvailableRecvMediaIndex(u);let p,m=!1;h===-1?(m=!0,p=this.createOrRecycleRecvMedia(l,[],"recvonly",n,i),this.updateBundleMids()):(p=vr(this.sessionDesc.mediaDescriptions[h]),p.attributes.direction="recvonly"),a.push({mid:p.attributes.mid,needCreateTransceiver:m})}),a}stopReceiving(e){const n=this.sessionDesc.mediaDescriptions.filter(i=>e.indexOf(i.attributes.mid)!==-1);if(n.length!==e.length)throw new Error("MediaDescriptions' length doesn't match mids's length when calling RemoteSDP.receive.");n.forEach(i=>{i.media.port="0",i.attributes.direction="inactive"}),this.updateBundleMids()}addRemoteCandidate(e){const{foundation:n,protocol:i,address:a,port:l,type:u,relatedAddress:h,relatedPort:p,priority:m}=new RTCIceCandidate(e),E={foundation:n??"",componentId:"1",transport:i??"",priority:m?m+"":"",connectionAddress:a??"",port:l?l+"":"",type:u?u+"":"",relAddr:h??"",relPort:p?p+"":"",extension:{}};this.candidates.some(S=>S.priority===E.priority&&S.connectionAddress===E.connectionAddress&&S.port===E.port)||(this._candidates.push(E),this.sessionDesc.mediaDescriptions.forEach(S=>{S.attributes.candidates=this.candidates}))}clearRemoteCandidate(){this._candidates=[],this.sessionDesc.mediaDescriptions[0].attributes.candidates=this._candidates}createOrRecycleRecvMedia(e,n,i,a,l){const u=e._mediaStreamTrack.kind,h=this.rtpCapabilities.recv,p=j0(u,h,this.localCapabilities.send,u===it.AUDIO?l:a),m=u===it.VIDEO?h.videoExtensions:h.audioExtensions,E="".concat(++this.currentMidIndex);let S={media:{mediaType:u,port:"9",protos:["UDP","TLS","RTP","SAVPF"],fmts:p.map(w=>w.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:[],extmaps:m,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:n,ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:p,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:i,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(E)}};S=this.mungRecvMediaDsec(S,e);const R=this.findFirstClosedMedia(u);if(R){const w=this.sessionDesc.mediaDescriptions.indexOf(R);this.sessionDesc.mediaDescriptions[w]=S}else this.sessionDesc.mediaDescriptions.push(S);return S}muteRemote(e){const n=this.sessionDesc.mediaDescriptions.filter(i=>Ge(e).call(e,i.attributes.mid||""));if(n.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");n.forEach(i=>{i.attributes.direction="inactive"})}unmuteRemote(e){const n=this.sessionDesc.mediaDescriptions.filter(i=>Ge(e).call(e,i.attributes.mid||""));if(n.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");n.forEach(i=>{i.attributes.direction="recvonly"})}findAvailableMediaIndex(e,n,i){return this.sessionDesc.mediaDescriptions.findIndex(a=>{const l=a.media.mediaType===e&&a.media.port!=="0"&&(a.attributes.direction==="sendonly"||a.attributes.direction==="sendrecv")&&a.attributes.ssrcs.length===0;if(Or()){if(l){const u=this.firefoxSsrcMidMap.get(n[0].ssrcId);return!(u||a.attributes.mid!=="0"&&a.attributes.mid!=="1")||!(!u||u!==a.attributes.mid)}return!1}return l&&a.attributes.mid===i})}findAvailableRecvMediaIndex(e){return this.sessionDesc.mediaDescriptions.findIndex(n=>{const i=n.media.mediaType===e&&n.media.port!=="0"&&(n.attributes.direction==="recvonly"||n.attributes.direction==="sendrecv");return n.attributes.mid!=="0"&&n.attributes.mid!=="1"&&i})}predictReceivingMids(e){const n=[];for(let i=0;i<e;i++)n.push((this.currentMidIndex+i+1).toString(10));return n}restartICE(e){e=vr(e),this._iceParameters=e,this.sessionDesc.mediaDescriptions.forEach(n=>{n.attributes.iceUfrag=e.iceUfrag,n.attributes.icePwd=e.icePwd})}createOrRecycleSendMedia(e,n,i,a,l,u){const h=this.rtpCapabilities.send,p=e===it.VIDEO?h.videoCodecs:h.audioCodecs,m=e===it.VIDEO?h.videoExtensions:h.audioExtensions;Or()&&(l="".concat(++this.currentMidIndex));let E={media:{mediaType:e,port:"9",protos:["UDP","TLS","RTP","SAVPF"],fmts:p.map(R=>R.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:[],extmaps:m,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:n,ssrcGroups:i,rtcpFeedbackWildcards:[],payloads:p,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:a,rtcpMux:!0,rtcpRsize:!0,mid:l}};E=this.mungSendMediaDesc(E,u);const S=this.findFirstClosedMedia(e);if(S){const R=this.sessionDesc.mediaDescriptions.indexOf(S);this.sessionDesc.mediaDescriptions[R]=E}else this.sessionDesc.mediaDescriptions.push(E);return E}mungRecvMediaDsec(e,n,i){const a=vr(e);return XI(a),up(a,n),JI(a,n),e8(a),TS(a,i,this.localCapabilities.send),a}mungSendMediaDesc(e,n){const i=vr(e);return TS(i,n,this.localCapabilities.recv),dp(i),i}updateRecvMedia(e,n){const i=this.sessionDesc.mediaDescriptions.findIndex(a=>a.attributes.mid===e);if(i!==-1){const a=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[i],n);this.sessionDesc.mediaDescriptions[i]=a}}updateBundleMids(){this.sessionDesc.attributes.groups[0].identificationTag=this.sessionDesc.mediaDescriptions.filter(e=>e.media.port!=="0").map(e=>e.attributes.mid)}findPreloadMediaDesc(e){return this.sessionDesc.mediaDescriptions.find(n=>{var i;return((i=n.attributes)===null||i===void 0||(i=i.ssrcs[0])===null||i===void 0?void 0:i.ssrcId)===e[0].ssrcId})}findFirstClosedMedia(e){return this.sessionDesc.mediaDescriptions.find(n=>Or()?n.media.port==="0"&&n.media.mediaType===e:n.media.port==="0")}};const k0e=["sdp"];var cr;function lH(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),i.push.apply(i,a)}return i}function id(e){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?lH(Object(i),!0).forEach(function(a){W(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):lH(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}let uH=(cr=class Mp extends M6{get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get dtlsTransportState(){var n,i;return(n=(i=this.peerConnection.getReceivers()[0])===null||i===void 0||(i=i.transport)===null||i===void 0?void 0:i.state)!==null&&n!==void 0?n:null}get localCodecs(){return[]}set isInRestartIce(n){this._isInRestartIce=n}get isInRestartIce(){return this._isInRestartIce}constructor(n,i,a){super(n,i),W(this,"direction",void 0),W(this,"name",void 0),W(this,"store",void 0),W(this,"spec",void 0),W(this,"peerConnection",void 0),W(this,"initialOffer",void 0),W(this,"transport",void 0),W(this,"statsFilter",void 0),W(this,"localCandidateCount",0),W(this,"_isInRestartIce",!1),W(this,"mutex",void 0),W(this,"onLocalCandidate",void 0),W(this,"remoteSDP",void 0),W(this,"pendingCandidates",[]),W(this,"localCapabilities",void 0),W(this,"isReady",!1),W(this,"restartCnt",0),W(this,"curTurnServerIndex",0),this.store=i,this.spec=n,this.mutex=new qi("P2PConnection-mutex",i.clientId),this.peerConnection=new RTCPeerConnection(Mp.resolvePCConfiguration(n,i.p2pTransport),{optional:[{googDscp:!0}]}),this.direction=a??Lo.SEND_ONLY,this.name=this.direction===Lo.SEND_ONLY?"sendP2PConnection":"recvP2PConnection",this.statsFilter=oI(this.peerConnection,Q("STATS_UPDATE_INTERVAL"),void 0,Or()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1}async establish(n){try{const i=await n8();if(this.localCapabilities=RS(i),n){const{sdp:a}=n,l=L0e(n,k0e),u=function(){const S={audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]},R=B0(arguments.length>2?arguments[2]:void 0,arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},"sendonly"),w={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},O={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},H={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]};if(Xs(R,S,"videoExtensions",w,O,H),Xs(R,S,"videoCodecs",w,O,H),Xs(R,S,"audioExtensions",w,O,H),Xs(R,S,"audioCodecs",w,O,H),Q("RAISE_H264_BASELINE_PRIORITY")){const B=H.videoCodecs.findIndex(j=>j.rtpMap&&j.rtpMap.encodingName.toLocaleLowerCase()==="h264"&&j.fmtp&&j.fmtp.parameters["profile-level-id"]==="42001f");if(B!==-1){const j=H.videoCodecs.findIndex(q=>q.rtpMap&&q.rtpMap.encodingName.toLocaleLowerCase()==="h264");if(j<B){k.debug("raising H264 baseline profile priority");const q=H.videoCodecs[B];H.videoCodecs.splice(B,1),H.videoCodecs.splice(j,0,q)}j!==-1&&Q("FILTER_SEND_H264_BASELINE")&&(w.videoCodecs=w.videoCodecs.filter(q=>!(q.rtpMap&&q.rtpMap.encodingName.toLocaleLowerCase()==="h264"&&q.fmtp&&q.fmtp.parameters["profile-level-id"]!=="42001f")))}}return{send:w,recv:O,sendrecv:H}}({},{},a);this.remoteSDP=new cH({remoteIceParameters:l.iceParameters,remoteDtlsParameters:l.dtlsParameters,candidates:[],remoteRTPCapabilities:u,localCapabilities:this.localCapabilities,direction:this.direction,setup:"actpass",videoCodec:this.store.codec,audioCodec:this.store.audioCodec}),await this.setRemoteDescription({type:"offer",sdp:this.remoteSDP.toString()}),this.isReady=!0;const h=await this.peerConnection.createAnswer();if(!h.sdp)throw new Error("Cannot get answer sdp when trying to establish PeerConnection.");const p=Wu(h.sdp);await this.peerConnection.setLocalDescription(h);const m=await r8({},{},h.sdp);this.localCapabilities=RS(m);const E=this.peerConnection.getTransceivers()[0];return E!=null&&E.receiver&&E.receiver.transport&&this.tryBindTransportEvents(E.receiver.transport),id(id({},p),{},{sdp:h.sdp})}{this.peerConnection.addTransceiver("video",{direction:"sendonly"}),this.peerConnection.addTransceiver("audio",{direction:"sendonly"});const a=await this.peerConnection.createOffer();if(!a.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const l=Wu(a.sdp);return this.initialOffer=a,id(id({},l),{},{sdp:a.sdp})}}catch(i){throw new Re(X.GET_LOCAL_CONNECTION_PARAMS_FAILED,i.toString())}}async connect(n){try{if(!this.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");await this.peerConnection.setLocalDescription(this.initialOffer);const{sdp:i,iceParameters:a,dtlsParameters:l}=n,u=await r8({},{},i);this.remoteSDP=new cH({remoteIceParameters:a,remoteDtlsParameters:l,candidates:[],remoteRTPCapabilities:u,localCapabilities:this.localCapabilities,direction:this.direction,setup:"active",videoCodec:this.store.codec,audioCodec:this.store.audioCodec}),await this.setRemoteDescription({type:"answer",sdp:this.remoteSDP.toString()});const h=this.peerConnection.getTransceivers()[0];h!=null&&h.sender&&h.sender.transport&&this.tryBindTransportEvents(h.sender.transport)}catch(i){throw new Re(X.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(i.toString()))}}async addRemoteCandidate(n){try{n&&this.pendingCandidates.push(n),this.peerConnection.remoteDescription&&this.isReady&&(this.pendingCandidates.forEach(i=>{this.peerConnection.addIceCandidate(i)}),this.pendingCandidates=[])}catch(i){throw new Re(X.ADD_CANDIDATE_FAILED,"P2PConnection.addRemoteCandidate failed; ".concat(i.toString()))}}send(n,i,a){var l=this;return ss(function*(){const u=yield Tn(l.mutex.lock("From P2PConnection.send"));try{if(!l.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");const h=[],p=l.remoteSDP.receive(n,i,a);n.forEach((j,q)=>{if(p[q].needCreateTransceiver){const Y=l.peerConnection.addTransceiver(j._mediaStreamTrack,{direction:"sendonly"});h.push(Y),j._updateRtpTransceiver(Y)}else{const Y=l.peerConnection.getTransceivers().find(Z=>Z.mid===p[q].mid);if(!Y)throw new Error("cannot find transceiver when sendPeerconnection send, mid is ".concat(p[q].mid));h.push(Y),j._updateRtpTransceiver(Y)}}),Or()&&Q("SIMULCAST")===!0&&(yield Tn(l.applySimulcastForFirefox(h,n)));const m=p.map(j=>j.mid),E=yield Tn(l.peerConnection.createOffer()),S=l.mungSendOfferSDP(E.sdp,n,m),R=sa(S),w=m.map(j=>{const q=R.mediaDescriptions.find(Y=>Y.attributes.mid===j);if(!q)throw new Error("Cannot extract ssrc from mediaDescription.");return J6(q,Q("USE_PUB_RTX"))}),O=h.map((j,q)=>{const Y=m[q];return{localSSRC:w[q],id:Y}});yield Tn(l.peerConnection.setLocalDescription({type:"offer",sdp:S}));try{yield O}catch(j){const q=l.remoteSDP.toString();throw yield Tn(l.peerConnection.setLocalDescription({type:"offer",sdp:S})),yield Tn(l.peerConnection.setRemoteDescription({type:"answer",sdp:q})),yield Tn(l.stopSending(m,!0)),j}yield Tn(l.applySimulcastEncodings(h,n)),yield Tn(l.applySendEncodings(h,n));const H=l.remoteSDP.toString(),B=l.logSDPExchange(S,"offer","local","send");return B==null||B(H),yield Tn(l.setRemoteDescription({type:"answer",sdp:H})),h.map((j,q)=>{const Y=m[q];return{localSSRC:w[q],id:Y}})}catch(h){throw h instanceof Re?h:new Re(X.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(h.toString()))}finally{u()}})()}async stopSending(n,i){const a=i?void 0:await this.mutex.lock("From P2PConnection.stopSending");try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");const l=this.peerConnection.getTransceivers().filter(m=>n.indexOf(m.mid)!==-1);if(l.length!==n.length)throw new Error("Transceivers' length (".concat(l.length,") doesn't match mids' length (").concat(n.length,") when trying to call P2PConnection.stopSending."));l.map(m=>{var E;m.direction="inactive",(E=m.stop)===null||E===void 0||E.call(m)});const u=await this.peerConnection.createOffer(),h=this.logSDPExchange(u.sdp||"","offer","local","stopSending");await this.peerConnection.setLocalDescription(u),this.remoteSDP.stopReceiving(n);const p=this.remoteSDP.toString();h==null||h(p),await this.setRemoteDescription({type:"answer",sdp:p})}catch(l){throw new Re(X.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(l.toString()))}finally{a&&a()}}async receive(n,i,a,l){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(n," before remoteSDP created."));const{mid:u,needExchangeSDP:h}=this.remoteSDP.send(n,i,a,l);if(h){const m=this.remoteSDP.toString(),E=this.logSDPExchange(m,"offer","remote","receive");await this.setRemoteDescription({type:"offer",sdp:m});const S=await this.peerConnection.createAnswer(),R=this.mungReceiveAnswerSDP(S.sdp,u,n);E==null||E(R||""),await this.peerConnection.setLocalDescription({type:"answer",sdp:R}),k.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(n," by exchanging SDP."))}else k.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(n," no need to exchange SDP."));const p=this.peerConnection.getTransceivers().find(m=>m.mid===u);if(!p||p.mid===null)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:p.receiver.track,mid:p.mid,transceiver:p}}catch(u){throw new Re(X.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(u.toString()))}}async mockReceive(n,i,a,l){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(n," before remoteSDP created."));const{mid:u,needExchangeSDP:h}=this.remoteSDP.send(n,i,a,l);if(h){const p=this.remoteSDP.toString(),m=this.logSDPExchange(p,"offer","remote","receive");await this.setRemoteDescription({type:"offer",sdp:p});const E=await this.peerConnection.createAnswer(),S=this.mungReceiveAnswerSDP(E.sdp,u,n);m==null||m(S||""),await this.peerConnection.setLocalDescription({type:"answer",sdp:S}),k.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(n," by exchanging SDP."))}else k.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(n," no need to exchange SDP."))}catch(u){throw new Re(X.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(u.toString()))}}async stopReceiving(n){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");this.remoteSDP.stopSending(n);const i=this.remoteSDP.toString(),a=this.logSDPExchange(i,"offer","remote","stopReceiving");await this.setRemoteDescription({type:"offer",sdp:i});const l=await this.peerConnection.createAnswer();a==null||a(l.sdp||""),await this.peerConnection.setLocalDescription(l)}catch(i){throw new Re(X.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(i.toString()))}}async restartICE(n){try{if(this.store.p2pTransport===eh.Auto&&(this.store.p2pTransport=eh.SdRtn,Rn().supportPCSetConfiguration&&this.peerConnection.setConfiguration(Mp.resolvePCConfiguration(this.spec,this.store.p2pTransport))),this.restartCnt>3&&(this.restartCnt=0,Rn().supportPCSetConfiguration&&this.peerConnection.setConfiguration(Mp.resolvePCConfiguration(this.spec,this.store.p2pTransport,++this.curTurnServerIndex))),!n){this.restartCnt++,this.isReady=!1;const i=await this.peerConnection.createOffer({iceRestart:!0});if(!i.sdp)throw new Error("Cannot restartICE because restart offer SDP does not exist.");const{iceParameters:a}=Wu(i.sdp);return this.store.descriptionStart(),this.direction===Lo.SEND_ONLY&&await this.peerConnection.setLocalDescription(i),a}if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");if(this.remoteSDP.restartICE(n),this.store.descriptionStart(),this.direction===Lo.RECEIVE_ONLY){this.restartCnt++,await this.setRemoteDescription({type:"offer",sdp:this.remoteSDP.toString()});const i=await this.peerConnection.createAnswer();if(!i.sdp)throw new Error("Cannot get answer sdp when trying to iceRestart.");const{iceParameters:a}=Wu(i.sdp);return await this.peerConnection.setLocalDescription(i),a}await this.setRemoteDescription({type:"answer",sdp:this.remoteSDP.toString()}),this.isReady=!0}catch(i){throw new Re(X.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(i.toString()))}}close(){var n;this.peerConnection.close(),this.peerConnection.onicecandidate=null,(n=this.onConnectionStateChange)===null||n===void 0||n.call(this,"closed"),this.tryUnbindTransportEvents(),this.unbindPCEvents(),this.unbindStatsEvents(),this.transport=void 0,this.statsFilter.destroy()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(n){return this.statsFilter.getVideoIsReady(n)}async updateEncoderConfig(n,i){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");const a=await this.peerConnection.createOffer(),l=this.mungSendOfferSDP(a.sdp,[i],[n]);this.remoteSDP.updateRecvMedia(n,i);const u=this.remoteSDP.toString(),h=this.logSDPExchange(l,"offer","local","updateEncoderConfig");await this.peerConnection.setLocalDescription({type:"offer",sdp:l}),h==null||h(u),await this.peerConnection.setRemoteDescription({type:"answer",sdp:u})}catch(a){throw new Re(X.EXCHANGE_SDP_FAILED,a.toString())}}async updateSendParameters(n,i){const a=this.peerConnection.getTransceivers().filter(l=>l.mid===n);a.length===1&&(this.isVP8Simulcast(i)?Or()||await this.applySimulcastEncodings(a,[i]):await this.applySendEncodings(a,[i]))}setStatsRemoteVideoIsReady(n,i){this.statsFilter.setVideoIsReady2(n,i)}async replaceTrack(n,i){const a=this.peerConnection.getTransceivers().find(l=>l.mid===i);a&&await a.sender.replaceTrack(n._mediaStreamTrack)}async getSelectedCandidatePair(){const n=this.peerConnection.getReceivers();if(n.length>0&&n[0].transport&&n[0].transport.iceTransport&&n[0].transport.iceTransport.getSelectedCandidatePair&&n[0].transport.iceTransport.getSelectedCandidatePair()){const i=n[0].transport.iceTransport,{local:a,remote:l}=i.getSelectedCandidatePair();return{local:id(id({},dl),{},{candidateType:a.type,protocol:a.protocol,address:a.address,port:a.port}),remote:id(id({},dl),{},{candidateType:l.type,protocol:l.protocol,address:l.address,port:l.port})}}return this.statsFilter.getSelectedCandidatePair()}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var n,i;Ge(n=["connected","completed"]).call(n,this.peerConnection.iceConnectionState)&&(this.isReady=!1),(i=this.onICEConnectionStateChange)===null||i===void 0||i.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var n;this.peerConnection.connectionState==="connected"&&(this.restartCnt=0),(n=this.onConnectionStateChange)===null||n===void 0||n.call(this,this.peerConnection.connectionState)},this.startICECandidate()}startICECandidate(){this.peerConnection.onicecandidate||(this.localCandidateCount=0,this.peerConnection.onicecandidate=n=>{if(n.candidate){var i;n.candidate.candidate&&((i=this.onLocalCandidate)===null||i===void 0||i.call(this,n.candidate.toJSON())),this.localCandidateCount+=1}else k.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount)})}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(n,i){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;const l={iceServers:[]};var u;return n.iceServers?l.iceServers=n.iceServers:n.turnServer&&n.turnServer.mode!=="off"&&(T0(n.turnServer.servers)?l.iceServers=n.turnServer.servers:(l.iceServers&&l.iceServers.push(...Mp.turnServerConfigToIceServers(n.turnServer.servers,i,a)),Q("USE_TURN_SERVER_OF_GATEWAY")&&l.iceServers&&n.turnServer.serversFromGateway&&l.iceServers.push(...Mp.turnServerConfigToIceServers(n.turnServer.serversFromGateway,i,a)),Ge(u=[eh.Relay,eh.SdRtn]).call(u,i)&&(l.iceTransportPolicy="relay"),Q("FORCE_TURN_TCP")?l.iceTransportPolicy="relay":n.turnServer.servers.concat(n.turnServer.serversFromGateway||[]).forEach(h=>{h.forceturn&&(l.iceTransportPolicy="relay")}))),Q("ENABLE_ENCODED_TRANSFORM")&&Rn().supportWebRTCEncodedTransform&&(l.encodedInsertableStreams=!0),k.debug("P2PConnection p2pTransport is ".concat(i)),l}static turnServerConfigToIceServers(n,i){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;const l=[],u=n.filter(p=>p.tcpport);k.debug("P2PConnection turnServers is ".concat(u,", current index is ").concat(a));const h=u.length>a?u[a]:u[0];switch(i){case eh.SdRtn:const p=n.filter(E=>{var S;return Ge(S=E.username).call(S,"glb:")&&E.turnServerURL==E.turnServerURL}),m=p.length>a?p[a]:p[0];m&&(l.push({username:m.username,credential:m.password,credentialType:"password",urls:"turn:".concat(Hu(m.turnServerURL),":").concat(m.tcpport,"?transport=udp")}),l.push({username:m.username,credential:m.password,credentialType:"password",urls:"turns:".concat(Hu(m.turnServerURL),":").concat(m.tcpport,"?transport=tcp")}));break;case eh.Relay:h&&(l.push({username:h.username,credential:h.password,credentialType:"password",urls:"turn:".concat(h.turnServerURL,":").concat(h.tcpport,"?transport=udp")}),l.push({username:h.username,credential:h.password,credentialType:"password",urls:"turns:".concat(Hu(h.turnServerURL),":").concat(h.tcpport,"?transport=tcp")}));break;default:h&&(l.push({username:h.username,credential:h.password,credentialType:"password",urls:"turn:".concat(h.turnServerURL,":").concat(h.tcpport,"?transport=udp")}),l.push({username:h.username,credential:h.password,credentialType:"password",urls:"turns:".concat(Hu(h.turnServerURL),":").concat(h.tcpport,"?transport=tcp")}),l.push({username:h.username,credential:h.password,credentialType:"password",urls:"stun:".concat(h.turnServerURL,":").concat(h.tcpport)}))}return l}tryBindTransportEvents(n){if(n){this.transport=n,n.onstatechange=()=>{var a;n!=null&&n.state&&((a=this.onDTLSTransportStateChange)===null||a===void 0||a.call(this,n.state))},n.onerror=a=>{var l;(l=this.onDTLSTransportError)===null||l===void 0||l.call(this,"error"in a?a.error:a)};const i=n.iceTransport;i&&(i.onstatechange=()=>{const a=n==null?void 0:n.iceTransport.state;var l;a&&((l=this.onICETransportStateChange)===null||l===void 0||l.call(this,a))},i.getSelectedCandidatePair&&(i.onselectedcandidatepairchange=()=>{if(i.getSelectedCandidatePair()){const{local:a,remote:l}=i.getSelectedCandidatePair()||{};if(a&&l){const u=a.address+":"+a.port,h=l.address+":"+l.port;k.info("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] selectedcandidatepairchange: local ").concat(JSON.stringify(ch(u)),", remote ").concat(JSON.stringify(ch(h))))}}}))}}tryUnbindTransportEvents(){this.transport&&(this.transport.onstatechange=null,this.transport.onerror=null,this.transport.iceTransport&&(this.transport.iceTransport.onstatechange=null))}async updateRtpSenderEncodings(n,i){var a;if(i||(i=this.peerConnection.getSenders().find(S=>S.track===n._mediaStreamTrack)),!i)return k.warn("[".concat(n.getTrackId(),"] no rtpSender found}"));if(this.isVP8Simulcast(n))return k.warn("[updateRtpSenderEncodings] Track is VP8 simulcast, please apply simulcast encodings");if(!Rn().supportSetRtpSenderParameters)return k.warn("[updateRtpSenderEncodings] Browser not support set rtp-sender parameters");const l={},u={};switch(n._optimizationMode){case"motion":l.degradationPreference="maintain-framerate";break;case"detail":l.degradationPreference="maintain-resolution";break;default:l.degradationPreference="balanced"}if(n._encoderConfig){var h;const{bitrateMax:S,frameRate:R,scaleResolutionDownBy:w}=n._encoderConfig;S&&(u.maxBitrate=1e3*S),Ge(h=n._hints).call(h,qn.LOW_STREAM)&&(R&&(u.maxFramerate=Ia(R)),w&&w>=1&&(u.scaleResolutionDownBy=w))}if(Q("DSCP_TYPE")&&Gl()){var p;const S=Q("DSCP_TYPE");Ge(p=["very-low","low","medium","high"]).call(p,S)&&(u.networkPriority=S)}const m=i.getParameters(),E=(a=m.encodings)===null||a===void 0?void 0:a[0];Or()&&!E&&(l.encodings=[u]),E&&Object.assign(E,u),Object.assign(m,l),k.debug("[".concat(n.getTrackId(),"] updateRtpSenderEncodings: ").concat(JSON.stringify(m.encodings))),await i.setParameters(m)}async applySendEncodings(n,i){try{if(!Rn().supportSetRtpSenderParameters||n.length!==i.length)return;for(let a=0;a<n.length;a++){const l=n[a],u=i[a];u instanceof sr&&!this.isVP8Simulcast(u)&&await this.updateRtpSenderEncodings(u,l.sender)}}catch{k.debug("[".concat(this.store.clientId,"] Apply RTPSendEncodings failed."))}}mungSendOfferSDP(n,i,a){const l=sa(n);return i.forEach((u,h)=>{const p=a[h],m=l.mediaDescriptions.find(E=>E.attributes.mid===p);m&&(up(m,u),t8(m,u,this.store.codec))}),Bu(l)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=n=>{var i;(i=this.onFirstAudioReceived)===null||i===void 0||i.call(this,n)},this.statsFilter.onFirstVideoReceived=n=>{var i;(i=this.onFirstVideoReceived)===null||i===void 0||i.call(this,n)},this.statsFilter.onFirstAudioDecoded=n=>{var i;(i=this.onFirstAudioDecoded)===null||i===void 0||i.call(this,n)},this.statsFilter.onFirstVideoDecoded=(n,i,a)=>{var l;(l=this.onFirstVideoDecoded)===null||l===void 0||l.call(this,n,i,a)},this.statsFilter.onSelectedLocalCandidateChanged=(n,i)=>{var a;(a=this.onSelectedLocalCandidateChanged)===null||a===void 0||a.call(this,n,i)},this.statsFilter.onSelectedRemoteCandidateChanged=(n,i)=>{var a;(a=this.onSelectedRemoteCandidateChanged)===null||a===void 0||a.call(this,n,i)},this.statsFilter.onFirstVideoDecodedTimeout=n=>{var i;(i=this.onFirstVideoDecodedTimeout)===null||i===void 0||i.call(this,n)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0,this.statsFilter.onFirstVideoDecodedTimeout=void 0}async applySimulcastForFirefox(n,i){if(n.length===i.length)for(let m=0;m<n.length;m++){var a,l,u,h,p;const E=n[m],S=i[m];if(S instanceof sr&&!Ge(a=S._hints).call(a,qn.LOW_STREAM)&&(l=S._encoderConfig)!==null&&l!==void 0&&l.bitrateMax&&((u=S._encoderConfig)===null||u===void 0?void 0:u.bitrateMax)>200&&(h=S._scalabilityMode)!==null&&h!==void 0&&h.numSpatialLayers&&((p=S._scalabilityMode)===null||p===void 0?void 0:p.numSpatialLayers)>1&&this.store.codec==="vp8"){const R={},w={high:1e3*(S._encoderConfig.bitrateMax-50),medium:5e4};R.encodings=[{rid:"m",active:!0,maxBitrate:w.medium,scaleResolutionDownBy:4},{rid:"h",active:!0,maxBitrate:w.high}];const O=E.sender.getParameters();await E.sender.setParameters(Object.assign(O,R))}}}async applySimulcastEncodings(n,i){if(!Or()&&n.length===i.length)for(let a=0;a<n.length;a++){const l=i[a];if(l instanceof sr&&this.isVP8Simulcast(l)){const u=n[a],h={},p={high:1e3*(l._encoderConfig.bitrateMax-50),medium:5e4};h.encodings=[{active:!0,adaptivePtime:!1,networkPriority:"high",priority:"high",maxBitrate:p.high},{active:!0,adaptivePtime:!1,networkPriority:"low",priority:"low",maxBitrate:p.medium,scaleResolutionDownBy:4}];const m=u.sender.getParameters();await u.sender.setParameters(Object.assign(m,h))}}}isVP8Simulcast(n){var i,a,l,u,h;return!!(n instanceof sr&&Q("SIMULCAST")&&this.store.codec==="vp8"&&!Ge(i=n._hints).call(i,qn.LOW_STREAM)&&(a=n._encoderConfig)!==null&&a!==void 0&&a.bitrateMax&&((l=n._encoderConfig)===null||l===void 0?void 0:l.bitrateMax)>200&&(u=n._scalabilityMode)!==null&&u!==void 0&&u.numSpatialLayers&&((h=n._scalabilityMode)===null||h===void 0?void 0:h.numSpatialLayers)>1)}logSDPExchange(n,i,a,l){if(Q("SDP_LOGGING"))return k.upload("[".concat(this.store.clientId,"] exchanging ").concat(a," ").concat(i," SDP during P2PConnection.").concat(l,`
`),n),i==="offer"?u=>{this.logSDPExchange(u,"answer",a==="local"?"remote":"local",l)}:void 0}async muteLocal(n){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");const i=this.peerConnection.getTransceivers().filter(h=>h.mid&&n.indexOf(h.mid)!==-1);if(i.length!==n.length)throw new Error("Transceivers' length doesn't match mids' length.");i.map(h=>{h.direction="inactive"});const a=await this.peerConnection.createOffer(),l=this.logSDPExchange(a.sdp||"","offer","local","muteLocal");await this.peerConnection.setLocalDescription(a),this.remoteSDP.muteRemote(n);const u=this.remoteSDP.toString();l==null||l(u),await this.setRemoteDescription({type:"answer",sdp:u})}catch(i){throw new Re(X.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(i.toString()))}}async unmuteLocal(n){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");const i=this.peerConnection.getTransceivers().filter(h=>h.mid&&n.indexOf(h.mid)!==-1);if(i.length!==n.length)throw new Error("Transceivers' length doesn't match mids' length.");i.map(async h=>{h.direction="sendonly"});const a=await this.peerConnection.createOffer(),l=this.logSDPExchange(a.sdp||"","offer","local","unmuteLocal");await this.peerConnection.setLocalDescription(a),this.remoteSDP.unmuteRemote(n);const u=this.remoteSDP.toString();l==null||l(u),await this.setRemoteDescription({type:"answer",sdp:u})}catch(i){throw new Re(X.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(i.toString()))}}async getRemoteSSRC(n,i){var a;if(i=i??((a=this.currentRemoteDescription)===null||a===void 0?void 0:a.sdp)){var l;const u=(l=sa(i).mediaDescriptions.find(h=>h.attributes.mid===n))===null||l===void 0?void 0:l.attributes.ssrcs;return u==null?void 0:u[0].ssrcId}}async setRemoteDescription(n){var i;await this.peerConnection.setRemoteDescription(n),Ge(i=["connected","completed"]).call(i,this.peerConnection.iceConnectionState)||(this.isReady=!0,this.addRemoteCandidate())}mungReceiveAnswerSDP(n,i,a){const l=sa(n),u=l.mediaDescriptions.find(h=>h.attributes.mid===i);return u&&a===it.AUDIO&&u.media.mediaType==="audio"&&dp(u),Bu(l)}},st(cr.prototype,"establish",[tc],Object.getOwnPropertyDescriptor(cr.prototype,"establish"),cr.prototype),st(cr.prototype,"connect",[tc],Object.getOwnPropertyDescriptor(cr.prototype,"connect"),cr.prototype),st(cr.prototype,"receive",[tc],Object.getOwnPropertyDescriptor(cr.prototype,"receive"),cr.prototype),st(cr.prototype,"mockReceive",[tc],Object.getOwnPropertyDescriptor(cr.prototype,"mockReceive"),cr.prototype),st(cr.prototype,"stopReceiving",[tc],Object.getOwnPropertyDescriptor(cr.prototype,"stopReceiving"),cr.prototype),st(cr.prototype,"restartICE",[tc],Object.getOwnPropertyDescriptor(cr.prototype,"restartICE"),cr.prototype),st(cr.prototype,"close",[tc],Object.getOwnPropertyDescriptor(cr.prototype,"close"),cr.prototype),st(cr.prototype,"updateEncoderConfig",[tc],Object.getOwnPropertyDescriptor(cr.prototype,"updateEncoderConfig"),cr.prototype),st(cr.prototype,"updateSendParameters",[tc],Object.getOwnPropertyDescriptor(cr.prototype,"updateSendParameters"),cr.prototype),st(cr.prototype,"replaceTrack",[tc],Object.getOwnPropertyDescriptor(cr.prototype,"replaceTrack"),cr.prototype),st(cr.prototype,"muteLocal",[tc],Object.getOwnPropertyDescriptor(cr.prototype,"muteLocal"),cr.prototype),st(cr.prototype,"unmuteLocal",[tc],Object.getOwnPropertyDescriptor(cr.prototype,"unmuteLocal"),cr.prototype),cr);function tc(e,n,i){const a=e[n];if(typeof a!="function")throw new Error("Cannot use mutex on object property.");return i.value=async function(){const l=this.mutex,u=await l.lock("From P2PConnection.".concat(n));try{for(var h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];return await a.apply(this,p)}finally{u()}},i}let kc=function(e){return e.SEND_ONLY="SEND_ONLY",e.RECEIVE_ONLY="RECEIVE_ONLY",e}({});var dH,hH,fH,pH,mH,gH,vH,EH,_H,SH,yH,Er;function CH(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),i.push.apply(i,a)}return i}function oy(e){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?CH(Object(i),!0).forEach(function(a){W(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):CH(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}let M0e=(dH=Mc(kc.SEND_ONLY),hH=Mc(kc.SEND_ONLY),fH=Mc(),pH=Mc(kc.RECEIVE_ONLY),mH=Mc(kc.RECEIVE_ONLY),gH=Mc(kc.RECEIVE_ONLY),vH=Mc(kc.RECEIVE_ONLY),EH=Mc(kc.RECEIVE_ONLY),_H=Mc(kc.RECEIVE_ONLY),SH=Mc(),yH=Mc(kc.RECEIVE_ONLY),Er=class extends br{get state(){return this._state}set state(e){const n=this._state;this._state=e,this.emit(vt.StateChange,n,this._state)}constructor(e,n){super(),W(this,"isPlanB",!1),W(this,"store",void 0),W(this,"statsUploader",void 0),W(this,"sendConnection",void 0),W(this,"recvConnection",void 0),W(this,"localTrackMap",new Map),W(this,"remoteUserMap",new Map),W(this,"localDataChannels",[]),W(this,"pendingLocalTracks",[]),W(this,"pendingRemoteTracks",[]),W(this,"statsCollector",void 0),W(this,"dtlsFailedCount",0),W(this,"sendMutex",void 0),W(this,"recvMutex",void 0),W(this,"_state",Un.Disconnected),W(this,"_restartStates",["disconnected","failed"]),W(this,"reconnectInterval",void 0),W(this,"uploadUnplinkStarted",!1),W(this,"uploadDownlinkStarted",!1),W(this,"uplinkStateUploadInterval",void 0),W(this,"downlinkStatsUploadInterval",void 0),W(this,"handleMuteLocalTrack",async(i,a,l)=>{const u=await this.sendMutex.lock("Locking from P2PChannel2.handleMuteLocalTrack");try{if(!this.sendConnection||this.state!==Un.Connected)return void l(new Re(X.INVALID_OPERATION,"Cannot call P2PChannel2.handleMuteLocalTrack before sendConnection established."));const m=this.filterTobeMutedTracks(i);if(m.length===0)return void a();const E=m.find(O=>O[0]==="videoLowTrack");E&&E[1].track._originMediaStreamTrack.stop(),await this.sendConnection.muteLocal(m.map(O=>{let[,{id:H}]=O;return H}));let S=!1;var h,p;i.trackMediaType==="video"?S=!((h=this.localTrackMap.get(Fe.LocalAudioTrack))===null||h===void 0||!h.track._muted):S=((p=this.localTrackMap.get(Fe.LocalVideoTrack))===null||p===void 0?void 0:p.id)===void 0;const R=this.createMuteMessage(m);await Qn(this,vt.RequestMuteLocal,R);const w=i.trackMediaType==="video"?$u.MUTE_LOCAL_VIDEO:$u.MUTE_LOCAL_AUDIO;await Qn(this,vt.RequestP2PMuteLocal,{action:w,message:R,isMuteAll:S}),a()}catch(m){l(m)}finally{u()}}),W(this,"handleUnmuteLocalTrack",async(i,a,l)=>{const u=await this.sendMutex.lock("Locking from P2PChannel2.handleUnmuteLocalTrack");try{if(!this.sendConnection||this.state!==Un.Connected)return void l(new Re(X.INVALID_OPERATION,"Cannot call P2PChannel2.handleUnmuteLocalTrack before sendConnection established."));const h=this.filterTobeUnmutedTracks(i);if(h.length===0)return void a();await this.sendConnection.unmuteLocal(h.map(E=>{let[,{id:S}]=E;return S}));const p=this.createUnmuteMessage(h),m=i.trackMediaType==="video"?$u.UNMUTE_LOCAL_VIDEO:$u.UNMUTE_LOCAL_AUDIO;await Qn(this,vt.RequestP2PMuteLocal,{action:m,message:p}),a()}catch(h){l(h)}finally{u()}}),W(this,"handleUpdateVideoEncoder",async(i,a,l,u)=>{let h;typeof u=="boolean"&&u||(h=await this.sendMutex.lock("Locking from P2PChannel2.handleUpdateVideoEncoder"));try{const m=this.localTrackMap.get(Fe.LocalVideoTrack);if(!this.sendConnection||!m||m.track!==i||this.state!==Un.Connected)return void a();const{id:E,track:S}=m;E&&(await this.sendConnection.updateSendParameters(E,S),await this.sendConnection.updateEncoderConfig(E,S),this.emit(vt.UpdateVideoEncoder,S)),a()}catch(m){l(m)}finally{var p;(p=h)===null||p===void 0||p()}}),W(this,"handleUpdateVideoSendParameters",async(i,a,l)=>{const u=await this.sendMutex.lock("Locking from P2PChannel2.handleUpdateVideoSendParameters");try{const h=this.localTrackMap.get(Fe.LocalVideoTrack);if(!this.sendConnection||!h||h.track!==i||this.state!==Un.Connected)return void a();const{id:p,track:m}=h;p&&await this.sendConnection.updateSendParameters(p,m),a()}catch(h){l(h)}finally{u()}}),W(this,"handleReplaceTrack",async(i,a,l,u)=>{let h;k.debug("[".concat(this.store.clientId,"] P2PChannel2 handleReplaceTrack for [track-id-").concat(i.getTrackId(),"]")),typeof u=="boolean"&&u||(h=await this.sendMutex.lock("From P2PChannel2.handleReplaceTrack"));try{var p;const E=Array.from(this.localTrackMap.entries()).find(S=>{let[,{track:R}]=S;return i===R});if(!this.sendConnection||!E||E[1].id===void 0||this.state!==Un.Connected)return void a();if(await((p=this.sendConnection)===null||p===void 0?void 0:p.replaceTrack(i,E[1].id)),E[0]===Fe.LocalVideoTrack&&Rn().supportDualStreamEncoding){const S=this.localTrackMap.get(Fe.LocalVideoLowTrack);if(S){const R=i._mediaStreamTrack.clone();S.track._originMediaStreamTrack.stop(),S.track._mediaStreamTrack=R,S.track._originMediaStreamTrack=R,await new et((w,O)=>{this.handleReplaceTrack(S.track,w,O,!0)})}}a()}catch(E){l(E)}finally{var m;(m=h)===null||m===void 0||m()}}),W(this,"handleGetLocalVideoStats",i=>{i(this.statsCollector.getLocalVideoTrackStats())}),W(this,"handleGetLocalAudioStats",i=>{i(this.statsCollector.getLocalAudioTrackStats())}),W(this,"handleGetRemoteVideoStats",i=>this.statsCollector.getRemoteVideoTrackStats(i.uid)[i.uid]),W(this,"handleGetRemoteAudioStats",i=>this.statsCollector.getRemoteAudioTrackStats(i.uid)[i.uid]),this.store=e,this.statsCollector=n,this.statsCollector.addP2PChannel(this),this.statsUploader=new U8(e),this.bindStatsUploaderEvents(),this.sendMutex=new qi("P2PChannel2-send-mutex",e.clientId),this.recvMutex=new qi("P2PChannel2-recv-mutex",e.clientId),this.reconnectInterval=window.setInterval(()=>{[this.sendConnection,this.recvConnection].forEach(i=>{i&&(i.iceConnectionState!=="disconnected"&&i.iceConnectionState!=="failed"||this.handleDisconnect(i.direction))})},Q("ICE_RESTART_INTERVAL"))}async startP2PConnection(e,n){throw new Re(X.NOT_SUPPORTED,"p2p mode does not support startP2PConnection.")}async connect(e){throw new Re(X.NOT_SUPPORTED,"p2p mode does not support connect.")}async startP2P(e,n){let i;try{if(n){this.recvConnection&&(k.warning("[".concat(this.store.clientId,"] P2PChannel.startP2P reset recvConnection.")),this.recvConnection.close(),this.unbindConnectionEvents(this.recvConnection)),i=await this.recvMutex.lock("From P2PChannel.startP2P"),this.recvConnection=new uH(e,this.store,Lo.RECEIVE_ONLY),this.bindConnectionEvents(this.recvConnection);const a=await this.recvConnection.establish(n);return{iceParameters:a.iceParameters,dtlsParameters:a.dtlsParameters,sdp:a.sdp}}{this.state=Un.New,this.sendConnection&&(k.warning("[".concat(this.store.clientId,"] P2PChannel.startP2P reset sendConnection.")),this.sendConnection.close(),this.unbindConnectionEvents(this.sendConnection)),i=await this.sendMutex.lock("From P2PChannel.startP2P"),this.sendConnection=new uH(e,this.store),this.store.peerConnectionStart(),this.bindConnectionEvents(this.sendConnection);const a=await this.sendConnection.establish();return{iceParameters:a.iceParameters,dtlsParameters:a.dtlsParameters,sdp:a.sdp}}}finally{i&&i()}}async p2pConnect(e){if(!this.sendConnection)throw new Re(X.UNEXPECTED_ERROR,"Cannot P2PChannel2.p2pConnect before P2PChannel2.startP2PConnection .");this.store.peerConnectionStart(),await this.sendConnection.connect(e),this.statsUploader.startUploadTransportStats(),this.statsUploader.startUploadExtensionUsageStats(),this.state=Un.Connected}async addRemoteCandidate(e,n){if(n===Lo.RECEIVE_ONLY){if(!this.sendConnection)throw new Re(X.UNEXPECTED_ERROR,"Cannot P2PChannel2.connect before P2PChannel2.addRemoteCandidate .");await this.sendConnection.addRemoteCandidate(e)}else{if(!this.recvConnection)throw new Re(X.UNEXPECTED_ERROR,"Cannot P2PChannel2.connect before P2PChannel2.addRemoteCandidate .");await this.recvConnection.addRemoteCandidate(e)}}publish(e,n,i){var a=this;return ss(function*(){const l=yield Tn(a.sendMutex.lock("From P2PChannel.publish"));try{if(!a.sendConnection||a.state!==Un.Connected){a.throwIfTrackTypeNotMatch(e);const E=e.filter(S=>a.pendingLocalTracks.indexOf(S)===-1);return void(a.pendingLocalTracks=a.pendingLocalTracks.concat(E))}a.store.pubId=a.store.pubId+1,Zi.markPublishStart(a.store.clientId,a.store.pubId);const u=a.filterTobePublishedTracks(e,n,i);if(u.length===0)return void(yield Tn(a.tryToUnmuteAudio(e)));u.forEach(E=>{let{track:S,type:R}=E;const w=Date.now();a.store.publish(S.getTrackId(),R===Fe.LocalAudioTrack?"audio":"video",w)}),a.bindLocalTrackEvents(u);const h=yield Tn(a.sendConnection.send(u.map(E=>{let{track:S}=E;return S}),a.store.codec,a.store.audioCodec)),p=(yield Tn(h.next())).value,m=a.createGatewayPublishMessage(u,p);try{yield m}catch(E){throw h.throw(E),(E==null?void 0:E.code)===X.WS_ABORT&&u.forEach(S=>{let{track:R}=S;a.pendingLocalTracks.indexOf(R)===-1&&a.pendingLocalTracks.push(R)}),a.unbindLocalTrackEvents(u),E}yield Tn(h.next()),u.forEach(E=>{let{type:S}=E;a.statsCollector.addLocalStats(S)}),a.statsUploader.startUploadOutboundStats(),a.assignLocalTracks(u,p),u.forEach(E=>{let{track:S,type:R}=E;const w=Date.now();a.store.publish(S.getTrackId(),R===Fe.LocalAudioTrack?"audio":"video",void 0,w)}),a.startUploadUplinkState()}finally{l()}})()}async unpublish(e){if(!this.sendConnection||this.state!==Un.Connected)return void(e.length===0?this.pendingLocalTracks.length=0:this.pendingLocalTracks=this.pendingLocalTracks.filter(l=>!Ge(e).call(e,l)));const n=this.filterTobeUnpublishedTracks(e);if(n.length===0)return;const i=n.find(l=>l[0]==="videoLowTrack");i&&i[1].track.close();const a=this.createGatewayUnpublishMessage(n);if(await this.sendConnection.stopSending(n.map(l=>{let[,{id:u}]=l;return u})),this.withdrawLocalTracks(n),this.unbindLocalTrackEvents(n.map(l=>{let[u,{track:h}]=l;return{type:u,track:h}})),n.forEach(l=>{let[u]=l;this.statsCollector.removeLocalStats(u)}),this.localTrackMap.size===0&&(this.statsUploader.stopUploadOutboundStats(),this.stopUploadUplinkState()),this.sendConnection&&this.state===Un.Connected)return i&&i[1].track.close(),a;e.forEach(l=>{const u=this.pendingLocalTracks.indexOf(l);u!==-1&&this.pendingLocalTracks.splice(u,1)})}startUploadUplinkState(){if(this.uploadUnplinkStarted)return;this.uploadUnplinkStarted=!0,this.uplinkStateUploadInterval&&window.clearInterval(this.uplinkStateUploadInterval);const e=()=>{const n=[],i=[];Array.from(this.localTrackMap.entries()).forEach(a=>{let[l,{track:u,ssrcs:h}]=a;const p={stream_type:xpe(u,l),ssrcs:h};u._muted||!u._enabled?n.push(p):i.push(p)}),n.length>0&&n.forEach(a=>{Qn(this,vt.RequestMuteLocal,[a])}),i.length>0&&i.forEach(a=>{Qn(this,vt.RequestUnmuteLocal,[a])})};e(),this.uplinkStateUploadInterval=window.setInterval(()=>{e()},3e3)}stopUploadUplinkState(){this.uploadUnplinkStarted&&(this.uploadUnplinkStarted=!1,this.uplinkStateUploadInterval&&window.clearInterval(this.uplinkStateUploadInterval))}publishLowStream(e){return ss(function*(){throw new Re(X.NOT_SUPPORTED,"p2p mode does not support publishLowStream.")})()}async republish(){this.pendingLocalTracks.length>0&&(k.debug("[".concat(this.store.clientId,"] Emit P2PChannelEvents.RequestRePublish to republish tracks.")),await zi(this,vt.RequestRePublish,this.pendingLocalTracks),this.emit(vt.MediaReconnectEnd,this.store.uid),this.pendingLocalTracks=[])}async unpublishLowStream(){throw new Re(X.NOT_SUPPORTED,"p2p mode does not support unpublishLowStream.")}async subscribe(e,n,i,a){var l;if(!this.recvConnection)throw new Re(X.INVALID_OPERATION,"Cannot subscribe remote user when recvConnection disconnected.");if((l=this.remoteUserMap.get(e))!==null&&l!==void 0&&l.has(n))return;const{track:u,mid:h,transceiver:p}=await this.recvConnection.receive(n,[{ssrcId:i}],String(e.uid),a);n===it.AUDIO?(e._audioTrack?e._audioTrack._updateOriginMediaStreamTrack(u):(e._audioTrack=new np(u,e.uid,e._uintid,this.store),k.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote audio track: ").concat(e._audioTrack.getTrackId()))),p&&e._audioTrack._updateRtpTransceiver(p),this.bindRemoteTrackEvents(e,e._audioTrack)):(e._videoSSRC=i,e._videoTrack?e._videoTrack._updateOriginMediaStreamTrack(u):(e._videoTrack=new tp(u,e.uid,e._uintid,this.store),k.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote video track: ").concat(e._videoTrack.getTrackId()))),p&&e._videoTrack._updateRtpTransceiver(p),this.bindRemoteTrackEvents(e,e._videoTrack));const m=this.remoteUserMap.get(e);m?m.set(n,h):this.remoteUserMap.set(e,new Map([[n,h]])),this.statsCollector.addRemoteStats(e.uid),this.statsUploader.startUploadInboundStats(),this.startUploadDownlinkState();const E=this.pendingRemoteTracks.findIndex(S=>{let{user:R,kind:w}=S;return R.uid===e.uid&&n===w});E!==-1&&(this.pendingRemoteTracks.splice(E,1),this.emit(vt.MediaReconnectEnd,e.uid))}async mockSubscribe(e,n,i,a){if(!this.recvConnection)throw new Re(X.INVALID_OPERATION,"Cannot subscribe remote user when recvConnection disconnected.");await this.recvConnection.mockReceive(n,[{ssrcId:i}],String(e.uid),a)}async unsubscribe(e,n,i){const a=this.pendingRemoteTracks.filter(u=>{let{user:h,kind:p}=u;return n!==void 0?h.uid===e.uid&&n===p:h.uid===e.uid});if(a.forEach(u=>{const h=this.pendingRemoteTracks.indexOf(u);this.pendingRemoteTracks.splice(h,1)}),this.recvConnection||i||a.forEach(u=>{let{kind:h}=u;var p;if(h===it.AUDIO)(p=e._audioTrack)===null||p===void 0||p._destroy(),e._audioTrack=void 0;else if(h===it.VIDEO){var m;(m=e._videoTrack)===null||m===void 0||m._destroy(),e._videoTrack=void 0}}),!this.recvConnection)return;const l=this.filterTobeUnSubscribedTracks(e,n);l.length!==0&&(await this.recvConnection.stopReceiving(l.map(u=>{let[,{id:h}]=u;return h})),this.withdrawRemoteTracks(l),this.remoteUserMap.size===0&&(this.statsUploader.stopUploadInboundStats(),this.stopUploadDownlinkState()),l.forEach(u=>{let[h,{kind:p}]=u;var m,E;if(p===it.VIDEO&&h._videoSSRC&&((m=this.recvConnection)===null||m===void 0||m.setStatsRemoteVideoIsReady(h._videoSSRC,!1)),p===it.VIDEO)this.unbindRemoteTrackEvents(h._videoTrack),i||((E=h._videoTrack)===null||E===void 0||E._destroy(),h._videoTrack=void 0);else if(p===it.AUDIO){var S;this.unbindRemoteTrackEvents(h._audioTrack),!i&&((S=h._audioTrack)===null||S===void 0||S._destroy(),h._audioTrack=void 0)}}),l.forEach(u=>{let[,{kind:h}]=u;Qn(this,vt.RequestP2PMuteRemote,h)}))}startUploadDownlinkState(){if(this.uploadDownlinkStarted)return;this.uploadDownlinkStarted=!0,this.downlinkStatsUploadInterval&&window.clearInterval(this.downlinkStatsUploadInterval);const e=()=>Array.from(this.remoteUserMap.entries()).forEach(n=>{let[,i]=n;[it.VIDEO,it.AUDIO].forEach(a=>{i.has(a)?Qn(this,vt.RequestP2PUnmuteRemote,a):Qn(this,vt.RequestP2PMuteRemote,a)})});e(),this.downlinkStatsUploadInterval=window.setInterval(()=>{e()},3e3)}stopUploadDownlinkState(){this.uploadDownlinkStarted&&(this.uploadDownlinkStarted=!1,this.downlinkStatsUploadInterval&&window.clearInterval(this.downlinkStatsUploadInterval))}getAllDataChannels(){return this.localDataChannels}async massSubscribe(e){throw new Re(X.NOT_SUPPORTED,"p2p mode does not support massSubscribe.")}async massSubscribeNoLock(e){throw new Re(X.NOT_SUPPORTED,"p2p mode does not support massSubscribeNoLock.")}async massUnsubscribe(e){throw new Re(X.NOT_SUPPORTED,"p2p mode does not support massUnsubscribe.")}async massUnsubscribeNoLock(e){throw new Re(X.NOT_SUPPORTED,"p2p mode does not support massUnsubscribeNoLock.")}async muteRemote(e,n){if(!this.recvConnection)return;const i=this.remoteUserMap.get(e);if(!i)return void k.warning("[".concat(this.store.clientId,"] P2PChannel2.muteRemote has no remote user ").concat(e.uid,"."));if(!i.get(n))return void k.warning("[".concat(this.store.clientId,"] P2PChannel2.muteRemote has no remote user ").concat(e.uid," media type ").concat(n,"."));const a=n===it.VIDEO?e._videoSSRC:e._audioSSRC;a!==void 0&&this.recvConnection.setStatsRemoteVideoIsReady(a,!1)}async unmuteRemote(e,n){return this.unmuteRemoteNoLock(e,n)}async unmuteRemoteNoLock(e,n){if(!this.recvConnection)return;const i=this.remoteUserMap.get(e);if(!i)return void k.warning("[".concat(this.store.clientId,"] P2PChannel2.unmuteRemote has no remote user ").concat(e.uid,"."));i.get(n)||k.warning("[".concat(this.store.clientId,"] P2PChannel2.unmuteRemote has no remote user ").concat(e.uid," media type ").concat(n,"."))}getAllTracks(e){const n=this.localTrackMap.get(Fe.LocalAudioTrack);if((n==null?void 0:n.track)instanceof ui){const i=n.track;return Array.from(this.localTrackMap.entries()).filter(a=>{let[l]=a;return l!==Fe.LocalAudioTrack}).filter(a=>{let[l]=a;return!(e&&l===Fe.LocalVideoLowTrack)}).map(a=>{let[,{track:l}]=a;return l}).concat(i.trackList)}return Array.from(this.localTrackMap.entries()).filter(i=>{let[a]=i;return!(e&&a===Fe.LocalVideoLowTrack)}).map(i=>{let[,{track:a}]=i;return a})}reportPublishEvent(e,n,i,a,l){if(e){const h=this.localTrackMap.get(Fe.LocalAudioTrack),p=a?this.localTrackMap.get(Fe.LocalVideoLowTrack):this.localTrackMap.get(Fe.LocalVideoTrack);ct.publish(this.store.sessionId,{eventElapse:Zi.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:e,ec:n,audioName:h==null?void 0:h.track.getTrackLabel(),videoName:p==null?void 0:p.track.getTrackLabel(),screenshare:(p==null?void 0:p.track._hints.indexOf(qn.SCREEN_TRACK))!==-1,audio:!!h,video:!!p,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:l})}else{var u;i||(i=[]);const h=i.find(m=>m instanceof Mr),p=a?(u=this.localTrackMap.get(Fe.LocalVideoTrack))===null||u===void 0?void 0:u.track:i.find(m=>m instanceof sr);ct.publish(this.store.sessionId,{eventElapse:Zi.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:e,ec:n,audioName:h==null?void 0:h.getTrackLabel(),videoName:p==null?void 0:p.getTrackLabel(),screenshare:(p==null?void 0:p._hints.indexOf(qn.SCREEN_TRACK))!==-1,audio:!!h,video:!!p,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:l})}}reportSubscribeEvent(e,n,i,a){const l=a===it.VIDEO?i._videoSSRC:i._audioSSRC;l&&ct.subscribe(this.store.sessionId,{succ:e,ec:n,video:a===it.VIDEO,audio:a===it.AUDIO,peerid:i.uid,subscribeRequestid:a===it.VIDEO?i._videoSSRC:i._audioSSRC,p2pid:this.store.p2pId,eventElapse:Zi.measureFromSubscribeStart(this.store.clientId,l)})}reset(){k.debug("[".concat(this.store.clientId,"] P2PChannel2.reset")),this.sendMutex=new qi("P2PChannel2-send-mutex",this.store.clientId),this.sendMutex=new qi("P2PChannel2-recv-mutex",this.store.clientId),this.sendConnection&&(this.sendConnection.close(),this.unbindConnectionEvents(this.sendConnection),this.sendConnection=void 0),this.recvConnection&&(this.recvConnection.close(),this.unbindConnectionEvents(this.recvConnection),this.recvConnection=void 0),this.statsUploader.stopUploadOutboundStats(),this.statsUploader.stopUploadInboundStats(),this.statsUploader.stopUploadTransportStats(),this.statsUploader.stopUploadExtensionUsageStats(),this.stopUploadUplinkState(),this.stopUploadDownlinkState(),this.unbindLocalTrackEvents(),this.unbindAllRemoteTrackEvents(),this.unbindRtpTransceiver();const e=this.localTrackMap.get(Fe.LocalAudioTrack);if((e==null?void 0:e.track)instanceof ui){if(e.track.trackList.length>0){const n=e.track;e.track.trackList.forEach(i=>{n.removeAudioTrack(i)})}e.track.close()}this.localTrackMap.clear(),this.remoteUserMap.clear(),this.statsCollector.removeRemoteStats(),this.statsCollector.removeLocalStats(),this.dtlsFailedCount=0,this.pendingLocalTracks=[],this.pendingRemoteTracks=[],this.reconnectInterval&&(window.clearInterval(this.reconnectInterval),this.reconnectInterval=void 0),this.state=Un.Disconnected}getStats(e){var n,i;return e?(i=this.recvConnection)===null||i===void 0?void 0:i.getStats():(n=this.sendConnection)===null||n===void 0?void 0:n.getStats()}getRemoteVideoIsReady(e){var n;return((n=this.recvConnection)===null||n===void 0?void 0:n.getRemoteVideoIsReady(e))||!1}getLocalAudioVolume(){const e=this.localTrackMap.get(Fe.LocalAudioTrack);if(e)return e.track.getVolumeLevel()}getLocalVideoSize(){const e=this.localTrackMap.get(Fe.LocalVideoTrack);if(e)return{width:e.track.videoWidth||0,height:e.track.videoHeight||0}}getEncoderConfig(e){const n=this.localTrackMap.get(e);return n&&n.track instanceof sr||n&&n.track instanceof Mr?n.track._encoderConfig:void 0}getLocalMedia(e){return this.localTrackMap.get(e)}hasLocalMedia(){return this.localTrackMap.size>0}hasRemoteMedia(e,n){if(!e)return this.remoteUserMap.size>0;const i=this.remoteUserMap.get(e);return!!i&&(!n||i.has(n))}async hasRemoteMediaWithLock(e,n){if(!e)return this.remoteUserMap.size>0;const i=this.remoteUserMap.get(e);return!!i&&(!n||i.has(n))}getRemoteMedia(e){var n;const i=Array.from(ca(n=this.remoteUserMap).call(n)).find(a=>a.uid===e);return i?{audioTrack:i.audioTrack,audioSSRC:i._audioSSRC,videoTrack:i.videoTrack,videoSSRC:i._videoSSRC}:{}}getAudioLevels(){let e=Array.from(this.remoteUserMap.entries()).map(i=>{let[a]=i;return{uid:a.uid,level:a.audioTrack?100*a.audioTrack._source.getAccurateVolumeLevel():0}});const n=this.localTrackMap.get(Fe.LocalAudioTrack);return n&&e.push({level:100*n.track._source.getAccurateVolumeLevel(),uid:this.store.uid}),e=$d(e).call(e,(i,a)=>i.level-a.level),e}async disconnectForReconnect(){this.sendConnection&&this.recvConnection&&(k.debug("[".concat(this.store.clientId,"] P2PChannel2.disconnectForReconnect closing P2PConnection")),this.state=Un.Reconnecting,Q("KEEP_LAST_FRAME")&&this.remoteUserMap.size!==0&&Array.from(this.remoteUserMap.entries()).forEach(e=>{let[n]=e;var i;n._videoTrack&&n._videoTrack._player&&((i=n._videoTrack._player.getVideoElement())===null||i===void 0||i.pause(),n._videoTrack._player.isKeepLastFrame=!0,n._videoTrack._originMediaStreamTrack.stop())}),this.sendConnection.close(),this.unbindConnectionEvents(this.sendConnection),this.sendConnection=void 0,this.recvConnection.close(),this.unbindConnectionEvents(this.recvConnection),this.recvConnection=void 0,this.localTrackMap.size!==0&&(Array.from(this.localTrackMap.entries()).forEach(e=>{var n;let[i,{track:a}]=e;switch(i){case Fe.LocalVideoTrack:Ge(n=a._hints).call(n,qn.LOW_STREAM)?a.close():this.pendingLocalTracks.push(a);break;case Fe.LocalAudioTrack:a instanceof ui?this.pendingLocalTracks=this.pendingLocalTracks.concat(a.trackList):this.pendingLocalTracks.push(a);case Fe.LocalVideoLowTrack:}}),this.emit(vt.MediaReconnectStart,this.store.uid)),this.unbindLocalTrackEvents(),this.localTrackMap.clear(),this.remoteUserMap.size!==0&&Array.from(this.remoteUserMap.entries()).forEach(e=>{let[n,i]=e;Array.from(ca(i).call(i)).forEach(a=>{this.setPendingRemoteMedia(n,a)}),this.emit(vt.MediaReconnectStart,n.uid)}),this.unbindAllRemoteTrackEvents(),this.remoteUserMap.clear(),this.stopUploadUplinkState(),this.stopUploadDownlinkState(),this.statsUploader.stopUploadOutboundStats(),this.statsUploader.stopUploadInboundStats(),this.statsUploader.stopUploadTransportStats(),k.debug("[".concat(this.store.clientId,"] P2PChannel2 disconnected, waiting to reconnect.")))}hasPendingRemoteMedia(e,n){for(const i of this.pendingRemoteTracks){const{user:a,kind:l}=i;if((e instanceof qu?e.uid:e)===a.uid&&n===l)return!0}return!1}setPendingRemoteMedia(e,n){this.hasPendingRemoteMedia(e,n)||this.pendingRemoteTracks.push({user:e,kind:n})}async restartICE(e,n){let i,a;if(e===Lo.SEND_ONLY){if(!this.sendConnection)throw new Re(X.INVALID_OPERATION,"Cannot call P2PChannel2.handleMuteLocalTrack before sendConnection established.");i=await this.sendMutex.lock("From P2PChannel.restartICE"),a=this.sendConnection}else{if(!this.recvConnection)throw new Re(X.INVALID_OPERATION,"Cannot call P2PChannel2.handleMuteLocalTrack before recvConnection established.");i=await this.recvMutex.lock("From P2PChannel.restartICE"),a=this.recvConnection}try{if(n){const l=await a.restartICE(n);return a.isInRestartIce=!1,l}{const l=await a.restartICE();if(l){const u=await zi(this,vt.RequestP2PRestartICE,{direction:Lo.RECEIVE_ONLY,iceParameter:l});await a.restartICE(u),a.isInRestartIce=!1}}}finally{i()}}getUplinkNetworkQuality(){if(!this.sendConnection)return 0;const e=this.sendConnection.getStats(),n=this.localTrackMap.get(Fe.LocalVideoTrack),i=this.localTrackMap.get(Fe.LocalAudioTrack),a=e.videoSend.find(O=>{var H;return O.ssrc===(n==null||(H=n.ssrcs)===null||H===void 0?void 0:H[0].ssrcId)}),l=e.audioSend.find(O=>{var H;return O.ssrc===(i==null||(H=i.ssrcs)===null||H===void 0?void 0:H[0].ssrcId)});if(!a||!l)return 1;const u=ja(this,vt.NeedSignalRTT),h=a?a.rttMs:void 0,p=l?l.rttMs:void 0,m=h&&p?(h+p)/2:h||p,E=(m&&u?(m+u)/2:m||u)||0,S=100*e.sendPacketLossRate*.7/50+.3*E/1500,R=S<.17?1:S<.36?2:S<.59?3:S<.1?4:5,w=n==null?void 0:n.track;if(w&&w._encoderConfig&&w._hints.indexOf(qn.SCREEN_TRACK)===-1){const O=w._encoderConfig.bitrateMax,H=e.bitrate.actualEncoded;if(O&&H){const B=(1e3*O-H)/(1e3*O);return A6[B<.15?0:B<.3?1:B<.45?2:B<.6?3:4][R]}}return R}getDownlinkNetworkQuality(){if(!this.recvConnection)return 0;const e=this.recvConnection.getStats();let n=0;return Array.from(this.remoteUserMap.entries()).forEach(i=>{let[a]=i;const l=a._audioSSRC,u=a._videoSSRC,h=e.audioRecv.find(H=>H.ssrc===l),p=e.videoRecv.find(H=>H.ssrc===u);if(!h&&!p)return void(n+=1);const m=ja(this,vt.NeedSignalRTT),E=e.rtt,S=(E&&m?(E+m)/2:E||m)||0,R=h?h.jitterMs:void 0,w=e.recvPacketLossRate;let O=.7*w*100/50+.3*S/1500;R&&(O=.6*w*100/50+.2*S/1500+.2*R/400),n+=O<.1?1:O<.17?2:O<.36?3:O<.59?4:5}),this.remoteUserMap.size>0?Math.round(n/this.remoteUserMap.size):n}async muteLocalTrack(e){return new et((n,i)=>{this.handleMuteLocalTrack(e,n,i)})}filterTobePublishedTracks(e,n,i){const a=[],l=Rn(),u=this.getAllTracks();e=$f(e=e.filter(m=>u.indexOf(m)===-1));let h=!1,p=!1;for(const m of e){if(m instanceof sr&&(this.localTrackMap.has(Fe.LocalVideoTrack)||h?new Re(X.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS).throw():(a.push({track:m,type:Fe.LocalVideoTrack}),h=!0),n)){const E=this.getLowVideoTrack(m,i);a.push({track:E,type:Fe.LocalVideoLowTrack})}if(m instanceof Mr){const E=this.localTrackMap.get(Fe.LocalAudioTrack);if(E){if(!(E.track instanceof ui))throw new Re(X.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing");if(m._bypassWebAudio)throw new Re(X.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");E.track.addAudioTrack(m),this.bindLocalAudioTrackEvents(m,!0)}else if(p){const S=a.find(R=>{let{type:w}=R;return w===Fe.LocalAudioTrack});if(!(S.track instanceof ui))throw new Re(X.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing");if(m._bypassWebAudio)throw new Re(X.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");S.track.addAudioTrack(m)}else{if(!l.webAudioMediaStreamDest||m instanceof ui||m._bypassWebAudio)a.push({track:m,type:Fe.LocalAudioTrack});else{const S=new ui;S.addAudioTrack(m),a.push({track:S,type:Fe.LocalAudioTrack})}p=!0}}}return a}filterTobeUnpublishedTracks(e){const n=[],i=this.getAllTracks();e=$f(e=e.filter(a=>i.indexOf(a)!==-1));for(const a of e){if(a instanceof Mr){const l=this.localTrackMap.get(Fe.LocalAudioTrack);if(!l)continue;l.track instanceof ui?(l.track.removeAudioTrack(a),this.unbindLocalAudioTrackEvents(a),l.track.trackList.length===0&&(n.push([Fe.LocalAudioTrack,l]),l.track.close())):n.push([Fe.LocalAudioTrack,l])}if(a instanceof sr){const l=this.localTrackMap.get(Fe.LocalVideoTrack);if(!l)continue;n.push([Fe.LocalVideoTrack,l]);const u=this.localTrackMap.get(Fe.LocalVideoLowTrack);u&&n.push([Fe.LocalVideoLowTrack,u])}}return n}bindLocalTrackEvents(e){e.forEach(n=>{let{track:i,type:a}=n;switch(a){case Fe.LocalVideoTrack:i.addListener(at.GET_STATS,this.handleGetLocalVideoStats),i.addListener(at.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),i.addListener(at.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),i.addListener(at.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),i.addListener(at.NEED_UPDATE_VIDEO_SEND_PARAMETERS,this.handleUpdateVideoSendParameters),i.addListener(at.NEED_REPLACE_TRACK,this.handleReplaceTrack),i.addListener(at.NEED_MUTE_TRACK,this.handleMuteLocalTrack),i.addListener(at.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case Fe.LocalAudioTrack:this.bindLocalAudioTrackEvents(i);case Fe.LocalVideoLowTrack:}})}bindLocalAudioTrackEvents(e,n){e instanceof ui?e.trackList.forEach(i=>{i.addListener(at.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),i.addListener(at.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),i.addListener(at.GET_STATS,this.handleGetLocalAudioStats),i.addListener(at.NEED_MUTE_TRACK,this.handleMuteLocalTrack),i.addListener(at.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)}):(e.addListener(at.GET_STATS,this.handleGetLocalAudioStats),e.addListener(at.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.addListener(at.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.addListener(at.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.addListener(at.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack),n||e.addListener(at.NEED_REPLACE_TRACK,this.handleReplaceTrack))}unbindLocalTrackEvents(e){e||(e=Array.from(this.localTrackMap.entries()).map(n=>{let[i,{track:a}]=n;return{track:a,type:i}})),e.forEach(n=>{let{track:i,type:a}=n;switch(a){case Fe.LocalVideoTrack:i.off(at.GET_STATS,this.handleGetLocalVideoStats),i.off(at.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),i.off(at.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),i.off(at.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),i.off(at.NEED_UPDATE_VIDEO_SEND_PARAMETERS,this.handleUpdateVideoSendParameters),i.off(at.NEED_REPLACE_TRACK,this.handleReplaceTrack),i.off(at.NEED_MUTE_TRACK,this.handleMuteLocalTrack),i.off(at.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case Fe.LocalAudioTrack:this.unbindLocalAudioTrackEvents(i);case Fe.LocalVideoLowTrack:}})}unbindLocalAudioTrackEvents(e){e instanceof ui?e.trackList.forEach(n=>{n.off(at.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),n.off(at.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),n.off(at.GET_STATS,this.handleGetLocalAudioStats),n.off(at.NEED_MUTE_TRACK,this.handleMuteLocalTrack),n.off(at.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)}):(e.off(at.GET_STATS,this.handleGetLocalAudioStats),e.off(at.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.off(at.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.off(at.NEED_REPLACE_TRACK,this.handleReplaceTrack),e.off(at.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.off(at.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack))}bindRemoteTrackEvents(e,n){n instanceof tp&&n.addListener(at.GET_STATS,i=>{i(this.handleGetRemoteVideoStats(e))}),n instanceof np&&n.addListener(at.GET_STATS,i=>{i(this.handleGetRemoteAudioStats(e))})}unbindRemoteTrackEvents(e){e&&e.removeAllListeners(at.GET_STATS)}unbindAllRemoteTrackEvents(){Array.from(this.remoteUserMap.entries()).forEach(e=>{let[n,i]=e;i.has(it.AUDIO)&&this.unbindRemoteTrackEvents(n._audioTrack),i.has(it.VIDEO)&&this.unbindRemoteTrackEvents(n._videoTrack)})}createGatewayPublishMessage(e,n){return e.map((i,a)=>{var l;let u,{track:h,type:p}=i;switch(p){case Fe.LocalAudioTrack:u=Bn.Audio;break;case Fe.LocalVideoTrack:u=Ge(l=h._hints).call(l,qn.SCREEN_TRACK)?Bn.Screen:Bn.High;break;case Fe.LocalVideoLowTrack:u=Bn.Low}return{kind:p===Fe.LocalAudioTrack?it.AUDIO:it.VIDEO,stream_type:u,mid:n[a].id,ssrcs:n[a].localSSRC,isMuted:h.muted||!h.enabled}})}createGatewayUnpublishMessage(e){return e.map(n=>{var i;let a,[l,{track:u,ssrcs:h,id:p}]=n;switch(l){case Fe.LocalVideoTrack:a=Ge(i=u._hints).call(i,qn.SCREEN_TRACK)?Bn.Screen:Bn.High;break;case Fe.LocalAudioTrack:a=Bn.Audio;break;case Fe.LocalVideoLowTrack:a=Bn.Low}return{stream_type:a,ssrcs:h,mid:p}})}assignLocalTracks(e,n){e.forEach((i,a)=>{let{track:l,type:u}=i;this.localTrackMap.set(u,{track:l,id:n[a].id,ssrcs:n[a].localSSRC})})}withdrawLocalTracks(e){e.forEach(n=>{let[i]=n;this.localTrackMap.delete(i)})}bindConnectionEvents(e){e.onConnectionStateChange=async n=>{var i;k.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: ").concat(e.name,".onConnectionStateChange(").concat(n,")")),this.emit(vt.PeerConnectionStateChange,n),n!=="connected"||this.store.keyMetrics.peerConnectionEnd||this.store.peerConnectionEnd(),n==="connected"&&(e.isInRestartIce=!1),Ge(i=this._restartStates).call(i,n)&&!e.isInRestartIce&&(n==="disconnected"&&await Pi(800),e.iceConnectionState!=="disconnected"&&e.iceConnectionState!=="failed"||this.handleDisconnect(e.direction))},e.onICEConnectionStateChange=n=>{n!=="connected"||this.store.keyMetrics.iceConnectionEnd||this.store.iceConnectionEnd(),k.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICEConnectionStateChange(").concat(n,")")),ct.reportApiInvoke(this.store.sessionId,{name:"ICEConnectionStateChange",options:n,tag:gr.TRACER}).onSuccess(),this.emit(vt.IceConnectionStateChange,n)},e.onICETransportStateChange=n=>{k.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICETransportStateChange(").concat(n,")"))},e.onDTLSTransportStateChange=n=>{k.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportStateChange(").concat(n,")"))},e.onDTLSTransportError=n=>{k.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportError(").concat(n,")"))},e.onFirstAudioDecoded=n=>{var i;const a=Array.from(ca(i=this.remoteUserMap).call(i)).find(u=>u._audioSSRC===n);var l;a&&(this.store.subscribe(a.uid,"audio",void 0,void 0,void 0,Date.now()),(l=a.audioTrack)===null||l===void 0||l.emit(us.FIRST_FRAME_DECODED),ct.firstRemoteFrame(this.store.sessionId,Ei.FIRST_AUDIO_DECODE,pr.FIRST_AUDIO_DECODE,{peer:a._uintid,subscribeElapse:Zi.measureFromSubscribeStart(this.store.clientId,n),subscribeRequestid:n,p2pid:this.store.p2pId}))},e.onFirstAudioReceived=n=>{var i;const a=Array.from(ca(i=this.remoteUserMap).call(i)).find(l=>l._audioSSRC===n);a&&ct.firstRemoteFrame(this.store.sessionId,Ei.FIRST_AUDIO_RECEIVED,pr.FIRST_AUDIO_RECEIVED,{peer:a._uintid,subscribeElapse:Zi.measureFromSubscribeStart(this.store.clientId,n),subscribeRequestid:n,p2pid:this.store.p2pId})},e.onFirstVideoDecoded=(n,i,a)=>{this.reportVideoFirstFrameDecoded(n,i,a)},e.onFirstVideoReceived=n=>{var i;const a=Array.from(ca(i=this.remoteUserMap).call(i)).find(l=>l._videoSSRC===n);a&&ct.firstRemoteFrame(this.store.sessionId,Ei.FIRST_VIDEO_RECEIVED,pr.FIRST_VIDEO_RECEIVED,{peer:a._uintid,subscribeElapse:Zi.measureFromSubscribeStart(this.store.clientId,n),subscribeRequestid:n,p2pid:this.store.p2pId})},e.onSelectedLocalCandidateChanged=(n,i)=>{const a=n.candidateType==="relay",l=i.candidateType==="relay";i.candidateType!=="unknown"&&a===l||this.emit(vt.ConnectionTypeChange,a),k.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.SelectedLocalCandidateChanged(").concat(JSON.stringify(zu(i))," -> ").concat(JSON.stringify(zu(n)),")"))},e.onSelectedRemoteCandidateChanged=(n,i)=>{k.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.SelectedRemoteCandidateChanged(").concat(JSON.stringify(zu(i))," -> ").concat(JSON.stringify(zu(n)),")"))},e.onFirstVideoDecodedTimeout=n=>{this.reportVideoFirstFrameDecoded(n,void 0,void 0,!0)},e.onLocalCandidate=n=>{this.emit(vt.LocalCandidate,{candidate:n,direction:e.direction})}}unbindConnectionEvents(e){e.onConnectionStateChange=void 0,e.onICEConnectionStateChange=void 0,e.onICETransportStateChange=void 0,e.onDTLSTransportStateChange=void 0,e.onDTLSTransportError=void 0,e.onFirstAudioDecoded=void 0,e.onFirstAudioReceived=void 0,e.onFirstVideoDecoded=void 0,e.onFirstVideoReceived=void 0,e.onSelectedLocalCandidateChanged=void 0,e.onSelectedRemoteCandidateChanged=void 0,e.onFirstVideoDecodedTimeout=void 0,e.onLocalCandidate=void 0}async handleDisconnect(e){const n=e===Lo.SEND_ONLY?this.sendConnection:this.recvConnection;n&&!n.isInRestartIce&&(n.isInRestartIce=!0,k.debug("[".concat(this.store.clientId,"] [P2PChannel-").concat(n.name,"] start use restartICE")),e===Lo.SEND_ONLY?this.restartICE(e):zi(this,vt.RequestP2PRestartICE,{direction:Lo.SEND_ONLY}))}filterTobeMutedTracks(e){const n=[];if(this.getAllTracks().indexOf(e)===-1)return n;const i=this.localTrackMap.get(Fe.LocalAudioTrack);if(e instanceof Mr&&(i==null?void 0:i.track)instanceof ui)return i.track.isActive||n.push([Fe.LocalAudioTrack,i]),n;const a=Array.from(this.localTrackMap.entries()).find(l=>{let[,{track:u}]=l;return e===u});if(a&&(n.push(a),a[0]===Fe.LocalVideoTrack)){const l=this.localTrackMap.get(Fe.LocalVideoLowTrack);l&&n.push([Fe.LocalVideoLowTrack,l])}return n}filterTobeUnmutedTracks(e){const n=[],i=this.localTrackMap.get(Fe.LocalAudioTrack);if(e instanceof Mr&&(i==null?void 0:i.track)instanceof ui)return i.track.isActive&&n.push([Fe.LocalAudioTrack,i]),n;const a=Array.from(this.localTrackMap.entries()).find(l=>{let[,{track:u}]=l;return e===u});if(a)if(a[0]===Fe.LocalVideoTrack){n.push(a);const l=this.localTrackMap.get(Fe.LocalVideoLowTrack);l&&n.push([Fe.LocalVideoLowTrack,l])}else n.push(a);return n}createMuteMessage(e){return e.map(n=>{var i;let a,[l,{track:u,ssrcs:h,id:p}]=n;switch(l){case Fe.LocalAudioTrack:a=Bn.Audio;break;case Fe.LocalVideoTrack:a=Ge(i=u._hints).call(i,qn.SCREEN_TRACK)?Bn.Screen:Bn.High;break;case Fe.LocalVideoLowTrack:a=Bn.Low}return{stream_type:a,ssrcs:h,mid:p}})}createUnmuteMessage(e){return e.map(n=>{var i;let a,[l,{track:u,ssrcs:h,id:p}]=n;switch(l){case Fe.LocalAudioTrack:a=Bn.Audio;break;case Fe.LocalVideoTrack:a=Ge(i=u._hints).call(i,qn.SCREEN_TRACK)?Bn.Screen:Bn.High;break;case Fe.LocalVideoLowTrack:a=Bn.Low}return{stream_type:a,ssrcs:h,mid:p}})}filterTobeUnSubscribedTracks(e,n){const i=[],a=this.remoteUserMap.get(e);if(!a)return i;if(n){const l=a.get(n);if(!l)return i;i.push([e,{kind:n,id:l}])}else Array.from(a.entries()).forEach(l=>{let[u,h]=l;i.push([e,{kind:u,id:h}])});return i}createUnsubscribeMessage(e){const n=[];return e.forEach(i=>{let[a,{kind:l,id:u}]=i;switch(l){case it.VIDEO:return void(a._videoSSRC&&n.push({stream_type:it.VIDEO,ssrcId:a._videoSSRC}));case it.AUDIO:return void(a._audioSSRC&&n.push({stream_type:it.AUDIO,ssrcId:a._audioSSRC}))}}),n}withdrawRemoteTracks(e){e.forEach(n=>{let[i,{kind:a}]=n;const l=this.remoteUserMap.get(i);l&&(l.delete(a),Array.from(l.entries()).length===0&&this.remoteUserMap.delete(i))})}async updateBitrateLimit(e){const n=this.localTrackMap.get(Fe.LocalVideoTrack),i=this.localTrackMap.get(Fe.LocalVideoLowTrack);n&&(await n.track.setBitrateLimit(e.uplink),await new et((a,l)=>{this.handleUpdateVideoEncoder(n.track,a,l,!0)})),i&&e.low_stream_uplink&&(await i.track.setBitrateLimit({max_bitrate:e.low_stream_uplink.bitrate,min_bitrate:e.low_stream_uplink.bitrate||0}),await new et((a,l)=>{this.handleUpdateVideoEncoder(i.track,a,l,!0)}))}isP2PDisconnected(){if(this.sendConnection&&this.recvConnection){const e=this.sendConnection.peerConnectionState,n=this.recvConnection.peerConnectionState;return e!=="connected"&&n!=="connected"}return!0}async tryToUnmuteAudio(e){for(let n=0;n<e.length;n++)if(e[n]instanceof Mr){const i=this.filterTobeUnmutedTracks(e[n]);if(i.length===0)continue;const a=this.createUnmuteMessage(i);return void await Qn(this,vt.RequestUnmuteLocal,a)}}bindStatsUploaderEvents(){this.statsUploader.requestStats=e=>this.getStats(e),this.statsUploader.requestLocalMedia=()=>Array.from(this.localTrackMap.entries()).filter(e=>{let[,{ssrcs:n}]=e;return!!n}),this.statsUploader.requestRemoteMedia=()=>Array.from(this.remoteUserMap.entries()),this.statsUploader.requestVideoIsReady=e=>{var n;return!((n=this.recvConnection)===null||n===void 0||!n.getRemoteVideoIsReady(e))},this.statsUploader.requestUpload=(e,n)=>this.emit(vt.RequestUpload,e,n),this.statsUploader.requestUploadStats=e=>this.emit(vt.RequestUploadStats,e),this.statsUploader.requestAllTracks=()=>this.getAllTracks()}unbindStatsUploaderEvents(){this.statsUploader.requestStats=void 0,this.statsUploader.requestLocalMedia=void 0,this.statsUploader.requestRemoteMedia=void 0,this.statsUploader.requestVideoIsReady=void 0}async requestReconnect(){this.dtlsFailedCount+=1,await Pi(Zw(this.dtlsFailedCount,ei)),this.emit(vt.RequestReconnect)}async reconnectP2P(){}canPublishLowStream(){return this.localTrackMap.has(Fe.LocalVideoTrack)||this.pendingLocalTracks.some(e=>e instanceof sr)}throwIfTrackTypeNotMatch(e){if(e.filter(n=>n instanceof sr).length>1)throw new Re(X.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(e.filter(n=>n instanceof Mr).length>1&&(e.some(n=>n instanceof Mr&&n._bypassWebAudio)||!Rn().webAudioMediaStreamDest))throw new Re(X.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode");for(const n of e){if(n instanceof sr&&this.pendingLocalTracks.some(i=>i instanceof sr))throw new Re(X.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(n instanceof Mr&&this.pendingLocalTracks.some(i=>i instanceof Mr)&&(!Rn().webAudioMediaStreamDest||n._bypassWebAudio||this.pendingLocalTracks.some(i=>i instanceof Mr&&i._bypassWebAudio)))throw new Re(X.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode")}}getLowVideoTrack(e,n){const i=!Q("DISABLE_DUAL_STREAM_USE_ENCODING")&&Rn().supportDualStreamEncoding,a=oy(oy({},{width:160,height:120,framerate:15,bitrate:50}),n);let l;l=i?e._mediaStreamTrack.clone():mA(e,a);const u=Zn(8,"track-low-"),h=new sr(l,oy(oy({},i&&{scaleResolutionDownBy:qI(a,e)}),{},{frameRate:a.framerate,bitrateMax:a.bitrate,bitrateMin:a.bitrate}),void 0,void 0,u);return h.on(th.TRANSCEIVER_UPDATED,p=>{e._updateRtpTransceiver(p,qf.LOW_STREAM)}),h._hints.push(qn.LOW_STREAM),e.addListener(at.NEED_CLOSE,()=>{h.close()}),h}async globalLock(){return this.recvMutex.lock("From P2PChannel2.globalLock")}reportVideoFirstFrameDecoded(e,n,i,a){var l;const u=Array.from(ca(l=this.remoteUserMap).call(l)).find(h=>h._videoSSRC===e);if(u){a||this.store.subscribe(u.uid,"video",void 0,void 0,void 0,void 0,Date.now());const h=this.store.keyMetrics,p=h.subscribe.find(m=>m.userId===u.uid&&m.type==="video");ct.firstRemoteVideoDecode(this.store.sessionId,Ei.FIRST_VIDEO_DECODE,pr.FIRST_VIDEO_DECODE,{peer:u._uintid,videowidth:n,videoheight:i,subscribeElapse:Zi.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId,apEnd:h.requestAPEnd||0,apStart:h.requestAPStart||0,joinGwEnd:h.joinGatewayEnd||0,joinGwStart:h.joinGatewayStart||0,pcEnd:h.peerConnectionEnd||0,pcStart:h.peerConnectionStart||0,subscriberEnd:(p==null?void 0:p.subscribeEnd)||0,subscriberStart:(p==null?void 0:p.subscribeStart)||0,videoAddNotify:(p==null?void 0:p.streamAdded)||0,state:a?1:0})}}async remoteMediaSsrcChanged(e,n,i){if(!this.recvConnection)return!1;const a=this.remoteUserMap.get(e);if(!a)return!1;const l=a.get(n);if(!l)return!1;const u=await this.recvConnection.getRemoteSSRC(l);return u!==void 0&&u!==i}isPreSubScribe(e){return!1}async publishDataChannel(e){throw new Re(X.NOT_SUPPORTED)}async unpublishDataChannel(e){throw new Re(X.NOT_SUPPORTED)}async subscribeDataChannel(e,n){throw new Re(X.NOT_SUPPORTED)}async unsubscribeDataChannel(e,n){throw new Re(X.NOT_SUPPORTED)}hasPendingRemoteDataChannel(e,n){throw new Re(X.NOT_SUPPORTED)}setPendingRemoteDataChannel(e,n){throw new Re(X.NOT_SUPPORTED)}async preConnect(e){throw new Re(X.NOT_SUPPORTED)}getEstablishParams(){throw new Re(X.NOT_SUPPORTED)}async reSubscribe(e){throw new Re(X.NOT_SUPPORTED)}reportVideoFirstFrameRender(e){}async updateVideoStreamParameter(e,n){throw new Re(X.NOT_SUPPORTED)}unbindRtpTransceiver(){this.localTrackMap.size!==0&&Array.from(this.localTrackMap.entries()).forEach(e=>{let[n,{track:i}]=e;n===Fe.LocalVideoLowTrack?i._updateRtpTransceiver(void 0,qf.LOW_STREAM):i._updateRtpTransceiver(void 0)})}},st(Er.prototype,"p2pConnect",[dH],Object.getOwnPropertyDescriptor(Er.prototype,"p2pConnect"),Er.prototype),st(Er.prototype,"unpublish",[hH],Object.getOwnPropertyDescriptor(Er.prototype,"unpublish"),Er.prototype),st(Er.prototype,"unpublishLowStream",[fH],Object.getOwnPropertyDescriptor(Er.prototype,"unpublishLowStream"),Er.prototype),st(Er.prototype,"subscribe",[pH],Object.getOwnPropertyDescriptor(Er.prototype,"subscribe"),Er.prototype),st(Er.prototype,"mockSubscribe",[mH],Object.getOwnPropertyDescriptor(Er.prototype,"mockSubscribe"),Er.prototype),st(Er.prototype,"unsubscribe",[gH],Object.getOwnPropertyDescriptor(Er.prototype,"unsubscribe"),Er.prototype),st(Er.prototype,"muteRemote",[vH],Object.getOwnPropertyDescriptor(Er.prototype,"muteRemote"),Er.prototype),st(Er.prototype,"unmuteRemote",[EH],Object.getOwnPropertyDescriptor(Er.prototype,"unmuteRemote"),Er.prototype),st(Er.prototype,"hasRemoteMediaWithLock",[_H],Object.getOwnPropertyDescriptor(Er.prototype,"hasRemoteMediaWithLock"),Er.prototype),st(Er.prototype,"disconnectForReconnect",[SH],Object.getOwnPropertyDescriptor(Er.prototype,"disconnectForReconnect"),Er.prototype),st(Er.prototype,"remoteMediaSsrcChanged",[yH],Object.getOwnPropertyDescriptor(Er.prototype,"remoteMediaSsrcChanged"),Er.prototype),Er);function Mc(e){return function(n,i,a){const l=n[i];if(typeof l!="function")throw new Error("Cannot use mutex on object property.");return a.value=async function(){for(var u=arguments.length,h=new Array(u),p=0;p<u;p++)h[p]=arguments[p];switch(e){case kc.SEND_ONLY:{const m=await this.sendMutex.lock("From P2PChannel2.".concat(i));try{return await l.apply(this,h)}finally{m()}}case kc.RECEIVE_ONLY:{const m=await this.recvMutex.lock("From P2PChannel2.".concat(i));try{return await l.apply(this,h)}finally{m()}}default:{const m=await this.sendMutex.lock("From P2PChannel2.".concat(i)),E=await this.recvMutex.lock("From P2PChannel2.".concat(i));try{return await l.apply(this,h)}finally{m(),E()}}}},a}}class _h extends br{constructor(n,i){super(),W(this,"signal",void 0),W(this,"token",void 0),W(this,"tokenTimeout",void 0),W(this,"tokenInterval",void 0),W(this,"_sequence",0),W(this,"userMap",new Map),W(this,"encoder",new TextEncoder),this.signal=n,this.token=i;const a=()=>{this.signal.connectionState===ir.CONNECTED&&this.check(),this.userMap.size===0?this.tokenInterval=window.setTimeout(a,1e3):this.tokenInterval=window.setTimeout(a,3*Q("P2P_TOKEN_INTERVAL"))};a()}async send(n,i,a,l,u){var h;if(this.userMap.size===0)return;const p=Array.from(ba(h=this.userMap).call(h))[0].token;typeof i!="string"&&(i=JSON.stringify(i)),l=l??Zn(6,""),u=u??this._sequence++;const m={_id:l,_type:n,_seq:u,_message:i,token:"".concat(this.token,"_").concat(p)};Q("SHOW_P2P_LOG")&&k.debug("send message",m,"noNeedResponse : ".concat(a)),this.splitMessage(JSON.stringify(m)).forEach(S=>{this.signal.request(xt.DATA_STREAM,{payload:Uu(this.encoder.encode(S))})});const E=new et((S,R)=>{const w=window.setTimeout(()=>{this.off("res-@".concat(l,"_ack"),O),this.off("res-@".concat(l),B),this.off(sp.ABORT,H),k.debug("[external-signal] request timeout, type: ".concat(n,", requestId: ").concat(l)),this.userMap.size===0?R(new Re(X.INVALID_REMOTE_USER)):R(new Re(X.TIMEOUT))},Q("EXTERNAL_SIGNAL_REQUEST_TIMEOUT")),O=()=>{w&&window.clearTimeout(w),this.off(sp.ABORT,H),a&&S()},H=()=>{w&&window.clearTimeout(w),this.off("res-@".concat(l,"_ack"),O),this.off("res-@".concat(l),B),R(new Re(X.EXTERNAL_SIGNAL_ABORT,"type: ".concat(n,", requestId: ").concat(l)))};this.once(sp.ABORT,H),this.once("res-@".concat(l,"_ack"),O);const B=(q,Y)=>{j=!0,w&&window.clearTimeout(w),this.off("res-@".concat(l,"_ack"),O),this.off(sp.ABORT,H),q==="success"?S(Y):R(new Re(X.P2P_MESSAGE_FAILED,"request ".concat(n," failed, requestId: ").concat(l)))};let j=!1;a||(this.once("res-@".concat(l),B),Pi(Q("SIGNAL_REQUEST_TIMEOUT")).then(()=>{j||k.warning("external_signal request timeout, type: ".concat(n,", requestId: ").concat(l,", ").concat(m))}))});try{return await E}catch(S){if(S.code===X.TIMEOUT)return await this.send(n,i,a,l,u);throw S}}onMessage(n){var i;const{_uid:a}=n;let l,u=this.userMap.get(a);if(u)l=u.splitMessageMap;else{if(this.userMap.size>0||!("_type"in n)||n._type!==Hr.CHECK)return;const{token:E}=n;l=new Map,u={uid:a,isStart:!0,token:E,splitMessageMap:l,nextExpectedSequenceNumber:0,receivedMessagesMap:new Map},this.userMap.set(a,u),this.signal.emit(mn.ON_USER_ONLINE,{uid:a}),this.handleUserOnline()}if("id"in n&&"total"in n){var h;const{id:E,total:S}=n,R=(h=l.get(E))!==null&&h!==void 0?h:[];if(R.push(n),l.has(E)||l.set(E,R),R.length!==S)return;{const w=$d(R).call(R,(O,H)=>O.index-H.index).map(O=>O.payload).join("");l.delete(E),(n=JSON.parse(w))._uid=a}}const{_type:p,token:m}=n;if(Ge(i=[Hr.ACK,Hr.CHECK]).call(i,p))return p===Hr.CHECK&&this.handleCheckToken(u,m),void this.receiveMessage(n);m==="".concat(u.token,"_").concat(this.token)?this.handleReceivedMessage(n):k.debug('Receive unexpected message", '.concat(m,", cur_token: ").concat(u.token,"_").concat(this.token),n)}check(){const n={_id:Zn(6,""),token:this.token,_type:Hr.CHECK};Q("SHOW_P2P_LOG")&&k.debug("send message",n),this.signal.request(xt.DATA_STREAM,{payload:Uu(this.encoder.encode(JSON.stringify(n)))})}ack(n){const i={_id:n,_type:Hr.ACK,token:this.token};Q("SHOW_P2P_LOG")&&k.debug("send message",i),this.signal.request(xt.DATA_STREAM,{payload:Uu(this.encoder.encode(JSON.stringify(i)))})}response(n,i,a){this.send(Hr.RESPONSE,JSON.stringify({success:!a,message:i}),!0,n)}handleReceivedMessage(n){const i=()=>{this.userMap.forEach(E=>{const{receivedMessagesMap:S,nextExpectedSequenceNumber:R}=E;for(;S.has(R);){const w=S.get(R);S.delete(R),this.receiveMessage(w),E.nextExpectedSequenceNumber++}})};if(!n)return void i();const{_uid:a,_seq:l}=n,u=this.userMap.get(a),{receivedMessagesMap:h,isStart:p,nextExpectedSequenceNumber:m}=u;if(l<m)return this.ack(n._id),void k.debug("[external-signal] receive old message, seq: ".concat(l,", ").concat(n._message));h.set(l,n),p&&l===m&&(this.receiveMessage(n),h.delete(m),u.nextExpectedSequenceNumber++,i())}receiveMessage(n){const{_id:i,_type:a,_message:l,_uid:u}=n;if(Q("SHOW_P2P_LOG")&&k.debug("receive message",n),i){let h;switch(n._type!==Hr.ACK&&(l&&(h=JSON.parse(l)),this.ack(n._id)),n._type){case Hr.CANDIDATE:case Hr.CONTROL:this.signal.emit(a,h,u);break;case Hr.PUBLISH:case Hr.UNPUBLISH:case Hr.RESTART_ICE:case Hr.CALL:h.uid=u,zi(this.signal,a,h).then(p=>{this.response(n._id,p)}).catch(()=>{this.response(n._id,void 0,!0)});break;case Hr.ACK:this.getListeners("res-@".concat(i,"_ack")).length>0&&this.emit("res-@".concat(i,"_ack"));break;case Hr.RESPONSE:{const{success:p,message:m}=h;this.emit("res-@".concat(i),p?"success":"failed",m);break}}}}splitMessage(n){if(n.length<_h.MAX_MESSAGE_SIZE)return[n];const i=[],{remoteToken:a}=JSON.parse(n),l=Zn(6,"");let u=0,h=800;const p=Math.ceil(n.length/h);for(;n.length>0;){u++;const m={id:l,index:u,total:p,payload:n.slice(0,h),token:"".concat(this.token,"_").concat(a)};JSON.stringify(m).length>_h.MAX_MESSAGE_SIZE?h-=50:(i.push(m),n=n.slice(h))}return i.map(m=>JSON.stringify(m))}handleCheckToken(n,i){return n.token!==i?(k.debug("token changed, from ".concat(n.token," to ").concat(i)),this.reset(n.uid,i),!1):(this.tokenTimeout&&(window.clearTimeout(this.tokenTimeout),this.tokenTimeout=void 0),this.tokenTimeout=window.setTimeout(()=>{k.debug("token timeout, ".concat(i)),this.reset(n.uid)},Q("MAX_P2P_TIMEOUT")),!0)}async handleUserOnline(){const n=await zi(this.signal,Hr.CALL,void 0),i=await this.send(Hr.CALL,n);this.signal.emit(Mt.P2P_CONNECTION,i,!0)}async reset(n,i){const a=this.userMap.get(n);a&&(this.emit(sp.ABORT),this.signal.emit(mn.ON_USER_OFFLINE,{uid:a.uid,reason:ipe.P2P_TOKEN_CHANGED}),this._sequence=0,this.userMap.clear(),i||(k.debug("change local token from ".concat(i," to ").concat(i)),this.token=Zn(6,"")))}clear(){this._sequence=0,this.userMap.clear(),this.tokenInterval&&window.clearTimeout(this.tokenInterval),this.tokenInterval=void 0,this.tokenTimeout&&window.clearTimeout(this.tokenTimeout),this.tokenTimeout=void 0,this.emit(sp.ABORT)}}W(_h,"MAX_SIZE",1),W(_h,"MAX_MESSAGE_SIZE",1024);class F0e extends br{get connectionState(){return this._connectionState}set connectionState(n){n!==this._connectionState&&(this._connectionState=n,n===ir.CONNECTED?this.emit(Mt.WS_CONNECTED):n===ir.RECONNECTING?this.emit(Mt.WS_RECONNECTING,this._websocketReconnectReason):n===ir.CLOSED&&this.emit(Mt.WS_CLOSED,this._disconnectedReason))}get currentURLIndex(){return this.websocket.currentURLIndex}get url(){return this.websocket&&this.websocket.url||null}get rtt(){return this.rttRolling.mean()}constructor(n,i){super(),W(this,"_disconnectedReason",void 0),W(this,"_websocketReconnectReason",void 0),W(this,"_connectionState",ir.CLOSED),W(this,"reconnectToken",void 0),W(this,"p2pToken",void 0),W(this,"websocket",void 0),W(this,"openConnectionTime",void 0),W(this,"clientId",void 0),W(this,"lastMsgTime",Date.now()),W(this,"uploadCache",[]),W(this,"uploadCacheInterval",void 0),W(this,"rttRolling",new X3(5)),W(this,"pingpongTimer",void 0),W(this,"pingpongTimeoutCount",0),W(this,"joinResponse",void 0),W(this,"multiIpOption",void 0),W(this,"initError",void 0),W(this,"spec",void 0),W(this,"store",void 0),W(this,"_external_signal",void 0),W(this,"onWebsocketMessage",a=>{if(a.data instanceof ArrayBuffer)return void this.emit(Mt.ON_BINARY_DATA,a.data);const l=JSON.parse(a.data);if(this.lastMsgTime=Date.now(),Object.prototype.hasOwnProperty.call(l,"_id")){const u="res-@".concat(l._id);this.emit(u,l._result,l._message)}else if(Object.prototype.hasOwnProperty.call(l,"_type")){switch(l._type){case mn.ON_DATA_STREAM:return void this.handleDataStream(l._message);case mn.MUTE_AUDIO:case mn.MUTE_VIDEO:case mn.ON_P2P_LOST:case mn.ON_USER_ONLINE:return;case mn.ON_USER_OFFLINE:const{uid:u}=l._message;return k.debug("[".concat(this.clientId,"] user-offline uid: ").concat(u)),void this._external_signal.reset(u)}if(this.emit(l._type,l._message),l._type===mn.ON_NOTIFICATION&&this.handleNotification(l._message),l._type===mn.ON_USER_BANNED)switch(l._message.error_code){case 14:this.close(Fn.UID_BANNED);break;case 15:this.close(Fn.IP_BANNED);break;case 16:this.close(Fn.CHANNEL_BANNED)}if(l._type===mn.ON_USER_LICENSE_BANNED)switch(l._message.error_code){case Rt.ERR_LICENSE_MISSING:this.close(Fn.LICENSE_MISSING);break;case Rt.ERR_LICENSE_EXPIRED:this.close(Fn.LICENSE_EXPIRED);break;case Rt.ERR_LICENSE_MINUTES_EXCEEDED:this.close(Fn.LICENSE_MINUTES_EXCEEDED);break;case Rt.ERR_LICENSE_PERIOD_INVALID:this.close(Fn.LICENSE_PERIOD_INVALID);break;case Rt.ERR_LICENSE_MULTIPLE_SDK_SERVICE:this.close(Fn.LICENSE_MULTIPLE_SDK_SERVICE);break;case Rt.ERR_LICENSE_ILLEGAL:this.close(Fn.LICENSE_ILLEGAL);break;default:this.close()}}}),this.clientId=n.clientId,this.spec=n,this.store=i,this.websocket=new KI("gateway-".concat(this.clientId),this.spec.retryConfig,!0,Q("JOIN_GATEWAY_USE_DUAL_DOMAIN"),Q("JOIN_GATEWAY_USE_443PORT_ONLY"),i),this.handleWebsocketEvents(),window.addEventListener("offline",()=>{this.connectionState===ir.CONNECTED&&this.reconnect("retry",Hi.OFFLINE)}),this.p2pToken=Zn(6,""),this._external_signal=new _h(this,this.p2pToken)}async request(n,i,a,l){const u=Zn(6,""),h={_id:u,_type:n,_message:i},p=this.websocket.connectionID,m=()=>new et((H,B)=>{if(this.connectionState===ir.CONNECTED)return H();const j=()=>{this.off(Mt.WS_CLOSED,q),H()},q=()=>{this.off(Mt.WS_CONNECTED,j),B(new Re(X.WS_ABORT))};this.once(Mt.WS_CONNECTED,j),this.once(Mt.WS_CLOSED,q)});if(this.connectionState!==ir.CONNECTING&&this.connectionState!==ir.RECONNECTING||n===xt.JOIN||n===xt.REJOIN||await m(),this.websocket.sendMessage(h,!0),l)return;const E=new et((H,B)=>{let j=!1;const q=(Z,pe)=>{j=!0,H({isSuccess:Z==="success",message:pe||{}}),this.off(Mt.WS_CLOSED,Y),this.off(Mt.WS_RECONNECTING,Y),this.emit(Mt.REQUEST_SUCCESS,n,i)};this.once("res-@".concat(u),q);const Y=()=>{B(new Re(X.WS_ABORT,"type: ".concat(n))),this.off(Mt.WS_CLOSED,Y),this.off(Mt.WS_RECONNECTING,Y),this.off("res-@".concat(u),q)};this.once(Mt.WS_CLOSED,Y),this.once(Mt.WS_RECONNECTING,Y),Pi(Q("SIGNAL_REQUEST_TIMEOUT")).then(()=>{this.websocket.connectionID!==p||j||(k.warning("[".concat(this.clientId,"] ws request timeout, type: ").concat(n)),this.emit(Mt.REQUEST_TIMEOUT,n,i))})});let S=null;try{S=await E}catch(H){if(this.connectionState===ir.CLOSED||n===xt.LEAVE)throw new Re(X.WS_ABORT);return!this.spec.forceWaitGatewayResponse||a?H.throw():n===xt.JOIN||n===xt.REJOIN?null:(await m(),await this.request(n,i))}if(S.isSuccess)return S.message;const R=Number(S.message.error_code||S.message.code),w=M0(R),O=new Re(X.UNEXPECTED_RESPONSE,"".concat(w.desc,": ").concat(S.message.error_str),{code:R,data:S.message,desc:w.desc});return w.action==="success"?S.message:(k.warning("[".concat(this.clientId,"] [").concat(this.websocket.connectionID,"] unexpected response from type ").concat(n,", error_code: ").concat(R,", message: ").concat(w.desc,", action: ").concat(w.action)),R===Rt.ERR_TOO_MANY_BROADCASTERS?((n===xt.JOIN||n===xt.REJOIN)&&(this.initError=O,this.close()),O.throw()):w.action==="failed"?O.throw():w.action==="quit"?(this.initError=O,this.close(),O.throw()):(R===Rt.ERR_JOIN_BY_MULTI_IP?(this.multiIpOption=S.message.option,k.warning("[".concat(this.clientId,"] detect multi ip, recover")),this.reconnect("recover",Hi.MULTI_IP)):this.reconnect(w.action,Hi.SERVER_ERROR),n===xt.JOIN||n===xt.REJOIN?null:await this.request(n,i)))}waitMessage(n,i){return new et(a=>{const l=u=>{(!i||i(u))&&(this.off(n,l),a(u))};this.on(n,l)})}uploadWRTCStats(n){if(!this.store.sessionId)return void k.warn("[".concat(this.clientId,"] no session id when upload wrtc stats"));const i={lts:Date.now(),sid:this.store.sessionId,uid:this.store.intUid,stats:n};this.upload(L0.WRTC_STATS,i)}upload(n,i){const a={_type:n,_message:i};try{this.websocket.sendMessage(a)}catch{const u=Q("MAX_UPLOAD_CACHE")||50;this.uploadCache.push(a),this.uploadCache.length>u&&this.uploadCache.splice(0,1),this.uploadCache.length>0&&!this.uploadCacheInterval&&(this.uploadCacheInterval=window.setInterval(()=>{if(this.connectionState!==ir.CONNECTED)return;const h=this.uploadCache.splice(0,1)[0];this.uploadCache.length===0&&(window.clearInterval(this.uploadCacheInterval),this.uploadCacheInterval=void 0),this.upload(h._type,h._message)},Q("UPLOAD_CACHE_INTERVAL")||2e3))}}send(n,i){const a={_type:n,_message:i};this.websocket.sendMessage(a)}async sendExtensionMessage(n,i,a){return await this._external_signal.send(n,i,a)}init(n){return this.initError=void 0,this.multiIpOption=void 0,this.joinResponse=void 0,this.reconnectToken=void 0,this.openConnectionTime=void 0,new et((i,a)=>{this.once(Mt.WS_CONNECTED,()=>i(this.joinResponse)),this.once(Mt.WS_CLOSED,()=>a(this.initError||new Re(X.WS_ABORT))),this.connectionState=ir.CONNECTING,this.websocket.init(n).catch(a)})}close(n){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.reconnectToken=void 0,this.joinResponse=void 0,this._external_signal.clear(),this._disconnectedReason=n||Fn.LEAVE,this.connectionState=ir.CLOSED,k.debug("[".concat(this.clientId,"] ")+"will close websocket in signal"),this.websocket.close(),this.p2pToken=Zn(6,""),this._external_signal.clear(),this._external_signal=new _h(this,this.p2pToken)}async join(){if(!this.joinResponse){this.emit(Mt.ABORT_P2P_EXECUTION);const n=await zi(this,Mt.REQUEST_JOIN_INFO),i=await this.request(xt.JOIN,n);if(!i)return this.emit(Mt.REPORT_JOIN_GATEWAY,X.TIMEOUT,this.url||""),!1;this.joinResponse=i,this.emit(Mt.JOIN_RESPONSE,this.joinResponse),this.reconnectToken=this.joinResponse.rejoin_token}return this.connectionState=ir.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),!0}reconnect(n,i){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.websocket.reconnect(n,i)}async downgradeCodec(n){return!1}handleDataStream(n){try{var i;const a=Qd(n.payload),l=new TextDecoder().decode(a),u=JSON.parse(l);"total"in u&&"id"in u||Ge(i=Object.values(Hr)).call(i,u._type)?(u._uid=n.uid,this._external_signal.onMessage(u)):this.emit(mn.ON_DATA_STREAM,n)}catch{this.emit(mn.ON_DATA_STREAM,n)}}handleNotification(n){k.debug("[".concat(this.clientId,"] receive notification: "),n);const i=M0(n.code);if(i.action!=="success"){if(i.action!=="failed")return i.action==="quit"?(i.desc==="ERR_REPEAT_JOIN_CHANNEL"&&this.close(Fn.UID_BANNED),void this.close()):void this.reconnect(i.action,Hi.SERVER_ERROR);k.error("[".concat(this.clientId,"] ignore error: "),i.desc)}}handlePingPong(){if(!this.websocket||this.websocket.state!=="connected")return;this.pingpongTimeoutCount>0&&this.rttRolling.add(3e3),this.pingpongTimeoutCount+=1;const n=Q("PING_PONG_TIME_OUT"),i=Date.now();this.pingpongTimeoutCount>=n&&(k.warning("[".concat(this.clientId,"] PINGPONG Timeout. Last Socket Message: ").concat(i-this.lastMsgTime,"ms")),i-this.lastMsgTime>Q("WEBSOCKET_TIMEOUT_MIN"))?this.reconnect("retry",Hi.TIMEOUT):this.request(xt.PING,void 0,!0).then(()=>{this.pingpongTimeoutCount=0;const a=Date.now()-i;this.rttRolling.add(a),Q("REPORT_STATS")&&this.send(xt.PING_BACK,{pingpongElapse:a})}).catch(a=>{})}handleWebsocketEvents(){this.websocket.on(Xt.RECONNECT_CREATE_CONNECTION,n=>{this.emit(Mt.WS_RECONNECT_CREATE_CONNECTION,n)}),this.websocket.on(Xt.ON_MESSAGE,this.onWebsocketMessage),this.websocket.on(Xt.CLOSED,()=>{this.connectionState=ir.CLOSED}),this.websocket.on(Xt.FAILED,()=>{this._disconnectedReason=Fn.NETWORK_ERROR,this.connectionState=ir.CLOSED}),this.websocket.on(Xt.RECONNECTING,n=>{this._websocketReconnectReason=n,this.joinResponse=void 0,this.connectionState===ir.CONNECTED?this.connectionState=ir.RECONNECTING:this.connectionState=ir.CONNECTING}),this.websocket.on(Xt.WILL_RECONNECT,(n,i,a)=>{n!=="retry"?(k.debug("".concat(this.clientId," websocket will_connect event, renewSession reconnectMode is ").concat(n)),this.reconnectToken=void 0):k.debug("".concat(this.clientId," reconnect mode is retry, no need to renew session")),a(n)}),this.websocket.on(Xt.CONNECTED,()=>{this.openConnectionTime=Date.now(),this.join().catch(n=>{if(this.emit(Mt.REPORT_JOIN_GATEWAY,n,this.url||""),n instanceof Re&&n.code===X.UNEXPECTED_RESPONSE&&n.data.code===Rt.ERR_NO_AUTHORIZED)return k.warning("[".concat(this.clientId,"] reconnect no authorized, recover")),void this.reconnect("recover",Hi.SERVER_ERROR);k.error("[".concat(this.clientId,"] join gateway request failed"),n.toString()),this.spec.forceWaitGatewayResponse?this.reconnect("tryNext",Hi.SERVER_ERROR):(this.initError=n,this.close())})}),this.websocket.on(Xt.REQUEST_NEW_URLS,(n,i)=>{zi(this,Mt.REQUEST_RECOVER,this.multiIpOption).then(n).catch(i)}),this.websocket.on(Xt.ON_TOKEN_PRIVILEGE_DID_EXPIRE,()=>{this.emit(mn.ON_TOKEN_PRIVILEGE_DID_EXPIRE)})}}const U0e={name:"P2PChannel",create:function(e){let{store:n,statsCollector:i}=e;return new M0e(n,i)},createSubmodule:function(e){let{store:n,spec:i}=e;return new F0e(i,n)}};function bH(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),i.push.apply(i,a)}return i}function TH(e){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?bH(Object(i),!0).forEach(function(a){W(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):bH(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}class B0e{constructor(n){W(this,"sessionDesc",void 0),W(this,"localCapabilities",void 0),W(this,"rtpCapabilities",void 0),W(this,"candidates",void 0),W(this,"_originCandidates",void 0),W(this,"iceParameters",void 0),W(this,"dtlsParameters",void 0),W(this,"setup",void 0),W(this,"currentMidIndex",void 0),W(this,"cname",void 0),n=vr(n);const{iceParameters:i,dtlsParameters:a,candidates:l,rtpCapabilities:u,setup:h,localCapabilities:p,sdkCodec:m,cname:E}=n,S=sa(`v=0
o=- 0 0 IN IP4 127.0.0.1
s=AgoraGateway
t=0 0
a=group:BUNDLE audio video
a=msid-semantic: WMS
a=ice-lite
m=audio 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendrecv
a=rtcp-mux
a=rtcp-rsize
a=mid:audio
m=video 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendrecv
a=rtcp-mux
a=rtcp-rsize
a=mid:video
`);this.rtpCapabilities=u,this.candidates=l,this._originCandidates=vr(l),this.iceParameters=i,this.dtlsParameters=a,this.setup=h,this.localCapabilities=p,this.cname=E;for(let R=0;R<S.mediaDescriptions.length;R++){const w=S.mediaDescriptions[R];if(w.attributes.iceUfrag=i.iceUfrag,w.attributes.icePwd=i.icePwd,w.attributes.fingerprints=a.fingerprints,w.attributes.candidates=l,w.attributes.setup=h,w.media.mediaType==="video"){w.media.fmts=u.videoCodecs.map(B=>B.payloadType.toString(10));const O=u.videoCodecs.filter(B=>{var j,q;return(j=B.rtpMap)===null||j===void 0?void 0:Ge(q=j.encodingName.toLowerCase()).call(q,m)}),H=u.videoCodecs.filter(B=>!Ge(O).call(O,B));w.attributes.payloads=[...O,...H],w.attributes.extmaps=u.videoExtensions}w.media.mediaType==="audio"&&(w.media.fmts=u.audioCodecs.map(O=>O.payloadType.toString(10)),w.attributes.payloads=u.audioCodecs,w.attributes.extmaps=u.audioExtensions),S.mediaDescriptions[R]=this.mungMediaDesc(w)}this.sessionDesc=S,this.currentMidIndex=S.mediaDescriptions.length-1}toString(){return Bu(this.sessionDesc)}send(n,i,a){const{ssrcs:l,ssrcGroups:u}=V0(i,this.cname),h=this.sessionDesc.mediaDescriptions.find(E=>n===it.VIDEO?E.media.mediaType==="video":E.media.mediaType==="audio"),p=l[0].attributes.label,m=l[0].attributes.mslabel;return h.attributes.ssrcs=h.attributes.ssrcs.concat(l),h.attributes.ssrcGroups=h.attributes.ssrcGroups.concat(u),{id:p,mslabel:m}}batchSend(n){return n.map(i=>{let{kind:a,ssrcMsg:l}=i;return this.send(a,l,void 0)})}stopSending(n){this.sessionDesc.mediaDescriptions.forEach(i=>{const a=[],l=[],u=[];i.attributes.ssrcs.forEach(h=>{Ge(n).call(n,h.attributes.label||"")?u.push(h):a.push(h)}),i.attributes.ssrcGroups.forEach(h=>{var p;Ge(p=u.map(m=>m.ssrcId)).call(p,h.ssrcIds[0])||l.push(h)}),i.attributes.ssrcs=a,i.attributes.ssrcGroups=l})}mute(n){const i=this.sessionDesc.mediaDescriptions.find(a=>a.attributes.mid===n);if(!i)throw new Error("mediaDescription not found with ".concat(n," in remote SDP when calling RemoteSDP.mute."));i.attributes.direction="inactive"}unmute(n){const i=this.sessionDesc.mediaDescriptions.find(a=>a.attributes.mid===n);if(!i)throw new Error("mediaDescription not found with ".concat(n," in remote SDP when calling RemoteSDP.unmute."));i.attributes.direction="sendonly"}receive(n,i,a){n.forEach((l,u)=>{const h=l._mediaStreamTrack,p=this.sessionDesc.mediaDescriptions.findIndex(E=>E.attributes.mid===h.kind),m=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[p],l);this.sessionDesc.mediaDescriptions[p]=m})}stopReceiving(n){}updateCandidates(n){const i=this._originCandidates.filter(l=>l.transport==="udp"),a=[];if(i.forEach(l=>{a.push(TH(TH({},l),{},{foundation:"tcpcandidate",priority:Number(l.priority)-1+"",transport:"tcp",port:Number(l.port)+90+""}))}),i.length!==0){switch(n){case Qi.TCP_RELAY:this.candidates=a;break;case Qi.UDP_TCP_RELAY:case Qi.RELAY:this.candidates=[...i,...a];break;default:this.candidates=i}for(const l of this.sessionDesc.mediaDescriptions)l.attributes.candidates=this.candidates}}restartICE(n){n=vr(n),this.iceParameters=n,this.sessionDesc.mediaDescriptions.forEach(i=>{i.attributes.iceUfrag=n.iceUfrag,i.attributes.icePwd=n.icePwd})}predictReceivingMids(n){const i=[];for(let a=0;a<n;a++)i.push((this.currentMidIndex+a+1).toString(10));return i}mungRecvMediaDsec(n,i){const a=vr(n);return up(a,i),JI(a,i),a}updateRecvMedia(n,i){const a=this.sessionDesc.mediaDescriptions.findIndex(l=>l.attributes.mid===n);if(a!==-1){const l=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[a],i);this.sessionDesc.mediaDescriptions[a]=l}}bumpMid(n){this.currentMidIndex+=n}updateTrackLabel(n,i,a){const l=this.sessionDesc.mediaDescriptions.find(h=>n===it.VIDEO?h.attributes.mid==="video":h.attributes.mid==="audio");if(l){const h=l.attributes.ssrcs.find(p=>p.attributes.label===i);var u;h&&(h.attributes.label=a,(u=h.attributes.msid)===null||u===void 0||u.replace(i,a))}}mungMediaDesc(n){const i=vr(n);return XI(i),function(a){const l=a.attributes.extmaps.find(u=>bS(u.extensionName));l&&a.attributes.extmaps.splice(a.attributes.extmaps.indexOf(l),1),a.attributes.payloads.forEach(u=>{const h=u.rtcpFeedbacks.findIndex(p=>p.type==="transport-cc");h!==-1&&u.rtcpFeedbacks.splice(h,1)})}(i),i}getSSRC(n){for(const i of this.sessionDesc.mediaDescriptions)for(const a of i.attributes.ssrcs)if(a.attributes.label===n)return[a]}}var er;function RH(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),i.push.apply(i,a)}return i}function ay(e){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?RH(Object(i),!0).forEach(function(a){W(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):RH(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}let V0e=(er=class kg extends F6{get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get localCodecs(){return[...new Set(this.localCapabilities&&this.localCapabilities.videoCodecs.map(n=>n.rtpMap&&n.rtpMap.encodingName.toLowerCase()||"").filter(n=>{var i;return Ge(i=Object.keys(O0)).call(i,n)}))]}constructor(n,i){super(n,i),W(this,"store",void 0),W(this,"peerConnection",void 0),W(this,"remoteSDP",void 0),W(this,"initialOffer",void 0),W(this,"statsFilter",void 0),W(this,"useRTX",!1),W(this,"localCapabilities",void 0),W(this,"localCandidateCount",0),W(this,"allCandidatesReceived",!1),W(this,"establishPromise",void 0),W(this,"mutex",void 0),this.store=i,this.mutex=new qi("P2PConnection-mutex",i.clientId),this.peerConnection=new RTCPeerConnection(kg.resolvePCConfiguration(n),{optional:[{googDscp:!0}]}),this.statsFilter=oI(this.peerConnection,Q("STATS_UPDATE_INTERVAL"),void 0,Or()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1,this.establishPromise=this.establish()}async establish(){try{const n=await this.peerConnection.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});if(!n.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const i=Wu(n.sdp),a=B0(n.sdp,{filterRTX:!this.useRTX,filterVideoFec:Q("FILTER_VIDEO_FEC"),filterAudioFec:Q("FILTER_AUDIO_FEC"),filterAudioCodec:["opus"]});return this.localCapabilities=a,this.initialOffer=n,ay(ay({},i),{},{rtpCapabilities:{send:{audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},recv:{audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},sendrecv:a},offerSDP:n.sdp})}catch(n){throw new Re(X.GET_LOCAL_CONNECTION_PARAMS_FAILED,n.toString())}}async updateRemoteConnect(){}async connect(n){try{if(!this.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");this.remoteSDP=new B0e(ay(ay({},n),{},{rtpCapabilities:n.rtpCapabilities.send,localCapabilities:this.localCapabilities,sdkCodec:this.store.codec}));const i=this.remoteSDP.toString();await this.peerConnection.setLocalDescription(this.initialOffer),await this.peerConnection.setRemoteDescription({type:"answer",sdp:i})}catch(i){throw new Re(X.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(i.toString()))}}async updateRemoteRTPCapabilities(n,i){throw new Re(X.NOT_SUPPORTED,"Planb mode does not support createDataChannels.")}getPreMedia(n){}send(n,i){var a=this;return ss(function*(){const l=yield Tn(a.mutex.lock());try{if(!a.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");const u=n.map(w=>a.peerConnection.addTrack(w._mediaStreamTrack)),h=yield Tn(a.peerConnection.createOffer()),p=sa(h.sdp),m=n.map(w=>{const O=w._mediaStreamTrack,H=p.mediaDescriptions.find(B=>B.attributes.mid===O.kind);if(!H)throw new Error("Cannot extract ssrc from mediaDescription.");return function(B,j,q){const Y=B.attributes.ssrcs.filter(pe=>pe.attributes.label===j),Z=B.attributes.ssrcGroups;if(Y.length===0)throw new Error("Cannot extract ssrc from plan-b SDP.");if(Z&&Y.length>1){const pe=Z.find(he=>he.ssrcIds.indexOf(Y[0].ssrcId)!==-1);return pe?[{ssrcId:pe.ssrcIds[0],rtx:q?pe.ssrcIds[1]:void 0}]:[{ssrcId:Y[0].ssrcId}]}return[{ssrcId:Y[0].ssrcId}]}(H,O.id,a.useRTX)});let E;try{E=yield m}catch(w){throw u.forEach(O=>{$i()&&O.replaceTrack(null),a.peerConnection.removeTrack(O)}),w}const S=a.mungSendOfferSDP(h.sdp,n);a.remoteSDP.receive(n,i,E);const R=a.remoteSDP.toString();return yield Tn(a.peerConnection.setLocalDescription({type:"offer",sdp:S})),yield Tn(a.applySendEncodings(u,n)),yield Tn(a.peerConnection.setRemoteDescription({type:"answer",sdp:R})),n.map((w,O)=>{const H=w._mediaStreamTrack.id;return{localSSRC:m[O],id:H}})}catch(u){throw new Re(X.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(u.toString()))}finally{l()}})()}async stopSending(n){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");const i=this.peerConnection.getSenders().filter(u=>{var h;return n.indexOf(((h=u.track)===null||h===void 0?void 0:h.id)||"")!==-1});if(i.length!==n.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.");i.map(u=>{$i()&&u.replaceTrack(null),this.peerConnection.removeTrack(u)});const a=await this.peerConnection.createOffer();await this.peerConnection.setLocalDescription(a),this.remoteSDP.stopReceiving(n);const l=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"answer",sdp:l})}catch(i){throw new Re(X.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(i.toString()))}}async receive(n,i,a,l){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(n," before remoteSDP created."));const{id:u,mslabel:h}=this.remoteSDP.send(n,i,l),p=new et((S,R)=>{const w=setTimeout(()=>{R(new Error("Cannot receive track, id: ".concat(u)))},1e4),O=H=>{const B=yn();if((B.name==="Safari"&&Number(B.version)===11||co())&&H.track.id!==u&&H.streams[0].id===h){var j;const q=H.streams[0].getTracks()[0];return(j=this.remoteSDP)===null||j===void 0||j.updateTrackLabel(n,u,H.track.id),this.peerConnection.removeEventListener("track",O),clearTimeout(w),void S(q)}if(H.track.id===u)return this.peerConnection.removeEventListener("track",O),clearTimeout(w),void S(H.track)};this.peerConnection.addEventListener("track",O)}),m=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:m});const E=await this.peerConnection.createAnswer();return await this.peerConnection.setLocalDescription(E),{track:await p,id:u}}catch(u){throw new Re(X.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(u.toString()))}}async stopReceiving(n){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");this.remoteSDP.stopSending(n);const i=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:i});const a=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(a)}catch(i){throw new Re(X.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(i.toString()))}}async muteRemote(n){}async unmuteRemote(n){}async muteLocal(n){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");const i=this.peerConnection.getSenders().filter(a=>{var l;return n.indexOf(((l=a.track)===null||l===void 0?void 0:l.id)||"")!==-1});if(i.length!==n.length)throw new Error("sender' length doesn't match mids' length.");i.map(a=>{if($i()&&a.track)a.track.enabled=!1;else{const l=a.getParameters();l.encodings.forEach(u=>u.active=!1),a.setParameters(l)}})}catch(i){throw new Re(X.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(i.toString()))}}async unmuteLocal(n){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");const i=this.peerConnection.getSenders().filter(u=>{var h;return n.indexOf(((h=u.track)===null||h===void 0?void 0:h.id)||"")!==-1});if(i.length!==n.length)throw new Error("Senders' length doesn't match mids' length.");i.map(async u=>{if($i()&&u.track)u.track.enabled=!0;else{const h=u.getParameters();h.encodings.forEach(p=>p.active=!0),await u.setParameters(h)}});const a=await this.peerConnection.createOffer();await this.peerConnection.setLocalDescription(a);const l=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"answer",sdp:l})}catch(i){throw new Re(X.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(i.toString()))}}restartICE(n){var i=this;return ss(function*(){const a=yield Tn(i.mutex.lock("From P2PConnection.restartICE"));try{if(!i.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");const l=Rn().supportPCSetConfiguration;if(n===Qi.RELAY&&!l)return;if(l){const E=i.peerConnection.getConfiguration(),S=n===Qi.RELAY?"relay":"all";E.iceTransportPolicy!==S&&(k.debug("[".concat(i.store.clientId,"] restartICE change iceTransportPolicy from [").concat(E.iceTransportPolicy,"] to [").concat(S,"]")),E.iceTransportPolicy=S,i.peerConnection.setConfiguration(E))}n!==Qi.RELAY&&i.remoteSDP.updateCandidates(n);const u=yield Tn(i.peerConnection.createOffer({iceRestart:!0}));if(!u.sdp)throw new Error("Cannot restartICE because restart offer SDP does not exist.");const h=Wu(u.sdp),{remoteIceParameters:p}=yield h.iceParameters;i.remoteSDP.restartICE(p);const m=i.remoteSDP.toString();yield Tn(i.peerConnection.setLocalDescription(u)),yield Tn(i.peerConnection.setRemoteDescription({type:"answer",sdp:m}))}catch(l){k.warning("[".concat(i.store.clientId,"] restart ICE failed, abort operation"),l)}finally{a()}})()}close(){var n;this.peerConnection.close(),(n=this.onConnectionStateChange)===null||n===void 0||n.call(this,"closed"),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.statsFilter.destroy()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(n){return this.statsFilter.getVideoIsReady(n)}async updateEncoderConfig(n,i){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");const a=await this.peerConnection.createOffer(),l=this.mungSendOfferSDP(a.sdp,[i]);this.remoteSDP.updateRecvMedia(i._mediaStreamTrack.kind,i);const u=this.remoteSDP.toString();await this.peerConnection.setLocalDescription({type:"offer",sdp:l}),await this.peerConnection.setRemoteDescription({type:"answer",sdp:u})}catch(a){throw new Re(X.EXCHANGE_SDP_FAILED,a.toString())}}async updateSendParameters(n,i){const a=this.peerConnection.getSenders().filter(l=>{var u;return((u=l.track)===null||u===void 0?void 0:u.id)===n});a.length===1&&await this.applySendEncodings(a,[i])}setStatsRemoteVideoIsReady(n,i){this.statsFilter.setVideoIsReady2(n,i)}async replaceTrack(n,i){const a=this.peerConnection.getSenders().find(l=>{var u;return((u=l.track)===null||u===void 0?void 0:u.id)===i});a&&await a.replaceTrack(n._mediaStreamTrack)}createDataChannels(n,i){throw new Re(X.NOT_SUPPORTED,"Planb mode does not support createDataChannels.")}stopDataChannels(n){throw new Re(X.NOT_SUPPORTED,"Planb mode does not support stopDataChannels.")}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var n;(n=this.onICEConnectionStateChange)===null||n===void 0||n.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var n;(n=this.onConnectionStateChange)===null||n===void 0||n.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidate=n=>{n.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,k.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},setTimeout(()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,k.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))},Q("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(n){const i={iceServers:[],sdpSemantics:"plan-b"};return n.iceServers?i.iceServers=n.iceServers:n.turnServer&&n.turnServer.mode!=="off"&&(T0(n.turnServer.servers)?i.iceServers=n.turnServer.servers:(i.iceServers&&i.iceServers.push(...kg.turnServerConfigToIceServers(n.turnServer.servers)),Q("USE_TURN_SERVER_OF_GATEWAY")&&i.iceServers&&n.turnServer.serversFromGateway&&i.iceServers.push(...kg.turnServerConfigToIceServers(n.turnServer.serversFromGateway)),n.turnServer.servers.concat(n.turnServer.serversFromGateway||[]).forEach(a=>{a.forceturn&&(i.iceTransportPolicy="relay")}))),i}static turnServerConfigToIceServers(n){const i=[];return n.forEach(a=>{a.security?a.tcpport&&i.push({username:a.username,credential:a.password,credentialType:"password",urls:"turns:".concat(a.turnServerURL,":").concat(a.tcpport,"?transport=tcp")}):(a.udpport&&i.push({username:a.username,credential:a.password,credentialType:"password",urls:"turn:".concat(a.turnServerURL,":").concat(a.udpport,"?transport=udp")}),a.tcpport&&i.push({username:a.username,credential:a.password,credentialType:"password",urls:"turn:".concat(a.turnServerURL,":").concat(a.tcpport,"?transport=tcp")}))}),i}async updateRtpSenderEncodings(n,i){var a;if(i||(i=this.peerConnection.getSenders().find(E=>{var S;return((S=E.track)===null||S===void 0?void 0:S.id)===n._mediaStreamTrack.id})),!i)return k.warn("[".concat(n.getTrackId(),"] no rtpSender found}"));if(!Rn().supportSetRtpSenderParameters)return k.warn("Browser not support set rtp-sender parameters");const l={},u={};if(n instanceof sr)switch(n._optimizationMode){case"motion":l.degradationPreference="maintain-framerate";break;case"detail":l.degradationPreference="maintain-resolution";break;default:l.degradationPreference="balanced"}if(Q("DSCP_TYPE")&&Gl()){var h;const E=Q("DSCP_TYPE");Ge(h=["very-low","low","medium","high"]).call(h,E)&&(u.networkPriority=E)}const p=i.getParameters(),m=(a=p.encodings)===null||a===void 0?void 0:a[0];m&&Object.assign(m,u),Object.assign(p,l),k.debug("[".concat(n.getTrackId(),"] updateRtpSenderEncodings: ").concat(JSON.stringify(p.encodings))),await i.setParameters(p)}async applySendEncodings(n,i){try{if(!Rn().supportSetRtpSenderParameters||n.length!==i.length)return;for(let a=0;a<n.length;a++){const l=n[a],u=i[a];l&&u&&await this.updateRtpSenderEncodings(u,l)}}catch{k.debug("[".concat(this.store.clientId,"] Apply RTPSendEncodings failed."))}}mungSendOfferSDP(n,i){const a=sa(n);return i.forEach((l,u)=>{const h=l._mediaStreamTrack,p=a.mediaDescriptions.find(m=>m.attributes.mid===h.kind);p&&up(p,l)}),Bu(a)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=n=>{var i;(i=this.onFirstAudioReceived)===null||i===void 0||i.call(this,n)},this.statsFilter.onFirstVideoReceived=n=>{var i;(i=this.onFirstVideoReceived)===null||i===void 0||i.call(this,n)},this.statsFilter.onFirstAudioDecoded=n=>{var i;(i=this.onFirstAudioDecoded)===null||i===void 0||i.call(this,n)},this.statsFilter.onFirstVideoDecoded=(n,i,a)=>{var l;(l=this.onFirstVideoDecoded)===null||l===void 0||l.call(this,n,i,a)},this.statsFilter.onSelectedLocalCandidateChanged=(n,i)=>{var a;(a=this.onSelectedLocalCandidateChanged)===null||a===void 0||a.call(this,n,i)},this.statsFilter.onSelectedRemoteCandidateChanged=(n,i)=>{var a;(a=this.onSelectedRemoteCandidateChanged)===null||a===void 0||a.call(this,n,i)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0}async batchReceive(n){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.batchReceive before remoteSDP created.");const i=this.remoteSDP.batchSend(n).map((u,h)=>{let{id:p,mslabel:m}=u;const{kind:E}=n[h];return new et((S,R)=>{const w=setTimeout(()=>{R(new Error("Cannot receive track, id: ".concat(p)))},1e4),O=H=>{const B=yn();if(B.name==="Safari"&&Number(B.version)===11&&H.track.id!==p&&H.streams[0].id===m){var j;const q=H.streams[0].getTracks()[0];return(j=this.remoteSDP)===null||j===void 0||j.updateTrackLabel(E,p,H.track.id),this.peerConnection.removeEventListener("track",O),clearTimeout(w),void S({track:q,id:p})}if(H.track.id===p)return this.peerConnection.removeEventListener("track",O),clearTimeout(w),void S({track:H.track,id:p})};this.peerConnection.addEventListener("track",O)})}),a=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:a});const l=await this.peerConnection.createAnswer();return await this.peerConnection.setLocalDescription(l),await et.all(i)}catch(i){throw new Re(X.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(i.toString()))}}async getRemoteSSRC(n){if(!this.remoteSDP)return;const i=this.remoteSDP.getSSRC(n);return i==null?void 0:i[0].ssrcId}setConfiguration(n){if(Rn().supportPCSetConfiguration){const i=kg.resolvePCConfiguration(n);this.peerConnection.setConfiguration(i)}}},st(er.prototype,"connect",[gs],Object.getOwnPropertyDescriptor(er.prototype,"connect"),er.prototype),st(er.prototype,"stopSending",[gs],Object.getOwnPropertyDescriptor(er.prototype,"stopSending"),er.prototype),st(er.prototype,"receive",[gs],Object.getOwnPropertyDescriptor(er.prototype,"receive"),er.prototype),st(er.prototype,"stopReceiving",[gs],Object.getOwnPropertyDescriptor(er.prototype,"stopReceiving"),er.prototype),st(er.prototype,"muteRemote",[gs],Object.getOwnPropertyDescriptor(er.prototype,"muteRemote"),er.prototype),st(er.prototype,"unmuteRemote",[gs],Object.getOwnPropertyDescriptor(er.prototype,"unmuteRemote"),er.prototype),st(er.prototype,"muteLocal",[gs],Object.getOwnPropertyDescriptor(er.prototype,"muteLocal"),er.prototype),st(er.prototype,"unmuteLocal",[gs],Object.getOwnPropertyDescriptor(er.prototype,"unmuteLocal"),er.prototype),st(er.prototype,"close",[gs],Object.getOwnPropertyDescriptor(er.prototype,"close"),er.prototype),st(er.prototype,"updateEncoderConfig",[gs],Object.getOwnPropertyDescriptor(er.prototype,"updateEncoderConfig"),er.prototype),st(er.prototype,"updateSendParameters",[gs],Object.getOwnPropertyDescriptor(er.prototype,"updateSendParameters"),er.prototype),st(er.prototype,"replaceTrack",[gs],Object.getOwnPropertyDescriptor(er.prototype,"replaceTrack"),er.prototype),st(er.prototype,"getRemoteSSRC",[gs],Object.getOwnPropertyDescriptor(er.prototype,"getRemoteSSRC"),er.prototype),er);function gs(e,n,i){const a=e[n];if(typeof a!="function")throw new Error("Cannot use mutex on object property.");return i.value=async function(){const l=this.mutex,u=await l.lock("Locking from P2PConnection.".concat(n));try{for(var h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];return await a.apply(this,p)}finally{u()}},i}const j0e={name:"PlanBConnection",create:function(e){let{store:n,spec:i}=e;return new V0e(i,n)}},$0e={interceptLocalAudioFrame:async function(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Rn().supportWebRTCEncodedTransform)return void k.warning("browser not support audio encoded transform");if(aS.has(e)||!e.track)return;const i={track:e.track};if(Wl()){if(!e.createEncodedStreams)return void k.warning("browser not support createEncodedStreams() API");let l=null;try{l=e.createEncodedStreams()}catch(h){return void k.error("create audio-encoded-streams error",h&&h.message)}const u=new TransformStream({transform(h,p){i.controller||(i.controller=p),e.track&&e.track.id!==i.track.id&&(k.debug("audio track changed: ".concat(i.track.id," => ").concat(e.track.id)),i.track.removeEventListener("ended",a),i.track=e.track,i.track.addEventListener("ended",a));const m=n.metadata&&n.metadata();m?function(E,S){const{chunk:R,controller:w}=S,O=Vu.METADATA;R.data=function(H,B,j){const q=j.byteLength,Y=q+xI+S6,Z=AI+OI+Y,pe=new ArrayBuffer(H.byteLength+Z),he=new DataView(pe);he.setUint8(0,_6),he.setUint16(1,Y),he.setUint8(3,B),he.setUint16(4,q);for(let Se=0;Se<q;Se++)he.setUint8(6+Se,j[Se]);const re=new Uint8Array(he.buffer);return re.set(new Uint8Array(H),Z),re.buffer}(R.data,O,E),w.enqueue(R)}(m,{sender:e,chunk:h,controller:p}):p.enqueue(h)}});l.readable.pipeThrough(u).pipeTo(l.writable)}else if($i()){if(typeof RTCRtpScriptTransform>"u")return void k.warning("browser not support RTCRtpScriptTransform");const l=oS(),u=new MessageChannel;await new et(p=>l.onmessage=m=>{m.data==="registered"&&p(void 0)});const h=new RTCRtpScriptTransform(l,{name:"audio-metadata-tx",port:u.port2},[u.port2]);e.transform=h,await new et(p=>l.onmessage=m=>{m.data==="started"&&p(void 0)}),u.port1.onmessage=p=>{var m;if(p.data.transformed&&e.track&&((m=e.track)===null||m===void 0?void 0:m.id)!==i.track.id)k.debug("audio track changed: ".concat(i.track.id," => ").concat(e.track.id)),i.track.removeEventListener("ended",a),i.track=e.track,i.track.addEventListener("ended",a);else if(p.data.getMetadata){const E=n.metadata&&n.metadata();E&&u.port1.postMessage({metadata:E})}},i.worker=l}function a(){if(e.track){if(this.id!==e.track.id)return;e.track.removeEventListener("ended",a)}const l=aS.get(e);if(l){aS.delete(e);try{var u,h;(u=l.controller)===null||u===void 0||u.terminate(),(h=l.worker)===null||h===void 0||h.terminate()}catch(p){k.warning(p&&p.message)}}}aS.set(e,i),e.track.addEventListener("ended",a)},interceptRemoteAudioFrame:async function(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Rn().supportWebRTCEncodedTransform)return void k.warning("browser not support audio encoded transform");if(hS.has(e))return;const i={track:e.track,onMetadata:n.onMetadata,onPts:n.onPts};if(Wl()&&!co()){if(!e.createEncodedStreams)return void k.warning("browser not support createEncodedStreams() API");Bw(An.CHROME,87,116)||(n.enableTopn=!1);let l=null;try{l=e.createEncodedStreams()}catch(h){return void k.error("create audio-encoded-streams error",h&&h.message)}const u=new TransformStream({transform(h,p){i.controller||(i.controller=p),e.track&&e.track.id!==i.track.id&&(k.debug("audio track changed: ".concat(i.track.id," => ").concat(e.track.id)),i.track.removeEventListener("ended",a),i.track=e.track,i.track.addEventListener("ended",a)),n.enableTopn?function(m,E,S){var R;const w=NI(new DataView(E.data));if(!w)return S.enqueue(E);const O=m.track.id;Rfe.set(O,m.track);const H=(R=w.tlv.find(pe=>pe.tag===Vu.AUDIO_LEVEL))===null||R===void 0?void 0:R.value;let B=0;typeof H=="number"&&(B=127-H);const j=Math.round(Math.pow(10,B/60)-1),{selected:q,speaker:Y}=function(pe,he){let re=rp.get(pe);if(re||(re=function(Se){const Ae=new C6;return rp.set(Se,Ae),Oc||(Oc=new bfe(Q("TOPN_SILENCE_THRESHOLD")||500),Oc.on("ActiveSpeakerChanged",Ne=>{Ne!=null&&(lS=Ne)})),Oc.addSpeakers([Ae]),Ae}(pe)),rp.size<=b6)return{selected:!0,speaker:re};if(!Oc)throw new Error("no active speaker detector");return Oc.levelChanged(re.id,he),oh=Oc.loudest.map(Se=>Se.id),lS&&!Ge(oh).call(oh,lS)&&oh.length>=b6&&oh.pop(),{selected:Ge(oh).call(oh,re.id)||re.id===lS,speaker:re}}(m,j),Z=function(pe,he,re){const Se=xc.get(pe)||new Tfe(pe,he);return Se.score=re,xc.set(pe,Se),function(Ae){if(uS.set(Ae,!0),!dS)return void(dS=Date.now());const Ne=Date.now();Ne-dS>1e3&&(uS.get(Ae)?uS.set(Ae,!1):(T6(Ae),uS.delete(Ae)),dS=Ne)}(pe),Se}(O,m.track,Y.energyScore);Z.addSample(q),Z.active&&(E.data=w.frame.buffer,S.enqueue(E))}(e,h,p):n.enableMetadata||n.enablePts?function(m,E,S,R){const w=new DataView(m.data),O=w.getUint8(0);let H;if(128&O&&O!==71){const q=function(Y){if(Y.byteLength<=0)return[];const Z=[];let pe=0;for(;pe<Y.byteLength;){const re=(128&Y.getUint8(pe))>>7,Se=127&Y.getUint8(pe);if(!(re&&pe+4<=Y.byteLength)){pe++;break}{const Ae=Y.getUint32(pe,!1),Ne=(16776192&Ae)>>10,Be=1023&Ae;Z.push({pt:Se,ts_offset:Ne,length:Be,data:new Uint8Array}),pe+=4}}let he=Y.byteLength-pe;for(const re of Z){if(re.length>he)return console.warn("Broken red payload"),[];re.length>0&&(re.data=new Uint8Array(Y.buffer,Y.byteOffset+pe,re.length),pe+=re.length,he-=re.length)}if(he>0){const re={pt:Z.length>0?Z[Z.length-1].pt:0,ts_offset:0,length:he,data:new Uint8Array(Y.buffer,Y.byteOffset+pe,he)};Z.push(re)}return Z}(w);if(q.length>0){const Y=function(Z){let pe=0;for(let Se=0;Se<Z.length;Se++)pe+=Se<Z.length-1?4:1,pe+=Z[Se].length;const he=new Uint8Array(pe);let re=0;for(let Se=0;Se<Z.length;Se++)if(Se<Z.length-1){const Ae=(2147483648|(127&Z[Se].pt)<<24|(262143&Z[Se].ts_offset)<<10|1023&Z[Se].length)>>>0;he[re++]=Ae>>24&255,he[re++]=Ae>>16&255,he[re++]=Ae>>8&255,he[re++]=255&Ae}else he[re++]=127&Z[Se].pt;for(const Se of Z)he.set(Se.data,re),re+=Se.length;return he}(q.map(Z=>{const pe=new Uint8Array(Z.length);pe.set(Z.data);const he=NI(new DataView(pe.buffer));return he!=null&&he.frame&&(Z.data=he==null?void 0:he.frame),H=he,Z}));m.data=Y.buffer}}else H=NI(w),H&&(m.data=H.frame.buffer);if(E.enqueue(m),!H)return;const B=H.tlv.find(q=>q.tag===Vu.METADATA);B&&S&&B.value instanceof Uint8Array&&S(B.value);const j=H.tlv.find(q=>q.tag===Vu.AUDIO_64_BIT_PTS);j&&R&&j.value instanceof Uint8Array&&j.value.length==8&&R(new DataView(j.value.buffer).getBigUint64(0,!0))}(h,p,n.onMetadata,n.onPts):p.enqueue(h)}});l.readable.pipeThrough(u).pipeTo(l.writable)}else{if(typeof RTCRtpScriptTransform>"u")return void k.warning("browser not support RTCRtpScriptTransform");const l=oS(),u=new MessageChannel;await new et(p=>l.onmessage=m=>{m.data==="registered"&&p(void 0)});const h=new RTCRtpScriptTransform(l,{name:"audio-metadata-rx",port:u.port2},[u.port2]);e.transform=h,await new et(p=>l.onmessage=m=>{m.data==="started"&&p(void 0)}),u.port1.onmessage=p=>{var m;p.data.transformed&&e.track&&((m=e.track)===null||m===void 0?void 0:m.id)!==i.track.id?(k.debug("audio track changed: ".concat(i.track.id," => ").concat(e.track.id)),i.track.removeEventListener("ended",a),i.track=e.track,i.track.addEventListener("ended",a)):p.data.metadata&&i.onMetadata?i.onMetadata(p.data.metadata):p.data.pts&&i.onPts&&i.onPts(p.data.pts)},i.worker=l}function a(){e.track.removeEventListener("ended",a),function(l){const u=hS.get(l);if(u){(function(m){const E=rp.get(m);E&&(rp.delete(m),Oc&&(Oc.removeSpeakers([E]),rp.size===0&&(Oc.destroy(),Oc=null)))})(l),T6(l.track.id),hS.delete(l);try{var h,p;(h=u.controller)===null||h===void 0||h.terminate(),(p=u.worker)===null||p===void 0||p.terminate()}catch(m){k.warning(m&&m.message)}}}(e)}hS.set(e,i),e.track.addEventListener("ended",a)},interceptLocalVideoFrame:async function(e,n){if(!Rn().supportWebRTCEncodedTransform)return void k.warning("browser not support video encoded transform");if(fS.has(e)||!e.track)return;const i={track:e.track};if(Wl()){if(!e.createEncodedStreams)return void k.warning("browser not support createEncodedStreams() API");let l=null;try{l=e.createEncodedStreams()}catch(p){return void k.error("create video-encoded-streams error",p&&p.message)}const u=[];n.on("sei-to-send",p=>{u.push(p)});const h=new TransformStream({transform(p,m){i.controller||(i.controller=m),e.track&&e.track.id!==i.track.id&&(k.debug("video track changed: ".concat(i.track.id," => ").concat(e.track.id)),i.track.removeEventListener("ended",a),i.track=e.track,i.track.addEventListener("ended",a));const E=I6(new Uint8Array(p.data)),S=u.shift();if(S){const R=function(w,O,H){switch(H){case kI:return function(B,j){const q=w6(j),Y=q.length,Z=Math.floor(Y/255),pe=Y%255,he=new Uint8Array(6+Z+1+Y+B.byteLength);he[0]=0,he[1]=0,he[2]=0,he[3]=1,he[4]=6,he[5]=101;let re=0;for(;re<Z;)he[6+re]=255,re++;return he[6+re]=pe,re++,he.set(q,6+re),he.set(new Uint8Array(B),6+re+Y),he.buffer}(w,O);case MI:return function(B,j){const q=w6(j),Y=q.length,Z=Math.floor(Y/255),pe=Y%255,he=new Uint8Array(7+Z+1+Y+1+B.byteLength);he[0]=0,he[1]=0,he[2]=0,he[3]=1,he[4]=78,he[5]=1,he[6]=101;let re=0;for(;re<Z;)he[7+re]=255,re++;return he[7+re]=pe,re++,he.set(q,7+re),re+=Y,he[7+re]=128,re++,he.set(new Uint8Array(B),7+re),he.buffer}(w,O);default:return null}}(p.data,S,E);R&&(p.data=R)}m.enqueue(p)}});l.readable.pipeThrough(h).pipeTo(l.writable)}else{if(!$i())return;{if(typeof RTCRtpScriptTransform>"u")return void k.warning("browser not support RTCRtpScriptTransform");const l=oS(),u=new MessageChannel;await new et(p=>l.onmessage=m=>{m.data==="registered"&&p(void 0)});const h=new RTCRtpScriptTransform(l,{name:"sei-tx",port:u.port2},[u.port2]);e.transform=h,await new et(p=>l.onmessage=m=>{m.data==="started"&&p(void 0)}),n.on("sei-to-send",p=>{u.port1.postMessage({sei:p})}),u.port1.onmessage=p=>{var m;p.data.transformed&&e.track&&((m=e.track)===null||m===void 0?void 0:m.id)!==i.track.id&&(k.debug("video track changed: ".concat(i.track.id," => ").concat(e.track.id)),i.track.removeEventListener("ended",a),i.track=e.track,i.track.addEventListener("ended",a))},i.worker=l}}function a(){if(e.track){if(this.id!==e.track.id)return;e.track.removeEventListener("ended",a)}const l=fS.get(e);if(l){fS.delete(e);try{var u,h;(u=l.controller)===null||u===void 0||u.terminate(),(h=l.worker)===null||h===void 0||h.terminate()}catch(p){k.warning(p&&p.message)}}}fS.set(e,i),e.track.addEventListener("ended",a)},interceptRemoteVideoFrame:async function(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Rn().supportWebRTCEncodedTransform)return void k.warning("browser not support video encoded transform");if(!e.track)return;if(D0.has(e)){const l=D0.get(e);return void(l&&(l.onSei=n.onSei))}const i={track:e.track,onSei:n.onSei};if(Wl()){if(!e.createEncodedStreams)return void k.warning("browser not support createEncodedStreams() API");let l=null;try{l=e.createEncodedStreams()}catch(h){return void k.error("create video-encoded-streams error",h&&h.message)}const u=new TransformStream({transform(h,p){i.controller||(i.controller=p),e.track&&e.track.id!==i.track.id&&(k.debug("video track changed: ".concat(i.track.id," => ").concat(e.track.id)),i.track.removeEventListener("ended",a),i.track=e.track,i.track.addEventListener("ended",a));const m=function(E,S){switch(S){case kI:return function(R){const w=new DataView(R.data);let O=0;for(;O+4<R.data.byteLength;){if(w.getUint8(O+0)===0&&w.getUint8(O+1)===0&&w.getUint8(O+2)===0&&w.getUint8(O+3)===1&&w.getUint8(O+4)===6){let H=O+6,B=0,j=0;for(;(j=w.getUint8(H++))===255;)B+=255;B+=j;const q=R6(R.data,H,B);return new Uint8Array(q)}O++}return null}(E);case MI:return function(R){const w=new DataView(R.data);let O=0;for(;O+5<R.data.byteLength;){if(w.getUint8(O+0)===0&&w.getUint8(O+1)===0&&w.getUint8(O+2)===0&&w.getUint8(O+3)===1&&w.getUint8(O+4)===78&&w.getUint8(O+5)===1&&w.getUint8(O+6)===101){let H=O+7,B=0,j=0;for(;(j=w.getUint8(H++))===255;)B+=255;B+=j;const q=R6(R.data,H,B);return new Uint8Array(q)}O++}return null}(E);default:return null}}(h,I6(new Uint8Array(h.data)));m&&i.onSei&&i.onSei(m),p.enqueue(h)}});l.readable.pipeThrough(u).pipeTo(l.writable)}else if($i()){if(typeof RTCRtpScriptTransform>"u")return void k.warning("browser not support RTCRtpScriptTransform");const l=oS(),u=new MessageChannel;await new et(p=>l.onmessage=m=>{m.data==="registered"&&p(void 0)});const h=new RTCRtpScriptTransform(l,{name:"sei-rx",port:u.port2},[u.port2]);e.transform=h,await new et(p=>l.onmessage=m=>{m.data==="started"&&p(void 0)}),u.port1.onmessage=p=>{var m;p.data.transformed&&e.track&&((m=e.track)===null||m===void 0?void 0:m.id)!==i.track.id?(k.debug("video track changed: ".concat(i.track.id," => ").concat(e.track.id)),i.track.removeEventListener("ended",a),i.track=e.track,i.track.addEventListener("ended",a)):p.data.sei&&i.onSei&&i.onSei(p.data.sei)},i.worker=l}function a(){if(e.track){if(this.id!==e.track.id)return;e.track.removeEventListener("ended",a)}(function(l){const u=D0.get(l);if(u){D0.delete(l);try{var h,p;(h=u.controller)===null||h===void 0||h.terminate(),(p=u.worker)===null||p===void 0||p.terminate()}catch(m){k.warning(m&&m.message)}}})(e)}D0.set(e,i),e.track.addEventListener("ended",a)}},H0e={name:"InterceptFrame",create:()=>$0e};aI(),zn("PROCESS_ID","process-".concat(Zn(8,""),"-").concat(Zn(4,""),"-").concat(Zn(4,""),"-").concat(Zn(4,""),"-").concat(Zn(12,""))),function(){let e;try{e=window.localStorage.getItem("websdk_ng_global_parameter")}catch(n){return void k.error("Error loading sdk config",n.message)}if(e)try{const n=JSON.parse(window.atob(e)),i=Date.now();k.debug("Loading global parameters from cache",n),Object.keys(n).forEach(a=>{if(Object.prototype.hasOwnProperty.call(fr,a)){const{value:l,expires:u}=n[a];if(u&&u<=i)return;Ac[a]=l,fr[a]=l}})}catch(n){k.error("Error loading mutableParamsCache: ".concat(e),n.message)}}(),Array.isArray(Ac.AREAS)&&Ac.AREAS.length>0&&tA(Ac.AREAS,!0);const wH=(e,n,i)=>{k.debug("setParameter key:".concat(e,", value:").concat(JSON.stringify(n))),zn(e,n,i)};Yu(h0e,!1),Yu(m0e,!1),Yu(Xpe,!1),Yu(w0e,!1),Yu(l0e,!1),Yu(U0e,!1),Yu(j0e,!1),Yu(H0e,!1);const ti=function(e){const n=new br,i=e,a={getListeners:n.getListeners.bind(n),on:(l,u)=>(function(h,p){h===gl.SECURITY_POLICY_VIOLATION&&a$(p,!0)}(l,u),n.on.bind(n)(l,u)),addListener:n.addListener.bind(n),once:n.once.bind(n),off:n.off.bind(n),removeAllListeners:n.removeAllListeners.bind(n),emit:n.emit.bind(n),safeEmit:n.safeEmit.bind(n)};return o$(o$({},i),a)}({__TRACK_LIST__:Yf,VERSION:cs,BUILD:lI,ESM_BUNDLER:!1,ESM:!1,UMD:!0,DEV:!1,setParameter:wH,getParameter:Q,getSupportedCodec:async function(){let e={audio:[],video:[]};try{let n=new RTCPeerConnection;const i=await async function(a){let l;return Rn().supportUnifiedPlan?(a.addTransceiver("video",{direction:"recvonly"}),a.addTransceiver("audio",{direction:"recvonly"}),l=(await a.createOffer()).sdp):l=(await a.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0})).sdp,l}(n);if(!i)return e;n.close(),n=null,e=function(a){const l={video:[],audio:[]};return a.match(/ VP8/i)&&l.video.push("VP8"),a.match(/ VP9/i)&&l.video.push("VP9"),a.match(/ AV1/i)&&l.video.push("AV1"),a.match(/ H264/i)&&l.video.push("H264"),a.match(/ H265/i)&&l.video.push("H265"),a.match(/ opus/i)&&l.audio.push("OPUS"),a.match(/ PCMU/i)&&l.audio.push("PCMU"),a.match(/ PCMA/i)&&l.audio.push("PCMA"),a.match(/ G722/i)&&l.audio.push("G722"),l}(i)}catch(n){throw new Ce(X.CREATE_OFFER_FAILED,n.toString&&n.toString()).print()}return e},checkSystemRequirements:function(){const e=ct.reportApiInvoke(null,{name:Ur.CHECK_SYSTEM_REQUIREMENTS,options:[],tag:gr.TRACER});let n=!1;try{const u=window.RTCPeerConnection,h=navigator.mediaDevices&&navigator.mediaDevices.getUserMedia,p=window.WebSocket;n=!!(u&&h&&p),n&&Ww()&&R3(75)&&new u().close()}catch(u){return k.error("check system requirement failed: ",u),!1}let i=!1;const a=yn();a.name===An.CHROME&&Number(a.version)>=58&&(Rc.engine.name!=="WebKit"||function(){const u=yn();if($_()){if(u.os===Ci.MAC_OS)return!0;if(u.os===Ci.IOS){const h=Rc.os.version&&Rc.os.version.split(".");if(h&&Number(h[0])===14&&h[1]&&Number(h[1])>=3||h&&Number(h[0])>14)return!0}}return!1}())&&(i=!0),(a.name===An.FIREFOX&&Number(a.version)>=56||a.name===An.OPERA&&Number(a.version)>=45||a.name===An.SAFARI&&Number(a.version)>=11||a.name==="WebKit"&&(co()||Hs())&&a.osVersion&&Number(a.osVersion.split(".")[0])>=11||N3()||yn().name===An.QQ)&&(i=!0),k.debug("checkSystemRequirements, api:",n,"browser",i);const l=n&&i;return e.onSuccess(l),l},getDevices:function(e){return Ka.enumerateDevices(!0,!0,e)},getMicrophones:function(e){return Ka.getRecordingDevices(e)},getCameras:function(e){return Ka.getCamerasDevices(e)},getElectronScreenSources:RV,getPlaybackDevices:function(e){return Ka.getSpeakers(e)},createClient:function(){var e;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{codec:"vp8",audioCodec:"opus",mode:"rtc"};const i=Zn(5,"client-"),a=ct.reportApiInvoke(null,{id:i,name:Ur.CREATE_CLIENT,options:[n],tag:gr.TRACER});try{(function(l){vi(l.codec,"config.codec",["vp8","vp9","av1","h264","h265"]),vi(l.mode,"config.mode",["rtc","live","p2p"]),l.audioCodec!==void 0&&vi(l.audioCodec,"config.audioCodec",["opus","pcmu","pcma","g722"]),l.proxyServer!==void 0&&Ni(l.proxyServer,"config.proxyServer",1,1e4),l.turnServer!==void 0&&B3(l.turnServer),l.httpRetryConfig!==void 0&&U3(l.httpRetryConfig),l.websocketRetryConfig!==void 0&&U3(l.websocketRetryConfig)})(n)}catch(l){throw a.onError(l),l}return(A3(16,0,!0)||$w(16,0,!0))&&(n.codec==="vp9"&&(n.codec="vp8",k.debug("browser not support vp9, force use vp8")),zn("UNSUPPORTED_VIDEO_CODEC",["vp9"])),n.audioCodec===void 0&&(n.audioCodec="opus"),a.onSuccess(),new Jpe(Qs(Qs({forceWaitGatewayResponse:!0},n),{},{role:Ge(e=["rtc","p2p"]).call(e,n.mode)?"host":n.role||"audience"}),i)},createCameraVideoTrack:async function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=Q("CAMERA_CAPTURE_CONFIG"),i=Zn(8,"track-cam-"),a=ct.reportApiInvoke(null,{id:i,tag:gr.TRACER,name:Ur.CREATE_CAM_VIDEO_TRACK,options:[rr({},e),n]});n&&(e.encoderConfig=n);const l=rS(e);let u=null;k.info("start create camera video track with config",JSON.stringify(e),"trackId",i);try{u=(await Ga({video:l},i)).getVideoTracks()[0]||null}catch(p){throw a.onError(p),p}if(!u){const p=new Re(X.UNEXPECTED_ERROR,"can not find track in media stream");return a.onError(p),p.throw(k)}if(e.optimizationMode&&II(i,u,e,Gs(e.encoderConfig)),Q("USE_STANDARD_BITRATE_DEFAULT")){const p=Gs(e.encoderConfig);e.encoderConfig=p,delete p.bitrateMax,delete p.bitrateMin}const h=new iS(u,e,l,e.scalabiltyMode?Z_(e.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},e.optimizationMode,i);return a.onSuccess(h.getTrackId()),k.info("create camera video success, trackId:",i),h},createCustomVideoTrack:function(e){const n=Zn(8,"track-cus-"),i=ct.reportApiInvoke(null,{id:n,tag:gr.TRACER,name:Ur.CREATE_CUSTOM_VIDEO_TRACK,options:[e]});Q("USE_STANDARD_BITRATE_DEFAULT")&&(delete e.bitrateMax,delete e.bitrateMin);const a=new sr(e.mediaStreamTrack,{width:e.width,height:e.height,frameRate:e.frameRate,bitrateMax:e.bitrateMax,bitrateMin:e.bitrateMin},e.scalabiltyMode?Z_(e.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},e.optimizationMode,n,[qn.CUSTOM_TRACK]);return i.onSuccess(a.getTrackId()),k.info("create custom video track success with config",e,"trackId",a.getTrackId()),a},createScreenVideoTrack:async function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"disable";const i=typeof n=="object"?function(w){return kV(w)}(n):void 0;i&&(n="auto");const a=Zn(8,"track-scr-v-"),l=ct.reportApiInvoke(null,{id:a,tag:gr.TRACER,name:Ur.CREATE_SCREEN_VIDEO_TRACK,options:[rr({},e),n]});e.encoderConfig?typeof e.encoderConfig=="string"||e.encoderConfig.width&&e.encoderConfig.height||(e.encoderConfig.width={max:1920},e.encoderConfig.height={max:1080}):e.encoderConfig="1080p_2";const u=function(w){const O={};w.screenSourceType&&(O.mediaSource=w.screenSourceType),w.extensionId&&Wl()&&(O.extensionId=w.extensionId);const{displaySurface:H,selfBrowserSurface:B,surfaceSwitching:j,systemAudio:q,preferCurrentTab:Y}=w;(Bf(107)||Vw(107)||Hw(93))&&(H&&(vi(H,"displaySurface",["browser","window","monitor"]),O.displaySurface=H),B?(vi(B,"selfBrowserSurface",["exclude","include"]),O.selfBrowserSurface=B):O.selfBrowserSurface="include",j&&(vi(j,"surfaceSwitching",["exclude","include"]),O.surfaceSwitching=j)),(Bf(105)||Vw(105)||Hw(91))&&q&&(vi(q,"systemAudio",["exclude","include"]),O.systemAudio=q),(Bf(94)||Vw(94)||Hw(80))&&Y&&(O.preferCurrentTab=!0),w.electronScreenSourceId&&(O.sourceId=w.electronScreenSourceId);const Z=w.encoderConfig?mI(w.encoderConfig):null;return O.mandatory={chromeMediaSource:"desktop",maxWidth:Z?Z.width:void 0,maxHeight:Z?Z.height:void 0},Z&&(Z.frameRate&&(typeof Z.frameRate=="number"?(O.mandatory.maxFrameRate=Z.frameRate,O.mandatory.minFrameRate=Z.frameRate):(O.mandatory.maxFrameRate=Z.frameRate.max||Z.frameRate.ideal||Z.frameRate.exact||void 0,O.mandatory.minFrameRate=Z.frameRate.min||Z.frameRate.ideal||Z.frameRate.exact||void 0),O.frameRate=Z.frameRate),Z.width&&(O.width=Z.width),Z.height&&(O.height=Z.height)),O}(e);let h=null,p=null;const m=Rn();if(!m.supportShareAudio&&n==="enable"){const w=new Re(X.NOT_SUPPORTED,"your browser or platform is not support share-screen with audio");return l.onError(w),w.throw(k)}k.info("start create screen video track with config",e,"withAudio",n,"trackId",a);const E=m.supportShareAudio&&n!=="disable";try{const w=await Ga({screen:u,screenAudio:E?i||!0:void 0},a);h=w.getVideoTracks()[0]||null,p=w.getAudioTracks()[0]||null}catch(w){throw l.onError(w),w}if(!h){const w=new Re(X.UNEXPECTED_ERROR,"can not find track in media stream");return l.onError(w),w.throw(k)}if(!p&&n==="enable"){h&&h.stop();const w=new Re(X.SHARE_AUDIO_NOT_ALLOWED);return l.onError(w),w.throw(k)}e.optimizationMode||(e.optimizationMode="detail"),e.optimizationMode&&(II(a,h,e,e.encoderConfig&&mI(e.encoderConfig)||void 0),e.encoderConfig&&typeof e.encoderConfig!="string"&&(e.encoderConfig.bitrateMin=e.encoderConfig.bitrateMax));const S=new sr(h,e.encoderConfig?mI(e.encoderConfig):{},e.scalabiltyMode?Z_(e.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},e.optimizationMode,a,[qn.SCREEN_TRACK]);if(!p)return l.onSuccess(S.getTrackId()),k.info("create screen video track success","video:",S.getTrackId()),S;const R=new Mr(p,void 0,Zn(8,"track-scr-a-"),!1);return l.onSuccess([S.getTrackId(),R.getTrackId()]),k.info("create screen video track success","video:",S.getTrackId(),"audio:",R.getTrackId()),[S,R]},createMicrophoneAndCameraTracks:async function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=Q("CAMERA_CAPTURE_CONFIG"),a=Zn(8,"track-mic-"),l=Zn(8,"track-cam-"),u=ct.reportApiInvoke(null,{id:"".concat(a,"-").concat(l),tag:gr.TRACER,name:Ur.CREATE_MIC_AND_CAM_TRACKS,options:[e,n,i]});i&&(n.encoderConfig=i);const h=rS(n),p=MV(e);let m=null,E=null;k.info("start create camera video track(".concat(l,") and microphone audio track(").concat(a,") with config, audio: ").concat(JSON.stringify(e),", video: ").concat(JSON.stringify(n)));try{const w=await Ga({audio:p,video:h},"".concat(a,"-").concat(l));m=w.getAudioTracks()[0],E=w.getVideoTracks()[0]}catch(w){throw u.onError(w),w}if(!m||!E){const w=new Re(X.UNEXPECTED_ERROR,"can not find tracks in media stream");return u.onError(w),w.throw(k)}if(n.optimizationMode&&II(l,E,n,Gs(n.encoderConfig)),Q("USE_STANDARD_BITRATE_DEFAULT")){const w=Gs(n.encoderConfig);n.encoderConfig=w,delete w.bitrateMax,delete w.bitrateMin}const S=new P0(m,e,p,a),R=new iS(E,n,h,n.scalabiltyMode?Z_(n.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},n.optimizationMode,l);return u.onSuccess([S.getTrackId(),R.getTrackId()]),k.info("create camera video track(".concat(l,") and microphone audio track(").concat(a,") success")),[S,R]},createMicrophoneAudioTrack:async function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=Zn(8,"track-mic-"),i=ct.reportApiInvoke(null,{id:n,tag:gr.TRACER,name:Ur.CREATE_MIC_AUDIO_TRACK,options:[e]}),a=MV(e);let l=null;k.info("start create microphone audio track with config",JSON.stringify(e),"trackId",n);try{l=(await Ga({audio:a},n)).getAudioTracks()[0]||null}catch(h){throw i.onError(h),h}if(!l){const h=new Re(X.UNEXPECTED_ERROR,"can not find track in media stream");return i.onError(h),h.throw(k)}const u=new P0(l,e,a,n);return i.onSuccess(u.getTrackId()),k.info("create microphone audio track success, trackId:",n),u},createCustomAudioTrack:function(e){const n=Zn(8,"track-cus-"),i=ct.reportApiInvoke(null,{id:n,tag:gr.TRACER,name:Ur.CREATE_CUSTOM_AUDIO_TRACK,options:[e]}),a=new Mr(e.mediaStreamTrack,e.encoderConfig?eS(e.encoderConfig):{},n,!1);return k.info("create custom audio track success with config",e,"trackId",a.getTrackId()),i.onSuccess(a.getTrackId()),a},createBufferSourceAudioTrack:async function(e){var n;const{cacheOnlineFile:i,encoderConfig:a}=e;let{source:l}=e;const u={source:l instanceof AudioBuffer?"AudioBuffer":l instanceof File?(n=File.name)!==null&&n!==void 0?n:"File":l,cacheOnlineFile:i,encoderConfig:a},h=Zn(8,"track-buf-"),p=ct.reportApiInvoke(null,{id:h,tag:gr.TRACER,name:Ur.CREATE_BUFFER_AUDIO_TRACK,options:[u]});if(Q("DISABLE_WEBAUDIO"))throw new Re(X.NOT_SUPPORTED,"can not create BufferSourceAudioTrack when WebAudio disabled");k.info("start create buffer source audio track with config",JSON.stringify(u),"trackId",h);const m=l;if(!(l instanceof AudioBuffer))try{l=await async function(R,w){let O=null;if(typeof R=="string"){const B=C5.get(R);if(B)return k.debug("use cached audio resource: ",R),B;try{O=(await Ic(()=>Yo.get(R,{responseType:"arraybuffer"}),void 0,void 0,{maxRetryCount:3})).data}catch(j){throw new Re(X.FETCH_AUDIO_FILE_FAILED,j.toString())}}else O=await new et((j,q)=>{const Y=new FileReader;Y.onload=Z=>{Z.target?j(Z.target.result):q(new Re(X.READ_LOCAL_AUDIO_FILE_ERROR))},Y.onerror=()=>{q(new Re(X.READ_LOCAL_AUDIO_FILE_ERROR))},Y.readAsArrayBuffer(R)});const H=await function(B){const j=Zf();return new et((q,Y)=>{j.decodeAudioData(B,Z=>{q(Z)},Z=>{Y(new Re(X.DECODE_AUDIO_FILE_FAILED,Z.toString()))})})}(O);return typeof R=="string"&&w&&C5.set(R,H),H}(l,i)}catch(R){return p.onError(R),R.throw(k)}const E=new Efe(l),S=new vfe(m,E,a?eS(a):{},h);return k.info("create buffer source audio track success, trackId:",h),p.onSuccess(S.getTrackId()),S},setAppType:function(e){if(k.debug("setAppType: ".concat(e)),!(Number.isInteger(e)&&e>=0))throw k.debug("Invalid appType"),new Ce(X.INVALID_PARAMS,"invalid app type",e);zn("APP_TYPE",Math.floor(e))},setLogLevel:function(e){k.setLogLevel(e)},enableLogUpload:function(){Q("USE_NEW_LOG")?zn("UPLOAD_LOG",!0):k.enableLogUpload()},disableLogUpload:function(){Q("USE_NEW_LOG")?zn("UPLOAD_LOG",!1):k.disableLogUpload()},createChannelMediaRelayConfiguration:function(){return new R8},checkAudioTrackIsActive:async function(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5e3;const i=ct.reportApiInvoke(null,{tag:gr.TRACER,name:Ur.CHECK_AUDIO_TRACK_IS_ACTIVE,options:[n]});if(!(e instanceof Mr||e instanceof np)){const m=new Ce(X.INVALID_TRACK,"the parameter is not a audio track");return i.onError(m),m.throw()}n&&n<1e3&&(n=1e3);const a=e instanceof Mr?e.getTrackLabel():"remote_track",l=e.getVolumeLevel();let u=l,h=l;const p=Date.now();return new et(m=>{const E=setInterval(()=>{const S=e.getVolumeLevel();u=S>u?S:u,h=S<h?S:h;const R=u-h>1e-4,w=Date.now()-p;if(R||w>n){clearInterval(E);const O=R,H={duration:w,deviceLabel:a,maxVolumeLevel:u,result:O};k.info("[track-".concat(e.getTrackId(),"] check audio track active completed. ").concat(JSON.stringify(H))),i.onSuccess(H),m(O)}},200)})},checkVideoTrackIsActive:async function(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5e3;const i=ct.reportApiInvoke(null,{tag:gr.TRACER,name:Ur.CHECK_VIDEO_TRACK_IS_ACTIVE,options:[n]});if(!(e instanceof sr||e instanceof tp)){const R=new Ce(X.INVALID_TRACK,"the parameter is not a video track");return i.onError(R),R.throw()}n&&n<1e3&&(n=1e3);const a=e instanceof sr?e.getTrackLabel():"remote_track",l=e.getMediaStreamTrack(!0),u=document.createElement("video");u.style.width="1px",u.style.height="1px",u.setAttribute("muted",""),u.muted=!0,u.setAttribute("playsinline",""),u.controls=!1,($i()||$_())&&(u.style.opacity="0.01",u.style.position="fixed",u.style.left="0",u.style.top="0",document.body.appendChild(u)),u.srcObject=new MediaStream([l]),u.play();const h=document.createElement("canvas");h.width=160,h.height=120;let p=0,m=0;try{const R=Date.now();p=await function(w,O,H,B){let j,q=0,Y=null;return new et((Z,pe)=>{function he(){q>B&&j&&(j(),Z(q));const re=H.getContext("2d");if(!re){const Ne=new Ce(X.UNEXPECTED_ERROR,"can not get canvas 2d context.");return k.error(Ne.toString()),void pe(Ne)}re.drawImage(w,0,0,160,120);const Se=re.getImageData(0,0,H.width,H.height),Ae=Math.floor(Se.data.length/3);if(Y){for(let Ne=0;Ne<Ae;Ne+=3)if(Se.data[Ne]!==Y[Ne])return q+=1,void(Y=Se.data);Y=Se.data}else Y=Se.data}setTimeout(()=>{j&&(j(),Z(q))},O),j=SI(()=>{he()},30)})}(u,n,h,4),m=Date.now()-R}catch(R){throw i.onError(R),R}Fpe===An.SAFARI&&(u.pause(),u.remove()),u.srcObject=null;const E=p>4,S={duration:m,changedPicNum:p,deviceLabel:a,result:E};return k.info("[track-".concat(e.getTrackId(),"] check video track active completed. ").concat(JSON.stringify(S))),i.onSuccess(S),E},setArea:tA,audioElementPlayCenter:qo,resumeAudioContext:function(){qo.autoResumeAfterInterruption(!0)},processExternalMediaAEC:function(e){Zpe.processExternalMediaAEC(e)},registerExtensions:function(e){const n=Q("PLUGIN_INFO")||[];e.forEach(i=>{"name"in i&&!Ge(n).call(n,i.name)&&n.push(i.name);const a=i;a.__registered__=!0,a.logger.hookLog=k.extLog,a.reporter.hookApiInvoke=ct.extApiInvoke,a.parameters&&Object.keys(a.parameters).forEach(l=>{a.parameters[l]=Q(l)})}),wH("PLUGIN_INFO",n)},ChannelMediaRelayError:op,ChannelMediaRelayEvent:Yl,ChannelMediaRelayState:la,RemoteStreamFallbackType:ufe,RemoteStreamType:lfe,ConnectionDisconnectedReason:Fn,AudienceLatencyLevelType:Vhe,AREAS:Dn,preload:async function(e,n,i,a){return q8(e,n,i,a)}});return Object.defineProperties(ti,{onAudioAutoplayFailed:{get:()=>Ya.onAudioAutoplayFailed,set:e=>{Ya.onAudioAutoplayFailed=e}},onAutoplayFailed:{get:()=>Ya.onAutoplayFailed,set:e=>{Ya.onAutoplayFailed=e}},_onSecurityPolicyViolation:{value:void 0,writable:!0},_cspEventHandlerPointer:{value:void 0,writable:!0},onSecurityPolicyViolation:{get:()=>ti._onSecurityPolicyViolation,set(e){ti._onSecurityPolicyViolation=e,a$(e)}},__CLIENT_LIST__:{get:()=>Q("SHOW_GLOBAL_CLIENT_LIST")?ah:[]}}),Ka.on(nh.CAMERA_DEVICE_CHANGED,e=>{k.info("camera device changed",JSON.stringify(e)),ti.onCameraChanged&&ti.onCameraChanged(e),ti.safeEmit(gl.CAMERA_CHANGED,e)}),Ka.on(nh.RECORDING_DEVICE_CHANGED,e=>{k.info("microphone device changed",JSON.stringify(e)),ti.onMicrophoneChanged&&ti.onMicrophoneChanged(e),ti.safeEmit(gl.MICROPHONE_CHANGED,e)}),Ka.on(nh.PLAYOUT_DEVICE_CHANGED,e=>{k.debug("playout device changed",JSON.stringify(e)),ti.onPlaybackDeviceChanged&&ti.onPlaybackDeviceChanged(e),ti.safeEmit(gl.PLAYBACK_DEVICE_CHANGED,e)}),qo.onAutoplayFailed=()=>{k.info("detect audio element autoplay failed"),Ya.onAudioAutoplayFailed&&Ya.onAudioAutoplayFailed()},Wn.on("autoplay-failed",()=>{k.info("detect webaudio autoplay failed"),Ya.onAudioAutoplayFailed&&Ya.onAudioAutoplayFailed(),ti.safeEmit(gl.AUTOPLAY_FAILED)}),Wn.on(Li.STATE_CHANGE,(e,n)=>{k.info("audio context state changed: ".concat(n," => ").concat(e)),ti.onAudioContextStateChanged&&ti.onAudioContextStateChanged(e,n),ti.safeEmit(gl.AUDIO_CONTEXT_STATE_CHANGED,e,n)}),Gr.on(jf.NETWORK_STATE_CHANGE,(e,n)=>{k.info("[network-indicator] network state changed, ".concat(n," => ").concat(e))}),window&&(window.__ARTC__=ti),ti})})(ZG);var pge=ZG.exports;const lu=Od(pge);function Ea(t,r,o){return t.on(r,o),()=>t.off(r,o)}function mge(t){try{return t()}catch(r){console.error(r)}}function Yh(t){return()=>t.forEach(mge)}function bD(t,r){const o=setTimeout(t,r);return()=>clearTimeout(o)}function TD(){let t,r,o;function s(){if(r){const _=r;r=void 0,_()}}async function c(){if(o){const _=o;o=void 0;try{await _()}catch(C){console.error(C)}}}async function d(_){t=!0,await c();try{o=await _()}catch(C){console.error(C)}t=!1,s()}async function f(){t=!0,await c(),t=!1,s()}function v(_){t?r=()=>d(_):d(_)}function g(){t?r=f:f()}return{run:v,dispose:g}}const bb=typeof document<"u"?y.useLayoutEffect:y.useEffect;function gge(t){return t!=null&&typeof t.then=="function"}function xd(){const t=y.useRef(!1);return y.useEffect(()=>(t.current=!1,()=>{t.current=!0}),[]),t}function vge(){const t=xd();function r(o,s){return new Promise(async(c,d)=>{try{const f=await o;t.current||c(f)}catch(f){t.current?s&&s(f):d(f)}})}return y.useCallback(r,[t])}function Tb(t){const r=vge(),[o,s]=y.useState();return bb(()=>{gge(t)?r(t).then(s):s(t)},[t,r]),o}function qh(t,r){const o=y.useRef();y.useEffect(()=>{const{run:s,dispose:c}=o.current||(o.current=TD());return s(t),c},r)}function Ege(t,r){const o=t.split("."),s=r.split("."),c=Math.max(o.length,s.length);for(let d=0;d<c;d++){const f=parseInt(o[d]||"0"),v=parseInt(s[d]||"0");if(f>v)return 1;if(f<v)return-1}return 0}function _ge(t,r,o){const s=y.useRef(o);bb(()=>{s.current=o},[o]),y.useEffect(()=>{if(t)return Ea(t,r,(...c)=>{s.current&&s.current(...c)})},[r,t])}function nK(t,r,o){const s=y.useRef(o);bb(()=>{s.current=o},[o]),y.useEffect(()=>{if(t)return Ea(t,r,(...c)=>{s.current&&s.current(...c)})},[r,t])}const rK=y.createContext(null);function iK({client:t,children:r}){return fe.jsx(rK.Provider,{value:t,children:r})}function Sge(t){const r=y.useContext(rK);return t||r}function Os(t){const r=Sge(t);if(!r)throw new Error("Agora RTC client not found. Should be wrapped in <AgoraRTCProvider value={client} />");return r}const yge=y.createContext(null);function Cge({client:t,children:r}){return fe.jsx(yge.Provider,{value:t,children:r})}function bge(t){const r=Os(t),[o,s]=y.useState(r?r.connectionState:"DISCONNECTED");return y.useEffect(()=>{if(r){s(r.connectionState);let c;return Yh([Ea(r,"connection-state-change",d=>{c==null||c(),d==="CONNECTED"?c=bD(()=>s(d),0):s(d)}),()=>c==null?void 0:c()])}else s("DISCONNECTED")},[r]),o}function gu(t){const r=Os(t),[o,s]=y.useState(r?r.connectionState==="CONNECTED":!1);return y.useEffect(()=>{if(r){s(r.connectionState==="CONNECTED");let c;return Yh([Ea(r,"connection-state-change",d=>{c==null||c(),c=bD(()=>s(d==="CONNECTED"),0)}),()=>c==null?void 0:c()])}else s(!1)},[r]),o}function Rb(t){const r=Os(t),[o,s]=y.useState(r==null?void 0:r.uid);return y.useEffect(()=>{if(r)return Ea(r,"connection-state-change",c=>{if(c==="CONNECTED")return bD(()=>s(r.uid),0);c==="DISCONNECTED"&&s(void 0)})},[r]),o}class es extends Error{constructor(o,s){var r=(...args)=>{super(...args);uy(this,"rtcMethod");uy(this,"rtcError");uy(this,"name","AgoraRTCReactException")};r(typeof s=="string"?s:s.message),this.rtcMethod=o,this.rtcError=s}log(o){console[o](this)}}function ro(t,r=!0,o){const s=Os(o),c=gu(o),d=y.useRef(),[f,v]=y.useState(!1),[g,_]=y.useState(0),[C,b]=y.useState(null),T=xd();return qh(async()=>{if(T.current||(b(null),_(0),v(!1)),r&&s){try{T.current||v(!0);const{appid:I,channel:N,token:P,uid:D}=typeof t=="function"?await t():t,x=await s.join(I,N,P,D);T.current||_(x)}catch(I){console.error(I),T.current||b(new es("IAgoraRTCClient.join",I))}T.current||v(!1);const A=d.current||(d.current=TD());return Yh([()=>{A.dispose()},()=>{A.run(()=>s.unpublish(s.localTracks))},()=>{for(const I of s.localTracks)I.isPlaying&&I.stop(),I.close();A.run(()=>s.leave())}])}},[r,o]),{data:g,isLoading:f,isConnected:c,error:C}}const xH=()=>({uplinkNetworkQuality:0,downlinkNetworkQuality:0,delay:0});function Tge(t){const r=Os(t),[o,s]=y.useState(xH);return y.useEffect(()=>{if(r)return Ea(r,"network-quality",c=>s({uplinkNetworkQuality:c.uplinkNetworkQuality,downlinkNetworkQuality:c.downlinkNetworkQuality,delay:r.getRTCStats().RTT??0}));s(xH())},[r]),o}function Nd(t,r=!0,o){const s=Os(o),c=gu(o),d=y.useRef([]),[f,v]=y.useState(!1),[g,_]=y.useState(null),C=xd();return qh(async()=>{if(C.current||(v(!1),_(null)),!s||!c||!r)return;const b=t.filter(Boolean),T=N=>{const P=Ege(lu.VERSION,"4.18.2")>=0;return P||new es("usePublish","please check your agora-rtc-sdk-ng version in package.json, it's recommend upgrade to >= 4.18.2").log("warn"),P?s.mode!=="live"||s.role!=="audience":!0},A=N=>d.current.some(P=>P&&P.getTrackId()===N.getTrackId()),I=N=>T()&&N.enabled&&r&&!A(N);for(let N=0;N<b.length;N++){const P=b[N];if(P&&I(P)){await s.unpublish(d.current.filter(D=>(D==null?void 0:D.trackMediaType)===P.trackMediaType));try{C.current||v(!0),await s.publish(P)}catch(D){console.error(D),C.current||_(new es("IAgoraRTCClient.publish",D))}C.current||v(!1)}}d.current=b},[c,r,s,t]),{isLoading:f,error:g}}function Cm(t=!0,r={ANS:!0,AEC:!0}){const[o,s]=y.useState(null),[c,d]=y.useState(!1),[f,v]=y.useState(null),g=xd();return qh(async()=>{if(g.current||(d(!1),v(null)),t&&!o){try{g.current||d(!0);const _=await lu.createMicrophoneAudioTrack(r);g.current||s(_)}catch(_){console.error(_),g.current||v(new es("IAgoraRTC.createMicrophoneAudioTrack",_))}g.current||d(!1)}},[t]),{localMicrophoneTrack:o,isLoading:c,error:f}}function bm(t=!0,r){const[o,s]=y.useState(null),[c,d]=y.useState(!1),[f,v]=y.useState(null),g=xd();return qh(async()=>{if(g.current||(d(!1),v(null)),t&&!o){try{g.current||d(!0);const _=await lu.createCameraVideoTrack(r);g.current||s(_)}catch(_){console.error(_),g.current||v(new es("IAgoraRTC.createCameraVideoTrack",_))}g.current||d(!1)}},[t]),{localCameraTrack:o,isLoading:c,error:f}}function Tm(t,r){const o=Os(r),[s,c]=y.useState([]),d=gu(),f=y.useRef([]),[v,g]=y.useState(!1),[_,C]=y.useState(null),b=xd();return qh(async()=>{if(b.current||C(null),!Array.isArray(t)||!d)return;const T=async N=>{if(!N.audioTrack&&t.some(({uid:P})=>N.uid===P)){try{b.current||g(!0),await o.subscribe(N,"audio")}catch(P){console.error(P),b.current||C(new es("IAgoraRTCClient.subscribe",P))}N.audioTrack&&!f.current.some(P=>P.getUserId()===N.uid)&&f.current.push(N.audioTrack),f.current=f.current.map(P=>N.audioTrack&&P.getUserId()===N.uid&&P.getTrackId()!==N.audioTrack.getTrackId()?N.audioTrack:P),b.current||(c([...f.current]),g(!1))}},A=async N=>{if(t.some(({uid:P})=>N.uid===P)){b.current||(f.current=f.current.filter(P=>P.getUserId()!==N.uid),c([...f.current]));try{b.current||g(!0),await o.unsubscribe(N,"audio")}catch(P){console.error(P),b.current||C(new es("IAgoraRTCClient.unsubscribe",P))}b.current||g(!1)}};t.map(N=>{!N.audioTrack&&N.hasAudio&&T(N)});const I=[];for(let N=0;N<f.current.length;N++){const P=f.current[N];if(!t.some(D=>D.uid===P.getUserId())){const D=o.remoteUsers.find(x=>x.uid===P.getUserId());D&&I.push({user:D,mediaType:"audio"}),f.current.splice(N,1),N--}}if(I.length>0){try{b.current||g(!0),await o.massUnsubscribe(I)}catch(N){console.error(N),b.current||C(new es("IAgoraRTCClient.massUnsubscribe",N))}b.current||(c(f.current.slice()),g(!1))}return Yh([Ea(o,"user-published",(N,P)=>{t.find(D=>D.uid===N.uid)&&P==="audio"&&T(N)}),Ea(o,"user-unpublished",(N,P)=>{t.find(D=>D.uid===N.uid)&&P==="audio"&&A(N)})])},[d,o,t]),{audioTracks:s,isLoading:v,error:_}}function Rm(t,r){const o=Os(r),[s,c]=y.useState([]),d=gu(),f=y.useRef([]),[v,g]=y.useState(!1),[_,C]=y.useState(null),b=xd();return qh(async()=>{if(b.current||C(null),!Array.isArray(t)||!d)return;const T=async N=>{if(!N.videoTrack&&t.some(({uid:P})=>N.uid===P)){try{b.current||g(!0),await o.subscribe(N,"video")}catch(P){console.error(P),b.current||C(new es("IAgoraRTCClient.subscribe",P))}N.videoTrack&&!f.current.some(P=>P.getUserId()===N.uid)&&f.current.push(N.videoTrack),f.current=f.current.map(P=>N.videoTrack&&P.getUserId()===N.uid&&P.getTrackId()!==N.videoTrack.getTrackId()?N.videoTrack:P),b.current||(c([...f.current]),g(!1))}},A=async N=>{if(t.some(({uid:P})=>N.uid===P)){b.current||(f.current=f.current.filter(P=>P.getUserId()!==N.uid),c([...f.current]));try{b.current||g(!0),await o.unsubscribe(N,"video")}catch(P){console.error(P),b.current||C(new es("IAgoraRTCClient.unsubscribe",P))}b.current||g(!1)}};t.map(N=>{!N.videoTrack&&N.hasVideo&&T(N)});const I=[];for(let N=0;N<f.current.length;N++){const P=f.current[N];if(!t.some(D=>D.uid===P.getUserId())){const D=o.remoteUsers.find(x=>x.uid===P.getUserId());D&&I.push({user:D,mediaType:"video"}),f.current.splice(N,1),N--}}if(I.length>0){try{b.current||g(!0),await o.massUnsubscribe(I)}catch(N){console.error(N),b.current||C(new es("IAgoraRTCClient.massUnsubscribe",N))}b.current||(c(f.current.slice()),g(!1))}return Yh([Ea(o,"user-published",(N,P)=>{t.find(D=>D.uid===N.uid)&&P==="video"&&T(N)}),Ea(o,"user-unpublished",(N,P)=>{t.find(D=>D.uid===N.uid)&&P==="video"&&A(N)})])},[d,o,t]),{videoTracks:s,isLoading:v,error:_}}function NH(t,r,o){const s=Os(o),c=r==="audio"?"audioTrack":"videoTrack",[d,f]=y.useState(t&&t[c]),v=gu(),g=y.useRef(),[_,C]=y.useState(!1),[b,T]=y.useState(null);return y.useEffect(()=>{if(!t||!v)return;let A=!1;A||T(null);const I=r==="audio"?"hasAudio":"hasVideo",N=t.uid,P=async(L,M)=>{if(L[c]&&s.remoteUsers.some(({uid:F})=>L.uid===F))try{A||C(!0),await s.unsubscribe(L,M)}catch(F){A||T(new es("IAgoraRTCClient.unsubscribe",F)),console.error(F)}A||(f(void 0),C(!1))},D=async(L,M)=>{try{!L[c]&&s.remoteUsers.some(({uid:F})=>L.uid===F)&&(A||C(!0),await s.subscribe(L,M)),A||f(L[c])}catch(F){A||T(new es("IAgoraRTCClient.subscribe",F)),console.error(F)}A||C(!1)},x=g.current||(g.current=TD());return!t[c]&&t[I]?x.run(()=>D(t,r)):f(t[c]),Yh([()=>{A=!0,x.dispose()},Ea(s,"user-published",(L,M)=>{L.uid===N&&M===r&&x.run(()=>D(L,r))}),Ea(s,"user-unpublished",(L,M)=>{L.uid===N&&M===r&&x.run(()=>P(L,r))})])},[v,s,t,r,c]),{track:d,isLoading:_,error:b}}function tl(t){const r=Os(t),[o,s]=y.useState(r?r.remoteUsers:[]);return y.useEffect(()=>{if(r){const c=()=>s(r.remoteUsers.slice());return Yh([Ea(r,"user-joined",c),Ea(r,"user-left",c),Ea(r,"user-published",c),Ea(r,"user-unpublished",c)])}},[r]),o}function oK(t=!0,r,o){const[s,c]=y.useState(null),[d,f]=y.useState(!1),[v,g]=y.useState(null),_=xd();return qh(async()=>{if(_.current||(f(!1),g(null)),t&&!s){try{_.current||f(!0);const C=await lu.createScreenVideoTrack(r,o);_.current||c(C)}catch(C){console.error(C),_.current||g(new es("IAgoraRTC.createScreenVideoTrack",C))}_.current||f(!1)}},[t]),{screenTrack:s,isLoading:d,error:v}}const aK=y.createContext(void 0);function RD(t,r,o,s){const c=y.useContext(aK);y.useEffect(()=>{if(t)return s&&r?t.play(s,o||void 0):t.stop(),c?(c.onMount(t),()=>c.onUnmount(t)):()=>{t.isPlaying&&t.stop()}},[t,s,r,c,o])}function wD(t,r){const o=y.useContext(aK);bb(()=>{if(t)return r?t.play():t.stop(),o?(o.onMount(t),()=>o.onUnmount(t)):()=>{t.isPlaying&&t.stop()}},[t,r,o])}function wb({track:t,play:r=!1,volume:o,disabled:s,muted:c,children:d}){const f=Tb(t);return wD(f,r),y.useEffect(()=>{f&&o!=null&&f.setVolume(o)},[f,o]),y.useEffect(()=>{f&&s!=null&&f.setEnabled(!s).catch(console.warn)},[s,f]),y.useEffect(()=>{f&&c!=null&&f.setMuted(c).catch(console.warn)},[c,f]),d?fe.jsx(fe.Fragment,{children:d}):null}const Ib={position:"relative",width:"100%",height:"100%",overflow:"hidden",background:"#000"},sK={width:"100%",height:"100%"},$v={position:"absolute",top:0,left:0,width:"100%",height:"100%",overflow:"hidden",zIndex:2},wm=(t,r)=>y.useMemo(()=>({...t,...r}),[t,r]);function Hv({track:t,play:r,disabled:o,muted:s,style:c,videoPlayerConfig:d,...f}){const v=wm(sK,c),[g,_]=y.useState(null),C=Tb(t);return RD(C,r,d,g),y.useEffect(()=>{C&&o!=null&&C.setEnabled(!o).catch(console.warn)},[o,C]),y.useEffect(()=>{C&&s!=null&&C.setMuted(s).catch(console.warn)},[s,C]),fe.jsx("div",{...f,ref:_,style:v})}const Rge={width:"100%",height:"100%",background:"#1a1e21 center/cover no-repeat",filter:"blur(16px) brightness(0.4)"},wge={position:"absolute",top:"50%",left:"50%",maxWidth:"50%",maxHeight:"50%",aspectRatio:"1",transform:"translate(-50%, -50%)",borderRadius:"50%",overflow:"hidden",objectFit:"cover"};function Ab({cover:t}){return fe.jsx("div",{style:$v,children:typeof t=="string"?fe.jsxs(fe.Fragment,{children:[fe.jsx("div",{style:{...Rge,backgroundImage:`url(${t})`}}),fe.jsx("img",{src:t,style:wge})]}):t()})}function cK({micOn:t,cameraOn:r,audioTrack:o,videoTrack:s,playAudio:c,playVideo:d,volume:f,cover:v,children:g,style:_,...C}){const b=wm(Ib,_);return d=d??!!r,c=c??!!t,fe.jsxs("div",{...C,style:b,children:[fe.jsx(Hv,{disabled:!r,play:d,track:s}),fe.jsx(wb,{disabled:!t,play:c,track:o,volume:f}),v&&!r&&fe.jsx(Ab,{cover:v}),fe.jsx("div",{style:$v,children:g})]})}function lK({track:t,play:r=!1,playbackDeviceId:o,volume:s,children:c}){return wD(t,r),y.useEffect(()=>{t&&o!=null&&t.setPlaybackDevice(o).catch(console.warn)},[t,o]),y.useEffect(()=>{t&&s!=null&&t.setVolume(s)},[t,s]),c?fe.jsx(fe.Fragment,{children:c}):null}function ID({track:t,play:r,style:o,videoPlayerConfig:s,...c}){const d=wm(sK,o),[f,v]=y.useState(null);return RD(t,r,s,f),fe.jsx("div",{...c,ref:v,style:d})}function AD({user:t,playVideo:r,playAudio:o,playbackDeviceId:s,volume:c,cover:d,style:f,children:v,videoPlayerConfig:g,..._}){const C=wm(Ib,f),{track:b}=NH(t,"video"),{track:T}=NH(t,"audio");return r=r??(t==null?void 0:t.hasVideo),o=o??(t==null?void 0:t.hasAudio),fe.jsxs("div",{..._,style:C,children:[fe.jsx(ID,{play:r,track:b,videoPlayerConfig:g}),fe.jsx(lK,{play:o,playbackDeviceId:s,track:T,volume:c}),d&&!r&&fe.jsx(Ab,{cover:d}),fe.jsx("div",{style:$v,children:v})]})}var lN={},uK={exports:{}},xs={},dK={exports:{}},hK={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function r(ie,ve){var me=ie.length;ie.push(ve);e:for(;0<me;){var le=me-1>>>1,de=ie[le];if(0<c(de,ve))ie[le]=ve,ie[me]=de,me=le;else break e}}function o(ie){return ie.length===0?null:ie[0]}function s(ie){if(ie.length===0)return null;var ve=ie[0],me=ie.pop();if(me!==ve){ie[0]=me;e:for(var le=0,de=ie.length,Ee=de>>>1;le<Ee;){var se=2*(le+1)-1,Te=ie[se],we=se+1,Le=ie[we];if(0>c(Te,me))we<de&&0>c(Le,Te)?(ie[le]=Le,ie[we]=me,le=we):(ie[le]=Te,ie[se]=me,le=se);else if(we<de&&0>c(Le,me))ie[le]=Le,ie[we]=me,le=we;else break e}}return ve}function c(ie,ve){var me=ie.sortIndex-ve.sortIndex;return me!==0?me:ie.id-ve.id}if(typeof performance=="object"&&typeof performance.now=="function"){var d=performance;t.unstable_now=function(){return d.now()}}else{var f=Date,v=f.now();t.unstable_now=function(){return f.now()-v}}var g=[],_=[],C=1,b=null,T=3,A=!1,I=!1,N=!1,P=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function L(ie){for(var ve=o(_);ve!==null;){if(ve.callback===null)s(_);else if(ve.startTime<=ie)s(_),ve.sortIndex=ve.expirationTime,r(g,ve);else break;ve=o(_)}}function M(ie){if(N=!1,L(ie),!I)if(o(g)!==null)I=!0,oe(F);else{var ve=o(_);ve!==null&&ae(M,ve.startTime-ie)}}function F(ie,ve){I=!1,N&&(N=!1,D(z),z=-1),A=!0;var me=T;try{for(L(ve),b=o(g);b!==null&&(!(b.expirationTime>ve)||ie&&!J());){var le=b.callback;if(typeof le=="function"){b.callback=null,T=b.priorityLevel;var de=le(b.expirationTime<=ve);ve=t.unstable_now(),typeof de=="function"?b.callback=de:b===o(g)&&s(g),L(ve)}else s(g);b=o(g)}if(b!==null)var Ee=!0;else{var se=o(_);se!==null&&ae(M,se.startTime-ve),Ee=!1}return Ee}finally{b=null,T=me,A=!1}}var V=!1,$=null,z=-1,K=5,G=-1;function J(){return!(t.unstable_now()-G<K)}function ne(){if($!==null){var ie=t.unstable_now();G=ie;var ve=!0;try{ve=$(!0,ie)}finally{ve?te():(V=!1,$=null)}}else V=!1}var te;if(typeof x=="function")te=function(){x(ne)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,ge=ce.port2;ce.port1.onmessage=ne,te=function(){ge.postMessage(null)}}else te=function(){P(ne,0)};function oe(ie){$=ie,V||(V=!0,te())}function ae(ie,ve){z=P(function(){ie(t.unstable_now())},ve)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ie){ie.callback=null},t.unstable_continueExecution=function(){I||A||(I=!0,oe(F))},t.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):K=0<ie?Math.floor(1e3/ie):5},t.unstable_getCurrentPriorityLevel=function(){return T},t.unstable_getFirstCallbackNode=function(){return o(g)},t.unstable_next=function(ie){switch(T){case 1:case 2:case 3:var ve=3;break;default:ve=T}var me=T;T=ve;try{return ie()}finally{T=me}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(ie,ve){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var me=T;T=ie;try{return ve()}finally{T=me}},t.unstable_scheduleCallback=function(ie,ve,me){var le=t.unstable_now();switch(typeof me=="object"&&me!==null?(me=me.delay,me=typeof me=="number"&&0<me?le+me:le):me=le,ie){case 1:var de=-1;break;case 2:de=250;break;case 5:de=1073741823;break;case 4:de=1e4;break;default:de=5e3}return de=me+de,ie={id:C++,callback:ve,priorityLevel:ie,startTime:me,expirationTime:de,sortIndex:-1},me>le?(ie.sortIndex=me,r(_,ie),o(g)===null&&ie===o(_)&&(N?(D(z),z=-1):N=!0,ae(M,me-le))):(ie.sortIndex=de,r(g,ie),I||A||(I=!0,oe(F))),ie},t.unstable_shouldYield=J,t.unstable_wrapCallback=function(ie){var ve=T;return function(){var me=T;T=ve;try{return ie.apply(this,arguments)}finally{T=me}}}})(hK);dK.exports=hK;var Ige=dK.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Age=y,Is=Ige;function yt(t){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+t,o=1;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var fK=new Set,iv={};function Xh(t,r){sm(t,r),sm(t+"Capture",r)}function sm(t,r){for(iv[t]=r,t=0;t<r.length;t++)fK.add(r[t])}var uu=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),uN=Object.prototype.hasOwnProperty,Oge=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,PH={},DH={};function xge(t){return uN.call(DH,t)?!0:uN.call(PH,t)?!1:Oge.test(t)?DH[t]=!0:(PH[t]=!0,!1)}function Nge(t,r,o,s){if(o!==null&&o.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return s?!1:o!==null?!o.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Pge(t,r,o,s){if(r===null||typeof r>"u"||Nge(t,r,o,s))return!0;if(s)return!1;if(o!==null)switch(o.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function Da(t,r,o,s,c,d,f){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=s,this.attributeNamespace=c,this.mustUseProperty=o,this.propertyName=t,this.type=r,this.sanitizeURL=d,this.removeEmptyString=f}var ra={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ra[t]=new Da(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var r=t[0];ra[r]=new Da(r,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ra[t]=new Da(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ra[t]=new Da(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ra[t]=new Da(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ra[t]=new Da(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ra[t]=new Da(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ra[t]=new Da(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ra[t]=new Da(t,5,!1,t.toLowerCase(),null,!1,!1)});var OD=/[\-:]([a-z])/g;function xD(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var r=t.replace(OD,xD);ra[r]=new Da(r,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var r=t.replace(OD,xD);ra[r]=new Da(r,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var r=t.replace(OD,xD);ra[r]=new Da(r,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ra[t]=new Da(t,1,!1,t.toLowerCase(),null,!1,!1)});ra.xlinkHref=new Da("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ra[t]=new Da(t,1,!1,t.toLowerCase(),null,!0,!0)});function ND(t,r,o,s){var c=ra.hasOwnProperty(r)?ra[r]:null;(c!==null?c.type!==0:s||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(Pge(r,o,c,s)&&(o=null),s||c===null?xge(r)&&(o===null?t.removeAttribute(r):t.setAttribute(r,""+o)):c.mustUseProperty?t[c.propertyName]=o===null?c.type===3?!1:"":o:(r=c.attributeName,s=c.attributeNamespace,o===null?t.removeAttribute(r):(c=c.type,o=c===3||c===4&&o===!0?"":""+o,s?t.setAttributeNS(s,r,o):t.setAttribute(r,o))))}var vu=Age.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,hy=Symbol.for("react.element"),Fp=Symbol.for("react.portal"),Up=Symbol.for("react.fragment"),PD=Symbol.for("react.strict_mode"),dN=Symbol.for("react.profiler"),pK=Symbol.for("react.provider"),mK=Symbol.for("react.context"),DD=Symbol.for("react.forward_ref"),hN=Symbol.for("react.suspense"),fN=Symbol.for("react.suspense_list"),LD=Symbol.for("react.memo"),ld=Symbol.for("react.lazy"),gK=Symbol.for("react.offscreen"),LH=Symbol.iterator;function mg(t){return t===null||typeof t!="object"?null:(t=LH&&t[LH]||t["@@iterator"],typeof t=="function"?t:null)}var Ui=Object.assign,nO;function Mg(t){if(nO===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);nO=r&&r[1]||""}return`
`+nO+t}var rO=!1;function iO(t,r){if(!t||rO)return"";rO=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(_){var s=_}Reflect.construct(t,[],r)}else{try{r.call()}catch(_){s=_}t.call(r.prototype)}else{try{throw Error()}catch(_){s=_}t()}}catch(_){if(_&&s&&typeof _.stack=="string"){for(var c=_.stack.split(`
`),d=s.stack.split(`
`),f=c.length-1,v=d.length-1;1<=f&&0<=v&&c[f]!==d[v];)v--;for(;1<=f&&0<=v;f--,v--)if(c[f]!==d[v]){if(f!==1||v!==1)do if(f--,v--,0>v||c[f]!==d[v]){var g=`
`+c[f].replace(" at new "," at ");return t.displayName&&g.includes("<anonymous>")&&(g=g.replace("<anonymous>",t.displayName)),g}while(1<=f&&0<=v);break}}}finally{rO=!1,Error.prepareStackTrace=o}return(t=t?t.displayName||t.name:"")?Mg(t):""}function Dge(t){switch(t.tag){case 5:return Mg(t.type);case 16:return Mg("Lazy");case 13:return Mg("Suspense");case 19:return Mg("SuspenseList");case 0:case 2:case 15:return t=iO(t.type,!1),t;case 11:return t=iO(t.type.render,!1),t;case 1:return t=iO(t.type,!0),t;default:return""}}function pN(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Up:return"Fragment";case Fp:return"Portal";case dN:return"Profiler";case PD:return"StrictMode";case hN:return"Suspense";case fN:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case mK:return(t.displayName||"Context")+".Consumer";case pK:return(t._context.displayName||"Context")+".Provider";case DD:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case LD:return r=t.displayName||null,r!==null?r:pN(t.type)||"Memo";case ld:r=t._payload,t=t._init;try{return pN(t(r))}catch{}}return null}function Lge(t){var r=t.type;switch(t.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=r.render,t=t.displayName||t.name||"",r.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return pN(r);case 8:return r===PD?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function Id(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function vK(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function kge(t){var r=vK(t)?"checked":"value",o=Object.getOwnPropertyDescriptor(t.constructor.prototype,r),s=""+t[r];if(!t.hasOwnProperty(r)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var c=o.get,d=o.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return c.call(this)},set:function(f){s=""+f,d.call(this,f)}}),Object.defineProperty(t,r,{enumerable:o.enumerable}),{getValue:function(){return s},setValue:function(f){s=""+f},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function fy(t){t._valueTracker||(t._valueTracker=kge(t))}function EK(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var o=r.getValue(),s="";return t&&(s=vK(t)?t.checked?"true":"false":t.value),t=s,t!==o?(r.setValue(t),!0):!1}function bC(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function mN(t,r){var o=r.checked;return Ui({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??t._wrapperState.initialChecked})}function kH(t,r){var o=r.defaultValue==null?"":r.defaultValue,s=r.checked!=null?r.checked:r.defaultChecked;o=Id(r.value!=null?r.value:o),t._wrapperState={initialChecked:s,initialValue:o,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function _K(t,r){r=r.checked,r!=null&&ND(t,"checked",r,!1)}function gN(t,r){_K(t,r);var o=Id(r.value),s=r.type;if(o!=null)s==="number"?(o===0&&t.value===""||t.value!=o)&&(t.value=""+o):t.value!==""+o&&(t.value=""+o);else if(s==="submit"||s==="reset"){t.removeAttribute("value");return}r.hasOwnProperty("value")?vN(t,r.type,o):r.hasOwnProperty("defaultValue")&&vN(t,r.type,Id(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(t.defaultChecked=!!r.defaultChecked)}function MH(t,r,o){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var s=r.type;if(!(s!=="submit"&&s!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+t._wrapperState.initialValue,o||r===t.value||(t.value=r),t.defaultValue=r}o=t.name,o!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,o!==""&&(t.name=o)}function vN(t,r,o){(r!=="number"||bC(t.ownerDocument)!==t)&&(o==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+o&&(t.defaultValue=""+o))}var Fg=Array.isArray;function Qp(t,r,o,s){if(t=t.options,r){r={};for(var c=0;c<o.length;c++)r["$"+o[c]]=!0;for(o=0;o<t.length;o++)c=r.hasOwnProperty("$"+t[o].value),t[o].selected!==c&&(t[o].selected=c),c&&s&&(t[o].defaultSelected=!0)}else{for(o=""+Id(o),r=null,c=0;c<t.length;c++){if(t[c].value===o){t[c].selected=!0,s&&(t[c].defaultSelected=!0);return}r!==null||t[c].disabled||(r=t[c])}r!==null&&(r.selected=!0)}}function EN(t,r){if(r.dangerouslySetInnerHTML!=null)throw Error(yt(91));return Ui({},r,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function FH(t,r){var o=r.value;if(o==null){if(o=r.children,r=r.defaultValue,o!=null){if(r!=null)throw Error(yt(92));if(Fg(o)){if(1<o.length)throw Error(yt(93));o=o[0]}r=o}r==null&&(r=""),o=r}t._wrapperState={initialValue:Id(o)}}function SK(t,r){var o=Id(r.value),s=Id(r.defaultValue);o!=null&&(o=""+o,o!==t.value&&(t.value=o),r.defaultValue==null&&t.defaultValue!==o&&(t.defaultValue=o)),s!=null&&(t.defaultValue=""+s)}function UH(t){var r=t.textContent;r===t._wrapperState.initialValue&&r!==""&&r!==null&&(t.value=r)}function yK(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function _N(t,r){return t==null||t==="http://www.w3.org/1999/xhtml"?yK(r):t==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var py,CK=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,o,s,c){MSApp.execUnsafeLocalFunction(function(){return t(r,o,s,c)})}:t}(function(t,r){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=r;else{for(py=py||document.createElement("div"),py.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=py.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;r.firstChild;)t.appendChild(r.firstChild)}});function ov(t,r){if(r){var o=t.firstChild;if(o&&o===t.lastChild&&o.nodeType===3){o.nodeValue=r;return}}t.textContent=r}var Hg={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Mge=["Webkit","ms","Moz","O"];Object.keys(Hg).forEach(function(t){Mge.forEach(function(r){r=r+t.charAt(0).toUpperCase()+t.substring(1),Hg[r]=Hg[t]})});function bK(t,r,o){return r==null||typeof r=="boolean"||r===""?"":o||typeof r!="number"||r===0||Hg.hasOwnProperty(t)&&Hg[t]?(""+r).trim():r+"px"}function TK(t,r){t=t.style;for(var o in r)if(r.hasOwnProperty(o)){var s=o.indexOf("--")===0,c=bK(o,r[o],s);o==="float"&&(o="cssFloat"),s?t.setProperty(o,c):t[o]=c}}var Fge=Ui({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function SN(t,r){if(r){if(Fge[t]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(yt(137,t));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(yt(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(yt(61))}if(r.style!=null&&typeof r.style!="object")throw Error(yt(62))}}function yN(t,r){if(t.indexOf("-")===-1)return typeof r.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var CN=null;function kD(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var bN=null,Zp=null,em=null;function BH(t){if(t=Gv(t)){if(typeof bN!="function")throw Error(yt(280));var r=t.stateNode;r&&(r=Db(r),bN(t.stateNode,t.type,r))}}function RK(t){Zp?em?em.push(t):em=[t]:Zp=t}function wK(){if(Zp){var t=Zp,r=em;if(em=Zp=null,BH(t),r)for(t=0;t<r.length;t++)BH(r[t])}}function IK(t,r){return t(r)}function AK(){}var oO=!1;function OK(t,r,o){if(oO)return t(r,o);oO=!0;try{return IK(t,r,o)}finally{oO=!1,(Zp!==null||em!==null)&&(AK(),wK())}}function av(t,r){var o=t.stateNode;if(o===null)return null;var s=Db(o);if(s===null)return null;o=s[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break e;default:t=!1}if(t)return null;if(o&&typeof o!="function")throw Error(yt(231,r,typeof o));return o}var TN=!1;if(uu)try{var gg={};Object.defineProperty(gg,"passive",{get:function(){TN=!0}}),window.addEventListener("test",gg,gg),window.removeEventListener("test",gg,gg)}catch{TN=!1}function Uge(t,r,o,s,c,d,f,v,g){var _=Array.prototype.slice.call(arguments,3);try{r.apply(o,_)}catch(C){this.onError(C)}}var zg=!1,TC=null,RC=!1,RN=null,Bge={onError:function(t){zg=!0,TC=t}};function Vge(t,r,o,s,c,d,f,v,g){zg=!1,TC=null,Uge.apply(Bge,arguments)}function jge(t,r,o,s,c,d,f,v,g){if(Vge.apply(this,arguments),zg){if(zg){var _=TC;zg=!1,TC=null}else throw Error(yt(198));RC||(RC=!0,RN=_)}}function Jh(t){var r=t,o=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,r.flags&4098&&(o=r.return),t=r.return;while(t)}return r.tag===3?o:null}function xK(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function VH(t){if(Jh(t)!==t)throw Error(yt(188))}function $ge(t){var r=t.alternate;if(!r){if(r=Jh(t),r===null)throw Error(yt(188));return r!==t?null:t}for(var o=t,s=r;;){var c=o.return;if(c===null)break;var d=c.alternate;if(d===null){if(s=c.return,s!==null){o=s;continue}break}if(c.child===d.child){for(d=c.child;d;){if(d===o)return VH(c),t;if(d===s)return VH(c),r;d=d.sibling}throw Error(yt(188))}if(o.return!==s.return)o=c,s=d;else{for(var f=!1,v=c.child;v;){if(v===o){f=!0,o=c,s=d;break}if(v===s){f=!0,s=c,o=d;break}v=v.sibling}if(!f){for(v=d.child;v;){if(v===o){f=!0,o=d,s=c;break}if(v===s){f=!0,s=d,o=c;break}v=v.sibling}if(!f)throw Error(yt(189))}}if(o.alternate!==s)throw Error(yt(190))}if(o.tag!==3)throw Error(yt(188));return o.stateNode.current===o?t:r}function NK(t){return t=$ge(t),t!==null?PK(t):null}function PK(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var r=PK(t);if(r!==null)return r;t=t.sibling}return null}var DK=Is.unstable_scheduleCallback,jH=Is.unstable_cancelCallback,Hge=Is.unstable_shouldYield,zge=Is.unstable_requestPaint,no=Is.unstable_now,Wge=Is.unstable_getCurrentPriorityLevel,MD=Is.unstable_ImmediatePriority,LK=Is.unstable_UserBlockingPriority,wC=Is.unstable_NormalPriority,Gge=Is.unstable_LowPriority,kK=Is.unstable_IdlePriority,Ob=null,Pl=null;function Kge(t){if(Pl&&typeof Pl.onCommitFiberRoot=="function")try{Pl.onCommitFiberRoot(Ob,t,void 0,(t.current.flags&128)===128)}catch{}}var Gc=Math.clz32?Math.clz32:Xge,Yge=Math.log,qge=Math.LN2;function Xge(t){return t>>>=0,t===0?32:31-(Yge(t)/qge|0)|0}var my=64,gy=4194304;function Ug(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function IC(t,r){var o=t.pendingLanes;if(o===0)return 0;var s=0,c=t.suspendedLanes,d=t.pingedLanes,f=o&268435455;if(f!==0){var v=f&~c;v!==0?s=Ug(v):(d&=f,d!==0&&(s=Ug(d)))}else f=o&~c,f!==0?s=Ug(f):d!==0&&(s=Ug(d));if(s===0)return 0;if(r!==0&&r!==s&&!(r&c)&&(c=s&-s,d=r&-r,c>=d||c===16&&(d&4194240)!==0))return r;if(s&4&&(s|=o&16),r=t.entangledLanes,r!==0)for(t=t.entanglements,r&=s;0<r;)o=31-Gc(r),c=1<<o,s|=t[o],r&=~c;return s}function Jge(t,r){switch(t){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Qge(t,r){for(var o=t.suspendedLanes,s=t.pingedLanes,c=t.expirationTimes,d=t.pendingLanes;0<d;){var f=31-Gc(d),v=1<<f,g=c[f];g===-1?(!(v&o)||v&s)&&(c[f]=Jge(v,r)):g<=r&&(t.expiredLanes|=v),d&=~v}}function wN(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function MK(){var t=my;return my<<=1,!(my&4194240)&&(my=64),t}function aO(t){for(var r=[],o=0;31>o;o++)r.push(t);return r}function zv(t,r,o){t.pendingLanes|=r,r!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,r=31-Gc(r),t[r]=o}function Zge(t,r){var o=t.pendingLanes&~r;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=r,t.mutableReadLanes&=r,t.entangledLanes&=r,r=t.entanglements;var s=t.eventTimes;for(t=t.expirationTimes;0<o;){var c=31-Gc(o),d=1<<c;r[c]=0,s[c]=-1,t[c]=-1,o&=~d}}function FD(t,r){var o=t.entangledLanes|=r;for(t=t.entanglements;o;){var s=31-Gc(o),c=1<<s;c&r|t[s]&r&&(t[s]|=r),o&=~c}}var Xr=0;function FK(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var UK,UD,BK,VK,jK,IN=!1,vy=[],_d=null,Sd=null,yd=null,sv=new Map,cv=new Map,dd=[],eve="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function $H(t,r){switch(t){case"focusin":case"focusout":_d=null;break;case"dragenter":case"dragleave":Sd=null;break;case"mouseover":case"mouseout":yd=null;break;case"pointerover":case"pointerout":sv.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":cv.delete(r.pointerId)}}function vg(t,r,o,s,c,d){return t===null||t.nativeEvent!==d?(t={blockedOn:r,domEventName:o,eventSystemFlags:s,nativeEvent:d,targetContainers:[c]},r!==null&&(r=Gv(r),r!==null&&UD(r)),t):(t.eventSystemFlags|=s,r=t.targetContainers,c!==null&&r.indexOf(c)===-1&&r.push(c),t)}function tve(t,r,o,s,c){switch(r){case"focusin":return _d=vg(_d,t,r,o,s,c),!0;case"dragenter":return Sd=vg(Sd,t,r,o,s,c),!0;case"mouseover":return yd=vg(yd,t,r,o,s,c),!0;case"pointerover":var d=c.pointerId;return sv.set(d,vg(sv.get(d)||null,t,r,o,s,c)),!0;case"gotpointercapture":return d=c.pointerId,cv.set(d,vg(cv.get(d)||null,t,r,o,s,c)),!0}return!1}function $K(t){var r=Oh(t.target);if(r!==null){var o=Jh(r);if(o!==null){if(r=o.tag,r===13){if(r=xK(o),r!==null){t.blockedOn=r,jK(t.priority,function(){BK(o)});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){t.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Jy(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var o=AN(t.domEventName,t.eventSystemFlags,r[0],t.nativeEvent);if(o===null){o=t.nativeEvent;var s=new o.constructor(o.type,o);CN=s,o.target.dispatchEvent(s),CN=null}else return r=Gv(o),r!==null&&UD(r),t.blockedOn=o,!1;r.shift()}return!0}function HH(t,r,o){Jy(t)&&o.delete(r)}function nve(){IN=!1,_d!==null&&Jy(_d)&&(_d=null),Sd!==null&&Jy(Sd)&&(Sd=null),yd!==null&&Jy(yd)&&(yd=null),sv.forEach(HH),cv.forEach(HH)}function Eg(t,r){t.blockedOn===r&&(t.blockedOn=null,IN||(IN=!0,Is.unstable_scheduleCallback(Is.unstable_NormalPriority,nve)))}function lv(t){function r(c){return Eg(c,t)}if(0<vy.length){Eg(vy[0],t);for(var o=1;o<vy.length;o++){var s=vy[o];s.blockedOn===t&&(s.blockedOn=null)}}for(_d!==null&&Eg(_d,t),Sd!==null&&Eg(Sd,t),yd!==null&&Eg(yd,t),sv.forEach(r),cv.forEach(r),o=0;o<dd.length;o++)s=dd[o],s.blockedOn===t&&(s.blockedOn=null);for(;0<dd.length&&(o=dd[0],o.blockedOn===null);)$K(o),o.blockedOn===null&&dd.shift()}var tm=vu.ReactCurrentBatchConfig,AC=!0;function rve(t,r,o,s){var c=Xr,d=tm.transition;tm.transition=null;try{Xr=1,BD(t,r,o,s)}finally{Xr=c,tm.transition=d}}function ive(t,r,o,s){var c=Xr,d=tm.transition;tm.transition=null;try{Xr=4,BD(t,r,o,s)}finally{Xr=c,tm.transition=d}}function BD(t,r,o,s){if(AC){var c=AN(t,r,o,s);if(c===null)gO(t,r,s,OC,o),$H(t,s);else if(tve(c,t,r,o,s))s.stopPropagation();else if($H(t,s),r&4&&-1<eve.indexOf(t)){for(;c!==null;){var d=Gv(c);if(d!==null&&UK(d),d=AN(t,r,o,s),d===null&&gO(t,r,s,OC,o),d===c)break;c=d}c!==null&&s.stopPropagation()}else gO(t,r,s,null,o)}}var OC=null;function AN(t,r,o,s){if(OC=null,t=kD(s),t=Oh(t),t!==null)if(r=Jh(t),r===null)t=null;else if(o=r.tag,o===13){if(t=xK(r),t!==null)return t;t=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null);return OC=t,null}function HK(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Wge()){case MD:return 1;case LK:return 4;case wC:case Gge:return 16;case kK:return 536870912;default:return 16}default:return 16}}var fd=null,VD=null,Qy=null;function zK(){if(Qy)return Qy;var t,r=VD,o=r.length,s,c="value"in fd?fd.value:fd.textContent,d=c.length;for(t=0;t<o&&r[t]===c[t];t++);var f=o-t;for(s=1;s<=f&&r[o-s]===c[d-s];s++);return Qy=c.slice(t,1<s?1-s:void 0)}function Zy(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function Ey(){return!0}function zH(){return!1}function Ns(t){function r(o,s,c,d,f){this._reactName=o,this._targetInst=c,this.type=s,this.nativeEvent=d,this.target=f,this.currentTarget=null;for(var v in t)t.hasOwnProperty(v)&&(o=t[v],this[v]=o?o(d):d[v]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Ey:zH,this.isPropagationStopped=zH,this}return Ui(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Ey)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Ey)},persist:function(){},isPersistent:Ey}),r}var Im={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jD=Ns(Im),Wv=Ui({},Im,{view:0,detail:0}),ove=Ns(Wv),sO,cO,_g,xb=Ui({},Wv,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$D,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==_g&&(_g&&t.type==="mousemove"?(sO=t.screenX-_g.screenX,cO=t.screenY-_g.screenY):cO=sO=0,_g=t),sO)},movementY:function(t){return"movementY"in t?t.movementY:cO}}),WH=Ns(xb),ave=Ui({},xb,{dataTransfer:0}),sve=Ns(ave),cve=Ui({},Wv,{relatedTarget:0}),lO=Ns(cve),lve=Ui({},Im,{animationName:0,elapsedTime:0,pseudoElement:0}),uve=Ns(lve),dve=Ui({},Im,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),hve=Ns(dve),fve=Ui({},Im,{data:0}),GH=Ns(fve),pve={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mve={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gve={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vve(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=gve[t])?!!r[t]:!1}function $D(){return vve}var Eve=Ui({},Wv,{key:function(t){if(t.key){var r=pve[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=Zy(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?mve[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$D,charCode:function(t){return t.type==="keypress"?Zy(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Zy(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),_ve=Ns(Eve),Sve=Ui({},xb,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),KH=Ns(Sve),yve=Ui({},Wv,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$D}),Cve=Ns(yve),bve=Ui({},Im,{propertyName:0,elapsedTime:0,pseudoElement:0}),Tve=Ns(bve),Rve=Ui({},xb,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),wve=Ns(Rve),Ive=[9,13,27,32],HD=uu&&"CompositionEvent"in window,Wg=null;uu&&"documentMode"in document&&(Wg=document.documentMode);var Ave=uu&&"TextEvent"in window&&!Wg,WK=uu&&(!HD||Wg&&8<Wg&&11>=Wg),YH=String.fromCharCode(32),qH=!1;function GK(t,r){switch(t){case"keyup":return Ive.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function KK(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Bp=!1;function Ove(t,r){switch(t){case"compositionend":return KK(r);case"keypress":return r.which!==32?null:(qH=!0,YH);case"textInput":return t=r.data,t===YH&&qH?null:t;default:return null}}function xve(t,r){if(Bp)return t==="compositionend"||!HD&&GK(t,r)?(t=zK(),Qy=VD=fd=null,Bp=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return WK&&r.locale!=="ko"?null:r.data;default:return null}}var Nve={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function XH(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!Nve[t.type]:r==="textarea"}function YK(t,r,o,s){RK(s),r=xC(r,"onChange"),0<r.length&&(o=new jD("onChange","change",null,o,s),t.push({event:o,listeners:r}))}var Gg=null,uv=null;function Pve(t){oY(t,0)}function Nb(t){var r=$p(t);if(EK(r))return t}function Dve(t,r){if(t==="change")return r}var qK=!1;if(uu){var uO;if(uu){var dO="oninput"in document;if(!dO){var JH=document.createElement("div");JH.setAttribute("oninput","return;"),dO=typeof JH.oninput=="function"}uO=dO}else uO=!1;qK=uO&&(!document.documentMode||9<document.documentMode)}function QH(){Gg&&(Gg.detachEvent("onpropertychange",XK),uv=Gg=null)}function XK(t){if(t.propertyName==="value"&&Nb(uv)){var r=[];YK(r,uv,t,kD(t)),OK(Pve,r)}}function Lve(t,r,o){t==="focusin"?(QH(),Gg=r,uv=o,Gg.attachEvent("onpropertychange",XK)):t==="focusout"&&QH()}function kve(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Nb(uv)}function Mve(t,r){if(t==="click")return Nb(r)}function Fve(t,r){if(t==="input"||t==="change")return Nb(r)}function Uve(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var Jc=typeof Object.is=="function"?Object.is:Uve;function dv(t,r){if(Jc(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var o=Object.keys(t),s=Object.keys(r);if(o.length!==s.length)return!1;for(s=0;s<o.length;s++){var c=o[s];if(!uN.call(r,c)||!Jc(t[c],r[c]))return!1}return!0}function ZH(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function e7(t,r){var o=ZH(t);t=0;for(var s;o;){if(o.nodeType===3){if(s=t+o.textContent.length,t<=r&&s>=r)return{node:o,offset:r-t};t=s}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=ZH(o)}}function JK(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?JK(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function QK(){for(var t=window,r=bC();r instanceof t.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)t=r.contentWindow;else break;r=bC(t.document)}return r}function zD(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}function Bve(t){var r=QK(),o=t.focusedElem,s=t.selectionRange;if(r!==o&&o&&o.ownerDocument&&JK(o.ownerDocument.documentElement,o)){if(s!==null&&zD(o)){if(r=s.start,t=s.end,t===void 0&&(t=r),"selectionStart"in o)o.selectionStart=r,o.selectionEnd=Math.min(t,o.value.length);else if(t=(r=o.ownerDocument||document)&&r.defaultView||window,t.getSelection){t=t.getSelection();var c=o.textContent.length,d=Math.min(s.start,c);s=s.end===void 0?d:Math.min(s.end,c),!t.extend&&d>s&&(c=s,s=d,d=c),c=e7(o,d);var f=e7(o,s);c&&f&&(t.rangeCount!==1||t.anchorNode!==c.node||t.anchorOffset!==c.offset||t.focusNode!==f.node||t.focusOffset!==f.offset)&&(r=r.createRange(),r.setStart(c.node,c.offset),t.removeAllRanges(),d>s?(t.addRange(r),t.extend(f.node,f.offset)):(r.setEnd(f.node,f.offset),t.addRange(r)))}}for(r=[],t=o;t=t.parentNode;)t.nodeType===1&&r.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<r.length;o++)t=r[o],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Vve=uu&&"documentMode"in document&&11>=document.documentMode,Vp=null,ON=null,Kg=null,xN=!1;function t7(t,r,o){var s=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;xN||Vp==null||Vp!==bC(s)||(s=Vp,"selectionStart"in s&&zD(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Kg&&dv(Kg,s)||(Kg=s,s=xC(ON,"onSelect"),0<s.length&&(r=new jD("onSelect","select",null,r,o),t.push({event:r,listeners:s}),r.target=Vp)))}function _y(t,r){var o={};return o[t.toLowerCase()]=r.toLowerCase(),o["Webkit"+t]="webkit"+r,o["Moz"+t]="moz"+r,o}var jp={animationend:_y("Animation","AnimationEnd"),animationiteration:_y("Animation","AnimationIteration"),animationstart:_y("Animation","AnimationStart"),transitionend:_y("Transition","TransitionEnd")},hO={},ZK={};uu&&(ZK=document.createElement("div").style,"AnimationEvent"in window||(delete jp.animationend.animation,delete jp.animationiteration.animation,delete jp.animationstart.animation),"TransitionEvent"in window||delete jp.transitionend.transition);function Pb(t){if(hO[t])return hO[t];if(!jp[t])return t;var r=jp[t],o;for(o in r)if(r.hasOwnProperty(o)&&o in ZK)return hO[t]=r[o];return t}var eY=Pb("animationend"),tY=Pb("animationiteration"),nY=Pb("animationstart"),rY=Pb("transitionend"),iY=new Map,n7="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pd(t,r){iY.set(t,r),Xh(r,[t])}for(var fO=0;fO<n7.length;fO++){var pO=n7[fO],jve=pO.toLowerCase(),$ve=pO[0].toUpperCase()+pO.slice(1);Pd(jve,"on"+$ve)}Pd(eY,"onAnimationEnd");Pd(tY,"onAnimationIteration");Pd(nY,"onAnimationStart");Pd("dblclick","onDoubleClick");Pd("focusin","onFocus");Pd("focusout","onBlur");Pd(rY,"onTransitionEnd");sm("onMouseEnter",["mouseout","mouseover"]);sm("onMouseLeave",["mouseout","mouseover"]);sm("onPointerEnter",["pointerout","pointerover"]);sm("onPointerLeave",["pointerout","pointerover"]);Xh("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Xh("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Xh("onBeforeInput",["compositionend","keypress","textInput","paste"]);Xh("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Xh("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Xh("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Hve=new Set("cancel close invalid load scroll toggle".split(" ").concat(Bg));function r7(t,r,o){var s=t.type||"unknown-event";t.currentTarget=o,jge(s,r,void 0,t),t.currentTarget=null}function oY(t,r){r=(r&4)!==0;for(var o=0;o<t.length;o++){var s=t[o],c=s.event;s=s.listeners;e:{var d=void 0;if(r)for(var f=s.length-1;0<=f;f--){var v=s[f],g=v.instance,_=v.currentTarget;if(v=v.listener,g!==d&&c.isPropagationStopped())break e;r7(c,v,_),d=g}else for(f=0;f<s.length;f++){if(v=s[f],g=v.instance,_=v.currentTarget,v=v.listener,g!==d&&c.isPropagationStopped())break e;r7(c,v,_),d=g}}}if(RC)throw t=RN,RC=!1,RN=null,t}function Ti(t,r){var o=r[kN];o===void 0&&(o=r[kN]=new Set);var s=t+"__bubble";o.has(s)||(aY(r,t,2,!1),o.add(s))}function mO(t,r,o){var s=0;r&&(s|=4),aY(o,t,s,r)}var Sy="_reactListening"+Math.random().toString(36).slice(2);function hv(t){if(!t[Sy]){t[Sy]=!0,fK.forEach(function(o){o!=="selectionchange"&&(Hve.has(o)||mO(o,!1,t),mO(o,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[Sy]||(r[Sy]=!0,mO("selectionchange",!1,r))}}function aY(t,r,o,s){switch(HK(r)){case 1:var c=rve;break;case 4:c=ive;break;default:c=BD}o=c.bind(null,r,o,t),c=void 0,!TN||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(c=!0),s?c!==void 0?t.addEventListener(r,o,{capture:!0,passive:c}):t.addEventListener(r,o,!0):c!==void 0?t.addEventListener(r,o,{passive:c}):t.addEventListener(r,o,!1)}function gO(t,r,o,s,c){var d=s;if(!(r&1)&&!(r&2)&&s!==null)e:for(;;){if(s===null)return;var f=s.tag;if(f===3||f===4){var v=s.stateNode.containerInfo;if(v===c||v.nodeType===8&&v.parentNode===c)break;if(f===4)for(f=s.return;f!==null;){var g=f.tag;if((g===3||g===4)&&(g=f.stateNode.containerInfo,g===c||g.nodeType===8&&g.parentNode===c))return;f=f.return}for(;v!==null;){if(f=Oh(v),f===null)return;if(g=f.tag,g===5||g===6){s=d=f;continue e}v=v.parentNode}}s=s.return}OK(function(){var _=d,C=kD(o),b=[];e:{var T=iY.get(t);if(T!==void 0){var A=jD,I=t;switch(t){case"keypress":if(Zy(o)===0)break e;case"keydown":case"keyup":A=_ve;break;case"focusin":I="focus",A=lO;break;case"focusout":I="blur",A=lO;break;case"beforeblur":case"afterblur":A=lO;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":A=WH;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":A=sve;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":A=Cve;break;case eY:case tY:case nY:A=uve;break;case rY:A=Tve;break;case"scroll":A=ove;break;case"wheel":A=wve;break;case"copy":case"cut":case"paste":A=hve;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":A=KH}var N=(r&4)!==0,P=!N&&t==="scroll",D=N?T!==null?T+"Capture":null:T;N=[];for(var x=_,L;x!==null;){L=x;var M=L.stateNode;if(L.tag===5&&M!==null&&(L=M,D!==null&&(M=av(x,D),M!=null&&N.push(fv(x,M,L)))),P)break;x=x.return}0<N.length&&(T=new A(T,I,null,o,C),b.push({event:T,listeners:N}))}}if(!(r&7)){e:{if(T=t==="mouseover"||t==="pointerover",A=t==="mouseout"||t==="pointerout",T&&o!==CN&&(I=o.relatedTarget||o.fromElement)&&(Oh(I)||I[du]))break e;if((A||T)&&(T=C.window===C?C:(T=C.ownerDocument)?T.defaultView||T.parentWindow:window,A?(I=o.relatedTarget||o.toElement,A=_,I=I?Oh(I):null,I!==null&&(P=Jh(I),I!==P||I.tag!==5&&I.tag!==6)&&(I=null)):(A=null,I=_),A!==I)){if(N=WH,M="onMouseLeave",D="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(N=KH,M="onPointerLeave",D="onPointerEnter",x="pointer"),P=A==null?T:$p(A),L=I==null?T:$p(I),T=new N(M,x+"leave",A,o,C),T.target=P,T.relatedTarget=L,M=null,Oh(C)===_&&(N=new N(D,x+"enter",I,o,C),N.target=L,N.relatedTarget=P,M=N),P=M,A&&I)t:{for(N=A,D=I,x=0,L=N;L;L=Ip(L))x++;for(L=0,M=D;M;M=Ip(M))L++;for(;0<x-L;)N=Ip(N),x--;for(;0<L-x;)D=Ip(D),L--;for(;x--;){if(N===D||D!==null&&N===D.alternate)break t;N=Ip(N),D=Ip(D)}N=null}else N=null;A!==null&&i7(b,T,A,N,!1),I!==null&&P!==null&&i7(b,P,I,N,!0)}}e:{if(T=_?$p(_):window,A=T.nodeName&&T.nodeName.toLowerCase(),A==="select"||A==="input"&&T.type==="file")var F=Dve;else if(XH(T))if(qK)F=Fve;else{F=kve;var V=Lve}else(A=T.nodeName)&&A.toLowerCase()==="input"&&(T.type==="checkbox"||T.type==="radio")&&(F=Mve);if(F&&(F=F(t,_))){YK(b,F,o,C);break e}V&&V(t,T,_),t==="focusout"&&(V=T._wrapperState)&&V.controlled&&T.type==="number"&&vN(T,"number",T.value)}switch(V=_?$p(_):window,t){case"focusin":(XH(V)||V.contentEditable==="true")&&(Vp=V,ON=_,Kg=null);break;case"focusout":Kg=ON=Vp=null;break;case"mousedown":xN=!0;break;case"contextmenu":case"mouseup":case"dragend":xN=!1,t7(b,o,C);break;case"selectionchange":if(Vve)break;case"keydown":case"keyup":t7(b,o,C)}var $;if(HD)e:{switch(t){case"compositionstart":var z="onCompositionStart";break e;case"compositionend":z="onCompositionEnd";break e;case"compositionupdate":z="onCompositionUpdate";break e}z=void 0}else Bp?GK(t,o)&&(z="onCompositionEnd"):t==="keydown"&&o.keyCode===229&&(z="onCompositionStart");z&&(WK&&o.locale!=="ko"&&(Bp||z!=="onCompositionStart"?z==="onCompositionEnd"&&Bp&&($=zK()):(fd=C,VD="value"in fd?fd.value:fd.textContent,Bp=!0)),V=xC(_,z),0<V.length&&(z=new GH(z,t,null,o,C),b.push({event:z,listeners:V}),$?z.data=$:($=KK(o),$!==null&&(z.data=$)))),($=Ave?Ove(t,o):xve(t,o))&&(_=xC(_,"onBeforeInput"),0<_.length&&(C=new GH("onBeforeInput","beforeinput",null,o,C),b.push({event:C,listeners:_}),C.data=$))}oY(b,r)})}function fv(t,r,o){return{instance:t,listener:r,currentTarget:o}}function xC(t,r){for(var o=r+"Capture",s=[];t!==null;){var c=t,d=c.stateNode;c.tag===5&&d!==null&&(c=d,d=av(t,o),d!=null&&s.unshift(fv(t,d,c)),d=av(t,r),d!=null&&s.push(fv(t,d,c))),t=t.return}return s}function Ip(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function i7(t,r,o,s,c){for(var d=r._reactName,f=[];o!==null&&o!==s;){var v=o,g=v.alternate,_=v.stateNode;if(g!==null&&g===s)break;v.tag===5&&_!==null&&(v=_,c?(g=av(o,d),g!=null&&f.unshift(fv(o,g,v))):c||(g=av(o,d),g!=null&&f.push(fv(o,g,v)))),o=o.return}f.length!==0&&t.push({event:r,listeners:f})}var zve=/\r\n?/g,Wve=/\u0000|\uFFFD/g;function o7(t){return(typeof t=="string"?t:""+t).replace(zve,`
`).replace(Wve,"")}function yy(t,r,o){if(r=o7(r),o7(t)!==r&&o)throw Error(yt(425))}function NC(){}var NN=null,PN=null;function DN(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var LN=typeof setTimeout=="function"?setTimeout:void 0,Gve=typeof clearTimeout=="function"?clearTimeout:void 0,a7=typeof Promise=="function"?Promise:void 0,Kve=typeof queueMicrotask=="function"?queueMicrotask:typeof a7<"u"?function(t){return a7.resolve(null).then(t).catch(Yve)}:LN;function Yve(t){setTimeout(function(){throw t})}function vO(t,r){var o=r,s=0;do{var c=o.nextSibling;if(t.removeChild(o),c&&c.nodeType===8)if(o=c.data,o==="/$"){if(s===0){t.removeChild(c),lv(r);return}s--}else o!=="$"&&o!=="$?"&&o!=="$!"||s++;o=c}while(o);lv(r)}function Cd(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return t}function s7(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var o=t.data;if(o==="$"||o==="$!"||o==="$?"){if(r===0)return t;r--}else o==="/$"&&r++}t=t.previousSibling}return null}var Am=Math.random().toString(36).slice(2),Nl="__reactFiber$"+Am,pv="__reactProps$"+Am,du="__reactContainer$"+Am,kN="__reactEvents$"+Am,qve="__reactListeners$"+Am,Xve="__reactHandles$"+Am;function Oh(t){var r=t[Nl];if(r)return r;for(var o=t.parentNode;o;){if(r=o[du]||o[Nl]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(t=s7(t);t!==null;){if(o=t[Nl])return o;t=s7(t)}return r}t=o,o=t.parentNode}return null}function Gv(t){return t=t[Nl]||t[du],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function $p(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(yt(33))}function Db(t){return t[pv]||null}var MN=[],Hp=-1;function Dd(t){return{current:t}}function Ri(t){0>Hp||(t.current=MN[Hp],MN[Hp]=null,Hp--)}function _i(t,r){Hp++,MN[Hp]=t.current,t.current=r}var Ad={},ya=Dd(Ad),ts=Dd(!1),Uh=Ad;function cm(t,r){var o=t.type.contextTypes;if(!o)return Ad;var s=t.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===r)return s.__reactInternalMemoizedMaskedChildContext;var c={},d;for(d in o)c[d]=r[d];return s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=c),c}function ns(t){return t=t.childContextTypes,t!=null}function PC(){Ri(ts),Ri(ya)}function c7(t,r,o){if(ya.current!==Ad)throw Error(yt(168));_i(ya,r),_i(ts,o)}function sY(t,r,o){var s=t.stateNode;if(r=r.childContextTypes,typeof s.getChildContext!="function")return o;s=s.getChildContext();for(var c in s)if(!(c in r))throw Error(yt(108,Lge(t)||"Unknown",c));return Ui({},o,s)}function DC(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ad,Uh=ya.current,_i(ya,t),_i(ts,ts.current),!0}function l7(t,r,o){var s=t.stateNode;if(!s)throw Error(yt(169));o?(t=sY(t,r,Uh),s.__reactInternalMemoizedMergedChildContext=t,Ri(ts),Ri(ya),_i(ya,t)):Ri(ts),_i(ts,o)}var iu=null,Lb=!1,EO=!1;function cY(t){iu===null?iu=[t]:iu.push(t)}function Jve(t){Lb=!0,cY(t)}function Ld(){if(!EO&&iu!==null){EO=!0;var t=0,r=Xr;try{var o=iu;for(Xr=1;t<o.length;t++){var s=o[t];do s=s(!0);while(s!==null)}iu=null,Lb=!1}catch(c){throw iu!==null&&(iu=iu.slice(t+1)),DK(MD,Ld),c}finally{Xr=r,EO=!1}}return null}var zp=[],Wp=0,LC=null,kC=0,sc=[],cc=0,Bh=null,ou=1,au="";function Rh(t,r){zp[Wp++]=kC,zp[Wp++]=LC,LC=t,kC=r}function lY(t,r,o){sc[cc++]=ou,sc[cc++]=au,sc[cc++]=Bh,Bh=t;var s=ou;t=au;var c=32-Gc(s)-1;s&=~(1<<c),o+=1;var d=32-Gc(r)+c;if(30<d){var f=c-c%5;d=(s&(1<<f)-1).toString(32),s>>=f,c-=f,ou=1<<32-Gc(r)+c|o<<c|s,au=d+t}else ou=1<<d|o<<c|s,au=t}function WD(t){t.return!==null&&(Rh(t,1),lY(t,1,0))}function GD(t){for(;t===LC;)LC=zp[--Wp],zp[Wp]=null,kC=zp[--Wp],zp[Wp]=null;for(;t===Bh;)Bh=sc[--cc],sc[cc]=null,au=sc[--cc],sc[cc]=null,ou=sc[--cc],sc[cc]=null}var Rs=null,bs=null,Oi=!1,zc=null;function uY(t,r){var o=lc(5,null,null,0);o.elementType="DELETED",o.stateNode=r,o.return=t,r=t.deletions,r===null?(t.deletions=[o],t.flags|=16):r.push(o)}function u7(t,r){switch(t.tag){case 5:var o=t.type;return r=r.nodeType!==1||o.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(t.stateNode=r,Rs=t,bs=Cd(r.firstChild),!0):!1;case 6:return r=t.pendingProps===""||r.nodeType!==3?null:r,r!==null?(t.stateNode=r,Rs=t,bs=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(o=Bh!==null?{id:ou,overflow:au}:null,t.memoizedState={dehydrated:r,treeContext:o,retryLane:1073741824},o=lc(18,null,null,0),o.stateNode=r,o.return=t,t.child=o,Rs=t,bs=null,!0):!1;default:return!1}}function FN(t){return(t.mode&1)!==0&&(t.flags&128)===0}function UN(t){if(Oi){var r=bs;if(r){var o=r;if(!u7(t,r)){if(FN(t))throw Error(yt(418));r=Cd(o.nextSibling);var s=Rs;r&&u7(t,r)?uY(s,o):(t.flags=t.flags&-4097|2,Oi=!1,Rs=t)}}else{if(FN(t))throw Error(yt(418));t.flags=t.flags&-4097|2,Oi=!1,Rs=t}}}function d7(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Rs=t}function Cy(t){if(t!==Rs)return!1;if(!Oi)return d7(t),Oi=!0,!1;var r;if((r=t.tag!==3)&&!(r=t.tag!==5)&&(r=t.type,r=r!=="head"&&r!=="body"&&!DN(t.type,t.memoizedProps)),r&&(r=bs)){if(FN(t))throw dY(),Error(yt(418));for(;r;)uY(t,r),r=Cd(r.nextSibling)}if(d7(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(yt(317));e:{for(t=t.nextSibling,r=0;t;){if(t.nodeType===8){var o=t.data;if(o==="/$"){if(r===0){bs=Cd(t.nextSibling);break e}r--}else o!=="$"&&o!=="$!"&&o!=="$?"||r++}t=t.nextSibling}bs=null}}else bs=Rs?Cd(t.stateNode.nextSibling):null;return!0}function dY(){for(var t=bs;t;)t=Cd(t.nextSibling)}function lm(){bs=Rs=null,Oi=!1}function KD(t){zc===null?zc=[t]:zc.push(t)}var Qve=vu.ReactCurrentBatchConfig;function Sg(t,r,o){if(t=o.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(yt(309));var s=o.stateNode}if(!s)throw Error(yt(147,t));var c=s,d=""+t;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===d?r.ref:(r=function(f){var v=c.refs;f===null?delete v[d]:v[d]=f},r._stringRef=d,r)}if(typeof t!="string")throw Error(yt(284));if(!o._owner)throw Error(yt(290,t))}return t}function by(t,r){throw t=Object.prototype.toString.call(r),Error(yt(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t))}function h7(t){var r=t._init;return r(t._payload)}function hY(t){function r(D,x){if(t){var L=D.deletions;L===null?(D.deletions=[x],D.flags|=16):L.push(x)}}function o(D,x){if(!t)return null;for(;x!==null;)r(D,x),x=x.sibling;return null}function s(D,x){for(D=new Map;x!==null;)x.key!==null?D.set(x.key,x):D.set(x.index,x),x=x.sibling;return D}function c(D,x){return D=wd(D,x),D.index=0,D.sibling=null,D}function d(D,x,L){return D.index=L,t?(L=D.alternate,L!==null?(L=L.index,L<x?(D.flags|=2,x):L):(D.flags|=2,x)):(D.flags|=1048576,x)}function f(D){return t&&D.alternate===null&&(D.flags|=2),D}function v(D,x,L,M){return x===null||x.tag!==6?(x=RO(L,D.mode,M),x.return=D,x):(x=c(x,L),x.return=D,x)}function g(D,x,L,M){var F=L.type;return F===Up?C(D,x,L.props.children,M,L.key):x!==null&&(x.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===ld&&h7(F)===x.type)?(M=c(x,L.props),M.ref=Sg(D,x,L),M.return=D,M):(M=aC(L.type,L.key,L.props,null,D.mode,M),M.ref=Sg(D,x,L),M.return=D,M)}function _(D,x,L,M){return x===null||x.tag!==4||x.stateNode.containerInfo!==L.containerInfo||x.stateNode.implementation!==L.implementation?(x=wO(L,D.mode,M),x.return=D,x):(x=c(x,L.children||[]),x.return=D,x)}function C(D,x,L,M,F){return x===null||x.tag!==7?(x=Lh(L,D.mode,M,F),x.return=D,x):(x=c(x,L),x.return=D,x)}function b(D,x,L){if(typeof x=="string"&&x!==""||typeof x=="number")return x=RO(""+x,D.mode,L),x.return=D,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case hy:return L=aC(x.type,x.key,x.props,null,D.mode,L),L.ref=Sg(D,null,x),L.return=D,L;case Fp:return x=wO(x,D.mode,L),x.return=D,x;case ld:var M=x._init;return b(D,M(x._payload),L)}if(Fg(x)||mg(x))return x=Lh(x,D.mode,L,null),x.return=D,x;by(D,x)}return null}function T(D,x,L,M){var F=x!==null?x.key:null;if(typeof L=="string"&&L!==""||typeof L=="number")return F!==null?null:v(D,x,""+L,M);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case hy:return L.key===F?g(D,x,L,M):null;case Fp:return L.key===F?_(D,x,L,M):null;case ld:return F=L._init,T(D,x,F(L._payload),M)}if(Fg(L)||mg(L))return F!==null?null:C(D,x,L,M,null);by(D,L)}return null}function A(D,x,L,M,F){if(typeof M=="string"&&M!==""||typeof M=="number")return D=D.get(L)||null,v(x,D,""+M,F);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case hy:return D=D.get(M.key===null?L:M.key)||null,g(x,D,M,F);case Fp:return D=D.get(M.key===null?L:M.key)||null,_(x,D,M,F);case ld:var V=M._init;return A(D,x,L,V(M._payload),F)}if(Fg(M)||mg(M))return D=D.get(L)||null,C(x,D,M,F,null);by(x,M)}return null}function I(D,x,L,M){for(var F=null,V=null,$=x,z=x=0,K=null;$!==null&&z<L.length;z++){$.index>z?(K=$,$=null):K=$.sibling;var G=T(D,$,L[z],M);if(G===null){$===null&&($=K);break}t&&$&&G.alternate===null&&r(D,$),x=d(G,x,z),V===null?F=G:V.sibling=G,V=G,$=K}if(z===L.length)return o(D,$),Oi&&Rh(D,z),F;if($===null){for(;z<L.length;z++)$=b(D,L[z],M),$!==null&&(x=d($,x,z),V===null?F=$:V.sibling=$,V=$);return Oi&&Rh(D,z),F}for($=s(D,$);z<L.length;z++)K=A($,D,z,L[z],M),K!==null&&(t&&K.alternate!==null&&$.delete(K.key===null?z:K.key),x=d(K,x,z),V===null?F=K:V.sibling=K,V=K);return t&&$.forEach(function(J){return r(D,J)}),Oi&&Rh(D,z),F}function N(D,x,L,M){var F=mg(L);if(typeof F!="function")throw Error(yt(150));if(L=F.call(L),L==null)throw Error(yt(151));for(var V=F=null,$=x,z=x=0,K=null,G=L.next();$!==null&&!G.done;z++,G=L.next()){$.index>z?(K=$,$=null):K=$.sibling;var J=T(D,$,G.value,M);if(J===null){$===null&&($=K);break}t&&$&&J.alternate===null&&r(D,$),x=d(J,x,z),V===null?F=J:V.sibling=J,V=J,$=K}if(G.done)return o(D,$),Oi&&Rh(D,z),F;if($===null){for(;!G.done;z++,G=L.next())G=b(D,G.value,M),G!==null&&(x=d(G,x,z),V===null?F=G:V.sibling=G,V=G);return Oi&&Rh(D,z),F}for($=s(D,$);!G.done;z++,G=L.next())G=A($,D,z,G.value,M),G!==null&&(t&&G.alternate!==null&&$.delete(G.key===null?z:G.key),x=d(G,x,z),V===null?F=G:V.sibling=G,V=G);return t&&$.forEach(function(ne){return r(D,ne)}),Oi&&Rh(D,z),F}function P(D,x,L,M){if(typeof L=="object"&&L!==null&&L.type===Up&&L.key===null&&(L=L.props.children),typeof L=="object"&&L!==null){switch(L.$$typeof){case hy:e:{for(var F=L.key,V=x;V!==null;){if(V.key===F){if(F=L.type,F===Up){if(V.tag===7){o(D,V.sibling),x=c(V,L.props.children),x.return=D,D=x;break e}}else if(V.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===ld&&h7(F)===V.type){o(D,V.sibling),x=c(V,L.props),x.ref=Sg(D,V,L),x.return=D,D=x;break e}o(D,V);break}else r(D,V);V=V.sibling}L.type===Up?(x=Lh(L.props.children,D.mode,M,L.key),x.return=D,D=x):(M=aC(L.type,L.key,L.props,null,D.mode,M),M.ref=Sg(D,x,L),M.return=D,D=M)}return f(D);case Fp:e:{for(V=L.key;x!==null;){if(x.key===V)if(x.tag===4&&x.stateNode.containerInfo===L.containerInfo&&x.stateNode.implementation===L.implementation){o(D,x.sibling),x=c(x,L.children||[]),x.return=D,D=x;break e}else{o(D,x);break}else r(D,x);x=x.sibling}x=wO(L,D.mode,M),x.return=D,D=x}return f(D);case ld:return V=L._init,P(D,x,V(L._payload),M)}if(Fg(L))return I(D,x,L,M);if(mg(L))return N(D,x,L,M);by(D,L)}return typeof L=="string"&&L!==""||typeof L=="number"?(L=""+L,x!==null&&x.tag===6?(o(D,x.sibling),x=c(x,L),x.return=D,D=x):(o(D,x),x=RO(L,D.mode,M),x.return=D,D=x),f(D)):o(D,x)}return P}var um=hY(!0),fY=hY(!1),MC=Dd(null),FC=null,Gp=null,YD=null;function qD(){YD=Gp=FC=null}function XD(t){var r=MC.current;Ri(MC),t._currentValue=r}function BN(t,r,o){for(;t!==null;){var s=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,s!==null&&(s.childLanes|=r)):s!==null&&(s.childLanes&r)!==r&&(s.childLanes|=r),t===o)break;t=t.return}}function nm(t,r){FC=t,YD=Gp=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&r&&(Za=!0),t.firstContext=null)}function fc(t){var r=t._currentValue;if(YD!==t)if(t={context:t,memoizedValue:r,next:null},Gp===null){if(FC===null)throw Error(yt(308));Gp=t,FC.dependencies={lanes:0,firstContext:t}}else Gp=Gp.next=t;return r}var xh=null;function JD(t){xh===null?xh=[t]:xh.push(t)}function pY(t,r,o,s){var c=r.interleaved;return c===null?(o.next=o,JD(r)):(o.next=c.next,c.next=o),r.interleaved=o,hu(t,s)}function hu(t,r){t.lanes|=r;var o=t.alternate;for(o!==null&&(o.lanes|=r),o=t,t=t.return;t!==null;)t.childLanes|=r,o=t.alternate,o!==null&&(o.childLanes|=r),o=t,t=t.return;return o.tag===3?o.stateNode:null}var ud=!1;function QD(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function mY(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function su(t,r){return{eventTime:t,lane:r,tag:0,payload:null,callback:null,next:null}}function bd(t,r,o){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,Pr&2){var c=s.pending;return c===null?r.next=r:(r.next=c.next,c.next=r),s.pending=r,hu(t,o)}return c=s.interleaved,c===null?(r.next=r,JD(s)):(r.next=c.next,c.next=r),s.interleaved=r,hu(t,o)}function eC(t,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194240)!==0)){var s=r.lanes;s&=t.pendingLanes,o|=s,r.lanes=o,FD(t,o)}}function f7(t,r){var o=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,o===s)){var c=null,d=null;if(o=o.firstBaseUpdate,o!==null){do{var f={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};d===null?c=d=f:d=d.next=f,o=o.next}while(o!==null);d===null?c=d=r:d=d.next=r}else c=d=r;o={baseState:s.baseState,firstBaseUpdate:c,lastBaseUpdate:d,shared:s.shared,effects:s.effects},t.updateQueue=o;return}t=o.lastBaseUpdate,t===null?o.firstBaseUpdate=r:t.next=r,o.lastBaseUpdate=r}function UC(t,r,o,s){var c=t.updateQueue;ud=!1;var d=c.firstBaseUpdate,f=c.lastBaseUpdate,v=c.shared.pending;if(v!==null){c.shared.pending=null;var g=v,_=g.next;g.next=null,f===null?d=_:f.next=_,f=g;var C=t.alternate;C!==null&&(C=C.updateQueue,v=C.lastBaseUpdate,v!==f&&(v===null?C.firstBaseUpdate=_:v.next=_,C.lastBaseUpdate=g))}if(d!==null){var b=c.baseState;f=0,C=_=g=null,v=d;do{var T=v.lane,A=v.eventTime;if((s&T)===T){C!==null&&(C=C.next={eventTime:A,lane:0,tag:v.tag,payload:v.payload,callback:v.callback,next:null});e:{var I=t,N=v;switch(T=r,A=o,N.tag){case 1:if(I=N.payload,typeof I=="function"){b=I.call(A,b,T);break e}b=I;break e;case 3:I.flags=I.flags&-65537|128;case 0:if(I=N.payload,T=typeof I=="function"?I.call(A,b,T):I,T==null)break e;b=Ui({},b,T);break e;case 2:ud=!0}}v.callback!==null&&v.lane!==0&&(t.flags|=64,T=c.effects,T===null?c.effects=[v]:T.push(v))}else A={eventTime:A,lane:T,tag:v.tag,payload:v.payload,callback:v.callback,next:null},C===null?(_=C=A,g=b):C=C.next=A,f|=T;if(v=v.next,v===null){if(v=c.shared.pending,v===null)break;T=v,v=T.next,T.next=null,c.lastBaseUpdate=T,c.shared.pending=null}}while(1);if(C===null&&(g=b),c.baseState=g,c.firstBaseUpdate=_,c.lastBaseUpdate=C,r=c.shared.interleaved,r!==null){c=r;do f|=c.lane,c=c.next;while(c!==r)}else d===null&&(c.shared.lanes=0);jh|=f,t.lanes=f,t.memoizedState=b}}function p7(t,r,o){if(t=r.effects,r.effects=null,t!==null)for(r=0;r<t.length;r++){var s=t[r],c=s.callback;if(c!==null){if(s.callback=null,s=o,typeof c!="function")throw Error(yt(191,c));c.call(s)}}}var Kv={},Dl=Dd(Kv),mv=Dd(Kv),gv=Dd(Kv);function Nh(t){if(t===Kv)throw Error(yt(174));return t}function ZD(t,r){switch(_i(gv,r),_i(mv,t),_i(Dl,Kv),t=r.nodeType,t){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:_N(null,"");break;default:t=t===8?r.parentNode:r,r=t.namespaceURI||null,t=t.tagName,r=_N(r,t)}Ri(Dl),_i(Dl,r)}function dm(){Ri(Dl),Ri(mv),Ri(gv)}function gY(t){Nh(gv.current);var r=Nh(Dl.current),o=_N(r,t.type);r!==o&&(_i(mv,t),_i(Dl,o))}function e2(t){mv.current===t&&(Ri(Dl),Ri(mv))}var Mi=Dd(0);function BC(t){for(var r=t;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if(r.flags&128)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var _O=[];function t2(){for(var t=0;t<_O.length;t++)_O[t]._workInProgressVersionPrimary=null;_O.length=0}var tC=vu.ReactCurrentDispatcher,SO=vu.ReactCurrentBatchConfig,Vh=0,Fi=null,Ro=null,Uo=null,VC=!1,Yg=!1,vv=0,Zve=0;function fa(){throw Error(yt(321))}function n2(t,r){if(r===null)return!1;for(var o=0;o<r.length&&o<t.length;o++)if(!Jc(t[o],r[o]))return!1;return!0}function r2(t,r,o,s,c,d){if(Vh=d,Fi=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,tC.current=t===null||t.memoizedState===null?rEe:iEe,t=o(s,c),Yg){d=0;do{if(Yg=!1,vv=0,25<=d)throw Error(yt(301));d+=1,Uo=Ro=null,r.updateQueue=null,tC.current=oEe,t=o(s,c)}while(Yg)}if(tC.current=jC,r=Ro!==null&&Ro.next!==null,Vh=0,Uo=Ro=Fi=null,VC=!1,r)throw Error(yt(300));return t}function i2(){var t=vv!==0;return vv=0,t}function Il(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Uo===null?Fi.memoizedState=Uo=t:Uo=Uo.next=t,Uo}function pc(){if(Ro===null){var t=Fi.alternate;t=t!==null?t.memoizedState:null}else t=Ro.next;var r=Uo===null?Fi.memoizedState:Uo.next;if(r!==null)Uo=r,Ro=t;else{if(t===null)throw Error(yt(310));Ro=t,t={memoizedState:Ro.memoizedState,baseState:Ro.baseState,baseQueue:Ro.baseQueue,queue:Ro.queue,next:null},Uo===null?Fi.memoizedState=Uo=t:Uo=Uo.next=t}return Uo}function Ev(t,r){return typeof r=="function"?r(t):r}function yO(t){var r=pc(),o=r.queue;if(o===null)throw Error(yt(311));o.lastRenderedReducer=t;var s=Ro,c=s.baseQueue,d=o.pending;if(d!==null){if(c!==null){var f=c.next;c.next=d.next,d.next=f}s.baseQueue=c=d,o.pending=null}if(c!==null){d=c.next,s=s.baseState;var v=f=null,g=null,_=d;do{var C=_.lane;if((Vh&C)===C)g!==null&&(g=g.next={lane:0,action:_.action,hasEagerState:_.hasEagerState,eagerState:_.eagerState,next:null}),s=_.hasEagerState?_.eagerState:t(s,_.action);else{var b={lane:C,action:_.action,hasEagerState:_.hasEagerState,eagerState:_.eagerState,next:null};g===null?(v=g=b,f=s):g=g.next=b,Fi.lanes|=C,jh|=C}_=_.next}while(_!==null&&_!==d);g===null?f=s:g.next=v,Jc(s,r.memoizedState)||(Za=!0),r.memoizedState=s,r.baseState=f,r.baseQueue=g,o.lastRenderedState=s}if(t=o.interleaved,t!==null){c=t;do d=c.lane,Fi.lanes|=d,jh|=d,c=c.next;while(c!==t)}else c===null&&(o.lanes=0);return[r.memoizedState,o.dispatch]}function CO(t){var r=pc(),o=r.queue;if(o===null)throw Error(yt(311));o.lastRenderedReducer=t;var s=o.dispatch,c=o.pending,d=r.memoizedState;if(c!==null){o.pending=null;var f=c=c.next;do d=t(d,f.action),f=f.next;while(f!==c);Jc(d,r.memoizedState)||(Za=!0),r.memoizedState=d,r.baseQueue===null&&(r.baseState=d),o.lastRenderedState=d}return[d,s]}function vY(){}function EY(t,r){var o=Fi,s=pc(),c=r(),d=!Jc(s.memoizedState,c);if(d&&(s.memoizedState=c,Za=!0),s=s.queue,o2(yY.bind(null,o,s,t),[t]),s.getSnapshot!==r||d||Uo!==null&&Uo.memoizedState.tag&1){if(o.flags|=2048,_v(9,SY.bind(null,o,s,c,r),void 0,null),Bo===null)throw Error(yt(349));Vh&30||_Y(o,r,c)}return c}function _Y(t,r,o){t.flags|=16384,t={getSnapshot:r,value:o},r=Fi.updateQueue,r===null?(r={lastEffect:null,stores:null},Fi.updateQueue=r,r.stores=[t]):(o=r.stores,o===null?r.stores=[t]:o.push(t))}function SY(t,r,o,s){r.value=o,r.getSnapshot=s,CY(r)&&bY(t)}function yY(t,r,o){return o(function(){CY(r)&&bY(t)})}function CY(t){var r=t.getSnapshot;t=t.value;try{var o=r();return!Jc(t,o)}catch{return!0}}function bY(t){var r=hu(t,1);r!==null&&Kc(r,t,1,-1)}function m7(t){var r=Il();return typeof t=="function"&&(t=t()),r.memoizedState=r.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ev,lastRenderedState:t},r.queue=t,t=t.dispatch=nEe.bind(null,Fi,t),[r.memoizedState,t]}function _v(t,r,o,s){return t={tag:t,create:r,destroy:o,deps:s,next:null},r=Fi.updateQueue,r===null?(r={lastEffect:null,stores:null},Fi.updateQueue=r,r.lastEffect=t.next=t):(o=r.lastEffect,o===null?r.lastEffect=t.next=t:(s=o.next,o.next=t,t.next=s,r.lastEffect=t)),t}function TY(){return pc().memoizedState}function nC(t,r,o,s){var c=Il();Fi.flags|=t,c.memoizedState=_v(1|r,o,void 0,s===void 0?null:s)}function kb(t,r,o,s){var c=pc();s=s===void 0?null:s;var d=void 0;if(Ro!==null){var f=Ro.memoizedState;if(d=f.destroy,s!==null&&n2(s,f.deps)){c.memoizedState=_v(r,o,d,s);return}}Fi.flags|=t,c.memoizedState=_v(1|r,o,d,s)}function g7(t,r){return nC(8390656,8,t,r)}function o2(t,r){return kb(2048,8,t,r)}function RY(t,r){return kb(4,2,t,r)}function wY(t,r){return kb(4,4,t,r)}function IY(t,r){if(typeof r=="function")return t=t(),r(t),function(){r(null)};if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function AY(t,r,o){return o=o!=null?o.concat([t]):null,kb(4,4,IY.bind(null,r,t),o)}function a2(){}function OY(t,r){var o=pc();r=r===void 0?null:r;var s=o.memoizedState;return s!==null&&r!==null&&n2(r,s[1])?s[0]:(o.memoizedState=[t,r],t)}function xY(t,r){var o=pc();r=r===void 0?null:r;var s=o.memoizedState;return s!==null&&r!==null&&n2(r,s[1])?s[0]:(t=t(),o.memoizedState=[t,r],t)}function NY(t,r,o){return Vh&21?(Jc(o,r)||(o=MK(),Fi.lanes|=o,jh|=o,t.baseState=!0),r):(t.baseState&&(t.baseState=!1,Za=!0),t.memoizedState=o)}function eEe(t,r){var o=Xr;Xr=o!==0&&4>o?o:4,t(!0);var s=SO.transition;SO.transition={};try{t(!1),r()}finally{Xr=o,SO.transition=s}}function PY(){return pc().memoizedState}function tEe(t,r,o){var s=Rd(t);if(o={lane:s,action:o,hasEagerState:!1,eagerState:null,next:null},DY(t))LY(r,o);else if(o=pY(t,r,o,s),o!==null){var c=Oa();Kc(o,t,s,c),kY(o,r,s)}}function nEe(t,r,o){var s=Rd(t),c={lane:s,action:o,hasEagerState:!1,eagerState:null,next:null};if(DY(t))LY(r,c);else{var d=t.alternate;if(t.lanes===0&&(d===null||d.lanes===0)&&(d=r.lastRenderedReducer,d!==null))try{var f=r.lastRenderedState,v=d(f,o);if(c.hasEagerState=!0,c.eagerState=v,Jc(v,f)){var g=r.interleaved;g===null?(c.next=c,JD(r)):(c.next=g.next,g.next=c),r.interleaved=c;return}}catch{}finally{}o=pY(t,r,c,s),o!==null&&(c=Oa(),Kc(o,t,s,c),kY(o,r,s))}}function DY(t){var r=t.alternate;return t===Fi||r!==null&&r===Fi}function LY(t,r){Yg=VC=!0;var o=t.pending;o===null?r.next=r:(r.next=o.next,o.next=r),t.pending=r}function kY(t,r,o){if(o&4194240){var s=r.lanes;s&=t.pendingLanes,o|=s,r.lanes=o,FD(t,o)}}var jC={readContext:fc,useCallback:fa,useContext:fa,useEffect:fa,useImperativeHandle:fa,useInsertionEffect:fa,useLayoutEffect:fa,useMemo:fa,useReducer:fa,useRef:fa,useState:fa,useDebugValue:fa,useDeferredValue:fa,useTransition:fa,useMutableSource:fa,useSyncExternalStore:fa,useId:fa,unstable_isNewReconciler:!1},rEe={readContext:fc,useCallback:function(t,r){return Il().memoizedState=[t,r===void 0?null:r],t},useContext:fc,useEffect:g7,useImperativeHandle:function(t,r,o){return o=o!=null?o.concat([t]):null,nC(4194308,4,IY.bind(null,r,t),o)},useLayoutEffect:function(t,r){return nC(4194308,4,t,r)},useInsertionEffect:function(t,r){return nC(4,2,t,r)},useMemo:function(t,r){var o=Il();return r=r===void 0?null:r,t=t(),o.memoizedState=[t,r],t},useReducer:function(t,r,o){var s=Il();return r=o!==void 0?o(r):r,s.memoizedState=s.baseState=r,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},s.queue=t,t=t.dispatch=tEe.bind(null,Fi,t),[s.memoizedState,t]},useRef:function(t){var r=Il();return t={current:t},r.memoizedState=t},useState:m7,useDebugValue:a2,useDeferredValue:function(t){return Il().memoizedState=t},useTransition:function(){var t=m7(!1),r=t[0];return t=eEe.bind(null,t[1]),Il().memoizedState=t,[r,t]},useMutableSource:function(){},useSyncExternalStore:function(t,r,o){var s=Fi,c=Il();if(Oi){if(o===void 0)throw Error(yt(407));o=o()}else{if(o=r(),Bo===null)throw Error(yt(349));Vh&30||_Y(s,r,o)}c.memoizedState=o;var d={value:o,getSnapshot:r};return c.queue=d,g7(yY.bind(null,s,d,t),[t]),s.flags|=2048,_v(9,SY.bind(null,s,d,o,r),void 0,null),o},useId:function(){var t=Il(),r=Bo.identifierPrefix;if(Oi){var o=au,s=ou;o=(s&~(1<<32-Gc(s)-1)).toString(32)+o,r=":"+r+"R"+o,o=vv++,0<o&&(r+="H"+o.toString(32)),r+=":"}else o=Zve++,r=":"+r+"r"+o.toString(32)+":";return t.memoizedState=r},unstable_isNewReconciler:!1},iEe={readContext:fc,useCallback:OY,useContext:fc,useEffect:o2,useImperativeHandle:AY,useInsertionEffect:RY,useLayoutEffect:wY,useMemo:xY,useReducer:yO,useRef:TY,useState:function(){return yO(Ev)},useDebugValue:a2,useDeferredValue:function(t){var r=pc();return NY(r,Ro.memoizedState,t)},useTransition:function(){var t=yO(Ev)[0],r=pc().memoizedState;return[t,r]},useMutableSource:vY,useSyncExternalStore:EY,useId:PY,unstable_isNewReconciler:!1},oEe={readContext:fc,useCallback:OY,useContext:fc,useEffect:o2,useImperativeHandle:AY,useInsertionEffect:RY,useLayoutEffect:wY,useMemo:xY,useReducer:CO,useRef:TY,useState:function(){return CO(Ev)},useDebugValue:a2,useDeferredValue:function(t){var r=pc();return Ro===null?r.memoizedState=t:NY(r,Ro.memoizedState,t)},useTransition:function(){var t=CO(Ev)[0],r=pc().memoizedState;return[t,r]},useMutableSource:vY,useSyncExternalStore:EY,useId:PY,unstable_isNewReconciler:!1};function Vc(t,r){if(t&&t.defaultProps){r=Ui({},r),t=t.defaultProps;for(var o in t)r[o]===void 0&&(r[o]=t[o]);return r}return r}function VN(t,r,o,s){r=t.memoizedState,o=o(s,r),o=o==null?r:Ui({},r,o),t.memoizedState=o,t.lanes===0&&(t.updateQueue.baseState=o)}var Mb={isMounted:function(t){return(t=t._reactInternals)?Jh(t)===t:!1},enqueueSetState:function(t,r,o){t=t._reactInternals;var s=Oa(),c=Rd(t),d=su(s,c);d.payload=r,o!=null&&(d.callback=o),r=bd(t,d,c),r!==null&&(Kc(r,t,c,s),eC(r,t,c))},enqueueReplaceState:function(t,r,o){t=t._reactInternals;var s=Oa(),c=Rd(t),d=su(s,c);d.tag=1,d.payload=r,o!=null&&(d.callback=o),r=bd(t,d,c),r!==null&&(Kc(r,t,c,s),eC(r,t,c))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var o=Oa(),s=Rd(t),c=su(o,s);c.tag=2,r!=null&&(c.callback=r),r=bd(t,c,s),r!==null&&(Kc(r,t,s,o),eC(r,t,s))}};function v7(t,r,o,s,c,d,f){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,d,f):r.prototype&&r.prototype.isPureReactComponent?!dv(o,s)||!dv(c,d):!0}function MY(t,r,o){var s=!1,c=Ad,d=r.contextType;return typeof d=="object"&&d!==null?d=fc(d):(c=ns(r)?Uh:ya.current,s=r.contextTypes,d=(s=s!=null)?cm(t,c):Ad),r=new r(o,d),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Mb,t.stateNode=r,r._reactInternals=t,s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=c,t.__reactInternalMemoizedMaskedChildContext=d),r}function E7(t,r,o,s){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,s),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,s),r.state!==t&&Mb.enqueueReplaceState(r,r.state,null)}function jN(t,r,o,s){var c=t.stateNode;c.props=o,c.state=t.memoizedState,c.refs={},QD(t);var d=r.contextType;typeof d=="object"&&d!==null?c.context=fc(d):(d=ns(r)?Uh:ya.current,c.context=cm(t,d)),c.state=t.memoizedState,d=r.getDerivedStateFromProps,typeof d=="function"&&(VN(t,r,d,o),c.state=t.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(r=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),r!==c.state&&Mb.enqueueReplaceState(c,c.state,null),UC(t,o,c,s),c.state=t.memoizedState),typeof c.componentDidMount=="function"&&(t.flags|=4194308)}function hm(t,r){try{var o="",s=r;do o+=Dge(s),s=s.return;while(s);var c=o}catch(d){c=`
Error generating stack: `+d.message+`
`+d.stack}return{value:t,source:r,stack:c,digest:null}}function bO(t,r,o){return{value:t,source:null,stack:o??null,digest:r??null}}function $N(t,r){try{console.error(r.value)}catch(o){setTimeout(function(){throw o})}}var aEe=typeof WeakMap=="function"?WeakMap:Map;function FY(t,r,o){o=su(-1,o),o.tag=3,o.payload={element:null};var s=r.value;return o.callback=function(){HC||(HC=!0,QN=s),$N(t,r)},o}function UY(t,r,o){o=su(-1,o),o.tag=3;var s=t.type.getDerivedStateFromError;if(typeof s=="function"){var c=r.value;o.payload=function(){return s(c)},o.callback=function(){$N(t,r)}}var d=t.stateNode;return d!==null&&typeof d.componentDidCatch=="function"&&(o.callback=function(){$N(t,r),typeof s!="function"&&(Td===null?Td=new Set([this]):Td.add(this));var f=r.stack;this.componentDidCatch(r.value,{componentStack:f!==null?f:""})}),o}function _7(t,r,o){var s=t.pingCache;if(s===null){s=t.pingCache=new aEe;var c=new Set;s.set(r,c)}else c=s.get(r),c===void 0&&(c=new Set,s.set(r,c));c.has(o)||(c.add(o),t=SEe.bind(null,t,r,o),r.then(t,t))}function S7(t){do{var r;if((r=t.tag===13)&&(r=t.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return t;t=t.return}while(t!==null);return null}function y7(t,r,o,s,c){return t.mode&1?(t.flags|=65536,t.lanes=c,t):(t===r?t.flags|=65536:(t.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(r=su(-1,1),r.tag=2,bd(o,r,1))),o.lanes|=1),t)}var sEe=vu.ReactCurrentOwner,Za=!1;function Aa(t,r,o,s){r.child=t===null?fY(r,null,o,s):um(r,t.child,o,s)}function C7(t,r,o,s,c){o=o.render;var d=r.ref;return nm(r,c),s=r2(t,r,o,s,d,c),o=i2(),t!==null&&!Za?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~c,fu(t,r,c)):(Oi&&o&&WD(r),r.flags|=1,Aa(t,r,s,c),r.child)}function b7(t,r,o,s,c){if(t===null){var d=o.type;return typeof d=="function"&&!p2(d)&&d.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(r.tag=15,r.type=d,BY(t,r,d,s,c)):(t=aC(o.type,null,s,r,r.mode,c),t.ref=r.ref,t.return=r,r.child=t)}if(d=t.child,!(t.lanes&c)){var f=d.memoizedProps;if(o=o.compare,o=o!==null?o:dv,o(f,s)&&t.ref===r.ref)return fu(t,r,c)}return r.flags|=1,t=wd(d,s),t.ref=r.ref,t.return=r,r.child=t}function BY(t,r,o,s,c){if(t!==null){var d=t.memoizedProps;if(dv(d,s)&&t.ref===r.ref)if(Za=!1,r.pendingProps=s=d,(t.lanes&c)!==0)t.flags&131072&&(Za=!0);else return r.lanes=t.lanes,fu(t,r,c)}return HN(t,r,o,s,c)}function VY(t,r,o){var s=r.pendingProps,c=s.children,d=t!==null?t.memoizedState:null;if(s.mode==="hidden")if(!(r.mode&1))r.memoizedState={baseLanes:0,cachePool:null,transitions:null},_i(Yp,Cs),Cs|=o;else{if(!(o&1073741824))return t=d!==null?d.baseLanes|o:o,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:t,cachePool:null,transitions:null},r.updateQueue=null,_i(Yp,Cs),Cs|=t,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=d!==null?d.baseLanes:o,_i(Yp,Cs),Cs|=s}else d!==null?(s=d.baseLanes|o,r.memoizedState=null):s=o,_i(Yp,Cs),Cs|=s;return Aa(t,r,c,o),r.child}function jY(t,r){var o=r.ref;(t===null&&o!==null||t!==null&&t.ref!==o)&&(r.flags|=512,r.flags|=2097152)}function HN(t,r,o,s,c){var d=ns(o)?Uh:ya.current;return d=cm(r,d),nm(r,c),o=r2(t,r,o,s,d,c),s=i2(),t!==null&&!Za?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~c,fu(t,r,c)):(Oi&&s&&WD(r),r.flags|=1,Aa(t,r,o,c),r.child)}function T7(t,r,o,s,c){if(ns(o)){var d=!0;DC(r)}else d=!1;if(nm(r,c),r.stateNode===null)rC(t,r),MY(r,o,s),jN(r,o,s,c),s=!0;else if(t===null){var f=r.stateNode,v=r.memoizedProps;f.props=v;var g=f.context,_=o.contextType;typeof _=="object"&&_!==null?_=fc(_):(_=ns(o)?Uh:ya.current,_=cm(r,_));var C=o.getDerivedStateFromProps,b=typeof C=="function"||typeof f.getSnapshotBeforeUpdate=="function";b||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(v!==s||g!==_)&&E7(r,f,s,_),ud=!1;var T=r.memoizedState;f.state=T,UC(r,s,f,c),g=r.memoizedState,v!==s||T!==g||ts.current||ud?(typeof C=="function"&&(VN(r,o,C,s),g=r.memoizedState),(v=ud||v7(r,o,v,s,T,g,_))?(b||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(r.flags|=4194308)):(typeof f.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=s,r.memoizedState=g),f.props=s,f.state=g,f.context=_,s=v):(typeof f.componentDidMount=="function"&&(r.flags|=4194308),s=!1)}else{f=r.stateNode,mY(t,r),v=r.memoizedProps,_=r.type===r.elementType?v:Vc(r.type,v),f.props=_,b=r.pendingProps,T=f.context,g=o.contextType,typeof g=="object"&&g!==null?g=fc(g):(g=ns(o)?Uh:ya.current,g=cm(r,g));var A=o.getDerivedStateFromProps;(C=typeof A=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(v!==b||T!==g)&&E7(r,f,s,g),ud=!1,T=r.memoizedState,f.state=T,UC(r,s,f,c);var I=r.memoizedState;v!==b||T!==I||ts.current||ud?(typeof A=="function"&&(VN(r,o,A,s),I=r.memoizedState),(_=ud||v7(r,o,_,s,T,I,g)||!1)?(C||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(s,I,g),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(s,I,g)),typeof f.componentDidUpdate=="function"&&(r.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof f.componentDidUpdate!="function"||v===t.memoizedProps&&T===t.memoizedState||(r.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&T===t.memoizedState||(r.flags|=1024),r.memoizedProps=s,r.memoizedState=I),f.props=s,f.state=I,f.context=g,s=_):(typeof f.componentDidUpdate!="function"||v===t.memoizedProps&&T===t.memoizedState||(r.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&T===t.memoizedState||(r.flags|=1024),s=!1)}return zN(t,r,o,s,d,c)}function zN(t,r,o,s,c,d){jY(t,r);var f=(r.flags&128)!==0;if(!s&&!f)return c&&l7(r,o,!1),fu(t,r,d);s=r.stateNode,sEe.current=r;var v=f&&typeof o.getDerivedStateFromError!="function"?null:s.render();return r.flags|=1,t!==null&&f?(r.child=um(r,t.child,null,d),r.child=um(r,null,v,d)):Aa(t,r,v,d),r.memoizedState=s.state,c&&l7(r,o,!0),r.child}function $Y(t){var r=t.stateNode;r.pendingContext?c7(t,r.pendingContext,r.pendingContext!==r.context):r.context&&c7(t,r.context,!1),ZD(t,r.containerInfo)}function R7(t,r,o,s,c){return lm(),KD(c),r.flags|=256,Aa(t,r,o,s),r.child}var WN={dehydrated:null,treeContext:null,retryLane:0};function GN(t){return{baseLanes:t,cachePool:null,transitions:null}}function HY(t,r,o){var s=r.pendingProps,c=Mi.current,d=!1,f=(r.flags&128)!==0,v;if((v=f)||(v=t!==null&&t.memoizedState===null?!1:(c&2)!==0),v?(d=!0,r.flags&=-129):(t===null||t.memoizedState!==null)&&(c|=1),_i(Mi,c&1),t===null)return UN(r),t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(r.mode&1?t.data==="$!"?r.lanes=8:r.lanes=1073741824:r.lanes=1,null):(f=s.children,t=s.fallback,d?(s=r.mode,d=r.child,f={mode:"hidden",children:f},!(s&1)&&d!==null?(d.childLanes=0,d.pendingProps=f):d=Bb(f,s,0,null),t=Lh(t,s,o,null),d.return=r,t.return=r,d.sibling=t,r.child=d,r.child.memoizedState=GN(o),r.memoizedState=WN,t):s2(r,f));if(c=t.memoizedState,c!==null&&(v=c.dehydrated,v!==null))return cEe(t,r,f,s,v,c,o);if(d){d=s.fallback,f=r.mode,c=t.child,v=c.sibling;var g={mode:"hidden",children:s.children};return!(f&1)&&r.child!==c?(s=r.child,s.childLanes=0,s.pendingProps=g,r.deletions=null):(s=wd(c,g),s.subtreeFlags=c.subtreeFlags&14680064),v!==null?d=wd(v,d):(d=Lh(d,f,o,null),d.flags|=2),d.return=r,s.return=r,s.sibling=d,r.child=s,s=d,d=r.child,f=t.child.memoizedState,f=f===null?GN(o):{baseLanes:f.baseLanes|o,cachePool:null,transitions:f.transitions},d.memoizedState=f,d.childLanes=t.childLanes&~o,r.memoizedState=WN,s}return d=t.child,t=d.sibling,s=wd(d,{mode:"visible",children:s.children}),!(r.mode&1)&&(s.lanes=o),s.return=r,s.sibling=null,t!==null&&(o=r.deletions,o===null?(r.deletions=[t],r.flags|=16):o.push(t)),r.child=s,r.memoizedState=null,s}function s2(t,r){return r=Bb({mode:"visible",children:r},t.mode,0,null),r.return=t,t.child=r}function Ty(t,r,o,s){return s!==null&&KD(s),um(r,t.child,null,o),t=s2(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function cEe(t,r,o,s,c,d,f){if(o)return r.flags&256?(r.flags&=-257,s=bO(Error(yt(422))),Ty(t,r,f,s)):r.memoizedState!==null?(r.child=t.child,r.flags|=128,null):(d=s.fallback,c=r.mode,s=Bb({mode:"visible",children:s.children},c,0,null),d=Lh(d,c,f,null),d.flags|=2,s.return=r,d.return=r,s.sibling=d,r.child=s,r.mode&1&&um(r,t.child,null,f),r.child.memoizedState=GN(f),r.memoizedState=WN,d);if(!(r.mode&1))return Ty(t,r,f,null);if(c.data==="$!"){if(s=c.nextSibling&&c.nextSibling.dataset,s)var v=s.dgst;return s=v,d=Error(yt(419)),s=bO(d,s,void 0),Ty(t,r,f,s)}if(v=(f&t.childLanes)!==0,Za||v){if(s=Bo,s!==null){switch(f&-f){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}c=c&(s.suspendedLanes|f)?0:c,c!==0&&c!==d.retryLane&&(d.retryLane=c,hu(t,c),Kc(s,t,c,-1))}return f2(),s=bO(Error(yt(421))),Ty(t,r,f,s)}return c.data==="$?"?(r.flags|=128,r.child=t.child,r=yEe.bind(null,t),c._reactRetry=r,null):(t=d.treeContext,bs=Cd(c.nextSibling),Rs=r,Oi=!0,zc=null,t!==null&&(sc[cc++]=ou,sc[cc++]=au,sc[cc++]=Bh,ou=t.id,au=t.overflow,Bh=r),r=s2(r,s.children),r.flags|=4096,r)}function w7(t,r,o){t.lanes|=r;var s=t.alternate;s!==null&&(s.lanes|=r),BN(t.return,r,o)}function TO(t,r,o,s,c){var d=t.memoizedState;d===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:s,tail:o,tailMode:c}:(d.isBackwards=r,d.rendering=null,d.renderingStartTime=0,d.last=s,d.tail=o,d.tailMode=c)}function zY(t,r,o){var s=r.pendingProps,c=s.revealOrder,d=s.tail;if(Aa(t,r,s.children,o),s=Mi.current,s&2)s=s&1|2,r.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&w7(t,o,r);else if(t.tag===19)w7(t,o,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}s&=1}if(_i(Mi,s),!(r.mode&1))r.memoizedState=null;else switch(c){case"forwards":for(o=r.child,c=null;o!==null;)t=o.alternate,t!==null&&BC(t)===null&&(c=o),o=o.sibling;o=c,o===null?(c=r.child,r.child=null):(c=o.sibling,o.sibling=null),TO(r,!1,c,o,d);break;case"backwards":for(o=null,c=r.child,r.child=null;c!==null;){if(t=c.alternate,t!==null&&BC(t)===null){r.child=c;break}t=c.sibling,c.sibling=o,o=c,c=t}TO(r,!0,o,null,d);break;case"together":TO(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function rC(t,r){!(r.mode&1)&&t!==null&&(t.alternate=null,r.alternate=null,r.flags|=2)}function fu(t,r,o){if(t!==null&&(r.dependencies=t.dependencies),jh|=r.lanes,!(o&r.childLanes))return null;if(t!==null&&r.child!==t.child)throw Error(yt(153));if(r.child!==null){for(t=r.child,o=wd(t,t.pendingProps),r.child=o,o.return=r;t.sibling!==null;)t=t.sibling,o=o.sibling=wd(t,t.pendingProps),o.return=r;o.sibling=null}return r.child}function lEe(t,r,o){switch(r.tag){case 3:$Y(r),lm();break;case 5:gY(r);break;case 1:ns(r.type)&&DC(r);break;case 4:ZD(r,r.stateNode.containerInfo);break;case 10:var s=r.type._context,c=r.memoizedProps.value;_i(MC,s._currentValue),s._currentValue=c;break;case 13:if(s=r.memoizedState,s!==null)return s.dehydrated!==null?(_i(Mi,Mi.current&1),r.flags|=128,null):o&r.child.childLanes?HY(t,r,o):(_i(Mi,Mi.current&1),t=fu(t,r,o),t!==null?t.sibling:null);_i(Mi,Mi.current&1);break;case 19:if(s=(o&r.childLanes)!==0,t.flags&128){if(s)return zY(t,r,o);r.flags|=128}if(c=r.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),_i(Mi,Mi.current),s)break;return null;case 22:case 23:return r.lanes=0,VY(t,r,o)}return fu(t,r,o)}var WY,KN,GY,KY;WY=function(t,r){for(var o=r.child;o!==null;){if(o.tag===5||o.tag===6)t.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return;o=o.return}o.sibling.return=o.return,o=o.sibling}};KN=function(){};GY=function(t,r,o,s){var c=t.memoizedProps;if(c!==s){t=r.stateNode,Nh(Dl.current);var d=null;switch(o){case"input":c=mN(t,c),s=mN(t,s),d=[];break;case"select":c=Ui({},c,{value:void 0}),s=Ui({},s,{value:void 0}),d=[];break;case"textarea":c=EN(t,c),s=EN(t,s),d=[];break;default:typeof c.onClick!="function"&&typeof s.onClick=="function"&&(t.onclick=NC)}SN(o,s);var f;o=null;for(_ in c)if(!s.hasOwnProperty(_)&&c.hasOwnProperty(_)&&c[_]!=null)if(_==="style"){var v=c[_];for(f in v)v.hasOwnProperty(f)&&(o||(o={}),o[f]="")}else _!=="dangerouslySetInnerHTML"&&_!=="children"&&_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(iv.hasOwnProperty(_)?d||(d=[]):(d=d||[]).push(_,null));for(_ in s){var g=s[_];if(v=c!=null?c[_]:void 0,s.hasOwnProperty(_)&&g!==v&&(g!=null||v!=null))if(_==="style")if(v){for(f in v)!v.hasOwnProperty(f)||g&&g.hasOwnProperty(f)||(o||(o={}),o[f]="");for(f in g)g.hasOwnProperty(f)&&v[f]!==g[f]&&(o||(o={}),o[f]=g[f])}else o||(d||(d=[]),d.push(_,o)),o=g;else _==="dangerouslySetInnerHTML"?(g=g?g.__html:void 0,v=v?v.__html:void 0,g!=null&&v!==g&&(d=d||[]).push(_,g)):_==="children"?typeof g!="string"&&typeof g!="number"||(d=d||[]).push(_,""+g):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&(iv.hasOwnProperty(_)?(g!=null&&_==="onScroll"&&Ti("scroll",t),d||v===g||(d=[])):(d=d||[]).push(_,g))}o&&(d=d||[]).push("style",o);var _=d;(r.updateQueue=_)&&(r.flags|=4)}};KY=function(t,r,o,s){o!==s&&(r.flags|=4)};function yg(t,r){if(!Oi)switch(t.tailMode){case"hidden":r=t.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?t.tail=null:o.sibling=null;break;case"collapsed":o=t.tail;for(var s=null;o!==null;)o.alternate!==null&&(s=o),o=o.sibling;s===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function pa(t){var r=t.alternate!==null&&t.alternate.child===t.child,o=0,s=0;if(r)for(var c=t.child;c!==null;)o|=c.lanes|c.childLanes,s|=c.subtreeFlags&14680064,s|=c.flags&14680064,c.return=t,c=c.sibling;else for(c=t.child;c!==null;)o|=c.lanes|c.childLanes,s|=c.subtreeFlags,s|=c.flags,c.return=t,c=c.sibling;return t.subtreeFlags|=s,t.childLanes=o,r}function uEe(t,r,o){var s=r.pendingProps;switch(GD(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pa(r),null;case 1:return ns(r.type)&&PC(),pa(r),null;case 3:return s=r.stateNode,dm(),Ri(ts),Ri(ya),t2(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(Cy(r)?r.flags|=4:t===null||t.memoizedState.isDehydrated&&!(r.flags&256)||(r.flags|=1024,zc!==null&&(tP(zc),zc=null))),KN(t,r),pa(r),null;case 5:e2(r);var c=Nh(gv.current);if(o=r.type,t!==null&&r.stateNode!=null)GY(t,r,o,s,c),t.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!s){if(r.stateNode===null)throw Error(yt(166));return pa(r),null}if(t=Nh(Dl.current),Cy(r)){s=r.stateNode,o=r.type;var d=r.memoizedProps;switch(s[Nl]=r,s[pv]=d,t=(r.mode&1)!==0,o){case"dialog":Ti("cancel",s),Ti("close",s);break;case"iframe":case"object":case"embed":Ti("load",s);break;case"video":case"audio":for(c=0;c<Bg.length;c++)Ti(Bg[c],s);break;case"source":Ti("error",s);break;case"img":case"image":case"link":Ti("error",s),Ti("load",s);break;case"details":Ti("toggle",s);break;case"input":kH(s,d),Ti("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!d.multiple},Ti("invalid",s);break;case"textarea":FH(s,d),Ti("invalid",s)}SN(o,d),c=null;for(var f in d)if(d.hasOwnProperty(f)){var v=d[f];f==="children"?typeof v=="string"?s.textContent!==v&&(d.suppressHydrationWarning!==!0&&yy(s.textContent,v,t),c=["children",v]):typeof v=="number"&&s.textContent!==""+v&&(d.suppressHydrationWarning!==!0&&yy(s.textContent,v,t),c=["children",""+v]):iv.hasOwnProperty(f)&&v!=null&&f==="onScroll"&&Ti("scroll",s)}switch(o){case"input":fy(s),MH(s,d,!0);break;case"textarea":fy(s),UH(s);break;case"select":case"option":break;default:typeof d.onClick=="function"&&(s.onclick=NC)}s=c,r.updateQueue=s,s!==null&&(r.flags|=4)}else{f=c.nodeType===9?c:c.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=yK(o)),t==="http://www.w3.org/1999/xhtml"?o==="script"?(t=f.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof s.is=="string"?t=f.createElement(o,{is:s.is}):(t=f.createElement(o),o==="select"&&(f=t,s.multiple?f.multiple=!0:s.size&&(f.size=s.size))):t=f.createElementNS(t,o),t[Nl]=r,t[pv]=s,WY(t,r,!1,!1),r.stateNode=t;e:{switch(f=yN(o,s),o){case"dialog":Ti("cancel",t),Ti("close",t),c=s;break;case"iframe":case"object":case"embed":Ti("load",t),c=s;break;case"video":case"audio":for(c=0;c<Bg.length;c++)Ti(Bg[c],t);c=s;break;case"source":Ti("error",t),c=s;break;case"img":case"image":case"link":Ti("error",t),Ti("load",t),c=s;break;case"details":Ti("toggle",t),c=s;break;case"input":kH(t,s),c=mN(t,s),Ti("invalid",t);break;case"option":c=s;break;case"select":t._wrapperState={wasMultiple:!!s.multiple},c=Ui({},s,{value:void 0}),Ti("invalid",t);break;case"textarea":FH(t,s),c=EN(t,s),Ti("invalid",t);break;default:c=s}SN(o,c),v=c;for(d in v)if(v.hasOwnProperty(d)){var g=v[d];d==="style"?TK(t,g):d==="dangerouslySetInnerHTML"?(g=g?g.__html:void 0,g!=null&&CK(t,g)):d==="children"?typeof g=="string"?(o!=="textarea"||g!=="")&&ov(t,g):typeof g=="number"&&ov(t,""+g):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(iv.hasOwnProperty(d)?g!=null&&d==="onScroll"&&Ti("scroll",t):g!=null&&ND(t,d,g,f))}switch(o){case"input":fy(t),MH(t,s,!1);break;case"textarea":fy(t),UH(t);break;case"option":s.value!=null&&t.setAttribute("value",""+Id(s.value));break;case"select":t.multiple=!!s.multiple,d=s.value,d!=null?Qp(t,!!s.multiple,d,!1):s.defaultValue!=null&&Qp(t,!!s.multiple,s.defaultValue,!0);break;default:typeof c.onClick=="function"&&(t.onclick=NC)}switch(o){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return pa(r),null;case 6:if(t&&r.stateNode!=null)KY(t,r,t.memoizedProps,s);else{if(typeof s!="string"&&r.stateNode===null)throw Error(yt(166));if(o=Nh(gv.current),Nh(Dl.current),Cy(r)){if(s=r.stateNode,o=r.memoizedProps,s[Nl]=r,(d=s.nodeValue!==o)&&(t=Rs,t!==null))switch(t.tag){case 3:yy(s.nodeValue,o,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&yy(s.nodeValue,o,(t.mode&1)!==0)}d&&(r.flags|=4)}else s=(o.nodeType===9?o:o.ownerDocument).createTextNode(s),s[Nl]=r,r.stateNode=s}return pa(r),null;case 13:if(Ri(Mi),s=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Oi&&bs!==null&&r.mode&1&&!(r.flags&128))dY(),lm(),r.flags|=98560,d=!1;else if(d=Cy(r),s!==null&&s.dehydrated!==null){if(t===null){if(!d)throw Error(yt(318));if(d=r.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(yt(317));d[Nl]=r}else lm(),!(r.flags&128)&&(r.memoizedState=null),r.flags|=4;pa(r),d=!1}else zc!==null&&(tP(zc),zc=null),d=!0;if(!d)return r.flags&65536?r:null}return r.flags&128?(r.lanes=o,r):(s=s!==null,s!==(t!==null&&t.memoizedState!==null)&&s&&(r.child.flags|=8192,r.mode&1&&(t===null||Mi.current&1?wo===0&&(wo=3):f2())),r.updateQueue!==null&&(r.flags|=4),pa(r),null);case 4:return dm(),KN(t,r),t===null&&hv(r.stateNode.containerInfo),pa(r),null;case 10:return XD(r.type._context),pa(r),null;case 17:return ns(r.type)&&PC(),pa(r),null;case 19:if(Ri(Mi),d=r.memoizedState,d===null)return pa(r),null;if(s=(r.flags&128)!==0,f=d.rendering,f===null)if(s)yg(d,!1);else{if(wo!==0||t!==null&&t.flags&128)for(t=r.child;t!==null;){if(f=BC(t),f!==null){for(r.flags|=128,yg(d,!1),s=f.updateQueue,s!==null&&(r.updateQueue=s,r.flags|=4),r.subtreeFlags=0,s=o,o=r.child;o!==null;)d=o,t=s,d.flags&=14680066,f=d.alternate,f===null?(d.childLanes=0,d.lanes=t,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=f.childLanes,d.lanes=f.lanes,d.child=f.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=f.memoizedProps,d.memoizedState=f.memoizedState,d.updateQueue=f.updateQueue,d.type=f.type,t=f.dependencies,d.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),o=o.sibling;return _i(Mi,Mi.current&1|2),r.child}t=t.sibling}d.tail!==null&&no()>fm&&(r.flags|=128,s=!0,yg(d,!1),r.lanes=4194304)}else{if(!s)if(t=BC(f),t!==null){if(r.flags|=128,s=!0,o=t.updateQueue,o!==null&&(r.updateQueue=o,r.flags|=4),yg(d,!0),d.tail===null&&d.tailMode==="hidden"&&!f.alternate&&!Oi)return pa(r),null}else 2*no()-d.renderingStartTime>fm&&o!==1073741824&&(r.flags|=128,s=!0,yg(d,!1),r.lanes=4194304);d.isBackwards?(f.sibling=r.child,r.child=f):(o=d.last,o!==null?o.sibling=f:r.child=f,d.last=f)}return d.tail!==null?(r=d.tail,d.rendering=r,d.tail=r.sibling,d.renderingStartTime=no(),r.sibling=null,o=Mi.current,_i(Mi,s?o&1|2:o&1),r):(pa(r),null);case 22:case 23:return h2(),s=r.memoizedState!==null,t!==null&&t.memoizedState!==null!==s&&(r.flags|=8192),s&&r.mode&1?Cs&1073741824&&(pa(r),r.subtreeFlags&6&&(r.flags|=8192)):pa(r),null;case 24:return null;case 25:return null}throw Error(yt(156,r.tag))}function dEe(t,r){switch(GD(r),r.tag){case 1:return ns(r.type)&&PC(),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return dm(),Ri(ts),Ri(ya),t2(),t=r.flags,t&65536&&!(t&128)?(r.flags=t&-65537|128,r):null;case 5:return e2(r),null;case 13:if(Ri(Mi),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(yt(340));lm()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return Ri(Mi),null;case 4:return dm(),null;case 10:return XD(r.type._context),null;case 22:case 23:return h2(),null;case 24:return null;default:return null}}var Ry=!1,va=!1,hEe=typeof WeakSet=="function"?WeakSet:Set,rn=null;function Kp(t,r){var o=t.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(s){Ki(t,r,s)}else o.current=null}function YN(t,r,o){try{o()}catch(s){Ki(t,r,s)}}var I7=!1;function fEe(t,r){if(NN=AC,t=QK(),zD(t)){if("selectionStart"in t)var o={start:t.selectionStart,end:t.selectionEnd};else e:{o=(o=t.ownerDocument)&&o.defaultView||window;var s=o.getSelection&&o.getSelection();if(s&&s.rangeCount!==0){o=s.anchorNode;var c=s.anchorOffset,d=s.focusNode;s=s.focusOffset;try{o.nodeType,d.nodeType}catch{o=null;break e}var f=0,v=-1,g=-1,_=0,C=0,b=t,T=null;t:for(;;){for(var A;b!==o||c!==0&&b.nodeType!==3||(v=f+c),b!==d||s!==0&&b.nodeType!==3||(g=f+s),b.nodeType===3&&(f+=b.nodeValue.length),(A=b.firstChild)!==null;)T=b,b=A;for(;;){if(b===t)break t;if(T===o&&++_===c&&(v=f),T===d&&++C===s&&(g=f),(A=b.nextSibling)!==null)break;b=T,T=b.parentNode}b=A}o=v===-1||g===-1?null:{start:v,end:g}}else o=null}o=o||{start:0,end:0}}else o=null;for(PN={focusedElem:t,selectionRange:o},AC=!1,rn=r;rn!==null;)if(r=rn,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,rn=t;else for(;rn!==null;){r=rn;try{var I=r.alternate;if(r.flags&1024)switch(r.tag){case 0:case 11:case 15:break;case 1:if(I!==null){var N=I.memoizedProps,P=I.memoizedState,D=r.stateNode,x=D.getSnapshotBeforeUpdate(r.elementType===r.type?N:Vc(r.type,N),P);D.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var L=r.stateNode.containerInfo;L.nodeType===1?L.textContent="":L.nodeType===9&&L.documentElement&&L.removeChild(L.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(yt(163))}}catch(M){Ki(r,r.return,M)}if(t=r.sibling,t!==null){t.return=r.return,rn=t;break}rn=r.return}return I=I7,I7=!1,I}function qg(t,r,o){var s=r.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var c=s=s.next;do{if((c.tag&t)===t){var d=c.destroy;c.destroy=void 0,d!==void 0&&YN(r,o,d)}c=c.next}while(c!==s)}}function Fb(t,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&t)===t){var s=o.create;o.destroy=s()}o=o.next}while(o!==r)}}function qN(t){var r=t.ref;if(r!==null){var o=t.stateNode;switch(t.tag){case 5:t=o;break;default:t=o}typeof r=="function"?r(t):r.current=t}}function YY(t){var r=t.alternate;r!==null&&(t.alternate=null,YY(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&(delete r[Nl],delete r[pv],delete r[kN],delete r[qve],delete r[Xve])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function qY(t){return t.tag===5||t.tag===3||t.tag===4}function A7(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||qY(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function XN(t,r,o){var s=t.tag;if(s===5||s===6)t=t.stateNode,r?o.nodeType===8?o.parentNode.insertBefore(t,r):o.insertBefore(t,r):(o.nodeType===8?(r=o.parentNode,r.insertBefore(t,o)):(r=o,r.appendChild(t)),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=NC));else if(s!==4&&(t=t.child,t!==null))for(XN(t,r,o),t=t.sibling;t!==null;)XN(t,r,o),t=t.sibling}function JN(t,r,o){var s=t.tag;if(s===5||s===6)t=t.stateNode,r?o.insertBefore(t,r):o.appendChild(t);else if(s!==4&&(t=t.child,t!==null))for(JN(t,r,o),t=t.sibling;t!==null;)JN(t,r,o),t=t.sibling}var Zo=null,jc=!1;function od(t,r,o){for(o=o.child;o!==null;)XY(t,r,o),o=o.sibling}function XY(t,r,o){if(Pl&&typeof Pl.onCommitFiberUnmount=="function")try{Pl.onCommitFiberUnmount(Ob,o)}catch{}switch(o.tag){case 5:va||Kp(o,r);case 6:var s=Zo,c=jc;Zo=null,od(t,r,o),Zo=s,jc=c,Zo!==null&&(jc?(t=Zo,o=o.stateNode,t.nodeType===8?t.parentNode.removeChild(o):t.removeChild(o)):Zo.removeChild(o.stateNode));break;case 18:Zo!==null&&(jc?(t=Zo,o=o.stateNode,t.nodeType===8?vO(t.parentNode,o):t.nodeType===1&&vO(t,o),lv(t)):vO(Zo,o.stateNode));break;case 4:s=Zo,c=jc,Zo=o.stateNode.containerInfo,jc=!0,od(t,r,o),Zo=s,jc=c;break;case 0:case 11:case 14:case 15:if(!va&&(s=o.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){c=s=s.next;do{var d=c,f=d.destroy;d=d.tag,f!==void 0&&(d&2||d&4)&&YN(o,r,f),c=c.next}while(c!==s)}od(t,r,o);break;case 1:if(!va&&(Kp(o,r),s=o.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=o.memoizedProps,s.state=o.memoizedState,s.componentWillUnmount()}catch(v){Ki(o,r,v)}od(t,r,o);break;case 21:od(t,r,o);break;case 22:o.mode&1?(va=(s=va)||o.memoizedState!==null,od(t,r,o),va=s):od(t,r,o);break;default:od(t,r,o)}}function O7(t){var r=t.updateQueue;if(r!==null){t.updateQueue=null;var o=t.stateNode;o===null&&(o=t.stateNode=new hEe),r.forEach(function(s){var c=CEe.bind(null,t,s);o.has(s)||(o.add(s),s.then(c,c))})}}function Bc(t,r){var o=r.deletions;if(o!==null)for(var s=0;s<o.length;s++){var c=o[s];try{var d=t,f=r,v=f;e:for(;v!==null;){switch(v.tag){case 5:Zo=v.stateNode,jc=!1;break e;case 3:Zo=v.stateNode.containerInfo,jc=!0;break e;case 4:Zo=v.stateNode.containerInfo,jc=!0;break e}v=v.return}if(Zo===null)throw Error(yt(160));XY(d,f,c),Zo=null,jc=!1;var g=c.alternate;g!==null&&(g.return=null),c.return=null}catch(_){Ki(c,r,_)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)JY(r,t),r=r.sibling}function JY(t,r){var o=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Bc(r,t),wl(t),s&4){try{qg(3,t,t.return),Fb(3,t)}catch(N){Ki(t,t.return,N)}try{qg(5,t,t.return)}catch(N){Ki(t,t.return,N)}}break;case 1:Bc(r,t),wl(t),s&512&&o!==null&&Kp(o,o.return);break;case 5:if(Bc(r,t),wl(t),s&512&&o!==null&&Kp(o,o.return),t.flags&32){var c=t.stateNode;try{ov(c,"")}catch(N){Ki(t,t.return,N)}}if(s&4&&(c=t.stateNode,c!=null)){var d=t.memoizedProps,f=o!==null?o.memoizedProps:d,v=t.type,g=t.updateQueue;if(t.updateQueue=null,g!==null)try{v==="input"&&d.type==="radio"&&d.name!=null&&_K(c,d),yN(v,f);var _=yN(v,d);for(f=0;f<g.length;f+=2){var C=g[f],b=g[f+1];C==="style"?TK(c,b):C==="dangerouslySetInnerHTML"?CK(c,b):C==="children"?ov(c,b):ND(c,C,b,_)}switch(v){case"input":gN(c,d);break;case"textarea":SK(c,d);break;case"select":var T=c._wrapperState.wasMultiple;c._wrapperState.wasMultiple=!!d.multiple;var A=d.value;A!=null?Qp(c,!!d.multiple,A,!1):T!==!!d.multiple&&(d.defaultValue!=null?Qp(c,!!d.multiple,d.defaultValue,!0):Qp(c,!!d.multiple,d.multiple?[]:"",!1))}c[pv]=d}catch(N){Ki(t,t.return,N)}}break;case 6:if(Bc(r,t),wl(t),s&4){if(t.stateNode===null)throw Error(yt(162));c=t.stateNode,d=t.memoizedProps;try{c.nodeValue=d}catch(N){Ki(t,t.return,N)}}break;case 3:if(Bc(r,t),wl(t),s&4&&o!==null&&o.memoizedState.isDehydrated)try{lv(r.containerInfo)}catch(N){Ki(t,t.return,N)}break;case 4:Bc(r,t),wl(t);break;case 13:Bc(r,t),wl(t),c=t.child,c.flags&8192&&(d=c.memoizedState!==null,c.stateNode.isHidden=d,!d||c.alternate!==null&&c.alternate.memoizedState!==null||(u2=no())),s&4&&O7(t);break;case 22:if(C=o!==null&&o.memoizedState!==null,t.mode&1?(va=(_=va)||C,Bc(r,t),va=_):Bc(r,t),wl(t),s&8192){if(_=t.memoizedState!==null,(t.stateNode.isHidden=_)&&!C&&t.mode&1)for(rn=t,C=t.child;C!==null;){for(b=rn=C;rn!==null;){switch(T=rn,A=T.child,T.tag){case 0:case 11:case 14:case 15:qg(4,T,T.return);break;case 1:Kp(T,T.return);var I=T.stateNode;if(typeof I.componentWillUnmount=="function"){s=T,o=T.return;try{r=s,I.props=r.memoizedProps,I.state=r.memoizedState,I.componentWillUnmount()}catch(N){Ki(s,o,N)}}break;case 5:Kp(T,T.return);break;case 22:if(T.memoizedState!==null){N7(b);continue}}A!==null?(A.return=T,rn=A):N7(b)}C=C.sibling}e:for(C=null,b=t;;){if(b.tag===5){if(C===null){C=b;try{c=b.stateNode,_?(d=c.style,typeof d.setProperty=="function"?d.setProperty("display","none","important"):d.display="none"):(v=b.stateNode,g=b.memoizedProps.style,f=g!=null&&g.hasOwnProperty("display")?g.display:null,v.style.display=bK("display",f))}catch(N){Ki(t,t.return,N)}}}else if(b.tag===6){if(C===null)try{b.stateNode.nodeValue=_?"":b.memoizedProps}catch(N){Ki(t,t.return,N)}}else if((b.tag!==22&&b.tag!==23||b.memoizedState===null||b===t)&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===t)break e;for(;b.sibling===null;){if(b.return===null||b.return===t)break e;C===b&&(C=null),b=b.return}C===b&&(C=null),b.sibling.return=b.return,b=b.sibling}}break;case 19:Bc(r,t),wl(t),s&4&&O7(t);break;case 21:break;default:Bc(r,t),wl(t)}}function wl(t){var r=t.flags;if(r&2){try{e:{for(var o=t.return;o!==null;){if(qY(o)){var s=o;break e}o=o.return}throw Error(yt(160))}switch(s.tag){case 5:var c=s.stateNode;s.flags&32&&(ov(c,""),s.flags&=-33);var d=A7(t);JN(t,d,c);break;case 3:case 4:var f=s.stateNode.containerInfo,v=A7(t);XN(t,v,f);break;default:throw Error(yt(161))}}catch(g){Ki(t,t.return,g)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function pEe(t,r,o){rn=t,QY(t)}function QY(t,r,o){for(var s=(t.mode&1)!==0;rn!==null;){var c=rn,d=c.child;if(c.tag===22&&s){var f=c.memoizedState!==null||Ry;if(!f){var v=c.alternate,g=v!==null&&v.memoizedState!==null||va;v=Ry;var _=va;if(Ry=f,(va=g)&&!_)for(rn=c;rn!==null;)f=rn,g=f.child,f.tag===22&&f.memoizedState!==null?P7(c):g!==null?(g.return=f,rn=g):P7(c);for(;d!==null;)rn=d,QY(d),d=d.sibling;rn=c,Ry=v,va=_}x7(t)}else c.subtreeFlags&8772&&d!==null?(d.return=c,rn=d):x7(t)}}function x7(t){for(;rn!==null;){var r=rn;if(r.flags&8772){var o=r.alternate;try{if(r.flags&8772)switch(r.tag){case 0:case 11:case 15:va||Fb(5,r);break;case 1:var s=r.stateNode;if(r.flags&4&&!va)if(o===null)s.componentDidMount();else{var c=r.elementType===r.type?o.memoizedProps:Vc(r.type,o.memoizedProps);s.componentDidUpdate(c,o.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var d=r.updateQueue;d!==null&&p7(r,d,s);break;case 3:var f=r.updateQueue;if(f!==null){if(o=null,r.child!==null)switch(r.child.tag){case 5:o=r.child.stateNode;break;case 1:o=r.child.stateNode}p7(r,f,o)}break;case 5:var v=r.stateNode;if(o===null&&r.flags&4){o=v;var g=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":g.autoFocus&&o.focus();break;case"img":g.src&&(o.src=g.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var _=r.alternate;if(_!==null){var C=_.memoizedState;if(C!==null){var b=C.dehydrated;b!==null&&lv(b)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(yt(163))}va||r.flags&512&&qN(r)}catch(T){Ki(r,r.return,T)}}if(r===t){rn=null;break}if(o=r.sibling,o!==null){o.return=r.return,rn=o;break}rn=r.return}}function N7(t){for(;rn!==null;){var r=rn;if(r===t){rn=null;break}var o=r.sibling;if(o!==null){o.return=r.return,rn=o;break}rn=r.return}}function P7(t){for(;rn!==null;){var r=rn;try{switch(r.tag){case 0:case 11:case 15:var o=r.return;try{Fb(4,r)}catch(g){Ki(r,o,g)}break;case 1:var s=r.stateNode;if(typeof s.componentDidMount=="function"){var c=r.return;try{s.componentDidMount()}catch(g){Ki(r,c,g)}}var d=r.return;try{qN(r)}catch(g){Ki(r,d,g)}break;case 5:var f=r.return;try{qN(r)}catch(g){Ki(r,f,g)}}}catch(g){Ki(r,r.return,g)}if(r===t){rn=null;break}var v=r.sibling;if(v!==null){v.return=r.return,rn=v;break}rn=r.return}}var mEe=Math.ceil,$C=vu.ReactCurrentDispatcher,c2=vu.ReactCurrentOwner,dc=vu.ReactCurrentBatchConfig,Pr=0,Bo=null,po=null,na=0,Cs=0,Yp=Dd(0),wo=0,Sv=null,jh=0,Ub=0,l2=0,Xg=null,Qa=null,u2=0,fm=1/0,ru=null,HC=!1,QN=null,Td=null,wy=!1,pd=null,zC=0,Jg=0,ZN=null,iC=-1,oC=0;function Oa(){return Pr&6?no():iC!==-1?iC:iC=no()}function Rd(t){return t.mode&1?Pr&2&&na!==0?na&-na:Qve.transition!==null?(oC===0&&(oC=MK()),oC):(t=Xr,t!==0||(t=window.event,t=t===void 0?16:HK(t.type)),t):1}function Kc(t,r,o,s){if(50<Jg)throw Jg=0,ZN=null,Error(yt(185));zv(t,o,s),(!(Pr&2)||t!==Bo)&&(t===Bo&&(!(Pr&2)&&(Ub|=o),wo===4&&hd(t,na)),rs(t,s),o===1&&Pr===0&&!(r.mode&1)&&(fm=no()+500,Lb&&Ld()))}function rs(t,r){var o=t.callbackNode;Qge(t,r);var s=IC(t,t===Bo?na:0);if(s===0)o!==null&&jH(o),t.callbackNode=null,t.callbackPriority=0;else if(r=s&-s,t.callbackPriority!==r){if(o!=null&&jH(o),r===1)t.tag===0?Jve(D7.bind(null,t)):cY(D7.bind(null,t)),Kve(function(){!(Pr&6)&&Ld()}),o=null;else{switch(FK(s)){case 1:o=MD;break;case 4:o=LK;break;case 16:o=wC;break;case 536870912:o=kK;break;default:o=wC}o=aq(o,ZY.bind(null,t))}t.callbackPriority=r,t.callbackNode=o}}function ZY(t,r){if(iC=-1,oC=0,Pr&6)throw Error(yt(327));var o=t.callbackNode;if(rm()&&t.callbackNode!==o)return null;var s=IC(t,t===Bo?na:0);if(s===0)return null;if(s&30||s&t.expiredLanes||r)r=WC(t,s);else{r=s;var c=Pr;Pr|=2;var d=tq();(Bo!==t||na!==r)&&(ru=null,fm=no()+500,Dh(t,r));do try{EEe();break}catch(v){eq(t,v)}while(1);qD(),$C.current=d,Pr=c,po!==null?r=0:(Bo=null,na=0,r=wo)}if(r!==0){if(r===2&&(c=wN(t),c!==0&&(s=c,r=eP(t,c))),r===1)throw o=Sv,Dh(t,0),hd(t,s),rs(t,no()),o;if(r===6)hd(t,s);else{if(c=t.current.alternate,!(s&30)&&!gEe(c)&&(r=WC(t,s),r===2&&(d=wN(t),d!==0&&(s=d,r=eP(t,d))),r===1))throw o=Sv,Dh(t,0),hd(t,s),rs(t,no()),o;switch(t.finishedWork=c,t.finishedLanes=s,r){case 0:case 1:throw Error(yt(345));case 2:wh(t,Qa,ru);break;case 3:if(hd(t,s),(s&130023424)===s&&(r=u2+500-no(),10<r)){if(IC(t,0)!==0)break;if(c=t.suspendedLanes,(c&s)!==s){Oa(),t.pingedLanes|=t.suspendedLanes&c;break}t.timeoutHandle=LN(wh.bind(null,t,Qa,ru),r);break}wh(t,Qa,ru);break;case 4:if(hd(t,s),(s&4194240)===s)break;for(r=t.eventTimes,c=-1;0<s;){var f=31-Gc(s);d=1<<f,f=r[f],f>c&&(c=f),s&=~d}if(s=c,s=no()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*mEe(s/1960))-s,10<s){t.timeoutHandle=LN(wh.bind(null,t,Qa,ru),s);break}wh(t,Qa,ru);break;case 5:wh(t,Qa,ru);break;default:throw Error(yt(329))}}}return rs(t,no()),t.callbackNode===o?ZY.bind(null,t):null}function eP(t,r){var o=Xg;return t.current.memoizedState.isDehydrated&&(Dh(t,r).flags|=256),t=WC(t,r),t!==2&&(r=Qa,Qa=o,r!==null&&tP(r)),t}function tP(t){Qa===null?Qa=t:Qa.push.apply(Qa,t)}function gEe(t){for(var r=t;;){if(r.flags&16384){var o=r.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var s=0;s<o.length;s++){var c=o[s],d=c.getSnapshot;c=c.value;try{if(!Jc(d(),c))return!1}catch{return!1}}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function hd(t,r){for(r&=~l2,r&=~Ub,t.suspendedLanes|=r,t.pingedLanes&=~r,t=t.expirationTimes;0<r;){var o=31-Gc(r),s=1<<o;t[o]=-1,r&=~s}}function D7(t){if(Pr&6)throw Error(yt(327));rm();var r=IC(t,0);if(!(r&1))return rs(t,no()),null;var o=WC(t,r);if(t.tag!==0&&o===2){var s=wN(t);s!==0&&(r=s,o=eP(t,s))}if(o===1)throw o=Sv,Dh(t,0),hd(t,r),rs(t,no()),o;if(o===6)throw Error(yt(345));return t.finishedWork=t.current.alternate,t.finishedLanes=r,wh(t,Qa,ru),rs(t,no()),null}function d2(t,r){var o=Pr;Pr|=1;try{return t(r)}finally{Pr=o,Pr===0&&(fm=no()+500,Lb&&Ld())}}function $h(t){pd!==null&&pd.tag===0&&!(Pr&6)&&rm();var r=Pr;Pr|=1;var o=dc.transition,s=Xr;try{if(dc.transition=null,Xr=1,t)return t()}finally{Xr=s,dc.transition=o,Pr=r,!(Pr&6)&&Ld()}}function h2(){Cs=Yp.current,Ri(Yp)}function Dh(t,r){t.finishedWork=null,t.finishedLanes=0;var o=t.timeoutHandle;if(o!==-1&&(t.timeoutHandle=-1,Gve(o)),po!==null)for(o=po.return;o!==null;){var s=o;switch(GD(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&PC();break;case 3:dm(),Ri(ts),Ri(ya),t2();break;case 5:e2(s);break;case 4:dm();break;case 13:Ri(Mi);break;case 19:Ri(Mi);break;case 10:XD(s.type._context);break;case 22:case 23:h2()}o=o.return}if(Bo=t,po=t=wd(t.current,null),na=Cs=r,wo=0,Sv=null,l2=Ub=jh=0,Qa=Xg=null,xh!==null){for(r=0;r<xh.length;r++)if(o=xh[r],s=o.interleaved,s!==null){o.interleaved=null;var c=s.next,d=o.pending;if(d!==null){var f=d.next;d.next=c,s.next=f}o.pending=s}xh=null}return t}function eq(t,r){do{var o=po;try{if(qD(),tC.current=jC,VC){for(var s=Fi.memoizedState;s!==null;){var c=s.queue;c!==null&&(c.pending=null),s=s.next}VC=!1}if(Vh=0,Uo=Ro=Fi=null,Yg=!1,vv=0,c2.current=null,o===null||o.return===null){wo=1,Sv=r,po=null;break}e:{var d=t,f=o.return,v=o,g=r;if(r=na,v.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){var _=g,C=v,b=C.tag;if(!(C.mode&1)&&(b===0||b===11||b===15)){var T=C.alternate;T?(C.updateQueue=T.updateQueue,C.memoizedState=T.memoizedState,C.lanes=T.lanes):(C.updateQueue=null,C.memoizedState=null)}var A=S7(f);if(A!==null){A.flags&=-257,y7(A,f,v,d,r),A.mode&1&&_7(d,_,r),r=A,g=_;var I=r.updateQueue;if(I===null){var N=new Set;N.add(g),r.updateQueue=N}else I.add(g);break e}else{if(!(r&1)){_7(d,_,r),f2();break e}g=Error(yt(426))}}else if(Oi&&v.mode&1){var P=S7(f);if(P!==null){!(P.flags&65536)&&(P.flags|=256),y7(P,f,v,d,r),KD(hm(g,v));break e}}d=g=hm(g,v),wo!==4&&(wo=2),Xg===null?Xg=[d]:Xg.push(d),d=f;do{switch(d.tag){case 3:d.flags|=65536,r&=-r,d.lanes|=r;var D=FY(d,g,r);f7(d,D);break e;case 1:v=g;var x=d.type,L=d.stateNode;if(!(d.flags&128)&&(typeof x.getDerivedStateFromError=="function"||L!==null&&typeof L.componentDidCatch=="function"&&(Td===null||!Td.has(L)))){d.flags|=65536,r&=-r,d.lanes|=r;var M=UY(d,v,r);f7(d,M);break e}}d=d.return}while(d!==null)}rq(o)}catch(F){r=F,po===o&&o!==null&&(po=o=o.return);continue}break}while(1)}function tq(){var t=$C.current;return $C.current=jC,t===null?jC:t}function f2(){(wo===0||wo===3||wo===2)&&(wo=4),Bo===null||!(jh&268435455)&&!(Ub&268435455)||hd(Bo,na)}function WC(t,r){var o=Pr;Pr|=2;var s=tq();(Bo!==t||na!==r)&&(ru=null,Dh(t,r));do try{vEe();break}catch(c){eq(t,c)}while(1);if(qD(),Pr=o,$C.current=s,po!==null)throw Error(yt(261));return Bo=null,na=0,wo}function vEe(){for(;po!==null;)nq(po)}function EEe(){for(;po!==null&&!Hge();)nq(po)}function nq(t){var r=oq(t.alternate,t,Cs);t.memoizedProps=t.pendingProps,r===null?rq(t):po=r,c2.current=null}function rq(t){var r=t;do{var o=r.alternate;if(t=r.return,r.flags&32768){if(o=dEe(o,r),o!==null){o.flags&=32767,po=o;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{wo=6,po=null;return}}else if(o=uEe(o,r,Cs),o!==null){po=o;return}if(r=r.sibling,r!==null){po=r;return}po=r=t}while(r!==null);wo===0&&(wo=5)}function wh(t,r,o){var s=Xr,c=dc.transition;try{dc.transition=null,Xr=1,_Ee(t,r,o,s)}finally{dc.transition=c,Xr=s}return null}function _Ee(t,r,o,s){do rm();while(pd!==null);if(Pr&6)throw Error(yt(327));o=t.finishedWork;var c=t.finishedLanes;if(o===null)return null;if(t.finishedWork=null,t.finishedLanes=0,o===t.current)throw Error(yt(177));t.callbackNode=null,t.callbackPriority=0;var d=o.lanes|o.childLanes;if(Zge(t,d),t===Bo&&(po=Bo=null,na=0),!(o.subtreeFlags&2064)&&!(o.flags&2064)||wy||(wy=!0,aq(wC,function(){return rm(),null})),d=(o.flags&15990)!==0,o.subtreeFlags&15990||d){d=dc.transition,dc.transition=null;var f=Xr;Xr=1;var v=Pr;Pr|=4,c2.current=null,fEe(t,o),JY(o,t),Bve(PN),AC=!!NN,PN=NN=null,t.current=o,pEe(o),zge(),Pr=v,Xr=f,dc.transition=d}else t.current=o;if(wy&&(wy=!1,pd=t,zC=c),d=t.pendingLanes,d===0&&(Td=null),Kge(o.stateNode),rs(t,no()),r!==null)for(s=t.onRecoverableError,o=0;o<r.length;o++)c=r[o],s(c.value,{componentStack:c.stack,digest:c.digest});if(HC)throw HC=!1,t=QN,QN=null,t;return zC&1&&t.tag!==0&&rm(),d=t.pendingLanes,d&1?t===ZN?Jg++:(Jg=0,ZN=t):Jg=0,Ld(),null}function rm(){if(pd!==null){var t=FK(zC),r=dc.transition,o=Xr;try{if(dc.transition=null,Xr=16>t?16:t,pd===null)var s=!1;else{if(t=pd,pd=null,zC=0,Pr&6)throw Error(yt(331));var c=Pr;for(Pr|=4,rn=t.current;rn!==null;){var d=rn,f=d.child;if(rn.flags&16){var v=d.deletions;if(v!==null){for(var g=0;g<v.length;g++){var _=v[g];for(rn=_;rn!==null;){var C=rn;switch(C.tag){case 0:case 11:case 15:qg(8,C,d)}var b=C.child;if(b!==null)b.return=C,rn=b;else for(;rn!==null;){C=rn;var T=C.sibling,A=C.return;if(YY(C),C===_){rn=null;break}if(T!==null){T.return=A,rn=T;break}rn=A}}}var I=d.alternate;if(I!==null){var N=I.child;if(N!==null){I.child=null;do{var P=N.sibling;N.sibling=null,N=P}while(N!==null)}}rn=d}}if(d.subtreeFlags&2064&&f!==null)f.return=d,rn=f;else e:for(;rn!==null;){if(d=rn,d.flags&2048)switch(d.tag){case 0:case 11:case 15:qg(9,d,d.return)}var D=d.sibling;if(D!==null){D.return=d.return,rn=D;break e}rn=d.return}}var x=t.current;for(rn=x;rn!==null;){f=rn;var L=f.child;if(f.subtreeFlags&2064&&L!==null)L.return=f,rn=L;else e:for(f=x;rn!==null;){if(v=rn,v.flags&2048)try{switch(v.tag){case 0:case 11:case 15:Fb(9,v)}}catch(F){Ki(v,v.return,F)}if(v===f){rn=null;break e}var M=v.sibling;if(M!==null){M.return=v.return,rn=M;break e}rn=v.return}}if(Pr=c,Ld(),Pl&&typeof Pl.onPostCommitFiberRoot=="function")try{Pl.onPostCommitFiberRoot(Ob,t)}catch{}s=!0}return s}finally{Xr=o,dc.transition=r}}return!1}function L7(t,r,o){r=hm(o,r),r=FY(t,r,1),t=bd(t,r,1),r=Oa(),t!==null&&(zv(t,1,r),rs(t,r))}function Ki(t,r,o){if(t.tag===3)L7(t,t,o);else for(;r!==null;){if(r.tag===3){L7(r,t,o);break}else if(r.tag===1){var s=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Td===null||!Td.has(s))){t=hm(o,t),t=UY(r,t,1),r=bd(r,t,1),t=Oa(),r!==null&&(zv(r,1,t),rs(r,t));break}}r=r.return}}function SEe(t,r,o){var s=t.pingCache;s!==null&&s.delete(r),r=Oa(),t.pingedLanes|=t.suspendedLanes&o,Bo===t&&(na&o)===o&&(wo===4||wo===3&&(na&130023424)===na&&500>no()-u2?Dh(t,0):l2|=o),rs(t,r)}function iq(t,r){r===0&&(t.mode&1?(r=gy,gy<<=1,!(gy&130023424)&&(gy=4194304)):r=1);var o=Oa();t=hu(t,r),t!==null&&(zv(t,r,o),rs(t,o))}function yEe(t){var r=t.memoizedState,o=0;r!==null&&(o=r.retryLane),iq(t,o)}function CEe(t,r){var o=0;switch(t.tag){case 13:var s=t.stateNode,c=t.memoizedState;c!==null&&(o=c.retryLane);break;case 19:s=t.stateNode;break;default:throw Error(yt(314))}s!==null&&s.delete(r),iq(t,o)}var oq;oq=function(t,r,o){if(t!==null)if(t.memoizedProps!==r.pendingProps||ts.current)Za=!0;else{if(!(t.lanes&o)&&!(r.flags&128))return Za=!1,lEe(t,r,o);Za=!!(t.flags&131072)}else Za=!1,Oi&&r.flags&1048576&&lY(r,kC,r.index);switch(r.lanes=0,r.tag){case 2:var s=r.type;rC(t,r),t=r.pendingProps;var c=cm(r,ya.current);nm(r,o),c=r2(null,r,s,t,c,o);var d=i2();return r.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,ns(s)?(d=!0,DC(r)):d=!1,r.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,QD(r),c.updater=Mb,r.stateNode=c,c._reactInternals=r,jN(r,s,t,o),r=zN(null,r,s,!0,d,o)):(r.tag=0,Oi&&d&&WD(r),Aa(null,r,c,o),r=r.child),r;case 16:s=r.elementType;e:{switch(rC(t,r),t=r.pendingProps,c=s._init,s=c(s._payload),r.type=s,c=r.tag=TEe(s),t=Vc(s,t),c){case 0:r=HN(null,r,s,t,o);break e;case 1:r=T7(null,r,s,t,o);break e;case 11:r=C7(null,r,s,t,o);break e;case 14:r=b7(null,r,s,Vc(s.type,t),o);break e}throw Error(yt(306,s,""))}return r;case 0:return s=r.type,c=r.pendingProps,c=r.elementType===s?c:Vc(s,c),HN(t,r,s,c,o);case 1:return s=r.type,c=r.pendingProps,c=r.elementType===s?c:Vc(s,c),T7(t,r,s,c,o);case 3:e:{if($Y(r),t===null)throw Error(yt(387));s=r.pendingProps,d=r.memoizedState,c=d.element,mY(t,r),UC(r,s,null,o);var f=r.memoizedState;if(s=f.element,d.isDehydrated)if(d={element:s,isDehydrated:!1,cache:f.cache,pendingSuspenseBoundaries:f.pendingSuspenseBoundaries,transitions:f.transitions},r.updateQueue.baseState=d,r.memoizedState=d,r.flags&256){c=hm(Error(yt(423)),r),r=R7(t,r,s,o,c);break e}else if(s!==c){c=hm(Error(yt(424)),r),r=R7(t,r,s,o,c);break e}else for(bs=Cd(r.stateNode.containerInfo.firstChild),Rs=r,Oi=!0,zc=null,o=fY(r,null,s,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(lm(),s===c){r=fu(t,r,o);break e}Aa(t,r,s,o)}r=r.child}return r;case 5:return gY(r),t===null&&UN(r),s=r.type,c=r.pendingProps,d=t!==null?t.memoizedProps:null,f=c.children,DN(s,c)?f=null:d!==null&&DN(s,d)&&(r.flags|=32),jY(t,r),Aa(t,r,f,o),r.child;case 6:return t===null&&UN(r),null;case 13:return HY(t,r,o);case 4:return ZD(r,r.stateNode.containerInfo),s=r.pendingProps,t===null?r.child=um(r,null,s,o):Aa(t,r,s,o),r.child;case 11:return s=r.type,c=r.pendingProps,c=r.elementType===s?c:Vc(s,c),C7(t,r,s,c,o);case 7:return Aa(t,r,r.pendingProps,o),r.child;case 8:return Aa(t,r,r.pendingProps.children,o),r.child;case 12:return Aa(t,r,r.pendingProps.children,o),r.child;case 10:e:{if(s=r.type._context,c=r.pendingProps,d=r.memoizedProps,f=c.value,_i(MC,s._currentValue),s._currentValue=f,d!==null)if(Jc(d.value,f)){if(d.children===c.children&&!ts.current){r=fu(t,r,o);break e}}else for(d=r.child,d!==null&&(d.return=r);d!==null;){var v=d.dependencies;if(v!==null){f=d.child;for(var g=v.firstContext;g!==null;){if(g.context===s){if(d.tag===1){g=su(-1,o&-o),g.tag=2;var _=d.updateQueue;if(_!==null){_=_.shared;var C=_.pending;C===null?g.next=g:(g.next=C.next,C.next=g),_.pending=g}}d.lanes|=o,g=d.alternate,g!==null&&(g.lanes|=o),BN(d.return,o,r),v.lanes|=o;break}g=g.next}}else if(d.tag===10)f=d.type===r.type?null:d.child;else if(d.tag===18){if(f=d.return,f===null)throw Error(yt(341));f.lanes|=o,v=f.alternate,v!==null&&(v.lanes|=o),BN(f,o,r),f=d.sibling}else f=d.child;if(f!==null)f.return=d;else for(f=d;f!==null;){if(f===r){f=null;break}if(d=f.sibling,d!==null){d.return=f.return,f=d;break}f=f.return}d=f}Aa(t,r,c.children,o),r=r.child}return r;case 9:return c=r.type,s=r.pendingProps.children,nm(r,o),c=fc(c),s=s(c),r.flags|=1,Aa(t,r,s,o),r.child;case 14:return s=r.type,c=Vc(s,r.pendingProps),c=Vc(s.type,c),b7(t,r,s,c,o);case 15:return BY(t,r,r.type,r.pendingProps,o);case 17:return s=r.type,c=r.pendingProps,c=r.elementType===s?c:Vc(s,c),rC(t,r),r.tag=1,ns(s)?(t=!0,DC(r)):t=!1,nm(r,o),MY(r,s,c),jN(r,s,c,o),zN(null,r,s,!0,t,o);case 19:return zY(t,r,o);case 22:return VY(t,r,o)}throw Error(yt(156,r.tag))};function aq(t,r){return DK(t,r)}function bEe(t,r,o,s){this.tag=t,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function lc(t,r,o,s){return new bEe(t,r,o,s)}function p2(t){return t=t.prototype,!(!t||!t.isReactComponent)}function TEe(t){if(typeof t=="function")return p2(t)?1:0;if(t!=null){if(t=t.$$typeof,t===DD)return 11;if(t===LD)return 14}return 2}function wd(t,r){var o=t.alternate;return o===null?(o=lc(t.tag,r,t.key,t.mode),o.elementType=t.elementType,o.type=t.type,o.stateNode=t.stateNode,o.alternate=t,t.alternate=o):(o.pendingProps=r,o.type=t.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=t.flags&14680064,o.childLanes=t.childLanes,o.lanes=t.lanes,o.child=t.child,o.memoizedProps=t.memoizedProps,o.memoizedState=t.memoizedState,o.updateQueue=t.updateQueue,r=t.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=t.sibling,o.index=t.index,o.ref=t.ref,o}function aC(t,r,o,s,c,d){var f=2;if(s=t,typeof t=="function")p2(t)&&(f=1);else if(typeof t=="string")f=5;else e:switch(t){case Up:return Lh(o.children,c,d,r);case PD:f=8,c|=8;break;case dN:return t=lc(12,o,r,c|2),t.elementType=dN,t.lanes=d,t;case hN:return t=lc(13,o,r,c),t.elementType=hN,t.lanes=d,t;case fN:return t=lc(19,o,r,c),t.elementType=fN,t.lanes=d,t;case gK:return Bb(o,c,d,r);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case pK:f=10;break e;case mK:f=9;break e;case DD:f=11;break e;case LD:f=14;break e;case ld:f=16,s=null;break e}throw Error(yt(130,t==null?t:typeof t,""))}return r=lc(f,o,r,c),r.elementType=t,r.type=s,r.lanes=d,r}function Lh(t,r,o,s){return t=lc(7,t,s,r),t.lanes=o,t}function Bb(t,r,o,s){return t=lc(22,t,s,r),t.elementType=gK,t.lanes=o,t.stateNode={isHidden:!1},t}function RO(t,r,o){return t=lc(6,t,null,r),t.lanes=o,t}function wO(t,r,o){return r=lc(4,t.children!==null?t.children:[],t.key,r),r.lanes=o,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}function REe(t,r,o,s,c){this.tag=r,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=aO(0),this.expirationTimes=aO(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=aO(0),this.identifierPrefix=s,this.onRecoverableError=c,this.mutableSourceEagerHydrationData=null}function m2(t,r,o,s,c,d,f,v,g){return t=new REe(t,r,o,v,g),r===1?(r=1,d===!0&&(r|=8)):r=0,d=lc(3,null,null,r),t.current=d,d.stateNode=t,d.memoizedState={element:s,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},QD(d),t}function wEe(t,r,o){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Fp,key:s==null?null:""+s,children:t,containerInfo:r,implementation:o}}function sq(t){if(!t)return Ad;t=t._reactInternals;e:{if(Jh(t)!==t||t.tag!==1)throw Error(yt(170));var r=t;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(ns(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(yt(171))}if(t.tag===1){var o=t.type;if(ns(o))return sY(t,o,r)}return r}function cq(t,r,o,s,c,d,f,v,g){return t=m2(o,s,!0,t,c,d,f,v,g),t.context=sq(null),o=t.current,s=Oa(),c=Rd(o),d=su(s,c),d.callback=r??null,bd(o,d,c),t.current.lanes=c,zv(t,c,s),rs(t,s),t}function Vb(t,r,o,s){var c=r.current,d=Oa(),f=Rd(c);return o=sq(o),r.context===null?r.context=o:r.pendingContext=o,r=su(d,f),r.payload={element:t},s=s===void 0?null:s,s!==null&&(r.callback=s),t=bd(c,r,f),t!==null&&(Kc(t,c,f,d),eC(t,c,f)),f}function GC(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function k7(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var o=t.retryLane;t.retryLane=o!==0&&o<r?o:r}}function g2(t,r){k7(t,r),(t=t.alternate)&&k7(t,r)}function IEe(){return null}var lq=typeof reportError=="function"?reportError:function(t){console.error(t)};function v2(t){this._internalRoot=t}jb.prototype.render=v2.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(yt(409));Vb(t,r,null,null)};jb.prototype.unmount=v2.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;$h(function(){Vb(null,t,null,null)}),r[du]=null}};function jb(t){this._internalRoot=t}jb.prototype.unstable_scheduleHydration=function(t){if(t){var r=VK();t={blockedOn:null,target:t,priority:r};for(var o=0;o<dd.length&&r!==0&&r<dd[o].priority;o++);dd.splice(o,0,t),o===0&&$K(t)}};function E2(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function $b(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function M7(){}function AEe(t,r,o,s,c){if(c){if(typeof s=="function"){var d=s;s=function(){var _=GC(f);d.call(_)}}var f=cq(r,s,t,0,null,!1,!1,"",M7);return t._reactRootContainer=f,t[du]=f.current,hv(t.nodeType===8?t.parentNode:t),$h(),f}for(;c=t.lastChild;)t.removeChild(c);if(typeof s=="function"){var v=s;s=function(){var _=GC(g);v.call(_)}}var g=m2(t,0,!1,null,null,!1,!1,"",M7);return t._reactRootContainer=g,t[du]=g.current,hv(t.nodeType===8?t.parentNode:t),$h(function(){Vb(r,g,o,s)}),g}function Hb(t,r,o,s,c){var d=o._reactRootContainer;if(d){var f=d;if(typeof c=="function"){var v=c;c=function(){var g=GC(f);v.call(g)}}Vb(r,f,t,c)}else f=AEe(o,r,t,c,s);return GC(f)}UK=function(t){switch(t.tag){case 3:var r=t.stateNode;if(r.current.memoizedState.isDehydrated){var o=Ug(r.pendingLanes);o!==0&&(FD(r,o|1),rs(r,no()),!(Pr&6)&&(fm=no()+500,Ld()))}break;case 13:$h(function(){var s=hu(t,1);if(s!==null){var c=Oa();Kc(s,t,1,c)}}),g2(t,1)}};UD=function(t){if(t.tag===13){var r=hu(t,134217728);if(r!==null){var o=Oa();Kc(r,t,134217728,o)}g2(t,134217728)}};BK=function(t){if(t.tag===13){var r=Rd(t),o=hu(t,r);if(o!==null){var s=Oa();Kc(o,t,r,s)}g2(t,r)}};VK=function(){return Xr};jK=function(t,r){var o=Xr;try{return Xr=t,r()}finally{Xr=o}};bN=function(t,r,o){switch(r){case"input":if(gN(t,o),r=o.name,o.type==="radio"&&r!=null){for(o=t;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<o.length;r++){var s=o[r];if(s!==t&&s.form===t.form){var c=Db(s);if(!c)throw Error(yt(90));EK(s),gN(s,c)}}}break;case"textarea":SK(t,o);break;case"select":r=o.value,r!=null&&Qp(t,!!o.multiple,r,!1)}};IK=d2;AK=$h;var OEe={usingClientEntryPoint:!1,Events:[Gv,$p,Db,RK,wK,d2]},Cg={findFiberByHostInstance:Oh,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},xEe={bundleType:Cg.bundleType,version:Cg.version,rendererPackageName:Cg.rendererPackageName,rendererConfig:Cg.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:vu.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=NK(t),t===null?null:t.stateNode},findFiberByHostInstance:Cg.findFiberByHostInstance||IEe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Iy=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Iy.isDisabled&&Iy.supportsFiber)try{Ob=Iy.inject(xEe),Pl=Iy}catch{}}xs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=OEe;xs.createPortal=function(t,r){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!E2(r))throw Error(yt(200));return wEe(t,r,null,o)};xs.createRoot=function(t,r){if(!E2(t))throw Error(yt(299));var o=!1,s="",c=lq;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(c=r.onRecoverableError)),r=m2(t,1,!1,null,null,o,!1,s,c),t[du]=r.current,hv(t.nodeType===8?t.parentNode:t),new v2(r)};xs.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(yt(188)):(t=Object.keys(t).join(","),Error(yt(268,t)));return t=NK(r),t=t===null?null:t.stateNode,t};xs.flushSync=function(t){return $h(t)};xs.hydrate=function(t,r,o){if(!$b(r))throw Error(yt(200));return Hb(null,t,r,!0,o)};xs.hydrateRoot=function(t,r,o){if(!E2(t))throw Error(yt(405));var s=o!=null&&o.hydratedSources||null,c=!1,d="",f=lq;if(o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onRecoverableError!==void 0&&(f=o.onRecoverableError)),r=cq(r,null,t,1,o??null,c,!1,d,f),t[du]=r.current,hv(t),s)for(t=0;t<s.length;t++)o=s[t],c=o._getVersion,c=c(o._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[o,c]:r.mutableSourceEagerHydrationData.push(o,c);return new jb(r)};xs.render=function(t,r,o){if(!$b(r))throw Error(yt(200));return Hb(null,t,r,!1,o)};xs.unmountComponentAtNode=function(t){if(!$b(t))throw Error(yt(40));return t._reactRootContainer?($h(function(){Hb(null,null,t,!1,function(){t._reactRootContainer=null,t[du]=null})}),!0):!1};xs.unstable_batchedUpdates=d2;xs.unstable_renderSubtreeIntoContainer=function(t,r,o,s){if(!$b(o))throw Error(yt(200));if(t==null||t._reactInternals===void 0)throw Error(yt(38));return Hb(t,r,o,!1,s)};xs.version="18.3.1-next-f1338f8080-20240426";function uq(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(uq)}catch(t){console.error(t)}}uq(),uK.exports=xs;var Ml=uK.exports;const nP=Od(Ml),NEe=jG({__proto__:null,default:nP},[Ml]);var F7=Ml;lN.createRoot=F7.createRoot,lN.hydrateRoot=F7.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function yv(){return yv=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var o=arguments[r];for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(t[s]=o[s])}return t},yv.apply(this,arguments)}var md;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(md||(md={}));const U7="popstate";function PEe(t){t===void 0&&(t={});function r(c,d){let{pathname:f="/",search:v="",hash:g=""}=Qh(c.location.hash.substr(1));return!f.startsWith("/")&&!f.startsWith(".")&&(f="/"+f),rP("",{pathname:f,search:v,hash:g},d.state&&d.state.usr||null,d.state&&d.state.key||"default")}function o(c,d){let f=c.document.querySelector("base"),v="";if(f&&f.getAttribute("href")){let g=c.location.href,_=g.indexOf("#");v=_===-1?g:g.slice(0,_)}return v+"#"+(typeof d=="string"?d:dq(d))}function s(c,d){_2(c.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(d)+")")}return LEe(r,o,s,t)}function Io(t,r){if(t===!1||t===null||typeof t>"u")throw new Error(r)}function _2(t,r){if(!t){typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}function DEe(){return Math.random().toString(36).substr(2,8)}function B7(t,r){return{usr:t.state,key:t.key,idx:r}}function rP(t,r,o,s){return o===void 0&&(o=null),yv({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof r=="string"?Qh(r):r,{state:o,key:r&&r.key||s||DEe()})}function dq(t){let{pathname:r="/",search:o="",hash:s=""}=t;return o&&o!=="?"&&(r+=o.charAt(0)==="?"?o:"?"+o),s&&s!=="#"&&(r+=s.charAt(0)==="#"?s:"#"+s),r}function Qh(t){let r={};if(t){let o=t.indexOf("#");o>=0&&(r.hash=t.substr(o),t=t.substr(0,o));let s=t.indexOf("?");s>=0&&(r.search=t.substr(s),t=t.substr(0,s)),t&&(r.pathname=t)}return r}function LEe(t,r,o,s){s===void 0&&(s={});let{window:c=document.defaultView,v5Compat:d=!1}=s,f=c.history,v=md.Pop,g=null,_=C();_==null&&(_=0,f.replaceState(yv({},f.state,{idx:_}),""));function C(){return(f.state||{idx:null}).idx}function b(){v=md.Pop;let P=C(),D=P==null?null:P-_;_=P,g&&g({action:v,location:N.location,delta:D})}function T(P,D){v=md.Push;let x=rP(N.location,P,D);o&&o(x,P),_=C()+1;let L=B7(x,_),M=N.createHref(x);try{f.pushState(L,"",M)}catch(F){if(F instanceof DOMException&&F.name==="DataCloneError")throw F;c.location.assign(M)}d&&g&&g({action:v,location:N.location,delta:1})}function A(P,D){v=md.Replace;let x=rP(N.location,P,D);o&&o(x,P),_=C();let L=B7(x,_),M=N.createHref(x);f.replaceState(L,"",M),d&&g&&g({action:v,location:N.location,delta:0})}function I(P){let D=c.location.origin!=="null"?c.location.origin:c.location.href,x=typeof P=="string"?P:dq(P);return x=x.replace(/ $/,"%20"),Io(D,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,D)}let N={get action(){return v},get location(){return t(c,f)},listen(P){if(g)throw new Error("A history only accepts one active listener");return c.addEventListener(U7,b),g=P,()=>{c.removeEventListener(U7,b),g=null}},createHref(P){return r(c,P)},createURL:I,encodeLocation(P){let D=I(P);return{pathname:D.pathname,search:D.search,hash:D.hash}},push:T,replace:A,go(P){return f.go(P)}};return N}var V7;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(V7||(V7={}));function kEe(t,r,o){return o===void 0&&(o="/"),MEe(t,r,o,!1)}function MEe(t,r,o,s){let c=typeof r=="string"?Qh(r):r,d=pq(c.pathname||"/",o);if(d==null)return null;let f=hq(t);FEe(f);let v=null;for(let g=0;v==null&&g<f.length;++g){let _=YEe(d);v=GEe(f[g],_,s)}return v}function hq(t,r,o,s){r===void 0&&(r=[]),o===void 0&&(o=[]),s===void 0&&(s="");let c=(d,f,v)=>{let g={relativePath:v===void 0?d.path||"":v,caseSensitive:d.caseSensitive===!0,childrenIndex:f,route:d};g.relativePath.startsWith("/")&&(Io(g.relativePath.startsWith(s),'Absolute route path "'+g.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),g.relativePath=g.relativePath.slice(s.length));let _=kh([s,g.relativePath]),C=o.concat(g);d.children&&d.children.length>0&&(Io(d.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+_+'".')),hq(d.children,r,C,_)),!(d.path==null&&!d.index)&&r.push({path:_,score:zEe(_,d.index),routesMeta:C})};return t.forEach((d,f)=>{var v;if(d.path===""||!((v=d.path)!=null&&v.includes("?")))c(d,f);else for(let g of fq(d.path))c(d,f,g)}),r}function fq(t){let r=t.split("/");if(r.length===0)return[];let[o,...s]=r,c=o.endsWith("?"),d=o.replace(/\?$/,"");if(s.length===0)return c?[d,""]:[d];let f=fq(s.join("/")),v=[];return v.push(...f.map(g=>g===""?d:[d,g].join("/"))),c&&v.push(...f),v.map(g=>t.startsWith("/")&&g===""?"/":g)}function FEe(t){t.sort((r,o)=>r.score!==o.score?o.score-r.score:WEe(r.routesMeta.map(s=>s.childrenIndex),o.routesMeta.map(s=>s.childrenIndex)))}const UEe=/^:[\w-]+$/,BEe=3,VEe=2,jEe=1,$Ee=10,HEe=-2,j7=t=>t==="*";function zEe(t,r){let o=t.split("/"),s=o.length;return o.some(j7)&&(s+=HEe),r&&(s+=VEe),o.filter(c=>!j7(c)).reduce((c,d)=>c+(UEe.test(d)?BEe:d===""?jEe:$Ee),s)}function WEe(t,r){return t.length===r.length&&t.slice(0,-1).every((s,c)=>s===r[c])?t[t.length-1]-r[r.length-1]:0}function GEe(t,r,o){o===void 0&&(o=!1);let{routesMeta:s}=t,c={},d="/",f=[];for(let v=0;v<s.length;++v){let g=s[v],_=v===s.length-1,C=d==="/"?r:r.slice(d.length)||"/",b=$7({path:g.relativePath,caseSensitive:g.caseSensitive,end:_},C),T=g.route;if(!b&&_&&o&&!s[s.length-1].route.index&&(b=$7({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},C)),!b)return null;Object.assign(c,b.params),f.push({params:c,pathname:kh([d,b.pathname]),pathnameBase:e_e(kh([d,b.pathnameBase])),route:T}),b.pathnameBase!=="/"&&(d=kh([d,b.pathnameBase]))}return f}function $7(t,r){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[o,s]=KEe(t.path,t.caseSensitive,t.end),c=r.match(o);if(!c)return null;let d=c[0],f=d.replace(/(.)\/+$/,"$1"),v=c.slice(1);return{params:s.reduce((_,C,b)=>{let{paramName:T,isOptional:A}=C;if(T==="*"){let N=v[b]||"";f=d.slice(0,d.length-N.length).replace(/(.)\/+$/,"$1")}const I=v[b];return A&&!I?_[T]=void 0:_[T]=(I||"").replace(/%2F/g,"/"),_},{}),pathname:d,pathnameBase:f,pattern:t}}function KEe(t,r,o){r===void 0&&(r=!1),o===void 0&&(o=!0),_2(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let s=[],c="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,v,g)=>(s.push({paramName:v,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(s.push({paramName:"*"}),c+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):o?c+="\\/*$":t!==""&&t!=="/"&&(c+="(?:(?=\\/|$))"),[new RegExp(c,r?void 0:"i"),s]}function YEe(t){try{return t.split("/").map(r=>decodeURIComponent(r).replace(/\//g,"%2F")).join("/")}catch(r){return _2(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+r+").")),t}}function pq(t,r){if(r==="/")return t;if(!t.toLowerCase().startsWith(r.toLowerCase()))return null;let o=r.endsWith("/")?r.length-1:r.length,s=t.charAt(o);return s&&s!=="/"?null:t.slice(o)||"/"}function qEe(t,r){r===void 0&&(r="/");let{pathname:o,search:s="",hash:c=""}=typeof t=="string"?Qh(t):t;return{pathname:o?o.startsWith("/")?o:XEe(o,r):r,search:t_e(s),hash:n_e(c)}}function XEe(t,r){let o=r.replace(/\/+$/,"").split("/");return t.split("/").forEach(c=>{c===".."?o.length>1&&o.pop():c!=="."&&o.push(c)}),o.length>1?o.join("/"):"/"}function IO(t,r,o,s){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+r+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+o+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function JEe(t){return t.filter((r,o)=>o===0||r.route.path&&r.route.path.length>0)}function QEe(t,r){let o=JEe(t);return r?o.map((s,c)=>c===o.length-1?s.pathname:s.pathnameBase):o.map(s=>s.pathnameBase)}function ZEe(t,r,o,s){s===void 0&&(s=!1);let c;typeof t=="string"?c=Qh(t):(c=yv({},t),Io(!c.pathname||!c.pathname.includes("?"),IO("?","pathname","search",c)),Io(!c.pathname||!c.pathname.includes("#"),IO("#","pathname","hash",c)),Io(!c.search||!c.search.includes("#"),IO("#","search","hash",c)));let d=t===""||c.pathname==="",f=d?"/":c.pathname,v;if(f==null)v=o;else{let b=r.length-1;if(!s&&f.startsWith("..")){let T=f.split("/");for(;T[0]==="..";)T.shift(),b-=1;c.pathname=T.join("/")}v=b>=0?r[b]:"/"}let g=qEe(c,v),_=f&&f!=="/"&&f.endsWith("/"),C=(d||f===".")&&o.endsWith("/");return!g.pathname.endsWith("/")&&(_||C)&&(g.pathname+="/"),g}const kh=t=>t.join("/").replace(/\/\/+/g,"/"),e_e=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),t_e=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,n_e=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function r_e(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const mq=["post","put","patch","delete"];new Set(mq);const i_e=["get",...mq];new Set(i_e);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Cv(){return Cv=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var o=arguments[r];for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(t[s]=o[s])}return t},Cv.apply(this,arguments)}const S2=y.createContext(null),o_e=y.createContext(null),zb=y.createContext(null),Wb=y.createContext(null),Om=y.createContext({outlet:null,matches:[],isDataRoute:!1}),gq=y.createContext(null);function Gb(){return y.useContext(Wb)!=null}function vq(){return Gb()||Io(!1),y.useContext(Wb).location}function Eq(t){y.useContext(zb).static||y.useLayoutEffect(t)}function a_e(){let{isDataRoute:t}=y.useContext(Om);return t?__e():s_e()}function s_e(){Gb()||Io(!1);let t=y.useContext(S2),{basename:r,future:o,navigator:s}=y.useContext(zb),{matches:c}=y.useContext(Om),{pathname:d}=vq(),f=JSON.stringify(QEe(c,o.v7_relativeSplatPath)),v=y.useRef(!1);return Eq(()=>{v.current=!0}),y.useCallback(function(_,C){if(C===void 0&&(C={}),!v.current)return;if(typeof _=="number"){s.go(_);return}let b=ZEe(_,JSON.parse(f),d,C.relative==="path");t==null&&r!=="/"&&(b.pathname=b.pathname==="/"?r:kh([r,b.pathname])),(C.replace?s.replace:s.push)(b,C.state,C)},[r,s,f,d,t])}function c_e(t,r){return l_e(t,r)}function l_e(t,r,o,s){Gb()||Io(!1);let{navigator:c,static:d}=y.useContext(zb),{matches:f}=y.useContext(Om),v=f[f.length-1],g=v?v.params:{};v&&v.pathname;let _=v?v.pathnameBase:"/";v&&v.route;let C=vq(),b;if(r){var T;let D=typeof r=="string"?Qh(r):r;_==="/"||(T=D.pathname)!=null&&T.startsWith(_)||Io(!1),b=D}else b=C;let A=b.pathname||"/",I=A;if(_!=="/"){let D=_.replace(/^\//,"").split("/");I="/"+A.replace(/^\//,"").split("/").slice(D.length).join("/")}let N=!d&&o&&o.matches&&o.matches.length>0?o.matches:kEe(t,{pathname:I}),P=p_e(N&&N.map(D=>Object.assign({},D,{params:Object.assign({},g,D.params),pathname:kh([_,c.encodeLocation?c.encodeLocation(D.pathname).pathname:D.pathname]),pathnameBase:D.pathnameBase==="/"?_:kh([_,c.encodeLocation?c.encodeLocation(D.pathnameBase).pathname:D.pathnameBase])})),f,o,s);return r&&P?y.createElement(Wb.Provider,{value:{location:Cv({pathname:"/",search:"",hash:"",state:null,key:"default"},b),navigationType:md.Pop}},P):P}function u_e(){let t=E_e(),r=r_e(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),o=t instanceof Error?t.stack:null,c={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},d=null;return y.createElement(y.Fragment,null,y.createElement("h2",null,"Unexpected Application Error!"),y.createElement("h3",{style:{fontStyle:"italic"}},r),o?y.createElement("pre",{style:c},o):null,d)}const d_e=y.createElement(u_e,null);class h_e extends y.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,o){return o.location!==r.location||o.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:o.error,location:o.location,revalidation:r.revalidation||o.revalidation}}componentDidCatch(r,o){console.error("React Router caught the following error during render",r,o)}render(){return this.state.error!==void 0?y.createElement(Om.Provider,{value:this.props.routeContext},y.createElement(gq.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function f_e(t){let{routeContext:r,match:o,children:s}=t,c=y.useContext(S2);return c&&c.static&&c.staticContext&&(o.route.errorElement||o.route.ErrorBoundary)&&(c.staticContext._deepestRenderedBoundaryId=o.route.id),y.createElement(Om.Provider,{value:r},s)}function p_e(t,r,o,s){var c;if(r===void 0&&(r=[]),o===void 0&&(o=null),s===void 0&&(s=null),t==null){var d;if(!o)return null;if(o.errors)t=o.matches;else if((d=s)!=null&&d.v7_partialHydration&&r.length===0&&!o.initialized&&o.matches.length>0)t=o.matches;else return null}let f=t,v=(c=o)==null?void 0:c.errors;if(v!=null){let C=f.findIndex(b=>b.route.id&&(v==null?void 0:v[b.route.id])!==void 0);C>=0||Io(!1),f=f.slice(0,Math.min(f.length,C+1))}let g=!1,_=-1;if(o&&s&&s.v7_partialHydration)for(let C=0;C<f.length;C++){let b=f[C];if((b.route.HydrateFallback||b.route.hydrateFallbackElement)&&(_=C),b.route.id){let{loaderData:T,errors:A}=o,I=b.route.loader&&T[b.route.id]===void 0&&(!A||A[b.route.id]===void 0);if(b.route.lazy||I){g=!0,_>=0?f=f.slice(0,_+1):f=[f[0]];break}}}return f.reduceRight((C,b,T)=>{let A,I=!1,N=null,P=null;o&&(A=v&&b.route.id?v[b.route.id]:void 0,N=b.route.errorElement||d_e,g&&(_<0&&T===0?(S_e("route-fallback",!1),I=!0,P=null):_===T&&(I=!0,P=b.route.hydrateFallbackElement||null)));let D=r.concat(f.slice(0,T+1)),x=()=>{let L;return A?L=N:I?L=P:b.route.Component?L=y.createElement(b.route.Component,null):b.route.element?L=b.route.element:L=C,y.createElement(f_e,{match:b,routeContext:{outlet:C,matches:D,isDataRoute:o!=null},children:L})};return o&&(b.route.ErrorBoundary||b.route.errorElement||T===0)?y.createElement(h_e,{location:o.location,revalidation:o.revalidation,component:N,error:A,children:x(),routeContext:{outlet:null,matches:D,isDataRoute:!0}}):x()},null)}var _q=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(_q||{}),KC=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(KC||{});function m_e(t){let r=y.useContext(S2);return r||Io(!1),r}function g_e(t){let r=y.useContext(o_e);return r||Io(!1),r}function v_e(t){let r=y.useContext(Om);return r||Io(!1),r}function Sq(t){let r=v_e(),o=r.matches[r.matches.length-1];return o.route.id||Io(!1),o.route.id}function E_e(){var t;let r=y.useContext(gq),o=g_e(KC.UseRouteError),s=Sq(KC.UseRouteError);return r!==void 0?r:(t=o.errors)==null?void 0:t[s]}function __e(){let{router:t}=m_e(_q.UseNavigateStable),r=Sq(KC.UseNavigateStable),o=y.useRef(!1);return Eq(()=>{o.current=!0}),y.useCallback(function(c,d){d===void 0&&(d={}),o.current&&(typeof c=="number"?t.navigate(c):t.navigate(c,Cv({fromRouteId:r},d)))},[t,r])}const H7={};function S_e(t,r,o){!r&&!H7[t]&&(H7[t]=!0)}function y_e(t,r){t==null||t.v7_startTransition,(t==null?void 0:t.v7_relativeSplatPath)===void 0&&(!r||r.v7_relativeSplatPath),r&&(r.v7_fetcherPersist,r.v7_normalizeFormMethod,r.v7_partialHydration,r.v7_skipActionErrorRevalidation)}function Ih(t){Io(!1)}function C_e(t){let{basename:r="/",children:o=null,location:s,navigationType:c=md.Pop,navigator:d,static:f=!1,future:v}=t;Gb()&&Io(!1);let g=r.replace(/^\/*/,"/"),_=y.useMemo(()=>({basename:g,navigator:d,static:f,future:Cv({v7_relativeSplatPath:!1},v)}),[g,v,d,f]);typeof s=="string"&&(s=Qh(s));let{pathname:C="/",search:b="",hash:T="",state:A=null,key:I="default"}=s,N=y.useMemo(()=>{let P=pq(C,g);return P==null?null:{location:{pathname:P,search:b,hash:T,state:A,key:I},navigationType:c}},[g,C,b,T,A,I,c]);return N==null?null:y.createElement(zb.Provider,{value:_},y.createElement(Wb.Provider,{children:o,value:N}))}function b_e(t){let{children:r,location:o}=t;return c_e(iP(r),o)}new Promise(()=>{});function iP(t,r){r===void 0&&(r=[]);let o=[];return y.Children.forEach(t,(s,c)=>{if(!y.isValidElement(s))return;let d=[...r,c];if(s.type===y.Fragment){o.push.apply(o,iP(s.props.children,d));return}s.type!==Ih&&Io(!1),!s.props.index||!s.props.children||Io(!1);let f={id:s.props.id||d.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(f.children=iP(s.props.children,d)),o.push(f)}),o}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const T_e="6";try{window.__reactRouterVersion=T_e}catch{}const R_e="startTransition",z7=Fh[R_e];function w_e(t){let{basename:r,children:o,future:s,window:c}=t,d=y.useRef();d.current==null&&(d.current=PEe({window:c,v5Compat:!0}));let f=d.current,[v,g]=y.useState({action:f.action,location:f.location}),{v7_startTransition:_}=s||{},C=y.useCallback(b=>{_&&z7?z7(()=>g(b)):g(b)},[g,_]);return y.useLayoutEffect(()=>f.listen(C),[f,C]),y.useEffect(()=>y_e(s),[s]),y.createElement(C_e,{basename:r,children:o,location:v.location,navigationType:v.action,navigator:f,future:s})}var W7;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(W7||(W7={}));var G7;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(G7||(G7={}));var yq={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var r={}.hasOwnProperty;function o(){for(var d="",f=0;f<arguments.length;f++){var v=arguments[f];v&&(d=c(d,s(v)))}return d}function s(d){if(typeof d=="string"||typeof d=="number")return d;if(typeof d!="object")return"";if(Array.isArray(d))return o.apply(null,d);if(d.toString!==Object.prototype.toString&&!d.toString.toString().includes("[native code]"))return d.toString();var f="";for(var v in d)r.call(d,v)&&d[v]&&(f=c(f,v));return f}function c(d,f){return f?d?d+" "+f:d+f:d}t.exports?(o.default=o,t.exports=o):window.classNames=o})()})(yq);var I_e=yq.exports;const Ke=Od(I_e);function nt(){return nt=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var o=arguments[r];for(var s in o)({}).hasOwnProperty.call(o,s)&&(t[s]=o[s])}return t},nt.apply(null,arguments)}function ln(t){"@babel/helpers - typeof";return ln=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},ln(t)}var A_e=Symbol.for("react.element"),O_e=Symbol.for("react.transitional.element"),x_e=Symbol.for("react.fragment");function Cq(t){return t&&ln(t)==="object"&&(t.$$typeof===A_e||t.$$typeof===O_e)&&t.type===x_e}function Qc(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=[];return ze.Children.forEach(t,function(s){s==null&&!r.keepEmpty||(Array.isArray(s)?o=o.concat(Qc(s)):Cq(s)&&s.props?o=o.concat(Qc(s.props.children,r)):o.push(s))}),o}var oP={},N_e=function(r){};function P_e(t,r){}function D_e(t,r){}function L_e(){oP={}}function bq(t,r,o){!r&&!oP[o]&&(t(!1,o),oP[o]=!0)}function _a(t,r){bq(P_e,t,r)}function k_e(t,r){bq(D_e,t,r)}_a.preMessage=N_e;_a.resetWarned=L_e;_a.noteOnce=k_e;function M_e(t,r){if(ln(t)!="object"||!t)return t;var o=t[Symbol.toPrimitive];if(o!==void 0){var s=o.call(t,r||"default");if(ln(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function Tq(t){var r=M_e(t,"string");return ln(r)=="symbol"?r:r+""}function be(t,r,o){return(r=Tq(r))in t?Object.defineProperty(t,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[r]=o,t}function K7(t,r){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(c){return Object.getOwnPropertyDescriptor(t,c).enumerable})),o.push.apply(o,s)}return o}function _e(t){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?K7(Object(o),!0).forEach(function(s){be(t,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):K7(Object(o)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(o,s))})}return t}function bv(t){return t instanceof HTMLElement||t instanceof SVGElement}function Rq(t){return t&&ln(t)==="object"&&bv(t.nativeElement)?t.nativeElement:bv(t)?t:null}function sC(t){var r=Rq(t);if(r)return r;if(t instanceof ze.Component){var o;return(o=nP.findDOMNode)===null||o===void 0?void 0:o.call(nP,t)}return null}var wq={exports:{}},Jr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y2=Symbol.for("react.element"),C2=Symbol.for("react.portal"),Kb=Symbol.for("react.fragment"),Yb=Symbol.for("react.strict_mode"),qb=Symbol.for("react.profiler"),Xb=Symbol.for("react.provider"),Jb=Symbol.for("react.context"),F_e=Symbol.for("react.server_context"),Qb=Symbol.for("react.forward_ref"),Zb=Symbol.for("react.suspense"),eT=Symbol.for("react.suspense_list"),tT=Symbol.for("react.memo"),nT=Symbol.for("react.lazy"),U_e=Symbol.for("react.offscreen"),Iq;Iq=Symbol.for("react.module.reference");function vc(t){if(typeof t=="object"&&t!==null){var r=t.$$typeof;switch(r){case y2:switch(t=t.type,t){case Kb:case qb:case Yb:case Zb:case eT:return t;default:switch(t=t&&t.$$typeof,t){case F_e:case Jb:case Qb:case nT:case tT:case Xb:return t;default:return r}}case C2:return r}}}Jr.ContextConsumer=Jb;Jr.ContextProvider=Xb;Jr.Element=y2;Jr.ForwardRef=Qb;Jr.Fragment=Kb;Jr.Lazy=nT;Jr.Memo=tT;Jr.Portal=C2;Jr.Profiler=qb;Jr.StrictMode=Yb;Jr.Suspense=Zb;Jr.SuspenseList=eT;Jr.isAsyncMode=function(){return!1};Jr.isConcurrentMode=function(){return!1};Jr.isContextConsumer=function(t){return vc(t)===Jb};Jr.isContextProvider=function(t){return vc(t)===Xb};Jr.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===y2};Jr.isForwardRef=function(t){return vc(t)===Qb};Jr.isFragment=function(t){return vc(t)===Kb};Jr.isLazy=function(t){return vc(t)===nT};Jr.isMemo=function(t){return vc(t)===tT};Jr.isPortal=function(t){return vc(t)===C2};Jr.isProfiler=function(t){return vc(t)===qb};Jr.isStrictMode=function(t){return vc(t)===Yb};Jr.isSuspense=function(t){return vc(t)===Zb};Jr.isSuspenseList=function(t){return vc(t)===eT};Jr.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Kb||t===qb||t===Yb||t===Zb||t===eT||t===U_e||typeof t=="object"&&t!==null&&(t.$$typeof===nT||t.$$typeof===tT||t.$$typeof===Xb||t.$$typeof===Jb||t.$$typeof===Qb||t.$$typeof===Iq||t.getModuleId!==void 0)};Jr.typeOf=vc;wq.exports=Jr;var AO=wq.exports;function Yv(t,r,o){var s=y.useRef({});return(!("value"in s.current)||o(s.current.condition,r))&&(s.current.value=t(),s.current.condition=r),s.current.value}var B_e=Number(y.version.split(".")[0]),b2=function(r,o){typeof r=="function"?r(o):ln(r)==="object"&&r&&"current"in r&&(r.current=o)},nl=function(){for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];var c=o.filter(Boolean);return c.length<=1?c[0]:function(d){o.forEach(function(f){b2(f,d)})}},xm=function(){for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return Yv(function(){return nl.apply(void 0,o)},o,function(c,d){return c.length!==d.length||c.every(function(f,v){return f!==d[v]})})},Nm=function(r){var o,s;if(!r)return!1;if(Aq(r)&&B_e>=19)return!0;var c=AO.isMemo(r)?r.type.type:r.type;return!(typeof c=="function"&&!((o=c.prototype)!==null&&o!==void 0&&o.render)&&c.$$typeof!==AO.ForwardRef||typeof r=="function"&&!((s=r.prototype)!==null&&s!==void 0&&s.render)&&r.$$typeof!==AO.ForwardRef)};function Aq(t){return y.isValidElement(t)&&!Cq(t)}var qv=function(r){if(r&&Aq(r)){var o=r;return o.props.propertyIsEnumerable("ref")?o.props.ref:o.ref}return null},aP=y.createContext(null);function V_e(t){var r=t.children,o=t.onBatchResize,s=y.useRef(0),c=y.useRef([]),d=y.useContext(aP),f=y.useCallback(function(v,g,_){s.current+=1;var C=s.current;c.current.push({size:v,element:g,data:_}),Promise.resolve().then(function(){C===s.current&&(o==null||o(c.current),c.current=[])}),d==null||d(v,g,_)},[o,d]);return y.createElement(aP.Provider,{value:f},r)}var Oq=function(){if(typeof Map<"u")return Map;function t(r,o){var s=-1;return r.some(function(c,d){return c[0]===o?(s=d,!0):!1}),s}return function(){function r(){this.__entries__=[]}return Object.defineProperty(r.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),r.prototype.get=function(o){var s=t(this.__entries__,o),c=this.__entries__[s];return c&&c[1]},r.prototype.set=function(o,s){var c=t(this.__entries__,o);~c?this.__entries__[c][1]=s:this.__entries__.push([o,s])},r.prototype.delete=function(o){var s=this.__entries__,c=t(s,o);~c&&s.splice(c,1)},r.prototype.has=function(o){return!!~t(this.__entries__,o)},r.prototype.clear=function(){this.__entries__.splice(0)},r.prototype.forEach=function(o,s){s===void 0&&(s=null);for(var c=0,d=this.__entries__;c<d.length;c++){var f=d[c];o.call(s,f[1],f[0])}},r}()}(),sP=typeof window<"u"&&typeof document<"u"&&window.document===document,YC=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),j_e=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(YC):function(t){return setTimeout(function(){return t(Date.now())},1e3/60)}}(),$_e=2;function H_e(t,r){var o=!1,s=!1,c=0;function d(){o&&(o=!1,t()),s&&v()}function f(){j_e(d)}function v(){var g=Date.now();if(o){if(g-c<$_e)return;s=!0}else o=!0,s=!1,setTimeout(f,r);c=g}return v}var z_e=20,W_e=["top","right","bottom","left","width","height","size","weight"],G_e=typeof MutationObserver<"u",K_e=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=H_e(this.refresh.bind(this),z_e)}return t.prototype.addObserver=function(r){~this.observers_.indexOf(r)||this.observers_.push(r),this.connected_||this.connect_()},t.prototype.removeObserver=function(r){var o=this.observers_,s=o.indexOf(r);~s&&o.splice(s,1),!o.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){var r=this.updateObservers_();r&&this.refresh()},t.prototype.updateObservers_=function(){var r=this.observers_.filter(function(o){return o.gatherActive(),o.hasActive()});return r.forEach(function(o){return o.broadcastActive()}),r.length>0},t.prototype.connect_=function(){!sP||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),G_e?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){!sP||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(r){var o=r.propertyName,s=o===void 0?"":o,c=W_e.some(function(d){return!!~s.indexOf(d)});c&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),xq=function(t,r){for(var o=0,s=Object.keys(r);o<s.length;o++){var c=s[o];Object.defineProperty(t,c,{value:r[c],enumerable:!1,writable:!1,configurable:!0})}return t},pm=function(t){var r=t&&t.ownerDocument&&t.ownerDocument.defaultView;return r||YC},Nq=rT(0,0,0,0);function qC(t){return parseFloat(t)||0}function Y7(t){for(var r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];return r.reduce(function(s,c){var d=t["border-"+c+"-width"];return s+qC(d)},0)}function Y_e(t){for(var r=["top","right","bottom","left"],o={},s=0,c=r;s<c.length;s++){var d=c[s],f=t["padding-"+d];o[d]=qC(f)}return o}function q_e(t){var r=t.getBBox();return rT(0,0,r.width,r.height)}function X_e(t){var r=t.clientWidth,o=t.clientHeight;if(!r&&!o)return Nq;var s=pm(t).getComputedStyle(t),c=Y_e(s),d=c.left+c.right,f=c.top+c.bottom,v=qC(s.width),g=qC(s.height);if(s.boxSizing==="border-box"&&(Math.round(v+d)!==r&&(v-=Y7(s,"left","right")+d),Math.round(g+f)!==o&&(g-=Y7(s,"top","bottom")+f)),!Q_e(t)){var _=Math.round(v+d)-r,C=Math.round(g+f)-o;Math.abs(_)!==1&&(v-=_),Math.abs(C)!==1&&(g-=C)}return rT(c.left,c.top,v,g)}var J_e=function(){return typeof SVGGraphicsElement<"u"?function(t){return t instanceof pm(t).SVGGraphicsElement}:function(t){return t instanceof pm(t).SVGElement&&typeof t.getBBox=="function"}}();function Q_e(t){return t===pm(t).document.documentElement}function Z_e(t){return sP?J_e(t)?q_e(t):X_e(t):Nq}function eSe(t){var r=t.x,o=t.y,s=t.width,c=t.height,d=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,f=Object.create(d.prototype);return xq(f,{x:r,y:o,width:s,height:c,top:o,right:r+s,bottom:c+o,left:r}),f}function rT(t,r,o,s){return{x:t,y:r,width:o,height:s}}var tSe=function(){function t(r){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=rT(0,0,0,0),this.target=r}return t.prototype.isActive=function(){var r=Z_e(this.target);return this.contentRect_=r,r.width!==this.broadcastWidth||r.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var r=this.contentRect_;return this.broadcastWidth=r.width,this.broadcastHeight=r.height,r},t}(),nSe=function(){function t(r,o){var s=eSe(o);xq(this,{target:r,contentRect:s})}return t}(),rSe=function(){function t(r,o,s){if(this.activeObservations_=[],this.observations_=new Oq,typeof r!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=r,this.controller_=o,this.callbackCtx_=s}return t.prototype.observe=function(r){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(r instanceof pm(r).Element))throw new TypeError('parameter 1 is not of type "Element".');var o=this.observations_;o.has(r)||(o.set(r,new tSe(r)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(r){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(r instanceof pm(r).Element))throw new TypeError('parameter 1 is not of type "Element".');var o=this.observations_;o.has(r)&&(o.delete(r),o.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var r=this;this.clearActive(),this.observations_.forEach(function(o){o.isActive()&&r.activeObservations_.push(o)})},t.prototype.broadcastActive=function(){if(this.hasActive()){var r=this.callbackCtx_,o=this.activeObservations_.map(function(s){return new nSe(s.target,s.broadcastRect())});this.callback_.call(r,o,r),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),Pq=typeof WeakMap<"u"?new WeakMap:new Oq,Dq=function(){function t(r){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var o=K_e.getInstance(),s=new rSe(r,o,this);Pq.set(this,s)}return t}();["observe","unobserve","disconnect"].forEach(function(t){Dq.prototype[t]=function(){var r;return(r=Pq.get(this))[t].apply(r,arguments)}});var iSe=function(){return typeof YC.ResizeObserver<"u"?YC.ResizeObserver:Dq}(),gd=new Map;function oSe(t){t.forEach(function(r){var o,s=r.target;(o=gd.get(s))===null||o===void 0||o.forEach(function(c){return c(s)})})}var Lq=new iSe(oSe);function aSe(t,r){gd.has(t)||(gd.set(t,new Set),Lq.observe(t)),gd.get(t).add(r)}function sSe(t,r){gd.has(t)&&(gd.get(t).delete(r),gd.get(t).size||(Lq.unobserve(t),gd.delete(t)))}function io(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function q7(t,r){for(var o=0;o<r.length;o++){var s=r[o];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,Tq(s.key),s)}}function oo(t,r,o){return r&&q7(t.prototype,r),o&&q7(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}function Tv(t,r){return Tv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,s){return o.__proto__=s,o},Tv(t,r)}function Bl(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&Tv(t,r)}function Rv(t){return Rv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Rv(t)}function T2(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(T2=function(){return!!t})()}function or(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function cSe(t,r){if(r&&(ln(r)=="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return or(t)}function Vl(t){var r=T2();return function(){var o,s=Rv(t);if(r){var c=Rv(this).constructor;o=Reflect.construct(s,arguments,c)}else o=s.apply(this,arguments);return cSe(this,o)}}var lSe=function(t){Bl(o,t);var r=Vl(o);function o(){return io(this,o),r.apply(this,arguments)}return oo(o,[{key:"render",value:function(){return this.props.children}}]),o}(y.Component);function uSe(t,r){var o=t.children,s=t.disabled,c=y.useRef(null),d=y.useRef(null),f=y.useContext(aP),v=typeof o=="function",g=v?o(c):o,_=y.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),C=!v&&y.isValidElement(g)&&Nm(g),b=C?qv(g):null,T=xm(b,c),A=function(){var D;return sC(c.current)||(c.current&&ln(c.current)==="object"?sC((D=c.current)===null||D===void 0?void 0:D.nativeElement):null)||sC(d.current)};y.useImperativeHandle(r,function(){return A()});var I=y.useRef(t);I.current=t;var N=y.useCallback(function(P){var D=I.current,x=D.onResize,L=D.data,M=P.getBoundingClientRect(),F=M.width,V=M.height,$=P.offsetWidth,z=P.offsetHeight,K=Math.floor(F),G=Math.floor(V);if(_.current.width!==K||_.current.height!==G||_.current.offsetWidth!==$||_.current.offsetHeight!==z){var J={width:K,height:G,offsetWidth:$,offsetHeight:z};_.current=J;var ne=$===Math.round(F)?F:$,te=z===Math.round(V)?V:z,ce=_e(_e({},J),{},{offsetWidth:ne,offsetHeight:te});f==null||f(ce,P,L),x&&Promise.resolve().then(function(){x(ce,P)})}},[]);return y.useEffect(function(){var P=A();return P&&!s&&aSe(P,N),function(){return sSe(P,N)}},[c.current,s]),y.createElement(lSe,{ref:d},C?y.cloneElement(g,{ref:T}):g)}var dSe=y.forwardRef(uSe),hSe="rc-observer-key";function fSe(t,r){var o=t.children,s=typeof o=="function"?[o]:Qc(o);return s.map(function(c,d){var f=(c==null?void 0:c.key)||"".concat(hSe,"-").concat(d);return y.createElement(dSe,nt({},t,{key:f,ref:d===0?r:void 0}),c)})}var Eu=y.forwardRef(fSe);Eu.Collection=V_e;function cP(t,r){(r==null||r>t.length)&&(r=t.length);for(var o=0,s=Array(r);o<r;o++)s[o]=t[o];return s}function pSe(t){if(Array.isArray(t))return cP(t)}function kq(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function R2(t,r){if(t){if(typeof t=="string")return cP(t,r);var o={}.toString.call(t).slice(8,-1);return o==="Object"&&t.constructor&&(o=t.constructor.name),o==="Map"||o==="Set"?Array.from(t):o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?cP(t,r):void 0}}function mSe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Et(t){return pSe(t)||kq(t)||R2(t)||mSe()}var Mq=function(r){return+setTimeout(r,16)},Fq=function(r){return clearTimeout(r)};typeof window<"u"&&"requestAnimationFrame"in window&&(Mq=function(r){return window.requestAnimationFrame(r)},Fq=function(r){return window.cancelAnimationFrame(r)});var X7=0,w2=new Map;function Uq(t){w2.delete(t)}var ii=function(r){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;X7+=1;var s=X7;function c(d){if(d===0)Uq(s),r();else{var f=Mq(function(){c(d-1)});w2.set(s,f)}}return c(o),s};ii.cancel=function(t){var r=w2.get(t);return Uq(t),Fq(r)};function Bq(t){if(Array.isArray(t))return t}function gSe(t,r){var o=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(o!=null){var s,c,d,f,v=[],g=!0,_=!1;try{if(d=(o=o.call(t)).next,r===0){if(Object(o)!==o)return;g=!1}else for(;!(g=(s=d.call(o)).done)&&(v.push(s.value),v.length!==r);g=!0);}catch(C){_=!0,c=C}finally{try{if(!g&&o.return!=null&&(f=o.return(),Object(f)!==f))return}finally{if(_)throw c}}return v}}function Vq(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ue(t,r){return Bq(t)||gSe(t,r)||R2(t,r)||Vq()}function wv(t){for(var r=0,o,s=0,c=t.length;c>=4;++s,c-=4)o=t.charCodeAt(s)&255|(t.charCodeAt(++s)&255)<<8|(t.charCodeAt(++s)&255)<<16|(t.charCodeAt(++s)&255)<<24,o=(o&65535)*1540483477+((o>>>16)*59797<<16),o^=o>>>24,r=(o&65535)*1540483477+((o>>>16)*59797<<16)^(r&65535)*1540483477+((r>>>16)*59797<<16);switch(c){case 3:r^=(t.charCodeAt(s+2)&255)<<16;case 2:r^=(t.charCodeAt(s+1)&255)<<8;case 1:r^=t.charCodeAt(s)&255,r=(r&65535)*1540483477+((r>>>16)*59797<<16)}return r^=r>>>13,r=(r&65535)*1540483477+((r>>>16)*59797<<16),((r^r>>>15)>>>0).toString(36)}function xa(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function vSe(t,r){if(!t)return!1;if(t.contains)return t.contains(r);for(var o=r;o;){if(o===t)return!0;o=o.parentNode}return!1}var J7="data-rc-order",Q7="data-rc-priority",ESe="rc-util-key",lP=new Map;function jq(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.mark;return r?r.startsWith("data-")?r:"data-".concat(r):ESe}function iT(t){if(t.attachTo)return t.attachTo;var r=document.querySelector("head");return r||document.body}function _Se(t){return t==="queue"?"prependQueue":t?"prepend":"append"}function I2(t){return Array.from((lP.get(t)||t).children).filter(function(r){return r.tagName==="STYLE"})}function $q(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!xa())return null;var o=r.csp,s=r.prepend,c=r.priority,d=c===void 0?0:c,f=_Se(s),v=f==="prependQueue",g=document.createElement("style");g.setAttribute(J7,f),v&&d&&g.setAttribute(Q7,"".concat(d)),o!=null&&o.nonce&&(g.nonce=o==null?void 0:o.nonce),g.innerHTML=t;var _=iT(r),C=_.firstChild;if(s){if(v){var b=(r.styles||I2(_)).filter(function(T){if(!["prepend","prependQueue"].includes(T.getAttribute(J7)))return!1;var A=Number(T.getAttribute(Q7)||0);return d>=A});if(b.length)return _.insertBefore(g,b[b.length-1].nextSibling),g}_.insertBefore(g,C)}else _.appendChild(g);return g}function Hq(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=iT(r);return(r.styles||I2(o)).find(function(s){return s.getAttribute(jq(r))===t})}function Iv(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=Hq(t,r);if(o){var s=iT(r);s.removeChild(o)}}function SSe(t,r){var o=lP.get(t);if(!o||!vSe(document,o)){var s=$q("",r),c=s.parentNode;lP.set(t,c),t.removeChild(s)}}function cu(t,r){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=iT(o),c=I2(s),d=_e(_e({},o),{},{styles:c});SSe(s,d);var f=Hq(r,d);if(f){var v,g;if((v=d.csp)!==null&&v!==void 0&&v.nonce&&f.nonce!==((g=d.csp)===null||g===void 0?void 0:g.nonce)){var _;f.nonce=(_=d.csp)===null||_===void 0?void 0:_.nonce}return f.innerHTML!==t&&(f.innerHTML=t),f}var C=$q(t,d);return C.setAttribute(jq(d),r),C}function ySe(t,r){if(t==null)return{};var o={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(r.indexOf(s)!==-1)continue;o[s]=t[s]}return o}function xn(t,r){if(t==null)return{};var o,s,c=ySe(t,r);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(t);for(s=0;s<d.length;s++)o=d[s],r.indexOf(o)===-1&&{}.propertyIsEnumerable.call(t,o)&&(c[o]=t[o])}return c}function Av(t,r){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=new Set;function c(d,f){var v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,g=s.has(d);if(_a(!g,"Warning: There may be circular references"),g)return!1;if(d===f)return!0;if(o&&v>1)return!1;s.add(d);var _=v+1;if(Array.isArray(d)){if(!Array.isArray(f)||d.length!==f.length)return!1;for(var C=0;C<d.length;C++)if(!c(d[C],f[C],_))return!1;return!0}if(d&&f&&ln(d)==="object"&&ln(f)==="object"){var b=Object.keys(d);return b.length!==Object.keys(f).length?!1:b.every(function(T){return c(d[T],f[T],_)})}return!1}return c(t,r)}var CSe="%";function uP(t){return t.join(CSe)}var bSe=function(){function t(r){io(this,t),be(this,"instanceId",void 0),be(this,"cache",new Map),this.instanceId=r}return oo(t,[{key:"get",value:function(o){return this.opGet(uP(o))}},{key:"opGet",value:function(o){return this.cache.get(o)||null}},{key:"update",value:function(o,s){return this.opUpdate(uP(o),s)}},{key:"opUpdate",value:function(o,s){var c=this.cache.get(o),d=s(c);d===null?this.cache.delete(o):this.cache.set(o,d)}}]),t}(),mm="data-token-hash",Yc="data-css-hash",vd="__cssinjs_instance__";function TSe(){var t=Math.random().toString(12).slice(2);if(typeof document<"u"&&document.head&&document.body){var r=document.body.querySelectorAll("style[".concat(Yc,"]"))||[],o=document.head.firstChild;Array.from(r).forEach(function(c){c[vd]=c[vd]||t,c[vd]===t&&document.head.insertBefore(c,o)});var s={};Array.from(document.querySelectorAll("style[".concat(Yc,"]"))).forEach(function(c){var d=c.getAttribute(Yc);if(s[d]){if(c[vd]===t){var f;(f=c.parentNode)===null||f===void 0||f.removeChild(c)}}else s[d]=!0})}return new bSe(t)}var Xv=y.createContext({hashPriority:"low",cache:TSe(),defaultCache:!0});function RSe(t,r){if(t.length!==r.length)return!1;for(var o=0;o<t.length;o++)if(t[o]!==r[o])return!1;return!0}var A2=function(){function t(){io(this,t),be(this,"cache",void 0),be(this,"keys",void 0),be(this,"cacheCallTimes",void 0),this.cache=new Map,this.keys=[],this.cacheCallTimes=0}return oo(t,[{key:"size",value:function(){return this.keys.length}},{key:"internalGet",value:function(o){var s,c,d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,f={map:this.cache};return o.forEach(function(v){if(!f)f=void 0;else{var g;f=(g=f)===null||g===void 0||(g=g.map)===null||g===void 0?void 0:g.get(v)}}),(s=f)!==null&&s!==void 0&&s.value&&d&&(f.value[1]=this.cacheCallTimes++),(c=f)===null||c===void 0?void 0:c.value}},{key:"get",value:function(o){var s;return(s=this.internalGet(o,!0))===null||s===void 0?void 0:s[0]}},{key:"has",value:function(o){return!!this.internalGet(o)}},{key:"set",value:function(o,s){var c=this;if(!this.has(o)){if(this.size()+1>t.MAX_CACHE_SIZE+t.MAX_CACHE_OFFSET){var d=this.keys.reduce(function(_,C){var b=Ue(_,2),T=b[1];return c.internalGet(C)[1]<T?[C,c.internalGet(C)[1]]:_},[this.keys[0],this.cacheCallTimes]),f=Ue(d,1),v=f[0];this.delete(v)}this.keys.push(o)}var g=this.cache;o.forEach(function(_,C){if(C===o.length-1)g.set(_,{value:[s,c.cacheCallTimes++]});else{var b=g.get(_);b?b.map||(b.map=new Map):g.set(_,{map:new Map}),g=g.get(_).map}})}},{key:"deleteByPath",value:function(o,s){var c=o.get(s[0]);if(s.length===1){var d;return c.map?o.set(s[0],{map:c.map}):o.delete(s[0]),(d=c.value)===null||d===void 0?void 0:d[0]}var f=this.deleteByPath(c.map,s.slice(1));return(!c.map||c.map.size===0)&&!c.value&&o.delete(s[0]),f}},{key:"delete",value:function(o){if(this.has(o))return this.keys=this.keys.filter(function(s){return!RSe(s,o)}),this.deleteByPath(this.cache,o)}}]),t}();be(A2,"MAX_CACHE_SIZE",20);be(A2,"MAX_CACHE_OFFSET",5);var Z7=0,zq=function(){function t(r){io(this,t),be(this,"derivatives",void 0),be(this,"id",void 0),this.derivatives=Array.isArray(r)?r:[r],this.id=Z7,r.length===0&&(r.length>0,void 0),Z7+=1}return oo(t,[{key:"getDerivativeToken",value:function(o){return this.derivatives.reduce(function(s,c){return c(o,s)},void 0)}}]),t}(),OO=new A2;function dP(t){var r=Array.isArray(t)?t:[t];return OO.has(r)||OO.set(r,new zq(r)),OO.get(r)}var wSe=new WeakMap,xO={};function ISe(t,r){for(var o=wSe,s=0;s<r.length;s+=1){var c=r[s];o.has(c)||o.set(c,new WeakMap),o=o.get(c)}return o.has(xO)||o.set(xO,t()),o.get(xO)}var e9=new WeakMap;function Qg(t){var r=e9.get(t)||"";return r||(Object.keys(t).forEach(function(o){var s=t[o];r+=o,s instanceof zq?r+=s.id:s&&ln(s)==="object"?r+=Qg(s):r+=s}),r=wv(r),e9.set(t,r)),r}function t9(t,r){return wv("".concat(r,"_").concat(Qg(t)))}var hP=xa();function Xe(t){return typeof t=="number"?"".concat(t,"px"):t}function XC(t,r,o){var s,c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},d=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(d)return t;var f=_e(_e({},c),{},(s={},be(s,mm,r),be(s,Yc,o),s)),v=Object.keys(f).map(function(g){var _=f[g];return _?"".concat(g,'="').concat(_,'"'):null}).filter(function(g){return g}).join(" ");return"<style ".concat(v,">").concat(t,"</style>")}var cC=function(r){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return"--".concat(o?"".concat(o,"-"):"").concat(r).replace(/([a-z0-9])([A-Z])/g,"$1-$2").replace(/([A-Z]+)([A-Z][a-z0-9]+)/g,"$1-$2").replace(/([a-z])([A-Z0-9])/g,"$1-$2").toLowerCase()},ASe=function(r,o,s){return Object.keys(r).length?".".concat(o).concat(s!=null&&s.scope?".".concat(s.scope):"","{").concat(Object.entries(r).map(function(c){var d=Ue(c,2),f=d[0],v=d[1];return"".concat(f,":").concat(v,";")}).join(""),"}"):""},Wq=function(r,o,s){var c={},d={};return Object.entries(r).forEach(function(f){var v,g,_=Ue(f,2),C=_[0],b=_[1];if(s!=null&&(v=s.preserve)!==null&&v!==void 0&&v[C])d[C]=b;else if((typeof b=="string"||typeof b=="number")&&!(s!=null&&(g=s.ignore)!==null&&g!==void 0&&g[C])){var T,A=cC(C,s==null?void 0:s.prefix);c[A]=typeof b=="number"&&!(s!=null&&(T=s.unitless)!==null&&T!==void 0&&T[C])?"".concat(b,"px"):String(b),d[C]="var(".concat(A,")")}}),[d,ASe(c,o,{scope:s==null?void 0:s.scope})]},n9=xa()?y.useLayoutEffect:y.useEffect,Rr=function(r,o){var s=y.useRef(!0);n9(function(){return r(s.current)},o),n9(function(){return s.current=!1,function(){s.current=!0}},[])},r9=function(r,o){Rr(function(s){if(!s)return r()},o)},OSe=_e({},Fh),i9=OSe.useInsertionEffect,xSe=function(r,o,s){y.useMemo(r,s),Rr(function(){return o(!0)},s)},NSe=i9?function(t,r,o){return i9(function(){return t(),r()},o)}:xSe,PSe=_e({},Fh),DSe=PSe.useInsertionEffect,LSe=function(r){var o=[],s=!1;function c(d){s||o.push(d)}return y.useEffect(function(){return s=!1,function(){s=!0,o.length&&o.forEach(function(d){return d()})}},r),c},kSe=function(){return function(r){r()}},MSe=typeof DSe<"u"?LSe:kSe;function O2(t,r,o,s,c){var d=y.useContext(Xv),f=d.cache,v=[t].concat(Et(r)),g=uP(v),_=MSe([g]),C=function(I){f.opUpdate(g,function(N){var P=N||[void 0,void 0],D=Ue(P,2),x=D[0],L=x===void 0?0:x,M=D[1],F=M,V=F||o(),$=[L,V];return I?I($):$})};y.useMemo(function(){C()},[g]);var b=f.opGet(g),T=b[1];return NSe(function(){c==null||c(T)},function(A){return C(function(I){var N=Ue(I,2),P=N[0],D=N[1];return A&&P===0&&(c==null||c(T)),[P+1,D]}),function(){f.opUpdate(g,function(I){var N=I||[],P=Ue(N,2),D=P[0],x=D===void 0?0:D,L=P[1],M=x-1;return M===0?(_(function(){(A||!f.opGet(g))&&(s==null||s(L,!1))}),null):[x-1,L]})}},[g]),T}var FSe={},USe="css",Ah=new Map;function BSe(t){Ah.set(t,(Ah.get(t)||0)+1)}function VSe(t,r){if(typeof document<"u"){var o=document.querySelectorAll("style[".concat(mm,'="').concat(t,'"]'));o.forEach(function(s){if(s[vd]===r){var c;(c=s.parentNode)===null||c===void 0||c.removeChild(s)}})}}var jSe=0;function $Se(t,r){Ah.set(t,(Ah.get(t)||0)-1);var o=Array.from(Ah.keys()),s=o.filter(function(c){var d=Ah.get(c)||0;return d<=0});o.length-s.length>jSe&&s.forEach(function(c){VSe(c,r),Ah.delete(c)})}var HSe=function(r,o,s,c){var d=s.getDerivativeToken(r),f=_e(_e({},d),o);return c&&(f=c(f)),f},Gq="token";function zSe(t,r){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=y.useContext(Xv),c=s.cache.instanceId,d=s.container,f=o.salt,v=f===void 0?"":f,g=o.override,_=g===void 0?FSe:g,C=o.formatToken,b=o.getComputedToken,T=o.cssVar,A=ISe(function(){return Object.assign.apply(Object,[{}].concat(Et(r)))},r),I=Qg(A),N=Qg(_),P=T?Qg(T):"",D=O2(Gq,[v,t.id,I,N,P],function(){var x,L=b?b(A,_,t):HSe(A,_,t,C),M=_e({},L),F="";if(T){var V=Wq(L,T.key,{prefix:T.prefix,ignore:T.ignore,unitless:T.unitless,preserve:T.preserve}),$=Ue(V,2);L=$[0],F=$[1]}var z=t9(L,v);L._tokenKey=z,M._tokenKey=t9(M,v);var K=(x=T==null?void 0:T.key)!==null&&x!==void 0?x:z;L._themeKey=K,BSe(K);var G="".concat(USe,"-").concat(wv(z));return L._hashId=G,[L,G,M,F,(T==null?void 0:T.key)||""]},function(x){$Se(x[0]._themeKey,c)},function(x){var L=Ue(x,4),M=L[0],F=L[3];if(T&&F){var V=cu(F,wv("css-variables-".concat(M._themeKey)),{mark:Yc,prepend:"queue",attachTo:d,priority:-999});V[vd]=c,V.setAttribute(mm,M._themeKey)}});return D}var WSe=function(r,o,s){var c=Ue(r,5),d=c[2],f=c[3],v=c[4],g=s||{},_=g.plain;if(!f)return null;var C=d._tokenKey,b=-999,T={"data-rc-order":"prependQueue","data-rc-priority":"".concat(b)},A=XC(f,v,C,T,_);return[b,C,A]},GSe={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Kq="comm",Yq="rule",qq="decl",KSe="@import",YSe="@namespace",qSe="@keyframes",XSe="@layer",Xq=Math.abs,x2=String.fromCharCode;function Jq(t){return t.trim()}function lC(t,r,o){return t.replace(r,o)}function JSe(t,r,o){return t.indexOf(r,o)}function im(t,r){return t.charCodeAt(r)|0}function gm(t,r,o){return t.slice(r,o)}function Al(t){return t.length}function QSe(t){return t.length}function Ay(t,r){return r.push(t),t}var oT=1,vm=1,Qq=0,mc=0,uo=0,Pm="";function N2(t,r,o,s,c,d,f,v){return{value:t,root:r,parent:o,type:s,props:c,children:d,line:oT,column:vm,length:f,return:"",siblings:v}}function ZSe(){return uo}function eye(){return uo=mc>0?im(Pm,--mc):0,vm--,uo===10&&(vm=1,oT--),uo}function qc(){return uo=mc<Qq?im(Pm,mc++):0,vm++,uo===10&&(vm=1,oT++),uo}function Ed(){return im(Pm,mc)}function uC(){return mc}function aT(t,r){return gm(Pm,t,r)}function Ov(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function tye(t){return oT=vm=1,Qq=Al(Pm=t),mc=0,[]}function nye(t){return Pm="",t}function NO(t){return Jq(aT(mc-1,fP(t===91?t+2:t===40?t+1:t)))}function rye(t){for(;(uo=Ed())&&uo<33;)qc();return Ov(t)>2||Ov(uo)>3?"":" "}function iye(t,r){for(;--r&&qc()&&!(uo<48||uo>102||uo>57&&uo<65||uo>70&&uo<97););return aT(t,uC()+(r<6&&Ed()==32&&qc()==32))}function fP(t){for(;qc();)switch(uo){case t:return mc;case 34:case 39:t!==34&&t!==39&&fP(uo);break;case 40:t===41&&fP(t);break;case 92:qc();break}return mc}function oye(t,r){for(;qc()&&t+uo!==47+10;)if(t+uo===42+42&&Ed()===47)break;return"/*"+aT(r,mc-1)+"*"+x2(t===47?t:qc())}function aye(t){for(;!Ov(Ed());)qc();return aT(t,mc)}function sye(t){return nye(dC("",null,null,null,[""],t=tye(t),0,[0],t))}function dC(t,r,o,s,c,d,f,v,g){for(var _=0,C=0,b=f,T=0,A=0,I=0,N=1,P=1,D=1,x=0,L="",M=c,F=d,V=s,$=L;P;)switch(I=x,x=qc()){case 40:if(I!=108&&im($,b-1)==58){JSe($+=lC(NO(x),"&","&\f"),"&\f",Xq(_?v[_-1]:0))!=-1&&(D=-1);break}case 34:case 39:case 91:$+=NO(x);break;case 9:case 10:case 13:case 32:$+=rye(I);break;case 92:$+=iye(uC()-1,7);continue;case 47:switch(Ed()){case 42:case 47:Ay(cye(oye(qc(),uC()),r,o,g),g),(Ov(I||1)==5||Ov(Ed()||1)==5)&&Al($)&&gm($,-1,void 0)!==" "&&($+=" ");break;default:$+="/"}break;case 123*N:v[_++]=Al($)*D;case 125*N:case 59:case 0:switch(x){case 0:case 125:P=0;case 59+C:D==-1&&($=lC($,/\f/g,"")),A>0&&(Al($)-b||N===0&&I===47)&&Ay(A>32?a9($+";",s,o,b-1,g):a9(lC($," ","")+";",s,o,b-2,g),g);break;case 59:$+=";";default:if(Ay(V=o9($,r,o,_,C,c,v,L,M=[],F=[],b,d),d),x===123)if(C===0)dC($,r,V,V,M,d,b,v,F);else{switch(T){case 99:if(im($,3)===110)break;case 108:if(im($,2)===97)break;default:C=0;case 100:case 109:case 115:}C?dC(t,V,V,s&&Ay(o9(t,V,V,0,0,c,v,L,c,M=[],b,F),F),c,F,b,v,s?M:F):dC($,V,V,V,[""],F,0,v,F)}}_=C=A=0,N=D=1,L=$="",b=f;break;case 58:b=1+Al($),A=I;default:if(N<1){if(x==123)--N;else if(x==125&&N++==0&&eye()==125)continue}switch($+=x2(x),x*N){case 38:D=C>0?1:($+="\f",-1);break;case 44:v[_++]=(Al($)-1)*D,D=1;break;case 64:Ed()===45&&($+=NO(qc())),T=Ed(),C=b=Al(L=$+=aye(uC())),x++;break;case 45:I===45&&Al($)==2&&(N=0)}}return d}function o9(t,r,o,s,c,d,f,v,g,_,C,b){for(var T=c-1,A=c===0?d:[""],I=QSe(A),N=0,P=0,D=0;N<s;++N)for(var x=0,L=gm(t,T+1,T=Xq(P=f[N])),M=t;x<I;++x)(M=Jq(P>0?A[x]+" "+L:lC(L,/&\f/g,A[x])))&&(g[D++]=M);return N2(t,r,o,c===0?Yq:v,g,_,C,b)}function cye(t,r,o,s){return N2(t,r,o,Kq,x2(ZSe()),gm(t,2,-2),0,s)}function a9(t,r,o,s,c){return N2(t,r,o,qq,gm(t,0,s),gm(t,s+1,-1),s,c)}function pP(t,r){for(var o="",s=0;s<t.length;s++)o+=r(t[s],s,t,r)||"";return o}function lye(t,r,o,s){switch(t.type){case XSe:if(t.children.length)break;case KSe:case YSe:case qq:return t.return=t.return||t.value;case Kq:return"";case qSe:return t.return=t.value+"{"+pP(t.children,s)+"}";case Yq:if(!Al(t.value=t.props.join(",")))return""}return Al(o=pP(t.children,s))?t.return=t.value+"{"+o+"}":""}var s9="data-ant-cssinjs-cache-path",Zq="_FILE_STYLE__",Mh,eX=!0;function uye(){if(!Mh&&(Mh={},xa())){var t=document.createElement("div");t.className=s9,t.style.position="fixed",t.style.visibility="hidden",t.style.top="-9999px",document.body.appendChild(t);var r=getComputedStyle(t).content||"";r=r.replace(/^"/,"").replace(/"$/,""),r.split(";").forEach(function(c){var d=c.split(":"),f=Ue(d,2),v=f[0],g=f[1];Mh[v]=g});var o=document.querySelector("style[".concat(s9,"]"));if(o){var s;eX=!1,(s=o.parentNode)===null||s===void 0||s.removeChild(o)}document.body.removeChild(t)}}function dye(t){return uye(),!!Mh[t]}function hye(t){var r=Mh[t],o=null;if(r&&xa())if(eX)o=Zq;else{var s=document.querySelector("style[".concat(Yc,'="').concat(Mh[t],'"]'));s?o=s.innerHTML:delete Mh[t]}return[o,r]}var fye="_skip_check_",tX="_multi_value_";function hC(t){var r=pP(sye(t),lye);return r.replace(/\{%%%\:[^;];}/g,";")}function pye(t){return ln(t)==="object"&&t&&(fye in t||tX in t)}function c9(t,r,o){if(!r)return t;var s=".".concat(r),c=o==="low"?":where(".concat(s,")"):s,d=t.split(",").map(function(f){var v,g=f.trim().split(/\s+/),_=g[0]||"",C=((v=_.match(/^\w+/))===null||v===void 0?void 0:v[0])||"";return _="".concat(C).concat(c).concat(_.slice(C.length)),[_].concat(Et(g.slice(1))).join(" ")});return d.join(",")}var mye=function t(r){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{root:!0,parentSelectors:[]},c=s.root,d=s.injectHash,f=s.parentSelectors,v=o.hashId,g=o.layer;o.path;var _=o.hashPriority,C=o.transformers,b=C===void 0?[]:C;o.linters;var T="",A={};function I(D){var x=D.getName(v);if(!A[x]){var L=t(D.style,o,{root:!1,parentSelectors:f}),M=Ue(L,1),F=M[0];A[x]="@keyframes ".concat(D.getName(v)).concat(F)}}function N(D){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return D.forEach(function(L){Array.isArray(L)?N(L,x):L&&x.push(L)}),x}var P=N(Array.isArray(r)?r:[r]);return P.forEach(function(D){var x=typeof D=="string"&&!c?{}:D;if(typeof x=="string")T+="".concat(x,`
`);else if(x._keyframe)I(x);else{var L=b.reduce(function(M,F){var V;return(F==null||(V=F.visit)===null||V===void 0?void 0:V.call(F,M))||M},x);Object.keys(L).forEach(function(M){var F=L[M];if(ln(F)==="object"&&F&&(M!=="animationName"||!F._keyframe)&&!pye(F)){var V=!1,$=M.trim(),z=!1;(c||d)&&v?$.startsWith("@")?V=!0:$==="&"?$=c9("",v,_):$=c9(M,v,_):c&&!v&&($==="&"||$==="")&&($="",z=!0);var K=t(F,o,{root:z,injectHash:V,parentSelectors:[].concat(Et(f),[$])}),G=Ue(K,2),J=G[0],ne=G[1];A=_e(_e({},A),ne),T+="".concat($).concat(J)}else{let oe=function(ae,ie){var ve=ae.replace(/[A-Z]/g,function(le){return"-".concat(le.toLowerCase())}),me=ie;!GSe[ae]&&typeof me=="number"&&me!==0&&(me="".concat(me,"px")),ae==="animationName"&&ie!==null&&ie!==void 0&&ie._keyframe&&(I(ie),me=ie.getName(v)),T+="".concat(ve,":").concat(me,";")};var ge=oe,te,ce=(te=F==null?void 0:F.value)!==null&&te!==void 0?te:F;ln(F)==="object"&&F!==null&&F!==void 0&&F[tX]&&Array.isArray(ce)?ce.forEach(function(ae){oe(M,ae)}):oe(M,ce)}})}}),c?g&&(T&&(T="@layer ".concat(g.name," {").concat(T,"}")),g.dependencies&&(A["@layer ".concat(g.name)]=g.dependencies.map(function(D){return"@layer ".concat(D,", ").concat(g.name,";")}).join(`
`))):T="{".concat(T,"}"),[T,A]};function nX(t,r){return wv("".concat(t.join("%")).concat(r))}function gye(){return null}var rX="style";function mP(t,r){var o=t.token,s=t.path,c=t.hashId,d=t.layer,f=t.nonce,v=t.clientOnly,g=t.order,_=g===void 0?0:g,C=y.useContext(Xv),b=C.autoClear;C.mock;var T=C.defaultCache,A=C.hashPriority,I=C.container,N=C.ssrInline,P=C.transformers,D=C.linters,x=C.cache,L=C.layer,M=o._tokenKey,F=[M];L&&F.push("layer"),F.push.apply(F,Et(s));var V=hP,$=O2(rX,F,function(){var ne=F.join("|");if(dye(ne)){var te=hye(ne),ce=Ue(te,2),ge=ce[0],oe=ce[1];if(ge)return[ge,M,oe,{},v,_]}var ae=r(),ie=mye(ae,{hashId:c,hashPriority:A,layer:L?d:void 0,path:s.join("-"),transformers:P,linters:D}),ve=Ue(ie,2),me=ve[0],le=ve[1],de=hC(me),Ee=nX(F,de);return[de,M,Ee,le,v,_]},function(ne,te){var ce=Ue(ne,3),ge=ce[2];(te||b)&&hP&&Iv(ge,{mark:Yc})},function(ne){var te=Ue(ne,4),ce=te[0];te[1];var ge=te[2],oe=te[3];if(V&&ce!==Zq){var ae={mark:Yc,prepend:L?!1:"queue",attachTo:I,priority:_},ie=typeof f=="function"?f():f;ie&&(ae.csp={nonce:ie});var ve=[],me=[];Object.keys(oe).forEach(function(de){de.startsWith("@layer")?ve.push(de):me.push(de)}),ve.forEach(function(de){cu(hC(oe[de]),"_layer-".concat(de),_e(_e({},ae),{},{prepend:!0}))});var le=cu(ce,ge,ae);le[vd]=x.instanceId,le.setAttribute(mm,M),me.forEach(function(de){cu(hC(oe[de]),"_effect-".concat(de),ae)})}}),z=Ue($,3),K=z[0],G=z[1],J=z[2];return function(ne){var te;if(!N||V||!T)te=y.createElement(gye,null);else{var ce;te=y.createElement("style",nt({},(ce={},be(ce,mm,G),be(ce,Yc,J),ce),{dangerouslySetInnerHTML:{__html:K}}))}return y.createElement(y.Fragment,null,te,ne)}}var vye=function(r,o,s){var c=Ue(r,6),d=c[0],f=c[1],v=c[2],g=c[3],_=c[4],C=c[5],b=s||{},T=b.plain;if(_)return null;var A=d,I={"data-rc-order":"prependQueue","data-rc-priority":"".concat(C)};return A=XC(d,f,v,I,T),g&&Object.keys(g).forEach(function(N){if(!o[N]){o[N]=!0;var P=hC(g[N]),D=XC(P,f,"_effect-".concat(N),I,T);N.startsWith("@layer")?A=D+A:A+=D}}),[C,v,A]},iX="cssVar",Eye=function(r,o){var s=r.key,c=r.prefix,d=r.unitless,f=r.ignore,v=r.token,g=r.scope,_=g===void 0?"":g,C=y.useContext(Xv),b=C.cache.instanceId,T=C.container,A=v._tokenKey,I=[].concat(Et(r.path),[s,_,A]),N=O2(iX,I,function(){var P=o(),D=Wq(P,s,{prefix:c,unitless:d,ignore:f,scope:_}),x=Ue(D,2),L=x[0],M=x[1],F=nX(I,M);return[L,M,F,s]},function(P){var D=Ue(P,3),x=D[2];hP&&Iv(x,{mark:Yc})},function(P){var D=Ue(P,3),x=D[1],L=D[2];if(x){var M=cu(x,L,{mark:Yc,prepend:"queue",attachTo:T,priority:-999});M[vd]=b,M.setAttribute(mm,s)}});return N},_ye=function(r,o,s){var c=Ue(r,4),d=c[1],f=c[2],v=c[3],g=s||{},_=g.plain;if(!d)return null;var C=-999,b={"data-rc-order":"prependQueue","data-rc-priority":"".concat(C)},T=XC(d,v,f,b,_);return[C,f,T]},bg;bg={},be(bg,rX,vye),be(bg,Gq,WSe),be(bg,iX,_ye);var _r=function(){function t(r,o){io(this,t),be(this,"name",void 0),be(this,"style",void 0),be(this,"_keyframe",!0),this.name=r,this.style=o}return oo(t,[{key:"getName",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return o?"".concat(o,"-").concat(this.name):this.name}}]),t}();function Ap(t){return t.notSplit=!0,t}Ap(["borderTop","borderBottom"]),Ap(["borderTop"]),Ap(["borderBottom"]),Ap(["borderLeft","borderRight"]),Ap(["borderLeft"]),Ap(["borderRight"]);var Sye=y.createContext({});const P2=Sye;function oX(t){return Bq(t)||kq(t)||R2(t)||Vq()}function uc(t,r){for(var o=t,s=0;s<r.length;s+=1){if(o==null)return;o=o[r[s]]}return o}function aX(t,r,o,s){if(!r.length)return o;var c=oX(r),d=c[0],f=c.slice(1),v;return!t&&typeof d=="number"?v=[]:Array.isArray(t)?v=Et(t):v=_e({},t),s&&o===void 0&&f.length===1?delete v[d][f[0]]:v[d]=aX(v[d],f,o,s),v}function ac(t,r,o){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return r.length&&s&&o===void 0&&!uc(t,r.slice(0,-1))?t:aX(t,r,o,s)}function yye(t){return ln(t)==="object"&&t!==null&&Object.getPrototypeOf(t)===Object.prototype}function l9(t){return Array.isArray(t)?[]:{}}var Cye=typeof Reflect>"u"?Object.keys:Reflect.ownKeys;function qp(){for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];var s=l9(r[0]);return r.forEach(function(c){function d(f,v){var g=new Set(v),_=uc(c,f),C=Array.isArray(_);if(C||yye(_)){if(!g.has(_)){g.add(_);var b=uc(s,f);C?s=ac(s,f,[]):(!b||ln(b)!=="object")&&(s=ac(s,f,l9(_))),Cye(_).forEach(function(T){d([].concat(Et(f),[T]),g)})}}else s=ac(s,f,_)}d([])}),s}function bye(){}const Tye=y.createContext({}),sT=()=>{const t=()=>{};return t.deprecated=bye,t},sX=y.createContext(void 0);var cX={items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"},Rye={yearFormat:"YYYY",dayFormat:"D",cellMeridiemFormat:"A",monthBeforeYear:!0},wye=_e(_e({},Rye),{},{locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"OK",clear:"Clear",week:"Week",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",dateFormat:"M/D/YYYY",dateTimeFormat:"M/D/YYYY HH:mm:ss",previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"});const Iye={placeholder:"Select time",rangePlaceholder:["Start time","End time"]},lX=Iye,Aye={lang:Object.assign({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeQuarterPlaceholder:["Start quarter","End quarter"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},wye),timePickerLocale:Object.assign({},lX)},u9=Aye,_s="${label} is not a valid ${type}",Oye={locale:"en",Pagination:cX,DatePicker:u9,TimePicker:lX,Calendar:u9,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",filterCheckAll:"Select all items",filterSearchPlaceholder:"Search in filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Tour:{Next:"Next",Previous:"Previous",Finish:"Finish"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",deselectAll:"Deselect all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand",collapse:"Collapse"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:_s,method:_s,array:_s,object:_s,number:_s,date:_s,boolean:_s,integer:_s,float:_s,regexp:_s,email:_s,url:_s,hex:_s},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"},QRCode:{expired:"QR code expired",refresh:"Refresh",scanned:"Scanned"},ColorPicker:{presetEmpty:"Empty",transparent:"Transparent",singleColor:"Single",gradientColor:"Gradient"}},Hh=Oye;Object.assign({},Hh.Modal);let fC=[];const d9=()=>fC.reduce((t,r)=>Object.assign(Object.assign({},t),r),Hh.Modal);function xye(t){if(t){const r=Object.assign({},t);return fC.push(r),d9(),()=>{fC=fC.filter(o=>o!==r),d9()}}Object.assign({},Hh.Modal)}const Nye=y.createContext(void 0),D2=Nye,Pye=(t,r)=>{const o=y.useContext(D2),s=y.useMemo(()=>{var d;const f=r||Hh[t],v=(d=o==null?void 0:o[t])!==null&&d!==void 0?d:{};return Object.assign(Object.assign({},typeof f=="function"?f():f),v||{})},[t,r,o]),c=y.useMemo(()=>{const d=o==null?void 0:o.locale;return o!=null&&o.exist&&!d?Hh.locale:d},[o]);return[s,c]},Dm=Pye,Dye="internalMark",Lye=t=>{const{locale:r={},children:o,_ANT_MARK__:s}=t;y.useEffect(()=>xye(r==null?void 0:r.Modal),[r]);const c=y.useMemo(()=>Object.assign(Object.assign({},r),{exist:!0}),[r]);return y.createElement(D2.Provider,{value:c},o)},kye=Lye,uX={blue:"#1677FF",purple:"#722ED1",cyan:"#13C2C2",green:"#52C41A",magenta:"#EB2F96",pink:"#EB2F96",red:"#F5222D",orange:"#FA8C16",yellow:"#FADB14",volcano:"#FA541C",geekblue:"#2F54EB",gold:"#FAAD14",lime:"#A0D911"},Mye=Object.assign(Object.assign({},uX),{colorPrimary:"#1677ff",colorSuccess:"#52c41a",colorWarning:"#faad14",colorError:"#ff4d4f",colorInfo:"#1677ff",colorLink:"",colorTextBase:"",colorBgBase:"",fontFamily:`-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial,
'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',
'Noto Color Emoji'`,fontFamilyCode:"'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace",fontSize:14,lineWidth:1,lineType:"solid",motionUnit:.1,motionBase:0,motionEaseOutCirc:"cubic-bezier(0.08, 0.82, 0.17, 1)",motionEaseInOutCirc:"cubic-bezier(0.78, 0.14, 0.15, 0.86)",motionEaseOut:"cubic-bezier(0.215, 0.61, 0.355, 1)",motionEaseInOut:"cubic-bezier(0.645, 0.045, 0.355, 1)",motionEaseOutBack:"cubic-bezier(0.12, 0.4, 0.29, 1.46)",motionEaseInBack:"cubic-bezier(0.71, -0.46, 0.88, 0.6)",motionEaseInQuint:"cubic-bezier(0.755, 0.05, 0.855, 0.06)",motionEaseOutQuint:"cubic-bezier(0.23, 1, 0.32, 1)",borderRadius:6,sizeUnit:4,sizeStep:4,sizePopupArrow:16,controlHeight:32,zIndexBase:0,zIndexPopupBase:1e3,opacityImage:1,wireframe:!1,motion:!0}),xv=Mye,Fo=Math.round;function PO(t,r){const o=t.replace(/^[^(]*\((.*)/,"$1").replace(/\).*/,"").match(/\d*\.?\d+%?/g)||[],s=o.map(c=>parseFloat(c));for(let c=0;c<3;c+=1)s[c]=r(s[c]||0,o[c]||"",c);return o[3]?s[3]=o[3].includes("%")?s[3]/100:s[3]:s[3]=1,s}const h9=(t,r,o)=>o===0?t:t/100;function Tg(t,r){const o=r||255;return t>o?o:t<0?0:t}class qr{constructor(r){be(this,"isValid",!0),be(this,"r",0),be(this,"g",0),be(this,"b",0),be(this,"a",1),be(this,"_h",void 0),be(this,"_s",void 0),be(this,"_l",void 0),be(this,"_v",void 0),be(this,"_max",void 0),be(this,"_min",void 0),be(this,"_brightness",void 0);function o(c){return c[0]in r&&c[1]in r&&c[2]in r}if(r)if(typeof r=="string"){let d=function(f){return c.startsWith(f)};var s=d;const c=r.trim();/^#?[A-F\d]{3,8}$/i.test(c)?this.fromHexString(c):d("rgb")?this.fromRgbString(c):d("hsl")?this.fromHslString(c):(d("hsv")||d("hsb"))&&this.fromHsvString(c)}else if(r instanceof qr)this.r=r.r,this.g=r.g,this.b=r.b,this.a=r.a,this._h=r._h,this._s=r._s,this._l=r._l,this._v=r._v;else if(o("rgb"))this.r=Tg(r.r),this.g=Tg(r.g),this.b=Tg(r.b),this.a=typeof r.a=="number"?Tg(r.a,1):1;else if(o("hsl"))this.fromHsl(r);else if(o("hsv"))this.fromHsv(r);else throw new Error("@ant-design/fast-color: unsupported input "+JSON.stringify(r))}setR(r){return this._sc("r",r)}setG(r){return this._sc("g",r)}setB(r){return this._sc("b",r)}setA(r){return this._sc("a",r,1)}setHue(r){const o=this.toHsv();return o.h=r,this._c(o)}getLuminance(){function r(d){const f=d/255;return f<=.03928?f/12.92:Math.pow((f+.055)/1.055,2.4)}const o=r(this.r),s=r(this.g),c=r(this.b);return .2126*o+.7152*s+.0722*c}getHue(){if(typeof this._h>"u"){const r=this.getMax()-this.getMin();r===0?this._h=0:this._h=Fo(60*(this.r===this.getMax()?(this.g-this.b)/r+(this.g<this.b?6:0):this.g===this.getMax()?(this.b-this.r)/r+2:(this.r-this.g)/r+4))}return this._h}getSaturation(){if(typeof this._s>"u"){const r=this.getMax()-this.getMin();r===0?this._s=0:this._s=r/this.getMax()}return this._s}getLightness(){return typeof this._l>"u"&&(this._l=(this.getMax()+this.getMin())/510),this._l}getValue(){return typeof this._v>"u"&&(this._v=this.getMax()/255),this._v}getBrightness(){return typeof this._brightness>"u"&&(this._brightness=(this.r*299+this.g*587+this.b*114)/1e3),this._brightness}darken(r=10){const o=this.getHue(),s=this.getSaturation();let c=this.getLightness()-r/100;return c<0&&(c=0),this._c({h:o,s,l:c,a:this.a})}lighten(r=10){const o=this.getHue(),s=this.getSaturation();let c=this.getLightness()+r/100;return c>1&&(c=1),this._c({h:o,s,l:c,a:this.a})}mix(r,o=50){const s=this._c(r),c=o/100,d=v=>(s[v]-this[v])*c+this[v],f={r:Fo(d("r")),g:Fo(d("g")),b:Fo(d("b")),a:Fo(d("a")*100)/100};return this._c(f)}tint(r=10){return this.mix({r:255,g:255,b:255,a:1},r)}shade(r=10){return this.mix({r:0,g:0,b:0,a:1},r)}onBackground(r){const o=this._c(r),s=this.a+o.a*(1-this.a),c=d=>Fo((this[d]*this.a+o[d]*o.a*(1-this.a))/s);return this._c({r:c("r"),g:c("g"),b:c("b"),a:s})}isDark(){return this.getBrightness()<128}isLight(){return this.getBrightness()>=128}equals(r){return this.r===r.r&&this.g===r.g&&this.b===r.b&&this.a===r.a}clone(){return this._c(this)}toHexString(){let r="#";const o=(this.r||0).toString(16);r+=o.length===2?o:"0"+o;const s=(this.g||0).toString(16);r+=s.length===2?s:"0"+s;const c=(this.b||0).toString(16);if(r+=c.length===2?c:"0"+c,typeof this.a=="number"&&this.a>=0&&this.a<1){const d=Fo(this.a*255).toString(16);r+=d.length===2?d:"0"+d}return r}toHsl(){return{h:this.getHue(),s:this.getSaturation(),l:this.getLightness(),a:this.a}}toHslString(){const r=this.getHue(),o=Fo(this.getSaturation()*100),s=Fo(this.getLightness()*100);return this.a!==1?`hsla(${r},${o}%,${s}%,${this.a})`:`hsl(${r},${o}%,${s}%)`}toHsv(){return{h:this.getHue(),s:this.getSaturation(),v:this.getValue(),a:this.a}}toRgb(){return{r:this.r,g:this.g,b:this.b,a:this.a}}toRgbString(){return this.a!==1?`rgba(${this.r},${this.g},${this.b},${this.a})`:`rgb(${this.r},${this.g},${this.b})`}toString(){return this.toRgbString()}_sc(r,o,s){const c=this.clone();return c[r]=Tg(o,s),c}_c(r){return new this.constructor(r)}getMax(){return typeof this._max>"u"&&(this._max=Math.max(this.r,this.g,this.b)),this._max}getMin(){return typeof this._min>"u"&&(this._min=Math.min(this.r,this.g,this.b)),this._min}fromHexString(r){const o=r.replace("#","");function s(c,d){return parseInt(o[c]+o[d||c],16)}o.length<6?(this.r=s(0),this.g=s(1),this.b=s(2),this.a=o[3]?s(3)/255:1):(this.r=s(0,1),this.g=s(2,3),this.b=s(4,5),this.a=o[6]?s(6,7)/255:1)}fromHsl({h:r,s:o,l:s,a:c}){if(this._h=r%360,this._s=o,this._l=s,this.a=typeof c=="number"?c:1,o<=0){const T=Fo(s*255);this.r=T,this.g=T,this.b=T}let d=0,f=0,v=0;const g=r/60,_=(1-Math.abs(2*s-1))*o,C=_*(1-Math.abs(g%2-1));g>=0&&g<1?(d=_,f=C):g>=1&&g<2?(d=C,f=_):g>=2&&g<3?(f=_,v=C):g>=3&&g<4?(f=C,v=_):g>=4&&g<5?(d=C,v=_):g>=5&&g<6&&(d=_,v=C);const b=s-_/2;this.r=Fo((d+b)*255),this.g=Fo((f+b)*255),this.b=Fo((v+b)*255)}fromHsv({h:r,s:o,v:s,a:c}){this._h=r%360,this._s=o,this._v=s,this.a=typeof c=="number"?c:1;const d=Fo(s*255);if(this.r=d,this.g=d,this.b=d,o<=0)return;const f=r/60,v=Math.floor(f),g=f-v,_=Fo(s*(1-o)*255),C=Fo(s*(1-o*g)*255),b=Fo(s*(1-o*(1-g))*255);switch(v){case 0:this.g=b,this.b=_;break;case 1:this.r=C,this.b=_;break;case 2:this.r=_,this.b=b;break;case 3:this.r=_,this.g=C;break;case 4:this.r=b,this.g=_;break;case 5:default:this.g=_,this.b=C;break}}fromHsvString(r){const o=PO(r,h9);this.fromHsv({h:o[0],s:o[1],v:o[2],a:o[3]})}fromHslString(r){const o=PO(r,h9);this.fromHsl({h:o[0],s:o[1],l:o[2],a:o[3]})}fromRgbString(r){const o=PO(r,(s,c)=>c.includes("%")?Fo(s/100*255):s);this.r=o[0],this.g=o[1],this.b=o[2],this.a=o[3]}}var Oy=2,f9=.16,Fye=.05,Uye=.05,Bye=.15,dX=5,hX=4,Vye=[{index:7,amount:15},{index:6,amount:25},{index:5,amount:30},{index:5,amount:45},{index:5,amount:65},{index:5,amount:85},{index:4,amount:90},{index:3,amount:95},{index:2,amount:97},{index:1,amount:98}];function p9(t,r,o){var s;return Math.round(t.h)>=60&&Math.round(t.h)<=240?s=o?Math.round(t.h)-Oy*r:Math.round(t.h)+Oy*r:s=o?Math.round(t.h)+Oy*r:Math.round(t.h)-Oy*r,s<0?s+=360:s>=360&&(s-=360),s}function m9(t,r,o){if(t.h===0&&t.s===0)return t.s;var s;return o?s=t.s-f9*r:r===hX?s=t.s+f9:s=t.s+Fye*r,s>1&&(s=1),o&&r===dX&&s>.1&&(s=.1),s<.06&&(s=.06),Math.round(s*100)/100}function g9(t,r,o){var s;return o?s=t.v+Uye*r:s=t.v-Bye*r,s=Math.max(0,Math.min(1,s)),Math.round(s*100)/100}function Nv(t){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=[],s=new qr(t),c=s.toHsv(),d=dX;d>0;d-=1){var f=new qr({h:p9(c,d,!0),s:m9(c,d,!0),v:g9(c,d,!0)});o.push(f)}o.push(s);for(var v=1;v<=hX;v+=1){var g=new qr({h:p9(c,v),s:m9(c,v),v:g9(c,v)});o.push(g)}return r.theme==="dark"?Vye.map(function(_){var C=_.index,b=_.amount;return new qr(r.backgroundColor||"#141414").mix(o[C],b).toHexString()}):o.map(function(_){return _.toHexString()})}var DO={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1677FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},gP=["#fff1f0","#ffccc7","#ffa39e","#ff7875","#ff4d4f","#f5222d","#cf1322","#a8071a","#820014","#5c0011"];gP.primary=gP[5];var vP=["#fff2e8","#ffd8bf","#ffbb96","#ff9c6e","#ff7a45","#fa541c","#d4380d","#ad2102","#871400","#610b00"];vP.primary=vP[5];var EP=["#fff7e6","#ffe7ba","#ffd591","#ffc069","#ffa940","#fa8c16","#d46b08","#ad4e00","#873800","#612500"];EP.primary=EP[5];var JC=["#fffbe6","#fff1b8","#ffe58f","#ffd666","#ffc53d","#faad14","#d48806","#ad6800","#874d00","#613400"];JC.primary=JC[5];var _P=["#feffe6","#ffffb8","#fffb8f","#fff566","#ffec3d","#fadb14","#d4b106","#ad8b00","#876800","#614700"];_P.primary=_P[5];var SP=["#fcffe6","#f4ffb8","#eaff8f","#d3f261","#bae637","#a0d911","#7cb305","#5b8c00","#3f6600","#254000"];SP.primary=SP[5];var yP=["#f6ffed","#d9f7be","#b7eb8f","#95de64","#73d13d","#52c41a","#389e0d","#237804","#135200","#092b00"];yP.primary=yP[5];var CP=["#e6fffb","#b5f5ec","#87e8de","#5cdbd3","#36cfc9","#13c2c2","#08979c","#006d75","#00474f","#002329"];CP.primary=CP[5];var QC=["#e6f4ff","#bae0ff","#91caff","#69b1ff","#4096ff","#1677ff","#0958d9","#003eb3","#002c8c","#001d66"];QC.primary=QC[5];var bP=["#f0f5ff","#d6e4ff","#adc6ff","#85a5ff","#597ef7","#2f54eb","#1d39c4","#10239e","#061178","#030852"];bP.primary=bP[5];var TP=["#f9f0ff","#efdbff","#d3adf7","#b37feb","#9254de","#722ed1","#531dab","#391085","#22075e","#120338"];TP.primary=TP[5];var RP=["#fff0f6","#ffd6e7","#ffadd2","#ff85c0","#f759ab","#eb2f96","#c41d7f","#9e1068","#780650","#520339"];RP.primary=RP[5];var wP=["#a6a6a6","#999999","#8c8c8c","#808080","#737373","#666666","#404040","#1a1a1a","#000000","#000000"];wP.primary=wP[5];var LO={red:gP,volcano:vP,orange:EP,gold:JC,yellow:_P,lime:SP,green:yP,cyan:CP,blue:QC,geekblue:bP,purple:TP,magenta:RP,grey:wP};function jye(t,r){let{generateColorPalettes:o,generateNeutralColorPalettes:s}=r;const{colorSuccess:c,colorWarning:d,colorError:f,colorInfo:v,colorPrimary:g,colorBgBase:_,colorTextBase:C}=t,b=o(g),T=o(c),A=o(d),I=o(f),N=o(v),P=s(_,C),D=t.colorLink||t.colorInfo,x=o(D),L=new qr(I[1]).mix(new qr(I[3]),50).toHexString();return Object.assign(Object.assign({},P),{colorPrimaryBg:b[1],colorPrimaryBgHover:b[2],colorPrimaryBorder:b[3],colorPrimaryBorderHover:b[4],colorPrimaryHover:b[5],colorPrimary:b[6],colorPrimaryActive:b[7],colorPrimaryTextHover:b[8],colorPrimaryText:b[9],colorPrimaryTextActive:b[10],colorSuccessBg:T[1],colorSuccessBgHover:T[2],colorSuccessBorder:T[3],colorSuccessBorderHover:T[4],colorSuccessHover:T[4],colorSuccess:T[6],colorSuccessActive:T[7],colorSuccessTextHover:T[8],colorSuccessText:T[9],colorSuccessTextActive:T[10],colorErrorBg:I[1],colorErrorBgHover:I[2],colorErrorBgFilledHover:L,colorErrorBgActive:I[3],colorErrorBorder:I[3],colorErrorBorderHover:I[4],colorErrorHover:I[5],colorError:I[6],colorErrorActive:I[7],colorErrorTextHover:I[8],colorErrorText:I[9],colorErrorTextActive:I[10],colorWarningBg:A[1],colorWarningBgHover:A[2],colorWarningBorder:A[3],colorWarningBorderHover:A[4],colorWarningHover:A[4],colorWarning:A[6],colorWarningActive:A[7],colorWarningTextHover:A[8],colorWarningText:A[9],colorWarningTextActive:A[10],colorInfoBg:N[1],colorInfoBgHover:N[2],colorInfoBorder:N[3],colorInfoBorderHover:N[4],colorInfoHover:N[4],colorInfo:N[6],colorInfoActive:N[7],colorInfoTextHover:N[8],colorInfoText:N[9],colorInfoTextActive:N[10],colorLinkHover:x[4],colorLink:x[6],colorLinkActive:x[7],colorBgMask:new qr("#000").setA(.45).toRgbString(),colorWhite:"#fff"})}const $ye=t=>{let r=t,o=t,s=t,c=t;return t<6&&t>=5?r=t+1:t<16&&t>=6?r=t+2:t>=16&&(r=16),t<7&&t>=5?o=4:t<8&&t>=7?o=5:t<14&&t>=8?o=6:t<16&&t>=14?o=7:t>=16&&(o=8),t<6&&t>=2?s=1:t>=6&&(s=2),t>4&&t<8?c=4:t>=8&&(c=6),{borderRadius:t,borderRadiusXS:s,borderRadiusSM:o,borderRadiusLG:r,borderRadiusOuter:c}},Hye=$ye;function zye(t){const{motionUnit:r,motionBase:o,borderRadius:s,lineWidth:c}=t;return Object.assign({motionDurationFast:`${(o+r).toFixed(1)}s`,motionDurationMid:`${(o+r*2).toFixed(1)}s`,motionDurationSlow:`${(o+r*3).toFixed(1)}s`,lineWidthBold:c+1},Hye(s))}const Wye=t=>{const{controlHeight:r}=t;return{controlHeightSM:r*.75,controlHeightXS:r*.5,controlHeightLG:r*1.25}},Gye=Wye;function pC(t){return(t+8)/t}function Kye(t){const r=Array.from({length:10}).map((o,s)=>{const c=s-1,d=t*Math.pow(Math.E,c/5),f=s>1?Math.floor(d):Math.ceil(d);return Math.floor(f/2)*2});return r[1]=t,r.map(o=>({size:o,lineHeight:pC(o)}))}const Yye=t=>{const r=Kye(t),o=r.map(C=>C.size),s=r.map(C=>C.lineHeight),c=o[1],d=o[0],f=o[2],v=s[1],g=s[0],_=s[2];return{fontSizeSM:d,fontSize:c,fontSizeLG:f,fontSizeXL:o[3],fontSizeHeading1:o[6],fontSizeHeading2:o[5],fontSizeHeading3:o[4],fontSizeHeading4:o[3],fontSizeHeading5:o[2],lineHeight:v,lineHeightLG:_,lineHeightSM:g,fontHeight:Math.round(v*c),fontHeightLG:Math.round(_*f),fontHeightSM:Math.round(g*d),lineHeightHeading1:s[6],lineHeightHeading2:s[5],lineHeightHeading3:s[4],lineHeightHeading4:s[3],lineHeightHeading5:s[2]}},qye=Yye;function Xye(t){const{sizeUnit:r,sizeStep:o}=t;return{sizeXXL:r*(o+8),sizeXL:r*(o+4),sizeLG:r*(o+2),sizeMD:r*(o+1),sizeMS:r*o,size:r*o,sizeSM:r*(o-1),sizeXS:r*(o-2),sizeXXS:r*(o-3)}}const rc=(t,r)=>new qr(t).setA(r).toRgbString(),Rg=(t,r)=>new qr(t).darken(r).toHexString(),Jye=t=>{const r=Nv(t);return{1:r[0],2:r[1],3:r[2],4:r[3],5:r[4],6:r[5],7:r[6],8:r[4],9:r[5],10:r[6]}},Qye=(t,r)=>{const o=t||"#fff",s=r||"#000";return{colorBgBase:o,colorTextBase:s,colorText:rc(s,.88),colorTextSecondary:rc(s,.65),colorTextTertiary:rc(s,.45),colorTextQuaternary:rc(s,.25),colorFill:rc(s,.15),colorFillSecondary:rc(s,.06),colorFillTertiary:rc(s,.04),colorFillQuaternary:rc(s,.02),colorBgSolid:rc(s,1),colorBgSolidHover:rc(s,.75),colorBgSolidActive:rc(s,.95),colorBgLayout:Rg(o,4),colorBgContainer:Rg(o,0),colorBgElevated:Rg(o,0),colorBgSpotlight:rc(s,.85),colorBgBlur:"transparent",colorBorder:Rg(o,15),colorBorderSecondary:Rg(o,6)}};function Zye(t){DO.pink=DO.magenta,LO.pink=LO.magenta;const r=Object.keys(uX).map(o=>{const s=t[o]===DO[o]?LO[o]:Nv(t[o]);return Array.from({length:10},()=>1).reduce((c,d,f)=>(c[`${o}-${f+1}`]=s[f],c[`${o}${f+1}`]=s[f],c),{})}).reduce((o,s)=>(o=Object.assign(Object.assign({},o),s),o),{});return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},t),r),jye(t,{generateColorPalettes:Jye,generateNeutralColorPalettes:Qye})),qye(t.fontSize)),Xye(t)),Gye(t)),zye(t))}const eCe=dP(Zye),fX=eCe,IP={token:xv,override:{override:xv},hashed:!0},pX=ze.createContext(IP),Pv="ant",cT="anticon",tCe=["outlined","borderless","filled","underlined"],nCe=(t,r)=>r||(t?`${Pv}-${t}`:Pv),wr=y.createContext({getPrefixCls:nCe,iconPrefixCls:cT}),v9={};function Ec(t){const r=y.useContext(wr),{getPrefixCls:o,direction:s,getPopupContainer:c}=r,d=r[t];return Object.assign(Object.assign({classNames:v9,styles:v9},d),{getPrefixCls:o,direction:s,getPopupContainer:c})}const rCe=`-ant-${Date.now()}-${Math.random()}`;function iCe(t,r){const o={},s=(f,v)=>{let g=f.clone();return g=(v==null?void 0:v(g))||g,g.toRgbString()},c=(f,v)=>{const g=new qr(f),_=Nv(g.toRgbString());o[`${v}-color`]=s(g),o[`${v}-color-disabled`]=_[1],o[`${v}-color-hover`]=_[4],o[`${v}-color-active`]=_[6],o[`${v}-color-outline`]=g.clone().setA(.2).toRgbString(),o[`${v}-color-deprecated-bg`]=_[0],o[`${v}-color-deprecated-border`]=_[2]};if(r.primaryColor){c(r.primaryColor,"primary");const f=new qr(r.primaryColor),v=Nv(f.toRgbString());v.forEach((_,C)=>{o[`primary-${C+1}`]=_}),o["primary-color-deprecated-l-35"]=s(f,_=>_.lighten(35)),o["primary-color-deprecated-l-20"]=s(f,_=>_.lighten(20)),o["primary-color-deprecated-t-20"]=s(f,_=>_.tint(20)),o["primary-color-deprecated-t-50"]=s(f,_=>_.tint(50)),o["primary-color-deprecated-f-12"]=s(f,_=>_.setA(_.a*.12));const g=new qr(v[0]);o["primary-color-active-deprecated-f-30"]=s(g,_=>_.setA(_.a*.3)),o["primary-color-active-deprecated-d-02"]=s(g,_=>_.darken(2))}return r.successColor&&c(r.successColor,"success"),r.warningColor&&c(r.warningColor,"warning"),r.errorColor&&c(r.errorColor,"error"),r.infoColor&&c(r.infoColor,"info"),`
  :root {
    ${Object.keys(o).map(f=>`--${t}-${f}: ${o[f]};`).join(`
`)}
  }
  `.trim()}function oCe(t,r){const o=iCe(t,r);xa()&&cu(o,`${rCe}-dynamic-theme`)}const AP=y.createContext(!1),mX=t=>{let{children:r,disabled:o}=t;const s=y.useContext(AP);return y.createElement(AP.Provider,{value:o??s},r)},Zh=AP,OP=y.createContext(void 0),aCe=t=>{let{children:r,size:o}=t;const s=y.useContext(OP);return y.createElement(OP.Provider,{value:o||s},r)},Jv=OP;function sCe(){const t=y.useContext(Zh),r=y.useContext(Jv);return{componentDisabled:t,componentSize:r}}var gX=oo(function t(){io(this,t)}),vX="CALC_UNIT",cCe=new RegExp(vX,"g");function kO(t){return typeof t=="number"?"".concat(t).concat(vX):t}var lCe=function(t){Bl(o,t);var r=Vl(o);function o(s,c){var d;io(this,o),d=r.call(this),be(or(d),"result",""),be(or(d),"unitlessCssVar",void 0),be(or(d),"lowPriority",void 0);var f=ln(s);return d.unitlessCssVar=c,s instanceof o?d.result="(".concat(s.result,")"):f==="number"?d.result=kO(s):f==="string"&&(d.result=s),d}return oo(o,[{key:"add",value:function(c){return c instanceof o?this.result="".concat(this.result," + ").concat(c.getResult()):(typeof c=="number"||typeof c=="string")&&(this.result="".concat(this.result," + ").concat(kO(c))),this.lowPriority=!0,this}},{key:"sub",value:function(c){return c instanceof o?this.result="".concat(this.result," - ").concat(c.getResult()):(typeof c=="number"||typeof c=="string")&&(this.result="".concat(this.result," - ").concat(kO(c))),this.lowPriority=!0,this}},{key:"mul",value:function(c){return this.lowPriority&&(this.result="(".concat(this.result,")")),c instanceof o?this.result="".concat(this.result," * ").concat(c.getResult(!0)):(typeof c=="number"||typeof c=="string")&&(this.result="".concat(this.result," * ").concat(c)),this.lowPriority=!1,this}},{key:"div",value:function(c){return this.lowPriority&&(this.result="(".concat(this.result,")")),c instanceof o?this.result="".concat(this.result," / ").concat(c.getResult(!0)):(typeof c=="number"||typeof c=="string")&&(this.result="".concat(this.result," / ").concat(c)),this.lowPriority=!1,this}},{key:"getResult",value:function(c){return this.lowPriority||c?"(".concat(this.result,")"):this.result}},{key:"equal",value:function(c){var d=this,f=c||{},v=f.unit,g=!0;return typeof v=="boolean"?g=v:Array.from(this.unitlessCssVar).some(function(_){return d.result.includes(_)})&&(g=!1),this.result=this.result.replace(cCe,g?"px":""),typeof this.lowPriority<"u"?"calc(".concat(this.result,")"):this.result}}]),o}(gX),uCe=function(t){Bl(o,t);var r=Vl(o);function o(s){var c;return io(this,o),c=r.call(this),be(or(c),"result",0),s instanceof o?c.result=s.result:typeof s=="number"&&(c.result=s),c}return oo(o,[{key:"add",value:function(c){return c instanceof o?this.result+=c.result:typeof c=="number"&&(this.result+=c),this}},{key:"sub",value:function(c){return c instanceof o?this.result-=c.result:typeof c=="number"&&(this.result-=c),this}},{key:"mul",value:function(c){return c instanceof o?this.result*=c.result:typeof c=="number"&&(this.result*=c),this}},{key:"div",value:function(c){return c instanceof o?this.result/=c.result:typeof c=="number"&&(this.result/=c),this}},{key:"equal",value:function(){return this.result}}]),o}(gX),dCe=function(r,o){var s=r==="css"?lCe:uCe;return function(c){return new s(c,o)}},E9=function(r,o){return"".concat([o,r.replace(/([A-Z]+)([A-Z][a-z]+)/g,"$1-$2").replace(/([a-z])([A-Z])/g,"$1-$2")].filter(Boolean).join("-"))};function ho(t){var r=y.useRef();r.current=t;var o=y.useCallback(function(){for(var s,c=arguments.length,d=new Array(c),f=0;f<c;f++)d[f]=arguments[f];return(s=r.current)===null||s===void 0?void 0:s.call.apply(s,[r].concat(d))},[]);return o}function Em(t){var r=y.useRef(!1),o=y.useState(t),s=Ue(o,2),c=s[0],d=s[1];y.useEffect(function(){return r.current=!1,function(){r.current=!0}},[]);function f(v,g){g&&r.current||d(v)}return[c,f]}function MO(t){return t!==void 0}function Sa(t,r){var o=r||{},s=o.defaultValue,c=o.value,d=o.onChange,f=o.postState,v=Em(function(){return MO(c)?c:MO(s)?typeof s=="function"?s():s:typeof t=="function"?t():t}),g=Ue(v,2),_=g[0],C=g[1],b=c!==void 0?c:_,T=f?f(b):b,A=ho(d),I=Em([b]),N=Ue(I,2),P=N[0],D=N[1];r9(function(){var L=P[0];_!==L&&A(_,L)},[P]),r9(function(){MO(c)||C(c)},[c]);var x=ho(function(L,M){C(L,M),D([b],M)});return[T,x]}function _9(t,r,o,s){var c=_e({},r[t]);if(s!=null&&s.deprecatedTokens){var d=s.deprecatedTokens;d.forEach(function(v){var g=Ue(v,2),_=g[0],C=g[1];if(c!=null&&c[_]||c!=null&&c[C]){var b;(b=c[C])!==null&&b!==void 0||(c[C]=c==null?void 0:c[_])}})}var f=_e(_e({},o),c);return Object.keys(f).forEach(function(v){f[v]===r[v]&&delete f[v]}),f}var EX=typeof CSSINJS_STATISTIC<"u",xP=!0;function oi(){for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];if(!EX)return Object.assign.apply(Object,[{}].concat(r));xP=!1;var s={};return r.forEach(function(c){if(ln(c)==="object"){var d=Object.keys(c);d.forEach(function(f){Object.defineProperty(s,f,{configurable:!0,enumerable:!0,get:function(){return c[f]}})})}}),xP=!0,s}var S9={};function hCe(){}var fCe=function(r){var o,s=r,c=hCe;return EX&&typeof Proxy<"u"&&(o=new Set,s=new Proxy(r,{get:function(f,v){if(xP){var g;(g=o)===null||g===void 0||g.add(v)}return f[v]}}),c=function(f,v){var g;S9[f]={global:Array.from(o),component:_e(_e({},(g=S9[f])===null||g===void 0?void 0:g.component),v)}}),{token:s,keys:o,flush:c}};function y9(t,r,o){if(typeof o=="function"){var s;return o(oi(r,(s=r[t])!==null&&s!==void 0?s:{}))}return o??{}}function pCe(t){return t==="js"?{max:Math.max,min:Math.min}:{max:function(){for(var o=arguments.length,s=new Array(o),c=0;c<o;c++)s[c]=arguments[c];return"max(".concat(s.map(function(d){return Xe(d)}).join(","),")")},min:function(){for(var o=arguments.length,s=new Array(o),c=0;c<o;c++)s[c]=arguments[c];return"min(".concat(s.map(function(d){return Xe(d)}).join(","),")")}}}var mCe=1e3*60*10,gCe=function(){function t(){io(this,t),be(this,"map",new Map),be(this,"objectIDMap",new WeakMap),be(this,"nextID",0),be(this,"lastAccessBeat",new Map),be(this,"accessBeat",0)}return oo(t,[{key:"set",value:function(o,s){this.clear();var c=this.getCompositeKey(o);this.map.set(c,s),this.lastAccessBeat.set(c,Date.now())}},{key:"get",value:function(o){var s=this.getCompositeKey(o),c=this.map.get(s);return this.lastAccessBeat.set(s,Date.now()),this.accessBeat+=1,c}},{key:"getCompositeKey",value:function(o){var s=this,c=o.map(function(d){return d&&ln(d)==="object"?"obj_".concat(s.getObjectID(d)):"".concat(ln(d),"_").concat(d)});return c.join("|")}},{key:"getObjectID",value:function(o){if(this.objectIDMap.has(o))return this.objectIDMap.get(o);var s=this.nextID;return this.objectIDMap.set(o,s),this.nextID+=1,s}},{key:"clear",value:function(){var o=this;if(this.accessBeat>1e4){var s=Date.now();this.lastAccessBeat.forEach(function(c,d){s-c>mCe&&(o.map.delete(d),o.lastAccessBeat.delete(d))}),this.accessBeat=0}}}]),t}(),C9=new gCe;function vCe(t,r){return ze.useMemo(function(){var o=C9.get(r);if(o)return o;var s=t();return C9.set(r,s),s},r)}var ECe=function(){return{}};function _Ce(t){var r=t.useCSP,o=r===void 0?ECe:r,s=t.useToken,c=t.usePrefix,d=t.getResetStyles,f=t.getCommonStyle,v=t.getCompUnitless;function g(T,A,I,N){var P=Array.isArray(T)?T[0]:T;function D(z){return"".concat(String(P)).concat(z.slice(0,1).toUpperCase()).concat(z.slice(1))}var x=(N==null?void 0:N.unitless)||{},L=typeof v=="function"?v(T):{},M=_e(_e({},L),{},be({},D("zIndexPopup"),!0));Object.keys(x).forEach(function(z){M[D(z)]=x[z]});var F=_e(_e({},N),{},{unitless:M,prefixToken:D}),V=C(T,A,I,F),$=_(P,I,F);return function(z){var K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:z,G=V(z,K),J=Ue(G,2),ne=J[1],te=$(K),ce=Ue(te,2),ge=ce[0],oe=ce[1];return[ge,ne,oe]}}function _(T,A,I){var N=I.unitless,P=I.injectStyle,D=P===void 0?!0:P,x=I.prefixToken,L=I.ignore,M=function($){var z=$.rootCls,K=$.cssVar,G=K===void 0?{}:K,J=s(),ne=J.realToken;return Eye({path:[T],prefix:G.prefix,key:G.key,unitless:N,ignore:L,token:ne,scope:z},function(){var te=y9(T,ne,A),ce=_9(T,ne,te,{deprecatedTokens:I==null?void 0:I.deprecatedTokens});return Object.keys(te).forEach(function(ge){ce[x(ge)]=ce[ge],delete ce[ge]}),ce}),null},F=function($){var z=s(),K=z.cssVar;return[function(G){return D&&K?ze.createElement(ze.Fragment,null,ze.createElement(M,{rootCls:$,cssVar:K,component:T}),G):G},K==null?void 0:K.key]};return F}function C(T,A,I){var N=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},P=Array.isArray(T)?T:[T,T],D=Ue(P,1),x=D[0],L=P.join("-"),M=t.layer||{name:"antd"};return function(F){var V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:F,$=s(),z=$.theme,K=$.realToken,G=$.hashId,J=$.token,ne=$.cssVar,te=c(),ce=te.rootPrefixCls,ge=te.iconPrefixCls,oe=o(),ae=ne?"css":"js",ie=vCe(function(){var se=new Set;return ne&&Object.keys(N.unitless||{}).forEach(function(Te){se.add(cC(Te,ne.prefix)),se.add(cC(Te,E9(x,ne.prefix)))}),dCe(ae,se)},[ae,x,ne==null?void 0:ne.prefix]),ve=pCe(ae),me=ve.max,le=ve.min,de={theme:z,token:J,hashId:G,nonce:function(){return oe.nonce},clientOnly:N.clientOnly,layer:M,order:N.order||-999};typeof d=="function"&&mP(_e(_e({},de),{},{clientOnly:!1,path:["Shared",ce]}),function(){return d(J,{prefix:{rootPrefixCls:ce,iconPrefixCls:ge},csp:oe})});var Ee=mP(_e(_e({},de),{},{path:[L,F,ge]}),function(){if(N.injectStyle===!1)return[];var se=fCe(J),Te=se.token,we=se.flush,Le=y9(x,K,I),Ie=".".concat(F),De=_9(x,K,Le,{deprecatedTokens:N.deprecatedTokens});ne&&Le&&ln(Le)==="object"&&Object.keys(Le).forEach(function($e){Le[$e]="var(".concat(cC($e,E9(x,ne.prefix)),")")});var Ye=oi(Te,{componentCls:Ie,prefixCls:F,iconCls:".".concat(ge),antCls:".".concat(ce),calc:ie,max:me,min:le},ne?Le:De),Me=A(Ye,{hashId:G,prefixCls:F,rootPrefixCls:ce,iconPrefixCls:ge});we(x,De);var Oe=typeof f=="function"?f(Ye,F,V,N.resetFont):null;return[N.resetStyle===!1?null:Oe,Me]});return[Ee,G]}}function b(T,A,I){var N=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},P=C(T,A,I,_e({resetStyle:!1,order:-998},N)),D=function(L){var M=L.prefixCls,F=L.rootCls,V=F===void 0?M:F;return P(M,V),null};return D}return{genStyleHooks:g,genSubStyleComponent:b,genComponentStyleHook:C}}const zh=["blue","purple","cyan","green","magenta","pink","red","orange","yellow","volcano","geekblue","lime","gold"],SCe="5.24.3";function FO(t){return t>=0&&t<=255}function Vg(t,r){const{r:o,g:s,b:c,a:d}=new qr(t).toRgb();if(d<1)return t;const{r:f,g:v,b:g}=new qr(r).toRgb();for(let _=.01;_<=1;_+=.01){const C=Math.round((o-f*(1-_))/_),b=Math.round((s-v*(1-_))/_),T=Math.round((c-g*(1-_))/_);if(FO(C)&&FO(b)&&FO(T))return new qr({r:C,g:b,b:T,a:Math.round(_*100)/100}).toRgbString()}return new qr({r:o,g:s,b:c,a:1}).toRgbString()}var yCe=globalThis&&globalThis.__rest||function(t,r){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&r.indexOf(s)<0&&(o[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(t);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(t,s[c])&&(o[s[c]]=t[s[c]]);return o};function _X(t){const{override:r}=t,o=yCe(t,["override"]),s=Object.assign({},r);Object.keys(xv).forEach(T=>{delete s[T]});const c=Object.assign(Object.assign({},o),s),d=480,f=576,v=768,g=992,_=1200,C=1600;if(c.motion===!1){const T="0s";c.motionDurationFast=T,c.motionDurationMid=T,c.motionDurationSlow=T}return Object.assign(Object.assign(Object.assign({},c),{colorFillContent:c.colorFillSecondary,colorFillContentHover:c.colorFill,colorFillAlter:c.colorFillQuaternary,colorBgContainerDisabled:c.colorFillTertiary,colorBorderBg:c.colorBgContainer,colorSplit:Vg(c.colorBorderSecondary,c.colorBgContainer),colorTextPlaceholder:c.colorTextQuaternary,colorTextDisabled:c.colorTextQuaternary,colorTextHeading:c.colorText,colorTextLabel:c.colorTextSecondary,colorTextDescription:c.colorTextTertiary,colorTextLightSolid:c.colorWhite,colorHighlight:c.colorError,colorBgTextHover:c.colorFillSecondary,colorBgTextActive:c.colorFill,colorIcon:c.colorTextTertiary,colorIconHover:c.colorText,colorErrorOutline:Vg(c.colorErrorBg,c.colorBgContainer),colorWarningOutline:Vg(c.colorWarningBg,c.colorBgContainer),fontSizeIcon:c.fontSizeSM,lineWidthFocus:c.lineWidth*3,lineWidth:c.lineWidth,controlOutlineWidth:c.lineWidth*2,controlInteractiveSize:c.controlHeight/2,controlItemBgHover:c.colorFillTertiary,controlItemBgActive:c.colorPrimaryBg,controlItemBgActiveHover:c.colorPrimaryBgHover,controlItemBgActiveDisabled:c.colorFill,controlTmpOutline:c.colorFillQuaternary,controlOutline:Vg(c.colorPrimaryBg,c.colorBgContainer),lineType:c.lineType,borderRadius:c.borderRadius,borderRadiusXS:c.borderRadiusXS,borderRadiusSM:c.borderRadiusSM,borderRadiusLG:c.borderRadiusLG,fontWeightStrong:600,opacityLoading:.65,linkDecoration:"none",linkHoverDecoration:"none",linkFocusDecoration:"none",controlPaddingHorizontal:12,controlPaddingHorizontalSM:8,paddingXXS:c.sizeXXS,paddingXS:c.sizeXS,paddingSM:c.sizeSM,padding:c.size,paddingMD:c.sizeMD,paddingLG:c.sizeLG,paddingXL:c.sizeXL,paddingContentHorizontalLG:c.sizeLG,paddingContentVerticalLG:c.sizeMS,paddingContentHorizontal:c.sizeMS,paddingContentVertical:c.sizeSM,paddingContentHorizontalSM:c.size,paddingContentVerticalSM:c.sizeXS,marginXXS:c.sizeXXS,marginXS:c.sizeXS,marginSM:c.sizeSM,margin:c.size,marginMD:c.sizeMD,marginLG:c.sizeLG,marginXL:c.sizeXL,marginXXL:c.sizeXXL,boxShadow:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowSecondary:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTertiary:`
      0 1px 2px 0 rgba(0, 0, 0, 0.03),
      0 1px 6px -1px rgba(0, 0, 0, 0.02),
      0 2px 4px 0 rgba(0, 0, 0, 0.02)
    `,screenXS:d,screenXSMin:d,screenXSMax:f-1,screenSM:f,screenSMMin:f,screenSMMax:v-1,screenMD:v,screenMDMin:v,screenMDMax:g-1,screenLG:g,screenLGMin:g,screenLGMax:_-1,screenXL:_,screenXLMin:_,screenXLMax:C-1,screenXXL:C,screenXXLMin:C,boxShadowPopoverArrow:"2px 2px 5px rgba(0, 0, 0, 0.05)",boxShadowCard:`
      0 1px 2px -2px ${new qr("rgba(0, 0, 0, 0.16)").toRgbString()},
      0 3px 6px 0 ${new qr("rgba(0, 0, 0, 0.12)").toRgbString()},
      0 5px 12px 4px ${new qr("rgba(0, 0, 0, 0.09)").toRgbString()}
    `,boxShadowDrawerRight:`
      -6px 0 16px 0 rgba(0, 0, 0, 0.08),
      -3px 0 6px -4px rgba(0, 0, 0, 0.12),
      -9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerLeft:`
      6px 0 16px 0 rgba(0, 0, 0, 0.08),
      3px 0 6px -4px rgba(0, 0, 0, 0.12),
      9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerUp:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerDown:`
      0 -6px 16px 0 rgba(0, 0, 0, 0.08),
      0 -3px 6px -4px rgba(0, 0, 0, 0.12),
      0 -9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTabsOverflowLeft:"inset 10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowRight:"inset -10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowTop:"inset 0 10px 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowBottom:"inset 0 -10px 8px -8px rgba(0, 0, 0, 0.08)"}),s)}var b9=globalThis&&globalThis.__rest||function(t,r){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&r.indexOf(s)<0&&(o[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(t);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(t,s[c])&&(o[s[c]]=t[s[c]]);return o};const SX={lineHeight:!0,lineHeightSM:!0,lineHeightLG:!0,lineHeightHeading1:!0,lineHeightHeading2:!0,lineHeightHeading3:!0,lineHeightHeading4:!0,lineHeightHeading5:!0,opacityLoading:!0,fontWeightStrong:!0,zIndexPopupBase:!0,zIndexBase:!0,opacityImage:!0},CCe={size:!0,sizeSM:!0,sizeLG:!0,sizeMD:!0,sizeXS:!0,sizeXXS:!0,sizeMS:!0,sizeXL:!0,sizeXXL:!0,sizeUnit:!0,sizeStep:!0,motionBase:!0,motionUnit:!0},bCe={screenXS:!0,screenXSMin:!0,screenXSMax:!0,screenSM:!0,screenSMMin:!0,screenSMMax:!0,screenMD:!0,screenMDMin:!0,screenMDMax:!0,screenLG:!0,screenLGMin:!0,screenLGMax:!0,screenXL:!0,screenXLMin:!0,screenXLMax:!0,screenXXL:!0,screenXXLMin:!0},yX=(t,r,o)=>{const s=o.getDerivativeToken(t),{override:c}=r,d=b9(r,["override"]);let f=Object.assign(Object.assign({},s),{override:c});return f=_X(f),d&&Object.entries(d).forEach(v=>{let[g,_]=v;const{theme:C}=_,b=b9(_,["theme"]);let T=b;C&&(T=yX(Object.assign(Object.assign({},f),b),{override:b},C)),f[g]=T}),f};function os(){const{token:t,hashed:r,theme:o,override:s,cssVar:c}=ze.useContext(pX),d=`${SCe}-${r||""}`,f=o||fX,[v,g,_]=zSe(f,[xv,t],{salt:d,override:s,getComputedToken:yX,formatToken:_X,cssVar:c&&{prefix:c.prefix,key:c.key,unitless:SX,ignore:CCe,preserve:bCe}});return[f,_,r?g:"",v,c]}const ZC={overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},Ps=function(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return{boxSizing:"border-box",margin:0,padding:0,color:t.colorText,fontSize:t.fontSize,lineHeight:t.lineHeight,listStyle:"none",fontFamily:r?"inherit":t.fontFamily}},Qv=()=>({display:"inline-flex",alignItems:"center",color:"inherit",fontStyle:"normal",lineHeight:0,textAlign:"center",textTransform:"none",verticalAlign:"-0.125em",textRendering:"optimizeLegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","> *":{lineHeight:1},svg:{display:"inline-block"}}),NP=()=>({"&::before":{display:"table",content:'""'},"&::after":{display:"table",clear:"both",content:'""'}}),TCe=t=>({a:{color:t.colorLink,textDecoration:t.linkDecoration,backgroundColor:"transparent",outline:"none",cursor:"pointer",transition:`color ${t.motionDurationSlow}`,"-webkit-text-decoration-skip":"objects","&:hover":{color:t.colorLinkHover},"&:active":{color:t.colorLinkActive},"&:active, &:hover":{textDecoration:t.linkHoverDecoration,outline:0},"&:focus":{textDecoration:t.linkFocusDecoration,outline:0},"&[disabled]":{color:t.colorTextDisabled,cursor:"not-allowed"}}}),RCe=(t,r,o,s)=>{const c=`[class^="${r}"], [class*=" ${r}"]`,d=o?`.${o}`:c,f={boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"}};let v={};return s!==!1&&(v={fontFamily:t.fontFamily,fontSize:t.fontSize}),{[d]:Object.assign(Object.assign(Object.assign({},v),f),{[c]:f})}},eb=(t,r)=>({outline:`${Xe(t.lineWidthFocus)} solid ${t.colorPrimaryBorder}`,outlineOffset:r??1,transition:"outline-offset 0s, outline 0s"}),lT=(t,r)=>({"&:focus-visible":Object.assign({},eb(t,r))}),CX=t=>({[`.${t}`]:Object.assign(Object.assign({},Qv()),{[`.${t} .${t}-icon`]:{display:"block"}})}),bX=t=>Object.assign(Object.assign({color:t.colorLink,textDecoration:t.linkDecoration,outline:"none",cursor:"pointer",transition:`all ${t.motionDurationSlow}`,border:0,padding:0,background:"none",userSelect:"none"},lT(t)),{"&:focus, &:hover":{color:t.colorLinkHover},"&:active":{color:t.colorLinkActive}}),{genStyleHooks:Oo,genComponentStyleHook:wCe,genSubStyleComponent:uT}=_Ce({usePrefix:()=>{const{getPrefixCls:t,iconPrefixCls:r}=y.useContext(wr);return{rootPrefixCls:t(),iconPrefixCls:r}},useToken:()=>{const[t,r,o,s,c]=os();return{theme:t,realToken:r,hashId:o,token:s,cssVar:c}},useCSP:()=>{const{csp:t}=y.useContext(wr);return t??{}},getResetStyles:(t,r)=>{var o;const s=TCe(t);return[s,{"&":s},CX((o=r==null?void 0:r.prefix.iconPrefixCls)!==null&&o!==void 0?o:cT)]},getCommonStyle:RCe,getCompUnitless:()=>SX});function ICe(t,r){return zh.reduce((o,s)=>{const c=t[`${s}1`],d=t[`${s}3`],f=t[`${s}6`],v=t[`${s}7`];return Object.assign(Object.assign({},o),r(s,{lightColor:c,lightBorderColor:d,darkColor:f,textColor:v}))},{})}const ACe=(t,r)=>{const[o,s]=os();return mP({theme:o,token:s,hashId:"",path:["ant-design-icons",t],nonce:()=>r==null?void 0:r.nonce,layer:{name:"antd"}},()=>[CX(t)])},OCe=ACe,xCe=Object.assign({},Fh),{useId:T9}=xCe,NCe=()=>"",PCe=typeof T9>"u"?NCe:T9,DCe=PCe;function LCe(t,r,o){var s;sT();const c=t||{},d=c.inherit===!1||!r?Object.assign(Object.assign({},IP),{hashed:(s=r==null?void 0:r.hashed)!==null&&s!==void 0?s:IP.hashed,cssVar:r==null?void 0:r.cssVar}):r,f=DCe();return Yv(()=>{var v,g;if(!t)return r;const _=Object.assign({},d.components);Object.keys(t.components||{}).forEach(T=>{_[T]=Object.assign(Object.assign({},_[T]),t.components[T])});const C=`css-var-${f.replace(/:/g,"")}`,b=((v=c.cssVar)!==null&&v!==void 0?v:d.cssVar)&&Object.assign(Object.assign(Object.assign({prefix:o==null?void 0:o.prefixCls},typeof d.cssVar=="object"?d.cssVar:{}),typeof c.cssVar=="object"?c.cssVar:{}),{key:typeof c.cssVar=="object"&&((g=c.cssVar)===null||g===void 0?void 0:g.key)||C});return Object.assign(Object.assign(Object.assign({},d),c),{token:Object.assign(Object.assign({},d.token),c.token),components:_,cssVar:b})},[c,d],(v,g)=>v.some((_,C)=>{const b=g[C];return!Av(_,b,!0)}))}var kCe=["children"],TX=y.createContext({});function MCe(t){var r=t.children,o=xn(t,kCe);return y.createElement(TX.Provider,{value:o},r)}var FCe=function(t){Bl(o,t);var r=Vl(o);function o(){return io(this,o),r.apply(this,arguments)}return oo(o,[{key:"render",value:function(){return this.props.children}}]),o}(y.Component);function UCe(t){var r=y.useReducer(function(v){return v+1},0),o=Ue(r,2),s=o[1],c=y.useRef(t),d=ho(function(){return c.current}),f=ho(function(v){c.current=typeof v=="function"?v(c.current):v,s()});return[d,f]}var sd="none",xy="appear",Ny="enter",Py="leave",R9="none",$c="prepare",Xp="start",Jp="active",L2="end",RX="prepared";function w9(t,r){var o={};return o[t.toLowerCase()]=r.toLowerCase(),o["Webkit".concat(t)]="webkit".concat(r),o["Moz".concat(t)]="moz".concat(r),o["ms".concat(t)]="MS".concat(r),o["O".concat(t)]="o".concat(r.toLowerCase()),o}function BCe(t,r){var o={animationend:w9("Animation","AnimationEnd"),transitionend:w9("Transition","TransitionEnd")};return t&&("AnimationEvent"in r||delete o.animationend.animation,"TransitionEvent"in r||delete o.transitionend.transition),o}var VCe=BCe(xa(),typeof window<"u"?window:{}),wX={};if(xa()){var jCe=document.createElement("div");wX=jCe.style}var Dy={};function IX(t){if(Dy[t])return Dy[t];var r=VCe[t];if(r)for(var o=Object.keys(r),s=o.length,c=0;c<s;c+=1){var d=o[c];if(Object.prototype.hasOwnProperty.call(r,d)&&d in wX)return Dy[t]=r[d],Dy[t]}return""}var AX=IX("animationend"),OX=IX("transitionend"),xX=!!(AX&&OX),I9=AX||"animationend",A9=OX||"transitionend";function O9(t,r){if(!t)return null;if(ln(t)==="object"){var o=r.replace(/-\w/g,function(s){return s[1].toUpperCase()});return t[o]}return"".concat(t,"-").concat(r)}const $Ce=function(t){var r=y.useRef();function o(c){c&&(c.removeEventListener(A9,t),c.removeEventListener(I9,t))}function s(c){r.current&&r.current!==c&&o(r.current),c&&c!==r.current&&(c.addEventListener(A9,t),c.addEventListener(I9,t),r.current=c)}return y.useEffect(function(){return function(){o(r.current)}},[]),[s,o]};var NX=xa()?y.useLayoutEffect:y.useEffect;const HCe=function(){var t=y.useRef(null);function r(){ii.cancel(t.current)}function o(s){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;r();var d=ii(function(){c<=1?s({isCanceled:function(){return d!==t.current}}):o(s,c-1)});t.current=d}return y.useEffect(function(){return function(){r()}},[]),[o,r]};var zCe=[$c,Xp,Jp,L2],WCe=[$c,RX],PX=!1,GCe=!0;function DX(t){return t===Jp||t===L2}const KCe=function(t,r,o){var s=Em(R9),c=Ue(s,2),d=c[0],f=c[1],v=HCe(),g=Ue(v,2),_=g[0],C=g[1];function b(){f($c,!0)}var T=r?WCe:zCe;return NX(function(){if(d!==R9&&d!==L2){var A=T.indexOf(d),I=T[A+1],N=o(d);N===PX?f(I,!0):I&&_(function(P){function D(){P.isCanceled()||f(I,!0)}N===!0?D():Promise.resolve(N).then(D)})}},[t,d]),y.useEffect(function(){return function(){C()}},[]),[b,d]};function YCe(t,r,o,s){var c=s.motionEnter,d=c===void 0?!0:c,f=s.motionAppear,v=f===void 0?!0:f,g=s.motionLeave,_=g===void 0?!0:g,C=s.motionDeadline,b=s.motionLeaveImmediately,T=s.onAppearPrepare,A=s.onEnterPrepare,I=s.onLeavePrepare,N=s.onAppearStart,P=s.onEnterStart,D=s.onLeaveStart,x=s.onAppearActive,L=s.onEnterActive,M=s.onLeaveActive,F=s.onAppearEnd,V=s.onEnterEnd,$=s.onLeaveEnd,z=s.onVisibleChanged,K=Em(),G=Ue(K,2),J=G[0],ne=G[1],te=UCe(sd),ce=Ue(te,2),ge=ce[0],oe=ce[1],ae=Em(null),ie=Ue(ae,2),ve=ie[0],me=ie[1],le=ge(),de=y.useRef(!1),Ee=y.useRef(null);function se(){return o()}var Te=y.useRef(!1);function we(){oe(sd),me(null,!0)}var Le=ho(function(pt){var ht=ge();if(ht!==sd){var qe=se();if(!(pt&&!pt.deadline&&pt.target!==qe)){var Je=Te.current,Ct;ht===xy&&Je?Ct=F==null?void 0:F(qe,pt):ht===Ny&&Je?Ct=V==null?void 0:V(qe,pt):ht===Py&&Je&&(Ct=$==null?void 0:$(qe,pt)),Je&&Ct!==!1&&we()}}}),Ie=$Ce(Le),De=Ue(Ie,1),Ye=De[0],Me=function(ht){switch(ht){case xy:return be(be(be({},$c,T),Xp,N),Jp,x);case Ny:return be(be(be({},$c,A),Xp,P),Jp,L);case Py:return be(be(be({},$c,I),Xp,D),Jp,M);default:return{}}},Oe=y.useMemo(function(){return Me(le)},[le]),$e=KCe(le,!t,function(pt){if(pt===$c){var ht=Oe[$c];return ht?ht(se()):PX}if(ke in Oe){var qe;me(((qe=Oe[ke])===null||qe===void 0?void 0:qe.call(Oe,se(),null))||null)}return ke===Jp&&le!==sd&&(Ye(se()),C>0&&(clearTimeout(Ee.current),Ee.current=setTimeout(function(){Le({deadline:!0})},C))),ke===RX&&we(),GCe}),tt=Ue($e,2),je=tt[0],ke=tt[1],dt=DX(ke);Te.current=dt;var Ze=y.useRef(null);NX(function(){if(!(de.current&&Ze.current===r)){ne(r);var pt=de.current;de.current=!0;var ht;!pt&&r&&v&&(ht=xy),pt&&r&&d&&(ht=Ny),(pt&&!r&&_||!pt&&b&&!r&&_)&&(ht=Py);var qe=Me(ht);ht&&(t||qe[$c])?(oe(ht),je()):oe(sd),Ze.current=r}},[r]),y.useEffect(function(){(le===xy&&!v||le===Ny&&!d||le===Py&&!_)&&oe(sd)},[v,d,_]),y.useEffect(function(){return function(){de.current=!1,clearTimeout(Ee.current)}},[]);var ut=y.useRef(!1);y.useEffect(function(){J&&(ut.current=!0),J!==void 0&&le===sd&&((ut.current||J)&&(z==null||z(J)),ut.current=!0)},[J,le]);var Tt=ve;return Oe[$c]&&ke===Xp&&(Tt=_e({transition:"none"},Tt)),[le,ke,Tt,J??r]}function qCe(t){var r=t;ln(t)==="object"&&(r=t.transitionSupport);function o(c,d){return!!(c.motionName&&r&&d!==!1)}var s=y.forwardRef(function(c,d){var f=c.visible,v=f===void 0?!0:f,g=c.removeOnLeave,_=g===void 0?!0:g,C=c.forceRender,b=c.children,T=c.motionName,A=c.leavedClassName,I=c.eventProps,N=y.useContext(TX),P=N.motion,D=o(c,P),x=y.useRef(),L=y.useRef();function M(){try{return x.current instanceof HTMLElement?x.current:sC(L.current)}catch{return null}}var F=YCe(D,v,M,c),V=Ue(F,4),$=V[0],z=V[1],K=V[2],G=V[3],J=y.useRef(G);G&&(J.current=!0);var ne=y.useCallback(function(ie){x.current=ie,b2(d,ie)},[d]),te,ce=_e(_e({},I),{},{visible:v});if(!b)te=null;else if($===sd)G?te=b(_e({},ce),ne):!_&&J.current&&A?te=b(_e(_e({},ce),{},{className:A}),ne):C||!_&&!A?te=b(_e(_e({},ce),{},{style:{display:"none"}}),ne):te=null;else{var ge;z===$c?ge="prepare":DX(z)?ge="active":z===Xp&&(ge="start");var oe=O9(T,"".concat($,"-").concat(ge));te=b(_e(_e({},ce),{},{className:Ke(O9(T,$),be(be({},oe,oe&&ge),T,typeof T=="string")),style:K}),ne)}if(y.isValidElement(te)&&Nm(te)){var ae=qv(te);ae||(te=y.cloneElement(te,{ref:ne}))}return y.createElement(FCe,{ref:L},te)});return s.displayName="CSSMotion",s}const ef=qCe(xX);var PP="add",DP="keep",LP="remove",UO="removed";function XCe(t){var r;return t&&ln(t)==="object"&&"key"in t?r=t:r={key:t},_e(_e({},r),{},{key:String(r.key)})}function kP(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return t.map(XCe)}function JCe(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],o=[],s=0,c=r.length,d=kP(t),f=kP(r);d.forEach(function(_){for(var C=!1,b=s;b<c;b+=1){var T=f[b];if(T.key===_.key){s<b&&(o=o.concat(f.slice(s,b).map(function(A){return _e(_e({},A),{},{status:PP})})),s=b),o.push(_e(_e({},T),{},{status:DP})),s+=1,C=!0;break}}C||o.push(_e(_e({},_),{},{status:LP}))}),s<c&&(o=o.concat(f.slice(s).map(function(_){return _e(_e({},_),{},{status:PP})})));var v={};o.forEach(function(_){var C=_.key;v[C]=(v[C]||0)+1});var g=Object.keys(v).filter(function(_){return v[_]>1});return g.forEach(function(_){o=o.filter(function(C){var b=C.key,T=C.status;return b!==_||T!==LP}),o.forEach(function(C){C.key===_&&(C.status=DP)})}),o}var QCe=["component","children","onVisibleChanged","onAllRemoved"],ZCe=["status"],ebe=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearPrepare","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];function tbe(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ef,o=function(s){Bl(d,s);var c=Vl(d);function d(){var f;io(this,d);for(var v=arguments.length,g=new Array(v),_=0;_<v;_++)g[_]=arguments[_];return f=c.call.apply(c,[this].concat(g)),be(or(f),"state",{keyEntities:[]}),be(or(f),"removeKey",function(C){f.setState(function(b){var T=b.keyEntities.map(function(A){return A.key!==C?A:_e(_e({},A),{},{status:UO})});return{keyEntities:T}},function(){var b=f.state.keyEntities,T=b.filter(function(A){var I=A.status;return I!==UO}).length;T===0&&f.props.onAllRemoved&&f.props.onAllRemoved()})}),f}return oo(d,[{key:"render",value:function(){var v=this,g=this.state.keyEntities,_=this.props,C=_.component,b=_.children,T=_.onVisibleChanged;_.onAllRemoved;var A=xn(_,QCe),I=C||y.Fragment,N={};return ebe.forEach(function(P){N[P]=A[P],delete A[P]}),delete A.keys,y.createElement(I,A,g.map(function(P,D){var x=P.status,L=xn(P,ZCe),M=x===PP||x===DP;return y.createElement(r,nt({},N,{key:L.key,visible:M,eventProps:L,onVisibleChanged:function(V){T==null||T(V,{key:L.key}),V||v.removeKey(L.key)}}),function(F,V){return b(_e(_e({},F),{},{index:D}),V)})}))}}],[{key:"getDerivedStateFromProps",value:function(v,g){var _=v.keys,C=g.keyEntities,b=kP(_),T=JCe(C,b);return{keyEntities:T.filter(function(A){var I=C.find(function(N){var P=N.key;return A.key===P});return!(I&&I.status===UO&&A.status===LP)})}}}]),d}(y.Component);return be(o,"defaultProps",{component:"div"}),o}const LX=tbe(xX);function nbe(t){const{children:r}=t,[,o]=os(),{motion:s}=o,c=y.useRef(!1);return c.current=c.current||s===!1,c.current?y.createElement(MCe,{motion:s},r):r}const rbe=()=>null;var ibe=globalThis&&globalThis.__rest||function(t,r){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&r.indexOf(s)<0&&(o[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(t);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(t,s[c])&&(o[s[c]]=t[s[c]]);return o};const obe=["getTargetContainer","getPopupContainer","renderEmpty","input","pagination","form","select","button"];let tb,kX,MX,FX;function mC(){return tb||Pv}function abe(){return kX||cT}function sbe(t){return Object.keys(t).some(r=>r.endsWith("Color"))}const cbe=t=>{const{prefixCls:r,iconPrefixCls:o,theme:s,holderRender:c}=t;r!==void 0&&(tb=r),o!==void 0&&(kX=o),"holderRender"in t&&(FX=c),s&&(sbe(s)?oCe(mC(),s):MX=s)},lbe=()=>({getPrefixCls:(t,r)=>r||(t?`${mC()}-${t}`:mC()),getIconPrefixCls:abe,getRootPrefixCls:()=>tb||mC(),getTheme:()=>MX,holderRender:FX}),ube=t=>{const{children:r,csp:o,autoInsertSpaceInButton:s,alert:c,anchor:d,form:f,locale:v,componentSize:g,direction:_,space:C,splitter:b,virtual:T,dropdownMatchSelectWidth:A,popupMatchSelectWidth:I,popupOverflow:N,legacyLocale:P,parentContext:D,iconPrefixCls:x,theme:L,componentDisabled:M,segmented:F,statistic:V,spin:$,calendar:z,carousel:K,cascader:G,collapse:J,typography:ne,checkbox:te,descriptions:ce,divider:ge,drawer:oe,skeleton:ae,steps:ie,image:ve,layout:me,list:le,mentions:de,modal:Ee,progress:se,result:Te,slider:we,breadcrumb:Le,menu:Ie,pagination:De,input:Ye,textArea:Me,empty:Oe,badge:$e,radio:tt,rate:je,switch:ke,transfer:dt,avatar:Ze,message:ut,tag:Tt,table:pt,card:ht,tabs:qe,timeline:Je,timePicker:Ct,upload:Nt,notification:Ot,tree:on,colorPicker:Vt,datePicker:kt,rangePicker:Kt,flex:Zt,wave:Ft,dropdown:_t,warning:At,tour:mt,tooltip:Pt,popover:gn,popconfirm:Mn,floatButtonGroup:pi,variant:Zr,inputNumber:Si,treeSelect:Dr}=t,Gn=y.useCallback((jt,dn)=>{const{prefixCls:ar}=t;if(dn)return dn;const Xn=ar||D.getPrefixCls("");return jt?`${Xn}-${jt}`:Xn},[D.getPrefixCls,t.prefixCls]),Ir=x||D.iconPrefixCls||cT,vn=o||D.csp;OCe(Ir,vn);const Qt=LCe(L,D.theme,{prefixCls:Gn("")}),Dt={csp:vn,autoInsertSpaceInButton:s,alert:c,anchor:d,locale:v||P,direction:_,space:C,splitter:b,virtual:T,popupMatchSelectWidth:I??A,popupOverflow:N,getPrefixCls:Gn,iconPrefixCls:Ir,theme:Qt,segmented:F,statistic:V,spin:$,calendar:z,carousel:K,cascader:G,collapse:J,typography:ne,checkbox:te,descriptions:ce,divider:ge,drawer:oe,skeleton:ae,steps:ie,image:ve,input:Ye,textArea:Me,layout:me,list:le,mentions:de,modal:Ee,progress:se,result:Te,slider:we,breadcrumb:Le,menu:Ie,pagination:De,empty:Oe,badge:$e,radio:tt,rate:je,switch:ke,transfer:dt,avatar:Ze,message:ut,tag:Tt,table:pt,card:ht,tabs:qe,timeline:Je,timePicker:Ct,upload:Nt,notification:Ot,tree:on,colorPicker:Vt,datePicker:kt,rangePicker:Kt,flex:Zt,wave:Ft,dropdown:_t,warning:At,tour:mt,tooltip:Pt,popover:gn,popconfirm:Mn,floatButtonGroup:pi,variant:Zr,inputNumber:Si,treeSelect:Dr},bt=Object.assign({},D);Object.keys(Dt).forEach(jt=>{Dt[jt]!==void 0&&(bt[jt]=Dt[jt])}),obe.forEach(jt=>{const dn=t[jt];dn&&(bt[jt]=dn)}),typeof s<"u"&&(bt.button=Object.assign({autoInsertSpace:s},bt.button));const un=Yv(()=>bt,bt,(jt,dn)=>{const ar=Object.keys(jt),Xn=Object.keys(dn);return ar.length!==Xn.length||ar.some($n=>jt[$n]!==dn[$n])}),{layer:Sn}=y.useContext(Xv),ft=y.useMemo(()=>({prefixCls:Ir,csp:vn,layer:Sn?"antd":void 0}),[Ir,vn,Sn]);let gt=y.createElement(y.Fragment,null,y.createElement(rbe,{dropdownMatchSelectWidth:A}),r);const Wt=y.useMemo(()=>{var jt,dn,ar,Xn;return qp(((jt=Hh.Form)===null||jt===void 0?void 0:jt.defaultValidateMessages)||{},((ar=(dn=un.locale)===null||dn===void 0?void 0:dn.Form)===null||ar===void 0?void 0:ar.defaultValidateMessages)||{},((Xn=un.form)===null||Xn===void 0?void 0:Xn.validateMessages)||{},(f==null?void 0:f.validateMessages)||{})},[un,f==null?void 0:f.validateMessages]);Object.keys(Wt).length>0&&(gt=y.createElement(sX.Provider,{value:Wt},gt)),v&&(gt=y.createElement(kye,{locale:v,_ANT_MARK__:Dye},gt)),(Ir||vn)&&(gt=y.createElement(P2.Provider,{value:ft},gt)),g&&(gt=y.createElement(aCe,{size:g},gt)),gt=y.createElement(nbe,null,gt);const Yt=y.useMemo(()=>{const jt=Qt||{},{algorithm:dn,token:ar,components:Xn,cssVar:$n}=jt,nr=ibe(jt,["algorithm","token","components","cssVar"]),Wr=dn&&(!Array.isArray(dn)||dn.length>0)?dP(dn):fX,ai={};Object.entries(Xn||{}).forEach(Vi=>{let[Fr,Lr]=Vi;const St=Object.assign({},Lr);"algorithm"in St&&(St.algorithm===!0?St.theme=Wr:(Array.isArray(St.algorithm)||typeof St.algorithm=="function")&&(St.theme=dP(St.algorithm)),delete St.algorithm),ai[Fr]=St});const si=Object.assign(Object.assign({},xv),ar);return Object.assign(Object.assign({},nr),{theme:Wr,token:si,components:ai,override:Object.assign({override:si},ai),cssVar:$n})},[Qt]);return L&&(gt=y.createElement(pX.Provider,{value:Yt},gt)),un.warning&&(gt=y.createElement(Tye.Provider,{value:un.warning},gt)),M!==void 0&&(gt=y.createElement(mX,{disabled:M},gt)),y.createElement(wr.Provider,{value:un},gt)},tf=t=>{const r=y.useContext(wr),o=y.useContext(D2);return y.createElement(ube,Object.assign({parentContext:r,legacyLocale:o},t))};tf.ConfigContext=wr;tf.SizeContext=Jv;tf.config=cbe;tf.useConfig=sCe;Object.defineProperty(tf,"SizeContext",{get:()=>Jv});var dbe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"}}]},name:"check-circle",theme:"filled"};const hbe=dbe;function UX(t){var r;return t==null||(r=t.getRootNode)===null||r===void 0?void 0:r.call(t)}function fbe(t){return UX(t)instanceof ShadowRoot}function nb(t){return fbe(t)?UX(t):null}function pbe(t){return t.replace(/-(.)/g,function(r,o){return o.toUpperCase()})}function mbe(t,r){_a(t,"[@ant-design/icons] ".concat(r))}function x9(t){return ln(t)==="object"&&typeof t.name=="string"&&typeof t.theme=="string"&&(ln(t.icon)==="object"||typeof t.icon=="function")}function N9(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.keys(t).reduce(function(r,o){var s=t[o];switch(o){case"class":r.className=s,delete r.class;break;default:delete r[o],r[pbe(o)]=s}return r},{})}function MP(t,r,o){return o?ze.createElement(t.tag,_e(_e({key:r},N9(t.attrs)),o),(t.children||[]).map(function(s,c){return MP(s,"".concat(r,"-").concat(t.tag,"-").concat(c))})):ze.createElement(t.tag,_e({key:r},N9(t.attrs)),(t.children||[]).map(function(s,c){return MP(s,"".concat(r,"-").concat(t.tag,"-").concat(c))}))}function BX(t){return Nv(t)[0]}function VX(t){return t?Array.isArray(t)?t:[t]:[]}var gbe=`
.anticon {
  display: inline-flex;
  align-items: center;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`,vbe=function(r){var o=y.useContext(P2),s=o.csp,c=o.prefixCls,d=o.layer,f=gbe;c&&(f=f.replace(/anticon/g,c)),d&&(f="@layer ".concat(d,` {
`).concat(f,`
}`)),y.useEffect(function(){var v=r.current,g=nb(v);cu(f,"@ant-design-icons",{prepend:!d,csp:s,attachTo:g})},[])},Ebe=["icon","className","onClick","style","primaryColor","secondaryColor"],Zg={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};function _be(t){var r=t.primaryColor,o=t.secondaryColor;Zg.primaryColor=r,Zg.secondaryColor=o||BX(r),Zg.calculated=!!o}function Sbe(){return _e({},Zg)}var dT=function(r){var o=r.icon,s=r.className,c=r.onClick,d=r.style,f=r.primaryColor,v=r.secondaryColor,g=xn(r,Ebe),_=y.useRef(),C=Zg;if(f&&(C={primaryColor:f,secondaryColor:v||BX(f)}),vbe(_),mbe(x9(o),"icon should be icon definiton, but got ".concat(o)),!x9(o))return null;var b=o;return b&&typeof b.icon=="function"&&(b=_e(_e({},b),{},{icon:b.icon(C.primaryColor,C.secondaryColor)})),MP(b.icon,"svg-".concat(b.name),_e(_e({className:s,onClick:c,style:d,"data-icon":b.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},g),{},{ref:_}))};dT.displayName="IconReact";dT.getTwoToneColors=Sbe;dT.setTwoToneColors=_be;const k2=dT;function jX(t){var r=VX(t),o=Ue(r,2),s=o[0],c=o[1];return k2.setTwoToneColors({primaryColor:s,secondaryColor:c})}function ybe(){var t=k2.getTwoToneColors();return t.calculated?[t.primaryColor,t.secondaryColor]:t.primaryColor}var Cbe=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];jX(QC.primary);var hT=y.forwardRef(function(t,r){var o=t.className,s=t.icon,c=t.spin,d=t.rotate,f=t.tabIndex,v=t.onClick,g=t.twoToneColor,_=xn(t,Cbe),C=y.useContext(P2),b=C.prefixCls,T=b===void 0?"anticon":b,A=C.rootClassName,I=Ke(A,T,be(be({},"".concat(T,"-").concat(s.name),!!s.name),"".concat(T,"-spin"),!!c||s.name==="loading"),o),N=f;N===void 0&&v&&(N=-1);var P=d?{msTransform:"rotate(".concat(d,"deg)"),transform:"rotate(".concat(d,"deg)")}:void 0,D=VX(g),x=Ue(D,2),L=x[0],M=x[1];return y.createElement("span",nt({role:"img","aria-label":s.name},_,{ref:r,tabIndex:N,onClick:v,className:I}),y.createElement(k2,{icon:s,primaryColor:L,secondaryColor:M,style:P}))});hT.displayName="AntdIcon";hT.getTwoToneColor=ybe;hT.setTwoToneColor=jX;const ao=hT;var bbe=function(r,o){return y.createElement(ao,nt({},r,{ref:o,icon:hbe}))},Tbe=y.forwardRef(bbe);const $X=Tbe;var Rbe={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm127.98 274.82h-.04l-.08.06L512 466.75 384.14 338.88c-.04-.05-.06-.06-.08-.06a.12.12 0 00-.07 0c-.03 0-.05.01-.09.05l-45.02 45.02a.2.2 0 00-.05.09.12.12 0 000 .07v.02a.27.27 0 00.06.06L466.75 512 338.88 639.86c-.05.04-.06.06-.06.08a.12.12 0 000 .07c0 .03.01.05.05.09l45.02 45.02a.2.2 0 00.09.05.12.12 0 00.07 0c.02 0 .04-.01.08-.05L512 557.25l127.86 127.87c.04.04.06.05.08.05a.12.12 0 00.07 0c.03 0 .05-.01.09-.05l45.02-45.02a.2.2 0 00.05-.09.12.12 0 000-.07v-.02a.27.27 0 00-.05-.06L557.25 512l127.87-127.86c.04-.04.05-.06.05-.08a.12.12 0 000-.07c0-.03-.01-.05-.05-.09l-45.02-45.02a.2.2 0 00-.09-.05.12.12 0 00-.07 0z"}}]},name:"close-circle",theme:"filled"};const wbe=Rbe;var Ibe=function(r,o){return y.createElement(ao,nt({},r,{ref:o,icon:wbe}))},Abe=y.forwardRef(Ibe);const fT=Abe;var Obe={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M799.86 166.31c.02 0 .04.02.08.06l57.69 57.7c.04.03.05.05.06.08a.12.12 0 010 .06c0 .03-.02.05-.06.09L569.93 512l287.7 287.7c.04.04.05.06.06.09a.12.12 0 010 .07c0 .02-.02.04-.06.08l-57.7 57.69c-.03.04-.05.05-.07.06a.12.12 0 01-.07 0c-.03 0-.05-.02-.09-.06L512 569.93l-287.7 287.7c-.04.04-.06.05-.09.06a.12.12 0 01-.07 0c-.02 0-.04-.02-.08-.06l-57.69-57.7c-.04-.03-.05-.05-.06-.07a.12.12 0 010-.07c0-.03.02-.05.06-.09L454.07 512l-287.7-287.7c-.04-.04-.05-.06-.06-.09a.12.12 0 010-.07c0-.02.02-.04.06-.08l57.7-57.69c.03-.04.05-.05.07-.06a.12.12 0 01.07 0c.03 0 .05.02.09.06L512 454.07l287.7-287.7c.04-.04.06-.05.09-.06a.12.12 0 01.07 0z"}}]},name:"close",theme:"outlined"};const xbe=Obe;var Nbe=function(r,o){return y.createElement(ao,nt({},r,{ref:o,icon:xbe}))},Pbe=y.forwardRef(Nbe);const HX=Pbe;var Dbe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm-32 232c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296zm32 440a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"exclamation-circle",theme:"filled"};const Lbe=Dbe;var kbe=function(r,o){return y.createElement(ao,nt({},r,{ref:o,icon:Lbe}))},Mbe=y.forwardRef(kbe);const zX=Mbe;var Fbe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"info-circle",theme:"filled"};const Ube=Fbe;var Bbe=function(r,o){return y.createElement(ao,nt({},r,{ref:o,icon:Ube}))},Vbe=y.forwardRef(Bbe);const jbe=Vbe;var $be=`accept acceptCharset accessKey action allowFullScreen allowTransparency
    alt async autoComplete autoFocus autoPlay capture cellPadding cellSpacing challenge
    charSet checked classID className colSpan cols content contentEditable contextMenu
    controls coords crossOrigin data dateTime default defer dir disabled download draggable
    encType form formAction formEncType formMethod formNoValidate formTarget frameBorder
    headers height hidden high href hrefLang htmlFor httpEquiv icon id inputMode integrity
    is keyParams keyType kind label lang list loop low manifest marginHeight marginWidth max maxLength media
    mediaGroup method min minLength multiple muted name noValidate nonce open
    optimum pattern placeholder poster preload radioGroup readOnly rel required
    reversed role rowSpan rows sandbox scope scoped scrolling seamless selected
    shape size sizes span spellCheck src srcDoc srcLang srcSet start step style
    summary tabIndex target title type useMap value width wmode wrap`,Hbe=`onCopy onCut onPaste onCompositionEnd onCompositionStart onCompositionUpdate onKeyDown
    onKeyPress onKeyUp onFocus onBlur onChange onInput onSubmit onClick onContextMenu onDoubleClick
    onDrag onDragEnd onDragEnter onDragExit onDragLeave onDragOver onDragStart onDrop onMouseDown
    onMouseEnter onMouseLeave onMouseMove onMouseOut onMouseOver onMouseUp onSelect onTouchCancel
    onTouchEnd onTouchMove onTouchStart onScroll onWheel onAbort onCanPlay onCanPlayThrough
    onDurationChange onEmptied onEncrypted onEnded onError onLoadedData onLoadedMetadata
    onLoadStart onPause onPlay onPlaying onProgress onRateChange onSeeked onSeeking onStalled onSuspend onTimeUpdate onVolumeChange onWaiting onLoad onError`,zbe="".concat($be," ").concat(Hbe).split(/[\s\n]+/),Wbe="aria-",Gbe="data-";function P9(t,r){return t.indexOf(r)===0}function Wh(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,o;r===!1?o={aria:!0,data:!0,attr:!0}:r===!0?o={aria:!0}:o=_e({},r);var s={};return Object.keys(t).forEach(function(c){(o.aria&&(c==="role"||P9(c,Wbe))||o.data&&P9(c,Gbe)||o.attr&&zbe.includes(c))&&(s[c]=t[c])}),s}function WX(t){return t&&ze.isValidElement(t)&&t.type===ze.Fragment}const Kbe=(t,r,o)=>ze.isValidElement(t)?ze.cloneElement(t,typeof o=="function"?o(t.props||{}):o):r;function gc(t,r){return Kbe(t,t,r)}const D9=t=>typeof t=="object"&&t!=null&&t.nodeType===1,L9=(t,r)=>(!r||t!=="hidden")&&t!=="visible"&&t!=="clip",Ly=(t,r)=>{if(t.clientHeight<t.scrollHeight||t.clientWidth<t.scrollWidth){const o=getComputedStyle(t,null);return L9(o.overflowY,r)||L9(o.overflowX,r)||(s=>{const c=(d=>{if(!d.ownerDocument||!d.ownerDocument.defaultView)return null;try{return d.ownerDocument.defaultView.frameElement}catch{return null}})(s);return!!c&&(c.clientHeight<s.scrollHeight||c.clientWidth<s.scrollWidth)})(t)}return!1},ky=(t,r,o,s,c,d,f,v)=>d<t&&f>r||d>t&&f<r?0:d<=t&&v<=o||f>=r&&v>=o?d-t-s:f>r&&v<o||d<t&&v>o?f-r+c:0,Ybe=t=>{const r=t.parentElement;return r??(t.getRootNode().host||null)},k9=(t,r)=>{var o,s,c,d;if(typeof document>"u")return[];const{scrollMode:f,block:v,inline:g,boundary:_,skipOverflowHiddenElements:C}=r,b=typeof _=="function"?_:oe=>oe!==_;if(!D9(t))throw new TypeError("Invalid target");const T=document.scrollingElement||document.documentElement,A=[];let I=t;for(;D9(I)&&b(I);){if(I=Ybe(I),I===T){A.push(I);break}I!=null&&I===document.body&&Ly(I)&&!Ly(document.documentElement)||I!=null&&Ly(I,C)&&A.push(I)}const N=(s=(o=window.visualViewport)==null?void 0:o.width)!=null?s:innerWidth,P=(d=(c=window.visualViewport)==null?void 0:c.height)!=null?d:innerHeight,{scrollX:D,scrollY:x}=window,{height:L,width:M,top:F,right:V,bottom:$,left:z}=t.getBoundingClientRect(),{top:K,right:G,bottom:J,left:ne}=(oe=>{const ae=window.getComputedStyle(oe);return{top:parseFloat(ae.scrollMarginTop)||0,right:parseFloat(ae.scrollMarginRight)||0,bottom:parseFloat(ae.scrollMarginBottom)||0,left:parseFloat(ae.scrollMarginLeft)||0}})(t);let te=v==="start"||v==="nearest"?F-K:v==="end"?$+J:F+L/2-K+J,ce=g==="center"?z+M/2-ne+G:g==="end"?V+G:z-ne;const ge=[];for(let oe=0;oe<A.length;oe++){const ae=A[oe],{height:ie,width:ve,top:me,right:le,bottom:de,left:Ee}=ae.getBoundingClientRect();if(f==="if-needed"&&F>=0&&z>=0&&$<=P&&V<=N&&(ae===T&&!Ly(ae)||F>=me&&$<=de&&z>=Ee&&V<=le))return ge;const se=getComputedStyle(ae),Te=parseInt(se.borderLeftWidth,10),we=parseInt(se.borderTopWidth,10),Le=parseInt(se.borderRightWidth,10),Ie=parseInt(se.borderBottomWidth,10);let De=0,Ye=0;const Me="offsetWidth"in ae?ae.offsetWidth-ae.clientWidth-Te-Le:0,Oe="offsetHeight"in ae?ae.offsetHeight-ae.clientHeight-we-Ie:0,$e="offsetWidth"in ae?ae.offsetWidth===0?0:ve/ae.offsetWidth:0,tt="offsetHeight"in ae?ae.offsetHeight===0?0:ie/ae.offsetHeight:0;if(T===ae)De=v==="start"?te:v==="end"?te-P:v==="nearest"?ky(x,x+P,P,we,Ie,x+te,x+te+L,L):te-P/2,Ye=g==="start"?ce:g==="center"?ce-N/2:g==="end"?ce-N:ky(D,D+N,N,Te,Le,D+ce,D+ce+M,M),De=Math.max(0,De+x),Ye=Math.max(0,Ye+D);else{De=v==="start"?te-me-we:v==="end"?te-de+Ie+Oe:v==="nearest"?ky(me,de,ie,we,Ie+Oe,te,te+L,L):te-(me+ie/2)+Oe/2,Ye=g==="start"?ce-Ee-Te:g==="center"?ce-(Ee+ve/2)+Me/2:g==="end"?ce-le+Le+Me:ky(Ee,le,ve,Te,Le+Me,ce,ce+M,M);const{scrollLeft:je,scrollTop:ke}=ae;De=tt===0?0:Math.max(0,Math.min(ke+De/tt,ae.scrollHeight-ie/tt+Oe)),Ye=$e===0?0:Math.max(0,Math.min(je+Ye/$e,ae.scrollWidth-ve/$e+Me)),te+=ke-De,ce+=je-Ye}ge.push({el:ae,top:De,left:Ye})}return ge},qbe=t=>t===!1?{block:"end",inline:"nearest"}:(r=>r===Object(r)&&Object.keys(r).length!==0)(t)?t:{block:"start",inline:"nearest"};function Xbe(t,r){if(!t.isConnected||!(c=>{let d=c;for(;d&&d.parentNode;){if(d.parentNode===document)return!0;d=d.parentNode instanceof ShadowRoot?d.parentNode.host:d.parentNode}return!1})(t))return;const o=(c=>{const d=window.getComputedStyle(c);return{top:parseFloat(d.scrollMarginTop)||0,right:parseFloat(d.scrollMarginRight)||0,bottom:parseFloat(d.scrollMarginBottom)||0,left:parseFloat(d.scrollMarginLeft)||0}})(t);if((c=>typeof c=="object"&&typeof c.behavior=="function")(r))return r.behavior(k9(t,r));const s=typeof r=="boolean"||r==null?void 0:r.behavior;for(const{el:c,top:d,left:f}of k9(t,qbe(r))){const v=d-o.top+o.bottom,g=f-o.left+o.right;c.scroll({top:v,left:g,behavior:s})}}const Jbe=t=>{const[,,,,r]=os();return r?`${t}-css-var`:""},_u=Jbe;var lt={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(r){var o=r.keyCode;if(r.altKey&&!r.ctrlKey||r.metaKey||o>=lt.F1&&o<=lt.F12)return!1;switch(o){case lt.ALT:case lt.CAPS_LOCK:case lt.CONTEXT_MENU:case lt.CTRL:case lt.DOWN:case lt.END:case lt.ESC:case lt.HOME:case lt.INSERT:case lt.LEFT:case lt.MAC_FF_META:case lt.META:case lt.NUMLOCK:case lt.NUM_CENTER:case lt.PAGE_DOWN:case lt.PAGE_UP:case lt.PAUSE:case lt.PRINT_SCREEN:case lt.RIGHT:case lt.SHIFT:case lt.UP:case lt.WIN_KEY:case lt.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(r){if(r>=lt.ZERO&&r<=lt.NINE||r>=lt.NUM_ZERO&&r<=lt.NUM_MULTIPLY||r>=lt.A&&r<=lt.Z||window.navigator.userAgent.indexOf("WebKit")!==-1&&r===0)return!0;switch(r){case lt.SPACE:case lt.QUESTION_MARK:case lt.NUM_PLUS:case lt.NUM_MINUS:case lt.NUM_PERIOD:case lt.NUM_DIVISION:case lt.SEMICOLON:case lt.DASH:case lt.EQUALS:case lt.COMMA:case lt.PERIOD:case lt.SLASH:case lt.APOSTROPHE:case lt.SINGLE_QUOTE:case lt.OPEN_SQUARE_BRACKET:case lt.BACKSLASH:case lt.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},GX=y.forwardRef(function(t,r){var o=t.prefixCls,s=t.style,c=t.className,d=t.duration,f=d===void 0?4.5:d,v=t.showProgress,g=t.pauseOnHover,_=g===void 0?!0:g,C=t.eventKey,b=t.content,T=t.closable,A=t.closeIcon,I=A===void 0?"x":A,N=t.props,P=t.onClick,D=t.onNoticeClose,x=t.times,L=t.hovering,M=y.useState(!1),F=Ue(M,2),V=F[0],$=F[1],z=y.useState(0),K=Ue(z,2),G=K[0],J=K[1],ne=y.useState(0),te=Ue(ne,2),ce=te[0],ge=te[1],oe=L||V,ae=f>0&&v,ie=function(){D(C)},ve=function(Te){(Te.key==="Enter"||Te.code==="Enter"||Te.keyCode===lt.ENTER)&&ie()};y.useEffect(function(){if(!oe&&f>0){var se=Date.now()-ce,Te=setTimeout(function(){ie()},f*1e3-ce);return function(){_&&clearTimeout(Te),ge(Date.now()-se)}}},[f,oe,x]),y.useEffect(function(){if(!oe&&ae&&(_||ce===0)){var se=performance.now(),Te,we=function Le(){cancelAnimationFrame(Te),Te=requestAnimationFrame(function(Ie){var De=Ie+ce-se,Ye=Math.min(De/(f*1e3),1);J(Ye*100),Ye<1&&Le()})};return we(),function(){_&&cancelAnimationFrame(Te)}}},[f,ce,oe,ae,x]);var me=y.useMemo(function(){return ln(T)==="object"&&T!==null?T:T?{closeIcon:I}:{}},[T,I]),le=Wh(me,!0),de=100-(!G||G<0?0:G>100?100:G),Ee="".concat(o,"-notice");return y.createElement("div",nt({},N,{ref:r,className:Ke(Ee,c,be({},"".concat(Ee,"-closable"),T)),style:s,onMouseEnter:function(Te){var we;$(!0),N==null||(we=N.onMouseEnter)===null||we===void 0||we.call(N,Te)},onMouseLeave:function(Te){var we;$(!1),N==null||(we=N.onMouseLeave)===null||we===void 0||we.call(N,Te)},onClick:P}),y.createElement("div",{className:"".concat(Ee,"-content")},b),T&&y.createElement("a",nt({tabIndex:0,className:"".concat(Ee,"-close"),onKeyDown:ve,"aria-label":"Close"},le,{onClick:function(Te){Te.preventDefault(),Te.stopPropagation(),ie()}}),me.closeIcon),ae&&y.createElement("progress",{className:"".concat(Ee,"-progress"),max:"100",value:de},de+"%"))}),KX=ze.createContext({}),Qbe=function(r){var o=r.children,s=r.classNames;return ze.createElement(KX.Provider,{value:{classNames:s}},o)},M9=8,F9=3,U9=16,Zbe=function(r){var o={offset:M9,threshold:F9,gap:U9};if(r&&ln(r)==="object"){var s,c,d;o.offset=(s=r.offset)!==null&&s!==void 0?s:M9,o.threshold=(c=r.threshold)!==null&&c!==void 0?c:F9,o.gap=(d=r.gap)!==null&&d!==void 0?d:U9}return[!!r,o]},eTe=["className","style","classNames","styles"],tTe=function(r){var o=r.configList,s=r.placement,c=r.prefixCls,d=r.className,f=r.style,v=r.motion,g=r.onAllNoticeRemoved,_=r.onNoticeClose,C=r.stack,b=y.useContext(KX),T=b.classNames,A=y.useRef({}),I=y.useState(null),N=Ue(I,2),P=N[0],D=N[1],x=y.useState([]),L=Ue(x,2),M=L[0],F=L[1],V=o.map(function(oe){return{config:oe,key:String(oe.key)}}),$=Zbe(C),z=Ue($,2),K=z[0],G=z[1],J=G.offset,ne=G.threshold,te=G.gap,ce=K&&(M.length>0||V.length<=ne),ge=typeof v=="function"?v(s):v;return y.useEffect(function(){K&&M.length>1&&F(function(oe){return oe.filter(function(ae){return V.some(function(ie){var ve=ie.key;return ae===ve})})})},[M,V,K]),y.useEffect(function(){var oe;if(K&&A.current[(oe=V[V.length-1])===null||oe===void 0?void 0:oe.key]){var ae;D(A.current[(ae=V[V.length-1])===null||ae===void 0?void 0:ae.key])}},[V,K]),ze.createElement(LX,nt({key:s,className:Ke(c,"".concat(c,"-").concat(s),T==null?void 0:T.list,d,be(be({},"".concat(c,"-stack"),!!K),"".concat(c,"-stack-expanded"),ce)),style:f,keys:V,motionAppear:!0},ge,{onAllRemoved:function(){g(s)}}),function(oe,ae){var ie=oe.config,ve=oe.className,me=oe.style,le=oe.index,de=ie,Ee=de.key,se=de.times,Te=String(Ee),we=ie,Le=we.className,Ie=we.style,De=we.classNames,Ye=we.styles,Me=xn(we,eTe),Oe=V.findIndex(function(Je){return Je.key===Te}),$e={};if(K){var tt=V.length-1-(Oe>-1?Oe:le-1),je=s==="top"||s==="bottom"?"-50%":"0";if(tt>0){var ke,dt,Ze;$e.height=ce?(ke=A.current[Te])===null||ke===void 0?void 0:ke.offsetHeight:P==null?void 0:P.offsetHeight;for(var ut=0,Tt=0;Tt<tt;Tt++){var pt;ut+=((pt=A.current[V[V.length-1-Tt].key])===null||pt===void 0?void 0:pt.offsetHeight)+te}var ht=(ce?ut:tt*J)*(s.startsWith("top")?1:-1),qe=!ce&&P!==null&&P!==void 0&&P.offsetWidth&&(dt=A.current[Te])!==null&&dt!==void 0&&dt.offsetWidth?((P==null?void 0:P.offsetWidth)-J*2*(tt<3?tt:3))/((Ze=A.current[Te])===null||Ze===void 0?void 0:Ze.offsetWidth):1;$e.transform="translate3d(".concat(je,", ").concat(ht,"px, 0) scaleX(").concat(qe,")")}else $e.transform="translate3d(".concat(je,", 0, 0)")}return ze.createElement("div",{ref:ae,className:Ke("".concat(c,"-notice-wrapper"),ve,De==null?void 0:De.wrapper),style:_e(_e(_e({},me),$e),Ye==null?void 0:Ye.wrapper),onMouseEnter:function(){return F(function(Ct){return Ct.includes(Te)?Ct:[].concat(Et(Ct),[Te])})},onMouseLeave:function(){return F(function(Ct){return Ct.filter(function(Nt){return Nt!==Te})})}},ze.createElement(GX,nt({},Me,{ref:function(Ct){Oe>-1?A.current[Te]=Ct:delete A.current[Te]},prefixCls:c,classNames:De,styles:Ye,className:Ke(Le,T==null?void 0:T.notice),style:Ie,times:se,key:Ee,eventKey:Ee,onNoticeClose:_,hovering:K&&M.length>0})))})},nTe=y.forwardRef(function(t,r){var o=t.prefixCls,s=o===void 0?"rc-notification":o,c=t.container,d=t.motion,f=t.maxCount,v=t.className,g=t.style,_=t.onAllRemoved,C=t.stack,b=t.renderNotifications,T=y.useState([]),A=Ue(T,2),I=A[0],N=A[1],P=function(K){var G,J=I.find(function(ne){return ne.key===K});J==null||(G=J.onClose)===null||G===void 0||G.call(J),N(function(ne){return ne.filter(function(te){return te.key!==K})})};y.useImperativeHandle(r,function(){return{open:function(K){N(function(G){var J=Et(G),ne=J.findIndex(function(ge){return ge.key===K.key}),te=_e({},K);if(ne>=0){var ce;te.times=(((ce=G[ne])===null||ce===void 0?void 0:ce.times)||0)+1,J[ne]=te}else te.times=0,J.push(te);return f>0&&J.length>f&&(J=J.slice(-f)),J})},close:function(K){P(K)},destroy:function(){N([])}}});var D=y.useState({}),x=Ue(D,2),L=x[0],M=x[1];y.useEffect(function(){var z={};I.forEach(function(K){var G=K.placement,J=G===void 0?"topRight":G;J&&(z[J]=z[J]||[],z[J].push(K))}),Object.keys(L).forEach(function(K){z[K]=z[K]||[]}),M(z)},[I]);var F=function(K){M(function(G){var J=_e({},G),ne=J[K]||[];return ne.length||delete J[K],J})},V=y.useRef(!1);if(y.useEffect(function(){Object.keys(L).length>0?V.current=!0:V.current&&(_==null||_(),V.current=!1)},[L]),!c)return null;var $=Object.keys(L);return Ml.createPortal(y.createElement(y.Fragment,null,$.map(function(z){var K=L[z],G=y.createElement(tTe,{key:z,configList:K,placement:z,prefixCls:s,className:v==null?void 0:v(z),style:g==null?void 0:g(z),motion:d,onNoticeClose:P,onAllNoticeRemoved:F,stack:C});return b?b(G,{prefixCls:s,key:z}):G})),c)}),rTe=["getContainer","motion","prefixCls","maxCount","className","style","onAllRemoved","stack","renderNotifications"],iTe=function(){return document.body},B9=0;function oTe(){for(var t={},r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return o.forEach(function(c){c&&Object.keys(c).forEach(function(d){var f=c[d];f!==void 0&&(t[d]=f)})}),t}function aTe(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.getContainer,o=r===void 0?iTe:r,s=t.motion,c=t.prefixCls,d=t.maxCount,f=t.className,v=t.style,g=t.onAllRemoved,_=t.stack,C=t.renderNotifications,b=xn(t,rTe),T=y.useState(),A=Ue(T,2),I=A[0],N=A[1],P=y.useRef(),D=y.createElement(nTe,{container:I,ref:P,prefixCls:c,motion:s,maxCount:d,className:f,style:v,onAllRemoved:g,stack:_,renderNotifications:C}),x=y.useState([]),L=Ue(x,2),M=L[0],F=L[1],V=y.useMemo(function(){return{open:function(z){var K=oTe(b,z);(K.key===null||K.key===void 0)&&(K.key="rc-notification-".concat(B9),B9+=1),F(function(G){return[].concat(Et(G),[{type:"open",config:K}])})},close:function(z){F(function(K){return[].concat(Et(K),[{type:"close",key:z}])})},destroy:function(){F(function(z){return[].concat(Et(z),[{type:"destroy"}])})}}},[]);return y.useEffect(function(){N(o())}),y.useEffect(function(){if(P.current&&M.length){M.forEach(function(K){switch(K.type){case"open":P.current.open(K.config);break;case"close":P.current.close(K.key);break;case"destroy":P.current.destroy();break}});var $,z;F(function(K){return($!==K||!z)&&($=K,z=K.filter(function(G){return!M.includes(G)})),z})}},[M]),[V,D]}var sTe={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"};const cTe=sTe;var lTe=function(r,o){return y.createElement(ao,nt({},r,{ref:o,icon:cTe}))},uTe=y.forwardRef(lTe);const pT=uTe,dTe=ze.createContext(void 0),YX=dTe,cd=100,hTe=10,fTe=cd*hTe,qX={Modal:cd,Drawer:cd,Popover:cd,Popconfirm:cd,Tooltip:cd,Tour:cd,FloatButton:cd},pTe={SelectLike:50,Dropdown:50,DatePicker:50,Menu:50,ImagePreview:1};function mTe(t){return t in qX}const M2=(t,r)=>{const[,o]=os(),s=ze.useContext(YX),c=mTe(t);let d;if(r!==void 0)d=[r,r];else{let f=s??0;c?f+=(s?0:o.zIndexPopupBase)+qX[t]:f+=pTe[t],d=[s===void 0?r:f,f]}return d};function Na(){Na=function(){return r};var t,r={},o=Object.prototype,s=o.hasOwnProperty,c=Object.defineProperty||function(oe,ae,ie){oe[ae]=ie.value},d=typeof Symbol=="function"?Symbol:{},f=d.iterator||"@@iterator",v=d.asyncIterator||"@@asyncIterator",g=d.toStringTag||"@@toStringTag";function _(oe,ae,ie){return Object.defineProperty(oe,ae,{value:ie,enumerable:!0,configurable:!0,writable:!0}),oe[ae]}try{_({},"")}catch{_=function(ie,ve,me){return ie[ve]=me}}function C(oe,ae,ie,ve){var me=ae&&ae.prototype instanceof D?ae:D,le=Object.create(me.prototype),de=new ce(ve||[]);return c(le,"_invoke",{value:G(oe,ie,de)}),le}function b(oe,ae,ie){try{return{type:"normal",arg:oe.call(ae,ie)}}catch(ve){return{type:"throw",arg:ve}}}r.wrap=C;var T="suspendedStart",A="suspendedYield",I="executing",N="completed",P={};function D(){}function x(){}function L(){}var M={};_(M,f,function(){return this});var F=Object.getPrototypeOf,V=F&&F(F(ge([])));V&&V!==o&&s.call(V,f)&&(M=V);var $=L.prototype=D.prototype=Object.create(M);function z(oe){["next","throw","return"].forEach(function(ae){_(oe,ae,function(ie){return this._invoke(ae,ie)})})}function K(oe,ae){function ie(me,le,de,Ee){var se=b(oe[me],oe,le);if(se.type!=="throw"){var Te=se.arg,we=Te.value;return we&&ln(we)=="object"&&s.call(we,"__await")?ae.resolve(we.__await).then(function(Le){ie("next",Le,de,Ee)},function(Le){ie("throw",Le,de,Ee)}):ae.resolve(we).then(function(Le){Te.value=Le,de(Te)},function(Le){return ie("throw",Le,de,Ee)})}Ee(se.arg)}var ve;c(this,"_invoke",{value:function(le,de){function Ee(){return new ae(function(se,Te){ie(le,de,se,Te)})}return ve=ve?ve.then(Ee,Ee):Ee()}})}function G(oe,ae,ie){var ve=T;return function(me,le){if(ve===I)throw Error("Generator is already running");if(ve===N){if(me==="throw")throw le;return{value:t,done:!0}}for(ie.method=me,ie.arg=le;;){var de=ie.delegate;if(de){var Ee=J(de,ie);if(Ee){if(Ee===P)continue;return Ee}}if(ie.method==="next")ie.sent=ie._sent=ie.arg;else if(ie.method==="throw"){if(ve===T)throw ve=N,ie.arg;ie.dispatchException(ie.arg)}else ie.method==="return"&&ie.abrupt("return",ie.arg);ve=I;var se=b(oe,ae,ie);if(se.type==="normal"){if(ve=ie.done?N:A,se.arg===P)continue;return{value:se.arg,done:ie.done}}se.type==="throw"&&(ve=N,ie.method="throw",ie.arg=se.arg)}}}function J(oe,ae){var ie=ae.method,ve=oe.iterator[ie];if(ve===t)return ae.delegate=null,ie==="throw"&&oe.iterator.return&&(ae.method="return",ae.arg=t,J(oe,ae),ae.method==="throw")||ie!=="return"&&(ae.method="throw",ae.arg=new TypeError("The iterator does not provide a '"+ie+"' method")),P;var me=b(ve,oe.iterator,ae.arg);if(me.type==="throw")return ae.method="throw",ae.arg=me.arg,ae.delegate=null,P;var le=me.arg;return le?le.done?(ae[oe.resultName]=le.value,ae.next=oe.nextLoc,ae.method!=="return"&&(ae.method="next",ae.arg=t),ae.delegate=null,P):le:(ae.method="throw",ae.arg=new TypeError("iterator result is not an object"),ae.delegate=null,P)}function ne(oe){var ae={tryLoc:oe[0]};1 in oe&&(ae.catchLoc=oe[1]),2 in oe&&(ae.finallyLoc=oe[2],ae.afterLoc=oe[3]),this.tryEntries.push(ae)}function te(oe){var ae=oe.completion||{};ae.type="normal",delete ae.arg,oe.completion=ae}function ce(oe){this.tryEntries=[{tryLoc:"root"}],oe.forEach(ne,this),this.reset(!0)}function ge(oe){if(oe||oe===""){var ae=oe[f];if(ae)return ae.call(oe);if(typeof oe.next=="function")return oe;if(!isNaN(oe.length)){var ie=-1,ve=function me(){for(;++ie<oe.length;)if(s.call(oe,ie))return me.value=oe[ie],me.done=!1,me;return me.value=t,me.done=!0,me};return ve.next=ve}}throw new TypeError(ln(oe)+" is not iterable")}return x.prototype=L,c($,"constructor",{value:L,configurable:!0}),c(L,"constructor",{value:x,configurable:!0}),x.displayName=_(L,g,"GeneratorFunction"),r.isGeneratorFunction=function(oe){var ae=typeof oe=="function"&&oe.constructor;return!!ae&&(ae===x||(ae.displayName||ae.name)==="GeneratorFunction")},r.mark=function(oe){return Object.setPrototypeOf?Object.setPrototypeOf(oe,L):(oe.__proto__=L,_(oe,g,"GeneratorFunction")),oe.prototype=Object.create($),oe},r.awrap=function(oe){return{__await:oe}},z(K.prototype),_(K.prototype,v,function(){return this}),r.AsyncIterator=K,r.async=function(oe,ae,ie,ve,me){me===void 0&&(me=Promise);var le=new K(C(oe,ae,ie,ve),me);return r.isGeneratorFunction(ae)?le:le.next().then(function(de){return de.done?de.value:le.next()})},z($),_($,g,"Generator"),_($,f,function(){return this}),_($,"toString",function(){return"[object Generator]"}),r.keys=function(oe){var ae=Object(oe),ie=[];for(var ve in ae)ie.push(ve);return ie.reverse(),function me(){for(;ie.length;){var le=ie.pop();if(le in ae)return me.value=le,me.done=!1,me}return me.done=!0,me}},r.values=ge,ce.prototype={constructor:ce,reset:function(ae){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(te),!ae)for(var ie in this)ie.charAt(0)==="t"&&s.call(this,ie)&&!isNaN(+ie.slice(1))&&(this[ie]=t)},stop:function(){this.done=!0;var ae=this.tryEntries[0].completion;if(ae.type==="throw")throw ae.arg;return this.rval},dispatchException:function(ae){if(this.done)throw ae;var ie=this;function ve(Te,we){return de.type="throw",de.arg=ae,ie.next=Te,we&&(ie.method="next",ie.arg=t),!!we}for(var me=this.tryEntries.length-1;me>=0;--me){var le=this.tryEntries[me],de=le.completion;if(le.tryLoc==="root")return ve("end");if(le.tryLoc<=this.prev){var Ee=s.call(le,"catchLoc"),se=s.call(le,"finallyLoc");if(Ee&&se){if(this.prev<le.catchLoc)return ve(le.catchLoc,!0);if(this.prev<le.finallyLoc)return ve(le.finallyLoc)}else if(Ee){if(this.prev<le.catchLoc)return ve(le.catchLoc,!0)}else{if(!se)throw Error("try statement without catch or finally");if(this.prev<le.finallyLoc)return ve(le.finallyLoc)}}}},abrupt:function(ae,ie){for(var ve=this.tryEntries.length-1;ve>=0;--ve){var me=this.tryEntries[ve];if(me.tryLoc<=this.prev&&s.call(me,"finallyLoc")&&this.prev<me.finallyLoc){var le=me;break}}le&&(ae==="break"||ae==="continue")&&le.tryLoc<=ie&&ie<=le.finallyLoc&&(le=null);var de=le?le.completion:{};return de.type=ae,de.arg=ie,le?(this.method="next",this.next=le.finallyLoc,P):this.complete(de)},complete:function(ae,ie){if(ae.type==="throw")throw ae.arg;return ae.type==="break"||ae.type==="continue"?this.next=ae.arg:ae.type==="return"?(this.rval=this.arg=ae.arg,this.method="return",this.next="end"):ae.type==="normal"&&ie&&(this.next=ie),P},finish:function(ae){for(var ie=this.tryEntries.length-1;ie>=0;--ie){var ve=this.tryEntries[ie];if(ve.finallyLoc===ae)return this.complete(ve.completion,ve.afterLoc),te(ve),P}},catch:function(ae){for(var ie=this.tryEntries.length-1;ie>=0;--ie){var ve=this.tryEntries[ie];if(ve.tryLoc===ae){var me=ve.completion;if(me.type==="throw"){var le=me.arg;te(ve)}return le}}throw Error("illegal catch attempt")},delegateYield:function(ae,ie,ve){return this.delegate={iterator:ge(ae),resultName:ie,nextLoc:ve},this.method==="next"&&(this.arg=t),P}},r}function V9(t,r,o,s,c,d,f){try{var v=t[d](f),g=v.value}catch(_){return void o(_)}v.done?r(g):Promise.resolve(g).then(s,c)}function nf(t){return function(){var r=this,o=arguments;return new Promise(function(s,c){var d=t.apply(r,o);function f(g){V9(d,s,c,f,v,"next",g)}function v(g){V9(d,s,c,f,v,"throw",g)}f(void 0)})}}var Zv=_e({},NEe),gTe=Zv.version,BO=Zv.render,vTe=Zv.unmountComponentAtNode,mT;try{var ETe=Number((gTe||"").split(".")[0]);ETe>=18&&(mT=Zv.createRoot)}catch{}function j9(t){var r=Zv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;r&&ln(r)==="object"&&(r.usingClientEntryPoint=t)}var rb="__rc_react_root__";function _Te(t,r){j9(!0);var o=r[rb]||mT(r);j9(!1),o.render(t),r[rb]=o}function STe(t,r){BO==null||BO(t,r)}function yTe(t,r){if(mT){_Te(t,r);return}STe(t,r)}function CTe(t){return FP.apply(this,arguments)}function FP(){return FP=nf(Na().mark(function t(r){return Na().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",Promise.resolve().then(function(){var c;(c=r[rb])===null||c===void 0||c.unmount(),delete r[rb]}));case 1:case"end":return s.stop()}},t)})),FP.apply(this,arguments)}function bTe(t){vTe(t)}function TTe(t){return UP.apply(this,arguments)}function UP(){return UP=nf(Na().mark(function t(r){return Na().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(mT===void 0){s.next=2;break}return s.abrupt("return",CTe(r));case 2:bTe(r);case 3:case"end":return s.stop()}},t)})),UP.apply(this,arguments)}const RTe=(t,r)=>(yTe(t,r),()=>TTe(r));let wTe=RTe;function XX(){return wTe}const VO=()=>({height:0,opacity:0}),$9=t=>{const{scrollHeight:r}=t;return{height:r,opacity:1}},ITe=t=>({height:t?t.offsetHeight:0}),jO=(t,r)=>(r==null?void 0:r.deadline)===!0||r.propertyName==="height",ATe=function(){return{motionName:`${arguments.length>0&&arguments[0]!==void 0?arguments[0]:Pv}-motion-collapse`,onAppearStart:VO,onEnterStart:VO,onAppearActive:$9,onEnterActive:$9,onLeaveStart:ITe,onLeaveActive:VO,onAppearEnd:jO,onEnterEnd:jO,onLeaveEnd:jO,motionDeadline:500}},JX=(t,r,o)=>o!==void 0?o:`${t}-${r}`,BP=ATe;function ia(t,r){var o=Object.assign({},t);return Array.isArray(r)&&r.forEach(function(s){delete o[s]}),o}const gT=function(t){if(!t)return!1;if(t instanceof Element){if(t.offsetParent)return!0;if(t.getBBox){var r=t.getBBox(),o=r.width,s=r.height;if(o||s)return!0}if(t.getBoundingClientRect){var c=t.getBoundingClientRect(),d=c.width,f=c.height;if(d||f)return!0}}return!1},OTe=t=>{const{componentCls:r,colorPrimary:o}=t;return{[r]:{position:"absolute",background:"transparent",pointerEvents:"none",boxSizing:"border-box",color:`var(--wave-color, ${o})`,boxShadow:"0 0 0 0 currentcolor",opacity:.2,"&.wave-motion-appear":{transition:[`box-shadow 0.4s ${t.motionEaseOutCirc}`,`opacity 2s ${t.motionEaseOutCirc}`].join(","),"&-active":{boxShadow:"0 0 0 6px currentcolor",opacity:0},"&.wave-quick":{transition:[`box-shadow ${t.motionDurationSlow} ${t.motionEaseInOut}`,`opacity ${t.motionDurationSlow} ${t.motionEaseInOut}`].join(",")}}}}},xTe=wCe("Wave",t=>[OTe(t)]),QX=`${Pv}-wave-target`;function $O(t){return t&&t!=="#fff"&&t!=="#ffffff"&&t!=="rgb(255, 255, 255)"&&t!=="rgba(255, 255, 255, 1)"&&!/rgba\((?:\d*, ){3}0\)/.test(t)&&t!=="transparent"}function NTe(t){const{borderTopColor:r,borderColor:o,backgroundColor:s}=getComputedStyle(t);return $O(r)?r:$O(o)?o:$O(s)?s:null}function HO(t){return Number.isNaN(t)?0:t}const PTe=t=>{const{className:r,target:o,component:s,registerUnmount:c}=t,d=y.useRef(null),f=y.useRef(null);y.useEffect(()=>{f.current=c()},[]);const[v,g]=y.useState(null),[_,C]=y.useState([]),[b,T]=y.useState(0),[A,I]=y.useState(0),[N,P]=y.useState(0),[D,x]=y.useState(0),[L,M]=y.useState(!1),F={left:b,top:A,width:N,height:D,borderRadius:_.map(z=>`${z}px`).join(" ")};v&&(F["--wave-color"]=v);function V(){const z=getComputedStyle(o);g(NTe(o));const K=z.position==="static",{borderLeftWidth:G,borderTopWidth:J}=z;T(K?o.offsetLeft:HO(-parseFloat(G))),I(K?o.offsetTop:HO(-parseFloat(J))),P(o.offsetWidth),x(o.offsetHeight);const{borderTopLeftRadius:ne,borderTopRightRadius:te,borderBottomLeftRadius:ce,borderBottomRightRadius:ge}=z;C([ne,te,ge,ce].map(oe=>HO(parseFloat(oe))))}if(y.useEffect(()=>{if(o){const z=ii(()=>{V(),M(!0)});let K;return typeof ResizeObserver<"u"&&(K=new ResizeObserver(V),K.observe(o)),()=>{ii.cancel(z),K==null||K.disconnect()}}},[]),!L)return null;const $=(s==="Checkbox"||s==="Radio")&&(o==null?void 0:o.classList.contains(QX));return y.createElement(ef,{visible:!0,motionAppear:!0,motionName:"wave-motion",motionDeadline:5e3,onAppearEnd:(z,K)=>{var G,J;if(K.deadline||K.propertyName==="opacity"){const ne=(G=d.current)===null||G===void 0?void 0:G.parentElement;(J=f.current)===null||J===void 0||J.call(f).then(()=>{ne==null||ne.remove()})}return!1}},(z,K)=>{let{className:G}=z;return y.createElement("div",{ref:nl(d,K),className:Ke(r,G,{"wave-quick":$}),style:F})})},DTe=(t,r)=>{var o;const{component:s}=r;if(s==="Checkbox"&&!(!((o=t.querySelector("input"))===null||o===void 0)&&o.checked))return;const c=document.createElement("div");c.style.position="absolute",c.style.left="0px",c.style.top="0px",t==null||t.insertBefore(c,t==null?void 0:t.firstChild);const d=XX();let f=null;function v(){return f}f=d(y.createElement(PTe,Object.assign({},r,{target:t,registerUnmount:v})),c)},LTe=DTe,kTe=(t,r,o)=>{const{wave:s}=y.useContext(wr),[,c,d]=os(),f=ho(_=>{const C=t.current;if(s!=null&&s.disabled||!C)return;const b=C.querySelector(`.${QX}`)||C,{showEffect:T}=s||{};(T||LTe)(b,{className:r,token:c,component:o,event:_,hashId:d})}),v=y.useRef(null);return _=>{ii.cancel(v.current),v.current=ii(()=>{f(_)})}},MTe=kTe,FTe=t=>{const{children:r,disabled:o,component:s}=t,{getPrefixCls:c}=y.useContext(wr),d=y.useRef(null),f=c("wave"),[,v]=xTe(f),g=MTe(d,Ke(f,v),s);if(ze.useEffect(()=>{const C=d.current;if(!C||C.nodeType!==1||o)return;const b=T=>{!gT(T.target)||!C.getAttribute||C.getAttribute("disabled")||C.disabled||C.className.includes("disabled")||C.className.includes("-leave")||g(T)};return C.addEventListener("click",b,!0),()=>{C.removeEventListener("click",b,!0)}},[o]),!ze.isValidElement(r))return r??null;const _=Nm(r)?nl(qv(r),d):d;return gc(r,{ref:_})},UTe=FTe,BTe=t=>{const r=ze.useContext(Jv);return ze.useMemo(()=>t?typeof t=="string"?t??r:t instanceof Function?t(r):r:r,[t,r])},Su=BTe;globalThis&&globalThis.__rest;const ZX=y.createContext(null),eE=(t,r)=>{const o=y.useContext(ZX),s=y.useMemo(()=>{if(!o)return"";const{compactDirection:c,isFirstItem:d,isLastItem:f}=o,v=c==="vertical"?"-vertical-":"-";return Ke(`${t}-compact${v}item`,{[`${t}-compact${v}first-item`]:d,[`${t}-compact${v}last-item`]:f,[`${t}-compact${v}item-rtl`]:r==="rtl"})},[t,r,o]);return{compactSize:o==null?void 0:o.compactSize,compactDirection:o==null?void 0:o.compactDirection,compactItemClassnames:s}},VTe=t=>{const{children:r}=t;return y.createElement(ZX.Provider,{value:null},r)};var jTe=globalThis&&globalThis.__rest||function(t,r){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&r.indexOf(s)<0&&(o[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(t);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(t,s[c])&&(o[s[c]]=t[s[c]]);return o};const eJ=y.createContext(void 0),$Te=t=>{const{getPrefixCls:r,direction:o}=y.useContext(wr),{prefixCls:s,size:c,className:d}=t,f=jTe(t,["prefixCls","size","className"]),v=r("btn-group",s),[,,g]=os(),_=y.useMemo(()=>{switch(c){case"large":return"lg";case"small":return"sm";default:return""}},[c]),C=Ke(v,{[`${v}-${_}`]:_,[`${v}-rtl`]:o==="rtl"},d,g);return y.createElement(eJ.Provider,{value:c},y.createElement("div",Object.assign({},f,{className:C})))},HTe=$Te,H9=/^[\u4E00-\u9FA5]{2}$/,VP=H9.test.bind(H9);function z9(t){return typeof t=="string"}function zO(t){return t==="text"||t==="link"}function zTe(t,r){if(t==null)return;const o=r?" ":"";return typeof t!="string"&&typeof t!="number"&&z9(t.type)&&VP(t.props.children)?gc(t,{children:t.props.children.split("").join(o)}):z9(t)?VP(t)?ze.createElement("span",null,t.split("").join(o)):ze.createElement("span",null,t):WX(t)?ze.createElement("span",null,t):t}function WTe(t,r){let o=!1;const s=[];return ze.Children.forEach(t,c=>{const d=typeof c,f=d==="string"||d==="number";if(o&&f){const v=s.length-1,g=s[v];s[v]=`${g}${c}`}else s.push(c);o=f}),ze.Children.map(s,c=>zTe(c,r))}["default","primary","danger"].concat(Et(zh));const GTe=y.forwardRef((t,r)=>{const{className:o,style:s,children:c,prefixCls:d}=t,f=Ke(`${d}-icon`,o);return ze.createElement("span",{ref:r,className:f,style:s},c)}),jP=GTe,W9=y.forwardRef((t,r)=>{const{prefixCls:o,className:s,style:c,iconClassName:d}=t,f=Ke(`${o}-loading-icon`,s);return ze.createElement(jP,{prefixCls:o,className:f,style:c,ref:r},ze.createElement(pT,{className:d}))}),WO=()=>({width:0,opacity:0,transform:"scale(0)"}),GO=t=>({width:t.scrollWidth,opacity:1,transform:"scale(1)"}),KTe=t=>{const{prefixCls:r,loading:o,existIcon:s,className:c,style:d,mount:f}=t,v=!!o;return s?ze.createElement(W9,{prefixCls:r,className:c,style:d}):ze.createElement(ef,{visible:v,motionName:`${r}-loading-icon-motion`,motionAppear:!f,motionEnter:!f,motionLeave:!f,removeOnLeave:!0,onAppearStart:WO,onAppearActive:GO,onEnterStart:WO,onEnterActive:GO,onLeaveStart:GO,onLeaveActive:WO},(g,_)=>{let{className:C,style:b}=g;const T=Object.assign(Object.assign({},d),b);return ze.createElement(W9,{prefixCls:r,className:Ke(c,C),style:T,ref:_})})},YTe=KTe,G9=(t,r)=>({[`> span, > ${t}`]:{"&:not(:last-child)":{[`&, & > ${t}`]:{"&:not(:disabled)":{borderInlineEndColor:r}}},"&:not(:first-child)":{[`&, & > ${t}`]:{"&:not(:disabled)":{borderInlineStartColor:r}}}}}),qTe=t=>{const{componentCls:r,fontSize:o,lineWidth:s,groupBorderColor:c,colorErrorHover:d}=t;return{[`${r}-group`]:[{position:"relative",display:"inline-flex",[`> span, > ${r}`]:{"&:not(:last-child)":{[`&, & > ${r}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},"&:not(:first-child)":{marginInlineStart:t.calc(s).mul(-1).equal(),[`&, & > ${r}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}},[r]:{position:"relative",zIndex:1,"&:hover, &:focus, &:active":{zIndex:2},"&[disabled]":{zIndex:0}},[`${r}-icon-only`]:{fontSize:o}},G9(`${r}-primary`,c),G9(`${r}-danger`,d)]}},XTe=qTe;var JTe=["b"],QTe=["v"],KO=function(r){return Math.round(Number(r||0))},ZTe=function(r){if(r instanceof qr)return r;if(r&&ln(r)==="object"&&"h"in r&&"b"in r){var o=r,s=o.b,c=xn(o,JTe);return _e(_e({},c),{},{v:s})}return typeof r=="string"&&/hsb/.test(r)?r.replace(/hsb/,"hsv"):r},Dv=function(t){Bl(o,t);var r=Vl(o);function o(s){return io(this,o),r.call(this,ZTe(s))}return oo(o,[{key:"toHsbString",value:function(){var c=this.toHsb(),d=KO(c.s*100),f=KO(c.b*100),v=KO(c.h),g=c.a,_="hsb(".concat(v,", ").concat(d,"%, ").concat(f,"%)"),C="hsba(".concat(v,", ").concat(d,"%, ").concat(f,"%, ").concat(g.toFixed(g===0?0:2),")");return g===1?_:C}},{key:"toHsb",value:function(){var c=this.toHsv(),d=c.v,f=xn(c,QTe);return _e(_e({},f),{},{b:d,a:this.a})}}]),o}(qr),e1e=function(r){return r instanceof Dv?r:new Dv(r)};e1e("#1677ff");const t1e=(t,r)=>(t==null?void 0:t.replace(/[^\w/]/g,"").slice(0,r?8:6))||"",n1e=(t,r)=>t?t1e(t,r):"";let r1e=function(){function t(r){io(this,t);var o;if(this.cleared=!1,r instanceof t){this.metaColor=r.metaColor.clone(),this.colors=(o=r.colors)===null||o===void 0?void 0:o.map(c=>({color:new t(c.color),percent:c.percent})),this.cleared=r.cleared;return}const s=Array.isArray(r);s&&r.length?(this.colors=r.map(c=>{let{color:d,percent:f}=c;return{color:new t(d),percent:f}}),this.metaColor=new Dv(this.colors[0].color.metaColor)):this.metaColor=new Dv(s?"":r),(!r||s&&!this.colors)&&(this.metaColor=this.metaColor.setA(0),this.cleared=!0)}return oo(t,[{key:"toHsb",value:function(){return this.metaColor.toHsb()}},{key:"toHsbString",value:function(){return this.metaColor.toHsbString()}},{key:"toHex",value:function(){return n1e(this.toHexString(),this.metaColor.a<1)}},{key:"toHexString",value:function(){return this.metaColor.toHexString()}},{key:"toRgb",value:function(){return this.metaColor.toRgb()}},{key:"toRgbString",value:function(){return this.metaColor.toRgbString()}},{key:"isGradient",value:function(){return!!this.colors&&!this.cleared}},{key:"getColors",value:function(){return this.colors||[{color:this,percent:0}]}},{key:"toCssString",value:function(){const{colors:o}=this;return o?`linear-gradient(90deg, ${o.map(c=>`${c.color.toRgbString()} ${c.percent}%`).join(", ")})`:this.metaColor.toRgbString()}},{key:"equals",value:function(o){return!o||this.isGradient()!==o.isGradient()?!1:this.isGradient()?this.colors.length===o.colors.length&&this.colors.every((s,c)=>{const d=o.colors[c];return s.percent===d.percent&&s.color.equals(d.color)}):this.toHexString()===o.toHexString()}}])}();var i1e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M765.7 486.8L314.9 134.7A7.97 7.97 0 00302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 000-50.4z"}}]},name:"right",theme:"outlined"};const o1e=i1e;var a1e=function(r,o){return y.createElement(ao,nt({},r,{ref:o,icon:o1e}))},s1e=y.forwardRef(a1e);const ib=s1e,c1e=t=>({[t.componentCls]:{[`${t.antCls}-motion-collapse-legacy`]:{overflow:"hidden","&-active":{transition:`height ${t.motionDurationMid} ${t.motionEaseInOut},
        opacity ${t.motionDurationMid} ${t.motionEaseInOut} !important`}},[`${t.antCls}-motion-collapse`]:{overflow:"hidden",transition:`height ${t.motionDurationMid} ${t.motionEaseInOut},
        opacity ${t.motionDurationMid} ${t.motionEaseInOut} !important`}}}),tJ=c1e,l1e=t=>({animationDuration:t,animationFillMode:"both"}),u1e=t=>({animationDuration:t,animationFillMode:"both"}),F2=function(t,r,o,s){const d=(arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1)?"&":"";return{[`
      ${d}${t}-enter,
      ${d}${t}-appear
    `]:Object.assign(Object.assign({},l1e(s)),{animationPlayState:"paused"}),[`${d}${t}-leave`]:Object.assign(Object.assign({},u1e(s)),{animationPlayState:"paused"}),[`
      ${d}${t}-enter${t}-enter-active,
      ${d}${t}-appear${t}-appear-active
    `]:{animationName:r,animationPlayState:"running"},[`${d}${t}-leave${t}-leave-active`]:{animationName:o,animationPlayState:"running",pointerEvents:"none"}}},d1e=new _r("antMoveDownIn",{"0%":{transform:"translate3d(0, 100%, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),h1e=new _r("antMoveDownOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(0, 100%, 0)",transformOrigin:"0 0",opacity:0}}),f1e=new _r("antMoveLeftIn",{"0%":{transform:"translate3d(-100%, 0, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),p1e=new _r("antMoveLeftOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(-100%, 0, 0)",transformOrigin:"0 0",opacity:0}}),m1e=new _r("antMoveRightIn",{"0%":{transform:"translate3d(100%, 0, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),g1e=new _r("antMoveRightOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(100%, 0, 0)",transformOrigin:"0 0",opacity:0}}),v1e=new _r("antMoveUpIn",{"0%":{transform:"translate3d(0, -100%, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),E1e=new _r("antMoveUpOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(0, -100%, 0)",transformOrigin:"0 0",opacity:0}}),_1e={"move-up":{inKeyframes:v1e,outKeyframes:E1e},"move-down":{inKeyframes:d1e,outKeyframes:h1e},"move-left":{inKeyframes:f1e,outKeyframes:p1e},"move-right":{inKeyframes:m1e,outKeyframes:g1e}},K9=(t,r)=>{const{antCls:o}=t,s=`${o}-${r}`,{inKeyframes:c,outKeyframes:d}=_1e[r];return[F2(s,c,d,t.motionDurationMid),{[`
        ${s}-enter,
        ${s}-appear
      `]:{opacity:0,animationTimingFunction:t.motionEaseOutCirc},[`${s}-leave`]:{animationTimingFunction:t.motionEaseInOutCirc}}]},nJ=new _r("antSlideUpIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1}}),rJ=new _r("antSlideUpOut",{"0%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0}}),iJ=new _r("antSlideDownIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1}}),oJ=new _r("antSlideDownOut",{"0%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0}}),S1e=new _r("antSlideLeftIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1}}),y1e=new _r("antSlideLeftOut",{"0%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0}}),C1e=new _r("antSlideRightIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1}}),b1e=new _r("antSlideRightOut",{"0%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0}}),T1e={"slide-up":{inKeyframes:nJ,outKeyframes:rJ},"slide-down":{inKeyframes:iJ,outKeyframes:oJ},"slide-left":{inKeyframes:S1e,outKeyframes:y1e},"slide-right":{inKeyframes:C1e,outKeyframes:b1e}},ob=(t,r)=>{const{antCls:o}=t,s=`${o}-${r}`,{inKeyframes:c,outKeyframes:d}=T1e[r];return[F2(s,c,d,t.motionDurationMid),{[`
      ${s}-enter,
      ${s}-appear
    `]:{transform:"scale(0)",transformOrigin:"0% 0%",opacity:0,animationTimingFunction:t.motionEaseOutQuint,"&-prepare":{transform:"scale(1)"}},[`${s}-leave`]:{animationTimingFunction:t.motionEaseInQuint}}]},U2=new _r("antZoomIn",{"0%":{transform:"scale(0.2)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),R1e=new _r("antZoomOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.2)",opacity:0}}),Y9=new _r("antZoomBigIn",{"0%":{transform:"scale(0.8)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),q9=new _r("antZoomBigOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.8)",opacity:0}}),w1e=new _r("antZoomUpIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 0%"}}),I1e=new _r("antZoomUpOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 0%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0}}),A1e=new _r("antZoomLeftIn",{"0%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"0% 50%"}}),O1e=new _r("antZoomLeftOut",{"0%":{transform:"scale(1)",transformOrigin:"0% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0}}),x1e=new _r("antZoomRightIn",{"0%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"100% 50%"}}),N1e=new _r("antZoomRightOut",{"0%":{transform:"scale(1)",transformOrigin:"100% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0}}),P1e=new _r("antZoomDownIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 100%"}}),D1e=new _r("antZoomDownOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 100%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0}}),L1e={zoom:{inKeyframes:U2,outKeyframes:R1e},"zoom-big":{inKeyframes:Y9,outKeyframes:q9},"zoom-big-fast":{inKeyframes:Y9,outKeyframes:q9},"zoom-left":{inKeyframes:A1e,outKeyframes:O1e},"zoom-right":{inKeyframes:x1e,outKeyframes:N1e},"zoom-up":{inKeyframes:w1e,outKeyframes:I1e},"zoom-down":{inKeyframes:P1e,outKeyframes:D1e}},aJ=(t,r)=>{const{antCls:o}=t,s=`${o}-${r}`,{inKeyframes:c,outKeyframes:d}=L1e[r];return[F2(s,c,d,r==="zoom-big-fast"?t.motionDurationFast:t.motionDurationMid),{[`
        ${s}-enter,
        ${s}-appear
      `]:{transform:"scale(0)",opacity:0,animationTimingFunction:t.motionEaseOutCirc,"&-prepare":{transform:"none"}},[`${s}-leave`]:{animationTimingFunction:t.motionEaseInOutCirc}}]},k1e=(t,r)=>{const{r:o,g:s,b:c,a:d}=t.toRgb(),f=new Dv(t.toRgbString()).onBackground(r).toHsv();return d<=.5?f.v>.5:o*.299+s*.587+c*.114>192},sJ=t=>{const{paddingInline:r,onlyIconSize:o}=t;return oi(t,{buttonPaddingHorizontal:r,buttonPaddingVertical:0,buttonIconOnlyFontSize:o})},cJ=t=>{var r,o,s,c,d,f;const v=(r=t.contentFontSize)!==null&&r!==void 0?r:t.fontSize,g=(o=t.contentFontSizeSM)!==null&&o!==void 0?o:t.fontSize,_=(s=t.contentFontSizeLG)!==null&&s!==void 0?s:t.fontSizeLG,C=(c=t.contentLineHeight)!==null&&c!==void 0?c:pC(v),b=(d=t.contentLineHeightSM)!==null&&d!==void 0?d:pC(g),T=(f=t.contentLineHeightLG)!==null&&f!==void 0?f:pC(_),A=k1e(new r1e(t.colorBgSolid),"#fff")?"#000":"#fff",I=zh.reduce((N,P)=>Object.assign(Object.assign({},N),{[`${P}ShadowColor`]:`0 ${Xe(t.controlOutlineWidth)} 0 ${Vg(t[`${P}1`],t.colorBgContainer)}`}),{});return Object.assign(Object.assign({},I),{fontWeight:400,defaultShadow:`0 ${t.controlOutlineWidth}px 0 ${t.controlTmpOutline}`,primaryShadow:`0 ${t.controlOutlineWidth}px 0 ${t.controlOutline}`,dangerShadow:`0 ${t.controlOutlineWidth}px 0 ${t.colorErrorOutline}`,primaryColor:t.colorTextLightSolid,dangerColor:t.colorTextLightSolid,borderColorDisabled:t.colorBorder,defaultGhostColor:t.colorBgContainer,ghostBg:"transparent",defaultGhostBorderColor:t.colorBgContainer,paddingInline:t.paddingContentHorizontal-t.lineWidth,paddingInlineLG:t.paddingContentHorizontal-t.lineWidth,paddingInlineSM:8-t.lineWidth,onlyIconSize:"inherit",onlyIconSizeSM:"inherit",onlyIconSizeLG:"inherit",groupBorderColor:t.colorPrimaryHover,linkHoverBg:"transparent",textTextColor:t.colorText,textTextHoverColor:t.colorText,textTextActiveColor:t.colorText,textHoverBg:t.colorFillTertiary,defaultColor:t.colorText,defaultBg:t.colorBgContainer,defaultBorderColor:t.colorBorder,defaultBorderColorDisabled:t.colorBorder,defaultHoverBg:t.colorBgContainer,defaultHoverColor:t.colorPrimaryHover,defaultHoverBorderColor:t.colorPrimaryHover,defaultActiveBg:t.colorBgContainer,defaultActiveColor:t.colorPrimaryActive,defaultActiveBorderColor:t.colorPrimaryActive,solidTextColor:A,contentFontSize:v,contentFontSizeSM:g,contentFontSizeLG:_,contentLineHeight:C,contentLineHeightSM:b,contentLineHeightLG:T,paddingBlock:Math.max((t.controlHeight-v*C)/2-t.lineWidth,0),paddingBlockSM:Math.max((t.controlHeightSM-g*b)/2-t.lineWidth,0),paddingBlockLG:Math.max((t.controlHeightLG-_*T)/2-t.lineWidth,0)})},M1e=t=>{const{componentCls:r,iconCls:o,fontWeight:s,opacityLoading:c,motionDurationSlow:d,motionEaseInOut:f,marginXS:v,calc:g}=t;return{[r]:{outline:"none",position:"relative",display:"inline-flex",gap:t.marginXS,alignItems:"center",justifyContent:"center",fontWeight:s,whiteSpace:"nowrap",textAlign:"center",backgroundImage:"none",background:"transparent",border:`${Xe(t.lineWidth)} ${t.lineType} transparent`,cursor:"pointer",transition:`all ${t.motionDurationMid} ${t.motionEaseInOut}`,userSelect:"none",touchAction:"manipulation",color:t.colorText,"&:disabled > *":{pointerEvents:"none"},[`${r}-icon > svg`]:Qv(),"> a":{color:"currentColor"},"&:not(:disabled)":lT(t),[`&${r}-two-chinese-chars::first-letter`]:{letterSpacing:"0.34em"},[`&${r}-two-chinese-chars > *:not(${o})`]:{marginInlineEnd:"-0.34em",letterSpacing:"0.34em"},[`&${r}-icon-only`]:{paddingInline:0,[`&${r}-compact-item`]:{flex:"none"},[`&${r}-round`]:{width:"auto"}},[`&${r}-loading`]:{opacity:c,cursor:"default"},[`${r}-loading-icon`]:{transition:["width","opacity","margin"].map(_=>`${_} ${d} ${f}`).join(",")},[`&:not(${r}-icon-end)`]:{[`${r}-loading-icon-motion`]:{"&-appear-start, &-enter-start":{marginInlineEnd:g(v).mul(-1).equal()},"&-appear-active, &-enter-active":{marginInlineEnd:0},"&-leave-start":{marginInlineEnd:0},"&-leave-active":{marginInlineEnd:g(v).mul(-1).equal()}}},"&-icon-end":{flexDirection:"row-reverse",[`${r}-loading-icon-motion`]:{"&-appear-start, &-enter-start":{marginInlineStart:g(v).mul(-1).equal()},"&-appear-active, &-enter-active":{marginInlineStart:0},"&-leave-start":{marginInlineStart:0},"&-leave-active":{marginInlineStart:g(v).mul(-1).equal()}}}}}},lJ=(t,r,o)=>({[`&:not(:disabled):not(${t}-disabled)`]:{"&:hover":r,"&:active":o}}),F1e=t=>({minWidth:t.controlHeight,paddingInlineStart:0,paddingInlineEnd:0,borderRadius:"50%"}),U1e=t=>({borderRadius:t.controlHeight,paddingInlineStart:t.calc(t.controlHeight).div(2).equal(),paddingInlineEnd:t.calc(t.controlHeight).div(2).equal()}),B1e=t=>({cursor:"not-allowed",borderColor:t.borderColorDisabled,color:t.colorTextDisabled,background:t.colorBgContainerDisabled,boxShadow:"none"}),vT=(t,r,o,s,c,d,f,v)=>({[`&${t}-background-ghost`]:Object.assign(Object.assign({color:o||void 0,background:r,borderColor:s||void 0,boxShadow:"none"},lJ(t,Object.assign({background:r},f),Object.assign({background:r},v))),{"&:disabled":{cursor:"not-allowed",color:c||void 0,borderColor:d||void 0}})}),V1e=t=>({[`&:disabled, &${t.componentCls}-disabled`]:Object.assign({},B1e(t))}),j1e=t=>({[`&:disabled, &${t.componentCls}-disabled`]:{cursor:"not-allowed",color:t.colorTextDisabled}}),ET=(t,r,o,s)=>{const d=s&&["link","text"].includes(s)?j1e:V1e;return Object.assign(Object.assign({},d(t)),lJ(t.componentCls,r,o))},_T=(t,r,o,s,c)=>({[`&${t.componentCls}-variant-solid`]:Object.assign({color:r,background:o},ET(t,s,c))}),ST=(t,r,o,s,c)=>({[`&${t.componentCls}-variant-outlined, &${t.componentCls}-variant-dashed`]:Object.assign({borderColor:r,background:o},ET(t,s,c))}),yT=t=>({[`&${t.componentCls}-variant-dashed`]:{borderStyle:"dashed"}}),CT=(t,r,o,s)=>({[`&${t.componentCls}-variant-filled`]:Object.assign({boxShadow:"none",background:r},ET(t,o,s))}),Fl=(t,r,o,s,c)=>({[`&${t.componentCls}-variant-${o}`]:Object.assign({color:r,boxShadow:"none"},ET(t,s,c,o))}),$1e=t=>{const{componentCls:r}=t;return zh.reduce((o,s)=>{const c=t[`${s}6`],d=t[`${s}1`],f=t[`${s}5`],v=t[`${s}2`],g=t[`${s}3`],_=t[`${s}7`];return Object.assign(Object.assign({},o),{[`&${r}-color-${s}`]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:c,boxShadow:t[`${s}ShadowColor`]},_T(t,t.colorTextLightSolid,c,{background:f},{background:_})),ST(t,c,t.colorBgContainer,{color:f,borderColor:f,background:t.colorBgContainer},{color:_,borderColor:_,background:t.colorBgContainer})),yT(t)),CT(t,d,{background:v},{background:g})),Fl(t,c,"link",{color:f},{color:_})),Fl(t,c,"text",{color:f,background:d},{color:_,background:g}))})},{})},H1e=t=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:t.defaultColor,boxShadow:t.defaultShadow},_T(t,t.solidTextColor,t.colorBgSolid,{color:t.solidTextColor,background:t.colorBgSolidHover},{color:t.solidTextColor,background:t.colorBgSolidActive})),yT(t)),CT(t,t.colorFillTertiary,{background:t.colorFillSecondary},{background:t.colorFill})),vT(t.componentCls,t.ghostBg,t.defaultGhostColor,t.defaultGhostBorderColor,t.colorTextDisabled,t.colorBorder)),Fl(t,t.textTextColor,"link",{color:t.colorLinkHover,background:t.linkHoverBg},{color:t.colorLinkActive})),z1e=t=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:t.colorPrimary,boxShadow:t.primaryShadow},ST(t,t.colorPrimary,t.colorBgContainer,{color:t.colorPrimaryTextHover,borderColor:t.colorPrimaryHover,background:t.colorBgContainer},{color:t.colorPrimaryTextActive,borderColor:t.colorPrimaryActive,background:t.colorBgContainer})),yT(t)),CT(t,t.colorPrimaryBg,{background:t.colorPrimaryBgHover},{background:t.colorPrimaryBorder})),Fl(t,t.colorPrimaryText,"text",{color:t.colorPrimaryTextHover,background:t.colorPrimaryBg},{color:t.colorPrimaryTextActive,background:t.colorPrimaryBorder})),Fl(t,t.colorPrimaryText,"link",{color:t.colorPrimaryTextHover,background:t.linkHoverBg},{color:t.colorPrimaryTextActive})),vT(t.componentCls,t.ghostBg,t.colorPrimary,t.colorPrimary,t.colorTextDisabled,t.colorBorder,{color:t.colorPrimaryHover,borderColor:t.colorPrimaryHover},{color:t.colorPrimaryActive,borderColor:t.colorPrimaryActive})),W1e=t=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:t.colorError,boxShadow:t.dangerShadow},_T(t,t.dangerColor,t.colorError,{background:t.colorErrorHover},{background:t.colorErrorActive})),ST(t,t.colorError,t.colorBgContainer,{color:t.colorErrorHover,borderColor:t.colorErrorBorderHover},{color:t.colorErrorActive,borderColor:t.colorErrorActive})),yT(t)),CT(t,t.colorErrorBg,{background:t.colorErrorBgFilledHover},{background:t.colorErrorBgActive})),Fl(t,t.colorError,"text",{color:t.colorErrorHover,background:t.colorErrorBg},{color:t.colorErrorHover,background:t.colorErrorBgActive})),Fl(t,t.colorError,"link",{color:t.colorErrorHover},{color:t.colorErrorActive})),vT(t.componentCls,t.ghostBg,t.colorError,t.colorError,t.colorTextDisabled,t.colorBorder,{color:t.colorErrorHover,borderColor:t.colorErrorHover},{color:t.colorErrorActive,borderColor:t.colorErrorActive})),G1e=t=>Object.assign(Object.assign({},Fl(t,t.colorLink,"link",{color:t.colorLinkHover},{color:t.colorLinkActive})),vT(t.componentCls,t.ghostBg,t.colorInfo,t.colorInfo,t.colorTextDisabled,t.colorBorder,{color:t.colorInfoHover,borderColor:t.colorInfoHover},{color:t.colorInfoActive,borderColor:t.colorInfoActive})),K1e=t=>{const{componentCls:r}=t;return Object.assign({[`${r}-color-default`]:H1e(t),[`${r}-color-primary`]:z1e(t),[`${r}-color-dangerous`]:W1e(t),[`${r}-color-link`]:G1e(t)},$1e(t))},Y1e=t=>Object.assign(Object.assign(Object.assign(Object.assign({},ST(t,t.defaultBorderColor,t.defaultBg,{color:t.defaultHoverColor,borderColor:t.defaultHoverBorderColor,background:t.defaultHoverBg},{color:t.defaultActiveColor,borderColor:t.defaultActiveBorderColor,background:t.defaultActiveBg})),Fl(t,t.textTextColor,"text",{color:t.textTextHoverColor,background:t.textHoverBg},{color:t.textTextActiveColor,background:t.colorBgTextActive})),_T(t,t.primaryColor,t.colorPrimary,{background:t.colorPrimaryHover,color:t.primaryColor},{background:t.colorPrimaryActive,color:t.primaryColor})),Fl(t,t.colorLink,"link",{color:t.colorLinkHover,background:t.linkHoverBg},{color:t.colorLinkActive})),B2=function(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const{componentCls:o,controlHeight:s,fontSize:c,borderRadius:d,buttonPaddingHorizontal:f,iconCls:v,buttonPaddingVertical:g,buttonIconOnlyFontSize:_}=t;return[{[r]:{fontSize:c,height:s,padding:`${Xe(g)} ${Xe(f)}`,borderRadius:d,[`&${o}-icon-only`]:{width:s,[v]:{fontSize:_}}}},{[`${o}${o}-circle${r}`]:F1e(t)},{[`${o}${o}-round${r}`]:U1e(t)}]},q1e=t=>{const r=oi(t,{fontSize:t.contentFontSize});return B2(r,t.componentCls)},X1e=t=>{const r=oi(t,{controlHeight:t.controlHeightSM,fontSize:t.contentFontSizeSM,padding:t.paddingXS,buttonPaddingHorizontal:t.paddingInlineSM,buttonPaddingVertical:0,borderRadius:t.borderRadiusSM,buttonIconOnlyFontSize:t.onlyIconSizeSM});return B2(r,`${t.componentCls}-sm`)},J1e=t=>{const r=oi(t,{controlHeight:t.controlHeightLG,fontSize:t.contentFontSizeLG,buttonPaddingHorizontal:t.paddingInlineLG,buttonPaddingVertical:0,borderRadius:t.borderRadiusLG,buttonIconOnlyFontSize:t.onlyIconSizeLG});return B2(r,`${t.componentCls}-lg`)},Q1e=t=>{const{componentCls:r}=t;return{[r]:{[`&${r}-block`]:{width:"100%"}}}},Z1e=Oo("Button",t=>{const r=sJ(t);return[M1e(r),q1e(r),X1e(r),J1e(r),Q1e(r),K1e(r),Y1e(r),XTe(r)]},cJ,{unitless:{fontWeight:!0,contentLineHeight:!0,contentLineHeightSM:!0,contentLineHeightLG:!0}});function eRe(t,r,o){const{focusElCls:s,focus:c,borderElCls:d}=o,f=d?"> *":"",v=["hover",c?"focus":null,"active"].filter(Boolean).map(g=>`&:${g} ${f}`).join(",");return{[`&-item:not(${r}-last-item)`]:{marginInlineEnd:t.calc(t.lineWidth).mul(-1).equal()},"&-item":Object.assign(Object.assign({[v]:{zIndex:2}},s?{[`&${s}`]:{zIndex:2}}:{}),{[`&[disabled] ${f}`]:{zIndex:0}})}}function tRe(t,r,o){const{borderElCls:s}=o,c=s?`> ${s}`:"";return{[`&-item:not(${r}-first-item):not(${r}-last-item) ${c}`]:{borderRadius:0},[`&-item:not(${r}-last-item)${r}-first-item`]:{[`& ${c}, &${t}-sm ${c}, &${t}-lg ${c}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&-item:not(${r}-first-item)${r}-last-item`]:{[`& ${c}, &${t}-sm ${c}, &${t}-lg ${c}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}}}function V2(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{focus:!0};const{componentCls:o}=t,s=`${o}-compact`;return{[s]:Object.assign(Object.assign({},eRe(t,s,r)),tRe(o,s,r))}}function nRe(t,r){return{[`&-item:not(${r}-last-item)`]:{marginBottom:t.calc(t.lineWidth).mul(-1).equal()},"&-item":{"&:hover,&:focus,&:active":{zIndex:2},"&[disabled]":{zIndex:0}}}}function rRe(t,r){return{[`&-item:not(${r}-first-item):not(${r}-last-item)`]:{borderRadius:0},[`&-item${r}-first-item:not(${r}-last-item)`]:{[`&, &${t}-sm, &${t}-lg`]:{borderEndEndRadius:0,borderEndStartRadius:0}},[`&-item${r}-last-item:not(${r}-first-item)`]:{[`&, &${t}-sm, &${t}-lg`]:{borderStartStartRadius:0,borderStartEndRadius:0}}}}function iRe(t){const r=`${t.componentCls}-compact-vertical`;return{[r]:Object.assign(Object.assign({},nRe(t,r)),rRe(t.componentCls,r))}}const oRe=t=>{const{componentCls:r,colorPrimaryHover:o,lineWidth:s,calc:c}=t,d=c(s).mul(-1).equal(),f=v=>{const g=`${r}-compact${v?"-vertical":""}-item${r}-primary:not([disabled])`;return{[`${g} + ${g}::before`]:{position:"absolute",top:v?d:0,insetInlineStart:v?0:d,backgroundColor:o,content:'""',width:v?"100%":s,height:v?s:"100%"}}};return Object.assign(Object.assign({},f()),f(!0))},aRe=uT(["Button","compact"],t=>{const r=sJ(t);return[V2(r),iRe(r),oRe(r)]},cJ);var sRe=globalThis&&globalThis.__rest||function(t,r){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&r.indexOf(s)<0&&(o[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(t);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(t,s[c])&&(o[s[c]]=t[s[c]]);return o};function cRe(t){if(typeof t=="object"&&t){let r=t==null?void 0:t.delay;return r=!Number.isNaN(r)&&typeof r=="number"?r:0,{loading:r<=0,delay:r}}return{loading:!!t,delay:0}}const lRe={default:["default","outlined"],primary:["primary","solid"],dashed:["default","dashed"],link:["link","link"],text:["default","text"]},uRe=ze.forwardRef((t,r)=>{var o,s;const{loading:c=!1,prefixCls:d,color:f,variant:v,type:g,danger:_=!1,shape:C="default",size:b,styles:T,disabled:A,className:I,rootClassName:N,children:P,icon:D,iconPosition:x="start",ghost:L=!1,block:M=!1,htmlType:F="button",classNames:V,style:$={},autoInsertSpace:z,autoFocus:K}=t,G=sRe(t,["loading","prefixCls","color","variant","type","danger","shape","size","styles","disabled","className","rootClassName","children","icon","iconPosition","ghost","block","htmlType","classNames","style","autoInsertSpace","autoFocus"]),J=g||"default",[ne,te]=y.useMemo(()=>{if(f&&v)return[f,v];const At=lRe[J]||[];return _?["danger",At[1]]:At},[g,f,v,_]),ge=ne==="danger"?"dangerous":ne,{getPrefixCls:oe,direction:ae,autoInsertSpace:ie,className:ve,style:me,classNames:le,styles:de}=Ec("button"),Ee=(o=z??ie)!==null&&o!==void 0?o:!0,se=oe("btn",d),[Te,we,Le]=Z1e(se),Ie=y.useContext(Zh),De=A??Ie,Ye=y.useContext(eJ),Me=y.useMemo(()=>cRe(c),[c]),[Oe,$e]=y.useState(Me.loading),[tt,je]=y.useState(!1),ke=y.useRef(null),dt=xm(r,ke),Ze=y.Children.count(P)===1&&!D&&!zO(te),ut=y.useRef(!0);ze.useEffect(()=>(ut.current=!1,()=>{ut.current=!0}),[]),y.useEffect(()=>{let At=null;Me.delay>0?At=setTimeout(()=>{At=null,$e(!0)},Me.delay):$e(Me.loading);function mt(){At&&(clearTimeout(At),At=null)}return mt},[Me]),y.useEffect(()=>{if(!ke.current||!Ee)return;const At=ke.current.textContent||"";Ze&&VP(At)?tt||je(!0):tt&&je(!1)}),y.useEffect(()=>{K&&ke.current&&ke.current.focus()},[]);const Tt=ze.useCallback(At=>{var mt;if(Oe||De){At.preventDefault();return}(mt=t.onClick)===null||mt===void 0||mt.call(t,("href"in t,At))},[t.onClick,Oe,De]),{compactSize:pt,compactItemClassnames:ht}=eE(se,ae),qe={large:"lg",small:"sm",middle:void 0},Je=Su(At=>{var mt,Pt;return(Pt=(mt=b??pt)!==null&&mt!==void 0?mt:Ye)!==null&&Pt!==void 0?Pt:At}),Ct=Je&&(s=qe[Je])!==null&&s!==void 0?s:"",Nt=Oe?"loading":D,Ot=ia(G,["navigate"]),on=Ke(se,we,Le,{[`${se}-${C}`]:C!=="default"&&C,[`${se}-${J}`]:J,[`${se}-dangerous`]:_,[`${se}-color-${ge}`]:ge,[`${se}-variant-${te}`]:te,[`${se}-${Ct}`]:Ct,[`${se}-icon-only`]:!P&&P!==0&&!!Nt,[`${se}-background-ghost`]:L&&!zO(te),[`${se}-loading`]:Oe,[`${se}-two-chinese-chars`]:tt&&Ee&&!Oe,[`${se}-block`]:M,[`${se}-rtl`]:ae==="rtl",[`${se}-icon-end`]:x==="end"},ht,I,N,ve),Vt=Object.assign(Object.assign({},me),$),kt=Ke(V==null?void 0:V.icon,le.icon),Kt=Object.assign(Object.assign({},(T==null?void 0:T.icon)||{}),de.icon||{}),Zt=D&&!Oe?ze.createElement(jP,{prefixCls:se,className:kt,style:Kt},D):c&&typeof c=="object"&&c.icon?ze.createElement(jP,{prefixCls:se,className:kt,style:Kt},c.icon):ze.createElement(YTe,{existIcon:!!D,prefixCls:se,loading:Oe,mount:ut.current}),Ft=P||P===0?WTe(P,Ze&&Ee):null;if(Ot.href!==void 0)return Te(ze.createElement("a",Object.assign({},Ot,{className:Ke(on,{[`${se}-disabled`]:De}),href:De?void 0:Ot.href,style:Vt,onClick:Tt,ref:dt,tabIndex:De?-1:0}),Zt,Ft));let _t=ze.createElement("button",Object.assign({},G,{type:F,className:on,style:Vt,onClick:Tt,disabled:De,ref:dt}),Zt,Ft,ht&&ze.createElement(aRe,{prefixCls:se}));return zO(te)||(_t=ze.createElement(UTe,{component:"Button",disabled:Oe},_t)),Te(_t)}),j2=uRe;j2.Group=HTe;j2.__ANT_BUTTON=!0;const mo=j2;var uJ=y.createContext(null),X9=[];function dRe(t,r){var o=y.useState(function(){if(!xa())return null;var I=document.createElement("div");return I}),s=Ue(o,1),c=s[0],d=y.useRef(!1),f=y.useContext(uJ),v=y.useState(X9),g=Ue(v,2),_=g[0],C=g[1],b=f||(d.current?void 0:function(I){C(function(N){var P=[I].concat(Et(N));return P})});function T(){c.parentElement||document.body.appendChild(c),d.current=!0}function A(){var I;(I=c.parentElement)===null||I===void 0||I.removeChild(c),d.current=!1}return Rr(function(){return t?f?f(T):T():A(),A},[t]),Rr(function(){_.length&&(_.forEach(function(I){return I()}),C(X9))},[_]),[c,b]}function hRe(t){var r="rc-scrollbar-measure-".concat(Math.random().toString(36).substring(7)),o=document.createElement("div");o.id=r;var s=o.style;s.position="absolute",s.left="0",s.top="0",s.width="100px",s.height="100px",s.overflow="scroll";var c,d;if(t){var f=getComputedStyle(t);s.scrollbarColor=f.scrollbarColor,s.scrollbarWidth=f.scrollbarWidth;var v=getComputedStyle(t,"::-webkit-scrollbar"),g=parseInt(v.width,10),_=parseInt(v.height,10);try{var C=g?"width: ".concat(v.width,";"):"",b=_?"height: ".concat(v.height,";"):"";cu(`
#`.concat(r,`::-webkit-scrollbar {
`).concat(C,`
`).concat(b,`
}`),r)}catch(I){console.error(I),c=g,d=_}}document.body.appendChild(o);var T=t&&c&&!isNaN(c)?c:o.offsetWidth-o.clientWidth,A=t&&d&&!isNaN(d)?d:o.offsetHeight-o.clientHeight;return document.body.removeChild(o),Iv(r),{width:T,height:A}}function fRe(t){return typeof document>"u"||!t||!(t instanceof Element)?{width:0,height:0}:hRe(t)}function pRe(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth}var mRe="rc-util-locker-".concat(Date.now()),J9=0;function gRe(t){var r=!!t,o=y.useState(function(){return J9+=1,"".concat(mRe,"_").concat(J9)}),s=Ue(o,1),c=s[0];Rr(function(){if(r){var d=fRe(document.body).width,f=pRe();cu(`
html body {
  overflow-y: hidden;
  `.concat(f?"width: calc(100% - ".concat(d,"px);"):"",`
}`),c)}else Iv(c);return function(){Iv(c)}},[r,c])}var Q9=!1;function vRe(t){return typeof t=="boolean"&&(Q9=t),Q9}var Z9=function(r){return r===!1?!1:!xa()||!r?null:typeof r=="string"?document.querySelector(r):typeof r=="function"?r():r},dJ=y.forwardRef(function(t,r){var o=t.open,s=t.autoLock,c=t.getContainer;t.debug;var d=t.autoDestroy,f=d===void 0?!0:d,v=t.children,g=y.useState(o),_=Ue(g,2),C=_[0],b=_[1],T=C||o;y.useEffect(function(){(f||o)&&b(o)},[o,f]);var A=y.useState(function(){return Z9(c)}),I=Ue(A,2),N=I[0],P=I[1];y.useEffect(function(){var J=Z9(c);P(J??null)});var D=dRe(T&&!N),x=Ue(D,2),L=x[0],M=x[1],F=N??L;gRe(s&&o&&xa()&&(F===L||F===document.body));var V=null;if(v&&Nm(v)&&r){var $=v;V=$.ref}var z=xm(V,r);if(!T||!xa()||N===void 0)return null;var K=F===!1||vRe(),G=v;return r&&(G=y.cloneElement(v,{ref:z})),y.createElement(uJ.Provider,{value:M},K?G:Ml.createPortal(G,F))});function ERe(){var t=_e({},Fh);return t.useId}var ez=0,tz=ERe();const hJ=tz?function(r){var o=tz();return r||o}:function(r){var o=y.useState("ssr-id"),s=Ue(o,2),c=s[0],d=s[1];return y.useEffect(function(){var f=ez;ez+=1,d("rc_unique_".concat(f))},[]),r||c};var Ph="RC_FORM_INTERNAL_HOOKS",ri=function(){_a(!1,"Can not find FormContext. Please make sure you wrap Field under Form.")},Gh=y.createContext({getFieldValue:ri,getFieldsValue:ri,getFieldError:ri,getFieldWarning:ri,getFieldsError:ri,isFieldsTouched:ri,isFieldTouched:ri,isFieldValidating:ri,isFieldsValidating:ri,resetFields:ri,setFields:ri,setFieldValue:ri,setFieldsValue:ri,validateFields:ri,submit:ri,getInternalHooks:function(){return ri(),{dispatch:ri,initEntityValue:ri,registerField:ri,useSubscribe:ri,setInitialValues:ri,destroyForm:ri,setCallbacks:ri,registerWatch:ri,getFields:ri,setValidateMessages:ri,setPreserve:ri,getInitialValue:ri}}}),Lv=y.createContext(null);function $P(t){return t==null?[]:Array.isArray(t)?t:[t]}function _Re(t){return t&&!!t._init}function HP(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var r=JSON.parse(JSON.stringify(this));return r.clone=this.clone,r}}}var zP=HP();function SRe(t){try{return Function.toString.call(t).indexOf("[native code]")!==-1}catch{return typeof t=="function"}}function yRe(t,r,o){if(T2())return Reflect.construct.apply(null,arguments);var s=[null];s.push.apply(s,r);var c=new(t.bind.apply(t,s));return o&&Tv(c,o.prototype),c}function WP(t){var r=typeof Map=="function"?new Map:void 0;return WP=function(s){if(s===null||!SRe(s))return s;if(typeof s!="function")throw new TypeError("Super expression must either be null or a function");if(r!==void 0){if(r.has(s))return r.get(s);r.set(s,c)}function c(){return yRe(s,arguments,Rv(this).constructor)}return c.prototype=Object.create(s.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),Tv(c,s)},WP(t)}var CRe=/%[sdj%]/g,bRe=function(){};typeof process<"u"&&process.env;function GP(t){if(!t||!t.length)return null;var r={};return t.forEach(function(o){var s=o.field;r[s]=r[s]||[],r[s].push(o)}),r}function Ts(t){for(var r=arguments.length,o=new Array(r>1?r-1:0),s=1;s<r;s++)o[s-1]=arguments[s];var c=0,d=o.length;if(typeof t=="function")return t.apply(null,o);if(typeof t=="string"){var f=t.replace(CRe,function(v){if(v==="%%")return"%";if(c>=d)return v;switch(v){case"%s":return String(o[c++]);case"%d":return Number(o[c++]);case"%j":try{return JSON.stringify(o[c++])}catch{return"[Circular]"}break;default:return v}});return f}return t}function TRe(t){return t==="string"||t==="url"||t==="hex"||t==="email"||t==="date"||t==="pattern"}function Ao(t,r){return!!(t==null||r==="array"&&Array.isArray(t)&&!t.length||TRe(r)&&typeof t=="string"&&!t)}function RRe(t,r,o){var s=[],c=0,d=t.length;function f(v){s.push.apply(s,Et(v||[])),c++,c===d&&o(s)}t.forEach(function(v){r(v,f)})}function nz(t,r,o){var s=0,c=t.length;function d(f){if(f&&f.length){o(f);return}var v=s;s=s+1,v<c?r(t[v],d):o([])}d([])}function wRe(t){var r=[];return Object.keys(t).forEach(function(o){r.push.apply(r,Et(t[o]||[]))}),r}var rz=function(t){Bl(o,t);var r=Vl(o);function o(s,c){var d;return io(this,o),d=r.call(this,"Async Validation Error"),be(or(d),"errors",void 0),be(or(d),"fields",void 0),d.errors=s,d.fields=c,d}return oo(o)}(WP(Error));function IRe(t,r,o,s,c){if(r.first){var d=new Promise(function(T,A){var I=function(D){return s(D),D.length?A(new rz(D,GP(D))):T(c)},N=wRe(t);nz(N,o,I)});return d.catch(function(T){return T}),d}var f=r.firstFields===!0?Object.keys(t):r.firstFields||[],v=Object.keys(t),g=v.length,_=0,C=[],b=new Promise(function(T,A){var I=function(P){if(C.push.apply(C,P),_++,_===g)return s(C),C.length?A(new rz(C,GP(C))):T(c)};v.length||(s(C),T(c)),v.forEach(function(N){var P=t[N];f.indexOf(N)!==-1?nz(P,o,I):RRe(P,o,I)})});return b.catch(function(T){return T}),b}function ARe(t){return!!(t&&t.message!==void 0)}function ORe(t,r){for(var o=t,s=0;s<r.length;s++){if(o==null)return o;o=o[r[s]]}return o}function iz(t,r){return function(o){var s;return t.fullFields?s=ORe(r,t.fullFields):s=r[o.field||t.fullField],ARe(o)?(o.field=o.field||t.fullField,o.fieldValue=s,o):{message:typeof o=="function"?o():o,fieldValue:s,field:o.field||t.fullField}}}function oz(t,r){if(r){for(var o in r)if(r.hasOwnProperty(o)){var s=r[o];ln(s)==="object"&&ln(t[o])==="object"?t[o]=_e(_e({},t[o]),s):t[o]=s}}return t}var Op="enum",xRe=function(r,o,s,c,d){r[Op]=Array.isArray(r[Op])?r[Op]:[],r[Op].indexOf(o)===-1&&c.push(Ts(d.messages[Op],r.fullField,r[Op].join(", ")))},NRe=function(r,o,s,c,d){if(r.pattern){if(r.pattern instanceof RegExp)r.pattern.lastIndex=0,r.pattern.test(o)||c.push(Ts(d.messages.pattern.mismatch,r.fullField,o,r.pattern));else if(typeof r.pattern=="string"){var f=new RegExp(r.pattern);f.test(o)||c.push(Ts(d.messages.pattern.mismatch,r.fullField,o,r.pattern))}}},PRe=function(r,o,s,c,d){var f=typeof r.len=="number",v=typeof r.min=="number",g=typeof r.max=="number",_=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,C=o,b=null,T=typeof o=="number",A=typeof o=="string",I=Array.isArray(o);if(T?b="number":A?b="string":I&&(b="array"),!b)return!1;I&&(C=o.length),A&&(C=o.replace(_,"_").length),f?C!==r.len&&c.push(Ts(d.messages[b].len,r.fullField,r.len)):v&&!g&&C<r.min?c.push(Ts(d.messages[b].min,r.fullField,r.min)):g&&!v&&C>r.max?c.push(Ts(d.messages[b].max,r.fullField,r.max)):v&&g&&(C<r.min||C>r.max)&&c.push(Ts(d.messages[b].range,r.fullField,r.min,r.max))},fJ=function(r,o,s,c,d,f){r.required&&(!s.hasOwnProperty(r.field)||Ao(o,f||r.type))&&c.push(Ts(d.messages.required,r.fullField))},My;const DRe=function(){if(My)return My;var t="[a-fA-F\\d:]",r=function(V){return V&&V.includeBoundaries?"(?:(?<=\\s|^)(?=".concat(t,")|(?<=").concat(t,")(?=\\s|$))"):""},o="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",s="[a-fA-F\\d]{1,4}",c=["(?:".concat(s,":){7}(?:").concat(s,"|:)"),"(?:".concat(s,":){6}(?:").concat(o,"|:").concat(s,"|:)"),"(?:".concat(s,":){5}(?::").concat(o,"|(?::").concat(s,"){1,2}|:)"),"(?:".concat(s,":){4}(?:(?::").concat(s,"){0,1}:").concat(o,"|(?::").concat(s,"){1,3}|:)"),"(?:".concat(s,":){3}(?:(?::").concat(s,"){0,2}:").concat(o,"|(?::").concat(s,"){1,4}|:)"),"(?:".concat(s,":){2}(?:(?::").concat(s,"){0,3}:").concat(o,"|(?::").concat(s,"){1,5}|:)"),"(?:".concat(s,":){1}(?:(?::").concat(s,"){0,4}:").concat(o,"|(?::").concat(s,"){1,6}|:)"),"(?::(?:(?::".concat(s,"){0,5}:").concat(o,"|(?::").concat(s,"){1,7}|:))")],d="(?:%[0-9a-zA-Z]{1,})?",f="(?:".concat(c.join("|"),")").concat(d),v=new RegExp("(?:^".concat(o,"$)|(?:^").concat(f,"$)")),g=new RegExp("^".concat(o,"$")),_=new RegExp("^".concat(f,"$")),C=function(V){return V&&V.exact?v:new RegExp("(?:".concat(r(V)).concat(o).concat(r(V),")|(?:").concat(r(V)).concat(f).concat(r(V),")"),"g")};C.v4=function(F){return F&&F.exact?g:new RegExp("".concat(r(F)).concat(o).concat(r(F)),"g")},C.v6=function(F){return F&&F.exact?_:new RegExp("".concat(r(F)).concat(f).concat(r(F)),"g")};var b="(?:(?:[a-z]+:)?//)",T="(?:\\S+(?::\\S*)?@)?",A=C.v4().source,I=C.v6().source,N="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",P="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",D="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",x="(?::\\d{2,5})?",L='(?:[/?#][^\\s"]*)?',M="(?:".concat(b,"|www\\.)").concat(T,"(?:localhost|").concat(A,"|").concat(I,"|").concat(N).concat(P).concat(D,")").concat(x).concat(L);return My=new RegExp("(?:^".concat(M,"$)"),"i"),My};var az={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},jg={integer:function(r){return jg.number(r)&&parseInt(r,10)===r},float:function(r){return jg.number(r)&&!jg.integer(r)},array:function(r){return Array.isArray(r)},regexp:function(r){if(r instanceof RegExp)return!0;try{return!!new RegExp(r)}catch{return!1}},date:function(r){return typeof r.getTime=="function"&&typeof r.getMonth=="function"&&typeof r.getYear=="function"&&!isNaN(r.getTime())},number:function(r){return isNaN(r)?!1:typeof r=="number"},object:function(r){return ln(r)==="object"&&!jg.array(r)},method:function(r){return typeof r=="function"},email:function(r){return typeof r=="string"&&r.length<=320&&!!r.match(az.email)},url:function(r){return typeof r=="string"&&r.length<=2048&&!!r.match(DRe())},hex:function(r){return typeof r=="string"&&!!r.match(az.hex)}},LRe=function(r,o,s,c,d){if(r.required&&o===void 0){fJ(r,o,s,c,d);return}var f=["integer","float","array","regexp","object","method","email","number","date","url","hex"],v=r.type;f.indexOf(v)>-1?jg[v](o)||c.push(Ts(d.messages.types[v],r.fullField,r.type)):v&&ln(o)!==r.type&&c.push(Ts(d.messages.types[v],r.fullField,r.type))},kRe=function(r,o,s,c,d){(/^\s+$/.test(o)||o==="")&&c.push(Ts(d.messages.whitespace,r.fullField))};const mr={required:fJ,whitespace:kRe,type:LRe,range:PRe,enum:xRe,pattern:NRe};var MRe=function(r,o,s,c,d){var f=[],v=r.required||!r.required&&c.hasOwnProperty(r.field);if(v){if(Ao(o)&&!r.required)return s();mr.required(r,o,c,f,d)}s(f)},FRe=function(r,o,s,c,d){var f=[],v=r.required||!r.required&&c.hasOwnProperty(r.field);if(v){if(o==null&&!r.required)return s();mr.required(r,o,c,f,d,"array"),o!=null&&(mr.type(r,o,c,f,d),mr.range(r,o,c,f,d))}s(f)},URe=function(r,o,s,c,d){var f=[],v=r.required||!r.required&&c.hasOwnProperty(r.field);if(v){if(Ao(o)&&!r.required)return s();mr.required(r,o,c,f,d),o!==void 0&&mr.type(r,o,c,f,d)}s(f)},BRe=function(r,o,s,c,d){var f=[],v=r.required||!r.required&&c.hasOwnProperty(r.field);if(v){if(Ao(o,"date")&&!r.required)return s();if(mr.required(r,o,c,f,d),!Ao(o,"date")){var g;o instanceof Date?g=o:g=new Date(o),mr.type(r,g,c,f,d),g&&mr.range(r,g.getTime(),c,f,d)}}s(f)},VRe="enum",jRe=function(r,o,s,c,d){var f=[],v=r.required||!r.required&&c.hasOwnProperty(r.field);if(v){if(Ao(o)&&!r.required)return s();mr.required(r,o,c,f,d),o!==void 0&&mr[VRe](r,o,c,f,d)}s(f)},$Re=function(r,o,s,c,d){var f=[],v=r.required||!r.required&&c.hasOwnProperty(r.field);if(v){if(Ao(o)&&!r.required)return s();mr.required(r,o,c,f,d),o!==void 0&&(mr.type(r,o,c,f,d),mr.range(r,o,c,f,d))}s(f)},HRe=function(r,o,s,c,d){var f=[],v=r.required||!r.required&&c.hasOwnProperty(r.field);if(v){if(Ao(o)&&!r.required)return s();mr.required(r,o,c,f,d),o!==void 0&&(mr.type(r,o,c,f,d),mr.range(r,o,c,f,d))}s(f)},zRe=function(r,o,s,c,d){var f=[],v=r.required||!r.required&&c.hasOwnProperty(r.field);if(v){if(Ao(o)&&!r.required)return s();mr.required(r,o,c,f,d),o!==void 0&&mr.type(r,o,c,f,d)}s(f)},WRe=function(r,o,s,c,d){var f=[],v=r.required||!r.required&&c.hasOwnProperty(r.field);if(v){if(o===""&&(o=void 0),Ao(o)&&!r.required)return s();mr.required(r,o,c,f,d),o!==void 0&&(mr.type(r,o,c,f,d),mr.range(r,o,c,f,d))}s(f)},GRe=function(r,o,s,c,d){var f=[],v=r.required||!r.required&&c.hasOwnProperty(r.field);if(v){if(Ao(o)&&!r.required)return s();mr.required(r,o,c,f,d),o!==void 0&&mr.type(r,o,c,f,d)}s(f)},KRe=function(r,o,s,c,d){var f=[],v=r.required||!r.required&&c.hasOwnProperty(r.field);if(v){if(Ao(o,"string")&&!r.required)return s();mr.required(r,o,c,f,d),Ao(o,"string")||mr.pattern(r,o,c,f,d)}s(f)},YRe=function(r,o,s,c,d){var f=[],v=r.required||!r.required&&c.hasOwnProperty(r.field);if(v){if(Ao(o)&&!r.required)return s();mr.required(r,o,c,f,d),Ao(o)||mr.type(r,o,c,f,d)}s(f)},qRe=function(r,o,s,c,d){var f=[],v=Array.isArray(o)?"array":ln(o);mr.required(r,o,c,f,d,v),s(f)},XRe=function(r,o,s,c,d){var f=[],v=r.required||!r.required&&c.hasOwnProperty(r.field);if(v){if(Ao(o,"string")&&!r.required)return s();mr.required(r,o,c,f,d,"string"),Ao(o,"string")||(mr.type(r,o,c,f,d),mr.range(r,o,c,f,d),mr.pattern(r,o,c,f,d),r.whitespace===!0&&mr.whitespace(r,o,c,f,d))}s(f)},YO=function(r,o,s,c,d){var f=r.type,v=[],g=r.required||!r.required&&c.hasOwnProperty(r.field);if(g){if(Ao(o,f)&&!r.required)return s();mr.required(r,o,c,v,d,f),Ao(o,f)||mr.type(r,o,c,v,d)}s(v)};const ev={string:XRe,method:zRe,number:WRe,boolean:URe,regexp:YRe,integer:HRe,float:$Re,array:FRe,object:GRe,enum:jRe,pattern:KRe,date:BRe,url:YO,hex:YO,email:YO,required:qRe,any:MRe};var tE=function(){function t(r){io(this,t),be(this,"rules",null),be(this,"_messages",zP),this.define(r)}return oo(t,[{key:"define",value:function(o){var s=this;if(!o)throw new Error("Cannot configure a schema with no rules");if(ln(o)!=="object"||Array.isArray(o))throw new Error("Rules must be an object");this.rules={},Object.keys(o).forEach(function(c){var d=o[c];s.rules[c]=Array.isArray(d)?d:[d]})}},{key:"messages",value:function(o){return o&&(this._messages=oz(HP(),o)),this._messages}},{key:"validate",value:function(o){var s=this,c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){},f=o,v=c,g=d;if(typeof v=="function"&&(g=v,v={}),!this.rules||Object.keys(this.rules).length===0)return g&&g(null,f),Promise.resolve(f);function _(I){var N=[],P={};function D(L){if(Array.isArray(L)){var M;N=(M=N).concat.apply(M,Et(L))}else N.push(L)}for(var x=0;x<I.length;x++)D(I[x]);N.length?(P=GP(N),g(N,P)):g(null,f)}if(v.messages){var C=this.messages();C===zP&&(C=HP()),oz(C,v.messages),v.messages=C}else v.messages=this.messages();var b={},T=v.keys||Object.keys(this.rules);T.forEach(function(I){var N=s.rules[I],P=f[I];N.forEach(function(D){var x=D;typeof x.transform=="function"&&(f===o&&(f=_e({},f)),P=f[I]=x.transform(P),P!=null&&(x.type=x.type||(Array.isArray(P)?"array":ln(P)))),typeof x=="function"?x={validator:x}:x=_e({},x),x.validator=s.getValidationMethod(x),x.validator&&(x.field=I,x.fullField=x.fullField||I,x.type=s.getType(x),b[I]=b[I]||[],b[I].push({rule:x,value:P,source:f,field:I}))})});var A={};return IRe(b,v,function(I,N){var P=I.rule,D=(P.type==="object"||P.type==="array")&&(ln(P.fields)==="object"||ln(P.defaultField)==="object");D=D&&(P.required||!P.required&&I.value),P.field=I.field;function x($,z){return _e(_e({},z),{},{fullField:"".concat(P.fullField,".").concat($),fullFields:P.fullFields?[].concat(Et(P.fullFields),[$]):[$]})}function L(){var $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],z=Array.isArray($)?$:[$];!v.suppressWarning&&z.length&&t.warning("async-validator:",z),z.length&&P.message!==void 0&&(z=[].concat(P.message));var K=z.map(iz(P,f));if(v.first&&K.length)return A[P.field]=1,N(K);if(!D)N(K);else{if(P.required&&!I.value)return P.message!==void 0?K=[].concat(P.message).map(iz(P,f)):v.error&&(K=[v.error(P,Ts(v.messages.required,P.field))]),N(K);var G={};P.defaultField&&Object.keys(I.value).map(function(te){G[te]=P.defaultField}),G=_e(_e({},G),I.rule.fields);var J={};Object.keys(G).forEach(function(te){var ce=G[te],ge=Array.isArray(ce)?ce:[ce];J[te]=ge.map(x.bind(null,te))});var ne=new t(J);ne.messages(v.messages),I.rule.options&&(I.rule.options.messages=v.messages,I.rule.options.error=v.error),ne.validate(I.value,I.rule.options||v,function(te){var ce=[];K&&K.length&&ce.push.apply(ce,Et(K)),te&&te.length&&ce.push.apply(ce,Et(te)),N(ce.length?ce:null)})}}var M;if(P.asyncValidator)M=P.asyncValidator(P,I.value,L,I.source,v);else if(P.validator){try{M=P.validator(P,I.value,L,I.source,v)}catch($){var F,V;(F=(V=console).error)===null||F===void 0||F.call(V,$),v.suppressValidatorError||setTimeout(function(){throw $},0),L($.message)}M===!0?L():M===!1?L(typeof P.message=="function"?P.message(P.fullField||P.field):P.message||"".concat(P.fullField||P.field," fails")):M instanceof Array?L(M):M instanceof Error&&L(M.message)}M&&M.then&&M.then(function(){return L()},function($){return L($)})},function(I){_(I)},f)}},{key:"getType",value:function(o){if(o.type===void 0&&o.pattern instanceof RegExp&&(o.type="pattern"),typeof o.validator!="function"&&o.type&&!ev.hasOwnProperty(o.type))throw new Error(Ts("Unknown rule type %s",o.type));return o.type||"string"}},{key:"getValidationMethod",value:function(o){if(typeof o.validator=="function")return o.validator;var s=Object.keys(o),c=s.indexOf("message");return c!==-1&&s.splice(c,1),s.length===1&&s[0]==="required"?ev.required:ev[this.getType(o)]||void 0}}]),t}();be(tE,"register",function(r,o){if(typeof o!="function")throw new Error("Cannot register a validator by type, validator is not a function");ev[r]=o});be(tE,"warning",bRe);be(tE,"messages",zP);be(tE,"validators",ev);var Ss="'${name}' is not a valid ${type}",pJ={default:"Validation error on field '${name}'",required:"'${name}' is required",enum:"'${name}' must be one of [${enum}]",whitespace:"'${name}' cannot be empty",date:{format:"'${name}' is invalid for format date",parse:"'${name}' could not be parsed as date",invalid:"'${name}' is invalid date"},types:{string:Ss,method:Ss,array:Ss,object:Ss,number:Ss,date:Ss,boolean:Ss,integer:Ss,float:Ss,regexp:Ss,email:Ss,url:Ss,hex:Ss},string:{len:"'${name}' must be exactly ${len} characters",min:"'${name}' must be at least ${min} characters",max:"'${name}' cannot be longer than ${max} characters",range:"'${name}' must be between ${min} and ${max} characters"},number:{len:"'${name}' must equal ${len}",min:"'${name}' cannot be less than ${min}",max:"'${name}' cannot be greater than ${max}",range:"'${name}' must be between ${min} and ${max}"},array:{len:"'${name}' must be exactly ${len} in length",min:"'${name}' cannot be less than ${min} in length",max:"'${name}' cannot be greater than ${max} in length",range:"'${name}' must be between ${min} and ${max} in length"},pattern:{mismatch:"'${name}' does not match pattern ${pattern}"}},sz=tE;function JRe(t,r){return t.replace(/\\?\$\{\w+\}/g,function(o){if(o.startsWith("\\"))return o.slice(1);var s=o.slice(2,-1);return r[s]})}var cz="CODE_LOGIC_ERROR";function KP(t,r,o,s,c){return YP.apply(this,arguments)}function YP(){return YP=nf(Na().mark(function t(r,o,s,c,d){var f,v,g,_,C,b,T,A,I;return Na().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return f=_e({},s),delete f.ruleIndex,sz.warning=function(){},f.validator&&(v=f.validator,f.validator=function(){try{return v.apply(void 0,arguments)}catch(D){return console.error(D),Promise.reject(cz)}}),g=null,f&&f.type==="array"&&f.defaultField&&(g=f.defaultField,delete f.defaultField),_=new sz(be({},r,[f])),C=qp(pJ,c.validateMessages),_.messages(C),b=[],P.prev=10,P.next=13,Promise.resolve(_.validate(be({},r,o),_e({},c)));case 13:P.next=18;break;case 15:P.prev=15,P.t0=P.catch(10),P.t0.errors&&(b=P.t0.errors.map(function(D,x){var L=D.message,M=L===cz?C.default:L;return y.isValidElement(M)?y.cloneElement(M,{key:"error_".concat(x)}):M}));case 18:if(!(!b.length&&g)){P.next=23;break}return P.next=21,Promise.all(o.map(function(D,x){return KP("".concat(r,".").concat(x),D,g,c,d)}));case 21:return T=P.sent,P.abrupt("return",T.reduce(function(D,x){return[].concat(Et(D),Et(x))},[]));case 23:return A=_e(_e({},s),{},{name:r,enum:(s.enum||[]).join(", ")},d),I=b.map(function(D){return typeof D=="string"?JRe(D,A):D}),P.abrupt("return",I);case 26:case"end":return P.stop()}},t,null,[[10,15]])})),YP.apply(this,arguments)}function QRe(t,r,o,s,c,d){var f=t.join("."),v=o.map(function(C,b){var T=C.validator,A=_e(_e({},C),{},{ruleIndex:b});return T&&(A.validator=function(I,N,P){var D=!1,x=function(){for(var F=arguments.length,V=new Array(F),$=0;$<F;$++)V[$]=arguments[$];Promise.resolve().then(function(){_a(!D,"Your validator function has already return a promise. `callback` will be ignored."),D||P.apply(void 0,V)})},L=T(I,N,x);D=L&&typeof L.then=="function"&&typeof L.catch=="function",_a(D,"`callback` is deprecated. Please return a promise instead."),D&&L.then(function(){P()}).catch(function(M){P(M||" ")})}),A}).sort(function(C,b){var T=C.warningOnly,A=C.ruleIndex,I=b.warningOnly,N=b.ruleIndex;return!!T==!!I?A-N:T?1:-1}),g;if(c===!0)g=new Promise(function(){var C=nf(Na().mark(function b(T,A){var I,N,P;return Na().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:I=0;case 1:if(!(I<v.length)){x.next=12;break}return N=v[I],x.next=5,KP(f,r,N,s,d);case 5:if(P=x.sent,!P.length){x.next=9;break}return A([{errors:P,rule:N}]),x.abrupt("return");case 9:I+=1,x.next=1;break;case 12:T([]);case 13:case"end":return x.stop()}},b)}));return function(b,T){return C.apply(this,arguments)}}());else{var _=v.map(function(C){return KP(f,r,C,s,d).then(function(b){return{errors:b,rule:C}})});g=(c?ewe(_):ZRe(_)).then(function(C){return Promise.reject(C)})}return g.catch(function(C){return C}),g}function ZRe(t){return qP.apply(this,arguments)}function qP(){return qP=nf(Na().mark(function t(r){return Na().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",Promise.all(r).then(function(c){var d,f=(d=[]).concat.apply(d,Et(c));return f}));case 1:case"end":return s.stop()}},t)})),qP.apply(this,arguments)}function ewe(t){return XP.apply(this,arguments)}function XP(){return XP=nf(Na().mark(function t(r){var o;return Na().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return o=0,c.abrupt("return",new Promise(function(d){r.forEach(function(f){f.then(function(v){v.errors.length&&d([v]),o+=1,o===r.length&&d([])})})}));case 2:case"end":return c.stop()}},t)})),XP.apply(this,arguments)}function to(t){return $P(t)}function lz(t,r){var o={};return r.forEach(function(s){var c=uc(t,s);o=ac(o,s,c)}),o}function om(t,r){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return t&&t.some(function(s){return mJ(r,s,o)})}function mJ(t,r){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return!t||!r||!o&&t.length!==r.length?!1:r.every(function(s,c){return t[c]===s})}function twe(t,r){if(t===r)return!0;if(!t&&r||t&&!r||!t||!r||ln(t)!=="object"||ln(r)!=="object")return!1;var o=Object.keys(t),s=Object.keys(r),c=new Set([].concat(o,s));return Et(c).every(function(d){var f=t[d],v=r[d];return typeof f=="function"&&typeof v=="function"?!0:f===v})}function nwe(t){var r=arguments.length<=1?void 0:arguments[1];return r&&r.target&&ln(r.target)==="object"&&t in r.target?r.target[t]:r}function uz(t,r,o){var s=t.length;if(r<0||r>=s||o<0||o>=s)return t;var c=t[r],d=r-o;return d>0?[].concat(Et(t.slice(0,o)),[c],Et(t.slice(o,r)),Et(t.slice(r+1,s))):d<0?[].concat(Et(t.slice(0,r)),Et(t.slice(r+1,o+1)),[c],Et(t.slice(o+1,s))):t}var rwe=["name"],ic=[];function qO(t,r,o,s,c,d){return typeof t=="function"?t(r,o,"source"in d?{source:d.source}:{}):s!==c}var $2=function(t){Bl(o,t);var r=Vl(o);function o(s){var c;if(io(this,o),c=r.call(this,s),be(or(c),"state",{resetCount:0}),be(or(c),"cancelRegisterFunc",null),be(or(c),"mounted",!1),be(or(c),"touched",!1),be(or(c),"dirty",!1),be(or(c),"validatePromise",void 0),be(or(c),"prevValidating",void 0),be(or(c),"errors",ic),be(or(c),"warnings",ic),be(or(c),"cancelRegister",function(){var g=c.props,_=g.preserve,C=g.isListField,b=g.name;c.cancelRegisterFunc&&c.cancelRegisterFunc(C,_,to(b)),c.cancelRegisterFunc=null}),be(or(c),"getNamePath",function(){var g=c.props,_=g.name,C=g.fieldContext,b=C.prefixName,T=b===void 0?[]:b;return _!==void 0?[].concat(Et(T),Et(_)):[]}),be(or(c),"getRules",function(){var g=c.props,_=g.rules,C=_===void 0?[]:_,b=g.fieldContext;return C.map(function(T){return typeof T=="function"?T(b):T})}),be(or(c),"refresh",function(){c.mounted&&c.setState(function(g){var _=g.resetCount;return{resetCount:_+1}})}),be(or(c),"metaCache",null),be(or(c),"triggerMetaEvent",function(g){var _=c.props.onMetaChange;if(_){var C=_e(_e({},c.getMeta()),{},{destroy:g});Av(c.metaCache,C)||_(C),c.metaCache=C}else c.metaCache=null}),be(or(c),"onStoreChange",function(g,_,C){var b=c.props,T=b.shouldUpdate,A=b.dependencies,I=A===void 0?[]:A,N=b.onReset,P=C.store,D=c.getNamePath(),x=c.getValue(g),L=c.getValue(P),M=_&&om(_,D);switch(C.type==="valueUpdate"&&C.source==="external"&&!Av(x,L)&&(c.touched=!0,c.dirty=!0,c.validatePromise=null,c.errors=ic,c.warnings=ic,c.triggerMetaEvent()),C.type){case"reset":if(!_||M){c.touched=!1,c.dirty=!1,c.validatePromise=void 0,c.errors=ic,c.warnings=ic,c.triggerMetaEvent(),N==null||N(),c.refresh();return}break;case"remove":{if(T&&qO(T,g,P,x,L,C)){c.reRender();return}break}case"setField":{var F=C.data;if(M){"touched"in F&&(c.touched=F.touched),"validating"in F&&!("originRCField"in F)&&(c.validatePromise=F.validating?Promise.resolve([]):null),"errors"in F&&(c.errors=F.errors||ic),"warnings"in F&&(c.warnings=F.warnings||ic),c.dirty=!0,c.triggerMetaEvent(),c.reRender();return}else if("value"in F&&om(_,D,!0)){c.reRender();return}if(T&&!D.length&&qO(T,g,P,x,L,C)){c.reRender();return}break}case"dependenciesUpdate":{var V=I.map(to);if(V.some(function($){return om(C.relatedFields,$)})){c.reRender();return}break}default:if(M||(!I.length||D.length||T)&&qO(T,g,P,x,L,C)){c.reRender();return}break}T===!0&&c.reRender()}),be(or(c),"validateRules",function(g){var _=c.getNamePath(),C=c.getValue(),b=g||{},T=b.triggerName,A=b.validateOnly,I=A===void 0?!1:A,N=Promise.resolve().then(nf(Na().mark(function P(){var D,x,L,M,F,V,$;return Na().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:if(c.mounted){K.next=2;break}return K.abrupt("return",[]);case 2:if(D=c.props,x=D.validateFirst,L=x===void 0?!1:x,M=D.messageVariables,F=D.validateDebounce,V=c.getRules(),T&&(V=V.filter(function(G){return G}).filter(function(G){var J=G.validateTrigger;if(!J)return!0;var ne=$P(J);return ne.includes(T)})),!(F&&T)){K.next=10;break}return K.next=8,new Promise(function(G){setTimeout(G,F)});case 8:if(c.validatePromise===N){K.next=10;break}return K.abrupt("return",[]);case 10:return $=QRe(_,C,V,g,L,M),$.catch(function(G){return G}).then(function(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ic;if(c.validatePromise===N){var J;c.validatePromise=null;var ne=[],te=[];(J=G.forEach)===null||J===void 0||J.call(G,function(ce){var ge=ce.rule.warningOnly,oe=ce.errors,ae=oe===void 0?ic:oe;ge?te.push.apply(te,Et(ae)):ne.push.apply(ne,Et(ae))}),c.errors=ne,c.warnings=te,c.triggerMetaEvent(),c.reRender()}}),K.abrupt("return",$);case 13:case"end":return K.stop()}},P)})));return I||(c.validatePromise=N,c.dirty=!0,c.errors=ic,c.warnings=ic,c.triggerMetaEvent(),c.reRender()),N}),be(or(c),"isFieldValidating",function(){return!!c.validatePromise}),be(or(c),"isFieldTouched",function(){return c.touched}),be(or(c),"isFieldDirty",function(){if(c.dirty||c.props.initialValue!==void 0)return!0;var g=c.props.fieldContext,_=g.getInternalHooks(Ph),C=_.getInitialValue;return C(c.getNamePath())!==void 0}),be(or(c),"getErrors",function(){return c.errors}),be(or(c),"getWarnings",function(){return c.warnings}),be(or(c),"isListField",function(){return c.props.isListField}),be(or(c),"isList",function(){return c.props.isList}),be(or(c),"isPreserve",function(){return c.props.preserve}),be(or(c),"getMeta",function(){c.prevValidating=c.isFieldValidating();var g={touched:c.isFieldTouched(),validating:c.prevValidating,errors:c.errors,warnings:c.warnings,name:c.getNamePath(),validated:c.validatePromise===null};return g}),be(or(c),"getOnlyChild",function(g){if(typeof g=="function"){var _=c.getMeta();return _e(_e({},c.getOnlyChild(g(c.getControlled(),_,c.props.fieldContext))),{},{isFunction:!0})}var C=Qc(g);return C.length!==1||!y.isValidElement(C[0])?{child:C,isFunction:!1}:{child:C[0],isFunction:!1}}),be(or(c),"getValue",function(g){var _=c.props.fieldContext.getFieldsValue,C=c.getNamePath();return uc(g||_(!0),C)}),be(or(c),"getControlled",function(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},_=c.props,C=_.name,b=_.trigger,T=_.validateTrigger,A=_.getValueFromEvent,I=_.normalize,N=_.valuePropName,P=_.getValueProps,D=_.fieldContext,x=T!==void 0?T:D.validateTrigger,L=c.getNamePath(),M=D.getInternalHooks,F=D.getFieldsValue,V=M(Ph),$=V.dispatch,z=c.getValue(),K=P||function(ce){return be({},N,ce)},G=g[b],J=C!==void 0?K(z):{},ne=_e(_e({},g),J);ne[b]=function(){c.touched=!0,c.dirty=!0,c.triggerMetaEvent();for(var ce,ge=arguments.length,oe=new Array(ge),ae=0;ae<ge;ae++)oe[ae]=arguments[ae];A?ce=A.apply(void 0,oe):ce=nwe.apply(void 0,[N].concat(oe)),I&&(ce=I(ce,z,F(!0))),ce!==z&&$({type:"updateValue",namePath:L,value:ce}),G&&G.apply(void 0,oe)};var te=$P(x||[]);return te.forEach(function(ce){var ge=ne[ce];ne[ce]=function(){ge&&ge.apply(void 0,arguments);var oe=c.props.rules;oe&&oe.length&&$({type:"validateField",namePath:L,triggerName:ce})}}),ne}),s.fieldContext){var d=s.fieldContext.getInternalHooks,f=d(Ph),v=f.initEntityValue;v(or(c))}return c}return oo(o,[{key:"componentDidMount",value:function(){var c=this.props,d=c.shouldUpdate,f=c.fieldContext;if(this.mounted=!0,f){var v=f.getInternalHooks,g=v(Ph),_=g.registerField;this.cancelRegisterFunc=_(this)}d===!0&&this.reRender()}},{key:"componentWillUnmount",value:function(){this.cancelRegister(),this.triggerMetaEvent(!0),this.mounted=!1}},{key:"reRender",value:function(){this.mounted&&this.forceUpdate()}},{key:"render",value:function(){var c=this.state.resetCount,d=this.props.children,f=this.getOnlyChild(d),v=f.child,g=f.isFunction,_;return g?_=v:y.isValidElement(v)?_=y.cloneElement(v,this.getControlled(v.props)):(_a(!v,"`children` of Field is not validate ReactElement."),_=v),y.createElement(y.Fragment,{key:c},_)}}]),o}(y.Component);be($2,"contextType",Gh);be($2,"defaultProps",{trigger:"onChange",valuePropName:"value"});function H2(t){var r,o=t.name,s=xn(t,rwe),c=y.useContext(Gh),d=y.useContext(Lv),f=o!==void 0?to(o):void 0,v=(r=s.isListField)!==null&&r!==void 0?r:!!d,g="keep";return v||(g="_".concat((f||[]).join("_"))),y.createElement($2,nt({key:g,name:f,isListField:v},s,{fieldContext:c}))}function gJ(t){var r=t.name,o=t.initialValue,s=t.children,c=t.rules,d=t.validateTrigger,f=t.isListField,v=y.useContext(Gh),g=y.useContext(Lv),_=y.useRef({keys:[],id:0}),C=_.current,b=y.useMemo(function(){var N=to(v.prefixName)||[];return[].concat(Et(N),Et(to(r)))},[v.prefixName,r]),T=y.useMemo(function(){return _e(_e({},v),{},{prefixName:b})},[v,b]),A=y.useMemo(function(){return{getKey:function(P){var D=b.length,x=P[D];return[C.keys[x],P.slice(D+1)]}}},[b]);if(typeof s!="function")return _a(!1,"Form.List only accepts function as children."),null;var I=function(P,D,x){var L=x.source;return L==="internal"?!1:P!==D};return y.createElement(Lv.Provider,{value:A},y.createElement(Gh.Provider,{value:T},y.createElement(H2,{name:[],shouldUpdate:I,rules:c,validateTrigger:d,initialValue:o,isList:!0,isListField:f??!!g},function(N,P){var D=N.value,x=D===void 0?[]:D,L=N.onChange,M=v.getFieldValue,F=function(){var K=M(b||[]);return K||[]},V={add:function(K,G){var J=F();G>=0&&G<=J.length?(C.keys=[].concat(Et(C.keys.slice(0,G)),[C.id],Et(C.keys.slice(G))),L([].concat(Et(J.slice(0,G)),[K],Et(J.slice(G))))):(C.keys=[].concat(Et(C.keys),[C.id]),L([].concat(Et(J),[K]))),C.id+=1},remove:function(K){var G=F(),J=new Set(Array.isArray(K)?K:[K]);J.size<=0||(C.keys=C.keys.filter(function(ne,te){return!J.has(te)}),L(G.filter(function(ne,te){return!J.has(te)})))},move:function(K,G){if(K!==G){var J=F();K<0||K>=J.length||G<0||G>=J.length||(C.keys=uz(C.keys,K,G),L(uz(J,K,G)))}}},$=x||[];return Array.isArray($)||($=[]),s($.map(function(z,K){var G=C.keys[K];return G===void 0&&(C.keys[K]=C.id,G=C.keys[K],C.id+=1),{name:K,key:G,isListField:!0}}),V,P)})))}function iwe(t){var r=!1,o=t.length,s=[];return t.length?new Promise(function(c,d){t.forEach(function(f,v){f.catch(function(g){return r=!0,g}).then(function(g){o-=1,s[v]=g,!(o>0)&&(r&&d(s),c(s))})})}):Promise.resolve([])}var vJ="__@field_split__";function XO(t){return t.map(function(r){return"".concat(ln(r),":").concat(r)}).join(vJ)}var xp=function(){function t(){io(this,t),be(this,"kvs",new Map)}return oo(t,[{key:"set",value:function(o,s){this.kvs.set(XO(o),s)}},{key:"get",value:function(o){return this.kvs.get(XO(o))}},{key:"update",value:function(o,s){var c=this.get(o),d=s(c);d?this.set(o,d):this.delete(o)}},{key:"delete",value:function(o){this.kvs.delete(XO(o))}},{key:"map",value:function(o){return Et(this.kvs.entries()).map(function(s){var c=Ue(s,2),d=c[0],f=c[1],v=d.split(vJ);return o({key:v.map(function(g){var _=g.match(/^([^:]*):(.*)$/),C=Ue(_,3),b=C[1],T=C[2];return b==="number"?Number(T):T}),value:f})})}},{key:"toJSON",value:function(){var o={};return this.map(function(s){var c=s.key,d=s.value;return o[c.join(".")]=d,null}),o}}]),t}(),owe=["name"],awe=oo(function t(r){var o=this;io(this,t),be(this,"formHooked",!1),be(this,"forceRootUpdate",void 0),be(this,"subscribable",!0),be(this,"store",{}),be(this,"fieldEntities",[]),be(this,"initialValues",{}),be(this,"callbacks",{}),be(this,"validateMessages",null),be(this,"preserve",null),be(this,"lastValidatePromise",null),be(this,"getForm",function(){return{getFieldValue:o.getFieldValue,getFieldsValue:o.getFieldsValue,getFieldError:o.getFieldError,getFieldWarning:o.getFieldWarning,getFieldsError:o.getFieldsError,isFieldsTouched:o.isFieldsTouched,isFieldTouched:o.isFieldTouched,isFieldValidating:o.isFieldValidating,isFieldsValidating:o.isFieldsValidating,resetFields:o.resetFields,setFields:o.setFields,setFieldValue:o.setFieldValue,setFieldsValue:o.setFieldsValue,validateFields:o.validateFields,submit:o.submit,_init:!0,getInternalHooks:o.getInternalHooks}}),be(this,"getInternalHooks",function(s){return s===Ph?(o.formHooked=!0,{dispatch:o.dispatch,initEntityValue:o.initEntityValue,registerField:o.registerField,useSubscribe:o.useSubscribe,setInitialValues:o.setInitialValues,destroyForm:o.destroyForm,setCallbacks:o.setCallbacks,setValidateMessages:o.setValidateMessages,getFields:o.getFields,setPreserve:o.setPreserve,getInitialValue:o.getInitialValue,registerWatch:o.registerWatch}):(_a(!1,"`getInternalHooks` is internal usage. Should not call directly."),null)}),be(this,"useSubscribe",function(s){o.subscribable=s}),be(this,"prevWithoutPreserves",null),be(this,"setInitialValues",function(s,c){if(o.initialValues=s||{},c){var d,f=qp(s,o.store);(d=o.prevWithoutPreserves)===null||d===void 0||d.map(function(v){var g=v.key;f=ac(f,g,uc(s,g))}),o.prevWithoutPreserves=null,o.updateStore(f)}}),be(this,"destroyForm",function(s){if(s)o.updateStore({});else{var c=new xp;o.getFieldEntities(!0).forEach(function(d){o.isMergedPreserve(d.isPreserve())||c.set(d.getNamePath(),!0)}),o.prevWithoutPreserves=c}}),be(this,"getInitialValue",function(s){var c=uc(o.initialValues,s);return s.length?qp(c):c}),be(this,"setCallbacks",function(s){o.callbacks=s}),be(this,"setValidateMessages",function(s){o.validateMessages=s}),be(this,"setPreserve",function(s){o.preserve=s}),be(this,"watchList",[]),be(this,"registerWatch",function(s){return o.watchList.push(s),function(){o.watchList=o.watchList.filter(function(c){return c!==s})}}),be(this,"notifyWatch",function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];if(o.watchList.length){var c=o.getFieldsValue(),d=o.getFieldsValue(!0);o.watchList.forEach(function(f){f(c,d,s)})}}),be(this,"timeoutId",null),be(this,"warningUnhooked",function(){}),be(this,"updateStore",function(s){o.store=s}),be(this,"getFieldEntities",function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return s?o.fieldEntities.filter(function(c){return c.getNamePath().length}):o.fieldEntities}),be(this,"getFieldsMap",function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,c=new xp;return o.getFieldEntities(s).forEach(function(d){var f=d.getNamePath();c.set(f,d)}),c}),be(this,"getFieldEntitiesForNamePathList",function(s){if(!s)return o.getFieldEntities(!0);var c=o.getFieldsMap(!0);return s.map(function(d){var f=to(d);return c.get(f)||{INVALIDATE_NAME_PATH:to(d)}})}),be(this,"getFieldsValue",function(s,c){o.warningUnhooked();var d,f,v;if(s===!0||Array.isArray(s)?(d=s,f=c):s&&ln(s)==="object"&&(v=s.strict,f=s.filter),d===!0&&!f)return o.store;var g=o.getFieldEntitiesForNamePathList(Array.isArray(d)?d:null),_=[];return g.forEach(function(C){var b,T,A="INVALIDATE_NAME_PATH"in C?C.INVALIDATE_NAME_PATH:C.getNamePath();if(v){var I,N;if((I=(N=C).isList)!==null&&I!==void 0&&I.call(N))return}else if(!d&&(b=(T=C).isListField)!==null&&b!==void 0&&b.call(T))return;if(!f)_.push(A);else{var P="getMeta"in C?C.getMeta():null;f(P)&&_.push(A)}}),lz(o.store,_.map(to))}),be(this,"getFieldValue",function(s){o.warningUnhooked();var c=to(s);return uc(o.store,c)}),be(this,"getFieldsError",function(s){o.warningUnhooked();var c=o.getFieldEntitiesForNamePathList(s);return c.map(function(d,f){return d&&!("INVALIDATE_NAME_PATH"in d)?{name:d.getNamePath(),errors:d.getErrors(),warnings:d.getWarnings()}:{name:to(s[f]),errors:[],warnings:[]}})}),be(this,"getFieldError",function(s){o.warningUnhooked();var c=to(s),d=o.getFieldsError([c])[0];return d.errors}),be(this,"getFieldWarning",function(s){o.warningUnhooked();var c=to(s),d=o.getFieldsError([c])[0];return d.warnings}),be(this,"isFieldsTouched",function(){o.warningUnhooked();for(var s=arguments.length,c=new Array(s),d=0;d<s;d++)c[d]=arguments[d];var f=c[0],v=c[1],g,_=!1;c.length===0?g=null:c.length===1?Array.isArray(f)?(g=f.map(to),_=!1):(g=null,_=f):(g=f.map(to),_=v);var C=o.getFieldEntities(!0),b=function(P){return P.isFieldTouched()};if(!g)return _?C.every(function(N){return b(N)||N.isList()}):C.some(b);var T=new xp;g.forEach(function(N){T.set(N,[])}),C.forEach(function(N){var P=N.getNamePath();g.forEach(function(D){D.every(function(x,L){return P[L]===x})&&T.update(D,function(x){return[].concat(Et(x),[N])})})});var A=function(P){return P.some(b)},I=T.map(function(N){var P=N.value;return P});return _?I.every(A):I.some(A)}),be(this,"isFieldTouched",function(s){return o.warningUnhooked(),o.isFieldsTouched([s])}),be(this,"isFieldsValidating",function(s){o.warningUnhooked();var c=o.getFieldEntities();if(!s)return c.some(function(f){return f.isFieldValidating()});var d=s.map(to);return c.some(function(f){var v=f.getNamePath();return om(d,v)&&f.isFieldValidating()})}),be(this,"isFieldValidating",function(s){return o.warningUnhooked(),o.isFieldsValidating([s])}),be(this,"resetWithFieldInitialValue",function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=new xp,d=o.getFieldEntities(!0);d.forEach(function(g){var _=g.props.initialValue,C=g.getNamePath();if(_!==void 0){var b=c.get(C)||new Set;b.add({entity:g,value:_}),c.set(C,b)}});var f=function(_){_.forEach(function(C){var b=C.props.initialValue;if(b!==void 0){var T=C.getNamePath(),A=o.getInitialValue(T);if(A!==void 0)_a(!1,"Form already set 'initialValues' with path '".concat(T.join("."),"'. Field can not overwrite it."));else{var I=c.get(T);if(I&&I.size>1)_a(!1,"Multiple Field with path '".concat(T.join("."),"' set 'initialValue'. Can not decide which one to pick."));else if(I){var N=o.getFieldValue(T),P=C.isListField();!P&&(!s.skipExist||N===void 0)&&o.updateStore(ac(o.store,T,Et(I)[0].value))}}}})},v;s.entities?v=s.entities:s.namePathList?(v=[],s.namePathList.forEach(function(g){var _=c.get(g);if(_){var C;(C=v).push.apply(C,Et(Et(_).map(function(b){return b.entity})))}})):v=d,f(v)}),be(this,"resetFields",function(s){o.warningUnhooked();var c=o.store;if(!s){o.updateStore(qp(o.initialValues)),o.resetWithFieldInitialValue(),o.notifyObservers(c,null,{type:"reset"}),o.notifyWatch();return}var d=s.map(to);d.forEach(function(f){var v=o.getInitialValue(f);o.updateStore(ac(o.store,f,v))}),o.resetWithFieldInitialValue({namePathList:d}),o.notifyObservers(c,d,{type:"reset"}),o.notifyWatch(d)}),be(this,"setFields",function(s){o.warningUnhooked();var c=o.store,d=[];s.forEach(function(f){var v=f.name,g=xn(f,owe),_=to(v);d.push(_),"value"in g&&o.updateStore(ac(o.store,_,g.value)),o.notifyObservers(c,[_],{type:"setField",data:f})}),o.notifyWatch(d)}),be(this,"getFields",function(){var s=o.getFieldEntities(!0),c=s.map(function(d){var f=d.getNamePath(),v=d.getMeta(),g=_e(_e({},v),{},{name:f,value:o.getFieldValue(f)});return Object.defineProperty(g,"originRCField",{value:!0}),g});return c}),be(this,"initEntityValue",function(s){var c=s.props.initialValue;if(c!==void 0){var d=s.getNamePath(),f=uc(o.store,d);f===void 0&&o.updateStore(ac(o.store,d,c))}}),be(this,"isMergedPreserve",function(s){var c=s!==void 0?s:o.preserve;return c??!0}),be(this,"registerField",function(s){o.fieldEntities.push(s);var c=s.getNamePath();if(o.notifyWatch([c]),s.props.initialValue!==void 0){var d=o.store;o.resetWithFieldInitialValue({entities:[s],skipExist:!0}),o.notifyObservers(d,[s.getNamePath()],{type:"valueUpdate",source:"internal"})}return function(f,v){var g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(o.fieldEntities=o.fieldEntities.filter(function(b){return b!==s}),!o.isMergedPreserve(v)&&(!f||g.length>1)){var _=f?void 0:o.getInitialValue(c);if(c.length&&o.getFieldValue(c)!==_&&o.fieldEntities.every(function(b){return!mJ(b.getNamePath(),c)})){var C=o.store;o.updateStore(ac(C,c,_,!0)),o.notifyObservers(C,[c],{type:"remove"}),o.triggerDependenciesUpdate(C,c)}}o.notifyWatch([c])}}),be(this,"dispatch",function(s){switch(s.type){case"updateValue":{var c=s.namePath,d=s.value;o.updateValue(c,d);break}case"validateField":{var f=s.namePath,v=s.triggerName;o.validateFields([f],{triggerName:v});break}}}),be(this,"notifyObservers",function(s,c,d){if(o.subscribable){var f=_e(_e({},d),{},{store:o.getFieldsValue(!0)});o.getFieldEntities().forEach(function(v){var g=v.onStoreChange;g(s,c,f)})}else o.forceRootUpdate()}),be(this,"triggerDependenciesUpdate",function(s,c){var d=o.getDependencyChildrenFields(c);return d.length&&o.validateFields(d),o.notifyObservers(s,d,{type:"dependenciesUpdate",relatedFields:[c].concat(Et(d))}),d}),be(this,"updateValue",function(s,c){var d=to(s),f=o.store;o.updateStore(ac(o.store,d,c)),o.notifyObservers(f,[d],{type:"valueUpdate",source:"internal"}),o.notifyWatch([d]);var v=o.triggerDependenciesUpdate(f,d),g=o.callbacks.onValuesChange;if(g){var _=lz(o.store,[d]);g(_,o.getFieldsValue())}o.triggerOnFieldsChange([d].concat(Et(v)))}),be(this,"setFieldsValue",function(s){o.warningUnhooked();var c=o.store;if(s){var d=qp(o.store,s);o.updateStore(d)}o.notifyObservers(c,null,{type:"valueUpdate",source:"external"}),o.notifyWatch()}),be(this,"setFieldValue",function(s,c){o.setFields([{name:s,value:c,errors:[],warnings:[]}])}),be(this,"getDependencyChildrenFields",function(s){var c=new Set,d=[],f=new xp;o.getFieldEntities().forEach(function(g){var _=g.props.dependencies;(_||[]).forEach(function(C){var b=to(C);f.update(b,function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Set;return T.add(g),T})})});var v=function g(_){var C=f.get(_)||new Set;C.forEach(function(b){if(!c.has(b)){c.add(b);var T=b.getNamePath();b.isFieldDirty()&&T.length&&(d.push(T),g(T))}})};return v(s),d}),be(this,"triggerOnFieldsChange",function(s,c){var d=o.callbacks.onFieldsChange;if(d){var f=o.getFields();if(c){var v=new xp;c.forEach(function(_){var C=_.name,b=_.errors;v.set(C,b)}),f.forEach(function(_){_.errors=v.get(_.name)||_.errors})}var g=f.filter(function(_){var C=_.name;return om(s,C)});g.length&&d(g,f)}}),be(this,"validateFields",function(s,c){o.warningUnhooked();var d,f;Array.isArray(s)||typeof s=="string"||typeof c=="string"?(d=s,f=c):f=s;var v=!!d,g=v?d.map(to):[],_=[],C=String(Date.now()),b=new Set,T=f||{},A=T.recursive,I=T.dirty;o.getFieldEntities(!0).forEach(function(x){if(v||g.push(x.getNamePath()),!(!x.props.rules||!x.props.rules.length)&&!(I&&!x.isFieldDirty())){var L=x.getNamePath();if(b.add(L.join(C)),!v||om(g,L,A)){var M=x.validateRules(_e({validateMessages:_e(_e({},pJ),o.validateMessages)},f));_.push(M.then(function(){return{name:L,errors:[],warnings:[]}}).catch(function(F){var V,$=[],z=[];return(V=F.forEach)===null||V===void 0||V.call(F,function(K){var G=K.rule.warningOnly,J=K.errors;G?z.push.apply(z,Et(J)):$.push.apply($,Et(J))}),$.length?Promise.reject({name:L,errors:$,warnings:z}):{name:L,errors:$,warnings:z}}))}}});var N=iwe(_);o.lastValidatePromise=N,N.catch(function(x){return x}).then(function(x){var L=x.map(function(M){var F=M.name;return F});o.notifyObservers(o.store,L,{type:"validateFinish"}),o.triggerOnFieldsChange(L,x)});var P=N.then(function(){return o.lastValidatePromise===N?Promise.resolve(o.getFieldsValue(g)):Promise.reject([])}).catch(function(x){var L=x.filter(function(M){return M&&M.errors.length});return Promise.reject({values:o.getFieldsValue(g),errorFields:L,outOfDate:o.lastValidatePromise!==N})});P.catch(function(x){return x});var D=g.filter(function(x){return b.has(x.join(C))});return o.triggerOnFieldsChange(D),P}),be(this,"submit",function(){o.warningUnhooked(),o.validateFields().then(function(s){var c=o.callbacks.onFinish;if(c)try{c(s)}catch(d){console.error(d)}}).catch(function(s){var c=o.callbacks.onFinishFailed;c&&c(s)})}),this.forceRootUpdate=r});function z2(t){var r=y.useRef(),o=y.useState({}),s=Ue(o,2),c=s[1];if(!r.current)if(t)r.current=t;else{var d=function(){c({})},f=new awe(d);r.current=f.getForm()}return[r.current]}var JP=y.createContext({triggerFormChange:function(){},triggerFormFinish:function(){},registerForm:function(){},unregisterForm:function(){}}),EJ=function(r){var o=r.validateMessages,s=r.onFormChange,c=r.onFormFinish,d=r.children,f=y.useContext(JP),v=y.useRef({});return y.createElement(JP.Provider,{value:_e(_e({},f),{},{validateMessages:_e(_e({},f.validateMessages),o),triggerFormChange:function(_,C){s&&s(_,{changedFields:C,forms:v.current}),f.triggerFormChange(_,C)},triggerFormFinish:function(_,C){c&&c(_,{values:C,forms:v.current}),f.triggerFormFinish(_,C)},registerForm:function(_,C){_&&(v.current=_e(_e({},v.current),{},be({},_,C))),f.registerForm(_,C)},unregisterForm:function(_){var C=_e({},v.current);delete C[_],v.current=C,f.unregisterForm(_)}})},d)},swe=["name","initialValues","fields","form","preserve","children","component","validateMessages","validateTrigger","onValuesChange","onFieldsChange","onFinish","onFinishFailed","clearOnDestroy"],cwe=function(r,o){var s=r.name,c=r.initialValues,d=r.fields,f=r.form,v=r.preserve,g=r.children,_=r.component,C=_===void 0?"form":_,b=r.validateMessages,T=r.validateTrigger,A=T===void 0?"onChange":T,I=r.onValuesChange,N=r.onFieldsChange,P=r.onFinish,D=r.onFinishFailed,x=r.clearOnDestroy,L=xn(r,swe),M=y.useRef(null),F=y.useContext(JP),V=z2(f),$=Ue(V,1),z=$[0],K=z.getInternalHooks(Ph),G=K.useSubscribe,J=K.setInitialValues,ne=K.setCallbacks,te=K.setValidateMessages,ce=K.setPreserve,ge=K.destroyForm;y.useImperativeHandle(o,function(){return _e(_e({},z),{},{nativeElement:M.current})}),y.useEffect(function(){return F.registerForm(s,z),function(){F.unregisterForm(s)}},[F,z,s]),te(_e(_e({},F.validateMessages),b)),ne({onValuesChange:I,onFieldsChange:function(se){if(F.triggerFormChange(s,se),N){for(var Te=arguments.length,we=new Array(Te>1?Te-1:0),Le=1;Le<Te;Le++)we[Le-1]=arguments[Le];N.apply(void 0,[se].concat(we))}},onFinish:function(se){F.triggerFormFinish(s,se),P&&P(se)},onFinishFailed:D}),ce(v);var oe=y.useRef(null);J(c,!oe.current),oe.current||(oe.current=!0),y.useEffect(function(){return function(){return ge(x)}},[]);var ae,ie=typeof g=="function";if(ie){var ve=z.getFieldsValue(!0);ae=g(ve,z)}else ae=g;G(!ie);var me=y.useRef();y.useEffect(function(){twe(me.current||[],d||[])||z.setFields(d||[]),me.current=d},[d,z]);var le=y.useMemo(function(){return _e(_e({},z),{},{validateTrigger:A})},[z,A]),de=y.createElement(Lv.Provider,{value:null},y.createElement(Gh.Provider,{value:le},ae));return C===!1?de:y.createElement(C,nt({},L,{ref:M,onSubmit:function(se){se.preventDefault(),se.stopPropagation(),z.submit()},onReset:function(se){var Te;se.preventDefault(),z.resetFields(),(Te=L.onReset)===null||Te===void 0||Te.call(L,se)}}),de)};function dz(t){try{return JSON.stringify(t)}catch{return Math.random()}}function _J(){for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];var s=r[0],c=r[1],d=c===void 0?{}:c,f=_Re(d)?{form:d}:d,v=f.form,g=y.useState(),_=Ue(g,2),C=_[0],b=_[1],T=y.useMemo(function(){return dz(C)},[C]),A=y.useRef(T);A.current=T;var I=y.useContext(Gh),N=v||I,P=N&&N._init,D=to(s),x=y.useRef(D);return x.current=D,y.useEffect(function(){if(P){var L=N.getFieldsValue,M=N.getInternalHooks,F=M(Ph),V=F.registerWatch,$=function(J,ne){var te=f.preserve?ne:J;return typeof s=="function"?s(te):uc(te,x.current)},z=V(function(G,J){var ne=$(G,J),te=dz(ne);A.current!==te&&(A.current=te,b(ne))}),K=$(L(),L(!0));return C!==K&&b(K),z}},[P]),C}var lwe=y.forwardRef(cwe),Lm=lwe;Lm.FormProvider=EJ;Lm.Field=H2;Lm.List=gJ;Lm.useForm=z2;Lm.useWatch=_J;const pu=y.createContext({labelAlign:"right",vertical:!1,itemRef:()=>{}}),SJ=y.createContext(null),yJ=t=>{const r=ia(t,["prefixCls"]);return y.createElement(EJ,Object.assign({},r))},W2=y.createContext({prefixCls:""}),As=y.createContext({}),uwe=t=>{let{children:r,status:o,override:s}=t;const c=y.useContext(As),d=y.useMemo(()=>{const f=Object.assign({},c);return s&&delete f.isFormItemInput,o&&(delete f.status,delete f.hasFeedback,delete f.feedbackIcon),f},[o,s,c]);return y.createElement(As.Provider,{value:d},r)},CJ=y.createContext(void 0),dwe=t=>{const{space:r,form:o,children:s}=t;if(s==null)return null;let c=s;return o&&(c=ze.createElement(uwe,{override:!0,status:!0},c)),r&&(c=ze.createElement(VTe,null,c)),c},QP=dwe;var bJ=function(r){if(xa()&&window.document.documentElement){var o=Array.isArray(r)?r:[r],s=window.document.documentElement;return o.some(function(c){return c in s.style})}return!1},hwe=function(r,o){if(!bJ(r))return!1;var s=document.createElement("div"),c=s.style[r];return s.style[r]=o,s.style[r]!==c};function hz(t,r){return!Array.isArray(t)&&r!==void 0?hwe(t,r):bJ(t)}const fwe=t=>{const{componentCls:r}=t;return{[r]:{display:"flex",flexFlow:"row wrap",minWidth:0,"&::before, &::after":{display:"flex"},"&-no-wrap":{flexWrap:"nowrap"},"&-start":{justifyContent:"flex-start"},"&-center":{justifyContent:"center"},"&-end":{justifyContent:"flex-end"},"&-space-between":{justifyContent:"space-between"},"&-space-around":{justifyContent:"space-around"},"&-space-evenly":{justifyContent:"space-evenly"},"&-top":{alignItems:"flex-start"},"&-middle":{alignItems:"center"},"&-bottom":{alignItems:"flex-end"}}}},pwe=t=>{const{componentCls:r}=t;return{[r]:{position:"relative",maxWidth:"100%",minHeight:1}}},mwe=(t,r)=>{const{prefixCls:o,componentCls:s,gridColumns:c}=t,d={};for(let f=c;f>=0;f--)f===0?(d[`${s}${r}-${f}`]={display:"none"},d[`${s}-push-${f}`]={insetInlineStart:"auto"},d[`${s}-pull-${f}`]={insetInlineEnd:"auto"},d[`${s}${r}-push-${f}`]={insetInlineStart:"auto"},d[`${s}${r}-pull-${f}`]={insetInlineEnd:"auto"},d[`${s}${r}-offset-${f}`]={marginInlineStart:0},d[`${s}${r}-order-${f}`]={order:0}):(d[`${s}${r}-${f}`]=[{"--ant-display":"block",display:"block"},{display:"var(--ant-display)",flex:`0 0 ${f/c*100}%`,maxWidth:`${f/c*100}%`}],d[`${s}${r}-push-${f}`]={insetInlineStart:`${f/c*100}%`},d[`${s}${r}-pull-${f}`]={insetInlineEnd:`${f/c*100}%`},d[`${s}${r}-offset-${f}`]={marginInlineStart:`${f/c*100}%`},d[`${s}${r}-order-${f}`]={order:f});return d[`${s}${r}-flex`]={flex:`var(--${o}${r}-flex)`},d},ZP=(t,r)=>mwe(t,r),gwe=(t,r,o)=>({[`@media (min-width: ${Xe(r)})`]:Object.assign({},ZP(t,o))}),vwe=()=>({}),Ewe=()=>({}),_we=Oo("Grid",fwe,vwe),Swe=t=>({xs:t.screenXSMin,sm:t.screenSMMin,md:t.screenMDMin,lg:t.screenLGMin,xl:t.screenXLMin,xxl:t.screenXXLMin}),ywe=Oo("Grid",t=>{const r=oi(t,{gridColumns:24}),o=Swe(r);return delete o.xs,[pwe(r),ZP(r,""),ZP(r,"-xs"),Object.keys(o).map(s=>gwe(r,o[s],`-${s}`)).reduce((s,c)=>Object.assign(Object.assign({},s),c),{})]},Ewe),Cwe=t=>{const{componentCls:r,notificationMarginEdge:o,animationMaxHeight:s}=t,c=`${r}-notice`,d=new _r("antNotificationFadeIn",{"0%":{transform:"translate3d(100%, 0, 0)",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",opacity:1}}),f=new _r("antNotificationTopFadeIn",{"0%":{top:-s,opacity:0},"100%":{top:0,opacity:1}}),v=new _r("antNotificationBottomFadeIn",{"0%":{bottom:t.calc(s).mul(-1).equal(),opacity:0},"100%":{bottom:0,opacity:1}}),g=new _r("antNotificationLeftFadeIn",{"0%":{transform:"translate3d(-100%, 0, 0)",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",opacity:1}});return{[r]:{[`&${r}-top, &${r}-bottom`]:{marginInline:0,[c]:{marginInline:"auto auto"}},[`&${r}-top`]:{[`${r}-fade-enter${r}-fade-enter-active, ${r}-fade-appear${r}-fade-appear-active`]:{animationName:f}},[`&${r}-bottom`]:{[`${r}-fade-enter${r}-fade-enter-active, ${r}-fade-appear${r}-fade-appear-active`]:{animationName:v}},[`&${r}-topRight, &${r}-bottomRight`]:{[`${r}-fade-enter${r}-fade-enter-active, ${r}-fade-appear${r}-fade-appear-active`]:{animationName:d}},[`&${r}-topLeft, &${r}-bottomLeft`]:{marginRight:{value:0,_skip_check_:!0},marginLeft:{value:o,_skip_check_:!0},[c]:{marginInlineEnd:"auto",marginInlineStart:0},[`${r}-fade-enter${r}-fade-enter-active, ${r}-fade-appear${r}-fade-appear-active`]:{animationName:g}}}}},bwe=Cwe,Twe=["top","topLeft","topRight","bottom","bottomLeft","bottomRight"],Rwe={topLeft:"left",topRight:"right",bottomLeft:"left",bottomRight:"right",top:"left",bottom:"left"},wwe=(t,r)=>{const{componentCls:o}=t;return{[`${o}-${r}`]:{[`&${o}-stack > ${o}-notice-wrapper`]:{[r.startsWith("top")?"top":"bottom"]:0,[Rwe[r]]:{value:0,_skip_check_:!0}}}}},Iwe=t=>{const r={};for(let o=1;o<t.notificationStackLayer;o++)r[`&:nth-last-child(${o+1})`]={overflow:"hidden",[`& > ${t.componentCls}-notice`]:{opacity:0,transition:`opacity ${t.motionDurationMid}`}};return Object.assign({[`&:not(:nth-last-child(-n+${t.notificationStackLayer}))`]:{opacity:0,overflow:"hidden",color:"transparent",pointerEvents:"none"}},r)},Awe=t=>{const r={};for(let o=1;o<t.notificationStackLayer;o++)r[`&:nth-last-child(${o+1})`]={background:t.colorBgBlur,backdropFilter:"blur(10px)","-webkit-backdrop-filter":"blur(10px)"};return Object.assign({},r)},Owe=t=>{const{componentCls:r}=t;return Object.assign({[`${r}-stack`]:{[`& > ${r}-notice-wrapper`]:Object.assign({transition:`transform ${t.motionDurationSlow}, backdrop-filter 0s`,willChange:"transform, opacity",position:"absolute"},Iwe(t))},[`${r}-stack:not(${r}-stack-expanded)`]:{[`& > ${r}-notice-wrapper`]:Object.assign({},Awe(t))},[`${r}-stack${r}-stack-expanded`]:{[`& > ${r}-notice-wrapper`]:{"&:not(:nth-last-child(-n + 1))":{opacity:1,overflow:"unset",color:"inherit",pointerEvents:"auto",[`& > ${t.componentCls}-notice`]:{opacity:1}},"&:after":{content:'""',position:"absolute",height:t.margin,width:"100%",insetInline:0,bottom:t.calc(t.margin).mul(-1).equal(),background:"transparent",pointerEvents:"auto"}}}},Twe.map(o=>wwe(t,o)).reduce((o,s)=>Object.assign(Object.assign({},o),s),{}))},xwe=Owe,TJ=t=>{const{iconCls:r,componentCls:o,boxShadow:s,fontSizeLG:c,notificationMarginBottom:d,borderRadiusLG:f,colorSuccess:v,colorInfo:g,colorWarning:_,colorError:C,colorTextHeading:b,notificationBg:T,notificationPadding:A,notificationMarginEdge:I,notificationProgressBg:N,notificationProgressHeight:P,fontSize:D,lineHeight:x,width:L,notificationIconSize:M,colorText:F}=t,V=`${o}-notice`;return{position:"relative",marginBottom:d,marginInlineStart:"auto",background:T,borderRadius:f,boxShadow:s,[V]:{padding:A,width:L,maxWidth:`calc(100vw - ${Xe(t.calc(I).mul(2).equal())})`,overflow:"hidden",lineHeight:x,wordWrap:"break-word"},[`${V}-message`]:{marginBottom:t.marginXS,color:b,fontSize:c,lineHeight:t.lineHeightLG},[`${V}-description`]:{fontSize:D,color:F},[`${V}-closable ${V}-message`]:{paddingInlineEnd:t.paddingLG},[`${V}-with-icon ${V}-message`]:{marginBottom:t.marginXS,marginInlineStart:t.calc(t.marginSM).add(M).equal(),fontSize:c},[`${V}-with-icon ${V}-description`]:{marginInlineStart:t.calc(t.marginSM).add(M).equal(),fontSize:D},[`${V}-icon`]:{position:"absolute",fontSize:M,lineHeight:1,[`&-success${r}`]:{color:v},[`&-info${r}`]:{color:g},[`&-warning${r}`]:{color:_},[`&-error${r}`]:{color:C}},[`${V}-close`]:Object.assign({position:"absolute",top:t.notificationPaddingVertical,insetInlineEnd:t.notificationPaddingHorizontal,color:t.colorIcon,outline:"none",width:t.notificationCloseButtonSize,height:t.notificationCloseButtonSize,borderRadius:t.borderRadiusSM,transition:`background-color ${t.motionDurationMid}, color ${t.motionDurationMid}`,display:"flex",alignItems:"center",justifyContent:"center","&:hover":{color:t.colorIconHover,backgroundColor:t.colorBgTextHover},"&:active":{backgroundColor:t.colorBgTextActive}},lT(t)),[`${V}-progress`]:{position:"absolute",display:"block",appearance:"none",WebkitAppearance:"none",inlineSize:`calc(100% - ${Xe(f)} * 2)`,left:{_skip_check_:!0,value:f},right:{_skip_check_:!0,value:f},bottom:0,blockSize:P,border:0,"&, &::-webkit-progress-bar":{borderRadius:f,backgroundColor:"rgba(0, 0, 0, 0.04)"},"&::-moz-progress-bar":{background:N},"&::-webkit-progress-value":{borderRadius:f,background:N}},[`${V}-actions`]:{float:"right",marginTop:t.marginSM}}},Nwe=t=>{const{componentCls:r,notificationMarginBottom:o,notificationMarginEdge:s,motionDurationMid:c,motionEaseInOut:d}=t,f=`${r}-notice`,v=new _r("antNotificationFadeOut",{"0%":{maxHeight:t.animationMaxHeight,marginBottom:o},"100%":{maxHeight:0,marginBottom:0,paddingTop:0,paddingBottom:0,opacity:0}});return[{[r]:Object.assign(Object.assign({},Ps(t)),{position:"fixed",zIndex:t.zIndexPopup,marginRight:{value:s,_skip_check_:!0},[`${r}-hook-holder`]:{position:"relative"},[`${r}-fade-appear-prepare`]:{opacity:"0 !important"},[`${r}-fade-enter, ${r}-fade-appear`]:{animationDuration:t.motionDurationMid,animationTimingFunction:d,animationFillMode:"both",opacity:0,animationPlayState:"paused"},[`${r}-fade-leave`]:{animationTimingFunction:d,animationFillMode:"both",animationDuration:c,animationPlayState:"paused"},[`${r}-fade-enter${r}-fade-enter-active, ${r}-fade-appear${r}-fade-appear-active`]:{animationPlayState:"running"},[`${r}-fade-leave${r}-fade-leave-active`]:{animationName:v,animationPlayState:"running"},"&-rtl":{direction:"rtl",[`${f}-actions`]:{float:"left"}}})},{[r]:{[`${f}-wrapper`]:Object.assign({},TJ(t))}}]},RJ=t=>({zIndexPopup:t.zIndexPopupBase+fTe+50,width:384}),wJ=t=>{const r=t.paddingMD,o=t.paddingLG;return oi(t,{notificationBg:t.colorBgElevated,notificationPaddingVertical:r,notificationPaddingHorizontal:o,notificationIconSize:t.calc(t.fontSizeLG).mul(t.lineHeightLG).equal(),notificationCloseButtonSize:t.calc(t.controlHeightLG).mul(.55).equal(),notificationMarginBottom:t.margin,notificationPadding:`${Xe(t.paddingMD)} ${Xe(t.paddingContentHorizontalLG)}`,notificationMarginEdge:t.marginLG,animationMaxHeight:150,notificationStackLayer:3,notificationProgressHeight:2,notificationProgressBg:`linear-gradient(90deg, ${t.colorPrimaryBorderHover}, ${t.colorPrimary})`})},IJ=Oo("Notification",t=>{const r=wJ(t);return[Nwe(r),bwe(r),xwe(r)]},RJ),Pwe=uT(["Notification","PurePanel"],t=>{const r=`${t.componentCls}-notice`,o=wJ(t);return{[`${r}-pure-panel`]:Object.assign(Object.assign({},TJ(o)),{width:o.width,maxWidth:`calc(100vw - ${Xe(t.calc(o.notificationMarginEdge).mul(2).equal())})`,margin:0})}},RJ);var Dwe=globalThis&&globalThis.__rest||function(t,r){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&r.indexOf(s)<0&&(o[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(t);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(t,s[c])&&(o[s[c]]=t[s[c]]);return o};function G2(t,r){return r===null||r===!1?null:r||y.createElement(HX,{className:`${t}-close-icon`})}const Lwe={success:$X,info:jbe,error:fT,warning:zX},AJ=t=>{const{prefixCls:r,icon:o,type:s,message:c,description:d,actions:f,role:v="alert"}=t;let g=null;return o?g=y.createElement("span",{className:`${r}-icon`},o):s&&(g=y.createElement(Lwe[s]||null,{className:Ke(`${r}-icon`,`${r}-icon-${s}`)})),y.createElement("div",{className:Ke({[`${r}-with-icon`]:g}),role:v},g,y.createElement("div",{className:`${r}-message`},c),y.createElement("div",{className:`${r}-description`},d),f&&y.createElement("div",{className:`${r}-actions`},f))},kwe=t=>{const{prefixCls:r,className:o,icon:s,type:c,message:d,description:f,btn:v,actions:g,closable:_=!0,closeIcon:C,className:b}=t,T=Dwe(t,["prefixCls","className","icon","type","message","description","btn","actions","closable","closeIcon","className"]),{getPrefixCls:A}=y.useContext(wr),I=g??v,N=r||A("notification"),P=`${N}-notice`,D=_u(N),[x,L,M]=IJ(N,D);return x(y.createElement("div",{className:Ke(`${P}-pure-panel`,L,o,M,D)},y.createElement(Pwe,{prefixCls:N}),y.createElement(GX,Object.assign({},T,{prefixCls:N,eventKey:"pure",duration:null,closable:_,className:Ke({notificationClassName:b}),closeIcon:G2(N,C),content:y.createElement(AJ,{prefixCls:P,icon:s,type:c,message:d,description:f,actions:I})}))))},Mwe=kwe;function Fwe(t,r,o){let s;switch(t){case"top":s={left:"50%",transform:"translateX(-50%)",right:"auto",top:r,bottom:"auto"};break;case"topLeft":s={left:0,top:r,bottom:"auto"};break;case"topRight":s={right:0,top:r,bottom:"auto"};break;case"bottom":s={left:"50%",transform:"translateX(-50%)",right:"auto",top:"auto",bottom:o};break;case"bottomLeft":s={left:0,top:"auto",bottom:o};break;default:s={right:0,top:"auto",bottom:o};break}return s}function Uwe(t){return{motionName:`${t}-fade`}}function Bwe(t,r,o){return typeof t<"u"?t:typeof(r==null?void 0:r.closeIcon)<"u"?r.closeIcon:o==null?void 0:o.closeIcon}var Vwe=globalThis&&globalThis.__rest||function(t,r){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&r.indexOf(s)<0&&(o[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(t);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(t,s[c])&&(o[s[c]]=t[s[c]]);return o};const fz=24,jwe=4.5,$we="topRight",Hwe=t=>{let{children:r,prefixCls:o}=t;const s=_u(o),[c,d,f]=IJ(o,s);return c(ze.createElement(Qbe,{classNames:{list:Ke(d,f,s)}},r))},zwe=(t,r)=>{let{prefixCls:o,key:s}=r;return ze.createElement(Hwe,{prefixCls:o,key:s},t)},Wwe=ze.forwardRef((t,r)=>{const{top:o,bottom:s,prefixCls:c,getContainer:d,maxCount:f,rtl:v,onAllRemoved:g,stack:_,duration:C,pauseOnHover:b=!0,showProgress:T}=t,{getPrefixCls:A,getPopupContainer:I,notification:N,direction:P}=y.useContext(wr),[,D]=os(),x=c||A("notification"),L=z=>Fwe(z,o??fz,s??fz),M=()=>Ke({[`${x}-rtl`]:v??P==="rtl"}),F=()=>Uwe(x),[V,$]=aTe({prefixCls:x,style:L,className:M,motion:F,closable:!0,closeIcon:G2(x),duration:C??jwe,getContainer:()=>(d==null?void 0:d())||(I==null?void 0:I())||document.body,maxCount:f,pauseOnHover:b,showProgress:T,onAllRemoved:g,renderNotifications:zwe,stack:_===!1?!1:{threshold:typeof _=="object"?_==null?void 0:_.threshold:void 0,offset:8,gap:D.margin}});return ze.useImperativeHandle(r,()=>Object.assign(Object.assign({},V),{prefixCls:x,notification:N})),$});function OJ(t){const r=ze.useRef(null);return sT(),[ze.useMemo(()=>{const s=v=>{var g;if(!r.current)return;const{open:_,prefixCls:C,notification:b}=r.current,T=`${C}-notice`,{message:A,description:I,icon:N,type:P,btn:D,actions:x,className:L,style:M,role:F="alert",closeIcon:V,closable:$}=v,z=Vwe(v,["message","description","icon","type","btn","actions","className","style","role","closeIcon","closable"]),K=x??D,G=G2(T,Bwe(V,t,b));return _(Object.assign(Object.assign({placement:(g=t==null?void 0:t.placement)!==null&&g!==void 0?g:$we},z),{content:ze.createElement(AJ,{prefixCls:T,icon:N,type:P,message:A,description:I,actions:K,role:F}),className:Ke(P&&`${T}-${P}`,L,b==null?void 0:b.className),style:Object.assign(Object.assign({},b==null?void 0:b.style),M),closeIcon:G,closable:$??!!G}))},d={open:s,destroy:v=>{var g,_;v!==void 0?(g=r.current)===null||g===void 0||g.close(v):(_=r.current)===null||_===void 0||_.destroy()}};return["success","info","warning","error"].forEach(v=>{d[v]=g=>s(Object.assign(Object.assign({},g),{type:v}))}),d},[]),ze.createElement(Wwe,Object.assign({key:"notification-holder"},t,{ref:r}))]}function Gwe(t){return OJ(t)}const Kwe=ze.createContext({});function Ywe(t){return r=>y.createElement(tf,{theme:{token:{motion:!1,zIndexPopupBase:0}}},y.createElement(t,Object.assign({},r)))}const qwe=(t,r,o,s,c)=>Ywe(f=>{const{prefixCls:v,style:g}=f,_=y.useRef(null),[C,b]=y.useState(0),[T,A]=y.useState(0),[I,N]=Sa(!1,{value:f.open}),{getPrefixCls:P}=y.useContext(wr),D=P(s||"select",v);y.useEffect(()=>{if(N(!0),typeof ResizeObserver<"u"){const M=new ResizeObserver(V=>{const $=V[0].target;b($.offsetHeight+8),A($.offsetWidth)}),F=setInterval(()=>{var V;const $=c?`.${c(D)}`:`.${D}-dropdown`,z=(V=_.current)===null||V===void 0?void 0:V.querySelector($);z&&(clearInterval(F),M.observe(z))},10);return()=>{clearInterval(F),M.disconnect()}}},[]);let x=Object.assign(Object.assign({},f),{style:Object.assign(Object.assign({},g),{margin:0}),open:I,visible:I,getPopupContainer:()=>_.current});o&&(x=o(x)),r&&Object.assign(x,{[r]:{overflow:{adjustX:!1,adjustY:!1}}});const L={paddingBottom:C,position:"relative",minWidth:T};return y.createElement("div",{ref:_,style:L},y.createElement(t,Object.assign({},x)))}),Xwe=qwe,xJ=function(){if(typeof navigator>"u"||typeof window>"u")return!1;var t=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(t==null?void 0:t.substr(0,4))};var bT=function(r){var o=r.className,s=r.customizeIcon,c=r.customizeIconProps,d=r.children,f=r.onMouseDown,v=r.onClick,g=typeof s=="function"?s(c):s;return y.createElement("span",{className:o,onMouseDown:function(C){C.preventDefault(),f==null||f(C)},style:{userSelect:"none",WebkitUserSelect:"none"},unselectable:"on",onClick:v,"aria-hidden":!0},g!==void 0?g:y.createElement("span",{className:Ke(o.split(/\s+/).map(function(_){return"".concat(_,"-icon")}))},d))},Jwe=function(r,o,s,c,d){var f=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1,v=arguments.length>6?arguments[6]:void 0,g=arguments.length>7?arguments[7]:void 0,_=ze.useMemo(function(){if(ln(c)==="object")return c.clearIcon;if(d)return d},[c,d]),C=ze.useMemo(function(){return!!(!f&&c&&(s.length||v)&&!(g==="combobox"&&v===""))},[c,f,s.length,v,g]);return{allowClear:C,clearIcon:ze.createElement(bT,{className:"".concat(r,"-clear"),onMouseDown:o,customizeIcon:_},"×")}},NJ=y.createContext(null);function Qwe(){return y.useContext(NJ)}function Zwe(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:10,r=y.useState(!1),o=Ue(r,2),s=o[0],c=o[1],d=y.useRef(null),f=function(){window.clearTimeout(d.current)};y.useEffect(function(){return f},[]);var v=function(_,C){f(),d.current=window.setTimeout(function(){c(_),C&&C()},t)};return[s,v,f]}function PJ(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:250,r=y.useRef(null),o=y.useRef(null);y.useEffect(function(){return function(){window.clearTimeout(o.current)}},[]);function s(c){(c||r.current===null)&&(r.current=c),window.clearTimeout(o.current),o.current=window.setTimeout(function(){r.current=null},t)}return[function(){return r.current},s]}function eIe(t,r,o,s){var c=y.useRef(null);c.current={open:r,triggerOpen:o,customizedTrigger:s},y.useEffect(function(){function d(f){var v;if(!((v=c.current)!==null&&v!==void 0&&v.customizedTrigger)){var g=f.target;g.shadowRoot&&f.composed&&(g=f.composedPath()[0]||g),c.current.open&&t().filter(function(_){return _}).every(function(_){return!_.contains(g)&&_!==g})&&c.current.triggerOpen(!1)}}return window.addEventListener("mousedown",d),function(){return window.removeEventListener("mousedown",d)}},[])}function tIe(t){return t&&![lt.ESC,lt.SHIFT,lt.BACKSPACE,lt.TAB,lt.WIN_KEY,lt.ALT,lt.META,lt.WIN_KEY_RIGHT,lt.CTRL,lt.SEMICOLON,lt.EQUALS,lt.CAPS_LOCK,lt.CONTEXT_MENU,lt.F1,lt.F2,lt.F3,lt.F4,lt.F5,lt.F6,lt.F7,lt.F8,lt.F9,lt.F10,lt.F11,lt.F12].includes(t)}var nIe=["prefixCls","invalidate","item","renderItem","responsive","responsiveDisabled","registerSize","itemKey","className","style","children","display","order","component"],Np=void 0;function rIe(t,r){var o=t.prefixCls,s=t.invalidate,c=t.item,d=t.renderItem,f=t.responsive,v=t.responsiveDisabled,g=t.registerSize,_=t.itemKey,C=t.className,b=t.style,T=t.children,A=t.display,I=t.order,N=t.component,P=N===void 0?"div":N,D=xn(t,nIe),x=f&&!A;function L(z){g(_,z)}y.useEffect(function(){return function(){L(null)}},[]);var M=d&&c!==Np?d(c,{index:I}):T,F;s||(F={opacity:x?0:1,height:x?0:Np,overflowY:x?"hidden":Np,order:f?I:Np,pointerEvents:x?"none":Np,position:x?"absolute":Np});var V={};x&&(V["aria-hidden"]=!0);var $=y.createElement(P,nt({className:Ke(!s&&o,C),style:_e(_e({},F),b)},V,D,{ref:r}),M);return f&&($=y.createElement(Eu,{onResize:function(K){var G=K.offsetWidth;L(G)},disabled:v},$)),$}var tv=y.forwardRef(rIe);tv.displayName="Item";function iIe(t){if(typeof MessageChannel>"u")ii(t);else{var r=new MessageChannel;r.port1.onmessage=function(){return t()},r.port2.postMessage(void 0)}}function oIe(){var t=y.useRef(null),r=function(s){t.current||(t.current=[],iIe(function(){Ml.unstable_batchedUpdates(function(){t.current.forEach(function(c){c()}),t.current=null})})),t.current.push(s)};return r}function wg(t,r){var o=y.useState(r),s=Ue(o,2),c=s[0],d=s[1],f=ho(function(v){t(function(){d(v)})});return[c,f]}var ab=ze.createContext(null),aIe=["component"],sIe=["className"],cIe=["className"],lIe=function(r,o){var s=y.useContext(ab);if(!s){var c=r.component,d=c===void 0?"div":c,f=xn(r,aIe);return y.createElement(d,nt({},f,{ref:o}))}var v=s.className,g=xn(s,sIe),_=r.className,C=xn(r,cIe);return y.createElement(ab.Provider,{value:null},y.createElement(tv,nt({ref:o,className:Ke(v,_)},g,C)))},DJ=y.forwardRef(lIe);DJ.displayName="RawItem";var uIe=["prefixCls","data","renderItem","renderRawItem","itemKey","itemWidth","ssr","style","className","maxCount","renderRest","renderRawRest","suffix","component","itemComponent","onVisibleChange"],LJ="responsive",kJ="invalidate";function dIe(t){return"+ ".concat(t.length," ...")}function hIe(t,r){var o=t.prefixCls,s=o===void 0?"rc-overflow":o,c=t.data,d=c===void 0?[]:c,f=t.renderItem,v=t.renderRawItem,g=t.itemKey,_=t.itemWidth,C=_===void 0?10:_,b=t.ssr,T=t.style,A=t.className,I=t.maxCount,N=t.renderRest,P=t.renderRawRest,D=t.suffix,x=t.component,L=x===void 0?"div":x,M=t.itemComponent,F=t.onVisibleChange,V=xn(t,uIe),$=b==="full",z=oIe(),K=wg(z,null),G=Ue(K,2),J=G[0],ne=G[1],te=J||0,ce=wg(z,new Map),ge=Ue(ce,2),oe=ge[0],ae=ge[1],ie=wg(z,0),ve=Ue(ie,2),me=ve[0],le=ve[1],de=wg(z,0),Ee=Ue(de,2),se=Ee[0],Te=Ee[1],we=wg(z,0),Le=Ue(we,2),Ie=Le[0],De=Le[1],Ye=y.useState(null),Me=Ue(Ye,2),Oe=Me[0],$e=Me[1],tt=y.useState(null),je=Ue(tt,2),ke=je[0],dt=je[1],Ze=y.useMemo(function(){return ke===null&&$?Number.MAX_SAFE_INTEGER:ke||0},[ke,J]),ut=y.useState(!1),Tt=Ue(ut,2),pt=Tt[0],ht=Tt[1],qe="".concat(s,"-item"),Je=Math.max(me,se),Ct=I===LJ,Nt=d.length&&Ct,Ot=I===kJ,on=Nt||typeof I=="number"&&d.length>I,Vt=y.useMemo(function(){var Qt=d;return Nt?J===null&&$?Qt=d:Qt=d.slice(0,Math.min(d.length,te/C)):typeof I=="number"&&(Qt=d.slice(0,I)),Qt},[d,C,J,I,Nt]),kt=y.useMemo(function(){return Nt?d.slice(Ze+1):d.slice(Vt.length)},[d,Vt,Nt,Ze]),Kt=y.useCallback(function(Qt,Dt){var bt;return typeof g=="function"?g(Qt):(bt=g&&(Qt==null?void 0:Qt[g]))!==null&&bt!==void 0?bt:Dt},[g]),Zt=y.useCallback(f||function(Qt){return Qt},[f]);function Ft(Qt,Dt,bt){ke===Qt&&(Dt===void 0||Dt===Oe)||(dt(Qt),bt||(ht(Qt<d.length-1),F==null||F(Qt)),Dt!==void 0&&$e(Dt))}function _t(Qt,Dt){ne(Dt.clientWidth)}function At(Qt,Dt){ae(function(bt){var un=new Map(bt);return Dt===null?un.delete(Qt):un.set(Qt,Dt),un})}function mt(Qt,Dt){Te(Dt),le(se)}function Pt(Qt,Dt){De(Dt)}function gn(Qt){return oe.get(Kt(Vt[Qt],Qt))}Rr(function(){if(te&&typeof Je=="number"&&Vt){var Qt=Ie,Dt=Vt.length,bt=Dt-1;if(!Dt){Ft(0,null);return}for(var un=0;un<Dt;un+=1){var Sn=gn(un);if($&&(Sn=Sn||0),Sn===void 0){Ft(un-1,void 0,!0);break}if(Qt+=Sn,bt===0&&Qt<=te||un===bt-1&&Qt+gn(bt)<=te){Ft(bt,null);break}else if(Qt+Je>te){Ft(un-1,Qt-Sn-Ie+se);break}}D&&gn(0)+Ie>te&&$e(null)}},[te,oe,se,Ie,Kt,Vt]);var Mn=pt&&!!kt.length,pi={};Oe!==null&&Nt&&(pi={position:"absolute",left:Oe,top:0});var Zr={prefixCls:qe,responsive:Nt,component:M,invalidate:Ot},Si=v?function(Qt,Dt){var bt=Kt(Qt,Dt);return y.createElement(ab.Provider,{key:bt,value:_e(_e({},Zr),{},{order:Dt,item:Qt,itemKey:bt,registerSize:At,display:Dt<=Ze})},v(Qt,Dt))}:function(Qt,Dt){var bt=Kt(Qt,Dt);return y.createElement(tv,nt({},Zr,{order:Dt,key:bt,item:Qt,renderItem:Zt,itemKey:bt,registerSize:At,display:Dt<=Ze}))},Dr={order:Mn?Ze:Number.MAX_SAFE_INTEGER,className:"".concat(qe,"-rest"),registerSize:mt,display:Mn},Gn=N||dIe,Ir=P?y.createElement(ab.Provider,{value:_e(_e({},Zr),Dr)},P(kt)):y.createElement(tv,nt({},Zr,Dr),typeof Gn=="function"?Gn(kt):Gn),vn=y.createElement(L,nt({className:Ke(!Ot&&s,A),style:T,ref:r},V),Vt.map(Si),on?Ir:null,D&&y.createElement(tv,nt({},Zr,{responsive:Ct,responsiveDisabled:!Nt,order:Ze,className:"".concat(qe,"-suffix"),registerSize:Pt,display:!0,style:pi}),D));return Ct?y.createElement(Eu,{onResize:_t,disabled:!Nt},vn):vn}var Ll=y.forwardRef(hIe);Ll.displayName="Overflow";Ll.Item=DJ;Ll.RESPONSIVE=LJ;Ll.INVALIDATE=kJ;var fIe=function(r,o){var s,c=r.prefixCls,d=r.id,f=r.inputElement,v=r.disabled,g=r.tabIndex,_=r.autoFocus,C=r.autoComplete,b=r.editable,T=r.activeDescendantId,A=r.value,I=r.maxLength,N=r.onKeyDown,P=r.onMouseDown,D=r.onChange,x=r.onPaste,L=r.onCompositionStart,M=r.onCompositionEnd,F=r.onBlur,V=r.open,$=r.attrs,z=f||y.createElement("input",null),K=z,G=K.ref,J=K.props,ne=J.onKeyDown,te=J.onChange,ce=J.onMouseDown,ge=J.onCompositionStart,oe=J.onCompositionEnd,ae=J.onBlur,ie=J.style;return"maxLength"in z.props,z=y.cloneElement(z,_e(_e(_e({type:"search"},J),{},{id:d,ref:nl(o,G),disabled:v,tabIndex:g,autoComplete:C||"off",autoFocus:_,className:Ke("".concat(c,"-selection-search-input"),(s=z)===null||s===void 0||(s=s.props)===null||s===void 0?void 0:s.className),role:"combobox","aria-expanded":V||!1,"aria-haspopup":"listbox","aria-owns":"".concat(d,"_list"),"aria-autocomplete":"list","aria-controls":"".concat(d,"_list"),"aria-activedescendant":V?T:void 0},$),{},{value:b?A:"",maxLength:I,readOnly:!b,unselectable:b?null:"on",style:_e(_e({},ie),{},{opacity:b?null:0}),onKeyDown:function(me){N(me),ne&&ne(me)},onMouseDown:function(me){P(me),ce&&ce(me)},onChange:function(me){D(me),te&&te(me)},onCompositionStart:function(me){L(me),ge&&ge(me)},onCompositionEnd:function(me){M(me),oe&&oe(me)},onPaste:x,onBlur:function(me){F(me),ae&&ae(me)}})),z},MJ=y.forwardRef(fIe);function FJ(t){return Array.isArray(t)?t:t!==void 0?[t]:[]}var pIe=typeof window<"u"&&window.document&&window.document.documentElement,mIe=pIe;function gIe(t){return t!=null}function vIe(t){return!t&&t!==0}function pz(t){return["string","number"].includes(ln(t))}function UJ(t){var r=void 0;return t&&(pz(t.title)?r=t.title.toString():pz(t.label)&&(r=t.label.toString())),r}function EIe(t,r){mIe?y.useLayoutEffect(t,r):y.useEffect(t,r)}function _Ie(t){var r;return(r=t.key)!==null&&r!==void 0?r:t.value}var mz=function(r){r.preventDefault(),r.stopPropagation()},SIe=function(r){var o=r.id,s=r.prefixCls,c=r.values,d=r.open,f=r.searchValue,v=r.autoClearSearchValue,g=r.inputRef,_=r.placeholder,C=r.disabled,b=r.mode,T=r.showSearch,A=r.autoFocus,I=r.autoComplete,N=r.activeDescendantId,P=r.tabIndex,D=r.removeIcon,x=r.maxTagCount,L=r.maxTagTextLength,M=r.maxTagPlaceholder,F=M===void 0?function(tt){return"+ ".concat(tt.length," ...")}:M,V=r.tagRender,$=r.onToggleOpen,z=r.onRemove,K=r.onInputChange,G=r.onInputPaste,J=r.onInputKeyDown,ne=r.onInputMouseDown,te=r.onInputCompositionStart,ce=r.onInputCompositionEnd,ge=r.onInputBlur,oe=y.useRef(null),ae=y.useState(0),ie=Ue(ae,2),ve=ie[0],me=ie[1],le=y.useState(!1),de=Ue(le,2),Ee=de[0],se=de[1],Te="".concat(s,"-selection"),we=d||b==="multiple"&&v===!1||b==="tags"?f:"",Le=b==="tags"||b==="multiple"&&v===!1||T&&(d||Ee);EIe(function(){me(oe.current.scrollWidth)},[we]);var Ie=function(je,ke,dt,Ze,ut){return y.createElement("span",{title:UJ(je),className:Ke("".concat(Te,"-item"),be({},"".concat(Te,"-item-disabled"),dt))},y.createElement("span",{className:"".concat(Te,"-item-content")},ke),Ze&&y.createElement(bT,{className:"".concat(Te,"-item-remove"),onMouseDown:mz,onClick:ut,customizeIcon:D},"×"))},De=function(je,ke,dt,Ze,ut,Tt){var pt=function(qe){mz(qe),$(!d)};return y.createElement("span",{onMouseDown:pt},V({label:ke,value:je,disabled:dt,closable:Ze,onClose:ut,isMaxTag:!!Tt}))},Ye=function(je){var ke=je.disabled,dt=je.label,Ze=je.value,ut=!C&&!ke,Tt=dt;if(typeof L=="number"&&(typeof dt=="string"||typeof dt=="number")){var pt=String(Tt);pt.length>L&&(Tt="".concat(pt.slice(0,L),"..."))}var ht=function(Je){Je&&Je.stopPropagation(),z(je)};return typeof V=="function"?De(Ze,Tt,ke,ut,ht):Ie(je,Tt,ke,ut,ht)},Me=function(je){if(!c.length)return null;var ke=typeof F=="function"?F(je):F;return typeof V=="function"?De(void 0,ke,!1,!1,void 0,!0):Ie({title:ke},ke,!1)},Oe=y.createElement("div",{className:"".concat(Te,"-search"),style:{width:ve},onFocus:function(){se(!0)},onBlur:function(){se(!1)}},y.createElement(MJ,{ref:g,open:d,prefixCls:s,id:o,inputElement:null,disabled:C,autoFocus:A,autoComplete:I,editable:Le,activeDescendantId:N,value:we,onKeyDown:J,onMouseDown:ne,onChange:K,onPaste:G,onCompositionStart:te,onCompositionEnd:ce,onBlur:ge,tabIndex:P,attrs:Wh(r,!0)}),y.createElement("span",{ref:oe,className:"".concat(Te,"-search-mirror"),"aria-hidden":!0},we," ")),$e=y.createElement(Ll,{prefixCls:"".concat(Te,"-overflow"),data:c,renderItem:Ye,renderRest:Me,suffix:Oe,itemKey:_Ie,maxCount:x});return y.createElement("span",{className:"".concat(Te,"-wrap")},$e,!c.length&&!we&&y.createElement("span",{className:"".concat(Te,"-placeholder")},_))},yIe=function(r){var o=r.inputElement,s=r.prefixCls,c=r.id,d=r.inputRef,f=r.disabled,v=r.autoFocus,g=r.autoComplete,_=r.activeDescendantId,C=r.mode,b=r.open,T=r.values,A=r.placeholder,I=r.tabIndex,N=r.showSearch,P=r.searchValue,D=r.activeValue,x=r.maxLength,L=r.onInputKeyDown,M=r.onInputMouseDown,F=r.onInputChange,V=r.onInputPaste,$=r.onInputCompositionStart,z=r.onInputCompositionEnd,K=r.onInputBlur,G=r.title,J=y.useState(!1),ne=Ue(J,2),te=ne[0],ce=ne[1],ge=C==="combobox",oe=ge||N,ae=T[0],ie=P||"";ge&&D&&!te&&(ie=D),y.useEffect(function(){ge&&ce(!1)},[ge,D]);var ve=C!=="combobox"&&!b&&!N?!1:!!ie,me=G===void 0?UJ(ae):G,le=y.useMemo(function(){return ae?null:y.createElement("span",{className:"".concat(s,"-selection-placeholder"),style:ve?{visibility:"hidden"}:void 0},A)},[ae,ve,A,s]);return y.createElement("span",{className:"".concat(s,"-selection-wrap")},y.createElement("span",{className:"".concat(s,"-selection-search")},y.createElement(MJ,{ref:d,prefixCls:s,id:c,open:b,inputElement:o,disabled:f,autoFocus:v,autoComplete:g,editable:oe,activeDescendantId:_,value:ie,onKeyDown:L,onMouseDown:M,onChange:function(Ee){ce(!0),F(Ee)},onPaste:V,onCompositionStart:$,onCompositionEnd:z,onBlur:K,tabIndex:I,attrs:Wh(r,!0),maxLength:ge?x:void 0})),!ge&&ae?y.createElement("span",{className:"".concat(s,"-selection-item"),title:me,style:ve?{visibility:"hidden"}:void 0},ae.label):null,le)},CIe=function(r,o){var s=y.useRef(null),c=y.useRef(!1),d=r.prefixCls,f=r.open,v=r.mode,g=r.showSearch,_=r.tokenWithEnter,C=r.disabled,b=r.prefix,T=r.autoClearSearchValue,A=r.onSearch,I=r.onSearchSubmit,N=r.onToggleOpen,P=r.onInputKeyDown,D=r.onInputBlur,x=r.domRef;y.useImperativeHandle(o,function(){return{focus:function(me){s.current.focus(me)},blur:function(){s.current.blur()}}});var L=PJ(0),M=Ue(L,2),F=M[0],V=M[1],$=function(me){var le=me.which,de=s.current instanceof HTMLTextAreaElement;!de&&f&&(le===lt.UP||le===lt.DOWN)&&me.preventDefault(),P&&P(me),le===lt.ENTER&&v==="tags"&&!c.current&&!f&&(I==null||I(me.target.value)),!(de&&!f&&~[lt.UP,lt.DOWN,lt.LEFT,lt.RIGHT].indexOf(le))&&tIe(le)&&N(!0)},z=function(){V(!0)},K=y.useRef(null),G=function(me){A(me,!0,c.current)!==!1&&N(!0)},J=function(){c.current=!0},ne=function(me){c.current=!1,v!=="combobox"&&G(me.target.value)},te=function(me){var le=me.target.value;if(_&&K.current&&/[\r\n]/.test(K.current)){var de=K.current.replace(/[\r\n]+$/,"").replace(/\r\n/g," ").replace(/[\r\n]/g," ");le=le.replace(de,K.current)}K.current=null,G(le)},ce=function(me){var le=me.clipboardData,de=le==null?void 0:le.getData("text");K.current=de||""},ge=function(me){var le=me.target;if(le!==s.current){var de=document.body.style.msTouchAction!==void 0;de?setTimeout(function(){s.current.focus()}):s.current.focus()}},oe=function(me){var le=F();me.target!==s.current&&!le&&!(v==="combobox"&&C)&&me.preventDefault(),(v!=="combobox"&&(!g||!le)||!f)&&(f&&T!==!1&&A("",!0,!1),N())},ae={inputRef:s,onInputKeyDown:$,onInputMouseDown:z,onInputChange:te,onInputPaste:ce,onInputCompositionStart:J,onInputCompositionEnd:ne,onInputBlur:D},ie=v==="multiple"||v==="tags"?y.createElement(SIe,nt({},r,ae)):y.createElement(yIe,nt({},r,ae));return y.createElement("div",{ref:x,className:"".concat(d,"-selector"),onClick:ge,onMouseDown:oe},b&&y.createElement("div",{className:"".concat(d,"-prefix")},b),ie)},bIe=y.forwardRef(CIe);function TIe(t){var r=t.prefixCls,o=t.align,s=t.arrow,c=t.arrowPos,d=s||{},f=d.className,v=d.content,g=c.x,_=g===void 0?0:g,C=c.y,b=C===void 0?0:C,T=y.useRef();if(!o||!o.points)return null;var A={position:"absolute"};if(o.autoArrow!==!1){var I=o.points[0],N=o.points[1],P=I[0],D=I[1],x=N[0],L=N[1];P===x||!["t","b"].includes(P)?A.top=b:P==="t"?A.top=0:A.bottom=0,D===L||!["l","r"].includes(D)?A.left=_:D==="l"?A.left=0:A.right=0}return y.createElement("div",{ref:T,className:Ke("".concat(r,"-arrow"),f),style:A},v)}function RIe(t){var r=t.prefixCls,o=t.open,s=t.zIndex,c=t.mask,d=t.motion;return c?y.createElement(ef,nt({},d,{motionAppear:!0,visible:o,removeOnLeave:!0}),function(f){var v=f.className;return y.createElement("div",{style:{zIndex:s},className:Ke("".concat(r,"-mask"),v)})}):null}var wIe=y.memo(function(t){var r=t.children;return r},function(t,r){return r.cache}),IIe=y.forwardRef(function(t,r){var o=t.popup,s=t.className,c=t.prefixCls,d=t.style,f=t.target,v=t.onVisibleChanged,g=t.open,_=t.keepDom,C=t.fresh,b=t.onClick,T=t.mask,A=t.arrow,I=t.arrowPos,N=t.align,P=t.motion,D=t.maskMotion,x=t.forceRender,L=t.getPopupContainer,M=t.autoDestroy,F=t.portal,V=t.zIndex,$=t.onMouseEnter,z=t.onMouseLeave,K=t.onPointerEnter,G=t.onPointerDownCapture,J=t.ready,ne=t.offsetX,te=t.offsetY,ce=t.offsetR,ge=t.offsetB,oe=t.onAlign,ae=t.onPrepare,ie=t.stretch,ve=t.targetWidth,me=t.targetHeight,le=typeof o=="function"?o():o,de=g||_,Ee=(L==null?void 0:L.length)>0,se=y.useState(!L||!Ee),Te=Ue(se,2),we=Te[0],Le=Te[1];if(Rr(function(){!we&&Ee&&f&&Le(!0)},[we,Ee,f]),!we)return null;var Ie="auto",De={left:"-1000vw",top:"-1000vh",right:Ie,bottom:Ie};if(J||!g){var Ye,Me=N.points,Oe=N.dynamicInset||((Ye=N._experimental)===null||Ye===void 0?void 0:Ye.dynamicInset),$e=Oe&&Me[0][1]==="r",tt=Oe&&Me[0][0]==="b";$e?(De.right=ce,De.left=Ie):(De.left=ne,De.right=Ie),tt?(De.bottom=ge,De.top=Ie):(De.top=te,De.bottom=Ie)}var je={};return ie&&(ie.includes("height")&&me?je.height=me:ie.includes("minHeight")&&me&&(je.minHeight=me),ie.includes("width")&&ve?je.width=ve:ie.includes("minWidth")&&ve&&(je.minWidth=ve)),g||(je.pointerEvents="none"),y.createElement(F,{open:x||de,getContainer:L&&function(){return L(f)},autoDestroy:M},y.createElement(RIe,{prefixCls:c,open:g,zIndex:V,mask:T,motion:D}),y.createElement(Eu,{onResize:oe,disabled:!g},function(ke){return y.createElement(ef,nt({motionAppear:!0,motionEnter:!0,motionLeave:!0,removeOnLeave:!1,forceRender:x,leavedClassName:"".concat(c,"-hidden")},P,{onAppearPrepare:ae,onEnterPrepare:ae,visible:g,onVisibleChanged:function(Ze){var ut;P==null||(ut=P.onVisibleChanged)===null||ut===void 0||ut.call(P,Ze),v(Ze)}}),function(dt,Ze){var ut=dt.className,Tt=dt.style,pt=Ke(c,ut,s);return y.createElement("div",{ref:nl(ke,r,Ze),className:pt,style:_e(_e(_e(_e({"--arrow-x":"".concat(I.x||0,"px"),"--arrow-y":"".concat(I.y||0,"px")},De),je),Tt),{},{boxSizing:"border-box",zIndex:V},d),onMouseEnter:$,onMouseLeave:z,onPointerEnter:K,onClick:b,onPointerDownCapture:G},A&&y.createElement(TIe,{prefixCls:c,arrow:A,arrowPos:I,align:N}),y.createElement(wIe,{cache:!g&&!C},le))})}))}),AIe=y.forwardRef(function(t,r){var o=t.children,s=t.getTriggerDOMNode,c=Nm(o),d=y.useCallback(function(v){b2(r,s?s(v):v)},[s]),f=xm(d,qv(o));return c?y.cloneElement(o,{ref:f}):o}),gz=y.createContext(null);function vz(t){return t?Array.isArray(t)?t:[t]:[]}function OIe(t,r,o,s){return y.useMemo(function(){var c=vz(o??r),d=vz(s??r),f=new Set(c),v=new Set(d);return t&&(f.has("hover")&&(f.delete("hover"),f.add("click")),v.has("hover")&&(v.delete("hover"),v.add("click"))),[f,v]},[t,r,o,s])}function xIe(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],o=arguments.length>2?arguments[2]:void 0;return o?t[0]===r[0]:t[0]===r[0]&&t[1]===r[1]}function NIe(t,r,o,s){for(var c=o.points,d=Object.keys(t),f=0;f<d.length;f+=1){var v,g=d[f];if(xIe((v=t[g])===null||v===void 0?void 0:v.points,c,s))return"".concat(r,"-placement-").concat(g)}return""}function Ez(t,r,o,s){return r||(o?{motionName:"".concat(t,"-").concat(o)}:s?{motionName:s}:null)}function nE(t){return t.ownerDocument.defaultView}function eD(t){for(var r=[],o=t==null?void 0:t.parentElement,s=["hidden","scroll","clip","auto"];o;){var c=nE(o).getComputedStyle(o),d=c.overflowX,f=c.overflowY,v=c.overflow;[d,f,v].some(function(g){return s.includes(g)})&&r.push(o),o=o.parentElement}return r}function kv(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return Number.isNaN(t)?r:t}function Ig(t){return kv(parseFloat(t),0)}function _z(t,r){var o=_e({},t);return(r||[]).forEach(function(s){if(!(s instanceof HTMLBodyElement||s instanceof HTMLHtmlElement)){var c=nE(s).getComputedStyle(s),d=c.overflow,f=c.overflowClipMargin,v=c.borderTopWidth,g=c.borderBottomWidth,_=c.borderLeftWidth,C=c.borderRightWidth,b=s.getBoundingClientRect(),T=s.offsetHeight,A=s.clientHeight,I=s.offsetWidth,N=s.clientWidth,P=Ig(v),D=Ig(g),x=Ig(_),L=Ig(C),M=kv(Math.round(b.width/I*1e3)/1e3),F=kv(Math.round(b.height/T*1e3)/1e3),V=(I-N-x-L)*M,$=(T-A-P-D)*F,z=P*F,K=D*F,G=x*M,J=L*M,ne=0,te=0;if(d==="clip"){var ce=Ig(f);ne=ce*M,te=ce*F}var ge=b.x+G-ne,oe=b.y+z-te,ae=ge+b.width+2*ne-G-J-V,ie=oe+b.height+2*te-z-K-$;o.left=Math.max(o.left,ge),o.top=Math.max(o.top,oe),o.right=Math.min(o.right,ae),o.bottom=Math.min(o.bottom,ie)}}),o}function Sz(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o="".concat(r),s=o.match(/^(.*)\%$/);return s?t*(parseFloat(s[1])/100):parseFloat(o)}function yz(t,r){var o=r||[],s=Ue(o,2),c=s[0],d=s[1];return[Sz(t.width,c),Sz(t.height,d)]}function Cz(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return[t[0],t[1]]}function Pp(t,r){var o=r[0],s=r[1],c,d;return o==="t"?d=t.y:o==="b"?d=t.y+t.height:d=t.y+t.height/2,s==="l"?c=t.x:s==="r"?c=t.x+t.width:c=t.x+t.width/2,{x:c,y:d}}function ad(t,r){var o={t:"b",b:"t",l:"r",r:"l"};return t.map(function(s,c){return c===r?o[s]||"c":s}).join("")}function PIe(t,r,o,s,c,d,f){var v=y.useState({ready:!1,offsetX:0,offsetY:0,offsetR:0,offsetB:0,arrowX:0,arrowY:0,scaleX:1,scaleY:1,align:c[s]||{}}),g=Ue(v,2),_=g[0],C=g[1],b=y.useRef(0),T=y.useMemo(function(){return r?eD(r):[]},[r]),A=y.useRef({}),I=function(){A.current={}};t||I();var N=ho(function(){if(r&&o&&t){let Ko=function(bu,il){var Tu=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Je,sf=se.x+bu,cf=se.y+il,lf=sf+$e,tn=cf+Oe,In=Math.max(sf,Tu.left),mi=Math.max(cf,Tu.top),li=Math.min(lf,Tu.right),gi=Math.min(tn,Tu.bottom);return Math.max(0,(li-In)*(gi-mi))},Cu=function(){Wr=se.y+bt,ai=Wr+Oe,si=se.x+Dt,Vi=si+$e};var jm=Ko,hE=Cu,x,L,M,F,V=r,$=V.ownerDocument,z=nE(V),K=z.getComputedStyle(V),G=K.width,J=K.height,ne=K.position,te=V.style.left,ce=V.style.top,ge=V.style.right,oe=V.style.bottom,ae=V.style.overflow,ie=_e(_e({},c[s]),d),ve=$.createElement("div");(x=V.parentElement)===null||x===void 0||x.appendChild(ve),ve.style.left="".concat(V.offsetLeft,"px"),ve.style.top="".concat(V.offsetTop,"px"),ve.style.position=ne,ve.style.height="".concat(V.offsetHeight,"px"),ve.style.width="".concat(V.offsetWidth,"px"),V.style.left="0",V.style.top="0",V.style.right="auto",V.style.bottom="auto",V.style.overflow="hidden";var me;if(Array.isArray(o))me={x:o[0],y:o[1],width:0,height:0};else{var le,de,Ee=o.getBoundingClientRect();Ee.x=(le=Ee.x)!==null&&le!==void 0?le:Ee.left,Ee.y=(de=Ee.y)!==null&&de!==void 0?de:Ee.top,me={x:Ee.x,y:Ee.y,width:Ee.width,height:Ee.height}}var se=V.getBoundingClientRect();se.x=(L=se.x)!==null&&L!==void 0?L:se.left,se.y=(M=se.y)!==null&&M!==void 0?M:se.top;var Te=$.documentElement,we=Te.clientWidth,Le=Te.clientHeight,Ie=Te.scrollWidth,De=Te.scrollHeight,Ye=Te.scrollTop,Me=Te.scrollLeft,Oe=se.height,$e=se.width,tt=me.height,je=me.width,ke={left:0,top:0,right:we,bottom:Le},dt={left:-Me,top:-Ye,right:Ie-Me,bottom:De-Ye},Ze=ie.htmlRegion,ut="visible",Tt="visibleFirst";Ze!=="scroll"&&Ze!==Tt&&(Ze=ut);var pt=Ze===Tt,ht=_z(dt,T),qe=_z(ke,T),Je=Ze===ut?qe:ht,Ct=pt?qe:Je;V.style.left="auto",V.style.top="auto",V.style.right="0",V.style.bottom="0";var Nt=V.getBoundingClientRect();V.style.left=te,V.style.top=ce,V.style.right=ge,V.style.bottom=oe,V.style.overflow=ae,(F=V.parentElement)===null||F===void 0||F.removeChild(ve);var Ot=kv(Math.round($e/parseFloat(G)*1e3)/1e3),on=kv(Math.round(Oe/parseFloat(J)*1e3)/1e3);if(Ot===0||on===0||bv(o)&&!gT(o))return;var Vt=ie.offset,kt=ie.targetOffset,Kt=yz(se,Vt),Zt=Ue(Kt,2),Ft=Zt[0],_t=Zt[1],At=yz(me,kt),mt=Ue(At,2),Pt=mt[0],gn=mt[1];me.x-=Pt,me.y-=gn;var Mn=ie.points||[],pi=Ue(Mn,2),Zr=pi[0],Si=pi[1],Dr=Cz(Si),Gn=Cz(Zr),Ir=Pp(me,Dr),vn=Pp(se,Gn),Qt=_e({},ie),Dt=Ir.x-vn.x+Ft,bt=Ir.y-vn.y+_t,un=Ko(Dt,bt),Sn=Ko(Dt,bt,qe),ft=Pp(me,["t","l"]),gt=Pp(se,["t","l"]),Wt=Pp(me,["b","r"]),Yt=Pp(se,["b","r"]),jt=ie.overflow||{},dn=jt.adjustX,ar=jt.adjustY,Xn=jt.shiftX,$n=jt.shiftY,nr=function(il){return typeof il=="boolean"?il:il>=0},Wr,ai,si,Vi;Cu();var Fr=nr(ar),Lr=Gn[0]===Dr[0];if(Fr&&Gn[0]==="t"&&(ai>Ct.bottom||A.current.bt)){var St=bt;Lr?St-=Oe-tt:St=ft.y-Yt.y-_t;var Gt=Ko(Dt,St),cn=Ko(Dt,St,qe);Gt>un||Gt===un&&(!pt||cn>=Sn)?(A.current.bt=!0,bt=St,_t=-_t,Qt.points=[ad(Gn,0),ad(Dr,0)]):A.current.bt=!1}if(Fr&&Gn[0]==="b"&&(Wr<Ct.top||A.current.tb)){var Ln=bt;Lr?Ln+=Oe-tt:Ln=Wt.y-gt.y-_t;var ur=Ko(Dt,Ln),Jn=Ko(Dt,Ln,qe);ur>un||ur===un&&(!pt||Jn>=Sn)?(A.current.tb=!0,bt=Ln,_t=-_t,Qt.points=[ad(Gn,0),ad(Dr,0)]):A.current.tb=!1}var ji=nr(dn),ka=Gn[1]===Dr[1];if(ji&&Gn[1]==="l"&&(Vi>Ct.right||A.current.rl)){var an=Dt;ka?an-=$e-je:an=ft.x-Yt.x-Ft;var Pn=Ko(an,bt),Hn=Ko(an,bt,qe);Pn>un||Pn===un&&(!pt||Hn>=Sn)?(A.current.rl=!0,Dt=an,Ft=-Ft,Qt.points=[ad(Gn,1),ad(Dr,1)]):A.current.rl=!1}if(ji&&Gn[1]==="r"&&(si<Ct.left||A.current.lr)){var yi=Dt;ka?yi+=$e-je:yi=Wt.x-gt.x-Ft;var Ho=Ko(yi,bt),rl=Ko(yi,bt,qe);Ho>un||Ho===un&&(!pt||rl>=Sn)?(A.current.lr=!0,Dt=yi,Ft=-Ft,Qt.points=[ad(Gn,1),ad(Dr,1)]):A.current.lr=!1}Cu();var xo=Xn===!0?0:Xn;typeof xo=="number"&&(si<qe.left&&(Dt-=si-qe.left-Ft,me.x+je<qe.left+xo&&(Dt+=me.x-qe.left+je-xo)),Vi>qe.right&&(Dt-=Vi-qe.right-Ft,me.x>qe.right-xo&&(Dt+=me.x-qe.right+xo)));var zo=$n===!0?0:$n;typeof zo=="number"&&(Wr<qe.top&&(bt-=Wr-qe.top-_t,me.y+tt<qe.top+zo&&(bt+=me.y-qe.top+tt-zo)),ai>qe.bottom&&(bt-=ai-qe.bottom-_t,me.y>qe.bottom-zo&&(bt+=me.y-qe.bottom+zo)));var Wo=se.x+Dt,Ma=Wo+$e,oa=se.y+bt,hr=oa+Oe,Ar=me.x,qt=Ar+je,Ut=me.y,yr=Ut+tt,Cr=Math.max(Wo,Ar),$r=Math.min(Ma,qt),ci=(Cr+$r)/2,Go=ci-Wo,go=Math.max(oa,Ut),vo=Math.min(hr,yr),Eo=(go+vo)/2,_o=Eo-oa;f==null||f(r,Qt);var Fa=Nt.right-se.x-(Dt+se.width),So=Nt.bottom-se.y-(bt+se.height);Ot===1&&(Dt=Math.round(Dt),Fa=Math.round(Fa)),on===1&&(bt=Math.round(bt),So=Math.round(So));var Vm={ready:!0,offsetX:Dt/Ot,offsetY:bt/on,offsetR:Fa/Ot,offsetB:So/on,arrowX:Go/Ot,arrowY:_o/on,scaleX:Ot,scaleY:on,align:Qt};C(Vm)}}),P=function(){b.current+=1;var L=b.current;Promise.resolve().then(function(){b.current===L&&N()})},D=function(){C(function(L){return _e(_e({},L),{},{ready:!1})})};return Rr(D,[s]),Rr(function(){t||D()},[t]),[_.ready,_.offsetX,_.offsetY,_.offsetR,_.offsetB,_.arrowX,_.arrowY,_.scaleX,_.scaleY,_.align,P]}function DIe(t,r,o,s,c){Rr(function(){if(t&&r&&o){let T=function(){s(),c()};var b=T,d=r,f=o,v=eD(d),g=eD(f),_=nE(f),C=new Set([_].concat(Et(v),Et(g)));return C.forEach(function(A){A.addEventListener("scroll",T,{passive:!0})}),_.addEventListener("resize",T,{passive:!0}),s(),function(){C.forEach(function(A){A.removeEventListener("scroll",T),_.removeEventListener("resize",T)})}}},[t,r,o])}function LIe(t,r,o,s,c,d,f,v){var g=y.useRef(t);g.current=t;var _=y.useRef(!1);y.useEffect(function(){if(r&&s&&(!c||d)){var b=function(){_.current=!1},T=function(P){var D;g.current&&!f(((D=P.composedPath)===null||D===void 0||(D=D.call(P))===null||D===void 0?void 0:D[0])||P.target)&&!_.current&&v(!1)},A=nE(s);A.addEventListener("pointerdown",b,!0),A.addEventListener("mousedown",T,!0),A.addEventListener("contextmenu",T,!0);var I=nb(o);return I&&(I.addEventListener("mousedown",T,!0),I.addEventListener("contextmenu",T,!0)),function(){A.removeEventListener("pointerdown",b,!0),A.removeEventListener("mousedown",T,!0),A.removeEventListener("contextmenu",T,!0),I&&(I.removeEventListener("mousedown",T,!0),I.removeEventListener("contextmenu",T,!0))}}},[r,o,s,c,d]);function C(){_.current=!0}return C}var kIe=["prefixCls","children","action","showAction","hideAction","popupVisible","defaultPopupVisible","onPopupVisibleChange","afterPopupVisibleChange","mouseEnterDelay","mouseLeaveDelay","focusDelay","blurDelay","mask","maskClosable","getPopupContainer","forceRender","autoDestroy","destroyPopupOnHide","popup","popupClassName","popupStyle","popupPlacement","builtinPlacements","popupAlign","zIndex","stretch","getPopupClassNameFromAlign","fresh","alignPoint","onPopupClick","onPopupAlign","arrow","popupMotion","maskMotion","popupTransitionName","popupAnimation","maskTransitionName","maskAnimation","className","getTriggerDOMNode"];function MIe(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:dJ,r=y.forwardRef(function(o,s){var c=o.prefixCls,d=c===void 0?"rc-trigger-popup":c,f=o.children,v=o.action,g=v===void 0?"hover":v,_=o.showAction,C=o.hideAction,b=o.popupVisible,T=o.defaultPopupVisible,A=o.onPopupVisibleChange,I=o.afterPopupVisibleChange,N=o.mouseEnterDelay,P=o.mouseLeaveDelay,D=P===void 0?.1:P,x=o.focusDelay,L=o.blurDelay,M=o.mask,F=o.maskClosable,V=F===void 0?!0:F,$=o.getPopupContainer,z=o.forceRender,K=o.autoDestroy,G=o.destroyPopupOnHide,J=o.popup,ne=o.popupClassName,te=o.popupStyle,ce=o.popupPlacement,ge=o.builtinPlacements,oe=ge===void 0?{}:ge,ae=o.popupAlign,ie=o.zIndex,ve=o.stretch,me=o.getPopupClassNameFromAlign,le=o.fresh,de=o.alignPoint,Ee=o.onPopupClick,se=o.onPopupAlign,Te=o.arrow,we=o.popupMotion,Le=o.maskMotion,Ie=o.popupTransitionName,De=o.popupAnimation,Ye=o.maskTransitionName,Me=o.maskAnimation,Oe=o.className,$e=o.getTriggerDOMNode,tt=xn(o,kIe),je=K||G||!1,ke=y.useState(!1),dt=Ue(ke,2),Ze=dt[0],ut=dt[1];Rr(function(){ut(xJ())},[]);var Tt=y.useRef({}),pt=y.useContext(gz),ht=y.useMemo(function(){return{registerSubPopup:function(In,mi){Tt.current[In]=mi,pt==null||pt.registerSubPopup(In,mi)}}},[pt]),qe=hJ(),Je=y.useState(null),Ct=Ue(Je,2),Nt=Ct[0],Ot=Ct[1],on=y.useRef(null),Vt=ho(function(tn){on.current=tn,bv(tn)&&Nt!==tn&&Ot(tn),pt==null||pt.registerSubPopup(qe,tn)}),kt=y.useState(null),Kt=Ue(kt,2),Zt=Kt[0],Ft=Kt[1],_t=y.useRef(null),At=ho(function(tn){bv(tn)&&Zt!==tn&&(Ft(tn),_t.current=tn)}),mt=y.Children.only(f),Pt=(mt==null?void 0:mt.props)||{},gn={},Mn=ho(function(tn){var In,mi,li=Zt;return(li==null?void 0:li.contains(tn))||((In=nb(li))===null||In===void 0?void 0:In.host)===tn||tn===li||(Nt==null?void 0:Nt.contains(tn))||((mi=nb(Nt))===null||mi===void 0?void 0:mi.host)===tn||tn===Nt||Object.values(Tt.current).some(function(gi){return(gi==null?void 0:gi.contains(tn))||tn===gi})}),pi=Ez(d,we,De,Ie),Zr=Ez(d,Le,Me,Ye),Si=y.useState(T||!1),Dr=Ue(Si,2),Gn=Dr[0],Ir=Dr[1],vn=b??Gn,Qt=ho(function(tn){b===void 0&&Ir(tn)});Rr(function(){Ir(b||!1)},[b]);var Dt=y.useRef(vn);Dt.current=vn;var bt=y.useRef([]);bt.current=[];var un=ho(function(tn){var In;Qt(tn),((In=bt.current[bt.current.length-1])!==null&&In!==void 0?In:vn)!==tn&&(bt.current.push(tn),A==null||A(tn))}),Sn=y.useRef(),ft=function(){clearTimeout(Sn.current)},gt=function(In){var mi=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;ft(),mi===0?un(In):Sn.current=setTimeout(function(){un(In)},mi*1e3)};y.useEffect(function(){return ft},[]);var Wt=y.useState(!1),Yt=Ue(Wt,2),jt=Yt[0],dn=Yt[1];Rr(function(tn){(!tn||vn)&&dn(!0)},[vn]);var ar=y.useState(null),Xn=Ue(ar,2),$n=Xn[0],nr=Xn[1],Wr=y.useState(null),ai=Ue(Wr,2),si=ai[0],Vi=ai[1],Fr=function(In){Vi([In.clientX,In.clientY])},Lr=PIe(vn,Nt,de&&si!==null?si:Zt,ce,oe,ae,se),St=Ue(Lr,11),Gt=St[0],cn=St[1],Ln=St[2],ur=St[3],Jn=St[4],ji=St[5],ka=St[6],an=St[7],Pn=St[8],Hn=St[9],yi=St[10],Ho=OIe(Ze,g,_,C),rl=Ue(Ho,2),xo=rl[0],zo=rl[1],Wo=xo.has("click"),Ma=zo.has("click")||zo.has("contextMenu"),oa=ho(function(){jt||yi()}),hr=function(){Dt.current&&de&&Ma&&gt(!1)};DIe(vn,Zt,Nt,oa,hr),Rr(function(){oa()},[si,ce]),Rr(function(){vn&&!(oe!=null&&oe[ce])&&oa()},[JSON.stringify(ae)]);var Ar=y.useMemo(function(){var tn=NIe(oe,d,Hn,de);return Ke(tn,me==null?void 0:me(Hn))},[Hn,me,oe,d,de]);y.useImperativeHandle(s,function(){return{nativeElement:_t.current,popupElement:on.current,forceAlign:oa}});var qt=y.useState(0),Ut=Ue(qt,2),yr=Ut[0],Cr=Ut[1],$r=y.useState(0),ci=Ue($r,2),Go=ci[0],go=ci[1],vo=function(){if(ve&&Zt){var In=Zt.getBoundingClientRect();Cr(In.width),go(In.height)}},Eo=function(){vo(),oa()},_o=function(In){dn(!1),yi(),I==null||I(In)},Fa=function(){return new Promise(function(In){vo(),nr(function(){return In})})};Rr(function(){$n&&(yi(),$n(),nr(null))},[$n]);function So(tn,In,mi,li){gn[tn]=function(gi){var uf;li==null||li(gi),gt(In,mi);for(var $m=arguments.length,fE=new Array($m>1?$m-1:0),Md=1;Md<$m;Md++)fE[Md-1]=arguments[Md];(uf=Pt[tn])===null||uf===void 0||uf.call.apply(uf,[Pt,gi].concat(fE))}}(Wo||Ma)&&(gn.onClick=function(tn){var In;Dt.current&&Ma?gt(!1):!Dt.current&&Wo&&(Fr(tn),gt(!0));for(var mi=arguments.length,li=new Array(mi>1?mi-1:0),gi=1;gi<mi;gi++)li[gi-1]=arguments[gi];(In=Pt.onClick)===null||In===void 0||In.call.apply(In,[Pt,tn].concat(li))});var Vm=LIe(vn,Ma,Zt,Nt,M,V,Mn,gt),jm=xo.has("hover"),hE=zo.has("hover"),Ko,Cu;jm&&(So("onMouseEnter",!0,N,function(tn){Fr(tn)}),So("onPointerEnter",!0,N,function(tn){Fr(tn)}),Ko=function(In){(vn||jt)&&Nt!==null&&Nt!==void 0&&Nt.contains(In.target)&&gt(!0,N)},de&&(gn.onMouseMove=function(tn){var In;(In=Pt.onMouseMove)===null||In===void 0||In.call(Pt,tn)})),hE&&(So("onMouseLeave",!1,D),So("onPointerLeave",!1,D),Cu=function(){gt(!1,D)}),xo.has("focus")&&So("onFocus",!0,x),zo.has("focus")&&So("onBlur",!1,L),xo.has("contextMenu")&&(gn.onContextMenu=function(tn){var In;Dt.current&&zo.has("contextMenu")?gt(!1):(Fr(tn),gt(!0)),tn.preventDefault();for(var mi=arguments.length,li=new Array(mi>1?mi-1:0),gi=1;gi<mi;gi++)li[gi-1]=arguments[gi];(In=Pt.onContextMenu)===null||In===void 0||In.call.apply(In,[Pt,tn].concat(li))}),Oe&&(gn.className=Ke(Pt.className,Oe));var bu=_e(_e({},Pt),gn),il={},Tu=["onContextMenu","onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur"];Tu.forEach(function(tn){tt[tn]&&(il[tn]=function(){for(var In,mi=arguments.length,li=new Array(mi),gi=0;gi<mi;gi++)li[gi]=arguments[gi];(In=bu[tn])===null||In===void 0||In.call.apply(In,[bu].concat(li)),tt[tn].apply(tt,li)})});var sf=y.cloneElement(mt,_e(_e({},bu),il)),cf={x:ji,y:ka},lf=Te?_e({},Te!==!0?Te:{}):null;return y.createElement(y.Fragment,null,y.createElement(Eu,{disabled:!vn,ref:At,onResize:Eo},y.createElement(AIe,{getTriggerDOMNode:$e},sf)),y.createElement(gz.Provider,{value:ht},y.createElement(IIe,{portal:t,ref:Vt,prefixCls:d,popup:J,className:Ke(ne,Ar),style:te,target:Zt,onMouseEnter:Ko,onMouseLeave:Cu,onPointerEnter:Ko,zIndex:ie,open:vn,keepDom:jt,fresh:le,onClick:Ee,onPointerDownCapture:Vm,mask:M,motion:pi,maskMotion:Zr,onVisibleChanged:_o,onPrepare:Fa,forceRender:z,autoDestroy:je,getPopupContainer:$,align:Hn,arrow:lf,arrowPos:cf,ready:Gt,offsetX:cn,offsetY:Ln,offsetR:ur,offsetB:Jn,onAlign:oa,stretch:ve,targetWidth:yr/an,targetHeight:Go/Pn})))});return r}const K2=MIe(dJ);var FIe=["prefixCls","disabled","visible","children","popupElement","animation","transitionName","dropdownStyle","dropdownClassName","direction","placement","builtinPlacements","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","getPopupContainer","empty","getTriggerDOMNode","onPopupVisibleChange","onPopupMouseEnter"],UIe=function(r){var o=r===!0?0:1;return{bottomLeft:{points:["tl","bl"],offset:[0,4],overflow:{adjustX:o,adjustY:1},htmlRegion:"scroll"},bottomRight:{points:["tr","br"],offset:[0,4],overflow:{adjustX:o,adjustY:1},htmlRegion:"scroll"},topLeft:{points:["bl","tl"],offset:[0,-4],overflow:{adjustX:o,adjustY:1},htmlRegion:"scroll"},topRight:{points:["br","tr"],offset:[0,-4],overflow:{adjustX:o,adjustY:1},htmlRegion:"scroll"}}},BIe=function(r,o){var s=r.prefixCls;r.disabled;var c=r.visible,d=r.children,f=r.popupElement,v=r.animation,g=r.transitionName,_=r.dropdownStyle,C=r.dropdownClassName,b=r.direction,T=b===void 0?"ltr":b,A=r.placement,I=r.builtinPlacements,N=r.dropdownMatchSelectWidth,P=r.dropdownRender,D=r.dropdownAlign,x=r.getPopupContainer,L=r.empty,M=r.getTriggerDOMNode,F=r.onPopupVisibleChange,V=r.onPopupMouseEnter,$=xn(r,FIe),z="".concat(s,"-dropdown"),K=f;P&&(K=P(f));var G=y.useMemo(function(){return I||UIe(N)},[I,N]),J=v?"".concat(z,"-").concat(v):g,ne=typeof N=="number",te=y.useMemo(function(){return ne?null:N===!1?"minWidth":"width"},[N,ne]),ce=_;ne&&(ce=_e(_e({},ce),{},{width:N}));var ge=y.useRef(null);return y.useImperativeHandle(o,function(){return{getPopupElement:function(){var ae;return(ae=ge.current)===null||ae===void 0?void 0:ae.popupElement}}}),y.createElement(K2,nt({},$,{showAction:F?["click"]:[],hideAction:F?["click"]:[],popupPlacement:A||(T==="rtl"?"bottomRight":"bottomLeft"),builtinPlacements:G,prefixCls:z,popupTransitionName:J,popup:y.createElement("div",{onMouseEnter:V},K),ref:ge,stretch:te,popupAlign:D,popupVisible:c,getPopupContainer:x,popupClassName:Ke(C,be({},"".concat(z,"-empty"),L)),popupStyle:ce,getTriggerDOMNode:M,onPopupVisibleChange:F}),d)},VIe=y.forwardRef(BIe);function bz(t,r){var o=t.key,s;return"value"in t&&(s=t.value),o??(s!==void 0?s:"rc-index-key-".concat(r))}function tD(t){return typeof t<"u"&&!Number.isNaN(t)}function BJ(t,r){var o=t||{},s=o.label,c=o.value,d=o.options,f=o.groupLabel,v=s||(r?"children":"label");return{label:v,value:c||"value",options:d||"options",groupLabel:f||v}}function jIe(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=r.fieldNames,s=r.childrenAsData,c=[],d=BJ(o,!1),f=d.label,v=d.value,g=d.options,_=d.groupLabel;function C(b,T){Array.isArray(b)&&b.forEach(function(A){if(T||!(g in A)){var I=A[v];c.push({key:bz(A,c.length),groupOption:T,data:A,label:A[f],value:I})}else{var N=A[_];N===void 0&&s&&(N=A.label),c.push({key:bz(A,c.length),group:!0,data:A,label:N}),C(A[g],!0)}})}return C(t,!1),c}function nD(t){var r=_e({},t);return"props"in r||Object.defineProperty(r,"props",{get:function(){return _a(!1,"Return type is option instead of Option instance. Please read value directly instead of reading from `props`."),r}}),r}var $Ie=function(r,o,s){if(!o||!o.length)return null;var c=!1,d=function v(g,_){var C=oX(_),b=C[0],T=C.slice(1);if(!b)return[g];var A=g.split(b);return c=c||A.length>1,A.reduce(function(I,N){return[].concat(Et(I),Et(v(N,T)))},[]).filter(Boolean)},f=d(r,o);return c?typeof s<"u"?f.slice(0,s):f:null},Y2=y.createContext(null);function HIe(t){var r=t.visible,o=t.values;if(!r)return null;var s=50;return y.createElement("span",{"aria-live":"polite",style:{width:0,height:0,position:"absolute",overflow:"hidden",opacity:0}},"".concat(o.slice(0,s).map(function(c){var d=c.label,f=c.value;return["number","string"].includes(ln(d))?d:f}).join(", ")),o.length>s?", ...":null)}var zIe=["id","prefixCls","className","showSearch","tagRender","direction","omitDomProps","displayValues","onDisplayValuesChange","emptyOptions","notFoundContent","onClear","mode","disabled","loading","getInputElement","getRawInputElement","open","defaultOpen","onDropdownVisibleChange","activeValue","onActiveValueChange","activeDescendantId","searchValue","autoClearSearchValue","onSearch","onSearchSplit","tokenSeparators","allowClear","prefix","suffixIcon","clearIcon","OptionList","animation","transitionName","dropdownStyle","dropdownClassName","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","placement","builtinPlacements","getPopupContainer","showAction","onFocus","onBlur","onKeyUp","onKeyDown","onMouseDown"],WIe=["value","onChange","removeIcon","placeholder","autoFocus","maxTagCount","maxTagTextLength","maxTagPlaceholder","choiceTransitionName","onInputKeyDown","onPopupScroll","tabIndex"],rD=function(r){return r==="tags"||r==="multiple"},GIe=y.forwardRef(function(t,r){var o,s=t.id,c=t.prefixCls,d=t.className,f=t.showSearch,v=t.tagRender,g=t.direction,_=t.omitDomProps,C=t.displayValues,b=t.onDisplayValuesChange,T=t.emptyOptions,A=t.notFoundContent,I=A===void 0?"Not Found":A,N=t.onClear,P=t.mode,D=t.disabled,x=t.loading,L=t.getInputElement,M=t.getRawInputElement,F=t.open,V=t.defaultOpen,$=t.onDropdownVisibleChange,z=t.activeValue,K=t.onActiveValueChange,G=t.activeDescendantId,J=t.searchValue,ne=t.autoClearSearchValue,te=t.onSearch,ce=t.onSearchSplit,ge=t.tokenSeparators,oe=t.allowClear,ae=t.prefix,ie=t.suffixIcon,ve=t.clearIcon,me=t.OptionList,le=t.animation,de=t.transitionName,Ee=t.dropdownStyle,se=t.dropdownClassName,Te=t.dropdownMatchSelectWidth,we=t.dropdownRender,Le=t.dropdownAlign,Ie=t.placement,De=t.builtinPlacements,Ye=t.getPopupContainer,Me=t.showAction,Oe=Me===void 0?[]:Me,$e=t.onFocus,tt=t.onBlur,je=t.onKeyUp,ke=t.onKeyDown,dt=t.onMouseDown,Ze=xn(t,zIe),ut=rD(P),Tt=(f!==void 0?f:ut)||P==="combobox",pt=_e({},Ze);WIe.forEach(function(qt){delete pt[qt]}),_==null||_.forEach(function(qt){delete pt[qt]});var ht=y.useState(!1),qe=Ue(ht,2),Je=qe[0],Ct=qe[1];y.useEffect(function(){Ct(xJ())},[]);var Nt=y.useRef(null),Ot=y.useRef(null),on=y.useRef(null),Vt=y.useRef(null),kt=y.useRef(null),Kt=y.useRef(!1),Zt=Zwe(),Ft=Ue(Zt,3),_t=Ft[0],At=Ft[1],mt=Ft[2];y.useImperativeHandle(r,function(){var qt,Ut;return{focus:(qt=Vt.current)===null||qt===void 0?void 0:qt.focus,blur:(Ut=Vt.current)===null||Ut===void 0?void 0:Ut.blur,scrollTo:function(Cr){var $r;return($r=kt.current)===null||$r===void 0?void 0:$r.scrollTo(Cr)},nativeElement:Nt.current||Ot.current}});var Pt=y.useMemo(function(){var qt;if(P!=="combobox")return J;var Ut=(qt=C[0])===null||qt===void 0?void 0:qt.value;return typeof Ut=="string"||typeof Ut=="number"?String(Ut):""},[J,P,C]),gn=P==="combobox"&&typeof L=="function"&&L()||null,Mn=typeof M=="function"&&M(),pi=xm(Ot,Mn==null||(o=Mn.props)===null||o===void 0?void 0:o.ref),Zr=y.useState(!1),Si=Ue(Zr,2),Dr=Si[0],Gn=Si[1];Rr(function(){Gn(!0)},[]);var Ir=Sa(!1,{defaultValue:V,value:F}),vn=Ue(Ir,2),Qt=vn[0],Dt=vn[1],bt=Dr?Qt:!1,un=!I&&T;(D||un&&bt&&P==="combobox")&&(bt=!1);var Sn=un?!1:bt,ft=y.useCallback(function(qt){var Ut=qt!==void 0?qt:!bt;D||(Dt(Ut),bt!==Ut&&($==null||$(Ut)))},[D,bt,Dt,$]),gt=y.useMemo(function(){return(ge||[]).some(function(qt){return[`
`,`\r
`].includes(qt)})},[ge]),Wt=y.useContext(Y2)||{},Yt=Wt.maxCount,jt=Wt.rawValues,dn=function(Ut,yr,Cr){if(!(ut&&tD(Yt)&&(jt==null?void 0:jt.size)>=Yt)){var $r=!0,ci=Ut;K==null||K(null);var Go=$Ie(Ut,ge,tD(Yt)?Yt-jt.size:void 0),go=Cr?null:Go;return P!=="combobox"&&go&&(ci="",ce==null||ce(go),ft(!1),$r=!1),te&&Pt!==ci&&te(ci,{source:yr?"typing":"effect"}),$r}},ar=function(Ut){!Ut||!Ut.trim()||te(Ut,{source:"submit"})};y.useEffect(function(){!bt&&!ut&&P!=="combobox"&&dn("",!1,!1)},[bt]),y.useEffect(function(){Qt&&D&&Dt(!1),D&&!Kt.current&&At(!1)},[D]);var Xn=PJ(),$n=Ue(Xn,2),nr=$n[0],Wr=$n[1],ai=y.useRef(!1),si=function(Ut){var yr=nr(),Cr=Ut.key,$r=Cr==="Enter";if($r&&(P!=="combobox"&&Ut.preventDefault(),bt||ft(!0)),Wr(!!Pt),Cr==="Backspace"&&!yr&&ut&&!Pt&&C.length){for(var ci=Et(C),Go=null,go=ci.length-1;go>=0;go-=1){var vo=ci[go];if(!vo.disabled){ci.splice(go,1),Go=vo;break}}Go&&b(ci,{type:"remove",values:[Go]})}for(var Eo=arguments.length,_o=new Array(Eo>1?Eo-1:0),Fa=1;Fa<Eo;Fa++)_o[Fa-1]=arguments[Fa];if(bt&&(!$r||!ai.current)){var So;$r&&(ai.current=!0),(So=kt.current)===null||So===void 0||So.onKeyDown.apply(So,[Ut].concat(_o))}ke==null||ke.apply(void 0,[Ut].concat(_o))},Vi=function(Ut){for(var yr=arguments.length,Cr=new Array(yr>1?yr-1:0),$r=1;$r<yr;$r++)Cr[$r-1]=arguments[$r];if(bt){var ci;(ci=kt.current)===null||ci===void 0||ci.onKeyUp.apply(ci,[Ut].concat(Cr))}Ut.key==="Enter"&&(ai.current=!1),je==null||je.apply(void 0,[Ut].concat(Cr))},Fr=function(Ut){var yr=C.filter(function(Cr){return Cr!==Ut});b(yr,{type:"remove",values:[Ut]})},Lr=function(){ai.current=!1},St=y.useRef(!1),Gt=function(){At(!0),D||($e&&!St.current&&$e.apply(void 0,arguments),Oe.includes("focus")&&ft(!0)),St.current=!0},cn=function(){Kt.current=!0,At(!1,function(){St.current=!1,Kt.current=!1,ft(!1)}),!D&&(Pt&&(P==="tags"?te(Pt,{source:"submit"}):P==="multiple"&&te("",{source:"blur"})),tt&&tt.apply(void 0,arguments))},Ln=[];y.useEffect(function(){return function(){Ln.forEach(function(qt){return clearTimeout(qt)}),Ln.splice(0,Ln.length)}},[]);var ur=function(Ut){var yr,Cr=Ut.target,$r=(yr=on.current)===null||yr===void 0?void 0:yr.getPopupElement();if($r&&$r.contains(Cr)){var ci=setTimeout(function(){var Eo=Ln.indexOf(ci);if(Eo!==-1&&Ln.splice(Eo,1),mt(),!Je&&!$r.contains(document.activeElement)){var _o;(_o=Vt.current)===null||_o===void 0||_o.focus()}});Ln.push(ci)}for(var Go=arguments.length,go=new Array(Go>1?Go-1:0),vo=1;vo<Go;vo++)go[vo-1]=arguments[vo];dt==null||dt.apply(void 0,[Ut].concat(go))},Jn=y.useState({}),ji=Ue(Jn,2),ka=ji[1];function an(){ka({})}var Pn;Mn&&(Pn=function(Ut){ft(Ut)}),eIe(function(){var qt;return[Nt.current,(qt=on.current)===null||qt===void 0?void 0:qt.getPopupElement()]},Sn,ft,!!Mn);var Hn=y.useMemo(function(){return _e(_e({},t),{},{notFoundContent:I,open:bt,triggerOpen:Sn,id:s,showSearch:Tt,multiple:ut,toggleOpen:ft})},[t,I,Sn,bt,s,Tt,ut,ft]),yi=!!ie||x,Ho;yi&&(Ho=y.createElement(bT,{className:Ke("".concat(c,"-arrow"),be({},"".concat(c,"-arrow-loading"),x)),customizeIcon:ie,customizeIconProps:{loading:x,searchValue:Pt,open:bt,focused:_t,showSearch:Tt}}));var rl=function(){var Ut;N==null||N(),(Ut=Vt.current)===null||Ut===void 0||Ut.focus(),b([],{type:"clear",values:C}),dn("",!1,!1)},xo=Jwe(c,rl,C,oe,ve,D,Pt,P),zo=xo.allowClear,Wo=xo.clearIcon,Ma=y.createElement(me,{ref:kt}),oa=Ke(c,d,be(be(be(be(be(be(be(be(be(be({},"".concat(c,"-focused"),_t),"".concat(c,"-multiple"),ut),"".concat(c,"-single"),!ut),"".concat(c,"-allow-clear"),oe),"".concat(c,"-show-arrow"),yi),"".concat(c,"-disabled"),D),"".concat(c,"-loading"),x),"".concat(c,"-open"),bt),"".concat(c,"-customize-input"),gn),"".concat(c,"-show-search"),Tt)),hr=y.createElement(VIe,{ref:on,disabled:D,prefixCls:c,visible:Sn,popupElement:Ma,animation:le,transitionName:de,dropdownStyle:Ee,dropdownClassName:se,direction:g,dropdownMatchSelectWidth:Te,dropdownRender:we,dropdownAlign:Le,placement:Ie,builtinPlacements:De,getPopupContainer:Ye,empty:T,getTriggerDOMNode:function(Ut){return Ot.current||Ut},onPopupVisibleChange:Pn,onPopupMouseEnter:an},Mn?y.cloneElement(Mn,{ref:pi}):y.createElement(bIe,nt({},t,{domRef:Ot,prefixCls:c,inputElement:gn,ref:Vt,id:s,prefix:ae,showSearch:Tt,autoClearSearchValue:ne,mode:P,activeDescendantId:G,tagRender:v,values:C,open:bt,onToggleOpen:ft,activeValue:z,searchValue:Pt,onSearch:dn,onSearchSubmit:ar,onRemove:Fr,tokenWithEnter:gt,onInputBlur:Lr}))),Ar;return Mn?Ar=hr:Ar=y.createElement("div",nt({className:oa},pt,{ref:Nt,onMouseDown:ur,onKeyDown:si,onKeyUp:Vi,onFocus:Gt,onBlur:cn}),y.createElement(HIe,{visible:_t&&!bt,values:C}),hr,Ho,zo&&Wo),y.createElement(NJ.Provider,{value:Hn},Ar)}),q2=function(){return null};q2.isSelectOptGroup=!0;var X2=function(){return null};X2.isSelectOption=!0;var VJ=y.forwardRef(function(t,r){var o=t.height,s=t.offsetY,c=t.offsetX,d=t.children,f=t.prefixCls,v=t.onInnerResize,g=t.innerProps,_=t.rtl,C=t.extra,b={},T={display:"flex",flexDirection:"column"};return s!==void 0&&(b={height:o,position:"relative",overflow:"hidden"},T=_e(_e({},T),{},be(be(be(be(be({transform:"translateY(".concat(s,"px)")},_?"marginRight":"marginLeft",-c),"position","absolute"),"left",0),"right",0),"top",0))),y.createElement("div",{style:b},y.createElement(Eu,{onResize:function(I){var N=I.offsetHeight;N&&v&&v()}},y.createElement("div",nt({style:T,className:Ke(be({},"".concat(f,"-holder-inner"),f)),ref:r},g),d,C)))});VJ.displayName="Filler";function KIe(t){var r=t.children,o=t.setRef,s=y.useCallback(function(c){o(c)},[]);return y.cloneElement(r,{ref:s})}function YIe(t,r,o,s,c,d,f,v){var g=v.getKey;return t.slice(r,o+1).map(function(_,C){var b=r+C,T=f(_,b,{style:{width:s},offsetX:c}),A=g(_);return y.createElement(KIe,{key:A,setRef:function(N){return d(_,N)}},T)})}function qIe(t,r,o){var s=t.length,c=r.length,d,f;if(s===0&&c===0)return null;s<c?(d=t,f=r):(d=r,f=t);var v={__EMPTY_ITEM__:!0};function g(I){return I!==void 0?o(I):v}for(var _=null,C=Math.abs(s-c)!==1,b=0;b<f.length;b+=1){var T=g(d[b]),A=g(f[b]);if(T!==A){_=b,C=C||T!==g(f[b+1]);break}}return _===null?null:{index:_,multiple:C}}function XIe(t,r,o){var s=y.useState(t),c=Ue(s,2),d=c[0],f=c[1],v=y.useState(null),g=Ue(v,2),_=g[0],C=g[1];return y.useEffect(function(){var b=qIe(d||[],t||[],r);(b==null?void 0:b.index)!==void 0&&(o==null||o(b.index),C(t[b.index])),f(t)},[t]),[_]}var Tz=(typeof navigator>"u"?"undefined":ln(navigator))==="object"&&/Firefox/i.test(navigator.userAgent);const jJ=function(t,r,o,s){var c=y.useRef(!1),d=y.useRef(null);function f(){clearTimeout(d.current),c.current=!0,d.current=setTimeout(function(){c.current=!1},50)}var v=y.useRef({top:t,bottom:r,left:o,right:s});return v.current.top=t,v.current.bottom=r,v.current.left=o,v.current.right=s,function(g,_){var C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,b=g?_<0&&v.current.left||_>0&&v.current.right:_<0&&v.current.top||_>0&&v.current.bottom;return C&&b?(clearTimeout(d.current),c.current=!1):(!b||c.current)&&f(),!c.current&&b}};function JIe(t,r,o,s,c,d,f){var v=y.useRef(0),g=y.useRef(null),_=y.useRef(null),C=y.useRef(!1),b=jJ(r,o,s,c);function T(x,L){if(ii.cancel(g.current),!b(!1,L)){var M=x;if(!M._virtualHandled)M._virtualHandled=!0;else return;v.current+=L,_.current=L,Tz||M.preventDefault(),g.current=ii(function(){var F=C.current?10:1;f(v.current*F,!1),v.current=0})}}function A(x,L){f(L,!0),Tz||x.preventDefault()}var I=y.useRef(null),N=y.useRef(null);function P(x){if(t){ii.cancel(N.current),N.current=ii(function(){I.current=null},2);var L=x.deltaX,M=x.deltaY,F=x.shiftKey,V=L,$=M;(I.current==="sx"||!I.current&&F&&M&&!L)&&(V=M,$=0,I.current="sx");var z=Math.abs(V),K=Math.abs($);I.current===null&&(I.current=d&&z>K?"x":"y"),I.current==="y"?T(x,$):A(x,V)}}function D(x){t&&(C.current=x.detail===_.current)}return[P,D]}function QIe(t,r,o,s){var c=y.useMemo(function(){return[new Map,[]]},[t,o.id,s]),d=Ue(c,2),f=d[0],v=d[1],g=function(C){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:C,T=f.get(C),A=f.get(b);if(T===void 0||A===void 0)for(var I=t.length,N=v.length;N<I;N+=1){var P,D=t[N],x=r(D);f.set(x,N);var L=(P=o.get(x))!==null&&P!==void 0?P:s;if(v[N]=(v[N-1]||0)+L,x===C&&(T=N),x===b&&(A=N),T!==void 0&&A!==void 0)break}return{top:v[T-1]||0,bottom:v[A]}};return g}var ZIe=function(){function t(){io(this,t),be(this,"maps",void 0),be(this,"id",0),be(this,"diffKeys",new Set),this.maps=Object.create(null)}return oo(t,[{key:"set",value:function(o,s){this.maps[o]=s,this.id+=1,this.diffKeys.add(o)}},{key:"get",value:function(o){return this.maps[o]}},{key:"resetRecord",value:function(){this.diffKeys.clear()}},{key:"getRecord",value:function(){return this.diffKeys}}]),t}();function Rz(t){var r=parseFloat(t);return isNaN(r)?0:r}function eAe(t,r,o){var s=y.useState(0),c=Ue(s,2),d=c[0],f=c[1],v=y.useRef(new Map),g=y.useRef(new ZIe),_=y.useRef(0);function C(){_.current+=1}function b(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;C();var I=function(){var D=!1;v.current.forEach(function(x,L){if(x&&x.offsetParent){var M=x.offsetHeight,F=getComputedStyle(x),V=F.marginTop,$=F.marginBottom,z=Rz(V),K=Rz($),G=M+z+K;g.current.get(L)!==G&&(g.current.set(L,G),D=!0)}}),D&&f(function(x){return x+1})};if(A)I();else{_.current+=1;var N=_.current;Promise.resolve().then(function(){N===_.current&&I()})}}function T(A,I){var N=t(A),P=v.current.get(N);I?(v.current.set(N,I),b()):v.current.delete(N),!P!=!I&&(I?r==null||r(A):o==null||o(A))}return y.useEffect(function(){return C},[]),[T,b,g.current,d]}var wz=14/15;function tAe(t,r,o){var s=y.useRef(!1),c=y.useRef(0),d=y.useRef(0),f=y.useRef(null),v=y.useRef(null),g,_=function(A){if(s.current){var I=Math.ceil(A.touches[0].pageX),N=Math.ceil(A.touches[0].pageY),P=c.current-I,D=d.current-N,x=Math.abs(P)>Math.abs(D);x?c.current=I:d.current=N;var L=o(x,x?P:D,!1,A);L&&A.preventDefault(),clearInterval(v.current),L&&(v.current=setInterval(function(){x?P*=wz:D*=wz;var M=Math.floor(x?P:D);(!o(x,M,!0)||Math.abs(M)<=.1)&&clearInterval(v.current)},16))}},C=function(){s.current=!1,g()},b=function(A){g(),A.touches.length===1&&!s.current&&(s.current=!0,c.current=Math.ceil(A.touches[0].pageX),d.current=Math.ceil(A.touches[0].pageY),f.current=A.target,f.current.addEventListener("touchmove",_,{passive:!1}),f.current.addEventListener("touchend",C,{passive:!0}))};g=function(){f.current&&(f.current.removeEventListener("touchmove",_),f.current.removeEventListener("touchend",C))},Rr(function(){return t&&r.current.addEventListener("touchstart",b,{passive:!0}),function(){var T;(T=r.current)===null||T===void 0||T.removeEventListener("touchstart",b),g(),clearInterval(v.current)}},[t])}function Iz(t){return Math.floor(Math.pow(t,.5))}function iD(t,r){var o="touches"in t?t.touches[0]:t;return o[r?"pageX":"pageY"]-window[r?"scrollX":"scrollY"]}function nAe(t,r,o){y.useEffect(function(){var s=r.current;if(t&&s){var c=!1,d,f,v=function(){ii.cancel(d)},g=function T(){v(),d=ii(function(){o(f),T()})},_=function(A){if(!A.target.draggable){var I=A;I._virtualHandled||(I._virtualHandled=!0,c=!0)}},C=function(){c=!1,v()},b=function(A){if(c){var I=iD(A,!1),N=s.getBoundingClientRect(),P=N.top,D=N.bottom;if(I<=P){var x=P-I;f=-Iz(x),g()}else if(I>=D){var L=I-D;f=Iz(L),g()}else v()}};return s.addEventListener("mousedown",_),s.ownerDocument.addEventListener("mouseup",C),s.ownerDocument.addEventListener("mousemove",b),function(){s.removeEventListener("mousedown",_),s.ownerDocument.removeEventListener("mouseup",C),s.ownerDocument.removeEventListener("mousemove",b),v()}}},[t])}var rAe=10;function iAe(t,r,o,s,c,d,f,v){var g=y.useRef(),_=y.useState(null),C=Ue(_,2),b=C[0],T=C[1];return Rr(function(){if(b&&b.times<rAe){if(!t.current){T(function(ve){return _e({},ve)});return}d();var A=b.targetAlign,I=b.originAlign,N=b.index,P=b.offset,D=t.current.clientHeight,x=!1,L=A,M=null;if(D){for(var F=A||I,V=0,$=0,z=0,K=Math.min(r.length-1,N),G=0;G<=K;G+=1){var J=c(r[G]);$=V;var ne=o.get(J);z=$+(ne===void 0?s:ne),V=z}for(var te=F==="top"?P:D-P,ce=K;ce>=0;ce-=1){var ge=c(r[ce]),oe=o.get(ge);if(oe===void 0){x=!0;break}if(te-=oe,te<=0)break}switch(F){case"top":M=$-P;break;case"bottom":M=z-D+P;break;default:{var ae=t.current.scrollTop,ie=ae+D;$<ae?L="top":z>ie&&(L="bottom")}}M!==null&&f(M),M!==b.lastTop&&(x=!0)}x&&T(_e(_e({},b),{},{times:b.times+1,targetAlign:L,lastTop:M}))}},[b,t.current]),function(A){if(A==null){v();return}if(ii.cancel(g.current),typeof A=="number")f(A);else if(A&&ln(A)==="object"){var I,N=A.align;"index"in A?I=A.index:I=r.findIndex(function(x){return c(x)===A.key});var P=A.offset,D=P===void 0?0:P;T({times:0,index:I,offset:D,originAlign:N})}}}var Az=y.forwardRef(function(t,r){var o=t.prefixCls,s=t.rtl,c=t.scrollOffset,d=t.scrollRange,f=t.onStartMove,v=t.onStopMove,g=t.onScroll,_=t.horizontal,C=t.spinSize,b=t.containerSize,T=t.style,A=t.thumbStyle,I=t.showScrollBar,N=y.useState(!1),P=Ue(N,2),D=P[0],x=P[1],L=y.useState(null),M=Ue(L,2),F=M[0],V=M[1],$=y.useState(null),z=Ue($,2),K=z[0],G=z[1],J=!s,ne=y.useRef(),te=y.useRef(),ce=y.useState(I),ge=Ue(ce,2),oe=ge[0],ae=ge[1],ie=y.useRef(),ve=function(){I===!0||I===!1||(clearTimeout(ie.current),ae(!0),ie.current=setTimeout(function(){ae(!1)},3e3))},me=d-b||0,le=b-C||0,de=y.useMemo(function(){if(c===0||me===0)return 0;var Me=c/me;return Me*le},[c,me,le]),Ee=function(Oe){Oe.stopPropagation(),Oe.preventDefault()},se=y.useRef({top:de,dragging:D,pageY:F,startTop:K});se.current={top:de,dragging:D,pageY:F,startTop:K};var Te=function(Oe){x(!0),V(iD(Oe,_)),G(se.current.top),f(),Oe.stopPropagation(),Oe.preventDefault()};y.useEffect(function(){var Me=function(je){je.preventDefault()},Oe=ne.current,$e=te.current;return Oe.addEventListener("touchstart",Me,{passive:!1}),$e.addEventListener("touchstart",Te,{passive:!1}),function(){Oe.removeEventListener("touchstart",Me),$e.removeEventListener("touchstart",Te)}},[]);var we=y.useRef();we.current=me;var Le=y.useRef();Le.current=le,y.useEffect(function(){if(D){var Me,Oe=function(je){var ke=se.current,dt=ke.dragging,Ze=ke.pageY,ut=ke.startTop;ii.cancel(Me);var Tt=ne.current.getBoundingClientRect(),pt=b/(_?Tt.width:Tt.height);if(dt){var ht=(iD(je,_)-Ze)*pt,qe=ut;!J&&_?qe-=ht:qe+=ht;var Je=we.current,Ct=Le.current,Nt=Ct?qe/Ct:0,Ot=Math.ceil(Nt*Je);Ot=Math.max(Ot,0),Ot=Math.min(Ot,Je),Me=ii(function(){g(Ot,_)})}},$e=function(){x(!1),v()};return window.addEventListener("mousemove",Oe,{passive:!0}),window.addEventListener("touchmove",Oe,{passive:!0}),window.addEventListener("mouseup",$e,{passive:!0}),window.addEventListener("touchend",$e,{passive:!0}),function(){window.removeEventListener("mousemove",Oe),window.removeEventListener("touchmove",Oe),window.removeEventListener("mouseup",$e),window.removeEventListener("touchend",$e),ii.cancel(Me)}}},[D]),y.useEffect(function(){return ve(),function(){clearTimeout(ie.current)}},[c]),y.useImperativeHandle(r,function(){return{delayHidden:ve}});var Ie="".concat(o,"-scrollbar"),De={position:"absolute",visibility:oe?null:"hidden"},Ye={position:"absolute",background:"rgba(0, 0, 0, 0.5)",borderRadius:99,cursor:"pointer",userSelect:"none"};return _?(De.height=8,De.left=0,De.right=0,De.bottom=0,Ye.height="100%",Ye.width=C,J?Ye.left=de:Ye.right=de):(De.width=8,De.top=0,De.bottom=0,J?De.right=0:De.left=0,Ye.width="100%",Ye.height=C,Ye.top=de),y.createElement("div",{ref:ne,className:Ke(Ie,be(be(be({},"".concat(Ie,"-horizontal"),_),"".concat(Ie,"-vertical"),!_),"".concat(Ie,"-visible"),oe)),style:_e(_e({},De),T),onMouseDown:Ee,onMouseMove:ve},y.createElement("div",{ref:te,className:Ke("".concat(Ie,"-thumb"),be({},"".concat(Ie,"-thumb-moving"),D)),style:_e(_e({},Ye),A),onMouseDown:Te}))}),oAe=20;function Oz(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=t/r*t;return isNaN(o)&&(o=0),o=Math.max(o,oAe),Math.floor(o)}var aAe=["prefixCls","className","height","itemHeight","fullHeight","style","data","children","itemKey","virtual","direction","scrollWidth","component","onScroll","onVirtualScroll","onVisibleChange","innerProps","extraRender","styles","showScrollBar"],sAe=[],cAe={overflowY:"auto",overflowAnchor:"none"};function lAe(t,r){var o=t.prefixCls,s=o===void 0?"rc-virtual-list":o,c=t.className,d=t.height,f=t.itemHeight,v=t.fullHeight,g=v===void 0?!0:v,_=t.style,C=t.data,b=t.children,T=t.itemKey,A=t.virtual,I=t.direction,N=t.scrollWidth,P=t.component,D=P===void 0?"div":P,x=t.onScroll,L=t.onVirtualScroll,M=t.onVisibleChange,F=t.innerProps,V=t.extraRender,$=t.styles,z=t.showScrollBar,K=z===void 0?"optional":z,G=xn(t,aAe),J=y.useCallback(function(St){return typeof T=="function"?T(St):St==null?void 0:St[T]},[T]),ne=eAe(J,null,null),te=Ue(ne,4),ce=te[0],ge=te[1],oe=te[2],ae=te[3],ie=!!(A!==!1&&d&&f),ve=y.useMemo(function(){return Object.values(oe.maps).reduce(function(St,Gt){return St+Gt},0)},[oe.id,oe.maps]),me=ie&&C&&(Math.max(f*C.length,ve)>d||!!N),le=I==="rtl",de=Ke(s,be({},"".concat(s,"-rtl"),le),c),Ee=C||sAe,se=y.useRef(),Te=y.useRef(),we=y.useRef(),Le=y.useState(0),Ie=Ue(Le,2),De=Ie[0],Ye=Ie[1],Me=y.useState(0),Oe=Ue(Me,2),$e=Oe[0],tt=Oe[1],je=y.useState(!1),ke=Ue(je,2),dt=ke[0],Ze=ke[1],ut=function(){Ze(!0)},Tt=function(){Ze(!1)},pt={getKey:J};function ht(St){Ye(function(Gt){var cn;typeof St=="function"?cn=St(Gt):cn=St;var Ln=Gn(cn);return se.current.scrollTop=Ln,Ln})}var qe=y.useRef({start:0,end:Ee.length}),Je=y.useRef(),Ct=XIe(Ee,J),Nt=Ue(Ct,1),Ot=Nt[0];Je.current=Ot;var on=y.useMemo(function(){if(!ie)return{scrollHeight:void 0,start:0,end:Ee.length-1,offset:void 0};if(!me){var St;return{scrollHeight:((St=Te.current)===null||St===void 0?void 0:St.offsetHeight)||0,start:0,end:Ee.length-1,offset:void 0}}for(var Gt=0,cn,Ln,ur,Jn=Ee.length,ji=0;ji<Jn;ji+=1){var ka=Ee[ji],an=J(ka),Pn=oe.get(an),Hn=Gt+(Pn===void 0?f:Pn);Hn>=De&&cn===void 0&&(cn=ji,Ln=Gt),Hn>De+d&&ur===void 0&&(ur=ji),Gt=Hn}return cn===void 0&&(cn=0,Ln=0,ur=Math.ceil(d/f)),ur===void 0&&(ur=Ee.length-1),ur=Math.min(ur+1,Ee.length-1),{scrollHeight:Gt,start:cn,end:ur,offset:Ln}},[me,ie,De,Ee,ae,d]),Vt=on.scrollHeight,kt=on.start,Kt=on.end,Zt=on.offset;qe.current.start=kt,qe.current.end=Kt,y.useLayoutEffect(function(){var St=oe.getRecord();if(St.size===1){var Gt=Array.from(St)[0],cn=Ee[kt];if(cn){var Ln=J(cn);if(Ln===Gt){var ur=oe.get(Gt),Jn=ur-f;ht(function(ji){return ji+Jn})}}}oe.resetRecord()},[Vt]);var Ft=y.useState({width:0,height:d}),_t=Ue(Ft,2),At=_t[0],mt=_t[1],Pt=function(Gt){mt({width:Gt.offsetWidth,height:Gt.offsetHeight})},gn=y.useRef(),Mn=y.useRef(),pi=y.useMemo(function(){return Oz(At.width,N)},[At.width,N]),Zr=y.useMemo(function(){return Oz(At.height,Vt)},[At.height,Vt]),Si=Vt-d,Dr=y.useRef(Si);Dr.current=Si;function Gn(St){var Gt=St;return Number.isNaN(Dr.current)||(Gt=Math.min(Gt,Dr.current)),Gt=Math.max(Gt,0),Gt}var Ir=De<=0,vn=De>=Si,Qt=$e<=0,Dt=$e>=N,bt=jJ(Ir,vn,Qt,Dt),un=function(){return{x:le?-$e:$e,y:De}},Sn=y.useRef(un()),ft=ho(function(St){if(L){var Gt=_e(_e({},un()),St);(Sn.current.x!==Gt.x||Sn.current.y!==Gt.y)&&(L(Gt),Sn.current=Gt)}});function gt(St,Gt){var cn=St;Gt?(Ml.flushSync(function(){tt(cn)}),ft()):ht(cn)}function Wt(St){var Gt=St.currentTarget.scrollTop;Gt!==De&&ht(Gt),x==null||x(St),ft()}var Yt=function(Gt){var cn=Gt,Ln=N?N-At.width:0;return cn=Math.max(cn,0),cn=Math.min(cn,Ln),cn},jt=ho(function(St,Gt){Gt?(Ml.flushSync(function(){tt(function(cn){var Ln=cn+(le?-St:St);return Yt(Ln)})}),ft()):ht(function(cn){var Ln=cn+St;return Ln})}),dn=JIe(ie,Ir,vn,Qt,Dt,!!N,jt),ar=Ue(dn,2),Xn=ar[0],$n=ar[1];tAe(ie,se,function(St,Gt,cn,Ln){var ur=Ln;return bt(St,Gt,cn)?!1:!ur||!ur._virtualHandled?(ur&&(ur._virtualHandled=!0),Xn({preventDefault:function(){},deltaX:St?Gt:0,deltaY:St?0:Gt}),!0):!1}),nAe(me,se,function(St){ht(function(Gt){return Gt+St})}),Rr(function(){function St(cn){var Ln=Ir&&cn.detail<0,ur=vn&&cn.detail>0;ie&&!Ln&&!ur&&cn.preventDefault()}var Gt=se.current;return Gt.addEventListener("wheel",Xn,{passive:!1}),Gt.addEventListener("DOMMouseScroll",$n,{passive:!0}),Gt.addEventListener("MozMousePixelScroll",St,{passive:!1}),function(){Gt.removeEventListener("wheel",Xn),Gt.removeEventListener("DOMMouseScroll",$n),Gt.removeEventListener("MozMousePixelScroll",St)}},[ie,Ir,vn]),Rr(function(){if(N){var St=Yt($e);tt(St),ft({x:St})}},[At.width,N]);var nr=function(){var Gt,cn;(Gt=gn.current)===null||Gt===void 0||Gt.delayHidden(),(cn=Mn.current)===null||cn===void 0||cn.delayHidden()},Wr=iAe(se,Ee,oe,f,J,function(){return ge(!0)},ht,nr);y.useImperativeHandle(r,function(){return{nativeElement:we.current,getScrollInfo:un,scrollTo:function(Gt){function cn(Ln){return Ln&&ln(Ln)==="object"&&("left"in Ln||"top"in Ln)}cn(Gt)?(Gt.left!==void 0&&tt(Yt(Gt.left)),Wr(Gt.top)):Wr(Gt)}}}),Rr(function(){if(M){var St=Ee.slice(kt,Kt+1);M(St,Ee)}},[kt,Kt,Ee]);var ai=QIe(Ee,J,oe,f),si=V==null?void 0:V({start:kt,end:Kt,virtual:me,offsetX:$e,offsetY:Zt,rtl:le,getSize:ai}),Vi=YIe(Ee,kt,Kt,N,$e,ce,b,pt),Fr=null;d&&(Fr=_e(be({},g?"height":"maxHeight",d),cAe),ie&&(Fr.overflowY="hidden",N&&(Fr.overflowX="hidden"),dt&&(Fr.pointerEvents="none")));var Lr={};return le&&(Lr.dir="rtl"),y.createElement("div",nt({ref:we,style:_e(_e({},_),{},{position:"relative"}),className:de},Lr,G),y.createElement(Eu,{onResize:Pt},y.createElement(D,{className:"".concat(s,"-holder"),style:Fr,ref:se,onScroll:Wt,onMouseEnter:nr},y.createElement(VJ,{prefixCls:s,height:Vt,offsetX:$e,offsetY:Zt,scrollWidth:N,onInnerResize:ge,ref:Te,innerProps:F,rtl:le,extra:si},Vi))),me&&Vt>d&&y.createElement(Az,{ref:gn,prefixCls:s,scrollOffset:De,scrollRange:Vt,rtl:le,onScroll:gt,onStartMove:ut,onStopMove:Tt,spinSize:Zr,containerSize:At.height,style:$==null?void 0:$.verticalScrollBar,thumbStyle:$==null?void 0:$.verticalScrollBarThumb,showScrollBar:K}),me&&N>At.width&&y.createElement(Az,{ref:Mn,prefixCls:s,scrollOffset:$e,scrollRange:N,rtl:le,onScroll:gt,onStartMove:ut,onStopMove:Tt,spinSize:pi,containerSize:At.width,horizontal:!0,style:$==null?void 0:$.horizontalScrollBar,thumbStyle:$==null?void 0:$.horizontalScrollBarThumb,showScrollBar:K}))}var $J=y.forwardRef(lAe);$J.displayName="List";function uAe(){return/(mac\sos|macintosh)/i.test(navigator.appVersion)}var dAe=["disabled","title","children","style","className"];function xz(t){return typeof t=="string"||typeof t=="number"}var hAe=function(r,o){var s=Qwe(),c=s.prefixCls,d=s.id,f=s.open,v=s.multiple,g=s.mode,_=s.searchValue,C=s.toggleOpen,b=s.notFoundContent,T=s.onPopupScroll,A=y.useContext(Y2),I=A.maxCount,N=A.flattenOptions,P=A.onActiveValue,D=A.defaultActiveFirstOption,x=A.onSelect,L=A.menuItemSelectedIcon,M=A.rawValues,F=A.fieldNames,V=A.virtual,$=A.direction,z=A.listHeight,K=A.listItemHeight,G=A.optionRender,J="".concat(c,"-item"),ne=Yv(function(){return N},[f,N],function(Me,Oe){return Oe[0]&&Me[1]!==Oe[1]}),te=y.useRef(null),ce=y.useMemo(function(){return v&&tD(I)&&(M==null?void 0:M.size)>=I},[v,I,M==null?void 0:M.size]),ge=function(Oe){Oe.preventDefault()},oe=function(Oe){var $e;($e=te.current)===null||$e===void 0||$e.scrollTo(typeof Oe=="number"?{index:Oe}:Oe)},ae=y.useCallback(function(Me){return g==="combobox"?!1:M.has(Me)},[g,Et(M).toString(),M.size]),ie=function(Oe){for(var $e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,tt=ne.length,je=0;je<tt;je+=1){var ke=(Oe+je*$e+tt)%tt,dt=ne[ke]||{},Ze=dt.group,ut=dt.data;if(!Ze&&!(ut!=null&&ut.disabled)&&(ae(ut.value)||!ce))return ke}return-1},ve=y.useState(function(){return ie(0)}),me=Ue(ve,2),le=me[0],de=me[1],Ee=function(Oe){var $e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;de(Oe);var tt={source:$e?"keyboard":"mouse"},je=ne[Oe];if(!je){P(null,-1,tt);return}P(je.value,Oe,tt)};y.useEffect(function(){Ee(D!==!1?ie(0):-1)},[ne.length,_]);var se=y.useCallback(function(Me){return g==="combobox"?String(Me).toLowerCase()===_.toLowerCase():M.has(Me)},[g,_,Et(M).toString(),M.size]);y.useEffect(function(){var Me=setTimeout(function(){if(!v&&f&&M.size===1){var $e=Array.from(M)[0],tt=ne.findIndex(function(je){var ke=je.data;return ke.value===$e});tt!==-1&&(Ee(tt),oe(tt))}});if(f){var Oe;(Oe=te.current)===null||Oe===void 0||Oe.scrollTo(void 0)}return function(){return clearTimeout(Me)}},[f,_]);var Te=function(Oe){Oe!==void 0&&x(Oe,{selected:!M.has(Oe)}),v||C(!1)};if(y.useImperativeHandle(o,function(){return{onKeyDown:function(Oe){var $e=Oe.which,tt=Oe.ctrlKey;switch($e){case lt.N:case lt.P:case lt.UP:case lt.DOWN:{var je=0;if($e===lt.UP?je=-1:$e===lt.DOWN?je=1:uAe()&&tt&&($e===lt.N?je=1:$e===lt.P&&(je=-1)),je!==0){var ke=ie(le+je,je);oe(ke),Ee(ke,!0)}break}case lt.TAB:case lt.ENTER:{var dt,Ze=ne[le];Ze&&!(Ze!=null&&(dt=Ze.data)!==null&&dt!==void 0&&dt.disabled)&&!ce?Te(Ze.value):Te(void 0),f&&Oe.preventDefault();break}case lt.ESC:C(!1),f&&Oe.stopPropagation()}},onKeyUp:function(){},scrollTo:function(Oe){oe(Oe)}}}),ne.length===0)return y.createElement("div",{role:"listbox",id:"".concat(d,"_list"),className:"".concat(J,"-empty"),onMouseDown:ge},b);var we=Object.keys(F).map(function(Me){return F[Me]}),Le=function(Oe){return Oe.label};function Ie(Me,Oe){var $e=Me.group;return{role:$e?"presentation":"option",id:"".concat(d,"_list_").concat(Oe)}}var De=function(Oe){var $e=ne[Oe];if(!$e)return null;var tt=$e.data||{},je=tt.value,ke=$e.group,dt=Wh(tt,!0),Ze=Le($e);return $e?y.createElement("div",nt({"aria-label":typeof Ze=="string"&&!ke?Ze:null},dt,{key:Oe},Ie($e,Oe),{"aria-selected":se(je)}),je):null},Ye={role:"listbox",id:"".concat(d,"_list")};return y.createElement(y.Fragment,null,V&&y.createElement("div",nt({},Ye,{style:{height:0,width:0,overflow:"hidden"}}),De(le-1),De(le),De(le+1)),y.createElement($J,{itemKey:"key",ref:te,data:ne,height:z,itemHeight:K,fullHeight:!1,onMouseDown:ge,onScroll:T,virtual:V,direction:$,innerProps:V?null:Ye},function(Me,Oe){var $e=Me.group,tt=Me.groupOption,je=Me.data,ke=Me.label,dt=Me.value,Ze=je.key;if($e){var ut,Tt=(ut=je.title)!==null&&ut!==void 0?ut:xz(ke)?ke.toString():void 0;return y.createElement("div",{className:Ke(J,"".concat(J,"-group"),je.className),title:Tt},ke!==void 0?ke:Ze)}var pt=je.disabled,ht=je.title;je.children;var qe=je.style,Je=je.className,Ct=xn(je,dAe),Nt=ia(Ct,we),Ot=ae(dt),on=pt||!Ot&&ce,Vt="".concat(J,"-option"),kt=Ke(J,Vt,Je,be(be(be(be({},"".concat(Vt,"-grouped"),tt),"".concat(Vt,"-active"),le===Oe&&!on),"".concat(Vt,"-disabled"),on),"".concat(Vt,"-selected"),Ot)),Kt=Le(Me),Zt=!L||typeof L=="function"||Ot,Ft=typeof Kt=="number"?Kt:Kt||dt,_t=xz(Ft)?Ft.toString():void 0;return ht!==void 0&&(_t=ht),y.createElement("div",nt({},Wh(Nt),V?{}:Ie(Me,Oe),{"aria-selected":se(dt),className:kt,title:_t,onMouseMove:function(){le===Oe||on||Ee(Oe)},onClick:function(){on||Te(dt)},style:qe}),y.createElement("div",{className:"".concat(Vt,"-content")},typeof G=="function"?G(Me,{index:Oe}):Ft),y.isValidElement(L)||Ot,Zt&&y.createElement(bT,{className:"".concat(J,"-option-state"),customizeIcon:L,customizeIconProps:{value:dt,disabled:on,isSelected:Ot}},Ot?"✓":null))}))},fAe=y.forwardRef(hAe);const pAe=function(t,r){var o=y.useRef({values:new Map,options:new Map}),s=y.useMemo(function(){var d=o.current,f=d.values,v=d.options,g=t.map(function(b){if(b.label===void 0){var T;return _e(_e({},b),{},{label:(T=f.get(b.value))===null||T===void 0?void 0:T.label})}return b}),_=new Map,C=new Map;return g.forEach(function(b){_.set(b.value,b),C.set(b.value,r.get(b.value)||v.get(b.value))}),o.current.values=_,o.current.options=C,g},[t,r]),c=y.useCallback(function(d){return r.get(d)||o.current.options.get(d)},[r]);return[s,c]};function JO(t,r){return FJ(t).join("").toUpperCase().includes(r)}const mAe=function(t,r,o,s,c){return y.useMemo(function(){if(!o||s===!1)return t;var d=r.options,f=r.label,v=r.value,g=[],_=typeof s=="function",C=o.toUpperCase(),b=_?s:function(A,I){return c?JO(I[c],C):I[d]?JO(I[f!=="children"?f:"label"],C):JO(I[v],C)},T=_?function(A){return nD(A)}:function(A){return A};return t.forEach(function(A){if(A[d]){var I=b(o,T(A));if(I)g.push(A);else{var N=A[d].filter(function(P){return b(o,T(P))});N.length&&g.push(_e(_e({},A),{},be({},d,N)))}return}b(o,T(A))&&g.push(A)}),g},[t,s,c,o,r])};var Nz=0,gAe=xa();function vAe(){var t;return gAe?(t=Nz,Nz+=1):t="TEST_OR_SSR",t}function EAe(t){var r=y.useState(),o=Ue(r,2),s=o[0],c=o[1];return y.useEffect(function(){c("rc_select_".concat(vAe()))},[]),t||s}var _Ae=["children","value"],SAe=["children"];function yAe(t){var r=t,o=r.key,s=r.props,c=s.children,d=s.value,f=xn(s,_Ae);return _e({key:o,value:d!==void 0?d:o,children:c},f)}function HJ(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return Qc(t).map(function(o,s){if(!y.isValidElement(o)||!o.type)return null;var c=o,d=c.type.isSelectOptGroup,f=c.key,v=c.props,g=v.children,_=xn(v,SAe);return r||!d?yAe(o):_e(_e({key:"__RC_SELECT_GRP__".concat(f===null?s:f,"__"),label:f},_),{},{options:HJ(g)})}).filter(function(o){return o})}var CAe=function(r,o,s,c,d){return y.useMemo(function(){var f=r,v=!r;v&&(f=HJ(o));var g=new Map,_=new Map,C=function(A,I,N){N&&typeof N=="string"&&A.set(I[N],I)},b=function T(A){for(var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,N=0;N<A.length;N+=1){var P=A[N];!P[s.options]||I?(g.set(P[s.value],P),C(_,P,s.label),C(_,P,c),C(_,P,d)):T(P[s.options],!0)}};return b(f),{options:f,valueOptions:g,labelOptions:_}},[r,o,s,c,d])};function Pz(t){var r=y.useRef();r.current=t;var o=y.useCallback(function(){return r.current.apply(r,arguments)},[]);return o}var bAe=["id","mode","prefixCls","backfill","fieldNames","inputValue","searchValue","onSearch","autoClearSearchValue","onSelect","onDeselect","dropdownMatchSelectWidth","filterOption","filterSort","optionFilterProp","optionLabelProp","options","optionRender","children","defaultActiveFirstOption","menuItemSelectedIcon","virtual","direction","listHeight","listItemHeight","labelRender","value","defaultValue","labelInValue","onChange","maxCount"],TAe=["inputValue"];function RAe(t){return!t||ln(t)!=="object"}var wAe=y.forwardRef(function(t,r){var o=t.id,s=t.mode,c=t.prefixCls,d=c===void 0?"rc-select":c,f=t.backfill,v=t.fieldNames,g=t.inputValue,_=t.searchValue,C=t.onSearch,b=t.autoClearSearchValue,T=b===void 0?!0:b,A=t.onSelect,I=t.onDeselect,N=t.dropdownMatchSelectWidth,P=N===void 0?!0:N,D=t.filterOption,x=t.filterSort,L=t.optionFilterProp,M=t.optionLabelProp,F=t.options,V=t.optionRender,$=t.children,z=t.defaultActiveFirstOption,K=t.menuItemSelectedIcon,G=t.virtual,J=t.direction,ne=t.listHeight,te=ne===void 0?200:ne,ce=t.listItemHeight,ge=ce===void 0?20:ce,oe=t.labelRender,ae=t.value,ie=t.defaultValue,ve=t.labelInValue,me=t.onChange,le=t.maxCount,de=xn(t,bAe),Ee=EAe(o),se=rD(s),Te=!!(!F&&$),we=y.useMemo(function(){return D===void 0&&s==="combobox"?!1:D},[D,s]),Le=y.useMemo(function(){return BJ(v,Te)},[JSON.stringify(v),Te]),Ie=Sa("",{value:_!==void 0?_:g,postState:function(gt){return gt||""}}),De=Ue(Ie,2),Ye=De[0],Me=De[1],Oe=CAe(F,$,Le,L,M),$e=Oe.valueOptions,tt=Oe.labelOptions,je=Oe.options,ke=y.useCallback(function(ft){var gt=FJ(ft);return gt.map(function(Wt){var Yt,jt,dn,ar,Xn;if(RAe(Wt))Yt=Wt;else{var $n;dn=Wt.key,jt=Wt.label,Yt=($n=Wt.value)!==null&&$n!==void 0?$n:dn}var nr=$e.get(Yt);if(nr){var Wr;jt===void 0&&(jt=nr==null?void 0:nr[M||Le.label]),dn===void 0&&(dn=(Wr=nr==null?void 0:nr.key)!==null&&Wr!==void 0?Wr:Yt),ar=nr==null?void 0:nr.disabled,Xn=nr==null?void 0:nr.title}return{label:jt,value:Yt,key:dn,disabled:ar,title:Xn}})},[Le,M,$e]),dt=Sa(ie,{value:ae}),Ze=Ue(dt,2),ut=Ze[0],Tt=Ze[1],pt=y.useMemo(function(){var ft,gt=se&&ut===null?[]:ut,Wt=ke(gt);return s==="combobox"&&vIe((ft=Wt[0])===null||ft===void 0?void 0:ft.value)?[]:Wt},[ut,ke,s,se]),ht=pAe(pt,$e),qe=Ue(ht,2),Je=qe[0],Ct=qe[1],Nt=y.useMemo(function(){if(!s&&Je.length===1){var ft=Je[0];if(ft.value===null&&(ft.label===null||ft.label===void 0))return[]}return Je.map(function(gt){var Wt;return _e(_e({},gt),{},{label:(Wt=typeof oe=="function"?oe(gt):gt.label)!==null&&Wt!==void 0?Wt:gt.value})})},[s,Je,oe]),Ot=y.useMemo(function(){return new Set(Je.map(function(ft){return ft.value}))},[Je]);y.useEffect(function(){if(s==="combobox"){var ft,gt=(ft=Je[0])===null||ft===void 0?void 0:ft.value;Me(gIe(gt)?String(gt):"")}},[Je]);var on=Pz(function(ft,gt){var Wt=gt??ft;return be(be({},Le.value,ft),Le.label,Wt)}),Vt=y.useMemo(function(){if(s!=="tags")return je;var ft=Et(je),gt=function(Yt){return $e.has(Yt)};return Et(Je).sort(function(Wt,Yt){return Wt.value<Yt.value?-1:1}).forEach(function(Wt){var Yt=Wt.value;gt(Yt)||ft.push(on(Yt,Wt.label))}),ft},[on,je,$e,Je,s]),kt=mAe(Vt,Le,Ye,we,L),Kt=y.useMemo(function(){return s!=="tags"||!Ye||kt.some(function(ft){return ft[L||"value"]===Ye})||kt.some(function(ft){return ft[Le.value]===Ye})?kt:[on(Ye)].concat(Et(kt))},[on,L,s,kt,Ye,Le]),Zt=function ft(gt){var Wt=Et(gt).sort(function(Yt,jt){return x(Yt,jt,{searchValue:Ye})});return Wt.map(function(Yt){return Array.isArray(Yt.options)?_e(_e({},Yt),{},{options:Yt.options.length>0?ft(Yt.options):Yt.options}):Yt})},Ft=y.useMemo(function(){return x?Zt(Kt):Kt},[Kt,x,Ye]),_t=y.useMemo(function(){return jIe(Ft,{fieldNames:Le,childrenAsData:Te})},[Ft,Le,Te]),At=function(gt){var Wt=ke(gt);if(Tt(Wt),me&&(Wt.length!==Je.length||Wt.some(function(dn,ar){var Xn;return((Xn=Je[ar])===null||Xn===void 0?void 0:Xn.value)!==(dn==null?void 0:dn.value)}))){var Yt=ve?Wt:Wt.map(function(dn){return dn.value}),jt=Wt.map(function(dn){return nD(Ct(dn.value))});me(se?Yt:Yt[0],se?jt:jt[0])}},mt=y.useState(null),Pt=Ue(mt,2),gn=Pt[0],Mn=Pt[1],pi=y.useState(0),Zr=Ue(pi,2),Si=Zr[0],Dr=Zr[1],Gn=z!==void 0?z:s!=="combobox",Ir=y.useCallback(function(ft,gt){var Wt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Yt=Wt.source,jt=Yt===void 0?"keyboard":Yt;Dr(gt),f&&s==="combobox"&&ft!==null&&jt==="keyboard"&&Mn(String(ft))},[f,s]),vn=function(gt,Wt,Yt){var jt=function(){var Fr,Lr=Ct(gt);return[ve?{label:Lr==null?void 0:Lr[Le.label],value:gt,key:(Fr=Lr==null?void 0:Lr.key)!==null&&Fr!==void 0?Fr:gt}:gt,nD(Lr)]};if(Wt&&A){var dn=jt(),ar=Ue(dn,2),Xn=ar[0],$n=ar[1];A(Xn,$n)}else if(!Wt&&I&&Yt!=="clear"){var nr=jt(),Wr=Ue(nr,2),ai=Wr[0],si=Wr[1];I(ai,si)}},Qt=Pz(function(ft,gt){var Wt,Yt=se?gt.selected:!0;Yt?Wt=se?[].concat(Et(Je),[ft]):[ft]:Wt=Je.filter(function(jt){return jt.value!==ft}),At(Wt),vn(ft,Yt),s==="combobox"?Mn(""):(!rD||T)&&(Me(""),Mn(""))}),Dt=function(gt,Wt){At(gt);var Yt=Wt.type,jt=Wt.values;(Yt==="remove"||Yt==="clear")&&jt.forEach(function(dn){vn(dn.value,!1,Yt)})},bt=function(gt,Wt){if(Me(gt),Mn(null),Wt.source==="submit"){var Yt=(gt||"").trim();if(Yt){var jt=Array.from(new Set([].concat(Et(Ot),[Yt])));At(jt),vn(Yt,!0),Me("")}return}Wt.source!=="blur"&&(s==="combobox"&&At(gt),C==null||C(gt))},un=function(gt){var Wt=gt;s!=="tags"&&(Wt=gt.map(function(jt){var dn=tt.get(jt);return dn==null?void 0:dn.value}).filter(function(jt){return jt!==void 0}));var Yt=Array.from(new Set([].concat(Et(Ot),Et(Wt))));At(Yt),Yt.forEach(function(jt){vn(jt,!0)})},Sn=y.useMemo(function(){var ft=G!==!1&&P!==!1;return _e(_e({},Oe),{},{flattenOptions:_t,onActiveValue:Ir,defaultActiveFirstOption:Gn,onSelect:Qt,menuItemSelectedIcon:K,rawValues:Ot,fieldNames:Le,virtual:ft,direction:J,listHeight:te,listItemHeight:ge,childrenAsData:Te,maxCount:le,optionRender:V})},[le,Oe,_t,Ir,Gn,Qt,K,Ot,Le,G,P,J,te,ge,Te,V]);return y.createElement(Y2.Provider,{value:Sn},y.createElement(GIe,nt({},de,{id:Ee,prefixCls:d,ref:r,omitDomProps:TAe,mode:s,displayValues:Nt,onDisplayValuesChange:Dt,direction:J,searchValue:Ye,onSearch:bt,autoClearSearchValue:T,onSearchSplit:un,dropdownMatchSelectWidth:P,OptionList:fAe,emptyOptions:!_t.length,activeValue:gn,activeDescendantId:"".concat(Ee,"_list_").concat(Si)})))}),J2=wAe;J2.Option=X2;J2.OptGroup=q2;function sb(t,r,o){return Ke({[`${t}-status-success`]:r==="success",[`${t}-status-warning`]:r==="warning",[`${t}-status-error`]:r==="error",[`${t}-status-validating`]:r==="validating",[`${t}-has-feedback`]:o})}const TT=(t,r)=>r||t,IAe=()=>{const[,t]=os(),[r]=Dm("Empty"),s=new qr(t.colorBgBase).toHsl().l<.5?{opacity:.65}:{};return y.createElement("svg",{style:s,width:"184",height:"152",viewBox:"0 0 184 152",xmlns:"http://www.w3.org/2000/svg"},y.createElement("title",null,(r==null?void 0:r.description)||"Empty"),y.createElement("g",{fill:"none",fillRule:"evenodd"},y.createElement("g",{transform:"translate(24 31.67)"},y.createElement("ellipse",{fillOpacity:".8",fill:"#F5F5F7",cx:"67.797",cy:"106.89",rx:"67.797",ry:"12.668"}),y.createElement("path",{d:"M122.034 69.674L98.109 40.229c-1.148-1.386-2.826-2.225-4.593-2.225h-51.44c-1.766 0-3.444.839-4.592 2.225L13.56 69.674v15.383h108.475V69.674z",fill:"#AEB8C2"}),y.createElement("path",{d:"M101.537 86.214L80.63 61.102c-1.001-1.207-2.507-1.867-4.048-1.867H31.724c-1.54 0-3.047.66-4.048 1.867L6.769 86.214v13.792h94.768V86.214z",fill:"url(#linearGradient-1)",transform:"translate(13.56)"}),y.createElement("path",{d:"M33.83 0h67.933a4 4 0 0 1 4 4v93.344a4 4 0 0 1-4 4H33.83a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4z",fill:"#F5F5F7"}),y.createElement("path",{d:"M42.678 9.953h50.237a2 2 0 0 1 2 2V36.91a2 2 0 0 1-2 2H42.678a2 2 0 0 1-2-2V11.953a2 2 0 0 1 2-2zM42.94 49.767h49.713a2.262 2.262 0 1 1 0 4.524H42.94a2.262 2.262 0 0 1 0-4.524zM42.94 61.53h49.713a2.262 2.262 0 1 1 0 4.525H42.94a2.262 2.262 0 0 1 0-4.525zM121.813 105.032c-.775 3.071-3.497 5.36-6.735 5.36H20.515c-3.238 0-5.96-2.29-6.734-5.36a7.309 7.309 0 0 1-.222-1.79V69.675h26.318c2.907 0 5.25 2.448 5.25 5.42v.04c0 2.971 2.37 5.37 5.277 5.37h34.785c2.907 0 5.277-2.421 5.277-5.393V75.1c0-2.972 2.343-5.426 5.25-5.426h26.318v33.569c0 .617-.077 1.216-.221 1.789z",fill:"#DCE0E6"})),y.createElement("path",{d:"M149.121 33.292l-6.83 2.65a1 1 0 0 1-1.317-1.23l1.937-6.207c-2.589-2.944-4.109-6.534-4.109-10.408C138.802 8.102 148.92 0 161.402 0 173.881 0 184 8.102 184 18.097c0 9.995-10.118 18.097-22.599 18.097-4.528 0-8.744-1.066-12.28-2.902z",fill:"#DCE0E6"}),y.createElement("g",{transform:"translate(149.65 15.383)",fill:"#FFF"},y.createElement("ellipse",{cx:"20.654",cy:"3.167",rx:"2.849",ry:"2.815"}),y.createElement("path",{d:"M5.698 5.63H0L2.898.704zM9.259.704h4.985V5.63H9.259z"}))))},AAe=IAe,OAe=()=>{const[,t]=os(),[r]=Dm("Empty"),{colorFill:o,colorFillTertiary:s,colorFillQuaternary:c,colorBgContainer:d}=t,{borderColor:f,shadowColor:v,contentColor:g}=y.useMemo(()=>({borderColor:new qr(o).onBackground(d).toHexString(),shadowColor:new qr(s).onBackground(d).toHexString(),contentColor:new qr(c).onBackground(d).toHexString()}),[o,s,c,d]);return y.createElement("svg",{width:"64",height:"41",viewBox:"0 0 64 41",xmlns:"http://www.w3.org/2000/svg"},y.createElement("title",null,(r==null?void 0:r.description)||"Empty"),y.createElement("g",{transform:"translate(0 1)",fill:"none",fillRule:"evenodd"},y.createElement("ellipse",{fill:v,cx:"32",cy:"33",rx:"32",ry:"7"}),y.createElement("g",{fillRule:"nonzero",stroke:f},y.createElement("path",{d:"M55 12.76L44.854 1.258C44.367.474 43.656 0 42.907 0H21.093c-.749 0-1.46.474-1.947 1.257L9 12.761V22h46v-9.24z"}),y.createElement("path",{d:"M41.613 15.931c0-1.605.994-2.93 2.227-2.931H55v18.137C55 33.26 53.68 35 52.05 35h-40.1C10.32 35 9 33.259 9 31.137V13h11.16c1.233 0 2.227 1.323 2.227 2.928v.022c0 1.605 1.005 2.901 2.237 2.901h14.752c1.232 0 2.237-1.308 2.237-2.913v-.007z",fill:g}))))},xAe=OAe,NAe=t=>{const{componentCls:r,margin:o,marginXS:s,marginXL:c,fontSize:d,lineHeight:f}=t;return{[r]:{marginInline:s,fontSize:d,lineHeight:f,textAlign:"center",[`${r}-image`]:{height:t.emptyImgHeight,marginBottom:s,opacity:t.opacityImage,img:{height:"100%"},svg:{maxWidth:"100%",height:"100%",margin:"auto"}},[`${r}-description`]:{color:t.colorTextDescription},[`${r}-footer`]:{marginTop:o},"&-normal":{marginBlock:c,color:t.colorTextDescription,[`${r}-description`]:{color:t.colorTextDescription},[`${r}-image`]:{height:t.emptyImgHeightMD}},"&-small":{marginBlock:s,color:t.colorTextDescription,[`${r}-image`]:{height:t.emptyImgHeightSM}}}}},PAe=Oo("Empty",t=>{const{componentCls:r,controlHeightLG:o,calc:s}=t,c=oi(t,{emptyImgCls:`${r}-img`,emptyImgHeight:s(o).mul(2.5).equal(),emptyImgHeightMD:o,emptyImgHeightSM:s(o).mul(.875).equal()});return[NAe(c)]});var DAe=globalThis&&globalThis.__rest||function(t,r){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&r.indexOf(s)<0&&(o[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(t);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(t,s[c])&&(o[s[c]]=t[s[c]]);return o};const zJ=y.createElement(AAe,null),WJ=y.createElement(xAe,null),Q2=t=>{const{className:r,rootClassName:o,prefixCls:s,image:c=zJ,description:d,children:f,imageStyle:v,style:g,classNames:_,styles:C}=t,b=DAe(t,["className","rootClassName","prefixCls","image","description","children","imageStyle","style","classNames","styles"]),{getPrefixCls:T,direction:A,className:I,style:N,classNames:P,styles:D}=Ec("empty"),x=T("empty",s),[L,M,F]=PAe(x),[V]=Dm("Empty"),$=typeof d<"u"?d:V==null?void 0:V.description,z=typeof $=="string"?$:"empty";let K=null;return typeof c=="string"?K=y.createElement("img",{alt:z,src:c}):K=c,L(y.createElement("div",Object.assign({className:Ke(M,F,x,I,{[`${x}-normal`]:c===WJ,[`${x}-rtl`]:A==="rtl"},r,o,P.root,_==null?void 0:_.root),style:Object.assign(Object.assign(Object.assign(Object.assign({},D.root),N),C==null?void 0:C.root),g)},b),y.createElement("div",{className:Ke(`${x}-image`,P.image,_==null?void 0:_.image),style:Object.assign(Object.assign(Object.assign({},v),D.image),C==null?void 0:C.image)},K),$&&y.createElement("div",{className:Ke(`${x}-description`,P.description,_==null?void 0:_.description),style:Object.assign(Object.assign({},D.description),C==null?void 0:C.description)},$),f&&y.createElement("div",{className:Ke(`${x}-footer`,P.footer,_==null?void 0:_.footer),style:Object.assign(Object.assign({},D.footer),C==null?void 0:C.footer)},f)))};Q2.PRESENTED_IMAGE_DEFAULT=zJ;Q2.PRESENTED_IMAGE_SIMPLE=WJ;const Ag=Q2,LAe=t=>{const{componentName:r}=t,{getPrefixCls:o}=y.useContext(wr),s=o("empty");switch(r){case"Table":case"List":return ze.createElement(Ag,{image:Ag.PRESENTED_IMAGE_SIMPLE});case"Select":case"TreeSelect":case"Cascader":case"Transfer":case"Mentions":return ze.createElement(Ag,{image:Ag.PRESENTED_IMAGE_SIMPLE,className:`${s}-small`});case"Table.filter":return null;default:return ze.createElement(Ag,null)}},GJ=LAe,kAe=function(t,r){let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;var s,c;const{variant:d,[t]:f}=y.useContext(wr),v=y.useContext(CJ),g=f==null?void 0:f.variant;let _;typeof r<"u"?_=r:o===!1?_="borderless":_=(c=(s=v??g)!==null&&s!==void 0?s:d)!==null&&c!==void 0?c:"outlined";const C=tCe.includes(_);return[_,C]},Z2=kAe,MAe=t=>{const o={overflow:{adjustX:!0,adjustY:!0,shiftY:!0},htmlRegion:t==="scroll"?"scroll":"visible",dynamicInset:!0};return{bottomLeft:Object.assign(Object.assign({},o),{points:["tl","bl"],offset:[0,4]}),bottomRight:Object.assign(Object.assign({},o),{points:["tr","br"],offset:[0,4]}),topLeft:Object.assign(Object.assign({},o),{points:["bl","tl"],offset:[0,-4]}),topRight:Object.assign(Object.assign({},o),{points:["br","tr"],offset:[0,-4]})}};function FAe(t,r){return t||MAe(r)}const Dz=t=>{const{optionHeight:r,optionFontSize:o,optionLineHeight:s,optionPadding:c}=t;return{position:"relative",display:"block",minHeight:r,padding:c,color:t.colorText,fontWeight:"normal",fontSize:o,lineHeight:s,boxSizing:"border-box"}},UAe=t=>{const{antCls:r,componentCls:o}=t,s=`${o}-item`,c=`&${r}-slide-up-enter${r}-slide-up-enter-active`,d=`&${r}-slide-up-appear${r}-slide-up-appear-active`,f=`&${r}-slide-up-leave${r}-slide-up-leave-active`,v=`${o}-dropdown-placement-`,g=`${s}-option-selected`;return[{[`${o}-dropdown`]:Object.assign(Object.assign({},Ps(t)),{position:"absolute",top:-9999,zIndex:t.zIndexPopup,boxSizing:"border-box",padding:t.paddingXXS,overflow:"hidden",fontSize:t.fontSize,fontVariant:"initial",backgroundColor:t.colorBgElevated,borderRadius:t.borderRadiusLG,outline:"none",boxShadow:t.boxShadowSecondary,[`
          ${c}${v}bottomLeft,
          ${d}${v}bottomLeft
        `]:{animationName:nJ},[`
          ${c}${v}topLeft,
          ${d}${v}topLeft,
          ${c}${v}topRight,
          ${d}${v}topRight
        `]:{animationName:iJ},[`${f}${v}bottomLeft`]:{animationName:rJ},[`
          ${f}${v}topLeft,
          ${f}${v}topRight
        `]:{animationName:oJ},"&-hidden":{display:"none"},[s]:Object.assign(Object.assign({},Dz(t)),{cursor:"pointer",transition:`background ${t.motionDurationSlow} ease`,borderRadius:t.borderRadiusSM,"&-group":{color:t.colorTextDescription,fontSize:t.fontSizeSM,cursor:"default"},"&-option":{display:"flex","&-content":Object.assign({flex:"auto"},ZC),"&-state":{flex:"none",display:"flex",alignItems:"center"},[`&-active:not(${s}-option-disabled)`]:{backgroundColor:t.optionActiveBg},[`&-selected:not(${s}-option-disabled)`]:{color:t.optionSelectedColor,fontWeight:t.optionSelectedFontWeight,backgroundColor:t.optionSelectedBg,[`${s}-option-state`]:{color:t.colorPrimary}},"&-disabled":{[`&${s}-option-selected`]:{backgroundColor:t.colorBgContainerDisabled},color:t.colorTextDisabled,cursor:"not-allowed"},"&-grouped":{paddingInlineStart:t.calc(t.controlPaddingHorizontal).mul(2).equal()}},"&-empty":Object.assign(Object.assign({},Dz(t)),{color:t.colorTextDisabled})}),[`${g}:has(+ ${g})`]:{borderEndStartRadius:0,borderEndEndRadius:0,[`& + ${g}`]:{borderStartStartRadius:0,borderStartEndRadius:0}},"&-rtl":{direction:"rtl"}})},ob(t,"slide-up"),ob(t,"slide-down"),K9(t,"move-up"),K9(t,"move-down")]},BAe=UAe,VAe=t=>{const{multipleSelectItemHeight:r,paddingXXS:o,lineWidth:s,INTERNAL_FIXED_ITEM_MARGIN:c}=t,d=t.max(t.calc(o).sub(s).equal(),0),f=t.max(t.calc(d).sub(c).equal(),0);return{basePadding:d,containerPadding:f,itemHeight:Xe(r),itemLineHeight:Xe(t.calc(r).sub(t.calc(t.lineWidth).mul(2)).equal())}},jAe=t=>{const{multipleSelectItemHeight:r,selectHeight:o,lineWidth:s}=t;return t.calc(o).sub(r).div(2).sub(s).equal()},$Ae=t=>{const{componentCls:r,iconCls:o,borderRadiusSM:s,motionDurationSlow:c,paddingXS:d,multipleItemColorDisabled:f,multipleItemBorderColorDisabled:v,colorIcon:g,colorIconHover:_,INTERNAL_FIXED_ITEM_MARGIN:C}=t;return{[`${r}-selection-overflow`]:{position:"relative",display:"flex",flex:"auto",flexWrap:"wrap",maxWidth:"100%","&-item":{flex:"none",alignSelf:"center",maxWidth:"100%",display:"inline-flex"},[`${r}-selection-item`]:{display:"flex",alignSelf:"center",flex:"none",boxSizing:"border-box",maxWidth:"100%",marginBlock:C,borderRadius:s,cursor:"default",transition:`font-size ${c}, line-height ${c}, height ${c}`,marginInlineEnd:t.calc(C).mul(2).equal(),paddingInlineStart:d,paddingInlineEnd:t.calc(d).div(2).equal(),[`${r}-disabled&`]:{color:f,borderColor:v,cursor:"not-allowed"},"&-content":{display:"inline-block",marginInlineEnd:t.calc(d).div(2).equal(),overflow:"hidden",whiteSpace:"pre",textOverflow:"ellipsis"},"&-remove":Object.assign(Object.assign({},Qv()),{display:"inline-flex",alignItems:"center",color:g,fontWeight:"bold",fontSize:10,lineHeight:"inherit",cursor:"pointer",[`> ${o}`]:{verticalAlign:"-0.2em"},"&:hover":{color:_}})}}}},HAe=(t,r)=>{const{componentCls:o,INTERNAL_FIXED_ITEM_MARGIN:s}=t,c=`${o}-selection-overflow`,d=t.multipleSelectItemHeight,f=jAe(t),v=r?`${o}-${r}`:"",g=VAe(t);return{[`${o}-multiple${v}`]:Object.assign(Object.assign({},$Ae(t)),{[`${o}-selector`]:{display:"flex",alignItems:"center",width:"100%",height:"100%",paddingInline:g.basePadding,paddingBlock:g.containerPadding,borderRadius:t.borderRadius,[`${o}-disabled&`]:{background:t.multipleSelectorBgDisabled,cursor:"not-allowed"},"&:after":{display:"inline-block",width:0,margin:`${Xe(s)} 0`,lineHeight:Xe(d),visibility:"hidden",content:'"\\a0"'}},[`${o}-selection-item`]:{height:g.itemHeight,lineHeight:Xe(g.itemLineHeight)},[`${o}-selection-wrap`]:{alignSelf:"flex-start","&:after":{lineHeight:Xe(d),marginBlock:s}},[`${o}-prefix`]:{marginInlineStart:t.calc(t.inputPaddingHorizontalBase).sub(g.basePadding).equal()},[`${c}-item + ${c}-item,
        ${o}-prefix + ${o}-selection-wrap
      `]:{[`${o}-selection-search`]:{marginInlineStart:0},[`${o}-selection-placeholder`]:{insetInlineStart:0}},[`${c}-item-suffix`]:{minHeight:g.itemHeight,marginBlock:s},[`${o}-selection-search`]:{display:"inline-flex",position:"relative",maxWidth:"100%",marginInlineStart:t.calc(t.inputPaddingHorizontalBase).sub(f).equal(),"\n          &-input,\n          &-mirror\n        ":{height:d,fontFamily:t.fontFamily,lineHeight:Xe(d),transition:`all ${t.motionDurationSlow}`},"&-input":{width:"100%",minWidth:4.1},"&-mirror":{position:"absolute",top:0,insetInlineStart:0,insetInlineEnd:"auto",zIndex:999,whiteSpace:"pre",visibility:"hidden"}},[`${o}-selection-placeholder`]:{position:"absolute",top:"50%",insetInlineStart:t.calc(t.inputPaddingHorizontalBase).sub(g.basePadding).equal(),insetInlineEnd:t.inputPaddingHorizontalBase,transform:"translateY(-50%)",transition:`all ${t.motionDurationSlow}`}})}};function QO(t,r){const{componentCls:o}=t,s=r?`${o}-${r}`:"",c={[`${o}-multiple${s}`]:{fontSize:t.fontSize,[`${o}-selector`]:{[`${o}-show-search&`]:{cursor:"text"}},[`
        &${o}-show-arrow ${o}-selector,
        &${o}-allow-clear ${o}-selector
      `]:{paddingInlineEnd:t.calc(t.fontSizeIcon).add(t.controlPaddingHorizontal).equal()}}};return[HAe(t,r),c]}const zAe=t=>{const{componentCls:r}=t,o=oi(t,{selectHeight:t.controlHeightSM,multipleSelectItemHeight:t.multipleItemHeightSM,borderRadius:t.borderRadiusSM,borderRadiusSM:t.borderRadiusXS}),s=oi(t,{fontSize:t.fontSizeLG,selectHeight:t.controlHeightLG,multipleSelectItemHeight:t.multipleItemHeightLG,borderRadius:t.borderRadiusLG,borderRadiusSM:t.borderRadius});return[QO(t),QO(o,"sm"),{[`${r}-multiple${r}-sm`]:{[`${r}-selection-placeholder`]:{insetInline:t.calc(t.controlPaddingHorizontalSM).sub(t.lineWidth).equal()},[`${r}-selection-search`]:{marginInlineStart:2}}},QO(s,"lg")]},WAe=zAe;function ZO(t,r){const{componentCls:o,inputPaddingHorizontalBase:s,borderRadius:c}=t,d=t.calc(t.controlHeight).sub(t.calc(t.lineWidth).mul(2)).equal(),f=r?`${o}-${r}`:"";return{[`${o}-single${f}`]:{fontSize:t.fontSize,height:t.controlHeight,[`${o}-selector`]:Object.assign(Object.assign({},Ps(t,!0)),{display:"flex",borderRadius:c,flex:"1 1 auto",[`${o}-selection-wrap:after`]:{lineHeight:Xe(d)},[`${o}-selection-search`]:{position:"absolute",inset:0,width:"100%","&-input":{width:"100%",WebkitAppearance:"textfield"}},[`
          ${o}-selection-item,
          ${o}-selection-placeholder
        `]:{display:"block",padding:0,lineHeight:Xe(d),transition:`all ${t.motionDurationSlow}, visibility 0s`,alignSelf:"center"},[`${o}-selection-placeholder`]:{transition:"none",pointerEvents:"none"},[["&:after",`${o}-selection-item:empty:after`,`${o}-selection-placeholder:empty:after`].join(",")]:{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'}}),[`
        &${o}-show-arrow ${o}-selection-item,
        &${o}-show-arrow ${o}-selection-search,
        &${o}-show-arrow ${o}-selection-placeholder
      `]:{paddingInlineEnd:t.showArrowPaddingInlineEnd},[`&${o}-open ${o}-selection-item`]:{color:t.colorTextPlaceholder},[`&:not(${o}-customize-input)`]:{[`${o}-selector`]:{width:"100%",height:"100%",alignItems:"center",padding:`0 ${Xe(s)}`,[`${o}-selection-search-input`]:{height:d,fontSize:t.fontSize},"&:after":{lineHeight:Xe(d)}}},[`&${o}-customize-input`]:{[`${o}-selector`]:{"&:after":{display:"none"},[`${o}-selection-search`]:{position:"static",width:"100%"},[`${o}-selection-placeholder`]:{position:"absolute",insetInlineStart:0,insetInlineEnd:0,padding:`0 ${Xe(s)}`,"&:after":{display:"none"}}}}}}}function GAe(t){const{componentCls:r}=t,o=t.calc(t.controlPaddingHorizontalSM).sub(t.lineWidth).equal();return[ZO(t),ZO(oi(t,{controlHeight:t.controlHeightSM,borderRadius:t.borderRadiusSM}),"sm"),{[`${r}-single${r}-sm`]:{[`&:not(${r}-customize-input)`]:{[`${r}-selector`]:{padding:`0 ${Xe(o)}`},[`&${r}-show-arrow ${r}-selection-search`]:{insetInlineEnd:t.calc(o).add(t.calc(t.fontSize).mul(1.5)).equal()},[`
            &${r}-show-arrow ${r}-selection-item,
            &${r}-show-arrow ${r}-selection-placeholder
          `]:{paddingInlineEnd:t.calc(t.fontSize).mul(1.5).equal()}}}},ZO(oi(t,{controlHeight:t.singleItemHeightLG,fontSize:t.fontSizeLG,borderRadius:t.borderRadiusLG}),"lg")]}const KAe=t=>{const{fontSize:r,lineHeight:o,lineWidth:s,controlHeight:c,controlHeightSM:d,controlHeightLG:f,paddingXXS:v,controlPaddingHorizontal:g,zIndexPopupBase:_,colorText:C,fontWeightStrong:b,controlItemBgActive:T,controlItemBgHover:A,colorBgContainer:I,colorFillSecondary:N,colorBgContainerDisabled:P,colorTextDisabled:D,colorPrimaryHover:x,colorPrimary:L,controlOutline:M}=t,F=v*2,V=s*2,$=Math.min(c-F,c-V),z=Math.min(d-F,d-V),K=Math.min(f-F,f-V);return{INTERNAL_FIXED_ITEM_MARGIN:Math.floor(v/2),zIndexPopup:_+50,optionSelectedColor:C,optionSelectedFontWeight:b,optionSelectedBg:T,optionActiveBg:A,optionPadding:`${(c-r*o)/2}px ${g}px`,optionFontSize:r,optionLineHeight:o,optionHeight:c,selectorBg:I,clearBg:I,singleItemHeightLG:f,multipleItemBg:N,multipleItemBorderColor:"transparent",multipleItemHeight:$,multipleItemHeightSM:z,multipleItemHeightLG:K,multipleSelectorBgDisabled:P,multipleItemColorDisabled:D,multipleItemBorderColorDisabled:"transparent",showArrowPaddingInlineEnd:Math.ceil(t.fontSize*1.25),hoverBorderColor:x,activeBorderColor:L,activeOutlineColor:M,selectAffixPadding:v}},KJ=(t,r)=>{const{componentCls:o,antCls:s,controlOutlineWidth:c}=t;return{[`&:not(${o}-customize-input) ${o}-selector`]:{border:`${Xe(t.lineWidth)} ${t.lineType} ${r.borderColor}`,background:t.selectorBg},[`&:not(${o}-disabled):not(${o}-customize-input):not(${s}-pagination-size-changer)`]:{[`&:hover ${o}-selector`]:{borderColor:r.hoverBorderHover},[`${o}-focused& ${o}-selector`]:{borderColor:r.activeBorderColor,boxShadow:`0 0 0 ${Xe(c)} ${r.activeOutlineColor}`,outline:0},[`${o}-prefix`]:{color:r.color}}}},Lz=(t,r)=>({[`&${t.componentCls}-status-${r.status}`]:Object.assign({},KJ(t,r))}),YAe=t=>({"&-outlined":Object.assign(Object.assign(Object.assign(Object.assign({},KJ(t,{borderColor:t.colorBorder,hoverBorderHover:t.hoverBorderColor,activeBorderColor:t.activeBorderColor,activeOutlineColor:t.activeOutlineColor,color:t.colorText})),Lz(t,{status:"error",borderColor:t.colorError,hoverBorderHover:t.colorErrorHover,activeBorderColor:t.colorError,activeOutlineColor:t.colorErrorOutline,color:t.colorError})),Lz(t,{status:"warning",borderColor:t.colorWarning,hoverBorderHover:t.colorWarningHover,activeBorderColor:t.colorWarning,activeOutlineColor:t.colorWarningOutline,color:t.colorWarning})),{[`&${t.componentCls}-disabled`]:{[`&:not(${t.componentCls}-customize-input) ${t.componentCls}-selector`]:{background:t.colorBgContainerDisabled,color:t.colorTextDisabled}},[`&${t.componentCls}-multiple ${t.componentCls}-selection-item`]:{background:t.multipleItemBg,border:`${Xe(t.lineWidth)} ${t.lineType} ${t.multipleItemBorderColor}`}})}),YJ=(t,r)=>{const{componentCls:o,antCls:s}=t;return{[`&:not(${o}-customize-input) ${o}-selector`]:{background:r.bg,border:`${Xe(t.lineWidth)} ${t.lineType} transparent`,color:r.color},[`&:not(${o}-disabled):not(${o}-customize-input):not(${s}-pagination-size-changer)`]:{[`&:hover ${o}-selector`]:{background:r.hoverBg},[`${o}-focused& ${o}-selector`]:{background:t.selectorBg,borderColor:r.activeBorderColor,outline:0}}}},kz=(t,r)=>({[`&${t.componentCls}-status-${r.status}`]:Object.assign({},YJ(t,r))}),qAe=t=>({"&-filled":Object.assign(Object.assign(Object.assign(Object.assign({},YJ(t,{bg:t.colorFillTertiary,hoverBg:t.colorFillSecondary,activeBorderColor:t.activeBorderColor,color:t.colorText})),kz(t,{status:"error",bg:t.colorErrorBg,hoverBg:t.colorErrorBgHover,activeBorderColor:t.colorError,color:t.colorError})),kz(t,{status:"warning",bg:t.colorWarningBg,hoverBg:t.colorWarningBgHover,activeBorderColor:t.colorWarning,color:t.colorWarning})),{[`&${t.componentCls}-disabled`]:{[`&:not(${t.componentCls}-customize-input) ${t.componentCls}-selector`]:{borderColor:t.colorBorder,background:t.colorBgContainerDisabled,color:t.colorTextDisabled}},[`&${t.componentCls}-multiple ${t.componentCls}-selection-item`]:{background:t.colorBgContainer,border:`${Xe(t.lineWidth)} ${t.lineType} ${t.colorSplit}`}})}),XAe=t=>({"&-borderless":{[`${t.componentCls}-selector`]:{background:"transparent",border:`${Xe(t.lineWidth)} ${t.lineType} transparent`},[`&${t.componentCls}-disabled`]:{[`&:not(${t.componentCls}-customize-input) ${t.componentCls}-selector`]:{color:t.colorTextDisabled}},[`&${t.componentCls}-multiple ${t.componentCls}-selection-item`]:{background:t.multipleItemBg,border:`${Xe(t.lineWidth)} ${t.lineType} ${t.multipleItemBorderColor}`},[`&${t.componentCls}-status-error`]:{[`${t.componentCls}-prefix, ${t.componentCls}-selection-item`]:{color:t.colorError}},[`&${t.componentCls}-status-warning`]:{[`${t.componentCls}-prefix, ${t.componentCls}-selection-item`]:{color:t.colorWarning}}}}),qJ=(t,r)=>{const{componentCls:o,antCls:s}=t;return{[`&:not(${o}-customize-input) ${o}-selector`]:{borderWidth:`0 0 ${Xe(t.lineWidth)} 0`,borderStyle:`none none ${t.lineType} none`,borderColor:r.borderColor,background:t.selectorBg,borderRadius:0},[`&:not(${o}-disabled):not(${o}-customize-input):not(${s}-pagination-size-changer)`]:{[`&:hover ${o}-selector`]:{borderColor:r.hoverBorderHover},[`${o}-focused& ${o}-selector`]:{borderColor:r.activeBorderColor,outline:0},[`${o}-prefix`]:{color:r.color}}}},Mz=(t,r)=>({[`&${t.componentCls}-status-${r.status}`]:Object.assign({},qJ(t,r))}),JAe=t=>({"&-underlined":Object.assign(Object.assign(Object.assign(Object.assign({},qJ(t,{borderColor:t.colorBorder,hoverBorderHover:t.hoverBorderColor,activeBorderColor:t.activeBorderColor,activeOutlineColor:t.activeOutlineColor,color:t.colorText})),Mz(t,{status:"error",borderColor:t.colorError,hoverBorderHover:t.colorErrorHover,activeBorderColor:t.colorError,activeOutlineColor:t.colorErrorOutline,color:t.colorError})),Mz(t,{status:"warning",borderColor:t.colorWarning,hoverBorderHover:t.colorWarningHover,activeBorderColor:t.colorWarning,activeOutlineColor:t.colorWarningOutline,color:t.colorWarning})),{[`&${t.componentCls}-disabled`]:{[`&:not(${t.componentCls}-customize-input) ${t.componentCls}-selector`]:{color:t.colorTextDisabled}},[`&${t.componentCls}-multiple ${t.componentCls}-selection-item`]:{background:t.multipleItemBg,border:`${Xe(t.lineWidth)} ${t.lineType} ${t.multipleItemBorderColor}`}})}),QAe=t=>({[t.componentCls]:Object.assign(Object.assign(Object.assign(Object.assign({},YAe(t)),qAe(t)),XAe(t)),JAe(t))}),ZAe=QAe,eOe=t=>{const{componentCls:r}=t;return{position:"relative",transition:`all ${t.motionDurationMid} ${t.motionEaseInOut}`,input:{cursor:"pointer"},[`${r}-show-search&`]:{cursor:"text",input:{cursor:"auto",color:"inherit",height:"100%"}},[`${r}-disabled&`]:{cursor:"not-allowed",input:{cursor:"not-allowed"}}}},tOe=t=>{const{componentCls:r}=t;return{[`${r}-selection-search-input`]:{margin:0,padding:0,background:"transparent",border:"none",outline:"none",appearance:"none",fontFamily:"inherit","&::-webkit-search-cancel-button":{display:"none","-webkit-appearance":"none"}}}},nOe=t=>{const{antCls:r,componentCls:o,inputPaddingHorizontalBase:s,iconCls:c}=t;return{[o]:Object.assign(Object.assign({},Ps(t)),{position:"relative",display:"inline-flex",cursor:"pointer",[`&:not(${o}-customize-input) ${o}-selector`]:Object.assign(Object.assign({},eOe(t)),tOe(t)),[`${o}-selection-item`]:Object.assign(Object.assign({flex:1,fontWeight:"normal",position:"relative",userSelect:"none"},ZC),{[`> ${r}-typography`]:{display:"inline"}}),[`${o}-selection-placeholder`]:Object.assign(Object.assign({},ZC),{flex:1,color:t.colorTextPlaceholder,pointerEvents:"none"}),[`${o}-arrow`]:Object.assign(Object.assign({},Qv()),{position:"absolute",top:"50%",insetInlineStart:"auto",insetInlineEnd:s,height:t.fontSizeIcon,marginTop:t.calc(t.fontSizeIcon).mul(-1).div(2).equal(),color:t.colorTextQuaternary,fontSize:t.fontSizeIcon,lineHeight:1,textAlign:"center",pointerEvents:"none",display:"flex",alignItems:"center",transition:`opacity ${t.motionDurationSlow} ease`,[c]:{verticalAlign:"top",transition:`transform ${t.motionDurationSlow}`,"> svg":{verticalAlign:"top"},[`&:not(${o}-suffix)`]:{pointerEvents:"auto"}},[`${o}-disabled &`]:{cursor:"not-allowed"},"> *:not(:last-child)":{marginInlineEnd:8}}),[`${o}-selection-wrap`]:{display:"flex",width:"100%",position:"relative",minWidth:0,"&:after":{content:'"\\a0"',width:0,overflow:"hidden"}},[`${o}-prefix`]:{flex:"none",marginInlineEnd:t.selectAffixPadding},[`${o}-clear`]:{position:"absolute",top:"50%",insetInlineStart:"auto",insetInlineEnd:s,zIndex:1,display:"inline-block",width:t.fontSizeIcon,height:t.fontSizeIcon,marginTop:t.calc(t.fontSizeIcon).mul(-1).div(2).equal(),color:t.colorTextQuaternary,fontSize:t.fontSizeIcon,fontStyle:"normal",lineHeight:1,textAlign:"center",textTransform:"none",cursor:"pointer",opacity:0,transition:`color ${t.motionDurationMid} ease, opacity ${t.motionDurationSlow} ease`,textRendering:"auto","&:before":{display:"block"},"&:hover":{color:t.colorTextTertiary}},[`&:hover ${o}-clear`]:{opacity:1,background:t.colorBgBase,borderRadius:"50%"}}),[`${o}-status`]:{"&-error, &-warning, &-success, &-validating":{[`&${o}-has-feedback`]:{[`${o}-clear`]:{insetInlineEnd:t.calc(s).add(t.fontSize).add(t.paddingXS).equal()}}}}}},rOe=t=>{const{componentCls:r}=t;return[{[r]:{[`&${r}-in-form-item`]:{width:"100%"}}},nOe(t),GAe(t),WAe(t),BAe(t),{[`${r}-rtl`]:{direction:"rtl"}},V2(t,{borderElCls:`${r}-selector`,focusElCls:`${r}-focused`})]},iOe=Oo("Select",(t,r)=>{let{rootPrefixCls:o}=r;const s=oi(t,{rootPrefixCls:o,inputPaddingHorizontalBase:t.calc(t.paddingSM).sub(1).equal(),multipleSelectItemHeight:t.multipleItemHeight,selectHeight:t.controlHeight});return[rOe(s),ZAe(s)]},KAe,{unitless:{optionLineHeight:!0,optionSelectedFontWeight:!0}});var oOe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"};const aOe=oOe;var sOe=function(r,o){return y.createElement(ao,nt({},r,{ref:o,icon:aOe}))},cOe=y.forwardRef(sOe);const XJ=cOe;var lOe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"}}]},name:"down",theme:"outlined"};const uOe=lOe;var dOe=function(r,o){return y.createElement(ao,nt({},r,{ref:o,icon:uOe}))},hOe=y.forwardRef(dOe);const fOe=hOe;var pOe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"}}]},name:"search",theme:"outlined"};const mOe=pOe;var gOe=function(r,o){return y.createElement(ao,nt({},r,{ref:o,icon:mOe}))},vOe=y.forwardRef(gOe);const JJ=vOe;function EOe(t){let{suffixIcon:r,clearIcon:o,menuItemSelectedIcon:s,removeIcon:c,loading:d,multiple:f,hasFeedback:v,prefixCls:g,showSuffixIcon:_,feedbackIcon:C,showArrow:b,componentName:T}=t;const A=o??y.createElement(fT,null),I=x=>r===null&&!v&&!b?null:y.createElement(y.Fragment,null,_!==!1&&x,v&&C);let N=null;if(r!==void 0)N=I(r);else if(d)N=I(y.createElement(pT,{spin:!0}));else{const x=`${g}-suffix`;N=L=>{let{open:M,showSearch:F}=L;return I(M&&F?y.createElement(JJ,{className:x}):y.createElement(fOe,{className:x}))}}let P=null;s!==void 0?P=s:f?P=y.createElement(XJ,null):P=null;let D=null;return c!==void 0?D=c:D=y.createElement(HX,null),{clearIcon:A,suffixIcon:N,itemIcon:P,removeIcon:D}}function _Oe(t,r){return r!==void 0?r:t!==null}var SOe=globalThis&&globalThis.__rest||function(t,r){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&r.indexOf(s)<0&&(o[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(t);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(t,s[c])&&(o[s[c]]=t[s[c]]);return o};const QJ="SECRET_COMBOBOX_MODE_DO_NOT_USE",yOe=(t,r)=>{var o;const{prefixCls:s,bordered:c,className:d,rootClassName:f,getPopupContainer:v,popupClassName:g,dropdownClassName:_,listHeight:C=256,placement:b,listItemHeight:T,size:A,disabled:I,notFoundContent:N,status:P,builtinPlacements:D,dropdownMatchSelectWidth:x,popupMatchSelectWidth:L,direction:M,style:F,allowClear:V,variant:$,dropdownStyle:z,transitionName:K,tagRender:G,maxCount:J,prefix:ne}=t,te=SOe(t,["prefixCls","bordered","className","rootClassName","getPopupContainer","popupClassName","dropdownClassName","listHeight","placement","listItemHeight","size","disabled","notFoundContent","status","builtinPlacements","dropdownMatchSelectWidth","popupMatchSelectWidth","direction","style","allowClear","variant","dropdownStyle","transitionName","tagRender","maxCount","prefix"]),{getPopupContainer:ce,getPrefixCls:ge,renderEmpty:oe,direction:ae,virtual:ie,popupMatchSelectWidth:ve,popupOverflow:me}=y.useContext(wr),le=Ec("select"),[,de]=os(),Ee=T??(de==null?void 0:de.controlHeight),se=ge("select",s),Te=ge(),we=M??ae,{compactSize:Le,compactItemClassnames:Ie}=eE(se,we),[De,Ye]=Z2("select",$,c),Me=_u(se),[Oe,$e,tt]=iOe(se,Me),je=y.useMemo(()=>{const{mode:gn}=t;if(gn!=="combobox")return gn===QJ?"combobox":gn},[t.mode]),ke=je==="multiple"||je==="tags",dt=_Oe(t.suffixIcon,t.showArrow),Ze=(o=L??x)!==null&&o!==void 0?o:ve,{status:ut,hasFeedback:Tt,isFormItemInput:pt,feedbackIcon:ht}=y.useContext(As),qe=TT(ut,P);let Je;N!==void 0?Je=N:je==="combobox"?Je=null:Je=(oe==null?void 0:oe("Select"))||y.createElement(GJ,{componentName:"Select"});const{suffixIcon:Ct,itemIcon:Nt,removeIcon:Ot,clearIcon:on}=EOe(Object.assign(Object.assign({},te),{multiple:ke,hasFeedback:Tt,feedbackIcon:ht,showSuffixIcon:dt,prefixCls:se,componentName:"Select"})),Vt=V===!0?{clearIcon:on}:V,kt=ia(te,["suffixIcon","itemIcon"]),Kt=Ke(g||_,{[`${se}-dropdown-${we}`]:we==="rtl"},f,tt,Me,$e),Zt=Su(gn=>{var Mn;return(Mn=A??Le)!==null&&Mn!==void 0?Mn:gn}),Ft=y.useContext(Zh),_t=I??Ft,At=Ke({[`${se}-lg`]:Zt==="large",[`${se}-sm`]:Zt==="small",[`${se}-rtl`]:we==="rtl",[`${se}-${De}`]:Ye,[`${se}-in-form-item`]:pt},sb(se,qe,Tt),Ie,le.className,d,f,tt,Me,$e),mt=y.useMemo(()=>b!==void 0?b:we==="rtl"?"bottomRight":"bottomLeft",[b,we]),[Pt]=M2("SelectLike",z==null?void 0:z.zIndex);return Oe(y.createElement(J2,Object.assign({ref:r,virtual:ie,showSearch:le.showSearch},kt,{style:Object.assign(Object.assign({},le.style),F),dropdownMatchSelectWidth:Ze,transitionName:JX(Te,"slide-up",K),builtinPlacements:FAe(D,me),listHeight:C,listItemHeight:Ee,mode:je,prefixCls:se,placement:mt,direction:we,prefix:ne,suffixIcon:Ct,menuItemSelectedIcon:Nt,removeIcon:Ot,allowClear:Vt,notFoundContent:Je,className:At,getPopupContainer:v||ce,dropdownClassName:Kt,disabled:_t,dropdownStyle:Object.assign(Object.assign({},z),{zIndex:Pt}),maxCount:ke?J:void 0,tagRender:ke?G:void 0})))},km=y.forwardRef(yOe),COe=Xwe(km,"dropdownAlign");km.SECRET_COMBOBOX_MODE_DO_NOT_USE=QJ;km.Option=X2;km.OptGroup=q2;km._InternalPanelDoNotUseOrYouWillBeFired=COe;const bOe=km,Kh=["xxl","xl","lg","md","sm","xs"],TOe=t=>({xs:`(max-width: ${t.screenXSMax}px)`,sm:`(min-width: ${t.screenSM}px)`,md:`(min-width: ${t.screenMD}px)`,lg:`(min-width: ${t.screenLG}px)`,xl:`(min-width: ${t.screenXL}px)`,xxl:`(min-width: ${t.screenXXL}px)`}),ROe=t=>{const r=t,o=[].concat(Kh).reverse();return o.forEach((s,c)=>{const d=s.toUpperCase(),f=`screen${d}Min`,v=`screen${d}`;if(!(r[f]<=r[v]))throw new Error(`${f}<=${v} fails : !(${r[f]}<=${r[v]})`);if(c<o.length-1){const g=`screen${d}Max`;if(!(r[v]<=r[g]))throw new Error(`${v}<=${g} fails : !(${r[v]}<=${r[g]})`);const C=`screen${o[c+1].toUpperCase()}Min`;if(!(r[g]<=r[C]))throw new Error(`${g}<=${C} fails : !(${r[g]}<=${r[C]})`)}}),t};function wOe(){const[,t]=os(),r=TOe(ROe(t));return ze.useMemo(()=>{const o=new Map;let s=-1,c={};return{matchHandlers:{},dispatch(d){return c=d,o.forEach(f=>f(c)),o.size>=1},subscribe(d){return o.size||this.register(),s+=1,o.set(s,d),d(c),s},unsubscribe(d){o.delete(d),o.size||this.unregister()},unregister(){Object.keys(r).forEach(d=>{const f=r[d],v=this.matchHandlers[f];v==null||v.mql.removeListener(v==null?void 0:v.listener)}),o.clear()},register(){Object.keys(r).forEach(d=>{const f=r[d],v=_=>{let{matches:C}=_;this.dispatch(Object.assign(Object.assign({},c),{[d]:C}))},g=window.matchMedia(f);g.addListener(v),this.matchHandlers[f]={mql:g,listener:v},v(g)})},responsiveMap:r}},[t])}function IOe(){const[,t]=y.useReducer(r=>r+1,0);return t}function eL(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const o=y.useRef(r),s=IOe(),c=wOe();return Rr(()=>{const d=c.subscribe(f=>{o.current=f,t&&s()});return()=>c.unsubscribe(d)},[]),o.current}function ZJ(t){var r=t.children,o=t.prefixCls,s=t.id,c=t.overlayInnerStyle,d=t.bodyClassName,f=t.className,v=t.style;return y.createElement("div",{className:Ke("".concat(o,"-content"),f),style:v},y.createElement("div",{className:Ke("".concat(o,"-inner"),d),id:s,role:"tooltip",style:c},typeof r=="function"?r():r))}var Dp={shiftX:64,adjustY:1},Lp={adjustX:1,shiftY:!0},oc=[0,0],AOe={left:{points:["cr","cl"],overflow:Lp,offset:[-4,0],targetOffset:oc},right:{points:["cl","cr"],overflow:Lp,offset:[4,0],targetOffset:oc},top:{points:["bc","tc"],overflow:Dp,offset:[0,-4],targetOffset:oc},bottom:{points:["tc","bc"],overflow:Dp,offset:[0,4],targetOffset:oc},topLeft:{points:["bl","tl"],overflow:Dp,offset:[0,-4],targetOffset:oc},leftTop:{points:["tr","tl"],overflow:Lp,offset:[-4,0],targetOffset:oc},topRight:{points:["br","tr"],overflow:Dp,offset:[0,-4],targetOffset:oc},rightTop:{points:["tl","tr"],overflow:Lp,offset:[4,0],targetOffset:oc},bottomRight:{points:["tr","br"],overflow:Dp,offset:[0,4],targetOffset:oc},rightBottom:{points:["bl","br"],overflow:Lp,offset:[4,0],targetOffset:oc},bottomLeft:{points:["tl","bl"],overflow:Dp,offset:[0,4],targetOffset:oc},leftBottom:{points:["br","bl"],overflow:Lp,offset:[-4,0],targetOffset:oc}},OOe=["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","afterVisibleChange","transitionName","animation","motion","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer","overlayInnerStyle","arrowContent","overlay","id","showArrow","classNames","styles"],xOe=function(r,o){var s=r.overlayClassName,c=r.trigger,d=c===void 0?["hover"]:c,f=r.mouseEnterDelay,v=f===void 0?0:f,g=r.mouseLeaveDelay,_=g===void 0?.1:g,C=r.overlayStyle,b=r.prefixCls,T=b===void 0?"rc-tooltip":b,A=r.children,I=r.onVisibleChange,N=r.afterVisibleChange,P=r.transitionName,D=r.animation,x=r.motion,L=r.placement,M=L===void 0?"right":L,F=r.align,V=F===void 0?{}:F,$=r.destroyTooltipOnHide,z=$===void 0?!1:$,K=r.defaultVisible,G=r.getTooltipContainer,J=r.overlayInnerStyle;r.arrowContent;var ne=r.overlay,te=r.id,ce=r.showArrow,ge=ce===void 0?!0:ce,oe=r.classNames,ae=r.styles,ie=xn(r,OOe),ve=hJ(te),me=y.useRef(null);y.useImperativeHandle(o,function(){return me.current});var le=_e({},ie);"visible"in r&&(le.popupVisible=r.visible);var de=function(){return y.createElement(ZJ,{key:"content",prefixCls:T,id:ve,bodyClassName:oe==null?void 0:oe.body,overlayInnerStyle:_e(_e({},J),ae==null?void 0:ae.body)},ne)},Ee=function(){var Te=y.Children.only(A),we=(Te==null?void 0:Te.props)||{},Le=_e(_e({},we),{},{"aria-describedby":ne?ve:null});return y.cloneElement(A,Le)};return y.createElement(K2,nt({popupClassName:Ke(s,oe==null?void 0:oe.root),prefixCls:T,popup:de,action:d,builtinPlacements:AOe,popupPlacement:M,ref:me,popupAlign:V,getPopupContainer:G,onPopupVisibleChange:I,afterPopupVisibleChange:N,popupTransitionName:P,popupAnimation:D,popupMotion:x,defaultPopupVisible:K,autoDestroy:z,mouseLeaveDelay:_,popupStyle:_e(_e({},C),ae==null?void 0:ae.root),mouseEnterDelay:v,arrow:ge},le),Ee())};const NOe=y.forwardRef(xOe);function POe(t){const{sizePopupArrow:r,borderRadiusXS:o,borderRadiusOuter:s}=t,c=r/2,d=0,f=c,v=s*1/Math.sqrt(2),g=c-s*(1-1/Math.sqrt(2)),_=c-o*(1/Math.sqrt(2)),C=s*(Math.sqrt(2)-1)+o*(1/Math.sqrt(2)),b=2*c-_,T=C,A=2*c-v,I=g,N=2*c-d,P=f,D=c*Math.sqrt(2)+s*(Math.sqrt(2)-2),x=s*(Math.sqrt(2)-1),L=`polygon(${x}px 100%, 50% ${x}px, ${2*c-x}px 100%, ${x}px 100%)`,M=`path('M ${d} ${f} A ${s} ${s} 0 0 0 ${v} ${g} L ${_} ${C} A ${o} ${o} 0 0 1 ${b} ${T} L ${A} ${I} A ${s} ${s} 0 0 0 ${N} ${P} Z')`;return{arrowShadowWidth:D,arrowPath:M,arrowPolygon:L}}const DOe=(t,r,o)=>{const{sizePopupArrow:s,arrowPolygon:c,arrowPath:d,arrowShadowWidth:f,borderRadiusXS:v,calc:g}=t;return{pointerEvents:"none",width:s,height:s,overflow:"hidden","&::before":{position:"absolute",bottom:0,insetInlineStart:0,width:s,height:g(s).div(2).equal(),background:r,clipPath:{_multi_value_:!0,value:[c,d]},content:'""'},"&::after":{content:'""',position:"absolute",width:f,height:f,bottom:0,insetInline:0,margin:"auto",borderRadius:{_skip_check_:!0,value:`0 0 ${Xe(v)} 0`},transform:"translateY(50%) rotate(-135deg)",boxShadow:o,zIndex:0,background:"transparent"}}},eQ=8;function tQ(t){const{contentRadius:r,limitVerticalRadius:o}=t,s=r>12?r+2:12;return{arrowOffsetHorizontal:s,arrowOffsetVertical:o?eQ:s}}function Fy(t,r){return t?r:{}}function LOe(t,r,o){const{componentCls:s,boxShadowPopoverArrow:c,arrowOffsetVertical:d,arrowOffsetHorizontal:f}=t,{arrowDistance:v=0,arrowPlacement:g={left:!0,right:!0,top:!0,bottom:!0}}=o||{};return{[s]:Object.assign(Object.assign(Object.assign(Object.assign({[`${s}-arrow`]:[Object.assign(Object.assign({position:"absolute",zIndex:1,display:"block"},DOe(t,r,c)),{"&:before":{background:r}})]},Fy(!!g.top,{[[`&-placement-top > ${s}-arrow`,`&-placement-topLeft > ${s}-arrow`,`&-placement-topRight > ${s}-arrow`].join(",")]:{bottom:v,transform:"translateY(100%) rotate(180deg)"},[`&-placement-top > ${s}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(100%) rotate(180deg)"},"&-placement-topLeft":{"--arrow-offset-horizontal":f,[`> ${s}-arrow`]:{left:{_skip_check_:!0,value:f}}},"&-placement-topRight":{"--arrow-offset-horizontal":`calc(100% - ${Xe(f)})`,[`> ${s}-arrow`]:{right:{_skip_check_:!0,value:f}}}})),Fy(!!g.bottom,{[[`&-placement-bottom > ${s}-arrow`,`&-placement-bottomLeft > ${s}-arrow`,`&-placement-bottomRight > ${s}-arrow`].join(",")]:{top:v,transform:"translateY(-100%)"},[`&-placement-bottom > ${s}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(-100%)"},"&-placement-bottomLeft":{"--arrow-offset-horizontal":f,[`> ${s}-arrow`]:{left:{_skip_check_:!0,value:f}}},"&-placement-bottomRight":{"--arrow-offset-horizontal":`calc(100% - ${Xe(f)})`,[`> ${s}-arrow`]:{right:{_skip_check_:!0,value:f}}}})),Fy(!!g.left,{[[`&-placement-left > ${s}-arrow`,`&-placement-leftTop > ${s}-arrow`,`&-placement-leftBottom > ${s}-arrow`].join(",")]:{right:{_skip_check_:!0,value:v},transform:"translateX(100%) rotate(90deg)"},[`&-placement-left > ${s}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(100%) rotate(90deg)"},[`&-placement-leftTop > ${s}-arrow`]:{top:d},[`&-placement-leftBottom > ${s}-arrow`]:{bottom:d}})),Fy(!!g.right,{[[`&-placement-right > ${s}-arrow`,`&-placement-rightTop > ${s}-arrow`,`&-placement-rightBottom > ${s}-arrow`].join(",")]:{left:{_skip_check_:!0,value:v},transform:"translateX(-100%) rotate(-90deg)"},[`&-placement-right > ${s}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(-100%) rotate(-90deg)"},[`&-placement-rightTop > ${s}-arrow`]:{top:d},[`&-placement-rightBottom > ${s}-arrow`]:{bottom:d}}))}}function kOe(t,r,o,s){if(s===!1)return{adjustX:!1,adjustY:!1};const c=s&&typeof s=="object"?s:{},d={};switch(t){case"top":case"bottom":d.shiftX=r.arrowOffsetHorizontal*2+o,d.shiftY=!0,d.adjustY=!0;break;case"left":case"right":d.shiftY=r.arrowOffsetVertical*2+o,d.shiftX=!0,d.adjustX=!0;break}const f=Object.assign(Object.assign({},d),c);return f.shiftX||(f.adjustX=!0),f.shiftY||(f.adjustY=!0),f}const Fz={left:{points:["cr","cl"]},right:{points:["cl","cr"]},top:{points:["bc","tc"]},bottom:{points:["tc","bc"]},topLeft:{points:["bl","tl"]},leftTop:{points:["tr","tl"]},topRight:{points:["br","tr"]},rightTop:{points:["tl","tr"]},bottomRight:{points:["tr","br"]},rightBottom:{points:["bl","br"]},bottomLeft:{points:["tl","bl"]},leftBottom:{points:["br","bl"]}},MOe={topLeft:{points:["bl","tc"]},leftTop:{points:["tr","cl"]},topRight:{points:["br","tc"]},rightTop:{points:["tl","cr"]},bottomRight:{points:["tr","bc"]},rightBottom:{points:["bl","cr"]},bottomLeft:{points:["tl","bc"]},leftBottom:{points:["br","cl"]}},FOe=new Set(["topLeft","topRight","bottomLeft","bottomRight","leftTop","leftBottom","rightTop","rightBottom"]);function UOe(t){const{arrowWidth:r,autoAdjustOverflow:o,arrowPointAtCenter:s,offset:c,borderRadius:d,visibleFirst:f}=t,v=r/2,g={};return Object.keys(Fz).forEach(_=>{const C=s&&MOe[_]||Fz[_],b=Object.assign(Object.assign({},C),{offset:[0,0],dynamicInset:!0});switch(g[_]=b,FOe.has(_)&&(b.autoArrow=!1),_){case"top":case"topLeft":case"topRight":b.offset[1]=-v-c;break;case"bottom":case"bottomLeft":case"bottomRight":b.offset[1]=v+c;break;case"left":case"leftTop":case"leftBottom":b.offset[0]=-v-c;break;case"right":case"rightTop":case"rightBottom":b.offset[0]=v+c;break}const T=tQ({contentRadius:d,limitVerticalRadius:!0});if(s)switch(_){case"topLeft":case"bottomLeft":b.offset[0]=-T.arrowOffsetHorizontal-v;break;case"topRight":case"bottomRight":b.offset[0]=T.arrowOffsetHorizontal+v;break;case"leftTop":case"rightTop":b.offset[1]=-T.arrowOffsetHorizontal*2+v;break;case"leftBottom":case"rightBottom":b.offset[1]=T.arrowOffsetHorizontal*2-v;break}b.overflow=kOe(_,T,r,o),f&&(b.htmlRegion="visibleFirst")}),g}const BOe=t=>{const{calc:r,componentCls:o,tooltipMaxWidth:s,tooltipColor:c,tooltipBg:d,tooltipBorderRadius:f,zIndexPopup:v,controlHeight:g,boxShadowSecondary:_,paddingSM:C,paddingXS:b,arrowOffsetHorizontal:T,sizePopupArrow:A}=t,I=r(f).add(A).add(T).equal(),N=r(f).mul(2).add(A).equal();return[{[o]:Object.assign(Object.assign(Object.assign(Object.assign({},Ps(t)),{position:"absolute",zIndex:v,display:"block",width:"max-content",maxWidth:s,visibility:"visible","--valid-offset-x":"var(--arrow-offset-horizontal, var(--arrow-x))",transformOrigin:["var(--valid-offset-x, 50%)","var(--arrow-y, 50%)"].join(" "),"&-hidden":{display:"none"},"--antd-arrow-background-color":d,[`${o}-inner`]:{minWidth:N,minHeight:g,padding:`${Xe(t.calc(C).div(2).equal())} ${Xe(b)}`,color:c,textAlign:"start",textDecoration:"none",wordWrap:"break-word",backgroundColor:d,borderRadius:f,boxShadow:_,boxSizing:"border-box"},[["&-placement-topLeft","&-placement-topRight","&-placement-bottomLeft","&-placement-bottomRight"].join(",")]:{minWidth:I},[["&-placement-left","&-placement-leftTop","&-placement-leftBottom","&-placement-right","&-placement-rightTop","&-placement-rightBottom"].join(",")]:{[`${o}-inner`]:{borderRadius:t.min(f,eQ)}},[`${o}-content`]:{position:"relative"}}),ICe(t,(P,D)=>{let{darkColor:x}=D;return{[`&${o}-${P}`]:{[`${o}-inner`]:{backgroundColor:x},[`${o}-arrow`]:{"--antd-arrow-background-color":x}}}})),{"&-rtl":{direction:"rtl"}})},LOe(t,"var(--antd-arrow-background-color)"),{[`${o}-pure`]:{position:"relative",maxWidth:"none",margin:t.sizePopupArrow}}]},VOe=t=>Object.assign(Object.assign({zIndexPopup:t.zIndexPopupBase+70},tQ({contentRadius:t.borderRadius,limitVerticalRadius:!0})),POe(oi(t,{borderRadiusOuter:Math.min(t.borderRadiusOuter,4)}))),nQ=function(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Oo("Tooltip",s=>{const{borderRadius:c,colorTextLightSolid:d,colorBgSpotlight:f}=s,v=oi(s,{tooltipMaxWidth:250,tooltipColor:d,tooltipBorderRadius:c,tooltipBg:f});return[BOe(v),aJ(s,"zoom-big-fast")]},VOe,{resetStyle:!1,injectStyle:r})(t)},jOe=zh.map(t=>`${t}-inverse`);function $Oe(t){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0)?[].concat(Et(jOe),Et(zh)).includes(t):zh.includes(t)}function rQ(t,r){const o=$Oe(r),s=Ke({[`${t}-${r}`]:r&&o}),c={},d={};return r&&!o&&(c.background=r,d["--antd-arrow-background-color"]=r),{className:s,overlayStyle:c,arrowStyle:d}}const HOe=t=>{const{prefixCls:r,className:o,placement:s="top",title:c,color:d,overlayInnerStyle:f}=t,{getPrefixCls:v}=y.useContext(wr),g=v("tooltip",r),[_,C,b]=nQ(g),T=rQ(g,d),A=T.arrowStyle,I=Object.assign(Object.assign({},f),T.overlayStyle),N=Ke(C,b,g,`${g}-pure`,`${g}-placement-${s}`,o,T.className);return _(y.createElement("div",{className:N,style:A},y.createElement("div",{className:`${g}-arrow`}),y.createElement(ZJ,Object.assign({},t,{className:C,prefixCls:g,overlayInnerStyle:I}),c)))},zOe=HOe;var WOe=globalThis&&globalThis.__rest||function(t,r){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&r.indexOf(s)<0&&(o[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(t);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(t,s[c])&&(o[s[c]]=t[s[c]]);return o};const GOe=y.forwardRef((t,r)=>{var o,s;const{prefixCls:c,openClassName:d,getTooltipContainer:f,color:v,overlayInnerStyle:g,children:_,afterOpenChange:C,afterVisibleChange:b,destroyTooltipOnHide:T,arrow:A=!0,title:I,overlay:N,builtinPlacements:P,arrowPointAtCenter:D=!1,autoAdjustOverflow:x=!0,motion:L,getPopupContainer:M,placement:F="top",mouseEnterDelay:V=.1,mouseLeaveDelay:$=.1,overlayStyle:z,rootClassName:K,overlayClassName:G,styles:J,classNames:ne}=t,te=WOe(t,["prefixCls","openClassName","getTooltipContainer","color","overlayInnerStyle","children","afterOpenChange","afterVisibleChange","destroyTooltipOnHide","arrow","title","overlay","builtinPlacements","arrowPointAtCenter","autoAdjustOverflow","motion","getPopupContainer","placement","mouseEnterDelay","mouseLeaveDelay","overlayStyle","rootClassName","overlayClassName","styles","classNames"]),ce=!!A,[,ge]=os(),{getPopupContainer:oe,getPrefixCls:ae,direction:ie,className:ve,style:me,classNames:le,styles:de}=Ec("tooltip"),Ee=sT(),se=y.useRef(null),Te=()=>{var kt;(kt=se.current)===null||kt===void 0||kt.forceAlign()};y.useImperativeHandle(r,()=>{var kt,Kt;return{forceAlign:Te,forcePopupAlign:()=>{Ee.deprecated(!1,"forcePopupAlign","forceAlign"),Te()},nativeElement:(kt=se.current)===null||kt===void 0?void 0:kt.nativeElement,popupElement:(Kt=se.current)===null||Kt===void 0?void 0:Kt.popupElement}});const[we,Le]=Sa(!1,{value:(o=t.open)!==null&&o!==void 0?o:t.visible,defaultValue:(s=t.defaultOpen)!==null&&s!==void 0?s:t.defaultVisible}),Ie=!I&&!N&&I!==0,De=kt=>{var Kt,Zt;Le(Ie?!1:kt),Ie||((Kt=t.onOpenChange)===null||Kt===void 0||Kt.call(t,kt),(Zt=t.onVisibleChange)===null||Zt===void 0||Zt.call(t,kt))},Ye=y.useMemo(()=>{var kt,Kt;let Zt=D;return typeof A=="object"&&(Zt=(Kt=(kt=A.pointAtCenter)!==null&&kt!==void 0?kt:A.arrowPointAtCenter)!==null&&Kt!==void 0?Kt:D),P||UOe({arrowPointAtCenter:Zt,autoAdjustOverflow:x,arrowWidth:ce?ge.sizePopupArrow:0,borderRadius:ge.borderRadius,offset:ge.marginXXS,visibleFirst:!0})},[D,A,P,ge]),Me=y.useMemo(()=>I===0?I:N||I||"",[N,I]),Oe=y.createElement(QP,{space:!0},typeof Me=="function"?Me():Me),$e=ae("tooltip",c),tt=ae(),je=t["data-popover-inject"];let ke=we;!("open"in t)&&!("visible"in t)&&Ie&&(ke=!1);const dt=y.isValidElement(_)&&!WX(_)?_:y.createElement("span",null,_),Ze=dt.props,ut=!Ze.className||typeof Ze.className=="string"?Ke(Ze.className,d||`${$e}-open`):Ze.className,[Tt,pt,ht]=nQ($e,!je),qe=rQ($e,v),Je=qe.arrowStyle,Ct=Ke(G,{[`${$e}-rtl`]:ie==="rtl"},qe.className,K,pt,ht,ve,le.root,ne==null?void 0:ne.root),Nt=Ke(le.body,ne==null?void 0:ne.body),[Ot,on]=M2("Tooltip",te.zIndex),Vt=y.createElement(NOe,Object.assign({},te,{zIndex:Ot,showArrow:ce,placement:F,mouseEnterDelay:V,mouseLeaveDelay:$,prefixCls:$e,classNames:{root:Ct,body:Nt},styles:{root:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Je),de.root),me),z),J==null?void 0:J.root),body:Object.assign(Object.assign(Object.assign(Object.assign({},de.body),g),J==null?void 0:J.body),qe.overlayStyle)},getTooltipContainer:M||f||oe,ref:se,builtinPlacements:Ye,overlay:Oe,visible:ke,onVisibleChange:De,afterVisibleChange:C??b,arrowContent:y.createElement("span",{className:`${$e}-arrow-content`}),motion:{motionName:JX(tt,"zoom-big-fast",t.transitionName),motionDeadline:1e3},destroyTooltipOnHide:!!T}),ke?gc(dt,{className:ut}):dt);return Tt(y.createElement(YX.Provider,{value:on},Vt))}),iQ=GOe;iQ._InternalPanelDoNotUseOrYouWillBeFired=zOe;const rE=iQ;var KOe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 000 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"}}]},name:"left",theme:"outlined"};const YOe=KOe;var qOe=function(r,o){return y.createElement(ao,nt({},r,{ref:o,icon:YOe}))},XOe=y.forwardRef(qOe);const cb=XOe;var oQ=y.createContext(null);function aQ(t,r){return t===void 0?null:"".concat(t,"-").concat(r)}function sQ(t){var r=y.useContext(oQ);return aQ(r,t)}var JOe=["children","locked"],Zc=y.createContext(null);function QOe(t,r){var o=_e({},t);return Object.keys(r).forEach(function(s){var c=r[s];c!==void 0&&(o[s]=c)}),o}function Mv(t){var r=t.children,o=t.locked,s=xn(t,JOe),c=y.useContext(Zc),d=Yv(function(){return QOe(c,s)},[c,s],function(f,v){return!o&&(f[0]!==v[0]||!Av(f[1],v[1],!0))});return y.createElement(Zc.Provider,{value:d},r)}var ZOe=[],cQ=y.createContext(null);function RT(){return y.useContext(cQ)}var lQ=y.createContext(ZOe);function Mm(t){var r=y.useContext(lQ);return y.useMemo(function(){return t!==void 0?[].concat(Et(r),[t]):r},[r,t])}var uQ=y.createContext(null),tL=y.createContext({});function Uz(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(gT(t)){var o=t.nodeName.toLowerCase(),s=["input","select","textarea","button"].includes(o)||t.isContentEditable||o==="a"&&!!t.getAttribute("href"),c=t.getAttribute("tabindex"),d=Number(c),f=null;return c&&!Number.isNaN(d)?f=d:s&&f===null&&(f=0),s&&t.disabled&&(f=null),f!==null&&(f>=0||r&&f<0)}return!1}function exe(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,o=Et(t.querySelectorAll("*")).filter(function(s){return Uz(s,r)});return Uz(t,r)&&o.unshift(t),o}var oD=lt.LEFT,aD=lt.RIGHT,sD=lt.UP,gC=lt.DOWN,vC=lt.ENTER,dQ=lt.ESC,Og=lt.HOME,xg=lt.END,Bz=[sD,gC,oD,aD];function txe(t,r,o,s){var c,d="prev",f="next",v="children",g="parent";if(t==="inline"&&s===vC)return{inlineTrigger:!0};var _=be(be({},sD,d),gC,f),C=be(be(be(be({},oD,o?f:d),aD,o?d:f),gC,v),vC,v),b=be(be(be(be(be(be({},sD,d),gC,f),vC,v),dQ,g),oD,o?v:g),aD,o?g:v),T={inline:_,horizontal:C,vertical:b,inlineSub:_,horizontalSub:b,verticalSub:b},A=(c=T["".concat(t).concat(r?"":"Sub")])===null||c===void 0?void 0:c[s];switch(A){case d:return{offset:-1,sibling:!0};case f:return{offset:1,sibling:!0};case g:return{offset:-1,sibling:!1};case v:return{offset:1,sibling:!1};default:return null}}function nxe(t){for(var r=t;r;){if(r.getAttribute("data-menu-list"))return r;r=r.parentElement}return null}function rxe(t,r){for(var o=t||document.activeElement;o;){if(r.has(o))return o;o=o.parentElement}return null}function nL(t,r){var o=exe(t,!0);return o.filter(function(s){return r.has(s)})}function Vz(t,r,o){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;if(!t)return null;var c=nL(t,r),d=c.length,f=c.findIndex(function(v){return o===v});return s<0?f===-1?f=d-1:f-=1:s>0&&(f+=1),f=(f+d)%d,c[f]}var cD=function(r,o){var s=new Set,c=new Map,d=new Map;return r.forEach(function(f){var v=document.querySelector("[data-menu-id='".concat(aQ(o,f),"']"));v&&(s.add(v),d.set(v,f),c.set(f,v))}),{elements:s,key2element:c,element2key:d}};function ixe(t,r,o,s,c,d,f,v,g,_){var C=y.useRef(),b=y.useRef();b.current=r;var T=function(){ii.cancel(C.current)};return y.useEffect(function(){return function(){T()}},[]),function(A){var I=A.which;if([].concat(Bz,[vC,dQ,Og,xg]).includes(I)){var N=d(),P=cD(N,s),D=P,x=D.elements,L=D.key2element,M=D.element2key,F=L.get(r),V=rxe(F,x),$=M.get(V),z=txe(t,f($,!0).length===1,o,I);if(!z&&I!==Og&&I!==xg)return;(Bz.includes(I)||[Og,xg].includes(I))&&A.preventDefault();var K=function(ae){if(ae){var ie=ae,ve=ae.querySelector("a");ve!=null&&ve.getAttribute("href")&&(ie=ve);var me=M.get(ae);v(me),T(),C.current=ii(function(){b.current===me&&ie.focus()})}};if([Og,xg].includes(I)||z.sibling||!V){var G;!V||t==="inline"?G=c.current:G=nxe(V);var J,ne=nL(G,x);I===Og?J=ne[0]:I===xg?J=ne[ne.length-1]:J=Vz(G,x,V,z.offset),K(J)}else if(z.inlineTrigger)g($);else if(z.offset>0)g($,!0),T(),C.current=ii(function(){P=cD(N,s);var oe=V.getAttribute("aria-controls"),ae=document.getElementById(oe),ie=Vz(ae,P.elements);K(ie)},5);else if(z.offset<0){var te=f($,!0),ce=te[te.length-2],ge=L.get(ce);g(ce,!1),K(ge)}}_==null||_(A)}}function oxe(t){Promise.resolve().then(t)}var rL="__RC_UTIL_PATH_SPLIT__",jz=function(r){return r.join(rL)},axe=function(r){return r.split(rL)},lD="rc-menu-more";function sxe(){var t=y.useState({}),r=Ue(t,2),o=r[1],s=y.useRef(new Map),c=y.useRef(new Map),d=y.useState([]),f=Ue(d,2),v=f[0],g=f[1],_=y.useRef(0),C=y.useRef(!1),b=function(){C.current||o({})},T=y.useCallback(function(L,M){var F=jz(M);c.current.set(F,L),s.current.set(L,F),_.current+=1;var V=_.current;oxe(function(){V===_.current&&b()})},[]),A=y.useCallback(function(L,M){var F=jz(M);c.current.delete(F),s.current.delete(L)},[]),I=y.useCallback(function(L){g(L)},[]),N=y.useCallback(function(L,M){var F=s.current.get(L)||"",V=axe(F);return M&&v.includes(V[0])&&V.unshift(lD),V},[v]),P=y.useCallback(function(L,M){return L.filter(function(F){return F!==void 0}).some(function(F){var V=N(F,!0);return V.includes(M)})},[N]),D=function(){var M=Et(s.current.keys());return v.length&&M.push(lD),M},x=y.useCallback(function(L){var M="".concat(s.current.get(L)).concat(rL),F=new Set;return Et(c.current.keys()).forEach(function(V){V.startsWith(M)&&F.add(c.current.get(V))}),F},[]);return y.useEffect(function(){return function(){C.current=!0}},[]),{registerPath:T,unregisterPath:A,refreshOverflowKeys:I,isSubPathKey:P,getKeyPath:N,getKeys:D,getSubPathKeys:x}}function $g(t){var r=y.useRef(t);r.current=t;var o=y.useCallback(function(){for(var s,c=arguments.length,d=new Array(c),f=0;f<c;f++)d[f]=arguments[f];return(s=r.current)===null||s===void 0?void 0:s.call.apply(s,[r].concat(d))},[]);return t?o:void 0}var cxe=Math.random().toFixed(5).toString().slice(2),$z=0;function lxe(t){var r=Sa(t,{value:t}),o=Ue(r,2),s=o[0],c=o[1];return y.useEffect(function(){$z+=1;var d="".concat(cxe,"-").concat($z);c("rc-menu-uuid-".concat(d))},[]),s}function hQ(t,r,o,s){var c=y.useContext(Zc),d=c.activeKey,f=c.onActive,v=c.onInactive,g={active:d===t};return r||(g.onMouseEnter=function(_){o==null||o({key:t,domEvent:_}),f(t)},g.onMouseLeave=function(_){s==null||s({key:t,domEvent:_}),v(t)}),g}function fQ(t){var r=y.useContext(Zc),o=r.mode,s=r.rtl,c=r.inlineIndent;if(o!=="inline")return null;var d=t;return s?{paddingRight:d*c}:{paddingLeft:d*c}}function pQ(t){var r=t.icon,o=t.props,s=t.children,c;return r===null||r===!1?null:(typeof r=="function"?c=y.createElement(r,_e({},o)):typeof r!="boolean"&&(c=r),c||s||null)}var uxe=["item"];function lb(t){var r=t.item,o=xn(t,uxe);return Object.defineProperty(o,"item",{get:function(){return _a(!1,"`info.item` is deprecated since we will move to function component that not provides React Node instance in future."),r}}),o}var dxe=["title","attribute","elementRef"],hxe=["style","className","eventKey","warnKey","disabled","itemIcon","children","role","onMouseEnter","onMouseLeave","onClick","onKeyDown","onFocus"],fxe=["active"],pxe=function(t){Bl(o,t);var r=Vl(o);function o(){return io(this,o),r.apply(this,arguments)}return oo(o,[{key:"render",value:function(){var c=this.props,d=c.title,f=c.attribute,v=c.elementRef,g=xn(c,dxe),_=ia(g,["eventKey","popupClassName","popupOffset","onTitleClick"]);return _a(!f,"`attribute` of Menu.Item is deprecated. Please pass attribute directly."),y.createElement(Ll.Item,nt({},f,{title:typeof d=="string"?d:void 0},_,{ref:v}))}}]),o}(y.Component),mxe=y.forwardRef(function(t,r){var o=t.style,s=t.className,c=t.eventKey;t.warnKey;var d=t.disabled,f=t.itemIcon,v=t.children,g=t.role,_=t.onMouseEnter,C=t.onMouseLeave,b=t.onClick,T=t.onKeyDown,A=t.onFocus,I=xn(t,hxe),N=sQ(c),P=y.useContext(Zc),D=P.prefixCls,x=P.onItemClick,L=P.disabled,M=P.overflowDisabled,F=P.itemIcon,V=P.selectedKeys,$=P.onActive,z=y.useContext(tL),K=z._internalRenderMenuItem,G="".concat(D,"-item"),J=y.useRef(),ne=y.useRef(),te=L||d,ce=xm(r,ne),ge=Mm(c),oe=function(De){return{key:c,keyPath:Et(ge).reverse(),item:J.current,domEvent:De}},ae=f||F,ie=hQ(c,te,_,C),ve=ie.active,me=xn(ie,fxe),le=V.includes(c),de=fQ(ge.length),Ee=function(De){if(!te){var Ye=oe(De);b==null||b(lb(Ye)),x(Ye)}},se=function(De){if(T==null||T(De),De.which===lt.ENTER){var Ye=oe(De);b==null||b(lb(Ye)),x(Ye)}},Te=function(De){$(c),A==null||A(De)},we={};t.role==="option"&&(we["aria-selected"]=le);var Le=y.createElement(pxe,nt({ref:J,elementRef:ce,role:g===null?"none":g||"menuitem",tabIndex:d?null:-1,"data-menu-id":M&&N?null:N},ia(I,["extra"]),me,we,{component:"li","aria-disabled":d,style:_e(_e({},de),o),className:Ke(G,be(be(be({},"".concat(G,"-active"),ve),"".concat(G,"-selected"),le),"".concat(G,"-disabled"),te),s),onClick:Ee,onKeyDown:se,onFocus:Te}),v,y.createElement(pQ,{props:_e(_e({},t),{},{isSelected:le}),icon:ae}));return K&&(Le=K(Le,t,{selected:le})),Le});function gxe(t,r){var o=t.eventKey,s=RT(),c=Mm(o);return y.useEffect(function(){if(s)return s.registerPath(o,c),function(){s.unregisterPath(o,c)}},[c]),s?null:y.createElement(mxe,nt({},t,{ref:r}))}const wT=y.forwardRef(gxe);var vxe=["className","children"],Exe=function(r,o){var s=r.className,c=r.children,d=xn(r,vxe),f=y.useContext(Zc),v=f.prefixCls,g=f.mode,_=f.rtl;return y.createElement("ul",nt({className:Ke(v,_&&"".concat(v,"-rtl"),"".concat(v,"-sub"),"".concat(v,"-").concat(g==="inline"?"inline":"vertical"),s),role:"menu"},d,{"data-menu-list":!0,ref:o}),c)},iL=y.forwardRef(Exe);iL.displayName="SubMenuList";function oL(t,r){return Qc(t).map(function(o,s){if(y.isValidElement(o)){var c,d,f=o.key,v=(c=(d=o.props)===null||d===void 0?void 0:d.eventKey)!==null&&c!==void 0?c:f,g=v==null;g&&(v="tmp_key-".concat([].concat(Et(r),[s]).join("-")));var _={key:v,eventKey:v};return y.cloneElement(o,_)}return o})}var ga={adjustX:1,adjustY:1},_xe={topLeft:{points:["bl","tl"],overflow:ga},topRight:{points:["br","tr"],overflow:ga},bottomLeft:{points:["tl","bl"],overflow:ga},bottomRight:{points:["tr","br"],overflow:ga},leftTop:{points:["tr","tl"],overflow:ga},leftBottom:{points:["br","bl"],overflow:ga},rightTop:{points:["tl","tr"],overflow:ga},rightBottom:{points:["bl","br"],overflow:ga}},Sxe={topLeft:{points:["bl","tl"],overflow:ga},topRight:{points:["br","tr"],overflow:ga},bottomLeft:{points:["tl","bl"],overflow:ga},bottomRight:{points:["tr","br"],overflow:ga},rightTop:{points:["tr","tl"],overflow:ga},rightBottom:{points:["br","bl"],overflow:ga},leftTop:{points:["tl","tr"],overflow:ga},leftBottom:{points:["bl","br"],overflow:ga}};function mQ(t,r,o){if(r)return r;if(o)return o[t]||o.other}var yxe={horizontal:"bottomLeft",vertical:"rightTop","vertical-left":"rightTop","vertical-right":"leftTop"};function Cxe(t){var r=t.prefixCls,o=t.visible,s=t.children,c=t.popup,d=t.popupStyle,f=t.popupClassName,v=t.popupOffset,g=t.disabled,_=t.mode,C=t.onVisibleChange,b=y.useContext(Zc),T=b.getPopupContainer,A=b.rtl,I=b.subMenuOpenDelay,N=b.subMenuCloseDelay,P=b.builtinPlacements,D=b.triggerSubMenuAction,x=b.forceSubMenuRender,L=b.rootClassName,M=b.motion,F=b.defaultMotions,V=y.useState(!1),$=Ue(V,2),z=$[0],K=$[1],G=_e(A?_e({},Sxe):_e({},_xe),P),J=yxe[_],ne=mQ(_,M,F),te=y.useRef(ne);_!=="inline"&&(te.current=ne);var ce=_e(_e({},te.current),{},{leavedClassName:"".concat(r,"-hidden"),removeOnLeave:!1,motionAppear:!0}),ge=y.useRef();return y.useEffect(function(){return ge.current=ii(function(){K(o)}),function(){ii.cancel(ge.current)}},[o]),y.createElement(K2,{prefixCls:r,popupClassName:Ke("".concat(r,"-popup"),be({},"".concat(r,"-rtl"),A),f,L),stretch:_==="horizontal"?"minWidth":null,getPopupContainer:T,builtinPlacements:G,popupPlacement:J,popupVisible:z,popup:c,popupStyle:d,popupAlign:v&&{offset:v},action:g?[]:[D],mouseEnterDelay:I,mouseLeaveDelay:N,onPopupVisibleChange:C,forceRender:x,popupMotion:ce,fresh:!0},s)}function bxe(t){var r=t.id,o=t.open,s=t.keyPath,c=t.children,d="inline",f=y.useContext(Zc),v=f.prefixCls,g=f.forceSubMenuRender,_=f.motion,C=f.defaultMotions,b=f.mode,T=y.useRef(!1);T.current=b===d;var A=y.useState(!T.current),I=Ue(A,2),N=I[0],P=I[1],D=T.current?o:!1;y.useEffect(function(){T.current&&P(!1)},[b]);var x=_e({},mQ(d,_,C));s.length>1&&(x.motionAppear=!1);var L=x.onVisibleChanged;return x.onVisibleChanged=function(M){return!T.current&&!M&&P(!0),L==null?void 0:L(M)},N?null:y.createElement(Mv,{mode:d,locked:!T.current},y.createElement(ef,nt({visible:D},x,{forceRender:g,removeOnLeave:!1,leavedClassName:"".concat(v,"-hidden")}),function(M){var F=M.className,V=M.style;return y.createElement(iL,{id:r,className:F,style:V},c)}))}var Txe=["style","className","title","eventKey","warnKey","disabled","internalPopupClose","children","itemIcon","expandIcon","popupClassName","popupOffset","popupStyle","onClick","onMouseEnter","onMouseLeave","onTitleClick","onTitleMouseEnter","onTitleMouseLeave"],Rxe=["active"],wxe=y.forwardRef(function(t,r){var o=t.style,s=t.className,c=t.title,d=t.eventKey;t.warnKey;var f=t.disabled,v=t.internalPopupClose,g=t.children,_=t.itemIcon,C=t.expandIcon,b=t.popupClassName,T=t.popupOffset,A=t.popupStyle,I=t.onClick,N=t.onMouseEnter,P=t.onMouseLeave,D=t.onTitleClick,x=t.onTitleMouseEnter,L=t.onTitleMouseLeave,M=xn(t,Txe),F=sQ(d),V=y.useContext(Zc),$=V.prefixCls,z=V.mode,K=V.openKeys,G=V.disabled,J=V.overflowDisabled,ne=V.activeKey,te=V.selectedKeys,ce=V.itemIcon,ge=V.expandIcon,oe=V.onItemClick,ae=V.onOpenChange,ie=V.onActive,ve=y.useContext(tL),me=ve._internalRenderSubMenuItem,le=y.useContext(uQ),de=le.isSubPathKey,Ee=Mm(),se="".concat($,"-submenu"),Te=G||f,we=y.useRef(),Le=y.useRef(),Ie=_??ce,De=C??ge,Ye=K.includes(d),Me=!J&&Ye,Oe=de(te,d),$e=hQ(d,Te,x,L),tt=$e.active,je=xn($e,Rxe),ke=y.useState(!1),dt=Ue(ke,2),Ze=dt[0],ut=dt[1],Tt=function(mt){Te||ut(mt)},pt=function(mt){Tt(!0),N==null||N({key:d,domEvent:mt})},ht=function(mt){Tt(!1),P==null||P({key:d,domEvent:mt})},qe=y.useMemo(function(){return tt||(z!=="inline"?Ze||de([ne],d):!1)},[z,tt,ne,Ze,d,de]),Je=fQ(Ee.length),Ct=function(mt){Te||(D==null||D({key:d,domEvent:mt}),z==="inline"&&ae(d,!Ye))},Nt=$g(function(At){I==null||I(lb(At)),oe(At)}),Ot=function(mt){z!=="inline"&&ae(d,mt)},on=function(){ie(d)},Vt=F&&"".concat(F,"-popup"),kt=y.useMemo(function(){return y.createElement(pQ,{icon:z!=="horizontal"?De:void 0,props:_e(_e({},t),{},{isOpen:Me,isSubMenu:!0})},y.createElement("i",{className:"".concat(se,"-arrow")}))},[z,De,t,Me,se]),Kt=y.createElement("div",nt({role:"menuitem",style:Je,className:"".concat(se,"-title"),tabIndex:Te?null:-1,ref:we,title:typeof c=="string"?c:null,"data-menu-id":J&&F?null:F,"aria-expanded":Me,"aria-haspopup":!0,"aria-controls":Vt,"aria-disabled":Te,onClick:Ct,onFocus:on},je),c,kt),Zt=y.useRef(z);if(z!=="inline"&&Ee.length>1?Zt.current="vertical":Zt.current=z,!J){var Ft=Zt.current;Kt=y.createElement(Cxe,{mode:Ft,prefixCls:se,visible:!v&&Me&&z!=="inline",popupClassName:b,popupOffset:T,popupStyle:A,popup:y.createElement(Mv,{mode:Ft==="horizontal"?"vertical":Ft},y.createElement(iL,{id:Vt,ref:Le},g)),disabled:Te,onVisibleChange:Ot},Kt)}var _t=y.createElement(Ll.Item,nt({ref:r,role:"none"},M,{component:"li",style:o,className:Ke(se,"".concat(se,"-").concat(z),s,be(be(be(be({},"".concat(se,"-open"),Me),"".concat(se,"-active"),qe),"".concat(se,"-selected"),Oe),"".concat(se,"-disabled"),Te)),onMouseEnter:pt,onMouseLeave:ht}),Kt,!J&&y.createElement(bxe,{id:Vt,open:Me,keyPath:Ee},g));return me&&(_t=me(_t,t,{selected:Oe,active:qe,open:Me,disabled:Te})),y.createElement(Mv,{onItemClick:Nt,mode:z==="horizontal"?"vertical":z,itemIcon:Ie,expandIcon:De},_t)}),IT=y.forwardRef(function(t,r){var o=t.eventKey,s=t.children,c=Mm(o),d=oL(s,c),f=RT();y.useEffect(function(){if(f)return f.registerPath(o,c),function(){f.unregisterPath(o,c)}},[c]);var v;return f?v=d:v=y.createElement(wxe,nt({ref:r},t),d),y.createElement(lQ.Provider,{value:c},v)});function aL(t){var r=t.className,o=t.style,s=y.useContext(Zc),c=s.prefixCls,d=RT();return d?null:y.createElement("li",{role:"separator",className:Ke("".concat(c,"-item-divider"),r),style:o})}var Ixe=["className","title","eventKey","children"],Axe=y.forwardRef(function(t,r){var o=t.className,s=t.title;t.eventKey;var c=t.children,d=xn(t,Ixe),f=y.useContext(Zc),v=f.prefixCls,g="".concat(v,"-item-group");return y.createElement("li",nt({ref:r,role:"presentation"},d,{onClick:function(C){return C.stopPropagation()},className:Ke(g,o)}),y.createElement("div",{role:"presentation",className:"".concat(g,"-title"),title:typeof s=="string"?s:void 0},s),y.createElement("ul",{role:"group",className:"".concat(g,"-list")},c))}),sL=y.forwardRef(function(t,r){var o=t.eventKey,s=t.children,c=Mm(o),d=oL(s,c),f=RT();return f?d:y.createElement(Axe,nt({ref:r},ia(t,["warnKey"])),d)}),Oxe=["label","children","key","type","extra"];function uD(t,r,o){var s=r.item,c=r.group,d=r.submenu,f=r.divider;return(t||[]).map(function(v,g){if(v&&ln(v)==="object"){var _=v,C=_.label,b=_.children,T=_.key,A=_.type,I=_.extra,N=xn(_,Oxe),P=T??"tmp-".concat(g);return b||A==="group"?A==="group"?y.createElement(c,nt({key:P},N,{title:C}),uD(b,r,o)):y.createElement(d,nt({key:P},N,{title:C}),uD(b,r,o)):A==="divider"?y.createElement(f,nt({key:P},N)):y.createElement(s,nt({key:P},N,{extra:I}),C,(!!I||I===0)&&y.createElement("span",{className:"".concat(o,"-item-extra")},I))}return null}).filter(function(v){return v})}function Hz(t,r,o,s,c){var d=t,f=_e({divider:aL,item:wT,group:sL,submenu:IT},s);return r&&(d=uD(r,f,c)),oL(d,o)}var xxe=["prefixCls","rootClassName","style","className","tabIndex","items","children","direction","id","mode","inlineCollapsed","disabled","disabledOverflow","subMenuOpenDelay","subMenuCloseDelay","forceSubMenuRender","defaultOpenKeys","openKeys","activeKey","defaultActiveFirst","selectable","multiple","defaultSelectedKeys","selectedKeys","onSelect","onDeselect","inlineIndent","motion","defaultMotions","triggerSubMenuAction","builtinPlacements","itemIcon","expandIcon","overflowedIndicator","overflowedIndicatorPopupClassName","getPopupContainer","onClick","onOpenChange","onKeyDown","openAnimation","openTransitionName","_internalRenderMenuItem","_internalRenderSubMenuItem","_internalComponents"],Ch=[],Nxe=y.forwardRef(function(t,r){var o,s=t,c=s.prefixCls,d=c===void 0?"rc-menu":c,f=s.rootClassName,v=s.style,g=s.className,_=s.tabIndex,C=_===void 0?0:_,b=s.items,T=s.children,A=s.direction,I=s.id,N=s.mode,P=N===void 0?"vertical":N,D=s.inlineCollapsed,x=s.disabled,L=s.disabledOverflow,M=s.subMenuOpenDelay,F=M===void 0?.1:M,V=s.subMenuCloseDelay,$=V===void 0?.1:V,z=s.forceSubMenuRender,K=s.defaultOpenKeys,G=s.openKeys,J=s.activeKey,ne=s.defaultActiveFirst,te=s.selectable,ce=te===void 0?!0:te,ge=s.multiple,oe=ge===void 0?!1:ge,ae=s.defaultSelectedKeys,ie=s.selectedKeys,ve=s.onSelect,me=s.onDeselect,le=s.inlineIndent,de=le===void 0?24:le,Ee=s.motion,se=s.defaultMotions,Te=s.triggerSubMenuAction,we=Te===void 0?"hover":Te,Le=s.builtinPlacements,Ie=s.itemIcon,De=s.expandIcon,Ye=s.overflowedIndicator,Me=Ye===void 0?"...":Ye,Oe=s.overflowedIndicatorPopupClassName,$e=s.getPopupContainer,tt=s.onClick,je=s.onOpenChange,ke=s.onKeyDown;s.openAnimation,s.openTransitionName;var dt=s._internalRenderMenuItem,Ze=s._internalRenderSubMenuItem,ut=s._internalComponents,Tt=xn(s,xxe),pt=y.useMemo(function(){return[Hz(T,b,Ch,ut,d),Hz(T,b,Ch,{},d)]},[T,b,ut]),ht=Ue(pt,2),qe=ht[0],Je=ht[1],Ct=y.useState(!1),Nt=Ue(Ct,2),Ot=Nt[0],on=Nt[1],Vt=y.useRef(),kt=lxe(I),Kt=A==="rtl",Zt=Sa(K,{value:G,postState:function(qt){return qt||Ch}}),Ft=Ue(Zt,2),_t=Ft[0],At=Ft[1],mt=function(qt){var Ut=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;function yr(){At(qt),je==null||je(qt)}Ut?Ml.flushSync(yr):yr()},Pt=y.useState(_t),gn=Ue(Pt,2),Mn=gn[0],pi=gn[1],Zr=y.useRef(!1),Si=y.useMemo(function(){return(P==="inline"||P==="vertical")&&D?["vertical",D]:[P,!1]},[P,D]),Dr=Ue(Si,2),Gn=Dr[0],Ir=Dr[1],vn=Gn==="inline",Qt=y.useState(Gn),Dt=Ue(Qt,2),bt=Dt[0],un=Dt[1],Sn=y.useState(Ir),ft=Ue(Sn,2),gt=ft[0],Wt=ft[1];y.useEffect(function(){un(Gn),Wt(Ir),Zr.current&&(vn?At(Mn):mt(Ch))},[Gn,Ir]);var Yt=y.useState(0),jt=Ue(Yt,2),dn=jt[0],ar=jt[1],Xn=dn>=qe.length-1||bt!=="horizontal"||L;y.useEffect(function(){vn&&pi(_t)},[_t]),y.useEffect(function(){return Zr.current=!0,function(){Zr.current=!1}},[]);var $n=sxe(),nr=$n.registerPath,Wr=$n.unregisterPath,ai=$n.refreshOverflowKeys,si=$n.isSubPathKey,Vi=$n.getKeyPath,Fr=$n.getKeys,Lr=$n.getSubPathKeys,St=y.useMemo(function(){return{registerPath:nr,unregisterPath:Wr}},[nr,Wr]),Gt=y.useMemo(function(){return{isSubPathKey:si}},[si]);y.useEffect(function(){ai(Xn?Ch:qe.slice(dn+1).map(function(Ar){return Ar.key}))},[dn,Xn]);var cn=Sa(J||ne&&((o=qe[0])===null||o===void 0?void 0:o.key),{value:J}),Ln=Ue(cn,2),ur=Ln[0],Jn=Ln[1],ji=$g(function(Ar){Jn(Ar)}),ka=$g(function(){Jn(void 0)});y.useImperativeHandle(r,function(){return{list:Vt.current,focus:function(qt){var Ut,yr=Fr(),Cr=cD(yr,kt),$r=Cr.elements,ci=Cr.key2element,Go=Cr.element2key,go=nL(Vt.current,$r),vo=ur??(go[0]?Go.get(go[0]):(Ut=qe.find(function(Fa){return!Fa.props.disabled}))===null||Ut===void 0?void 0:Ut.key),Eo=ci.get(vo);if(vo&&Eo){var _o;Eo==null||(_o=Eo.focus)===null||_o===void 0||_o.call(Eo,qt)}}}});var an=Sa(ae||[],{value:ie,postState:function(qt){return Array.isArray(qt)?qt:qt==null?Ch:[qt]}}),Pn=Ue(an,2),Hn=Pn[0],yi=Pn[1],Ho=function(qt){if(ce){var Ut=qt.key,yr=Hn.includes(Ut),Cr;oe?yr?Cr=Hn.filter(function(ci){return ci!==Ut}):Cr=[].concat(Et(Hn),[Ut]):Cr=[Ut],yi(Cr);var $r=_e(_e({},qt),{},{selectedKeys:Cr});yr?me==null||me($r):ve==null||ve($r)}!oe&&_t.length&&bt!=="inline"&&mt(Ch)},rl=$g(function(Ar){tt==null||tt(lb(Ar)),Ho(Ar)}),xo=$g(function(Ar,qt){var Ut=_t.filter(function(Cr){return Cr!==Ar});if(qt)Ut.push(Ar);else if(bt!=="inline"){var yr=Lr(Ar);Ut=Ut.filter(function(Cr){return!yr.has(Cr)})}Av(_t,Ut,!0)||mt(Ut,!0)}),zo=function(qt,Ut){var yr=Ut??!_t.includes(qt);xo(qt,yr)},Wo=ixe(bt,ur,Kt,kt,Vt,Fr,Vi,Jn,zo,ke);y.useEffect(function(){on(!0)},[]);var Ma=y.useMemo(function(){return{_internalRenderMenuItem:dt,_internalRenderSubMenuItem:Ze}},[dt,Ze]),oa=bt!=="horizontal"||L?qe:qe.map(function(Ar,qt){return y.createElement(Mv,{key:Ar.key,overflowDisabled:qt>dn},Ar)}),hr=y.createElement(Ll,nt({id:I,ref:Vt,prefixCls:"".concat(d,"-overflow"),component:"ul",itemComponent:wT,className:Ke(d,"".concat(d,"-root"),"".concat(d,"-").concat(bt),g,be(be({},"".concat(d,"-inline-collapsed"),gt),"".concat(d,"-rtl"),Kt),f),dir:A,style:v,role:"menu",tabIndex:C,data:oa,renderRawItem:function(qt){return qt},renderRawRest:function(qt){var Ut=qt.length,yr=Ut?qe.slice(-Ut):null;return y.createElement(IT,{eventKey:lD,title:Me,disabled:Xn,internalPopupClose:Ut===0,popupClassName:Oe},yr)},maxCount:bt!=="horizontal"||L?Ll.INVALIDATE:Ll.RESPONSIVE,ssr:"full","data-menu-list":!0,onVisibleChange:function(qt){ar(qt)},onKeyDown:Wo},Tt));return y.createElement(tL.Provider,{value:Ma},y.createElement(oQ.Provider,{value:kt},y.createElement(Mv,{prefixCls:d,rootClassName:f,mode:bt,openKeys:_t,rtl:Kt,disabled:x,motion:Ot?Ee:null,defaultMotions:Ot?se:null,activeKey:ur,onActive:ji,onInactive:ka,selectedKeys:Hn,inlineIndent:de,subMenuOpenDelay:F,subMenuCloseDelay:$,forceSubMenuRender:z,builtinPlacements:Le,triggerSubMenuAction:we,getPopupContainer:$e,itemIcon:Ie,expandIcon:De,onItemClick:rl,onOpenChange:xo},y.createElement(uQ.Provider,{value:Gt},hr),y.createElement("div",{style:{display:"none"},"aria-hidden":!0},y.createElement(cQ.Provider,{value:St},Je)))))}),iE=Nxe;iE.Item=wT;iE.SubMenu=IT;iE.ItemGroup=sL;iE.Divider=aL;var Pxe={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM104 228a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"bars",theme:"outlined"};const Dxe=Pxe;var Lxe=function(r,o){return y.createElement(ao,nt({},r,{ref:o,icon:Dxe}))},kxe=y.forwardRef(Lxe);const Mxe=kxe,gQ=y.createContext({siderHook:{addSider:()=>null,removeSider:()=>null}}),Fxe=t=>{const{antCls:r,componentCls:o,colorText:s,footerBg:c,headerHeight:d,headerPadding:f,headerColor:v,footerPadding:g,fontSize:_,bodyBg:C,headerBg:b}=t;return{[o]:{display:"flex",flex:"auto",flexDirection:"column",minHeight:0,background:C,"&, *":{boxSizing:"border-box"},[`&${o}-has-sider`]:{flexDirection:"row",[`> ${o}, > ${o}-content`]:{width:0}},[`${o}-header, &${o}-footer`]:{flex:"0 0 auto"},"&-rtl":{direction:"rtl"}},[`${o}-header`]:{height:d,padding:f,color:v,lineHeight:Xe(d),background:b,[`${r}-menu`]:{lineHeight:"inherit"}},[`${o}-footer`]:{padding:g,color:s,fontSize:_,background:c},[`${o}-content`]:{flex:"auto",color:s,minHeight:0}}},vQ=t=>{const{colorBgLayout:r,controlHeight:o,controlHeightLG:s,colorText:c,controlHeightSM:d,marginXXS:f,colorTextLightSolid:v,colorBgContainer:g}=t,_=s*1.25;return{colorBgHeader:"#001529",colorBgBody:r,colorBgTrigger:"#002140",bodyBg:r,headerBg:"#001529",headerHeight:o*2,headerPadding:`0 ${_}px`,headerColor:c,footerPadding:`${d}px ${_}px`,footerBg:r,siderBg:"#001529",triggerHeight:s+f*2,triggerBg:"#002140",triggerColor:v,zeroTriggerWidth:s,zeroTriggerHeight:s,lightSiderBg:g,lightTriggerBg:g,lightTriggerColor:c}},EQ=[["colorBgBody","bodyBg"],["colorBgHeader","headerBg"],["colorBgTrigger","triggerBg"]],_Q=Oo("Layout",t=>[Fxe(t)],vQ,{deprecatedTokens:EQ}),Uxe=t=>{const{componentCls:r,siderBg:o,motionDurationMid:s,motionDurationSlow:c,antCls:d,triggerHeight:f,triggerColor:v,triggerBg:g,headerHeight:_,zeroTriggerWidth:C,zeroTriggerHeight:b,borderRadiusLG:T,lightSiderBg:A,lightTriggerColor:I,lightTriggerBg:N,bodyBg:P}=t;return{[r]:{position:"relative",minWidth:0,background:o,transition:`all ${s}, background 0s`,"&-has-trigger":{paddingBottom:f},"&-right":{order:1},[`${r}-children`]:{height:"100%",marginTop:-.1,paddingTop:.1,[`${d}-menu${d}-menu-inline-collapsed`]:{width:"auto"}},[`&-zero-width ${r}-children`]:{overflow:"hidden"},[`${r}-trigger`]:{position:"fixed",bottom:0,zIndex:1,height:f,color:v,lineHeight:Xe(f),textAlign:"center",background:g,cursor:"pointer",transition:`all ${s}`},[`${r}-zero-width-trigger`]:{position:"absolute",top:_,insetInlineEnd:t.calc(C).mul(-1).equal(),zIndex:1,width:C,height:b,color:v,fontSize:t.fontSizeXL,display:"flex",alignItems:"center",justifyContent:"center",background:o,borderRadius:`0 ${Xe(T)} ${Xe(T)} 0`,cursor:"pointer",transition:`background ${c} ease`,"&::after":{position:"absolute",inset:0,background:"transparent",transition:`all ${c}`,content:'""'},"&:hover::after":{background:"rgba(255, 255, 255, 0.2)"},"&-right":{insetInlineStart:t.calc(C).mul(-1).equal(),borderRadius:`${Xe(T)} 0 0 ${Xe(T)}`}},"&-light":{background:A,[`${r}-trigger`]:{color:I,background:N},[`${r}-zero-width-trigger`]:{color:I,background:N,border:`1px solid ${P}`,borderInlineStart:0}}}}},Bxe=Oo(["Layout","Sider"],t=>[Uxe(t)],vQ,{deprecatedTokens:EQ});var Vxe=globalThis&&globalThis.__rest||function(t,r){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&r.indexOf(s)<0&&(o[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(t);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(t,s[c])&&(o[s[c]]=t[s[c]]);return o};const zz={xs:"479.98px",sm:"575.98px",md:"767.98px",lg:"991.98px",xl:"1199.98px",xxl:"1599.98px"},jxe=t=>!Number.isNaN(Number.parseFloat(t))&&isFinite(t),AT=y.createContext({}),$xe=(()=>{let t=0;return function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return t+=1,`${r}${t}`}})(),Hxe=y.forwardRef((t,r)=>{const{prefixCls:o,className:s,trigger:c,children:d,defaultCollapsed:f=!1,theme:v="dark",style:g={},collapsible:_=!1,reverseArrow:C=!1,width:b=200,collapsedWidth:T=80,zeroWidthTriggerStyle:A,breakpoint:I,onCollapse:N,onBreakpoint:P}=t,D=Vxe(t,["prefixCls","className","trigger","children","defaultCollapsed","theme","style","collapsible","reverseArrow","width","collapsedWidth","zeroWidthTriggerStyle","breakpoint","onCollapse","onBreakpoint"]),{siderHook:x}=y.useContext(gQ),[L,M]=y.useState("collapsed"in t?t.collapsed:f),[F,V]=y.useState(!1);y.useEffect(()=>{"collapsed"in t&&M(t.collapsed)},[t.collapsed]);const $=(Ie,De)=>{"collapsed"in t||M(Ie),N==null||N(Ie,De)},{getPrefixCls:z,direction:K}=y.useContext(wr),G=z("layout-sider",o),[J,ne,te]=Bxe(G),ce=y.useRef(null);ce.current=Ie=>{V(Ie.matches),P==null||P(Ie.matches),L!==Ie.matches&&$(Ie.matches,"responsive")},y.useEffect(()=>{function Ie(Ye){return ce.current(Ye)}let De;if(typeof window<"u"){const{matchMedia:Ye}=window;if(Ye&&I&&I in zz){De=Ye(`screen and (max-width: ${zz[I]})`);try{De.addEventListener("change",Ie)}catch{De.addListener(Ie)}Ie(De)}}return()=>{try{De==null||De.removeEventListener("change",Ie)}catch{De==null||De.removeListener(Ie)}}},[I]),y.useEffect(()=>{const Ie=$xe("ant-sider-");return x.addSider(Ie),()=>x.removeSider(Ie)},[]);const ge=()=>{$(!L,"clickTrigger")},oe=ia(D,["collapsed"]),ae=L?T:b,ie=jxe(ae)?`${ae}px`:String(ae),ve=parseFloat(String(T||0))===0?y.createElement("span",{onClick:ge,className:Ke(`${G}-zero-width-trigger`,`${G}-zero-width-trigger-${C?"right":"left"}`),style:A},c||y.createElement(Mxe,null)):null,me=K==="rtl"==!C,Ee={expanded:me?y.createElement(ib,null):y.createElement(cb,null),collapsed:me?y.createElement(cb,null):y.createElement(ib,null)}[L?"collapsed":"expanded"],se=c!==null?ve||y.createElement("div",{className:`${G}-trigger`,onClick:ge,style:{width:ie}},c||Ee):null,Te=Object.assign(Object.assign({},g),{flex:`0 0 ${ie}`,maxWidth:ie,minWidth:ie,width:ie}),we=Ke(G,`${G}-${v}`,{[`${G}-collapsed`]:!!L,[`${G}-has-trigger`]:_&&c!==null&&!ve,[`${G}-below`]:!!F,[`${G}-zero-width`]:parseFloat(ie)===0},s,ne,te),Le=y.useMemo(()=>({siderCollapsed:L}),[L]);return J(y.createElement(AT.Provider,{value:Le},y.createElement("aside",Object.assign({className:we},oe,{style:Te,ref:r}),y.createElement("div",{className:`${G}-children`},d),_||F&&ve?se:null)))}),SQ=Hxe;var zxe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M176 511a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"ellipsis",theme:"outlined"};const Wxe=zxe;var Gxe=function(r,o){return y.createElement(ao,nt({},r,{ref:o,icon:Wxe}))},Kxe=y.forwardRef(Gxe);const Yxe=Kxe,qxe=y.createContext({prefixCls:"",firstLevel:!0,inlineCollapsed:!1}),ub=qxe;var Xxe=globalThis&&globalThis.__rest||function(t,r){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&r.indexOf(s)<0&&(o[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(t);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(t,s[c])&&(o[s[c]]=t[s[c]]);return o};const Jxe=t=>{const{prefixCls:r,className:o,dashed:s}=t,c=Xxe(t,["prefixCls","className","dashed"]),{getPrefixCls:d}=y.useContext(wr),f=d("menu",r),v=Ke({[`${f}-item-divider-dashed`]:!!s},o);return y.createElement(aL,Object.assign({className:v},c))},yQ=Jxe,Qxe=t=>{var r;const{className:o,children:s,icon:c,title:d,danger:f,extra:v}=t,{prefixCls:g,firstLevel:_,direction:C,disableMenuItemTitleTooltip:b,inlineCollapsed:T}=y.useContext(ub),A=L=>{const M=s==null?void 0:s[0],F=y.createElement("span",{className:Ke(`${g}-title-content`,{[`${g}-title-content-with-extra`]:!!v||v===0})},s);return(!c||y.isValidElement(s)&&s.type==="span")&&s&&L&&_&&typeof M=="string"?y.createElement("div",{className:`${g}-inline-collapsed-noicon`},M.charAt(0)):F},{siderCollapsed:I}=y.useContext(AT);let N=d;typeof d>"u"?N=_?s:"":d===!1&&(N="");const P={title:N};!I&&!T&&(P.title=null,P.open=!1);const D=Qc(s).length;let x=y.createElement(wT,Object.assign({},ia(t,["title","icon","danger"]),{className:Ke({[`${g}-item-danger`]:f,[`${g}-item-only-child`]:(c?D+1:D)===1},o),title:typeof d=="string"?d:void 0}),gc(c,{className:Ke(y.isValidElement(c)?(r=c.props)===null||r===void 0?void 0:r.className:"",`${g}-item-icon`)}),A(T));return b||(x=y.createElement(rE,Object.assign({},P,{placement:C==="rtl"?"left":"right",classNames:{root:`${g}-inline-collapsed-tooltip`}}),x)),x},CQ=Qxe;globalThis&&globalThis.__rest;const Zxe=y.createContext(null),Wz=Zxe,eNe=t=>{const{componentCls:r,motionDurationSlow:o,horizontalLineHeight:s,colorSplit:c,lineWidth:d,lineType:f,itemPaddingInline:v}=t;return{[`${r}-horizontal`]:{lineHeight:s,border:0,borderBottom:`${Xe(d)} ${f} ${c}`,boxShadow:"none","&::after":{display:"block",clear:"both",height:0,content:'"\\20"'},[`${r}-item, ${r}-submenu`]:{position:"relative",display:"inline-block",verticalAlign:"bottom",paddingInline:v},[`> ${r}-item:hover,
        > ${r}-item-active,
        > ${r}-submenu ${r}-submenu-title:hover`]:{backgroundColor:"transparent"},[`${r}-item, ${r}-submenu-title`]:{transition:[`border-color ${o}`,`background ${o}`].join(",")},[`${r}-submenu-arrow`]:{display:"none"}}}},tNe=eNe,nNe=t=>{let{componentCls:r,menuArrowOffset:o,calc:s}=t;return{[`${r}-rtl`]:{direction:"rtl"},[`${r}-submenu-rtl`]:{transformOrigin:"100% 0"},[`${r}-rtl${r}-vertical,
    ${r}-submenu-rtl ${r}-vertical`]:{[`${r}-submenu-arrow`]:{"&::before":{transform:`rotate(-45deg) translateY(${Xe(s(o).mul(-1).equal())})`},"&::after":{transform:`rotate(45deg) translateY(${Xe(o)})`}}}}},rNe=nNe,Gz=t=>Object.assign({},eb(t)),iNe=(t,r)=>{const{componentCls:o,itemColor:s,itemSelectedColor:c,subMenuItemSelectedColor:d,groupTitleColor:f,itemBg:v,subMenuItemBg:g,itemSelectedBg:_,activeBarHeight:C,activeBarWidth:b,activeBarBorderWidth:T,motionDurationSlow:A,motionEaseInOut:I,motionEaseOut:N,itemPaddingInline:P,motionDurationMid:D,itemHoverColor:x,lineType:L,colorSplit:M,itemDisabledColor:F,dangerItemColor:V,dangerItemHoverColor:$,dangerItemSelectedColor:z,dangerItemActiveBg:K,dangerItemSelectedBg:G,popupBg:J,itemHoverBg:ne,itemActiveBg:te,menuSubMenuBg:ce,horizontalItemSelectedColor:ge,horizontalItemSelectedBg:oe,horizontalItemBorderRadius:ae,horizontalItemHoverBg:ie}=t;return{[`${o}-${r}, ${o}-${r} > ${o}`]:{color:s,background:v,[`&${o}-root:focus-visible`]:Object.assign({},Gz(t)),[`${o}-item`]:{"&-group-title, &-extra":{color:f}},[`${o}-submenu-selected > ${o}-submenu-title`]:{color:d},[`${o}-item, ${o}-submenu-title`]:{color:s,[`&:not(${o}-item-disabled):focus-visible`]:Object.assign({},Gz(t))},[`${o}-item-disabled, ${o}-submenu-disabled`]:{color:`${F} !important`},[`${o}-item:not(${o}-item-selected):not(${o}-submenu-selected)`]:{[`&:hover, > ${o}-submenu-title:hover`]:{color:x}},[`&:not(${o}-horizontal)`]:{[`${o}-item:not(${o}-item-selected)`]:{"&:hover":{backgroundColor:ne},"&:active":{backgroundColor:te}},[`${o}-submenu-title`]:{"&:hover":{backgroundColor:ne},"&:active":{backgroundColor:te}}},[`${o}-item-danger`]:{color:V,[`&${o}-item:hover`]:{[`&:not(${o}-item-selected):not(${o}-submenu-selected)`]:{color:$}},[`&${o}-item:active`]:{background:K}},[`${o}-item a`]:{"&, &:hover":{color:"inherit"}},[`${o}-item-selected`]:{color:c,[`&${o}-item-danger`]:{color:z},"a, a:hover":{color:"inherit"}},[`& ${o}-item-selected`]:{backgroundColor:_,[`&${o}-item-danger`]:{backgroundColor:G}},[`&${o}-submenu > ${o}`]:{backgroundColor:ce},[`&${o}-popup > ${o}`]:{backgroundColor:J},[`&${o}-submenu-popup > ${o}`]:{backgroundColor:J},[`&${o}-horizontal`]:Object.assign(Object.assign({},r==="dark"?{borderBottom:0}:{}),{[`> ${o}-item, > ${o}-submenu`]:{top:T,marginTop:t.calc(T).mul(-1).equal(),marginBottom:0,borderRadius:ae,"&::after":{position:"absolute",insetInline:P,bottom:0,borderBottom:`${Xe(C)} solid transparent`,transition:`border-color ${A} ${I}`,content:'""'},"&:hover, &-active, &-open":{background:ie,"&::after":{borderBottomWidth:C,borderBottomColor:ge}},"&-selected":{color:ge,backgroundColor:oe,"&:hover":{backgroundColor:oe},"&::after":{borderBottomWidth:C,borderBottomColor:ge}}}}),[`&${o}-root`]:{[`&${o}-inline, &${o}-vertical`]:{borderInlineEnd:`${Xe(T)} ${L} ${M}`}},[`&${o}-inline`]:{[`${o}-sub${o}-inline`]:{background:g},[`${o}-item`]:{position:"relative","&::after":{position:"absolute",insetBlock:0,insetInlineEnd:0,borderInlineEnd:`${Xe(b)} solid ${c}`,transform:"scaleY(0.0001)",opacity:0,transition:[`transform ${D} ${N}`,`opacity ${D} ${N}`].join(","),content:'""'},[`&${o}-item-danger`]:{"&::after":{borderInlineEndColor:z}}},[`${o}-selected, ${o}-item-selected`]:{"&::after":{transform:"scaleY(1)",opacity:1,transition:[`transform ${D} ${I}`,`opacity ${D} ${I}`].join(",")}}}}}},Kz=iNe,Yz=t=>{const{componentCls:r,itemHeight:o,itemMarginInline:s,padding:c,menuArrowSize:d,marginXS:f,itemMarginBlock:v,itemWidth:g,itemPaddingInline:_}=t,C=t.calc(d).add(c).add(f).equal();return{[`${r}-item`]:{position:"relative",overflow:"hidden"},[`${r}-item, ${r}-submenu-title`]:{height:o,lineHeight:Xe(o),paddingInline:_,overflow:"hidden",textOverflow:"ellipsis",marginInline:s,marginBlock:v,width:g},[`> ${r}-item,
            > ${r}-submenu > ${r}-submenu-title`]:{height:o,lineHeight:Xe(o)},[`${r}-item-group-list ${r}-submenu-title,
            ${r}-submenu-title`]:{paddingInlineEnd:C}}},oNe=t=>{const{componentCls:r,iconCls:o,itemHeight:s,colorTextLightSolid:c,dropdownWidth:d,controlHeightLG:f,motionEaseOut:v,paddingXL:g,itemMarginInline:_,fontSizeLG:C,motionDurationFast:b,motionDurationSlow:T,paddingXS:A,boxShadowSecondary:I,collapsedWidth:N,collapsedIconSize:P}=t,D={height:s,lineHeight:Xe(s),listStylePosition:"inside",listStyleType:"disc"};return[{[r]:{"&-inline, &-vertical":Object.assign({[`&${r}-root`]:{boxShadow:"none"}},Yz(t))},[`${r}-submenu-popup`]:{[`${r}-vertical`]:Object.assign(Object.assign({},Yz(t)),{boxShadow:I})}},{[`${r}-submenu-popup ${r}-vertical${r}-sub`]:{minWidth:d,maxHeight:`calc(100vh - ${Xe(t.calc(f).mul(2.5).equal())})`,padding:"0",overflow:"hidden",borderInlineEnd:0,"&:not([class*='-active'])":{overflowX:"hidden",overflowY:"auto"}}},{[`${r}-inline`]:{width:"100%",[`&${r}-root`]:{[`${r}-item, ${r}-submenu-title`]:{display:"flex",alignItems:"center",transition:[`border-color ${T}`,`background ${T}`,`padding ${b} ${v}`].join(","),[`> ${r}-title-content`]:{flex:"auto",minWidth:0,overflow:"hidden",textOverflow:"ellipsis"},"> *":{flex:"none"}}},[`${r}-sub${r}-inline`]:{padding:0,border:0,borderRadius:0,boxShadow:"none",[`& > ${r}-submenu > ${r}-submenu-title`]:D,[`& ${r}-item-group-title`]:{paddingInlineStart:g}},[`${r}-item`]:D}},{[`${r}-inline-collapsed`]:{width:N,[`&${r}-root`]:{[`${r}-item, ${r}-submenu ${r}-submenu-title`]:{[`> ${r}-inline-collapsed-noicon`]:{fontSize:C,textAlign:"center"}}},[`> ${r}-item,
          > ${r}-item-group > ${r}-item-group-list > ${r}-item,
          > ${r}-item-group > ${r}-item-group-list > ${r}-submenu > ${r}-submenu-title,
          > ${r}-submenu > ${r}-submenu-title`]:{insetInlineStart:0,paddingInline:`calc(50% - ${Xe(t.calc(P).div(2).equal())} - ${Xe(_)})`,textOverflow:"clip",[`
            ${r}-submenu-arrow,
            ${r}-submenu-expand-icon
          `]:{opacity:0},[`${r}-item-icon, ${o}`]:{margin:0,fontSize:P,lineHeight:Xe(s),"+ span":{display:"inline-block",opacity:0}}},[`${r}-item-icon, ${o}`]:{display:"inline-block"},"&-tooltip":{pointerEvents:"none",[`${r}-item-icon, ${o}`]:{display:"none"},"a, a:hover":{color:c}},[`${r}-item-group-title`]:Object.assign(Object.assign({},ZC),{paddingInline:A})}}]},aNe=oNe,qz=t=>{const{componentCls:r,motionDurationSlow:o,motionDurationMid:s,motionEaseInOut:c,motionEaseOut:d,iconCls:f,iconSize:v,iconMarginInlineEnd:g}=t;return{[`${r}-item, ${r}-submenu-title`]:{position:"relative",display:"block",margin:0,whiteSpace:"nowrap",cursor:"pointer",transition:[`border-color ${o}`,`background ${o}`,`padding calc(${o} + 0.1s) ${c}`].join(","),[`${r}-item-icon, ${f}`]:{minWidth:v,fontSize:v,transition:[`font-size ${s} ${d}`,`margin ${o} ${c}`,`color ${o}`].join(","),"+ span":{marginInlineStart:g,opacity:1,transition:[`opacity ${o} ${c}`,`margin ${o}`,`color ${o}`].join(",")}},[`${r}-item-icon`]:Object.assign({},Qv()),[`&${r}-item-only-child`]:{[`> ${f}, > ${r}-item-icon`]:{marginInlineEnd:0}}},[`${r}-item-disabled, ${r}-submenu-disabled`]:{background:"none !important",cursor:"not-allowed","&::after":{borderColor:"transparent !important"},a:{color:"inherit !important",cursor:"not-allowed",pointerEvents:"none"},[`> ${r}-submenu-title`]:{color:"inherit !important",cursor:"not-allowed"}}}},Xz=t=>{const{componentCls:r,motionDurationSlow:o,motionEaseInOut:s,borderRadius:c,menuArrowSize:d,menuArrowOffset:f}=t;return{[`${r}-submenu`]:{"&-expand-icon, &-arrow":{position:"absolute",top:"50%",insetInlineEnd:t.margin,width:d,color:"currentcolor",transform:"translateY(-50%)",transition:`transform ${o} ${s}, opacity ${o}`},"&-arrow":{"&::before, &::after":{position:"absolute",width:t.calc(d).mul(.6).equal(),height:t.calc(d).mul(.15).equal(),backgroundColor:"currentcolor",borderRadius:c,transition:[`background ${o} ${s}`,`transform ${o} ${s}`,`top ${o} ${s}`,`color ${o} ${s}`].join(","),content:'""'},"&::before":{transform:`rotate(45deg) translateY(${Xe(t.calc(f).mul(-1).equal())})`},"&::after":{transform:`rotate(-45deg) translateY(${Xe(f)})`}}}}},sNe=t=>{const{antCls:r,componentCls:o,fontSize:s,motionDurationSlow:c,motionDurationMid:d,motionEaseInOut:f,paddingXS:v,padding:g,colorSplit:_,lineWidth:C,zIndexPopup:b,borderRadiusLG:T,subMenuItemBorderRadius:A,menuArrowSize:I,menuArrowOffset:N,lineType:P,groupTitleLineHeight:D,groupTitleFontSize:x}=t;return[{"":{[o]:Object.assign(Object.assign({},NP()),{"&-hidden":{display:"none"}})},[`${o}-submenu-hidden`]:{display:"none"}},{[o]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Ps(t)),NP()),{marginBottom:0,paddingInlineStart:0,fontSize:s,lineHeight:0,listStyle:"none",outline:"none",transition:`width ${c} cubic-bezier(0.2, 0, 0, 1) 0s`,"ul, ol":{margin:0,padding:0,listStyle:"none"},"&-overflow":{display:"flex",[`${o}-item`]:{flex:"none"}},[`${o}-item, ${o}-submenu, ${o}-submenu-title`]:{borderRadius:t.itemBorderRadius},[`${o}-item-group-title`]:{padding:`${Xe(v)} ${Xe(g)}`,fontSize:x,lineHeight:D,transition:`all ${c}`},[`&-horizontal ${o}-submenu`]:{transition:[`border-color ${c} ${f}`,`background ${c} ${f}`].join(",")},[`${o}-submenu, ${o}-submenu-inline`]:{transition:[`border-color ${c} ${f}`,`background ${c} ${f}`,`padding ${d} ${f}`].join(",")},[`${o}-submenu ${o}-sub`]:{cursor:"initial",transition:[`background ${c} ${f}`,`padding ${c} ${f}`].join(",")},[`${o}-title-content`]:{transition:`color ${c}`,"&-with-extra":{display:"inline-flex",alignItems:"center",width:"100%"},[`> ${r}-typography-ellipsis-single-line`]:{display:"inline",verticalAlign:"unset"},[`${o}-item-extra`]:{marginInlineStart:"auto",paddingInlineStart:t.padding}},[`${o}-item a`]:{"&::before":{position:"absolute",inset:0,backgroundColor:"transparent",content:'""'}},[`${o}-item-divider`]:{overflow:"hidden",lineHeight:0,borderColor:_,borderStyle:P,borderWidth:0,borderTopWidth:C,marginBlock:C,padding:0,"&-dashed":{borderStyle:"dashed"}}}),qz(t)),{[`${o}-item-group`]:{[`${o}-item-group-list`]:{margin:0,padding:0,[`${o}-item, ${o}-submenu-title`]:{paddingInline:`${Xe(t.calc(s).mul(2).equal())} ${Xe(g)}`}}},"&-submenu":{"&-popup":{position:"absolute",zIndex:b,borderRadius:T,boxShadow:"none",transformOrigin:"0 0",[`&${o}-submenu`]:{background:"transparent"},"&::before":{position:"absolute",inset:0,zIndex:-1,width:"100%",height:"100%",opacity:0,content:'""'},[`> ${o}`]:Object.assign(Object.assign(Object.assign({borderRadius:T},qz(t)),Xz(t)),{[`${o}-item, ${o}-submenu > ${o}-submenu-title`]:{borderRadius:A},[`${o}-submenu-title::after`]:{transition:`transform ${c} ${f}`}})},"\n          &-placement-leftTop,\n          &-placement-bottomRight,\n          ":{transformOrigin:"100% 0"},"\n          &-placement-leftBottom,\n          &-placement-topRight,\n          ":{transformOrigin:"100% 100%"},"\n          &-placement-rightBottom,\n          &-placement-topLeft,\n          ":{transformOrigin:"0 100%"},"\n          &-placement-bottomLeft,\n          &-placement-rightTop,\n          ":{transformOrigin:"0 0"},"\n          &-placement-leftTop,\n          &-placement-leftBottom\n          ":{paddingInlineEnd:t.paddingXS},"\n          &-placement-rightTop,\n          &-placement-rightBottom\n          ":{paddingInlineStart:t.paddingXS},"\n          &-placement-topRight,\n          &-placement-topLeft\n          ":{paddingBottom:t.paddingXS},"\n          &-placement-bottomRight,\n          &-placement-bottomLeft\n          ":{paddingTop:t.paddingXS}}}),Xz(t)),{[`&-inline-collapsed ${o}-submenu-arrow,
        &-inline ${o}-submenu-arrow`]:{"&::before":{transform:`rotate(-45deg) translateX(${Xe(N)})`},"&::after":{transform:`rotate(45deg) translateX(${Xe(t.calc(N).mul(-1).equal())})`}},[`${o}-submenu-open${o}-submenu-inline > ${o}-submenu-title > ${o}-submenu-arrow`]:{transform:`translateY(${Xe(t.calc(I).mul(.2).mul(-1).equal())})`,"&::after":{transform:`rotate(-45deg) translateX(${Xe(t.calc(N).mul(-1).equal())})`},"&::before":{transform:`rotate(45deg) translateX(${Xe(N)})`}}})},{[`${r}-layout-header`]:{[o]:{lineHeight:"inherit"}}}]},cNe=t=>{var r,o,s;const{colorPrimary:c,colorError:d,colorTextDisabled:f,colorErrorBg:v,colorText:g,colorTextDescription:_,colorBgContainer:C,colorFillAlter:b,colorFillContent:T,lineWidth:A,lineWidthBold:I,controlItemBgActive:N,colorBgTextHover:P,controlHeightLG:D,lineHeight:x,colorBgElevated:L,marginXXS:M,padding:F,fontSize:V,controlHeightSM:$,fontSizeLG:z,colorTextLightSolid:K,colorErrorHover:G}=t,J=(r=t.activeBarWidth)!==null&&r!==void 0?r:0,ne=(o=t.activeBarBorderWidth)!==null&&o!==void 0?o:A,te=(s=t.itemMarginInline)!==null&&s!==void 0?s:t.marginXXS,ce=new qr(K).setA(.65).toRgbString();return{dropdownWidth:160,zIndexPopup:t.zIndexPopupBase+50,radiusItem:t.borderRadiusLG,itemBorderRadius:t.borderRadiusLG,radiusSubMenuItem:t.borderRadiusSM,subMenuItemBorderRadius:t.borderRadiusSM,colorItemText:g,itemColor:g,colorItemTextHover:g,itemHoverColor:g,colorItemTextHoverHorizontal:c,horizontalItemHoverColor:c,colorGroupTitle:_,groupTitleColor:_,colorItemTextSelected:c,itemSelectedColor:c,subMenuItemSelectedColor:c,colorItemTextSelectedHorizontal:c,horizontalItemSelectedColor:c,colorItemBg:C,itemBg:C,colorItemBgHover:P,itemHoverBg:P,colorItemBgActive:T,itemActiveBg:N,colorSubItemBg:b,subMenuItemBg:b,colorItemBgSelected:N,itemSelectedBg:N,colorItemBgSelectedHorizontal:"transparent",horizontalItemSelectedBg:"transparent",colorActiveBarWidth:0,activeBarWidth:J,colorActiveBarHeight:I,activeBarHeight:I,colorActiveBarBorderSize:A,activeBarBorderWidth:ne,colorItemTextDisabled:f,itemDisabledColor:f,colorDangerItemText:d,dangerItemColor:d,colorDangerItemTextHover:d,dangerItemHoverColor:d,colorDangerItemTextSelected:d,dangerItemSelectedColor:d,colorDangerItemBgActive:v,dangerItemActiveBg:v,colorDangerItemBgSelected:v,dangerItemSelectedBg:v,itemMarginInline:te,horizontalItemBorderRadius:0,horizontalItemHoverBg:"transparent",itemHeight:D,groupTitleLineHeight:x,collapsedWidth:D*2,popupBg:L,itemMarginBlock:M,itemPaddingInline:F,horizontalLineHeight:`${D*1.15}px`,iconSize:V,iconMarginInlineEnd:$-V,collapsedIconSize:z,groupTitleFontSize:V,darkItemDisabledColor:new qr(K).setA(.25).toRgbString(),darkItemColor:ce,darkDangerItemColor:d,darkItemBg:"#001529",darkPopupBg:"#001529",darkSubMenuItemBg:"#000c17",darkItemSelectedColor:K,darkItemSelectedBg:c,darkDangerItemSelectedBg:d,darkItemHoverBg:"transparent",darkGroupTitleColor:ce,darkItemHoverColor:K,darkDangerItemHoverColor:G,darkDangerItemSelectedColor:K,darkDangerItemActiveBg:d,itemWidth:J?`calc(100% + ${ne}px)`:`calc(100% - ${te*2}px)`}},lNe=function(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return Oo("Menu",c=>{const{colorBgElevated:d,controlHeightLG:f,fontSize:v,darkItemColor:g,darkDangerItemColor:_,darkItemBg:C,darkSubMenuItemBg:b,darkItemSelectedColor:T,darkItemSelectedBg:A,darkDangerItemSelectedBg:I,darkItemHoverBg:N,darkGroupTitleColor:P,darkItemHoverColor:D,darkItemDisabledColor:x,darkDangerItemHoverColor:L,darkDangerItemSelectedColor:M,darkDangerItemActiveBg:F,popupBg:V,darkPopupBg:$}=c,z=c.calc(v).div(7).mul(5).equal(),K=oi(c,{menuArrowSize:z,menuHorizontalHeight:c.calc(f).mul(1.15).equal(),menuArrowOffset:c.calc(z).mul(.25).equal(),menuSubMenuBg:d,calc:c.calc,popupBg:V}),G=oi(K,{itemColor:g,itemHoverColor:D,groupTitleColor:P,itemSelectedColor:T,subMenuItemSelectedColor:T,itemBg:C,popupBg:$,subMenuItemBg:b,itemActiveBg:"transparent",itemSelectedBg:A,activeBarHeight:0,activeBarBorderWidth:0,itemHoverBg:N,itemDisabledColor:x,dangerItemColor:_,dangerItemHoverColor:L,dangerItemSelectedColor:M,dangerItemActiveBg:F,dangerItemSelectedBg:I,menuSubMenuBg:b,horizontalItemSelectedColor:T,horizontalItemSelectedBg:A});return[sNe(K),tNe(K),aNe(K),Kz(K,"light"),Kz(G,"dark"),rNe(K),tJ(K),ob(K,"slide-up"),ob(K,"slide-down"),aJ(K,"zoom-big")]},cNe,{deprecatedTokens:[["colorGroupTitle","groupTitleColor"],["radiusItem","itemBorderRadius"],["radiusSubMenuItem","subMenuItemBorderRadius"],["colorItemText","itemColor"],["colorItemTextHover","itemHoverColor"],["colorItemTextHoverHorizontal","horizontalItemHoverColor"],["colorItemTextSelected","itemSelectedColor"],["colorItemTextSelectedHorizontal","horizontalItemSelectedColor"],["colorItemTextDisabled","itemDisabledColor"],["colorDangerItemText","dangerItemColor"],["colorDangerItemTextHover","dangerItemHoverColor"],["colorDangerItemTextSelected","dangerItemSelectedColor"],["colorDangerItemBgActive","dangerItemActiveBg"],["colorDangerItemBgSelected","dangerItemSelectedBg"],["colorItemBg","itemBg"],["colorItemBgHover","itemHoverBg"],["colorSubItemBg","subMenuItemBg"],["colorItemBgActive","itemActiveBg"],["colorItemBgSelectedHorizontal","horizontalItemSelectedBg"],["colorActiveBarWidth","activeBarWidth"],["colorActiveBarHeight","activeBarHeight"],["colorActiveBarBorderSize","activeBarBorderWidth"],["colorItemBgSelected","itemSelectedBg"]],injectStyle:o,unitless:{groupTitleLineHeight:!0}})(t,r)},uNe=t=>{var r;const{popupClassName:o,icon:s,title:c,theme:d}=t,f=y.useContext(ub),{prefixCls:v,inlineCollapsed:g,theme:_}=f,C=Mm();let b;if(!s)b=g&&!C.length&&c&&typeof c=="string"?y.createElement("div",{className:`${v}-inline-collapsed-noicon`},c.charAt(0)):y.createElement("span",{className:`${v}-title-content`},c);else{const I=y.isValidElement(c)&&c.type==="span";b=y.createElement(y.Fragment,null,gc(s,{className:Ke(y.isValidElement(s)?(r=s.props)===null||r===void 0?void 0:r.className:"",`${v}-item-icon`)}),I?c:y.createElement("span",{className:`${v}-title-content`},c))}const T=y.useMemo(()=>Object.assign(Object.assign({},f),{firstLevel:!1}),[f]),[A]=M2("Menu");return y.createElement(ub.Provider,{value:T},y.createElement(IT,Object.assign({},ia(t,["icon"]),{title:b,popupClassName:Ke(v,o,`${v}-${d||_}`),popupStyle:Object.assign({zIndex:A},t.popupStyle)})))},bQ=uNe;var dNe=globalThis&&globalThis.__rest||function(t,r){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&r.indexOf(s)<0&&(o[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(t);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(t,s[c])&&(o[s[c]]=t[s[c]]);return o};function ex(t){return t===null||t===!1}const hNe={item:CQ,submenu:bQ,divider:yQ},fNe=y.forwardRef((t,r)=>{var o;const s=y.useContext(Wz),c=s||{},{getPrefixCls:d,getPopupContainer:f,direction:v,menu:g}=y.useContext(wr),_=d(),{prefixCls:C,className:b,style:T,theme:A="light",expandIcon:I,_internalDisableMenuItemTitleTooltip:N,inlineCollapsed:P,siderCollapsed:D,rootClassName:x,mode:L,selectable:M,onClick:F,overflowedIndicatorPopupClassName:V}=t,$=dNe(t,["prefixCls","className","style","theme","expandIcon","_internalDisableMenuItemTitleTooltip","inlineCollapsed","siderCollapsed","rootClassName","mode","selectable","onClick","overflowedIndicatorPopupClassName"]),z=ia($,["collapsedWidth"]);(o=c.validator)===null||o===void 0||o.call(c,{mode:L});const K=ho(function(){var de;F==null||F.apply(void 0,arguments),(de=c.onClick)===null||de===void 0||de.call(c)}),G=c.mode||L,J=M??c.selectable,ne=P??D,te={horizontal:{motionName:`${_}-slide-up`},inline:BP(_),other:{motionName:`${_}-zoom-big`}},ce=d("menu",C||c.prefixCls),ge=_u(ce),[oe,ae,ie]=lNe(ce,ge,!s),ve=Ke(`${ce}-${A}`,g==null?void 0:g.className,b),me=y.useMemo(()=>{var de,Ee;if(typeof I=="function"||ex(I))return I||null;if(typeof c.expandIcon=="function"||ex(c.expandIcon))return c.expandIcon||null;if(typeof(g==null?void 0:g.expandIcon)=="function"||ex(g==null?void 0:g.expandIcon))return(g==null?void 0:g.expandIcon)||null;const se=(de=I??(c==null?void 0:c.expandIcon))!==null&&de!==void 0?de:g==null?void 0:g.expandIcon;return gc(se,{className:Ke(`${ce}-submenu-expand-icon`,y.isValidElement(se)?(Ee=se.props)===null||Ee===void 0?void 0:Ee.className:void 0)})},[I,c==null?void 0:c.expandIcon,g==null?void 0:g.expandIcon,ce]),le=y.useMemo(()=>({prefixCls:ce,inlineCollapsed:ne||!1,direction:v,firstLevel:!0,theme:A,mode:G,disableMenuItemTitleTooltip:N}),[ce,ne,v,N,A]);return oe(y.createElement(Wz.Provider,{value:null},y.createElement(ub.Provider,{value:le},y.createElement(iE,Object.assign({getPopupContainer:f,overflowedIndicator:y.createElement(Yxe,null),overflowedIndicatorPopupClassName:Ke(ce,`${ce}-${A}`,V),mode:G,selectable:J,onClick:K},z,{inlineCollapsed:ne,style:Object.assign(Object.assign({},g==null?void 0:g.style),T),className:ve,prefixCls:ce,direction:v,defaultMotions:te,expandIcon:me,ref:r,rootClassName:Ke(x,ae,c.rootClassName,ie,ge),_internalComponents:hNe})))))}),pNe=fNe,oE=y.forwardRef((t,r)=>{const o=y.useRef(null),s=y.useContext(AT);return y.useImperativeHandle(r,()=>({menu:o.current,focus:c=>{var d;(d=o.current)===null||d===void 0||d.focus(c)}})),y.createElement(pNe,Object.assign({ref:o},t,s))});oE.Item=CQ;oE.SubMenu=bQ;oE.Divider=yQ;oE.ItemGroup=sL;const mNe=oE;function aE(t){return oi(t,{inputAffixPadding:t.paddingXXS})}const sE=t=>{const{controlHeight:r,fontSize:o,lineHeight:s,lineWidth:c,controlHeightSM:d,controlHeightLG:f,fontSizeLG:v,lineHeightLG:g,paddingSM:_,controlPaddingHorizontalSM:C,controlPaddingHorizontal:b,colorFillAlter:T,colorPrimaryHover:A,colorPrimary:I,controlOutlineWidth:N,controlOutline:P,colorErrorOutline:D,colorWarningOutline:x,colorBgContainer:L,inputFontSize:M,inputFontSizeLG:F,inputFontSizeSM:V}=t,$=M||o,z=V||$,K=F||v,G=Math.round((r-$*s)/2*10)/10-c,J=Math.round((d-z*s)/2*10)/10-c,ne=Math.ceil((f-K*g)/2*10)/10-c;return{paddingBlock:Math.max(G,0),paddingBlockSM:Math.max(J,0),paddingBlockLG:Math.max(ne,0),paddingInline:_-c,paddingInlineSM:C-c,paddingInlineLG:b-c,addonBg:T,activeBorderColor:I,hoverBorderColor:A,activeShadow:`0 0 0 ${N}px ${P}`,errorActiveShadow:`0 0 0 ${N}px ${D}`,warningActiveShadow:`0 0 0 ${N}px ${x}`,hoverBg:L,activeBg:L,inputFontSize:$,inputFontSizeLG:K,inputFontSizeSM:z}},gNe=t=>({borderColor:t.hoverBorderColor,backgroundColor:t.hoverBg}),OT=t=>({color:t.colorTextDisabled,backgroundColor:t.colorBgContainerDisabled,borderColor:t.colorBorder,boxShadow:"none",cursor:"not-allowed",opacity:1,"input[disabled], textarea[disabled]":{cursor:"not-allowed"},"&:hover:not([disabled])":Object.assign({},gNe(oi(t,{hoverBorderColor:t.colorBorder,hoverBg:t.colorBgContainerDisabled})))}),cL=(t,r)=>({background:t.colorBgContainer,borderWidth:t.lineWidth,borderStyle:t.lineType,borderColor:r.borderColor,"&:hover":{borderColor:r.hoverBorderColor,backgroundColor:t.hoverBg},"&:focus, &:focus-within":{borderColor:r.activeBorderColor,boxShadow:r.activeShadow,outline:0,backgroundColor:t.activeBg}}),Jz=(t,r)=>({[`&${t.componentCls}-status-${r.status}:not(${t.componentCls}-disabled)`]:Object.assign(Object.assign({},cL(t,r)),{[`${t.componentCls}-prefix, ${t.componentCls}-suffix`]:{color:r.affixColor}}),[`&${t.componentCls}-status-${r.status}${t.componentCls}-disabled`]:{borderColor:r.borderColor}}),vNe=(t,r)=>({"&-outlined":Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},cL(t,{borderColor:t.colorBorder,hoverBorderColor:t.hoverBorderColor,activeBorderColor:t.activeBorderColor,activeShadow:t.activeShadow})),{[`&${t.componentCls}-disabled, &[disabled]`]:Object.assign({},OT(t))}),Jz(t,{status:"error",borderColor:t.colorError,hoverBorderColor:t.colorErrorBorderHover,activeBorderColor:t.colorError,activeShadow:t.errorActiveShadow,affixColor:t.colorError})),Jz(t,{status:"warning",borderColor:t.colorWarning,hoverBorderColor:t.colorWarningBorderHover,activeBorderColor:t.colorWarning,activeShadow:t.warningActiveShadow,affixColor:t.colorWarning})),r)}),Qz=(t,r)=>({[`&${t.componentCls}-group-wrapper-status-${r.status}`]:{[`${t.componentCls}-group-addon`]:{borderColor:r.addonBorderColor,color:r.addonColor}}}),ENe=t=>({"&-outlined":Object.assign(Object.assign(Object.assign({[`${t.componentCls}-group`]:{"&-addon":{background:t.addonBg,border:`${Xe(t.lineWidth)} ${t.lineType} ${t.colorBorder}`},"&-addon:first-child":{borderInlineEnd:0},"&-addon:last-child":{borderInlineStart:0}}},Qz(t,{status:"error",addonBorderColor:t.colorError,addonColor:t.colorErrorText})),Qz(t,{status:"warning",addonBorderColor:t.colorWarning,addonColor:t.colorWarningText})),{[`&${t.componentCls}-group-wrapper-disabled`]:{[`${t.componentCls}-group-addon`]:Object.assign({},OT(t))}})}),_Ne=(t,r)=>{const{componentCls:o}=t;return{"&-borderless":Object.assign({background:"transparent",border:"none","&:focus, &:focus-within":{outline:"none"},[`&${o}-disabled, &[disabled]`]:{color:t.colorTextDisabled,cursor:"not-allowed"},[`&${o}-status-error`]:{"&, & input, & textarea":{color:t.colorError}},[`&${o}-status-warning`]:{"&, & input, & textarea":{color:t.colorWarning}}},r)}},TQ=(t,r)=>({background:r.bg,borderWidth:t.lineWidth,borderStyle:t.lineType,borderColor:"transparent","input&, & input, textarea&, & textarea":{color:r==null?void 0:r.inputColor},"&:hover":{background:r.hoverBg},"&:focus, &:focus-within":{outline:0,borderColor:r.activeBorderColor,backgroundColor:t.activeBg}}),Zz=(t,r)=>({[`&${t.componentCls}-status-${r.status}:not(${t.componentCls}-disabled)`]:Object.assign(Object.assign({},TQ(t,r)),{[`${t.componentCls}-prefix, ${t.componentCls}-suffix`]:{color:r.affixColor}})}),SNe=(t,r)=>({"&-filled":Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},TQ(t,{bg:t.colorFillTertiary,hoverBg:t.colorFillSecondary,activeBorderColor:t.activeBorderColor})),{[`&${t.componentCls}-disabled, &[disabled]`]:Object.assign({},OT(t))}),Zz(t,{status:"error",bg:t.colorErrorBg,hoverBg:t.colorErrorBgHover,activeBorderColor:t.colorError,inputColor:t.colorErrorText,affixColor:t.colorError})),Zz(t,{status:"warning",bg:t.colorWarningBg,hoverBg:t.colorWarningBgHover,activeBorderColor:t.colorWarning,inputColor:t.colorWarningText,affixColor:t.colorWarning})),r)}),eW=(t,r)=>({[`&${t.componentCls}-group-wrapper-status-${r.status}`]:{[`${t.componentCls}-group-addon`]:{background:r.addonBg,color:r.addonColor}}}),yNe=t=>({"&-filled":Object.assign(Object.assign(Object.assign({[`${t.componentCls}-group`]:{"&-addon":{background:t.colorFillTertiary},[`${t.componentCls}-filled:not(:focus):not(:focus-within)`]:{"&:not(:first-child)":{borderInlineStart:`${Xe(t.lineWidth)} ${t.lineType} ${t.colorSplit}`},"&:not(:last-child)":{borderInlineEnd:`${Xe(t.lineWidth)} ${t.lineType} ${t.colorSplit}`}}}},eW(t,{status:"error",addonBg:t.colorErrorBg,addonColor:t.colorErrorText})),eW(t,{status:"warning",addonBg:t.colorWarningBg,addonColor:t.colorWarningText})),{[`&${t.componentCls}-group-wrapper-disabled`]:{[`${t.componentCls}-group`]:{"&-addon":{background:t.colorFillTertiary,color:t.colorTextDisabled},"&-addon:first-child":{borderInlineStart:`${Xe(t.lineWidth)} ${t.lineType} ${t.colorBorder}`,borderTop:`${Xe(t.lineWidth)} ${t.lineType} ${t.colorBorder}`,borderBottom:`${Xe(t.lineWidth)} ${t.lineType} ${t.colorBorder}`},"&-addon:last-child":{borderInlineEnd:`${Xe(t.lineWidth)} ${t.lineType} ${t.colorBorder}`,borderTop:`${Xe(t.lineWidth)} ${t.lineType} ${t.colorBorder}`,borderBottom:`${Xe(t.lineWidth)} ${t.lineType} ${t.colorBorder}`}}}})}),RQ=(t,r)=>({background:t.colorBgContainer,borderWidth:`${Xe(t.lineWidth)} 0`,borderStyle:`${t.lineType} none`,borderColor:`transparent transparent ${r.borderColor} transparent`,borderRadius:0,"&:hover":{borderColor:`transparent transparent ${r.borderColor} transparent`,backgroundColor:t.hoverBg},"&:focus, &:focus-within":{borderColor:`transparent transparent ${r.borderColor} transparent`,outline:0,backgroundColor:t.activeBg}}),tW=(t,r)=>({[`&${t.componentCls}-status-${r.status}:not(${t.componentCls}-disabled)`]:Object.assign(Object.assign({},RQ(t,r)),{[`${t.componentCls}-prefix, ${t.componentCls}-suffix`]:{color:r.affixColor}}),[`&${t.componentCls}-status-${r.status}${t.componentCls}-disabled`]:{borderColor:`transparent transparent ${r.borderColor} transparent`}}),CNe=(t,r)=>({"&-underlined":Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},RQ(t,{borderColor:t.colorBorder,hoverBorderColor:t.hoverBorderColor,activeBorderColor:t.activeBorderColor,activeShadow:t.activeShadow})),{[`&${t.componentCls}-disabled, &[disabled]`]:{color:t.colorTextDisabled,boxShadow:"none",cursor:"not-allowed","&:hover":{borderColor:`transparent transparent ${t.colorBorder} transparent`}},"input[disabled], textarea[disabled]":{cursor:"not-allowed"}}),tW(t,{status:"error",borderColor:t.colorError,hoverBorderColor:t.colorErrorBorderHover,activeBorderColor:t.colorError,activeShadow:t.errorActiveShadow,affixColor:t.colorError})),tW(t,{status:"warning",borderColor:t.colorWarning,hoverBorderColor:t.colorWarningBorderHover,activeBorderColor:t.colorWarning,activeShadow:t.warningActiveShadow,affixColor:t.colorWarning})),r)}),bNe=t=>({"&::-moz-placeholder":{opacity:1},"&::placeholder":{color:t,userSelect:"none"},"&:placeholder-shown":{textOverflow:"ellipsis"}}),wQ=t=>{const{paddingBlockLG:r,lineHeightLG:o,borderRadiusLG:s,paddingInlineLG:c}=t;return{padding:`${Xe(r)} ${Xe(c)}`,fontSize:t.inputFontSizeLG,lineHeight:o,borderRadius:s}},lL=t=>({padding:`${Xe(t.paddingBlockSM)} ${Xe(t.paddingInlineSM)}`,fontSize:t.inputFontSizeSM,borderRadius:t.borderRadiusSM}),uL=t=>Object.assign(Object.assign({position:"relative",display:"inline-block",width:"100%",minWidth:0,padding:`${Xe(t.paddingBlock)} ${Xe(t.paddingInline)}`,color:t.colorText,fontSize:t.inputFontSize,lineHeight:t.lineHeight,borderRadius:t.borderRadius,transition:`all ${t.motionDurationMid}`},bNe(t.colorTextPlaceholder)),{"textarea&":{maxWidth:"100%",height:"auto",minHeight:t.controlHeight,lineHeight:t.lineHeight,verticalAlign:"bottom",transition:`all ${t.motionDurationSlow}, height 0s`,resize:"vertical"},"&-lg":Object.assign({},wQ(t)),"&-sm":Object.assign({},lL(t)),"&-rtl, &-textarea-rtl":{direction:"rtl"}}),TNe=t=>{const{componentCls:r,antCls:o}=t;return{position:"relative",display:"table",width:"100%",borderCollapse:"separate",borderSpacing:0,"&[class*='col-']":{paddingInlineEnd:t.paddingXS,"&:last-child":{paddingInlineEnd:0}},[`&-lg ${r}, &-lg > ${r}-group-addon`]:Object.assign({},wQ(t)),[`&-sm ${r}, &-sm > ${r}-group-addon`]:Object.assign({},lL(t)),[`&-lg ${o}-select-single ${o}-select-selector`]:{height:t.controlHeightLG},[`&-sm ${o}-select-single ${o}-select-selector`]:{height:t.controlHeightSM},[`> ${r}`]:{display:"table-cell","&:not(:first-child):not(:last-child)":{borderRadius:0}},[`${r}-group`]:{"&-addon, &-wrap":{display:"table-cell",width:1,whiteSpace:"nowrap",verticalAlign:"middle","&:not(:first-child):not(:last-child)":{borderRadius:0}},"&-wrap > *":{display:"block !important"},"&-addon":{position:"relative",padding:`0 ${Xe(t.paddingInline)}`,color:t.colorText,fontWeight:"normal",fontSize:t.inputFontSize,textAlign:"center",borderRadius:t.borderRadius,transition:`all ${t.motionDurationSlow}`,lineHeight:1,[`${o}-select`]:{margin:`${Xe(t.calc(t.paddingBlock).add(1).mul(-1).equal())} ${Xe(t.calc(t.paddingInline).mul(-1).equal())}`,[`&${o}-select-single:not(${o}-select-customize-input):not(${o}-pagination-size-changer)`]:{[`${o}-select-selector`]:{backgroundColor:"inherit",border:`${Xe(t.lineWidth)} ${t.lineType} transparent`,boxShadow:"none"}}},[`${o}-cascader-picker`]:{margin:`-9px ${Xe(t.calc(t.paddingInline).mul(-1).equal())}`,backgroundColor:"transparent",[`${o}-cascader-input`]:{textAlign:"start",border:0,boxShadow:"none"}}}},[r]:{width:"100%",marginBottom:0,textAlign:"inherit","&:focus":{zIndex:1,borderInlineEndWidth:1},"&:hover":{zIndex:1,borderInlineEndWidth:1,[`${r}-search-with-button &`]:{zIndex:0}}},[`> ${r}:first-child, ${r}-group-addon:first-child`]:{borderStartEndRadius:0,borderEndEndRadius:0,[`${o}-select ${o}-select-selector`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${r}-affix-wrapper`]:{[`&:not(:first-child) ${r}`]:{borderStartStartRadius:0,borderEndStartRadius:0},[`&:not(:last-child) ${r}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${r}:last-child, ${r}-group-addon:last-child`]:{borderStartStartRadius:0,borderEndStartRadius:0,[`${o}-select ${o}-select-selector`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`${r}-affix-wrapper`]:{"&:not(:last-child)":{borderStartEndRadius:0,borderEndEndRadius:0,[`${r}-search &`]:{borderStartStartRadius:t.borderRadius,borderEndStartRadius:t.borderRadius}},[`&:not(:first-child), ${r}-search &:not(:first-child)`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`&${r}-group-compact`]:Object.assign(Object.assign({display:"block"},NP()),{[`${r}-group-addon, ${r}-group-wrap, > ${r}`]:{"&:not(:first-child):not(:last-child)":{borderInlineEndWidth:t.lineWidth,"&:hover, &:focus":{zIndex:1}}},"& > *":{display:"inline-flex",float:"none",verticalAlign:"top",borderRadius:0},[`
        & > ${r}-affix-wrapper,
        & > ${r}-number-affix-wrapper,
        & > ${o}-picker-range
      `]:{display:"inline-flex"},"& > *:not(:last-child)":{marginInlineEnd:t.calc(t.lineWidth).mul(-1).equal(),borderInlineEndWidth:t.lineWidth},[r]:{float:"none"},[`& > ${o}-select > ${o}-select-selector,
      & > ${o}-select-auto-complete ${r},
      & > ${o}-cascader-picker ${r},
      & > ${r}-group-wrapper ${r}`]:{borderInlineEndWidth:t.lineWidth,borderRadius:0,"&:hover, &:focus":{zIndex:1}},[`& > ${o}-select-focused`]:{zIndex:1},[`& > ${o}-select > ${o}-select-arrow`]:{zIndex:1},[`& > *:first-child,
      & > ${o}-select:first-child > ${o}-select-selector,
      & > ${o}-select-auto-complete:first-child ${r},
      & > ${o}-cascader-picker:first-child ${r}`]:{borderStartStartRadius:t.borderRadius,borderEndStartRadius:t.borderRadius},[`& > *:last-child,
      & > ${o}-select:last-child > ${o}-select-selector,
      & > ${o}-cascader-picker:last-child ${r},
      & > ${o}-cascader-picker-focused:last-child ${r}`]:{borderInlineEndWidth:t.lineWidth,borderStartEndRadius:t.borderRadius,borderEndEndRadius:t.borderRadius},[`& > ${o}-select-auto-complete ${r}`]:{verticalAlign:"top"},[`${r}-group-wrapper + ${r}-group-wrapper`]:{marginInlineStart:t.calc(t.lineWidth).mul(-1).equal(),[`${r}-affix-wrapper`]:{borderRadius:0}},[`${r}-group-wrapper:not(:last-child)`]:{[`&${r}-search > ${r}-group`]:{[`& > ${r}-group-addon > ${r}-search-button`]:{borderRadius:0},[`& > ${r}`]:{borderStartStartRadius:t.borderRadius,borderStartEndRadius:0,borderEndEndRadius:0,borderEndStartRadius:t.borderRadius}}}})}},RNe=t=>{const{componentCls:r,controlHeightSM:o,lineWidth:s,calc:c}=t,d=16,f=c(o).sub(c(s).mul(2)).sub(d).div(2).equal();return{[r]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Ps(t)),uL(t)),vNe(t)),SNe(t)),_Ne(t)),CNe(t)),{'&[type="color"]':{height:t.controlHeight,[`&${r}-lg`]:{height:t.controlHeightLG},[`&${r}-sm`]:{height:o,paddingTop:f,paddingBottom:f}},'&[type="search"]::-webkit-search-cancel-button, &[type="search"]::-webkit-search-decoration':{"-webkit-appearance":"none"}})}},wNe=t=>{const{componentCls:r}=t;return{[`${r}-clear-icon`]:{margin:0,padding:0,lineHeight:0,color:t.colorTextQuaternary,fontSize:t.fontSizeIcon,verticalAlign:-1,cursor:"pointer",transition:`color ${t.motionDurationSlow}`,border:"none",outline:"none",backgroundColor:"transparent","&:hover":{color:t.colorTextTertiary},"&:active":{color:t.colorText},"&-hidden":{visibility:"hidden"},"&-has-suffix":{margin:`0 ${Xe(t.inputAffixPadding)}`}}}},INe=t=>{const{componentCls:r,inputAffixPadding:o,colorTextDescription:s,motionDurationSlow:c,colorIcon:d,colorIconHover:f,iconCls:v}=t,g=`${r}-affix-wrapper`,_=`${r}-affix-wrapper-disabled`;return{[g]:Object.assign(Object.assign(Object.assign(Object.assign({},uL(t)),{display:"inline-flex",[`&:not(${r}-disabled):hover`]:{zIndex:1,[`${r}-search-with-button &`]:{zIndex:0}},"&-focused, &:focus":{zIndex:1},[`> input${r}`]:{padding:0},[`> input${r}, > textarea${r}`]:{fontSize:"inherit",border:"none",borderRadius:0,outline:"none",background:"transparent",color:"inherit","&::-ms-reveal":{display:"none"},"&:focus":{boxShadow:"none !important"}},"&::before":{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'},[r]:{"&-prefix, &-suffix":{display:"flex",flex:"none",alignItems:"center","> *:not(:last-child)":{marginInlineEnd:t.paddingXS}},"&-show-count-suffix":{color:s},"&-show-count-has-suffix":{marginInlineEnd:t.paddingXXS},"&-prefix":{marginInlineEnd:o},"&-suffix":{marginInlineStart:o}}}),wNe(t)),{[`${v}${r}-password-icon`]:{color:d,cursor:"pointer",transition:`all ${c}`,"&:hover":{color:f}}}),[`${r}-underlined`]:{borderRadius:0},[_]:{[`${v}${r}-password-icon`]:{color:d,cursor:"not-allowed","&:hover":{color:d}}}}},ANe=t=>{const{componentCls:r,borderRadiusLG:o,borderRadiusSM:s}=t;return{[`${r}-group`]:Object.assign(Object.assign(Object.assign({},Ps(t)),TNe(t)),{"&-rtl":{direction:"rtl"},"&-wrapper":Object.assign(Object.assign(Object.assign({display:"inline-block",width:"100%",textAlign:"start",verticalAlign:"top","&-rtl":{direction:"rtl"},"&-lg":{[`${r}-group-addon`]:{borderRadius:o,fontSize:t.inputFontSizeLG}},"&-sm":{[`${r}-group-addon`]:{borderRadius:s}}},ENe(t)),yNe(t)),{[`&:not(${r}-compact-first-item):not(${r}-compact-last-item)${r}-compact-item`]:{[`${r}, ${r}-group-addon`]:{borderRadius:0}},[`&:not(${r}-compact-last-item)${r}-compact-first-item`]:{[`${r}, ${r}-group-addon`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&:not(${r}-compact-first-item)${r}-compact-last-item`]:{[`${r}, ${r}-group-addon`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`&:not(${r}-compact-last-item)${r}-compact-item`]:{[`${r}-affix-wrapper`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&:not(${r}-compact-first-item)${r}-compact-item`]:{[`${r}-affix-wrapper`]:{borderStartStartRadius:0,borderEndStartRadius:0}}})})}},ONe=t=>{const{componentCls:r,antCls:o}=t,s=`${r}-search`;return{[s]:{[r]:{"&:hover, &:focus":{[`+ ${r}-group-addon ${s}-button:not(${o}-btn-primary)`]:{borderInlineStartColor:t.colorPrimaryHover}}},[`${r}-affix-wrapper`]:{height:t.controlHeight,borderRadius:0},[`${r}-lg`]:{lineHeight:t.calc(t.lineHeightLG).sub(2e-4).equal()},[`> ${r}-group`]:{[`> ${r}-group-addon:last-child`]:{insetInlineStart:-1,padding:0,border:0,[`${s}-button`]:{marginInlineEnd:-1,borderStartStartRadius:0,borderEndStartRadius:0,boxShadow:"none"},[`${s}-button:not(${o}-btn-primary)`]:{color:t.colorTextDescription,"&:hover":{color:t.colorPrimaryHover},"&:active":{color:t.colorPrimaryActive},[`&${o}-btn-loading::before`]:{insetInlineStart:0,insetInlineEnd:0,insetBlockStart:0,insetBlockEnd:0}}}},[`${s}-button`]:{height:t.controlHeight,"&:hover, &:focus":{zIndex:1}},"&-large":{[`${r}-affix-wrapper, ${s}-button`]:{height:t.controlHeightLG}},"&-small":{[`${r}-affix-wrapper, ${s}-button`]:{height:t.controlHeightSM}},"&-rtl":{direction:"rtl"},[`&${r}-compact-item`]:{[`&:not(${r}-compact-last-item)`]:{[`${r}-group-addon`]:{[`${r}-search-button`]:{marginInlineEnd:t.calc(t.lineWidth).mul(-1).equal(),borderRadius:0}}},[`&:not(${r}-compact-first-item)`]:{[`${r},${r}-affix-wrapper`]:{borderRadius:0}},[`> ${r}-group-addon ${r}-search-button,
        > ${r},
        ${r}-affix-wrapper`]:{"&:hover, &:focus, &:active":{zIndex:2}},[`> ${r}-affix-wrapper-focused`]:{zIndex:2}}}}},xNe=t=>{const{componentCls:r}=t;return{[`${r}-out-of-range`]:{[`&, & input, & textarea, ${r}-show-count-suffix, ${r}-data-count`]:{color:t.colorError}}}},IQ=Oo(["Input","Shared"],t=>{const r=oi(t,aE(t));return[RNe(r),INe(r)]},sE,{resetFont:!1}),AQ=Oo(["Input","Component"],t=>{const r=oi(t,aE(t));return[ANe(r),ONe(r),xNe(r),V2(r)]},sE,{resetFont:!1});function NNe(t,r,o){var s=o||{},c=s.noTrailing,d=c===void 0?!1:c,f=s.noLeading,v=f===void 0?!1:f,g=s.debounceMode,_=g===void 0?void 0:g,C,b=!1,T=0;function A(){C&&clearTimeout(C)}function I(P){var D=P||{},x=D.upcomingOnly,L=x===void 0?!1:x;A(),b=!L}function N(){for(var P=arguments.length,D=new Array(P),x=0;x<P;x++)D[x]=arguments[x];var L=this,M=Date.now()-T;if(b)return;function F(){T=Date.now(),r.apply(L,D)}function V(){C=void 0}!v&&_&&!C&&F(),A(),_===void 0&&M>t?v?(T=Date.now(),d||(C=setTimeout(_?V:F,t))):F():d!==!0&&(C=setTimeout(_?V:F,_===void 0?t-M:t))}return N.cancel=I,N}function PNe(t,r,o){var s=o||{},c=s.atBegin,d=c===void 0?!1:c;return NNe(t,r,{debounceMode:d!==!1})}const DNe=y.createContext({}),OQ=DNe;var LNe=globalThis&&globalThis.__rest||function(t,r){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&r.indexOf(s)<0&&(o[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(t);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(t,s[c])&&(o[s[c]]=t[s[c]]);return o};function nW(t){return typeof t=="number"?`${t} ${t} auto`:/^\d+(\.\d+)?(px|em|rem|%)$/.test(t)?`0 0 ${t}`:t}const kNe=["xs","sm","md","lg","xl","xxl"],MNe=y.forwardRef((t,r)=>{const{getPrefixCls:o,direction:s}=y.useContext(wr),{gutter:c,wrap:d}=y.useContext(OQ),{prefixCls:f,span:v,order:g,offset:_,push:C,pull:b,className:T,children:A,flex:I,style:N}=t,P=LNe(t,["prefixCls","span","order","offset","push","pull","className","children","flex","style"]),D=o("col",f),[x,L,M]=ywe(D),F={};let V={};kNe.forEach(K=>{let G={};const J=t[K];typeof J=="number"?G.span=J:typeof J=="object"&&(G=J||{}),delete P[K],V=Object.assign(Object.assign({},V),{[`${D}-${K}-${G.span}`]:G.span!==void 0,[`${D}-${K}-order-${G.order}`]:G.order||G.order===0,[`${D}-${K}-offset-${G.offset}`]:G.offset||G.offset===0,[`${D}-${K}-push-${G.push}`]:G.push||G.push===0,[`${D}-${K}-pull-${G.pull}`]:G.pull||G.pull===0,[`${D}-rtl`]:s==="rtl"}),G.flex&&(V[`${D}-${K}-flex`]=!0,F[`--${D}-${K}-flex`]=nW(G.flex))});const $=Ke(D,{[`${D}-${v}`]:v!==void 0,[`${D}-order-${g}`]:g,[`${D}-offset-${_}`]:_,[`${D}-push-${C}`]:C,[`${D}-pull-${b}`]:b},T,V,L,M),z={};if(c&&c[0]>0){const K=c[0]/2;z.paddingLeft=K,z.paddingRight=K}return I&&(z.flex=nW(I),d===!1&&!z.minWidth&&(z.minWidth=0)),x(y.createElement("div",Object.assign({},P,{style:Object.assign(Object.assign(Object.assign({},z),N),F),className:$,ref:r}),A))}),dL=MNe;function FNe(t,r){const o=[void 0,void 0],s=Array.isArray(t)?t:[t,void 0],c=r||{xs:!0,sm:!0,md:!0,lg:!0,xl:!0,xxl:!0};return s.forEach((d,f)=>{if(typeof d=="object"&&d!==null)for(let v=0;v<Kh.length;v++){const g=Kh[v];if(c[g]&&d[g]!==void 0){o[f]=d[g];break}}else o[f]=d}),o}var UNe=globalThis&&globalThis.__rest||function(t,r){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&r.indexOf(s)<0&&(o[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(t);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(t,s[c])&&(o[s[c]]=t[s[c]]);return o};function rW(t,r){const[o,s]=y.useState(typeof t=="string"?t:""),c=()=>{if(typeof t=="string"&&s(t),typeof t=="object")for(let d=0;d<Kh.length;d++){const f=Kh[d];if(!r||!r[f])continue;const v=t[f];if(v!==void 0){s(v);return}}};return y.useEffect(()=>{c()},[JSON.stringify(t),r]),o}const BNe=y.forwardRef((t,r)=>{const{prefixCls:o,justify:s,align:c,className:d,style:f,children:v,gutter:g=0,wrap:_}=t,C=UNe(t,["prefixCls","justify","align","className","style","children","gutter","wrap"]),{getPrefixCls:b,direction:T}=y.useContext(wr),A=eL(!0,null),I=rW(c,A),N=rW(s,A),P=b("row",o),[D,x,L]=_we(P),M=FNe(g,A),F=Ke(P,{[`${P}-no-wrap`]:_===!1,[`${P}-${N}`]:N,[`${P}-${I}`]:I,[`${P}-rtl`]:T==="rtl"},d,x,L),V={},$=M[0]!=null&&M[0]>0?M[0]/-2:void 0;$&&(V.marginLeft=$,V.marginRight=$);const[z,K]=M;V.rowGap=K;const G=y.useMemo(()=>({gutter:[z,K],wrap:_}),[z,K,_]);return D(y.createElement(OQ.Provider,{value:G},y.createElement("div",Object.assign({},C,{className:F,style:Object.assign(Object.assign({},V),f),ref:r}),v)))}),xQ=BNe;function VNe(t){return!!(t.addonBefore||t.addonAfter)}function jNe(t){return!!(t.prefix||t.suffix||t.allowClear)}function iW(t,r,o){var s=r.cloneNode(!0),c=Object.create(t,{target:{value:s},currentTarget:{value:s}});return s.value=o,typeof r.selectionStart=="number"&&typeof r.selectionEnd=="number"&&(s.selectionStart=r.selectionStart,s.selectionEnd=r.selectionEnd),s.setSelectionRange=function(){r.setSelectionRange.apply(r,arguments)},c}function db(t,r,o,s){if(o){var c=r;if(r.type==="click"){c=iW(r,t,""),o(c);return}if(t.type!=="file"&&s!==void 0){c=iW(r,t,s),o(c);return}o(c)}}function NQ(t,r){if(t){t.focus(r);var o=r||{},s=o.cursor;if(s){var c=t.value.length;switch(s){case"start":t.setSelectionRange(0,0);break;case"end":t.setSelectionRange(c,c);break;default:t.setSelectionRange(0,c)}}}}var PQ=ze.forwardRef(function(t,r){var o,s,c,d=t.inputElement,f=t.children,v=t.prefixCls,g=t.prefix,_=t.suffix,C=t.addonBefore,b=t.addonAfter,T=t.className,A=t.style,I=t.disabled,N=t.readOnly,P=t.focused,D=t.triggerFocus,x=t.allowClear,L=t.value,M=t.handleReset,F=t.hidden,V=t.classes,$=t.classNames,z=t.dataAttrs,K=t.styles,G=t.components,J=t.onClear,ne=f??d,te=(G==null?void 0:G.affixWrapper)||"span",ce=(G==null?void 0:G.groupWrapper)||"span",ge=(G==null?void 0:G.wrapper)||"span",oe=(G==null?void 0:G.groupAddon)||"span",ae=y.useRef(null),ie=function(je){var ke;(ke=ae.current)!==null&&ke!==void 0&&ke.contains(je.target)&&(D==null||D())},ve=jNe(t),me=y.cloneElement(ne,{value:L,className:Ke((o=ne.props)===null||o===void 0?void 0:o.className,!ve&&($==null?void 0:$.variant))||null}),le=y.useRef(null);if(ze.useImperativeHandle(r,function(){return{nativeElement:le.current||ae.current}}),ve){var de=null;if(x){var Ee=!I&&!N&&L,se="".concat(v,"-clear-icon"),Te=ln(x)==="object"&&x!==null&&x!==void 0&&x.clearIcon?x.clearIcon:"✖";de=ze.createElement("button",{type:"button",tabIndex:-1,onClick:function(je){M==null||M(je),J==null||J()},onMouseDown:function(je){return je.preventDefault()},className:Ke(se,be(be({},"".concat(se,"-hidden"),!Ee),"".concat(se,"-has-suffix"),!!_))},Te)}var we="".concat(v,"-affix-wrapper"),Le=Ke(we,be(be(be(be(be({},"".concat(v,"-disabled"),I),"".concat(we,"-disabled"),I),"".concat(we,"-focused"),P),"".concat(we,"-readonly"),N),"".concat(we,"-input-with-clear-btn"),_&&x&&L),V==null?void 0:V.affixWrapper,$==null?void 0:$.affixWrapper,$==null?void 0:$.variant),Ie=(_||x)&&ze.createElement("span",{className:Ke("".concat(v,"-suffix"),$==null?void 0:$.suffix),style:K==null?void 0:K.suffix},de,_);me=ze.createElement(te,nt({className:Le,style:K==null?void 0:K.affixWrapper,onClick:ie},z==null?void 0:z.affixWrapper,{ref:ae}),g&&ze.createElement("span",{className:Ke("".concat(v,"-prefix"),$==null?void 0:$.prefix),style:K==null?void 0:K.prefix},g),me,Ie)}if(VNe(t)){var De="".concat(v,"-group"),Ye="".concat(De,"-addon"),Me="".concat(De,"-wrapper"),Oe=Ke("".concat(v,"-wrapper"),De,V==null?void 0:V.wrapper,$==null?void 0:$.wrapper),$e=Ke(Me,be({},"".concat(Me,"-disabled"),I),V==null?void 0:V.group,$==null?void 0:$.groupWrapper);me=ze.createElement(ce,{className:$e,ref:le},ze.createElement(ge,{className:Oe},C&&ze.createElement(oe,{className:Ye},C),me,b&&ze.createElement(oe,{className:Ye},b)))}return ze.cloneElement(me,{className:Ke((s=me.props)===null||s===void 0?void 0:s.className,T)||null,style:_e(_e({},(c=me.props)===null||c===void 0?void 0:c.style),A),hidden:F})}),$Ne=["show"];function DQ(t,r){return y.useMemo(function(){var o={};r&&(o.show=ln(r)==="object"&&r.formatter?r.formatter:!!r),o=_e(_e({},o),t);var s=o,c=s.show,d=xn(s,$Ne);return _e(_e({},d),{},{show:!!c,showFormatter:typeof c=="function"?c:void 0,strategy:d.strategy||function(f){return f.length}})},[t,r])}var HNe=["autoComplete","onChange","onFocus","onBlur","onPressEnter","onKeyDown","onKeyUp","prefixCls","disabled","htmlSize","className","maxLength","suffix","showCount","count","type","classes","classNames","styles","onCompositionStart","onCompositionEnd"],zNe=y.forwardRef(function(t,r){var o=t.autoComplete,s=t.onChange,c=t.onFocus,d=t.onBlur,f=t.onPressEnter,v=t.onKeyDown,g=t.onKeyUp,_=t.prefixCls,C=_===void 0?"rc-input":_,b=t.disabled,T=t.htmlSize,A=t.className,I=t.maxLength,N=t.suffix,P=t.showCount,D=t.count,x=t.type,L=x===void 0?"text":x,M=t.classes,F=t.classNames,V=t.styles,$=t.onCompositionStart,z=t.onCompositionEnd,K=xn(t,HNe),G=y.useState(!1),J=Ue(G,2),ne=J[0],te=J[1],ce=y.useRef(!1),ge=y.useRef(!1),oe=y.useRef(null),ae=y.useRef(null),ie=function(Je){oe.current&&NQ(oe.current,Je)},ve=Sa(t.defaultValue,{value:t.value}),me=Ue(ve,2),le=me[0],de=me[1],Ee=le==null?"":String(le),se=y.useState(null),Te=Ue(se,2),we=Te[0],Le=Te[1],Ie=DQ(D,P),De=Ie.max||I,Ye=Ie.strategy(Ee),Me=!!De&&Ye>De;y.useImperativeHandle(r,function(){var qe;return{focus:ie,blur:function(){var Ct;(Ct=oe.current)===null||Ct===void 0||Ct.blur()},setSelectionRange:function(Ct,Nt,Ot){var on;(on=oe.current)===null||on===void 0||on.setSelectionRange(Ct,Nt,Ot)},select:function(){var Ct;(Ct=oe.current)===null||Ct===void 0||Ct.select()},input:oe.current,nativeElement:((qe=ae.current)===null||qe===void 0?void 0:qe.nativeElement)||oe.current}}),y.useEffect(function(){ge.current&&(ge.current=!1),te(function(qe){return qe&&b?!1:qe})},[b]);var Oe=function(Je,Ct,Nt){var Ot=Ct;if(!ce.current&&Ie.exceedFormatter&&Ie.max&&Ie.strategy(Ct)>Ie.max){if(Ot=Ie.exceedFormatter(Ct,{max:Ie.max}),Ct!==Ot){var on,Vt;Le([((on=oe.current)===null||on===void 0?void 0:on.selectionStart)||0,((Vt=oe.current)===null||Vt===void 0?void 0:Vt.selectionEnd)||0])}}else if(Nt.source==="compositionEnd")return;de(Ot),oe.current&&db(oe.current,Je,s,Ot)};y.useEffect(function(){if(we){var qe;(qe=oe.current)===null||qe===void 0||qe.setSelectionRange.apply(qe,Et(we))}},[we]);var $e=function(Je){Oe(Je,Je.target.value,{source:"change"})},tt=function(Je){ce.current=!1,Oe(Je,Je.currentTarget.value,{source:"compositionEnd"}),z==null||z(Je)},je=function(Je){f&&Je.key==="Enter"&&!ge.current&&(ge.current=!0,f(Je)),v==null||v(Je)},ke=function(Je){Je.key==="Enter"&&(ge.current=!1),g==null||g(Je)},dt=function(Je){te(!0),c==null||c(Je)},Ze=function(Je){ge.current&&(ge.current=!1),te(!1),d==null||d(Je)},ut=function(Je){de(""),ie(),oe.current&&db(oe.current,Je,s)},Tt=Me&&"".concat(C,"-out-of-range"),pt=function(){var Je=ia(t,["prefixCls","onPressEnter","addonBefore","addonAfter","prefix","suffix","allowClear","defaultValue","showCount","count","classes","htmlSize","styles","classNames","onClear"]);return ze.createElement("input",nt({autoComplete:o},Je,{onChange:$e,onFocus:dt,onBlur:Ze,onKeyDown:je,onKeyUp:ke,className:Ke(C,be({},"".concat(C,"-disabled"),b),F==null?void 0:F.input),style:V==null?void 0:V.input,ref:oe,size:T,type:L,onCompositionStart:function(Nt){ce.current=!0,$==null||$(Nt)},onCompositionEnd:tt}))},ht=function(){var Je=Number(De)>0;if(N||Ie.show){var Ct=Ie.showFormatter?Ie.showFormatter({value:Ee,count:Ye,maxLength:De}):"".concat(Ye).concat(Je?" / ".concat(De):"");return ze.createElement(ze.Fragment,null,Ie.show&&ze.createElement("span",{className:Ke("".concat(C,"-show-count-suffix"),be({},"".concat(C,"-show-count-has-suffix"),!!N),F==null?void 0:F.count),style:_e({},V==null?void 0:V.count)},Ct),N)}return null};return ze.createElement(PQ,nt({},K,{prefixCls:C,className:Ke(A,Tt),handleReset:ut,value:Ee,focused:ne,triggerFocus:ie,suffix:ht(),disabled:b,classes:M,classNames:F,styles:V}),pt())});const WNe=t=>{let r;return typeof t=="object"&&(t!=null&&t.clearIcon)?r=t:t&&(r={clearIcon:ze.createElement(fT,null)}),r},LQ=WNe;function kQ(t,r){const o=y.useRef([]),s=()=>{o.current.push(setTimeout(()=>{var c,d,f,v;!((c=t.current)===null||c===void 0)&&c.input&&((d=t.current)===null||d===void 0?void 0:d.input.getAttribute("type"))==="password"&&(!((f=t.current)===null||f===void 0)&&f.input.hasAttribute("value"))&&((v=t.current)===null||v===void 0||v.input.removeAttribute("value"))}))};return y.useEffect(()=>(r&&s(),()=>o.current.forEach(c=>{c&&clearTimeout(c)})),[]),s}function GNe(t){return!!(t.prefix||t.suffix||t.allowClear||t.showCount)}var KNe=globalThis&&globalThis.__rest||function(t,r){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&r.indexOf(s)<0&&(o[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(t);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(t,s[c])&&(o[s[c]]=t[s[c]]);return o};const YNe=y.forwardRef((t,r)=>{const{prefixCls:o,bordered:s=!0,status:c,size:d,disabled:f,onBlur:v,onFocus:g,suffix:_,allowClear:C,addonAfter:b,addonBefore:T,className:A,style:I,styles:N,rootClassName:P,onChange:D,classNames:x,variant:L}=t,M=KNe(t,["prefixCls","bordered","status","size","disabled","onBlur","onFocus","suffix","allowClear","addonAfter","addonBefore","className","style","styles","rootClassName","onChange","classNames","variant"]),{getPrefixCls:F,direction:V,allowClear:$,autoComplete:z,className:K,style:G,classNames:J,styles:ne}=Ec("input"),te=F("input",o),ce=y.useRef(null),ge=_u(te),[oe,ae,ie]=IQ(te,P),[ve]=AQ(te,ge),{compactSize:me,compactItemClassnames:le}=eE(te,V),de=Su(Ze=>{var ut;return(ut=d??me)!==null&&ut!==void 0?ut:Ze}),Ee=ze.useContext(Zh),se=f??Ee,{status:Te,hasFeedback:we,feedbackIcon:Le}=y.useContext(As),Ie=TT(Te,c),De=GNe(t)||!!we;y.useRef(De);const Ye=kQ(ce,!0),Me=Ze=>{Ye(),v==null||v(Ze)},Oe=Ze=>{Ye(),g==null||g(Ze)},$e=Ze=>{Ye(),D==null||D(Ze)},tt=(we||_)&&ze.createElement(ze.Fragment,null,_,we&&Le),je=LQ(C??$),[ke,dt]=Z2("input",L,s);return oe(ve(ze.createElement(zNe,Object.assign({ref:nl(r,ce),prefixCls:te,autoComplete:z},M,{disabled:se,onBlur:Me,onFocus:Oe,style:Object.assign(Object.assign({},G),I),styles:Object.assign(Object.assign({},ne),N),suffix:tt,allowClear:je,className:Ke(A,P,ie,ge,le,K),onChange:$e,addonBefore:T&&ze.createElement(QP,{form:!0,space:!0},T),addonAfter:b&&ze.createElement(QP,{form:!0,space:!0},b),classNames:Object.assign(Object.assign(Object.assign({},x),J),{input:Ke({[`${te}-sm`]:de==="small",[`${te}-lg`]:de==="large",[`${te}-rtl`]:V==="rtl"},x==null?void 0:x.input,J.input,ae),variant:Ke({[`${te}-${ke}`]:dt},sb(te,Ie)),affixWrapper:Ke({[`${te}-affix-wrapper-sm`]:de==="small",[`${te}-affix-wrapper-lg`]:de==="large",[`${te}-affix-wrapper-rtl`]:V==="rtl"},ae),wrapper:Ke({[`${te}-group-rtl`]:V==="rtl"},ae),groupWrapper:Ke({[`${te}-group-wrapper-sm`]:de==="small",[`${te}-group-wrapper-lg`]:de==="large",[`${te}-group-wrapper-rtl`]:V==="rtl",[`${te}-group-wrapper-${ke}`]:dt},sb(`${te}-group-wrapper`,Ie,we),ae)})}))))}),xT=YNe;function hb(t){const[r,o]=y.useState(t);return y.useEffect(()=>{const s=setTimeout(()=>{o(t)},t.length?0:10);return()=>{clearTimeout(s)}},[t]),r}const qNe=t=>{const{componentCls:r}=t,o=`${r}-show-help`,s=`${r}-show-help-item`;return{[o]:{transition:`opacity ${t.motionDurationFast} ${t.motionEaseInOut}`,"&-appear, &-enter":{opacity:0,"&-active":{opacity:1}},"&-leave":{opacity:1,"&-active":{opacity:0}},[s]:{overflow:"hidden",transition:`height ${t.motionDurationFast} ${t.motionEaseInOut},
                     opacity ${t.motionDurationFast} ${t.motionEaseInOut},
                     transform ${t.motionDurationFast} ${t.motionEaseInOut} !important`,[`&${s}-appear, &${s}-enter`]:{transform:"translateY(-5px)",opacity:0,"&-active":{transform:"translateY(0)",opacity:1}},[`&${s}-leave-active`]:{transform:"translateY(-5px)"}}}}},XNe=qNe,JNe=t=>({legend:{display:"block",width:"100%",marginBottom:t.marginLG,padding:0,color:t.colorTextDescription,fontSize:t.fontSizeLG,lineHeight:"inherit",border:0,borderBottom:`${Xe(t.lineWidth)} ${t.lineType} ${t.colorBorder}`},'input[type="search"]':{boxSizing:"border-box"},'input[type="radio"], input[type="checkbox"]':{lineHeight:"normal"},'input[type="file"]':{display:"block"},'input[type="range"]':{display:"block",width:"100%"},"select[multiple], select[size]":{height:"auto"},"input[type='file']:focus,\n  input[type='radio']:focus,\n  input[type='checkbox']:focus":{outline:0,boxShadow:`0 0 0 ${Xe(t.controlOutlineWidth)} ${t.controlOutline}`},output:{display:"block",paddingTop:15,color:t.colorText,fontSize:t.fontSize,lineHeight:t.lineHeight}}),oW=(t,r)=>{const{formItemCls:o}=t;return{[o]:{[`${o}-label > label`]:{height:r},[`${o}-control-input`]:{minHeight:r}}}},QNe=t=>{const{componentCls:r}=t;return{[t.componentCls]:Object.assign(Object.assign(Object.assign({},Ps(t)),JNe(t)),{[`${r}-text`]:{display:"inline-block",paddingInlineEnd:t.paddingSM},"&-small":Object.assign({},oW(t,t.controlHeightSM)),"&-large":Object.assign({},oW(t,t.controlHeightLG))})}},ZNe=t=>{const{formItemCls:r,iconCls:o,componentCls:s,rootPrefixCls:c,antCls:d,labelRequiredMarkColor:f,labelColor:v,labelFontSize:g,labelHeight:_,labelColonMarginInlineStart:C,labelColonMarginInlineEnd:b,itemMarginBottom:T}=t;return{[r]:Object.assign(Object.assign({},Ps(t)),{marginBottom:T,verticalAlign:"top","&-with-help":{transition:"none"},[`&-hidden,
        &-hidden${d}-row`]:{display:"none"},"&-has-warning":{[`${r}-split`]:{color:t.colorError}},"&-has-error":{[`${r}-split`]:{color:t.colorWarning}},[`${r}-label`]:{flexGrow:0,overflow:"hidden",whiteSpace:"nowrap",textAlign:"end",verticalAlign:"middle","&-left":{textAlign:"start"},"&-wrap":{overflow:"unset",lineHeight:t.lineHeight,whiteSpace:"unset"},"> label":{position:"relative",display:"inline-flex",alignItems:"center",maxWidth:"100%",height:_,color:v,fontSize:g,[`> ${o}`]:{fontSize:t.fontSize,verticalAlign:"top"},[`&${r}-required:not(${r}-required-mark-optional)::before`]:{display:"inline-block",marginInlineEnd:t.marginXXS,color:f,fontSize:t.fontSize,fontFamily:"SimSun, sans-serif",lineHeight:1,content:'"*"',[`${s}-hide-required-mark &`]:{display:"none"}},[`${r}-optional`]:{display:"inline-block",marginInlineStart:t.marginXXS,color:t.colorTextDescription,[`${s}-hide-required-mark &`]:{display:"none"}},[`${r}-tooltip`]:{color:t.colorTextDescription,cursor:"help",writingMode:"horizontal-tb",marginInlineStart:t.marginXXS},"&::after":{content:'":"',position:"relative",marginBlock:0,marginInlineStart:C,marginInlineEnd:b},[`&${r}-no-colon::after`]:{content:'"\\a0"'}}},[`${r}-control`]:{"--ant-display":"flex",flexDirection:"column",flexGrow:1,[`&:first-child:not([class^="'${c}-col-'"]):not([class*="' ${c}-col-'"])`]:{width:"100%"},"&-input":{position:"relative",display:"flex",alignItems:"center",minHeight:t.controlHeight,"&-content":{flex:"auto",maxWidth:"100%"}}},[r]:{"&-additional":{display:"flex",flexDirection:"column"},"&-explain, &-extra":{clear:"both",color:t.colorTextDescription,fontSize:t.fontSize,lineHeight:t.lineHeight},"&-explain-connected":{width:"100%"},"&-extra":{minHeight:t.controlHeightSM,transition:`color ${t.motionDurationMid} ${t.motionEaseOut}`},"&-explain":{"&-error":{color:t.colorError},"&-warning":{color:t.colorWarning}}},[`&-with-help ${r}-explain`]:{height:"auto",opacity:1},[`${r}-feedback-icon`]:{fontSize:t.fontSize,textAlign:"center",visibility:"visible",animationName:U2,animationDuration:t.motionDurationMid,animationTimingFunction:t.motionEaseOutBack,pointerEvents:"none","&-success":{color:t.colorSuccess},"&-error":{color:t.colorError},"&-warning":{color:t.colorWarning},"&-validating":{color:t.colorPrimary}}})}},aW=(t,r)=>{const{formItemCls:o}=t;return{[`${r}-horizontal`]:{[`${o}-label`]:{flexGrow:0},[`${o}-control`]:{flex:"1 1 0",minWidth:0},[`${o}-label[class$='-24'], ${o}-label[class*='-24 ']`]:{[`& + ${o}-control`]:{minWidth:"unset"}}}}},ePe=t=>{const{componentCls:r,formItemCls:o,inlineItemMarginBottom:s}=t;return{[`${r}-inline`]:{display:"flex",flexWrap:"wrap",[o]:{flex:"none",marginInlineEnd:t.margin,marginBottom:s,"&-row":{flexWrap:"nowrap"},[`> ${o}-label,
        > ${o}-control`]:{display:"inline-block",verticalAlign:"top"},[`> ${o}-label`]:{flex:"none"},[`${r}-text`]:{display:"inline-block"},[`${o}-has-feedback`]:{display:"inline-block"}}}}},Wc=t=>({padding:t.verticalLabelPadding,margin:t.verticalLabelMargin,whiteSpace:"initial",textAlign:"start","> label":{margin:0,"&::after":{visibility:"hidden"}}}),MQ=t=>{const{componentCls:r,formItemCls:o,rootPrefixCls:s}=t;return{[`${o} ${o}-label`]:Wc(t),[`${r}:not(${r}-inline)`]:{[o]:{flexWrap:"wrap",[`${o}-label, ${o}-control`]:{[`&:not([class*=" ${s}-col-xs"])`]:{flex:"0 0 100%",maxWidth:"100%"}}}}}},tPe=t=>{const{componentCls:r,formItemCls:o,antCls:s}=t;return{[`${r}-vertical`]:{[`${o}:not(${o}-horizontal)`]:{[`${o}-row`]:{flexDirection:"column"},[`${o}-label > label`]:{height:"auto"},[`${o}-control`]:{width:"100%"},[`${o}-label,
        ${s}-col-24${o}-label,
        ${s}-col-xl-24${o}-label`]:Wc(t)}},[`@media (max-width: ${Xe(t.screenXSMax)})`]:[MQ(t),{[r]:{[`${o}:not(${o}-horizontal)`]:{[`${s}-col-xs-24${o}-label`]:Wc(t)}}}],[`@media (max-width: ${Xe(t.screenSMMax)})`]:{[r]:{[`${o}:not(${o}-horizontal)`]:{[`${s}-col-sm-24${o}-label`]:Wc(t)}}},[`@media (max-width: ${Xe(t.screenMDMax)})`]:{[r]:{[`${o}:not(${o}-horizontal)`]:{[`${s}-col-md-24${o}-label`]:Wc(t)}}},[`@media (max-width: ${Xe(t.screenLGMax)})`]:{[r]:{[`${o}:not(${o}-horizontal)`]:{[`${s}-col-lg-24${o}-label`]:Wc(t)}}}}},nPe=t=>{const{formItemCls:r,antCls:o}=t;return{[`${r}-vertical`]:{[`${r}-row`]:{flexDirection:"column"},[`${r}-label > label`]:{height:"auto"},[`${r}-control`]:{width:"100%"}},[`${r}-vertical ${r}-label,
      ${o}-col-24${r}-label,
      ${o}-col-xl-24${r}-label`]:Wc(t),[`@media (max-width: ${Xe(t.screenXSMax)})`]:[MQ(t),{[r]:{[`${o}-col-xs-24${r}-label`]:Wc(t)}}],[`@media (max-width: ${Xe(t.screenSMMax)})`]:{[r]:{[`${o}-col-sm-24${r}-label`]:Wc(t)}},[`@media (max-width: ${Xe(t.screenMDMax)})`]:{[r]:{[`${o}-col-md-24${r}-label`]:Wc(t)}},[`@media (max-width: ${Xe(t.screenLGMax)})`]:{[r]:{[`${o}-col-lg-24${r}-label`]:Wc(t)}}}},rPe=t=>({labelRequiredMarkColor:t.colorError,labelColor:t.colorTextHeading,labelFontSize:t.fontSize,labelHeight:t.controlHeight,labelColonMarginInlineStart:t.marginXXS/2,labelColonMarginInlineEnd:t.marginXS,itemMarginBottom:t.marginLG,verticalLabelPadding:`0 0 ${t.paddingXS}px`,verticalLabelMargin:0,inlineItemMarginBottom:0}),FQ=(t,r)=>oi(t,{formItemCls:`${t.componentCls}-item`,rootPrefixCls:r}),hL=Oo("Form",(t,r)=>{let{rootPrefixCls:o}=r;const s=FQ(t,o);return[QNe(s),ZNe(s),XNe(s),aW(s,s.componentCls),aW(s,s.formItemCls),ePe(s),tPe(s),nPe(s),tJ(s),U2]},rPe,{order:-1e3}),sW=[];function tx(t,r,o){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;return{key:typeof t=="string"?t:`${r}-${s}`,error:t,errorStatus:o}}const iPe=t=>{let{help:r,helpStatus:o,errors:s=sW,warnings:c=sW,className:d,fieldId:f,onVisibleChanged:v}=t;const{prefixCls:g}=y.useContext(W2),_=`${g}-item-explain`,C=_u(g),[b,T,A]=hL(g,C),I=y.useMemo(()=>BP(g),[g]),N=hb(s),P=hb(c),D=y.useMemo(()=>r!=null?[tx(r,"help",o)]:[].concat(Et(N.map((M,F)=>tx(M,"error","error",F))),Et(P.map((M,F)=>tx(M,"warning","warning",F)))),[r,o,N,P]),x=y.useMemo(()=>{const M={};return D.forEach(F=>{let{key:V}=F;M[V]=(M[V]||0)+1}),D.map((F,V)=>Object.assign(Object.assign({},F),{key:M[F.key]>1?`${F.key}-fallback-${V}`:F.key}))},[D]),L={};return f&&(L.id=`${f}_help`),b(y.createElement(ef,{motionDeadline:I.motionDeadline,motionName:`${g}-show-help`,visible:!!x.length,onVisibleChanged:v},M=>{const{className:F,style:V}=M;return y.createElement("div",Object.assign({},L,{className:Ke(_,F,A,C,d,T),style:V}),y.createElement(LX,Object.assign({keys:x},BP(g),{motionName:`${g}-show-help-item`,component:!1}),$=>{const{key:z,error:K,errorStatus:G,className:J,style:ne}=$;return y.createElement("div",{key:z,className:Ke(J,{[`${_}-${G}`]:G}),style:ne},K)}))}))},UQ=iPe,oPe=["parentNode"],aPe="form_item";function nv(t){return t===void 0||t===!1?[]:Array.isArray(t)?t:[t]}function BQ(t,r){if(!t.length)return;const o=t.join("_");return r?`${r}_${o}`:oPe.includes(o)?`${aPe}_${o}`:o}function VQ(t,r,o,s,c,d){let f=s;return d!==void 0?f=d:o.validating?f="validating":t.length?f="error":r.length?f="warning":(o.touched||c&&o.validated)&&(f="success"),f}var sPe=globalThis&&globalThis.__rest||function(t,r){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&r.indexOf(s)<0&&(o[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(t);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(t,s[c])&&(o[s[c]]=t[s[c]]);return o};function cW(t){return nv(t).join("_")}function lW(t,r){const o=r.getFieldInstance(t),s=Rq(o);if(s)return s;const c=BQ(nv(t),r.__INTERNAL__.name);if(c)return document.getElementById(c)}function jQ(t){const[r]=z2(),o=y.useRef({}),s=y.useMemo(()=>t??Object.assign(Object.assign({},r),{__INTERNAL__:{itemRef:c=>d=>{const f=cW(c);d?o.current[f]=d:delete o.current[f]}},scrollToField:function(c){let d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{focus:f}=d,v=sPe(d,["focus"]),g=lW(c,s);g&&(Xbe(g,Object.assign({scrollMode:"if-needed",block:"nearest"},v)),f&&s.focusField(c))},focusField:c=>{var d,f;const v=s.getFieldInstance(c);typeof(v==null?void 0:v.focus)=="function"?v.focus():(f=(d=lW(c,s))===null||d===void 0?void 0:d.focus)===null||f===void 0||f.call(d)},getFieldInstance:c=>{const d=cW(c);return o.current[d]}}),[t,r]);return[s]}var cPe=globalThis&&globalThis.__rest||function(t,r){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&r.indexOf(s)<0&&(o[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(t);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(t,s[c])&&(o[s[c]]=t[s[c]]);return o};const lPe=(t,r)=>{const o=y.useContext(Zh),{getPrefixCls:s,direction:c,requiredMark:d,colon:f,scrollToFirstError:v,className:g,style:_}=Ec("form"),{prefixCls:C,className:b,rootClassName:T,size:A,disabled:I=o,form:N,colon:P,labelAlign:D,labelWrap:x,labelCol:L,wrapperCol:M,hideRequiredMark:F,layout:V="horizontal",scrollToFirstError:$,requiredMark:z,onFinishFailed:K,name:G,style:J,feedbackIcons:ne,variant:te}=t,ce=cPe(t,["prefixCls","className","rootClassName","size","disabled","form","colon","labelAlign","labelWrap","labelCol","wrapperCol","hideRequiredMark","layout","scrollToFirstError","requiredMark","onFinishFailed","name","style","feedbackIcons","variant"]),ge=Su(A),oe=y.useContext(sX),ae=y.useMemo(()=>z!==void 0?z:F?!1:d!==void 0?d:!0,[F,z,d]),ie=P??f,ve=s("form",C),me=_u(ve),[le,de,Ee]=hL(ve,me),se=Ke(ve,`${ve}-${V}`,{[`${ve}-hide-required-mark`]:ae===!1,[`${ve}-rtl`]:c==="rtl",[`${ve}-${ge}`]:ge},Ee,me,de,g,b,T),[Te]=jQ(N),{__INTERNAL__:we}=Te;we.name=G;const Le=y.useMemo(()=>({name:G,labelAlign:D,labelCol:L,labelWrap:x,wrapperCol:M,vertical:V==="vertical",colon:ie,requiredMark:ae,itemRef:we.itemRef,form:Te,feedbackIcons:ne}),[G,D,L,M,V,ie,ae,Te,ne]),Ie=y.useRef(null);y.useImperativeHandle(r,()=>{var Me;return Object.assign(Object.assign({},Te),{nativeElement:(Me=Ie.current)===null||Me===void 0?void 0:Me.nativeElement})});const De=(Me,Oe)=>{if(Me){let $e={block:"nearest"};typeof Me=="object"&&($e=Object.assign(Object.assign({},$e),Me)),Te.scrollToField(Oe,$e)}},Ye=Me=>{if(K==null||K(Me),Me.errorFields.length){const Oe=Me.errorFields[0].name;if($!==void 0){De($,Oe);return}v!==void 0&&De(v,Oe)}};return le(y.createElement(CJ.Provider,{value:te},y.createElement(mX,{disabled:I},y.createElement(Jv.Provider,{value:ge},y.createElement(yJ,{validateMessages:oe},y.createElement(pu.Provider,{value:Le},y.createElement(Lm,Object.assign({id:G},ce,{name:G,onFinishFailed:Ye,form:Te,ref:Ie,style:Object.assign(Object.assign({},_),J),className:se}))))))))},uPe=y.forwardRef(lPe),dPe=uPe;function hPe(t){if(typeof t=="function")return t;const r=Qc(t);return r.length<=1?r[0]:r}const $Q=()=>{const{status:t,errors:r=[],warnings:o=[]}=y.useContext(As);return{status:t,errors:r,warnings:o}};$Q.Context=As;const fPe=$Q;function pPe(t){const[r,o]=y.useState(t),s=y.useRef(null),c=y.useRef([]),d=y.useRef(!1);y.useEffect(()=>(d.current=!1,()=>{d.current=!0,ii.cancel(s.current),s.current=null}),[]);function f(v){d.current||(s.current===null&&(c.current=[],s.current=ii(()=>{s.current=null,o(g=>{let _=g;return c.current.forEach(C=>{_=C(_)}),_})})),c.current.push(v))}return[r,f]}function mPe(){const{itemRef:t}=y.useContext(pu),r=y.useRef({});function o(s,c){const d=c&&typeof c=="object"&&qv(c),f=s.join("_");return(r.current.name!==f||r.current.originRef!==d)&&(r.current.name=f,r.current.originRef=d,r.current.ref=nl(t(s),d)),r.current.ref}return o}const gPe=t=>{const{formItemCls:r}=t;return{"@media screen and (-ms-high-contrast: active), (-ms-high-contrast: none)":{[`${r}-control`]:{display:"flex"}}}},vPe=uT(["Form","item-item"],(t,r)=>{let{rootPrefixCls:o}=r;const s=FQ(t,o);return[gPe(s)]});var EPe=globalThis&&globalThis.__rest||function(t,r){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&r.indexOf(s)<0&&(o[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(t);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(t,s[c])&&(o[s[c]]=t[s[c]]);return o};const _Pe=24,SPe=t=>{const{prefixCls:r,status:o,labelCol:s,wrapperCol:c,children:d,errors:f,warnings:v,_internalItemRender:g,extra:_,help:C,fieldId:b,marginBottom:T,onErrorVisibleChanged:A,label:I}=t,N=`${r}-item`,P=y.useContext(pu),D=y.useMemo(()=>{let ce=Object.assign({},c||P.wrapperCol||{});return I===null&&!s&&!c&&P.labelCol&&[void 0,"xs","sm","md","lg","xl","xxl"].forEach(oe=>{const ae=oe?[oe]:[],ie=uc(P.labelCol,ae),ve=typeof ie=="object"?ie:{},me=uc(ce,ae),le=typeof me=="object"?me:{};"span"in ve&&!("offset"in le)&&ve.span<_Pe&&(ce=ac(ce,[].concat(ae,["offset"]),ve.span))}),ce},[c,P]),x=Ke(`${N}-control`,D.className),L=y.useMemo(()=>EPe(P,["labelCol","wrapperCol"]),[P]),M=y.useRef(null),[F,V]=y.useState(0);Rr(()=>{_&&M.current?V(M.current.clientHeight):V(0)},[_]);const $=y.createElement("div",{className:`${N}-control-input`},y.createElement("div",{className:`${N}-control-input-content`},d)),z=y.useMemo(()=>({prefixCls:r,status:o}),[r,o]),K=T!==null||f.length||v.length?y.createElement(W2.Provider,{value:z},y.createElement(UQ,{fieldId:b,errors:f,warnings:v,help:C,helpStatus:o,className:`${N}-explain-connected`,onVisibleChanged:A})):null,G={};b&&(G.id=`${b}_extra`);const J=_?y.createElement("div",Object.assign({},G,{className:`${N}-extra`,ref:M}),_):null,ne=K||J?y.createElement("div",{className:`${N}-additional`,style:T?{minHeight:T+F}:{}},K,J):null,te=g&&g.mark==="pro_table_render"&&g.render?g.render(t,{input:$,errorList:K,extra:J}):y.createElement(y.Fragment,null,$,ne);return y.createElement(pu.Provider,{value:L},y.createElement(dL,Object.assign({},D,{className:x}),te),y.createElement(vPe,{prefixCls:r}))},yPe=SPe;var CPe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M623.6 316.7C593.6 290.4 554 276 512 276s-81.6 14.5-111.6 40.7C369.2 344 352 380.7 352 420v7.6c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V420c0-44.1 43.1-80 96-80s96 35.9 96 80c0 31.1-22 59.6-56.1 72.7-21.2 8.1-39.2 22.3-52.1 40.9-13.1 19-19.9 41.8-19.9 64.9V620c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-22.7a48.3 48.3 0 0130.9-44.8c59-22.7 97.1-74.7 97.1-132.5.1-39.3-17.1-76-48.3-103.3zM472 732a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"question-circle",theme:"outlined"};const bPe=CPe;var TPe=function(r,o){return y.createElement(ao,nt({},r,{ref:o,icon:bPe}))},RPe=y.forwardRef(TPe);const wPe=RPe;var IPe=globalThis&&globalThis.__rest||function(t,r){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&r.indexOf(s)<0&&(o[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(t);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(t,s[c])&&(o[s[c]]=t[s[c]]);return o};function APe(t){return t?typeof t=="object"&&!y.isValidElement(t)?t:{title:t}:null}const OPe=t=>{let{prefixCls:r,label:o,htmlFor:s,labelCol:c,labelAlign:d,colon:f,required:v,requiredMark:g,tooltip:_,vertical:C}=t;var b;const[T]=Dm("Form"),{labelAlign:A,labelCol:I,labelWrap:N,colon:P}=y.useContext(pu);if(!o)return null;const D=c||I||{},x=d||A,L=`${r}-item-label`,M=Ke(L,x==="left"&&`${L}-left`,D.className,{[`${L}-wrap`]:!!N});let F=o;const V=f===!0||P!==!1&&f!==!1;V&&!C&&typeof o=="string"&&o.trim()&&(F=o.replace(/[:|：]\s*$/,""));const z=APe(_);if(z){const{icon:ne=y.createElement(wPe,null)}=z,te=IPe(z,["icon"]),ce=y.createElement(rE,Object.assign({},te),y.cloneElement(ne,{className:`${r}-item-tooltip`,title:"",onClick:ge=>{ge.preventDefault()},tabIndex:null}));F=y.createElement(y.Fragment,null,F,ce)}const K=g==="optional",G=typeof g=="function";G?F=g(F,{required:!!v}):K&&!v&&(F=y.createElement(y.Fragment,null,F,y.createElement("span",{className:`${r}-item-optional`,title:""},(T==null?void 0:T.optional)||((b=Hh.Form)===null||b===void 0?void 0:b.optional))));const J=Ke({[`${r}-item-required`]:v,[`${r}-item-required-mark-optional`]:K||G,[`${r}-item-no-colon`]:!V});return y.createElement(dL,Object.assign({},D,{className:M}),y.createElement("label",{htmlFor:s,className:J,title:typeof o=="string"?o:""},F))},xPe=OPe,NPe={success:$X,warning:zX,error:fT,validating:pT};function HQ(t){let{children:r,errors:o,warnings:s,hasFeedback:c,validateStatus:d,prefixCls:f,meta:v,noStyle:g}=t;const _=`${f}-item`,{feedbackIcons:C}=y.useContext(pu),b=VQ(o,s,v,null,!!c,d),{isFormItemInput:T,status:A,hasFeedback:I,feedbackIcon:N}=y.useContext(As),P=y.useMemo(()=>{var D;let x;if(c){const M=c!==!0&&c.icons||C,F=b&&((D=M==null?void 0:M({status:b,errors:o,warnings:s}))===null||D===void 0?void 0:D[b]),V=b&&NPe[b];x=F!==!1&&V?y.createElement("span",{className:Ke(`${_}-feedback-icon`,`${_}-feedback-icon-${b}`)},F||y.createElement(V,null)):null}const L={status:b||"",errors:o,warnings:s,hasFeedback:!!c,feedbackIcon:x,isFormItemInput:!0};return g&&(L.status=(b??A)||"",L.isFormItemInput=T,L.hasFeedback=!!(c??I),L.feedbackIcon=c!==void 0?L.feedbackIcon:N),L},[b,c,g,T,A]);return y.createElement(As.Provider,{value:P},r)}var PPe=globalThis&&globalThis.__rest||function(t,r){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&r.indexOf(s)<0&&(o[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(t);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(t,s[c])&&(o[s[c]]=t[s[c]]);return o};function DPe(t){const{prefixCls:r,className:o,rootClassName:s,style:c,help:d,errors:f,warnings:v,validateStatus:g,meta:_,hasFeedback:C,hidden:b,children:T,fieldId:A,required:I,isRequired:N,onSubItemMetaChange:P,layout:D}=t,x=PPe(t,["prefixCls","className","rootClassName","style","help","errors","warnings","validateStatus","meta","hasFeedback","hidden","children","fieldId","required","isRequired","onSubItemMetaChange","layout"]),L=`${r}-item`,{requiredMark:M,vertical:F}=y.useContext(pu),V=F||D==="vertical",$=y.useRef(null),z=hb(f),K=hb(v),G=d!=null,J=!!(G||f.length||v.length),ne=!!$.current&&gT($.current),[te,ce]=y.useState(null);Rr(()=>{if(J&&$.current){const ve=getComputedStyle($.current);ce(parseInt(ve.marginBottom,10))}},[J,ne]);const ge=ve=>{ve||ce(null)},ae=function(){let ve=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const me=ve?z:_.errors,le=ve?K:_.warnings;return VQ(me,le,_,"",!!C,g)}(),ie=Ke(L,o,s,{[`${L}-with-help`]:G||z.length||K.length,[`${L}-has-feedback`]:ae&&C,[`${L}-has-success`]:ae==="success",[`${L}-has-warning`]:ae==="warning",[`${L}-has-error`]:ae==="error",[`${L}-is-validating`]:ae==="validating",[`${L}-hidden`]:b,[`${L}-${D}`]:D});return y.createElement("div",{className:ie,style:c,ref:$},y.createElement(xQ,Object.assign({className:`${L}-row`},ia(x,["_internalItemRender","colon","dependencies","extra","fieldKey","getValueFromEvent","getValueProps","htmlFor","id","initialValue","isListField","label","labelAlign","labelCol","labelWrap","messageVariables","name","normalize","noStyle","preserve","requiredMark","rules","shouldUpdate","trigger","tooltip","validateFirst","validateTrigger","valuePropName","wrapperCol","validateDebounce"])),y.createElement(xPe,Object.assign({htmlFor:A},t,{requiredMark:M,required:I??N,prefixCls:r,vertical:V})),y.createElement(yPe,Object.assign({},t,_,{errors:z,warnings:K,prefixCls:r,status:ae,help:d,marginBottom:te,onErrorVisibleChanged:ge}),y.createElement(SJ.Provider,{value:P},y.createElement(HQ,{prefixCls:r,meta:_,errors:_.errors,warnings:_.warnings,hasFeedback:C,validateStatus:ae},T)))),!!te&&y.createElement("div",{className:`${L}-margin-offset`,style:{marginBottom:-te}}))}const LPe="__SPLIT__";function kPe(t,r){const o=Object.keys(t),s=Object.keys(r);return o.length===s.length&&o.every(c=>{const d=t[c],f=r[c];return d===f||typeof d=="function"||typeof f=="function"})}const MPe=y.memo(t=>{let{children:r}=t;return r},(t,r)=>kPe(t.control,r.control)&&t.update===r.update&&t.childProps.length===r.childProps.length&&t.childProps.every((o,s)=>o===r.childProps[s]));function uW(){return{errors:[],warnings:[],touched:!1,validating:!1,name:[],validated:!1}}function FPe(t){const{name:r,noStyle:o,className:s,dependencies:c,prefixCls:d,shouldUpdate:f,rules:v,children:g,required:_,label:C,messageVariables:b,trigger:T="onChange",validateTrigger:A,hidden:I,help:N,layout:P}=t,{getPrefixCls:D}=y.useContext(wr),{name:x}=y.useContext(pu),L=hPe(g),M=typeof L=="function",F=y.useContext(SJ),{validateTrigger:V}=y.useContext(Gh),$=A!==void 0?A:V,z=r!=null,K=D("form",d),G=_u(K),[J,ne,te]=hL(K,G);sT();const ce=y.useContext(Lv),ge=y.useRef(null),[oe,ae]=pPe({}),[ie,ve]=Em(()=>uW()),me=Le=>{const Ie=ce==null?void 0:ce.getKey(Le.name);if(ve(Le.destroy?uW():Le,!0),o&&N!==!1&&F){let De=Le.name;if(Le.destroy)De=ge.current||De;else if(Ie!==void 0){const[Ye,Me]=Ie;De=[Ye].concat(Et(Me)),ge.current=De}F(Le,De)}},le=(Le,Ie)=>{ae(De=>{const Ye=Object.assign({},De),Oe=[].concat(Et(Le.name.slice(0,-1)),Et(Ie)).join(LPe);return Le.destroy?delete Ye[Oe]:Ye[Oe]=Le,Ye})},[de,Ee]=y.useMemo(()=>{const Le=Et(ie.errors),Ie=Et(ie.warnings);return Object.values(oe).forEach(De=>{Le.push.apply(Le,Et(De.errors||[])),Ie.push.apply(Ie,Et(De.warnings||[]))}),[Le,Ie]},[oe,ie.errors,ie.warnings]),se=mPe();function Te(Le,Ie,De){return o&&!I?y.createElement(HQ,{prefixCls:K,hasFeedback:t.hasFeedback,validateStatus:t.validateStatus,meta:ie,errors:de,warnings:Ee,noStyle:!0},Le):y.createElement(DPe,Object.assign({key:"row"},t,{className:Ke(s,te,G,ne),prefixCls:K,fieldId:Ie,isRequired:De,errors:de,warnings:Ee,meta:ie,onSubItemMetaChange:le,layout:P}),Le)}if(!z&&!M&&!c)return J(Te(L));let we={};return typeof C=="string"?we.label=C:r&&(we.label=String(r)),b&&(we=Object.assign(Object.assign({},we),b)),J(y.createElement(H2,Object.assign({},t,{messageVariables:we,trigger:T,validateTrigger:$,onMetaChange:me}),(Le,Ie,De)=>{const Ye=nv(r).length&&Ie?Ie.name:[],Me=BQ(Ye,x),Oe=_!==void 0?_:!!(v!=null&&v.some(je=>{if(je&&typeof je=="object"&&je.required&&!je.warningOnly)return!0;if(typeof je=="function"){const ke=je(De);return(ke==null?void 0:ke.required)&&!(ke!=null&&ke.warningOnly)}return!1})),$e=Object.assign({},Le);let tt=null;if(Array.isArray(L)&&z)tt=L;else if(!(M&&(!(f||c)||z))){if(!(c&&!M&&!z))if(y.isValidElement(L)){const je=Object.assign(Object.assign({},L.props),$e);if(je.id||(je.id=Me),N||de.length>0||Ee.length>0||t.extra){const Ze=[];(N||de.length>0)&&Ze.push(`${Me}_help`),t.extra&&Ze.push(`${Me}_extra`),je["aria-describedby"]=Ze.join(" ")}de.length>0&&(je["aria-invalid"]="true"),Oe&&(je["aria-required"]="true"),Nm(L)&&(je.ref=se(Ye,L)),new Set([].concat(Et(nv(T)),Et(nv($)))).forEach(Ze=>{je[Ze]=function(){for(var ut,Tt,pt,ht,qe,Je=arguments.length,Ct=new Array(Je),Nt=0;Nt<Je;Nt++)Ct[Nt]=arguments[Nt];(pt=$e[Ze])===null||pt===void 0||(ut=pt).call.apply(ut,[$e].concat(Ct)),(qe=(ht=L.props)[Ze])===null||qe===void 0||(Tt=qe).call.apply(Tt,[ht].concat(Ct))}});const dt=[je["aria-required"],je["aria-invalid"],je["aria-describedby"]];tt=y.createElement(MPe,{control:$e,update:L,childProps:dt},gc(L,je))}else M&&(f||c)&&!z?tt=L(De):tt=L}return Te(tt,Me,Oe)}))}const zQ=FPe;zQ.useStatus=fPe;const UPe=zQ;var BPe=globalThis&&globalThis.__rest||function(t,r){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&r.indexOf(s)<0&&(o[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(t);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(t,s[c])&&(o[s[c]]=t[s[c]]);return o};const VPe=t=>{var{prefixCls:r,children:o}=t,s=BPe(t,["prefixCls","children"]);const{getPrefixCls:c}=y.useContext(wr),d=c("form",r),f=y.useMemo(()=>({prefixCls:d,status:"error"}),[d]);return y.createElement(gJ,Object.assign({},s),(v,g,_)=>y.createElement(W2.Provider,{value:f},o(v.map(C=>Object.assign(Object.assign({},C),{fieldKey:C.key})),g,{errors:_.errors,warnings:_.warnings})))},jPe=VPe;function $Pe(){const{form:t}=y.useContext(pu);return t}const yu=dPe;yu.Item=UPe;yu.List=jPe;yu.ErrorList=UQ;yu.useForm=jQ;yu.useFormInstance=$Pe;yu.useWatch=_J;yu.Provider=yJ;yu.create=()=>{};const dW=yu;var HPe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"}}]},name:"eye",theme:"outlined"};const zPe=HPe;var WPe=function(r,o){return y.createElement(ao,nt({},r,{ref:o,icon:zPe}))},GPe=y.forwardRef(WPe);const KPe=GPe,YPe=t=>{const{getPrefixCls:r,direction:o}=y.useContext(wr),{prefixCls:s,className:c}=t,d=r("input-group",s),f=r("input"),[v,g,_]=AQ(f),C=Ke(d,_,{[`${d}-lg`]:t.size==="large",[`${d}-sm`]:t.size==="small",[`${d}-compact`]:t.compact,[`${d}-rtl`]:o==="rtl"},g,c),b=y.useContext(As),T=y.useMemo(()=>Object.assign(Object.assign({},b),{isFormItemInput:!1}),[b]);return v(y.createElement("span",{className:C,style:t.style,onMouseEnter:t.onMouseEnter,onMouseLeave:t.onMouseLeave,onFocus:t.onFocus,onBlur:t.onBlur},y.createElement(As.Provider,{value:T},t.children)))},qPe=YPe,XPe=t=>{const{componentCls:r,paddingXS:o}=t;return{[r]:{display:"inline-flex",alignItems:"center",flexWrap:"nowrap",columnGap:o,"&-rtl":{direction:"rtl"},[`${r}-input`]:{textAlign:"center",paddingInline:t.paddingXXS},[`&${r}-sm ${r}-input`]:{paddingInline:t.calc(t.paddingXXS).div(2).equal()},[`&${r}-lg ${r}-input`]:{paddingInline:t.paddingXS}}}},JPe=Oo(["Input","OTP"],t=>{const r=oi(t,aE(t));return[XPe(r)]},sE);var QPe=globalThis&&globalThis.__rest||function(t,r){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&r.indexOf(s)<0&&(o[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(t);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(t,s[c])&&(o[s[c]]=t[s[c]]);return o};const ZPe=y.forwardRef((t,r)=>{const{value:o,onChange:s,onActiveChange:c,index:d,mask:f}=t,v=QPe(t,["value","onChange","onActiveChange","index","mask"]),g=o&&typeof f=="string"?f:o,_=I=>{s(d,I.target.value)},C=y.useRef(null);y.useImperativeHandle(r,()=>C.current);const b=()=>{ii(()=>{var I;const N=(I=C.current)===null||I===void 0?void 0:I.input;document.activeElement===N&&N&&N.select()})},T=I=>{const{key:N,ctrlKey:P,metaKey:D}=I;N==="ArrowLeft"?c(d-1):N==="ArrowRight"?c(d+1):N==="z"&&(P||D)&&I.preventDefault(),b()},A=I=>{I.key==="Backspace"&&!o&&c(d-1),b()};return y.createElement(xT,Object.assign({type:f===!0?"password":"text"},v,{ref:C,value:g,onInput:_,onFocus:b,onKeyDown:T,onKeyUp:A,onMouseDown:b,onMouseUp:b}))}),eDe=ZPe;var tDe=globalThis&&globalThis.__rest||function(t,r){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&r.indexOf(s)<0&&(o[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(t);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(t,s[c])&&(o[s[c]]=t[s[c]]);return o};function Uy(t){return(t||"").split("")}const nDe=t=>{const{index:r,prefixCls:o,separator:s}=t,c=typeof s=="function"?s(r):s;return c?y.createElement("span",{className:`${o}-separator`},c):null},rDe=y.forwardRef((t,r)=>{const{prefixCls:o,length:s=6,size:c,defaultValue:d,value:f,onChange:v,formatter:g,separator:_,variant:C,disabled:b,status:T,autoFocus:A,mask:I,type:N,onInput:P,inputMode:D}=t,x=tDe(t,["prefixCls","length","size","defaultValue","value","onChange","formatter","separator","variant","disabled","status","autoFocus","mask","type","onInput","inputMode"]),{getPrefixCls:L,direction:M}=y.useContext(wr),F=L("otp",o),V=Wh(x,{aria:!0,data:!0,attr:!0}),[$,z,K]=JPe(F),G=Su(se=>c??se),J=y.useContext(As),ne=TT(J.status,T),te=y.useMemo(()=>Object.assign(Object.assign({},J),{status:ne,hasFeedback:!1,feedbackIcon:null}),[J,ne]),ce=y.useRef(null),ge=y.useRef({});y.useImperativeHandle(r,()=>({focus:()=>{var se;(se=ge.current[0])===null||se===void 0||se.focus()},blur:()=>{var se;for(let Te=0;Te<s;Te+=1)(se=ge.current[Te])===null||se===void 0||se.blur()},nativeElement:ce.current}));const oe=se=>g?g(se):se,[ae,ie]=y.useState(()=>Uy(oe(d||"")));y.useEffect(()=>{f!==void 0&&ie(Uy(f))},[f]);const ve=ho(se=>{ie(se),P&&P(se),v&&se.length===s&&se.every(Te=>Te)&&se.some((Te,we)=>ae[we]!==Te)&&v(se.join(""))}),me=ho((se,Te)=>{let we=Et(ae);for(let Ie=0;Ie<se;Ie+=1)we[Ie]||(we[Ie]="");Te.length<=1?we[se]=Te:we=we.slice(0,se).concat(Uy(Te)),we=we.slice(0,s);for(let Ie=we.length-1;Ie>=0&&!we[Ie];Ie-=1)we.pop();const Le=oe(we.map(Ie=>Ie||" ").join(""));return we=Uy(Le).map((Ie,De)=>Ie===" "&&!we[De]?we[De]:Ie),we}),le=(se,Te)=>{var we;const Le=me(se,Te),Ie=Math.min(se+Te.length,s-1);Ie!==se&&Le[se]!==void 0&&((we=ge.current[Ie])===null||we===void 0||we.focus()),ve(Le)},de=se=>{var Te;(Te=ge.current[se])===null||Te===void 0||Te.focus()},Ee={variant:C,disabled:b,status:ne,mask:I,type:N,inputMode:D};return $(y.createElement("div",Object.assign({},V,{ref:ce,className:Ke(F,{[`${F}-sm`]:G==="small",[`${F}-lg`]:G==="large",[`${F}-rtl`]:M==="rtl"},K,z)}),y.createElement(As.Provider,{value:te},Array.from({length:s}).map((se,Te)=>{const we=`otp-${Te}`,Le=ae[Te]||"";return y.createElement(y.Fragment,{key:we},y.createElement(eDe,Object.assign({ref:Ie=>{ge.current[Te]=Ie},index:Te,size:G,htmlSize:1,className:`${F}-input`,onChange:le,value:Le,onActiveChange:de,autoFocus:Te===0&&A},Ee)),Te<s-1&&y.createElement(nDe,{separator:_,index:Te,prefixCls:F}))}))))}),iDe=rDe;var oDe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2Q889.47 375.11 816.7 305l-50.88 50.88C807.31 395.53 843.45 447.4 874.7 512 791.5 684.2 673.4 766 512 766q-72.67 0-133.87-22.38L323 798.75Q408 838 512 838q288.3 0 430.2-300.3a60.29 60.29 0 000-51.5zm-63.57-320.64L836 122.88a8 8 0 00-11.32 0L715.31 232.2Q624.86 186 512 186q-288.3 0-430.2 300.3a60.3 60.3 0 000 51.5q56.69 119.4 136.5 191.41L112.48 835a8 8 0 000 11.31L155.17 889a8 8 0 0011.31 0l712.15-712.12a8 8 0 000-11.32zM149.3 512C232.6 339.8 350.7 258 512 258c54.54 0 104.13 9.36 149.12 28.39l-70.3 70.3a176 176 0 00-238.13 238.13l-83.42 83.42C223.1 637.49 183.3 582.28 149.3 512zm246.7 0a112.11 112.11 0 01146.2-106.69L401.31 546.2A112 112 0 01396 512z"}},{tag:"path",attrs:{d:"M508 624c-3.46 0-6.87-.16-10.25-.47l-52.82 52.82a176.09 176.09 0 00227.42-227.42l-52.82 52.82c.31 3.38.47 6.79.47 10.25a111.94 111.94 0 01-112 112z"}}]},name:"eye-invisible",theme:"outlined"};const aDe=oDe;var sDe=function(r,o){return y.createElement(ao,nt({},r,{ref:o,icon:aDe}))},cDe=y.forwardRef(sDe);const lDe=cDe;var uDe=globalThis&&globalThis.__rest||function(t,r){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&r.indexOf(s)<0&&(o[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(t);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(t,s[c])&&(o[s[c]]=t[s[c]]);return o};const dDe=t=>t?y.createElement(KPe,null):y.createElement(lDe,null),hDe={click:"onClick",hover:"onMouseOver"},fDe=y.forwardRef((t,r)=>{const{disabled:o,action:s="click",visibilityToggle:c=!0,iconRender:d=dDe}=t,f=y.useContext(Zh),v=o??f,g=typeof c=="object"&&c.visible!==void 0,[_,C]=y.useState(()=>g?c.visible:!1),b=y.useRef(null);y.useEffect(()=>{g&&C(c.visible)},[g,c]);const T=kQ(b),A=()=>{var G;if(v)return;_&&T();const J=!_;C(J),typeof c=="object"&&((G=c.onVisibleChange)===null||G===void 0||G.call(c,J))},I=G=>{const J=hDe[s]||"",ne=d(_),te={[J]:A,className:`${G}-icon`,key:"passwordIcon",onMouseDown:ce=>{ce.preventDefault()},onMouseUp:ce=>{ce.preventDefault()}};return y.cloneElement(y.isValidElement(ne)?ne:y.createElement("span",null,ne),te)},{className:N,prefixCls:P,inputPrefixCls:D,size:x}=t,L=uDe(t,["className","prefixCls","inputPrefixCls","size"]),{getPrefixCls:M}=y.useContext(wr),F=M("input",D),V=M("input-password",P),$=c&&I(V),z=Ke(V,N,{[`${V}-${x}`]:!!x}),K=Object.assign(Object.assign({},ia(L,["suffix","iconRender","visibilityToggle"])),{type:_?"text":"password",className:z,prefixCls:F,suffix:$});return x&&(K.size=x),y.createElement(xT,Object.assign({ref:nl(r,b)},K))}),pDe=fDe;var mDe=globalThis&&globalThis.__rest||function(t,r){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&r.indexOf(s)<0&&(o[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(t);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(t,s[c])&&(o[s[c]]=t[s[c]]);return o};const gDe=y.forwardRef((t,r)=>{const{prefixCls:o,inputPrefixCls:s,className:c,size:d,suffix:f,enterButton:v=!1,addonAfter:g,loading:_,disabled:C,onSearch:b,onChange:T,onCompositionStart:A,onCompositionEnd:I}=t,N=mDe(t,["prefixCls","inputPrefixCls","className","size","suffix","enterButton","addonAfter","loading","disabled","onSearch","onChange","onCompositionStart","onCompositionEnd"]),{getPrefixCls:P,direction:D}=y.useContext(wr),x=y.useRef(!1),L=P("input-search",o),M=P("input",s),{compactSize:F}=eE(L,D),V=Su(le=>{var de;return(de=d??F)!==null&&de!==void 0?de:le}),$=y.useRef(null),z=le=>{le!=null&&le.target&&le.type==="click"&&b&&b(le.target.value,le,{source:"clear"}),T==null||T(le)},K=le=>{var de;document.activeElement===((de=$.current)===null||de===void 0?void 0:de.input)&&le.preventDefault()},G=le=>{var de,Ee;b&&b((Ee=(de=$.current)===null||de===void 0?void 0:de.input)===null||Ee===void 0?void 0:Ee.value,le,{source:"input"})},J=le=>{x.current||_||G(le)},ne=typeof v=="boolean"?y.createElement(JJ,null):null,te=`${L}-button`;let ce;const ge=v||{},oe=ge.type&&ge.type.__ANT_BUTTON===!0;oe||ge.type==="button"?ce=gc(ge,Object.assign({onMouseDown:K,onClick:le=>{var de,Ee;(Ee=(de=ge==null?void 0:ge.props)===null||de===void 0?void 0:de.onClick)===null||Ee===void 0||Ee.call(de,le),G(le)},key:"enterButton"},oe?{className:te,size:V}:{})):ce=y.createElement(mo,{className:te,type:v?"primary":void 0,size:V,disabled:C,key:"enterButton",onMouseDown:K,onClick:G,loading:_,icon:ne},v),g&&(ce=[ce,gc(g,{key:"addonAfter"})]);const ae=Ke(L,{[`${L}-rtl`]:D==="rtl",[`${L}-${V}`]:!!V,[`${L}-with-button`]:!!v},c),ie=Object.assign(Object.assign({},N),{className:ae,prefixCls:M,type:"search"}),ve=le=>{x.current=!0,A==null||A(le)},me=le=>{x.current=!1,I==null||I(le)};return y.createElement(xT,Object.assign({ref:nl($,r),onPressEnter:J},ie,{size:V,onCompositionStart:ve,onCompositionEnd:me,addonAfter:ce,suffix:f,onChange:z,disabled:C}))}),vDe=gDe;var EDe=`
  min-height:0 !important;
  max-height:none !important;
  height:0 !important;
  visibility:hidden !important;
  overflow:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
  pointer-events: none !important;
`,_De=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","font-variant","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break","white-space"],nx={},ys;function SDe(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,o=t.getAttribute("id")||t.getAttribute("data-reactid")||t.getAttribute("name");if(r&&nx[o])return nx[o];var s=window.getComputedStyle(t),c=s.getPropertyValue("box-sizing")||s.getPropertyValue("-moz-box-sizing")||s.getPropertyValue("-webkit-box-sizing"),d=parseFloat(s.getPropertyValue("padding-bottom"))+parseFloat(s.getPropertyValue("padding-top")),f=parseFloat(s.getPropertyValue("border-bottom-width"))+parseFloat(s.getPropertyValue("border-top-width")),v=_De.map(function(_){return"".concat(_,":").concat(s.getPropertyValue(_))}).join(";"),g={sizingStyle:v,paddingSize:d,borderSize:f,boxSizing:c};return r&&o&&(nx[o]=g),g}function yDe(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;ys||(ys=document.createElement("textarea"),ys.setAttribute("tab-index","-1"),ys.setAttribute("aria-hidden","true"),ys.setAttribute("name","hiddenTextarea"),document.body.appendChild(ys)),t.getAttribute("wrap")?ys.setAttribute("wrap",t.getAttribute("wrap")):ys.removeAttribute("wrap");var c=SDe(t,r),d=c.paddingSize,f=c.borderSize,v=c.boxSizing,g=c.sizingStyle;ys.setAttribute("style","".concat(g,";").concat(EDe)),ys.value=t.value||t.placeholder||"";var _=void 0,C=void 0,b,T=ys.scrollHeight;if(v==="border-box"?T+=f:v==="content-box"&&(T-=d),o!==null||s!==null){ys.value=" ";var A=ys.scrollHeight-d;o!==null&&(_=A*o,v==="border-box"&&(_=_+d+f),T=Math.max(_,T)),s!==null&&(C=A*s,v==="border-box"&&(C=C+d+f),b=T>C?"":"hidden",T=Math.min(C,T))}var I={height:T,overflowY:b,resize:"none"};return _&&(I.minHeight=_),C&&(I.maxHeight=C),I}var CDe=["prefixCls","defaultValue","value","autoSize","onResize","className","style","disabled","onChange","onInternalAutoSize"],rx=0,ix=1,ox=2,bDe=y.forwardRef(function(t,r){var o=t,s=o.prefixCls,c=o.defaultValue,d=o.value,f=o.autoSize,v=o.onResize,g=o.className,_=o.style,C=o.disabled,b=o.onChange;o.onInternalAutoSize;var T=xn(o,CDe),A=Sa(c,{value:d,postState:function(se){return se??""}}),I=Ue(A,2),N=I[0],P=I[1],D=function(se){P(se.target.value),b==null||b(se)},x=y.useRef();y.useImperativeHandle(r,function(){return{textArea:x.current}});var L=y.useMemo(function(){return f&&ln(f)==="object"?[f.minRows,f.maxRows]:[]},[f]),M=Ue(L,2),F=M[0],V=M[1],$=!!f,z=function(){try{if(document.activeElement===x.current){var se=x.current,Te=se.selectionStart,we=se.selectionEnd,Le=se.scrollTop;x.current.setSelectionRange(Te,we),x.current.scrollTop=Le}}catch{}},K=y.useState(ox),G=Ue(K,2),J=G[0],ne=G[1],te=y.useState(),ce=Ue(te,2),ge=ce[0],oe=ce[1],ae=function(){ne(rx)};Rr(function(){$&&ae()},[d,F,V,$]),Rr(function(){if(J===rx)ne(ix);else if(J===ix){var Ee=yDe(x.current,!1,F,V);ne(ox),oe(Ee)}else z()},[J]);var ie=y.useRef(),ve=function(){ii.cancel(ie.current)},me=function(se){J===ox&&(v==null||v(se),f&&(ve(),ie.current=ii(function(){ae()})))};y.useEffect(function(){return ve},[]);var le=$?ge:null,de=_e(_e({},_),le);return(J===rx||J===ix)&&(de.overflowY="hidden",de.overflowX="hidden"),y.createElement(Eu,{onResize:me,disabled:!(f||v)},y.createElement("textarea",nt({},T,{ref:x,style:de,className:Ke(s,g,be({},"".concat(s,"-disabled"),C)),disabled:C,value:N,onChange:D})))}),TDe=["defaultValue","value","onFocus","onBlur","onChange","allowClear","maxLength","onCompositionStart","onCompositionEnd","suffix","prefixCls","showCount","count","className","style","disabled","hidden","classNames","styles","onResize","onClear","onPressEnter","readOnly","autoSize","onKeyDown"],RDe=ze.forwardRef(function(t,r){var o,s=t.defaultValue,c=t.value,d=t.onFocus,f=t.onBlur,v=t.onChange,g=t.allowClear,_=t.maxLength,C=t.onCompositionStart,b=t.onCompositionEnd,T=t.suffix,A=t.prefixCls,I=A===void 0?"rc-textarea":A,N=t.showCount,P=t.count,D=t.className,x=t.style,L=t.disabled,M=t.hidden,F=t.classNames,V=t.styles,$=t.onResize,z=t.onClear,K=t.onPressEnter,G=t.readOnly,J=t.autoSize,ne=t.onKeyDown,te=xn(t,TDe),ce=Sa(s,{value:c,defaultValue:s}),ge=Ue(ce,2),oe=ge[0],ae=ge[1],ie=oe==null?"":String(oe),ve=ze.useState(!1),me=Ue(ve,2),le=me[0],de=me[1],Ee=ze.useRef(!1),se=ze.useState(null),Te=Ue(se,2),we=Te[0],Le=Te[1],Ie=y.useRef(null),De=y.useRef(null),Ye=function(){var _t;return(_t=De.current)===null||_t===void 0?void 0:_t.textArea},Me=function(){Ye().focus()};y.useImperativeHandle(r,function(){var Ft;return{resizableTextArea:De.current,focus:Me,blur:function(){Ye().blur()},nativeElement:((Ft=Ie.current)===null||Ft===void 0?void 0:Ft.nativeElement)||Ye()}}),y.useEffect(function(){de(function(Ft){return!L&&Ft})},[L]);var Oe=ze.useState(null),$e=Ue(Oe,2),tt=$e[0],je=$e[1];ze.useEffect(function(){if(tt){var Ft;(Ft=Ye()).setSelectionRange.apply(Ft,Et(tt))}},[tt]);var ke=DQ(P,N),dt=(o=ke.max)!==null&&o!==void 0?o:_,Ze=Number(dt)>0,ut=ke.strategy(ie),Tt=!!dt&&ut>dt,pt=function(_t,At){var mt=At;!Ee.current&&ke.exceedFormatter&&ke.max&&ke.strategy(At)>ke.max&&(mt=ke.exceedFormatter(At,{max:ke.max}),At!==mt&&je([Ye().selectionStart||0,Ye().selectionEnd||0])),ae(mt),db(_t.currentTarget,_t,v,mt)},ht=function(_t){Ee.current=!0,C==null||C(_t)},qe=function(_t){Ee.current=!1,pt(_t,_t.currentTarget.value),b==null||b(_t)},Je=function(_t){pt(_t,_t.target.value)},Ct=function(_t){_t.key==="Enter"&&K&&K(_t),ne==null||ne(_t)},Nt=function(_t){de(!0),d==null||d(_t)},Ot=function(_t){de(!1),f==null||f(_t)},on=function(_t){ae(""),Me(),db(Ye(),_t,v)},Vt=T,kt;ke.show&&(ke.showFormatter?kt=ke.showFormatter({value:ie,count:ut,maxLength:dt}):kt="".concat(ut).concat(Ze?" / ".concat(dt):""),Vt=ze.createElement(ze.Fragment,null,Vt,ze.createElement("span",{className:Ke("".concat(I,"-data-count"),F==null?void 0:F.count),style:V==null?void 0:V.count},kt)));var Kt=function(_t){var At;$==null||$(_t),(At=Ye())!==null&&At!==void 0&&At.style.height&&Le(!0)},Zt=!J&&!N&&!g;return ze.createElement(PQ,{ref:Ie,value:ie,allowClear:g,handleReset:on,suffix:Vt,prefixCls:I,classNames:_e(_e({},F),{},{affixWrapper:Ke(F==null?void 0:F.affixWrapper,be(be({},"".concat(I,"-show-count"),N),"".concat(I,"-textarea-allow-clear"),g))}),disabled:L,focused:le,className:Ke(D,Tt&&"".concat(I,"-out-of-range")),style:_e(_e({},x),we&&!Zt?{height:"auto"}:{}),dataAttrs:{affixWrapper:{"data-count":typeof kt=="string"?kt:void 0}},hidden:M,readOnly:G,onClear:z},ze.createElement(bDe,nt({},te,{autoSize:J,maxLength:_,onKeyDown:Ct,onChange:Je,onFocus:Nt,onBlur:Ot,onCompositionStart:ht,onCompositionEnd:qe,className:Ke(F==null?void 0:F.textarea),style:_e(_e({},V==null?void 0:V.textarea),{},{resize:x==null?void 0:x.resize}),disabled:L,prefixCls:I,onResize:Kt,ref:De,readOnly:G})))});const wDe=t=>{const{componentCls:r,paddingLG:o}=t,s=`${r}-textarea`;return{[s]:{position:"relative","&-show-count":{[`> ${r}`]:{height:"100%"},[`${r}-data-count`]:{position:"absolute",bottom:t.calc(t.fontSize).mul(t.lineHeight).mul(-1).equal(),insetInlineEnd:0,color:t.colorTextDescription,whiteSpace:"nowrap",pointerEvents:"none"}},[`
        &-allow-clear > ${r},
        &-affix-wrapper${s}-has-feedback ${r}
      `]:{paddingInlineEnd:o},[`&-affix-wrapper${r}-affix-wrapper`]:{padding:0,[`> textarea${r}`]:{fontSize:"inherit",border:"none",outline:"none",background:"transparent",minHeight:t.calc(t.controlHeight).sub(t.calc(t.lineWidth).mul(2)).equal(),"&:focus":{boxShadow:"none !important"}},[`${r}-suffix`]:{margin:0,"> *:not(:last-child)":{marginInline:0},[`${r}-clear-icon`]:{position:"absolute",insetInlineEnd:t.paddingInline,insetBlockStart:t.paddingXS},[`${s}-suffix`]:{position:"absolute",top:0,insetInlineEnd:t.paddingInline,bottom:0,zIndex:1,display:"inline-flex",alignItems:"center",margin:"auto",pointerEvents:"none"}}},[`&-affix-wrapper${r}-affix-wrapper-sm`]:{[`${r}-suffix`]:{[`${r}-clear-icon`]:{insetInlineEnd:t.paddingInlineSM}}}}}},IDe=Oo(["Input","TextArea"],t=>{const r=oi(t,aE(t));return[wDe(r)]},sE,{resetFont:!1});var ADe=globalThis&&globalThis.__rest||function(t,r){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&r.indexOf(s)<0&&(o[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(t);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(t,s[c])&&(o[s[c]]=t[s[c]]);return o};const ODe=y.forwardRef((t,r)=>{var o;const{prefixCls:s,bordered:c=!0,size:d,disabled:f,status:v,allowClear:g,classNames:_,rootClassName:C,className:b,style:T,styles:A,variant:I}=t,N=ADe(t,["prefixCls","bordered","size","disabled","status","allowClear","classNames","rootClassName","className","style","styles","variant"]),{getPrefixCls:P,direction:D,allowClear:x,autoComplete:L,className:M,style:F,classNames:V,styles:$}=Ec("textArea"),z=y.useContext(Zh),K=f??z,{status:G,hasFeedback:J,feedbackIcon:ne}=y.useContext(As),te=TT(G,v),ce=y.useRef(null);y.useImperativeHandle(r,()=>{var Le;return{resizableTextArea:(Le=ce.current)===null||Le===void 0?void 0:Le.resizableTextArea,focus:Ie=>{var De,Ye;NQ((Ye=(De=ce.current)===null||De===void 0?void 0:De.resizableTextArea)===null||Ye===void 0?void 0:Ye.textArea,Ie)},blur:()=>{var Ie;return(Ie=ce.current)===null||Ie===void 0?void 0:Ie.blur()}}});const ge=P("input",s),oe=_u(ge),[ae,ie,ve]=IQ(ge,C),[me]=IDe(ge,oe),{compactSize:le,compactItemClassnames:de}=eE(ge,D),Ee=Su(Le=>{var Ie;return(Ie=d??le)!==null&&Ie!==void 0?Ie:Le}),[se,Te]=Z2("textArea",I,c),we=LQ(g??x);return ae(me(y.createElement(RDe,Object.assign({autoComplete:L},N,{style:Object.assign(Object.assign({},F),T),styles:Object.assign(Object.assign({},$),A),disabled:K,allowClear:we,className:Ke(ve,oe,b,C,de,M),classNames:Object.assign(Object.assign(Object.assign({},_),V),{textarea:Ke({[`${ge}-sm`]:Ee==="small",[`${ge}-lg`]:Ee==="large"},ie,_==null?void 0:_.textarea,V.textarea),variant:Ke({[`${ge}-${se}`]:Te},sb(ge,te)),affixWrapper:Ke(`${ge}-textarea-affix-wrapper`,{[`${ge}-affix-wrapper-rtl`]:D==="rtl",[`${ge}-affix-wrapper-sm`]:Ee==="small",[`${ge}-affix-wrapper-lg`]:Ee==="large",[`${ge}-textarea-show-count`]:t.showCount||((o=t.count)===null||o===void 0?void 0:o.show)},ie)}),prefixCls:ge,suffix:J&&y.createElement("span",{className:`${ge}-textarea-suffix`},ne),ref:ce}))))}),WQ=ODe,Fm=xT;Fm.Group=qPe;Fm.Search=vDe;Fm.TextArea=WQ;Fm.Password=pDe;Fm.OTP=iDe;const xDe=Fm;function NDe(t,r,o){return typeof o=="boolean"?o:t.length?!0:Qc(r).some(c=>c.type===SQ)}var GQ=globalThis&&globalThis.__rest||function(t,r){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&r.indexOf(s)<0&&(o[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(t);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(t,s[c])&&(o[s[c]]=t[s[c]]);return o};function NT(t){let{suffixCls:r,tagName:o,displayName:s}=t;return c=>y.forwardRef((f,v)=>y.createElement(c,Object.assign({ref:v,suffixCls:r,tagName:o},f)))}const fL=y.forwardRef((t,r)=>{const{prefixCls:o,suffixCls:s,className:c,tagName:d}=t,f=GQ(t,["prefixCls","suffixCls","className","tagName"]),{getPrefixCls:v}=y.useContext(wr),g=v("layout",o),[_,C,b]=_Q(g),T=s?`${g}-${s}`:g;return _(y.createElement(d,Object.assign({className:Ke(o||T,c,C,b),ref:r},f)))}),PDe=y.forwardRef((t,r)=>{const{direction:o}=y.useContext(wr),[s,c]=y.useState([]),{prefixCls:d,className:f,rootClassName:v,children:g,hasSider:_,tagName:C,style:b}=t,T=GQ(t,["prefixCls","className","rootClassName","children","hasSider","tagName","style"]),A=ia(T,["suffixCls"]),{getPrefixCls:I,className:N,style:P}=Ec("layout"),D=I("layout",d),x=NDe(s,g,_),[L,M,F]=_Q(D),V=Ke(D,{[`${D}-has-sider`]:x,[`${D}-rtl`]:o==="rtl"},N,f,v,M,F),$=y.useMemo(()=>({siderHook:{addSider:z=>{c(K=>[].concat(Et(K),[z]))},removeSider:z=>{c(K=>K.filter(G=>G!==z))}}}),[]);return L(y.createElement(gQ.Provider,{value:$},y.createElement(C,Object.assign({ref:r,className:V,style:Object.assign(Object.assign({},P),b)},A),g)))}),DDe=NT({tagName:"div",displayName:"Layout"})(PDe),LDe=NT({suffixCls:"header",tagName:"header",displayName:"Header"})(fL),kDe=NT({suffixCls:"footer",tagName:"footer",displayName:"Footer"})(fL),MDe=NT({suffixCls:"content",tagName:"main",displayName:"Content"})(fL),FDe=DDe,Um=FDe;Um.Header=LDe;Um.Footer=kDe;Um.Content=MDe;Um.Sider=SQ;Um._InternalSiderContext=AT;const dD=Um,UDe=function(){const t=Object.assign({},arguments.length<=0?void 0:arguments[0]);for(let r=1;r<arguments.length;r++){const o=r<0||arguments.length<=r?void 0:arguments[r];o&&Object.keys(o).forEach(s=>{const c=o[s];c!==void 0&&(t[s]=c)})}return t},BDe=UDe;var VDe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M272.9 512l265.4-339.1c4.1-5.2.4-12.9-6.3-12.9h-77.3c-4.9 0-9.6 2.3-12.6 6.1L186.8 492.3a31.99 31.99 0 000 39.5l255.3 326.1c3 3.9 7.7 6.1 12.6 6.1H532c6.7 0 10.4-7.7 6.3-12.9L272.9 512zm304 0l265.4-339.1c4.1-5.2.4-12.9-6.3-12.9h-77.3c-4.9 0-9.6 2.3-12.6 6.1L490.8 492.3a31.99 31.99 0 000 39.5l255.3 326.1c3 3.9 7.7 6.1 12.6 6.1H836c6.7 0 10.4-7.7 6.3-12.9L576.9 512z"}}]},name:"double-left",theme:"outlined"};const jDe=VDe;var $De=function(r,o){return y.createElement(ao,nt({},r,{ref:o,icon:jDe}))},HDe=y.forwardRef($De);const hW=HDe;var zDe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M533.2 492.3L277.9 166.1c-3-3.9-7.7-6.1-12.6-6.1H188c-6.7 0-10.4 7.7-6.3 12.9L447.1 512 181.7 851.1A7.98 7.98 0 00188 864h77.3c4.9 0 9.6-2.3 12.6-6.1l255.3-326.1c9.1-11.7 9.1-27.9 0-39.5zm304 0L581.9 166.1c-3-3.9-7.7-6.1-12.6-6.1H492c-6.7 0-10.4 7.7-6.3 12.9L751.1 512 485.7 851.1A7.98 7.98 0 00492 864h77.3c4.9 0 9.6-2.3 12.6-6.1l255.3-326.1c9.1-11.7 9.1-27.9 0-39.5z"}}]},name:"double-right",theme:"outlined"};const WDe=zDe;var GDe=function(r,o){return y.createElement(ao,nt({},r,{ref:o,icon:WDe}))},KDe=y.forwardRef(GDe);const fW=KDe;var YDe={items_per_page:"条/页",jump_to:"跳至",jump_to_confirm:"确定",page:"页",prev_page:"上一页",next_page:"下一页",prev_5:"向前 5 页",next_5:"向后 5 页",prev_3:"向前 3 页",next_3:"向后 3 页",page_size:"页码"},qDe=[10,20,50,100],XDe=function(r){var o=r.pageSizeOptions,s=o===void 0?qDe:o,c=r.locale,d=r.changeSize,f=r.pageSize,v=r.goButton,g=r.quickGo,_=r.rootPrefixCls,C=r.disabled,b=r.buildOptionText,T=r.showSizeChanger,A=r.sizeChangerRender,I=ze.useState(""),N=Ue(I,2),P=N[0],D=N[1],x=function(){return!P||Number.isNaN(P)?void 0:Number(P)},L=typeof b=="function"?b:function(ne){return"".concat(ne," ").concat(c.items_per_page)},M=function(te){D(te.target.value)},F=function(te){v||P===""||(D(""),!(te.relatedTarget&&(te.relatedTarget.className.indexOf("".concat(_,"-item-link"))>=0||te.relatedTarget.className.indexOf("".concat(_,"-item"))>=0))&&(g==null||g(x())))},V=function(te){P!==""&&(te.keyCode===lt.ENTER||te.type==="click")&&(D(""),g==null||g(x()))},$=function(){return s.some(function(te){return te.toString()===f.toString()})?s:s.concat([f]).sort(function(te,ce){var ge=Number.isNaN(Number(te))?0:Number(te),oe=Number.isNaN(Number(ce))?0:Number(ce);return ge-oe})},z="".concat(_,"-options");if(!T&&!g)return null;var K=null,G=null,J=null;return T&&A&&(K=A({disabled:C,size:f,onSizeChange:function(te){d==null||d(Number(te))},"aria-label":c.page_size,className:"".concat(z,"-size-changer"),options:$().map(function(ne){return{label:L(ne),value:ne}})})),g&&(v&&(J=typeof v=="boolean"?ze.createElement("button",{type:"button",onClick:V,onKeyUp:V,disabled:C,className:"".concat(z,"-quick-jumper-button")},c.jump_to_confirm):ze.createElement("span",{onClick:V,onKeyUp:V},v)),G=ze.createElement("div",{className:"".concat(z,"-quick-jumper")},c.jump_to,ze.createElement("input",{disabled:C,type:"text",value:P,onChange:M,onKeyUp:V,onBlur:F,"aria-label":c.page}),c.page,J)),ze.createElement("li",{className:z},K,G)},Ng=function(r){var o=r.rootPrefixCls,s=r.page,c=r.active,d=r.className,f=r.showTitle,v=r.onClick,g=r.onKeyPress,_=r.itemRender,C="".concat(o,"-item"),b=Ke(C,"".concat(C,"-").concat(s),be(be({},"".concat(C,"-active"),c),"".concat(C,"-disabled"),!s),d),T=function(){v(s)},A=function(P){g(P,v,s)},I=_(s,"page",ze.createElement("a",{rel:"nofollow"},s));return I?ze.createElement("li",{title:f?String(s):null,className:b,onClick:T,onKeyDown:A,tabIndex:0},I):null},JDe=function(r,o,s){return s};function pW(){}function mW(t){var r=Number(t);return typeof r=="number"&&!Number.isNaN(r)&&isFinite(r)&&Math.floor(r)===r}function bh(t,r,o){var s=typeof t>"u"?r:t;return Math.floor((o-1)/s)+1}var QDe=function(r){var o=r.prefixCls,s=o===void 0?"rc-pagination":o,c=r.selectPrefixCls,d=c===void 0?"rc-select":c,f=r.className,v=r.current,g=r.defaultCurrent,_=g===void 0?1:g,C=r.total,b=C===void 0?0:C,T=r.pageSize,A=r.defaultPageSize,I=A===void 0?10:A,N=r.onChange,P=N===void 0?pW:N,D=r.hideOnSinglePage,x=r.align,L=r.showPrevNextJumpers,M=L===void 0?!0:L,F=r.showQuickJumper,V=r.showLessItems,$=r.showTitle,z=$===void 0?!0:$,K=r.onShowSizeChange,G=K===void 0?pW:K,J=r.locale,ne=J===void 0?YDe:J,te=r.style,ce=r.totalBoundaryShowSizeChanger,ge=ce===void 0?50:ce,oe=r.disabled,ae=r.simple,ie=r.showTotal,ve=r.showSizeChanger,me=ve===void 0?b>ge:ve,le=r.sizeChangerRender,de=r.pageSizeOptions,Ee=r.itemRender,se=Ee===void 0?JDe:Ee,Te=r.jumpPrevIcon,we=r.jumpNextIcon,Le=r.prevIcon,Ie=r.nextIcon,De=ze.useRef(null),Ye=Sa(10,{value:T,defaultValue:I}),Me=Ue(Ye,2),Oe=Me[0],$e=Me[1],tt=Sa(1,{value:v,defaultValue:_,postState:function(Pn){return Math.max(1,Math.min(Pn,bh(void 0,Oe,b)))}}),je=Ue(tt,2),ke=je[0],dt=je[1],Ze=ze.useState(ke),ut=Ue(Ze,2),Tt=ut[0],pt=ut[1];y.useEffect(function(){pt(ke)},[ke]);var ht=Math.max(1,ke-(V?3:5)),qe=Math.min(bh(void 0,Oe,b),ke+(V?3:5));function Je(an,Pn){var Hn=an||ze.createElement("button",{type:"button","aria-label":Pn,className:"".concat(s,"-item-link")});return typeof an=="function"&&(Hn=ze.createElement(an,_e({},r))),Hn}function Ct(an){var Pn=an.target.value,Hn=bh(void 0,Oe,b),yi;return Pn===""?yi=Pn:Number.isNaN(Number(Pn))?yi=Tt:Pn>=Hn?yi=Hn:yi=Number(Pn),yi}function Nt(an){return mW(an)&&an!==ke&&mW(b)&&b>0}var Ot=b>Oe?F:!1;function on(an){(an.keyCode===lt.UP||an.keyCode===lt.DOWN)&&an.preventDefault()}function Vt(an){var Pn=Ct(an);switch(Pn!==Tt&&pt(Pn),an.keyCode){case lt.ENTER:Zt(Pn);break;case lt.UP:Zt(Pn-1);break;case lt.DOWN:Zt(Pn+1);break}}function kt(an){Zt(Ct(an))}function Kt(an){var Pn=bh(an,Oe,b),Hn=ke>Pn&&Pn!==0?Pn:ke;$e(an),pt(Hn),G==null||G(ke,an),dt(Hn),P==null||P(Hn,an)}function Zt(an){if(Nt(an)&&!oe){var Pn=bh(void 0,Oe,b),Hn=an;return an>Pn?Hn=Pn:an<1&&(Hn=1),Hn!==Tt&&pt(Hn),dt(Hn),P==null||P(Hn,Oe),Hn}return ke}var Ft=ke>1,_t=ke<bh(void 0,Oe,b);function At(){Ft&&Zt(ke-1)}function mt(){_t&&Zt(ke+1)}function Pt(){Zt(ht)}function gn(){Zt(qe)}function Mn(an,Pn){if(an.key==="Enter"||an.charCode===lt.ENTER||an.keyCode===lt.ENTER){for(var Hn=arguments.length,yi=new Array(Hn>2?Hn-2:0),Ho=2;Ho<Hn;Ho++)yi[Ho-2]=arguments[Ho];Pn.apply(void 0,yi)}}function pi(an){Mn(an,At)}function Zr(an){Mn(an,mt)}function Si(an){Mn(an,Pt)}function Dr(an){Mn(an,gn)}function Gn(an){var Pn=se(an,"prev",Je(Le,"prev page"));return ze.isValidElement(Pn)?ze.cloneElement(Pn,{disabled:!Ft}):Pn}function Ir(an){var Pn=se(an,"next",Je(Ie,"next page"));return ze.isValidElement(Pn)?ze.cloneElement(Pn,{disabled:!_t}):Pn}function vn(an){(an.type==="click"||an.keyCode===lt.ENTER)&&Zt(Tt)}var Qt=null,Dt=Wh(r,{aria:!0,data:!0}),bt=ie&&ze.createElement("li",{className:"".concat(s,"-total-text")},ie(b,[b===0?0:(ke-1)*Oe+1,ke*Oe>b?b:ke*Oe])),un=null,Sn=bh(void 0,Oe,b);if(D&&b<=Oe)return null;var ft=[],gt={rootPrefixCls:s,onClick:Zt,onKeyPress:Mn,showTitle:z,itemRender:se,page:-1},Wt=ke-1>0?ke-1:0,Yt=ke+1<Sn?ke+1:Sn,jt=F&&F.goButton,dn=ln(ae)==="object"?ae.readOnly:!ae,ar=jt,Xn=null;ae&&(jt&&(typeof jt=="boolean"?ar=ze.createElement("button",{type:"button",onClick:vn,onKeyUp:vn},ne.jump_to_confirm):ar=ze.createElement("span",{onClick:vn,onKeyUp:vn},jt),ar=ze.createElement("li",{title:z?"".concat(ne.jump_to).concat(ke,"/").concat(Sn):null,className:"".concat(s,"-simple-pager")},ar)),Xn=ze.createElement("li",{title:z?"".concat(ke,"/").concat(Sn):null,className:"".concat(s,"-simple-pager")},dn?Tt:ze.createElement("input",{type:"text","aria-label":ne.jump_to,value:Tt,disabled:oe,onKeyDown:on,onKeyUp:Vt,onChange:Vt,onBlur:kt,size:3}),ze.createElement("span",{className:"".concat(s,"-slash")},"/"),Sn));var $n=V?1:2;if(Sn<=3+$n*2){Sn||ft.push(ze.createElement(Ng,nt({},gt,{key:"noPager",page:1,className:"".concat(s,"-item-disabled")})));for(var nr=1;nr<=Sn;nr+=1)ft.push(ze.createElement(Ng,nt({},gt,{key:nr,page:nr,active:ke===nr})))}else{var Wr=V?ne.prev_3:ne.prev_5,ai=V?ne.next_3:ne.next_5,si=se(ht,"jump-prev",Je(Te,"prev page")),Vi=se(qe,"jump-next",Je(we,"next page"));M&&(Qt=si?ze.createElement("li",{title:z?Wr:null,key:"prev",onClick:Pt,tabIndex:0,onKeyDown:Si,className:Ke("".concat(s,"-jump-prev"),be({},"".concat(s,"-jump-prev-custom-icon"),!!Te))},si):null,un=Vi?ze.createElement("li",{title:z?ai:null,key:"next",onClick:gn,tabIndex:0,onKeyDown:Dr,className:Ke("".concat(s,"-jump-next"),be({},"".concat(s,"-jump-next-custom-icon"),!!we))},Vi):null);var Fr=Math.max(1,ke-$n),Lr=Math.min(ke+$n,Sn);ke-1<=$n&&(Lr=1+$n*2),Sn-ke<=$n&&(Fr=Sn-$n*2);for(var St=Fr;St<=Lr;St+=1)ft.push(ze.createElement(Ng,nt({},gt,{key:St,page:St,active:ke===St})));if(ke-1>=$n*2&&ke!==1+2&&(ft[0]=ze.cloneElement(ft[0],{className:Ke("".concat(s,"-item-after-jump-prev"),ft[0].props.className)}),ft.unshift(Qt)),Sn-ke>=$n*2&&ke!==Sn-2){var Gt=ft[ft.length-1];ft[ft.length-1]=ze.cloneElement(Gt,{className:Ke("".concat(s,"-item-before-jump-next"),Gt.props.className)}),ft.push(un)}Fr!==1&&ft.unshift(ze.createElement(Ng,nt({},gt,{key:1,page:1}))),Lr!==Sn&&ft.push(ze.createElement(Ng,nt({},gt,{key:Sn,page:Sn})))}var cn=Gn(Wt);if(cn){var Ln=!Ft||!Sn;cn=ze.createElement("li",{title:z?ne.prev_page:null,onClick:At,tabIndex:Ln?null:0,onKeyDown:pi,className:Ke("".concat(s,"-prev"),be({},"".concat(s,"-disabled"),Ln)),"aria-disabled":Ln},cn)}var ur=Ir(Yt);if(ur){var Jn,ji;ae?(Jn=!_t,ji=Ft?0:null):(Jn=!_t||!Sn,ji=Jn?null:0),ur=ze.createElement("li",{title:z?ne.next_page:null,onClick:mt,tabIndex:ji,onKeyDown:Zr,className:Ke("".concat(s,"-next"),be({},"".concat(s,"-disabled"),Jn)),"aria-disabled":Jn},ur)}var ka=Ke(s,f,be(be(be(be(be({},"".concat(s,"-start"),x==="start"),"".concat(s,"-center"),x==="center"),"".concat(s,"-end"),x==="end"),"".concat(s,"-simple"),ae),"".concat(s,"-disabled"),oe));return ze.createElement("ul",nt({className:ka,style:te,ref:De},Dt),bt,cn,ae?Xn:ft,ur,ze.createElement(XDe,{locale:ne,rootPrefixCls:s,disabled:oe,selectPrefixCls:d,changeSize:Kt,pageSize:Oe,pageSizeOptions:de,quickGo:Ot?Zt:null,goButton:ar,showSizeChanger:me,sizeChangerRender:le}))};const ZDe=t=>{const{componentCls:r}=t;return{[`${r}-disabled`]:{"&, &:hover":{cursor:"not-allowed",[`${r}-item-link`]:{color:t.colorTextDisabled,cursor:"not-allowed"}},"&:focus-visible":{cursor:"not-allowed",[`${r}-item-link`]:{color:t.colorTextDisabled,cursor:"not-allowed"}}},[`&${r}-disabled`]:{cursor:"not-allowed",[`${r}-item`]:{cursor:"not-allowed","&:hover, &:active":{backgroundColor:"transparent"},a:{color:t.colorTextDisabled,backgroundColor:"transparent",border:"none",cursor:"not-allowed"},"&-active":{borderColor:t.colorBorder,backgroundColor:t.itemActiveBgDisabled,"&:hover, &:active":{backgroundColor:t.itemActiveBgDisabled},a:{color:t.itemActiveColorDisabled}}},[`${r}-item-link`]:{color:t.colorTextDisabled,cursor:"not-allowed","&:hover, &:active":{backgroundColor:"transparent"},[`${r}-simple&`]:{backgroundColor:"transparent","&:hover, &:active":{backgroundColor:"transparent"}}},[`${r}-simple-pager`]:{color:t.colorTextDisabled},[`${r}-jump-prev, ${r}-jump-next`]:{[`${r}-item-link-icon`]:{opacity:0},[`${r}-item-ellipsis`]:{opacity:1}}},[`&${r}-simple`]:{[`${r}-prev, ${r}-next`]:{[`&${r}-disabled ${r}-item-link`]:{"&:hover, &:active":{backgroundColor:"transparent"}}}}}},e2e=t=>{const{componentCls:r}=t;return{[`&${r}-mini ${r}-total-text, &${r}-mini ${r}-simple-pager`]:{height:t.itemSizeSM,lineHeight:Xe(t.itemSizeSM)},[`&${r}-mini ${r}-item`]:{minWidth:t.itemSizeSM,height:t.itemSizeSM,margin:0,lineHeight:Xe(t.calc(t.itemSizeSM).sub(2).equal())},[`&${r}-mini:not(${r}-disabled) ${r}-item:not(${r}-item-active)`]:{backgroundColor:"transparent",borderColor:"transparent","&:hover":{backgroundColor:t.colorBgTextHover},"&:active":{backgroundColor:t.colorBgTextActive}},[`&${r}-mini ${r}-prev, &${r}-mini ${r}-next`]:{minWidth:t.itemSizeSM,height:t.itemSizeSM,margin:0,lineHeight:Xe(t.itemSizeSM)},[`&${r}-mini:not(${r}-disabled)`]:{[`${r}-prev, ${r}-next`]:{[`&:hover ${r}-item-link`]:{backgroundColor:t.colorBgTextHover},[`&:active ${r}-item-link`]:{backgroundColor:t.colorBgTextActive},[`&${r}-disabled:hover ${r}-item-link`]:{backgroundColor:"transparent"}}},[`
    &${r}-mini ${r}-prev ${r}-item-link,
    &${r}-mini ${r}-next ${r}-item-link
    `]:{backgroundColor:"transparent",borderColor:"transparent","&::after":{height:t.itemSizeSM,lineHeight:Xe(t.itemSizeSM)}},[`&${r}-mini ${r}-jump-prev, &${r}-mini ${r}-jump-next`]:{height:t.itemSizeSM,marginInlineEnd:0,lineHeight:Xe(t.itemSizeSM)},[`&${r}-mini ${r}-options`]:{marginInlineStart:t.paginationMiniOptionsMarginInlineStart,"&-size-changer":{top:t.miniOptionsSizeChangerTop},"&-quick-jumper":{height:t.itemSizeSM,lineHeight:Xe(t.itemSizeSM),input:Object.assign(Object.assign({},lL(t)),{width:t.paginationMiniQuickJumperInputWidth,height:t.controlHeightSM})}}}},t2e=t=>{const{componentCls:r}=t;return{[`
    &${r}-simple ${r}-prev,
    &${r}-simple ${r}-next
    `]:{height:t.itemSizeSM,lineHeight:Xe(t.itemSizeSM),verticalAlign:"top",[`${r}-item-link`]:{height:t.itemSizeSM,backgroundColor:"transparent",border:0,"&:hover":{backgroundColor:t.colorBgTextHover},"&:active":{backgroundColor:t.colorBgTextActive},"&::after":{height:t.itemSizeSM,lineHeight:Xe(t.itemSizeSM)}}},[`&${r}-simple ${r}-simple-pager`]:{display:"inline-block",height:t.itemSizeSM,marginInlineEnd:t.marginXS,input:{boxSizing:"border-box",height:"100%",padding:`0 ${Xe(t.paginationItemPaddingInline)}`,textAlign:"center",backgroundColor:t.itemInputBg,border:`${Xe(t.lineWidth)} ${t.lineType} ${t.colorBorder}`,borderRadius:t.borderRadius,outline:"none",transition:`border-color ${t.motionDurationMid}`,color:"inherit","&:hover":{borderColor:t.colorPrimary},"&:focus":{borderColor:t.colorPrimaryHover,boxShadow:`${Xe(t.inputOutlineOffset)} 0 ${Xe(t.controlOutlineWidth)} ${t.controlOutline}`},"&[disabled]":{color:t.colorTextDisabled,backgroundColor:t.colorBgContainerDisabled,borderColor:t.colorBorder,cursor:"not-allowed"}}}}},n2e=t=>{const{componentCls:r}=t;return{[`${r}-jump-prev, ${r}-jump-next`]:{outline:0,[`${r}-item-container`]:{position:"relative",[`${r}-item-link-icon`]:{color:t.colorPrimary,fontSize:t.fontSizeSM,opacity:0,transition:`all ${t.motionDurationMid}`,"&-svg":{top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,margin:"auto"}},[`${r}-item-ellipsis`]:{position:"absolute",top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,display:"block",margin:"auto",color:t.colorTextDisabled,letterSpacing:t.paginationEllipsisLetterSpacing,textAlign:"center",textIndent:t.paginationEllipsisTextIndent,opacity:1,transition:`all ${t.motionDurationMid}`}},"&:hover":{[`${r}-item-link-icon`]:{opacity:1},[`${r}-item-ellipsis`]:{opacity:0}}},[`
    ${r}-prev,
    ${r}-jump-prev,
    ${r}-jump-next
    `]:{marginInlineEnd:t.marginXS},[`
    ${r}-prev,
    ${r}-next,
    ${r}-jump-prev,
    ${r}-jump-next
    `]:{display:"inline-block",minWidth:t.itemSize,height:t.itemSize,color:t.colorText,fontFamily:t.fontFamily,lineHeight:Xe(t.itemSize),textAlign:"center",verticalAlign:"middle",listStyle:"none",borderRadius:t.borderRadius,cursor:"pointer",transition:`all ${t.motionDurationMid}`},[`${r}-prev, ${r}-next`]:{outline:0,button:{color:t.colorText,cursor:"pointer",userSelect:"none"},[`${r}-item-link`]:{display:"block",width:"100%",height:"100%",padding:0,fontSize:t.fontSizeSM,textAlign:"center",backgroundColor:"transparent",border:`${Xe(t.lineWidth)} ${t.lineType} transparent`,borderRadius:t.borderRadius,outline:"none",transition:`all ${t.motionDurationMid}`},[`&:hover ${r}-item-link`]:{backgroundColor:t.colorBgTextHover},[`&:active ${r}-item-link`]:{backgroundColor:t.colorBgTextActive},[`&${r}-disabled:hover`]:{[`${r}-item-link`]:{backgroundColor:"transparent"}}},[`${r}-slash`]:{marginInlineEnd:t.paginationSlashMarginInlineEnd,marginInlineStart:t.paginationSlashMarginInlineStart},[`${r}-options`]:{display:"inline-block",marginInlineStart:t.margin,verticalAlign:"middle","&-size-changer":{display:"inline-block",width:"auto"},"&-quick-jumper":{display:"inline-block",height:t.controlHeight,marginInlineStart:t.marginXS,lineHeight:Xe(t.controlHeight),verticalAlign:"top",input:Object.assign(Object.assign(Object.assign({},uL(t)),cL(t,{borderColor:t.colorBorder,hoverBorderColor:t.colorPrimaryHover,activeBorderColor:t.colorPrimary,activeShadow:t.activeShadow})),{"&[disabled]":Object.assign({},OT(t)),width:t.calc(t.controlHeightLG).mul(1.25).equal(),height:t.controlHeight,boxSizing:"border-box",margin:0,marginInlineStart:t.marginXS,marginInlineEnd:t.marginXS})}}}},r2e=t=>{const{componentCls:r}=t;return{[`${r}-item`]:{display:"inline-block",minWidth:t.itemSize,height:t.itemSize,marginInlineEnd:t.marginXS,fontFamily:t.fontFamily,lineHeight:Xe(t.calc(t.itemSize).sub(2).equal()),textAlign:"center",verticalAlign:"middle",listStyle:"none",backgroundColor:t.itemBg,border:`${Xe(t.lineWidth)} ${t.lineType} transparent`,borderRadius:t.borderRadius,outline:0,cursor:"pointer",userSelect:"none",a:{display:"block",padding:`0 ${Xe(t.paginationItemPaddingInline)}`,color:t.colorText,"&:hover":{textDecoration:"none"}},[`&:not(${r}-item-active)`]:{"&:hover":{transition:`all ${t.motionDurationMid}`,backgroundColor:t.colorBgTextHover},"&:active":{backgroundColor:t.colorBgTextActive}},"&-active":{fontWeight:t.fontWeightStrong,backgroundColor:t.itemActiveBg,borderColor:t.colorPrimary,a:{color:t.colorPrimary},"&:hover":{borderColor:t.colorPrimaryHover},"&:hover a":{color:t.colorPrimaryHover}}}}},i2e=t=>{const{componentCls:r}=t;return{[r]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Ps(t)),{display:"flex","&-start":{justifyContent:"start"},"&-center":{justifyContent:"center"},"&-end":{justifyContent:"end"},"ul, ol":{margin:0,padding:0,listStyle:"none"},"&::after":{display:"block",clear:"both",height:0,overflow:"hidden",visibility:"hidden",content:'""'},[`${r}-total-text`]:{display:"inline-block",height:t.itemSize,marginInlineEnd:t.marginXS,lineHeight:Xe(t.calc(t.itemSize).sub(2).equal()),verticalAlign:"middle"}}),r2e(t)),n2e(t)),t2e(t)),e2e(t)),ZDe(t)),{[`@media only screen and (max-width: ${t.screenLG}px)`]:{[`${r}-item`]:{"&-after-jump-prev, &-before-jump-next":{display:"none"}}},[`@media only screen and (max-width: ${t.screenSM}px)`]:{[`${r}-options`]:{display:"none"}}}),[`&${t.componentCls}-rtl`]:{direction:"rtl"}}},o2e=t=>{const{componentCls:r}=t;return{[`${r}:not(${r}-disabled)`]:{[`${r}-item`]:Object.assign({},lT(t)),[`${r}-jump-prev, ${r}-jump-next`]:{"&:focus-visible":Object.assign({[`${r}-item-link-icon`]:{opacity:1},[`${r}-item-ellipsis`]:{opacity:0}},eb(t))},[`${r}-prev, ${r}-next`]:{[`&:focus-visible ${r}-item-link`]:Object.assign({},eb(t))}}}},KQ=t=>Object.assign({itemBg:t.colorBgContainer,itemSize:t.controlHeight,itemSizeSM:t.controlHeightSM,itemActiveBg:t.colorBgContainer,itemLinkBg:t.colorBgContainer,itemActiveColorDisabled:t.colorTextDisabled,itemActiveBgDisabled:t.controlItemBgActiveDisabled,itemInputBg:t.colorBgContainer,miniOptionsSizeChangerTop:0},sE(t)),YQ=t=>oi(t,{inputOutlineOffset:0,paginationMiniOptionsMarginInlineStart:t.calc(t.marginXXS).div(2).equal(),paginationMiniQuickJumperInputWidth:t.calc(t.controlHeightLG).mul(1.1).equal(),paginationItemPaddingInline:t.calc(t.marginXXS).mul(1.5).equal(),paginationEllipsisLetterSpacing:t.calc(t.marginXXS).div(2).equal(),paginationSlashMarginInlineStart:t.marginSM,paginationSlashMarginInlineEnd:t.marginSM,paginationEllipsisTextIndent:"0.13em"},aE(t)),a2e=Oo("Pagination",t=>{const r=YQ(t);return[i2e(r),o2e(r)]},KQ),s2e=t=>{const{componentCls:r}=t;return{[`${r}${r}-bordered${r}-disabled:not(${r}-mini)`]:{"&, &:hover":{[`${r}-item-link`]:{borderColor:t.colorBorder}},"&:focus-visible":{[`${r}-item-link`]:{borderColor:t.colorBorder}},[`${r}-item, ${r}-item-link`]:{backgroundColor:t.colorBgContainerDisabled,borderColor:t.colorBorder,[`&:hover:not(${r}-item-active)`]:{backgroundColor:t.colorBgContainerDisabled,borderColor:t.colorBorder,a:{color:t.colorTextDisabled}},[`&${r}-item-active`]:{backgroundColor:t.itemActiveBgDisabled}},[`${r}-prev, ${r}-next`]:{"&:hover button":{backgroundColor:t.colorBgContainerDisabled,borderColor:t.colorBorder,color:t.colorTextDisabled},[`${r}-item-link`]:{backgroundColor:t.colorBgContainerDisabled,borderColor:t.colorBorder}}},[`${r}${r}-bordered:not(${r}-mini)`]:{[`${r}-prev, ${r}-next`]:{"&:hover button":{borderColor:t.colorPrimaryHover,backgroundColor:t.itemBg},[`${r}-item-link`]:{backgroundColor:t.itemLinkBg,borderColor:t.colorBorder},[`&:hover ${r}-item-link`]:{borderColor:t.colorPrimary,backgroundColor:t.itemBg,color:t.colorPrimary},[`&${r}-disabled`]:{[`${r}-item-link`]:{borderColor:t.colorBorder,color:t.colorTextDisabled}}},[`${r}-item`]:{backgroundColor:t.itemBg,border:`${Xe(t.lineWidth)} ${t.lineType} ${t.colorBorder}`,[`&:hover:not(${r}-item-active)`]:{borderColor:t.colorPrimary,backgroundColor:t.itemBg,a:{color:t.colorPrimary}},"&-active":{borderColor:t.colorPrimary}}}}},c2e=uT(["Pagination","bordered"],t=>{const r=YQ(t);return[s2e(r)]},KQ);function gW(t){return y.useMemo(()=>typeof t=="boolean"?[t,{}]:t&&typeof t=="object"?[!0,t]:[void 0,void 0],[t])}var l2e=globalThis&&globalThis.__rest||function(t,r){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&r.indexOf(s)<0&&(o[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(t);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(t,s[c])&&(o[s[c]]=t[s[c]]);return o};const u2e=t=>{const{align:r,prefixCls:o,selectPrefixCls:s,className:c,rootClassName:d,style:f,size:v,locale:g,responsive:_,showSizeChanger:C,selectComponentClass:b,pageSizeOptions:T}=t,A=l2e(t,["align","prefixCls","selectPrefixCls","className","rootClassName","style","size","locale","responsive","showSizeChanger","selectComponentClass","pageSizeOptions"]),{xs:I}=eL(_),[,N]=os(),{getPrefixCls:P,direction:D,showSizeChanger:x,className:L,style:M}=Ec("pagination"),F=P("pagination",o),[V,$,z]=a2e(F),K=Su(v),G=K==="small"||!!(I&&!K&&_),[J]=Dm("Pagination",cX),ne=Object.assign(Object.assign({},J),g),[te,ce]=gW(C),[ge,oe]=gW(x),ae=te??ge,ie=ce??oe,ve=b||bOe,me=y.useMemo(()=>T?T.map(we=>Number(we)):void 0,[T]),le=we=>{var Le;const{disabled:Ie,size:De,onSizeChange:Ye,"aria-label":Me,className:Oe,options:$e}=we,{className:tt,onChange:je}=ie||{},ke=(Le=$e.find(dt=>String(dt.value)===String(De)))===null||Le===void 0?void 0:Le.value;return y.createElement(ve,Object.assign({disabled:Ie,showSearch:!0,popupMatchSelectWidth:!1,getPopupContainer:dt=>dt.parentNode,"aria-label":Me,options:$e},ie,{value:ke,onChange:(dt,Ze)=>{Ye==null||Ye(dt),je==null||je(dt,Ze)},size:G?"small":"middle",className:Ke(Oe,tt)}))},de=y.useMemo(()=>{const we=y.createElement("span",{className:`${F}-item-ellipsis`},"•••"),Le=y.createElement("button",{className:`${F}-item-link`,type:"button",tabIndex:-1},D==="rtl"?y.createElement(ib,null):y.createElement(cb,null)),Ie=y.createElement("button",{className:`${F}-item-link`,type:"button",tabIndex:-1},D==="rtl"?y.createElement(cb,null):y.createElement(ib,null)),De=y.createElement("a",{className:`${F}-item-link`},y.createElement("div",{className:`${F}-item-container`},D==="rtl"?y.createElement(fW,{className:`${F}-item-link-icon`}):y.createElement(hW,{className:`${F}-item-link-icon`}),we)),Ye=y.createElement("a",{className:`${F}-item-link`},y.createElement("div",{className:`${F}-item-container`},D==="rtl"?y.createElement(hW,{className:`${F}-item-link-icon`}):y.createElement(fW,{className:`${F}-item-link-icon`}),we));return{prevIcon:Le,nextIcon:Ie,jumpPrevIcon:De,jumpNextIcon:Ye}},[D,F]),Ee=P("select",s),se=Ke({[`${F}-${r}`]:!!r,[`${F}-mini`]:G,[`${F}-rtl`]:D==="rtl",[`${F}-bordered`]:N.wireframe},L,c,d,$,z),Te=Object.assign(Object.assign({},M),f);return V(y.createElement(y.Fragment,null,N.wireframe&&y.createElement(c2e,{prefixCls:F}),y.createElement(QDe,Object.assign({},de,A,{style:Te,prefixCls:F,selectPrefixCls:Ee,className:se,locale:ne,pageSizeOptions:me,showSizeChanger:ae,sizeChangerRender:le}))))},d2e=u2e,fb=100,qQ=fb/5,XQ=fb/2-qQ/2,ax=XQ*2*Math.PI,vW=50,EW=t=>{const{dotClassName:r,style:o,hasCircleCls:s}=t;return y.createElement("circle",{className:Ke(`${r}-circle`,{[`${r}-circle-bg`]:s}),r:XQ,cx:vW,cy:vW,strokeWidth:qQ,style:o})},h2e=t=>{let{percent:r,prefixCls:o}=t;const s=`${o}-dot`,c=`${s}-holder`,d=`${c}-hidden`,[f,v]=y.useState(!1);Rr(()=>{r!==0&&v(!0)},[r!==0]);const g=Math.max(Math.min(r,100),0);if(!f)return null;const _={strokeDashoffset:`${ax/4}`,strokeDasharray:`${ax*g/100} ${ax*(100-g)/100}`};return y.createElement("span",{className:Ke(c,`${s}-progress`,g<=0&&d)},y.createElement("svg",{viewBox:`0 0 ${fb} ${fb}`,role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":g},y.createElement(EW,{dotClassName:s,hasCircleCls:!0}),y.createElement(EW,{dotClassName:s,style:_})))},f2e=h2e;function p2e(t){const{prefixCls:r,percent:o=0}=t,s=`${r}-dot`,c=`${s}-holder`,d=`${c}-hidden`;return y.createElement(y.Fragment,null,y.createElement("span",{className:Ke(c,o>0&&d)},y.createElement("span",{className:Ke(s,`${r}-dot-spin`)},[1,2,3,4].map(f=>y.createElement("i",{className:`${r}-dot-item`,key:f})))),y.createElement(f2e,{prefixCls:r,percent:o}))}function m2e(t){const{prefixCls:r,indicator:o,percent:s}=t,c=`${r}-dot`;return o&&y.isValidElement(o)?gc(o,{className:Ke(o.props.className,c),percent:s}):y.createElement(p2e,{prefixCls:r,percent:s})}const g2e=new _r("antSpinMove",{to:{opacity:1}}),v2e=new _r("antRotate",{to:{transform:"rotate(405deg)"}}),E2e=t=>{const{componentCls:r,calc:o}=t;return{[r]:Object.assign(Object.assign({},Ps(t)),{position:"absolute",display:"none",color:t.colorPrimary,fontSize:0,textAlign:"center",verticalAlign:"middle",opacity:0,transition:`transform ${t.motionDurationSlow} ${t.motionEaseInOutCirc}`,"&-spinning":{position:"relative",display:"inline-block",opacity:1},[`${r}-text`]:{fontSize:t.fontSize,paddingTop:o(o(t.dotSize).sub(t.fontSize)).div(2).add(2).equal()},"&-fullscreen":{position:"fixed",width:"100vw",height:"100vh",backgroundColor:t.colorBgMask,zIndex:t.zIndexPopupBase,inset:0,display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center",opacity:0,visibility:"hidden",transition:`all ${t.motionDurationMid}`,"&-show":{opacity:1,visibility:"visible"},[r]:{[`${r}-dot-holder`]:{color:t.colorWhite},[`${r}-text`]:{color:t.colorTextLightSolid}}},"&-nested-loading":{position:"relative",[`> div > ${r}`]:{position:"absolute",top:0,insetInlineStart:0,zIndex:4,display:"block",width:"100%",height:"100%",maxHeight:t.contentHeight,[`${r}-dot`]:{position:"absolute",top:"50%",insetInlineStart:"50%",margin:o(t.dotSize).mul(-1).div(2).equal()},[`${r}-text`]:{position:"absolute",top:"50%",width:"100%",textShadow:`0 1px 2px ${t.colorBgContainer}`},[`&${r}-show-text ${r}-dot`]:{marginTop:o(t.dotSize).div(2).mul(-1).sub(10).equal()},"&-sm":{[`${r}-dot`]:{margin:o(t.dotSizeSM).mul(-1).div(2).equal()},[`${r}-text`]:{paddingTop:o(o(t.dotSizeSM).sub(t.fontSize)).div(2).add(2).equal()},[`&${r}-show-text ${r}-dot`]:{marginTop:o(t.dotSizeSM).div(2).mul(-1).sub(10).equal()}},"&-lg":{[`${r}-dot`]:{margin:o(t.dotSizeLG).mul(-1).div(2).equal()},[`${r}-text`]:{paddingTop:o(o(t.dotSizeLG).sub(t.fontSize)).div(2).add(2).equal()},[`&${r}-show-text ${r}-dot`]:{marginTop:o(t.dotSizeLG).div(2).mul(-1).sub(10).equal()}}},[`${r}-container`]:{position:"relative",transition:`opacity ${t.motionDurationSlow}`,"&::after":{position:"absolute",top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,zIndex:10,width:"100%",height:"100%",background:t.colorBgContainer,opacity:0,transition:`all ${t.motionDurationSlow}`,content:'""',pointerEvents:"none"}},[`${r}-blur`]:{clear:"both",opacity:.5,userSelect:"none",pointerEvents:"none","&::after":{opacity:.4,pointerEvents:"auto"}}},"&-tip":{color:t.spinDotDefault},[`${r}-dot-holder`]:{width:"1em",height:"1em",fontSize:t.dotSize,display:"inline-block",transition:`transform ${t.motionDurationSlow} ease, opacity ${t.motionDurationSlow} ease`,transformOrigin:"50% 50%",lineHeight:1,color:t.colorPrimary,"&-hidden":{transform:"scale(0.3)",opacity:0}},[`${r}-dot-progress`]:{position:"absolute",inset:0},[`${r}-dot`]:{position:"relative",display:"inline-block",fontSize:t.dotSize,width:"1em",height:"1em","&-item":{position:"absolute",display:"block",width:o(t.dotSize).sub(o(t.marginXXS).div(2)).div(2).equal(),height:o(t.dotSize).sub(o(t.marginXXS).div(2)).div(2).equal(),background:"currentColor",borderRadius:"100%",transform:"scale(0.75)",transformOrigin:"50% 50%",opacity:.3,animationName:g2e,animationDuration:"1s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDirection:"alternate","&:nth-child(1)":{top:0,insetInlineStart:0,animationDelay:"0s"},"&:nth-child(2)":{top:0,insetInlineEnd:0,animationDelay:"0.4s"},"&:nth-child(3)":{insetInlineEnd:0,bottom:0,animationDelay:"0.8s"},"&:nth-child(4)":{bottom:0,insetInlineStart:0,animationDelay:"1.2s"}},"&-spin":{transform:"rotate(45deg)",animationName:v2e,animationDuration:"1.2s",animationIterationCount:"infinite",animationTimingFunction:"linear"},"&-circle":{strokeLinecap:"round",transition:["stroke-dashoffset","stroke-dasharray","stroke","stroke-width","opacity"].map(s=>`${s} ${t.motionDurationSlow} ease`).join(","),fillOpacity:0,stroke:"currentcolor"},"&-circle-bg":{stroke:t.colorFillSecondary}},[`&-sm ${r}-dot`]:{"&, &-holder":{fontSize:t.dotSizeSM}},[`&-sm ${r}-dot-holder`]:{i:{width:o(o(t.dotSizeSM).sub(o(t.marginXXS).div(2))).div(2).equal(),height:o(o(t.dotSizeSM).sub(o(t.marginXXS).div(2))).div(2).equal()}},[`&-lg ${r}-dot`]:{"&, &-holder":{fontSize:t.dotSizeLG}},[`&-lg ${r}-dot-holder`]:{i:{width:o(o(t.dotSizeLG).sub(t.marginXXS)).div(2).equal(),height:o(o(t.dotSizeLG).sub(t.marginXXS)).div(2).equal()}},[`&${r}-show-text ${r}-text`]:{display:"block"}})}},_2e=t=>{const{controlHeightLG:r,controlHeight:o}=t;return{contentHeight:400,dotSize:r/2,dotSizeSM:r*.35,dotSizeLG:o}},S2e=Oo("Spin",t=>{const r=oi(t,{spinDotDefault:t.colorTextDescription});return[E2e(r)]},_2e),y2e=200,_W=[[30,.05],[70,.03],[96,.01]];function C2e(t,r){const[o,s]=y.useState(0),c=y.useRef(null),d=r==="auto";return y.useEffect(()=>(d&&t&&(s(0),c.current=setInterval(()=>{s(f=>{const v=100-f;for(let g=0;g<_W.length;g+=1){const[_,C]=_W[g];if(f<=_)return f+v*C}return f})},y2e)),()=>{clearInterval(c.current)}),[d,t]),d?o:r}var b2e=globalThis&&globalThis.__rest||function(t,r){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&r.indexOf(s)<0&&(o[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(t);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(t,s[c])&&(o[s[c]]=t[s[c]]);return o};let JQ;function T2e(t,r){return!!t&&!!r&&!Number.isNaN(Number(r))}const QQ=t=>{var r;const{prefixCls:o,spinning:s=!0,delay:c=0,className:d,rootClassName:f,size:v="default",tip:g,wrapperClassName:_,style:C,children:b,fullscreen:T=!1,indicator:A,percent:I}=t,N=b2e(t,["prefixCls","spinning","delay","className","rootClassName","size","tip","wrapperClassName","style","children","fullscreen","indicator","percent"]),{getPrefixCls:P,direction:D,className:x,style:L,indicator:M}=Ec("spin"),F=P("spin",o),[V,$,z]=S2e(F),[K,G]=y.useState(()=>s&&!T2e(s,c)),J=C2e(K,I);y.useEffect(()=>{if(s){const ie=PNe(c,()=>{G(!0)});return ie(),()=>{var ve;(ve=ie==null?void 0:ie.cancel)===null||ve===void 0||ve.call(ie)}}G(!1)},[c,s]);const ne=y.useMemo(()=>typeof b<"u"&&!T,[b,T]),te=Ke(F,x,{[`${F}-sm`]:v==="small",[`${F}-lg`]:v==="large",[`${F}-spinning`]:K,[`${F}-show-text`]:!!g,[`${F}-rtl`]:D==="rtl"},d,!T&&f,$,z),ce=Ke(`${F}-container`,{[`${F}-blur`]:K}),ge=(r=A??M)!==null&&r!==void 0?r:JQ,oe=Object.assign(Object.assign({},L),C),ae=y.createElement("div",Object.assign({},N,{style:oe,className:te,"aria-live":"polite","aria-busy":K}),y.createElement(m2e,{prefixCls:F,indicator:ge,percent:J}),g&&(ne||T)?y.createElement("div",{className:`${F}-text`},g):null);return V(ne?y.createElement("div",Object.assign({},N,{className:Ke(`${F}-nested-loading`,_,$,z)}),K&&y.createElement("div",{key:"loading"},ae),y.createElement("div",{className:ce,key:"container"},b)):T?y.createElement("div",{className:Ke(`${F}-fullscreen`,{[`${F}-fullscreen-show`]:K},f,$,z)},ae):ae)};QQ.setDefaultIndicator=t=>{JQ=t};const R2e=QQ,pL=ze.createContext({});pL.Consumer;var ZQ=globalThis&&globalThis.__rest||function(t,r){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&r.indexOf(s)<0&&(o[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(t);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(t,s[c])&&(o[s[c]]=t[s[c]]);return o};const w2e=t=>{var{prefixCls:r,className:o,avatar:s,title:c,description:d}=t,f=ZQ(t,["prefixCls","className","avatar","title","description"]);const{getPrefixCls:v}=y.useContext(wr),g=v("list",r),_=Ke(`${g}-item-meta`,o),C=ze.createElement("div",{className:`${g}-item-meta-content`},c&&ze.createElement("h4",{className:`${g}-item-meta-title`},c),d&&ze.createElement("div",{className:`${g}-item-meta-description`},d));return ze.createElement("div",Object.assign({},f,{className:_}),s&&ze.createElement("div",{className:`${g}-item-meta-avatar`},s),(c||d)&&C)},I2e=ze.forwardRef((t,r)=>{const{prefixCls:o,children:s,actions:c,extra:d,styles:f,className:v,classNames:g,colStyle:_}=t,C=ZQ(t,["prefixCls","children","actions","extra","styles","className","classNames","colStyle"]),{grid:b,itemLayout:T}=y.useContext(pL),{getPrefixCls:A,list:I}=y.useContext(wr),N=$=>{var z,K;return Ke((K=(z=I==null?void 0:I.item)===null||z===void 0?void 0:z.classNames)===null||K===void 0?void 0:K[$],g==null?void 0:g[$])},P=$=>{var z,K;return Object.assign(Object.assign({},(K=(z=I==null?void 0:I.item)===null||z===void 0?void 0:z.styles)===null||K===void 0?void 0:K[$]),f==null?void 0:f[$])},D=()=>{let $=!1;return y.Children.forEach(s,z=>{typeof z=="string"&&($=!0)}),$&&y.Children.count(s)>1},x=()=>T==="vertical"?!!d:!D(),L=A("list",o),M=c&&c.length>0&&ze.createElement("ul",{className:Ke(`${L}-item-action`,N("actions")),key:"actions",style:P("actions")},c.map(($,z)=>ze.createElement("li",{key:`${L}-item-action-${z}`},$,z!==c.length-1&&ze.createElement("em",{className:`${L}-item-action-split`})))),F=b?"div":"li",V=ze.createElement(F,Object.assign({},C,b?{}:{ref:r},{className:Ke(`${L}-item`,{[`${L}-item-no-flex`]:!x()},v)}),T==="vertical"&&d?[ze.createElement("div",{className:`${L}-item-main`,key:"content"},s,M),ze.createElement("div",{className:Ke(`${L}-item-extra`,N("extra")),key:"extra",style:P("extra")},d)]:[s,M,gc(d,{key:"extra"})]);return b?ze.createElement(dL,{ref:r,flex:1,style:_},V):V}),eZ=I2e;eZ.Meta=w2e;const A2e=eZ,O2e=t=>{const{listBorderedCls:r,componentCls:o,paddingLG:s,margin:c,itemPaddingSM:d,itemPaddingLG:f,marginLG:v,borderRadiusLG:g}=t;return{[r]:{border:`${Xe(t.lineWidth)} ${t.lineType} ${t.colorBorder}`,borderRadius:g,[`${o}-header,${o}-footer,${o}-item`]:{paddingInline:s},[`${o}-pagination`]:{margin:`${Xe(c)} ${Xe(v)}`}},[`${r}${o}-sm`]:{[`${o}-item,${o}-header,${o}-footer`]:{padding:d}},[`${r}${o}-lg`]:{[`${o}-item,${o}-header,${o}-footer`]:{padding:f}}}},x2e=t=>{const{componentCls:r,screenSM:o,screenMD:s,marginLG:c,marginSM:d,margin:f}=t;return{[`@media screen and (max-width:${s}px)`]:{[r]:{[`${r}-item`]:{[`${r}-item-action`]:{marginInlineStart:c}}},[`${r}-vertical`]:{[`${r}-item`]:{[`${r}-item-extra`]:{marginInlineStart:c}}}},[`@media screen and (max-width: ${o}px)`]:{[r]:{[`${r}-item`]:{flexWrap:"wrap",[`${r}-action`]:{marginInlineStart:d}}},[`${r}-vertical`]:{[`${r}-item`]:{flexWrap:"wrap-reverse",[`${r}-item-main`]:{minWidth:t.contentWidth},[`${r}-item-extra`]:{margin:`auto auto ${Xe(f)}`}}}}}},N2e=t=>{const{componentCls:r,antCls:o,controlHeight:s,minHeight:c,paddingSM:d,marginLG:f,padding:v,itemPadding:g,colorPrimary:_,itemPaddingSM:C,itemPaddingLG:b,paddingXS:T,margin:A,colorText:I,colorTextDescription:N,motionDurationSlow:P,lineWidth:D,headerBg:x,footerBg:L,emptyTextPadding:M,metaMarginBottom:F,avatarMarginRight:V,titleMarginBottom:$,descriptionFontSize:z}=t;return{[r]:Object.assign(Object.assign({},Ps(t)),{position:"relative","*":{outline:"none"},[`${r}-header`]:{background:x},[`${r}-footer`]:{background:L},[`${r}-header, ${r}-footer`]:{paddingBlock:d},[`${r}-pagination`]:{marginBlockStart:f,[`${o}-pagination-options`]:{textAlign:"start"}},[`${r}-spin`]:{minHeight:c,textAlign:"center"},[`${r}-items`]:{margin:0,padding:0,listStyle:"none"},[`${r}-item`]:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:g,color:I,[`${r}-item-meta`]:{display:"flex",flex:1,alignItems:"flex-start",maxWidth:"100%",[`${r}-item-meta-avatar`]:{marginInlineEnd:V},[`${r}-item-meta-content`]:{flex:"1 0",width:0,color:I},[`${r}-item-meta-title`]:{margin:`0 0 ${Xe(t.marginXXS)} 0`,color:I,fontSize:t.fontSize,lineHeight:t.lineHeight,"> a":{color:I,transition:`all ${P}`,"&:hover":{color:_}}},[`${r}-item-meta-description`]:{color:N,fontSize:z,lineHeight:t.lineHeight}},[`${r}-item-action`]:{flex:"0 0 auto",marginInlineStart:t.marginXXL,padding:0,fontSize:0,listStyle:"none","& > li":{position:"relative",display:"inline-block",padding:`0 ${Xe(T)}`,color:N,fontSize:t.fontSize,lineHeight:t.lineHeight,textAlign:"center","&:first-child":{paddingInlineStart:0}},[`${r}-item-action-split`]:{position:"absolute",insetBlockStart:"50%",insetInlineEnd:0,width:D,height:t.calc(t.fontHeight).sub(t.calc(t.marginXXS).mul(2)).equal(),transform:"translateY(-50%)",backgroundColor:t.colorSplit}}},[`${r}-empty`]:{padding:`${Xe(v)} 0`,color:N,fontSize:t.fontSizeSM,textAlign:"center"},[`${r}-empty-text`]:{padding:M,color:t.colorTextDisabled,fontSize:t.fontSize,textAlign:"center"},[`${r}-item-no-flex`]:{display:"block"}}),[`${r}-grid ${o}-col > ${r}-item`]:{display:"block",maxWidth:"100%",marginBlockEnd:A,paddingBlock:0,borderBlockEnd:"none"},[`${r}-vertical ${r}-item`]:{alignItems:"initial",[`${r}-item-main`]:{display:"block",flex:1},[`${r}-item-extra`]:{marginInlineStart:f},[`${r}-item-meta`]:{marginBlockEnd:F,[`${r}-item-meta-title`]:{marginBlockStart:0,marginBlockEnd:$,color:I,fontSize:t.fontSizeLG,lineHeight:t.lineHeightLG}},[`${r}-item-action`]:{marginBlockStart:v,marginInlineStart:"auto","> li":{padding:`0 ${Xe(v)}`,"&:first-child":{paddingInlineStart:0}}}},[`${r}-split ${r}-item`]:{borderBlockEnd:`${Xe(t.lineWidth)} ${t.lineType} ${t.colorSplit}`,"&:last-child":{borderBlockEnd:"none"}},[`${r}-split ${r}-header`]:{borderBlockEnd:`${Xe(t.lineWidth)} ${t.lineType} ${t.colorSplit}`},[`${r}-split${r}-empty ${r}-footer`]:{borderTop:`${Xe(t.lineWidth)} ${t.lineType} ${t.colorSplit}`},[`${r}-loading ${r}-spin-nested-loading`]:{minHeight:s},[`${r}-split${r}-something-after-last-item ${o}-spin-container > ${r}-items > ${r}-item:last-child`]:{borderBlockEnd:`${Xe(t.lineWidth)} ${t.lineType} ${t.colorSplit}`},[`${r}-lg ${r}-item`]:{padding:b},[`${r}-sm ${r}-item`]:{padding:C},[`${r}:not(${r}-vertical)`]:{[`${r}-item-no-flex`]:{[`${r}-item-action`]:{float:"right"}}}}},P2e=t=>({contentWidth:220,itemPadding:`${Xe(t.paddingContentVertical)} 0`,itemPaddingSM:`${Xe(t.paddingContentVerticalSM)} ${Xe(t.paddingContentHorizontal)}`,itemPaddingLG:`${Xe(t.paddingContentVerticalLG)} ${Xe(t.paddingContentHorizontalLG)}`,headerBg:"transparent",footerBg:"transparent",emptyTextPadding:t.padding,metaMarginBottom:t.padding,avatarMarginRight:t.padding,titleMarginBottom:t.paddingSM,descriptionFontSize:t.fontSize}),D2e=Oo("List",t=>{const r=oi(t,{listBorderedCls:`${t.componentCls}-bordered`,minHeight:t.controlHeightLG});return[N2e(r),O2e(r),x2e(r)]},P2e);var L2e=globalThis&&globalThis.__rest||function(t,r){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&r.indexOf(s)<0&&(o[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(t);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(t,s[c])&&(o[s[c]]=t[s[c]]);return o};function k2e(t,r){var{pagination:o=!1,prefixCls:s,bordered:c=!1,split:d=!0,className:f,rootClassName:v,style:g,children:_,itemLayout:C,loadMore:b,grid:T,dataSource:A=[],size:I,header:N,footer:P,loading:D=!1,rowKey:x,renderItem:L,locale:M}=t,F=L2e(t,["pagination","prefixCls","bordered","split","className","rootClassName","style","children","itemLayout","loadMore","grid","dataSource","size","header","footer","loading","rowKey","renderItem","locale"]);const V=o&&typeof o=="object"?o:{},[$,z]=y.useState(V.defaultCurrent||1),[K,G]=y.useState(V.defaultPageSize||10),{getPrefixCls:J,direction:ne,className:te,style:ce}=Ec("list"),{renderEmpty:ge}=y.useContext(wr),oe={current:1,total:0},ae=ht=>(qe,Je)=>{var Ct;z(qe),G(Je),o&&((Ct=o==null?void 0:o[ht])===null||Ct===void 0||Ct.call(o,qe,Je))},ie=ae("onChange"),ve=ae("onShowSizeChange"),me=(ht,qe)=>{if(!L)return null;let Je;return typeof x=="function"?Je=x(ht):x?Je=ht[x]:Je=ht.key,Je||(Je=`list-item-${qe}`),y.createElement(y.Fragment,{key:Je},L(ht,qe))},le=()=>!!(b||o||P),de=J("list",s),[Ee,se,Te]=D2e(de);let we=D;typeof we=="boolean"&&(we={spinning:we});const Le=!!(we!=null&&we.spinning),Ie=Su(I);let De="";switch(Ie){case"large":De="lg";break;case"small":De="sm";break}const Ye=Ke(de,{[`${de}-vertical`]:C==="vertical",[`${de}-${De}`]:De,[`${de}-split`]:d,[`${de}-bordered`]:c,[`${de}-loading`]:Le,[`${de}-grid`]:!!T,[`${de}-something-after-last-item`]:le(),[`${de}-rtl`]:ne==="rtl"},te,f,v,se,Te),Me=BDe(oe,{total:A.length,current:$,pageSize:K},o||{}),Oe=Math.ceil(Me.total/Me.pageSize);Me.current>Oe&&(Me.current=Oe);const $e=o&&y.createElement("div",{className:Ke(`${de}-pagination`)},y.createElement(d2e,Object.assign({align:"end"},Me,{onChange:ie,onShowSizeChange:ve})));let tt=Et(A);o&&A.length>(Me.current-1)*Me.pageSize&&(tt=Et(A).splice((Me.current-1)*Me.pageSize,Me.pageSize));const je=Object.keys(T||{}).some(ht=>["xs","sm","md","lg","xl","xxl"].includes(ht)),ke=eL(je),dt=y.useMemo(()=>{for(let ht=0;ht<Kh.length;ht+=1){const qe=Kh[ht];if(ke[qe])return qe}},[ke]),Ze=y.useMemo(()=>{if(!T)return;const ht=dt&&T[dt]?T[dt]:T.column;if(ht)return{width:`${100/ht}%`,maxWidth:`${100/ht}%`}},[JSON.stringify(T),dt]);let ut=Le&&y.createElement("div",{style:{minHeight:53}});if(tt.length>0){const ht=tt.map((qe,Je)=>me(qe,Je));ut=T?y.createElement(xQ,{gutter:T.gutter},y.Children.map(ht,qe=>y.createElement("div",{key:qe==null?void 0:qe.key,style:Ze},qe))):y.createElement("ul",{className:`${de}-items`},ht)}else!_&&!Le&&(ut=y.createElement("div",{className:`${de}-empty-text`},(M==null?void 0:M.emptyText)||(ge==null?void 0:ge("List"))||y.createElement(GJ,{componentName:"List"})));const Tt=Me.position||"bottom",pt=y.useMemo(()=>({grid:T,itemLayout:C}),[JSON.stringify(T),C]);return Ee(y.createElement(pL.Provider,{value:pt},y.createElement("div",Object.assign({ref:r,style:Object.assign(Object.assign({},ce),g),className:Ye},F),(Tt==="top"||Tt==="both")&&$e,N&&y.createElement("div",{className:`${de}-header`},N),y.createElement(R2e,Object.assign({},we),ut,_),P&&y.createElement("div",{className:`${de}-footer`},P),b||(Tt==="bottom"||Tt==="both")&&$e)))}const M2e=y.forwardRef(k2e),tZ=M2e;tZ.Item=A2e;const SW=tZ;function F2e(t){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)&&t==null?[]:Array.isArray(t)?t:[t]}let Hc=null,EC=t=>t(),pb=[],Fv={};function yW(){const{getContainer:t,rtl:r,maxCount:o,top:s,bottom:c,showProgress:d,pauseOnHover:f}=Fv,v=(t==null?void 0:t())||document.body;return{getContainer:()=>v,rtl:r,maxCount:o,top:s,bottom:c,showProgress:d,pauseOnHover:f}}const U2e=ze.forwardRef((t,r)=>{const{notificationConfig:o,sync:s}=t,{getPrefixCls:c}=y.useContext(wr),d=Fv.prefixCls||c("notification"),f=y.useContext(Kwe),[v,g]=OJ(Object.assign(Object.assign(Object.assign({},o),{prefixCls:d}),f.notification));return ze.useEffect(s,[]),ze.useImperativeHandle(r,()=>{const _=Object.assign({},v);return Object.keys(_).forEach(C=>{_[C]=function(){return s(),v[C].apply(v,arguments)}}),{instance:_,sync:s}}),g}),B2e=ze.forwardRef((t,r)=>{const[o,s]=ze.useState(yW),c=()=>{s(yW)};ze.useEffect(c,[]);const d=lbe(),f=d.getRootPrefixCls(),v=d.getIconPrefixCls(),g=d.getTheme(),_=ze.createElement(U2e,{ref:r,sync:c,notificationConfig:o});return ze.createElement(tf,{prefixCls:f,iconPrefixCls:v,theme:g},d.holderRender?d.holderRender(_):_)});function mL(){if(!Hc){const t=document.createDocumentFragment(),r={fragment:t};Hc=r,EC(()=>{XX()(ze.createElement(B2e,{ref:s=>{const{instance:c,sync:d}=s||{};Promise.resolve().then(()=>{!r.instance&&c&&(r.instance=c,r.sync=d,mL())})}}),t)});return}Hc.instance&&(pb.forEach(t=>{switch(t.type){case"open":{EC(()=>{Hc.instance.open(Object.assign(Object.assign({},Fv),t.config))});break}case"destroy":EC(()=>{Hc==null||Hc.instance.destroy(t.key)});break}}),pb=[])}function V2e(t){Fv=Object.assign(Object.assign({},Fv),t),EC(()=>{var r;(r=Hc==null?void 0:Hc.sync)===null||r===void 0||r.call(Hc)})}function nZ(t){pb.push({type:"open",config:t}),mL()}const j2e=t=>{pb.push({type:"destroy",key:t}),mL()},$2e=["success","info","warning","error"],H2e={open:nZ,destroy:j2e,config:V2e,useNotification:Gwe,_InternalPanelDoNotUseOrYouWillBeFired:Mwe},rZ=H2e;$2e.forEach(t=>{rZ[t]=r=>nZ(Object.assign(Object.assign({},r),{type:t}))});const z2e=rZ;var W2e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"}}]},name:"copy",theme:"outlined"};const G2e=W2e;var K2e=function(r,o){return y.createElement(ao,nt({},r,{ref:o,icon:G2e}))},Y2e=y.forwardRef(K2e);const q2e=Y2e;var X2e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"};const J2e=X2e;var Q2e=function(r,o){return y.createElement(ao,nt({},r,{ref:o,icon:J2e}))},Z2e=y.forwardRef(Q2e);const eLe=Z2e;var tLe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 170h-60c-4.4 0-8 3.6-8 8v518H310v-73c0-6.7-7.8-10.5-13-6.3l-141.9 112a8 8 0 000 12.6l141.9 112c5.3 4.2 13 .4 13-6.3v-75h498c35.3 0 64-28.7 64-64V178c0-4.4-3.6-8-8-8z"}}]},name:"enter",theme:"outlined"};const nLe=tLe;var rLe=function(r,o){return y.createElement(ao,nt({},r,{ref:o,icon:nLe}))},iLe=y.forwardRef(rLe);const oLe=iLe,aLe=(t,r,o,s)=>{const{titleMarginBottom:c,fontWeightStrong:d}=s;return{marginBottom:c,color:o,fontWeight:d,fontSize:t,lineHeight:r}},sLe=t=>{const r=[1,2,3,4,5],o={};return r.forEach(s=>{o[`
      h${s}&,
      div&-h${s},
      div&-h${s} > textarea,
      h${s}
    `]=aLe(t[`fontSizeHeading${s}`],t[`lineHeightHeading${s}`],t.colorTextHeading,t)}),o},cLe=t=>{const{componentCls:r}=t;return{"a&, a":Object.assign(Object.assign({},bX(t)),{userSelect:"text",[`&[disabled], &${r}-disabled`]:{color:t.colorTextDisabled,cursor:"not-allowed","&:active, &:hover":{color:t.colorTextDisabled},"&:active":{pointerEvents:"none"}}})}},lLe=t=>({code:{margin:"0 0.2em",paddingInline:"0.4em",paddingBlock:"0.2em 0.1em",fontSize:"85%",fontFamily:t.fontFamilyCode,background:"rgba(150, 150, 150, 0.1)",border:"1px solid rgba(100, 100, 100, 0.2)",borderRadius:3},kbd:{margin:"0 0.2em",paddingInline:"0.4em",paddingBlock:"0.15em 0.1em",fontSize:"90%",fontFamily:t.fontFamilyCode,background:"rgba(150, 150, 150, 0.06)",border:"1px solid rgba(100, 100, 100, 0.2)",borderBottomWidth:2,borderRadius:3},mark:{padding:0,backgroundColor:JC[2]},"u, ins":{textDecoration:"underline",textDecorationSkipInk:"auto"},"s, del":{textDecoration:"line-through"},strong:{fontWeight:600},"ul, ol":{marginInline:0,marginBlock:"0 1em",padding:0,li:{marginInline:"20px 0",marginBlock:0,paddingInline:"4px 0",paddingBlock:0}},ul:{listStyleType:"circle",ul:{listStyleType:"disc"}},ol:{listStyleType:"decimal"},"pre, blockquote":{margin:"1em 0"},pre:{padding:"0.4em 0.6em",whiteSpace:"pre-wrap",wordWrap:"break-word",background:"rgba(150, 150, 150, 0.1)",border:"1px solid rgba(100, 100, 100, 0.2)",borderRadius:3,fontFamily:t.fontFamilyCode,code:{display:"inline",margin:0,padding:0,fontSize:"inherit",fontFamily:"inherit",background:"transparent",border:0}},blockquote:{paddingInline:"0.6em 0",paddingBlock:0,borderInlineStart:"4px solid rgba(100, 100, 100, 0.2)",opacity:.85}}),uLe=t=>{const{componentCls:r,paddingSM:o}=t,s=o;return{"&-edit-content":{position:"relative","div&":{insetInlineStart:t.calc(t.paddingSM).mul(-1).equal(),marginTop:t.calc(s).mul(-1).equal(),marginBottom:`calc(1em - ${Xe(s)})`},[`${r}-edit-content-confirm`]:{position:"absolute",insetInlineEnd:t.calc(t.marginXS).add(2).equal(),insetBlockEnd:t.marginXS,color:t.colorTextDescription,fontWeight:"normal",fontSize:t.fontSize,fontStyle:"normal",pointerEvents:"none"},textarea:{margin:"0!important",MozTransition:"none",height:"1em"}}}},dLe=t=>({[`${t.componentCls}-copy-success`]:{"\n    &,\n    &:hover,\n    &:focus":{color:t.colorSuccess}},[`${t.componentCls}-copy-icon-only`]:{marginInlineStart:0}}),hLe=()=>({"\n  a&-ellipsis,\n  span&-ellipsis\n  ":{display:"inline-block",maxWidth:"100%"},"&-ellipsis-single-line":{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis","a&, span&":{verticalAlign:"bottom"},"> code":{paddingBlock:0,maxWidth:"calc(100% - 1.2em)",display:"inline-block",overflow:"hidden",textOverflow:"ellipsis",verticalAlign:"bottom",boxSizing:"content-box"}},"&-ellipsis-multiple-line":{display:"-webkit-box",overflow:"hidden",WebkitLineClamp:3,WebkitBoxOrient:"vertical"}}),fLe=t=>{const{componentCls:r,titleMarginTop:o}=t;return{[r]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:t.colorText,wordBreak:"break-word",lineHeight:t.lineHeight,[`&${r}-secondary`]:{color:t.colorTextDescription},[`&${r}-success`]:{color:t.colorSuccess},[`&${r}-warning`]:{color:t.colorWarning},[`&${r}-danger`]:{color:t.colorError,"a&:active, a&:focus":{color:t.colorErrorActive},"a&:hover":{color:t.colorErrorHover}},[`&${r}-disabled`]:{color:t.colorTextDisabled,cursor:"not-allowed",userSelect:"none"},"\n        div&,\n        p\n      ":{marginBottom:"1em"}},sLe(t)),{[`
      & + h1${r},
      & + h2${r},
      & + h3${r},
      & + h4${r},
      & + h5${r}
      `]:{marginTop:o},"\n      div,\n      ul,\n      li,\n      p,\n      h1,\n      h2,\n      h3,\n      h4,\n      h5":{"\n        + h1,\n        + h2,\n        + h3,\n        + h4,\n        + h5\n        ":{marginTop:o}}}),lLe(t)),cLe(t)),{[`
        ${r}-expand,
        ${r}-collapse,
        ${r}-edit,
        ${r}-copy
      `]:Object.assign(Object.assign({},bX(t)),{marginInlineStart:t.marginXXS})}),uLe(t)),dLe(t)),hLe()),{"&-rtl":{direction:"rtl"}})}},pLe=()=>({titleMarginTop:"1.2em",titleMarginBottom:"0.5em"}),iZ=Oo("Typography",t=>[fLe(t)],pLe),mLe=t=>{const{prefixCls:r,"aria-label":o,className:s,style:c,direction:d,maxLength:f,autoSize:v=!0,value:g,onSave:_,onCancel:C,onEnd:b,component:T,enterIcon:A=y.createElement(oLe,null)}=t,I=y.useRef(null),N=y.useRef(!1),P=y.useRef(null),[D,x]=y.useState(g);y.useEffect(()=>{x(g)},[g]),y.useEffect(()=>{var ce;if(!((ce=I.current)===null||ce===void 0)&&ce.resizableTextArea){const{textArea:ge}=I.current.resizableTextArea;ge.focus();const{length:oe}=ge.value;ge.setSelectionRange(oe,oe)}},[]);const L=ce=>{let{target:ge}=ce;x(ge.value.replace(/[\n\r]/g,""))},M=()=>{N.current=!0},F=()=>{N.current=!1},V=ce=>{let{keyCode:ge}=ce;N.current||(P.current=ge)},$=()=>{_(D.trim())},z=ce=>{let{keyCode:ge,ctrlKey:oe,altKey:ae,metaKey:ie,shiftKey:ve}=ce;P.current!==ge||N.current||oe||ae||ie||ve||(ge===lt.ENTER?($(),b==null||b()):ge===lt.ESC&&C())},K=()=>{$()},[G,J,ne]=iZ(r),te=Ke(r,`${r}-edit-content`,{[`${r}-rtl`]:d==="rtl",[`${r}-${T}`]:!!T},s,J,ne);return G(y.createElement("div",{className:te,style:c},y.createElement(WQ,{ref:I,maxLength:f,value:D,onChange:L,onKeyDown:V,onKeyUp:z,onCompositionStart:M,onCompositionEnd:F,onBlur:K,"aria-label":o,rows:1,autoSize:v}),A!==null?gc(A,{className:`${r}-edit-content-confirm`}):null))},gLe=mLe;var vLe=function(){var t=document.getSelection();if(!t.rangeCount)return function(){};for(var r=document.activeElement,o=[],s=0;s<t.rangeCount;s++)o.push(t.getRangeAt(s));switch(r.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":r.blur();break;default:r=null;break}return t.removeAllRanges(),function(){t.type==="Caret"&&t.removeAllRanges(),t.rangeCount||o.forEach(function(c){t.addRange(c)}),r&&r.focus()}},ELe=vLe,CW={"text/plain":"Text","text/html":"Url",default:"Text"},_Le="Copy to clipboard: #{key}, Enter";function SLe(t){var r=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return t.replace(/#{\s*key\s*}/g,r)}function yLe(t,r){var o,s,c,d,f,v,g=!1;r||(r={}),o=r.debug||!1;try{c=ELe(),d=document.createRange(),f=document.getSelection(),v=document.createElement("span"),v.textContent=t,v.ariaHidden="true",v.style.all="unset",v.style.position="fixed",v.style.top=0,v.style.clip="rect(0, 0, 0, 0)",v.style.whiteSpace="pre",v.style.webkitUserSelect="text",v.style.MozUserSelect="text",v.style.msUserSelect="text",v.style.userSelect="text",v.addEventListener("copy",function(C){if(C.stopPropagation(),r.format)if(C.preventDefault(),typeof C.clipboardData>"u"){o&&console.warn("unable to use e.clipboardData"),o&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var b=CW[r.format]||CW.default;window.clipboardData.setData(b,t)}else C.clipboardData.clearData(),C.clipboardData.setData(r.format,t);r.onCopy&&(C.preventDefault(),r.onCopy(C.clipboardData))}),document.body.appendChild(v),d.selectNodeContents(v),f.addRange(d);var _=document.execCommand("copy");if(!_)throw new Error("copy command was unsuccessful");g=!0}catch(C){o&&console.error("unable to copy using execCommand: ",C),o&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(r.format||"text",t),r.onCopy&&r.onCopy(window.clipboardData),g=!0}catch(b){o&&console.error("unable to copy using clipboardData: ",b),o&&console.error("falling back to prompt"),s=SLe("message"in r?r.message:_Le),window.prompt(s,t)}}finally{f&&(typeof f.removeRange=="function"?f.removeRange(d):f.removeAllRanges()),v&&document.body.removeChild(v),c()}return g}var CLe=yLe;const bLe=Od(CLe);var TLe=globalThis&&globalThis.__awaiter||function(t,r,o,s){function c(d){return d instanceof o?d:new o(function(f){f(d)})}return new(o||(o=Promise))(function(d,f){function v(C){try{_(s.next(C))}catch(b){f(b)}}function g(C){try{_(s.throw(C))}catch(b){f(b)}}function _(C){C.done?d(C.value):c(C.value).then(v,g)}_((s=s.apply(t,r||[])).next())})};const RLe=t=>{let{copyConfig:r,children:o}=t;const[s,c]=y.useState(!1),[d,f]=y.useState(!1),v=y.useRef(null),g=()=>{v.current&&clearTimeout(v.current)},_={};r.format&&(_.format=r.format),y.useEffect(()=>g,[]);const C=ho(b=>TLe(void 0,void 0,void 0,function*(){var T;b==null||b.preventDefault(),b==null||b.stopPropagation(),f(!0);try{const A=typeof r.text=="function"?yield r.text():r.text;bLe(A||F2e(o,!0).join("")||"",_),f(!1),c(!0),g(),v.current=setTimeout(()=>{c(!1)},3e3),(T=r.onCopy)===null||T===void 0||T.call(r,b)}catch(A){throw f(!1),A}}));return{copied:s,copyLoading:d,onClick:C}},wLe=RLe;function sx(t,r){return y.useMemo(()=>{const o=!!t;return[o,Object.assign(Object.assign({},r),o&&typeof t=="object"?t:null)]},[t])}const ILe=t=>{const r=y.useRef(void 0);return y.useEffect(()=>{r.current=t}),r.current},ALe=ILe,OLe=(t,r,o)=>y.useMemo(()=>t===!0?{title:r??o}:y.isValidElement(t)?{title:t}:typeof t=="object"?Object.assign({title:r??o},t):{title:t},[t,r,o]),xLe=OLe;var NLe=globalThis&&globalThis.__rest||function(t,r){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&r.indexOf(s)<0&&(o[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(t);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(t,s[c])&&(o[s[c]]=t[s[c]]);return o};const PLe=y.forwardRef((t,r)=>{const{prefixCls:o,component:s="article",className:c,rootClassName:d,setContentRef:f,children:v,direction:g,style:_}=t,C=NLe(t,["prefixCls","component","className","rootClassName","setContentRef","children","direction","style"]),{getPrefixCls:b,direction:T,className:A,style:I}=Ec("typography"),N=g??T,P=f?nl(r,f):r,D=b("typography",o),[x,L,M]=iZ(D),F=Ke(D,A,{[`${D}-rtl`]:N==="rtl"},c,d,L,M),V=Object.assign(Object.assign({},I),_);return x(y.createElement(s,Object.assign({className:F,style:V,ref:P},C),v))}),oZ=PLe;function bW(t){return t===!1?[!1,!1]:Array.isArray(t)?t:[t]}function cx(t,r,o){return t===!0||t===void 0?r:t||o&&r}function DLe(t){const r=document.createElement("em");t.appendChild(r);const o=t.getBoundingClientRect(),s=r.getBoundingClientRect();return t.removeChild(r),o.left>s.left||s.right>o.right||o.top>s.top||s.bottom>o.bottom}const gL=t=>["string","number"].includes(typeof t),LLe=t=>{let{prefixCls:r,copied:o,locale:s,iconOnly:c,tooltips:d,icon:f,tabIndex:v,onCopy:g,loading:_}=t;const C=bW(d),b=bW(f),{copied:T,copy:A}=s??{},I=o?T:A,N=cx(C[o?1:0],I),P=typeof N=="string"?N:I;return y.createElement(rE,{title:N},y.createElement("button",{type:"button",className:Ke(`${r}-copy`,{[`${r}-copy-success`]:o,[`${r}-copy-icon-only`]:c}),onClick:g,"aria-label":P,tabIndex:v},o?cx(b[1],y.createElement(XJ,null),!0):cx(b[0],_?y.createElement(pT,null):y.createElement(q2e,null),!0)))},kLe=LLe,By=y.forwardRef((t,r)=>{let{style:o,children:s}=t;const c=y.useRef(null);return y.useImperativeHandle(r,()=>({isExceed:()=>{const d=c.current;return d.scrollHeight>d.clientHeight},getHeight:()=>c.current.clientHeight})),y.createElement("span",{"aria-hidden":!0,ref:c,style:Object.assign({position:"fixed",display:"block",left:0,top:0,pointerEvents:"none",backgroundColor:"rgba(255, 0, 0, 0.65)"},o)},s)}),MLe=t=>t.reduce((r,o)=>r+(gL(o)?String(o).length:1),0);function TW(t,r){let o=0;const s=[];for(let c=0;c<t.length;c+=1){if(o===r)return s;const d=t[c],v=gL(d)?String(d).length:1,g=o+v;if(g>r){const _=r-o;return s.push(String(d).slice(0,_)),s}s.push(d),o=g}return t}const lx=0,ux=1,dx=2,hx=3,RW=4,Vy={display:"-webkit-box",overflow:"hidden",WebkitBoxOrient:"vertical"};function FLe(t){const{enableMeasure:r,width:o,text:s,children:c,rows:d,expanded:f,miscDeps:v,onEllipsis:g}=t,_=y.useMemo(()=>Qc(s),[s]),C=y.useMemo(()=>MLe(_),[s]),b=y.useMemo(()=>c(_,!1),[s]),[T,A]=y.useState(null),I=y.useRef(null),N=y.useRef(null),P=y.useRef(null),D=y.useRef(null),x=y.useRef(null),[L,M]=y.useState(!1),[F,V]=y.useState(lx),[$,z]=y.useState(0),[K,G]=y.useState(null);Rr(()=>{V(r&&o&&C?ux:lx)},[o,s,d,r,_]),Rr(()=>{var ce,ge,oe,ae;if(F===ux){V(dx);const ie=N.current&&getComputedStyle(N.current).whiteSpace;G(ie)}else if(F===dx){const ie=!!(!((ce=P.current)===null||ce===void 0)&&ce.isExceed());V(ie?hx:RW),A(ie?[0,C]:null),M(ie);const ve=((ge=P.current)===null||ge===void 0?void 0:ge.getHeight())||0,me=d===1?0:((oe=D.current)===null||oe===void 0?void 0:oe.getHeight())||0,le=((ae=x.current)===null||ae===void 0?void 0:ae.getHeight())||0,de=Math.max(ve,me+le);z(de+1),g(ie)}},[F]);const J=T?Math.ceil((T[0]+T[1])/2):0;Rr(()=>{var ce;const[ge,oe]=T||[0,0];if(ge!==oe){const ie=(((ce=I.current)===null||ce===void 0?void 0:ce.getHeight())||0)>$;let ve=J;oe-ge===1&&(ve=ie?ge:oe),A(ie?[ge,ve]:[ve,oe])}},[T,J]);const ne=y.useMemo(()=>{if(!r)return c(_,!1);if(F!==hx||!T||T[0]!==T[1]){const ce=c(_,!1);return[RW,lx].includes(F)?ce:y.createElement("span",{style:Object.assign(Object.assign({},Vy),{WebkitLineClamp:d})},ce)}return c(f?_:TW(_,T[0]),L)},[f,F,T,_].concat(Et(v))),te={width:o,margin:0,padding:0,whiteSpace:K==="nowrap"?"normal":"inherit"};return y.createElement(y.Fragment,null,ne,F===dx&&y.createElement(y.Fragment,null,y.createElement(By,{style:Object.assign(Object.assign(Object.assign({},te),Vy),{WebkitLineClamp:d}),ref:P},b),y.createElement(By,{style:Object.assign(Object.assign(Object.assign({},te),Vy),{WebkitLineClamp:d-1}),ref:D},b),y.createElement(By,{style:Object.assign(Object.assign(Object.assign({},te),Vy),{WebkitLineClamp:1}),ref:x},c([],!0))),F===hx&&T&&T[0]!==T[1]&&y.createElement(By,{style:Object.assign(Object.assign({},te),{top:400}),ref:I},c(TW(_,J),!0)),F===ux&&y.createElement("span",{style:{whiteSpace:"inherit"},ref:N}))}const ULe=t=>{let{enableEllipsis:r,isEllipsis:o,children:s,tooltipProps:c}=t;return!(c!=null&&c.title)||!r?s:y.createElement(rE,Object.assign({open:o?void 0:!1},c),s)},BLe=ULe;var VLe=globalThis&&globalThis.__rest||function(t,r){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&r.indexOf(s)<0&&(o[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(t);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(t,s[c])&&(o[s[c]]=t[s[c]]);return o};function jLe(t,r){let{mark:o,code:s,underline:c,delete:d,strong:f,keyboard:v,italic:g}=t,_=r;function C(b,T){T&&(_=y.createElement(b,{},_))}return C("strong",f),C("u",c),C("del",d),C("code",s),C("mark",o),C("kbd",v),C("i",g),_}const $Le="...",HLe=y.forwardRef((t,r)=>{var o;const{prefixCls:s,className:c,style:d,type:f,disabled:v,children:g,ellipsis:_,editable:C,copyable:b,component:T,title:A}=t,I=VLe(t,["prefixCls","className","style","type","disabled","children","ellipsis","editable","copyable","component","title"]),{getPrefixCls:N,direction:P}=y.useContext(wr),[D]=Dm("Text"),x=y.useRef(null),L=y.useRef(null),M=N("typography",s),F=ia(I,["mark","code","delete","underline","strong","keyboard","italic"]),[V,$]=sx(C),[z,K]=Sa(!1,{value:$.editing}),{triggerType:G=["icon"]}=$,J=mt=>{var Pt;mt&&((Pt=$.onStart)===null||Pt===void 0||Pt.call($)),K(mt)},ne=ALe(z);Rr(()=>{var mt;!z&&ne&&((mt=L.current)===null||mt===void 0||mt.focus())},[z]);const te=mt=>{mt==null||mt.preventDefault(),J(!0)},ce=mt=>{var Pt;(Pt=$.onChange)===null||Pt===void 0||Pt.call($,mt),J(!1)},ge=()=>{var mt;(mt=$.onCancel)===null||mt===void 0||mt.call($),J(!1)},[oe,ae]=sx(b),{copied:ie,copyLoading:ve,onClick:me}=wLe({copyConfig:ae,children:g}),[le,de]=y.useState(!1),[Ee,se]=y.useState(!1),[Te,we]=y.useState(!1),[Le,Ie]=y.useState(!1),[De,Ye]=y.useState(!0),[Me,Oe]=sx(_,{expandable:!1,symbol:mt=>mt?D==null?void 0:D.collapse:D==null?void 0:D.expand}),[$e,tt]=Sa(Oe.defaultExpanded||!1,{value:Oe.expanded}),je=Me&&(!$e||Oe.expandable==="collapsible"),{rows:ke=1}=Oe,dt=y.useMemo(()=>je&&(Oe.suffix!==void 0||Oe.onEllipsis||Oe.expandable||V||oe),[je,Oe,V,oe]);Rr(()=>{Me&&!dt&&(de(hz("webkitLineClamp")),se(hz("textOverflow")))},[dt,Me]);const[Ze,ut]=y.useState(je),Tt=y.useMemo(()=>dt?!1:ke===1?Ee:le,[dt,Ee,le]);Rr(()=>{ut(Tt&&je)},[Tt,je]);const pt=je&&(Ze?Le:Te),ht=je&&ke===1&&Ze,qe=je&&ke>1&&Ze,Je=(mt,Pt)=>{var gn;tt(Pt.expanded),(gn=Oe.onExpand)===null||gn===void 0||gn.call(Oe,mt,Pt)},[Ct,Nt]=y.useState(0),Ot=mt=>{let{offsetWidth:Pt}=mt;Nt(Pt)},on=mt=>{var Pt;we(mt),Te!==mt&&((Pt=Oe.onEllipsis)===null||Pt===void 0||Pt.call(Oe,mt))};y.useEffect(()=>{const mt=x.current;if(Me&&Ze&&mt){const Pt=DLe(mt);Le!==Pt&&Ie(Pt)}},[Me,Ze,g,qe,De,Ct]),y.useEffect(()=>{const mt=x.current;if(typeof IntersectionObserver>"u"||!mt||!Ze||!je)return;const Pt=new IntersectionObserver(()=>{Ye(!!mt.offsetParent)});return Pt.observe(mt),()=>{Pt.disconnect()}},[Ze,je]);const Vt=xLe(Oe.tooltip,$.text,g),kt=y.useMemo(()=>{if(!(!Me||Ze))return[$.text,g,A,Vt.title].find(gL)},[Me,Ze,A,Vt.title,pt]);if(z)return y.createElement(gLe,{value:(o=$.text)!==null&&o!==void 0?o:typeof g=="string"?g:"",onSave:ce,onCancel:ge,onEnd:$.onEnd,prefixCls:M,className:c,style:d,direction:P,component:T,maxLength:$.maxLength,autoSize:$.autoSize,enterIcon:$.enterIcon});const Kt=()=>{const{expandable:mt,symbol:Pt}=Oe;return mt?y.createElement("button",{type:"button",key:"expand",className:`${M}-${$e?"collapse":"expand"}`,onClick:gn=>Je(gn,{expanded:!$e}),"aria-label":$e?D.collapse:D==null?void 0:D.expand},typeof Pt=="function"?Pt($e):Pt):null},Zt=()=>{if(!V)return;const{icon:mt,tooltip:Pt,tabIndex:gn}=$,Mn=Qc(Pt)[0]||(D==null?void 0:D.edit),pi=typeof Mn=="string"?Mn:"";return G.includes("icon")?y.createElement(rE,{key:"edit",title:Pt===!1?"":Mn},y.createElement("button",{type:"button",ref:L,className:`${M}-edit`,onClick:te,"aria-label":pi,tabIndex:gn},mt||y.createElement(eLe,{role:"button"}))):null},Ft=()=>oe?y.createElement(kLe,Object.assign({key:"copy"},ae,{prefixCls:M,copied:ie,locale:D,onCopy:me,loading:ve,iconOnly:g==null})):null,_t=mt=>[mt&&Kt(),Zt(),Ft()],At=mt=>[mt&&!$e&&y.createElement("span",{"aria-hidden":!0,key:"ellipsis"},$Le),Oe.suffix,_t(mt)];return y.createElement(Eu,{onResize:Ot,disabled:!je},mt=>y.createElement(BLe,{tooltipProps:Vt,enableEllipsis:je,isEllipsis:pt},y.createElement(oZ,Object.assign({className:Ke({[`${M}-${f}`]:f,[`${M}-disabled`]:v,[`${M}-ellipsis`]:Me,[`${M}-ellipsis-single-line`]:ht,[`${M}-ellipsis-multiple-line`]:qe},c),prefixCls:s,style:Object.assign(Object.assign({},d),{WebkitLineClamp:qe?ke:void 0}),component:T,ref:nl(mt,x,r),direction:P,onClick:G.includes("text")?te:void 0,"aria-label":kt==null?void 0:kt.toString(),title:A},F),y.createElement(FLe,{enableMeasure:je&&!Ze,text:g,rows:ke,width:Ct,onEllipsis:on,expanded:$e,miscDeps:[ie,$e,ve,V,oe,D]},(Pt,gn)=>jLe(t,y.createElement(y.Fragment,null,Pt.length>0&&gn&&!$e&&kt?y.createElement("span",{key:"show-content","aria-hidden":!0},Pt):Pt,At(gn)))))))}),PT=HLe;var zLe=globalThis&&globalThis.__rest||function(t,r){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&r.indexOf(s)<0&&(o[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(t);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(t,s[c])&&(o[s[c]]=t[s[c]]);return o};const WLe=y.forwardRef((t,r)=>{var{ellipsis:o,rel:s}=t,c=zLe(t,["ellipsis","rel"]);const d=Object.assign(Object.assign({},c),{rel:s===void 0&&c.target==="_blank"?"noopener noreferrer":s});return delete d.navigate,y.createElement(PT,Object.assign({},d,{ref:r,ellipsis:!!o,component:"a"}))}),GLe=WLe,KLe=y.forwardRef((t,r)=>y.createElement(PT,Object.assign({ref:r},t,{component:"div"}))),YLe=KLe;var qLe=globalThis&&globalThis.__rest||function(t,r){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&r.indexOf(s)<0&&(o[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(t);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(t,s[c])&&(o[s[c]]=t[s[c]]);return o};const XLe=(t,r)=>{var{ellipsis:o}=t,s=qLe(t,["ellipsis"]);const c=y.useMemo(()=>o&&typeof o=="object"?ia(o,["expandable","rows"]):o,[o]);return y.createElement(PT,Object.assign({ref:r},s,{ellipsis:c,component:"span"}))},JLe=y.forwardRef(XLe);var QLe=globalThis&&globalThis.__rest||function(t,r){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&r.indexOf(s)<0&&(o[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(t);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(t,s[c])&&(o[s[c]]=t[s[c]]);return o};const ZLe=[1,2,3,4,5],eke=y.forwardRef((t,r)=>{const{level:o=1}=t,s=QLe(t,["level"]),c=ZLe.includes(o)?`h${o}`:"h1";return y.createElement(PT,Object.assign({ref:r},s,{component:c}))}),tke=eke,cE=oZ;cE.Text=JLe;cE.Link=GLe;cE.Title=tke;cE.Paragraph=YLe;const Vo=cE;function aZ(t){var r,o,s="";if(typeof t=="string"||typeof t=="number")s+=t;else if(typeof t=="object")if(Array.isArray(t))for(r=0;r<t.length;r++)t[r]&&(o=aZ(t[r]))&&(s&&(s+=" "),s+=o);else for(r in t)t[r]&&(s&&(s+=" "),s+=r);return s}function vL(){for(var t,r,o=0,s="";o<arguments.length;)(t=arguments[o++])&&(r=aZ(t))&&(s&&(s+=" "),s+=r);return s}const nke=y.forwardRef(({className:t,children:r},o)=>fe.jsx("div",{className:vL(t,"b-1 b-solid b-coolgray-6 rd of-hidden relative"),ref:o,style:{width:288,height:216},children:r})),hc=Object.assign(y.forwardRef(({className:t,children:r},o)=>fe.jsx("div",{className:vL(t,"flex-1 p-10 p-t-4 flex gap-5"),ref:o,children:r})),{Item:nke}),Bi=({children:t})=>fe.jsx("div",{className:"h-screen flex flex-col",children:t}),mu=({children:t})=>fe.jsx("samp",{className:"z-2 inline-flex items-center gap-1 absolute bottom-0 bg-black c-white px-1 text-sm",children:t}),jy=14,$y=8,fx=8,px=4;function rke({volumeLevel:t=0,noise:r=.075,...o}){const[s,c]=y.useState(0);return y.useEffect(()=>{if(t&&r){const d=Math.max(0,Math.min(1,r)),f=setInterval(()=>{c(t+Math.random()*d*(Math.random()>.5?1:-1))},50);return()=>clearInterval(f)}},[t,r]),fe.jsxs("svg",{fill:"none",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",...o,children:[fe.jsx("defs",{children:fe.jsx("clipPath",{id:"icon-mic-v-clip",children:fe.jsx("rect",{height:jy,rx:$y/2,width:$y,x:fx,y:px})})}),fe.jsx("path",{d:"M0 0h24v24H0z",fill:"#999CA3",opacity:".01"}),fe.jsx("rect",{clipPath:"url(#icon-mic-v-clip)",fill:"#fff",height:jy,width:$y,x:fx,y:px}),fe.jsx("path",{d:"M4 16.625h2v-1.25H4v1.25Zm6 4h4v-1.25h-4v1.25Zm8-4h2v-1.25h-2v1.25Zm-4 4A4.625 4.625 0 0 0 18.625 16h-1.25A3.375 3.375 0 0 1 14 19.375v1.25ZM5.375 16A4.625 4.625 0 0 0 10 20.625v-1.25A3.375 3.375 0 0 1 6.625 16h-1.25Z",fill:"#fff"}),fe.jsx("g",{clipPath:"url(#icon-mic-v-clip)",children:fe.jsx("rect",{fill:"#44AD00",height:jy*2,style:{transform:`translateY(${(1-s)*jy}px)`,transition:"transform .1s"},width:$y,x:fx,y:px})})]})}const ike=y.memo(function(r){return fe.jsxs("svg",{fill:"none",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",...r,children:[fe.jsx("path",{d:"m5 5 14 14",stroke:"rgb(225, 225, 225, 0.35)",strokeLinejoin:"round",strokeWidth:"1.25"}),fe.jsx("path",{clipRule:"evenodd",d:"M19.277 16.625H20v-1.25h-1.973l1.25 1.25Zm-3.239 2.065.89.89a4.602 4.602 0 0 1-2.716 1.04l-.212.005h-4a4.626 4.626 0 0 1-4.55-3.787l-.033-.213H4v-1.25h2c.345 0 .625.28.625.625a3.375 3.375 0 0 0 3.19 3.37l.185.005h4a3.36 3.36 0 0 0 2.038-.685Zm.587-4.717V8a4.625 4.625 0 0 0-8.5-2.526l.911.91a3.374 3.374 0 0 1 6.281.991H14v1.25h1.375v.75H14v1.25h1.375v.75h-1.348l1.25 1.25h.098v.098l1.25 1.25Zm-2.587 2.717.89.89A4.625 4.625 0 0 1 7.375 14v-3.973l1.25 1.25v.098h.098l1.25 1.25H8.625V14a3.375 3.375 0 0 0 5.413 2.69Z",fill:"rgb(225, 225, 225, 0.35)",fillRule:"evenodd"})]})}),oke=y.memo(function(r){return fe.jsxs("svg",{fill:"none",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",...r,children:[fe.jsx("circle",{cx:"12",cy:"11",r:"7",stroke:"#fff",strokeLinejoin:"round",strokeWidth:"1.25"}),fe.jsx("circle",{cx:"12",cy:"11",r:"3",stroke:"#fff",strokeLinejoin:"round",strokeWidth:"1.25"}),fe.jsx("circle",{cx:"14.625",cy:"6.625",fill:"#fff",r:".625"}),fe.jsx("path",{d:"M7 18.25a8.004 8.004 0 0 0 10 0",stroke:"#fff",strokeLinejoin:"round",strokeWidth:"1.25"})]})}),ake=y.memo(function(r){return fe.jsxs("svg",{fill:"none",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",...r,children:[fe.jsx("path",{d:"m5 5 14 14",stroke:"rgb(225, 225, 225, 0.35)",strokeLinejoin:"round",strokeWidth:"1.25"}),fe.jsx("path",{clipRule:"evenodd",d:"m15.72 18.373.91.909a8.63 8.63 0 0 1-9.788-.364l-.232-.18.78-.976a7.38 7.38 0 0 0 8.33.61Zm2.434-2.87A7.625 7.625 0 0 0 7.497 4.846l.897.896a6.375 6.375 0 0 1 8.864 8.864l.896.897Zm-3.857 1.446.952.951A7.625 7.625 0 0 1 5.1 7.751l.951.952a6.375 6.375 0 0 0 8.246 8.246Zm.956-4.348a3.625 3.625 0 0 0-4.854-4.854l.964.964a2.378 2.378 0 0 1 2.926 2.926l.964.964Zm-.628-5.351a.625.625 0 1 0 0-1.25.625.625 0 0 0 0 1.25Z",fill:"rgb(225, 225, 225, 0.35)",fillRule:"evenodd"})]})});function ske({track:t,deviceId:r,...o}){const s=Tb(t);return y.useEffect(()=>{s&&r!=null&&s.setDevice(r).catch(console.warn)},[r,s]),fe.jsx(wb,{track:t,...o})}function cke({track:t,deviceId:r,videoPlayerConfig:o,...s}){const c=Tb(t);return y.useEffect(()=>{c&&r!=null&&c.setDevice(r).catch(console.warn)},[r,c]),fe.jsx(Hv,{track:t,videoPlayerConfig:o,...s})}function EL({micOn:t,cameraOn:r,audioTrack:o,videoTrack:s,playAudio:c=!1,playVideo:d,micDeviceId:f,cameraDeviceId:v,volume:g,cover:_,children:C,videoPlayerConfig:b,style:T,...A}){const I=wm(Ib,T);return d=d??!!r,c=c??!!t,fe.jsxs("div",{...A,style:I,children:[fe.jsx(cke,{deviceId:v,disabled:!r,play:d,track:s,videoPlayerConfig:b}),fe.jsx(ske,{deviceId:f,disabled:!t,play:c,track:o,volume:g}),_&&!r&&fe.jsx(Ab,{cover:_}),fe.jsx("div",{style:$v,children:C})]})}function lE({track:t,playVideo:r,cover:o,client:s,style:c,children:d,videoPlayerConfig:f,...v}){var b,T;const g=wm(Ib,c),C=(T=(b=Os(s).remoteUsers)==null?void 0:b.find(A=>A.uid===(t==null?void 0:t.getUserId())))==null?void 0:T.hasVideo;return r=r??C,fe.jsxs("div",{...v,style:g,children:[fe.jsx(ID,{play:r,track:t,videoPlayerConfig:f}),o&&!r&&fe.jsx(Ab,{cover:o}),fe.jsx("div",{style:$v,children:d})]})}const _L=({published:t,total:r})=>fe.jsx("div",{className:"p-4 text-xl",children:fe.jsxs("span",{className:"inline-flex items-center gap-1 py-2 px-3 rd b-1 b-solid",children:[fe.jsx("i",{className:"i-lucide-users"}),fe.jsxs("samp",{className:"text-base",children:[t,"/",r]})]})});var SL={exports:{}};SL.exports;(function(t){(function(r,o,s){function c(g){var _=this,C=v();_.next=function(){var b=2091639*_.s0+_.c*23283064365386963e-26;return _.s0=_.s1,_.s1=_.s2,_.s2=b-(_.c=b|0)},_.c=1,_.s0=C(" "),_.s1=C(" "),_.s2=C(" "),_.s0-=C(g),_.s0<0&&(_.s0+=1),_.s1-=C(g),_.s1<0&&(_.s1+=1),_.s2-=C(g),_.s2<0&&(_.s2+=1),C=null}function d(g,_){return _.c=g.c,_.s0=g.s0,_.s1=g.s1,_.s2=g.s2,_}function f(g,_){var C=new c(g),b=_&&_.state,T=C.next;return T.int32=function(){return C.next()*4294967296|0},T.double=function(){return T()+(T()*2097152|0)*11102230246251565e-32},T.quick=T,b&&(typeof b=="object"&&d(b,C),T.state=function(){return d(C,{})}),T}function v(){var g=4022871197,_=function(C){C=String(C);for(var b=0;b<C.length;b++){g+=C.charCodeAt(b);var T=.02519603282416938*g;g=T>>>0,T-=g,T*=g,g=T>>>0,T-=g,g+=T*4294967296}return(g>>>0)*23283064365386963e-26};return _}o&&o.exports?o.exports=f:s&&s.amd?s(function(){return f}):this.alea=f})(On,t,!1)})(SL);var lke=SL.exports,yL={exports:{}};yL.exports;(function(t){(function(r,o,s){function c(v){var g=this,_="";g.x=0,g.y=0,g.z=0,g.w=0,g.next=function(){var b=g.x^g.x<<11;return g.x=g.y,g.y=g.z,g.z=g.w,g.w^=g.w>>>19^b^b>>>8},v===(v|0)?g.x=v:_+=v;for(var C=0;C<_.length+64;C++)g.x^=_.charCodeAt(C)|0,g.next()}function d(v,g){return g.x=v.x,g.y=v.y,g.z=v.z,g.w=v.w,g}function f(v,g){var _=new c(v),C=g&&g.state,b=function(){return(_.next()>>>0)/4294967296};return b.double=function(){do var T=_.next()>>>11,A=(_.next()>>>0)/4294967296,I=(T+A)/(1<<21);while(I===0);return I},b.int32=_.next,b.quick=b,C&&(typeof C=="object"&&d(C,_),b.state=function(){return d(_,{})}),b}o&&o.exports?o.exports=f:s&&s.amd?s(function(){return f}):this.xor128=f})(On,t,!1)})(yL);var uke=yL.exports,CL={exports:{}};CL.exports;(function(t){(function(r,o,s){function c(v){var g=this,_="";g.next=function(){var b=g.x^g.x>>>2;return g.x=g.y,g.y=g.z,g.z=g.w,g.w=g.v,(g.d=g.d+362437|0)+(g.v=g.v^g.v<<4^(b^b<<1))|0},g.x=0,g.y=0,g.z=0,g.w=0,g.v=0,v===(v|0)?g.x=v:_+=v;for(var C=0;C<_.length+64;C++)g.x^=_.charCodeAt(C)|0,C==_.length&&(g.d=g.x<<10^g.x>>>4),g.next()}function d(v,g){return g.x=v.x,g.y=v.y,g.z=v.z,g.w=v.w,g.v=v.v,g.d=v.d,g}function f(v,g){var _=new c(v),C=g&&g.state,b=function(){return(_.next()>>>0)/4294967296};return b.double=function(){do var T=_.next()>>>11,A=(_.next()>>>0)/4294967296,I=(T+A)/(1<<21);while(I===0);return I},b.int32=_.next,b.quick=b,C&&(typeof C=="object"&&d(C,_),b.state=function(){return d(_,{})}),b}o&&o.exports?o.exports=f:s&&s.amd?s(function(){return f}):this.xorwow=f})(On,t,!1)})(CL);var dke=CL.exports,bL={exports:{}};bL.exports;(function(t){(function(r,o,s){function c(v){var g=this;g.next=function(){var C=g.x,b=g.i,T,A;return T=C[b],T^=T>>>7,A=T^T<<24,T=C[b+1&7],A^=T^T>>>10,T=C[b+3&7],A^=T^T>>>3,T=C[b+4&7],A^=T^T<<7,T=C[b+7&7],T=T^T<<13,A^=T^T<<9,C[b]=A,g.i=b+1&7,A};function _(C,b){var T,A=[];if(b===(b|0))A[0]=b;else for(b=""+b,T=0;T<b.length;++T)A[T&7]=A[T&7]<<15^b.charCodeAt(T)+A[T+1&7]<<13;for(;A.length<8;)A.push(0);for(T=0;T<8&&A[T]===0;++T);for(T==8?A[7]=-1:A[T],C.x=A,C.i=0,T=256;T>0;--T)C.next()}_(g,v)}function d(v,g){return g.x=v.x.slice(),g.i=v.i,g}function f(v,g){v==null&&(v=+new Date);var _=new c(v),C=g&&g.state,b=function(){return(_.next()>>>0)/4294967296};return b.double=function(){do var T=_.next()>>>11,A=(_.next()>>>0)/4294967296,I=(T+A)/(1<<21);while(I===0);return I},b.int32=_.next,b.quick=b,C&&(C.x&&d(C,_),b.state=function(){return d(_,{})}),b}o&&o.exports?o.exports=f:s&&s.amd?s(function(){return f}):this.xorshift7=f})(On,t,!1)})(bL);var hke=bL.exports,TL={exports:{}};TL.exports;(function(t){(function(r,o,s){function c(v){var g=this;g.next=function(){var C=g.w,b=g.X,T=g.i,A,I;return g.w=C=C+1640531527|0,I=b[T+34&127],A=b[T=T+1&127],I^=I<<13,A^=A<<17,I^=I>>>15,A^=A>>>12,I=b[T]=I^A,g.i=T,I+(C^C>>>16)|0};function _(C,b){var T,A,I,N,P,D=[],x=128;for(b===(b|0)?(A=b,b=null):(b=b+"\0",A=0,x=Math.max(x,b.length)),I=0,N=-32;N<x;++N)b&&(A^=b.charCodeAt((N+32)%b.length)),N===0&&(P=A),A^=A<<10,A^=A>>>15,A^=A<<4,A^=A>>>13,N>=0&&(P=P+1640531527|0,T=D[N&127]^=A+P,I=T==0?I+1:0);for(I>=128&&(D[(b&&b.length||0)&127]=-1),I=127,N=4*128;N>0;--N)A=D[I+34&127],T=D[I=I+1&127],A^=A<<13,T^=T<<17,A^=A>>>15,T^=T>>>12,D[I]=A^T;C.w=P,C.X=D,C.i=I}_(g,v)}function d(v,g){return g.i=v.i,g.w=v.w,g.X=v.X.slice(),g}function f(v,g){v==null&&(v=+new Date);var _=new c(v),C=g&&g.state,b=function(){return(_.next()>>>0)/4294967296};return b.double=function(){do var T=_.next()>>>11,A=(_.next()>>>0)/4294967296,I=(T+A)/(1<<21);while(I===0);return I},b.int32=_.next,b.quick=b,C&&(C.X&&d(C,_),b.state=function(){return d(_,{})}),b}o&&o.exports?o.exports=f:s&&s.amd?s(function(){return f}):this.xor4096=f})(On,t,!1)})(TL);var fke=TL.exports,RL={exports:{}};RL.exports;(function(t){(function(r,o,s){function c(v){var g=this,_="";g.next=function(){var b=g.b,T=g.c,A=g.d,I=g.a;return b=b<<25^b>>>7^T,T=T-A|0,A=A<<24^A>>>8^I,I=I-b|0,g.b=b=b<<20^b>>>12^T,g.c=T=T-A|0,g.d=A<<16^T>>>16^I,g.a=I-b|0},g.a=0,g.b=0,g.c=-1640531527,g.d=1367130551,v===Math.floor(v)?(g.a=v/4294967296|0,g.b=v|0):_+=v;for(var C=0;C<_.length+20;C++)g.b^=_.charCodeAt(C)|0,g.next()}function d(v,g){return g.a=v.a,g.b=v.b,g.c=v.c,g.d=v.d,g}function f(v,g){var _=new c(v),C=g&&g.state,b=function(){return(_.next()>>>0)/4294967296};return b.double=function(){do var T=_.next()>>>11,A=(_.next()>>>0)/4294967296,I=(T+A)/(1<<21);while(I===0);return I},b.int32=_.next,b.quick=b,C&&(typeof C=="object"&&d(C,_),b.state=function(){return d(_,{})}),b}o&&o.exports?o.exports=f:s&&s.amd?s(function(){return f}):this.tychei=f})(On,t,!1)})(RL);var pke=RL.exports,sZ={exports:{}};(function(t){(function(r,o,s){var c=256,d=6,f=52,v="random",g=s.pow(c,d),_=s.pow(2,f),C=_*2,b=c-1,T;function A(M,F,V){var $=[];F=F==!0?{entropy:!0}:F||{};var z=D(P(F.entropy?[M,L(o)]:M??x(),3),$),K=new I($),G=function(){for(var J=K.g(d),ne=g,te=0;J<_;)J=(J+te)*c,ne*=c,te=K.g(1);for(;J>=C;)J/=2,ne/=2,te>>>=1;return(J+te)/ne};return G.int32=function(){return K.g(4)|0},G.quick=function(){return K.g(4)/4294967296},G.double=G,D(L(K.S),o),(F.pass||V||function(J,ne,te,ce){return ce&&(ce.S&&N(ce,K),J.state=function(){return N(K,{})}),te?(s[v]=J,ne):J})(G,z,"global"in F?F.global:this==s,F.state)}function I(M){var F,V=M.length,$=this,z=0,K=$.i=$.j=0,G=$.S=[];for(V||(M=[V++]);z<c;)G[z]=z++;for(z=0;z<c;z++)G[z]=G[K=b&K+M[z%V]+(F=G[z])],G[K]=F;($.g=function(J){for(var ne,te=0,ce=$.i,ge=$.j,oe=$.S;J--;)ne=oe[ce=b&ce+1],te=te*c+oe[b&(oe[ce]=oe[ge=b&ge+ne])+(oe[ge]=ne)];return $.i=ce,$.j=ge,te})(c)}function N(M,F){return F.i=M.i,F.j=M.j,F.S=M.S.slice(),F}function P(M,F){var V=[],$=typeof M,z;if(F&&$=="object")for(z in M)try{V.push(P(M[z],F-1))}catch{}return V.length?V:$=="string"?M:M+"\0"}function D(M,F){for(var V=M+"",$,z=0;z<V.length;)F[b&z]=b&($^=F[b&z]*19)+V.charCodeAt(z++);return L(F)}function x(){try{var M;return T&&(M=T.randomBytes)||(M=new Uint8Array(c),(r.crypto||r.msCrypto).getRandomValues(M)),L(M)}catch{var F=r.navigator,V=F&&F.plugins;return[+new Date,r,V,r.screen,L(o)]}}function L(M){return String.fromCharCode.apply(0,M)}D(s.random(),o),t.exports?t.exports=A:s["seed"+v]=A})(typeof self<"u"?self:On,[],Math)})(sZ);var mke=sZ.exports,gke=lke,vke=uke,Eke=dke,_ke=hke,Ske=fke,yke=pke,rf=mke;rf.alea=gke;rf.xor128=vke;rf.xorwow=Eke;rf.xorshift7=_ke;rf.xor4096=Ske;rf.tychei=yke;var Cke=rf;const cZ=Od(Cke);let lZ=cZ();function bke(){return lZ()}function wW(t){lZ=cZ(t)}function uZ(t,r){const o=Array.isArray(t)?()=>Tke(t):t;return(r==null?void 0:r.length)===void 0?o(0):Array.from({length:r.length},(s,c)=>o(c))}function Tke(t){return t[Math.floor(bke()*t.length)]}function Rke(t,r){return uZ(t,r)}var IW={withAccents:{male:["Adrián","Ægir","Álvaro","André","Andrés","Árni","Asbjørn","Björn","César","Daníel","Davíð","Emílio","Fañch","François","František","Gísli","Götz","Guðjón","Guðmundur","Günter","Halldór","Hans-Jörg","Hans-Jürgen","Hüseyin","Iñaki","János","Jesús","Jiří","Jóhann","Jóhannes","Jokūbas","Jón","José","Jörn","Julião","Jürgen","Kristján","Maël","Magnús","Mathéo","Mátyás","Michał","Noël","Nuñez","Ólafur","Óscar","Øyvind","Páll","Paweł","Pétur","Ramón","Raúl","René","Ruairí","Rubén","Seán","Sérgio","Sigurður","Sönke","Stefán","Tomáš","Þorsteinn"],female:["Ædel","Agnès","Alícia","Änne","Antónia","Ásta","Auður","Cäcilia","Chloë","Claúdia","Dörte","Elín","Elísabet","Eliška","Františka","Glória","Grażyna","Guðbjörg","Guðný","Guðrún","Henriëtte","Ingibjörg","Íris","Jóhanna","Jóna","Júlia","Käte","Katrín","Kolbrún","Kristín","KŠthe","Letícia","Lídia","Lúcia","Małgorzata","Margrét","María","Mónica","Natália","Ólöf","Patrícia","Ragnheiður","Renée","Ružena","Siân","Sigríður","Sigrún","Sílvia","Sørina","Věra","Virgínia","Zoë","Þóra","Þórunn"]},withoutAccents:{male:["Abdul","Abdullahi","Abubakar","Adam","Adamu","Adiy","Ahmad","Ajay","Akira","Alan","Alberto","Alejandro","Aleksander","Aleksandr","Aleksey","Alex","Alexander","Alexey","Ali","Aliyu","Aminu","Amit","Amiyr","Amiyt","Amnuai","Amphon","Anah","Anan","Andreas","Andrew","Andrey","Andri","Andries","Andrzej","Anil","Anthony","Anton","Antonio","Arnar","Artur","Artyom","Arun","Ashok","Atli","Avraham","Bartosz","Bello","Bernd","Bin","Birgir","Bjarni","Blessing","Bongani","Brian","Bunmi","Carlos","Carol","Chan","Chao","Charles","Charoen","Chen","Cheng","Christian","Christopher","Colin","Daniel","Daniyel","Dariusz","David","Denis","Dennis","Diego","Dieter","Dilip","Dinesh","Dmitriy","Dmitry","Einar","Eliyahu","Emmanuel","Evgeniy","Fernando","Fran","Francis","Francisco","Francisco-Javier","Frank","Franz","Gang","Gareth","Gary","George","Gerhard","Graham","Grzegorz","Gunnar","Guy","Haim","Haiyan","Hans","Hans-Ulrich","Haruna","Hassan","Heike","Heinz","Helgi","Helmut","Hendrik","Herbert","Hideo","Hiromi","Hiroshi","Hong","Horst","Hui","Ian","Ibrahim","Idris","Igor","Ilya","Isa","Isaac","Isah","Ivan","Jabulani","Jacek","Jacobus","Jakub","James","Jan","Janusz","Javier","Jean","Jerzy","Jesus","Jason","Jianguo","Jianhua","Jianjun","Jianping","Jin","Joan","Johan","Johannes","John","Jonathan","Jorge","Jose","Jose-Antonio","Jose-Luis","Jose-Manuel","Jose-Maria","Josef","Joseph","Joyce","Juan","Kabiru","Kai","Kamil","Karen","Karl","Karl-Heinz","Katsumi","Kazuo","Kelvin","Kenji","Kenneth","Kevin","Kiran","Kirill","Kiyoshi","Kjartan","Klaus","Ko","Koichi","Koji","Konstantin","Koshi","Krishna","Kristinn","Krzysztof","Kun","Lakshmi","Lan","Laxmi","Lei","Li","Lihua","Lijun","Lilian","Lin","Ling","Liping","Liyor","Luis","Lukasz","Maciej","Mahmood","Maksim","Manfred","Manoj","Manuel","Marcin","Mardkhay","Marek","Mariusz","Mark","Martin","Masami","Masao","Mateusz","Matt","Matthew","Meiyr","Michael","Michal","Miguel","Miguel-Angel","Mikhail","Min","Ming","Mitsuo","Miykhael","Miykhal","Mo","Mohamed","Mohammad","Mohammed","Mohan","Moses","Moshe","Mpho","Muhammad","Muhammed","Mukesh","Musa","Narong","Nathan","Nicola","Nikita","Nikolay","Ning","Nkosinathi","Noam","Oleg","Omer","Otieno","Pablo","Patrick","Paul","Pavel","Pawel","Pedro","Peng","Peter","Petrus","Philip","Pieter","Ping","Piotr","Prasit","Prasoet","Pricha","Pushpa","Qiang","Qing","Radha","Rafael","Ragnar","Raj","Rajendra","Rajesh","Raju","Rakesh","Ram","Ramesh","Raphael","Rattana","Ravi","Richard","Robert","Roman","Rong","Roy","Ryan","Salisu","Saman","Samran","Samuel","Sani","Sanjay","Santosh","Sam","Sammy","Sawat","Sebastian","Sergey","Sergio","Shankar","Shay","Shigeru","Shimon","Shlomo","Shoji","Sibusiso","Simon","Sipho","Sombat","Sombun","Somchai","Somchit","Somkhit","Somkiat","Sommai","Somnuek","Somphon","Somphong","Somsak","Sri","Stefan","Stephen","Steve","Steven","Suman","Sunday","Sunil","Sunthon","Suresh","Sushila","Suwit","Sveinn","Tadashi","Takashi","Takeshi","Tal","Tebogo","Thabo","Thawi","Themba","Thomas","Thulani","Tomasz","Toshio","Udom","Umar","Uriy","Usman","Uwe","Victor","Vijay","Viktor","Vincent","Vinod","Vladimir","Walter","Wanchai","Waraphon","Wei","Werner","Wichai","Wichian","Willem","William","Winai","Wirat","Wirot","Wojciech","Wolfgang","Xiang","Xiaohong","Xiaoli","Xiaoping","Xiaoyan","Xin","Xolani","Yaakv","Yahaya","Yakubu","Yan","Yasuo","Yhudah","Ying","Yisrael","Yong","Yosef","Yoshie","Yoshimi","Yoshio","Yu","Yue","Yukio","Yun","Yuriy","Yusuf","Yuval","Zbigniew","Zhen","Zhiqiang"],female:["Agata","Agnieszka","Aisha","Akira","Aleksandra","Alina","Alyona","Amina","Amnuai","Ana","Ana-Maria","Anah","Anan","Anastasiya","Andrea","Angela","Anita","Ann","Anna","Anong","Antonia","Asha","Barbara","Beata","Berglind","Bin","Birgit","Birna","Blessing","Brigitte","Bunmi","Busisiwe","Carmen","Carol","Caroline","Catherine","Chan","Chanah","Chao","Charoen","Chayah","Chen","Cheng","Christa","Christine","Claire","Claudia","Cristina","Darya","Dolores","Dorota","Edda","Ekaterina","Elena","Elisabeth","Elizabeth","Elke","Emiko","Emma","Erika","Erla","Erna","Ester","Esther","Eunice","Eva","Eugenia","Ewa","Faith","Fatima","Fiona","Fran","Francisca","Fumiko","Galina","Gabra","Gisela","Gita","Grace","Hadiza","Haiyan","Hanna","Haruna","Hauwa","Heike","Helen","Helga","Hildur","Hiroko","Hiromi","Hisako","Hong","Hui","Hulda","Inga","Ingrid","Irina","Isa","Isabel","Isah","Iwona","Jackline","Jan","Jane","Janet","Jean","Jennifer","Jianhua","Jianping","Jin","Joan","Joanna","Johanna","Josefa","Joy","Joyce","Juan","Julie","Justyna","Kai","Kanchana","Karen","Karin","Karolina","Kasia","Katarzyna","Katsumi","Keiko","Kiran","Kiyoko","Kristina","Kseniya","Kun","Lakshmi","Lalita","Lan","Latda","Laura","Laxmi","Leah","Lei","Li","Lihua","Lijun","Lilian","Lilja","Lin","Linda","Lindiwe","Ling","Liping","Lisa","Lucia","Lucy","Lyubov","Lyudmila","Magda","Magdalena","Mali","Manju","Margaret","Maria","Maria-Isabel","Maria-Jose","Maria-Pilar","Marina","Mariya","Marta","Martha","Mary","Maryam","Masako","Masami","Mei","Mercy","Michal","Michiko","Mieko","Min","Mina","Ming","Miriam","Miyoko","Mo","Monika","Mpho","Na","Nadezhda","Nan","Nancy","Natalya","Ngozi","Nicola","Ning","Nittaya","Noam","Nobuko","Nokuthula","Nonhlanhla","Noriko","Nushi","Olga","Omer","Patricia","Paula","Paulina","Peng","Petra","Phonthip","Pilar","Ping","Prani","Purity","Pushpa","Qing","Rachel","Radha","Rattana","Rebecca","Reiko","Rekha","Renate","Rita","Rong","Rosa","Rose","Rut","Ruth","Ryoko","Sabine","Sachiko","Samran","Santosh","Sara","Sarah","Sam","Sammy","Sawat","Shanti","Sharon","Shay","Shizuko","Shoshanah","Sibongile","Sita","Sombat","Sombun","Somchit","Somkhit","Sommai","Somnuek","Somphon","Somphong","Sri","Steinunn","Sukanya","Suman","Sunday","Sunita","Suphaphon","Susan","Susanne","Sushila","Svetlana","Takako","Tamar","Tatyana","Tal","Tebogo","Teruko","Thawi","Tomiko","Toshiko","Unnur","Urai","Urmila","Ursula","Usha","Valentina","Victoria","Wanjiru","Wanphen","Watsana","Wei","Wilai","Xiang","Xiaohong","Xiaoli","Xiaoping","Xiaoyan","Xin","Yael","Yan","Yasuko","Yelena","Yhudiyt","Ying","Yoko","Yong","Yoshie","Yoshiko","Yoshimi","Yu","Yue","Yuko","Yuliya","Yun","Yuval","Zainab","Zandile","Zanele","Zhen"]}};function wke(t){var r,o;const s=(r=t==null?void 0:t.withAccents)!=null&&r,c=(o=t==null?void 0:t.gender)!=null?o:Rke(["male","female"]),d=t==null?void 0:t.locale;return uZ(s?d?d==null?void 0:d.withAccents[c]:IW.withAccents[c]:d?d==null?void 0:d.withoutAccents[c]:IW.withoutAccents[c],t)}var Ike={china:["Peking roasted duck","Kung pao chicken","Sweet and sour pork","Hot pot","Dim sum","Dumplings","Ma po tofu","Char siu","Chicken chow mein","Beef chow mein","vegetable chow mein","Chicken fried rice","Beef fried rice","Vegetable fried Rice","Special fried Rice","Sichuan pork","Xiaolongbao","Zhajiangmian","Wonton soup","Sweet and sour pork","Duck spring Rolls","Vegetable spring Rolls","Wonton","Peking duck","Lamb hot pot","Spicy crayfish","Guilin rice noodles","Lanzhou hand-pulled noodles","Steamed crab","Shredded pork with garlic sauce","Red braised pork","Sweet and sour Ribs","Xinjiang","Braised pork with vermicelli"],italy:["Butternut squash risotto","Mushroom risotto","Beetroot risotto","Courgette risotto","Pizza","Gnocchi","Spaghetti bolognese","Spaghetti carbonara","Pesto alla Genovese","Beef lasagne","Vegetable lasagne","Gelato","Prosciutto di Parma","Ribollita","Bagna cauda","Polenta","Tortelli and ravioli","Focaccia","Garlic bread","Arancini","Il tartufo","Panzerotto fritto","Fiorentina","Minestrone","Frico","Arrosticini","Olive ascolante","Fritto misto piemontes","Tiramisù"],india:["Biryani","Dosa","Tandoori chicken","Samosas","Chaat","Plain naan","Garlic naan","Pilau rice","Steamed rice","Chicken madras","Vegetable madras","Chicken vindaloo","Chicken jalfrezi","Chicken roghan josh","Lamb roghan josh","Beef roghan josh","Butter chicken","Dosa","Gulab jamun","Chicken korma","Mutter paneer","Papadum","Paratha","Raita","Saag paneer","Tandoori chicken","Chicken tikka masala","Pakora","Dal","Chapati","Pasanda","Aloo gobi","Kofta","Chicken makhani","Paneer naan","Chana Aloo Curry"],mexico:["Chilaquiles","Pozole","Tacos al pastor","Tostadas","Chiles en nogada","Elote","Enchiladas","Mole","Guacamole","Tamales","Huevos rancheros","Machaca","Discada","Beef Burrito","Chicken Burrito","Pozole de pollo o duajolote","Menudo","Cochinita pibil","Tamale","Quesadilla","Frijoles puercos","Chile en nogada","Esquites","Alegria de amaranto","Pipián","Aguachile","Ceviche","Pescado zarandeado","Camarones a la diabla","Birria de chivo","Tlayuda","Guacamole con chapulines","Flautas","Torta Ahogada","Carnitas","Caldo Azteca","Gorditas de Nata"],japan:["Sushi","Udon","Tofu","Tempura","Yakitori","Sashimi","Ramen","Donburi","Natto","Oden","Tamagoyaki","Soba","Tonkatsu","Kashipan","Sukiyaki","Miso soup","Okonomiyaki","Mentaiko","Nikujaga","Unagi no kabayaki","Shabu Shabu","Onigiri","Gyoza","Takoyaki","aiseki ryori","Edamame","Yakisoba","Chawanmushi","Wagashi"],france:["Foie gras","Huîtres","Cassoulet","Poulet basquaise","Escargots au beurre persillé","Mouclade charentaise","Galettes bretonnes","Flemish carbonnade","Quiche lorraine","Raclette","Cheese fondue","Beef fondue","Gratin dauphinois","Tartiflette","Bouillabaisse","Ratatouille","Boeuf bourguignon","Blanquette de veau","Pot-au-feu","Coq-au-vin","Hachis parmentier","Steak tartare","Choucroute","Soufflé au fromage","Cuisses de grenouilles","Soupe à l’oignon","Baguette","Croissant","French cheeses","Fondant au chocolat","Tarte tatin","Macarons","Crème brûlée","Île flottante","Profiteroles","Pain au chocolat"],lebanon:["Kibbeh","Kafta","Kanafeh","Hummus","Rice pilaf","Fattoush","Manakish","Tabbouleh","Sfeeha","Fattoush","Labneh","Muhammara","Lahm bi ajin","Kaak","Chanklich","Mssabaha","Shawarma","Kebbe","Falafel","Halewit el jeben","Namoura","Maamoul","Foul mdammas","Balila","Kawarma","Fattouch"],thailand:["Pad kra pao moo","Tom kha gai","Khao Pad","Chicken pad Thai","Vegetable pad Thai","Moo satay","Tom yum goong","Khao niew mamuang","Kai yad sai","Khao soi","Pad see ew","Laab moo","Gaeng panang","Gai pad med ma muang","Som tam","Poh pia tod","Gaeng massaman","Pla kapung nueng manao","Tod mun pla","Gaeng ped","Gaeng garee","Gaeng keow wan","Moo ping","Durian","Sai ooah","Hoy tod","Kuay teow reua","Mu kratha","Kao ka moo","Yam nua"],greece:["Moussaka","Papoutsakia","Pastitsio","Souvlaki","Soutzoukakia","Stifado","Tomatokeftedes","Tzatziki","Kolokithokeftedes","Giouvetsi","Choriatiki","Kleftiko","Gemista","Fasolada","Bougatsa","Tiropita","Spanakopita","Feta Cheese with Honey","Horta","Tirokroketes","Briam","Saganaki","Gigantes","Dolmades","Fasolatha","Koulouri","Loukoumades","Gyros","Galaktoboureko","Baklava"],turkey:["Şiş kebap","Döner","Köfte","Pide","Kumpir","Meze","Mantı","Lahmacun","Menemen","Şiş kebap","İskender kebab","Corba","Kuzu tandir","Çiğ Köfte","Pilav","Yaprak sarma","Dolma","İmam bayıldı","Borek","Durum","Kumpir","Balik ekmek","Simit","Kunefe","Baklava","Lokum","Halva","Mozzaik pasta","Güllaç","Mercimek Köftesi","Haydari","Tursu suyu","Kahvalti","Kazan dibi","Hunkar begendi","Islak burgers","Salep","Yogurtlu kebab"],spain:["Tortilla de patatas","Fabada asturiana","Calçots","Boquerones al vinagre","Empanada gallega","Paella","Gazpacho","Gachas","Migas","Bocadillo de calamares","Pulpo a feira","Caldo gallego","Lentejas con chorizo","Cocido madrileño","Cachopo","Caracoles"],venezuela:["Pabellón criollo","Arepa","Mondongo","Empanadas","Quesillo","Chicha andina","Tequeños","Cachapa","Hallaca","Perico","Pasticho","Mandocas","Caraotas negras","Patacones","Dulce de leche","Pan de Jamón"],chile:["Humitas","Empanadas","Porotos con riendas","Completos","Manjar","Cordero al palo","Pastel de choclo","Mote con huesillos","Sopaipillas","Curanto"],argentina:["Milanesas","Empanadas","Pizza fugazeta","Asado","Choripan","Bondiola","Bife de chorizo"],colombia:["Bandeja paisa","Chuleta valluna","Sancocho trifásico","Empanada valluna","Salpicon de frutas","Pastel de garbanzo","Ajiaco","Arepas","Arroz de lisa","Sancocho","Pan de bono","Cuchuco","Oblea","Cazuela de mariscos","Pan de yuca","Bollo Limpio","Almojábana","Empanadas","Arroz con Coco","Sopa de mondongo","Cazuela de Mariscos","Arroz con Pollo","Arepa de Huevo","Mote de Queso"],ecuador:["Encebollado","Ceviche","Tigrillo","Bolon de verde","Llapingacho","Mote pillo","Locro de papa","Churrasco"],peru:["Ceviche","Arroz con pollo","Aji de gallina","Llunca de gallina"],"el salvador":["Pupusa","Sopa de patas","Rigua","Flor de izote con huevo","Gallo en chicha"],romania:["Sarmale","Mici","Pomana porcului","Ciorbă de fasole cu ciolan","Ciorbă de burtă","Ciorbă rădăuțeană","Plăcintă cu brânză","Ciorbă de potroace","Mămăligă cu brânză și smântână","Tochitură","Piftie","Iahnie de fasole","Slănină afumată","Cârnați afumați","Varză a la Cluj","Gulaș de cartofi cu afumătură","Cozonac de casă","Ciorbă ardelenească de porc","Mucenici moldovenești","Salată de boeuf","Dovleac copt","Papanași cu brânză de vacă și afine","Drob de miel","Pârjoale moldovenești","Zacuscă de vinete","Zacuscă de fasole","Turtă dulce","Clătitele cu gem","Clătitele cu brânza de vacă","Balmoș","Cozonac","Chiftele"]},AW;(AW=Object.keys(Ike))==null||AW.length;var OW,Ake={olympic:["Archery","Artistic Gymnastics","Artistic Swimming","Athletics","Badminton","Baseball Softball","Basketball","Beach Volleyball","BMX Freestyle","BMX Racing","Boxing","Kayak Flatwater","Kayak Slalom","Diving","Equestrian","Fencing","Football","Golf","Handball","Hockey","Judo","Karate","Marathon Swimming","Modern Pentathlon","Mountain Bike","Rhythmic Gymnastics","Road Cycling","Rowing","Rugby","Sailing","Shooting","Skateboarding","Sport Climbing","Surfing","Swimming","Table Tennis","Taekwondo","Tennis","Track Cycling","Trampoline","Triathlon","Volleyball","Water Polo","Weightlifting","Wrestling"],winterOlympic:["Alpine Skiing","Biathlon","Bobsleigh","Cross-Country Skiing","Curling","Figure Skating","Freestyle Skiing","Ice Hockey","Luge","Nordic Combined","Short Track Speed Skating","Skeleton","Ski Jumping","Snowboard","Speed Skating"],outdoor:["Archery","Athletics","Badminton","Baseball","Basketball","Bowling","Boxing","Camping","Canoeing","Climbing","Cricket","Curling","Cycling","Equestrian","Fencing","Football","Golf","Gymnastics","Handball","Hang Gliding","High Jumping","Hockey","Ice Hockey","Judo","Karate","Kite Flying","Monkey Bars","Motorsports","Netball","Rowing","Rugby","Running","Sailing","Skateboarding","Slide","Snow Skiing","Soccer","Street Hockey","Surfing","Swimming","Table Tennis","Tennis","Trekking","Triathlon","Volleyball","Weightlifting","Wrestling"]};(OW=Object.keys(Ake))==null||OW.length;var dZ={exports:{}};function Oke(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var mx={exports:{}};const xke={},Nke=Object.freeze(Object.defineProperty({__proto__:null,default:xke},Symbol.toStringTag,{value:"Module"})),Pke=G0e(Nke);var xW;function Sr(){return xW||(xW=1,function(t,r){(function(o,s){t.exports=s()})(On,function(){var o=o||function(s,c){var d;if(typeof window<"u"&&window.crypto&&(d=window.crypto),typeof self<"u"&&self.crypto&&(d=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(d=globalThis.crypto),!d&&typeof window<"u"&&window.msCrypto&&(d=window.msCrypto),!d&&typeof On<"u"&&On.crypto&&(d=On.crypto),!d&&typeof Oke=="function")try{d=Pke}catch{}var f=function(){if(d){if(typeof d.getRandomValues=="function")try{return d.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof d.randomBytes=="function")try{return d.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},v=Object.create||function(){function x(){}return function(L){var M;return x.prototype=L,M=new x,x.prototype=null,M}}(),g={},_=g.lib={},C=_.Base=function(){return{extend:function(x){var L=v(this);return x&&L.mixIn(x),(!L.hasOwnProperty("init")||this.init===L.init)&&(L.init=function(){L.$super.init.apply(this,arguments)}),L.init.prototype=L,L.$super=this,L},create:function(){var x=this.extend();return x.init.apply(x,arguments),x},init:function(){},mixIn:function(x){for(var L in x)x.hasOwnProperty(L)&&(this[L]=x[L]);x.hasOwnProperty("toString")&&(this.toString=x.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),b=_.WordArray=C.extend({init:function(x,L){x=this.words=x||[],L!=c?this.sigBytes=L:this.sigBytes=x.length*4},toString:function(x){return(x||A).stringify(this)},concat:function(x){var L=this.words,M=x.words,F=this.sigBytes,V=x.sigBytes;if(this.clamp(),F%4)for(var $=0;$<V;$++){var z=M[$>>>2]>>>24-$%4*8&255;L[F+$>>>2]|=z<<24-(F+$)%4*8}else for(var K=0;K<V;K+=4)L[F+K>>>2]=M[K>>>2];return this.sigBytes+=V,this},clamp:function(){var x=this.words,L=this.sigBytes;x[L>>>2]&=4294967295<<32-L%4*8,x.length=s.ceil(L/4)},clone:function(){var x=C.clone.call(this);return x.words=this.words.slice(0),x},random:function(x){for(var L=[],M=0;M<x;M+=4)L.push(f());return new b.init(L,x)}}),T=g.enc={},A=T.Hex={stringify:function(x){for(var L=x.words,M=x.sigBytes,F=[],V=0;V<M;V++){var $=L[V>>>2]>>>24-V%4*8&255;F.push(($>>>4).toString(16)),F.push(($&15).toString(16))}return F.join("")},parse:function(x){for(var L=x.length,M=[],F=0;F<L;F+=2)M[F>>>3]|=parseInt(x.substr(F,2),16)<<24-F%8*4;return new b.init(M,L/2)}},I=T.Latin1={stringify:function(x){for(var L=x.words,M=x.sigBytes,F=[],V=0;V<M;V++){var $=L[V>>>2]>>>24-V%4*8&255;F.push(String.fromCharCode($))}return F.join("")},parse:function(x){for(var L=x.length,M=[],F=0;F<L;F++)M[F>>>2]|=(x.charCodeAt(F)&255)<<24-F%4*8;return new b.init(M,L)}},N=T.Utf8={stringify:function(x){try{return decodeURIComponent(escape(I.stringify(x)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(x){return I.parse(unescape(encodeURIComponent(x)))}},P=_.BufferedBlockAlgorithm=C.extend({reset:function(){this._data=new b.init,this._nDataBytes=0},_append:function(x){typeof x=="string"&&(x=N.parse(x)),this._data.concat(x),this._nDataBytes+=x.sigBytes},_process:function(x){var L,M=this._data,F=M.words,V=M.sigBytes,$=this.blockSize,z=$*4,K=V/z;x?K=s.ceil(K):K=s.max((K|0)-this._minBufferSize,0);var G=K*$,J=s.min(G*4,V);if(G){for(var ne=0;ne<G;ne+=$)this._doProcessBlock(F,ne);L=F.splice(0,G),M.sigBytes-=J}return new b.init(L,J)},clone:function(){var x=C.clone.call(this);return x._data=this._data.clone(),x},_minBufferSize:0});_.Hasher=P.extend({cfg:C.extend(),init:function(x){this.cfg=this.cfg.extend(x),this.reset()},reset:function(){P.reset.call(this),this._doReset()},update:function(x){return this._append(x),this._process(),this},finalize:function(x){x&&this._append(x);var L=this._doFinalize();return L},blockSize:16,_createHelper:function(x){return function(L,M){return new x.init(M).finalize(L)}},_createHmacHelper:function(x){return function(L,M){return new D.HMAC.init(x,M).finalize(L)}}});var D=g.algo={};return g}(Math);return o})}(mx)),mx.exports}var gx={exports:{}},NW;function DT(){return NW||(NW=1,function(t,r){(function(o,s){t.exports=s(Sr())})(On,function(o){return function(s){var c=o,d=c.lib,f=d.Base,v=d.WordArray,g=c.x64={};g.Word=f.extend({init:function(_,C){this.high=_,this.low=C}}),g.WordArray=f.extend({init:function(_,C){_=this.words=_||[],C!=s?this.sigBytes=C:this.sigBytes=_.length*8},toX32:function(){for(var _=this.words,C=_.length,b=[],T=0;T<C;T++){var A=_[T];b.push(A.high),b.push(A.low)}return v.create(b,this.sigBytes)},clone:function(){for(var _=f.clone.call(this),C=_.words=this.words.slice(0),b=C.length,T=0;T<b;T++)C[T]=C[T].clone();return _}})}(),o})}(gx)),gx.exports}var vx={exports:{}},PW;function Dke(){return PW||(PW=1,function(t,r){(function(o,s){t.exports=s(Sr())})(On,function(o){return function(){if(typeof ArrayBuffer=="function"){var s=o,c=s.lib,d=c.WordArray,f=d.init,v=d.init=function(g){if(g instanceof ArrayBuffer&&(g=new Uint8Array(g)),(g instanceof Int8Array||typeof Uint8ClampedArray<"u"&&g instanceof Uint8ClampedArray||g instanceof Int16Array||g instanceof Uint16Array||g instanceof Int32Array||g instanceof Uint32Array||g instanceof Float32Array||g instanceof Float64Array)&&(g=new Uint8Array(g.buffer,g.byteOffset,g.byteLength)),g instanceof Uint8Array){for(var _=g.byteLength,C=[],b=0;b<_;b++)C[b>>>2]|=g[b]<<24-b%4*8;f.call(this,C,_)}else f.apply(this,arguments)};v.prototype=d}}(),o.lib.WordArray})}(vx)),vx.exports}var Ex={exports:{}},DW;function Lke(){return DW||(DW=1,function(t,r){(function(o,s){t.exports=s(Sr())})(On,function(o){return function(){var s=o,c=s.lib,d=c.WordArray,f=s.enc;f.Utf16=f.Utf16BE={stringify:function(g){for(var _=g.words,C=g.sigBytes,b=[],T=0;T<C;T+=2){var A=_[T>>>2]>>>16-T%4*8&65535;b.push(String.fromCharCode(A))}return b.join("")},parse:function(g){for(var _=g.length,C=[],b=0;b<_;b++)C[b>>>1]|=g.charCodeAt(b)<<16-b%2*16;return d.create(C,_*2)}},f.Utf16LE={stringify:function(g){for(var _=g.words,C=g.sigBytes,b=[],T=0;T<C;T+=2){var A=v(_[T>>>2]>>>16-T%4*8&65535);b.push(String.fromCharCode(A))}return b.join("")},parse:function(g){for(var _=g.length,C=[],b=0;b<_;b++)C[b>>>1]|=v(g.charCodeAt(b)<<16-b%2*16);return d.create(C,_*2)}};function v(g){return g<<8&4278255360|g>>>8&16711935}}(),o.enc.Utf16})}(Ex)),Ex.exports}var _x={exports:{}},LW;function of(){return LW||(LW=1,function(t,r){(function(o,s){t.exports=s(Sr())})(On,function(o){return function(){var s=o,c=s.lib,d=c.WordArray,f=s.enc;f.Base64={stringify:function(g){var _=g.words,C=g.sigBytes,b=this._map;g.clamp();for(var T=[],A=0;A<C;A+=3)for(var I=_[A>>>2]>>>24-A%4*8&255,N=_[A+1>>>2]>>>24-(A+1)%4*8&255,P=_[A+2>>>2]>>>24-(A+2)%4*8&255,D=I<<16|N<<8|P,x=0;x<4&&A+x*.75<C;x++)T.push(b.charAt(D>>>6*(3-x)&63));var L=b.charAt(64);if(L)for(;T.length%4;)T.push(L);return T.join("")},parse:function(g){var _=g.length,C=this._map,b=this._reverseMap;if(!b){b=this._reverseMap=[];for(var T=0;T<C.length;T++)b[C.charCodeAt(T)]=T}var A=C.charAt(64);if(A){var I=g.indexOf(A);I!==-1&&(_=I)}return v(g,_,b)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function v(g,_,C){for(var b=[],T=0,A=0;A<_;A++)if(A%4){var I=C[g.charCodeAt(A-1)]<<A%4*2,N=C[g.charCodeAt(A)]>>>6-A%4*2,P=I|N;b[T>>>2]|=P<<24-T%4*8,T++}return d.create(b,T)}}(),o.enc.Base64})}(_x)),_x.exports}var Sx={exports:{}},kW;function kke(){return kW||(kW=1,function(t,r){(function(o,s){t.exports=s(Sr())})(On,function(o){return function(){var s=o,c=s.lib,d=c.WordArray,f=s.enc;f.Base64url={stringify:function(g,_){_===void 0&&(_=!0);var C=g.words,b=g.sigBytes,T=_?this._safe_map:this._map;g.clamp();for(var A=[],I=0;I<b;I+=3)for(var N=C[I>>>2]>>>24-I%4*8&255,P=C[I+1>>>2]>>>24-(I+1)%4*8&255,D=C[I+2>>>2]>>>24-(I+2)%4*8&255,x=N<<16|P<<8|D,L=0;L<4&&I+L*.75<b;L++)A.push(T.charAt(x>>>6*(3-L)&63));var M=T.charAt(64);if(M)for(;A.length%4;)A.push(M);return A.join("")},parse:function(g,_){_===void 0&&(_=!0);var C=g.length,b=_?this._safe_map:this._map,T=this._reverseMap;if(!T){T=this._reverseMap=[];for(var A=0;A<b.length;A++)T[b.charCodeAt(A)]=A}var I=b.charAt(64);if(I){var N=g.indexOf(I);N!==-1&&(C=N)}return v(g,C,T)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function v(g,_,C){for(var b=[],T=0,A=0;A<_;A++)if(A%4){var I=C[g.charCodeAt(A-1)]<<A%4*2,N=C[g.charCodeAt(A)]>>>6-A%4*2,P=I|N;b[T>>>2]|=P<<24-T%4*8,T++}return d.create(b,T)}}(),o.enc.Base64url})}(Sx)),Sx.exports}var yx={exports:{}},MW;function af(){return MW||(MW=1,function(t,r){(function(o,s){t.exports=s(Sr())})(On,function(o){return function(s){var c=o,d=c.lib,f=d.WordArray,v=d.Hasher,g=c.algo,_=[];(function(){for(var N=0;N<64;N++)_[N]=s.abs(s.sin(N+1))*4294967296|0})();var C=g.MD5=v.extend({_doReset:function(){this._hash=new f.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(N,P){for(var D=0;D<16;D++){var x=P+D,L=N[x];N[x]=(L<<8|L>>>24)&16711935|(L<<24|L>>>8)&4278255360}var M=this._hash.words,F=N[P+0],V=N[P+1],$=N[P+2],z=N[P+3],K=N[P+4],G=N[P+5],J=N[P+6],ne=N[P+7],te=N[P+8],ce=N[P+9],ge=N[P+10],oe=N[P+11],ae=N[P+12],ie=N[P+13],ve=N[P+14],me=N[P+15],le=M[0],de=M[1],Ee=M[2],se=M[3];le=b(le,de,Ee,se,F,7,_[0]),se=b(se,le,de,Ee,V,12,_[1]),Ee=b(Ee,se,le,de,$,17,_[2]),de=b(de,Ee,se,le,z,22,_[3]),le=b(le,de,Ee,se,K,7,_[4]),se=b(se,le,de,Ee,G,12,_[5]),Ee=b(Ee,se,le,de,J,17,_[6]),de=b(de,Ee,se,le,ne,22,_[7]),le=b(le,de,Ee,se,te,7,_[8]),se=b(se,le,de,Ee,ce,12,_[9]),Ee=b(Ee,se,le,de,ge,17,_[10]),de=b(de,Ee,se,le,oe,22,_[11]),le=b(le,de,Ee,se,ae,7,_[12]),se=b(se,le,de,Ee,ie,12,_[13]),Ee=b(Ee,se,le,de,ve,17,_[14]),de=b(de,Ee,se,le,me,22,_[15]),le=T(le,de,Ee,se,V,5,_[16]),se=T(se,le,de,Ee,J,9,_[17]),Ee=T(Ee,se,le,de,oe,14,_[18]),de=T(de,Ee,se,le,F,20,_[19]),le=T(le,de,Ee,se,G,5,_[20]),se=T(se,le,de,Ee,ge,9,_[21]),Ee=T(Ee,se,le,de,me,14,_[22]),de=T(de,Ee,se,le,K,20,_[23]),le=T(le,de,Ee,se,ce,5,_[24]),se=T(se,le,de,Ee,ve,9,_[25]),Ee=T(Ee,se,le,de,z,14,_[26]),de=T(de,Ee,se,le,te,20,_[27]),le=T(le,de,Ee,se,ie,5,_[28]),se=T(se,le,de,Ee,$,9,_[29]),Ee=T(Ee,se,le,de,ne,14,_[30]),de=T(de,Ee,se,le,ae,20,_[31]),le=A(le,de,Ee,se,G,4,_[32]),se=A(se,le,de,Ee,te,11,_[33]),Ee=A(Ee,se,le,de,oe,16,_[34]),de=A(de,Ee,se,le,ve,23,_[35]),le=A(le,de,Ee,se,V,4,_[36]),se=A(se,le,de,Ee,K,11,_[37]),Ee=A(Ee,se,le,de,ne,16,_[38]),de=A(de,Ee,se,le,ge,23,_[39]),le=A(le,de,Ee,se,ie,4,_[40]),se=A(se,le,de,Ee,F,11,_[41]),Ee=A(Ee,se,le,de,z,16,_[42]),de=A(de,Ee,se,le,J,23,_[43]),le=A(le,de,Ee,se,ce,4,_[44]),se=A(se,le,de,Ee,ae,11,_[45]),Ee=A(Ee,se,le,de,me,16,_[46]),de=A(de,Ee,se,le,$,23,_[47]),le=I(le,de,Ee,se,F,6,_[48]),se=I(se,le,de,Ee,ne,10,_[49]),Ee=I(Ee,se,le,de,ve,15,_[50]),de=I(de,Ee,se,le,G,21,_[51]),le=I(le,de,Ee,se,ae,6,_[52]),se=I(se,le,de,Ee,z,10,_[53]),Ee=I(Ee,se,le,de,ge,15,_[54]),de=I(de,Ee,se,le,V,21,_[55]),le=I(le,de,Ee,se,te,6,_[56]),se=I(se,le,de,Ee,me,10,_[57]),Ee=I(Ee,se,le,de,J,15,_[58]),de=I(de,Ee,se,le,ie,21,_[59]),le=I(le,de,Ee,se,K,6,_[60]),se=I(se,le,de,Ee,oe,10,_[61]),Ee=I(Ee,se,le,de,$,15,_[62]),de=I(de,Ee,se,le,ce,21,_[63]),M[0]=M[0]+le|0,M[1]=M[1]+de|0,M[2]=M[2]+Ee|0,M[3]=M[3]+se|0},_doFinalize:function(){var N=this._data,P=N.words,D=this._nDataBytes*8,x=N.sigBytes*8;P[x>>>5]|=128<<24-x%32;var L=s.floor(D/4294967296),M=D;P[(x+64>>>9<<4)+15]=(L<<8|L>>>24)&16711935|(L<<24|L>>>8)&4278255360,P[(x+64>>>9<<4)+14]=(M<<8|M>>>24)&16711935|(M<<24|M>>>8)&4278255360,N.sigBytes=(P.length+1)*4,this._process();for(var F=this._hash,V=F.words,$=0;$<4;$++){var z=V[$];V[$]=(z<<8|z>>>24)&16711935|(z<<24|z>>>8)&4278255360}return F},clone:function(){var N=v.clone.call(this);return N._hash=this._hash.clone(),N}});function b(N,P,D,x,L,M,F){var V=N+(P&D|~P&x)+L+F;return(V<<M|V>>>32-M)+P}function T(N,P,D,x,L,M,F){var V=N+(P&x|D&~x)+L+F;return(V<<M|V>>>32-M)+P}function A(N,P,D,x,L,M,F){var V=N+(P^D^x)+L+F;return(V<<M|V>>>32-M)+P}function I(N,P,D,x,L,M,F){var V=N+(D^(P|~x))+L+F;return(V<<M|V>>>32-M)+P}c.MD5=v._createHelper(C),c.HmacMD5=v._createHmacHelper(C)}(Math),o.MD5})}(yx)),yx.exports}var Cx={exports:{}},FW;function hZ(){return FW||(FW=1,function(t,r){(function(o,s){t.exports=s(Sr())})(On,function(o){return function(){var s=o,c=s.lib,d=c.WordArray,f=c.Hasher,v=s.algo,g=[],_=v.SHA1=f.extend({_doReset:function(){this._hash=new d.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(C,b){for(var T=this._hash.words,A=T[0],I=T[1],N=T[2],P=T[3],D=T[4],x=0;x<80;x++){if(x<16)g[x]=C[b+x]|0;else{var L=g[x-3]^g[x-8]^g[x-14]^g[x-16];g[x]=L<<1|L>>>31}var M=(A<<5|A>>>27)+D+g[x];x<20?M+=(I&N|~I&P)+1518500249:x<40?M+=(I^N^P)+1859775393:x<60?M+=(I&N|I&P|N&P)-1894007588:M+=(I^N^P)-899497514,D=P,P=N,N=I<<30|I>>>2,I=A,A=M}T[0]=T[0]+A|0,T[1]=T[1]+I|0,T[2]=T[2]+N|0,T[3]=T[3]+P|0,T[4]=T[4]+D|0},_doFinalize:function(){var C=this._data,b=C.words,T=this._nDataBytes*8,A=C.sigBytes*8;return b[A>>>5]|=128<<24-A%32,b[(A+64>>>9<<4)+14]=Math.floor(T/4294967296),b[(A+64>>>9<<4)+15]=T,C.sigBytes=b.length*4,this._process(),this._hash},clone:function(){var C=f.clone.call(this);return C._hash=this._hash.clone(),C}});s.SHA1=f._createHelper(_),s.HmacSHA1=f._createHmacHelper(_)}(),o.SHA1})}(Cx)),Cx.exports}var bx={exports:{}},UW;function wL(){return UW||(UW=1,function(t,r){(function(o,s){t.exports=s(Sr())})(On,function(o){return function(s){var c=o,d=c.lib,f=d.WordArray,v=d.Hasher,g=c.algo,_=[],C=[];(function(){function A(D){for(var x=s.sqrt(D),L=2;L<=x;L++)if(!(D%L))return!1;return!0}function I(D){return(D-(D|0))*4294967296|0}for(var N=2,P=0;P<64;)A(N)&&(P<8&&(_[P]=I(s.pow(N,1/2))),C[P]=I(s.pow(N,1/3)),P++),N++})();var b=[],T=g.SHA256=v.extend({_doReset:function(){this._hash=new f.init(_.slice(0))},_doProcessBlock:function(A,I){for(var N=this._hash.words,P=N[0],D=N[1],x=N[2],L=N[3],M=N[4],F=N[5],V=N[6],$=N[7],z=0;z<64;z++){if(z<16)b[z]=A[I+z]|0;else{var K=b[z-15],G=(K<<25|K>>>7)^(K<<14|K>>>18)^K>>>3,J=b[z-2],ne=(J<<15|J>>>17)^(J<<13|J>>>19)^J>>>10;b[z]=G+b[z-7]+ne+b[z-16]}var te=M&F^~M&V,ce=P&D^P&x^D&x,ge=(P<<30|P>>>2)^(P<<19|P>>>13)^(P<<10|P>>>22),oe=(M<<26|M>>>6)^(M<<21|M>>>11)^(M<<7|M>>>25),ae=$+oe+te+C[z]+b[z],ie=ge+ce;$=V,V=F,F=M,M=L+ae|0,L=x,x=D,D=P,P=ae+ie|0}N[0]=N[0]+P|0,N[1]=N[1]+D|0,N[2]=N[2]+x|0,N[3]=N[3]+L|0,N[4]=N[4]+M|0,N[5]=N[5]+F|0,N[6]=N[6]+V|0,N[7]=N[7]+$|0},_doFinalize:function(){var A=this._data,I=A.words,N=this._nDataBytes*8,P=A.sigBytes*8;return I[P>>>5]|=128<<24-P%32,I[(P+64>>>9<<4)+14]=s.floor(N/4294967296),I[(P+64>>>9<<4)+15]=N,A.sigBytes=I.length*4,this._process(),this._hash},clone:function(){var A=v.clone.call(this);return A._hash=this._hash.clone(),A}});c.SHA256=v._createHelper(T),c.HmacSHA256=v._createHmacHelper(T)}(Math),o.SHA256})}(bx)),bx.exports}var Tx={exports:{}},BW;function Mke(){return BW||(BW=1,function(t,r){(function(o,s,c){t.exports=s(Sr(),wL())})(On,function(o){return function(){var s=o,c=s.lib,d=c.WordArray,f=s.algo,v=f.SHA256,g=f.SHA224=v.extend({_doReset:function(){this._hash=new d.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var _=v._doFinalize.call(this);return _.sigBytes-=4,_}});s.SHA224=v._createHelper(g),s.HmacSHA224=v._createHmacHelper(g)}(),o.SHA224})}(Tx)),Tx.exports}var Rx={exports:{}},VW;function fZ(){return VW||(VW=1,function(t,r){(function(o,s,c){t.exports=s(Sr(),DT())})(On,function(o){return function(){var s=o,c=s.lib,d=c.Hasher,f=s.x64,v=f.Word,g=f.WordArray,_=s.algo;function C(){return v.create.apply(v,arguments)}var b=[C(1116352408,3609767458),C(1899447441,602891725),C(3049323471,3964484399),C(3921009573,2173295548),C(961987163,4081628472),C(1508970993,3053834265),C(2453635748,2937671579),C(2870763221,3664609560),C(3624381080,2734883394),C(310598401,1164996542),C(607225278,1323610764),C(1426881987,3590304994),C(1925078388,4068182383),C(2162078206,991336113),C(2614888103,633803317),C(3248222580,3479774868),C(3835390401,2666613458),C(4022224774,944711139),C(264347078,2341262773),C(604807628,2007800933),C(770255983,1495990901),C(1249150122,1856431235),C(1555081692,3175218132),C(1996064986,2198950837),C(2554220882,3999719339),C(2821834349,766784016),C(2952996808,2566594879),C(3210313671,3203337956),C(3336571891,1034457026),C(3584528711,2466948901),C(113926993,3758326383),C(338241895,168717936),C(666307205,1188179964),C(773529912,1546045734),C(1294757372,1522805485),C(1396182291,2643833823),C(1695183700,2343527390),C(1986661051,1014477480),C(2177026350,1206759142),C(2456956037,344077627),C(2730485921,1290863460),C(2820302411,3158454273),C(3259730800,3505952657),C(3345764771,106217008),C(3516065817,3606008344),C(3600352804,1432725776),C(4094571909,1467031594),C(275423344,851169720),C(430227734,3100823752),C(506948616,1363258195),C(659060556,3750685593),C(883997877,3785050280),C(958139571,3318307427),C(1322822218,3812723403),C(1537002063,2003034995),C(1747873779,3602036899),C(1955562222,1575990012),C(2024104815,1125592928),C(2227730452,2716904306),C(2361852424,442776044),C(2428436474,593698344),C(2756734187,3733110249),C(3204031479,2999351573),C(3329325298,3815920427),C(3391569614,3928383900),C(3515267271,566280711),C(3940187606,3454069534),C(4118630271,4000239992),C(116418474,1914138554),C(174292421,2731055270),C(289380356,3203993006),C(460393269,320620315),C(685471733,587496836),C(852142971,1086792851),C(1017036298,365543100),C(1126000580,2618297676),C(1288033470,3409855158),C(1501505948,4234509866),C(1607167915,987167468),C(1816402316,1246189591)],T=[];(function(){for(var I=0;I<80;I++)T[I]=C()})();var A=_.SHA512=d.extend({_doReset:function(){this._hash=new g.init([new v.init(1779033703,4089235720),new v.init(3144134277,2227873595),new v.init(1013904242,4271175723),new v.init(2773480762,1595750129),new v.init(1359893119,2917565137),new v.init(2600822924,725511199),new v.init(528734635,4215389547),new v.init(1541459225,327033209)])},_doProcessBlock:function(I,N){for(var P=this._hash.words,D=P[0],x=P[1],L=P[2],M=P[3],F=P[4],V=P[5],$=P[6],z=P[7],K=D.high,G=D.low,J=x.high,ne=x.low,te=L.high,ce=L.low,ge=M.high,oe=M.low,ae=F.high,ie=F.low,ve=V.high,me=V.low,le=$.high,de=$.low,Ee=z.high,se=z.low,Te=K,we=G,Le=J,Ie=ne,De=te,Ye=ce,Me=ge,Oe=oe,$e=ae,tt=ie,je=ve,ke=me,dt=le,Ze=de,ut=Ee,Tt=se,pt=0;pt<80;pt++){var ht,qe,Je=T[pt];if(pt<16)qe=Je.high=I[N+pt*2]|0,ht=Je.low=I[N+pt*2+1]|0;else{var Ct=T[pt-15],Nt=Ct.high,Ot=Ct.low,on=(Nt>>>1|Ot<<31)^(Nt>>>8|Ot<<24)^Nt>>>7,Vt=(Ot>>>1|Nt<<31)^(Ot>>>8|Nt<<24)^(Ot>>>7|Nt<<25),kt=T[pt-2],Kt=kt.high,Zt=kt.low,Ft=(Kt>>>19|Zt<<13)^(Kt<<3|Zt>>>29)^Kt>>>6,_t=(Zt>>>19|Kt<<13)^(Zt<<3|Kt>>>29)^(Zt>>>6|Kt<<26),At=T[pt-7],mt=At.high,Pt=At.low,gn=T[pt-16],Mn=gn.high,pi=gn.low;ht=Vt+Pt,qe=on+mt+(ht>>>0<Vt>>>0?1:0),ht=ht+_t,qe=qe+Ft+(ht>>>0<_t>>>0?1:0),ht=ht+pi,qe=qe+Mn+(ht>>>0<pi>>>0?1:0),Je.high=qe,Je.low=ht}var Zr=$e&je^~$e&dt,Si=tt&ke^~tt&Ze,Dr=Te&Le^Te&De^Le&De,Gn=we&Ie^we&Ye^Ie&Ye,Ir=(Te>>>28|we<<4)^(Te<<30|we>>>2)^(Te<<25|we>>>7),vn=(we>>>28|Te<<4)^(we<<30|Te>>>2)^(we<<25|Te>>>7),Qt=($e>>>14|tt<<18)^($e>>>18|tt<<14)^($e<<23|tt>>>9),Dt=(tt>>>14|$e<<18)^(tt>>>18|$e<<14)^(tt<<23|$e>>>9),bt=b[pt],un=bt.high,Sn=bt.low,ft=Tt+Dt,gt=ut+Qt+(ft>>>0<Tt>>>0?1:0),ft=ft+Si,gt=gt+Zr+(ft>>>0<Si>>>0?1:0),ft=ft+Sn,gt=gt+un+(ft>>>0<Sn>>>0?1:0),ft=ft+ht,gt=gt+qe+(ft>>>0<ht>>>0?1:0),Wt=vn+Gn,Yt=Ir+Dr+(Wt>>>0<vn>>>0?1:0);ut=dt,Tt=Ze,dt=je,Ze=ke,je=$e,ke=tt,tt=Oe+ft|0,$e=Me+gt+(tt>>>0<Oe>>>0?1:0)|0,Me=De,Oe=Ye,De=Le,Ye=Ie,Le=Te,Ie=we,we=ft+Wt|0,Te=gt+Yt+(we>>>0<ft>>>0?1:0)|0}G=D.low=G+we,D.high=K+Te+(G>>>0<we>>>0?1:0),ne=x.low=ne+Ie,x.high=J+Le+(ne>>>0<Ie>>>0?1:0),ce=L.low=ce+Ye,L.high=te+De+(ce>>>0<Ye>>>0?1:0),oe=M.low=oe+Oe,M.high=ge+Me+(oe>>>0<Oe>>>0?1:0),ie=F.low=ie+tt,F.high=ae+$e+(ie>>>0<tt>>>0?1:0),me=V.low=me+ke,V.high=ve+je+(me>>>0<ke>>>0?1:0),de=$.low=de+Ze,$.high=le+dt+(de>>>0<Ze>>>0?1:0),se=z.low=se+Tt,z.high=Ee+ut+(se>>>0<Tt>>>0?1:0)},_doFinalize:function(){var I=this._data,N=I.words,P=this._nDataBytes*8,D=I.sigBytes*8;N[D>>>5]|=128<<24-D%32,N[(D+128>>>10<<5)+30]=Math.floor(P/4294967296),N[(D+128>>>10<<5)+31]=P,I.sigBytes=N.length*4,this._process();var x=this._hash.toX32();return x},clone:function(){var I=d.clone.call(this);return I._hash=this._hash.clone(),I},blockSize:1024/32});s.SHA512=d._createHelper(A),s.HmacSHA512=d._createHmacHelper(A)}(),o.SHA512})}(Rx)),Rx.exports}var wx={exports:{}},jW;function Fke(){return jW||(jW=1,function(t,r){(function(o,s,c){t.exports=s(Sr(),DT(),fZ())})(On,function(o){return function(){var s=o,c=s.x64,d=c.Word,f=c.WordArray,v=s.algo,g=v.SHA512,_=v.SHA384=g.extend({_doReset:function(){this._hash=new f.init([new d.init(3418070365,3238371032),new d.init(1654270250,914150663),new d.init(2438529370,812702999),new d.init(355462360,4144912697),new d.init(1731405415,4290775857),new d.init(2394180231,1750603025),new d.init(3675008525,1694076839),new d.init(1203062813,3204075428)])},_doFinalize:function(){var C=g._doFinalize.call(this);return C.sigBytes-=16,C}});s.SHA384=g._createHelper(_),s.HmacSHA384=g._createHmacHelper(_)}(),o.SHA384})}(wx)),wx.exports}var Ix={exports:{}},$W;function Uke(){return $W||($W=1,function(t,r){(function(o,s,c){t.exports=s(Sr(),DT())})(On,function(o){return function(s){var c=o,d=c.lib,f=d.WordArray,v=d.Hasher,g=c.x64,_=g.Word,C=c.algo,b=[],T=[],A=[];(function(){for(var P=1,D=0,x=0;x<24;x++){b[P+5*D]=(x+1)*(x+2)/2%64;var L=D%5,M=(2*P+3*D)%5;P=L,D=M}for(var P=0;P<5;P++)for(var D=0;D<5;D++)T[P+5*D]=D+(2*P+3*D)%5*5;for(var F=1,V=0;V<24;V++){for(var $=0,z=0,K=0;K<7;K++){if(F&1){var G=(1<<K)-1;G<32?z^=1<<G:$^=1<<G-32}F&128?F=F<<1^113:F<<=1}A[V]=_.create($,z)}})();var I=[];(function(){for(var P=0;P<25;P++)I[P]=_.create()})();var N=C.SHA3=v.extend({cfg:v.cfg.extend({outputLength:512}),_doReset:function(){for(var P=this._state=[],D=0;D<25;D++)P[D]=new _.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(P,D){for(var x=this._state,L=this.blockSize/2,M=0;M<L;M++){var F=P[D+2*M],V=P[D+2*M+1];F=(F<<8|F>>>24)&16711935|(F<<24|F>>>8)&4278255360,V=(V<<8|V>>>24)&16711935|(V<<24|V>>>8)&4278255360;var $=x[M];$.high^=V,$.low^=F}for(var z=0;z<24;z++){for(var K=0;K<5;K++){for(var G=0,J=0,ne=0;ne<5;ne++){var $=x[K+5*ne];G^=$.high,J^=$.low}var te=I[K];te.high=G,te.low=J}for(var K=0;K<5;K++)for(var ce=I[(K+4)%5],ge=I[(K+1)%5],oe=ge.high,ae=ge.low,G=ce.high^(oe<<1|ae>>>31),J=ce.low^(ae<<1|oe>>>31),ne=0;ne<5;ne++){var $=x[K+5*ne];$.high^=G,$.low^=J}for(var ie=1;ie<25;ie++){var G,J,$=x[ie],ve=$.high,me=$.low,le=b[ie];le<32?(G=ve<<le|me>>>32-le,J=me<<le|ve>>>32-le):(G=me<<le-32|ve>>>64-le,J=ve<<le-32|me>>>64-le);var de=I[T[ie]];de.high=G,de.low=J}var Ee=I[0],se=x[0];Ee.high=se.high,Ee.low=se.low;for(var K=0;K<5;K++)for(var ne=0;ne<5;ne++){var ie=K+5*ne,$=x[ie],Te=I[ie],we=I[(K+1)%5+5*ne],Le=I[(K+2)%5+5*ne];$.high=Te.high^~we.high&Le.high,$.low=Te.low^~we.low&Le.low}var $=x[0],Ie=A[z];$.high^=Ie.high,$.low^=Ie.low}},_doFinalize:function(){var P=this._data,D=P.words;this._nDataBytes*8;var x=P.sigBytes*8,L=this.blockSize*32;D[x>>>5]|=1<<24-x%32,D[(s.ceil((x+1)/L)*L>>>5)-1]|=128,P.sigBytes=D.length*4,this._process();for(var M=this._state,F=this.cfg.outputLength/8,V=F/8,$=[],z=0;z<V;z++){var K=M[z],G=K.high,J=K.low;G=(G<<8|G>>>24)&16711935|(G<<24|G>>>8)&4278255360,J=(J<<8|J>>>24)&16711935|(J<<24|J>>>8)&4278255360,$.push(J),$.push(G)}return new f.init($,F)},clone:function(){for(var P=v.clone.call(this),D=P._state=this._state.slice(0),x=0;x<25;x++)D[x]=D[x].clone();return P}});c.SHA3=v._createHelper(N),c.HmacSHA3=v._createHmacHelper(N)}(Math),o.SHA3})}(Ix)),Ix.exports}var Ax={exports:{}},HW;function Bke(){return HW||(HW=1,function(t,r){(function(o,s){t.exports=s(Sr())})(On,function(o){/** @preserve
			(c) 2012 by Cédric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return function(s){var c=o,d=c.lib,f=d.WordArray,v=d.Hasher,g=c.algo,_=f.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),C=f.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),b=f.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),T=f.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),A=f.create([0,1518500249,1859775393,2400959708,2840853838]),I=f.create([1352829926,1548603684,1836072691,2053994217,0]),N=g.RIPEMD160=v.extend({_doReset:function(){this._hash=f.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(V,$){for(var z=0;z<16;z++){var K=$+z,G=V[K];V[K]=(G<<8|G>>>24)&16711935|(G<<24|G>>>8)&4278255360}var J=this._hash.words,ne=A.words,te=I.words,ce=_.words,ge=C.words,oe=b.words,ae=T.words,ie,ve,me,le,de,Ee,se,Te,we,Le;Ee=ie=J[0],se=ve=J[1],Te=me=J[2],we=le=J[3],Le=de=J[4];for(var Ie,z=0;z<80;z+=1)Ie=ie+V[$+ce[z]]|0,z<16?Ie+=P(ve,me,le)+ne[0]:z<32?Ie+=D(ve,me,le)+ne[1]:z<48?Ie+=x(ve,me,le)+ne[2]:z<64?Ie+=L(ve,me,le)+ne[3]:Ie+=M(ve,me,le)+ne[4],Ie=Ie|0,Ie=F(Ie,oe[z]),Ie=Ie+de|0,ie=de,de=le,le=F(me,10),me=ve,ve=Ie,Ie=Ee+V[$+ge[z]]|0,z<16?Ie+=M(se,Te,we)+te[0]:z<32?Ie+=L(se,Te,we)+te[1]:z<48?Ie+=x(se,Te,we)+te[2]:z<64?Ie+=D(se,Te,we)+te[3]:Ie+=P(se,Te,we)+te[4],Ie=Ie|0,Ie=F(Ie,ae[z]),Ie=Ie+Le|0,Ee=Le,Le=we,we=F(Te,10),Te=se,se=Ie;Ie=J[1]+me+we|0,J[1]=J[2]+le+Le|0,J[2]=J[3]+de+Ee|0,J[3]=J[4]+ie+se|0,J[4]=J[0]+ve+Te|0,J[0]=Ie},_doFinalize:function(){var V=this._data,$=V.words,z=this._nDataBytes*8,K=V.sigBytes*8;$[K>>>5]|=128<<24-K%32,$[(K+64>>>9<<4)+14]=(z<<8|z>>>24)&16711935|(z<<24|z>>>8)&4278255360,V.sigBytes=($.length+1)*4,this._process();for(var G=this._hash,J=G.words,ne=0;ne<5;ne++){var te=J[ne];J[ne]=(te<<8|te>>>24)&16711935|(te<<24|te>>>8)&4278255360}return G},clone:function(){var V=v.clone.call(this);return V._hash=this._hash.clone(),V}});function P(V,$,z){return V^$^z}function D(V,$,z){return V&$|~V&z}function x(V,$,z){return(V|~$)^z}function L(V,$,z){return V&z|$&~z}function M(V,$,z){return V^($|~z)}function F(V,$){return V<<$|V>>>32-$}c.RIPEMD160=v._createHelper(N),c.HmacRIPEMD160=v._createHmacHelper(N)}(),o.RIPEMD160})}(Ax)),Ax.exports}var Ox={exports:{}},zW;function IL(){return zW||(zW=1,function(t,r){(function(o,s){t.exports=s(Sr())})(On,function(o){(function(){var s=o,c=s.lib,d=c.Base,f=s.enc,v=f.Utf8,g=s.algo;g.HMAC=d.extend({init:function(_,C){_=this._hasher=new _.init,typeof C=="string"&&(C=v.parse(C));var b=_.blockSize,T=b*4;C.sigBytes>T&&(C=_.finalize(C)),C.clamp();for(var A=this._oKey=C.clone(),I=this._iKey=C.clone(),N=A.words,P=I.words,D=0;D<b;D++)N[D]^=1549556828,P[D]^=909522486;A.sigBytes=I.sigBytes=T,this.reset()},reset:function(){var _=this._hasher;_.reset(),_.update(this._iKey)},update:function(_){return this._hasher.update(_),this},finalize:function(_){var C=this._hasher,b=C.finalize(_);C.reset();var T=C.finalize(this._oKey.clone().concat(b));return T}})})()})}(Ox)),Ox.exports}var xx={exports:{}},WW;function Vke(){return WW||(WW=1,function(t,r){(function(o,s,c){t.exports=s(Sr(),wL(),IL())})(On,function(o){return function(){var s=o,c=s.lib,d=c.Base,f=c.WordArray,v=s.algo,g=v.SHA256,_=v.HMAC,C=v.PBKDF2=d.extend({cfg:d.extend({keySize:128/32,hasher:g,iterations:25e4}),init:function(b){this.cfg=this.cfg.extend(b)},compute:function(b,T){for(var A=this.cfg,I=_.create(A.hasher,b),N=f.create(),P=f.create([1]),D=N.words,x=P.words,L=A.keySize,M=A.iterations;D.length<L;){var F=I.update(T).finalize(P);I.reset();for(var V=F.words,$=V.length,z=F,K=1;K<M;K++){z=I.finalize(z),I.reset();for(var G=z.words,J=0;J<$;J++)V[J]^=G[J]}N.concat(F),x[0]++}return N.sigBytes=L*4,N}});s.PBKDF2=function(b,T,A){return C.create(A).compute(b,T)}}(),o.PBKDF2})}(xx)),xx.exports}var Nx={exports:{}},GW;function kd(){return GW||(GW=1,function(t,r){(function(o,s,c){t.exports=s(Sr(),hZ(),IL())})(On,function(o){return function(){var s=o,c=s.lib,d=c.Base,f=c.WordArray,v=s.algo,g=v.MD5,_=v.EvpKDF=d.extend({cfg:d.extend({keySize:128/32,hasher:g,iterations:1}),init:function(C){this.cfg=this.cfg.extend(C)},compute:function(C,b){for(var T,A=this.cfg,I=A.hasher.create(),N=f.create(),P=N.words,D=A.keySize,x=A.iterations;P.length<D;){T&&I.update(T),T=I.update(C).finalize(b),I.reset();for(var L=1;L<x;L++)T=I.finalize(T),I.reset();N.concat(T)}return N.sigBytes=D*4,N}});s.EvpKDF=function(C,b,T){return _.create(T).compute(C,b)}}(),o.EvpKDF})}(Nx)),Nx.exports}var Px={exports:{}},KW;function jo(){return KW||(KW=1,function(t,r){(function(o,s,c){t.exports=s(Sr(),kd())})(On,function(o){o.lib.Cipher||function(s){var c=o,d=c.lib,f=d.Base,v=d.WordArray,g=d.BufferedBlockAlgorithm,_=c.enc;_.Utf8;var C=_.Base64,b=c.algo,T=b.EvpKDF,A=d.Cipher=g.extend({cfg:f.extend(),createEncryptor:function(G,J){return this.create(this._ENC_XFORM_MODE,G,J)},createDecryptor:function(G,J){return this.create(this._DEC_XFORM_MODE,G,J)},init:function(G,J,ne){this.cfg=this.cfg.extend(ne),this._xformMode=G,this._key=J,this.reset()},reset:function(){g.reset.call(this),this._doReset()},process:function(G){return this._append(G),this._process()},finalize:function(G){G&&this._append(G);var J=this._doFinalize();return J},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function G(J){return typeof J=="string"?K:V}return function(J){return{encrypt:function(ne,te,ce){return G(te).encrypt(J,ne,te,ce)},decrypt:function(ne,te,ce){return G(te).decrypt(J,ne,te,ce)}}}}()});d.StreamCipher=A.extend({_doFinalize:function(){var G=this._process(!0);return G},blockSize:1});var I=c.mode={},N=d.BlockCipherMode=f.extend({createEncryptor:function(G,J){return this.Encryptor.create(G,J)},createDecryptor:function(G,J){return this.Decryptor.create(G,J)},init:function(G,J){this._cipher=G,this._iv=J}}),P=I.CBC=function(){var G=N.extend();G.Encryptor=G.extend({processBlock:function(ne,te){var ce=this._cipher,ge=ce.blockSize;J.call(this,ne,te,ge),ce.encryptBlock(ne,te),this._prevBlock=ne.slice(te,te+ge)}}),G.Decryptor=G.extend({processBlock:function(ne,te){var ce=this._cipher,ge=ce.blockSize,oe=ne.slice(te,te+ge);ce.decryptBlock(ne,te),J.call(this,ne,te,ge),this._prevBlock=oe}});function J(ne,te,ce){var ge,oe=this._iv;oe?(ge=oe,this._iv=s):ge=this._prevBlock;for(var ae=0;ae<ce;ae++)ne[te+ae]^=ge[ae]}return G}(),D=c.pad={},x=D.Pkcs7={pad:function(G,J){for(var ne=J*4,te=ne-G.sigBytes%ne,ce=te<<24|te<<16|te<<8|te,ge=[],oe=0;oe<te;oe+=4)ge.push(ce);var ae=v.create(ge,te);G.concat(ae)},unpad:function(G){var J=G.words[G.sigBytes-1>>>2]&255;G.sigBytes-=J}};d.BlockCipher=A.extend({cfg:A.cfg.extend({mode:P,padding:x}),reset:function(){var G;A.reset.call(this);var J=this.cfg,ne=J.iv,te=J.mode;this._xformMode==this._ENC_XFORM_MODE?G=te.createEncryptor:(G=te.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==G?this._mode.init(this,ne&&ne.words):(this._mode=G.call(te,this,ne&&ne.words),this._mode.__creator=G)},_doProcessBlock:function(G,J){this._mode.processBlock(G,J)},_doFinalize:function(){var G,J=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(J.pad(this._data,this.blockSize),G=this._process(!0)):(G=this._process(!0),J.unpad(G)),G},blockSize:128/32});var L=d.CipherParams=f.extend({init:function(G){this.mixIn(G)},toString:function(G){return(G||this.formatter).stringify(this)}}),M=c.format={},F=M.OpenSSL={stringify:function(G){var J,ne=G.ciphertext,te=G.salt;return te?J=v.create([1398893684,1701076831]).concat(te).concat(ne):J=ne,J.toString(C)},parse:function(G){var J,ne=C.parse(G),te=ne.words;return te[0]==1398893684&&te[1]==1701076831&&(J=v.create(te.slice(2,4)),te.splice(0,4),ne.sigBytes-=16),L.create({ciphertext:ne,salt:J})}},V=d.SerializableCipher=f.extend({cfg:f.extend({format:F}),encrypt:function(G,J,ne,te){te=this.cfg.extend(te);var ce=G.createEncryptor(ne,te),ge=ce.finalize(J),oe=ce.cfg;return L.create({ciphertext:ge,key:ne,iv:oe.iv,algorithm:G,mode:oe.mode,padding:oe.padding,blockSize:G.blockSize,formatter:te.format})},decrypt:function(G,J,ne,te){te=this.cfg.extend(te),J=this._parse(J,te.format);var ce=G.createDecryptor(ne,te).finalize(J.ciphertext);return ce},_parse:function(G,J){return typeof G=="string"?J.parse(G,this):G}}),$=c.kdf={},z=$.OpenSSL={execute:function(G,J,ne,te,ce){if(te||(te=v.random(64/8)),ce)var ge=T.create({keySize:J+ne,hasher:ce}).compute(G,te);else var ge=T.create({keySize:J+ne}).compute(G,te);var oe=v.create(ge.words.slice(J),ne*4);return ge.sigBytes=J*4,L.create({key:ge,iv:oe,salt:te})}},K=d.PasswordBasedCipher=V.extend({cfg:V.cfg.extend({kdf:z}),encrypt:function(G,J,ne,te){te=this.cfg.extend(te);var ce=te.kdf.execute(ne,G.keySize,G.ivSize,te.salt,te.hasher);te.iv=ce.iv;var ge=V.encrypt.call(this,G,J,ce.key,te);return ge.mixIn(ce),ge},decrypt:function(G,J,ne,te){te=this.cfg.extend(te),J=this._parse(J,te.format);var ce=te.kdf.execute(ne,G.keySize,G.ivSize,J.salt,te.hasher);te.iv=ce.iv;var ge=V.decrypt.call(this,G,J,ce.key,te);return ge}})}()})}(Px)),Px.exports}var Dx={exports:{}},YW;function jke(){return YW||(YW=1,function(t,r){(function(o,s,c){t.exports=s(Sr(),jo())})(On,function(o){return o.mode.CFB=function(){var s=o.lib.BlockCipherMode.extend();s.Encryptor=s.extend({processBlock:function(d,f){var v=this._cipher,g=v.blockSize;c.call(this,d,f,g,v),this._prevBlock=d.slice(f,f+g)}}),s.Decryptor=s.extend({processBlock:function(d,f){var v=this._cipher,g=v.blockSize,_=d.slice(f,f+g);c.call(this,d,f,g,v),this._prevBlock=_}});function c(d,f,v,g){var _,C=this._iv;C?(_=C.slice(0),this._iv=void 0):_=this._prevBlock,g.encryptBlock(_,0);for(var b=0;b<v;b++)d[f+b]^=_[b]}return s}(),o.mode.CFB})}(Dx)),Dx.exports}var Lx={exports:{}},qW;function $ke(){return qW||(qW=1,function(t,r){(function(o,s,c){t.exports=s(Sr(),jo())})(On,function(o){return o.mode.CTR=function(){var s=o.lib.BlockCipherMode.extend(),c=s.Encryptor=s.extend({processBlock:function(d,f){var v=this._cipher,g=v.blockSize,_=this._iv,C=this._counter;_&&(C=this._counter=_.slice(0),this._iv=void 0);var b=C.slice(0);v.encryptBlock(b,0),C[g-1]=C[g-1]+1|0;for(var T=0;T<g;T++)d[f+T]^=b[T]}});return s.Decryptor=c,s}(),o.mode.CTR})}(Lx)),Lx.exports}var kx={exports:{}},XW;function Hke(){return XW||(XW=1,function(t,r){(function(o,s,c){t.exports=s(Sr(),jo())})(On,function(o){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return o.mode.CTRGladman=function(){var s=o.lib.BlockCipherMode.extend();function c(v){if((v>>24&255)===255){var g=v>>16&255,_=v>>8&255,C=v&255;g===255?(g=0,_===255?(_=0,C===255?C=0:++C):++_):++g,v=0,v+=g<<16,v+=_<<8,v+=C}else v+=1<<24;return v}function d(v){return(v[0]=c(v[0]))===0&&(v[1]=c(v[1])),v}var f=s.Encryptor=s.extend({processBlock:function(v,g){var _=this._cipher,C=_.blockSize,b=this._iv,T=this._counter;b&&(T=this._counter=b.slice(0),this._iv=void 0),d(T);var A=T.slice(0);_.encryptBlock(A,0);for(var I=0;I<C;I++)v[g+I]^=A[I]}});return s.Decryptor=f,s}(),o.mode.CTRGladman})}(kx)),kx.exports}var Mx={exports:{}},JW;function zke(){return JW||(JW=1,function(t,r){(function(o,s,c){t.exports=s(Sr(),jo())})(On,function(o){return o.mode.OFB=function(){var s=o.lib.BlockCipherMode.extend(),c=s.Encryptor=s.extend({processBlock:function(d,f){var v=this._cipher,g=v.blockSize,_=this._iv,C=this._keystream;_&&(C=this._keystream=_.slice(0),this._iv=void 0),v.encryptBlock(C,0);for(var b=0;b<g;b++)d[f+b]^=C[b]}});return s.Decryptor=c,s}(),o.mode.OFB})}(Mx)),Mx.exports}var Fx={exports:{}},QW;function Wke(){return QW||(QW=1,function(t,r){(function(o,s,c){t.exports=s(Sr(),jo())})(On,function(o){return o.mode.ECB=function(){var s=o.lib.BlockCipherMode.extend();return s.Encryptor=s.extend({processBlock:function(c,d){this._cipher.encryptBlock(c,d)}}),s.Decryptor=s.extend({processBlock:function(c,d){this._cipher.decryptBlock(c,d)}}),s}(),o.mode.ECB})}(Fx)),Fx.exports}var Ux={exports:{}},ZW;function Gke(){return ZW||(ZW=1,function(t,r){(function(o,s,c){t.exports=s(Sr(),jo())})(On,function(o){return o.pad.AnsiX923={pad:function(s,c){var d=s.sigBytes,f=c*4,v=f-d%f,g=d+v-1;s.clamp(),s.words[g>>>2]|=v<<24-g%4*8,s.sigBytes+=v},unpad:function(s){var c=s.words[s.sigBytes-1>>>2]&255;s.sigBytes-=c}},o.pad.Ansix923})}(Ux)),Ux.exports}var Bx={exports:{}},eG;function Kke(){return eG||(eG=1,function(t,r){(function(o,s,c){t.exports=s(Sr(),jo())})(On,function(o){return o.pad.Iso10126={pad:function(s,c){var d=c*4,f=d-s.sigBytes%d;s.concat(o.lib.WordArray.random(f-1)).concat(o.lib.WordArray.create([f<<24],1))},unpad:function(s){var c=s.words[s.sigBytes-1>>>2]&255;s.sigBytes-=c}},o.pad.Iso10126})}(Bx)),Bx.exports}var Vx={exports:{}},tG;function Yke(){return tG||(tG=1,function(t,r){(function(o,s,c){t.exports=s(Sr(),jo())})(On,function(o){return o.pad.Iso97971={pad:function(s,c){s.concat(o.lib.WordArray.create([2147483648],1)),o.pad.ZeroPadding.pad(s,c)},unpad:function(s){o.pad.ZeroPadding.unpad(s),s.sigBytes--}},o.pad.Iso97971})}(Vx)),Vx.exports}var jx={exports:{}},nG;function qke(){return nG||(nG=1,function(t,r){(function(o,s,c){t.exports=s(Sr(),jo())})(On,function(o){return o.pad.ZeroPadding={pad:function(s,c){var d=c*4;s.clamp(),s.sigBytes+=d-(s.sigBytes%d||d)},unpad:function(s){for(var c=s.words,d=s.sigBytes-1,d=s.sigBytes-1;d>=0;d--)if(c[d>>>2]>>>24-d%4*8&255){s.sigBytes=d+1;break}}},o.pad.ZeroPadding})}(jx)),jx.exports}var $x={exports:{}},rG;function Xke(){return rG||(rG=1,function(t,r){(function(o,s,c){t.exports=s(Sr(),jo())})(On,function(o){return o.pad.NoPadding={pad:function(){},unpad:function(){}},o.pad.NoPadding})}($x)),$x.exports}var Hx={exports:{}},iG;function Jke(){return iG||(iG=1,function(t,r){(function(o,s,c){t.exports=s(Sr(),jo())})(On,function(o){return function(s){var c=o,d=c.lib,f=d.CipherParams,v=c.enc,g=v.Hex,_=c.format;_.Hex={stringify:function(C){return C.ciphertext.toString(g)},parse:function(C){var b=g.parse(C);return f.create({ciphertext:b})}}}(),o.format.Hex})}(Hx)),Hx.exports}var zx={exports:{}},oG;function Qke(){return oG||(oG=1,function(t,r){(function(o,s,c){t.exports=s(Sr(),of(),af(),kd(),jo())})(On,function(o){return function(){var s=o,c=s.lib,d=c.BlockCipher,f=s.algo,v=[],g=[],_=[],C=[],b=[],T=[],A=[],I=[],N=[],P=[];(function(){for(var L=[],M=0;M<256;M++)M<128?L[M]=M<<1:L[M]=M<<1^283;for(var F=0,V=0,M=0;M<256;M++){var $=V^V<<1^V<<2^V<<3^V<<4;$=$>>>8^$&255^99,v[F]=$,g[$]=F;var z=L[F],K=L[z],G=L[K],J=L[$]*257^$*16843008;_[F]=J<<24|J>>>8,C[F]=J<<16|J>>>16,b[F]=J<<8|J>>>24,T[F]=J;var J=G*16843009^K*65537^z*257^F*16843008;A[$]=J<<24|J>>>8,I[$]=J<<16|J>>>16,N[$]=J<<8|J>>>24,P[$]=J,F?(F=z^L[L[L[G^z]]],V^=L[L[V]]):F=V=1}})();var D=[0,1,2,4,8,16,32,64,128,27,54],x=f.AES=d.extend({_doReset:function(){var L;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var M=this._keyPriorReset=this._key,F=M.words,V=M.sigBytes/4,$=this._nRounds=V+6,z=($+1)*4,K=this._keySchedule=[],G=0;G<z;G++)G<V?K[G]=F[G]:(L=K[G-1],G%V?V>6&&G%V==4&&(L=v[L>>>24]<<24|v[L>>>16&255]<<16|v[L>>>8&255]<<8|v[L&255]):(L=L<<8|L>>>24,L=v[L>>>24]<<24|v[L>>>16&255]<<16|v[L>>>8&255]<<8|v[L&255],L^=D[G/V|0]<<24),K[G]=K[G-V]^L);for(var J=this._invKeySchedule=[],ne=0;ne<z;ne++){var G=z-ne;if(ne%4)var L=K[G];else var L=K[G-4];ne<4||G<=4?J[ne]=L:J[ne]=A[v[L>>>24]]^I[v[L>>>16&255]]^N[v[L>>>8&255]]^P[v[L&255]]}}},encryptBlock:function(L,M){this._doCryptBlock(L,M,this._keySchedule,_,C,b,T,v)},decryptBlock:function(L,M){var F=L[M+1];L[M+1]=L[M+3],L[M+3]=F,this._doCryptBlock(L,M,this._invKeySchedule,A,I,N,P,g);var F=L[M+1];L[M+1]=L[M+3],L[M+3]=F},_doCryptBlock:function(L,M,F,V,$,z,K,G){for(var J=this._nRounds,ne=L[M]^F[0],te=L[M+1]^F[1],ce=L[M+2]^F[2],ge=L[M+3]^F[3],oe=4,ae=1;ae<J;ae++){var ie=V[ne>>>24]^$[te>>>16&255]^z[ce>>>8&255]^K[ge&255]^F[oe++],ve=V[te>>>24]^$[ce>>>16&255]^z[ge>>>8&255]^K[ne&255]^F[oe++],me=V[ce>>>24]^$[ge>>>16&255]^z[ne>>>8&255]^K[te&255]^F[oe++],le=V[ge>>>24]^$[ne>>>16&255]^z[te>>>8&255]^K[ce&255]^F[oe++];ne=ie,te=ve,ce=me,ge=le}var ie=(G[ne>>>24]<<24|G[te>>>16&255]<<16|G[ce>>>8&255]<<8|G[ge&255])^F[oe++],ve=(G[te>>>24]<<24|G[ce>>>16&255]<<16|G[ge>>>8&255]<<8|G[ne&255])^F[oe++],me=(G[ce>>>24]<<24|G[ge>>>16&255]<<16|G[ne>>>8&255]<<8|G[te&255])^F[oe++],le=(G[ge>>>24]<<24|G[ne>>>16&255]<<16|G[te>>>8&255]<<8|G[ce&255])^F[oe++];L[M]=ie,L[M+1]=ve,L[M+2]=me,L[M+3]=le},keySize:256/32});s.AES=d._createHelper(x)}(),o.AES})}(zx)),zx.exports}var Wx={exports:{}},aG;function Zke(){return aG||(aG=1,function(t,r){(function(o,s,c){t.exports=s(Sr(),of(),af(),kd(),jo())})(On,function(o){return function(){var s=o,c=s.lib,d=c.WordArray,f=c.BlockCipher,v=s.algo,g=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],_=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],C=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],b=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],T=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],A=v.DES=f.extend({_doReset:function(){for(var D=this._key,x=D.words,L=[],M=0;M<56;M++){var F=g[M]-1;L[M]=x[F>>>5]>>>31-F%32&1}for(var V=this._subKeys=[],$=0;$<16;$++){for(var z=V[$]=[],K=C[$],M=0;M<24;M++)z[M/6|0]|=L[(_[M]-1+K)%28]<<31-M%6,z[4+(M/6|0)]|=L[28+(_[M+24]-1+K)%28]<<31-M%6;z[0]=z[0]<<1|z[0]>>>31;for(var M=1;M<7;M++)z[M]=z[M]>>>(M-1)*4+3;z[7]=z[7]<<5|z[7]>>>27}for(var G=this._invSubKeys=[],M=0;M<16;M++)G[M]=V[15-M]},encryptBlock:function(D,x){this._doCryptBlock(D,x,this._subKeys)},decryptBlock:function(D,x){this._doCryptBlock(D,x,this._invSubKeys)},_doCryptBlock:function(D,x,L){this._lBlock=D[x],this._rBlock=D[x+1],I.call(this,4,252645135),I.call(this,16,65535),N.call(this,2,858993459),N.call(this,8,16711935),I.call(this,1,1431655765);for(var M=0;M<16;M++){for(var F=L[M],V=this._lBlock,$=this._rBlock,z=0,K=0;K<8;K++)z|=b[K][(($^F[K])&T[K])>>>0];this._lBlock=$,this._rBlock=V^z}var G=this._lBlock;this._lBlock=this._rBlock,this._rBlock=G,I.call(this,1,1431655765),N.call(this,8,16711935),N.call(this,2,858993459),I.call(this,16,65535),I.call(this,4,252645135),D[x]=this._lBlock,D[x+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function I(D,x){var L=(this._lBlock>>>D^this._rBlock)&x;this._rBlock^=L,this._lBlock^=L<<D}function N(D,x){var L=(this._rBlock>>>D^this._lBlock)&x;this._lBlock^=L,this._rBlock^=L<<D}s.DES=f._createHelper(A);var P=v.TripleDES=f.extend({_doReset:function(){var D=this._key,x=D.words;if(x.length!==2&&x.length!==4&&x.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var L=x.slice(0,2),M=x.length<4?x.slice(0,2):x.slice(2,4),F=x.length<6?x.slice(0,2):x.slice(4,6);this._des1=A.createEncryptor(d.create(L)),this._des2=A.createEncryptor(d.create(M)),this._des3=A.createEncryptor(d.create(F))},encryptBlock:function(D,x){this._des1.encryptBlock(D,x),this._des2.decryptBlock(D,x),this._des3.encryptBlock(D,x)},decryptBlock:function(D,x){this._des3.decryptBlock(D,x),this._des2.encryptBlock(D,x),this._des1.decryptBlock(D,x)},keySize:192/32,ivSize:64/32,blockSize:64/32});s.TripleDES=f._createHelper(P)}(),o.TripleDES})}(Wx)),Wx.exports}var Gx={exports:{}},sG;function eMe(){return sG||(sG=1,function(t,r){(function(o,s,c){t.exports=s(Sr(),of(),af(),kd(),jo())})(On,function(o){return function(){var s=o,c=s.lib,d=c.StreamCipher,f=s.algo,v=f.RC4=d.extend({_doReset:function(){for(var C=this._key,b=C.words,T=C.sigBytes,A=this._S=[],I=0;I<256;I++)A[I]=I;for(var I=0,N=0;I<256;I++){var P=I%T,D=b[P>>>2]>>>24-P%4*8&255;N=(N+A[I]+D)%256;var x=A[I];A[I]=A[N],A[N]=x}this._i=this._j=0},_doProcessBlock:function(C,b){C[b]^=g.call(this)},keySize:256/32,ivSize:0});function g(){for(var C=this._S,b=this._i,T=this._j,A=0,I=0;I<4;I++){b=(b+1)%256,T=(T+C[b])%256;var N=C[b];C[b]=C[T],C[T]=N,A|=C[(C[b]+C[T])%256]<<24-I*8}return this._i=b,this._j=T,A}s.RC4=d._createHelper(v);var _=f.RC4Drop=v.extend({cfg:v.cfg.extend({drop:192}),_doReset:function(){v._doReset.call(this);for(var C=this.cfg.drop;C>0;C--)g.call(this)}});s.RC4Drop=d._createHelper(_)}(),o.RC4})}(Gx)),Gx.exports}var Kx={exports:{}},cG;function tMe(){return cG||(cG=1,function(t,r){(function(o,s,c){t.exports=s(Sr(),of(),af(),kd(),jo())})(On,function(o){return function(){var s=o,c=s.lib,d=c.StreamCipher,f=s.algo,v=[],g=[],_=[],C=f.Rabbit=d.extend({_doReset:function(){for(var T=this._key.words,A=this.cfg.iv,I=0;I<4;I++)T[I]=(T[I]<<8|T[I]>>>24)&16711935|(T[I]<<24|T[I]>>>8)&4278255360;var N=this._X=[T[0],T[3]<<16|T[2]>>>16,T[1],T[0]<<16|T[3]>>>16,T[2],T[1]<<16|T[0]>>>16,T[3],T[2]<<16|T[1]>>>16],P=this._C=[T[2]<<16|T[2]>>>16,T[0]&4294901760|T[1]&65535,T[3]<<16|T[3]>>>16,T[1]&4294901760|T[2]&65535,T[0]<<16|T[0]>>>16,T[2]&4294901760|T[3]&65535,T[1]<<16|T[1]>>>16,T[3]&4294901760|T[0]&65535];this._b=0;for(var I=0;I<4;I++)b.call(this);for(var I=0;I<8;I++)P[I]^=N[I+4&7];if(A){var D=A.words,x=D[0],L=D[1],M=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,F=(L<<8|L>>>24)&16711935|(L<<24|L>>>8)&4278255360,V=M>>>16|F&4294901760,$=F<<16|M&65535;P[0]^=M,P[1]^=V,P[2]^=F,P[3]^=$,P[4]^=M,P[5]^=V,P[6]^=F,P[7]^=$;for(var I=0;I<4;I++)b.call(this)}},_doProcessBlock:function(T,A){var I=this._X;b.call(this),v[0]=I[0]^I[5]>>>16^I[3]<<16,v[1]=I[2]^I[7]>>>16^I[5]<<16,v[2]=I[4]^I[1]>>>16^I[7]<<16,v[3]=I[6]^I[3]>>>16^I[1]<<16;for(var N=0;N<4;N++)v[N]=(v[N]<<8|v[N]>>>24)&16711935|(v[N]<<24|v[N]>>>8)&4278255360,T[A+N]^=v[N]},blockSize:128/32,ivSize:64/32});function b(){for(var T=this._X,A=this._C,I=0;I<8;I++)g[I]=A[I];A[0]=A[0]+1295307597+this._b|0,A[1]=A[1]+3545052371+(A[0]>>>0<g[0]>>>0?1:0)|0,A[2]=A[2]+886263092+(A[1]>>>0<g[1]>>>0?1:0)|0,A[3]=A[3]+1295307597+(A[2]>>>0<g[2]>>>0?1:0)|0,A[4]=A[4]+3545052371+(A[3]>>>0<g[3]>>>0?1:0)|0,A[5]=A[5]+886263092+(A[4]>>>0<g[4]>>>0?1:0)|0,A[6]=A[6]+1295307597+(A[5]>>>0<g[5]>>>0?1:0)|0,A[7]=A[7]+3545052371+(A[6]>>>0<g[6]>>>0?1:0)|0,this._b=A[7]>>>0<g[7]>>>0?1:0;for(var I=0;I<8;I++){var N=T[I]+A[I],P=N&65535,D=N>>>16,x=((P*P>>>17)+P*D>>>15)+D*D,L=((N&4294901760)*N|0)+((N&65535)*N|0);_[I]=x^L}T[0]=_[0]+(_[7]<<16|_[7]>>>16)+(_[6]<<16|_[6]>>>16)|0,T[1]=_[1]+(_[0]<<8|_[0]>>>24)+_[7]|0,T[2]=_[2]+(_[1]<<16|_[1]>>>16)+(_[0]<<16|_[0]>>>16)|0,T[3]=_[3]+(_[2]<<8|_[2]>>>24)+_[1]|0,T[4]=_[4]+(_[3]<<16|_[3]>>>16)+(_[2]<<16|_[2]>>>16)|0,T[5]=_[5]+(_[4]<<8|_[4]>>>24)+_[3]|0,T[6]=_[6]+(_[5]<<16|_[5]>>>16)+(_[4]<<16|_[4]>>>16)|0,T[7]=_[7]+(_[6]<<8|_[6]>>>24)+_[5]|0}s.Rabbit=d._createHelper(C)}(),o.Rabbit})}(Kx)),Kx.exports}var Yx={exports:{}},lG;function nMe(){return lG||(lG=1,function(t,r){(function(o,s,c){t.exports=s(Sr(),of(),af(),kd(),jo())})(On,function(o){return function(){var s=o,c=s.lib,d=c.StreamCipher,f=s.algo,v=[],g=[],_=[],C=f.RabbitLegacy=d.extend({_doReset:function(){var T=this._key.words,A=this.cfg.iv,I=this._X=[T[0],T[3]<<16|T[2]>>>16,T[1],T[0]<<16|T[3]>>>16,T[2],T[1]<<16|T[0]>>>16,T[3],T[2]<<16|T[1]>>>16],N=this._C=[T[2]<<16|T[2]>>>16,T[0]&4294901760|T[1]&65535,T[3]<<16|T[3]>>>16,T[1]&4294901760|T[2]&65535,T[0]<<16|T[0]>>>16,T[2]&4294901760|T[3]&65535,T[1]<<16|T[1]>>>16,T[3]&4294901760|T[0]&65535];this._b=0;for(var P=0;P<4;P++)b.call(this);for(var P=0;P<8;P++)N[P]^=I[P+4&7];if(A){var D=A.words,x=D[0],L=D[1],M=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,F=(L<<8|L>>>24)&16711935|(L<<24|L>>>8)&4278255360,V=M>>>16|F&4294901760,$=F<<16|M&65535;N[0]^=M,N[1]^=V,N[2]^=F,N[3]^=$,N[4]^=M,N[5]^=V,N[6]^=F,N[7]^=$;for(var P=0;P<4;P++)b.call(this)}},_doProcessBlock:function(T,A){var I=this._X;b.call(this),v[0]=I[0]^I[5]>>>16^I[3]<<16,v[1]=I[2]^I[7]>>>16^I[5]<<16,v[2]=I[4]^I[1]>>>16^I[7]<<16,v[3]=I[6]^I[3]>>>16^I[1]<<16;for(var N=0;N<4;N++)v[N]=(v[N]<<8|v[N]>>>24)&16711935|(v[N]<<24|v[N]>>>8)&4278255360,T[A+N]^=v[N]},blockSize:128/32,ivSize:64/32});function b(){for(var T=this._X,A=this._C,I=0;I<8;I++)g[I]=A[I];A[0]=A[0]+1295307597+this._b|0,A[1]=A[1]+3545052371+(A[0]>>>0<g[0]>>>0?1:0)|0,A[2]=A[2]+886263092+(A[1]>>>0<g[1]>>>0?1:0)|0,A[3]=A[3]+1295307597+(A[2]>>>0<g[2]>>>0?1:0)|0,A[4]=A[4]+3545052371+(A[3]>>>0<g[3]>>>0?1:0)|0,A[5]=A[5]+886263092+(A[4]>>>0<g[4]>>>0?1:0)|0,A[6]=A[6]+1295307597+(A[5]>>>0<g[5]>>>0?1:0)|0,A[7]=A[7]+3545052371+(A[6]>>>0<g[6]>>>0?1:0)|0,this._b=A[7]>>>0<g[7]>>>0?1:0;for(var I=0;I<8;I++){var N=T[I]+A[I],P=N&65535,D=N>>>16,x=((P*P>>>17)+P*D>>>15)+D*D,L=((N&4294901760)*N|0)+((N&65535)*N|0);_[I]=x^L}T[0]=_[0]+(_[7]<<16|_[7]>>>16)+(_[6]<<16|_[6]>>>16)|0,T[1]=_[1]+(_[0]<<8|_[0]>>>24)+_[7]|0,T[2]=_[2]+(_[1]<<16|_[1]>>>16)+(_[0]<<16|_[0]>>>16)|0,T[3]=_[3]+(_[2]<<8|_[2]>>>24)+_[1]|0,T[4]=_[4]+(_[3]<<16|_[3]>>>16)+(_[2]<<16|_[2]>>>16)|0,T[5]=_[5]+(_[4]<<8|_[4]>>>24)+_[3]|0,T[6]=_[6]+(_[5]<<16|_[5]>>>16)+(_[4]<<16|_[4]>>>16)|0,T[7]=_[7]+(_[6]<<8|_[6]>>>24)+_[5]|0}s.RabbitLegacy=d._createHelper(C)}(),o.RabbitLegacy})}(Yx)),Yx.exports}var qx={exports:{}},uG;function rMe(){return uG||(uG=1,function(t,r){(function(o,s,c){t.exports=s(Sr(),of(),af(),kd(),jo())})(On,function(o){return function(){var s=o,c=s.lib,d=c.BlockCipher,f=s.algo;const v=16,g=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],_=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var C={pbox:[],sbox:[]};function b(P,D){let x=D>>24&255,L=D>>16&255,M=D>>8&255,F=D&255,V=P.sbox[0][x]+P.sbox[1][L];return V=V^P.sbox[2][M],V=V+P.sbox[3][F],V}function T(P,D,x){let L=D,M=x,F;for(let V=0;V<v;++V)L=L^P.pbox[V],M=b(P,L)^M,F=L,L=M,M=F;return F=L,L=M,M=F,M=M^P.pbox[v],L=L^P.pbox[v+1],{left:L,right:M}}function A(P,D,x){let L=D,M=x,F;for(let V=v+1;V>1;--V)L=L^P.pbox[V],M=b(P,L)^M,F=L,L=M,M=F;return F=L,L=M,M=F,M=M^P.pbox[1],L=L^P.pbox[0],{left:L,right:M}}function I(P,D,x){for(let $=0;$<4;$++){P.sbox[$]=[];for(let z=0;z<256;z++)P.sbox[$][z]=_[$][z]}let L=0;for(let $=0;$<v+2;$++)P.pbox[$]=g[$]^D[L],L++,L>=x&&(L=0);let M=0,F=0,V=0;for(let $=0;$<v+2;$+=2)V=T(P,M,F),M=V.left,F=V.right,P.pbox[$]=M,P.pbox[$+1]=F;for(let $=0;$<4;$++)for(let z=0;z<256;z+=2)V=T(P,M,F),M=V.left,F=V.right,P.sbox[$][z]=M,P.sbox[$][z+1]=F;return!0}var N=f.Blowfish=d.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var P=this._keyPriorReset=this._key,D=P.words,x=P.sigBytes/4;I(C,D,x)}},encryptBlock:function(P,D){var x=T(C,P[D],P[D+1]);P[D]=x.left,P[D+1]=x.right},decryptBlock:function(P,D){var x=A(C,P[D],P[D+1]);P[D]=x.left,P[D+1]=x.right},blockSize:64/32,keySize:128/32,ivSize:64/32});s.Blowfish=d._createHelper(N)}(),o.Blowfish})}(qx)),qx.exports}(function(t,r){(function(o,s,c){t.exports=s(Sr(),DT(),Dke(),Lke(),of(),kke(),af(),hZ(),wL(),Mke(),fZ(),Fke(),Uke(),Bke(),IL(),Vke(),kd(),jo(),jke(),$ke(),Hke(),zke(),Wke(),Gke(),Kke(),Yke(),qke(),Xke(),Jke(),Qke(),Zke(),eMe(),tMe(),nMe(),rMe())})(On,function(o){return o})})(dZ);var iMe=dZ.exports;const dG=Od(iMe);let pZ="U2FsdGVkX1/nIO3//tPu/+LNS4S4tsxT3MzmKKuvXDxFFYxlol+eYrZkKcLoUBHMNoDedcuF62hF/qfPSSy59Q==";const oMe=10;{const t=dG.AES.decrypt("U2FsdGVkX1/nIO3//tPu/+LNS4S4tsxT3MzmKKuvXDxFFYxlol+eYrZkKcLoUBHMNoDedcuF62hF/qfPSSy59Q==","U2FsdGVkX1/fp5K6GAphzVxz");pZ=JSON.parse(t.toString(dG.enc.Utf8))}const Jt={appId:pZ,channel:{}.AGORA_CHANNEL||"test",token:{}.AGORA_TOKEN?{}.AGORA_TOKEN:null,ShareScreenUID:oMe};function aMe(){return[{channel:{}.AGORA_CHANNEL_0||"test0",token:{}.AGORA_TOKEN_0},{channel:{}.AGORA_CHANNEL_1||"test1",token:{}.AGORA_TOKEN_1},{channel:{}.AGORA_CHANNEL_2||"test2",token:{}.AGORA_TOKEN_2},{channel:{}.AGORA_CHANNEL_3||"test3",token:{}.AGORA_TOKEN_3},{channel:{}.AGORA_CHANNEL_4||"test4",token:{}.AGORA_TOKEN_4},{channel:{}.AGORA_CHANNEL_5||"test5",token:{}.AGORA_TOKEN_5},{channel:{}.AGORA_CHANNEL_6||"test6",token:{}.AGORA_TOKEN_6},{channel:{}.AGORA_CHANNEL_7||"test7",token:{}.AGORA_TOKEN_7},{channel:{}.AGORA_CHANNEL_8||"test8",token:{}.AGORA_TOKEN_8},{channel:{}.AGORA_CHANNEL_9||"test9",token:{}.AGORA_TOKEN_9}]}const el=t=>{wW(String(t));const r=wke();return wW(),r},Ul=()=>"https://www.agora.io/en/wp-content/uploads/2022/10/3d-spatial-audio-icon.svg";function uE({micOn:t,cameraOn:r,renderAction:o,renderLocalUser:s,renderRemoteUsers:c,showUserInfo:d=!0}){const f=gu(),v=Rb()||0,g=y.useMemo(()=>el(v),[v]),_=y.useMemo(()=>Ul(),[]),C=tl(),b=C.filter(N=>N.hasAudio||N.hasVideo),T=t||r,{localMicrophoneTrack:A}=Cm(t),{localCameraTrack:I}=bm(r);return Nd([A,I]),fe.jsxs(fe.Fragment,{children:[o?o():void 0,d&&fe.jsx(_L,{published:b.length+(T?1:0),total:C.length+1}),fe.jsxs(hc,{children:[f&&(s?s():fe.jsx(hc.Item,{children:fe.jsx(EL,{audioTrack:A,cameraOn:r,cover:_,micOn:t,videoTrack:I,children:fe.jsx(mu,{children:`${g}{${v}}`})})})),c?c():void 0]})]})}const Hy=({children:t,clientConfig:r={mode:"rtc",codec:"vp8"}})=>{const[o]=y.useState(()=>lu.createClient(r));return fe.jsx(iK,{client:o,children:t})},La=({calling:t,micOn:r,cameraOn:o,setMic:s,setCamera:c,setCalling:d})=>fe.jsx(fe.Fragment,{children:fe.jsxs("div",{className:"inset-0 top-a flex justify-center items-center gap-3 px-6 py-3 bg-#21242c c-coolgray-3",children:[fe.jsxs("div",{className:"flex-1 flex top-0 left-0 h-full items-center gap-3 px-6 py-3",children:[s&&fe.jsx("button",{className:"btn",onClick:()=>s(),children:r?fe.jsx(rke,{}):fe.jsx(ike,{})}),c&&fe.jsx("button",{className:"btn",onClick:()=>c(),children:o?fe.jsx(oke,{}):fe.jsx(ake,{})})]}),d&&fe.jsx("button",{className:vL("btn btn-phone",{"btn-phone-active":t}),onClick:()=>d(),children:t?fe.jsx("i",{className:"i-mdi-phone-hangup"}):fe.jsx("i",{className:"i-mdi-phone"})})]})}),sMe=({screenShareOn:t,screenTrack:r,onCloseScreenShare:o})=>{const[s]=y.useState(()=>lu.createClient({mode:"rtc",codec:"vp8"})),[c,d]=y.useState(null),[f,v]=y.useState(null);return ro({appid:Jt.appId,channel:Jt.channel,token:Jt.token,uid:Jt.ShareScreenUID},t,s),y.useEffect(()=>{r?Array.isArray(r)?(d(r.filter(g=>g.trackMediaType==="video")[0]),v(r.filter(g=>g.trackMediaType==="audio")[0])):d(r):(v(null),d(null))},[r]),Nd([c,f],t,s),nK(c,"track-ended",()=>{console.log("screen sharing ended"),o&&o()}),fe.jsxs(Cge,{client:s,children:[t&&c&&fe.jsx(Hv,{disabled:!t,play:t,style:{width:"300px",height:"300px"},track:c}),f&&fe.jsx(wb,{disabled:!t,track:f})]})},hG=t=>{let r;const o=new Set,s=(C,b)=>{const T=typeof C=="function"?C(r):C;if(!Object.is(T,r)){const A=r;r=b??(typeof T!="object"||T===null)?T:Object.assign({},r,T),o.forEach(I=>I(r,A))}},c=()=>r,g={setState:s,getState:c,getInitialState:()=>_,subscribe:C=>(o.add(C),()=>o.delete(C)),destroy:()=>{o.clear()}},_=r=t(s,c,g);return g},cMe=t=>t?hG(t):hG;var mZ={exports:{}},gZ={},vZ={exports:{}},EZ={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _m=y;function lMe(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var uMe=typeof Object.is=="function"?Object.is:lMe,dMe=_m.useState,hMe=_m.useEffect,fMe=_m.useLayoutEffect,pMe=_m.useDebugValue;function mMe(t,r){var o=r(),s=dMe({inst:{value:o,getSnapshot:r}}),c=s[0].inst,d=s[1];return fMe(function(){c.value=o,c.getSnapshot=r,Xx(c)&&d({inst:c})},[t,o,r]),hMe(function(){return Xx(c)&&d({inst:c}),t(function(){Xx(c)&&d({inst:c})})},[t]),pMe(o),o}function Xx(t){var r=t.getSnapshot;t=t.value;try{var o=r();return!uMe(t,o)}catch{return!0}}function gMe(t,r){return r()}var vMe=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?gMe:mMe;EZ.useSyncExternalStore=_m.useSyncExternalStore!==void 0?_m.useSyncExternalStore:vMe;vZ.exports=EZ;var EMe=vZ.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LT=y,_Me=EMe;function SMe(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var yMe=typeof Object.is=="function"?Object.is:SMe,CMe=_Me.useSyncExternalStore,bMe=LT.useRef,TMe=LT.useEffect,RMe=LT.useMemo,wMe=LT.useDebugValue;gZ.useSyncExternalStoreWithSelector=function(t,r,o,s,c){var d=bMe(null);if(d.current===null){var f={hasValue:!1,value:null};d.current=f}else f=d.current;d=RMe(function(){function g(A){if(!_){if(_=!0,C=A,A=s(A),c!==void 0&&f.hasValue){var I=f.value;if(c(I,A))return b=I}return b=A}if(I=b,yMe(C,A))return I;var N=s(A);return c!==void 0&&c(I,N)?(C=A,I):(C=A,b=N)}var _=!1,C,b,T=o===void 0?null:o;return[function(){return g(r())},T===null?void 0:function(){return g(T())}]},[r,o,s,c]);var v=CMe(t,d[0],d[1]);return TMe(function(){f.hasValue=!0,f.value=v},[v]),wMe(v),v};mZ.exports=gZ;var IMe=mZ.exports;const AMe=Od(IMe),{useDebugValue:OMe}=ze,{useSyncExternalStoreWithSelector:xMe}=AMe;const NMe=t=>t;function PMe(t,r=NMe,o){const s=xMe(t.subscribe,t.getState,t.getServerState||t.getInitialState,r,o);return OMe(s),s}const fG=t=>{const r=typeof t=="function"?cMe(t):t,o=(s,c)=>PMe(r,s,c);return Object.assign(o,r),o},DMe=t=>t?fG(t):fG,LMe=Jt.appId,kMe=aMe(),rv=DMe((t,r)=>({getRooms:()=>{let{rooms:o}=r();o=kMe.map(({token:s,channel:c})=>{const d=lu.createClient({mode:"live",codec:"vp8"});return d.join(LMe,c,s||null,null),{channel:c,token:s,client:d}}),t({rooms:o})},selectChannel:async o=>{let{hostRoom:s,localTracks:c}=r();const{rooms:d}=r();if(!o){s&&(c&&s.client.localTracks.length>0&&await s.client.unpublish(c),s.client.setClientRole("audience"),s=null,t({hostRoom:s,localTracks:c}));return}if(s){if(s.client.channelName===o)return;c&&await s.client.unpublish(c),await s.client.setClientRole("audience")}s=d==null?void 0:d.find(f=>f.client.channelName===o),s&&(await s.client.setClientRole("host"),c||(c=await lu.createMicrophoneAndCameraTracks()),await s.client.publish(c)),t({localTracks:c,hostRoom:s})},dispose:()=>{const{rooms:o,hostRoom:s}=r();if(s==null||s.client.leave(),o)for(const c of o)c.client.leave()}}));var MMe=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function FMe(t){var r=t.defaultInputValue,o=r===void 0?"":r,s=t.defaultMenuIsOpen,c=s===void 0?!1:s,d=t.defaultValue,f=d===void 0?null:d,v=t.inputValue,g=t.menuIsOpen,_=t.onChange,C=t.onInputChange,b=t.onMenuClose,T=t.onMenuOpen,A=t.value,I=xn(t,MMe),N=y.useState(v!==void 0?v:o),P=Ue(N,2),D=P[0],x=P[1],L=y.useState(g!==void 0?g:c),M=Ue(L,2),F=M[0],V=M[1],$=y.useState(A!==void 0?A:f),z=Ue($,2),K=z[0],G=z[1],J=y.useCallback(function(ie,ve){typeof _=="function"&&_(ie,ve),G(ie)},[_]),ne=y.useCallback(function(ie,ve){var me;typeof C=="function"&&(me=C(ie,ve)),x(me!==void 0?me:ie)},[C]),te=y.useCallback(function(){typeof T=="function"&&T(),V(!0)},[T]),ce=y.useCallback(function(){typeof b=="function"&&b(),V(!1)},[b]),ge=v!==void 0?v:D,oe=g!==void 0?g:F,ae=A!==void 0?A:K;return _e(_e({},I),{},{inputValue:ge,menuIsOpen:oe,onChange:J,onInputChange:ne,onMenuClose:ce,onMenuOpen:te,value:ae})}var UMe=!1;function BMe(t){if(t.sheet)return t.sheet;for(var r=0;r<document.styleSheets.length;r++)if(document.styleSheets[r].ownerNode===t)return document.styleSheets[r]}function VMe(t){var r=document.createElement("style");return r.setAttribute("data-emotion",t.key),t.nonce!==void 0&&r.setAttribute("nonce",t.nonce),r.appendChild(document.createTextNode("")),r.setAttribute("data-s",""),r}var jMe=function(){function t(o){var s=this;this._insertTag=function(c){var d;s.tags.length===0?s.insertionPoint?d=s.insertionPoint.nextSibling:s.prepend?d=s.container.firstChild:d=s.before:d=s.tags[s.tags.length-1].nextSibling,s.container.insertBefore(c,d),s.tags.push(c)},this.isSpeedy=o.speedy===void 0?!UMe:o.speedy,this.tags=[],this.ctr=0,this.nonce=o.nonce,this.key=o.key,this.container=o.container,this.prepend=o.prepend,this.insertionPoint=o.insertionPoint,this.before=null}var r=t.prototype;return r.hydrate=function(s){s.forEach(this._insertTag)},r.insert=function(s){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(VMe(this));var c=this.tags[this.tags.length-1];if(this.isSpeedy){var d=BMe(c);try{d.insertRule(s,d.cssRules.length)}catch{}}else c.appendChild(document.createTextNode(s));this.ctr++},r.flush=function(){this.tags.forEach(function(s){var c;return(c=s.parentNode)==null?void 0:c.removeChild(s)}),this.tags=[],this.ctr=0},t}(),ma="-ms-",mb="-moz-",Vr="-webkit-",_Z="comm",AL="rule",OL="decl",$Me="@import",SZ="@keyframes",HMe="@layer",zMe=Math.abs,kT=String.fromCharCode,WMe=Object.assign;function GMe(t,r){return ta(t,0)^45?(((r<<2^ta(t,0))<<2^ta(t,1))<<2^ta(t,2))<<2^ta(t,3):0}function yZ(t){return t.trim()}function KMe(t,r){return(t=r.exec(t))?t[0]:t}function jr(t,r,o){return t.replace(r,o)}function hD(t,r){return t.indexOf(r)}function ta(t,r){return t.charCodeAt(r)|0}function Uv(t,r,o){return t.slice(r,o)}function Ol(t){return t.length}function xL(t){return t.length}function zy(t,r){return r.push(t),t}function YMe(t,r){return t.map(r).join("")}var MT=1,Sm=1,CZ=0,is=0,fo=0,Bm="";function FT(t,r,o,s,c,d,f){return{value:t,root:r,parent:o,type:s,props:c,children:d,line:MT,column:Sm,length:f,return:""}}function Pg(t,r){return WMe(FT("",null,null,"",null,null,0),t,{length:-t.length},r)}function qMe(){return fo}function XMe(){return fo=is>0?ta(Bm,--is):0,Sm--,fo===10&&(Sm=1,MT--),fo}function ws(){return fo=is<CZ?ta(Bm,is++):0,Sm++,fo===10&&(Sm=1,MT++),fo}function kl(){return ta(Bm,is)}function _C(){return is}function dE(t,r){return Uv(Bm,t,r)}function Bv(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function bZ(t){return MT=Sm=1,CZ=Ol(Bm=t),is=0,[]}function TZ(t){return Bm="",t}function SC(t){return yZ(dE(is-1,fD(t===91?t+2:t===40?t+1:t)))}function JMe(t){for(;(fo=kl())&&fo<33;)ws();return Bv(t)>2||Bv(fo)>3?"":" "}function QMe(t,r){for(;--r&&ws()&&!(fo<48||fo>102||fo>57&&fo<65||fo>70&&fo<97););return dE(t,_C()+(r<6&&kl()==32&&ws()==32))}function fD(t){for(;ws();)switch(fo){case t:return is;case 34:case 39:t!==34&&t!==39&&fD(fo);break;case 40:t===41&&fD(t);break;case 92:ws();break}return is}function ZMe(t,r){for(;ws()&&t+fo!==47+10;)if(t+fo===42+42&&kl()===47)break;return"/*"+dE(r,is-1)+"*"+kT(t===47?t:ws())}function eFe(t){for(;!Bv(kl());)ws();return dE(t,is)}function tFe(t){return TZ(yC("",null,null,null,[""],t=bZ(t),0,[0],t))}function yC(t,r,o,s,c,d,f,v,g){for(var _=0,C=0,b=f,T=0,A=0,I=0,N=1,P=1,D=1,x=0,L="",M=c,F=d,V=s,$=L;P;)switch(I=x,x=ws()){case 40:if(I!=108&&ta($,b-1)==58){hD($+=jr(SC(x),"&","&\f"),"&\f")!=-1&&(D=-1);break}case 34:case 39:case 91:$+=SC(x);break;case 9:case 10:case 13:case 32:$+=JMe(I);break;case 92:$+=QMe(_C()-1,7);continue;case 47:switch(kl()){case 42:case 47:zy(nFe(ZMe(ws(),_C()),r,o),g);break;default:$+="/"}break;case 123*N:v[_++]=Ol($)*D;case 125*N:case 59:case 0:switch(x){case 0:case 125:P=0;case 59+C:D==-1&&($=jr($,/\f/g,"")),A>0&&Ol($)-b&&zy(A>32?mG($+";",s,o,b-1):mG(jr($," ","")+";",s,o,b-2),g);break;case 59:$+=";";default:if(zy(V=pG($,r,o,_,C,c,v,L,M=[],F=[],b),d),x===123)if(C===0)yC($,r,V,V,M,d,b,v,F);else switch(T===99&&ta($,3)===110?100:T){case 100:case 108:case 109:case 115:yC(t,V,V,s&&zy(pG(t,V,V,0,0,c,v,L,c,M=[],b),F),c,F,b,v,s?M:F);break;default:yC($,V,V,V,[""],F,0,v,F)}}_=C=A=0,N=D=1,L=$="",b=f;break;case 58:b=1+Ol($),A=I;default:if(N<1){if(x==123)--N;else if(x==125&&N++==0&&XMe()==125)continue}switch($+=kT(x),x*N){case 38:D=C>0?1:($+="\f",-1);break;case 44:v[_++]=(Ol($)-1)*D,D=1;break;case 64:kl()===45&&($+=SC(ws())),T=kl(),C=b=Ol(L=$+=eFe(_C())),x++;break;case 45:I===45&&Ol($)==2&&(N=0)}}return d}function pG(t,r,o,s,c,d,f,v,g,_,C){for(var b=c-1,T=c===0?d:[""],A=xL(T),I=0,N=0,P=0;I<s;++I)for(var D=0,x=Uv(t,b+1,b=zMe(N=f[I])),L=t;D<A;++D)(L=yZ(N>0?T[D]+" "+x:jr(x,/&\f/g,T[D])))&&(g[P++]=L);return FT(t,r,o,c===0?AL:v,g,_,C)}function nFe(t,r,o){return FT(t,r,o,_Z,kT(qMe()),Uv(t,2,-2),0)}function mG(t,r,o,s){return FT(t,r,o,OL,Uv(t,0,s),Uv(t,s+1,-1),s)}function am(t,r){for(var o="",s=xL(t),c=0;c<s;c++)o+=r(t[c],c,t,r)||"";return o}function rFe(t,r,o,s){switch(t.type){case HMe:if(t.children.length)break;case $Me:case OL:return t.return=t.return||t.value;case _Z:return"";case SZ:return t.return=t.value+"{"+am(t.children,s)+"}";case AL:t.value=t.props.join(",")}return Ol(o=am(t.children,s))?t.return=t.value+"{"+o+"}":""}function iFe(t){var r=xL(t);return function(o,s,c,d){for(var f="",v=0;v<r;v++)f+=t[v](o,s,c,d)||"";return f}}function oFe(t){return function(r){r.root||(r=r.return)&&t(r)}}function aFe(t){var r=Object.create(null);return function(o){return r[o]===void 0&&(r[o]=t(o)),r[o]}}var sFe=function(r,o,s){for(var c=0,d=0;c=d,d=kl(),c===38&&d===12&&(o[s]=1),!Bv(d);)ws();return dE(r,is)},cFe=function(r,o){var s=-1,c=44;do switch(Bv(c)){case 0:c===38&&kl()===12&&(o[s]=1),r[s]+=sFe(is-1,o,s);break;case 2:r[s]+=SC(c);break;case 4:if(c===44){r[++s]=kl()===58?"&\f":"",o[s]=r[s].length;break}default:r[s]+=kT(c)}while(c=ws());return r},lFe=function(r,o){return TZ(cFe(bZ(r),o))},gG=new WeakMap,uFe=function(r){if(!(r.type!=="rule"||!r.parent||r.length<1)){for(var o=r.value,s=r.parent,c=r.column===s.column&&r.line===s.line;s.type!=="rule";)if(s=s.parent,!s)return;if(!(r.props.length===1&&o.charCodeAt(0)!==58&&!gG.get(s))&&!c){gG.set(r,!0);for(var d=[],f=lFe(o,d),v=s.props,g=0,_=0;g<f.length;g++)for(var C=0;C<v.length;C++,_++)r.props[_]=d[g]?f[g].replace(/&\f/g,v[C]):v[C]+" "+f[g]}}},dFe=function(r){if(r.type==="decl"){var o=r.value;o.charCodeAt(0)===108&&o.charCodeAt(2)===98&&(r.return="",r.value="")}};function RZ(t,r){switch(GMe(t,r)){case 5103:return Vr+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Vr+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return Vr+t+mb+t+ma+t+t;case 6828:case 4268:return Vr+t+ma+t+t;case 6165:return Vr+t+ma+"flex-"+t+t;case 5187:return Vr+t+jr(t,/(\w+).+(:[^]+)/,Vr+"box-$1$2"+ma+"flex-$1$2")+t;case 5443:return Vr+t+ma+"flex-item-"+jr(t,/flex-|-self/,"")+t;case 4675:return Vr+t+ma+"flex-line-pack"+jr(t,/align-content|flex-|-self/,"")+t;case 5548:return Vr+t+ma+jr(t,"shrink","negative")+t;case 5292:return Vr+t+ma+jr(t,"basis","preferred-size")+t;case 6060:return Vr+"box-"+jr(t,"-grow","")+Vr+t+ma+jr(t,"grow","positive")+t;case 4554:return Vr+jr(t,/([^-])(transform)/g,"$1"+Vr+"$2")+t;case 6187:return jr(jr(jr(t,/(zoom-|grab)/,Vr+"$1"),/(image-set)/,Vr+"$1"),t,"")+t;case 5495:case 3959:return jr(t,/(image-set\([^]*)/,Vr+"$1$`$1");case 4968:return jr(jr(t,/(.+:)(flex-)?(.*)/,Vr+"box-pack:$3"+ma+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Vr+t+t;case 4095:case 3583:case 4068:case 2532:return jr(t,/(.+)-inline(.+)/,Vr+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Ol(t)-1-r>6)switch(ta(t,r+1)){case 109:if(ta(t,r+4)!==45)break;case 102:return jr(t,/(.+:)(.+)-([^]+)/,"$1"+Vr+"$2-$3$1"+mb+(ta(t,r+3)==108?"$3":"$2-$3"))+t;case 115:return~hD(t,"stretch")?RZ(jr(t,"stretch","fill-available"),r)+t:t}break;case 4949:if(ta(t,r+1)!==115)break;case 6444:switch(ta(t,Ol(t)-3-(~hD(t,"!important")&&10))){case 107:return jr(t,":",":"+Vr)+t;case 101:return jr(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Vr+(ta(t,14)===45?"inline-":"")+"box$3$1"+Vr+"$2$3$1"+ma+"$2box$3")+t}break;case 5936:switch(ta(t,r+11)){case 114:return Vr+t+ma+jr(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return Vr+t+ma+jr(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return Vr+t+ma+jr(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return Vr+t+ma+t+t}return t}var hFe=function(r,o,s,c){if(r.length>-1&&!r.return)switch(r.type){case OL:r.return=RZ(r.value,r.length);break;case SZ:return am([Pg(r,{value:jr(r.value,"@","@"+Vr)})],c);case AL:if(r.length)return YMe(r.props,function(d){switch(KMe(d,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return am([Pg(r,{props:[jr(d,/:(read-\w+)/,":"+mb+"$1")]})],c);case"::placeholder":return am([Pg(r,{props:[jr(d,/:(plac\w+)/,":"+Vr+"input-$1")]}),Pg(r,{props:[jr(d,/:(plac\w+)/,":"+mb+"$1")]}),Pg(r,{props:[jr(d,/:(plac\w+)/,ma+"input-$1")]})],c)}return""})}},fFe=[hFe],pFe=function(r){var o=r.key;if(o==="css"){var s=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(s,function(N){var P=N.getAttribute("data-emotion");P.indexOf(" ")!==-1&&(document.head.appendChild(N),N.setAttribute("data-s",""))})}var c=r.stylisPlugins||fFe,d={},f,v=[];f=r.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+o+' "]'),function(N){for(var P=N.getAttribute("data-emotion").split(" "),D=1;D<P.length;D++)d[P[D]]=!0;v.push(N)});var g,_=[uFe,dFe];{var C,b=[rFe,oFe(function(N){C.insert(N)})],T=iFe(_.concat(c,b)),A=function(P){return am(tFe(P),T)};g=function(P,D,x,L){C=x,A(P?P+"{"+D.styles+"}":D.styles),L&&(I.inserted[D.name]=!0)}}var I={key:o,sheet:new jMe({key:o,container:f,nonce:r.nonce,speedy:r.speedy,prepend:r.prepend,insertionPoint:r.insertionPoint}),nonce:r.nonce,inserted:d,registered:{},insert:g};return I.sheet.hydrate(v),I},wZ={exports:{}},Qr={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $o=typeof Symbol=="function"&&Symbol.for,NL=$o?Symbol.for("react.element"):60103,PL=$o?Symbol.for("react.portal"):60106,UT=$o?Symbol.for("react.fragment"):60107,BT=$o?Symbol.for("react.strict_mode"):60108,VT=$o?Symbol.for("react.profiler"):60114,jT=$o?Symbol.for("react.provider"):60109,$T=$o?Symbol.for("react.context"):60110,DL=$o?Symbol.for("react.async_mode"):60111,HT=$o?Symbol.for("react.concurrent_mode"):60111,zT=$o?Symbol.for("react.forward_ref"):60112,WT=$o?Symbol.for("react.suspense"):60113,mFe=$o?Symbol.for("react.suspense_list"):60120,GT=$o?Symbol.for("react.memo"):60115,KT=$o?Symbol.for("react.lazy"):60116,gFe=$o?Symbol.for("react.block"):60121,vFe=$o?Symbol.for("react.fundamental"):60117,EFe=$o?Symbol.for("react.responder"):60118,_Fe=$o?Symbol.for("react.scope"):60119;function Ds(t){if(typeof t=="object"&&t!==null){var r=t.$$typeof;switch(r){case NL:switch(t=t.type,t){case DL:case HT:case UT:case VT:case BT:case WT:return t;default:switch(t=t&&t.$$typeof,t){case $T:case zT:case KT:case GT:case jT:return t;default:return r}}case PL:return r}}}function IZ(t){return Ds(t)===HT}Qr.AsyncMode=DL;Qr.ConcurrentMode=HT;Qr.ContextConsumer=$T;Qr.ContextProvider=jT;Qr.Element=NL;Qr.ForwardRef=zT;Qr.Fragment=UT;Qr.Lazy=KT;Qr.Memo=GT;Qr.Portal=PL;Qr.Profiler=VT;Qr.StrictMode=BT;Qr.Suspense=WT;Qr.isAsyncMode=function(t){return IZ(t)||Ds(t)===DL};Qr.isConcurrentMode=IZ;Qr.isContextConsumer=function(t){return Ds(t)===$T};Qr.isContextProvider=function(t){return Ds(t)===jT};Qr.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===NL};Qr.isForwardRef=function(t){return Ds(t)===zT};Qr.isFragment=function(t){return Ds(t)===UT};Qr.isLazy=function(t){return Ds(t)===KT};Qr.isMemo=function(t){return Ds(t)===GT};Qr.isPortal=function(t){return Ds(t)===PL};Qr.isProfiler=function(t){return Ds(t)===VT};Qr.isStrictMode=function(t){return Ds(t)===BT};Qr.isSuspense=function(t){return Ds(t)===WT};Qr.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===UT||t===HT||t===VT||t===BT||t===WT||t===mFe||typeof t=="object"&&t!==null&&(t.$$typeof===KT||t.$$typeof===GT||t.$$typeof===jT||t.$$typeof===$T||t.$$typeof===zT||t.$$typeof===vFe||t.$$typeof===EFe||t.$$typeof===_Fe||t.$$typeof===gFe)};Qr.typeOf=Ds;wZ.exports=Qr;var SFe=wZ.exports,AZ=SFe,yFe={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},CFe={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},OZ={};OZ[AZ.ForwardRef]=yFe;OZ[AZ.Memo]=CFe;var bFe=!0;function TFe(t,r,o){var s="";return o.split(" ").forEach(function(c){t[c]!==void 0?r.push(t[c]+";"):c&&(s+=c+" ")}),s}var xZ=function(r,o,s){var c=r.key+"-"+o.name;(s===!1||bFe===!1)&&r.registered[c]===void 0&&(r.registered[c]=o.styles)},RFe=function(r,o,s){xZ(r,o,s);var c=r.key+"-"+o.name;if(r.inserted[o.name]===void 0){var d=o;do r.insert(o===d?"."+c:"",d,r.sheet,!0),d=d.next;while(d!==void 0)}};function wFe(t){for(var r=0,o,s=0,c=t.length;c>=4;++s,c-=4)o=t.charCodeAt(s)&255|(t.charCodeAt(++s)&255)<<8|(t.charCodeAt(++s)&255)<<16|(t.charCodeAt(++s)&255)<<24,o=(o&65535)*1540483477+((o>>>16)*59797<<16),o^=o>>>24,r=(o&65535)*1540483477+((o>>>16)*59797<<16)^(r&65535)*1540483477+((r>>>16)*59797<<16);switch(c){case 3:r^=(t.charCodeAt(s+2)&255)<<16;case 2:r^=(t.charCodeAt(s+1)&255)<<8;case 1:r^=t.charCodeAt(s)&255,r=(r&65535)*1540483477+((r>>>16)*59797<<16)}return r^=r>>>13,r=(r&65535)*1540483477+((r>>>16)*59797<<16),((r^r>>>15)>>>0).toString(36)}var IFe={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},AFe=!1,OFe=/[A-Z]|^ms/g,xFe=/_EMO_([^_]+?)_([^]*?)_EMO_/g,NZ=function(r){return r.charCodeAt(1)===45},vG=function(r){return r!=null&&typeof r!="boolean"},Jx=aFe(function(t){return NZ(t)?t:t.replace(OFe,"-$&").toLowerCase()}),EG=function(r,o){switch(r){case"animation":case"animationName":if(typeof o=="string")return o.replace(xFe,function(s,c,d){return xl={name:c,styles:d,next:xl},c})}return IFe[r]!==1&&!NZ(r)&&typeof o=="number"&&o!==0?o+"px":o},NFe="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function Vv(t,r,o){if(o==null)return"";var s=o;if(s.__emotion_styles!==void 0)return s;switch(typeof o){case"boolean":return"";case"object":{var c=o;if(c.anim===1)return xl={name:c.name,styles:c.styles,next:xl},c.name;var d=o;if(d.styles!==void 0){var f=d.next;if(f!==void 0)for(;f!==void 0;)xl={name:f.name,styles:f.styles,next:xl},f=f.next;var v=d.styles+";";return v}return PFe(t,r,o)}case"function":{if(t!==void 0){var g=xl,_=o(t);return xl=g,Vv(t,r,_)}break}}var C=o;if(r==null)return C;var b=r[C];return b!==void 0?b:C}function PFe(t,r,o){var s="";if(Array.isArray(o))for(var c=0;c<o.length;c++)s+=Vv(t,r,o[c])+";";else for(var d in o){var f=o[d];if(typeof f!="object"){var v=f;r!=null&&r[v]!==void 0?s+=d+"{"+r[v]+"}":vG(v)&&(s+=Jx(d)+":"+EG(d,v)+";")}else{if(d==="NO_COMPONENT_SELECTOR"&&AFe)throw new Error(NFe);if(Array.isArray(f)&&typeof f[0]=="string"&&(r==null||r[f[0]]===void 0))for(var g=0;g<f.length;g++)vG(f[g])&&(s+=Jx(d)+":"+EG(d,f[g])+";");else{var _=Vv(t,r,f);switch(d){case"animation":case"animationName":{s+=Jx(d)+":"+_+";";break}default:s+=d+"{"+_+"}"}}}}return s}var _G=/label:\s*([^\s;{]+)\s*(;|$)/g,xl;function PZ(t,r,o){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var s=!0,c="";xl=void 0;var d=t[0];if(d==null||d.raw===void 0)s=!1,c+=Vv(o,r,d);else{var f=d;c+=f[0]}for(var v=1;v<t.length;v++)if(c+=Vv(o,r,t[v]),s){var g=d;c+=g[v]}_G.lastIndex=0;for(var _="",C;(C=_G.exec(c))!==null;)_+="-"+C[1];var b=wFe(c)+_;return{name:b,styles:c,next:xl}}var DFe=function(r){return r()},LFe=Fh["useInsertionEffect"]?Fh["useInsertionEffect"]:!1,kFe=LFe||DFe,MFe=!1,DZ=y.createContext(typeof HTMLElement<"u"?pFe({key:"css"}):null);DZ.Provider;var FFe=function(r){return y.forwardRef(function(o,s){var c=y.useContext(DZ);return r(o,c,s)})},UFe=y.createContext({}),LL={}.hasOwnProperty,pD="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",BFe=function(r,o){var s={};for(var c in o)LL.call(o,c)&&(s[c]=o[c]);return s[pD]=r,s},VFe=function(r){var o=r.cache,s=r.serialized,c=r.isStringTag;return xZ(o,s,c),kFe(function(){return RFe(o,s,c)}),null},jFe=FFe(function(t,r,o){var s=t.css;typeof s=="string"&&r.registered[s]!==void 0&&(s=r.registered[s]);var c=t[pD],d=[s],f="";typeof t.className=="string"?f=TFe(r.registered,d,t.className):t.className!=null&&(f=t.className+" ");var v=PZ(d,void 0,y.useContext(UFe));f+=r.key+"-"+v.name;var g={};for(var _ in t)LL.call(t,_)&&_!=="css"&&_!==pD&&!MFe&&(g[_]=t[_]);return g.className=f,o&&(g.ref=o),y.createElement(y.Fragment,null,y.createElement(VFe,{cache:r,serialized:v,isStringTag:typeof c=="string"}),y.createElement(c,g))}),$Fe=jFe,En=function(r,o){var s=arguments;if(o==null||!LL.call(o,"css"))return y.createElement.apply(void 0,s);var c=s.length,d=new Array(c);d[0]=$Fe,d[1]=BFe(r,o);for(var f=2;f<c;f++)d[f]=s[f];return y.createElement.apply(null,d)};(function(t){var r;r||(r=t.JSX||(t.JSX={}))})(En||(En={}));function kL(){for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return PZ(r)}function HFe(){var t=kL.apply(void 0,arguments),r="animation-"+t.name;return{name:r,styles:"@keyframes "+r+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}function zFe(t,r){return r||(r=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(r)}}))}const WFe=Math.min,GFe=Math.max,gb=Math.round,Wy=Math.floor,vb=t=>({x:t,y:t});function KFe(t){const{x:r,y:o,width:s,height:c}=t;return{width:s,height:c,top:o,left:r,right:r+s,bottom:o+c,x:r,y:o}}function YT(){return typeof window<"u"}function LZ(t){return MZ(t)?(t.nodeName||"").toLowerCase():"#document"}function Xc(t){var r;return(t==null||(r=t.ownerDocument)==null?void 0:r.defaultView)||window}function kZ(t){var r;return(r=(MZ(t)?t.ownerDocument:t.document)||window.document)==null?void 0:r.documentElement}function MZ(t){return YT()?t instanceof Node||t instanceof Xc(t).Node:!1}function mD(t){return YT()?t instanceof Element||t instanceof Xc(t).Element:!1}function ML(t){return YT()?t instanceof HTMLElement||t instanceof Xc(t).HTMLElement:!1}function SG(t){return!YT()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Xc(t).ShadowRoot}function FZ(t){const{overflow:r,overflowX:o,overflowY:s,display:c}=FL(t);return/auto|scroll|overlay|hidden|clip/.test(r+s+o)&&!["inline","contents"].includes(c)}function YFe(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function qFe(t){return["html","body","#document"].includes(LZ(t))}function FL(t){return Xc(t).getComputedStyle(t)}function XFe(t){if(LZ(t)==="html")return t;const r=t.assignedSlot||t.parentNode||SG(t)&&t.host||kZ(t);return SG(r)?r.host:r}function UZ(t){const r=XFe(t);return qFe(r)?t.ownerDocument?t.ownerDocument.body:t.body:ML(r)&&FZ(r)?r:UZ(r)}function Eb(t,r,o){var s;r===void 0&&(r=[]),o===void 0&&(o=!0);const c=UZ(t),d=c===((s=t.ownerDocument)==null?void 0:s.body),f=Xc(c);if(d){const v=gD(f);return r.concat(f,f.visualViewport||[],FZ(c)?c:[],v&&o?Eb(v):[])}return r.concat(c,Eb(c,[],o))}function gD(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function JFe(t){const r=FL(t);let o=parseFloat(r.width)||0,s=parseFloat(r.height)||0;const c=ML(t),d=c?t.offsetWidth:o,f=c?t.offsetHeight:s,v=gb(o)!==d||gb(s)!==f;return v&&(o=d,s=f),{width:o,height:s,$:v}}function UL(t){return mD(t)?t:t.contextElement}function Qx(t){const r=UL(t);if(!ML(r))return vb(1);const o=r.getBoundingClientRect(),{width:s,height:c,$:d}=JFe(r);let f=(d?gb(o.width):o.width)/s,v=(d?gb(o.height):o.height)/c;return(!f||!Number.isFinite(f))&&(f=1),(!v||!Number.isFinite(v))&&(v=1),{x:f,y:v}}const QFe=vb(0);function ZFe(t){const r=Xc(t);return!YFe()||!r.visualViewport?QFe:{x:r.visualViewport.offsetLeft,y:r.visualViewport.offsetTop}}function e4e(t,r,o){return r===void 0&&(r=!1),!o||r&&o!==Xc(t)?!1:r}function yG(t,r,o,s){r===void 0&&(r=!1),o===void 0&&(o=!1);const c=t.getBoundingClientRect(),d=UL(t);let f=vb(1);r&&(s?mD(s)&&(f=Qx(s)):f=Qx(t));const v=e4e(d,o,s)?ZFe(d):vb(0);let g=(c.left+v.x)/f.x,_=(c.top+v.y)/f.y,C=c.width/f.x,b=c.height/f.y;if(d){const T=Xc(d),A=s&&mD(s)?Xc(s):s;let I=T,N=gD(I);for(;N&&s&&A!==I;){const P=Qx(N),D=N.getBoundingClientRect(),x=FL(N),L=D.left+(N.clientLeft+parseFloat(x.paddingLeft))*P.x,M=D.top+(N.clientTop+parseFloat(x.paddingTop))*P.y;g*=P.x,_*=P.y,C*=P.x,b*=P.y,g+=L,_+=M,I=Xc(N),N=gD(I)}}return KFe({width:C,height:b,x:g,y:_})}function BZ(t,r){return t.x===r.x&&t.y===r.y&&t.width===r.width&&t.height===r.height}function t4e(t,r){let o=null,s;const c=kZ(t);function d(){var v;clearTimeout(s),(v=o)==null||v.disconnect(),o=null}function f(v,g){v===void 0&&(v=!1),g===void 0&&(g=1),d();const _=t.getBoundingClientRect(),{left:C,top:b,width:T,height:A}=_;if(v||r(),!T||!A)return;const I=Wy(b),N=Wy(c.clientWidth-(C+T)),P=Wy(c.clientHeight-(b+A)),D=Wy(C),L={rootMargin:-I+"px "+-N+"px "+-P+"px "+-D+"px",threshold:GFe(0,WFe(1,g))||1};let M=!0;function F(V){const $=V[0].intersectionRatio;if($!==g){if(!M)return f();$?f(!1,$):s=setTimeout(()=>{f(!1,1e-7)},1e3)}$===1&&!BZ(_,t.getBoundingClientRect())&&f(),M=!1}try{o=new IntersectionObserver(F,{...L,root:c.ownerDocument})}catch{o=new IntersectionObserver(F,L)}o.observe(t)}return f(!0),d}function n4e(t,r,o,s){s===void 0&&(s={});const{ancestorScroll:c=!0,ancestorResize:d=!0,elementResize:f=typeof ResizeObserver=="function",layoutShift:v=typeof IntersectionObserver=="function",animationFrame:g=!1}=s,_=UL(t),C=c||d?[..._?Eb(_):[],...Eb(r)]:[];C.forEach(D=>{c&&D.addEventListener("scroll",o,{passive:!0}),d&&D.addEventListener("resize",o)});const b=_&&v?t4e(_,o):null;let T=-1,A=null;f&&(A=new ResizeObserver(D=>{let[x]=D;x&&x.target===_&&A&&(A.unobserve(r),cancelAnimationFrame(T),T=requestAnimationFrame(()=>{var L;(L=A)==null||L.observe(r)})),o()}),_&&!g&&A.observe(_),A.observe(r));let I,N=g?yG(t):null;g&&P();function P(){const D=yG(t);N&&!BZ(N,D)&&o(),N=D,I=requestAnimationFrame(P)}return o(),()=>{var D;C.forEach(x=>{c&&x.removeEventListener("scroll",o),d&&x.removeEventListener("resize",o)}),b==null||b(),(D=A)==null||D.disconnect(),A=null,g&&cancelAnimationFrame(I)}}var vD=y.useLayoutEffect,r4e=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],_b=function(){};function i4e(t,r){return r?r[0]==="-"?t+r:t+"__"+r:t}function o4e(t,r){for(var o=arguments.length,s=new Array(o>2?o-2:0),c=2;c<o;c++)s[c-2]=arguments[c];var d=[].concat(s);if(r&&t)for(var f in r)r.hasOwnProperty(f)&&r[f]&&d.push("".concat(i4e(t,f)));return d.filter(function(v){return v}).map(function(v){return String(v).trim()}).join(" ")}var CG=function(r){return p4e(r)?r.filter(Boolean):ln(r)==="object"&&r!==null?[r]:[]},VZ=function(r){r.className,r.clearValue,r.cx,r.getStyles,r.getClassNames,r.getValue,r.hasValue,r.isMulti,r.isRtl,r.options,r.selectOption,r.selectProps,r.setValue,r.theme;var o=xn(r,r4e);return _e({},o)},Yi=function(r,o,s){var c=r.cx,d=r.getStyles,f=r.getClassNames,v=r.className;return{css:d(o,r),className:c(s??{},f(o,r),v)}};function qT(t){return[document.documentElement,document.body,window].indexOf(t)>-1}function a4e(t){return qT(t)?window.innerHeight:t.clientHeight}function jZ(t){return qT(t)?window.pageYOffset:t.scrollTop}function Sb(t,r){if(qT(t)){window.scrollTo(0,r);return}t.scrollTop=r}function s4e(t){var r=getComputedStyle(t),o=r.position==="absolute",s=/(auto|scroll)/;if(r.position==="fixed")return document.documentElement;for(var c=t;c=c.parentElement;)if(r=getComputedStyle(c),!(o&&r.position==="static")&&s.test(r.overflow+r.overflowY+r.overflowX))return c;return document.documentElement}function c4e(t,r,o,s){return o*((t=t/s-1)*t*t+1)+r}function Gy(t,r){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:_b,c=jZ(t),d=r-c,f=10,v=0;function g(){v+=f;var _=c4e(v,c,d,o);Sb(t,_),v<o?window.requestAnimationFrame(g):s(t)}g()}function bG(t,r){var o=t.getBoundingClientRect(),s=r.getBoundingClientRect(),c=r.offsetHeight/3;s.bottom+c>o.bottom?Sb(t,Math.min(r.offsetTop+r.clientHeight-t.offsetHeight+c,t.scrollHeight)):s.top-c<o.top&&Sb(t,Math.max(r.offsetTop-c,0))}function l4e(t){var r=t.getBoundingClientRect();return{bottom:r.bottom,height:r.height,left:r.left,right:r.right,top:r.top,width:r.width}}function TG(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function u4e(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var $Z=!1,d4e={get passive(){return $Z=!0}},Ky=typeof window<"u"?window:{};Ky.addEventListener&&Ky.removeEventListener&&(Ky.addEventListener("p",_b,d4e),Ky.removeEventListener("p",_b,!1));var h4e=$Z;function f4e(t){return t!=null}function p4e(t){return Array.isArray(t)}function Yy(t,r,o){return t?r:o}var m4e=function(r){for(var o=arguments.length,s=new Array(o>1?o-1:0),c=1;c<o;c++)s[c-1]=arguments[c];var d=Object.entries(r).filter(function(f){var v=Ue(f,1),g=v[0];return!s.includes(g)});return d.reduce(function(f,v){var g=Ue(v,2),_=g[0],C=g[1];return f[_]=C,f},{})},g4e=["children","innerProps"],v4e=["children","innerProps"];function E4e(t){var r=t.maxHeight,o=t.menuEl,s=t.minHeight,c=t.placement,d=t.shouldScroll,f=t.isFixedPosition,v=t.controlHeight,g=s4e(o),_={placement:"bottom",maxHeight:r};if(!o||!o.offsetParent)return _;var C=g.getBoundingClientRect(),b=C.height,T=o.getBoundingClientRect(),A=T.bottom,I=T.height,N=T.top,P=o.offsetParent.getBoundingClientRect(),D=P.top,x=f?window.innerHeight:a4e(g),L=jZ(g),M=parseInt(getComputedStyle(o).marginBottom,10),F=parseInt(getComputedStyle(o).marginTop,10),V=D-F,$=x-N,z=V+L,K=b-L-N,G=A-x+L+M,J=L+N-F,ne=160;switch(c){case"auto":case"bottom":if($>=I)return{placement:"bottom",maxHeight:r};if(K>=I&&!f)return d&&Gy(g,G,ne),{placement:"bottom",maxHeight:r};if(!f&&K>=s||f&&$>=s){d&&Gy(g,G,ne);var te=f?$-M:K-M;return{placement:"bottom",maxHeight:te}}if(c==="auto"||f){var ce=r,ge=f?V:z;return ge>=s&&(ce=Math.min(ge-M-v,r)),{placement:"top",maxHeight:ce}}if(c==="bottom")return d&&Sb(g,G),{placement:"bottom",maxHeight:r};break;case"top":if(V>=I)return{placement:"top",maxHeight:r};if(z>=I&&!f)return d&&Gy(g,J,ne),{placement:"top",maxHeight:r};if(!f&&z>=s||f&&V>=s){var oe=r;return(!f&&z>=s||f&&V>=s)&&(oe=f?V-F:z-F),d&&Gy(g,J,ne),{placement:"top",maxHeight:oe}}return{placement:"bottom",maxHeight:r};default:throw new Error('Invalid placement provided "'.concat(c,'".'))}return _}function _4e(t){var r={bottom:"top",top:"bottom"};return t?r[t]:"bottom"}var HZ=function(r){return r==="auto"?"bottom":r},S4e=function(r,o){var s,c=r.placement,d=r.theme,f=d.borderRadius,v=d.spacing,g=d.colors;return _e((s={label:"menu"},be(s,_4e(c),"100%"),be(s,"position","absolute"),be(s,"width","100%"),be(s,"zIndex",1),s),o?{}:{backgroundColor:g.neutral0,borderRadius:f,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:v.menuGutter,marginTop:v.menuGutter})},zZ=y.createContext(null),y4e=function(r){var o=r.children,s=r.minMenuHeight,c=r.maxMenuHeight,d=r.menuPlacement,f=r.menuPosition,v=r.menuShouldScrollIntoView,g=r.theme,_=y.useContext(zZ)||{},C=_.setPortalPlacement,b=y.useRef(null),T=y.useState(c),A=Ue(T,2),I=A[0],N=A[1],P=y.useState(null),D=Ue(P,2),x=D[0],L=D[1],M=g.spacing.controlHeight;return vD(function(){var F=b.current;if(F){var V=f==="fixed",$=v&&!V,z=E4e({maxHeight:c,menuEl:F,minHeight:s,placement:d,shouldScroll:$,isFixedPosition:V,controlHeight:M});N(z.maxHeight),L(z.placement),C==null||C(z.placement)}},[c,d,f,v,s,C,M]),o({ref:b,placerProps:_e(_e({},r),{},{placement:x||HZ(d),maxHeight:I})})},C4e=function(r){var o=r.children,s=r.innerRef,c=r.innerProps;return En("div",nt({},Yi(r,"menu",{menu:!0}),{ref:s},c),o)},b4e=C4e,T4e=function(r,o){var s=r.maxHeight,c=r.theme.spacing.baseUnit;return _e({maxHeight:s,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},o?{}:{paddingBottom:c,paddingTop:c})},R4e=function(r){var o=r.children,s=r.innerProps,c=r.innerRef,d=r.isMulti;return En("div",nt({},Yi(r,"menuList",{"menu-list":!0,"menu-list--is-multi":d}),{ref:c},s),o)},WZ=function(r,o){var s=r.theme,c=s.spacing.baseUnit,d=s.colors;return _e({textAlign:"center"},o?{}:{color:d.neutral40,padding:"".concat(c*2,"px ").concat(c*3,"px")})},w4e=WZ,I4e=WZ,A4e=function(r){var o=r.children,s=o===void 0?"No options":o,c=r.innerProps,d=xn(r,g4e);return En("div",nt({},Yi(_e(_e({},d),{},{children:s,innerProps:c}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),c),s)},O4e=function(r){var o=r.children,s=o===void 0?"Loading...":o,c=r.innerProps,d=xn(r,v4e);return En("div",nt({},Yi(_e(_e({},d),{},{children:s,innerProps:c}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),c),s)},x4e=function(r){var o=r.rect,s=r.offset,c=r.position;return{left:o.left,position:c,top:s,width:o.width,zIndex:1}},N4e=function(r){var o=r.appendTo,s=r.children,c=r.controlElement,d=r.innerProps,f=r.menuPlacement,v=r.menuPosition,g=y.useRef(null),_=y.useRef(null),C=y.useState(HZ(f)),b=Ue(C,2),T=b[0],A=b[1],I=y.useMemo(function(){return{setPortalPlacement:A}},[]),N=y.useState(null),P=Ue(N,2),D=P[0],x=P[1],L=y.useCallback(function(){if(c){var $=l4e(c),z=v==="fixed"?0:window.pageYOffset,K=$[T]+z;(K!==(D==null?void 0:D.offset)||$.left!==(D==null?void 0:D.rect.left)||$.width!==(D==null?void 0:D.rect.width))&&x({offset:K,rect:$})}},[c,v,T,D==null?void 0:D.offset,D==null?void 0:D.rect.left,D==null?void 0:D.rect.width]);vD(function(){L()},[L]);var M=y.useCallback(function(){typeof _.current=="function"&&(_.current(),_.current=null),c&&g.current&&(_.current=n4e(c,g.current,L,{elementResize:"ResizeObserver"in window}))},[c,L]);vD(function(){M()},[M]);var F=y.useCallback(function($){g.current=$,M()},[M]);if(!o&&v!=="fixed"||!D)return null;var V=En("div",nt({ref:F},Yi(_e(_e({},r),{},{offset:D.offset,position:v,rect:D.rect}),"menuPortal",{"menu-portal":!0}),d),s);return En(zZ.Provider,{value:I},o?Ml.createPortal(V,o):V)},P4e=function(r){var o=r.isDisabled,s=r.isRtl;return{label:"container",direction:s?"rtl":void 0,pointerEvents:o?"none":void 0,position:"relative"}},D4e=function(r){var o=r.children,s=r.innerProps,c=r.isDisabled,d=r.isRtl;return En("div",nt({},Yi(r,"container",{"--is-disabled":c,"--is-rtl":d}),s),o)},L4e=function(r,o){var s=r.theme.spacing,c=r.isMulti,d=r.hasValue,f=r.selectProps.controlShouldRenderValue;return _e({alignItems:"center",display:c&&d&&f?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},o?{}:{padding:"".concat(s.baseUnit/2,"px ").concat(s.baseUnit*2,"px")})},k4e=function(r){var o=r.children,s=r.innerProps,c=r.isMulti,d=r.hasValue;return En("div",nt({},Yi(r,"valueContainer",{"value-container":!0,"value-container--is-multi":c,"value-container--has-value":d}),s),o)},M4e=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},F4e=function(r){var o=r.children,s=r.innerProps;return En("div",nt({},Yi(r,"indicatorsContainer",{indicators:!0}),s),o)},RG,U4e=["size"],B4e=["innerProps","isRtl","size"],V4e={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},GZ=function(r){var o=r.size,s=xn(r,U4e);return En("svg",nt({height:o,width:o,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:V4e},s))},BL=function(r){return En(GZ,nt({size:20},r),En("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},KZ=function(r){return En(GZ,nt({size:20},r),En("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},YZ=function(r,o){var s=r.isFocused,c=r.theme,d=c.spacing.baseUnit,f=c.colors;return _e({label:"indicatorContainer",display:"flex",transition:"color 150ms"},o?{}:{color:s?f.neutral60:f.neutral20,padding:d*2,":hover":{color:s?f.neutral80:f.neutral40}})},j4e=YZ,$4e=function(r){var o=r.children,s=r.innerProps;return En("div",nt({},Yi(r,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),s),o||En(KZ,null))},H4e=YZ,z4e=function(r){var o=r.children,s=r.innerProps;return En("div",nt({},Yi(r,"clearIndicator",{indicator:!0,"clear-indicator":!0}),s),o||En(BL,null))},W4e=function(r,o){var s=r.isDisabled,c=r.theme,d=c.spacing.baseUnit,f=c.colors;return _e({label:"indicatorSeparator",alignSelf:"stretch",width:1},o?{}:{backgroundColor:s?f.neutral10:f.neutral20,marginBottom:d*2,marginTop:d*2})},G4e=function(r){var o=r.innerProps;return En("span",nt({},o,Yi(r,"indicatorSeparator",{"indicator-separator":!0})))},K4e=HFe(RG||(RG=zFe([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),Y4e=function(r,o){var s=r.isFocused,c=r.size,d=r.theme,f=d.colors,v=d.spacing.baseUnit;return _e({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:c,lineHeight:1,marginRight:c,textAlign:"center",verticalAlign:"middle"},o?{}:{color:s?f.neutral60:f.neutral20,padding:v*2})},Zx=function(r){var o=r.delay,s=r.offset;return En("span",{css:kL({animation:"".concat(K4e," 1s ease-in-out ").concat(o,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:s?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},q4e=function(r){var o=r.innerProps,s=r.isRtl,c=r.size,d=c===void 0?4:c,f=xn(r,B4e);return En("div",nt({},Yi(_e(_e({},f),{},{innerProps:o,isRtl:s,size:d}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),o),En(Zx,{delay:0,offset:s}),En(Zx,{delay:160,offset:!0}),En(Zx,{delay:320,offset:!s}))},X4e=function(r,o){var s=r.isDisabled,c=r.isFocused,d=r.theme,f=d.colors,v=d.borderRadius,g=d.spacing;return _e({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:g.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},o?{}:{backgroundColor:s?f.neutral5:f.neutral0,borderColor:s?f.neutral10:c?f.primary:f.neutral20,borderRadius:v,borderStyle:"solid",borderWidth:1,boxShadow:c?"0 0 0 1px ".concat(f.primary):void 0,"&:hover":{borderColor:c?f.primary:f.neutral30}})},J4e=function(r){var o=r.children,s=r.isDisabled,c=r.isFocused,d=r.innerRef,f=r.innerProps,v=r.menuIsOpen;return En("div",nt({ref:d},Yi(r,"control",{control:!0,"control--is-disabled":s,"control--is-focused":c,"control--menu-is-open":v}),f,{"aria-disabled":s||void 0}),o)},Q4e=J4e,Z4e=["data"],eUe=function(r,o){var s=r.theme.spacing;return o?{}:{paddingBottom:s.baseUnit*2,paddingTop:s.baseUnit*2}},tUe=function(r){var o=r.children,s=r.cx,c=r.getStyles,d=r.getClassNames,f=r.Heading,v=r.headingProps,g=r.innerProps,_=r.label,C=r.theme,b=r.selectProps;return En("div",nt({},Yi(r,"group",{group:!0}),g),En(f,nt({},v,{selectProps:b,theme:C,getStyles:c,getClassNames:d,cx:s}),_),En("div",null,o))},nUe=function(r,o){var s=r.theme,c=s.colors,d=s.spacing;return _e({label:"group",cursor:"default",display:"block"},o?{}:{color:c.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:d.baseUnit*3,paddingRight:d.baseUnit*3,textTransform:"uppercase"})},rUe=function(r){var o=VZ(r);o.data;var s=xn(o,Z4e);return En("div",nt({},Yi(r,"groupHeading",{"group-heading":!0}),s))},iUe=tUe,oUe=["innerRef","isDisabled","isHidden","inputClassName"],aUe=function(r,o){var s=r.isDisabled,c=r.value,d=r.theme,f=d.spacing,v=d.colors;return _e(_e({visibility:s?"hidden":"visible",transform:c?"translateZ(0)":""},sUe),o?{}:{margin:f.baseUnit/2,paddingBottom:f.baseUnit/2,paddingTop:f.baseUnit/2,color:v.neutral80})},qZ={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},sUe={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":_e({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},qZ)},cUe=function(r){return _e({label:"input",color:"inherit",background:0,opacity:r?0:1,width:"100%"},qZ)},lUe=function(r){var o=r.cx,s=r.value,c=VZ(r),d=c.innerRef,f=c.isDisabled,v=c.isHidden,g=c.inputClassName,_=xn(c,oUe);return En("div",nt({},Yi(r,"input",{"input-container":!0}),{"data-value":s||""}),En("input",nt({className:o({input:!0},g),ref:d,style:cUe(v),disabled:f},_)))},uUe=lUe,dUe=function(r,o){var s=r.theme,c=s.spacing,d=s.borderRadius,f=s.colors;return _e({label:"multiValue",display:"flex",minWidth:0},o?{}:{backgroundColor:f.neutral10,borderRadius:d/2,margin:c.baseUnit/2})},hUe=function(r,o){var s=r.theme,c=s.borderRadius,d=s.colors,f=r.cropWithEllipsis;return _e({overflow:"hidden",textOverflow:f||f===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},o?{}:{borderRadius:c/2,color:d.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},fUe=function(r,o){var s=r.theme,c=s.spacing,d=s.borderRadius,f=s.colors,v=r.isFocused;return _e({alignItems:"center",display:"flex"},o?{}:{borderRadius:d/2,backgroundColor:v?f.dangerLight:void 0,paddingLeft:c.baseUnit,paddingRight:c.baseUnit,":hover":{backgroundColor:f.dangerLight,color:f.danger}})},XZ=function(r){var o=r.children,s=r.innerProps;return En("div",s,o)},pUe=XZ,mUe=XZ;function gUe(t){var r=t.children,o=t.innerProps;return En("div",nt({role:"button"},o),r||En(BL,{size:14}))}var vUe=function(r){var o=r.children,s=r.components,c=r.data,d=r.innerProps,f=r.isDisabled,v=r.removeProps,g=r.selectProps,_=s.Container,C=s.Label,b=s.Remove;return En(_,{data:c,innerProps:_e(_e({},Yi(r,"multiValue",{"multi-value":!0,"multi-value--is-disabled":f})),d),selectProps:g},En(C,{data:c,innerProps:_e({},Yi(r,"multiValueLabel",{"multi-value__label":!0})),selectProps:g},o),En(b,{data:c,innerProps:_e(_e({},Yi(r,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(o||"option")},v),selectProps:g}))},EUe=vUe,_Ue=function(r,o){var s=r.isDisabled,c=r.isFocused,d=r.isSelected,f=r.theme,v=f.spacing,g=f.colors;return _e({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},o?{}:{backgroundColor:d?g.primary:c?g.primary25:"transparent",color:s?g.neutral20:d?g.neutral0:"inherit",padding:"".concat(v.baseUnit*2,"px ").concat(v.baseUnit*3,"px"),":active":{backgroundColor:s?void 0:d?g.primary:g.primary50}})},SUe=function(r){var o=r.children,s=r.isDisabled,c=r.isFocused,d=r.isSelected,f=r.innerRef,v=r.innerProps;return En("div",nt({},Yi(r,"option",{option:!0,"option--is-disabled":s,"option--is-focused":c,"option--is-selected":d}),{ref:f,"aria-disabled":s},v),o)},yUe=SUe,CUe=function(r,o){var s=r.theme,c=s.spacing,d=s.colors;return _e({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},o?{}:{color:d.neutral50,marginLeft:c.baseUnit/2,marginRight:c.baseUnit/2})},bUe=function(r){var o=r.children,s=r.innerProps;return En("div",nt({},Yi(r,"placeholder",{placeholder:!0}),s),o)},TUe=bUe,RUe=function(r,o){var s=r.isDisabled,c=r.theme,d=c.spacing,f=c.colors;return _e({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},o?{}:{color:s?f.neutral40:f.neutral80,marginLeft:d.baseUnit/2,marginRight:d.baseUnit/2})},wUe=function(r){var o=r.children,s=r.isDisabled,c=r.innerProps;return En("div",nt({},Yi(r,"singleValue",{"single-value":!0,"single-value--is-disabled":s}),c),o)},IUe=wUe,AUe={ClearIndicator:z4e,Control:Q4e,DropdownIndicator:$4e,DownChevron:KZ,CrossIcon:BL,Group:iUe,GroupHeading:rUe,IndicatorsContainer:F4e,IndicatorSeparator:G4e,Input:uUe,LoadingIndicator:q4e,Menu:b4e,MenuList:R4e,MenuPortal:N4e,LoadingMessage:O4e,NoOptionsMessage:A4e,MultiValue:EUe,MultiValueContainer:pUe,MultiValueLabel:mUe,MultiValueRemove:gUe,Option:yUe,Placeholder:TUe,SelectContainer:D4e,SingleValue:IUe,ValueContainer:k4e},OUe=function(r){return _e(_e({},AUe),r.components)},wG=Number.isNaN||function(r){return typeof r=="number"&&r!==r};function xUe(t,r){return!!(t===r||wG(t)&&wG(r))}function NUe(t,r){if(t.length!==r.length)return!1;for(var o=0;o<t.length;o++)if(!xUe(t[o],r[o]))return!1;return!0}function PUe(t,r){r===void 0&&(r=NUe);var o=null;function s(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];if(o&&o.lastThis===this&&r(c,o.lastArgs))return o.lastResult;var f=t.apply(this,c);return o={lastResult:f,lastArgs:c,lastThis:this},f}return s.clear=function(){o=null},s}var DUe={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},LUe=function(r){return En("span",nt({css:DUe},r))},IG=LUe,kUe={guidance:function(r){var o=r.isSearchable,s=r.isMulti,c=r.tabSelectsValue,d=r.context,f=r.isInitialFocus;switch(d){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(c?", press Tab to select the option and exit the menu":"",".");case"input":return f?"".concat(r["aria-label"]||"Select"," is focused ").concat(o?",type to refine list":"",", press Down to open the menu, ").concat(s?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(r){var o=r.action,s=r.label,c=s===void 0?"":s,d=r.labels,f=r.isDisabled;switch(o){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(c,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(d.length>1?"s":""," ").concat(d.join(","),", selected.");case"select-option":return f?"option ".concat(c," is disabled. Select another option."):"option ".concat(c,", selected.");default:return""}},onFocus:function(r){var o=r.context,s=r.focused,c=r.options,d=r.label,f=d===void 0?"":d,v=r.selectValue,g=r.isDisabled,_=r.isSelected,C=r.isAppleDevice,b=function(N,P){return N&&N.length?"".concat(N.indexOf(P)+1," of ").concat(N.length):""};if(o==="value"&&v)return"value ".concat(f," focused, ").concat(b(v,s),".");if(o==="menu"&&C){var T=g?" disabled":"",A="".concat(_?" selected":"").concat(T);return"".concat(f).concat(A,", ").concat(b(c,s),".")}return""},onFilter:function(r){var o=r.inputValue,s=r.resultsMessage;return"".concat(s).concat(o?" for search term "+o:"",".")}},MUe=function(r){var o=r.ariaSelection,s=r.focusedOption,c=r.focusedValue,d=r.focusableOptions,f=r.isFocused,v=r.selectValue,g=r.selectProps,_=r.id,C=r.isAppleDevice,b=g.ariaLiveMessages,T=g.getOptionLabel,A=g.inputValue,I=g.isMulti,N=g.isOptionDisabled,P=g.isSearchable,D=g.menuIsOpen,x=g.options,L=g.screenReaderStatus,M=g.tabSelectsValue,F=g.isLoading,V=g["aria-label"],$=g["aria-live"],z=y.useMemo(function(){return _e(_e({},kUe),b||{})},[b]),K=y.useMemo(function(){var ge="";if(o&&z.onChange){var oe=o.option,ae=o.options,ie=o.removedValue,ve=o.removedValues,me=o.value,le=function(Ie){return Array.isArray(Ie)?null:Ie},de=ie||oe||le(me),Ee=de?T(de):"",se=ae||ve||void 0,Te=se?se.map(T):[],we=_e({isDisabled:de&&N(de,v),label:Ee,labels:Te},o);ge=z.onChange(we)}return ge},[o,z,N,v,T]),G=y.useMemo(function(){var ge="",oe=s||c,ae=!!(s&&v&&v.includes(s));if(oe&&z.onFocus){var ie={focused:oe,label:T(oe),isDisabled:N(oe,v),isSelected:ae,options:d,context:oe===s?"menu":"value",selectValue:v,isAppleDevice:C};ge=z.onFocus(ie)}return ge},[s,c,T,N,z,d,v,C]),J=y.useMemo(function(){var ge="";if(D&&x.length&&!F&&z.onFilter){var oe=L({count:d.length});ge=z.onFilter({inputValue:A,resultsMessage:oe})}return ge},[d,A,D,z,x,L,F]),ne=(o==null?void 0:o.action)==="initial-input-focus",te=y.useMemo(function(){var ge="";if(z.guidance){var oe=c?"value":D?"menu":"input";ge=z.guidance({"aria-label":V,context:oe,isDisabled:s&&N(s,v),isMulti:I,isSearchable:P,tabSelectsValue:M,isInitialFocus:ne})}return ge},[V,s,c,I,N,P,D,z,v,M,ne]),ce=En(y.Fragment,null,En("span",{id:"aria-selection"},K),En("span",{id:"aria-focused"},G),En("span",{id:"aria-results"},J),En("span",{id:"aria-guidance"},te));return En(y.Fragment,null,En(IG,{id:_},ne&&ce),En(IG,{"aria-live":$,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},f&&!ne&&ce))},FUe=MUe,ED=[{base:"A",letters:"AⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",letters:"Ꜳ"},{base:"AE",letters:"ÆǼǢ"},{base:"AO",letters:"Ꜵ"},{base:"AU",letters:"Ꜷ"},{base:"AV",letters:"ꜸꜺ"},{base:"AY",letters:"Ꜽ"},{base:"B",letters:"BⒷＢḂḄḆɃƂƁ"},{base:"C",letters:"CⒸＣĆĈĊČÇḈƇȻꜾ"},{base:"D",letters:"DⒹＤḊĎḌḐḒḎĐƋƊƉꝹ"},{base:"DZ",letters:"ǱǄ"},{base:"Dz",letters:"ǲǅ"},{base:"E",letters:"EⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎ"},{base:"F",letters:"FⒻＦḞƑꝻ"},{base:"G",letters:"GⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾ"},{base:"H",letters:"HⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",letters:"IⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",letters:"JⒿＪĴɈ"},{base:"K",letters:"KⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",letters:"LⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",letters:"Ǉ"},{base:"Lj",letters:"ǈ"},{base:"M",letters:"MⓂＭḾṀṂⱮƜ"},{base:"N",letters:"NⓃＮǸŃÑṄŇṆŅṊṈȠƝꞐꞤ"},{base:"NJ",letters:"Ǌ"},{base:"Nj",letters:"ǋ"},{base:"O",letters:"OⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OI",letters:"Ƣ"},{base:"OO",letters:"Ꝏ"},{base:"OU",letters:"Ȣ"},{base:"P",letters:"PⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",letters:"QⓆＱꝖꝘɊ"},{base:"R",letters:"RⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",letters:"SⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",letters:"TⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"TZ",letters:"Ꜩ"},{base:"U",letters:"UⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",letters:"VⓋＶṼṾƲꝞɅ"},{base:"VY",letters:"Ꝡ"},{base:"W",letters:"WⓌＷẀẂŴẆẄẈⱲ"},{base:"X",letters:"XⓍＸẊẌ"},{base:"Y",letters:"YⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",letters:"ZⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",letters:"aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐ"},{base:"aa",letters:"ꜳ"},{base:"ae",letters:"æǽǣ"},{base:"ao",letters:"ꜵ"},{base:"au",letters:"ꜷ"},{base:"av",letters:"ꜹꜻ"},{base:"ay",letters:"ꜽ"},{base:"b",letters:"bⓑｂḃḅḇƀƃɓ"},{base:"c",letters:"cⓒｃćĉċčçḉƈȼꜿↄ"},{base:"d",letters:"dⓓｄḋďḍḑḓḏđƌɖɗꝺ"},{base:"dz",letters:"ǳǆ"},{base:"e",letters:"eⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇɛǝ"},{base:"f",letters:"fⓕｆḟƒꝼ"},{base:"g",letters:"gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ"},{base:"h",letters:"hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",letters:"ƕ"},{base:"i",letters:"iⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",letters:"jⓙｊĵǰɉ"},{base:"k",letters:"kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",letters:"lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ"},{base:"lj",letters:"ǉ"},{base:"m",letters:"mⓜｍḿṁṃɱɯ"},{base:"n",letters:"nⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥ"},{base:"nj",letters:"ǌ"},{base:"o",letters:"oⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿɔꝋꝍɵ"},{base:"oi",letters:"ƣ"},{base:"ou",letters:"ȣ"},{base:"oo",letters:"ꝏ"},{base:"p",letters:"pⓟｐṕṗƥᵽꝑꝓꝕ"},{base:"q",letters:"qⓠｑɋꝗꝙ"},{base:"r",letters:"rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",letters:"sⓢｓßśṥŝṡšṧṣṩșşȿꞩꞅẛ"},{base:"t",letters:"tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"tz",letters:"ꜩ"},{base:"u",letters:"uⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",letters:"vⓥｖṽṿʋꝟʌ"},{base:"vy",letters:"ꝡ"},{base:"w",letters:"wⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",letters:"xⓧｘẋẍ"},{base:"y",letters:"yⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",letters:"zⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],UUe=new RegExp("["+ED.map(function(t){return t.letters}).join("")+"]","g"),JZ={};for(var eN=0;eN<ED.length;eN++)for(var tN=ED[eN],nN=0;nN<tN.letters.length;nN++)JZ[tN.letters[nN]]=tN.base;var QZ=function(r){return r.replace(UUe,function(o){return JZ[o]})},BUe=PUe(QZ),AG=function(r){return r.replace(/^\s+|\s+$/g,"")},VUe=function(r){return"".concat(r.label," ").concat(r.value)},jUe=function(r){return function(o,s){if(o.data.__isNew__)return!0;var c=_e({ignoreCase:!0,ignoreAccents:!0,stringify:VUe,trim:!0,matchFrom:"any"},r),d=c.ignoreCase,f=c.ignoreAccents,v=c.stringify,g=c.trim,_=c.matchFrom,C=g?AG(s):s,b=g?AG(v(o)):v(o);return d&&(C=C.toLowerCase(),b=b.toLowerCase()),f&&(C=BUe(C),b=QZ(b)),_==="start"?b.substr(0,C.length)===C:b.indexOf(C)>-1}},$Ue=["innerRef"];function HUe(t){var r=t.innerRef,o=xn(t,$Ue),s=m4e(o,"onExited","in","enter","exit","appear");return En("input",nt({ref:r},s,{css:kL({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var zUe=function(r){r.cancelable&&r.preventDefault(),r.stopPropagation()};function WUe(t){var r=t.isEnabled,o=t.onBottomArrive,s=t.onBottomLeave,c=t.onTopArrive,d=t.onTopLeave,f=y.useRef(!1),v=y.useRef(!1),g=y.useRef(0),_=y.useRef(null),C=y.useCallback(function(P,D){if(_.current!==null){var x=_.current,L=x.scrollTop,M=x.scrollHeight,F=x.clientHeight,V=_.current,$=D>0,z=M-F-L,K=!1;z>D&&f.current&&(s&&s(P),f.current=!1),$&&v.current&&(d&&d(P),v.current=!1),$&&D>z?(o&&!f.current&&o(P),V.scrollTop=M,K=!0,f.current=!0):!$&&-D>L&&(c&&!v.current&&c(P),V.scrollTop=0,K=!0,v.current=!0),K&&zUe(P)}},[o,s,c,d]),b=y.useCallback(function(P){C(P,P.deltaY)},[C]),T=y.useCallback(function(P){g.current=P.changedTouches[0].clientY},[]),A=y.useCallback(function(P){var D=g.current-P.changedTouches[0].clientY;C(P,D)},[C]),I=y.useCallback(function(P){if(P){var D=h4e?{passive:!1}:!1;P.addEventListener("wheel",b,D),P.addEventListener("touchstart",T,D),P.addEventListener("touchmove",A,D)}},[A,T,b]),N=y.useCallback(function(P){P&&(P.removeEventListener("wheel",b,!1),P.removeEventListener("touchstart",T,!1),P.removeEventListener("touchmove",A,!1))},[A,T,b]);return y.useEffect(function(){if(r){var P=_.current;return I(P),function(){N(P)}}},[r,I,N]),function(P){_.current=P}}var OG=["boxSizing","height","overflow","paddingRight","position"],xG={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function NG(t){t.cancelable&&t.preventDefault()}function PG(t){t.stopPropagation()}function DG(){var t=this.scrollTop,r=this.scrollHeight,o=t+this.offsetHeight;t===0?this.scrollTop=1:o===r&&(this.scrollTop=t-1)}function LG(){return"ontouchstart"in window||navigator.maxTouchPoints}var kG=!!(typeof window<"u"&&window.document&&window.document.createElement),Dg=0,kp={capture:!1,passive:!1};function GUe(t){var r=t.isEnabled,o=t.accountForScrollbars,s=o===void 0?!0:o,c=y.useRef({}),d=y.useRef(null),f=y.useCallback(function(g){if(kG){var _=document.body,C=_&&_.style;if(s&&OG.forEach(function(I){var N=C&&C[I];c.current[I]=N}),s&&Dg<1){var b=parseInt(c.current.paddingRight,10)||0,T=document.body?document.body.clientWidth:0,A=window.innerWidth-T+b||0;Object.keys(xG).forEach(function(I){var N=xG[I];C&&(C[I]=N)}),C&&(C.paddingRight="".concat(A,"px"))}_&&LG()&&(_.addEventListener("touchmove",NG,kp),g&&(g.addEventListener("touchstart",DG,kp),g.addEventListener("touchmove",PG,kp))),Dg+=1}},[s]),v=y.useCallback(function(g){if(kG){var _=document.body,C=_&&_.style;Dg=Math.max(Dg-1,0),s&&Dg<1&&OG.forEach(function(b){var T=c.current[b];C&&(C[b]=T)}),_&&LG()&&(_.removeEventListener("touchmove",NG,kp),g&&(g.removeEventListener("touchstart",DG,kp),g.removeEventListener("touchmove",PG,kp)))}},[s]);return y.useEffect(function(){if(r){var g=d.current;return f(g),function(){v(g)}}},[r,f,v]),function(g){d.current=g}}var KUe=function(r){var o=r.target;return o.ownerDocument.activeElement&&o.ownerDocument.activeElement.blur()},YUe={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function qUe(t){var r=t.children,o=t.lockEnabled,s=t.captureEnabled,c=s===void 0?!0:s,d=t.onBottomArrive,f=t.onBottomLeave,v=t.onTopArrive,g=t.onTopLeave,_=WUe({isEnabled:c,onBottomArrive:d,onBottomLeave:f,onTopArrive:v,onTopLeave:g}),C=GUe({isEnabled:o}),b=function(A){_(A),C(A)};return En(y.Fragment,null,o&&En("div",{onClick:KUe,css:YUe}),r(b))}var XUe={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},JUe=function(r){var o=r.name,s=r.onFocus;return En("input",{required:!0,name:o,tabIndex:-1,"aria-hidden":"true",onFocus:s,css:XUe,value:"",onChange:function(){}})},QUe=JUe;function VL(t){var r;return typeof window<"u"&&window.navigator!=null?t.test(((r=window.navigator.userAgentData)===null||r===void 0?void 0:r.platform)||window.navigator.platform):!1}function ZUe(){return VL(/^iPhone/i)}function ZZ(){return VL(/^Mac/i)}function eBe(){return VL(/^iPad/i)||ZZ()&&navigator.maxTouchPoints>1}function tBe(){return ZUe()||eBe()}function nBe(){return ZZ()||tBe()}var rBe=function(r){return r.label},iBe=function(r){return r.label},oBe=function(r){return r.value},aBe=function(r){return!!r.isDisabled},sBe={clearIndicator:H4e,container:P4e,control:X4e,dropdownIndicator:j4e,group:eUe,groupHeading:nUe,indicatorsContainer:M4e,indicatorSeparator:W4e,input:aUe,loadingIndicator:Y4e,loadingMessage:I4e,menu:S4e,menuList:T4e,menuPortal:x4e,multiValue:dUe,multiValueLabel:hUe,multiValueRemove:fUe,noOptionsMessage:w4e,option:_Ue,placeholder:CUe,singleValue:RUe,valueContainer:L4e},cBe={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},lBe=4,eee=4,uBe=38,dBe=eee*2,hBe={baseUnit:eee,controlHeight:uBe,menuGutter:dBe},rN={borderRadius:lBe,colors:cBe,spacing:hBe},fBe={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:TG(),captureMenuScroll:!TG(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:jUe(),formatGroupLabel:rBe,getOptionLabel:iBe,getOptionValue:oBe,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:aBe,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!u4e(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(r){var o=r.count;return"".concat(o," result").concat(o!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function MG(t,r,o,s){var c=ree(t,r,o),d=iee(t,r,o),f=nee(t,r),v=yb(t,r);return{type:"option",data:r,isDisabled:c,isSelected:d,label:f,value:v,index:s}}function CC(t,r){return t.options.map(function(o,s){if("options"in o){var c=o.options.map(function(f,v){return MG(t,f,r,v)}).filter(function(f){return UG(t,f)});return c.length>0?{type:"group",data:o,options:c,index:s}:void 0}var d=MG(t,o,r,s);return UG(t,d)?d:void 0}).filter(f4e)}function tee(t){return t.reduce(function(r,o){return o.type==="group"?r.push.apply(r,Et(o.options.map(function(s){return s.data}))):r.push(o.data),r},[])}function FG(t,r){return t.reduce(function(o,s){return s.type==="group"?o.push.apply(o,Et(s.options.map(function(c){return{data:c.data,id:"".concat(r,"-").concat(s.index,"-").concat(c.index)}}))):o.push({data:s.data,id:"".concat(r,"-").concat(s.index)}),o},[])}function pBe(t,r){return tee(CC(t,r))}function UG(t,r){var o=t.inputValue,s=o===void 0?"":o,c=r.data,d=r.isSelected,f=r.label,v=r.value;return(!aee(t)||!d)&&oee(t,{label:f,value:v,data:c},s)}function mBe(t,r){var o=t.focusedValue,s=t.selectValue,c=s.indexOf(o);if(c>-1){var d=r.indexOf(o);if(d>-1)return o;if(c<r.length)return r[c]}return null}function gBe(t,r){var o=t.focusedOption;return o&&r.indexOf(o)>-1?o:r[0]}var iN=function(r,o){var s,c=(s=r.find(function(d){return d.data===o}))===null||s===void 0?void 0:s.id;return c||null},nee=function(r,o){return r.getOptionLabel(o)},yb=function(r,o){return r.getOptionValue(o)};function ree(t,r,o){return typeof t.isOptionDisabled=="function"?t.isOptionDisabled(r,o):!1}function iee(t,r,o){if(o.indexOf(r)>-1)return!0;if(typeof t.isOptionSelected=="function")return t.isOptionSelected(r,o);var s=yb(t,r);return o.some(function(c){return yb(t,c)===s})}function oee(t,r,o){return t.filterOption?t.filterOption(r,o):!0}var aee=function(r){var o=r.hideSelectedOptions,s=r.isMulti;return o===void 0?s:o},vBe=1,see=function(t){Bl(o,t);var r=Vl(o);function o(s){var c;if(io(this,o),c=r.call(this,s),c.state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:""},c.blockOptionHover=!1,c.isComposing=!1,c.commonProps=void 0,c.initialTouchX=0,c.initialTouchY=0,c.openAfterFocus=!1,c.scrollToFocusedOptionOnUpdate=!1,c.userIsDragging=void 0,c.isAppleDevice=nBe(),c.controlRef=null,c.getControlRef=function(g){c.controlRef=g},c.focusedOptionRef=null,c.getFocusedOptionRef=function(g){c.focusedOptionRef=g},c.menuListRef=null,c.getMenuListRef=function(g){c.menuListRef=g},c.inputRef=null,c.getInputRef=function(g){c.inputRef=g},c.focus=c.focusInput,c.blur=c.blurInput,c.onChange=function(g,_){var C=c.props,b=C.onChange,T=C.name;_.name=T,c.ariaOnChange(g,_),b(g,_)},c.setValue=function(g,_,C){var b=c.props,T=b.closeMenuOnSelect,A=b.isMulti,I=b.inputValue;c.onInputChange("",{action:"set-value",prevInputValue:I}),T&&(c.setState({inputIsHiddenAfterUpdate:!A}),c.onMenuClose()),c.setState({clearFocusValueOnUpdate:!0}),c.onChange(g,{action:_,option:C})},c.selectOption=function(g){var _=c.props,C=_.blurInputOnSelect,b=_.isMulti,T=_.name,A=c.state.selectValue,I=b&&c.isOptionSelected(g,A),N=c.isOptionDisabled(g,A);if(I){var P=c.getOptionValue(g);c.setValue(A.filter(function(D){return c.getOptionValue(D)!==P}),"deselect-option",g)}else if(!N)b?c.setValue([].concat(Et(A),[g]),"select-option",g):c.setValue(g,"select-option");else{c.ariaOnChange(g,{action:"select-option",option:g,name:T});return}C&&c.blurInput()},c.removeValue=function(g){var _=c.props.isMulti,C=c.state.selectValue,b=c.getOptionValue(g),T=C.filter(function(I){return c.getOptionValue(I)!==b}),A=Yy(_,T,T[0]||null);c.onChange(A,{action:"remove-value",removedValue:g}),c.focusInput()},c.clearValue=function(){var g=c.state.selectValue;c.onChange(Yy(c.props.isMulti,[],null),{action:"clear",removedValues:g})},c.popValue=function(){var g=c.props.isMulti,_=c.state.selectValue,C=_[_.length-1],b=_.slice(0,_.length-1),T=Yy(g,b,b[0]||null);C&&c.onChange(T,{action:"pop-value",removedValue:C})},c.getFocusedOptionId=function(g){return iN(c.state.focusableOptionsWithIds,g)},c.getFocusableOptionsWithIds=function(){return FG(CC(c.props,c.state.selectValue),c.getElementId("option"))},c.getValue=function(){return c.state.selectValue},c.cx=function(){for(var g=arguments.length,_=new Array(g),C=0;C<g;C++)_[C]=arguments[C];return o4e.apply(void 0,[c.props.classNamePrefix].concat(_))},c.getOptionLabel=function(g){return nee(c.props,g)},c.getOptionValue=function(g){return yb(c.props,g)},c.getStyles=function(g,_){var C=c.props.unstyled,b=sBe[g](_,C);b.boxSizing="border-box";var T=c.props.styles[g];return T?T(b,_):b},c.getClassNames=function(g,_){var C,b;return(C=(b=c.props.classNames)[g])===null||C===void 0?void 0:C.call(b,_)},c.getElementId=function(g){return"".concat(c.state.instancePrefix,"-").concat(g)},c.getComponents=function(){return OUe(c.props)},c.buildCategorizedOptions=function(){return CC(c.props,c.state.selectValue)},c.getCategorizedOptions=function(){return c.props.menuIsOpen?c.buildCategorizedOptions():[]},c.buildFocusableOptions=function(){return tee(c.buildCategorizedOptions())},c.getFocusableOptions=function(){return c.props.menuIsOpen?c.buildFocusableOptions():[]},c.ariaOnChange=function(g,_){c.setState({ariaSelection:_e({value:g},_)})},c.onMenuMouseDown=function(g){g.button===0&&(g.stopPropagation(),g.preventDefault(),c.focusInput())},c.onMenuMouseMove=function(g){c.blockOptionHover=!1},c.onControlMouseDown=function(g){if(!g.defaultPrevented){var _=c.props.openMenuOnClick;c.state.isFocused?c.props.menuIsOpen?g.target.tagName!=="INPUT"&&g.target.tagName!=="TEXTAREA"&&c.onMenuClose():_&&c.openMenu("first"):(_&&(c.openAfterFocus=!0),c.focusInput()),g.target.tagName!=="INPUT"&&g.target.tagName!=="TEXTAREA"&&g.preventDefault()}},c.onDropdownIndicatorMouseDown=function(g){if(!(g&&g.type==="mousedown"&&g.button!==0)&&!c.props.isDisabled){var _=c.props,C=_.isMulti,b=_.menuIsOpen;c.focusInput(),b?(c.setState({inputIsHiddenAfterUpdate:!C}),c.onMenuClose()):c.openMenu("first"),g.preventDefault()}},c.onClearIndicatorMouseDown=function(g){g&&g.type==="mousedown"&&g.button!==0||(c.clearValue(),g.preventDefault(),c.openAfterFocus=!1,g.type==="touchend"?c.focusInput():setTimeout(function(){return c.focusInput()}))},c.onScroll=function(g){typeof c.props.closeMenuOnScroll=="boolean"?g.target instanceof HTMLElement&&qT(g.target)&&c.props.onMenuClose():typeof c.props.closeMenuOnScroll=="function"&&c.props.closeMenuOnScroll(g)&&c.props.onMenuClose()},c.onCompositionStart=function(){c.isComposing=!0},c.onCompositionEnd=function(){c.isComposing=!1},c.onTouchStart=function(g){var _=g.touches,C=_&&_.item(0);C&&(c.initialTouchX=C.clientX,c.initialTouchY=C.clientY,c.userIsDragging=!1)},c.onTouchMove=function(g){var _=g.touches,C=_&&_.item(0);if(C){var b=Math.abs(C.clientX-c.initialTouchX),T=Math.abs(C.clientY-c.initialTouchY),A=5;c.userIsDragging=b>A||T>A}},c.onTouchEnd=function(g){c.userIsDragging||(c.controlRef&&!c.controlRef.contains(g.target)&&c.menuListRef&&!c.menuListRef.contains(g.target)&&c.blurInput(),c.initialTouchX=0,c.initialTouchY=0)},c.onControlTouchEnd=function(g){c.userIsDragging||c.onControlMouseDown(g)},c.onClearIndicatorTouchEnd=function(g){c.userIsDragging||c.onClearIndicatorMouseDown(g)},c.onDropdownIndicatorTouchEnd=function(g){c.userIsDragging||c.onDropdownIndicatorMouseDown(g)},c.handleInputChange=function(g){var _=c.props.inputValue,C=g.currentTarget.value;c.setState({inputIsHiddenAfterUpdate:!1}),c.onInputChange(C,{action:"input-change",prevInputValue:_}),c.props.menuIsOpen||c.onMenuOpen()},c.onInputFocus=function(g){c.props.onFocus&&c.props.onFocus(g),c.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(c.openAfterFocus||c.props.openMenuOnFocus)&&c.openMenu("first"),c.openAfterFocus=!1},c.onInputBlur=function(g){var _=c.props.inputValue;if(c.menuListRef&&c.menuListRef.contains(document.activeElement)){c.inputRef.focus();return}c.props.onBlur&&c.props.onBlur(g),c.onInputChange("",{action:"input-blur",prevInputValue:_}),c.onMenuClose(),c.setState({focusedValue:null,isFocused:!1})},c.onOptionHover=function(g){if(!(c.blockOptionHover||c.state.focusedOption===g)){var _=c.getFocusableOptions(),C=_.indexOf(g);c.setState({focusedOption:g,focusedOptionId:C>-1?c.getFocusedOptionId(g):null})}},c.shouldHideSelectedOptions=function(){return aee(c.props)},c.onValueInputFocus=function(g){g.preventDefault(),g.stopPropagation(),c.focus()},c.onKeyDown=function(g){var _=c.props,C=_.isMulti,b=_.backspaceRemovesValue,T=_.escapeClearsValue,A=_.inputValue,I=_.isClearable,N=_.isDisabled,P=_.menuIsOpen,D=_.onKeyDown,x=_.tabSelectsValue,L=_.openMenuOnFocus,M=c.state,F=M.focusedOption,V=M.focusedValue,$=M.selectValue;if(!N&&!(typeof D=="function"&&(D(g),g.defaultPrevented))){switch(c.blockOptionHover=!0,g.key){case"ArrowLeft":if(!C||A)return;c.focusValue("previous");break;case"ArrowRight":if(!C||A)return;c.focusValue("next");break;case"Delete":case"Backspace":if(A)return;if(V)c.removeValue(V);else{if(!b)return;C?c.popValue():I&&c.clearValue()}break;case"Tab":if(c.isComposing||g.shiftKey||!P||!x||!F||L&&c.isOptionSelected(F,$))return;c.selectOption(F);break;case"Enter":if(g.keyCode===229)break;if(P){if(!F||c.isComposing)return;c.selectOption(F);break}return;case"Escape":P?(c.setState({inputIsHiddenAfterUpdate:!1}),c.onInputChange("",{action:"menu-close",prevInputValue:A}),c.onMenuClose()):I&&T&&c.clearValue();break;case" ":if(A)return;if(!P){c.openMenu("first");break}if(!F)return;c.selectOption(F);break;case"ArrowUp":P?c.focusOption("up"):c.openMenu("last");break;case"ArrowDown":P?c.focusOption("down"):c.openMenu("first");break;case"PageUp":if(!P)return;c.focusOption("pageup");break;case"PageDown":if(!P)return;c.focusOption("pagedown");break;case"Home":if(!P)return;c.focusOption("first");break;case"End":if(!P)return;c.focusOption("last");break;default:return}g.preventDefault()}},c.state.instancePrefix="react-select-"+(c.props.instanceId||++vBe),c.state.selectValue=CG(s.value),s.menuIsOpen&&c.state.selectValue.length){var d=c.getFocusableOptionsWithIds(),f=c.buildFocusableOptions(),v=f.indexOf(c.state.selectValue[0]);c.state.focusableOptionsWithIds=d,c.state.focusedOption=f[v],c.state.focusedOptionId=iN(d,f[v])}return c}return oo(o,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&bG(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(c){var d=this.props,f=d.isDisabled,v=d.menuIsOpen,g=this.state.isFocused;(g&&!f&&c.isDisabled||g&&v&&!c.menuIsOpen)&&this.focusInput(),g&&f&&!c.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!g&&!f&&c.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(bG(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(c,d){this.props.onInputChange(c,d)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(c){var d=this,f=this.state,v=f.selectValue,g=f.isFocused,_=this.buildFocusableOptions(),C=c==="first"?0:_.length-1;if(!this.props.isMulti){var b=_.indexOf(v[0]);b>-1&&(C=b)}this.scrollToFocusedOptionOnUpdate=!(g&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:_[C],focusedOptionId:this.getFocusedOptionId(_[C])},function(){return d.onMenuOpen()})}},{key:"focusValue",value:function(c){var d=this.state,f=d.selectValue,v=d.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var g=f.indexOf(v);v||(g=-1);var _=f.length-1,C=-1;if(f.length){switch(c){case"previous":g===0?C=0:g===-1?C=_:C=g-1;break;case"next":g>-1&&g<_&&(C=g+1);break}this.setState({inputIsHidden:C!==-1,focusedValue:f[C]})}}}},{key:"focusOption",value:function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",d=this.props.pageSize,f=this.state.focusedOption,v=this.getFocusableOptions();if(v.length){var g=0,_=v.indexOf(f);f||(_=-1),c==="up"?g=_>0?_-1:v.length-1:c==="down"?g=(_+1)%v.length:c==="pageup"?(g=_-d,g<0&&(g=0)):c==="pagedown"?(g=_+d,g>v.length-1&&(g=v.length-1)):c==="last"&&(g=v.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:v[g],focusedValue:null,focusedOptionId:this.getFocusedOptionId(v[g])})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(rN):_e(_e({},rN),this.props.theme):rN}},{key:"getCommonProps",value:function(){var c=this.clearValue,d=this.cx,f=this.getStyles,v=this.getClassNames,g=this.getValue,_=this.selectOption,C=this.setValue,b=this.props,T=b.isMulti,A=b.isRtl,I=b.options,N=this.hasValue();return{clearValue:c,cx:d,getStyles:f,getClassNames:v,getValue:g,hasValue:N,isMulti:T,isRtl:A,options:I,selectOption:_,selectProps:b,setValue:C,theme:this.getTheme()}}},{key:"hasValue",value:function(){var c=this.state.selectValue;return c.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var c=this.props,d=c.isClearable,f=c.isMulti;return d===void 0?f:d}},{key:"isOptionDisabled",value:function(c,d){return ree(this.props,c,d)}},{key:"isOptionSelected",value:function(c,d){return iee(this.props,c,d)}},{key:"filterOption",value:function(c,d){return oee(this.props,c,d)}},{key:"formatOptionLabel",value:function(c,d){if(typeof this.props.formatOptionLabel=="function"){var f=this.props.inputValue,v=this.state.selectValue;return this.props.formatOptionLabel(c,{context:d,inputValue:f,selectValue:v})}else return this.getOptionLabel(c)}},{key:"formatGroupLabel",value:function(c){return this.props.formatGroupLabel(c)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var c=this.props,d=c.isDisabled,f=c.isSearchable,v=c.inputId,g=c.inputValue,_=c.tabIndex,C=c.form,b=c.menuIsOpen,T=c.required,A=this.getComponents(),I=A.Input,N=this.state,P=N.inputIsHidden,D=N.ariaSelection,x=this.commonProps,L=v||this.getElementId("input"),M=_e(_e(_e({"aria-autocomplete":"list","aria-expanded":b,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":T,role:"combobox","aria-activedescendant":this.isAppleDevice?void 0:this.state.focusedOptionId||""},b&&{"aria-controls":this.getElementId("listbox")}),!f&&{"aria-readonly":!0}),this.hasValue()?(D==null?void 0:D.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return f?y.createElement(I,nt({},x,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:L,innerRef:this.getInputRef,isDisabled:d,isHidden:P,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:_,form:C,type:"text",value:g},M)):y.createElement(HUe,nt({id:L,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:_b,onFocus:this.onInputFocus,disabled:d,tabIndex:_,inputMode:"none",form:C,value:""},M))}},{key:"renderPlaceholderOrValue",value:function(){var c=this,d=this.getComponents(),f=d.MultiValue,v=d.MultiValueContainer,g=d.MultiValueLabel,_=d.MultiValueRemove,C=d.SingleValue,b=d.Placeholder,T=this.commonProps,A=this.props,I=A.controlShouldRenderValue,N=A.isDisabled,P=A.isMulti,D=A.inputValue,x=A.placeholder,L=this.state,M=L.selectValue,F=L.focusedValue,V=L.isFocused;if(!this.hasValue()||!I)return D?null:y.createElement(b,nt({},T,{key:"placeholder",isDisabled:N,isFocused:V,innerProps:{id:this.getElementId("placeholder")}}),x);if(P)return M.map(function(z,K){var G=z===F,J="".concat(c.getOptionLabel(z),"-").concat(c.getOptionValue(z));return y.createElement(f,nt({},T,{components:{Container:v,Label:g,Remove:_},isFocused:G,isDisabled:N,key:J,index:K,removeProps:{onClick:function(){return c.removeValue(z)},onTouchEnd:function(){return c.removeValue(z)},onMouseDown:function(te){te.preventDefault()}},data:z}),c.formatOptionLabel(z,"value"))});if(D)return null;var $=M[0];return y.createElement(C,nt({},T,{data:$,isDisabled:N}),this.formatOptionLabel($,"value"))}},{key:"renderClearIndicator",value:function(){var c=this.getComponents(),d=c.ClearIndicator,f=this.commonProps,v=this.props,g=v.isDisabled,_=v.isLoading,C=this.state.isFocused;if(!this.isClearable()||!d||g||!this.hasValue()||_)return null;var b={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return y.createElement(d,nt({},f,{innerProps:b,isFocused:C}))}},{key:"renderLoadingIndicator",value:function(){var c=this.getComponents(),d=c.LoadingIndicator,f=this.commonProps,v=this.props,g=v.isDisabled,_=v.isLoading,C=this.state.isFocused;if(!d||!_)return null;var b={"aria-hidden":"true"};return y.createElement(d,nt({},f,{innerProps:b,isDisabled:g,isFocused:C}))}},{key:"renderIndicatorSeparator",value:function(){var c=this.getComponents(),d=c.DropdownIndicator,f=c.IndicatorSeparator;if(!d||!f)return null;var v=this.commonProps,g=this.props.isDisabled,_=this.state.isFocused;return y.createElement(f,nt({},v,{isDisabled:g,isFocused:_}))}},{key:"renderDropdownIndicator",value:function(){var c=this.getComponents(),d=c.DropdownIndicator;if(!d)return null;var f=this.commonProps,v=this.props.isDisabled,g=this.state.isFocused,_={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return y.createElement(d,nt({},f,{innerProps:_,isDisabled:v,isFocused:g}))}},{key:"renderMenu",value:function(){var c=this,d=this.getComponents(),f=d.Group,v=d.GroupHeading,g=d.Menu,_=d.MenuList,C=d.MenuPortal,b=d.LoadingMessage,T=d.NoOptionsMessage,A=d.Option,I=this.commonProps,N=this.state.focusedOption,P=this.props,D=P.captureMenuScroll,x=P.inputValue,L=P.isLoading,M=P.loadingMessage,F=P.minMenuHeight,V=P.maxMenuHeight,$=P.menuIsOpen,z=P.menuPlacement,K=P.menuPosition,G=P.menuPortalTarget,J=P.menuShouldBlockScroll,ne=P.menuShouldScrollIntoView,te=P.noOptionsMessage,ce=P.onMenuScrollToTop,ge=P.onMenuScrollToBottom;if(!$)return null;var oe=function(Ee,se){var Te=Ee.type,we=Ee.data,Le=Ee.isDisabled,Ie=Ee.isSelected,De=Ee.label,Ye=Ee.value,Me=N===we,Oe=Le?void 0:function(){return c.onOptionHover(we)},$e=Le?void 0:function(){return c.selectOption(we)},tt="".concat(c.getElementId("option"),"-").concat(se),je={id:tt,onClick:$e,onMouseMove:Oe,onMouseOver:Oe,tabIndex:-1,role:"option","aria-selected":c.isAppleDevice?void 0:Ie};return y.createElement(A,nt({},I,{innerProps:je,data:we,isDisabled:Le,isSelected:Ie,key:tt,label:De,type:Te,value:Ye,isFocused:Me,innerRef:Me?c.getFocusedOptionRef:void 0}),c.formatOptionLabel(Ee.data,"menu"))},ae;if(this.hasOptions())ae=this.getCategorizedOptions().map(function(de){if(de.type==="group"){var Ee=de.data,se=de.options,Te=de.index,we="".concat(c.getElementId("group"),"-").concat(Te),Le="".concat(we,"-heading");return y.createElement(f,nt({},I,{key:we,data:Ee,options:se,Heading:v,headingProps:{id:Le,data:de.data},label:c.formatGroupLabel(de.data)}),de.options.map(function(Ie){return oe(Ie,"".concat(Te,"-").concat(Ie.index))}))}else if(de.type==="option")return oe(de,"".concat(de.index))});else if(L){var ie=M({inputValue:x});if(ie===null)return null;ae=y.createElement(b,I,ie)}else{var ve=te({inputValue:x});if(ve===null)return null;ae=y.createElement(T,I,ve)}var me={minMenuHeight:F,maxMenuHeight:V,menuPlacement:z,menuPosition:K,menuShouldScrollIntoView:ne},le=y.createElement(y4e,nt({},I,me),function(de){var Ee=de.ref,se=de.placerProps,Te=se.placement,we=se.maxHeight;return y.createElement(g,nt({},I,me,{innerRef:Ee,innerProps:{onMouseDown:c.onMenuMouseDown,onMouseMove:c.onMenuMouseMove},isLoading:L,placement:Te}),y.createElement(qUe,{captureEnabled:D,onTopArrive:ce,onBottomArrive:ge,lockEnabled:J},function(Le){return y.createElement(_,nt({},I,{innerRef:function(De){c.getMenuListRef(De),Le(De)},innerProps:{role:"listbox","aria-multiselectable":I.isMulti,id:c.getElementId("listbox")},isLoading:L,maxHeight:we,focusedOption:N}),ae)}))});return G||K==="fixed"?y.createElement(C,nt({},I,{appendTo:G,controlElement:this.controlRef,menuPlacement:z,menuPosition:K}),le):le}},{key:"renderFormField",value:function(){var c=this,d=this.props,f=d.delimiter,v=d.isDisabled,g=d.isMulti,_=d.name,C=d.required,b=this.state.selectValue;if(C&&!this.hasValue()&&!v)return y.createElement(QUe,{name:_,onFocus:this.onValueInputFocus});if(!(!_||v))if(g)if(f){var T=b.map(function(N){return c.getOptionValue(N)}).join(f);return y.createElement("input",{name:_,type:"hidden",value:T})}else{var A=b.length>0?b.map(function(N,P){return y.createElement("input",{key:"i-".concat(P),name:_,type:"hidden",value:c.getOptionValue(N)})}):y.createElement("input",{name:_,type:"hidden",value:""});return y.createElement("div",null,A)}else{var I=b[0]?this.getOptionValue(b[0]):"";return y.createElement("input",{name:_,type:"hidden",value:I})}}},{key:"renderLiveRegion",value:function(){var c=this.commonProps,d=this.state,f=d.ariaSelection,v=d.focusedOption,g=d.focusedValue,_=d.isFocused,C=d.selectValue,b=this.getFocusableOptions();return y.createElement(FUe,nt({},c,{id:this.getElementId("live-region"),ariaSelection:f,focusedOption:v,focusedValue:g,isFocused:_,selectValue:C,focusableOptions:b,isAppleDevice:this.isAppleDevice}))}},{key:"render",value:function(){var c=this.getComponents(),d=c.Control,f=c.IndicatorsContainer,v=c.SelectContainer,g=c.ValueContainer,_=this.props,C=_.className,b=_.id,T=_.isDisabled,A=_.menuIsOpen,I=this.state.isFocused,N=this.commonProps=this.getCommonProps();return y.createElement(v,nt({},N,{className:C,innerProps:{id:b,onKeyDown:this.onKeyDown},isDisabled:T,isFocused:I}),this.renderLiveRegion(),y.createElement(d,nt({},N,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:T,isFocused:I,menuIsOpen:A}),y.createElement(g,nt({},N,{isDisabled:T}),this.renderPlaceholderOrValue(),this.renderInput()),y.createElement(f,nt({},N,{isDisabled:T}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(c,d){var f=d.prevProps,v=d.clearFocusValueOnUpdate,g=d.inputIsHiddenAfterUpdate,_=d.ariaSelection,C=d.isFocused,b=d.prevWasFocused,T=d.instancePrefix,A=c.options,I=c.value,N=c.menuIsOpen,P=c.inputValue,D=c.isMulti,x=CG(I),L={};if(f&&(I!==f.value||A!==f.options||N!==f.menuIsOpen||P!==f.inputValue)){var M=N?pBe(c,x):[],F=N?FG(CC(c,x),"".concat(T,"-option")):[],V=v?mBe(d,x):null,$=gBe(d,M),z=iN(F,$);L={selectValue:x,focusedOption:$,focusedOptionId:z,focusableOptionsWithIds:F,focusedValue:V,clearFocusValueOnUpdate:!1}}var K=g!=null&&c!==f?{inputIsHidden:g,inputIsHiddenAfterUpdate:void 0}:{},G=_,J=C&&b;return C&&!J&&(G={value:Yy(D,x,x[0]||null),options:x,action:"initial-input-focus"},J=!b),(_==null?void 0:_.action)==="initial-input-focus"&&(G=null),_e(_e(_e({},L),K),{},{prevProps:c,ariaSelection:G,prevWasFocused:J})}}]),o}(y.Component);see.defaultProps=fBe;var EBe=y.forwardRef(function(t,r){var o=FMe(t);return y.createElement(see,nt({ref:r},o))}),_Be=EBe;const{Title:SBe,Paragraph:yBe}=Vo,CBe=y.memo(function({label:r}){const s=tl().filter(g=>g.hasAudio||g.hasVideo),c=rv(g=>g.localTracks),d=rv(g=>g.hostRoom),f=gu(),v=Os();return fe.jsxs("div",{className:"room-selector-item",children:[fe.jsx("i",{className:"i-mdi-chat-processing-outline text-5 color-zinc"}),fe.jsx("code",{className:"bg-rose color-white px-2 rounded",children:r}),f&&c&&v.uid&&(d==null?void 0:d.client.channelName)===v.channelName&&fe.jsxs("div",{className:"user",children:[fe.jsx(cK,{audioTrack:c[0],cameraOn:!0,micOn:!0,videoTrack:c[1]}),fe.jsx("div",{className:"mask"}),fe.jsx("label",{className:"label",children:el(v.uid)})]},v.uid),fe.jsx(fe.Fragment,{children:s.map(g=>fe.jsxs("div",{className:"user",children:[fe.jsx(AD,{user:g}),fe.jsx("div",{className:"mask"}),fe.jsx("label",{className:"label",children:el(g.uid)})]},g.uid))})]})}),bBe=({innerProps:t,isDisabled:r,label:o,data:s})=>{const{client:c}=s.value;return r?null:fe.jsx("div",{...t,children:fe.jsx(iK,{client:c,children:fe.jsx(CBe,{label:o})})})},TBe=()=>{const t=rv(f=>f.getRooms),[r,o]=y.useState(!1);y.useEffect(()=>{t()},[]);const s=rv(f=>f.rooms),c=rv(f=>f.selectChannel),d=y.useMemo(()=>s==null?void 0:s.map(f=>({label:f.channel.replace(/[^0-9]*/,"Room"),value:f})),[s]);return fe.jsx(Bi,{children:r?fe.jsx("div",{className:"max-w-lg p-10",children:fe.jsx(_Be,{components:{Option:bBe},isMulti:!1,menuIsOpen:!0,onChange:f=>{var v;return c((v=f==null?void 0:f.value)==null?void 0:v.channel)},options:d})}):fe.jsxs("div",{className:"h-screen p-3",children:[fe.jsx(SBe,{children:"multi-channel"}),fe.jsx(yBe,{children:"This is multi-channel example. By create multi Agora Client. You can join multi-channel"}),fe.jsx("div",{className:"text-xl",children:fe.jsx(mo,{onClick:()=>o(!0),type:"primary",children:"show demo"})})]})})};function cee({videoTracks:t}){return fe.jsx(fe.Fragment,{children:t.map(r=>fe.jsxs(hc.Item,{children:[fe.jsx(lE,{cover:Ul(),track:r},r.getUserId()),fe.jsx(mu,{children:`${el(r.getUserId())}{${r.getUserId()}}`})]},r.getUserId()))})}const RBe=()=>{const[t,r]=y.useState(!1);ro({appid:Jt.appId,channel:Jt.channel,token:Jt.token},t);const[o,s]=y.useState(!1),[c,d]=y.useState(!1),[f,v]=y.useState(!1),{screenTrack:g,error:_}=oK(f,{},"auto");y.useEffect(()=>{v(!1)},[_]);const C=tl(),{videoTracks:b}=Rm(C.filter(A=>A.uid!==Jt.ShareScreenUID)),{audioTracks:T}=Tm(C.filter(A=>A.uid!==Jt.ShareScreenUID));return T.map(A=>A.play()),fe.jsxs(Bi,{children:[fe.jsx("div",{className:"h-screen p-3",children:t&&fe.jsxs(fe.Fragment,{children:[fe.jsx(mo,{onClick:()=>v(A=>!A),type:"primary",children:f?"stop share screen":"start share screen"}),f&&fe.jsx(sMe,{onCloseScreenShare:()=>{v(!1)},screenShareOn:f,screenTrack:g}),fe.jsx(uE,{cameraOn:c,micOn:o,renderRemoteUsers:()=>fe.jsx(cee,{videoTracks:b})})]})}),fe.jsx(La,{calling:t,cameraOn:c,micOn:o,setCalling:()=>{r(A=>!A),v(!1)},setCamera:()=>{d(A=>!A)},setMic:()=>{s(A=>!A)}})]})};const{Title:wBe,Paragraph:IBe,Text:ABe}=Vo,OBe=()=>{const[t,r]=y.useState(!1);ro({appid:Jt.appId,channel:Jt.channel,token:Jt.token},t);const[o,s]=y.useState(!1),[c,d]=y.useState(!1),f=tl(),[v,g]=y.useState(!0),{videoTracks:_}=Rm(v?f:f.filter((A,I)=>I==0)),{audioTracks:C}=Tm(f);C.map(A=>A.play());const b=()=>fe.jsx("div",{className:"p-4 text-xl",children:fe.jsx(mo,{onClick:()=>g(A=>!A),type:"primary",children:`switch to layout ${v?2:1}`})}),T=()=>fe.jsx(fe.Fragment,{children:v?fe.jsx(xBe,{videoTracks:_}):fe.jsx(NBe,{videoTracks:_})});return fe.jsxs(Bi,{children:[t?fe.jsx(uE,{cameraOn:c,micOn:o,renderAction:b,renderRemoteUsers:T}):fe.jsxs("div",{className:"h-screen p-3",children:[fe.jsx(wBe,{children:"SwitchLayout"}),fe.jsxs(IBe,{children:["By using ",fe.jsx(ABe,{keyboard:!0,children:"useRemoteVideoTracks"})," hook to dynamically switch the camera track, this will not generate a new track, but only dynamically subscribe and unsubscribe the track according to your needs."]})]}),fe.jsx(La,{calling:t,cameraOn:c,micOn:o,setCalling:()=>{r(A=>!A)},setCamera:()=>{d(A=>!A)},setMic:()=>{s(A=>!A)}})]})};function xBe({videoTracks:t}){return fe.jsx(fe.Fragment,{children:t.map(r=>fe.jsxs(hc.Item,{children:[fe.jsx(lE,{cover:Ul(),track:r},r.getUserId()),fe.jsx(mu,{children:`Layout1 ${el(r.getUserId())}{${r.getUserId()}}`})]},r.getUserId()))})}function NBe({videoTracks:t}){return fe.jsx(fe.Fragment,{children:t.map(r=>fe.jsxs(hc.Item,{children:[fe.jsx(lE,{cover:Ul(),track:r},r.getUserId()),fe.jsx(mu,{children:`Layout2 ${el(r.getUserId())}{${r.getUserId()}}`})]},r.getUserId()))})}const lee=[{label:"switch-layout",component:OBe},{label:"multi-channel",component:TBe},{label:"share-screen",component:RBe}],PBe=()=>{const[t,r]=y.useState(!1);ro({appid:Jt.appId,channel:Jt.channel,token:Jt.token},t);const[o,s]=y.useState(!1),[c,d]=y.useState(!1),f=tl(),{videoTracks:v}=Rm(f),{audioTracks:g}=Tm(f);return g.map(_=>_.play()),fe.jsxs(Bi,{children:[t?fe.jsx(uE,{cameraOn:c,micOn:o,renderRemoteUsers:()=>fe.jsx(cee,{videoTracks:v})}):fe.jsx(Bi,{}),fe.jsx(La,{calling:t,cameraOn:c,micOn:o,setCalling:()=>{r(_=>!_)},setCamera:()=>{d(_=>!_)},setMic:()=>{s(_=>!_)}})]})},uee=[{label:"overview",component:PBe}],{Title:DBe,Paragraph:oN}=Vo,LBe=()=>{ro({appid:Jt.appId,channel:Jt.channel,token:Jt.token},!0);const[t,r]=y.useState(!1),[o,s]=y.useState(),{localMicrophoneTrack:c}=Cm(t);return Nd([c]),y.useEffect(()=>{c&&s({muted:c.muted,isPlaying:c.isPlaying,enabled:c.enabled})},[t,c]),fe.jsxs(Bi,{children:[fe.jsxs("div",{className:"h-screen p-3",children:[fe.jsx(DBe,{children:"local audio track status"}),o&&fe.jsxs(fe.Fragment,{children:[fe.jsx(oN,{children:`muted: ${o==null?void 0:o.muted}`}),fe.jsx(oN,{children:`isPlaying: ${o.isPlaying}`}),fe.jsx(oN,{children:`enabled: ${o==null?void 0:o.enabled}`})]}),fe.jsx(wb,{disabled:!t,track:c})]}),fe.jsx(La,{micOn:t,setMic:()=>{r(d=>!d)}})]})},{Title:kBe}=Vo,MBe=()=>{ro({appid:Jt.appId,channel:Jt.channel,token:Jt.token},!0);const[t,r]=y.useState(!1),[o,s]=y.useState(!1),[c,d]=y.useState(!1),[f,v]=y.useState(!1),{localMicrophoneTrack:g}=Cm(t),{localCameraTrack:_}=bm(o);return Nd([g,_]),fe.jsxs(Bi,{children:[fe.jsxs("div",{className:"h-screen p-3 overflow-auto",children:[fe.jsx(kBe,{children:"local user status"}),fe.jsxs(mo,{className:"m-2",onClick:()=>{v(C=>!C)},type:f?"primary":"default",children:["playAudio : ",JSON.stringify(f)]}),fe.jsxs(mo,{className:"m-2",onClick:()=>{d(C=>!C)},type:c?"primary":"default",children:["playVideo : ",JSON.stringify(c)]}),fe.jsx(mo,{className:"m-2",onClick:()=>{d(!0),s(!1)},type:"primary",children:"cameraOn=false playVideo=true"}),fe.jsx(mo,{className:"m-2",onClick:()=>{d(!1),s(!0)},type:"primary",children:"cameraOn=true playVideo=false"}),fe.jsx(cK,{audioTrack:g,cameraOn:o,className:"m-2",micOn:t,playAudio:f,playVideo:c,style:{width:"300px",height:"300px"},videoTrack:_})]}),fe.jsx(La,{cameraOn:o,micOn:t,setCamera:()=>{s(C=>!C)},setMic:()=>{r(C=>!C)}})]})},{Title:FBe}=Vo,UBe=()=>{ro({appid:Jt.appId,channel:Jt.channel,token:Jt.token},!0);const[t,r]=y.useState(!1),{localCameraTrack:o}=bm();return Nd([o]),fe.jsxs(Bi,{children:[fe.jsxs("div",{className:"h-screen p-3",children:[fe.jsx(FBe,{children:"local video track"}),fe.jsx(Hv,{disabled:!t,play:t,style:{width:"300px",height:"300px"},track:o,videoPlayerConfig:{mirror:!0,fit:"contain"}})]}),fe.jsx(La,{cameraOn:t,setCamera:()=>{r(s=>!s)}})]})},{Title:BBe}=Vo,VBe=()=>{const[t,r]=y.useState(!1);ro({appid:Jt.appId,channel:Jt.channel,token:Jt.token},t);const[o,s]=y.useState(),c=tl(),{audioTracks:d}=Tm(c);return y.useEffect(()=>{if(d&&d.length>0){const f=[];d.map(v=>{f.push({isPlay:v.isPlaying,id:v.getTrackId(),track:v})}),s(f)}else s([])},[d]),y.useEffect(()=>{t||s([])},[t]),fe.jsxs(Bi,{children:[fe.jsxs("div",{className:"h-screen p-3",children:[fe.jsx(BBe,{children:"remote audio track status"}),o&&o.length>0&&o.map(f=>fe.jsxs("div",{children:[fe.jsx("div",{className:"p-4 text-xl",children:fe.jsx(mo,{onClick:()=>{f.isPlay=!f.isPlay,s([...o])},type:"primary",children:"switch this remote audio track play status"})}),f.isPlay,fe.jsx(lK,{play:f.isPlay,track:f.track})]},f.id))]}),fe.jsx(La,{calling:t,setCalling:()=>{r(f=>!f)}})]})},{Title:jBe}=Vo,$Be=()=>{const[t,r]=y.useState(!1),o=y.useMemo(()=>Ul(),[]);ro({appid:Jt.appId,channel:Jt.channel,token:Jt.token},t);const[s,c]=y.useState(),d=tl();return y.useEffect(()=>{if(d.length>0){const f=[];d.map(v=>{f.push({playVideo:!0,playAudio:!0,id:v.uid,user:v})}),c(f)}else c([])},[d]),y.useEffect(()=>{t||c([])},[t]),fe.jsxs(Bi,{children:[fe.jsxs("div",{className:"h-screen p-3",children:[fe.jsx(jBe,{children:"RemoteUser"}),s&&s.length>0&&s.map(f=>fe.jsxs("div",{children:[fe.jsxs("div",{className:"text-xl",children:[fe.jsx(mo,{className:"m-2",onClick:()=>{f.playVideo=!f.playVideo,c([...s])},type:f.playVideo?"default":"primary",children:`${f.playVideo?"stop":"play"} RemoteUser Video`}),fe.jsx(mo,{className:"m-2",onClick:()=>{f.playAudio=!f.playAudio,c([...s])},type:f.playAudio?"default":"primary",children:`${f.playAudio?"stop":"play"} RemoteUser Audio`})]}),fe.jsx("div",{className:"p-4 text-xl",children:fe.jsx(AD,{cover:o,playAudio:f.playAudio,playVideo:f.playVideo,style:{width:"150px",height:"100px"},user:f.user})})]},f.id))]}),fe.jsx(La,{calling:t,setCalling:()=>{r(f=>!f)}})]})},{Title:HBe}=Vo,zBe=()=>{const[t,r]=y.useState(!1);ro({appid:Jt.appId,channel:Jt.channel,token:Jt.token},t);const[o,s]=y.useState(),c=tl(),{videoTracks:d}=Rm(c);return y.useEffect(()=>{if(d&&d.length>0){const f=[];d.map(v=>{f.push({isPlay:!0,id:v.getTrackId(),track:v})}),s(f)}else s([])},[d]),y.useEffect(()=>{t||s([])},[t]),fe.jsxs(Bi,{children:[fe.jsxs("div",{className:"h-screen p-3",children:[fe.jsx(HBe,{children:"remote video track status"}),o&&o.length>0&&o.map(f=>fe.jsxs("div",{children:[fe.jsx("div",{className:"p-4 text-xl",children:fe.jsx(mo,{onClick:()=>{f.isPlay=!f.isPlay,s([...o])},type:"primary",children:"switch this remote video track play status"})}),fe.jsx("div",{className:"p-4 text-xl",children:fe.jsx(ID,{play:f.isPlay,style:{width:"150px",height:"100px"},track:f.track})})]},f.id))]}),fe.jsx(La,{calling:t,setCalling:()=>{r(f=>!f)}})]})},dee=[{label:"LocalAudioTrack",component:LBe},{label:"RemoteAudioTrack",component:VBe},{label:"LocalVideoTrack",component:UBe},{label:"RemoteVideoTrack",component:zBe},{label:"LocalUser",component:MBe},{label:"RemoteUser",component:$Be}],{Title:WBe}=Vo,GBe=()=>{ro({appid:Jt.appId,channel:Jt.channel,token:Jt.token},!0);const[t,r]=y.useState(!1),{localMicrophoneTrack:o}=Cm();return wD(o,t),fe.jsxs(Bi,{children:[fe.jsx("div",{className:"h-screen p-3",children:fe.jsx(WBe,{children:"useAutoPlayAudioTrack"})}),fe.jsx(La,{micOn:t,setMic:()=>{r(s=>!s)}})]})},{Title:KBe}=Vo,YBe=()=>{ro({appid:Jt.appId,channel:Jt.channel,token:Jt.token},!0);const[t,r]=y.useState(!1),o=y.useRef(null),{localCameraTrack:s}=bm();return RD(s,t,o.current),fe.jsxs(Bi,{children:[fe.jsxs("div",{className:"h-screen p-3",children:[fe.jsx(KBe,{children:"useAutoPlayVideoTrack"}),fe.jsx("div",{className:"p-4 text-xl",children:fe.jsx("div",{ref:c=>o.current=c,style:{width:"150px",height:"100px"}})})]}),fe.jsx(La,{cameraOn:t,setCamera:()=>{r(c=>!c)}})]})},{Title:qBe}=Vo,XBe=()=>{const[t,r]=y.useState(!1),[o,s]=y.useState([]),c=Os();_ge(c,"connection-state-change",(f,v,g)=>{console.log(`connection-state-change,curState: ${f},revState: ${v},reason: ${g}`),s(_=>_.concat({eventName:"connection-state-change",value:`curState: ${f},revState: ${v},reason: ${g}`}))}),ro({appid:Jt.appId,channel:Jt.channel,token:Jt.token},t);const d=()=>fe.jsx(fe.Fragment,{});return fe.jsxs(Bi,{children:[fe.jsxs("div",{className:"h-screen p-3",children:[fe.jsx(qBe,{children:"UseClientEvent"}),fe.jsx(SW,{bordered:!0,dataSource:o,renderItem:f=>fe.jsxs(SW.Item,{children:[fe.jsxs(Vo.Text,{mark:!0,children:["[",f.eventName,"]"]})," ",f.value]}),style:{height:"300px",overflow:"auto"}})]}),t&&fe.jsx(uE,{cameraOn:!1,micOn:!1,renderLocalUser:d,showUserInfo:!1}),fe.jsx(La,{calling:t,setCalling:()=>{r(f=>!f)}})]})},{Title:JBe,Paragraph:aN,Text:QBe}=Vo,ZBe=()=>{const[t,r]=y.useState(!1),o=bge();return ro({appid:Jt.appId,channel:Jt.channel,token:Jt.token},t),fe.jsx(Bi,{children:fe.jsxs("div",{className:"h-screen p-3",children:[fe.jsx(JBe,{children:"useConnectionState"}),fe.jsxs(aN,{children:["By using ",fe.jsx(QBe,{keyboard:!0,children:"useConnectionState"})," hook to get the current connection state of the client."]}),fe.jsx(aN,{children:`result: ${o}`}),fe.jsxs(aN,{children:[fe.jsx(mo,{className:"m-1",onClick:()=>r(!0),type:"primary",children:"Join"}),fe.jsx(mo,{className:"m-1",onClick:()=>r(!1),type:"default",children:"Leave"})]})]})})},{Title:e3e,Paragraph:sN,Text:t3e}=Vo,n3e=()=>{const[t,r]=y.useState(!1),o=Rb();return ro({appid:Jt.appId,channel:Jt.channel,token:Jt.token},t),fe.jsx(Bi,{children:fe.jsxs("div",{className:"h-screen p-3",children:[fe.jsx(e3e,{children:"useCurrentUID"}),fe.jsxs(sN,{children:["By using ",fe.jsx(t3e,{keyboard:!0,children:"useCurrentUID"})," hook to get the UID of the current user."]}),fe.jsx(sN,{children:`result: ${o}`}),fe.jsxs(sN,{children:[fe.jsx(mo,{className:"m-1",onClick:()=>r(!0),type:"primary",children:"Join"}),fe.jsx(mo,{className:"m-1",onClick:()=>r(!1),type:"default",children:"Leave"})]})]})})},{Title:r3e,Paragraph:cN,Text:i3e}=Vo,o3e=()=>{const[t,r]=y.useState(!1),o=gu();return ro({appid:Jt.appId,channel:Jt.channel,token:Jt.token},t),fe.jsx(Bi,{children:fe.jsxs("div",{className:"h-screen p-3",children:[fe.jsx(r3e,{children:"useIsConnected"}),fe.jsxs(cN,{children:["By using ",fe.jsx(i3e,{keyboard:!0,children:"useIsConnected"})," hook to determines whether the client is successfully connected to Agora server."]}),fe.jsx(cN,{children:`result: ${o}`}),fe.jsxs(cN,{children:[fe.jsx(mo,{className:"m-1",onClick:()=>r(!0),type:"primary",children:"Join"}),fe.jsx(mo,{className:"m-1",onClick:()=>r(!1),type:"default",children:"Leave"})]})]})})},{Title:a3e,Paragraph:BG,Text:Lg}=Vo,s3e=()=>{const[t,r]=y.useState(!1),{data:o,isLoading:s,isConnected:c,error:d}=ro({appid:Jt.appId,channel:Jt.channel,token:Jt.token},t),[f,v]=y.useState(!1),[g,_]=y.useState(!1),C=tl(),{videoTracks:b}=Rm(C),{audioTracks:T}=Tm(C);T.map(I=>I.play());const A=()=>fe.jsx(fe.Fragment,{children:b.map(I=>fe.jsxs(hc.Item,{children:[fe.jsx(lE,{cover:Ul(),track:I},I.getUserId()),fe.jsx(mu,{children:`${el(I.getUserId())}{${I.getUserId()}}`})]},I.getUserId()))});return fe.jsxs(Bi,{children:[fe.jsxs("div",{className:"h-screen p-3",children:[fe.jsx(a3e,{children:"UseJoin"}),fe.jsxs(BG,{children:["By using ",fe.jsx(Lg,{keyboard:!0,children:"UseJoin"})," hook to join room."]}),fe.jsxs(BG,{children:["You can do some actions like fetching token before calling join.",fe.jsx("br",{}),"Below is the returned data."]}),fe.jsxs(Lg,{children:["data: ",o]}),fe.jsxs(Lg,{className:"pl-3",children:["isLoading: ",`${s}`]}),fe.jsxs(Lg,{className:"pl-3",children:["isConnected: ",`${c}`]}),fe.jsxs(Lg,{className:"pl-3",children:["error: ",`${JSON.stringify(d)}`]})]}),t&&fe.jsx(uE,{cameraOn:g,micOn:f,renderRemoteUsers:A}),fe.jsx(La,{calling:t,cameraOn:g,micOn:f,setCalling:()=>{r(I=>!I)},setCamera:()=>{_(I=>!I)},setMic:()=>{v(I=>!I)}})]})},{Title:c3e}=Vo,l3e=()=>{const[t,r]=y.useState(!1),[o,s]=y.useState(null),[c,d]=y.useState(null);ro({appid:Jt.appId,channel:Jt.channel,token:Jt.token,uid:Jt.ShareScreenUID},t);const{screenTrack:f,error:v}=oK(t,{},"auto");return y.useEffect(()=>{f?Array.isArray(f)?(s(f.filter(g=>g.trackMediaType==="video")[0]),d(f.filter(g=>g.trackMediaType==="audio")[0])):s(f):(d(null),s(null))},[f]),Nd([o,c],t),y.useEffect(()=>{r(!1)},[v]),nK(o,"track-ended",()=>{console.log("screen sharing ended"),r(!1)}),fe.jsx(Bi,{children:fe.jsxs("div",{className:"h-screen p-3",children:[fe.jsx(c3e,{children:"useLocalScreenTrack"}),fe.jsx(mo,{onClick:()=>r(g=>!g),type:"primary",children:t?"stop share screen":"start share screen"}),t&&o&&fe.jsx(Hv,{disabled:!t,play:t,style:{width:"600px",height:"400px"},track:o})]})})},{Title:u3e,Paragraph:d3e}=Vo,h3e=()=>{const t=Tge();return ro({appid:Jt.appId,channel:Jt.channel,token:Jt.token},!0),fe.jsx(Bi,{children:fe.jsxs("div",{className:"h-screen p-3",children:[fe.jsx(u3e,{children:"useNetworkQuality"}),fe.jsx(d3e,{children:`result: ${JSON.stringify(t)}`})]})})},f3e=()=>{const[t,r]=y.useState(!1),o=Rb()||0,s=y.useMemo(()=>el(o),[o]),c=y.useMemo(()=>Ul(),[]),{isConnected:d}=ro({appid:Jt.appId,channel:Jt.channel,token:Jt.token},t),[f,v]=y.useState(!1),[g,_]=y.useState(!1),{localMicrophoneTrack:C}=Cm(f),{localCameraTrack:b}=bm(g);Nd([C,b]);const T=tl(),A=T.filter(D=>D.hasAudio||D.hasVideo),{videoTracks:I}=Rm(T),{audioTracks:N}=Tm(T);N.map(D=>D.play());const P=()=>fe.jsx(fe.Fragment,{children:I.map(D=>fe.jsxs(hc.Item,{children:[fe.jsx(lE,{cover:Ul(),track:D},D.getUserId()),fe.jsx(mu,{children:`Layout1 ${el(D.getUserId())}{${D.getUserId()}}`})]},D.getUserId()))});return fe.jsxs(Bi,{children:[fe.jsxs(fe.Fragment,{children:[fe.jsx(_L,{published:A.length+(f||g?1:0),total:T.length+1}),fe.jsxs(hc,{children:[d&&fe.jsx(hc.Item,{children:fe.jsx(EL,{audioTrack:C,cameraOn:g,cover:c,micOn:f,videoTrack:b,children:fe.jsx(mu,{children:`${s}{${o}}`})})}),P?P():void 0]})]}),fe.jsx(La,{calling:t,cameraOn:g,micOn:f,setCalling:()=>r(D=>!D),setCamera:()=>{_(D=>!D)},setMic:()=>{v(D=>!D)}})]})},p3e=()=>{const[t,r]=y.useState(!1),o=gu(),s=Rb()||0,c=y.useMemo(()=>el(s),[s]),d=y.useMemo(()=>Ul(),[]);ro({appid:Jt.appId,channel:Jt.channel,token:Jt.token},t);const[f,v]=y.useState(!1),[g,_]=y.useState(!1),{localMicrophoneTrack:C}=Cm(f),{localCameraTrack:b}=bm(g);Nd([C,b]);const T=tl(),A=T.filter(I=>I.hasAudio||I.hasVideo);return fe.jsxs(Bi,{children:[fe.jsxs(fe.Fragment,{children:[fe.jsx(_L,{published:A.length+(f||g?1:0),total:T.length+1}),fe.jsxs(hc,{children:[o&&fe.jsx(hc.Item,{children:fe.jsx(EL,{audioTrack:C,cameraOn:g,cover:d,micOn:f,videoTrack:b,children:fe.jsx(mu,{children:`${c}{${s}}`})})}),T.map(I=>fe.jsxs(hc.Item,{children:[fe.jsx(AD,{cover:Ul(),user:I}),fe.jsx(mu,{children:`${el(I.uid)}{${I.uid}}`})]},I.uid))]})]}),fe.jsx(La,{calling:t,cameraOn:g,micOn:f,setCalling:()=>r(I=>!I),setCamera:()=>{_(I=>!I)},setMic:()=>{v(I=>!I)}})]})},hee=[{label:"useJoin",component:s3e},{label:"usePublish",component:f3e},{label:"useRemoteUsers",component:p3e},{label:"useConnectionState",component:ZBe},{label:"useIsConnected",component:o3e},{label:"useCurrentUID",component:n3e},{label:"useAutoPlayAudioTrack",component:GBe},{label:"useAutoPlayVideoTrack",component:YBe},{label:"useNetworkQuality",component:h3e},{label:"useLocalScreenTrack",component:l3e},{label:"UseClientEvent",component:XBe}],VG=()=>{const[t,r]=y.useState(Jt.channel),o=g=>{r(g.target.value)},[s,c]=z2e.useNotification(),d=g=>{s[g]({message:"Configuration Saved",description:"Go to other pages and try it now!"})},f=()=>{Jt.channel=t,d("success")},v={wrapperCol:{span:14,offset:4}};return fe.jsxs(Bi,{children:[c,fe.jsx("div",{className:"p-4",children:fe.jsx(dW.Item,{label:"Channel Name",children:fe.jsx(xDe,{onChange:o,style:{width:"200px"},value:t})})}),fe.jsx(dW.Item,{...v,children:fe.jsx(mo,{onClick:f,type:"primary",children:"Save configuration"})})]})},{Content:m3e,Sider:g3e}=dD,ea=["Basic","Hooks","Components","Advanced","Setting"],v3e=[{label:ea[0],key:ea[0],children:uee.map(t=>({key:`/${ea[0]}/${t.label}`,label:t.label}))},{label:ea[1],key:ea[1],children:hee.map(t=>({key:`/${ea[1]}/${t.label}`,label:t.label}))},{label:ea[2],key:ea[2],children:dee.map(t=>({key:`/${ea[2]}/${t.label}`,label:t.label}))},{label:ea[3],key:ea[3],children:lee.map(t=>({key:`/${ea[3]}/${t.label}`,label:t.label}))},{label:"settings",key:"/setting"}];function E3e(){const[t,r]=y.useState(!1),[o,s]=y.useState([window.location.hash.slice(1).split("/")[1]]),c=f=>{const v=f.find(g=>o.indexOf(g)===-1);v&&ea.indexOf(v)===-1?s(f):s(v?[v]:[])},d=a_e();return fe.jsx(fe.Fragment,{children:fe.jsxs(dD,{children:[fe.jsx(g3e,{collapsed:t,collapsible:!0,onCollapse:f=>r(f),style:{overflow:"auto",height:"100vh",position:"fixed",left:0,top:0,bottom:0},children:fe.jsx(mNe,{items:v3e,mode:"inline",onClick:f=>{d(f.key)},onOpenChange:c,openKeys:o,selectedKeys:[window.location.hash.slice(1)],theme:"dark"})}),fe.jsx(dD,{style:{marginLeft:t?80:200},children:fe.jsxs(m3e,{children:[fe.jsxs(b_e,{children:[fe.jsx(Ih,{Component:()=>fe.jsx(VG,{}),path:"/*"}),fe.jsx(Ih,{Component:()=>fe.jsx(VG,{}),path:"/setting"}),uee.map(({label:f,component:v})=>{const g=v;return fe.jsx(Ih,{Component:()=>fe.jsx(Hy,{children:fe.jsx(g,{})}),path:`/${ea[0]}/${f}`},f)}),hee.map(({label:f,component:v})=>{const g=v;return fe.jsx(Ih,{Component:()=>fe.jsx(Hy,{children:fe.jsx(g,{})}),path:`/${ea[1]}/${f}`},f)}),dee.map(({label:f,component:v})=>{const g=v;return fe.jsx(Ih,{Component:()=>fe.jsx(Hy,{children:fe.jsx(g,{})}),path:`/${ea[2]}/${f}`},f)}),lee.map(({label:f,component:v})=>{const g=v;return fe.jsx(Ih,{Component:()=>fe.jsx(Hy,{children:fe.jsx(g,{})}),path:`/${ea[3]}/${f}`},f)})]}),fe.jsx("a",{"aria-label":"View source on GitHub",className:"github-corner",href:"https://github.com/AgoraIO-Extensions/agora-rtc-react",rel:"noreferrer",target:"_blank",children:fe.jsxs("svg",{"aria-hidden":"true",className:"github-corner-svg",height:"80",viewBox:"0 0 250 250",width:"80",children:[fe.jsx("path",{d:"M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"}),fe.jsx("path",{className:"github-corner-svg-arm",d:"M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2",fill:"currentColor"}),fe.jsx("path",{className:"github-corner-svg-body",d:"M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z",fill:"currentColor"})]})})]})})]})})}lu.setLogLevel(0);lN.createRoot(document.getElementById("root")).render(fe.jsx(y.StrictMode,{children:fe.jsx(w_e,{children:fe.jsx(E3e,{})})}));
