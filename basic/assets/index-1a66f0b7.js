var _Q=Object.defineProperty;var yQ=(e,t,i)=>t in e?_Q(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var yg=(e,t,i)=>(yQ(e,typeof t!="symbol"?t+"":t,i),i);function IV(e,t){for(var i=0;i<t.length;i++){const a=t[i];if(typeof a!="string"&&!Array.isArray(a)){for(const c in a)if(c!=="default"&&!(c in e)){const u=Object.getOwnPropertyDescriptor(a,c);u&&Object.defineProperty(e,c,u.get?u:{enumerable:!0,get:()=>a[c]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))a(c);new MutationObserver(c=>{for(const u of c)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function i(c){const u={};return c.integrity&&(u.integrity=c.integrity),c.referrerPolicy&&(u.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?u.credentials="include":c.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function a(c){if(c.ep)return;c.ep=!0;const u=i(c);fetch(c.href,u)}})();var wt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Lc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function SQ(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var i=function a(){if(this instanceof a){var c=[null];c.push.apply(c,arguments);var u=Function.bind.apply(t,c);return new u}return t.apply(this,arguments)};i.prototype=t.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(e).forEach(function(a){var c=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(i,a,c.get?c:{enumerable:!0,get:function(){return e[a]}})}),i}var wV={exports:{}},DE={},OV={exports:{}},hn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Em=Symbol.for("react.element"),CQ=Symbol.for("react.portal"),bQ=Symbol.for("react.fragment"),TQ=Symbol.for("react.strict_mode"),RQ=Symbol.for("react.profiler"),IQ=Symbol.for("react.provider"),wQ=Symbol.for("react.context"),OQ=Symbol.for("react.forward_ref"),AQ=Symbol.for("react.suspense"),NQ=Symbol.for("react.memo"),xQ=Symbol.for("react.lazy"),YM=Symbol.iterator;function PQ(e){return e===null||typeof e!="object"?null:(e=YM&&e[YM]||e["@@iterator"],typeof e=="function"?e:null)}var AV={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},NV=Object.assign,xV={};function Wh(e,t,i){this.props=e,this.context=t,this.refs=xV,this.updater=i||AV}Wh.prototype.isReactComponent={};Wh.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Wh.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function PV(){}PV.prototype=Wh.prototype;function tI(e,t,i){this.props=e,this.context=t,this.refs=xV,this.updater=i||AV}var nI=tI.prototype=new PV;nI.constructor=tI;NV(nI,Wh.prototype);nI.isPureReactComponent=!0;var qM=Array.isArray,DV=Object.prototype.hasOwnProperty,rI={current:null},kV={key:!0,ref:!0,__self:!0,__source:!0};function LV(e,t,i){var a,c={},u=null,d=null;if(t!=null)for(a in t.ref!==void 0&&(d=t.ref),t.key!==void 0&&(u=""+t.key),t)DV.call(t,a)&&!kV.hasOwnProperty(a)&&(c[a]=t[a]);var f=arguments.length-2;if(f===1)c.children=i;else if(1<f){for(var m=Array(f),g=0;g<f;g++)m[g]=arguments[g+2];c.children=m}if(e&&e.defaultProps)for(a in f=e.defaultProps,f)c[a]===void 0&&(c[a]=f[a]);return{$$typeof:Em,type:e,key:u,ref:d,props:c,_owner:rI.current}}function DQ(e,t){return{$$typeof:Em,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function iI(e){return typeof e=="object"&&e!==null&&e.$$typeof===Em}function kQ(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(i){return t[i]})}var XM=/\/+/g;function eb(e,t){return typeof e=="object"&&e!==null&&e.key!=null?kQ(""+e.key):t.toString(36)}function cv(e,t,i,a,c){var u=typeof e;(u==="undefined"||u==="boolean")&&(e=null);var d=!1;if(e===null)d=!0;else switch(u){case"string":case"number":d=!0;break;case"object":switch(e.$$typeof){case Em:case CQ:d=!0}}if(d)return d=e,c=c(d),e=a===""?"."+eb(d,0):a,qM(c)?(i="",e!=null&&(i=e.replace(XM,"$&/")+"/"),cv(c,t,i,"",function(g){return g})):c!=null&&(iI(c)&&(c=DQ(c,i+(!c.key||d&&d.key===c.key?"":(""+c.key).replace(XM,"$&/")+"/")+e)),t.push(c)),1;if(d=0,a=a===""?".":a+":",qM(e))for(var f=0;f<e.length;f++){u=e[f];var m=a+eb(u,f);d+=cv(u,t,i,m,c)}else if(m=PQ(e),typeof m=="function")for(e=m.call(e),f=0;!(u=e.next()).done;)u=u.value,m=a+eb(u,f++),d+=cv(u,t,i,m,c);else if(u==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return d}function Sg(e,t,i){if(e==null)return e;var a=[],c=0;return cv(e,a,"","",function(u){return t.call(i,u,c++)}),a}function LQ(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(i){(e._status===0||e._status===-1)&&(e._status=1,e._result=i)},function(i){(e._status===0||e._status===-1)&&(e._status=2,e._result=i)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var bo={current:null},lv={transition:null},MQ={ReactCurrentDispatcher:bo,ReactCurrentBatchConfig:lv,ReactCurrentOwner:rI};hn.Children={map:Sg,forEach:function(e,t,i){Sg(e,function(){t.apply(this,arguments)},i)},count:function(e){var t=0;return Sg(e,function(){t++}),t},toArray:function(e){return Sg(e,function(t){return t})||[]},only:function(e){if(!iI(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};hn.Component=Wh;hn.Fragment=bQ;hn.Profiler=RQ;hn.PureComponent=tI;hn.StrictMode=TQ;hn.Suspense=AQ;hn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=MQ;hn.cloneElement=function(e,t,i){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=NV({},e.props),c=e.key,u=e.ref,d=e._owner;if(t!=null){if(t.ref!==void 0&&(u=t.ref,d=rI.current),t.key!==void 0&&(c=""+t.key),e.type&&e.type.defaultProps)var f=e.type.defaultProps;for(m in t)DV.call(t,m)&&!kV.hasOwnProperty(m)&&(a[m]=t[m]===void 0&&f!==void 0?f[m]:t[m])}var m=arguments.length-2;if(m===1)a.children=i;else if(1<m){f=Array(m);for(var g=0;g<m;g++)f[g]=arguments[g+2];a.children=f}return{$$typeof:Em,type:e.type,key:c,ref:u,props:a,_owner:d}};hn.createContext=function(e){return e={$$typeof:wQ,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:IQ,_context:e},e.Consumer=e};hn.createElement=LV;hn.createFactory=function(e){var t=LV.bind(null,e);return t.type=e,t};hn.createRef=function(){return{current:null}};hn.forwardRef=function(e){return{$$typeof:OQ,render:e}};hn.isValidElement=iI;hn.lazy=function(e){return{$$typeof:xQ,_payload:{_status:-1,_result:e},_init:LQ}};hn.memo=function(e,t){return{$$typeof:NQ,type:e,compare:t===void 0?null:t}};hn.startTransition=function(e){var t=lv.transition;lv.transition={};try{e()}finally{lv.transition=t}};hn.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};hn.useCallback=function(e,t){return bo.current.useCallback(e,t)};hn.useContext=function(e){return bo.current.useContext(e)};hn.useDebugValue=function(){};hn.useDeferredValue=function(e){return bo.current.useDeferredValue(e)};hn.useEffect=function(e,t){return bo.current.useEffect(e,t)};hn.useId=function(){return bo.current.useId()};hn.useImperativeHandle=function(e,t,i){return bo.current.useImperativeHandle(e,t,i)};hn.useInsertionEffect=function(e,t){return bo.current.useInsertionEffect(e,t)};hn.useLayoutEffect=function(e,t){return bo.current.useLayoutEffect(e,t)};hn.useMemo=function(e,t){return bo.current.useMemo(e,t)};hn.useReducer=function(e,t,i){return bo.current.useReducer(e,t,i)};hn.useRef=function(e){return bo.current.useRef(e)};hn.useState=function(e){return bo.current.useState(e)};hn.useSyncExternalStore=function(e,t,i){return bo.current.useSyncExternalStore(e,t,i)};hn.useTransition=function(){return bo.current.useTransition()};hn.version="18.2.0";OV.exports=hn;var y=OV.exports;const ut=Lc(y),xh=IV({__proto__:null,default:ut},[y]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UQ=y,jQ=Symbol.for("react.element"),FQ=Symbol.for("react.fragment"),VQ=Object.prototype.hasOwnProperty,BQ=UQ.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,$Q={key:!0,ref:!0,__self:!0,__source:!0};function MV(e,t,i){var a,c={},u=null,d=null;i!==void 0&&(u=""+i),t.key!==void 0&&(u=""+t.key),t.ref!==void 0&&(d=t.ref);for(a in t)VQ.call(t,a)&&!$Q.hasOwnProperty(a)&&(c[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps,t)c[a]===void 0&&(c[a]=t[a]);return{$$typeof:jQ,type:e,key:u,ref:d,props:c,_owner:BQ.current}}DE.Fragment=FQ;DE.jsx=MV;DE.jsxs=MV;wV.exports=DE;var te=wV.exports;var UV={exports:{}};(function(e,t){(function(i,a){e.exports=a()})(wt,function(){function i(n,r){return r.forEach(function(o){o&&typeof o!="string"&&!Array.isArray(o)&&Object.keys(o).forEach(function(s){if(s!=="default"&&!(s in n)){var l=Object.getOwnPropertyDescriptor(o,s);Object.defineProperty(n,s,l.get?l:{enumerable:!0,get:function(){return o[s]}})}})}),Object.freeze(n)}var a=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof wt<"u"?wt:typeof self<"u"?self:{},c=function(n){try{return!!n()}catch{return!0}},u=!c(function(){var n=(function(){}).bind();return typeof n!="function"||n.hasOwnProperty("prototype")}),d=u,f=Function.prototype,m=f.bind,g=f.call,_=d&&m.bind(g,g),S=d?function(n){return n&&_(n)}:function(n){return n&&function(){return g.apply(n,arguments)}},b=S({}.isPrototypeOf),A=function(n){return n&&n.Math==Math&&n},R=A(typeof globalThis=="object"&&globalThis)||A(typeof window=="object"&&window)||A(typeof self=="object"&&self)||A(typeof a=="object"&&a)||function(){return this}()||Function("return this")(),w=u,D=Function.prototype,x=D.apply,O=D.call,P=typeof Reflect=="object"&&Reflect.apply||(w?O.bind(x):function(){return O.apply(x,arguments)}),M=function(n){return typeof n=="function"},F={},j=!c(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7}),B=u,H=Function.prototype.call,K=B?H.bind(H):function(){return H.apply(H,arguments)},$={},Z={}.propertyIsEnumerable,z=Object.getOwnPropertyDescriptor,G=z&&!Z.call({1:2},1);$.f=G?function(n){var r=z(this,n);return!!r&&r.enumerable}:Z;var ee,re,oe=function(n,r){return{enumerable:!(1&n),configurable:!(2&n),writable:!(4&n),value:r}},pe=S,ue=pe({}.toString),me=pe("".slice),fe=function(n){return me(ue(n),8,-1)},se=S,ae=c,de=fe,ce=R.Object,we=se("".split),Ie=ae(function(){return!ce("z").propertyIsEnumerable(0)})?function(n){return de(n)=="String"?we(n,""):ce(n)}:ce,$e=R.TypeError,ke=function(n){if(n==null)throw $e("Can't call method on "+n);return n},mt=Ie,vt=ke,st=function(n){return mt(vt(n))},rt=M,ft=function(n){return typeof n=="object"?n!==null:rt(n)},Ye={},St=Ye,kt=R,Lt=M,Xe=function(n){return Lt(n)?n:void 0},qe=function(n,r){return arguments.length<2?Xe(St[n])||Xe(kt[n]):St[n]&&St[n][r]||kt[n]&&kt[n][r]},Ge=qe("navigator","userAgent")||"",nt=R,gt=Ge,bt=nt.process,Ot=nt.Deno,Mt=bt&&bt.versions||Ot&&Ot.version,Yt=Mt&&Mt.v8;Yt&&(re=(ee=Yt.split("."))[0]>0&&ee[0]<4?1:+(ee[0]+ee[1])),!re&&gt&&(!(ee=gt.match(/Edge\/(\d+)/))||ee[1]>=74)&&(ee=gt.match(/Chrome\/(\d+)/))&&(re=+ee[1]);var An=re,yi=An,dr=c,Gn=!!Object.getOwnPropertySymbols&&!dr(function(){var n=Symbol();return!String(n)||!(Object(n)instanceof Symbol)||!Symbol.sham&&yi&&yi<41}),mn=Gn&&!Symbol.sham&&typeof Symbol.iterator=="symbol",xr=qe,Cn=M,Xt=b,Jt=mn,Ro=R.Object,qi=Jt?function(n){return typeof n=="symbol"}:function(n){var r=xr("Symbol");return Cn(r)&&Xt(r.prototype,Ro(n))},br=R.String,gn=function(n){try{return br(n)}catch{return"Object"}},je=M,ct=gn,vn=R.TypeError,jt=function(n){if(je(n))return n;throw vn(ct(n)+" is not a function")},Si=jt,Pr=function(n,r){var o=n[r];return o==null?void 0:Si(o)},Xn=K,yt=M,Qt=ft,an=R.TypeError,_r={exports:{}},ui=R,Tr=Object.defineProperty,Dr=function(n,r){try{Tr(ui,n,{value:r,configurable:!0,writable:!0})}catch{ui[n]=r}return r},Pi="__core-js_shared__",Xi=R[Pi]||Dr(Pi,{}),po=Xi;(_r.exports=function(n,r){return po[n]||(po[n]=r!==void 0?r:{})})("versions",[]).push({version:"3.20.3",mode:"pure",copyright:"Â© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.20.3/LICENSE",source:"https://github.com/zloirock/core-js"});var fo=ke,Js=R.Object,zr=function(n){return Js(fo(n))},Qs=zr,jc=S({}.hasOwnProperty),Jn=Object.hasOwn||function(n,r){return jc(Qs(n),r)},Fc=S,Di=0,Vc=Math.random(),Bc=Fc(1 .toString),Xo=function(n){return"Symbol("+(n===void 0?"":n)+")_"+Bc(++Di+Vc,36)},Zs=R,Xa=_r.exports,Io=Jn,$c=Xo,Hc=Gn,Ta=mn,di=Xa("wks"),Kr=Zs.Symbol,Jo=Kr&&Kr.for,ec=Ta?Kr:Kr&&Kr.withoutSetter||$c,ar=function(n){if(!Io(di,n)||!Hc&&typeof di[n]!="string"){var r="Symbol."+n;Hc&&Io(Kr,n)?di[n]=Kr[n]:di[n]=Ta&&Jo?Jo(r):ec(r)}return di[n]},tc=K,Wc=ft,Ns=qi,zl=Pr,Kl=function(n,r){var o,s;if(r==="string"&&yt(o=n.toString)&&!Qt(s=Xn(o,n))||yt(o=n.valueOf)&&!Qt(s=Xn(o,n))||r!=="string"&&yt(o=n.toString)&&!Qt(s=Xn(o,n)))return s;throw an("Can't convert object to primitive value")},Yl=ar,Fn=R.TypeError,En=Yl("toPrimitive"),Nn=function(n,r){if(!Wc(n)||Ns(n))return n;var o,s=zl(n,En);if(s){if(r===void 0&&(r="default"),o=tc(s,n,r),!Wc(o)||Ns(o))return o;throw Fn("Can't convert object to primitive value")}return r===void 0&&(r="number"),Kl(n,r)},Yr=qi,kr=function(n){var r=Nn(n,"string");return Yr(r)?r:r+""},mo=ft,Ji=R.document,Ja=mo(Ji)&&mo(Ji.createElement),nc=function(n){return Ja?Ji.createElement(n):{}},pp=nc,Ci=!j&&!c(function(){return Object.defineProperty(pp("div"),"a",{get:function(){return 7}}).a!=7}),ql=j,Qu=K,xs=$,rc=oe,Gc=st,Xl=kr,fp=Jn,mp=Ci,Zu=Object.getOwnPropertyDescriptor;F.f=ql?Zu:function(n,r){if(n=Gc(n),r=Xl(r),mp)try{return Zu(n,r)}catch{}if(fp(n,r))return rc(!Qu(xs.f,n,r),n[r])};var gp=c,Et=M,$t=/#|\.prototype\./,xn=function(n,r){var o=hr[Lr(n)];return o==ed||o!=Vm&&(Et(r)?gp(r):!!r)},Lr=xn.normalize=function(n){return String(n).replace($t,".").toLowerCase()},hr=xn.data={},Vm=xn.NATIVE="N",ed=xn.POLYFILL="P",td=xn,Bm=jt,nd=u,qH=S(S.bind),vp=function(n,r){return Bm(n),r===void 0?n:nd?qH(n,r):function(){return n.apply(r,arguments)}},Qa={},vO=j&&c(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42}),EO=R,XH=ft,JH=EO.String,QH=EO.TypeError,Za=function(n){if(XH(n))return n;throw QH(JH(n)+" is not an object")},ZH=j,eW=Ci,tW=vO,$m=Za,_O=kr,nW=R.TypeError,B_=Object.defineProperty,rW=Object.getOwnPropertyDescriptor,iW="enumerable",oW="configurable",aW="writable";Qa.f=ZH?tW?function(n,r,o){if($m(n),r=_O(r),$m(o),typeof n=="function"&&r==="prototype"&&"value"in o&&aW in o&&!o.writable){var s=rW(n,r);s&&s.writable&&(n[r]=o.value,o={configurable:oW in o?o.configurable:s.configurable,enumerable:iW in o?o.enumerable:s.enumerable,writable:!1})}return B_(n,r,o)}:B_:function(n,r,o){if($m(n),r=_O(r),$m(o),eW)try{return B_(n,r,o)}catch{}if("get"in o||"set"in o)throw nW("Accessors not supported");return"value"in o&&(n[r]=o.value),n};var sW=Qa,cW=oe,Jl=j?function(n,r,o){return sW.f(n,r,cW(1,o))}:function(n,r,o){return n[r]=o,n},Hm=R,lW=P,uW=S,dW=M,hW=F.f,pW=td,rd=Ye,fW=vp,id=Jl,yO=Jn,mW=function(n){var r=function(o,s,l){if(this instanceof r){switch(arguments.length){case 0:return new n;case 1:return new n(o);case 2:return new n(o,s)}return new n(o,s,l)}return lW(n,this,arguments)};return r.prototype=n.prototype,r},ki=function(n,r){var o,s,l,h,p,v,E,T,C=n.target,I=n.global,L=n.stat,V=n.proto,Y=I?Hm:L?Hm[C]:(Hm[C]||{}).prototype,q=I?rd:rd[C]||id(rd,C,{})[C],X=q.prototype;for(l in r)o=!pW(I?l:C+(L?".":"#")+l,n.forced)&&Y&&yO(Y,l),p=q[l],o&&(v=n.noTargetGet?(T=hW(Y,l))&&T.value:Y[l]),h=o&&v?v:r[l],o&&typeof p==typeof h||(E=n.bind&&o?fW(h,Hm):n.wrap&&o?mW(h):V&&dW(h)?uW(h):h,(n.sham||h&&h.sham||p&&p.sham)&&id(E,"sham",!0),id(q,l,E),V&&(yO(rd,s=C+"Prototype")||id(rd,s,{}),id(rd[s],l,h),n.real&&X&&!X[l]&&id(X,l,h)))},gW=Math.ceil,vW=Math.floor,$_=function(n){var r=+n;return r!=r||r===0?0:(r>0?vW:gW)(r)},EW=$_,_W=Math.min,yW=function(n){return n>0?_W(EW(n),9007199254740991):0},zc=function(n){return yW(n.length)},SW=jt,CW=zr,bW=Ie,TW=zc,RW=R.TypeError,SO=function(n){return function(r,o,s,l){SW(o);var h=CW(r),p=bW(h),v=TW(h),E=n?v-1:0,T=n?-1:1;if(s<2)for(;;){if(E in p){l=p[E],E+=T;break}if(E+=T,n?E<0:v<=E)throw RW("Reduce of empty array with no initial value")}for(;n?E>=0:v>E;E+=T)E in p&&(l=o(l,p[E],E,h));return l}},IW={left:SO(!1),right:SO(!0)},wW=c,H_=function(n,r){var o=[][n];return!!o&&wW(function(){o.call(null,r||function(){throw 1},1)})},Wm=fe(R.process)=="process",OW=IW.left,CO=An,AW=Wm;ki({target:"Array",proto:!0,forced:!H_("reduce")||!AW&&CO>79&&CO<83},{reduce:function(n){var r=arguments.length;return OW(this,n,r,r>1?arguments[1]:void 0)}});var NW=Ye,Kc=function(n){return NW[n+"Prototype"]},xW=Kc("Array").reduce,PW=b,DW=xW,W_=Array.prototype,bO=function(n){var r=n.reduce;return n===W_||PW(W_,n)&&r===W_.reduce?DW:r},Yc=bO;let TO=!0,RO=!0;function Gm(n,r,o){const s=n.match(r);return s&&s.length>=o&&parseInt(s[o],10)}function Ql(n,r,o){if(!n.RTCPeerConnection)return;const s=n.RTCPeerConnection.prototype,l=s.addEventListener;s.addEventListener=function(p,v){if(p!==r)return l.apply(this,arguments);const E=T=>{const C=o(T);C&&(v.handleEvent?v.handleEvent(C):v(C))};return this._eventMap=this._eventMap||{},this._eventMap[r]||(this._eventMap[r]=new Map),this._eventMap[r].set(v,E),l.apply(this,[p,E])};const h=s.removeEventListener;s.removeEventListener=function(p,v){if(p!==r||!this._eventMap||!this._eventMap[r])return h.apply(this,arguments);if(!this._eventMap[r].has(v))return h.apply(this,arguments);const E=this._eventMap[r].get(v);return this._eventMap[r].delete(v),this._eventMap[r].size===0&&delete this._eventMap[r],Object.keys(this._eventMap).length===0&&delete this._eventMap,h.apply(this,[p,E])},Object.defineProperty(s,"on"+r,{get(){return this["_on"+r]},set(p){this["_on"+r]&&(this.removeEventListener(r,this["_on"+r]),delete this["_on"+r]),p&&this.addEventListener(r,this["_on"+r]=p)},enumerable:!0,configurable:!0})}function kW(n){return typeof n!="boolean"?new Error("Argument type: "+typeof n+". Please use a boolean."):(TO=n,n?"adapter.js logging disabled":"adapter.js logging enabled")}function LW(n){return typeof n!="boolean"?new Error("Argument type: "+typeof n+". Please use a boolean."):(RO=!n,"adapter.js deprecation warnings "+(n?"disabled":"enabled"))}function IO(){if(typeof window=="object"){if(TO)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function G_(n,r){RO&&console.warn(n+" is deprecated, please use "+r+" instead.")}function MW(n){const r={browser:null,version:null};if(n===void 0||!n.navigator)return r.browser="Not a browser.",r;const{navigator:o}=n;if(o.mozGetUserMedia)r.browser="firefox",r.version=Gm(o.userAgent,/Firefox\/(\d+)\./,1);else if(o.webkitGetUserMedia||n.isSecureContext===!1&&n.webkitRTCPeerConnection)r.browser="chrome",r.version=Gm(o.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else{if(!n.RTCPeerConnection||!o.userAgent.match(/AppleWebKit\/(\d+)\./))return r.browser="Not a supported browser.",r;r.browser="safari",r.version=Gm(o.userAgent,/AppleWebKit\/(\d+)\./,1),r.supportsUnifiedPlan=n.RTCRtpTransceiver&&"currentDirection"in n.RTCRtpTransceiver.prototype}return r}function wO(n){return Object.prototype.toString.call(n)==="[object Object]"}function OO(n){var r;return wO(n)?Yc(r=Object.keys(n)).call(r,function(o,s){const l=wO(n[s]),h=l?OO(n[s]):n[s],p=l&&!Object.keys(h).length;return h===void 0||p?o:Object.assign(o,{[s]:h})},{}):n}function AO(n,r,o){const s=o?"outbound-rtp":"inbound-rtp",l=new Map;if(r===null)return l;const h=[];return n.forEach(p=>{p.type==="track"&&p.trackIdentifier===r.id&&h.push(p)}),h.forEach(p=>{n.forEach(v=>{v.type===s&&v.trackId===p.id&&function E(T,C,I){C&&!I.has(C.id)&&(I.set(C.id,C),Object.keys(C).forEach(L=>{L.endsWith("Id")?E(T,T.get(C[L]),I):L.endsWith("Ids")&&C[L].forEach(V=>{E(T,T.get(V),I)})}))}(n,v,l)})}),l}var UW=_r.exports,jW=Xo,NO=UW("keys"),zm=function(n){return NO[n]||(NO[n]=jW(n))},FW=!c(function(){function n(){}return n.prototype.constructor=null,Object.getPrototypeOf(new n)!==n.prototype}),VW=R,BW=Jn,$W=M,HW=zr,WW=FW,xO=zm("IE_PROTO"),z_=VW.Object,GW=z_.prototype,K_=WW?z_.getPrototypeOf:function(n){var r=HW(n);if(BW(r,xO))return r[xO];var o=r.constructor;return $W(o)&&r instanceof o?o.prototype:r instanceof z_?GW:null},PO=R,zW=M,KW=PO.String,YW=PO.TypeError,qW=S,XW=Za,JW=function(n){if(typeof n=="object"||zW(n))return n;throw YW("Can't set "+KW(n)+" as a prototype")},QW=Object.setPrototypeOf||("__proto__"in{}?function(){var n,r=!1,o={};try{(n=qW(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(o,[]),r=o instanceof Array}catch{}return function(s,l){return XW(s),JW(l),r?n(s,l):s.__proto__=l,s}}():void 0),Km={},ZW=$_,e7=Math.max,t7=Math.min,Y_=function(n,r){var o=ZW(n);return o<0?e7(o+r,0):t7(o,r)},n7=st,r7=Y_,i7=zc,DO=function(n){return function(r,o,s){var l,h=n7(r),p=i7(h),v=r7(s,p);if(n&&o!=o){for(;p>v;)if((l=h[v++])!=l)return!0}else for(;p>v;v++)if((n||v in h)&&h[v]===o)return n||v||0;return!n&&-1}},o7={includes:DO(!0),indexOf:DO(!1)},Ym={},q_=Jn,a7=st,s7=o7.indexOf,c7=Ym,kO=S([].push),LO=function(n,r){var o,s=a7(n),l=0,h=[];for(o in s)!q_(c7,o)&&q_(s,o)&&kO(h,o);for(;r.length>l;)q_(s,o=r[l++])&&(~s7(h,o)||kO(h,o));return h},X_=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],l7=LO,u7=X_.concat("length","prototype");Km.f=Object.getOwnPropertyNames||function(n){return l7(n,u7)};var J_={};J_.f=Object.getOwnPropertySymbols;var d7=qe,h7=Km,p7=J_,f7=Za,m7=S([].concat),g7=d7("Reflect","ownKeys")||function(n){var r=h7.f(f7(n)),o=p7.f;return o?m7(r,o(n)):r},MO=Jn,v7=g7,E7=F,_7=Qa,Q_={},y7=LO,S7=X_,Z_=Object.keys||function(n){return y7(n,S7)},C7=j,b7=vO,T7=Qa,R7=Za,I7=st,w7=Z_;Q_.f=C7&&!b7?Object.defineProperties:function(n,r){R7(n);for(var o,s=I7(r),l=w7(r),h=l.length,p=0;h>p;)T7.f(n,o=l[p++],s[o]);return n};var qm,UO=qe("document","documentElement"),O7=Za,A7=Q_,jO=X_,N7=Ym,x7=UO,P7=nc,FO=zm("IE_PROTO"),ey=function(){},VO=function(n){return"<script>"+n+"<\/script>"},BO=function(n){n.write(VO("")),n.close();var r=n.parentWindow.Object;return n=null,r},Xm=function(){try{qm=new ActiveXObject("htmlfile")}catch{}var n,r;Xm=typeof document<"u"?document.domain&&qm?BO(qm):((r=P7("iframe")).style.display="none",x7.appendChild(r),r.src="javascript:",(n=r.contentWindow.document).open(),n.write(VO("document.F=Object")),n.close(),n.F):BO(qm);for(var o=jO.length;o--;)delete Xm.prototype[jO[o]];return Xm()};N7[FO]=!0;var Jm=Object.create||function(n,r){var o;return n!==null?(ey.prototype=O7(n),o=new ey,ey.prototype=null,o[FO]=n):o=Xm(),r===void 0?o:A7.f(o,r)},D7=S("".replace),k7=String(Error("zxcasd").stack),$O=/\n\s*at [^:]*:[^\n]*/,L7=$O.test(k7),M7=ft,U7=Jl,od={},j7=od,F7=ar("iterator"),V7=Array.prototype,HO={};HO[ar("toStringTag")]="z";var ty=String(HO)==="[object z]",B7=R,$7=ty,H7=M,Qm=fe,W7=ar("toStringTag"),G7=B7.Object,z7=Qm(function(){return arguments}())=="Arguments",qc=$7?Qm:function(n){var r,o,s;return n===void 0?"Undefined":n===null?"Null":typeof(o=function(l,h){try{return l[h]}catch{}}(r=G7(n),W7))=="string"?o:z7?Qm(r):(s=Qm(r))=="Object"&&H7(r.callee)?"Arguments":s},K7=qc,WO=Pr,Y7=od,q7=ar("iterator"),GO=function(n){if(n!=null)return WO(n,q7)||WO(n,"@@iterator")||Y7[K7(n)]},X7=K,J7=jt,Q7=Za,Z7=gn,eG=GO,tG=R.TypeError,nG=K,zO=Za,rG=Pr,iG=vp,oG=K,aG=Za,sG=gn,cG=function(n){return n!==void 0&&(j7.Array===n||V7[F7]===n)},lG=zc,KO=b,uG=function(n,r){var o=arguments.length<2?eG(n):r;if(J7(o))return Q7(X7(o,n));throw tG(Z7(n)+" is not iterable")},dG=GO,YO=function(n,r,o){var s,l;zO(n);try{if(!(s=rG(n,"return"))){if(r==="throw")throw o;return o}s=nG(s,n)}catch(h){l=!0,s=h}if(r==="throw")throw o;if(l)throw s;return zO(s),o},hG=R.TypeError,Zm=function(n,r){this.stopped=n,this.result=r},qO=Zm.prototype,e0=function(n,r,o){var s,l,h,p,v,E,T,C=o&&o.that,I=!(!o||!o.AS_ENTRIES),L=!(!o||!o.IS_ITERATOR),V=!(!o||!o.INTERRUPTED),Y=iG(r,C),q=function(le){return s&&YO(s,"normal",le),new Zm(!0,le)},X=function(le){return I?(aG(le),V?Y(le[0],le[1],q):Y(le[0],le[1])):V?Y(le,q):Y(le)};if(L)s=n;else{if(!(l=dG(n)))throw hG(sG(n)+" is not iterable");if(cG(l)){for(h=0,p=lG(n);p>h;h++)if((v=X(n[h]))&&KO(qO,v))return v;return new Zm(!1)}s=uG(n,l)}for(E=s.next;!(T=oG(E,s)).done;){try{v=X(T.value)}catch(le){YO(s,"throw",le)}if(typeof v=="object"&&v&&KO(qO,v))return v}return new Zm(!1)},pG=qc,fG=R.String,ad=function(n){if(pG(n)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return fG(n)},mG=ad,gG=oe,vG=!c(function(){var n=Error("a");return!("stack"in n)||(Object.defineProperty(n,"stack",gG(1,7)),n.stack!==7)}),EG=ki,_G=R,yG=b,SG=K_,t0=QW,CG=function(n,r,o){for(var s=v7(r),l=_7.f,h=E7.f,p=0;p<s.length;p++){var v=s[p];MO(n,v)||o&&MO(o,v)||l(n,v,h(r,v))}},XO=Jm,n0=Jl,ny=oe,bG=function(n,r){if(L7&&typeof n=="string")for(;r--;)n=D7(n,$O,"");return n},TG=function(n,r){M7(r)&&"cause"in r&&U7(n,"cause",r.cause)},RG=e0,IG=function(n,r){return n===void 0?arguments.length<2?"":r:mG(n)},wG=vG,OG=ar("toStringTag"),r0=_G.Error,AG=[].push,Ep=function(n,r){var o,s=arguments.length>2?arguments[2]:void 0,l=yG(ry,this);t0?o=t0(new r0,l?SG(this):ry):(o=l?this:XO(ry),n0(o,OG,"Error")),r!==void 0&&n0(o,"message",IG(r)),wG&&n0(o,"stack",bG(o.stack,1)),TG(o,s);var h=[];return RG(n,AG,{that:h}),n0(o,"errors",h),o};t0?t0(Ep,r0):CG(Ep,r0,{name:!0});var ry=Ep.prototype=XO(r0.prototype,{constructor:ny(1,Ep),message:ny(1,""),name:ny(1,"AggregateError")});EG({global:!0},{AggregateError:Ep});var NG=M,iy=Xi,xG=S(Function.toString);NG(iy.inspectSource)||(iy.inspectSource=function(n){return xG(n)});var i0,_p,o0,oy=iy.inspectSource,PG=M,DG=oy,JO=R.WeakMap,kG=PG(JO)&&/native code/.test(DG(JO)),QO=R,ay=S,LG=ft,MG=Jl,sy=Jn,cy=Xi,UG=zm,jG=Ym,ZO="Object already initialized",ly=QO.TypeError,FG=QO.WeakMap;if(kG||cy.state){var Zl=cy.state||(cy.state=new FG),VG=ay(Zl.get),eA=ay(Zl.has),BG=ay(Zl.set);i0=function(n,r){if(eA(Zl,n))throw new ly(ZO);return r.facade=n,BG(Zl,n,r),r},_p=function(n){return VG(Zl,n)||{}},o0=function(n){return eA(Zl,n)}}else{var sd=UG("state");jG[sd]=!0,i0=function(n,r){if(sy(n,sd))throw new ly(ZO);return r.facade=n,MG(n,sd,r),r},_p=function(n){return sy(n,sd)?n[sd]:{}},o0=function(n){return sy(n,sd)}}var eu,tA,nA,a0={set:i0,get:_p,has:o0,enforce:function(n){return o0(n)?_p(n):i0(n,{})},getterFor:function(n){return function(r){var o;if(!LG(r)||(o=_p(r)).type!==n)throw ly("Incompatible receiver, "+n+" required");return o}}},uy=j,$G=Jn,rA=Function.prototype,HG=uy&&Object.getOwnPropertyDescriptor,dy=$G(rA,"name"),iA={EXISTS:dy,PROPER:dy&&(function(){}).name==="something",CONFIGURABLE:dy&&(!uy||uy&&HG(rA,"name").configurable)},WG=Jl,s0=function(n,r,o,s){s&&s.enumerable?n[r]=o:WG(n,r,o)},GG=c,zG=M,KG=Jm,oA=K_,YG=s0,hy=ar("iterator"),aA=!1;[].keys&&("next"in(nA=[].keys())?(tA=oA(oA(nA)))!==Object.prototype&&(eu=tA):aA=!0);var qG=eu==null||GG(function(){var n={};return eu[hy].call(n)!==n});zG((eu=qG?{}:KG(eu))[hy])||YG(eu,hy,function(){return this});var sA={IteratorPrototype:eu,BUGGY_SAFARI_ITERATORS:aA},XG=qc,JG=ty?{}.toString:function(){return"[object "+XG(this)+"]"},QG=ty,ZG=Qa.f,ez=Jl,tz=Jn,nz=JG,cA=ar("toStringTag"),yp=function(n,r,o,s){if(n){var l=o?n:n.prototype;tz(l,cA)||ZG(l,cA,{configurable:!0,value:r}),s&&!QG&&ez(l,"toString",nz)}},rz=sA.IteratorPrototype,iz=Jm,oz=oe,az=yp,sz=od,cz=function(){return this},lz=ki,uz=K,dz=function(n,r,o,s){var l=r+" Iterator";return n.prototype=iz(rz,{next:oz(+!s,o)}),az(n,l,!1,!0),sz[l]=cz,n},hz=K_,pz=yp,lA=s0,uA=od,fz=iA.PROPER,c0=sA.BUGGY_SAFARI_ITERATORS,py=ar("iterator"),dA="keys",l0="values",hA="entries",mz=function(){return this},pA=function(n,r,o,s,l,h,p){dz(o,r,s);var v,E,T,C=function(le){if(le===l&&q)return q;if(!c0&&le in V)return V[le];switch(le){case dA:case l0:case hA:return function(){return new o(this,le)}}return function(){return new o(this)}},I=r+" Iterator",L=!1,V=n.prototype,Y=V[py]||V["@@iterator"]||l&&V[l],q=!c0&&Y||C(l),X=r=="Array"&&V.entries||Y;if(X&&(v=hz(X.call(new n)))!==Object.prototype&&v.next&&(pz(v,I,!0,!0),uA[I]=mz),fz&&l==l0&&Y&&Y.name!==l0&&(L=!0,q=function(){return uz(Y,this)}),l)if(E={values:C(l0),keys:h?q:C(dA),entries:C(hA)},p)for(T in E)(c0||L||!(T in V))&&lA(V,T,E[T]);else lz({target:r,proto:!0,forced:c0||L},E);return p&&V[py]!==q&&lA(V,py,q,{name:l}),uA[r]=q,E},gz=st,fA=od,mA=a0;Qa.f;var vz=pA,gA="Array Iterator",Ez=mA.set,_z=mA.getterFor(gA);vz(Array,"Array",function(n,r){Ez(this,{type:gA,target:gz(n),index:0,kind:r})},function(){var n=_z(this),r=n.target,o=n.kind,s=n.index++;return!r||s>=r.length?(n.target=void 0,{value:void 0,done:!0}):o=="keys"?{value:s,done:!1}:o=="values"?{value:r[s],done:!1}:{value:[s,r[s]],done:!1}},"values"),fA.Arguments=fA.Array;var vA=R.Promise,yz=s0,Sz=qe,Cz=Qa,bz=j,EA=ar("species"),Tz=b,Rz=R.TypeError,_A=ar("iterator"),yA=!1;try{var Iz=0,SA={next:function(){return{done:!!Iz++}},return:function(){yA=!0}};SA[_A]=function(){return this},Array.from(SA,function(){throw 2})}catch{}var wz=S,Oz=c,CA=M,Az=qc,Nz=oy,bA=function(){},xz=[],TA=qe("Reflect","construct"),fy=/^\s*(?:class|function)\b/,Pz=wz(fy.exec),Dz=!fy.exec(bA),Sp=function(n){if(!CA(n))return!1;try{return TA(bA,xz,n),!0}catch{return!1}},RA=function(n){if(!CA(n))return!1;switch(Az(n)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Dz||!!Pz(fy,Nz(n))}catch{return!0}};RA.sham=!0;var Cp,cd,IA,my,gy=!TA||Oz(function(){var n;return Sp(Sp.call)||!Sp(Object)||!Sp(function(){n=!0})||n})?RA:Sp,kz=gy,Lz=gn,Mz=R.TypeError,wA=Za,Uz=function(n){if(kz(n))return n;throw Mz(Lz(n)+" is not a constructor")},jz=ar("species"),OA=function(n,r){var o,s=wA(n).constructor;return s===void 0||(o=wA(s)[jz])==null?r:Uz(o)},vy=S([].slice),AA=/(?:ipad|iphone|ipod).*applewebkit/i.test(Ge),Qo=R,Fz=P,Vz=vp,NA=M,Bz=Jn,$z=c,xA=UO,Hz=vy,PA=nc,Wz=AA,Gz=Wm,Ey=Qo.setImmediate,_y=Qo.clearImmediate,zz=Qo.process,yy=Qo.Dispatch,Kz=Qo.Function,DA=Qo.MessageChannel,Yz=Qo.String,Sy=0,bp={},qz="onreadystatechange";try{Cp=Qo.location}catch{}var Cy=function(n){if(Bz(bp,n)){var r=bp[n];delete bp[n],r()}},by=function(n){return function(){Cy(n)}},kA=function(n){Cy(n.data)},LA=function(n){Qo.postMessage(Yz(n),Cp.protocol+"//"+Cp.host)};Ey&&_y||(Ey=function(n){var r=Hz(arguments,1);return bp[++Sy]=function(){Fz(NA(n)?n:Kz(n),void 0,r)},cd(Sy),Sy},_y=function(n){delete bp[n]},Gz?cd=function(n){zz.nextTick(by(n))}:yy&&yy.now?cd=function(n){yy.now(by(n))}:DA&&!Wz?(my=(IA=new DA).port2,IA.port1.onmessage=kA,cd=Vz(my.postMessage,my)):Qo.addEventListener&&NA(Qo.postMessage)&&!Qo.importScripts&&Cp&&Cp.protocol!=="file:"&&!$z(LA)?(cd=LA,Qo.addEventListener("message",kA,!1)):cd=qz in PA("script")?function(n){xA.appendChild(PA("script")).onreadystatechange=function(){xA.removeChild(this),Cy(n)}}:function(n){setTimeout(by(n),0)});var Tp,tu,Rp,ld,Ty,Ry,Iy,MA,UA={set:Ey,clear:_y},Xz=R,Jz=/ipad|iphone|ipod/i.test(Ge)&&Xz.Pebble!==void 0,Qz=/web0s(?!.*chrome)/i.test(Ge),nu=R,jA=vp,Zz=F.f,wy=UA.set,e9=AA,t9=Jz,n9=Qz,Oy=Wm,FA=nu.MutationObserver||nu.WebKitMutationObserver,VA=nu.document,BA=nu.process,u0=nu.Promise,$A=Zz(nu,"queueMicrotask"),HA=$A&&$A.value;HA||(Tp=function(){var n,r;for(Oy&&(n=BA.domain)&&n.exit();tu;){r=tu.fn,tu=tu.next;try{r()}catch(o){throw tu?ld():Rp=void 0,o}}Rp=void 0,n&&n.enter()},e9||Oy||n9||!FA||!VA?!t9&&u0&&u0.resolve?((Iy=u0.resolve(void 0)).constructor=u0,MA=jA(Iy.then,Iy),ld=function(){MA(Tp)}):Oy?ld=function(){BA.nextTick(Tp)}:(wy=jA(wy,nu),ld=function(){wy(Tp)}):(Ty=!0,Ry=VA.createTextNode(""),new FA(Tp).observe(Ry,{characterData:!0}),ld=function(){Ry.data=Ty=!Ty}));var r9=HA||function(n){var r={fn:n,next:void 0};Rp&&(Rp.next=r),tu||(tu=r,ld()),Rp=r},ud={},WA=jt,i9=function(n){var r,o;this.promise=new n(function(s,l){if(r!==void 0||o!==void 0)throw TypeError("Bad Promise constructor");r=s,o=l}),this.resolve=WA(r),this.reject=WA(o)};ud.f=function(n){return new i9(n)};var o9=Za,a9=ft,s9=ud,GA=function(n,r){if(o9(n),a9(r)&&r.constructor===n)return r;var o=s9.f(n);return(0,o.resolve)(r),o.promise},c9=R,d0=function(n){try{return{error:!1,value:n()}}catch(r){return{error:!0,value:r}}},zA=function(){this.head=null,this.tail=null};zA.prototype={add:function(n){var r={item:n,next:null};this.head?this.tail.next=r:this.head=r,this.tail=r},get:function(){var n=this.head;if(n)return this.head=n.next,this.tail===n&&(this.tail=null),n.item}};var Ay,KA,Ny,l9=typeof window=="object",h0=ki,ic=R,u9=qe,Xc=K,xy=vA,d9=function(n,r,o){for(var s in r)o&&o.unsafe&&n[s]?n[s]=r[s]:yz(n,s,r[s],o);return n},h9=yp,p9=function(n){var r=Sz(n),o=Cz.f;bz&&r&&!r[EA]&&o(r,EA,{configurable:!0,get:function(){return this}})},Py=jt,p0=M,f9=ft,m9=function(n,r){if(Tz(r,n))return n;throw Rz("Incorrect invocation")},g9=oy,YA=e0,v9=function(n,r){if(!r&&!yA)return!1;var o=!1;try{var s={};s[_A]=function(){return{next:function(){return{done:o=!0}}}},n(s)}catch{}return o},E9=OA,qA=UA.set,Dy=r9,_9=GA,y9=function(n,r){var o=c9.console;o&&o.error&&(arguments.length==1?o.error(n):o.error(n,r))},XA=ud,ky=d0,S9=zA,Ly=a0,C9=td,b9=l9,f0=Wm,JA=An,T9=ar("species"),Ps="Promise",QA=Ly.getterFor(Ps),R9=Ly.set,I9=Ly.getterFor(Ps),w9=xy&&xy.prototype,Ds=xy,m0=w9,ZA=ic.TypeError,My=ic.document,Uy=ic.process,dd=XA.f,O9=dd,A9=!!(My&&My.createEvent&&ic.dispatchEvent),eN=p0(ic.PromiseRejectionEvent),tN="unhandledrejection",g0=C9(Ps,function(){var n=g9(Ds),r=n!==String(Ds);if(!r&&JA===66||!m0.finally)return!0;if(JA>=51&&/native code/.test(n))return!1;var o=new Ds(function(l){l(1)}),s=function(l){l(function(){},function(){})};return(o.constructor={})[T9]=s,!(o.then(function(){})instanceof s)||!r&&b9&&!eN}),N9=g0||!v9(function(n){Ds.all(n).catch(function(){})}),nN=function(n){var r;return!(!f9(n)||!p0(r=n.then))&&r},rN=function(n,r){var o,s,l,h=r.value,p=r.state==1,v=p?n.ok:n.fail,E=n.resolve,T=n.reject,C=n.domain;try{v?(p||(r.rejection===2&&P9(r),r.rejection=1),v===!0?o=h:(C&&C.enter(),o=v(h),C&&(C.exit(),l=!0)),o===n.promise?T(ZA("Promise-chain cycle")):(s=nN(o))?Xc(s,o,E,T):E(o)):T(h)}catch(I){C&&!l&&C.exit(),T(I)}},iN=function(n,r){n.notified||(n.notified=!0,Dy(function(){for(var o,s=n.reactions;o=s.get();)rN(o,n);n.notified=!1,r&&!n.rejection&&x9(n)}))},oN=function(n,r,o){var s,l;A9?((s=My.createEvent("Event")).promise=r,s.reason=o,s.initEvent(n,!1,!0),ic.dispatchEvent(s)):s={promise:r,reason:o},!eN&&(l=ic["on"+n])?l(s):n===tN&&y9("Unhandled promise rejection",o)},x9=function(n){Xc(qA,ic,function(){var r,o=n.facade,s=n.value;if(aN(n)&&(r=ky(function(){f0?Uy.emit("unhandledRejection",s,o):oN(tN,o,s)}),n.rejection=f0||aN(n)?2:1,r.error))throw r.value})},aN=function(n){return n.rejection!==1&&!n.parent},P9=function(n){Xc(qA,ic,function(){var r=n.facade;f0?Uy.emit("rejectionHandled",r):oN("rejectionhandled",r,n.value)})},hd=function(n,r,o){return function(s){n(r,s,o)}},pd=function(n,r,o){n.done||(n.done=!0,o&&(n=o),n.value=r,n.state=2,iN(n,!0))},jy=function(n,r,o){if(!n.done){n.done=!0,o&&(n=o);try{if(n.facade===r)throw ZA("Promise can't be resolved itself");var s=nN(r);s?Dy(function(){var l={done:!1};try{Xc(s,r,hd(jy,l,n),hd(pd,l,n))}catch(h){pd(l,h,n)}}):(n.value=r,n.state=1,iN(n,!1))}catch(l){pd({done:!1},l,n)}}};g0&&(m0=(Ds=function(n){m9(this,m0),Py(n),Xc(Ay,this);var r=QA(this);try{n(hd(jy,r),hd(pd,r))}catch(o){pd(r,o)}}).prototype,(Ay=function(n){R9(this,{type:Ps,done:!1,notified:!1,parent:!1,reactions:new S9,rejection:!1,state:0,value:void 0})}).prototype=d9(m0,{then:function(n,r){var o=I9(this),s=dd(E9(this,Ds));return o.parent=!0,s.ok=!p0(n)||n,s.fail=p0(r)&&r,s.domain=f0?Uy.domain:void 0,o.state==0?o.reactions.add(s):Dy(function(){rN(s,o)}),s.promise},catch:function(n){return this.then(void 0,n)}}),KA=function(){var n=new Ay,r=QA(n);this.promise=n,this.resolve=hd(jy,r),this.reject=hd(pd,r)},XA.f=dd=function(n){return n===Ds||n===Ny?new KA(n):O9(n)}),h0({global:!0,wrap:!0,forced:g0},{Promise:Ds}),h9(Ds,Ps,!1,!0),p9(Ps),Ny=u9(Ps),h0({target:Ps,stat:!0,forced:g0},{reject:function(n){var r=dd(this);return Xc(r.reject,void 0,n),r.promise}}),h0({target:Ps,stat:!0,forced:!0},{resolve:function(n){return _9(this===Ny?Ds:this,n)}}),h0({target:Ps,stat:!0,forced:N9},{all:function(n){var r=this,o=dd(r),s=o.resolve,l=o.reject,h=ky(function(){var p=Py(r.resolve),v=[],E=0,T=1;YA(n,function(C){var I=E++,L=!1;T++,Xc(p,r,C).then(function(V){L||(L=!0,v[I]=V,--T||s(v))},l)}),--T||s(v)});return h.error&&l(h.value),o.promise},race:function(n){var r=this,o=dd(r),s=o.reject,l=ky(function(){var h=Py(r.resolve);YA(n,function(p){Xc(h,r,p).then(o.resolve,s)})});return l.error&&s(l.value),o.promise}});var D9=K,k9=jt,L9=ud,M9=d0,U9=e0;ki({target:"Promise",stat:!0},{allSettled:function(n){var r=this,o=L9.f(r),s=o.resolve,l=o.reject,h=M9(function(){var p=k9(r.resolve),v=[],E=0,T=1;U9(n,function(C){var I=E++,L=!1;T++,D9(p,r,C).then(function(V){L||(L=!0,v[I]={status:"fulfilled",value:V},--T||s(v))},function(V){L||(L=!0,v[I]={status:"rejected",reason:V},--T||s(v))})}),--T||s(v)});return h.error&&l(h.value),o.promise}});var j9=jt,F9=qe,V9=K,B9=ud,$9=d0,H9=e0,sN="No one promise resolved";ki({target:"Promise",stat:!0},{any:function(n){var r=this,o=F9("AggregateError"),s=B9.f(r),l=s.resolve,h=s.reject,p=$9(function(){var v=j9(r.resolve),E=[],T=0,C=1,I=!1;H9(n,function(L){var V=T++,Y=!1;C++,V9(v,r,L).then(function(q){Y||I||(I=!0,l(q))},function(q){Y||I||(Y=!0,E[V]=q,--C||h(new o(E,sN)))})}),--C||h(new o(E,sN))});return p.error&&h(p.value),s.promise}});var cN=vA,W9=qe,G9=M,z9=OA,lN=GA;ki({target:"Promise",proto:!0,real:!0,forced:!!cN&&c(function(){cN.prototype.finally.call({then:function(){}},function(){})})},{finally:function(n){var r=z9(this,W9("Promise")),o=G9(n);return this.then(o?function(s){return lN(r,n()).then(function(){return s})}:n,o?function(s){return lN(r,n()).then(function(){throw s})}:n)}});var Fy=S,K9=$_,Y9=ad,q9=ke,X9=Fy("".charAt),uN=Fy("".charCodeAt),J9=Fy("".slice),dN=function(n){return function(r,o){var s,l,h=Y9(q9(r)),p=K9(o),v=h.length;return p<0||p>=v?n?"":void 0:(s=uN(h,p))<55296||s>56319||p+1===v||(l=uN(h,p+1))<56320||l>57343?n?X9(h,p):s:n?J9(h,p,p+2):l-56320+(s-55296<<10)+65536}},Q9={codeAt:dN(!1),charAt:dN(!0)}.charAt,Z9=ad,hN=a0,eK=pA,pN="String Iterator",tK=hN.set,nK=hN.getterFor(pN);eK(String,"String",function(n){tK(this,{type:pN,string:Z9(n),index:0})},function(){var n,r=nK(this),o=r.string,s=r.index;return s>=o.length?{value:void 0,done:!0}:(n=Q9(o,s),r.index+=n.length,{value:n,done:!1})});var rK=Ye.Promise,iK={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},oK=R,aK=qc,sK=Jl,fN=od,mN=ar("toStringTag");for(var Vy in iK){var gN=oK[Vy],By=gN&&gN.prototype;By&&aK(By)!==mN&&sK(By,mN,Vy),fN[Vy]=fN.Array}var vN=rK,xe=vN;const EN=IO;function _N(n,r){const o=n&&n.navigator;if(!o.mediaDevices)return;const s=function(p){if(typeof p!="object"||p.mandatory||p.optional)return p;const v={};return Object.keys(p).forEach(E=>{if(E==="require"||E==="advanced"||E==="mediaSource")return;const T=typeof p[E]=="object"?p[E]:{ideal:p[E]};T.exact!==void 0&&typeof T.exact=="number"&&(T.min=T.max=T.exact);const C=function(I,L){return I?I+L.charAt(0).toUpperCase()+L.slice(1):L==="deviceId"?"sourceId":L};if(T.ideal!==void 0){v.optional=v.optional||[];let I={};typeof T.ideal=="number"?(I[C("min",E)]=T.ideal,v.optional.push(I),I={},I[C("max",E)]=T.ideal,v.optional.push(I)):(I[C("",E)]=T.ideal,v.optional.push(I))}T.exact!==void 0&&typeof T.exact!="number"?(v.mandatory=v.mandatory||{},v.mandatory[C("",E)]=T.exact):["min","max"].forEach(I=>{T[I]!==void 0&&(v.mandatory=v.mandatory||{},v.mandatory[C(I,E)]=T[I])})}),p.advanced&&(v.optional=(v.optional||[]).concat(p.advanced)),v},l=function(p,v){if(r.version>=61)return v(p);if((p=JSON.parse(JSON.stringify(p)))&&typeof p.audio=="object"){const E=function(T,C,I){C in T&&!(I in T)&&(T[I]=T[C],delete T[C])};E((p=JSON.parse(JSON.stringify(p))).audio,"autoGainControl","googAutoGainControl"),E(p.audio,"noiseSuppression","googNoiseSuppression"),p.audio=s(p.audio)}if(p&&typeof p.video=="object"){let E=p.video.facingMode;E=E&&(typeof E=="object"?E:{ideal:E});const T=r.version<66;if(E&&(E.exact==="user"||E.exact==="environment"||E.ideal==="user"||E.ideal==="environment")&&(!o.mediaDevices.getSupportedConstraints||!o.mediaDevices.getSupportedConstraints().facingMode||T)){let C;if(delete p.video.facingMode,E.exact==="environment"||E.ideal==="environment"?C=["back","rear"]:E.exact!=="user"&&E.ideal!=="user"||(C=["front"]),C)return o.mediaDevices.enumerateDevices().then(I=>{let L=(I=I.filter(V=>V.kind==="videoinput")).find(V=>C.some(Y=>V.label.toLowerCase().includes(Y)));return!L&&I.length&&C.includes("back")&&(L=I[I.length-1]),L&&(p.video.deviceId=E.exact?{exact:L.deviceId}:{ideal:L.deviceId}),p.video=s(p.video),EN("chrome: "+JSON.stringify(p)),v(p)})}p.video=s(p.video)}return EN("chrome: "+JSON.stringify(p)),v(p)},h=function(p){return r.version>=64?p:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[p.name]||p.name,message:p.message,constraint:p.constraint||p.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(o.getUserMedia=(function(p,v,E){l(p,T=>{o.webkitGetUserMedia(T,v,C=>{E&&E(h(C))})})}).bind(o),o.mediaDevices.getUserMedia){const p=o.mediaDevices.getUserMedia.bind(o.mediaDevices);o.mediaDevices.getUserMedia=function(v){return l(v,E=>p(E).then(T=>{if(E.audio&&!T.getAudioTracks().length||E.video&&!T.getVideoTracks().length)throw T.getTracks().forEach(C=>{C.stop()}),new DOMException("","NotFoundError");return T},T=>xe.reject(h(T))))}}}function yN(n){n.MediaStream=n.MediaStream||n.webkitMediaStream}function SN(n){if(typeof n=="object"&&n.RTCPeerConnection&&!("ontrack"in n.RTCPeerConnection.prototype)){Object.defineProperty(n.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(o){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=o)},enumerable:!0,configurable:!0});const r=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=o=>{o.stream.addEventListener("addtrack",s=>{let l;l=n.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(p=>p.track&&p.track.id===s.track.id):{track:s.track};const h=new Event("track");h.track=s.track,h.receiver=l,h.transceiver={receiver:l},h.streams=[o.stream],this.dispatchEvent(h)}),o.stream.getTracks().forEach(s=>{let l;l=n.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(p=>p.track&&p.track.id===s.id):{track:s};const h=new Event("track");h.track=s,h.receiver=l,h.transceiver={receiver:l},h.streams=[o.stream],this.dispatchEvent(h)})},this.addEventListener("addstream",this._ontrackpoly)),r.apply(this,arguments)}}else Ql(n,"track",r=>(r.transceiver||Object.defineProperty(r,"transceiver",{value:{receiver:r.receiver}}),r))}function CN(n){if(typeof n=="object"&&n.RTCPeerConnection&&!("getSenders"in n.RTCPeerConnection.prototype)&&"createDTMFSender"in n.RTCPeerConnection.prototype){const r=function(l,h){return{track:h,get dtmf(){return this._dtmf===void 0&&(h.kind==="audio"?this._dtmf=l.createDTMFSender(h):this._dtmf=null),this._dtmf},_pc:l}};if(!n.RTCPeerConnection.prototype.getSenders){n.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const l=n.RTCPeerConnection.prototype.addTrack;n.RTCPeerConnection.prototype.addTrack=function(p,v){let E=l.apply(this,arguments);return E||(E=r(this,p),this._senders.push(E)),E};const h=n.RTCPeerConnection.prototype.removeTrack;n.RTCPeerConnection.prototype.removeTrack=function(p){h.apply(this,arguments);const v=this._senders.indexOf(p);v!==-1&&this._senders.splice(v,1)}}const o=n.RTCPeerConnection.prototype.addStream;n.RTCPeerConnection.prototype.addStream=function(l){this._senders=this._senders||[],o.apply(this,[l]),l.getTracks().forEach(h=>{this._senders.push(r(this,h))})};const s=n.RTCPeerConnection.prototype.removeStream;n.RTCPeerConnection.prototype.removeStream=function(l){this._senders=this._senders||[],s.apply(this,[l]),l.getTracks().forEach(h=>{const p=this._senders.find(v=>v.track===h);p&&this._senders.splice(this._senders.indexOf(p),1)})}}else if(typeof n=="object"&&n.RTCPeerConnection&&"getSenders"in n.RTCPeerConnection.prototype&&"createDTMFSender"in n.RTCPeerConnection.prototype&&n.RTCRtpSender&&!("dtmf"in n.RTCRtpSender.prototype)){const r=n.RTCPeerConnection.prototype.getSenders;n.RTCPeerConnection.prototype.getSenders=function(){const o=r.apply(this,[]);return o.forEach(s=>s._pc=this),o},Object.defineProperty(n.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function bN(n){if(!n.RTCPeerConnection)return;const r=n.RTCPeerConnection.prototype.getStats;n.RTCPeerConnection.prototype.getStats=function(){const[o,s,l]=arguments;if(arguments.length>0&&typeof o=="function")return r.apply(this,arguments);if(r.length===0&&(arguments.length===0||typeof o!="function"))return r.apply(this,[]);const h=function(v){const E={};return v.result().forEach(T=>{const C={id:T.id,timestamp:T.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[T.type]||T.type};T.names().forEach(I=>{C[I]=T.stat(I)}),E[C.id]=C}),E},p=function(v){return new Map(Object.keys(v).map(E=>[E,v[E]]))};if(arguments.length>=2){const v=function(E){s(p(h(E)))};return r.apply(this,[v,o])}return new xe((v,E)=>{r.apply(this,[function(T){v(p(h(T)))},E])}).then(s,l)}}function TN(n){if(!(typeof n=="object"&&n.RTCPeerConnection&&n.RTCRtpSender&&n.RTCRtpReceiver))return;if(!("getStats"in n.RTCRtpSender.prototype)){const o=n.RTCPeerConnection.prototype.getSenders;o&&(n.RTCPeerConnection.prototype.getSenders=function(){const l=o.apply(this,[]);return l.forEach(h=>h._pc=this),l});const s=n.RTCPeerConnection.prototype.addTrack;s&&(n.RTCPeerConnection.prototype.addTrack=function(){const l=s.apply(this,arguments);return l._pc=this,l}),n.RTCRtpSender.prototype.getStats=function(){const l=this;return this._pc.getStats().then(h=>AO(h,l.track,!0))}}if(!("getStats"in n.RTCRtpReceiver.prototype)){const o=n.RTCPeerConnection.prototype.getReceivers;o&&(n.RTCPeerConnection.prototype.getReceivers=function(){const s=o.apply(this,[]);return s.forEach(l=>l._pc=this),s}),Ql(n,"track",s=>(s.receiver._pc=s.srcElement,s)),n.RTCRtpReceiver.prototype.getStats=function(){const s=this;return this._pc.getStats().then(l=>AO(l,s.track,!1))}}if(!("getStats"in n.RTCRtpSender.prototype)||!("getStats"in n.RTCRtpReceiver.prototype))return;const r=n.RTCPeerConnection.prototype.getStats;n.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof n.MediaStreamTrack){const o=arguments[0];let s,l,h;return this.getSenders().forEach(p=>{p.track===o&&(s?h=!0:s=p)}),this.getReceivers().forEach(p=>(p.track===o&&(l?h=!0:l=p),p.track===o)),h||s&&l?xe.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):s?s.getStats():l?l.getStats():xe.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return r.apply(this,arguments)}}function RN(n){n.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(h=>this._shimmedLocalStreams[h][0])};const r=n.RTCPeerConnection.prototype.addTrack;n.RTCPeerConnection.prototype.addTrack=function(h,p){if(!p)return r.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const v=r.apply(this,arguments);return this._shimmedLocalStreams[p.id]?this._shimmedLocalStreams[p.id].indexOf(v)===-1&&this._shimmedLocalStreams[p.id].push(v):this._shimmedLocalStreams[p.id]=[p,v],v};const o=n.RTCPeerConnection.prototype.addStream;n.RTCPeerConnection.prototype.addStream=function(h){this._shimmedLocalStreams=this._shimmedLocalStreams||{},h.getTracks().forEach(E=>{if(this.getSenders().find(T=>T.track===E))throw new DOMException("Track already exists.","InvalidAccessError")});const p=this.getSenders();o.apply(this,arguments);const v=this.getSenders().filter(E=>p.indexOf(E)===-1);this._shimmedLocalStreams[h.id]=[h].concat(v)};const s=n.RTCPeerConnection.prototype.removeStream;n.RTCPeerConnection.prototype.removeStream=function(h){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[h.id],s.apply(this,arguments)};const l=n.RTCPeerConnection.prototype.removeTrack;n.RTCPeerConnection.prototype.removeTrack=function(h){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},h&&Object.keys(this._shimmedLocalStreams).forEach(p=>{const v=this._shimmedLocalStreams[p].indexOf(h);v!==-1&&this._shimmedLocalStreams[p].splice(v,1),this._shimmedLocalStreams[p].length===1&&delete this._shimmedLocalStreams[p]}),l.apply(this,arguments)}}function IN(n,r){if(!n.RTCPeerConnection)return;if(n.RTCPeerConnection.prototype.addTrack&&r.version>=65)return RN(n);const o=n.RTCPeerConnection.prototype.getLocalStreams;n.RTCPeerConnection.prototype.getLocalStreams=function(){const T=o.apply(this);return this._reverseStreams=this._reverseStreams||{},T.map(C=>this._reverseStreams[C.id])};const s=n.RTCPeerConnection.prototype.addStream;n.RTCPeerConnection.prototype.addStream=function(T){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},T.getTracks().forEach(C=>{if(this.getSenders().find(I=>I.track===C))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[T.id]){const C=new n.MediaStream(T.getTracks());this._streams[T.id]=C,this._reverseStreams[C.id]=T,T=C}s.apply(this,[T])};const l=n.RTCPeerConnection.prototype.removeStream;function h(T,C){let I=C.sdp;return Object.keys(T._reverseStreams||[]).forEach(L=>{const V=T._reverseStreams[L],Y=T._streams[V.id];I=I.replace(new RegExp(Y.id,"g"),V.id)}),new RTCSessionDescription({type:C.type,sdp:I})}function p(T,C){let I=C.sdp;return Object.keys(T._reverseStreams||[]).forEach(L=>{const V=T._reverseStreams[L],Y=T._streams[V.id];I=I.replace(new RegExp(V.id,"g"),Y.id)}),new RTCSessionDescription({type:C.type,sdp:I})}n.RTCPeerConnection.prototype.removeStream=function(T){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},l.apply(this,[this._streams[T.id]||T]),delete this._reverseStreams[this._streams[T.id]?this._streams[T.id].id:T.id],delete this._streams[T.id]},n.RTCPeerConnection.prototype.addTrack=function(T,C){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const I=[].slice.call(arguments,1);if(I.length!==1||!I[0].getTracks().find(Y=>Y===T))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(Y=>Y.track===T))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const V=this._streams[C.id];if(V)V.addTrack(T),xe.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const Y=new n.MediaStream([T]);this._streams[C.id]=Y,this._reverseStreams[Y.id]=C,this.addStream(Y)}return this.getSenders().find(Y=>Y.track===T)},["createOffer","createAnswer"].forEach(function(T){const C=n.RTCPeerConnection.prototype[T],I={[T](){const L=arguments;return arguments.length&&typeof arguments[0]=="function"?C.apply(this,[V=>{const Y=h(this,V);L[0].apply(null,[Y])},V=>{L[1]&&L[1].apply(null,V)},arguments[2]]):C.apply(this,arguments).then(V=>h(this,V))}};n.RTCPeerConnection.prototype[T]=I[T]});const v=n.RTCPeerConnection.prototype.setLocalDescription;n.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=p(this,arguments[0]),v.apply(this,arguments)):v.apply(this,arguments)};const E=Object.getOwnPropertyDescriptor(n.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(n.RTCPeerConnection.prototype,"localDescription",{get(){const T=E.get.apply(this);return T.type===""?T:h(this,T)}}),n.RTCPeerConnection.prototype.removeTrack=function(T){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!T._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(T._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let C;this._streams=this._streams||{},Object.keys(this._streams).forEach(I=>{this._streams[I].getTracks().find(L=>T.track===L)&&(C=this._streams[I])}),C&&(C.getTracks().length===1?this.removeStream(this._reverseStreams[C.id]):C.removeTrack(T.track),this.dispatchEvent(new Event("negotiationneeded")))}}function $y(n,r){!n.RTCPeerConnection&&n.webkitRTCPeerConnection&&(n.RTCPeerConnection=n.webkitRTCPeerConnection),n.RTCPeerConnection&&r.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(o){const s=n.RTCPeerConnection.prototype[o],l={[o](){return arguments[0]=new(o==="addIceCandidate"?n.RTCIceCandidate:n.RTCSessionDescription)(arguments[0]),s.apply(this,arguments)}};n.RTCPeerConnection.prototype[o]=l[o]})}function wN(n,r){Ql(n,"negotiationneeded",o=>{const s=o.target;if(!(r.version<72||s.getConfiguration&&s.getConfiguration().sdpSemantics==="plan-b")||s.signalingState==="stable")return o})}var ON=Object.freeze({__proto__:null,shimMediaStream:yN,shimOnTrack:SN,shimGetSendersWithDtmf:CN,shimGetStats:bN,shimSenderReceiverGetStats:TN,shimAddTrackRemoveTrackWithNative:RN,shimAddTrackRemoveTrack:IN,shimPeerConnection:$y,fixNegotiationNeeded:wN,shimGetUserMedia:_N,shimGetDisplayMedia:function(n,r){n.navigator.mediaDevices&&"getDisplayMedia"in n.navigator.mediaDevices||n.navigator.mediaDevices&&(typeof r=="function"?n.navigator.mediaDevices.getDisplayMedia=function(o){return r(o).then(s=>{const l=o.video&&o.video.width,h=o.video&&o.video.height,p=o.video&&o.video.frameRate;return o.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:s,maxFrameRate:p||3}},l&&(o.video.mandatory.maxWidth=l),h&&(o.video.mandatory.maxHeight=h),n.navigator.mediaDevices.getUserMedia(o)})}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}});function AN(n,r){const o=n&&n.navigator,s=n&&n.MediaStreamTrack;if(o.getUserMedia=function(l,h,p){G_("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),o.mediaDevices.getUserMedia(l).then(h,p)},!(r.version>55&&"autoGainControl"in o.mediaDevices.getSupportedConstraints())){const l=function(p,v,E){v in p&&!(E in p)&&(p[E]=p[v],delete p[v])},h=o.mediaDevices.getUserMedia.bind(o.mediaDevices);if(o.mediaDevices.getUserMedia=function(p){return typeof p=="object"&&typeof p.audio=="object"&&(p=JSON.parse(JSON.stringify(p)),l(p.audio,"autoGainControl","mozAutoGainControl"),l(p.audio,"noiseSuppression","mozNoiseSuppression")),h(p)},s&&s.prototype.getSettings){const p=s.prototype.getSettings;s.prototype.getSettings=function(){const v=p.apply(this,arguments);return l(v,"mozAutoGainControl","autoGainControl"),l(v,"mozNoiseSuppression","noiseSuppression"),v}}if(s&&s.prototype.applyConstraints){const p=s.prototype.applyConstraints;s.prototype.applyConstraints=function(v){return this.kind==="audio"&&typeof v=="object"&&(v=JSON.parse(JSON.stringify(v)),l(v,"autoGainControl","mozAutoGainControl"),l(v,"noiseSuppression","mozNoiseSuppression")),p.apply(this,[v])}}}}function NN(n){typeof n=="object"&&n.RTCTrackEvent&&"receiver"in n.RTCTrackEvent.prototype&&!("transceiver"in n.RTCTrackEvent.prototype)&&Object.defineProperty(n.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Hy(n,r){if(typeof n!="object"||!n.RTCPeerConnection&&!n.mozRTCPeerConnection)return;!n.RTCPeerConnection&&n.mozRTCPeerConnection&&(n.RTCPeerConnection=n.mozRTCPeerConnection),r.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(l){const h=n.RTCPeerConnection.prototype[l],p={[l](){return arguments[0]=new(l==="addIceCandidate"?n.RTCIceCandidate:n.RTCSessionDescription)(arguments[0]),h.apply(this,arguments)}};n.RTCPeerConnection.prototype[l]=p[l]});const o={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},s=n.RTCPeerConnection.prototype.getStats;n.RTCPeerConnection.prototype.getStats=function(){const[l,h,p]=arguments;return s.apply(this,[l||null]).then(v=>{if(r.version<53&&!h)try{v.forEach(E=>{E.type=o[E.type]||E.type})}catch(E){if(E.name!=="TypeError")throw E;v.forEach((T,C)=>{v.set(C,Object.assign({},T,{type:o[T.type]||T.type}))})}return v}).then(h,p)}}function xN(n){if(typeof n!="object"||!n.RTCPeerConnection||!n.RTCRtpSender||n.RTCRtpSender&&"getStats"in n.RTCRtpSender.prototype)return;const r=n.RTCPeerConnection.prototype.getSenders;r&&(n.RTCPeerConnection.prototype.getSenders=function(){const s=r.apply(this,[]);return s.forEach(l=>l._pc=this),s});const o=n.RTCPeerConnection.prototype.addTrack;o&&(n.RTCPeerConnection.prototype.addTrack=function(){const s=o.apply(this,arguments);return s._pc=this,s}),n.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):xe.resolve(new Map)}}function PN(n){if(typeof n!="object"||!n.RTCPeerConnection||!n.RTCRtpSender||n.RTCRtpSender&&"getStats"in n.RTCRtpReceiver.prototype)return;const r=n.RTCPeerConnection.prototype.getReceivers;r&&(n.RTCPeerConnection.prototype.getReceivers=function(){const o=r.apply(this,[]);return o.forEach(s=>s._pc=this),o}),Ql(n,"track",o=>(o.receiver._pc=o.srcElement,o)),n.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function DN(n){n.RTCPeerConnection&&!("removeStream"in n.RTCPeerConnection.prototype)&&(n.RTCPeerConnection.prototype.removeStream=function(r){G_("removeStream","removeTrack"),this.getSenders().forEach(o=>{o.track&&r.getTracks().includes(o.track)&&this.removeTrack(o)})})}function kN(n){n.DataChannel&&!n.RTCDataChannel&&(n.RTCDataChannel=n.DataChannel)}function LN(n){if(typeof n!="object"||!n.RTCPeerConnection)return;const r=n.RTCPeerConnection.prototype.addTransceiver;r&&(n.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let o=arguments[1]&&arguments[1].sendEncodings;o===void 0&&(o=[]),o=[...o];const s=o.length>0;s&&o.forEach(h=>{if("rid"in h&&!/^[a-z0-9]{0,16}$/i.test(h.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in h&&!(parseFloat(h.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in h&&!(parseFloat(h.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const l=r.apply(this,arguments);if(s){const{sender:h}=l,p=h.getParameters();(!("encodings"in p)||p.encodings.length===1&&Object.keys(p.encodings[0]).length===0)&&(p.encodings=o,h.sendEncodings=o,this.setParametersPromises.push(h.setParameters(p).then(()=>{delete h.sendEncodings}).catch(()=>{delete h.sendEncodings})))}return l})}function MN(n){if(typeof n!="object"||!n.RTCRtpSender)return;const r=n.RTCRtpSender.prototype.getParameters;r&&(n.RTCRtpSender.prototype.getParameters=function(){const o=r.apply(this,arguments);return"encodings"in o||(o.encodings=[].concat(this.sendEncodings||[{}])),o})}function UN(n){if(typeof n!="object"||!n.RTCPeerConnection)return;const r=n.RTCPeerConnection.prototype.createOffer;n.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?xe.all(this.setParametersPromises).then(()=>r.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):r.apply(this,arguments)}}function jN(n){if(typeof n!="object"||!n.RTCPeerConnection)return;const r=n.RTCPeerConnection.prototype.createAnswer;n.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?xe.all(this.setParametersPromises).then(()=>r.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):r.apply(this,arguments)}}var FN=Object.freeze({__proto__:null,shimOnTrack:NN,shimPeerConnection:Hy,shimSenderGetStats:xN,shimReceiverGetStats:PN,shimRemoveStream:DN,shimRTCDataChannel:kN,shimAddTransceiver:LN,shimGetParameters:MN,shimCreateOffer:UN,shimCreateAnswer:jN,shimGetUserMedia:AN,shimGetDisplayMedia:function(n,r){n.navigator.mediaDevices&&"getDisplayMedia"in n.navigator.mediaDevices||n.navigator.mediaDevices&&(n.navigator.mediaDevices.getDisplayMedia=function(o){if(!o||!o.video){const s=new DOMException("getDisplayMedia without video constraints is undefined");return s.name="NotFoundError",s.code=8,xe.reject(s)}return o.video===!0?o.video={mediaSource:r}:o.video.mediaSource=r,n.navigator.mediaDevices.getUserMedia(o)})}});function VN(n){if(typeof n=="object"&&n.RTCPeerConnection){if("getLocalStreams"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in n.RTCPeerConnection.prototype)){const r=n.RTCPeerConnection.prototype.addTrack;n.RTCPeerConnection.prototype.addStream=function(o){this._localStreams||(this._localStreams=[]),this._localStreams.includes(o)||this._localStreams.push(o),o.getAudioTracks().forEach(s=>r.call(this,s,o)),o.getVideoTracks().forEach(s=>r.call(this,s,o))},n.RTCPeerConnection.prototype.addTrack=function(o){for(var s=arguments.length,l=new Array(s>1?s-1:0),h=1;h<s;h++)l[h-1]=arguments[h];return l&&l.forEach(p=>{this._localStreams?this._localStreams.includes(p)||this._localStreams.push(p):this._localStreams=[p]}),r.apply(this,arguments)}}"removeStream"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.removeStream=function(r){this._localStreams||(this._localStreams=[]);const o=this._localStreams.indexOf(r);if(o===-1)return;this._localStreams.splice(o,1);const s=r.getTracks();this.getSenders().forEach(l=>{s.includes(l.track)&&this.removeTrack(l)})})}}function BN(n){if(typeof n=="object"&&n.RTCPeerConnection&&("getRemoteStreams"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in n.RTCPeerConnection.prototype))){Object.defineProperty(n.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(o){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=o),this.addEventListener("track",this._onaddstreampoly=s=>{s.streams.forEach(l=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(l))return;this._remoteStreams.push(l);const h=new Event("addstream");h.stream=l,this.dispatchEvent(h)})})}});const r=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(){const o=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(s){s.streams.forEach(l=>{if(o._remoteStreams||(o._remoteStreams=[]),o._remoteStreams.indexOf(l)>=0)return;o._remoteStreams.push(l);const h=new Event("addstream");h.stream=l,o.dispatchEvent(h)})}),r.apply(o,arguments)}}}function $N(n){if(typeof n!="object"||!n.RTCPeerConnection)return;const r=n.RTCPeerConnection.prototype,o=r.createOffer,s=r.createAnswer,l=r.setLocalDescription,h=r.setRemoteDescription,p=r.addIceCandidate;r.createOffer=function(E,T){const C=arguments.length>=2?arguments[2]:arguments[0],I=o.apply(this,[C]);return T?(I.then(E,T),xe.resolve()):I},r.createAnswer=function(E,T){const C=arguments.length>=2?arguments[2]:arguments[0],I=s.apply(this,[C]);return T?(I.then(E,T),xe.resolve()):I};let v=function(E,T,C){const I=l.apply(this,[E]);return C?(I.then(T,C),xe.resolve()):I};r.setLocalDescription=v,v=function(E,T,C){const I=h.apply(this,[E]);return C?(I.then(T,C),xe.resolve()):I},r.setRemoteDescription=v,v=function(E,T,C){const I=p.apply(this,[E]);return C?(I.then(T,C),xe.resolve()):I},r.addIceCandidate=v}function HN(n){const r=n&&n.navigator;if(r.mediaDevices&&r.mediaDevices.getUserMedia){const o=r.mediaDevices,s=o.getUserMedia.bind(o);r.mediaDevices.getUserMedia=l=>s(WN(l))}!r.getUserMedia&&r.mediaDevices&&r.mediaDevices.getUserMedia&&(r.getUserMedia=(function(o,s,l){r.mediaDevices.getUserMedia(o).then(s,l)}).bind(r))}function WN(n){return n&&n.video!==void 0?Object.assign({},n,{video:OO(n.video)}):n}function GN(n){if(!n.RTCPeerConnection)return;const r=n.RTCPeerConnection;n.RTCPeerConnection=function(o,s){if(o&&o.iceServers){const l=[];for(let h=0;h<o.iceServers.length;h++){let p=o.iceServers[h];!p.hasOwnProperty("urls")&&p.hasOwnProperty("url")?(G_("RTCIceServer.url","RTCIceServer.urls"),p=JSON.parse(JSON.stringify(p)),p.urls=p.url,delete p.url,l.push(p)):l.push(o.iceServers[h])}o.iceServers=l}return new r(o,s)},n.RTCPeerConnection.prototype=r.prototype,"generateCertificate"in r&&Object.defineProperty(n.RTCPeerConnection,"generateCertificate",{get:()=>r.generateCertificate})}function zN(n){typeof n=="object"&&n.RTCTrackEvent&&"receiver"in n.RTCTrackEvent.prototype&&!("transceiver"in n.RTCTrackEvent.prototype)&&Object.defineProperty(n.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function KN(n){const r=n.RTCPeerConnection.prototype.createOffer;n.RTCPeerConnection.prototype.createOffer=function(o){if(o){o.offerToReceiveAudio!==void 0&&(o.offerToReceiveAudio=!!o.offerToReceiveAudio);const s=this.getTransceivers().find(h=>h.receiver.track.kind==="audio");o.offerToReceiveAudio===!1&&s?s.direction==="sendrecv"?s.setDirection?s.setDirection("sendonly"):s.direction="sendonly":s.direction==="recvonly"&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive"):o.offerToReceiveAudio!==!0||s||this.addTransceiver("audio",{direction:"recvonly"}),o.offerToReceiveVideo!==void 0&&(o.offerToReceiveVideo=!!o.offerToReceiveVideo);const l=this.getTransceivers().find(h=>h.receiver.track.kind==="video");o.offerToReceiveVideo===!1&&l?l.direction==="sendrecv"?l.setDirection?l.setDirection("sendonly"):l.direction="sendonly":l.direction==="recvonly"&&(l.setDirection?l.setDirection("inactive"):l.direction="inactive"):o.offerToReceiveVideo!==!0||l||this.addTransceiver("video",{direction:"recvonly"})}return r.apply(this,arguments)}}function YN(n){typeof n!="object"||n.AudioContext||(n.AudioContext=n.webkitAudioContext)}var qN=Object.freeze({__proto__:null,shimLocalStreamsAPI:VN,shimRemoteStreamsAPI:BN,shimCallbacksAPI:$N,shimGetUserMedia:HN,shimConstraints:WN,shimRTCIceServerUrls:GN,shimTrackEventTransceiver:zN,shimCreateOfferLegacy:KN,shimAudioContext:YN}),cK=`	
\v\f\r Â áââââââââââââ¯âã\u2028\u2029\uFEFF`,lK=ke,uK=ad,XN=S("".replace),v0=`[	
\v\f\r Â áââââââââââââ¯âã\u2028\u2029\uFEFF]`,dK=RegExp("^"+v0+v0+"*"),hK=RegExp(v0+v0+"*$"),Wy=function(n){return function(r){var o=uK(lK(r));return 1&n&&(o=XN(o,dK,"")),2&n&&(o=XN(o,hK,"")),o}},pK={start:Wy(1),end:Wy(2),trim:Wy(3)},fK=iA.PROPER,mK=c,JN=cK,gK=pK.trim;ki({target:"String",proto:!0,forced:function(n){return mK(function(){return!!JN[n]()||"âÂá "[n]()!=="âÂá "||fK&&JN[n].name!==n})}("trim")},{trim:function(){return gK(this)}});var vK=Kc("String").trim,EK=b,_K=vK,Gy=String.prototype,oc=function(n){var r=n.trim;return typeof n=="string"||n===Gy||EK(Gy,n)&&r===Gy.trim?_K:r},zy={exports:{}};(function(n){const r={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};r.localCName=r.generateIdentifier(),r.splitLines=function(o){return oc(o).call(o).split(`
`).map(s=>oc(s).call(s))},r.splitSections=function(o){return o.split(`
m=`).map((s,l)=>{var h;return oc(h=l>0?"m="+s:s).call(h)+`\r
`})},r.getDescription=function(o){const s=r.splitSections(o);return s&&s[0]},r.getMediaSections=function(o){const s=r.splitSections(o);return s.shift(),s},r.matchPrefix=function(o,s){return r.splitLines(o).filter(l=>l.indexOf(s)===0)},r.parseCandidate=function(o){let s;s=o.indexOf("a=candidate:")===0?o.substring(12).split(" "):o.substring(10).split(" ");const l={foundation:s[0],component:{1:"rtp",2:"rtcp"}[s[1]]||s[1],protocol:s[2].toLowerCase(),priority:parseInt(s[3],10),ip:s[4],address:s[4],port:parseInt(s[5],10),type:s[7]};for(let h=8;h<s.length;h+=2)switch(s[h]){case"raddr":l.relatedAddress=s[h+1];break;case"rport":l.relatedPort=parseInt(s[h+1],10);break;case"tcptype":l.tcpType=s[h+1];break;case"ufrag":l.ufrag=s[h+1],l.usernameFragment=s[h+1];break;default:l[s[h]]===void 0&&(l[s[h]]=s[h+1])}return l},r.writeCandidate=function(o){const s=[];s.push(o.foundation);const l=o.component;l==="rtp"?s.push(1):l==="rtcp"?s.push(2):s.push(l),s.push(o.protocol.toUpperCase()),s.push(o.priority),s.push(o.address||o.ip),s.push(o.port);const h=o.type;return s.push("typ"),s.push(h),h!=="host"&&o.relatedAddress&&o.relatedPort&&(s.push("raddr"),s.push(o.relatedAddress),s.push("rport"),s.push(o.relatedPort)),o.tcpType&&o.protocol.toLowerCase()==="tcp"&&(s.push("tcptype"),s.push(o.tcpType)),(o.usernameFragment||o.ufrag)&&(s.push("ufrag"),s.push(o.usernameFragment||o.ufrag)),"candidate:"+s.join(" ")},r.parseIceOptions=function(o){return o.substr(14).split(" ")},r.parseRtpMap=function(o){let s=o.substr(9).split(" ");const l={payloadType:parseInt(s.shift(),10)};return s=s[0].split("/"),l.name=s[0],l.clockRate=parseInt(s[1],10),l.channels=s.length===3?parseInt(s[2],10):1,l.numChannels=l.channels,l},r.writeRtpMap=function(o){let s=o.payloadType;o.preferredPayloadType!==void 0&&(s=o.preferredPayloadType);const l=o.channels||o.numChannels||1;return"a=rtpmap:"+s+" "+o.name+"/"+o.clockRate+(l!==1?"/"+l:"")+`\r
`},r.parseExtmap=function(o){const s=o.substr(9).split(" ");return{id:parseInt(s[0],10),direction:s[0].indexOf("/")>0?s[0].split("/")[1]:"sendrecv",uri:s[1]}},r.writeExtmap=function(o){return"a=extmap:"+(o.id||o.preferredId)+(o.direction&&o.direction!=="sendrecv"?"/"+o.direction:"")+" "+o.uri+`\r
`},r.parseFmtp=function(o){const s={};let l;const h=o.substr(o.indexOf(" ")+1).split(";");for(let E=0;E<h.length;E++){var p,v;l=oc(p=h[E]).call(p).split("="),s[oc(v=l[0]).call(v)]=l[1]}return s},r.writeFmtp=function(o){let s="",l=o.payloadType;if(o.preferredPayloadType!==void 0&&(l=o.preferredPayloadType),o.parameters&&Object.keys(o.parameters).length){const h=[];Object.keys(o.parameters).forEach(p=>{o.parameters[p]!==void 0?h.push(p+"="+o.parameters[p]):h.push(p)}),s+="a=fmtp:"+l+" "+h.join(";")+`\r
`}return s},r.parseRtcpFb=function(o){const s=o.substr(o.indexOf(" ")+1).split(" ");return{type:s.shift(),parameter:s.join(" ")}},r.writeRtcpFb=function(o){let s="",l=o.payloadType;return o.preferredPayloadType!==void 0&&(l=o.preferredPayloadType),o.rtcpFeedback&&o.rtcpFeedback.length&&o.rtcpFeedback.forEach(h=>{s+="a=rtcp-fb:"+l+" "+h.type+(h.parameter&&h.parameter.length?" "+h.parameter:"")+`\r
`}),s},r.parseSsrcMedia=function(o){const s=o.indexOf(" "),l={ssrc:parseInt(o.substr(7,s-7),10)},h=o.indexOf(":",s);return h>-1?(l.attribute=o.substr(s+1,h-s-1),l.value=o.substr(h+1)):l.attribute=o.substr(s+1),l},r.parseSsrcGroup=function(o){const s=o.substr(13).split(" ");return{semantics:s.shift(),ssrcs:s.map(l=>parseInt(l,10))}},r.getMid=function(o){const s=r.matchPrefix(o,"a=mid:")[0];if(s)return s.substr(6)},r.parseFingerprint=function(o){const s=o.substr(14).split(" ");return{algorithm:s[0].toLowerCase(),value:s[1].toUpperCase()}},r.getDtlsParameters=function(o,s){return{role:"auto",fingerprints:r.matchPrefix(o+s,"a=fingerprint:").map(r.parseFingerprint)}},r.writeDtlsParameters=function(o,s){let l="a=setup:"+s+`\r
`;return o.fingerprints.forEach(h=>{l+="a=fingerprint:"+h.algorithm+" "+h.value+`\r
`}),l},r.parseCryptoLine=function(o){const s=o.substr(9).split(" ");return{tag:parseInt(s[0],10),cryptoSuite:s[1],keyParams:s[2],sessionParams:s.slice(3)}},r.writeCryptoLine=function(o){return"a=crypto:"+o.tag+" "+o.cryptoSuite+" "+(typeof o.keyParams=="object"?r.writeCryptoKeyParams(o.keyParams):o.keyParams)+(o.sessionParams?" "+o.sessionParams.join(" "):"")+`\r
`},r.parseCryptoKeyParams=function(o){if(o.indexOf("inline:")!==0)return null;const s=o.substr(7).split("|");return{keyMethod:"inline",keySalt:s[0],lifeTime:s[1],mkiValue:s[2]?s[2].split(":")[0]:void 0,mkiLength:s[2]?s[2].split(":")[1]:void 0}},r.writeCryptoKeyParams=function(o){return o.keyMethod+":"+o.keySalt+(o.lifeTime?"|"+o.lifeTime:"")+(o.mkiValue&&o.mkiLength?"|"+o.mkiValue+":"+o.mkiLength:"")},r.getCryptoParameters=function(o,s){return r.matchPrefix(o+s,"a=crypto:").map(r.parseCryptoLine)},r.getIceParameters=function(o,s){const l=r.matchPrefix(o+s,"a=ice-ufrag:")[0],h=r.matchPrefix(o+s,"a=ice-pwd:")[0];return l&&h?{usernameFragment:l.substr(12),password:h.substr(10)}:null},r.writeIceParameters=function(o){let s="a=ice-ufrag:"+o.usernameFragment+`\r
a=ice-pwd:`+o.password+`\r
`;return o.iceLite&&(s+=`a=ice-lite\r
`),s},r.parseRtpParameters=function(o){const s={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},l=r.splitLines(o)[0].split(" ");for(let h=3;h<l.length;h++){const p=l[h],v=r.matchPrefix(o,"a=rtpmap:"+p+" ")[0];if(v){const E=r.parseRtpMap(v),T=r.matchPrefix(o,"a=fmtp:"+p+" ");switch(E.parameters=T.length?r.parseFmtp(T[0]):{},E.rtcpFeedback=r.matchPrefix(o,"a=rtcp-fb:"+p+" ").map(r.parseRtcpFb),s.codecs.push(E),E.name.toUpperCase()){case"RED":case"ULPFEC":s.fecMechanisms.push(E.name.toUpperCase())}}}return r.matchPrefix(o,"a=extmap:").forEach(h=>{s.headerExtensions.push(r.parseExtmap(h))}),s},r.writeRtpDescription=function(o,s){let l="";l+="m="+o+" ",l+=s.codecs.length>0?"9":"0",l+=" UDP/TLS/RTP/SAVPF ",l+=s.codecs.map(p=>p.preferredPayloadType!==void 0?p.preferredPayloadType:p.payloadType).join(" ")+`\r
`,l+=`c=IN IP4 0.0.0.0\r
`,l+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,s.codecs.forEach(p=>{l+=r.writeRtpMap(p),l+=r.writeFmtp(p),l+=r.writeRtcpFb(p)});let h=0;return s.codecs.forEach(p=>{p.maxptime>h&&(h=p.maxptime)}),h>0&&(l+="a=maxptime:"+h+`\r
`),s.headerExtensions&&s.headerExtensions.forEach(p=>{l+=r.writeExtmap(p)}),l},r.parseRtpEncodingParameters=function(o){const s=[],l=r.parseRtpParameters(o),h=l.fecMechanisms.indexOf("RED")!==-1,p=l.fecMechanisms.indexOf("ULPFEC")!==-1,v=r.matchPrefix(o,"a=ssrc:").map(L=>r.parseSsrcMedia(L)).filter(L=>L.attribute==="cname"),E=v.length>0&&v[0].ssrc;let T;const C=r.matchPrefix(o,"a=ssrc-group:FID").map(L=>L.substr(17).split(" ").map(V=>parseInt(V,10)));C.length>0&&C[0].length>1&&C[0][0]===E&&(T=C[0][1]),l.codecs.forEach(L=>{if(L.name.toUpperCase()==="RTX"&&L.parameters.apt){let V={ssrc:E,codecPayloadType:parseInt(L.parameters.apt,10)};E&&T&&(V.rtx={ssrc:T}),s.push(V),h&&(V=JSON.parse(JSON.stringify(V)),V.fec={ssrc:E,mechanism:p?"red+ulpfec":"red"},s.push(V))}}),s.length===0&&E&&s.push({ssrc:E});let I=r.matchPrefix(o,"b=");return I.length&&(I=I[0].indexOf("b=TIAS:")===0?parseInt(I[0].substr(7),10):I[0].indexOf("b=AS:")===0?1e3*parseInt(I[0].substr(5),10)*.95-16e3:void 0,s.forEach(L=>{L.maxBitrate=I})),s},r.parseRtcpParameters=function(o){const s={},l=r.matchPrefix(o,"a=ssrc:").map(v=>r.parseSsrcMedia(v)).filter(v=>v.attribute==="cname")[0];l&&(s.cname=l.value,s.ssrc=l.ssrc);const h=r.matchPrefix(o,"a=rtcp-rsize");s.reducedSize=h.length>0,s.compound=h.length===0;const p=r.matchPrefix(o,"a=rtcp-mux");return s.mux=p.length>0,s},r.writeRtcpParameters=function(o){let s="";return o.reducedSize&&(s+=`a=rtcp-rsize\r
`),o.mux&&(s+=`a=rtcp-mux\r
`),o.ssrc!==void 0&&o.cname&&(s+="a=ssrc:"+o.ssrc+" cname:"+o.cname+`\r
`),s},r.parseMsid=function(o){let s;const l=r.matchPrefix(o,"a=msid:");if(l.length===1)return s=l[0].substr(7).split(" "),{stream:s[0],track:s[1]};const h=r.matchPrefix(o,"a=ssrc:").map(p=>r.parseSsrcMedia(p)).filter(p=>p.attribute==="msid");return h.length>0?(s=h[0].value.split(" "),{stream:s[0],track:s[1]}):void 0},r.parseSctpDescription=function(o){const s=r.parseMLine(o),l=r.matchPrefix(o,"a=max-message-size:");let h;l.length>0&&(h=parseInt(l[0].substr(19),10)),isNaN(h)&&(h=65536);const p=r.matchPrefix(o,"a=sctp-port:");if(p.length>0)return{port:parseInt(p[0].substr(12),10),protocol:s.fmt,maxMessageSize:h};const v=r.matchPrefix(o,"a=sctpmap:");if(v.length>0){const E=v[0].substr(10).split(" ");return{port:parseInt(E[0],10),protocol:E[1],maxMessageSize:h}}},r.writeSctpDescription=function(o,s){let l=[];return l=o.protocol!=="DTLS/SCTP"?["m="+o.kind+" 9 "+o.protocol+" "+s.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+s.port+`\r
`]:["m="+o.kind+" 9 "+o.protocol+" "+s.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+s.port+" "+s.protocol+` 65535\r
`],s.maxMessageSize!==void 0&&l.push("a=max-message-size:"+s.maxMessageSize+`\r
`),l.join("")},r.generateSessionId=function(){return Math.random().toString().substr(2,21)},r.writeSessionBoilerplate=function(o,s,l){let h;const p=s!==void 0?s:2;return h=o||r.generateSessionId(),`v=0\r
o=`+(l||"thisisadapterortc")+" "+h+" "+p+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},r.getDirection=function(o,s){const l=r.splitLines(o);for(let h=0;h<l.length;h++)switch(l[h]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return l[h].substr(2)}return s?r.getDirection(s):"sendrecv"},r.getKind=function(o){return r.splitLines(o)[0].split(" ")[0].substr(2)},r.isRejected=function(o){return o.split(" ",2)[1]==="0"},r.parseMLine=function(o){const s=r.splitLines(o)[0].substr(2).split(" ");return{kind:s[0],port:parseInt(s[1],10),protocol:s[2],fmt:s.slice(3).join(" ")}},r.parseOLine=function(o){const s=r.matchPrefix(o,"o=")[0].substr(2).split(" ");return{username:s[0],sessionId:s[1],sessionVersion:parseInt(s[2],10),netType:s[3],addressType:s[4],address:s[5]}},r.isValidSDP=function(o){if(typeof o!="string"||o.length===0)return!1;const s=r.splitLines(o);for(let l=0;l<s.length;l++)if(s[l].length<2||s[l].charAt(1)!=="=")return!1;return!0},n.exports=r})(zy);var fd=zy.exports,yK=Object.freeze(i({__proto__:null,default:fd},[zy.exports]));function E0(n){if(!n.RTCIceCandidate||n.RTCIceCandidate&&"foundation"in n.RTCIceCandidate.prototype)return;const r=n.RTCIceCandidate;n.RTCIceCandidate=function(o){if(typeof o=="object"&&o.candidate&&o.candidate.indexOf("a=")===0&&((o=JSON.parse(JSON.stringify(o))).candidate=o.candidate.substr(2)),o.candidate&&o.candidate.length){const s=new r(o),l=fd.parseCandidate(o.candidate),h=Object.assign(s,l);return h.toJSON=function(){return{candidate:h.candidate,sdpMid:h.sdpMid,sdpMLineIndex:h.sdpMLineIndex,usernameFragment:h.usernameFragment}},h}return new r(o)},n.RTCIceCandidate.prototype=r.prototype,Ql(n,"icecandidate",o=>(o.candidate&&Object.defineProperty(o,"candidate",{value:new n.RTCIceCandidate(o.candidate),writable:"false"}),o))}function Ky(n){!n.RTCIceCandidate||n.RTCIceCandidate&&"relayProtocol"in n.RTCIceCandidate.prototype||Ql(n,"icecandidate",r=>{if(r.candidate){const o=fd.parseCandidate(r.candidate.candidate);o.type==="relay"&&(r.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[o.priority>>24])}return r})}function _0(n,r){if(!n.RTCPeerConnection)return;"sctp"in n.RTCPeerConnection.prototype||Object.defineProperty(n.RTCPeerConnection.prototype,"sctp",{get(){return this._sctp===void 0?null:this._sctp}});const o=function(v){if(!v||!v.sdp)return!1;const E=fd.splitSections(v.sdp);return E.shift(),E.some(T=>{const C=fd.parseMLine(T);return C&&C.kind==="application"&&C.protocol.indexOf("SCTP")!==-1})},s=function(v){const E=v.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(E===null||E.length<2)return-1;const T=parseInt(E[1],10);return T!=T?-1:T},l=function(v){let E=65536;return r.browser==="firefox"&&(E=r.version<57?v===-1?16384:2147483637:r.version<60?r.version===57?65535:65536:2147483637),E},h=function(v,E){let T=65536;r.browser==="firefox"&&r.version===57&&(T=65535);const C=fd.matchPrefix(v.sdp,"a=max-message-size:");return C.length>0?T=parseInt(C[0].substr(19),10):r.browser==="firefox"&&E!==-1&&(T=2147483637),T},p=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,r.browser==="chrome"&&r.version>=76){const{sdpSemantics:v}=this.getConfiguration();v==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return this._sctp===void 0?null:this._sctp},enumerable:!0,configurable:!0})}if(o(arguments[0])){const v=s(arguments[0]),E=l(v),T=h(arguments[0],v);let C;C=E===0&&T===0?Number.POSITIVE_INFINITY:E===0||T===0?Math.max(E,T):Math.min(E,T);const I={};Object.defineProperty(I,"maxMessageSize",{get:()=>C}),this._sctp=I}return p.apply(this,arguments)}}function y0(n){if(!n.RTCPeerConnection||!("createDataChannel"in n.RTCPeerConnection.prototype))return;function r(s,l){const h=s.send;s.send=function(){const p=arguments[0],v=p.length||p.size||p.byteLength;if(s.readyState==="open"&&l.sctp&&v>l.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+l.sctp.maxMessageSize+" bytes)");return h.apply(s,arguments)}}const o=n.RTCPeerConnection.prototype.createDataChannel;n.RTCPeerConnection.prototype.createDataChannel=function(){const s=o.apply(this,arguments);return r(s,this),s},Ql(n,"datachannel",s=>(r(s.channel,s.target),s))}function Yy(n){if(!n.RTCPeerConnection||"connectionState"in n.RTCPeerConnection.prototype)return;const r=n.RTCPeerConnection.prototype;Object.defineProperty(r,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(r,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(o){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),o&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=o)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(o=>{const s=r[o];r[o]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=l=>{const h=l.target;if(h._lastConnectionState!==h.connectionState){h._lastConnectionState=h.connectionState;const p=new Event("connectionstatechange",l);h.dispatchEvent(p)}return l},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),s.apply(this,arguments)}})}function qy(n,r){if(!n.RTCPeerConnection||r.browser==="chrome"&&r.version>=71||r.browser==="safari"&&r.version>=605)return;const o=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(s){if(s&&s.sdp&&s.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const l=s.sdp.split(`
`).filter(h=>oc(h).call(h)!=="a=extmap-allow-mixed").join(`
`);n.RTCSessionDescription&&s instanceof n.RTCSessionDescription?arguments[0]=new n.RTCSessionDescription({type:s.type,sdp:l}):s.sdp=l}return o.apply(this,arguments)}}function S0(n,r){if(!n.RTCPeerConnection||!n.RTCPeerConnection.prototype)return;const o=n.RTCPeerConnection.prototype.addIceCandidate;o&&o.length!==0&&(n.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(r.browser==="chrome"&&r.version<78||r.browser==="firefox"&&r.version<68||r.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?xe.resolve():o.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),xe.resolve())})}function C0(n,r){if(!n.RTCPeerConnection||!n.RTCPeerConnection.prototype)return;const o=n.RTCPeerConnection.prototype.setLocalDescription;o&&o.length!==0&&(n.RTCPeerConnection.prototype.setLocalDescription=function(){let s=arguments[0]||{};if(typeof s!="object"||s.type&&s.sdp)return o.apply(this,arguments);if(s={type:s.type,sdp:s.sdp},!s.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":s.type="offer";break;default:s.type="answer"}return s.sdp||s.type!=="offer"&&s.type!=="answer"?o.apply(this,[s]):(s.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(h=>o.apply(this,[h]))})}var SK=Object.freeze({__proto__:null,shimRTCIceCandidate:E0,shimRTCIceCandidateRelayProtocol:Ky,shimMaxMessageSize:_0,shimSendThrowTypeError:y0,shimConnectionState:Yy,removeExtmapAllowMixed:qy,shimAddIceCandidateNullOrEmpty:S0,shimParameterlessSetLocalDescription:C0});let qr,qt;(function(){let{window:n}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0};const o=IO,s=MW(n),l={browserDetails:s,commonShim:SK,extractVersion:Gm,disableLog:kW,disableWarnings:LW,sdp:yK};switch(s.browser){case"chrome":if(!ON||!$y||!r.shimChrome)return o("Chrome shim is not included in this adapter release."),l;if(s.version===null)return o("Chrome shim can not determine version, not shimming."),l;o("adapter.js shimming chrome."),l.browserShim=ON,S0(n,s),C0(n),_N(n,s),yN(n),$y(n,s),SN(n),IN(n,s),CN(n),bN(n),TN(n),wN(n,s),E0(n),Ky(n),Yy(n),_0(n,s),y0(n),qy(n,s);break;case"firefox":if(!FN||!Hy||!r.shimFirefox)return o("Firefox shim is not included in this adapter release."),l;o("adapter.js shimming firefox."),l.browserShim=FN,S0(n,s),C0(n),AN(n,s),Hy(n,s),NN(n),DN(n),xN(n),PN(n),kN(n),LN(n),MN(n),UN(n),jN(n),E0(n),Yy(n),_0(n,s),y0(n);break;case"safari":if(!qN||!r.shimSafari)return o("Safari shim is not included in this adapter release."),l;o("adapter.js shimming safari."),l.browserShim=qN,S0(n,s),C0(n),GN(n),KN(n),$N(n),VN(n),BN(n),zN(n),HN(n),YN(n),E0(n),Ky(n),_0(n,s),y0(n),qy(n,s);break;default:o("Unsupported browser!")}})({window:typeof window>"u"?void 0:window}),function(n){n.WIN_10="Windows 10",n.WIN_81="Windows 8.1",n.WIN_8="Windows 8",n.WIN_7="Windows 7",n.WIN_VISTA="Windows Vista",n.WIN_SERVER_2003="Windows Server 2003",n.WIN_XP="Windows XP",n.WIN_2000="Windows 2000",n.ANDROID="Android",n.HARMONY_OS="HarmonyOS",n.OPEN_BSD="Open BSD",n.SUN_OS="Sun OS",n.LINUX="Linux",n.IOS="iOS",n.MAC_OS="Mac OS",n.QNX="QNX",n.UNIX="UNIX",n.BEOS="BeOS",n.OS_2="OS/2",n.SEARCH_BOT="Search Bot"}(qr||(qr={})),function(n){n.CHROME="Chrome",n.SAFARI="Safari",n.EDGE="Edge",n.FIREFOX="Firefox",n.OPERA="OPR",n.QQ="QQBrowser",n.WECHAT="MicroMessenger"}(qt||(qt={}));var Xy={exports:{}};(function(n,r){(function(o,s){var l="function",h="undefined",p="object",v="string",E="major",T="model",C="name",I="type",L="vendor",V="version",Y="architecture",q="console",X="mobile",le="tablet",he="smarttv",Se="wearable",De="embedded",be="Amazon",Te="Apple",ye="ASUS",Oe="BlackBerry",Bt="Firefox",We="Google",ln="Huawei",en="LG",Yn="Microsoft",$r="Motorola",Bn="Opera",ro="Samsung",ge="Sharp",Ce="Sony",Ne="Xiaomi",et="Zebra",Ut="Facebook",Re="Chromium OS",k="Mac OS",J=function(Mn){for(var or={},on=0;on<Mn.length;on++)or[Mn[on].toUpperCase()]=Mn[on];return or},ne=function(Mn,or){return typeof Mn===v&&ve(or).indexOf(ve(Mn))!==-1},ve=function(Mn){return Mn.toLowerCase()},ot=function(Mn,or){if(typeof Mn===v)return Mn=Mn.replace(/^\s\s*/,""),typeof or===h?Mn:Mn.substring(0,350)},un=function(Mn,or){for(var on,ji,Bs,Un,Dt,io,ml=0;ml<or.length&&!Dt;){var ss=or[ml],KM=or[ml+1];for(on=ji=0;on<ss.length&&!Dt&&ss[on];)if(Dt=ss[on++].exec(Mn))for(Bs=0;Bs<KM.length;Bs++)io=Dt[++ji],typeof(Un=KM[Bs])===p&&Un.length>0?Un.length===2?typeof Un[1]==l?this[Un[0]]=Un[1].call(this,io):this[Un[0]]=Un[1]:Un.length===3?typeof Un[1]!==l||Un[1].exec&&Un[1].test?this[Un[0]]=io?io.replace(Un[1],Un[2]):s:this[Un[0]]=io?Un[1].call(this,io,Un[2]):s:Un.length===4&&(this[Un[0]]=io?Un[3].call(this,io.replace(Un[1],Un[2])):s):this[Un]=io||s;ml+=2}},Hr=function(Mn,or){for(var on in or)if(typeof or[on]===p&&or[on].length>0){for(var ji=0;ji<or[on].length;ji++)if(ne(or[on][ji],Mn))return on==="?"?s:on}else if(ne(or[on],Mn))return on==="?"?s:on;return Mn},ka={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},pl={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[V,[C,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[V,[C,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[C,V],[/opios[\/ ]+([\w\.]+)/i],[V,[C,"Opera Mini"]],[/\bopr\/([\w\.]+)/i],[V,[C,Bn]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[C,V],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[V,[C,"UCBrowser"]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[V,[C,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[V,[C,"WeChat"]],[/konqueror\/([\w\.]+)/i],[V,[C,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[V,[C,"IE"]],[/yabrowser\/([\w\.]+)/i],[V,[C,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[C,/(.+)/,"$1 Secure Browser"],V],[/\bfocus\/([\w\.]+)/i],[V,[C,"Firefox Focus"]],[/\bopt\/([\w\.]+)/i],[V,[C,"Opera Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[V,[C,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[V,[C,"Dolphin"]],[/coast\/([\w\.]+)/i],[V,[C,"Opera Coast"]],[/miuibrowser\/([\w\.]+)/i],[V,[C,"MIUI Browser"]],[/fxios\/([-\w\.]+)/i],[V,[C,Bt]],[/\bqihu|(qi?ho?o?|360)browser/i],[[C,"360 Browser"]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[C,/(.+)/,"$1 Browser"],V],[/(comodo_dragon)\/([\w\.]+)/i],[[C,/_/g," "],V],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[C,V],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[C],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[C,Ut],V],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[C,V],[/\bgsa\/([\w\.]+) .*safari\//i],[V,[C,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[V,[C,"Chrome Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[C,"Chrome WebView"],V],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[V,[C,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[C,V],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[V,[C,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[V,C],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[C,[V,Hr,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[C,V],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[C,"Netscape"],V],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[V,[C,"Firefox Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[C,V],[/(cobalt)\/([\w\.]+)/i],[C,[V,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[Y,"amd64"]],[/(ia32(?=;))/i],[[Y,ve]],[/((?:i[346]|x)86)[;\)]/i],[[Y,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[Y,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[Y,"armhf"]],[/windows (ce|mobile); ppc;/i],[[Y,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[Y,/ower/,"",ve]],[/(sun4\w)[;\)]/i],[[Y,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[Y,ve]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[T,[L,ro],[I,le]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[T,[L,ro],[I,X]],[/\((ip(?:hone|od)[\w ]*);/i],[T,[L,Te],[I,X]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[T,[L,Te],[I,le]],[/(macintosh);/i],[T,[L,Te]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[T,[L,ge],[I,X]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[T,[L,ln],[I,le]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[T,[L,ln],[I,X]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[T,/_/g," "],[L,Ne],[I,X]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[T,/_/g," "],[L,Ne],[I,le]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[T,[L,"OPPO"],[I,X]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[T,[L,"Vivo"],[I,X]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[T,[L,"Realme"],[I,X]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[T,[L,$r],[I,X]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[T,[L,$r],[I,le]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[T,[L,en],[I,le]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[T,[L,en],[I,X]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[T,[L,"Lenovo"],[I,le]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[T,/_/g," "],[L,"Nokia"],[I,X]],[/(pixel c)\b/i],[T,[L,We],[I,le]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[T,[L,We],[I,X]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[T,[L,Ce],[I,X]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[T,"Xperia Tablet"],[L,Ce],[I,le]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[T,[L,"OnePlus"],[I,X]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[T,[L,be],[I,le]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[T,/(.+)/g,"Fire Phone $1"],[L,be],[I,X]],[/(playbook);[-\w\),; ]+(rim)/i],[T,L,[I,le]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[T,[L,Oe],[I,X]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[T,[L,ye],[I,le]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[T,[L,ye],[I,X]],[/(nexus 9)/i],[T,[L,"HTC"],[I,le]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[L,[T,/_/g," "],[I,X]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[T,[L,"Acer"],[I,le]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[T,[L,"Meizu"],[I,X]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[L,T,[I,X]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[L,T,[I,le]],[/(surface duo)/i],[T,[L,Yn],[I,le]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[T,[L,"Fairphone"],[I,X]],[/(u304aa)/i],[T,[L,"AT&T"],[I,X]],[/\bsie-(\w*)/i],[T,[L,"Siemens"],[I,X]],[/\b(rct\w+) b/i],[T,[L,"RCA"],[I,le]],[/\b(venue[\d ]{2,7}) b/i],[T,[L,"Dell"],[I,le]],[/\b(q(?:mv|ta)\w+) b/i],[T,[L,"Verizon"],[I,le]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[T,[L,"Barnes & Noble"],[I,le]],[/\b(tm\d{3}\w+) b/i],[T,[L,"NuVision"],[I,le]],[/\b(k88) b/i],[T,[L,"ZTE"],[I,le]],[/\b(nx\d{3}j) b/i],[T,[L,"ZTE"],[I,X]],[/\b(gen\d{3}) b.+49h/i],[T,[L,"Swiss"],[I,X]],[/\b(zur\d{3}) b/i],[T,[L,"Swiss"],[I,le]],[/\b((zeki)?tb.*\b) b/i],[T,[L,"Zeki"],[I,le]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[L,"Dragon Touch"],T,[I,le]],[/\b(ns-?\w{0,9}) b/i],[T,[L,"Insignia"],[I,le]],[/\b((nxa|next)-?\w{0,9}) b/i],[T,[L,"NextBook"],[I,le]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[L,"Voice"],T,[I,X]],[/\b(lvtel\-)?(v1[12]) b/i],[[L,"LvTel"],T,[I,X]],[/\b(ph-1) /i],[T,[L,"Essential"],[I,X]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[T,[L,"Envizen"],[I,le]],[/\b(trio[-\w\. ]+) b/i],[T,[L,"MachSpeed"],[I,le]],[/\btu_(1491) b/i],[T,[L,"Rotor"],[I,le]],[/(shield[\w ]+) b/i],[T,[L,"Nvidia"],[I,le]],[/(sprint) (\w+)/i],[L,T,[I,X]],[/(kin\.[onetw]{3})/i],[[T,/\./g," "],[L,Yn],[I,X]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[T,[L,et],[I,le]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[T,[L,et],[I,X]],[/smart-tv.+(samsung)/i],[L,[I,he]],[/hbbtv.+maple;(\d+)/i],[[T,/^/,"SmartTV"],[L,ro],[I,he]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[L,en],[I,he]],[/(apple) ?tv/i],[L,[T,"Apple TV"],[I,he]],[/crkey/i],[[T,"Chromecast"],[L,We],[I,he]],[/droid.+aft(\w)( bui|\))/i],[T,[L,be],[I,he]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[T,[L,ge],[I,he]],[/(bravia[\w ]+)( bui|\))/i],[T,[L,Ce],[I,he]],[/(mitv-\w{5}) bui/i],[T,[L,Ne],[I,he]],[/Hbbtv.*(technisat) (.*);/i],[L,T,[I,he]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[L,ot],[T,ot],[I,he]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[I,he]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[L,T,[I,q]],[/droid.+; (shield) bui/i],[T,[L,"Nvidia"],[I,q]],[/(playstation [345portablevi]+)/i],[T,[L,Ce],[I,q]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[T,[L,Yn],[I,q]],[/((pebble))app/i],[L,T,[I,Se]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[T,[L,Te],[I,Se]],[/droid.+; (glass) \d/i],[T,[L,We],[I,Se]],[/droid.+; (wt63?0{2,3})\)/i],[T,[L,et],[I,Se]],[/(quest( 2| pro)?)/i],[T,[L,Ut],[I,Se]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[L,[I,De]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[T,[I,X]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[T,[I,le]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[I,le]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[I,X]],[/(android[-\w\. ]{0,9});.+buil/i],[T,[L,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[V,[C,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[V,[C,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[C,V],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[V,C]],os:[[/microsoft (windows) (vista|xp)/i],[C,V],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[C,[V,Hr,ka]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[C,"Windows"],[V,Hr,ka]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[V,/_/g,"."],[C,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[C,k],[V,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[V,C],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[C,V],[/\(bb(10);/i],[V,[C,Oe]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[V,[C,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[V,[C,"Firefox OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[V,[C,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[V,[C,"watchOS"]],[/crkey\/([\d\.]+)/i],[V,[C,"Chromecast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[C,Re],V],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[C,V],[/(sunos) ?([\w\.\d]*)/i],[[C,"Solaris"],V],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[C,V]]},ua=function(Mn,or){if(typeof Mn===p&&(or=Mn,Mn=s),!(this instanceof ua))return new ua(Mn,or).getResult();var on=typeof o!==h&&o.navigator?o.navigator:s,ji=Mn||(on&&on.userAgent?on.userAgent:""),Bs=on&&on.userAgentData?on.userAgentData:s,Un=or?function(Dt,io){var ml={};for(var ss in Dt)io[ss]&&io[ss].length%2==0?ml[ss]=io[ss].concat(Dt[ss]):ml[ss]=Dt[ss];return ml}(pl,or):pl;return this.getBrowser=function(){var Dt={};return Dt.name=s,Dt.version=s,un.call(Dt,ji,Un.browser),Dt.major=function(io){return typeof io===v?io.replace(/[^\d\.]/g,"").split(".")[0]:s}(Dt.version),on&&on.brave&&typeof on.brave.isBrave==l&&(Dt.name="Brave"),Dt},this.getCPU=function(){var Dt={};return Dt.architecture=s,un.call(Dt,ji,Un.cpu),Dt},this.getDevice=function(){var Dt={};return Dt.vendor=s,Dt.model=s,Dt.type=s,un.call(Dt,ji,Un.device),!Dt.type&&Bs&&Bs.mobile&&(Dt.type=X),Dt.model=="Macintosh"&&on&&typeof on.standalone!==h&&on.maxTouchPoints&&on.maxTouchPoints>2&&(Dt.model="iPad",Dt.type=le),Dt},this.getEngine=function(){var Dt={};return Dt.name=s,Dt.version=s,un.call(Dt,ji,Un.engine),Dt},this.getOS=function(){var Dt={};return Dt.name=s,Dt.version=s,un.call(Dt,ji,Un.os),!Dt.name&&Bs&&Bs.platform!="Unknown"&&(Dt.name=Bs.platform.replace(/chrome os/i,Re).replace(/macos/i,k)),Dt},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return ji},this.setUA=function(Dt){return ji=typeof Dt===v&&Dt.length>350?ot(Dt,350):Dt,this},this.setUA(ji),this};ua.VERSION="0.7.34",ua.BROWSER=J([C,V,E]),ua.CPU=J([Y]),ua.DEVICE=J([T,L,I,q,X,he,le,Se,De]),ua.ENGINE=ua.OS=J([C,V]),n.exports&&(r=n.exports=ua),r.UAParser=ua;var fl=typeof o!==h&&(o.jQuery||o.Zepto);if(fl&&!fl.ua){var Gd=new ua;fl.ua=Gd.getResult(),fl.ua.get=function(){return Gd.getUA()},fl.ua.set=function(Mn){Gd.setUA(Mn);var or=Gd.getResult();for(var on in or)fl.ua[on]=or[on]}}})(typeof window=="object"?window:a)})(Xy,Xy.exports);const Jy=new Xy.exports;let Qy,wo,ac=Jy.getResult(),Zy=null;function Ht(n){if(!Zy){n&&Jy.setUA(n),ac=Jy.getResult();const r=function(h){if(h.engine.name==="Blink"&&h.browser.name!=="WeChat")return qt.CHROME;switch(h.browser.name){case"Chrome Headless":case"Chrome":case"Chromium":return qt.CHROME;case"Safari":case"Mobile Safari":return qt.SAFARI;case"Edge":return qt.EDGE;case"Firefox":return qt.FIREFOX;case"QQBrowser":return qt.QQ;case"Opera":return qt.OPERA;case"WeChat":return qt.WECHAT;default:return h.browser.name||""}}(ac),o=function(h){let p;return p=h.engine.name==="Blink"?h.engine.version||"":h.browser.version||"",p.split(".")[0]}(ac),s=function(h){switch(h.os.name){case"Windows":return h.os.version?h.os.name+" "+h.os.version:h.os.name;default:return h.os.name||""}}(ac),l=ac.os.version;if(!(r&&o&&s&&l))return{name:r,version:o,os:s,osVersion:l};Zy={name:r,version:o,os:s,osVersion:l}}return Zy}function QN(){return Ht().os}function ZN(){const n=Ht();return"".concat(n.os," ").concat(n.osVersion)}function b0(){const n=Ht();return!!(ac.engine.name==="WebKit"&&n.os===qr.MAC_OS&&navigator.maxTouchPoints&&navigator.maxTouchPoints>0&&n.name!==qt.SAFARI||Ti()&&n.name!==qt.SAFARI)}function CK(){const n=Ht();if(b0()){if(n.os===qr.MAC_OS)return!0;if(n.os===qr.IOS){const r=ac.os.version&&ac.os.version.split(".");if(r&&Number(r[0])===14&&r[1]&&Number(r[1])>=3||r&&Number(r[0])>14)return!0}}return!1}function bK(){return ac.engine.name==="WebKit"}function eS(){return Ht().name===qt.CHROME}function bi(){return Ht().name===qt.SAFARI}function Pn(){return Ht().name===qt.FIREFOX}function Ti(){return Ht().os===qr.IOS}function tS(n){const r=Ht();return!(r.name!==qt.CHROME||!r.osVersion)&&Number(r.version)>=n}function ex(n){const r=Ht();return!(r.name!==qt.EDGE||!r.osVersion)&&Number(r.version)>=n}function tx(n){const r=Ht();return!(r.name!==qt.OPERA||!r.osVersion)&&Number(r.version)>=n}function nx(){const n=Ht();return!(n.name!==qt.CHROME||!n.osVersion)&&Number(n.version)<=90}function rx(){const n=Ht();if(n.os!==qr.IOS||!n.osVersion)return!1;const r=n.osVersion.split(".");return Number(r[0])<14||Number(r[0])===14&&Number(r[1])<=6}function md(){const n=Ht();if(n.os!==qr.IOS||!n.osVersion)return!1;const r=n.osVersion.split(".");return Number(r[0])===15}function nS(){const n=Ht();if(n.os!==qr.IOS||!n.osVersion)return!1;const r=n.osVersion.split(".");return Number(r[0])===16}function ix(){const n=Ht();if(n.os!==qr.IOS||!n.osVersion)return!1;const r=n.osVersion.split(".");return Number(r[0])===15&&Number(r[1])>=1}function ks(){return bi()&&navigator.maxTouchPoints>0}function ox(){return Ht().name===qt.WECHAT}function ax(){return window.navigator.appVersion&&window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)!==null&&window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)[1]<=35}function ru(){const n=Ht();return n.name===qt.EDGE||n.name===qt.SAFARI?!1:!!navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]./i)}function T0(){return QN()===qr.ANDROID}function Ip(){const n=Ht();return T0()&&(n.name===qt.CHROME||n.name===qt.WECHAT||/chrome|chromium/i.test(navigator.userAgent))}(function(n){n.L1T1="L1T1",n.L1T2="L1T2",n.L1T3="L1T3",n.L2T1_KEY="L2T1_KEY",n.L2T2_KEY="L2T2_KEY",n.L2T3_KEY="L2T3_KEY",n.L3T1_KEY="L3T1_KEY",n.L3T2_KEY="L3T2_KEY",n.L3T3_KEY="L3T3_KEY"})(Qy||(Qy={})),function(n){n.CERTIFICATE="certificate",n.CODEC="codec",n.CANDIDATE_PAIR="candidate-pair",n.LOCAL_CANDIDATE="local-candidate",n.REMOTE_CANDIDATE="remote-candidate",n.INBOUND="inbound-rtp",n.TRACK="track",n.OUTBOUND="outbound-rtp",n.PC="peer-connection",n.REMOTE_INBOUND="remote-inbound-rtp",n.REMOTE_OUTBOUND="remote-outbound-rtp",n.TRANSPORT="transport",n.CSRC="csrc",n.DATA_CHANNEL="data-channel",n.STREAM="stream",n.SENDER="sender",n.RECEIVER="receiver"}(wo||(wo={}));var sx={exports:{}},TK=ki,RK=j,cx=Qa.f;TK({target:"Object",stat:!0,forced:Object.defineProperty!==cx,sham:!RK},{defineProperty:cx});var lx=Ye.Object,IK=sx.exports=function(n,r,o){return lx.defineProperty(n,r,o)};lx.defineProperty.sham&&(IK.sham=!0);var ux=sx.exports;function N(n,r,o){return r in n?ux(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,n}var rS,iS={exports:{}},dx=function(n,r){return function(){for(var o=new Array(arguments.length),s=0;s<o.length;s++)o[s]=arguments[s];return n.apply(r,o)}},wK=dx,oS=Object.prototype.toString,aS=(rS=Object.create(null),function(n){var r=oS.call(n);return rS[r]||(rS[r]=r.slice(8,-1).toLowerCase())});function iu(n){return n=n.toLowerCase(),function(r){return aS(r)===n}}function sS(n){return Array.isArray(n)}function R0(n){return n===void 0}var hx=iu("ArrayBuffer");function px(n){return n!==null&&typeof n=="object"}function I0(n){if(aS(n)!=="object")return!1;var r=Object.getPrototypeOf(n);return r===null||r===Object.prototype}var OK=iu("Date"),AK=iu("File"),NK=iu("Blob"),xK=iu("FileList");function cS(n){return oS.call(n)==="[object Function]"}var PK=iu("URLSearchParams");function lS(n,r){if(n!=null)if(typeof n!="object"&&(n=[n]),sS(n))for(var o=0,s=n.length;o<s;o++)r.call(null,n[o],o,n);else for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&r.call(null,n[l],l,n)}var uS,DK=(uS=typeof Uint8Array<"u"&&Object.getPrototypeOf(Uint8Array),function(n){return uS&&n instanceof uS}),Li={isArray:sS,isArrayBuffer:hx,isBuffer:function(n){return n!==null&&!R0(n)&&n.constructor!==null&&!R0(n.constructor)&&typeof n.constructor.isBuffer=="function"&&n.constructor.isBuffer(n)},isFormData:function(n){var r="[object FormData]";return n&&(typeof FormData=="function"&&n instanceof FormData||oS.call(n)===r||cS(n.toString)&&n.toString()===r)},isArrayBufferView:function(n){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(n):n&&n.buffer&&hx(n.buffer)},isString:function(n){return typeof n=="string"},isNumber:function(n){return typeof n=="number"},isObject:px,isPlainObject:I0,isUndefined:R0,isDate:OK,isFile:AK,isBlob:NK,isFunction:cS,isStream:function(n){return px(n)&&cS(n.pipe)},isURLSearchParams:PK,isStandardBrowserEnv:function(){return(typeof navigator>"u"||navigator.product!=="ReactNative"&&navigator.product!=="NativeScript"&&navigator.product!=="NS")&&typeof window<"u"&&typeof document<"u"},forEach:lS,merge:function n(){var r={};function o(h,p){I0(r[p])&&I0(h)?r[p]=n(r[p],h):I0(h)?r[p]=n({},h):sS(h)?r[p]=h.slice():r[p]=h}for(var s=0,l=arguments.length;s<l;s++)lS(arguments[s],o);return r},extend:function(n,r,o){return lS(r,function(s,l){n[l]=o&&typeof s=="function"?wK(s,o):s}),n},trim:function(n){return n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")},stripBOM:function(n){return n.charCodeAt(0)===65279&&(n=n.slice(1)),n},inherits:function(n,r,o,s){n.prototype=Object.create(r.prototype,s),n.prototype.constructor=n,o&&Object.assign(n.prototype,o)},toFlatObject:function(n,r,o){var s,l,h,p={};r=r||{};do{for(l=(s=Object.getOwnPropertyNames(n)).length;l-- >0;)p[h=s[l]]||(r[h]=n[h],p[h]=!0);n=Object.getPrototypeOf(n)}while(n&&(!o||o(n,r))&&n!==Object.prototype);return r},kindOf:aS,kindOfTest:iu,endsWith:function(n,r,o){n=String(n),(o===void 0||o>n.length)&&(o=n.length),o-=r.length;var s=n.indexOf(r,o);return s!==-1&&s===o},toArray:function(n){if(!n)return null;var r=n.length;if(R0(r))return null;for(var o=new Array(r);r-- >0;)o[r]=n[r];return o},isTypedArray:DK,isFileList:xK},gd=Li;function fx(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var mx=function(n,r,o){if(!r)return n;var s;if(o)s=o(r);else if(gd.isURLSearchParams(r))s=r.toString();else{var l=[];gd.forEach(r,function(p,v){p!=null&&(gd.isArray(p)?v+="[]":p=[p],gd.forEach(p,function(E){gd.isDate(E)?E=E.toISOString():gd.isObject(E)&&(E=JSON.stringify(E)),l.push(fx(v)+"="+fx(E))}))}),s=l.join("&")}if(s){var h=n.indexOf("#");h!==-1&&(n=n.slice(0,h)),n+=(n.indexOf("?")===-1?"?":"&")+s}return n},kK=Li;function w0(){this.handlers=[]}w0.prototype.use=function(n,r,o){return this.handlers.push({fulfilled:n,rejected:r,synchronous:!!o&&o.synchronous,runWhen:o?o.runWhen:null}),this.handlers.length-1},w0.prototype.eject=function(n){this.handlers[n]&&(this.handlers[n]=null)},w0.prototype.forEach=function(n){kK.forEach(this.handlers,function(r){r!==null&&n(r)})};var LK=w0,MK=Li,gx=Li;function vd(n,r,o,s,l){Error.call(this),this.message=n,this.name="AxiosError",r&&(this.code=r),o&&(this.config=o),s&&(this.request=s),l&&(this.response=l)}gx.inherits(vd,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var vx=vd.prototype,Ex={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach(function(n){Ex[n]={value:n}}),Object.defineProperties(vd,Ex),Object.defineProperty(vx,"isAxiosError",{value:!0}),vd.from=function(n,r,o,s,l,h){var p=Object.create(vx);return gx.toFlatObject(n,p,function(v){return v!==Error.prototype}),vd.call(p,n.message,r,o,s,l),p.name=n.name,h&&Object.assign(p,h),p};var Ed=vd,_x={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},es=Li,yx=function(n,r){r=r||new FormData;var o=[];function s(l){return l===null?"":es.isDate(l)?l.toISOString():es.isArrayBuffer(l)||es.isTypedArray(l)?typeof Blob=="function"?new Blob([l]):Buffer.from(l):l}return function l(h,p){if(es.isPlainObject(h)||es.isArray(h)){if(o.indexOf(h)!==-1)throw Error("Circular reference detected in "+p);o.push(h),es.forEach(h,function(v,E){if(!es.isUndefined(v)){var T,C=p?p+"."+E:E;if(v&&!p&&typeof v=="object"){if(es.endsWith(E,"{}"))v=JSON.stringify(v);else if(es.endsWith(E,"[]")&&(T=es.toArray(v)))return void T.forEach(function(I){!es.isUndefined(I)&&r.append(C,s(I))})}l(v,C)}}),o.pop()}else r.append(p,s(h))}(n),r},dS=Ed,O0=Li,UK=O0.isStandardBrowserEnv()?{write:function(n,r,o,s,l,h){var p=[];p.push(n+"="+encodeURIComponent(r)),O0.isNumber(o)&&p.push("expires="+new Date(o).toGMTString()),O0.isString(s)&&p.push("path="+s),O0.isString(l)&&p.push("domain="+l),h===!0&&p.push("secure"),document.cookie=p.join("; ")},read:function(n){var r=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},jK=function(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)},FK=function(n,r){return r?n.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):n},Sx=function(n,r){return n&&!jK(r)?FK(n,r):r},hS=Li,VK=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],Cx=Li,BK=Cx.isStandardBrowserEnv()?function(){var n,r=/(msie|trident)/i.test(navigator.userAgent),o=document.createElement("a");function s(l){var h=l;return r&&(o.setAttribute("href",h),h=o.href),o.setAttribute("href",h),{href:o.href,protocol:o.protocol?o.protocol.replace(/:$/,""):"",host:o.host,search:o.search?o.search.replace(/^\?/,""):"",hash:o.hash?o.hash.replace(/^#/,""):"",hostname:o.hostname,port:o.port,pathname:o.pathname.charAt(0)==="/"?o.pathname:"/"+o.pathname}}return n=s(window.location.href),function(l){var h=Cx.isString(l)?s(l):l;return h.protocol===n.protocol&&h.host===n.host}}():function(){return!0},pS=Ed;function bx(n){pS.call(this,n??"canceled",pS.ERR_CANCELED),this.name="CanceledError"}Li.inherits(bx,pS,{__CANCEL__:!0});var A0=bx,wp=Li,$K=function(n,r,o){var s=o.config.validateStatus;o.status&&s&&!s(o.status)?r(new dS("Request failed with status code "+o.status,[dS.ERR_BAD_REQUEST,dS.ERR_BAD_RESPONSE][Math.floor(o.status/100)-4],o.config,o.request,o)):n(o)},HK=UK,WK=mx,GK=Sx,zK=function(n){var r,o,s,l={};return n&&hS.forEach(n.split(`
`),function(h){if(s=h.indexOf(":"),r=hS.trim(h.substr(0,s)).toLowerCase(),o=hS.trim(h.substr(s+1)),r){if(l[r]&&VK.indexOf(r)>=0)return;l[r]=r==="set-cookie"?(l[r]?l[r]:[]).concat([o]):l[r]?l[r]+", "+o:o}}),l},KK=BK,YK=_x,sc=Ed,qK=A0,XK=function(n){var r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return r&&r[1]||""},JK=function(n){return new Promise(function(r,o){var s,l=n.data,h=n.headers,p=n.responseType;function v(){n.cancelToken&&n.cancelToken.unsubscribe(s),n.signal&&n.signal.removeEventListener("abort",s)}wp.isFormData(l)&&wp.isStandardBrowserEnv()&&delete h["Content-Type"];var E=new XMLHttpRequest;if(n.auth){var T=n.auth.username||"",C=n.auth.password?unescape(encodeURIComponent(n.auth.password)):"";h.Authorization="Basic "+btoa(T+":"+C)}var I=GK(n.baseURL,n.url);function L(){if(E){var q="getAllResponseHeaders"in E?zK(E.getAllResponseHeaders()):null,X={data:p&&p!=="text"&&p!=="json"?E.response:E.responseText,status:E.status,statusText:E.statusText,headers:q,config:n,request:E};$K(function(le){r(le),v()},function(le){o(le),v()},X),E=null}}if(E.open(n.method.toUpperCase(),WK(I,n.params,n.paramsSerializer),!0),E.timeout=n.timeout,"onloadend"in E?E.onloadend=L:E.onreadystatechange=function(){E&&E.readyState===4&&(E.status!==0||E.responseURL&&E.responseURL.indexOf("file:")===0)&&setTimeout(L)},E.onabort=function(){E&&(o(new sc("Request aborted",sc.ECONNABORTED,n,E)),E=null)},E.onerror=function(){o(new sc("Network Error",sc.ERR_NETWORK,n,E,E)),E=null},E.ontimeout=function(){var q=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded",X=n.transitional||YK;n.timeoutErrorMessage&&(q=n.timeoutErrorMessage),o(new sc(q,X.clarifyTimeoutError?sc.ETIMEDOUT:sc.ECONNABORTED,n,E)),E=null},wp.isStandardBrowserEnv()){var V=(n.withCredentials||KK(I))&&n.xsrfCookieName?HK.read(n.xsrfCookieName):void 0;V&&(h[n.xsrfHeaderName]=V)}"setRequestHeader"in E&&wp.forEach(h,function(q,X){l===void 0&&X.toLowerCase()==="content-type"?delete h[X]:E.setRequestHeader(X,q)}),wp.isUndefined(n.withCredentials)||(E.withCredentials=!!n.withCredentials),p&&p!=="json"&&(E.responseType=n.responseType),typeof n.onDownloadProgress=="function"&&E.addEventListener("progress",n.onDownloadProgress),typeof n.onUploadProgress=="function"&&E.upload&&E.upload.addEventListener("progress",n.onUploadProgress),(n.cancelToken||n.signal)&&(s=function(q){E&&(o(!q||q&&q.type?new qK:q),E.abort(),E=null)},n.cancelToken&&n.cancelToken.subscribe(s),n.signal&&(n.signal.aborted?s():n.signal.addEventListener("abort",s))),l||(l=null);var Y=XK(I);Y&&["http","https","file"].indexOf(Y)===-1?o(new sc("Unsupported protocol "+Y+":",sc.ERR_BAD_REQUEST,n)):E.send(l)})},Ri=Li,Tx=function(n,r){MK.forEach(n,function(o,s){s!==r&&s.toUpperCase()===r.toUpperCase()&&(n[r]=o,delete n[s])})},Rx=Ed,QK=yx,ZK={"Content-Type":"application/x-www-form-urlencoded"};function Ix(n,r){!Ri.isUndefined(n)&&Ri.isUndefined(n["Content-Type"])&&(n["Content-Type"]=r)}var wx,N0={transitional:_x,adapter:((typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(wx=JK),wx),transformRequest:[function(n,r){if(Tx(r,"Accept"),Tx(r,"Content-Type"),Ri.isFormData(n)||Ri.isArrayBuffer(n)||Ri.isBuffer(n)||Ri.isStream(n)||Ri.isFile(n)||Ri.isBlob(n))return n;if(Ri.isArrayBufferView(n))return n.buffer;if(Ri.isURLSearchParams(n))return Ix(r,"application/x-www-form-urlencoded;charset=utf-8"),n.toString();var o,s=Ri.isObject(n),l=r&&r["Content-Type"];if((o=Ri.isFileList(n))||s&&l==="multipart/form-data"){var h=this.env&&this.env.FormData;return QK(o?{"files[]":n}:n,h&&new h)}return s||l==="application/json"?(Ix(r,"application/json"),function(p,v,E){if(Ri.isString(p))try{return(v||JSON.parse)(p),Ri.trim(p)}catch(T){if(T.name!=="SyntaxError")throw T}return(E||JSON.stringify)(p)}(n)):n}],transformResponse:[function(n){var r=this.transitional||N0.transitional,o=r&&r.silentJSONParsing,s=r&&r.forcedJSONParsing,l=!o&&this.responseType==="json";if(l||s&&Ri.isString(n)&&n.length)try{return JSON.parse(n)}catch(h){if(l)throw h.name==="SyntaxError"?Rx.from(h,Rx.ERR_BAD_RESPONSE,this,null,this.response):h}return n}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:null},validateStatus:function(n){return n>=200&&n<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Ri.forEach(["delete","get","head"],function(n){N0.headers[n]={}}),Ri.forEach(["post","put","patch"],function(n){N0.headers[n]=Ri.merge(ZK)});var fS=N0,eY=Li,tY=fS,Ox=function(n){return!(!n||!n.__CANCEL__)},Ax=Li,mS=function(n,r,o){var s=this||tY;return eY.forEach(o,function(l){n=l.call(s,n,r)}),n},nY=Ox,rY=fS,iY=A0;function gS(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new iY}var Zo=Li,Nx=function(n,r){r=r||{};var o={};function s(T,C){return Zo.isPlainObject(T)&&Zo.isPlainObject(C)?Zo.merge(T,C):Zo.isPlainObject(C)?Zo.merge({},C):Zo.isArray(C)?C.slice():C}function l(T){return Zo.isUndefined(r[T])?Zo.isUndefined(n[T])?void 0:s(void 0,n[T]):s(n[T],r[T])}function h(T){if(!Zo.isUndefined(r[T]))return s(void 0,r[T])}function p(T){return Zo.isUndefined(r[T])?Zo.isUndefined(n[T])?void 0:s(void 0,n[T]):s(void 0,r[T])}function v(T){return T in r?s(n[T],r[T]):T in n?s(void 0,n[T]):void 0}var E={url:h,method:h,data:h,baseURL:p,transformRequest:p,transformResponse:p,paramsSerializer:p,timeout:p,timeoutMessage:p,withCredentials:p,adapter:p,responseType:p,xsrfCookieName:p,xsrfHeaderName:p,onUploadProgress:p,onDownloadProgress:p,decompress:p,maxContentLength:p,maxBodyLength:p,beforeRedirect:p,transport:p,httpAgent:p,httpsAgent:p,cancelToken:p,socketPath:p,responseEncoding:p,validateStatus:v};return Zo.forEach(Object.keys(n).concat(Object.keys(r)),function(T){var C=E[T]||l,I=C(T);Zo.isUndefined(I)&&C!==v||(o[T]=I)}),o},xx="0.27.2",oY=xx,Jc=Ed,vS={};["object","boolean","number","function","string","symbol"].forEach(function(n,r){vS[n]=function(o){return typeof o===n||"a"+(r<1?"n ":" ")+n}});var Px={};vS.transitional=function(n,r,o){function s(l,h){return"[Axios v"+oY+"] Transitional option '"+l+"'"+h+(o?". "+o:"")}return function(l,h,p){if(n===!1)throw new Jc(s(h," has been removed"+(r?" in "+r:"")),Jc.ERR_DEPRECATED);return r&&!Px[h]&&(Px[h]=!0,console.warn(s(h," has been deprecated since v"+r+" and will be removed in the near future"))),!n||n(l,h,p)}};var Dx=Li,aY=mx,kx=LK,Lx=function(n){return gS(n),n.headers=n.headers||{},n.data=mS.call(n,n.data,n.headers,n.transformRequest),n.headers=Ax.merge(n.headers.common||{},n.headers[n.method]||{},n.headers),Ax.forEach(["delete","get","head","post","put","patch","common"],function(r){delete n.headers[r]}),(n.adapter||rY.adapter)(n).then(function(r){return gS(n),r.data=mS.call(n,r.data,r.headers,n.transformResponse),r},function(r){return nY(r)||(gS(n),r&&r.response&&(r.response.data=mS.call(n,r.response.data,r.response.headers,n.transformResponse))),Promise.reject(r)})},x0=Nx,sY=Sx,Mx={assertOptions:function(n,r,o){if(typeof n!="object")throw new Jc("options must be an object",Jc.ERR_BAD_OPTION_VALUE);for(var s=Object.keys(n),l=s.length;l-- >0;){var h=s[l],p=r[h];if(p){var v=n[h],E=v===void 0||p(v,h,n);if(E!==!0)throw new Jc("option "+h+" must be "+E,Jc.ERR_BAD_OPTION_VALUE)}else if(o!==!0)throw new Jc("Unknown option "+h,Jc.ERR_BAD_OPTION)}},validators:vS},_d=Mx.validators;function yd(n){this.defaults=n,this.interceptors={request:new kx,response:new kx}}yd.prototype.request=function(n,r){typeof n=="string"?(r=r||{}).url=n:r=n||{},(r=x0(this.defaults,r)).method?r.method=r.method.toLowerCase():this.defaults.method?r.method=this.defaults.method.toLowerCase():r.method="get";var o=r.transitional;o!==void 0&&Mx.assertOptions(o,{silentJSONParsing:_d.transitional(_d.boolean),forcedJSONParsing:_d.transitional(_d.boolean),clarifyTimeoutError:_d.transitional(_d.boolean)},!1);var s=[],l=!0;this.interceptors.request.forEach(function(I){typeof I.runWhen=="function"&&I.runWhen(r)===!1||(l=l&&I.synchronous,s.unshift(I.fulfilled,I.rejected))});var h,p=[];if(this.interceptors.response.forEach(function(I){p.push(I.fulfilled,I.rejected)}),!l){var v=[Lx,void 0];for(Array.prototype.unshift.apply(v,s),v=v.concat(p),h=Promise.resolve(r);v.length;)h=h.then(v.shift(),v.shift());return h}for(var E=r;s.length;){var T=s.shift(),C=s.shift();try{E=T(E)}catch(I){C(I);break}}try{h=Lx(E)}catch(I){return Promise.reject(I)}for(;p.length;)h=h.then(p.shift(),p.shift());return h},yd.prototype.getUri=function(n){n=x0(this.defaults,n);var r=sY(n.baseURL,n.url);return aY(r,n.params,n.paramsSerializer)},Dx.forEach(["delete","get","head","options"],function(n){yd.prototype[n]=function(r,o){return this.request(x0(o||{},{method:n,url:r,data:(o||{}).data}))}}),Dx.forEach(["post","put","patch"],function(n){function r(o){return function(s,l,h){return this.request(x0(h||{},{method:n,headers:o?{"Content-Type":"multipart/form-data"}:{},url:s,data:l}))}}yd.prototype[n]=r(),yd.prototype[n+"Form"]=r(!0)});var cY=yd,lY=A0;function Sd(n){if(typeof n!="function")throw new TypeError("executor must be a function.");var r;this.promise=new Promise(function(s){r=s});var o=this;this.promise.then(function(s){if(o._listeners){var l,h=o._listeners.length;for(l=0;l<h;l++)o._listeners[l](s);o._listeners=null}}),this.promise.then=function(s){var l,h=new Promise(function(p){o.subscribe(p),l=p}).then(s);return h.cancel=function(){o.unsubscribe(l)},h},n(function(s){o.reason||(o.reason=new lY(s),r(o.reason))})}Sd.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},Sd.prototype.subscribe=function(n){this.reason?n(this.reason):this._listeners?this._listeners.push(n):this._listeners=[n]},Sd.prototype.unsubscribe=function(n){if(this._listeners){var r=this._listeners.indexOf(n);r!==-1&&this._listeners.splice(r,1)}},Sd.source=function(){var n;return{token:new Sd(function(r){n=r}),cancel:n}};var uY=Sd,dY=Li,Ux=Li,hY=dx,P0=cY,pY=Nx,Oo=function n(r){var o=new P0(r),s=hY(P0.prototype.request,o);return Ux.extend(s,P0.prototype,o),Ux.extend(s,o),s.create=function(l){return n(pY(r,l))},s}(fS);Oo.Axios=P0,Oo.CanceledError=A0,Oo.CancelToken=uY,Oo.isCancel=Ox,Oo.VERSION=xx,Oo.toFormData=yx,Oo.AxiosError=Ed,Oo.Cancel=Oo.CanceledError,Oo.all=function(n){return Promise.all(n)},Oo.spread=function(n){return function(r){return n.apply(null,r)}},Oo.isAxiosError=function(n){return dY.isObject(n)&&n.isAxiosError===!0},iS.exports=Oo,iS.exports.default=Oo;var Ao=iS.exports;class fY{constructor(r){N(this,"logger",void 0),N(this,"prefixLists",[]),this.logger=r}debug(){for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];this.logger.debug(...this.prefixLists,...o)}info(){for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];this.logger.info(...this.prefixLists,...o)}warning(){for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];this.logger.warning(...this.prefixLists,...o)}error(){for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];this.logger.error(...this.prefixLists,...o)}prefix(r){return this.prefixLists.push(r),this}popPrefix(){return this.prefixLists.pop(),this}}class Rn{constructor(){N(this,"_events",{}),N(this,"addListener",this.on)}getListeners(r){return this._events[r]?this._events[r].map(o=>o.listener):[]}on(r,o){this._events[r]||(this._events[r]=[]);const s=this._events[r];this._indexOfListener(s,o)===-1&&s.push({listener:o,once:!1})}once(r,o){this._events[r]||(this._events[r]=[]);const s=this._events[r];this._indexOfListener(s,o)===-1&&s.push({listener:o,once:!0})}off(r,o){if(!this._events[r])return;const s=this._events[r],l=this._indexOfListener(s,o);l!==-1&&s.splice(l,1),this._events[r].length===0&&delete this._events[r]}removeAllListeners(r){r?delete this._events[r]:this._events={}}emit(r){this._events[r]||(this._events[r]=[]);const o=this._events[r].map(p=>p);for(var s=arguments.length,l=new Array(s>1?s-1:0),h=1;h<s;h++)l[h-1]=arguments[h];for(let p=0;p<o.length;p+=1){const v=o[p];v.once&&this.off(r,v.listener),v.listener.apply(this,l||[])}}safeEmit(r){for(var o=arguments.length,s=new Array(o>1?o-1:0),l=1;l<o;l++)s[l-1]=arguments[l];[...this._events[r]||[]].forEach(h=>{h.once&&this.off(r,h.listener);try{h.listener.apply(this,s)}catch(p){U.error("safeEmit event:".concat(r," error ").concat(p==null?void 0:p.toString()))}})}_indexOfListener(r,o){let s=r.length;for(;s--;)if(r[s].listener===o)return s;return-1}}const D0=new class extends Rn{reportLogUploadError(n){this.emit("REPORT_LOG_UPLOAD",n)}};let W;(function(n){n.UNEXPECTED_ERROR="UNEXPECTED_ERROR",n.UNEXPECTED_RESPONSE="UNEXPECTED_RESPONSE",n.TIMEOUT="TIMEOUT",n.INVALID_PARAMS="INVALID_PARAMS",n.NOT_READABLE="NOT_READABLE",n.NOT_SUPPORTED="NOT_SUPPORTED",n.INVALID_OPERATION="INVALID_OPERATION",n.OPERATION_ABORTED="OPERATION_ABORTED",n.WEB_SECURITY_RESTRICT="WEB_SECURITY_RESTRICT",n.EXCHANGE_SDP_FAILED="EXCHANGE_SDP_FAILED",n.NETWORK_ERROR="NETWORK_ERROR",n.NETWORK_TIMEOUT="NETWORK_TIMEOUT",n.NETWORK_RESPONSE_ERROR="NETWORK_RESPONSE_ERROR",n.API_INVOKE_TIMEOUT="API_INVOKE_TIMEOUT",n.ENUMERATE_DEVICES_FAILED="ENUMERATE_DEVICES_FAILED",n.DEVICE_NOT_FOUND="DEVICE_NOT_FOUND",n.ELECTRON_IS_NULL="ELECTRON_IS_NULL",n.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR="ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR",n.CHROME_PLUGIN_NO_RESPONSE="CHROME_PLUGIN_NO_RESPONSE",n.CHROME_PLUGIN_NOT_INSTALL="CHROME_PLUGIN_NOT_INSTALL",n.MEDIA_OPTION_INVALID="MEDIA_OPTION_INVALID",n.PERMISSION_DENIED="PERMISSION_DENIED",n.CONSTRAINT_NOT_SATISFIED="CONSTRAINT_NOT_SATISFIED",n.TRACK_IS_DISABLED="TRACK_IS_DISABLED",n.GET_VIDEO_ELEMENT_VISIBLE_ERROR="GET_VIDEO_ELEMENT_VISIBLE_ERROR",n.SHARE_AUDIO_NOT_ALLOWED="SHARE_AUDIO_NOT_ALLOWED",n.LOW_STREAM_ENCODING_ERROR="LOW_STREAM_ENCODING_ERROR",n.SET_ENCODING_PARAMETER_ERROR="SET_ENCODING_PARAMETER_ERROR",n.TRACK_STATE_UNREACHABLE="TRACK_STATE_UNREACHABLE",n.INVALID_UINT_UID_FROM_STRING_UID="INVALID_UINT_UID_FROM_STRING_UID",n.CAN_NOT_GET_PROXY_SERVER="CAN_NOT_GET_PROXY_SERVER",n.CAN_NOT_GET_GATEWAY_SERVER="CAN_NOT_GET_GATEWAY_SERVER",n.VOID_GATEWAY_ADDRESS="VOID_GATEWAY_ADDRESS",n.UID_CONFLICT="UID_CONFLICT",n.MULTI_UNILBS_RESPONSE_ERROR="MULTI_UNILBS_RESPONSE_ERROR",n.UPDATE_TICKET_FAILED="UPDATE_TICKET_FAILED",n.INVALID_LOCAL_TRACK="INVALID_LOCAL_TRACK",n.INVALID_TRACK="INVALID_TRACK",n.SENDER_NOT_FOUND="SENDER_NOT_FOUND",n.CREATE_OFFER_FAILED="CREATE_OFFER_FAILED",n.SET_ANSWER_FAILED="SET_ANSWER_FAILED",n.ICE_FAILED="ICE_FAILED",n.PC_CLOSED="PC_CLOSED",n.SENDER_REPLACE_FAILED="SENDER_REPLACE_FAILED",n.GET_LOCAL_CAPABILITIES_FAILED="GET_LOCAL_CAPABILITIES_FAILED",n.GET_LOCAL_CONNECTION_PARAMS_FAILED="GET_LOCAL_CONNECTION_PARAMS_FAILED",n.SUBSCRIBE_FAILED="SUBSCRIBE_FAILED",n.UNSUBSCRIBE_FAILED="UNSUBSCRIBE_FAILED",n.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",n.NO_ICE_CANDIDATE="NO_ICE_CANDIDATE",n.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS="CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS",n.EXIST_DISABLED_VIDEO_TRACK="EXIST_DISABLED_VIDEO_TRACK",n.INVALID_REMOTE_USER="INVALID_REMOTE_USER",n.REMOTE_USER_IS_NOT_PUBLISHED="REMOTE_USER_IS_NOT_PUBLISHED",n.CUSTOM_REPORT_SEND_FAILED="CUSTOM_REPORT_SEND_FAILED",n.CUSTOM_REPORT_FREQUENCY_TOO_HIGH="CUSTOM_REPORT_FREQUENCY_TOO_HIGH",n.FETCH_AUDIO_FILE_FAILED="FETCH_AUDIO_FILE_FAILED",n.READ_LOCAL_AUDIO_FILE_ERROR="READ_LOCAL_AUDIO_FILE_ERROR",n.DECODE_AUDIO_FILE_FAILED="DECODE_AUDIO_FILE_FAILED",n.WS_ABORT="WS_ABORT",n.WS_DISCONNECT="WS_DISCONNECT",n.WS_ERR="WS_ERR",n.LIVE_STREAMING_TASK_CONFLICT="LIVE_STREAMING_TASK_CONFLICT",n.LIVE_STREAMING_INVALID_ARGUMENT="LIVE_STREAMING_INVALID_ARGUMENT",n.LIVE_STREAMING_INTERNAL_SERVER_ERROR="LIVE_STREAMING_INTERNAL_SERVER_ERROR",n.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED="LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED",n.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED="LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED",n.LIVE_STREAMING_CDN_ERROR="LIVE_STREAMING_CDN_ERROR",n.LIVE_STREAMING_INVALID_RAW_STREAM="LIVE_STREAMING_INVALID_RAW_STREAM",n.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT="LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT",n.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE="LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE",n.LIVE_STREAMING_WARN_FREQUENT_REQUEST="LIVE_STREAMING_WARN_FREQUENT_REQUEST",n.WEBGL_INTERNAL_ERROR="WEBGL_INTERNAL_ERROR",n.BEAUTY_PROCESSOR_INTERNAL_ERROR="BEAUTY_PROCESSOR_INTERNAL_ERROR",n.CROSS_CHANNEL_WAIT_STATUS_ERROR="CROSS_CHANNEL_WAIT_STATUS_ERROR",n.CROSS_CHANNEL_FAILED_JOIN_SRC="CROSS_CHANNEL_FAILED_JOIN_SEC",n.CROSS_CHANNEL_FAILED_JOIN_DEST="CROSS_CHANNEL_FAILED_JOIN_DEST",n.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST="CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST",n.CROSS_CHANNEL_SERVER_ERROR_RESPONSE="CROSS_CHANNEL_SERVER_ERROR_RESPONSE",n.METADATA_OUT_OF_RANGE="METADATA_OUT_OF_RANGE",n.LOCAL_AEC_ERROR="LOCAL_AEC_ERROR",n.INVALID_PLUGIN="INVALID_PLUGIN",n.DISCONNECT_P2P="DISCONNECT_P2P",n.INIT_WEBSOCKET_TIMEOUT="INIT_WEBSOCKET_TIMEOUT",n.CONVERTING_IMAGEDATA_TO_BLOB_FAILED="CONVERTING_IMAGEDATA_TO_BLOB_FAILED",n.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED="CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED",n.INIT_DATACHANNEL_TIMEOUT="INIT_DATACHANNEL_TIMEOUT",n.DATACHANNEL_CONNECTION_TIMEOUT="DATACHANNEL_CONNECTION_TIMEOUT",n.PROHIBITED_OPERATION="PROHIBITED_OPERATION",n.IMAGE_MODERATION_UPLOAD_FAILED="IMAGE_MODERATION_UPLOAD_FAILED"})(W||(W={}));class Q extends Error{constructor(r){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",s=arguments.length>2?arguments[2]:void 0;super(o),N(this,"code",void 0),N(this,"message",void 0),N(this,"data",void 0),N(this,"name","AgoraRTCException"),this.code=r,this.message="AgoraRTCError ".concat(this.code,": ").concat(o),this.data=s}toString(){return this.data?"data: ".concat(JSON.stringify(this.data),`
`).concat(this.stack):"".concat(this.stack)}print(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"error";return r==="error"&&U.error(this.toString()),r==="warning"&&U.warning(this.toString()),this}throw(){throw this.print(),this}}const Qn={timeout:500,timeoutFactor:1.5,maxRetryCount:1/0,maxRetryTimeout:1e4};function ES(n,r){const o=Math.floor(r.timeout*Math.pow(r.timeoutFactor,n));return Math.min(r.maxRetryTimeout,o)}function ts(n,r,o,s){const l=Object.assign({},Qn,s);let h=l.timeout;const p=async()=>{await function(T){return new xe(C=>{window.setTimeout(C,T)})}(h),h*=l.timeoutFactor,h=Math.min(l.maxRetryTimeout,h)};let v=!1;const E=new xe(async(T,C)=>{r=r||(()=>!1),o=o||(()=>!0);for(let I=0;I<l.maxRetryCount;I+=1){if(v)return C(new Q(W.OPERATION_ABORTED));try{const L=await n();if(!r(L,I)||I+1===l.maxRetryCount)return T(L);await p()}catch(L){if(!o(L,I)||I+1===l.maxRetryCount)return C(L);await p()}}});return E.cancel=()=>v=!0,E}function _S(){const n=new Date;return n.toTimeString().split(" ")[0]+":"+n.getMilliseconds()}function jx(){const n=new Date,r=/((\d+:){2}\d+)/.exec(new Date().toUTCString());return r?(r==null?void 0:r[0])+":"+n.getUTCMilliseconds():n.toTimeString().split(" ")[0]+":"+n.getMilliseconds()}const ea={DEBUG:0,INFO:1,WARNING:2,ERROR:3,NONE:4},k0=Date.now(),Op=n=>{for(const r in ea)if(Object.prototype.hasOwnProperty.call(ea,r)&&ea[r]===n)return r;return"DEFAULT"},U=new class{constructor(){N(this,"proxyServerURL",void 0),N(this,"logLevel",ea.DEBUG),N(this,"uploadState","collecting"),N(this,"uploadLogWaitingList",[]),N(this,"uploadLogUploadingList",[]),N(this,"uploadErrorCount",0),N(this,"currentLogID",0),N(this,"url",void 0),N(this,"extLog",(n,r)=>{this.appendLogToWaitingList(n,...r)})}debug(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];const s=[ea.DEBUG].concat(r);this.log.apply(this,s)}info(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];const s=[ea.INFO].concat(r);this.log.apply(this,s)}warning(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];const s=[ea.WARNING].concat(r);this.log.apply(this,s)}error(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];const s=[ea.ERROR].concat(r);this.log.apply(this,s)}upload(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];const s=[ea.DEBUG].concat(r);this.uploadLog.apply(this,s)}setLogLevel(n){n=Math.min(Math.max(0,n),4),this.logLevel=n}enableLogUpload(){rn("UPLOAD_LOG",!0)}disableLogUpload(){rn("UPLOAD_LOG",!1),this.uploadLogUploadingList=[],this.uploadLogWaitingList=[]}setProxyServer(n){this.proxyServerURL=n}prefix(n){return new fY(this).prefix(n)}log(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];if(Date.now()-k0<100)return void setTimeout(()=>{this.log(...r)},Date.now()-k0);const s=Math.max(0,Math.min(4,r[0]));if(r[0]=_S()+" Agora-SDK [".concat(Op(s),"]:"),this.appendLogToWaitingList(s,...r),s<this.logLevel)return;const l=_S()+" %cAgora-SDK [".concat(Op(s),"]:");let h=[];if(!ie("USE_NEW_LOG"))switch(s){case ea.DEBUG:h=[l,"color: #64B5F6;"].concat(r.slice(1)),console.log.apply(console,h);break;case ea.INFO:h=[l,"color: #1E88E5; font-weight: bold;"].concat(r.slice(1)),console.log.apply(console,h);break;case ea.WARNING:h=[l,"color: #FB8C00; font-weight: bold;"].concat(r.slice(1)),console.warn.apply(console,h);break;case ea.ERROR:h=[l,"color: #B00020; font-weight: bold;"].concat(r.slice(1)),console.error.apply(console,h)}}uploadLog(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];if(Date.now()-k0<100)return void setTimeout(()=>{this.uploadLog(...r)},Date.now()-k0);const s=Math.max(0,Math.min(4,r[0]));r[0]=_S()+" Agora-SDK [".concat(Op(s),"]:"),this.appendLogToWaitingList(s,...r)}appendLogToWaitingList(n){if(!ie("UPLOAD_LOG"))return;for(var r=arguments.length,o=new Array(r>1?r-1:0),s=1;s<r;s++)o[s-1]=arguments[s];Array.isArray(o[0])?o[0][0]=jx()+" Agora-SDK [".concat(Op(n),"]:"):o[0]=jx()+" Agora-SDK [".concat(Op(n),"]:");let l="";o.forEach(h=>{typeof h=="object"&&(h=JSON.stringify(h)),l+="".concat(h," ")}),this.uploadLogWaitingList.push({payload_str:l,log_level:n,log_item_id:this.currentLogID++}),this.uploadState==="uploading"&&this.uploadLogUploadingList.length===0&&this.uploadLogInterval()}startUpload(){this.uploadState="uploading",this.uploadLogUploadingList.length===0&&this.uploadLogInterval()}async uploadLogs(){const n=this.uploadLogUploadingList,r={sdk_version:ta,process_id:ie("PROCESS_ID"),payload:JSON.stringify(n)};return ts(async()=>{const o=await Ao.post(this.url||(this.proxyServerURL?"https://".concat(this.proxyServerURL,"/ls/?h=").concat(ie("LOG_UPLOAD_SERVER"),"&p=443&d=upload/v1"):"https://".concat(ie("LOG_UPLOAD_SERVER"),"/upload/v1")),r,{responseType:"text"});if(o.data!=="OK"){const s=new Error("unexpected upload log response");throw s.response=o,s}},()=>(this.uploadLogUploadingList=[],!1),o=>(o.response?D0.reportLogUploadError({status:o.response.status,data:o.response.data,headers:o.response.headers,message:o.message}):o.request?D0.reportLogUploadError({status:o.request.status,message:o.message}):D0.reportLogUploadError({status:-1,message:o.message}),!0),{timeout:ie("UPLOAD_LOG_REQUEST_RETRY_INTERVAL"),maxRetryTimeout:ie("UPLOAD_LOG_REQUEST_MAX_RETRY_INTERVAL")})}uploadLogInterval(){this.uploadLogUploadingList.length===0&&this.uploadLogWaitingList.length===0||(this.uploadLogUploadingList.length===0&&(this.uploadLogUploadingList=this.uploadLogWaitingList.splice(0,ie("UPLOAD_LOG_LENGTH_EACH_TIME"))),this.uploadLogs().then(()=>{this.uploadErrorCount=0,this.uploadLogWaitingList.length>0&&window.setTimeout(()=>this.uploadLogInterval(),ie("UPLOAD_LOG_INTERVAL"))}).catch(n=>{this.uploadErrorCount+=1,this.uploadErrorCount<2?window.setTimeout(()=>this.uploadLogInterval(),ie("UPLOAD_LOG_TWICE_RETRY_INTERVAL_V1")):window.setTimeout(()=>this.uploadLogInterval(),ie("UPLOAD_LOG_RETRY_INTERVAL_V1"))}))}},yS="v4.18.2-0-g8d83af1d-dirty(7/11/2023, 7:07:15 PM)",ta=function(n){if(n.match(/[0-9]+\.[0-9]+\.[0-9]+$/))return n;const r=n.match(/([0-9]+\.[0-9]+\.[0-9]+)\-alpha\.([0-9]+)/);if(r&&r[1]&&r[2]){const s=r[1],l=r[2];return"".concat(s,".").concat(l)}const o=n.match(/([0-9]+\.[0-9]+\.[0-9]+)\-special\.([0-9]+)/);if(o&&o[1]&&o[2]){const s=o[1],l=o[2];return"".concat(s,".").concat(100*(Number(l)+1))}return"4.0.0.999"}("4.18.2"),SS=function(){try{return JSON.parse("true")===!0}catch{return!0}}(),Fx=["CHINA","GLOBAL"],No=function(){const n="us".concat("erna","me"),r="pa".concat("sswo","rd"),o=["t","s","t"];o.splice(1,0,"e");const s=o.join(""),l=[];for(let v=0;v<6;v++)l.push("1");const h=l.join(""),p={};return p[n]=s,p[r]=h,Object.assign(p,{turnServerURL:"",tcpport:3433,udpport:3478,forceturn:!1})}();window.DEFAULT_TURN_CONFIG=No;const mY={"90p":Nt(160,90),"90p_1":Nt(160,90),"120p":Nt(160,120,15,30,65),"120p_1":Nt(160,120,15,30,65),"120p_3":Nt(120,120,15,30,50),"120p_4":Nt(212,120),"180p":Nt(320,180,15,30,140),"180p_1":Nt(320,180,15,30,140),"180p_3":Nt(180,180,15,30,100),"180p_4":Nt(240,180,15,30,120),"240p":Nt(320,240,15,40,200),"240p_1":Nt(320,240,15,40,200),"240p_3":Nt(240,240,15,40,140),"240p_4":Nt(424,240,15,40,220),"360p":Nt(640,360,15,80,400),"360p_1":Nt(640,360,15,80,400),"360p_3":Nt(360,360,15,80,260),"360p_4":Nt(640,360,30,80,600),"360p_6":Nt(360,360,30,80,400),"360p_7":Nt(480,360,15,80,320),"360p_8":Nt(480,360,30,80,490),"360p_9":Nt(640,360,15,80,800),"360p_10":Nt(640,360,24,80,800),"360p_11":Nt(640,360,24,80,1e3),"480p":Nt(640,480,15,100,500),"480p_1":Nt(640,480,15,100,500),"480p_2":Nt(640,480,30,100,1e3),"480p_3":Nt(480,480,15,100,400),"480p_4":Nt(640,480,30,100,750),"480p_6":Nt(480,480,30,100,600),"480p_8":Nt(848,480,15,100,610),"480p_9":Nt(848,480,30,100,930),"480p_10":Nt(640,480,10,100,400),"720p":Nt(1280,720,15,120,1130),"720p_1":Nt(1280,720,15,120,1130),"720p_2":Nt(1280,720,30,120,2e3),"720p_3":Nt(1280,720,30,120,1710),"720p_5":Nt(960,720,15,120,910),"720p_6":Nt(960,720,30,120,1380),"1080p":Nt(1920,1080,15,120,2080),"1080p_1":Nt(1920,1080,15,120,2080),"1080p_2":Nt(1920,1080,30,120,3e3),"1080p_3":Nt(1920,1080,30,120,3150),"1080p_5":Nt(1920,1080,60,120,4780),"1440p":Nt(2560,1440,30,120,4850),"1440p_1":Nt(2560,1440,30,120,4850),"1440p_2":Nt(2560,1440,60,120,7350),"4k":Nt(3840,2160,30,120,8910),"4k_1":Nt(3840,2160,30,120,8910),"4k_3":Nt(3840,2160,60,120,13500)},gY={"480p":Ra(640,480,5),"480p_1":Ra(640,480,5),"480p_2":Ra(640,480,30),"480p_3":Ra(640,480,15),"720p":Ra(1280,720,5),"720p_1":Ra(1280,720,5),"720p_2":Ra(1280,720,30),"720p_3":Ra(1280,720,15),"1080p":Ra(1920,1080,5),"1080p_1":Ra(1920,1080,5),"1080p_2":Ra(1920,1080,30),"1080p_3":Ra(1920,1080,15)},vY={"1SL1TL":bS(1,1),"3SL3TL":bS(3,3),"2SL3TL":bS(2,3)};function ou(n){return n||(n="480p_1"),typeof n=="string"?Object.assign({},mY[n]):n}function CS(n){return typeof n=="string"?Object.assign({},gY[n]):n}function L0(n){return typeof n=="string"?Object.assign({},vY[n]):n}const EY={speech_low_quality:Cd(16e3,!1),speech_standard:Cd(32e3,!1,18),music_standard:Cd(48e3,!1),standard_stereo:Cd(48e3,!0,56),high_quality:Cd(48e3,!1,128),high_quality_stereo:Cd(48e3,!0,192)};function M0(n){return typeof n=="string"?Object.assign({},EY[n]):n}function rn(n,r,o){Object.keys(Qi).includes(n)&&(!o&&Object.keys(au).includes(n)||(Qi[n]=r))}function ie(n){return Qi[n]}const Qi={PROCESS_ID:"",ENCRYPT_AES:!0,AREAS:Fx,WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io","webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io","webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-web-2.ap.sd-rtn.com","cds-ap-web-3.agora.io","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-web-2.ap.sd-rtn.com","sua-ap-web-3.agora.io","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-ap-web-1.agora.io","uap-web-2.ap.sd-rtn.com","uap-ap-web-3.agora.io","uap-web-4.ap.sd-rtn.com"],LOG_UPLOAD_SERVER:"logservice.agora.io",EVENT_REPORT_DOMAIN:"statscollector-1.agora.io",EVENT_REPORT_BACKUP_DOMAIN:"web-2.statscollector.sd-rtn.com",ENABLE_EVENT_REPORT:!0,GATEWAY_ADDRESS:[],GATEWAY_WSS_ADDRESS:"",LIVE_STREAMING_ADDRESS:"",HTTP_CONNECT_TIMEOUT:5e3,SIGNAL_REQUEST_TIMEOUT:1e4,REPORT_STATS:!0,UPLOAD_LOG:!1,NOT_REPORT_EVENT:[],SUBSCRIBE_TWCC:!1,PUBLISH_TWCC:!1,PING_PONG_TIME_OUT:10,WEBSOCKET_TIMEOUT_MIN:1e4,EVENT_REPORT_SEND_INTERVAL:3e3,CONFIG_DISTRIBUTE_INTERVAL:3e5,ENABLE_CONFIG_DISTRIBUTE:!0,CANDIDATE_TIMEOUT:5e3,SHOW_REPORT_INVOKER_LOG:!1,JOIN_EXTEND:"",PUB_EXTEND:"",SUB_EXTEND:"",FORCE_TURN:!1,TURN_ENABLE_TCP:!0,TURN_ENABLE_UDP:!0,MAX_UPLOAD_CACHE:50,UPLOAD_CACHE_INTERVAL:2e3,AJAX_REQUEST_CONCURRENT:3,REPORT_APP_SCENARIO:void 0,GATEWAY_DOMAINS:["edge.agora.io","edge.sd-rtn.com"],WORKER_DOMAIN:"edge.agora.io",TURN_DOMAIN:"edge.agora.io",EVENT_REPORT_RETRY:!0,CHROME_FORCE_PLAN_B:!1,AUDIO_SOURCE_VOLUME_UPDATE_INTERVAL:400,AUDIO_SOURCE_AVG_VOLUME_DURATION:3e3,AUDIO_VOLUME_INDICATION_INTERVAL:2e3,VOLUME_VOICE_WEIGHT:10,GET_VOLUME_OF_MUTED_AUDIO_TRACK:!1,STATS_UPDATE_INTERVAL:250,NORMAL_EVENT_QUEUE_CAPACITY:100,CUSTOM_REPORT:!0,CUSTOM_REPORT_LIMIT:20,PROXY_SERVER_TYPE2:"webnginx-proxy.agora.io",PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com","webrtc-cloud-proxy.agora.io"],CUSTOM_PUB_ANSWER_MODIFIER:null,CUSTOM_SUB_ANSWER_MODIFIER:null,CUSTOM_PUB_OFFER_MODIFIER:null,CUSTOM_SUB_OFFER_MODIFIER:null,DSCP_TYPE:"high",REMOVE_NEW_CODECS:!0,FRAGEMENT_LENGTH:3,WEBSOCKET_COMPRESS:!1,SIMULCAST:!1,PRELOAD_MEDIA_COUNT:0,USE_PUB_RTX:!1,USE_SUB_RTX:!1,CHECK_VIDEO_VISIBLE_INTERVAL:3e4,ENUMERATE_DEVICES_INTERVAL:!1,ENUMERATE_DEVICES_INTERVAL_TIME:1e4,USE_NEW_TOKEN:!1,CLOSE_AFB_FOR_LOCAL_AP:!0,JOIN_WITH_FALLBACK_SIGNAL_PROXY:!0,JOIN_WITH_FALLBACK_MEDIA_PROXY:!0,JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE:!1,JOIN_WITH_FALLBACK_PROXY_PENDING_DURATION:2e3,USE_TURN_SERVER_OF_GATEWAY:!1,H264_PROFILE_LEVEL_ID:"",USE_NEW_LOG:!1,LOG_VERSION:3,MEDIA_DEVICE_CONSTRAINTS:null,ENCRYPT_PROXY_USERNAME_AND_PSW:!0,SDP_LOGGING:!1,CSP_DETECTED_HOSTNAME_LIST:["agora.io","sd-rtn.com"],REMOTE_AUDIO_TRACK_USES_WEB_AUDIO:!1,LOCAL_AUDIO_TRACK_USES_WEB_AUDIO:!0,BITRATE_ADAPTER_TYPE:"STANDARD_BITRATE",AI_DENOISER_PARAMETERS:{},ADJUST_3A_FROM_PLUGINS:!0,RAISE_H264_BASELINE_PRIORITY:!0,FILTER_SEND_H264_BASELINE:!1,ENABLE_PUBLISHED_USER_LIST:!0,MAX_SUBSCRIPTION:50,X_GOOGLE_START_BITRATE:void 0,NEW_REPORT_SERVER:!1,NEW_REPORT_SERVER_DOMAINS:["data-reporting.agora.io","data-reporting.agora.io"],VIDEO_INSPECT_WORKER_MESSAGE_LENGTH_LIMIT:3e5,VIDEO_INSPECT_INTERVAL_MINIMUM:1e3,VIDEO_INSPECT_QUALITY_RATIO:.9,VIDEO_INSPECT_WORKER_MANAGER_HOST:"edge.agora.io",VIDEO_INSPECT_WORKER_MANAGER_PORT:"",VIDEO_INSPECT_WORKER_PORT:"",SHOW_VIDEO_INSPECT_WORKER_MESSAGE:!1,STATS_COLLECTOR_PORT:443,FORCE_TURN_TCP:!1,SUBSCRIBE_AUDIO_FILTER_TOPN:void 0,ENABLE_PUBLISH_AUDIO_FILTER:void 0,WEBAUDIO_INIT_OPTIONS:void 0,FILTER_VIDEO_FEC:!0,FILTER_AUDIO_FEC:!1,CHROME_DUAL_STREAM_USE_ENCODING:!0,EXTENSION_USAGE_UPLOAD_INTERVAL:1e4,ICE_RESTART:!0,ICE_RESTART_INTERVAL:1e4,NEW_ICE_RESTART:!1,ENABLE_USER_LICENSE_CHECK:!0,SIGNAL_CHANNEL:0,TRANSMITTER_INITIAL_RTT:30,TRANSMITTER_INITIAL_RTO:30,TRANSMITTER_MAX_BATCH_ACK_COUNT:2,TRANSMITTER_MAX_RTO:500,DATACHANNEL_COMPRESS:!1,FINGERPRINT:null,DC_JOIN_WITH_FAILBACK:5e3,ENABLE_VIDEO_FRAME_CALLBACK:!0,VIDEO_FREEZE_DURATION:500,SPATIALIZER_PARAMETERS:{},UPLOAD_LOG_INTERVAL:3e3,UPLOAD_LOG_REQUEST_RETRY_INTERVAL:2e3,UPLOAD_LOG_REQUEST_MAX_RETRY_INTERVAL:2e4,UPLOAD_LOG_TRY_INTERVAL_WHILE_OFF:5e3,UPLOAD_LOG_RETRY_INTERVAL_V1:1e4,UPLOAD_LOG_TWICE_RETRY_INTERVAL_V1:200,UPLOAD_LOG_LENGTH_EACH_TIME:10,APP_TYPE:0,DISABLE_WEBAUDIO:!1,CHANNEL_MEDIA_RELAY_SERVERS:void 0,KEEP_LAST_FRAME:!0,FORWARD_P2P_CREATION:!0,SYNC_GROUP:!0,BLOCK_LOCAL_CLIENT:!1,AP_AREA:!0,SVC:[],ENABLE_ENCODED_TRANSFORM:!1,IMAGE_MODERATION_WORKER_HOST:"edge.agora.io",IMAGE_MODERATION_WORKER_MESSAGE_LENGTH_LIMIT:3e5,IMAGE_MODERATION_INTERVAL_MINIMUM:1e3,SHOW_IMAGE_MODERATION_WORKER_MESSAGE:!1,IMAGE_MODERATION_QUALITY_RATIO:.9,IMAGE_MODERATION_UPLOAD_REPORT_INTERVAL:5e3,ACCOUNT_REGISTER_RETRY_TIMEOUT:1,ACCOUNT_REGISTER_RETRY_RATIO:2,ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX:6e4,ACCOUNT_REGISTER_RETRY_COUNT_MAX:1e5,AUDIO_CONTEXT:null,WEBCS_BACKUP_CONNECT_TIMEOUT:6e3,PLAYER_STATE_DEFER:2e3,SIGNAL_REQUEST_WATCH_INTERVAL:1e3,FILEPATH_LENMAX:255,DUALSTREAM_OPERATION_CHECK:!0,MEDIA_ELEMENT_EXISTS_DEPTH:3,SHIM_CANDIDATE:!1,LEAVE_MSG_TIMEOUT:2e3,STATS_FILTER:{transportId:!0,googTrackId:!0}},au={};function Cd(n,r,o){return{sampleRate:n,stereo:r,bitrate:o}}function Nt(n,r,o,s,l){return{width:n,height:r,frameRate:o,bitrateMin:s,bitrateMax:l}}function Ra(n,r,o,s,l){return{width:{max:n},height:{max:r},frameRate:o,bitrateMin:s,bitrateMax:l}}function bS(n,r){return{numSpatialLayers:n,numTemporalLayers:r}}SS||(Qi.WEBCS_DOMAIN=["ap-web-1-oversea.agora.io","ap-web-1-north-america.agora.io"],Qi.WEBCS_DOMAIN_BACKUP_LIST=["ap-web-2-oversea.agora.io","ap-web-2-north-america.agora.io"],Qi.PROXY_CS=["proxy-ap-web-oversea.agora.io","proxy-ap-web-america.agora.io"],Qi.CDS_AP=["cds-ap-web-oversea.agora.io","cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],Qi.ACCOUNT_REGISTER=["sua-ap-web-oversea.agora.io","sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],Qi.UAP_AP=["uap-ap-web-oversea.agora.io","uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],Qi.LOG_UPLOAD_SERVER="logservice-oversea.agora.io",Qi.EVENT_REPORT_DOMAIN="statscollector-1-oversea.agora.io",Qi.EVENT_REPORT_BACKUP_DOMAIN="statscollector-2-oversea.agora.io",Qi.PROXY_SERVER_TYPE3="webrtc-cloud-proxy.agora.io",Qi.AREAS=["NORTH_AMERICA","OVERSEA"]);const _Y=[[0,1,2,3,4,5,5],[0,2,2,3,4,5,5],[0,3,3,3,4,5,5],[0,4,4,4,4,5,5],[0,5,5,5,5,5,5]],su=[],Ap=[];function cu(n,r){return!!r&&su.some(o=>o.uid===n&&o.channelName===r)}var yY=kr,SY=Qa,CY=oe,TS=function(n,r,o){var s=yY(r);s in n?SY.f(n,s,CY(0,o)):n[s]=o},Vx=Y_,bY=zc,TY=TS,RY=R.Array,IY=Math.max,Bx=function(n,r,o){for(var s=bY(n),l=Vx(r,s),h=Vx(o===void 0?s:o,s),p=RY(IY(h-l,0)),v=0;l<h;l++,v++)TY(p,v,n[l]);return p.length=v,p},$x=Bx,wY=Math.floor,RS=function(n,r){var o=n.length,s=wY(o/2);return o<8?OY(n,r):AY(n,RS($x(n,0,s),r),RS($x(n,s),r),r)},OY=function(n,r){for(var o,s,l=n.length,h=1;h<l;){for(s=h,o=n[h];s&&r(n[s-1],o)>0;)n[s]=n[--s];s!==h++&&(n[s]=o)}return n},AY=function(n,r,o,s){for(var l=r.length,h=o.length,p=0,v=0;p<l||v<h;)n[p+v]=p<l&&v<h?s(r[p],o[v])<=0?r[p++]:o[v++]:p<l?r[p++]:o[v++];return n},NY=RS,Hx=Ge.match(/firefox\/(\d+)/i),xY=!!Hx&&+Hx[1],PY=/MSIE|Trident/.test(Ge),Wx=Ge.match(/AppleWebKit\/(\d+)\./),DY=!!Wx&&+Wx[1],kY=ki,Gx=S,LY=jt,MY=zr,UY=zc,zx=ad,IS=c,jY=NY,FY=H_,Kx=xY,VY=PY,Yx=An,qx=DY,Qc=[],Xx=Gx(Qc.sort),BY=Gx(Qc.push),$Y=IS(function(){Qc.sort(void 0)}),HY=IS(function(){Qc.sort(null)}),WY=FY("sort"),Jx=!IS(function(){if(Yx)return Yx<70;if(!(Kx&&Kx>3)){if(VY)return!0;if(qx)return qx<603;var n,r,o,s,l="";for(n=65;n<76;n++){switch(r=String.fromCharCode(n),n){case 66:case 69:case 70:case 72:o=3;break;case 68:case 71:o=4;break;default:o=2}for(s=0;s<47;s++)Qc.push({k:r+s,v:o})}for(Qc.sort(function(h,p){return p.v-h.v}),s=0;s<Qc.length;s++)r=Qc[s].k.charAt(0),l.charAt(l.length-1)!==r&&(l+=r);return l!=="DGBEFHACIJK"}});kY({target:"Array",proto:!0,forced:$Y||!HY||!WY||!Jx},{sort:function(n){n!==void 0&&LY(n);var r=MY(this);if(Jx)return n===void 0?Xx(r):Xx(r,n);var o,s,l=[],h=UY(r);for(s=0;s<h;s++)s in r&&BY(l,r[s]);for(jY(l,function(p){return function(v,E){return E===void 0?-1:v===void 0?1:p!==void 0?+p(v,E)||0:zx(v)>zx(E)?1:-1}}(n)),o=l.length,s=0;s<o;)r[s]=l[s++];for(;s<h;)delete r[s++];return r}});var GY=Kc("Array").sort,zY=b,KY=GY,wS=Array.prototype,OS=function(n){var r=n.sort;return n===wS||zY(wS,n)&&r===wS.sort?KY:r};function bd(n,r){if(typeof n!="boolean")throw new Q(W.INVALID_PARAMS,"Invalid ".concat(r,": The value is of the boolean type."))}function Rr(n,r,o){if(!o.includes(n))throw new Q(W.INVALID_PARAMS,"".concat(r," can only be set as ").concat(JSON.stringify(o)))}function sn(n,r){let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1e4,l=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4];if(n<o||n>s||l&&!YY(n))throw new Q(W.INVALID_PARAMS,"invalid ".concat(r,": the value range is [").concat(o,", ").concat(s,"]. integer only"))}function AS(n,r){if(typeof n!="number"){if(!(n.min||n.max||n.ideal||n.exact))throw new Q(W.INVALID_PARAMS,"".concat(r," is not a valid ConstrainLong"));n.min!==void 0&&sn(n.min,"".concat(r,".min"),0,1/0),n.max!==void 0&&sn(n.max,"".concat(r,".max"),1,1/0),n.exact!==void 0&&sn(n.exact,"".concat(r,".exact"),1,1/0),n.ideal!==void 0&&sn(n.ideal,"".concat(r,".ideal"),1,1/0)}else sn(n,r,1,1/0)}function Xr(n,r){let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:255,l=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4];if(n==null)throw new Q(W.INVALID_PARAMS,"".concat(r||"param"," cannot be empty"));if(!Qx(n,o,s,l))throw new Q(W.INVALID_PARAMS,"Invalid ".concat(r||"string param",": Length of the string: [").concat(o,",").concat(s,"].").concat(l?" ASCII characters only.":""))}function cc(n,r){if(!Array.isArray(n))throw new Q(W.INVALID_PARAMS,"".concat(r," should be an array"))}function NS(n){if(typeof n!="string"||!/^[a-zA-Z0-9 \!\#\$\%\&\(\)\+\-\:\;\<\=\.\>\?\@\[\]\^\_\{\}\|\~\,]{1,64}$/.test(n))throw U.error("Invalid Channel Name ".concat(n)),new Q(W.INVALID_PARAMS,"The length must be within 64 bytes. The supported characters: a-z,A-Z,0-9,space,!, #, $, %, &, (, ), +, -, :, ;, <, =, ., >, ?, @, [, ], ^, _,  {, }, |, ~, ,")}function xS(n){if(r=n,!(typeof r=="number"&&Math.floor(r)===r&&0<=r&&r<=4294967295||Qx(n,1,255)))throw U.error("Invalid UID ".concat(n," ").concat(typeof n)),new Q(W.INVALID_PARAMS,"[String uid] Length of the string: [1,255]. ASCII characters only. [Number uid] The value range is [0,10000]");var r;typeof n=="string"&&U.warning("You input a string as the user ID, to ensure better end-user experience, Agora highly suggests not using a string as the user ID.")}function yn(n){return n==null}function Qx(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:255,s=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];return typeof n=="string"&&n.length<=o&&n.length>=r&&(!s||qY(n))}function YY(n){return typeof n=="number"&&n%1==0}function qY(n){if(typeof n!="string")return!1;for(let r=0;r<n.length;r+=1){const o=n.charCodeAt(r);if(o<0||o>255)return!1}return!0}let Zx,eP,Jr;(function(n){n.FREE="free",n.UPLOADING="uploading"})(Zx||(Zx={})),function(n){n[n.MISC=0]="MISC",n[n.INTERNAL_EVENT=1]="INTERNAL_EVENT",n[n.PUBLIC_EVENT=2]="PUBLIC_EVENT",n[n.WEB_EVENT=3]="WEB_EVENT",n[n.INTERNAL_API=4]="INTERNAL_API",n[n.WEB_API=5]="WEB_API",n[n.PUBLIC_API=6]="PUBLIC_API"}(eP||(eP={})),function(n){n.NONE="none",n.INIT="init",n.CANPLAY="canplay",n.PLAYING="playing",n.PAUSED="paused",n.SUSPEND="suspend",n.STALLED="stalled",n.WAITING="waiting",n.ERROR="error",n.DESTROYED="destroyed",n.ABORT="abort",n.ENDED="ended",n.EMPTIED="emptied",n.LOADEDDATA="loadeddata"}(Jr||(Jr={}));const PS={uninit:100,none:110,init:120,loadeddata:130,canplay:200,playing:210,paused:220,suspend:300,stalled:310,waiting:320,error:330,destroyed:340,abort:350,ended:360,emptied:370};function XY(n){return Xr(n.reportId,"params.reportId",0,100,!1),Xr(n.category,"params.category",0,100,!1),Xr(n.event,"params.event",0,100,!1),Xr(n.label,"params.label",0,100,!1),sn(n.value,"params.value",Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,!1),!0}const JY={sid:"",lts:0,success:null,cname:null,uid:null,peer:null,cid:null,elapse:null,extend:null,vid:0};let Fr,In,tP,DS,Zn,bn,lu,lc,Td,Np,xo,Qr,Ke,kS,Wt,Tt,Mi,Zt,Be,Je,go,_t,nP,Zi;function rP(n){return sn(n.timeout,"config.timeout",0,1e5),sn(n.timeoutFactor,"config.timeoutFactor",0,100,!1),sn(n.maxRetryCount,"config.maxRetryConfig",0,1/0),sn(n.maxRetryTimeout,"config.maxRetryTimeout",0,1/0),!0}function QY(n){return Rr(n.codec,"config.codec",["vp8","vp9","av1","h264","h265"]),Rr(n.mode,"config.mode",["rtc","live"]),n.audioCodec!==void 0&&Rr(n.audioCodec,"config.audioCodec",["opus","pcmu","pcma","g722"]),n.proxyServer!==void 0&&Xr(n.proxyServer,"config.proxyServer",1,1e4),n.turnServer!==void 0&&iP(n.turnServer),n.httpRetryConfig!==void 0&&rP(n.httpRetryConfig),n.websocketRetryConfig!==void 0&&rP(n.websocketRetryConfig),!0}function xp(n){if(!Array.isArray(n)||n.length<1)return!1;try{n.forEach(r=>{if(!r.urls)throw Error()})}catch{return!1}return!0}function iP(n){return Xr(n.turnServerURL,"turnServerURL"),Xr(n.username,"username"),Xr(n.password,"password"),n.udpport&&sn(n.udpport,"udpport",1,99999,!0),n.forceturn&&bd(n.forceturn,"forceturn"),n.security&&bd(n.security,"security"),n.tcpport&&sn(n.tcpport,"tcpport",1,99999,!0),!0}function oP(n){return n.level!==void 0&&Rr(n.level,"level",[1,2,3]),!0}(function(n){n.PUBLISH="publish",n.SUBSCRIBE="subscribe",n.WS_COMPRESSOR_INIT="ws_compressor_init",n.SESSION_INIT="session_init",n.JOIN_CHOOSE_SERVER="join_choose_server",n.REQ_USER_ACCOUNT="req_user_account",n.JOIN_GATEWAY="join_gateway",n.REJOIN_GATEWAY="rejoin_gateway",n.STREAM_SWITCH="stream_switch",n.REQUEST_PROXY_WORKER_MANAGER="request_proxy_worker_manager",n.REQUEST_PROXY_APPCENTER="request_proxy_appcenter",n.FIRST_VIDEO_RECEIVED="first_video_received",n.FIRST_AUDIO_RECEIVED="first_audio_received",n.FIRST_VIDEO_DECODE="first_video_decode",n.FIRST_AUDIO_DECODE="first_audio_decode",n.ON_ADD_AUDIO_STREAM="on_add_audio_stream",n.ON_ADD_VIDEO_STREAM="on_add_video_stream",n.ON_UPDATE_STREAM="on_update_stream",n.ON_REMOVE_STREAM="on_remove_stream",n.USER_ANALYTICS="req_user_analytics",n.PC_STATS="pc_stats"})(Fr||(Fr={})),function(n){n.SESSION="io.agora.pb.Wrtc.Session",n.JOIN_CHOOSE_SERVER="io.agora.pb.Wrtc.JoinChooseServer",n.REQ_USER_ACCOUNT="io.agora.pb.Wrtc.ReqUserAccount",n.JOIN_GATEWAY="io.agora.pb.Wrtc.JoinGateway",n.RE_JOIN_GATEWAY="io.agora.pb.Wrtc.ReJoinGateway",n.PUBLISH="io.agora.pb.Wrtc.Publish",n.SUBSCRIBE="io.agora.pb.Wrtc.Subscribe",n.WS_COMPRESSOR_INIT="io.agora.pb.Wrtc.WsCompressorInit",n.STREAM_SWITCH="io.agora.pb.Wrtc.StreamSwitch",n.AUDIO_SENDING_STOPPED="io.agora.pb.Wrtc.AudioSendingStopped",n.VIDEO_SENDING_STOPPED="io.agora.pb.Wrtc.VideoSendingStopped",n.REQUEST_PROXY_APPCENTER="io.agora.pb.Wrtc.RequestProxyAppCenter",n.REQUEST_PROXY_WORKER_MANAGER="io.agora.pb.Wrtc.RequestProxyWorkerManager",n.API_INVOKE="io.agora.pb.Wrtc.ApiInvoke",n.FIRST_VIDEO_RECEIVED="io.agora.pb.Wrtc.FirstVideoReceived",n.FIRST_AUDIO_RECEIVED="io.agora.pb.Wrtc.FirstAudioReceived",n.FIRST_VIDEO_DECODE="io.agora.pb.Wrtc.FirstVideoDecode",n.FIRST_AUDIO_DECODE="io.agora.pb.Wrtc.FirstAudioDecode",n.ON_ADD_AUDIO_STREAM="io.agora.pb.Wrtc.OnAddAudioStream",n.ON_ADD_VIDEO_STREAM="io.agora.pb.Wrtc.OnAddVideoStream",n.ON_UPDATE_STREAM="io.agora.pb.Wrtc.OnUpdateStream",n.ON_REMOVE_STREAM="io.agora.pb.Wrtc.OnRemoveStream",n.JOIN_CHANNEL_TIMEOUT="io.agora.pb.Wrtc.JoinChannelTimeout",n.PEER_PUBLISH_STATUS="io.agora.pb.Wrtc.PeerPublishStatus",n.WORKER_EVENT="io.agora.pb.Wrtc.WorkerEvent",n.AP_WORKER_EVENT="io.agora.pb.Wrtc.APWorkerEvent",n.JOIN_WEB_PROXY_AP="io.agora.pb.Wrtc.JoinWebProxyAP",n.WEBSOCKET_QUIT="io.agora.pb.Wrtc.WebSocketQuit",n.USER_ANALYTICS="io.agora.pb.Wrtc.UserAnalytics",n.AUTOPLAY_FAILED="io.agora.pb.Wrtc.AutoplayFailed",n.PC_STATS="io.agora.pb.Wrtc.PCStats"}(In||(In={})),function(n){n[n.WORKER_EVENT=156]="WORKER_EVENT",n[n.AP_WORKER_EVENT=160]="AP_WORKER_EVENT"}(tP||(tP={})),function(n){n[n.SESSION=26]="SESSION",n[n.JOIN_CHOOSE_SERVER=27]="JOIN_CHOOSE_SERVER",n[n.REQ_USER_ACCOUNT=196]="REQ_USER_ACCOUNT",n[n.JOIN_GATEWAY=28]="JOIN_GATEWAY",n[n.PUBLISH=30]="PUBLISH",n[n.SUBSCRIBE=29]="SUBSCRIBE",n[n.WS_COMPRESSOR_INIT=9430]="WS_COMPRESSOR_INIT",n[n.STREAM_SWITCH=32]="STREAM_SWITCH",n[n.AUDIO_SENDING_STOPPED=33]="AUDIO_SENDING_STOPPED",n[n.VIDEO_SENDING_STOPPED=34]="VIDEO_SENDING_STOPPED",n[n.REQUEST_PROXY_APPCENTER=35]="REQUEST_PROXY_APPCENTER",n[n.REQUEST_PROXY_WORKER_MANAGER=36]="REQUEST_PROXY_WORKER_MANAGER",n[n.API_INVOKE=41]="API_INVOKE",n[n.FIRST_VIDEO_RECEIVED=348]="FIRST_VIDEO_RECEIVED",n[n.FIRST_AUDIO_RECEIVED=349]="FIRST_AUDIO_RECEIVED",n[n.FIRST_VIDEO_DECODE=350]="FIRST_VIDEO_DECODE",n[n.FIRST_AUDIO_DECODE=351]="FIRST_AUDIO_DECODE",n[n.ON_ADD_AUDIO_STREAM=352]="ON_ADD_AUDIO_STREAM",n[n.ON_ADD_VIDEO_STREAM=353]="ON_ADD_VIDEO_STREAM",n[n.ON_UPDATE_STREAM=356]="ON_UPDATE_STREAM",n[n.ON_REMOVE_STREAM=355]="ON_REMOVE_STREAM",n[n.JOIN_CHANNEL_TIMEOUT=407]="JOIN_CHANNEL_TIMEOUT",n[n.PEER_PUBLISH_STATUS=408]="PEER_PUBLISH_STATUS",n[n.WORKER_EVENT=156]="WORKER_EVENT",n[n.AP_WORKER_EVENT=160]="AP_WORKER_EVENT",n[n.JOIN_WEB_PROXY_AP=700]="JOIN_WEB_PROXY_AP",n[n.WEBSOCKET_QUIT=671]="WEBSOCKET_QUIT",n[n.USER_ANALYTICS=1e4]="USER_ANALYTICS",n[n.AUTOPLAY_FAILED=9178]="AUTOPLAY_FAILED"}(DS||(DS={})),function(n){n.CREATE_CLIENT="createClient",n.CHECK_SYSTEM_REQUIREMENTS="checkSystemRequirements",n.SET_AREA="setArea",n.CHECK_VIDEO_TRACK_IS_ACTIVE="checkVideoTrackIsActive",n.CHECK_AUDIO_TRACK_IS_ACTIVE="checkAudioTrackIsActive",n.CREATE_MIC_AUDIO_TRACK="createMicrophoneAudioTrack",n.CREATE_CUSTOM_AUDIO_TRACK="createCustomAudioTrack",n.CREATE_BUFFER_AUDIO_TRACK="createBufferSourceAudioTrack",n.CREATE_CAM_VIDEO_TRACK="createCameraVideoTrack",n.CREATE_CUSTOM_VIDEO_TRACK="createCustomVideoTrack",n.CREATE_MIC_AND_CAM_TRACKS="createMicrophoneAndCameraTracks",n.CREATE_SCREEN_VIDEO_TRACK="createScreenVideoTrack",n.SET_ENCRYPTION_CONFIG="Client.setEncryptionConfig",n.START_PROXY_SERVER="Client.startProxyServer",n.STOP_PROXY_SERVER="Client.stopProxyServer",n.SET_PROXY_SERVER="Client.setProxyServer",n.SET_TURN_SERVER="Client.setTurnServer",n.SET_CLIENT_ROLE="Client.setClientRole",n.SET_LOW_STREAM_PARAMETER="Client.setLowStreamParameter",n.ENABLE_DUAL_STREAM="Client.enableDualStream",n.DISABLE_DUAL_STREAM="Client.disableDualStream",n.JOIN="Client.join",n.LEAVE="Client.leave",n.PUBLISH="Client.publish",n.UNPUBLISH="Client.unpublish",n.SUBSCRIBE="Client.subscribe",n.MASS_SUBSCRIBE="Client.massSubscribe",n.MASS_UNSUBSCRIBE="Client.massUnsubscribe",n.UNSUBSCRIBE="Client.unsubscribe",n.RENEW_TOKEN="Client.renewToken",n.SET_REMOTE_VIDEO_STREAM_TYPE="Client.setRemoteVideoStreamType",n.SET_STREAM_FALLBACK_OPTION="Client.setStreamFallbackOption",n.ENABLE_AUDIO_VOLUME_INDICATOR="Client.enableAudioVolumeIndicator",n.SEND_CUSTOM_REPORT_MESSAGE="Client.sendCustomReportMessage",n.INSPECT_VIDEO_CONTENT="Client.inspectVideoContent",n.STOP_INSPECT_VIDEO_CONTENT="Client.stopInspectVideoContent",n.JOIN_FALLBACK_TO_PROXY="Client._joinFallbackToProxy",n.DATACHANNEL_FAILBACK="Client._datachannelFailback",n.ON_LIVE_STREAM_WARNING="Client.onLiveStreamWarning",n.ON_LIVE_STREAM_ERROR="Client.onLiveStreamingError",n.START_LIVE_STREAMING="Client.startLiveStreaming",n.SET_LIVE_TRANSCODING="Client.setLiveTranscoding",n.STOP_LIVE_STREAMING="Client.stopLiveStreaming",n.ADD_INJECT_STREAM_URL="Client.addInjectStreamUrl",n.REMOVE_INJECT_STREAM_URL="Client.removeInjectStreamUrl",n.START_CHANNEL_MEDIA_RELAY="Client.startChannelMediaRelay",n.UPDATE_CHANNEL_MEDIA_RELAY="Client.updateChannelMediaRelay",n.STOP_CHANNEL_MEDIA_RELAY="Client.stopChannelMediaRelay",n.REQUEST_CONFIG_DISTRIBUTE="_config-distribute-request",n.SET_CONFIG_DISTRIBUTE="_configDistribute",n.LOCAL_TRACK_SET_MUTED="LocalTrack.setMute",n.LOCAL_AUDIO_TRACK_PLAY="LocalAudioTrack.play",n.LOCAL_AUDIO_TRACK_PLAY_IN_ELEMENT="LocalAudioTrack.playInElement",n.LOCAL_AUDIO_TRACK_STOP="LocalAudioTrack.stop",n.LOCAL_AUDIO_TRACK_SET_VOLUME="LocalAudioTrack.setVolume",n.MIC_AUDIO_TRACK_SET_DEVICE="MicrophoneAudioTrack.setDevice",n.BUFFER_AUDIO_TRACK_START="BufferSourceAudioTrack.startProcessAudioBuffer",n.BUFFER_AUDIO_TRACK_STOP="BufferSourceAudioTrack.stopProcessAudioBuffer",n.BUFFER_AUDIO_TRACK_PAUSE="BufferSourceAudioTrack.pauseProcessAudioBuffer",n.BUFFER_AUDIO_TRACK_RESUME="BufferSourceAudioTrack.resumeProcessAudioBuffer",n.BUFFER_AUDIO_TRACK_SEEK="BufferSourceAudioTrack.seekAudioBuffer",n.LOCAL_VIDEO_TRACK_PLAY="LocalVideoTrack.play",n.LOCAL_VIDEO_TRACK_STOP="LocalVideoTrack.stop",n.LOCAL_VIDEO_TRACK_GET_VIDEO_VISIBLE="LocalVideoTrack.getVideoElementVisibleStatus",n.LOCAL_VIDEO_TRACK_BEAUTY="LocalVideoTrack.setBeautyEffect",n.CAM_VIDEO_TRACK_SET_DEVICE="CameraVideoTrack.setDevice",n.CAM_VIDEO_TRACK_SET_ENCODER_CONFIG="CameraVideoTrack.setEncoderConfiguration",n.REMOTE_VIDEO_TRACK_PLAY="RemoteVideoTrack.play",n.REMOTE_VIDEO_TRACK_STOP="RemoteVideoTrack.stop",n.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE="RemoteVideoTrack.getVideoElementVisibleStatus",n.REMOTE_AUDIO_TRACK_PLAY="RemoteAudioTrack.play",n.REMOTE_AUDIO_TRACK_STOP="RemoteAudioTrack.stop",n.REMOTE_AUDIO_SET_VOLUME="RemoteAudioTrack.setVolume",n.REMOTE_AUDIO_SET_OUTPUT_DEVICE="RemoteAudioTrack.setOutputDevice",n.GET_MEDIA_STREAM_TRACK="Track.getMediaStreamTrack",n.STREAM_TYPE_CHANGE="streamTypeChange",n.CONNECTION_STATE_CHANGE="connectionStateChange",n.LOAD_CONFIG_FROM_LOCALSTORAGE="loadConfigFromLocalStorage",n.IMAGE_MODERATION_UPLOAD="imageModerationUpload"}(Zn||(Zn={})),function(n){n.TRACER="tracer"}(bn||(bn={})),function(n){n.IDLE="IDLE",n.INITING="INITING",n.INITEND="INITEND"}(lu||(lu={})),function(n){n.STATE_CHANGE="state_change",n.RECORDING_DEVICE_CHANGED="recordingDeviceChanged",n.PLAYOUT_DEVICE_CHANGED="playoutDeviceChanged",n.CAMERA_DEVICE_CHANGED="cameraDeviceChanged"}(lc||(lc={})),function(n){n[n.ACCESS_POINT=101]="ACCESS_POINT",n[n.UNILBS=201]="UNILBS",n[n.STRING_UID_ALLOCATOR=901]="STRING_UID_ALLOCATOR"}(Td||(Td={})),function(n){n[n.IIIEGAL_APPID=1]="IIIEGAL_APPID",n[n.IIIEGAL_UID=2]="IIIEGAL_UID",n[n.INTERNAL_ERROR=3]="INTERNAL_ERROR"}(Np||(Np={})),function(n){n[n.INVALID_VENDOR_KEY=5]="INVALID_VENDOR_KEY",n[n.INVALID_CHANNEL_NAME=7]="INVALID_CHANNEL_NAME",n[n.INTERNAL_ERROR=8]="INTERNAL_ERROR",n[n.NO_AUTHORIZED=9]="NO_AUTHORIZED",n[n.DYNAMIC_KEY_TIMEOUT=10]="DYNAMIC_KEY_TIMEOUT",n[n.NO_ACTIVE_STATUS=11]="NO_ACTIVE_STATUS",n[n.DYNAMIC_KEY_EXPIRED=13]="DYNAMIC_KEY_EXPIRED",n[n.STATIC_USE_DYNAMIC_KEY=14]="STATIC_USE_DYNAMIC_KEY",n[n.DYNAMIC_USE_STATIC_KEY=15]="DYNAMIC_USE_STATIC_KEY",n[n.USER_OVERLOAD=16]="USER_OVERLOAD",n[n.FORBIDDEN_REGION=18]="FORBIDDEN_REGION",n[n.CANNOT_MEET_AREA_DEMAND=19]="CANNOT_MEET_AREA_DEMAND"}(xo||(xo={})),function(n){n[n.NO_FLAG_SET=100]="NO_FLAG_SET",n[n.FLAG_SET_BUT_EMPTY=101]="FLAG_SET_BUT_EMPTY",n[n.INVALID_FALG_SET=102]="INVALID_FALG_SET",n[n.FLAG_SET_BUT_NO_RE=103]="FLAG_SET_BUT_NO_RE",n[n.INVALID_SERVICE_ID=104]="INVALID_SERVICE_ID",n[n.NO_SERVICE_AVAILABLE=200]="NO_SERVICE_AVAILABLE",n[n.NO_SERVICE_AVAILABLE_P2P=201]="NO_SERVICE_AVAILABLE_P2P",n[n.NO_SERVICE_AVAILABLE_VOICE=202]="NO_SERVICE_AVAILABLE_VOICE",n[n.NO_SERVICE_AVAILABLE_WEBRTC=203]="NO_SERVICE_AVAILABLE_WEBRTC",n[n.NO_SERVICE_AVAILABLE_CDS=204]="NO_SERVICE_AVAILABLE_CDS",n[n.NO_SERVICE_AVAILABLE_CDN=205]="NO_SERVICE_AVAILABLE_CDN",n[n.NO_SERVICE_AVAILABLE_TDS=206]="NO_SERVICE_AVAILABLE_TDS",n[n.NO_SERVICE_AVAILABLE_REPORT=207]="NO_SERVICE_AVAILABLE_REPORT",n[n.NO_SERVICE_AVAILABLE_APP_CENTER=208]="NO_SERVICE_AVAILABLE_APP_CENTER",n[n.NO_SERVICE_AVAILABLE_ENV0=209]="NO_SERVICE_AVAILABLE_ENV0",n[n.NO_SERVICE_AVAILABLE_VOET=210]="NO_SERVICE_AVAILABLE_VOET",n[n.NO_SERVICE_AVAILABLE_STRING_UID=211]="NO_SERVICE_AVAILABLE_STRING_UID",n[n.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS=212]="NO_SERVICE_AVAILABLE_WEBRTC_UNILBS",n[n.NO_SERVICE_AVAILABLE_UNILBS_FLV=213]="NO_SERVICE_AVAILABLE_UNILBS_FLV"}(Qr||(Qr={})),function(n){n[n.K_TIMESTAMP_EXPIRED=2]="K_TIMESTAMP_EXPIRED",n[n.K_CHANNEL_PERMISSION_INVALID=3]="K_CHANNEL_PERMISSION_INVALID",n[n.K_CERTIFICATE_INVALID=4]="K_CERTIFICATE_INVALID",n[n.K_CHANNEL_NAME_EMPTY=5]="K_CHANNEL_NAME_EMPTY",n[n.K_CHANNEL_NOT_FOUND=6]="K_CHANNEL_NOT_FOUND",n[n.K_TICKET_INVALID=7]="K_TICKET_INVALID",n[n.K_CHANNEL_CONFLICTED=8]="K_CHANNEL_CONFLICTED",n[n.K_SERVICE_NOT_READY=9]="K_SERVICE_NOT_READY",n[n.K_SERVICE_TOO_HEAVY=10]="K_SERVICE_TOO_HEAVY",n[n.K_UID_BANNED=14]="K_UID_BANNED",n[n.K_IP_BANNED=15]="K_IP_BANNED",n[n.K_CHANNEL_BANNED=16]="K_CHANNEL_BANNED",n[n.WARN_NO_AVAILABLE_CHANNEL=103]="WARN_NO_AVAILABLE_CHANNEL",n[n.WARN_LOOKUP_CHANNEL_TIMEOUT=104]="WARN_LOOKUP_CHANNEL_TIMEOUT",n[n.WARN_LOOKUP_CHANNEL_REJECTED=105]="WARN_LOOKUP_CHANNEL_REJECTED",n[n.WARN_OPEN_CHANNEL_TIMEOUT=106]="WARN_OPEN_CHANNEL_TIMEOUT",n[n.WARN_OPEN_CHANNEL_REJECTED=107]="WARN_OPEN_CHANNEL_REJECTED",n[n.WARN_REQUEST_DEFERRED=108]="WARN_REQUEST_DEFERRED",n[n.ERR_DYNAMIC_KEY_TIMEOUT=109]="ERR_DYNAMIC_KEY_TIMEOUT",n[n.ERR_NO_AUTHORIZED=110]="ERR_NO_AUTHORIZED",n[n.ERR_VOM_SERVICE_UNAVAILABLE=111]="ERR_VOM_SERVICE_UNAVAILABLE",n[n.ERR_NO_CHANNEL_AVAILABLE_CODE=112]="ERR_NO_CHANNEL_AVAILABLE_CODE",n[n.ERR_MASTER_VOCS_UNAVAILABLE=114]="ERR_MASTER_VOCS_UNAVAILABLE",n[n.ERR_INTERNAL_ERROR=115]="ERR_INTERNAL_ERROR",n[n.ERR_NO_ACTIVE_STATUS=116]="ERR_NO_ACTIVE_STATUS",n[n.ERR_INVALID_UID=117]="ERR_INVALID_UID",n[n.ERR_DYNAMIC_KEY_EXPIRED=118]="ERR_DYNAMIC_KEY_EXPIRED",n[n.ERR_STATIC_USE_DYANMIC_KE=119]="ERR_STATIC_USE_DYANMIC_KE",n[n.ERR_DYNAMIC_USE_STATIC_KE=120]="ERR_DYNAMIC_USE_STATIC_KE",n[n.ERR_NO_VOCS_AVAILABLE=2e3]="ERR_NO_VOCS_AVAILABLE",n[n.ERR_NO_VOS_AVAILABLE=2001]="ERR_NO_VOS_AVAILABLE",n[n.ERR_JOIN_CHANNEL_TIMEOUT=2002]="ERR_JOIN_CHANNEL_TIMEOUT",n[n.ERR_REPEAT_JOIN_CHANNEL=2003]="ERR_REPEAT_JOIN_CHANNEL",n[n.ERR_JOIN_BY_MULTI_IP=2004]="ERR_JOIN_BY_MULTI_IP",n[n.ERR_NOT_JOINED=2011]="ERR_NOT_JOINED",n[n.ERR_REPEAT_JOIN_REQUEST=2012]="ERR_REPEAT_JOIN_REQUEST",n[n.ERR_INVALID_VENDOR_KEY=2013]="ERR_INVALID_VENDOR_KEY",n[n.ERR_INVALID_CHANNEL_NAME=2014]="ERR_INVALID_CHANNEL_NAME",n[n.ERR_INVALID_STRINGUID=2015]="ERR_INVALID_STRINGUID",n[n.ERR_TOO_MANY_USERS=2016]="ERR_TOO_MANY_USERS",n[n.ERR_SET_CLIENT_ROLE_TIMEOUT=2017]="ERR_SET_CLIENT_ROLE_TIMEOUT",n[n.ERR_SET_CLIENT_ROLE_NO_PERMISSION=2018]="ERR_SET_CLIENT_ROLE_NO_PERMISSION",n[n.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE=2019]="ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",n[n.ERR_PUBLISH_REQUEST_INVALID=2020]="ERR_PUBLISH_REQUEST_INVALID",n[n.ERR_SUBSCRIBE_REQUEST_INVALID=2021]="ERR_SUBSCRIBE_REQUEST_INVALID",n[n.ERR_NOT_SUPPORTED_MESSAGE=2022]="ERR_NOT_SUPPORTED_MESSAGE",n[n.ERR_ILLEAGAL_PLUGIN=2023]="ERR_ILLEAGAL_PLUGIN",n[n.ERR_REJOIN_TOKEN_INVALID=2024]="ERR_REJOIN_TOKEN_INVALID",n[n.ERR_REJOIN_USER_NOT_JOINED=2025]="ERR_REJOIN_USER_NOT_JOINED",n[n.ERR_INVALID_OPTIONAL_INFO=2027]="ERR_INVALID_OPTIONAL_INFO",n[n.ILLEGAL_AES_PASSWORD=2028]="ILLEGAL_AES_PASSWORD",n[n.ILLEGAL_CLIENT_ROLE_LEVEL=2029]="ILLEGAL_CLIENT_ROLE_LEVEL",n[n.ERR_TOO_MANY_BROADCASTERS=2031]="ERR_TOO_MANY_BROADCASTERS",n[n.ERR_TOO_MANY_SUBSCRIBERS=2032]="ERR_TOO_MANY_SUBSCRIBERS",n[n.ERR_LICENSE_MISSING=32769]="ERR_LICENSE_MISSING",n[n.ERR_LICENSE_EXPIRED=32771]="ERR_LICENSE_EXPIRED",n[n.ERR_LICENSE_MINUTES_EXCEEDED=32773]="ERR_LICENSE_MINUTES_EXCEEDED",n[n.ERR_LICENSE_PERIOD_INVALID=32774]="ERR_LICENSE_PERIOD_INVALID",n[n.ERR_LICENSE_MULTIPLE_SDK_SERVICE=32778]="ERR_LICENSE_MULTIPLE_SDK_SERVICE",n[n.ERR_LICENSE_ILLEGAL=32783]="ERR_LICENSE_ILLEGAL",n[n.ERR_TEST_RECOVER=9e3]="ERR_TEST_RECOVER",n[n.ERR_TEST_TRYNEXT=9001]="ERR_TEST_TRYNEXT",n[n.ERR_TEST_RETRY=9002]="ERR_TEST_RETRY"}(Ke||(Ke={})),function(n){n[n.AUDIENCE_LEVEL_LOW_LATENCY=1]="AUDIENCE_LEVEL_LOW_LATENCY",n[n.AUDIENCE_LEVEL_ULTRA_LOW_LATENCY=2]="AUDIENCE_LEVEL_ULTRA_LOW_LATENCY",n[n.AUDIENCE_LEVEL_SYNC_LATENCY=3]="AUDIENCE_LEVEL_SYNC_LATENCY"}(kS||(kS={})),function(n){n.LEAVE="LEAVE",n.NETWORK_ERROR="NETWORK_ERROR",n.SERVER_ERROR="SERVER_ERROR",n.UID_BANNED="UID_BANNED",n.IP_BANNED="IP_BANNED",n.CHANNEL_BANNED="CHANNEL_BANNED",n.FALLBACK="FALLBACK",n.LICENSE_MISSING="LICENSE_MISSING",n.LICENSE_EXPIRED="LICENSE_EXPIRED",n.LICENSE_MINUTES_EXCEEDED="LICENSE_MINUTES_EXCEEDED",n.LICENSE_PERIOD_INVALID="LICENSE_PERIOD_INVALID",n.LICENSE_MULTIPLE_SDK_SERVICE="LICENSE_MULTIPLE_SDK_SERVICE",n.LICENSE_ILLEGAL="LICENSE_ILLEGAL"}(Wt||(Wt={})),function(n){n.CONNECTION_STATE_CHANGE="connection-state-change",n.MEDIA_RECONNECT_START="media-reconnect-start",n.MEDIA_RECONNECT_END="media-reconnect-end",n.IS_USING_CLOUD_PROXY="is-using-cloud-proxy",n.USER_JOINED="user-joined",n.USER_LEAVED="user-left",n.USER_PUBLISHED="user-published",n.USER_UNPUBLISHED="user-unpublished",n.USER_INFO_UPDATED="user-info-updated",n.CLIENT_BANNED="client-banned",n.CHANNEL_MEDIA_RELAY_STATE="channel-media-relay-state",n.CHANNEL_MEDIA_RELAY_EVENT="channel-media-relay-event",n.VOLUME_INDICATOR="volume-indicator",n.CRYPT_ERROR="crypt-error",n.ON_TOKEN_PRIVILEGE_WILL_EXPIRE="token-privilege-will-expire",n.ON_TOKEN_PRIVILEGE_DID_EXPIRE="token-privilege-did-expire",n.NETWORK_QUALITY="network-quality",n.STREAM_TYPE_CHANGED="stream-type-changed",n.STREAM_FALLBACK="stream-fallback",n.RECEIVE_METADATA="receive-metadata",n.STREAM_MESSAGE="stream-message",n.LIVE_STREAMING_ERROR="live-streaming-error",n.LIVE_STREAMING_WARNING="live-streaming-warning",n.INJECT_STREAM_STATUS="stream-inject-status",n.EXCEPTION="exception",n.ERROR="error",n.P2P_LOST="p2p_lost",n.JOIN_FALLBACK_TO_PROXY="join-fallback-to-proxy",n.CHANNEL_FALLBACK_TO_WEBSOCKET="channel-fallback-to-websocket",n.MEDIA_CONNECTION_TYPE_CHANGE="media-connection-type-change",n.PUBLISHED_USER_LIST="published-user-list",n.CONTENT_INSPECT_CONNECTION_STATE_CHANGE="content-inspect-connection-state-change",n.CONTENT_INSPECT_ERROR="content-inspect-error",n.CONTENT_INSPECT_RESULT="content-inspect-result",n.IMAGE_MODERATION_CONNECTION_STATE_CHANGE="image-moderation-connection-state-change"}(Tt||(Tt={})),function(n){n.NETWORK_ERROR="NETWORK_ERROR",n.SERVER_ERROR="SERVER_ERROR",n.MULTI_IP="MULTI_IP",n.TIMEOUT="TIMEOUT",n.OFFLINE="OFFLINE",n.LEAVE="LEAVE",n.P2P_FAILED="P2P_FAILED",n.FALLBACK="FALLBACK"}(Mi||(Mi={})),function(n){n.CONNECTING="connecting",n.CONNECTED="connected",n.RECONNECTING="reconnecting",n.CLOSED="closed"}(Zt||(Zt={})),function(n){n.WS_CONNECTED="ws_connected",n.WS_RECONNECTING="ws_reconnecting",n.WS_CLOSED="ws_closed",n.WS_RECONNECT_WAITTING_FINISH="ws_reconnect_waitting_finish",n.WS_RECONNECT_CREATE_CONNECTION="ws_reconnect_create_connection",n.ON_BINARY_DATA="on_binary_data",n.REQUEST_RECOVER="request_recover",n.REQUEST_JOIN_INFO="request_join_info",n.REQUEST_REJOIN_INFO="req_rejoin_info",n.IS_P2P_DISCONNECTED="is_p2p_dis",n.DISCONNECT_P2P="dis_p2p",n.ABORT_P2P_EXECUTION="abort_p2p_execution",n.NEED_RENEW_SESSION="need-sid",n.REPORT_JOIN_GATEWAY="report_join_gateway",n.REQUEST_TIMEOUT="request_timeout",n.REQUEST_SUCCESS="request_success",n.JOIN_RESPONSE="join_response",n.DATACHANNEL_PRECONNECT="datachannel_preconnect",n.DATACHANNEL_CONNECTING="datachannel_connecting",n.DATACHANNEL_FAILBACK="datachannel_failback"}(Be||(Be={})),function(n){n.PING="ping",n.PING_BACK="ping_back",n.JOIN="join_v3",n.REJOIN="rejoin_v3",n.LEAVE="leave",n.SET_CLIENT_ROLE="set_client_role",n.PUBLISH="publish",n.UNPUBLISH="unpublish",n.SUBSCRIBE="subscribe",n.SUBSCRIBE_STREAMS="subscribe_streams",n.UNSUBSCRIBE="unsubscribe",n.UNSUBSCRIBE_STREAMS="unsubscribe_streams",n.SUBSCRIBE_CHANGE="subscribe_change",n.TRAFFIC_STATS="traffic_stats",n.RENEW_TOKEN="renew_token",n.SWITCH_VIDEO_STREAM="switch_video_stream",n.DEFAULT_VIDEO_STREAM="default_video_stream",n.SET_FALLBACK_OPTION="set_fallback_option",n.GATEWAY_INFO="gateway_info",n.CONTROL="control",n.SEND_METADATA="send_metadata",n.DATA_STREAM="data_stream",n.PICK_SVC_LAYER="pick_svc_layer",n.RESTART_ICE="restart_ice",n.CONNECT_PC="connect_pc",n.SET_VIDEO_PROFILE="set_video_profile",n.SET_PARAMETER="set_parameter"}(Je||(Je={})),function(n){n.PUBLISH_STATS="publish_stats",n.PUBLISH_RELATED_STATS="publish_related_stats",n.SUBSCRIBE_STATS="subscribe_stats",n.SUBSCRIBE_RELATED_STATS="subscribe_related_stats",n.WS_INFLATE_DATA_LENGTH="ws_inflate_data_length",n.DENOISER_STATS="denoiser_stats",n.TRANSPORT_STATS="transport_stats",n.EXTENSION_USAGE_STATS="extension_usage_stats"}(go||(go={})),function(n){n.ON_USER_ONLINE="on_user_online",n.ON_USER_OFFLINE="on_user_offline",n.ON_STREAM_FALLBACK_UPDATE="on_stream_fallback_update",n.ON_PUBLISH_STREAM="on_publish_stream",n.ON_UPLINK_STATS="on_uplink_stats",n.ON_P2P_LOST="on_p2p_lost",n.ON_REMOVE_STREAM="on_remove_stream",n.ON_ADD_AUDIO_STREAM="on_add_audio_stream",n.ON_ADD_VIDEO_STREAM="on_add_video_stream",n.ON_TOKEN_PRIVILEGE_WILL_EXPIRE="on_token_privilege_will_expire",n.ON_TOKEN_PRIVILEGE_DID_EXPIRE="on_token_privilege_did_expire",n.ON_USER_BANNED="on_user_banned",n.ON_USER_LICENSE_BANNED="on_user_license_banned",n.ON_NOTIFICATION="on_notification",n.ON_CRYPT_ERROR="on_crypt_error",n.MUTE_AUDIO="mute_audio",n.MUTE_VIDEO="mute_video",n.UNMUTE_AUDIO="unmute_audio",n.UNMUTE_VIDEO="unmute_video",n.ON_P2P_OK="on_p2p_ok",n.RECEIVE_METADATA="receive_metadata",n.ON_DATA_STREAM="on_data_stream",n.ENABLE_LOCAL_VIDEO="enable_local_video",n.DISABLE_LOCAL_VIDEO="disable_local_video",n.ENABLE_LOCAL_AUDIO="enable_local_audio",n.DISABLE_LOCAL_AUDIO="disable_local_audio",n.ON_PUBLISHED_USER_LIST="on_published_user_list"}(_t||(_t={})),function(n){n.CONNECTION_STATE_CHANGE="CONNECTION_STATE_CHANGE",n.NEED_ANSWER="NEED_ANSWER",n.NEED_RENEGOTIATE="NEED_RENEGOTIATE",n.P2P_LOST="P2P_LOST",n.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",n.NEED_UNPUB="NEED_UNPUB",n.NEED_UNSUB="NEED_UNSUB",n.NEED_UPLOAD="NEED_UPLOAD",n.NEED_CONTROL="NEED_CONTROL",n.START_RECONNECT="START_RECONNECT",n.END_RECONNECT="END_RECONNECT",n.NEED_SIGNAL_RTT="NEED_SIGNAL_RTT"}(nP||(nP={})),function(n){n.AUDIO_SOURCE_STATE_CHANGE="audio_source_state_change",n.RECEIVE_TRACK_BUFFER="receive_track_buffer",n.ON_AUDIO_BUFFER="on_audio_buffer",n.UPDATE_SOURCE="update_source"}(Zi||(Zi={}));const LS={sendVolumeLevel:0,sendBitrate:0,sendBytes:0,sendPackets:0,sendPacketsLost:0,currentPacketLossRate:0},MS={sendBytes:0,sendBitrate:0,sendPackets:0,sendPacketsLost:0,sendResolutionHeight:0,sendResolutionWidth:0,captureResolutionHeight:0,captureResolutionWidth:0,targetSendBitrate:0,totalDuration:0,totalFreezeTime:0,currentPacketLossRate:0},aP={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveLevel:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1},ZY={uplinkNetworkQuality:0,downlinkNetworkQuality:0},sP={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,receiveResolutionHeight:0,receiveResolutionWidth:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1};let it,sr,Zc;(function(n){n.CONNECTED="websocket:connected",n.RECONNECTING="websocket:reconnecting",n.WILL_RECONNECT="websocket:will_reconnect",n.CLOSED="websocket:closed",n.FAILED="websocket:failed",n.ON_MESSAGE="websocket:on_message",n.REQUEST_NEW_URLS="websocket:request_new_urls",n.RECONNECT_WAITTING_FINISH="websocket:reconnect_waitting_finish",n.RECONNECT_CREATE_CONNECTION="websocket:reconnect_create_connection",n.ON_TOKEN_PRIVILEGE_DID_EXPIRE="websocket:on_token_privilege_did_expire"})(it||(it={})),function(n){n.TRANSCODE="mix_streaming",n.RAW="raw_streaming",n.INJECT="inject_streaming"}(sr||(sr={})),function(n){n[n.INJECT_STREAM_STATUS_START_SUCCESS=0]="INJECT_STREAM_STATUS_START_SUCCESS",n[n.INJECT_STREAM_STATUS_START_ALREADY_EXISTS=1]="INJECT_STREAM_STATUS_START_ALREADY_EXISTS",n[n.INJECT_STREAM_STATUS_START_UNAUTHORIZED=2]="INJECT_STREAM_STATUS_START_UNAUTHORIZED",n[n.INJECT_STREAM_STATUS_START_TIMEOUT=3]="INJECT_STREAM_STATUS_START_TIMEOUT",n[n.INJECT_STREAM_STATUS_START_FAILED=4]="INJECT_STREAM_STATUS_START_FAILED",n[n.INJECT_STREAM_STATUS_STOP_SUCCESS=5]="INJECT_STREAM_STATUS_STOP_SUCCESS",n[n.INJECT_STREAM_STATUS_STOP_NOT_FOUND=6]="INJECT_STREAM_STATUS_STOP_NOT_FOUND",n[n.INJECT_STREAM_STATUS_STOP_UNAUTHORIZED=7]="INJECT_STREAM_STATUS_STOP_UNAUTHORIZED",n[n.INJECT_STREAM_STATUS_STOP_TIMEOUT=8]="INJECT_STREAM_STATUS_STOP_TIMEOUT",n[n.INJECT_STREAM_STATUS_STOP_FAILED=9]="INJECT_STREAM_STATUS_STOP_FAILED",n[n.INJECT_STREAM_STATUS_BROKEN=10]="INJECT_STREAM_STATUS_BROKEN"}(Zc||(Zc={}));const eq={alpha:1,height:640,width:360,x:0,y:0,zOrder:0,audioChannel:0},US={x:0,y:0,width:160,height:160,zOrder:255,alpha:1};function jS(n,r){Xr(n.url,"".concat(r,".url"),1,1e3,!1),yn(n.x)||sn(n.x,"".concat(r,".x"),0,1e4),yn(n.y)||sn(n.y,"".concat(r,".y"),0,1e4),yn(n.width)||sn(n.width,"".concat(r,".width"),0,1e4),yn(n.height)||sn(n.height,"".concat(r,".height"),0,1e4),yn(n.zOrder)||sn(n.zOrder,"".concat(r,".zOrder"),0,255),yn(n.alpha)||sn(n.alpha,"".concat(r,".alpha"),0,1,!1)}const tq={audioBitrate:48,audioChannels:1,audioSampleRate:48e3,backgroundColor:0,height:360,lowLatency:!1,videoBitrate:400,videoCodecProfile:100,videoCodecType:1,videoFrameRate:15,videoGop:30,width:640,images:[],userConfigs:[],userConfigExtraInfo:""},nq={audioBitrate:48,audioChannels:2,audioVolume:100,audioSampleRate:48e3,height:0,width:0,videoBitrate:400,videoFramerate:15,videoGop:30};let Ia,Rd,Vn,cP,Zr,ns,Ii,el,cr,Tn,er,U0,Ze,pr,Id,FS,VS,Pp,tl,wd,xt;function lP(n){if(!n.channelName)throw new Q(W.INVALID_PARAMS,"invalid channelName in info");if(typeof n.uid!="number")throw new Q(W.INVALID_PARAMS,"invalid uid in info, uid must be a number");return n.token&&Xr(n.token,"info.token",1,2047),xS(n.uid),NS(n.channelName),!0}function uP(n){return Rr(n,"mediaSource",["screen","window","application"]),!0}(function(n){n.WARNING="@live_uap-warning",n.ERROR="@line_uap-error",n.PUBLISH_STREAM_STATUS="@live_uap-publish-status",n.INJECT_STREAM_STATUS="@live_uap-inject-status",n.WORKER_STATUS="@live_uap-worker-status",n.REQUEST_NEW_ADDRESS="@live_uap-request-address"})(Ia||(Ia={})),function(n){n.REQUEST_WORKER_MANAGER_LIST="@live_req_worker_manager"}(Rd||(Rd={})),function(n){n[n.LIVE_STREAM_RESPONSE_SUCCEED=200]="LIVE_STREAM_RESPONSE_SUCCEED",n[n.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM=454]="LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM",n[n.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR=450]="LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR",n[n.LIVE_STREAM_RESPONSE_BAD_STREAM=451]="LIVE_STREAM_RESPONSE_BAD_STREAM",n[n.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR=400]="LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR",n[n.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST=404]="LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST",n[n.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED=456]="LIVE_STREAM_RESPONSE_NOT_AUTHORIZED",n[n.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE=457]="LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE",n[n.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN=429]="LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN",n[n.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH=452]="LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH",n[n.LIVE_STREAM_RESPONSE_NOT_SUPPORTED=453]="LIVE_STREAM_RESPONSE_NOT_SUPPORTED",n[n.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM=455]="LIVE_STREAM_RESPONSE_MAX_STREAM_NUM",n[n.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR=500]="LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR",n[n.LIVE_STREAM_RESPONSE_WORKER_LOST=501]="LIVE_STREAM_RESPONSE_WORKER_LOST",n[n.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT=502]="LIVE_STREAM_RESPONSE_RESOURCE_LIMIT",n[n.LIVE_STREAM_RESPONSE_WORKER_QUIT=503]="LIVE_STREAM_RESPONSE_WORKER_QUIT",n[n.ERROR_FAIL_SEND_MESSAGE=504]="ERROR_FAIL_SEND_MESSAGE",n[n.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE=30]="PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE",n[n.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT=31]="PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT",n[n.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH=32]="PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH",n[n.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN=33]="PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN"}(Vn||(Vn={})),function(n){n.CONNECT_FAILED="connect failed",n.CONNECT_TIMEOUT="connect timeout",n.WS_DISCONNECTED="websocket disconnected",n.REQUEST_TIMEOUT="request timeout",n.REQUEST_FAILED="request failed",n.WAIT_STATUS_TIMEOUT="wait status timeout",n.WAIT_STATUS_ERROR="wait status error",n.BAD_STATE="bad state",n.WS_ABORT="ws abort",n.AP_REQUEST_TIMEOUT="AP request timeout",n.AP_JSON_PARSE_ERROR="AP json parse error",n.AP_REQUEST_ERROR="AP request error",n.AP_REQUEST_ABORT="AP request abort"}(cP||(cP={})),function(n){n[n.SetSdkProfile=0]="SetSdkProfile",n[n.SetSourceChannel=1]="SetSourceChannel",n[n.SetSourceUserId=2]="SetSourceUserId",n[n.SetDestChannel=3]="SetDestChannel",n[n.StartPacketTransfer=4]="StartPacketTransfer",n[n.StopPacketTransfer=5]="StopPacketTransfer",n[n.UpdateDestChannel=6]="UpdateDestChannel",n[n.Reconnect=7]="Reconnect",n[n.SetVideoProfile=8]="SetVideoProfile"}(Zr||(Zr={})),function(n){n.NETWORK_DISCONNECTED="NETWORK_DISCONNECTED",n.NETWORK_CONNECTED="NETWORK_CONNECTED",n.PACKET_JOINED_SRC_CHANNEL="PACKET_JOINED_SRC_CHANNEL",n.PACKET_JOINED_DEST_CHANNEL="PACKET_JOINED_DEST_CHANNEL",n.PACKET_SENT_TO_DEST_CHANNEL="PACKET_SENT_TO_DEST_CHANNEL",n.PACKET_RECEIVED_VIDEO_FROM_SRC="PACKET_RECEIVED_VIDEO_FROM_SRC",n.PACKET_RECEIVED_AUDIO_FROM_SRC="PACKET_RECEIVED_AUDIO_FROM_SRC",n.PACKET_UPDATE_DEST_CHANNEL="PACKET_UPDATE_DEST_CHANNEL",n.PACKET_UPDATE_DEST_CHANNEL_REFUSED="PACKET_UPDATE_DEST_CHANNEL_REFUSED",n.PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE="PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE"}(ns||(ns={})),function(n){n.RELAY_STATE_IDLE="RELAY_STATE_IDLE",n.RELAY_STATE_CONNECTING="RELAY_STATE_CONNECTING",n.RELAY_STATE_RUNNING="RELAY_STATE_RUNNING",n.RELAY_STATE_FAILURE="RELAY_STATE_FAILURE"}(Ii||(Ii={})),function(n){n.RELAY_OK="RELAY_OK",n.SERVER_CONNECTION_LOST="SERVER_CONNECTION_LOST",n.SRC_TOKEN_EXPIRED="SRC_TOKEN_EXPIRED",n.DEST_TOKEN_EXPIRED="DEST_TOKEN_EXPIRED"}(el||(el={})),function(n){n.High="high",n.Low="low",n.Audio="audio",n.Screen="screen",n.ScreenLow="screen_low"}(cr||(cr={})),function(n){n.DISCONNECT="disconnect",n.CONNECTION_STATE_CHANGE="connection-state-change",n.NETWORK_QUALITY="network-quality",n.STREAM_TYPE_CHANGE="stream-type-change",n.IS_P2P_DISCONNECTED="is-p2p-dis",n.DISCONNECT_P2P="dis-p2p",n.REQUEST_NEW_GATEWAY_LIST="req-gate-url",n.NEED_RENEW_SESSION="need-sid",n.REQUEST_P2P_CONNECTION_PARAMS="request-p2p-connection-params",n.JOIN_RESPONSE="join-response",n.REQUEST_DC_CONNECTION_PARAMS="request-dc-connection-params",n.RESET_CONNECTION_EVENTS="reset-connection-events",n.DATACHANNEL_PRECONNECT="datachannel_preconnect",n.DATACHANNEL_FAILBACK="datachannel_failback",n.RESET_SIGNAL="reset-signal"}(Tn||(Tn={})),function(n){n[n.Nothing=0]="Nothing",n[n.Audio=1]="Audio",n[n.LwoVideo=2]="LwoVideo",n[n.Video=4]="Video",n[n.Data=8]="Data"}(er||(er={})),function(n){n[n.websocket=0]="websocket",n[n.datachannel=1]="datachannel"}(U0||(U0={})),function(n){n.NEED_RENEGOTIATE="@need_renegotiate",n.NEED_REPLACE_TRACK="@need_replace_track",n.NEED_CLOSE="@need_close",n.NEED_ENABLE_TRACK="@need_enable_track",n.NEED_DISABLE_TRACK="@need_disable_track",n.NEED_SESSION_ID="@need_sid",n.SET_OPTIMIZATION_MODE="@set_optimization_mode",n.GET_STATS="@get_stats",n.GET_LOW_VIDEO_TRACK="@get_low_video_track",n.NEED_RESET_REMOTE_SDP="@need_reset_remote_sdp",n.NEED_UPDATE_VIDEO_ENCODER="@need_update_video_encoder",n.NEED_MUTE_TRACK="@need_mute_track",n.NEED_UNMUTE_TRACK="@need_unmute_track"}(Ze||(Ze={})),function(n){n.SCREEN_TRACK="screen_track",n.CUSTOM_TRACK="custome_track",n.LOW_STREAM="low_stream"}(pr||(pr={})),function(n){n[n.HIGH_STREAM=0]="HIGH_STREAM",n[n.LOW_STREAM=1]="LOW_STREAM"}(Id||(Id={})),function(n){n[n.HIGH_STREAM=0]="HIGH_STREAM",n[n.LOW_STREAM=1]="LOW_STREAM"}(FS||(FS={})),function(n){n[n.DISABLE=0]="DISABLE",n[n.LOW_STREAM=1]="LOW_STREAM",n[n.AUDIO_ONLY=2]="AUDIO_ONLY"}(VS||(VS={})),function(n){n.TRANSCEIVER_UPDATED="transceiver-updated"}(Pp||(Pp={})),function(n){n.SOURCE_STATE_CHANGE="source-state-change",n.TRACK_ENDED="track-ended",n.BEAUTY_EFFECT_OVERLOAD="beauty-effect-overload",n.VIDEO_ELEMENT_VISIBLE_STATUS="video-element-visible-status",n.CLOSED="closed"}(tl||(tl={})),function(n){n.FIRST_FRAME_DECODED="first-frame-decoded",n.VIDEO_ELEMENT_VISIBLE_STATUS="video-element-visible-status"}(wd||(wd={})),function(n){n.CHINA="CHINA",n.ASIA="ASIA",n.NORTH_AMERICA="NORTH_AMERICA",n.EUROPE="EUROPE",n.JAPAN="JAPAN",n.INDIA="INDIA",n.KOREA="KOREA",n.HKMC="HKMC",n.US="US",n.OCEANIA="OCEANIA",n.SOUTH_AMERICA="SOUTH_AMERICA",n.AFRICA="AFRICA",n.OVERSEA="OVERSEA",n.GLOBAL="GLOBAL",n.EXTENSIONS="EXTENSIONS"}(xt||(xt={}));const rq=[xt.AFRICA,xt.ASIA,xt.CHINA,xt.EUROPE,xt.GLOBAL,xt.INDIA,xt.JAPAN,xt.NORTH_AMERICA,xt.OCEANIA,xt.OVERSEA,xt.SOUTH_AMERICA];let Ir;(function(n){n.CHINA="CN",n.ASIA="AS",n.NORTH_AMERICA="NA",n.EUROPE="EU",n.JAPAN="JP",n.INDIA="IN",n.KOREA="KR",n.HKMC="HK",n.US="US",n.OCEANIA="OC",n.SOUTH_AMERICA="SA",n.AFRICA="AF",n.OVERSEA="OVERSEA",n.GLOBAL="GLOBAL",n.EXTENSIONS="GLOBAL"})(Ir||(Ir={}));const j0={CHINA:{},ASIA:{CODE:Ir.ASIA,WEBCS_DOMAIN:["ap-web-1-asia.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-asia.agora.io"],PROXY_CS:["proxy-ap-web-asia.agora.io"],CDS_AP:["cds-ap-web-asia.agora.io","cds-ap-web-asia2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-asia.agora.io","sua-ap-web-asia2.agora.io"],UAP_AP:["uap-ap-web-asia.agora.io","uap-ap-web-asia2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-asia.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-asia.agora.io"],LOG_UPLOAD_SERVER:["logservice-asia.agora.io"],PROXY_SERVER_TYPE3:["southeast-asia.webrtc-cloud-proxy.sd-rtn.com"]},NORTH_AMERICA:{CODE:Ir.NORTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-north-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-north-america.agora.io"],PROXY_CS:["proxy-ap-web-america.agora.io"],CDS_AP:["cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],UAP_AP:["uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-north-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-north-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-north-america.agora.io"],PROXY_SERVER_TYPE3:["east-usa.webrtc-cloud-proxy.sd-rtn.com"]},EUROPE:{CODE:Ir.EUROPE,WEBCS_DOMAIN:["ap-web-1-europe.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-europe.agora.io"],PROXY_CS:["proxy-ap-web-europe.agora.io"],CDS_AP:["cds-ap-web-europe.agora.io","cds-ap-web-europe2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-europe.agora.io","sua-ap-web-europe.agora.io"],UAP_AP:["uap-ap-web-europe.agora.io","uap-ap-web-europe2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-europe.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-europe.agora.io"],LOG_UPLOAD_SERVER:["logservice-europe.agora.io"],PROXY_SERVER_TYPE3:["europe.webrtc-cloud-proxy.sd-rtn.com"]},JAPAN:{CODE:Ir.JAPAN,WEBCS_DOMAIN:["ap-web-1-japan.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-japan.agora.io"],PROXY_CS:["proxy-ap-web-japan.agora.io"],CDS_AP:["cds-ap-web-japan.agora.io","cds-ap-web-japan2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-japan.agora.io","sua-ap-web-japan2.agora.io"],UAP_AP:["uap-ap-web-japan.agora.io","	uap-ap-web-japan2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-japan.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-japan.agora.io"],LOG_UPLOAD_SERVER:["logservice-japan.agora.io"],PROXY_SERVER_TYPE3:["japan.webrtc-cloud-proxy.sd-rtn.com"]},INDIA:{CODE:Ir.INDIA,WEBCS_DOMAIN:["ap-web-1-india.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-india.agora.io"],PROXY_CS:["proxy-ap-web-india.agora.io"],CDS_AP:["cds-ap-web-india.agora.io","cds-ap-web-india2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-india.agora.io","sua-ap-web-india2.agora.io"],UAP_AP:["uap-ap-web-india.agora.io","uap-ap-web-india2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-india.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-india.agora.io"],LOG_UPLOAD_SERVER:["logservice-india.agora.io"],PROXY_SERVER_TYPE3:["india.webrtc-cloud-proxy.sd-rtn.com"]},KOREA:{CODE:Ir.KOREA,WEBCS_DOMAIN:["ap-web-1-korea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-korea.agora.io"],PROXY_CS:["proxy-ap-web-korea.agora.io"],CDS_AP:["cds-ap-web-korea.agora.io","cds-ap-web-korea2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-korea.agora.io","sua-ap-web-korea2.agora.io"],UAP_AP:["uap-ap-web-korea.agora.io","uap-ap-web-korea2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-korea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-korea.agora.io"],LOG_UPLOAD_SERVER:["logservice-korea.agora.io"],PROXY_SERVER_TYPE3:["korea.webrtc-cloud-proxy.sd-rtn.com"]},HKMC:{CODE:Ir.HKMC,WEBCS_DOMAIN:["ap-web-1-hkmc.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-hkmc.agora.io"],PROXY_CS:["proxy-ap-web-hkmc.agora.io"],CDS_AP:["cds-ap-web-hkmc.agora.io","cds-ap-web-hkmc2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-hkmc.agora.io","sua-ap-web-hkmc2.agora.io"],UAP_AP:["uap-ap-web-hkmc.agora.io","uap-ap-web-hkmc2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-hkmc.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-hkmc.agora.io"],LOG_UPLOAD_SERVER:["logservice-hkmc.agora.io"],PROXY_SERVER_TYPE3:["hkmc.webrtc-cloud-proxy.sd-rtn.com"]},US:{CODE:Ir.US,WEBCS_DOMAIN:["ap-web-1-us.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-us.agora.io"],PROXY_CS:["proxy-ap-web-us.agora.io"],CDS_AP:["cds-ap-web-us.agora.io","cds-ap-web-us2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-us.agora.io","sua-ap-web-us2.agora.io"],UAP_AP:["uap-ap-web-us.agora.io","uap-ap-web-us2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-us.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-us.agora.io"],LOG_UPLOAD_SERVER:["logservice-us.agora.io"],PROXY_SERVER_TYPE3:["us.webrtc-cloud-proxy.sd-rtn.com"]},OVERSEA:{CODE:Ir.OVERSEA,WEBCS_DOMAIN:["ap-web-1-oversea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oversea.agora.io"],PROXY_CS:["proxy-ap-web-oversea.agora.io"],CDS_AP:["cds-ap-web-oversea.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oversea.agora.io"],UAP_AP:["uap-ap-web-oversea.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oversea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oversea.agora.io"],LOG_UPLOAD_SERVER:["logservice-oversea.agora.io"],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.agora.io"]},GLOBAL:{CODE:Ir.GLOBAL,WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-ap-web-3.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-ap-web-3.agora.io"],UAP_AP:["uap-ap-web-1.agora.io","uap-ap-web-3.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2.agora.io"],LOG_UPLOAD_SERVER:["logservice.agora.io"],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com"]},OCEANIA:{CODE:Ir.OCEANIA,WEBCS_DOMAIN:["ap-web-1-oceania.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oceania.agora.io"],PROXY_CS:["proxy-ap-web-oceania.agora.io"],CDS_AP:["cds-ap-web-oceania.agora.io","cds-ap-web-oceania2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oceania.agora.io","sua-ap-web-oceania2.agora.io"],UAP_AP:["uap-ap-web-oceania.agora.io","uap-ap-web-oceania2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oceania.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oceania.agora.io"],LOG_UPLOAD_SERVER:["logservice-oceania.agora.io"],PROXY_SERVER_TYPE3:["oceania.webrtc-cloud-proxy.sd-rtn.com"]},SOUTH_AMERICA:{CODE:Ir.SOUTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-south-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-south-america.agora.io"],PROXY_CS:["proxy-ap-web-south-america.agora.io"],CDS_AP:["cds-ap-web-south-america.agora.io","cds-ap-web-south-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-south-america.agora.io","sua-ap-web-south-america2.agora.io"],UAP_AP:["uap-ap-web-south-america.agora.io","uap-ap-web-south-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-south-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-south-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-america.agora.io"],PROXY_SERVER_TYPE3:["south-america.webrtc-cloud-proxy.sd-rtn.com"]},AFRICA:{CODE:Ir.AFRICA,WEBCS_DOMAIN:["ap-web-1-africa.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-africa.agora.io"],PROXY_CS:["proxy-ap-web-africa.agora.io"],CDS_AP:["cds-ap-web-africa.agora.io","cds-ap-web-africa2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-africa.agora.io","sua-ap-web-africa2.agora.io"],UAP_AP:["uap-ap-web-africa.agora.io","uap-ap-web-africa2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-africa.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-africa.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-africa.agora.io"],PROXY_SERVER_TYPE3:["africa.webrtc-cloud-proxy.sd-rtn.com"]},EXTENSIONS:{}};let Dp,dP,dt,Vr,rs,Le,fr,Pt,hi,nl,ei,eo,Po,Do,lr,Ls,Dn,is,hP,vo,na,rl;SS&&(j0.CHINA={CODE:Ir.CHINA,WEBCS_DOMAIN:["webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["proxy-web.ap.sd-rtn.com"],CDS_AP:["cds-web-2.ap.sd-rtn.com","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-web-2.ap.sd-rtn.com","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-web-2.ap.sd-rtn.com","uap-web-4.ap.sd-rtn.com"],EVENT_REPORT_DOMAIN:["web-3.statscollector.sd-rtn.com"],EVENT_REPORT_BACKUP_DOMAIN:["web-4.statscollector.sd-rtn.com"],LOG_UPLOAD_SERVER:["logservice-china.agora.io"],PROXY_SERVER_TYPE3:["east-cn.webrtc-cloud-proxy.sd-rtn.com"]}),function(n){n.UPDATE_BITRATE_LIMIT="update_bitrate_limit"}(Dp||(Dp={}));class F0 extends Rn{constructor(r,o){super(),N(this,"onICEConnectionStateChange",void 0),N(this,"onConnectionStateChange",void 0),N(this,"onDTLSTransportStateChange",void 0),N(this,"onDTLSTransportError",void 0),N(this,"onICETransportStateChange",void 0),N(this,"onFirstAudioReceived",void 0),N(this,"onFirstVideoReceived",void 0),N(this,"onFirstAudioDecoded",void 0),N(this,"onFirstVideoDecoded",void 0),N(this,"onFirstVideoDecodedTimeout",void 0),N(this,"onSelectedLocalCandidateChanged",void 0),N(this,"onSelectedRemoteCandidateChanged",void 0),N(this,"establishPromise",void 0)}}(function(n){n.SEND="sendonly",n.RECV="recvonly",n.SENDRECV="sendrecv",n.INACTIVE="inactive"})(dP||(dP={})),function(n){n.VIDEO="video",n.AUDIO="audio"}(dt||(dt={})),function(n){n[n.UDP=0]="UDP",n[n.TCP=1]="TCP",n[n.RELAY=2]="RELAY"}(Vr||(Vr={})),function(n){n[n.FIRST_CONNECTION=0]="FIRST_CONNECTION",n[n.TCP_RESTART=1]="TCP_RESTART",n[n.RELAY_RESTART=2]="RELAY_RESTART",n[n.OLD_FIRST_CONNECTION=10]="OLD_FIRST_CONNECTION",n[n.OLD_RESTART=11]="OLD_RESTART",n[n.DISCONNECTED_OR_FAILED=20]="DISCONNECTED_OR_FAILED"}(rs||(rs={})),function(n){n.LocalVideoTrack="videoTrack",n.LocalAudioTrack="audioTrack",n.LocalVideoLowTrack="videoLowTrack"}(Le||(Le={})),function(n){n.New="new",n.Connected="connected",n.Reconnecting="reconnecting",n.Disconnected="disconnected"}(fr||(fr={})),function(n){n.StateChange="stateChange",n.IceConnectionStateChange="iceConnectionStateChange",n.RequestMuteLocal="requestMuteLocal",n.RequestUnmuteLocal="requestUnmuteLocal",n.RequestRePublish="requestRePublish",n.RequestReSubscribe="requestReSubscribe",n.RequestUploadStats="requestUploadStats",n.MediaReconnectStart="MediaReconnectStart",n.MediaReconnectEnd="MediaReconnectEnd",n.NeedSignalRTT="NeedSignalRTT",n.RequestRestartICE="RequestRestartIce",n.PeerConnectionStateChange="PeerConnectionStateChange",n.RequestReconnect="RequestReconnect",n.RequestReconnectPC="RequestReconnectPC",n.RequestUnpublishForReconnectPC="RequestUnpublishForReconnectPC",n.P2PLost="P2PLost",n.UpdateVideoEncoder="UpdateVideoEncoder",n.ConnectionTypeChange="ConnectionTypeChange",n.RequestLowStreamParameter="RequestLowStreamParameter",n.QueryClientConnectionState="QueryClientConnectionState"}(Pt||(Pt={})),function(n){n.ONLINE="ONLINE",n.OFFLINE="OFFLINE"}(hi||(hi={})),function(n){n.NETWORK_STATE_CHANGE="NETWORK_STATE_CHANGE",n.ONLINE="ONLINE",n.OFFLINE="OFFLINE"}(nl||(nl={})),function(n){n.ON_TRACK="on_track",n.ON_NODE="on_node"}(ei||(ei={})),function(n){n.REQUEST_UPDATE_CONSTRAINTS="request_update_constraints",n.REQUEST_CONSTRAINTS="request_constraints"}(eo||(eo={})),function(n){n.CONNECTING="CONNECTING",n.RECONNECTING="RECONNECTING",n.CONNECTED="CONNECTED",n.CLOSED="CLOSED"}(Po||(Po={})),function(n){n[n.CONNECT_AP=0]="CONNECT_AP",n[n.AP_CONNECTED=1]="AP_CONNECTED",n[n.CONNECT_WORKER_MANAGER=2]="CONNECT_WORKER_MANAGER",n[n.WORKER_MANAGER_CONNECTED=3]="WORKER_MANAGER_CONNECTED",n[n.GET_WORKER_MANAGER_RESPONSE=4]="GET_WORKER_MANAGER_RESPONSE",n[n.CONNECT_WORKER=5]="CONNECT_WORKER",n[n.WORKER_CONNECTED=6]="WORKER_CONNECTED",n[n.CLOSED=7]="CLOSED"}(Do||(Do={})),function(n){n.CONNECTION_STATE_CHANGE="connection-state-change",n.STATE_CHANGE="state-change",n.INSPECT_RESULT="inspect-result",n.CLIENT_LOCAL_VIDEO_TRACK="client-local-video-track",n.REQUEST_NEW_WORKER_URL="request-new-worker-url"}(lr||(lr={})),function(n){n.NETWORK_ERROR="NETWORK_ERROR",n.SERVER_ERROR="SERVER_ERROR",n.MULTI_IP="MULTI_IP",n.TIMEOUT="TIMEOUT",n.OFFLINE="OFFLINE",n.LEAVE="LEAVE",n.P2P_FAILED="P2P_FAILED",n.FALLBACK="FALLBACK"}(Ls||(Ls={})),function(n){n.CONNECTED="transmitter:connected",n.RECONNECTING="transmitter:reconnecting",n.WILL_RECONNECT="transmitter:will_reconnect",n.CLOSED="transmitter:closed",n.FAILED="transmitter:failed",n.ON_MESSAGE="transmitter:on_message",n.REQUEST_NEW_URLS="transmitter:request_new_urls",n.RECONNECT_WAITTING_FINISH="transmitter:reconnect_waitting_finish",n.RECONNECT_CREATE_CONNECTION="transmitter:reconnect_create_connection",n.ON_TOKEN_PRIVILEGE_DID_EXPIRE="transmitter:on_token_privilege_did_expire",n.TO_CONNECT_DATACHANNEL="transmitter:to_connect_datachannel",n.FAILBACK="transmitter:failback"}(Dn||(Dn={})),function(n){n.CAMERA_CHANGED="camera-changed",n.MICROPHONE_CHANGED="microphone-changed",n.PLAYBACK_DEVICE_CHANGED="playback-device-changed",n.AUDIO_AUTOPLAY_FAILED="audio-autoplay-failed",n.AUTOPLAY_FAILED="autoplay-failed",n.SECURITY_POLICY_VIOLATION="security-policy-violation"}(is||(is={})),function(n){n[n.APP_TYPE_INVALID_VALUE=-1]="APP_TYPE_INVALID_VALUE",n[n.APP_TYPE_NATIVE=0]="APP_TYPE_NATIVE",n[n.APP_TYPE_NATIVE_COCOS=1]="APP_TYPE_NATIVE_COCOS",n[n.APP_TYPE_NATIVE_UNITY=2]="APP_TYPE_NATIVE_UNITY",n[n.APP_TYPE_NATIVE_ELECTRON=3]="APP_TYPE_NATIVE_ELECTRON",n[n.APP_TYPE_NATIVE_FLUTTER=4]="APP_TYPE_NATIVE_FLUTTER",n[n.APP_TYPE_NATIVE_UNREAL=5]="APP_TYPE_NATIVE_UNREAL",n[n.APP_TYPE_NATIVE_XAMARIN=6]="APP_TYPE_NATIVE_XAMARIN",n[n.APP_TYPE_NATIVE_API_CLOUD=7]="APP_TYPE_NATIVE_API_CLOUD",n[n.APP_TYPE_NATIVE_REACT_NATIVE=8]="APP_TYPE_NATIVE_REACT_NATIVE",n[n.APP_TYPE_NATIVE_PYTHON=9]="APP_TYPE_NATIVE_PYTHON",n[n.APP_TYPE_NATIVE_COCOS_CREATOR=10]="APP_TYPE_NATIVE_COCOS_CREATOR",n[n.APP_TYPE_NATIVE_RUST=11]="APP_TYPE_NATIVE_RUST",n[n.APP_TYPE_NATIVE_C_SHARP=12]="APP_TYPE_NATIVE_C_SHARP",n[n.APP_TYPE_NATIVE_CEF=13]="APP_TYPE_NATIVE_CEF",n[n.APP_TYPE_NATIVE_UNI_APP=14]="APP_TYPE_NATIVE_UNI_APP",n[n.APP_TYPE_WEBRTC=1e3]="APP_TYPE_WEBRTC",n[n.APP_TYPE_WEBRTC_REACT=1001]="APP_TYPE_WEBRTC_REACT",n[n.APP_TYPE_WEBRTC_VUE=1002]="APP_TYPE_WEBRTC_VUE",n[n.APP_TYPE_WEBRTC_ANGULAR=1003]="APP_TYPE_WEBRTC_ANGULAR"}(hP||(hP={})),function(n){n.CONNECTING="CONNECTING",n.RECONNECTING="RECONNECTING",n.CONNECTED="CONNECTED",n.CLOSED="CLOSED"}(vo||(vo={})),function(n){n.CONNECTION_STATE_CHANGE="connection-state-change",n.STATE_CHANGE="state-change",n.INSPECT_RESULT="inspect-result",n.CLIENT_LOCAL_VIDEO_TRACK="client-local-video-track",n.REQUEST_NEW_WORKER_URL="request-new-worker-url"}(na||(na={})),function(n){n[n.CONNECT_AP=0]="CONNECT_AP",n[n.AP_CONNECTED=1]="AP_CONNECTED",n[n.CONNECT_WORKER_MANAGER=2]="CONNECT_WORKER_MANAGER",n[n.WORKER_MANAGER_CONNECTED=3]="WORKER_MANAGER_CONNECTED",n[n.GET_WORKER_MANAGER_RESPONSE=4]="GET_WORKER_MANAGER_RESPONSE",n[n.CONNECT_WORKER=5]="CONNECT_WORKER",n[n.WORKER_CONNECTED=6]="WORKER_CONNECTED",n[n.CLOSED=7]="CLOSED"}(rl||(rl={}));const pi={getDisplayMedia:!1,getStreamFromExtension:!1,supportUnifiedPlan:!1,supportMinBitrate:!1,supportSetRtpSenderParameters:!1,supportDualStream:!0,webAudioMediaStreamDest:!1,supportReplaceTrack:!1,supportWebGL:!1,webAudioWithAEC:!1,supportRequestFrame:!1,supportShareAudio:!1,supportDualStreamEncoding:!1,supportDataChannel:!1,supportPCSetConfiguration:!1,supportWebRTCEncodedTransform:!1};function zn(){return pi}let yr;(function(n){n[n.CHOOSE_SERVER=11]="CHOOSE_SERVER",n[n.CLOUD_PROXY=18]="CLOUD_PROXY",n[n.CLOUD_PROXY_5=20]="CLOUD_PROXY_5",n[n.CLOUD_PROXY_FALLBACK=26]="CLOUD_PROXY_FALLBACK"})(yr||(yr={}));var iq=fe,kp=Array.isArray||function(n){return iq(n)=="Array"},oq=R,pP=kp,aq=gy,sq=ft,cq=ar("species"),fP=oq.Array,lq=function(n){var r;return pP(n)&&(r=n.constructor,(aq(r)&&(r===fP||pP(r.prototype))||sq(r)&&(r=r[cq])===null)&&(r=void 0)),r===void 0?fP:r},mP=function(n,r){return new(lq(n))(r===0?0:r)},uq=vp,dq=Ie,hq=zr,pq=zc,fq=mP,gP=S([].push),il=function(n){var r=n==1,o=n==2,s=n==3,l=n==4,h=n==6,p=n==7,v=n==5||h;return function(E,T,C,I){for(var L,V,Y=hq(E),q=dq(Y),X=uq(T,C),le=pq(q),he=0,Se=I||fq,De=r?Se(E,le):o||p?Se(E,0):void 0;le>he;he++)if((v||he in q)&&(V=X(L=q[he],he,Y),n))if(r)De[he]=V;else if(V)switch(n){case 3:return!0;case 5:return L;case 6:return he;case 2:gP(De,L)}else switch(n){case 4:return!1;case 7:gP(De,L)}return h?-1:s||l?l:De}},vP={forEach:il(0),map:il(1),filter:il(2),some:il(3),every:il(4),find:il(5),findIndex:il(6),filterReject:il(7)},mq=vP.forEach,EP=H_("forEach")?[].forEach:function(n){return mq(this,n,arguments.length>1?arguments[1]:void 0)};ki({target:"Array",proto:!0,forced:[].forEach!=EP},{forEach:EP});var gq=Kc("Array").forEach,vq=qc,Eq=Jn,_q=b,yq=gq,BS=Array.prototype,Sq={DOMTokenList:!0,NodeList:!0},Cq=function(n){var r=n.forEach;return n===BS||_q(BS,n)&&r===BS.forEach||Eq(Sq,vq(n))?yq:r},bq=zr,_P=Z_;ki({target:"Object",stat:!0,forced:c(function(){_P(1)})},{keys:function(n){return _P(bq(n))}});var Tq=Ye.Object.keys,Rq=bO,Iq=ki,wq=kp,Oq=S([].reverse),yP=[1,2];Iq({target:"Array",proto:!0,forced:String(yP)===String(yP.reverse())},{reverse:function(){return wq(this)&&(this.length=this.length),Oq(this)}});var Aq=Kc("Array").reverse,Nq=b,xq=Aq,$S=Array.prototype,Pq=function(n){var r=n.reverse;return n===$S||Nq($S,n)&&r===$S.reverse?xq:r},Dq=c,kq=An,Lq=ar("species"),SP=function(n){return kq>=51||!Dq(function(){var r=[];return(r.constructor={})[Lq]=function(){return{foo:1}},r[n](Boolean).foo!==1})},Mq=ki,Uq=R,CP=kp,jq=gy,Fq=ft,bP=Y_,Vq=zc,Bq=st,$q=TS,Hq=ar,Wq=vy,Gq=SP("slice"),zq=Hq("species"),HS=Uq.Array,Kq=Math.max;Mq({target:"Array",proto:!0,forced:!Gq},{slice:function(n,r){var o,s,l,h=Bq(this),p=Vq(h),v=bP(n,p),E=bP(r===void 0?p:r,p);if(CP(h)&&(o=h.constructor,(jq(o)&&(o===HS||CP(o.prototype))||Fq(o)&&(o=o[zq])===null)&&(o=void 0),o===HS||o===void 0))return Wq(h,v,E);for(s=new(o===void 0?HS:o)(Kq(E-v,0)),l=0;v<E;v++,l++)v in h&&$q(s,l,h[v]);return s.length=l,s}});var Yq=Kc("Array").slice,qq=b,Xq=Yq,WS=Array.prototype,Jq=function(n){var r=n.slice;return n===WS||qq(WS,n)&&r===WS.slice?Xq:r};function _e(n,r,o,s,l){var h,p,v,E={};return Cq(h=Tq(s)).call(h,function(T){E[T]=s[T]}),E.enumerable=!!E.enumerable,E.configurable=!!E.configurable,("value"in E||E.initializer)&&(E.writable=!0),E=Rq(p=Pq(v=Jq(o).call(o)).call(v)).call(p,function(T,C){return C(n,r,T)||T},E),l&&E.initializer!==void 0&&(E.value=E.initializer?E.initializer.call(l):void 0,E.initializer=void 0),E.initializer===void 0&&(ux(n,r,E),E=null),E}var Qq=Kc("Array").keys,Zq=qc,eX=Jn,tX=b,nX=Qq,GS=Array.prototype,rX={DOMTokenList:!0,NodeList:!0},uu=function(n){var r=n.keys;return n===GS||tX(GS,n)&&r===GS.keys||eX(rX,Zq(n))?nX:r};function TP(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function RP(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?TP(Object(o),!0).forEach(function(s){N(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):TP(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}let V0=0,zS=0;function wa(n,r,o,s){return new xe((l,h)=>{r.timeout=r.timeout||ie("HTTP_CONNECT_TIMEOUT"),r.responseType=r.responseType||"json",r.data&&!o?(r.data=JSON.stringify(r.data),V0+=Dd(r.data)):o&&(r.data.size?V0+=r.data.size:r.data instanceof FormData?V0+=function(p){let v=0;return/DingTalk/i.test(navigator.userAgent)&&p.realFormData&&(p=p.realFormData),p.forEach(E=>{v+=typeof E=="string"?Dd(E):E.size}),v+138}(r.data):V0+=Dd(JSON.stringify(r.data))),r.headers=r.headers||{},r.headers["Content-Type"]=r.headers["Content-Type"]||"application/json",r.method="POST",r.url=n,Ao.request(r).then(p=>{typeof p.data=="string"?zS+=Dd(p.data):p.data instanceof ArrayBuffer||p.data instanceof Uint8Array?zS+=p.data.byteLength:zS+=Dd(JSON.stringify(p.data)),s&&l({data:p.data,headers:p.headers}),l(p.data)}).catch(p=>{Ao.isCancel(p)?h(new Q(W.OPERATION_ABORTED,"cancel token canceled")):p.code==="ECONNABORTED"?h(new Q(W.NETWORK_TIMEOUT,p.message)):p.response?h(new Q(W.NETWORK_RESPONSE_ERROR,p.response.status)):h(new Q(W.NETWORK_ERROR,p.message))})})}async function iX(n,r){const o=new Blob([r.data],{type:"buffer"});return await wa(n,RP(RP({},r),{},{data:o,headers:{"Content-Type":"application/octet-stream"}}),!0)}const tr=new class extends Rn{set networkState(n){U.info("[".concat(this._moduleName,"]")+"network state changed, "+this._networkState+" -> "+n),this.emit(nl.NETWORK_STATE_CHANGE,n,this._networkState),n===hi.ONLINE?this.emit(nl.ONLINE):n===hi.OFFLINE&&(this.onlineWaiter=new xe(r=>{this.once(nl.ONLINE,()=>{this.onlineWaiter=void 0,r(hi.ONLINE)})}),this.emit(nl.OFFLINE)),this._networkState=n}get networkState(){return this._networkState}constructor(){super(),N(this,"_moduleName","network-indicator"),N(this,"_networkState",hi.ONLINE),N(this,"onlineWaiter",void 0),window.addEventListener("online",()=>{this.networkState=hi.ONLINE}),window.addEventListener("offline",()=>{this.networkState=hi.OFFLINE})}};let KS=!1;const ko=new class extends Rn{constructor(){super(...arguments),N(this,"onAutoplayFailed",void 0),N(this,"onAudioAutoplayFailed",void 0)}};function IP(){if(Ht(),!KS){const n=r=>{r.preventDefault(),KS=!1,Ip()?document.body.removeEventListener("click",n,!0):(document.body.removeEventListener("touchstart",n,!0),document.body.removeEventListener("mousedown",n,!0))};KS=!0,Ip()?document.body.addEventListener("click",n,!0):(document.body.addEventListener("touchstart",n,!0),document.body.addEventListener("mousedown",n,!0)),U.info("detect media autoplay failed, document: https://docs.agora.io/cn/Voice/autoplay_policy_web_ng?platform=Web"),ko.onAutoplayFailed?ko.onAutoplayFailed():ko.onAudioAutoplayFailed?U.warning(`AgoraRTC.onAudioAutoplayFailed has been deprecated in favor of AgoraRTC.onAutoplayFailed.

  Please refer to the Agora document to migrate the newer API, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web .`):U.warning(`We have detected a media autoplay failed event, and found out that you haven't implemented AgoraRTC.onAutoplayFailed callback yet.

  It will cause audio/video element not playing automatically on some browsers without user interaction, possibly hurting user experiences.

  Please refer to the Agora document to properly handle autoplay failed event, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web .`),ko.emit("autoplay-failed")}}function YS(n){return new TextEncoder().encode(n)}const wP=function(n,r){const o=new Uint8Array(n.byteLength+r.byteLength);return o.set(new Uint8Array(n),0),o.set(new Uint8Array(r),n.byteLength),o},oX=async n=>function(r,o){let s="";return new Uint8Array(r).forEach(l=>{s+=l.toString(o).padStart(2,"0")}),s}(await crypto.subtle.digest("SHA-256",YS(n)),16);function OP(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function ht(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?OP(Object(o),!0).forEach(function(s){N(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):OP(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}function ze(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return function(r,o,s){const l=s.value;if(typeof l=="function"){const h=n.className||r.__className__||(r.constructor.name==="AgoraRTCClient"?"Client":r.constructor.name);s.value=function(){for(var p=arguments.length,v=new Array(p),E=0;E<p;E++)v[E]=arguments[E];let T=v;if(n.argsMap)try{T=n.argsMap(this,...v)}catch(I){U.warning(I),T=[]}try{JSON.stringify(T)}catch{U.warning("arguments for method ".concat(h,".").concat(String(o)," not serializable for apiInvoke.")),T=[]}const C=(n.report||Me).reportApiInvoke(this._sessionId||null,{name:"".concat(h,".").concat(String(o)),options:T,tag:bn.TRACER,reportResult:n.reportResult},n.throttleTime);try{const I=l.apply(this,v);return I instanceof xe?I.then(L=>(C.onSuccess(n.reportResult&&L),L)).catch(L=>{throw C.onError(L),L}):(C.onSuccess(n.reportResult&&I),I)}catch(I){throw C.onError(I),I}}}return s}}const Me=new class{constructor(){N(this,"baseInfoMap",new Map),N(this,"proxyServer",void 0),N(this,"clientList",su),N(this,"eventUploadTimer",void 0),N(this,"setSessionIdTimer",void 0),N(this,"url",void 0),N(this,"backupUrl",void 0),N(this,"_appId",void 0),N(this,"keyEventUploadPendingItems",[]),N(this,"normalEventUploadPendingItems",[]),N(this,"apiInvokeUploadPendingItems",[]),N(this,"apiInvokeCount",0),N(this,"ltsList",[]),N(this,"lastSendNormalEventTime",Date.now()),N(this,"customReportCounterTimer",void 0),N(this,"customReportCount",0),N(this,"extApiInvoke",async n=>{for(const r of n){const o=ht(ht({},r),{},{sid:null,invokeId:++this.apiInvokeCount,tag:bn.TRACER});this.sendApiInvoke(o)}}),this.eventUploadTimer=window.setInterval(this.doSend.bind(this),ie("EVENT_REPORT_SEND_INTERVAL")),this.setSessionIdTimer=window.setInterval(this.appendSessionId.bind(this),ie("EVENT_REPORT_SEND_INTERVAL"))}adjustSessionStartTime(n){if(!this.baseInfoMap.has(n)&&!this.baseInfoMap.get(n))return void U.error("adjust session ".concat(n," start time, sid is not exist or info is undefined"));const r=this.baseInfoMap.get(n),o=Date.now(),s=r.startTime;r.startTime=o,U.debug("rewrite session ".concat(n," startTime: ").concat(o," , ").concat(o-s,"ms")),this.baseInfoMap.set(n,r)}setAppId(n){this._appId=n}reportApiInvoke(n,r,o){r.timeout=r.timeout||6e4,r.reportResult=r.reportResult===void 0||r.reportResult;const s=Date.now();this.apiInvokeCount+=1;const l=this.apiInvokeCount,h=()=>({tag:r.tag,invokeId:l,sid:n,name:r.name,apiInvokeTime:s,options:r.options,states:r.states||null}),p=!!ie("SHOW_REPORT_INVOKER_LOG");p&&U.info("".concat(r.name," start"),r.options);let v=!1;ni(r.timeout).then(()=>{v||(this.sendApiInvoke(ht(ht({},h()),{},{error:W.API_INVOKE_TIMEOUT,success:!1})),U.debug("".concat(r.name," timeout")))});const E=new Q(W.UNEXPECTED_ERROR,"".concat(r.name,": this api invoke is end"));return{onSuccess:T=>{const C=()=>{if(v)throw E;return v=!0,this.sendApiInvoke(ht(ht({},h()),{},{success:!0},r.reportResult&&{result:T})),p&&U.info("".concat(r.name," onSuccess")),T};return o?WD(C,r.name+"Success",o,()=>v=!0):C()},onError:T=>{const C=()=>{if(v)throw T;v=!0,this.sendApiInvoke(ht(ht({},h()),{},{success:!1,error:T})),p&&U.info("".concat(r.name," onFailure"),T.toString())};return o?WD(C,r.name+"Error",o,()=>v=!0):C()}}}sessionInit(n,r){if(this.baseInfoMap.has(n))return;const o=Date.now(),s=this.createBaseInfo(n,o);s.cname=r.cname;const l=Object.assign({},{willUploadConsoleLog:ie("UPLOAD_LOG"),maxTouchPoints:navigator.maxTouchPoints,areaVersion:SS?"global":"oversea",areas:ie("AREAS")&&ie("AREAS").join(",")},r.extend),h=Date.now(),p=ht(ht({},s),{},{eventType:Fr.SESSION_INIT,appid:r.appid,browser:navigator.userAgent,build:yS,lts:h,elapse:h-o,extend:JSON.stringify(l),mode:r.mode,process:ie("PROCESS_ID"),appType:ie("APP_TYPE"),success:!0,version:ta});this.send({type:In.SESSION,data:p},!0)}joinChooseServer(n,r){const o=this.baseInfoMap.get(n);if(!o)return;const s=o.info,l=Date.now(),h=ht(ht({},s),{},{eventType:Fr.JOIN_CHOOSE_SERVER,lts:l,eventElapse:l-r.lts,chooseServerAddr:r.csAddr,errorCode:r.ec,elapse:l-o.startTime,success:r.succ,chooseServerAddrList:JSON.stringify(r.serverList),uid:r.uid?parseInt(r.uid):null,cid:r.cid?parseInt(r.cid):null,chooseServerIp:r.csIp||"",opid:r.opid,unilbsServerIds:r.unilbsServerIds,extend:r.extend||void 0,isHttp3:r.isHttp3});this.send({type:In.JOIN_CHOOSE_SERVER,data:h},!0)}reqUserAccount(n,r){const o=this.baseInfoMap.get(n);if(!o)return;const s=o.info,l=Date.now(),h=ht(ht({},s),{},{eventType:Fr.REQ_USER_ACCOUNT,lts:l,success:r.success,serverAddress:r.serverAddr,stringUid:r.stringUid,uid:r.uid,errorCode:r.errorCode,elapse:l-o.startTime,eventElapse:l-r.lts,extend:JSON.stringify(r.extend)});this.send({type:In.REQ_USER_ACCOUNT,data:h},!0)}joinGateway(n,r){const o=this.baseInfoMap.get(n);if(!o)return;const s=o.info;r.vid&&(s.vid=r.vid),s.uid=r.uid,s.cid=r.cid;const l=Date.now(),{firstSuccess:h,avoidJoinStartTime:p,isProxy:v,addr:E}=r,T=l-(h&&p?p:o.startTime),C=ht(ht({},s),{},{eventType:Fr.JOIN_GATEWAY,lts:l,gatewayAddr:r.addr,success:r.succ,errorCode:r.ec,elapse:T,eventElapse:l-r.lts,firstSuccess:h,signalChannel:r.signalChannel}),I=C.success?1:0;if(r.succ&&(o.lastJoinSuccessTime=l),h)this.send({type:In.JOIN_GATEWAY,data:C},!0);else{let L;if(E)if(v){const Y=E.match(/h=(\d{1,3}-){3}\d{1,3}/g),q=E.match(/p=[0-9]{1,6}/g);L={isSuccess:I,gatewayIp:Y&&Y.length?Y[0].split("=")[1].replace(/-/g,"."):"",port:q&&q.length?q[0].split("=")[1]:"",isProxy:v?1:0}}else{const Y=E.match(/wss:\/\/(\d{1,3}-){3}\d{1,3}/g),q=E.match(/:[0-9]{1,6}/g);L={isSuccess:I,gatewayIp:Y&&Y.length?Y[0].split("//")[1].replace(/-/g,"."):"",port:q&&q.length?q[0].split(":")[1]:"",isProxy:v?1:0}}else L={isSuccess:I,gatewayIp:"",port:"",isProxy:v?1:0};delete C.success,delete C.eventType,delete C.firstSuccess,C.vid=Number(C.vid);const V=Object.assign({},C,L,{eventType:Fr.REJOIN_GATEWAY});this.send({type:In.RE_JOIN_GATEWAY,data:V},!0)}}joinChannelTimeout(n,r){const o=this.baseInfoMap.get(n);if(!o)return;const s=Date.now(),l=ht(ht({},o.info),{},{lts:s,timeout:r,elapse:s-o.startTime});this.send({type:In.JOIN_CHANNEL_TIMEOUT,data:l},!0)}publish(n,r){const o=this.baseInfoMap.get(n);if(!o)return;const s=o.info,l=Date.now(),h=ht(ht({},s),{},{eventType:Fr.PUBLISH,lts:l,eventElapse:r.eventElapse,elapse:l-o.startTime,success:r.succ,errorCode:r.ec,videoName:r.videoName,audioName:r.audioName,screenName:r.screenName,screenshare:r.screenshare,audio:r.audio,video:r.video,p2pid:r.p2pid,publishRequestid:r.publishRequestid});this.send({type:In.PUBLISH,data:h},!0)}subscribe(n,r,o){const s=this.baseInfoMap.get(n);if(!s)return;const l=s.info,h=Date.now(),p=ht(ht({},l),{},{eventType:Fr.SUBSCRIBE,lts:h,eventElapse:r.eventElapse,elapse:h-s.startTime,success:r.succ,errorCode:r.ec,video:r.video,audio:r.audio,subscribeRequestid:r.subscribeRequestid,p2pid:r.p2pid},o&&{extend:JSON.stringify({isMassSubscribe:!0})});typeof r.peerid=="string"?p.peerSuid=r.peerid:p.peer=r.peerid,this.send({type:In.SUBSCRIBE,data:p},!0)}wsCompressorInit(n){var r;const o=[...uu(r=this.baseInfoMap).call(r)],s=o.length?o[0]:"UnableToGetSid",l=this.baseInfoMap.get(s);if(!l)return;const h=l.info,p=Date.now(),v=ht(ht({},h),{},{eventType:Fr.WS_COMPRESSOR_INIT,lts:p,eventElapse:n.eventElapse,elapse:p-l.startTime,status:n.status?1:2});this.send({type:In.WS_COMPRESSOR_INIT,data:v},!0)}firstRemoteVideoDecode(n,r,o,s){const l=this.baseInfoMap.get(n);if(!l)return;const h=l.info,p=Date.now(),v=ht(ht(ht({},h),s),{},{elapse:p-l.startTime,eventType:r,lts:p,firstDecodeFrame:Math.max(p-l.startTime,0),apEnd:Math.max(s.apEnd-l.startTime,0),apStart:Math.max(s.apStart-l.startTime,0),joinGwEnd:Math.max(s.joinGwEnd-l.startTime,0),joinGwStart:Math.max(s.joinGwStart-l.startTime,0),pcEnd:Math.max(s.pcEnd-l.startTime,0),pcStart:Math.max(s.pcStart-l.startTime,0),subscriberEnd:Math.max(s.subscriberEnd-l.startTime,0),subscriberStart:Math.max(s.subscriberStart-l.startTime,0),videoAddNotify:Math.max(s.videoAddNotify-l.startTime,0)});this.send({type:o,data:v},!0)}firstRemoteFrame(n,r,o,s){const l=this.baseInfoMap.get(n);if(!l)return;const h=l.info,p=Date.now(),v=ht(ht(ht({},h),s),{},{elapse:p-l.startTime,eventType:r,lts:p});this.send({type:o,data:v},!0)}pcStats(n,r){const o=this.baseInfoMap.get(n);if(!o)return;const s=o.info,l=Date.now(),h=ht(ht(ht({},s),r),{},{vid:s.vid===void 0?0:Number(s.vid),elapse:l-o.startTime,eventType:Fr.PC_STATS,lts:l});this.send({type:In.PC_STATS,data:h},!0)}onGatewayStream(n,r,o,s){const l=this.baseInfoMap.get(n);if(!l)return;const h=l.info,p=Date.now(),v=ht(ht(ht({},h),s),{},{eventType:r,lts:p});this.send({type:o,data:v},!0)}streamSwitch(n,r){const o=this.baseInfoMap.get(n);if(!o)return;const s=o.info,l=Date.now(),h=ht(ht({},s),{},{eventType:Fr.STREAM_SWITCH,lts:l,isDual:r.isdual,elapse:l-o.startTime,success:r.succ});this.send({type:In.STREAM_SWITCH,data:h},!0)}requestProxyAppCenter(n,r){const o=this.baseInfoMap.get(n);if(!o)return;const s=o.info,l=Date.now(),h=ht(ht({},s),{},{eventType:Fr.REQUEST_PROXY_APPCENTER,lts:l,eventElapse:l-r.lts,elapse:l-o.startTime,APAddr:r.APAddr,workerManagerList:r.workerManagerList,response:r.response,errorCode:r.ec,success:r.succ});this.send({type:In.REQUEST_PROXY_APPCENTER,data:h},!0)}requestProxyWorkerManager(n,r){const o=this.baseInfoMap.get(n);if(!o)return;const s=o.info,l=Date.now(),h=ht(ht({},s),{},{eventType:Fr.REQUEST_PROXY_WORKER_MANAGER,lts:l,eventElapse:l-r.lts,elapse:l-o.startTime,workerManagerAddr:r.workerManagerAddr,response:r.response,errorCode:r.ec,success:r.succ});this.send({type:In.REQUEST_PROXY_WORKER_MANAGER,data:h},!0)}setProxyServer(n){this.proxyServer=n,n?U.debug("reportProxyServerurl: ".concat(n)):U.debug("disable reportProxyServerurl: ".concat(n))}peerPublishStatus(n,r){const o=this.baseInfoMap.get(n);if(!o)return;const s=o.info,l=Date.now(),h=ht(ht({},s),{},{subscribeElapse:r.subscribeElapse,peer:r.peer,peerPublishDuration:Math.max(r.audioPublishDuration,r.videoPublishDuration),audiotag:r.audioPublishDuration>0?1:-1,videotag:r.videoPublishDuration>0?1:-1,lts:l,elapse:l-o.startTime,joinChannelSuccessElapse:l-(o.lastJoinSuccessTime||l),peerPublishDurationVideo:r.videoPublishDuration,peerPublishDurationAudio:r.audioPublishDuration});this.send({type:In.PEER_PUBLISH_STATUS,data:h},!0)}workerEvent(n,r){const o=this.baseInfoMap.get(n);if(!o)return;const s=o.info,l=Date.now();(function(h,p,v){const E=h[p];if(!E||typeof E!="string")return[h];h[p]="";const T=Dd(JSON.stringify(h));let C=0;const I=[];let L=0;for(let V=0;V<E.length;V++)L+=E.charCodeAt(V)<=127?1:3,L<=v-T||(I[I.length]=pu(pu({},h),{},{[p]:E.substring(C,V)}),C=V,L=E.charCodeAt(V)<=127?1:3);return C!==E.length-1&&(I[I.length]=pu(pu({},h),{},{[p]:E.substring(C)})),I})(ht(ht(ht({},s),r),{},{elapse:l-o.startTime,lts:l,productType:"WebRTC"}),"payload",1300).forEach(h=>this.send({type:In.WORKER_EVENT,data:h},!0))}apworkerEvent(n,r){const o=this.baseInfoMap.get(n);if(!o)return;const s=o.info,l=Date.now(),h=ht(ht(ht({},s),r),{},{elapse:l-o.startTime,lts:l});this.send({type:In.AP_WORKER_EVENT,data:h},!0)}joinWebProxyAP(n,r){const o=this.baseInfoMap.get(n);if(!o)return;const s=o.info,l=Date.now(),h=ht(ht(ht({},s),r),{},{elapse:l-o.startTime,lts:l,extend:r.extend||void 0});this.send({type:In.JOIN_WEB_PROXY_AP,data:h},!0)}WebSocketQuit(n,r){const o=this.baseInfoMap.get(n);if(!o)return;const s=o.info,l=Date.now(),h=ht(ht(ht({},s),r),{},{elapse:l-o.startTime,lts:l});this.send({type:In.WEBSOCKET_QUIT,data:h},!0)}async sendCustomReportMessage(n,r){if(this.customReportCount+=r.length,this.customReportCount>ie("CUSTOM_REPORT_LIMIT"))throw new Q(W.CUSTOM_REPORT_FREQUENCY_TOO_HIGH);this.customReportCounterTimer||(this.customReportCounterTimer=window.setInterval(()=>{this.customReportCount=0},5e3));const o=Date.now(),s=r.map(l=>({type:In.USER_ANALYTICS,data:ht(ht({sid:n},l),{},{lts:o})}));try{ie("NEW_REPORT_SERVER")?await this.postDataToStatsCollector2(s):await this.postDataToStatsCollector(s)}catch(l){throw U.error("send custom report message failed",l.toString()),new Q(W.CUSTOM_REPORT_SEND_FAILED,l.message)}}autoplayFailed(n,r,o,s){if(!n)return;const l=this.baseInfoMap.get(n);if(!l)return;const h=l.info,p=Date.now(),v=ht(ht({},h),{},{vid:h.vid===void 0?0:Number(h.vid),lts:p,elapse:p-l.startTime,cbRegistered:ko.onAutoplayFailed||ko.onAudioAutoplayFailed?1:-1,errorMsg:o,mediaType:r,trackId:s,extend:void 0});this.send({type:In.AUTOPLAY_FAILED,data:v},!0)}sendApiInvoke(n){const r=ie("NOT_REPORT_EVENT");if(n.tag&&r.includes&&r.includes(n.tag))return!1;if(n.sid===null)return this.apiInvokeUploadPendingItems.push(n),!1;const o=this.baseInfoMap.get(n.sid);if(!o)return this.apiInvokeUploadPendingItems.push(n),!1;const{cname:s,uid:l,cid:h}=o.info;n.lts=n.lts||Date.now();let p;if(n.error)if(n.error instanceof Q){const{code:E,message:T}=n.error;p=E||T||n.error.toString()}else p=n.error.toString();const v={invokeId:n.invokeId,sid:n.sid,cname:s,cid:h,uid:l,lts:n.lts,success:n.success,elapse:n.lts-o.startTime,execElapse:n.lts-n.apiInvokeTime,apiName:n.name,options:n.options?JSON.stringify(n.options):void 0,execStates:n.states?JSON.stringify(n.states):void 0,execResult:n.result?JSON.stringify(n.result):void 0,errorCode:n.error?p:void 0,errorMsg:n.error?JSON.stringify(n.error):void 0};return this.send({type:In.API_INVOKE,data:v},!1),!0}appendSessionId(){this.clientList.forEach(n=>{if(n._sessionId){const r=this.apiInvokeUploadPendingItems.length;for(let o=0;o<r;o++){const s=this.apiInvokeUploadPendingItems.shift();s&&(s.sid=n._sessionId,this.sendApiInvoke(Object.assign({},s)))}}})}send(n,r){if(r)return this.keyEventUploadPendingItems.push(n),void this.sendItems(this.keyEventUploadPendingItems,!0);this.normalEventUploadPendingItems.push(n),this.normalEventUploadPendingItems.length>ie("NORMAL_EVENT_QUEUE_CAPACITY")&&this.normalEventUploadPendingItems.splice(0,1),this.normalEventUploadPendingItems.length>=10&&this.sendItems(this.normalEventUploadPendingItems,!1)}doSend(){this.keyEventUploadPendingItems.length>0&&this.sendItems(this.keyEventUploadPendingItems,!0),this.normalEventUploadPendingItems.length>0&&Date.now()-this.lastSendNormalEventTime>=5e3&&this.sendItems(this.normalEventUploadPendingItems,!1)}sendItems(n,r){const o=[],s=[];for(;n.length;){const h=n.shift();o.length<20?o.push(h):s.push(h)}n.push(...s);for(const h of[...o]){var l;this.ltsList.indexOf(h.data.lts)!==-1?(h.data.lts=this.ltsList[this.ltsList.length-1]+1,this.ltsList.push(h.data.lts)):(this.ltsList.push(h.data.lts),OS(l=this.ltsList).call(l,(p,v)=>p-v))}return r||(this.lastSendNormalEventTime=Date.now()),ie("ENABLE_EVENT_REPORT")&&o.length&&(ie("NEW_REPORT_SERVER")?this.postDataToStatsCollector2(o):this.postDataToStatsCollector(o)).catch((h=>p=>{ie("EVENT_REPORT_RETRY")&&(r?this.keyEventUploadPendingItems=this.keyEventUploadPendingItems.concat(h):(this.normalEventUploadPendingItems=this.normalEventUploadPendingItems.concat(h),this.normalEventUploadPendingItems.length>ie("NORMAL_EVENT_QUEUE_CAPACITY")&&(this.normalEventUploadPendingItems.splice(0,this.normalEventUploadPendingItems.length-ie("NORMAL_EVENT_QUEUE_CAPACITY")),U.warning("report: drop normal events"))))})(o)),n}async postDataToStatsCollector2(n){tr.networkState===hi.OFFLINE&&await xe.race([tr.onlineWaiter,ni(2*Qn.maxRetryTimeout)]);const r=l=>{let h=new Uint8Array;return l.forEach(p=>{const v=YS(JSON.stringify(p.data)),E=new ArrayBuffer(5),T=(I=>{let L=0;return Object.entries(In).forEach(V=>{let[Y,q]=V;q===I.type&&(L=DS[Y])}),L})(p),C=new DataView(E);C.setUint16(0,v.byteLength,!0),C.setUint8(2,255&T),C.setUint8(3,T>>>8&255),C.setUint8(4,T>>>16&255),h=wP(h,new Uint8Array(E)),h=wP(h,v)}),h},o="event";let s=this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(ie("NEW_REPORT_SERVER_DOMAINS")[0],"&p=443&d=").concat(o):"https://".concat(ie("NEW_REPORT_SERVER_DOMAINS")[0],"/").concat(o);for(let l=0;l<2;l+=1){l===1&&(s=this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(ie("NEW_REPORT_SERVER_DOMAINS")[1],"&p=443&d=").concat(o):"https://".concat(ie("NEW_REPORT_SERVER_DOMAINS")[1],"/").concat(o));try{await wa(s,{timeout:1e4,data:r(n),headers:ht(ht({biz:"webrtc",sendts:Math.round(Date.now()/1e3),debug:"false"},this._appId&&{appid:this._appId}),{},{"Content-Type":"application/octet-stream"})},!0)}catch(h){if(l===1)throw h;continue}return}}async postDataToStatsCollector(n){let r=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const o={msgType:"EventMessages",sentTs:Math.round(Date.now()/1e3),payloads:n.map(h=>JSON.stringify(h)),vid:(h=>{const p=h&&h.data.sid&&this.baseInfoMap.get(h.data.sid);return p&&p.info.vid&&+p.info.vid||0})(n[0])};tr.networkState===hi.OFFLINE&&await xe.race([tr.onlineWaiter,ni(2*Qn.maxRetryTimeout)]);const s=r?"/events/proto-raws":"/events/messages";let l=this.url||(this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(ie("EVENT_REPORT_DOMAIN"),"&p=").concat(ie("STATS_COLLECTOR_PORT"),"&d=").concat(s):"https://".concat(ie("EVENT_REPORT_DOMAIN"),":").concat(ie("STATS_COLLECTOR_PORT")).concat(s));for(let h=0;h<2;h+=1){h===1&&(l=this.backupUrl||(this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(ie("EVENT_REPORT_BACKUP_DOMAIN"),"&p=").concat(ie("STATS_COLLECTOR_PORT"),"&d=").concat(s):"https://".concat(ie("EVENT_REPORT_BACKUP_DOMAIN"),":").concat(ie("STATS_COLLECTOR_PORT")).concat(s)));try{r?await iX(l,{timeout:1e4,data:o}):await wa(l,{timeout:1e4,data:o})}catch(p){if(h===1)throw p;continue}return}}createBaseInfo(n,r){const o=Object.assign({},JY);return o.sid=n,this.baseInfoMap.set(n,{info:o,startTime:r}),o}reportResourceTiming(n,r){const o=performance.getEntriesByName(n),s=o[o.length-1];s&&this.reportApiInvoke(r,{name:"Client.resourceTiming",options:s,tag:bn.TRACER}).onSuccess()}};D0.on("REPORT_LOG_UPLOAD",n=>{n.networkState=tr.networkState,Me.reportApiInvoke(null,{name:"logUploadError",options:n,tag:bn.TRACER})});class AP extends Rn{constructor(r,o){super(),N(this,"trackMediaType",void 0),N(this,"_ID",void 0),N(this,"_rtpTransceiver",void 0),N(this,"_lowRtpTransceiver",void 0),N(this,"_hints",[]),N(this,"_isClosed",!1),N(this,"_originMediaStreamTrack",void 0),N(this,"_mediaStreamTrack",void 0),N(this,"_external",{}),this._ID=o||pn(8,"track-"),this._originMediaStreamTrack=r,this._mediaStreamTrack=r,function(s){Ap.includes(s)||Ap.push(s)}(this)}toString(){return this._ID}getTrackId(){return this._ID}getMediaStreamTrack(r){if(!r){const o=Me.reportApiInvoke(null,{name:Zn.GET_MEDIA_STREAM_TRACK,options:[],tag:bn.TRACER});this._mediaStreamTrack&&typeof this._mediaStreamTrack.label=="string"?o.onSuccess(this._mediaStreamTrack.label):o.onSuccess("")}return this._mediaStreamTrack}getRTCRtpTransceiver(r){return r===Id.LOW_STREAM?this._lowRtpTransceiver:this._rtpTransceiver}getMediaStreamTrackSettings(){return this.getMediaStreamTrack(!0).getSettings()}close(){this._isClosed=!0,this._lowRtpTransceiver=void 0,this._rtpTransceiver=void 0,function(r){const o=Ap.indexOf(r);o!==-1&&Ap.splice(o,1)}(this),this.emit(tl.CLOSED)}_updateRtpTransceiver(r,o){if(o===Id.LOW_STREAM){if(this._lowRtpTransceiver===r)return;this._lowRtpTransceiver=r}else{if(this._rtpTransceiver===r)return;this._rtpTransceiver=r}this.emit(Pp.TRANSCEIVER_UPDATED,r,o)}}let Sr,aX=1;class wi{constructor(r){N(this,"lockingPromise",xe.resolve()),N(this,"locks",0),N(this,"name",""),N(this,"lockId",void 0),this.lockId=aX++,r&&(this.name=r),U.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is created."))}get isLocked(){return this.locks>0}lock(r){let o;this.locks+=1,U.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is locked, current queue ").concat(this.locks,". ").concat(typeof r=="string"?r:""));const s=new xe(h=>{o=()=>{this.locks-=1,U.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is not locked, current queue ").concat(this.locks,". ").concat(typeof r=="string"?r:"")),h()}}),l=this.lockingPromise.then(()=>o);return this.lockingPromise=this.lockingPromise.then(()=>s),l}}function Od(n,r){return function(o,s,l){const h=l.value;if(typeof h!="function")throw new Error("Cannot use mutex on object property.");return l.value=async function(){const p=this[r];if(!p)throw new Error("mutex property key ".concat(r," doesn't exist on ").concat(n));const v=await p.lock("From ".concat(n,".").concat(s));try{for(var E=arguments.length,T=new Array(E),C=0;C<E;C++)T[C]=arguments[C];return await h.apply(this,T)}finally{v()}},l}}class qS extends AP{get isExternalTrack(){return this._isExternalTrack}get muted(){return this._muted}get enabled(){return this._enabled}get processorContext(){return this._processorContext}set processorContext(r){this._processorContext=r}constructor(r,o){super(r,o),N(this,"_enabled",!0),N(this,"_muted",!1),N(this,"_isExternalTrack",!1),N(this,"_isClosed",!1),N(this,"_enabledMutex",void 0),N(this,"processor",void 0),N(this,"_processorContext",void 0),N(this,"_handleTrackEnded",()=>{this.onTrackEnded()}),this._enabledMutex=new wi("".concat(this.getTrackId())),r.addEventListener("ended",this._handleTrackEnded)}getTrackLabel(){var r,o;return(r=(o=this._originMediaStreamTrack)===null||o===void 0?void 0:o.label)!==null&&r!==void 0?r:""}close(){this._isClosed||(this.stop(),this._originMediaStreamTrack.stop(),this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack.stop(),this._mediaStreamTrack=null),this._originMediaStreamTrack=null,this._enabledMutex=null,U.debug("[".concat(this.getTrackId(),"] close")),this.emit(Ze.NEED_CLOSE),super.close())}async _updateOriginMediaStreamTrack(r,o){let s=arguments.length>2&&arguments[2]!==void 0&&arguments[2];this._isExternalTrack=s,r!==this._originMediaStreamTrack&&(this._originMediaStreamTrack.removeEventListener("ended",this._handleTrackEnded),o&&this._originMediaStreamTrack.stop(),r.addEventListener("ended",this._handleTrackEnded),this._originMediaStreamTrack=r,this._muted&&(this._originMediaStreamTrack.enabled=!1),this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await Ln(this,Ze.NEED_REPLACE_TRACK,this),this.processor&&this.processor.updateInput({track:this._originMediaStreamTrack,context:this.processorContext}))}_getDefaultPlayerConfig(){return{}}onTrackEnded(){U.debug("[".concat(this.getTrackId(),"] track ended")),this.safeEmit(tl.TRACK_ENDED)}stateCheck(r,o){if(U.debug("check track state, [muted: ".concat(this._muted,", enabled: ").concat(this._enabled,"] to [").concat(r,": ").concat(o,"]")),bd(o,r),this._enabled&&this._muted&&r==="enabled"&&o===!1)throw new Q(W.TRACK_STATE_UNREACHABLE,"cannot set enabled while the track is muted").print();if(!this._enabled&&!this._muted&&r==="muted"&&o===!0)throw new Q(W.TRACK_STATE_UNREACHABLE,"cannot set muted while the track is disabled").print()}getProcessorStats(){return this.processorContext.gatherStats()}getProcessorUsage(){return this.processorContext.gatherUsage()}}function NP(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}(function(n){n.IOS_15_16_INTERRUPTION_START="ios15_16-interruption-start",n.IOS_15_16_INTERRUPTION_END="ios15_16-interruption-end",n.IOS_INTERRUPTION_START="ios-interruption-start",n.IOS_INTERRUPTION_END="ios-interruption-end",n.STATE_CHANGE="state-change"})(Sr||(Sr={}));const xP=window.AudioContext||window.webkitAudioContext;let Lo=null;const Gt=new class extends Rn{constructor(){super(...arguments),N(this,"prevState",void 0),N(this,"curState",void 0),N(this,"currentTime",void 0),N(this,"currentTimeStuckAt",void 0),N(this,"interruptDetectorTrack",void 0),N(this,"onLocalAudioTrackMute",()=>{U.info("ios15-interruption-start"),this.emit(Sr.IOS_15_16_INTERRUPTION_START)}),N(this,"onLocalAudioTrackUnmute",async()=>{U.info("ios15-interruption-end"),this.curState!=="running"||this.duringInterruption?U.info("ios15-interruption-end-canceled"):(Lo&&await Lo.suspend(),this.emit(Sr.IOS_15_16_INTERRUPTION_END))})}get duringInterruption(){return this.prevState==="running"&&this.curState==="interrupted"}bindInterruptDetectorTrack(n){U.debug("webaudio bindInterruptDetectorTrack ".concat(n.getTrackId())),this.interruptDetectorTrack||(this.interruptDetectorTrack=n,this.interruptDetectorTrack._mediaStreamTrack.onmute=this.onLocalAudioTrackMute,this.interruptDetectorTrack._mediaStreamTrack.onunmute=this.onLocalAudioTrackUnmute)}unbindInterruptDetectorTrack(n){U.debug("webaudio unbindInterruptDetectorTrack ".concat(n.getTrackId())),this.interruptDetectorTrack&&this.interruptDetectorTrack===n&&(this.interruptDetectorTrack._mediaStreamTrack&&(this.interruptDetectorTrack._mediaStreamTrack.onmute=null,this.interruptDetectorTrack._mediaStreamTrack.onunmute=null),this.interruptDetectorTrack=void 0)}};function sX(){if(!xP)return void U.error("your browser is not support web audio");U.info("create audio context");const n=function(r){for(var o=1;o<arguments.length;o++){var s=arguments[o]!=null?arguments[o]:{};o%2?NP(Object(s),!0).forEach(function(l){N(r,l,s[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(s)):NP(Object(s)).forEach(function(l){Object.defineProperty(r,l,Object.getOwnPropertyDescriptor(s,l))})}return r}({},ie("WEBAUDIO_INIT_OPTIONS"));U.debug("audio context init option:",JSON.stringify(n)),Lo=new xP(n),Gt.curState=Lo.state,Lo.onstatechange=()=>{Gt.prevState=Gt.curState,Gt.curState=Lo?Lo.state:void 0;const{prevState:r,curState:o}=Gt,s=o==="running",l=o==="interrupted",h=r==="running",p=r==="suspended",v=r==="interrupted",E=Ht().osVersion;(Ti()||ks())&&h&&l&&(U.info("ios".concat(E,"-interruption-start")),Gt.emit(Sr.IOS_INTERRUPTION_START)),(Ti()||ks())&&(p||v)&&s&&(U.info("ios".concat(E,"-interruption-end")),Gt.emit(Sr.IOS_INTERRUPTION_END)),r!==o&&(U.debug("AudioContext State Change","".concat(r,"=>").concat(o)),Gt.emit(Sr.STATE_CHANGE))},setInterval(()=>{var r;const o=(r=Lo)===null||r===void 0?void 0:r.currentTime;Gt.currentTime!==o?(Gt.currentTimeStuckAt&&(U.debug("AudioContext current time resume at ".concat(o)),Gt.currentTimeStuckAt=void 0),Gt.currentTime=o):(o!==Gt.currentTimeStuckAt&&(Me.reportApiInvoke(null,{name:"WEB_AUDIO_CURRENT_TIME_STUCK",options:{currentTime:o},tag:bn.TRACER}).onSuccess(),U.warning("AudioContext current time stuck at ".concat(o))),Gt.currentTimeStuckAt=o)},5e3),async function(r){const o=["click","contextmenu","auxclick","dblclick","mousedown","mouseup","touchend","keydown","keyup"];let s,l=!1,h=!1,p=!1;function v(X){r.state==="running"?E(!1):Ti()||ks()?r.state==="suspended"&&(E(!0),X&&r.resume().then(C,C)):r.state!=="closed"&&(E(!0),X&&r.resume().then(C,C))}function E(X){if(l!==X){l=X;for(let le=0,he=o;le<he.length;le+=1){const Se=he[le];X?window.addEventListener(Se,I,{capture:!0,passive:!0}):window.removeEventListener(Se,I,{capture:!0,passive:!0})}}}function T(){v(!0)}function C(){v(!1)}function I(){v(!0)}function L(X){if(!p)if(s.paused)if(X){V(!1),p=!0;let le;try{le=s.play(),le?le.then(Y,Y):(s.addEventListener("playing",Y),s.addEventListener("abort",Y),s.addEventListener("error",Y))}catch{Y()}}else V(!0);else V(!1)}function V(X){if(h!==X){h=X;for(let le=0,he=o;le<he.length;le++){const Se=he[le];X?window.addEventListener(Se,q,{capture:!0,passive:!0}):window.removeEventListener(Se,q,{capture:!0,passive:!0})}}}function Y(){s.removeEventListener("playing",Y),s.removeEventListener("abort",Y),s.removeEventListener("error",Y),p=!1,L(!1)}function q(){L(!0)}if(Ti()){const X=r.createMediaStreamDestination(),le=document.createElement("div");le.innerHTML="<audio x-webkit-airplay='deny'></audio>",s=le.children.item(0),s.controls=!1,s.disableRemotePlayback=!0,s.preload="auto",s.srcObject=X.stream,L(!0)}Gt.on(Sr.STATE_CHANGE,T),v(!1)}(Lo)}function Ad(){if(!Lo){if(sX(),!Lo)throw new Q(W.NOT_SUPPORTED,"can not create audio context");return Lo}return Lo}function PP(){return!!Lo}function du(n){if(function(){if(XS!==null)return XS;const s=Ad(),l=s.createBufferSource(),h=s.createGain(),p=s.createGain();l.connect(h),l.connect(p),l.disconnect(h);let v=!1;try{l.disconnect(h)}catch{v=!0}return l.disconnect(),XS=v,v}())return;const r=n.connect,o=n.disconnect;n.connect=(s,l,h)=>(n._inputNodes||(n._inputNodes=[]),n._inputNodes.includes(s)||(s instanceof AudioNode?(n._inputNodes.push(s),r.call(n,s,l,h)):r.call(n,s,l)),n),n.disconnect=(s,l,h)=>{o.call(n),s?oC(n._inputNodes,s):n._inputNodes=[];for(const p of n._inputNodes)r.call(n,p)}}let XS=null;function DP(n,r){let o=!1;const s=1/r;if(ie("DISABLE_WEBAUDIO")){const l=window.setInterval(()=>{o?window.clearInterval(l):n(performance.now()/1e3)},1e3*s)}else{const l=Ad();let h=l.createGain();h.gain.value=0,h.connect(l.destination);const p=()=>{if(o)return void(h=null);const v=l.createOscillator();v.onended=p,v.connect(h),v.start(0),v.stop(l.currentTime+s),n(l.currentTime)};p()}return()=>{o=!0}}class kP{constructor(){N(this,"context",void 0),N(this,"analyserNode",void 0),N(this,"sourceNode",void 0),this.context=Ad(),this.analyserNode=this.context.createAnalyser(),this.analyserNode.fftSize=2048,this.analyserNode.smoothingTimeConstant=.4}updateSource(r){if(r!==this.sourceNode){if(this.sourceNode)try{this.sourceNode.disconnect(this.analyserNode)}catch{}this.sourceNode=r,r==null||r.connect(this.analyserNode)}}getVolumeLevel(){if(!this.sourceNode||(!this.context||Ti()||ks()||this.context.state!=="running"&&this.context.resume(),!this.analyserNode))return 0;const r=new Float32Array(this.analyserNode.fftSize);if(this.analyserNode.getFloatTimeDomainData)this.analyserNode.getFloatTimeDomainData(r);else{const s=new Uint8Array(this.analyserNode.fftSize);this.analyserNode.getByteTimeDomainData(s);for(let l=0;l<r.length;++l)r[l]=s[l]/128-1}const o=Yc(r).call(r,(s,l)=>s+l*l,0)/r.length;return Math.max(10*Math.log10(o)+100,0)/100}getAnalyserNode(){return this.analyserNode}rebuildAnalyser(){try{var r,o;(r=this.sourceNode)===null||r===void 0||r.disconnect(this.analyserNode),this.analyserNode=this.context.createAnalyser(),this.analyserNode.fftSize=2048,this.analyserNode.smoothingTimeConstant=.4,(o=this.sourceNode)===null||o===void 0||o.connect(this.analyserNode)}catch{U.warning("rebuild analyser node failed.")}}destroy(){this.updateSource(void 0)}}class LP extends Rn{get processSourceNode(){return this.sourceNode}set processedNode(r){var o;if(!this.isDestroyed&&this._processedNode!==r){try{var s;(s=this.sourceNode)===null||s===void 0||s.disconnect(this.outputNode)}catch{}(o=this._processedNode)===null||o===void 0||o.disconnect(),this._processedNode=r,this.connect()}}get processedNode(){return this._processedNode}constructor(){super(),N(this,"outputNode",void 0),N(this,"outputTrack",void 0),N(this,"isPlayed",!1),N(this,"sourceNode",void 0),N(this,"context",void 0),N(this,"audioBufferNode",void 0),N(this,"destNode",void 0),N(this,"audioOutputLevel",0),N(this,"volumeLevelAnalyser",void 0),N(this,"_processedNode",void 0),N(this,"playNode",void 0),N(this,"isDestroyed",!1),N(this,"onNoAudioInput",void 0),N(this,"isNoAudioInput",!1),N(this,"_noAudioInputCount",0),this.context=Ad(),this.playNode=this.context.destination,this.outputNode=this.context.createGain(),du(this.outputNode),this.volumeLevelAnalyser=new kP}startGetAudioBuffer(r){this.audioBufferNode||(this.audioBufferNode=this.context.createScriptProcessor(r),this.outputNode.connect(this.audioBufferNode),this.audioBufferNode.connect(this.context.destination),this.audioBufferNode.onaudioprocess=o=>{this.emit(Zi.ON_AUDIO_BUFFER,function(s){for(let l=0;l<s.outputBuffer.numberOfChannels;l+=1){const h=s.outputBuffer.getChannelData(l);for(let p=0;p<h.length;p+=1)h[p]=0}return s.inputBuffer}(o))})}stopGetAudioBuffer(){this.audioBufferNode&&(this.audioBufferNode.onaudioprocess=null,this.outputNode.disconnect(this.audioBufferNode),this.audioBufferNode=void 0)}createOutputTrack(){if(!zn().webAudioMediaStreamDest)throw new Q(W.NOT_SUPPORTED,"your browser is not support audio processor");return this.destNode&&this.outputTrack||(this.destNode=this.context.createMediaStreamDestination(),this.outputNode.connect(this.destNode),this.outputTrack=this.destNode.stream.getAudioTracks()[0]),this.outputTrack}play(r){this.context.state!=="running"&&os(()=>{Gt.emit("autoplay-failed")}),this.isPlayed=!0,this.playNode=r||this.context.destination,this.outputNode.connect(this.playNode)}stop(){if(this.isPlayed)try{this.outputNode.disconnect(this.playNode)}catch{}this.isPlayed=!1}getAccurateVolumeLevel(){return this.volumeLevelAnalyser.getVolumeLevel()}async checkHasAudioInput(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;if(r>5)return this.isNoAudioInput=!0,this.onNoAudioInput&&this.onNoAudioInput(),!1;Ti()||ks()?this.context.state==="suspended"&&this.context.resume():this.context.state!=="running"&&this.context.resume();const o=this.volumeLevelAnalyser.getAnalyserNode();let s;o.getFloatTimeDomainData?(s=new Float32Array(o.fftSize),o.getFloatTimeDomainData(s)):(s=new Uint8Array(o.fftSize),o.getByteTimeDomainData(s));let l=!1;for(let h=0;h<s.length;h++)s[h]!==0&&(l=!0);return l?(this.isNoAudioInput=!1,!0):(await ni(200),await this.checkHasAudioInput(r?r+1:1)&&l)}getAudioVolume(){return this.outputNode.gain.value}setVolume(r){this.outputNode.gain.setValueAtTime(r,this.context.currentTime)}destroy(){this.disconnect(),this.stop(),this.isDestroyed=!0,this.onNoAudioInput=void 0}disconnect(){var r,o;(r=this.processedNode)===null||r===void 0||r.disconnect(),(o=this.sourceNode)===null||o===void 0||o.disconnect(),this.outputNode&&this.outputNode.disconnect()}connect(){var r;this.processedNode?(r=this.processedNode)===null||r===void 0||r.connect(this.outputNode):this.sourceNode&&this.sourceNode.connect(this.outputNode),this.volumeLevelAnalyser.updateSource(this.outputNode)}}class JS extends LP{get isFreeze(){return!1}constructor(r,o,s){var l;if(super(),N(this,"sourceNode",void 0),N(this,"track",void 0),N(this,"clonedTrack",void 0),N(this,"audioElement",void 0),N(this,"isCurrentTrackCloned",!1),N(this,"isRemoteTrack",!1),N(this,"originVolumeLevelAnalyser",void 0),N(this,"rebuildWebAudio",async()=>{if(U.debug("ready to rebuild web audio, state:",this.context.state),this.isNoAudioInput&&await this.checkHasAudioInput(),!this.isNoAudioInput||this.isDestroyed)return document.body.removeEventListener("click",this.rebuildWebAudio,!0),void U.debug("rebuild web audio success, current volume status",this.getAccurateVolumeLevel());this.context.resume().then(()=>U.info("resume success")),U.debug("rebuild web audio because of ios 12 bugs"),this.disconnect();const v=this.track;this.track=this.track.clone(),this.isCurrentTrackCloned?v.stop():this.isCurrentTrackCloned=!0;const E=new MediaStream([this.track]);this.sourceNode=this.context.createMediaStreamSource(E),du(this.sourceNode),this.volumeLevelAnalyser.rebuildAnalyser();const T=this.outputNode.gain.value;this.outputNode=this.context.createGain(),this.outputNode.gain.setValueAtTime(T,this.context.currentTime),du(this.outputNode),this.emit(Zi.UPDATE_SOURCE),this.connect(),this.audioElement.srcObject=E,this.isPlayed&&this.play(this.playNode),this.checkHasAudioInput()}),r.kind!=="audio")throw new Q(W.UNEXPECTED_ERROR);this.track=r;const h=new MediaStream([this.track]);if(this.isRemoteTrack=!!o,this.sourceNode=this.context.createMediaStreamSource(h),du(this.sourceNode),s){const v=s.clone();v.enabled=!0,this.clonedTrack=v,U.debug("create an unmuted track ".concat(v.id," from the original track ").concat(s.id," to get the volume"));const E=this.context.createMediaStreamSource(new MediaStream([v]));du(E),this.originVolumeLevelAnalyser=new kP,this.originVolumeLevelAnalyser.updateSource(E)}this.connect(),this.audioElement=document.createElement("audio"),this.audioElement.srcObject=h;const p=Ht();o&&p.os===qr.IOS&&Number((l=p.osVersion)===null||l===void 0?void 0:l.split(".")[0])<15&&(Gt.on(Sr.STATE_CHANGE,()=>{this.context.state==="suspended"?document.body.addEventListener("click",this.rebuildWebAudio,!0):this.context.state==="running"&&this.rebuildWebAudio()}),this.checkHasAudioInput().then(v=>{v||document.body.addEventListener("click",this.rebuildWebAudio,!0)}))}updateTrack(r){this.sourceNode.disconnect(),this.track=r,this.isCurrentTrackCloned=!1;const o=new MediaStream([r]);this.sourceNode=this.context.createMediaStreamSource(o),du(this.sourceNode),this.processedNode||this.sourceNode.connect(this.outputNode),this.emit(Zi.UPDATE_SOURCE),this.audioElement.srcObject=o}destroy(){var r;this.audioElement.srcObject=null,this.audioElement.remove(),Gt.off("state-change",this.rebuildWebAudio),(r=this.originVolumeLevelAnalyser)===null||r===void 0||r.destroy(),this.clonedTrack=void 0,super.destroy()}createMediaStreamSourceNode(r){return this.context.createMediaStreamSource(new MediaStream([r]))}updateOriginTrack(r){const o=r.clone();o.enabled=!0,this.clonedTrack&&(this.clonedTrack.stop(),this.clonedTrack=o),U.debug("create an unmuted track ".concat(o.id," from the original track ").concat(r.id," to get the volume"));const s=this.context.createMediaStreamSource(new MediaStream([o]));du(s),this.originVolumeLevelAnalyser&&this.originVolumeLevelAnalyser.updateSource(s)}getOriginVolumeLevel(){return this.originVolumeLevelAnalyser?this.originVolumeLevelAnalyser.getVolumeLevel():this.getAccurateVolumeLevel()}}async function MP(n,r){const o=(l,h)=>l?typeof l!="number"?l.max||l.exact||l.ideal||l.min||h:l:h,s={audio:!1,video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:n,maxHeight:o(r.height,1080),maxWidth:o(r.width,1920)}}};return r.frameRate&&typeof r.frameRate!="number"?(s.video.mandatory.maxFrameRate=r.frameRate.max,s.video.mandatory.minFrameRate=r.frameRate.min):typeof r.frameRate=="number"&&(s.video.mandatory.maxFrameRate=r.frameRate),await navigator.mediaDevices.getUserMedia(s)}async function cX(n){const r=await UP(n.mediaSource),o=await function(s){return new xe((l,h)=>{const p=document.createElement("div");p.innerText="share screen",p.setAttribute("style","text-align: center; height: 25px; line-height: 25px; border-radius: 4px 4px 0 0; background: #D4D2D4; border-bottom:  solid 1px #B9B8B9;");const v=document.createElement("div");v.setAttribute("style","width: 100%; height: 500px; padding: 15px 25px ; box-sizing: border-box;");const E=document.createElement("div");E.innerText="Agora Web Screensharing wants to share the contents of your screen with webdemo.agorabeckon.com. Choose what you'd like to share.",E.setAttribute("style","height: 12%;");const T=document.createElement("div");T.setAttribute("style","width: 100%; height: 80%; background: #FFF; border:  solid 1px #CBCBCB; display: flex; flex-wrap: wrap; justify-content: space-around; overflow-y: scroll; padding: 0 15px; box-sizing: border-box;");const C=document.createElement("div");C.setAttribute("style","text-align: right; padding: 16px 0;");const I=document.createElement("button");I.innerHTML="cancel",I.setAttribute("style","width: 85px;"),I.onclick=()=>{document.body.removeChild(L);const V=new Error("NotAllowedError");V.name="NotAllowedError",h(V)},C.appendChild(I),v.appendChild(E),v.appendChild(T),v.appendChild(C);const L=document.createElement("div");L.setAttribute("style","position: fixed; z-index: 99999999; top: 50%; left: 50%; width: 620px; height: 525px; background: #ECECEC; border-radius: 4px; -webkit-transform: translate(-50%,-50%); transform: translate(-50%,-50%);"),L.appendChild(p),L.appendChild(v),document.body.appendChild(L),s.map(V=>{if(V.id){const Y=document.createElement("div");Y.setAttribute("style","width: 30%; height: 160px; padding: 20px 0; text-align: center;box-sizing: content-box;");let q=V.thumbnail;const{width:X}=q.getSize();X>1920&&(q=q.resize({width:1920})),Y.innerHTML='<div style="height: 120px; display: table-cell; vertical-align: middle;"><img style="width: 100%; background: #333333; box-shadow: 1px 1px 1px 1px rgba(0, 0, 0, 0.2);" src='+q.toDataURL()+' /></div><span style="	height: 40px; line-height: 40px; display: inline-block; width: 70%; word-break: keep-all; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">'+(V.name.replace(/[\u00A0-\u9999<>\&]/g,function(le){return"&#"+le.charCodeAt(0)+";"})+"</span>"),Y.onclick=()=>{document.body.removeChild(L),l(V.id)},T.appendChild(Y)}})})}(r);return await MP(o,n)}async function UP(n){let r=["window","screen"];n!=="application"&&n!=="window"||(r=["window"]),n==="screen"&&(r=["screen"]);const o=jP();if(!o)throw new Q(W.ELECTRON_IS_NULL);let s=null;try{var l;s=((l=o.desktopCapturer)===null||l===void 0?void 0:l.getSources({types:r}))||o.ipcRenderer.invoke("DESKTOP_CAPTURER_GET_SOURCES",{types:r})}catch{s=null}s&&s.then||(s=new xe((h,p)=>{o.desktopCapturer.getSources({types:r},(v,E)=>{v?p(v):h(E)})}));try{return await s}catch(h){throw new Q(W.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR,h.toString())}}let B0=null;function jP(){if(B0)return B0;try{return B0=window.require("electron"),B0}catch{return null}}function FP(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}const QS=new wi("safari");let VP=!1,BP=!1;async function Oa(n,r){let o=0,s=null;for(;o<2;)try{s=await lX(n,r,o>0);break}catch(l){if(l instanceof Q)throw U.error("[".concat(r,"] ").concat(l.toString())),l;const h=$0(l.name||l.code||l,l.message);if(h.code===W.MEDIA_OPTION_INVALID){U.debug("[".concat(r,"] detect media option invalid, retry")),o+=1,await ni(500);continue}throw U.error("[".concat(r,"] ").concat(h.toString())),h}if(!s)throw new Q(W.UNEXPECTED_ERROR,"can not find stream after getUserMedia");return s}async function lX(n,r,o){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Q(W.NOT_SUPPORTED,"can not find getUserMedia");o&&(n.video&&(delete n.video.width,delete n.video.height),n.screen&&(delete n.screen.width,delete n.screen.height));const s=zn(),l=new MediaStream;if(n.audioSource&&l.addTrack(n.audioSource),n.videoSource&&l.addTrack(n.videoSource),!n.audio&&!n.video&&!n.screen)return U.debug("Using Video Source/ Audio Source"),l;if(n.screen)if(jP())n.screen.sourceId?Nd(l,await MP(n.screen.sourceId,n.screen)):Nd(l,await cX(n.screen));else if(eS()&&n.screen.extensionId&&n.screen.mandatory){if(!s.getStreamFromExtension)throw new Q(W.NOT_SUPPORTED,"This browser does not support screen sharing");U.debug("[".concat(r,'] Screen access on chrome stable, looking for extension"'));const L=await(p=n.screen.extensionId,v=r,new xe((V,Y)=>{try{chrome.runtime.sendMessage(p,{getStream:!0},q=>{if(!q||!q.streamId)return U.error("[".concat(v,"] No response from Chrome Plugin. Plugin not installed properly"),q),void Y(new Q(W.CHROME_PLUGIN_NO_RESPONSE,"No response from Chrome Plugin. Plugin not installed properly"));V(q.streamId)})}catch(q){U.error("[".concat(v,"] AgoraRTC screensharing plugin is not accessible(").concat(p,")"),q.toString()),Y(new Q(W.CHROME_PLUGIN_NOT_INSTALL))}}));n.screen.mandatory.chromeMediaSourceId=L,Nd(l,await navigator.mediaDevices.getUserMedia({video:{mandatory:n.screen.mandatory}}))}else if(s.getDisplayMedia){var h;n.screen.mediaSource&&uP(n.screen.mediaSource);const L={width:n.screen.width,height:n.screen.height,frameRate:n.screen.frameRate,displaySurface:(h=n.screen.displaySurface)!==null&&h!==void 0?h:n.screen.mediaSource==="screen"?"monitor":n.screen.mediaSource},{selfBrowserSurface:V,surfaceSwitching:Y,systemAudio:q}=n.screen,X={selfBrowserSurface:V,surfaceSwitching:Y,systemAudio:q};!V&&delete X.selfBrowserSurface,!Y&&delete X.surfaceSwitching,!q&&delete X.systemAudio,U.debug("[".concat(r,"] getDisplayMedia:"),JSON.stringify({video:L,audio:!!n.screenAudio,controls:X})),Nd(l,await navigator.mediaDevices.getDisplayMedia(function(le){for(var he=1;he<arguments.length;he++){var Se=arguments[he]!=null?arguments[he]:{};he%2?FP(Object(Se),!0).forEach(function(De){N(le,De,Se[De])}):Object.getOwnPropertyDescriptors?Object.defineProperties(le,Object.getOwnPropertyDescriptors(Se)):FP(Object(Se)).forEach(function(De){Object.defineProperty(le,De,Object.getOwnPropertyDescriptor(Se,De))})}return le}({video:L,audio:!!n.screenAudio},X)))}else{if(!Pn())throw U.error("[".concat(r,"] This browser does not support screenSharing")),new Q(W.NOT_SUPPORTED,"This browser does not support screen sharing");{n.screen.mediaSource&&uP(n.screen.mediaSource);const L={video:{mediaSource:n.screen.mediaSource,width:n.screen.width,height:n.screen.height,frameRate:n.screen.frameRate}};U.debug("[".concat(r,"] getUserMedia: ").concat(JSON.stringify(L))),Nd(l,await navigator.mediaDevices.getUserMedia(L))}}var p,v;if(!n.video&&!n.audio)return l;let E={video:n.video,audio:n.audio},T=ie("MEDIA_DEVICE_CONSTRAINTS");if(T)try{typeof T=="string"&&(T=JSON.parse(T)),E=function L(V,Y){if(!GD(V)||!GD(Y)||Array.isArray(V)&&!Array.isArray(Y)||!Array.isArray(V)&&Array.isArray(Y))return Y;if(Array.isArray(Y)&&Array.isArray(V)){const q=[...V];for(let X=0;X<Y.length;X++)q[X]=L(V[X],Y[X]);return q}{const q=pu({},V);for(const X in Y)Object.prototype.hasOwnProperty.call(Y,X)&&(Object.prototype.hasOwnProperty.call(V,X)?q[X]=L(V[X],Y[X]):q[X]=Y[X]);return q}}(E,T)}catch{}U.debug("[".concat(r,"] GetUserMedia"),JSON.stringify(E)),Ht();let C,I=null;(bi()||Ti()||b0())&&(I=await QS.lock());try{C=await navigator.mediaDevices.getUserMedia(E)}catch(L){throw I&&I(),L}return E.audio&&(VP=!0),E.video&&(BP=!0),Nd(l,C),I&&I(),l}function $0(n,r){switch(n){case"Starting video failed":case"OverconstrainedError":case"TrackStartError":return new Q(W.MEDIA_OPTION_INVALID,"".concat(n,": ").concat(r));case"NotFoundError":case"DevicesNotFoundError":return new Q(W.DEVICE_NOT_FOUND,"".concat(n,": ").concat(r));case"NotSupportedError":return new Q(W.NOT_SUPPORTED,"".concat(n,": ").concat(r));case"NotReadableError":return new Q(W.NOT_READABLE,"".concat(n,": ").concat(r));case"InvalidStateError":case"NotAllowedError":case"PERMISSION_DENIED":case"PermissionDeniedError":return new Q(W.PERMISSION_DENIED,"".concat(n,": ").concat(r));case"ConstraintNotSatisfiedError":return new Q(W.CONSTRAINT_NOT_SATISFIED,"".concat(n,": ").concat(r));default:return U.error("getUserMedia unexpected error",n),new Q(W.UNEXPECTED_ERROR,"".concat(n,": ").concat(r))}}function Nd(n,r){const o=n.getVideoTracks()[0],s=n.getAudioTracks()[0],l=r.getVideoTracks()[0],h=r.getAudioTracks()[0];h&&(s&&n.removeTrack(s),n.addTrack(h)),l&&(o&&n.removeTrack(o),n.addTrack(l))}const Mo=new class extends Rn{get state(){return this._state}set state(n){n!==this._state&&(this.emit(lc.STATE_CHANGE,n),this._state=n)}constructor(){super(),N(this,"_state",lu.IDLE),N(this,"isAccessMicrophonePermission",!1),N(this,"isAccessCameraPermission",!1),N(this,"lastAccessMicrophonePermission",!1),N(this,"lastAccessCameraPermission",!1),N(this,"checkdeviceMatched",!1),N(this,"deviceInfoMap",new Map),this.init().then(()=>{navigator.mediaDevices.addEventListener&&navigator.mediaDevices.addEventListener("devicechange",this.updateDevicesInfo.bind(this)),window.setInterval(()=>{(ie("ENUMERATE_DEVICES_INTERVAL")||(T0()||QN()===qr.HARMONY_OS)&&ru())&&this.updateDevicesInfo()},ie("ENUMERATE_DEVICES_INTERVAL_TIME"))}).catch(n=>U.error(n.toString()))}async enumerateDevices(n,r){let o=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return new Q(W.NOT_SUPPORTED,"enumerateDevices() not supported.").throw();const s=await navigator.mediaDevices.enumerateDevices(),l=this.checkMediaDeviceInfoIsOk(s);let h=!this.isAccessMicrophonePermission&&n,p=!this.isAccessCameraPermission&&r;l.audio&&(h=!1),l.video&&(p=!1);let v=null,E=null,T=null;if(!o&&(h||p)){if(QS.isLocked&&(U.debug("[device manager] wait GUM lock"),(await QS.lock())(),U.debug("[device manager] GUM unlock")),VP&&(h=!1,this.isAccessMicrophonePermission=!0),BP&&(p=!1,this.isAccessCameraPermission=!0),U.debug("[device manager] check media device permissions",n,r,h,p),h&&p){try{T=await navigator.mediaDevices.getUserMedia({audio:!0,video:!0})}catch(C){const I=$0(C.name||C.code||C,C.message);if(I.code===W.PERMISSION_DENIED)throw I;U.warning("getUserMedia failed in getDevices",I)}this.isAccessCameraPermission=!0,this.isAccessMicrophonePermission=!0}else if(h){try{v=await navigator.mediaDevices.getUserMedia({audio:n})}catch(C){const I=$0(C.name||C.code||C,C.message);if(I.code===W.PERMISSION_DENIED)throw I;U.warning("getUserMedia failed in getDevices",I)}this.isAccessMicrophonePermission=!0}else if(p){try{E=await navigator.mediaDevices.getUserMedia({video:r})}catch(C){const I=$0(C.name||C.code||C,C.message);if(I.code===W.PERMISSION_DENIED)throw I;U.warning("getUserMedia failed in getDevices",I)}this.isAccessCameraPermission=!0}U.debug("[device manager] mic permission",n,"cam permission",r)}try{const C=await navigator.mediaDevices.enumerateDevices();return v&&v.getTracks().forEach(I=>I.stop()),E&&E.getTracks().forEach(I=>I.stop()),T&&T.getTracks().forEach(I=>I.stop()),v=null,E=null,T=null,C}catch(C){return v&&v.getTracks().forEach(I=>I.stop()),E&&E.getTracks().forEach(I=>I.stop()),T&&T.getTracks().forEach(I=>I.stop()),v=null,E=null,T=null,new Q(W.ENUMERATE_DEVICES_FAILED,C.toString()).throw()}}async getRecordingDevices(){let n=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return(await this.enumerateDevices(!0,!1,n)).filter(r=>r.kind==="audioinput")}async getCamerasDevices(){let n=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return(await this.enumerateDevices(!1,!0,n)).filter(r=>r.kind==="videoinput")}async getSpeakers(){let n=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return(await this.enumerateDevices(!0,!1,n)).filter(r=>r.kind==="audiooutput")}searchDeviceIdByName(n){let r=null;return this.deviceInfoMap.forEach(o=>{o.device.label===n&&(r=o.device.deviceId)}),r}async getDeviceById(n){const r=(await this.enumerateDevices(!0,!0,!0)).find(o=>o.deviceId===n);if(!r)throw new Q(W.DEVICE_NOT_FOUND,"deviceId: ".concat(n));return r}async init(){this.state=lu.INITING;try{await this.updateDevicesInfo(),this.state=lu.INITEND}catch(n){throw U.warning("Device Detection functionality cannot start properly.",n.toString()),this.state=lu.IDLE,!function(){return typeof isSecureContext=="boolean"?isSecureContext:location.protocol==="https:"||location.protocol==="file:"||location.hostname==="localhost"||location.hostname==="127.0.0.1"||location.hostname==="::1"}()&&new Q(W.WEB_SECURITY_RESTRICT,"Your context is limited by web security, please try using https protocol or localhost.").throw(),n}}async updateDevicesInfo(){const n=await this.enumerateDevices(!0,!0,!0),r=Date.now(),o=[];if(n[0]&&n[0].label&&this.checkdeviceMatched===!1){this.checkdeviceMatched=!0;const l=n.find(p=>p.kind==="audioinput"&&p.deviceId==="default"),h=n.find(p=>p.kind==="audiooutput"&&p.deviceId==="default");l&&h?h.groupId===l.groupId?U.debug("[device-check] default input ".concat(l.label," and output ").concat(h.label," is the same group")):U.warning("[device-check] default input ".concat(l.label," and output ").concat(h.label," is not the same group")):U.debug("[device-check] default input or output not found")}const s=this.checkMediaDeviceInfoIsOk(n);if(n.forEach(l=>{if(!l.deviceId)return;const h=this.deviceInfoMap.get("".concat(l.kind,"_").concat(l.deviceId));if((h?h.state:"INACTIVE")!=="ACTIVE"){const p={initAt:r,updateAt:r,device:l,state:"ACTIVE"};this.deviceInfoMap.set("".concat(l.kind,"_").concat(l.deviceId),p),o.push(p)}h&&(h.updateAt=r)}),this.deviceInfoMap.forEach((l,h)=>{l.state==="ACTIVE"&&l.updateAt!==r&&(l.state="INACTIVE",o.push(l))}),this.state!==lu.INITEND)return s.audio&&(this.lastAccessMicrophonePermission=!0,this.isAccessMicrophonePermission=!0),void(s.video&&(this.lastAccessCameraPermission=!0,this.isAccessCameraPermission=!0));o.forEach(l=>{switch(l.device.kind){case"audioinput":this.lastAccessMicrophonePermission&&this.isAccessMicrophonePermission&&this.emit(lc.RECORDING_DEVICE_CHANGED,l);break;case"videoinput":this.lastAccessCameraPermission&&this.isAccessCameraPermission&&this.emit(lc.CAMERA_DEVICE_CHANGED,l);break;case"audiooutput":this.lastAccessMicrophonePermission&&this.isAccessMicrophonePermission&&this.emit(lc.PLAYOUT_DEVICE_CHANGED,l)}}),s.audio&&(this.lastAccessMicrophonePermission=!0,this.isAccessMicrophonePermission=!0),s.video&&(this.lastAccessCameraPermission=!0,this.isAccessCameraPermission=!0)}checkMediaDeviceInfoIsOk(n){const r=n.filter(l=>l.kind==="audioinput"),o=n.filter(l=>l.kind==="videoinput"),s={audio:!1,video:!1};for(const l of r)if(l.label&&l.deviceId){s.audio=!0;break}for(const l of o)if(l.label&&l.deviceId){s.video=!0;break}return s}},uX=["play","playing","loadeddata","canplay","pause","stalled","suspend","waiting","abort","emptied","ended","error"],Eo=new class{constructor(){N(this,"onAutoplayFailed",void 0),N(this,"elementMap",new Map),N(this,"elementStateMap",new Map),N(this,"elementsNeedToResume",[]),N(this,"sinkIdMap",new Map),N(this,"autoResumeAfterInterruption",()=>{Array.from(this.elementMap.entries()).forEach(n=>{let[r,o]=n;const s=this.elementStateMap.get(r),l=o.srcObject.getAudioTracks()[0];md()?l&&l.readyState==="live"&&Gt.curState==="running"&&(U.debug("auto resume after interruption for iOS 15"),o.pause(),o.play()):s&&s==="paused"&&l&&l.readyState==="live"&&Gt.curState==="running"&&(U.debug("auto resume after interruption for iOS"),o.play())})}),N(this,"autoResumeAfterInterruptionOnIOS15_16",()=>{Array.from(this.elementMap.entries()).forEach(n=>{let[r,o]=n;const s=o.srcObject.getAudioTracks()[0];s&&s.readyState==="live"&&(U.debug("auto resume after interruption inside autoResumeAfterInterruptionOnIOS15"),o.pause(),o.play())})}),this.autoResumeAudioElement(),Gt.on(Sr.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),Gt.on(Sr.IOS_15_16_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15_16),Gt.on(Sr.STATE_CHANGE,()=>{Ti()&&Gt.prevState==="suspended"&&Gt.curState==="running"&&this.autoResumeAfterInterruption()})}async setSinkID(n,r){const o=this.elementMap.get(n);if(this.sinkIdMap.set(n,r),o)try{await o.setSinkId(r)}catch(s){throw new Q(W.PERMISSION_DENIED,"can not set sink id: "+s.toString())}}play(n,r,o,s){if(this.elementMap.has(r))return;const l=document.createElement("audio");l.autoplay=!0,l.srcObject=new MediaStream([n]),this.bindAudioElementEvents(r,l),this.elementMap.set(r,l),this.elementStateMap.set(r,Jr.INIT),this.setVolume(r,o);const h=this.sinkIdMap.get(r);if(h)try{l.setSinkId(h).catch(v=>{U.warning("[".concat(r,"] set sink id failed"),v.toString())})}catch(v){U.warning("[".concat(r,"] set sink id failed"),v.toString())}const p=l.play();p&&p.then&&p.catch(v=>{s&&Me.autoplayFailed(s,"audio",v.message,r),U.warning("audio element play warning",v.toString()),this.elementMap.has(r)&&v.name==="NotAllowedError"&&(U.warning("detected audio element autoplay failed"),this.elementsNeedToResume.push(l),os(()=>{this.onAutoplayFailed&&this.onAutoplayFailed(),IP()}))})}updateTrack(n,r){const o=this.elementMap.get(n);o&&(o.srcObject=new MediaStream([r]))}isPlaying(n){return this.elementMap.has(n)&&this.elementStateMap.get(n)==="playing"}setVolume(n,r){const o=this.elementMap.get(n);o&&(r=Math.max(0,Math.min(100,r)),o.volume=r/100)}stop(n){const r=this.elementMap.get(n);if(this.sinkIdMap.delete(n),!r)return;const o=this.elementsNeedToResume.indexOf(r);this.elementsNeedToResume.splice(o,1),r.srcObject=null,r.remove(),this.elementMap.delete(n),this.elementStateMap.delete(n)}bindAudioElementEvents(n,r){uX.forEach(o=>{r.addEventListener(o,s=>{const l=this.elementStateMap.get(n),h=s.type==="pause"?"paused":s.type;if(U.debug("[".concat(n,"] audio-element-status change ").concat(l," => ").concat(h)),s.type==="error"){const p=r==null?void 0:r.error;p&&U.error("[".concat(n,"] media error, code: ").concat(p.code,", message: ").concat(p.message))}this.elementStateMap.set(n,h)})})}getPlayerState(n){return this.elementStateMap.get(n)||"uninit"}autoResumeAudioElement(){const n=()=>{this.elementsNeedToResume.forEach(r=>{r.play().then(o=>{U.debug("Auto resume audio element success")}).catch(o=>{U.warning("Auto resume audio element failed!",o)})}),this.elementsNeedToResume=[]};new xe(r=>{document.body?r():window.addEventListener("load",()=>r())}).then(()=>{Ip()?document.body.addEventListener("click",n,!0):(document.body.addEventListener("touchstart",n,!0),document.body.addEventListener("mousedown",n,!0))})}};function kn(){return function(n,r,o){const s=o.value;return typeof s=="function"&&(o.value=function(){this._isClosed&&new Q(W.INVALID_OPERATION,"[".concat(this.getTrackId(),"] cannot operate a closed track")).print("warning");for(var l=arguments.length,h=new Array(l),p=0;p<l;p++)h[p]=arguments[p];const v=s.apply(this,h);return v instanceof xe?new xe((E,T)=>{v.then(E).catch(T)}):v}),o}}var dX=Kc("Array").values,hX=qc,pX=Jn,fX=b,mX=dX,ZS=Array.prototype,gX={DOMTokenList:!0,NodeList:!0},Ms=function(n){var r=n.values;return n===ZS||fX(ZS,n)&&r===ZS.values||pX(gX,hX(n))?mX:r};function $P(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function H0(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?$P(Object(o),!0).forEach(function(s){N(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):$P(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}class HP extends Rn{constructor(r){super(),N(this,"name","VideoProcessorDestination"),N(this,"ID","0"),N(this,"_source",void 0),N(this,"videoContext",void 0),N(this,"inputTrack",void 0),this.videoContext=r}get kind(){return"video"}get enabled(){return!0}pipe(){throw new Q(W.NOT_SUPPORTED,"VideoProcessor cannot pipe to any other Processor")}unpipe(){throw new Q(W.NOT_SUPPORTED,"VideoProcessor cannot unpipe to any other Processor")}enable(){}disable(){}updateInput(r){if(r.context!==this.videoContext)throw new Error(`ProcessorContext passed to VideoTrack.processorDestination doesn't match it's belonging VideoTrack's context.
Probably you are making pipeline like this:
videoTrack1.pipe(processor).pipe(videoTrack2.processorDestination).`);r.track&&r.track!==this.inputTrack&&(this.videoContext.chained=!0,this.inputTrack=r.track,this.emit(ei.ON_TRACK,r.track))}reset(){this.inputTrack=void 0,this.videoContext.chained=!1,this.emit(ei.ON_TRACK,void 0)}}class WP extends Rn{set chained(r){this._chained=r}get chained(){return this._chained}constructor(r,o){super(),N(this,"constraintsMap",new Map),N(this,"statsRegistry",[]),N(this,"usageRegistry",[]),N(this,"trackId",void 0),N(this,"direction",void 0),N(this,"_chained",!1),this.trackId=r,this.direction=o}async getConstraints(){return await ri(this,eo.REQUEST_CONSTRAINTS)}async requestApplyConstraints(r,o){var s;return U.info("processor ".concat(o.name," requestApplyConstraints for ").concat(this.trackId)),r&&this.constraintsMap.set(o,r),Ln(this,eo.REQUEST_UPDATE_CONSTRAINTS,Array.from(Ms(s=this.constraintsMap).call(s)))}async requestRevertConstraints(r){var o;if(this.constraintsMap.has(r))return U.info("processor ".concat(r.name," requestRevertConstraints for ").concat(this.trackId)),this.constraintsMap.delete(r),Ln(this,eo.REQUEST_UPDATE_CONSTRAINTS,Array.from(Ms(o=this.constraintsMap).call(o)))}registerStats(r,o,s){this.statsRegistry.find(l=>l.processorID===r.ID&&l.processorName===r.name&&l.type===o)||this.statsRegistry.push({processorName:r.name,processorID:r.ID,type:o,cb:s})}unregisterStats(r,o){const s=this.statsRegistry.findIndex(l=>l.processorID===r.ID&&l.processorName===r.name&&l.type===o);s!==-1&&this.statsRegistry.splice(s,1)}gatherStats(){const r=[];for(const{processorID:o,processorName:s,type:l,cb:h}of this.statsRegistry)try{const p=h();r.push({processorID:o,processorName:s,type:l,stats:p})}catch(p){U.error(new Q(W.UNEXPECTED_ERROR,p.message))}return r}registerUsage(r,o){this.usageRegistry.find(s=>s.processorID===r.ID&&s.processorName===r.name)||this.usageRegistry.push({processorID:r.ID,processorName:r.name,cb:o})}unregisterUsage(r){const o=this.usageRegistry.findIndex(s=>s.processorID===r.ID&&s.processorName===r.name);o!==-1&&this.usageRegistry.splice(o,1)}async gatherUsage(){const r=[];if(!this.chained)return[];for(const{cb:o}of this.usageRegistry)try{let s=o();s instanceof xe&&(s=await s),r.push(H0(H0({},s),{},{direction:this.direction}))}catch(s){U.error("gather extension usage error",s)}return r}getDirection(){return this.direction}}class GP extends Rn{constructor(r){super(),N(this,"name","AudioProcessorDestination"),N(this,"ID","0"),N(this,"inputTrack",void 0),N(this,"inputNode",void 0),N(this,"audioProcessorContext",void 0),N(this,"_source",void 0),this.audioProcessorContext=r}get kind(){return"audio"}get enabled(){return!0}pipe(){throw new Q(W.NOT_SUPPORTED,"AudioProcessorDestination cannot pipe to any other Processor")}unpipe(){throw new Q(W.NOT_SUPPORTED,"AudioProcessor cannot unpipe to any other Processor")}enable(){}disable(){}reset(){this.inputTrack=void 0,this.inputNode=void 0,this.audioProcessorContext.chained=!1,this.emit(ei.ON_TRACK,void 0),this.emit(ei.ON_NODE,void 0)}updateInput(r){if(r.context!==this.audioProcessorContext)throw new Error(`ProcessorContext passed to AudioTrack.processorDestination doesn't match it's belonging AudioTrack's context.
        Probably you are making pipeline like this: audioTrack1.pipe(processor).pipe(audioTrack2.processorDestination).`);r.track&&this.inputTrack!==r.track&&(this.audioProcessorContext.chained=!0,this.inputTrack=r.track,this.emit(ei.ON_TRACK,this.inputTrack)),r.node&&this.inputNode!==r.node&&(this.audioProcessorContext.chained=!0,this.inputNode=r.node,this.emit(ei.ON_NODE,this.inputNode))}}class zP extends Rn{set chained(r){this._chained=r}get chained(){return this._chained}constructor(r,o,s){super(),N(this,"constraintsMap",new Map),N(this,"statsRegistry",[]),N(this,"audioContext",void 0),N(this,"trackId",void 0),N(this,"direction",void 0),N(this,"usageRegistry",[]),N(this,"_chained",!1),this.audioContext=r,this.trackId=o,this.direction=s}async getConstraints(){return ri(this,eo.REQUEST_CONSTRAINTS)}getAudioContext(){return this.audioContext}async requestApplyConstraints(r,o){var s;return U.info("processor ".concat(o.name," requestApplyConstraints for ").concat(this.trackId)),r&&this.constraintsMap.set(o,r),Ln(this,eo.REQUEST_UPDATE_CONSTRAINTS,Array.from(Ms(s=this.constraintsMap).call(s)))}async requestRevertConstraints(r){var o;if(this.constraintsMap.has(r))return this.constraintsMap.delete(r),Ln(this,eo.REQUEST_UPDATE_CONSTRAINTS,Array.from(Ms(o=this.constraintsMap).call(o)))}registerStats(r,o,s){this.statsRegistry.find(l=>l.processorID===r.ID&&l.processorName===r.name&&l.type===o)||this.statsRegistry.push({processorName:r.name,processorID:r.ID,type:o,cb:s})}unregisterStats(r,o){const s=this.statsRegistry.findIndex(l=>l.processorID===r.ID&&l.processorName===r.name&&l.type===o);s!==-1&&this.statsRegistry.splice(s,1)}gatherStats(){const r=[];for(const{processorID:o,processorName:s,type:l,cb:h}of this.statsRegistry)try{const p=h();r.push({processorID:o,processorName:s,type:l,stats:p})}catch(p){U.error(new Q(W.UNEXPECTED_ERROR,p.message))}return r}registerUsage(r,o){this.usageRegistry.find(s=>s.processorID===r.ID&&s.processorName===r.name)||this.usageRegistry.push({processorID:r.ID,processorName:r.name,cb:o})}unregisterUsage(r){const o=this.usageRegistry.findIndex(s=>s.processorID===r.ID&&s.processorName===r.name);o!==-1&&this.usageRegistry.splice(o,1)}async gatherUsage(){const r=[];if(!this.chained)return[];for(const{cb:o}of this.usageRegistry)try{let s=o();s instanceof xe&&(s=await s),r.push(H0(H0({},s),{},{direction:this.direction}))}catch(s){U.error("gather extension usage error",s)}return r}getDirection(){return this.direction}}class eC extends Rn{get isPlayed(){return!0}get isFreeze(){return!1}constructor(){super(),N(this,"context",void 0),N(this,"processSourceNode",void 0),N(this,"outputTrack",void 0),N(this,"processedNode",void 0),N(this,"clonedTrack",void 0),N(this,"outputNode",void 0),this.outputNode=new vX}setVolume(){}createOutputTrack(){throw new Q(W.NOT_SUPPORTED,"can not create output MediaStreamTrack when WebAudio disabled")}getOriginVolumeLevel(){return 0}getAccurateVolumeLevel(){return 0}stopGetAudioBuffer(){}startGetAudioBuffer(){}play(){}stop(){}destroy(){}updateTrack(){}updateOriginTrack(){}createMediaStreamSourceNode(){}}class vX{disconnect(){}connect(){}}let W0,xd=null;class EX{constructor(){N(this,"state","open"),N(this,"trigger",void 0),N(this,"tasks",[]),U.debug("[macro-task-queue] is created."),this.trigger=setTimeout(()=>{this.state="closed",U.debug("[macro-task-queue] will be closed, all remaining tasks will execute. [".concat(this.tasks.map(r=>r.key),"]")),this.trigger=void 0,this.tasks.forEach(r=>{let{func:o}=r;return o()}),this.tasks.length=0,U.debug("[macro-task-queue] is closed.")})}enqueue(r,o){this.state!=="closed"&&(this.tasks.push({key:r,func:o}),U.debug("[macro-task-queue] is queued, current queue ".concat(this.tasks.length,". ").concat(typeof r=="string"?r:"")))}runTask(r){if(this.state==="closed")return;const o=this.tasks.findIndex(s=>s.key===r);if(o!==-1){const s=this.tasks.splice(o,1);U.debug("[macro-task-queue] is unqueued, current queue ".concat(this.tasks.length,". ").concat(typeof r=="string"?r:"")),s[0].func()}}release(){this.trigger&&(this.state="closed",clearTimeout(this.trigger),this.trigger=void 0,this.tasks.length=0,U.debug("[macro-task-queue] is closed."))}}function tC(n){return function(r,o,s){var l;const h=(l=s.value)!==null&&l!==void 0?l:s.get,p=function(){xd&&xd.state==="open"&&xd.runTask(n);for(var v=arguments.length,E=new Array(v),T=0;T<v;T++)E[T]=arguments[T];return h==null?void 0:h.apply(this,...E)};return s.value?s.value=p:s.get=p,s}}var KP,YP,qP,XP,JP,QP,ZP,eD,tD,nD,rD,iD,oD,aD,sD,cD,lD,uD,dD,hD,pD,zt,fD,mD,gD,vD,ED,_D,Us,yD,SD,CD,bD,TD,RD,ID,wD,OD,AD,ND,xD,fi;function PD(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function nC(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?PD(Object(o),!0).forEach(function(s){N(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):PD(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}(function(n){n.UPDATE_TRACK_SOURCE="update-track-source"})(W0||(W0={}));let ti=(KP=tC("INIT_WEBAUDIO"),YP=tC("INIT_WEBAUDIO"),qP=tC("INIT_WEBAUDIO"),XP=ze({argsMap:(n,r)=>[n.getTrackId(),r],throttleTime:300}),JP=ze({argsMap:(n,r)=>[n.getTrackId(),r]}),QP=kn(),ZP=Od("LocalAudioTrack","_enabledMutex"),eD=ze({argsMap:(n,r)=>[n.getTrackId(),r]}),tD=kn(),nD=Od("LocalAudioTrack","_enabledMutex"),rD=ze({argsMap:(n,r)=>[n.getTrackId(),r]}),iD=kn(),oD=kn(),aD=kn(),sD=ze({argsMap:n=>[n.getTrackId()]}),cD=kn(),lD=ze({argsMap:n=>[n.getTrackId()]}),uD=kn(),dD=ze({argsMap:n=>[n.getTrackId()]}),hD=ze({argsMap:(n,r)=>[n.getTrackId(),r.name]}),pD=ze({argsMap:n=>[n.getTrackId()]}),_e((zt=class extends qS{get _source(){return this._trackSource}set _source(n){this._trackSource=n}get processorContext(){return this._processorContext}set processorContext(n){this._processorContext=n}get processorDestination(){return this._processorDestination}set processorDestination(n){this._processorDestination=n}get isPlaying(){return this._useAudioElement?Eo.isPlaying(this.getTrackId()):this._source.isPlayed}get __className__(){return"LocalAudioTrack"}constructor(n,r,o,s,l){super(n,o),N(this,"trackMediaType","audio"),N(this,"_encoderConfig",void 0),N(this,"_trackSource",void 0),N(this,"_enabled",!0),N(this,"_volume",100),N(this,"_useAudioElement",!1),N(this,"_bypassWebAudio",!1),N(this,"processor",void 0),N(this,"_processorContext",void 0),N(this,"_processorDestination",void 0),N(this,"_getOriginVolumeLevel",void 0),this._encoderConfig=r,this._getOriginVolumeLevel=!!s;const h=()=>{this.processorContext=new zP(this._source.context,this.getTrackId(),"local"),this.processorDestination=new GP(this.processorContext),this.bindProcessorDestinationEvents(),this._source.on(Zi.UPDATE_SOURCE,()=>{this.processor&&this.processor.updateInput({node:this._source.processSourceNode,context:this.processorContext})})},p=l&&bi()&&!PP();ie("DISABLE_WEBAUDIO")?(this._source=new eC,this._useAudioElement=!0,this._bypassWebAudio=!0):p?this._source=new eC:(this._source=new JS(n,!1,this._getOriginVolumeLevel?n:void 0),ie("LOCAL_AUDIO_TRACK_USES_WEB_AUDIO")||(this._useAudioElement=!0)),h(),!ie("DISABLE_WEBAUDIO")&&p&&(xd||(xd=new EX),xd).enqueue("INIT_WEBAUDIO",()=>{this._source=new JS(n,!1,this._getOriginVolumeLevel?n:void 0),ie("LOCAL_AUDIO_TRACK_USES_WEB_AUDIO")||(this._useAudioElement=!0),h(),this.emit(W0.UPDATE_TRACK_SOURCE)})}setVolume(n){sn(n,"volume",0,1e3),this._volume=n,this._source.setVolume(n/100),this._useAudioElement&&Eo.setVolume(this.getTrackId(),n);try{if(this._bypassWebAudio)return void U.debug("[".concat(this.getTrackId(),"] setVolume returned because no pass through WebAudio."));const r=this._source.createOutputTrack();this._mediaStreamTrack!==r&&(this._mediaStreamTrack=r,Ln(this,Ze.NEED_REPLACE_TRACK,this).then(()=>{U.debug("[".concat(this.getTrackId(),"] replace web audio track success"))}).catch(o=>{U.warning("[".concat(this.getTrackId(),"] replace web audio track failed"),o)}))}catch{}}getVolumeLevel(){return this._muted&&this.enabled&&this._getOriginVolumeLevel?this._source.getOriginVolumeLevel():this._source.getAccurateVolumeLevel()}async setPlaybackDevice(n){if(!this._useAudioElement)throw new Q(W.NOT_SUPPORTED,"your browser does not support setting the audio output device");await Eo.setSinkID(this.getTrackId(),n)}async setEnabled(n,r,o){return this._setEnabled(n,r,o)}async _setEnabled(n,r,o){if(!o){if(n===this._enabled)return;this.stateCheck("enabled",n)}if(U.info("[".concat(this.getTrackId(),"] start setEnabled"),n),n){this._originMediaStreamTrack.enabled=!0;try{o||(this._enabled=!0),await Ln(this,Ze.NEED_ENABLE_TRACK,this),U.info("[".concat(this.getTrackId(),"] setEnabled to ").concat(n," success"))}catch(s){throw o||(this._enabled=!1),U.error("[".concat(this.getTrackId(),"] setEnabled to true error"),s.toString()),s}}else{this._originMediaStreamTrack.enabled=!1,o||(this._enabled=!1);try{await Ln(this,Ze.NEED_DISABLE_TRACK,this)}catch(s){throw o||(this._enabled=!0),U.error("[".concat(this.getTrackId(),"] setEnabled to false error"),s.toString()),s}}}async setMuted(n){n!==this._muted&&(this.stateCheck("muted",n),this._muted=n,this._originMediaStreamTrack.enabled=!n,U.debug("[".concat(this.getTrackId(),"] start set muted: ").concat(n)),n?await Ln(this,Ze.NEED_MUTE_TRACK,this):await Ln(this,Ze.NEED_UNMUTE_TRACK,this))}getStats(){return Lp(()=>{U.warning("[deprecated] LocalAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalAudioStats instead")},"localAudioTrackGetStatsWarning"),Aa(this,Ze.GET_STATS)||nC({},LS)}setAudioFrameCallback(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:4096;if(!n)return this._source.removeAllListeners(Zi.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(r),this._source.removeAllListeners(Zi.ON_AUDIO_BUFFER),this._source.on(Zi.ON_AUDIO_BUFFER,o=>n(o))}play(){U.debug("[".concat(this.getTrackId(),"] start audio playback")),this._useAudioElement?(U.debug("[".concat(this.getTrackId(),"] start audio playback in element")),Eo.play(this._mediaStreamTrack,this.getTrackId(),this._volume)):this._source.play()}stop(){U.debug("[".concat(this.getTrackId(),"] stop audio playback")),this._useAudioElement?Eo.stop(this.getTrackId()):this._source.stop()}close(){super.close(),this.unbindProcessorDestinationEvents(),this.unbindProcessorContextEvents(),this.unpipe(),this.processorDestination._source&&this.processorDestination._source.unpipe(),this._source.destroy()}_updatePlayerSource(){let n=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];U.debug("[".concat(this.getTrackId(),"] update player source track")),n&&this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&Eo.updateTrack(this.getTrackId(),this._mediaStreamTrack)}async _updateOriginMediaStreamTrack(n,r){this._originMediaStreamTrack!==n&&(this._originMediaStreamTrack.removeEventListener("ended",this._handleTrackEnded),n.addEventListener("ended",this._handleTrackEnded),r&&this._originMediaStreamTrack.stop(),this._originMediaStreamTrack=n,this._muted&&(this._originMediaStreamTrack.enabled=!1),this.processor&&this.processor.updateInput({track:n,context:this.processorContext}),this._mediaStreamTrack!==this._source.outputTrack?(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await Ln(this,Ze.NEED_REPLACE_TRACK,this)):this._source.updateTrack(this._originMediaStreamTrack),this._getOriginVolumeLevel&&this._source.updateOriginTrack(n))}renewMediaStreamTrack(n){return xe.resolve(void 0)}pipe(n){if(this._bypassWebAudio)throw new Q(W.INVALID_OPERATION,"Can not process AudioTrack when bypassWebAudio set to true.");if(this.processor===n)return n;if(n._source)throw new Q(W.INVALID_OPERATION,"Processor ".concat(n.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=n,this.processor._source=this,n.updateInput({track:this._originMediaStreamTrack,node:this._source.processSourceNode,context:this.processorContext}),n}unpipe(){var n;if(!this.processor)return;const r=this.processor;(n=this._source.processSourceNode)===null||n===void 0||n.disconnect(),this.processor._source=!1,this.processor=void 0,r.reset()}bindProcessorDestinationEvents(){this.processorDestination.on(ei.ON_TRACK,async n=>{n?n!==this._mediaStreamTrack&&(this._mediaStreamTrack=n,this._updatePlayerSource(!1),this._source.processedNode=this._source.createMediaStreamSourceNode(n),await Ln(this,Ze.NEED_REPLACE_TRACK,this)):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await Ln(this,Ze.NEED_REPLACE_TRACK,this))}),this.processorDestination.on(ei.ON_NODE,n=>{this._source.processedNode=n})}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(ei.ON_TRACK),this.processorDestination.removeAllListeners(ei.ON_NODE)}unbindProcessorContextEvents(){this.processorContext.removeAllListeners(eo.REQUEST_UPDATE_CONSTRAINTS),this.processorContext.removeAllListeners(eo.REQUEST_CONSTRAINTS)}}).prototype,"_source",[KP],Object.getOwnPropertyDescriptor(zt.prototype,"_source"),zt.prototype),_e(zt.prototype,"processorContext",[YP],Object.getOwnPropertyDescriptor(zt.prototype,"processorContext"),zt.prototype),_e(zt.prototype,"processorDestination",[qP],Object.getOwnPropertyDescriptor(zt.prototype,"processorDestination"),zt.prototype),_e(zt.prototype,"setVolume",[XP],Object.getOwnPropertyDescriptor(zt.prototype,"setVolume"),zt.prototype),_e(zt.prototype,"setPlaybackDevice",[JP,QP],Object.getOwnPropertyDescriptor(zt.prototype,"setPlaybackDevice"),zt.prototype),_e(zt.prototype,"setEnabled",[ZP,eD,tD],Object.getOwnPropertyDescriptor(zt.prototype,"setEnabled"),zt.prototype),_e(zt.prototype,"setMuted",[nD,rD,iD],Object.getOwnPropertyDescriptor(zt.prototype,"setMuted"),zt.prototype),_e(zt.prototype,"getStats",[oD],Object.getOwnPropertyDescriptor(zt.prototype,"getStats"),zt.prototype),_e(zt.prototype,"setAudioFrameCallback",[aD],Object.getOwnPropertyDescriptor(zt.prototype,"setAudioFrameCallback"),zt.prototype),_e(zt.prototype,"play",[sD,cD],Object.getOwnPropertyDescriptor(zt.prototype,"play"),zt.prototype),_e(zt.prototype,"stop",[lD,uD],Object.getOwnPropertyDescriptor(zt.prototype,"stop"),zt.prototype),_e(zt.prototype,"close",[dD],Object.getOwnPropertyDescriptor(zt.prototype,"close"),zt.prototype),_e(zt.prototype,"pipe",[hD],Object.getOwnPropertyDescriptor(zt.prototype,"pipe"),zt.prototype),_e(zt.prototype,"unpipe",[pD],Object.getOwnPropertyDescriptor(zt.prototype,"unpipe"),zt.prototype),zt),G0=(fD=ze({argsMap:(n,r)=>[n.getTrackId(),r]}),mD=kn(),gD=Od("MicrophoneAudioTrack","_enabledMutex"),vD=ze({argsMap:(n,r,o)=>[n.getTrackId(),r,o]}),ED=kn(),_D=ze({argsMap:n=>[n.getTrackId()]}),_e((Us=class extends ti{get __className__(){return"MicrophoneAudioTrack"}constructor(n,r,o,s){super(n,r.encoderConfig?M0(r.encoderConfig):{},s,ie("GET_VOLUME_OF_MUTED_AUDIO_TRACK"),!0),N(this,"_config",void 0),N(this,"_deviceName","default"),N(this,"_constraints",void 0),N(this,"_originalConstraints",void 0),N(this,"_enabled",!0),this._config=r,this._constraints=o,this._originalConstraints=o,this._deviceName=n.label,typeof r.bypassWebAudio=="boolean"&&(this._bypassWebAudio=r.bypassWebAudio),(md()||nS())&&Gt.bindInterruptDetectorTrack(this),this.on(W0.UPDATE_TRACK_SOURCE,()=>{this.bindProcessorContextEvents()}),PP()&&this.bindProcessorContextEvents()}async setDevice(n){if(U.info("[".concat(this.getTrackId(),"] start set device to ").concat(n)),this._enabled)try{const r=await Mo.getDeviceById(n),o={};o.audio=nC({},this._constraints),o.audio.deviceId={exact:n},this._originMediaStreamTrack.stop();let s=null;try{s=await Oa(o,this.getTrackId())}catch(l){throw U.error("[".concat(this.getTrackId(),"] setDevice failed"),l.toString()),s=await Oa({audio:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(s.getAudioTracks()[0],!1),l}await this._updateOriginMediaStreamTrack(s.getAudioTracks()[0],!1),this._deviceName=r.label,this._config.microphoneId=n,this._constraints.deviceId={exact:n}}catch(r){throw U.error("[".concat(this.getTrackId(),"] setDevice error"),r.toString()),r}else try{const r=await Mo.getDeviceById(n);this._deviceName=r.label,this._config.microphoneId=n,this._constraints.deviceId={exact:n}}catch(r){throw U.error("[".concat(this.getTrackId(),"] setDevice error"),r.toString()),r}U.info("[".concat(this.getTrackId(),"] set device to ").concat(n," success"))}async setEnabled(n,r,o){if(r)return U.debug("[".concat(this.getTrackId(),"] setEnabled false (do not close microphone)")),await super._setEnabled(n);if(!o){if(n===this._enabled)return;this.stateCheck("enabled",n)}if(U.info("[".concat(this.getTrackId(),"] start setEnabled"),n),!n){var s;this._originMediaStreamTrack.onended=null,this._originMediaStreamTrack.stop(),(s=this._source.clonedTrack)===null||s===void 0||s.stop(),o||(this._enabled=!1);try{await Ln(this,Ze.NEED_DISABLE_TRACK,this)}catch(p){throw U.error("[".concat(this.getTrackId(),"] setEnabled false failed"),p.toString()),p}return}const l=nC({},this._constraints),h=Mo.searchDeviceIdByName(this._deviceName);h&&!l.deviceId&&(l.deviceId=h);try{o||(this._enabled=!0);const p=await Oa({audio:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(p.getAudioTracks()[0],!1),await Ln(this,Ze.NEED_ENABLE_TRACK,this)}catch(p){throw o||(this._enabled=!1),U.error("[".concat(this.getTrackId(),"] setEnabled true failed"),p.toString()),p}U.info("[".concat(this.getTrackId(),"] setEnabled success"))}close(){super.close(),(md()||nS())&&Gt.unbindInterruptDetectorTrack(this)}onTrackEnded(){if((Ti()||ks())&&this._enabled&&!this._isClosed&&Gt.duringInterruption){const n=async()=>{Gt.off(Sr.IOS_INTERRUPTION_END,n),this._enabled&&!this._isClosed&&(U.debug("[".concat(this.getTrackId(),"] try capture microphone media device for interrupted iOS device.")),await this.setEnabled(!1),await this.setEnabled(!0))};Gt.on(Sr.IOS_INTERRUPTION_END,n)}else U.debug("[".concat(this.getTrackId(),"] track ended")),this.safeEmit(tl.TRACK_ENDED)}async renewMediaStreamTrack(n){const r=n||this._constraints,o=Mo.searchDeviceIdByName(this._deviceName);if(o&&!r.deviceId&&(r.deviceId=o),this._constraints=r,this._enabled){this._originMediaStreamTrack.stop();const s=await Oa({audio:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(s.getAudioTracks()[0],!0)}}bindProcessorContextEvents(){this.processorContext.on(eo.REQUEST_UPDATE_CONSTRAINTS,async(n,r,o)=>{try{const s=Object.assign({},this._originalConstraints,...n);await this.renewMediaStreamTrack(s),r()}catch(s){o(s)}}),this.processorContext.on(eo.REQUEST_CONSTRAINTS,async n=>{n(this._originMediaStreamTrack.getSettings())})}}).prototype,"setDevice",[fD,mD],Object.getOwnPropertyDescriptor(Us.prototype,"setDevice"),Us.prototype),_e(Us.prototype,"setEnabled",[gD,vD,ED],Object.getOwnPropertyDescriptor(Us.prototype,"setEnabled"),Us.prototype),_e(Us.prototype,"close",[_D],Object.getOwnPropertyDescriptor(Us.prototype,"close"),Us.prototype),Us),_X=(yD=ze({argsMap:(n,r)=>[n.getTrackId(),r,n.duration]}),SD=kn(),CD=ze({argsMap:n=>[n.getTrackId()]}),bD=kn(),TD=ze({argsMap:n=>[n.getTrackId()]}),RD=kn(),ID=ze({argsMap:n=>[n.getTrackId()]}),wD=kn(),OD=ze({argsMap:n=>[n.getTrackId()]}),AD=kn(),ND=ze({argsMap:n=>[n.getTrackId()]}),xD=kn(),_e((fi=class extends ti{get __className__(){return"BufferSourceAudioTrack"}constructor(n,r,o,s){super(r.createOutputTrack(),o,s),N(this,"source",void 0),N(this,"_bufferSource",void 0),this.source=n,this._bufferSource=r,this._bufferSource.on(Zi.AUDIO_SOURCE_STATE_CHANGE,l=>{this.safeEmit(tl.SOURCE_STATE_CHANGE,l)});try{this._mediaStreamTrack=this._source.createOutputTrack()}catch{}}get currentState(){return this._bufferSource.currentState}get duration(){return this._bufferSource.duration}get playbackSpeed(){return this._bufferSource.playbackSpeed}getCurrentTime(){return this._bufferSource.currentTime}startProcessAudioBuffer(n){n&&this._bufferSource.updateOptions(n),this._bufferSource.startProcessAudioBuffer()}pauseProcessAudioBuffer(){this._bufferSource.pauseProcessAudioBuffer()}seekAudioBuffer(n){this._bufferSource.seekAudioBuffer(n)}resumeProcessAudioBuffer(){this._bufferSource.resumeProcessAudioBuffer()}stopProcessAudioBuffer(){this._bufferSource.stopProcessAudioBuffer()}setAudioBufferPlaybackSpeed(n){sn(n,"speed",0),this._bufferSource.setAudioBufferPlaybackSpeed(n)}}).prototype,"startProcessAudioBuffer",[yD,SD],Object.getOwnPropertyDescriptor(fi.prototype,"startProcessAudioBuffer"),fi.prototype),_e(fi.prototype,"pauseProcessAudioBuffer",[CD,bD],Object.getOwnPropertyDescriptor(fi.prototype,"pauseProcessAudioBuffer"),fi.prototype),_e(fi.prototype,"seekAudioBuffer",[TD,RD],Object.getOwnPropertyDescriptor(fi.prototype,"seekAudioBuffer"),fi.prototype),_e(fi.prototype,"resumeProcessAudioBuffer",[ID,wD],Object.getOwnPropertyDescriptor(fi.prototype,"resumeProcessAudioBuffer"),fi.prototype),_e(fi.prototype,"stopProcessAudioBuffer",[OD,AD],Object.getOwnPropertyDescriptor(fi.prototype,"stopProcessAudioBuffer"),fi.prototype),_e(fi.prototype,"setAudioBufferPlaybackSpeed",[ND,xD],Object.getOwnPropertyDescriptor(fi.prototype,"setAudioBufferPlaybackSpeed"),fi.prototype),fi);class to extends ti{get __className__(){return"MixingAudioTrack"}get isActive(){for(const r of this.trackList)if(r._enabled&&!r._isClosed&&!r.muted)return!0;return!1}constructor(){const r=Ad().createMediaStreamDestination();super(r.stream.getAudioTracks()[0],void 0,pn(8,"track-mix-")),N(this,"trackList",void 0),N(this,"destNode",void 0);try{this._mediaStreamTrack=this._source.createOutputTrack()}catch{}this.destNode=r,this.trackList=[]}hasAudioTrack(r){return this.trackList.indexOf(r)!==-1}addAudioTrack(r){this.trackList.indexOf(r)===-1?(U.debug("add ".concat(r.getTrackId()," to mixing track")),r._source.outputNode.connect(this.destNode),this.trackList.push(r),this.updateEncoderConfig()):U.debug("track ".concat(r.getTrackId()," is already added"))}removeAudioTrack(r){if(this.trackList.indexOf(r)!==-1){U.debug("remove ".concat(r.getTrackId()," from mixing track"));try{r._source.outputNode.disconnect(this.destNode)}catch{}oC(this.trackList,r),this.updateEncoderConfig()}}updateEncoderConfig(){const r={};this.trackList.forEach(o=>{o._encoderConfig&&((o._encoderConfig.bitrate||0)>(r.bitrate||0)&&(r.bitrate=o._encoderConfig.bitrate),(o._encoderConfig.sampleRate||0)>(r.sampleRate||0)&&(r.sampleRate=o._encoderConfig.sampleRate),(o._encoderConfig.sampleSize||0)>(r.sampleSize||0)&&(r.sampleSize=o._encoderConfig.sampleSize),o._encoderConfig.stereo&&(r.stereo=!0))}),this._encoderConfig=r}_updateRtpTransceiver(r){this._rtpTransceiver!==r&&(this._rtpTransceiver=r,this.trackList.forEach(o=>{o instanceof to?o.emit(Pp.TRANSCEIVER_UPDATED,r):o._updateRtpTransceiver(r)}))}}class yX extends Rn{constructor(){super(...arguments),N(this,"resultStorage",new Map)}setLocalAudioStats(r,o,s){this.record("AUDIO_INPUT_LEVEL_TOO_LOW",r,this.checkAudioInputLevel(s,o)),this.record("SEND_AUDIO_BITRATE_TOO_LOW",r,this.checkSendAudioBitrate(s,o))}setLocalVideoStats(r,o,s){this.record("SEND_VIDEO_BITRATE_TOO_LOW",r,this.checkSendVideoBitrate(s,o)),this.record("FRAMERATE_INPUT_TOO_LOW",r,this.checkFramerateInput(s,o)),this.record("FRAMERATE_SENT_TOO_LOW",r,this.checkFramerateSent(s))}setRemoteAudioStats(r,o){const s=r.getUserId();this.record("AUDIO_OUTPUT_LEVEL_TOO_LOW",s,this.checkAudioOutputLevel(o))}setRemoteVideoStats(r,o){const s=r.getUserId();this.record("RECV_VIDEO_DECODE_FAILED",s,this.checkVideoDecode(o))}record(r,o,s){if(ie("STATS_UPDATE_INTERVAL")>500)return;this.resultStorage.has(r)||this.resultStorage.set(r,{result:[],isPrevNormal:!0});const l=this.resultStorage.get(r);if(l&&(l.result.push(s),l.result.length>=5)){const h=l.result.includes(!0);l.isPrevNormal&&!h&&this.emit("exception",DD[r],r,o),!l.isPrevNormal&&h&&this.emit("exception",DD[r]+2e3,r+"_RECOVER",o),l.isPrevNormal=h,l.result=[]}}checkAudioOutputLevel(r){return!(r.receiveBitrate>0&&r.receiveLevel===0)}checkAudioInputLevel(r,o){return o instanceof to&&!o.isActive||!!o.muted||r.sendVolumeLevel!==0}checkFramerateInput(r,o){let s=null;o._encoderConfig&&o._encoderConfig.frameRate&&(s=dc(o._encoderConfig.frameRate));const l=r.captureFrameRate;return!s||!l||!(s>10&&l<5||s<10&&s>=5&&l<=1)}checkFramerateSent(r){return!(r.captureFrameRate&&r.sendFrameRate&&r.captureFrameRate>5&&r.sendFrameRate<=1)}checkSendVideoBitrate(r,o){return!!o.muted||r.sendBitrate!==0}checkSendAudioBitrate(r,o){return o instanceof to&&!o.isActive||!!o.muted||r.sendBitrate!==0}checkVideoDecode(r){return r.receiveBitrate===0||r.decodeFrameRate!==0}}const DD={FRAMERATE_INPUT_TOO_LOW:1001,FRAMERATE_SENT_TOO_LOW:1002,SEND_VIDEO_BITRATE_TOO_LOW:1003,RECV_VIDEO_DECODE_FAILED:1005,AUDIO_INPUT_LEVEL_TOO_LOW:2001,AUDIO_OUTPUT_LEVEL_TOO_LOW:2002,SEND_AUDIO_BITRATE_TOO_LOW:2003},ra=new class{markSubscribeStart(n,r){performance.mark("agora-web-sdk/".concat(n,"/subscribe-").concat(r))}markPublishStart(n,r){performance.mark("agora-web-sdk/".concat(n,"/publish-").concat(r))}measureFromSubscribeStart(n,r){const o=performance.getEntriesByName("agora-web-sdk/".concat(n,"/subscribe-").concat(r));if(o.length>0){const s=o[o.length-1];return Math.round(performance.now()-s.startTime)}return 0}measureFromPublishStart(n,r){const o=performance.getEntriesByName("agora-web-sdk/".concat(n,"/publish-").concat(r));if(o.length>0){const s=o[o.length-1];return Math.round(performance.now()-s.startTime)}return 0}};function kD(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function hu(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?kD(Object(o),!0).forEach(function(s){N(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):kD(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}class Pd{constructor(r){N(this,"store",void 0),N(this,"onStatsException",void 0),N(this,"onUploadPublishDuration",void 0),N(this,"onStatsChanged",void 0),N(this,"localStats",new Map),N(this,"remoteStats",new Map),N(this,"updateStatsInterval",void 0),N(this,"trafficStats",void 0),N(this,"trafficStatsPeerList",[]),N(this,"uplinkStats",void 0),N(this,"exceptionMonitor",void 0),N(this,"p2pChannel",void 0),N(this,"scalabilityMode",Qy.L1T1),N(this,"updateStats",()=>{this.p2pChannel&&(this.updateRemoteStats(this.p2pChannel),this.updateLocalStats(this.p2pChannel))}),this.store=r,this.updateStatsInterval=window.setInterval(this.updateStats,1e3),this.exceptionMonitor=new yX,this.exceptionMonitor.on("exception",(o,s,l)=>{this.onStatsException&&this.onStatsException(o,s,l)})}reset(){this.localStats=new Map,this.remoteStats=new Map,this.trafficStats=void 0,this.trafficStatsPeerList=[],this.uplinkStats=void 0}getLocalAudioTrackStats(){return this.localStats.get(Le.LocalAudioTrack)||hu({},LS)}getLocalVideoTrackStats(){return this.localStats.get(Le.LocalVideoTrack)||hu({},MS)}getRemoteAudioTrackStats(r){const o=(h,p)=>{if(!this.trafficStats)return p;const v=this.trafficStats.peer_delay.find(E=>E.peer_uid===h);return v&&(p.publishDuration=v.B_ppad+(Date.now()-this.trafficStats.timestamp)),p},s={};if(r){var l;const h=(l=this.remoteStats.get(r))===null||l===void 0?void 0:l.audioStats;h&&(s[r]=o(r,h))}else Array.from(this.remoteStats.entries()).forEach(h=>{let[p,{audioStats:v}]=h;v&&(s[p]=o(p,v))});return s}getRemoteNetworkQualityStats(r){const o={};if(r){var s;const l=(s=this.remoteStats.get(r))===null||s===void 0?void 0:s.networkStats;l&&(o[r]=l)}else Array.from(this.remoteStats.entries()).forEach(l=>{let[h,{networkStats:p}]=l;p&&(o[h]=p)});return o}getRemoteVideoTrackStats(r){const o=(h,p)=>{if(!this.trafficStats)return p;const v=this.trafficStats.peer_delay.find(E=>E.peer_uid===h);return v&&(p.publishDuration=v.B_ppvd+(Date.now()-this.trafficStats.timestamp)),p},s={};if(r){var l;const h=(l=this.remoteStats.get(r))===null||l===void 0?void 0:l.videoStats;h&&(s[r]=o(r,h))}else Array.from(this.remoteStats.entries()).forEach(h=>{let[p,{videoStats:v}]=h;v&&(s[p]=o(p,v))});return s}getRTCStats(){let r=0,o=0,s=0,l=0;const h=this.localStats.get(Le.LocalAudioTrack);h&&(r+=h.sendBytes,o+=h.sendBitrate);const p=this.localStats.get(Le.LocalVideoTrack);p&&(r+=p.sendBytes,o+=p.sendBitrate);const v=this.localStats.get(Le.LocalVideoLowTrack);v&&(r+=v.sendBytes,o+=v.sendBitrate),this.remoteStats.forEach(T=>{let{audioStats:C,videoStats:I}=T;C&&(s+=C.receiveBytes,l+=C.receiveBitrate),I&&(s+=I.receiveBytes,l+=I.receiveBitrate)});let E=1;return this.trafficStats&&(E+=this.trafficStats.peer_delay.length),{Duration:0,UserCount:E,SendBitrate:o,SendBytes:r,RecvBytes:s,RecvBitrate:l,OutgoingAvailableBandwidth:this.uplinkStats?this.uplinkStats.B_uab/1e3:0,RTT:this.trafficStats?2*this.trafficStats.B_acd:0}}addLocalStats(r){this.localStats.set(r,void 0)}removeLocalStats(r){r?this.localStats.delete(r):this.localStats.clear()}addRemoteStats(r){this.remoteStats.set(r,{})}removeRemoteStats(r){r?this.remoteStats.delete(r):this.remoteStats.clear()}addP2PChannel(r){this.p2pChannel=r}updateTrafficStats(r){r.peer_delay=r.peer_delay.filter(o=>o.B_ppad!==void 0||o.B_ppvd!==void 0),r.peer_delay.filter(o=>this.trafficStatsPeerList.indexOf(o.peer_uid)===-1).forEach(o=>{var s;const l=(s=this.p2pChannel)===null||s===void 0?void 0:s.getRemoteMedia(o.peer_uid),h=l!=null&&l.videoSSRC?ra.measureFromSubscribeStart(this.store.clientId,l.videoSSRC):0,p=l!=null&&l.audioSSRC?ra.measureFromSubscribeStart(this.store.clientId,l.audioSSRC):0;o.B_ppad!==void 0&&o.B_ppvd!==void 0&&(this.onUploadPublishDuration&&this.onUploadPublishDuration(o.peer_uid,o.B_ppad,o.B_ppvd,h>p?h:p),this.trafficStatsPeerList.push(o.peer_uid))}),this.trafficStats=r}updateUplinkStats(r){this.uplinkStats&&this.uplinkStats.B_fir!==r.B_fir&&U.debug("[".concat(this.store.clientId,"]: Period fir changes to ").concat(r.B_fir)),this.uplinkStats=r}static isRemoteVideoFreeze(r,o,s){if(!r)return!1;const l=!!s&&o.framesDecodeFreezeTime>s.framesDecodeFreezeTime,h=!s||o.framesDecodeCount>s.framesDecodeCount;return l||!h}static isRemoteAudioFreeze(r){return!!r&&r._isFreeze()}isLocalVideoFreeze(r){return!(!r.inputFrame||!r.sentFrame)&&r.inputFrame.frameRate>5&&r.sentFrame.frameRate<3}updateLocalStats(r){Array.from(this.localStats.entries()).forEach(o=>{let[s,l]=o;switch(s){case Le.LocalVideoTrack:case Le.LocalVideoLowTrack:{const p=l,v=hu({},MS),E=r.getStats(),T=r.getLocalMedia(s);if(E){const C=E.videoSend.find(I=>I.ssrc===(T==null?void 0:T.ssrcs[0].ssrcId));if(C){const I=r.getLocalVideoSize(),L=r.getEncoderConfig(Le.LocalVideoTrack);C.codec!=="H264"&&C.codec!=="H265"&&C.codec!=="VP8"&&C.codec!=="VP9"&&C.codec!=="AV1X"&&C.codec!=="AV1"||(v.codecType=C.codec),v.sendBytes=C.bytes,v.sendBitrate=p?8*Math.max(0,v.sendBytes-p.sendBytes):0,C.inputFrame?(v.captureFrameRate=C.inputFrame.frameRate,v.captureResolutionHeight=C.inputFrame.height,v.captureResolutionWidth=C.inputFrame.width):I&&(v.captureResolutionWidth=I.width,v.captureResolutionHeight=I.height),C.sentFrame?(v.sendFrameRate=C.sentFrame.frameRate,v.sendResolutionHeight=C.sentFrame.height,v.sendResolutionWidth=C.sentFrame.width):I&&(v.sendResolutionWidth=I.width,v.sendResolutionHeight=I.height),C.avgEncodeMs&&(v.encodeDelay=C.avgEncodeMs),L&&L.bitrateMax&&(v.targetSendBitrate=1e3*L.bitrateMax),v.sendPackets=C.packets,v.sendPacketsLost=C.packetsLost,v.totalDuration=p?p.totalDuration+1:1,v.totalFreezeTime=p?p.totalFreezeTime:0,this.isLocalVideoFreeze(C)&&(v.totalFreezeTime+=1),C.scalabilityMode&&this.scalabilityMode!==C.scalabilityMode&&(U.debug("[".concat(this.store.clientId,"]: The scalabilityMode of the video sending stream is ").concat(C.scalabilityMode)),this.scalabilityMode=C.scalabilityMode)}this.trafficStats&&(v.sendPacketsLost=this.trafficStats.B_pvlr4/100)}var h;this.localStats.set(s,v),((p==null?void 0:p.sendResolutionWidth)!==v.sendResolutionWidth||(p==null?void 0:p.sendResolutionHeight)!==v.sendResolutionHeight)&&((h=this.onStatsChanged)===null||h===void 0||h.call(this,"resolution",{width:v.sendResolutionWidth,height:v.sendResolutionHeight})),v&&T&&this.exceptionMonitor.setLocalVideoStats(this.store.uid,T.track,v);break}case Le.LocalAudioTrack:{const p=l,v=hu({},LS),E=r.getStats(),T=r.getLocalMedia(s);if(E){const C=E.audioSend.find(I=>I.ssrc===(T==null?void 0:T.ssrcs[0].ssrcId));if(C){if(C.codec!=="opus"&&C.codec!=="aac"&&C.codec!=="PCMU"&&C.codec!=="PCMA"&&C.codec!=="G722"||(v.codecType=C.codec),C.inputLevel)v.sendVolumeLevel=Math.round(32767*C.inputLevel);else{const I=r.getLocalAudioVolume();I&&(v.sendVolumeLevel=Math.round(32767*I))}v.sendBytes=C.bytes,v.sendPackets=C.packets,v.sendPacketsLost=C.packetsLost,v.sendBitrate=p?8*Math.max(0,v.sendBytes-p.sendBytes):0}}this.trafficStats&&(v.sendPacketsLost=this.trafficStats.B_pvlr4/100),this.localStats.set(Le.LocalAudioTrack,v),v&&T&&this.exceptionMonitor.setLocalAudioStats(this.store.uid,T.track,v);break}}})}updateRemoteStats(r){Array.from(this.remoteStats.entries()).forEach(o=>{let[s,{videoStats:l,audioStats:h,videoPcStats:p}]=o;const v=h,E=l,T=p,C=hu({},aP),I=hu({},sP),L=hu({},ZY),{audioTrack:V,videoTrack:Y,audioSSRC:q,videoSSRC:X}=r.getRemoteMedia(s),le=r.getStats(),he=le==null?void 0:le.audioRecv.find(be=>be.ssrc===q),Se=le==null?void 0:le.videoRecv.find(be=>be.ssrc===X),De=this.trafficStats&&this.trafficStats.peer_delay.find(be=>be.peer_uid===s);if(he&&(he.codec!=="opus"&&he.codec!=="aac"&&he.codec!=="PCMU"&&he.codec!=="PCMA"&&he.codec!=="G722"||(C.codecType=he.codec),he.outputLevel?C.receiveLevel=Math.round(32767*he.outputLevel):V&&(C.receiveLevel=Math.round(32767*V.getVolumeLevel())),C.receiveBytes=he.bytes,C.receivePackets=he.packets,C.receivePacketsLost=he.packetsLost,C.packetLossRate=C.receivePacketsLost/(C.receivePackets+C.receivePacketsLost),C.receiveBitrate=v?8*Math.max(0,C.receiveBytes-v.receiveBytes):0,C.totalDuration=v?v.totalDuration+1:1,C.totalFreezeTime=v?v.totalFreezeTime:0,C.freezeRate=C.totalFreezeTime/C.totalDuration,C.receiveDelay=he.jitterBufferMs,C.totalDuration>10&&Pd.isRemoteAudioFreeze(V)&&(C.totalFreezeTime+=1)),Se){Se.codec!=="H264"&&Se.codec!=="H265"&&Se.codec!=="VP8"&&Se.codec!=="VP9"&&Se.codec!=="AV1X"&&Se.codec!=="AV1"||(I.codecType=Se.codec),I.receiveBytes=Se.bytes,I.receiveBitrate=E?8*Math.max(0,I.receiveBytes-E.receiveBytes):0,I.decodeFrameRate=Se.decodeFrameRate<0?0:Se.decodeFrameRate,I.renderFrameRate=Se.decodeFrameRate<0?0:Se.decodeFrameRate,Se.outputFrame&&(I.renderFrameRate=Se.outputFrame.frameRate),Se.receivedFrame?(I.receiveFrameRate=Se.receivedFrame.frameRate,I.receiveResolutionHeight=Se.receivedFrame.height,I.receiveResolutionWidth=Se.receivedFrame.width):Y&&(I.receiveResolutionHeight=Y._videoHeight||0,I.receiveResolutionWidth=Y._videoWidth||0),Se.framesRateFirefox!==void 0&&(I.receiveFrameRate=Math.round(Se.framesRateFirefox)),I.receivePackets=Se.packets,I.receivePacketsLost=Se.packetsLost,I.packetLossRate=I.receivePacketsLost/(I.receivePackets+I.receivePacketsLost),I.totalDuration=E?E.totalDuration+1:1,I.totalFreezeTime=E?E.totalFreezeTime:0,I.receiveDelay=Se.jitterBufferMs||0;const be=!!X&&r.getRemoteVideoIsReady(X);Y&&be&&Pd.isRemoteVideoFreeze(Y,Se,T)&&(I.totalFreezeTime+=1),I.freezeRate=I.totalFreezeTime/I.totalDuration}De&&(C.end2EndDelay=De.B_ad,I.end2EndDelay=De.B_vd,C.transportDelay=De.B_ed,I.transportDelay=De.B_ed,C.currentPacketLossRate=De.B_ealr4/100,I.currentPacketLossRate=De.B_evlr4/100,L.uplinkNetworkQuality=De.B_punq?De.B_punq:0,L.downlinkNetworkQuality=De.B_pdnq?De.B_pdnq:0),this.remoteStats.set(s,{audioStats:C,videoStats:I,videoPcStats:Se,networkStats:L}),V&&this.exceptionMonitor.setRemoteAudioStats(V,C),Y&&this.exceptionMonitor.setRemoteVideoStats(Y,I)})}}const uc=new class extends Rn{get visibility(){return document.visibilityState}get lastHiddenTime(){return this._lastHiddenTime}get lastVisibleTime(){return this._lastVisibleTime}constructor(){super(),N(this,"_lastHiddenTime",0),N(this,"_lastVisibleTime",0),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"?this._lastHiddenTime=performance.now():this._lastVisibleTime=performance.now(),U.debug("document visibility went ".concat(document.visibilityState)),this.emit("VISIBILITY_CHANGE",document.visibilityState)})}};function LD(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function z0(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?LD(Object(o),!0).forEach(function(s){N(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):LD(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}function K0(n){return n.match(/^[\.\:\d]+$/)?"".concat(n.replace(/[^\d]/g,"-"),".").concat(ie("TURN_DOMAIN")):(U.info("Cannot recognized as IP address ".concat(n,". Used As Host instead")),n)}function MD(n,r){var o,s;const l=ie("GATEWAY_DOMAINS");let h=l[1]&&r.indexOf(l[1])!==-1?1:0;n.addresses=n.addresses||[];const p=n.addresses.map(E=>E.domain_prefix?{address:"".concat(E.domain_prefix,".").concat(l[h++%l.length],":").concat(E.port)}:E.ip.match(/^[\.\:\d]+$/)?{ip:E.ip,port:E.port,address:"".concat(E.ip.replace(/[^\d]/g,"-"),".").concat(l[h++%l.length],":").concat(E.port)}:(U.info("Cannot recognized as IP address ".concat(E.ip,". Used As Host instead")),{ip:E.ip,port:E.port,address:"".concat(E.ip,":").concat(E.port)}));if((o=n.detail)!==null&&o!==void 0&&o[18]&&typeof((s=n.detail)===null||s===void 0?void 0:s[18])=="string"){const E=n.detail[18],T=E==null?void 0:E.split(";");for(let C=0;C<T.length;C++){var v;const I=oc(v=T[C]).call(v);p[C]&&I&&(p[C].ip6=I)}}return{gatewayAddrs:p,uid:n.uid,cid:n.cid,cert:n.cert,vid:n.detail&&n.detail[8],uni_lbs_ip:n.detail&&n.detail[1],res:n,csIp:n.detail&&n.detail[502]}}function dc(n){return typeof n=="number"?n:n.exact||n.ideal||n.max||n.min||0}function UD(n){const r=n._encoderConfig;if(!r)return{};const o={resolution:r.width&&r.height?"".concat(dc(r.width),"x").concat(dc(r.height)):void 0,maxVideoBW:r.bitrateMax,minVideoBW:r.bitrateMin};return typeof r.frameRate=="number"?(o.maxFrameRate=r.frameRate,o.minFrameRate=r.frameRate):r.frameRate&&(o.maxFrameRate=r.frameRate.max||r.frameRate.ideal||r.frameRate.exact||r.frameRate.min,o.minFrameRate=r.frameRate.min||r.frameRate.ideal||r.frameRate.exact||r.frameRate.max),o}function jD(n){return n>=0&&n<.17?1:n>=.17&&n<.36?2:n>=.36&&n<.59?3:n>=.59&&n<=1?4:n>1?5:0}function rC(n,r){let o,s,l;switch(r){case yr.CHOOSE_SERVER:o=4096,s="choose server";break;case yr.CLOUD_PROXY:o=1048576,s="proxy";break;case yr.CLOUD_PROXY_5:o=4194304,s="proxy5";break;case yr.CLOUD_PROXY_FALLBACK:o=4194310,s="proxy fallback";break;default:throw new Q(W.UNEXPECTED_ERROR,"multi unlibs response transformer get unknown service id",{csIp:n.detail&&n.detail[502],retry:!1})}if(n.response_body.forEach(h=>{h.buffer&&h.buffer.flag===o&&(l={code:h.buffer.code,addresses:(h.buffer.edges_services||[]).map(p=>z0(z0({},p),{},{ticket:h.buffer.cert})),server_ts:n.enter_ts,uid:h.buffer.uid,cid:h.buffer.cid,cname:h.buffer.cname,detail:z0(z0({},h.buffer.detail),n.detail),flag:h.buffer.flag,opid:n.opid,cert:h.buffer.cert})}),!l)throw new Q(W.MULTI_UNILBS_RESPONSE_ERROR,"cannot parse response ".concat(s," from multi unilbs response"),{csIp:n.detail&&n.detail[502]});return l}async function SX(n,r){return await xe.all(n.addresses.map(async o=>({address:K0(o.ip),tcpport:o.port,udpport:o.port,username:r&&ie("ENCRYPT_PROXY_USERNAME_AND_PSW")&&window.isSecureContext?r.toString():No.username,password:r&&ie("ENCRYPT_PROXY_USERNAME_AND_PSW")&&window.isSecureContext?await oX(r.toString()):No.password})))}function CX(n,r){const o=r._videoWidth||r.getMediaStreamTrack(!0).getSettings().width;return o||U.warning("cannot get original video track's width, default scale down 4 times for low stream"),o?o/dc(n.width):4}function Y0(n){let{candidateType:r,relayProtocol:o,type:s,address:l,port:h,protocol:p}=n;return s==="local-candidate"?{candidateType:r,relayProtocol:o,protocol:p}:{candidateType:r,relayProtocol:o,address:l,port:h,protocol:p}}function FD(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function pu(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?FD(Object(o),!0).forEach(function(s){N(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):FD(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}function Dd(n){return window.TextEncoder?new TextEncoder().encode(n).length:n.length}function ni(n){return new xe(r=>{window.setTimeout(r,n)})}function bX(n){const r=new Q(W.TIMEOUT,"timeout");return new xe((o,s)=>{window.setTimeout(()=>s(r),n)})}function pn(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:7,r=arguments.length>1?arguments[1]:void 0;const o=Math.random().toString(16).substr(2,n).toLowerCase();return o.length===n?"".concat(r).concat(o):"".concat(r).concat(o)+pn(n-o.length,"")}function iC(){return pn(32,"").toUpperCase()}const q0=()=>{};function VD(n){return new xe((r,o)=>{let s=!1;const l=document.createElement("video");l.setAttribute("autoplay",""),l.setAttribute("muted",""),l.muted=!0,l.autoplay=!0,l.setAttribute("playsinline",""),l.setAttribute("style","position: fixed; top: 0; left: 0; width: 1px; height: 1px"),document.body.appendChild(l);const h=Ti()?"canplay":"playing";l.addEventListener(h,()=>{const p=l.videoWidth,v=l.videoHeight;!p&&Pn()||(s=!0,l.srcObject=null,l.remove(),r([p,v]))}),l.srcObject=new MediaStream([n]),l.play().catch(q0),setTimeout(()=>{s||(l.srcObject=null,l.remove(),r([l.videoWidth,l.videoHeight]))},4e3)})}function kd(n){return xe.all(n.map(r=>r.then(o=>{throw o},o=>o))).then(r=>{throw r},r=>r)}function ri(n,r){for(var o=arguments.length,s=new Array(o>2?o-2:0),l=2;l<o;l++)s[l-2]=arguments[l];return n.getListeners(r).length===0?xe.reject(new Q(W.UNEXPECTED_ERROR,"can not emit promise")):new xe((h,p)=>{n.emit(r,...s,h,p)})}function Ln(n,r){if(n.getListeners(r).length===0)return xe.resolve();for(var o=arguments.length,s=new Array(o>2?o-2:0),l=2;l<o;l++)s[l-2]=arguments[l];return ri(n,r,...s)}function Aa(n,r){if(n.getListeners(r).length===0)return null;for(var o=arguments.length,s=new Array(o>2?o-2:0),l=2;l<o;l++)s[l-2]=arguments[l];return fu(n,r,...s)}function fu(n,r){let o=null,s=null;for(var l=arguments.length,h=new Array(l>2?l-2:0),p=2;p<l;p++)h[p-2]=arguments[p];if(n.emit(r,...h,v=>{o=v},v=>{s=v}),s!==null)throw s;if(o===null)throw new Q(W.UNEXPECTED_ERROR,"handler is not sync");return o}function oC(n,r){const o=n.indexOf(r);o!==-1&&n.splice(o,1)}function BD(n){const r=[];return n.forEach(o=>{r.indexOf(o)===-1&&r.push(o)}),r}function os(n){xe.resolve().then(n)}function nr(n){return JSON.parse(JSON.stringify(n))}const $D={};function Lp(n,r){$D[r]||($D[r]=!0,n())}function aC(n){const r=window.atob(n),o=new Uint8Array(new ArrayBuffer(r.length));for(let s=0;s<r.length;s+=1)o[s]=r.charCodeAt(s);return o}function X0(n){let r="";for(let o=0;o<n.length;o+=1)r+=String.fromCharCode(n[o]);return window.btoa(r)}const HD=new class{constructor(){N(this,"fnMap",new Map)}throttleByKey(n,r,o,s){for(var l=arguments.length,h=new Array(l>4?l-4:0),p=4;p<l;p++)h[p-4]=arguments[p];if(this.fnMap.has(r)){const v=this.fnMap.get(r);if(v.threshold!==o){v.fn(...v.args),clearTimeout(v.timer);const E=window.setTimeout(()=>{const T=this.fnMap.get(r);T&&T.fn(...T.args),this.fnMap.delete(r)},o);this.fnMap.set(r,{fn:n,threshold:o,timer:E,args:h,skipFn:s})}else v.skipFn&&v.skipFn(...v.args),this.fnMap.set(r,pu(pu({},v),{},{fn:n,args:h,skipFn:s}))}else{const v=window.setTimeout(()=>{const E=this.fnMap.get(r);E&&E.fn(...E.args),this.fnMap.delete(r)},o);this.fnMap.set(r,{fn:n,threshold:o,timer:v,args:h,skipFn:s})}}},WD=HD.throttleByKey.bind(HD),Mp=async n=>{let{fragementLength:r,referenceList:o,asyncMapHandler:s,allFailedhandler:l,promisesCollector:h}=n,p=0;const v=r;let E,T=0;const C=async()=>{const I=(()=>{const L=p*v,V=L+v;return o.slice(L,V).map(s)})();h&&h.push(...I);try{E=await kd(I)}catch(L){if(T+=v,p++,!(T>=o.length))return void await C();l(L)}I.forEach(L=>L.cancel())};return await C(),E};function GD(n){return typeof n=="object"&&n!==null&&!(n instanceof RegExp)}const TX={[Td.ACCESS_POINT]:{[Qr.NO_FLAG_SET]:{desc:"flag is zero",retry:!1},[Qr.FLAG_SET_BUT_EMPTY]:{desc:"flag is empty",retry:!1},[Qr.INVALID_FALG_SET]:{desc:"invalid flag",retry:!1},[Qr.FLAG_SET_BUT_NO_RE]:{desc:"flag set unilbs but no request",retry:!1},[Qr.INVALID_SERVICE_ID]:{desc:"invalid service id",retry:!1},[Qr.NO_SERVICE_AVAILABLE]:{desc:"no service available",retry:!0},[Qr.NO_SERVICE_AVAILABLE_P2P]:{desc:"no unilbs p2p service available",retry:!0},[Qr.NO_SERVICE_AVAILABLE_VOET]:{desc:"no unilbs voice service available",retry:!0},[Qr.NO_SERVICE_AVAILABLE_WEBRTC]:{desc:"no unilbs webrtc service available",retry:!0},[Qr.NO_SERVICE_AVAILABLE_CDS]:{desc:"no cds service available",retry:!0},[Qr.NO_SERVICE_AVAILABLE_CDN]:{desc:"no cdn dispatcher service available",retry:!0},[Qr.NO_SERVICE_AVAILABLE_TDS]:{desc:"no tds service available",retry:!0},[Qr.NO_SERVICE_AVAILABLE_REPORT]:{desc:"no unilbs report service available",retry:!0},[Qr.NO_SERVICE_AVAILABLE_APP_CENTER]:{desc:"no app center service available",retry:!0},[Qr.NO_SERVICE_AVAILABLE_ENV0]:{desc:"no unilbs sig env0 service available",retry:!0},[Qr.NO_SERVICE_AVAILABLE_VOET]:{desc:"no unilbs voet service available",retry:!0},[Qr.NO_SERVICE_AVAILABLE_STRING_UID]:{desc:"no string uid service available",retry:!0},[Qr.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS]:{desc:"no webrtc unilbs service available",retry:!0}},[Td.UNILBS]:{[xo.INVALID_VENDOR_KEY]:{desc:"invalid vendor key, can not find appid",retry:!1},[xo.INVALID_CHANNEL_NAME]:{desc:"invalid channel name",retry:!1},[xo.INTERNAL_ERROR]:{desc:"unilbs internal error",retry:!1},[xo.NO_AUTHORIZED]:{desc:"invalid token, authorized failed",retry:!1},[xo.DYNAMIC_KEY_TIMEOUT]:{desc:"dynamic key or token timeout",retry:!1},[xo.NO_ACTIVE_STATUS]:{desc:"no active status",retry:!1},[xo.DYNAMIC_KEY_EXPIRED]:{desc:"dynamic key expired",retry:!1},[xo.STATIC_USE_DYNAMIC_KEY]:{desc:"static use dynamic key",retry:!1},[xo.DYNAMIC_USE_STATIC_KEY]:{desc:"dynamic use static key",retry:!1},[xo.USER_OVERLOAD]:{desc:"amount of users over load",retry:!1},[xo.FORBIDDEN_REGION]:{desc:"the request is forbidden in this area",retry:!1},[xo.CANNOT_MEET_AREA_DEMAND]:{desc:"unable to allocate services in this area",retry:!1}},[Td.STRING_UID_ALLOCATOR]:{[Np.IIIEGAL_APPID]:{desc:"invalid appid",retry:!1},[Np.IIIEGAL_UID]:{desc:"invalid string uid",retry:!1},[Np.INTERNAL_ERROR]:{desc:"string uid allocator internal error",retry:!0}}};function J0(n){const r=TX[Math.floor(n/1e4)];if(!r)return{desc:"unkonw error",retry:!1};const o=r[n%1e4];if(!o){if(Math.floor(n/1e4)===Td.ACCESS_POINT){const s=n%1e4;if(s.toString()[0]==="1")return{desc:n.toString(),retry:!1};if(s.toString()[0]==="2")return{desc:n.toString(),retry:!0}}return{desc:"unkonw error",retry:!1}}return o}const RX={[Ke.K_TIMESTAMP_EXPIRED]:{desc:"K_TIMESTAMP_EXPIRED",action:"failed"},[Ke.K_CHANNEL_PERMISSION_INVALID]:{desc:"K_CHANNEL_PERMISSION_INVALID",action:"failed"},[Ke.K_CERTIFICATE_INVALID]:{desc:"K_CERTIFICATE_INVALID",action:"failed"},[Ke.K_CHANNEL_NAME_EMPTY]:{desc:"K_CHANNEL_NAME_EMPTY",action:"failed"},[Ke.K_CHANNEL_NOT_FOUND]:{desc:"K_CHANNEL_NOT_FOUND",action:"failed"},[Ke.K_TICKET_INVALID]:{desc:"K_TICKET_INVALID",action:"failed"},[Ke.K_CHANNEL_CONFLICTED]:{desc:"K_CHANNEL_CONFLICTED",action:"failed"},[Ke.K_SERVICE_NOT_READY]:{desc:"K_SERVICE_NOT_READY",action:"tryNext"},[Ke.K_SERVICE_TOO_HEAVY]:{desc:"K_SERVICE_TOO_HEAVY",action:"tryNext"},[Ke.K_UID_BANNED]:{desc:"K_UID_BANNED",action:"failed"},[Ke.K_IP_BANNED]:{desc:"K_IP_BANNED",action:"failed"},[Ke.ERR_INVALID_VENDOR_KEY]:{desc:"ERR_INVALID_VENDOR_KEY",action:"failed"},[Ke.ERR_INVALID_CHANNEL_NAME]:{desc:"ERR_INVALID_CHANNEL_NAME",action:"failed"},[Ke.WARN_NO_AVAILABLE_CHANNEL]:{desc:"WARN_NO_AVAILABLE_CHANNEL",action:"failed"},[Ke.WARN_LOOKUP_CHANNEL_TIMEOUT]:{desc:"WARN_LOOKUP_CHANNEL_TIMEOUT",action:"tryNext"},[Ke.WARN_LOOKUP_CHANNEL_REJECTED]:{desc:"WARN_LOOKUP_CHANNEL_REJECTED",action:"failed"},[Ke.WARN_OPEN_CHANNEL_TIMEOUT]:{desc:"WARN_OPEN_CHANNEL_TIMEOUT",action:"tryNext"},[Ke.WARN_OPEN_CHANNEL_REJECTED]:{desc:"WARN_OPEN_CHANNEL_REJECTED",action:"failed"},[Ke.WARN_REQUEST_DEFERRED]:{desc:"WARN_REQUEST_DEFERRED",action:"failed"},[Ke.ERR_DYNAMIC_KEY_TIMEOUT]:{desc:"ERR_DYNAMIC_KEY_TIMEOUT",action:"failed"},[Ke.ERR_NO_AUTHORIZED]:{desc:"ERR_NO_AUTHORIZED",action:"failed"},[Ke.ERR_VOM_SERVICE_UNAVAILABLE]:{desc:"ERR_VOM_SERVICE_UNAVAILABLE",action:"tryNext"},[Ke.ERR_NO_CHANNEL_AVAILABLE_CODE]:{desc:"ERR_NO_CHANNEL_AVAILABLE_CODE",action:"failed"},[Ke.ERR_MASTER_VOCS_UNAVAILABLE]:{desc:"ERR_MASTER_VOCS_UNAVAILABLE",action:"tryNext"},[Ke.ERR_INTERNAL_ERROR]:{desc:"ERR_INTERNAL_ERROR",action:"tryNext"},[Ke.ERR_NO_ACTIVE_STATUS]:{desc:"ERR_NO_ACTIVE_STATUS",action:"failed"},[Ke.ERR_INVALID_UID]:{desc:"ERR_INVALID_UID",action:"failed"},[Ke.ERR_DYNAMIC_KEY_EXPIRED]:{desc:"ERR_DYNAMIC_KEY_EXPIRED",action:"failed"},[Ke.ERR_STATIC_USE_DYANMIC_KE]:{desc:"ERR_STATIC_USE_DYANMIC_KE",action:"failed"},[Ke.ERR_DYNAMIC_USE_STATIC_KE]:{desc:"ERR_DYNAMIC_USE_STATIC_KE",action:"failed"},[Ke.ERR_NO_VOCS_AVAILABLE]:{desc:"ERR_NO_VOCS_AVAILABLE",action:"tryNext"},[Ke.ERR_NO_VOS_AVAILABLE]:{desc:"ERR_NO_VOS_AVAILABLE",action:"tryNext"},[Ke.ERR_JOIN_CHANNEL_TIMEOUT]:{desc:"ERR_JOIN_CHANNEL_TIMEOUT",action:"tryNext"},[Ke.ERR_JOIN_BY_MULTI_IP]:{desc:"ERR_JOIN_BY_MULTI_IP",action:"recover"},[Ke.ERR_NOT_JOINED]:{desc:"ERR_NOT_JOINED",action:"failed"},[Ke.ERR_REPEAT_JOIN_REQUEST]:{desc:"ERR_REPEAT_JOIN_REQUEST",action:"quit"},[Ke.ERR_REPEAT_JOIN_CHANNEL]:{desc:"ERR_REPEAT_JOIN_CHANNEL",action:"quit"},[Ke.ERR_INVALID_VENDOR_KEY]:{desc:"ERR_INVALID_VENDOR_KEY",action:"failed"},[Ke.ERR_INVALID_CHANNEL_NAME]:{desc:"ERR_INVALID_CHANNEL_NAME",action:"failed"},[Ke.ERR_INVALID_STRINGUID]:{desc:"ERR_INVALID_STRINGUID",action:"failed"},[Ke.ERR_TOO_MANY_USERS]:{desc:"ERR_TOO_MANY_USERS",action:"tryNext"},[Ke.ERR_SET_CLIENT_ROLE_TIMEOUT]:{desc:"ERR_SET_CLIENT_ROLE_TIMEOUT",action:"failed"},[Ke.ERR_SET_CLIENT_ROLE_NO_PERMISSION]:{desc:"ERR_SET_CLIENT_ROLE_TIMEOUT",action:"failed"},[Ke.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE]:{desc:"ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",action:"success"},[Ke.ERR_PUBLISH_REQUEST_INVALID]:{desc:"ERR_PUBLISH_REQUEST_INVALID",action:"failed"},[Ke.ERR_SUBSCRIBE_REQUEST_INVALID]:{desc:"ERR_SUBSCRIBE_REQUEST_INVALID",action:"failed"},[Ke.ERR_NOT_SUPPORTED_MESSAGE]:{desc:"ERR_NOT_SUPPORTED_MESSAGE",action:"failed"},[Ke.ERR_ILLEAGAL_PLUGIN]:{desc:"ERR_ILLEAGAL_PLUGIN",action:"failed"},[Ke.ILLEGAL_CLIENT_ROLE_LEVEL]:{desc:"ILLEGAL_CLIENT_ROLE_LEVEL",action:"failed"},[Ke.ERR_REJOIN_TOKEN_INVALID]:{desc:"ERR_REJOIN_TOKEN_INVALID",action:"failed"},[Ke.ERR_REJOIN_USER_NOT_JOINED]:{desc:"ERR_REJOIN_NOT_JOINED",action:"failed"},[Ke.ERR_INVALID_OPTIONAL_INFO]:{desc:"ERR_INVALID_OPTIONAL_INFO",action:"quit"},[Ke.ERR_TEST_RECOVER]:{desc:"ERR_TEST_RECOVER",action:"recover"},[Ke.ERR_TEST_TRYNEXT]:{desc:"ERR_TEST_TRYNEXT",action:"recover"},[Ke.ERR_TEST_RETRY]:{desc:"ERR_TEST_RETRY",action:"recover"},[Ke.ILLEGAL_AES_PASSWORD]:{desc:"ERR_TEST_RETRY",action:"failed"},[Ke.ERR_TOO_MANY_BROADCASTERS]:{desc:"ERR_TOO_MANY_BROADCASTERS",action:"failed"},[Ke.ERR_TOO_MANY_SUBSCRIBERS]:{desc:"ERR_TOO_MANY_SUBSCRIBERS",action:"failed"},[Ke.ERR_LICENSE_ILLEGAL]:{desc:"ERR_LICENSE_ILLEGAL",action:"quit"},[Ke.ERR_LICENSE_MISSING]:{desc:"ERR_LICENSE_MISSING",action:"quit"},[Ke.ERR_LICENSE_EXPIRED]:{desc:"ERR_LICENSE_EXPIRED",action:"quit"},[Ke.ERR_LICENSE_MINUTES_EXCEEDED]:{desc:"ERR_LICENSE_MINUTES_EXCEEDED",action:"quit"},[Ke.ERR_LICENSE_PERIOD_INVALID]:{desc:"ERR_LICENSE_PERIOD_INVALID",action:"quit"},[Ke.ERR_LICENSE_MULTIPLE_SDK_SERVICE]:{desc:"ERR_LICENSE_MULTIPLE_SDK_SERVICE",action:"quit"}};function Up(n){return RX[n]||{desc:"UNKNOW_ERROR_".concat(n),action:"failed"}}function zD(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}class mu extends Rn{get url(){return this.websocket?this.websocket.url:null}get reconnectMode(){return this._reconnectMode}set reconnectMode(r){["tryNext","recover"].includes(r)&&this.resetReconnectCount(r),this._reconnectMode=r}get state(){return this._state}set state(r){r!==this._state&&(this._state=r,this._state==="reconnecting"?this.emit(it.RECONNECTING,this.reconnectReason):this._state==="connected"?this.emit(it.CONNECTED):this._state==="closed"?this.emit(it.CLOSED):this._state==="failed"&&this.emit(it.FAILED))}resetReconnectCount(r){U.debug("websocket reset reconnect count, reason: "+r),this.reconnectCount=0}constructor(r,o){let s=arguments.length>2&&arguments[2]!==void 0&&arguments[2],l=arguments.length>3&&arguments[3]!==void 0&&arguments[3],h=arguments.length>4?arguments[4]:void 0;super(),N(this,"connectionID",0),N(this,"currentURLIndex",0),N(this,"urls",void 0),N(this,"_reconnectMode","tryNext"),N(this,"reconnectReason",void 0),N(this,"_initMutex",new wi("websocket")),N(this,"name",void 0),N(this,"_state","closed"),N(this,"reconnectInterrupter",void 0),N(this,"websocket",void 0),N(this,"retryConfig",void 0),N(this,"reconnectCount",0),N(this,"forceCloseTimeout",5e3),N(this,"onlineReconnectListener",void 0),N(this,"useCompress",void 0),N(this,"tryDoubleDomain",!1),N(this,"wsInflateLength",0),N(this,"wsDeflateLength",0),N(this,"closeEstablishingWs",()=>{}),N(this,"store",void 0),N(this,"joinChannelServiceRecordIndex",void 0),this.store=h,this.name=r,this.retryConfig=function(C){for(var I=1;I<arguments.length;I++){var L=arguments[I]!=null?arguments[I]:{};I%2?zD(Object(L),!0).forEach(function(V){N(C,V,L[V])}):Object.getOwnPropertyDescriptors?Object.defineProperties(C,Object.getOwnPropertyDescriptors(L)):zD(Object(L)).forEach(function(V){Object.defineProperty(C,V,Object.getOwnPropertyDescriptor(L,V))})}return C}({},o),this.useCompress=s,this.tryDoubleDomain=l;const{timeout:p,timeoutFactor:v}=o,E=Math.max(300,Math.floor(3*p/5)),T=Math.max(1.2,Math.floor(8*v)/10);hi.ONLINE&&(this.retryConfig.timeout=E,this.retryConfig.timeoutFactor=T),tr.on(nl.NETWORK_STATE_CHANGE,(C,I)=>{C!==I&&(this.resetReconnectCount("network state change: ".concat(I," -> ").concat(C)),C===hi.ONLINE?(this.retryConfig.timeout=E,this.retryConfig.timeoutFactor=T):(this.retryConfig.timeout=p,this.retryConfig.timeoutFactor=v))})}getConnection(){return this.websocket||void 0}init(r){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5e3;this.forceCloseTimeout=o;const s=(l,h)=>{this.urls=r;const p=this.urls[this.currentURLIndex];this.state="connecting",this.createWebSocketConnection(p).then(l).catch(h),this.once(it.CLOSED,()=>h(new Q(W.WS_DISCONNECT))),this.once(it.CONNECTED,()=>l())};return this._initMutex.lock().then(l=>new xe((h,p)=>{s(h,p)}).then(()=>{l()}).catch(()=>{l()}))}close(r,o){if(this.currentURLIndex=0,this.resetReconnectCount("close"),this.reconnectInterrupter&&this.reconnectInterrupter(),this.websocket){this.websocket.onclose=null,this.websocket.onopen=null,this.websocket.onmessage=null;const s=this.websocket;o?setTimeout(()=>s.close(),500):s.close(),this.websocket=void 0}this.state=r?"failed":"closed",this.closeEstablishingWs&&this.closeEstablishingWs()}reconnect(r,o){if(!this.websocket)return void U.warning("[".concat(this.name,"] can not reconnect, no websocket"));var s;r!==void 0&&(this.reconnectMode=r),U.debug("[".concat(this.name,"] reconnect is triggered initiative")),typeof this.joinChannelServiceRecordIndex=="number"&&((s=this.store)===null||s===void 0||s.recordJoinChannelService({status:"error",errors:[new Error(o)]},this.joinChannelServiceRecordIndex));const l=this.websocket.onclose;this.websocket.onclose=null,this.websocket.close(),l&&l.bind(this.websocket)({code:9999,reason:o})}sendMessage(r){let o=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(!this.websocket||this.websocket.readyState!==WebSocket.OPEN)throw new Q(W.WS_ABORT,"websocket is not ready");try{o||(r=JSON.stringify(r)),this.websocket.send(r)}catch(s){throw new Q(W.WS_ERR,"send websocket message error"+s.toString())}}setWsInflateData(r){this.wsDeflateLength=this.wsDeflateLength+r.originLength,this.wsInflateLength=this.wsInflateLength+r.compressedLength}getWsInflateData(){const r=this.wsInflateLength,o=this.wsDeflateLength;return this.clearWsInflateData(),{wsInflateLength:r,wsDeflateLength:o}}clearWsInflateData(){this.wsInflateLength=0,this.wsDeflateLength=0}async createWebSocketConnection(r,o){return this.connectionID+=1,this.connectionID,this.joinChannelServiceRecordIndex=void 0,new xe((s,l)=>{var h;const p=C=>{var I;(I=this.store)===null||I===void 0||I.signalChannelOpen(),U.debug("[".concat(this.name,"] websocket opened:"),C),this.reconnectMode="retry",this.state="connected",this.resetReconnectCount("opened"),s()},v=async C=>{if(U.debug("[".concat(this.name,"] websocket close ").concat(this.websocket&&this.websocket.url,", code: ").concat(C.code,", reason: ").concat(C.reason,", current mode: ").concat(this.reconnectMode)),this.reconnectCount<this.retryConfig.maxRetryCount){this.state==="connected"&&(this.reconnectReason=C.reason,this.state="reconnecting");const I=Aa(this,it.WILL_RECONNECT,this.reconnectMode)||this.reconnectMode,L=await this.reconnectWithAction(I);if(this.state==="closed")return void U.debug("[".concat(this.connectionID,"] ws is closed, no need to reconnect"));if(!L)return l(new Q(W.WS_DISCONNECT,"websocket reconnect failed: ".concat(C.code))),void this.close(!0);s()}else l(new Q(W.WS_DISCONNECT,"websocket close: ".concat(C.code))),this.close()},E=C=>{this.emit(it.ON_MESSAGE,C)};this.websocket&&(this.websocket.onclose=null,this.websocket.close()),ie("GATEWAY_WSS_ADDRESS")&&this.name.startsWith("gateway")&&(r=ie("GATEWAY_WSS_ADDRESS")),U.debug("[".concat(this.name,"] start connect, url: ").concat(r));const T=(h=this.store)===null||h===void 0?void 0:h.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"gateway"});this.chooseBestWebsocketConnection(r,!!o,T).then(C=>{var I;this.websocket=C,p&&p(C.url),C.onclose=v,C.onmessage=E,(I=this.store)===null||I===void 0||I.recordJoinChannelService({endTs:Date.now(),status:"success"},T),this.joinChannelServiceRecordIndex=T}).catch(C=>{var I;if((I=this.store)===null||I===void 0||I.recordJoinChannelService({endTs:Date.now(),status:C instanceof Q&&C.code===W.WS_ABORT?"aborted":"error",errors:[C]},T),this.state!=="closed"){if(C instanceof Q&&C.code===W.WS_ERR){const L=new Q(W.WS_ERR,"init websocket failed! Error: ".concat(C.toString()));return U.error("[".concat(this.name,"]").concat(L)),void l(L)}v&&v(C)}else l(new Q(W.WS_DISCONNECT,"websocket is closed: ".concat(C.toString())))})})}async reconnectWithAction(r){let o=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(this.reconnectCount>=this.retryConfig.maxRetryCount||!this.urls||this.state==="closed")return!1;this.onlineReconnectListener||tr.networkState!==hi.OFFLINE||(this.onlineReconnectListener=tr.onlineWaiter&&tr.onlineWaiter.then(()=>{this.onlineReconnectListener=void 0}));let s=!0;if(this.reconnectInterrupter=()=>{s=!1},o){const p=ES(this.reconnectCount,this.retryConfig);U.debug("[".concat(this.name,"] wait ").concat(p,"ms to reconnect websocket, mode: ").concat(r)),await xe.race([ni(p),this.onlineReconnectListener||new xe(()=>{})])}if(this.state==="closed"||!s)return!1;this.reconnectCount+=1;const l=async(p,v)=>{this.emit(it.RECONNECT_CREATE_CONNECTION,v),await this.createWebSocketConnection(p)};try{if(r==="retry"){const p=this.urls[this.currentURLIndex];this.emit(it.RECONNECT_WAITTING_FINISH,r),await l(p,r)}else if(r==="tryNext"){if(this.currentURLIndex+=1,this.currentURLIndex>=this.urls.length)return await this.reconnectWithAction("recover",!1);U.debug("[".concat(this.name,"] websocket url length: ").concat(this.urls.length," current index: ").concat(this.currentURLIndex));const p=this.urls[this.currentURLIndex];this.emit(it.RECONNECT_WAITTING_FINISH,r),await l(p,r)}else if(r==="recover"){U.debug("[".concat(this.name,"] request new urls")),this.resetReconnectCount("recover mode"),this.emit(it.RECONNECT_WAITTING_FINISH,r),this.urls=await ri(this,it.REQUEST_NEW_URLS),this.currentURLIndex=0;const p=this.urls[this.currentURLIndex];await l(p,r)}return!0}catch(p){var h;return U.error("[".concat(this.name,"] reconnect failed"),p.toString()),p!=null&&(h=p.data)!==null&&h!==void 0&&h.desc&&Array.isArray(p.data.desc)&&p.data.desc.length&&p.data.desc.includes("dynamic key expired")?(this.emit(it.ON_TOKEN_PRIVILEGE_DID_EXPIRE),!1):await this.reconnectWithAction(r,o)}}async chooseBestWebsocketConnection(r,o,s){return new xe((l,h)=>{let p=!1;const v=[];this.closeEstablishingWs=()=>{U.debug("[choose-best-ws] close establishing websockets"),v.forEach(q=>{q.onclose=null,q.onopen=null,q.onmessage=null,q.close()}),h(new Q(W.WS_ABORT,"choose best websocket aborted"))};const E=ie("GATEWAY_DOMAINS");let T;const C=r.indexOf("?h="),I=E.find(q=>C!==-1?r.includes(q,C):r.includes(q));U.debug("[choose-best-ws] currentDomain: ",I,", domains: ",E);let L=!this.tryDoubleDomain||o||!I;if(!L&&I){var V;const q=Date.now();try{E.forEach(X=>{const le=C===-1?r.replace(I,X):r.substr(0,C)+r.substr(C).replace(I,X),he=new WebSocket(le);he.binaryType="arraybuffer",v.push(he),U.debug("[choose-best-ws] ws is connecting:",he.url)})}catch{for(U.debug("[choose-best-ws] ws create failed, fallback to single url"),v.forEach(le=>le.close());v.length;)v.pop();L=!0}(V=this.store)===null||V===void 0||V.recordJoinChannelService({urls:v.map(X=>X.url),service:"gateway"},s),v.forEach(X=>{X.onopen=()=>{if(p)return;const le=Date.now()-q;U.debug("[choose-best-ws] ws open cost ".concat(le,"ms")),v.filter(he=>he!==X).forEach(he=>{U.debug("[choose-best-ws]close backup websocket: ".concat(he.url)),he.close()}),p=!0,l(X)},X.onclose=le=>{T=le,!p&&(v.find(he=>!(he.readyState===WebSocket.CLOSED||he.readyState===WebSocket.CLOSING))||(U.debug("[choose-best-ws] all websocket is closed"),p=!0,h(T)))},X.onmessage=le=>{U.debug("[choose-best-ws]".concat(X.url," onmessage: ").concat(le.data))}}),ni(this.forceCloseTimeout).then(()=>{v.forEach(X=>{X.readyState!==WebSocket.OPEN&&X.close()})})}if(L){var Y;let q;U.debug("[choose-best-ws] use single url: ",r),(Y=this.store)===null||Y===void 0||Y.recordJoinChannelService({urls:[r],service:"gateway"},s);try{q=new WebSocket(r),v.push(q),q.binaryType="arraybuffer"}catch(X){const le=new Q(W.WS_ERR,"init websocket failed! Error: ".concat(X.toString()));return U.error("[".concat(this.name,"]").concat(le)),void h(le)}q.onopen=()=>{l(q)},q.onclose=X=>{h(X)},q.onmessage=X=>{U.debug("[choose-best-ws]".concat(q.url," onmessage: ").concat(X.data))},ni(this.forceCloseTimeout).then(()=>{q&&q.readyState!==WebSocket.OPEN&&q.close()})}}).then(l=>(this.closeEstablishingWs=void 0,l)).catch(l=>{throw this.closeEstablishingWs=void 0,l})}}class KD{constructor(r){N(this,"input",[]),N(this,"size",void 0),this.size=r}add(r){this.input.push(r),this.input.length>this.size&&this.input.splice(0,1)}mean(){var r;return this.input.length===0?0:Yc(r=this.input).call(r,(o,s)=>o+s)/this.input.length}}class YD extends Rn{get connectionState(){return this._connectionState}set connectionState(r){r!==this._connectionState&&(this._connectionState=r,r===Zt.CONNECTED?this.emit(Be.WS_CONNECTED):r===Zt.RECONNECTING?this.emit(Be.WS_RECONNECTING,this._websocketReconnectReason):r===Zt.CLOSED&&this.emit(Be.WS_CLOSED,this._disconnectedReason))}get currentURLIndex(){return this.websocket.currentURLIndex}get url(){return this.websocket?this.websocket.url:null}get rtt(){return this.rttRolling.mean()}constructor(r,o){super(),N(this,"_disconnectedReason",void 0),N(this,"_websocketReconnectReason",void 0),N(this,"_connectionState",Zt.CLOSED),N(this,"reconnectToken",void 0),N(this,"websocket",void 0),N(this,"openConnectionTime",void 0),N(this,"clientId",void 0),N(this,"lastMsgTime",Date.now()),N(this,"uploadCache",[]),N(this,"uploadCacheInterval",void 0),N(this,"rttRolling",new KD(5)),N(this,"pingpongTimer",void 0),N(this,"wsInflateDataTimer",void 0),N(this,"pingpongTimeoutCount",0),N(this,"joinResponse",void 0),N(this,"multiIpOption",void 0),N(this,"initError",void 0),N(this,"spec",void 0),N(this,"store",void 0),N(this,"onWebsocketMessage",s=>{if(s.data instanceof ArrayBuffer)return void this.emit(Be.ON_BINARY_DATA,s.data);const l=JSON.parse(s.data);if(this.lastMsgTime=Date.now(),Object.prototype.hasOwnProperty.call(l,"_id")){const h="res-@".concat(l._id);this.emit(h,l._result,l._message)}else if(Object.prototype.hasOwnProperty.call(l,"_type")){if(this.emit(l._type,l._message),l._type===_t.ON_NOTIFICATION&&this.handleNotification(l._message),l._type===_t.ON_USER_BANNED)switch(l._message.error_code){case 14:this.close(Wt.UID_BANNED);break;case 15:this.close(Wt.IP_BANNED);break;case 16:this.close(Wt.CHANNEL_BANNED)}if(l._type===_t.ON_USER_LICENSE_BANNED)switch(l._message.error_code){case Ke.ERR_LICENSE_MISSING:this.close(Wt.LICENSE_MISSING);break;case Ke.ERR_LICENSE_EXPIRED:this.close(Wt.LICENSE_EXPIRED);break;case Ke.ERR_LICENSE_MINUTES_EXCEEDED:this.close(Wt.LICENSE_MINUTES_EXCEEDED);break;case Ke.ERR_LICENSE_PERIOD_INVALID:this.close(Wt.LICENSE_PERIOD_INVALID);break;case Ke.ERR_LICENSE_MULTIPLE_SDK_SERVICE:this.close(Wt.LICENSE_MULTIPLE_SDK_SERVICE);break;case Ke.ERR_LICENSE_ILLEGAL:this.close(Wt.LICENSE_ILLEGAL);break;default:this.close()}}}),this.clientId=r.clientId,this.spec=r,this.store=o,this.websocket=new mu("gateway-".concat(this.clientId),this.spec.retryConfig,!0,!0,o),this.handleWebsocketEvents(),window.addEventListener("offline",()=>{this.connectionState===Zt.CONNECTED&&this.reconnect("retry",Mi.OFFLINE)})}async request(r,o,s,l){const h=pn(6,""),p={_id:h,_type:r,_message:o},v=this.websocket.connectionID,E=()=>new xe((Y,q)=>{if(this.connectionState===Zt.CONNECTED)return Y();const X=()=>{this.off(Be.WS_CLOSED,le),Y()},le=()=>{this.off(Be.WS_CONNECTED,X),q(new Q(W.WS_ABORT))};this.once(Be.WS_CONNECTED,X),this.once(Be.WS_CLOSED,le),r!==Je.PUBLISH&&r!==Je.SUBSCRIBE&&r!==Je.UNSUBSCRIBE&&r!==Je.UNPUBLISH&&r!==Je.CONTROL&&r!==Je.RESTART_ICE||this.once(Be.DISCONNECT_P2P,()=>{q(new Q(W.DISCONNECT_P2P))}),r!==Je.PUBLISH&&r!==Je.RESTART_ICE||this.once(Be.ABORT_P2P_EXECUTION,()=>{q(new Q(W.DISCONNECT_P2P))})});if(this.connectionState!==Zt.CONNECTING&&this.connectionState!==Zt.RECONNECTING||r===Je.JOIN||r===Je.REJOIN||await E(),this.websocket.sendMessage(p,!0),l)return;const T=new xe((Y,q)=>{let X=!1;const le=(Se,De)=>{X=!0,Y({isSuccess:Se==="success",message:De||{}}),this.off(Be.WS_CLOSED,he),this.off(Be.WS_RECONNECTING,he),this.emit(Be.REQUEST_SUCCESS,r,o)};this.once("res-@".concat(h),le);const he=()=>{q(new Q(W.WS_ABORT,"type: ".concat(r))),this.off(Be.WS_CLOSED,he),this.off(Be.WS_RECONNECTING,he),this.off("res-@".concat(h),le)};this.once(Be.WS_CLOSED,he),this.once(Be.WS_RECONNECTING,he),ni(ie("SIGNAL_REQUEST_TIMEOUT")).then(()=>{this.websocket.connectionID!==v||X||(U.warning("[".concat(this.clientId,"] ws request timeout, type: ").concat(r)),this.emit(Be.REQUEST_TIMEOUT,r,o))})});let C=null;try{C=await T}catch(Y){if(this.connectionState===Zt.CLOSED||r===Je.LEAVE)throw new Q(W.WS_ABORT);return!this.spec.forceWaitGatewayResponse||s?Y.throw():r===Je.JOIN||r===Je.REJOIN?null:(await E(),await this.request(r,o))}if(C.isSuccess)return C.message;const I=Number(C.message.error_code||C.message.code),L=Up(I),V=new Q(W.UNEXPECTED_RESPONSE,"".concat(L.desc,": ").concat(C.message.error_str),{code:I,data:C.message});return L.action==="success"?C.message:(U.warning("[".concat(this.clientId,"] [").concat(this.websocket.connectionID,"] unexpected response from type ").concat(r,", error_code: ").concat(I,", message: ").concat(L.desc,", action: ").concat(L.action)),I===Ke.ERR_TOO_MANY_BROADCASTERS?((r===Je.JOIN||r===Je.REJOIN)&&(this.initError=V,this.close()),V.throw()):L.action==="failed"?V.throw():L.action==="quit"?(this.initError=V,this.close(),V.throw()):(I===Ke.ERR_JOIN_BY_MULTI_IP?(this.multiIpOption=C.message.option,U.warning("[".concat(this.clientId,"] detect multi ip, recover")),this.reconnect("recover",Mi.MULTI_IP)):this.reconnect(L.action,Mi.SERVER_ERROR),r===Je.JOIN||r===Je.REJOIN?null:await this.request(r,o)))}waitMessage(r,o){return new xe(s=>{const l=h=>{(!o||o(h))&&(this.off(r,l),s(h))};this.on(r,l)})}upload(r,o){const s={_type:r,_message:o};try{this.websocket.sendMessage(s)}catch{const h=ie("MAX_UPLOAD_CACHE")||50;this.uploadCache.push(s),this.uploadCache.length>h&&this.uploadCache.splice(0,1),this.uploadCache.length>0&&!this.uploadCacheInterval&&(this.uploadCacheInterval=window.setInterval(()=>{if(this.connectionState!==Zt.CONNECTED)return;const p=this.uploadCache.splice(0,1)[0];this.uploadCache.length===0&&(window.clearInterval(this.uploadCacheInterval),this.uploadCacheInterval=void 0),this.upload(p._type,p._message)},ie("UPLOAD_CACHE_INTERVAL")||2e3))}}send(r,o){const s={_type:r,_message:o};this.websocket.sendMessage(s)}init(r,o){return this.initError=void 0,this.multiIpOption=void 0,this.joinResponse=void 0,this.reconnectToken=void 0,this.openConnectionTime=void 0,new xe((s,l)=>{this.once(Be.WS_CONNECTED,()=>s(this.joinResponse)),this.once(Be.WS_CLOSED,()=>l(this.initError||new Q(W.WS_ABORT))),this.connectionState=Zt.CONNECTING,this.websocket.init(r).catch(l),this.wsInflateDataTimer&&window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=window.setInterval(()=>{this.handleWsInflateData()},2e4),setTimeout(()=>{o&&this.openConnectionTime===void 0&&(U.debug("[".concat(this.clientId,"] init websocket timeout while join with fallback to proxy")),l(new Q(W.INIT_WEBSOCKET_TIMEOUT)))},ie("JOIN_WITH_FALLBACK_PROXY_PENDING_DURATION"))})}close(r){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.wsInflateDataTimer&&(this.handleWsInflateData(),window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=void 0),this.reconnectToken=void 0,this.joinResponse=void 0,this._disconnectedReason=r||Wt.LEAVE,this.connectionState=Zt.CLOSED,U.debug("[".concat(this.clientId,"] ")+"will close websocket in signal"),this.websocket.close(),r===Wt.FALLBACK&&(this.websocket.removeAllListeners(),this.websocket=new mu("gateway-".concat(this.clientId),this.spec.retryConfig,!0,!0,this.store),this.handleWebsocketEvents())}async join(){if(!this.joinResponse){this.emit(Be.ABORT_P2P_EXECUTION);const r=await ri(this,Be.REQUEST_JOIN_INFO),o=await this.request(Je.JOIN,r);if(!o)return this.emit(Be.REPORT_JOIN_GATEWAY,W.TIMEOUT,this.url||""),!1;this.joinResponse=o,this.emit(Be.JOIN_RESPONSE,this.joinResponse),this.reconnectToken=this.joinResponse.rejoin_token}return this.connectionState=Zt.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),!0}async rejoin(){if(!this.reconnectToken)throw new Q(W.UNEXPECTED_ERROR,"can not rejoin, no rejoin token");const r=fu(this,Be.REQUEST_REJOIN_INFO);r.token=this.reconnectToken;const o=await this.request(Je.REJOIN,r);return!!o&&(this.connectionState=Zt.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),o.peers&&o.peers.forEach(s=>{this.emit(_t.ON_USER_ONLINE,{uid:s.uid}),s.audio&&this.emit(_t.ON_ADD_AUDIO_STREAM,{uid:s.uid,uint_id:s.uint_id,audio:!0,ssrcId:s.audio_ssrc}),s.video&&this.emit(_t.ON_ADD_VIDEO_STREAM,{uid:s.uid,uint_id:s.uint_id,video:!0,ssrcId:s.video_ssrc}),s.audio_mute?this.emit(_t.MUTE_AUDIO,{uid:s.uid}):this.emit(_t.UNMUTE_AUDIO,{uid:s.uid}),s.video_mute?this.emit(_t.MUTE_VIDEO,{uid:s.uid}):this.emit(_t.UNMUTE_VIDEO,{uid:s.uid}),s.audio_enable_local?this.emit(_t.ENABLE_LOCAL_AUDIO,{uid:s.uid}):this.emit(_t.DISABLE_LOCAL_AUDIO,{uid:s.uid}),s.video_enable_local?this.emit(_t.ENABLE_LOCAL_VIDEO,{uid:s.uid}):this.emit(_t.DISABLE_LOCAL_VIDEO,{uid:s.uid}),s.audio||s.video||this.emit(_t.ON_REMOVE_STREAM,{uid:s.uid,uint_id:s.uint_id})}),!0)}reconnect(r,o){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.websocket.reconnect(r,o)}handleNotification(r){U.debug("[".concat(this.clientId,"] receive notification: "),r);const o=Up(r.code);if(o.action!=="success"){if(o.action!=="failed")return o.action==="quit"?(o.desc==="ERR_REPEAT_JOIN_CHANNEL"&&this.close(Wt.UID_BANNED),void this.close()):void this.reconnect(o.action,Mi.SERVER_ERROR);U.error("[".concat(this.clientId,"] ignore error: "),o.desc)}}handlePingPong(){if(!this.websocket||this.websocket.state!=="connected")return;this.pingpongTimeoutCount>0&&this.rttRolling.add(3e3),this.pingpongTimeoutCount+=1;const r=ie("PING_PONG_TIME_OUT"),o=Date.now();this.pingpongTimeoutCount>=r&&(U.warning("[".concat(this.clientId,"] PINGPONG Timeout. Last Socket Message: ").concat(o-this.lastMsgTime,"ms")),o-this.lastMsgTime>ie("WEBSOCKET_TIMEOUT_MIN"))?this.reconnect("retry",Mi.TIMEOUT):this.request(Je.PING,void 0,!0).then(()=>{this.pingpongTimeoutCount=0;const s=Date.now()-o;this.rttRolling.add(s),ie("REPORT_STATS")&&this.send(Je.PING_BACK,{pingpongElapse:s})}).catch(s=>{})}handleWsInflateData(){const{wsInflateLength:r,wsDeflateLength:o}=this.websocket.getWsInflateData();r!==0&&o!==0&&this.upload(go.WS_INFLATE_DATA_LENGTH,{ws_deflate_length:o,ws_inflate_length:r})}handleWebsocketEvents(){this.websocket.on(it.RECONNECT_WAITTING_FINISH,r=>{this.emit(Be.WS_RECONNECT_WAITTING_FINISH,r)}),this.websocket.on(it.RECONNECT_CREATE_CONNECTION,r=>{this.emit(Be.WS_RECONNECT_CREATE_CONNECTION,r)}),this.websocket.on(it.ON_MESSAGE,this.onWebsocketMessage),this.websocket.on(it.CLOSED,()=>{this.connectionState=Zt.CLOSED}),this.websocket.on(it.FAILED,()=>{this._disconnectedReason=Wt.NETWORK_ERROR,this.connectionState=Zt.CLOSED}),this.websocket.on(it.RECONNECTING,r=>{this._websocketReconnectReason=r,this.joinResponse=void 0,this.connectionState===Zt.CONNECTED?this.connectionState=Zt.RECONNECTING:this.connectionState=Zt.CONNECTING}),this.websocket.on(it.WILL_RECONNECT,(r,o)=>{if(fu(this,Be.IS_P2P_DISCONNECTED)&&r==="retry")return U.debug("".concat(this.clientId," reconnect mode is retry, but p2p lost, change to tryNext")),this.reconnectToken=void 0,this.emit(Be.NEED_RENEW_SESSION),this.emit(Be.DISCONNECT_P2P),o("tryNext");r!=="retry"&&(U.debug("".concat(this.clientId," websockt will_connect event, renewSession reconnectMode is ").concat(r)),this.reconnectToken=void 0,this.emit(Be.NEED_RENEW_SESSION),this.emit(Be.DISCONNECT_P2P)),o(r)}),this.websocket.on(it.CONNECTED,()=>{this.openConnectionTime=Date.now(),this.reconnectToken?this.rejoin().catch(r=>{U.warning("[".concat(this.clientId,"] rejoin failed ").concat(r)),this.reconnect("tryNext",Mi.SERVER_ERROR)}):this.join().catch(r=>{if(this.emit(Be.REPORT_JOIN_GATEWAY,r.message||r.code,this.url||""),r instanceof Q&&r.code===W.UNEXPECTED_RESPONSE&&r.data.code===Ke.ERR_NO_AUTHORIZED)return U.warning("[".concat(this.clientId,"] reconnect no authorized, recover")),void this.reconnect("recover",Mi.SERVER_ERROR);U.error("[".concat(this.clientId,"] join gateway request failed"),r.toString()),this.spec.forceWaitGatewayResponse?this.reconnect("tryNext",Mi.SERVER_ERROR):(this.initError=r,this.close())})}),this.websocket.on(it.REQUEST_NEW_URLS,(r,o)=>{ri(this,Be.REQUEST_RECOVER,this.multiIpOption).then(r).catch(o)}),this.websocket.on(it.ON_TOKEN_PRIVILEGE_DID_EXPIRE,()=>{this.emit(_t.ON_TOKEN_PRIVILEGE_DID_EXPIRE)})}}function qD(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}class IX extends Rn{get url(){return this._url?this._url:null}get reconnectMode(){return this._reconnectMode}set reconnectMode(r){["tryNext","recover"].includes(r)&&this.resetReconnectCount(r),this._reconnectMode=r}get state(){return this._state}set state(r){r!==this._state&&(this._state=r,this._state==="reconnecting"?this.emit(Dn.RECONNECTING,this.reconnectReason):this._state==="connected"?this.emit(Dn.CONNECTED):this._state==="closed"?this.emit(Dn.CLOSED):this._state==="failed"&&this.emit(Dn.FAILED))}constructor(r,o,s,l){super(),N(this,"connectionID",0),N(this,"currentURLIndex",0),N(this,"reconnectReason",void 0),N(this,"_reconnectMode","tryNext"),N(this,"_initMutex",void 0),N(this,"_name",void 0),N(this,"_state","closed"),N(this,"_reconnectInterrupter",void 0),N(this,"_url",void 0),N(this,"_retryConfig",void 0),N(this,"_reconnectCount",0),N(this,"_forceCloseTimeout",5e3),N(this,"_onlineReconnectListener",void 0),N(this,"_closeEstablishingTransmitter",()=>{}),N(this,"_store",void 0),N(this,"_joinChannelServiceRecordIndex",void 0),N(this,"_transmitter",void 0),N(this,"_useCompress",void 0),N(this,"_inflateLength",0),N(this,"_deflateLength",0),this._store=l,this._name=r,this._retryConfig=function(h){for(var p=1;p<arguments.length;p++){var v=arguments[p]!=null?arguments[p]:{};p%2?qD(Object(v),!0).forEach(function(E){N(h,E,v[E])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(v)):qD(Object(v)).forEach(function(E){Object.defineProperty(h,E,Object.getOwnPropertyDescriptor(v,E))})}return h}({},o),this._useCompress=s}resetReconnectCount(r){U.debug("".concat(this._name," reset reconnect count, reason: ").concat(r)),this._reconnectCount=0}close(r,o){if(this.currentURLIndex=0,this.resetReconnectCount("close"),this._reconnectInterrupter&&this._reconnectInterrupter(),this._transmitter){this._transmitter.onclose=null,this._transmitter.onopen=null,this._transmitter.onmessage=null;const s=this._transmitter;o?setTimeout(()=>s.close(),500):s.close(),this._transmitter=void 0}this.state=r?"failed":"closed",this._closeEstablishingTransmitter&&this._closeEstablishingTransmitter()}reconnect(r,o){if(!this._transmitter)return void U.warning("[".concat(this._name,"] can not reconnect, no websocket"));var s;r!==void 0&&(this.reconnectMode=r),U.debug("[".concat(this._name,"] reconnect is triggered initiative")),typeof this._joinChannelServiceRecordIndex=="number"&&((s=this._store)===null||s===void 0||s.recordJoinChannelService({status:"error",errors:[new Error(o)]},this._joinChannelServiceRecordIndex));const l=this._transmitter.onclose;this._transmitter.onclose=null,this._transmitter.close(),l&&l.bind(this._transmitter)({code:9999,reason:o})}getInflateData(){const r=this._inflateLength,o=this._deflateLength;return this.clearInflateData(),{inflateLength:r,deflateLength:o}}setInflateData(r){this._deflateLength=this._deflateLength+r.originLength,this._inflateLength=this._inflateLength+r.compressedLength}clearInflateData(){this._inflateLength=0,this._deflateLength=0}}function XD(n,r,o){if("getBigUint64"in DataView.prototype)return n.getBigUint64(r,o);const s=n.getUint32(r,o),l=n.getUint32(r+4,o),h=+!!o,p=+!o;return BigInt(s*p+l*h)<<BigInt(32)|BigInt(s*h+l*p)}function JD(n,r,o,s){if("setBigUint64"in DataView.prototype)return n.setBigUint64(r,o,s);const l=Number(o>>BigInt(32)),h=Number(o&BigInt(4294967295));s?(n.setUint32(r+4,l,s),n.setUint32(r,h,s)):(n.setUint32(r,l,s),n.setUint32(r+4,h,s))}let ia;(function(n){n[n.Default=0]="Default",n[n.Ack=1]="Ack"})(ia||(ia={}));class wX{constructor(r,o,s){N(this,"version",1),N(this,"initialRTO",void 0),N(this,"maxBatchAckCount",void 0),N(this,"maxRTO",void 0),N(this,"initialRTT",void 0),N(this,"ID",void 0),N(this,"rtt",void 0),N(this,"packetNumber",1),N(this,"rtoRatioMap",new Map),N(this,"timeoutMap",new Map),N(this,"unorderedPacketQueue",[]),N(this,"batchAckPacketQueue",[]),N(this,"lastOrderedPacketNumber",0),N(this,"batchAckTimer",void 0),N(this,"sendImpl",void 0),N(this,"receiveImpl",void 0),this.sendImpl=r,this.receiveImpl=o,this.ID=pn(7,"transmitter-"),this.initialRTO=(s==null?void 0:s.initialRTO)!==void 0?s.initialRTO:ie("TRANSMITTER_INITIAL_RTO"),this.initialRTT=(s==null?void 0:s.initialRTT)!==void 0?s.initialRTT:ie("TRANSMITTER_INITIAL_RTT"),this.rtt=(s==null?void 0:s.initialRTT)!==void 0?s.initialRTT:ie("TRANSMITTER_INITIAL_RTT"),this.maxBatchAckCount=(s==null?void 0:s.maxBatchAckCount)!==void 0?s.maxBatchAckCount:ie("TRANSMITTER_MAX_BATCH_ACK_COUNT"),this.maxRTO=(s==null?void 0:s.maxRTO)!==void 0?s.maxRTO:ie("TRANSMITTER_MAX_RTO")}packetize(r,o){return{type:ia.Default,version:this.version,packetNumber:o,payload:r}}serialize(r){switch(r.type){case ia.Default:{let o;typeof r.payload=="string"?o=new TextEncoder().encode(r.payload):o=r.payload;const s=new ArrayBuffer(o.length+15),l=new DataView(s);return l.setUint16(0,r.version),l.setUint8(2,r.type),l.setUint32(3,r.packetNumber),JD(l,7,BigInt(r.sendTs)),new Uint8Array(l.buffer).set(o,15),s}case ia.Ack:{const o=new ArrayBuffer(16),s=new DataView(o);return s.setUint16(0,r.version),s.setUint8(2,r.type),s.setUint32(3,r.maxAckPacketNumber),s.setUint8(7,r.shift),JD(s,8,BigInt(r.ackSendTs)),o}}}deserialize(r){const o=new DataView(r),s=o.getUint16(0),l=o.getUint8(2);switch(l){case ia.Default:{const h=o.getUint32(3),p=XD(o,7),v=r.slice(15),E=new TextDecoder().decode(v);return{version:s,type:l,packetNumber:h,sendTs:Number(p),payload:E}}case ia.Ack:{const h=o.getUint32(3),p=o.getUint8(7),v=XD(o,8);return{version:s,type:l,maxAckPacketNumber:h,shift:p,ackSendTs:Number(v)}}default:throw U.error("[".concat(this.ID,"] Unrecognized packet type ").concat(l)),new Error("Unrecognized packet type ".concat(l))}}sendMessage(r){const o=this.packetize(r,this.packetNumber);this.packetNumber=this.packetNumber===4294967295?1:this.packetNumber+1;const s=this.calculateRTO(o),l=window.setTimeout(()=>{this.resendMessage(o)},s);this.timeoutMap.set(o.packetNumber,l),this.sendPacket(o)}onData(r){const o=this.deserialize(r);o.type===ia.Default?this.ack(o):o.type===ia.Ack&&(this.updateRTT(o,Math.round(performance.now())),this.clearRTO(o))}close(){this.rtt=this.initialRTT,this.packetNumber=1,Array.from(this.timeoutMap.entries()).forEach(r=>{let[o,s]=r;window.clearTimeout(s)}),this.timeoutMap=new Map,this.rtoRatioMap=new Map,this.unorderedPacketQueue=[],this.batchAckPacketQueue=[],this.lastOrderedPacketNumber=0,this.batchAckTimer!==void 0&&window.clearTimeout(this.batchAckTimer)}resendMessage(r){const o=this.calculateRTO(r),s=window.setTimeout(()=>{this.resendMessage(r)},o);this.timeoutMap.set(r.packetNumber,s),this.sendPacket(r)}calculateRTO(r){const o=this.rtoRatioMap.get(r.packetNumber);if(o===void 0)return this.rtoRatioMap.set(r.packetNumber,1),this.initialRTO;{const s=9*this.rtt/8*o;return this.rtoRatioMap.set(r.packetNumber,o+1),s>this.maxRTO?this.maxRTO:s}}updateRTT(r,o){const s=r.ackSendTs;this.rtt=this.rtt*(7/8)+(o-s-this.rtt)/8}ack(r){if(r.packetNumber===this.lastOrderedPacketNumber+1)for(this.batchAckPacketQueue.length>=this.maxBatchAckCount&&this.batchAck(),this.batchAckTimer?this.batchAckPacketQueue.push(r):(this.batchAckPacketQueue.push(r),this.batchAckTimer=window.setTimeout(()=>{this.batchAck()},this.rtt/8)),this.lastOrderedPacketNumber+=1,this.receiveImpl(r.payload);;){const o=this.unorderedPacketQueue[0];if(!o){this.unorderedPacketQueue.shift();break}this.batchAckTimer&&this.batchAck(),this.receiveImpl(o.payload),this.unorderedPacketQueue.shift(),this.lastOrderedPacketNumber+=1}else if(r.packetNumber<=this.lastOrderedPacketNumber){const o={ackSendTs:r.sendTs,maxAckPacketNumber:r.packetNumber,shift:0,type:ia.Ack,version:this.version};this.sendPacket(o)}else if(r.packetNumber>this.lastOrderedPacketNumber){this.unorderedPacketQueue[r.packetNumber-this.lastOrderedPacketNumber-2]=r;const o={ackSendTs:r.sendTs,maxAckPacketNumber:r.packetNumber,shift:0,type:ia.Ack,version:this.version};this.sendPacket(o)}}batchAck(){window.clearTimeout(this.batchAckTimer),this.batchAckTimer=void 0;const r={ackSendTs:this.batchAckPacketQueue[this.batchAckPacketQueue.length-1].sendTs,maxAckPacketNumber:this.batchAckPacketQueue[this.batchAckPacketQueue.length-1].packetNumber,shift:this.batchAckPacketQueue.length-1,type:ia.Ack,version:this.version};this.sendPacket(r),this.batchAckPacketQueue=[]}sendPacket(r){r.type===ia.Default&&(r.sendTs=Math.round(performance.now()));const o=this.serialize(r);this.sendImpl(o)}clearRTO(r){for(let o=r.maxAckPacketNumber-r.shift;o<=r.maxAckPacketNumber;o++){const s=this.timeoutMap.get(o);s!==void 0&&window.clearTimeout(s),this.timeoutMap.delete(o),this.rtoRatioMap.delete(o)}}}class QD extends IX{constructor(r,o){super(r,o,arguments.length>2&&arguments[2]!==void 0&&arguments[2],arguments.length>3?arguments[3]:void 0),N(this,"_initMutex",void 0),N(this,"_reconnectInterrupter",void 0),N(this,"_url",void 0),N(this,"_transmitter",void 0),N(this,"_addresses",void 0),N(this,"_reliableTransmission",void 0),this._initMutex=new wi("datachannel");const{timeout:s,timeoutFactor:l}=o,h=Math.max(300,Math.floor(3*s/5)),p=Math.max(1.2,Math.floor(8*l)/10);hi.ONLINE&&(this._retryConfig.timeout=h,this._retryConfig.timeoutFactor=p),tr.on(nl.NETWORK_STATE_CHANGE,(v,E)=>{v!==E&&(this.resetReconnectCount("network state change: ".concat(E," -> ").concat(v)),v===hi.ONLINE?(this._retryConfig.timeout=h,this._retryConfig.timeoutFactor=p):(this._retryConfig.timeout=s,this._retryConfig.timeoutFactor=l))})}getConnection(){if(this._reliableTransmission)return this._reliableTransmission}async init(r){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5e3;this._forceCloseTimeout=o;const s=(l,h)=>{this._addresses=r,this.currentURLIndex=this._addresses.findIndex(v=>v.fingerprint||ie("FINGERPRINT"));const p=this._addresses[this.currentURLIndex];this.state="connecting",this.createTransmitterConnection(p).then(l).catch(h),this.once(Dn.CLOSED,()=>h(new Q(W.WS_DISCONNECT))),this.once(Dn.CONNECTED,()=>l())};return this._initMutex.lock().then(l=>new xe((h,p)=>{s(h,p)}).then(()=>{l()}).catch(()=>{l()}))}sendMessage(r){let o=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(!this._transmitter||!this._reliableTransmission)throw new Q(W.WS_ABORT,"datachannel is not ready");try{o||(r=JSON.stringify(r)),this._reliableTransmission.sendMessage(r)}catch(s){throw new Q(W.WS_ERR,"send datachannel signal message error"+s.toString())}}unbindDcCloseEventListener(){this._transmitter&&(this._transmitter.onclose=null)}sendMessageWithJSON(r){const o=JSON.stringify(r);return{compressed:o,compressedLength:o.length,origin:r}}sendMessageWithUint8Array(r){return{compressed:r,compressedLength:r.byteLength,origin:r}}createTransmitterConnection(r){return this.connectionID+=1,this._joinChannelServiceRecordIndex=void 0,this._url="dc://".concat(r.ip,":").concat(r.port),new xe((o,s)=>{var l;const h=()=>{U.debug("[".concat(this._name,"] datachannel opened:"),this._url),this.reconnectMode="retry",this.state="connected",this.resetReconnectCount("opened"),o()},p=async C=>{var I;if((I=this._closeEstablishingTransmitter)===null||I===void 0||I.call(this),U.debug("[".concat(this._name,"] datachannel close ").concat(this._url,", code: ").concat(C.code,", reason: ").concat(C.reason,", current mode: ").concat(this.reconnectMode)),this._reconnectCount<this._retryConfig.maxRetryCount){this.state==="connected"&&(this.reconnectReason=C.reason,this.state="reconnecting");const L=Aa(this,Dn.WILL_RECONNECT,this.reconnectMode)||this.reconnectMode,V=await this.reconnectWithAction(L);if(this.state==="closed")return void U.debug("[".concat(this.connectionID,"] dc is closed, no need to reconnect"));if(!V)return s(new Q(W.WS_DISCONNECT,"datachannel reconnect failed: ".concat(C.code))),void this.close(!0);o()}else s(new Q(W.WS_DISCONNECT,"datachannel close: ".concat(C.code))),this.close()},v=C=>{var I;(I=this._reliableTransmission)===null||I===void 0||I.onData(C.data)};this._transmitter&&(this._transmitter.onclose=null,this._transmitter.close()),this._reliableTransmission&&(this._reliableTransmission.close(),this._reliableTransmission=void 0),U.debug("[".concat(this._name,"] start connect, address: ").concat(JSON.stringify(r)));const E=(l=this._store)===null||l===void 0?void 0:l.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"gateway"}),T=Date.now();ri(this,Dn.TO_CONNECT_DATACHANNEL,r).then(C=>{var I,L;if(!C)throw new Error("transmissonInfo not exist yet");const{transmitter:V,close:Y}=C;this._transmitter=V,(I=this._store)===null||I===void 0||I.signalChannelOpen();const q=Date.now()-T;U.debug("[choose dc] dc open cost ".concat(q,"ms")),this._reliableTransmission=new wX(X=>{var le;this._transmitter&&this._transmitter.readyState==="open"&&((le=this._transmitter)===null||le===void 0||le.send(X))},X=>{typeof X=="string"&&this.emit(Dn.ON_MESSAGE,X)}),this._closeEstablishingTransmitter=()=>{var X;(X=this._reliableTransmission)===null||X===void 0||X.close(),this._reliableTransmission=void 0,Y()},h&&h(),V.onclose=p,V.onmessage=v,(L=this._store)===null||L===void 0||L.recordJoinChannelService({endTs:Date.now(),status:"success"},E),this._joinChannelServiceRecordIndex=E}).catch(C=>{var I;if((I=this._store)===null||I===void 0||I.recordJoinChannelService({endTs:Date.now(),status:C instanceof Q&&C.code===W.WS_ABORT?"aborted":"error",errors:[C]},E),this.state!=="closed"){if(C instanceof Q&&C.code===W.WS_ERR){const L=new Q(W.WS_ERR,"init datachannel failed! Error: ".concat(C.toString()));return U.error("[".concat(this._name,"]").concat(L)),void s(L)}p&&p(C)}else s(new Q(W.WS_DISCONNECT,"datachannel is closed: ".concat(C.toString())))})})}async reconnectWithAction(r){let o=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(this._reconnectCount>=this._retryConfig.maxRetryCount||!this._addresses||this.state==="closed")return!1;this._onlineReconnectListener||tr.networkState!==hi.OFFLINE||(this._onlineReconnectListener=tr.onlineWaiter&&tr.onlineWaiter.then(()=>{this._onlineReconnectListener=void 0}));let s=!0;if(this._reconnectInterrupter=()=>{s=!1},o){const p=ES(this._reconnectCount,this._retryConfig);U.debug("[".concat(this._name,"] wait ").concat(p,"ms to reconnect datachannel, mode: ").concat(r)),await xe.race([ni(p),this._onlineReconnectListener||new xe(()=>{})])}if(this.state==="closed"||!s)return!1;this._reconnectCount+=1;const l=async(p,v)=>{this.emit(Dn.RECONNECT_CREATE_CONNECTION,v),await this.createTransmitterConnection(p)};try{if(r==="retry"){const p=this._addresses[this.currentURLIndex];this.emit(Dn.RECONNECT_WAITTING_FINISH,r),await l(p,r)}else if(r==="tryNext"){this.currentURLIndex+=1;for(let v=this.currentURLIndex;v<this._addresses.length;v++){if(this._addresses[v].fingerprint||ie("FINGERPRINT")){this.currentURLIndex=v;break}this.currentURLIndex+=1}if(this.currentURLIndex>=this._addresses.length)return U.debug("[".concat(this._name,"] the available addresses are exhausted, change to recover")),await this.reconnectWithAction("recover",!1);U.debug("[".concat(this._name,"] datachannel url length: ").concat(this._addresses.length," current index: ").concat(this.currentURLIndex));const p=this._addresses[this.currentURLIndex];this.emit(Dn.RECONNECT_WAITTING_FINISH,r),await l(p,r)}else r==="recover"&&(U.debug("[".concat(this._name,"] start to failback to websocket")),this.resetReconnectCount("recover mode"),this.emit(Dn.RECONNECT_WAITTING_FINISH,r),this.emit(Dn.FAILBACK));return!0}catch(p){var h;return U.error("[".concat(this._name,"] reconnect failed"),p.toString()),p!=null&&(h=p.data)!==null&&h!==void 0&&h.desc&&Array.isArray(p.data.desc)&&p.data.desc.length&&p.data.desc.includes("dynamic key expired")?(this.emit(Dn.ON_TOKEN_PRIVILEGE_DID_EXPIRE),!1):await this.reconnectWithAction(r,o)}}}class hc extends Rn{get connectionState(){return this._connectionState}set connectionState(r){r!==this._connectionState&&(this._connectionState=r,r===Zt.CONNECTED?this.emit(Be.WS_CONNECTED):r===Zt.RECONNECTING?this.emit(Be.WS_RECONNECTING,this._websocketReconnectReason):r===Zt.CLOSED&&this.emit(Be.WS_CLOSED,this._disconnectedReason))}get currentURLIndex(){return this.websocket.currentURLIndex}get url(){return this.websocket?this.websocket.url:null}get rtt(){return this.rttRolling.mean()}constructor(r,o){super(),N(this,"_disconnectedReason",void 0),N(this,"_websocketReconnectReason",void 0),N(this,"_connectionState",Zt.CLOSED),N(this,"reconnectToken",void 0),N(this,"websocket",void 0),N(this,"openConnectionTime",void 0),N(this,"clientId",void 0),N(this,"lastMsgTime",Date.now()),N(this,"uploadCache",[]),N(this,"uploadCacheInterval",void 0),N(this,"rttRolling",new KD(5)),N(this,"pingpongTimer",void 0),N(this,"inflateDataTimer",void 0),N(this,"pingpongTimeoutCount",0),N(this,"joinResponse",void 0),N(this,"multiIpOption",void 0),N(this,"initError",void 0),N(this,"spec",void 0),N(this,"store",void 0),N(this,"onWebsocketMessage",s=>{if(s instanceof ArrayBuffer)return void this.emit(Be.ON_BINARY_DATA,s);const l=JSON.parse(s);if(this.lastMsgTime=Date.now(),Object.prototype.hasOwnProperty.call(l,"_id")){const h="res-@".concat(l._id);this.emit(h,l._result,l._message)}else if(Object.prototype.hasOwnProperty.call(l,"_type")&&(this.emit(l._type,l._message),l._type===_t.ON_NOTIFICATION&&this.handleNotification(l._message),l._type===_t.ON_USER_BANNED))switch(l._message.error_code){case 14:this.close(Wt.UID_BANNED);break;case 15:this.close(Wt.IP_BANNED);break;case 16:this.close(Wt.CHANNEL_BANNED)}}),this.clientId=r.clientId,this.spec=r,this.store=o,this.websocket=new QD("gateway-".concat(this.clientId),this.spec.retryConfig,!0,o),this.handleWebsocketEvents(),window.addEventListener("offline",()=>{this.connectionState===Zt.CONNECTED&&this.reconnect("retry",Ls.OFFLINE)})}async request(r,o,s,l){const h=pn(6,""),p={_id:h,_type:r,_message:o},v=this.websocket.connectionID,E=()=>new xe((Y,q)=>{if(this.connectionState===Zt.CONNECTED)return Y();const X=()=>{this.off(Be.WS_CLOSED,le),Y()},le=()=>{this.off(Be.WS_CONNECTED,X),q(new Q(W.WS_ABORT))};this.once(Be.WS_CONNECTED,X),this.once(Be.WS_CLOSED,le),r!==Je.PUBLISH&&r!==Je.SUBSCRIBE&&r!==Je.UNSUBSCRIBE&&r!==Je.UNPUBLISH&&r!==Je.CONTROL&&r!==Je.RESTART_ICE||this.once(Be.DISCONNECT_P2P,()=>{q(new Q(W.DISCONNECT_P2P))}),r!==Je.PUBLISH&&r!==Je.RESTART_ICE||this.once(Be.ABORT_P2P_EXECUTION,()=>{q(new Q(W.DISCONNECT_P2P))})});if(this.connectionState!==Zt.CONNECTING&&this.connectionState!==Zt.RECONNECTING||r===Je.JOIN||r===Je.REJOIN||await E(),r===Je.LEAVE&&(this.websocket.unbindDcCloseEventListener(),l=!0),this.websocket.sendMessage(p,!0,!1),l)return;const T=new xe((Y,q)=>{let X=!1;const le=(Se,De)=>{X=!0,Y({isSuccess:Se==="success",message:De||{}}),this.off(Be.WS_CLOSED,he),this.off(Be.WS_RECONNECTING,he),this.emit(Be.REQUEST_SUCCESS,r,o)};this.once("res-@".concat(h),le);const he=()=>{q(new Q(W.WS_ABORT,"type: ".concat(r))),this.off(Be.WS_CLOSED,he),this.off(Be.WS_RECONNECTING,he),this.off("res-@".concat(h),le)};this.once(Be.WS_CLOSED,he),this.once(Be.WS_RECONNECTING,he),ni(ie("SIGNAL_REQUEST_TIMEOUT")).then(()=>{this.websocket.connectionID!==v||X||(U.warning("dc request timeout, type: ".concat(r)),this.emit(Be.REQUEST_TIMEOUT,r,o))})});let C=null;try{C=await T}catch(Y){if(this.connectionState===Zt.CLOSED||r===Je.LEAVE)throw new Q(W.WS_ABORT);return!this.spec.forceWaitGatewayResponse||s?Y.throw():r===Je.JOIN||r===Je.REJOIN?null:(await E(),await this.request(r,o))}if(C.isSuccess)return C.message;const I=Number(C.message.error_code||C.message.code),L=Up(I),V=new Q(W.UNEXPECTED_RESPONSE,"".concat(L.desc,": ").concat(C.message.error_str),{code:I,data:C.message});return L.action==="success"?C.message:(U.warning("[".concat(this.websocket.connectionID,"] unexpected response from type ").concat(r,", error_code: ").concat(I,", message: ").concat(L.desc,", action: ").concat(L.action)),I===Ke.ERR_TOO_MANY_BROADCASTERS?((r===Je.JOIN||r===Je.REJOIN)&&(this.initError=V,this.close()),V.throw()):L.action==="failed"?V.throw():L.action==="quit"?(this.initError=V,this.close(),V.throw()):(I===Ke.ERR_JOIN_BY_MULTI_IP?(this.multiIpOption=C.message.option,U.warning("[".concat(this.clientId,"] detect multi ip, recover")),this.reconnect("recover",Ls.MULTI_IP)):this.reconnect(L.action,Ls.SERVER_ERROR),r===Je.JOIN||r===Je.REJOIN?null:await this.request(r,o)))}waitMessage(r,o){return new xe(s=>{const l=h=>{(!o||o(h))&&(this.off(r,l),s(h))};this.on(r,l)})}upload(r,o){const s={_type:r,_message:o};try{this.websocket.sendMessage(s)}catch{const h=ie("MAX_UPLOAD_CACHE")||50;this.uploadCache.push(s),this.uploadCache.length>h&&this.uploadCache.splice(0,1),this.uploadCache.length>0&&!this.uploadCacheInterval&&(this.uploadCacheInterval=window.setInterval(()=>{if(this.connectionState!==Zt.CONNECTED)return;const p=this.uploadCache.splice(0,1)[0];this.uploadCache.length===0&&(window.clearInterval(this.uploadCacheInterval),this.uploadCacheInterval=void 0),this.upload(p._type,p._message)},ie("UPLOAD_CACHE_INTERVAL")||2e3))}}send(r,o){const s={_type:r,_message:o};this.websocket.sendMessage(s)}init(r,o){return this.initError=void 0,this.multiIpOption=void 0,this.joinResponse=void 0,this.reconnectToken=void 0,this.openConnectionTime=void 0,new xe((s,l)=>{this.once(Be.WS_CONNECTED,()=>s(this.joinResponse)),this.once(Be.WS_CLOSED,()=>l(this.initError||new Q(W.WS_ABORT))),this.connectionState=Zt.CONNECTING,this.websocket.init(r).catch(l),this.websocket.once(Dn.FAILBACK,()=>{this.openConnectionTime===void 0&&l(new Q(W.INIT_DATACHANNEL_TIMEOUT))}),this.inflateDataTimer&&window.clearInterval(this.inflateDataTimer),this.inflateDataTimer=window.setInterval(()=>{this.handleInflateData()},2e4),setTimeout(()=>{o&&this.openConnectionTime===void 0&&(U.debug("[".concat(this.clientId,"] init datachannel timeout while join with failback to websocket")),l(new Q(W.INIT_DATACHANNEL_TIMEOUT)))},ie("DC_JOIN_WITH_FAILBACK"))})}close(r){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.inflateDataTimer&&(this.handleInflateData(),window.clearInterval(this.inflateDataTimer),this.inflateDataTimer=void 0),this.reconnectToken=void 0,this.joinResponse=void 0,this._disconnectedReason=r||Wt.LEAVE,this.connectionState=Zt.CLOSED,U.debug("[".concat(this.clientId,"] ")+"will close datachannel in signal"),this.websocket.close(),r===Wt.FALLBACK&&(this.websocket.removeAllListeners(),this.websocket=new QD("gateway-".concat(this.clientId),this.spec.retryConfig,!0,this.store),this.handleWebsocketEvents())}async join(){if(!this.joinResponse){this.emit(Be.ABORT_P2P_EXECUTION);const r=await ri(this,Be.DATACHANNEL_CONNECTING),o=await this.request(Je.JOIN,r);if(!o)return this.emit(Be.REPORT_JOIN_GATEWAY,W.TIMEOUT,this.url||""),!1;this.joinResponse=o,this.emit(Be.JOIN_RESPONSE,this.joinResponse),this.reconnectToken=this.joinResponse.rejoin_token}return this.connectionState=Zt.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),!0}async rejoin(){if(!this.reconnectToken)throw new Q(W.UNEXPECTED_ERROR,"can not rejoin, no rejoin token");const r=fu(this,Be.REQUEST_REJOIN_INFO);r.token=this.reconnectToken;const o=await this.request(Je.REJOIN,r);return!!o&&(this.connectionState=Zt.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),o.peers&&o.peers.forEach(s=>{this.emit(_t.ON_USER_ONLINE,{uid:s.uid}),s.audio&&this.emit(_t.ON_ADD_AUDIO_STREAM,{uid:s.uid,uint_id:s.uint_id,audio:!0,ssrcId:s.audio_ssrc}),s.video&&this.emit(_t.ON_ADD_VIDEO_STREAM,{uid:s.uid,uint_id:s.uint_id,video:!0,ssrcId:s.video_ssrc}),s.audio_mute?this.emit(_t.MUTE_AUDIO,{uid:s.uid}):this.emit(_t.UNMUTE_AUDIO,{uid:s.uid}),s.video_mute?this.emit(_t.MUTE_VIDEO,{uid:s.uid}):this.emit(_t.UNMUTE_VIDEO,{uid:s.uid}),s.audio_enable_local?this.emit(_t.ENABLE_LOCAL_AUDIO,{uid:s.uid}):this.emit(_t.DISABLE_LOCAL_AUDIO,{uid:s.uid}),s.video_enable_local?this.emit(_t.ENABLE_LOCAL_VIDEO,{uid:s.uid}):this.emit(_t.DISABLE_LOCAL_VIDEO,{uid:s.uid}),s.audio||s.video||this.emit(_t.ON_REMOVE_STREAM,{uid:s.uid,uint_id:s.uint_id})}),!0)}reconnect(r,o){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.websocket.reconnect(r,o)}handleNotification(r){U.debug("[".concat(this.clientId,"] receive notification: "),r);const o=Up(r.code);if(o.action!=="success"){if(o.action!=="failed")return o.action==="quit"?(o.desc==="ERR_REPEAT_JOIN_CHANNEL"&&this.close(Wt.UID_BANNED),void this.close()):void this.reconnect(o.action,Ls.SERVER_ERROR);U.error("[".concat(this.clientId,"] ignore error: "),o.desc)}}handlePingPong(){if(!this.websocket||this.websocket.state!=="connected")return;this.pingpongTimeoutCount>0&&this.rttRolling.add(3e3),this.pingpongTimeoutCount+=1;const r=ie("PING_PONG_TIME_OUT"),o=Date.now();this.pingpongTimeoutCount>=r&&(U.warning("PINGPONG Timeout. Last Socket Message: ".concat(o-this.lastMsgTime,"ms")),o-this.lastMsgTime>ie("WEBSOCKET_TIMEOUT_MIN"))?this.reconnect("retry",Ls.TIMEOUT):this.request(Je.PING,void 0,!0).then(()=>{this.pingpongTimeoutCount=0;const s=Date.now()-o;this.rttRolling.add(s),ie("REPORT_STATS")&&this.send(Je.PING_BACK,{pingpongElapse:s})}).catch(s=>{})}handleInflateData(){const{inflateLength:r,deflateLength:o}=this.websocket.getInflateData();r!==0&&o!==0&&this.upload(go.WS_INFLATE_DATA_LENGTH,{ws_deflate_length:o,ws_inflate_length:r})}handleWebsocketEvents(){this.websocket.on(Dn.RECONNECT_WAITTING_FINISH,r=>{this.emit(Be.WS_RECONNECT_WAITTING_FINISH,r)}),this.websocket.on(Dn.RECONNECT_CREATE_CONNECTION,r=>{this.emit(Be.WS_RECONNECT_CREATE_CONNECTION,r)}),this.websocket.on(Dn.ON_MESSAGE,this.onWebsocketMessage),this.websocket.on(Dn.CLOSED,()=>{this.connectionState=Zt.CLOSED}),this.websocket.on(Dn.FAILED,()=>{this._disconnectedReason=Wt.NETWORK_ERROR,this.connectionState=Zt.CLOSED}),this.websocket.on(Dn.RECONNECTING,r=>{this._websocketReconnectReason=r,this.joinResponse=void 0,this.connectionState===Zt.CONNECTED?this.connectionState=Zt.RECONNECTING:this.connectionState=Zt.CONNECTING}),this.websocket.on(Dn.WILL_RECONNECT,(r,o)=>{if(fu(this,Be.IS_P2P_DISCONNECTED)&&r==="retry")return U.debug("".concat(this.clientId," reconnect mode is retry, but p2p lost, change to tryNext")),this.reconnectToken=void 0,this.emit(Be.NEED_RENEW_SESSION),this.emit(Be.DISCONNECT_P2P),o("tryNext");r!=="retry"&&(U.debug("".concat(this.clientId," websockt will_connect event, renewSession reconnectMode is ").concat(r)),this.reconnectToken=void 0,this.emit(Be.NEED_RENEW_SESSION),this.emit(Be.DISCONNECT_P2P)),o(r)}),this.websocket.on(Dn.CONNECTED,()=>{this.openConnectionTime=Date.now(),this.reconnectToken?this.rejoin().catch(r=>{U.warning("[".concat(this.clientId,"] rejoin failed ").concat(r)),this.reconnect("tryNext",Ls.SERVER_ERROR)}):this.join().catch(r=>{if(this.emit(Be.REPORT_JOIN_GATEWAY,r.message||r.code,this.url||""),r instanceof Q&&r.code===W.UNEXPECTED_RESPONSE&&r.data.code===Ke.ERR_NO_AUTHORIZED)return U.warning("[".concat(this.clientId,"] reconnect no authorized, recover")),void this.reconnect("recover",Ls.SERVER_ERROR);U.error("[".concat(this.clientId,"] join gateway request failed"),r.toString()),this.spec.forceWaitGatewayResponse?this.reconnect("tryNext",Ls.SERVER_ERROR):(this.initError=r,this.close())})}),this.websocket.on(Dn.REQUEST_NEW_URLS,(r,o)=>{ri(this,Be.REQUEST_RECOVER,this.multiIpOption).then(r).catch(o)}),this.websocket.on(Dn.ON_TOKEN_PRIVILEGE_DID_EXPIRE,()=>{this.emit(_t.ON_TOKEN_PRIVILEGE_DID_EXPIRE)}),this.websocket.on(Dn.TO_CONNECT_DATACHANNEL,async(r,o,s)=>ri(this,Be.DATACHANNEL_PRECONNECT,r).then(o).catch(s)),this.websocket.on(Dn.FAILBACK,()=>{this.openConnectionTime!==void 0&&this.emit(Be.DATACHANNEL_FAILBACK)})}}function ZD(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function js(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?ZD(Object(o),!0).forEach(function(s){N(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):ZD(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}const sC=new Map;class OX extends Rn{get state(){return this._state}set state(r){if(r===this._state)return;const o=this._state;this._state=r,r==="DISCONNECTED"&&this._disconnectedReason?this.emit(Tn.CONNECTION_STATE_CHANGE,r,o,this._disconnectedReason):this.emit(Tn.CONNECTION_STATE_CHANGE,r,o)}get joinGatewayStartTime(){return this._joinGatewayStartTime}set joinGatewayStartTime(r){U.debug("[".concat(this.store.clientId,"] set joinGatewayStartTime at ").concat(r)),this._joinGatewayStartTime=r}constructor(r,o){super(),N(this,"store",void 0),N(this,"joinInfo",void 0),N(this,"key",void 0),N(this,"signal",void 0),N(this,"role",void 0),N(this,"inChannelInfo",{joinAt:null,duration:0}),N(this,"spec",void 0),N(this,"_state","DISCONNECTED"),N(this,"_statsCollector",void 0),N(this,"_disconnectedReason",void 0),N(this,"isSignalRecover",!1),N(this,"hasChangeBGPAddress",!1),N(this,"trafficStatsInterval",void 0),N(this,"networkQualityInterval",void 0),N(this,"_joinGatewayStartTime",0),N(this,"_signalTimeout",!1),N(this,"_clientRoleOptions",void 0),N(this,"_isProactiveJoin",!1),this.store=r,this.spec=o,this.signal=this.store.useDataChannel?new hc(js(js({},o),{},{retryConfig:o.websocketRetryConfig}),r):new YD(js(js({},o),{},{retryConfig:o.websocketRetryConfig}),r),this._statsCollector=o.statsCollector,this.role=o.role||"audience",this._clientRoleOptions=o.clientRoleOptions,this.handleSignalEvents()}async join(r,o,s){if(this.signal instanceof hc){let E=!1;r.cloudProxyServer!=="disabled"?(U.debug("[".concat(this.store.clientId,"] Dc is not supported, because cloudProxyServer are not supported (").concat(r.cloudProxyServer,")")),E=!0):"".concat(r.apResponse.cid,"_").concat(r.apResponse.cert).length>255||"".concat(r.apResponse.cid,"_").concat(r.apResponse.cert).length<22?(U.debug("[".concat(this.store.clientId,"] Dc is not supported, because ticket length is incorrect, it has to be between 22 and 255")),E=!0):r.apResponse.addresses.some(T=>T.fingerprint)||ie("FINGERPRINT")||(U.debug("[".concat(this.store.clientId,"] Dc is not supported, because fingerprint does not exist")),E=!0),E&&this.resetSignal()}this.store.joinGatewayStart(),r.cloudProxyServer!=="disabled"&&(this.hasChangeBGPAddress=!0);const l=Date.now();let h=sC.get(r.cname);if(h||(h=new Map,sC.set(r.cname,h)),this._isProactiveJoin=!0,h.has(r.uid)){const E=new Q(W.UID_CONFLICT);throw Me.joinGateway(r.sid,{lts:l,succ:!1,ec:E.message,addr:null,uid:r.uid,cid:r.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!r.proxyServer,signalChannel:this.signal instanceof hc?"1":"0"}),this._isProactiveJoin=!1,E}h.set(r.uid,!0),this.joinInfo=r,this.key=o;let p=0;this.joinGatewayStartTime=l;const v=r.proxyServer;try{let E;if(U.debug("[".concat(this.store.clientId,"] use ").concat(this.signal instanceof hc?"datachannel":"websocket"," join uid ").concat(p)),this.signal instanceof hc)E=await this.signal.init(r.apResponse.addresses,s);else{const T=r.proxyServer,C=T?r.gatewayAddrs.map(I=>{const L=I.address.split(":");return"wss://".concat(T,"/ws/?h=").concat(L[0],"&p=").concat(L[1])}):r.gatewayAddrs.map(I=>"wss://".concat(I.address));E=await this.signal.init(C,s)}p=E.uid,U.debug("[".concat(this.store.clientId,"] ").concat(this.signal instanceof hc?"datachannel":"websocket"," join uid ").concat(p," cost ").concat(Date.now()-this.joinGatewayStartTime))}catch(E){throw E&&E.code===W.INIT_WEBSOCKET_TIMEOUT?(U.warning("[".concat(this.store.clientId,"] User join failed"),E.toString()),E):E&&E.code===W.INIT_DATACHANNEL_TIMEOUT?(U.warning("[".concat(this.store.clientId,"] User join datachannel failed"),E.toString()),this.resetSignal(),E):(U.error("[".concat(this.store.clientId,"] User join failed"),E.toString()),Me.joinGateway(r.sid,{lts:l,succ:!1,ec:E.message,addr:this.signal.url,uid:r.uid,cid:r.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!v,signalChannel:this.signal instanceof hc?"1":"0"}),this._isProactiveJoin=!1,h.delete(r.uid),this.signal.close(),E)}return this.state="CONNECTED",this.inChannelInfo.joinAt=Date.now(),U.debug("[".concat(this.store.clientId,"] Connected to gateway server")),this.trafficStatsInterval=window.setInterval(()=>{this.updateTrafficStats().catch(E=>{U.warning("[".concat(this.store.clientId,"] get traffic stats error"),E.toString())})},3e3),this.networkQualityInterval=window.setInterval(()=>{navigator&&navigator.onLine!==void 0&&!navigator.onLine?this.emit(Tn.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6}):this._signalTimeout?this.emit(Tn.NETWORK_QUALITY,{downlinkNetworkQuality:5,uplinkNetworkQuality:5}):this.state==="CONNECTED"&&this._statsCollector.trafficStats?this.emit(Tn.NETWORK_QUALITY,{uplinkNetworkQuality:jD(this._statsCollector.trafficStats.B_unq),downlinkNetworkQuality:jD(this._statsCollector.trafficStats.B_dnq)}):this.emit(Tn.NETWORK_QUALITY,{uplinkNetworkQuality:0,downlinkNetworkQuality:0})},2e3),this.store.joinGatewayEnd(),p}async leave(){let r=arguments.length>0&&arguments[0]!==void 0&&arguments[0],o=arguments.length>1?arguments[1]:void 0;if(this.state!=="DISCONNECTED"){o!==Wt.FALLBACK&&(this.state="DISCONNECTING");try{r||this.signal.connectionState!==Zt.CONNECTED||await function(s,l){return l===1/0?s:xe.race([s,bX(l)])}(this.signal.request(Je.LEAVE,void 0,!0),3e3)}catch(s){U.warning("[".concat(this.store.clientId,"] leave request failed, ignore"),s)}this.signal.close(o),o!==Wt.FALLBACK&&(this.state="DISCONNECTED"),this.reset()}}async publish(r,o,s){if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new Q(W.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));const l={state:"offer",p2p_id:this.store.p2pId,ortc:o,mode:this.spec.mode,extend:ie("PUB_EXTEND"),twcc:!!ie("PUBLISH_TWCC"),rtx:!!ie("USE_PUB_RTX")};try{return(await this.signal.request(Je.PUBLISH,l,!0))._message}catch(h){if(s&&h.data&&h.data.code===Ke.ERR_PUBLISH_REQUEST_INVALID)return U.warning("[".concat(this.store.clientId,"] receive publish error code, retry"),h.toString()),await this.tryUnpubBeforeRepub(r,o),this.publish(r,o,!1);throw h}}async unpublish(r,o){try{if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new Q(W.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));await this.signal.request(Je.UNPUBLISH,{stream_id:o,ortc:r},!0)}catch(s){U.warning("[".concat(this.store.clientId,"] unpublish warning: "),s)}}async subscribe(r,o,s){if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new Q(W.INVALID_OPERATION,"can not subscribe when connection state is ".concat(this.state));const l={stream_id:r,stream_type:o.stream_type,mode:this.spec.mode,codec:this.spec.codec,p2p_id:this.store.p2pId,twcc:!!ie("SUBSCRIBE_TWCC"),rtx:!!ie("USE_SUB_RTX"),extend:ie("SUB_EXTEND"),ssrcId:o.ssrcId,svc:Array.isArray(ie("SVC"))&&ie("SVC").length!==0?ie("SVC"):void 0};try{return(await this.signal.request(Je.SUBSCRIBE,l,!0))._message}catch(h){if(s&&h.data&&h.data.code===Ke.ERR_SUBSCRIBE_REQUEST_INVALID)return U.warning("[".concat(this.store.clientId,"] receiver subscribe error code, retry"),h.toString()),await this.tryUnsubBeforeResub(r,o),await this.subscribe(r,o,!1);throw h}}async subscribeAll(r,o){if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new Q(W.INVALID_OPERATION,"can not massSubscribe when connection state is ".concat(this.state));const s={p2p_id:this.store.p2pId,users:r,dtx:!1,rtx:!!ie("USE_SUB_RTX")};try{return await this.signal.request(Je.SUBSCRIBE_STREAMS,s,!0)}catch(l){if(o&&l.data&&l.data.code===Ke.ERR_SUBSCRIBE_REQUEST_INVALID)return U.warning("[".concat(this.store.clientId,"] receiver massSubscribe error code, retry"),l.toString()),await this.tryMassUnsubBeforeResub(r),await this.subscribeAll(r,!1);throw l}}async setVideoProfile(r){const o=function(s){if(!(s.bitrateMax&&s.bitrateMin&&s.frameRate&&s.height&&s.width))return;let l=s.frameRate,h=s.width,p=s.height,v=!0;return typeof l!="number"&&(l=l.exact||l.ideal||l.max||l.min||0,l||(v=!1)),typeof h!="number"&&(h=h.exact||h.ideal||h.max||h.min||0,h||(v=!1)),typeof p!="number"&&(p=p.exact||p.ideal||p.max||p.min||0,l||(v=!1)),v?{stream_type:0,width:h,height:p,fps:l,start_bps:1e3*s.bitrateMax,min_bps:1e3*s.bitrateMin,target_bps:1e3*s.bitrateMax}:void 0}(r);if(o)return this.signal.request(Je.SET_VIDEO_PROFILE,o);U.debug("[".concat(this.store.clientId,"] encoder config is not complete, do not report to gateway"))}async unsubscribe(r,o){try{await this.signal.request(Je.UNSUBSCRIBE,{p2p_id:this.store.p2pId,ortc:r,stream_id:o},!0)}catch(s){U.warning("[".concat(this.store.clientId,"] unsubscribe warning: "),s)}}async massUnsubscribe(r){try{await this.signal.request(Je.UNSUBSCRIBE_STREAMS,r,!0)}catch(o){U.warning("[".concat(this.store.clientId,"] massUnsubscribeAll warning: "),o)}}async reconnectPC(r){const{iceParameters:o,dtlsParameters:s,rtpCapabilities:l}=r;return{gatewayEstablishParams:await this.signal.request(Je.CONNECT_PC,{p2p_id:this.store.p2pId,stream_id:this.store.uid,ortc:{iceParameters:o,dtlsParameters:s,rtpCapabilities:l}},!0),gatewayAddress:this.getCurrentGatewayAddress()}}getGatewayInfo(){return this.signal.request(Je.GATEWAY_INFO)}async renewToken(r){await this.signal.request(Je.RENEW_TOKEN,r),this.key=r.token}async setClientRole(r,o){if(o&&(this._clientRoleOptions=Object.assign({},o)),this.state!=="CONNECTED")return void(this.role=r);let s;s=r==="audience"?this._clientRoleOptions&&this._clientRoleOptions.level?this._clientRoleOptions.level:2:0,await this.signal.request(Je.SET_CLIENT_ROLE,{role:r,level:s,client_ts:Date.now()}),this.role=r}async setRemoteVideoStreamType(r,o){await this.signal.request(Je.SWITCH_VIDEO_STREAM,{stream_id:r,stream_type:o})}async setDefaultRemoteVideoStreamType(r){await this.signal.request(Je.DEFAULT_VIDEO_STREAM,{stream_type:r})}async setStreamFallbackOption(r,o){await this.signal.request(Je.SET_FALLBACK_OPTION,{stream_id:r,fallback_type:o})}async pickSVCLayer(r,o){await this.signal.request(Je.PICK_SVC_LAYER,{stream_id:r,spatial_layer:o.spatialLayer,temporal_layer:o.temporalLayer})}getInChannelInfo(){return this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=Date.now()-this.inChannelInfo.joinAt),js({},this.inChannelInfo)}async getGatewayVersion(){return(await this.signal.request(Je.GATEWAY_INFO)).version}reset(){if(this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=Date.now()-this.inChannelInfo.joinAt,this.inChannelInfo.joinAt=null),this.trafficStatsInterval&&(window.clearInterval(this.trafficStatsInterval),this.trafficStatsInterval=void 0),this.joinInfo){const r=sC.get(this.joinInfo.cname);r&&r.delete(this.joinInfo.uid)}this.joinInfo=void 0,this.key=void 0,this.networkQualityInterval&&(window.clearInterval(this.networkQualityInterval),this.networkQualityInterval=void 0)}updateTurnConfigFromSignal(){if(!this.joinInfo)return;const r=function(o){let s;return s=o.startsWith("dc")?o.match(/(dc\:\/\/)?([^:]+):(\d+)/):o.match(/(wss\:\/\/)?([^:]+):(\d+)/),s?{username:No.username,password:No.password,turnServerURL:s[2],tcpport:parseInt(s[3])+30,udpport:parseInt(s[3])+30,forceturn:!1}:null}((this.joinInfo.cloudProxyServer==="disabled"?this.signal.url:this.joinInfo.gatewayAddrs[this.signal.currentURLIndex].address)||"");this.joinInfo.turnServer.serversFromGateway=[],r&&this.joinInfo.turnServer.mode!=="off"&&this.joinInfo.cloudProxyServer==="disabled"&&this.joinInfo.turnServer.serversFromGateway.push(js(js({},No),{},{turnServerURL:r.turnServerURL,tcpport:r.tcpport,udpport:r.udpport,username:this.joinInfo.uid.toString(),password:this.joinInfo.token}))}async updateTrafficStats(){if(this.state!=="CONNECTED")return;const r=await this.signal.request(Je.TRAFFIC_STATS,void 0,!0);r.timestamp=Date.now(),r.peer_delay.forEach(o=>{const s=this._statsCollector.trafficStats&&this._statsCollector.trafficStats.peer_delay.find(l=>l.peer_uid===o.peer_uid);s&&s.B_st!==o.B_st&&os(()=>{this.emit(Tn.STREAM_TYPE_CHANGE,o.peer_uid,o.B_st)})}),this._statsCollector.updateTrafficStats(r)}getJoinMessage(r){if(!this.joinInfo||!this.key)throw new Q(W.UNEXPECTED_ERROR,"can not generate join message, no join info");const o=Object.assign({},this.joinInfo.apResponse);let s=ie("REPORT_APP_SCENARIO");if(typeof s!="string")try{s=JSON.stringify(s)}catch{s=void 0}s&&s.length>128&&(s=void 0);const l=js({license:this.joinInfo.license,p2p_id:this.store.p2pId,session_id:this.joinInfo.sid,app_id:this.joinInfo.appId,channel_key:this.key,channel_name:this.joinInfo.cname,sdk_version:ta,browser:navigator.userAgent,process_id:ie("PROCESS_ID"),mode:this.spec.mode,codec:this.spec.codec,role:this.role,has_changed_gateway:this.hasChangeBGPAddress,ap_response:o,extend:ie("JOIN_EXTEND"),details:{6:this.joinInfo.stringUid,cservice_map:this.joinInfo.cloudProxyServer==="proxy3"?"1":this.joinInfo.cloudProxyServer==="proxy5"?"2":void 0},features:{rejoin:!0},optionalInfo:this.joinInfo.optionalInfo,appScenario:s,attributes:{userAttributes:{enablePublishedUserList:ie("ENABLE_PUBLISHED_USER_LIST"),maxSubscription:ie("MAX_SUBSCRIPTION"),subscribeAudioFilterTopN:typeof ie("SUBSCRIBE_AUDIO_FILTER_TOPN")=="number"?ie("SUBSCRIBE_AUDIO_FILTER_TOPN"):void 0,enablePublishAudioFilter:typeof ie("ENABLE_PUBLISH_AUDIO_FILTER")=="boolean"?ie("ENABLE_PUBLISH_AUDIO_FILTER"):void 0,enableUserLicenseCheck:typeof ie("ENABLE_USER_LICENSE_CHECK")=="boolean"?ie("ENABLE_USER_LICENSE_CHECK"):void 0,enableRTX:ie("USE_PUB_RTX")===!0||ie("USE_SUB_RTX")===!0||void 0}},join_ts:this.joinGatewayStartTime},r);return this.joinInfo.stringUid&&(l.string_uid=this.joinInfo.stringUid),this.joinInfo.aesmode&&this.joinInfo.aespassword&&(l.aes_mode=this.joinInfo.aesmode,ie("ENCRYPT_AES")?(l.aes_secret=this.joinInfo.aespassword,l.aes_encrypt=!0):l.aes_secret=this.joinInfo.aespassword,this.joinInfo.aessalt&&(l.aes_salt=this.joinInfo.aessalt)),o.addresses[this.signal.websocket.currentURLIndex]&&(l.ap_response.ticket=o.addresses[this.signal.websocket.currentURLIndex].ticket,delete o.addresses),this.joinInfo.defaultVideoStream!==void 0&&(l.default_video_stream=this.joinInfo.defaultVideoStream),l}getRejoinMessage(){if(!this.joinInfo)throw new Q(W.UNEXPECTED_ERROR,"can not generate rejoin message, no join info");return{session_id:this.joinInfo.sid,channel_name:this.joinInfo.cname,cid:this.joinInfo.cid,uid:this.joinInfo.uid,vid:Number(this.joinInfo.vid)}}handleSignalEvents(){this.signal.on(Be.WS_RECONNECT_WAITTING_FINISH,r=>{["tryNext","recover"].includes(r)&&this.joinInfo&&Me.adjustSessionStartTime(this.joinInfo.sid)}),this.signal.on(Be.WS_RECONNECT_CREATE_CONNECTION,r=>{this.joinGatewayStartTime=Date.now()}),this.signal.on(Be.WS_RECONNECTING,r=>{this.joinInfo&&Me.WebSocketQuit(this.joinInfo.sid,{lts:Date.now(),succ:-1,cname:this.joinInfo.cname,uid:this.joinInfo.uid,cid:this.joinInfo.cid,errorCode:r||Mi.NETWORK_ERROR}),this.joinInfo&&(this.state="RECONNECTING",Me.sessionInit(this.joinInfo.sid,{lts:new Date().getTime(),extend:this.isSignalRecover?{recover:!0}:{rejoin:!0},cname:this.joinInfo.cname,appid:this.joinInfo.appId,mode:this.spec.mode}),this.isSignalRecover=!1,this.joinGatewayStartTime=Date.now())}),this.signal.on(Be.WS_CLOSED,r=>{let o;switch(r){case Wt.LEAVE:o=Mi.LEAVE;break;case Wt.UID_BANNED:case Wt.IP_BANNED:case Wt.CHANNEL_BANNED:case Wt.SERVER_ERROR:o=Mi.SERVER_ERROR;break;case Wt.FALLBACK:o=Mi.FALLBACK;break;case Wt.LICENSE_MISSING:case Wt.LICENSE_EXPIRED:case Wt.LICENSE_MINUTES_EXCEEDED:case Wt.LICENSE_PERIOD_INVALID:case Wt.LICENSE_MULTIPLE_SDK_SERVICE:case Wt.LICENSE_ILLEGAL:o=r;break;default:o=Mi.NETWORK_ERROR}U.debug("[".concat(this.store.clientId,"] [signal] websocket closed, reason: ").concat(o||"undefined -> "+Mi.NETWORK_ERROR)),this.joinInfo&&Me.WebSocketQuit(this.joinInfo.sid,{lts:Date.now(),succ:r===Wt.LEAVE?1:-1,cname:this.joinInfo.cname,uid:this.joinInfo.uid,cid:this.joinInfo.cid,errorCode:o}),this._disconnectedReason=r,r!==Wt.FALLBACK&&(this.state="DISCONNECTED"),this.reset()}),this.signal.on(Be.WS_CONNECTED,()=>{if(this.updateTurnConfigFromSignal(),this.state="CONNECTED",this.joinInfo&&(this.role==="audience"&&this._clientRoleOptions&&this._clientRoleOptions.level&&(U.debug("[".concat(this.store.clientId,"] patch to send set client role, role: ").concat(this.role,", mode: ").concat(this.spec.mode,", level: ").concat(this._clientRoleOptions&&this._clientRoleOptions.level)),this.setClientRole(this.role,this._clientRoleOptions)),Me.joinGateway(this.joinInfo.sid,{lts:this.joinGatewayStartTime,succ:!0,ec:null,vid:this.joinInfo.vid,addr:this.signal.url,uid:this.joinInfo.uid,cid:this.joinInfo.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!this.joinInfo.proxyServer,signalChannel:this.signal instanceof hc?"1":"0"}),this._isProactiveJoin=!1,this.joinInfo.useLocalAccessPoint&&this.joinInfo.setLocalAPVersion===1)){const r=this.signal.url&&this.signal.url.match(/wss\:\/\/([^:]+):(\d+)/);if(!r)return void U.error("[".concat(this.store.clientId,"] set local access point after joined failed: ").concat(r));rn("EVENT_REPORT_DOMAIN",r[1]),rn("EVENT_REPORT_BACKUP_DOMAIN",r[1]),rn("LOG_UPLOAD_SERVER","".concat(r[1],":6444"))}}),this.signal.on(_t.ON_UPLINK_STATS,r=>{this._statsCollector.updateUplinkStats(r)}),this.signal.on(Be.REQUEST_RECOVER,(r,o,s)=>{if(!this.joinInfo)return s(new Q(W.UNEXPECTED_ERROR,"gateway: can not recover, no join info"));r&&(this.joinInfo.multiIP=r,this.hasChangeBGPAddress=!0),this.isSignalRecover=!0,ri(this,Tn.REQUEST_NEW_GATEWAY_LIST).then(o).catch(s)}),this.signal.on(Be.REQUEST_JOIN_INFO,async r=>{var o;this.updateTurnConfigFromSignal();const{iceParameters:s,dtlsParameters:l,rtpCapabilities:h}=await ri(this,Tn.REQUEST_P2P_CONNECTION_PARAMS,{turnServer:(o=this.joinInfo)===null||o===void 0?void 0:o.turnServer});r(this.getJoinMessage({ortc:{iceParameters:s,dtlsParameters:l,rtpCapabilities:h,version:"2"}}))}),this.signal.on(Be.REQUEST_REJOIN_INFO,r=>{r(this.getRejoinMessage())}),this.signal.on(Be.REPORT_JOIN_GATEWAY,(r,o)=>{this.joinInfo&&(Me.joinGateway(this.joinInfo.sid,{lts:this.joinGatewayStartTime,succ:!1,ec:r,addr:o,uid:this.joinInfo.uid,cid:this.joinInfo.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!this.joinInfo.proxyServer,signalChannel:this.signal instanceof hc?"1":"0"}),this._isProactiveJoin=!1)}),this.signal.on(Be.IS_P2P_DISCONNECTED,r=>{r(fu(this,Tn.IS_P2P_DISCONNECTED))}),this.signal.on(Be.DISCONNECT_P2P,()=>{this.emit(Tn.DISCONNECT_P2P)}),this.signal.on(Be.NEED_RENEW_SESSION,()=>{this.emit(Tn.NEED_RENEW_SESSION)}),this.signal.on(Be.REQUEST_SUCCESS,()=>{this._signalTimeout=!1}),this.signal.on(Be.REQUEST_TIMEOUT,()=>{this._signalTimeout=!0}),this.signal.on(Be.JOIN_RESPONSE,r=>{const o=this.getCurrentGatewayAddress();this.emit(Tn.JOIN_RESPONSE,r,o)}),this.signal.on(Be.DATACHANNEL_PRECONNECT,async(r,o,s)=>{this.updateTurnConfigFromSignal();const l=this.getCurrentGatewayAddress();return ri(this,Tn.DATACHANNEL_PRECONNECT,r,l).then(o).catch(s)}),this.signal.on(Be.DATACHANNEL_CONNECTING,async r=>{const{iceParameters:o,dtlsParameters:s,rtpCapabilities:l}=await ri(this,Tn.REQUEST_DC_CONNECTION_PARAMS);r(this.getJoinMessage({ortc:{iceParameters:o,dtlsParameters:s,rtpCapabilities:l,version:"2"}}))}),this.signal.on(Be.DATACHANNEL_FAILBACK,()=>{U.warning("[".concat(this.store.clientId,"] User join datachannel failed")),this.reset(),this.resetSignal(),this.emit(Tn.DATACHANNEL_FAILBACK)})}async tryUnsubBeforeResub(r,o){try{await this.signal.request(Je.UNSUBSCRIBE,{p2p_id:this.store.p2pId,stream_id:r,ortc:[o]},!0)}catch(s){throw U.warning("[".concat(this.store.clientId,"] tryUnsubBeforeResub warning"),s),s}}async tryUnpubBeforeRepub(r,o){try{await this.signal.request(Je.UNPUBLISH,{stream_id:r,ortc:o},!0)}catch(s){throw U.warning("[".concat(this.store.clientId,"] tryUnpubBeforeRepub warning: "),s),s}}async tryMassUnsubBeforeResub(r){const o={users:r.map(s=>({stream_id:s.stream_id,stream_type:s.stream_type}))};try{await this.signal.request(Je.UNSUBSCRIBE_STREAMS,o,!0)}catch(s){throw U.warning("[".concat(this.store.clientId,"] tryMassUnsubBeforeResub warning"),s),s}}async muteLocal(r,o){const s={action:r.find(l=>l.stream_type===cr.Audio)?"mute_local_audio":"mute_local_video",p2p_id:this.store.p2pId,ortc:r,stream_id:o};try{await this.signal.request(Je.CONTROL,s,!0,!0)}catch(l){throw U.warning("[".concat(this.store.clientId,"] gateway muteLocal warning: "),l),l}}async unmuteLocal(r,o){const s={action:r.find(l=>l.stream_type===cr.Audio)?"unmute_local_audio":"unmute_local_video",p2p_id:this.store.p2pId,ortc:r,stream_id:o};try{await this.signal.request(Je.CONTROL,s,!0,!0)}catch(l){throw U.warning("[".concat(this.store.clientId,"] gateway unmuteLocal warning: "),l),l}}uploadStats(r,o){this.signal.upload(r,o)}getSignalRTT(){return this.signal.rtt}async restartICE(r){const o={p2p_id:this.store.p2pId,stream_id:this.store.uid,ortc:r};try{return await this.signal.request(Je.RESTART_ICE,o,!0)}catch(s){throw U.warning("[".concat(this.store.clientId,"] P2PChannel.restartICE warning: "),s),s}}reconnect(){this.state==="CONNECTED"&&this.signal.reconnect(void 0,Mi.P2P_FAILED)}getCurrentGatewayAddress(){var r;if(!ie("GATEWAY_WSS_ADDRESS"))return(r=this.joinInfo)!==null&&r!==void 0&&r.gatewayAddrs?this.joinInfo.gatewayAddrs[this.signal.currentURLIndex]:void 0}async setPublishAudioFilterEnabled(r){await this.signal.request(Je.SET_PARAMETER,{enablePublishAudioFilter:r})}resetSignal(){this.signal&&(this.signal.removeAllListeners(),this.signal.close(Wt.FALLBACK)),this.store.useDataChannel=!1,this.signal=new YD(js(js({},this.spec),{},{retryConfig:this.spec.websocketRetryConfig}),this.store),this.handleSignalEvents(),this.emit(Tn.RESET_SIGNAL,U0.websocket)}}/*! formdata-polyfill. MIT License. Jimmy W?rting <https://jimmy.warting.se/opensource> */(function(){var n;function r(ge){var Ce=0;return function(){return Ce<ge.length?{done:!1,value:ge[Ce++]}:{done:!0}}}var o=typeof Object.defineProperties=="function"?Object.defineProperty:function(ge,Ce,Ne){return ge==Array.prototype||ge==Object.prototype||(ge[Ce]=Ne.value),ge},s,l=function(ge){ge=[typeof globalThis=="object"&&globalThis,ge,typeof window=="object"&&window,typeof self=="object"&&self,typeof a=="object"&&a];for(var Ce=0;Ce<ge.length;++Ce){var Ne=ge[Ce];if(Ne&&Ne.Math==Math)return Ne}throw Error("Cannot find global object")}(this);function h(ge,Ce){if(Ce)e:{var Ne=l;ge=ge.split(".");for(var et=0;et<ge.length-1;et++){var Ut=ge[et];if(!(Ut in Ne))break e;Ne=Ne[Ut]}(Ce=Ce(et=Ne[ge=ge[ge.length-1]]))!=et&&Ce!=null&&o(Ne,ge,{configurable:!0,writable:!0,value:Ce})}}function p(ge){return(ge={next:ge})[Symbol.iterator]=function(){return this},ge}function v(ge){var Ce=typeof Symbol<"u"&&Symbol.iterator&&ge[Symbol.iterator];return Ce?Ce.call(ge):{next:r(ge)}}if(h("Symbol",function(ge){function Ce(Ut,Re){this.A=Ut,o(this,"description",{configurable:!0,writable:!0,value:Re})}if(ge)return ge;Ce.prototype.toString=function(){return this.A};var Ne="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",et=0;return function Ut(Re){if(this instanceof Ut)throw new TypeError("Symbol is not a constructor");return new Ce(Ne+(Re||"")+"_"+et++,Re)}}),h("Symbol.iterator",function(ge){if(ge)return ge;ge=Symbol("Symbol.iterator");for(var Ce="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),Ne=0;Ne<Ce.length;Ne++){var et=l[Ce[Ne]];typeof et=="function"&&typeof et.prototype[ge]!="function"&&o(et.prototype,ge,{configurable:!0,writable:!0,value:function(){return p(r(this))}})}return ge}),typeof Object.setPrototypeOf=="function")s=Object.setPrototypeOf;else{var E;e:{var T={};try{T.__proto__={a:!0},E=T.a;break e}catch{}E=!1}s=E?function(ge,Ce){if(ge.__proto__=Ce,ge.__proto__!==Ce)throw new TypeError(ge+" is not extensible");return ge}:null}var C=s;function I(){this.m=!1,this.j=null,this.v=void 0,this.h=1,this.u=this.C=0,this.l=null}function L(ge){if(ge.m)throw new TypeError("Generator is already running");ge.m=!0}function V(ge,Ce){return ge.h=3,{value:Ce}}function Y(ge){this.g=new I,this.G=ge}function q(ge,Ce,Ne,et){try{var Ut=Ce.call(ge.g.j,Ne);if(!(Ut instanceof Object))throw new TypeError("Iterator result "+Ut+" is not an object");if(!Ut.done)return ge.g.m=!1,Ut;var Re=Ut.value}catch(k){return ge.g.j=null,ge.g.s(k),X(ge)}return ge.g.j=null,et.call(ge.g,Re),X(ge)}function X(ge){for(;ge.g.h;)try{var Ce=ge.G(ge.g);if(Ce)return ge.g.m=!1,{value:Ce.value,done:!1}}catch(Ne){ge.g.v=void 0,ge.g.s(Ne)}if(ge.g.m=!1,ge.g.l){if(Ce=ge.g.l,ge.g.l=null,Ce.F)throw Ce.D;return{value:Ce.return,done:!0}}return{value:void 0,done:!0}}function le(ge){this.next=function(Ce){return ge.o(Ce)},this.throw=function(Ce){return ge.s(Ce)},this.return=function(Ce){return function(Ne,et){L(Ne.g);var Ut=Ne.g.j;return Ut?q(Ne,"return"in Ut?Ut.return:function(Re){return{value:Re,done:!0}},et,Ne.g.return):(Ne.g.return(et),X(Ne))}(ge,Ce)},this[Symbol.iterator]=function(){return this}}function he(ge,Ce){return Ce=new le(new Y(Ce)),C&&ge.prototype&&C(Ce,ge.prototype),Ce}if(I.prototype.o=function(ge){this.v=ge},I.prototype.s=function(ge){this.l={D:ge,F:!0},this.h=this.C||this.u},I.prototype.return=function(ge){this.l={return:ge},this.h=this.u},Y.prototype.o=function(ge){return L(this.g),this.g.j?q(this,this.g.j.next,ge,this.g.o):(this.g.o(ge),X(this))},Y.prototype.s=function(ge){return L(this.g),this.g.j?q(this,this.g.j.throw,ge,this.g.o):(this.g.s(ge),X(this))},h("Array.prototype.entries",function(ge){return ge||function(){return function(Ce,Ne){Ce instanceof String&&(Ce+="");var et=0,Ut=!1,Re={next:function(){if(!Ut&&et<Ce.length){var k=et++;return{value:Ne(k,Ce[k]),done:!1}}return Ut=!0,{done:!0,value:void 0}}};return Re[Symbol.iterator]=function(){return Re},Re}(this,function(Ce,Ne){return[Ce,Ne]})}}),typeof Blob<"u"&&(typeof FormData>"u"||!FormData.prototype.keys)){var Se=function(ge,Ce){for(var Ne=0;Ne<ge.length;Ne++)Ce(ge[Ne])},De=function(ge){return ge.replace(/\r?\n|\r/g,`\r
`)},be=function(ge,Ce,Ne){return Ce instanceof Blob?(Ne=Ne!==void 0?Ne+"":typeof Ce.name=="string"?Ce.name:"blob",Ce.name===Ne&&Object.prototype.toString.call(Ce)!=="[object Blob]"||(Ce=new File([Ce],Ne)),[String(ge),Ce]):[String(ge),String(Ce)]},Te=function(ge,Ce){if(ge.length<Ce)throw new TypeError(Ce+" argument required, but only "+ge.length+" present.")},ye=typeof globalThis=="object"?globalThis:typeof window=="object"?window:typeof self=="object"?self:this,Oe=ye.FormData,Bt=ye.XMLHttpRequest&&ye.XMLHttpRequest.prototype.send,We=ye.Request&&ye.fetch,ln=ye.navigator&&ye.navigator.sendBeacon,en=ye.Element&&ye.Element.prototype,Yn=ye.Symbol&&Symbol.toStringTag;Yn&&(Blob.prototype[Yn]||(Blob.prototype[Yn]="Blob"),"File"in ye&&!File.prototype[Yn]&&(File.prototype[Yn]="File"));try{new File([],"")}catch{ye.File=function(Ce,Ne,et){return Ce=new Blob(Ce,et||{}),Object.defineProperties(Ce,{name:{value:Ne},lastModified:{value:+(et&&et.lastModified!==void 0?new Date(et.lastModified):new Date)},toString:{value:function(){return"[object File]"}}}),Yn&&Object.defineProperty(Ce,Yn,{value:"File"}),Ce}}var $r=function(ge){return ge.replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22")},Bn=function(ge){this.i=[];var Ce=this;ge&&Se(ge.elements,function(Ne){if(Ne.name&&!Ne.disabled&&Ne.type!=="submit"&&Ne.type!=="button"&&!Ne.matches("form fieldset[disabled] *"))if(Ne.type==="file"){var et=Ne.files&&Ne.files.length?Ne.files:[new File([],"",{type:"application/octet-stream"})];Se(et,function(Ut){Ce.append(Ne.name,Ut)})}else Ne.type==="select-multiple"||Ne.type==="select-one"?Se(Ne.options,function(Ut){!Ut.disabled&&Ut.selected&&Ce.append(Ne.name,Ut.value)}):Ne.type==="checkbox"||Ne.type==="radio"?Ne.checked&&Ce.append(Ne.name,Ne.value):(et=Ne.type==="textarea"?De(Ne.value):Ne.value,Ce.append(Ne.name,et))})};if((n=Bn.prototype).append=function(ge,Ce,Ne){Te(arguments,2),this.i.push(be(ge,Ce,Ne))},n.delete=function(ge){Te(arguments,1);var Ce=[];ge=String(ge),Se(this.i,function(Ne){Ne[0]!==ge&&Ce.push(Ne)}),this.i=Ce},n.entries=function ge(){var Ce,Ne=this;return he(ge,function(et){if(et.h==1&&(Ce=0),et.h!=3)return Ce<Ne.i.length?et=V(et,Ne.i[Ce]):(et.h=0,et=void 0),et;Ce++,et.h=2})},n.forEach=function(ge,Ce){Te(arguments,1);for(var Ne=v(this),et=Ne.next();!et.done;et=Ne.next()){var Ut=v(et.value);et=Ut.next().value,Ut=Ut.next().value,ge.call(Ce,Ut,et,this)}},n.get=function(ge){Te(arguments,1);var Ce=this.i;ge=String(ge);for(var Ne=0;Ne<Ce.length;Ne++)if(Ce[Ne][0]===ge)return Ce[Ne][1];return null},n.getAll=function(ge){Te(arguments,1);var Ce=[];return ge=String(ge),Se(this.i,function(Ne){Ne[0]===ge&&Ce.push(Ne[1])}),Ce},n.has=function(ge){Te(arguments,1),ge=String(ge);for(var Ce=0;Ce<this.i.length;Ce++)if(this.i[Ce][0]===ge)return!0;return!1},n.keys=function ge(){var Ce,Ne,et,Ut,Re=this;return he(ge,function(k){if(k.h==1&&(Ce=v(Re),Ne=Ce.next()),k.h!=3)return Ne.done?void(k.h=0):(et=Ne.value,Ut=v(et),V(k,Ut.next().value));Ne=Ce.next(),k.h=2})},n.set=function(ge,Ce,Ne){Te(arguments,2),ge=String(ge);var et=[],Ut=be(ge,Ce,Ne),Re=!0;Se(this.i,function(k){k[0]===ge?Re&&(Re=!et.push(Ut)):et.push(k)}),Re&&et.push(Ut),this.i=et},n.values=function ge(){var Ce,Ne,et,Ut,Re=this;return he(ge,function(k){if(k.h==1&&(Ce=v(Re),Ne=Ce.next()),k.h!=3)return Ne.done?void(k.h=0):(et=Ne.value,(Ut=v(et)).next(),V(k,Ut.next().value));Ne=Ce.next(),k.h=2})},Bn.prototype._asNative=function(){for(var ge=new Oe,Ce=v(this),Ne=Ce.next();!Ne.done;Ne=Ce.next()){var et=v(Ne.value);Ne=et.next().value,et=et.next().value,ge.append(Ne,et)}return ge},Bn.prototype._blob=function(){var ge="----formdata-polyfill-"+Math.random(),Ce=[],Ne="--"+ge+`\r
Content-Disposition: form-data; name="`;return this.forEach(function(et,Ut){return typeof et=="string"?Ce.push(Ne+$r(De(Ut))+`"\r
\r
`+De(et)+`\r
`):Ce.push(Ne+$r(De(Ut))+'"; filename="'+$r(et.name)+`"\r
Content-Type: `+(et.type||"application/octet-stream")+`\r
\r
`,et,`\r
`)}),Ce.push("--"+ge+"--"),new Blob(Ce,{type:"multipart/form-data; boundary="+ge})},Bn.prototype[Symbol.iterator]=function(){return this.entries()},Bn.prototype.toString=function(){return"[object FormData]"},en&&!en.matches&&(en.matches=en.matchesSelector||en.mozMatchesSelector||en.msMatchesSelector||en.oMatchesSelector||en.webkitMatchesSelector||function(ge){for(var Ce=(ge=(this.document||this.ownerDocument).querySelectorAll(ge)).length;0<=--Ce&&ge.item(Ce)!==this;);return-1<Ce}),Yn&&(Bn.prototype[Yn]="FormData"),Bt){var ro=ye.XMLHttpRequest.prototype.setRequestHeader;ye.XMLHttpRequest.prototype.setRequestHeader=function(ge,Ce){ro.call(this,ge,Ce),ge.toLowerCase()==="content-type"&&(this.B=!0)},ye.XMLHttpRequest.prototype.send=function(ge){ge instanceof Bn?(ge=ge._blob(),this.B||this.setRequestHeader("Content-Type",ge.type),Bt.call(this,ge)):Bt.call(this,ge)}}We&&(ye.fetch=function(ge,Ce){return Ce&&Ce.body&&Ce.body instanceof Bn&&(Ce.body=Ce.body._blob()),We.call(this,ge,Ce)}),ln&&(ye.navigator.sendBeacon=function(ge,Ce){return Ce instanceof Bn&&(Ce=Ce._asNative()),ln.call(this,ge,Ce)}),ye.FormData=Bn}})();const Q0=()=>{const n=ie("AREAS");return n.length===0&&n.push(xt.GLOBAL),Yc(n).call(n,(r,o,s)=>{const l=ek(o);return l?s===0?l:"".concat(r,",").concat(l):r},"")},ek=n=>n===xt.OVERSEA?"".concat(Ir.ASIA,",").concat(Ir.EUROPE,",").concat(Ir.AFRICA,",").concat(Ir.NORTH_AMERICA,",").concat(Ir.SOUTH_AMERICA,",").concat(Ir.OCEANIA):Ir[n],AX=n=>{const r={CODE:"",WEBCS_DOMAIN:[],WEBCS_DOMAIN_BACKUP_LIST:[],PROXY_CS:[],CDS_AP:[],ACCOUNT_REGISTER:[],UAP_AP:[],EVENT_REPORT_DOMAIN:[],EVENT_REPORT_BACKUP_DOMAIN:[],LOG_UPLOAD_SERVER:[],PROXY_SERVER_TYPE3:[]};return n.map(o=>{const s=j0[o],l=Object.keys(s);l&&l.map(h=>{h!=="CODE"&&(r[h]=r[h].concat(s[h]))})}),r},Z0={GLOBAL:{ASIA:[xt.CHINA,xt.JAPAN,xt.INDIA,xt.KOREA,xt.HKMC],EUROPE:[],NORTH_AMERICA:[xt.US],SOUTH_AMERICA:[],OCEANIA:[],AFRICA:[]}},cC=Object.keys(Z0[xt.GLOBAL]),tk=[xt.CHINA,xt.NORTH_AMERICA,xt.EUROPE,xt.ASIA,xt.JAPAN,xt.INDIA,xt.OCEANIA,xt.SOUTH_AMERICA,xt.AFRICA,xt.KOREA,xt.HKMC,xt.US],NX=function(n,r){let o=[];if(n.includes(xt.GLOBAL)){const h=[xt.GLOBAL,xt.OVERSEA],p=Object.keys(j0);if(r===xt.GLOBAL)throw new Q(W.INVALID_PARAMS,"GLOBAL is an invalid excludedArea value");if(r===xt.CHINA)o=[xt.OVERSEA];else if(l=r,cC.includes(l)){const v=(s=r,Z0[xt.GLOBAL][s]||[]),E=[...h,r,...v];o=p.filter(T=>!E.includes(T))}else if(function(v){let E=!1;return cC.forEach(T=>{Z0[xt.GLOBAL][T].includes(v)&&(E=!0)}),E}(r)){const v=function(T){let C;return cC.forEach(I=>{Z0[xt.GLOBAL][I].includes(T)&&(C=I)}),C}(r),E=[...h,v,r];o=p.filter(T=>!E.includes(T))}else o=n;o=function(v){const E=[];return tk.forEach(T=>{v.includes(T)&&E.push(T)}),E.concat(v.filter(T=>!tk.includes(T)))}(o)}else o=n;var s,l;return o};function nk(n){if(!n&&ie("AREAS").includes(xt.EXTENSIONS))return U.debug("update area from ap : reset"),void lC(Fx,!0);if(!ie("AREAS").includes(xt.GLOBAL)||!n)return;let r=j0.EXTENSIONS;r&&(r={CODE:ek(xt.EXTENSIONS),WEBCS_DOMAIN:["ap-web-1-".concat(n,".agora.io")],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-".concat(n,".ap.sd-rtn.com")],PROXY_CS:["proxy-ap-web-".concat(n,".agora.io")],CDS_AP:["cds-ap-web-1-".concat(n,".agora.io"),"cds-ap-web-2-".concat(n,".ap.sd-rtn.com")],ACCOUNT_REGISTER:["sua-ap-web-1-".concat(n,".agora.io"),"sua-ap-web-2-".concat(n,".ap.sd-rtn.com")],UAP_AP:["uap-ap-web-1-".concat(n,".agora.io"),"uap-ap-web-2-".concat(n,".ap.sd-rtn.com")],EVENT_REPORT_DOMAIN:["statscollector-1-".concat(n,".agora.io")],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-".concat(n,".agora.io")],LOG_UPLOAD_SERVER:["logservice-".concat(n,".agora.io")],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy-".concat(n,".agora.io")]},U.debug("update area from ap success: ".concat(n,",config is "),r),rn("AREAS",[xt.EXTENSIONS],!0),Object.keys(r).map(o=>{o==="LOG_UPLOAD_SERVER"||o==="EVENT_REPORT_DOMAIN"||o==="EVENT_REPORT_BACKUP_DOMAIN"||o==="PROXY_SERVER_TYPE3"?rn(o,r[o][0]):rn(o,r[o])}))}function lC(n){let r=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const o=Me.reportApiInvoke(null,{name:Zn.SET_AREA,options:n,tag:bn.TRACER});try{let s=[];if(typeof n=="string"&&(s=[n]),Array.isArray(n)&&(n.forEach(h=>{if(!rq.includes(h))throw new Q(W.INVALID_PARAMS,"invalid area code")}),s=n),Object.prototype.toString.call(n)==="[object Object]"){const{areaCode:h,excludedArea:p}=n;if(!h)throw new Q(W.INVALID_PARAMS,"area code is needed");let v=h;typeof h=="string"&&(v=[h]),s=p?NX(v,p):v}if(!r){if(au.AREAS){const h=new Q(W.PROHIBITED_OPERATION,"setArea is prohibited because of config-distribute");return o.onError(h),void U.warning("setArea is prohibited because of config-distribute")}if(s.includes(xt.GLOBAL)&&ie("AREAS")===xt.EXTENSIONS){const h=new Q(W.PROHIBITED_OPERATION,"setArea is prohibited because of ap extensions");return o.onError(h),void U.warning("setArea is prohibited because of ap extensions")}}rn("AREAS",s,r);const l=AX(s);Object.keys(l).map(h=>{h==="LOG_UPLOAD_SERVER"||h==="EVENT_REPORT_DOMAIN"||h==="EVENT_REPORT_BACKUP_DOMAIN"||h==="PROXY_SERVER_TYPE3"?rn(h,l[h][0]):rn(h,l[h])}),U.debug("set area success:",s.join(","))}catch(s){throw o.onError(s),s}o.onSuccess()}function rk(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function ik(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?rk(Object(o),!0).forEach(function(s){N(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):rk(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}let uC=1;function xX(n,r,o,s,l){uC+=1;const h={sid:o.sid,command:"convergeAllocateEdge",uid:"666",appId:o.appId,ts:Math.floor(Date.now()/1e3),seq:uC,requestId:uC,version:ta,cname:o.cname},p={service_name:r,json_body:JSON.stringify(h)};let v,E,T=n[0];return ts(async()=>{v=Date.now();const C=await wa(T,{data:p,cancelToken:s,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"}});if(E=Date.now()-v,C.code!==0){const V=new Q(W.UNEXPECTED_RESPONSE,"live streaming ap error, code"+C.code,{retry:!0,responseTime:E});throw U.error(V.toString()),V}const I=JSON.parse(C.json_body);if(I.code!==200){const V=new Q(W.UNEXPECTED_RESPONSE,"live streaming app center error, code: ".concat(I.code,", reason: ").concat(I.reason),{code:I.code,responseTime:E});throw U.error(V.toString()),V}if(!I.servers||I.servers.length===0){const V=new Q(W.UNEXPECTED_RESPONSE,"live streaming app center empty server",{code:I.code,responseTime:E});throw U.error(V.toString()),V}const L=function(V,Y){return{addressList:V.servers.map(q=>"wss://".concat(q.address.replace(/\./g,"-"),".").concat(ie("WORKER_DOMAIN"),":").concat(q.wss,"?serviceName=").concat(encodeURIComponent(Y))),workerToken:V.workerToken,vid:V.vid}}(I,r);return ie("LIVE_STREAMING_ADDRESS")&&(L.addressList=ie("LIVE_STREAMING_ADDRESS")instanceof Array?ie("LIVE_STREAMING_ADDRESS"):[ie("LIVE_STREAMING_ADDRESS")]),ik(ik({},L),{},{responseTime:E})},(C,I)=>(Me.apworkerEvent(o.sid,{success:!0,sc:200,serviceName:r,responseDetail:JSON.stringify(C.addressList),firstSuccess:I===0,responseTime:E,serverIp:n[I%n.length]}),!1),(C,I)=>(Me.apworkerEvent(o.sid,{success:!1,sc:C.data&&C.data.code||200,serviceName:r,responseTime:E,serverIp:n[I%n.length]}),!!(C.code!==W.OPERATION_ABORTED&&C.code!==W.UNEXPECTED_RESPONSE||C.data&&C.data.retry)&&(T=n[(I+1)%n.length],!0)),l)}let dC=1;function ok(n,r,o,s){let{url:l,areaCode:h}=n;const p=Date.now();let v;const[E,T]=lk(r,h,[yr.CHOOSE_SERVER]);let C=tr.networkState;return ts(async()=>{C&&tr.networkState===hi.OFFLINE&&tr.onlineWaiter&&await xe.race([tr.onlineWaiter,ni(s&&s.maxRetryTimeout||Qn.maxRetryTimeout)]),C=tr.networkState;const{data:I,headers:L}=await wa(l,{data:E,cancelToken:o,headers:{"Content-Type":"multipart/form-data;"}},!0,!0);v=L.http3==="1"?1:-1,Me.reportResourceTiming(l,r.sid),sk(I,l,r,p,[yr.CHOOSE_SERVER],v);const V=rC(I,yr.CHOOSE_SERVER);return ck(V),MD(V,l)},I=>(I&&Me.joinChooseServer(r.sid,{lts:p,succ:!0,csAddr:l,opid:T,serverList:I.gatewayAddrs.map(L=>L.address),ec:null,cid:I.cid.toString(),uid:I.uid.toString(),csIp:I.csIp,unilbsServerIds:[yr.CHOOSE_SERVER].toString(),isHttp3:v}),!1),I=>I.code!==W.OPERATION_ABORTED&&(I.code===W.CAN_NOT_GET_GATEWAY_SERVER?I.data.retry:(Me.joinChooseServer(r.sid,{lts:p,succ:!1,csAddr:l,serverList:null,opid:T,ec:I.code,csIp:I.data&&I.data.csIp,unilbsServerIds:[yr.CHOOSE_SERVER].toString(),extend:JSON.stringify({networkState:C}),isHttp3:v}),U.warning("[".concat(r.clientId,"] Choose server network error, retry"),I),!0)),s)}function ak(n,r,o,s){let l,{url:h,areaCode:p,serviceIds:v}=n;const E=Date.now(),[T,C]=lk(r,p,v);let I;return ts(async()=>{I&&tr.networkState===hi.OFFLINE&&tr.onlineWaiter&&await xe.race([tr.onlineWaiter,ni(s&&s.maxRetryTimeout||Qn.maxRetryTimeout)]),I=tr.networkState;const{data:L,headers:V}=await wa(h,{data:T,cancelToken:o,headers:{"Content-Type":"multipart/form-data;"}},!0,!0);l=V.http3==="1"?1:-1,Me.reportResourceTiming(h,r.sid),sk(L,h,r,E,v,l);const Y=rC(L,yr.CHOOSE_SERVER),q=rC(L,r.cloudProxyServer==="proxy5"?yr.CLOUD_PROXY_5:r.cloudProxyServer==="proxy3"||r.cloudProxyServer==="proxy4"?yr.CLOUD_PROXY:yr.CLOUD_PROXY_FALLBACK);return ck(Y),{gatewayInfo:MD(Y,h),proxyInfo:q,url:h}},L=>(L.gatewayInfo&&Me.joinChooseServer(r.sid,{lts:E,succ:!0,csAddr:h,serverList:L.gatewayInfo.gatewayAddrs.map(V=>V.address),ec:null,opid:C,cid:L.gatewayInfo.cid.toString(),uid:L.gatewayInfo.uid.toString(),csIp:L.gatewayInfo.csIp,unilbsServerIds:v.toString(),isHttp3:l}),L.proxyInfo&&Me.joinWebProxyAP(r.sid,{lts:E,sucess:1,apServerAddr:h,turnServerAddrList:L.proxyInfo.addresses.map(V=>V.ip).join(","),errorCode:null,eventType:r.cloudProxyServer,unilbsServerIds:v.toString()}),!1),L=>L.code!==W.OPERATION_ABORTED&&(L.code===W.CAN_NOT_GET_GATEWAY_SERVER?L.data.retry:(Me.joinWebProxyAP(r.sid,{lts:E,sucess:0,apServerAddr:h,turnServerAddrList:null,errorCode:L.code,eventType:r.cloudProxyServer,unilbsServerIds:v.toString(),extend:JSON.stringify({networkState:I})}),U.warning("[".concat(r.clientId,"] multi unilbs network error, retry"),L),!0)),s)}const sk=(n,r,o,s,l,h)=>{const p=[],v=E=>{E.flag===4096?Me.joinChooseServer(o.sid,{lts:s,succ:!1,csAddr:r,opid:n.opid,serverList:null,ec:E.error.message,csIp:E.error.data&&E.error.data.csIp,unilbsServerIds:l.toString(),isHttp3:h}):E.flag!==1048576&&E.flag!==4194304&&E.flag!==4194310||Me.joinWebProxyAP(o.sid,{lts:s,sucess:0,apServerAddr:r,turnServerAddrList:null,errorCode:E.error.code,eventType:o.cloudProxyServer,unilbsServerIds:l.toString()})};if(n.response_body.forEach(E=>{const T=E.buffer.code;if(E.uri===23&&T===0&&!E.buffer.edges_services)if(E.buffer.flag===4194310)U.warning("no edge services in ap response of proxy fallback, will not set proxy in iceServers"),E.buffer.edges_services=[];else{const C={error:new Q(W.CAN_NOT_GET_GATEWAY_SERVER,"no edge services in ap response",{retry:!0,csIp:n.detail[502]}),flag:E.buffer.flag};p.push(C),v(C)}if(T!==0){const C=J0(T),I={error:new Q(W.CAN_NOT_GET_GATEWAY_SERVER,C.desc,{desc:C.desc,retry:C.retry,csIp:n.detail[502]}),flag:E.buffer.flag};E.buffer.flag===4194310?U.warning(I.error.toString()):p.push(I),v(I)}}),p.length)throw U.warning("[".concat(o.clientId,"] multi unilbs ").concat(r," failed, ").concat(p.map(E=>"flag: ".concat(E.flag,", message: ").concat(E.error.message,", retry: ").concat(E.error.data.retry)).join(" | "))),new Q(W.CAN_NOT_GET_GATEWAY_SERVER,p.map(E=>"flag: ".concat(E.flag,", message: ").concat(E.error.message)).join(" | "),{retry:!!p.find(E=>E.error.data.retry),csIp:n.detail[502],desc:[...new Set(p.map(E=>{var T,C;return E==null||(T=E.error)===null||T===void 0||(C=T.data)===null||C===void 0?void 0:C.desc}).filter(E=>!!E))]})},ck=n=>{var r,o,s,l;if(n.addresses&&n.addresses.length===0&&n.code===0)throw new Q(W.CAN_NOT_GET_GATEWAY_SERVER,"void gateway address",{retry:!0,csIp:n.detail&&n.detail[502]});if(ie("AP_AREA")&&((s=n.detail)!==null&&s!==void 0&&s[23]&&typeof((l=n.detail)===null||l===void 0?void 0:l[23])=="string"?nk(n.detail[23].toLowerCase()):nk()),(r=n.detail)!==null&&r!==void 0&&r[19]&&typeof((o=n.detail)===null||o===void 0?void 0:o[19])=="string"){const p=n.detail[19],v=p==null?void 0:p.split(";");for(let E=0;E<v.length;E++){var h;const T=oc(h=v[E]).call(h);n.addresses[E]&&v&&(n.addresses[E].fingerprint=T)}}if(ie("GATEWAY_ADDRESS")&&ie("GATEWAY_ADDRESS").length>0){U.debug("assign gateway address to",ie("GATEWAY_ADDRESS"));const p=ie("GATEWAY_ADDRESS").map(v=>{var E,T;const C=(E=(T=n.addresses.find(I=>I.ip===v.ip&&I.port===v.port))===null||T===void 0?void 0:T.fingerprint)!==null&&E!==void 0?E:"";return{ip:v.ip,port:v.port,ticket:n.addresses[0]&&n.addresses[0].ticket,fingerprint:C}});n.addresses=p}},PX=(n,r)=>{if(n.response_body&&n.response_body.length){const o=n.response_body[0];if(o.buffer.code!==0){const s=J0(o.buffer.code);throw new Q(W.UPDATE_TICKET_FAILED,"[".concat(o.buffer.code,"]: ").concat(s.desc),{retry:s.retry})}return o.buffer.ticket}throw U.debug("update ticket request received ap response without response body:",r),new Q(W.UPDATE_TICKET_FAILED,"cannot find response body from ap response",{retry:!1})},lk=(n,r,o)=>{const s=Math.floor(Math.random()*1e12),l={appid:n.appId,client_ts:Date.now(),opid:s,sid:n.sid,request_bodies:[{uri:22,buffer:{cname:n.cname,detail:{6:n.stringUid,11:r,12:ie("USE_NEW_TOKEN")?"1":void 0,22:r},key:n.token,service_ids:o,uid:n.uid||0}}]};l.request_bodies.forEach(p=>{n.multiIP&&n.multiIP.gateway_ip&&(p.buffer.detail[5]=JSON.stringify({vocs_ip:[n.multiIP.uni_lbs_ip],vos_ip:[n.multiIP.gateway_ip]}))});const h=new FormData;return h.append("request",JSON.stringify(l)),[h,s]},DX=(n,r)=>{const o=Math.floor(Math.random()*1e12),s={appid:n.appId,client_ts:Date.now(),opid:o,sid:n.sid,request_bodies:[{uri:28,buffer:{cname:n.cname,detail:{1:"",6:n.stringUid,12:"1"},token:n.token,service_ids:r,uid:n.uid||0,edges_services:n.apResponse.addresses.map(h=>({ip:h.ip,port:h.port}))}}]},l=new FormData;return l.append("request",JSON.stringify(s)),[l,o]};let Ld=0;async function hC(n,r,o,s){return{gatewayInfo:await async function(h,p,v,E){let T=null;const C=[],I=async()=>{const V=ie("WEBCS_DOMAIN").slice(0,ie("AJAX_REQUEST_CONCURRENT")).map(X=>({url:h.proxyServer?"https://".concat(h.proxyServer,"/ap/?url=").concat(X+"/api/v2/transpond/webrtc?v=2"):"https://".concat(X,"/api/v2/transpond/webrtc?v=2"),areaCode:Q0()})),Y=E.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:V.map(X=>X.url)}),q=await Mp({fragementLength:ie("FRAGEMENT_LENGTH"),referenceList:V,asyncMapHandler:X=>(U.debug("[".concat(h.clientId,"] Connect to choose_server:"),X.url),ok(X,h,p,v)),allFailedhandler:X=>{throw E.recordJoinChannelService({endTs:Date.now(),status:"error",errors:X},Y),X[0]},promisesCollector:C});return E.recordJoinChannelService({endTs:Date.now(),status:"success"},Y),q},L=async()=>{if(await ni(1e3),T!==null)return T;const V=ie("WEBCS_DOMAIN_BACKUP_LIST").map(X=>({url:h.proxyServer?"https://".concat(h.proxyServer,"/ap/?url=").concat(X+"/api/v2/transpond/webrtc?v=2"):"https://".concat(X,"/api/v2/transpond/webrtc?v=2"),areaCode:Q0()})),Y=E.recordJoinChannelService({endTs:void 0,startTs:Date.now(),status:"pending",service:"chooseServer",urls:V.map(X=>X.url)}),q=await Mp({fragementLength:ie("FRAGEMENT_LENGTH"),referenceList:V,asyncMapHandler:X=>(U.debug("[".concat(h.clientId,"] Connect to backup choose_server:"),X.url),ok(X,h,p,v)),allFailedhandler:X=>{throw E.recordJoinChannelService({endTs:Date.now(),status:"error",errors:X},Y),X[0]},promisesCollector:C});return E.recordJoinChannelService({endTs:Date.now(),status:"success"},Y),q};try{return T=await kd([I(),L()]),C.length&&C.forEach(V=>V.cancel&&typeof V.cancel=="function"&&V.cancel()),T}catch(V){throw V[0]}}(n,r,o,s)}}async function uk(n,r,o,s,l){const h=n.cloudProxyServer;if(h==="disabled"){if(!s)return;if(n.useLocalAccessPoint)return await hC(n,r,o,l);if(ie("JOIN_WITH_FALLBACK_MEDIA_PROXY")){const{gatewayInfo:T,proxyInfo:C}=await hk(n,r,o,l);return n.turnServer&&n.turnServer.mode!=="auto"||(n.turnServer={mode:"manual",servers:C.map(I=>({turnServerURL:I.address,tcpport:I.tcpport||No.tcpport,udpport:I.udpport||No.udpport,username:I.username||No.username,password:I.password||No.password,forceturn:!1,security:!0}))}),{gatewayInfo:T}}return await hC(n,r,o,l)}const{proxyInfo:p,gatewayInfo:v}=await hk(n,r,o,l),E={gatewayInfo:v};return n.turnServer={mode:"manual",servers:p.map(T=>({turnServerURL:T.address,tcpport:h==="proxy3"?void 0:T.tcpport?T.tcpport:No.tcpport,udpport:h==="proxy4"?void 0:T.udpport?T.udpport:No.udpport,username:T.username||No.username,password:T.password||No.password,forceturn:h!=="proxy4",security:h==="proxy5"}))},U.debug("[".concat(n.clientId,"] set proxy server: ").concat(n.proxyServer,", mode: ").concat(h)),E}async function dk(n,r,o,s,l){const h=ie("ACCOUNT_REGISTER").slice(0,ie("AJAX_REQUEST_CONCURRENT"));let p=[];p=r.proxyServer?h.map(E=>"https://".concat(r.proxyServer,"/ap/?url=").concat(E+"/api/v1")):h.map(E=>"https://".concat(E,"/api/v1"));const v=l==null?void 0:l.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"stringUID",urls:p});try{const E=await async function(T,C,I,L,V){const Y=Date.now(),q={sid:I.sid,opid:10,appid:I.appId,string_uid:C};let X=T[0];const le=await ts(()=>wa(X+"".concat(X.indexOf("?")===-1?"?":"&","action=stringuid"),{data:q,cancelToken:L,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":72}}),(he,Se)=>{if(he.code===0){if(he.uid<=0||he.uid>=Math.pow(2,32))throw U.error("Invalid Uint Uid ".concat(C," => ").concat(he.uid),he),Me.reqUserAccount(q.sid,{lts:Y,success:!1,serverAddr:X,stringUid:q.string_uid,uid:he.uid,errorCode:W.INVALID_UINT_UID_FROM_STRING_UID,extend:q}),new Q(W.INVALID_UINT_UID_FROM_STRING_UID);return Me.reqUserAccount(q.sid,{lts:Y,success:!0,serverAddr:X,stringUid:q.string_uid,uid:he.uid,errorCode:null,extend:q}),!1}const De=J0(he.code);return De.retry&&(X=T[(Se+1)%T.length]),Me.reqUserAccount(q.sid,{lts:Y,success:!1,serverAddr:X,stringUid:q.string_uid,uid:he.uid,errorCode:De.desc,extend:q}),De.retry},(he,Se)=>he.code!==W.OPERATION_ABORTED&&(Me.reqUserAccount(q.sid,{lts:Y,success:!1,serverAddr:X,stringUid:q.string_uid,uid:null,errorCode:he.code,extend:q}),X=T[(Se+1)%T.length],!0),V);if(le.code!==0){const he=J0(le.code);throw new Q(W.UNEXPECTED_RESPONSE,he.desc)}return le}(p,n,r,o,s);return l==null||l.recordJoinChannelService({status:"success",endTs:Date.now()},v),E.uid}catch(E){throw l==null||l.recordJoinChannelService({status:"error",endTs:Date.now(),errors:[E]},v),E}}async function kX(n,r,o){const s=ie("CDS_AP").slice(0,ie("AJAX_REQUEST_CONCURRENT")).map(v=>n.proxyServer?"https://".concat(n.proxyServer,"/ap/?url=").concat(v+"/api/v1"):"https://".concat(v,"/api/v1?action=config")).map(v=>function(E,T,C,I){const L=Ht(),V={flag:64,cipher_method:0,features:{device:L.name,system:L.os,system_general:navigator.userAgent,vendor:T.appId,version:ta,cname:T.cname,sid:T.sid,session_id:T.sid,detail:"",proxyServer:T.proxyServer}};return ts(()=>wa(E,{data:V,timeout:1e3,cancelToken:C,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":54}}),void 0,Y=>Y.code!==W.OPERATION_ABORTED,I)}(v,n,r,o));let l=null,h=null,p={};try{l=await kd(s)}catch(v){if(v.code===W.OPERATION_ABORTED)throw v;h=v}if(s.forEach(v=>v.cancel()),Me.reportApiInvoke(n.sid,{name:Zn.REQUEST_CONFIG_DISTRIBUTE,options:{error:h,res:l}}).onSuccess(),l&&l.test_tags)try{p=function(v){if(!v.test_tags)return{};const E=v.test_tags,T=Object.keys(E),C={};return T.forEach(I=>{var L;const V=oc(L=I.slice(4)).call(L),Y=JSON.parse(E[I])[1];C[V]=Y}),C}(l)}catch{}return p}async function hk(n,r,o,s){const l=ie("PROXY_SERVER_TYPE3"),h=(V,Y,q)=>{let X=q||l;return Array.isArray(X)&&(X=Y%2==0?l[1]:l[0]),"https://".concat(X,"/ap/?url=").concat(V)};let p=null;const v=[],E=async()=>{const V=ie("WEBCS_DOMAIN").slice(0,ie("AJAX_REQUEST_CONCURRENT")).map((X,le)=>{let he;return he=n.cloudProxyServer==="disabled"&&n.proxyServer?h("".concat(X,"/api/v2/transpond/webrtc?v=2"),le,n.proxyServer):n.cloudProxyServer==="disabled"||n.cloudProxyServer==="fallback"?"https://".concat(X,"/api/v2/transpond/webrtc?v=2"):h("".concat(X,"/api/v2/transpond/webrtc?v=2"),le),{url:he,areaCode:Q0(),serviceIds:[yr.CHOOSE_SERVER,n.cloudProxyServer==="proxy5"?yr.CLOUD_PROXY_5:n.cloudProxyServer==="proxy3"||n.cloudProxyServer==="proxy4"?yr.CLOUD_PROXY:yr.CLOUD_PROXY_FALLBACK]}}),Y=s.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:V.map(X=>X.url)}),q=await Mp({fragementLength:ie("FRAGEMENT_LENGTH"),referenceList:V,asyncMapHandler:X=>(U.debug("[".concat(n.clientId,"] Connect to choose_server:"),X.url),ak(X,n,r,o)),allFailedhandler:X=>{throw s.recordJoinChannelService({endTs:Date.now(),status:"error",errors:X},Y),X[0]},promisesCollector:v});return s.recordJoinChannelService({endTs:Date.now(),status:"success"},Y),q},T=async()=>{if(await ni(1e3),p!==null)return p;const V=ie("WEBCS_DOMAIN_BACKUP_LIST").map((X,le)=>{let he;return he=n.cloudProxyServer==="disabled"&&n.proxyServer?h("".concat(X,"/api/v2/transpond/webrtc?v=2"),le,n.proxyServer):n.cloudProxyServer==="disabled"||n.cloudProxyServer==="fallback"?"https://".concat(X,"/api/v2/transpond/webrtc?v=2"):h("".concat(X,"/api/v2/transpond/webrtc?v=2"),le),{url:he,areaCode:Q0(),serviceIds:[yr.CHOOSE_SERVER,n.cloudProxyServer==="proxy5"?yr.CLOUD_PROXY_5:n.cloudProxyServer==="proxy3"||n.cloudProxyServer==="proxy4"?yr.CLOUD_PROXY:yr.CLOUD_PROXY_FALLBACK]}}),Y=s.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:V.map(X=>X.url)}),q=await Mp({fragementLength:ie("FRAGEMENT_LENGTH"),referenceList:V,asyncMapHandler:X=>(U.debug("[".concat(n.clientId,"] Connect to backup choose_server:"),X.url),ak(X,n,r,o)),allFailedhandler:X=>{throw s.recordJoinChannelService({endTs:Date.now(),status:"error",errors:X},Y),X[0]},promisesCollector:v});return s.recordJoinChannelService({endTs:Date.now(),status:"success"},Y),q};let C,I,L;try{({gatewayInfo:C,proxyInfo:I,url:L}=await kd([E(),T()]))}catch(V){throw V[0]}if(v.length&&v.forEach(V=>V.cancel&&typeof V.cancel=="function"&&V.cancel()),!C||!I)throw new Q(W.UNEXPECTED_ERROR,"missing gateway or proxy response").print();if(n.apUrl=L,n.cloudProxyServer!=="disabled"&&Array.isArray(l)&&L){const V=/^https?:\/\/(.+?)(\/.*)?$/.exec(L)[1];l.includes(V)&&(n.proxyServer=V,U.setProxyServer(V),Me.setProxyServer(V))}return p={gatewayInfo:C,proxyInfo:await SX(I,C.uid)},p}async function pk(n,r,o,s){const l=ie("UAP_AP").slice(0,ie("AJAX_REQUEST_CONCURRENT")).map(h=>r.proxyServer?"https://".concat(r.proxyServer,"/ap/?url=").concat(h+"/api/v1?action=uap"):"https://".concat(h,"/api/v1?action=uap"));return await xX(l,n,r,o,s)}async function LX(n,r,o){const s=ie("UAP_AP").slice(0,ie("AJAX_REQUEST_CONCURRENT")).map(l=>n.proxyServer?"https://".concat(n.proxyServer,"/ap/?url=").concat(l+"/api/v1?action=uap"):"https://".concat(l,"/api/v1?action=uap")).map(l=>function(h,p,v,E){const T={command:"convergeAllocateEdge",sid:p.sid,appId:p.appId,token:p.token,ts:Date.now(),version:ta,cname:p.cname,uid:p.uid.toString(),requestId:dC,seq:dC};dC+=1;const C={service_name:"tele_channel",json_body:JSON.stringify(T)};return ts(async()=>{const I=await wa(h,{data:C,cancelToken:v,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":61}});if(I.code!==0){const V=new Q(W.UNEXPECTED_RESPONSE,"cross channel ap error, code"+I.code,{retry:!0});throw U.error(V.toString()),V}const L=JSON.parse(I.json_body);if(L.code!==200){const V=new Q(W.UNEXPECTED_RESPONSE,"cross channel app center error, code: ".concat(L.code,", reason: ").concat(L.reason));throw U.error(V.toString()),V}if(!L.servers||L.servers.length===0){const V=new Q(W.UNEXPECTED_RESPONSE,"cross channel app center empty server");throw U.error(V.toString()),V}return{vid:L.vid,workerToken:L.workerToken,addressList:(ie("CHANNEL_MEDIA_RELAY_SERVERS")||L.servers).map(V=>"wss://".concat(V.address.replace(/\./g,"-"),".").concat(ie("WORKER_DOMAIN"),":").concat(V.wss))}},void 0,I=>!!(I.code!==W.OPERATION_ABORTED&&I.code!==W.UNEXPECTED_RESPONSE||I.data&&I.data.retry),E)}(l,n,r,o));try{const l=await kd(s);return s.forEach(h=>h.cancel()),l}catch(l){throw l[0]}}async function MX(n,r,o){let s=null;const l=[],h=async p=>{const v=ie(p?"WEBCS_DOMAIN_BACKUP_LIST":"WEBCS_DOMAIN").map(E=>n.proxyServer?"https://".concat(n.proxyServer,"/ap/?url=").concat(E+"/api/v2/transpond/webrtc?v=2"):"https://".concat(E,"/api/v2/transpond/webrtc?v=2"));return p&&(await ni(1e3),s!==null)?s:await Mp({fragementLength:ie("FRAGEMENT_LENGTH"),referenceList:v,asyncMapHandler:E=>(U.debug("[".concat(n.clientId,"] update ticket, Connect to ").concat(p?"backup":""," choose_server:"),E),function(T,C,I,L){const[V]=DX(C,[yr.CHOOSE_SERVER]);let Y=tr.networkState;return ts(async()=>{Y&&tr.networkState===hi.OFFLINE&&tr.onlineWaiter&&await xe.race([tr.onlineWaiter,ni(L&&L.maxRetryTimeout||Qn.maxRetryTimeout)]),Y=tr.networkState;const q=await wa(T,{data:V,cancelToken:I,headers:{"Content-Type":"multipart/form-data;"}},!0);return PX(q,T)},()=>!1,q=>q.code!==W.OPERATION_ABORTED&&(q.code===W.UPDATE_TICKET_FAILED?q.data.retry:(U.warning("[".concat(C.clientId,"] update ticket network error, retry"),q),!0)),L)}(E,n,r,o)),allFailedhandler:E=>{throw E[0]},promisesCollector:l})};try{return s=await kd([h(!1),h(!0)]),l.length&&l.forEach(p=>p.cancel&&typeof p.cancel=="function"&&p.cancel()),s}catch(p){throw p[0]}}function fk(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function mk(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?fk(Object(o),!0).forEach(function(s){N(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):fk(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}class UX extends Rn{constructor(){super(),N(this,"configs",void 0),N(this,"joinInfo",void 0),N(this,"cancelToken",void 0),N(this,"retryConfig",{timeout:3e3,timeoutFactor:1.5,maxRetryCount:1,maxRetryTimeout:1e4}),N(this,"interval",void 0),N(this,"mutex",new wi("config-distribute")),N(this,"mutableParamsRead",!1)}startGetConfigDistribute(r,o){this.joinInfo=r,this.cancelToken=o,this.interval&&this.stopGetConfigDistribute(),ie("ENABLE_CONFIG_DISTRIBUTE")&&(this.updateConfigDistribute(),this.interval=window.setInterval(()=>{this.updateConfigDistribute()},ie("CONFIG_DISTRIBUTE_INTERVAL")))}stopGetConfigDistribute(){this.interval&&clearInterval(this.interval),this.interval=void 0,this.joinInfo=void 0,this.cancelToken=void 0}async awaitConfigDistributeComplete(){this.mutex.isLocked&&(await this.mutex.lock())()}async updateConfigDistribute(){if(this.mutableParamsRead||(this.mutableParamsRead=!0,Me.reportApiInvoke(null,{options:void 0,name:Zn.LOAD_CONFIG_FROM_LOCALSTORAGE,tag:bn.TRACER}).onSuccess(JSON.stringify(au))),!this.joinInfo||!this.cancelToken||!this.retryConfig)return void U.debug("[config-distribute] get config distribute interrupted have no joininfo");let r;const o=await this.mutex.lock();try{r=await kX(this.joinInfo,this.cancelToken,this.retryConfig),U.debug("[config-distribute] get config distribute",JSON.stringify(r)),r.limit_bitrate&&this.handleBitrateLimit(r.limit_bitrate),this.cacheGlobalParameterConfig(r),this.configs=r}catch(s){const l=new Q(W.NETWORK_RESPONSE_ERROR,s);U.warning("[config-distribute] ".concat(l.toString()))}finally{o()}}getBitrateLimit(){return this.configs?this.configs.limit_bitrate:void 0}handleBitrateLimit(r){var o;(o=r)&&o.uplink&&o.id&&o.uplink.max_bitrate!==void 0&&o.uplink.min_bitrate!==void 0&&(this.configs&&this.configs.limit_bitrate?this.configs&&this.configs.limit_bitrate&&this.configs.limit_bitrate.id!==r.id&&this.emit(Dp.UPDATE_BITRATE_LIMIT,r):this.emit(Dp.UPDATE_BITRATE_LIMIT,r))}getLowStreamConfigDistribute(){return this.configs&&this.configs.limit_bitrate&&mk({},this.configs.limit_bitrate.low_stream_uplink)}cacheGlobalParameterConfig(r){var o;const s=OS(o=Object.keys(r).filter(h=>/^webrtc_ng_global_parameter/.test(h))).call(o);for(let h=0;h<s.length;h++)for(let p=s.length-1;p>h;p--){const v=s[p];if(typeof r[v].__priority=="number"){const E=r[v].__priority,T=s[p-1];if(typeof r[T].__priority=="number"){if(!(E>r[T].__priority))continue;{const C=v;s[p]=s[p-1],s[p-1]=C}}else{const C=v;s[p]=s[p-1],s[p-1]=C}}}const l={};s.forEach(h=>{const p=r[h],v=p.__expires;Object.keys(p).forEach(E=>{E==="__priority"||E==="__expires"||Object.prototype.hasOwnProperty.call(l,E)||(l[E]=mk({value:p[E]},v&&{expires:v}))})});try{const h=JSON.stringify(l),p=window.btoa(h);window.localStorage.setItem("websdk_ng_global_parameter",p),U.debug("Caching global parameters ".concat(h))}catch(h){U.error("Error caching global parameters:",h.message)}}}function gk(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function jp(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?gk(Object(o),!0).forEach(function(s){N(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):gk(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}class jX extends Rn{constructor(r,o,s,l){super(),N(this,"spec",void 0),N(this,"token",void 0),N(this,"websocket",void 0),N(this,"pingpongTimer",void 0),N(this,"reconnectMode","retry"),N(this,"serviceMode",void 0),N(this,"reqId",0),N(this,"commandReqId",0),N(this,"handleWebSocketOpen",()=>{this.reconnectMode="retry",this.startPingPong()}),N(this,"handleWebSocketMessage",h=>{if(!h.data)return;const p=JSON.parse(h.data);p.requestId?this.emit("@".concat(p.requestId,"-").concat(p.sid),p):this.serviceMode===sr.INJECT?this.emit(Ia.INJECT_STREAM_STATUS,p):(Me.workerEvent(this.spec.sid,{actionType:"status",serverCode:p.code,workerType:this.serviceMode===sr.TRANSCODE?1:2}),this.emit(Ia.PUBLISH_STREAM_STATUS,p))}),this.spec=o,this.token=r,this.serviceMode=l,this.websocket=new mu("live-streaming",s),this.websocket.on(it.CONNECTED,this.handleWebSocketOpen),this.websocket.on(it.ON_MESSAGE,this.handleWebSocketMessage),this.websocket.on(it.REQUEST_NEW_URLS,(h,p)=>{ri(this,Ia.REQUEST_NEW_ADDRESS).then(h).catch(p)}),this.websocket.on(it.RECONNECTING,()=>{this.websocket.reconnectMode=this.reconnectMode})}init(r){return this.websocket.init(r)}async request(r,o,s,l){this.reqId+=1,r==="request"&&(this.commandReqId+=1);const h=this.commandReqId,p=this.reqId;if(!p||!this.websocket)throw new Q(W.UNEXPECTED_ERROR);const v=jp({command:r,sdkVersion:ta==="4.18.2"?"0.0.1":ta,seq:p,requestId:p,allocate:s,cname:this.spec.cname,appId:this.spec.appId,sid:this.spec.sid,uid:this.spec.uid.toString(),ts:Math.floor(Date.now()/1e3)},o);if(this.websocket.state==="closed")throw new Q(W.WS_DISCONNECT);const E=()=>new xe((L,V)=>{this.websocket.once(it.CLOSED,()=>V(new Q(W.WS_ABORT))),this.websocket.once(it.CONNECTED,L)});this.websocket.state!=="connected"&&await E(),v.clientRequest&&(v.clientRequest.workerToken=this.token);const T=new xe((L,V)=>{const Y=()=>{V(new Q(W.WS_ABORT))};this.websocket.once(it.RECONNECTING,Y),this.websocket.once(it.CLOSED,Y),this.once("@".concat(p,"-").concat(this.spec.sid),q=>{L(q)})});l&&Me.workerEvent(this.spec.sid,jp(jp({},l),{},{requestId:h,actionType:"request",payload:JSON.stringify(o.clientRequest),serverCode:0,code:0}));const C=Date.now();this.websocket.sendMessage(v);let I=null;try{I=await T}catch(L){if(this.websocket.state==="closed")throw L;return await E(),await this.request(r,o,s)}return l&&Me.workerEvent(this.spec.sid,jp(jp({},l),{},{requestId:h,actionType:"response",payload:JSON.stringify(I.serverResponse),serverCode:I.code,success:I.code===200,responseTime:Date.now()-C})),I.code!==200&&this.handleResponseError(I),I}tryNextAddress(){this.reconnectMode="tryNext",this.websocket.reconnect("tryNext")}close(){const r=ta==="4.18.2"?"0.0.1":ta;this.reqId+=1,this.websocket.state==="connected"?(this.websocket.sendMessage({command:"request",appId:this.spec.appId,cname:this.spec.cname,uid:this.spec.uid.toString(),sdkVersion:r,sid:this.spec.sid,seq:this.reqId,ts:Math.floor(Date.now()/1e3),requestId:this.reqId,clientRequest:{command:"DestroyWorker"}}),this.websocket.close(!1,!0)):this.websocket.close(!1),this.pingpongTimer&&(window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0)}handleResponseError(r){switch(r.code){case Vn.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM:return void U.warning("live stream response already exists stream");case Vn.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR:case Vn.LIVE_STREAM_RESPONSE_BAD_STREAM:case Vn.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR:return new Q(W.LIVE_STREAMING_INVALID_ARGUMENT,"",{code:r.code}).throw();case Vn.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST:if(r.serverResponse.command==="UnpublishStream"||r.serverResponse.command==="UninjectStream")return;throw new Q(W.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case Vn.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED:return new Q(W.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED,"",{code:r.code}).throw();case Vn.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:{const o=new Q(W.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE);return this.emit(Ia.WARNING,o,r.serverResponse.url)}case Vn.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN:{const o=new Q(W.LIVE_STREAMING_WARN_FREQUENT_REQUEST);return this.emit(Ia.WARNING,o,r.serverResponse.url)}case Vn.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH:throw new Q(W.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case Vn.LIVE_STREAM_RESPONSE_NOT_SUPPORTED:return new Q(W.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED,"",{code:r.code}).throw();case Vn.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM:{const o=new Q(W.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT);return this.emit(Ia.WARNING,o,r.serverResponse.url)}case Vn.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR:return new Q(W.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:r.code}).throw();case Vn.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT:throw new Q(W.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream resource limit",{retry:!0,changeAddress:!0});case Vn.LIVE_STREAM_RESPONSE_WORKER_LOST:case Vn.LIVE_STREAM_RESPONSE_WORKER_QUIT:if(r.serverResponse.command==="UnpublishStream"||r.serverResponse.command==="UninjectStream")return;throw new Q(W.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case Vn.ERROR_FAIL_SEND_MESSAGE:if(r.serverResponse.command==="UnpublishStream"||r.serverResponse.command==="UninjectStream")return;if(r.serverResponse.command==="UpdateTranscoding"||r.serverResponse.command==="ControlStream")return new Q(W.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{code:r.code}).throw();throw new Q(W.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case Vn.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case Vn.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case Vn.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case Vn.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:return new Q(W.LIVE_STREAMING_CDN_ERROR,"",{code:r.code}).throw()}}startPingPong(){this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(()=>{this.websocket.state==="connected"&&this.request("ping",{}).catch(q0)},6e3)}}function vk(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function Ui(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?vk(Object(o),!0).forEach(function(s){N(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):vk(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}class FX extends Rn{constructor(r){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Qn,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Qn;super(),N(this,"onLiveStreamWarning",void 0),N(this,"onLiveStreamError",void 0),N(this,"onInjectStatusChange",void 0),N(this,"spec",void 0),N(this,"retryTimeout",1e4),N(this,"connection",void 0),N(this,"httpRetryConfig",void 0),N(this,"wsRetryConfig",void 0),N(this,"streamingTasks",new Map),N(this,"isStartingStreamingTask",!1),N(this,"taskMutex",new wi("live-streaming")),N(this,"cancelToken",Ao.CancelToken.source()),N(this,"transcodingConfig",void 0),N(this,"injectConfig",Ui({},nq)),N(this,"injectLoopTimes",0),N(this,"uapResponse",void 0),N(this,"lastTaskId",1),N(this,"statusError",new Map),this.spec=r,this.httpRetryConfig=s,this.wsRetryConfig=o}async setTranscodingConfig(r){const o=Ui(Ui({},tq),r);o.videoCodecProfile!==66&&o.videoCodecProfile!==77&&o.videoCodecProfile!==100&&(U.debug("[".concat(this.spec.clientId,"] set transcoding config, fix video codec profile: ").concat(o.videoCodecProfile," -> 100")),o.videoCodecProfile=100),o.transcodingUsers||(o.transcodingUsers=o.userConfigs),o.transcodingUsers&&(o.transcodingUsers=o.transcodingUsers.map(p=>Ui(Ui(Ui({},eq),p),{},{zOrder:p.zOrder?p.zOrder+1:1}))),function(p){yn(p.width)||sn(p.width,"config.width",0,1e4),yn(p.height)||sn(p.height,"config.height",0,1e4),yn(p.videoBitrate)||sn(p.videoBitrate,"config.videoBitrate",1,1e6),yn(p.videoFrameRate)||sn(p.videoFrameRate,"config.videoFrameRate"),yn(p.lowLatency)||bd(p.lowLatency,"config.lowLatency"),yn(p.audioSampleRate)||Rr(p.audioSampleRate,"config.audioSampleRate",[32e3,44100,48e3]),yn(p.audioBitrate)||sn(p.audioBitrate,"config.audioBitrate",1,128),yn(p.audioChannels)||Rr(p.audioChannels,"config.audioChannels",[1,2,3,4,5]),yn(p.videoGop)||sn(p.videoGop,"config.videoGop"),yn(p.videoCodecProfile)||Rr(p.videoCodecProfile,"config.videoCodecProfile",[66,77,100]),yn(p.userCount)||sn(p.userCount,"config.userCount",0,17),yn(p.backgroundColor)||sn(p.backgroundColor,"config.backgroundColor",0,16777215),yn(p.userConfigExtraInfo)||Xr(p.userConfigExtraInfo,"config.userConfigExtraInfo",0,4096,!1),p.transcodingUsers&&!yn(p.transcodingUsers)&&(cc(p.transcodingUsers,"config.transcodingUsers"),p.transcodingUsers.forEach((v,E)=>{xS(v.uid),yn(v.x)||sn(v.x,"transcodingUser[".concat(E,"].x"),0,1e4),yn(v.y)||sn(v.y,"transcodingUser[".concat(E,"].y"),0,1e4),yn(v.width)||sn(v.width,"transcodingUser[".concat(E,"].width"),0,1e4),yn(v.height)||sn(v.height,"transcodingUser[".concat(E,"].height"),0,1e4),yn(v.zOrder)||sn(v.zOrder-1,"transcodingUser[".concat(E,"].zOrder"),0,100),yn(v.alpha)||sn(v.alpha,"transcodingUser[".concat(E,"].alpha"),0,1,!1)})),yn(p.watermark)||jS(p.watermark,"watermark"),yn(p.backgroundImage)||jS(p.backgroundImage,"backgroundImage"),p.images&&!yn(p.images)&&(cc(p.images,"config.images"),p.images.forEach((v,E)=>{jS(v,"images[".concat(E,"]"))}))}(o);const s=[];o.images&&s.push(...o.images.map(p=>Ui(Ui(Ui({},US),p),{},{zOrder:255}))),o.backgroundImage&&(s.push(Ui(Ui(Ui({},US),o.backgroundImage),{},{zOrder:0})),delete o.backgroundImage),o.watermark&&(s.push(Ui(Ui(Ui({},US),o.watermark),{},{zOrder:255})),delete o.watermark),o.images=s,o.transcodingUsers&&(o.userConfigs=o.transcodingUsers.map(p=>Ui({},p)),o.userCount=o.transcodingUsers.length,delete o.transcodingUsers);const l=(o.userConfigs||[]).map(p=>typeof p.uid=="number"?xe.resolve(p.uid):dk(p.uid,this.spec,this.cancelToken.token,this.httpRetryConfig));if((await xe.all(l)).forEach((p,v)=>{o.userConfigs&&o.userConfigs[v]&&(o.userConfigs[v].uid=p)}),this.transcodingConfig=o,this.connection)try{var h;const p=await this.connection.request("request",{clientRequest:{command:"UpdateTranscoding",transcodingConfig:this.transcodingConfig}},!1,{command:"UpdateTranscoding",workerType:1,requestByUser:!0,tid:Array.from(Ms(h=this.streamingTasks).call(h)).map(v=>v.taskId).join("#")});U.debug("[".concat(this.spec.clientId,"] update live transcoding config success, code: ").concat(p.code,", config:"),JSON.stringify(this.transcodingConfig))}catch(p){if(!p.data||!p.data.retry)throw p;p.data.changeAddress&&this.connection.tryNextAddress(),this.streamingTasks.forEach(v=>{U.warning("[".concat(this.spec.clientId,"] live streaming receive error"),p.toString(),"try to republish",v.url),this.startLiveStreamingTask(v.url,v.mode,p).then(()=>{U.debug("[".concat(this.spec.clientId,"] live streaming republish ").concat(v.url," success"))}).catch(E=>{U.error("[".concat(this.spec.clientId,"] live streaming republish failed"),v.url,E.toString()),this.onLiveStreamError&&this.onLiveStreamError(v.url,E)})})}}setInjectStreamConfig(r,o){this.injectConfig=Object.assign({},this.injectConfig,r),this.injectLoopTimes=o}async startLiveStreamingTask(r,o,s){var l;if(Array.from(Ms(l=this.streamingTasks).call(l)).find(E=>E.mode===sr.INJECT)&&o===sr.INJECT)return new Q(W.LIVE_STREAMING_TASK_CONFLICT,"inject stream over limit").throw();if(!this.transcodingConfig&&o===sr.TRANSCODE)throw new Q(W.INVALID_OPERATION,"[LiveStreaming] no transcoding config found, can not start transcoding streaming task");let h={command:"PublishStream",ts:Date.now(),url:r,uid:this.spec.uid.toString(),autoDestroyTime:100,acceptImageTimeout:!0};U.debug("[".concat(this.spec.clientId,"] start live streaming ").concat(r,", mode: ").concat(o));const p=await this.taskMutex.lock();if(!this.connection&&s)return void p();if(this.streamingTasks.get(r)&&!s)return p(),new Q(W.LIVE_STREAMING_TASK_CONFLICT).throw();try{this.connection||(this.connection=await this.connect(o))}catch(E){throw p(),E}switch(o){case sr.TRANSCODE:h.transcodingConfig=Ui({},this.transcodingConfig);break;case sr.RAW:break;case sr.INJECT:h={cname:this.spec.cname,command:"InjectStream",sid:this.spec.sid,transcodingConfig:this.injectConfig,ts:Date.now(),url:r,loopTimes:this.injectLoopTimes}}this.uapResponse&&this.uapResponse.vid&&(h.vid=this.uapResponse.vid),this.isStartingStreamingTask=!0;const v=this.lastTaskId++;try{const E=new xe((C,I)=>{ni(this.retryTimeout).then(()=>{if(s)return I(s);const L=this.statusError.get(r);return L?(this.statusError.delete(r),I(L)):void 0})}),T=await xe.race([this.connection.request("request",{clientRequest:h},!0,{url:r,command:"PublishStream",workerType:o===sr.TRANSCODE?1:2,requestByUser:!s,tid:v.toString()}),E]);this.isStartingStreamingTask=!1,U.debug("[".concat(this.spec.clientId,"] live streaming started, code: ").concat(T.code)),this.streamingTasks.set(r,{clientRequest:h,mode:o,url:r,taskId:v}),p()}catch(E){if(p(),this.isStartingStreamingTask=!1,!E.data||!E.data.retry||s)throw E;return E.data.changeAddress?(this.connection.tryNextAddress(),await this.startLiveStreamingTask(r,o,E)):await this.startLiveStreamingTask(r,o,E)}}stopLiveStreamingTask(r){return new xe((o,s)=>{const l=this.streamingTasks.get(r);if(!l||!this.connection)return new Q(W.UNEXPECTED_ERROR,"can not find streaming task to stop").throw();const h=l.mode;l.abortTask=()=>{U.debug("[".concat(this.spec.clientId,"] stop live streaming success(worker exception)")),this.streamingTasks.delete(r),o()},this.connection.request("request",{clientRequest:{command:h===sr.INJECT?"UninjectStream":"UnpublishStream",url:l.url}},!1,{url:r,command:"UnPublishStream",workerType:h===sr.TRANSCODE?1:2,requestByUser:!0,tid:(this.lastTaskId++).toString()}).then(p=>{U.debug("[".concat(this.spec.clientId,"] stop live streaming success, code: ").concat(p.code)),this.streamingTasks.delete(r),this.streamingTasks.size===0&&h!==sr.INJECT&&(this.connection&&this.connection.close(),this.connection=void 0),o(),h===sr.INJECT&&this.onInjectStatusChange&&this.onInjectStatusChange(Zc.INJECT_STREAM_STATUS_STOP_SUCCESS,this.spec.uid,r)}).catch(s)})}async controlInjectStream(r,o,s,l){const h=this.streamingTasks.get(r);if(!h||!this.connection||h.mode!==sr.INJECT)throw new Q(W.INVALID_OPERATION,"can not find inject stream task to control");return(await this.connection.request("request",{clientRequest:{command:"ControlStream",url:r,control:o,audioVolume:s,position:l}})).serverResponse}resetAllTask(){var r;const o=Array.from(Ms(r=this.streamingTasks).call(r));this.terminate();for(const s of o)this.startLiveStreamingTask(s.url,s.mode).catch(l=>{this.onLiveStreamError&&this.onLiveStreamError(s.url,l)})}terminate(){this.cancelToken&&this.cancelToken.cancel(),this.streamingTasks=new Map,this.isStartingStreamingTask=!1,this.statusError=new Map,this.cancelToken=Ao.CancelToken.source(),this.uapResponse=void 0,this.connection&&this.connection.close(),this.connection=void 0}async connect(r){if(this.connection)throw new Q(W.UNEXPECTED_ERROR,"live streaming connection has already connected");const o=await ri(this,Rd.REQUEST_WORKER_MANAGER_LIST,r);return this.uapResponse=o,this.connection=new jX(o.workerToken,this.spec,this.wsRetryConfig,r),this.connection.on(Ia.WARNING,(s,l)=>this.onLiveStreamWarning&&this.onLiveStreamWarning(l,s)),this.connection.on(Ia.PUBLISH_STREAM_STATUS,s=>this.handlePublishStreamServer(s)),this.connection.on(Ia.INJECT_STREAM_STATUS,s=>this.handleInjectStreamServerStatus(s)),this.connection.on(Ia.REQUEST_NEW_ADDRESS,(s,l)=>{if(!this.connection)return l(new Q(W.UNEXPECTED_ERROR,"can not get new live streaming address list"));ri(this,Rd.REQUEST_WORKER_MANAGER_LIST,r).then(h=>{this.uapResponse=h,s(h.addressList)}).catch(l)}),await this.connection.init(o.addressList),this.connection}handlePublishStreamServer(r){const o=r.serverStatus&&r.serverStatus.url||"empty_url",s=this.streamingTasks.get(o),l=r.reason;switch(r.code){case Vn.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case Vn.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case Vn.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case Vn.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:{const p=new Q(W.LIVE_STREAMING_CDN_ERROR,"",{code:r.code});if(s)return U.error(p.toString()),this.onLiveStreamError&&this.onLiveStreamError(o,p);if(!this.isStartingStreamingTask)return;this.statusError.set(o,p)}case Vn.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:{const p=new Q(W.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE,l);return this.onLiveStreamWarning&&this.onLiveStreamWarning(o,p)}case Vn.LIVE_STREAM_RESPONSE_WORKER_LOST:case Vn.LIVE_STREAM_RESPONSE_WORKER_QUIT:{var h;if(!this.connection)return;this.connection.tryNextAddress();const p=Array.from(Ms(h=this.streamingTasks).call(h));for(const v of p)v.abortTask?v.abortTask():(U.warning("[".concat(this.spec.clientId,"] publish stream status code"),r.code,"try to republish",v.url),this.startLiveStreamingTask(v.url,v.mode,new Q(W.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:r.code})).then(()=>{U.debug("[".concat(this.spec.clientId,"] republish live stream success"),v.url)}).catch(E=>{U.error(E.toString()),this.onLiveStreamError&&this.onLiveStreamError(v.url,E)}));return}}}handleInjectStreamServerStatus(r){const o=Number(r.uid),s=r.serverStatus&&r.serverStatus.url;switch(r.code){case 200:return void(this.onInjectStatusChange&&this.onInjectStatusChange(Zc.INJECT_STREAM_STATUS_START_SUCCESS,o,s));case 451:return this.onInjectStatusChange&&this.onInjectStatusChange(Zc.INJECT_STREAM_STATUS_START_ALREADY_EXISTS,o,s),void this.streamingTasks.delete(s);case 453:return this.onInjectStatusChange&&this.onInjectStatusChange(Zc.INJECT_STREAM_STATUS_START_UNAUTHORIZED,o,s),void this.streamingTasks.delete(s);case 470:return this.onInjectStatusChange&&this.onInjectStatusChange(Zc.INJECT_STREAM_STATUS_BROKEN,o,s),void this.streamingTasks.delete(s);case 499:return this.onInjectStatusChange&&this.onInjectStatusChange(Zc.INJECT_STREAM_STATUS_START_TIMEOUT,o,s),void this.streamingTasks.delete(s);default:return void U.debug("inject stream server status",r)}}hasUrl(r){return this.streamingTasks.has(r)}}class Ek{constructor(){N(this,"destChannelMediaInfos",new Map),N(this,"srcChannelMediaInfo",void 0)}setSrcChannelInfo(r){lP(r),this.srcChannelMediaInfo=r}addDestChannelInfo(r){lP(r),this.destChannelMediaInfos.set(r.channelName,r)}removeDestChannelInfo(r){NS(r),this.destChannelMediaInfos.delete(r)}getSrcChannelMediaInfo(){return this.srcChannelMediaInfo}getDestChannelMediaInfo(){return this.destChannelMediaInfos}}function _k(n){if(!(n instanceof Ek))return new Q(W.INVALID_PARAMS,"Config should be instance of [ChannelMediaRelayConfiguration]").throw();const r=n.getSrcChannelMediaInfo(),o=n.getDestChannelMediaInfo();if(!r)return new Q(W.INVALID_PARAMS,"srcChannelMediaInfo should not be empty").throw();if(o.size===0)return new Q(W.INVALID_PARAMS,"destChannelMediaInfo should not be empty").throw()}class VX extends Rn{constructor(r,o,s){super(),N(this,"ws",void 0),N(this,"requestId",1),N(this,"heartBeatTimer",void 0),N(this,"joinInfo",void 0),N(this,"clientId",void 0),N(this,"onOpen",()=>{this.emit("open"),this.startHeartBeatCheck()}),N(this,"onClose",l=>{this.emit("close"),this.dispose()}),N(this,"onMessage",l=>{const h=JSON.parse(l.data);if(!h||h.command!=="serverResponse"||!h.requestId)return h&&h.command==="serverStatus"&&h.serverStatus&&h.serverStatus.command?(this.emit("status",h.serverStatus),void this.emit(h.serverStatus.command,h.serverStatus)):void 0;this.emit("req_".concat(h.requestId),h)}),this.joinInfo=r,this.clientId=o,this.ws=new mu("cross-channel-".concat(this.clientId),s),this.ws.on(it.RECONNECTING,()=>{this.ws.reconnectMode="retry",this.emit("reconnecting")}),this.ws.on(it.CONNECTED,this.onOpen),this.ws.on(it.ON_MESSAGE,this.onMessage),this.ws.on(it.CLOSED,this.onClose)}isConnect(){return this.ws.state==="connected"}sendMessage(r){const o=this.requestId++;return r.requestId=o,r.seq=o,this.ws.sendMessage(r),o}waitStatus(r){return new xe((o,s)=>{const l=window.setTimeout(()=>{s(new Q(W.TIMEOUT,"wait status timeout, status: ".concat(r)))},5e3);this.once(r,h=>{window.clearTimeout(l),h.state&&h.state!==0?s(new Q(W.CROSS_CHANNEL_WAIT_STATUS_ERROR,"wait status error, status: ".concat(r))):o(void 0)}),this.once("dispose",()=>{window.clearTimeout(l),s(new Q(W.WS_ABORT))})})}async request(r){if(this.ws.state==="closed")throw new Q(W.WS_DISCONNECT);const o=()=>new xe((p,v)=>{this.ws.once(it.CLOSED,()=>v(new Q(W.WS_ABORT))),this.ws.once(it.CONNECTED,p)});this.ws.state!=="connected"&&await o();const s=this.sendMessage(r),l=new xe((p,v)=>{const E=()=>{v(new Q(W.WS_ABORT))};this.ws.once(it.RECONNECTING,E),this.ws.once(it.CLOSED,E),this.once("req_".concat(s),p),ni(3e3).then(()=>{this.removeAllListeners("req_".concat(s)),this.ws.off(it.RECONNECTING,E),this.ws.off(it.CLOSED,E),v(new Q(W.TIMEOUT,"cross channel ws request timeout"))})}),h=await l;if(!h||h.code!==200)throw new Q(W.CROSS_CHANNEL_SERVER_ERROR_RESPONSE,"response: ".concat(JSON.stringify(h)));return h}async connect(r){this.ws.removeAllListeners(it.REQUEST_NEW_URLS),this.ws.on(it.REQUEST_NEW_URLS,o=>{o(r)}),await this.ws.init(r)}dispose(){this.clearHeartBeatCheck(),this.emit("dispose"),this.removeAllListeners(),this.ws.close()}sendPing(r){const o=this.requestId++;return r.requestId=o,this.ws.sendMessage(r),o}startHeartBeatCheck(){this.heartBeatTimer&&window.clearInterval(this.heartBeatTimer),this.heartBeatTimer=window.setInterval(()=>{this.sendPing({command:"ping",appId:this.joinInfo.appId,cname:this.joinInfo.cname,uid:this.joinInfo.uid.toString(),sid:this.joinInfo.sid,ts:+new Date,requestId:0})},3e3)}clearHeartBeatCheck(){window.clearInterval(this.heartBeatTimer),this.heartBeatTimer=void 0}}class BX extends Rn{set state(r){r!==this._state&&(r!==Ii.RELAY_STATE_FAILURE&&(this.errorCode=el.RELAY_OK),this.emit("state",r,this.errorCode),this._state=r)}get state(){return this._state}constructor(r,o,s,l,h){super(),N(this,"joinInfo",void 0),N(this,"sid",void 0),N(this,"clientId",void 0),N(this,"cancelToken",Ao.CancelToken.source()),N(this,"workerToken",void 0),N(this,"requestId",0),N(this,"signal",void 0),N(this,"prevChannelMediaConfig",void 0),N(this,"httpRetryConfig",void 0),N(this,"_resolution",void 0),N(this,"_state",Ii.RELAY_STATE_IDLE),N(this,"errorCode",el.RELAY_OK),N(this,"onStatus",p=>{U.debug("[".concat(this.clientId,"] ChannelMediaStatus: ").concat(JSON.stringify(p))),p&&p.command&&(p.command==="onAudioPacketReceived"&&this.emit("event",ns.PACKET_RECEIVED_AUDIO_FROM_SRC),p.command==="onVideoPacketReceived"&&this.emit("event",ns.PACKET_RECEIVED_VIDEO_FROM_SRC),p.command==="onSrcTokenPrivilegeDidExpire"&&(this.errorCode=el.SRC_TOKEN_EXPIRED,this.state=Ii.RELAY_STATE_FAILURE),p.command==="onDestTokenPrivilegeDidExpire"&&(this.errorCode=el.DEST_TOKEN_EXPIRED,this.state=Ii.RELAY_STATE_FAILURE))}),N(this,"onReconnect",async()=>{U.debug("[".concat(this.clientId,"] ChannelMediaSocket disconnect, reconnecting")),this.emit("event",ns.NETWORK_DISCONNECTED),this.state=Ii.RELAY_STATE_IDLE,this.prevChannelMediaConfig&&this.sendStartRelayMessage(this.prevChannelMediaConfig).catch(p=>{this.state!==Ii.RELAY_STATE_IDLE&&(U.error("auto restart channel media relay failed",p.toString()),this.errorCode=el.SERVER_CONNECTION_LOST,this.state=Ii.RELAY_STATE_FAILURE)})}),this.joinInfo=r,this.clientId=o,this.sid=iC(),this.signal=new VX(this.joinInfo,this.clientId,s),this.httpRetryConfig=l,this._resolution=h}async startChannelMediaRelay(r){if(this.state!==Ii.RELAY_STATE_IDLE)throw new Q(W.INVALID_OPERATION);this.state=Ii.RELAY_STATE_CONNECTING,await this.connect(),U.debug("[".concat(this.clientId,"] startChannelMediaRelay: connect success"));try{await this.sendStartRelayMessage(r)}catch(o){throw o.data&&o.data.serverResponse&&o.data.serverResponse.command==="SetSourceChannel"?new Q(W.CROSS_CHANNEL_FAILED_JOIN_SRC):o.data&&o.data.serverResponse&&o.serverResponse.command==="SetDestChannelStatus"?new Q(W.CROSS_CHANNEL_FAILED_JOIN_DEST):o.data&&o.data.serverResponse&&o.serverResponse.command==="StartPacketTransfer"?new Q(W.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST):o}this.prevChannelMediaConfig=r}async updateChannelMediaRelay(r){if(this.state!==Ii.RELAY_STATE_RUNNING)throw new Q(W.INVALID_OPERATION);await this.sendUpdateMessage(r),this.prevChannelMediaConfig=r}async setVideoProfile(r){if(this._resolution=r,this.state!==Ii.RELAY_STATE_RUNNING)throw new Q(W.INVALID_OPERATION);const o=this.genMessage(Zr.SetVideoProfile);await this.signal.request(o),U.debug("[".concat(this.clientId,"] startChannelMediaRelay: setVideoProfile success"))}async stopChannelMediaRelay(){await this.sendStopRelayMessage(),U.debug("[".concat(this.clientId,"] stopChannelMediaRelay: send stop message success")),this.state=Ii.RELAY_STATE_IDLE,this.dispose()}dispose(){U.debug("[".concat(this.clientId,"] disposeChannelMediaRelay")),this.cancelToken.cancel(),this.cancelToken=Ao.CancelToken.source(),this.state=Ii.RELAY_STATE_IDLE,this.emit("dispose"),this.signal.dispose(),this.prevChannelMediaConfig=void 0}async connect(){const r=await LX(this.joinInfo,this.cancelToken.token,this.httpRetryConfig);this.workerToken=r.workerToken,await this.signal.connect(r.addressList),this.emit("event",ns.NETWORK_CONNECTED),this.signal.on("status",this.onStatus),this.signal.on("reconnecting",this.onReconnect)}async sendStartRelayMessage(r){const o=this.genMessage(Zr.StopPacketTransfer);await this.signal.request(o),await this.signal.waitStatus("Normal Quit"),U.debug("[".concat(this.clientId,"] startChannelMediaRelay: StopPacketTransfer success"));const s=this.genMessage(Zr.SetSdkProfile,r);await this.signal.request(s),U.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSdkProfile success"));const l=this.genMessage(Zr.SetSourceChannel,r);await this.signal.request(l),await this.signal.waitStatus("SetSourceChannelStatus"),this.emit("event",ns.PACKET_JOINED_SRC_CHANNEL),U.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSourceChannel success"));const h=this.genMessage(Zr.SetSourceUserId,r);await this.signal.request(h),U.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSourceUserId success"));const p=this.genMessage(Zr.SetDestChannel,r);await this.signal.request(p),await this.signal.waitStatus("SetDestChannelStatus"),this.emit("event",ns.PACKET_JOINED_DEST_CHANNEL),U.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetDestChannel success"));const v=this.genMessage(Zr.StartPacketTransfer,r);await this.signal.request(v),this.emit("event",ns.PACKET_SENT_TO_DEST_CHANNEL),this.state=Ii.RELAY_STATE_RUNNING,U.debug("[".concat(this.clientId,"] startChannelMediaRelay: StartPacketTransfer success")),this.setVideoProfile(this._resolution)}async sendUpdateMessage(r){const o=this.genMessage(Zr.UpdateDestChannel,r);await this.signal.request(o),this.emit("event",ns.PACKET_UPDATE_DEST_CHANNEL),U.debug("[".concat(this.clientId,"] sendUpdateMessage: UpdateDestChannel success"))}async sendStopRelayMessage(){const r=this.genMessage(Zr.StopPacketTransfer);await this.signal.request(r),U.debug("[".concat(this.clientId,"] sendStopRelayMessage: StopPacketTransfer success"))}genMessage(r,o){const s=[],l=[],h=[];this.requestId+=1;const p={appId:this.joinInfo.appId,cname:this.joinInfo.cname,uid:this.joinInfo.uid.toString(),sdkVersion:ta,sid:this.sid,ts:Date.now(),requestId:this.requestId,seq:this.requestId,allocate:!0,clientRequest:{}};p.sdkVersion==="4.18.2"&&(p.sdkVersion="0.0.1");let v=null,E=null;switch(r){case Zr.SetSdkProfile:return p.clientRequest={command:"SetSdkProfile",type:"multi_channel"},p;case Zr.SetSourceChannel:if(E=o&&o.getSrcChannelMediaInfo(),!E)throw new Q(W.UNEXPECTED_ERROR,"can not find source config");return p.clientRequest={command:"SetSourceChannel",uid:"0",channelName:E.channelName,token:E.token||this.joinInfo.appId},p;case Zr.SetSourceUserId:if(E=o&&o.getSrcChannelMediaInfo(),!E)throw new Q(W.UNEXPECTED_ERROR,"can not find source config");return p.clientRequest={command:"SetSourceUserId",uid:E.uid+""},p;case Zr.SetDestChannel:if(v=o&&o.getDestChannelMediaInfo(),!v)throw new Q(W.UNEXPECTED_ERROR,"can not find dest config");return v.forEach(T=>{s.push(T.channelName),l.push(T.uid+""),h.push(T.token||this.joinInfo.appId)}),p.clientRequest={command:"SetDestChannel",channelName:s,uid:l,token:h},p;case Zr.StartPacketTransfer:return p.clientRequest={command:"StartPacketTransfer"},p;case Zr.Reconnect:return p.clientRequest={command:"Reconnect"},p;case Zr.StopPacketTransfer:return p.clientRequest={command:"StopPacketTransfer"},p;case Zr.UpdateDestChannel:if(v=o&&o.getDestChannelMediaInfo(),!v)throw new Q(W.UNEXPECTED_ERROR,"can not find dest config");return v.forEach(T=>{s.push(T.channelName),l.push(T.uid+""),h.push(T.token||this.joinInfo.appId)}),p.clientRequest={command:"UpdateDestChannel",channelName:s,uid:l,token:h},p;case Zr.SetVideoProfile:p.clientRequest={command:"SetVideoProfile",width:this._resolution.width,height:this._resolution.height}}return p}}const pC=n=>{const r=document.createElement("canvas");return r.width=2,r.height=2,new xe((o,s)=>{r.toBlob(async l=>{if(r.remove(),l){const h=await yk(l);o({buffer:h,width:r.width,height:r.height})}else s(new Q(W.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED))},n,1)})},yk=async n=>{const r=await n.arrayBuffer();return new Uint8Array(r)};function Sk(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function Ck(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?Sk(Object(o),!0).forEach(function(s){N(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):Sk(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}class fC{get videoElementStatus(){return this._videoElementStatus}set videoElementStatus(r){r!==this._videoElementStatus&&(U.debug("[".concat(this.trackId,"] video-element-status change ").concat(this._videoElementStatus," => ").concat(r)),this._videoElementStatus=r)}constructor(r){N(this,"trackId",void 0),N(this,"config",void 0),N(this,"onFirstVideoFrameDecoded",void 0),N(this,"freezeTimeCounterList",[]),N(this,"renderFreezeAccTime",0),N(this,"isKeepLastFrame",!1),N(this,"timeUpdatedCount",0),N(this,"freezeTime",0),N(this,"playbackTime",0),N(this,"lastTimeUpdatedTime",0),N(this,"autoplayFailed",!1),N(this,"videoTrack",void 0),N(this,"videoElement",void 0),N(this,"cacheVideoElement",void 0),N(this,"videoElementCheckInterval",void 0),N(this,"_videoElementStatus",Jr.NONE),N(this,"isGettingVideoDimensions",!1),N(this,"startGetVideoDimensions",()=>{const o=()=>{if(this.isGettingVideoDimensions=!0,this.videoElement.videoWidth*this.videoElement.videoHeight>4)return U.debug("[".concat(this.trackId,"] current video dimensions:"),this.videoElement.videoWidth,this.videoElement.videoHeight),void(this.isGettingVideoDimensions=!1);setTimeout(o,500)};!this.isGettingVideoDimensions&&o()}),N(this,"autoResumeAfterInterruption",()=>{this.videoTrack&&this.videoTrack.readyState==="live"&&Gt.curState==="running"&&(U.debug("[track-".concat(this.trackId,"] video element paused, auto resume for ").concat(ZN())),ix()?(this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):(this.videoElement.pause(),this.videoElement.play()))}),N(this,"handleVideoEvents",o=>{switch(o.type){case"play":case"playing":this.startGetVideoDimensions(),this.videoElementStatus=Jr.PLAYING;break;case"loadeddata":if(this.onFirstVideoFrameDecoded&&this.onFirstVideoFrameDecoded(),this.cacheVideoElement){try{this.cacheVideoElement.srcObject=null,this.cacheVideoElement.remove()}catch{}this.cacheVideoElement=void 0}break;case"canplay":this.videoElementStatus=Jr.CANPLAY;break;case"stalled":this.videoElementStatus=Jr.STALLED;break;case"suspend":this.videoElementStatus=Jr.SUSPEND;break;case"pause":this.videoElementStatus=Jr.PAUSED,Ti()||ks()||bi()&&this.autoplayFailed||!this.videoTrack||this.videoTrack.readyState!=="live"||(U.debug("[track-".concat(this.trackId,"] video element paused, auto resume")),this.videoElement.play());break;case"waiting":this.videoElementStatus=Jr.WAITING;break;case"abort":this.videoElementStatus=Jr.ABORT;break;case"ended":this.videoElementStatus=Jr.ENDED;break;case"emptied":this.videoElementStatus=Jr.EMPTIED;break;case"error":{this.videoElementStatus=Jr.ERROR;const s=this.videoElement.error;s&&U.error("[".concat(this.trackId,"] media error, code: ").concat(s.code,", message: ").concat(s.message));break}case"timeupdate":{const s=performance.now();if(this.timeUpdatedCount+=1,this.timeUpdatedCount<10)return void(this.lastTimeUpdatedTime=s);const l=s-this.lastTimeUpdatedTime,h=this.lastTimeUpdatedTime;if(this.lastTimeUpdatedTime=s,uc.lastVisibleTime<uc.lastHiddenTime||h<uc.lastHiddenTime||h<uc.lastVisibleTime)return;for(l>ie("VIDEO_FREEZE_DURATION")&&(this.freezeTime+=l),this.playbackTime+=l;this.playbackTime>=6e3;){this.playbackTime-=6e3;const p=Math.min(6e3,this.freezeTime);this.freezeTimeCounterList.push(p),this.freezeTime=Math.max(0,this.freezeTime-6e3)}break}}}),N(this,"autoResumeAfterInterruptionOnIOS15_16",()=>{this.videoTrack&&this.videoTrack.readyState==="live"&&(U.debug("[track-".concat(this.trackId,"] video element paused, auto resume for ").concat(ZN())),ix()?(this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):(this.videoElement.pause(),this.videoElement.play()))}),this.trackId=r.trackId,this.config=r,r.element instanceof HTMLVideoElement?this.videoElement=r.element:this.videoElement=document.createElement("video"),Gt.on(Sr.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),Gt.on(Sr.IOS_15_16_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15_16)}getVideoElement(){return this.videoElement}getContainerElement(){var r;return(r=this.videoElement.parentElement)!==null&&r!==void 0?r:void 0}updateConfig(r){this.config=r,this.trackId=r.trackId,r.element!==this.videoElement&&(this.destroy(),this.videoElement=r.element),this.videoTrack&&this.initVideoElement()}updateVideoTrack(r){this.videoTrack!==r&&(this.videoTrack=r,this.initVideoElement())}play(r){const o=this.videoElement.play();o&&o.catch&&o.catch(l=>{r&&Me.autoplayFailed(r,"video",l.message,this.trackId),l.name==="NotAllowedError"?(U.warning("detected video element autoplay failed",l),this.autoplayFailed=!0,this.handleAutoPlayFailed()):U.warning("[".concat(this.trackId,"] play warning: "),l)});const s=Ht();if((s.name==="Safari"&&Number(s.version)===15||md())&&o&&o.then&&o.catch){const l=()=>{this.config.mirror&&(this.videoElement.style.transform="rotateY(180deg)")};o.then(l).catch(l)}}getCurrentFrame(){const r=document.createElement("canvas");r.width=this.videoElement.videoWidth,r.height=this.videoElement.videoHeight;const o=r.getContext("2d");if(!o)return U.error("create canvas context failed!"),new ImageData(2,2);o.drawImage(this.videoElement,0,0,r.width,r.height);const s=o.getImageData(0,0,r.width,r.height);return r.remove(),s}async getCurrentFrameToUint8Array(r){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const s=document.createElement("canvas");s.width=this.videoElement.videoWidth,s.height=this.videoElement.videoHeight;const l=s.getContext("2d");return l?(l.drawImage(this.videoElement,0,0,s.width,s.height),new xe((h,p)=>{s.toBlob(async v=>{if(s.remove(),v){const E=await yk(v);h({buffer:E,width:s.width,height:s.height})}else p(new Q(W.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED))},r,o<0?.1:o>1?1:o)})):await pC(r)}destroy(){Gt.off(Sr.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),Gt.off(Sr.IOS_15_16_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15_16),this.videoElement.srcObject=null,this.resetVideoElement(),this.freezeTimeCounterList=[]}initVideoElement(){if(this.videoElementStatus=Jr.INIT,!this.videoElementCheckInterval&&(bk.forEach(h=>{this.videoElement.addEventListener(h,this.handleVideoEvents)}),this.videoElementCheckInterval=window.setInterval(()=>{(function(h){return h!==document.body&&document.body.contains(h)})(this.videoElement)||(this.videoElementStatus=Jr.DESTROYED)},1e3),ie("ENABLE_VIDEO_FRAME_CALLBACK"))){var r,o;let h;const p=(v,E)=>{if(this.videoElementStatus===Jr.PLAYING){if(h){const I=E.presentationTime-h.presentationTime;I>ie("VIDEO_FREEZE_DURATION")&&uc.lastVisibleTime>=uc.lastHiddenTime&&h.timestamp>uc.lastVisibleTime&&h.timestamp>uc.lastHiddenTime&&(this.renderFreezeAccTime+=I)}h=Ck(Ck({},E),{},{timestamp:v})}var T,C;ie("ENABLE_VIDEO_FRAME_CALLBACK")&&((T=(C=this.videoElement).requestVideoFrameCallback)===null||T===void 0||T.call(C,p))};(r=(o=this.videoElement).requestVideoFrameCallback)===null||r===void 0||r.call(o,p)}this.videoElement.controls=!1,this.videoElement.setAttribute("playsinline",""),T0()&&(this.videoElement.poster="noposter");const s=Ht();s.name==="Safari"&&Number(s.version)===15||md()||!this.config.mirror||(this.videoElement.style.transform="rotateY(180deg)"),this.config.fit?this.videoElement.style.objectFit=this.config.fit:this.videoElement.style.objectFit="cover",this.videoElement.setAttribute("muted",""),this.videoElement.muted=!0,this.videoElement.srcObject&&this.videoElement.srcObject instanceof MediaStream?this.videoElement.srcObject.getVideoTracks()[0]!==this.videoTrack&&(this.videoElement.srcObject=this.videoTrack?new MediaStream([this.videoTrack]):null,Pn()&&this.videoElement.load()):(this.videoElement.srcObject=this.videoTrack?new MediaStream([this.videoTrack]):null,Pn()&&this.videoElement.load());const l=this.videoElement.play();l!==void 0&&l.catch(h=>{U.debug("[".concat(this.trackId,"] playback interrupted"),h.toString())})}resetVideoElement(){bk.forEach(r=>{this.videoElement&&this.videoElement.removeEventListener(r,this.handleVideoEvents)}),this.videoElementCheckInterval&&(window.clearInterval(this.videoElementCheckInterval),this.videoElementCheckInterval=void 0),this.videoElementStatus=Jr.NONE}handleAutoPlayFailed(){const r=o=>{o.preventDefault(),this.videoElement.play().then(()=>{U.debug("[".concat(this.trackId,"] Video element for trackId:").concat(this.trackId," autoplay resumed."))}).catch(s=>{U.error(s)}),this.autoplayFailed=!1,Ip()?document.body.removeEventListener("click",r,!0):(document.body.removeEventListener("touchstart",r,!0),document.body.removeEventListener("mousedown",r,!0))};Ip()?document.body.addEventListener("click",r,!0):(document.body.addEventListener("touchstart",r,!0),document.body.addEventListener("mousedown",r,!0)),IP()}}const bk=["play","playing","loadeddata","canplay","pause","stalled","suspend","waiting","abort","emptied","ended","timeupdate","error"];class Tk extends fC{constructor(r){super(r),N(this,"container",void 0),N(this,"slot",void 0),this.slot=r.element,this.updateConfig(r)}updateConfig(r){this.config=r,this.trackId=r.trackId;const o=r.element;o!==this.slot&&(this.destroy(),this.slot=o),this.createElements()}updateVideoTrack(r){this.videoTrack!==r&&(this.videoTrack=r,this.createElements())}play(r){var o;(o=this.container)!==null&&o!==void 0&&o.contains(this.videoElement)&&super.play(r)}getCurrentFrame(){var r;return(r=this.container)!==null&&r!==void 0&&r.contains(this.videoElement)?super.getCurrentFrame():new ImageData(2,2)}async getCurrentFrameToUint8Array(r){var o;let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return(o=this.container)!==null&&o!==void 0&&o.contains(this.videoElement)?await super.getCurrentFrameToUint8Array(r,s):await pC(r)}destroy(){if(super.destroy(),this.videoElement.remove(),this.videoElement=document.createElement("video"),this.container){try{this.container.remove(),this.slot.removeChild(this.container)}catch{}this.container=void 0}}createElements(){this.container||(this.container=document.createElement("div")),this.container.id="agora-video-player-".concat(this.trackId),this.container.style.width="100%",this.container.style.height="100%",this.container.style.position="relative",this.container.style.overflow="hidden",this.videoTrack?(this.container.style.backgroundColor="black",ie("KEEP_LAST_FRAME")&&this.isKeepLastFrame&&this.videoElement.paused&&this.resetVideoElement(),this.mountedVideoElement()):this.unmountedVideoElement(),this.slot.appendChild(this.container)}mountedVideoElement(){var r;!this.container||(r=this.container)!==null&&r!==void 0&&r.contains(this.videoElement)||this.container.appendChild(this.videoElement),super.initVideoElement(),this.videoElement.id="video_".concat(this.trackId),this.videoElement.className="agora_video_player",this.videoElement.style.width="100%",this.videoElement.style.height="100%",this.videoElement.style.position="absolute",this.videoElement.style.left="0",this.videoElement.style.top="0"}unmountedVideoElement(){var r;if((r=this.container)!==null&&r!==void 0&&r.contains(this.videoElement)){super.resetVideoElement();try{this.container&&this.container.removeChild(this.videoElement)}catch{}this.videoElement=document.createElement("video")}}resetVideoElement(){var r;(r=this.container)!==null&&r!==void 0&&r.contains(this.videoElement)&&(super.resetVideoElement(),this.cacheVideoElement=this.videoElement,this.videoElement=document.createElement("video"))}getContainerElement(){return this.container}}function eg(n){const r={};n.facingMode&&(r.facingMode=n.facingMode),n.cameraId&&(r.deviceId={exact:n.cameraId});const o=ou(n.encoderConfig);return r.width=o.width,r.height=o.height,!ax()&&o.frameRate&&(r.frameRate=o.frameRate),Ht().name===qt.EDGE&&typeof r.frameRate=="object"&&(r.frameRate.max=60),Pn()&&(r.frameRate={ideal:30,max:30}),r}function $X(n){const r={};n.screenSourceType&&(r.mediaSource=n.screenSourceType),n.extensionId&&eS()&&(r.extensionId=n.extensionId);const{displaySurface:o,selfBrowserSurface:s,surfaceSwitching:l,systemAudio:h}=n;(tS(107)||ex(107)||tx(93))&&(o&&(Rr(o,"displaySurface",["browser","window","monitor"]),r.displaySurface=o),s?(Rr(s,"selfBrowserSurface",["exclude","include"]),r.selfBrowserSurface=s):r.selfBrowserSurface="include",l&&(Rr(l,"surfaceSwitching",["exclude","include"]),r.surfaceSwitching=l)),(tS(105)||ex(105)||tx(91))&&h&&(Rr(h,"systemAudio",["exclude","include"]),r.systemAudio=h),n.electronScreenSourceId&&(r.sourceId=n.electronScreenSourceId);const p=n.encoderConfig?CS(n.encoderConfig):null;return r.mandatory={chromeMediaSource:"desktop",maxWidth:p?p.width:void 0,maxHeight:p?p.height:void 0},p&&(p.frameRate&&(typeof p.frameRate=="number"?(r.mandatory.maxFrameRate=p.frameRate,r.mandatory.minFrameRate=p.frameRate):(r.mandatory.maxFrameRate=p.frameRate.max||p.frameRate.ideal||p.frameRate.exact||void 0,r.mandatory.minFrameRate=p.frameRate.min||p.frameRate.ideal||p.frameRate.exact||void 0),r.frameRate=p.frameRate),p.width&&(r.width=p.width),p.height&&(r.height=p.height)),r}function Rk(n){const r={};if(ax()||(n.AGC!==void 0&&(r.autoGainControl=n.AGC),n.AEC!==void 0&&(r.echoCancellation=n.AEC),n.ANS!==void 0&&(r.noiseSuppression=n.ANS,eS()&&n.ANS&&(r.googHighpassFilter=n.ANS))),n.encoderConfig){const o=M0(n.encoderConfig);r.channelCount=o.stereo?2:1,r.sampleRate=o.sampleRate,r.sampleSize=o.sampleSize}return n.microphoneId&&(r.deviceId={exact:n.microphoneId}),T0()&&(r.sampleRate=void 0),r}var Md,tg;(function(n){n.COVERED="COVERED",n.POSITION="POSITION",n.SIZE="SIZE",n.STYLE="STYLE"})(Md||(Md={})),function(n){n.UNMOUNTED="UNMOUNTED",n.INVALID_HTML_ELEMENT="INVALID_HTML_ELEMENT"}(tg||(tg={}));var Ik,wk,Ok,Ak,Nk,xk,Pk,Dk,kk,Lk,Mk,Uk,jk,Fk,Vk,Bk,$k,Hk,Wk,Gk,zk,Kk,Yk,qk,Rt,Xk,Jk,Qk,Zk,eL,tL,nL,rL,oa,iL=new class{constructor(){N(this,"_clientSize",null),N(this,"getClientWidth",()=>document.documentElement?document.documentElement.clientWidth:document.body.clientWidth),N(this,"getClientHeight",()=>document.documentElement?document.documentElement.clientHeight:document.body.clientHeight),N(this,"getStyle",n=>window.getComputedStyle(n,null)),N(this,"checkCssVisibleProperty",n=>{let r=!0;const o=this.getStyle(n),{display:s,visibility:l,opacity:h,filter:p}=o;return(s==="none"||["hidden","collapse"].includes(l)||Number(h)<.1)&&(r=!1),r?(p&&p.split(" ").filter(v=>{const E=v.split("(")[0];return["brightness","blur","opacity"].includes(E)}).map(v=>{const[E,T]=v.split(/\(|\)/);return[E,Number(T.match(/^[0-9\.]+/))]}).forEach(v=>{const[E,T]=v;switch(E){case"brightness":(T<.1||T>3)&&(r=!1);break;case"blur":T>3&&(r=!1);break;case"opacity":T<.1&&(r=!1)}}),r):!1}),N(this,"checkPropertyUpToAllParentNodes",(n,r)=>{let o=!0,s=!0;const l=p=>r(p);let h=n;for(;h&&s;)l(h)||(o=!1,s=!1),h=h.parentElement,h||(s=!1);return o}),N(this,"checkActualCssVisibleIncludeInherit",n=>this.checkPropertyUpToAllParentNodes(n,this.checkCssVisibleProperty)),N(this,"getSizeAboutClient",n=>{const{width:r,height:o,left:s,right:l,top:h,bottom:p}=n.getBoundingClientRect(),v=this.getClientWidth(),E=this.getClientHeight();return{width:r,height:o,left:s,right:l,top:h,bottom:p,clientWidth:v,clientHeight:E,clientMin:Math.min(v,E)}}),N(this,"checkActualSize",()=>{const{width:n,height:r,clientMin:o}=this._clientSize;return this.checkSizeIsVisible(n,r,o)}),N(this,"elementFromPoint",(n,r)=>document.elementFromPoint?document.elementFromPoint(n,r):null),N(this,"checkCoverForAPoint",(n,r,o)=>{const s=this.elementFromPoint(n,r);return s!==null&&s!==o}),N(this,"getPointPositionList",()=>{const{width:n,height:r,left:o,top:s}=this._clientSize,l=n/6,h=r/6,p=[],v=10**6;for(let E=0;E<5;E++)for(let T=0;T<5;T++){const C=(o*v+(E===0?.1:E===4?(l*E*v-1e5)/v:l*E)*v)/v,I=(s*v+(T===0?.1:T===4?(h*T*v-1e5)/v:h*T)*v)/v;p.push({x:C,y:I})}return[...p]}),N(this,"checkElementCover",n=>this.getPointPositionList().map(r=>this.checkCoverForAPoint(r.x,r.y,n)).filter(r=>!!r).length>6),N(this,"checkSizeIsVisible",(n,r,o)=>(n>50||o/n<=10)&&(r>50||o/r<=10)),N(this,"checkSizeOfPartInClient",()=>{const{left:n,right:r,top:o,bottom:s,clientHeight:l,clientWidth:h,clientMin:p}=this._clientSize;let v,E,T,C;if(n<0)v=0;else{if(!(n<h))return!1;v=n}if(r<0)return!1;if(E=r<h?r:h,o<0)T=0;else{if(!(o<l))return!1;T=o}if(s<0)return!1;C=s<l?s:l;const I=E-v,L=C-T;return this.checkSizeIsVisible(I,L,p)}),N(this,"returnHiddenResult",n=>(this._clientSize=null,{visible:!1,reason:n})),N(this,"checkOneElementVisible",n=>{if(n instanceof HTMLElement){if(this.checkElementIsMountedOnDom(n)){if(this.checkActualCssVisibleIncludeInherit(n)){if(this._clientSize=this.getSizeAboutClient(n),this.checkElementCover(n))return this.returnHiddenResult(Md.COVERED);{const r=this.checkActualSize(),o=this.checkSizeOfPartInClient();return r&&!o?this.returnHiddenResult(Md.POSITION):r?(this._clientSize=null,{visible:!0}):this.returnHiddenResult(Md.SIZE)}}return this.returnHiddenResult(Md.STYLE)}return this.returnHiddenResult(tg.UNMOUNTED)}return this.returnHiddenResult(tg.INVALID_HTML_ELEMENT)}),N(this,"checkElementIsMountedOnDom",n=>this.checkPropertyUpToAllParentNodes(n,r=>r.nodeName.toUpperCase()!=="HTML"?r.parentElement!==null:!!document.documentElement))}};function oL(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function Fp(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?oL(Object(o),!0).forEach(function(s){N(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):oL(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}let rr=(Ik=ze({argsMap:(n,r,o)=>[n.getTrackId(),typeof r=="string"?r:r instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement",o]}),wk=kn(),Ok=ze({argsMap:n=>[n.getTrackId()]}),Ak=Od("LocalVideoTrack","_enabledMutex"),Nk=ze({argsMap:(n,r)=>[n.getTrackId(),r]}),xk=kn(),Pk=Od("LocalVideoTrack","_enabledMutex"),Dk=ze({argsMap:(n,r)=>[n.getTrackId(),r]}),kk=kn(),Lk=ze({argsMap:(n,r)=>[n.getTrackId(),r]}),Mk=kn(),Uk=kn(),jk=ze({argsMap:(n,r,o)=>[n.getTrackId(),r,o]}),Fk=kn(),Vk=kn(),Bk=kn(),$k=kn(),Hk=kn(),Wk=kn(),Gk=kn(),zk=ze({argsMap:(n,r)=>[n.getTrackId(),r.name]}),Kk=ze({argsMap:n=>[n.getTrackId()]}),Yk=ze({argsMap:n=>[n.getTrackId()]}),qk=ze({argsMap:(n,r,o)=>[n.getTrackId(),r.label,o]}),_e((Rt=class jV extends qS{get isPlaying(){return!(!this._player||this._player.videoElementStatus!==Jr.PLAYING)}get processorContext(){return this._processorContext}set processorContext(r){this._processorContext=r}get __className__(){return"LocalVideoTrack"}constructor(r,o,s,l,h,p){if(super(r,h),N(this,"trackMediaType","video"),N(this,"_player",void 0),N(this,"_videoVisibleTimer",null),N(this,"_previousVideoVisibleStatus",void 0),N(this,"_clearPreviousVideoVisibleStatus",()=>this._previousVideoVisibleStatus=void 0),N(this,"_encoderConfig",void 0),N(this,"_scalabiltyMode",{numSpatialLayers:1,numTemporalLayers:1}),N(this,"_optimizationMode",void 0),N(this,"_videoHeight",void 0),N(this,"_videoWidth",void 0),N(this,"_forceBitrateLimit",void 0),N(this,"_enabled",!0),N(this,"processorDestination",void 0),N(this,"_processorContext",void 0),bi()){const{width:v,height:E}=r.getSettings();this._videoWidth=v,this._videoHeight=E}else this.updateMediaStreamTrackResolution();this._encoderConfig=o,this._scalabiltyMode=s,this._optimizationMode=l,this._hints=p||[],this._hints.indexOf(pr.SCREEN_TRACK)===-1&&this.updateBitrateFromProfile(),o&&this._hints.indexOf(pr.CUSTOM_TRACK)!==-1&&this.setEncoderConfiguration(o),this.processorContext=new WP(this.getTrackId(),"local"),this.processorDestination=new HP(this.processorContext),this.bindProcessorDestinationEvents()}play(r){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof r=="string"){const l=document.getElementById(r);l?r=l:(U.warning("[".concat(this.getTrackId(),'] can not find "#').concat(r,'" element, use document.body')),r=document.body)}U.debug("[".concat(this.getTrackId(),"] start video playback in ").concat(r instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement"),JSON.stringify(o));const s=Fp(Fp(Fp({},this._getDefaultPlayerConfig()),o),{},{trackId:this.getTrackId(),element:r});this._player?this._player.updateConfig(s):(r instanceof HTMLVideoElement?this._player=new fC(s):this._player=new Tk(s),this._player.updateVideoTrack(this._mediaStreamTrack)),this._player.play(),this._videoVisibleTimer&&window.clearInterval(this._videoVisibleTimer),this._clearPreviousVideoVisibleStatus(),this._videoVisibleTimer=window.setInterval(()=>{try{const l=this.getVideoElementVisibleStatus();this.safeEmit(tl.VIDEO_ELEMENT_VISIBLE_STATUS,l)}catch{}},ie("CHECK_VIDEO_VISIBLE_INTERVAL"))}stop(){this._player&&(this._videoVisibleTimer&&(window.clearInterval(this._videoVisibleTimer),this._videoVisibleTimer=null),this._clearPreviousVideoVisibleStatus(),this._player.destroy(),this._player=void 0,U.debug("[".concat(this.getTrackId(),"] stop video playback")))}async setEnabled(r,o){if(!o){if(r===this._enabled)return;this.stateCheck("enabled",r)}if(U.info("[".concat(this.getTrackId(),"] start setEnabled"),r),!r){this._originMediaStreamTrack.enabled=!1;try{await Ln(this,Ze.NEED_DISABLE_TRACK,this)}catch(s){throw U.error("[".concat(this.getTrackId(),"] setEnabled to false error"),s.toString()),s}return o||(this._enabled=!1),void U.info("[".concat(this.getTrackId(),"] setEnabled to false success"))}this._originMediaStreamTrack.enabled=!0;try{await Ln(this,Ze.NEED_ENABLE_TRACK,this)}catch(s){throw U.error("[".concat(this.getTrackId(),"] setEnabled to true error"),s.toString()),s}U.info("[".concat(this.getTrackId(),"] setEnabled to true success")),o||(this._enabled=!0)}async setMuted(r){r!==this._muted&&(this.stateCheck("muted",r),this._muted=r,this._originMediaStreamTrack.enabled=!r,U.debug("[".concat(this.getTrackId(),"] start set muted: ").concat(r)),r?await Ln(this,Ze.NEED_MUTE_TRACK,this):await Ln(this,Ze.NEED_UNMUTE_TRACK,this))}async setEncoderConfiguration(r,o){if(!this._enabled)throw new Q(W.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled");if(r=ou(r),this._forceBitrateLimit&&(r.bitrateMax=this._forceBitrateLimit.max_bitrate?this._forceBitrateLimit.max_bitrate:r.bitrateMax,r.bitrateMin=this._forceBitrateLimit.min_bitrate?this._forceBitrateLimit.min_bitrate:r.bitrateMin),r.width||r.height||r.frameRate){const s=eg({encoderConfig:r});(bi()||Ti()||ks())&&(s.deviceId=void 0),U.debug("[".concat(this.getTrackId(),"] setEncoderConfiguration applyConstraints"),JSON.stringify(r),JSON.stringify(s));try{await this._originMediaStreamTrack.applyConstraints(s),this.updateMediaStreamTrackResolution()}catch(l){const h=new Q(W.UNEXPECTED_ERROR,l.toString());throw U.error("[".concat(this.getTrackId(),"] applyConstraints error"),h.toString()),h}}this._encoderConfig=r,this._hints.indexOf(pr.SCREEN_TRACK)===-1&&this.updateBitrateFromProfile();try{await Ln(this,Ze.NEED_UPDATE_VIDEO_ENCODER,this)}catch(s){return s.throw()}}getStats(){return Lp(()=>{U.warning("[deprecated] LocalVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalVideoStats instead")},"localVideoTrackGetStatsWarning"),Aa(this,Ze.GET_STATS)||Fp({},MS)}async setBeautyEffect(r){U.error("LocalVideoTrack.setBeautyEffect was deprecated, please migrate to agora-extension-beauty-effect")}getCurrentFrameData(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}async getCurrentFrameImage(r){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return this._player?this._player.getCurrentFrameToUint8Array(r,o):await pC(r)}clone(r,o,s,l){const h=this._mediaStreamTrack.clone();return new jV(h,r,o,s,l)}async setBitrateLimit(r){if(U.debug("[".concat(this.getTrackId(),"] set bitrate limit, ").concat(JSON.stringify(r))),r){this._forceBitrateLimit=r,this._encoderConfig&&(this._encoderConfig.bitrateMax?this._encoderConfig.bitrateMax=this._encoderConfig.bitrateMax<r.max_bitrate?this._encoderConfig.bitrateMax:r.max_bitrate:this._encoderConfig.bitrateMax=r.max_bitrate,this._encoderConfig.bitrateMin,this._encoderConfig.bitrateMin=r.min_bitrate);try{await Ln(this,Ze.NEED_UPDATE_VIDEO_ENCODER,this)}catch(o){return o.throw()}}}async setOptimizationMode(r){if(r!=="motion"&&r!=="detail"&&r!=="balanced")return void U.error(W.INVALID_PARAMS,"optimization mode must be motion, detail or balanced");const o=this._optimizationMode;try{this._optimizationMode=r,await Ln(this,Ze.SET_OPTIMIZATION_MODE,this)}catch(s){throw this._optimizationMode=o,U.error("[".concat(this.getTrackId(),"] set optimization mode failed"),s.toString()),s}U.info("[".concat(this.getTrackId(),"] set optimization mode success (").concat(r,")"))}setScalabiltyMode(r){if(r.numSpatialLayers===1&&r.numTemporalLayers!==1)return U.error(W.INVALID_PARAMS,"scalability mode currently not supported, no SVC."),void(this._scalabiltyMode={numSpatialLayers:1,numTemporalLayers:1});this._scalabiltyMode=r,U.info("[".concat(this.getTrackId(),"] set scalability mode success (").concat(r,")"))}updateMediaStreamTrackResolution(){VD(this._originMediaStreamTrack).then(r=>{let[o,s]=r;this._videoHeight=s,this._videoWidth=o}).catch(q0)}_updatePlayerSource(){this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}_getDefaultPlayerConfig(){return{fit:"contain"}}updateBitrateFromProfile(){if(!this._encoderConfig)return;const{width:r,height:o,frameRate:s}=this.getMediaStreamTrackSettings();if(!r||!o||!s)return;const[l,h]=function(p,v,E){const T=ie("BITRATE_ADAPTER_TYPE");let C;const I=200*Math.pow(E/15,.6)*Math.pow(p*v/640/360,.75),L=I;if(T==="STANDARD_BITRATE")C=4*I;else{if(T!=="COMPATIABLE_BITRATE")return;C=2*I}return[Math.floor(C),Math.floor(L)]}(r,o,s)||[void 0,void 0];this._encoderConfig.bitrateMin||this._encoderConfig.bitrateMax||(this._encoderConfig.bitrateMin=h,this._encoderConfig.bitrateMax=l,U.debug("[".concat(this.getTrackId(),"] update bitrate from profile, [w: ").concat(r,", h: ").concat(o,", fps: ").concat(s,"] => [brMax: ").concat(l,", brMin: ").concat(h,"]")))}getVideoElementVisibleStatus(){try{var r,o;const s=this==null||(r=this._player)===null||r===void 0?void 0:r.getContainerElement(),l={track:this,element:this==null||(o=this._player)===null||o===void 0?void 0:o.getVideoElement(),slot:s==null?void 0:s.parentElement},{element:h,slot:p}=l;if(this.isPlaying&&h instanceof HTMLVideoElement&&p instanceof HTMLElement){const v=iL.checkOneElementVisible(h),E=Object.assign({},v);if(E.visible!==this._previousVideoVisibleStatus){this._previousVideoVisibleStatus=E.visible;const T=Me.reportApiInvoke(null,{tag:bn.TRACER,name:Zn.LOCAL_VIDEO_TRACK_GET_VIDEO_VISIBLE,options:[this.getTrackId()]});E.visible?T.onSuccess("Video is visible"):T.onSuccess("Invisible because of ".concat(E.reason))}return E}return}catch(s){throw new Q(W.GET_VIDEO_ELEMENT_VISIBLE_ERROR,s.message)}}async renewMediaStreamTrack(r){}pipe(r){if(this.processor===r)return r;if(r._source)throw new Q(W.INVALID_OPERATION,"Processor ".concat(r.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=r,this.processor._source=this,r.updateInput({track:this._originMediaStreamTrack,context:this.processorContext}),r}unpipe(){if(!this.processor)return;const r=this.processor;this.processor._source=void 0,this.processor=void 0,r.reset()}close(){super.close(),this.unbindProcessorDestinationEvents(),this.unbindProcessorContextEvents(),this.unpipe(),this.processorDestination._source&&this.processorDestination._source.unpipe()}async replaceTrack(r,o){if(!(r instanceof MediaStreamTrack))throw new Q(W.INVALID_PARAMS,"track should be an instance of MediaStreamTrack");if(r.kind!=="video")throw new Q(W.INVALID_PARAMS,"track should be a video MediaStreamTrack");await this._updateOriginMediaStreamTrack(r,o,!0),this.updateMediaStreamTrackResolution()}bindProcessorDestinationEvents(){this.processorDestination.on(ei.ON_TRACK,async r=>{r?r!==this._mediaStreamTrack&&(this._mediaStreamTrack=r,this._updatePlayerSource(),await Ln(this,Ze.NEED_REPLACE_TRACK,this)):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await Ln(this,Ze.NEED_REPLACE_TRACK,this))})}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(ei.ON_TRACK)}unbindProcessorContextEvents(){this.processorContext.removeAllListeners(eo.REQUEST_UPDATE_CONSTRAINTS),this.processorContext.removeAllListeners(eo.REQUEST_CONSTRAINTS)}}).prototype,"play",[Ik,wk],Object.getOwnPropertyDescriptor(Rt.prototype,"play"),Rt.prototype),_e(Rt.prototype,"stop",[Ok],Object.getOwnPropertyDescriptor(Rt.prototype,"stop"),Rt.prototype),_e(Rt.prototype,"setEnabled",[Ak,Nk,xk],Object.getOwnPropertyDescriptor(Rt.prototype,"setEnabled"),Rt.prototype),_e(Rt.prototype,"setMuted",[Pk,Dk,kk],Object.getOwnPropertyDescriptor(Rt.prototype,"setMuted"),Rt.prototype),_e(Rt.prototype,"setEncoderConfiguration",[Lk,Mk],Object.getOwnPropertyDescriptor(Rt.prototype,"setEncoderConfiguration"),Rt.prototype),_e(Rt.prototype,"getStats",[Uk],Object.getOwnPropertyDescriptor(Rt.prototype,"getStats"),Rt.prototype),_e(Rt.prototype,"setBeautyEffect",[jk,Fk],Object.getOwnPropertyDescriptor(Rt.prototype,"setBeautyEffect"),Rt.prototype),_e(Rt.prototype,"getCurrentFrameData",[Vk],Object.getOwnPropertyDescriptor(Rt.prototype,"getCurrentFrameData"),Rt.prototype),_e(Rt.prototype,"getCurrentFrameImage",[Bk],Object.getOwnPropertyDescriptor(Rt.prototype,"getCurrentFrameImage"),Rt.prototype),_e(Rt.prototype,"setBitrateLimit",[$k],Object.getOwnPropertyDescriptor(Rt.prototype,"setBitrateLimit"),Rt.prototype),_e(Rt.prototype,"setOptimizationMode",[Hk],Object.getOwnPropertyDescriptor(Rt.prototype,"setOptimizationMode"),Rt.prototype),_e(Rt.prototype,"setScalabiltyMode",[Wk],Object.getOwnPropertyDescriptor(Rt.prototype,"setScalabiltyMode"),Rt.prototype),_e(Rt.prototype,"updateMediaStreamTrackResolution",[Gk],Object.getOwnPropertyDescriptor(Rt.prototype,"updateMediaStreamTrackResolution"),Rt.prototype),_e(Rt.prototype,"pipe",[zk],Object.getOwnPropertyDescriptor(Rt.prototype,"pipe"),Rt.prototype),_e(Rt.prototype,"unpipe",[Kk],Object.getOwnPropertyDescriptor(Rt.prototype,"unpipe"),Rt.prototype),_e(Rt.prototype,"close",[Yk],Object.getOwnPropertyDescriptor(Rt.prototype,"close"),Rt.prototype),_e(Rt.prototype,"replaceTrack",[qk],Object.getOwnPropertyDescriptor(Rt.prototype,"replaceTrack"),Rt.prototype),Rt),aL=(Xk=ze({argsMap:(n,r)=>[n.getTrackId(),r]}),Jk=kn(),Qk=Od("CameraVideoTrack","_enabledMutex"),Zk=ze({argsMap:(n,r)=>[n.getTrackId(),r]}),eL=kn(),tL=ze({argsMap:(n,r)=>[n.getTrackId(),r]}),nL=kn(),rL=ze({argsMap:n=>[n.getTrackId()]}),_e((oa=class extends rr{get __className__(){return"CameraVideoTrack"}constructor(n,r,o,s,l,h){super(n,ou(r.encoderConfig),s,l,h),N(this,"_config",void 0),N(this,"_originalConstraints",void 0),N(this,"_constraints",void 0),N(this,"_enabled",!0),N(this,"_deviceName","default"),N(this,"tryResumeVideoForIOS15_16WeChat",async()=>{(md()||nS())&&!function(){const p=Ht();if(p.os!==qr.IOS||!p.osVersion)return!1;const v=p.osVersion.split(".");return Number(v[0])===15&&Number(v[1])>=2}()&&ox()&&this._enabled&&!this._isClosed&&(U.debug("[".concat(this.getTrackId(),"] try capture camera media device for interrupted iOS 15 device on WeChat.")),await this.renewMediaStreamTrack())}),this._config=r,this._originalConstraints=o,this._constraints=o,this._deviceName=n.label,this._encoderConfig=ou(this._config.encoderConfig),Gt.on(Sr.IOS_15_16_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat),Gt.on(Sr.IOS_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat),this.bindProcessorContextEvents()}async setDevice(n){if(U.info("[".concat(this.getTrackId(),"] set device to ").concat(n)),this._enabled)try{const r=await Mo.getDeviceById(n),o={};o.video=Fp({},this._constraints),o.video.deviceId={exact:n},o.video.facingMode=void 0,this._originMediaStreamTrack.stop();let s=null;try{s=await Oa(o,this.getTrackId())}catch(l){throw U.error("[".concat(this.getTrackId(),"] setDevice failed"),l.toString()),s=await Oa({video:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(s.getVideoTracks()[0],!1),l}await this._updateOriginMediaStreamTrack(s.getVideoTracks()[0],!1),this.updateMediaStreamTrackResolution(),this._deviceName=r.label,this._config.cameraId=n,this._constraints.deviceId={exact:n}}catch(r){throw U.error("[".concat(this.getTrackId(),"] setDevice error"),r.toString()),r}else try{const r=await Mo.getDeviceById(n);this._deviceName=r.label,this._config.cameraId=n,this._constraints.deviceId={exact:n}}catch(r){throw U.error("[".concat(this.getTrackId(),"] setDevice error"),r.toString()),r}U.info("[".concat(this.getTrackId(),"] setDevice success"))}async setEnabled(n,r){if(!r){if(n===this._enabled)return;this.stateCheck("enabled",n)}if(U.info("[".concat(this.getTrackId(),"] start setEnabled"),n),n){try{if(this.isExternalTrack)this._originMediaStreamTrack.enabled=!0;else{const o=await Oa({video:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(o.getVideoTracks()[0],!1)}await Ln(this,Ze.NEED_ENABLE_TRACK,this)}catch(o){throw U.error("[".concat(this.getTrackId(),"] setEnabled true error"),o.toString()),o}this.updateMediaStreamTrackResolution(),U.info("[".concat(this.getTrackId(),"] setEnabled to true success")),r||(this._enabled=!0)}else{this.isExternalTrack?this._originMediaStreamTrack.enabled=!1:(this._originMediaStreamTrack.onended=null,this._originMediaStreamTrack.stop()),r||(this._enabled=!1);try{await Ln(this,Ze.NEED_DISABLE_TRACK,this)}catch(o){throw U.error("[".concat(this.getTrackId(),"] setEnabled to false error"),o.toString()),o}U.info("[".concat(this.getTrackId(),"] setEnabled to false success"))}}async setEncoderConfiguration(n,r){if(!this._enabled)throw new Q(W.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled");n=ou(n),this._forceBitrateLimit&&(n.bitrateMax=this._forceBitrateLimit.max_bitrate?this._forceBitrateLimit.max_bitrate:n.bitrateMax,n.bitrateMin=this._forceBitrateLimit.min_bitrate?this._forceBitrateLimit.min_bitrate:n.bitrateMin);const o=nr(this._config);o.encoderConfig=n;const s=eg(o);(bi()||Ti()||ks())&&(s.deviceId=void 0),U.debug("[".concat(this.getTrackId(),"] setEncoderConfiguration applyConstraints"),JSON.stringify(n),JSON.stringify(s));try{await this._originMediaStreamTrack.applyConstraints(s),this.updateMediaStreamTrackResolution()}catch(l){const h=new Q(W.UNEXPECTED_ERROR,l.toString());throw U.error("[".concat(this.getTrackId(),"] applyConstraints error"),h.toString()),h}this._config=o,this._constraints=s,this._originalConstraints=s,this._encoderConfig=n,this._hints.indexOf(pr.SCREEN_TRACK)===-1&&this.updateBitrateFromProfile();try{await Ln(this,Ze.NEED_UPDATE_VIDEO_ENCODER,this)}catch(l){return l.throw()}}_getDefaultPlayerConfig(){return{mirror:!0,fit:"cover"}}onTrackEnded(){if((Ti()||ks())&&this._enabled&&!this._isClosed&&Gt.duringInterruption){const n=async()=>{Gt.off(Sr.IOS_INTERRUPTION_END,n),this._enabled&&!this._isClosed&&(U.debug("[".concat(this.getTrackId(),"] try capture camera media device for interrupted iOS device.")),await this.setEnabled(!1),await this.setEnabled(!0))};Gt.on(Sr.IOS_INTERRUPTION_END,n)}else U.debug("[".concat(this.getTrackId(),"] track ended")),this.safeEmit(tl.TRACK_ENDED)}async renewMediaStreamTrack(n){const r=n||this._constraints,o=Mo.searchDeviceIdByName(this._deviceName);if(o&&!r.deviceId&&(r.deviceId={exact:o}),this._enabled){const s=await Oa({video:r},this.getTrackId());this._constraints=r,await this._updateOriginMediaStreamTrack(s.getVideoTracks()[0],!0),this.updateMediaStreamTrackResolution()}}close(){super.close(),Gt.off(Sr.IOS_15_16_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat),Gt.off(Sr.IOS_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat)}bindProcessorContextEvents(){this.processorContext.on(eo.REQUEST_UPDATE_CONSTRAINTS,async(n,r,o)=>{try{const s=Object.assign({},this._originalConstraints,...n);await this.renewMediaStreamTrack(s),r()}catch(s){o(s)}}),this.processorContext.on(eo.REQUEST_CONSTRAINTS,async n=>{n(this._originMediaStreamTrack.getSettings())})}}).prototype,"setDevice",[Xk,Jk],Object.getOwnPropertyDescriptor(oa.prototype,"setDevice"),oa.prototype),_e(oa.prototype,"setEnabled",[Qk,Zk,eL],Object.getOwnPropertyDescriptor(oa.prototype,"setEnabled"),oa.prototype),_e(oa.prototype,"setEncoderConfiguration",[tL,nL],Object.getOwnPropertyDescriptor(oa.prototype,"setEncoderConfiguration"),oa.prototype),_e(oa.prototype,"close",[rL],Object.getOwnPropertyDescriptor(oa.prototype,"close"),oa.prototype),oa);class mC{get hasVideo(){return this._video_enabled_&&!this._video_muted_&&this._video_added_}get hasAudio(){return this._audio_enabled_&&!this._audio_muted_&&this._audio_added_}get audioTrack(){if(this.hasAudio)return this._audioTrack}get videoTrack(){if(this.hasVideo)return this._videoTrack}constructor(r,o){N(this,"uid",void 0),N(this,"_uintid",void 0),N(this,"_trust_in_room_",!0),N(this,"_trust_audio_enabled_state_",!0),N(this,"_trust_video_enabled_state_",!0),N(this,"_trust_audio_mute_state_",!0),N(this,"_trust_video_mute_state_",!0),N(this,"_audio_muted_",!1),N(this,"_video_muted_",!1),N(this,"_audio_enabled_",!0),N(this,"_video_enabled_",!0),N(this,"_audio_added_",!1),N(this,"_video_added_",!1),N(this,"_trust_video_stream_added_state_",!0),N(this,"_trust_audio_stream_added_state_",!0),N(this,"_audioTrack",void 0),N(this,"_videoTrack",void 0),N(this,"_audioSSRC",void 0),N(this,"_videoSSRC",void 0),N(this,"_audioOrtc",void 0),N(this,"_videoOrtc",void 0),N(this,"_cname",void 0),N(this,"_rtxSsrcId",void 0),this.uid=r,this._uintid=o}}var HX=vN,WX=ud,GX=d0;ki({target:"Promise",stat:!0},{try:function(n){var r=WX.f(this),o=GX(n);return(o.error?r.reject:r.resolve)(o.value),r.promise}});var gC=HX,zX=ki,KX=R,YX=c,qX=kp,XX=ft,JX=zr,QX=zc,sL=TS,ZX=mP,eJ=SP,tJ=An,cL=ar("isConcatSpreadable"),lL=9007199254740991,uL="Maximum allowed index exceeded",dL=KX.TypeError,nJ=tJ>=51||!YX(function(){var n=[];return n[cL]=!1,n.concat()[0]!==n}),rJ=eJ("concat"),iJ=function(n){if(!XX(n))return!1;var r=n[cL];return r!==void 0?!!r:qX(n)};zX({target:"Array",proto:!0,forced:!nJ||!rJ},{concat:function(n){var r,o,s,l,h,p=JX(this),v=ZX(p,0),E=0;for(r=-1,s=arguments.length;r<s;r++)if(iJ(h=r===-1?p:arguments[r])){if(E+(l=QX(h))>lL)throw dL(uL);for(o=0;o<l;o++,E++)o in h&&sL(v,E,h[o])}else{if(E>=lL)throw dL(uL);sL(v,E++,h)}return v.length=E,v}});var hL={},oJ=fe,aJ=st,pL=Km.f,sJ=Bx,fL=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];hL.f=function(n){return fL&&oJ(n)=="Window"?function(r){try{return pL(r)}catch{return sJ(fL)}}(n):pL(aJ(n))};var Vp={},cJ=ar;Vp.f=cJ;var mL=Ye,lJ=Jn,uJ=Vp,dJ=Qa.f,Br=function(n){var r=mL.Symbol||(mL.Symbol={});lJ(r,n)||dJ(r,n,{value:uJ.f(n)})},Ud=ki,vC=R,hJ=qe,pJ=P,Bp=K,fJ=S,jd=j,gu=Gn,EC=c,ii=Jn,mJ=kp,gJ=M,vJ=ft,EJ=b,_C=qi,yC=Za,_J=zr,ng=st,SC=kr,gL=ad,CC=oe,$p=Jm,vL=Z_,yJ=Km,EL=hL,bC=J_,_L=F,yL=Qa,SJ=Q_,SL=$,CJ=vy,TC=s0,Hp=_r.exports,CL=Ym,bL=Xo,TL=ar,bJ=Vp,TJ=Br,RJ=yp,RL=a0,rg=vP.forEach,Uo=zm("hidden"),ig="Symbol",IL=TL("toPrimitive"),IJ=RL.set,wL=RL.getterFor(ig),as=Object.prototype,ol=vC.Symbol,vu=ol&&ol.prototype,OL=vC.TypeError,RC=vC.QObject,Wp=hJ("JSON","stringify"),AL=_L.f,al=yL.f,NL=EL.f,wJ=SL.f,xL=fJ([].push),pc=Hp("symbols"),Gp=Hp("op-symbols"),IC=Hp("string-to-symbol-registry"),wC=Hp("symbol-to-string-registry"),OJ=Hp("wks"),OC=!RC||!RC.prototype||!RC.prototype.findChild,AC=jd&&EC(function(){return $p(al({},"a",{get:function(){return al(this,"a",{value:7}).a}})).a!=7})?function(n,r,o){var s=AL(as,r);s&&delete as[r],al(n,r,o),s&&n!==as&&al(as,r,s)}:al,NC=function(n,r){var o=pc[n]=$p(vu);return IJ(o,{type:ig,tag:n,description:r}),jd||(o.description=r),o},og=function(n,r,o){n===as&&og(Gp,r,o),yC(n);var s=SC(r);return yC(o),ii(pc,s)?(o.enumerable?(ii(n,Uo)&&n[Uo][s]&&(n[Uo][s]=!1),o=$p(o,{enumerable:CC(0,!1)})):(ii(n,Uo)||al(n,Uo,CC(1,{})),n[Uo][s]=!0),AC(n,s,o)):al(n,s,o)},xC=function(n,r){yC(n);var o=ng(r),s=vL(o).concat(PC(o));return rg(s,function(l){jd&&!Bp(PL,o,l)||og(n,l,o[l])}),n},PL=function(n){var r=SC(n),o=Bp(wJ,this,r);return!(this===as&&ii(pc,r)&&!ii(Gp,r))&&(!(o||!ii(this,r)||!ii(pc,r)||ii(this,Uo)&&this[Uo][r])||o)},DL=function(n,r){var o=ng(n),s=SC(r);if(o!==as||!ii(pc,s)||ii(Gp,s)){var l=AL(o,s);return!l||!ii(pc,s)||ii(o,Uo)&&o[Uo][s]||(l.enumerable=!0),l}},kL=function(n){var r=NL(ng(n)),o=[];return rg(r,function(s){ii(pc,s)||ii(CL,s)||xL(o,s)}),o},PC=function(n){var r=n===as,o=NL(r?Gp:ng(n)),s=[];return rg(o,function(l){!ii(pc,l)||r&&!ii(as,l)||xL(s,pc[l])}),s};if(gu||(TC(vu=(ol=function(){if(EJ(vu,this))throw OL("Symbol is not a constructor");var n=arguments.length&&arguments[0]!==void 0?gL(arguments[0]):void 0,r=bL(n),o=function(s){this===as&&Bp(o,Gp,s),ii(this,Uo)&&ii(this[Uo],r)&&(this[Uo][r]=!1),AC(this,r,CC(1,s))};return jd&&OC&&AC(as,r,{configurable:!0,set:o}),NC(r,n)}).prototype,"toString",function(){return wL(this).tag}),TC(ol,"withoutSetter",function(n){return NC(bL(n),n)}),SL.f=PL,yL.f=og,SJ.f=xC,_L.f=DL,yJ.f=EL.f=kL,bC.f=PC,bJ.f=function(n){return NC(TL(n),n)},jd&&al(vu,"description",{configurable:!0,get:function(){return wL(this).description}})),Ud({global:!0,wrap:!0,forced:!gu,sham:!gu},{Symbol:ol}),rg(vL(OJ),function(n){TJ(n)}),Ud({target:ig,stat:!0,forced:!gu},{for:function(n){var r=gL(n);if(ii(IC,r))return IC[r];var o=ol(r);return IC[r]=o,wC[o]=r,o},keyFor:function(n){if(!_C(n))throw OL(n+" is not a symbol");if(ii(wC,n))return wC[n]},useSetter:function(){OC=!0},useSimple:function(){OC=!1}}),Ud({target:"Object",stat:!0,forced:!gu,sham:!jd},{create:function(n,r){return r===void 0?$p(n):xC($p(n),r)},defineProperty:og,defineProperties:xC,getOwnPropertyDescriptor:DL}),Ud({target:"Object",stat:!0,forced:!gu},{getOwnPropertyNames:kL,getOwnPropertySymbols:PC}),Ud({target:"Object",stat:!0,forced:EC(function(){bC.f(1)})},{getOwnPropertySymbols:function(n){return bC.f(_J(n))}}),Wp&&Ud({target:"JSON",stat:!0,forced:!gu||EC(function(){var n=ol();return Wp([n])!="[null]"||Wp({a:n})!="{}"||Wp(Object(n))!="{}"})},{stringify:function(n,r,o){var s=CJ(arguments),l=r;if((vJ(r)||n!==void 0)&&!_C(n))return mJ(r)||(r=function(h,p){if(gJ(l)&&(p=Bp(l,this,h,p)),!_C(p))return p}),s[1]=r,pJ(Wp,null,s)}}),!vu[IL]){var AJ=vu.valueOf;TC(vu,IL,function(n){return Bp(AJ,this)})}RJ(ol,ig),CL[Uo]=!0,Br("asyncIterator"),Br("hasInstance"),Br("isConcatSpreadable"),Br("iterator"),Br("match"),Br("matchAll"),Br("replace"),Br("search"),Br("species"),Br("split"),Br("toPrimitive"),Br("toStringTag"),Br("unscopables"),yp(R.JSON,"JSON",!0);var NJ=Ye.Symbol;Br("asyncDispose"),Br("dispose"),Br("matcher"),Br("metadata"),Br("observable"),Br("patternMatch"),Br("replaceAll");var LL=NJ,ML=Vp.f("asyncIterator"),xJ=ML;function UL(n){this.wrapped=n}function zp(n){var r,o;function s(h,p){try{var v=n[h](p),E=v.value,T=E instanceof UL;gC.resolve(T?E.wrapped:E).then(function(C){T?s(h==="return"?"return":"next",C):l(v.done?"return":"normal",C)},function(C){s("throw",C)})}catch(C){l("throw",C)}}function l(h,p){switch(h){case"return":r.resolve({value:p,done:!0});break;case"throw":r.reject(p);break;default:r.resolve({value:p,done:!1})}(r=r.next)?s(r.key,r.arg):o=null}this._invoke=function(h,p){return new gC(function(v,E){var T={key:h,arg:p,resolve:v,reject:E,next:null};o?o=o.next=T:(r=o=T,s(h,p))})},typeof n.return!="function"&&(this.return=void 0)}function Na(n){return function(){return new zp(n.apply(this,arguments))}}function It(n){return new UL(n)}zp.prototype[typeof LL=="function"&&xJ||"@@asyncIterator"]=function(){return this},zp.prototype.next=function(n){return this._invoke("next",n)},zp.prototype.throw=function(n){return this._invoke("throw",n)},zp.prototype.return=function(n){return this._invoke("return",n)};var PJ=Vp.f("iterator");function ag(n,r){var o={},s=!1;function l(h,p){return s=!0,p=new gC(function(v){v(n[h](p))}),{done:!1,value:r(p)}}return o[LL!==void 0&&PJ||"@@iterator"]=function(){return this},o.next=function(h){return s?(s=!1,h):l("next",h)},typeof n.throw=="function"&&(o.throw=function(h){if(s)throw s=!1,h;return l("throw",h)}),typeof n.return=="function"&&(o.return=function(h){return s?(s=!1,h):l("return",h)}),o}var jL=ML,ir={exports:{}};function FL(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function VL(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?FL(Object(o),!0).forEach(function(s){N(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):FL(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}function DC(n,r,o,s,l,h,p){let v=[],E=[],T=[],C=[],I=!1,L=!1;if(ir.exports.parse(n).mediaDescriptions.forEach(V=>{p&&p!==V.attributes.direction||(V.media.mediaType!=="video"||I||(E=V.attributes.payloads,C=V.attributes.extmaps,I=!0),V.media.mediaType!=="audio"||L||(v=V.attributes.payloads,T=V.attributes.extmaps,L=!0))}),!C||E.length===0)throw new Error("Cannot get video capabilities from SDP.");if(!T||v.length===0)throw new Error("Cannot get audio capabilities from SDP.");return E.forEach(V=>{var Y;(Y=V.rtpMap)!==null&&Y!==void 0&&Y.clockRate&&(V.rtpMap.clockRate=parseInt(V.rtpMap.clockRate))}),v.forEach(V=>{var Y;(Y=V.rtpMap)!==null&&Y!==void 0&&Y.clockRate&&(V.rtpMap.clockRate=parseInt(V.rtpMap.clockRate))}),r&&(v=v.filter(V=>{var Y;return((Y=V.rtpMap)===null||Y===void 0?void 0:Y.encodingName.toLowerCase())!=="rtx"}),E=E.filter(V=>{var Y;return((Y=V.rtpMap)===null||Y===void 0?void 0:Y.encodingName.toLowerCase())!=="rtx"})),o&&(E=E.filter(V=>{var Y;return!/(red)|(ulpfec)|(flexfec)/i.test(((Y=V.rtpMap)===null||Y===void 0?void 0:Y.encodingName)||"")})),s&&(v=v.filter(V=>{var Y;return!/(red)|(ulpfec)|(flexfec)/i.test(((Y=V.rtpMap)===null||Y===void 0?void 0:Y.encodingName)||"")})),l&&(l==null?void 0:l.length)>0&&(v=v.filter(V=>{var Y;return l.includes(((Y=V.rtpMap)===null||Y===void 0?void 0:Y.encodingName.toLowerCase())||"")})),h&&(h==null?void 0:h.length)>0&&(E=E.filter(V=>{var Y;return h.includes(((Y=V.rtpMap)===null||Y===void 0?void 0:Y.encodingName.toLowerCase())||"")})),{audioCodecs:v,videoCodecs:E,audioExtensions:T,videoExtensions:C}}function Eu(n){const r=ir.exports.parse(n);let o,s;for(const l of r.mediaDescriptions){if(!o){const h=l.attributes.iceUfrag,p=l.attributes.icePwd;if(!h||!p)throw new Error("Cannot get iceUfrag or icePwd from SDP.");o={iceUfrag:h,icePwd:p}}if(!s){const h=l.attributes.fingerprints;h.length>0&&(s={fingerprints:h})}}if(!s&&r.attributes.fingerprints.length>0&&(s={fingerprints:r.attributes.fingerprints}),!s||!o)throw new Error("Cannot get iceParameters or dtlsParameters from SDP.");return{iceParameters:o,dtlsParameters:s}}function BL(n,r){const o=[],s=n.attributes.ssrcGroups.filter(p=>p.semantic==="FID"),l=n.attributes.ssrcGroups.find(p=>p.semantic==="SIM"),h=n.attributes.ssrcs;if(l)l.ssrcIds.forEach(p=>{var v;const E=(v=s.find(T=>T.ssrcIds[0]===p))===null||v===void 0?void 0:v.ssrcIds[1];o.push({ssrcId:p,rtx:r?E:void 0})});else if(s.length>0){const p=s[0].ssrcIds[0],v=s[0].ssrcIds[1];o.push({ssrcId:p,rtx:r?v:void 0})}else{if(h.length===0)throw new Error("No ssrcs found on local media description.");o.push({ssrcId:h[0].ssrcId})}return o}function $L(n,r){const{cname:o}=n;let s;r&&r.ip&&typeof r.port=="number"?(s=[{foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:r.ip,port:r.port.toString(),type:"host",extension:{}}],U.debug("Using remote candidate from AP ".concat(r.ip,":").concat(r.port)),r.ip6&&(s.push({foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:r.ip6,port:r.port.toString(),type:"host",extension:{}}),U.debug("Using IPV6 remote candidate from AP ".concat(r.ip6,":").concat(r.port)))):s=n.iceParameters.candidates.map(v=>({foundation:v.foundation,componentId:"1",transport:v.protocol,priority:v.priority.toString(),connectionAddress:v.ip,port:v.port.toString(),type:v.type,extension:{}}));const l={fingerprints:n.dtlsParameters.fingerprints.map(v=>({hashFunction:v.algorithm,fingerprint:v.fingerprint}))},h={iceUfrag:n.iceParameters.iceUfrag,icePwd:n.iceParameters.icePwd};let p;switch(n.dtlsParameters.role){case"server":p="passive";break;case"client":p="active";break;case"auto":p="actpass"}return{dtlsParameters:l,iceParameters:h,candidates:s,rtpCapabilities:MC(n.rtpCapabilities),setup:p,cname:o}}function aa(n,r,o){const s=[],l=[];return n.forEach(h=>{let{ssrcId:p,rtx:v}=h;const E=pn(8,"track-"),T={ssrcId:p,attributes:VL({label:E,mslabel:o=o||pn(10,""),msid:"".concat(o," ").concat(E)},r&&{cname:r})};if(s.push(T),v!==void 0){const C={ssrcId:v,attributes:VL({label:E,mslabel:o,msid:"".concat(o," ").concat(E)},r&&{cname:r})};s.push(C),l.push({semantic:"FID",ssrcIds:[p,v]})}}),n.length>1&&l.push({semantic:"SIM",ssrcIds:n.map(h=>{let{ssrcId:p}=h;return p})}),{ssrcs:s,ssrcGroups:l}}function Fd(n,r){r instanceof ti&&n.attributes.payloads.forEach(o=>{var s;const l=(s=o.rtpMap)===null||s===void 0?void 0:s.encodingName.toLowerCase();if(!l||["opus","pcmu","pcma","g722"].indexOf(l)===-1)return;o.fmtp||(o.fmtp={parameters:{}}),o.fmtp.parameters.minptime="10",o.fmtp.parameters.useinbandfec="1";const h=r._encoderConfig;h&&l!=="pcmu"&&l!=="pcma"&&l!=="g722"&&(h.bitrate&&!Pn()&&(o.fmtp.parameters.maxaveragebitrate="".concat(Math.floor(1e3*h.bitrate))),h.sampleRate&&(o.fmtp.parameters.maxplaybackrate="".concat(h.sampleRate),o.fmtp.parameters["sprop-maxcapturerate"]="".concat(h.sampleRate)),h.stereo&&(o.fmtp.parameters.stereo="1",o.fmtp.parameters["sprop-stereo"]="1"))})}function kC(n){const r=n.attributes.unrecognized.findIndex(o=>o.attField==="x-google-flag"&&o.attValue==="conference");r!==-1&&n.attributes.unrecognized.splice(r,1)}function LC(n,r){if(!(r instanceof rr&&r._encoderConfig&&r._hints.indexOf(pr.SCREEN_TRACK)===-1))return;const o=r._encoderConfig;zn().supportMinBitrate&&o.bitrateMin&&n.attributes.payloads.forEach(s=>{var l;["h264","h265","vp8","vp9","av1"].includes(((l=s.rtpMap)===null||l===void 0?void 0:l.encodingName.toLowerCase())||"")&&(s.fmtp||(s.fmtp={parameters:{}}),s.fmtp.parameters["x-google-min-bitrate"]="".concat(o.bitrateMin))}),zn().supportMinBitrate&&!r._hints.includes(pr.LOW_STREAM)&&o.bitrateMax&&n.attributes.payloads.forEach(s=>{var l;["h264","h265","vp8","vp9","av1"].includes(((l=s.rtpMap)===null||l===void 0?void 0:l.encodingName.toLowerCase())||"")&&(s.fmtp||(s.fmtp={parameters:{}}),s.fmtp.parameters["x-google-start-bitrate"]="".concat(ie("X_GOOGLE_START_BITRATE")||Math.floor(o.bitrateMax)))})}function HL(n){if(n.media.mediaType!=="video")return;const r=Ht();if(r.name!==qt.SAFARI&&r.os!==qr.IOS)return;const o=n.attributes.extmaps.findIndex(s=>/video-orientation/g.test(s.extensionName));o!==-1&&n.attributes.extmaps.splice(o,1)}function sg(n,r,o){if(!r)return;let s,l;if(n.media.mediaType==="video"?(s=o.videoExtensions,l=o.videoCodecs):(s=o.audioExtensions,l=o.audioCodecs),r.twcc===!0){const h=s.find(p=>p.extensionName==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01");h&&(n.attributes.extmaps.find(p=>p.extensionName==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01")||n.attributes.extmaps.push({entry:h.entry,extensionName:"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"}),function(p,v){return v.filter(E=>!!p.find(T=>T.payloadType===E.payloadType&&!!T.rtcpFeedbacks.find(C=>C.type==="transport-cc")))}(l,n.attributes.payloads).forEach(p=>{p.rtcpFeedbacks.find(v=>v.type==="transport-cc")||p.rtcpFeedbacks.push({type:"transport-cc"})}))}else if(r.twcc===!1){const h=n.attributes.extmaps.findIndex(p=>p.extensionName==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01");h!==-1&&n.attributes.extmaps.splice(h,1),n.attributes.payloads.forEach(p=>{const v=p.rtcpFeedbacks.findIndex(E=>E.type==="transport-cc");v!==-1&&p.rtcpFeedbacks.splice(v,1)})}if(r.remb===!0){const h=s.find(p=>p.extensionName==="http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time");h&&(n.attributes.extmaps.find(p=>p.extensionName==="http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time")||n.attributes.extmaps.push({entry:h.entry,extensionName:"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"}),function(p,v){return v.filter(E=>!!p.find(T=>T.payloadType===E.payloadType&&!!T.rtcpFeedbacks.find(C=>C.type==="goog-remb")))}(l,n.attributes.payloads).forEach(p=>{p.rtcpFeedbacks.find(v=>v.type==="goog-remb")||p.rtcpFeedbacks.push({type:"goog-remb"})}))}else if(r.remb===!1){const h=n.attributes.extmaps.findIndex(p=>p.extensionName==="http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time");h!==-1&&n.attributes.extmaps.splice(h,1),n.attributes.payloads.forEach(p=>{const v=p.rtcpFeedbacks.findIndex(E=>E.type==="goog-remb");v!==-1&&p.rtcpFeedbacks.splice(v,1)})}}function WL(n,r,o){if(Pn()||n.media.mediaType!=="video"||!(r instanceof rr)||o!=="vp9"&&o!=="vp8"||o==="vp8"&&!ie("SIMULCAST")||r._scalabiltyMode===void 0||r._scalabiltyMode.numSpatialLayers<=1)return;const s=o==="vp8"?2:r._scalabiltyMode.numSpatialLayers,l=n.attributes.ssrcs[0],h=n.attributes.ssrcGroups.find(v=>v.semantic==="FID"&&v.ssrcIds[0]===l.ssrcId),p={semantic:"SIM",ssrcIds:[l.ssrcId]};for(let v=1;v<s;v++)n.attributes.ssrcs.push({ssrcId:l.ssrcId+v,attributes:nr(l.attributes)}),p.ssrcIds.push(l.ssrcId+v),h&&(n.attributes.ssrcs.push({ssrcId:h.ssrcIds[1]+v,attributes:nr(l.attributes)}),n.attributes.ssrcGroups.push({semantic:"FID",ssrcIds:[l.ssrcId+v,h.ssrcIds[1]+v]}));n.attributes.ssrcGroups.unshift(p)}async function GL(n,r,o,s,l){const h=new RTCPeerConnection;h.addTransceiver("video",{direction:"sendonly"}),h.addTransceiver("audio",{direction:"sendonly"}),h.addTransceiver("video",{direction:"recvonly"}),h.addTransceiver("audio",{direction:"recvonly"});const p=(await h.createOffer()).sdp,v=DC(p,n,r,o,s,l,"sendonly"),E=DC(p,n,r,o,s,l,"recvonly"),T={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},C={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},I={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]};if(cg(v,E,"videoExtensions",T,C,I),cg(v,E,"videoCodecs",T,C,I),cg(v,E,"audioExtensions",T,C,I),cg(v,E,"audioCodecs",T,C,I),ie("RAISE_H264_BASELINE_PRIORITY")){const L=I.videoCodecs.findIndex(V=>{var Y,q;return((Y=V.rtpMap)===null||Y===void 0?void 0:Y.encodingName.toLocaleLowerCase())==="h264"&&((q=V.fmtp)===null||q===void 0?void 0:q.parameters["profile-level-id"])==="42001f"});if(L!==-1){const V=I.videoCodecs.findIndex(Y=>{var q;return((q=Y.rtpMap)===null||q===void 0?void 0:q.encodingName.toLocaleLowerCase())==="h264"});if(V<L){U.debug("raising H264 baseline profile priority");const Y=I.videoCodecs[L];I.videoCodecs.splice(L,1),I.videoCodecs.splice(V,0,Y)}V!==-1&&(C.videoCodecs=C.videoCodecs.filter(Y=>{var q,X;return!(((q=Y.rtpMap)===null||q===void 0?void 0:q.encodingName.toLocaleLowerCase())==="h264"&&((X=Y.fmtp)===null||X===void 0?void 0:X.parameters["profile-level-id"])!=="42001f")})),V!==-1&&ie("FILTER_SEND_H264_BASELINE")&&(T.videoCodecs=T.videoCodecs.filter(Y=>{var q,X;return!(((q=Y.rtpMap)===null||q===void 0?void 0:q.encodingName.toLocaleLowerCase())==="h264"&&((X=Y.fmtp)===null||X===void 0?void 0:X.parameters["profile-level-id"])!=="42001f")}))}}try{h.close()}catch{}return{send:T,recv:C,sendrecv:I}}function cg(n,r,o,s,l,h){if(o==="videoExtensions"||o==="audioExtensions"){const p=[];return n[o].forEach(v=>{r[o].some((E,T)=>{if(v.entry===E.entry&&v.extensionName===E.extensionName)return p.push(T),!0})?h[o].push(v):s[o].push(v)}),void r[o].forEach((v,E)=>{p.indexOf(E)===-1&&l[o].push(v)})}if(o==="videoCodecs"||o==="audioCodecs"){const p=[];return n[o].forEach(v=>{r[o].some((E,T)=>{if(v.payloadType===E.payloadType&&JSON.stringify(v)===JSON.stringify(E))return p.push(T),!0})?h[o].push(v):s[o].push(v)}),void r[o].forEach((v,E)=>{p.indexOf(E)===-1&&l[o].push(v)})}}function MC(n){const{send:r,recv:o,sendrecv:s}=n;if(!s){if(!r||!o)throw new Error("cannot merge rtp capabilities because one of send or recv is empty!");return{send:r,recv:o}}let l,h;return r?(l={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},l.audioCodecs=[...r.audioCodecs,...s.audioCodecs],l.videoCodecs=[...r.videoCodecs,...s.videoCodecs],l.audioExtensions=[...r.audioExtensions,...s.audioExtensions],l.videoExtensions=[...r.videoExtensions,...s.videoExtensions]):l=s,o?(h={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},h.audioCodecs=[...o.audioCodecs,...s.audioCodecs],h.videoCodecs=[...o.videoCodecs,...s.videoCodecs],h.audioExtensions=[...o.audioExtensions,...s.audioExtensions],h.videoExtensions=[...o.videoExtensions,...s.videoExtensions]):h=s,{send:l,recv:h}}function sl(n){n.media.mediaType==="audio"&&n.attributes.payloads.filter(r=>{var o;return((o=r.rtpMap)===null||o===void 0?void 0:o.encodingName.toLowerCase())==="opus"}).forEach(r=>{r.fmtp||(r.fmtp={parameters:{}}),r.fmtp.parameters.stereo="1",r.fmtp.parameters["sprop-stereo"]="1"})}function zL(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function KL(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?zL(Object(o),!0).forEach(function(s){N(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):zL(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}(function(n,r){n.exports=(()=>{var o={8:(h,p,v)=>{v.r(p),v.d(p,{Parser:()=>ln,Printer:()=>ro,parse:()=>et,print:()=>Ut});const E=`
`,T="".concat("\r").concat(E),C=" ";let I;function L(Re){return Re>="0"&&Re<="9"}function V(Re){return Re>="!"&&Re<="~"}function Y(Re){return V(Re)||Re>="Â"&&Re<="Ã¿"}function q(Re){return Re==="!"||Re>="#"&&Re<="'"||Re>="*"&&Re<="+"||Re>="-"&&Re<="."||Re>="0"&&Re<="9"||Re>="A"&&Re<="Z"||Re>="^"&&Re<="~"}function X(Re){return Re>="1"&&Re<="9"}function le(Re){return Re>="A"&&Re<="Z"||Re>="a"&&Re<="z"}function he(Re){return Re==="d"||Re==="h"||Re==="m"||Re==="s"}function Se(Re){return Re>""&&Re<"	"||Re>"\v"&&Re<"\f"||Re>""&&Re<"Ã¿"}function De(Re){return le(Re)||L(Re)||Re==="+"||Re==="/"}function be(Re){return L(Re)||le(Re)||Re==="+"||Re==="/"||Re==="-"||Re==="_"}function Te(Re){return le(Re)||L(Re)||Re==="+"||Re==="/"}function ye(Re,k){var J=Object.keys(Re);if(Object.getOwnPropertySymbols){var ne=Object.getOwnPropertySymbols(Re);k&&(ne=ne.filter(function(ve){return Object.getOwnPropertyDescriptor(Re,ve).enumerable})),J.push.apply(J,ne)}return J}function Oe(Re){for(var k=1;k<arguments.length;k++){var J=arguments[k]!=null?arguments[k]:{};k%2?ye(Object(J),!0).forEach(function(ne){Bt(Re,ne,J[ne])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Re,Object.getOwnPropertyDescriptors(J)):ye(Object(J)).forEach(function(ne){Object.defineProperty(Re,ne,Object.getOwnPropertyDescriptor(J,ne))})}return Re}function Bt(Re,k,J){return k in Re?Object.defineProperty(Re,k,{value:J,enumerable:!0,configurable:!0,writable:!0}):Re[k]=J,Re}(function(Re){Re.VERSION="v",Re.ORIGIN="o",Re.SESSION_NAME="s",Re.INFORMATION="i",Re.URI="u",Re.EMAIL="e",Re.PHONE="p",Re.CONNECTION="c",Re.BANDWIDTH="b",Re.TIME="t",Re.REPEAT="r",Re.ZONE_ADJUSTMENTS="z",Re.KEY="k",Re.ATTRIBUTE="a",Re.MEDIA="m"})(I||(I={}));class We{consumeText(k,J){let ne=J;for(;ne<k.length;){const ve=k[ne];if(ve==="\0"||ve==="\r"||ve===E)break;ne+=1}if(ne-J==0)throw new Error("Invalid text, at ".concat(k));return ne}consumeUnicastAddress(k,J,ne){return this.consumeTill(k,J,C)}consumeOneOrMore(k,J,ne){let ve=J;for(;ne(k[ve]);)ve++;if(ve-J==0)throw new Error("Invalid rule at ".concat(J,"."));return ve}consumeSpace(k,J){if(k[J]===C)return J+1;throw new Error("Invalid space at ".concat(J,"."))}consumeIP4Address(k,J){let ne=J;for(let ve=0;ve<4;ve++)if(ne=this.consumeDecimalUChar(k,ne),ve!==3){if(k[ne]!==".")throw new Error("Invalid IP4 address.");ne++}return ne}consumeDecimalUChar(k,J){let ne=J;for(let ot=0;ot<3&&L(k[ne]);ot++,ne++);if(ne-J==0)throw new Error("Invalid decimal uchar.");const ve=parseInt(k.slice(J,ne));if(ve>=0&&ve<=255)return ne;throw new Error("Invalid decimal uchar")}consumeIP6Address(k,J){let ne=this.consumeHexpart(k,J);return k[ne]===":"&&(ne+=1,ne=this.consumeIP4Address(k,ne)),ne}consumeHexpart(k,J){let ne=J;if(k[ne]===":"&&k[ne+1]===":"){ne+=2;try{ne=this.consumeHexseq(k,ne)}catch{}return ne}if(ne=this.consumeHexseq(k,ne),k[ne]===":"&&k[ne+1]===":"){ne+=2;try{ne=this.consumeHexseq(k,ne)}catch{}return ne}return ne}consumeHexseq(k,J){let ne=J;for(;ne=this.consumeHex4(k,ne),k[ne]===":"&&k[ne+1]!==":";)ne+=1;return ne}consumeHex4(k,J){let ne=0;for(;ne<4;ne++)if(!((ve=k[J+ne])>="0"&&ve<="9"||ve>="a"&&ve<="f"||ve>="A"&&ve<="F")){if(ne===0)throw new Error("Invalid hex 4");break}var ve;return J+ne}consumeFQDN(k,J){let ne=J;for(;L(k[ne])||le(k[ne])||k[ne]==="-"||k[ne]===".";)ne+=1;if(ne-J<4)throw new Error("Invalid FQDN");return ne}consumeExtnAddr(k,J){return this.consumeOneOrMore(k,J,Y)}consumeMulticastAddress(k,J,ne){switch(ne){case"IP4":case"ip4":return this.consumeIP4MulticastAddress(k,J);case"IP6":case"ip6":return this.consumeIP6MulticastAddress(k,J);default:try{return this.consumeFQDN(k,J)}catch{return this.consumeExtnAddr(k,J)}}}consumeIP6MulticastAddress(k,J){const ne=this.consumeHexpart(k,J);return k[ne]==="/"?this.consumeInteger(k,ne+1):ne}consumeIP4MulticastAddress(k,J){let ne=J+3;const ve=k.slice(J,ne),ot=parseInt(ve);if(ot<224||ot>239)throw new Error("Invalid IP4 multicast address, IPv4 multicast addresses may be in the range 224.0.0.0 to 239.255.255.255.");for(let un=0;un<3;un++){if(k[ne]!==".")throw new Error("Invalid IP4 multicast address.");ne+=1,ne=this.consumeDecimalUChar(k,ne)}return k[ne]==="/"&&(ne+=1),ne=this.consumeTTL(k,ne),k[ne]==="/"&&(ne=this.consumeInteger(k,ne)),ne}consumeInteger(k,J){if(!X(k[J]))throw new Error("Invalid integer.");for(J+=1;L(k[J]);)J+=1;return J}consumeTTL(k,J){if(k[J]==="0")return J+1;if(!X(k[J]))throw new Error("Invalid TTL.");J+=1;for(let ne=0;ne<2&&L(k[J]);ne++)J+=1;return J}consumeToken(k,J){return this.consumeOneOrMore(k,J,q)}consumeTime(k,J){let ne=J;if(k[ne]==="0")return ne+1;for(X(k[ne])&&(ne+=1);L(k[ne]);)ne++;if(ne-J<10)throw new Error("Invalid time");return ne}consumeAddress(k,J){return this.consumeTill(k,J,C)}consumeTypedTime(k,J){let ne=J;return ne=this.consumeOneOrMore(k,ne,L),he(k[ne])?ne+1:ne}consumeRepeatInterval(k,J){if(!X(k[J]))throw new Error("Invalid repeat interval");for(J+=1;L(k[J]);)J+=1;return he(k[J])&&(J+=1),J}consumePort(k,J){return this.consumeOneOrMore(k,J,L)}consume(k,J,ne){for(let ve=0;ve<ne.length;ve++){if(J+ve>=k.length)throw new Error("consume exceeding value length");if(k[J+ve]!==ne[ve])throw new Error("consume ".concat(ne," failed at ").concat(ve))}return J+ne.length}consumeTill(k,J,ne){let ve=J;for(;ve<k.length&&(typeof ne!="string"||k[ve]!==ne)&&(typeof ne!="function"||!ne(k[ve]));)ve++;return ve}}class ln extends We{constructor(){super(),Bt(this,"records",[]),Bt(this,"currentLine",0)}parse(k){const J=this.probeEOL(k);this.records=k.split(J).filter(ji=>!!ji.trim()).map(this.parseLine),this.currentLine=0;const ne=this.parseVersion(),ve=this.parseOrigin(),ot=this.parseSessionName(),un=this.parseInformation(),Hr=this.parseUri(),ka=this.parseEmail(),pl=this.parsePhone(),ua=this.parseConnection(),fl=this.parseBandWidth(),Gd=this.parseTimeFields(),Mn=this.parseKey(),or=this.parseSessionAttribute(),on=this.parseMediaDescription();if(this.currentLine!==this.records.length)throw new Error("parsing failed, non exhaustive sdp lines.");return{version:ne,origin:ve,sessionName:ot,information:un,uri:Hr,emails:ka,phones:pl,connection:ua,bandwidths:fl,timeFields:Gd,key:Mn,attributes:or,mediaDescriptions:on}}getCurrentRecord(){const k=this.records[this.currentLine];if(!k)throw new Error("Record doesn't exit.");return k}probeEOL(k){for(let J=0;J<k.length;J++)if(k[J]===E)return k[J-1]==="\r"?T:E;throw new Error("Invalid newline character.")}parseLine(k,J){if(k.length<2)throw new Error("Invalid sdp line, sdp line should be of form <type>=<value>.");const ne=k[0];if(k[1]!=="=")throw new Error('Invalid sdp line, <type> should be a single character followed by an "=" sign.');return{type:ne,value:k.slice(2),line:J,cur:0}}parseSessionAttribute(){const k=new Yn;for(;this.currentLine<this.records.length;){const J=this.getCurrentRecord();if(J.type!==I.ATTRIBUTE)break;const ne={attField:this.extractOneOrMore(J,ve=>q(ve)&&ve!==":"),_cur:0};J.value[J.cur]===":"&&(J.cur+=1,ne.attValue=this.extractOneOrMore(J,Se)),k.parse(ne),this.currentLine++}return k.digest()}parseMediaAttributes(k){const J=new $r(k);for(;this.currentLine<this.records.length;){const ne=this.getCurrentRecord();if(ne.type!==I.ATTRIBUTE)break;const ve={attField:this.extractOneOrMore(ne,ot=>q(ot)&&ot!==":"),_cur:0};ne.value[ne.cur]===":"&&(ne.cur+=1,ve.attValue=this.extractOneOrMore(ne,Se)),J.parse(ve),this.currentLine++}return J.digest()}parseKey(){const k=this.getCurrentRecord();if(k.type===I.KEY){if(k.value==="prompt"||k.value==="clear:"||k.value==="base64:"||k.value==="uri:")return k.value;throw this.currentLine++,new Error("Invalid key.")}}parseZone(){const k=this.getCurrentRecord();if(k.type===I.ZONE_ADJUSTMENTS){const J=[];for(;;)try{const ne=this.extract(k,this.consumeTime);this.consumeSpaceForRecord(k);let ve=!1;k.value[k.cur]==="-"&&(ve=!0,k.cur+=1);const ot=this.extract(k,this.consumeTypedTime);J.push({time:ne,typedTime:ot,back:ve})}catch{break}if(J.length===0)throw new Error("Invalid zone adjustments");return this.currentLine++,J}return[]}parseRepeat(){const k=[];for(;;){const J=this.getCurrentRecord();if(J.type!==I.REPEAT)break;{const ne=this.extract(J,this.consumeRepeatInterval),ve=this.parseTypedTime(J);k.push({repeatInterval:ne,typedTimes:ve}),this.currentLine++}}return k}parseTypedTime(k){const J=[];for(;;)try{this.consumeSpaceForRecord(k),J.push(this.extract(k,this.consumeTypedTime))}catch{break}if(J.length===0)throw new Error("Invalid typed time.");return J}parseTime(){const k=this.getCurrentRecord(),J=this.extract(k,this.consumeTime);this.consumeSpaceForRecord(k);const ne=this.extract(k,this.consumeTime);return this.currentLine++,{startTime:J,stopTime:ne}}parseBandWidth(){const k=[];for(;this.currentLine<this.records.length;){const J=this.getCurrentRecord();if(J.type!==I.BANDWIDTH)break;{const ne=this.extractOneOrMore(J,q);if(J.value[J.cur]!==":")throw new Error("Invalid bandwidth field.");J.cur++;const ve=this.extractOneOrMore(J,L);k.push({bwtype:ne,bandwidth:ve}),this.currentLine++}}return k}parseVersion(){const k=this.getCurrentRecord();if(k.type!==I.VERSION)throw new Error("first sdp record must be version");const J=k.value.slice(0,this.consumeOneOrMore(k.value,0,L));if(J.length!==k.value.length)throw new Error('invalid proto version, "v='.concat(k.value,'"'));return this.currentLine++,J}parseOrigin(){const k=this.getCurrentRecord();if(k.type!==I.ORIGIN)throw new Error("second line of sdp must be origin");const J=this.extractOneOrMore(k,Y);this.consumeSpaceForRecord(k);const ne=this.extractOneOrMore(k,L);this.consumeSpaceForRecord(k);const ve=this.extractOneOrMore(k,L);this.consumeSpaceForRecord(k);const ot=this.extractOneOrMore(k,q);this.consumeSpaceForRecord(k);const un=this.extractOneOrMore(k,q);this.consumeSpaceForRecord(k);const Hr=this.extract(k,this.consumeUnicastAddress);return this.currentLine++,{username:J,sessId:ne,sessVersion:ve,nettype:ot,addrtype:un,unicastAddress:Hr}}parseSessionName(){const k=this.getCurrentRecord();if(k.type===I.SESSION_NAME){const J=this.extract(k,this.consumeText);return this.currentLine++,J}}parseInformation(){const k=this.getCurrentRecord();if(k.type!==I.INFORMATION)return;const J=this.extract(k,this.consumeText);return this.currentLine++,J}parseUri(){const k=this.getCurrentRecord();if(k.type===I.URI)return this.currentLine++,k.value}parseEmail(){const k=[];for(;;){const J=this.getCurrentRecord();if(J.type!==I.EMAIL)break;k.push(J.value),this.currentLine++}return k}parsePhone(){const k=[];for(;;){const J=this.getCurrentRecord();if(J.type!==I.PHONE)break;k.push(J.value),this.currentLine++}return k}parseConnection(){const k=this.getCurrentRecord();if(k.type===I.CONNECTION){const J=this.extractOneOrMore(k,q);this.consumeSpaceForRecord(k);const ne=this.extractOneOrMore(k,q);this.consumeSpaceForRecord(k);const ve=this.extract(k,this.consumeAddress);return this.currentLine++,{nettype:J,addrtype:ne,address:ve}}}parseMedia(){const k=this.getCurrentRecord(),J=this.extract(k,this.consumeToken);this.consumeSpaceForRecord(k);let ne=this.extract(k,this.consumePort);k.value[k.cur]==="/"&&(k.cur+=1,ne+=this.extract(k,this.consumeInteger)),this.consumeSpaceForRecord(k);const ve=[];for(ve.push(this.extract(k,this.consumeToken));k.value[k.cur]==="/";)k.cur+=1,ve.push(this.extract(k,this.consumeToken));if(ve.length===0)throw new Error("Invalid proto");const ot=this.parseFmt(k);return this.currentLine++,{mediaType:J,port:ne,protos:ve,fmts:ot}}parseTimeFields(){const k=[];for(;this.getCurrentRecord().type===I.TIME;){const J=this.parseTime(),ne=this.parseRepeat(),ve=this.parseZone();k.push({time:J,repeats:ne,zones:ve})}return k}parseMediaDescription(){const k=[];for(;this.currentLine<this.records.length&&this.getCurrentRecord().type===I.MEDIA;){const J=this.parseMedia(),ne=this.parseInformation(),ve=this.parseConnections(),ot=this.parseBandWidth(),un=this.parseKey(),Hr=this.parseMediaAttributes(J);k.push({media:J,information:ne,connections:ve,bandwidths:ot,key:un,attributes:Hr})}return k}parseConnections(){const k=[];for(;this.currentLine<this.records.length&&this.getCurrentRecord().type===I.CONNECTION;)k.push(this.parseConnection());return k}parseFmt(k){const J=[];for(;;)try{this.consumeSpaceForRecord(k),J.push(this.extract(k,this.consumeToken))}catch{break}if(J.length===0)throw new Error("Invalid fmts");return J}extract(k,J,...ne){const ve=J.call(this,k.value,k.cur,...ne),ot=k.value.slice(k.cur,ve);return k.cur=ve,ot}extractOneOrMore(k,J){const ne=this.consumeOneOrMore(k.value,k.cur,J),ve=k.value.slice(k.cur,ne);return k.cur=ne,ve}consumeSpaceForRecord(k){if(k.value[k.cur]!==C)throw new Error("Invalid space at ".concat(k.cur,"."));k.cur+=1}}class en extends We{constructor(...k){super(...k),Bt(this,"attributes",void 0),Bt(this,"digested",!1)}extractOneOrMore(k,J,ne){const ve=this.consumeOneOrMore(k.attValue,k._cur,J),ot=k.attValue.slice(k._cur,ve),[un,Hr]=ne||[];if(typeof un=="number"&&ot.length<un)throw new Error("error in length, should be more or equal than ".concat(un," characters."));if(typeof Hr=="number"&&ot.length>Hr)throw new Error("error in length, should be less or equal than ".concat(Hr," characters."));return k._cur=ve,ot}consumeAttributeSpace(k){if(k.attValue[k._cur]!==C)throw new Error("Invalid space at ".concat(k._cur,"."));k._cur+=1}extract(k,J,...ne){if(!k.attValue)throw new Error("Nothing to extract from attValue.");const ve=J.call(this,k.attValue,k._cur,...ne),ot=k.attValue.slice(k._cur,ve);return k._cur=ve,ot}atEnd(k){if(!k.attValue)throw new Error;return k._cur>=k.attValue.length}peekChar(k){if(!k.attValue)throw new Error;return k.attValue[k._cur]}peek(k,J){if(!k.attValue)throw new Error;for(let ne=0;ne<J.length;ne++)if(J[ne]!==k.attValue[k._cur+ne])return!1;return!0}parseIceUfrag(k){if(this.attributes.iceUfrag)throw new Error("Invalid ice-ufrag, should be only a single line if 'a=ice-ufrag'");this.attributes.iceUfrag=this.extractOneOrMore(k,De,[4,256])}parseIcePwd(k){if(this.attributes.icePwd)throw new Error("Invalid ice-pwd, should be only a single line if 'a=ice-pwd'");this.attributes.icePwd=this.extractOneOrMore(k,De,[22,256])}parseIceOptions(k){if(this.attributes.iceOptions)throw new Error("Invalid ice-options, should be only one 'ice-options' line");const J=[];for(;!this.atEnd(k);){J.push(this.extractOneOrMore(k,De));try{this.consumeAttributeSpace(k)}catch(ne){if(this.atEnd(k))break;throw ne}}this.attributes.iceOptions=J}parseFingerprint(k){const J=this.extract(k,this.consumeToken);this.consumeAttributeSpace(k);const ne=this.extract(k,this.consumeTill);this.attributes.fingerprints.push({hashFunction:J,fingerprint:ne})}parseExtmap(k){const J=this.extractOneOrMore(k,L);let ne;this.peekChar(k)==="/"&&(this.extract(k,this.consume,"/"),ne=this.extract(k,this.consumeToken)),this.consumeAttributeSpace(k);const ve=this.extract(k,this.consumeTill,C),ot=Oe(Oe({entry:parseInt(J,10)},ne&&{direction:ne}),{},{extensionName:ve});this.peekChar(k)===C&&(this.consumeAttributeSpace(k),ot.extensionAttributes=this.extract(k,this.consumeTill)),this.attributes.extmaps.push(ot)}parseSetup(k){if(this.attributes.setup)throw new Error("must only be one single 'a=setup' line.");const J=this.extract(k,this.consumeTill);if(J!=="active"&&J!=="passive"&&J!=="actpass"&&J!=="holdconn")throw new Error("role must be one of 'active', 'passive', 'actpass', 'holdconn'.");this.attributes.setup=J}}class Yn extends en{constructor(...k){super(...k),Bt(this,"attributes",{unrecognized:[],groups:[],extmaps:[],fingerprints:[],identities:[]})}parse(k){if(this.digested)throw new Error("already digested");try{switch(k.attField){case"group":this.parseGroup(k);break;case"ice-lite":this.parseIceLite();break;case"ice-ufrag":this.parseIceUfrag(k);break;case"ice-pwd":this.parseIcePwd(k);break;case"ice-options":this.parseIceOptions(k);break;case"fingerprint":this.parseFingerprint(k);break;case"setup":this.parseSetup(k);break;case"tls-id":this.parseTlsId(k);break;case"identity":this.parseIdentity(k);break;case"extmap":this.parseExtmap(k);break;case"msid-semantic":this.parseMsidSemantic(k);break;default:k.ignored=!0,this.attributes.unrecognized.push(k)}}catch(J){throw console.error("parsing session attribute ".concat(k.attField,' error, "a=').concat(k.attField,":").concat(k.attValue,'"')),J}if(!k.ignored&&k.attValue&&!this.atEnd(k))throw new Error("attribute parsing error")}digest(){return this.digested=!0,this.attributes}parseGroup(k){const J=this.extract(k,this.consumeToken),ne=[];for(;!this.atEnd(k)&&this.peekChar(k)===C;)this.consumeAttributeSpace(k),ne.push(this.extract(k,this.consumeToken));this.attributes.groups.push({semantic:J,identificationTag:ne})}parseIceLite(){if(this.attributes.iceLite)throw new Error("Invalid ice-lite, should be only a single line of 'a=ice-lite'");this.attributes.iceLite=!0}parseTlsId(k){if(this.attributes.tlsId)throw new Error("must be only one tld-id line");this.attributes.tlsId=this.extractOneOrMore(k,be)}parseIdentity(k){const J=this.extractOneOrMore(k,Te),ne=[];for(;!this.atEnd(k)&&this.peekChar(k)===C;){this.consumeAttributeSpace(k);const ve=this.extract(k,this.consumeToken);this.extract(k,this.consume,"=");const ot=this.extractOneOrMore(k,un=>un!==C&&Se(un));ne.push({name:ve,value:ot})}this.attributes.identities.push({assertionValue:J,extensions:ne})}parseMsidSemantic(k){this.peekChar(k)===C&&this.consumeAttributeSpace(k);const J={semantic:this.extract(k,this.consumeToken),identifierList:[]};for(;;){try{this.consumeAttributeSpace(k)}catch{break}if(this.peekChar(k)==="*"){this.extract(k,this.consume,"*"),J.applyForAll=!0;break}{const ne=this.extract(k,this.consumeTill,C);J.identifierList.push(ne)}}this.attributes.msidSemantic=J}}class $r extends en{constructor(k){super(),Bt(this,"attributes",void 0),k.protos.indexOf("RTP")!==-1||k.protos.indexOf("rtp"),this.attributes={unrecognized:[],candidates:[],extmaps:[],fingerprints:[],imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:[],ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:[]}}parse(k){if(this.digested)throw new Error("already digested");try{switch(k.attField){case"extmap":this.parseExtmap(k);break;case"setup":this.parseSetup(k);break;case"ice-ufrag":this.parseIceUfrag(k);break;case"ice-pwd":this.parseIcePwd(k);break;case"ice-options":this.parseIceOptions(k);break;case"candidate":this.parseCandidate(k);break;case"remote-candidate":this.parseRemoteCandidate(k);break;case"end-of-candidates":this.parseEndOfCandidates();break;case"fingerprint":this.parseFingerprint(k);break;case"rtpmap":this.parseRtpmap(k);break;case"ptime":this.parsePtime(k);break;case"maxptime":this.parseMaxPtime(k);break;case"sendrecv":case"recvonly":case"sendonly":case"inactive":this.parseDirection(k);break;case"ssrc":this.parseSSRC(k);break;case"fmtp":this.parseFmtp(k);break;case"rtcp-fb":this.parseRtcpFb(k);break;case"rtcp-mux":this.parseRTCPMux();break;case"rtcp-mux-only":this.parseRTCPMuxOnly();break;case"rtcp-rsize":this.parseRTCPRsize();break;case"rtcp":this.parseRTCP(k);break;case"mid":this.parseMid(k);break;case"msid":this.parseMsid(k);break;case"imageattr":this.parseImageAttr(k);break;case"rid":this.parseRid(k);break;case"simulcast":this.parseSimulcast(k);break;case"sctp-port":this.parseSctpPort(k);break;case"max-message-size":this.parseMaxMessageSize(k);break;case"ssrc-group":this.parseSSRCGroup(k);break;default:k.ignored=!0,this.attributes.unrecognized.push(k)}}catch(J){throw console.error("parsing media attribute ".concat(k.attField,' error, "a=').concat(k.attField,":").concat(k.attValue,'"')),J}if(!k.ignored&&k.attValue&&!this.atEnd(k))throw new Error("attribute parsing error")}parseCandidate(k){const J=this.extractOneOrMore(k,De,[1,32]);this.consumeAttributeSpace(k);const ne=this.extractOneOrMore(k,L,[1,5]);this.consumeAttributeSpace(k);const ve=this.extract(k,this.consumeToken);this.consumeAttributeSpace(k);const ot=this.extractOneOrMore(k,L,[1,10]);this.consumeAttributeSpace(k);const un=this.extract(k,this.consumeAddress);this.consumeAttributeSpace(k);const Hr=this.extract(k,this.consumePort);this.consumeAttributeSpace(k),this.extract(k,this.consume,"typ"),this.consumeAttributeSpace(k);const ka={foundation:J,componentId:ne,transport:ve,priority:ot,connectionAddress:un,port:Hr,type:this.extract(k,this.consumeToken),extension:{}};for(this.peek(k," raddr")&&(this.extract(k,this.consume," raddr"),this.consumeAttributeSpace(k),ka.relAddr=this.extract(k,this.consumeAddress)),this.peek(k," rport")&&(this.extract(k,this.consume," rport"),this.consumeAttributeSpace(k),ka.relPort=this.extract(k,this.consumePort));this.peekChar(k)===C;){this.consumeAttributeSpace(k);const pl=this.extract(k,this.consumeToken);this.consumeAttributeSpace(k),ka.extension[pl]=this.extractOneOrMore(k,V)}this.attributes.candidates.push(ka)}parseRemoteCandidate(k){const J=[];for(;;){const ne=this.extractOneOrMore(k,L,[1,5]);this.consumeAttributeSpace(k);const ve=this.extract(k,this.consumeAddress);this.consumeAttributeSpace(k);const ot=this.extract(k,this.consumePort);J.push({componentId:ne,connectionAddress:ve,port:ot});try{this.consumeAttributeSpace(k)}catch{break}}this.attributes.remoteCandidatesList.push(J)}parseEndOfCandidates(){if(this.attributes.endOfCandidates)throw new Error("must be only one line of end-of-candidates");this.attributes.endOfCandidates=!0}parseRtpmap(k){const J=this.extract(k,this.consumeToken);this.consumeAttributeSpace(k);const ne=this.extract(k,this.consumeTill,"/");this.extract(k,this.consume,"/");const ve={encodingName:ne,clockRate:this.extractOneOrMore(k,L)};this.atEnd(k)||this.peekChar(k)!=="/"||(this.extract(k,this.consume,"/"),ve.encodingParameters=parseInt(this.extract(k,this.consumeTill),10));const ot=this.attributes.payloads.find(un=>un.payloadType===parseInt(J,10));ot?ot.rtpMap=ve:this.attributes.payloads.push({payloadType:parseInt(J,10),rtpMap:ve,rtcpFeedbacks:[]})}parsePtime(k){if(this.attributes.ptime)throw new Error("must be only one line of ptime");this.attributes.ptime=this.extract(k,this.consumeTill)}parseMaxPtime(k){if(this.attributes.maxPtime)throw new Error("must be only one line of ptime");this.attributes.maxPtime=this.extract(k,this.consumeTill)}parseDirection(k){if(this.attributes.direction)throw new Error("must be only one line of direction info");this.attributes.direction=k.attField}parseSSRC(k){const J=this.extractOneOrMore(k,L);this.consumeAttributeSpace(k);const ne=this.extract(k,this.consumeTill,":");let ve;this.peekChar(k)===":"&&(this.extract(k,this.consume,":"),ve=this.extract(k,this.consumeTill));const ot=this.attributes.ssrcs.find(un=>un.ssrcId===parseInt(J,10));ot?ot.attributes[ne]=ve:this.attributes.ssrcs.push({ssrcId:parseInt(J,10),attributes:{[ne]:ve}})}parseFmtp(k){const J=this.extract(k,this.consumeTill,C);this.consumeAttributeSpace(k);const ne=this.extract(k,this.consumeTill),ve={};ne.split(";").forEach(un=>{let[Hr,ka]=un.split("=");Hr=Hr.trim();const pl=typeof ka=="string"?ka.trim():null;typeof Hr=="string"&&Hr.length>0&&(ve[Hr]=pl)});const ot=this.attributes.payloads.find(un=>un.payloadType===parseInt(J,10));ot?ot.fmtp={parameters:ve}:this.attributes.payloads.push({payloadType:parseInt(J,10),rtcpFeedbacks:[],fmtp:{parameters:ve}})}parseFmtParameters(k){const J={},ne=this.extract(k,this.consumeTill,"=");k._cur++;const ve=this.extract(k,this.consumeTill,";");for(J[ne]=ve;k.attValue[k._cur]===";";){const ot=this.extract(k,this.consumeTill,"=");k._cur++;const un=this.extract(k,this.consumeTill,";");J[ot]=un}return J}parseRtcpFb(k){let J="";J=this.peekChar(k)==="*"?this.extract(k,this.consume,"*"):this.extract(k,this.consumeTill,C),this.consumeAttributeSpace(k);const ne=this.extract(k,this.consumeTill,C);let ve;switch(ne){case"trr-int":ve={type:ne,interval:this.extract(k,this.consumeTill)};break;case"ack":case"nack":default:{const ot={type:ne};this.peekChar(k)===C&&(this.consumeAttributeSpace(k),ot.parameter=this.extract(k,this.consumeToken),this.peekChar(k)===C&&(ot.additional=this.extract(k,this.consumeTill))),ve=ot}}if(J==="*")this.attributes.rtcpFeedbackWildcards.push(ve);else{const ot=this.attributes.payloads.find(un=>un.payloadType===parseInt(J,10));ot?ot.rtcpFeedbacks.push(ve):this.attributes.payloads.push({payloadType:parseInt(J,10),rtcpFeedbacks:[ve]})}}parseRTCPMux(){if(this.attributes.rtcpMux)throw new Error("must be single line of rtcp-mux");this.attributes.rtcpMux=!0}parseRTCPMuxOnly(){if(this.attributes.rtcpMuxOnly)throw new Error("must be single line of rtcp-only");this.attributes.rtcpMuxOnly=!0}parseRTCPRsize(){if(this.attributes.rtcpRsize)throw new Error("must be single line of rtcp-rsize");this.attributes.rtcpRsize=!0}parseRTCP(k){if(this.attributes.rtcp)throw new Error("must be single line of rtcp");const J={port:this.extract(k,this.consumePort)};this.peekChar(k)===C&&(this.consumeAttributeSpace(k),J.netType=this.extractOneOrMore(k,q),this.consumeAttributeSpace(k),J.addressType=this.extractOneOrMore(k,q),this.consumeAttributeSpace(k),J.address=this.extract(k,this.consumeAddress)),this.attributes.rtcp=J}parseMsid(k){const J={id:this.extractOneOrMore(k,q,[1,64])};this.peekChar(k)===C&&(this.consumeAttributeSpace(k),J.appdata=this.extractOneOrMore(k,q,[1,64])),this.attributes.msids.push(J)}parseImageAttr(k){this.attributes.imageattr.push(k.attValue)}parseRid(k){const J=this.extractOneOrMore(k,ve=>le(ve)||L(ve)||ve==="_"||ve==="-");this.consumeAttributeSpace(k);const ne={id:J,direction:this.extract(k,this.consumeToken),params:[]};if(this.peekChar(k)===C){if(this.consumeAttributeSpace(k),this.peek(k,"pt=")){this.extract(k,this.consume,"pt=");const ve=[];for(;;){const ot=this.extract(k,this.consumeToken);ve.push(ot);try{this.extract(k,this.consume,",")}catch{break}}ne.payloads=ve,this.peekChar(k)===C&&this.extract(k,this.consume,C)}for(;;){const ve=this.extract(k,this.consumeToken);switch(ve){case"depend":{const ot={type:ve,rids:this.extract(k,this.consume,"=").split(",")};ne.params.push(ot);break}case"max-width":case"height-width":case"max-fps":case"max-fs":case"max-br":case"max-pps":case"max-bpp":default:{const ot={type:ve};this.peekChar(k)==="="&&(this.extract(k,this.consume,"="),ot.val=this.extract(k,this.consumeTill,";")),ne.params.push(ot)}}try{this.extract(k,this.consume,";")}catch{break}}}this.attributes.rids.push(ne)}parseSimulcast(k){if(this.attributes.simulcast)throw new Error("must be single line of simulcast");this.attributes.simulcast=k.attValue,this.extract(k,this.consumeTill)}parseSctpPort(k){this.attributes.sctpPort=this.extractOneOrMore(k,L,[1,5])}parseMaxMessageSize(k){this.attributes.maxMessageSize=this.extractOneOrMore(k,L,[1,void 0])}digest(){return this.digested=!0,this.attributes}parseMid(k){this.attributes.mid=this.extract(k,this.consumeToken)}parseSSRCGroup(k){const J=this.extract(k,this.consumeToken),ne=[];for(;;)try{this.consumeAttributeSpace(k);const ve=this.extract(k,this.consumeInteger);ne.push(parseInt(ve,10))}catch{break}this.attributes.ssrcGroups.push({semantic:J,ssrcIds:ne})}}function Bn(Re,k,J){return k in Re?Object.defineProperty(Re,k,{value:J,enumerable:!0,configurable:!0,writable:!0}):Re[k]=J,Re}class ro{constructor(){Bn(this,"eol",T)}print(k,J){let ne="";return J&&(this.eol=J),ne+=this.printVersion(k.version),ne+=this.printOrigin(k.origin),ne+=this.printSessionName(k.sessionName),ne+=this.printInformation(k.information),ne+=this.printUri(k.uri),ne+=this.printEmail(k.emails),ne+=this.printPhone(k.phones),ne+=this.printConnection(k.connection),ne+=this.printBandwidth(k.bandwidths),ne+=this.printTimeFields(k.timeFields),ne+=this.printKey(k.key),ne+=this.printSessionAttributes(k.attributes),ne+=this.printMediaDescription(k.mediaDescriptions),ne}printVersion(k){return"v=".concat(k).concat(this.eol)}printOrigin(k){return"o=".concat(k.username," ").concat(k.sessId," ").concat(k.sessVersion," ").concat(k.nettype," ").concat(k.addrtype," ").concat(k.unicastAddress).concat(this.eol)}printSessionName(k){return k?"s=".concat(k).concat(this.eol):""}printInformation(k){return k?"i=".concat(k).concat(this.eol):""}printUri(k){return k?"u=".concat(k).concat(this.eol):""}printEmail(k){let J="";for(const ne of k)J+="e=".concat(ne).concat(this.eol);return J}printPhone(k){let J="";for(const ne of k)J+="e=".concat(ne).concat(this.eol);return J}printConnection(k){return k?"c=".concat(k.nettype," ").concat(k.addrtype," ").concat(k.address).concat(this.eol):""}printBandwidth(k){let J="";for(const ne of k)J+="b=".concat(ne.bwtype,":").concat(ne.bandwidth).concat(this.eol);return J}printTimeFields(k){let J="";for(const ne of k){J+="t=".concat(ne.time.startTime," ").concat(ne.time.startTime).concat(this.eol);for(const ve of ne.repeats)J+="r=".concat(ve.repeatInterval," ").concat(ve.typedTimes.join(" ")).concat(this.eol);ne.zoneAdjustments&&(J+="z=",J+="z=".concat(ne.zoneAdjustments.map(ve=>"".concat(ve.time," ").concat(ve.back?"-":""," ").concat(ve.typedTime)).join(" ")).concat(this.eol),J+=this.eol)}return J}printKey(k){return k?"k=".concat(k).concat(this.eol):""}printAttributes(k){let J="";for(const ne of k)J+="a=".concat(ne.attField).concat(ne.attValue?":".concat(ne.attValue):"").concat(this.eol);return J}printMediaDescription(k){let J="";for(const ne of k)J+=this.printMedia(ne.media),J+=this.printInformation(ne.information),J+=this.printConnections(ne.connections),J+=this.printBandwidth(ne.bandwidths),J+=this.printKey(ne.key),J+=this.printMediaAttributes(ne);return J}printConnections(k){let J="";for(const ne of k)J+=this.printConnection(ne);return J}printMedia(k){return"m=".concat(k.mediaType," ").concat(k.port," ").concat(k.protos.join("/")," ").concat(k.fmts.join(" ")).concat(this.eol)}printSessionAttributes(k){return new Ce(this.eol).print(k)}printMediaAttributes(k){return new Ne(this.eol).print(k)}}class ge{constructor(k){Bn(this,"eol",void 0),this.eol=k}printIceUfrag(k){return k===void 0?"":"a=ice-ufrag:".concat(k).concat(this.eol)}printIcePwd(k){return k===void 0?"":"a=ice-pwd:".concat(k).concat(this.eol)}printIceOptions(k){return k===void 0?"":"a=ice-options:".concat(k.join(C)).concat(this.eol)}printFingerprints(k){return k.length>0?k.map(J=>"a=fingerprint:".concat(J.hashFunction).concat(C).concat(J.fingerprint)).join(this.eol)+this.eol:""}printExtmap(k){return k.map(J=>"a=extmap:".concat(J.entry).concat(J.direction?"/".concat(J.direction):"").concat(C).concat(J.extensionName).concat(J.extensionAttributes?"".concat(C).concat(J.extensionAttributes):"").concat(this.eol)).join("")}printSetup(k){return k===void 0?"":"a=setup:".concat(k).concat(this.eol)}printUnrecognized(k){return k.map(J=>"a=".concat(J.attField).concat(J.attValue?":".concat(J.attValue):"").concat(this.eol)).join("")}}class Ce extends ge{print(k){let J="";return J+=this.printGroups(k.groups),J+=this.printMsidSemantic(k.msidSemantic),J+=this.printIceLite(k.iceLite),J+=this.printIceUfrag(k.iceUfrag),J+=this.printIcePwd(k.icePwd),J+=this.printIceOptions(k.iceOptions),J+=this.printFingerprints(k.fingerprints),J+=this.printSetup(k.setup),J+=this.printTlsId(k.tlsId),J+=this.printIdentity(k.identities),J+=this.printExtmap(k.extmaps),J+=this.printUnrecognized(k.unrecognized),J}printGroups(k){let J="";return k.length>0&&(J+=k.map(ne=>"a=group:".concat(ne.semantic).concat(ne.identificationTag.map(ve=>"".concat(C).concat(ve)).join("")).concat(this.eol)).join("")),J}printIceLite(k){return k===void 0?"":"a=ice-lite"+this.eol}printTlsId(k){return k?"a=tls-id:".concat(k).concat(this.eol):""}printIdentity(k){return k.length===0?"":k.map(J=>"a=identity:".concat(J.assertionValue).concat(J.extensions.map(ne=>"".concat(C).concat(ne.name).concat(ne.value?"=".concat(ne.value):"")))).join(this.eol)+this.eol}printMsidSemantic(k){if(!k)return"";let J="a=msid-semantic:".concat(k.semantic);return k.applyForAll?J+="".concat(C,"*"):k.identifierList.length>0&&(J+=k.identifierList.map(ne=>"".concat(C).concat(ne))),J+this.eol}}class Ne extends ge{print(k){const J=k.attributes;let ne="";return ne+=this.printRTCP(J.rtcp),ne+=this.printIceUfrag(J.iceUfrag),ne+=this.printIcePwd(J.icePwd),ne+=this.printIceOptions(J.iceOptions),ne+=this.printCandidates(J.candidates),ne+=this.printRemoteCandidatesList(J.remoteCandidatesList),ne+=this.printEndOfCandidates(J.endOfCandidates),ne+=this.printFingerprints(J.fingerprints),ne+=this.printSetup(J.setup),ne+=this.printMid(J.mid),ne+=this.printExtmap(J.extmaps),ne+=this.printRTPRelated(J),ne+=this.printPtime(J.ptime),ne+=this.printMaxPtime(J.maxPtime),ne+=this.printDirection(J.direction),ne+=this.printSSRCGroups(J.ssrcGroups),ne+=this.printSSRC(J.ssrcs),ne+=this.printRTCPMux(J.rtcpMux),ne+=this.printRTCPMuxOnly(J.rtcpMuxOnly),ne+=this.printRTCPRsize(J.rtcpRsize),ne+=this.printMSId(J.msids),ne+=this.printImageattr(J.imageattr),ne+=this.printRid(J.rids),ne+=this.printSimulcast(J.simulcast),ne+=this.printSCTPPort(J.sctpPort),ne+=this.printMaxMessageSize(J.maxMessageSize),ne+=this.printUnrecognized(J.unrecognized),ne}printCandidates(k){return k.map(J=>"a=candidate:".concat(J.foundation).concat(C).concat(J.componentId).concat(C).concat(J.transport).concat(C).concat(J.priority).concat(C).concat(J.connectionAddress).concat(C).concat(J.port).concat(C,"typ").concat(C).concat(J.type).concat(J.relAddr?"".concat(C,"raddr").concat(C).concat(J.relAddr):"").concat(J.relPort?"".concat(C,"rport").concat(C).concat(J.relPort):"").concat(Object.keys(J.extension).map(ne=>"".concat(C).concat(ne).concat(C).concat(J.extension[ne])).join("")).concat(this.eol)).join("")}printRemoteCandidatesList(k){return k.map(J=>"a=remote-candidates:".concat(J.join(C)).concat(this.eol)).join("")}printEndOfCandidates(k){return k===void 0?"":"a=end-of-candidates"+this.eol}printRTPRelated(k){if(!k.payloads)return"";const J=k.payloads;let ne="";ne+=k.rtcpFeedbackWildcards.map(ve=>this.printRTCPFeedback("*",ve)).join("");for(const ve of J)ne+=this.printRtpMap(ve.payloadType,ve.rtpMap),ne+=this.printFmtp(ve.payloadType,ve.fmtp),ne+=ve.rtcpFeedbacks.map(ot=>this.printRTCPFeedback(ve.payloadType,ot)).join("");return ne}printFmtp(k,J){if(!J)return"";const ne=Object.keys(J.parameters);return ne.length===1&&J.parameters[ne[0]]===null?"a=fmtp:".concat(k).concat(C).concat(ne[0]).concat(this.eol):"a=fmtp:".concat(k).concat(C).concat(Object.keys(J.parameters).map(ve=>"".concat(ve,"=").concat(J.parameters[ve])).join(";")).concat(this.eol)}printRtpMap(k,J){return J?"a=rtpmap:".concat(k).concat(C).concat(J.encodingName,"/").concat(J.clockRate).concat(J.encodingParameters?"/".concat(J.encodingParameters):"").concat(this.eol):""}printRTCPFeedback(k,J){let ne="a=rtcp-fb:".concat(k).concat(C),ve=J;switch(ve.type){case"trr-int":ne+="ttr-int".concat(C).concat(ve.interval);break;case"ack":case"nack":default:ve=ve,ne+="".concat(ve.type),ve.parameter&&(ne+="".concat(C).concat(ve.parameter),ve.additional&&(ne+="".concat(C).concat(ve.additional)))}return ne+this.eol}printPtime(k){return k===void 0?"":"a=ptime:".concat(k).concat(this.eol)}printMaxPtime(k){return k===void 0?"":"a=maxptime:".concat(k).concat(this.eol)}printDirection(k){return k===void 0?"":"a=".concat(k).concat(this.eol)}printSSRC(k){return k.map(J=>Object.keys(J.attributes).map(ne=>"a=ssrc:".concat(J.ssrcId.toString(10)).concat(C).concat(ne).concat(J.attributes[ne]?":".concat(J.attributes[ne]):"").concat(this.eol)).join("")).join("")}printRTCPMux(k){return k===void 0?"":"a=rtcp-mux".concat(this.eol)}printRTCPMuxOnly(k){return k===void 0?"":"a=rtcp-mux-only".concat(this.eol)}printRTCPRsize(k){return k===void 0?"":"a=rtcp-rsize".concat(this.eol)}printRTCP(k){if(k===void 0)return"";let J="a=rtcp:".concat(k.port);return k.netType&&(J+="".concat(C).concat(k.netType)),k.addressType&&(J+="".concat(C).concat(k.addressType)),k.address&&(J+="".concat(C).concat(k.address)),J+this.eol}printMSId(k){return k.map(J=>"a=msid:".concat(J.id).concat(J.appdata?"".concat(C).concat(J.appdata):"").concat(this.eol)).join("")}printImageattr(k){return k.map(J=>"a=imageattr:".concat(J).concat(this.eol)).join("")}printRid(k){return k.map(J=>{let ne="a=rid:".concat(J.id).concat(C).concat(J.direction);return J.payloads&&(ne+="".concat(C,"pt=").concat(J.payloads.join(","))),J.params.length>0&&(ne+="".concat(C).concat(J.params.map(ve=>ve.type==="depend"?"depend=".concat(ve.rids.join(",")):"".concat(ve.type,"=").concat(ve.val)).join(";"))),ne+this.eol}).join("")}printSimulcast(k){return k===void 0?"":"a=simulcast:".concat(k).concat(this.eol)}printSCTPPort(k){return k===void 0?"":"a=sctp-port:".concat(k).concat(this.eol)}printMaxMessageSize(k){return k===void 0?"":"a=max-message-size:".concat(k).concat(this.eol)}printMid(k){return k===void 0?"":"a=mid:".concat(k).concat(this.eol)}printSSRCGroups(k){return k.map(J=>"a=ssrc-group:".concat(J.semantic).concat(J.ssrcIds.map(ne=>"".concat(C).concat(ne.toString(10))).join("")).concat(this.eol)).join("")}}function et(Re){return new ln().parse(Re)}function Ut(Re,k){return new ro().print(Re,k)}}},s={};function l(h){if(s[h])return s[h].exports;var p=s[h]={exports:{}};return o[h](p,p.exports,l),p.exports}return l.d=(h,p)=>{for(var v in p)l.o(p,v)&&!l.o(h,v)&&Object.defineProperty(h,v,{enumerable:!0,get:p[v]})},l.o=(h,p)=>Object.prototype.hasOwnProperty.call(h,p),l.r=h=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(h,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(h,"__esModule",{value:!0})},l(8)})()})(ir);class DJ{constructor(r){N(this,"sessionDesc",void 0),N(this,"localCapabilities",void 0),N(this,"rtpCapabilities",void 0),N(this,"candidates",void 0),N(this,"iceParameters",void 0),N(this,"dtlsParameters",void 0),N(this,"setup",void 0),N(this,"currentMidIndex",void 0),N(this,"cname",void 0),r=nr(r);const{remoteIceParameters:o,remoteDtlsParameters:s,candidates:l,remoteRTPCapabilities:h,remoteSetup:p,localCapabilities:v,sdkCodec:E,cname:T}=r,C=ir.exports.parse(`v=0
o=- 0 0 IN IP4 127.0.0.1
s=AgoraGateway
t=0 0
a=group:BUNDLE audio video
a=msid-semantic: WMS
a=ice-lite
m=audio 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendrecv
a=rtcp-mux
a=rtcp-rsize
a=mid:audio
m=video 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendrecv
a=rtcp-mux
a=rtcp-rsize
a=mid:video
`);this.rtpCapabilities=h,this.candidates=l,this.iceParameters=o,this.dtlsParameters=s,this.setup=p,this.localCapabilities=v,this.cname=T;for(let I=0;I<C.mediaDescriptions.length;I++){const L=C.mediaDescriptions[I];L.attributes.iceUfrag=o.iceUfrag,L.attributes.icePwd=o.icePwd,L.attributes.fingerprints=s.fingerprints,L.attributes.candidates=l,L.attributes.setup=p,L.media.mediaType==="video"&&(L.media.fmts=h.videoCodecs.map(V=>V.payloadType.toString(10)),L.attributes.payloads=h.videoCodecs,L.attributes.extmaps=h.videoExtensions),L.media.mediaType==="audio"&&(L.media.fmts=h.audioCodecs.map(V=>V.payloadType.toString(10)),L.attributes.payloads=h.audioCodecs,L.attributes.extmaps=h.audioExtensions),C.mediaDescriptions[I]=this.mungMediaDesc(L)}this.sessionDesc=C,this.currentMidIndex=C.mediaDescriptions.length-1}toString(){return ir.exports.print(this.sessionDesc)}send(r,o,s){const{ssrcs:l,ssrcGroups:h}=aa(o,this.cname),p=this.sessionDesc.mediaDescriptions.find(T=>r===dt.VIDEO?T.media.mediaType==="video":T.media.mediaType==="audio"),v=l[0].attributes.label,E=l[0].attributes.mslabel;return p.attributes.ssrcs=p.attributes.ssrcs.concat(l),p.attributes.ssrcGroups=p.attributes.ssrcGroups.concat(h),{id:v,mslabel:E}}batchSend(r){return r.map(o=>{let{kind:s,ssrcMsg:l}=o;return this.send(s,l,void 0)})}stopSending(r){this.sessionDesc.mediaDescriptions.forEach(o=>{const s=[],l=[],h=[];o.attributes.ssrcs.forEach(p=>{r.includes(p.attributes.label||"")?h.push(p):s.push(p)}),o.attributes.ssrcGroups.forEach(p=>{h.map(v=>v.ssrcId).includes(p.ssrcIds[0])||l.push(p)}),o.attributes.ssrcs=s,o.attributes.ssrcGroups=l})}mute(r){const o=this.sessionDesc.mediaDescriptions.find(s=>s.attributes.mid===r);if(!o)throw new Error("mediaDescription not found with ".concat(r," in remote SDP when calling RemoteSDP.mute."));o.attributes.direction="inactive"}unmute(r){const o=this.sessionDesc.mediaDescriptions.find(s=>s.attributes.mid===r);if(!o)throw new Error("mediaDescription not found with ".concat(r," in remote SDP when calling RemoteSDP.unmute."));o.attributes.direction="sendonly"}receive(r,o,s){r.forEach((l,h)=>{const p=l._mediaStreamTrack,v=this.sessionDesc.mediaDescriptions.findIndex(T=>T.attributes.mid===p.kind),E=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[v],l);this.sessionDesc.mediaDescriptions[v]=E})}stopReceiving(r){}updateCandidates(r){r===Vr.TCP?this.candidates.forEach(o=>{this.candidates.findIndex(s=>s.transport==="tcp"&&s.connectionAddress===o.connectionAddress&&s.port===o.port)===-1&&this.candidates.push(KL(KL({},o),{},{foundation:"tcpcandidate",priority:Number(o.priority)-1+"",transport:"tcp",port:Number(o.port)+90+""}))}):this.candidates=this.candidates.filter(o=>o.transport!=="tcp");for(const o of this.sessionDesc.mediaDescriptions)o.attributes.candidates=this.candidates}restartICE(r){r=nr(r),this.iceParameters=r,this.sessionDesc.mediaDescriptions.forEach(o=>{o.attributes.iceUfrag=r.iceUfrag,o.attributes.icePwd=r.icePwd})}predictReceivingMids(r){const o=[];for(let s=0;s<r;s++)o.push((this.currentMidIndex+s+1).toString(10));return o}mungRecvMediaDsec(r,o){const s=nr(r);return Fd(s,o),LC(s,o),s}updateRecvMedia(r,o){const s=this.sessionDesc.mediaDescriptions.findIndex(l=>l.attributes.mid===r);if(s!==-1){const l=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[s],o);this.sessionDesc.mediaDescriptions[s]=l}}bumpMid(r){this.currentMidIndex+=r}updateTrackLabel(r,o,s){const l=this.sessionDesc.mediaDescriptions.find(p=>r===dt.VIDEO?p.attributes.mid==="video":p.attributes.mid==="audio");if(l){const p=l.attributes.ssrcs.find(v=>v.attributes.label===o);var h;p&&(p.attributes.label=s,(h=p.attributes.msid)===null||h===void 0||h.replace(o,s))}}mungMediaDesc(r){const o=nr(r);return kC(o),function(s){const l=s.attributes.extmaps.find(h=>h.extensionName==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01");l&&s.attributes.extmaps.splice(s.attributes.extmaps.indexOf(l),1),s.attributes.payloads.forEach(h=>{const p=h.rtcpFeedbacks.findIndex(v=>v.type==="transport-cc");p!==-1&&h.rtcpFeedbacks.splice(p,1)})}(o),o}getSSRC(r){for(const o of this.sessionDesc.mediaDescriptions)for(const s of o.attributes.ssrcs)if(s.attributes.label===r)return[s]}}function xa(n){if(Array.isArray(n))return n.map(o=>o);if(!YL(n))return n;const r={};for(const o in n)YL(n[o])||Array.isArray(n[o])?r[o]=xa(n[o]):r[o]=n[o];return r}function YL(n){return!(typeof n!="object"||Array.isArray(n)||!n)}function kJ(){const n=navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]*/i);return n&&n[0]?Number(n[0].split("/")[1]):null}function LJ(n){return window.RTCStatsReport?n.getStats()instanceof xe:!1}class UC{constructor(r){N(this,"input",[]),N(this,"size",void 0),this.size=r}add(r){this.input.push(r),this.input.length>this.size&&this.input.splice(0,1)}diffMean(){return this.input.length===0?0:(this.input[this.input.length-1]-this.input[0])/this.input.length}}const cl={address:"unknown",candidateType:"unknown",id:"unknown",port:0,priority:0,protocol:"unknown",type:"unknown"},Kp={timestamp:0,bitrate:{actualEncoded:0,transmit:0},sendPacketLossRate:0,recvPacketLossRate:0,videoRecv:[],videoSend:[],audioRecv:[],audioSend:[],selectedCandidatePair:{id:"unknown",localCandidate:cl,remoteCandidate:cl}},qL={firsCount:0,nacksCount:0,plisCount:0,framesDecodeCount:0,framesDecodeInterval:0,framesDecodeFreezeTime:0,decodeFrameRate:0,bytes:0,packetsLost:0,packetLostRate:0,packets:0,ssrc:0,qpSumPerFrame:0},XL={firsCount:0,nacksCount:0,plisCount:0,frameCount:0,bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0,qpSumPerFrame:0},JL={bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0},QL={jitterBufferMs:0,jitterMs:0,bytes:0,packetsLost:0,packetLostRate:0,packets:0,ssrc:0,receivedFrames:0,droppedFrames:0,concealedSamples:0};function ZL(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function e2(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?ZL(Object(o),!0).forEach(function(s){N(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):ZL(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}class jC{constructor(r,o){N(this,"onFirstVideoReceived",void 0),N(this,"onFirstVideoDecoded",void 0),N(this,"onFirstAudioReceived",void 0),N(this,"onFirstVideoDecodedTimeout",void 0),N(this,"onFirstAudioDecoded",void 0),N(this,"onSelectedLocalCandidateChanged",void 0),N(this,"onSelectedRemoteCandidateChanged",void 0),N(this,"videoIsReady",!1),N(this,"videoIsReady2",{}),N(this,"pc",void 0),N(this,"options",void 0),N(this,"intervalTimer",void 0),N(this,"stats",xa(Kp)),N(this,"isFirstVideoReceived",{}),N(this,"isFirstVideoDecoded",{}),N(this,"isFirstAudioReceived",{}),N(this,"isFirstAudioDecoded",{}),N(this,"isFirstVideoDecodedTimeout",{}),N(this,"lossRateWindowStats",[]),this.pc=r,this.options=o,this.intervalTimer=window.setInterval(async()=>{this.updateStats()},this.options.updateInterval)}getStats(){return this.stats}getSelectedCandidatePair(){return new xe(r=>{r({local:e2({},cl),remote:e2({},cl)})})}setVideoIsReady(r){this.videoIsReady=r}setVideoIsReady2(r,o){this.videoIsReady2[r]=o}getVideoIsReady(r){return this.videoIsReady2[r]||!1}setIsFirstAudioDecoded(r){}destroy(){window.clearInterval(this.intervalTimer),this.pc=void 0}calcLossRate(r){this.lossRateWindowStats.push(r),this.lossRateWindowStats.length>this.options.lossRateInterval&&this.lossRateWindowStats.splice(0,1);const o=this.lossRateWindowStats.length,s=["videoSend","audioSend","videoRecv","audioRecv"];let l=0,h=0,p=0,v=0;for(const E of s)r[E].forEach((T,C)=>{if(!this.lossRateWindowStats[o-1][E][C]||!this.lossRateWindowStats[0][E][C])return;const I=this.lossRateWindowStats[o-1][E][C].packets-this.lossRateWindowStats[0][E][C].packets,L=this.lossRateWindowStats[o-1][E][C].packetsLost-this.lossRateWindowStats[0][E][C].packetsLost;E==="videoSend"||E==="audioSend"?(l+=I,p+=L):(h+=I,v+=L),Number.isNaN(I)||Number.isNaN(I)?T.packetLostRate=0:T.packetLostRate=I<=0||L<=0?0:L/(I+L)});r.sendPacketLossRate=l<=0||p<=0?0:p/(l+p),r.recvPacketLossRate=h<=0||v<=0?0:v/(h+v)}}function t2(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function MJ(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?t2(Object(o),!0).forEach(function(s){N(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):t2(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}class UJ extends jC{constructor(){super(...arguments),N(this,"_stats",Kp),N(this,"lastDecodeVideoReceiverStats",new Map)}async updateStats(){const r=await this._getStats(),o=this.statsResponsesToObjects(r);this._stats=xa(Kp);const s=o.filter(h=>h.type==="ssrc");this.processSSRCStats(s);const l=o.find(h=>h.type==="VideoBwe");l&&this.processBandwidthStats(l),this._stats.timestamp=Date.now(),this.calcLossRate(this._stats),this.stats=this._stats}processBandwidthStats(r){this._stats.bitrate={actualEncoded:Number(r.googActualEncBitrate),targetEncoded:Number(r.googTargetEncBitrate),retransmit:Number(r.googRetransmitBitrate),transmit:Number(r.googTransmitBitrate)},this._stats.sendBandwidth=Number(r.googAvailableSendBandwidth)}processSSRCStats(r){r.forEach(o=>{const s=o.id.includes("send");switch("".concat(o.mediaType,"_").concat(s?"send":"recv")){case"video_send":{const l=xa(XL);l.codec=o.googCodecName,l.adaptionChangeReason="none",o.googCpuLimitedResolution&&(l.adaptionChangeReason="cpu"),o.googBandwidthLimitedResolution&&(l.adaptionChangeReason="bandwidth"),l.avgEncodeMs=Number(o.googAvgEncodeMs),l.inputFrame={width:Number(o.googFrameWidthInput)||Number(o.googFrameWidthSent),height:Number(o.googFrameHeightInput)||Number(o.googFrameHeightSent),frameRate:Number(o.googFrameRateInput)},l.sentFrame={width:Number(o.googFrameWidthSent),height:Number(o.googFrameHeightSent),frameRate:Number(o.googFrameRateInput)},l.firsCount=Number(o.googFirReceived),l.nacksCount=Number(o.googNacksReceived),l.plisCount=Number(o.googPlisReceived),l.frameCount=Number(o.framesEncoded),l.bytes=Number(o.bytesSent),l.packets=Number(o.packetsSent),l.packetsLost=Number(o.packetsLost),l.ssrc=Number(o.ssrc),l.rttMs=Number(o.googRtt||0),this._stats.videoSend.push(l),this._stats.rtt=l.rttMs;break}case"video_recv":{const l=xa(qL),h=this.lastDecodeVideoReceiverStats.get(Number(o.ssrc));if(l.codec=o.googCodecName,l.targetDelayMs=Number(o.googTargetDelayMs),l.renderDelayMs=Number(o.googRenderDelayMs),l.currentDelayMs=Number(o.googCurrentDelayMs),l.minPlayoutDelayMs=Number(o.googMinPlayoutDelayMs),l.decodeMs=Number(o.googDecodeMs),l.maxDecodeMs=Number(o.googMaxDecodeMs),l.receivedFrame={width:Number(o.googFrameWidthReceived),height:Number(o.googFrameHeightReceived),frameRate:Number(o.googFrameRateReceived)},l.decodedFrame={width:Number(o.googFrameWidthReceived),height:Number(o.googFrameHeightReceived),frameRate:Number(o.googFrameRateDecoded)},l.decodeFrameRate=Number(o.googFrameRateDecoded),l.outputFrame={width:Number(o.googFrameWidthReceived),height:Number(o.googFrameHeightReceived),frameRate:Number(o.googFrameRateOutput)},l.jitterBufferMs=Number(o.googJitterBufferMs),l.firsCount=Number(o.googFirsSent),l.nacksCount=Number(o.googNacksSent),l.plisCount=Number(o.googPlisSent),l.framesDecodeCount=Number(o.framesDecoded),l.bytes=Number(o.bytesReceived),l.packets=Number(o.packetsReceived),l.packetsLost=Number(o.packetsLost),l.ssrc=Number(o.ssrc),l.packets>0&&!this.isFirstVideoReceived[l.ssrc]&&(this.onFirstVideoReceived&&this.onFirstVideoReceived(l.ssrc),this.isFirstVideoReceived[l.ssrc]=!0),l.framesDecodeCount>0&&!this.isFirstVideoDecoded[l.ssrc]&&(this.onFirstVideoDecoded&&this.onFirstVideoDecoded(l.ssrc,l.decodedFrame.width,l.decodedFrame.height),this.isFirstVideoDecoded[l.ssrc]=!0),h){const p=h.stats,v=Date.now()-h.lts;l.framesDecodeFreezeTime=p.framesDecodeFreezeTime,l.framesDecodeInterval=p.framesDecodeInterval,l.framesDecodeCount>p.framesDecodeCount&&this.isFirstVideoDecoded[l.ssrc]?(h.lts=Date.now(),l.framesDecodeInterval=v,l.framesDecodeInterval>=this.options.freezeRateLimit&&(this.getVideoIsReady(parseInt(o.ssrc,10))?l.framesDecodeFreezeTime+=l.framesDecodeInterval:this.setVideoIsReady2(parseInt(o.ssrc,10),!0))):l.framesDecodeCount<h.stats.framesDecodeCount&&(l.framesDecodeInterval=0)}this.lastDecodeVideoReceiverStats.set(l.ssrc,{stats:MJ({},l),lts:Date.now()}),this._stats.videoRecv.push(l);break}case"audio_recv":{const l=xa(QL);l.codec=o.googCodecName,l.outputLevel=Math.abs(Number(o.audioOutputLevel))/32767,l.decodingCNG=Number(o.googDecodingCNG),l.decodingCTN=Number(o.googDecodingCTN),l.decodingCTSG=Number(o.googDecodingCTSG),l.decodingNormal=Number(o.googDecodingNormal),l.decodingPLC=Number(o.googDecodingPLC),l.decodingPLCCNG=Number(o.googDecodingPLCCNG),l.expandRate=Number(o.googExpandRate),l.accelerateRate=Number(o.googAccelerateRate),l.preemptiveExpandRate=Number(o.googPreemptiveExpandRate),l.secondaryDecodedRate=Number(o.googSecondaryDecodedRate),l.speechExpandRate=Number(o.googSpeechExpandRate),l.preferredJitterBufferMs=Number(o.googPreferredJitterBufferMs),l.jitterBufferMs=Number(o.googJitterBufferMs),l.jitterMs=Number(o.googJitterReceived),l.bytes=Number(o.bytesReceived),l.packets=Number(o.packetsReceived),l.packetsLost=Number(o.packetsLost),l.ssrc=Number(o.ssrc),l.receivedFrames=Number(o.googDecodingCTN)||Number(o.packetsReceived),l.droppedFrames=Number(o.googDecodingPLC)+Number(o.googDecodingPLCCNG)||Number(o.packetsLost),l.receivedFrames>0&&!this.isFirstAudioReceived[l.ssrc]&&(this.onFirstAudioReceived&&this.onFirstAudioReceived(l.ssrc),this.isFirstAudioReceived[l.ssrc]=!0),l.decodingNormal>0&&!this.isFirstAudioDecoded[l.ssrc]&&(this.onFirstAudioDecoded&&this.onFirstAudioDecoded(l.ssrc),this.isFirstAudioDecoded[l.ssrc]=!0),this._stats.audioRecv.push(l);break}case"audio_send":{const l=xa(JL);l.codec=o.googCodecName,l.inputLevel=Math.abs(Number(o.audioInputLevel))/32767,l.aecReturnLoss=Number(o.googEchoCancellationReturnLoss||0),l.aecReturnLossEnhancement=Number(o.googEchoCancellationReturnLossEnhancement||0),l.residualEchoLikelihood=Number(o.googResidualEchoLikelihood||0),l.residualEchoLikelihoodRecentMax=Number(o.googResidualEchoLikelihoodRecentMax||0),l.bytes=Number(o.bytesSent),l.packets=Number(o.packetsSent),l.packetsLost=Number(o.packetsLost),l.ssrc=Number(o.ssrc),l.rttMs=Number(o.googRtt||0),this._stats.rtt=l.rttMs,this._stats.audioSend.push(l);break}}})}_getStats(){return new xe((r,o)=>{this.pc.getStats(r,o)})}statsResponsesToObjects(r){const o=[];return r.result().forEach(s=>{const l={id:s.id,timestamp:s.timestamp.valueOf().toString(),type:s.type};s.names().forEach(h=>{l[h]=s.stat(h)}),o.push(l)}),o}}function n2(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function _u(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?n2(Object(o),!0).forEach(function(s){N(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):n2(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}class r2 extends jC{constructor(){super(...arguments),N(this,"_stats",Kp),N(this,"report",void 0),N(this,"lastDecodeVideoReceiverStats",new Map),N(this,"lastVideoFramesRecv",new Map),N(this,"lastVideoFramesSent",new Map),N(this,"lastVideoFramesDecode",new Map),N(this,"lastVideoJBDelay",new Map),N(this,"lastAudioJBDelay",new Map),N(this,"mediaBytesSent",new Map),N(this,"mediaBytesRetransmit",new Map),N(this,"mediaBytesTargetEncode",new Map),N(this,"lastEncoderMs",new Map)}async updateStats(){this.report=await this.pc.getStats(),this._stats=xa(Kp),this.report.forEach(r=>{switch(r.type){case wo.OUTBOUND:r.mediaType==="audio"?this.processAudioOutboundStats(r):r.mediaType==="video"&&this.processVideoOutboundStats(r);break;case wo.INBOUND:r.mediaType==="audio"?this.processAudioInboundStats(r):r.mediaType==="video"&&this.processVideoInboundStats(r);break;case wo.TRANSPORT:{const o=this.report.get(r.selectedCandidatePairId);o&&this.processCandidatePairStats(o);break}case wo.CANDIDATE_PAIR:r.selected&&this.processCandidatePairStats(r)}}),this.updateSendBitrate(),this._stats.timestamp=Date.now(),this.calcLossRate(this._stats),this.stats=this._stats}async getSelectedCandidatePair(){const r=await this.pc.getStats(),o={local:_u({},cl),remote:_u({},cl)};return r.forEach(s=>{let l;if(s.type===wo.TRANSPORT&&(l=r.get(s.selectedCandidatePairId)),s.type===wo.CANDIDATE_PAIR&&s.selected&&(l=s),l){const h=(p,v)=>{p.type=v.type,p.id=v.id,v.address&&(p.address=v.address),v.candidateType&&(p.candidateType=v.candidateType),v.port&&(p.port=v.port),v.priority&&(p.priority=v.priority),v.protocol&&(p.protocol=v.protocol),v.relayProtocol&&(p.relayProtocol=v.relayProtocol)};if(l.localCandidateId){const p=r.get(l.localCandidateId);p&&h(o.local,p)}if(l.remoteCandidateId){const p=r.get(l.remoteCandidateId);p&&h(o.remote,p)}}}),o}processCandidatePairStats(r){if(this._stats.sendBandwidth=r.availableOutgoingBitrate||0,r.currentRoundTripTime&&(this._stats.rtt=1e3*r.currentRoundTripTime),this._stats.videoSend.forEach(o=>{r.currentRoundTripTime&&(o.rttMs=1e3*r.currentRoundTripTime)}),this._stats.audioSend.forEach(o=>{r.currentRoundTripTime&&(o.rttMs=1e3*r.currentRoundTripTime)}),this._stats.selectedCandidatePair.id=r.id,r.localCandidateId){const o=this.report.get(r.localCandidateId);o&&this.processCandidateStats(o)}if(r.remoteCandidateId){const o=this.report.get(r.remoteCandidateId);o&&this.processCandidateStats(o)}}processCandidateStats(r){let o;r.type===wo.LOCAL_CANDIDATE&&(o=this._stats.selectedCandidatePair.localCandidate),r.type===wo.REMOTE_CANDIDATE&&(o=this._stats.selectedCandidatePair.remoteCandidate),o&&(o.type=r.type,o.id=r.id,r.address&&(o.address=r.address),r.candidateType&&(o.candidateType=r.candidateType),r.port&&(o.port=r.port),r.priority&&(o.priority=r.priority),r.protocol&&(o.protocol=r.protocol),r.relayProtocol&&(o.relayProtocol=r.relayProtocol),r.type===wo.LOCAL_CANDIDATE&&this.stats.selectedCandidatePair.localCandidate.id!==o.id&&this.onSelectedLocalCandidateChanged&&this.onSelectedLocalCandidateChanged(_u({},o),_u({},this.stats.selectedCandidatePair.localCandidate)),r.type===wo.REMOTE_CANDIDATE&&this.stats.selectedCandidatePair.remoteCandidate.id!==o.id&&this.onSelectedRemoteCandidateChanged&&this.onSelectedRemoteCandidateChanged(_u({},o),_u({},this.stats.selectedCandidatePair.remoteCandidate)))}processAudioInboundStats(r){let o=this._stats.audioRecv.find(s=>s.ssrc===r.ssrc);o||(o=xa(QL),this._stats.audioRecv.push(o)),o.ssrc=r.ssrc,o.packets=r.packetsReceived,o.packetsLost=r.packetsLost,o.bytes=r.bytesReceived,o.jitterMs=1e3*r.jitter,this.processAudioTrackReceiverStats(r,r.trackId,o),r.codecId&&(o.codec=this.getCodecFromCodecStats(r.codecId)),o.receivedFrames||(o.receivedFrames=r.packetsReceived),o.droppedFrames||(o.droppedFrames=r.packetsLost),o.receivedFrames>0&&!this.isFirstAudioReceived[o.ssrc]&&(this.onFirstAudioReceived&&this.onFirstAudioReceived(o.ssrc),this.isFirstAudioReceived[o.ssrc]=!0),o.outputLevel&&o.outputLevel>0&&!this.isFirstAudioDecoded[o.ssrc]&&(this.onFirstAudioDecoded&&this.onFirstAudioDecoded(o.ssrc),this.isFirstAudioDecoded[o.ssrc]=!0),typeof r.concealedSamples=="number"&&(o.concealedSamples=r.concealedSamples)}processVideoInboundStats(r){let o=this._stats.videoRecv.find(p=>p.ssrc===r.ssrc);o||(o=xa(qL),this._stats.videoRecv.push(o)),o.ssrc=r.ssrc,o.packets=r.packetsReceived,o.packetsLost=r.packetsLost,o.bytes=r.bytesReceived,o.firsCount=r.firCount,o.nacksCount=r.nackCount,o.plisCount=r.pliCount,o.framesDecodeCount=r.framesDecoded,o.totalInterFrameDelay=r.totalInterFrameDelay,o.totalSquaredInterFrameDelay=r.totalSquaredInterFrameDelay;const s=this.lastDecodeVideoReceiverStats.get(o.ssrc),l=this.lastVideoFramesDecode.get(o.ssrc),h=Date.now();if(o.framesDecodeCount>0&&!this.isFirstVideoDecoded[o.ssrc]){const p=o.decodedFrame?o.decodedFrame.width:0,v=o.decodedFrame?o.decodedFrame.height:0;this.onFirstVideoDecoded&&this.onFirstVideoDecoded(o.ssrc,p,v),this.isFirstVideoDecoded[o.ssrc]=!0}if(s){const p=s.stats,v=h-s.lts;o.framesDecodeFreezeTime=p.framesDecodeFreezeTime,o.framesDecodeInterval=p.framesDecodeInterval,!this.isFirstVideoDecoded[o.ssrc]&&v>this.options.firstVideoDecodedTimeout&&!this.isFirstVideoDecodedTimeout[o.ssrc]&&(this.onFirstVideoDecodedTimeout&&this.onFirstVideoDecodedTimeout(o.ssrc),this.isFirstVideoDecodedTimeout[o.ssrc]=!0),o.framesDecodeCount>p.framesDecodeCount&&this.isFirstVideoDecoded[o.ssrc]?(s.lts=Date.now(),o.framesDecodeInterval=v,o.framesDecodeInterval>=this.options.freezeRateLimit&&(this.getVideoIsReady(parseInt(r.ssrc))?o.framesDecodeFreezeTime+=o.framesDecodeInterval:this.setVideoIsReady2(parseInt(r.ssrc,10),!0))):o.framesDecodeCount<p.framesDecodeCount&&(o.framesDecodeInterval=0),r.framesDecoded&&r.qpSum&&(s.stats.framesDecodeCount>r.framesDecoded?o.qpSumPerFrame=r.qpSum/r.framesDecoded:o.qpSumPerFrame=(r.qpSum-s.qpSum)/(r.framesDecoded-s.stats.framesDecodeCount))}l&&h-l.lts>=800?(o.decodeFrameRate=Math.round((o.framesDecodeCount-l.count)/((h-l.lts)/1e3)),this.lastVideoFramesDecode.set(o.ssrc,{count:o.framesDecodeCount,lts:h,rate:o.decodeFrameRate})):l?o.decodeFrameRate=l.rate:this.lastVideoFramesDecode.set(o.ssrc,{count:o.framesDecodeCount,lts:h,rate:0}),r.totalDecodeTime&&(o.decodeMs=1e3*r.totalDecodeTime),this.processVideoTrackReceiverStats(r,r.trackId,o),r.codecId&&(o.codec=this.getCodecFromCodecStats(r.codecId)),r.framerateMean&&(o.framesRateFirefox=r.framerateMean),o.packets>0&&!this.isFirstVideoReceived[o.ssrc]&&(this.onFirstVideoReceived&&this.onFirstVideoReceived(o.ssrc),this.isFirstVideoReceived[o.ssrc]=!0),this.lastDecodeVideoReceiverStats.set(o.ssrc,{stats:_u({},o),lts:s?s.lts:Date.now(),qpSum:r.qpSum})}processVideoOutboundStats(r){let o=this._stats.videoSend.find(l=>l.ssrc===r.ssrc);o||(o=xa(XL),this._stats.videoSend.push(o));const s=this.mediaBytesSent.get(r.ssrc);if(s)s.add(r.bytesSent);else{const l=new UC(10);l.add(r.bytesSent),this.mediaBytesSent.set(r.ssrc,l)}if(r.retransmittedBytesSent!==void 0){const l=this.mediaBytesRetransmit.get(r.ssrc);if(l)l.add(r.retransmittedBytesSent);else{const h=new UC(10);h.add(r.retransmittedBytesSent),this.mediaBytesRetransmit.set(r.ssrc,h)}}if(r.totalEncodedBytesTarget){const l=this.mediaBytesTargetEncode.get(r.ssrc);if(l)l.add(r.totalEncodedBytesTarget);else{const h=new UC(10);h.add(r.totalEncodedBytesTarget),this.mediaBytesTargetEncode.set(r.ssrc,h)}}if(o.ssrc=r.ssrc,o.bytes=r.bytesSent,o.packets=r.packetsSent,o.firsCount=r.firCount,o.nacksCount=r.nackCount,o.plisCount=r.pliCount,o.frameCount=r.framesEncoded,o.adaptionChangeReason=r.qualityLimitationReason,o.scalabilityMode=r.scalabilityMode,r.totalEncodeTime&&r.framesEncoded){const l=this.lastEncoderMs.get(r.ssrc);if(!l||l.lastFrameCount>r.framesEncoded)o.avgEncodeMs=1e3*r.totalEncodeTime/r.framesEncoded;else{const h=r.framesEncoded-l.lastFrameCount,p=r.totalEncodeTime-l.lastEncoderTime;o.avgEncodeMs=1e3*p/h}}if(r.framesEncoded&&r.qpSum){const l=this.lastEncoderMs.get(r.ssrc);!l||l.lastFrameCount>r.framesEncoded?o.qpSumPerFrame=r.qpSum/r.framesEncoded:o.qpSumPerFrame=(r.qpSum-l.lastQpSum)/(r.framesEncoded-l.lastFrameCount)}if(this.lastEncoderMs.set(r.ssrc,{lastFrameCount:r.framesEncoded,lastEncoderTime:r.totalEncodeTime,lastQpSum:r.qpSum,lts:Date.now()}),r.codecId&&(o.codec=this.getCodecFromCodecStats(r.codecId)),r.mediaSourceId&&this.processVideoMediaSource(r.mediaSourceId,o),this.processVideoTrackSenderStats(r,r.trackId,o),r.remoteId)this.processRemoteInboundStats(r.remoteId,o);else{const l=this.findRemoteStatsId(r.ssrc,wo.REMOTE_INBOUND);l&&this.processRemoteInboundStats(l,o)}}processAudioOutboundStats(r){let o=this._stats.audioSend.find(s=>s.ssrc===r.ssrc);if(o||(o=xa(JL),this._stats.audioSend.push(o)),o.ssrc=r.ssrc,o.packets=r.packetsSent,o.bytes=r.bytesSent,r.mediaSourceId&&this.processAudioMediaSource(r.mediaSourceId,o),r.codecId&&(o.codec=this.getCodecFromCodecStats(r.codecId)),this.processAudioTrackSenderStats(r,r.trackId,o),r.remoteId)this.processRemoteInboundStats(r.remoteId,o);else{const s=this.findRemoteStatsId(r.ssrc,wo.REMOTE_INBOUND);s&&this.processRemoteInboundStats(s,o)}}findRemoteStatsId(r,o){var s;const l=Array.from(Ms(s=this.report).call(s)).find(h=>h.type===o&&h.ssrc===r);return l?l.id:null}processVideoMediaSource(r,o){const s=this.report.get(r);s&&s.width&&s.height&&s.framesPerSecond&&(o.inputFrame={width:s.width,height:s.height,frameRate:s.framesPerSecond})}processAudioMediaSource(r,o){const s=this.report.get(r);s&&(o.inputLevel=s.audioLevel)}processVideoTrackSenderStats(r,o,s){var l,h,p;const v=o?this.report.get(o):void 0,E=(l=v==null?void 0:v.framesSent)!==null&&l!==void 0?l:r.framesSent;let T=(h=v==null?void 0:v.frameWidth)!==null&&h!==void 0?h:r.frameWidth,C=(p=v==null?void 0:v.frameHeight)!==null&&p!==void 0?p:r.frameHeight;if(typeof E!="number")return;typeof T=="number"&&typeof C=="number"||(T=0,C=0);let I=0;const L=Date.now(),V=this.lastVideoFramesSent.get(s.ssrc);V&&L-V.lts>=800?(I=Math.round((E-V.count)/((L-V.lts)/1e3)),this.lastVideoFramesSent.set(s.ssrc,{count:E,lts:L,rate:I})):V?I=V.rate:this.lastVideoFramesSent.set(s.ssrc,{count:E,lts:L,rate:0}),s.sentFrame={width:T,height:C,frameRate:Math.max(0,I)}}processVideoTrackReceiverStats(r,o,s){var l,h,p,v,E;const T=o?this.report.get(o):void 0,C=(l=T==null?void 0:T.framesReceived)!==null&&l!==void 0?l:r.framesReceived,I=(h=T==null?void 0:T.frameWidth)!==null&&h!==void 0?h:r.frameWidth,L=(p=T==null?void 0:T.frameHeight)!==null&&p!==void 0?p:r.frameHeight,V=(v=T==null?void 0:T.jitterBufferDelay)!==null&&v!==void 0?v:r.jitterBufferDelay,Y=(E=T==null?void 0:T.jitterBufferEmittedCount)!==null&&E!==void 0?E:r.jitterBufferEmittedCount;if(typeof C=="number"){const q=this.lastVideoFramesRecv.get(s.ssrc),X=Date.now();s.framesReceivedCount=C;let le=0;q&&X-q.lts>=800?(le=Math.round((C-q.count)/((X-q.lts)/1e3)),this.lastVideoFramesRecv.set(s.ssrc,{count:C,lts:X,rate:le})):q?le=q.rate:this.lastVideoFramesRecv.set(s.ssrc,{count:C,lts:X,rate:0}),s.receivedFrame={width:I||0,height:L||0,frameRate:le||0},s.decodedFrame={width:I||0,height:L||0,frameRate:s.decodeFrameRate||0},s.outputFrame={width:I||0,height:L||0,frameRate:s.decodeFrameRate||0}}if(V&&Y){let q=this.lastVideoJBDelay.get(s.ssrc);this.lastVideoJBDelay.set(s.ssrc,{jitterBufferDelay:V,jitterBufferEmittedCount:Y}),q||(q={jitterBufferDelay:0,jitterBufferEmittedCount:0});const X=1e3*(V-q.jitterBufferDelay)/(Y-q.jitterBufferEmittedCount);s.jitterBufferMs=X,s.currentDelayMs=Math.round(X)}}processAudioTrackSenderStats(r,o,s){var l,h,p,v;const E=o?this.report.get(o):void 0,T=(l=(h=E==null?void 0:E.echoReturnLoss)!==null&&h!==void 0?h:r.echoReturnLoss)!==null&&l!==void 0?l:0,C=(p=(v=E==null?void 0:E.echoReturnLossEnhancement)!==null&&v!==void 0?v:r.echoReturnLossEnhancement)!==null&&p!==void 0?p:0;s.aecReturnLoss=T,s.aecReturnLossEnhancement=C}processAudioTrackReceiverStats(r,o,s){var l,h,p,v,E,T,C;const I=o?this.report.get(o):void 0,L=(l=I==null?void 0:I.removedSamplesForAcceleration)!==null&&l!==void 0?l:r.removedSamplesForAcceleration,V=(h=I==null?void 0:I.totalSamplesReceived)!==null&&h!==void 0?h:r.totalSamplesReceived,Y=(p=I==null?void 0:I.jitterBufferDelay)!==null&&p!==void 0?p:r.jitterBufferDelay,q=(v=I==null?void 0:I.jitterBufferEmittedCount)!==null&&v!==void 0?v:r.jitterBufferEmittedCount,X=(E=I==null?void 0:I.audioLevel)!==null&&E!==void 0?E:r==null?void 0:r.audioLevel,le=(T=I==null?void 0:I.totalSamplesDuration)!==null&&T!==void 0?T:r==null?void 0:r.totalSamplesDuration,he=(C=I==null?void 0:I.concealedSamples)!==null&&C!==void 0?C:r.concealedSamples;if(L&&V&&(s.accelerateRate=L/V),Y&&q){let De=this.lastAudioJBDelay.get(s.ssrc);this.lastAudioJBDelay.set(s.ssrc,{jitterBufferDelay:Y,jitterBufferEmittedCount:q}),De||(De={jitterBufferDelay:0,jitterBufferEmittedCount:0});const be=1e3*(Y-De.jitterBufferDelay)/(q-De.jitterBufferEmittedCount);s.jitterBufferMs=Math.round(be)}s.outputLevel=X;let Se=1920;le&&V&&(Se=V/le/50,s.receivedFrames=Math.round(V/Se)),he&&(s.droppedFrames=Math.round(he/Se))}processRemoteInboundStats(r,o){const s=this.report.get(r);s&&(o.packetsLost=s.packetsLost,s.roundTripTime&&(o.rttMs=1e3*s.roundTripTime))}getCodecFromCodecStats(r){const o=this.report.get(r);if(!o)return"";const s=o.mimeType.match(/\/(.*)$/);return s&&s[1]?s[1]:""}updateSendBitrate(){let r=0,o=null,s=null;this.mediaBytesSent.forEach(h=>{r+=h.diffMean()}),this.mediaBytesRetransmit.forEach(h=>{o=o===null?h.diffMean():o+h.diffMean()}),this.mediaBytesTargetEncode.forEach(h=>{s=s===null?h.diffMean():s+h.diffMean()});const l=o!==null?r-o:r;this._stats.bitrate={actualEncoded:8*l/(this.options.updateInterval/1e3),transmit:8*r/(this.options.updateInterval/1e3)},o!==null&&(this._stats.bitrate.retransmit=8*o/(this.options.updateInterval/1e3)),s!==null&&(this._stats.bitrate.targetEncoded=8*s/(this.options.updateInterval/1e3))}}class jJ extends jC{updateStats(){return xe.resolve()}}function FC(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:250,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:8,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:500,l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1e4;const h=kJ();return h?h<76?new UJ(n,{updateInterval:r,lossRateInterval:o,freezeRateLimit:s,firstVideoDecodedTimeout:l}):new r2(n,{updateInterval:r,lossRateInterval:o,freezeRateLimit:s,firstVideoDecodedTimeout:l}):LJ(n)?new r2(n,{updateInterval:r,lossRateInterval:o,freezeRateLimit:s,firstVideoDecodedTimeout:l}):new jJ(n,{updateInterval:r,lossRateInterval:o,freezeRateLimit:s,firstVideoDecodedTimeout:l})}var tn;function i2(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function o2(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?i2(Object(o),!0).forEach(function(s){N(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):i2(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}let Yp=(_e((tn=class mf extends F0{get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}constructor(r,o){super(r,o),N(this,"store",void 0),N(this,"peerConnection",void 0),N(this,"remoteSDP",void 0),N(this,"initialOffer",void 0),N(this,"statsFilter",void 0),N(this,"useRTX",!1),N(this,"localCapabilities",void 0),N(this,"localCandidateCount",0),N(this,"allCandidatesReceived",!1),N(this,"establishPromise",void 0),N(this,"mutex",new wi("P2PConnection-mutex")),this.store=o,this.peerConnection=new RTCPeerConnection(mf.resolvePCConfiguration(r),{optional:[{googDscp:!0}]}),this.statsFilter=FC(this.peerConnection,ie("STATS_UPDATE_INTERVAL"),void 0,Pn()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1,this.establishPromise=this.establish()}async establish(){try{const r=await this.peerConnection.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});if(!r.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const o=Eu(r.sdp),s=DC(r.sdp,!this.useRTX,ie("FILTER_VIDEO_FEC"),ie("FILTER_AUDIO_FEC"),["opus"]);return this.localCapabilities=s,this.initialOffer=r,o2(o2({},o),{},{rtpCapabilities:{send:{audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},recv:{audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},sendrecv:s},offerSDP:r.sdp})}catch(r){throw new Q(W.GET_LOCAL_CONNECTION_PARAMS_FAILED,r.toString())}}async connect(r,o,s,l,h,p){try{if(!this.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");this.remoteSDP=new DJ({remoteIceParameters:r,remoteDtlsParameters:o,candidates:s,remoteRTPCapabilities:l.send,remoteSetup:h,localCapabilities:this.localCapabilities,sdkCodec:this.store.codec,cname:p});const v=this.remoteSDP.toString();await this.peerConnection.setLocalDescription(this.initialOffer),await this.peerConnection.setRemoteDescription({type:"answer",sdp:v})}catch(v){throw new Q(W.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(v.toString()))}}send(r,o){var s=this;return Na(function*(){const l=yield It(s.mutex.lock());try{if(!s.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");const h=r.map(L=>s.peerConnection.addTrack(L._mediaStreamTrack)),p=yield It(s.peerConnection.createOffer()),v=ir.exports.parse(p.sdp),E=r.map(L=>{const V=L._mediaStreamTrack,Y=v.mediaDescriptions.find(q=>q.attributes.mid===V.kind);if(!Y)throw new Error("Cannot extract ssrc from mediaDescription.");return function(q,X,le){const he=q.attributes.ssrcs.filter(De=>De.attributes.label===X),Se=q.attributes.ssrcGroups;if(he.length===0)throw new Error("Cannot extract ssrc from plan-b SDP.");if(Se&&he.length>1){const De=Se.find(be=>be.ssrcIds.indexOf(he[0].ssrcId)!==-1);return De?[{ssrcId:De.ssrcIds[0],rtx:le?De.ssrcIds[1]:void 0}]:[{ssrcId:he[0].ssrcId}]}return[{ssrcId:he[0].ssrcId}]}(Y,V.id,s.useRTX)});let T;try{T=yield E}catch(L){throw h.forEach(V=>{bi()&&V.replaceTrack(null),s.peerConnection.removeTrack(V)}),L}const C=s.mungSendOfferSDP(p.sdp,r);s.remoteSDP.receive(r,o,T);const I=s.remoteSDP.toString();return yield It(s.peerConnection.setLocalDescription({type:"offer",sdp:C})),yield It(s.applySendEncodings(h,r)),yield It(s.peerConnection.setRemoteDescription({type:"answer",sdp:I})),r.map((L,V)=>{const Y=L._mediaStreamTrack.id;return{localSSRC:E[V],id:Y}})}catch(h){throw new Q(W.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(h.toString()))}finally{l()}})()}async stopSending(r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");const o=this.peerConnection.getSenders().filter(h=>{var p;return r.indexOf(((p=h.track)===null||p===void 0?void 0:p.id)||"")!==-1});if(o.length!==r.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.");o.map(h=>{bi()&&h.replaceTrack(null),this.peerConnection.removeTrack(h)});const s=await this.peerConnection.createOffer();await this.peerConnection.setLocalDescription(s),this.remoteSDP.stopReceiving(r);const l=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"answer",sdp:l})}catch(o){throw new Q(W.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(o.toString()))}}async receive(r,o,s,l){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(r," before remoteSDP created."));const{id:h,mslabel:p}=this.remoteSDP.send(r,o,l),v=new xe((C,I)=>{const L=setTimeout(()=>{I(new Error("Cannot receive track, id: ".concat(h)))},1e4),V=Y=>{const q=Ht();if((q.name==="Safari"&&Number(q.version)===11||Ti())&&Y.track.id!==h&&Y.streams[0].id===p){var X;const le=Y.streams[0].getTracks()[0];return(X=this.remoteSDP)===null||X===void 0||X.updateTrackLabel(r,h,Y.track.id),this.peerConnection.removeEventListener("track",V),clearTimeout(L),void C(le)}if(Y.track.id===h)return this.peerConnection.removeEventListener("track",V),clearTimeout(L),void C(Y.track)};this.peerConnection.addEventListener("track",V)}),E=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:E});const T=await this.peerConnection.createAnswer();return await this.peerConnection.setLocalDescription(T),{track:await v,id:h}}catch(h){throw new Q(W.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(h.toString()))}}async stopReceiving(r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");this.remoteSDP.stopSending(r);const o=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:o});const s=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(s)}catch(o){throw new Q(W.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(o.toString()))}}async muteRemote(r){}async unmuteRemote(r){}async muteLocal(r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");const o=this.peerConnection.getSenders().filter(s=>{var l;return r.indexOf(((l=s.track)===null||l===void 0?void 0:l.id)||"")!==-1});if(o.length!==r.length)throw new Error("sender' length doesn't match mids' length.");o.map(s=>{if(bi()&&s.track)s.track.enabled=!1;else{const l=s.getParameters();l.encodings.forEach(h=>h.active=!1),s.setParameters(l)}})}catch(o){throw new Q(W.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(o.toString()))}}async unmuteLocal(r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");const o=this.peerConnection.getSenders().filter(h=>{var p;return r.indexOf(((p=h.track)===null||p===void 0?void 0:p.id)||"")!==-1});if(o.length!==r.length)throw new Error("Senders' length doesn't match mids' length.");o.map(async h=>{if(bi()&&h.track)h.track.enabled=!0;else{const p=h.getParameters();p.encodings.forEach(v=>v.active=!0),await h.setParameters(p)}});const s=await this.peerConnection.createOffer();await this.peerConnection.setLocalDescription(s);const l=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"answer",sdp:l})}catch(o){throw new Q(W.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(o.toString()))}}restartICE(r){var o=this;return Na(function*(){const s=yield It(o.mutex.lock("From P2PConnection.restartICE"));try{if(!o.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");if(zn().supportPCSetConfiguration){const E=o.peerConnection.getConfiguration(),T=r===Vr.RELAY?"relay":"all";E.iceTransportPolicy!==T&&(U.debug("[".concat(o.store.clientId,"] restartICE change iceTransportPolicy from [").concat(E.iceTransportPolicy,"] to [").concat(T,"]")),E.iceTransportPolicy=T,o.peerConnection.setConfiguration(E))}else if(r===Vr.RELAY)return;r!==Vr.RELAY&&o.remoteSDP.updateCandidates(r);const l=yield It(o.peerConnection.createOffer({iceRestart:!0}));if(!l.sdp)throw new Error("Cannot restartICE because restart offer SDP does not exist.");const h=Eu(l.sdp),{remoteIceParameters:p}=yield h.iceParameters;o.remoteSDP.restartICE(p);const v=o.remoteSDP.toString();yield It(o.peerConnection.setLocalDescription(l)),yield It(o.peerConnection.setRemoteDescription({type:"answer",sdp:v}))}catch(l){U.warning("[".concat(o.store.clientId,"] restart ICE failed, abort operation"),l)}finally{s()}})()}close(){var r;this.peerConnection.close(),(r=this.onConnectionStateChange)===null||r===void 0||r.call(this,"closed"),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.statsFilter.destroy()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(r){return this.statsFilter.getVideoIsReady(r)}async updateEncoderConfig(r,o){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");const s=await this.peerConnection.createOffer(),l=this.mungSendOfferSDP(s.sdp,[o]);this.remoteSDP.updateRecvMedia(o._mediaStreamTrack.kind,o);const h=this.remoteSDP.toString();await this.peerConnection.setLocalDescription({type:"offer",sdp:l}),await this.peerConnection.setRemoteDescription({type:"answer",sdp:h})}catch(s){throw new Q(W.EXCHANGE_SDP_FAILED,s.toString())}}async updateSendParameters(r,o){const s=this.peerConnection.getSenders().filter(l=>{var h;return((h=l.track)===null||h===void 0?void 0:h.id)===r});s.length===1&&await this.applySendEncodings(s,[o])}setStatsRemoteVideoIsReady(r,o){this.statsFilter.setVideoIsReady2(r,o)}async replaceTrack(r,o){const s=this.peerConnection.getSenders().find(l=>{var h;return((h=l.track)===null||h===void 0?void 0:h.id)===o});s&&await s.replaceTrack(r._mediaStreamTrack)}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var r;(r=this.onICEConnectionStateChange)===null||r===void 0||r.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var r;(r=this.onConnectionStateChange)===null||r===void 0||r.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidate=r=>{r.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,U.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},setTimeout(()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,U.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))},ie("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(r){const o={iceServers:[],sdpSemantics:"plan-b"};return r.iceServers?o.iceServers=r.iceServers:r.turnServer&&r.turnServer.mode!=="off"&&(xp(r.turnServer.servers)?o.iceServers=r.turnServer.servers:(o.iceServers&&o.iceServers.push(...mf.turnServerConfigToIceServers(r.turnServer.servers)),ie("USE_TURN_SERVER_OF_GATEWAY")&&o.iceServers&&r.turnServer.serversFromGateway&&o.iceServers.push(...mf.turnServerConfigToIceServers(r.turnServer.serversFromGateway)),r.turnServer.servers.concat(r.turnServer.serversFromGateway||[]).forEach(s=>{s.forceturn&&(o.iceTransportPolicy="relay")}))),o}static turnServerConfigToIceServers(r){const o=[];return r.forEach(s=>{s.security?s.tcpport&&o.push({username:s.username,credential:s.password,credentialType:"password",urls:"turns:".concat(s.turnServerURL,":").concat(s.tcpport,"?transport=tcp")}):(s.udpport&&o.push({username:s.username,credential:s.password,credentialType:"password",urls:"turn:".concat(s.turnServerURL,":").concat(s.udpport,"?transport=udp")}),s.tcpport&&o.push({username:s.username,credential:s.password,credentialType:"password",urls:"turn:".concat(s.turnServerURL,":").concat(s.tcpport,"?transport=tcp")}))}),o}async applySendEncodings(r,o){try{if(!zn().supportSetRtpSenderParameters||r.length!==o.length)return;for(let l=0;l<r.length;l++){var s;const h=r[l],p=o[l];if(!p)continue;const v={},E={};if(p instanceof rr)switch(p._optimizationMode){case"motion":v.degradationPreference="maintain-framerate";break;case"detail":v.degradationPreference="maintain-resolution";break;default:v.degradationPreference="balanced"}if(ie("DSCP_TYPE")&&ru()){const I=ie("DSCP_TYPE");["very-low","low","medium","high"].includes(I)&&(E.networkPriority=I)}const T=h.getParameters(),C=(s=T.encodings)===null||s===void 0?void 0:s[0];C&&Object.assign(C,E),Object.assign(T,v),await h.setParameters(T)}}catch{U.debug("[".concat(this.store.clientId,"] Apply RTPSendEncodings failed."))}}mungSendOfferSDP(r,o){const s=ir.exports.parse(r);return o.forEach((l,h)=>{const p=l._mediaStreamTrack,v=s.mediaDescriptions.find(E=>E.attributes.mid===p.kind);v&&Fd(v,l)}),ir.exports.print(s)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=r=>{var o;(o=this.onFirstAudioReceived)===null||o===void 0||o.call(this,r)},this.statsFilter.onFirstVideoReceived=r=>{var o;(o=this.onFirstVideoReceived)===null||o===void 0||o.call(this,r)},this.statsFilter.onFirstAudioDecoded=r=>{var o;(o=this.onFirstAudioDecoded)===null||o===void 0||o.call(this,r)},this.statsFilter.onFirstVideoDecoded=(r,o,s)=>{var l;(l=this.onFirstVideoDecoded)===null||l===void 0||l.call(this,r,o,s)},this.statsFilter.onSelectedLocalCandidateChanged=(r,o)=>{var s;(s=this.onSelectedLocalCandidateChanged)===null||s===void 0||s.call(this,r,o)},this.statsFilter.onSelectedRemoteCandidateChanged=(r,o)=>{var s;(s=this.onSelectedRemoteCandidateChanged)===null||s===void 0||s.call(this,r,o)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0}async batchReceive(r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.batchReceive before remoteSDP created.");const o=this.remoteSDP.batchSend(r).map((h,p)=>{let{id:v,mslabel:E}=h;const{kind:T}=r[p];return new xe((C,I)=>{const L=setTimeout(()=>{I(new Error("Cannot receive track, id: ".concat(v)))},1e4),V=Y=>{const q=Ht();if(q.name==="Safari"&&Number(q.version)===11&&Y.track.id!==v&&Y.streams[0].id===E){var X;const le=Y.streams[0].getTracks()[0];return(X=this.remoteSDP)===null||X===void 0||X.updateTrackLabel(T,v,Y.track.id),this.peerConnection.removeEventListener("track",V),clearTimeout(L),void C({track:le,id:v})}if(Y.track.id===v)return this.peerConnection.removeEventListener("track",V),clearTimeout(L),void C({track:Y.track,id:v})};this.peerConnection.addEventListener("track",V)})}),s=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:s});const l=await this.peerConnection.createAnswer();return await this.peerConnection.setLocalDescription(l),await xe.all(o)}catch(o){throw new Q(W.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(o.toString()))}}async getRemoteSSRC(r){if(!this.remoteSDP)return;const o=this.remoteSDP.getSSRC(r);return o==null?void 0:o[0].ssrcId}setConfiguration(r){if(zn().supportPCSetConfiguration){const o=mf.resolvePCConfiguration(r);this.peerConnection.setConfiguration(o)}}}).prototype,"connect",[sa],Object.getOwnPropertyDescriptor(tn.prototype,"connect"),tn.prototype),_e(tn.prototype,"stopSending",[sa],Object.getOwnPropertyDescriptor(tn.prototype,"stopSending"),tn.prototype),_e(tn.prototype,"receive",[sa],Object.getOwnPropertyDescriptor(tn.prototype,"receive"),tn.prototype),_e(tn.prototype,"stopReceiving",[sa],Object.getOwnPropertyDescriptor(tn.prototype,"stopReceiving"),tn.prototype),_e(tn.prototype,"muteRemote",[sa],Object.getOwnPropertyDescriptor(tn.prototype,"muteRemote"),tn.prototype),_e(tn.prototype,"unmuteRemote",[sa],Object.getOwnPropertyDescriptor(tn.prototype,"unmuteRemote"),tn.prototype),_e(tn.prototype,"muteLocal",[sa],Object.getOwnPropertyDescriptor(tn.prototype,"muteLocal"),tn.prototype),_e(tn.prototype,"unmuteLocal",[sa],Object.getOwnPropertyDescriptor(tn.prototype,"unmuteLocal"),tn.prototype),_e(tn.prototype,"close",[sa],Object.getOwnPropertyDescriptor(tn.prototype,"close"),tn.prototype),_e(tn.prototype,"updateEncoderConfig",[sa],Object.getOwnPropertyDescriptor(tn.prototype,"updateEncoderConfig"),tn.prototype),_e(tn.prototype,"updateSendParameters",[sa],Object.getOwnPropertyDescriptor(tn.prototype,"updateSendParameters"),tn.prototype),_e(tn.prototype,"replaceTrack",[sa],Object.getOwnPropertyDescriptor(tn.prototype,"replaceTrack"),tn.prototype),_e(tn.prototype,"getRemoteSSRC",[sa],Object.getOwnPropertyDescriptor(tn.prototype,"getRemoteSSRC"),tn.prototype),tn);function sa(n,r,o){const s=n[r];if(typeof s!="function")throw new Error("Cannot use mutex on object property.");return o.value=async function(){const l=this.mutex,h=await l.lock("Locking from P2PConnection.".concat(r));try{for(var p=arguments.length,v=new Array(p),E=0;E<p;E++)v[E]=arguments[E];return await s.apply(this,v)}finally{h()}},o}function a2(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function s2(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?a2(Object(o),!0).forEach(function(s){N(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):a2(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}const lg="9",c2=4e4;class FJ{get localCapabilities(){return nr(this._localCapabilities)}get rtpCapabilities(){return nr(this._rtpCapabilities)}get candidates(){return nr(this._candidates)}get iceParameters(){return nr(this._iceParameters)}get dtlsParameters(){return nr(this._dtlsParameters)}constructor(r){N(this,"sessionDesc",void 0),N(this,"_localCapabilities",void 0),N(this,"_rtpCapabilities",void 0),N(this,"_candidates",void 0),N(this,"_iceParameters",void 0),N(this,"_dtlsParameters",void 0),N(this,"setup",void 0),N(this,"currentMidIndex",void 0),N(this,"cname",void 0),N(this,"firefoxSsrcMidMap",new Map),r=nr(r);const{remoteIceParameters:o,remoteDtlsParameters:s,candidates:l,remoteRTPCapabilities:h,remoteSetup:p,localCapabilities:v,cname:E}=r,T=ir.exports.parse(`v=0
o=- 0 0 IN IP4 127.0.0.1
s=AgoraGateway
t=0 0
a=group:BUNDLE 0 1
a=msid-semantic: WMS
a=ice-lite
m=video 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendonly
a=rtcp-mux
a=rtcp-rsize
a=mid:0
m=audio 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendonly
a=rtcp-mux
a=rtcp-rsize
a=mid:1
`);this._rtpCapabilities=h,this._candidates=l,this._iceParameters=o,this._dtlsParameters=s,this._localCapabilities=v,this.setup=p,this.cname=E;const C=this.rtpCapabilities.send;for(const I of T.mediaDescriptions){if(I.attributes.iceUfrag=o.iceUfrag,I.attributes.icePwd=o.icePwd,I.attributes.fingerprints=s.fingerprints,I.attributes.candidates=l,I.attributes.setup=p,I.media.mediaType==="video"&&(I.media.fmts=C.videoCodecs.map(L=>L.payloadType.toString(10)),I.attributes.payloads=C.videoCodecs,I.attributes.extmaps=C.videoExtensions,ie("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:L,ssrcGroups:V}=aa([{ssrcId:c2,rtx:ie("USE_SUB_RTX")?40001:void 0}],this.cname);I.attributes.ssrcs=L,I.attributes.ssrcGroups=V}if(I.media.mediaType==="audio"&&(I.media.fmts=C.audioCodecs.map(L=>L.payloadType.toString(10)),I.attributes.payloads=C.audioCodecs,I.attributes.extmaps=C.audioExtensions,sl(I),ie("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:L,ssrcGroups:V}=aa([{ssrcId:2e4}],this.cname);I.attributes.ssrcs=L,I.attributes.ssrcGroups=V}}this.sessionDesc=T,this.currentMidIndex=T.mediaDescriptions.length-1}preloadRemoteMedia(){const r=ie("PRELOAD_MEDIA_COUNT");this.rtpCapabilities;const o=this.candidates,s=this.dtlsParameters,l=this.iceParameters,h=this.rtpCapabilities.send;for(let p=1;p<r;p++){const v=2*p+2e4,E=2*p+c2,{ssrcs:T,ssrcGroups:C}=aa([{ssrcId:v}],this.cname),{ssrcs:I,ssrcGroups:L}=aa([{ssrcId:E,rtx:ie("USE_SUB_RTX")?E+1:void 0}],this.cname);this.sessionDesc.mediaDescriptions.push({media:{mediaType:"video",port:lg,protos:["UDP","TLS","RTP","SAVPF"],fmts:h.videoCodecs.map(V=>V.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:l.iceUfrag,icePwd:l.icePwd,unrecognized:[],candidates:o,extmaps:h.videoExtensions,fingerprints:s.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:I,ssrcGroups:L,rtcpFeedbackWildcards:[],payloads:h.videoCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*p)}}),this.sessionDesc.mediaDescriptions.push({media:{mediaType:"audio",port:lg,protos:["UDP","TLS","RTP","SAVPF"],fmts:h.audioCodecs.map(V=>V.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:l.iceUfrag,icePwd:l.icePwd,unrecognized:[],candidates:o,extmaps:h.audioExtensions,fingerprints:s.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:T,ssrcGroups:C,rtcpFeedbackWildcards:[],payloads:h.audioCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*p+1)}}),this.currentMidIndex+=2}this.updateBundleMids()}toString(){return ir.exports.print(this.sessionDesc)}send(r,o,s,l){const{ssrcs:h,ssrcGroups:p}=aa(o,this.cname,ie("SYNC_GROUP")?s:void 0),v=this.findPreloadMediaDesc(h);if(v){if(Pn()&&this.firefoxSsrcMidMap.set(h[0].ssrcId,v.attributes.mid),l&&(l.twcc||l.remb)){const E=this.sessionDesc.mediaDescriptions.indexOf(v);return this.sessionDesc.mediaDescriptions[E]=this.mungSendMediaDesc(v,l),{mid:v.attributes.mid,needExchangeSDP:!0}}return{mid:v.attributes.mid,needExchangeSDP:!1}}{const E=this.findAvailableMediaIndex(r,h);let T;return E===-1||E===1&&(bi()||nx())||E===0&&ie("USE_SUB_RTX")||rx()?(T=this.createOrRecycleSendMedia(r,h,p,"sendonly",l),this.updateBundleMids()):(T=nr(this.sessionDesc.mediaDescriptions[E]),T.attributes.direction="sendonly",T.attributes.ssrcs=h,T.attributes.ssrcGroups=p,this.sessionDesc.mediaDescriptions[E]=this.mungSendMediaDesc(T,l)),Pn()&&this.firefoxSsrcMidMap.set(h[0].ssrcId,T.attributes.mid),{mid:T.attributes.mid,needExchangeSDP:!0}}}batchSend(r){const o=r.map(h=>{let{kind:p,ssrcMsg:v,mslabel:E}=h;return this.send(p,v,E)}),s=[];let l=!1;return o.forEach(h=>{let{mid:p,needExchangeSDP:v}=h;v&&(l=!0),s.push(p)}),{mids:s,needExchangeSDP:l}}stopSending(r){const o=this.sessionDesc.mediaDescriptions.filter(s=>s.attributes.mid&&r.indexOf(s.attributes.mid)!==-1);if(o.length!==r.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.stopSending.");o.forEach(s=>{s.attributes.mid==="0"||Pn()||rx()?s.attributes.ssrcs=[]:(s.attributes.ssrcs=[],s.attributes.direction="inactive",s.media.port="0")}),this.updateBundleMids()}mute(r){const o=this.sessionDesc.mediaDescriptions.find(s=>s.attributes.mid===r);if(!o)throw new Error("mediaDescription not found with ".concat(r," in remote SDP when calling RemoteSDP.mute."));o.attributes.direction="inactive"}unmute(r){const o=this.sessionDesc.mediaDescriptions.find(s=>s.attributes.mid===r);if(!o)throw new Error("mediaDescription not found with ".concat(r," in remote SDP when calling RemoteSDP.unmute."));o.attributes.direction="sendonly"}muteRemote(r){const o=this.sessionDesc.mediaDescriptions.filter(s=>r.includes(s.attributes.mid||""));if(o.length!==r.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");o.forEach(s=>{s.attributes.direction="inactive"})}unmuteRemote(r){const o=this.sessionDesc.mediaDescriptions.filter(s=>r.includes(s.attributes.mid||""));if(o.length!==r.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");o.forEach(s=>{s.attributes.direction="recvonly"})}receive(r,o,s,l){r.forEach((h,p)=>{this.createOrRecycleRecvMedia(h,[],"recvonly",o,s,l[p])}),this.updateBundleMids()}stopReceiving(r){const o=this.sessionDesc.mediaDescriptions.filter(s=>r.indexOf(s.attributes.mid)!==-1);if(o.length!==r.length)throw new Error("MediaDescriptions' length doesn't match mids's length when calling RemoteSDP.receive.");o.forEach(s=>{s.media.port="0",s.attributes.direction="inactive"}),this.updateBundleMids()}updateCandidates(r){r===Vr.TCP?this._candidates.forEach(o=>{this._candidates.findIndex(s=>s.transport==="tcp"&&s.connectionAddress===o.connectionAddress&&s.port===o.port)===-1&&this._candidates.push(s2(s2({},o),{},{foundation:"tcpcandidate",priority:Number(o.priority)-1+"",transport:"tcp",port:Number(o.port)+90+""}))}):this._candidates=this._candidates.filter(o=>o.transport!=="tcp");for(const o of this.sessionDesc.mediaDescriptions)o.attributes.candidates=this.candidates}restartICE(r){r=nr(r),this._iceParameters=r,this.sessionDesc.mediaDescriptions.forEach(o=>{o.attributes.iceUfrag=r.iceUfrag,o.attributes.icePwd=r.icePwd})}predictReceivingMids(r){const o=[];for(let s=0;s<r;s++)o.push((this.currentMidIndex+s+1).toString(10));return o}findAvailableMediaIndex(r,o){return this.sessionDesc.mediaDescriptions.findIndex(s=>{const l=s.media.mediaType===r&&s.media.port!=="0"&&(s.attributes.direction==="sendonly"||s.attributes.direction==="sendrecv")&&s.attributes.ssrcs.length===0;if(Pn()){if(l){const h=this.firefoxSsrcMidMap.get(o[0].ssrcId);return!(h||s.attributes.mid!=="0"&&s.attributes.mid!=="1")||!(!h||h!==s.attributes.mid)}return!1}return l})}createOrRecycleRecvMedia(r,o,s,l,h,p){const v=r._mediaStreamTrack.kind,E=this.rtpCapabilities.recv,T=this.localCapabilities.send;let C=[];if(v===dt.VIDEO){var I,L;if(ie("H264_PROFILE_LEVEL_ID")&&l==="h264"&&(C=E.videoCodecs.filter(le=>{var he,Se;return(((he=le.rtpMap)===null||he===void 0?void 0:he.encodingName.toLowerCase())||"").includes(l)&&(le==null||(Se=le.fmtp)===null||Se===void 0?void 0:Se.parameters["profile-level-id"])===ie("H264_PROFILE_LEVEL_ID")})),!C||((I=C)===null||I===void 0?void 0:I.length)===0){const le=T.videoCodecs.filter(he=>{var Se;return(((Se=he.rtpMap)===null||Se===void 0?void 0:Se.encodingName.toLowerCase())||"").includes(l)});le.length!==0&&(C=E.videoCodecs.filter(he=>le.some(Se=>Se.payloadType===he.payloadType)))}if(ie("USE_PUB_RTX")){const le=C.map(Se=>Se.payloadType.toString()),he=E.videoCodecs.filter(Se=>{var De,be;return((De=Se.rtpMap)===null||De===void 0?void 0:De.encodingName)==="rtx"&&le.includes(((be=Se.fmtp)===null||be===void 0?void 0:be.parameters.apt)||"")});C=[...C,...he]}C.length===0&&(U.warning("codec ".concat(l," not included in rtpCapabilities, fallback to default payloads: ").concat((L=E.videoCodecs[0].rtpMap)===null||L===void 0?void 0:L.encodingName)),C=E.videoCodecs)}else C=E.audioCodecs.filter(le=>{var he;return(((he=le.rtpMap)===null||he===void 0?void 0:he.encodingName.toLowerCase())||"").includes(h)}),C.length===0&&(U.warning("codec ".concat(h," not included in rtpCapabilities, fallback to opus")),C=E.audioCodecs.filter(le=>{var he;return(((he=le.rtpMap)===null||he===void 0?void 0:he.encodingName.toLowerCase())||"").includes("opus")}));const V=v===dt.VIDEO?E.videoExtensions:E.audioExtensions;this.currentMidIndex+=1;const Y="".concat(this.currentMidIndex);let q={media:{mediaType:v,port:lg,protos:["UDP","TLS","RTP","SAVPF"],fmts:C.map(le=>le.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:V,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:o,ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:C,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:s,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(Y)}};q=this.mungRecvMediaDsec(q,r,p);const X=this.findFirstClosedMedia(v);if(X){const le=this.sessionDesc.mediaDescriptions.indexOf(X);this.sessionDesc.mediaDescriptions[le]=q}else this.sessionDesc.mediaDescriptions.push(q);return q}createOrRecycleSendMedia(r,o,s,l,h){const p=this.rtpCapabilities.send,v=r===dt.VIDEO?p.videoCodecs:p.audioCodecs,E=r===dt.VIDEO?p.videoExtensions:p.audioExtensions;this.currentMidIndex+=1;const T="".concat(this.currentMidIndex);let C={media:{mediaType:r,port:lg,protos:["UDP","TLS","RTP","SAVPF"],fmts:v.map(L=>L.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:E,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:o,ssrcGroups:s,rtcpFeedbackWildcards:[],payloads:v,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:l,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(T)}};C=this.mungSendMediaDesc(C,h);const I=this.findFirstClosedMedia(r);if(I){const L=this.sessionDesc.mediaDescriptions.indexOf(I);this.sessionDesc.mediaDescriptions[L]=C}else this.sessionDesc.mediaDescriptions.push(C);return C}updateBundleMids(){this.sessionDesc.attributes.groups[0].identificationTag=this.sessionDesc.mediaDescriptions.filter(r=>r.media.port!=="0").map(r=>r.attributes.mid)}mungRecvMediaDsec(r,o,s){const l=nr(r);return kC(l),Fd(l,o),LC(l,o),HL(l),sg(l,s,this.localCapabilities.send),l}mungSendMediaDesc(r,o){const s=nr(r);return sg(s,o,this.localCapabilities.recv),sl(s),s}updateRecvMedia(r,o){const s=this.sessionDesc.mediaDescriptions.findIndex(l=>l.attributes.mid===r);if(s!==-1){const l=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[s],o);this.sessionDesc.mediaDescriptions[s]=l}}bumpMid(r){this.currentMidIndex+=r}findFirstClosedMedia(r){return this.sessionDesc.mediaDescriptions.find(o=>Pn()?o.media.port==="0"&&o.media.mediaType===r:o.media.port==="0")}findPreloadMediaDesc(r){return this.sessionDesc.mediaDescriptions.find(o=>{var s,l;return((s=o.attributes)===null||s===void 0||(l=s.ssrcs[0])===null||l===void 0?void 0:l.ssrcId)===r[0].ssrcId})}getSSRC(r){var o;return(o=this.sessionDesc.mediaDescriptions.find(s=>s.attributes.mid===r))===null||o===void 0?void 0:o.attributes.ssrcs}}var nn;function l2(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function Vd(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?l2(Object(o),!0).forEach(function(s){N(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):l2(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}let fc=(_e((nn=class gf extends F0{get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get dtlsTransportState(){var r,o,s;return(r=(o=this.peerConnection.getReceivers()[0])===null||o===void 0||(s=o.transport)===null||s===void 0?void 0:s.state)!==null&&r!==void 0?r:null}constructor(r,o){super(r,o),N(this,"store",void 0),N(this,"peerConnection",void 0),N(this,"remoteSDP",void 0),N(this,"initialOffer",void 0),N(this,"transportEventReceiver",void 0),N(this,"statsFilter",void 0),N(this,"localCapabilities",void 0),N(this,"localCandidateCount",0),N(this,"allCandidatesReceived",!1),N(this,"selectedCandidatePairTimer",void 0),N(this,"establishPromise",void 0),N(this,"mutex",new wi("P2PConnection-mutex")),this.store=o,this.peerConnection=new RTCPeerConnection(gf.resolvePCConfiguration(r),{optional:[{googDscp:!0}]}),this.statsFilter=FC(this.peerConnection,ie("STATS_UPDATE_INTERVAL"),void 0,Pn()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1,this.establishPromise=this.establish()}async establish(){try{this.peerConnection.addTransceiver("video",{direction:"recvonly"}),this.peerConnection.addTransceiver("audio",{direction:"recvonly"});const r=await this.peerConnection.createOffer();if(!r.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const o=Eu(r.sdp),s=await GL(!ie("USE_PUB_RTX")&&!ie("USE_SUB_RTX"),ie("FILTER_VIDEO_FEC"),ie("FILTER_AUDIO_FEC"));return this.localCapabilities=MC(s),this.initialOffer=r,Vd(Vd({},o),{},{rtpCapabilities:s,offerSDP:r.sdp})}catch(r){throw new Q(W.GET_LOCAL_CONNECTION_PARAMS_FAILED,r.toString())}}async connect(r,o,s,l,h,p){try{if(!this.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");this.remoteSDP=new FJ({remoteIceParameters:r,remoteDtlsParameters:o,candidates:s,remoteRTPCapabilities:l,remoteSetup:h,localCapabilities:this.localCapabilities,cname:p});const v=this.remoteSDP.toString(),E=ir.exports.parse(this.initialOffer.sdp),T=E.mediaDescriptions.find(V=>V.media.mediaType==="audio");T&&sl(T);const C=ir.exports.print(E),I=this.logSDPExchange(C||"","offer","local","connect");this.store.descriptionStart(),await this.peerConnection.setLocalDescription({type:"offer",sdp:C}),I==null||I(v),await this.peerConnection.setRemoteDescription({type:"answer",sdp:v});const L=this.peerConnection.getTransceivers()[0];if(L!=null&&L.receiver&&this.tryBindTransportEvents(L.receiver),ie("PRELOAD_MEDIA_COUNT")>0){this.remoteSDP.preloadRemoteMedia();const V=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:V});const Y=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(Y)}}catch(v){throw new Q(W.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(v.toString()))}}send(r,o,s){var l=this;return Na(function*(){const h=yield It(l.mutex.lock("From P2PConnection.send"));try{if(!l.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");const p=[];r.forEach(q=>{const X=l.peerConnection.addTransceiver(q._mediaStreamTrack,{direction:"sendonly"});p.push(X),q._updateRtpTransceiver(X)}),Pn()&&ie("SIMULCAST")===!0&&(yield It(l.applySimulcastForFirefox(p,r)));const v=yield It(l.peerConnection.createOffer()),E=l.remoteSDP.predictReceivingMids(r.length),T=l.mungSendOfferSDP(v.sdp,r,E),C=ir.exports.parse(T),I=E.map(q=>{const X=C.mediaDescriptions.find(le=>le.attributes.mid===q);if(!X)throw new Error("Cannot extract ssrc from mediaDescription.");return BL(X,ie("USE_PUB_RTX"))});let L;try{L=yield I}catch(q){L=[],l.remoteSDP.receive(r,o,s,L);const X=l.remoteSDP.toString();throw yield It(l.peerConnection.setLocalDescription({type:"offer",sdp:T})),yield It(l.peerConnection.setRemoteDescription({type:"answer",sdp:X})),yield It(l.stopSending(E,!0)),q}l.remoteSDP.receive(r,o,s,L);const V=l.remoteSDP.toString(),Y=l.logSDPExchange(T,"offer","local","send");return yield It(l.peerConnection.setLocalDescription({type:"offer",sdp:T})),yield It(l.applySimulcastEncodings(p,r)),yield It(l.applySendEncodings(p,r)),Y==null||Y(V),yield It(l.peerConnection.setRemoteDescription({type:"answer",sdp:V})),p.map((q,X)=>{const le=E[X];return{localSSRC:I[X],id:le,transceiver:q}})}catch(p){throw p instanceof Q?p:new Q(W.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(p.toString()))}finally{h()}})()}async stopSending(r,o){const s=o?void 0:await this.mutex.lock("From P2PConnection.stopSending");try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");const l=this.peerConnection.getTransceivers().filter(E=>r.indexOf(E.mid)!==-1);if(l.length!==r.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.");l.map(E=>{var T;E.direction="inactive",(T=E.stop)===null||T===void 0||T.call(E)});const h=await this.peerConnection.createOffer(),p=this.logSDPExchange(h.sdp||"","offer","local","stopSending");await this.peerConnection.setLocalDescription(h),this.remoteSDP.stopReceiving(r);const v=this.remoteSDP.toString();p==null||p(v),await this.peerConnection.setRemoteDescription({type:"answer",sdp:v})}catch(l){throw new Q(W.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(l.toString()))}finally{s&&s()}}async receive(r,o,s,l){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(r," before remoteSDP created."));const{mid:h,needExchangeSDP:p}=this.remoteSDP.send(r,o,s,l);if(p){const E=this.remoteSDP.toString(),T=this.logSDPExchange(E,"offer","remote","receive");await this.peerConnection.setRemoteDescription({type:"offer",sdp:E});const C=await this.peerConnection.createAnswer(),I=this.mungReceiveAnswerSDP(C.sdp,h,r);T==null||T(I||""),await this.peerConnection.setLocalDescription({type:"answer",sdp:I}),U.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(r," by exchanging SDP."))}else U.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(r," no need to exchange SDP."));const v=this.peerConnection.getTransceivers().find(E=>E.mid===h);if(!v)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:v.receiver.track,id:h,transceiver:v}}catch(h){throw new Q(W.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(h.toString()))}}async batchReceive(r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.batchReceive before remoteSDP created.");const{mids:o,needExchangeSDP:s}=this.remoteSDP.batchSend(r);if(s){const l=this.remoteSDP.toString(),h=this.logSDPExchange(l,"offer","remote","receive");await this.peerConnection.setRemoteDescription({type:"offer",sdp:l});const p=await this.peerConnection.createAnswer();h==null||h(p.sdp||""),await this.peerConnection.setLocalDescription(p),U.debug("[".concat(this.store.clientId,"] [P2PConnection] batchReceive by exchanging SDP."))}else U.debug("[".concat(this.store.clientId,"] [P2PConnection] batchReceive no need to exchange SDP."));return o.map(l=>{const h=this.peerConnection.getTransceivers().find(p=>p.mid===l);if(!h)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:h.receiver.track,id:l,transceiver:h}})}catch(o){throw new Q(W.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(o.toString()))}}async stopReceiving(r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");this.remoteSDP.stopSending(r);const o=this.remoteSDP.toString(),s=this.logSDPExchange(o,"offer","remote","stopReceiving");await this.peerConnection.setRemoteDescription({type:"offer",sdp:o});const l=await this.peerConnection.createAnswer();s==null||s(l.sdp||""),await this.peerConnection.setLocalDescription(l)}catch(o){throw new Q(W.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(o.toString()))}}async muteRemote(r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteRemote mid=".concat(r," before remote SDP created."));this.remoteSDP.mute(r);const o=this.remoteSDP.toString(),s=this.logSDPExchange(o,"offer","remote","muteRemote");await this.peerConnection.setRemoteDescription({type:"offer",sdp:o});const l=await this.peerConnection.createAnswer();s==null||s(l.sdp||""),await this.peerConnection.setLocalDescription(l)}catch(o){throw new Q(W.EXCHANGE_SDP_FAILED,"P2PConnection.muteRemote failed; ".concat(o.toString()))}}async unmuteRemote(r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteRemote mid=".concat(r," before remote SDP created."));this.remoteSDP.unmute(r);const o=this.remoteSDP.toString(),s=this.logSDPExchange(o,"offer","remote","unmuteRemote");await this.peerConnection.setRemoteDescription({type:"offer",sdp:o});const l=await this.peerConnection.createAnswer();s==null||s(l.sdp||""),await this.peerConnection.setLocalDescription(l)}catch(o){throw new Q(W.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteRemote failed; ".concat(o.toString()))}}async muteLocal(r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");const o=this.peerConnection.getTransceivers().filter(p=>p.mid&&r.indexOf(p.mid)!==-1);if(o.length!==r.length)throw new Error("Transceivers' length doesn't match mids' length.");o.map(p=>{p.direction="inactive"});const s=await this.peerConnection.createOffer(),l=this.logSDPExchange(s.sdp||"","offer","local","muteLocal");await this.peerConnection.setLocalDescription(s),this.remoteSDP.muteRemote(r);const h=this.remoteSDP.toString();l==null||l(h),await this.peerConnection.setRemoteDescription({type:"answer",sdp:h})}catch(o){throw new Q(W.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(o.toString()))}}async unmuteLocal(r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");const o=this.peerConnection.getTransceivers().filter(p=>p.mid&&r.indexOf(p.mid)!==-1);if(o.length!==r.length)throw new Error("Transceivers' length doesn't match mids' length.");o.map(async(p,v)=>{p.direction="sendonly"});const s=await this.peerConnection.createOffer(),l=this.logSDPExchange(s.sdp||"","offer","local","unmuteLocal");await this.peerConnection.setLocalDescription(s),this.remoteSDP.unmuteRemote(r);const h=this.remoteSDP.toString();l==null||l(h),await this.peerConnection.setRemoteDescription({type:"answer",sdp:h})}catch(o){throw new Q(W.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(o.toString()))}}restartICE(r){var o=this;return Na(function*(){const s=yield It(o.mutex.lock("From P2PConnection.restartICE"));try{if(!o.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");if(zn().supportPCSetConfiguration){const T=o.peerConnection.getConfiguration(),C=r===Vr.RELAY?"relay":"all";T.iceTransportPolicy!==C&&(U.debug("[".concat(o.store.clientId,"] restartICE change iceTransportPolicy from [").concat(T.iceTransportPolicy,"] to [").concat(C,"]")),T.iceTransportPolicy=C,o.peerConnection.setConfiguration(T))}else if(r===Vr.RELAY)return;r!==Vr.RELAY&&o.remoteSDP.updateCandidates(r);const l=yield It(o.peerConnection.createOffer({iceRestart:!0}));if(!l.sdp)throw new Error("Cannot restartICE because restart offer SDP does not exist.");const h=Eu(l.sdp),{remoteIceParameters:p}=yield h.iceParameters;o.remoteSDP.restartICE(p);const v=o.remoteSDP.toString(),E=o.logSDPExchange(l.sdp||"","offer","local","restartICE");o.store.descriptionStart(),yield It(o.peerConnection.setLocalDescription(l)),E==null||E(v),yield It(o.peerConnection.setRemoteDescription({type:"answer",sdp:v}))}catch(l){U.warning("[".concat(o.store.clientId,"] restart ICE failed, abort operation"),l)}finally{s()}})()}close(){var r;this.peerConnection.close(),(r=this.onConnectionStateChange)===null||r===void 0||r.call(this,"closed"),this.tryUnbindTransportEvents(),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.transportEventReceiver=void 0,this.statsFilter.destroy()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(r){return this.statsFilter.getVideoIsReady(r)}async updateEncoderConfig(r,o){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");const s=await this.peerConnection.createOffer(),l=this.mungSendOfferSDP(s.sdp,[o],[r]);this.remoteSDP.updateRecvMedia(r,o);const h=this.remoteSDP.toString(),p=this.logSDPExchange(l,"offer","local","updateEncoderConfig");await this.peerConnection.setLocalDescription({type:"offer",sdp:l}),p==null||p(h),await this.peerConnection.setRemoteDescription({type:"answer",sdp:h})}catch(s){throw new Q(W.EXCHANGE_SDP_FAILED,s.toString())}}async updateSendParameters(r,o){const s=this.peerConnection.getTransceivers().filter(l=>l.mid===r);s.length===1&&(this.isVP8Simulcast(o)?Pn()||await this.applySimulcastEncodings(s,[o]):await this.applySendEncodings(s,[o]))}setStatsRemoteVideoIsReady(r,o){this.statsFilter.setVideoIsReady2(r,o)}async replaceTrack(r,o){const s=this.peerConnection.getTransceivers().find(l=>l.mid===o);s&&await s.sender.replaceTrack(r._mediaStreamTrack)}async getSelectedCandidatePair(){const r=this.peerConnection.getReceivers();if(r.length>0&&r[0].transport&&r[0].transport.iceTransport&&r[0].transport.iceTransport.getSelectedCandidatePair&&r[0].transport.iceTransport.getSelectedCandidatePair()){const o=r[0].transport.iceTransport,{local:s,remote:l}=o.getSelectedCandidatePair();return{local:Vd(Vd({},cl),{},{candidateType:s.type,protocol:s.protocol,address:s.address,port:s.port}),remote:Vd(Vd({},cl),{},{candidateType:l.type,protocol:l.protocol,address:l.address,port:l.port})}}return this.statsFilter.getSelectedCandidatePair()}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var r;(r=this.onICEConnectionStateChange)===null||r===void 0||r.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var r;(r=this.onConnectionStateChange)===null||r===void 0||r.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidate=r=>{r.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,U.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},setTimeout(()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,U.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))},ie("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(r){const o={iceServers:[]};return r.iceServers?o.iceServers=r.iceServers:r.turnServer&&r.turnServer.mode!=="off"&&(xp(r.turnServer.servers)?o.iceServers=r.turnServer.servers:(o.iceServers&&o.iceServers.push(...gf.turnServerConfigToIceServers(r.turnServer.servers)),ie("USE_TURN_SERVER_OF_GATEWAY")&&o.iceServers&&r.turnServer.serversFromGateway&&o.iceServers.push(...gf.turnServerConfigToIceServers(r.turnServer.serversFromGateway)),ie("FORCE_TURN_TCP")?o.iceTransportPolicy="relay":r.turnServer.servers.concat(r.turnServer.serversFromGateway||[]).forEach(s=>{s.forceturn&&(o.iceTransportPolicy="relay")}))),ie("ENABLE_ENCODED_TRANSFORM")&&zn().supportWebRTCEncodedTransform&&(o.encodedInsertableStreams=!0),o}static turnServerConfigToIceServers(r){const o=[];return r.forEach(s=>{s.security?s.tcpport&&o.push({username:s.username,credential:s.password,credentialType:"password",urls:"turns:".concat(K0(s.turnServerURL),":").concat(s.tcpport,"?transport=tcp")}):(s.udpport&&!ie("FORCE_TURN_TCP")&&o.push({username:s.username,credential:s.password,credentialType:"password",urls:"turn:".concat(s.turnServerURL,":").concat(s.udpport,"?transport=udp")}),s.tcpport&&o.push({username:s.username,credential:s.password,credentialType:"password",urls:"turn:".concat(s.turnServerURL,":").concat(s.tcpport,"?transport=tcp")}))}),o}tryBindTransportEvents(r){const o=r.transport;if(o){this.transportEventReceiver=r,o.onstatechange=()=>{var l;o!=null&&o.state&&((l=this.onDTLSTransportStateChange)===null||l===void 0||l.call(this,o.state))},o.onerror=l=>{var h;(h=this.onDTLSTransportError)===null||h===void 0||h.call(this,"error"in l?l.error:l)};const s=o.iceTransport;s&&(s.onstatechange=()=>{const l=o==null?void 0:o.iceTransport.state;var h;l&&((h=this.onICETransportStateChange)===null||h===void 0||h.call(this,l))},s.getSelectedCandidatePair&&(s.onselectedcandidatepairchange=()=>{if(s.getSelectedCandidatePair()){const{local:l,remote:h}=s.getSelectedCandidatePair();U.info("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] selectedcandidatepairchange: local ").concat(JSON.stringify({candidateType:l.type,protocol:l.protocol}),", remote ").concat(JSON.stringify({candidateType:h.type,protocol:h.protocol,address:h.address,port:h.port})," )"))}}))}}tryUnbindTransportEvents(){this.transportEventReceiver&&this.transportEventReceiver.transport&&(this.transportEventReceiver.transport.onstatechange=null,this.transportEventReceiver.transport.onerror=null,this.transportEventReceiver.transport.iceTransport&&(this.transportEventReceiver.transport.iceTransport.onstatechange=null))}async applySendEncodings(r,o){try{if(!zn().supportSetRtpSenderParameters||r.length!==o.length)return;for(let T=0;T<r.length;T++){const C=r[T],I=o[T];if(I&&I instanceof rr){var s,l;if(this.isVP8Simulcast(I))continue;const L={},V={};switch(I._optimizationMode){case"motion":L.degradationPreference="maintain-framerate";break;case"detail":L.degradationPreference="maintain-resolution";break;default:L.degradationPreference="balanced"}var h,p,v,E;if((s=I._encoderConfig)!==null&&s!==void 0&&s.bitrateMax&&(V.maxBitrate=1e3*((h=I._encoderConfig)===null||h===void 0?void 0:h.bitrateMax)),I._hints.includes(pr.LOW_STREAM)&&((p=I._encoderConfig)!==null&&p!==void 0&&p.frameRate&&(V.maxFramerate=dc(I._encoderConfig.frameRate)),(v=I._encoderConfig)!==null&&v!==void 0&&v.scaleResolutionDownBy&&((E=I._encoderConfig)===null||E===void 0?void 0:E.scaleResolutionDownBy)>1&&(V.scaleResolutionDownBy=I._encoderConfig.scaleResolutionDownBy)),ie("DSCP_TYPE")&&ru()){const X=ie("DSCP_TYPE");["very-low","low","medium","high"].includes(X)&&(V.networkPriority=X)}const Y=C.sender.getParameters(),q=(l=Y.encodings)===null||l===void 0?void 0:l[0];Pn()&&!q&&(L.encodings=[V]),q&&Object.assign(q,V),Object.assign(Y,L),await C.sender.setParameters(Y)}}}catch{U.debug("[".concat(this.store.clientId,"] Apply RTPSendEncodings failed."))}}mungSendOfferSDP(r,o,s){const l=ir.exports.parse(r);return o.forEach((h,p)=>{const v=s[p],E=l.mediaDescriptions.find(T=>T.attributes.mid===v);E&&(Fd(E,h),WL(E,h,this.store.codec))}),ir.exports.print(l)}mungReceiveAnswerSDP(r,o,s){const l=ir.exports.parse(r),h=l.mediaDescriptions.find(p=>p.attributes.mid===o);return h&&s===dt.AUDIO&&h.media.mediaType==="audio"&&sl(h),ir.exports.print(l)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=r=>{var o;(o=this.onFirstAudioReceived)===null||o===void 0||o.call(this,r)},this.statsFilter.onFirstVideoReceived=r=>{var o;(o=this.onFirstVideoReceived)===null||o===void 0||o.call(this,r)},this.statsFilter.onFirstAudioDecoded=r=>{var o;(o=this.onFirstAudioDecoded)===null||o===void 0||o.call(this,r)},this.statsFilter.onFirstVideoDecoded=(r,o,s)=>{var l;(l=this.onFirstVideoDecoded)===null||l===void 0||l.call(this,r,o,s)},this.statsFilter.onSelectedLocalCandidateChanged=(r,o)=>{var s;(s=this.onSelectedLocalCandidateChanged)===null||s===void 0||s.call(this,r,o)},this.statsFilter.onSelectedRemoteCandidateChanged=(r,o)=>{var s;(s=this.onSelectedRemoteCandidateChanged)===null||s===void 0||s.call(this,r,o)},this.statsFilter.onFirstVideoDecodedTimeout=r=>{var o;(o=this.onFirstVideoDecodedTimeout)===null||o===void 0||o.call(this,r)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0,this.statsFilter.onFirstVideoDecodedTimeout=void 0}async applySimulcastForFirefox(r,o){if(r.length===o.length)for(let v=0;v<r.length;v++){var s,l,h,p;const E=r[v],T=o[v];if(T instanceof rr&&!T._hints.includes(pr.LOW_STREAM)&&(s=T._encoderConfig)!==null&&s!==void 0&&s.bitrateMax&&((l=T._encoderConfig)===null||l===void 0?void 0:l.bitrateMax)>200&&(h=T._scalabiltyMode)!==null&&h!==void 0&&h.numSpatialLayers&&((p=T._scalabiltyMode)===null||p===void 0?void 0:p.numSpatialLayers)>1&&this.store.codec==="vp8"){const C={},I={high:1e3*(T._encoderConfig.bitrateMax-50),medium:5e4};C.encodings=[{rid:"m",active:!0,maxBitrate:I.medium,scaleResolutionDownBy:4},{rid:"h",active:!0,maxBitrate:I.high}];const L=E.sender.getParameters();await E.sender.setParameters(Object.assign(L,C))}}}async applySimulcastEncodings(r,o){if(!Pn()&&r.length===o.length)for(let s=0;s<r.length;s++){const l=o[s];if(l instanceof rr&&this.isVP8Simulcast(l)){const h=r[s],p={},v={high:1e3*(l._encoderConfig.bitrateMax-50),medium:5e4};p.encodings=[{active:!0,adaptivePtime:!1,networkPriority:"high",priority:"high",maxBitrate:v.high},{active:!0,adaptivePtime:!1,networkPriority:"low",priority:"low",maxBitrate:v.medium,scaleResolutionDownBy:4}];const E=h.sender.getParameters();await h.sender.setParameters(Object.assign(E,p))}}}isVP8Simulcast(r){var o,s,l,h;return!!(r instanceof rr&&ie("SIMULCAST")&&this.store.codec==="vp8"&&!r._hints.includes(pr.LOW_STREAM)&&(o=r._encoderConfig)!==null&&o!==void 0&&o.bitrateMax&&((s=r._encoderConfig)===null||s===void 0?void 0:s.bitrateMax)>200&&(l=r._scalabiltyMode)!==null&&l!==void 0&&l.numSpatialLayers&&((h=r._scalabiltyMode)===null||h===void 0?void 0:h.numSpatialLayers)>1)}logSDPExchange(r,o,s,l){if(ie("SDP_LOGGING"))return U.upload("[".concat(this.store.clientId,"] exchanging ").concat(s," ").concat(o," SDP during P2PConnection.").concat(l,`
`),r),o==="offer"?h=>{this.logSDPExchange(h,"answer",s==="local"?"remote":"local",l)}:void 0}async getRemoteSSRC(r){if(!this.remoteSDP)return;const o=this.remoteSDP.getSSRC(r);return o==null?void 0:o[0].ssrcId}setConfiguration(r){if(zn().supportPCSetConfiguration){const o=gf.resolvePCConfiguration(r);this.peerConnection.setConfiguration(o)}}}).prototype,"connect",[ca],Object.getOwnPropertyDescriptor(nn.prototype,"connect"),nn.prototype),_e(nn.prototype,"receive",[ca],Object.getOwnPropertyDescriptor(nn.prototype,"receive"),nn.prototype),_e(nn.prototype,"batchReceive",[ca],Object.getOwnPropertyDescriptor(nn.prototype,"batchReceive"),nn.prototype),_e(nn.prototype,"stopReceiving",[ca],Object.getOwnPropertyDescriptor(nn.prototype,"stopReceiving"),nn.prototype),_e(nn.prototype,"muteRemote",[ca],Object.getOwnPropertyDescriptor(nn.prototype,"muteRemote"),nn.prototype),_e(nn.prototype,"unmuteRemote",[ca],Object.getOwnPropertyDescriptor(nn.prototype,"unmuteRemote"),nn.prototype),_e(nn.prototype,"muteLocal",[ca],Object.getOwnPropertyDescriptor(nn.prototype,"muteLocal"),nn.prototype),_e(nn.prototype,"unmuteLocal",[ca],Object.getOwnPropertyDescriptor(nn.prototype,"unmuteLocal"),nn.prototype),_e(nn.prototype,"close",[ca],Object.getOwnPropertyDescriptor(nn.prototype,"close"),nn.prototype),_e(nn.prototype,"updateEncoderConfig",[ca],Object.getOwnPropertyDescriptor(nn.prototype,"updateEncoderConfig"),nn.prototype),_e(nn.prototype,"updateSendParameters",[ca],Object.getOwnPropertyDescriptor(nn.prototype,"updateSendParameters"),nn.prototype),_e(nn.prototype,"replaceTrack",[ca],Object.getOwnPropertyDescriptor(nn.prototype,"replaceTrack"),nn.prototype),_e(nn.prototype,"getRemoteSSRC",[ca],Object.getOwnPropertyDescriptor(nn.prototype,"getRemoteSSRC"),nn.prototype),nn);function ca(n,r,o){const s=n[r];if(typeof s!="function")throw new Error("Cannot use mutex on object property.");return o.value=async function(){const l=this.mutex,h=await l.lock("From P2PConnection.".concat(r));try{for(var p=arguments.length,v=new Array(p),E=0;E<p;E++)v[E]=arguments[E];return await s.apply(this,v)}finally{h()}},o}function u2(n,r){let o=document.createElement("video"),s=document.createElement("canvas");o.setAttribute("style","display:none"),s.setAttribute("style","display:none"),o.setAttribute("muted",""),o.muted=!0,o.setAttribute("autoplay",""),o.autoplay=!0,o.setAttribute("playsinline",""),s.width=dc(r.width),s.height=dc(r.height);const l=dc(r.framerate||15);document.body.append(o),document.body.append(s);let h=n._mediaStreamTrack;o.srcObject=new MediaStream([h]),o.play();const p=s.getContext("2d");if(!p)throw new Q(W.UNEXPECTED_ERROR,"can not get canvas context");const v=zn(),E=s.captureStream(v.supportRequestFrame?0:l).getVideoTracks()[0],T=DP(()=>(()=>{if(o.paused&&o.play(),o.videoHeight>2&&o.videoWidth>2){const I=o.videoWidth,L=o.videoHeight/I,V=s.width*L;Math.abs(V-s.height)>=2&&(U.debug("adjust low stream resolution","".concat(s.width,"x").concat(s.height," -> ").concat(s.width,"x").concat(V)),s.height=V)}p.drawImage(o,0,0,s.width,s.height),E.requestFrame&&E.requestFrame(),h!==n._mediaStreamTrack&&(h=n._mediaStreamTrack,o.srcObject=new MediaStream([h]))})(),l),C=E.stop;return E.stop=()=>{C.call(E),T(),o&&(o.remove(),o=null),s&&(s.width=0,s.remove(),s=null),U.debug("clean low stream renderer")},E}var d2,h2,p2,f2,la,m2,g2,v2,E2,_2,y2,mi;function S2(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function ug(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?S2(Object(o),!0).forEach(function(s){N(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):S2(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}class C2 extends AP{getUserId(){return this._userId}constructor(r,o,s,l){super(r,"track-".concat(r.kind,"-").concat(o,"-").concat(l.clientId,"_").concat(pn(5,""))),N(this,"_userId",void 0),N(this,"_uintId",void 0),N(this,"_isDestroyed",!1),N(this,"store",void 0),N(this,"processor",void 0),N(this,"processorContext",void 0),this._userId=o,this._uintId=s,this.store=l}_updateOriginMediaStreamTrack(r){this._originMediaStreamTrack=r,this._mediaStreamTrack=r,this._updatePlayerSource(),this.processor&&this.processor.updateInput({track:this._originMediaStreamTrack,context:this.processorContext})}_destroy(){this._isDestroyed=!0,U.info("[".concat(this.getTrackId(),"] is destroyed")),this.stop(),super.close()}getProcessorStats(){return this.processorContext.gatherStats()}getProcessorUsage(){return this.processorContext.gatherUsage()}}let dg=(d2=ze({argsMap:(n,r,o)=>[n.getTrackId(),typeof r=="string"?r:r instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement",o]}),h2=ze({argsMap:n=>[n.getTrackId()]}),p2=ze({argsMap:(n,r)=>[n.getTrackId(),r.name]}),f2=ze({argsMap:n=>[n.getTrackId()]}),_e((la=class extends C2{get isPlaying(){return!(!this._player||this._player.videoElementStatus!==Jr.PLAYING)}get __className__(){return"RemoteVideoTrack"}constructor(n,r,o,s){super(n,r,o,s),N(this,"_videoVisibleTimer",null),N(this,"_previousVideoVisibleStatus",void 0),N(this,"_clearPreviousVideoVisibleStatus",()=>this._previousVideoVisibleStatus=void 0),N(this,"trackMediaType","video"),N(this,"_videoWidth",void 0),N(this,"_videoHeight",void 0),N(this,"_player",void 0),N(this,"processorDestination",void 0),N(this,"processorContext",void 0),this.updateMediaStreamTrackResolution(),this.processorContext=new WP(this.getTrackId(),"remote"),this.processorDestination=new HP(this.processorContext),this.bindProcessorDestinationEvents()}getStats(){return Lp(()=>{U.warning("[deprecated] RemoteVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteVideoStats instead")},"remoteVideoTrackGetStatsWarning"),Aa(this,Ze.GET_STATS)||ug({},sP)}play(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof n=="string"){const s=document.getElementById(n);s?n=s:(U.warning("[".concat(this.getTrackId(),'] can not find "#').concat(n,'" element, use document.body')),n=document.body)}U.debug("[".concat(this.getTrackId(),"] start video playback in ").concat(n instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement"),JSON.stringify(r));const o=ug(ug({fit:"cover"},r),{},{trackId:this.getTrackId(),element:n});this._player?this._player.updateConfig(o):(n instanceof HTMLVideoElement?this._player=new fC(o):this._player=new Tk(o),this._player.updateVideoTrack(this._mediaStreamTrack),this._player.onFirstVideoFrameDecoded=()=>{this.store.subscribe(this.getUserId(),"video",void 0,void 0,Date.now()),this.safeEmit(wd.FIRST_FRAME_DECODED)}),this._player.play(this.store.sessionId||void 0),this._videoVisibleTimer&&window.clearInterval(this._videoVisibleTimer),this._clearPreviousVideoVisibleStatus(),this._videoVisibleTimer=window.setInterval(()=>{try{const s=this.getVideoElementVisibleStatus();this.safeEmit(wd.VIDEO_ELEMENT_VISIBLE_STATUS,s)}catch{}},ie("CHECK_VIDEO_VISIBLE_INTERVAL"))}stop(){this._player&&(this._videoVisibleTimer&&(window.clearInterval(this._videoVisibleTimer),this._videoVisibleTimer=null),this._clearPreviousVideoVisibleStatus(),this._player.destroy(),this._player=void 0,U.debug("[".concat(this.getTrackId(),"] stop video playback")))}getCurrentFrameData(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}updateMediaStreamTrackResolution(){VD(this._originMediaStreamTrack).then(n=>{let[r,o]=n;this._videoHeight=o,this._videoWidth=r}).catch(q0)}_updatePlayerSource(){U.debug("[".concat(this.getTrackId(),"] update player source track")),this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}getVideoElementVisibleStatus(){try{var n,r;const o=this==null||(n=this._player)===null||n===void 0?void 0:n.getContainerElement(),s={track:this,element:this==null||(r=this._player)===null||r===void 0?void 0:r.getVideoElement(),slot:o==null?void 0:o.parentElement},{element:l,slot:h}=s;if(this.isPlaying&&l instanceof HTMLVideoElement&&h instanceof HTMLElement){const p=iL.checkOneElementVisible(l),v=Object.assign({},p);if(v.visible!==this._previousVideoVisibleStatus){this._previousVideoVisibleStatus=v.visible;const E=Me.reportApiInvoke(null,{tag:bn.TRACER,name:Zn.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE,options:[this.getTrackId()]});v.visible?E.onSuccess("Video is visible"):E.onSuccess("Invisible because of ".concat(v.reason))}return v}return}catch(o){throw new Q(W.GET_VIDEO_ELEMENT_VISIBLE_ERROR,o.message)}}pipe(n){if(this.processor===n)return n;if(n._source)throw new Q(W.INVALID_OPERATION,"Processor ".concat(n.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=n,this.processor._source=this,n.updateInput({track:this._originMediaStreamTrack,context:this.processorContext}),n}unpipe(){if(!this.processor)return;const n=this.processor;this.processor._source=void 0,this.processor=void 0,n.reset()}bindProcessorDestinationEvents(){this.processorDestination.on(ei.ON_TRACK,async n=>{n?n!==this._mediaStreamTrack&&(this._mediaStreamTrack=n,this._updatePlayerSource()):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource())})}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(ei.ON_TRACK)}_destroy(){super._destroy(),this.unbindProcessorDestinationEvents()}}).prototype,"play",[d2],Object.getOwnPropertyDescriptor(la.prototype,"play"),la.prototype),_e(la.prototype,"stop",[h2],Object.getOwnPropertyDescriptor(la.prototype,"stop"),la.prototype),_e(la.prototype,"pipe",[p2],Object.getOwnPropertyDescriptor(la.prototype,"pipe"),la.prototype),_e(la.prototype,"unpipe",[f2],Object.getOwnPropertyDescriptor(la.prototype,"unpipe"),la.prototype),la),hg=(m2=ze({argsMap:(n,r)=>[n.getTrackId(),r],throttleTime:300}),g2=ze({argsMap:(n,r)=>[n.getTrackId(),r]}),v2=ze({argsMap:n=>[n.getTrackId()]}),E2=ze({argsMap:n=>[n.getTrackId()]}),_2=ze({argsMap:(n,r)=>[n.getTrackId(),r.name]}),y2=ze({argsMap:n=>[n.getTrackId()]}),_e((mi=class extends C2{get isPlaying(){return this._useAudioElement?Eo.isPlaying(this.getTrackId()):this._source.isPlayed}get __className__(){return"RemoteAudioTrack"}constructor(n,r,o,s){super(n,r,o,s),N(this,"trackMediaType","audio"),N(this,"_source",void 0),N(this,"_useAudioElement",!0),N(this,"_volume",100),N(this,"processorContext",void 0),N(this,"processorDestination",void 0),N(this,"_played",!1),N(this,"_bypassWebAudio",!1),ie("DISABLE_WEBAUDIO")?(this._source=new eC,this._bypassWebAudio=!0,this._useAudioElement=!0):(this._source=new JS(n,!0),ie("REMOTE_AUDIO_TRACK_USES_WEB_AUDIO")&&(this._useAudioElement=!1)),this._source.once(Zi.RECEIVE_TRACK_BUFFER,()=>{this.safeEmit(wd.FIRST_FRAME_DECODED)}),this.processorContext=new zP(this._source.context,this.getTrackId(),"remote"),this.processorDestination=new GP(this.processorContext),this.bindProcessorDestinationEvents(),this._source.on(Zi.UPDATE_SOURCE,()=>{this.processor&&this.processor.updateInput({node:this._source.processSourceNode,context:this.processorContext})})}setAudioFrameCallback(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:4096;if(!n)return this._source.removeAllListeners(Zi.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(r),this._source.removeAllListeners(Zi.ON_AUDIO_BUFFER),this._source.on(Zi.ON_AUDIO_BUFFER,o=>n(o))}setVolume(n){this._volume=n,this._useAudioElement?Eo.setVolume(this.getTrackId(),n):this._source.setVolume(n/100)}async setPlaybackDevice(n){if(!this._useAudioElement)throw new Q(W.NOT_SUPPORTED,"your browser does not support setting the audio output device");await Eo.setSinkID(this.getTrackId(),n)}getVolumeLevel(){return this._source.getAccurateVolumeLevel()}getStats(){return Lp(()=>{U.warning("[deprecated] RemoteAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteAudioStats instead")},"remoteAudioTrackGetStatsWarning"),Aa(this,Ze.GET_STATS)||ug({},aP)}play(){U.debug("[".concat(this.getTrackId(),"] start audio playback")),this._played=!0,this._useAudioElement?(U.debug("[".concat(this.getTrackId(),"] use audio element to play")),Eo.play(this._mediaStreamTrack,this.getTrackId(),this._volume,this.store.sessionId||void 0)):this._source.play()}stop(){U.debug("[".concat(this.getTrackId(),"] stop audio playback")),this._played=!1,this._useAudioElement?Eo.stop(this.getTrackId()):this._source.stop()}_destroy(){super._destroy(),this._played=!1,this.unbindProcessorDestinationEvents(),this._source.destroy()}_isFreeze(){return this._source.isFreeze}_updatePlayerSource(){let n=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];U.debug("[".concat(this.getTrackId(),"] update player source track")),n&&this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&Eo.updateTrack(this.getTrackId(),this._mediaStreamTrack)}pipe(n){if(this._bypassWebAudio)throw new Q(W.NOT_SUPPORTED,"can not pipe extension when WebAudio disabled");if(this.processor===n)return n;if(n._source)throw new Q(W.INVALID_OPERATION,"Processor ".concat(n.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=n,this.processor._source=this,n.updateInput({track:this._originMediaStreamTrack,node:this._source.processSourceNode,context:this.processorContext}),n}unpipe(){var n;if(this._bypassWebAudio)throw new Q(W.NOT_SUPPORTED,"can not unpipe extension when WebAudio disabled");if(!this.processor)return;const r=this.processor;(n=this._source.processSourceNode)===null||n===void 0||n.disconnect(),this.processor._source=!1,this.processor=void 0,r.reset()}bindProcessorDestinationEvents(){this.processorDestination.on(ei.ON_TRACK,async n=>{n?n!==this._mediaStreamTrack&&(this._mediaStreamTrack=n,this._updatePlayerSource(!1),this._source.processedNode=this._source.createMediaStreamSourceNode(n)):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource())}),this.processorDestination.on(ei.ON_NODE,n=>{this._source.processedNode=n;const r=!n;this._useAudioElement!==r&&(this._played?(this.stop(),this._useAudioElement=r,this.play()):this._useAudioElement=r)})}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(ei.ON_TRACK),this.processorDestination.removeAllListeners(ei.ON_NODE)}}).prototype,"setVolume",[m2],Object.getOwnPropertyDescriptor(mi.prototype,"setVolume"),mi.prototype),_e(mi.prototype,"setPlaybackDevice",[g2],Object.getOwnPropertyDescriptor(mi.prototype,"setPlaybackDevice"),mi.prototype),_e(mi.prototype,"play",[v2],Object.getOwnPropertyDescriptor(mi.prototype,"play"),mi.prototype),_e(mi.prototype,"stop",[E2],Object.getOwnPropertyDescriptor(mi.prototype,"stop"),mi.prototype),_e(mi.prototype,"pipe",[_2],Object.getOwnPropertyDescriptor(mi.prototype,"pipe"),mi.prototype),_e(mi.prototype,"unpipe",[y2],Object.getOwnPropertyDescriptor(mi.prototype,"unpipe"),mi.prototype),mi);function b2(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function T2(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?b2(Object(o),!0).forEach(function(s){N(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):b2(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}class VJ extends Rn{constructor(){super(),N(this,"uplinkStatsUploadInterval",void 0),N(this,"uplinkRelatedStatsUploadInterval",void 0),N(this,"uplinkDenoiserStatsUploadInterval",void 0),N(this,"transportStatsUploadInterval",void 0),N(this,"uplinkExtensionStatsUploadInterval",void 0),N(this,"downlinkExtensionStatsUploadInterval",void 0),N(this,"extensionUsageStatsUploadInterval",void 0),N(this,"downlinkStatsUploadInterval",void 0),N(this,"downlinkRelatedStatsUploadInterval",void 0),N(this,"lastStats",void 0),N(this,"uploadUnplinkStarted",!1),N(this,"uploadDownlinkStarted",!1),N(this,"uploadTransportStarted",!1),N(this,"uploadExtensionUsageStarted",!1),N(this,"requestStats",void 0),N(this,"requestLocalMedia",void 0),N(this,"requestRemoteMedia",void 0),N(this,"requestAllTracks",void 0),N(this,"requestVideoIsReady",void 0),N(this,"requestUpload",void 0)}startUploadTransportStats(){this.uploadTransportStarted||(this.uploadTransportStarted=!0,this.transportStatsUploadInterval&&window.clearInterval(this.transportStatsUploadInterval),this.transportStatsUploadInterval=window.setInterval(()=>{var r;const o=(r=this.requestStats)===null||r===void 0?void 0:r.call(this);o&&this.uploadTransportStats(o)},1e3))}startUploadExtensionUsageStats(){if(this.uploadExtensionUsageStarted)return;this.uploadExtensionUsageStarted=!0,this.extensionUsageStatsUploadInterval&&window.clearInterval(this.extensionUsageStatsUploadInterval);const r=new Map;this.extensionUsageStatsUploadInterval=window.setInterval(async()=>{var o,s,l;const h=Date.now(),p={connectionInterval:ie("EXTENSION_USAGE_UPLOAD_INTERVAL")/1e3,details:[],lts:h};let v=[];const E=((o=this.requestAllTracks)===null||o===void 0?void 0:o.call(this))||[];for(const L of E)!L.muted&&L.enabled&&(v=v.concat(await L.getProcessorUsage()));const T=((s=this.requestRemoteMedia)===null||s===void 0?void 0:s.call(this))||[];for(const[L,V]of T)V.has(dt.VIDEO)&&L.videoTrack&&(v=v.concat(await L.videoTrack.getProcessorUsage())),V.has(dt.AUDIO)&&L.audioTrack&&(v=v.concat(await L.audioTrack.getProcessorUsage()));if(v.length===0)return;p.details=function(L,V){const Y={};for(const{id:he,value:Se,level:De,direction:be}of L){var q;const Te=(q=V.get(he))!==null&&q!==void 0?q:0,ye=Se===2?Te+ie("EXTENSION_USAGE_UPLOAD_INTERVAL")/1e3:Te;var X,le;V.set(he,ye),Y[he]?(Se===2&&(Y[he].value=Se),De>Y[he].level&&(Y[he].level=De),be==="remote"&&(Y[he].remoteUidCount+=1),Y[he].totalTs=(X=V.get(he))!==null&&X!==void 0?X:0):Y[he]={value:Se,level:De,remoteUidCount:be==="local"?0:1,totalTs:(le=V.get(he))!==null&&le!==void 0?le:0}}return Object.keys(Y).map(he=>{const{level:Se,value:De,totalTs:be}=Y[he];return{id:he,level:Se,value:De,totalTs:be}})}(v,r);const C=Date.now(),I=C>h?C:h+1;(l=this.requestUpload)===null||l===void 0||l.call(this,go.EXTENSION_USAGE_STATS,{usageStats:p,sendTs:I})},ie("EXTENSION_USAGE_UPLOAD_INTERVAL"))}startUploadUplinkStats(){this.uploadUnplinkStarted||(this.uploadUnplinkStarted=!0,this.uplinkStatsUploadInterval&&window.clearInterval(this.uplinkStatsUploadInterval),this.uplinkStatsUploadInterval=window.setInterval(()=>{var r;const o=(r=this.requestStats)===null||r===void 0?void 0:r.call(this);o&&(this.uploadUplinkStats(o),this.lastStats=o)},3e3),this.uplinkRelatedStatsUploadInterval&&window.clearInterval(this.uplinkRelatedStatsUploadInterval),this.uplinkRelatedStatsUploadInterval=window.setInterval(()=>{var r;const o=(r=this.requestStats)===null||r===void 0?void 0:r.call(this);o&&this.uploadRelatedUplinkStats(o,this.lastStats),this.lastStats=o},1e3),this.uplinkDenoiserStatsUploadInterval&&window.clearInterval(this.uplinkDenoiserStatsUploadInterval),this.uplinkDenoiserStatsUploadInterval=window.setInterval(()=>{var r;const o=(r=this.requestAllTracks)===null||r===void 0?void 0:r.call(this);o&&this.uploadDenoiserStats(o)},2e3),this.uplinkExtensionStatsUploadInterval&&window.clearInterval(this.uplinkExtensionStatsUploadInterval),this.uplinkExtensionStatsUploadInterval=window.setInterval(()=>{var r;const o=(r=this.requestAllTracks)===null||r===void 0?void 0:r.call(this);o&&this.uploadExtensionStats(o)},2e3))}uploadTransportStats(r){os(()=>{var o;(o=this.requestUpload)===null||o===void 0||o.call(this,go.TRANSPORT_STATS,function(s){const l={connectionType:100,googRtt:s.rtt};if(s.selectedCandidatePair.localCandidate.candidateType==="relay"){const h=s.selectedCandidatePair.localCandidate.relayProtocol;h==="udp"&&(l.connectionType=101),h==="tcp"&&(l.connectionType=103),h==="tls"&&(l.connectionType=104)}return l}(r))})}uploadUplinkStats(r){var o;(((o=this.requestLocalMedia)===null||o===void 0?void 0:o.call(this))||[]).forEach(s=>{let[l,{track:h,ssrcs:p}]=s;switch(l){case Le.LocalVideoLowTrack:case Le.LocalVideoTrack:{const v=function(C,I,L){var V;const Y=I.videoSend.find(X=>X.ssrc===C);if(!Y)return null;const q={id:pn(10,""),timestamp:new Date(I.timestamp).toISOString(),mediaType:"video",type:"ssrc",ssrc:Y.ssrc.toString()};switch(q.A_vstd=L._originMediaStreamTrack&&!L._originMediaStreamTrack.enabled||L._mediaStreamTrack&&!L._mediaStreamTrack.enabled?"1":"0",Y.sentFrame&&(q.A_fhs=Y.sentFrame.height.toString(),q.A_frs=Y.sentFrame.frameRate.toString(),q.A_fws=Y.sentFrame.width.toString()),Y.adaptionChangeReason){case"none":q.A_ac="0";break;case"cpu":q.A_ac="1";break;case"bandwidth":q.A_ac="2";break;case"other":q.A_ac="3"}return q.A_lvps=PS[L._player?L._player.videoElementStatus:"uninit"].toString(),q.A_nr=(V=Y.nacksCount)===null||V===void 0?void 0:V.toString(),Y.avgEncodeMs&&(q.A_aem=Y.avgEncodeMs.toFixed(0).toString()),q}(p[0].ssrcId,r,h),E=l===Le.LocalVideoTrack?function(C,I,L){var V,Y,q,X,le,he,Se,De;const be=I.videoSend.find(We=>We.ssrc===C);if(!be)return null;const Te={id:pn(10,""),timestamp:new Date(I.timestamp).toISOString(),mediaType:"video",type:"ssrc",ssrc:be.ssrc.toString()},ye=(V=(Y=(q=be.inputFrame)===null||q===void 0?void 0:q.height)!==null&&Y!==void 0?Y:L==null?void 0:L._videoHeight)!==null&&V!==void 0?V:0,Oe=(X=(le=(he=be.inputFrame)===null||he===void 0?void 0:he.width)!==null&&le!==void 0?le:L==null?void 0:L._videoWidth)!==null&&X!==void 0?X:0,Bt=(Se=(De=be.inputFrame)===null||De===void 0?void 0:De.frameRate)!==null&&Se!==void 0?Se:0;return ye&&(Te.A_fhi=ye+""),Oe&&(Te.A_fwi=Oe+""),Bt&&(Te.A_fri=Bt+""),Te}(p[0].ssrcId,r,h):null;v&&os(()=>{var C;return(C=this.requestUpload)===null||C===void 0?void 0:C.call(this,go.PUBLISH_STATS,{stream_type:l===Le.LocalVideoLowTrack?"low":"high",stats:T2(T2({},v),E)})});const T=function(C){const I={id:"bweforvideo",timestamp:new Date(C.timestamp).toISOString(),type:"VideoBwe"};return C.bitrate.retransmit&&(I.A_rb=C.bitrate.retransmit.toString()),C.bitrate.targetEncoded&&(I.A_teb=C.bitrate.targetEncoded.toString()),I.A_aeb=C.bitrate.actualEncoded.toString(),I.A_tb=C.bitrate.transmit.toString(),C.sendBandwidth!==void 0&&(I.A_asb=C.sendBandwidth.toString()),I}(r);T&&setTimeout(()=>{var C;return(C=this.requestUpload)===null||C===void 0?void 0:C.call(this,go.PUBLISH_STATS,{stream_type:l===Le.LocalVideoLowTrack?"low":"high",stats:T})},1e3);break}case Le.LocalAudioTrack:{const v=function(E,T,C){const I=T.audioSend.find(V=>V.ssrc===E);if(!I)return null;const L={id:pn(10,""),timestamp:new Date(T.timestamp).toISOString(),mediaType:"audio",type:"ssrc",ssrc:I.ssrc.toString()};return L.A_astd=C._originMediaStreamTrack&&!C._originMediaStreamTrack.enabled||C._mediaStreamTrack&&!C._mediaStreamTrack.enabled?"1":"0",I.inputLevel?L.A_ail=Math.round(100*I.inputLevel).toString():L.A_ail=Math.round(100*C._source.getAccurateVolumeLevel()).toString(),L.A_apil=Math.round(100*C._source.getAccurateVolumeLevel()).toString(),I.aecReturnLoss&&(L.A_ecrl=Math.round(I.aecReturnLoss).toString()),I.aecReturnLossEnhancement&&(L.A_ecrle=Math.round(I.aecReturnLossEnhancement).toString()),L}(p[0].ssrcId,r,h);v&&os(()=>{var E;return(E=this.requestUpload)===null||E===void 0?void 0:E.call(this,go.PUBLISH_STATS,{stream_type:"high",stats:v})});break}}})}uploadRelatedUplinkStats(r,o){var s;(((s=this.requestLocalMedia)===null||s===void 0?void 0:s.call(this))||[]).filter(l=>{let[h]=l;return h===Le.LocalVideoLowTrack||h===Le.LocalVideoTrack}).forEach(l=>{let[h,{ssrcs:p}]=l;const v=function(E,T){const C=T.videoSend.find(I=>I.ssrc===E);return C?{mediaType:"video",isVideoMute:!1,frameRateInput:C.inputFrame&&C.inputFrame.frameRate.toString(),frameRateSent:C.sentFrame&&C.sentFrame.frameRate.toString(),googRtt:C.rttMs.toString(),qpSumPerFrame:Math.floor(C.qpSumPerFrame).toString()}:null}(p[0].ssrcId,r);v&&os(()=>{var E;(E=this.requestUpload)===null||E===void 0||E.call(this,go.PUBLISH_RELATED_STATS,{stream_type:h===Le.LocalVideoLowTrack?"low":"high",stats:v})})})}uploadDenoiserStats(r){for(let h=0;h<r.length;h++){const p=r[h];if(p instanceof G0){var o,s,l;const v=(o=(s=p._external).getDenoiserStats)===null||o===void 0?void 0:o.call(s);return void(v&&((l=this.requestUpload)===null||l===void 0||l.call(this,go.DENOISER_STATS,v)))}}}uploadExtensionStats(r){for(let o=0;o<r.length;o++)r[o].getProcessorStats().forEach(s=>{var l;(l=this.requestUpload)===null||l===void 0||l.call(this,s.type,s.stats)})}stopUploadUplinkStats(){this.uploadUnplinkStarted&&(this.uploadUnplinkStarted=!1,this.uplinkStatsUploadInterval&&window.clearInterval(this.uplinkStatsUploadInterval),this.uplinkRelatedStatsUploadInterval&&window.clearInterval(this.uplinkRelatedStatsUploadInterval),this.uplinkDenoiserStatsUploadInterval&&window.clearInterval(this.uplinkDenoiserStatsUploadInterval),this.uplinkStatsUploadInterval=void 0,this.uplinkRelatedStatsUploadInterval=void 0,this.uplinkDenoiserStatsUploadInterval=void 0)}startUploadDownlinkStats(){if(this.uploadDownlinkStarted)return;let r;this.uploadDownlinkStarted=!0,this.downlinkStatsUploadInterval&&window.clearInterval(this.downlinkStatsUploadInterval);let o=!1;this.downlinkStatsUploadInterval=window.setInterval(()=>{var s;const l=(s=this.requestStats)===null||s===void 0?void 0:s.call(this);l&&(this.uploadDownlinkStats(l,o,r),r=l),o=!o},3e3),this.downlinkRelatedStatsUploadInterval&&window.clearInterval(this.downlinkRelatedStatsUploadInterval),this.downlinkRelatedStatsUploadInterval=window.setInterval(()=>{var s;const l=(s=this.requestStats)===null||s===void 0?void 0:s.call(this);l&&(this.uploadRelatedDownlinkStats(l,this.lastStats),this.lastStats=l)},1e3),this.downlinkExtensionStatsUploadInterval&&window.clearInterval(this.downlinkExtensionStatsUploadInterval),this.downlinkExtensionStatsUploadInterval=window.setInterval(()=>{var s;const l=(s=this.requestRemoteMedia)===null||s===void 0?void 0:s.call(this);l&&this.uploadDownlinkExtensionStats(l)},2e3)}uploadDownlinkStats(r,o,s){var l;(((l=this.requestRemoteMedia)===null||l===void 0?void 0:l.call(this))||[]).forEach(h=>{let[p,v]=h;if(v.has(dt.VIDEO)&&p.videoTrack){const E=p.videoTrack?function(T,C,I,L,V){const Y=C.videoRecv.find(he=>he.ssrc===T);if(!Y)return null;const q={id:pn(10,""),timestamp:new Date(C.timestamp).toISOString(),mediaType:"video",type:"ssrc",ssrc:Y.ssrc.toString()};var X,le;if(q.bytesReceived=Y.bytes.toString(),q.packetsLost=Y.packetsLost.toString(),q.packetsReceived=Y.packets.toString(),Y.framesRateFirefox&&(q.A_frr=Y.framesRateFirefox.toString()),Y.receivedFrame?(q.A_frr=Y.receivedFrame.frameRate.toString(),q.A_fhr=Y.receivedFrame.height.toString(),q.A_fwr=Y.receivedFrame.width.toString()):(q.A_fhr=(X=L._videoHeight)===null||X===void 0?void 0:X.toString(),q.A_fwr=(le=L._videoWidth)===null||le===void 0?void 0:le.toString()),q.A_frd=Y.decodeFrameRate.toString(),Y.outputFrame&&(q.A_fro=Y.outputFrame.frameRate.toString()),Y.jitterBufferMs!==void 0&&(q.A_jbm=Math.floor(Y.jitterBufferMs).toString()),Y.currentDelayMs!==void 0&&(q.A_cdm=Math.floor(Y.currentDelayMs).toString()),q.A_fs=Y.firsCount.toString(),q.A_ns=Y.nacksCount.toString(),q.A_ps=Y.plisCount.toString(),L&&(q.A_vrtd=L._originMediaStreamTrack.enabled&&L._mediaStreamTrack.enabled?"0":"1"),L._player&&L._player.freezeTimeCounterList.length>0&&(q.A_vrft=Math.round(L._player.freezeTimeCounterList.splice(0,1)[0]).toString()),V&&L._player&&uc.visibility==="visible"){const he=Math.min(6e3,L._player.renderFreezeAccTime);q.A_vrrft=Math.round(he).toString(),L._player.renderFreezeAccTime=Math.max(0,L._player.renderFreezeAccTime-he)}if(q.A_rvps=PS[L._player?L._player.videoElementStatus:"uninit"].toString(),I){const he=I.videoRecv.find(Se=>Se.ssrc===T);if(he&&Y.totalInterFrameDelay!==void 0&&Y.totalSquaredInterFrameDelay!==void 0&&he.totalInterFrameDelay!==void 0&&he.totalSquaredInterFrameDelay!==void 0){const Se=Y.totalInterFrameDelay-he.totalInterFrameDelay,De=Y.totalSquaredInterFrameDelay-he.totalSquaredInterFrameDelay,be=Y.framesDecodeCount-he.framesDecodeCount,Te=Se/be*1e3,ye=Math.round(1e3*Math.sqrt((De-Math.pow(Se,2)/be)/be));!isNaN(ye)&&Te+ye>Math.max(3*Te,Te+150)&&(q.A_ifdsd=ye.toString())}}return q}(p._videoSSRC,r,s,p.videoTrack,o):void 0;E&&os(()=>{var T;return(T=this.requestUpload)===null||T===void 0?void 0:T.call(this,go.SUBSCRIBE_STATS,{stream_id:p.uid,stats:E})})}if(v.has(dt.AUDIO)&&p.audioTrack){const E=p.audioTrack?function(T,C,I,L){const V=C.audioRecv.find(q=>q.ssrc===T);if(!V)return null;const Y={id:pn(10,""),timestamp:new Date(C.timestamp).toISOString(),mediaType:"audio",type:"ssrc",ssrc:V.ssrc.toString()};if(Y.bytesReceived=V.bytes.toString(),Y.packetsLost=V.packetsLost.toString(),Y.packetsReceived=V.packets.toString(),V.outputLevel?Y.A_aol=Math.round(100*V.outputLevel).toString():Y.A_aol=Math.round(100*L._source.getAccurateVolumeLevel()).toString(),Y.A_apol=Math.round(100*L._source.getAccurateVolumeLevel()).toString(),L&&(Y.A_artd=L._originMediaStreamTrack.enabled&&L._mediaStreamTrack.enabled?"0":"1"),Y.A_jr=V.jitterMs.toString(),Y.A_jbm=Math.floor(V.jitterBufferMs).toString(),Y.A_cdm=Math.floor(V.jitterBufferMs).toString(),Y.A_raps=PS[Eo.getPlayerState(L.getTrackId())].toString(),I){const q=I.audioRecv.find(X=>X.ssrc===T);if(q){const X=V.concealedSamples-q.concealedSamples;X>0&&(Y.A_cs=Math.round(X).toString())}}return Y}(p._audioSSRC,r,s,p.audioTrack):void 0;E&&os(()=>{var T;return(T=this.requestUpload)===null||T===void 0?void 0:T.call(this,go.SUBSCRIBE_STATS,{stream_id:p.uid,stats:E})})}})}uploadRelatedDownlinkStats(r,o){var s;(((s=this.requestRemoteMedia)===null||s===void 0?void 0:s.call(this))||[]).forEach(l=>{let[h,p]=l;if(p.has(dt.VIDEO)&&h.videoTrack){var v;const E=(h._videoSSRC&&((v=this.requestVideoIsReady)===null||v===void 0?void 0:v.call(this,h._videoSSRC))||!1)===!0,T=function(C,I,L,V,Y,q){const X=L.videoRecv.find(De=>De.ssrc===C),le=Y?Y.videoRecv.find(De=>De.ssrc===C):void 0;if(!X)return null;const he=Pd.isRemoteVideoFreeze(q,X,le)&&I,Se={mediaType:"video",isVideoMute:!1,peerId:V,frameRateReceived:X.receivedFrame&&X.receivedFrame.frameRate.toString(),frameRateDecoded:X.decodedFrame&&X.decodedFrame.frameRate.toString(),isFreeze:he,bytesReceived:X.bytes.toString(),packetsReceived:X.packets.toString(),packetsLost:X.packetsLost.toString(),qpSumPerFrame:Math.floor(X.qpSumPerFrame).toString()};return X.framesRateFirefox&&(Se.frameRateDecoded=X.framesRateFirefox.toString(),Se.frameRateReceived=X.framesRateFirefox.toString()),Se}(h._videoSSRC,E,r,h.uid,o,h.videoTrack);T&&os(()=>{var C;(C=this.requestUpload)===null||C===void 0||C.call(this,go.SUBSCRIBE_RELATED_STATS,{stream_id:h.uid,stats:T})})}if(p.has(dt.AUDIO)&&h.audioTrack){const E=function(T,C,I,L){const V=C.audioRecv.find(q=>q.ssrc===T);if(!V)return null;const Y=Pd.isRemoteAudioFreeze(L);return{mediaType:"audio",isAudioMute:!1,peerId:I,googJitterReceived:V.jitterMs.toString(),isFreeze:Y,bytesReceived:V.bytes.toString(),packetsReceived:V.packets.toString(),packetsLost:V.packetsLost.toString(),frameReceived:V.receivedFrames.toString(),frameDropped:V.droppedFrames.toString()}}(h._audioSSRC,r,h.uid,h.audioTrack);E&&os(()=>{var T;(T=this.requestUpload)===null||T===void 0||T.call(this,go.SUBSCRIBE_RELATED_STATS,{stream_id:h.uid,stats:E})})}})}stopUploadDownlinkStats(){this.uploadDownlinkStarted&&(this.uploadDownlinkStarted=!1,this.downlinkStatsUploadInterval&&window.clearInterval(this.downlinkStatsUploadInterval),this.downlinkRelatedStatsUploadInterval&&window.clearInterval(this.downlinkRelatedStatsUploadInterval),this.downlinkStatsUploadInterval=void 0,this.downlinkRelatedStatsUploadInterval=void 0)}stopUploadTransportStats(){this.uploadTransportStarted&&(this.uploadTransportStarted=!1,this.transportStatsUploadInterval&&window.clearInterval(this.transportStatsUploadInterval),this.transportStatsUploadInterval=void 0)}stopUploadExtensionUsageStats(){this.uploadExtensionUsageStarted&&(this.uploadExtensionUsageStarted=!1,this.extensionUsageStatsUploadInterval&&window.clearInterval(this.extensionUsageStatsUploadInterval),this.extensionUsageStatsUploadInterval=void 0)}uploadDownlinkExtensionStats(r){r.forEach(o=>{let[s,l]=o;l.has(dt.VIDEO)&&s.videoTrack&&s.videoTrack.getProcessorStats().forEach(h=>{var p;(p=this.requestUpload)===null||p===void 0||p.call(this,h.type,h.stats)}),l.has(dt.AUDIO)&&s.audioTrack&&s.audioTrack.getProcessorStats().forEach(h=>{var p;(p=this.requestUpload)===null||p===void 0||p.call(this,h.type,h.stats)})})}}function R2(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function I2(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?R2(Object(o),!0).forEach(function(s){N(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):R2(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}const w2=`v=0
o=- 0 0 IN IP4 127.0.0.1
s=AgoraGateway
t=0 0
a=group:BUNDLE 0
a=msid-semantic: WMS
a=ice-lite
m=application 9 UDP/DTLS/SCTP webrtc-datachannel
c=IN IP4 127.0.0.1
a=mid:0
`,pg="9",VC=2e4,BC=4e4;class BJ{get localCapabilities(){return nr(this._localCapabilities)}get rtpCapabilities(){return nr(this._rtpCapabilities)}get candidates(){return nr(this._candidates)}get iceParameters(){return nr(this._iceParameters)}get dtlsParameters(){return nr(this._dtlsParameters)}constructor(r){N(this,"sessionDesc",void 0),N(this,"_localCapabilities",void 0),N(this,"_rtpCapabilities",void 0),N(this,"_candidates",void 0),N(this,"_iceParameters",void 0),N(this,"_dtlsParameters",void 0),N(this,"setup",void 0),N(this,"currentMidIndex",void 0),N(this,"cname",void 0),N(this,"firefoxSsrcMidMap",new Map),r=nr(r);const{remoteIceParameters:o,remoteDtlsParameters:s,candidates:l,remoteRTPCapabilities:h,remoteSetup:p,localCapabilities:v,cname:E}=r,T=ir.exports.parse(w2);this._rtpCapabilities=h,this._candidates=l,this._iceParameters=o,this._dtlsParameters=s,this._localCapabilities=v,this.setup=p,this.cname=E;const C=this.rtpCapabilities.send;for(const I of T.mediaDescriptions){if(I.attributes.iceUfrag=o.iceUfrag,I.attributes.icePwd=o.icePwd,I.attributes.fingerprints=s.fingerprints,I.attributes.candidates=l,I.attributes.setup=p,I.media.mediaType==="application"&&(I.attributes.sctpPort="5000"),I.media.mediaType==="video"&&(I.media.fmts=C.videoCodecs.map(L=>L.payloadType.toString(10)),I.attributes.payloads=C.videoCodecs,I.attributes.extmaps=C.videoExtensions,ie("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:L,ssrcGroups:V}=aa([{ssrcId:BC,rtx:ie("USE_SUB_RTX")?40001:void 0}],this.cname);I.attributes.ssrcs=L,I.attributes.ssrcGroups=V}if(I.media.mediaType==="audio"&&(I.media.fmts=C.audioCodecs.map(L=>L.payloadType.toString(10)),I.attributes.payloads=C.audioCodecs,I.attributes.extmaps=C.audioExtensions,sl(I),ie("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:L,ssrcGroups:V}=aa([{ssrcId:VC}],this.cname);I.attributes.ssrcs=L,I.attributes.ssrcGroups=V}}this.sessionDesc=T,this.currentMidIndex=T.mediaDescriptions.length-1}updateRemoteRTPCapabilities(r){const o=ir.exports.parse(w2);this._rtpCapabilities=r;const s=this.rtpCapabilities.send;for(const l of o.mediaDescriptions){if(l.attributes.iceUfrag=this._iceParameters.iceUfrag,l.attributes.icePwd=this._iceParameters.icePwd,l.attributes.fingerprints=this._dtlsParameters.fingerprints,l.attributes.candidates=this._candidates,l.attributes.setup=this.setup,l.media.mediaType==="application"&&(l.attributes.sctpPort="5000"),l.media.mediaType==="video"&&(l.media.fmts=s.videoCodecs.map(h=>h.payloadType.toString(10)),l.attributes.payloads=s.videoCodecs,l.attributes.extmaps=s.videoExtensions,ie("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:h,ssrcGroups:p}=aa([{ssrcId:BC,rtx:ie("USE_SUB_RTX")?40001:void 0}],this.cname);l.attributes.ssrcs=h,l.attributes.ssrcGroups=p}if(l.media.mediaType==="audio"&&(l.media.fmts=s.audioCodecs.map(h=>h.payloadType.toString(10)),l.attributes.payloads=s.audioCodecs,l.attributes.extmaps=s.audioExtensions,ie("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:h,ssrcGroups:p}=aa([{ssrcId:VC}],this.cname);l.attributes.ssrcs=h,l.attributes.ssrcGroups=p}}this.sessionDesc=o,this.currentMidIndex=o.mediaDescriptions.length-1}preloadRemoteMedia(r){this.rtpCapabilities;const o=this.candidates,s=this.dtlsParameters,l=this.iceParameters,h=this.rtpCapabilities.send;for(let p=1;p<r;p++){const v=2*p+VC,E=2*p+BC,{ssrcs:T,ssrcGroups:C}=aa([{ssrcId:v}],this.cname),{ssrcs:I,ssrcGroups:L}=aa([{ssrcId:E,rtx:ie("USE_SUB_RTX")?E+1:void 0}],this.cname);this.sessionDesc.mediaDescriptions.push({media:{mediaType:"video",port:pg,protos:["UDP","TLS","RTP","SAVPF"],fmts:h.videoCodecs.map(V=>V.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:l.iceUfrag,icePwd:l.icePwd,unrecognized:[],candidates:o,extmaps:h.videoExtensions,fingerprints:s.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:I,ssrcGroups:L,rtcpFeedbackWildcards:[],payloads:h.videoCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*p-1)}}),this.sessionDesc.mediaDescriptions.push({media:{mediaType:"audio",port:pg,protos:["UDP","TLS","RTP","SAVPF"],fmts:h.audioCodecs.map(V=>V.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:l.iceUfrag,icePwd:l.icePwd,unrecognized:[],candidates:o,extmaps:h.audioExtensions,fingerprints:s.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:T,ssrcGroups:C,rtcpFeedbackWildcards:[],payloads:h.audioCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*p)}}),this.currentMidIndex+=2}this.updateBundleMids()}toString(){return ir.exports.print(this.sessionDesc)}send(r,o,s,l){const{ssrcs:h,ssrcGroups:p}=aa(o,this.cname,ie("SYNC_GROUP")?s:void 0),v=this.findPreloadMediaDesc(h);if(v){if(Pn()&&this.firefoxSsrcMidMap.set(h[0].ssrcId,v.attributes.mid),l&&(l.twcc||l.remb)){const E=this.sessionDesc.mediaDescriptions.indexOf(v);return this.sessionDesc.mediaDescriptions[E]=this.mungSendMediaDesc(v,l),{mid:v.attributes.mid,needExchangeSDP:!0}}return{mid:v.attributes.mid,needExchangeSDP:!1}}{const E=this.findAvailableMediaIndex(r,h);let T;return E===-1||bi()||Ti()||nx()||E===0&&ie("USE_SUB_RTX")?(T=this.createOrRecycleSendMedia(r,h,p,"sendonly",l),this.updateBundleMids()):(T=nr(this.sessionDesc.mediaDescriptions[E]),T.attributes.direction="sendonly",T.attributes.ssrcs=h,T.attributes.ssrcGroups=p,this.sessionDesc.mediaDescriptions[E]=this.mungSendMediaDesc(T,l)),Pn()&&this.firefoxSsrcMidMap.set(h[0].ssrcId,T.attributes.mid),{mid:T.attributes.mid,needExchangeSDP:!0}}}batchSend(r){const o=r.map(h=>{let{kind:p,ssrcMsg:v,mslabel:E}=h;return this.send(p,v,E)}),s=[];let l=!1;return o.forEach(h=>{let{mid:p,needExchangeSDP:v}=h;v&&(l=!0),s.push(p)}),{mids:s,needExchangeSDP:l}}stopSending(r){const o=this.sessionDesc.mediaDescriptions.filter(s=>s.attributes.mid&&r.indexOf(s.attributes.mid)!==-1);if(o.length!==r.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.stopSending.");o.forEach(s=>{s.attributes.mid==="0"||Pn()||bi()||Ti()?s.attributes.ssrcs=[]:(s.attributes.ssrcs=[],s.attributes.direction="inactive",s.media.port="0")}),this.updateBundleMids()}mute(r){const o=this.sessionDesc.mediaDescriptions.find(s=>s.attributes.mid===r);if(!o)throw new Error("mediaDescription not found with ".concat(r," in remote SDP when calling RemoteSDP.mute."));o.attributes.direction="inactive"}unmute(r){const o=this.sessionDesc.mediaDescriptions.find(s=>s.attributes.mid===r);if(!o)throw new Error("mediaDescription not found with ".concat(r," in remote SDP when calling RemoteSDP.unmute."));o.attributes.direction="sendonly"}muteRemote(r){const o=this.sessionDesc.mediaDescriptions.filter(s=>r.includes(s.attributes.mid||""));if(o.length!==r.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");o.forEach(s=>{s.attributes.direction="inactive"})}unmuteRemote(r){const o=this.sessionDesc.mediaDescriptions.filter(s=>r.includes(s.attributes.mid||""));if(o.length!==r.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");o.forEach(s=>{s.attributes.direction="recvonly"})}receive(r,o,s,l){r.forEach((h,p)=>{this.createOrRecycleRecvMedia(h,[],"recvonly",o,s,l[p])}),this.updateBundleMids()}stopReceiving(r){const o=this.sessionDesc.mediaDescriptions.filter(s=>r.indexOf(s.attributes.mid)!==-1);if(o.length!==r.length)throw new Error("MediaDescriptions' length doesn't match mids's length when calling RemoteSDP.receive.");o.forEach(s=>{s.media.port="0",s.attributes.direction="inactive"}),this.updateBundleMids()}updateCandidates(r){r===Vr.TCP?this._candidates.forEach(o=>{this._candidates.findIndex(s=>s.transport==="tcp"&&s.connectionAddress===o.connectionAddress&&s.port===o.port)===-1&&this._candidates.push(I2(I2({},o),{},{foundation:"tcpcandidate",priority:Number(o.priority)-1+"",transport:"tcp",port:Number(o.port)+90+""}))}):this._candidates=this._candidates.filter(o=>o.transport!=="tcp");for(const o of this.sessionDesc.mediaDescriptions)o.attributes.candidates=this.candidates}restartICE(r){r=nr(r),this._iceParameters=r,this.sessionDesc.mediaDescriptions.forEach(o=>{o.attributes.iceUfrag=r.iceUfrag,o.attributes.icePwd=r.icePwd})}predictReceivingMids(r){const o=[];for(let s=0;s<r;s++)o.push((this.currentMidIndex+s+1).toString(10));return o}findAvailableMediaIndex(r,o){return this.sessionDesc.mediaDescriptions.findIndex(s=>{const l=s.media.mediaType===r&&s.media.port!=="0"&&(s.attributes.direction==="sendonly"||s.attributes.direction==="sendrecv")&&s.attributes.ssrcs.length===0;if(Pn()){if(l){const h=this.firefoxSsrcMidMap.get(o[0].ssrcId);return!(h||s.attributes.mid!=="0"&&s.attributes.mid!=="1")||!(!h||h!==s.attributes.mid)}return!1}return l})}createOrRecycleRecvMedia(r,o,s,l,h,p){const v=r._mediaStreamTrack.kind,E=this.rtpCapabilities.recv,T=this.localCapabilities.send;let C=[];if(v===dt.VIDEO){var I,L;if(ie("H264_PROFILE_LEVEL_ID")&&l==="h264"&&(C=E.videoCodecs.filter(le=>{var he,Se;return(((he=le.rtpMap)===null||he===void 0?void 0:he.encodingName.toLowerCase())||"").includes(l)&&(le==null||(Se=le.fmtp)===null||Se===void 0?void 0:Se.parameters["profile-level-id"])===ie("H264_PROFILE_LEVEL_ID")})),!C||((I=C)===null||I===void 0?void 0:I.length)===0){const le=T.videoCodecs.filter(he=>{var Se;return(((Se=he.rtpMap)===null||Se===void 0?void 0:Se.encodingName.toLowerCase())||"").includes(l)});le.length!==0&&(C=E.videoCodecs.filter(he=>le.some(Se=>Se.payloadType===he.payloadType)))}if(ie("USE_PUB_RTX")){const le=C.map(Se=>Se.payloadType.toString()),he=E.videoCodecs.filter(Se=>{var De,be;return((De=Se.rtpMap)===null||De===void 0?void 0:De.encodingName)==="rtx"&&le.includes(((be=Se.fmtp)===null||be===void 0?void 0:be.parameters.apt)||"")});C=[...C,...he]}C.length===0&&(U.warning("codec ".concat(l," not included in rtpCapabilities, fallback to default payloads: ").concat((L=E.videoCodecs[0].rtpMap)===null||L===void 0?void 0:L.encodingName)),C=E.videoCodecs)}else C=E.audioCodecs.filter(le=>{var he;return(((he=le.rtpMap)===null||he===void 0?void 0:he.encodingName.toLowerCase())||"").includes(h)}),C.length===0&&(U.warning("codec ".concat(h," not included in rtpCapabilities, fallback to opus")),C=E.audioCodecs.filter(le=>{var he;return(((he=le.rtpMap)===null||he===void 0?void 0:he.encodingName.toLowerCase())||"").includes("opus")}));const V=v===dt.VIDEO?E.videoExtensions:E.audioExtensions;this.currentMidIndex+=1;const Y="".concat(this.currentMidIndex);let q={media:{mediaType:v,port:pg,protos:["UDP","TLS","RTP","SAVPF"],fmts:C.map(le=>le.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:V,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:o,ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:C,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:s,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(Y)}};q=this.mungRecvMediaDsec(q,r,p);const X=this.findFirstClosedMedia(v);if(X){const le=this.sessionDesc.mediaDescriptions.indexOf(X);this.sessionDesc.mediaDescriptions[le]=q}else this.sessionDesc.mediaDescriptions.push(q);return q}createOrRecycleSendMedia(r,o,s,l,h){const p=this.rtpCapabilities.send,v=r===dt.VIDEO?p.videoCodecs:p.audioCodecs,E=r===dt.VIDEO?p.videoExtensions:p.audioExtensions;this.currentMidIndex+=1;const T="".concat(this.currentMidIndex);let C={media:{mediaType:r,port:pg,protos:["UDP","TLS","RTP","SAVPF"],fmts:v.map(L=>L.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:E,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:o,ssrcGroups:s,rtcpFeedbackWildcards:[],payloads:v,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:l,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(T)}};C=this.mungSendMediaDesc(C,h);const I=this.findFirstClosedMedia(r);if(I){const L=this.sessionDesc.mediaDescriptions.indexOf(I);this.sessionDesc.mediaDescriptions[L]=C}else this.sessionDesc.mediaDescriptions.push(C);return C}updateBundleMids(){this.sessionDesc.attributes.groups[0].identificationTag=this.sessionDesc.mediaDescriptions.filter(r=>r.media.port!=="0").map(r=>r.attributes.mid)}mungRecvMediaDsec(r,o,s){const l=nr(r);return kC(l),Fd(l,o),LC(l,o),HL(l),sg(l,s,this.localCapabilities.send),l}mungSendMediaDesc(r,o){const s=nr(r);return sg(s,o,this.localCapabilities.recv),sl(s),s}updateRecvMedia(r,o){const s=this.sessionDesc.mediaDescriptions.findIndex(l=>l.attributes.mid===r);if(s!==-1){const l=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[s],o);this.sessionDesc.mediaDescriptions[s]=l}}bumpMid(r){this.currentMidIndex+=r}findFirstClosedMedia(r){return this.sessionDesc.mediaDescriptions.find(o=>Pn()?o.media.port==="0"&&o.media.mediaType===r:o.media.port==="0")}findPreloadMediaDesc(r){return this.sessionDesc.mediaDescriptions.find(o=>{var s,l;return((s=o.attributes)===null||s===void 0||(l=s.ssrcs[0])===null||l===void 0?void 0:l.ssrcId)===r[0].ssrcId})}getSSRC(r){var o;return(o=this.sessionDesc.mediaDescriptions.find(s=>s.attributes.mid===r))===null||o===void 0?void 0:o.attributes.ssrcs}}var Kt;function O2(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function fg(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?O2(Object(o),!0).forEach(function(s){N(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):O2(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}let $J=(_e((Kt=class uv extends F0{get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}constructor(r,o,s){super(r,o),N(this,"store",void 0),N(this,"peerConnection",void 0),N(this,"remoteSDP",void 0),N(this,"initialOffer",void 0),N(this,"transportEventReceiver",void 0),N(this,"statsFilter",void 0),N(this,"localCapabilities",void 0),N(this,"localCandidateCount",0),N(this,"allCandidatesReceived",!1),N(this,"establishPromise",void 0),N(this,"mutex",new wi("NVExtentionsConnection-mutex")),N(this,"rtcMedia",void 0),this.store=o,this.peerConnection=s,this.statsFilter=FC(this.peerConnection,ie("STATS_UPDATE_INTERVAL"),void 0,Pn()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1,this.establishPromise=this.establish()}async establish(r){try{const o=await this.peerConnection.createOffer();if(!o.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const s=Eu(o.sdp),l=await GL(!ie("USE_PUB_RTX")&&!ie("USE_SUB_RTX"),ie("FILTER_VIDEO_FEC"),ie("FILTER_AUDIO_FEC"));return this.localCapabilities=l,this.initialOffer=o,fg(fg({},s),{},{rtpCapabilities:l,offerSDP:o.sdp})}catch(o){throw new Q(W.GET_LOCAL_CONNECTION_PARAMS_FAILED,o.toString())}}async connect(r,o,s,l,h,p){try{if(!this.initialOffer)throw new Error("Cannot establish NVConnection without initial offer.");this.remoteSDP=new BJ({remoteIceParameters:r,remoteDtlsParameters:o,candidates:s,remoteRTPCapabilities:l,remoteSetup:h,localCapabilities:MC(this.localCapabilities),cname:p});const v=this.remoteSDP.toString(),E=ir.exports.parse(this.initialOffer.sdp),T=E.mediaDescriptions.find(L=>L.media.mediaType==="audio");T&&sl(T);const C=ir.exports.print(E),I=this.logSDPExchange(C||"","offer","local","connect");await this.peerConnection.setLocalDescription({type:"offer",sdp:C}),I==null||I(v),await this.peerConnection.setRemoteDescription({type:"answer",sdp:v})}catch(v){throw new Q(W.EXCHANGE_SDP_FAILED,"NV.connect failed; ".concat(v.toString()))}}async updateRemoteConnect(r){var o,s,l;(o=this.remoteSDP)===null||o===void 0||o.updateRemoteRTPCapabilities(r),(s=this.remoteSDP)===null||s===void 0||s.preloadRemoteMedia(2);const h=(l=this.remoteSDP)===null||l===void 0?void 0:l.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:h});const p=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(p),U.debug("[NVExtentionsConnection] updateRemoteRTPCapabilities by exchanging SDP.")}send(r,o,s){var l=this;return Na(function*(){const h=yield It(l.mutex.lock("From NVExtentionsConnection.send"));try{if(!l.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.send before remote SDP created");const p=[];r.forEach(q=>{const X=l.peerConnection.addTransceiver(q._mediaStreamTrack,{direction:"sendonly"});p.push(X)}),Pn()&&ie("SIMULCAST")===!0&&(yield It(l.applySimulcastForFirefox(p,r)));const v=yield It(l.peerConnection.createOffer()),E=l.remoteSDP.predictReceivingMids(r.length),T=l.mungSendOfferSDP(v.sdp,r,E),C=ir.exports.parse(T),I=E.map(q=>{const X=C.mediaDescriptions.find(le=>le.attributes.mid===q);if(!X)throw new Error("Cannot extract ssrc from mediaDescription.");return BL(X,ie("USE_PUB_RTX"))});let L;try{L=yield I}catch(q){L=[],l.remoteSDP.receive(r,o,s,L);const X=l.remoteSDP.toString();throw yield It(l.peerConnection.setLocalDescription({type:"offer",sdp:T})),yield It(l.peerConnection.setRemoteDescription({type:"answer",sdp:X})),yield It(l.stopSending(E,!0)),q}l.remoteSDP.receive(r,o,s,L);const V=l.remoteSDP.toString(),Y=l.logSDPExchange(T,"offer","local","send");return yield It(l.peerConnection.setLocalDescription({type:"offer",sdp:T})),yield It(l.applySimulcastEncodings(p,r)),yield It(l.applySendEncodings(p,r)),Y==null||Y(V),yield It(l.peerConnection.setRemoteDescription({type:"answer",sdp:V})),p.map((q,X)=>{const le=E[X];return{localSSRC:I[X],id:le,transceiver:q}})}catch(p){throw p instanceof Q?p:new Q(W.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.send failed; ".concat(p.toString()))}finally{h()}})()}async stopSending(r,o){const s=o?void 0:await this.mutex.lock("From NVExtentionsConnection.stopSending");try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.stopSending before remote SDP created");const l=this.peerConnection.getTransceivers().filter(E=>r.indexOf(E.mid)!==-1);if(l.length!==r.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call NVExtentionsConnection.stopSending.");l.map(E=>{var T;E.direction="inactive",(T=E.stop)===null||T===void 0||T.call(E)});const h=await this.peerConnection.createOffer(),p=this.logSDPExchange(h.sdp||"","offer","local","stopSending");await this.peerConnection.setLocalDescription(h),this.remoteSDP.stopReceiving(r);const v=this.remoteSDP.toString();p==null||p(v),await this.peerConnection.setRemoteDescription({type:"answer",sdp:v})}catch(l){throw new Q(W.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.stopSending failed; ".concat(l.toString()))}finally{s&&s()}}async receive(r,o,s,l){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.receive ".concat(r," before remoteSDP created."));const{mid:h,needExchangeSDP:p}=this.remoteSDP.send(r,o,s,l);if(p){const E=this.remoteSDP.toString(),T=this.logSDPExchange(E,"offer","remote","receive");await this.peerConnection.setRemoteDescription({type:"offer",sdp:E});const C=await this.peerConnection.createAnswer(),I=this.mungReceiveAnswerSDP(C.sdp,h,r);T==null||T(I||""),await this.peerConnection.setLocalDescription({type:"answer",sdp:I}),U.debug("[NVExtentionsConnection] receive ".concat(r," by exchanging SDP."))}else U.debug("[NVExtentionsConnection] receive ".concat(r," no need to exchange SDP."));const v=this.peerConnection.getTransceivers().find(E=>E.mid===h);if(!v)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:v.receiver.track,id:h}}catch(h){throw new Q(W.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.receive failed; ".concat(h.toString()))}}async batchReceive(r){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.batchReceive before remoteSDP created.");const{mids:o,needExchangeSDP:s}=this.remoteSDP.batchSend(r);if(s){const l=this.remoteSDP.toString(),h=this.logSDPExchange(l,"offer","remote","receive");await this.peerConnection.setRemoteDescription({type:"offer",sdp:l});const p=await this.peerConnection.createAnswer();h==null||h(p.sdp||""),await this.peerConnection.setLocalDescription(p),U.debug("[NVExtentionsConnection] batchReceive by exchanging SDP.")}else U.debug("[NVExtentionsConnection] batchReceive no need to exchange SDP.");return o.map(l=>{const h=this.peerConnection.getTransceivers().find(p=>p.mid===l);if(!h)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:h.receiver.track,id:l}})}catch(o){throw new Q(W.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.receive failed; ".concat(o.toString()))}}async stopReceiving(r){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.stopReceiving before remote SDP created.");this.remoteSDP.stopSending(r);const o=this.remoteSDP.toString(),s=this.logSDPExchange(o,"offer","remote","stopReceiving");await this.peerConnection.setRemoteDescription({type:"offer",sdp:o});const l=await this.peerConnection.createAnswer();s==null||s(l.sdp||""),await this.peerConnection.setLocalDescription(l)}catch(o){throw new Q(W.EXCHANGE_SDP_FAILED,"NVExtentionsConnection stopReceiving failed; ".concat(o.toString()))}}async muteRemote(r){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.muteRemote mid=".concat(r," before remote SDP created."));this.remoteSDP.mute(r);const o=this.remoteSDP.toString(),s=this.logSDPExchange(o,"offer","remote","muteRemote");await this.peerConnection.setRemoteDescription({type:"offer",sdp:o});const l=await this.peerConnection.createAnswer();s==null||s(l.sdp||""),await this.peerConnection.setLocalDescription(l)}catch(o){throw new Q(W.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.muteRemote failed; ".concat(o.toString()))}}async unmuteRemote(r){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.unmuteRemote mid=".concat(r," before remote SDP created."));this.remoteSDP.unmute(r);const o=this.remoteSDP.toString(),s=this.logSDPExchange(o,"offer","remote","unmuteRemote");await this.peerConnection.setRemoteDescription({type:"offer",sdp:o});const l=await this.peerConnection.createAnswer();s==null||s(l.sdp||""),await this.peerConnection.setLocalDescription(l)}catch(o){throw new Q(W.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.unmuteRemote failed; ".concat(o.toString()))}}async muteLocal(r){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.muteLocal before remote SDP created.");const o=this.peerConnection.getTransceivers().filter(p=>p.mid&&r.indexOf(p.mid)!==-1);if(o.length!==r.length)throw new Error("Transceivers' length doesn't match mids' length.");o.map(p=>{p.direction="inactive"});const s=await this.peerConnection.createOffer(),l=this.logSDPExchange(s.sdp||"","offer","local","muteLocal");await this.peerConnection.setLocalDescription(s),this.remoteSDP.muteRemote(r);const h=this.remoteSDP.toString();l==null||l(h),await this.peerConnection.setRemoteDescription({type:"answer",sdp:h})}catch(o){throw new Q(W.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.muteLocal failed; ".concat(o.toString()))}}async unmuteLocal(r){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.unmuteLocal before remote SDP created.");const o=this.peerConnection.getTransceivers().filter(p=>p.mid&&r.indexOf(p.mid)!==-1);if(o.length!==r.length)throw new Error("Transceivers' length doesn't match mids' length.");o.map(async(p,v)=>{p.direction="sendonly"});const s=await this.peerConnection.createOffer(),l=this.logSDPExchange(s.sdp||"","offer","local","unmuteLocal");await this.peerConnection.setLocalDescription(s),this.remoteSDP.unmuteRemote(r);const h=this.remoteSDP.toString();l==null||l(h),await this.peerConnection.setRemoteDescription({type:"answer",sdp:h})}catch(o){throw new Q(W.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.unmuteLocal failed; ".concat(o.toString()))}}restartICE(r){var o=this;return Na(function*(){const s=yield It(o.mutex.lock("From NVExtentionsConnection.restartICE"));try{if(!o.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");if(zn().supportPCSetConfiguration){const T=o.peerConnection.getConfiguration(),C=r===Vr.RELAY?"relay":"all";T.iceTransportPolicy!==C&&(U.debug("restartICE change iceTransportPolicy from [".concat(T.iceTransportPolicy,"] to [").concat(C,"]")),T.iceTransportPolicy=C,o.peerConnection.setConfiguration(T))}else if(r===Vr.RELAY)return;r!==Vr.RELAY&&o.remoteSDP.updateCandidates(r);const l=yield It(o.peerConnection.createOffer({iceRestart:!0}));if(!l.sdp)throw new Error("Cannot restartICE because restart offer SDP does not exist.");const h=Eu(l.sdp),{remoteIceParameters:p}=yield h.iceParameters;o.remoteSDP.restartICE(p);const v=o.remoteSDP.toString(),E=o.logSDPExchange(l.sdp||"","offer","local","restartICE");yield It(o.peerConnection.setLocalDescription(l)),E==null||E(v),yield It(o.peerConnection.setRemoteDescription({type:"answer",sdp:v}))}catch(l){U.warning("restart ICE failed, abort operation",l)}finally{s()}})()}close(){var r;(r=this.onConnectionStateChange)===null||r===void 0||r.call(this,"closed"),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.transportEventReceiver=void 0,this.statsFilter.destroy()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(r){return this.statsFilter.getVideoIsReady(r)}async updateEncoderConfig(r,o){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.updateEncoderConfig before remote SDP created.");const s=await this.peerConnection.createOffer(),l=this.mungSendOfferSDP(s.sdp,[o],[r]);this.remoteSDP.updateRecvMedia(r,o);const h=this.remoteSDP.toString(),p=this.logSDPExchange(l,"offer","local","updateEncoderConfig");await this.peerConnection.setLocalDescription({type:"offer",sdp:l}),p==null||p(h),await this.peerConnection.setRemoteDescription({type:"answer",sdp:h})}catch(s){throw new Q(W.EXCHANGE_SDP_FAILED,s.toString())}}async updateSendParameters(r,o){const s=this.peerConnection.getTransceivers().filter(l=>l.mid===r);s.length===1&&(this.isVP8Simulcast(o)?Pn()||await this.applySimulcastEncodings(s,[o]):await this.applySendEncodings(s,[o]))}setStatsRemoteVideoIsReady(r,o){this.statsFilter.setVideoIsReady2(r,o)}async replaceTrack(r,o){const s=this.peerConnection.getTransceivers().find(l=>l.mid===o);s&&await s.sender.replaceTrack(r._mediaStreamTrack)}getP2PConnectionParams(){var r;if((r=this.peerConnection.currentLocalDescription)===null||r===void 0||!r.sdp||!this.localCapabilities)throw new Error;return fg(fg({},Eu(this.peerConnection.currentLocalDescription.sdp)),{},{rtpCapabilities:this.localCapabilities})}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var r;(r=this.onICEConnectionStateChange)===null||r===void 0||r.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var r;(r=this.onConnectionStateChange)===null||r===void 0||r.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidate=r=>{r.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,U.debug("[pc-".concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},setTimeout(()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,U.debug("[pc-".concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))},ie("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(r){const o={iceServers:[]};return r.iceServers?o.iceServers=r.iceServers:r.turnServer&&r.turnServer.mode!=="off"&&(xp(r.turnServer.servers)?o.iceServers=r.turnServer.servers:(o.iceServers&&o.iceServers.push(...uv.turnServerConfigToIceServers(r.turnServer.servers)),ie("USE_TURN_SERVER_OF_GATEWAY")&&o.iceServers&&r.turnServer.serversFromGateway&&o.iceServers.push(...uv.turnServerConfigToIceServers(r.turnServer.serversFromGateway)),ie("FORCE_TURN_TCP")?o.iceTransportPolicy="relay":r.turnServer.servers.concat(r.turnServer.serversFromGateway||[]).forEach(s=>{s.forceturn&&(o.iceTransportPolicy="relay")}))),o}static turnServerConfigToIceServers(r){const o=[];return r.forEach(s=>{s.security?s.tcpport&&o.push({username:s.username,credential:s.password,credentialType:"password",urls:"turns:".concat(K0(s.turnServerURL),":").concat(s.tcpport,"?transport=tcp")}):(s.udpport&&!ie("FORCE_TURN_TCP")&&o.push({username:s.username,credential:s.password,credentialType:"password",urls:"turn:".concat(s.turnServerURL,":").concat(s.udpport,"?transport=udp")}),s.tcpport&&o.push({username:s.username,credential:s.password,credentialType:"password",urls:"turn:".concat(s.turnServerURL,":").concat(s.tcpport,"?transport=tcp")}))}),o}async applySendEncodings(r,o){try{if(!zn().supportSetRtpSenderParameters||r.length!==o.length)return;for(let T=0;T<r.length;T++){const C=r[T],I=o[T];if(I&&I instanceof rr){var s,l;if(this.isVP8Simulcast(I))continue;const L={},V={};switch(I._optimizationMode){case"motion":L.degradationPreference="maintain-framerate";break;case"detail":L.degradationPreference="maintain-resolution";break;default:L.degradationPreference="balanced"}var h,p,v,E;if((s=I._encoderConfig)!==null&&s!==void 0&&s.bitrateMax&&(V.maxBitrate=1e3*((h=I._encoderConfig)===null||h===void 0?void 0:h.bitrateMax)),I._hints.includes(pr.LOW_STREAM)&&((p=I._encoderConfig)!==null&&p!==void 0&&p.frameRate&&(V.maxFramerate=dc(I._encoderConfig.frameRate)),(v=I._encoderConfig)!==null&&v!==void 0&&v.scaleResolutionDownBy&&((E=I._encoderConfig)===null||E===void 0?void 0:E.scaleResolutionDownBy)>1&&(V.scaleResolutionDownBy=I._encoderConfig.scaleResolutionDownBy)),ie("DSCP_TYPE")&&ru()){const X=ie("DSCP_TYPE");["very-low","low","medium","high"].includes(X)&&(V.networkPriority=X)}const Y=C.sender.getParameters(),q=(l=Y.encodings)===null||l===void 0?void 0:l[0];Pn()&&!q&&(L.encodings=[V]),q&&Object.assign(q,V),Object.assign(Y,L),await C.sender.setParameters(Y)}}}catch{U.debug("Apply RTPSendEncodings failed.")}}mungSendOfferSDP(r,o,s){const l=ir.exports.parse(r);return o.forEach((h,p)=>{const v=s[p],E=l.mediaDescriptions.find(T=>T.attributes.mid===v);E&&(Fd(E,h),WL(E,h,this.store.codec))}),ir.exports.print(l)}mungReceiveAnswerSDP(r,o,s){const l=ir.exports.parse(r),h=l.mediaDescriptions.find(p=>p.attributes.mid===o);return h&&s===dt.AUDIO&&h.media.mediaType==="audio"&&sl(h),ir.exports.print(l)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=r=>{var o;(o=this.onFirstAudioReceived)===null||o===void 0||o.call(this,r)},this.statsFilter.onFirstVideoReceived=r=>{var o;(o=this.onFirstVideoReceived)===null||o===void 0||o.call(this,r)},this.statsFilter.onFirstAudioDecoded=r=>{var o;(o=this.onFirstAudioDecoded)===null||o===void 0||o.call(this,r)},this.statsFilter.onFirstVideoDecoded=(r,o,s)=>{var l;(l=this.onFirstVideoDecoded)===null||l===void 0||l.call(this,r,o,s)},this.statsFilter.onSelectedLocalCandidateChanged=(r,o)=>{var s;(s=this.onSelectedLocalCandidateChanged)===null||s===void 0||s.call(this,r,o)},this.statsFilter.onSelectedRemoteCandidateChanged=(r,o)=>{var s;(s=this.onSelectedRemoteCandidateChanged)===null||s===void 0||s.call(this,r,o)},this.statsFilter.onFirstVideoDecodedTimeout=r=>{var o;(o=this.onFirstVideoDecodedTimeout)===null||o===void 0||o.call(this,r)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0,this.statsFilter.onFirstVideoDecodedTimeout=void 0}async applySimulcastForFirefox(r,o){if(r.length===o.length)for(let v=0;v<r.length;v++){var s,l,h,p;const E=r[v],T=o[v];if(T instanceof rr&&!T._hints.includes(pr.LOW_STREAM)&&(s=T._encoderConfig)!==null&&s!==void 0&&s.bitrateMax&&((l=T._encoderConfig)===null||l===void 0?void 0:l.bitrateMax)>200&&(h=T._scalabiltyMode)!==null&&h!==void 0&&h.numSpatialLayers&&((p=T._scalabiltyMode)===null||p===void 0?void 0:p.numSpatialLayers)>1&&this.store.codec==="vp8"){const C={},I={high:1e3*(T._encoderConfig.bitrateMax-50),medium:5e4};C.encodings=[{rid:"m",active:!0,maxBitrate:I.medium,scaleResolutionDownBy:4},{rid:"h",active:!0,maxBitrate:I.high}];const L=E.sender.getParameters();await E.sender.setParameters(Object.assign(L,C))}}}async applySimulcastEncodings(r,o){if(!Pn()&&r.length===o.length)for(let s=0;s<r.length;s++){const l=o[s];if(l instanceof rr&&this.isVP8Simulcast(l)){const h=r[s],p={},v={high:1e3*(l._encoderConfig.bitrateMax-50),medium:5e4};p.encodings=[{active:!0,adaptivePtime:!1,networkPriority:"high",priority:"high",maxBitrate:v.high},{active:!0,adaptivePtime:!1,networkPriority:"low",priority:"low",maxBitrate:v.medium,scaleResolutionDownBy:4}];const E=h.sender.getParameters();await h.sender.setParameters(Object.assign(E,p))}}}isVP8Simulcast(r){var o,s,l,h;return!!(r instanceof rr&&ie("SIMULCAST")&&this.store.codec==="vp8"&&!r._hints.includes(pr.LOW_STREAM)&&(o=r._encoderConfig)!==null&&o!==void 0&&o.bitrateMax&&((s=r._encoderConfig)===null||s===void 0?void 0:s.bitrateMax)>200&&(l=r._scalabiltyMode)!==null&&l!==void 0&&l.numSpatialLayers&&((h=r._scalabiltyMode)===null||h===void 0?void 0:h.numSpatialLayers)>1)}logSDPExchange(r,o,s,l){if(ie("SDP_LOGGING"))return U.upload("exchanging ".concat(s," ").concat(o," SDP during NVExtentionsConnection.").concat(l,`
`),r),o==="offer"?h=>{this.logSDPExchange(h,"answer",s==="local"?"remote":"local",l)}:void 0}async getRemoteSSRC(r){if(!this.remoteSDP)return;const o=this.remoteSDP.getSSRC(r);return o==null?void 0:o[0].ssrcId}setConfiguration(r){if(zn().supportPCSetConfiguration){const o=uv.resolvePCConfiguration(r);this.peerConnection.setConfiguration(o)}}}).prototype,"connect",[jo],Object.getOwnPropertyDescriptor(Kt.prototype,"connect"),Kt.prototype),_e(Kt.prototype,"updateRemoteConnect",[jo],Object.getOwnPropertyDescriptor(Kt.prototype,"updateRemoteConnect"),Kt.prototype),_e(Kt.prototype,"receive",[jo],Object.getOwnPropertyDescriptor(Kt.prototype,"receive"),Kt.prototype),_e(Kt.prototype,"batchReceive",[jo],Object.getOwnPropertyDescriptor(Kt.prototype,"batchReceive"),Kt.prototype),_e(Kt.prototype,"stopReceiving",[jo],Object.getOwnPropertyDescriptor(Kt.prototype,"stopReceiving"),Kt.prototype),_e(Kt.prototype,"muteRemote",[jo],Object.getOwnPropertyDescriptor(Kt.prototype,"muteRemote"),Kt.prototype),_e(Kt.prototype,"unmuteRemote",[jo],Object.getOwnPropertyDescriptor(Kt.prototype,"unmuteRemote"),Kt.prototype),_e(Kt.prototype,"muteLocal",[jo],Object.getOwnPropertyDescriptor(Kt.prototype,"muteLocal"),Kt.prototype),_e(Kt.prototype,"unmuteLocal",[jo],Object.getOwnPropertyDescriptor(Kt.prototype,"unmuteLocal"),Kt.prototype),_e(Kt.prototype,"close",[jo],Object.getOwnPropertyDescriptor(Kt.prototype,"close"),Kt.prototype),_e(Kt.prototype,"updateEncoderConfig",[jo],Object.getOwnPropertyDescriptor(Kt.prototype,"updateEncoderConfig"),Kt.prototype),_e(Kt.prototype,"updateSendParameters",[jo],Object.getOwnPropertyDescriptor(Kt.prototype,"updateSendParameters"),Kt.prototype),_e(Kt.prototype,"replaceTrack",[jo],Object.getOwnPropertyDescriptor(Kt.prototype,"replaceTrack"),Kt.prototype),_e(Kt.prototype,"getRemoteSSRC",[jo],Object.getOwnPropertyDescriptor(Kt.prototype,"getRemoteSSRC"),Kt.prototype),Kt);function jo(n,r,o){const s=n[r];if(typeof s!="function")throw new Error("Cannot use mutex on object property.");return o.value=async function(){const l=this.mutex,h=await l.lock("From NVExtentionsConnection.".concat(r));try{for(var p=arguments.length,v=new Array(p),E=0;E<p;E++)v[E]=arguments[E];return await s.apply(this,v)}finally{h()}},o}var cn;function A2(n){var r,o,s,l=2;for(typeof Symbol<"u"&&(o=jL,s=Symbol.iterator);l--;){if(o&&(r=n[o])!=null)return r.call(n);if(s&&(r=n[s])!=null)return new $C(r.call(n));o="@@asyncIterator",s="@@iterator"}throw new TypeError("Object is not async iterable")}function $C(n){function r(o){if(Object(o)!==o)return xe.reject(new TypeError(o+" is not an object."));var s=o.done;return xe.resolve(o.value).then(function(l){return{value:l,done:s}})}return($C=function(o){this.s=o,this.n=o.next}).prototype={s:null,n:null,next:function(){return r(this.n.apply(this.s,arguments))},return:function(o){var s=this.s.return;return s===void 0?xe.resolve({value:o,done:!0}):r(s.apply(this.s,arguments))},throw:function(o){var s=this.s.return;return s===void 0?xe.reject(o):r(s.apply(this.s,arguments))}},new $C(n)}let ll=(_e((cn=class dv extends F0{get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}constructor(r,o){super(r,o),N(this,"store",void 0),N(this,"peerConnection",void 0),N(this,"cname",void 0),N(this,"mutex",new wi("DataChannelConnection-mutex")),N(this,"dataChannel",void 0),N(this,"_p2pConnection",void 0),N(this,"establishPromise",void 0),N(this,"_nvMedia",void 0),this.store=o,this.store.dcId=this.store.dcId+1,this.peerConnection=new RTCPeerConnection(dv.resolvePCConfiguration(r),{optional:[{googDscp:!0}]}),this.dataChannel=this.peerConnection.createDataChannel("agora-signal",{ordered:!1,maxPacketLifeTime:50}),this.dataChannel.binaryType="arraybuffer",this._p2pConnection=new $J(r,o,this.peerConnection),this.bindPCEvents(),this.establishPromise=this._p2pConnection.establishPromise}async establish(){var r;const o=(r=this._nvMedia)===null||r===void 0?void 0:r.getLocalRtpCapabilities();return await this._p2pConnection.establish(o)}getP2PConnectionParams(){return this._p2pConnection.getP2PConnectionParams()}async connect(r,o,s,l,h,p){return this.cname=p,await this._p2pConnection.connect(r,o,s,l,h,p),await new xe((v,E)=>{const T=setTimeout(()=>{this.closeSignal(),E(new Q(W.DATACHANNEL_CONNECTION_TIMEOUT,"Datachannel connection timed out, candidates: ".concat(JSON.stringify(s))))},2e3);this.dataChannel.onopen=()=>{if(this.dataChannel.readyState==="open")return clearTimeout(T),void v()},this.dataChannel.onerror=C=>{this.closeSignal(),E(C)}}),{transmitter:this.dataChannel,close:this.closeSignal.bind(this)}}send(r,o,s){var l=this;return Na(function*(){const h=yield It(l.mutex.lock("From DataChannelConnection.send"));try{return yield*ag(A2(l._p2pConnection.send(r,o,s)),It)}finally{h()}})()}async stopSending(r,o){return this._p2pConnection.stopSending(r,o)}async receive(r,o,s,l){return this._nvMedia?(U.debug("[DataChannelConnection] receive ".concat(r," by DataChannel.")),await this._nvMedia.reveiveByRTCMedia(r,o,this.cname)):(U.debug("[DataChannelConnection] receive ".concat(r," by WebRTC.")),await this._p2pConnection.receive(r,o,s,l))}async batchReceive(r){return[...await this._p2pConnection.batchReceive(r)]}async stopReceiving(r){return await this._p2pConnection.stopReceiving(r)}async muteRemote(r){return await this._p2pConnection.muteRemote(r)}async unmuteRemote(r){return await this._p2pConnection.unmuteRemote(r)}async muteLocal(r){return await this._p2pConnection.muteLocal(r)}async unmuteLocal(r){return await this._p2pConnection.unmuteLocal(r)}restartICE(r){var o=this;return Na(function*(){return yield*ag(A2(o._p2pConnection.restartICE(r)),It)})()}close(){var r;(r=this._nvMedia)===null||r===void 0||r.close(),this._p2pConnection.close(),this.unbindConnectionEvents(this._p2pConnection)}getStats(){return this._p2pConnection.getStats()}getRemoteVideoIsReady(r){return this._p2pConnection.getRemoteVideoIsReady(r)}updateRemoteConnect(r){var o;(o=this._nvMedia)===null||o===void 0||o.setRemoteRtpCapabilities(r),this._p2pConnection.updateRemoteConnect(r)}async updateEncoderConfig(r,o){return await this._p2pConnection.updateEncoderConfig(r,o)}async updateSendParameters(r,o){return await this._p2pConnection.updateSendParameters(r,o)}setStatsRemoteVideoIsReady(r,o){this._p2pConnection.setStatsRemoteVideoIsReady(r,o)}async replaceTrack(r,o){return await this._p2pConnection.replaceTrack(r,o)}async getRemoteSSRC(r){return this._p2pConnection.getRemoteSSRC(r)}logSDPExchange(r,o,s,l){if(ie("SDP_LOGGING"))return U.upload("exchanging ".concat(s," ").concat(o," SDP during DataChannelConnection.").concat(l,`
`),r),o==="offer"?h=>{this.logSDPExchange(h,"answer",s==="local"?"remote":"local",l)}:void 0}static resolvePCConfiguration(r){const o={iceServers:[]};return r.iceServers?o.iceServers=r.iceServers:r.turnServer&&r.turnServer.mode!=="off"&&(xp(r.turnServer.servers)?o.iceServers=r.turnServer.servers:(o.iceServers&&o.iceServers.push(...dv.turnServerConfigToIceServers(r.turnServer.servers)),ie("USE_TURN_SERVER_OF_GATEWAY")&&o.iceServers&&r.turnServer.serversFromGateway&&o.iceServers.push(...dv.turnServerConfigToIceServers(r.turnServer.serversFromGateway)),ie("FORCE_TURN_TCP")?o.iceTransportPolicy="relay":r.turnServer.servers.concat(r.turnServer.serversFromGateway||[]).forEach(s=>{s.forceturn&&(o.iceTransportPolicy="relay")}))),o}static turnServerConfigToIceServers(r){const o=[];return r.forEach(s=>{s.security?s.tcpport&&o.push({username:s.username,credential:s.password,credentialType:"password",urls:"turns:".concat(K0(s.turnServerURL),":").concat(s.tcpport,"?transport=tcp")}):(s.udpport&&!ie("FORCE_TURN_TCP")&&o.push({username:s.username,credential:s.password,credentialType:"password",urls:"turn:".concat(s.turnServerURL,":").concat(s.udpport,"?transport=udp")}),s.tcpport&&o.push({username:s.username,credential:s.password,credentialType:"password",urls:"turn:".concat(s.turnServerURL,":").concat(s.tcpport,"?transport=tcp")}))}),o}bindPCEvents(){this._p2pConnection.onICEConnectionStateChange=r=>{var o;return(o=this.onICEConnectionStateChange)===null||o===void 0?void 0:o.call(this,r)},this._p2pConnection.onConnectionStateChange=r=>{var o;return(o=this.onConnectionStateChange)===null||o===void 0?void 0:o.call(this,r)},this._p2pConnection.onDTLSTransportStateChange=r=>{var o;return(o=this.onDTLSTransportStateChange)===null||o===void 0?void 0:o.call(this,r)},this._p2pConnection.onDTLSTransportError=r=>{var o;return(o=this.onDTLSTransportError)===null||o===void 0?void 0:o.call(this,r)},this._p2pConnection.onICETransportStateChange=r=>{var o;return(o=this.onICETransportStateChange)===null||o===void 0?void 0:o.call(this,r)},this._p2pConnection.onFirstAudioReceived=r=>{var o;return(o=this.onFirstAudioReceived)===null||o===void 0?void 0:o.call(this,r)},this._p2pConnection.onFirstVideoReceived=r=>{var o;return(o=this.onFirstVideoReceived)===null||o===void 0?void 0:o.call(this,r)},this._p2pConnection.onFirstAudioDecoded=r=>{var o;return(o=this.onFirstAudioDecoded)===null||o===void 0?void 0:o.call(this,r)},this._p2pConnection.onFirstVideoDecoded=(r,o,s)=>{var l;return(l=this.onFirstVideoDecoded)===null||l===void 0?void 0:l.call(this,r,o,s)},this._p2pConnection.onFirstVideoDecodedTimeout=r=>{var o;return(o=this.onFirstVideoDecodedTimeout)===null||o===void 0?void 0:o.call(this,r)},this._p2pConnection.onSelectedLocalCandidateChanged=(r,o)=>{var s;return(s=this.onSelectedLocalCandidateChanged)===null||s===void 0?void 0:s.call(this,r,o)},this._p2pConnection.onSelectedRemoteCandidateChanged=(r,o)=>{var s;return(s=this.onSelectedRemoteCandidateChanged)===null||s===void 0?void 0:s.call(this,r,o)}}closeSignal(){this.dataChannel.close(),this.peerConnection.close()}unbindConnectionEvents(r){r.onConnectionStateChange=void 0,r.onICEConnectionStateChange=void 0,r.onICETransportStateChange=void 0,r.onDTLSTransportStateChange=void 0,r.onDTLSTransportError=void 0,r.onFirstAudioDecoded=void 0,r.onFirstAudioReceived=void 0,r.onFirstVideoDecoded=void 0,r.onFirstVideoReceived=void 0,r.onSelectedLocalCandidateChanged=void 0,r.onSelectedRemoteCandidateChanged=void 0,r.onFirstVideoDecodedTimeout=void 0}setConfiguration(r){this._p2pConnection.setConfiguration(r)}}).prototype,"connect",[Pa],Object.getOwnPropertyDescriptor(cn.prototype,"connect"),cn.prototype),_e(cn.prototype,"receive",[Pa],Object.getOwnPropertyDescriptor(cn.prototype,"receive"),cn.prototype),_e(cn.prototype,"stopReceiving",[Pa],Object.getOwnPropertyDescriptor(cn.prototype,"stopReceiving"),cn.prototype),_e(cn.prototype,"muteRemote",[Pa],Object.getOwnPropertyDescriptor(cn.prototype,"muteRemote"),cn.prototype),_e(cn.prototype,"unmuteRemote",[Pa],Object.getOwnPropertyDescriptor(cn.prototype,"unmuteRemote"),cn.prototype),_e(cn.prototype,"muteLocal",[Pa],Object.getOwnPropertyDescriptor(cn.prototype,"muteLocal"),cn.prototype),_e(cn.prototype,"unmuteLocal",[Pa],Object.getOwnPropertyDescriptor(cn.prototype,"unmuteLocal"),cn.prototype),_e(cn.prototype,"close",[Pa],Object.getOwnPropertyDescriptor(cn.prototype,"close"),cn.prototype),_e(cn.prototype,"updateEncoderConfig",[Pa],Object.getOwnPropertyDescriptor(cn.prototype,"updateEncoderConfig"),cn.prototype),_e(cn.prototype,"updateSendParameters",[Pa],Object.getOwnPropertyDescriptor(cn.prototype,"updateSendParameters"),cn.prototype),_e(cn.prototype,"replaceTrack",[Pa],Object.getOwnPropertyDescriptor(cn.prototype,"replaceTrack"),cn.prototype),_e(cn.prototype,"getRemoteSSRC",[Pa],Object.getOwnPropertyDescriptor(cn.prototype,"getRemoteSSRC"),cn.prototype),cn);function Pa(n,r,o){const s=n[r];if(typeof s!="function")throw new Error("Cannot use mutex on object property.");return o.value=async function(){const l=this.mutex,h=await l.lock("From DataChannelConnection.".concat(r));try{for(var p=arguments.length,v=new Array(p),E=0;E<p;E++)v[E]=arguments[E];return await s.apply(this,v)}finally{h()}},o}var Ft;function N2(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function ul(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?N2(Object(o),!0).forEach(function(s){N(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):N2(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}function x2(n){var r,o,s,l=2;for(typeof Symbol<"u"&&(o=jL,s=Symbol.iterator);l--;){if(o&&(r=n[o])!=null)return r.call(n);if(s&&(r=n[s])!=null)return new HC(r.call(n));o="@@asyncIterator",s="@@iterator"}throw new TypeError("Object is not async iterable")}function HC(n){function r(o){if(Object(o)!==o)return xe.reject(new TypeError(o+" is not an object."));var s=o.done;return xe.resolve(o.value).then(function(l){return{value:l,done:s}})}return(HC=function(o){this.s=o,this.n=o.next}).prototype={s:null,n:null,next:function(){return r(this.n.apply(this.s,arguments))},return:function(o){var s=this.s.return;return s===void 0?xe.resolve({value:o,done:!0}):r(s.apply(this.s,arguments))},throw:function(o){var s=this.s.return;return s===void 0?xe.reject(o):r(s.apply(this.s,arguments))}},new HC(n)}let HJ=(_e((Ft=class extends Rn{get state(){return this._state}set state(n){const r=this._state;this._state=n,this.emit(Pt.StateChange,r,this._state)}constructor(n,r){super(),N(this,"store",void 0),N(this,"statsUploader",void 0),N(this,"connection",void 0),N(this,"localTrackMap",new Map),N(this,"remoteUserMap",new Map),N(this,"pendingLocalTracks",[]),N(this,"pendingRemoteTracks",[]),N(this,"statsCollector",void 0),N(this,"isPlanB",!1),N(this,"shouldForwardP2PCreation",void 0),N(this,"iceFailedCount",0),N(this,"dtlsFailedCount",0),N(this,"mutex",new wi("P2PChannel-mutex")),N(this,"_state",fr.Disconnected),N(this,"_pcStatsUploadType",ie("NEW_ICE_RESTART")?rs.FIRST_CONNECTION:rs.OLD_FIRST_CONNECTION),N(this,"_isInRestartIce",!1),N(this,"_isStartRestartIce",!1),N(this,"_restartStates",["disconnected","failed"]),N(this,"_restartTimer",void 0),N(this,"_isFirstConnected",!0),N(this,"handleMuteLocalTrack",async(o,s,l)=>{const h=await this.mutex.lock("Locking from P2PChannel.handleMuteLocalTrack");try{if(!this.connection||this.state!==fr.Connected)return void l(new Q(W.INVALID_OPERATION,"Cannot call P2PChannel.handleMuteLocalTrack before connection established."));const p=this.filterTobeMutedTracks(o);if(p.length===0)return void s();const v=p.find(T=>T[0]==="videoLowTrack");v&&v[1].track._originMediaStreamTrack.stop(),await this.connection.muteLocal(p.map(T=>{let[,{id:C}]=T;return C}));const E=this.createMuteMessage(p);await Ln(this,Pt.RequestMuteLocal,E),s()}catch(p){l(p)}finally{h()}}),N(this,"handleUnmuteLocalTrack",async(o,s,l)=>{const h=await this.mutex.lock("Locking from P2PChannel.handleUnmuteLocalTrack");try{if(!this.connection||this.state!==fr.Connected)return void l(new Q(W.INVALID_OPERATION,"Cannot call P2PChannel.handleUnmuteLocalTrack before connection established."));const p=this.filterTobeUnmutedTracks(o);if(p.length===0)return void s();const v=p.find(T=>T[0]==="videoLowTrack");if(v){const T=v[1];if(T.track._originMediaStreamTrack.stop(),zn().supportDualStreamEncoding){const C=o._mediaStreamTrack.clone();T.track._mediaStreamTrack=C,T.track._originMediaStreamTrack=C}else{const C=u2(o,fu(this,Pt.RequestLowStreamParameter));T.track._mediaStreamTrack=C,T.track._originMediaStreamTrack=C}await new xe((C,I)=>{this.handleReplaceTrack(T.track,C,I,!0)})}await this.connection.unmuteLocal(p.map(T=>{let[,{id:C}]=T;return C}));const E=this.createUnmuteMessage(p);await Ln(this,Pt.RequestUnmuteLocal,E),s()}catch(p){l(p)}finally{h()}}),N(this,"handleUpdateVideoEncoder",async(o,s,l)=>{const h=await this.mutex.lock("Locking from P2PChannel.handleSetVideoEncoder");try{const p=this.localTrackMap.get(Le.LocalVideoTrack);if(!this.connection||!p||p.track!==o||this.state!==fr.Connected)return void s();const{id:v,track:E}=p;await this.connection.updateSendParameters(v,E),await this.connection.updateEncoderConfig(v,E),this.emit(Pt.UpdateVideoEncoder,E),s()}catch(p){l(p)}finally{h()}}),N(this,"handleSetOptimizationMode",async(o,s,l)=>{const h=await this.mutex.lock("Locking from P2PChannel.handleSetOptimizationMode");try{const p=this.localTrackMap.get(Le.LocalVideoTrack);if(!this.connection||!p||p.track!==o||this.state!==fr.Connected)return;const{id:v,track:E}=p;await this.connection.updateSendParameters(v,E),s()}catch(p){l(p)}finally{h()}}),N(this,"handleReplaceTrack",async(o,s,l,h)=>{let p;U.debug("[".concat(this.store.clientId,"] P2PChannel handleReplaceTrack for [track-id-").concat(o.getTrackId(),"]")),typeof h=="boolean"&&h||(p=await this.mutex.lock("From P2PChannel.handleReplaceTrack"));try{var v;const T=Array.from(this.localTrackMap.entries()).find(C=>{let[,{track:I}]=C;return o===I});if(!this.connection||!T||this.state!==fr.Connected)return void s();if(await((v=this.connection)===null||v===void 0?void 0:v.replaceTrack(o,T[1].id)),this.isPlanB){const C=T[1];C.id=o._mediaStreamTrack.id,this.localTrackMap.set(T[0],C)}if(T[0]===Le.LocalVideoTrack&&zn().supportDualStreamEncoding){const C=this.localTrackMap.get(Le.LocalVideoLowTrack);if(C){const I=o._mediaStreamTrack.clone();C.track._originMediaStreamTrack.stop(),C.track._mediaStreamTrack=I,C.track._originMediaStreamTrack=I,await new xe((L,V)=>{this.handleReplaceTrack(C.track,L,V,!0)})}}s()}catch(T){l(T)}finally{var E;(E=p)===null||E===void 0||E()}}),N(this,"handleGetLocalVideoStats",o=>{o(this.statsCollector.getLocalVideoTrackStats())}),N(this,"handleGetLocalAudioStats",o=>{o(this.statsCollector.getLocalAudioTrackStats())}),N(this,"handleGetRemoteVideoStats",o=>this.statsCollector.getRemoteVideoTrackStats(o.uid)[o.uid]),N(this,"handleGetRemoteAudioStats",o=>this.statsCollector.getRemoteAudioTrackStats(o.uid)[o.uid]),this.store=n,this.statsCollector=r,this.statsCollector.addP2PChannel(this),this.statsUploader=new VJ,this.bindStatsUploaderEvents(),this.isPlanB=!zn().supportUnifiedPlan||ie("CHROME_FORCE_PLAN_B")&&ru(),this.shouldForwardP2PCreation=ie("FORWARD_P2P_CREATION")&&zn().supportPCSetConfiguration,this.shouldForwardP2PCreation&&(this.connection=this.store.useDataChannel?new ll({},this.store):this.isPlanB?new Yp({},this.store):new fc({},this.store),this.bindConnectionEvents(this.connection))}async startP2PConnection(n,r){var o;this.state=fr.New;const s=this.shouldForwardP2PCreation&&((o=this.connection)===null||o===void 0?void 0:o.peerConnectionState)==="closed";if(this.shouldForwardP2PCreation&&!s||(s&&this.connection&&(U.warning("[".concat(this.store.clientId,"] P2PChannel.startP2PConnection ForwardP2P closed.")),this.connection.close(),this.unbindConnectionEvents(this.connection)),this.connection=this.store.useDataChannel?new ll(n,this.store):this.isPlanB?new Yp(n,this.store):new fc(n,this.store),this.bindConnectionEvents(this.connection)),!this.connection)throw new Q(W.UNEXPECTED_ERROR,"Cannot P2PChannel.startConnection before P2PConnection initialization .");return this._pcStatsUploadType=ie("NEW_ICE_RESTART")?rs.FIRST_CONNECTION:rs.OLD_FIRST_CONNECTION,this._isFirstConnected=!0,this._isInRestartIce=!1,this._isStartRestartIce=!1,this.connection.setConfiguration(n),this.connection.establishPromise}async connect(n,r,o,s,l,h){if(!this.connection)throw new Q(W.UNEXPECTED_ERROR,"Cannot P2PChannel.connect before P2PChannel.startP2PConnection .");this.connection instanceof ll?this.connection.updateRemoteConnect(s):(this.store.peerConnectionStart(),await this.connection.connect(n,r,o,s,l,h),this.statsUploader.startUploadTransportStats(),this.statsUploader.startUploadExtensionUsageStats(),this.state=fr.Connected)}async preConnect(n,r,o,s,l,h){if(!this.connection)throw new Q(W.UNEXPECTED_ERROR,"Cannot P2PChannel.connect before P2PChannel.startP2PConnection .");this.store.peerConnectionStart();const p=await this.connection.connect(n,r,o,s,l,h);return this.statsUploader.startUploadTransportStats(),this.statsUploader.startUploadExtensionUsageStats(),this.state=fr.Connected,p}getEstablishParams(){if(this.connection instanceof ll)return this.connection.getP2PConnectionParams();throw new Error("Only DataChannelConnection needs to obtain establishParams")}publish(n,r,o){var s=this;return Na(function*(){const l=yield It(s.mutex.lock("From P2PChannel.publish"));try{if(!s.connection||s.state!==fr.Connected){if(s.state===fr.Disconnected)throw new Q(W.UNEXPECTED_ERROR,"PeerConnection already disconnected.");s.throwIfTrackTypeNotMatch(n);const p=n.filter(v=>s.pendingLocalTracks.indexOf(v)===-1);return void(s.pendingLocalTracks=s.pendingLocalTracks.concat(p))}s.store.pubId=s.store.pubId+1,ra.markPublishStart(s.store.clientId,s.store.pubId);const h=s.filterTobePublishedTracks(n,r,o);if(h.length===0)return void(yield It(s.tryToUnmuteAudio(n)));yield*ag(x2(s.doPublish(s.connection,h)),It)}finally{l()}})()}doPublish(n,r){var o=this;return Na(function*(){r.forEach(T=>{let{track:C,type:I}=T;const L=Date.now();o.store.publish(C.getTrackId(),I===Le.LocalAudioTrack?"audio":"video",L)}),o.bindLocalTrackEvents(r);const s=yield It(n.send(r.map(T=>{let{track:C}=T;return C}),o.store.codec,o.store.audioCodec)),l=(yield It(s.next())).value,h=o.createGatewayPublishMessage(r,l);let p;try{p=yield h}catch(T){throw s.throw(T),(T==null?void 0:T.code)===W.WS_ABORT&&r.forEach(C=>{let{track:I}=C;o.pendingLocalTracks.indexOf(I)===-1&&o.pendingLocalTracks.push(I)}),o.unbindLocalTrackEvents(r),T}const v=o.mapPubResToRemoteConfig(h,p),E=(yield It(s.next(v))).value;r.forEach(T=>{let{type:C}=T;o.statsCollector.addLocalStats(C)}),o.assignLocalTracks(r,E),o.statsUploader.startUploadUplinkStats(),r.forEach(T=>{let{track:C,type:I}=T;const L=Date.now();o.store.publish(C.getTrackId(),I===Le.LocalAudioTrack?"audio":"video",void 0,L)})})()}publishLowStream(n){var r=this;return Na(function*(){if(!r.connection||r.state!==fr.Connected)return;const o=yield It(r.mutex.lock("Locking from P2PChannel.publishLowStream"));try{const l=r.localTrackMap.get(Le.LocalVideoTrack);if(!l)throw new Q(W.UNEXPECTED_ERROR,"Could not find high stream");if(r.localTrackMap.has(Le.LocalVideoLowTrack))throw new Q(W.UNEXPECTED_ERROR,"[".concat(r.store.clientId,"] Can't publish low stream when stream already publish"));const h=[{track:r.getLowVideoTrack(l.track,n),type:Le.LocalVideoLowTrack}];if(yield*ag(x2(r.doPublish(r.connection,h)),It),l.track.muted||!l.track.enabled){var s;const p=(s=r.localTrackMap.get(Le.LocalVideoLowTrack))===null||s===void 0?void 0:s.id;p!==void 0&&(yield It(r.connection.muteLocal([p])))}}finally{o()}})()}async republish(){this.pendingLocalTracks.length>0&&(U.debug("[".concat(this.store.clientId,"] Emit P2PChannelEvents.RequestRePublish to republish tracks.")),await ri(this,Pt.RequestRePublish,this.pendingLocalTracks),this.emit(Pt.MediaReconnectEnd,this.store.uid),this.pendingLocalTracks=[])}async reSubscribe(n){for(let r=this.pendingRemoteTracks.length-1;r>=0;r--){const{user:o,kind:s}=this.pendingRemoteTracks[r];(s!==dt.AUDIO||o._audio_added_&&o._audioSSRC)&&(s!==dt.VIDEO||o._video_added_&&o._videoSSRC)||this.pendingRemoteTracks.splice(r,1)}if(n)await ri(this,Pt.RequestReSubscribe,this.pendingRemoteTracks);else for(const{user:r,kind:o}of this.pendingRemoteTracks)await this.subscribe(r,o,o===dt.VIDEO?r._videoSSRC:r._audioSSRC);this.pendingRemoteTracks.forEach(r=>{let{user:o}=r;this.emit(Pt.MediaReconnectEnd,o.uid)}),this.pendingRemoteTracks=[]}async unpublish(n){if(!this.connection||this.state!==fr.Connected)return void n.forEach(s=>{const l=this.pendingLocalTracks.indexOf(s);l!==-1&&this.pendingLocalTracks.splice(l,1)});const r=this.filterTobeUnpublishedTracks(n);if(r.length===0)return;const o=r.find(s=>s[0]==="videoLowTrack");return o&&o[1].track.close(),this.doUnpublish(this.connection,r)}async unpublishLowStream(){if(!this.connection||this.state!==fr.Connected)return;const n=this.localTrackMap.get(Le.LocalVideoLowTrack);if(!n)return;n.track.close();const r=[[Le.LocalVideoLowTrack,n]];return this.doUnpublish(this.connection,r)}async doUnpublish(n,r){const o=this.createGatewayUnpublishMessage(r);return await n.stopSending(r.map(s=>{let[,{id:l}]=s;return l})),this.withdrawLocalTracks(r),this.unbindLocalTrackEvents(r.map(s=>{let[l,{track:h}]=s;return{type:l,track:h}})),r.forEach(s=>{let[l]=s;this.statsCollector.removeLocalStats(l)}),this.localTrackMap.size===0&&this.statsUploader.stopUploadUplinkStats(),o}async subscribe(n,r,o,s,l){var h;if(!this.connection||this.state!==fr.Connected)throw new Q(W.INVALID_OPERATION,"Cannot subscribe remote user when peerConnection disconnected.");if((h=this.remoteUserMap.get(n))!==null&&h!==void 0&&h.has(r))return;let p,v,E;if(l){const I=l.find(V=>{let{stream_type:Y}=V;return Y===r});if(!I)throw new Q(W.UNEXPECTED_ERROR,"Cannot subscribe to remote ".concat(r," for user: ").concat(n.uid," because subscribe answer from gateway does not contain stream_type: ").concat(r,"."));const L=await this.connection.receive(r,I.ssrcs,String(n._uintid),I.attributes);this.connection instanceof fc&&(E=L.transceiver),p=L.track,v=L.id}else{const I=await this.connection.receive(r,[{ssrcId:o,rtx:s}],String(n._uintid),void 0);this.connection instanceof fc&&(E=I.transceiver),p=I.track,v=I.id}r===dt.AUDIO?(n._audioTrack?n._audioTrack._updateOriginMediaStreamTrack(p):(n._audioTrack=new hg(p,n.uid,n._uintid,this.store),U.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote audio track: ").concat(n._audioTrack.getTrackId()))),E&&n._audioTrack._updateRtpTransceiver(E),this.bindRemoteTrackEvents(n,n._audioTrack)):(n._videoTrack?n._videoTrack._updateOriginMediaStreamTrack(p):(n._videoTrack=new dg(p,n.uid,n._uintid,this.store),U.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote video track: ").concat(n._videoTrack.getTrackId()))),E&&n._videoTrack._updateRtpTransceiver(E),this.bindRemoteTrackEvents(n,n._videoTrack));const T=this.remoteUserMap.get(n);T?T.set(r,v):this.remoteUserMap.set(n,new Map([[r,v]])),this.statsCollector.addRemoteStats(n.uid),this.statsUploader.startUploadDownlinkStats();const C=this.pendingRemoteTracks.findIndex(I=>{let{user:L,kind:V}=I;return L.uid===n.uid&&r===V});C!==-1&&(this.pendingRemoteTracks.splice(C,1),this.emit(Pt.MediaReconnectEnd,n.uid))}async massSubscribe(n){return this.massSubscribeNoLock(n)}async massSubscribeNoLock(n){if(!this.connection||this.state!==fr.Connected)throw new Q(W.INVALID_OPERATION,"Cannot subscribeAll remote users when peerConnection disconnected.");n=n.filter(o=>{var s;let{user:l,mediaType:h}=o;return!((s=this.remoteUserMap.get(l))!==null&&s!==void 0&&s.has(h))});const r=await this.connection.batchReceive(n.map(o=>{let{user:s,mediaType:l,ssrcId:h,rtxSsrcId:p}=o;return{kind:l,ssrcMsg:[{ssrcId:h,rtx:p}],mslabel:String(s._uintid)}}));n.forEach((o,s)=>{let{user:l,mediaType:h}=o;const{track:p,id:v,transceiver:E}=r[s];h===dt.AUDIO?(l._audioTrack?l._audioTrack._updateOriginMediaStreamTrack(p):(l._audioTrack=new hg(p,l.uid,l._uintid,this.store),U.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote audio track: ").concat(l._audioTrack.getTrackId()))),E&&l._audioTrack._updateRtpTransceiver(E),this.bindRemoteTrackEvents(l,l._audioTrack)):(l._videoTrack?l._videoTrack._updateOriginMediaStreamTrack(p):(l._videoTrack=new dg(p,l.uid,l._uintid,this.store),U.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote video track: ").concat(l._videoTrack.getTrackId()))),E&&l._videoTrack._updateRtpTransceiver(E),this.bindRemoteTrackEvents(l,l._videoTrack));const T=this.remoteUserMap.get(l);T?T.set(h,v):this.remoteUserMap.set(l,new Map([[h,v]])),this.statsCollector.addRemoteStats(l.uid),this.statsUploader.startUploadDownlinkStats();const C=this.pendingRemoteTracks.findIndex(I=>{let{user:L,kind:V}=I;return L.uid===l.uid&&h===V});C!==-1&&(this.pendingRemoteTracks.splice(C,1),this.emit(Pt.MediaReconnectEnd,l.uid))})}async unsubscribe(n,r,o){const s=this.pendingRemoteTracks.filter(p=>{let{user:v,kind:E}=p;return r!==void 0?v.uid===n.uid&&r===E:v.uid===n.uid});if(s.forEach(p=>{const v=this.pendingRemoteTracks.indexOf(p);this.pendingRemoteTracks.splice(v,1)}),this.connection&&this.state===fr.Connected||o||s.forEach(p=>{let{kind:v}=p;var E;if(v===dt.AUDIO)(E=n._audioTrack)===null||E===void 0||E._destroy(),n._audioTrack=void 0;else if(v===dt.VIDEO){var T;(T=n._videoTrack)===null||T===void 0||T._destroy(),n._videoTrack=void 0}}),!this.connection||this.state!==fr.Connected)return;const l=this.filterTobeUnSubscribedTracks(n,r);if(l.length===0)return;await this.connection.stopReceiving(l.map(p=>{let[,{id:v}]=p;return v}));const h=this.createUnsubscribeMessage(l);return this.withdrawRemoteTracks(l),this.remoteUserMap.size===0&&this.statsUploader.stopUploadDownlinkStats(),l.forEach(p=>{let[v,{kind:E}]=p;var T,C;if(E===dt.VIDEO&&v._videoSSRC&&((T=this.connection)===null||T===void 0||T.setStatsRemoteVideoIsReady(v._videoSSRC,!1)),E===dt.VIDEO)this.unbindRemoteTrackEvents(v._videoTrack),o||((C=v._videoTrack)===null||C===void 0||C._destroy(),v._videoTrack=void 0);else if(E===dt.AUDIO){var I;this.unbindRemoteTrackEvents(v._audioTrack),!o&&((I=v._audioTrack)===null||I===void 0||I._destroy(),v._audioTrack=void 0)}}),h}async massUnsubscribe(n){return this.massUnsubscribeNoLock(n)}async massUnsubscribeNoLock(n){let r=[];for(const{user:l,mediaType:h}of n){const p=this.pendingRemoteTracks.filter(v=>{let{user:E,kind:T}=v;return h!==void 0?E.uid===l.uid&&h===T:E.uid===l.uid});p.forEach(v=>{const E=this.pendingRemoteTracks.indexOf(v);this.pendingRemoteTracks.splice(E,1)}),r=r.concat(p)}if(!this.connection||this.state!==fr.Connected)return void r.forEach(l=>{let{user:h,kind:p}=l;var v;if(p===dt.AUDIO)(v=h._audioTrack)===null||v===void 0||v._destroy(),h._audioTrack=void 0;else if(p===dt.VIDEO){var E;(E=h._videoTrack)===null||E===void 0||E._destroy(),h._videoTrack=void 0}});const o=Yc(n).call(n,(l,h)=>{let{user:p,mediaType:v}=h;const E=this.filterTobeUnSubscribedTracks(p,v);return l.concat(E)},[]);if(o.length===0)return;await this.connection.stopReceiving(o.map(l=>{let[,{id:h}]=l;return h}));const s=this.createUnsubscribeAllMessage(o);return this.withdrawRemoteTracks(o),this.remoteUserMap.size===0&&this.statsUploader.stopUploadDownlinkStats(),o.forEach(l=>{let[h,{kind:p}]=l;var v,E;if(p===dt.VIDEO&&h._videoSSRC&&((v=this.connection)===null||v===void 0||v.setStatsRemoteVideoIsReady(h._videoSSRC,!1)),p===dt.VIDEO)this.unbindRemoteTrackEvents(h._videoTrack),(E=h._videoTrack)===null||E===void 0||E._destroy(),h._videoTrack=void 0;else if(p===dt.AUDIO){var T;this.unbindRemoteTrackEvents(h._audioTrack),(T=h._audioTrack)===null||T===void 0||T._destroy(),h._audioTrack=void 0}}),s}async muteRemote(n,r){if(!this.connection)return;const o=this.remoteUserMap.get(n);if(!o)return void U.warning("[".concat(this.store.clientId,"] P2PChannel.muteRemote has no remote user ").concat(n.uid,"."));if(!o.get(r))return void U.warning("[".concat(this.store.clientId,"] P2PChannel.muteRemote has no remote user ").concat(n.uid," media type ").concat(r,"."));const s=r===dt.VIDEO?n._videoSSRC:n._audioSSRC;s!==void 0&&this.connection.setStatsRemoteVideoIsReady(s,!1)}async unmuteRemote(n,r){return this.unmuteRemoteNoLock(n,r)}async unmuteRemoteNoLock(n,r){if(!this.connection)return;const o=this.remoteUserMap.get(n);if(!o)return void U.warning("[".concat(this.store.clientId,"] P2PChannel.unmuteRemote has no remote user ").concat(n.uid,"."));o.get(r)||U.warning("[".concat(this.store.clientId,"] P2PChannel.unmuteRemote has no remote user ").concat(n.uid," media type ").concat(r,"."))}getAllTracks(n){const r=this.localTrackMap.get(Le.LocalAudioTrack);if((r==null?void 0:r.track)instanceof to){const o=r.track;return Array.from(this.localTrackMap.entries()).filter(s=>{let[l]=s;return l!==Le.LocalAudioTrack}).filter(s=>{let[l]=s;return!(n&&l===Le.LocalVideoLowTrack)}).map(s=>{let[,{track:l}]=s;return l}).concat(o.trackList)}return Array.from(this.localTrackMap.entries()).filter(o=>{let[s]=o;return!(n&&s===Le.LocalVideoLowTrack)}).map(o=>{let[,{track:s}]=o;return s})}reportPublishEvent(n,r,o,s,l){if(n){const p=this.localTrackMap.get(Le.LocalAudioTrack),v=s?this.localTrackMap.get(Le.LocalVideoLowTrack):this.localTrackMap.get(Le.LocalVideoTrack);Me.publish(this.store.sessionId,{eventElapse:ra.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:n,ec:r,audioName:p==null?void 0:p.track.getTrackLabel(),videoName:v==null?void 0:v.track.getTrackLabel(),screenshare:(v==null?void 0:v.track._hints.indexOf(pr.SCREEN_TRACK))!==-1,audio:!!p,video:!!v,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:l})}else{var h;o||(o=[]);const p=o.find(E=>E instanceof ti),v=s?(h=this.localTrackMap.get(Le.LocalVideoTrack))===null||h===void 0?void 0:h.track:o.find(E=>E instanceof rr);Me.publish(this.store.sessionId,{eventElapse:ra.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:n,ec:r,audioName:p==null?void 0:p.getTrackLabel(),videoName:v==null?void 0:v.getTrackLabel(),screenshare:(v==null?void 0:v._hints.indexOf(pr.SCREEN_TRACK))!==-1,audio:!!p,video:!!v,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:l})}}reportSubscribeEvent(n,r,o,s){const l=s===dt.VIDEO?o._videoSSRC:o._audioSSRC;l&&Me.subscribe(this.store.sessionId,{succ:n,ec:r,video:s===dt.VIDEO,audio:s===dt.AUDIO,peerid:o.uid,subscribeRequestid:s===dt.VIDEO?o._videoSSRC:o._audioSSRC,p2pid:this.store.p2pId,eventElapse:ra.measureFromSubscribeStart(this.store.clientId,l)})}reset(){U.debug("[".concat(this.store.clientId,"] P2PChannel.reset")),this.mutex=new wi("P2PChannel-mutex"),this.connection&&(this.connection.close(),this.unbindConnectionEvents(this.connection),this.connection=void 0),this.shouldForwardP2PCreation&&(this.connection=this.store.useDataChannel?new ll({},this.store):this.isPlanB?new Yp({},this.store):new fc({},this.store),this.bindConnectionEvents(this.connection)),this.statsUploader.stopUploadUplinkStats(),this.statsUploader.stopUploadDownlinkStats(),this.statsUploader.stopUploadTransportStats(),this.statsUploader.stopUploadExtensionUsageStats(),this.unbindLocalTrackEvents(),this.unbindAllRemoteTrackEvents(),this.unbindRtpTransceiver();const n=this.localTrackMap.get(Le.LocalAudioTrack);if((n==null?void 0:n.track)instanceof to){if(n.track.trackList.length>0){const r=n.track;n.track.trackList.forEach(o=>{r.removeAudioTrack(o)})}n.track.close()}this.localTrackMap.clear(),this.remoteUserMap.clear(),this.statsCollector.removeRemoteStats(),this.statsCollector.removeLocalStats(),this.iceFailedCount=0,this.dtlsFailedCount=0,this.pendingLocalTracks=[],this.pendingRemoteTracks=[],this.state=fr.Disconnected}getStats(){var n;return(n=this.connection)===null||n===void 0?void 0:n.getStats()}getRemoteVideoIsReady(n){var r;return((r=this.connection)===null||r===void 0?void 0:r.getRemoteVideoIsReady(n))||!1}getLocalAudioVolume(){const n=this.localTrackMap.get(Le.LocalAudioTrack);if(n)return n.track.getVolumeLevel()}getLocalVideoSize(){const n=this.localTrackMap.get(Le.LocalVideoTrack);if(n)return{width:n.track._videoWidth||0,height:n.track._videoHeight||0}}getEncoderConfig(n){const r=this.localTrackMap.get(n);return r&&r.track instanceof rr||r&&r.track instanceof ti?r.track._encoderConfig:void 0}getLocalMedia(n){return this.localTrackMap.get(n)}hasLocalMedia(){return this.localTrackMap.size>0}hasRemoteMedia(n,r){if(!n)return this.remoteUserMap.size>0;const o=this.remoteUserMap.get(n);return!!o&&(!r||o.has(r))}async hasRemoteMediaWithLock(n,r){if(!n)return this.remoteUserMap.size>0;const o=this.remoteUserMap.get(n);return!!o&&(!r||o.has(r))}getRemoteMedia(n){var r;const o=Array.from(uu(r=this.remoteUserMap).call(r)).find(s=>s.uid===n);return o?{audioTrack:o.audioTrack,audioSSRC:o._audioSSRC,videoTrack:o.videoTrack,videoSSRC:o._videoSSRC}:{}}getAudioLevels(){let n=Array.from(this.remoteUserMap.entries()).map(o=>{let[s]=o;return{uid:s.uid,level:s.audioTrack?100*s.audioTrack._source.getAccurateVolumeLevel():0}});const r=this.localTrackMap.get(Le.LocalAudioTrack);return r&&n.push({level:100*r.track._source.getAccurateVolumeLevel(),uid:this.store.uid}),n=OS(n).call(n,(o,s)=>o.level-s.level),n}async disconnectForReconnect(){this.connection&&(U.debug("[".concat(this.store.clientId,"] P2PChannel.disconnectForReconnect closing P2PConnection")),this.state=fr.Reconnecting,ie("KEEP_LAST_FRAME")&&this.remoteUserMap.size!==0&&Array.from(this.remoteUserMap.entries()).forEach(n=>{let[r]=n;var o;r._videoTrack&&r._videoTrack._player&&((o=r._videoTrack._player.getVideoElement())===null||o===void 0||o.pause(),r._videoTrack._player.isKeepLastFrame=!0,r._videoTrack._originMediaStreamTrack.stop())}),this.connection.close(),this.unbindConnectionEvents(this.connection),this.connection=void 0,this.shouldForwardP2PCreation&&(this.connection=this.store.useDataChannel?new ll({},this.store):this.isPlanB?new Yp({},this.store):new fc({},this.store),this.bindConnectionEvents(this.connection)),this.localTrackMap.size!==0&&(Array.from(this.localTrackMap.entries()).forEach(n=>{let[r,{track:o}]=n;switch(r){case Le.LocalVideoTrack:o._hints.includes(pr.LOW_STREAM)?o.close():this.pendingLocalTracks.push(o);break;case Le.LocalAudioTrack:o instanceof to?this.pendingLocalTracks=this.pendingLocalTracks.concat(o.trackList):this.pendingLocalTracks.push(o);break;case Le.LocalVideoLowTrack:}}),this.emit(Pt.MediaReconnectStart,this.store.uid)),this.unbindLocalTrackEvents(),this.localTrackMap.clear(),this.remoteUserMap.size!==0&&Array.from(this.remoteUserMap.entries()).forEach(n=>{let[r,o]=n;Array.from(uu(o).call(o)).forEach(s=>{this.setPendingRemoteMedia(r,s)}),this.emit(Pt.MediaReconnectStart,r.uid)}),this.unbindAllRemoteTrackEvents(),this.remoteUserMap.clear(),this.statsUploader.stopUploadUplinkStats(),this.statsUploader.stopUploadDownlinkStats(),this.statsUploader.stopUploadTransportStats(),U.debug("[".concat(this.store.clientId,"] P2PChannel disconnected, waiting to reconnect.")))}hasPendingRemoteMedia(n,r){for(const o of this.pendingRemoteTracks){const{user:s,kind:l}=o;if((n instanceof mC?n.uid:n)===s.uid&&r===l)return!0}return!1}setPendingRemoteMedia(n,r){this.hasPendingRemoteMedia(n,r)||this.pendingRemoteTracks.push({user:n,kind:r})}restartICE(n){var r=this;return Na(function*(){if(!r.connection||r.state!==fr.Connected||r.connection instanceof ll)return;const o=yield It(r.mutex.lock("From P2PChannel.restartICE"));let s;try{s=yield It(r.connection.restartICE(n));const h=yield It(s.next());if(h.done)return;const p=h.value,v=yield p;switch(r.reportPCDisconnectedOrFailed(n),n){case Vr.TCP:r._pcStatsUploadType=rs.TCP_RESTART;break;case Vr.RELAY:r._pcStatsUploadType=rs.RELAY_RESTART;break;default:r._pcStatsUploadType=rs.OLD_RESTART}r._isInRestartIce=!0,s.next(v)}catch(h){var l;(l=s)===null||l===void 0||l.throw(h)}finally{o()}})()}getUplinkNetworkQuality(){if(!this.connection)return 0;const n=this.connection.getStats(),r=this.localTrackMap.get(Le.LocalVideoTrack),o=this.localTrackMap.get(Le.LocalAudioTrack),s=n.videoSend.find(V=>V.ssrc===(r==null?void 0:r.ssrcs[0].ssrcId)),l=n.audioSend.find(V=>V.ssrc===(o==null?void 0:o.ssrcs[0].ssrcId));if(!s||!l)return 1;const h=Aa(this,Pt.NeedSignalRTT),p=s?s.rttMs:void 0,v=l?l.rttMs:void 0,E=p&&v?(p+v)/2:p||v,T=(E&&h?(E+h)/2:E||h)||0,C=100*n.sendPacketLossRate*.7/50+.3*T/1500,I=C<.17?1:C<.36?2:C<.59?3:C<.1?4:5,L=r==null?void 0:r.track;if(L&&L._encoderConfig&&L._hints.indexOf(pr.SCREEN_TRACK)===-1){const V=L._encoderConfig.bitrateMax,Y=n.bitrate.actualEncoded;if(V&&Y){const q=(1e3*V-Y)/(1e3*V);return _Y[q<.15?0:q<.3?1:q<.45?2:q<.6?3:4][I]}}return I}getDownlinkNetworkQuality(){if(!this.connection)return 0;const n=this.connection.getStats();let r=0;return Array.from(this.remoteUserMap.entries()).forEach(o=>{let[s]=o;const l=s._audioSSRC,h=s._videoSSRC,p=n.audioRecv.find(Y=>Y.ssrc===l),v=n.videoRecv.find(Y=>Y.ssrc===h);if(!p&&!v)return void(r+=1);const E=Aa(this,Pt.NeedSignalRTT),T=n.rtt,C=(T&&E?(T+E)/2:T||E)||0,I=p?p.jitterMs:void 0,L=n.recvPacketLossRate;let V=.7*L*100/50+.3*C/1500;I&&(V=.6*L*100/50+.2*C/1500+.2*I/400),r+=V<.1?1:V<.17?2:V<.36?3:V<.59?4:5}),this.remoteUserMap.size>0?Math.round(r/this.remoteUserMap.size):r}async muteLocalTrack(n){return new xe((r,o)=>{this.handleMuteLocalTrack(n,r,o)})}filterTobePublishedTracks(n,r,o){const s=[],l=zn(),h=this.getAllTracks();n=BD(n=n.filter(E=>h.indexOf(E)===-1));let p=!1,v=!1;for(const E of n){if(E instanceof rr&&(this.localTrackMap.has(Le.LocalVideoTrack)||p?new Q(W.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS).throw():(s.push({track:E,type:Le.LocalVideoTrack}),p=!0),r)){const T=this.getLowVideoTrack(E,o);s.push({track:T,type:Le.LocalVideoLowTrack})}if(E instanceof ti){const T=this.localTrackMap.get(Le.LocalAudioTrack);if(T){if(!(T.track instanceof to))throw new Q(W.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing");if(E._bypassWebAudio)throw new Q(W.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");T.track.addAudioTrack(E),this.bindLocalAudioTrackEvents(E,!0)}else if(v){const C=s.find(I=>{let{type:L}=I;return L===Le.LocalAudioTrack});if(!(C.track instanceof to))throw new Q(W.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing");if(E._bypassWebAudio)throw new Q(W.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");C.track.addAudioTrack(E)}else{if(!l.webAudioMediaStreamDest||E instanceof to||E._bypassWebAudio)s.push({track:E,type:Le.LocalAudioTrack});else{const C=new to;C.addAudioTrack(E),s.push({track:C,type:Le.LocalAudioTrack})}v=!0}}}return s}filterTobeUnpublishedTracks(n){const r=[],o=this.getAllTracks();n=BD(n=n.filter(s=>o.indexOf(s)!==-1));for(const s of n){if(s instanceof ti){const l=this.localTrackMap.get(Le.LocalAudioTrack);if(!l)continue;l.track instanceof to?(l.track.removeAudioTrack(s),this.unbindLocalAudioTrackEvents(s),l.track.trackList.length===0&&(r.push([Le.LocalAudioTrack,l]),l.track.close())):r.push([Le.LocalAudioTrack,l])}if(s instanceof rr){const l=this.localTrackMap.get(Le.LocalVideoTrack);if(!l)continue;r.push([Le.LocalVideoTrack,l]);const h=this.localTrackMap.get(Le.LocalVideoLowTrack);h&&r.push([Le.LocalVideoLowTrack,h])}}return r}bindLocalTrackEvents(n){n.forEach(r=>{let{track:o,type:s}=r;switch(s){case Le.LocalVideoTrack:o.addListener(Ze.GET_STATS,this.handleGetLocalVideoStats),o.addListener(Ze.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),o.addListener(Ze.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),o.addListener(Ze.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),o.addListener(Ze.SET_OPTIMIZATION_MODE,this.handleSetOptimizationMode),o.addListener(Ze.NEED_REPLACE_TRACK,this.handleReplaceTrack),o.addListener(Ze.NEED_MUTE_TRACK,this.handleMuteLocalTrack),o.addListener(Ze.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case Le.LocalAudioTrack:this.bindLocalAudioTrackEvents(o);break;case Le.LocalVideoLowTrack:}})}bindLocalAudioTrackEvents(n,r){n instanceof to?n.trackList.forEach(o=>{o.addListener(Ze.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),o.addListener(Ze.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),o.addListener(Ze.GET_STATS,this.handleGetLocalAudioStats),o.addListener(Ze.NEED_MUTE_TRACK,this.handleMuteLocalTrack),o.addListener(Ze.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)}):(n.addListener(Ze.GET_STATS,this.handleGetLocalAudioStats),n.addListener(Ze.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),n.addListener(Ze.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),n.addListener(Ze.NEED_MUTE_TRACK,this.handleMuteLocalTrack),n.addListener(Ze.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack),r||n.addListener(Ze.NEED_REPLACE_TRACK,this.handleReplaceTrack))}unbindLocalTrackEvents(n){n||(n=Array.from(this.localTrackMap.entries()).map(r=>{let[o,{track:s}]=r;return{track:s,type:o}})),n.forEach(r=>{let{track:o,type:s}=r;switch(s){case Le.LocalVideoTrack:o.off(Ze.GET_STATS,this.handleGetLocalVideoStats),o.off(Ze.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),o.off(Ze.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),o.off(Ze.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),o.off(Ze.SET_OPTIMIZATION_MODE,this.handleSetOptimizationMode),o.off(Ze.NEED_REPLACE_TRACK,this.handleReplaceTrack),o.off(Ze.NEED_MUTE_TRACK,this.handleMuteLocalTrack),o.off(Ze.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case Le.LocalAudioTrack:this.unbindLocalAudioTrackEvents(o);break;case Le.LocalVideoLowTrack:}})}unbindLocalAudioTrackEvents(n){n instanceof to?n.trackList.forEach(r=>{r.off(Ze.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),r.off(Ze.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),r.off(Ze.GET_STATS,this.handleGetLocalAudioStats),r.off(Ze.NEED_MUTE_TRACK,this.handleMuteLocalTrack),r.off(Ze.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)}):(n.off(Ze.GET_STATS,this.handleGetLocalAudioStats),n.off(Ze.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),n.off(Ze.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),n.off(Ze.NEED_REPLACE_TRACK,this.handleReplaceTrack),n.off(Ze.NEED_MUTE_TRACK,this.handleMuteLocalTrack),n.off(Ze.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack))}bindRemoteTrackEvents(n,r){r instanceof dg&&r.addListener(Ze.GET_STATS,o=>{o(this.handleGetRemoteVideoStats(n))}),r instanceof hg&&r.addListener(Ze.GET_STATS,o=>{o(this.handleGetRemoteAudioStats(n))})}unbindRemoteTrackEvents(n){n&&n.removeAllListeners(Ze.GET_STATS)}unbindAllRemoteTrackEvents(){Array.from(this.remoteUserMap.entries()).forEach(n=>{let[r,o]=n;o.has(dt.AUDIO)&&this.unbindRemoteTrackEvents(r._audioTrack),o.has(dt.VIDEO)&&this.unbindRemoteTrackEvents(r._videoTrack)})}createGatewayPublishMessage(n,r){return n.map((o,s)=>{let l,h,{track:p,type:v}=o;switch(v){case Le.LocalAudioTrack:l=cr.Audio,h={dtx:p instanceof G0&&p._config.DTX,hq:!1,lq:!1,stereo:!1,speech:!1};break;case Le.LocalVideoTrack:l=p._hints.includes(pr.SCREEN_TRACK)?cr.Screen:cr.High,h=ul(ul({},UD(p)),{},{codec:this.store.codec});break;case Le.LocalVideoLowTrack:l=cr.Low,h=ul(ul({},UD(p)),{},{codec:this.store.codec})}return{stream_type:l,attributes:h,ssrcs:r[s]}})}createGatewayUnpublishMessage(n){return n.map(r=>{let o,[s,{track:l,ssrcs:h,id:p}]=r;switch(s){case Le.LocalVideoTrack:o=l._hints.includes(pr.SCREEN_TRACK)?cr.Screen:cr.High;break;case Le.LocalAudioTrack:o=cr.Audio;break;case Le.LocalVideoLowTrack:o=cr.Low}return{stream_type:o,ssrcs:h,mid:p}})}assignLocalTracks(n,r){n.forEach((o,s)=>{let{track:l,type:h}=o;this.localTrackMap.set(h,{track:l,id:r[s].id,ssrcs:r[s].localSSRC})})}withdrawLocalTracks(n){n.forEach(r=>{let[o]=r;this.localTrackMap.delete(o)})}bindConnectionEvents(n){n.onConnectionStateChange=async r=>{if(U.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onConnectionStateChange(").concat(r,")")),this.emit(Pt.PeerConnectionStateChange,r),r!=="connected"||this.store.keyMetrics.peerConnectionEnd||this.store.peerConnectionEnd(),r==="connected"&&(this._restartTimer&&(clearTimeout(this._restartTimer),this._restartTimer=void 0),(this._isFirstConnected||this._isInRestartIce)&&this.reportPCStats(Date.now(),!0,this._pcStatsUploadType),this._isInRestartIce=!1,this._isFirstConnected=!1,this._isStartRestartIce=!1),ie("NEW_ICE_RESTART")){if(this._restartStates.includes(r)){if(this._isStartRestartIce)return;this._isStartRestartIce=!0;const o=h=>{(n.iceConnectionState==="disconnected"||n.iceConnectionState==="checking"||n.iceConnectionState==="failed")&&(U.debug("[".concat(this.store.clientId,"] [P2PChannel] start use restartICE, type is ").concat(h)),Aa(this,Pt.QueryClientConnectionState)==="CONNECTED"&&this.emit(Pt.RequestRestartICE,h))},s=()=>{n.iceConnectionState!=="disconnected"&&n.iceConnectionState!=="checking"&&n.iceConnectionState!=="failed"||(this.reportPCStats(Date.now(),!1,this._pcStatsUploadType),U.debug("[".concat(this.store.clientId,"] P2PConnection disconnected timeout, force reconnect")),setTimeout(()=>this.emit(Pt.P2PLost),0),this.iceFailedCount+=1,this.requestReconnect())},l=ie("ICE_RESTART_INTERVAL");return void(this._restartTimer=window.setTimeout(()=>{if(ie("JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE")&&zn().supportPCSetConfiguration)o(Vr.RELAY),this._restartTimer=window.setTimeout(s,l);else if(Pn())o(Vr.UDP),this._restartTimer=window.setTimeout(s,4e3);else{if(o(Vr.TCP),zn().supportPCSetConfiguration)return void(this._restartTimer=window.setTimeout(()=>{o(Vr.RELAY),this._restartTimer=window.setTimeout(s,l)},l));this._restartTimer=window.setTimeout(s,l)}},800))}}else{if(r==="disconnected"&&n.iceConnectionState==="disconnected")return setTimeout(()=>{n.iceConnectionState==="disconnected"&&ie("ICE_RESTART")&&Aa(this,Pt.QueryClientConnectionState)==="CONNECTED"&&this.emit(Pt.RequestRestartICE)},800),void setTimeout(()=>{n.peerConnectionState==="disconnected"&&(U.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection disconnected timeout 4000ms, force reconnect")),this.reportPCStats(Date.now(),!1,this._pcStatsUploadType),this._isInRestartIce=!1,setTimeout(()=>this.emit(Pt.P2PLost),0),this.iceFailedCount+=1,this.requestReconnect())},4e3);r==="failed"&&(U.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection state failed, force reconnect")),this.reportPCDisconnectedOrFailed(),setTimeout(()=>this.emit(Pt.P2PLost),0),this.iceFailedCount+=1,await this.requestReconnect())}},n.onICEConnectionStateChange=r=>{r!=="connected"||this.store.keyMetrics.iceConnectionEnd||this.store.iceConnectionEnd(),U.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICEConnectionStateChange(").concat(r,")")),Me.reportApiInvoke(this.store.sessionId,{name:"ICEConnectionStateChange",options:r,tag:bn.TRACER}).onSuccess(),this.emit(Pt.IceConnectionStateChange,r)},n.onICETransportStateChange=r=>{U.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICETransportStateChange(").concat(r,")"))},n.onDTLSTransportStateChange=r=>{U.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportStateChange(").concat(r,")"))},n.onDTLSTransportError=r=>{U.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportError(").concat(r,")"))},n.onFirstAudioDecoded=r=>{var o;const s=Array.from(uu(o=this.remoteUserMap).call(o)).find(h=>h._audioSSRC===r);var l;s&&(this.store.subscribe(s.uid,"audio",void 0,void 0,void 0,Date.now()),(l=s.audioTrack)===null||l===void 0||l.emit(wd.FIRST_FRAME_DECODED),Me.firstRemoteFrame(this.store.sessionId,Fr.FIRST_AUDIO_DECODE,In.FIRST_AUDIO_DECODE,{peer:s._uintid,subscribeElapse:ra.measureFromSubscribeStart(this.store.clientId,r),subscribeRequestid:r,p2pid:this.store.p2pId}))},n.onFirstAudioReceived=r=>{var o;const s=Array.from(uu(o=this.remoteUserMap).call(o)).find(l=>l._audioSSRC===r);s&&Me.firstRemoteFrame(this.store.sessionId,Fr.FIRST_AUDIO_RECEIVED,In.FIRST_AUDIO_RECEIVED,{peer:s._uintid,subscribeElapse:ra.measureFromSubscribeStart(this.store.clientId,r),subscribeRequestid:r,p2pid:this.store.p2pId})},n.onFirstVideoDecoded=(r,o,s)=>{this.reportVideoFirstFrameDecoded(r,o,s)},n.onFirstVideoReceived=r=>{var o;const s=Array.from(uu(o=this.remoteUserMap).call(o)).find(l=>l._videoSSRC===r);s&&Me.firstRemoteFrame(this.store.sessionId,Fr.FIRST_VIDEO_RECEIVED,In.FIRST_VIDEO_RECEIVED,{peer:s._uintid,subscribeElapse:ra.measureFromSubscribeStart(this.store.clientId,r),subscribeRequestid:r,p2pid:this.store.p2pId})},n.onSelectedLocalCandidateChanged=(r,o)=>{const s=r.candidateType==="relay",l=o.candidateType==="relay";o.candidateType!=="unknown"&&s===l||this.emit(Pt.ConnectionTypeChange,s),U.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.SelectedLocalCandidateChanged(").concat(JSON.stringify(Y0(o))," -> ").concat(JSON.stringify(Y0(r)),")"))},n.onSelectedRemoteCandidateChanged=(r,o)=>{U.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.SelectedRemoteCandidateChanged(").concat(JSON.stringify(Y0(o))," -> ").concat(JSON.stringify(Y0(r)),")"))},n.onFirstVideoDecodedTimeout=r=>{this.reportVideoFirstFrameDecoded(r,void 0,void 0,!0)}}unbindConnectionEvents(n){n.onConnectionStateChange=void 0,n.onICEConnectionStateChange=void 0,n.onICETransportStateChange=void 0,n.onDTLSTransportStateChange=void 0,n.onDTLSTransportError=void 0,n.onFirstAudioDecoded=void 0,n.onFirstAudioReceived=void 0,n.onFirstVideoDecoded=void 0,n.onFirstVideoReceived=void 0,n.onSelectedLocalCandidateChanged=void 0,n.onSelectedRemoteCandidateChanged=void 0,n.onFirstVideoDecodedTimeout=void 0}filterTobeMutedTracks(n){const r=[];if(this.getAllTracks().indexOf(n)===-1)return r;const o=this.localTrackMap.get(Le.LocalAudioTrack);if(n instanceof ti&&(o==null?void 0:o.track)instanceof to)return o.track.isActive||r.push([Le.LocalAudioTrack,o]),r;const s=Array.from(this.localTrackMap.entries()).find(l=>{let[,{track:h}]=l;return n===h});if(s&&(r.push(s),s[0]===Le.LocalVideoTrack)){const l=this.localTrackMap.get(Le.LocalVideoLowTrack);l&&r.push([Le.LocalVideoLowTrack,l])}return r}filterTobeUnmutedTracks(n){const r=[],o=this.localTrackMap.get(Le.LocalAudioTrack);if(n instanceof ti&&(o==null?void 0:o.track)instanceof to)return o.track.isActive&&r.push([Le.LocalAudioTrack,o]),r;const s=Array.from(this.localTrackMap.entries()).find(l=>{let[,{track:h}]=l;return n===h});if(s)if(s[0]===Le.LocalVideoTrack){r.push(s);const l=this.localTrackMap.get(Le.LocalVideoLowTrack);l&&r.push([Le.LocalVideoLowTrack,l])}else r.push(s);return r}createMuteMessage(n){return n.map(r=>{let o,[s,{track:l,ssrcs:h,id:p}]=r;switch(s){case Le.LocalAudioTrack:o=cr.Audio;break;case Le.LocalVideoTrack:o=l._hints.includes(pr.SCREEN_TRACK)?cr.Screen:cr.High;break;case Le.LocalVideoLowTrack:o=cr.Low}return{stream_type:o,ssrcs:h,mid:p}})}createUnmuteMessage(n){return n.map(r=>{let o,[s,{track:l,ssrcs:h,id:p}]=r;switch(s){case Le.LocalAudioTrack:o=cr.Audio;break;case Le.LocalVideoTrack:o=l._hints.includes(pr.SCREEN_TRACK)?cr.Screen:cr.High;break;case Le.LocalVideoLowTrack:o=cr.Low}return{stream_type:o,ssrcs:h,mid:p}})}filterTobeUnSubscribedTracks(n,r){const o=[],s=this.remoteUserMap.get(n);if(!s)return o;if(r){const l=s.get(r);if(!l)return o;o.push([n,{kind:r,id:l}])}else Array.from(s.entries()).forEach(l=>{let[h,p]=l;o.push([n,{kind:h,id:p}])});return o}createUnsubscribeMessage(n){const r=[];return n.forEach(o=>{let[s,{kind:l,id:h}]=o;switch(l){case dt.VIDEO:return void(s._videoSSRC&&r.push({stream_type:dt.VIDEO,ssrcId:s._videoSSRC}));case dt.AUDIO:return void(s._audioSSRC&&r.push({stream_type:dt.AUDIO,ssrcId:s._audioSSRC}))}}),r}createUnsubscribeAllMessage(n){const r=new Map;return n.forEach(o=>{let[s,{kind:l}]=o;if(r.has(s)){let h=r.get(s);l===dt.VIDEO?h|=er.Video:h|=er.Audio,r.set(s,h)}else l===dt.VIDEO?r.set(s,er.Video):r.set(s,er.Audio)}),{users:Array.from(r.entries()).map(o=>{let[s,l]=o;return{stream_id:s.uid,stream_type:l}})}}withdrawRemoteTracks(n){n.forEach(r=>{let[o,{kind:s}]=r;const l=this.remoteUserMap.get(o);l&&(l.delete(s),Array.from(l.entries()).length===0&&this.remoteUserMap.delete(o))})}async updateBitrateLimit(n){const r=this.localTrackMap.get(Le.LocalVideoTrack),o=this.localTrackMap.get(Le.LocalVideoLowTrack);r&&await r.track.setBitrateLimit(n.uplink),o&&n.low_stream_uplink&&await o.track.setBitrateLimit({max_bitrate:n.low_stream_uplink.bitrate,min_bitrate:n.low_stream_uplink.bitrate||0})}isP2PDisconnected(){return this.connection?this.connection.peerConnectionState!=="connected":!0}mapPubResToRemoteConfig(n,r){return n.map((o,s)=>{var l;let{stream_type:h}=o;return(l=r.find(p=>{let{stream_type:v}=p;return h===v}))===null||l===void 0?void 0:l.attributes})}async tryToUnmuteAudio(n){for(let o=0;o<n.length;o++)if(n[o]instanceof ti){var r;const s=this.filterTobeUnmutedTracks(n[o]);if(s.length===0)continue;await((r=this.connection)===null||r===void 0?void 0:r.unmuteLocal(s.map(h=>{let[,{id:p}]=h;return p})));const l=this.createUnmuteMessage(s);return void await Ln(this,Pt.RequestUnmuteLocal,l)}}bindStatsUploaderEvents(){this.statsUploader.requestStats=()=>this.getStats(),this.statsUploader.requestLocalMedia=()=>Array.from(this.localTrackMap.entries()),this.statsUploader.requestRemoteMedia=()=>Array.from(this.remoteUserMap.entries()),this.statsUploader.requestVideoIsReady=n=>{var r;return!((r=this.connection)===null||r===void 0||!r.getRemoteVideoIsReady(n))},this.statsUploader.requestUpload=(n,r)=>this.emit(Pt.RequestUploadStats,n,r),this.statsUploader.requestAllTracks=()=>this.getAllTracks()}unbindStatsUploaderEvents(){this.statsUploader.requestStats=void 0,this.statsUploader.requestLocalMedia=void 0,this.statsUploader.requestRemoteMedia=void 0,this.statsUploader.requestVideoIsReady=void 0}async requestReconnect(){this.dtlsFailedCount+=1,await ni(ES(this.dtlsFailedCount,Qn)),this.emit(Pt.RequestReconnect)}async reconnectP2P(){const n=Array.from(this.localTrackMap.entries()),r=this.createGatewayUnpublishMessage(n);Array.from(this.remoteUserMap.entries()),r.length>0&&await ri(this,Pt.RequestUnpublishForReconnectPC,r),this.disconnectForReconnect(),this.emit(Pt.RequestReconnectPC)}canPublishLowStream(){return this.localTrackMap.has(Le.LocalVideoTrack)||this.pendingLocalTracks.some(n=>n instanceof rr)}throwIfTrackTypeNotMatch(n){if(n.filter(r=>r instanceof rr).length>1)throw new Q(W.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(n.filter(r=>r instanceof ti).length>1&&(n.some(r=>r instanceof ti&&r._bypassWebAudio)||!zn().webAudioMediaStreamDest))throw new Q(W.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode");for(const r of n){if(r instanceof rr&&this.pendingLocalTracks.some(o=>o instanceof rr))throw new Q(W.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(r instanceof ti&&this.pendingLocalTracks.some(o=>o instanceof ti)&&(!zn().webAudioMediaStreamDest||r._bypassWebAudio||this.pendingLocalTracks.some(o=>o instanceof ti&&o._bypassWebAudio)))throw new Q(W.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode")}}getLowVideoTrack(n,r){const o=zn().supportDualStreamEncoding,s=ul(ul({},{width:160,height:120,framerate:15,bitrate:50}),r);let l;l=o?n._mediaStreamTrack.clone():u2(n,s);const h=pn(8,"track-low-"),p=new rr(l,ul(ul({},o&&{scaleResolutionDownBy:CX(s,n)}),{},{frameRate:s.framerate,bitrateMax:s.bitrate,bitrateMin:s.bitrate}),void 0,void 0,h);return p.on(Pp.TRANSCEIVER_UPDATED,v=>{n._updateRtpTransceiver(v,Id.LOW_STREAM)}),p._hints.push(pr.LOW_STREAM),n.addListener(Ze.NEED_CLOSE,()=>{p.close()}),p}async globalLock(){return this.mutex.lock("From P2PChannel.globalLock")}async reportPCStats(n,r,o){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;if(this.connection&&this.connection instanceof fc){var l,h,p,v;const E=this.store.keyMetrics.descriptionStart||0,{iceConnectionState:T,dtlsTransportState:C,peerConnectionState:I}=this.connection,{local:L,remote:V}=await this.connection.getSelectedCandidatePair();Me.pcStats(this.store.sessionId,{startTime:E,eventElapse:n-E||0,iceconnectionsate:T,dtlsstate:C,connectionstate:I,intSucc:r?1:2,error:s,selectedLocalCandidateProtocol:(l=L==null?void 0:L.protocol)!==null&&l!==void 0?l:"",selectedLocalCandidateType:(h=L.candidateType)!==null&&h!==void 0?h:"",selectedLocalCandidateAddress:"".concat(L.address,":").concat(L.port),selectedRemoteCandidateProtocol:(p=V.protocol)!==null&&p!==void 0?p:"",selectedRemoteCandidateType:(v=V.candidateType)!==null&&v!==void 0?v:"",selectedRemoteCandidateAddress:"".concat(V.address,":").concat(V.port),restartCnt:o})}}reportVideoFirstFrameDecoded(n,r,o,s){var l;const h=Array.from(uu(l=this.remoteUserMap).call(l)).find(p=>p._videoSSRC===n);if(h){s||this.store.subscribe(h.uid,"video",void 0,void 0,void 0,void 0,Date.now());const p=this.store.keyMetrics,v=p.subscribe.find(E=>E.userId===h.uid&&E.type==="video");Me.firstRemoteVideoDecode(this.store.sessionId,Fr.FIRST_VIDEO_DECODE,In.FIRST_VIDEO_DECODE,{peer:h._uintid,videowidth:r,videoheight:o,subscribeElapse:ra.measureFromSubscribeStart(this.store.clientId,n),subscribeRequestid:n,p2pid:this.store.p2pId,apEnd:p.requestAPEnd||0,apStart:p.requestAPStart||0,joinGwEnd:p.joinGatewayEnd||0,joinGwStart:p.joinGatewayStart||0,pcEnd:p.peerConnectionEnd||0,pcStart:p.peerConnectionStart||0,subscriberEnd:(v==null?void 0:v.subscribeEnd)||0,subscriberStart:(v==null?void 0:v.subscribeStart)||0,videoAddNotify:(v==null?void 0:v.streamAdded)||0,state:s?1:0})}}async remoteMediaSsrcChanged(n,r,o){if(!this.connection)return!1;const s=this.remoteUserMap.get(n);if(!s)return!1;const l=s.get(r);if(!l)return!1;const h=await this.connection.getRemoteSSRC(l);return h!==void 0&&h!==o}resetConnection(n){U.debug("[".concat(this.store.clientId,"] [P2PChannel] reset connection to ").concat(n)),this.state===fr.Connected?(U.debug("[".concat(this.store.clientId,"] [P2PChannel] fallback to websocket but P2PChannel state still connected, disconnect first")),this.disconnectForReconnect()):(this.connection&&(this.connection.close(),this.unbindConnectionEvents(this.connection),this.connection=void 0),this.shouldForwardP2PCreation&&(this.connection=n===U0.datachannel?new ll({},this.store):this.isPlanB?new Yp({},this.store):new fc({},this.store),this.bindConnectionEvents(this.connection)))}unbindRtpTransceiver(){this.localTrackMap.size!==0&&Array.from(this.localTrackMap.entries()).forEach(n=>{let[r,{track:o}]=n;r===Le.LocalVideoLowTrack?o._updateRtpTransceiver(void 0,Id.LOW_STREAM):o._updateRtpTransceiver(void 0)})}reportPCDisconnectedOrFailed(n){this.connection&&this.connection instanceof fc&&(this.connection.iceConnectionState!=="disconnected"&&this.connection.iceConnectionState!=="checking"&&this.connection.iceConnectionState!=="failed"||(this._isFirstConnected?(this.reportPCStats(Date.now(),!1,this._pcStatsUploadType),this._isFirstConnected=!1):this._pcStatsUploadType===rs.TCP_RESTART&&n===Vr.RELAY?this.reportPCStats(Date.now(),!1,this._pcStatsUploadType):this.reportPCStats(Date.now(),!1,rs.DISCONNECTED_OR_FAILED)))}}).prototype,"startP2PConnection",[_o],Object.getOwnPropertyDescriptor(Ft.prototype,"startP2PConnection"),Ft.prototype),_e(Ft.prototype,"connect",[_o],Object.getOwnPropertyDescriptor(Ft.prototype,"connect"),Ft.prototype),_e(Ft.prototype,"preConnect",[_o],Object.getOwnPropertyDescriptor(Ft.prototype,"preConnect"),Ft.prototype),_e(Ft.prototype,"unpublish",[_o],Object.getOwnPropertyDescriptor(Ft.prototype,"unpublish"),Ft.prototype),_e(Ft.prototype,"unpublishLowStream",[_o],Object.getOwnPropertyDescriptor(Ft.prototype,"unpublishLowStream"),Ft.prototype),_e(Ft.prototype,"subscribe",[_o],Object.getOwnPropertyDescriptor(Ft.prototype,"subscribe"),Ft.prototype),_e(Ft.prototype,"massSubscribe",[_o],Object.getOwnPropertyDescriptor(Ft.prototype,"massSubscribe"),Ft.prototype),_e(Ft.prototype,"unsubscribe",[_o],Object.getOwnPropertyDescriptor(Ft.prototype,"unsubscribe"),Ft.prototype),_e(Ft.prototype,"massUnsubscribe",[_o],Object.getOwnPropertyDescriptor(Ft.prototype,"massUnsubscribe"),Ft.prototype),_e(Ft.prototype,"muteRemote",[_o],Object.getOwnPropertyDescriptor(Ft.prototype,"muteRemote"),Ft.prototype),_e(Ft.prototype,"unmuteRemote",[_o],Object.getOwnPropertyDescriptor(Ft.prototype,"unmuteRemote"),Ft.prototype),_e(Ft.prototype,"hasRemoteMediaWithLock",[_o],Object.getOwnPropertyDescriptor(Ft.prototype,"hasRemoteMediaWithLock"),Ft.prototype),_e(Ft.prototype,"disconnectForReconnect",[_o],Object.getOwnPropertyDescriptor(Ft.prototype,"disconnectForReconnect"),Ft.prototype),_e(Ft.prototype,"updateBitrateLimit",[_o],Object.getOwnPropertyDescriptor(Ft.prototype,"updateBitrateLimit"),Ft.prototype),_e(Ft.prototype,"remoteMediaSsrcChanged",[_o],Object.getOwnPropertyDescriptor(Ft.prototype,"remoteMediaSsrcChanged"),Ft.prototype),Ft);function _o(n,r,o){const s=n[r];if(typeof s!="function")throw new Error("Cannot use mutex on object property.");return o.value=async function(){const l=this.mutex,h=await l.lock("From P2PChannel.".concat(r));try{for(var p=arguments.length,v=new Array(p),E=0;E<p;E++)v[E]=arguments[E];return await s.apply(this,v)}finally{h()}},o}function P2(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function Ue(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?P2(Object(o),!0).forEach(function(s){N(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):P2(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}var Ct;(function(n){n.SET_SESSION_ID="SET_SESSION_ID",n.SET_P2P_ID="SET_P2P_id",n.SET_DC_ID="SET_DC_id",n.SET_UID="SET_UID",n.SET_PUB_ID="SET_PUB_ID",n.SET_CLOUD_PROXY_SERVER_MODE="SET_CLOUD_PROXY_SERVER_MODE",n.KEY_METRIC_CLIENT_CREATED="KEY_METRIC_CLIENT_CREATED",n.KEY_METRIC_JOIN_START="KEY_METRIC_JOIN_START",n.AVOID_JOIN_START="AVOID_JOIN_START",n.KEY_METRIC_JOIN_END="KEY_METRIC_JOIN_END",n.KEY_METRIC_REQUEST_AP_START="KEY_METRIC_REQUEST_AP_START",n.KEY_METRIC_REQUEST_AP_END="KEY_METRIC_REQUEST_AP_END",n.KEY_METRIC_JOIN_GATEWAY_START="KEY_METRIC_JOIN_GATEWAY_START",n.KEY_METRIC_JOIN_GATEWAY_END="KEY_METRIC_JOIN_GATEWAY_END",n.KEY_METRIC_PEER_CONNECTION_START="KEY_METRIC_PEER_CONNECTION_START",n.KEY_METRIC_PEER_CONNECTION_END="KEY_METRIC_PEER_CONNECTION_END",n.KEY_METRIC_DESCRIPTION_START="KEY_METRIC_DESCRIPTION_START",n.KEY_METRIC_ICE_CONNECTION_END="KEY_METRIC_ICE_CONNECTION_END",n.KEY_METRIC_SIGNAL_CHANNEL_OPEN="KEY_METRIC_SIGNAL_CHANNEL_OPEN",n.KEY_METRIC_PUBLISH="KEY_METRIC_PUBLISH",n.KEY_METRIC_SUBSCRIBE="KEY_METRIC_SUBSCRIBE",n.RECORD_JOIN_CHANNEL_SERVICE="RECORD_JOIN_CHANNEL_SERVICE",n.RESET_JOIN_CHANNEL_SERVICE_RECORDS="RESET_JOIN_CHANNEL_SERVICE_RECORDS",n.RESET_KEY_METRICS="RESET_KEY_METRICS",n.SET_USE_DATACHANNEL="SET_USE_DATACHANNEL"})(Ct||(Ct={}));class WJ{constructor(r,o,s,l){N(this,"state",void 0),this.state={codec:r,audioCodec:o,mode:s,clientId:l,sessionId:null,p2pId:0,dcId:0,pubId:0,subId:0,avoidJoinStart:0,keyMetrics:{publish:[],subscribe:[]},joinChannelServiceRecords:[],cloudProxyServerMode:"disabled",useDataChannel:!1}}dispatch(r){this.state=function(o,s){switch(s.type){case Ct.SET_SESSION_ID:return Ue(Ue({},o),{},{sessionId:s.sessionId});case Ct.SET_P2P_ID:return Ue(Ue({},o),{},{p2pId:s.p2pId});case Ct.SET_UID:return Ue(Ue({},o),{},{uid:s.uid});case Ct.SET_PUB_ID:return Ue(Ue({},o),{},{pubId:s.pubId});case Ct.KEY_METRIC_CLIENT_CREATED:return Ue(Ue({},o),{},{keyMetrics:Ue(Ue({},o.keyMetrics),{},{clientCreated:s.metric})});case Ct.KEY_METRIC_JOIN_START:return Ue(Ue({},o),{},{keyMetrics:Ue(Ue({},o.keyMetrics),{},{joinStart:s.metric})});case Ct.AVOID_JOIN_START:return Ue(Ue({},o),{},{avoidJoinStart:s.avoidJoinStart});case Ct.KEY_METRIC_JOIN_END:return Ue(Ue({},o),{},{keyMetrics:Ue(Ue({},o.keyMetrics),{},{joinEnd:s.metric})});case Ct.KEY_METRIC_REQUEST_AP_START:return Ue(Ue({},o),{},{keyMetrics:Ue(Ue({},o.keyMetrics),{},{requestAPStart:s.metric})});case Ct.KEY_METRIC_REQUEST_AP_END:return Ue(Ue({},o),{},{keyMetrics:Ue(Ue({},o.keyMetrics),{},{requestAPEnd:s.metric})});case Ct.KEY_METRIC_JOIN_GATEWAY_START:return Ue(Ue({},o),{},{keyMetrics:Ue(Ue({},o.keyMetrics),{},{joinGatewayStart:s.metric})});case Ct.KEY_METRIC_JOIN_GATEWAY_END:return Ue(Ue({},o),{},{keyMetrics:Ue(Ue({},o.keyMetrics),{},{joinGatewayEnd:s.metric})});case Ct.KEY_METRIC_PEER_CONNECTION_START:return Ue(Ue({},o),{},{keyMetrics:Ue(Ue({},o.keyMetrics),{},{peerConnectionStart:s.metric})});case Ct.KEY_METRIC_PEER_CONNECTION_END:return Ue(Ue({},o),{},{keyMetrics:Ue(Ue({},o.keyMetrics),{},{peerConnectionEnd:s.metric})});case Ct.KEY_METRIC_DESCRIPTION_START:return Ue(Ue({},o),{},{keyMetrics:Ue(Ue({},o.keyMetrics),{},{descriptionStart:s.metric})});case Ct.KEY_METRIC_SIGNAL_CHANNEL_OPEN:return Ue(Ue({},o),{},{keyMetrics:Ue(Ue({},o.keyMetrics),{},{signalChannelOpen:s.metric})});case Ct.KEY_METRIC_ICE_CONNECTION_END:return Ue(Ue({},o),{},{keyMetrics:Ue(Ue({},o.keyMetrics),{},{iceConnectionEnd:s.metric})});case Ct.KEY_METRIC_PUBLISH:{const l=o.keyMetrics.publish,h=l.findIndex(p=>p.trackId===s.metric.trackId);return h!==-1?(l[h]=Ue(Ue({},l[h]),s.metric),Ue(Ue({},o),{},{keyMetrics:Ue(Ue({},o.keyMetrics),{},{publish:[...l]})})):Ue(Ue({},o),{},{keyMetrics:Ue(Ue({},o.keyMetrics),{},{publish:[...o.keyMetrics.publish,s.metric]})})}case Ct.KEY_METRIC_SUBSCRIBE:{const l=o.keyMetrics.subscribe,h=l.findIndex(p=>p.userId===s.metric.userId&&p.type===s.metric.type);return h!==-1?(l[h]=Ue(Ue({},l[h]),s.metric),Ue(Ue({},o),{},{keyMetrics:Ue(Ue({},o.keyMetrics),{},{subscribe:[...l]})})):Ue(Ue({},o),{},{keyMetrics:Ue(Ue({},o.keyMetrics),{},{subscribe:[...o.keyMetrics.subscribe,s.metric]})})}case Ct.SET_CLOUD_PROXY_SERVER_MODE:return o.cloudProxyServerMode=s.mode,o;case Ct.RECORD_JOIN_CHANNEL_SERVICE:return typeof s.index!="number"?o.joinChannelServiceRecords=[...o.joinChannelServiceRecords,s.record]:(o.joinChannelServiceRecords[s.index]=Ue(Ue({},o.joinChannelServiceRecords[s.index]),s.record),o.joinChannelServiceRecords=[...o.joinChannelServiceRecords]),o;case Ct.RESET_JOIN_CHANNEL_SERVICE_RECORDS:return o.joinChannelServiceRecords=[],o;case Ct.RESET_KEY_METRICS:return o.keyMetrics={publish:[],subscribe:[]},o;case Ct.SET_USE_DATACHANNEL:return Ue(Ue({},o),{},{useDataChannel:s.val});default:return o}}(this.state,r)}set sessionId(r){this.dispatch({type:Ct.SET_SESSION_ID,sessionId:r})}get sessionId(){return this.state.sessionId}get codec(){return this.state.codec}get audioCodec(){return this.state.audioCodec}get clientId(){return this.state.clientId}set p2pId(r){this.dispatch({type:Ct.SET_P2P_ID,p2pId:r})}get p2pId(){return this.state.p2pId}set dcId(r){this.dispatch({type:Ct.SET_DC_ID,dcId:r})}get dcId(){return this.state.dcId}set uid(r){this.dispatch({type:Ct.SET_UID,uid:r})}get uid(){return this.state.uid}set pubId(r){this.dispatch({type:Ct.SET_PUB_ID,pubId:r})}get pubId(){return this.state.pubId}set cloudProxyServerMode(r){this.dispatch({type:Ct.SET_CLOUD_PROXY_SERVER_MODE,mode:r})}get cloudProxyServerMode(){return this.state.cloudProxyServerMode}set useDataChannel(r){this.dispatch({type:Ct.SET_USE_DATACHANNEL,val:r})}get useDataChannel(){return this.state.useDataChannel}clientCreated(){this.dispatch({type:Ct.KEY_METRIC_CLIENT_CREATED,metric:Date.now()})}joinStart(){this.dispatch({type:Ct.KEY_METRIC_JOIN_START,metric:Date.now()})}joinEnd(){this.dispatch({type:Ct.KEY_METRIC_JOIN_END,metric:Date.now()})}requestAPStart(){this.dispatch({type:Ct.KEY_METRIC_REQUEST_AP_START,metric:Date.now()})}requestAPEnd(){this.dispatch({type:Ct.KEY_METRIC_REQUEST_AP_END,metric:Date.now()})}joinGatewayStart(){this.dispatch({type:Ct.KEY_METRIC_JOIN_GATEWAY_START,metric:Date.now()})}joinGatewayEnd(){this.dispatch({type:Ct.KEY_METRIC_JOIN_GATEWAY_END,metric:Date.now()})}peerConnectionStart(){this.dispatch({type:Ct.KEY_METRIC_PEER_CONNECTION_START,metric:Date.now()})}peerConnectionEnd(){this.dispatch({type:Ct.KEY_METRIC_PEER_CONNECTION_END,metric:Date.now()})}descriptionStart(){this.dispatch({type:Ct.KEY_METRIC_DESCRIPTION_START,metric:Date.now()})}signalChannelOpen(){this.dispatch({type:Ct.KEY_METRIC_SIGNAL_CHANNEL_OPEN,metric:Date.now()})}iceConnectionEnd(){this.dispatch({type:Ct.KEY_METRIC_ICE_CONNECTION_END,metric:Date.now()})}publish(r,o,s,l){this.dispatch({type:Ct.KEY_METRIC_PUBLISH,metric:Ue(Ue({trackId:r,type:o},s&&{publishStart:s}),l&&{publishEnd:l})})}subscribe(r,o,s,l,h,p,v){this.dispatch({type:Ct.KEY_METRIC_SUBSCRIBE,metric:Ue(Ue(Ue(Ue(Ue({userId:r,type:o},s&&{subscribeStart:s}),l&&{subscribeEnd:l}),h&&{firstFrame:h}),p&&{streamAdded:p}),v&&{firstDecoded:v})})}massSubscribe(r,o,s,l){r.forEach(h=>{this.dispatch({type:Ct.KEY_METRIC_SUBSCRIBE,metric:Ue(Ue(Ue({userId:h.userId,type:h.type},o&&{subscribeStart:o}),s&&{subscribeEnd:s}),l&&{firstFrame:l})})})}get keyMetrics(){return this.state.keyMetrics}recordJoinChannelService(r,o){r.service==="gateway"&&Array.isArray(r.urls)&&(r.urls=r.urls.map(s=>s.replace(/(\d+)-\d+-\d+-(\d+)/,"$1-*-*-$2")));try{return typeof o!="number"?(this.dispatch({type:Ct.RECORD_JOIN_CHANNEL_SERVICE,record:Ue(Ue({},r),{},{sessionId:this.sessionId,cloudProxyMode:this.cloudProxyServerMode,uid:this.uid})}),this.state.joinChannelServiceRecords.length-1):(o<0||o>=this.state.joinChannelServiceRecords.length||this.dispatch({type:Ct.RECORD_JOIN_CHANNEL_SERVICE,record:r,index:o}),o)}catch{return 0}}resetJoinChannelServiceRecords(){this.dispatch({type:Ct.RESET_JOIN_CHANNEL_SERVICE_RECORDS})}resetKeyMetrics(){this.dispatch({type:Ct.RESET_KEY_METRICS})}get joinChannelServiceRecords(){try{return this.state.joinChannelServiceRecords}catch{return[]}}get avoidJoinStart(){return this.state.avoidJoinStart}set avoidJoinStart(r){this.dispatch({type:Ct.AVOID_JOIN_START,avoidJoinStart:r})}}let mg;const GJ=()=>(mg||mg||(mg=(window.location.protocol.split(":")[0]||"").toUpperCase(),mg))==="HTTPS",D2=()=>window.isSecureContext!==void 0;function zJ(n){let r=M2();return function(o,s){let l=o.appId;l!==void 0&&(Vt(s,10),Fs(s,l));let h=o.cid;h!==void 0&&(Vt(s,16),Vt(s,h));let p=o.cname;p!==void 0&&(Vt(s,26),Fs(s,p));let v=o.deviceId;v!==void 0&&(Vt(s,34),Fs(s,v));let E=o.elapse;E!==void 0&&(Vt(s,40),dl(s,E));let T=o.fileSize;T!==void 0&&(Vt(s,48),dl(s,Bd(T)));let C=o.height;C!==void 0&&(Vt(s,56),dl(s,Bd(C)));let I=o.jpg;I!==void 0&&(Vt(s,66),Vt(s,I.length),function(ro,ge){let Ce=$d(ro,ge.length);ro.bytes.set(ge,Ce)}(s,I));let L=o.networkType;L!==void 0&&(Vt(s,72),dl(s,Bd(L)));let V=o.osType;V!==void 0&&(Vt(s,80),dl(s,Bd(V)));let Y=o.requestId;Y!==void 0&&(Vt(s,90),Fs(s,Y));let q=o.sdkVersion;q!==void 0&&(Vt(s,98),Fs(s,q));let X=o.sequence;X!==void 0&&(Vt(s,104),dl(s,Bd(X)));let le=o.sid;le!==void 0&&(Vt(s,114),Fs(s,le));let he=o.timestamp;he!==void 0&&(Vt(s,120),dl(s,he));let Se=o.uid;Se!==void 0&&(Vt(s,128),Vt(s,Se));let De=o.vid;De!==void 0&&(Vt(s,136),Vt(s,De));let be=o.width;be!==void 0&&(Vt(s,144),dl(s,Bd(be)));let Te=o.service;Te!==void 0&&(Vt(s,152),Vt(s,Te));let ye=o.callbackData;ye!==void 0&&(Vt(s,162),Fs(s,ye));let Oe=o.jpgEncryption;Oe!==void 0&&(Vt(s,168),Vt(s,Oe));let Bt=o.requestType;Bt!==void 0&&(Vt(s,176),Vt(s,Bt));let We=o.scorePorn;We!==void 0&&(Vt(s,185),YC(s,We));let ln=o.scoreSexy;ln!==void 0&&(Vt(s,193),YC(s,ln));let en=o.scoreNeutral;en!==void 0&&(Vt(s,201),YC(s,en));let Yn=o.scene;Yn!==void 0&&(Vt(s,208),Vt(s,Yn));let $r=o.ossFilePrefix;$r!==void 0&&(Vt(s,218),Fs(s,$r));let Bn=o.serviceVendor;if(Bn!==void 0)for(let ro of Bn){Vt(s,226);let ge=M2();qJ(ro,ge),Vt(s,ge.limit),ZJ(s,ge),QJ(ge)}}(n,r),function(o){let s=o.bytes,l=o.limit;return s.length===l?s:s.subarray(0,l)}(r)}function KJ(n){return function(o){let s={};e:for(;!U2(o);){let l=Vs(o);switch(l>>>3){case 0:break e;case 1:s.code=Vs(o);break;case 2:s.msg=j2(o,Vs(o));break;case 3:{let h=XJ(o);s.data=YJ(o),o.limit=h;break}default:k2(o,7&l)}}return s}({bytes:r=n,offset:0,limit:r.length});var r}function YJ(n){let r={};e:for(;!U2(n);){let o=Vs(n);switch(o>>>3){case 0:break e;case 1:r.requestId=j2(n,Vs(n));break;case 2:r.requestType=Vs(n)>>>0;break;case 3:r.scorePorn=KC(n);break;case 4:r.scoreSexy=KC(n);break;case 5:r.scoreNeutral=KC(n);break;case 6:r.requestScene=Vs(n)>>>0;break;case 7:r.scene=Vs(n)>>>0;break;default:k2(n,7&o)}}return r}function qJ(n,r){let o=n.service;o!==void 0&&(Vt(r,8),Vt(r,o));let s=n.vendor;s!==void 0&&(Vt(r,16),Vt(r,s));let l=n.token;l!==void 0&&(Vt(r,26),Fs(r,l));let h=n.callbackUrl;h!==void 0&&(Vt(r,34),Fs(r,h))}function XJ(n){let r=Vs(n),o=n.limit;return n.limit=n.offset+r,o}function k2(n,r){switch(r){case 0:for(;128&F2(n););break;case 2:GC(n,Vs(n));break;case 5:GC(n,4);break;case 1:GC(n,8);break;default:throw new Error("Unimplemented type: "+r)}}let JJ=new Float32Array(1);new Uint8Array(JJ.buffer);let WC=new Float64Array(1),no=new Uint8Array(WC.buffer);function Bd(n){return{low:n|=0,high:n>>31,unsigned:n>=0}}let L2=[];function M2(){const n=L2.pop();return n?(n.offset=n.limit=0,n):{bytes:new Uint8Array(64),offset:0,limit:0}}function QJ(n){L2.push(n)}function GC(n,r){if(n.offset+r>n.limit)throw new Error("Skip past limit");n.offset+=r}function U2(n){return n.offset>=n.limit}function $d(n,r){let o=n.bytes,s=n.offset,l=n.limit,h=s+r;if(h>o.length){let p=new Uint8Array(2*h);p.set(o),n.bytes=p}return n.offset=h,h>l&&(n.limit=h),s}function zC(n,r){let o=n.offset;if(o+r>n.limit)throw new Error("Read past limit");return n.offset+=r,o}function j2(n,r){let o=zC(n,r),s=String.fromCharCode,l=n.bytes,h="ï¿½",p="";for(let v=0;v<r;v++){let E,T,C,I,L=l[v+o];128&L?(224&L)==192?v+1>=r?p+=h:(E=l[v+o+1],(192&E)!=128?p+=h:(I=(31&L)<<6|63&E,I<128?p+=h:(p+=s(I),v++))):(240&L)==224?v+2>=r?p+=h:(E=l[v+o+1],T=l[v+o+2],(49344&(E|T<<8))!=32896?p+=h:(I=(15&L)<<12|(63&E)<<6|63&T,I<2048||I>=55296&&I<=57343?p+=h:(p+=s(I),v+=2))):(248&L)==240?v+3>=r?p+=h:(E=l[v+o+1],T=l[v+o+2],C=l[v+o+3],(12632256&(E|T<<8|C<<16))!=8421504?p+=h:(I=(7&L)<<18|(63&E)<<12|(63&T)<<6|63&C,I<65536||I>1114111?p+=h:(I-=65536,p+=s(55296+(I>>10),56320+(1023&I)),v+=3))):p+=h:p+=s(L)}return p}function Fs(n,r){let o=r.length,s=0;for(let p=0;p<o;p++){let v=r.charCodeAt(p);v>=55296&&v<=56319&&p+1<o&&(v=(v<<10)+r.charCodeAt(++p)-56613888),s+=v<128?1:v<2048?2:v<65536?3:4}Vt(n,s);let l=$d(n,s),h=n.bytes;for(let p=0;p<o;p++){let v=r.charCodeAt(p);v>=55296&&v<=56319&&p+1<o&&(v=(v<<10)+r.charCodeAt(++p)-56613888),v<128?h[l++]=v:(v<2048?h[l++]=v>>6&31|192:(v<65536?h[l++]=v>>12&15|224:(h[l++]=v>>18&7|240,h[l++]=v>>12&63|128),h[l++]=v>>6&63|128),h[l++]=63&v|128)}}function ZJ(n,r){let o=$d(n,r.limit),s=n.bytes,l=r.bytes;for(let h=0,p=r.limit;h<p;h++)s[h+o]=l[h]}function F2(n){return n.bytes[zC(n,1)]}function V2(n,r){let o=$d(n,1);n.bytes[o]=r}function KC(n){let r=zC(n,8),o=n.bytes;return no[0]=o[r++],no[1]=o[r++],no[2]=o[r++],no[3]=o[r++],no[4]=o[r++],no[5]=o[r++],no[6]=o[r++],no[7]=o[r++],WC[0]}function YC(n,r){let o=$d(n,8),s=n.bytes;WC[0]=r,s[o++]=no[0],s[o++]=no[1],s[o++]=no[2],s[o++]=no[3],s[o++]=no[4],s[o++]=no[5],s[o++]=no[6],s[o++]=no[7]}function Vs(n){let r,o=0,s=0;do r=F2(n),o<32&&(s|=(127&r)<<o),o+=7;while(128&r);return s}function Vt(n,r){for(r>>>=0;r>=128;)V2(n,127&r|128),r>>>=7;V2(n,r)}function dl(n,r){let o=r.low>>>0,s=(r.low>>>28|r.high<<4)>>>0,l=r.high>>>24,h=l===0?s===0?o<16384?o<128?1:2:o<1<<21?3:4:s<16384?s<128?5:6:s<1<<21?7:8:l<128?9:10,p=$d(n,h),v=n.bytes;switch(h){case 10:v[p+9]=l>>>7&1;case 9:v[p+8]=h!==9?128|l:127&l;case 8:v[p+7]=h!==8?s>>>21|128:s>>>21&127;case 7:v[p+6]=h!==7?s>>>14|128:s>>>14&127;case 6:v[p+5]=h!==6?s>>>7|128:s>>>7&127;case 5:v[p+4]=h!==5?128|s:127&s;case 4:v[p+3]=h!==4?o>>>21|128:o>>>21&127;case 3:v[p+2]=h!==3?o>>>14|128:o>>>14&127;case 2:v[p+1]=h!==2?o>>>7|128:o>>>7&127;case 1:v[p]=h!==1?128|o:127&o}}const eQ=async(n,r,o)=>{const s=function(p){const v=[];for(let E=0;E<p.length;E+=2)v.push(parseInt(p.slice(E,E+2),16));return Uint8Array.from(v)}(function(p){const v="0123456789abcdef";function E(Bt){let We,ln="";for(We=0;We<=3;We++)ln+=v.charAt(Bt>>8*We+4&15)+v.charAt(Bt>>8*We&15);return ln}function T(Bt,We){const ln=(65535&Bt)+(65535&We);return(Bt>>16)+(We>>16)+(ln>>16)<<16|65535&ln}function C(Bt,We,ln,en,Yn,$r){return T(function(Bn,ro){return Bn<<ro|Bn>>>32-ro}(T(T(We,Bt),T(en,$r)),Yn),ln)}function I(Bt,We,ln,en,Yn,$r,Bn){return C(We&ln|~We&en,Bt,We,Yn,$r,Bn)}function L(Bt,We,ln,en,Yn,$r,Bn){return C(We&en|ln&~en,Bt,We,Yn,$r,Bn)}function V(Bt,We,ln,en,Yn,$r,Bn){return C(We^ln^en,Bt,We,Yn,$r,Bn)}function Y(Bt,We,ln,en,Yn,$r,Bn){return C(ln^(We|~en),Bt,We,Yn,$r,Bn)}const q=function(Bt){let We;const ln=1+(Bt.length+8>>6),en=new Array(16*ln);for(We=0;We<16*ln;We++)en[We]=0;for(We=0;We<Bt.length;We++)en[We>>2]|=Bt.charCodeAt(We)<<We%4*8;return en[We>>2]|=128<<We%4*8,en[16*ln-2]=8*Bt.length,en}(p);let X,le,he,Se,De,be=1732584193,Te=-271733879,ye=-1732584194,Oe=271733878;for(X=0;X<q.length;X+=16)le=be,he=Te,Se=ye,De=Oe,be=I(be,Te,ye,Oe,q[X+0],7,-680876936),Oe=I(Oe,be,Te,ye,q[X+1],12,-389564586),ye=I(ye,Oe,be,Te,q[X+2],17,606105819),Te=I(Te,ye,Oe,be,q[X+3],22,-1044525330),be=I(be,Te,ye,Oe,q[X+4],7,-176418897),Oe=I(Oe,be,Te,ye,q[X+5],12,1200080426),ye=I(ye,Oe,be,Te,q[X+6],17,-1473231341),Te=I(Te,ye,Oe,be,q[X+7],22,-45705983),be=I(be,Te,ye,Oe,q[X+8],7,1770035416),Oe=I(Oe,be,Te,ye,q[X+9],12,-1958414417),ye=I(ye,Oe,be,Te,q[X+10],17,-42063),Te=I(Te,ye,Oe,be,q[X+11],22,-1990404162),be=I(be,Te,ye,Oe,q[X+12],7,1804603682),Oe=I(Oe,be,Te,ye,q[X+13],12,-40341101),ye=I(ye,Oe,be,Te,q[X+14],17,-1502002290),Te=I(Te,ye,Oe,be,q[X+15],22,1236535329),be=L(be,Te,ye,Oe,q[X+1],5,-165796510),Oe=L(Oe,be,Te,ye,q[X+6],9,-1069501632),ye=L(ye,Oe,be,Te,q[X+11],14,643717713),Te=L(Te,ye,Oe,be,q[X+0],20,-373897302),be=L(be,Te,ye,Oe,q[X+5],5,-701558691),Oe=L(Oe,be,Te,ye,q[X+10],9,38016083),ye=L(ye,Oe,be,Te,q[X+15],14,-660478335),Te=L(Te,ye,Oe,be,q[X+4],20,-405537848),be=L(be,Te,ye,Oe,q[X+9],5,568446438),Oe=L(Oe,be,Te,ye,q[X+14],9,-1019803690),ye=L(ye,Oe,be,Te,q[X+3],14,-187363961),Te=L(Te,ye,Oe,be,q[X+8],20,1163531501),be=L(be,Te,ye,Oe,q[X+13],5,-1444681467),Oe=L(Oe,be,Te,ye,q[X+2],9,-51403784),ye=L(ye,Oe,be,Te,q[X+7],14,1735328473),Te=L(Te,ye,Oe,be,q[X+12],20,-1926607734),be=V(be,Te,ye,Oe,q[X+5],4,-378558),Oe=V(Oe,be,Te,ye,q[X+8],11,-2022574463),ye=V(ye,Oe,be,Te,q[X+11],16,1839030562),Te=V(Te,ye,Oe,be,q[X+14],23,-35309556),be=V(be,Te,ye,Oe,q[X+1],4,-1530992060),Oe=V(Oe,be,Te,ye,q[X+4],11,1272893353),ye=V(ye,Oe,be,Te,q[X+7],16,-155497632),Te=V(Te,ye,Oe,be,q[X+10],23,-1094730640),be=V(be,Te,ye,Oe,q[X+13],4,681279174),Oe=V(Oe,be,Te,ye,q[X+0],11,-358537222),ye=V(ye,Oe,be,Te,q[X+3],16,-722521979),Te=V(Te,ye,Oe,be,q[X+6],23,76029189),be=V(be,Te,ye,Oe,q[X+9],4,-640364487),Oe=V(Oe,be,Te,ye,q[X+12],11,-421815835),ye=V(ye,Oe,be,Te,q[X+15],16,530742520),Te=V(Te,ye,Oe,be,q[X+2],23,-995338651),be=Y(be,Te,ye,Oe,q[X+0],6,-198630844),Oe=Y(Oe,be,Te,ye,q[X+7],10,1126891415),ye=Y(ye,Oe,be,Te,q[X+14],15,-1416354905),Te=Y(Te,ye,Oe,be,q[X+5],21,-57434055),be=Y(be,Te,ye,Oe,q[X+12],6,1700485571),Oe=Y(Oe,be,Te,ye,q[X+3],10,-1894986606),ye=Y(ye,Oe,be,Te,q[X+10],15,-1051523),Te=Y(Te,ye,Oe,be,q[X+1],21,-2054922799),be=Y(be,Te,ye,Oe,q[X+8],6,1873313359),Oe=Y(Oe,be,Te,ye,q[X+15],10,-30611744),ye=Y(ye,Oe,be,Te,q[X+6],15,-1560198380),Te=Y(Te,ye,Oe,be,q[X+13],21,1309151649),be=Y(be,Te,ye,Oe,q[X+4],6,-145523070),Oe=Y(Oe,be,Te,ye,q[X+11],10,-1120210379),ye=Y(ye,Oe,be,Te,q[X+2],15,718787259),Te=Y(Te,ye,Oe,be,q[X+9],21,-343485551),be=T(be,le),Te=T(Te,he),ye=T(ye,Se),Oe=T(Oe,De);return E(be)+E(Te)+E(ye)+E(Oe)}(""+r+o)).slice(0,16),l=s.slice(0,12),h=await window.crypto.subtle.importKey("raw",s,"AES-GCM",!0,["encrypt"]);return new Uint8Array(await window.crypto.subtle.encrypt({name:"AES-GCM",iv:l},h,n))},B2=async(n,r,o)=>await eQ(n.buffer,r,o);function $2(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}const tQ=new Map([["moderation",1],["supervise",2]]);class gg extends Rn{get connectionState(){return this._connectionState}set connectionState(r){if(this._connectionState===r)return;const o=this._connectionState;this._connectionState=r,this.emit(lr.CONNECTION_STATE_CHANGE,o,r)}get inspectType(){return this._inspectType}set inspectType(r){var o;this._inspectMode=Yc(o=r.map(s=>tQ.get(s)||0)).call(o,(s,l)=>s+l),this._inspectType=r}get quality(){return this._quality}set quality(r){this._quality=r>1?1:r<.1?.1:r,this.qualityTimer&&(window.clearTimeout(this.qualityTimer),this.qualityTimer=null),this._quality>=1||(this.qualityTimer=window.setTimeout(()=>{this.quality=this._quality/this.qualityRatio},6e4))}constructor(r){super(),N(this,"name","AgoraRTCVideoContentInspect"),N(this,"_connectionState",Po.CONNECTING),N(this,"_innerConnectionState",void 0),N(this,"sequence",0),N(this,"inspectStartTime",void 0),N(this,"workerManagerConnection",void 0),N(this,"workerConnection",void 0),N(this,"workerMessageLengthLimit",void 0),N(this,"inspectIntervalMinimum",void 0),N(this,"qualityRatio",void 0),N(this,"_connectInfo",void 0),N(this,"_cancelTokenSource",Ao.CancelToken.source()),N(this,"_retryConfig",void 0),N(this,"wmSequence",0),N(this,"inspectInterval",void 0),N(this,"inspectTimer",null),N(this,"ossFilePrefix",void 0),N(this,"extraInfo",void 0),N(this,"_inspectType",void 0),N(this,"_inspectMode",void 0),N(this,"_quality",1),N(this,"qualityTimer",null),N(this,"_inspectId",void 0),N(this,"_needWorkUrlOnly",!1),N(this,"inspectImage",()=>{if(this.connectionState!==Po.CONNECTED)throw new Q(W.OPERATION_ABORTED,"content inspect service connection status is ".concat(this.connectionState));this.inspectTimer&&(window.clearInterval(this.inspectTimer),this.inspectTimer=null),this.inspectTimer=window.setInterval(()=>{this.connectionState===Po.CONNECTED?this.requestToInspectImage():U.debug("[".concat(this._inspectId,"] Inspect State is not connected , "),this.connectionState)},this.inspectInterval<this.inspectIntervalMinimum?this.inspectIntervalMinimum:this.inspectInterval),this.requestToInspectImage()}),this._inspectId=pn(5,"inspect-"),this.workerMessageLengthLimit=ie("VIDEO_INSPECT_WORKER_MESSAGE_LENGTH_LIMIT"),this.inspectIntervalMinimum=ie("VIDEO_INSPECT_INTERVAL_MINIMUM"),this.qualityRatio=ie("VIDEO_INSPECT_QUALITY_RATIO"),this.inspectInterval=r.interval,this.ossFilePrefix=r.ossFilePrefix,this.extraInfo=r.extraInfo,this.inspectType=r.inspectType,this.inspectStartTime=Number(Date.now()),this.workerManagerConnection=new mu("worker-manager-"+this._inspectId,Qn),this.on(lr.STATE_CHANGE,(o,s)=>{this._innerConnectionState=o,U.debug("[".concat(this._inspectId,"] Inspect operation :").concat(Do[o]," ").concat(s||""))}),this.handleWorkerManagerEvents(),this.workerConnection=new mu("worker-"+this._inspectId,Qn),this.handleWorkerEvents()}async init(r,o){this.emit(lr.STATE_CHANGE,Do.CONNECT_AP),this._connectInfo=r;const s=this._cancelTokenSource.token;return this._retryConfig=o,new xe((l,h)=>{this.on(lr.CONNECTION_STATE_CHANGE,(p,v)=>{v===Po.CONNECTED&&l()}),this.requestAP(r,s,o).then(p=>{this.connectWorkerManager(p)}).catch(p=>{h(p)})})}async requestAP(r,o,s){const l=ie("WEBCS_DOMAIN").map(v=>"https://".concat(v,"/api/v1")),h=await function(v,E,T,C){let{appId:I,areaCode:L,cname:V,sid:Y,token:q,uid:X}=E;Ld++;const le="image_moderation_api",he={service_name:le,json_body:JSON.stringify({appId:I,areaCode:L,cname:V,command:"allocateEdge",requestId:Ld,seq:Ld,sid:Y,token:q,ts:Date.now(),uid:X+""})};let Se,De,be=v[0];return ts(async()=>{Se=Date.now();const Te=await wa(be,{data:he,cancelToken:T,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"},params:{action:"wrtc_gateway"}});if(De=Date.now()-Se,Te.code!==0){const We=new Q(W.UNEXPECTED_RESPONSE,"image inspect ap error, code"+Te.code,{retry:!0,responseTime:De});throw U.error(We.toString()),We}const ye=JSON.parse(Te.json_body);if(ye.code!==200){const We=new Q(W.UNEXPECTED_RESPONSE,"image inspect ap error, code: ".concat(ye.code,", reason: ").concat(ye.reason),{code:ye.code,responseTime:De});throw U.error(We.toString()),We}if(!ye.servers||!Array.isArray(ye.servers)||ye.servers.length===0){const We=new Q(W.UNEXPECTED_RESPONSE,"image inspect ap empty server",{code:ye.code,responseTime:De});throw U.error(We.toString()),We}const Oe=ie("VIDEO_INSPECT_WORKER_MANAGER_HOST"),Bt=ie("VIDEO_INSPECT_WORKER_MANAGER_PORT");return{addressList:ye.servers.map(We=>{let{address:ln,wss:en}=We;if(ln&&en)return"wss://".concat(ln.replace(/\./g,"-"),".").concat(Oe,":").concat(Bt||en)}).filter(We=>!!We),workerToken:ye.workerToken,vid:ye.vid,responseTime:De}},(Te,ye)=>(Me.apworkerEvent(Y,{success:!0,sc:200,serviceName:le,responseDetail:JSON.stringify(Te.addressList),firstSuccess:ye===0,responseTime:De,serverIp:v[ye%v.length]}),!1),(Te,ye)=>(Me.apworkerEvent(Y,{success:!1,sc:Te.data&&Te.data.code||200,serviceName:le,responseTime:De,serverIp:v[ye%v.length]}),!!(Te.code!==W.OPERATION_ABORTED&&Te.code!==W.UNEXPECTED_RESPONSE||Te.data&&Te.data.retry)&&(be=v[(ye+1)%v.length],!0)),C)}(l,r,o,s);this.emit(lr.STATE_CHANGE,Do.AP_CONNECTED);const{addressList:p}=h;return this.wmSequence++,p}async connectWorkerManager(r){let o=arguments.length>1&&arguments[1]!==void 0&&arguments[1];this._needWorkUrlOnly=o,this.emit(lr.STATE_CHANGE,Do.CONNECT_WORKER_MANAGER),await this.workerManagerConnection.init(r,1e4)}async connectWorker(r){await this.workerConnection.init([r])}handleWorkerManagerEvents(){this.workerManagerConnection.on(it.CONNECTED,async()=>{this.emit(lr.STATE_CHANGE,Do.WORKER_MANAGER_CONNECTED,this.workerManagerConnection.url),this.workerManagerConnection.sendMessage({appId:this._connectInfo.appId,cname:this._connectInfo.cname,uid:this._connectInfo.uid+"",sdkVersion:"4.18.2",sid:this._connectInfo.sid,seq:this.wmSequence,ts:Number(Date.now()),requestId:Math.floor(1e12*Math.random()),allocate:!0,clientRequest:{command:"join"}},!0)}),this.workerManagerConnection.on(it.CLOSED,()=>{this._innerConnectionState<Do.GET_WORKER_MANAGER_RESPONSE&&U.debug("[".concat(this._inspectId,"] Inspect worker manager is closed before connecting worker"))}),this.workerManagerConnection.on(it.FAILED,()=>{this._innerConnectionState<Do.GET_WORKER_MANAGER_RESPONSE&&U.debug("[".concat(this._inspectId,"] Connecting inspect worker manager is failed before connecting worker"))}),this.workerManagerConnection.on(it.RECONNECTING,()=>{this._innerConnectionState<Do.GET_WORKER_MANAGER_RESPONSE&&U.debug("[".concat(this._inspectId,"] Inspect worker manager is reconnecting before connecting worker"))}),this.workerManagerConnection.on(it.ON_MESSAGE,async r=>{this.emit(lr.STATE_CHANGE,Do.GET_WORKER_MANAGER_RESPONSE);const o=this.workerManagerConnection.url;this.workerManagerConnection.close();const s=JSON.parse(r.data);if(s.code!==200)throw U.error("[".concat(this._inspectId,"] Unexpected code ").concat(s.code," from worker manager")),new Q(W.UNEXPECTED_RESPONSE,"response code of worker is unexpected",s);if(!(s.serverResponse&&s.serverResponse.portWss&&o))throw U.error("[".concat(this._inspectId,"] Unexpected content from worker manager : ").concat(JSON.stringify(s))),new Q(W.UNEXPECTED_RESPONSE,"response content of worker is unexpected",s);{const l=ie("VIDEO_INSPECT_WORKER_PORT")||s.serverResponse.portWss,h=o.replace(/:\d+\/?$/,":".concat(l));this.emit(lr.STATE_CHANGE,Do.CONNECT_WORKER,h),this._needWorkUrlOnly?this.emit(lr.REQUEST_NEW_WORKER_URL,h):await this.connectWorker(h)}}),this.workerManagerConnection.on(it.WILL_RECONNECT,(r,o)=>{o(r)}),this.workerManagerConnection.on(it.REQUEST_NEW_URLS,(r,o)=>{this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then(r).catch(o)})}handleWorkerEvents(){this.workerConnection.on(it.CONNECTED,async()=>{this.emit(lr.STATE_CHANGE,Do.WORKER_CONNECTED,this.workerConnection.url),this.connectionState=Po.CONNECTED}),this.workerConnection.on(it.ON_MESSAGE,async r=>{if(r.data instanceof ArrayBuffer){const s=KJ(new Uint8Array(r.data));if(ie("SHOW_VIDEO_INSPECT_WORKER_MESSAGE")&&U.debug("[".concat(this._inspectId,"] Response message for worker of inspect content "),JSON.stringify(s)),s.code===200){if(Array.isArray(this.inspectType)&&this.inspectType.length===1&&this.inspectType[0]==="supervise")return void this.emit(lr.INSPECT_RESULT,void 0,void 0);if(s.data&&s.data.scorePorn&&s.data.scoreSexy&&s.data.scoreNeutral){var o;const l={porn:s.data.scorePorn,sexy:s.data.scoreSexy,neutral:s.data.scoreNeutral},h=Yc(o=Object.keys(l)).call(o,(v,E)=>l[v]>l[E]?v:E,"porn"),p=Object.keys(l).find(v=>v===h);this.emit(lr.INSPECT_RESULT,p)}else this.emit(lr.INSPECT_RESULT,void 0,new Q(W.UNEXPECTED_RESPONSE,s.code+"","There is an unexpected data on message"))}else this.emit(lr.INSPECT_RESULT,void 0,new Q(W.UNEXPECTED_RESPONSE,s.code+"",s.msg))}else U.error("[".concat(this._inspectId,"] Unexpected message type from worker")),this.emit(lr.INSPECT_RESULT,void 0,new Q(W.UNEXPECTED_RESPONSE,"invalid worker message type"))}),this.workerConnection.on(it.CLOSED,()=>{this.connectionState=Po.CLOSED}),this.workerConnection.on(it.FAILED,()=>{this.connectionState=Po.CLOSED}),this.workerConnection.on(it.RECONNECTING,()=>{this.connectionState=this.connectionState===Po.CONNECTED?Po.RECONNECTING:Po.CONNECTING}),this.workerConnection.on(it.WILL_RECONNECT,(r,o)=>{r==="recover"&&o(r),o("tryNext")}),this.workerConnection.on(it.REQUEST_NEW_URLS,(r,o)=>{this.workerManagerConnection.close(),this.once(lr.REQUEST_NEW_WORKER_URL,s=>{r([s])}),this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then(s=>{this.connectWorkerManager(s,!0)}).catch(s=>{o(s)})})}static intToLong(r){return{low:r|=0,high:r>>31,unsigned:r>=0}}async requestToInspectImage(){this.sequence++;const r=Aa(this,lr.CLIENT_LOCAL_VIDEO_TRACK),o={appId:this._connectInfo.appId,cname:this._connectInfo.cname,cid:this._connectInfo.cid,sid:this._connectInfo.sid,uid:this._connectInfo.uid,vid:this._connectInfo.vid};if(r){if(!r.isPlaying)return void this.emit(lr.INSPECT_RESULT,void 0,new Q(W.INVALID_OPERATION,"Only the track being played can be inspected"));const s=await this.generateRequestData(r,o);this.workerConnection.sendMessage(s,!0,!0)}else this.emit(lr.INSPECT_RESULT,void 0,new Q(W.INVALID_OPERATION,"Only the track being published can be inspected"))}async generateRequestData(r,o){let{appId:s,cname:l,cid:h,vid:p,sid:v,uid:E}=o;const T=Date.now(),C=await r.getCurrentFrameImage("image/jpeg",this.quality),I=await B2(C,s,l),L=this.sequence+"-"+h+"-"+E+"-"+T+"-"+pn(12,""),V={appId:s,cid:h,cname:l,deviceId:"",elapse:gg.intToLong(Number(T-this.inspectStartTime)),fileSize:I.byteLength,jpgEncryption:2,height:C.height,width:C.width,jpg:I,networkType:6,osType:7,requestId:L,sdkVersion:"4.18.2",sequence:this.sequence,sid:v,timestamp:gg.intToLong(T),uid:E,vid:p,service:this._inspectMode,callbackData:this.extraInfo,ossFilePrefix:this.ossFilePrefix};this.extraInfo===void 0&&delete V.callbackData,this.ossFilePrefix===void 0&&delete V.ossFilePrefix;const Y=zJ(V);if(Y.byteLength<this.workerMessageLengthLimit){if(ie("SHOW_VIDEO_INSPECT_WORKER_MESSAGE")){const q=function(X){for(var le=1;le<arguments.length;le++){var he=arguments[le]!=null?arguments[le]:{};le%2?$2(Object(he),!0).forEach(function(Se){N(X,Se,he[Se])}):Object.getOwnPropertyDescriptors?Object.defineProperties(X,Object.getOwnPropertyDescriptors(he)):$2(Object(he)).forEach(function(Se){Object.defineProperty(X,Se,Object.getOwnPropertyDescriptor(he,Se))})}return X}({},V);delete q.jpg,U.debug("[".concat(this._inspectId,"] Request message for worker of inspect content "),JSON.stringify(q))}return Y}{const q=this.quality*this.qualityRatio;return this.quality=q,await this.generateRequestData(r,{appId:s,cname:l,cid:h,vid:p,sid:v,uid:E})}}close(){this._cancelTokenSource.cancel(),this._cancelTokenSource=Ao.CancelToken.source(),this.workerManagerConnection&&this.workerManagerConnection.close(),this.workerConnection&&this.workerConnection.close(),this.inspectTimer&&window.clearInterval(this.inspectTimer),this.inspectTimer=null,this.connectionState=Po.CLOSED,this.emit(lr.STATE_CHANGE,Do.CLOSED)}}function nQ(n){let r=function(){const o=oQ.pop();return o?(o.offset=o.limit=0,o):{bytes:new Uint8Array(64),offset:0,limit:0}}();return function(o,s){let l=o.appId;l!==void 0&&(Kn(s,10),yu(s,l));let h=o.cid;h!==void 0&&(Kn(s,16),Kn(s,h));let p=o.cname;p!==void 0&&(Kn(s,26),yu(s,p));let v=o.deviceId;v!==void 0&&(Kn(s,34),yu(s,v));let E=o.elapse;E!==void 0&&(Kn(s,40),hl(s,E));let T=o.fileSize;T!==void 0&&(Kn(s,48),hl(s,Hd(T)));let C=o.height;C!==void 0&&(Kn(s,56),hl(s,Hd(C)));let I=o.jpg;I!==void 0&&(Kn(s,66),Kn(s,I.length),W2(s,I));let L=o.networkType;L!==void 0&&(Kn(s,72),hl(s,Hd(L)));let V=o.osType;V!==void 0&&(Kn(s,80),hl(s,Hd(V)));let Y=o.requestId;Y!==void 0&&(Kn(s,90),yu(s,Y));let q=o.sdkVersion;q!==void 0&&(Kn(s,98),yu(s,q));let X=o.sequence;X!==void 0&&(Kn(s,104),hl(s,Hd(X)));let le=o.sid;le!==void 0&&(Kn(s,114),yu(s,le));let he=o.timestamp;he!==void 0&&(Kn(s,120),hl(s,he));let Se=o.uid;Se!==void 0&&(Kn(s,128),Kn(s,Se));let De=o.vid;De!==void 0&&(Kn(s,136),Kn(s,De));let be=o.width;be!==void 0&&(Kn(s,144),hl(s,Hd(be)));let Te=o.service;Te!==void 0&&(Kn(s,152),Kn(s,Te));let ye=o.callbackData;ye!==void 0&&(Kn(s,162),Kn(s,ye.length),W2(s,ye));let Oe=o.ticket;Oe!==void 0&&(Kn(s,170),yu(s,Oe))}(n,r),function(o){let s=o.bytes,l=o.limit;return s.length===l?s:s.subarray(0,l)}(r)}function rQ(n){return function(o){let s={};e:for(;!aQ(o);){let l=qp(o);switch(l>>>3){case 0:break e;case 1:s.code=qp(o);break;case 2:s.msg=G2(o,qp(o));break;case 3:s.requestId=G2(o,qp(o));break;case 4:s.timestamp=sQ(o,!1);break;default:iQ(o,7&l)}}return s}({bytes:r=n,offset:0,limit:r.length});var r}function iQ(n,r){switch(r){case 0:for(;128&Da(n););break;case 2:qC(n,qp(n));break;case 5:qC(n,4);break;case 1:qC(n,8);break;default:throw new Error("Unimplemented type: "+r)}}function Hd(n){return{low:n|=0,high:n>>31,unsigned:n>=0}}let oQ=[];function qC(n,r){if(n.offset+r>n.limit)throw new Error("Skip past limit");n.offset+=r}function aQ(n){return n.offset>=n.limit}function vg(n,r){let o=n.bytes,s=n.offset,l=n.limit,h=s+r;if(h>o.length){let p=new Uint8Array(2*h);p.set(o),n.bytes=p}return n.offset=h,h>l&&(n.limit=h),s}function H2(n,r){let o=n.offset;if(o+r>n.limit)throw new Error("Read past limit");return n.offset+=r,o}function W2(n,r){let o=vg(n,r.length);n.bytes.set(r,o)}function G2(n,r){let o=H2(n,r),s=String.fromCharCode,l=n.bytes,h="ï¿½",p="";for(let v=0;v<r;v++){let E,T,C,I,L=l[v+o];128&L?(224&L)==192?v+1>=r?p+=h:(E=l[v+o+1],(192&E)!=128?p+=h:(I=(31&L)<<6|63&E,I<128?p+=h:(p+=s(I),v++))):(240&L)==224?v+2>=r?p+=h:(E=l[v+o+1],T=l[v+o+2],(49344&(E|T<<8))!=32896?p+=h:(I=(15&L)<<12|(63&E)<<6|63&T,I<2048||I>=55296&&I<=57343?p+=h:(p+=s(I),v+=2))):(248&L)==240?v+3>=r?p+=h:(E=l[v+o+1],T=l[v+o+2],C=l[v+o+3],(12632256&(E|T<<8|C<<16))!=8421504?p+=h:(I=(7&L)<<18|(63&E)<<12|(63&T)<<6|63&C,I<65536||I>1114111?p+=h:(I-=65536,p+=s(55296+(I>>10),56320+(1023&I)),v+=3))):p+=h:p+=s(L)}return p}function yu(n,r){let o=r.length,s=0;for(let p=0;p<o;p++){let v=r.charCodeAt(p);v>=55296&&v<=56319&&p+1<o&&(v=(v<<10)+r.charCodeAt(++p)-56613888),s+=v<128?1:v<2048?2:v<65536?3:4}Kn(n,s);let l=vg(n,s),h=n.bytes;for(let p=0;p<o;p++){let v=r.charCodeAt(p);v>=55296&&v<=56319&&p+1<o&&(v=(v<<10)+r.charCodeAt(++p)-56613888),v<128?h[l++]=v:(v<2048?h[l++]=v>>6&31|192:(v<65536?h[l++]=v>>12&15|224:(h[l++]=v>>18&7|240,h[l++]=v>>12&63|128),h[l++]=v>>6&63|128),h[l++]=63&v|128)}}function Da(n){return n.bytes[H2(n,1)]}function z2(n,r){let o=vg(n,1);n.bytes[o]=r}function qp(n){let r,o=0,s=0;do r=Da(n),o<32&&(s|=(127&r)<<o),o+=7;while(128&r);return s}function Kn(n,r){for(r>>>=0;r>=128;)z2(n,127&r|128),r>>>=7;z2(n,r)}function sQ(n,r){let o,s=0,l=0,h=0;return o=Da(n),s=127&o,128&o&&(o=Da(n),s|=(127&o)<<7,128&o&&(o=Da(n),s|=(127&o)<<14,128&o&&(o=Da(n),s|=(127&o)<<21,128&o&&(o=Da(n),l=127&o,128&o&&(o=Da(n),l|=(127&o)<<7,128&o&&(o=Da(n),l|=(127&o)<<14,128&o&&(o=Da(n),l|=(127&o)<<21,128&o&&(o=Da(n),h=127&o,128&o&&(o=Da(n),h|=(127&o)<<7))))))))),{low:s|l<<28,high:l>>>4|h<<24,unsigned:r}}function hl(n,r){let o=r.low>>>0,s=(r.low>>>28|r.high<<4)>>>0,l=r.high>>>24,h=l===0?s===0?o<16384?o<128?1:2:o<1<<21?3:4:s<16384?s<128?5:6:s<1<<21?7:8:l<128?9:10,p=vg(n,h),v=n.bytes;switch(h){case 10:v[p+9]=l>>>7&1;case 9:v[p+8]=h!==9?128|l:127&l;case 8:v[p+7]=h!==8?s>>>21|128:s>>>21&127;case 7:v[p+6]=h!==7?s>>>14|128:s>>>14&127;case 6:v[p+5]=h!==6?s>>>7|128:s>>>7&127;case 5:v[p+4]=h!==5?128|s:127&s;case 4:v[p+3]=h!==4?o>>>21|128:o>>>21&127;case 3:v[p+2]=h!==3?o>>>14|128:o>>>14&127;case 2:v[p+1]=h!==2?o>>>7|128:o>>>7&127;case 1:v[p]=h!==1?128|o:127&o}}const K2={},Y2={},q2=4294967296,X2=18446744073709552e3,J2=X2/2,XC=Z2(0,!0),Q2=Z2(0),cQ=Wd(0,-2147483648,!1),lQ=Wd(-1,2147483647,!1),uQ=Wd(-1,-1,!0);function Z2(n,r){let o,s,l;return r?(l=0<=(n>>>=0)&&n<256)&&(s=Y2[n],s)?s:(o=Wd(n,0,!0),l&&(Y2[n]=o),o):(l=-128<=(n|=0)&&n<128)&&(s=K2[n],s)?s:(o=Wd(n,n<0?-1:0,!1),l&&(K2[n]=o),o)}function Wd(n,r,o){return{low:0|n,high:0|r,unsigned:!!o}}function dQ(n,r){if(isNaN(n))return r?XC:Q2;if(r){if(n<0)return XC;if(n>=X2)return uQ}else{if(n<=-J2)return cQ;if(n+1>=J2)return lQ}return n<0?r?XC:Q2:Wd(n%q2|0,n/q2|0,r)}function eM(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}class JC extends Rn{get connectionState(){return this._connectionState}set connectionState(r){if(this._connectionState===r)return;const o=this._connectionState;this._connectionState=r,this.emit(na.CONNECTION_STATE_CHANGE,r,o)}get quality(){return this._quality}set quality(r){this._quality=r>1?1:r<.1?.1:r,this._qualityTimer&&(window.clearTimeout(this._qualityTimer),this._qualityTimer=null),this._quality>=1||(this._qualityTimer=window.setTimeout(()=>{this.quality=this._quality/this._qualityRatio},6e4))}constructor(r){var o;super(),N(this,"name","AgoraRTCImageModeration"),N(this,"_connectionState",vo.CONNECTING),N(this,"_sequence",0),N(this,"_moderationStartTime",void 0),N(this,"_workerConnection",void 0),N(this,"_workerMessageLengthLimit",void 0),N(this,"_qualityRatio",void 0),N(this,"_connectInfo",void 0),N(this,"_cancelTokenSource",Ao.CancelToken.source()),N(this,"_retryConfig",void 0),N(this,"_moderationInterval",void 0),N(this,"_moderationTimer",null),N(this,"_moderationMode",1),N(this,"_quality",1),N(this,"_qualityTimer",null),N(this,"_ticket",void 0),N(this,"_moderationIntervalMinimum",void 0),N(this,"_uploadFailedNum",0),N(this,"_uploadNum",0),N(this,"_uploadTimer",null),N(this,"_moderationId",void 0),N(this,"inspectImage",()=>{if(this.connectionState!==vo.CONNECTED)throw new Q(W.OPERATION_ABORTED,"image moderation service connection status is ".concat(this.connectionState));this._moderationTimer&&(window.clearInterval(this._moderationTimer),this._moderationTimer=null),this._moderationTimer=window.setInterval(()=>{this.connectionState===vo.CONNECTED?this.requestToInspectImage():U.debug("[".concat(this._moderationId,"] Moderation State is not connected , "),this.connectionState)},this._moderationInterval<this._moderationIntervalMinimum?this._moderationIntervalMinimum:this._moderationInterval),this.requestToInspectImage()}),this._moderationId=pn(5,"image-moderation-"),this._workerMessageLengthLimit=ie("IMAGE_MODERATION_WORKER_MESSAGE_LENGTH_LIMIT"),this._moderationIntervalMinimum=ie("IMAGE_MODERATION_INTERVAL_MINIMUM"),this._moderationInterval=(o=r.interval)!==null&&o!==void 0?o:1e3,this._qualityRatio=ie("IMAGE_MODERATION_QUALITY_RATIO"),this._moderationStartTime=Number(Date.now()),this._workerConnection=new mu("worker-"+this._moderationId,Qn),this.on(na.STATE_CHANGE,(s,l)=>{U.debug("[".concat(this._moderationId,"] Moderation operation :").concat(rl[s]," ").concat(l||""))}),this.handleWorkerEvents()}async init(r,o){this.emit(na.STATE_CHANGE,rl.CONNECT_AP),this._connectInfo=r;const s=this._cancelTokenSource.token;return this._retryConfig=o,new xe((l,h)=>{this.on(na.CONNECTION_STATE_CHANGE,(p,v)=>{p===vo.CONNECTED&&l()}),this.requestAP(r,s,o).then(p=>{this.connectWorker(p)}).catch(p=>{h(p)})})}updateConfig(r){var o;this._moderationInterval=(o=r.interval)!==null&&o!==void 0?o:1e3,U.debug("[".concat(this._moderationId,"] updateConfig: ").concat(JSON.stringify(r))),this.connectionState===vo.CONNECTED&&this.inspectImage()}async requestAP(r,o,s){const l=ie("WEBCS_DOMAIN").map(E=>"https://".concat(E,"/api/v1")),h=await function(E,T,C,I){let{appId:L,areaCode:V,cname:Y,sid:q,token:X,uid:le}=T;Ld++;const he="moderation_plugin",Se={service_name:he,json_body:JSON.stringify({appId:L,areaCode:V,cname:Y,command:"allocateEdge",requestId:Ld,seq:Ld,sid:q,appToken:X,ts:Date.now(),uid:le+""})};let De,be,Te=E[0];return ts(async()=>{De=Date.now();const ye=await wa(Te,{data:Se,cancelToken:C,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"},params:{action:"wrtc_gateway"}});if(be=Date.now()-De,ye.code!==0){const We=new Q(W.UNEXPECTED_RESPONSE,"moderation plugin ap error, code"+ye.code,{retry:!0,responseTime:be});throw U.error(We.toString()),We}const Oe=JSON.parse(ye.json_body);if(Oe.code!==200){const We=new Q(W.UNEXPECTED_RESPONSE,"moderation plugin ap error, code: ".concat(Oe.code,", reason: ").concat(Oe.reason),{code:Oe.code,responseTime:be});throw U.error(We.toString()),We}if(!Oe.servers||!Array.isArray(Oe.servers)||Oe.servers.length===0){const We=new Q(W.UNEXPECTED_RESPONSE,"moderation plugin ap empty server",{code:Oe.code,responseTime:be});throw U.error(We.toString()),We}if(!Oe.servers.some(We=>!!We.wss)){const We=new Q(W.UNEXPECTED_RESPONSE,"moderation plugin ap empty port",{code:Oe.code,responseTime:be});throw U.error(We.toString()),We}const Bt=ie("IMAGE_MODERATION_WORKER_HOST");return{addressList:Oe.servers.map(We=>{let{address:ln,wss:en}=We;if(ln&&en)return"wss://".concat(ln.replace(/\./g,"-"),".").concat(Bt,":").concat(en,"/moderation")}).filter(We=>!!We),workerToken:Oe.workerToken,vid:Oe.vid,ticket:Oe.appTicket,responseTime:be}},(ye,Oe)=>(Me.apworkerEvent(q,{success:!0,sc:200,serviceName:he,responseDetail:JSON.stringify(ye.addressList),firstSuccess:Oe===0,responseTime:be,serverIp:E[Oe%E.length]}),!1),(ye,Oe)=>(Me.apworkerEvent(q,{success:!1,sc:ye.data&&ye.data.code||200,serviceName:he,responseTime:be,serverIp:E[Oe%E.length]}),!!(ye.code!==W.OPERATION_ABORTED&&ye.code!==W.UNEXPECTED_RESPONSE||ye.data&&ye.data.retry)&&(Te=E[(Oe+1)%E.length],!0)),I)}(l,r,o,s);this.emit(na.STATE_CHANGE,rl.AP_CONNECTED);const{addressList:p,ticket:v}=h;return this._ticket=v,p}async connectWorker(r){this.emit(na.STATE_CHANGE,rl.CONNECT_WORKER),await this._workerConnection.init(r,1e4)}handleWorkerEvents(){this._workerConnection.on(it.CONNECTED,async()=>{this.emit(na.STATE_CHANGE,rl.WORKER_CONNECTED,this._workerConnection.url),this.connectionState=vo.CONNECTED}),this._workerConnection.on(it.CLOSED,()=>{this.connectionState=vo.CLOSED}),this._workerConnection.on(it.FAILED,()=>{this.connectionState=vo.CLOSED}),this._workerConnection.on(it.RECONNECTING,()=>{this.connectionState=this.connectionState===vo.CONNECTED?vo.RECONNECTING:vo.CONNECTING}),this._workerConnection.on(it.ON_MESSAGE,async r=>{if(r.data instanceof ArrayBuffer){const o=rQ(new Uint8Array(r.data));ie("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")&&U.debug("[".concat(this._moderationId,"] Response message for worker of image moderation "),JSON.stringify(o)),this._uploadNum++,o.code===void 0||o.code===0||(this._uploadFailedNum++,U.error("[".concat(this._moderationId,"] Error response from worke, code is ").concat(o.code,", msg is ").concat(o.msg)),this._uploadTimer||(this._uploadTimer=window.setTimeout(()=>{Me.reportApiInvoke(this._connectInfo.sid||null,{name:Zn.IMAGE_MODERATION_UPLOAD,options:[this._uploadFailedNum,this._uploadNum,o.code],tag:bn.TRACER}).onError(new Q(W.IMAGE_MODERATION_UPLOAD_FAILED,o.msg)),this._uploadTimer=null},ie("IMAGE_MODERATION_UPLOAD_REPORT_INTERVAL"))))}else U.error("[".concat(this._moderationId,"] Unexpected message type from worker"))}),this._workerConnection.on(it.WILL_RECONNECT,(r,o)=>{r==="recover"&&o(r),o("tryNext")}),this._workerConnection.on(it.REQUEST_NEW_URLS,(r,o)=>{this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then(r).catch(o)})}static intToLong(r){return{low:r|=0,high:r>>31,unsigned:r>=0}}async requestToInspectImage(){const r=Aa(this,na.CLIENT_LOCAL_VIDEO_TRACK),o={appId:this._connectInfo.appId,cname:this._connectInfo.cname,cid:this._connectInfo.cid,sid:this._connectInfo.sid,uid:this._connectInfo.uid,vid:this._connectInfo.vid};if(r){if(!r.isPlaying)return void(ie("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")&&U.debug("Only the track being played can be inspected"));this._sequence++;const s=await this.generateRequestData(r,o);this._workerConnection.sendMessage(s,!0,!0)}else ie("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")&&U.debug("Only the track being published can be inspected")}async generateRequestData(r,o){let{appId:s,cname:l,cid:h,vid:p,sid:v,uid:E}=o;const T=Date.now(),C=await r.getCurrentFrameImage("image/jpeg",this.quality),I=await B2(C,s,l),L=this._sequence+"-"+h+"-"+E+"-"+T+"-"+pn(12,""),V={appId:s,cid:h,cname:l,deviceId:"",elapse:JC.intToLong(Number(T-this._moderationStartTime)),fileSize:C.buffer.byteLength,height:C.height,width:C.width,jpg:I,networkType:6,osType:7,requestId:L,sdkVersion:"4.18.2",sequence:this._sequence,sid:v,timestamp:dQ(T),uid:E,vid:p,service:this._moderationMode,ticket:this._ticket},Y=nQ(V);if(Y.byteLength<this._workerMessageLengthLimit){if(ie("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")){const q=function(X){for(var le=1;le<arguments.length;le++){var he=arguments[le]!=null?arguments[le]:{};le%2?eM(Object(he),!0).forEach(function(Se){N(X,Se,he[Se])}):Object.getOwnPropertyDescriptors?Object.defineProperties(X,Object.getOwnPropertyDescriptors(he)):eM(Object(he)).forEach(function(Se){Object.defineProperty(X,Se,Object.getOwnPropertyDescriptor(he,Se))})}return X}({},V);delete q.jpg,U.debug("[".concat(this._moderationId,"] Request message for worker of image moderation service: "),JSON.stringify(q))}return Y}{const q=this.quality*this._qualityRatio;return this.quality=q,await this.generateRequestData(r,{appId:s,cname:l,cid:h,vid:p,sid:v,uid:E})}}close(){this._cancelTokenSource.cancel(),this._cancelTokenSource=Ao.CancelToken.source(),this._workerConnection&&this._workerConnection.close(),this._moderationTimer&&window.clearInterval(this._moderationTimer),this._moderationTimer=null,this._uploadTimer&&window.clearTimeout(this._uploadTimer),this._uploadTimer=null,this.connectionState=vo.CLOSED,this.emit(na.STATE_CHANGE,rl.CLOSED)}}var tM,nM,rM,iM,oM,aM,sM,cM,lM,uM,dM,hM,pM,fM,mM,gM,vM,EM,_M,yM,SM,CM,bM,TM,RM,IM,wM,OM,AM,NM,xM,PM,DM,kM,LM,MM,UM,jM,FM,Ae;function VM(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function Xp(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?VM(Object(o),!0).forEach(function(s){N(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):VM(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}let hQ=(tM=ze(),nM=ze({argsMap:(n,r)=>(Array.isArray(r)||(r=[r]),r.map(o=>o?Object(o).toString():"null"))}),rM=ze({argsMap:(n,r)=>(r||(r=[]),Array.isArray(r)||(r=[r]),r.map(o=>o.getTrackId()))}),iM=ze({argsMap:(n,r,o)=>[r.uid,o]}),oM=ze({argsMap:(n,r)=>r.map(o=>{let{user:s,mediaType:l}=o;return[s==null?void 0:s.uid,l]})}),aM=ze({argsMap:(n,r,o)=>[r.uid,o]}),sM=ze({argsMap:(n,r)=>r.map(o=>{let{user:s,mediaType:l}=o;return{uid:s==null?void 0:s.uid,mediaType:l}})}),cM=ze(),lM=ze(),uM=ze(),dM=ze(),hM=ze(),pM=ze(),fM=ze(),mM=ze(),gM=ze(),vM=ze(),EM=ze(),_M=ze(),yM=ze(),SM=ze(),CM=ze({argsMap:(n,r)=>[r]}),bM=ze(),TM=ze(),RM=ze(),IM=ze(),wM=ze(),OM=ze(),AM=ze(),NM=ze(),xM=ze(),PM=ze(),DM=ze({argsMap:(n,r)=>(Array.isArray(r)||(r=[r]),[JSON.stringify(r)])}),kM=ze(),LM=ze(),MM=ze(),UM=ze(),jM=ze({reportResult:!0}),FM=ze(),_e((Ae=class extends Rn{get connectionState(){return this._gateway.state}get remoteUsers(){return this._users}get localTracks(){return this._p2pChannel.getAllTracks(!0)}get uid(){return this._uid}get channelName(){return this._channelName}get mode(){return this._config.mode}get role(){var n;return((n=this._config)===null||n===void 0?void 0:n.role)||"audience"}get codec(){return this._config.codec}get audioCodec(){return this._config.audioCodec||"opus"}get isStringUID(){return!!this._joinInfo&&!!this._joinInfo.stringUid}get __className__(){return"Client"}constructor(n){let r;if(super(),N(this,"store",void 0),N(this,"_uid",void 0),N(this,"_channelName",void 0),N(this,"_uintUid",void 0),N(this,"_users",[]),N(this,"_config",void 0),N(this,"_clientId",void 0),N(this,"_appId",void 0),N(this,"_sessionId",null),N(this,"_key",void 0),N(this,"_joinInfo",void 0),N(this,"_gateway",void 0),N(this,"_statsCollector",void 0),N(this,"_configDistribute",void 0),N(this,"_leaveMutex",new wi("client-leave")),N(this,"_publishMutex",new wi("client-publish")),N(this,"_renewTokenMutex",new wi("client-renewtoken")),N(this,"_subscribeMutex",new wi("client-subscribe")),N(this,"_encryptionMode","none"),N(this,"_encryptionSecret",null),N(this,"_encryptionSalt",null),N(this,"_proxyServer",void 0),N(this,"_turnServer",{servers:[],mode:"auto"}),N(this,"_cloudProxyServerMode","disabled"),N(this,"_isDualStreamEnabled",!1),N(this,"_defaultStreamFallbackType",void 0),N(this,"_lowStreamParameter",void 0),N(this,"_streamFallbackTypeCacheMap",new Map),N(this,"_remoteStreamTypeCacheMap",new Map),N(this,"_axiosCancelSource",Ao.CancelToken.source()),N(this,"_audioVolumeIndicationInterval",void 0),N(this,"_networkQualityInterval",void 0),N(this,"_userOfflineTimeout",void 0),N(this,"_streamRemovedTimeout",void 0),N(this,"_injectStreamingClient",void 0),N(this,"_liveTranscodeStreamingClient",void 0),N(this,"_liveRawStreamingClient",void 0),N(this,"_channelMediaRelayClient",void 0),N(this,"_networkQualitySensitivity","normal"),N(this,"_p2pChannel",void 0),N(this,"_useLocalAccessPoint",!1),N(this,"_setLocalAPVersion",void 0),N(this,"_joinAndNotLeaveYet",!1),N(this,"_numberOfJoinCount",0),N(this,"_remoteDefaultVideoStreamType",void 0),N(this,"_inspect",void 0),N(this,"_moderation",void 0),N(this,"_license",void 0),N(this,"_handleLocalTrackEnable",(o,s,l)=>{this.publish(o,!1).then(s).catch(l)}),N(this,"_handleLocalTrackDisable",(o,s,l)=>{this.unpublish(o).then(s).catch(l)}),N(this,"_handleUserOnline",o=>{if(ie("BLOCK_LOCAL_CLIENT")&&cu(o.uid,this.channelName))return void U.debug("[".concat(o.uid,"] will be ignored in local"));this.isStringUID&&typeof o.uid!="string"&&U.error("[".concat(this._clientId,"] StringUID is Mixed with UintUID"));const s=this._users.find(l=>l.uid===o.uid);if(s)s._trust_in_room_=!0;else{const l=new mC(o.uid,o.uint_id||o.uid);this._users.push(l),U.debug("[".concat(this._clientId,"] user online"),o.uid),this.safeEmit(Tt.USER_JOINED,l)}}),N(this,"_handleUserOffline",o=>{if(ie("BLOCK_LOCAL_CLIENT")&&cu(o.uid,this.channelName))return;const s=this._users.find(l=>l.uid===o.uid);s&&(this._handleRemoveStream(o),oC(this._users,s),this._remoteStreamTypeCacheMap.delete(s.uid),this._streamFallbackTypeCacheMap.delete(s.uid),U.debug("[".concat(this._clientId,"] user offline"),o.uid,"reason:",o.reason),this.safeEmit(Tt.USER_LEAVED,s,o.reason))}),N(this,"_handleAddAudioOrVideoStream",(o,s,l,h,p,v,E)=>{if(ie("BLOCK_LOCAL_CLIENT")&&cu(s,this.channelName))return;const T=this._users.find(I=>I.uid===s);if(!T)return void U.error("[".concat(this._clientId,"] can not find target user!(on_add_stream)"));U.debug("[".concat(this._clientId,"] stream added with uid ").concat(s,", type ").concat(o)),this.store.subscribe(T.uid,o,void 0,void 0,void 0,Date.now());const C=o==="audio"?T.hasAudio:T.hasVideo;T._uintid||(T._uintid=p||s),o==="audio"?T._trust_audio_stream_added_state_=!0:T._trust_video_stream_added_state_=!0,o==="audio"?(T._audio_added_=!0,l!==void 0&&(T._audioSSRC=l),h!==void 0&&(T._cname=h),v&&(T._audioOrtc=v)):(T._video_added_=!0,l!==void 0&&(T._videoSSRC=l),h!==void 0&&(T._cname=h),E!==void 0&&(T._rtxSsrcId=E),v&&(T._videoOrtc=v)),(o==="audio"?T.hasAudio:T.hasVideo)&&!C&&(U.info("[".concat(this._clientId,"] remote user ").concat(T.uid," published ").concat(o)),this.safeEmit(Tt.USER_PUBLISHED,T,o)),o==="video"?Me.onGatewayStream(this._sessionId,Fr.ON_ADD_VIDEO_STREAM,In.ON_ADD_VIDEO_STREAM,{peer:p||s}):Me.onGatewayStream(this._sessionId,Fr.ON_ADD_AUDIO_STREAM,In.ON_ADD_AUDIO_STREAM,{peer:p||s}),this._p2pChannel.remoteMediaSsrcChanged(T,o,l).then(I=>{if(I)return U.debug("[".concat(this._clientId,"] resubscribe ").concat(o," for user ").concat(T.uid," after rejoin because SSRC id changed.")),this._p2pChannel.unsubscribe(T,o,!0).then(()=>this._subscribe(T,o,!0).catch(L=>{U.error("[".concat(this._clientId,"] resubscribe error"),L.toString())}))}),this._p2pChannel.hasPendingRemoteMedia(T,o)&&(U.debug("[".concat(this._clientId,"] resubscribe ").concat(o," for user ").concat(T.uid," after reconnect.")),this._subscribe(T,o,!0).catch(I=>{U.error("[".concat(this._clientId,"] resubscribe error"),I.toString())}))}),N(this,"_handleRemoveStream",o=>{if(ie("BLOCK_LOCAL_CLIENT")&&cu(o.uid,this.channelName))return;const s=this._users.find(h=>h.uid===o.uid);if(!s)return void U.warning("[".concat(this._clientId,"] can not find target user!(on_remove_stream)"));U.debug("[".concat(this._clientId,"] stream removed with uid ").concat(o.uid));let l=()=>{};s.hasAudio&&s.hasVideo?l=()=>{U.info("[".concat(this._clientId,"] remote user ").concat(s.uid," unpublished audio track")),this.safeEmit(Tt.USER_UNPUBLISHED,s,"audio"),U.info("[".concat(this._clientId,"] remote user ").concat(s.uid," unpublished video track")),this.safeEmit(Tt.USER_UNPUBLISHED,s,"video")}:s.hasVideo?l=()=>{U.info("[".concat(this._clientId,"] remote user ").concat(s.uid," unpublished video track")),this.safeEmit(Tt.USER_UNPUBLISHED,s,"video")}:s.hasAudio&&(l=()=>{U.info("[".concat(this._clientId,"] remote user ").concat(s.uid," unpublished audio track")),this.safeEmit(Tt.USER_UNPUBLISHED,s,"audio")}),s._trust_audio_stream_added_state_=!0,s._trust_video_stream_added_state_=!0,s._audio_added_=!1,s._video_added_=!1,this._p2pChannel.unsubscribe(s).then(h=>{if(h)return this._gateway.unsubscribe(h,s.uid)}),s._audioSSRC=void 0,s._videoSSRC=void 0,s._audioOrtc=void 0,s._videoOrtc=void 0,s._rtxSsrcId=void 0,Me.onGatewayStream(this._sessionId,Fr.ON_REMOVE_STREAM,In.ON_REMOVE_STREAM,{peer:o.uint_id||o.uid}),l()}),N(this,"_handleSetStreamLocalEnable",(o,s,l)=>{if(ie("BLOCK_LOCAL_CLIENT")&&cu(s,this.channelName))return;const h=this._users.find(E=>E.uid===s);if(!h)return void U.error("[".concat(this._clientId,"] can not find target user!(disable_local)"));U.debug("[".concat(this._clientId,"] local ").concat(o," ").concat(l?"enabled":"disabled"," with uid ").concat(s));const p=o==="audio"?h.hasAudio:h.hasVideo;if(o==="audio"){h._trust_audio_enabled_state_=!0;const E=h._audio_enabled_;if(h._audio_enabled_=l,h._audio_enabled_===E)return;{const T=h._audio_enabled_?"enable-local-audio":"disable-local-audio";U.debug("[".concat(this._clientId,"] user-info-updated, uid: ").concat(s,", msg: ").concat(T)),this.safeEmit(Tt.USER_INFO_UPDATED,s,T)}}else{h._trust_video_enabled_state_=!0;const E=h._video_enabled_;if(h._video_enabled_=l,h._video_enabled_===E)return;{const T=h._video_enabled_?"enable-local-video":"disable-local-video";U.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(s,", msg: ").concat(T)),this.safeEmit(Tt.USER_INFO_UPDATED,s,T)}}const v=o==="audio"?h.hasAudio:h.hasVideo;return p!==v?!p&&v?(U.info("[".concat(this._clientId,"] remote user ").concat(s," published ").concat(o)),void this.safeEmit(Tt.USER_PUBLISHED,h,o)):(o==="video"&&h._videoTrack&&h._videoTrack._destroy(),o==="audio"&&h._audioTrack,this._p2pChannel.muteRemote(h,o),U.info("[".concat(this._clientId,"] remote user ").concat(s," unpublished ").concat(o)),void this.safeEmit(Tt.USER_UNPUBLISHED,h,o)):void 0}),N(this,"_handleMuteStream",(o,s,l)=>{if(ie("BLOCK_LOCAL_CLIENT")&&cu(o,this.channelName))return;U.debug("[".concat(this._clientId,"] receive mute message"),o,s,l);const h=this._users.find(E=>E.uid===o);if(!h)return void U.warning("[".concat(this._clientId,"] can not find remote user, ignore mute event, uid: ").concat(o));const p=s==="audio"?h.hasAudio:h.hasVideo;if(s==="audio"){h._trust_audio_mute_state_=!0;const E=h._audio_muted_;if(h._audio_muted_=l,h._audio_muted_===E)return;{const T=h._audio_muted_?"mute-audio":"unmute-audio";U.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(o,", msg: ").concat(T)),this.safeEmit(Tt.USER_INFO_UPDATED,o,T)}}else{h._trust_video_mute_state_=!0;const E=h._video_muted_;if(h._video_muted_=l,h._video_muted_===E)return;{const T=h._video_muted_?"mute-video":"unmute-video";U.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(o,", msg: ").concat(T)),this.safeEmit(Tt.USER_INFO_UPDATED,o,T)}}const v=s==="audio"?h.hasAudio:h.hasVideo;if(p!==v){if(!p&&v)return(s==="audio"?h._audioSSRC:h._videoSSRC)?(U.info("[".concat(this._clientId,"] remote user ").concat(o," published ").concat(s)),void this.safeEmit(Tt.USER_PUBLISHED,h,s)):void U.warning("[".concat(this._clientId,"] remote user ").concat(o," receive ").concat(s," unmute message  before add stream message, ").concat(s," SSRC doesn't exist yet."));s==="video"&&h._videoTrack&&h._videoTrack._destroy(),s==="audio"&&h._audioTrack,this._p2pChannel.muteRemote(h,s),U.info("[".concat(this._clientId,"] remote user ").concat(o," unpublished ").concat(s)),this.safeEmit(Tt.USER_UNPUBLISHED,h,s)}}),N(this,"_handleP2PLost",async o=>{U.debug("[".concat(this._clientId,"] receive p2p lost"),o),parseInt(o.p2pid,10)===this.store.p2pId?await this._p2pChannel.requestReconnect():U.warning("[".concat(this._clientId,"] P2PLost stream not found"),o)}),N(this,"_handleTokenWillExpire",()=>{U.debug("[".concat(this._clientId,"] received message onTokenPrivilegeWillExpire")),this.safeEmit(Tt.ON_TOKEN_PRIVILEGE_WILL_EXPIRE)}),N(this,"_handleBeforeUnload",o=>{o.type==="beforeunload"&&o.returnValue!==void 0&&o.returnValue!==""||(this.leave(),U.info("[".concat(this._clientId,"] auto leave onbeforeunload or pagehide")))}),N(this,"_handleUpdateNetworkQuality",()=>{if(this._networkQualitySensitivity==="normal")return;if(navigator&&navigator.onLine!==void 0&&!navigator.onLine)return void this.safeEmit(Tt.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6});const o={downlinkNetworkQuality:0,uplinkNetworkQuality:0};o.uplinkNetworkQuality=this._p2pChannel.getUplinkNetworkQuality(),o.downlinkNetworkQuality=this._p2pChannel.getDownlinkNetworkQuality(),this.safeEmit(Tt.NETWORK_QUALITY,o)}),this._config=n,this._clientId=pn(5,"client-"),this.store=new WJ(n.codec,n.audioCodec,n.mode,this._clientId),this.store.clientCreated(),n.proxyServer&&this.setProxyServer(n.proxyServer,!0),n.turnServer&&this.setTurnServer(n.turnServer,!0),U.info("[".concat(this._clientId,"] Initializing AgoraRTC client v").concat(ta," build: ").concat(yS,", mode: ").concat(this.mode,", codec: ").concat(this.codec)),n.clientRoleOptions)try{oP(n.clientRoleOptions),r=Object.assign({},n.clientRoleOptions)}catch(o){U.warning("[".concat(this._clientId,"] ").concat(o.toString()))}this._statsCollector=new Pd(this.store),this._statsCollector.onStatsException=(o,s,l)=>{U.debug("[".concat(this._clientId,"] receive exception msg, code: ").concat(o,", msg: ").concat(s,", uid: ").concat(l)),this.safeEmit(Tt.EXCEPTION,{code:o,msg:s,uid:l})},this._statsCollector.onUploadPublishDuration=(o,s,l,h)=>{const p=this._users.find(v=>v.uid===o);p&&Me.peerPublishStatus(this._sessionId,{subscribeElapse:h,audioPublishDuration:s,videoPublishDuration:l,peer:p._uintid})},this.store.useDataChannel=zn().supportDataChannel&&ie("SIGNAL_CHANNEL"),this._gateway=new OX(this.store,{clientId:this._clientId,mode:this.mode,codec:this.codec,websocketRetryConfig:n.websocketRetryConfig||Qn,httpRetryConfig:n.httpRetryConfig||Qn,forceWaitGatewayResponse:n.forceWaitGatewayResponse===void 0||n.forceWaitGatewayResponse,statsCollector:this._statsCollector,role:n.role,clientRoleOptions:r}),this._configDistribute=new UX,this._p2pChannel=new HJ(this.store,this._statsCollector),this._handleP2PChannelEvents(),this._handleGatewayEvents(),this._handleGatewaySignalEvents()}async join(n,r,o,s,l){const h=++this._numberOfJoinCount;this.store.joinStart(),s&&(this.store.uid=s);const p=GJ(),v=D2()?window.isSecureContext:"Browser Not Support";if(!D2()&&!p||!window.isSecureContext){const V="The website must be running in a secure context (About secure context: https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts ), otherwise the media collection will be restricted by the browser";U.warning(V)}const E=iC();this.connectionState==="DISCONNECTED"&&(this.store.avoidJoinStart=Math.round(Date.now()),U.debug("[".concat(this._clientId,"] set avoidJoinStart to ").concat(this.store.avoidJoinStart)));const T=Me.reportApiInvoke(E,{name:Zn.JOIN,options:[n,r,o,s],states:{isHttps:p,isSecureContext:v},tag:bn.TRACER});Me.setAppId(n);try{if(!o&&o!==null)throw new Q(W.INVALID_PARAMS,"Invalid token: ".concat(o,". If you don not use token, set it to null"));o&&Xr(o,"token",1,2047),Xr(n,"appid",1,2047),NS(r),s&&xS(s),l&&Xr(l,"optionalInfo",1,2047)}catch(V){throw T.onError(V),V}if(U.info("[".concat(this._clientId,"] start join channel ").concat(r,", join number: ").concat(h)),this._leaveMutex.isLocked&&(U.debug("[".concat(this._clientId,"] join: waiting leave operation")),(await this._leaveMutex.lock())(),U.debug("[".concat(this._clientId,"] join: continue"))),this._joinAndNotLeaveYet=!0,this.connectionState!=="DISCONNECTED"){const V=new Q(W.INVALID_OPERATION,"[".concat(this._clientId,"] Client already in connecting/connected state"));throw T.onError(V),V}this._sessionId||(this._sessionId=E,this.store.sessionId=this._sessionId),this._gateway.state="CONNECTING";const C=Xp({clientId:this._clientId,appId:n,sid:this._sessionId,cname:r,uid:typeof s!="string"?s:null,turnServer:this._turnServer,proxyServer:this._proxyServer,token:o||n,cloudProxyServer:this._cloudProxyServerMode,optionalInfo:l,license:this._license,useLocalAccessPoint:this._useLocalAccessPoint},this._remoteDefaultVideoStreamType!==void 0&&{defaultVideoStream:this._remoteDefaultVideoStreamType});if(this._useLocalAccessPoint&&(C.setLocalAPVersion=this._setLocalAPVersion),typeof s=="string"&&(C.stringUid=s,this._uintUid?(C.uid=this._uintUid,this._uintUid=void 0):C.uid=0),this._encryptionMode!=="none"&&this._encryptionSecret){if(C.aesmode=this._encryptionMode,C.aespassword=await(async V=>{const Y=aC(`MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDCMnXAHkKIGAM+x4N22gCI+Wyu
STM9ztkT3uYslTT2PuKmZfPzhH6kVdO7PTjGCOZnAsyb3oTtWat0KcxQ4jxvqQV+
HvYl3iI1Yd4vl2c3qRMJPLtRDfNxa2Mcxgq7e9aEUibzdd0st+OJAy3tOj/Y0aVy
xQiYDz3vqa6bP29adwIDAQAB`),q=await window.crypto.subtle.importKey("spki",Y,{name:"RSA-OAEP",hash:"SHA-256"},!0,["encrypt"]),X=YS(V),le=await window.crypto.subtle.encrypt({name:"RSA-OAEP"},q,X);return X0(new Uint8Array(le))})(this._encryptionSecret),!this._joinAndNotLeaveYet)throw new Q(W.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));this._encryptionSalt&&(C.aessalt=this._encryptionSalt)}this._startSession(this._sessionId,{channel:r,appId:n});const I=this._sessionId;setTimeout(()=>{this.connectionState==="CONNECTING"&&I===this._sessionId&&Me.joinChannelTimeout(this._sessionId,5)},5e3);try{let V;const Y=C.cloudProxyServer;if(["proxy3","proxy4","proxy5"].includes(Y)){const he=ie("PROXY_SERVER_TYPE3");Array.isArray(he)?C.proxyServer=he[0]:C.proxyServer=he}if(Me.setProxyServer(C.proxyServer),U.setProxyServer(C.proxyServer),this.store.requestAPStart(),C.stringUid&&!C.uid){const he=await dk(C.stringUid,C,this._axiosCancelSource.token,this._config.httpRetryConfig||Qn,this.store);U.debug("[".concat(this._clientId,"] getUserAccount Success ").concat(C.stringUid," => ").concat(he)),C.uid=he,V=await uk(C,this._axiosCancelSource.token,this._config.httpRetryConfig||Qn,!0,this.store)}else V=await uk(C,this._axiosCancelSource.token,this._config.httpRetryConfig||Qn,!0,this.store);if(!this._joinAndNotLeaveYet)throw new Q(W.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));this.store.requestAPEnd(),setTimeout(()=>{this._configDistribute.startGetConfigDistribute(C,this._axiosCancelSource.token),this._configDistribute.on(Dp.UPDATE_BITRATE_LIMIT,he=>{this._p2pChannel.updateBitrateLimit(he)})},0),this._key=o||n;const q=V.gatewayInfo;this._joinInfo=Xp(Xp({},C),{},{cid:q.cid,uid:C.uid?C.uid:q.uid,vid:q.vid,apResponse:q.res,uni_lbs_ip:q.uni_lbs_ip,gatewayAddrs:q.gatewayAddrs});const X=await this._joinGateway();if(!this._joinAndNotLeaveYet)throw new Q(W.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));T.onSuccess(X),this._appId=n,this._channelName=C.cname,this._uid=X,this.store.uid=X,setTimeout(()=>{this._networkQualityInterval&&window.clearInterval(this._networkQualityInterval),this._networkQualityInterval=window.setInterval(this._handleUpdateNetworkQuality,2e3),window.addEventListener(bi()?"beforeunload":"pagehide",this._handleBeforeUnload)},0);const le=C.stringUid?"string uid: ".concat(C.stringUid,",uid: ").concat(C.uid):"uid: ".concat(this._uid);return U.info("[".concat(this._clientId,"] Joining channel success: channel: ").concat(r,",").concat(le)),setTimeout(()=>{U.startUpload()},5e3),this.store.joinEnd(),L=this,su.includes(L)||su.push(L),X}catch(V){const Y=Array.isArray(V)?V[0]:V;throw Y&&Y.code===W.OPERATION_ABORTED?U.warning("[".concat(this._clientId,"] join number: ").concat(h,", Joining channel failed, rollback"),Y):U.error("[".concat(this._clientId,"] join number: ").concat(h,", Joining channel failed, rollback"),Y),Y.code!==W.OPERATION_ABORTED&&this._numberOfJoinCount===h&&(this._gateway.state="DISCONNECTED",this._reset()),T.onError(Y),Y}var L}_joinGateway(){if(!this._joinInfo||!this._key)throw new Q(W.INVALID_OPERATION);return this._gateway.join(this._joinInfo,this._key,!(this._joinInfo.cloudProxyServer!=="disabled"||this._joinInfo.proxyServer||!ie("JOIN_WITH_FALLBACK_SIGNAL_PROXY"))).then(n=>n).catch(n=>{if(n.code===W.INIT_WEBSOCKET_TIMEOUT)return this._gateway.leave(!0,Wt.FALLBACK),n;if(n.code===W.INIT_DATACHANNEL_TIMEOUT)return this._gateway.leave(!0,Wt.FALLBACK),n;throw n}).then(n=>{if(n instanceof Q){if(n.code===W.INIT_WEBSOCKET_TIMEOUT){if(U.info("[".concat(this._clientId,"] join timeout, fallback to proxy")),!this._joinInfo||!this._key)throw new Q(W.INVALID_OPERATION);this._joinInfo.cloudProxyServer="fallback",this._cloudProxyServerMode="fallback",this.store.cloudProxyServerMode="fallback";const r=ie("PROXY_SERVER_TYPE3");if(Array.isArray(r))if(this._joinInfo.apUrl){const s=/^https?:\/\/(.+?)(\/.*)?$/.exec(this._joinInfo.apUrl)[1].split("."),l=s.slice(s.length-2).join(".");r.forEach(h=>{this._joinInfo&&h.includes(l)&&(this._joinInfo.proxyServer=h)}),this._joinInfo.proxyServer||(this._joinInfo.proxyServer=r[0])}else this._joinInfo.proxyServer=r[0];else this._joinInfo.proxyServer=r;const o=ie("LOG_UPLOAD_SERVER").match(/.+:(\d{1,5})$/);return o&&o[1]&&o[1]!=="443"&&U.setProxyServer(this._joinInfo.proxyServer),ie("STATS_COLLECTOR_PORT").toString()!=="443"&&Me.setProxyServer(this._joinInfo.proxyServer),Me.reportApiInvoke(this._sessionId,{name:Zn.JOIN_FALLBACK_TO_PROXY,options:[this._joinInfo.proxyServer],tag:bn.TRACER}).onSuccess(),this.safeEmit(Tt.JOIN_FALLBACK_TO_PROXY,this._joinInfo.proxyServer),ie("JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE")&&this._joinInfo.turnServer.servers.forEach(s=>{"forceturn"in s&&(s.forceturn=!0)}),this._gateway.join(this._joinInfo,this._key)}if(U.info("[".concat(this._clientId,"] join by datachannel timeout, fallback to websocket")),!this._joinInfo||!this._key)throw new Q(W.INVALID_OPERATION);return Me.reportApiInvoke(this._sessionId,{name:Zn.DATACHANNEL_FAILBACK,options:[this.store.clientId],tag:bn.TRACER}).onSuccess(),this._joinGateway()}return n}).then(n=>n)}async leave(){U.info("[".concat(this._clientId,"] Leaving channel")),window.removeEventListener(bi()?"beforeunload":"pagehide",this._handleBeforeUnload),this._reset(),function(r){const o=su.indexOf(r);o!==-1&&su.splice(o,1)}(this);const n=await this._leaveMutex.lock();if(this.connectionState==="DISCONNECTED")return U.info("[".concat(this._clientId,"] Leaving channel repeated, success")),void n();await this._gateway.leave(this.connectionState!=="CONNECTED"),U.info("[".concat(this._clientId,"] Leaving channel success")),this._joinAndNotLeaveYet=!1,this.store.resetJoinChannelServiceRecords(),n()}async publish(n){let r=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(Array.isArray(n)||(n=[n]),n.length===0)throw new Q(W.INVALID_PARAMS,"track list is empty");if(this._gateway.role==="audience")throw new Q(W.INVALID_OPERATION,"audience can not publish stream");for(const s of n){if(!(s instanceof qS))throw new Q(W.INVALID_PARAMS,"parameter is not local track");if(!s._enabled&&r)throw new Q(W.TRACK_IS_DISABLED,"can not publish a disabled track: ".concat(s.getTrackId()))}U.info("[".concat(this._clientId,"] Publishing tracks, id ").concat(n.map(s=>"".concat(s.getTrackId()," "))));const o=await this._publishMutex.lock();await this._configDistribute.awaitConfigDistributeComplete(),r&&n.forEach(s=>{const l=this._configDistribute.getBitrateLimit();s instanceof rr&&l&&s.setBitrateLimit(l.uplink)});try{await this._publishHighStream(n),U.info("[".concat(this._clientId,"] Publish success, id ").concat(n.map(s=>"".concat(s.getTrackId()," "))))}catch(s){throw U.error("[".concat(this._clientId,"] publish error"),s.toString()),s}finally{o()}}async unpublish(n){if(!this._joinInfo||this._uid===void 0)throw new Q(W.INVALID_OPERATION,"Can't unpublish stream, haven't joined yet!");n?Array.isArray(n)||(n=[n]):n=this._p2pChannel.getAllTracks(!0),U.info("[".concat(this._clientId,"] Unpublish tracks, tracks ").concat(n.map(o=>"".concat(o.getTrackId()," "))," "));const r=await this._publishMutex.lock();try{const o=await this._p2pChannel.unpublish(n);o&&await this._gateway.unpublish(o,this._uid),U.info("[".concat(this._clientId,"] Unpublish success,tracks ").concat(n.map(s=>"".concat(s.getTrackId()))))}catch(o){throw U.error("[".concat(this._clientId,"] unpublish error"),o.toString()),o}finally{r&&r()}}async subscribe(n,r){return this._subscribe(n,r)}async _subscribe(n,r,o){if(Rr(r,"mediaType",["audio","video"]),!this._joinInfo)throw new Q(W.INVALID_OPERATION,"Can't subscribe stream, not joined");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new Q(W.INVALID_OPERATION,"Can't subscribe stream in ".concat(this.connectionState," state"));if(!this._users.find(E=>E===n)){const E=new Q(W.INVALID_REMOTE_USER,"user is not in the channel");throw U.error("[".concat(this._clientId,"] can not subscribe ").concat(n.uid,", this user is not in the channel")),E}if(!n.hasAudio&&!n.hasVideo){const E=new Q(W.INVALID_REMOTE_USER,"user is not published");throw U.error("[".concat(this._clientId,"] can not subscribe ").concat(n.uid,", user is not published")),E}if(!(o||(r!=="audio"||n.hasAudio&&n._audioSSRC!==void 0)&&(r!=="video"||n.hasVideo&&n._videoSSRC!==void 0))){const E=new Q(W.REMOTE_USER_IS_NOT_PUBLISHED);throw U.error("[".concat(this._clientId,"] can not subscribe ").concat(n.uid," with mediaType ").concat(r,", remote track is not published")),E}const s=r==="audio"?n._audioSSRC:n._videoSSRC,l=r==="audio"?n._audioOrtc:n._videoOrtc,h=r==="video"?n._rtxSsrcId:void 0,p={stream_type:r==="audio"?dt.AUDIO:dt.VIDEO,ssrcId:s},v=await this._subscribeMutex.lock();U.info("[".concat(this._clientId,"] subscribe user ").concat(n.uid,", mediaType: ").concat(r));try{if(await this._p2pChannel.hasRemoteMediaWithLock(n,r))await this._p2pChannel.unmuteRemote(n,r);else try{ra.markSubscribeStart(this.store.clientId,s),this.store.subscribe(n.uid,r,Date.now()),await this._p2pChannel.subscribe(n,r,s,h,l);try{await this._gateway.subscribe(n.uid,p,!0)}catch(T){if((T==null?void 0:T.code)!==W.WS_ABORT)throw await this._p2pChannel.unsubscribe(n,r),T;await this._p2pChannel.unsubscribe(n,r,!0),this._p2pChannel.setPendingRemoteMedia(n,r)}this.store.subscribe(n.uid,r,void 0,Date.now()),this._p2pChannel.reportSubscribeEvent(!0,null,n,r)}catch(T){throw this._p2pChannel.reportSubscribeEvent(!1,T==null?void 0:T.code,n,r),T}U.info("[".concat(this._clientId,"] subscribe success user ").concat(n.uid,", mediaType: ").concat(r)),this._defaultStreamFallbackType&&this.setStreamFallbackOption(n.uid,this._defaultStreamFallbackType).catch(T=>{U.warning("[".concat(this._clientId,"] auto set fallback failed"),T)});const E=r==="audio"?n._audioTrack:n._videoTrack;if(!E)throw new Q(W.UNEXPECTED_ERROR,"can not find remote track in user object");return E}catch(E){throw U.error("[".concat(this._clientId,"] subscribe user ").concat(n.uid," error"),E),E}finally{v()}}async massSubscribe(n){if(cc(n,"subscribeList"),!this._joinInfo)throw new Q(W.INVALID_OPERATION,"Can't subscribe stream, not joined");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new Q(W.INVALID_OPERATION,"Can't subscribe stream in ".concat(this.connectionState," state"));const r=Date.now(),o=new Map,s=await this._subscribeMutex.lock();U.info("[".concat(this._clientId,"]start massSubscribe user ").concat(n.map(v=>{let{user:E,mediaType:T}=v;return"user: ".concat(E==null?void 0:E.uid,", mediaType: ").concat(T)}).join("; ")));const l=(n=[...n]).map(v=>{let{user:E,mediaType:T}=v;return{user:E,mediaType:T}}),h=await this._p2pChannel.globalLock();try{var p;for(let E=n.length-1;E>=0;E--){const T=n[E],{user:C,mediaType:I}=T;if(Rr(I,"mediaType",["audio","video"]),!C){const Y=new Q(W.INVALID_PARAMS,"user property does not exist in subscribeList item");throw U.error("[".concat(this._clientId,"] user property does not exist in subscribeList item")),Y}if(!this._users.find(Y=>Y===C)){const Y=new Q(W.INVALID_REMOTE_USER,"user is not in the channel");U.error("[".concat(this._clientId,"] can not massSubscribe ").concat(C.uid,", this user is not in the channel")),l[E].error=Y,n.splice(E,1);continue}if(I==="audio"&&(!C.hasAudio||C._audioSSRC===void 0)||I==="video"&&(!C.hasVideo||C._videoSSRC===void 0)){const Y=new Q(W.REMOTE_USER_IS_NOT_PUBLISHED);U.error("[".concat(this._clientId,"] can not subscribe ").concat(C.uid," with mediaType ").concat(I,", remote user is not published")),l[E].error=Y,n.splice(E,1);continue}const L=er.Video|er.LwoVideo,V=o.get(C);if(V){if(I==="video"?V&L:V&er.Audio){n.splice(E,1),U.warning("[".concat(this._clientId,"] repeat massSubscribe user:").concat(C.uid,", mediaType:").concat(I," twice"));continue}o.set(C,V|(I==="video"?L:er.Audio))}else o.set(C,I==="video"?L:er.Audio)}for(let E=n.length-1;E>=0;E--){const T=n[E],{user:C,mediaType:I}=T,L=er.Video|er.LwoVideo;if(this._p2pChannel.hasRemoteMedia(C,I)){await this._p2pChannel.unmuteRemoteNoLock(C,I);const V=o.get(C);o.set(C,I==="video"?V^L:V^er.Audio),n.splice(E,1)}}this.store.massSubscribe(n.map(E=>({userId:E.user.uid,type:E.mediaType})),r);const v=Yc(p=Array.from(o.entries())).call(p,(E,T)=>{let[C,I]=T;if(I===0)return E;const L={stream_id:C.uid,stream_type:I};return I&er.Audio&&(L.audio_ssrc=C._audioSSRC),I&er.Video&&(L.video_ssrc=C._videoSSRC),E.push(L),E},[]);try{n.length>0&&await this._p2pChannel.massSubscribeNoLock(n.map(T=>{let{user:C,mediaType:I}=T;return{user:C,mediaType:I,ssrcId:I===dt.VIDEO?C._videoSSRC:C._audioSSRC,rtxSsrcId:I===dt.VIDEO?C._rtxSsrcId:void 0}}));const E=new Map;if(v.length>0){const T=await this._gateway.subscribeAll(v,!0);((T==null?void 0:T.users)||[]).forEach(C=>{let{stream_id:I,video_error_code:L,audio_error_code:V,error_code:Y}=C;(L||V||Y)&&E.set(I,{video_error_code:L,audio_error_code:V,error_code:Y})})}if(Array.from(E.entries()).length>0){const T=Array.from(E.entries()).map(C=>{let I,[L,V]=C;return V.error_code||V.video_error_code&&V.audio_error_code?I=void 0:V.video_error_code?I=dt.VIDEO:V.audio_error_code&&(I=dt.AUDIO),{user:this.remoteUsers.find(Y=>Y.uid===L),mediaType:I}});await this._p2pChannel.massUnsubscribeNoLock(T)}for(const T of l){const C=E.get(T.user.uid);if(C){const I=C.error_code||T.mediaType==="audio"&&C.audio_error_code||T.mediaType==="video"&&C.video_error_code;if(I){const L=Up(I);U.error("user:".concat(T.user.uid," mediaType:").concat(T.mediaType," has massSubscribe error ").concat(L.desc)),T.error=new Q(W.SUBSCRIBE_FAILED,"code ".concat(I,": ").concat(L.desc))}}T.error||(T.mediaType==="video"?T.track=T.user.videoTrack:T.track=T.user.audioTrack)}return this.store.massSubscribe(l.filter(T=>!T.error).map(T=>({userId:T.user.uid,type:T.mediaType})),void 0,Date.now()),l.forEach(T=>{var C;Me.subscribe(this.store.sessionId,{succ:!!T.error,ec:((C=T.error)===null||C===void 0?void 0:C.code)||null,video:T.mediaType===dt.VIDEO,audio:T.mediaType===dt.AUDIO,peerid:T.user.uid,subscribeRequestid:T.mediaType===dt.VIDEO?T.user._videoSSRC:T.user._audioSSRC,p2pid:this.store.p2pId,eventElapse:Math.floor(performance.now()-r)},!0)}),U.info("[".concat(this._clientId,"] massSubscribe success ").concat(n.map(T=>{let{user:C,mediaType:I}=T;return"user: ".concat(C==null?void 0:C.uid,", mediaType: ").concat(I)}).join("; "))),l}catch(E){throw await this._p2pChannel.massUnsubscribeNoLock(n),E}}finally{h(),s()}}async unsubscribe(n,r){if(r&&Rr(r,"mediaType",["audio","video"]),!this._joinInfo)throw new Q(W.INVALID_OPERATION,"Can't unsubscribe stream, haven't joined yet!");if(!this._users.find(s=>s===n)){const s=new Q(W.INVALID_REMOTE_USER,"user is not in the channel");throw U.error("[".concat(this._clientId,"] can not unsubscribe ").concat(n.uid,", user is not in the channel")),s}U.info("[".concat(this._clientId,"] unsubscribe uid: ").concat(n.uid,", mediaType: ").concat(r));const o=await this._subscribeMutex.lock();try{const s=await this._p2pChannel.unsubscribe(n,r);s&&await this._gateway.unsubscribe(s,n.uid),U.info("[".concat(this._clientId,"] unsubscribe success uid: ").concat(n.uid,", mediaType: ").concat(r))}catch(s){if(s.code===W.DISCONNECT_P2P)return void U.warning("disconnecting p2p, abort unsubscribe request.");throw U.error("[".concat(this._clientId,"] unsubscribe user ").concat(n.uid," error"),s.toString()),s}finally{o()}}async massUnsubscribe(n){if(cc(n,"unsubscribeList"),!this._joinInfo)throw new Q(W.INVALID_OPERATION,"Can't unsubscribeAll stream, haven't joined yet!");U.info("[".concat(this._clientId,"] start massUnsubscribe ").concat(n.map(o=>{let{user:s,mediaType:l}=o;return"user: ".concat(s==null?void 0:s.uid,", mediaType: ").concat(l,";")}).join())),n=[...n];const r=new Map;for(let o=n.length-1;o>=0;o--){const{user:s,mediaType:l}=n[o];if(!s){const p=new Q(W.INVALID_PARAMS,"user property does not exist in unsubscribeList item");throw U.error("[".concat(this._clientId,"] user property does not exist in unsubscribeList item")),p}if(Rr(l,"mediaType",["video","audio",void 0]),!this._users.find(p=>p===s)){U.warning("[".concat(this._clientId,"] can not unsubscribe ").concat(s.uid,", user is not in the channel")),n.splice(o,1);continue}const h=er.Video|er.LwoVideo;if(r.has(s)){const p=r.get(s);let v;switch(l){case"video":v=p&h;break;case"audio":v=p&er.Audio;break;default:v=p&(er.Audio|h)}if(v){U.warning("[".concat(this._clientId,"] repeat massUnsubscribe user:").concat(s.uid,",mediaType:").concat(l," twice.")),n.splice(o,1);continue}l?l==="audio"?r.set(s,p|er.Audio):l==="video"&&r.set(s,p|h):r.set(s,p|er.Audio|h)}else l?l==="audio"?r.set(s,er.Audio):l==="video"&&r.set(s,h):r.set(s,er.Audio|h)}try{const o=await this._p2pChannel.massUnsubscribe(n);o&&await this._gateway.massUnsubscribe(o),U.info("[".concat(this._clientId,"] massUnsubscribe success ").concat(n.map(s=>{let{user:l,mediaType:h}=s;return"user: ".concat(l==null?void 0:l.uid,", mediaType: ").concat(h,";")}).join()))}catch(o){if(o.code===W.DISCONNECT_P2P)return void U.warning("[".concat(this._clientId,"] disconnecting p2p, abort unsubscribe request."));throw U.error("[".concat(this._clientId,"] massUnsubscribe error"),o.toString()),o}}setLowStreamParameter(n){(function(o){if(!o)throw new Q(W.INVALID_PARAMS);yn(o.width)||AS(o.width,"streamParameter.width"),yn(o.height)||AS(o.height,"streamParameter.height"),yn(o.framerate)||AS(o.framerate,"streamParameter.framerate"),yn(o.bitrate)||sn(o.bitrate,"streamParameter.bitrate")})(n),(!n.width&&n.height||n.width&&!n.height)&&U.warning("[".concat(this._clientId,"] The width and height parameters take effect only when both are set")),U.info("[".concat(this._clientId,"] set low stream parameter to"),JSON.stringify(n));const r=this._configDistribute.getLowStreamConfigDistribute();r&&r.bitrate&&n.bitrate&&r.bitrate<n.bitrate&&(n.bitrate=r.bitrate),this._lowStreamParameter=n}async enableDualStream(){if(!zn().supportDualStream)throw Me.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!1}),new Q(W.NOT_SUPPORTED,"Your browser is not support dual stream");if(this._isDualStreamEnabled)throw new Q(W.INVALID_OPERATION,"Dual stream is already enabled");if(this._p2pChannel.canPublishLowStream())try{await this._publishLowStream()}catch(n){throw Me.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!1}),n}this._isDualStreamEnabled=!0,Me.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!0}),U.info("[".concat(this._clientId,"] enable dual stream"))}async disableDualStream(){if(this._isDualStreamEnabled){if(!this._joinInfo)throw new Q(W.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if(this._p2pChannel.getLocalMedia(Le.LocalVideoLowTrack))try{const n=await this._p2pChannel.unpublishLowStream();n&&await this._gateway.unpublish(n,this._joinInfo.stringUid||this._joinInfo.uid)}catch(n){throw Me.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!1,succ:!1}),n}this._isDualStreamEnabled=!1,Me.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!1,succ:!0}),U.info("[".concat(this._clientId,"] disable dual stream"))}}async setClientRole(n,r){if(function(o){Rr(o,"role",["audience","host"])}(n),r&&oP(r),this.mode==="rtc")throw U.warning("[".concat(this._clientId,"]rtc mode can not use setClientRole")),new Q(W.INVALID_OPERATION,"rtc mode can not use setClientRole");if(r&&r.level&&n==="host")throw new Q(W.INVALID_OPERATION,"host mode can not set audience latency level");if(n==="audience"&&this._p2pChannel.hasLocalMedia())throw new Q(W.INVALID_OPERATION,"can not set client role to audience when publishing stream");await this._gateway.setClientRole(n,r),this._config.role=n,U.info("[".concat(this._clientId,"] set client role to ").concat(n,", level: ").concat(r&&r.level))}setProxyServer(n,r){if(Xr(n,"proxyServer"),!r){if(this.connectionState!=="DISCONNECTED")throw new Q(W.INVALID_OPERATION,"Set proxy server before join channel");if(this._cloudProxyServerMode!=="disabled"||this._useLocalAccessPoint)throw new Q(W.INVALID_OPERATION,"You have already set the proxy")}this._proxyServer=n,Me.setProxyServer(this._proxyServer),U.setProxyServer(this._proxyServer),U.info("[".concat(this._clientId,"] Set proxy server ").concat(r?"by initialize call":""," success."))}setTurnServer(n,r){if(Array.isArray(n)||(n=[n]),!r){if(this.connectionState!=="DISCONNECTED")throw new Q(W.INVALID_OPERATION,"Set turn server before join channel");if(this._cloudProxyServerMode!=="disabled"||this._useLocalAccessPoint)throw new Q(W.INVALID_OPERATION,"You have already set the proxy")}if(xp(n))return this._turnServer={servers:n,mode:"original-manual"},void U.info("[".concat(this._clientId,"] Set original turnserver ").concat(r?"by initialize call":""," success: ").concat(n.map(o=>o.urls).join(","),"."));n.forEach(o=>iP(o)),this._turnServer={servers:n,mode:"manual"},U.info("[".concat(this._clientId,"] Set turnserver ").concat(r?"by initialize call":""," success."))}setLicense(n){if(this.connectionState!=="DISCONNECTED")throw new Q(W.INVALID_OPERATION,"you should set license before join channel");if(Xr(n,"license",32,32),!/^[A-Za-z\d]+$/.test(n))throw new Q(W.INVALID_PARAMS,"license should only contains characters from A-Z a-z 0-9");this._license=n,U.info("[".concat(this._clientId,"] set license success"),n)}startProxyServer(n){if(this.connectionState!=="DISCONNECTED")throw new Q(W.INVALID_OPERATION,"Start proxy server before join channel");if(this._proxyServer||this._turnServer.mode==="manual"||this._useLocalAccessPoint)throw new Q(W.INVALID_OPERATION,"You have already set the proxy");const r=[3,4,5];let o;switch(n===void 0&&(n=3),n){case 1:case 2:throw new Q(W.NOT_SUPPORTED,"proxy mode 1/2 has been deprecated and not supported.");case 3:o="proxy3";break;case 4:o="proxy4";break;case 5:o="proxy5";break;default:throw new Q(W.INVALID_PARAMS,"proxy server mode must be ".concat(r.join("|")))}this._cloudProxyServerMode=o,this.store.cloudProxyServerMode=o,U.info("[".concat(this._clientId,"] set cloud proxy server mode to"),this._cloudProxyServerMode)}stopProxyServer(){if(this.connectionState!=="DISCONNECTED")throw new Q(W.INVALID_OPERATION,"Stop proxy server after leave channel");Me.setProxyServer(),U.setProxyServer(),this._cloudProxyServerMode="disabled",this.store.cloudProxyServerMode="disabled",U.info("[".concat(this._clientId,"] set cloud proxy server mode to"),this._cloudProxyServerMode),this._proxyServer=void 0,this._turnServer={mode:"auto",servers:[]}}setLocalAccessPointsV2(n){if(!n.accessPoints)throw new Q(W.INVALID_PARAMS,"accessPoints is required.");cc(n.accessPoints.serverList,"accessPoints.serverList"),Xr(n.accessPoints.domain,"accessPoints.domain");const r=(L,V)=>{sn(L,V,0,65535,!0)};let o=443;if(n.accessPoints.port&&(r(n.accessPoints.port,"accessPoints.port"),o=n.accessPoints.port),this._proxyServer||this._cloudProxyServerMode!=="disabled")throw new Q(W.INVALID_OPERATION,"set local access point failed, You have already set the cloud proxy");ie("CLOSE_AFB_FOR_LOCAL_AP")&&(rn("JOIN_WITH_FALLBACK_SIGNAL_PROXY",!1),rn("JOIN_WITH_FALLBACK_MEDIA_PROXY",!1));const s=/^((\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.){3}(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/,l=n.accessPoints.domain,h=n.accessPoints.serverList.map(L=>s.test(L)?"".concat(L.replace(/\./g,"-"),".").concat(l):L),p=h.map(L=>"".concat(L,":").concat(o));this._useLocalAccessPoint=!0,this._setLocalAPVersion=2,rn("WEBCS_DOMAIN",p),rn("WEBCS_DOMAIN_BACKUP_LIST",p),rn("GATEWAY_DOMAINS",[l]),n.report&&n.report.hostname&&Array.isArray(n.report.hostname)&&n.report.hostname.length?(cc(n.report.hostname,"report.hostname"),rn("EVENT_REPORT_DOMAIN",n.report.hostname[0]),rn("EVENT_REPORT_BACKUP_DOMAIN",n.report.hostname[1]||n.report.hostname[0])):(rn("EVENT_REPORT_DOMAIN",h[0]),rn("EVENT_REPORT_BACKUP_DOMAIN",h[1]||h[0]));let v=6443;n.report&&n.report.port&&(r(n.report.port,"report.port"),v=n.report.port),rn("STATS_COLLECTOR_PORT",v),n.report?rn("ENABLE_EVENT_REPORT",!0):rn("ENABLE_EVENT_REPORT",!1);let E="";n.log&&n.log.hostname&&Array.isArray(n.log.hostname)&&n.log.hostname.length?(cc(n.log.hostname,"log.hostname"),E=n.log.hostname[0]):E=h[0];let T=6444;n.log&&n.log.port&&(r(n.log.port,"log.port"),T=n.log.port),rn("LOG_UPLOAD_SERVER","".concat(E,":").concat(T));let C=[];n.cds&&n.cds.hostname&&Array.isArray(n.cds.hostname)&&n.cds.hostname.length?(cc(n.cds.hostname,"cds.hostname"),C=n.cds.hostname):C=h;let I=443;n.cds&&n.cds.port&&(r(n.cds.port,"cds.port"),I=n.cds.port),rn("CDS_AP",C.map(L=>"".concat(L,":").concat(I))),n.cds?rn("ENABLE_CONFIG_DISTRIBUTE",!0):rn("ENABLE_CONFIG_DISTRIBUTE",!1),U.info("set local access point v2 success")}setLocalAccessPoints(n,r){if(cc(n,"serverList"),Xr(r,"domain"),this._proxyServer||this._cloudProxyServerMode!=="disabled")throw new Q(W.INVALID_OPERATION,"set local access point failed, You have already set the cloud proxy");const o=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/;n=n.map(s=>o.test(s)?"".concat(s.replace(/\./g,"-"),".").concat(r):s),this._useLocalAccessPoint=!0,this._setLocalAPVersion=1,rn("WEBCS_DOMAIN",n),rn("WEBCS_DOMAIN_BACKUP_LIST",n),rn("GATEWAY_DOMAINS",[r]),rn("EVENT_REPORT_DOMAIN",n[0]),rn("EVENT_REPORT_BACKUP_DOMAIN",n[1]||n[0]),rn("LOG_UPLOAD_SERVER","".concat(n[0],":6444")),U.info("[".concat(this._clientId,"] set local access point success"))}async setRemoteDefaultVideoStreamType(n){if(Rr(n,"streamType",[0,1]),this._remoteDefaultVideoStreamType=n,this._joinInfo)try{await this._gateway.setDefaultRemoteVideoStreamType(n),this._joinInfo.defaultVideoStream=this._remoteDefaultVideoStreamType}catch(r){throw U.error("[".concat(this._clientId,"] set default remote video stream type error"),r.toString()),r}else U.debug("[".concat(this._clientId,"] haven't joined yet, cache remoteDefaultVideoStreamType ").concat(n))}async setRemoteVideoStreamType(n,r){Rr(r,"streamType",[0,1]);try{await this._gateway.setRemoteVideoStreamType(n,r),setTimeout(()=>{const o=this._users.find(s=>s.uid===n);o&&o.videoTrack&&o.videoTrack.updateMediaStreamTrackResolution()},2e3)}catch(o){throw U.error("[".concat(this._clientId,"] set remote video stream type error"),o.toString()),o}U.info("[".concat(this._clientId,"] set remote ").concat(n," video stream type to ").concat(r)),this._remoteStreamTypeCacheMap.set(n,r)}async setStreamFallbackOption(n,r){Rr(r,"fallbackType",[0,1,2]);try{await this._gateway.setStreamFallbackOption(n,r)}catch(o){throw U.error("[".concat(this._clientId,"] set stream fallback option"),o.toString()),o}U.info("[".concat(this._clientId,"] set remote ").concat(n," stream fallback type to ").concat(r)),this._streamFallbackTypeCacheMap.set(n,r)}setEncryptionConfig(n,r,o){if(function(s){Rr(s,"encryptionMode",["aes-128-xts","aes-256-xts","aes-128-ecb","sm4-128-ecb","aes-128-gcm","aes-256-gcm","aes-128-gcm2","aes-256-gcm2","none"])}(n),Xr(r,"secret"),["aes-128-gcm2","aes-256-gcm2"].includes(n)){if(!o||!(o instanceof Uint8Array&&o.length===32))throw new Q(W.INVALID_PARAMS,"salt must be an Uint8Array and exactly equal to 32 bytes")}else if(o)throw new Q(W.INVALID_PARAMS,"current encrypt mode does not need salt");new RegExp(`^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*,.<>?/:;'"|{}\\[\\]])(?=.{8,})`).test(r)||U.warning(`The secret is not strong:
      The secret must contain at least 1 lowercase alphabetical character,
      The secret must contain at least 1 uppercase alphabetical character,
      The secret must contain at least 1 numeric character,
      The secret must contain at least one special character,
      The secret must be eight characters or longer.
      `),this._encryptionMode=n,this._encryptionSecret=r,o&&(this._encryptionSalt=X0(o))}async renewToken(n){if(Xr(n,"token",1,2047),!this._key||!this._joinInfo)throw new Q(W.INVALID_OPERATION,"renewToken should not be called before user join");const r=this._key;this._key=n,this._joinInfo&&(this._joinInfo.token=n);const o=await this._renewTokenMutex.lock();try{if(ie("USE_NEW_TOKEN")){U.debug("[".concat(this._clientId,"] start renew token with ticket from unilbs"));const s=await MX(this._joinInfo,this._axiosCancelSource.token,this._config.httpRetryConfig||Qn);U.debug("[".concat(this._clientId,"] get ticket from unilbs success")),await this._gateway.renewToken({token:n,ticket:s})}else U.debug("[".concat(this._clientId,"] start renew token without ticket")),await this._gateway.renewToken({token:n});U.debug("[".concat(this._clientId,"] renewToken success"))}catch(s){throw this._key=r,this._joinInfo.token=r,U.error("[".concat(this._clientId,"] renewToken failed"),s.toString()),s}finally{o()}}enableAudioVolumeIndicator(){this._audioVolumeIndicationInterval?U.warning("you have already enabled audio volume indicator!"):this._audioVolumeIndicationInterval=window.setInterval(()=>{const n=this._p2pChannel.getAudioLevels();this.safeEmit(Tt.VOLUME_INDICATOR,n)},ie("AUDIO_VOLUME_INDICATION_INTERVAL")||2e3)}getRTCStats(){const n=this._statsCollector.getRTCStats(),r=this._gateway.getInChannelInfo();return n.Duration=Math.round(r.duration/1e3),n}async startLiveStreaming(n,r){if(!r){if(this.codec!=="h264")throw new Q(W.LIVE_STREAMING_INVALID_RAW_STREAM,"raw streaming is only support h264");if(!this._p2pChannel.hasLocalMedia())throw new Q(W.LIVE_STREAMING_INVALID_RAW_STREAM,"can not find stream to raw streaming")}if(this._liveRawStreamingClient&&this._liveRawStreamingClient.hasUrl(n)||this._liveTranscodeStreamingClient&&this._liveTranscodeStreamingClient.hasUrl(n))throw new Q(W.LIVE_STREAMING_TASK_CONFLICT);const o=r?sr.TRANSCODE:sr.RAW;return this._createLiveStreamingClient(o).startLiveStreamingTask(n,o)}setLiveTranscoding(n){return this._createLiveStreamingClient(sr.TRANSCODE).setTranscodingConfig(n)}async stopLiveStreaming(n){const r=[this._liveRawStreamingClient,this._liveTranscodeStreamingClient].filter(o=>o&&o.hasUrl(n));if(!r.length)throw new Q(W.INVALID_PARAMS,"can not find live streaming url to stop");await xe.all(r.map(o=>o&&o.stopLiveStreamingTask(n)))}async addInjectStreamUrl(n,r){if(!this._joinInfo)throw new Q(W.INVALID_OPERATION,"can not addInjectStreamUrl, no joininfo");const o=this._createLiveStreamingClient(sr.INJECT);o.setInjectStreamConfig(r,0),await o.startLiveStreamingTask(n,sr.INJECT)}async removeInjectStreamUrl(){var n;const r=this._createLiveStreamingClient(sr.INJECT),o=Array.from(Ms(n=r.streamingTasks).call(n)).find(s=>s.mode===sr.INJECT);if(!this._joinInfo||!o)throw new Q(W.INVALID_OPERATION,"can remove addInjectStreamUrl, no joininfo or inject task");await r.stopLiveStreamingTask(o.url)}async startChannelMediaRelay(n){_k(n),await this._createChannelMediaRelayClient().startChannelMediaRelay(n)}async updateChannelMediaRelay(n){_k(n),await this._createChannelMediaRelayClient().updateChannelMediaRelay(n)}async stopChannelMediaRelay(){await this._createChannelMediaRelayClient().stopChannelMediaRelay(),this._statsCollector.onStatsChanged&&(this._statsCollector.onStatsChanged=void 0)}sendStreamMessage(n){let r=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(!this._joinInfo)throw new Q(W.INVALID_OPERATION,"can not send data stream, not joined");if(typeof n=="string"&&(n=new TextEncoder().encode(n)),new Blob([n]).size>1024)throw new Q(W.INVALID_PARAMS,"stream message out of range.");return this._gateway.signal.request(Je.DATA_STREAM,{payload:X0(n)},!r)}sendMetadata(n){if(!this._joinInfo)throw new Q(W.INVALID_OPERATION,"can not send metadata, not joined");if(new Blob([n]).size>1024)throw new Q(W.METADATA_OUT_OF_RANGE);return this._gateway.signal.request(Je.SEND_METADATA,{session_id:this._joinInfo.sid,metadata:X0(n)})}async sendCustomReportMessage(n){if(Array.isArray(n)||(n=[n]),n.forEach(XY),!this._joinInfo)throw new Q(W.INVALID_OPERATION,"can not send custom report, not joined");await Me.sendCustomReportMessage(this._joinInfo.sid,n)}getLocalAudioStats(){return this._statsCollector.getLocalAudioTrackStats()}getRemoteAudioStats(){return this._statsCollector.getRemoteAudioTrackStats()}getLocalVideoStats(){return this._statsCollector.getLocalVideoTrackStats()}getRemoteVideoStats(){return this._statsCollector.getRemoteVideoTrackStats()}getRemoteNetworkQuality(){return this._statsCollector.getRemoteNetworkQualityStats()}async pickSVCLayer(n,r){Rr(r.spatialLayer,"spatialLayer",[0,1,2,3]),Rr(r.temporalLayer,"temporalLayer",[0,1,2,3]);try{await this._gateway.pickSVCLayer(n,r)}catch(o){throw U.error("[".concat(this._clientId,"] pick SVC layer failed"),o.toString()),o}}_reset(){if(U.debug("[".concat(this._clientId,"] reset client")),this._axiosCancelSource.cancel(),this._axiosCancelSource=Ao.CancelToken.source(),this._streamFallbackTypeCacheMap=new Map,this._remoteStreamTypeCacheMap=new Map,this._configDistribute.stopGetConfigDistribute(),this._joinInfo=void 0,this._proxyServer=void 0,this._defaultStreamFallbackType=void 0,this._sessionId=null,this.store.sessionId=null,this._statsCollector.reset(),this._key=void 0,this._appId=void 0,this._uid=void 0,this.store.uid=void 0,this._channelName=void 0,this._encryptionMode="none",this._encryptionSecret=null,this._encryptionSalt=null,this._users.forEach(n=>{n._audioTrack&&n._audioTrack._destroy(),n._videoTrack&&n._videoTrack._destroy()}),this._users=[],this._audioVolumeIndicationInterval&&(window.clearInterval(this._audioVolumeIndicationInterval),this._audioVolumeIndicationInterval=void 0),this._cloudProxyServerMode==="fallback"&&(this._cloudProxyServerMode="disabled",this.store.cloudProxyServerMode="disabled"),this._p2pChannel.reset(),this._publishMutex=new wi("client-publish"),this._subscribeMutex=new wi("client-subscribe"),this._networkQualityInterval&&(window.clearInterval(this._networkQualityInterval),this._networkQualityInterval=void 0),this._injectStreamingClient&&(this._injectStreamingClient.terminate(),this._injectStreamingClient.removeAllListeners(),this._injectStreamingClient=void 0),this._liveRawStreamingClient&&(this._liveRawStreamingClient.terminate(),this._liveRawStreamingClient.removeAllListeners(),this._liveRawStreamingClient=void 0),this._liveTranscodeStreamingClient&&(this._liveTranscodeStreamingClient.terminate(),this._liveTranscodeStreamingClient.removeAllListeners(),this._liveTranscodeStreamingClient=void 0),this._channelMediaRelayClient&&(this._channelMediaRelayClient.dispose(),this._channelMediaRelayClient=void 0),this._inspect)try{this._inspect.close(),this._inspect=void 0}catch{}if(this._moderation)try{this.setImageModeration(!1)}catch{}}_startSession(n,r){const o=n||iC();n?U.debug("[".concat(this._clientId,"] new Session ").concat(o)):U.debug("[".concat(this._clientId,"] renewSession ").concat(this._sessionId," => ").concat(o)),this._sessionId=o,this.store.sessionId=o,r?Me.sessionInit(this._sessionId,{lts:new Date().getTime(),cname:r.channel,appid:r.appId,mode:this.mode}):this._joinInfo?Me.sessionInit(this._sessionId,{lts:new Date().getTime(),cname:this._joinInfo.cname,appid:this._joinInfo.appId,mode:this.mode}):this._gateway.joinInfo&&Me.sessionInit(this._sessionId,{lts:new Date().getTime(),cname:this._gateway.joinInfo.cname,appid:this._gateway.joinInfo.appId,mode:this.mode}),this._joinInfo&&(this._joinInfo.sid=o),this._gateway.joinInfo&&(this._gateway.joinInfo.sid=o)}async _publishHighStream(n){if(!this._joinInfo||this._uid===void 0)throw new Q(W.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new Q(W.INVALID_OPERATION,"can not publish stream in ".concat(this.connectionState," state"));if(this._turnServer.mode==="auto"&&ie("FORCE_TURN")&&!ie("TURN_ENABLE_TCP")&&!ie("TURN_ENABLE_UDP"))throw new Q(W.UNEXPECTED_ERROR,"force TURN With No TURN Configuration");U.debug("[".concat(this._clientId,"] publish high stream"));try{const o=await this._p2pChannel.publish(n,this._isDualStreamEnabled,this._lowStreamParameter),s=(await o.next()).value;if(s){var r;let l;try{l=await this._gateway.publish(this._uid,s,!0)}catch(h){if(h.code!==W.DISCONNECT_P2P)throw o.throw(h),h}await o.next(((r=l)===null||r===void 0?void 0:r.ortc)||[])}this._p2pChannel.reportPublishEvent(!0,null);for(const l of n)l instanceof rr&&l._encoderConfig&&this._gateway.setVideoProfile(l._encoderConfig),!l.muted&&l.enabled||await this._p2pChannel.muteLocalTrack(l)}catch(o){if(this._p2pChannel.reportPublishEvent(!1,o==null?void 0:o.code,n),(o==null?void 0:o.code)===W.WS_ABORT)return;throw o}}async _publishLowStream(){if(!this._joinInfo||this._uid===void 0)throw new Q(W.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new Q(W.INVALID_OPERATION,"can not publish stream in ".concat(this.connectionState," state"));U.debug("[".concat(this._clientId,"] publish low stream"));const n=this._configDistribute.getLowStreamConfigDistribute();n&&n.bitrate&&(this._lowStreamParameter||(this._lowStreamParameter={width:160,height:120,framerate:15,bitrate:50}),this._lowStreamParameter&&this._lowStreamParameter.bitrate&&n.bitrate<this._lowStreamParameter.bitrate&&(this._lowStreamParameter.bitrate=n.bitrate));try{const o=await this._p2pChannel.publishLowStream(this._lowStreamParameter),s=(await o.next()).value;if(s){var r;let l;try{l=await this._gateway.publish(this._uid,s,!0)}catch(h){if(h.code!==W.DISCONNECT_P2P)throw o.throw(h),h}o.next(((r=l)===null||r===void 0?void 0:r.ortc)||[]),this._p2pChannel.reportPublishEvent(!0,null,void 0,!0)}}catch(o){if(this._p2pChannel.reportPublishEvent(!1,o==null?void 0:o.code,void 0,!0),(o==null?void 0:o.code)===W.WS_ABORT)return;throw o}}_createLiveStreamingClient(n){if(!this._joinInfo||!this._appId)return new Q(W.INVALID_OPERATION,"can not create live streaming client, please join channel first").throw();const r=()=>new FX(this._joinInfo,this._config.websocketRetryConfig||Qn,this._config.httpRetryConfig||Qn),o=s=>{s.onLiveStreamError=(l,h)=>{Me.reportApiInvoke(this._sessionId,{name:Zn.ON_LIVE_STREAM_ERROR,options:[l,h],tag:bn.TRACER}).onSuccess(),this.safeEmit(Tt.LIVE_STREAMING_ERROR,l,h)},s.onLiveStreamWarning=(l,h)=>{Me.reportApiInvoke(this._sessionId,{name:Zn.ON_LIVE_STREAM_WARNING,options:[l,h],tag:bn.TRACER}).onSuccess(),this.safeEmit(Tt.LIVE_STREAMING_WARNING,l,h)},s.on(Rd.REQUEST_WORKER_MANAGER_LIST,(l,h,p)=>{if(!this._joinInfo)return p(new Q(W.INVALID_OPERATION,"can not find join info to get worker manager"));pk(l,this._joinInfo,this._axiosCancelSource.token,Qn).then(h).catch(p)})};switch(n){case sr.RAW:return this._liveRawStreamingClient||(this._liveRawStreamingClient=r(),o(this._liveRawStreamingClient)),this._liveRawStreamingClient;case sr.TRANSCODE:return this._liveTranscodeStreamingClient||(this._liveTranscodeStreamingClient=r(),o(this._liveTranscodeStreamingClient)),this._liveTranscodeStreamingClient;case sr.INJECT:return this._injectStreamingClient||(this._injectStreamingClient=r(),this._injectStreamingClient.on(Rd.REQUEST_WORKER_MANAGER_LIST,(s,l,h)=>{if(!this._joinInfo)return h(new Q(W.INVALID_OPERATION,"can not find join info to get worker manager"));pk(s,this._joinInfo,this._axiosCancelSource.token,Qn).then(l).catch(h)}),this._injectStreamingClient.onInjectStatusChange=(s,l,h)=>{this.emit(Tt.INJECT_STREAM_STATUS,s,l,h)}),this._injectStreamingClient}}_createChannelMediaRelayClient(){if(!this._joinInfo)return new Q(W.INVALID_OPERATION,"can not create channel media relay client, please join channel first").throw();if(!this._channelMediaRelayClient){const{sendResolutionWidth:n,sendResolutionHeight:r}=this.getLocalVideoStats(),o={width:n,height:r};this._channelMediaRelayClient=new BX(this._joinInfo,this._clientId,this._config.websocketRetryConfig||Qn,this._config.httpRetryConfig||Qn,o),this._channelMediaRelayClient.on("state",s=>{s===Ii.RELAY_STATE_FAILURE&&this._channelMediaRelayClient&&this._channelMediaRelayClient.dispose(),this.safeEmit(Tt.CHANNEL_MEDIA_RELAY_STATE,s)}),this._channelMediaRelayClient.on("event",s=>{this.safeEmit(Tt.CHANNEL_MEDIA_RELAY_EVENT,s)}),this._statsCollector.onStatsChanged=(s,l)=>{var h;s==="resolution"&&((h=this._channelMediaRelayClient)===null||h===void 0||h.setVideoProfile(l))}}return this._channelMediaRelayClient}_handleGatewayEvents(){this._gateway.on(Tn.DISCONNECT_P2P,async()=>{await this._p2pChannel.disconnectForReconnect()}),this._gateway.on(Tn.CONNECTION_STATE_CHANGE,(n,r,o)=>{var s;if(o===Wt.FALLBACK)return;const l=()=>{this.safeEmit(Tt.CONNECTION_STATE_CHANGE,n,r,o)};if(Me.reportApiInvoke(this._sessionId||((s=this._gateway.joinInfo)===null||s===void 0?void 0:s.sid)||null,{name:Zn.CONNECTION_STATE_CHANGE,options:[n,r,o],tag:bn.TRACER}).onSuccess(JSON.stringify({cur:n,prev:r,reason:o})),U.info("[".concat(this._clientId,"] connection state change: ").concat(r," -> ").concat(n)),n==="DISCONNECTED")return this._reset(),void l();if(n==="RECONNECTING")this._users.forEach(p=>{p._trust_in_room_=!1,p._trust_audio_enabled_state_=!1,p._trust_video_enabled_state_=!1,p._trust_audio_mute_state_=!1,p._trust_video_mute_state_=!1,p._trust_audio_stream_added_state_=!1,p._trust_video_stream_added_state_=!1,p._audioSSRC=void 0,p._videoSSRC=void 0,p._videoOrtc=void 0,p._audioOrtc=void 0,p._cname=void 0,p._rtxSsrcId=void 0}),this._userOfflineTimeout&&window.clearTimeout(this._userOfflineTimeout),this._streamRemovedTimeout&&window.clearTimeout(this._streamRemovedTimeout),this._userOfflineTimeout=void 0,this._streamRemovedTimeout=void 0;else if(n==="CONNECTED"){var h;this._streamFallbackTypeCacheMap.forEach((p,v)=>{this._gateway.setStreamFallbackOption(v,p).catch(E=>{U.warning("[".concat(this._clientId,"] auto set stream fallback option failed"),E)})}),this._remoteStreamTypeCacheMap.forEach((p,v)=>{this._gateway.setRemoteVideoStreamType(v,p).catch(E=>{U.warning("[".concat(this._clientId,"] auto set remote stream type failed"),E)})}),this._remoteDefaultVideoStreamType!==void 0&&((h=this._joinInfo)===null||h===void 0?void 0:h.defaultVideoStream)===void 0&&this.setRemoteDefaultVideoStreamType(this._remoteDefaultVideoStreamType).then(()=>{U.debug("[".concat(this._clientId,"] setRemoteDefaultVideoStreamType after gateway connected"))}).catch(p=>{U.error("[".concat(this._clientId,"] setRemoteDefaultVideoStreamType after gateway failed, ").concat(p))}),this._p2pChannel.republish(),this._userOfflineTimeout=window.setTimeout(()=>{this.connectionState==="CONNECTED"&&(this._userOfflineTimeout=void 0,this._users.filter(p=>!p._trust_in_room_).forEach(p=>{U.debug("[".concat(this._clientId,"] user offline timeout, emit user offline ").concat(p.uid)),this._handleUserOffline({uid:p.uid})}))},3e3),this._streamRemovedTimeout=window.setTimeout(()=>{this.connectionState==="CONNECTED"&&(this._streamRemovedTimeout=void 0,this._users.forEach(p=>{p._trust_audio_mute_state_||(U.debug("[".concat(this._clientId,"] auto dispatch audio unmute event ").concat(p.uid)),this._handleMuteStream(p.uid,"audio",!1)),p._trust_video_mute_state_||(U.debug("[".concat(this._clientId,"] auto dispatch video unmute event ").concat(p.uid)),this._handleMuteStream(p.uid,"video",!1)),p._trust_audio_enabled_state_||(U.debug("[".concat(this._clientId,"] auto dispatch enable local audio ").concat(p.uid)),this._handleSetStreamLocalEnable("audio",p.uid,!0)),p._trust_video_enabled_state_||(U.debug("[".concat(this._clientId,"] auto dispatch enable local video ").concat(p.uid)),this._handleSetStreamLocalEnable("video",p.uid,!0)),p._trust_video_stream_added_state_||(U.debug("[".concat(this._clientId,"] auto dispatch reset video stream added ").concat(p.uid)),this._handleResetAddStream(p,"video")),p._trust_audio_stream_added_state_||(U.debug("[".concat(this._clientId,"] auto dispatch reset audio stream added ").concat(p.uid)),this._handleResetAddStream(p,"audio")),p._video_added_||p._audio_added_||(U.debug("[".concat(this._clientId,"] auto dispatch stream remove ").concat(p.uid)),this._handleRemoveStream({uid:p.uid,uint_id:p._uintid}))}))},1e3)}l()}),this._gateway.on(Tn.REQUEST_NEW_GATEWAY_LIST,(n,r)=>{if(!this._joinInfo)return r(new Q(W.UNEXPECTED_ERROR,"can not recover, no join info"));hC(this._joinInfo,this._axiosCancelSource.token,this._config.httpRetryConfig||Qn,this.store).then(o=>{this._joinInfo&&(this._joinInfo.apResponse=o.gatewayInfo.res,this._joinInfo.gatewayAddrs=o.gatewayInfo.gatewayAddrs,this._joinInfo.uni_lbs_ip=o.gatewayInfo.uni_lbs_ip),n(o.gatewayInfo.gatewayAddrs.map(s=>{if(this._joinInfo&&this._joinInfo.proxyServer){const l=s.address.split(":");return"wss://".concat(this._joinInfo.proxyServer,"/ws/?h=").concat(l[0],"&p=").concat(l[1])}return"wss://".concat(s.address)}))}).catch(r)}),this._gateway.on(Tn.NETWORK_QUALITY,n=>{this._networkQualitySensitivity==="normal"&&this.safeEmit(Tt.NETWORK_QUALITY,n)}),this._gateway.on(Tn.STREAM_TYPE_CHANGE,(n,r)=>{this.safeEmit(Tt.STREAM_TYPE_CHANGED,n,r),Me.reportApiInvoke(this._sessionId,{name:Zn.STREAM_TYPE_CHANGE,options:[n,r],tag:bn.TRACER}).onSuccess(JSON.stringify({uid:n,streamType:r}))}),this._gateway.on(Tn.IS_P2P_DISCONNECTED,n=>{this._p2pChannel.isP2PDisconnected()?n(!0):this._p2pChannel.hasLocalMedia()||this._p2pChannel.hasRemoteMedia()?n(!1):n(!0)}),this._gateway.on(Tn.NEED_RENEW_SESSION,()=>{this._startSession()}),this._gateway.on(Tn.REQUEST_P2P_CONNECTION_PARAMS,async(n,r,o)=>{try{r(await this._p2pChannel.startP2PConnection(n))}catch(s){o(s)}}),this._gateway.on(Tn.JOIN_RESPONSE,(n,r)=>{const{dtlsParameters:o,iceParameters:s,candidates:l,rtpCapabilities:h,setup:p,cname:v}=$L(n.ortc,r);this._p2pChannel.connect(s,o,l,h,p,v)}),this._gateway.on(Tn.REQUEST_DC_CONNECTION_PARAMS,n=>{n(this._p2pChannel.getEstablishParams())}),this._gateway.on(Tn.RESET_SIGNAL,n=>{this._p2pChannel.resetConnection(n),this._handleGatewaySignalEvents()}),this._gateway.on(Tn.DATACHANNEL_FAILBACK,()=>{this._joinGateway()}),this._gateway.on(Tn.DATACHANNEL_PRECONNECT,async(n,r,o,s)=>{var l,h,p,v,E,T;await this._p2pChannel.startP2PConnection({turnServer:(l=this._joinInfo)===null||l===void 0?void 0:l.turnServer},!0);const C=function(I,L){let V;return L&&L.ip&&typeof L.port=="number"?(V=[{foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:L.ip,port:L.port.toString(),type:"host",extension:{}}],U.debug("Using remote candidate from AP ".concat(L.ip,":").concat(L.port)),L.ip6&&(V.push({foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:L.ip6,port:L.port.toString(),type:"host",extension:{}}),U.debug("Using IPV6 remote candidate from AP ".concat(L.ip6,":").concat(L.port)))):V=[{foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:I.ip,port:I.port.toString(),type:"host",extension:{}}],V}(n,r);return this._p2pChannel.preConnect({iceUfrag:"".concat((h=this._joinInfo)===null||h===void 0?void 0:h.apResponse.cid,"_").concat((p=this._joinInfo)===null||p===void 0?void 0:p.apResponse.cert),icePwd:"".concat((v=this._joinInfo)===null||v===void 0?void 0:v.apResponse.cid,"_").concat((E=this._joinInfo)===null||E===void 0?void 0:E.apResponse.cert)},{fingerprints:[{hashFunction:"sha-256",fingerprint:(T=ie("FINGERPRINT"))!==null&&T!==void 0?T:n.fingerprint}]},C,{send:{audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]},recv:{audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]}},"active","o/i14u9pJrxRKAsu").then(o).catch(s)})}_handleGatewaySignalEvents(){this._gateway.signal.on(_t.ON_USER_ONLINE,this._handleUserOnline),this._gateway.signal.on(_t.ON_USER_OFFLINE,this._handleUserOffline),this._gateway.signal.on(_t.ON_ADD_AUDIO_STREAM,n=>this._handleAddAudioOrVideoStream("audio",n.uid,n.ssrcId,n.cname,n.uint_id,n.ortc)),this._gateway.signal.on(_t.ON_ADD_VIDEO_STREAM,n=>this._handleAddAudioOrVideoStream("video",n.uid,n.ssrcId,n.cname,n.uint_id,n.ortc,n.rtxSsrcId)),this._gateway.signal.on(_t.ON_REMOVE_STREAM,this._handleRemoveStream),this._gateway.signal.on(_t.ON_P2P_LOST,this._handleP2PLost),this._gateway.signal.on(_t.MUTE_AUDIO,n=>this._handleMuteStream(n.uid,"audio",!0)),this._gateway.signal.on(_t.UNMUTE_AUDIO,n=>this._handleMuteStream(n.uid,"audio",!1)),this._gateway.signal.on(_t.MUTE_VIDEO,n=>this._handleMuteStream(n.uid,"video",!0)),this._gateway.signal.on(_t.UNMUTE_VIDEO,n=>this._handleMuteStream(n.uid,"video",!1)),this._gateway.signal.on(_t.RECEIVE_METADATA,n=>{const r=aC(n.metadata);this.safeEmit(Tt.RECEIVE_METADATA,n.uid,r)}),this._gateway.signal.on(_t.ON_DATA_STREAM,n=>{n.seq&&delete n.seq,n.payload=aC(n.payload),this.safeEmit(Tt.STREAM_MESSAGE,n.uid,n.payload),this.onStreamMessage&&this.onStreamMessage(n)}),this._gateway.signal.on(_t.ON_CRYPT_ERROR,()=>{Lp(()=>{U.warning("[".concat(this._clientId,"] on crypt error")),this.safeEmit(Tt.CRYPT_ERROR)},this._sessionId)}),this._gateway.signal.on(_t.ON_TOKEN_PRIVILEGE_WILL_EXPIRE,this._handleTokenWillExpire),this._gateway.signal.on(_t.ON_TOKEN_PRIVILEGE_DID_EXPIRE,()=>{U.warning("[".concat(this._clientId,"] received message onTokenPrivilegeDidExpire, please get new token and join again")),this._gateway.leave(!0),this.safeEmit(Tt.ON_TOKEN_PRIVILEGE_DID_EXPIRE),this._reset()}),this._gateway.signal.on(_t.ON_STREAM_FALLBACK_UPDATE,n=>{U.debug("[".concat(this._clientId,"] stream fallback peerId: ").concat(n.stream_id,", attr: ").concat(n.stream_type)),this.safeEmit(Tt.STREAM_FALLBACK,n.stream_id,n.stream_type===1?"fallback":"recover")}),this._gateway.signal.on(_t.ON_PUBLISH_STREAM,n=>{this.uid===this._uid&&(this._p2pChannel.reportPublishEvent(!0,null,void 0,!1,JSON.stringify({proxy:n.proxy})),U.info("[".concat(this._clientId,"] on publish stream, ").concat(JSON.stringify(n))))}),this._gateway.signal.on(_t.ENABLE_LOCAL_VIDEO,n=>{this._handleSetStreamLocalEnable("video",n.uid,!0)}),this._gateway.signal.on(_t.DISABLE_LOCAL_VIDEO,n=>{this._handleSetStreamLocalEnable("video",n.uid,!1)}),this._gateway.signal.on(Be.REQUEST_TIMEOUT,(n,r)=>{if(this._joinInfo)switch(n){case Je.PUBLISH:{if(!r)return;const p=(r=r).ortc;if(p){var o,s,l,h;const v=p.some(C=>{let{stream_type:I}=C;return I===cr.Audio}),E=p.some(C=>{let{stream_type:I}=C;return I!==cr.Audio}),T=p.some(C=>{let{stream_type:I}=C;return I===cr.Screen||I===cr.ScreenLow});r.state==="offer"&&Me.publish(this._joinInfo.sid,{eventElapse:ra.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:!1,ec:W.TIMEOUT,audio:v,video:E,p2pid:r.p2p_id,publishRequestid:this.store.pubId,screenshare:T,audioName:v?(o=p.find(C=>{let{stream_type:I}=C;return I===cr.Audio}))===null||o===void 0||(s=o.ssrcs[0])===null||s===void 0?void 0:s.ssrcId.toString():void 0,videoName:E?(l=p.find(C=>{let{stream_type:I}=C;return I!==cr.Audio}))===null||l===void 0||(h=l.ssrcs[0])===null||h===void 0?void 0:h.ssrcId.toString():void 0})}break}case Je.SUBSCRIBE:(r=r)&&Me.subscribe(this._joinInfo.sid,{succ:!1,ec:W.TIMEOUT,audio:r.stream_type===dt.AUDIO,video:r.stream_type===dt.VIDEO,peerid:r.stream_id,subscribeRequestid:r.ssrcId,p2pid:this.store.p2pId,eventElapse:ra.measureFromSubscribeStart(this.store.clientId,r.ssrcId)})}}),this._gateway.signal.on(_t.ON_P2P_OK,n=>{this.uid,this._uid}),this._gateway.signal.on(_t.ON_PUBLISHED_USER_LIST,n=>{if(n==null||!n.users)return;ie("BLOCK_LOCAL_CLIENT")&&(n.users=n.users.filter(s=>!cu(s.audio_ssrc,this.channelName)));const r=[],o=[];for(const s of n.users){let l=this._users.find(T=>T.uid===s.stream_id);l?l._trust_in_room_=!0:(l=new mC(s.stream_id,s.stream_id),this._users.push(l),this.getListeners(Tt.PUBLISHED_USER_LIST).length===0&&(U.debug("[".concat(this._clientId,"] user online"),s.stream_id),this.safeEmit(Tt.USER_JOINED,l)));const h=er.Audio&s.stream_type,p=(er.Video|er.LwoVideo)&s.stream_type,v=h&&l.hasAudio,E=p&&l.hasVideo;p&&(l._trust_video_stream_added_state_=!0,l._video_added_=!0,l._videoSSRC=s.video_ssrc,l._rtxSsrcId=s.video_rtx),h&&(l._trust_audio_stream_added_state_=!0,l._audio_added_=!0,l._audioSSRC=s.audio_ssrc),h&&!v&&this.getListeners(Tt.PUBLISHED_USER_LIST).length===0&&(U.info("[".concat(this._clientId,"] remote user ").concat(l.uid," published audio")),this.safeEmit(Tt.USER_PUBLISHED,l,"audio")),p&&!E&&this.getListeners(Tt.PUBLISHED_USER_LIST).length===0&&(U.info("[".concat(this._clientId,"] remote user ").concat(l.uid," published video")),this.safeEmit(Tt.USER_PUBLISHED,l,"video")),(h&&!v||p&&!E)&&r.push(l),p&&this._p2pChannel.hasPendingRemoteMedia(l,"video")&&o.push({user:l,mediaType:"video"}),h&&this._p2pChannel.hasPendingRemoteMedia(l,"audio")&&o.push({user:l,mediaType:"audio"})}o.length>0&&(U.debug("[".concat(this._clientId,"] RE massSubscribe after reconnect ").concat(o.map(s=>"user: ".concat(s.user.uid,", mediaType: ").concat(s.mediaType)).join("; ")," ")),this.massSubscribe(o).catch(s=>{U.error("[".concat(this._clientId,"] mass resubscribe error"),s.toString())})),this.getListeners(Tt.PUBLISHED_USER_LIST).length>0?(U.info("[".concat(this._clientId,"] client emit user-list event, users: ").concat(r.map(s=>s.uid).join(", "))),this.safeEmit(Tt.PUBLISHED_USER_LIST,r)):U.info("[".concat(this._clientId,"] client not emit user-list event case there is no user-list listener, users: ").concat(r.map(s=>s.uid).join(", ")))})}_handleP2PChannelEvents(){this._p2pChannel.on(Pt.RequestMuteLocal,async(n,r,o)=>{if(this._joinInfo)try{await this._gateway.muteLocal(n,this._joinInfo.stringUid||this._joinInfo.uid),r()}catch(s){s.code===W.DISCONNECT_P2P?r():o(s)}else r()}),this._p2pChannel.on(Pt.RequestUnmuteLocal,async(n,r,o)=>{if(this._joinInfo)try{await this._gateway.unmuteLocal(n,this._joinInfo.stringUid||this._joinInfo.uid),r()}catch(s){s.code===W.DISCONNECT_P2P?r():o(s)}else r()}),this._p2pChannel.on(Pt.RequestRePublish,(n,r,o)=>{this.publish(n,!1).then(r).catch(o)}),this._p2pChannel.on(Pt.RequestReSubscribe,async(n,r,o)=>{try{for(const{user:s,kind:l}of n)l===dt.VIDEO?await this.subscribe(s,"video"):await this.subscribe(s,"audio");r()}catch(s){o(s)}}),this._p2pChannel.on(Pt.RequestUploadStats,(n,r)=>{this._gateway.uploadStats(n,r)}),this._p2pChannel.on(Pt.MediaReconnectStart,n=>{this.safeEmit(Tt.MEDIA_RECONNECT_START,n)}),this._p2pChannel.on(Pt.MediaReconnectEnd,n=>{this.safeEmit(Tt.MEDIA_RECONNECT_END,n)}),this._p2pChannel.on(Pt.NeedSignalRTT,n=>{n(this._gateway.getSignalRTT())}),this._p2pChannel.on(Pt.RequestRestartICE,async n=>{const r=await this._p2pChannel.restartICE(n),o=await r.next();if(o.done)return;const s=o.value;let l;try{l=await this._gateway.restartICE({iceParameters:s})}catch(p){return void r.throw(p)}const{iceParameters:h}=function(p){const v=p.iceParameters;return{iceParameters:{iceUfrag:v.iceUfrag,icePwd:v.icePwd}}}(l);await r.next({remoteIceParameters:h})}),this._p2pChannel.on(Pt.RequestReconnect,async()=>{this._gateway.reconnect()}),this._p2pChannel.on(Pt.RequestReconnectPC,async()=>{var n;const{iceParameters:r,dtlsParameters:o,rtpCapabilities:s}=await this._p2pChannel.startP2PConnection({turnServer:(n=this._joinInfo)===null||n===void 0?void 0:n.turnServer}),{gatewayEstablishParams:l,gatewayAddress:h}=await this._gateway.reconnectPC({iceParameters:r,dtlsParameters:o,rtpCapabilities:s}),{dtlsParameters:p,iceParameters:v,candidates:E,rtpCapabilities:T,setup:C,cname:I}=$L(l,h);await this._p2pChannel.connect(v,p,E,T,C,I),await this._p2pChannel.republish(),await this._p2pChannel.reSubscribe()}),this._p2pChannel.on(Pt.RequestUnpublishForReconnectPC,async(n,r,o)=>{this._joinInfo&&this._uid!==void 0?(await this._gateway.unpublish(n,this._uid),r()):o()}),this._p2pChannel.on(Pt.P2PLost,()=>{this.safeEmit(Tt.P2P_LOST,this.store.uid)}),this._p2pChannel.on(Pt.UpdateVideoEncoder,n=>{n._encoderConfig&&this._gateway.setVideoProfile(n._encoderConfig)}),this._p2pChannel.on(Pt.ConnectionTypeChange,n=>{this.safeEmit(Tt.IS_USING_CLOUD_PROXY,n)}),this._p2pChannel.on(Pt.RequestLowStreamParameter,n=>{n(this._lowStreamParameter||{width:160,height:120,framerate:15,bitrate:50})}),this._p2pChannel.on(Pt.QueryClientConnectionState,n=>{n(this.connectionState)})}getKeyMetrics(){return this.store.keyMetrics}async enableContentInspect(n){if(this.connectionState!=="CONNECTED"||!this._joinInfo)throw new Q(W.INVALID_OPERATION,"[".concat(this._clientId,"] Client did not join channel"));if(this._inspect)throw new Q(W.INVALID_OPERATION,"[".concat(this._clientId,"] Inspect content service already in connecting/connected state"));if(!n)throw new Q(W.INVALID_PARAMS,"[".concat(this._clientId,"] inspectConfig is necessary"));if(!n.inspectType||!Array.isArray(n.inspectType))throw new Q(W.INVALID_PARAMS,"[".concat(this._clientId,"] inspectConfig.inspectType is necessary and is an instance of Array."));{const r=[...new Set(n.inspectType)];r.forEach(o=>{if(!["supervise","moderation"].includes(o))throw new Q(W.INVALID_PARAMS,"[".concat(this._clientId,"] ").concat(o," is not a valid inspect type."))}),n.inspectType=r}if(n&&n.extraInfo&&n.extraInfo.length>1024)throw new Q(W.INVALID_PARAMS,"[".concat(this._clientId,"] inspectConfig.extraInfo length cannot exceed 1024 bytes"));try{const r=new gg(n);this._inspect=r,this.handleVideoInspectEvents(this._inspect),await r.init({appId:this._joinInfo.appId,areaCode:"",cname:this._joinInfo.cname,sid:this._joinInfo.sid,token:this._joinInfo.token,uid:this._joinInfo.uid,cid:this._joinInfo.cid,vid:this._joinInfo.vid?Number(this._joinInfo.vid):0},Qn)}catch(r){throw Array.isArray(r)?r[0]:r}}async disableContentInspect(){if(!this._inspect)throw new Q(W.INVALID_OPERATION,"[".concat(this._clientId,"] inspectVideoContent not started"));try{this._inspect.close(),this._inspect=void 0}catch(n){throw Array.isArray(n)?n[0]:n}}async setImageModeration(n,r){if(bd(n,"enabled"),n){if(!r)throw new Q(W.INVALID_PARAMS,"[".concat(this._clientId,"] config is necessary"));if(sn(r.interval,"interval",1e3,1/0),this.connectionState!=="CONNECTED"||!this._joinInfo)throw new Q(W.INVALID_OPERATION,"[".concat(this._clientId,'] can not enable image moderation, not joined"'));try{if(this._moderation)return void this._moderation.updateConfig(r);const o=new JC(r);this._moderation=o,this.handleImageModerationEvents(this._moderation),await o.init({appId:this._joinInfo.appId,areaCode:"",cname:this._joinInfo.cname,sid:this._joinInfo.sid,token:this._joinInfo.token,uid:this._joinInfo.uid,cid:this._joinInfo.cid,vid:this._joinInfo.vid?Number(this._joinInfo.vid):0},Qn)}catch(o){throw Array.isArray(o)?o[0]:o}}else{if(!this._moderation)throw new Q(W.INVALID_OPERATION,"[".concat(this._clientId,"] image moderation not started"));try{this._moderation.close(),this._moderation.removeAllListeners(),this._moderation=void 0}catch(o){throw Array.isArray(o)?o[0]:o}}}handleImageModerationEvents(n){n.on(na.CONNECTION_STATE_CHANGE,(r,o)=>{switch(this.emit(Tt.IMAGE_MODERATION_CONNECTION_STATE_CHANGE,r,o),r){case vo.CONNECTED:if(this.connectionState!=="CONNECTED")throw this.setImageModeration(!1),new Q(W.OPERATION_ABORTED,"Image moderation was cancelled because it left the channel");n.inspectImage()}}),n.on(na.CLIENT_LOCAL_VIDEO_TRACK,r=>{r(this.localTracks.filter(o=>o.trackMediaType==="video")[0])})}handleVideoInspectEvents(n){n.on(lr.CONNECTION_STATE_CHANGE,(r,o)=>{switch(this.emit(Tt.CONTENT_INSPECT_CONNECTION_STATE_CHANGE,r,o),o){case Po.CONNECTED:if(this.connectionState!=="CONNECTED")return void this.emit(Tt.CONTENT_INSPECT_ERROR,new Q(W.OPERATION_ABORTED,"Content inspect was cancelled because it left the channel"));n.inspectImage()}}),n.on(lr.INSPECT_RESULT,(r,o)=>{var s;if((o==null?void 0:o.code)===W.INVALID_OPERATION&&this.connectionState==="DISCONNECTED")return U.debug("Stop inspect content because that has left channel"),this==null||(s=this._inspect)===null||s===void 0||s.close(),void(this._inspect=void 0);this.emit(Tt.CONTENT_INSPECT_RESULT,r,o)}),n.on(lr.CLIENT_LOCAL_VIDEO_TRACK,r=>{r(this.localTracks.filter(o=>o.trackMediaType==="video")[0])})}getJoinChannelServiceRecords(){return U.debug("getJoinChannelServiceRecords"),this.store.joinChannelServiceRecords}async setPublishAudioFilterEnabled(n){bd(n,"enabled"),rn("ENABLE_PUBLISH_AUDIO_FILTER",n),this._joinInfo&&await this._gateway.setPublishAudioFilterEnabled(n)}_handleResetAddStream(n,r){switch(r){case"audio":n._audio_added_=!1,n._trust_audio_stream_added_state_=!0;break;case"video":n._video_added_=!1,n._trust_video_stream_added_state_=!0}}}).prototype,"leave",[tM],Object.getOwnPropertyDescriptor(Ae.prototype,"leave"),Ae.prototype),_e(Ae.prototype,"publish",[nM],Object.getOwnPropertyDescriptor(Ae.prototype,"publish"),Ae.prototype),_e(Ae.prototype,"unpublish",[rM],Object.getOwnPropertyDescriptor(Ae.prototype,"unpublish"),Ae.prototype),_e(Ae.prototype,"subscribe",[iM],Object.getOwnPropertyDescriptor(Ae.prototype,"subscribe"),Ae.prototype),_e(Ae.prototype,"massSubscribe",[oM],Object.getOwnPropertyDescriptor(Ae.prototype,"massSubscribe"),Ae.prototype),_e(Ae.prototype,"unsubscribe",[aM],Object.getOwnPropertyDescriptor(Ae.prototype,"unsubscribe"),Ae.prototype),_e(Ae.prototype,"massUnsubscribe",[sM],Object.getOwnPropertyDescriptor(Ae.prototype,"massUnsubscribe"),Ae.prototype),_e(Ae.prototype,"setLowStreamParameter",[cM],Object.getOwnPropertyDescriptor(Ae.prototype,"setLowStreamParameter"),Ae.prototype),_e(Ae.prototype,"enableDualStream",[lM],Object.getOwnPropertyDescriptor(Ae.prototype,"enableDualStream"),Ae.prototype),_e(Ae.prototype,"disableDualStream",[uM],Object.getOwnPropertyDescriptor(Ae.prototype,"disableDualStream"),Ae.prototype),_e(Ae.prototype,"setClientRole",[dM],Object.getOwnPropertyDescriptor(Ae.prototype,"setClientRole"),Ae.prototype),_e(Ae.prototype,"setProxyServer",[hM],Object.getOwnPropertyDescriptor(Ae.prototype,"setProxyServer"),Ae.prototype),_e(Ae.prototype,"setTurnServer",[pM],Object.getOwnPropertyDescriptor(Ae.prototype,"setTurnServer"),Ae.prototype),_e(Ae.prototype,"setLicense",[fM],Object.getOwnPropertyDescriptor(Ae.prototype,"setLicense"),Ae.prototype),_e(Ae.prototype,"startProxyServer",[mM],Object.getOwnPropertyDescriptor(Ae.prototype,"startProxyServer"),Ae.prototype),_e(Ae.prototype,"stopProxyServer",[gM],Object.getOwnPropertyDescriptor(Ae.prototype,"stopProxyServer"),Ae.prototype),_e(Ae.prototype,"setLocalAccessPointsV2",[vM],Object.getOwnPropertyDescriptor(Ae.prototype,"setLocalAccessPointsV2"),Ae.prototype),_e(Ae.prototype,"setLocalAccessPoints",[EM],Object.getOwnPropertyDescriptor(Ae.prototype,"setLocalAccessPoints"),Ae.prototype),_e(Ae.prototype,"setRemoteDefaultVideoStreamType",[_M],Object.getOwnPropertyDescriptor(Ae.prototype,"setRemoteDefaultVideoStreamType"),Ae.prototype),_e(Ae.prototype,"setRemoteVideoStreamType",[yM],Object.getOwnPropertyDescriptor(Ae.prototype,"setRemoteVideoStreamType"),Ae.prototype),_e(Ae.prototype,"setStreamFallbackOption",[SM],Object.getOwnPropertyDescriptor(Ae.prototype,"setStreamFallbackOption"),Ae.prototype),_e(Ae.prototype,"setEncryptionConfig",[CM],Object.getOwnPropertyDescriptor(Ae.prototype,"setEncryptionConfig"),Ae.prototype),_e(Ae.prototype,"renewToken",[bM],Object.getOwnPropertyDescriptor(Ae.prototype,"renewToken"),Ae.prototype),_e(Ae.prototype,"enableAudioVolumeIndicator",[TM],Object.getOwnPropertyDescriptor(Ae.prototype,"enableAudioVolumeIndicator"),Ae.prototype),_e(Ae.prototype,"startLiveStreaming",[RM],Object.getOwnPropertyDescriptor(Ae.prototype,"startLiveStreaming"),Ae.prototype),_e(Ae.prototype,"setLiveTranscoding",[IM],Object.getOwnPropertyDescriptor(Ae.prototype,"setLiveTranscoding"),Ae.prototype),_e(Ae.prototype,"stopLiveStreaming",[wM],Object.getOwnPropertyDescriptor(Ae.prototype,"stopLiveStreaming"),Ae.prototype),_e(Ae.prototype,"addInjectStreamUrl",[OM],Object.getOwnPropertyDescriptor(Ae.prototype,"addInjectStreamUrl"),Ae.prototype),_e(Ae.prototype,"removeInjectStreamUrl",[AM],Object.getOwnPropertyDescriptor(Ae.prototype,"removeInjectStreamUrl"),Ae.prototype),_e(Ae.prototype,"startChannelMediaRelay",[NM],Object.getOwnPropertyDescriptor(Ae.prototype,"startChannelMediaRelay"),Ae.prototype),_e(Ae.prototype,"updateChannelMediaRelay",[xM],Object.getOwnPropertyDescriptor(Ae.prototype,"updateChannelMediaRelay"),Ae.prototype),_e(Ae.prototype,"stopChannelMediaRelay",[PM],Object.getOwnPropertyDescriptor(Ae.prototype,"stopChannelMediaRelay"),Ae.prototype),_e(Ae.prototype,"sendCustomReportMessage",[DM],Object.getOwnPropertyDescriptor(Ae.prototype,"sendCustomReportMessage"),Ae.prototype),_e(Ae.prototype,"pickSVCLayer",[kM],Object.getOwnPropertyDescriptor(Ae.prototype,"pickSVCLayer"),Ae.prototype),_e(Ae.prototype,"enableContentInspect",[LM],Object.getOwnPropertyDescriptor(Ae.prototype,"enableContentInspect"),Ae.prototype),_e(Ae.prototype,"disableContentInspect",[MM],Object.getOwnPropertyDescriptor(Ae.prototype,"disableContentInspect"),Ae.prototype),_e(Ae.prototype,"setImageModeration",[UM],Object.getOwnPropertyDescriptor(Ae.prototype,"setImageModeration"),Ae.prototype),_e(Ae.prototype,"getJoinChannelServiceRecords",[jM],Object.getOwnPropertyDescriptor(Ae.prototype,"getJoinChannelServiceRecords"),Ae.prototype),_e(Ae.prototype,"setPublishAudioFilterEnabled",[FM],Object.getOwnPropertyDescriptor(Ae.prototype,"setPublishAudioFilterEnabled"),Ae.prototype),Ae);class pQ extends LP{set currentState(r){r!==this._currentState&&(this._currentState=r,this.safeEmit(Zi.AUDIO_SOURCE_STATE_CHANGE,this._currentState))}get currentState(){return this._currentState}constructor(r){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),N(this,"audioBuffer",void 0),N(this,"sourceNode",void 0),N(this,"startPlayTime",0),N(this,"startPlayOffset",0),N(this,"pausePlayTime",0),N(this,"options",void 0),N(this,"currentLoopCount",0),N(this,"currentPlaybackSpeed",100),N(this,"_currentState","stopped"),this.audioBuffer=r,this.options=o,this.startPlayOffset=this.options.startPlayTime||0}createWebAudioDiagram(){return this.context.createGain()}get duration(){return this.audioBuffer.duration}get playbackSpeed(){return this.currentPlaybackSpeed}get currentTime(){return this.currentState==="stopped"?0:this.currentState==="paused"?this.pausePlayTime:((this.context.currentTime-this.startPlayTime)*(this.playbackSpeed/100)+this.startPlayOffset)%this.audioBuffer.duration}updateOptions(r){this.currentState==="stopped"?(this.options=r,this.startPlayOffset=this.options.startPlayTime||0):U.warning("can not set audio source options")}startProcessAudioBuffer(){this.sourceNode&&this.stopProcessAudioBuffer(),this.sourceNode=this.createSourceNode(),this.startSourceNode(),this.currentState="playing"}pauseProcessAudioBuffer(){this.sourceNode&&this.currentState==="playing"&&(this.pausePlayTime=this.currentTime,this.sourceNode.onended=null,this.sourceNode.stop(),this.sourceNode.buffer=null,this.sourceNode=this.createSourceNode(),this.currentState="paused")}seekAudioBuffer(r){this.sourceNode&&(this.sourceNode.onended=null,this.currentState==="playing"&&this.sourceNode.stop(),this.sourceNode=this.createSourceNode(),this.currentState==="playing"?(this.startPlayOffset=r,this.startSourceNode()):this.currentState==="paused"&&(this.pausePlayTime=r))}resumeProcessAudioBuffer(){this.currentState==="paused"&&this.sourceNode&&(this.startPlayOffset=this.pausePlayTime,this.pausePlayTime=0,this.startSourceNode(),this.currentState="playing")}stopProcessAudioBuffer(){if(this.sourceNode){this.sourceNode.onended=null;try{this.sourceNode.stop()}catch{}this.reset()}}setAudioBufferPlaybackSpeed(r){this.sourceNode&&(this.currentState==="playing"&&(this.startPlayOffset=this.currentTime,this.startPlayTime=this.context.currentTime),this.sourceNode.playbackRate.value=r/100),this.currentPlaybackSpeed=r}startSourceNode(){this.sourceNode&&this.sourceNode.buffer&&(this.sourceNode.start(0,this.startPlayOffset),this.startPlayTime=this.context.currentTime,this.sourceNode.onended=this.handleSourceNodeEnded.bind(this))}createSourceNode(){const r=this.context.createBufferSource();return r.buffer=this.audioBuffer,r.loop=!!this.options.loop,r.connect(this.outputNode),r.playbackRate.value=this.currentPlaybackSpeed/100,r}handleSourceNodeEnded(){if(this.currentLoopCount+=1,this.options.cycle&&this.options.cycle>this.currentLoopCount)return this.startPlayOffset=0,this.sourceNode=void 0,void this.startProcessAudioBuffer();this.reset()}reset(){this.startPlayOffset=this.options.startPlayTime||0,this.currentState="stopped",this.sourceNode&&(this.sourceNode.disconnect(),this.sourceNode=void 0),this.currentLoopCount=0}}const BM=new Map;async function fQ(n,r){let o=null;if(typeof n=="string"){const l=BM.get(n);if(l)return U.debug("use cached audio resource: ",n),l;try{o=(await ts(()=>Ao.get(n,{responseType:"arraybuffer"}),void 0,void 0,{maxRetryCount:3})).data}catch(h){throw new Q(W.FETCH_AUDIO_FILE_FAILED,h.toString())}}else o=await new xe((h,p)=>{const v=new FileReader;v.onload=E=>{E.target?h(E.target.result):p(new Q(W.READ_LOCAL_AUDIO_FILE_ERROR))},v.onerror=()=>{p(new Q(W.READ_LOCAL_AUDIO_FILE_ERROR))},v.readAsArrayBuffer(n)});const s=await function(l){const h=Ad();return new xe((p,v)=>{h.decodeAudioData(l,E=>{p(E)},E=>{v(new Q(W.DECODE_AUDIO_FILE_FAILED,E.toString()))})})}(o);return typeof n=="string"&&r&&BM.set(n,s),s}function $M(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function Eg(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?$M(Object(o),!0).forEach(function(s){N(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):$M(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}function QC(n,r,o,s){o.optimizationMode&&(s&&s.width&&s.height?(o.encoderConfig=Eg(Eg({},s),{},{bitrateMin:s.bitrateMin,bitrateMax:s.bitrateMax}),o.optimizationMode!=="motion"&&o.optimizationMode!=="detail"||(r.contentHint=o.optimizationMode,r.contentHint===o.optimizationMode?U.debug("[".concat(n,"] set content hint to"),o.optimizationMode):U.debug("[".concat(n,"] set content hint failed")))):U.warning("[".concat(n,"] can not apply optimization mode bitrate config, no encoderConfig")))}const mQ=Ht().name;function gQ(n,r,o,s){let l,h=0,p=null;return new xe((v,E)=>{setTimeout(()=>{l&&(l(),v(h))},r),l=DP(()=>{(function(){h>s&&l&&(l(),v(h));const T=o.getContext("2d");if(!T){const L=new Q(W.UNEXPECTED_ERROR,"can not get canvas 2d context.");return U.error(L.toString()),void E(L)}T.drawImage(n,0,0,160,120);const C=T.getImageData(0,0,o.width,o.height),I=Math.floor(C.data.length/3);if(p){for(let L=0;L<I;L+=3)if(C.data[L]!==p[L])return h+=1,void(p=C.data);p=C.data}else p=C.data})()},30)})}class Jp{constructor(r,o){N(this,"id",0),N(this,"element",void 0),N(this,"peerPair",void 0),N(this,"context",void 0),N(this,"audioPlayerElement",void 0),N(this,"audioTrack",void 0),Jp.count+=1,this.id=Jp.count,this.element=r,this.context=o}initPeers(){this.peerPair=[new RTCPeerConnection,new RTCPeerConnection],this.peerPair[1].ontrack=r=>{const o=document.createElement("audio");o.srcObject=new MediaStream([r.track]),o.play(),this.audioPlayerElement=o}}async switchSdp(){if(!this.peerPair)return;const r=async(s,l)=>{const h=l==="offer"?await s.createOffer():await s.createAnswer();return await s.setLocalDescription(h),s.iceGatheringState==="complete"?s.localDescription:new xe(p=>{s.onicegatheringstatechange=()=>{s.iceGatheringState==="complete"&&p(s.localDescription)}})},o=async(s,l)=>await s.setRemoteDescription(l);try{const s=await r(this.peerPair[0],"offer");await o(this.peerPair[1],s);const l=await r(this.peerPair[1],"answer");await o(this.peerPair[0],l)}catch(s){throw new Q(W.LOCAL_AEC_ERROR,s.toString()).print()}}async getTracksFromMediaElement(r){if(this.audioTrack)return this.audioTrack;let o;try{r instanceof HTMLVideoElement&&(r.captureStream?r.captureStream():r.mozCaptureStream()),o=this.context.createMediaStreamDestination(),this.context.createMediaElementSource(r).connect(o)}catch(l){throw new Q(W.LOCAL_AEC_ERROR,l.toString()).print()}if(!o)throw new Q(W.LOCAL_AEC_ERROR,"no dest node when local aec").print();const s=o.stream.getAudioTracks()[0];return this.audioTrack=s,s}getElement(){return this.element}async startEchoCancellation(){this.context.resume(),this.peerPair&&this.close(),this.initPeers();const r=this.element,o=await this.getTracksFromMediaElement(r);this.peerPair&&this.peerPair[0].addTrack(o),await this.switchSdp()}close(){U.debug("close echo cancellation unit, id is",this.id),this.audioPlayerElement&&this.audioPlayerElement.pause(),this.peerPair&&this.peerPair.forEach(r=>{r.close()}),this.peerPair=void 0,this.audioPlayerElement=void 0}}var HM,_g;N(Jp,"count",0);const vQ=window.AudioContext||window.webkitAudioContext,EQ=new(HM=ze({report:Me}),_e((_g=class{constructor(){N(this,"units",[]),N(this,"context",void 0)}processExternalMediaAEC(n){if(!this._doesEnvironmentNeedAEC())return U.debug("the system does not need to process local aec"),-1;this.context||(this.context=new vQ);let r=this.units.find(o=>o&&o.getElement()===n);return r||(r=new Jp(n,this.context),this.units.push(r)),r.startEchoCancellation(),U.debug("start processing local audio echo cancellation, id is",r.id),r.id}_doesEnvironmentNeedAEC(){return Ht().name!==qt.SAFARI}}).prototype,"processExternalMediaAEC",[HM],Object.getOwnPropertyDescriptor(_g.prototype,"processExternalMediaAEC"),_g.prototype),_g);function WM(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function GM(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?WM(Object(o),!0).forEach(function(s){N(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):WM(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}const ZC=window||document;function zM(n){let r=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!ZC)return;const o=mr._cspEventHandlerPointer;if(o&&r)return void console.error(o,r);const s=l=>{if(!(l&&l.blockedURI&&(mr.onSecurityPolicyViolation||mr.getListeners(is.SECURITY_POLICY_VIOLATION).length>0)))return;const h=l.blockedURI;ie("CSP_DETECTED_HOSTNAME_LIST").some(p=>h.includes(p))&&(mr.onSecurityPolicyViolation&&typeof mr.onSecurityPolicyViolation=="function"&&mr.onSecurityPolicyViolation(l),mr.getListeners(is.SECURITY_POLICY_VIOLATION).length>0&&mr.safeEmit(is.SECURITY_POLICY_VIOLATION,l))};o&&ZC.removeEventListener("securitypolicyviolation",o),(r||n&&typeof n=="function"||mr.getListeners(is.SECURITY_POLICY_VIOLATION).length>0)&&ZC.addEventListener("securitypolicyviolation",s),mr._cspEventHandlerPointer=s}rn("PROCESS_ID","process-".concat(pn(8,""),"-").concat(pn(4,""),"-").concat(pn(4,""),"-").concat(pn(4,""),"-").concat(pn(12,""))),function(){const n=Ht();pi.getDisplayMedia=function(r){return!!(navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia)}(),pi.getStreamFromExtension=n.name===qt.CHROME&&Number(n.version)>34,pi.supportUnifiedPlan=function(){if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;const r=new RTCPeerConnection;let o=!1;try{r.addTransceiver("audio"),o=!0}catch{}return r.close(),o}(),pi.supportMinBitrate=n.name===qt.CHROME||n.name===qt.EDGE,pi.supportSetRtpSenderParameters=function(){const r=Ht();return!window.RTCRtpSender||!window.RTCRtpSender.prototype.setParameters||!window.RTCRtpSender.prototype.getParameters?!1:!!ru()||!(!bi()&&!b0())||r.name===qt.FIREFOX&&Number(r.version)>=64}(),n.name===qt.SAFARI&&(Number(n.version)>=14?pi.supportDualStream=!0:pi.supportDualStream=!1),pi.webAudioMediaStreamDest=function(){const r=Ht();return!(r.name===qt.SAFARI&&Number(r.version)<12)}(),pi.supportReplaceTrack=function(){return window.RTCRtpSender?typeof RTCRtpSender.prototype.replaceTrack=="function":!1}(),pi.supportWebGL=typeof WebGLRenderingContext<"u",pi.supportRequestFrame=!!window.CanvasCaptureMediaStreamTrack,ru()||(pi.webAudioWithAEC=!0),pi.supportShareAudio=function(){const r=Ht();return(r.os===qr.WIN_10||r.os===qr.WIN_81||r.os===qr.WIN_7||r.os===qr.LINUX||r.os===qr.MAC_OS)&&r.name===qt.CHROME&&Number(r.version)>=74}(),pi.supportDualStreamEncoding=function(){const r=Ht();return ie("DISABLE_WEBAUDIO")?!0:r.name==="Safari"&&Number(r.version)>=14||!!(r.name==="Chrome"&&/Windows/i.test(r.os||"")&&Number(r.version)>=100&&ie("CHROME_DUAL_STREAM_USE_ENCODING"))}(),pi.supportDataChannel=function(){return!!(tS(76)||function(r){const o=Ht();return!(o.name!==qt.FIREFOX||!o.osVersion)&&Number(o.version)>=r}(68)||function(r){const o=Ht();return!(o.name!==qt.SAFARI||!o.osVersion)&&Number(o.version)>=r}(14))}(),pi.supportPCSetConfiguration=function(){const r=window.RTCPeerConnection;return!Pn()&&!!r&&r.prototype.setConfiguration instanceof Function}(),pi.supportWebRTCEncodedTransform=function(){const r=Ht();return r.name==="Chrome"&&Number(r.version)>=86}(),U.info("browser compatibility",JSON.stringify(pi),JSON.stringify(n))}(),function(){let n;try{n=window.localStorage.getItem("websdk_ng_global_parameter")}catch(r){return void U.error("Error loading sdk config",r.message)}if(n)try{const r=JSON.parse(window.atob(n)),o=Date.now();U.debug("Loading global parameters from cache",r),Object.keys(r).forEach(s=>{if(Object.prototype.hasOwnProperty.call(Qi,s)){const{value:l,expires:h}=r[s];if(h&&h<=o)return;au[s]=l,Qi[s]=l}})}catch(r){U.error("Error loading mutableParamsCache: ".concat(n),r.message)}}(),Array.isArray(au.AREAS)&&au.AREAS.length>0&&lC(au.AREAS,!0);const mr=function(n){const r=new Rn,o=n,s={getListeners:r.getListeners.bind(r),on:(l,h)=>(function(p,v){p===is.SECURITY_POLICY_VIOLATION&&zM(v,!0)}(l,h),r.on.bind(r)(l,h)),addListener:r.addListener.bind(r),once:r.once.bind(r),off:r.off.bind(r),removeAllListeners:r.removeAllListeners.bind(r),emit:r.emit.bind(r),safeEmit:r.safeEmit.bind(r)};return GM(GM({},o),s)}({__CLIENT_LIST__:su,__TRACK_LIST__:Ap,VERSION:ta,BUILD:yS,setParameter:(n,r,o)=>{U.debug("setParameter key:".concat(n,", value:").concat(JSON.stringify(r))),rn(n,r,o)},getParameter:ie,getSupportedCodec:async function(){let n={audio:[],video:[]};try{let r=new RTCPeerConnection;r.addTransceiver("video",{direction:"recvonly"}),r.addTransceiver("audio",{direction:"recvonly"});const o=(await r.createOffer()).sdp;if(!o)return n;r.close(),r=null,n=function(s){const l={video:[],audio:[]};return s.match(/ VP8/i)&&l.video.push("VP8"),s.match(/ VP9/i)&&l.video.push("VP9"),s.match(/ AV1/i)&&l.video.push("AV1"),s.match(/ H264/i)&&l.video.push("H264"),s.match(/ H265/i)&&l.video.push("H265"),s.match(/ opus/i)&&l.audio.push("OPUS"),s.match(/ PCMU/i)&&l.audio.push("PCMU"),s.match(/ PCMA/i)&&l.audio.push("PCMA"),s.match(/ G722/i)&&l.audio.push("G722"),l}(o)}catch(r){throw new Q(W.CREATE_OFFER_FAILED,r.toString&&r.toString()).print()}return n},checkSystemRequirements:function(){const n=Me.reportApiInvoke(null,{name:Zn.CHECK_SYSTEM_REQUIREMENTS,options:[],tag:bn.TRACER});let r=!1;try{const h=window.RTCPeerConnection,p=navigator.mediaDevices&&navigator.mediaDevices.getUserMedia,v=window.WebSocket;r=!!(h&&p&&v)}catch(h){return U.error("check system requirement failed: ",h),!1}let o=!1;const s=Ht();s.name===qt.CHROME&&Number(s.version)>=58&&(!bK()||CK())&&(o=!0),s.name===qt.FIREFOX&&Number(s.version)>=56&&(o=!0),s.name===qt.OPERA&&Number(s.version)>=45&&(o=!0),s.name===qt.SAFARI&&Number(s.version)>=11&&(o=!0),(ox()||Ht().name===qt.QQ)&&(o=!0),U.debug("checkSystemRequirements, api:",r,"browser",o);const l=r&&o;return n.onSuccess(l),l},getDevices:function(n){return Mo.enumerateDevices(!0,!0,n)},getMicrophones:function(n){return Mo.getRecordingDevices(n)},getCameras:function(n){return Mo.getCamerasDevices(n)},getElectronScreenSources:UP,getPlaybackDevices:function(n){return Mo.getSpeakers(n)},createClient:function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{codec:"vp8",audioCodec:"opus",mode:"rtc"};const r=Me.reportApiInvoke(null,{name:Zn.CREATE_CLIENT,options:[n],tag:bn.TRACER});try{QY(n)}catch(o){throw r.onError(o),o}return n.audioCodec===void 0&&(n.audioCodec="opus"),r.onSuccess(),new hQ(Xp(Xp({forceWaitGatewayResponse:!0},n),{},{role:n.mode==="rtc"?"host":n.role||"audience"}))},createCameraVideoTrack:async function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=Me.reportApiInvoke(null,{tag:bn.TRACER,name:Zn.CREATE_CAM_VIDEO_TRACK,options:[Eg({},n)]}),o=eg(n),s=pn(8,"track-cam-");let l=null;U.info("start create camera video track with config",JSON.stringify(n),"trackId",s);try{l=(await Oa({video:o},s)).getVideoTracks()[0]||null}catch(p){throw r.onError(p),p}if(!l){const p=new Q(W.UNEXPECTED_ERROR,"can not find track in media stream");return r.onError(p),p.throw()}n.optimizationMode&&QC(s,l,n,ou(n.encoderConfig));const h=new aL(l,n,o,n.scalabiltyMode?L0(n.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},n.optimizationMode,s);return r.onSuccess(h.getTrackId()),U.info("create camera video success, trackId:",s),h},createCustomVideoTrack:function(n){const r=Me.reportApiInvoke(null,{tag:bn.TRACER,name:Zn.CREATE_CUSTOM_VIDEO_TRACK,options:[n]}),o=new rr(n.mediaStreamTrack,{width:n.width,height:n.height,frameRate:n.frameRate,bitrateMax:n.bitrateMax,bitrateMin:n.bitrateMin},n.scalabiltyMode?L0(n.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},n.optimizationMode,pn(8,"track-cus-"),[pr.CUSTOM_TRACK]);return r.onSuccess(o.getTrackId()),U.info("create custom video track success with config",n,"trackId",o.getTrackId()),o},createScreenVideoTrack:async function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"disable";const o=Me.reportApiInvoke(null,{tag:bn.TRACER,name:Zn.CREATE_SCREEN_VIDEO_TRACK,options:[Eg({},n),r]});n.encoderConfig?typeof n.encoderConfig=="string"||n.encoderConfig.width&&n.encoderConfig.height||(n.encoderConfig.width={max:1920},n.encoderConfig.height={max:1080}):n.encoderConfig="1080p_2";const s=$X(n),l=pn(8,"track-scr-v-");let h=null,p=null;const v=zn();if(!v.supportShareAudio&&r==="enable"){const C=new Q(W.NOT_SUPPORTED,"your browser or platform is not support share-screen with audio");return o.onError(C),C.throw()}U.info("start create screen video track with config",n,"withAudio",r,"trackId",l);try{const C=await Oa({screen:s,screenAudio:r==="auto"?v.supportShareAudio:r==="enable"},l);h=C.getVideoTracks()[0]||null,p=C.getAudioTracks()[0]||null}catch(C){throw o.onError(C),C}if(!h){const C=new Q(W.UNEXPECTED_ERROR,"can not find track in media stream");return o.onError(C),C.throw()}if(!p&&r==="enable"){h&&h.stop();const C=new Q(W.SHARE_AUDIO_NOT_ALLOWED);return o.onError(C),C.throw()}n.optimizationMode||(n.optimizationMode="detail"),n.optimizationMode&&(QC(l,h,n,n.encoderConfig&&CS(n.encoderConfig)),n.encoderConfig&&typeof n.encoderConfig!="string"&&(n.encoderConfig.bitrateMin=n.encoderConfig.bitrateMax));const E=new rr(h,n.encoderConfig?CS(n.encoderConfig):{},n.scalabiltyMode?L0(n.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},n.optimizationMode,l,[pr.SCREEN_TRACK]);if(!p)return o.onSuccess(E.getTrackId()),U.info("create screen video track success","video:",E.getTrackId()),E;const T=new ti(p,void 0,pn(8,"track-scr-a-"),!1,!0);return o.onSuccess([E.getTrackId(),T.getTrackId()]),U.info("create screen video track success","video:",E.getTrackId(),"audio:",T.getTrackId()),[E,T]},createMicrophoneAndCameraTracks:async function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const o=Me.reportApiInvoke(null,{tag:bn.TRACER,name:Zn.CREATE_MIC_AND_CAM_TRACKS,options:[n,r]}),s=eg(r),l=Rk(n),h=pn(8,"track-mic-"),p=pn(8,"track-cam-");let v=null,E=null;U.info("start create camera video track(".concat(p,") and microphone audio track(").concat(h,") with config, audio: ").concat(JSON.stringify(n),", video: ").concat(JSON.stringify(r)));try{const I=await Oa({audio:l,video:s},"".concat(h,"-").concat(p));v=I.getAudioTracks()[0],E=I.getVideoTracks()[0]}catch(I){throw o.onError(I),I}if(!v||!E){const I=new Q(W.UNEXPECTED_ERROR,"can not find tracks in media stream");return o.onError(I),I.throw()}r.optimizationMode&&QC(p,E,r,ou(r.encoderConfig));const T=new G0(v,n,l,h),C=new aL(E,r,s,r.scalabiltyMode?L0(r.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},r.optimizationMode,p);return o.onSuccess([T.getTrackId(),C.getTrackId()]),U.info("create camera video track(".concat(p,") and microphone audio track(").concat(h,") success")),[T,C]},createMicrophoneAudioTrack:async function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=Me.reportApiInvoke(null,{tag:bn.TRACER,name:Zn.CREATE_MIC_AUDIO_TRACK,options:[n]}),o=Rk(n),s=pn(8,"track-mic-");let l=null;U.info("start create microphone audio track with config",JSON.stringify(n),"trackId",s);try{l=(await Oa({audio:o},s)).getAudioTracks()[0]||null}catch(p){throw r.onError(p),p}if(!l){const p=new Q(W.UNEXPECTED_ERROR,"can not find track in media stream");return r.onError(p),p.throw()}const h=new G0(l,n,o,s);return r.onSuccess(h.getTrackId()),U.info("create microphone audio track success, trackId:",s),h},createCustomAudioTrack:function(n){const r=Me.reportApiInvoke(null,{tag:bn.TRACER,name:Zn.CREATE_CUSTOM_AUDIO_TRACK,options:[n]}),o=new ti(n.mediaStreamTrack,n.encoderConfig?M0(n.encoderConfig):{},pn(8,"track-cus-"),!1,!0);return U.info("create custom audio track success with config",n,"trackId",o.getTrackId()),r.onSuccess(o.getTrackId()),o},createBufferSourceAudioTrack:async function(n){const r=Me.reportApiInvoke(null,{tag:bn.TRACER,name:Zn.CREATE_BUFFER_AUDIO_TRACK,options:[n]});if(ie("DISABLE_WEBAUDIO"))throw new Q(W.NOT_SUPPORTED,"can not create BufferSourceAudioTrack when WebAudio disabled");const o=pn(8,"track-buf-");U.info("start create buffer source audio track with config",JSON.stringify(n),"trackId",o);const s=n.source;if(!(n.source instanceof AudioBuffer))try{n.source=await fQ(n.source,n.cacheOnlineFile)}catch(p){return r.onError(p),p.throw()}const l=new pQ(n.source),h=new _X(s,l,n.encoderConfig?M0(n.encoderConfig):{},o);return U.info("create buffer source audio track success, trackId:",o),r.onSuccess(h.getTrackId()),h},setAppType:function(n){if(U.debug("setAppType: ".concat(n)),!(Number.isInteger(n)&&n>=0))throw U.debug("Invalid appType"),new Q(W.INVALID_PARAMS,"invalid app type",n);rn("APP_TYPE",Math.floor(n))},setLogLevel:function(n){U.setLogLevel(n)},enableLogUpload:function(){ie("USE_NEW_LOG")?rn("UPLOAD_LOG",!0):U.enableLogUpload()},disableLogUpload:function(){ie("USE_NEW_LOG")?rn("UPLOAD_LOG",!1):U.disableLogUpload()},createChannelMediaRelayConfiguration:function(){return new Ek},checkAudioTrackIsActive:async function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5e3;const o=Me.reportApiInvoke(null,{tag:bn.TRACER,name:Zn.CHECK_AUDIO_TRACK_IS_ACTIVE,options:[r]});if(!(n instanceof ti||n instanceof hg)){const E=new Q(W.INVALID_TRACK,"the parameter is not a audio track");return o.onError(E),E.throw()}r&&r<1e3&&(r=1e3);const s=n instanceof ti?n.getTrackLabel():"remote_track",l=n.getVolumeLevel();let h=l,p=l;const v=Date.now();return new xe(E=>{const T=setInterval(()=>{const C=n.getVolumeLevel();h=C>h?C:h,p=C<p?C:p;const I=h-p>1e-4,L=Date.now()-v;if(I||L>r){clearInterval(T);const V=I,Y={duration:L,deviceLabel:s,maxVolumeLevel:h,result:V};U.info("[track-".concat(n.getTrackId(),"] check audio track active completed. ").concat(JSON.stringify(Y))),o.onSuccess(Y),E(V)}},200)})},checkVideoTrackIsActive:async function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5e3;const o=Me.reportApiInvoke(null,{tag:bn.TRACER,name:Zn.CHECK_VIDEO_TRACK_IS_ACTIVE,options:[r]});if(!(n instanceof rr||n instanceof dg)){const L=new Q(W.INVALID_TRACK,"the parameter is not a video track");return o.onError(L),L.throw()}const s=4;r&&r<1e3&&(r=1e3);const l=n instanceof rr?n.getTrackLabel():"remote_track",h=n.getMediaStreamTrack(!0),p=document.createElement("video");p.style.width="1px",p.style.height="1px",p.setAttribute("muted",""),p.muted=!0,p.setAttribute("playsinline",""),p.controls=!1,(bi()||b0())&&(p.style.opacity="0.01",p.style.position="fixed",p.style.left="0",p.style.top="0",document.body.appendChild(p)),p.srcObject=new MediaStream([h]),p.play();const v=document.createElement("canvas");v.width=160,v.height=120;let E=0,T=0;try{const L=Date.now();E=await gQ(p,r,v,s),T=Date.now()-L}catch(L){throw o.onError(L),L}mQ===qt.SAFARI&&(p.pause(),p.remove()),p.srcObject=null;const C=E>s,I={duration:T,changedPicNum:E,deviceLabel:l,result:C};return U.info("[track-".concat(n.getTrackId(),"] check video track active completed. ").concat(JSON.stringify(I))),o.onSuccess(I),C},setArea:lC,audioElementPlayCenter:Eo,processExternalMediaAEC:function(n){EQ.processExternalMediaAEC(n)},registerExtensions:function(n){n.forEach(r=>{const o=r;o.__registered__=!0,o.logger.hookLog=U.extLog,o.reporter.hookApiInvoke=Me.extApiInvoke,o.parameters&&Object.keys(o.parameters).forEach(s=>{o.parameters[s]=ie(s)})})},ChannelMediaRelayError:el,ChannelMediaRelayEvent:ns,ChannelMediaRelayState:Ii,RemoteStreamFallbackType:VS,RemoteStreamType:FS,ConnectionDisconnectedReason:Wt,AudienceLatencyLevelType:kS,AREAS:xt});return Object.defineProperties(mr,{onAudioAutoplayFailed:{get:()=>ko.onAudioAutoplayFailed,set:n=>{ko.onAudioAutoplayFailed=n}},onAutoplayFailed:{get:()=>ko.onAutoplayFailed,set:n=>{ko.onAutoplayFailed=n}},_onSecurityPolicyViolation:{value:void 0,writable:!0},_cspEventHandlerPointer:{value:void 0,writable:!0},onSecurityPolicyViolation:{get:()=>mr._onSecurityPolicyViolation,set(n){mr._onSecurityPolicyViolation=n,zM(n)}}}),Mo.on(lc.CAMERA_DEVICE_CHANGED,n=>{U.info("camera device changed",JSON.stringify(n)),mr.onCameraChanged&&mr.onCameraChanged(n),mr.safeEmit(is.CAMERA_CHANGED,n)}),Mo.on(lc.RECORDING_DEVICE_CHANGED,n=>{U.info("microphone device changed",JSON.stringify(n)),mr.onMicrophoneChanged&&mr.onMicrophoneChanged(n),mr.safeEmit(is.MICROPHONE_CHANGED,n)}),Mo.on(lc.PLAYOUT_DEVICE_CHANGED,n=>{U.debug("playout device changed",JSON.stringify(n)),mr.onPlaybackDeviceChanged&&mr.onPlaybackDeviceChanged(n),mr.safeEmit(is.PLAYBACK_DEVICE_CHANGED,n)}),Eo.onAutoplayFailed=()=>{U.info("detect audio element autoplay failed"),ko.onAudioAutoplayFailed&&ko.onAudioAutoplayFailed()},Gt.on("autoplay-failed",()=>{U.info("detect webaudio autoplay failed"),ko.onAudioAutoplayFailed&&ko.onAudioAutoplayFailed(),mr.safeEmit(is.AUTOPLAY_FAILED)}),window&&(window.__ARTC__=mr),mr})})(UV);var HQ=UV.exports;const Rc=Lc(HQ);var QT={},FV={exports:{}},Sa={},VV={exports:{}},BV={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(ue,me){var fe=ue.length;ue.push(me);e:for(;0<fe;){var se=fe-1>>>1,ae=ue[se];if(0<c(ae,me))ue[se]=me,ue[fe]=ae,fe=se;else break e}}function i(ue){return ue.length===0?null:ue[0]}function a(ue){if(ue.length===0)return null;var me=ue[0],fe=ue.pop();if(fe!==me){ue[0]=fe;e:for(var se=0,ae=ue.length,de=ae>>>1;se<de;){var ce=2*(se+1)-1,we=ue[ce],Ie=ce+1,$e=ue[Ie];if(0>c(we,fe))Ie<ae&&0>c($e,we)?(ue[se]=$e,ue[Ie]=fe,se=Ie):(ue[se]=we,ue[ce]=fe,se=ce);else if(Ie<ae&&0>c($e,fe))ue[se]=$e,ue[Ie]=fe,se=Ie;else break e}}return me}function c(ue,me){var fe=ue.sortIndex-me.sortIndex;return fe!==0?fe:ue.id-me.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;e.unstable_now=function(){return u.now()}}else{var d=Date,f=d.now();e.unstable_now=function(){return d.now()-f}}var m=[],g=[],_=1,S=null,b=3,A=!1,R=!1,w=!1,D=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function P(ue){for(var me=i(g);me!==null;){if(me.callback===null)a(g);else if(me.startTime<=ue)a(g),me.sortIndex=me.expirationTime,t(m,me);else break;me=i(g)}}function M(ue){if(w=!1,P(ue),!R)if(i(m)!==null)R=!0,oe(F);else{var me=i(g);me!==null&&pe(M,me.startTime-ue)}}function F(ue,me){R=!1,w&&(w=!1,x(H),H=-1),A=!0;var fe=b;try{for(P(me),S=i(m);S!==null&&(!(S.expirationTime>me)||ue&&!Z());){var se=S.callback;if(typeof se=="function"){S.callback=null,b=S.priorityLevel;var ae=se(S.expirationTime<=me);me=e.unstable_now(),typeof ae=="function"?S.callback=ae:S===i(m)&&a(m),P(me)}else a(m);S=i(m)}if(S!==null)var de=!0;else{var ce=i(g);ce!==null&&pe(M,ce.startTime-me),de=!1}return de}finally{S=null,b=fe,A=!1}}var j=!1,B=null,H=-1,K=5,$=-1;function Z(){return!(e.unstable_now()-$<K)}function z(){if(B!==null){var ue=e.unstable_now();$=ue;var me=!0;try{me=B(!0,ue)}finally{me?G():(j=!1,B=null)}}else j=!1}var G;if(typeof O=="function")G=function(){O(z)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,re=ee.port2;ee.port1.onmessage=z,G=function(){re.postMessage(null)}}else G=function(){D(z,0)};function oe(ue){B=ue,j||(j=!0,G())}function pe(ue,me){H=D(function(){ue(e.unstable_now())},me)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ue){ue.callback=null},e.unstable_continueExecution=function(){R||A||(R=!0,oe(F))},e.unstable_forceFrameRate=function(ue){0>ue||125<ue?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):K=0<ue?Math.floor(1e3/ue):5},e.unstable_getCurrentPriorityLevel=function(){return b},e.unstable_getFirstCallbackNode=function(){return i(m)},e.unstable_next=function(ue){switch(b){case 1:case 2:case 3:var me=3;break;default:me=b}var fe=b;b=me;try{return ue()}finally{b=fe}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(ue,me){switch(ue){case 1:case 2:case 3:case 4:case 5:break;default:ue=3}var fe=b;b=ue;try{return me()}finally{b=fe}},e.unstable_scheduleCallback=function(ue,me,fe){var se=e.unstable_now();switch(typeof fe=="object"&&fe!==null?(fe=fe.delay,fe=typeof fe=="number"&&0<fe?se+fe:se):fe=se,ue){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=fe+ae,ue={id:_++,callback:me,priorityLevel:ue,startTime:fe,expirationTime:ae,sortIndex:-1},fe>se?(ue.sortIndex=fe,t(g,ue),i(m)===null&&ue===i(g)&&(w?(x(H),H=-1):w=!0,pe(M,fe-se))):(ue.sortIndex=ae,t(m,ue),R||A||(R=!0,oe(F))),ue},e.unstable_shouldYield=Z,e.unstable_wrapCallback=function(ue){var me=b;return function(){var fe=b;b=me;try{return ue.apply(this,arguments)}finally{b=fe}}}})(BV);VV.exports=BV;var WQ=VV.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $V=y,_a=WQ;function Fe(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var HV=new Set,$f={};function Hu(e,t){Ph(e,t),Ph(e+"Capture",t)}function Ph(e,t){for($f[e]=t,e=0;e<t.length;e++)HV.add(t[e])}var Ic=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ZT=Object.prototype.hasOwnProperty,GQ=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,JM={},QM={};function zQ(e){return ZT.call(QM,e)?!0:ZT.call(JM,e)?!1:GQ.test(e)?QM[e]=!0:(JM[e]=!0,!1)}function KQ(e,t,i,a){if(i!==null&&i.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return a?!1:i!==null?!i.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function YQ(e,t,i,a){if(t===null||typeof t>"u"||KQ(e,t,i,a))return!0;if(a)return!1;if(i!==null)switch(i.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function To(e,t,i,a,c,u,d){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=a,this.attributeNamespace=c,this.mustUseProperty=i,this.propertyName=e,this.type=t,this.sanitizeURL=u,this.removeEmptyString=d}var zi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){zi[e]=new To(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];zi[t]=new To(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){zi[e]=new To(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){zi[e]=new To(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){zi[e]=new To(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){zi[e]=new To(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){zi[e]=new To(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){zi[e]=new To(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){zi[e]=new To(e,5,!1,e.toLowerCase(),null,!1,!1)});var oI=/[\-:]([a-z])/g;function aI(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(oI,aI);zi[t]=new To(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(oI,aI);zi[t]=new To(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(oI,aI);zi[t]=new To(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){zi[e]=new To(e,1,!1,e.toLowerCase(),null,!1,!1)});zi.xlinkHref=new To("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){zi[e]=new To(e,1,!1,e.toLowerCase(),null,!0,!0)});function sI(e,t,i,a){var c=zi.hasOwnProperty(t)?zi[t]:null;(c!==null?c.type!==0:a||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(YQ(t,i,c,a)&&(i=null),a||c===null?zQ(t)&&(i===null?e.removeAttribute(t):e.setAttribute(t,""+i)):c.mustUseProperty?e[c.propertyName]=i===null?c.type===3?!1:"":i:(t=c.attributeName,a=c.attributeNamespace,i===null?e.removeAttribute(t):(c=c.type,i=c===3||c===4&&i===!0?"":""+i,a?e.setAttributeNS(a,t,i):e.setAttribute(t,i))))}var Mc=$V.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Cg=Symbol.for("react.element"),sh=Symbol.for("react.portal"),ch=Symbol.for("react.fragment"),cI=Symbol.for("react.strict_mode"),eR=Symbol.for("react.profiler"),WV=Symbol.for("react.provider"),GV=Symbol.for("react.context"),lI=Symbol.for("react.forward_ref"),tR=Symbol.for("react.suspense"),nR=Symbol.for("react.suspense_list"),uI=Symbol.for("react.memo"),_l=Symbol.for("react.lazy"),zV=Symbol.for("react.offscreen"),ZM=Symbol.iterator;function Qp(e){return e===null||typeof e!="object"?null:(e=ZM&&e[ZM]||e["@@iterator"],typeof e=="function"?e:null)}var Nr=Object.assign,tb;function vf(e){if(tb===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);tb=t&&t[1]||""}return`
`+tb+e}var nb=!1;function rb(e,t){if(!e||nb)return"";nb=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(g){var a=g}Reflect.construct(e,[],t)}else{try{t.call()}catch(g){a=g}e.call(t.prototype)}else{try{throw Error()}catch(g){a=g}e()}}catch(g){if(g&&a&&typeof g.stack=="string"){for(var c=g.stack.split(`
`),u=a.stack.split(`
`),d=c.length-1,f=u.length-1;1<=d&&0<=f&&c[d]!==u[f];)f--;for(;1<=d&&0<=f;d--,f--)if(c[d]!==u[f]){if(d!==1||f!==1)do if(d--,f--,0>f||c[d]!==u[f]){var m=`
`+c[d].replace(" at new "," at ");return e.displayName&&m.includes("<anonymous>")&&(m=m.replace("<anonymous>",e.displayName)),m}while(1<=d&&0<=f);break}}}finally{nb=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?vf(e):""}function qQ(e){switch(e.tag){case 5:return vf(e.type);case 16:return vf("Lazy");case 13:return vf("Suspense");case 19:return vf("SuspenseList");case 0:case 2:case 15:return e=rb(e.type,!1),e;case 11:return e=rb(e.type.render,!1),e;case 1:return e=rb(e.type,!0),e;default:return""}}function rR(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ch:return"Fragment";case sh:return"Portal";case eR:return"Profiler";case cI:return"StrictMode";case tR:return"Suspense";case nR:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case GV:return(e.displayName||"Context")+".Consumer";case WV:return(e._context.displayName||"Context")+".Provider";case lI:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case uI:return t=e.displayName||null,t!==null?t:rR(e.type)||"Memo";case _l:t=e._payload,e=e._init;try{return rR(e(t))}catch{}}return null}function XQ(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return rR(t);case 8:return t===cI?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ml(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function KV(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function JQ(e){var t=KV(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var c=i.get,u=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(d){a=""+d,u.call(this,d)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return a},setValue:function(d){a=""+d},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function bg(e){e._valueTracker||(e._valueTracker=JQ(e))}function YV(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),a="";return e&&(a=KV(e)?e.checked?"true":"false":e.value),e=a,e!==i?(t.setValue(e),!0):!1}function Dv(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function iR(e,t){var i=t.checked;return Nr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??e._wrapperState.initialChecked})}function eU(e,t){var i=t.defaultValue==null?"":t.defaultValue,a=t.checked!=null?t.checked:t.defaultChecked;i=Ml(t.value!=null?t.value:i),e._wrapperState={initialChecked:a,initialValue:i,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function qV(e,t){t=t.checked,t!=null&&sI(e,"checked",t,!1)}function oR(e,t){qV(e,t);var i=Ml(t.value),a=t.type;if(i!=null)a==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?aR(e,t.type,i):t.hasOwnProperty("defaultValue")&&aR(e,t.type,Ml(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function tU(e,t,i){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!(a!=="submit"&&a!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,i||t===e.value||(e.value=t),e.defaultValue=t}i=e.name,i!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,i!==""&&(e.name=i)}function aR(e,t,i){(t!=="number"||Dv(e.ownerDocument)!==e)&&(i==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}var Ef=Array.isArray;function bh(e,t,i,a){if(e=e.options,t){t={};for(var c=0;c<i.length;c++)t["$"+i[c]]=!0;for(i=0;i<e.length;i++)c=t.hasOwnProperty("$"+e[i].value),e[i].selected!==c&&(e[i].selected=c),c&&a&&(e[i].defaultSelected=!0)}else{for(i=""+Ml(i),t=null,c=0;c<e.length;c++){if(e[c].value===i){e[c].selected=!0,a&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function sR(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Fe(91));return Nr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function nU(e,t){var i=t.value;if(i==null){if(i=t.children,t=t.defaultValue,i!=null){if(t!=null)throw Error(Fe(92));if(Ef(i)){if(1<i.length)throw Error(Fe(93));i=i[0]}t=i}t==null&&(t=""),i=t}e._wrapperState={initialValue:Ml(i)}}function XV(e,t){var i=Ml(t.value),a=Ml(t.defaultValue);i!=null&&(i=""+i,i!==e.value&&(e.value=i),t.defaultValue==null&&e.defaultValue!==i&&(e.defaultValue=i)),a!=null&&(e.defaultValue=""+a)}function rU(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function JV(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function cR(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?JV(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Tg,QV=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,i,a,c){MSApp.execUnsafeLocalFunction(function(){return e(t,i,a,c)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Tg=Tg||document.createElement("div"),Tg.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Tg.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Hf(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var bf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},QQ=["Webkit","ms","Moz","O"];Object.keys(bf).forEach(function(e){QQ.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),bf[t]=bf[e]})});function ZV(e,t,i){return t==null||typeof t=="boolean"||t===""?"":i||typeof t!="number"||t===0||bf.hasOwnProperty(e)&&bf[e]?(""+t).trim():t+"px"}function e3(e,t){e=e.style;for(var i in t)if(t.hasOwnProperty(i)){var a=i.indexOf("--")===0,c=ZV(i,t[i],a);i==="float"&&(i="cssFloat"),a?e.setProperty(i,c):e[i]=c}}var ZQ=Nr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function lR(e,t){if(t){if(ZQ[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Fe(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Fe(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Fe(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Fe(62))}}function uR(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var dR=null;function dI(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var hR=null,Th=null,Rh=null;function iU(e){if(e=Sm(e)){if(typeof hR!="function")throw Error(Fe(280));var t=e.stateNode;t&&(t=jE(t),hR(e.stateNode,e.type,t))}}function t3(e){Th?Rh?Rh.push(e):Rh=[e]:Th=e}function n3(){if(Th){var e=Th,t=Rh;if(Rh=Th=null,iU(e),t)for(e=0;e<t.length;e++)iU(t[e])}}function r3(e,t){return e(t)}function i3(){}var ib=!1;function o3(e,t,i){if(ib)return e(t,i);ib=!0;try{return r3(e,t,i)}finally{ib=!1,(Th!==null||Rh!==null)&&(i3(),n3())}}function Wf(e,t){var i=e.stateNode;if(i===null)return null;var a=jE(i);if(a===null)return null;i=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(Fe(231,t,typeof i));return i}var pR=!1;if(Ic)try{var Zp={};Object.defineProperty(Zp,"passive",{get:function(){pR=!0}}),window.addEventListener("test",Zp,Zp),window.removeEventListener("test",Zp,Zp)}catch{pR=!1}function eZ(e,t,i,a,c,u,d,f,m){var g=Array.prototype.slice.call(arguments,3);try{t.apply(i,g)}catch(_){this.onError(_)}}var Tf=!1,kv=null,Lv=!1,fR=null,tZ={onError:function(e){Tf=!0,kv=e}};function nZ(e,t,i,a,c,u,d,f,m){Tf=!1,kv=null,eZ.apply(tZ,arguments)}function rZ(e,t,i,a,c,u,d,f,m){if(nZ.apply(this,arguments),Tf){if(Tf){var g=kv;Tf=!1,kv=null}else throw Error(Fe(198));Lv||(Lv=!0,fR=g)}}function Wu(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function a3(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function oU(e){if(Wu(e)!==e)throw Error(Fe(188))}function iZ(e){var t=e.alternate;if(!t){if(t=Wu(e),t===null)throw Error(Fe(188));return t!==e?null:e}for(var i=e,a=t;;){var c=i.return;if(c===null)break;var u=c.alternate;if(u===null){if(a=c.return,a!==null){i=a;continue}break}if(c.child===u.child){for(u=c.child;u;){if(u===i)return oU(c),e;if(u===a)return oU(c),t;u=u.sibling}throw Error(Fe(188))}if(i.return!==a.return)i=c,a=u;else{for(var d=!1,f=c.child;f;){if(f===i){d=!0,i=c,a=u;break}if(f===a){d=!0,a=c,i=u;break}f=f.sibling}if(!d){for(f=u.child;f;){if(f===i){d=!0,i=u,a=c;break}if(f===a){d=!0,a=u,i=c;break}f=f.sibling}if(!d)throw Error(Fe(189))}}if(i.alternate!==a)throw Error(Fe(190))}if(i.tag!==3)throw Error(Fe(188));return i.stateNode.current===i?e:t}function s3(e){return e=iZ(e),e!==null?c3(e):null}function c3(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=c3(e);if(t!==null)return t;e=e.sibling}return null}var l3=_a.unstable_scheduleCallback,aU=_a.unstable_cancelCallback,oZ=_a.unstable_shouldYield,aZ=_a.unstable_requestPaint,Gr=_a.unstable_now,sZ=_a.unstable_getCurrentPriorityLevel,hI=_a.unstable_ImmediatePriority,u3=_a.unstable_UserBlockingPriority,Mv=_a.unstable_NormalPriority,cZ=_a.unstable_LowPriority,d3=_a.unstable_IdlePriority,kE=null,Ks=null;function lZ(e){if(Ks&&typeof Ks.onCommitFiberRoot=="function")try{Ks.onCommitFiberRoot(kE,e,void 0,(e.current.flags&128)===128)}catch{}}var _s=Math.clz32?Math.clz32:hZ,uZ=Math.log,dZ=Math.LN2;function hZ(e){return e>>>=0,e===0?32:31-(uZ(e)/dZ|0)|0}var Rg=64,Ig=4194304;function _f(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Uv(e,t){var i=e.pendingLanes;if(i===0)return 0;var a=0,c=e.suspendedLanes,u=e.pingedLanes,d=i&268435455;if(d!==0){var f=d&~c;f!==0?a=_f(f):(u&=d,u!==0&&(a=_f(u)))}else d=i&~c,d!==0?a=_f(d):u!==0&&(a=_f(u));if(a===0)return 0;if(t!==0&&t!==a&&!(t&c)&&(c=a&-a,u=t&-t,c>=u||c===16&&(u&4194240)!==0))return t;if(a&4&&(a|=i&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=a;0<t;)i=31-_s(t),c=1<<i,a|=e[i],t&=~c;return a}function pZ(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fZ(e,t){for(var i=e.suspendedLanes,a=e.pingedLanes,c=e.expirationTimes,u=e.pendingLanes;0<u;){var d=31-_s(u),f=1<<d,m=c[d];m===-1?(!(f&i)||f&a)&&(c[d]=pZ(f,t)):m<=t&&(e.expiredLanes|=f),u&=~f}}function mR(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function h3(){var e=Rg;return Rg<<=1,!(Rg&4194240)&&(Rg=64),e}function ob(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function _m(e,t,i){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-_s(t),e[t]=i}function mZ(e,t){var i=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<i;){var c=31-_s(i),u=1<<c;t[c]=0,a[c]=-1,e[c]=-1,i&=~u}}function pI(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var a=31-_s(i),c=1<<a;c&t|e[a]&t&&(e[a]|=t),i&=~c}}var $n=0;function p3(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var f3,fI,m3,g3,v3,gR=!1,wg=[],Ol=null,Al=null,Nl=null,Gf=new Map,zf=new Map,Sl=[],gZ="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function sU(e,t){switch(e){case"focusin":case"focusout":Ol=null;break;case"dragenter":case"dragleave":Al=null;break;case"mouseover":case"mouseout":Nl=null;break;case"pointerover":case"pointerout":Gf.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":zf.delete(t.pointerId)}}function ef(e,t,i,a,c,u){return e===null||e.nativeEvent!==u?(e={blockedOn:t,domEventName:i,eventSystemFlags:a,nativeEvent:u,targetContainers:[c]},t!==null&&(t=Sm(t),t!==null&&fI(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function vZ(e,t,i,a,c){switch(t){case"focusin":return Ol=ef(Ol,e,t,i,a,c),!0;case"dragenter":return Al=ef(Al,e,t,i,a,c),!0;case"mouseover":return Nl=ef(Nl,e,t,i,a,c),!0;case"pointerover":var u=c.pointerId;return Gf.set(u,ef(Gf.get(u)||null,e,t,i,a,c)),!0;case"gotpointercapture":return u=c.pointerId,zf.set(u,ef(zf.get(u)||null,e,t,i,a,c)),!0}return!1}function E3(e){var t=Iu(e.target);if(t!==null){var i=Wu(t);if(i!==null){if(t=i.tag,t===13){if(t=a3(i),t!==null){e.blockedOn=t,v3(e.priority,function(){m3(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function hv(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=vR(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(i===null){i=e.nativeEvent;var a=new i.constructor(i.type,i);dR=a,i.target.dispatchEvent(a),dR=null}else return t=Sm(i),t!==null&&fI(t),e.blockedOn=i,!1;t.shift()}return!0}function cU(e,t,i){hv(e)&&i.delete(t)}function EZ(){gR=!1,Ol!==null&&hv(Ol)&&(Ol=null),Al!==null&&hv(Al)&&(Al=null),Nl!==null&&hv(Nl)&&(Nl=null),Gf.forEach(cU),zf.forEach(cU)}function tf(e,t){e.blockedOn===t&&(e.blockedOn=null,gR||(gR=!0,_a.unstable_scheduleCallback(_a.unstable_NormalPriority,EZ)))}function Kf(e){function t(c){return tf(c,e)}if(0<wg.length){tf(wg[0],e);for(var i=1;i<wg.length;i++){var a=wg[i];a.blockedOn===e&&(a.blockedOn=null)}}for(Ol!==null&&tf(Ol,e),Al!==null&&tf(Al,e),Nl!==null&&tf(Nl,e),Gf.forEach(t),zf.forEach(t),i=0;i<Sl.length;i++)a=Sl[i],a.blockedOn===e&&(a.blockedOn=null);for(;0<Sl.length&&(i=Sl[0],i.blockedOn===null);)E3(i),i.blockedOn===null&&Sl.shift()}var Ih=Mc.ReactCurrentBatchConfig,jv=!0;function _Z(e,t,i,a){var c=$n,u=Ih.transition;Ih.transition=null;try{$n=1,mI(e,t,i,a)}finally{$n=c,Ih.transition=u}}function yZ(e,t,i,a){var c=$n,u=Ih.transition;Ih.transition=null;try{$n=4,mI(e,t,i,a)}finally{$n=c,Ih.transition=u}}function mI(e,t,i,a){if(jv){var c=vR(e,t,i,a);if(c===null)mb(e,t,a,Fv,i),sU(e,a);else if(vZ(c,e,t,i,a))a.stopPropagation();else if(sU(e,a),t&4&&-1<gZ.indexOf(e)){for(;c!==null;){var u=Sm(c);if(u!==null&&f3(u),u=vR(e,t,i,a),u===null&&mb(e,t,a,Fv,i),u===c)break;c=u}c!==null&&a.stopPropagation()}else mb(e,t,a,null,i)}}var Fv=null;function vR(e,t,i,a){if(Fv=null,e=dI(a),e=Iu(e),e!==null)if(t=Wu(e),t===null)e=null;else if(i=t.tag,i===13){if(e=a3(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Fv=e,null}function _3(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(sZ()){case hI:return 1;case u3:return 4;case Mv:case cZ:return 16;case d3:return 536870912;default:return 16}default:return 16}}var bl=null,gI=null,pv=null;function y3(){if(pv)return pv;var e,t=gI,i=t.length,a,c="value"in bl?bl.value:bl.textContent,u=c.length;for(e=0;e<i&&t[e]===c[e];e++);var d=i-e;for(a=1;a<=d&&t[i-a]===c[u-a];a++);return pv=c.slice(e,1<a?1-a:void 0)}function fv(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Og(){return!0}function lU(){return!1}function Ca(e){function t(i,a,c,u,d){this._reactName=i,this._targetInst=c,this.type=a,this.nativeEvent=u,this.target=d,this.currentTarget=null;for(var f in e)e.hasOwnProperty(f)&&(i=e[f],this[f]=i?i(u):u[f]);return this.isDefaultPrevented=(u.defaultPrevented!=null?u.defaultPrevented:u.returnValue===!1)?Og:lU,this.isPropagationStopped=lU,this}return Nr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Og)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Og)},persist:function(){},isPersistent:Og}),t}var Gh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vI=Ca(Gh),ym=Nr({},Gh,{view:0,detail:0}),SZ=Ca(ym),ab,sb,nf,LE=Nr({},ym,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:EI,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==nf&&(nf&&e.type==="mousemove"?(ab=e.screenX-nf.screenX,sb=e.screenY-nf.screenY):sb=ab=0,nf=e),ab)},movementY:function(e){return"movementY"in e?e.movementY:sb}}),uU=Ca(LE),CZ=Nr({},LE,{dataTransfer:0}),bZ=Ca(CZ),TZ=Nr({},ym,{relatedTarget:0}),cb=Ca(TZ),RZ=Nr({},Gh,{animationName:0,elapsedTime:0,pseudoElement:0}),IZ=Ca(RZ),wZ=Nr({},Gh,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),OZ=Ca(wZ),AZ=Nr({},Gh,{data:0}),dU=Ca(AZ),NZ={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xZ={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},PZ={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function DZ(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=PZ[e])?!!t[e]:!1}function EI(){return DZ}var kZ=Nr({},ym,{key:function(e){if(e.key){var t=NZ[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=fv(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?xZ[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:EI,charCode:function(e){return e.type==="keypress"?fv(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?fv(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),LZ=Ca(kZ),MZ=Nr({},LE,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hU=Ca(MZ),UZ=Nr({},ym,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:EI}),jZ=Ca(UZ),FZ=Nr({},Gh,{propertyName:0,elapsedTime:0,pseudoElement:0}),VZ=Ca(FZ),BZ=Nr({},LE,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),$Z=Ca(BZ),HZ=[9,13,27,32],_I=Ic&&"CompositionEvent"in window,Rf=null;Ic&&"documentMode"in document&&(Rf=document.documentMode);var WZ=Ic&&"TextEvent"in window&&!Rf,S3=Ic&&(!_I||Rf&&8<Rf&&11>=Rf),pU=String.fromCharCode(32),fU=!1;function C3(e,t){switch(e){case"keyup":return HZ.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function b3(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var lh=!1;function GZ(e,t){switch(e){case"compositionend":return b3(t);case"keypress":return t.which!==32?null:(fU=!0,pU);case"textInput":return e=t.data,e===pU&&fU?null:e;default:return null}}function zZ(e,t){if(lh)return e==="compositionend"||!_I&&C3(e,t)?(e=y3(),pv=gI=bl=null,lh=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return S3&&t.locale!=="ko"?null:t.data;default:return null}}var KZ={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mU(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!KZ[e.type]:t==="textarea"}function T3(e,t,i,a){t3(a),t=Vv(t,"onChange"),0<t.length&&(i=new vI("onChange","change",null,i,a),e.push({event:i,listeners:t}))}var If=null,Yf=null;function YZ(e){L3(e,0)}function ME(e){var t=hh(e);if(YV(t))return e}function qZ(e,t){if(e==="change")return t}var R3=!1;if(Ic){var lb;if(Ic){var ub="oninput"in document;if(!ub){var gU=document.createElement("div");gU.setAttribute("oninput","return;"),ub=typeof gU.oninput=="function"}lb=ub}else lb=!1;R3=lb&&(!document.documentMode||9<document.documentMode)}function vU(){If&&(If.detachEvent("onpropertychange",I3),Yf=If=null)}function I3(e){if(e.propertyName==="value"&&ME(Yf)){var t=[];T3(t,Yf,e,dI(e)),o3(YZ,t)}}function XZ(e,t,i){e==="focusin"?(vU(),If=t,Yf=i,If.attachEvent("onpropertychange",I3)):e==="focusout"&&vU()}function JZ(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ME(Yf)}function QZ(e,t){if(e==="click")return ME(t)}function ZZ(e,t){if(e==="input"||e==="change")return ME(t)}function eee(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Cs=typeof Object.is=="function"?Object.is:eee;function qf(e,t){if(Cs(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(a=0;a<i.length;a++){var c=i[a];if(!ZT.call(t,c)||!Cs(e[c],t[c]))return!1}return!0}function EU(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function _U(e,t){var i=EU(e);e=0;for(var a;i;){if(i.nodeType===3){if(a=e+i.textContent.length,e<=t&&a>=t)return{node:i,offset:t-e};e=a}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=EU(i)}}function w3(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?w3(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function O3(){for(var e=window,t=Dv();t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=Dv(e.document)}return t}function yI(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function tee(e){var t=O3(),i=e.focusedElem,a=e.selectionRange;if(t!==i&&i&&i.ownerDocument&&w3(i.ownerDocument.documentElement,i)){if(a!==null&&yI(i)){if(t=a.start,e=a.end,e===void 0&&(e=t),"selectionStart"in i)i.selectionStart=t,i.selectionEnd=Math.min(e,i.value.length);else if(e=(t=i.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var c=i.textContent.length,u=Math.min(a.start,c);a=a.end===void 0?u:Math.min(a.end,c),!e.extend&&u>a&&(c=a,a=u,u=c),c=_U(i,u);var d=_U(i,a);c&&d&&(e.rangeCount!==1||e.anchorNode!==c.node||e.anchorOffset!==c.offset||e.focusNode!==d.node||e.focusOffset!==d.offset)&&(t=t.createRange(),t.setStart(c.node,c.offset),e.removeAllRanges(),u>a?(e.addRange(t),e.extend(d.node,d.offset)):(t.setEnd(d.node,d.offset),e.addRange(t)))}}for(t=[],e=i;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<t.length;i++)e=t[i],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var nee=Ic&&"documentMode"in document&&11>=document.documentMode,uh=null,ER=null,wf=null,_R=!1;function yU(e,t,i){var a=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;_R||uh==null||uh!==Dv(a)||(a=uh,"selectionStart"in a&&yI(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),wf&&qf(wf,a)||(wf=a,a=Vv(ER,"onSelect"),0<a.length&&(t=new vI("onSelect","select",null,t,i),e.push({event:t,listeners:a}),t.target=uh)))}function Ag(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var dh={animationend:Ag("Animation","AnimationEnd"),animationiteration:Ag("Animation","AnimationIteration"),animationstart:Ag("Animation","AnimationStart"),transitionend:Ag("Transition","TransitionEnd")},db={},A3={};Ic&&(A3=document.createElement("div").style,"AnimationEvent"in window||(delete dh.animationend.animation,delete dh.animationiteration.animation,delete dh.animationstart.animation),"TransitionEvent"in window||delete dh.transitionend.transition);function UE(e){if(db[e])return db[e];if(!dh[e])return e;var t=dh[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in A3)return db[e]=t[i];return e}var N3=UE("animationend"),x3=UE("animationiteration"),P3=UE("animationstart"),D3=UE("transitionend"),k3=new Map,SU="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Vl(e,t){k3.set(e,t),Hu(t,[e])}for(var hb=0;hb<SU.length;hb++){var pb=SU[hb],ree=pb.toLowerCase(),iee=pb[0].toUpperCase()+pb.slice(1);Vl(ree,"on"+iee)}Vl(N3,"onAnimationEnd");Vl(x3,"onAnimationIteration");Vl(P3,"onAnimationStart");Vl("dblclick","onDoubleClick");Vl("focusin","onFocus");Vl("focusout","onBlur");Vl(D3,"onTransitionEnd");Ph("onMouseEnter",["mouseout","mouseover"]);Ph("onMouseLeave",["mouseout","mouseover"]);Ph("onPointerEnter",["pointerout","pointerover"]);Ph("onPointerLeave",["pointerout","pointerover"]);Hu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Hu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Hu("onBeforeInput",["compositionend","keypress","textInput","paste"]);Hu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Hu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Hu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),oee=new Set("cancel close invalid load scroll toggle".split(" ").concat(yf));function CU(e,t,i){var a=e.type||"unknown-event";e.currentTarget=i,rZ(a,t,void 0,e),e.currentTarget=null}function L3(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var a=e[i],c=a.event;a=a.listeners;e:{var u=void 0;if(t)for(var d=a.length-1;0<=d;d--){var f=a[d],m=f.instance,g=f.currentTarget;if(f=f.listener,m!==u&&c.isPropagationStopped())break e;CU(c,f,g),u=m}else for(d=0;d<a.length;d++){if(f=a[d],m=f.instance,g=f.currentTarget,f=f.listener,m!==u&&c.isPropagationStopped())break e;CU(c,f,g),u=m}}}if(Lv)throw e=fR,Lv=!1,fR=null,e}function gr(e,t){var i=t[TR];i===void 0&&(i=t[TR]=new Set);var a=e+"__bubble";i.has(a)||(M3(t,e,2,!1),i.add(a))}function fb(e,t,i){var a=0;t&&(a|=4),M3(i,e,a,t)}var Ng="_reactListening"+Math.random().toString(36).slice(2);function Xf(e){if(!e[Ng]){e[Ng]=!0,HV.forEach(function(i){i!=="selectionchange"&&(oee.has(i)||fb(i,!1,e),fb(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ng]||(t[Ng]=!0,fb("selectionchange",!1,t))}}function M3(e,t,i,a){switch(_3(t)){case 1:var c=_Z;break;case 4:c=yZ;break;default:c=mI}i=c.bind(null,t,i,e),c=void 0,!pR||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),a?c!==void 0?e.addEventListener(t,i,{capture:!0,passive:c}):e.addEventListener(t,i,!0):c!==void 0?e.addEventListener(t,i,{passive:c}):e.addEventListener(t,i,!1)}function mb(e,t,i,a,c){var u=a;if(!(t&1)&&!(t&2)&&a!==null)e:for(;;){if(a===null)return;var d=a.tag;if(d===3||d===4){var f=a.stateNode.containerInfo;if(f===c||f.nodeType===8&&f.parentNode===c)break;if(d===4)for(d=a.return;d!==null;){var m=d.tag;if((m===3||m===4)&&(m=d.stateNode.containerInfo,m===c||m.nodeType===8&&m.parentNode===c))return;d=d.return}for(;f!==null;){if(d=Iu(f),d===null)return;if(m=d.tag,m===5||m===6){a=u=d;continue e}f=f.parentNode}}a=a.return}o3(function(){var g=u,_=dI(i),S=[];e:{var b=k3.get(e);if(b!==void 0){var A=vI,R=e;switch(e){case"keypress":if(fv(i)===0)break e;case"keydown":case"keyup":A=LZ;break;case"focusin":R="focus",A=cb;break;case"focusout":R="blur",A=cb;break;case"beforeblur":case"afterblur":A=cb;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":A=uU;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":A=bZ;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":A=jZ;break;case N3:case x3:case P3:A=IZ;break;case D3:A=VZ;break;case"scroll":A=SZ;break;case"wheel":A=$Z;break;case"copy":case"cut":case"paste":A=OZ;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":A=hU}var w=(t&4)!==0,D=!w&&e==="scroll",x=w?b!==null?b+"Capture":null:b;w=[];for(var O=g,P;O!==null;){P=O;var M=P.stateNode;if(P.tag===5&&M!==null&&(P=M,x!==null&&(M=Wf(O,x),M!=null&&w.push(Jf(O,M,P)))),D)break;O=O.return}0<w.length&&(b=new A(b,R,null,i,_),S.push({event:b,listeners:w}))}}if(!(t&7)){e:{if(b=e==="mouseover"||e==="pointerover",A=e==="mouseout"||e==="pointerout",b&&i!==dR&&(R=i.relatedTarget||i.fromElement)&&(Iu(R)||R[wc]))break e;if((A||b)&&(b=_.window===_?_:(b=_.ownerDocument)?b.defaultView||b.parentWindow:window,A?(R=i.relatedTarget||i.toElement,A=g,R=R?Iu(R):null,R!==null&&(D=Wu(R),R!==D||R.tag!==5&&R.tag!==6)&&(R=null)):(A=null,R=g),A!==R)){if(w=uU,M="onMouseLeave",x="onMouseEnter",O="mouse",(e==="pointerout"||e==="pointerover")&&(w=hU,M="onPointerLeave",x="onPointerEnter",O="pointer"),D=A==null?b:hh(A),P=R==null?b:hh(R),b=new w(M,O+"leave",A,i,_),b.target=D,b.relatedTarget=P,M=null,Iu(_)===g&&(w=new w(x,O+"enter",R,i,_),w.target=P,w.relatedTarget=D,M=w),D=M,A&&R)t:{for(w=A,x=R,O=0,P=w;P;P=zd(P))O++;for(P=0,M=x;M;M=zd(M))P++;for(;0<O-P;)w=zd(w),O--;for(;0<P-O;)x=zd(x),P--;for(;O--;){if(w===x||x!==null&&w===x.alternate)break t;w=zd(w),x=zd(x)}w=null}else w=null;A!==null&&bU(S,b,A,w,!1),R!==null&&D!==null&&bU(S,D,R,w,!0)}}e:{if(b=g?hh(g):window,A=b.nodeName&&b.nodeName.toLowerCase(),A==="select"||A==="input"&&b.type==="file")var F=qZ;else if(mU(b))if(R3)F=ZZ;else{F=JZ;var j=XZ}else(A=b.nodeName)&&A.toLowerCase()==="input"&&(b.type==="checkbox"||b.type==="radio")&&(F=QZ);if(F&&(F=F(e,g))){T3(S,F,i,_);break e}j&&j(e,b,g),e==="focusout"&&(j=b._wrapperState)&&j.controlled&&b.type==="number"&&aR(b,"number",b.value)}switch(j=g?hh(g):window,e){case"focusin":(mU(j)||j.contentEditable==="true")&&(uh=j,ER=g,wf=null);break;case"focusout":wf=ER=uh=null;break;case"mousedown":_R=!0;break;case"contextmenu":case"mouseup":case"dragend":_R=!1,yU(S,i,_);break;case"selectionchange":if(nee)break;case"keydown":case"keyup":yU(S,i,_)}var B;if(_I)e:{switch(e){case"compositionstart":var H="onCompositionStart";break e;case"compositionend":H="onCompositionEnd";break e;case"compositionupdate":H="onCompositionUpdate";break e}H=void 0}else lh?C3(e,i)&&(H="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(H="onCompositionStart");H&&(S3&&i.locale!=="ko"&&(lh||H!=="onCompositionStart"?H==="onCompositionEnd"&&lh&&(B=y3()):(bl=_,gI="value"in bl?bl.value:bl.textContent,lh=!0)),j=Vv(g,H),0<j.length&&(H=new dU(H,e,null,i,_),S.push({event:H,listeners:j}),B?H.data=B:(B=b3(i),B!==null&&(H.data=B)))),(B=WZ?GZ(e,i):zZ(e,i))&&(g=Vv(g,"onBeforeInput"),0<g.length&&(_=new dU("onBeforeInput","beforeinput",null,i,_),S.push({event:_,listeners:g}),_.data=B))}L3(S,t)})}function Jf(e,t,i){return{instance:e,listener:t,currentTarget:i}}function Vv(e,t){for(var i=t+"Capture",a=[];e!==null;){var c=e,u=c.stateNode;c.tag===5&&u!==null&&(c=u,u=Wf(e,i),u!=null&&a.unshift(Jf(e,u,c)),u=Wf(e,t),u!=null&&a.push(Jf(e,u,c))),e=e.return}return a}function zd(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function bU(e,t,i,a,c){for(var u=t._reactName,d=[];i!==null&&i!==a;){var f=i,m=f.alternate,g=f.stateNode;if(m!==null&&m===a)break;f.tag===5&&g!==null&&(f=g,c?(m=Wf(i,u),m!=null&&d.unshift(Jf(i,m,f))):c||(m=Wf(i,u),m!=null&&d.push(Jf(i,m,f)))),i=i.return}d.length!==0&&e.push({event:t,listeners:d})}var aee=/\r\n?/g,see=/\u0000|\uFFFD/g;function TU(e){return(typeof e=="string"?e:""+e).replace(aee,`
`).replace(see,"")}function xg(e,t,i){if(t=TU(t),TU(e)!==t&&i)throw Error(Fe(425))}function Bv(){}var yR=null,SR=null;function CR(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var bR=typeof setTimeout=="function"?setTimeout:void 0,cee=typeof clearTimeout=="function"?clearTimeout:void 0,RU=typeof Promise=="function"?Promise:void 0,lee=typeof queueMicrotask=="function"?queueMicrotask:typeof RU<"u"?function(e){return RU.resolve(null).then(e).catch(uee)}:bR;function uee(e){setTimeout(function(){throw e})}function gb(e,t){var i=t,a=0;do{var c=i.nextSibling;if(e.removeChild(i),c&&c.nodeType===8)if(i=c.data,i==="/$"){if(a===0){e.removeChild(c),Kf(t);return}a--}else i!=="$"&&i!=="$?"&&i!=="$!"||a++;i=c}while(i);Kf(t)}function xl(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function IU(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(t===0)return e;t--}else i==="/$"&&t++}e=e.previousSibling}return null}var zh=Math.random().toString(36).slice(2),zs="__reactFiber$"+zh,Qf="__reactProps$"+zh,wc="__reactContainer$"+zh,TR="__reactEvents$"+zh,dee="__reactListeners$"+zh,hee="__reactHandles$"+zh;function Iu(e){var t=e[zs];if(t)return t;for(var i=e.parentNode;i;){if(t=i[wc]||i[zs]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=IU(e);e!==null;){if(i=e[zs])return i;e=IU(e)}return t}e=i,i=e.parentNode}return null}function Sm(e){return e=e[zs]||e[wc],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function hh(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Fe(33))}function jE(e){return e[Qf]||null}var RR=[],ph=-1;function Bl(e){return{current:e}}function vr(e){0>ph||(e.current=RR[ph],RR[ph]=null,ph--)}function ur(e,t){ph++,RR[ph]=e.current,e.current=t}var Ul={},uo=Bl(Ul),Bo=Bl(!1),Uu=Ul;function Dh(e,t){var i=e.type.contextTypes;if(!i)return Ul;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var c={},u;for(u in i)c[u]=t[u];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=c),c}function $o(e){return e=e.childContextTypes,e!=null}function $v(){vr(Bo),vr(uo)}function wU(e,t,i){if(uo.current!==Ul)throw Error(Fe(168));ur(uo,t),ur(Bo,i)}function U3(e,t,i){var a=e.stateNode;if(t=t.childContextTypes,typeof a.getChildContext!="function")return i;a=a.getChildContext();for(var c in a)if(!(c in t))throw Error(Fe(108,XQ(e)||"Unknown",c));return Nr({},i,a)}function Hv(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ul,Uu=uo.current,ur(uo,e),ur(Bo,Bo.current),!0}function OU(e,t,i){var a=e.stateNode;if(!a)throw Error(Fe(169));i?(e=U3(e,t,Uu),a.__reactInternalMemoizedMergedChildContext=e,vr(Bo),vr(uo),ur(uo,e)):vr(Bo),ur(Bo,i)}var Ec=null,FE=!1,vb=!1;function j3(e){Ec===null?Ec=[e]:Ec.push(e)}function pee(e){FE=!0,j3(e)}function $l(){if(!vb&&Ec!==null){vb=!0;var e=0,t=$n;try{var i=Ec;for($n=1;e<i.length;e++){var a=i[e];do a=a(!0);while(a!==null)}Ec=null,FE=!1}catch(c){throw Ec!==null&&(Ec=Ec.slice(e+1)),l3(hI,$l),c}finally{$n=t,vb=!1}}return null}var fh=[],mh=0,Wv=null,Gv=0,ja=[],Fa=0,ju=null,yc=1,Sc="";function Su(e,t){fh[mh++]=Gv,fh[mh++]=Wv,Wv=e,Gv=t}function F3(e,t,i){ja[Fa++]=yc,ja[Fa++]=Sc,ja[Fa++]=ju,ju=e;var a=yc;e=Sc;var c=32-_s(a)-1;a&=~(1<<c),i+=1;var u=32-_s(t)+c;if(30<u){var d=c-c%5;u=(a&(1<<d)-1).toString(32),a>>=d,c-=d,yc=1<<32-_s(t)+c|i<<c|a,Sc=u+e}else yc=1<<u|i<<c|a,Sc=e}function SI(e){e.return!==null&&(Su(e,1),F3(e,1,0))}function CI(e){for(;e===Wv;)Wv=fh[--mh],fh[mh]=null,Gv=fh[--mh],fh[mh]=null;for(;e===ju;)ju=ja[--Fa],ja[Fa]=null,Sc=ja[--Fa],ja[Fa]=null,yc=ja[--Fa],ja[Fa]=null}var va=null,ma=null,Cr=!1,ms=null;function V3(e,t){var i=Va(5,null,null,0);i.elementType="DELETED",i.stateNode=t,i.return=e,t=e.deletions,t===null?(e.deletions=[i],e.flags|=16):t.push(i)}function AU(e,t){switch(e.tag){case 5:var i=e.type;return t=t.nodeType!==1||i.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,va=e,ma=xl(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,va=e,ma=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(i=ju!==null?{id:yc,overflow:Sc}:null,e.memoizedState={dehydrated:t,treeContext:i,retryLane:1073741824},i=Va(18,null,null,0),i.stateNode=t,i.return=e,e.child=i,va=e,ma=null,!0):!1;default:return!1}}function IR(e){return(e.mode&1)!==0&&(e.flags&128)===0}function wR(e){if(Cr){var t=ma;if(t){var i=t;if(!AU(e,t)){if(IR(e))throw Error(Fe(418));t=xl(i.nextSibling);var a=va;t&&AU(e,t)?V3(a,i):(e.flags=e.flags&-4097|2,Cr=!1,va=e)}}else{if(IR(e))throw Error(Fe(418));e.flags=e.flags&-4097|2,Cr=!1,va=e}}}function NU(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;va=e}function Pg(e){if(e!==va)return!1;if(!Cr)return NU(e),Cr=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!CR(e.type,e.memoizedProps)),t&&(t=ma)){if(IR(e))throw B3(),Error(Fe(418));for(;t;)V3(e,t),t=xl(t.nextSibling)}if(NU(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Fe(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"){if(t===0){ma=xl(e.nextSibling);break e}t--}else i!=="$"&&i!=="$!"&&i!=="$?"||t++}e=e.nextSibling}ma=null}}else ma=va?xl(e.stateNode.nextSibling):null;return!0}function B3(){for(var e=ma;e;)e=xl(e.nextSibling)}function kh(){ma=va=null,Cr=!1}function bI(e){ms===null?ms=[e]:ms.push(e)}var fee=Mc.ReactCurrentBatchConfig;function us(e,t){if(e&&e.defaultProps){t=Nr({},t),e=e.defaultProps;for(var i in e)t[i]===void 0&&(t[i]=e[i]);return t}return t}var zv=Bl(null),Kv=null,gh=null,TI=null;function RI(){TI=gh=Kv=null}function II(e){var t=zv.current;vr(zv),e._currentValue=t}function OR(e,t,i){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===i)break;e=e.return}}function wh(e,t){Kv=e,TI=gh=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Vo=!0),e.firstContext=null)}function Ha(e){var t=e._currentValue;if(TI!==e)if(e={context:e,memoizedValue:t,next:null},gh===null){if(Kv===null)throw Error(Fe(308));gh=e,Kv.dependencies={lanes:0,firstContext:e}}else gh=gh.next=e;return t}var wu=null;function wI(e){wu===null?wu=[e]:wu.push(e)}function $3(e,t,i,a){var c=t.interleaved;return c===null?(i.next=i,wI(t)):(i.next=c.next,c.next=i),t.interleaved=i,Oc(e,a)}function Oc(e,t){e.lanes|=t;var i=e.alternate;for(i!==null&&(i.lanes|=t),i=e,e=e.return;e!==null;)e.childLanes|=t,i=e.alternate,i!==null&&(i.childLanes|=t),i=e,e=e.return;return i.tag===3?i.stateNode:null}var yl=!1;function OI(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function H3(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Cc(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Pl(e,t,i){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,Sn&2){var c=a.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),a.pending=t,Oc(e,i)}return c=a.interleaved,c===null?(t.next=t,wI(a)):(t.next=c.next,c.next=t),a.interleaved=t,Oc(e,i)}function mv(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194240)!==0)){var a=t.lanes;a&=e.pendingLanes,i|=a,t.lanes=i,pI(e,i)}}function xU(e,t){var i=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,i===a)){var c=null,u=null;if(i=i.firstBaseUpdate,i!==null){do{var d={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};u===null?c=u=d:u=u.next=d,i=i.next}while(i!==null);u===null?c=u=t:u=u.next=t}else c=u=t;i={baseState:a.baseState,firstBaseUpdate:c,lastBaseUpdate:u,shared:a.shared,effects:a.effects},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}function Yv(e,t,i,a){var c=e.updateQueue;yl=!1;var u=c.firstBaseUpdate,d=c.lastBaseUpdate,f=c.shared.pending;if(f!==null){c.shared.pending=null;var m=f,g=m.next;m.next=null,d===null?u=g:d.next=g,d=m;var _=e.alternate;_!==null&&(_=_.updateQueue,f=_.lastBaseUpdate,f!==d&&(f===null?_.firstBaseUpdate=g:f.next=g,_.lastBaseUpdate=m))}if(u!==null){var S=c.baseState;d=0,_=g=m=null,f=u;do{var b=f.lane,A=f.eventTime;if((a&b)===b){_!==null&&(_=_.next={eventTime:A,lane:0,tag:f.tag,payload:f.payload,callback:f.callback,next:null});e:{var R=e,w=f;switch(b=t,A=i,w.tag){case 1:if(R=w.payload,typeof R=="function"){S=R.call(A,S,b);break e}S=R;break e;case 3:R.flags=R.flags&-65537|128;case 0:if(R=w.payload,b=typeof R=="function"?R.call(A,S,b):R,b==null)break e;S=Nr({},S,b);break e;case 2:yl=!0}}f.callback!==null&&f.lane!==0&&(e.flags|=64,b=c.effects,b===null?c.effects=[f]:b.push(f))}else A={eventTime:A,lane:b,tag:f.tag,payload:f.payload,callback:f.callback,next:null},_===null?(g=_=A,m=S):_=_.next=A,d|=b;if(f=f.next,f===null){if(f=c.shared.pending,f===null)break;b=f,f=b.next,b.next=null,c.lastBaseUpdate=b,c.shared.pending=null}}while(1);if(_===null&&(m=S),c.baseState=m,c.firstBaseUpdate=g,c.lastBaseUpdate=_,t=c.shared.interleaved,t!==null){c=t;do d|=c.lane,c=c.next;while(c!==t)}else u===null&&(c.shared.lanes=0);Vu|=d,e.lanes=d,e.memoizedState=S}}function PU(e,t,i){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var a=e[t],c=a.callback;if(c!==null){if(a.callback=null,a=i,typeof c!="function")throw Error(Fe(191,c));c.call(a)}}}var W3=new $V.Component().refs;function AR(e,t,i,a){t=e.memoizedState,i=i(a,t),i=i==null?t:Nr({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var VE={isMounted:function(e){return(e=e._reactInternals)?Wu(e)===e:!1},enqueueSetState:function(e,t,i){e=e._reactInternals;var a=Co(),c=kl(e),u=Cc(a,c);u.payload=t,i!=null&&(u.callback=i),t=Pl(e,u,c),t!==null&&(ys(t,e,c,a),mv(t,e,c))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var a=Co(),c=kl(e),u=Cc(a,c);u.tag=1,u.payload=t,i!=null&&(u.callback=i),t=Pl(e,u,c),t!==null&&(ys(t,e,c,a),mv(t,e,c))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=Co(),a=kl(e),c=Cc(i,a);c.tag=2,t!=null&&(c.callback=t),t=Pl(e,c,a),t!==null&&(ys(t,e,a,i),mv(t,e,a))}};function DU(e,t,i,a,c,u,d){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,u,d):t.prototype&&t.prototype.isPureReactComponent?!qf(i,a)||!qf(c,u):!0}function G3(e,t,i){var a=!1,c=Ul,u=t.contextType;return typeof u=="object"&&u!==null?u=Ha(u):(c=$o(t)?Uu:uo.current,a=t.contextTypes,u=(a=a!=null)?Dh(e,c):Ul),t=new t(i,u),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=VE,e.stateNode=t,t._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=c,e.__reactInternalMemoizedMaskedChildContext=u),t}function kU(e,t,i,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,a),t.state!==e&&VE.enqueueReplaceState(t,t.state,null)}function NR(e,t,i,a){var c=e.stateNode;c.props=i,c.state=e.memoizedState,c.refs=W3,OI(e);var u=t.contextType;typeof u=="object"&&u!==null?c.context=Ha(u):(u=$o(t)?Uu:uo.current,c.context=Dh(e,u)),c.state=e.memoizedState,u=t.getDerivedStateFromProps,typeof u=="function"&&(AR(e,t,u,i),c.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(t=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),t!==c.state&&VE.enqueueReplaceState(c,c.state,null),Yv(e,i,c,a),c.state=e.memoizedState),typeof c.componentDidMount=="function"&&(e.flags|=4194308)}function rf(e,t,i){if(e=i.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(Fe(309));var a=i.stateNode}if(!a)throw Error(Fe(147,e));var c=a,u=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===u?t.ref:(t=function(d){var f=c.refs;f===W3&&(f=c.refs={}),d===null?delete f[u]:f[u]=d},t._stringRef=u,t)}if(typeof e!="string")throw Error(Fe(284));if(!i._owner)throw Error(Fe(290,e))}return e}function Dg(e,t){throw e=Object.prototype.toString.call(t),Error(Fe(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function LU(e){var t=e._init;return t(e._payload)}function z3(e){function t(x,O){if(e){var P=x.deletions;P===null?(x.deletions=[O],x.flags|=16):P.push(O)}}function i(x,O){if(!e)return null;for(;O!==null;)t(x,O),O=O.sibling;return null}function a(x,O){for(x=new Map;O!==null;)O.key!==null?x.set(O.key,O):x.set(O.index,O),O=O.sibling;return x}function c(x,O){return x=Ll(x,O),x.index=0,x.sibling=null,x}function u(x,O,P){return x.index=P,e?(P=x.alternate,P!==null?(P=P.index,P<O?(x.flags|=2,O):P):(x.flags|=2,O)):(x.flags|=1048576,O)}function d(x){return e&&x.alternate===null&&(x.flags|=2),x}function f(x,O,P,M){return O===null||O.tag!==6?(O=Tb(P,x.mode,M),O.return=x,O):(O=c(O,P),O.return=x,O)}function m(x,O,P,M){var F=P.type;return F===ch?_(x,O,P.props.children,M,P.key):O!==null&&(O.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===_l&&LU(F)===O.type)?(M=c(O,P.props),M.ref=rf(x,O,P),M.return=x,M):(M=Sv(P.type,P.key,P.props,null,x.mode,M),M.ref=rf(x,O,P),M.return=x,M)}function g(x,O,P,M){return O===null||O.tag!==4||O.stateNode.containerInfo!==P.containerInfo||O.stateNode.implementation!==P.implementation?(O=Rb(P,x.mode,M),O.return=x,O):(O=c(O,P.children||[]),O.return=x,O)}function _(x,O,P,M,F){return O===null||O.tag!==7?(O=Du(P,x.mode,M,F),O.return=x,O):(O=c(O,P),O.return=x,O)}function S(x,O,P){if(typeof O=="string"&&O!==""||typeof O=="number")return O=Tb(""+O,x.mode,P),O.return=x,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case Cg:return P=Sv(O.type,O.key,O.props,null,x.mode,P),P.ref=rf(x,null,O),P.return=x,P;case sh:return O=Rb(O,x.mode,P),O.return=x,O;case _l:var M=O._init;return S(x,M(O._payload),P)}if(Ef(O)||Qp(O))return O=Du(O,x.mode,P,null),O.return=x,O;Dg(x,O)}return null}function b(x,O,P,M){var F=O!==null?O.key:null;if(typeof P=="string"&&P!==""||typeof P=="number")return F!==null?null:f(x,O,""+P,M);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case Cg:return P.key===F?m(x,O,P,M):null;case sh:return P.key===F?g(x,O,P,M):null;case _l:return F=P._init,b(x,O,F(P._payload),M)}if(Ef(P)||Qp(P))return F!==null?null:_(x,O,P,M,null);Dg(x,P)}return null}function A(x,O,P,M,F){if(typeof M=="string"&&M!==""||typeof M=="number")return x=x.get(P)||null,f(O,x,""+M,F);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case Cg:return x=x.get(M.key===null?P:M.key)||null,m(O,x,M,F);case sh:return x=x.get(M.key===null?P:M.key)||null,g(O,x,M,F);case _l:var j=M._init;return A(x,O,P,j(M._payload),F)}if(Ef(M)||Qp(M))return x=x.get(P)||null,_(O,x,M,F,null);Dg(O,M)}return null}function R(x,O,P,M){for(var F=null,j=null,B=O,H=O=0,K=null;B!==null&&H<P.length;H++){B.index>H?(K=B,B=null):K=B.sibling;var $=b(x,B,P[H],M);if($===null){B===null&&(B=K);break}e&&B&&$.alternate===null&&t(x,B),O=u($,O,H),j===null?F=$:j.sibling=$,j=$,B=K}if(H===P.length)return i(x,B),Cr&&Su(x,H),F;if(B===null){for(;H<P.length;H++)B=S(x,P[H],M),B!==null&&(O=u(B,O,H),j===null?F=B:j.sibling=B,j=B);return Cr&&Su(x,H),F}for(B=a(x,B);H<P.length;H++)K=A(B,x,H,P[H],M),K!==null&&(e&&K.alternate!==null&&B.delete(K.key===null?H:K.key),O=u(K,O,H),j===null?F=K:j.sibling=K,j=K);return e&&B.forEach(function(Z){return t(x,Z)}),Cr&&Su(x,H),F}function w(x,O,P,M){var F=Qp(P);if(typeof F!="function")throw Error(Fe(150));if(P=F.call(P),P==null)throw Error(Fe(151));for(var j=F=null,B=O,H=O=0,K=null,$=P.next();B!==null&&!$.done;H++,$=P.next()){B.index>H?(K=B,B=null):K=B.sibling;var Z=b(x,B,$.value,M);if(Z===null){B===null&&(B=K);break}e&&B&&Z.alternate===null&&t(x,B),O=u(Z,O,H),j===null?F=Z:j.sibling=Z,j=Z,B=K}if($.done)return i(x,B),Cr&&Su(x,H),F;if(B===null){for(;!$.done;H++,$=P.next())$=S(x,$.value,M),$!==null&&(O=u($,O,H),j===null?F=$:j.sibling=$,j=$);return Cr&&Su(x,H),F}for(B=a(x,B);!$.done;H++,$=P.next())$=A(B,x,H,$.value,M),$!==null&&(e&&$.alternate!==null&&B.delete($.key===null?H:$.key),O=u($,O,H),j===null?F=$:j.sibling=$,j=$);return e&&B.forEach(function(z){return t(x,z)}),Cr&&Su(x,H),F}function D(x,O,P,M){if(typeof P=="object"&&P!==null&&P.type===ch&&P.key===null&&(P=P.props.children),typeof P=="object"&&P!==null){switch(P.$$typeof){case Cg:e:{for(var F=P.key,j=O;j!==null;){if(j.key===F){if(F=P.type,F===ch){if(j.tag===7){i(x,j.sibling),O=c(j,P.props.children),O.return=x,x=O;break e}}else if(j.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===_l&&LU(F)===j.type){i(x,j.sibling),O=c(j,P.props),O.ref=rf(x,j,P),O.return=x,x=O;break e}i(x,j);break}else t(x,j);j=j.sibling}P.type===ch?(O=Du(P.props.children,x.mode,M,P.key),O.return=x,x=O):(M=Sv(P.type,P.key,P.props,null,x.mode,M),M.ref=rf(x,O,P),M.return=x,x=M)}return d(x);case sh:e:{for(j=P.key;O!==null;){if(O.key===j)if(O.tag===4&&O.stateNode.containerInfo===P.containerInfo&&O.stateNode.implementation===P.implementation){i(x,O.sibling),O=c(O,P.children||[]),O.return=x,x=O;break e}else{i(x,O);break}else t(x,O);O=O.sibling}O=Rb(P,x.mode,M),O.return=x,x=O}return d(x);case _l:return j=P._init,D(x,O,j(P._payload),M)}if(Ef(P))return R(x,O,P,M);if(Qp(P))return w(x,O,P,M);Dg(x,P)}return typeof P=="string"&&P!==""||typeof P=="number"?(P=""+P,O!==null&&O.tag===6?(i(x,O.sibling),O=c(O,P),O.return=x,x=O):(i(x,O),O=Tb(P,x.mode,M),O.return=x,x=O),d(x)):i(x,O)}return D}var Lh=z3(!0),K3=z3(!1),Cm={},Ys=Bl(Cm),Zf=Bl(Cm),em=Bl(Cm);function Ou(e){if(e===Cm)throw Error(Fe(174));return e}function AI(e,t){switch(ur(em,t),ur(Zf,e),ur(Ys,Cm),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:cR(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=cR(t,e)}vr(Ys),ur(Ys,t)}function Mh(){vr(Ys),vr(Zf),vr(em)}function Y3(e){Ou(em.current);var t=Ou(Ys.current),i=cR(t,e.type);t!==i&&(ur(Zf,e),ur(Ys,i))}function NI(e){Zf.current===e&&(vr(Ys),vr(Zf))}var wr=Bl(0);function qv(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Eb=[];function xI(){for(var e=0;e<Eb.length;e++)Eb[e]._workInProgressVersionPrimary=null;Eb.length=0}var gv=Mc.ReactCurrentDispatcher,_b=Mc.ReactCurrentBatchConfig,Fu=0,Ar=null,gi=null,Oi=null,Xv=!1,Of=!1,tm=0,mee=0;function oo(){throw Error(Fe(321))}function PI(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!Cs(e[i],t[i]))return!1;return!0}function DI(e,t,i,a,c,u){if(Fu=u,Ar=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,gv.current=e===null||e.memoizedState===null?_ee:yee,e=i(a,c),Of){u=0;do{if(Of=!1,tm=0,25<=u)throw Error(Fe(301));u+=1,Oi=gi=null,t.updateQueue=null,gv.current=See,e=i(a,c)}while(Of)}if(gv.current=Jv,t=gi!==null&&gi.next!==null,Fu=0,Oi=gi=Ar=null,Xv=!1,t)throw Error(Fe(300));return e}function kI(){var e=tm!==0;return tm=0,e}function Hs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Oi===null?Ar.memoizedState=Oi=e:Oi=Oi.next=e,Oi}function Wa(){if(gi===null){var e=Ar.alternate;e=e!==null?e.memoizedState:null}else e=gi.next;var t=Oi===null?Ar.memoizedState:Oi.next;if(t!==null)Oi=t,gi=e;else{if(e===null)throw Error(Fe(310));gi=e,e={memoizedState:gi.memoizedState,baseState:gi.baseState,baseQueue:gi.baseQueue,queue:gi.queue,next:null},Oi===null?Ar.memoizedState=Oi=e:Oi=Oi.next=e}return Oi}function nm(e,t){return typeof t=="function"?t(e):t}function yb(e){var t=Wa(),i=t.queue;if(i===null)throw Error(Fe(311));i.lastRenderedReducer=e;var a=gi,c=a.baseQueue,u=i.pending;if(u!==null){if(c!==null){var d=c.next;c.next=u.next,u.next=d}a.baseQueue=c=u,i.pending=null}if(c!==null){u=c.next,a=a.baseState;var f=d=null,m=null,g=u;do{var _=g.lane;if((Fu&_)===_)m!==null&&(m=m.next={lane:0,action:g.action,hasEagerState:g.hasEagerState,eagerState:g.eagerState,next:null}),a=g.hasEagerState?g.eagerState:e(a,g.action);else{var S={lane:_,action:g.action,hasEagerState:g.hasEagerState,eagerState:g.eagerState,next:null};m===null?(f=m=S,d=a):m=m.next=S,Ar.lanes|=_,Vu|=_}g=g.next}while(g!==null&&g!==u);m===null?d=a:m.next=f,Cs(a,t.memoizedState)||(Vo=!0),t.memoizedState=a,t.baseState=d,t.baseQueue=m,i.lastRenderedState=a}if(e=i.interleaved,e!==null){c=e;do u=c.lane,Ar.lanes|=u,Vu|=u,c=c.next;while(c!==e)}else c===null&&(i.lanes=0);return[t.memoizedState,i.dispatch]}function Sb(e){var t=Wa(),i=t.queue;if(i===null)throw Error(Fe(311));i.lastRenderedReducer=e;var a=i.dispatch,c=i.pending,u=t.memoizedState;if(c!==null){i.pending=null;var d=c=c.next;do u=e(u,d.action),d=d.next;while(d!==c);Cs(u,t.memoizedState)||(Vo=!0),t.memoizedState=u,t.baseQueue===null&&(t.baseState=u),i.lastRenderedState=u}return[u,a]}function q3(){}function X3(e,t){var i=Ar,a=Wa(),c=t(),u=!Cs(a.memoizedState,c);if(u&&(a.memoizedState=c,Vo=!0),a=a.queue,LI(Z3.bind(null,i,a,e),[e]),a.getSnapshot!==t||u||Oi!==null&&Oi.memoizedState.tag&1){if(i.flags|=2048,rm(9,Q3.bind(null,i,a,c,t),void 0,null),Ai===null)throw Error(Fe(349));Fu&30||J3(i,t,c)}return c}function J3(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=Ar.updateQueue,t===null?(t={lastEffect:null,stores:null},Ar.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function Q3(e,t,i,a){t.value=i,t.getSnapshot=a,e8(t)&&t8(e)}function Z3(e,t,i){return i(function(){e8(t)&&t8(e)})}function e8(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!Cs(e,i)}catch{return!0}}function t8(e){var t=Oc(e,1);t!==null&&ys(t,e,1,-1)}function MU(e){var t=Hs();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:nm,lastRenderedState:e},t.queue=e,e=e.dispatch=Eee.bind(null,Ar,e),[t.memoizedState,e]}function rm(e,t,i,a){return e={tag:e,create:t,destroy:i,deps:a,next:null},t=Ar.updateQueue,t===null?(t={lastEffect:null,stores:null},Ar.updateQueue=t,t.lastEffect=e.next=e):(i=t.lastEffect,i===null?t.lastEffect=e.next=e:(a=i.next,i.next=e,e.next=a,t.lastEffect=e)),e}function n8(){return Wa().memoizedState}function vv(e,t,i,a){var c=Hs();Ar.flags|=e,c.memoizedState=rm(1|t,i,void 0,a===void 0?null:a)}function BE(e,t,i,a){var c=Wa();a=a===void 0?null:a;var u=void 0;if(gi!==null){var d=gi.memoizedState;if(u=d.destroy,a!==null&&PI(a,d.deps)){c.memoizedState=rm(t,i,u,a);return}}Ar.flags|=e,c.memoizedState=rm(1|t,i,u,a)}function UU(e,t){return vv(8390656,8,e,t)}function LI(e,t){return BE(2048,8,e,t)}function r8(e,t){return BE(4,2,e,t)}function i8(e,t){return BE(4,4,e,t)}function o8(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function a8(e,t,i){return i=i!=null?i.concat([e]):null,BE(4,4,o8.bind(null,t,e),i)}function MI(){}function s8(e,t){var i=Wa();t=t===void 0?null:t;var a=i.memoizedState;return a!==null&&t!==null&&PI(t,a[1])?a[0]:(i.memoizedState=[e,t],e)}function c8(e,t){var i=Wa();t=t===void 0?null:t;var a=i.memoizedState;return a!==null&&t!==null&&PI(t,a[1])?a[0]:(e=e(),i.memoizedState=[e,t],e)}function l8(e,t,i){return Fu&21?(Cs(i,t)||(i=h3(),Ar.lanes|=i,Vu|=i,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Vo=!0),e.memoizedState=i)}function gee(e,t){var i=$n;$n=i!==0&&4>i?i:4,e(!0);var a=_b.transition;_b.transition={};try{e(!1),t()}finally{$n=i,_b.transition=a}}function u8(){return Wa().memoizedState}function vee(e,t,i){var a=kl(e);if(i={lane:a,action:i,hasEagerState:!1,eagerState:null,next:null},d8(e))h8(t,i);else if(i=$3(e,t,i,a),i!==null){var c=Co();ys(i,e,a,c),p8(i,t,a)}}function Eee(e,t,i){var a=kl(e),c={lane:a,action:i,hasEagerState:!1,eagerState:null,next:null};if(d8(e))h8(t,c);else{var u=e.alternate;if(e.lanes===0&&(u===null||u.lanes===0)&&(u=t.lastRenderedReducer,u!==null))try{var d=t.lastRenderedState,f=u(d,i);if(c.hasEagerState=!0,c.eagerState=f,Cs(f,d)){var m=t.interleaved;m===null?(c.next=c,wI(t)):(c.next=m.next,m.next=c),t.interleaved=c;return}}catch{}finally{}i=$3(e,t,c,a),i!==null&&(c=Co(),ys(i,e,a,c),p8(i,t,a))}}function d8(e){var t=e.alternate;return e===Ar||t!==null&&t===Ar}function h8(e,t){Of=Xv=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function p8(e,t,i){if(i&4194240){var a=t.lanes;a&=e.pendingLanes,i|=a,t.lanes=i,pI(e,i)}}var Jv={readContext:Ha,useCallback:oo,useContext:oo,useEffect:oo,useImperativeHandle:oo,useInsertionEffect:oo,useLayoutEffect:oo,useMemo:oo,useReducer:oo,useRef:oo,useState:oo,useDebugValue:oo,useDeferredValue:oo,useTransition:oo,useMutableSource:oo,useSyncExternalStore:oo,useId:oo,unstable_isNewReconciler:!1},_ee={readContext:Ha,useCallback:function(e,t){return Hs().memoizedState=[e,t===void 0?null:t],e},useContext:Ha,useEffect:UU,useImperativeHandle:function(e,t,i){return i=i!=null?i.concat([e]):null,vv(4194308,4,o8.bind(null,t,e),i)},useLayoutEffect:function(e,t){return vv(4194308,4,e,t)},useInsertionEffect:function(e,t){return vv(4,2,e,t)},useMemo:function(e,t){var i=Hs();return t=t===void 0?null:t,e=e(),i.memoizedState=[e,t],e},useReducer:function(e,t,i){var a=Hs();return t=i!==void 0?i(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=vee.bind(null,Ar,e),[a.memoizedState,e]},useRef:function(e){var t=Hs();return e={current:e},t.memoizedState=e},useState:MU,useDebugValue:MI,useDeferredValue:function(e){return Hs().memoizedState=e},useTransition:function(){var e=MU(!1),t=e[0];return e=gee.bind(null,e[1]),Hs().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,i){var a=Ar,c=Hs();if(Cr){if(i===void 0)throw Error(Fe(407));i=i()}else{if(i=t(),Ai===null)throw Error(Fe(349));Fu&30||J3(a,t,i)}c.memoizedState=i;var u={value:i,getSnapshot:t};return c.queue=u,UU(Z3.bind(null,a,u,e),[e]),a.flags|=2048,rm(9,Q3.bind(null,a,u,i,t),void 0,null),i},useId:function(){var e=Hs(),t=Ai.identifierPrefix;if(Cr){var i=Sc,a=yc;i=(a&~(1<<32-_s(a)-1)).toString(32)+i,t=":"+t+"R"+i,i=tm++,0<i&&(t+="H"+i.toString(32)),t+=":"}else i=mee++,t=":"+t+"r"+i.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},yee={readContext:Ha,useCallback:s8,useContext:Ha,useEffect:LI,useImperativeHandle:a8,useInsertionEffect:r8,useLayoutEffect:i8,useMemo:c8,useReducer:yb,useRef:n8,useState:function(){return yb(nm)},useDebugValue:MI,useDeferredValue:function(e){var t=Wa();return l8(t,gi.memoizedState,e)},useTransition:function(){var e=yb(nm)[0],t=Wa().memoizedState;return[e,t]},useMutableSource:q3,useSyncExternalStore:X3,useId:u8,unstable_isNewReconciler:!1},See={readContext:Ha,useCallback:s8,useContext:Ha,useEffect:LI,useImperativeHandle:a8,useInsertionEffect:r8,useLayoutEffect:i8,useMemo:c8,useReducer:Sb,useRef:n8,useState:function(){return Sb(nm)},useDebugValue:MI,useDeferredValue:function(e){var t=Wa();return gi===null?t.memoizedState=e:l8(t,gi.memoizedState,e)},useTransition:function(){var e=Sb(nm)[0],t=Wa().memoizedState;return[e,t]},useMutableSource:q3,useSyncExternalStore:X3,useId:u8,unstable_isNewReconciler:!1};function Uh(e,t){try{var i="",a=t;do i+=qQ(a),a=a.return;while(a);var c=i}catch(u){c=`
Error generating stack: `+u.message+`
`+u.stack}return{value:e,source:t,stack:c,digest:null}}function Cb(e,t,i){return{value:e,source:null,stack:i??null,digest:t??null}}function xR(e,t){try{console.error(t.value)}catch(i){setTimeout(function(){throw i})}}var Cee=typeof WeakMap=="function"?WeakMap:Map;function f8(e,t,i){i=Cc(-1,i),i.tag=3,i.payload={element:null};var a=t.value;return i.callback=function(){Zv||(Zv=!0,BR=a),xR(e,t)},i}function m8(e,t,i){i=Cc(-1,i),i.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var c=t.value;i.payload=function(){return a(c)},i.callback=function(){xR(e,t)}}var u=e.stateNode;return u!==null&&typeof u.componentDidCatch=="function"&&(i.callback=function(){xR(e,t),typeof a!="function"&&(Dl===null?Dl=new Set([this]):Dl.add(this));var d=t.stack;this.componentDidCatch(t.value,{componentStack:d!==null?d:""})}),i}function jU(e,t,i){var a=e.pingCache;if(a===null){a=e.pingCache=new Cee;var c=new Set;a.set(t,c)}else c=a.get(t),c===void 0&&(c=new Set,a.set(t,c));c.has(i)||(c.add(i),e=Mee.bind(null,e,t,i),t.then(e,e))}function FU(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function VU(e,t,i,a,c){return e.mode&1?(e.flags|=65536,e.lanes=c,e):(e===t?e.flags|=65536:(e.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(t=Cc(-1,1),t.tag=2,Pl(i,t,1))),i.lanes|=1),e)}var bee=Mc.ReactCurrentOwner,Vo=!1;function yo(e,t,i,a){t.child=e===null?K3(t,null,i,a):Lh(t,e.child,i,a)}function BU(e,t,i,a,c){i=i.render;var u=t.ref;return wh(t,c),a=DI(e,t,i,a,u,c),i=kI(),e!==null&&!Vo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,Ac(e,t,c)):(Cr&&i&&SI(t),t.flags|=1,yo(e,t,a,c),t.child)}function $U(e,t,i,a,c){if(e===null){var u=i.type;return typeof u=="function"&&!WI(u)&&u.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(t.tag=15,t.type=u,g8(e,t,u,a,c)):(e=Sv(i.type,null,a,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(u=e.child,!(e.lanes&c)){var d=u.memoizedProps;if(i=i.compare,i=i!==null?i:qf,i(d,a)&&e.ref===t.ref)return Ac(e,t,c)}return t.flags|=1,e=Ll(u,a),e.ref=t.ref,e.return=t,t.child=e}function g8(e,t,i,a,c){if(e!==null){var u=e.memoizedProps;if(qf(u,a)&&e.ref===t.ref)if(Vo=!1,t.pendingProps=a=u,(e.lanes&c)!==0)e.flags&131072&&(Vo=!0);else return t.lanes=e.lanes,Ac(e,t,c)}return PR(e,t,i,a,c)}function v8(e,t,i){var a=t.pendingProps,c=a.children,u=e!==null?e.memoizedState:null;if(a.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ur(Eh,fa),fa|=i;else{if(!(i&1073741824))return e=u!==null?u.baseLanes|i:i,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ur(Eh,fa),fa|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=u!==null?u.baseLanes:i,ur(Eh,fa),fa|=a}else u!==null?(a=u.baseLanes|i,t.memoizedState=null):a=i,ur(Eh,fa),fa|=a;return yo(e,t,c,i),t.child}function E8(e,t){var i=t.ref;(e===null&&i!==null||e!==null&&e.ref!==i)&&(t.flags|=512,t.flags|=2097152)}function PR(e,t,i,a,c){var u=$o(i)?Uu:uo.current;return u=Dh(t,u),wh(t,c),i=DI(e,t,i,a,u,c),a=kI(),e!==null&&!Vo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,Ac(e,t,c)):(Cr&&a&&SI(t),t.flags|=1,yo(e,t,i,c),t.child)}function HU(e,t,i,a,c){if($o(i)){var u=!0;Hv(t)}else u=!1;if(wh(t,c),t.stateNode===null)Ev(e,t),G3(t,i,a),NR(t,i,a,c),a=!0;else if(e===null){var d=t.stateNode,f=t.memoizedProps;d.props=f;var m=d.context,g=i.contextType;typeof g=="object"&&g!==null?g=Ha(g):(g=$o(i)?Uu:uo.current,g=Dh(t,g));var _=i.getDerivedStateFromProps,S=typeof _=="function"||typeof d.getSnapshotBeforeUpdate=="function";S||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(f!==a||m!==g)&&kU(t,d,a,g),yl=!1;var b=t.memoizedState;d.state=b,Yv(t,a,d,c),m=t.memoizedState,f!==a||b!==m||Bo.current||yl?(typeof _=="function"&&(AR(t,i,_,a),m=t.memoizedState),(f=yl||DU(t,i,f,a,b,m,g))?(S||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(t.flags|=4194308)):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=m),d.props=a,d.state=m,d.context=g,a=f):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{d=t.stateNode,H3(e,t),f=t.memoizedProps,g=t.type===t.elementType?f:us(t.type,f),d.props=g,S=t.pendingProps,b=d.context,m=i.contextType,typeof m=="object"&&m!==null?m=Ha(m):(m=$o(i)?Uu:uo.current,m=Dh(t,m));var A=i.getDerivedStateFromProps;(_=typeof A=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(f!==S||b!==m)&&kU(t,d,a,m),yl=!1,b=t.memoizedState,d.state=b,Yv(t,a,d,c);var R=t.memoizedState;f!==S||b!==R||Bo.current||yl?(typeof A=="function"&&(AR(t,i,A,a),R=t.memoizedState),(g=yl||DU(t,i,g,a,b,R,m)||!1)?(_||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(a,R,m),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(a,R,m)),typeof d.componentDidUpdate=="function"&&(t.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof d.componentDidUpdate!="function"||f===e.memoizedProps&&b===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&b===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=R),d.props=a,d.state=R,d.context=m,a=g):(typeof d.componentDidUpdate!="function"||f===e.memoizedProps&&b===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&b===e.memoizedState||(t.flags|=1024),a=!1)}return DR(e,t,i,a,u,c)}function DR(e,t,i,a,c,u){E8(e,t);var d=(t.flags&128)!==0;if(!a&&!d)return c&&OU(t,i,!1),Ac(e,t,u);a=t.stateNode,bee.current=t;var f=d&&typeof i.getDerivedStateFromError!="function"?null:a.render();return t.flags|=1,e!==null&&d?(t.child=Lh(t,e.child,null,u),t.child=Lh(t,null,f,u)):yo(e,t,f,u),t.memoizedState=a.state,c&&OU(t,i,!0),t.child}function _8(e){var t=e.stateNode;t.pendingContext?wU(e,t.pendingContext,t.pendingContext!==t.context):t.context&&wU(e,t.context,!1),AI(e,t.containerInfo)}function WU(e,t,i,a,c){return kh(),bI(c),t.flags|=256,yo(e,t,i,a),t.child}var kR={dehydrated:null,treeContext:null,retryLane:0};function LR(e){return{baseLanes:e,cachePool:null,transitions:null}}function y8(e,t,i){var a=t.pendingProps,c=wr.current,u=!1,d=(t.flags&128)!==0,f;if((f=d)||(f=e!==null&&e.memoizedState===null?!1:(c&2)!==0),f?(u=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(c|=1),ur(wr,c&1),e===null)return wR(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(d=a.children,e=a.fallback,u?(a=t.mode,u=t.child,d={mode:"hidden",children:d},!(a&1)&&u!==null?(u.childLanes=0,u.pendingProps=d):u=WE(d,a,0,null),e=Du(e,a,i,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=LR(i),t.memoizedState=kR,e):UI(t,d));if(c=e.memoizedState,c!==null&&(f=c.dehydrated,f!==null))return Tee(e,t,d,a,f,c,i);if(u){u=a.fallback,d=t.mode,c=e.child,f=c.sibling;var m={mode:"hidden",children:a.children};return!(d&1)&&t.child!==c?(a=t.child,a.childLanes=0,a.pendingProps=m,t.deletions=null):(a=Ll(c,m),a.subtreeFlags=c.subtreeFlags&14680064),f!==null?u=Ll(f,u):(u=Du(u,d,i,null),u.flags|=2),u.return=t,a.return=t,a.sibling=u,t.child=a,a=u,u=t.child,d=e.child.memoizedState,d=d===null?LR(i):{baseLanes:d.baseLanes|i,cachePool:null,transitions:d.transitions},u.memoizedState=d,u.childLanes=e.childLanes&~i,t.memoizedState=kR,a}return u=e.child,e=u.sibling,a=Ll(u,{mode:"visible",children:a.children}),!(t.mode&1)&&(a.lanes=i),a.return=t,a.sibling=null,e!==null&&(i=t.deletions,i===null?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=a,t.memoizedState=null,a}function UI(e,t){return t=WE({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function kg(e,t,i,a){return a!==null&&bI(a),Lh(t,e.child,null,i),e=UI(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Tee(e,t,i,a,c,u,d){if(i)return t.flags&256?(t.flags&=-257,a=Cb(Error(Fe(422))),kg(e,t,d,a)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(u=a.fallback,c=t.mode,a=WE({mode:"visible",children:a.children},c,0,null),u=Du(u,c,d,null),u.flags|=2,a.return=t,u.return=t,a.sibling=u,t.child=a,t.mode&1&&Lh(t,e.child,null,d),t.child.memoizedState=LR(d),t.memoizedState=kR,u);if(!(t.mode&1))return kg(e,t,d,null);if(c.data==="$!"){if(a=c.nextSibling&&c.nextSibling.dataset,a)var f=a.dgst;return a=f,u=Error(Fe(419)),a=Cb(u,a,void 0),kg(e,t,d,a)}if(f=(d&e.childLanes)!==0,Vo||f){if(a=Ai,a!==null){switch(d&-d){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}c=c&(a.suspendedLanes|d)?0:c,c!==0&&c!==u.retryLane&&(u.retryLane=c,Oc(e,c),ys(a,e,c,-1))}return HI(),a=Cb(Error(Fe(421))),kg(e,t,d,a)}return c.data==="$?"?(t.flags|=128,t.child=e.child,t=Uee.bind(null,e),c._reactRetry=t,null):(e=u.treeContext,ma=xl(c.nextSibling),va=t,Cr=!0,ms=null,e!==null&&(ja[Fa++]=yc,ja[Fa++]=Sc,ja[Fa++]=ju,yc=e.id,Sc=e.overflow,ju=t),t=UI(t,a.children),t.flags|=4096,t)}function GU(e,t,i){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),OR(e.return,t,i)}function bb(e,t,i,a,c){var u=e.memoizedState;u===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:i,tailMode:c}:(u.isBackwards=t,u.rendering=null,u.renderingStartTime=0,u.last=a,u.tail=i,u.tailMode=c)}function S8(e,t,i){var a=t.pendingProps,c=a.revealOrder,u=a.tail;if(yo(e,t,a.children,i),a=wr.current,a&2)a=a&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&GU(e,i,t);else if(e.tag===19)GU(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(ur(wr,a),!(t.mode&1))t.memoizedState=null;else switch(c){case"forwards":for(i=t.child,c=null;i!==null;)e=i.alternate,e!==null&&qv(e)===null&&(c=i),i=i.sibling;i=c,i===null?(c=t.child,t.child=null):(c=i.sibling,i.sibling=null),bb(t,!1,c,i,u);break;case"backwards":for(i=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&qv(e)===null){t.child=c;break}e=c.sibling,c.sibling=i,i=c,c=e}bb(t,!0,i,null,u);break;case"together":bb(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ev(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ac(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),Vu|=t.lanes,!(i&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Fe(153));if(t.child!==null){for(e=t.child,i=Ll(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=Ll(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function Ree(e,t,i){switch(t.tag){case 3:_8(t),kh();break;case 5:Y3(t);break;case 1:$o(t.type)&&Hv(t);break;case 4:AI(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,c=t.memoizedProps.value;ur(zv,a._currentValue),a._currentValue=c;break;case 13:if(a=t.memoizedState,a!==null)return a.dehydrated!==null?(ur(wr,wr.current&1),t.flags|=128,null):i&t.child.childLanes?y8(e,t,i):(ur(wr,wr.current&1),e=Ac(e,t,i),e!==null?e.sibling:null);ur(wr,wr.current&1);break;case 19:if(a=(i&t.childLanes)!==0,e.flags&128){if(a)return S8(e,t,i);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),ur(wr,wr.current),a)break;return null;case 22:case 23:return t.lanes=0,v8(e,t,i)}return Ac(e,t,i)}var C8,MR,b8,T8;C8=function(e,t){for(var i=t.child;i!==null;){if(i.tag===5||i.tag===6)e.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};MR=function(){};b8=function(e,t,i,a){var c=e.memoizedProps;if(c!==a){e=t.stateNode,Ou(Ys.current);var u=null;switch(i){case"input":c=iR(e,c),a=iR(e,a),u=[];break;case"select":c=Nr({},c,{value:void 0}),a=Nr({},a,{value:void 0}),u=[];break;case"textarea":c=sR(e,c),a=sR(e,a),u=[];break;default:typeof c.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=Bv)}lR(i,a);var d;i=null;for(g in c)if(!a.hasOwnProperty(g)&&c.hasOwnProperty(g)&&c[g]!=null)if(g==="style"){var f=c[g];for(d in f)f.hasOwnProperty(d)&&(i||(i={}),i[d]="")}else g!=="dangerouslySetInnerHTML"&&g!=="children"&&g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&($f.hasOwnProperty(g)?u||(u=[]):(u=u||[]).push(g,null));for(g in a){var m=a[g];if(f=c!=null?c[g]:void 0,a.hasOwnProperty(g)&&m!==f&&(m!=null||f!=null))if(g==="style")if(f){for(d in f)!f.hasOwnProperty(d)||m&&m.hasOwnProperty(d)||(i||(i={}),i[d]="");for(d in m)m.hasOwnProperty(d)&&f[d]!==m[d]&&(i||(i={}),i[d]=m[d])}else i||(u||(u=[]),u.push(g,i)),i=m;else g==="dangerouslySetInnerHTML"?(m=m?m.__html:void 0,f=f?f.__html:void 0,m!=null&&f!==m&&(u=u||[]).push(g,m)):g==="children"?typeof m!="string"&&typeof m!="number"||(u=u||[]).push(g,""+m):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&($f.hasOwnProperty(g)?(m!=null&&g==="onScroll"&&gr("scroll",e),u||f===m||(u=[])):(u=u||[]).push(g,m))}i&&(u=u||[]).push("style",i);var g=u;(t.updateQueue=g)&&(t.flags|=4)}};T8=function(e,t,i,a){i!==a&&(t.flags|=4)};function of(e,t){if(!Cr)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function ao(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,a=0;if(t)for(var c=e.child;c!==null;)i|=c.lanes|c.childLanes,a|=c.subtreeFlags&14680064,a|=c.flags&14680064,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)i|=c.lanes|c.childLanes,a|=c.subtreeFlags,a|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=a,e.childLanes=i,t}function Iee(e,t,i){var a=t.pendingProps;switch(CI(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ao(t),null;case 1:return $o(t.type)&&$v(),ao(t),null;case 3:return a=t.stateNode,Mh(),vr(Bo),vr(uo),xI(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Pg(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ms!==null&&(WR(ms),ms=null))),MR(e,t),ao(t),null;case 5:NI(t);var c=Ou(em.current);if(i=t.type,e!==null&&t.stateNode!=null)b8(e,t,i,a,c),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(t.stateNode===null)throw Error(Fe(166));return ao(t),null}if(e=Ou(Ys.current),Pg(t)){a=t.stateNode,i=t.type;var u=t.memoizedProps;switch(a[zs]=t,a[Qf]=u,e=(t.mode&1)!==0,i){case"dialog":gr("cancel",a),gr("close",a);break;case"iframe":case"object":case"embed":gr("load",a);break;case"video":case"audio":for(c=0;c<yf.length;c++)gr(yf[c],a);break;case"source":gr("error",a);break;case"img":case"image":case"link":gr("error",a),gr("load",a);break;case"details":gr("toggle",a);break;case"input":eU(a,u),gr("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!u.multiple},gr("invalid",a);break;case"textarea":nU(a,u),gr("invalid",a)}lR(i,u),c=null;for(var d in u)if(u.hasOwnProperty(d)){var f=u[d];d==="children"?typeof f=="string"?a.textContent!==f&&(u.suppressHydrationWarning!==!0&&xg(a.textContent,f,e),c=["children",f]):typeof f=="number"&&a.textContent!==""+f&&(u.suppressHydrationWarning!==!0&&xg(a.textContent,f,e),c=["children",""+f]):$f.hasOwnProperty(d)&&f!=null&&d==="onScroll"&&gr("scroll",a)}switch(i){case"input":bg(a),tU(a,u,!0);break;case"textarea":bg(a),rU(a);break;case"select":case"option":break;default:typeof u.onClick=="function"&&(a.onclick=Bv)}a=c,t.updateQueue=a,a!==null&&(t.flags|=4)}else{d=c.nodeType===9?c:c.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=JV(i)),e==="http://www.w3.org/1999/xhtml"?i==="script"?(e=d.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=d.createElement(i,{is:a.is}):(e=d.createElement(i),i==="select"&&(d=e,a.multiple?d.multiple=!0:a.size&&(d.size=a.size))):e=d.createElementNS(e,i),e[zs]=t,e[Qf]=a,C8(e,t,!1,!1),t.stateNode=e;e:{switch(d=uR(i,a),i){case"dialog":gr("cancel",e),gr("close",e),c=a;break;case"iframe":case"object":case"embed":gr("load",e),c=a;break;case"video":case"audio":for(c=0;c<yf.length;c++)gr(yf[c],e);c=a;break;case"source":gr("error",e),c=a;break;case"img":case"image":case"link":gr("error",e),gr("load",e),c=a;break;case"details":gr("toggle",e),c=a;break;case"input":eU(e,a),c=iR(e,a),gr("invalid",e);break;case"option":c=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},c=Nr({},a,{value:void 0}),gr("invalid",e);break;case"textarea":nU(e,a),c=sR(e,a),gr("invalid",e);break;default:c=a}lR(i,c),f=c;for(u in f)if(f.hasOwnProperty(u)){var m=f[u];u==="style"?e3(e,m):u==="dangerouslySetInnerHTML"?(m=m?m.__html:void 0,m!=null&&QV(e,m)):u==="children"?typeof m=="string"?(i!=="textarea"||m!=="")&&Hf(e,m):typeof m=="number"&&Hf(e,""+m):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&($f.hasOwnProperty(u)?m!=null&&u==="onScroll"&&gr("scroll",e):m!=null&&sI(e,u,m,d))}switch(i){case"input":bg(e),tU(e,a,!1);break;case"textarea":bg(e),rU(e);break;case"option":a.value!=null&&e.setAttribute("value",""+Ml(a.value));break;case"select":e.multiple=!!a.multiple,u=a.value,u!=null?bh(e,!!a.multiple,u,!1):a.defaultValue!=null&&bh(e,!!a.multiple,a.defaultValue,!0);break;default:typeof c.onClick=="function"&&(e.onclick=Bv)}switch(i){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ao(t),null;case 6:if(e&&t.stateNode!=null)T8(e,t,e.memoizedProps,a);else{if(typeof a!="string"&&t.stateNode===null)throw Error(Fe(166));if(i=Ou(em.current),Ou(Ys.current),Pg(t)){if(a=t.stateNode,i=t.memoizedProps,a[zs]=t,(u=a.nodeValue!==i)&&(e=va,e!==null))switch(e.tag){case 3:xg(a.nodeValue,i,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&xg(a.nodeValue,i,(e.mode&1)!==0)}u&&(t.flags|=4)}else a=(i.nodeType===9?i:i.ownerDocument).createTextNode(a),a[zs]=t,t.stateNode=a}return ao(t),null;case 13:if(vr(wr),a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Cr&&ma!==null&&t.mode&1&&!(t.flags&128))B3(),kh(),t.flags|=98560,u=!1;else if(u=Pg(t),a!==null&&a.dehydrated!==null){if(e===null){if(!u)throw Error(Fe(318));if(u=t.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(Fe(317));u[zs]=t}else kh(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ao(t),u=!1}else ms!==null&&(WR(ms),ms=null),u=!0;if(!u)return t.flags&65536?t:null}return t.flags&128?(t.lanes=i,t):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(t.child.flags|=8192,t.mode&1&&(e===null||wr.current&1?vi===0&&(vi=3):HI())),t.updateQueue!==null&&(t.flags|=4),ao(t),null);case 4:return Mh(),MR(e,t),e===null&&Xf(t.stateNode.containerInfo),ao(t),null;case 10:return II(t.type._context),ao(t),null;case 17:return $o(t.type)&&$v(),ao(t),null;case 19:if(vr(wr),u=t.memoizedState,u===null)return ao(t),null;if(a=(t.flags&128)!==0,d=u.rendering,d===null)if(a)of(u,!1);else{if(vi!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(d=qv(e),d!==null){for(t.flags|=128,of(u,!1),a=d.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=i,i=t.child;i!==null;)u=i,e=a,u.flags&=14680066,d=u.alternate,d===null?(u.childLanes=0,u.lanes=e,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=d.childLanes,u.lanes=d.lanes,u.child=d.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=d.memoizedProps,u.memoizedState=d.memoizedState,u.updateQueue=d.updateQueue,u.type=d.type,e=d.dependencies,u.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return ur(wr,wr.current&1|2),t.child}e=e.sibling}u.tail!==null&&Gr()>jh&&(t.flags|=128,a=!0,of(u,!1),t.lanes=4194304)}else{if(!a)if(e=qv(d),e!==null){if(t.flags|=128,a=!0,i=e.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),of(u,!0),u.tail===null&&u.tailMode==="hidden"&&!d.alternate&&!Cr)return ao(t),null}else 2*Gr()-u.renderingStartTime>jh&&i!==1073741824&&(t.flags|=128,a=!0,of(u,!1),t.lanes=4194304);u.isBackwards?(d.sibling=t.child,t.child=d):(i=u.last,i!==null?i.sibling=d:t.child=d,u.last=d)}return u.tail!==null?(t=u.tail,u.rendering=t,u.tail=t.sibling,u.renderingStartTime=Gr(),t.sibling=null,i=wr.current,ur(wr,a?i&1|2:i&1),t):(ao(t),null);case 22:case 23:return $I(),a=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(t.flags|=8192),a&&t.mode&1?fa&1073741824&&(ao(t),t.subtreeFlags&6&&(t.flags|=8192)):ao(t),null;case 24:return null;case 25:return null}throw Error(Fe(156,t.tag))}function wee(e,t){switch(CI(t),t.tag){case 1:return $o(t.type)&&$v(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Mh(),vr(Bo),vr(uo),xI(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return NI(t),null;case 13:if(vr(wr),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Fe(340));kh()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return vr(wr),null;case 4:return Mh(),null;case 10:return II(t.type._context),null;case 22:case 23:return $I(),null;case 24:return null;default:return null}}var Lg=!1,lo=!1,Oee=typeof WeakSet=="function"?WeakSet:Set,lt=null;function vh(e,t){var i=e.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(a){Mr(e,t,a)}else i.current=null}function UR(e,t,i){try{i()}catch(a){Mr(e,t,a)}}var zU=!1;function Aee(e,t){if(yR=jv,e=O3(),yI(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var a=i.getSelection&&i.getSelection();if(a&&a.rangeCount!==0){i=a.anchorNode;var c=a.anchorOffset,u=a.focusNode;a=a.focusOffset;try{i.nodeType,u.nodeType}catch{i=null;break e}var d=0,f=-1,m=-1,g=0,_=0,S=e,b=null;t:for(;;){for(var A;S!==i||c!==0&&S.nodeType!==3||(f=d+c),S!==u||a!==0&&S.nodeType!==3||(m=d+a),S.nodeType===3&&(d+=S.nodeValue.length),(A=S.firstChild)!==null;)b=S,S=A;for(;;){if(S===e)break t;if(b===i&&++g===c&&(f=d),b===u&&++_===a&&(m=d),(A=S.nextSibling)!==null)break;S=b,b=S.parentNode}S=A}i=f===-1||m===-1?null:{start:f,end:m}}else i=null}i=i||{start:0,end:0}}else i=null;for(SR={focusedElem:e,selectionRange:i},jv=!1,lt=t;lt!==null;)if(t=lt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,lt=e;else for(;lt!==null;){t=lt;try{var R=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(R!==null){var w=R.memoizedProps,D=R.memoizedState,x=t.stateNode,O=x.getSnapshotBeforeUpdate(t.elementType===t.type?w:us(t.type,w),D);x.__reactInternalSnapshotBeforeUpdate=O}break;case 3:var P=t.stateNode.containerInfo;P.nodeType===1?P.textContent="":P.nodeType===9&&P.documentElement&&P.removeChild(P.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Fe(163))}}catch(M){Mr(t,t.return,M)}if(e=t.sibling,e!==null){e.return=t.return,lt=e;break}lt=t.return}return R=zU,zU=!1,R}function Af(e,t,i){var a=t.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var c=a=a.next;do{if((c.tag&e)===e){var u=c.destroy;c.destroy=void 0,u!==void 0&&UR(t,i,u)}c=c.next}while(c!==a)}}function $E(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var i=t=t.next;do{if((i.tag&e)===e){var a=i.create;i.destroy=a()}i=i.next}while(i!==t)}}function jR(e){var t=e.ref;if(t!==null){var i=e.stateNode;switch(e.tag){case 5:e=i;break;default:e=i}typeof t=="function"?t(e):t.current=e}}function R8(e){var t=e.alternate;t!==null&&(e.alternate=null,R8(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[zs],delete t[Qf],delete t[TR],delete t[dee],delete t[hee])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function I8(e){return e.tag===5||e.tag===3||e.tag===4}function KU(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||I8(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function FR(e,t,i){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?i.nodeType===8?i.parentNode.insertBefore(e,t):i.insertBefore(e,t):(i.nodeType===8?(t=i.parentNode,t.insertBefore(e,i)):(t=i,t.appendChild(e)),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=Bv));else if(a!==4&&(e=e.child,e!==null))for(FR(e,t,i),e=e.sibling;e!==null;)FR(e,t,i),e=e.sibling}function VR(e,t,i){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(VR(e,t,i),e=e.sibling;e!==null;)VR(e,t,i),e=e.sibling}var Fi=null,ds=!1;function gl(e,t,i){for(i=i.child;i!==null;)w8(e,t,i),i=i.sibling}function w8(e,t,i){if(Ks&&typeof Ks.onCommitFiberUnmount=="function")try{Ks.onCommitFiberUnmount(kE,i)}catch{}switch(i.tag){case 5:lo||vh(i,t);case 6:var a=Fi,c=ds;Fi=null,gl(e,t,i),Fi=a,ds=c,Fi!==null&&(ds?(e=Fi,i=i.stateNode,e.nodeType===8?e.parentNode.removeChild(i):e.removeChild(i)):Fi.removeChild(i.stateNode));break;case 18:Fi!==null&&(ds?(e=Fi,i=i.stateNode,e.nodeType===8?gb(e.parentNode,i):e.nodeType===1&&gb(e,i),Kf(e)):gb(Fi,i.stateNode));break;case 4:a=Fi,c=ds,Fi=i.stateNode.containerInfo,ds=!0,gl(e,t,i),Fi=a,ds=c;break;case 0:case 11:case 14:case 15:if(!lo&&(a=i.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){c=a=a.next;do{var u=c,d=u.destroy;u=u.tag,d!==void 0&&(u&2||u&4)&&UR(i,t,d),c=c.next}while(c!==a)}gl(e,t,i);break;case 1:if(!lo&&(vh(i,t),a=i.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=i.memoizedProps,a.state=i.memoizedState,a.componentWillUnmount()}catch(f){Mr(i,t,f)}gl(e,t,i);break;case 21:gl(e,t,i);break;case 22:i.mode&1?(lo=(a=lo)||i.memoizedState!==null,gl(e,t,i),lo=a):gl(e,t,i);break;default:gl(e,t,i)}}function YU(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var i=e.stateNode;i===null&&(i=e.stateNode=new Oee),t.forEach(function(a){var c=jee.bind(null,e,a);i.has(a)||(i.add(a),a.then(c,c))})}}function cs(e,t){var i=t.deletions;if(i!==null)for(var a=0;a<i.length;a++){var c=i[a];try{var u=e,d=t,f=d;e:for(;f!==null;){switch(f.tag){case 5:Fi=f.stateNode,ds=!1;break e;case 3:Fi=f.stateNode.containerInfo,ds=!0;break e;case 4:Fi=f.stateNode.containerInfo,ds=!0;break e}f=f.return}if(Fi===null)throw Error(Fe(160));w8(u,d,c),Fi=null,ds=!1;var m=c.alternate;m!==null&&(m.return=null),c.return=null}catch(g){Mr(c,t,g)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)O8(t,e),t=t.sibling}function O8(e,t){var i=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(cs(t,e),$s(e),a&4){try{Af(3,e,e.return),$E(3,e)}catch(w){Mr(e,e.return,w)}try{Af(5,e,e.return)}catch(w){Mr(e,e.return,w)}}break;case 1:cs(t,e),$s(e),a&512&&i!==null&&vh(i,i.return);break;case 5:if(cs(t,e),$s(e),a&512&&i!==null&&vh(i,i.return),e.flags&32){var c=e.stateNode;try{Hf(c,"")}catch(w){Mr(e,e.return,w)}}if(a&4&&(c=e.stateNode,c!=null)){var u=e.memoizedProps,d=i!==null?i.memoizedProps:u,f=e.type,m=e.updateQueue;if(e.updateQueue=null,m!==null)try{f==="input"&&u.type==="radio"&&u.name!=null&&qV(c,u),uR(f,d);var g=uR(f,u);for(d=0;d<m.length;d+=2){var _=m[d],S=m[d+1];_==="style"?e3(c,S):_==="dangerouslySetInnerHTML"?QV(c,S):_==="children"?Hf(c,S):sI(c,_,S,g)}switch(f){case"input":oR(c,u);break;case"textarea":XV(c,u);break;case"select":var b=c._wrapperState.wasMultiple;c._wrapperState.wasMultiple=!!u.multiple;var A=u.value;A!=null?bh(c,!!u.multiple,A,!1):b!==!!u.multiple&&(u.defaultValue!=null?bh(c,!!u.multiple,u.defaultValue,!0):bh(c,!!u.multiple,u.multiple?[]:"",!1))}c[Qf]=u}catch(w){Mr(e,e.return,w)}}break;case 6:if(cs(t,e),$s(e),a&4){if(e.stateNode===null)throw Error(Fe(162));c=e.stateNode,u=e.memoizedProps;try{c.nodeValue=u}catch(w){Mr(e,e.return,w)}}break;case 3:if(cs(t,e),$s(e),a&4&&i!==null&&i.memoizedState.isDehydrated)try{Kf(t.containerInfo)}catch(w){Mr(e,e.return,w)}break;case 4:cs(t,e),$s(e);break;case 13:cs(t,e),$s(e),c=e.child,c.flags&8192&&(u=c.memoizedState!==null,c.stateNode.isHidden=u,!u||c.alternate!==null&&c.alternate.memoizedState!==null||(VI=Gr())),a&4&&YU(e);break;case 22:if(_=i!==null&&i.memoizedState!==null,e.mode&1?(lo=(g=lo)||_,cs(t,e),lo=g):cs(t,e),$s(e),a&8192){if(g=e.memoizedState!==null,(e.stateNode.isHidden=g)&&!_&&e.mode&1)for(lt=e,_=e.child;_!==null;){for(S=lt=_;lt!==null;){switch(b=lt,A=b.child,b.tag){case 0:case 11:case 14:case 15:Af(4,b,b.return);break;case 1:vh(b,b.return);var R=b.stateNode;if(typeof R.componentWillUnmount=="function"){a=b,i=b.return;try{t=a,R.props=t.memoizedProps,R.state=t.memoizedState,R.componentWillUnmount()}catch(w){Mr(a,i,w)}}break;case 5:vh(b,b.return);break;case 22:if(b.memoizedState!==null){XU(S);continue}}A!==null?(A.return=b,lt=A):XU(S)}_=_.sibling}e:for(_=null,S=e;;){if(S.tag===5){if(_===null){_=S;try{c=S.stateNode,g?(u=c.style,typeof u.setProperty=="function"?u.setProperty("display","none","important"):u.display="none"):(f=S.stateNode,m=S.memoizedProps.style,d=m!=null&&m.hasOwnProperty("display")?m.display:null,f.style.display=ZV("display",d))}catch(w){Mr(e,e.return,w)}}}else if(S.tag===6){if(_===null)try{S.stateNode.nodeValue=g?"":S.memoizedProps}catch(w){Mr(e,e.return,w)}}else if((S.tag!==22&&S.tag!==23||S.memoizedState===null||S===e)&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===e)break e;for(;S.sibling===null;){if(S.return===null||S.return===e)break e;_===S&&(_=null),S=S.return}_===S&&(_=null),S.sibling.return=S.return,S=S.sibling}}break;case 19:cs(t,e),$s(e),a&4&&YU(e);break;case 21:break;default:cs(t,e),$s(e)}}function $s(e){var t=e.flags;if(t&2){try{e:{for(var i=e.return;i!==null;){if(I8(i)){var a=i;break e}i=i.return}throw Error(Fe(160))}switch(a.tag){case 5:var c=a.stateNode;a.flags&32&&(Hf(c,""),a.flags&=-33);var u=KU(e);VR(e,u,c);break;case 3:case 4:var d=a.stateNode.containerInfo,f=KU(e);FR(e,f,d);break;default:throw Error(Fe(161))}}catch(m){Mr(e,e.return,m)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Nee(e,t,i){lt=e,A8(e)}function A8(e,t,i){for(var a=(e.mode&1)!==0;lt!==null;){var c=lt,u=c.child;if(c.tag===22&&a){var d=c.memoizedState!==null||Lg;if(!d){var f=c.alternate,m=f!==null&&f.memoizedState!==null||lo;f=Lg;var g=lo;if(Lg=d,(lo=m)&&!g)for(lt=c;lt!==null;)d=lt,m=d.child,d.tag===22&&d.memoizedState!==null?JU(c):m!==null?(m.return=d,lt=m):JU(c);for(;u!==null;)lt=u,A8(u),u=u.sibling;lt=c,Lg=f,lo=g}qU(e)}else c.subtreeFlags&8772&&u!==null?(u.return=c,lt=u):qU(e)}}function qU(e){for(;lt!==null;){var t=lt;if(t.flags&8772){var i=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:lo||$E(5,t);break;case 1:var a=t.stateNode;if(t.flags&4&&!lo)if(i===null)a.componentDidMount();else{var c=t.elementType===t.type?i.memoizedProps:us(t.type,i.memoizedProps);a.componentDidUpdate(c,i.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var u=t.updateQueue;u!==null&&PU(t,u,a);break;case 3:var d=t.updateQueue;if(d!==null){if(i=null,t.child!==null)switch(t.child.tag){case 5:i=t.child.stateNode;break;case 1:i=t.child.stateNode}PU(t,d,i)}break;case 5:var f=t.stateNode;if(i===null&&t.flags&4){i=f;var m=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":m.autoFocus&&i.focus();break;case"img":m.src&&(i.src=m.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var g=t.alternate;if(g!==null){var _=g.memoizedState;if(_!==null){var S=_.dehydrated;S!==null&&Kf(S)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Fe(163))}lo||t.flags&512&&jR(t)}catch(b){Mr(t,t.return,b)}}if(t===e){lt=null;break}if(i=t.sibling,i!==null){i.return=t.return,lt=i;break}lt=t.return}}function XU(e){for(;lt!==null;){var t=lt;if(t===e){lt=null;break}var i=t.sibling;if(i!==null){i.return=t.return,lt=i;break}lt=t.return}}function JU(e){for(;lt!==null;){var t=lt;try{switch(t.tag){case 0:case 11:case 15:var i=t.return;try{$E(4,t)}catch(m){Mr(t,i,m)}break;case 1:var a=t.stateNode;if(typeof a.componentDidMount=="function"){var c=t.return;try{a.componentDidMount()}catch(m){Mr(t,c,m)}}var u=t.return;try{jR(t)}catch(m){Mr(t,u,m)}break;case 5:var d=t.return;try{jR(t)}catch(m){Mr(t,d,m)}}}catch(m){Mr(t,t.return,m)}if(t===e){lt=null;break}var f=t.sibling;if(f!==null){f.return=t.return,lt=f;break}lt=t.return}}var xee=Math.ceil,Qv=Mc.ReactCurrentDispatcher,jI=Mc.ReactCurrentOwner,Ba=Mc.ReactCurrentBatchConfig,Sn=0,Ai=null,si=null,Hi=0,fa=0,Eh=Bl(0),vi=0,im=null,Vu=0,HE=0,FI=0,Nf=null,Fo=null,VI=0,jh=1/0,vc=null,Zv=!1,BR=null,Dl=null,Mg=!1,Tl=null,eE=0,xf=0,$R=null,_v=-1,yv=0;function Co(){return Sn&6?Gr():_v!==-1?_v:_v=Gr()}function kl(e){return e.mode&1?Sn&2&&Hi!==0?Hi&-Hi:fee.transition!==null?(yv===0&&(yv=h3()),yv):(e=$n,e!==0||(e=window.event,e=e===void 0?16:_3(e.type)),e):1}function ys(e,t,i,a){if(50<xf)throw xf=0,$R=null,Error(Fe(185));_m(e,i,a),(!(Sn&2)||e!==Ai)&&(e===Ai&&(!(Sn&2)&&(HE|=i),vi===4&&Cl(e,Hi)),Ho(e,a),i===1&&Sn===0&&!(t.mode&1)&&(jh=Gr()+500,FE&&$l()))}function Ho(e,t){var i=e.callbackNode;fZ(e,t);var a=Uv(e,e===Ai?Hi:0);if(a===0)i!==null&&aU(i),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(i!=null&&aU(i),t===1)e.tag===0?pee(QU.bind(null,e)):j3(QU.bind(null,e)),lee(function(){!(Sn&6)&&$l()}),i=null;else{switch(p3(a)){case 1:i=hI;break;case 4:i=u3;break;case 16:i=Mv;break;case 536870912:i=d3;break;default:i=Mv}i=U8(i,N8.bind(null,e))}e.callbackPriority=t,e.callbackNode=i}}function N8(e,t){if(_v=-1,yv=0,Sn&6)throw Error(Fe(327));var i=e.callbackNode;if(Oh()&&e.callbackNode!==i)return null;var a=Uv(e,e===Ai?Hi:0);if(a===0)return null;if(a&30||a&e.expiredLanes||t)t=tE(e,a);else{t=a;var c=Sn;Sn|=2;var u=P8();(Ai!==e||Hi!==t)&&(vc=null,jh=Gr()+500,Pu(e,t));do try{kee();break}catch(f){x8(e,f)}while(1);RI(),Qv.current=u,Sn=c,si!==null?t=0:(Ai=null,Hi=0,t=vi)}if(t!==0){if(t===2&&(c=mR(e),c!==0&&(a=c,t=HR(e,c))),t===1)throw i=im,Pu(e,0),Cl(e,a),Ho(e,Gr()),i;if(t===6)Cl(e,a);else{if(c=e.current.alternate,!(a&30)&&!Pee(c)&&(t=tE(e,a),t===2&&(u=mR(e),u!==0&&(a=u,t=HR(e,u))),t===1))throw i=im,Pu(e,0),Cl(e,a),Ho(e,Gr()),i;switch(e.finishedWork=c,e.finishedLanes=a,t){case 0:case 1:throw Error(Fe(345));case 2:Cu(e,Fo,vc);break;case 3:if(Cl(e,a),(a&130023424)===a&&(t=VI+500-Gr(),10<t)){if(Uv(e,0)!==0)break;if(c=e.suspendedLanes,(c&a)!==a){Co(),e.pingedLanes|=e.suspendedLanes&c;break}e.timeoutHandle=bR(Cu.bind(null,e,Fo,vc),t);break}Cu(e,Fo,vc);break;case 4:if(Cl(e,a),(a&4194240)===a)break;for(t=e.eventTimes,c=-1;0<a;){var d=31-_s(a);u=1<<d,d=t[d],d>c&&(c=d),a&=~u}if(a=c,a=Gr()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*xee(a/1960))-a,10<a){e.timeoutHandle=bR(Cu.bind(null,e,Fo,vc),a);break}Cu(e,Fo,vc);break;case 5:Cu(e,Fo,vc);break;default:throw Error(Fe(329))}}}return Ho(e,Gr()),e.callbackNode===i?N8.bind(null,e):null}function HR(e,t){var i=Nf;return e.current.memoizedState.isDehydrated&&(Pu(e,t).flags|=256),e=tE(e,t),e!==2&&(t=Fo,Fo=i,t!==null&&WR(t)),e}function WR(e){Fo===null?Fo=e:Fo.push.apply(Fo,e)}function Pee(e){for(var t=e;;){if(t.flags&16384){var i=t.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var a=0;a<i.length;a++){var c=i[a],u=c.getSnapshot;c=c.value;try{if(!Cs(u(),c))return!1}catch{return!1}}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Cl(e,t){for(t&=~FI,t&=~HE,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var i=31-_s(t),a=1<<i;e[i]=-1,t&=~a}}function QU(e){if(Sn&6)throw Error(Fe(327));Oh();var t=Uv(e,0);if(!(t&1))return Ho(e,Gr()),null;var i=tE(e,t);if(e.tag!==0&&i===2){var a=mR(e);a!==0&&(t=a,i=HR(e,a))}if(i===1)throw i=im,Pu(e,0),Cl(e,t),Ho(e,Gr()),i;if(i===6)throw Error(Fe(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Cu(e,Fo,vc),Ho(e,Gr()),null}function BI(e,t){var i=Sn;Sn|=1;try{return e(t)}finally{Sn=i,Sn===0&&(jh=Gr()+500,FE&&$l())}}function Bu(e){Tl!==null&&Tl.tag===0&&!(Sn&6)&&Oh();var t=Sn;Sn|=1;var i=Ba.transition,a=$n;try{if(Ba.transition=null,$n=1,e)return e()}finally{$n=a,Ba.transition=i,Sn=t,!(Sn&6)&&$l()}}function $I(){fa=Eh.current,vr(Eh)}function Pu(e,t){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(i!==-1&&(e.timeoutHandle=-1,cee(i)),si!==null)for(i=si.return;i!==null;){var a=i;switch(CI(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&$v();break;case 3:Mh(),vr(Bo),vr(uo),xI();break;case 5:NI(a);break;case 4:Mh();break;case 13:vr(wr);break;case 19:vr(wr);break;case 10:II(a.type._context);break;case 22:case 23:$I()}i=i.return}if(Ai=e,si=e=Ll(e.current,null),Hi=fa=t,vi=0,im=null,FI=HE=Vu=0,Fo=Nf=null,wu!==null){for(t=0;t<wu.length;t++)if(i=wu[t],a=i.interleaved,a!==null){i.interleaved=null;var c=a.next,u=i.pending;if(u!==null){var d=u.next;u.next=c,a.next=d}i.pending=a}wu=null}return e}function x8(e,t){do{var i=si;try{if(RI(),gv.current=Jv,Xv){for(var a=Ar.memoizedState;a!==null;){var c=a.queue;c!==null&&(c.pending=null),a=a.next}Xv=!1}if(Fu=0,Oi=gi=Ar=null,Of=!1,tm=0,jI.current=null,i===null||i.return===null){vi=1,im=t,si=null;break}e:{var u=e,d=i.return,f=i,m=t;if(t=Hi,f.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){var g=m,_=f,S=_.tag;if(!(_.mode&1)&&(S===0||S===11||S===15)){var b=_.alternate;b?(_.updateQueue=b.updateQueue,_.memoizedState=b.memoizedState,_.lanes=b.lanes):(_.updateQueue=null,_.memoizedState=null)}var A=FU(d);if(A!==null){A.flags&=-257,VU(A,d,f,u,t),A.mode&1&&jU(u,g,t),t=A,m=g;var R=t.updateQueue;if(R===null){var w=new Set;w.add(m),t.updateQueue=w}else R.add(m);break e}else{if(!(t&1)){jU(u,g,t),HI();break e}m=Error(Fe(426))}}else if(Cr&&f.mode&1){var D=FU(d);if(D!==null){!(D.flags&65536)&&(D.flags|=256),VU(D,d,f,u,t),bI(Uh(m,f));break e}}u=m=Uh(m,f),vi!==4&&(vi=2),Nf===null?Nf=[u]:Nf.push(u),u=d;do{switch(u.tag){case 3:u.flags|=65536,t&=-t,u.lanes|=t;var x=f8(u,m,t);xU(u,x);break e;case 1:f=m;var O=u.type,P=u.stateNode;if(!(u.flags&128)&&(typeof O.getDerivedStateFromError=="function"||P!==null&&typeof P.componentDidCatch=="function"&&(Dl===null||!Dl.has(P)))){u.flags|=65536,t&=-t,u.lanes|=t;var M=m8(u,f,t);xU(u,M);break e}}u=u.return}while(u!==null)}k8(i)}catch(F){t=F,si===i&&i!==null&&(si=i=i.return);continue}break}while(1)}function P8(){var e=Qv.current;return Qv.current=Jv,e===null?Jv:e}function HI(){(vi===0||vi===3||vi===2)&&(vi=4),Ai===null||!(Vu&268435455)&&!(HE&268435455)||Cl(Ai,Hi)}function tE(e,t){var i=Sn;Sn|=2;var a=P8();(Ai!==e||Hi!==t)&&(vc=null,Pu(e,t));do try{Dee();break}catch(c){x8(e,c)}while(1);if(RI(),Sn=i,Qv.current=a,si!==null)throw Error(Fe(261));return Ai=null,Hi=0,vi}function Dee(){for(;si!==null;)D8(si)}function kee(){for(;si!==null&&!oZ();)D8(si)}function D8(e){var t=M8(e.alternate,e,fa);e.memoizedProps=e.pendingProps,t===null?k8(e):si=t,jI.current=null}function k8(e){var t=e;do{var i=t.alternate;if(e=t.return,t.flags&32768){if(i=wee(i,t),i!==null){i.flags&=32767,si=i;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{vi=6,si=null;return}}else if(i=Iee(i,t,fa),i!==null){si=i;return}if(t=t.sibling,t!==null){si=t;return}si=t=e}while(t!==null);vi===0&&(vi=5)}function Cu(e,t,i){var a=$n,c=Ba.transition;try{Ba.transition=null,$n=1,Lee(e,t,i,a)}finally{Ba.transition=c,$n=a}return null}function Lee(e,t,i,a){do Oh();while(Tl!==null);if(Sn&6)throw Error(Fe(327));i=e.finishedWork;var c=e.finishedLanes;if(i===null)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(Fe(177));e.callbackNode=null,e.callbackPriority=0;var u=i.lanes|i.childLanes;if(mZ(e,u),e===Ai&&(si=Ai=null,Hi=0),!(i.subtreeFlags&2064)&&!(i.flags&2064)||Mg||(Mg=!0,U8(Mv,function(){return Oh(),null})),u=(i.flags&15990)!==0,i.subtreeFlags&15990||u){u=Ba.transition,Ba.transition=null;var d=$n;$n=1;var f=Sn;Sn|=4,jI.current=null,Aee(e,i),O8(i,e),tee(SR),jv=!!yR,SR=yR=null,e.current=i,Nee(i),aZ(),Sn=f,$n=d,Ba.transition=u}else e.current=i;if(Mg&&(Mg=!1,Tl=e,eE=c),u=e.pendingLanes,u===0&&(Dl=null),lZ(i.stateNode),Ho(e,Gr()),t!==null)for(a=e.onRecoverableError,i=0;i<t.length;i++)c=t[i],a(c.value,{componentStack:c.stack,digest:c.digest});if(Zv)throw Zv=!1,e=BR,BR=null,e;return eE&1&&e.tag!==0&&Oh(),u=e.pendingLanes,u&1?e===$R?xf++:(xf=0,$R=e):xf=0,$l(),null}function Oh(){if(Tl!==null){var e=p3(eE),t=Ba.transition,i=$n;try{if(Ba.transition=null,$n=16>e?16:e,Tl===null)var a=!1;else{if(e=Tl,Tl=null,eE=0,Sn&6)throw Error(Fe(331));var c=Sn;for(Sn|=4,lt=e.current;lt!==null;){var u=lt,d=u.child;if(lt.flags&16){var f=u.deletions;if(f!==null){for(var m=0;m<f.length;m++){var g=f[m];for(lt=g;lt!==null;){var _=lt;switch(_.tag){case 0:case 11:case 15:Af(8,_,u)}var S=_.child;if(S!==null)S.return=_,lt=S;else for(;lt!==null;){_=lt;var b=_.sibling,A=_.return;if(R8(_),_===g){lt=null;break}if(b!==null){b.return=A,lt=b;break}lt=A}}}var R=u.alternate;if(R!==null){var w=R.child;if(w!==null){R.child=null;do{var D=w.sibling;w.sibling=null,w=D}while(w!==null)}}lt=u}}if(u.subtreeFlags&2064&&d!==null)d.return=u,lt=d;else e:for(;lt!==null;){if(u=lt,u.flags&2048)switch(u.tag){case 0:case 11:case 15:Af(9,u,u.return)}var x=u.sibling;if(x!==null){x.return=u.return,lt=x;break e}lt=u.return}}var O=e.current;for(lt=O;lt!==null;){d=lt;var P=d.child;if(d.subtreeFlags&2064&&P!==null)P.return=d,lt=P;else e:for(d=O;lt!==null;){if(f=lt,f.flags&2048)try{switch(f.tag){case 0:case 11:case 15:$E(9,f)}}catch(F){Mr(f,f.return,F)}if(f===d){lt=null;break e}var M=f.sibling;if(M!==null){M.return=f.return,lt=M;break e}lt=f.return}}if(Sn=c,$l(),Ks&&typeof Ks.onPostCommitFiberRoot=="function")try{Ks.onPostCommitFiberRoot(kE,e)}catch{}a=!0}return a}finally{$n=i,Ba.transition=t}}return!1}function ZU(e,t,i){t=Uh(i,t),t=f8(e,t,1),e=Pl(e,t,1),t=Co(),e!==null&&(_m(e,1,t),Ho(e,t))}function Mr(e,t,i){if(e.tag===3)ZU(e,e,i);else for(;t!==null;){if(t.tag===3){ZU(t,e,i);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Dl===null||!Dl.has(a))){e=Uh(i,e),e=m8(t,e,1),t=Pl(t,e,1),e=Co(),t!==null&&(_m(t,1,e),Ho(t,e));break}}t=t.return}}function Mee(e,t,i){var a=e.pingCache;a!==null&&a.delete(t),t=Co(),e.pingedLanes|=e.suspendedLanes&i,Ai===e&&(Hi&i)===i&&(vi===4||vi===3&&(Hi&130023424)===Hi&&500>Gr()-VI?Pu(e,0):FI|=i),Ho(e,t)}function L8(e,t){t===0&&(e.mode&1?(t=Ig,Ig<<=1,!(Ig&130023424)&&(Ig=4194304)):t=1);var i=Co();e=Oc(e,t),e!==null&&(_m(e,t,i),Ho(e,i))}function Uee(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),L8(e,i)}function jee(e,t){var i=0;switch(e.tag){case 13:var a=e.stateNode,c=e.memoizedState;c!==null&&(i=c.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(Fe(314))}a!==null&&a.delete(t),L8(e,i)}var M8;M8=function(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps||Bo.current)Vo=!0;else{if(!(e.lanes&i)&&!(t.flags&128))return Vo=!1,Ree(e,t,i);Vo=!!(e.flags&131072)}else Vo=!1,Cr&&t.flags&1048576&&F3(t,Gv,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;Ev(e,t),e=t.pendingProps;var c=Dh(t,uo.current);wh(t,i),c=DI(null,t,a,e,c,i);var u=kI();return t.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,$o(a)?(u=!0,Hv(t)):u=!1,t.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,OI(t),c.updater=VE,t.stateNode=c,c._reactInternals=t,NR(t,a,e,i),t=DR(null,t,a,!0,u,i)):(t.tag=0,Cr&&u&&SI(t),yo(null,t,c,i),t=t.child),t;case 16:a=t.elementType;e:{switch(Ev(e,t),e=t.pendingProps,c=a._init,a=c(a._payload),t.type=a,c=t.tag=Vee(a),e=us(a,e),c){case 0:t=PR(null,t,a,e,i);break e;case 1:t=HU(null,t,a,e,i);break e;case 11:t=BU(null,t,a,e,i);break e;case 14:t=$U(null,t,a,us(a.type,e),i);break e}throw Error(Fe(306,a,""))}return t;case 0:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:us(a,c),PR(e,t,a,c,i);case 1:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:us(a,c),HU(e,t,a,c,i);case 3:e:{if(_8(t),e===null)throw Error(Fe(387));a=t.pendingProps,u=t.memoizedState,c=u.element,H3(e,t),Yv(t,a,null,i);var d=t.memoizedState;if(a=d.element,u.isDehydrated)if(u={element:a,isDehydrated:!1,cache:d.cache,pendingSuspenseBoundaries:d.pendingSuspenseBoundaries,transitions:d.transitions},t.updateQueue.baseState=u,t.memoizedState=u,t.flags&256){c=Uh(Error(Fe(423)),t),t=WU(e,t,a,i,c);break e}else if(a!==c){c=Uh(Error(Fe(424)),t),t=WU(e,t,a,i,c);break e}else for(ma=xl(t.stateNode.containerInfo.firstChild),va=t,Cr=!0,ms=null,i=K3(t,null,a,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(kh(),a===c){t=Ac(e,t,i);break e}yo(e,t,a,i)}t=t.child}return t;case 5:return Y3(t),e===null&&wR(t),a=t.type,c=t.pendingProps,u=e!==null?e.memoizedProps:null,d=c.children,CR(a,c)?d=null:u!==null&&CR(a,u)&&(t.flags|=32),E8(e,t),yo(e,t,d,i),t.child;case 6:return e===null&&wR(t),null;case 13:return y8(e,t,i);case 4:return AI(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=Lh(t,null,a,i):yo(e,t,a,i),t.child;case 11:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:us(a,c),BU(e,t,a,c,i);case 7:return yo(e,t,t.pendingProps,i),t.child;case 8:return yo(e,t,t.pendingProps.children,i),t.child;case 12:return yo(e,t,t.pendingProps.children,i),t.child;case 10:e:{if(a=t.type._context,c=t.pendingProps,u=t.memoizedProps,d=c.value,ur(zv,a._currentValue),a._currentValue=d,u!==null)if(Cs(u.value,d)){if(u.children===c.children&&!Bo.current){t=Ac(e,t,i);break e}}else for(u=t.child,u!==null&&(u.return=t);u!==null;){var f=u.dependencies;if(f!==null){d=u.child;for(var m=f.firstContext;m!==null;){if(m.context===a){if(u.tag===1){m=Cc(-1,i&-i),m.tag=2;var g=u.updateQueue;if(g!==null){g=g.shared;var _=g.pending;_===null?m.next=m:(m.next=_.next,_.next=m),g.pending=m}}u.lanes|=i,m=u.alternate,m!==null&&(m.lanes|=i),OR(u.return,i,t),f.lanes|=i;break}m=m.next}}else if(u.tag===10)d=u.type===t.type?null:u.child;else if(u.tag===18){if(d=u.return,d===null)throw Error(Fe(341));d.lanes|=i,f=d.alternate,f!==null&&(f.lanes|=i),OR(d,i,t),d=u.sibling}else d=u.child;if(d!==null)d.return=u;else for(d=u;d!==null;){if(d===t){d=null;break}if(u=d.sibling,u!==null){u.return=d.return,d=u;break}d=d.return}u=d}yo(e,t,c.children,i),t=t.child}return t;case 9:return c=t.type,a=t.pendingProps.children,wh(t,i),c=Ha(c),a=a(c),t.flags|=1,yo(e,t,a,i),t.child;case 14:return a=t.type,c=us(a,t.pendingProps),c=us(a.type,c),$U(e,t,a,c,i);case 15:return g8(e,t,t.type,t.pendingProps,i);case 17:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:us(a,c),Ev(e,t),t.tag=1,$o(a)?(e=!0,Hv(t)):e=!1,wh(t,i),G3(t,a,c),NR(t,a,c,i),DR(null,t,a,!0,e,i);case 19:return S8(e,t,i);case 22:return v8(e,t,i)}throw Error(Fe(156,t.tag))};function U8(e,t){return l3(e,t)}function Fee(e,t,i,a){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Va(e,t,i,a){return new Fee(e,t,i,a)}function WI(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Vee(e){if(typeof e=="function")return WI(e)?1:0;if(e!=null){if(e=e.$$typeof,e===lI)return 11;if(e===uI)return 14}return 2}function Ll(e,t){var i=e.alternate;return i===null?(i=Va(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&14680064,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function Sv(e,t,i,a,c,u){var d=2;if(a=e,typeof e=="function")WI(e)&&(d=1);else if(typeof e=="string")d=5;else e:switch(e){case ch:return Du(i.children,c,u,t);case cI:d=8,c|=8;break;case eR:return e=Va(12,i,t,c|2),e.elementType=eR,e.lanes=u,e;case tR:return e=Va(13,i,t,c),e.elementType=tR,e.lanes=u,e;case nR:return e=Va(19,i,t,c),e.elementType=nR,e.lanes=u,e;case zV:return WE(i,c,u,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case WV:d=10;break e;case GV:d=9;break e;case lI:d=11;break e;case uI:d=14;break e;case _l:d=16,a=null;break e}throw Error(Fe(130,e==null?e:typeof e,""))}return t=Va(d,i,t,c),t.elementType=e,t.type=a,t.lanes=u,t}function Du(e,t,i,a){return e=Va(7,e,a,t),e.lanes=i,e}function WE(e,t,i,a){return e=Va(22,e,a,t),e.elementType=zV,e.lanes=i,e.stateNode={isHidden:!1},e}function Tb(e,t,i){return e=Va(6,e,null,t),e.lanes=i,e}function Rb(e,t,i){return t=Va(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Bee(e,t,i,a,c){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ob(0),this.expirationTimes=ob(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ob(0),this.identifierPrefix=a,this.onRecoverableError=c,this.mutableSourceEagerHydrationData=null}function GI(e,t,i,a,c,u,d,f,m){return e=new Bee(e,t,i,f,m),t===1?(t=1,u===!0&&(t|=8)):t=0,u=Va(3,null,null,t),e.current=u,u.stateNode=e,u.memoizedState={element:a,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},OI(u),e}function $ee(e,t,i){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:sh,key:a==null?null:""+a,children:e,containerInfo:t,implementation:i}}function j8(e){if(!e)return Ul;e=e._reactInternals;e:{if(Wu(e)!==e||e.tag!==1)throw Error(Fe(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if($o(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Fe(171))}if(e.tag===1){var i=e.type;if($o(i))return U3(e,i,t)}return t}function F8(e,t,i,a,c,u,d,f,m){return e=GI(i,a,!0,e,c,u,d,f,m),e.context=j8(null),i=e.current,a=Co(),c=kl(i),u=Cc(a,c),u.callback=t??null,Pl(i,u,c),e.current.lanes=c,_m(e,c,a),Ho(e,a),e}function GE(e,t,i,a){var c=t.current,u=Co(),d=kl(c);return i=j8(i),t.context===null?t.context=i:t.pendingContext=i,t=Cc(u,d),t.payload={element:e},a=a===void 0?null:a,a!==null&&(t.callback=a),e=Pl(c,t,d),e!==null&&(ys(e,c,d,u),mv(e,c,d)),d}function nE(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function e4(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function zI(e,t){e4(e,t),(e=e.alternate)&&e4(e,t)}function Hee(){return null}var V8=typeof reportError=="function"?reportError:function(e){console.error(e)};function KI(e){this._internalRoot=e}zE.prototype.render=KI.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Fe(409));GE(e,t,null,null)};zE.prototype.unmount=KI.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Bu(function(){GE(null,e,null,null)}),t[wc]=null}};function zE(e){this._internalRoot=e}zE.prototype.unstable_scheduleHydration=function(e){if(e){var t=g3();e={blockedOn:null,target:e,priority:t};for(var i=0;i<Sl.length&&t!==0&&t<Sl[i].priority;i++);Sl.splice(i,0,e),i===0&&E3(e)}};function YI(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function KE(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function t4(){}function Wee(e,t,i,a,c){if(c){if(typeof a=="function"){var u=a;a=function(){var g=nE(d);u.call(g)}}var d=F8(t,a,e,0,null,!1,!1,"",t4);return e._reactRootContainer=d,e[wc]=d.current,Xf(e.nodeType===8?e.parentNode:e),Bu(),d}for(;c=e.lastChild;)e.removeChild(c);if(typeof a=="function"){var f=a;a=function(){var g=nE(m);f.call(g)}}var m=GI(e,0,!1,null,null,!1,!1,"",t4);return e._reactRootContainer=m,e[wc]=m.current,Xf(e.nodeType===8?e.parentNode:e),Bu(function(){GE(t,m,i,a)}),m}function YE(e,t,i,a,c){var u=i._reactRootContainer;if(u){var d=u;if(typeof c=="function"){var f=c;c=function(){var m=nE(d);f.call(m)}}GE(t,d,e,c)}else d=Wee(i,t,e,c,a);return nE(d)}f3=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var i=_f(t.pendingLanes);i!==0&&(pI(t,i|1),Ho(t,Gr()),!(Sn&6)&&(jh=Gr()+500,$l()))}break;case 13:Bu(function(){var a=Oc(e,1);if(a!==null){var c=Co();ys(a,e,1,c)}}),zI(e,1)}};fI=function(e){if(e.tag===13){var t=Oc(e,134217728);if(t!==null){var i=Co();ys(t,e,134217728,i)}zI(e,134217728)}};m3=function(e){if(e.tag===13){var t=kl(e),i=Oc(e,t);if(i!==null){var a=Co();ys(i,e,t,a)}zI(e,t)}};g3=function(){return $n};v3=function(e,t){var i=$n;try{return $n=e,t()}finally{$n=i}};hR=function(e,t,i){switch(t){case"input":if(oR(e,i),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<i.length;t++){var a=i[t];if(a!==e&&a.form===e.form){var c=jE(a);if(!c)throw Error(Fe(90));YV(a),oR(a,c)}}}break;case"textarea":XV(e,i);break;case"select":t=i.value,t!=null&&bh(e,!!i.multiple,t,!1)}};r3=BI;i3=Bu;var Gee={usingClientEntryPoint:!1,Events:[Sm,hh,jE,t3,n3,BI]},af={findFiberByHostInstance:Iu,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},zee={bundleType:af.bundleType,version:af.version,rendererPackageName:af.rendererPackageName,rendererConfig:af.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Mc.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=s3(e),e===null?null:e.stateNode},findFiberByHostInstance:af.findFiberByHostInstance||Hee,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ug=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ug.isDisabled&&Ug.supportsFiber)try{kE=Ug.inject(zee),Ks=Ug}catch{}}Sa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Gee;Sa.createPortal=function(e,t){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!YI(t))throw Error(Fe(200));return $ee(e,t,null,i)};Sa.createRoot=function(e,t){if(!YI(e))throw Error(Fe(299));var i=!1,a="",c=V8;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(c=t.onRecoverableError)),t=GI(e,1,!1,null,null,i,!1,a,c),e[wc]=t.current,Xf(e.nodeType===8?e.parentNode:e),new KI(t)};Sa.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Fe(188)):(e=Object.keys(e).join(","),Error(Fe(268,e)));return e=s3(t),e=e===null?null:e.stateNode,e};Sa.flushSync=function(e){return Bu(e)};Sa.hydrate=function(e,t,i){if(!KE(t))throw Error(Fe(200));return YE(null,e,t,!0,i)};Sa.hydrateRoot=function(e,t,i){if(!YI(e))throw Error(Fe(405));var a=i!=null&&i.hydratedSources||null,c=!1,u="",d=V8;if(i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onRecoverableError!==void 0&&(d=i.onRecoverableError)),t=F8(t,null,e,1,i??null,c,!1,u,d),e[wc]=t.current,Xf(e),a)for(e=0;e<a.length;e++)i=a[e],c=i._getVersion,c=c(i._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[i,c]:t.mutableSourceEagerHydrationData.push(i,c);return new zE(t)};Sa.render=function(e,t,i){if(!KE(t))throw Error(Fe(200));return YE(null,e,t,!1,i)};Sa.unmountComponentAtNode=function(e){if(!KE(e))throw Error(Fe(40));return e._reactRootContainer?(Bu(function(){YE(null,null,e,!1,function(){e._reactRootContainer=null,e[wc]=null})}),!0):!1};Sa.unstable_batchedUpdates=BI;Sa.unstable_renderSubtreeIntoContainer=function(e,t,i,a){if(!KE(i))throw Error(Fe(200));if(e==null||e._reactInternals===void 0)throw Error(Fe(38));return YE(e,t,i,!1,a)};Sa.version="18.2.0-next-9e3b772b8-20220608";function B8(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(B8)}catch(e){console.error(e)}}B8(),FV.exports=Sa;var Hl=FV.exports;const $8=Lc(Hl),Kee=IV({__proto__:null,default:$8},[Hl]);var n4=Hl;QT.createRoot=n4.createRoot,QT.hydrateRoot=n4.hydrateRoot;/**
 * @remix-run/router v1.8.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function om(){return om=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},om.apply(this,arguments)}var Rl;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Rl||(Rl={}));const r4="popstate";function Yee(e){e===void 0&&(e={});function t(c,u){let{pathname:d="/",search:f="",hash:m=""}=Gu(c.location.hash.substr(1));return!d.startsWith("/")&&!d.startsWith(".")&&(d="/"+d),GR("",{pathname:d,search:f,hash:m},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function i(c,u){let d=c.document.querySelector("base"),f="";if(d&&d.getAttribute("href")){let m=c.location.href,g=m.indexOf("#");f=g===-1?m:m.slice(0,g)}return f+"#"+(typeof u=="string"?u:H8(u))}function a(c,u){qE(c.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(u)+")")}return Xee(t,i,a,e)}function Ei(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function qE(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function qee(){return Math.random().toString(36).substr(2,8)}function i4(e,t){return{usr:e.state,key:e.key,idx:t}}function GR(e,t,i,a){return i===void 0&&(i=null),om({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Gu(t):t,{state:i,key:t&&t.key||a||qee()})}function H8(e){let{pathname:t="/",search:i="",hash:a=""}=e;return i&&i!=="?"&&(t+=i.charAt(0)==="?"?i:"?"+i),a&&a!=="#"&&(t+=a.charAt(0)==="#"?a:"#"+a),t}function Gu(e){let t={};if(e){let i=e.indexOf("#");i>=0&&(t.hash=e.substr(i),e=e.substr(0,i));let a=e.indexOf("?");a>=0&&(t.search=e.substr(a),e=e.substr(0,a)),e&&(t.pathname=e)}return t}function Xee(e,t,i,a){a===void 0&&(a={});let{window:c=document.defaultView,v5Compat:u=!1}=a,d=c.history,f=Rl.Pop,m=null,g=_();g==null&&(g=0,d.replaceState(om({},d.state,{idx:g}),""));function _(){return(d.state||{idx:null}).idx}function S(){f=Rl.Pop;let D=_(),x=D==null?null:D-g;g=D,m&&m({action:f,location:w.location,delta:x})}function b(D,x){f=Rl.Push;let O=GR(w.location,D,x);i&&i(O,D),g=_()+1;let P=i4(O,g),M=w.createHref(O);try{d.pushState(P,"",M)}catch(F){if(F instanceof DOMException&&F.name==="DataCloneError")throw F;c.location.assign(M)}u&&m&&m({action:f,location:w.location,delta:1})}function A(D,x){f=Rl.Replace;let O=GR(w.location,D,x);i&&i(O,D),g=_();let P=i4(O,g),M=w.createHref(O);d.replaceState(P,"",M),u&&m&&m({action:f,location:w.location,delta:0})}function R(D){let x=c.location.origin!=="null"?c.location.origin:c.location.href,O=typeof D=="string"?D:H8(D);return Ei(x,"No window.location.(origin|href) available to create URL for href: "+O),new URL(O,x)}let w={get action(){return f},get location(){return e(c,d)},listen(D){if(m)throw new Error("A history only accepts one active listener");return c.addEventListener(r4,S),m=D,()=>{c.removeEventListener(r4,S),m=null}},createHref(D){return t(c,D)},createURL:R,encodeLocation(D){let x=R(D);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:b,replace:A,go(D){return d.go(D)}};return w}var o4;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(o4||(o4={}));function Jee(e,t,i){i===void 0&&(i="/");let a=typeof t=="string"?Gu(t):t,c=z8(a.pathname||"/",i);if(c==null)return null;let u=W8(e);Qee(u);let d=null;for(let f=0;d==null&&f<u.length;++f)d=ste(u[f],ute(c));return d}function W8(e,t,i,a){t===void 0&&(t=[]),i===void 0&&(i=[]),a===void 0&&(a="");let c=(u,d,f)=>{let m={relativePath:f===void 0?u.path||"":f,caseSensitive:u.caseSensitive===!0,childrenIndex:d,route:u};m.relativePath.startsWith("/")&&(Ei(m.relativePath.startsWith(a),'Absolute route path "'+m.relativePath+'" nested under path '+('"'+a+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),m.relativePath=m.relativePath.slice(a.length));let g=ku([a,m.relativePath]),_=i.concat(m);u.children&&u.children.length>0&&(Ei(u.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+g+'".')),W8(u.children,t,_,g)),!(u.path==null&&!u.index)&&t.push({path:g,score:ote(g,u.index),routesMeta:_})};return e.forEach((u,d)=>{var f;if(u.path===""||!((f=u.path)!=null&&f.includes("?")))c(u,d);else for(let m of G8(u.path))c(u,d,m)}),t}function G8(e){let t=e.split("/");if(t.length===0)return[];let[i,...a]=t,c=i.endsWith("?"),u=i.replace(/\?$/,"");if(a.length===0)return c?[u,""]:[u];let d=G8(a.join("/")),f=[];return f.push(...d.map(m=>m===""?u:[u,m].join("/"))),c&&f.push(...d),f.map(m=>e.startsWith("/")&&m===""?"/":m)}function Qee(e){e.sort((t,i)=>t.score!==i.score?i.score-t.score:ate(t.routesMeta.map(a=>a.childrenIndex),i.routesMeta.map(a=>a.childrenIndex)))}const Zee=/^:\w+$/,ete=3,tte=2,nte=1,rte=10,ite=-2,a4=e=>e==="*";function ote(e,t){let i=e.split("/"),a=i.length;return i.some(a4)&&(a+=ite),t&&(a+=tte),i.filter(c=>!a4(c)).reduce((c,u)=>c+(Zee.test(u)?ete:u===""?nte:rte),a)}function ate(e,t){return e.length===t.length&&e.slice(0,-1).every((a,c)=>a===t[c])?e[e.length-1]-t[t.length-1]:0}function ste(e,t){let{routesMeta:i}=e,a={},c="/",u=[];for(let d=0;d<i.length;++d){let f=i[d],m=d===i.length-1,g=c==="/"?t:t.slice(c.length)||"/",_=cte({path:f.relativePath,caseSensitive:f.caseSensitive,end:m},g);if(!_)return null;Object.assign(a,_.params);let S=f.route;u.push({params:a,pathname:ku([c,_.pathname]),pathnameBase:gte(ku([c,_.pathnameBase])),route:S}),_.pathnameBase!=="/"&&(c=ku([c,_.pathnameBase]))}return u}function cte(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[i,a]=lte(e.path,e.caseSensitive,e.end),c=t.match(i);if(!c)return null;let u=c[0],d=u.replace(/(.)\/+$/,"$1"),f=c.slice(1);return{params:a.reduce((g,_,S)=>{if(_==="*"){let b=f[S]||"";d=u.slice(0,u.length-b.length).replace(/(.)\/+$/,"$1")}return g[_]=dte(f[S]||"",_),g},{}),pathname:u,pathnameBase:d,pattern:e}}function lte(e,t,i){t===void 0&&(t=!1),i===void 0&&(i=!0),qE(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let a=[],c="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(d,f)=>(a.push(f),"/([^\\/]+)"));return e.endsWith("*")?(a.push("*"),c+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?c+="\\/*$":e!==""&&e!=="/"&&(c+="(?:(?=\\/|$))"),[new RegExp(c,t?void 0:"i"),a]}function ute(e){try{return decodeURI(e)}catch(t){return qE(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function dte(e,t){try{return decodeURIComponent(e)}catch(i){return qE(!1,'The value for the URL param "'+t+'" will not be decoded because'+(' the string "'+e+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+i+").")),e}}function z8(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let i=t.endsWith("/")?t.length-1:t.length,a=e.charAt(i);return a&&a!=="/"?null:e.slice(i)||"/"}function hte(e,t){t===void 0&&(t="/");let{pathname:i,search:a="",hash:c=""}=typeof e=="string"?Gu(e):e;return{pathname:i?i.startsWith("/")?i:pte(i,t):t,search:vte(a),hash:Ete(c)}}function pte(e,t){let i=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(c=>{c===".."?i.length>1&&i.pop():c!=="."&&i.push(c)}),i.length>1?i.join("/"):"/"}function Ib(e,t,i,a){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(a)+"].  Please separate it out to the ")+("`to."+i+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function fte(e){return e.filter((t,i)=>i===0||t.route.path&&t.route.path.length>0)}function mte(e,t,i,a){a===void 0&&(a=!1);let c;typeof e=="string"?c=Gu(e):(c=om({},e),Ei(!c.pathname||!c.pathname.includes("?"),Ib("?","pathname","search",c)),Ei(!c.pathname||!c.pathname.includes("#"),Ib("#","pathname","hash",c)),Ei(!c.search||!c.search.includes("#"),Ib("#","search","hash",c)));let u=e===""||c.pathname==="",d=u?"/":c.pathname,f;if(a||d==null)f=i;else{let S=t.length-1;if(d.startsWith("..")){let b=d.split("/");for(;b[0]==="..";)b.shift(),S-=1;c.pathname=b.join("/")}f=S>=0?t[S]:"/"}let m=hte(c,f),g=d&&d!=="/"&&d.endsWith("/"),_=(u||d===".")&&i.endsWith("/");return!m.pathname.endsWith("/")&&(g||_)&&(m.pathname+="/"),m}const ku=e=>e.join("/").replace(/\/\/+/g,"/"),gte=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),vte=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Ete=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function _te(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const K8=["post","put","patch","delete"];new Set(K8);const yte=["get",...K8];new Set(yte);/**
 * React Router v6.15.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rE(){return rE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},rE.apply(this,arguments)}const qI=y.createContext(null),Ste=y.createContext(null),XE=y.createContext(null),JE=y.createContext(null),Kh=y.createContext({outlet:null,matches:[],isDataRoute:!1}),Y8=y.createContext(null);function QE(){return y.useContext(JE)!=null}function q8(){return QE()||Ei(!1),y.useContext(JE).location}function X8(e){y.useContext(XE).static||y.useLayoutEffect(e)}function Cte(){let{isDataRoute:e}=y.useContext(Kh);return e?Lte():bte()}function bte(){QE()||Ei(!1);let e=y.useContext(qI),{basename:t,navigator:i}=y.useContext(XE),{matches:a}=y.useContext(Kh),{pathname:c}=q8(),u=JSON.stringify(fte(a).map(m=>m.pathnameBase)),d=y.useRef(!1);return X8(()=>{d.current=!0}),y.useCallback(function(m,g){if(g===void 0&&(g={}),!d.current)return;if(typeof m=="number"){i.go(m);return}let _=mte(m,JSON.parse(u),c,g.relative==="path");e==null&&t!=="/"&&(_.pathname=_.pathname==="/"?t:ku([t,_.pathname])),(g.replace?i.replace:i.push)(_,g.state,g)},[t,i,u,c,e])}function Tte(e,t){return Rte(e,t)}function Rte(e,t,i){QE()||Ei(!1);let{navigator:a}=y.useContext(XE),{matches:c}=y.useContext(Kh),u=c[c.length-1],d=u?u.params:{};u&&u.pathname;let f=u?u.pathnameBase:"/";u&&u.route;let m=q8(),g;if(t){var _;let w=typeof t=="string"?Gu(t):t;f==="/"||(_=w.pathname)!=null&&_.startsWith(f)||Ei(!1),g=w}else g=m;let S=g.pathname||"/",b=f==="/"?S:S.slice(f.length)||"/",A=Jee(e,{pathname:b}),R=Nte(A&&A.map(w=>Object.assign({},w,{params:Object.assign({},d,w.params),pathname:ku([f,a.encodeLocation?a.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?f:ku([f,a.encodeLocation?a.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),c,i);return t&&R?y.createElement(JE.Provider,{value:{location:rE({pathname:"/",search:"",hash:"",state:null,key:"default"},g),navigationType:Rl.Pop}},R):R}function Ite(){let e=kte(),t=_te(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),i=e instanceof Error?e.stack:null,c={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},u=null;return y.createElement(y.Fragment,null,y.createElement("h2",null,"Unexpected Application Error!"),y.createElement("h3",{style:{fontStyle:"italic"}},t),i?y.createElement("pre",{style:c},i):null,u)}const wte=y.createElement(Ite,null);class Ote extends y.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,i){return i.location!==t.location||i.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error||i.error,location:i.location,revalidation:t.revalidation||i.revalidation}}componentDidCatch(t,i){console.error("React Router caught the following error during render",t,i)}render(){return this.state.error?y.createElement(Kh.Provider,{value:this.props.routeContext},y.createElement(Y8.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Ate(e){let{routeContext:t,match:i,children:a}=e,c=y.useContext(qI);return c&&c.static&&c.staticContext&&(i.route.errorElement||i.route.ErrorBoundary)&&(c.staticContext._deepestRenderedBoundaryId=i.route.id),y.createElement(Kh.Provider,{value:t},a)}function Nte(e,t,i){var a;if(t===void 0&&(t=[]),i===void 0&&(i=null),e==null){var c;if((c=i)!=null&&c.errors)e=i.matches;else return null}let u=e,d=(a=i)==null?void 0:a.errors;if(d!=null){let f=u.findIndex(m=>m.route.id&&(d==null?void 0:d[m.route.id]));f>=0||Ei(!1),u=u.slice(0,Math.min(u.length,f+1))}return u.reduceRight((f,m,g)=>{let _=m.route.id?d==null?void 0:d[m.route.id]:null,S=null;i&&(S=m.route.errorElement||wte);let b=t.concat(u.slice(0,g+1)),A=()=>{let R;return _?R=S:m.route.Component?R=y.createElement(m.route.Component,null):m.route.element?R=m.route.element:R=f,y.createElement(Ate,{match:m,routeContext:{outlet:f,matches:b,isDataRoute:i!=null},children:R})};return i&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?y.createElement(Ote,{location:i.location,revalidation:i.revalidation,component:S,error:_,children:A(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):A()},null)}var J8=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(J8||{}),iE=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(iE||{});function xte(e){let t=y.useContext(qI);return t||Ei(!1),t}function Pte(e){let t=y.useContext(Ste);return t||Ei(!1),t}function Dte(e){let t=y.useContext(Kh);return t||Ei(!1),t}function Q8(e){let t=Dte(),i=t.matches[t.matches.length-1];return i.route.id||Ei(!1),i.route.id}function kte(){var e;let t=y.useContext(Y8),i=Pte(iE.UseRouteError),a=Q8(iE.UseRouteError);return t||((e=i.errors)==null?void 0:e[a])}function Lte(){let{router:e}=xte(J8.UseNavigateStable),t=Q8(iE.UseNavigateStable),i=y.useRef(!1);return X8(()=>{i.current=!0}),y.useCallback(function(c,u){u===void 0&&(u={}),i.current&&(typeof c=="number"?e.navigate(c):e.navigate(c,rE({fromRouteId:t},u)))},[e,t])}function bu(e){Ei(!1)}function Mte(e){let{basename:t="/",children:i=null,location:a,navigationType:c=Rl.Pop,navigator:u,static:d=!1}=e;QE()&&Ei(!1);let f=t.replace(/^\/*/,"/"),m=y.useMemo(()=>({basename:f,navigator:u,static:d}),[f,u,d]);typeof a=="string"&&(a=Gu(a));let{pathname:g="/",search:_="",hash:S="",state:b=null,key:A="default"}=a,R=y.useMemo(()=>{let w=z8(g,f);return w==null?null:{location:{pathname:w,search:_,hash:S,state:b,key:A},navigationType:c}},[f,g,_,S,b,A,c]);return R==null?null:y.createElement(XE.Provider,{value:m},y.createElement(JE.Provider,{children:i,value:R}))}function Ute(e){let{children:t,location:i}=e;return Tte(zR(t),i)}new Promise(()=>{});function zR(e,t){t===void 0&&(t=[]);let i=[];return y.Children.forEach(e,(a,c)=>{if(!y.isValidElement(a))return;let u=[...t,c];if(a.type===y.Fragment){i.push.apply(i,zR(a.props.children,u));return}a.type!==bu&&Ei(!1),!a.props.index||!a.props.children||Ei(!1);let d={id:a.props.id||u.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(d.children=zR(a.props.children,u)),i.push(d)}),i}/**
 * React Router DOM v6.15.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const jte="startTransition",s4=xh[jte];function Fte(e){let{basename:t,children:i,future:a,window:c}=e,u=y.useRef();u.current==null&&(u.current=Yee({window:c,v5Compat:!0}));let d=u.current,[f,m]=y.useState({action:d.action,location:d.location}),{v7_startTransition:g}=a||{},_=y.useCallback(S=>{g&&s4?s4(()=>m(S)):m(S)},[m,g]);return y.useLayoutEffect(()=>d.listen(_),[d,_]),y.createElement(Mte,{basename:t,children:i,location:f.location,navigationType:f.action,navigator:d})}var c4;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher"})(c4||(c4={}));var l4;(function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(l4||(l4={}));function za(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jn(e){"@babel/helpers - typeof";return jn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jn(e)}function Vte(e,t){if(jn(e)!=="object"||e===null)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t||"default");if(jn(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Z8(e){var t=Vte(e,"string");return jn(t)==="symbol"?t:String(t)}function u4(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Z8(a.key),a)}}function Ka(e,t,i){return t&&u4(e.prototype,t),i&&u4(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function KR(e,t){return KR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,c){return a.__proto__=c,a},KR(e,t)}function Yh(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&KR(e,t)}function oE(e){return oE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},oE(e)}function Bte(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function aE(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $te(e,t){if(t&&(jn(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return aE(e)}function qh(e){var t=Bte();return function(){var a=oE(e),c;if(t){var u=oE(this).constructor;c=Reflect.construct(a,arguments,u)}else c=a.apply(this,arguments);return $te(this,c)}}var eB={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function i(){for(var a=[],c=0;c<arguments.length;c++){var u=arguments[c];if(u){var d=typeof u;if(d==="string"||d==="number")a.push(u);else if(Array.isArray(u)){if(u.length){var f=i.apply(null,u);f&&a.push(f)}}else if(d==="object"){if(u.toString!==Object.prototype.toString&&!u.toString.toString().includes("[native code]")){a.push(u.toString());continue}for(var m in u)t.call(u,m)&&u[m]&&a.push(m)}}}return a.join(" ")}e.exports?(i.default=i,e.exports=i):window.classNames=i})()})(eB);var Hte=eB.exports;const Ve=Lc(Hte);function He(){return He=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},He.apply(this,arguments)}var tB={exports:{}},Wn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ni=typeof Symbol=="function"&&Symbol.for,XI=Ni?Symbol.for("react.element"):60103,JI=Ni?Symbol.for("react.portal"):60106,ZE=Ni?Symbol.for("react.fragment"):60107,e_=Ni?Symbol.for("react.strict_mode"):60108,t_=Ni?Symbol.for("react.profiler"):60114,n_=Ni?Symbol.for("react.provider"):60109,r_=Ni?Symbol.for("react.context"):60110,QI=Ni?Symbol.for("react.async_mode"):60111,i_=Ni?Symbol.for("react.concurrent_mode"):60111,o_=Ni?Symbol.for("react.forward_ref"):60112,a_=Ni?Symbol.for("react.suspense"):60113,Wte=Ni?Symbol.for("react.suspense_list"):60120,s_=Ni?Symbol.for("react.memo"):60115,c_=Ni?Symbol.for("react.lazy"):60116,Gte=Ni?Symbol.for("react.block"):60121,zte=Ni?Symbol.for("react.fundamental"):60117,Kte=Ni?Symbol.for("react.responder"):60118,Yte=Ni?Symbol.for("react.scope"):60119;function ba(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case XI:switch(e=e.type,e){case QI:case i_:case ZE:case t_:case e_:case a_:return e;default:switch(e=e&&e.$$typeof,e){case r_:case o_:case c_:case s_:case n_:return e;default:return t}}case JI:return t}}}function nB(e){return ba(e)===i_}Wn.AsyncMode=QI;Wn.ConcurrentMode=i_;Wn.ContextConsumer=r_;Wn.ContextProvider=n_;Wn.Element=XI;Wn.ForwardRef=o_;Wn.Fragment=ZE;Wn.Lazy=c_;Wn.Memo=s_;Wn.Portal=JI;Wn.Profiler=t_;Wn.StrictMode=e_;Wn.Suspense=a_;Wn.isAsyncMode=function(e){return nB(e)||ba(e)===QI};Wn.isConcurrentMode=nB;Wn.isContextConsumer=function(e){return ba(e)===r_};Wn.isContextProvider=function(e){return ba(e)===n_};Wn.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===XI};Wn.isForwardRef=function(e){return ba(e)===o_};Wn.isFragment=function(e){return ba(e)===ZE};Wn.isLazy=function(e){return ba(e)===c_};Wn.isMemo=function(e){return ba(e)===s_};Wn.isPortal=function(e){return ba(e)===JI};Wn.isProfiler=function(e){return ba(e)===t_};Wn.isStrictMode=function(e){return ba(e)===e_};Wn.isSuspense=function(e){return ba(e)===a_};Wn.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===ZE||e===i_||e===t_||e===e_||e===a_||e===Wte||typeof e=="object"&&e!==null&&(e.$$typeof===c_||e.$$typeof===s_||e.$$typeof===n_||e.$$typeof===r_||e.$$typeof===o_||e.$$typeof===zte||e.$$typeof===Kte||e.$$typeof===Yte||e.$$typeof===Gte)};Wn.typeOf=ba;tB.exports=Wn;var ZI=tB.exports;function Nc(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=[];return ut.Children.forEach(e,function(a){a==null&&!t.keepEmpty||(Array.isArray(a)?i=i.concat(Nc(a)):ZI.isFragment(a)&&a.props?i=i.concat(Nc(a.props.children,t)):i.push(a))}),i}var YR={},qte=function(t){};function Xte(e,t){}function Jte(e,t){}function Qte(){YR={}}function rB(e,t,i){!t&&!YR[i]&&(e(!1,i),YR[i]=!0)}function Wo(e,t){rB(Xte,e,t)}function Zte(e,t){rB(Jte,e,t)}Wo.preMessage=qte;Wo.resetWarned=Qte;Wo.noteOnce=Zte;function tt(e,t,i){return t=Z8(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function d4(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),i.push.apply(i,a)}return i}function Ee(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?d4(Object(i),!0).forEach(function(a){tt(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):d4(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function l_(e,t,i){var a=y.useRef({});return(!("value"in a.current)||i(a.current.condition,t))&&(a.current.value=e(),a.current.condition=t),a.current.value}function ew(e,t){typeof e=="function"?e(t):jn(e)==="object"&&e&&"current"in e&&(e.current=t)}function Is(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var a=t.filter(function(c){return c});return a.length<=1?a[0]:function(c){t.forEach(function(u){ew(u,c)})}}function tw(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return l_(function(){return Is.apply(void 0,t)},t,function(a,c){return a.length===c.length&&a.every(function(u,d){return u===c[d]})})}function Xh(e){var t,i,a=ZI.isMemo(e)?e.type.type:e.type;return!(typeof a=="function"&&!((t=a.prototype)!==null&&t!==void 0&&t.render)||typeof e=="function"&&!((i=e.prototype)!==null&&i!==void 0&&i.render))}function sE(e){return e instanceof HTMLElement||e instanceof SVGElement}function qR(e){return sE(e)?e:e instanceof ut.Component?$8.findDOMNode(e):null}var iB=function(){if(typeof Map<"u")return Map;function e(t,i){var a=-1;return t.some(function(c,u){return c[0]===i?(a=u,!0):!1}),a}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(i){var a=e(this.__entries__,i),c=this.__entries__[a];return c&&c[1]},t.prototype.set=function(i,a){var c=e(this.__entries__,i);~c?this.__entries__[c][1]=a:this.__entries__.push([i,a])},t.prototype.delete=function(i){var a=this.__entries__,c=e(a,i);~c&&a.splice(c,1)},t.prototype.has=function(i){return!!~e(this.__entries__,i)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(i,a){a===void 0&&(a=null);for(var c=0,u=this.__entries__;c<u.length;c++){var d=u[c];i.call(a,d[1],d[0])}},t}()}(),XR=typeof window<"u"&&typeof document<"u"&&window.document===document,cE=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),ene=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(cE):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)}}(),tne=2;function nne(e,t){var i=!1,a=!1,c=0;function u(){i&&(i=!1,e()),a&&f()}function d(){ene(u)}function f(){var m=Date.now();if(i){if(m-c<tne)return;a=!0}else i=!0,a=!1,setTimeout(d,t);c=m}return f}var rne=20,ine=["top","right","bottom","left","width","height","size","weight"],one=typeof MutationObserver<"u",ane=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=nne(this.refresh.bind(this),rne)}return e.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},e.prototype.removeObserver=function(t){var i=this.observers_,a=i.indexOf(t);~a&&i.splice(a,1),!i.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){var t=this.updateObservers_();t&&this.refresh()},e.prototype.updateObservers_=function(){var t=this.observers_.filter(function(i){return i.gatherActive(),i.hasActive()});return t.forEach(function(i){return i.broadcastActive()}),t.length>0},e.prototype.connect_=function(){!XR||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),one?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){!XR||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(t){var i=t.propertyName,a=i===void 0?"":i,c=ine.some(function(u){return!!~a.indexOf(u)});c&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),oB=function(e,t){for(var i=0,a=Object.keys(t);i<a.length;i++){var c=a[i];Object.defineProperty(e,c,{value:t[c],enumerable:!1,writable:!1,configurable:!0})}return e},Fh=function(e){var t=e&&e.ownerDocument&&e.ownerDocument.defaultView;return t||cE},aB=u_(0,0,0,0);function lE(e){return parseFloat(e)||0}function h4(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];return t.reduce(function(a,c){var u=e["border-"+c+"-width"];return a+lE(u)},0)}function sne(e){for(var t=["top","right","bottom","left"],i={},a=0,c=t;a<c.length;a++){var u=c[a],d=e["padding-"+u];i[u]=lE(d)}return i}function cne(e){var t=e.getBBox();return u_(0,0,t.width,t.height)}function lne(e){var t=e.clientWidth,i=e.clientHeight;if(!t&&!i)return aB;var a=Fh(e).getComputedStyle(e),c=sne(a),u=c.left+c.right,d=c.top+c.bottom,f=lE(a.width),m=lE(a.height);if(a.boxSizing==="border-box"&&(Math.round(f+u)!==t&&(f-=h4(a,"left","right")+u),Math.round(m+d)!==i&&(m-=h4(a,"top","bottom")+d)),!dne(e)){var g=Math.round(f+u)-t,_=Math.round(m+d)-i;Math.abs(g)!==1&&(f-=g),Math.abs(_)!==1&&(m-=_)}return u_(c.left,c.top,f,m)}var une=function(){return typeof SVGGraphicsElement<"u"?function(e){return e instanceof Fh(e).SVGGraphicsElement}:function(e){return e instanceof Fh(e).SVGElement&&typeof e.getBBox=="function"}}();function dne(e){return e===Fh(e).document.documentElement}function hne(e){return XR?une(e)?cne(e):lne(e):aB}function pne(e){var t=e.x,i=e.y,a=e.width,c=e.height,u=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,d=Object.create(u.prototype);return oB(d,{x:t,y:i,width:a,height:c,top:i,right:t+a,bottom:c+i,left:t}),d}function u_(e,t,i,a){return{x:e,y:t,width:i,height:a}}var fne=function(){function e(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=u_(0,0,0,0),this.target=t}return e.prototype.isActive=function(){var t=hne(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},e}(),mne=function(){function e(t,i){var a=pne(i);oB(this,{target:t,contentRect:a})}return e}(),gne=function(){function e(t,i,a){if(this.activeObservations_=[],this.observations_=new iB,typeof t!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=i,this.callbackCtx_=a}return e.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof Fh(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var i=this.observations_;i.has(t)||(i.set(t,new fne(t)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof Fh(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var i=this.observations_;i.has(t)&&(i.delete(t),i.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(i){i.isActive()&&t.activeObservations_.push(i)})},e.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,i=this.activeObservations_.map(function(a){return new mne(a.target,a.broadcastRect())});this.callback_.call(t,i,t),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),sB=typeof WeakMap<"u"?new WeakMap:new iB,cB=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var i=ane.getInstance(),a=new gne(t,i,this);sB.set(this,a)}return e}();["observe","unobserve","disconnect"].forEach(function(e){cB.prototype[e]=function(){var t;return(t=sB.get(this))[e].apply(t,arguments)}});var vne=function(){return typeof cE.ResizeObserver<"u"?cE.ResizeObserver:cB}(),Il=new Map;function Ene(e){e.forEach(function(t){var i,a=t.target;(i=Il.get(a))===null||i===void 0||i.forEach(function(c){return c(a)})})}var lB=new vne(Ene);function _ne(e,t){Il.has(e)||(Il.set(e,new Set),lB.observe(e)),Il.get(e).add(t)}function yne(e,t){Il.has(e)&&(Il.get(e).delete(t),Il.get(e).size||(lB.unobserve(e),Il.delete(e)))}var Sne=function(e){Yh(i,e);var t=qh(i);function i(){return za(this,i),t.apply(this,arguments)}return Ka(i,[{key:"render",value:function(){return this.props.children}}]),i}(y.Component),JR=y.createContext(null);function Cne(e){var t=e.children,i=e.onBatchResize,a=y.useRef(0),c=y.useRef([]),u=y.useContext(JR),d=y.useCallback(function(f,m,g){a.current+=1;var _=a.current;c.current.push({size:f,element:m,data:g}),Promise.resolve().then(function(){_===a.current&&(i==null||i(c.current),c.current=[])}),u==null||u(f,m,g)},[i,u]);return y.createElement(JR.Provider,{value:d},t)}function bne(e,t){var i=e.children,a=e.disabled,c=y.useRef(null),u=y.useRef(null),d=y.useContext(JR),f=typeof i=="function",m=f?i(c):i,g=y.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),_=!f&&y.isValidElement(m)&&Xh(m),S=_?m.ref:null,b=y.useMemo(function(){return Is(S,c)},[S,c]),A=function(){return qR(c.current)||qR(u.current)};y.useImperativeHandle(t,function(){return A()});var R=y.useRef(e);R.current=e;var w=y.useCallback(function(D){var x=R.current,O=x.onResize,P=x.data,M=D.getBoundingClientRect(),F=M.width,j=M.height,B=D.offsetWidth,H=D.offsetHeight,K=Math.floor(F),$=Math.floor(j);if(g.current.width!==K||g.current.height!==$||g.current.offsetWidth!==B||g.current.offsetHeight!==H){var Z={width:K,height:$,offsetWidth:B,offsetHeight:H};g.current=Z;var z=B===Math.round(F)?F:B,G=H===Math.round(j)?j:H,ee=Ee(Ee({},Z),{},{offsetWidth:z,offsetHeight:G});d==null||d(ee,D,P),O&&Promise.resolve().then(function(){O(ee,D)})}},[]);return y.useEffect(function(){var D=A();return D&&!a&&_ne(D,w),function(){return yne(D,w)}},[c.current,a]),y.createElement(Sne,{ref:u},_?y.cloneElement(m,{ref:b}):m)}var Tne=y.forwardRef(bne),Rne="rc-observer-key";function Ine(e,t){var i=e.children,a=typeof i=="function"?[i]:Nc(i);return a.map(function(c,u){var d=(c==null?void 0:c.key)||"".concat(Rne,"-").concat(u);return y.createElement(Tne,He({},e,{key:d,ref:u===0?t:void 0}),c)})}var zu=y.forwardRef(Ine);zu.Collection=Cne;function Yo(e,t){var i=Ee({},e);return Array.isArray(t)&&t.forEach(function(a){delete i[a]}),i}function QR(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function wne(e){if(Array.isArray(e))return QR(e)}function uB(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function nw(e,t){if(e){if(typeof e=="string")return QR(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return QR(e,t)}}function One(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qe(e){return wne(e)||uB(e)||nw(e)||One()}var dB=function(t){return+setTimeout(t,16)},hB=function(t){return clearTimeout(t)};typeof window<"u"&&"requestAnimationFrame"in window&&(dB=function(t){return window.requestAnimationFrame(t)},hB=function(t){return window.cancelAnimationFrame(t)});var p4=0,rw=new Map;function pB(e){rw.delete(e)}var Wi=function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;p4+=1;var a=p4;function c(u){if(u===0)pB(a),t();else{var d=dB(function(){c(u-1)});rw.set(a,d)}}return c(i),a};Wi.cancel=function(e){var t=rw.get(e);return pB(t),hB(t)};function iw(e){for(var t=0,i,a=0,c=e.length;c>=4;++a,c-=4)i=e.charCodeAt(a)&255|(e.charCodeAt(++a)&255)<<8|(e.charCodeAt(++a)&255)<<16|(e.charCodeAt(++a)&255)<<24,i=(i&65535)*1540483477+((i>>>16)*59797<<16),i^=i>>>24,t=(i&65535)*1540483477+((i>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(c){case 3:t^=(e.charCodeAt(a+2)&255)<<16;case 2:t^=(e.charCodeAt(a+1)&255)<<8;case 1:t^=e.charCodeAt(a)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}function Ane(e,t){if(e==null)return{};var i={},a=Object.keys(e),c,u;for(u=0;u<a.length;u++)c=a[u],!(t.indexOf(c)>=0)&&(i[c]=e[c]);return i}function fn(e,t){if(e==null)return{};var i=Ane(e,t),a,c;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(c=0;c<u.length;c++)a=u[c],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function ow(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=new Set;function c(u,d){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,m=a.has(u);if(Wo(!m,"Warning: There may be circular references"),m)return!1;if(u===d)return!0;if(i&&f>1)return!1;a.add(u);var g=f+1;if(Array.isArray(u)){if(!Array.isArray(d)||u.length!==d.length)return!1;for(var _=0;_<u.length;_++)if(!c(u[_],d[_],g))return!1;return!0}if(u&&d&&jn(u)==="object"&&jn(d)==="object"){var S=Object.keys(u);return S.length!==Object.keys(d).length?!1:S.every(function(b){return c(u[b],d[b],g)})}return!1}return c(e,t)}var Nne=function(){function e(t){za(this,e),tt(this,"instanceId",void 0),tt(this,"cache",new Map),this.instanceId=t}return Ka(e,[{key:"get",value:function(i){return this.cache.get(i.join("%"))||null}},{key:"update",value:function(i,a){var c=i.join("%"),u=this.cache.get(c),d=a(u);d===null?this.cache.delete(c):this.cache.set(c,d)}}]),e}(),ZR="data-token-hash",Ah="data-css-hash",_h="__cssinjs_instance__";function xne(){var e=Math.random().toString(12).slice(2);if(typeof document<"u"&&document.head&&document.body){var t=document.body.querySelectorAll("style[".concat(Ah,"]"))||[],i=document.head.firstChild;Array.from(t).forEach(function(c){c[_h]=c[_h]||e,c[_h]===e&&document.head.insertBefore(c,i)});var a={};Array.from(document.querySelectorAll("style[".concat(Ah,"]"))).forEach(function(c){var u=c.getAttribute(Ah);if(a[u]){if(c[_h]===e){var d;(d=c.parentNode)===null||d===void 0||d.removeChild(c)}}else a[u]=!0})}return new Nne(e)}var Pne=y.createContext({hashPriority:"low",cache:xne(),defaultCache:!0});const aw=Pne;function zo(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function Dne(e,t){if(!e)return!1;if(e.contains)return e.contains(t);for(var i=t;i;){if(i===e)return!0;i=i.parentNode}return!1}var f4="data-rc-order",kne="rc-util-key",e1=new Map;function fB(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.mark;return t?t.startsWith("data-")?t:"data-".concat(t):kne}function d_(e){if(e.attachTo)return e.attachTo;var t=document.querySelector("head");return t||document.body}function Lne(e){return e==="queue"?"prependQueue":e?"prepend":"append"}function mB(e){return Array.from((e1.get(e)||e).children).filter(function(t){return t.tagName==="STYLE"})}function gB(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!zo())return null;var i=t.csp,a=t.prepend,c=document.createElement("style");c.setAttribute(f4,Lne(a)),i!=null&&i.nonce&&(c.nonce=i==null?void 0:i.nonce),c.innerHTML=e;var u=d_(t),d=u.firstChild;if(a){if(a==="queue"){var f=mB(u).filter(function(m){return["prepend","prependQueue"].includes(m.getAttribute(f4))});if(f.length)return u.insertBefore(c,f[f.length-1].nextSibling),c}u.insertBefore(c,d)}else u.appendChild(c);return c}function vB(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=d_(t);return mB(i).find(function(a){return a.getAttribute(fB(t))===e})}function uE(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=vB(e,t);if(i){var a=d_(t);a.removeChild(i)}}function Mne(e,t){var i=e1.get(e);if(!i||!Dne(document,i)){var a=gB("",t),c=a.parentNode;e1.set(e,c),e.removeChild(a)}}function am(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=d_(i);Mne(a,i);var c=vB(t,i);if(c){var u,d;if((u=i.csp)!==null&&u!==void 0&&u.nonce&&c.nonce!==((d=i.csp)===null||d===void 0?void 0:d.nonce)){var f;c.nonce=(f=i.csp)===null||f===void 0?void 0:f.nonce}return c.innerHTML!==e&&(c.innerHTML=e),c}var m=gB(e,i);return m.setAttribute(fB(i),t),m}function dE(e){var t="";return Object.keys(e).forEach(function(i){var a=e[i];t+=i,a&&jn(a)==="object"?t+=dE(a):t+=a}),t}function Une(e,t){return iw("".concat(t,"_").concat(dE(e)))}var Pf="layer-".concat(Date.now(),"-").concat(Math.random()).replace(/\./g,""),EB="903px";function jne(e,t){if(zo()){var i;am(e,Pf);var a=document.createElement("div");a.style.position="fixed",a.style.left="0",a.style.top="0",t==null||t(a),document.body.appendChild(a);var c=getComputedStyle(a).width===EB;return(i=a.parentNode)===null||i===void 0||i.removeChild(a),uE(Pf),c}return!1}var wb=void 0;function Fne(){return wb===void 0&&(wb=jne("@layer ".concat(Pf," { .").concat(Pf," { width: ").concat(EB,"!important; } }"),function(e){e.className=Pf})),wb}function _B(e){if(Array.isArray(e))return e}function Vne(e,t){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var a,c,u,d,f=[],m=!0,g=!1;try{if(u=(i=i.call(e)).next,t===0){if(Object(i)!==i)return;m=!1}else for(;!(m=(a=u.call(i)).done)&&(f.push(a.value),f.length!==t);m=!0);}catch(_){g=!0,c=_}finally{try{if(!m&&i.return!=null&&(d=i.return(),Object(d)!==d))return}finally{if(g)throw c}}return f}}function yB(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pe(e,t){return _B(e)||Vne(e,t)||nw(e,t)||yB()}var m4=zo()?y.useLayoutEffect:y.useEffect,Or=function(t,i){var a=y.useRef(!0);m4(function(){return t(a.current)},i),m4(function(){return a.current=!1,function(){a.current=!0}},[])},g4=function(t,i){Or(function(a){if(!a)return t()},i)},Bne=Ee({},xh),v4=Bne.useInsertionEffect,$ne=function(t,i,a){y.useMemo(t,a),Or(i,a)},Hne=v4?function(e,t,i){return v4(function(){return e(),t()},i)}:$ne;const Wne=Hne;function SB(e,t,i,a,c){var u=y.useContext(aw),d=u.cache,f=[e].concat(Qe(t)),m=f.join("_"),g=function(b){d.update(f,function(A){var R=A||[],w=Pe(R,2),D=w[0],x=D===void 0?0:D,O=w[1],P=O,M=P||i(),F=[x,M];return b?b(F):F})};y.useMemo(function(){return g()},[m]);var _=d.get(f)[1];return Wne(function(){c==null||c(_)},function(){return g(function(S){var b=Pe(S,2),A=b[0],R=b[1];return[A+1,R]}),function(){d.update(f,function(S){var b=S||[],A=Pe(b,2),R=A[0],w=R===void 0?0:R,D=A[1],x=w-1;return x===0?(a==null||a(D,!1),null):[w-1,D]})}},[m]),_}var Gne={},zne="css",Ru=new Map;function Kne(e){Ru.set(e,(Ru.get(e)||0)+1)}function Yne(e,t){if(typeof document<"u"){var i=document.querySelectorAll("style[".concat(ZR,'="').concat(e,'"]'));i.forEach(function(a){if(a[_h]===t){var c;(c=a.parentNode)===null||c===void 0||c.removeChild(a)}})}}function qne(e,t){Ru.set(e,(Ru.get(e)||0)-1);var i=Array.from(Ru.keys()),a=i.filter(function(c){var u=Ru.get(c)||0;return u<=0});a.length<i.length&&a.forEach(function(c){Yne(c,t),Ru.delete(c)})}var CB=function(t,i,a,c){var u=a.getDerivativeToken(t),d=Ee(Ee({},u),i);return c&&(d=c(d)),d};function Xne(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=y.useContext(aw),c=a.cache.instanceId,u=i.salt,d=u===void 0?"":u,f=i.override,m=f===void 0?Gne:f,g=i.formatToken,_=y.useMemo(function(){return Object.assign.apply(Object,[{}].concat(Qe(t)))},[t]),S=y.useMemo(function(){return dE(_)},[_]),b=y.useMemo(function(){return dE(m)},[m]),A=SB("token",[d,e.id,S,b],function(){var R=CB(_,m,e,g),w=Une(R,d);R._tokenKey=w,Kne(w);var D="".concat(zne,"-").concat(iw(w));return R._hashId=D,[R,D]},function(R){qne(R[0]._tokenKey,c)});return A}var Jne={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},bB="comm",TB="rule",RB="decl",Qne="@import",Zne="@keyframes",ere="@layer",tre=Math.abs,sw=String.fromCharCode;function IB(e){return e.trim()}function Cv(e,t,i){return e.replace(t,i)}function nre(e,t){return e.indexOf(t)}function sm(e,t){return e.charCodeAt(t)|0}function cm(e,t,i){return e.slice(t,i)}function _c(e){return e.length}function rre(e){return e.length}function jg(e,t){return t.push(e),e}var h_=1,Vh=1,wB=0,Ga=0,oi=0,Jh="";function cw(e,t,i,a,c,u,d,f){return{value:e,root:t,parent:i,type:a,props:c,children:u,line:h_,column:Vh,length:d,return:"",siblings:f}}function ire(){return oi}function ore(){return oi=Ga>0?sm(Jh,--Ga):0,Vh--,oi===10&&(Vh=1,h_--),oi}function Ss(){return oi=Ga<wB?sm(Jh,Ga++):0,Vh++,oi===10&&(Vh=1,h_++),oi}function Lu(){return sm(Jh,Ga)}function bv(){return Ga}function p_(e,t){return cm(Jh,e,t)}function t1(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function are(e){return h_=Vh=1,wB=_c(Jh=e),Ga=0,[]}function sre(e){return Jh="",e}function Ob(e){return IB(p_(Ga-1,n1(e===91?e+2:e===40?e+1:e)))}function cre(e){for(;(oi=Lu())&&oi<33;)Ss();return t1(e)>2||t1(oi)>3?"":" "}function lre(e,t){for(;--t&&Ss()&&!(oi<48||oi>102||oi>57&&oi<65||oi>70&&oi<97););return p_(e,bv()+(t<6&&Lu()==32&&Ss()==32))}function n1(e){for(;Ss();)switch(oi){case e:return Ga;case 34:case 39:e!==34&&e!==39&&n1(oi);break;case 40:e===41&&n1(e);break;case 92:Ss();break}return Ga}function ure(e,t){for(;Ss()&&e+oi!==47+10;)if(e+oi===42+42&&Lu()===47)break;return"/*"+p_(t,Ga-1)+"*"+sw(e===47?e:Ss())}function dre(e){for(;!t1(Lu());)Ss();return p_(e,Ga)}function hre(e){return sre(Tv("",null,null,null,[""],e=are(e),0,[0],e))}function Tv(e,t,i,a,c,u,d,f,m){for(var g=0,_=0,S=d,b=0,A=0,R=0,w=1,D=1,x=1,O=0,P="",M=c,F=u,j=a,B=P;D;)switch(R=O,O=Ss()){case 40:if(R!=108&&sm(B,S-1)==58){nre(B+=Cv(Ob(O),"&","&\f"),"&\f")!=-1&&(x=-1);break}case 34:case 39:case 91:B+=Ob(O);break;case 9:case 10:case 13:case 32:B+=cre(R);break;case 92:B+=lre(bv()-1,7);continue;case 47:switch(Lu()){case 42:case 47:jg(pre(ure(Ss(),bv()),t,i,m),m);break;default:B+="/"}break;case 123*w:f[g++]=_c(B)*x;case 125*w:case 59:case 0:switch(O){case 0:case 125:D=0;case 59+_:x==-1&&(B=Cv(B,/\f/g,"")),A>0&&_c(B)-S&&jg(A>32?_4(B+";",a,i,S-1,m):_4(Cv(B," ","")+";",a,i,S-2,m),m);break;case 59:B+=";";default:if(jg(j=E4(B,t,i,g,_,c,f,P,M=[],F=[],S,u),u),O===123)if(_===0)Tv(B,t,j,j,M,u,S,f,F);else switch(b===99&&sm(B,3)===110?100:b){case 100:case 108:case 109:case 115:Tv(e,j,j,a&&jg(E4(e,j,j,0,0,c,f,P,c,M=[],S,F),F),c,F,S,f,a?M:F);break;default:Tv(B,j,j,j,[""],F,0,f,F)}}g=_=A=0,w=x=1,P=B="",S=d;break;case 58:S=1+_c(B),A=R;default:if(w<1){if(O==123)--w;else if(O==125&&w++==0&&ore()==125)continue}switch(B+=sw(O),O*w){case 38:x=_>0?1:(B+="\f",-1);break;case 44:f[g++]=(_c(B)-1)*x,x=1;break;case 64:Lu()===45&&(B+=Ob(Ss())),b=Lu(),_=S=_c(P=B+=dre(bv())),O++;break;case 45:R===45&&_c(B)==2&&(w=0)}}return u}function E4(e,t,i,a,c,u,d,f,m,g,_,S){for(var b=c-1,A=c===0?u:[""],R=rre(A),w=0,D=0,x=0;w<a;++w)for(var O=0,P=cm(e,b+1,b=tre(D=d[w])),M=e;O<R;++O)(M=IB(D>0?A[O]+" "+P:Cv(P,/&\f/g,A[O])))&&(m[x++]=M);return cw(e,t,i,c===0?TB:f,m,g,_,S)}function pre(e,t,i,a){return cw(e,t,i,bB,sw(ire()),cm(e,2,-2),0,a)}function _4(e,t,i,a,c){return cw(e,t,i,RB,cm(e,0,a),cm(e,a+1,-1),a,c)}function r1(e,t){for(var i="",a=0;a<e.length;a++)i+=t(e[a],a,e,t)||"";return i}function fre(e,t,i,a){switch(e.type){case ere:if(e.children.length)break;case Qne:case RB:return e.return=e.return||e.value;case bB:return"";case Zne:return e.return=e.value+"{"+r1(e.children,a)+"}";case TB:if(!_c(e.value=e.props.join(",")))return""}return _c(i=r1(e.children,a))?e.return=e.value+"{"+i+"}":""}var y4=zo(),mre="_skip_check_",OB="_multi_value_";function S4(e){var t=r1(hre(e),fre);return t.replace(/\{%%%\:[^;];}/g,";")}function gre(e){return jn(e)==="object"&&e&&(mre in e||OB in e)}function vre(e,t,i){if(!t)return e;var a=".".concat(t),c=i==="low"?":where(".concat(a,")"):a,u=e.split(",").map(function(d){var f,m=d.trim().split(/\s+/),g=m[0]||"",_=((f=g.match(/^\w+/))===null||f===void 0?void 0:f[0])||"";return g="".concat(_).concat(c).concat(g.slice(_.length)),[g].concat(Qe(m.slice(1))).join(" ")});return u.join(",")}var Ere=function e(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{root:!0,parentSelectors:[]},c=a.root,u=a.injectHash,d=a.parentSelectors,f=i.hashId,m=i.layer;i.path;var g=i.hashPriority,_=i.transformers,S=_===void 0?[]:_;i.linters;var b="",A={};function R(P){var M=P.getName(f);if(!A[M]){var F=e(P.style,i,{root:!1,parentSelectors:d}),j=Pe(F,1),B=j[0];A[M]="@keyframes ".concat(P.getName(f)).concat(B)}}function w(P){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return P.forEach(function(F){Array.isArray(F)?w(F,M):F&&M.push(F)}),M}var D=w(Array.isArray(t)?t:[t]);if(D.forEach(function(P){var M=typeof P=="string"&&!c?{}:P;if(typeof M=="string")b+="".concat(M,`
`);else if(M._keyframe)R(M);else{var F=S.reduce(function(j,B){var H;return(B==null||(H=B.visit)===null||H===void 0?void 0:H.call(B,j))||j},M);Object.keys(F).forEach(function(j){var B=F[j];if(jn(B)==="object"&&B&&(j!=="animationName"||!B._keyframe)&&!gre(B)){var H=!1,K=j.trim(),$=!1;(c||u)&&f?K.startsWith("@")?H=!0:K=vre(j,f,g):c&&!f&&(K==="&"||K==="")&&(K="",$=!0);var Z=e(B,i,{root:$,injectHash:H,parentSelectors:[].concat(Qe(d),[K])}),z=Pe(Z,2),G=z[0],ee=z[1];A=Ee(Ee({},A),ee),b+="".concat(K).concat(G)}else{let ue=function(me,fe){var se=me.replace(/[A-Z]/g,function(de){return"-".concat(de.toLowerCase())}),ae=fe;!Jne[me]&&typeof ae=="number"&&ae!==0&&(ae="".concat(ae,"px")),me==="animationName"&&fe!==null&&fe!==void 0&&fe._keyframe&&(R(fe),ae=fe.getName(f)),b+="".concat(se,":").concat(ae,";")};var pe=ue,re,oe=(re=B==null?void 0:B.value)!==null&&re!==void 0?re:B;jn(B)==="object"&&B!==null&&B!==void 0&&B[OB]&&Array.isArray(oe)?oe.forEach(function(me){ue(j,me)}):ue(j,oe)}})}}),!c)b="{".concat(b,"}");else if(m&&Fne()){var x=m.split(","),O=x[x.length-1].trim();b="@layer ".concat(O," {").concat(b,"}"),x.length>1&&(b="@layer ".concat(m,"{%%%:%}").concat(b))}return[b,A]};function _re(e,t){return iw("".concat(e.join("%")).concat(t))}function yre(){return null}function i1(e,t){var i=e.token,a=e.path,c=e.hashId,u=e.layer,d=e.nonce,f=y.useContext(aw),m=f.autoClear;f.mock;var g=f.defaultCache,_=f.hashPriority,S=f.container,b=f.ssrInline,A=f.transformers,R=f.linters,w=f.cache,D=i._tokenKey,x=[D].concat(Qe(a)),O=y4,P=SB("style",x,function(){var H=t(),K=Ere(H,{hashId:c,hashPriority:_,layer:u,path:a.join("-"),transformers:A,linters:R}),$=Pe(K,2),Z=$[0],z=$[1],G=S4(Z),ee=_re(x,G);return[G,D,ee,z]},function(H,K){var $=Pe(H,3),Z=$[2];(K||m)&&y4&&uE(Z,{mark:Ah})},function(H){var K=Pe(H,4),$=K[0];K[1];var Z=K[2],z=K[3];if(O){var G={mark:Ah,prepend:"queue",attachTo:S},ee=typeof d=="function"?d():d;ee&&(G.csp={nonce:ee});var re=am($,Z,G);re[_h]=w.instanceId,re.setAttribute(ZR,D),Object.keys(z).forEach(function(oe){am(S4(z[oe]),"_effect-".concat(oe),G)})}}),M=Pe(P,3),F=M[0],j=M[1],B=M[2];return function(H){var K;if(!b||O||!g)K=y.createElement(yre,null);else{var $;K=y.createElement("style",He({},($={},tt($,ZR,j),tt($,Ah,B),$),{dangerouslySetInnerHTML:{__html:F}}))}return y.createElement(y.Fragment,null,K,H)}}var Er=function(){function e(t,i){za(this,e),tt(this,"name",void 0),tt(this,"style",void 0),tt(this,"_keyframe",!0),this.name=t,this.style=i}return Ka(e,[{key:"getName",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return i?"".concat(i,"-").concat(this.name):this.name}}]),e}();function Sre(e,t){if(e.length!==t.length)return!1;for(var i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}var lw=function(){function e(){za(this,e),tt(this,"cache",void 0),tt(this,"keys",void 0),tt(this,"cacheCallTimes",void 0),this.cache=new Map,this.keys=[],this.cacheCallTimes=0}return Ka(e,[{key:"size",value:function(){return this.keys.length}},{key:"internalGet",value:function(i){var a,c,u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,d={map:this.cache};return i.forEach(function(f){if(!d)d=void 0;else{var m,g;d=(m=d)===null||m===void 0||(g=m.map)===null||g===void 0?void 0:g.get(f)}}),(a=d)!==null&&a!==void 0&&a.value&&u&&(d.value[1]=this.cacheCallTimes++),(c=d)===null||c===void 0?void 0:c.value}},{key:"get",value:function(i){var a;return(a=this.internalGet(i,!0))===null||a===void 0?void 0:a[0]}},{key:"has",value:function(i){return!!this.internalGet(i)}},{key:"set",value:function(i,a){var c=this;if(!this.has(i)){if(this.size()+1>e.MAX_CACHE_SIZE+e.MAX_CACHE_OFFSET){var u=this.keys.reduce(function(g,_){var S=Pe(g,2),b=S[1];return c.internalGet(_)[1]<b?[_,c.internalGet(_)[1]]:g},[this.keys[0],this.cacheCallTimes]),d=Pe(u,1),f=d[0];this.delete(f)}this.keys.push(i)}var m=this.cache;i.forEach(function(g,_){if(_===i.length-1)m.set(g,{value:[a,c.cacheCallTimes++]});else{var S=m.get(g);S?S.map||(S.map=new Map):m.set(g,{map:new Map}),m=m.get(g).map}})}},{key:"deleteByPath",value:function(i,a){var c=i.get(a[0]);if(a.length===1){var u;return c.map?i.set(a[0],{map:c.map}):i.delete(a[0]),(u=c.value)===null||u===void 0?void 0:u[0]}var d=this.deleteByPath(c.map,a.slice(1));return(!c.map||c.map.size===0)&&!c.value&&i.delete(a[0]),d}},{key:"delete",value:function(i){if(this.has(i))return this.keys=this.keys.filter(function(a){return!Sre(a,i)}),this.deleteByPath(this.cache,i)}}]),e}();tt(lw,"MAX_CACHE_SIZE",20);tt(lw,"MAX_CACHE_OFFSET",5);var C4=0,Cre=function(){function e(t){za(this,e),tt(this,"derivatives",void 0),tt(this,"id",void 0),this.derivatives=Array.isArray(t)?t:[t],this.id=C4,t.length===0&&(t.length>0,void 0),C4+=1}return Ka(e,[{key:"getDerivativeToken",value:function(i){return this.derivatives.reduce(function(a,c){return c(i,a)},void 0)}}]),e}(),Ab=new lw;function hE(e){var t=Array.isArray(e)?e:[e];return Ab.has(t)||Ab.set(t,new Cre(t)),Ab.get(t)}function Kd(e){return e.notSplit=!0,e}Kd(["borderTop","borderBottom"]),Kd(["borderTop"]),Kd(["borderBottom"]),Kd(["borderLeft","borderRight"]),Kd(["borderLeft"]),Kd(["borderRight"]);var bre=y.createContext({});const uw=bre;function Tre(e){return _B(e)||uB(e)||nw(e)||yB()}function vs(e,t){for(var i=e,a=0;a<t.length;a+=1){if(i==null)return;i=i[t[a]]}return i}function AB(e,t,i,a){if(!t.length)return i;var c=Tre(t),u=c[0],d=c.slice(1),f;return!e&&typeof u=="number"?f=[]:Array.isArray(e)?f=Qe(e):f=Ee({},e),a&&i===void 0&&d.length===1?delete f[u][d[0]]:f[u]=AB(f[u],d,i,a),f}function hs(e,t,i){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return t.length&&a&&i===void 0&&!vs(e,t.slice(0,-1))?e:AB(e,t,i,a)}function Rre(e){return jn(e)==="object"&&e!==null&&Object.getPrototypeOf(e)===Object.prototype}function b4(e){return Array.isArray(e)?[]:{}}var Ire=typeof Reflect>"u"?Object.keys:Reflect.ownKeys;function yh(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var a=b4(t[0]);return t.forEach(function(c){function u(d,f){var m=new Set(f),g=vs(c,d),_=Array.isArray(g);if(_||Rre(g)){if(!m.has(g)){m.add(g);var S=vs(a,d);_?a=hs(a,d,[]):(!S||jn(S)!=="object")&&(a=hs(a,d,b4(g))),Ire(g).forEach(function(b){u([].concat(Qe(d),[b]),m)})}}else a=hs(a,d,g)}u([])}),a}const NB=y.createContext(void 0),wre={items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"};var Ore={locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"OK",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"};const Are={placeholder:"Select time",rangePlaceholder:["Start time","End time"]},xB=Are,Nre={lang:Object.assign({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeQuarterPlaceholder:["Start quarter","End quarter"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},Ore),timePickerLocale:Object.assign({},xB)},T4=Nre,da="${label} is not a valid ${type}",xre={locale:"en",Pagination:wre,DatePicker:T4,TimePicker:xB,Calendar:T4,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",filterCheckall:"Select all items",filterSearchPlaceholder:"Search in filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Tour:{Next:"Next",Previous:"Previous",Finish:"Finish"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand"},PageHeader:{back:"Back"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:da,method:da,array:da,object:da,number:da,date:da,boolean:da,integer:da,float:da,regexp:da,email:da,url:da,hex:da},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"},QRCode:{expired:"QR code expired",refresh:"Refresh"},ColorPicker:{presetEmpty:"Empty"}},Bh=xre;let Nb=Object.assign({},Bh.Modal);function R4(e){e?Nb=Object.assign(Object.assign({},Nb),e):Nb=Object.assign({},Bh.Modal)}const Pre=y.createContext(void 0),dw=Pre,Dre=(e,t)=>{const i=y.useContext(dw),a=y.useMemo(()=>{var u;const d=t||Bh[e],f=(u=i==null?void 0:i[e])!==null&&u!==void 0?u:{};return Object.assign(Object.assign({},typeof d=="function"?d():d),f||{})},[e,t,i]),c=y.useMemo(()=>{const u=i==null?void 0:i.locale;return i!=null&&i.exist&&!u?Bh.locale:u},[i]);return[a,c]},PB=Dre,kre="internalMark",Lre=e=>{const{locale:t={},children:i,_ANT_MARK__:a}=e;y.useEffect(()=>(R4(t&&t.Modal),()=>{R4()}),[t]);const c=y.useMemo(()=>Object.assign(Object.assign({},t),{exist:!0}),[t]);return y.createElement(dw.Provider,{value:c},i)},Mre=Lre,Ure="5.6.4",pE=["blue","purple","cyan","green","magenta","pink","red","orange","yellow","volcano","geekblue","lime","gold"];function Gi(e,t){jre(e)&&(e="100%");var i=Fre(e);return e=t===360?e:Math.min(t,Math.max(0,parseFloat(e))),i&&(e=parseInt(String(e*t),10)/100),Math.abs(e-t)<1e-6?1:(t===360?e=(e<0?e%t+t:e%t)/parseFloat(String(t)):e=e%t/parseFloat(String(t)),e)}function Fg(e){return Math.min(1,Math.max(0,e))}function jre(e){return typeof e=="string"&&e.indexOf(".")!==-1&&parseFloat(e)===1}function Fre(e){return typeof e=="string"&&e.indexOf("%")!==-1}function DB(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function Vg(e){return e<=1?"".concat(Number(e)*100,"%"):e}function Au(e){return e.length===1?"0"+e:String(e)}function Vre(e,t,i){return{r:Gi(e,255)*255,g:Gi(t,255)*255,b:Gi(i,255)*255}}function I4(e,t,i){e=Gi(e,255),t=Gi(t,255),i=Gi(i,255);var a=Math.max(e,t,i),c=Math.min(e,t,i),u=0,d=0,f=(a+c)/2;if(a===c)d=0,u=0;else{var m=a-c;switch(d=f>.5?m/(2-a-c):m/(a+c),a){case e:u=(t-i)/m+(t<i?6:0);break;case t:u=(i-e)/m+2;break;case i:u=(e-t)/m+4;break}u/=6}return{h:u,s:d,l:f}}function xb(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+(t-e)*(6*i):i<1/2?t:i<2/3?e+(t-e)*(2/3-i)*6:e}function Bre(e,t,i){var a,c,u;if(e=Gi(e,360),t=Gi(t,100),i=Gi(i,100),t===0)c=i,u=i,a=i;else{var d=i<.5?i*(1+t):i+t-i*t,f=2*i-d;a=xb(f,d,e+1/3),c=xb(f,d,e),u=xb(f,d,e-1/3)}return{r:a*255,g:c*255,b:u*255}}function o1(e,t,i){e=Gi(e,255),t=Gi(t,255),i=Gi(i,255);var a=Math.max(e,t,i),c=Math.min(e,t,i),u=0,d=a,f=a-c,m=a===0?0:f/a;if(a===c)u=0;else{switch(a){case e:u=(t-i)/f+(t<i?6:0);break;case t:u=(i-e)/f+2;break;case i:u=(e-t)/f+4;break}u/=6}return{h:u,s:m,v:d}}function $re(e,t,i){e=Gi(e,360)*6,t=Gi(t,100),i=Gi(i,100);var a=Math.floor(e),c=e-a,u=i*(1-t),d=i*(1-c*t),f=i*(1-(1-c)*t),m=a%6,g=[i,d,u,u,f,i][m],_=[f,i,i,d,u,u][m],S=[u,u,f,i,i,d][m];return{r:g*255,g:_*255,b:S*255}}function a1(e,t,i,a){var c=[Au(Math.round(e).toString(16)),Au(Math.round(t).toString(16)),Au(Math.round(i).toString(16))];return a&&c[0].startsWith(c[0].charAt(1))&&c[1].startsWith(c[1].charAt(1))&&c[2].startsWith(c[2].charAt(1))?c[0].charAt(0)+c[1].charAt(0)+c[2].charAt(0):c.join("")}function Hre(e,t,i,a,c){var u=[Au(Math.round(e).toString(16)),Au(Math.round(t).toString(16)),Au(Math.round(i).toString(16)),Au(Wre(a))];return c&&u[0].startsWith(u[0].charAt(1))&&u[1].startsWith(u[1].charAt(1))&&u[2].startsWith(u[2].charAt(1))&&u[3].startsWith(u[3].charAt(1))?u[0].charAt(0)+u[1].charAt(0)+u[2].charAt(0)+u[3].charAt(0):u.join("")}function Wre(e){return Math.round(parseFloat(e)*255).toString(16)}function w4(e){return pa(e)/255}function pa(e){return parseInt(e,16)}function Gre(e){return{r:e>>16,g:(e&65280)>>8,b:e&255}}var s1={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function ih(e){var t={r:0,g:0,b:0},i=1,a=null,c=null,u=null,d=!1,f=!1;return typeof e=="string"&&(e=Yre(e)),typeof e=="object"&&(mc(e.r)&&mc(e.g)&&mc(e.b)?(t=Vre(e.r,e.g,e.b),d=!0,f=String(e.r).substr(-1)==="%"?"prgb":"rgb"):mc(e.h)&&mc(e.s)&&mc(e.v)?(a=Vg(e.s),c=Vg(e.v),t=$re(e.h,a,c),d=!0,f="hsv"):mc(e.h)&&mc(e.s)&&mc(e.l)&&(a=Vg(e.s),u=Vg(e.l),t=Bre(e.h,a,u),d=!0,f="hsl"),Object.prototype.hasOwnProperty.call(e,"a")&&(i=e.a)),i=DB(i),{ok:d,format:e.format||f,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:i}}var zre="[-\\+]?\\d+%?",Kre="[-\\+]?\\d*\\.\\d+%?",wl="(?:".concat(Kre,")|(?:").concat(zre,")"),Pb="[\\s|\\(]+(".concat(wl,")[,|\\s]+(").concat(wl,")[,|\\s]+(").concat(wl,")\\s*\\)?"),Db="[\\s|\\(]+(".concat(wl,")[,|\\s]+(").concat(wl,")[,|\\s]+(").concat(wl,")[,|\\s]+(").concat(wl,")\\s*\\)?"),ls={CSS_UNIT:new RegExp(wl),rgb:new RegExp("rgb"+Pb),rgba:new RegExp("rgba"+Db),hsl:new RegExp("hsl"+Pb),hsla:new RegExp("hsla"+Db),hsv:new RegExp("hsv"+Pb),hsva:new RegExp("hsva"+Db),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function Yre(e){if(e=e.trim().toLowerCase(),e.length===0)return!1;var t=!1;if(s1[e])e=s1[e],t=!0;else if(e==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var i=ls.rgb.exec(e);return i?{r:i[1],g:i[2],b:i[3]}:(i=ls.rgba.exec(e),i?{r:i[1],g:i[2],b:i[3],a:i[4]}:(i=ls.hsl.exec(e),i?{h:i[1],s:i[2],l:i[3]}:(i=ls.hsla.exec(e),i?{h:i[1],s:i[2],l:i[3],a:i[4]}:(i=ls.hsv.exec(e),i?{h:i[1],s:i[2],v:i[3]}:(i=ls.hsva.exec(e),i?{h:i[1],s:i[2],v:i[3],a:i[4]}:(i=ls.hex8.exec(e),i?{r:pa(i[1]),g:pa(i[2]),b:pa(i[3]),a:w4(i[4]),format:t?"name":"hex8"}:(i=ls.hex6.exec(e),i?{r:pa(i[1]),g:pa(i[2]),b:pa(i[3]),format:t?"name":"hex"}:(i=ls.hex4.exec(e),i?{r:pa(i[1]+i[1]),g:pa(i[2]+i[2]),b:pa(i[3]+i[3]),a:w4(i[4]+i[4]),format:t?"name":"hex8"}:(i=ls.hex3.exec(e),i?{r:pa(i[1]+i[1]),g:pa(i[2]+i[2]),b:pa(i[3]+i[3]),format:t?"name":"hex"}:!1)))))))))}function mc(e){return!!ls.CSS_UNIT.exec(String(e))}var $i=function(){function e(t,i){t===void 0&&(t=""),i===void 0&&(i={});var a;if(t instanceof e)return t;typeof t=="number"&&(t=Gre(t)),this.originalInput=t;var c=ih(t);this.originalInput=t,this.r=c.r,this.g=c.g,this.b=c.b,this.a=c.a,this.roundA=Math.round(100*this.a)/100,this.format=(a=i.format)!==null&&a!==void 0?a:c.format,this.gradientType=i.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=c.ok}return e.prototype.isDark=function(){return this.getBrightness()<128},e.prototype.isLight=function(){return!this.isDark()},e.prototype.getBrightness=function(){var t=this.toRgb();return(t.r*299+t.g*587+t.b*114)/1e3},e.prototype.getLuminance=function(){var t=this.toRgb(),i,a,c,u=t.r/255,d=t.g/255,f=t.b/255;return u<=.03928?i=u/12.92:i=Math.pow((u+.055)/1.055,2.4),d<=.03928?a=d/12.92:a=Math.pow((d+.055)/1.055,2.4),f<=.03928?c=f/12.92:c=Math.pow((f+.055)/1.055,2.4),.2126*i+.7152*a+.0722*c},e.prototype.getAlpha=function(){return this.a},e.prototype.setAlpha=function(t){return this.a=DB(t),this.roundA=Math.round(100*this.a)/100,this},e.prototype.isMonochrome=function(){var t=this.toHsl().s;return t===0},e.prototype.toHsv=function(){var t=o1(this.r,this.g,this.b);return{h:t.h*360,s:t.s,v:t.v,a:this.a}},e.prototype.toHsvString=function(){var t=o1(this.r,this.g,this.b),i=Math.round(t.h*360),a=Math.round(t.s*100),c=Math.round(t.v*100);return this.a===1?"hsv(".concat(i,", ").concat(a,"%, ").concat(c,"%)"):"hsva(".concat(i,", ").concat(a,"%, ").concat(c,"%, ").concat(this.roundA,")")},e.prototype.toHsl=function(){var t=I4(this.r,this.g,this.b);return{h:t.h*360,s:t.s,l:t.l,a:this.a}},e.prototype.toHslString=function(){var t=I4(this.r,this.g,this.b),i=Math.round(t.h*360),a=Math.round(t.s*100),c=Math.round(t.l*100);return this.a===1?"hsl(".concat(i,", ").concat(a,"%, ").concat(c,"%)"):"hsla(".concat(i,", ").concat(a,"%, ").concat(c,"%, ").concat(this.roundA,")")},e.prototype.toHex=function(t){return t===void 0&&(t=!1),a1(this.r,this.g,this.b,t)},e.prototype.toHexString=function(t){return t===void 0&&(t=!1),"#"+this.toHex(t)},e.prototype.toHex8=function(t){return t===void 0&&(t=!1),Hre(this.r,this.g,this.b,this.a,t)},e.prototype.toHex8String=function(t){return t===void 0&&(t=!1),"#"+this.toHex8(t)},e.prototype.toHexShortString=function(t){return t===void 0&&(t=!1),this.a===1?this.toHexString(t):this.toHex8String(t)},e.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},e.prototype.toRgbString=function(){var t=Math.round(this.r),i=Math.round(this.g),a=Math.round(this.b);return this.a===1?"rgb(".concat(t,", ").concat(i,", ").concat(a,")"):"rgba(".concat(t,", ").concat(i,", ").concat(a,", ").concat(this.roundA,")")},e.prototype.toPercentageRgb=function(){var t=function(i){return"".concat(Math.round(Gi(i,255)*100),"%")};return{r:t(this.r),g:t(this.g),b:t(this.b),a:this.a}},e.prototype.toPercentageRgbString=function(){var t=function(i){return Math.round(Gi(i,255)*100)};return this.a===1?"rgb(".concat(t(this.r),"%, ").concat(t(this.g),"%, ").concat(t(this.b),"%)"):"rgba(".concat(t(this.r),"%, ").concat(t(this.g),"%, ").concat(t(this.b),"%, ").concat(this.roundA,")")},e.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var t="#"+a1(this.r,this.g,this.b,!1),i=0,a=Object.entries(s1);i<a.length;i++){var c=a[i],u=c[0],d=c[1];if(t===d)return u}return!1},e.prototype.toString=function(t){var i=!!t;t=t??this.format;var a=!1,c=this.a<1&&this.a>=0,u=!i&&c&&(t.startsWith("hex")||t==="name");return u?t==="name"&&this.a===0?this.toName():this.toRgbString():(t==="rgb"&&(a=this.toRgbString()),t==="prgb"&&(a=this.toPercentageRgbString()),(t==="hex"||t==="hex6")&&(a=this.toHexString()),t==="hex3"&&(a=this.toHexString(!0)),t==="hex4"&&(a=this.toHex8String(!0)),t==="hex8"&&(a=this.toHex8String()),t==="name"&&(a=this.toName()),t==="hsl"&&(a=this.toHslString()),t==="hsv"&&(a=this.toHsvString()),a||this.toHexString())},e.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},e.prototype.clone=function(){return new e(this.toString())},e.prototype.lighten=function(t){t===void 0&&(t=10);var i=this.toHsl();return i.l+=t/100,i.l=Fg(i.l),new e(i)},e.prototype.brighten=function(t){t===void 0&&(t=10);var i=this.toRgb();return i.r=Math.max(0,Math.min(255,i.r-Math.round(255*-(t/100)))),i.g=Math.max(0,Math.min(255,i.g-Math.round(255*-(t/100)))),i.b=Math.max(0,Math.min(255,i.b-Math.round(255*-(t/100)))),new e(i)},e.prototype.darken=function(t){t===void 0&&(t=10);var i=this.toHsl();return i.l-=t/100,i.l=Fg(i.l),new e(i)},e.prototype.tint=function(t){return t===void 0&&(t=10),this.mix("white",t)},e.prototype.shade=function(t){return t===void 0&&(t=10),this.mix("black",t)},e.prototype.desaturate=function(t){t===void 0&&(t=10);var i=this.toHsl();return i.s-=t/100,i.s=Fg(i.s),new e(i)},e.prototype.saturate=function(t){t===void 0&&(t=10);var i=this.toHsl();return i.s+=t/100,i.s=Fg(i.s),new e(i)},e.prototype.greyscale=function(){return this.desaturate(100)},e.prototype.spin=function(t){var i=this.toHsl(),a=(i.h+t)%360;return i.h=a<0?360+a:a,new e(i)},e.prototype.mix=function(t,i){i===void 0&&(i=50);var a=this.toRgb(),c=new e(t).toRgb(),u=i/100,d={r:(c.r-a.r)*u+a.r,g:(c.g-a.g)*u+a.g,b:(c.b-a.b)*u+a.b,a:(c.a-a.a)*u+a.a};return new e(d)},e.prototype.analogous=function(t,i){t===void 0&&(t=6),i===void 0&&(i=30);var a=this.toHsl(),c=360/i,u=[this];for(a.h=(a.h-(c*t>>1)+720)%360;--t;)a.h=(a.h+c)%360,u.push(new e(a));return u},e.prototype.complement=function(){var t=this.toHsl();return t.h=(t.h+180)%360,new e(t)},e.prototype.monochromatic=function(t){t===void 0&&(t=6);for(var i=this.toHsv(),a=i.h,c=i.s,u=i.v,d=[],f=1/t;t--;)d.push(new e({h:a,s:c,v:u})),u=(u+f)%1;return d},e.prototype.splitcomplement=function(){var t=this.toHsl(),i=t.h;return[this,new e({h:(i+72)%360,s:t.s,l:t.l}),new e({h:(i+216)%360,s:t.s,l:t.l})]},e.prototype.onBackground=function(t){var i=this.toRgb(),a=new e(t).toRgb(),c=i.a+a.a*(1-i.a);return new e({r:(i.r*i.a+a.r*a.a*(1-i.a))/c,g:(i.g*i.a+a.g*a.a*(1-i.a))/c,b:(i.b*i.a+a.b*a.a*(1-i.a))/c,a:c})},e.prototype.triad=function(){return this.polyad(3)},e.prototype.tetrad=function(){return this.polyad(4)},e.prototype.polyad=function(t){for(var i=this.toHsl(),a=i.h,c=[this],u=360/t,d=1;d<t;d++)c.push(new e({h:(a+d*u)%360,s:i.s,l:i.l}));return c},e.prototype.equals=function(t){return this.toRgbString()===new e(t).toRgbString()},e}(),Bg=2,O4=.16,qre=.05,Xre=.05,Jre=.15,kB=5,LB=4,Qre=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function A4(e){var t=e.r,i=e.g,a=e.b,c=o1(t,i,a);return{h:c.h*360,s:c.s,v:c.v}}function $g(e){var t=e.r,i=e.g,a=e.b;return"#".concat(a1(t,i,a,!1))}function Zre(e,t,i){var a=i/100,c={r:(t.r-e.r)*a+e.r,g:(t.g-e.g)*a+e.g,b:(t.b-e.b)*a+e.b};return c}function N4(e,t,i){var a;return Math.round(e.h)>=60&&Math.round(e.h)<=240?a=i?Math.round(e.h)-Bg*t:Math.round(e.h)+Bg*t:a=i?Math.round(e.h)+Bg*t:Math.round(e.h)-Bg*t,a<0?a+=360:a>=360&&(a-=360),a}function x4(e,t,i){if(e.h===0&&e.s===0)return e.s;var a;return i?a=e.s-O4*t:t===LB?a=e.s+O4:a=e.s+qre*t,a>1&&(a=1),i&&t===kB&&a>.1&&(a=.1),a<.06&&(a=.06),Number(a.toFixed(2))}function P4(e,t,i){var a;return i?a=e.v+Xre*t:a=e.v-Jre*t,a>1&&(a=1),Number(a.toFixed(2))}function xc(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=[],a=ih(e),c=kB;c>0;c-=1){var u=A4(a),d=$g(ih({h:N4(u,c,!0),s:x4(u,c,!0),v:P4(u,c,!0)}));i.push(d)}i.push($g(a));for(var f=1;f<=LB;f+=1){var m=A4(a),g=$g(ih({h:N4(m,f),s:x4(m,f),v:P4(m,f)}));i.push(g)}return t.theme==="dark"?Qre.map(function(_){var S=_.index,b=_.opacity,A=$g(Zre(ih(t.backgroundColor||"#141414"),ih(i[S]),b*100));return A}):i}var kb={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1677FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},Df={},Lb={};Object.keys(kb).forEach(function(e){Df[e]=xc(kb[e]),Df[e].primary=Df[e][5],Lb[e]=xc(kb[e],{theme:"dark",backgroundColor:"#141414"}),Lb[e].primary=Lb[e][5]});var eie=Df.gold,tie=Df.blue;const nie=e=>{const{controlHeight:t}=e;return{controlHeightSM:t*.75,controlHeightXS:t*.5,controlHeightLG:t*1.25}},MB=nie;function rie(e){const{sizeUnit:t,sizeStep:i}=e;return{sizeXXL:t*(i+8),sizeXL:t*(i+4),sizeLG:t*(i+2),sizeMD:t*(i+1),sizeMS:t*i,size:t*i,sizeSM:t*(i-1),sizeXS:t*(i-2),sizeXXS:t*(i-3)}}const hw={blue:"#1677ff",purple:"#722ED1",cyan:"#13C2C2",green:"#52C41A",magenta:"#EB2F96",pink:"#eb2f96",red:"#F5222D",orange:"#FA8C16",yellow:"#FADB14",volcano:"#FA541C",geekblue:"#2F54EB",gold:"#FAAD14",lime:"#A0D911"},iie=Object.assign(Object.assign({},hw),{colorPrimary:"#1677ff",colorSuccess:"#52c41a",colorWarning:"#faad14",colorError:"#ff4d4f",colorInfo:"#1677ff",colorTextBase:"",colorBgBase:"",fontFamily:`-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial,
'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',
'Noto Color Emoji'`,fontFamilyCode:"'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace",fontSize:14,lineWidth:1,lineType:"solid",motionUnit:.1,motionBase:0,motionEaseOutCirc:"cubic-bezier(0.08, 0.82, 0.17, 1)",motionEaseInOutCirc:"cubic-bezier(0.78, 0.14, 0.15, 0.86)",motionEaseOut:"cubic-bezier(0.215, 0.61, 0.355, 1)",motionEaseInOut:"cubic-bezier(0.645, 0.045, 0.355, 1)",motionEaseOutBack:"cubic-bezier(0.12, 0.4, 0.29, 1.46)",motionEaseInBack:"cubic-bezier(0.71, -0.46, 0.88, 0.6)",motionEaseInQuint:"cubic-bezier(0.755, 0.05, 0.855, 0.06)",motionEaseOutQuint:"cubic-bezier(0.23, 1, 0.32, 1)",borderRadius:6,sizeUnit:4,sizeStep:4,sizePopupArrow:16,controlHeight:32,zIndexBase:0,zIndexPopupBase:1e3,opacityImage:1,wireframe:!1,motion:!0}),bm=iie;function UB(e,t){let{generateColorPalettes:i,generateNeutralColorPalettes:a}=t;const{colorSuccess:c,colorWarning:u,colorError:d,colorInfo:f,colorPrimary:m,colorBgBase:g,colorTextBase:_}=e,S=i(m),b=i(c),A=i(u),R=i(d),w=i(f),D=a(g,_);return Object.assign(Object.assign({},D),{colorPrimaryBg:S[1],colorPrimaryBgHover:S[2],colorPrimaryBorder:S[3],colorPrimaryBorderHover:S[4],colorPrimaryHover:S[5],colorPrimary:S[6],colorPrimaryActive:S[7],colorPrimaryTextHover:S[8],colorPrimaryText:S[9],colorPrimaryTextActive:S[10],colorSuccessBg:b[1],colorSuccessBgHover:b[2],colorSuccessBorder:b[3],colorSuccessBorderHover:b[4],colorSuccessHover:b[4],colorSuccess:b[6],colorSuccessActive:b[7],colorSuccessTextHover:b[8],colorSuccessText:b[9],colorSuccessTextActive:b[10],colorErrorBg:R[1],colorErrorBgHover:R[2],colorErrorBorder:R[3],colorErrorBorderHover:R[4],colorErrorHover:R[5],colorError:R[6],colorErrorActive:R[7],colorErrorTextHover:R[8],colorErrorText:R[9],colorErrorTextActive:R[10],colorWarningBg:A[1],colorWarningBgHover:A[2],colorWarningBorder:A[3],colorWarningBorderHover:A[4],colorWarningHover:A[4],colorWarning:A[6],colorWarningActive:A[7],colorWarningTextHover:A[8],colorWarningText:A[9],colorWarningTextActive:A[10],colorInfoBg:w[1],colorInfoBgHover:w[2],colorInfoBorder:w[3],colorInfoBorderHover:w[4],colorInfoHover:w[4],colorInfo:w[6],colorInfoActive:w[7],colorInfoTextHover:w[8],colorInfoText:w[9],colorInfoTextActive:w[10],colorBgMask:new $i("#000").setAlpha(.45).toRgbString(),colorWhite:"#fff"})}const oie=e=>{let t=e,i=e,a=e,c=e;return e<6&&e>=5?t=e+1:e<16&&e>=6?t=e+2:e>=16&&(t=16),e<7&&e>=5?i=4:e<8&&e>=7?i=5:e<14&&e>=8?i=6:e<16&&e>=14?i=7:e>=16&&(i=8),e<6&&e>=2?a=1:e>=6&&(a=2),e>4&&e<8?c=4:e>=8&&(c=6),{borderRadius:e>16?16:e,borderRadiusXS:a,borderRadiusSM:i,borderRadiusLG:t,borderRadiusOuter:c}},aie=oie;function sie(e){const{motionUnit:t,motionBase:i,borderRadius:a,lineWidth:c}=e;return Object.assign({motionDurationFast:`${(i+t).toFixed(1)}s`,motionDurationMid:`${(i+t*2).toFixed(1)}s`,motionDurationSlow:`${(i+t*3).toFixed(1)}s`,lineWidthBold:c+1},aie(a))}const gc=(e,t)=>new $i(e).setAlpha(t).toRgbString(),sf=(e,t)=>new $i(e).darken(t).toHexString(),cie=e=>{const t=xc(e);return{1:t[0],2:t[1],3:t[2],4:t[3],5:t[4],6:t[5],7:t[6],8:t[4],9:t[5],10:t[6]}},lie=(e,t)=>{const i=e||"#fff",a=t||"#000";return{colorBgBase:i,colorTextBase:a,colorText:gc(a,.88),colorTextSecondary:gc(a,.65),colorTextTertiary:gc(a,.45),colorTextQuaternary:gc(a,.25),colorFill:gc(a,.15),colorFillSecondary:gc(a,.06),colorFillTertiary:gc(a,.04),colorFillQuaternary:gc(a,.02),colorBgLayout:sf(i,4),colorBgContainer:sf(i,0),colorBgElevated:sf(i,0),colorBgSpotlight:gc(a,.85),colorBorder:sf(i,15),colorBorderSecondary:sf(i,6)}};function uie(e){const t=new Array(10).fill(null).map((i,a)=>{const c=a-1,u=e*Math.pow(2.71828,c/5),d=a>1?Math.floor(u):Math.ceil(u);return Math.floor(d/2)*2});return t[1]=e,t.map(i=>{const a=i+8;return{size:i,lineHeight:a/i}})}const die=e=>{const t=uie(e),i=t.map(c=>c.size),a=t.map(c=>c.lineHeight);return{fontSizeSM:i[0],fontSize:i[1],fontSizeLG:i[2],fontSizeXL:i[3],fontSizeHeading1:i[6],fontSizeHeading2:i[5],fontSizeHeading3:i[4],fontSizeHeading4:i[3],fontSizeHeading5:i[2],lineHeight:a[1],lineHeightLG:a[2],lineHeightSM:a[0],lineHeightHeading1:a[6],lineHeightHeading2:a[5],lineHeightHeading3:a[4],lineHeightHeading4:a[3],lineHeightHeading5:a[2]}},jB=die;function Tm(e){const t=Object.keys(hw).map(i=>{const a=xc(e[i]);return new Array(10).fill(1).reduce((c,u,d)=>(c[`${i}-${d+1}`]=a[d],c[`${i}${d+1}`]=a[d],c),{})}).reduce((i,a)=>(i=Object.assign(Object.assign({},i),a),i),{});return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},e),t),UB(e,{generateColorPalettes:cie,generateNeutralColorPalettes:lie})),jB(e.fontSize)),rie(e)),MB(e)),sie(e))}function Mb(e){return e>=0&&e<=255}function Hg(e,t){const{r:i,g:a,b:c,a:u}=new $i(e).toRgb();if(u<1)return e;const{r:d,g:f,b:m}=new $i(t).toRgb();for(let g=.01;g<=1;g+=.01){const _=Math.round((i-d*(1-g))/g),S=Math.round((a-f*(1-g))/g),b=Math.round((c-m*(1-g))/g);if(Mb(_)&&Mb(S)&&Mb(b))return new $i({r:_,g:S,b,a:Math.round(g*100)/100}).toRgbString()}return new $i({r:i,g:a,b:c,a:1}).toRgbString()}var hie=globalThis&&globalThis.__rest||function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(i[a[c]]=e[a[c]]);return i};function FB(e){const{override:t}=e,i=hie(e,["override"]),a=Object.assign({},t);Object.keys(bm).forEach(b=>{delete a[b]});const c=Object.assign(Object.assign({},i),a),u=480,d=576,f=768,m=992,g=1200,_=1600;if(c.motion===!1){const b="0s";c.motionDurationFast=b,c.motionDurationMid=b,c.motionDurationSlow=b}return Object.assign(Object.assign(Object.assign({},c),{colorLink:c.colorInfoText,colorLinkHover:c.colorInfoHover,colorLinkActive:c.colorInfoActive,colorFillContent:c.colorFillSecondary,colorFillContentHover:c.colorFill,colorFillAlter:c.colorFillQuaternary,colorBgContainerDisabled:c.colorFillTertiary,colorBorderBg:c.colorBgContainer,colorSplit:Hg(c.colorBorderSecondary,c.colorBgContainer),colorTextPlaceholder:c.colorTextQuaternary,colorTextDisabled:c.colorTextQuaternary,colorTextHeading:c.colorText,colorTextLabel:c.colorTextSecondary,colorTextDescription:c.colorTextTertiary,colorTextLightSolid:c.colorWhite,colorHighlight:c.colorError,colorBgTextHover:c.colorFillSecondary,colorBgTextActive:c.colorFill,colorIcon:c.colorTextTertiary,colorIconHover:c.colorText,colorErrorOutline:Hg(c.colorErrorBg,c.colorBgContainer),colorWarningOutline:Hg(c.colorWarningBg,c.colorBgContainer),fontSizeIcon:c.fontSizeSM,lineWidthFocus:c.lineWidth*4,lineWidth:c.lineWidth,controlOutlineWidth:c.lineWidth*2,controlInteractiveSize:c.controlHeight/2,controlItemBgHover:c.colorFillTertiary,controlItemBgActive:c.colorPrimaryBg,controlItemBgActiveHover:c.colorPrimaryBgHover,controlItemBgActiveDisabled:c.colorFill,controlTmpOutline:c.colorFillQuaternary,controlOutline:Hg(c.colorPrimaryBg,c.colorBgContainer),lineType:c.lineType,borderRadius:c.borderRadius,borderRadiusXS:c.borderRadiusXS,borderRadiusSM:c.borderRadiusSM,borderRadiusLG:c.borderRadiusLG,fontWeightStrong:600,opacityLoading:.65,linkDecoration:"none",linkHoverDecoration:"none",linkFocusDecoration:"none",controlPaddingHorizontal:12,controlPaddingHorizontalSM:8,paddingXXS:c.sizeXXS,paddingXS:c.sizeXS,paddingSM:c.sizeSM,padding:c.size,paddingMD:c.sizeMD,paddingLG:c.sizeLG,paddingXL:c.sizeXL,paddingContentHorizontalLG:c.sizeLG,paddingContentVerticalLG:c.sizeMS,paddingContentHorizontal:c.sizeMS,paddingContentVertical:c.sizeSM,paddingContentHorizontalSM:c.size,paddingContentVerticalSM:c.sizeXS,marginXXS:c.sizeXXS,marginXS:c.sizeXS,marginSM:c.sizeSM,margin:c.size,marginMD:c.sizeMD,marginLG:c.sizeLG,marginXL:c.sizeXL,marginXXL:c.sizeXXL,boxShadow:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowSecondary:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTertiary:`
      0 1px 2px 0 rgba(0, 0, 0, 0.03),
      0 1px 6px -1px rgba(0, 0, 0, 0.02),
      0 2px 4px 0 rgba(0, 0, 0, 0.02)
    `,screenXS:u,screenXSMin:u,screenXSMax:d-1,screenSM:d,screenSMMin:d,screenSMMax:f-1,screenMD:f,screenMDMin:f,screenMDMax:m-1,screenLG:m,screenLGMin:m,screenLGMax:g-1,screenXL:g,screenXLMin:g,screenXLMax:_-1,screenXXL:_,screenXXLMin:_,boxShadowPopoverArrow:"2px 2px 5px rgba(0, 0, 0, 0.05)",boxShadowCard:`
      0 1px 2px -2px ${new $i("rgba(0, 0, 0, 0.16)").toRgbString()},
      0 3px 6px 0 ${new $i("rgba(0, 0, 0, 0.12)").toRgbString()},
      0 5px 12px 4px ${new $i("rgba(0, 0, 0, 0.09)").toRgbString()}
    `,boxShadowDrawerRight:`
      -6px 0 16px 0 rgba(0, 0, 0, 0.08),
      -3px 0 6px -4px rgba(0, 0, 0, 0.12),
      -9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerLeft:`
      6px 0 16px 0 rgba(0, 0, 0, 0.08),
      3px 0 6px -4px rgba(0, 0, 0, 0.12),
      9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerUp:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerDown:`
      0 -6px 16px 0 rgba(0, 0, 0, 0.08),
      0 -3px 6px -4px rgba(0, 0, 0, 0.12),
      0 -9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTabsOverflowLeft:"inset 10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowRight:"inset -10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowTop:"inset 0 10px 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowBottom:"inset 0 -10px 8px -8px rgba(0, 0, 0, 0.08)"}),a)}function gs(e){var t=y.useRef();t.current=e;var i=y.useCallback(function(){for(var a,c=arguments.length,u=new Array(c),d=0;d<c;d++)u[d]=arguments[d];return(a=t.current)===null||a===void 0?void 0:a.call.apply(a,[t].concat(u))},[]);return i}function Mu(e){var t=y.useRef(!1),i=y.useState(e),a=Pe(i,2),c=a[0],u=a[1];y.useEffect(function(){return t.current=!1,function(){t.current=!0}},[]);function d(f,m){m&&t.current||u(f)}return[c,d]}function Ub(e){return e!==void 0}function bc(e,t){var i=t||{},a=i.defaultValue,c=i.value,u=i.onChange,d=i.postState,f=Mu(function(){return Ub(c)?c:Ub(a)?typeof a=="function"?a():a:typeof e=="function"?e():e}),m=Pe(f,2),g=m[0],_=m[1],S=c!==void 0?c:g,b=d?d(S):S,A=gs(u),R=Mu([S]),w=Pe(R,2),D=w[0],x=w[1];g4(function(){var P=D[0];g!==P&&A(g,P)},[D]),g4(function(){Ub(c)||_(c)},[c]);var O=gs(function(P,M){_(P,M),x([S],M)});return[b,O]}const pw="anticon",pie=(e,t)=>t||(e?`ant-${e}`:"ant"),Hn=y.createContext({getPrefixCls:pie,iconPrefixCls:pw}),VB=e=>({color:e.colorLink,textDecoration:"none",outline:"none",cursor:"pointer",transition:`color ${e.motionDurationSlow}`,"&:focus, &:hover":{color:e.colorLinkHover},"&:active":{color:e.colorLinkActive}}),fie=(e,t,i,a,c)=>{const u=e/2,d=0,f=u,m=i*1/Math.sqrt(2),g=u-i*(1-1/Math.sqrt(2)),_=u-t*(1/Math.sqrt(2)),S=i*(Math.sqrt(2)-1)+t*(1/Math.sqrt(2)),b=2*u-_,A=S,R=2*u-m,w=g,D=2*u-d,x=f,O=u*Math.sqrt(2)+i*(Math.sqrt(2)-2),P=i*(Math.sqrt(2)-1);return{pointerEvents:"none",width:e,height:e,overflow:"hidden","&::before":{position:"absolute",bottom:0,insetInlineStart:0,width:e,height:e/2,background:a,clipPath:{_multi_value_:!0,value:[`polygon(${P}px 100%, 50% ${P}px, ${2*u-P}px 100%, ${P}px 100%)`,`path('M ${d} ${f} A ${i} ${i} 0 0 0 ${m} ${g} L ${_} ${S} A ${t} ${t} 0 0 1 ${b} ${A} L ${R} ${w} A ${i} ${i} 0 0 0 ${D} ${x} Z')`]},content:'""'},"&::after":{content:'""',position:"absolute",width:O,height:O,bottom:0,insetInline:0,margin:"auto",borderRadius:{_skip_check_:!0,value:`0 0 ${t}px 0`},transform:"translateY(50%) rotate(-135deg)",boxShadow:c,zIndex:0,background:"transparent"}}},mie={overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},Ku=e=>({boxSizing:"border-box",margin:0,padding:0,color:e.colorText,fontSize:e.fontSize,lineHeight:e.lineHeight,listStyle:"none",fontFamily:e.fontFamily}),BB=()=>({display:"inline-flex",alignItems:"center",color:"inherit",fontStyle:"normal",lineHeight:0,textAlign:"center",textTransform:"none",verticalAlign:"-0.125em",textRendering:"optimizeLegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","> *":{lineHeight:1},svg:{display:"inline-block"}}),c1=()=>({"&::before":{display:"table",content:'""'},"&::after":{display:"table",clear:"both",content:'""'}}),gie=e=>({a:{color:e.colorLink,textDecoration:e.linkDecoration,backgroundColor:"transparent",outline:"none",cursor:"pointer",transition:`color ${e.motionDurationSlow}`,"-webkit-text-decoration-skip":"objects","&:hover":{color:e.colorLinkHover},"&:active":{color:e.colorLinkActive},"&:active,\n  &:hover":{textDecoration:e.linkHoverDecoration,outline:0},"&:focus":{textDecoration:e.linkFocusDecoration,outline:0},"&[disabled]":{color:e.colorTextDisabled,cursor:"not-allowed"}}}),vie=(e,t)=>{const{fontFamily:i,fontSize:a}=e,c=`[class^="${t}"], [class*=" ${t}"]`;return{[c]:{fontFamily:i,fontSize:a,boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"},[c]:{boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"}}}}},$B=e=>({outline:`${e.lineWidthFocus}px solid ${e.colorPrimaryBorder}`,outlineOffset:1,transition:"outline-offset 0s, outline 0s"}),Eie=e=>({"&:focus-visible":Object.assign({},$B(e))});function ws(e,t,i,a){return c=>{const[u,d,f]=Qh(),{getPrefixCls:m,iconPrefixCls:g,csp:_}=y.useContext(Hn),S=m(),b={theme:u,token:d,hashId:f,nonce:()=>_==null?void 0:_.nonce};return i1(Object.assign(Object.assign({},b),{path:["Shared",S]}),()=>[{"&":gie(d)}]),[i1(Object.assign(Object.assign({},b),{path:[e,c,g]}),()=>{const{token:A,flush:R}=yie(d),w=Object.assign({},d[e]);if(a!=null&&a.deprecatedTokens){const{deprecatedTokens:F}=a;F.forEach(j=>{let[B,H]=j;var K;(w!=null&&w[B]||w!=null&&w[H])&&((K=w[H])!==null&&K!==void 0||(w[H]=w==null?void 0:w[B]))})}const D=typeof i=="function"?i(Ki(A,w??{})):i,x=Object.assign(Object.assign({},D),w),O=`.${c}`,P=Ki(A,{componentCls:O,prefixCls:c,iconCls:`.${g}`,antCls:`.${S}`},x),M=t(P,{hashId:f,prefixCls:c,rootPrefixCls:S,iconPrefixCls:g,overrideComponentToken:w});return R(e,x),[(a==null?void 0:a.resetStyle)===!1?null:vie(d,c),M]}),f]}}const HB=typeof CSSINJS_STATISTIC<"u";let l1=!0;function Ki(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];if(!HB)return Object.assign.apply(Object,[{}].concat(t));l1=!1;const a={};return t.forEach(c=>{Object.keys(c).forEach(d=>{Object.defineProperty(a,d,{configurable:!0,enumerable:!0,get:()=>c[d]})})}),l1=!0,a}function _ie(){}function yie(e){let t,i=e,a=_ie;return HB&&(t=new Set,i=new Proxy(e,{get(c,u){return l1&&t.add(u),c[u]}}),a=(c,u)=>{Array.from(t)}),{token:i,keys:t,flush:a}}function Sie(e,t){return pE.reduce((i,a)=>{const c=e[`${a}1`],u=e[`${a}3`],d=e[`${a}6`],f=e[`${a}7`];return Object.assign(Object.assign({},i),t(a,{lightColor:c,lightBorderColor:u,darkColor:d,textColor:f}))},{})}const Cie=hE(Tm),fE={token:bm,hashed:!0},WB=ut.createContext(fE);function Qh(){const{token:e,hashed:t,theme:i,components:a}=ut.useContext(WB),c=`${Ure}-${t||""}`,u=i||Cie,[d,f]=Xne(u,[bm,e],{salt:c,override:Object.assign({override:e},a),formatToken:FB});return[u,d,t?f:""]}const bie=`-ant-${Date.now()}-${Math.random()}`;function Tie(e,t){const i={},a=(d,f)=>{let m=d.clone();return m=(f==null?void 0:f(m))||m,m.toRgbString()},c=(d,f)=>{const m=new $i(d),g=xc(m.toRgbString());i[`${f}-color`]=a(m),i[`${f}-color-disabled`]=g[1],i[`${f}-color-hover`]=g[4],i[`${f}-color-active`]=g[6],i[`${f}-color-outline`]=m.clone().setAlpha(.2).toRgbString(),i[`${f}-color-deprecated-bg`]=g[0],i[`${f}-color-deprecated-border`]=g[2]};if(t.primaryColor){c(t.primaryColor,"primary");const d=new $i(t.primaryColor),f=xc(d.toRgbString());f.forEach((g,_)=>{i[`primary-${_+1}`]=g}),i["primary-color-deprecated-l-35"]=a(d,g=>g.lighten(35)),i["primary-color-deprecated-l-20"]=a(d,g=>g.lighten(20)),i["primary-color-deprecated-t-20"]=a(d,g=>g.tint(20)),i["primary-color-deprecated-t-50"]=a(d,g=>g.tint(50)),i["primary-color-deprecated-f-12"]=a(d,g=>g.setAlpha(g.getAlpha()*.12));const m=new $i(f[0]);i["primary-color-active-deprecated-f-30"]=a(m,g=>g.setAlpha(g.getAlpha()*.3)),i["primary-color-active-deprecated-d-02"]=a(m,g=>g.darken(2))}return t.successColor&&c(t.successColor,"success"),t.warningColor&&c(t.warningColor,"warning"),t.errorColor&&c(t.errorColor,"error"),t.infoColor&&c(t.infoColor,"info"),`
  :root {
    ${Object.keys(i).map(d=>`--${e}-${d}: ${i[d]};`).join(`
`)}
  }
  `.trim()}function Rie(e,t){const i=Tie(e,t);zo()&&am(i,`${bie}-dynamic-theme`)}const u1=y.createContext(!1),GB=e=>{let{children:t,disabled:i}=e;const a=y.useContext(u1);return y.createElement(u1.Provider,{value:i??a},t)},Rm=u1,Iie=e=>{const t=ut.useContext(f_);return ut.useMemo(()=>e?typeof e=="string"?e??t:e instanceof Function?e(t):t:t,[e,t])},Zh=Iie,zB=y.createContext(void 0),KB=e=>{let{children:t,size:i}=e;const a=Zh(i);return y.createElement(zB.Provider,{value:a},t)},f_=zB;function wie(){const e=y.useContext(Rm),t=y.useContext(f_);return{componentDisabled:e,componentSize:t}}function Oie(e,t){const i=e||{},a=i.inherit===!1||!t?fE:t;return l_(()=>{if(!e)return t;const u=Object.assign({},a.components);return Object.keys(e.components||{}).forEach(d=>{u[d]=Object.assign(Object.assign({},u[d]),e.components[d])}),Object.assign(Object.assign(Object.assign({},a),i),{token:Object.assign(Object.assign({},a.token),i.token),components:u})},[i,a],(u,d)=>u.some((f,m)=>{const g=d[m];return!ow(f,g,!0)}))}var Aie=["children"],YB=y.createContext({});function Nie(e){var t=e.children,i=fn(e,Aie);return y.createElement(YB.Provider,{value:i},t)}var xie=function(e){Yh(i,e);var t=qh(i);function i(){return za(this,i),t.apply(this,arguments)}return Ka(i,[{key:"render",value:function(){return this.props.children}}]),i}(y.Component),Tu="none",Wg="appear",Gg="enter",zg="leave",D4="none",ps="prepare",Sh="start",Ch="active",fw="end",qB="prepared";function k4(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit".concat(e)]="webkit".concat(t),i["Moz".concat(e)]="moz".concat(t),i["ms".concat(e)]="MS".concat(t),i["O".concat(e)]="o".concat(t.toLowerCase()),i}function Pie(e,t){var i={animationend:k4("Animation","AnimationEnd"),transitionend:k4("Transition","TransitionEnd")};return e&&("AnimationEvent"in t||delete i.animationend.animation,"TransitionEvent"in t||delete i.transitionend.transition),i}var Die=Pie(zo(),typeof window<"u"?window:{}),XB={};if(zo()){var kie=document.createElement("div");XB=kie.style}var Kg={};function JB(e){if(Kg[e])return Kg[e];var t=Die[e];if(t)for(var i=Object.keys(t),a=i.length,c=0;c<a;c+=1){var u=i[c];if(Object.prototype.hasOwnProperty.call(t,u)&&u in XB)return Kg[e]=t[u],Kg[e]}return""}var QB=JB("animationend"),ZB=JB("transitionend"),e6=!!(QB&&ZB),L4=QB||"animationend",M4=ZB||"transitionend";function U4(e,t){if(!e)return null;if(jn(e)==="object"){var i=t.replace(/-\w/g,function(a){return a[1].toUpperCase()});return e[i]}return"".concat(e,"-").concat(t)}const Lie=function(e){var t=y.useRef(),i=y.useRef(e);i.current=e;var a=y.useCallback(function(d){i.current(d)},[]);function c(d){d&&(d.removeEventListener(M4,a),d.removeEventListener(L4,a))}function u(d){t.current&&t.current!==d&&c(t.current),d&&d!==t.current&&(d.addEventListener(M4,a),d.addEventListener(L4,a),t.current=d)}return y.useEffect(function(){return function(){c(t.current)}},[]),[u,c]};var t6=zo()?y.useLayoutEffect:y.useEffect;const Mie=function(){var e=y.useRef(null);function t(){Wi.cancel(e.current)}function i(a){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;t();var u=Wi(function(){c<=1?a({isCanceled:function(){return u!==e.current}}):i(a,c-1)});e.current=u}return y.useEffect(function(){return function(){t()}},[]),[i,t]};var Uie=[ps,Sh,Ch,fw],jie=[ps,qB],n6=!1,Fie=!0;function r6(e){return e===Ch||e===fw}const Vie=function(e,t,i){var a=Mu(D4),c=Pe(a,2),u=c[0],d=c[1],f=Mie(),m=Pe(f,2),g=m[0],_=m[1];function S(){d(ps,!0)}var b=t?jie:Uie;return t6(function(){if(u!==D4&&u!==fw){var A=b.indexOf(u),R=b[A+1],w=i(u);w===n6?d(R,!0):R&&g(function(D){function x(){D.isCanceled()||d(R,!0)}w===!0?x():Promise.resolve(w).then(x)})}},[e,u]),y.useEffect(function(){return function(){_()}},[]),[S,u]};function Bie(e,t,i,a){var c=a.motionEnter,u=c===void 0?!0:c,d=a.motionAppear,f=d===void 0?!0:d,m=a.motionLeave,g=m===void 0?!0:m,_=a.motionDeadline,S=a.motionLeaveImmediately,b=a.onAppearPrepare,A=a.onEnterPrepare,R=a.onLeavePrepare,w=a.onAppearStart,D=a.onEnterStart,x=a.onLeaveStart,O=a.onAppearActive,P=a.onEnterActive,M=a.onLeaveActive,F=a.onAppearEnd,j=a.onEnterEnd,B=a.onLeaveEnd,H=a.onVisibleChanged,K=Mu(),$=Pe(K,2),Z=$[0],z=$[1],G=Mu(Tu),ee=Pe(G,2),re=ee[0],oe=ee[1],pe=Mu(null),ue=Pe(pe,2),me=ue[0],fe=ue[1],se=y.useRef(!1),ae=y.useRef(null);function de(){return i()}var ce=y.useRef(!1);function we(){oe(Tu,!0),fe(null,!0)}function Ie(qe){var Ge=de();if(!(qe&&!qe.deadline&&qe.target!==Ge)){var nt=ce.current,gt;re===Wg&&nt?gt=F==null?void 0:F(Ge,qe):re===Gg&&nt?gt=j==null?void 0:j(Ge,qe):re===zg&&nt&&(gt=B==null?void 0:B(Ge,qe)),re!==Tu&&nt&&gt!==!1&&we()}}var $e=Lie(Ie),ke=Pe($e,1),mt=ke[0],vt=function(Ge){var nt,gt,bt;switch(Ge){case Wg:return nt={},tt(nt,ps,b),tt(nt,Sh,w),tt(nt,Ch,O),nt;case Gg:return gt={},tt(gt,ps,A),tt(gt,Sh,D),tt(gt,Ch,P),gt;case zg:return bt={},tt(bt,ps,R),tt(bt,Sh,x),tt(bt,Ch,M),bt;default:return{}}},st=y.useMemo(function(){return vt(re)},[re]),rt=Vie(re,!e,function(qe){if(qe===ps){var Ge=st[ps];return Ge?Ge(de()):n6}if(St in st){var nt;fe(((nt=st[St])===null||nt===void 0?void 0:nt.call(st,de(),null))||null)}return St===Ch&&(mt(de()),_>0&&(clearTimeout(ae.current),ae.current=setTimeout(function(){Ie({deadline:!0})},_))),St===qB&&we(),Fie}),ft=Pe(rt,2),Ye=ft[0],St=ft[1],kt=r6(St);ce.current=kt,t6(function(){z(t);var qe=se.current;se.current=!0;var Ge;!qe&&t&&f&&(Ge=Wg),qe&&t&&u&&(Ge=Gg),(qe&&!t&&g||!qe&&S&&!t&&g)&&(Ge=zg);var nt=vt(Ge);Ge&&(e||nt[ps])?(oe(Ge),Ye()):oe(Tu)},[t]),y.useEffect(function(){(re===Wg&&!f||re===Gg&&!u||re===zg&&!g)&&oe(Tu)},[f,u,g]),y.useEffect(function(){return function(){se.current=!1,clearTimeout(ae.current)}},[]);var Lt=y.useRef(!1);y.useEffect(function(){Z&&(Lt.current=!0),Z!==void 0&&re===Tu&&((Lt.current||Z)&&(H==null||H(Z)),Lt.current=!0)},[Z,re]);var Xe=me;return st[ps]&&St===Sh&&(Xe=Ee({transition:"none"},Xe)),[re,St,Xe,Z??t]}function $ie(e){var t=e;jn(e)==="object"&&(t=e.transitionSupport);function i(c,u){return!!(c.motionName&&t&&u!==!1)}var a=y.forwardRef(function(c,u){var d=c.visible,f=d===void 0?!0:d,m=c.removeOnLeave,g=m===void 0?!0:m,_=c.forceRender,S=c.children,b=c.motionName,A=c.leavedClassName,R=c.eventProps,w=y.useContext(YB),D=w.motion,x=i(c,D),O=y.useRef(),P=y.useRef();function M(){try{return O.current instanceof HTMLElement?O.current:qR(P.current)}catch{return null}}var F=Bie(x,f,M,c),j=Pe(F,4),B=j[0],H=j[1],K=j[2],$=j[3],Z=y.useRef($);$&&(Z.current=!0);var z=y.useCallback(function(fe){O.current=fe,ew(u,fe)},[u]),G,ee=Ee(Ee({},R),{},{visible:f});if(!S)G=null;else if(B===Tu)$?G=S(Ee({},ee),z):!g&&Z.current&&A?G=S(Ee(Ee({},ee),{},{className:A}),z):_||!g&&!A?G=S(Ee(Ee({},ee),{},{style:{display:"none"}}),z):G=null;else{var re,oe;H===ps?oe="prepare":r6(H)?oe="active":H===Sh&&(oe="start");var pe=U4(b,"".concat(B,"-").concat(oe));G=S(Ee(Ee({},ee),{},{className:Ve(U4(b,B),(re={},tt(re,pe,pe&&oe),tt(re,b,typeof b=="string"),re)),style:K}),z)}if(y.isValidElement(G)&&Xh(G)){var ue=G,me=ue.ref;me||(G=y.cloneElement(G,{ref:z}))}return y.createElement(xie,{ref:P},G)});return a.displayName="CSSMotion",a}const Yu=$ie(e6);var d1="add",h1="keep",p1="remove",jb="removed";function Hie(e){var t;return e&&jn(e)==="object"&&"key"in e?t=e:t={key:e},Ee(Ee({},t),{},{key:String(t.key)})}function f1(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return e.map(Hie)}function Wie(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=[],a=0,c=t.length,u=f1(e),d=f1(t);u.forEach(function(g){for(var _=!1,S=a;S<c;S+=1){var b=d[S];if(b.key===g.key){a<S&&(i=i.concat(d.slice(a,S).map(function(A){return Ee(Ee({},A),{},{status:d1})})),a=S),i.push(Ee(Ee({},b),{},{status:h1})),a+=1,_=!0;break}}_||i.push(Ee(Ee({},g),{},{status:p1}))}),a<c&&(i=i.concat(d.slice(a).map(function(g){return Ee(Ee({},g),{},{status:d1})})));var f={};i.forEach(function(g){var _=g.key;f[_]=(f[_]||0)+1});var m=Object.keys(f).filter(function(g){return f[g]>1});return m.forEach(function(g){i=i.filter(function(_){var S=_.key,b=_.status;return S!==g||b!==p1}),i.forEach(function(_){_.key===g&&(_.status=h1)})}),i}var Gie=["component","children","onVisibleChanged","onAllRemoved"],zie=["status"],Kie=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];function Yie(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Yu,i=function(a){Yh(u,a);var c=qh(u);function u(){var d;za(this,u);for(var f=arguments.length,m=new Array(f),g=0;g<f;g++)m[g]=arguments[g];return d=c.call.apply(c,[this].concat(m)),tt(aE(d),"state",{keyEntities:[]}),tt(aE(d),"removeKey",function(_){var S=d.state.keyEntities,b=S.map(function(A){return A.key!==_?A:Ee(Ee({},A),{},{status:jb})});return d.setState({keyEntities:b}),b.filter(function(A){var R=A.status;return R!==jb}).length}),d}return Ka(u,[{key:"render",value:function(){var f=this,m=this.state.keyEntities,g=this.props,_=g.component,S=g.children,b=g.onVisibleChanged,A=g.onAllRemoved,R=fn(g,Gie),w=_||y.Fragment,D={};return Kie.forEach(function(x){D[x]=R[x],delete R[x]}),delete R.keys,y.createElement(w,R,m.map(function(x){var O=x.status,P=fn(x,zie),M=O===d1||O===h1;return y.createElement(t,He({},D,{key:P.key,visible:M,eventProps:P,onVisibleChanged:function(j){if(b==null||b(j,{key:P.key}),!j){var B=f.removeKey(P.key);B===0&&A&&A()}}}),S)}))}}],[{key:"getDerivedStateFromProps",value:function(f,m){var g=f.keys,_=m.keyEntities,S=f1(g),b=Wie(_,S);return{keyEntities:b.filter(function(A){var R=_.find(function(w){var D=w.key;return A.key===D});return!(R&&R.status===jb&&A.status===p1)})}}}]),u}(y.Component);return tt(i,"defaultProps",{component:"div"}),i}const i6=Yie(e6);function qie(e){const{children:t}=e,[,i]=Qh(),{motion:a}=i,c=y.useRef(!1);return c.current=c.current||a===!1,c.current?y.createElement(Nie,{motion:a},t):t}const Xie=(e,t)=>{const[i,a]=Qh();return i1({theme:i,token:a,hashId:"",path:["ant-design-icons",e],nonce:()=>t==null?void 0:t.nonce},()=>[{[`.${e}`]:Object.assign(Object.assign({},BB()),{[`.${e} .${e}-icon`]:{display:"block"}})}])},Jie=Xie;var Qie=globalThis&&globalThis.__rest||function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(i[a[c]]=e[a[c]]);return i};const Zie=["getTargetContainer","getPopupContainer","renderEmpty","pageHeader","input","pagination","form","select","button"],eoe="ant";let mE,o6,a6;function Rv(){return mE||eoe}function toe(){return o6||pw}function noe(e){return Object.keys(e).some(t=>t.endsWith("Color"))}const roe=e=>{let{prefixCls:t,iconPrefixCls:i,theme:a}=e;t!==void 0&&(mE=t),i!==void 0&&(o6=i),a&&(noe(a)?Rie(Rv(),a):a6=a)},s6=()=>({getPrefixCls:(e,t)=>t||(e?`${Rv()}-${e}`:Rv()),getIconPrefixCls:toe,getRootPrefixCls:()=>mE||Rv(),getTheme:()=>a6}),ioe=e=>{const{children:t,csp:i,autoInsertSpaceInButton:a,form:c,locale:u,componentSize:d,direction:f,space:m,virtual:g,dropdownMatchSelectWidth:_,popupMatchSelectWidth:S,popupOverflow:b,legacyLocale:A,parentContext:R,iconPrefixCls:w,theme:D,componentDisabled:x}=e,O=y.useCallback((re,oe)=>{const{prefixCls:pe}=e;if(oe)return oe;const ue=pe||R.getPrefixCls("");return re?`${ue}-${re}`:ue},[R.getPrefixCls,e.prefixCls]),P=w||R.iconPrefixCls||pw,M=P!==R.iconPrefixCls,F=i||R.csp,j=Jie(P,F),B=Oie(D,R.theme),H={csp:F,autoInsertSpaceInButton:a,locale:u||A,direction:f,space:m,virtual:g,popupMatchSelectWidth:S??_,popupOverflow:b,getPrefixCls:O,iconPrefixCls:P,theme:B},K=Object.assign({},R);Object.keys(H).forEach(re=>{H[re]!==void 0&&(K[re]=H[re])}),Zie.forEach(re=>{const oe=e[re];oe&&(K[re]=oe)});const $=l_(()=>K,K,(re,oe)=>{const pe=Object.keys(re),ue=Object.keys(oe);return pe.length!==ue.length||pe.some(me=>re[me]!==oe[me])}),Z=y.useMemo(()=>({prefixCls:P,csp:F}),[P,F]);let z=M?j(t):t;const G=y.useMemo(()=>{var re,oe,pe;return yh(((re=Bh.Form)===null||re===void 0?void 0:re.defaultValidateMessages)||{},((pe=(oe=$.locale)===null||oe===void 0?void 0:oe.Form)===null||pe===void 0?void 0:pe.defaultValidateMessages)||{},(c==null?void 0:c.validateMessages)||{})},[$,c==null?void 0:c.validateMessages]);Object.keys(G).length>0&&(z=y.createElement(NB.Provider,{value:G},t)),u&&(z=y.createElement(Mre,{locale:u,_ANT_MARK__:kre},z)),(P||F)&&(z=y.createElement(uw.Provider,{value:Z},z)),d&&(z=y.createElement(KB,{size:d},z)),z=y.createElement(qie,null,z);const ee=y.useMemo(()=>{const re=B||{},{algorithm:oe,token:pe}=re,ue=Qie(re,["algorithm","token"]),me=oe&&(!Array.isArray(oe)||oe.length>0)?hE(oe):void 0;return Object.assign(Object.assign({},ue),{theme:me,token:Object.assign(Object.assign({},bm),pe)})},[B]);return D&&(z=y.createElement(WB.Provider,{value:ee},z)),x!==void 0&&(z=y.createElement(GB,{disabled:x},z)),y.createElement(Hn.Provider,{value:$},z)},ep=e=>{const t=y.useContext(Hn),i=y.useContext(dw);return y.createElement(ioe,Object.assign({parentContext:t,legacyLocale:i},e))};ep.ConfigContext=Hn;ep.SizeContext=f_;ep.config=roe;ep.useConfig=wie;Object.defineProperty(ep,"SizeContext",{get:()=>f_});var c6={};Object.defineProperty(c6,"__esModule",{value:!0});var ooe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"}}]},name:"check-circle",theme:"filled"},aoe=c6.default=ooe,soe=1/0,coe="[object Symbol]",loe=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,uoe=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,m_="\\ud800-\\udfff",l6="\\u0300-\\u036f\\ufe20-\\ufe23",u6="\\u20d0-\\u20f0",d6="\\u2700-\\u27bf",h6="a-z\\xdf-\\xf6\\xf8-\\xff",doe="\\xac\\xb1\\xd7\\xf7",hoe="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",poe="\\u2000-\\u206f",foe=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",p6="A-Z\\xc0-\\xd6\\xd8-\\xde",f6="\\ufe0e\\ufe0f",m6=doe+hoe+poe+foe,mw="['â]",moe="["+m_+"]",j4="["+m6+"]",gE="["+l6+u6+"]",g6="\\d+",goe="["+d6+"]",v6="["+h6+"]",E6="[^"+m_+m6+g6+d6+h6+p6+"]",m1="\\ud83c[\\udffb-\\udfff]",voe="(?:"+gE+"|"+m1+")",_6="[^"+m_+"]",gw="(?:\\ud83c[\\udde6-\\uddff]){2}",vw="[\\ud800-\\udbff][\\udc00-\\udfff]",oh="["+p6+"]",y6="\\u200d",F4="(?:"+v6+"|"+E6+")",Eoe="(?:"+oh+"|"+E6+")",V4="(?:"+mw+"(?:d|ll|m|re|s|t|ve))?",B4="(?:"+mw+"(?:D|LL|M|RE|S|T|VE))?",S6=voe+"?",C6="["+f6+"]?",_oe="(?:"+y6+"(?:"+[_6,gw,vw].join("|")+")"+C6+S6+")*",b6=C6+S6+_oe,yoe="(?:"+[goe,gw,vw].join("|")+")"+b6,Soe="(?:"+[_6+gE+"?",gE,gw,vw,moe].join("|")+")",Coe=RegExp(mw,"g"),boe=RegExp(gE,"g"),Toe=RegExp(m1+"(?="+m1+")|"+Soe+b6,"g"),Roe=RegExp([oh+"?"+v6+"+"+V4+"(?="+[j4,oh,"$"].join("|")+")",Eoe+"+"+B4+"(?="+[j4,oh+F4,"$"].join("|")+")",oh+"?"+F4+"+"+V4,oh+"+"+B4,g6,yoe].join("|"),"g"),Ioe=RegExp("["+y6+m_+l6+u6+f6+"]"),woe=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ooe={Ã:"A",Ã:"A",Ã:"A",Ã:"A",Ã:"A",Ã:"A",Ã :"a",Ã¡:"a",Ã¢:"a",Ã£:"a",Ã¤:"a",Ã¥:"a",Ã:"C",Ã§:"c",Ã:"D",Ã°:"d",Ã:"E",Ã:"E",Ã:"E",Ã:"E",Ã¨:"e",Ã©:"e",Ãª:"e",Ã«:"e",Ã:"I",Ã:"I",Ã:"I",Ã:"I",Ã¬:"i",Ã­:"i",Ã®:"i",Ã¯:"i",Ã:"N",Ã±:"n",Ã:"O",Ã:"O",Ã:"O",Ã:"O",Ã:"O",Ã:"O",Ã²:"o",Ã³:"o",Ã´:"o",Ãµ:"o",Ã¶:"o",Ã¸:"o",Ã:"U",Ã:"U",Ã:"U",Ã:"U",Ã¹:"u",Ãº:"u",Ã»:"u",Ã¼:"u",Ã:"Y",Ã½:"y",Ã¿:"y",Ã:"Ae",Ã¦:"ae",Ã:"Th",Ã¾:"th",Ã:"ss",Ä:"A",Ä:"A",Ä:"A",Ä:"a",Ä:"a",Ä:"a",Ä:"C",Ä:"C",Ä:"C",Ä:"C",Ä:"c",Ä:"c",Ä:"c",Ä:"c",Ä:"D",Ä:"D",Ä:"d",Ä:"d",Ä:"E",Ä:"E",Ä:"E",Ä:"E",Ä:"E",Ä:"e",Ä:"e",Ä:"e",Ä:"e",Ä:"e",Ä:"G",Ä:"G",Ä :"G",Ä¢:"G",Ä:"g",Ä:"g",Ä¡:"g",Ä£:"g",Ä¤:"H",Ä¦:"H",Ä¥:"h",Ä§:"h",Ä¨:"I",Äª:"I",Ä¬:"I",Ä®:"I",Ä°:"I",Ä©:"i",Ä«:"i",Ä­:"i",Ä¯:"i",Ä±:"i",Ä´:"J",Äµ:"j",Ä¶:"K",Ä·:"k",Ä¸:"k",Ä¹:"L",Ä»:"L",Ä½:"L",Ä¿:"L",Å:"L",Äº:"l",Ä¼:"l",Ä¾:"l",Å:"l",Å:"l",Å:"N",Å:"N",Å:"N",Å:"N",Å:"n",Å:"n",Å:"n",Å:"n",Å:"O",Å:"O",Å:"O",Å:"o",Å:"o",Å:"o",Å:"R",Å:"R",Å:"R",Å:"r",Å:"r",Å:"r",Å:"S",Å:"S",Å:"S",Å :"S",Å:"s",Å:"s",Å:"s",Å¡:"s",Å¢:"T",Å¤:"T",Å¦:"T",Å£:"t",Å¥:"t",Å§:"t",Å¨:"U",Åª:"U",Å¬:"U",Å®:"U",Å°:"U",Å²:"U",Å©:"u",Å«:"u",Å­:"u",Å¯:"u",Å±:"u",Å³:"u",Å´:"W",Åµ:"w",Å¶:"Y",Å·:"y",Å¸:"Y",Å¹:"Z",Å»:"Z",Å½:"Z",Åº:"z",Å¼:"z",Å¾:"z",Ä²:"IJ",Ä³:"ij",Å:"Oe",Å:"oe",Å:"'n",Å¿:"ss"},Aoe=typeof wt=="object"&&wt&&wt.Object===Object&&wt,Noe=typeof self=="object"&&self&&self.Object===Object&&self,xoe=Aoe||Noe||Function("return this")();function Poe(e,t,i,a){var c=-1,u=e?e.length:0;for(a&&u&&(i=e[++c]);++c<u;)i=t(i,e[c],c,e);return i}function Doe(e){return e.split("")}function koe(e){return e.match(loe)||[]}function Loe(e){return function(t){return e==null?void 0:e[t]}}var Moe=Loe(Ooe);function T6(e){return Ioe.test(e)}function Uoe(e){return woe.test(e)}function joe(e){return T6(e)?Foe(e):Doe(e)}function Foe(e){return e.match(Toe)||[]}function Voe(e){return e.match(Roe)||[]}var Boe=Object.prototype,$oe=Boe.toString,$4=xoe.Symbol,H4=$4?$4.prototype:void 0,W4=H4?H4.toString:void 0;function Hoe(e,t,i){var a=-1,c=e.length;t<0&&(t=-t>c?0:c+t),i=i>c?c:i,i<0&&(i+=c),c=t>i?0:i-t>>>0,t>>>=0;for(var u=Array(c);++a<c;)u[a]=e[a+t];return u}function Woe(e){if(typeof e=="string")return e;if(qoe(e))return W4?W4.call(e):"";var t=e+"";return t=="0"&&1/e==-soe?"-0":t}function Goe(e,t,i){var a=e.length;return i=i===void 0?a:i,!t&&i>=a?e:Hoe(e,t,i)}function zoe(e){return function(t){t=g_(t);var i=T6(t)?joe(t):void 0,a=i?i[0]:t.charAt(0),c=i?Goe(i,1).join(""):t.slice(1);return a[e]()+c}}function Koe(e){return function(t){return Poe(eae(Qoe(t).replace(Coe,"")),e,"")}}function Yoe(e){return!!e&&typeof e=="object"}function qoe(e){return typeof e=="symbol"||Yoe(e)&&$oe.call(e)==coe}function g_(e){return e==null?"":Woe(e)}var Xoe=Koe(function(e,t,i){return t=t.toLowerCase(),e+(i?Joe(t):t)});function Joe(e){return Zoe(g_(e).toLowerCase())}function Qoe(e){return e=g_(e),e&&e.replace(uoe,Moe).replace(boe,"")}var Zoe=zoe("toUpperCase");function eae(e,t,i){return e=g_(e),t=i?void 0:t,t===void 0?Uoe(e)?Voe(e):koe(e):e.match(t)||[]}var tae=Xoe;const nae=Lc(tae);var Im={},R6={exports:{}};(function(e){function t(i){return i&&i.__esModule?i:{default:i}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(R6);var rae=R6.exports,Ew={};Object.defineProperty(Ew,"__esModule",{value:!0});Ew.default=iae;function iae(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var _w={};Object.defineProperty(_w,"__esModule",{value:!0});_w.default=oae;function oae(e,t){if(!e)return!1;if(e.contains)return e.contains(t);for(var i=t;i;){if(i===e)return!0;i=i.parentNode}return!1}var I6=rae.default;Object.defineProperty(Im,"__esModule",{value:!0});Im.clearContainerCache=pae;Im.injectCSS=yw;Im.removeCSS=dae;var aae=Im.updateCSS=fae,sae=I6(Ew),cae=I6(_w),G4="data-rc-order",lae="rc-util-key",vE=new Map;function w6(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.mark;return t?t.startsWith("data-")?t:"data-".concat(t):lae}function v_(e){if(e.attachTo)return e.attachTo;var t=document.querySelector("head");return t||document.body}function uae(e){return e==="queue"?"prependQueue":e?"prepend":"append"}function O6(e){return Array.from((vE.get(e)||e).children).filter(function(t){return t.tagName==="STYLE"})}function yw(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!(0,sae.default)())return null;var i=t.csp,a=t.prepend,c=document.createElement("style");c.setAttribute(G4,uae(a)),i!=null&&i.nonce&&(c.nonce=i==null?void 0:i.nonce),c.innerHTML=e;var u=v_(t),d=u.firstChild;if(a){if(a==="queue"){var f=O6(u).filter(function(m){return["prepend","prependQueue"].includes(m.getAttribute(G4))});if(f.length)return u.insertBefore(c,f[f.length-1].nextSibling),c}u.insertBefore(c,d)}else u.appendChild(c);return c}function A6(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=v_(t);return O6(i).find(function(a){return a.getAttribute(w6(t))===e})}function dae(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=A6(e,t);if(i){var a=v_(t);a.removeChild(i)}}function hae(e,t){var i=vE.get(e);if(!i||!(0,cae.default)(document,i)){var a=yw("",t),c=a.parentNode;vE.set(e,c),e.removeChild(a)}}function pae(){vE.clear()}function fae(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=v_(i);hae(a,i);var c=A6(t,i);if(c){var u,d;if((u=i.csp)!==null&&u!==void 0&&u.nonce&&c.nonce!==((d=i.csp)===null||d===void 0?void 0:d.nonce)){var f;c.nonce=(f=i.csp)===null||f===void 0?void 0:f.nonce}return c.innerHTML!==e&&(c.innerHTML=e),c}var m=yw(e,i);return m.setAttribute(w6(i),t),m}var Sw={};Object.defineProperty(Sw,"__esModule",{value:!0});var mae=Sw.getShadowRoot=gae;Sw.inShadow=x6;function N6(e){var t;return e==null||(t=e.getRootNode)===null||t===void 0?void 0:t.call(e)}function x6(e){return N6(e)!==(e==null?void 0:e.ownerDocument)}function gae(e){return x6(e)?N6(e):null}var Os={};Object.defineProperty(Os,"__esModule",{value:!0});Os.call=Cw;var P6=Os.default=void 0;Os.note=L6;Os.noteOnce=U6;Os.preMessage=void 0;Os.resetWarned=M6;Os.warning=k6;Os.warningOnce=wm;var g1={},D6=function(t){};Os.preMessage=D6;function k6(e,t){}function L6(e,t){}function M6(){g1={}}function Cw(e,t,i){!t&&!g1[i]&&(e(!1,i),g1[i]=!0)}function wm(e,t){Cw(k6,e,t)}function U6(e,t){Cw(L6,e,t)}wm.preMessage=D6;wm.resetWarned=M6;wm.noteOnce=U6;var vae=wm;P6=Os.default=vae;function Eae(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function z4(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{},a=Object.keys(i);typeof Object.getOwnPropertySymbols=="function"&&(a=a.concat(Object.getOwnPropertySymbols(i).filter(function(c){return Object.getOwnPropertyDescriptor(i,c).enumerable}))),a.forEach(function(c){Eae(e,c,i[c])})}return e}function _ae(e,t){P6(e,"[@ant-design/icons] ".concat(t))}function K4(e){return typeof e=="object"&&typeof e.name=="string"&&typeof e.theme=="string"&&(typeof e.icon=="object"||typeof e.icon=="function")}function Y4(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.keys(e).reduce(function(t,i){var a=e[i];switch(i){case"class":t.className=a,delete t.class;break;default:delete t[i],t[nae(i)]=a}return t},{})}function v1(e,t,i){return i?ut.createElement(e.tag,z4({key:t},Y4(e.attrs),i),(e.children||[]).map(function(a,c){return v1(a,"".concat(t,"-").concat(e.tag,"-").concat(c))})):ut.createElement(e.tag,z4({key:t},Y4(e.attrs)),(e.children||[]).map(function(a,c){return v1(a,"".concat(t,"-").concat(e.tag,"-").concat(c))}))}function j6(e){return xc(e)[0]}function F6(e){return e?Array.isArray(e)?e:[e]:[]}var yae=`
.anticon {
  display: inline-block;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`,Sae=function(e){var t=y.useContext(uw),i=t.csp,a=t.prefixCls,c=yae;a&&(c=c.replace(/anticon/g,a)),y.useEffect(function(){var u=e.current,d=mae(u);aae(c,"@ant-design-icons",{prepend:!0,csp:i,attachTo:d})},[])};function Cae(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function E1(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{},a=Object.keys(i);typeof Object.getOwnPropertySymbols=="function"&&(a=a.concat(Object.getOwnPropertySymbols(i).filter(function(c){return Object.getOwnPropertyDescriptor(i,c).enumerable}))),a.forEach(function(c){Cae(e,c,i[c])})}return e}function bae(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),i.push.apply(i,a)}return i}function q4(e,t){return t=t??{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):bae(Object(t)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))}),e}function Tae(e,t){if(e==null)return{};var i=Rae(e,t),a,c;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(c=0;c<u.length;c++)a=u[c],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function Rae(e,t){if(e==null)return{};var i={},a=Object.keys(e),c,u;for(u=0;u<a.length;u++)c=a[u],!(t.indexOf(c)>=0)&&(i[c]=e[c]);return i}var kf={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};function Iae(e){var t=e.primaryColor,i=e.secondaryColor;kf.primaryColor=t,kf.secondaryColor=i||j6(t),kf.calculated=!!i}function wae(){return E1({},kf)}var E_=function(e){var t=e.icon,i=e.className,a=e.onClick,c=e.style,u=e.primaryColor,d=e.secondaryColor,f=Tae(e,["icon","className","onClick","style","primaryColor","secondaryColor"]),m=y.useRef(),g=kf;if(u&&(g={primaryColor:u,secondaryColor:d||j6(u)}),Sae(m),_ae(K4(t),"icon should be icon definiton, but got ".concat(t)),!K4(t))return null;var _=t;return _&&typeof _.icon=="function"&&(_=q4(E1({},_),{icon:_.icon(g.primaryColor,g.secondaryColor)})),v1(_.icon,"svg-".concat(_.name),q4(E1({className:i,onClick:a,style:c,"data-icon":_.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},f),{ref:m}))};E_.displayName="IconReact";E_.getTwoToneColors=wae;E_.setTwoToneColors=Iae;const bw=E_;function X4(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function Oae(e){if(Array.isArray(e))return e}function Aae(e,t){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var a=[],c=!0,u=!1,d,f;try{for(i=i.call(e);!(c=(d=i.next()).done)&&(a.push(d.value),!(t&&a.length===t));c=!0);}catch(m){u=!0,f=m}finally{try{!c&&i.return!=null&&i.return()}finally{if(u)throw f}}return a}}function Nae(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function xae(e,t){return Oae(e)||Aae(e,t)||Pae(e,t)||Nae()}function Pae(e,t){if(e){if(typeof e=="string")return X4(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(i);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return X4(e,t)}}function V6(e){var t=xae(F6(e),2),i=t[0],a=t[1];return bw.setTwoToneColors({primaryColor:i,secondaryColor:a})}function Dae(){var e=bw.getTwoToneColors();return e.calculated?[e.primaryColor,e.secondaryColor]:e.primaryColor}function J4(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function kae(e){if(Array.isArray(e))return e}function _1(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Lae(e,t){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var a=[],c=!0,u=!1,d,f;try{for(i=i.call(e);!(c=(d=i.next()).done)&&(a.push(d.value),!(t&&a.length===t));c=!0);}catch(m){u=!0,f=m}finally{try{!c&&i.return!=null&&i.return()}finally{if(u)throw f}}return a}}function Mae(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Uae(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{},a=Object.keys(i);typeof Object.getOwnPropertySymbols=="function"&&(a=a.concat(Object.getOwnPropertySymbols(i).filter(function(c){return Object.getOwnPropertyDescriptor(i,c).enumerable}))),a.forEach(function(c){_1(e,c,i[c])})}return e}function jae(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),i.push.apply(i,a)}return i}function Fae(e,t){return t=t??{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):jae(Object(t)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))}),e}function Vae(e,t){if(e==null)return{};var i=Bae(e,t),a,c;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(c=0;c<u.length;c++)a=u[c],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function Bae(e,t){if(e==null)return{};var i={},a=Object.keys(e),c,u;for(u=0;u<a.length;u++)c=a[u],!(t.indexOf(c)>=0)&&(i[c]=e[c]);return i}function $ae(e,t){return kae(e)||Lae(e,t)||Hae(e,t)||Mae()}function Hae(e,t){if(e){if(typeof e=="string")return J4(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(i);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return J4(e,t)}}V6(tie.primary);var __=y.forwardRef(function(e,t){var i=e.className,a=e.icon,c=e.spin,u=e.rotate,d=e.tabIndex,f=e.onClick,m=e.twoToneColor,g=Vae(e,["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"]),_=y.useContext(uw),S=_.prefixCls,b=S===void 0?"anticon":S,A=_.rootClassName,R,w=Ve(A,b,(R={},_1(R,"".concat(b,"-").concat(a.name),!!a.name),_1(R,"".concat(b,"-spin"),!!c||a.name==="loading"),R),i),D=d;D===void 0&&f&&(D=-1);var x=u?{msTransform:"rotate(".concat(u,"deg)"),transform:"rotate(".concat(u,"deg)")}:void 0,O=$ae(F6(m),2),P=O[0],M=O[1];return y.createElement("span",Fae(Uae({role:"img","aria-label":a.name},g),{ref:t,tabIndex:D,onClick:f,className:w}),y.createElement(bw,{icon:a,primaryColor:P,secondaryColor:M,style:x}))});__.displayName="AntdIcon";__.getTwoToneColor=Dae;__.setTwoToneColor=V6;const xi=__;function Wae(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Gae(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{},a=Object.keys(i);typeof Object.getOwnPropertySymbols=="function"&&(a=a.concat(Object.getOwnPropertySymbols(i).filter(function(c){return Object.getOwnPropertyDescriptor(i,c).enumerable}))),a.forEach(function(c){Wae(e,c,i[c])})}return e}function zae(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),i.push.apply(i,a)}return i}function Kae(e,t){return t=t??{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):zae(Object(t)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))}),e}var Yae=function(e,t){return y.createElement(xi,Kae(Gae({},e),{ref:t,icon:aoe}))};const B6=y.forwardRef(Yae);var $6={};Object.defineProperty($6,"__esModule",{value:!0});var qae={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm127.98 274.82h-.04l-.08.06L512 466.75 384.14 338.88c-.04-.05-.06-.06-.08-.06a.12.12 0 00-.07 0c-.03 0-.05.01-.09.05l-45.02 45.02a.2.2 0 00-.05.09.12.12 0 000 .07v.02a.27.27 0 00.06.06L466.75 512 338.88 639.86c-.05.04-.06.06-.06.08a.12.12 0 000 .07c0 .03.01.05.05.09l45.02 45.02a.2.2 0 00.09.05.12.12 0 00.07 0c.02 0 .04-.01.08-.05L512 557.25l127.86 127.87c.04.04.06.05.08.05a.12.12 0 00.07 0c.03 0 .05-.01.09-.05l45.02-45.02a.2.2 0 00.05-.09.12.12 0 000-.07v-.02a.27.27 0 00-.05-.06L557.25 512l127.87-127.86c.04-.04.05-.06.05-.08a.12.12 0 000-.07c0-.03-.01-.05-.05-.09l-45.02-45.02a.2.2 0 00-.09-.05.12.12 0 00-.07 0z"}}]},name:"close-circle",theme:"filled"},Xae=$6.default=qae;function Jae(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Qae(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{},a=Object.keys(i);typeof Object.getOwnPropertySymbols=="function"&&(a=a.concat(Object.getOwnPropertySymbols(i).filter(function(c){return Object.getOwnPropertyDescriptor(i,c).enumerable}))),a.forEach(function(c){Jae(e,c,i[c])})}return e}function Zae(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),i.push.apply(i,a)}return i}function ese(e,t){return t=t??{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Zae(Object(t)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))}),e}var tse=function(e,t){return y.createElement(xi,ese(Qae({},e),{ref:t,icon:Xae}))};const y_=y.forwardRef(tse);var H6={};Object.defineProperty(H6,"__esModule",{value:!0});var nse={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M799.86 166.31c.02 0 .04.02.08.06l57.69 57.7c.04.03.05.05.06.08a.12.12 0 010 .06c0 .03-.02.05-.06.09L569.93 512l287.7 287.7c.04.04.05.06.06.09a.12.12 0 010 .07c0 .02-.02.04-.06.08l-57.7 57.69c-.03.04-.05.05-.07.06a.12.12 0 01-.07 0c-.03 0-.05-.02-.09-.06L512 569.93l-287.7 287.7c-.04.04-.06.05-.09.06a.12.12 0 01-.07 0c-.02 0-.04-.02-.08-.06l-57.69-57.7c-.04-.03-.05-.05-.06-.07a.12.12 0 010-.07c0-.03.02-.05.06-.09L454.07 512l-287.7-287.7c-.04-.04-.05-.06-.06-.09a.12.12 0 010-.07c0-.02.02-.04.06-.08l57.7-57.69c.03-.04.05-.05.07-.06a.12.12 0 01.07 0c.03 0 .05.02.09.06L512 454.07l287.7-287.7c.04-.04.06-.05.09-.06a.12.12 0 01.07 0z"}}]},name:"close",theme:"outlined"},rse=H6.default=nse;function ise(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function ose(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{},a=Object.keys(i);typeof Object.getOwnPropertySymbols=="function"&&(a=a.concat(Object.getOwnPropertySymbols(i).filter(function(c){return Object.getOwnPropertyDescriptor(i,c).enumerable}))),a.forEach(function(c){ise(e,c,i[c])})}return e}function ase(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),i.push.apply(i,a)}return i}function sse(e,t){return t=t??{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ase(Object(t)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))}),e}var cse=function(e,t){return y.createElement(xi,sse(ose({},e),{ref:t,icon:rse}))};const lse=y.forwardRef(cse);var W6={};Object.defineProperty(W6,"__esModule",{value:!0});var use={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm-32 232c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296zm32 440a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"exclamation-circle",theme:"filled"},dse=W6.default=use;function hse(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function pse(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{},a=Object.keys(i);typeof Object.getOwnPropertySymbols=="function"&&(a=a.concat(Object.getOwnPropertySymbols(i).filter(function(c){return Object.getOwnPropertyDescriptor(i,c).enumerable}))),a.forEach(function(c){hse(e,c,i[c])})}return e}function fse(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),i.push.apply(i,a)}return i}function mse(e,t){return t=t??{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):fse(Object(t)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))}),e}var gse=function(e,t){return y.createElement(xi,mse(pse({},e),{ref:t,icon:dse}))};const G6=y.forwardRef(gse);var z6={};Object.defineProperty(z6,"__esModule",{value:!0});var vse={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"info-circle",theme:"filled"},Ese=z6.default=vse;function _se(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function yse(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{},a=Object.keys(i);typeof Object.getOwnPropertySymbols=="function"&&(a=a.concat(Object.getOwnPropertySymbols(i).filter(function(c){return Object.getOwnPropertyDescriptor(i,c).enumerable}))),a.forEach(function(c){_se(e,c,i[c])})}return e}function Sse(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),i.push.apply(i,a)}return i}function Cse(e,t){return t=t??{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Sse(Object(t)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))}),e}var bse=function(e,t){return y.createElement(xi,Cse(yse({},e),{ref:t,icon:Ese}))};const Tse=y.forwardRef(bse),{isValidElement:jl}=xh;function K6(e){return e&&jl(e)&&e.type===y.Fragment}function Rse(e,t,i){return jl(e)?y.cloneElement(e,typeof i=="function"?i(e.props||{}):i):t}function bs(e,t){return Rse(e,e,t)}const Q4=e=>typeof e=="object"&&e!=null&&e.nodeType===1,Z4=(e,t)=>(!t||e!=="hidden")&&e!=="visible"&&e!=="clip",Fb=(e,t)=>{if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){const i=getComputedStyle(e,null);return Z4(i.overflowY,t)||Z4(i.overflowX,t)||(a=>{const c=(u=>{if(!u.ownerDocument||!u.ownerDocument.defaultView)return null;try{return u.ownerDocument.defaultView.frameElement}catch{return null}})(a);return!!c&&(c.clientHeight<a.scrollHeight||c.clientWidth<a.scrollWidth)})(e)}return!1},Yg=(e,t,i,a,c,u,d,f)=>u<e&&d>t||u>e&&d<t?0:u<=e&&f<=i||d>=t&&f>=i?u-e-a:d>t&&f<i||u<e&&f>i?d-t+c:0,Ise=e=>{const t=e.parentElement;return t??(e.getRootNode().host||null)},ej=(e,t)=>{var i,a,c,u;if(typeof document>"u")return[];const{scrollMode:d,block:f,inline:m,boundary:g,skipOverflowHiddenElements:_}=t,S=typeof g=="function"?g:z=>z!==g;if(!Q4(e))throw new TypeError("Invalid target");const b=document.scrollingElement||document.documentElement,A=[];let R=e;for(;Q4(R)&&S(R);){if(R=Ise(R),R===b){A.push(R);break}R!=null&&R===document.body&&Fb(R)&&!Fb(document.documentElement)||R!=null&&Fb(R,_)&&A.push(R)}const w=(a=(i=window.visualViewport)==null?void 0:i.width)!=null?a:innerWidth,D=(u=(c=window.visualViewport)==null?void 0:c.height)!=null?u:innerHeight,{scrollX:x,scrollY:O}=window,{height:P,width:M,top:F,right:j,bottom:B,left:H}=e.getBoundingClientRect();let K=f==="start"||f==="nearest"?F:f==="end"?B:F+P/2,$=m==="center"?H+M/2:m==="end"?j:H;const Z=[];for(let z=0;z<A.length;z++){const G=A[z],{height:ee,width:re,top:oe,right:pe,bottom:ue,left:me}=G.getBoundingClientRect();if(d==="if-needed"&&F>=0&&H>=0&&B<=D&&j<=w&&F>=oe&&B<=ue&&H>=me&&j<=pe)return Z;const fe=getComputedStyle(G),se=parseInt(fe.borderLeftWidth,10),ae=parseInt(fe.borderTopWidth,10),de=parseInt(fe.borderRightWidth,10),ce=parseInt(fe.borderBottomWidth,10);let we=0,Ie=0;const $e="offsetWidth"in G?G.offsetWidth-G.clientWidth-se-de:0,ke="offsetHeight"in G?G.offsetHeight-G.clientHeight-ae-ce:0,mt="offsetWidth"in G?G.offsetWidth===0?0:re/G.offsetWidth:0,vt="offsetHeight"in G?G.offsetHeight===0?0:ee/G.offsetHeight:0;if(b===G)we=f==="start"?K:f==="end"?K-D:f==="nearest"?Yg(O,O+D,D,ae,ce,O+K,O+K+P,P):K-D/2,Ie=m==="start"?$:m==="center"?$-w/2:m==="end"?$-w:Yg(x,x+w,w,se,de,x+$,x+$+M,M),we=Math.max(0,we+O),Ie=Math.max(0,Ie+x);else{we=f==="start"?K-oe-ae:f==="end"?K-ue+ce+ke:f==="nearest"?Yg(oe,ue,ee,ae,ce+ke,K,K+P,P):K-(oe+ee/2)+ke/2,Ie=m==="start"?$-me-se:m==="center"?$-(me+re/2)+$e/2:m==="end"?$-pe+de+$e:Yg(me,pe,re,se,de+$e,$,$+M,M);const{scrollLeft:st,scrollTop:rt}=G;we=Math.max(0,Math.min(rt+we/vt,G.scrollHeight-ee/vt+ke)),Ie=Math.max(0,Math.min(st+Ie/mt,G.scrollWidth-re/mt+$e)),K+=rt-we,$+=st-Ie}Z.push({el:G,top:we,left:Ie})}return Z},wse=e=>e===!1?{block:"end",inline:"nearest"}:(t=>t===Object(t)&&Object.keys(t).length!==0)(e)?e:{block:"start",inline:"nearest"};function Ose(e,t){if(!e.isConnected||!(a=>{let c=a;for(;c&&c.parentNode;){if(c.parentNode===document)return!0;c=c.parentNode instanceof ShadowRoot?c.parentNode.host:c.parentNode}return!1})(e))return;if((a=>typeof a=="object"&&typeof a.behavior=="function")(t))return t.behavior(ej(e,t));const i=typeof t=="boolean"||t==null?void 0:t.behavior;for(const{el:a,top:c,left:u}of ej(e,wse(t)))a.scroll({top:c,left:u,behavior:i})}var pt={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(t){var i=t.keyCode;if(t.altKey&&!t.ctrlKey||t.metaKey||i>=pt.F1&&i<=pt.F12)return!1;switch(i){case pt.ALT:case pt.CAPS_LOCK:case pt.CONTEXT_MENU:case pt.CTRL:case pt.DOWN:case pt.END:case pt.ESC:case pt.HOME:case pt.INSERT:case pt.LEFT:case pt.MAC_FF_META:case pt.META:case pt.NUMLOCK:case pt.NUM_CENTER:case pt.PAGE_DOWN:case pt.PAGE_UP:case pt.PAUSE:case pt.PRINT_SCREEN:case pt.RIGHT:case pt.SHIFT:case pt.UP:case pt.WIN_KEY:case pt.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(t){if(t>=pt.ZERO&&t<=pt.NINE||t>=pt.NUM_ZERO&&t<=pt.NUM_MULTIPLY||t>=pt.A&&t<=pt.Z||window.navigator.userAgent.indexOf("WebKit")!==-1&&t===0)return!0;switch(t){case pt.SPACE:case pt.QUESTION_MARK:case pt.NUM_PLUS:case pt.NUM_MINUS:case pt.NUM_PERIOD:case pt.NUM_DIVISION:case pt.SEMICOLON:case pt.DASH:case pt.EQUALS:case pt.COMMA:case pt.PERIOD:case pt.SLASH:case pt.APOSTROPHE:case pt.SINGLE_QUOTE:case pt.OPEN_SQUARE_BRACKET:case pt.BACKSLASH:case pt.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},Ase=y.forwardRef(function(e,t){var i=e.prefixCls,a=e.style,c=e.className,u=e.duration,d=u===void 0?4.5:u,f=e.eventKey,m=e.content,g=e.closable,_=e.closeIcon,S=_===void 0?"x":_,b=e.props,A=e.onClick,R=e.onNoticeClose,w=e.times,D=y.useState(!1),x=Pe(D,2),O=x[0],P=x[1],M=function(){R(f)},F=function(H){(H.key==="Enter"||H.code==="Enter"||H.keyCode===pt.ENTER)&&M()};y.useEffect(function(){if(!O&&d>0){var B=setTimeout(function(){M()},d*1e3);return function(){clearTimeout(B)}}},[d,O,w]);var j="".concat(i,"-notice");return y.createElement("div",He({},b,{ref:t,className:Ve(j,c,tt({},"".concat(j,"-closable"),g)),style:a,onMouseEnter:function(){P(!0)},onMouseLeave:function(){P(!1)},onClick:A}),y.createElement("div",{className:"".concat(j,"-content")},m),g&&y.createElement("a",{tabIndex:0,className:"".concat(j,"-close"),onKeyDown:F,onClick:function(H){H.preventDefault(),H.stopPropagation(),M()}},S))});const Y6=Ase;var Nse=y.forwardRef(function(e,t){var i=e.prefixCls,a=i===void 0?"rc-notification":i,c=e.container,u=e.motion,d=e.maxCount,f=e.className,m=e.style,g=e.onAllRemoved,_=y.useState([]),S=Pe(_,2),b=S[0],A=S[1],R=function(B){var H,K=b.find(function($){return $.key===B});K==null||(H=K.onClose)===null||H===void 0||H.call(K),A(function($){return $.filter(function(Z){return Z.key!==B})})};y.useImperativeHandle(t,function(){return{open:function(B){A(function(H){var K=Qe(H),$=K.findIndex(function(G){return G.key===B.key}),Z=Ee({},B);if($>=0){var z;Z.times=(((z=H[$])===null||z===void 0?void 0:z.times)||0)+1,K[$]=Z}else Z.times=0,K.push(Z);return d>0&&K.length>d&&(K=K.slice(-d)),K})},close:function(B){R(B)},destroy:function(){A([])}}});var w=y.useState({}),D=Pe(w,2),x=D[0],O=D[1];y.useEffect(function(){var j={};b.forEach(function(B){var H=B.placement,K=H===void 0?"topRight":H;K&&(j[K]=j[K]||[],j[K].push(B))}),Object.keys(x).forEach(function(B){j[B]=j[B]||[]}),O(j)},[b]);var P=function(B){O(function(H){var K=Ee({},H),$=K[B]||[];return $.length||delete K[B],K})},M=y.useRef(!1);if(y.useEffect(function(){Object.keys(x).length>0?M.current=!0:M.current&&(g==null||g(),M.current=!1)},[x]),!c)return null;var F=Object.keys(x);return Hl.createPortal(y.createElement(y.Fragment,null,F.map(function(j){var B=x[j],H=B.map(function($){return{config:$,key:$.key}}),K=typeof u=="function"?u(j):u;return y.createElement(i6,He({key:j,className:Ve(a,"".concat(a,"-").concat(j),f==null?void 0:f(j)),style:m==null?void 0:m(j),keys:H,motionAppear:!0},K,{onAllRemoved:function(){P(j)}}),function($,Z){var z=$.config,G=$.className,ee=$.style,re=z.key,oe=z.times,pe=z.className,ue=z.style;return y.createElement(Y6,He({},z,{ref:Z,prefixCls:a,className:Ve(G,pe),style:Ee(Ee({},ee),ue),times:oe,key:re,eventKey:re,onNoticeClose:R}))})})),c)}),xse=["getContainer","motion","prefixCls","maxCount","className","style","onAllRemoved"],Pse=function(){return document.body},tj=0;function Dse(){for(var e={},t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];return i.forEach(function(c){c&&Object.keys(c).forEach(function(u){var d=c[u];d!==void 0&&(e[u]=d)})}),e}function kse(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.getContainer,i=t===void 0?Pse:t,a=e.motion,c=e.prefixCls,u=e.maxCount,d=e.className,f=e.style,m=e.onAllRemoved,g=fn(e,xse),_=y.useState(),S=Pe(_,2),b=S[0],A=S[1],R=y.useRef(),w=y.createElement(Nse,{container:b,ref:R,prefixCls:c,motion:a,maxCount:u,className:d,style:f,onAllRemoved:m}),D=y.useState([]),x=Pe(D,2),O=x[0],P=x[1],M=y.useMemo(function(){return{open:function(j){var B=Dse(g,j);(B.key===null||B.key===void 0)&&(B.key="rc-notification-".concat(tj),tj+=1),P(function(H){return[].concat(Qe(H),[{type:"open",config:B}])})},close:function(j){P(function(B){return[].concat(Qe(B),[{type:"close",key:j}])})},destroy:function(){P(function(j){return[].concat(Qe(j),[{type:"destroy"}])})}}},[]);return y.useEffect(function(){A(i())}),y.useEffect(function(){R.current&&O.length&&(O.forEach(function(F){switch(F.type){case"open":R.current.open(F.config);break;case"close":R.current.close(F.key);break;case"destroy":R.current.destroy();break}}),P([]))},[O]),[M,w]}var q6={};Object.defineProperty(q6,"__esModule",{value:!0});var Lse={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"},Mse=q6.default=Lse;function Use(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function jse(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{},a=Object.keys(i);typeof Object.getOwnPropertySymbols=="function"&&(a=a.concat(Object.getOwnPropertySymbols(i).filter(function(c){return Object.getOwnPropertyDescriptor(i,c).enumerable}))),a.forEach(function(c){Use(e,c,i[c])})}return e}function Fse(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),i.push.apply(i,a)}return i}function Vse(e,t){return t=t??{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Fse(Object(t)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))}),e}var Bse=function(e,t){return y.createElement(xi,Vse(jse({},e),{ref:t,icon:Mse}))};const X6=y.forwardRef(Bse);function ya(){ya=function(){return e};var e={},t=Object.prototype,i=t.hasOwnProperty,a=Object.defineProperty||function(z,G,ee){z[G]=ee.value},c=typeof Symbol=="function"?Symbol:{},u=c.iterator||"@@iterator",d=c.asyncIterator||"@@asyncIterator",f=c.toStringTag||"@@toStringTag";function m(z,G,ee){return Object.defineProperty(z,G,{value:ee,enumerable:!0,configurable:!0,writable:!0}),z[G]}try{m({},"")}catch{m=function(ee,re,oe){return ee[re]=oe}}function g(z,G,ee,re){var oe=G&&G.prototype instanceof b?G:b,pe=Object.create(oe.prototype),ue=new K(re||[]);return a(pe,"_invoke",{value:F(z,ee,ue)}),pe}function _(z,G,ee){try{return{type:"normal",arg:z.call(G,ee)}}catch(re){return{type:"throw",arg:re}}}e.wrap=g;var S={};function b(){}function A(){}function R(){}var w={};m(w,u,function(){return this});var D=Object.getPrototypeOf,x=D&&D(D($([])));x&&x!==t&&i.call(x,u)&&(w=x);var O=R.prototype=b.prototype=Object.create(w);function P(z){["next","throw","return"].forEach(function(G){m(z,G,function(ee){return this._invoke(G,ee)})})}function M(z,G){function ee(oe,pe,ue,me){var fe=_(z[oe],z,pe);if(fe.type!=="throw"){var se=fe.arg,ae=se.value;return ae&&jn(ae)=="object"&&i.call(ae,"__await")?G.resolve(ae.__await).then(function(de){ee("next",de,ue,me)},function(de){ee("throw",de,ue,me)}):G.resolve(ae).then(function(de){se.value=de,ue(se)},function(de){return ee("throw",de,ue,me)})}me(fe.arg)}var re;a(this,"_invoke",{value:function(pe,ue){function me(){return new G(function(fe,se){ee(pe,ue,fe,se)})}return re=re?re.then(me,me):me()}})}function F(z,G,ee){var re="suspendedStart";return function(oe,pe){if(re==="executing")throw new Error("Generator is already running");if(re==="completed"){if(oe==="throw")throw pe;return Z()}for(ee.method=oe,ee.arg=pe;;){var ue=ee.delegate;if(ue){var me=j(ue,ee);if(me){if(me===S)continue;return me}}if(ee.method==="next")ee.sent=ee._sent=ee.arg;else if(ee.method==="throw"){if(re==="suspendedStart")throw re="completed",ee.arg;ee.dispatchException(ee.arg)}else ee.method==="return"&&ee.abrupt("return",ee.arg);re="executing";var fe=_(z,G,ee);if(fe.type==="normal"){if(re=ee.done?"completed":"suspendedYield",fe.arg===S)continue;return{value:fe.arg,done:ee.done}}fe.type==="throw"&&(re="completed",ee.method="throw",ee.arg=fe.arg)}}}function j(z,G){var ee=G.method,re=z.iterator[ee];if(re===void 0)return G.delegate=null,ee==="throw"&&z.iterator.return&&(G.method="return",G.arg=void 0,j(z,G),G.method==="throw")||ee!=="return"&&(G.method="throw",G.arg=new TypeError("The iterator does not provide a '"+ee+"' method")),S;var oe=_(re,z.iterator,G.arg);if(oe.type==="throw")return G.method="throw",G.arg=oe.arg,G.delegate=null,S;var pe=oe.arg;return pe?pe.done?(G[z.resultName]=pe.value,G.next=z.nextLoc,G.method!=="return"&&(G.method="next",G.arg=void 0),G.delegate=null,S):pe:(G.method="throw",G.arg=new TypeError("iterator result is not an object"),G.delegate=null,S)}function B(z){var G={tryLoc:z[0]};1 in z&&(G.catchLoc=z[1]),2 in z&&(G.finallyLoc=z[2],G.afterLoc=z[3]),this.tryEntries.push(G)}function H(z){var G=z.completion||{};G.type="normal",delete G.arg,z.completion=G}function K(z){this.tryEntries=[{tryLoc:"root"}],z.forEach(B,this),this.reset(!0)}function $(z){if(z){var G=z[u];if(G)return G.call(z);if(typeof z.next=="function")return z;if(!isNaN(z.length)){var ee=-1,re=function oe(){for(;++ee<z.length;)if(i.call(z,ee))return oe.value=z[ee],oe.done=!1,oe;return oe.value=void 0,oe.done=!0,oe};return re.next=re}}return{next:Z}}function Z(){return{value:void 0,done:!0}}return A.prototype=R,a(O,"constructor",{value:R,configurable:!0}),a(R,"constructor",{value:A,configurable:!0}),A.displayName=m(R,f,"GeneratorFunction"),e.isGeneratorFunction=function(z){var G=typeof z=="function"&&z.constructor;return!!G&&(G===A||(G.displayName||G.name)==="GeneratorFunction")},e.mark=function(z){return Object.setPrototypeOf?Object.setPrototypeOf(z,R):(z.__proto__=R,m(z,f,"GeneratorFunction")),z.prototype=Object.create(O),z},e.awrap=function(z){return{__await:z}},P(M.prototype),m(M.prototype,d,function(){return this}),e.AsyncIterator=M,e.async=function(z,G,ee,re,oe){oe===void 0&&(oe=Promise);var pe=new M(g(z,G,ee,re),oe);return e.isGeneratorFunction(G)?pe:pe.next().then(function(ue){return ue.done?ue.value:pe.next()})},P(O),m(O,f,"Generator"),m(O,u,function(){return this}),m(O,"toString",function(){return"[object Generator]"}),e.keys=function(z){var G=Object(z),ee=[];for(var re in G)ee.push(re);return ee.reverse(),function oe(){for(;ee.length;){var pe=ee.pop();if(pe in G)return oe.value=pe,oe.done=!1,oe}return oe.done=!0,oe}},e.values=$,K.prototype={constructor:K,reset:function(G){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(H),!G)for(var ee in this)ee.charAt(0)==="t"&&i.call(this,ee)&&!isNaN(+ee.slice(1))&&(this[ee]=void 0)},stop:function(){this.done=!0;var G=this.tryEntries[0].completion;if(G.type==="throw")throw G.arg;return this.rval},dispatchException:function(G){if(this.done)throw G;var ee=this;function re(se,ae){return ue.type="throw",ue.arg=G,ee.next=se,ae&&(ee.method="next",ee.arg=void 0),!!ae}for(var oe=this.tryEntries.length-1;oe>=0;--oe){var pe=this.tryEntries[oe],ue=pe.completion;if(pe.tryLoc==="root")return re("end");if(pe.tryLoc<=this.prev){var me=i.call(pe,"catchLoc"),fe=i.call(pe,"finallyLoc");if(me&&fe){if(this.prev<pe.catchLoc)return re(pe.catchLoc,!0);if(this.prev<pe.finallyLoc)return re(pe.finallyLoc)}else if(me){if(this.prev<pe.catchLoc)return re(pe.catchLoc,!0)}else{if(!fe)throw new Error("try statement without catch or finally");if(this.prev<pe.finallyLoc)return re(pe.finallyLoc)}}}},abrupt:function(G,ee){for(var re=this.tryEntries.length-1;re>=0;--re){var oe=this.tryEntries[re];if(oe.tryLoc<=this.prev&&i.call(oe,"finallyLoc")&&this.prev<oe.finallyLoc){var pe=oe;break}}pe&&(G==="break"||G==="continue")&&pe.tryLoc<=ee&&ee<=pe.finallyLoc&&(pe=null);var ue=pe?pe.completion:{};return ue.type=G,ue.arg=ee,pe?(this.method="next",this.next=pe.finallyLoc,S):this.complete(ue)},complete:function(G,ee){if(G.type==="throw")throw G.arg;return G.type==="break"||G.type==="continue"?this.next=G.arg:G.type==="return"?(this.rval=this.arg=G.arg,this.method="return",this.next="end"):G.type==="normal"&&ee&&(this.next=ee),S},finish:function(G){for(var ee=this.tryEntries.length-1;ee>=0;--ee){var re=this.tryEntries[ee];if(re.finallyLoc===G)return this.complete(re.completion,re.afterLoc),H(re),S}},catch:function(G){for(var ee=this.tryEntries.length-1;ee>=0;--ee){var re=this.tryEntries[ee];if(re.tryLoc===G){var oe=re.completion;if(oe.type==="throw"){var pe=oe.arg;H(re)}return pe}}throw new Error("illegal catch attempt")},delegateYield:function(G,ee,re){return this.delegate={iterator:$(G),resultName:ee,nextLoc:re},this.method==="next"&&(this.arg=void 0),S}},e}function nj(e,t,i,a,c,u,d){try{var f=e[u](d),m=f.value}catch(g){i(g);return}f.done?t(m):Promise.resolve(m).then(a,c)}function tp(e){return function(){var t=this,i=arguments;return new Promise(function(a,c){var u=e.apply(t,i);function d(m){nj(u,a,c,d,f,"next",m)}function f(m){nj(u,a,c,d,f,"throw",m)}d(void 0)})}}var Om=Ee({},Kee),$se=Om.version,Hse=Om.render,Wse=Om.unmountComponentAtNode,S_;try{var Gse=Number(($se||"").split(".")[0]);Gse>=18&&(S_=Om.createRoot)}catch{}function rj(e){var t=Om.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;t&&jn(t)==="object"&&(t.usingClientEntryPoint=e)}var EE="__rc_react_root__";function zse(e,t){rj(!0);var i=t[EE]||S_(t);rj(!1),i.render(e),t[EE]=i}function Kse(e,t){Hse(e,t)}function J6(e,t){if(S_){zse(e,t);return}Kse(e,t)}function Yse(e){return y1.apply(this,arguments)}function y1(){return y1=tp(ya().mark(function e(t){return ya().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",Promise.resolve().then(function(){var c;(c=t[EE])===null||c===void 0||c.unmount(),delete t[EE]}));case 1:case"end":return a.stop()}},e)})),y1.apply(this,arguments)}function qse(e){Wse(e)}function Xse(e){return S1.apply(this,arguments)}function S1(){return S1=tp(ya().mark(function e(t){return ya().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(S_===void 0){a.next=2;break}return a.abrupt("return",Yse(t));case 2:qse(t);case 3:case"end":return a.stop()}},e)})),S1.apply(this,arguments)}const C_=function(e){if(!e)return!1;if(e instanceof Element){if(e.offsetParent)return!0;if(e.getBBox){var t=e.getBBox(),i=t.width,a=t.height;if(i||a)return!0}if(e.getBoundingClientRect){var c=e.getBoundingClientRect(),u=c.width,d=c.height;if(u||d)return!0}}return!1},Jse=e=>{const{componentCls:t,colorPrimary:i}=e;return{[t]:{position:"absolute",background:"transparent",pointerEvents:"none",boxSizing:"border-box",color:`var(--wave-color, ${i})`,boxShadow:"0 0 0 0 currentcolor",opacity:.2,"&.wave-motion-appear":{transition:[`box-shadow 0.4s ${e.motionEaseOutCirc}`,`opacity 2s ${e.motionEaseOutCirc}`].join(","),"&-active":{boxShadow:"0 0 0 6px currentcolor",opacity:0}}}}},Qse=ws("Wave",e=>[Jse(e)]);function Zse(e){const t=(e||"").match(/rgba?\((\d*), (\d*), (\d*)(, [\d.]*)?\)/);return t&&t[1]&&t[2]&&t[3]?!(t[1]===t[2]&&t[2]===t[3]):!0}function Vb(e){return e&&e!=="#fff"&&e!=="#ffffff"&&e!=="rgb(255, 255, 255)"&&e!=="rgba(255, 255, 255, 1)"&&Zse(e)&&!/rgba\((?:\d*, ){3}0\)/.test(e)&&e!=="transparent"}function ece(e){const{borderTopColor:t,borderColor:i,backgroundColor:a}=getComputedStyle(e);return Vb(t)?t:Vb(i)?i:Vb(a)?a:null}function Bb(e){return Number.isNaN(e)?0:e}const tce=e=>{const{className:t,target:i}=e,a=y.useRef(null),[c,u]=y.useState(null),[d,f]=y.useState([]),[m,g]=y.useState(0),[_,S]=y.useState(0),[b,A]=y.useState(0),[R,w]=y.useState(0),[D,x]=y.useState(!1),O={left:m,top:_,width:b,height:R,borderRadius:d.map(M=>`${M}px`).join(" ")};c&&(O["--wave-color"]=c);function P(){const M=getComputedStyle(i);u(ece(i));const F=M.position==="static",{borderLeftWidth:j,borderTopWidth:B}=M;g(F?i.offsetLeft:Bb(-parseFloat(j))),S(F?i.offsetTop:Bb(-parseFloat(B))),A(i.offsetWidth),w(i.offsetHeight);const{borderTopLeftRadius:H,borderTopRightRadius:K,borderBottomLeftRadius:$,borderBottomRightRadius:Z}=M;f([H,K,Z,$].map(z=>Bb(parseFloat(z))))}return y.useEffect(()=>{if(i){const M=Wi(()=>{P(),x(!0)});let F;return typeof ResizeObserver<"u"&&(F=new ResizeObserver(P),F.observe(i)),()=>{Wi.cancel(M),F==null||F.disconnect()}}},[]),D?y.createElement(Yu,{visible:!0,motionAppear:!0,motionName:"wave-motion",motionDeadline:5e3,onAppearEnd:(M,F)=>{var j;if(F.deadline||F.propertyName==="opacity"){const B=(j=a.current)===null||j===void 0?void 0:j.parentElement;Xse(B).then(()=>{B==null||B.remove()})}return!1}},M=>{let{className:F}=M;return y.createElement("div",{ref:a,className:Ve(t,F),style:O})}):null};function nce(e,t){const i=document.createElement("div");i.style.position="absolute",i.style.left="0px",i.style.top="0px",e==null||e.insertBefore(i,e==null?void 0:e.firstChild),J6(y.createElement(tce,{target:e,className:t}),i)}function rce(e,t){function i(){const a=e.current;nce(a,t)}return i}const ice=e=>{const{children:t,disabled:i}=e,{getPrefixCls:a}=y.useContext(Hn),c=y.useRef(null),u=a("wave"),[,d]=Qse(u),f=rce(c,Ve(u,d));if(ut.useEffect(()=>{const g=c.current;if(!g||g.nodeType!==1||i)return;const _=S=>{S.target.tagName==="INPUT"||!C_(S.target)||!g.getAttribute||g.getAttribute("disabled")||g.disabled||g.className.includes("disabled")||g.className.includes("-leave")||f()};return g.addEventListener("click",_,!0),()=>{g.removeEventListener("click",_,!0)}},[i]),!ut.isValidElement(t))return t??null;const m=Xh(t)?Is(t.ref,c):c;return bs(t,{ref:m})},oce=ice;globalThis&&globalThis.__rest;const Q6=y.createContext(null),Tw=(e,t)=>{const i=y.useContext(Q6),a=y.useMemo(()=>{if(!i)return"";const{compactDirection:c,isFirstItem:u,isLastItem:d}=i,f=c==="vertical"?"-vertical-":"-";return Ve({[`${e}-compact${f}item`]:!0,[`${e}-compact${f}first-item`]:u,[`${e}-compact${f}last-item`]:d,[`${e}-compact${f}item-rtl`]:t==="rtl"})},[e,t,i]);return{compactSize:i==null?void 0:i.compactSize,compactDirection:i==null?void 0:i.compactDirection,compactItemClassnames:a}},C1=e=>{let{children:t}=e;return y.createElement(Q6.Provider,{value:null},t)},ace=y.forwardRef((e,t)=>{const{className:i,style:a,children:c,prefixCls:u}=e,d=Ve(`${u}-icon`,i);return ut.createElement("span",{ref:t,className:d,style:a},c)}),Z6=ace,ij=y.forwardRef((e,t)=>{let{prefixCls:i,className:a,style:c,iconClassName:u}=e;const d=Ve(`${i}-loading-icon`,a);return ut.createElement(Z6,{prefixCls:i,className:d,style:c,ref:t},ut.createElement(X6,{className:u}))}),$b=()=>({width:0,opacity:0,transform:"scale(0)"}),Hb=e=>({width:e.scrollWidth,opacity:1,transform:"scale(1)"}),sce=e=>{let{prefixCls:t,loading:i,existIcon:a,className:c,style:u}=e;const d=!!i;return a?ut.createElement(ij,{prefixCls:t,className:c,style:u}):ut.createElement(Yu,{visible:d,motionName:`${t}-loading-icon-motion`,removeOnLeave:!0,onAppearStart:$b,onAppearActive:Hb,onEnterStart:$b,onEnterActive:Hb,onLeaveStart:Hb,onLeaveActive:$b},(f,m)=>{let{className:g,style:_}=f;return ut.createElement(ij,{prefixCls:t,className:c,style:Object.assign(Object.assign({},u),_),ref:m,iconClassName:g})})},cce=sce;var lce=globalThis&&globalThis.__rest||function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(i[a[c]]=e[a[c]]);return i};const e5=y.createContext(void 0),uce=e=>{const{getPrefixCls:t,direction:i}=y.useContext(Hn),{prefixCls:a,size:c,className:u}=e,d=lce(e,["prefixCls","size","className"]),f=t("btn-group",a),[,,m]=Qh();let g="";switch(c){case"large":g="lg";break;case"small":g="sm";break}const _=Ve(f,{[`${f}-${g}`]:g,[`${f}-rtl`]:i==="rtl"},u,m);return y.createElement(e5.Provider,{value:c},y.createElement("div",Object.assign({},d,{className:_})))},dce=uce,oj=/^[\u4e00-\u9fa5]{2}$/,b1=oj.test.bind(oj);function hce(e){return typeof e=="string"}function Wb(e){return e==="text"||e==="link"}function pce(e,t){if(e==null)return;const i=t?" ":"";return typeof e!="string"&&typeof e!="number"&&hce(e.type)&&b1(e.props.children)?bs(e,{children:e.props.children.split("").join(i)}):typeof e=="string"?b1(e)?ut.createElement("span",null,e.split("").join(i)):ut.createElement("span",null,e):K6(e)?ut.createElement("span",null,e):e}function fce(e,t){let i=!1;const a=[];return ut.Children.forEach(e,c=>{const u=typeof c,d=u==="string"||u==="number";if(i&&d){const f=a.length-1,m=a[f];a[f]=`${m}${c}`}else a.push(c);i=d}),ut.Children.map(a,c=>pce(c,t))}function mce(e,t,i){const{focusElCls:a,focus:c,borderElCls:u}=i,d=u?"> *":"",f=["hover",c?"focus":null,"active"].filter(Boolean).map(m=>`&:${m} ${d}`).join(",");return{[`&-item:not(${t}-last-item)`]:{marginInlineEnd:-e.lineWidth},"&-item":Object.assign(Object.assign({[f]:{zIndex:2}},a?{[`&${a}`]:{zIndex:2}}:{}),{[`&[disabled] ${d}`]:{zIndex:0}})}}function gce(e,t,i){const{borderElCls:a}=i,c=a?`> ${a}`:"";return{[`&-item:not(${t}-first-item):not(${t}-last-item) ${c}`]:{borderRadius:0},[`&-item:not(${t}-last-item)${t}-first-item`]:{[`& ${c}, &${e}-sm ${c}, &${e}-lg ${c}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&-item:not(${t}-first-item)${t}-last-item`]:{[`& ${c}, &${e}-sm ${c}, &${e}-lg ${c}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}}}function t5(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{focus:!0};const{componentCls:i}=e,a=`${i}-compact`;return{[a]:Object.assign(Object.assign({},mce(e,a,t)),gce(i,a,t))}}function vce(e,t){return{[`&-item:not(${t}-last-item)`]:{marginBottom:-e.lineWidth},"&-item":{"&:hover,&:focus,&:active":{zIndex:2},"&[disabled]":{zIndex:0}}}}function Ece(e,t){return{[`&-item:not(${t}-first-item):not(${t}-last-item)`]:{borderRadius:0},[`&-item${t}-first-item:not(${t}-last-item)`]:{[`&, &${e}-sm, &${e}-lg`]:{borderEndEndRadius:0,borderEndStartRadius:0}},[`&-item${t}-last-item:not(${t}-first-item)`]:{[`&, &${e}-sm, &${e}-lg`]:{borderStartStartRadius:0,borderStartEndRadius:0}}}}function _ce(e){const t=`${e.componentCls}-compact-vertical`;return{[t]:Object.assign(Object.assign({},vce(e,t)),Ece(e.componentCls,t))}}const aj=(e,t)=>({[`> span, > ${e}`]:{"&:not(:last-child)":{[`&, & > ${e}`]:{"&:not(:disabled)":{borderInlineEndColor:t}}},"&:not(:first-child)":{[`&, & > ${e}`]:{"&:not(:disabled)":{borderInlineStartColor:t}}}}}),yce=e=>{const{componentCls:t,fontSize:i,lineWidth:a,colorPrimaryHover:c,colorErrorHover:u}=e;return{[`${t}-group`]:[{position:"relative",display:"inline-flex",[`> span, > ${t}`]:{"&:not(:last-child)":{[`&, & > ${t}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},"&:not(:first-child)":{marginInlineStart:-a,[`&, & > ${t}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}},[t]:{position:"relative",zIndex:1,"&:hover,\n          &:focus,\n          &:active":{zIndex:2},"&[disabled]":{zIndex:0}},[`${t}-icon-only`]:{fontSize:i}},aj(`${t}-primary`,c),aj(`${t}-danger`,u)]}},Sce=yce,Cce=e=>{const{componentCls:t,iconCls:i,buttonFontWeight:a}=e;return{[t]:{outline:"none",position:"relative",display:"inline-block",fontWeight:a,whiteSpace:"nowrap",textAlign:"center",backgroundImage:"none",backgroundColor:"transparent",border:`${e.lineWidth}px ${e.lineType} transparent`,cursor:"pointer",transition:`all ${e.motionDurationMid} ${e.motionEaseInOut}`,userSelect:"none",touchAction:"manipulation",lineHeight:e.lineHeight,color:e.colorText,"&:disabled > *":{pointerEvents:"none"},"> span":{display:"inline-block"},[`${t}-icon`]:{lineHeight:0},[`> ${i} + span, > span + ${i}`]:{marginInlineStart:e.marginXS},[`&:not(${t}-icon-only) > ${t}-icon`]:{[`&${t}-loading-icon, &:not(:last-child)`]:{marginInlineEnd:e.marginXS}},"> a":{color:"currentColor"},"&:not(:disabled)":Object.assign({},Eie(e)),[`&-icon-only${t}-compact-item`]:{flex:"none"},[`&-compact-item${t}-primary`]:{[`&:not([disabled]) + ${t}-compact-item${t}-primary:not([disabled])`]:{position:"relative","&:before":{position:"absolute",top:-e.lineWidth,insetInlineStart:-e.lineWidth,display:"inline-block",width:e.lineWidth,height:`calc(100% + ${e.lineWidth*2}px)`,backgroundColor:e.colorPrimaryHover,content:'""'}}},"&-compact-vertical-item":{[`&${t}-primary`]:{[`&:not([disabled]) + ${t}-compact-vertical-item${t}-primary:not([disabled])`]:{position:"relative","&:before":{position:"absolute",top:-e.lineWidth,insetInlineStart:-e.lineWidth,display:"inline-block",width:`calc(100% + ${e.lineWidth*2}px)`,height:e.lineWidth,backgroundColor:e.colorPrimaryHover,content:'""'}}}}}}},Pc=(e,t,i)=>({[`&:not(:disabled):not(${e}-disabled)`]:{"&:hover":t,"&:active":i}}),bce=e=>({minWidth:e.controlHeight,paddingInlineStart:0,paddingInlineEnd:0,borderRadius:"50%"}),Tce=e=>({borderRadius:e.controlHeight,paddingInlineStart:e.controlHeight/2,paddingInlineEnd:e.controlHeight/2}),Rce=e=>({cursor:"not-allowed",borderColor:e.colorBorder,color:e.colorTextDisabled,backgroundColor:e.colorBgContainerDisabled,boxShadow:"none"}),_E=(e,t,i,a,c,u,d)=>({[`&${e}-background-ghost`]:Object.assign(Object.assign({color:t||void 0,backgroundColor:"transparent",borderColor:i||void 0,boxShadow:"none"},Pc(e,Object.assign({backgroundColor:"transparent"},u),Object.assign({backgroundColor:"transparent"},d))),{"&:disabled":{cursor:"not-allowed",color:a||void 0,borderColor:c||void 0}})}),Rw=e=>({[`&:disabled, &${e.componentCls}-disabled`]:Object.assign({},Rce(e))}),n5=e=>Object.assign({},Rw(e)),yE=e=>({[`&:disabled, &${e.componentCls}-disabled`]:{cursor:"not-allowed",color:e.colorTextDisabled}}),r5=e=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},n5(e)),{backgroundColor:e.colorBgContainer,borderColor:e.colorBorder,boxShadow:`0 ${e.controlOutlineWidth}px 0 ${e.controlTmpOutline}`}),Pc(e.componentCls,{color:e.colorPrimaryHover,borderColor:e.colorPrimaryHover},{color:e.colorPrimaryActive,borderColor:e.colorPrimaryActive})),_E(e.componentCls,e.colorBgContainer,e.colorBgContainer,e.colorTextDisabled,e.colorBorder)),{[`&${e.componentCls}-dangerous`]:Object.assign(Object.assign(Object.assign({color:e.colorError,borderColor:e.colorError},Pc(e.componentCls,{color:e.colorErrorHover,borderColor:e.colorErrorBorderHover},{color:e.colorErrorActive,borderColor:e.colorErrorActive})),_E(e.componentCls,e.colorError,e.colorError,e.colorTextDisabled,e.colorBorder)),Rw(e))}),Ice=e=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},n5(e)),{color:e.colorTextLightSolid,backgroundColor:e.colorPrimary,boxShadow:`0 ${e.controlOutlineWidth}px 0 ${e.controlOutline}`}),Pc(e.componentCls,{color:e.colorTextLightSolid,backgroundColor:e.colorPrimaryHover},{color:e.colorTextLightSolid,backgroundColor:e.colorPrimaryActive})),_E(e.componentCls,e.colorPrimary,e.colorPrimary,e.colorTextDisabled,e.colorBorder,{color:e.colorPrimaryHover,borderColor:e.colorPrimaryHover},{color:e.colorPrimaryActive,borderColor:e.colorPrimaryActive})),{[`&${e.componentCls}-dangerous`]:Object.assign(Object.assign(Object.assign({backgroundColor:e.colorError,boxShadow:`0 ${e.controlOutlineWidth}px 0 ${e.colorErrorOutline}`},Pc(e.componentCls,{backgroundColor:e.colorErrorHover},{backgroundColor:e.colorErrorActive})),_E(e.componentCls,e.colorError,e.colorError,e.colorTextDisabled,e.colorBorder,{color:e.colorErrorHover,borderColor:e.colorErrorHover},{color:e.colorErrorActive,borderColor:e.colorErrorActive})),Rw(e))}),wce=e=>Object.assign(Object.assign({},r5(e)),{borderStyle:"dashed"}),Oce=e=>Object.assign(Object.assign(Object.assign({color:e.colorLink},Pc(e.componentCls,{color:e.colorLinkHover},{color:e.colorLinkActive})),yE(e)),{[`&${e.componentCls}-dangerous`]:Object.assign(Object.assign({color:e.colorError},Pc(e.componentCls,{color:e.colorErrorHover},{color:e.colorErrorActive})),yE(e))}),Ace=e=>Object.assign(Object.assign(Object.assign({},Pc(e.componentCls,{color:e.colorText,backgroundColor:e.colorBgTextHover},{color:e.colorText,backgroundColor:e.colorBgTextActive})),yE(e)),{[`&${e.componentCls}-dangerous`]:Object.assign(Object.assign({color:e.colorError},yE(e)),Pc(e.componentCls,{color:e.colorErrorHover,backgroundColor:e.colorErrorBg},{color:e.colorErrorHover,backgroundColor:e.colorErrorBg}))}),Nce=e=>{const{componentCls:t}=e;return{[`${t}-default`]:r5(e),[`${t}-primary`]:Ice(e),[`${t}-dashed`]:wce(e),[`${t}-link`]:Oce(e),[`${t}-text`]:Ace(e)}},Iw=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const{componentCls:i,controlHeight:a,fontSize:c,lineHeight:u,lineWidth:d,borderRadius:f,buttonPaddingHorizontal:m,iconCls:g}=e,_=Math.max(0,(a-c*u)/2-d),S=m-d,b=`${i}-icon-only`;return[{[`${i}${t}`]:{fontSize:c,height:a,padding:`${_}px ${S}px`,borderRadius:f,[`&${b}`]:{width:a,paddingInlineStart:0,paddingInlineEnd:0,[`&${i}-round`]:{width:"auto"},[g]:{fontSize:e.buttonIconOnlyFontSize}},[`&${i}-loading`]:{opacity:e.opacityLoading,cursor:"default"},[`${i}-loading-icon`]:{transition:`width ${e.motionDurationSlow} ${e.motionEaseInOut}, opacity ${e.motionDurationSlow} ${e.motionEaseInOut}`}}},{[`${i}${i}-circle${t}`]:bce(e)},{[`${i}${i}-round${t}`]:Tce(e)}]},xce=e=>Iw(e),Pce=e=>{const t=Ki(e,{controlHeight:e.controlHeightSM,padding:e.paddingXS,buttonPaddingHorizontal:8,borderRadius:e.borderRadiusSM,buttonIconOnlyFontSize:e.fontSizeLG-2});return Iw(t,`${e.componentCls}-sm`)},Dce=e=>{const t=Ki(e,{controlHeight:e.controlHeightLG,fontSize:e.fontSizeLG,borderRadius:e.borderRadiusLG,buttonIconOnlyFontSize:e.fontSizeLG+2});return Iw(t,`${e.componentCls}-lg`)},kce=e=>{const{componentCls:t}=e;return{[t]:{[`&${t}-block`]:{width:"100%"}}}},Lce=ws("Button",e=>{const{controlTmpOutline:t,paddingContentHorizontal:i}=e,a=Ki(e,{colorOutlineDefault:t,buttonPaddingHorizontal:i,buttonIconOnlyFontSize:e.fontSizeLG,buttonFontWeight:400});return[Cce(a),Pce(a),xce(a),Dce(a),kce(a),Nce(a),Sce(a),t5(e),_ce(e)]});var Mce=globalThis&&globalThis.__rest||function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(i[a[c]]=e[a[c]]);return i};function Uce(e){if(typeof e=="object"&&e){const t=e==null?void 0:e.delay;return{loading:!1,delay:!Number.isNaN(t)&&typeof t=="number"?t:0}}return{loading:!!e,delay:0}}const jce=(e,t)=>{var i,a;const{loading:c=!1,prefixCls:u,type:d="default",danger:f,shape:m="default",size:g,styles:_,disabled:S,className:b,rootClassName:A,children:R,icon:w,ghost:D=!1,block:x=!1,htmlType:O="button",classNames:P,style:M={}}=e,F=Mce(e,["loading","prefixCls","type","danger","shape","size","styles","disabled","className","rootClassName","children","icon","ghost","block","htmlType","classNames","style"]),{getPrefixCls:j,autoInsertSpaceInButton:B,direction:H,button:K}=y.useContext(Hn),$=j("btn",u),[Z,z]=Lce($),G=y.useContext(Rm),ee=S??G,re=y.useContext(e5),oe=y.useMemo(()=>Uce(c),[c]),[pe,ue]=y.useState(oe.loading),[me,fe]=y.useState(!1),ae=Is(t,y.createRef()),de=y.Children.count(R)===1&&!w&&!Wb(d);y.useEffect(()=>{let Ge=null;oe.delay>0?Ge=setTimeout(()=>{Ge=null,ue(!0)},oe.delay):ue(oe.loading);function nt(){Ge&&(clearTimeout(Ge),Ge=null)}return nt},[oe]),y.useEffect(()=>{if(!ae||!ae.current||B===!1)return;const Ge=ae.current.textContent;de&&b1(Ge)?me||fe(!0):me&&fe(!1)},[ae]);const ce=Ge=>{const{onClick:nt}=e;if(pe||ee){Ge.preventDefault();return}nt==null||nt(Ge)},we=B!==!1,{compactSize:Ie,compactItemClassnames:$e}=Tw($,H),ke={large:"lg",small:"sm",middle:void 0},mt=Zh(Ge=>{var nt,gt;return(gt=(nt=g??Ie)!==null&&nt!==void 0?nt:re)!==null&&gt!==void 0?gt:Ge}),vt=mt&&ke[mt]||"",st=pe?"loading":w,rt=Yo(F,["navigate"]),ft=Ve($,z,{[`${$}-${m}`]:m!=="default"&&m,[`${$}-${d}`]:d,[`${$}-${vt}`]:vt,[`${$}-icon-only`]:!R&&R!==0&&!!st,[`${$}-background-ghost`]:D&&!Wb(d),[`${$}-loading`]:pe,[`${$}-two-chinese-chars`]:me&&we&&!pe,[`${$}-block`]:x,[`${$}-dangerous`]:!!f,[`${$}-rtl`]:H==="rtl"},$e,b,A,K==null?void 0:K.className),Ye=Object.assign(Object.assign({},K==null?void 0:K.style),M),St=Ve(P==null?void 0:P.icon,(i=K==null?void 0:K.classNames)===null||i===void 0?void 0:i.icon),kt=Object.assign(Object.assign({},(_==null?void 0:_.icon)||{}),((a=K==null?void 0:K.styles)===null||a===void 0?void 0:a.icon)||{}),Lt=w&&!pe?ut.createElement(Z6,{prefixCls:$,className:St,style:kt},w):ut.createElement(cce,{existIcon:!!w,prefixCls:$,loading:!!pe}),Xe=R||R===0?fce(R,de&&we):null;if(rt.href!==void 0)return Z(ut.createElement("a",Object.assign({},rt,{className:Ve(ft,{[`${$}-disabled`]:ee}),style:Ye,onClick:ce,ref:ae}),Lt,Xe));let qe=ut.createElement("button",Object.assign({},F,{type:O,className:ft,style:Ye,onClick:ce,disabled:ee,ref:ae}),Lt,Xe);return Wb(d)||(qe=ut.createElement(oce,{disabled:!!pe},qe)),Z(qe)},ww=y.forwardRef(jce);ww.Group=dce;ww.__ANT_BUTTON=!0;const ci=ww,Gb=()=>({height:0,opacity:0}),sj=e=>{const{scrollHeight:t}=e;return{height:t,opacity:1}},Fce=e=>({height:e?e.offsetHeight:0}),zb=(e,t)=>(t==null?void 0:t.deadline)===!0||t.propertyName==="height",Vce=function(){return{motionName:`${arguments.length>0&&arguments[0]!==void 0?arguments[0]:"ant"}-motion-collapse`,onAppearStart:Gb,onEnterStart:Gb,onAppearActive:sj,onEnterActive:sj,onLeaveStart:Fce,onLeaveActive:Gb,onAppearEnd:zb,onEnterEnd:zb,onLeaveEnd:zb,motionDeadline:500}},Bce=(e,t,i)=>i!==void 0?i:`${e}-${t}`,T1=Vce;var i5=y.createContext(null),cj=[];function $ce(e,t){var i=y.useState(function(){if(!zo())return null;var R=document.createElement("div");return R}),a=Pe(i,1),c=a[0],u=y.useRef(!1),d=y.useContext(i5),f=y.useState(cj),m=Pe(f,2),g=m[0],_=m[1],S=d||(u.current?void 0:function(R){_(function(w){var D=[R].concat(Qe(w));return D})});function b(){c.parentElement||document.body.appendChild(c),u.current=!0}function A(){var R;(R=c.parentElement)===null||R===void 0||R.removeChild(c),u.current=!1}return Or(function(){return e?d?d(b):b():A(),A},[e]),Or(function(){g.length&&(g.forEach(function(R){return R()}),_(cj))},[g]),[c,S]}var Kb;function Hce(e){if(typeof document>"u")return 0;if(e||Kb===void 0){var t=document.createElement("div");t.style.width="100%",t.style.height="200px";var i=document.createElement("div"),a=i.style;a.position="absolute",a.top="0",a.left="0",a.pointerEvents="none",a.visibility="hidden",a.width="200px",a.height="150px",a.overflow="hidden",i.appendChild(t),document.body.appendChild(i);var c=t.offsetWidth;i.style.overflow="scroll";var u=t.offsetWidth;c===u&&(u=i.clientWidth),document.body.removeChild(i),Kb=c-u}return Kb}function Wce(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth}var Gce="rc-util-locker-".concat(Date.now()),lj=0;function zce(e){var t=!!e,i=y.useState(function(){return lj+=1,"".concat(Gce,"_").concat(lj)}),a=Pe(i,1),c=a[0];Or(function(){if(t){var u=Hce(),d=Wce();am(`
html body {
  overflow-y: hidden;
  `.concat(d?"width: calc(100% - ".concat(u,"px);"):"",`
}`),c)}else uE(c);return function(){uE(c)}},[t,c])}var uj=!1;function Kce(e){return typeof e=="boolean"&&(uj=e),uj}var dj=function(t){return t===!1?!1:!zo()||!t?null:typeof t=="string"?document.querySelector(t):typeof t=="function"?t():t},o5=y.forwardRef(function(e,t){var i=e.open,a=e.autoLock,c=e.getContainer;e.debug;var u=e.autoDestroy,d=u===void 0?!0:u,f=e.children,m=y.useState(i),g=Pe(m,2),_=g[0],S=g[1],b=_||i;y.useEffect(function(){(d||i)&&S(i)},[i,d]);var A=y.useState(function(){return dj(c)}),R=Pe(A,2),w=R[0],D=R[1];y.useEffect(function(){var Z=dj(c);D(Z??null)});var x=$ce(b&&!w),O=Pe(x,2),P=O[0],M=O[1],F=w??P;zce(a&&i&&zo()&&(F===P||F===document.body));var j=null;if(f&&Xh(f)&&t){var B=f;j=B.ref}var H=tw(j,t);if(!b||!zo()||w===void 0)return null;var K=F===!1||Kce(),$=f;return t&&($=y.cloneElement(f,{ref:H})),y.createElement(i5.Provider,{value:M},K?$:Hl.createPortal($,F))});function Yce(){var e=Ee({},xh);return e.useId}var hj=0;function qce(e){var t=y.useState("ssr-id"),i=Pe(t,2),a=i[0],c=i[1],u=Yce(),d=u==null?void 0:u();return y.useEffect(function(){if(!u){var f=hj;hj+=1,c("rc_unique_".concat(f))}},[]),e||d||a}var a5=function(t){if(zo()&&window.document.documentElement){var i=Array.isArray(t)?t:[t],a=window.document.documentElement;return i.some(function(c){return c in a.style})}return!1},Xce=function(t,i){if(!a5(t))return!1;var a=document.createElement("div"),c=a.style[t];return a.style[t]=i,a.style[t]!==c};function pj(e,t){return!Array.isArray(e)&&t!==void 0?Xce(e,t):a5(e)}const Jce=()=>zo()&&window.document.documentElement;let qg;const Qce=()=>{if(!Jce())return!1;if(qg!==void 0)return qg;const e=document.createElement("div");return e.style.display="flex",e.style.flexDirection="column",e.style.rowGap="1px",e.appendChild(document.createElement("div")),e.appendChild(document.createElement("div")),document.body.appendChild(e),qg=e.scrollHeight===1,document.body.removeChild(e),qg};var Nu="RC_FORM_INTERNAL_HOOKS",qn=function(){Wo(!1,"Can not find FormContext. Please make sure you wrap Field under Form.")},$u=y.createContext({getFieldValue:qn,getFieldsValue:qn,getFieldError:qn,getFieldWarning:qn,getFieldsError:qn,isFieldsTouched:qn,isFieldTouched:qn,isFieldValidating:qn,isFieldsValidating:qn,resetFields:qn,setFields:qn,setFieldValue:qn,setFieldsValue:qn,validateFields:qn,submit:qn,getInternalHooks:function(){return qn(),{dispatch:qn,initEntityValue:qn,registerField:qn,useSubscribe:qn,setInitialValues:qn,destroyForm:qn,setCallbacks:qn,registerWatch:qn,getFields:qn,setValidateMessages:qn,setPreserve:qn,getInitialValue:qn}}}),lm=y.createContext(null);function R1(e){return e==null?[]:Array.isArray(e)?e:[e]}function Zce(e){return e&&!!e._init}function xu(){return xu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},xu.apply(this,arguments)}function ele(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,um(e,t)}function I1(e){return I1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},I1(e)}function um(e,t){return um=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,c){return a.__proto__=c,a},um(e,t)}function tle(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Iv(e,t,i){return tle()?Iv=Reflect.construct.bind():Iv=function(c,u,d){var f=[null];f.push.apply(f,u);var m=Function.bind.apply(c,f),g=new m;return d&&um(g,d.prototype),g},Iv.apply(null,arguments)}function nle(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function w1(e){var t=typeof Map=="function"?new Map:void 0;return w1=function(a){if(a===null||!nle(a))return a;if(typeof a!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t<"u"){if(t.has(a))return t.get(a);t.set(a,c)}function c(){return Iv(a,arguments,I1(this).constructor)}return c.prototype=Object.create(a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),um(c,a)},w1(e)}var rle=/%[sdj%]/g,ile=function(){};typeof process<"u"&&process.env;function O1(e){if(!e||!e.length)return null;var t={};return e.forEach(function(i){var a=i.field;t[a]=t[a]||[],t[a].push(i)}),t}function ga(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),a=1;a<t;a++)i[a-1]=arguments[a];var c=0,u=i.length;if(typeof e=="function")return e.apply(null,i);if(typeof e=="string"){var d=e.replace(rle,function(f){if(f==="%%")return"%";if(c>=u)return f;switch(f){case"%s":return String(i[c++]);case"%d":return Number(i[c++]);case"%j":try{return JSON.stringify(i[c++])}catch{return"[Circular]"}break;default:return f}});return d}return e}function ole(e){return e==="string"||e==="url"||e==="hex"||e==="email"||e==="date"||e==="pattern"}function _i(e,t){return!!(e==null||t==="array"&&Array.isArray(e)&&!e.length||ole(t)&&typeof e=="string"&&!e)}function ale(e,t,i){var a=[],c=0,u=e.length;function d(f){a.push.apply(a,f||[]),c++,c===u&&i(a)}e.forEach(function(f){t(f,d)})}function fj(e,t,i){var a=0,c=e.length;function u(d){if(d&&d.length){i(d);return}var f=a;a=a+1,f<c?t(e[f],u):i([])}u([])}function sle(e){var t=[];return Object.keys(e).forEach(function(i){t.push.apply(t,e[i]||[])}),t}var mj=function(e){ele(t,e);function t(i,a){var c;return c=e.call(this,"Async Validation Error")||this,c.errors=i,c.fields=a,c}return t}(w1(Error));function cle(e,t,i,a,c){if(t.first){var u=new Promise(function(b,A){var R=function(x){return a(x),x.length?A(new mj(x,O1(x))):b(c)},w=sle(e);fj(w,i,R)});return u.catch(function(b){return b}),u}var d=t.firstFields===!0?Object.keys(e):t.firstFields||[],f=Object.keys(e),m=f.length,g=0,_=[],S=new Promise(function(b,A){var R=function(D){if(_.push.apply(_,D),g++,g===m)return a(_),_.length?A(new mj(_,O1(_))):b(c)};f.length||(a(_),b(c)),f.forEach(function(w){var D=e[w];d.indexOf(w)!==-1?fj(D,i,R):ale(D,i,R)})});return S.catch(function(b){return b}),S}function lle(e){return!!(e&&e.message!==void 0)}function ule(e,t){for(var i=e,a=0;a<t.length;a++){if(i==null)return i;i=i[t[a]]}return i}function gj(e,t){return function(i){var a;return e.fullFields?a=ule(t,e.fullFields):a=t[i.field||e.fullField],lle(i)?(i.field=i.field||e.fullField,i.fieldValue=a,i):{message:typeof i=="function"?i():i,fieldValue:a,field:i.field||e.fullField}}}function vj(e,t){if(t){for(var i in t)if(t.hasOwnProperty(i)){var a=t[i];typeof a=="object"&&typeof e[i]=="object"?e[i]=xu({},e[i],a):e[i]=a}}return e}var s5=function(t,i,a,c,u,d){t.required&&(!a.hasOwnProperty(t.field)||_i(i,d||t.type))&&c.push(ga(u.messages.required,t.fullField))},dle=function(t,i,a,c,u){(/^\s+$/.test(i)||i==="")&&c.push(ga(u.messages.whitespace,t.fullField))},Xg,hle=function(){if(Xg)return Xg;var e="[a-fA-F\\d:]",t=function(M){return M&&M.includeBoundaries?"(?:(?<=\\s|^)(?="+e+")|(?<="+e+")(?=\\s|$))":""},i="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",a="[a-fA-F\\d]{1,4}",c=(`
(?:
(?:`+a+":){7}(?:"+a+`|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:`+a+":){6}(?:"+i+"|:"+a+`|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:`+a+":){5}(?::"+i+"|(?::"+a+`){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:`+a+":){4}(?:(?::"+a+"){0,1}:"+i+"|(?::"+a+`){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:`+a+":){3}(?:(?::"+a+"){0,2}:"+i+"|(?::"+a+`){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:`+a+":){2}(?:(?::"+a+"){0,3}:"+i+"|(?::"+a+`){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:`+a+":){1}(?:(?::"+a+"){0,4}:"+i+"|(?::"+a+`){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::`+a+"){0,5}:"+i+"|(?::"+a+`){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`).replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),u=new RegExp("(?:^"+i+"$)|(?:^"+c+"$)"),d=new RegExp("^"+i+"$"),f=new RegExp("^"+c+"$"),m=function(M){return M&&M.exact?u:new RegExp("(?:"+t(M)+i+t(M)+")|(?:"+t(M)+c+t(M)+")","g")};m.v4=function(P){return P&&P.exact?d:new RegExp(""+t(P)+i+t(P),"g")},m.v6=function(P){return P&&P.exact?f:new RegExp(""+t(P)+c+t(P),"g")};var g="(?:(?:[a-z]+:)?//)",_="(?:\\S+(?::\\S*)?@)?",S=m.v4().source,b=m.v6().source,A="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",R="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",w="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",D="(?::\\d{2,5})?",x='(?:[/?#][^\\s"]*)?',O="(?:"+g+"|www\\.)"+_+"(?:localhost|"+S+"|"+b+"|"+A+R+w+")"+D+x;return Xg=new RegExp("(?:^"+O+"$)","i"),Xg},Ej={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},Sf={integer:function(t){return Sf.number(t)&&parseInt(t,10)===t},float:function(t){return Sf.number(t)&&!Sf.integer(t)},array:function(t){return Array.isArray(t)},regexp:function(t){if(t instanceof RegExp)return!0;try{return!!new RegExp(t)}catch{return!1}},date:function(t){return typeof t.getTime=="function"&&typeof t.getMonth=="function"&&typeof t.getYear=="function"&&!isNaN(t.getTime())},number:function(t){return isNaN(t)?!1:typeof t=="number"},object:function(t){return typeof t=="object"&&!Sf.array(t)},method:function(t){return typeof t=="function"},email:function(t){return typeof t=="string"&&t.length<=320&&!!t.match(Ej.email)},url:function(t){return typeof t=="string"&&t.length<=2048&&!!t.match(hle())},hex:function(t){return typeof t=="string"&&!!t.match(Ej.hex)}},ple=function(t,i,a,c,u){if(t.required&&i===void 0){s5(t,i,a,c,u);return}var d=["integer","float","array","regexp","object","method","email","number","date","url","hex"],f=t.type;d.indexOf(f)>-1?Sf[f](i)||c.push(ga(u.messages.types[f],t.fullField,t.type)):f&&typeof i!==t.type&&c.push(ga(u.messages.types[f],t.fullField,t.type))},fle=function(t,i,a,c,u){var d=typeof t.len=="number",f=typeof t.min=="number",m=typeof t.max=="number",g=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,_=i,S=null,b=typeof i=="number",A=typeof i=="string",R=Array.isArray(i);if(b?S="number":A?S="string":R&&(S="array"),!S)return!1;R&&(_=i.length),A&&(_=i.replace(g,"_").length),d?_!==t.len&&c.push(ga(u.messages[S].len,t.fullField,t.len)):f&&!m&&_<t.min?c.push(ga(u.messages[S].min,t.fullField,t.min)):m&&!f&&_>t.max?c.push(ga(u.messages[S].max,t.fullField,t.max)):f&&m&&(_<t.min||_>t.max)&&c.push(ga(u.messages[S].range,t.fullField,t.min,t.max))},Yd="enum",mle=function(t,i,a,c,u){t[Yd]=Array.isArray(t[Yd])?t[Yd]:[],t[Yd].indexOf(i)===-1&&c.push(ga(u.messages[Yd],t.fullField,t[Yd].join(", ")))},gle=function(t,i,a,c,u){if(t.pattern){if(t.pattern instanceof RegExp)t.pattern.lastIndex=0,t.pattern.test(i)||c.push(ga(u.messages.pattern.mismatch,t.fullField,i,t.pattern));else if(typeof t.pattern=="string"){var d=new RegExp(t.pattern);d.test(i)||c.push(ga(u.messages.pattern.mismatch,t.fullField,i,t.pattern))}}},dn={required:s5,whitespace:dle,type:ple,range:fle,enum:mle,pattern:gle},vle=function(t,i,a,c,u){var d=[],f=t.required||!t.required&&c.hasOwnProperty(t.field);if(f){if(_i(i,"string")&&!t.required)return a();dn.required(t,i,c,d,u,"string"),_i(i,"string")||(dn.type(t,i,c,d,u),dn.range(t,i,c,d,u),dn.pattern(t,i,c,d,u),t.whitespace===!0&&dn.whitespace(t,i,c,d,u))}a(d)},Ele=function(t,i,a,c,u){var d=[],f=t.required||!t.required&&c.hasOwnProperty(t.field);if(f){if(_i(i)&&!t.required)return a();dn.required(t,i,c,d,u),i!==void 0&&dn.type(t,i,c,d,u)}a(d)},_le=function(t,i,a,c,u){var d=[],f=t.required||!t.required&&c.hasOwnProperty(t.field);if(f){if(i===""&&(i=void 0),_i(i)&&!t.required)return a();dn.required(t,i,c,d,u),i!==void 0&&(dn.type(t,i,c,d,u),dn.range(t,i,c,d,u))}a(d)},yle=function(t,i,a,c,u){var d=[],f=t.required||!t.required&&c.hasOwnProperty(t.field);if(f){if(_i(i)&&!t.required)return a();dn.required(t,i,c,d,u),i!==void 0&&dn.type(t,i,c,d,u)}a(d)},Sle=function(t,i,a,c,u){var d=[],f=t.required||!t.required&&c.hasOwnProperty(t.field);if(f){if(_i(i)&&!t.required)return a();dn.required(t,i,c,d,u),_i(i)||dn.type(t,i,c,d,u)}a(d)},Cle=function(t,i,a,c,u){var d=[],f=t.required||!t.required&&c.hasOwnProperty(t.field);if(f){if(_i(i)&&!t.required)return a();dn.required(t,i,c,d,u),i!==void 0&&(dn.type(t,i,c,d,u),dn.range(t,i,c,d,u))}a(d)},ble=function(t,i,a,c,u){var d=[],f=t.required||!t.required&&c.hasOwnProperty(t.field);if(f){if(_i(i)&&!t.required)return a();dn.required(t,i,c,d,u),i!==void 0&&(dn.type(t,i,c,d,u),dn.range(t,i,c,d,u))}a(d)},Tle=function(t,i,a,c,u){var d=[],f=t.required||!t.required&&c.hasOwnProperty(t.field);if(f){if(i==null&&!t.required)return a();dn.required(t,i,c,d,u,"array"),i!=null&&(dn.type(t,i,c,d,u),dn.range(t,i,c,d,u))}a(d)},Rle=function(t,i,a,c,u){var d=[],f=t.required||!t.required&&c.hasOwnProperty(t.field);if(f){if(_i(i)&&!t.required)return a();dn.required(t,i,c,d,u),i!==void 0&&dn.type(t,i,c,d,u)}a(d)},Ile="enum",wle=function(t,i,a,c,u){var d=[],f=t.required||!t.required&&c.hasOwnProperty(t.field);if(f){if(_i(i)&&!t.required)return a();dn.required(t,i,c,d,u),i!==void 0&&dn[Ile](t,i,c,d,u)}a(d)},Ole=function(t,i,a,c,u){var d=[],f=t.required||!t.required&&c.hasOwnProperty(t.field);if(f){if(_i(i,"string")&&!t.required)return a();dn.required(t,i,c,d,u),_i(i,"string")||dn.pattern(t,i,c,d,u)}a(d)},Ale=function(t,i,a,c,u){var d=[],f=t.required||!t.required&&c.hasOwnProperty(t.field);if(f){if(_i(i,"date")&&!t.required)return a();if(dn.required(t,i,c,d,u),!_i(i,"date")){var m;i instanceof Date?m=i:m=new Date(i),dn.type(t,m,c,d,u),m&&dn.range(t,m.getTime(),c,d,u)}}a(d)},Nle=function(t,i,a,c,u){var d=[],f=Array.isArray(i)?"array":typeof i;dn.required(t,i,c,d,u,f),a(d)},Yb=function(t,i,a,c,u){var d=t.type,f=[],m=t.required||!t.required&&c.hasOwnProperty(t.field);if(m){if(_i(i,d)&&!t.required)return a();dn.required(t,i,c,f,u,d),_i(i,d)||dn.type(t,i,c,f,u)}a(f)},xle=function(t,i,a,c,u){var d=[],f=t.required||!t.required&&c.hasOwnProperty(t.field);if(f){if(_i(i)&&!t.required)return a();dn.required(t,i,c,d,u)}a(d)},Lf={string:vle,method:Ele,number:_le,boolean:yle,regexp:Sle,integer:Cle,float:ble,array:Tle,object:Rle,enum:wle,pattern:Ole,date:Ale,url:Yb,hex:Yb,email:Yb,required:Nle,any:xle};function A1(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var t=JSON.parse(JSON.stringify(this));return t.clone=this.clone,t}}}var N1=A1(),Am=function(){function e(i){this.rules=null,this._messages=N1,this.define(i)}var t=e.prototype;return t.define=function(a){var c=this;if(!a)throw new Error("Cannot configure a schema with no rules");if(typeof a!="object"||Array.isArray(a))throw new Error("Rules must be an object");this.rules={},Object.keys(a).forEach(function(u){var d=a[u];c.rules[u]=Array.isArray(d)?d:[d]})},t.messages=function(a){return a&&(this._messages=vj(A1(),a)),this._messages},t.validate=function(a,c,u){var d=this;c===void 0&&(c={}),u===void 0&&(u=function(){});var f=a,m=c,g=u;if(typeof m=="function"&&(g=m,m={}),!this.rules||Object.keys(this.rules).length===0)return g&&g(null,f),Promise.resolve(f);function _(w){var D=[],x={};function O(M){if(Array.isArray(M)){var F;D=(F=D).concat.apply(F,M)}else D.push(M)}for(var P=0;P<w.length;P++)O(w[P]);D.length?(x=O1(D),g(D,x)):g(null,f)}if(m.messages){var S=this.messages();S===N1&&(S=A1()),vj(S,m.messages),m.messages=S}else m.messages=this.messages();var b={},A=m.keys||Object.keys(this.rules);A.forEach(function(w){var D=d.rules[w],x=f[w];D.forEach(function(O){var P=O;typeof P.transform=="function"&&(f===a&&(f=xu({},f)),x=f[w]=P.transform(x)),typeof P=="function"?P={validator:P}:P=xu({},P),P.validator=d.getValidationMethod(P),P.validator&&(P.field=w,P.fullField=P.fullField||w,P.type=d.getType(P),b[w]=b[w]||[],b[w].push({rule:P,value:x,source:f,field:w}))})});var R={};return cle(b,m,function(w,D){var x=w.rule,O=(x.type==="object"||x.type==="array")&&(typeof x.fields=="object"||typeof x.defaultField=="object");O=O&&(x.required||!x.required&&w.value),x.field=w.field;function P(j,B){return xu({},B,{fullField:x.fullField+"."+j,fullFields:x.fullFields?[].concat(x.fullFields,[j]):[j]})}function M(j){j===void 0&&(j=[]);var B=Array.isArray(j)?j:[j];!m.suppressWarning&&B.length&&e.warning("async-validator:",B),B.length&&x.message!==void 0&&(B=[].concat(x.message));var H=B.map(gj(x,f));if(m.first&&H.length)return R[x.field]=1,D(H);if(!O)D(H);else{if(x.required&&!w.value)return x.message!==void 0?H=[].concat(x.message).map(gj(x,f)):m.error&&(H=[m.error(x,ga(m.messages.required,x.field))]),D(H);var K={};x.defaultField&&Object.keys(w.value).map(function(z){K[z]=x.defaultField}),K=xu({},K,w.rule.fields);var $={};Object.keys(K).forEach(function(z){var G=K[z],ee=Array.isArray(G)?G:[G];$[z]=ee.map(P.bind(null,z))});var Z=new e($);Z.messages(m.messages),w.rule.options&&(w.rule.options.messages=m.messages,w.rule.options.error=m.error),Z.validate(w.value,w.rule.options||m,function(z){var G=[];H&&H.length&&G.push.apply(G,H),z&&z.length&&G.push.apply(G,z),D(G.length?G:null)})}}var F;if(x.asyncValidator)F=x.asyncValidator(x,w.value,M,w.source,m);else if(x.validator){try{F=x.validator(x,w.value,M,w.source,m)}catch(j){console.error==null||console.error(j),m.suppressValidatorError||setTimeout(function(){throw j},0),M(j.message)}F===!0?M():F===!1?M(typeof x.message=="function"?x.message(x.fullField||x.field):x.message||(x.fullField||x.field)+" fails"):F instanceof Array?M(F):F instanceof Error&&M(F.message)}F&&F.then&&F.then(function(){return M()},function(j){return M(j)})},function(w){_(w)},f)},t.getType=function(a){if(a.type===void 0&&a.pattern instanceof RegExp&&(a.type="pattern"),typeof a.validator!="function"&&a.type&&!Lf.hasOwnProperty(a.type))throw new Error(ga("Unknown rule type %s",a.type));return a.type||"string"},t.getValidationMethod=function(a){if(typeof a.validator=="function")return a.validator;var c=Object.keys(a),u=c.indexOf("message");return u!==-1&&c.splice(u,1),c.length===1&&c[0]==="required"?Lf.required:Lf[this.getType(a)]||void 0},e}();Am.register=function(t,i){if(typeof i!="function")throw new Error("Cannot register a validator by type, validator is not a function");Lf[t]=i};Am.warning=ile;Am.messages=N1;Am.validators=Lf;var ha="'${name}' is not a valid ${type}",c5={default:"Validation error on field '${name}'",required:"'${name}' is required",enum:"'${name}' must be one of [${enum}]",whitespace:"'${name}' cannot be empty",date:{format:"'${name}' is invalid for format date",parse:"'${name}' could not be parsed as date",invalid:"'${name}' is invalid date"},types:{string:ha,method:ha,array:ha,object:ha,number:ha,date:ha,boolean:ha,integer:ha,float:ha,regexp:ha,email:ha,url:ha,hex:ha},string:{len:"'${name}' must be exactly ${len} characters",min:"'${name}' must be at least ${min} characters",max:"'${name}' cannot be longer than ${max} characters",range:"'${name}' must be between ${min} and ${max} characters"},number:{len:"'${name}' must equal ${len}",min:"'${name}' cannot be less than ${min}",max:"'${name}' cannot be greater than ${max}",range:"'${name}' must be between ${min} and ${max}"},array:{len:"'${name}' must be exactly ${len} in length",min:"'${name}' cannot be less than ${min} in length",max:"'${name}' cannot be greater than ${max} in length",range:"'${name}' must be between ${min} and ${max} in length"},pattern:{mismatch:"'${name}' does not match pattern ${pattern}"}},_j=Am;function Ple(e,t){return e.replace(/\$\{\w+\}/g,function(i){var a=i.slice(2,-1);return t[a]})}var yj="CODE_LOGIC_ERROR";function x1(e,t,i,a,c){return P1.apply(this,arguments)}function P1(){return P1=tp(ya().mark(function e(t,i,a,c,u){var d,f,m,g,_,S,b,A,R;return ya().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return d=Ee({},a),delete d.ruleIndex,_j.warning=function(){},d.validator&&(f=d.validator,d.validator=function(){try{return f.apply(void 0,arguments)}catch(x){return console.error(x),Promise.reject(yj)}}),m=null,d&&d.type==="array"&&d.defaultField&&(m=d.defaultField,delete d.defaultField),g=new _j(tt({},t,[d])),_=yh(c5,c.validateMessages),g.messages(_),S=[],D.prev=10,D.next=13,Promise.resolve(g.validate(tt({},t,i),Ee({},c)));case 13:D.next=18;break;case 15:D.prev=15,D.t0=D.catch(10),D.t0.errors&&(S=D.t0.errors.map(function(x,O){var P=x.message,M=P===yj?_.default:P;return y.isValidElement(M)?y.cloneElement(M,{key:"error_".concat(O)}):M}));case 18:if(!(!S.length&&m)){D.next=23;break}return D.next=21,Promise.all(i.map(function(x,O){return x1("".concat(t,".").concat(O),x,m,c,u)}));case 21:return b=D.sent,D.abrupt("return",b.reduce(function(x,O){return[].concat(Qe(x),Qe(O))},[]));case 23:return A=Ee(Ee({},a),{},{name:t,enum:(a.enum||[]).join(", ")},u),R=S.map(function(x){return typeof x=="string"?Ple(x,A):x}),D.abrupt("return",R);case 26:case"end":return D.stop()}},e,null,[[10,15]])})),P1.apply(this,arguments)}function Dle(e,t,i,a,c,u){var d=e.join("."),f=i.map(function(_,S){var b=_.validator,A=Ee(Ee({},_),{},{ruleIndex:S});return b&&(A.validator=function(R,w,D){var x=!1,O=function(){for(var F=arguments.length,j=new Array(F),B=0;B<F;B++)j[B]=arguments[B];Promise.resolve().then(function(){Wo(!x,"Your validator function has already return a promise. `callback` will be ignored."),x||D.apply(void 0,j)})},P=b(R,w,O);x=P&&typeof P.then=="function"&&typeof P.catch=="function",Wo(x,"`callback` is deprecated. Please return a promise instead."),x&&P.then(function(){D()}).catch(function(M){D(M||" ")})}),A}).sort(function(_,S){var b=_.warningOnly,A=_.ruleIndex,R=S.warningOnly,w=S.ruleIndex;return!!b==!!R?A-w:b?1:-1}),m;if(c===!0)m=new Promise(function(){var _=tp(ya().mark(function S(b,A){var R,w,D;return ya().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:R=0;case 1:if(!(R<f.length)){O.next=12;break}return w=f[R],O.next=5,x1(d,t,w,a,u);case 5:if(D=O.sent,!D.length){O.next=9;break}return A([{errors:D,rule:w}]),O.abrupt("return");case 9:R+=1,O.next=1;break;case 12:b([]);case 13:case"end":return O.stop()}},S)}));return function(S,b){return _.apply(this,arguments)}}());else{var g=f.map(function(_){return x1(d,t,_,a,u).then(function(S){return{errors:S,rule:_}})});m=(c?Lle(g):kle(g)).then(function(_){return Promise.reject(_)})}return m.catch(function(_){return _}),m}function kle(e){return D1.apply(this,arguments)}function D1(){return D1=tp(ya().mark(function e(t){return ya().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",Promise.all(t).then(function(c){var u,d=(u=[]).concat.apply(u,Qe(c));return d}));case 1:case"end":return a.stop()}},e)})),D1.apply(this,arguments)}function Lle(e){return k1.apply(this,arguments)}function k1(){return k1=tp(ya().mark(function e(t){var i;return ya().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return i=0,c.abrupt("return",new Promise(function(u){t.forEach(function(d){d.then(function(f){f.errors.length&&u([f]),i+=1,i===t.length&&u([])})})}));case 2:case"end":return c.stop()}},e)})),k1.apply(this,arguments)}function Wr(e){return R1(e)}function Sj(e,t){var i={};return t.forEach(function(a){var c=vs(e,a);i=hs(i,a,c)}),i}function Mf(e,t){return e&&e.some(function(i){return l5(i,t)})}function l5(e,t){return!e||!t||e.length!==t.length?!1:e.every(function(i,a){return t[a]===i})}function Mle(e,t){if(e===t)return!0;if(!e&&t||e&&!t||!e||!t||jn(e)!=="object"||jn(t)!=="object")return!1;var i=Object.keys(e),a=Object.keys(t),c=new Set([].concat(i,a));return Qe(c).every(function(u){var d=e[u],f=t[u];return typeof d=="function"&&typeof f=="function"?!0:d===f})}function Ule(e){var t=arguments.length<=1?void 0:arguments[1];return t&&t.target&&jn(t.target)==="object"&&e in t.target?t.target[e]:t}function Cj(e,t,i){var a=e.length;if(t<0||t>=a||i<0||i>=a)return e;var c=e[t],u=t-i;return u>0?[].concat(Qe(e.slice(0,i)),[c],Qe(e.slice(i,t)),Qe(e.slice(t+1,a))):u<0?[].concat(Qe(e.slice(0,t)),Qe(e.slice(t+1,i+1)),[c],Qe(e.slice(i+1,a))):e}var jle=["name"],La=[];function bj(e,t,i,a,c,u){return typeof e=="function"?e(t,i,"source"in u?{source:u.source}:{}):a!==c}var Ow=function(e){Yh(i,e);var t=qh(i);function i(a){var c;if(za(this,i),c=t.call(this,a),c.state={resetCount:0},c.cancelRegisterFunc=null,c.mounted=!1,c.touched=!1,c.dirty=!1,c.validatePromise=void 0,c.prevValidating=void 0,c.errors=La,c.warnings=La,c.cancelRegister=function(){var m=c.props,g=m.preserve,_=m.isListField,S=m.name;c.cancelRegisterFunc&&c.cancelRegisterFunc(_,g,Wr(S)),c.cancelRegisterFunc=null},c.getNamePath=function(){var m=c.props,g=m.name,_=m.fieldContext,S=_.prefixName,b=S===void 0?[]:S;return g!==void 0?[].concat(Qe(b),Qe(g)):[]},c.getRules=function(){var m=c.props,g=m.rules,_=g===void 0?[]:g,S=m.fieldContext;return _.map(function(b){return typeof b=="function"?b(S):b})},c.refresh=function(){c.mounted&&c.setState(function(m){var g=m.resetCount;return{resetCount:g+1}})},c.triggerMetaEvent=function(m){var g=c.props.onMetaChange;g==null||g(Ee(Ee({},c.getMeta()),{},{destroy:m}))},c.onStoreChange=function(m,g,_){var S=c.props,b=S.shouldUpdate,A=S.dependencies,R=A===void 0?[]:A,w=S.onReset,D=_.store,x=c.getNamePath(),O=c.getValue(m),P=c.getValue(D),M=g&&Mf(g,x);switch(_.type==="valueUpdate"&&_.source==="external"&&O!==P&&(c.touched=!0,c.dirty=!0,c.validatePromise=null,c.errors=La,c.warnings=La,c.triggerMetaEvent()),_.type){case"reset":if(!g||M){c.touched=!1,c.dirty=!1,c.validatePromise=void 0,c.errors=La,c.warnings=La,c.triggerMetaEvent(),w==null||w(),c.refresh();return}break;case"remove":{if(b){c.reRender();return}break}case"setField":{if(M){var F=_.data;"touched"in F&&(c.touched=F.touched),"validating"in F&&!("originRCField"in F)&&(c.validatePromise=F.validating?Promise.resolve([]):null),"errors"in F&&(c.errors=F.errors||La),"warnings"in F&&(c.warnings=F.warnings||La),c.dirty=!0,c.triggerMetaEvent(),c.reRender();return}if(b&&!x.length&&bj(b,m,D,O,P,_)){c.reRender();return}break}case"dependenciesUpdate":{var j=R.map(Wr);if(j.some(function(B){return Mf(_.relatedFields,B)})){c.reRender();return}break}default:if(M||(!R.length||x.length||b)&&bj(b,m,D,O,P,_)){c.reRender();return}break}b===!0&&c.reRender()},c.validateRules=function(m){var g=c.getNamePath(),_=c.getValue(),S=m||{},b=S.triggerName,A=S.validateOnly,R=A===void 0?!1:A,w=Promise.resolve().then(function(){if(!c.mounted)return[];var D=c.props,x=D.validateFirst,O=x===void 0?!1:x,P=D.messageVariables,M=c.getRules();b&&(M=M.filter(function(j){return j}).filter(function(j){var B=j.validateTrigger;if(!B)return!0;var H=R1(B);return H.includes(b)}));var F=Dle(g,_,M,m,O,P);return F.catch(function(j){return j}).then(function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:La;if(c.validatePromise===w){var B;c.validatePromise=null;var H=[],K=[];(B=j.forEach)===null||B===void 0||B.call(j,function($){var Z=$.rule.warningOnly,z=$.errors,G=z===void 0?La:z;Z?K.push.apply(K,Qe(G)):H.push.apply(H,Qe(G))}),c.errors=H,c.warnings=K,c.triggerMetaEvent(),c.reRender()}}),F});return R||(c.validatePromise=w,c.dirty=!0,c.errors=La,c.warnings=La,c.triggerMetaEvent(),c.reRender()),w},c.isFieldValidating=function(){return!!c.validatePromise},c.isFieldTouched=function(){return c.touched},c.isFieldDirty=function(){if(c.dirty||c.props.initialValue!==void 0)return!0;var m=c.props.fieldContext,g=m.getInternalHooks(Nu),_=g.getInitialValue;return _(c.getNamePath())!==void 0},c.getErrors=function(){return c.errors},c.getWarnings=function(){return c.warnings},c.isListField=function(){return c.props.isListField},c.isList=function(){return c.props.isList},c.isPreserve=function(){return c.props.preserve},c.getMeta=function(){c.prevValidating=c.isFieldValidating();var m={touched:c.isFieldTouched(),validating:c.prevValidating,errors:c.errors,warnings:c.warnings,name:c.getNamePath(),validated:c.validatePromise===null};return m},c.getOnlyChild=function(m){if(typeof m=="function"){var g=c.getMeta();return Ee(Ee({},c.getOnlyChild(m(c.getControlled(),g,c.props.fieldContext))),{},{isFunction:!0})}var _=Nc(m);return _.length!==1||!y.isValidElement(_[0])?{child:_,isFunction:!1}:{child:_[0],isFunction:!1}},c.getValue=function(m){var g=c.props.fieldContext.getFieldsValue,_=c.getNamePath();return vs(m||g(!0),_)},c.getControlled=function(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},g=c.props,_=g.trigger,S=g.validateTrigger,b=g.getValueFromEvent,A=g.normalize,R=g.valuePropName,w=g.getValueProps,D=g.fieldContext,x=S!==void 0?S:D.validateTrigger,O=c.getNamePath(),P=D.getInternalHooks,M=D.getFieldsValue,F=P(Nu),j=F.dispatch,B=c.getValue(),H=w||function(z){return tt({},R,z)},K=m[_],$=Ee(Ee({},m),H(B));$[_]=function(){c.touched=!0,c.dirty=!0,c.triggerMetaEvent();for(var z,G=arguments.length,ee=new Array(G),re=0;re<G;re++)ee[re]=arguments[re];b?z=b.apply(void 0,ee):z=Ule.apply(void 0,[R].concat(ee)),A&&(z=A(z,B,M(!0))),j({type:"updateValue",namePath:O,value:z}),K&&K.apply(void 0,ee)};var Z=R1(x||[]);return Z.forEach(function(z){var G=$[z];$[z]=function(){G&&G.apply(void 0,arguments);var ee=c.props.rules;ee&&ee.length&&j({type:"validateField",namePath:O,triggerName:z})}}),$},a.fieldContext){var u=a.fieldContext.getInternalHooks,d=u(Nu),f=d.initEntityValue;f(aE(c))}return c}return Ka(i,[{key:"componentDidMount",value:function(){var c=this.props,u=c.shouldUpdate,d=c.fieldContext;if(this.mounted=!0,d){var f=d.getInternalHooks,m=f(Nu),g=m.registerField;this.cancelRegisterFunc=g(this)}u===!0&&this.reRender()}},{key:"componentWillUnmount",value:function(){this.cancelRegister(),this.triggerMetaEvent(!0),this.mounted=!1}},{key:"reRender",value:function(){this.mounted&&this.forceUpdate()}},{key:"render",value:function(){var c=this.state.resetCount,u=this.props.children,d=this.getOnlyChild(u),f=d.child,m=d.isFunction,g;return m?g=f:y.isValidElement(f)?g=y.cloneElement(f,this.getControlled(f.props)):(Wo(!f,"`children` of Field is not validate ReactElement."),g=f),y.createElement(y.Fragment,{key:c},g)}}]),i}(y.Component);Ow.contextType=$u;Ow.defaultProps={trigger:"onChange",valuePropName:"value"};function Aw(e){var t=e.name,i=fn(e,jle),a=y.useContext($u),c=y.useContext(lm),u=t!==void 0?Wr(t):void 0,d="keep";return i.isListField||(d="_".concat((u||[]).join("_"))),y.createElement(Ow,He({key:d,name:u,isListField:!!c},i,{fieldContext:a}))}var u5=function(t){var i=t.name,a=t.initialValue,c=t.children,u=t.rules,d=t.validateTrigger,f=t.isListField,m=y.useContext($u),g=y.useContext(lm),_=y.useRef({keys:[],id:0}),S=_.current,b=y.useMemo(function(){var D=Wr(m.prefixName)||[];return[].concat(Qe(D),Qe(Wr(i)))},[m.prefixName,i]),A=y.useMemo(function(){return Ee(Ee({},m),{},{prefixName:b})},[m,b]),R=y.useMemo(function(){return{getKey:function(x){var O=b.length,P=x[O];return[S.keys[P],x.slice(O+1)]}}},[b]);if(typeof c!="function")return Wo(!1,"Form.List only accepts function as children."),null;var w=function(x,O,P){var M=P.source;return M==="internal"?!1:x!==O};return y.createElement(lm.Provider,{value:R},y.createElement($u.Provider,{value:A},y.createElement(Aw,{name:[],shouldUpdate:w,rules:u,validateTrigger:d,initialValue:a,isList:!0,isListField:f??!!g},function(D,x){var O=D.value,P=O===void 0?[]:O,M=D.onChange,F=m.getFieldValue,j=function(){var $=F(b||[]);return $||[]},B={add:function($,Z){var z=j();Z>=0&&Z<=z.length?(S.keys=[].concat(Qe(S.keys.slice(0,Z)),[S.id],Qe(S.keys.slice(Z))),M([].concat(Qe(z.slice(0,Z)),[$],Qe(z.slice(Z))))):(S.keys=[].concat(Qe(S.keys),[S.id]),M([].concat(Qe(z),[$]))),S.id+=1},remove:function($){var Z=j(),z=new Set(Array.isArray($)?$:[$]);z.size<=0||(S.keys=S.keys.filter(function(G,ee){return!z.has(ee)}),M(Z.filter(function(G,ee){return!z.has(ee)})))},move:function($,Z){if($!==Z){var z=j();$<0||$>=z.length||Z<0||Z>=z.length||(S.keys=Cj(S.keys,$,Z),M(Cj(z,$,Z)))}}},H=P||[];return Array.isArray(H)||(H=[]),c(H.map(function(K,$){var Z=S.keys[$];return Z===void 0&&(S.keys[$]=S.id,Z=S.keys[$],S.id+=1),{name:$,key:Z,isListField:!0}}),B,x)})))};function Fle(e){var t=!1,i=e.length,a=[];return e.length?new Promise(function(c,u){e.forEach(function(d,f){d.catch(function(m){return t=!0,m}).then(function(m){i-=1,a[f]=m,!(i>0)&&(t&&u(a),c(a))})})}):Promise.resolve([])}var d5="__@field_split__";function qb(e){return e.map(function(t){return"".concat(jn(t),":").concat(t)}).join(d5)}var qd=function(){function e(){za(this,e),this.kvs=new Map}return Ka(e,[{key:"set",value:function(i,a){this.kvs.set(qb(i),a)}},{key:"get",value:function(i){return this.kvs.get(qb(i))}},{key:"update",value:function(i,a){var c=this.get(i),u=a(c);u?this.set(i,u):this.delete(i)}},{key:"delete",value:function(i){this.kvs.delete(qb(i))}},{key:"map",value:function(i){return Qe(this.kvs.entries()).map(function(a){var c=Pe(a,2),u=c[0],d=c[1],f=u.split(d5);return i({key:f.map(function(m){var g=m.match(/^([^:]*):(.*)$/),_=Pe(g,3),S=_[1],b=_[2];return S==="number"?Number(b):b}),value:d})})}},{key:"toJSON",value:function(){var i={};return this.map(function(a){var c=a.key,u=a.value;return i[c.join(".")]=u,null}),i}}]),e}(),Vle=["name"],Ble=Ka(function e(t){var i=this;za(this,e),this.formHooked=!1,this.forceRootUpdate=void 0,this.subscribable=!0,this.store={},this.fieldEntities=[],this.initialValues={},this.callbacks={},this.validateMessages=null,this.preserve=null,this.lastValidatePromise=null,this.getForm=function(){return{getFieldValue:i.getFieldValue,getFieldsValue:i.getFieldsValue,getFieldError:i.getFieldError,getFieldWarning:i.getFieldWarning,getFieldsError:i.getFieldsError,isFieldsTouched:i.isFieldsTouched,isFieldTouched:i.isFieldTouched,isFieldValidating:i.isFieldValidating,isFieldsValidating:i.isFieldsValidating,resetFields:i.resetFields,setFields:i.setFields,setFieldValue:i.setFieldValue,setFieldsValue:i.setFieldsValue,validateFields:i.validateFields,submit:i.submit,_init:!0,getInternalHooks:i.getInternalHooks}},this.getInternalHooks=function(a){return a===Nu?(i.formHooked=!0,{dispatch:i.dispatch,initEntityValue:i.initEntityValue,registerField:i.registerField,useSubscribe:i.useSubscribe,setInitialValues:i.setInitialValues,destroyForm:i.destroyForm,setCallbacks:i.setCallbacks,setValidateMessages:i.setValidateMessages,getFields:i.getFields,setPreserve:i.setPreserve,getInitialValue:i.getInitialValue,registerWatch:i.registerWatch}):(Wo(!1,"`getInternalHooks` is internal usage. Should not call directly."),null)},this.useSubscribe=function(a){i.subscribable=a},this.prevWithoutPreserves=null,this.setInitialValues=function(a,c){if(i.initialValues=a||{},c){var u,d=yh(a,i.store);(u=i.prevWithoutPreserves)===null||u===void 0||u.map(function(f){var m=f.key;d=hs(d,m,vs(a,m))}),i.prevWithoutPreserves=null,i.updateStore(d)}},this.destroyForm=function(){var a=new qd;i.getFieldEntities(!0).forEach(function(c){i.isMergedPreserve(c.isPreserve())||a.set(c.getNamePath(),!0)}),i.prevWithoutPreserves=a},this.getInitialValue=function(a){var c=vs(i.initialValues,a);return a.length?yh(c):c},this.setCallbacks=function(a){i.callbacks=a},this.setValidateMessages=function(a){i.validateMessages=a},this.setPreserve=function(a){i.preserve=a},this.watchList=[],this.registerWatch=function(a){return i.watchList.push(a),function(){i.watchList=i.watchList.filter(function(c){return c!==a})}},this.notifyWatch=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];if(i.watchList.length){var c=i.getFieldsValue(),u=i.getFieldsValue(!0);i.watchList.forEach(function(d){d(c,u,a)})}},this.timeoutId=null,this.warningUnhooked=function(){},this.updateStore=function(a){i.store=a},this.getFieldEntities=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return a?i.fieldEntities.filter(function(c){return c.getNamePath().length}):i.fieldEntities},this.getFieldsMap=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,c=new qd;return i.getFieldEntities(a).forEach(function(u){var d=u.getNamePath();c.set(d,u)}),c},this.getFieldEntitiesForNamePathList=function(a){if(!a)return i.getFieldEntities(!0);var c=i.getFieldsMap(!0);return a.map(function(u){var d=Wr(u);return c.get(d)||{INVALIDATE_NAME_PATH:Wr(u)}})},this.getFieldsValue=function(a,c){if(i.warningUnhooked(),a===!0&&!c)return i.store;var u=i.getFieldEntitiesForNamePathList(Array.isArray(a)?a:null),d=[];return u.forEach(function(f){var m,g="INVALIDATE_NAME_PATH"in f?f.INVALIDATE_NAME_PATH:f.getNamePath();if(!(!a&&(!((m=f.isListField)===null||m===void 0)&&m.call(f))))if(!c)d.push(g);else{var _="getMeta"in f?f.getMeta():null;c(_)&&d.push(g)}}),Sj(i.store,d.map(Wr))},this.getFieldValue=function(a){i.warningUnhooked();var c=Wr(a);return vs(i.store,c)},this.getFieldsError=function(a){i.warningUnhooked();var c=i.getFieldEntitiesForNamePathList(a);return c.map(function(u,d){return u&&!("INVALIDATE_NAME_PATH"in u)?{name:u.getNamePath(),errors:u.getErrors(),warnings:u.getWarnings()}:{name:Wr(a[d]),errors:[],warnings:[]}})},this.getFieldError=function(a){i.warningUnhooked();var c=Wr(a),u=i.getFieldsError([c])[0];return u.errors},this.getFieldWarning=function(a){i.warningUnhooked();var c=Wr(a),u=i.getFieldsError([c])[0];return u.warnings},this.isFieldsTouched=function(){i.warningUnhooked();for(var a=arguments.length,c=new Array(a),u=0;u<a;u++)c[u]=arguments[u];var d=c[0],f=c[1],m,g=!1;c.length===0?m=null:c.length===1?Array.isArray(d)?(m=d.map(Wr),g=!1):(m=null,g=d):(m=d.map(Wr),g=f);var _=i.getFieldEntities(!0),S=function(D){return D.isFieldTouched()};if(!m)return g?_.every(S):_.some(S);var b=new qd;m.forEach(function(w){b.set(w,[])}),_.forEach(function(w){var D=w.getNamePath();m.forEach(function(x){x.every(function(O,P){return D[P]===O})&&b.update(x,function(O){return[].concat(Qe(O),[w])})})});var A=function(D){return D.some(S)},R=b.map(function(w){var D=w.value;return D});return g?R.every(A):R.some(A)},this.isFieldTouched=function(a){return i.warningUnhooked(),i.isFieldsTouched([a])},this.isFieldsValidating=function(a){i.warningUnhooked();var c=i.getFieldEntities();if(!a)return c.some(function(d){return d.isFieldValidating()});var u=a.map(Wr);return c.some(function(d){var f=d.getNamePath();return Mf(u,f)&&d.isFieldValidating()})},this.isFieldValidating=function(a){return i.warningUnhooked(),i.isFieldsValidating([a])},this.resetWithFieldInitialValue=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=new qd,u=i.getFieldEntities(!0);u.forEach(function(m){var g=m.props.initialValue,_=m.getNamePath();if(g!==void 0){var S=c.get(_)||new Set;S.add({entity:m,value:g}),c.set(_,S)}});var d=function(g){g.forEach(function(_){var S=_.props.initialValue;if(S!==void 0){var b=_.getNamePath(),A=i.getInitialValue(b);if(A!==void 0)Wo(!1,"Form already set 'initialValues' with path '".concat(b.join("."),"'. Field can not overwrite it."));else{var R=c.get(b);if(R&&R.size>1)Wo(!1,"Multiple Field with path '".concat(b.join("."),"' set 'initialValue'. Can not decide which one to pick."));else if(R){var w=i.getFieldValue(b);(!a.skipExist||w===void 0)&&i.updateStore(hs(i.store,b,Qe(R)[0].value))}}}})},f;a.entities?f=a.entities:a.namePathList?(f=[],a.namePathList.forEach(function(m){var g=c.get(m);if(g){var _;(_=f).push.apply(_,Qe(Qe(g).map(function(S){return S.entity})))}})):f=u,d(f)},this.resetFields=function(a){i.warningUnhooked();var c=i.store;if(!a){i.updateStore(yh(i.initialValues)),i.resetWithFieldInitialValue(),i.notifyObservers(c,null,{type:"reset"}),i.notifyWatch();return}var u=a.map(Wr);u.forEach(function(d){var f=i.getInitialValue(d);i.updateStore(hs(i.store,d,f))}),i.resetWithFieldInitialValue({namePathList:u}),i.notifyObservers(c,u,{type:"reset"}),i.notifyWatch(u)},this.setFields=function(a){i.warningUnhooked();var c=i.store,u=[];a.forEach(function(d){var f=d.name,m=fn(d,Vle),g=Wr(f);u.push(g),"value"in m&&i.updateStore(hs(i.store,g,m.value)),i.notifyObservers(c,[g],{type:"setField",data:d})}),i.notifyWatch(u)},this.getFields=function(){var a=i.getFieldEntities(!0),c=a.map(function(u){var d=u.getNamePath(),f=u.getMeta(),m=Ee(Ee({},f),{},{name:d,value:i.getFieldValue(d)});return Object.defineProperty(m,"originRCField",{value:!0}),m});return c},this.initEntityValue=function(a){var c=a.props.initialValue;if(c!==void 0){var u=a.getNamePath(),d=vs(i.store,u);d===void 0&&i.updateStore(hs(i.store,u,c))}},this.isMergedPreserve=function(a){var c=a!==void 0?a:i.preserve;return c??!0},this.registerField=function(a){i.fieldEntities.push(a);var c=a.getNamePath();if(i.notifyWatch([c]),a.props.initialValue!==void 0){var u=i.store;i.resetWithFieldInitialValue({entities:[a],skipExist:!0}),i.notifyObservers(u,[a.getNamePath()],{type:"valueUpdate",source:"internal"})}return function(d,f){var m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(i.fieldEntities=i.fieldEntities.filter(function(S){return S!==a}),!i.isMergedPreserve(f)&&(!d||m.length>1)){var g=d?void 0:i.getInitialValue(c);if(c.length&&i.getFieldValue(c)!==g&&i.fieldEntities.every(function(S){return!l5(S.getNamePath(),c)})){var _=i.store;i.updateStore(hs(_,c,g,!0)),i.notifyObservers(_,[c],{type:"remove"}),i.triggerDependenciesUpdate(_,c)}}i.notifyWatch([c])}},this.dispatch=function(a){switch(a.type){case"updateValue":{var c=a.namePath,u=a.value;i.updateValue(c,u);break}case"validateField":{var d=a.namePath,f=a.triggerName;i.validateFields([d],{triggerName:f});break}}},this.notifyObservers=function(a,c,u){if(i.subscribable){var d=Ee(Ee({},u),{},{store:i.getFieldsValue(!0)});i.getFieldEntities().forEach(function(f){var m=f.onStoreChange;m(a,c,d)})}else i.forceRootUpdate()},this.triggerDependenciesUpdate=function(a,c){var u=i.getDependencyChildrenFields(c);return u.length&&i.validateFields(u),i.notifyObservers(a,u,{type:"dependenciesUpdate",relatedFields:[c].concat(Qe(u))}),u},this.updateValue=function(a,c){var u=Wr(a),d=i.store;i.updateStore(hs(i.store,u,c)),i.notifyObservers(d,[u],{type:"valueUpdate",source:"internal"}),i.notifyWatch([u]);var f=i.triggerDependenciesUpdate(d,u),m=i.callbacks.onValuesChange;if(m){var g=Sj(i.store,[u]);m(g,i.getFieldsValue())}i.triggerOnFieldsChange([u].concat(Qe(f)))},this.setFieldsValue=function(a){i.warningUnhooked();var c=i.store;if(a){var u=yh(i.store,a);i.updateStore(u)}i.notifyObservers(c,null,{type:"valueUpdate",source:"external"}),i.notifyWatch()},this.setFieldValue=function(a,c){i.setFields([{name:a,value:c}])},this.getDependencyChildrenFields=function(a){var c=new Set,u=[],d=new qd;i.getFieldEntities().forEach(function(m){var g=m.props.dependencies;(g||[]).forEach(function(_){var S=Wr(_);d.update(S,function(){var b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Set;return b.add(m),b})})});var f=function m(g){var _=d.get(g)||new Set;_.forEach(function(S){if(!c.has(S)){c.add(S);var b=S.getNamePath();S.isFieldDirty()&&b.length&&(u.push(b),m(b))}})};return f(a),u},this.triggerOnFieldsChange=function(a,c){var u=i.callbacks.onFieldsChange;if(u){var d=i.getFields();if(c){var f=new qd;c.forEach(function(g){var _=g.name,S=g.errors;f.set(_,S)}),d.forEach(function(g){g.errors=f.get(g.name)||g.errors})}var m=d.filter(function(g){var _=g.name;return Mf(a,_)});m.length&&u(m,d)}},this.validateFields=function(a,c){i.warningUnhooked();var u,d;Array.isArray(a)||typeof a=="string"||typeof c=="string"?(u=a,d=c):d=a;var f=!!u,m=f?u.map(Wr):[],g=[],_=String(Date.now()),S=new Set;i.getFieldEntities(!0).forEach(function(w){var D;if(f||m.push(w.getNamePath()),!((D=d)===null||D===void 0)&&D.recursive&&f){var x=w.getNamePath();x.every(function(M,F){return u[F]===M||u[F]===void 0})&&m.push(x)}if(!(!w.props.rules||!w.props.rules.length)){var O=w.getNamePath();if(S.add(O.join(_)),!f||Mf(m,O)){var P=w.validateRules(Ee({validateMessages:Ee(Ee({},c5),i.validateMessages)},d));g.push(P.then(function(){return{name:O,errors:[],warnings:[]}}).catch(function(M){var F,j=[],B=[];return(F=M.forEach)===null||F===void 0||F.call(M,function(H){var K=H.rule.warningOnly,$=H.errors;K?B.push.apply(B,Qe($)):j.push.apply(j,Qe($))}),j.length?Promise.reject({name:O,errors:j,warnings:B}):{name:O,errors:j,warnings:B}}))}}});var b=Fle(g);i.lastValidatePromise=b,b.catch(function(w){return w}).then(function(w){var D=w.map(function(x){var O=x.name;return O});i.notifyObservers(i.store,D,{type:"validateFinish"}),i.triggerOnFieldsChange(D,w)});var A=b.then(function(){return i.lastValidatePromise===b?Promise.resolve(i.getFieldsValue(m)):Promise.reject([])}).catch(function(w){var D=w.filter(function(x){return x&&x.errors.length});return Promise.reject({values:i.getFieldsValue(m),errorFields:D,outOfDate:i.lastValidatePromise!==b})});A.catch(function(w){return w});var R=m.filter(function(w){return S.has(w.join(_))});return i.triggerOnFieldsChange(R),A},this.submit=function(){i.warningUnhooked(),i.validateFields().then(function(a){var c=i.callbacks.onFinish;if(c)try{c(a)}catch(u){console.error(u)}}).catch(function(a){var c=i.callbacks.onFinishFailed;c&&c(a)})},this.forceRootUpdate=t});function Nw(e){var t=y.useRef(),i=y.useState({}),a=Pe(i,2),c=a[1];if(!t.current)if(e)t.current=e;else{var u=function(){c({})},d=new Ble(u);t.current=d.getForm()}return[t.current]}var L1=y.createContext({triggerFormChange:function(){},triggerFormFinish:function(){},registerForm:function(){},unregisterForm:function(){}}),h5=function(t){var i=t.validateMessages,a=t.onFormChange,c=t.onFormFinish,u=t.children,d=y.useContext(L1),f=y.useRef({});return y.createElement(L1.Provider,{value:Ee(Ee({},d),{},{validateMessages:Ee(Ee({},d.validateMessages),i),triggerFormChange:function(g,_){a&&a(g,{changedFields:_,forms:f.current}),d.triggerFormChange(g,_)},triggerFormFinish:function(g,_){c&&c(g,{values:_,forms:f.current}),d.triggerFormFinish(g,_)},registerForm:function(g,_){g&&(f.current=Ee(Ee({},f.current),{},tt({},g,_))),d.registerForm(g,_)},unregisterForm:function(g){var _=Ee({},f.current);delete _[g],f.current=_,d.unregisterForm(g)}})},u)},$le=["name","initialValues","fields","form","preserve","children","component","validateMessages","validateTrigger","onValuesChange","onFieldsChange","onFinish","onFinishFailed"],Hle=function(t,i){var a=t.name,c=t.initialValues,u=t.fields,d=t.form,f=t.preserve,m=t.children,g=t.component,_=g===void 0?"form":g,S=t.validateMessages,b=t.validateTrigger,A=b===void 0?"onChange":b,R=t.onValuesChange,w=t.onFieldsChange,D=t.onFinish,x=t.onFinishFailed,O=fn(t,$le),P=y.useContext(L1),M=Nw(d),F=Pe(M,1),j=F[0],B=j.getInternalHooks(Nu),H=B.useSubscribe,K=B.setInitialValues,$=B.setCallbacks,Z=B.setValidateMessages,z=B.setPreserve,G=B.destroyForm;y.useImperativeHandle(i,function(){return j}),y.useEffect(function(){return P.registerForm(a,j),function(){P.unregisterForm(a)}},[P,j,a]),Z(Ee(Ee({},P.validateMessages),S)),$({onValuesChange:R,onFieldsChange:function(ae){if(P.triggerFormChange(a,ae),w){for(var de=arguments.length,ce=new Array(de>1?de-1:0),we=1;we<de;we++)ce[we-1]=arguments[we];w.apply(void 0,[ae].concat(ce))}},onFinish:function(ae){P.triggerFormFinish(a,ae),D&&D(ae)},onFinishFailed:x}),z(f);var ee=y.useRef(null);K(c,!ee.current),ee.current||(ee.current=!0),y.useEffect(function(){return G},[]);var re,oe=typeof m=="function";if(oe){var pe=j.getFieldsValue(!0);re=m(pe,j)}else re=m;H(!oe);var ue=y.useRef();y.useEffect(function(){Mle(ue.current||[],u||[])||j.setFields(u||[]),ue.current=u},[u,j]);var me=y.useMemo(function(){return Ee(Ee({},j),{},{validateTrigger:A})},[j,A]),fe=y.createElement(lm.Provider,{value:null},y.createElement($u.Provider,{value:me},re));return _===!1?fe:y.createElement(_,He({},O,{onSubmit:function(ae){ae.preventDefault(),ae.stopPropagation(),j.submit()},onReset:function(ae){var de;ae.preventDefault(),j.resetFields(),(de=O.onReset)===null||de===void 0||de.call(O,ae)}}),fe)};function Tj(e){try{return JSON.stringify(e)}catch{return Math.random()}}function p5(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var a=t[0],c=a===void 0?[]:a,u=t[1],d=u===void 0?{}:u,f=Zce(d)?{form:d}:d,m=f.form,g=y.useState(),_=Pe(g,2),S=_[0],b=_[1],A=y.useMemo(function(){return Tj(S)},[S]),R=y.useRef(A);R.current=A;var w=y.useContext($u),D=m||w,x=D&&D._init,O=Wr(c),P=y.useRef(O);return P.current=O,y.useEffect(function(){if(x){var M=D.getFieldsValue,F=D.getInternalHooks,j=F(Nu),B=j.registerWatch,H=B(function($,Z){var z=vs(f.preserve?Z:$,P.current),G=Tj(z);R.current!==G&&(R.current=G,b(z))}),K=vs(f.preserve?M(!0):M(),P.current);return b(K),H}},[x]),S}var Wle=y.forwardRef(Hle),np=Wle;np.FormProvider=h5;np.Field=Aw;np.List=u5;np.useForm=Nw;np.useWatch=p5;const Fl=y.createContext({labelAlign:"right",vertical:!1,itemRef:()=>{}}),f5=y.createContext(null),m5=e=>{const t=Yo(e,["prefixCls"]);return y.createElement(h5,Object.assign({},t))},xw=y.createContext({prefixCls:""}),Dc=y.createContext({}),Rj=e=>{let{children:t,status:i,override:a}=e;const c=y.useContext(Dc),u=y.useMemo(()=>{const d=Object.assign({},c);return a&&delete d.isFormItemInput,i&&(delete d.status,delete d.hasFeedback,delete d.feedbackIcon),d},[i,a,c]);return y.createElement(Dc.Provider,{value:u},t)},Gle=e=>({animationDuration:e,animationFillMode:"both"}),zle=e=>({animationDuration:e,animationFillMode:"both"}),g5=function(e,t,i,a){const u=(arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1)?"&":"";return{[`
      ${u}${e}-enter,
      ${u}${e}-appear
    `]:Object.assign(Object.assign({},Gle(a)),{animationPlayState:"paused"}),[`${u}${e}-leave`]:Object.assign(Object.assign({},zle(a)),{animationPlayState:"paused"}),[`
      ${u}${e}-enter${e}-enter-active,
      ${u}${e}-appear${e}-appear-active
    `]:{animationName:t,animationPlayState:"running"},[`${u}${e}-leave${e}-leave-active`]:{animationName:i,animationPlayState:"running",pointerEvents:"none"}}},Kle=new Er("antSlideUpIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1}}),Yle=new Er("antSlideUpOut",{"0%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0}}),qle=new Er("antSlideDownIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1}}),Xle=new Er("antSlideDownOut",{"0%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0}}),Jle=new Er("antSlideLeftIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1}}),Qle=new Er("antSlideLeftOut",{"0%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0}}),Zle=new Er("antSlideRightIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1}}),eue=new Er("antSlideRightOut",{"0%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0}}),tue={"slide-up":{inKeyframes:Kle,outKeyframes:Yle},"slide-down":{inKeyframes:qle,outKeyframes:Xle},"slide-left":{inKeyframes:Jle,outKeyframes:Qle},"slide-right":{inKeyframes:Zle,outKeyframes:eue}},Ij=(e,t)=>{const{antCls:i}=e,a=`${i}-${t}`,{inKeyframes:c,outKeyframes:u}=tue[t];return[g5(a,c,u,e.motionDurationMid),{[`
      ${a}-enter,
      ${a}-appear
    `]:{transform:"scale(0)",transformOrigin:"0% 0%",opacity:0,animationTimingFunction:e.motionEaseOutQuint,"&-prepare":{transform:"scale(1)"}},[`${a}-leave`]:{animationTimingFunction:e.motionEaseInQuint}}]},Pw=new Er("antZoomIn",{"0%":{transform:"scale(0.2)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),nue=new Er("antZoomOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.2)",opacity:0}}),wj=new Er("antZoomBigIn",{"0%":{transform:"scale(0.8)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),Oj=new Er("antZoomBigOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.8)",opacity:0}}),rue=new Er("antZoomUpIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 0%"}}),iue=new Er("antZoomUpOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 0%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0}}),oue=new Er("antZoomLeftIn",{"0%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"0% 50%"}}),aue=new Er("antZoomLeftOut",{"0%":{transform:"scale(1)",transformOrigin:"0% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0}}),sue=new Er("antZoomRightIn",{"0%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"100% 50%"}}),cue=new Er("antZoomRightOut",{"0%":{transform:"scale(1)",transformOrigin:"100% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0}}),lue=new Er("antZoomDownIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 100%"}}),uue=new Er("antZoomDownOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 100%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0}}),due={zoom:{inKeyframes:Pw,outKeyframes:nue},"zoom-big":{inKeyframes:wj,outKeyframes:Oj},"zoom-big-fast":{inKeyframes:wj,outKeyframes:Oj},"zoom-left":{inKeyframes:oue,outKeyframes:aue},"zoom-right":{inKeyframes:sue,outKeyframes:cue},"zoom-up":{inKeyframes:rue,outKeyframes:iue},"zoom-down":{inKeyframes:lue,outKeyframes:uue}},v5=(e,t)=>{const{antCls:i}=e,a=`${i}-${t}`,{inKeyframes:c,outKeyframes:u}=due[t];return[g5(a,c,u,t==="zoom-big-fast"?e.motionDurationFast:e.motionDurationMid),{[`
        ${a}-enter,
        ${a}-appear
      `]:{transform:"scale(0)",opacity:0,animationTimingFunction:e.motionEaseOutCirc,"&-prepare":{transform:"none"}},[`${a}-leave`]:{animationTimingFunction:e.motionEaseInOutCirc}}]},hue=e=>({[e.componentCls]:{[`${e.antCls}-motion-collapse-legacy`]:{overflow:"hidden","&-active":{transition:`height ${e.motionDurationMid} ${e.motionEaseInOut},
        opacity ${e.motionDurationMid} ${e.motionEaseInOut} !important`}},[`${e.antCls}-motion-collapse`]:{overflow:"hidden",transition:`height ${e.motionDurationMid} ${e.motionEaseInOut},
        opacity ${e.motionDurationMid} ${e.motionEaseInOut} !important`}}}),E5=hue,pue=e=>{const{componentCls:t,width:i,notificationMarginEdge:a}=e,c=new Er("antNotificationTopFadeIn",{"0%":{marginTop:"-100%",opacity:0},"100%":{marginTop:0,opacity:1}}),u=new Er("antNotificationBottomFadeIn",{"0%":{marginBottom:"-100%",opacity:0},"100%":{marginBottom:0,opacity:1}}),d=new Er("antNotificationLeftFadeIn",{"0%":{right:{_skip_check_:!0,value:i},opacity:0},"100%":{right:{_skip_check_:!0,value:0},opacity:1}});return{[`&${t}-top, &${t}-bottom`]:{marginInline:0},[`&${t}-top`]:{[`${t}-fade-enter${t}-fade-enter-active, ${t}-fade-appear${t}-fade-appear-active`]:{animationName:c}},[`&${t}-bottom`]:{[`${t}-fade-enter${t}-fade-enter-active, ${t}-fade-appear${t}-fade-appear-active`]:{animationName:u}},[`&${t}-topLeft, &${t}-bottomLeft`]:{marginInlineEnd:0,marginInlineStart:a,[`${t}-fade-enter${t}-fade-enter-active, ${t}-fade-appear${t}-fade-appear-active`]:{animationName:d}}}},fue=pue,mue=e=>{const{iconCls:t,componentCls:i,boxShadow:a,fontSizeLG:c,notificationMarginBottom:u,borderRadiusLG:d,colorSuccess:f,colorInfo:m,colorWarning:g,colorError:_,colorTextHeading:S,notificationBg:b,notificationPadding:A,notificationMarginEdge:R,motionDurationMid:w,motionEaseInOut:D,fontSize:x,lineHeight:O,width:P,notificationIconSize:M,colorText:F}=e,j=`${i}-notice`,B=new Er("antNotificationFadeIn",{"0%":{left:{_skip_check_:!0,value:P},opacity:0},"100%":{left:{_skip_check_:!0,value:0},opacity:1}}),H=new Er("antNotificationFadeOut",{"0%":{maxHeight:e.animationMaxHeight,marginBottom:u,opacity:1},"100%":{maxHeight:0,marginBottom:0,paddingTop:0,paddingBottom:0,opacity:0}}),K={position:"relative",width:P,maxWidth:`calc(100vw - ${R*2}px)`,marginBottom:u,marginInlineStart:"auto",padding:A,overflow:"hidden",lineHeight:O,wordWrap:"break-word",background:b,borderRadius:d,boxShadow:a,[`${i}-close-icon`]:{fontSize:x,cursor:"pointer"},[`${j}-message`]:{marginBottom:e.marginXS,color:S,fontSize:c,lineHeight:e.lineHeightLG},[`${j}-description`]:{fontSize:x,color:F},[`&${j}-closable ${j}-message`]:{paddingInlineEnd:e.paddingLG},[`${j}-with-icon ${j}-message`]:{marginBottom:e.marginXS,marginInlineStart:e.marginSM+M,fontSize:c},[`${j}-with-icon ${j}-description`]:{marginInlineStart:e.marginSM+M,fontSize:x},[`${j}-icon`]:{position:"absolute",fontSize:M,lineHeight:0,[`&-success${t}`]:{color:f},[`&-info${t}`]:{color:m},[`&-warning${t}`]:{color:g},[`&-error${t}`]:{color:_}},[`${j}-close`]:{position:"absolute",top:e.notificationPaddingVertical,insetInlineEnd:e.notificationPaddingHorizontal,color:e.colorIcon,outline:"none",width:e.notificationCloseButtonSize,height:e.notificationCloseButtonSize,borderRadius:e.borderRadiusSM,transition:`background-color ${e.motionDurationMid}, color ${e.motionDurationMid}`,display:"flex",alignItems:"center",justifyContent:"center","&:hover":{color:e.colorIconHover,backgroundColor:e.wireframe?"transparent":e.colorFillContent}},[`${j}-btn`]:{float:"right",marginTop:e.marginSM}};return[{[i]:Object.assign(Object.assign(Object.assign(Object.assign({},Ku(e)),{position:"fixed",zIndex:e.zIndexPopup,marginInlineEnd:R,[`${i}-hook-holder`]:{position:"relative"},[`&${i}-top, &${i}-bottom`]:{[j]:{marginInline:"auto auto"}},[`&${i}-topLeft, &${i}-bottomLeft`]:{[j]:{marginInlineEnd:"auto",marginInlineStart:0}},[`${i}-fade-enter, ${i}-fade-appear`]:{animationDuration:e.motionDurationMid,animationTimingFunction:D,animationFillMode:"both",opacity:0,animationPlayState:"paused"},[`${i}-fade-leave`]:{animationTimingFunction:D,animationFillMode:"both",animationDuration:w,animationPlayState:"paused"},[`${i}-fade-enter${i}-fade-enter-active, ${i}-fade-appear${i}-fade-appear-active`]:{animationName:B,animationPlayState:"running"},[`${i}-fade-leave${i}-fade-leave-active`]:{animationName:H,animationPlayState:"running"}}),fue(e)),{"&-rtl":{direction:"rtl",[`${j}-btn`]:{float:"left"}}})},{[i]:{[j]:Object.assign({},K)}},{[`${j}-pure-panel`]:Object.assign(Object.assign({},K),{margin:0})}]},_5=ws("Notification",e=>{const t=e.paddingMD,i=e.paddingLG,a=Ki(e,{notificationBg:e.colorBgElevated,notificationPaddingVertical:t,notificationPaddingHorizontal:i,notificationIconSize:e.fontSizeLG*e.lineHeightLG,notificationCloseButtonSize:e.controlHeightLG*.55,notificationMarginBottom:e.margin,notificationPadding:`${e.paddingMD}px ${e.paddingContentHorizontalLG}px`,notificationMarginEdge:e.marginLG,animationMaxHeight:150});return[mue(a)]},e=>({zIndexPopup:e.zIndexPopupBase+50,width:384}));var gue=globalThis&&globalThis.__rest||function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(i[a[c]]=e[a[c]]);return i};function y5(e,t){return t||y.createElement("span",{className:`${e}-close-x`},y.createElement(lse,{className:`${e}-close-icon`}))}const vue={success:B6,info:Tse,error:y_,warning:G6};function S5(e){let{prefixCls:t,icon:i,type:a,message:c,description:u,btn:d,role:f="alert"}=e,m=null;return i?m=y.createElement("span",{className:`${t}-icon`},i):a&&(m=y.createElement(vue[a]||null,{className:Ve(`${t}-icon`,`${t}-icon-${a}`)})),y.createElement("div",{className:Ve({[`${t}-with-icon`]:m}),role:f},m,y.createElement("div",{className:`${t}-message`},c),y.createElement("div",{className:`${t}-description`},u),d&&y.createElement("div",{className:`${t}-btn`},d))}function Eue(e){const{prefixCls:t,className:i,icon:a,type:c,message:u,description:d,btn:f,closable:m=!0,closeIcon:g}=e,_=gue(e,["prefixCls","className","icon","type","message","description","btn","closable","closeIcon"]),{getPrefixCls:S}=y.useContext(Hn),b=t||S("notification"),A=`${b}-notice`,[,R]=_5(b);return y.createElement(Y6,Object.assign({},_,{prefixCls:b,className:Ve(i,R,`${A}-pure-panel`),eventKey:"pure",duration:null,closable:m,closeIcon:y5(b,g),content:y.createElement(S5,{prefixCls:A,icon:a,type:c,message:u,description:d,btn:f})}))}function _ue(e,t,i){let a;switch(e){case"top":a={left:"50%",transform:"translateX(-50%)",right:"auto",top:t,bottom:"auto"};break;case"topLeft":a={left:0,top:t,bottom:"auto"};break;case"topRight":a={right:0,top:t,bottom:"auto"};break;case"bottom":a={left:"50%",transform:"translateX(-50%)",right:"auto",top:"auto",bottom:i};break;case"bottomLeft":a={left:0,top:"auto",bottom:i};break;default:a={right:0,top:"auto",bottom:i};break}return a}function yue(e){return{motionName:`${e}-fade`}}var Sue=globalThis&&globalThis.__rest||function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(i[a[c]]=e[a[c]]);return i};const Aj=24,Cue=4.5,bue=y.forwardRef((e,t)=>{const{top:i,bottom:a,prefixCls:c,getContainer:u,maxCount:d,rtl:f,onAllRemoved:m}=e,{getPrefixCls:g,getPopupContainer:_}=y.useContext(Hn),S=c||g("notification"),b=O=>_ue(O,i??Aj,a??Aj),[,A]=_5(S),R=()=>Ve(A,{[`${S}-rtl`]:f}),w=()=>yue(S),[D,x]=kse({prefixCls:S,style:b,className:R,motion:w,closable:!0,closeIcon:y5(S),duration:Cue,getContainer:()=>(u==null?void 0:u())||(_==null?void 0:_())||document.body,maxCount:d,onAllRemoved:m});return y.useImperativeHandle(t,()=>Object.assign(Object.assign({},D),{prefixCls:S,hashId:A})),x});function C5(e){const t=y.useRef(null);return[y.useMemo(()=>{const a=f=>{if(!t.current)return;const{open:m,prefixCls:g,hashId:_}=t.current,S=`${g}-notice`,{message:b,description:A,icon:R,type:w,btn:D,className:x,role:O="alert"}=f,P=Sue(f,["message","description","icon","type","btn","className","role"]);return m(Object.assign(Object.assign({placement:"topRight"},P),{content:y.createElement(S5,{prefixCls:S,icon:R,type:w,message:b,description:A,btn:D,role:O}),className:Ve(w&&`${S}-${w}`,_,x)}))},u={open:a,destroy:f=>{var m,g;f!==void 0?(m=t.current)===null||m===void 0||m.close(f):(g=t.current)===null||g===void 0||g.destroy()}};return["success","info","warning","error"].forEach(f=>{u[f]=m=>a(Object.assign(Object.assign({},m),{type:f}))}),u},[]),y.createElement(bue,Object.assign({key:"notification-holder"},e,{ref:t}))]}function Tue(e){return C5(e)}const Rue=function(){if(typeof navigator>"u"||typeof window>"u")return!1;var e=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(e==null?void 0:e.substr(0,4))};var Iue=["prefixCls","invalidate","item","renderItem","responsive","responsiveDisabled","registerSize","itemKey","className","style","children","display","order","component"],Xd=void 0;function wue(e,t){var i=e.prefixCls,a=e.invalidate,c=e.item,u=e.renderItem,d=e.responsive,f=e.responsiveDisabled,m=e.registerSize,g=e.itemKey,_=e.className,S=e.style,b=e.children,A=e.display,R=e.order,w=e.component,D=w===void 0?"div":w,x=fn(e,Iue),O=d&&!A;function P(H){m(g,H)}y.useEffect(function(){return function(){P(null)}},[]);var M=u&&c!==Xd?u(c):b,F;a||(F={opacity:O?0:1,height:O?0:Xd,overflowY:O?"hidden":Xd,order:d?R:Xd,pointerEvents:O?"none":Xd,position:O?"absolute":Xd});var j={};O&&(j["aria-hidden"]=!0);var B=y.createElement(D,He({className:Ve(!a&&i,_),style:Ee(Ee({},F),S)},j,x,{ref:t}),M);return d&&(B=y.createElement(zu,{onResize:function(K){var $=K.offsetWidth;P($)},disabled:f},B)),B}var Uf=y.forwardRef(wue);Uf.displayName="Item";function Oue(e){if(typeof MessageChannel>"u")Wi(e);else{var t=new MessageChannel;t.port1.onmessage=function(){return e()},t.port2.postMessage(void 0)}}function Aue(){var e=y.useRef(null),t=function(a){e.current||(e.current=[],Oue(function(){Hl.unstable_batchedUpdates(function(){e.current.forEach(function(c){c()}),e.current=null})})),e.current.push(a)};return t}function cf(e,t){var i=y.useState(t),a=Pe(i,2),c=a[0],u=a[1],d=gs(function(f){e(function(){u(f)})});return[c,d]}var SE=ut.createContext(null),Nue=["component"],xue=["className"],Pue=["className"],Due=function(t,i){var a=y.useContext(SE);if(!a){var c=t.component,u=c===void 0?"div":c,d=fn(t,Nue);return y.createElement(u,He({},d,{ref:i}))}var f=a.className,m=fn(a,xue),g=t.className,_=fn(t,Pue);return y.createElement(SE.Provider,{value:null},y.createElement(Uf,He({ref:i,className:Ve(f,g)},m,_)))},b5=y.forwardRef(Due);b5.displayName="RawItem";var kue=["prefixCls","data","renderItem","renderRawItem","itemKey","itemWidth","ssr","style","className","maxCount","renderRest","renderRawRest","suffix","component","itemComponent","onVisibleChange"],T5="responsive",R5="invalidate";function Lue(e){return"+ ".concat(e.length," ...")}function Mue(e,t){var i=e.prefixCls,a=i===void 0?"rc-overflow":i,c=e.data,u=c===void 0?[]:c,d=e.renderItem,f=e.renderRawItem,m=e.itemKey,g=e.itemWidth,_=g===void 0?10:g,S=e.ssr,b=e.style,A=e.className,R=e.maxCount,w=e.renderRest,D=e.renderRawRest,x=e.suffix,O=e.component,P=O===void 0?"div":O,M=e.itemComponent,F=e.onVisibleChange,j=fn(e,kue),B=S==="full",H=Aue(),K=cf(H,null),$=Pe(K,2),Z=$[0],z=$[1],G=Z||0,ee=cf(H,new Map),re=Pe(ee,2),oe=re[0],pe=re[1],ue=cf(H,0),me=Pe(ue,2),fe=me[0],se=me[1],ae=cf(H,0),de=Pe(ae,2),ce=de[0],we=de[1],Ie=cf(H,0),$e=Pe(Ie,2),ke=$e[0],mt=$e[1],vt=y.useState(null),st=Pe(vt,2),rt=st[0],ft=st[1],Ye=y.useState(null),St=Pe(Ye,2),kt=St[0],Lt=St[1],Xe=y.useMemo(function(){return kt===null&&B?Number.MAX_SAFE_INTEGER:kt||0},[kt,Z]),qe=y.useState(!1),Ge=Pe(qe,2),nt=Ge[0],gt=Ge[1],bt="".concat(a,"-item"),Ot=Math.max(fe,ce),Mt=R===T5,Yt=u.length&&Mt,An=R===R5,yi=Yt||typeof R=="number"&&u.length>R,dr=y.useMemo(function(){var yt=u;return Yt?Z===null&&B?yt=u:yt=u.slice(0,Math.min(u.length,G/_)):typeof R=="number"&&(yt=u.slice(0,R)),yt},[u,_,Z,R,Yt]),Gn=y.useMemo(function(){return Yt?u.slice(Xe+1):u.slice(dr.length)},[u,dr,Yt,Xe]),mn=y.useCallback(function(yt,Qt){var an;return typeof m=="function"?m(yt):(an=m&&(yt==null?void 0:yt[m]))!==null&&an!==void 0?an:Qt},[m]),xr=y.useCallback(d||function(yt){return yt},[d]);function Cn(yt,Qt,an){kt===yt&&(Qt===void 0||Qt===rt)||(Lt(yt),an||(gt(yt<u.length-1),F==null||F(yt)),Qt!==void 0&&ft(Qt))}function Xt(yt,Qt){z(Qt.clientWidth)}function Jt(yt,Qt){pe(function(an){var _r=new Map(an);return Qt===null?_r.delete(yt):_r.set(yt,Qt),_r})}function Ro(yt,Qt){we(Qt),se(ce)}function qi(yt,Qt){mt(Qt)}function br(yt){return oe.get(mn(dr[yt],yt))}Or(function(){if(G&&typeof Ot=="number"&&dr){var yt=ke,Qt=dr.length,an=Qt-1;if(!Qt){Cn(0,null);return}for(var _r=0;_r<Qt;_r+=1){var ui=br(_r);if(B&&(ui=ui||0),ui===void 0){Cn(_r-1,void 0,!0);break}if(yt+=ui,an===0&&yt<=G||_r===an-1&&yt+br(an)<=G){Cn(an,null);break}else if(yt+Ot>G){Cn(_r-1,yt-ui-ke+ce);break}}x&&br(0)+ke>G&&ft(null)}},[G,oe,ce,ke,mn,dr]);var gn=nt&&!!Gn.length,je={};rt!==null&&Yt&&(je={position:"absolute",left:rt,top:0});var ct={prefixCls:bt,responsive:Yt,component:M,invalidate:An},vn=f?function(yt,Qt){var an=mn(yt,Qt);return y.createElement(SE.Provider,{key:an,value:Ee(Ee({},ct),{},{order:Qt,item:yt,itemKey:an,registerSize:Jt,display:Qt<=Xe})},f(yt,Qt))}:function(yt,Qt){var an=mn(yt,Qt);return y.createElement(Uf,He({},ct,{order:Qt,key:an,item:yt,renderItem:xr,itemKey:an,registerSize:Jt,display:Qt<=Xe}))},jt,Si={order:gn?Xe:Number.MAX_SAFE_INTEGER,className:"".concat(bt,"-rest"),registerSize:Ro,display:gn};if(D)D&&(jt=y.createElement(SE.Provider,{value:Ee(Ee({},ct),Si)},D(Gn)));else{var Pr=w||Lue;jt=y.createElement(Uf,He({},ct,Si),typeof Pr=="function"?Pr(Gn):Pr)}var Xn=y.createElement(P,He({className:Ve(!An&&a,A),style:b,ref:t},j),dr.map(vn),yi?jt:null,x&&y.createElement(Uf,He({},ct,{responsive:Mt,responsiveDisabled:!Yt,order:Xe,className:"".concat(bt,"-suffix"),registerSize:qi,display:!0,style:je}),x));return Mt&&(Xn=y.createElement(zu,{onResize:Xt,disabled:!Yt},Xn)),Xn}var Tc=y.forwardRef(Mue);Tc.displayName="Overflow";Tc.Item=b5;Tc.RESPONSIVE=T5;Tc.INVALIDATE=R5;function I5(e){var t;return e==null||(t=e.getRootNode)===null||t===void 0?void 0:t.call(e)}function Uue(e){return I5(e)!==(e==null?void 0:e.ownerDocument)}function M1(e){return Uue(e)?I5(e):null}var Nj=y.createContext(null);function xj(e){return e?Array.isArray(e)?e:[e]:[]}function jue(e,t,i,a){return y.useMemo(function(){var c=xj(i??t),u=xj(a??t),d=new Set(c),f=new Set(u);return e&&(d.has("hover")&&(d.delete("hover"),d.add("click")),f.has("hover")&&(f.delete("hover"),f.add("click"))),[d,f]},[e,t,i,a])}function Fue(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0;return i?e[0]===t[0]:e[0]===t[0]&&e[1]===t[1]}function Vue(e,t,i,a){for(var c=i.points,u=Object.keys(e),d=0;d<u.length;d+=1){var f,m=u[d];if(Fue((f=e[m])===null||f===void 0?void 0:f.points,c,a))return"".concat(t,"-placement-").concat(m)}return""}function Pj(e,t,i,a){return t||(i?{motionName:"".concat(e,"-").concat(i)}:a?{motionName:a}:null)}function Nm(e){return e.ownerDocument.defaultView}function U1(e){for(var t=[],i=e==null?void 0:e.parentElement,a=["hidden","scroll","clip","auto"];i;){var c=Nm(i).getComputedStyle(i),u=c.overflowX,d=c.overflowY,f=c.overflow;[u,d,f].some(function(m){return a.includes(m)})&&t.push(i),i=i.parentElement}return t}function dm(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return Number.isNaN(e)?t:e}function lf(e){return dm(parseFloat(e),0)}function Dj(e,t){var i=Ee({},e);return(t||[]).forEach(function(a){if(!(a instanceof HTMLBodyElement)){var c=Nm(a).getComputedStyle(a),u=c.overflow,d=c.overflowClipMargin,f=c.borderTopWidth,m=c.borderBottomWidth,g=c.borderLeftWidth,_=c.borderRightWidth,S=a.getBoundingClientRect(),b=a.offsetHeight,A=a.clientHeight,R=a.offsetWidth,w=a.clientWidth,D=lf(f),x=lf(m),O=lf(g),P=lf(_),M=dm(Math.round(S.width/R*1e3)/1e3),F=dm(Math.round(S.height/b*1e3)/1e3),j=(R-w-O-P)*M,B=(b-A-D-x)*F,H=D*F,K=x*F,$=O*M,Z=P*M,z=0,G=0;if(u==="clip"){var ee=lf(d);z=ee*M,G=ee*F}var re=S.x+$-z,oe=S.y+H-G,pe=re+S.width+2*z-$-Z-j,ue=oe+S.height+2*G-H-K-B;i.left=Math.max(i.left,re),i.top=Math.max(i.top,oe),i.right=Math.min(i.right,pe),i.bottom=Math.min(i.bottom,ue)}}),i}function kj(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i="".concat(t),a=i.match(/^(.*)\%$/);return a?e*(parseFloat(a[1])/100):parseFloat(i)}function Lj(e,t){var i=t||[],a=Pe(i,2),c=a[0],u=a[1];return[kj(e.width,c),kj(e.height,u)]}function Mj(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return[e[0],e[1]]}function Jd(e,t){var i=t[0],a=t[1],c,u;return i==="t"?u=e.y:i==="b"?u=e.y+e.height:u=e.y+e.height/2,a==="l"?c=e.x:a==="r"?c=e.x+e.width:c=e.x+e.width/2,{x:c,y:u}}function vl(e,t){var i={t:"b",b:"t",l:"r",r:"l"};return e.map(function(a,c){return c===t?i[a]||"c":a}).join("")}function Bue(e,t,i,a,c,u,d){var f=y.useState({ready:!1,offsetX:0,offsetY:0,offsetR:0,offsetB:0,arrowX:0,arrowY:0,scaleX:1,scaleY:1,align:c[a]||{}}),m=Pe(f,2),g=m[0],_=m[1],S=y.useRef(0),b=y.useMemo(function(){return t?U1(t):[]},[t]),A=y.useRef({}),R=function(){A.current={}};e||R();var w=gs(function(){if(t&&i&&e){let Ci=function(Qu,xs){var rc=arguments.length>2&&arguments[2]!==void 0?arguments[2]:St,Gc=z.x+Qu,Xl=z.y+xs,fp=Gc+ce,mp=Xl+de,Zu=Math.max(Gc,rc.left),gp=Math.max(Xl,rc.top),Et=Math.min(fp,rc.right),$t=Math.min(mp,rc.bottom);return Math.max(0,(Et-Zu)*($t-gp))},ql=function(){Dr=z.y+je,Pi=Dr+de,Xi=z.x+gn,po=Xi+ce};var nc=Ci,pp=ql,O=t,P=O.style.left,M=O.style.top,F=O.style.right,j=O.style.bottom,B=O.ownerDocument,H=Nm(O),K=Ee(Ee({},c[a]),u);O.style.left="0",O.style.top="0",O.style.right="auto",O.style.bottom="auto";var $;if(Array.isArray(i))$={x:i[0],y:i[1],width:0,height:0};else{var Z=i.getBoundingClientRect();$={x:Z.x,y:Z.y,width:Z.width,height:Z.height}}var z=O.getBoundingClientRect(),G=H.getComputedStyle(O),ee=G.width,re=G.height,oe=B.documentElement,pe=oe.clientWidth,ue=oe.clientHeight,me=oe.scrollWidth,fe=oe.scrollHeight,se=oe.scrollTop,ae=oe.scrollLeft,de=z.height,ce=z.width,we=$.height,Ie=$.width,$e={left:0,top:0,right:pe,bottom:ue},ke={left:-ae,top:-se,right:me-ae,bottom:fe-se},mt=K.htmlRegion,vt="visible",st="visibleFirst";mt!=="scroll"&&mt!==st&&(mt=vt);var rt=mt===st,ft=Dj(ke,b),Ye=Dj($e,b),St=mt===vt?Ye:ft,kt=rt?Ye:St;O.style.left="auto",O.style.top="auto",O.style.right="0",O.style.bottom="0";var Lt=O.getBoundingClientRect();O.style.left=P,O.style.top=M,O.style.right=F,O.style.bottom=j;var Xe=dm(Math.round(ce/parseFloat(ee)*1e3)/1e3),qe=dm(Math.round(de/parseFloat(re)*1e3)/1e3);if(Xe===0||qe===0||sE(i)&&!C_(i))return;var Ge=K.offset,nt=K.targetOffset,gt=Lj(z,Ge),bt=Pe(gt,2),Ot=bt[0],Mt=bt[1],Yt=Lj($,nt),An=Pe(Yt,2),yi=An[0],dr=An[1];$.x-=yi,$.y-=dr;var Gn=K.points||[],mn=Pe(Gn,2),xr=mn[0],Cn=mn[1],Xt=Mj(Cn),Jt=Mj(xr),Ro=Jd($,Xt),qi=Jd(z,Jt),br=Ee({},K),gn=Ro.x-qi.x+Ot,je=Ro.y-qi.y+Mt,ct=Ci(gn,je),vn=Ci(gn,je,Ye),jt=Jd($,["t","l"]),Si=Jd(z,["t","l"]),Pr=Jd($,["b","r"]),Xn=Jd(z,["b","r"]),yt=K.overflow||{},Qt=yt.adjustX,an=yt.adjustY,_r=yt.shiftX,ui=yt.shiftY,Tr=function(xs){return typeof xs=="boolean"?xs:xs>=0},Dr,Pi,Xi,po;ql();var fo=Tr(an),Js=Jt[0]===Xt[0];if(fo&&Jt[0]==="t"&&(Pi>kt.bottom||A.current.bt)){var zr=je;Js?zr-=de-we:zr=jt.y-Xn.y-Mt;var Qs=Ci(gn,zr),jc=Ci(gn,zr,Ye);Qs>ct||Qs===ct&&(!rt||jc>=vn)?(A.current.bt=!0,je=zr,br.points=[vl(Jt,0),vl(Xt,0)]):A.current.bt=!1}if(fo&&Jt[0]==="b"&&(Dr<kt.top||A.current.tb)){var Jn=je;Js?Jn+=de-we:Jn=Pr.y-Si.y-Mt;var Fc=Ci(gn,Jn),Di=Ci(gn,Jn,Ye);Fc>ct||Fc===ct&&(!rt||Di>=vn)?(A.current.tb=!0,je=Jn,br.points=[vl(Jt,0),vl(Xt,0)]):A.current.tb=!1}var Vc=Tr(Qt),Bc=Jt[1]===Xt[1];if(Vc&&Jt[1]==="l"&&(po>kt.right||A.current.rl)){var Xo=gn;Bc?Xo-=ce-Ie:Xo=jt.x-Xn.x-Ot;var Zs=Ci(Xo,je),Xa=Ci(Xo,je,Ye);Zs>ct||Zs===ct&&(!rt||Xa>=vn)?(A.current.rl=!0,gn=Xo,br.points=[vl(Jt,1),vl(Xt,1)]):A.current.rl=!1}if(Vc&&Jt[1]==="r"&&(Xi<kt.left||A.current.lr)){var Io=gn;Bc?Io+=ce-Ie:Io=Pr.x-Si.x-Ot;var $c=Ci(Io,je),Hc=Ci(Io,je,Ye);$c>ct||$c===ct&&(!rt||Hc>=vn)?(A.current.lr=!0,gn=Io,br.points=[vl(Jt,1),vl(Xt,1)]):A.current.lr=!1}ql();var Ta=_r===!0?0:_r;typeof Ta=="number"&&(Xi<Ye.left&&(gn-=Xi-Ye.left,$.x+Ie<Ye.left+Ta&&(gn+=$.x-Ye.left+Ie-Ta)),po>Ye.right&&(gn-=po-Ye.right,$.x>Ye.right-Ta&&(gn+=$.x-Ye.right+Ta)));var di=ui===!0?0:ui;typeof di=="number"&&(Dr<Ye.top&&(je-=Dr-Ye.top,$.y+we<Ye.top+di&&(je+=$.y-Ye.top+we-di)),Pi>Ye.bottom&&(je-=Pi-Ye.bottom,$.y>Ye.bottom-di&&(je+=$.y-Ye.bottom+di)));var Kr=z.x+gn,Jo=Kr+ce,ec=z.y+je,ar=ec+de,tc=$.x,Wc=tc+Ie,Ns=$.y,zl=Ns+we,Kl=Math.max(Kr,tc),Yl=Math.min(Jo,Wc),Fn=(Kl+Yl)/2,En=Fn-Kr,Nn=Math.max(ec,Ns),Yr=Math.min(ar,zl),kr=(Nn+Yr)/2,mo=kr-ec;d==null||d(t,br);var Ji=Lt.right-z.x-(gn+z.width),Ja=Lt.bottom-z.y-(je+z.height);_({ready:!0,offsetX:gn/Xe,offsetY:je/qe,offsetR:Ji/Xe,offsetB:Ja/qe,arrowX:En/Xe,arrowY:mo/qe,scaleX:Xe,scaleY:qe,align:br})}}),D=function(){S.current+=1;var P=S.current;Promise.resolve().then(function(){S.current===P&&w()})},x=function(){_(function(P){return Ee(Ee({},P),{},{ready:!1})})};return Or(x,[a]),Or(function(){e||x()},[e]),[g.ready,g.offsetX,g.offsetY,g.offsetR,g.offsetB,g.arrowX,g.arrowY,g.scaleX,g.scaleY,g.align,D]}function $ue(e,t,i,a){Or(function(){if(e&&t&&i){let S=function(){a()};var _=S,c=t,u=i,d=U1(c),f=U1(u),m=Nm(u),g=new Set([m].concat(Qe(d),Qe(f)));return g.forEach(function(b){b.addEventListener("scroll",S,{passive:!0})}),m.addEventListener("resize",S,{passive:!0}),a(),function(){g.forEach(function(b){b.removeEventListener("scroll",S),m.removeEventListener("resize",S)})}}},[e,t,i])}function Hue(e,t,i,a,c,u,d,f){var m=y.useRef(e),g=y.useRef(!1);m.current!==e&&(g.current=!0,m.current=e),y.useEffect(function(){var _=Wi(function(){g.current=!1});return function(){Wi.cancel(_)}},[e]),y.useEffect(function(){if(t&&a&&(!c||u)){var _=function(){var j=!1,B=function($){var Z=$.target;j=d(Z)},H=function($){var Z=$.target;!g.current&&m.current&&!j&&!d(Z)&&f(!1)};return[B,H]},S=_(),b=Pe(S,2),A=b[0],R=b[1],w=_(),D=Pe(w,2),x=D[0],O=D[1],P=Nm(a);P.addEventListener("mousedown",A),P.addEventListener("click",R),P.addEventListener("contextmenu",R);var M=M1(i);return M&&(M.addEventListener("mousedown",x),M.addEventListener("click",O),M.addEventListener("contextmenu",O)),function(){P.removeEventListener("mousedown",A),P.removeEventListener("click",R),P.removeEventListener("contextmenu",R),M&&(M.removeEventListener("mousedown",x),M.removeEventListener("click",O),M.removeEventListener("contextmenu",O))}}},[t,i,a,c,u])}function Wue(e){var t=e.prefixCls,i=e.align,a=e.arrow,c=e.arrowPos,u=a||{},d=u.className,f=u.content,m=c.x,g=m===void 0?0:m,_=c.y,S=_===void 0?0:_,b=y.useRef();if(!i||!i.points)return null;var A={position:"absolute"};if(i.autoArrow!==!1){var R=i.points[0],w=i.points[1],D=R[0],x=R[1],O=w[0],P=w[1];D===O||!["t","b"].includes(D)?A.top=S:D==="t"?A.top=0:A.bottom=0,x===P||!["l","r"].includes(x)?A.left=g:x==="l"?A.left=0:A.right=0}return y.createElement("div",{ref:b,className:Ve("".concat(t,"-arrow"),d),style:A},f)}function Gue(e){var t=e.prefixCls,i=e.open,a=e.zIndex,c=e.mask,u=e.motion;return c?y.createElement(Yu,He({},u,{motionAppear:!0,visible:i,removeOnLeave:!0}),function(d){var f=d.className;return y.createElement("div",{style:{zIndex:a},className:Ve("".concat(t,"-mask"),f)})}):null}var zue=y.memo(function(e){var t=e.children;return t},function(e,t){return t.cache}),Kue=y.forwardRef(function(e,t){var i=e.popup,a=e.className,c=e.prefixCls,u=e.style,d=e.target,f=e.onVisibleChanged,m=e.open,g=e.keepDom,_=e.onClick,S=e.mask,b=e.arrow,A=e.arrowPos,R=e.align,w=e.motion,D=e.maskMotion,x=e.forceRender,O=e.getPopupContainer,P=e.autoDestroy,M=e.portal,F=e.zIndex,j=e.onMouseEnter,B=e.onMouseLeave,H=e.ready,K=e.offsetX,$=e.offsetY,Z=e.offsetR,z=e.offsetB,G=e.onAlign,ee=e.onPrepare,re=e.stretch,oe=e.targetWidth,pe=e.targetHeight,ue=typeof i=="function"?i():i,me=m||g,fe=(O==null?void 0:O.length)>0,se=y.useState(!O||!fe),ae=Pe(se,2),de=ae[0],ce=ae[1];if(Or(function(){!de&&fe&&d&&ce(!0)},[de,fe,d]),!de)return null;var we="auto",Ie={left:"-1000vw",top:"-1000vh",right:we,bottom:we};if(H||!m){var $e=R.points,ke=R._experimental,mt=ke==null?void 0:ke.dynamicInset,vt=mt&&$e[0][1]==="r",st=mt&&$e[0][0]==="b";vt?(Ie.right=Z,Ie.left=we):(Ie.left=K,Ie.right=we),st?(Ie.bottom=z,Ie.top=we):(Ie.top=$,Ie.bottom=we)}var rt={};return re&&(re.includes("height")&&pe?rt.height=pe:re.includes("minHeight")&&pe&&(rt.minHeight=pe),re.includes("width")&&oe?rt.width=oe:re.includes("minWidth")&&oe&&(rt.minWidth=oe)),m||(rt.pointerEvents="none"),y.createElement(M,{open:x||me,getContainer:O&&function(){return O(d)},autoDestroy:P},y.createElement(Gue,{prefixCls:c,open:m,zIndex:F,mask:S,motion:D}),y.createElement(zu,{onResize:G,disabled:!m},function(ft){return y.createElement(Yu,He({motionAppear:!0,motionEnter:!0,motionLeave:!0,removeOnLeave:!1,forceRender:x,leavedClassName:"".concat(c,"-hidden")},w,{onAppearPrepare:ee,onEnterPrepare:ee,visible:m,onVisibleChanged:function(St){var kt;w==null||(kt=w.onVisibleChanged)===null||kt===void 0||kt.call(w,St),f(St)}}),function(Ye,St){var kt=Ye.className,Lt=Ye.style,Xe=Ve(c,kt,a);return y.createElement("div",{ref:Is(ft,t,St),className:Xe,style:Ee(Ee(Ee(Ee({"--arrow-x":"".concat(A.x||0,"px"),"--arrow-y":"".concat(A.y||0,"px")},Ie),rt),Lt),{},{boxSizing:"border-box",zIndex:F},u),onMouseEnter:j,onMouseLeave:B,onClick:_},b&&y.createElement(Wue,{prefixCls:c,arrow:b,arrowPos:A,align:R}),y.createElement(zue,{cache:!m},ue))})}))}),Yue=y.forwardRef(function(e,t){var i=e.children,a=e.getTriggerDOMNode,c=Xh(i),u=y.useCallback(function(f){ew(t,a?a(f):f)},[a]),d=tw(u,i.ref);return c?y.cloneElement(i,{ref:d}):i}),que=["prefixCls","children","action","showAction","hideAction","popupVisible","defaultPopupVisible","onPopupVisibleChange","afterPopupVisibleChange","mouseEnterDelay","mouseLeaveDelay","focusDelay","blurDelay","mask","maskClosable","getPopupContainer","forceRender","autoDestroy","destroyPopupOnHide","popup","popupClassName","popupStyle","popupPlacement","builtinPlacements","popupAlign","zIndex","stretch","getPopupClassNameFromAlign","alignPoint","onPopupClick","onPopupAlign","arrow","popupMotion","maskMotion","popupTransitionName","popupAnimation","maskTransitionName","maskAnimation","className","getTriggerDOMNode"];function Xue(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:o5,t=y.forwardRef(function(i,a){var c=i.prefixCls,u=c===void 0?"rc-trigger-popup":c,d=i.children,f=i.action,m=f===void 0?"hover":f,g=i.showAction,_=i.hideAction,S=i.popupVisible,b=i.defaultPopupVisible,A=i.onPopupVisibleChange,R=i.afterPopupVisibleChange,w=i.mouseEnterDelay,D=i.mouseLeaveDelay,x=D===void 0?.1:D,O=i.focusDelay,P=i.blurDelay,M=i.mask,F=i.maskClosable,j=F===void 0?!0:F,B=i.getPopupContainer,H=i.forceRender,K=i.autoDestroy,$=i.destroyPopupOnHide,Z=i.popup,z=i.popupClassName,G=i.popupStyle,ee=i.popupPlacement,re=i.builtinPlacements,oe=re===void 0?{}:re,pe=i.popupAlign,ue=i.zIndex,me=i.stretch,fe=i.getPopupClassNameFromAlign,se=i.alignPoint,ae=i.onPopupClick,de=i.onPopupAlign,ce=i.arrow,we=i.popupMotion,Ie=i.maskMotion,$e=i.popupTransitionName,ke=i.popupAnimation,mt=i.maskTransitionName,vt=i.maskAnimation,st=i.className,rt=i.getTriggerDOMNode,ft=fn(i,que),Ye=K||$||!1,St=y.useState(!1),kt=Pe(St,2),Lt=kt[0],Xe=kt[1];Or(function(){Xe(Rue())},[]);var qe=y.useRef({}),Ge=y.useContext(Nj),nt=y.useMemo(function(){return{registerSubPopup:function($t,xn){qe.current[$t]=xn,Ge==null||Ge.registerSubPopup($t,xn)}}},[Ge]),gt=qce(),bt=y.useState(null),Ot=Pe(bt,2),Mt=Ot[0],Yt=Ot[1],An=gs(function(Et){sE(Et)&&Mt!==Et&&Yt(Et),Ge==null||Ge.registerSubPopup(gt,Et)}),yi=y.useState(null),dr=Pe(yi,2),Gn=dr[0],mn=dr[1],xr=gs(function(Et){sE(Et)&&Gn!==Et&&mn(Et)}),Cn=y.Children.only(d),Xt=(Cn==null?void 0:Cn.props)||{},Jt={},Ro=gs(function(Et){var $t,xn,Lr=Gn;return(Lr==null?void 0:Lr.contains(Et))||(($t=M1(Lr))===null||$t===void 0?void 0:$t.host)===Et||Et===Lr||(Mt==null?void 0:Mt.contains(Et))||((xn=M1(Mt))===null||xn===void 0?void 0:xn.host)===Et||Et===Mt||Object.values(qe.current).some(function(hr){return(hr==null?void 0:hr.contains(Et))||Et===hr})}),qi=Pj(u,we,ke,$e),br=Pj(u,Ie,vt,mt),gn=y.useState(b||!1),je=Pe(gn,2),ct=je[0],vn=je[1],jt=S??ct,Si=gs(function(Et){S===void 0&&vn(Et)});Or(function(){vn(S||!1)},[S]);var Pr=y.useRef(jt);Pr.current=jt;var Xn=gs(function(Et){jt!==Et&&(Si(Et),A==null||A(Et))}),yt=y.useRef(),Qt=function(){clearTimeout(yt.current)},an=function($t){var xn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;Qt(),xn===0?Xn($t):yt.current=setTimeout(function(){Xn($t)},xn*1e3)};y.useEffect(function(){return Qt},[]);var _r=y.useState(!1),ui=Pe(_r,2),Tr=ui[0],Dr=ui[1];Or(function(Et){(!Et||jt)&&Dr(!0)},[jt]);var Pi=y.useState(null),Xi=Pe(Pi,2),po=Xi[0],fo=Xi[1],Js=y.useState([0,0]),zr=Pe(Js,2),Qs=zr[0],jc=zr[1],Jn=function($t){jc([$t.clientX,$t.clientY])},Fc=Bue(jt,Mt,se?Qs:Gn,ee,oe,pe,de),Di=Pe(Fc,11),Vc=Di[0],Bc=Di[1],Xo=Di[2],Zs=Di[3],Xa=Di[4],Io=Di[5],$c=Di[6],Hc=Di[7],Ta=Di[8],di=Di[9],Kr=Di[10],Jo=gs(function(){Tr||Kr()});$ue(jt,Gn,Mt,Jo),Or(function(){Jo()},[Qs,ee]),Or(function(){jt&&!(oe!=null&&oe[ee])&&Jo()},[JSON.stringify(pe)]);var ec=y.useMemo(function(){var Et=Vue(oe,u,di,se);return Ve(Et,fe==null?void 0:fe(di))},[di,fe,oe,u,se]);y.useImperativeHandle(a,function(){return{forceAlign:Jo}});var ar=function($t){Dr(!1),Kr(),R==null||R($t)},tc=function(){return new Promise(function($t){fo(function(){return $t})})};Or(function(){po&&(Kr(),po(),fo(null))},[po]);var Wc=y.useState(0),Ns=Pe(Wc,2),zl=Ns[0],Kl=Ns[1],Yl=y.useState(0),Fn=Pe(Yl,2),En=Fn[0],Nn=Fn[1],Yr=function($t,xn){if(Jo(),me){var Lr=xn.getBoundingClientRect();Kl(Lr.width),Nn(Lr.height)}},kr=jue(Lt,m,g,_),mo=Pe(kr,2),Ji=mo[0],Ja=mo[1],nc=function($t,xn,Lr,hr){Jt[$t]=function(Vm){var ed;hr==null||hr(Vm),an(xn,Lr);for(var td=arguments.length,Bm=new Array(td>1?td-1:0),nd=1;nd<td;nd++)Bm[nd-1]=arguments[nd];(ed=Xt[$t])===null||ed===void 0||ed.call.apply(ed,[Xt,Vm].concat(Bm))}},pp=Ji.has("click"),Ci=Ja.has("click")||Ja.has("contextMenu");(pp||Ci)&&(Jt.onClick=function(Et){var $t;Pr.current&&Ci?an(!1):!Pr.current&&pp&&(Jn(Et),an(!0));for(var xn=arguments.length,Lr=new Array(xn>1?xn-1:0),hr=1;hr<xn;hr++)Lr[hr-1]=arguments[hr];($t=Xt.onClick)===null||$t===void 0||$t.call.apply($t,[Xt,Et].concat(Lr))}),Hue(jt,Ci,Gn,Mt,M,j,Ro,an);var ql=Ji.has("hover"),Qu=Ja.has("hover"),xs,rc;ql&&(nc("onMouseEnter",!0,w,function(Et){Jn(Et)}),xs=function(){an(!0,w)},se&&(Jt.onMouseMove=function(Et){var $t;($t=Xt.onMouseMove)===null||$t===void 0||$t.call(Xt,Et)})),Qu&&(nc("onMouseLeave",!1,x),rc=function(){an(!1,x)}),Ji.has("focus")&&nc("onFocus",!0,O),Ja.has("focus")&&nc("onBlur",!1,P),Ji.has("contextMenu")&&(Jt.onContextMenu=function(Et){var $t;Pr.current&&Ja.has("contextMenu")?an(!1):(Jn(Et),an(!0)),Et.preventDefault();for(var xn=arguments.length,Lr=new Array(xn>1?xn-1:0),hr=1;hr<xn;hr++)Lr[hr-1]=arguments[hr];($t=Xt.onContextMenu)===null||$t===void 0||$t.call.apply($t,[Xt,Et].concat(Lr))}),st&&(Jt.className=Ve(Xt.className,st));var Gc=Ee(Ee({},Xt),Jt),Xl={},fp=["onContextMenu","onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur"];fp.forEach(function(Et){ft[Et]&&(Xl[Et]=function(){for(var $t,xn=arguments.length,Lr=new Array(xn),hr=0;hr<xn;hr++)Lr[hr]=arguments[hr];($t=Gc[Et])===null||$t===void 0||$t.call.apply($t,[Gc].concat(Lr)),ft[Et].apply(ft,Lr)})});var mp=y.cloneElement(Cn,Ee(Ee({},Gc),Xl)),Zu={x:Io,y:$c},gp=ce?Ee({},ce!==!0?ce:{}):null;return y.createElement(y.Fragment,null,y.createElement(zu,{disabled:!jt,ref:xr,onResize:Yr},y.createElement(Yue,{getTriggerDOMNode:rt},mp)),y.createElement(Nj.Provider,{value:nt},y.createElement(Kue,{portal:e,ref:An,prefixCls:u,popup:Z,className:Ve(z,ec),style:G,target:Gn,onMouseEnter:xs,onMouseLeave:rc,zIndex:ue,open:jt,keepDom:Tr,onClick:ae,mask:M,motion:qi,maskMotion:br,onVisibleChanged:ar,onPrepare:tc,forceRender:H,autoDestroy:Ye,getPopupContainer:B,align:di,arrow:gp,arrowPos:Zu,ready:Vc,offsetX:Bc,offsetY:Xo,offsetR:Zs,offsetB:Xa,onAlign:Jo,stretch:me,targetWidth:zl/Hc,targetHeight:En/Ta})))});return t}const w5=Xue(o5);function jf(e,t,i){return Ve({[`${e}-status-success`]:t==="success",[`${e}-status-warning`]:t==="warning",[`${e}-status-error`]:t==="error",[`${e}-status-validating`]:t==="validating",[`${e}-has-feedback`]:i})}const O5=(e,t)=>t||e;var A5={};Object.defineProperty(A5,"__esModule",{value:!0});var Jue={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"},Que=A5.default=Jue;function Zue(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function ede(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{},a=Object.keys(i);typeof Object.getOwnPropertySymbols=="function"&&(a=a.concat(Object.getOwnPropertySymbols(i).filter(function(c){return Object.getOwnPropertyDescriptor(i,c).enumerable}))),a.forEach(function(c){Zue(e,c,i[c])})}return e}function tde(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),i.push.apply(i,a)}return i}function nde(e,t){return t=t??{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):tde(Object(t)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))}),e}var rde=function(e,t){return y.createElement(xi,nde(ede({},e),{ref:t,icon:Que}))};const ide=y.forwardRef(rde);var N5={};Object.defineProperty(N5,"__esModule",{value:!0});var ode={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"}}]},name:"search",theme:"outlined"},ade=N5.default=ode;function sde(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function cde(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{},a=Object.keys(i);typeof Object.getOwnPropertySymbols=="function"&&(a=a.concat(Object.getOwnPropertySymbols(i).filter(function(c){return Object.getOwnPropertyDescriptor(i,c).enumerable}))),a.forEach(function(c){sde(e,c,i[c])})}return e}function lde(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),i.push.apply(i,a)}return i}function ude(e,t){return t=t??{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):lde(Object(t)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))}),e}var dde=function(e,t){return y.createElement(xi,ude(cde({},e),{ref:t,icon:ade}))};const hde=y.forwardRef(dde),hm=["xxl","xl","lg","md","sm","xs"],pde=e=>({xs:`(max-width: ${e.screenXSMax}px)`,sm:`(min-width: ${e.screenSM}px)`,md:`(min-width: ${e.screenMD}px)`,lg:`(min-width: ${e.screenLG}px)`,xl:`(min-width: ${e.screenXL}px)`,xxl:`(min-width: ${e.screenXXL}px)`}),fde=e=>{const t=e,i=[].concat(hm).reverse();return i.forEach((a,c)=>{const u=a.toUpperCase(),d=`screen${u}Min`,f=`screen${u}`;if(!(t[d]<=t[f]))throw new Error(`${d}<=${f} fails : !(${t[d]}<=${t[f]})`);if(c<i.length-1){const m=`screen${u}Max`;if(!(t[f]<=t[m]))throw new Error(`${f}<=${m} fails : !(${t[f]}<=${t[m]})`);const _=`screen${i[c+1].toUpperCase()}Min`;if(!(t[m]<=t[_]))throw new Error(`${m}<=${_} fails : !(${t[m]}<=${t[_]})`)}}),e};function mde(){const[,e]=Qh(),t=pde(fde(e));return ut.useMemo(()=>{const i=new Map;let a=-1,c={};return{matchHandlers:{},dispatch(u){return c=u,i.forEach(d=>d(c)),i.size>=1},subscribe(u){return i.size||this.register(),a+=1,i.set(a,u),u(c),a},unsubscribe(u){i.delete(u),i.size||this.unregister()},unregister(){Object.keys(t).forEach(u=>{const d=t[u],f=this.matchHandlers[d];f==null||f.mql.removeListener(f==null?void 0:f.listener)}),i.clear()},register(){Object.keys(t).forEach(u=>{const d=t[u],f=g=>{let{matches:_}=g;this.dispatch(Object.assign(Object.assign({},c),{[u]:_}))},m=window.matchMedia(d);m.addListener(f),this.matchHandlers[d]={mql:m,listener:f},f(m)})},responsiveMap:t}},[e])}var Qd={shiftX:64,adjustY:1},Zd={adjustX:1,shiftY:!0},Ma=[0,0],gde={left:{points:["cr","cl"],overflow:Zd,offset:[-4,0],targetOffset:Ma},right:{points:["cl","cr"],overflow:Zd,offset:[4,0],targetOffset:Ma},top:{points:["bc","tc"],overflow:Qd,offset:[0,-4],targetOffset:Ma},bottom:{points:["tc","bc"],overflow:Qd,offset:[0,4],targetOffset:Ma},topLeft:{points:["bl","tl"],overflow:Qd,offset:[0,-4],targetOffset:Ma},leftTop:{points:["tr","tl"],overflow:Zd,offset:[-4,0],targetOffset:Ma},topRight:{points:["br","tr"],overflow:Qd,offset:[0,-4],targetOffset:Ma},rightTop:{points:["tl","tr"],overflow:Zd,offset:[4,0],targetOffset:Ma},bottomRight:{points:["tr","br"],overflow:Qd,offset:[0,4],targetOffset:Ma},rightBottom:{points:["bl","br"],overflow:Zd,offset:[4,0],targetOffset:Ma},bottomLeft:{points:["tl","bl"],overflow:Qd,offset:[0,4],targetOffset:Ma},leftBottom:{points:["br","bl"],overflow:Zd,offset:[-4,0],targetOffset:Ma}};function x5(e){var t=e.children,i=e.prefixCls,a=e.id,c=e.overlayInnerStyle,u=e.className,d=e.style;return y.createElement("div",{className:Ve("".concat(i,"-content"),u),style:d},y.createElement("div",{className:"".concat(i,"-inner"),id:a,role:"tooltip",style:c},typeof t=="function"?t():t))}var vde=["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","afterVisibleChange","transitionName","animation","motion","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer","overlayInnerStyle","arrowContent","overlay","id","showArrow"],Ede=function(t,i){var a=t.overlayClassName,c=t.trigger,u=c===void 0?["hover"]:c,d=t.mouseEnterDelay,f=d===void 0?0:d,m=t.mouseLeaveDelay,g=m===void 0?.1:m,_=t.overlayStyle,S=t.prefixCls,b=S===void 0?"rc-tooltip":S,A=t.children,R=t.onVisibleChange,w=t.afterVisibleChange,D=t.transitionName,x=t.animation,O=t.motion,P=t.placement,M=P===void 0?"right":P,F=t.align,j=F===void 0?{}:F,B=t.destroyTooltipOnHide,H=B===void 0?!1:B,K=t.defaultVisible,$=t.getTooltipContainer,Z=t.overlayInnerStyle;t.arrowContent;var z=t.overlay,G=t.id,ee=t.showArrow,re=ee===void 0?!0:ee,oe=fn(t,vde),pe=y.useRef(null);y.useImperativeHandle(i,function(){return pe.current});var ue=Ee({},oe);"visible"in t&&(ue.popupVisible=t.visible);var me=function(){return y.createElement(x5,{key:"content",prefixCls:b,id:G,overlayInnerStyle:Z},z)};return y.createElement(w5,He({popupClassName:a,prefixCls:b,popup:me,action:u,builtinPlacements:gde,popupPlacement:M,ref:pe,popupAlign:j,getPopupContainer:$,onPopupVisibleChange:R,afterPopupVisibleChange:w,popupTransitionName:D,popupAnimation:x,popupMotion:O,defaultPopupVisible:K,autoDestroy:H,mouseLeaveDelay:g,popupStyle:_,mouseEnterDelay:f,arrow:re},ue),A)};const _de=y.forwardRef(Ede),P5=8;function D5(e){const t=P5,{contentRadius:i,limitVerticalRadius:a}=e,c=i>12?i+2:12;return{dropdownArrowOffset:c,dropdownArrowOffsetVertical:a?t:c}}function Jg(e,t){return e?t:{}}function yde(e,t){const{componentCls:i,sizePopupArrow:a,borderRadiusXS:c,borderRadiusOuter:u,boxShadowPopoverArrow:d}=e,{colorBg:f,contentRadius:m=e.borderRadiusLG,limitVerticalRadius:g,arrowDistance:_=0,arrowPlacement:S={left:!0,right:!0,top:!0,bottom:!0}}=t,{dropdownArrowOffsetVertical:b,dropdownArrowOffset:A}=D5({contentRadius:m,limitVerticalRadius:g});return{[i]:Object.assign(Object.assign(Object.assign(Object.assign({[`${i}-arrow`]:[Object.assign(Object.assign({position:"absolute",zIndex:1,display:"block"},fie(a,c,u,f,d)),{"&:before":{background:f}})]},Jg(!!S.top,{[[`&-placement-top ${i}-arrow`,`&-placement-topLeft ${i}-arrow`,`&-placement-topRight ${i}-arrow`].join(",")]:{bottom:_,transform:"translateY(100%) rotate(180deg)"},[`&-placement-top ${i}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(100%) rotate(180deg)"},[`&-placement-topLeft ${i}-arrow`]:{left:{_skip_check_:!0,value:A}},[`&-placement-topRight ${i}-arrow`]:{right:{_skip_check_:!0,value:A}}})),Jg(!!S.bottom,{[[`&-placement-bottom ${i}-arrow`,`&-placement-bottomLeft ${i}-arrow`,`&-placement-bottomRight ${i}-arrow`].join(",")]:{top:_,transform:"translateY(-100%)"},[`&-placement-bottom ${i}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(-100%)"},[`&-placement-bottomLeft ${i}-arrow`]:{left:{_skip_check_:!0,value:A}},[`&-placement-bottomRight ${i}-arrow`]:{right:{_skip_check_:!0,value:A}}})),Jg(!!S.left,{[[`&-placement-left ${i}-arrow`,`&-placement-leftTop ${i}-arrow`,`&-placement-leftBottom ${i}-arrow`].join(",")]:{right:{_skip_check_:!0,value:_},transform:"translateX(100%) rotate(90deg)"},[`&-placement-left ${i}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(100%) rotate(90deg)"},[`&-placement-leftTop ${i}-arrow`]:{top:b},[`&-placement-leftBottom ${i}-arrow`]:{bottom:b}})),Jg(!!S.right,{[[`&-placement-right ${i}-arrow`,`&-placement-rightTop ${i}-arrow`,`&-placement-rightBottom ${i}-arrow`].join(",")]:{left:{_skip_check_:!0,value:_},transform:"translateX(-100%) rotate(-90deg)"},[`&-placement-right ${i}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(-100%) rotate(-90deg)"},[`&-placement-rightTop ${i}-arrow`]:{top:b},[`&-placement-rightBottom ${i}-arrow`]:{bottom:b}}))}}function Sde(e,t,i,a){if(a===!1)return{adjustX:!1,adjustY:!1};const c=a&&typeof a=="object"?a:{},u={};switch(e){case"top":case"bottom":u.shiftX=t.dropdownArrowOffset*2+i;break;case"left":case"right":u.shiftY=t.dropdownArrowOffsetVertical*2+i;break}const d=Object.assign(Object.assign({},u),c);return d.shiftX||(d.adjustX=!0),d.shiftY||(d.adjustY=!0),d}const Uj={left:{points:["cr","cl"]},right:{points:["cl","cr"]},top:{points:["bc","tc"]},bottom:{points:["tc","bc"]},topLeft:{points:["bl","tl"]},leftTop:{points:["tr","tl"]},topRight:{points:["br","tr"]},rightTop:{points:["tl","tr"]},bottomRight:{points:["tr","br"]},rightBottom:{points:["bl","br"]},bottomLeft:{points:["tl","bl"]},leftBottom:{points:["br","bl"]}},Cde={topLeft:{points:["bl","tc"]},leftTop:{points:["tr","cl"]},topRight:{points:["br","tc"]},rightTop:{points:["tl","cr"]},bottomRight:{points:["tr","bc"]},rightBottom:{points:["bl","cr"]},bottomLeft:{points:["tl","bc"]},leftBottom:{points:["br","cl"]}},bde=new Set(["topLeft","topRight","bottomLeft","bottomRight","leftTop","leftBottom","rightTop","rightBottom"]);function Tde(e){const{arrowWidth:t,autoAdjustOverflow:i,arrowPointAtCenter:a,offset:c,borderRadius:u,visibleFirst:d}=e,f=t/2,m={};return Object.keys(Uj).forEach(g=>{const _=a&&Cde[g]||Uj[g],S=Object.assign(Object.assign({},_),{offset:[0,0]});switch(m[g]=S,bde.has(g)&&(S.autoArrow=!1),g){case"top":case"topLeft":case"topRight":S.offset[1]=-f-c;break;case"bottom":case"bottomLeft":case"bottomRight":S.offset[1]=f+c;break;case"left":case"leftTop":case"leftBottom":S.offset[0]=-f-c;break;case"right":case"rightTop":case"rightBottom":S.offset[0]=f+c;break}const b=D5({contentRadius:u,limitVerticalRadius:!0});if(a)switch(g){case"topLeft":case"bottomLeft":S.offset[0]=-b.dropdownArrowOffset-f;break;case"topRight":case"bottomRight":S.offset[0]=b.dropdownArrowOffset+f;break;case"leftTop":case"rightTop":S.offset[1]=-b.dropdownArrowOffset-f;break;case"leftBottom":case"rightBottom":S.offset[1]=b.dropdownArrowOffset+f;break}S.overflow=Sde(g,b,t,i),d&&(S.htmlRegion="visibleFirst")}),m}const Rde=e=>{const t=e!=null&&e.algorithm?hE(e.algorithm):hE(Tm),i=Object.assign(Object.assign({},bm),e==null?void 0:e.token);return CB(i,{override:e==null?void 0:e.token},t,FB)},Ide=Rde;function wde(e){const{sizeUnit:t,sizeStep:i}=e,a=i-2;return{sizeXXL:t*(a+10),sizeXL:t*(a+6),sizeLG:t*(a+2),sizeMD:t*(a+2),sizeMS:t*(a+1),size:t*a,sizeSM:t*a,sizeXS:t*(a-1),sizeXXS:t*(a-1)}}const Ode=(e,t)=>{const i=t??Tm(e),a=i.fontSizeSM,c=i.controlHeight-4;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},i),wde(t??e)),jB(a)),{controlHeight:c}),MB(Object.assign(Object.assign({},i),{controlHeight:c})))},Ade=Ode,El=(e,t)=>new $i(e).setAlpha(t).toRgbString(),eh=(e,t)=>new $i(e).lighten(t).toHexString(),Nde=e=>{const t=xc(e,{theme:"dark"});return{1:t[0],2:t[1],3:t[2],4:t[3],5:t[6],6:t[5],7:t[4],8:t[6],9:t[5],10:t[4]}},xde=(e,t)=>{const i=e||"#000",a=t||"#fff";return{colorBgBase:i,colorTextBase:a,colorText:El(a,.85),colorTextSecondary:El(a,.65),colorTextTertiary:El(a,.45),colorTextQuaternary:El(a,.25),colorFill:El(a,.18),colorFillSecondary:El(a,.12),colorFillTertiary:El(a,.08),colorFillQuaternary:El(a,.04),colorBgElevated:eh(i,12),colorBgContainer:eh(i,8),colorBgLayout:eh(i,0),colorBgSpotlight:eh(i,26),colorBorder:eh(i,26),colorBorderSecondary:eh(i,19)}},Pde=(e,t)=>{const i=Object.keys(hw).map(c=>{const u=xc(e[c],{theme:"dark"});return new Array(10).fill(1).reduce((d,f,m)=>(d[`${c}-${m+1}`]=u[m],d[`${c}${m+1}`]=u[m],d),{})}).reduce((c,u)=>(c=Object.assign(Object.assign({},c),u),c),{}),a=t??Tm(e);return Object.assign(Object.assign(Object.assign({},a),i),UB(e,{generateColorPalettes:Nde,generateNeutralColorPalettes:xde}))},Dde=Pde;function kde(){const[e,t,i]=Qh();return{theme:e,token:t,hashId:i}}const Lde={defaultConfig:fE,defaultSeed:fE.token,useToken:kde,defaultAlgorithm:Tm,darkAlgorithm:Dde,compactAlgorithm:Ade,getDesignToken:Ide},Mde=e=>{const{componentCls:t,tooltipMaxWidth:i,tooltipColor:a,tooltipBg:c,tooltipBorderRadius:u,zIndexPopup:d,controlHeight:f,boxShadowSecondary:m,paddingSM:g,paddingXS:_,tooltipRadiusOuter:S}=e;return[{[t]:Object.assign(Object.assign(Object.assign(Object.assign({},Ku(e)),{position:"absolute",zIndex:d,display:"block",width:"max-content",maxWidth:i,visibility:"visible",transformOrigin:"var(--arrow-x, 50%) var(--arrow-y, 50%)","&-hidden":{display:"none"},"--antd-arrow-background-color":c,[`${t}-inner`]:{minWidth:f,minHeight:f,padding:`${g/2}px ${_}px`,color:a,textAlign:"start",textDecoration:"none",wordWrap:"break-word",backgroundColor:c,borderRadius:u,boxShadow:m,boxSizing:"border-box"},[["&-placement-left","&-placement-leftTop","&-placement-leftBottom","&-placement-right","&-placement-rightTop","&-placement-rightBottom"].join(",")]:{[`${t}-inner`]:{borderRadius:Math.min(u,P5)}},[`${t}-content`]:{position:"relative"}}),Sie(e,(b,A)=>{let{darkColor:R}=A;return{[`&${t}-${b}`]:{[`${t}-inner`]:{backgroundColor:R},[`${t}-arrow`]:{"--antd-arrow-background-color":R}}}})),{"&-rtl":{direction:"rtl"}})},yde(Ki(e,{borderRadiusOuter:S}),{colorBg:"var(--antd-arrow-background-color)",contentRadius:u,limitVerticalRadius:!0}),{[`${t}-pure`]:{position:"relative",maxWidth:"none",margin:e.sizePopupArrow}}]},k5=(e,t)=>ws("Tooltip",a=>{if(t===!1)return[];const{borderRadius:c,colorTextLightSolid:u,colorBgDefault:d,borderRadiusOuter:f}=a,m=Ki(a,{tooltipMaxWidth:250,tooltipColor:u,tooltipBorderRadius:c,tooltipBg:d,tooltipRadiusOuter:f>4?4:f});return[Mde(m),v5(a,"zoom-big-fast")]},a=>{let{zIndexPopupBase:c,colorBgSpotlight:u}=a;return{zIndexPopup:c+70,colorBgDefault:u}},{resetStyle:!1})(e),Ude=pE.map(e=>`${e}-inverse`);function jde(e){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0)?[].concat(Qe(Ude),Qe(pE)).includes(e):pE.includes(e)}function L5(e,t){const i=jde(t),a=Ve({[`${e}-${t}`]:t&&i}),c={},u={};return t&&!i&&(c.background=t,u["--antd-arrow-background-color"]=t),{className:a,overlayStyle:c,arrowStyle:u}}function Fde(e){const{prefixCls:t,className:i,placement:a="top",title:c,color:u,overlayInnerStyle:d}=e,{getPrefixCls:f}=y.useContext(Hn),m=f("tooltip",t),[g,_]=k5(m,!0),S=L5(m,u),b=Object.assign(Object.assign({},d),S.overlayStyle),A=S.arrowStyle;return g(y.createElement("div",{className:Ve(_,m,`${m}-pure`,`${m}-placement-${a}`,i,S.className),style:A},y.createElement("div",{className:`${m}-arrow`}),y.createElement(x5,Object.assign({},e,{className:_,prefixCls:m,overlayInnerStyle:b}),c)))}var Vde=globalThis&&globalThis.__rest||function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(i[a[c]]=e[a[c]]);return i};const{useToken:Bde}=Lde,$de=(e,t)=>{const i={},a=Object.assign({},e);return t.forEach(c=>{e&&c in e&&(i[c]=e[c],delete a[c])}),{picked:i,omitted:a}};function Hde(e,t){const i=e.type;if((i.__ANT_BUTTON===!0||e.type==="button")&&e.props.disabled||i.__ANT_SWITCH===!0&&(e.props.disabled||e.props.loading)||i.__ANT_RADIO===!0&&e.props.disabled){const{picked:a,omitted:c}=$de(e.props.style,["position","left","right","top","bottom","float","display","zIndex"]),u=Object.assign(Object.assign({display:"inline-block"},a),{cursor:"not-allowed",width:e.props.block?"100%":void 0}),d=Object.assign(Object.assign({},c),{pointerEvents:"none"}),f=bs(e,{style:d,className:null});return y.createElement("span",{style:u,className:Ve(e.props.className,`${t}-disabled-compatible-wrapper`)},f)}return e}const M5=y.forwardRef((e,t)=>{var i,a;const{prefixCls:c,openClassName:u,getTooltipContainer:d,overlayClassName:f,color:m,overlayInnerStyle:g,children:_,afterOpenChange:S,afterVisibleChange:b,destroyTooltipOnHide:A,arrow:R=!0,title:w,overlay:D,builtinPlacements:x,arrowPointAtCenter:O=!1,autoAdjustOverflow:P=!0}=e,M=!!R,{token:F}=Bde(),{getPopupContainer:j,getPrefixCls:B,direction:H}=y.useContext(Hn),K=y.useRef(null),$=()=>{var Xe;(Xe=K.current)===null||Xe===void 0||Xe.forceAlign()};y.useImperativeHandle(t,()=>({forceAlign:$,forcePopupAlign:()=>{$()}}));const[Z,z]=bc(!1,{value:(i=e.open)!==null&&i!==void 0?i:e.visible,defaultValue:(a=e.defaultOpen)!==null&&a!==void 0?a:e.defaultVisible}),G=!w&&!D&&w!==0,ee=Xe=>{var qe,Ge;z(G?!1:Xe),G||((qe=e.onOpenChange)===null||qe===void 0||qe.call(e,Xe),(Ge=e.onVisibleChange)===null||Ge===void 0||Ge.call(e,Xe))},re=y.useMemo(()=>{var Xe,qe;let Ge=O;return typeof R=="object"&&(Ge=(qe=(Xe=R.pointAtCenter)!==null&&Xe!==void 0?Xe:R.arrowPointAtCenter)!==null&&qe!==void 0?qe:O),x||Tde({arrowPointAtCenter:Ge,autoAdjustOverflow:P,arrowWidth:M?F.sizePopupArrow:0,borderRadius:F.borderRadius,offset:F.marginXXS,visibleFirst:!0})},[O,R,x,F]),oe=y.useMemo(()=>w===0?w:D||w||"",[D,w]),pe=y.createElement(C1,null,typeof oe=="function"?oe():oe),{getPopupContainer:ue,placement:me="top",mouseEnterDelay:fe=.1,mouseLeaveDelay:se=.1,overlayStyle:ae,rootClassName:de}=e,ce=Vde(e,["getPopupContainer","placement","mouseEnterDelay","mouseLeaveDelay","overlayStyle","rootClassName"]),we=B("tooltip",c),Ie=B(),$e=e["data-popover-inject"];let ke=Z;!("open"in e)&&!("visible"in e)&&G&&(ke=!1);const mt=Hde(jl(_)&&!K6(_)?_:y.createElement("span",null,_),we),vt=mt.props,st=!vt.className||typeof vt.className=="string"?Ve(vt.className,{[u||`${we}-open`]:!0}):vt.className,[rt,ft]=k5(we,!$e),Ye=L5(we,m),St=Object.assign(Object.assign({},g),Ye.overlayStyle),kt=Ye.arrowStyle,Lt=Ve(f,{[`${we}-rtl`]:H==="rtl"},Ye.className,de,ft);return rt(y.createElement(_de,Object.assign({},ce,{showArrow:M,placement:me,mouseEnterDelay:fe,mouseLeaveDelay:se,prefixCls:we,overlayClassName:Lt,overlayStyle:Object.assign(Object.assign({},kt),ae),getTooltipContainer:ue||d||j,ref:K,builtinPlacements:re,overlay:pe,visible:ke,onVisibleChange:ee,afterVisibleChange:S??b,overlayInnerStyle:St,arrowContent:y.createElement("span",{className:`${we}-arrow-content`}),motion:{motionName:Bce(Ie,"zoom-big-fast",e.transitionName),motionDeadline:1e3},destroyTooltipOnHide:!!A}),ke?bs(mt,{className:st}):mt))});M5._InternalPanelDoNotUseOrYouWillBeFired=Fde;const pm=M5;var U5={};Object.defineProperty(U5,"__esModule",{value:!0});var Wde={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M765.7 486.8L314.9 134.7A7.97 7.97 0 00302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 000-50.4z"}}]},name:"right",theme:"outlined"},Gde=U5.default=Wde;function zde(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Kde(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{},a=Object.keys(i);typeof Object.getOwnPropertySymbols=="function"&&(a=a.concat(Object.getOwnPropertySymbols(i).filter(function(c){return Object.getOwnPropertyDescriptor(i,c).enumerable}))),a.forEach(function(c){zde(e,c,i[c])})}return e}function Yde(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),i.push.apply(i,a)}return i}function qde(e,t){return t=t??{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Yde(Object(t)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))}),e}var Xde=function(e,t){return y.createElement(xi,qde(Kde({},e),{ref:t,icon:Gde}))};const jj=y.forwardRef(Xde);var j5=y.createContext(null);function Dw(e,t){return e===void 0?null:"".concat(e,"-").concat(t)}function F5(e){var t=y.useContext(j5);return Dw(t,e)}var Jde=["children","locked"],Ts=y.createContext(null);function Qde(e,t){var i=Ee({},e);return Object.keys(t).forEach(function(a){var c=t[a];c!==void 0&&(i[a]=c)}),i}function fm(e){var t=e.children,i=e.locked,a=fn(e,Jde),c=y.useContext(Ts),u=l_(function(){return Qde(c,a)},[c,a],function(d,f){return!i&&(d[0]!==f[0]||!ow(d[1],f[1],!0))});return y.createElement(Ts.Provider,{value:u},t)}var Zde=[],V5=y.createContext(null);function b_(){return y.useContext(V5)}var B5=y.createContext(Zde);function rp(e){var t=y.useContext(B5);return y.useMemo(function(){return e!==void 0?[].concat(Qe(t),[e]):t},[t,e])}var $5=y.createContext(null),kw=y.createContext({});function Fj(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(C_(e)){var i=e.nodeName.toLowerCase(),a=["input","select","textarea","button"].includes(i)||e.isContentEditable||i==="a"&&!!e.getAttribute("href"),c=e.getAttribute("tabindex"),u=Number(c),d=null;return c&&!Number.isNaN(u)?d=u:a&&d===null&&(d=0),a&&e.disabled&&(d=null),d!==null&&(d>=0||t&&d<0)}return!1}function ehe(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=Qe(e.querySelectorAll("*")).filter(function(a){return Fj(a,t)});return Fj(e,t)&&i.unshift(e),i}var j1=pt.LEFT,F1=pt.RIGHT,V1=pt.UP,wv=pt.DOWN,Ov=pt.ENTER,H5=pt.ESC,uf=pt.HOME,df=pt.END,Vj=[V1,wv,j1,F1];function the(e,t,i,a){var c,u,d,f,m="prev",g="next",_="children",S="parent";if(e==="inline"&&a===Ov)return{inlineTrigger:!0};var b=(c={},tt(c,V1,m),tt(c,wv,g),c),A=(u={},tt(u,j1,i?g:m),tt(u,F1,i?m:g),tt(u,wv,_),tt(u,Ov,_),u),R=(d={},tt(d,V1,m),tt(d,wv,g),tt(d,Ov,_),tt(d,H5,S),tt(d,j1,i?_:S),tt(d,F1,i?S:_),d),w={inline:b,horizontal:A,vertical:R,inlineSub:b,horizontalSub:R,verticalSub:R},D=(f=w["".concat(e).concat(t?"":"Sub")])===null||f===void 0?void 0:f[a];switch(D){case m:return{offset:-1,sibling:!0};case g:return{offset:1,sibling:!0};case S:return{offset:-1,sibling:!1};case _:return{offset:1,sibling:!1};default:return null}}function nhe(e){for(var t=e;t;){if(t.getAttribute("data-menu-list"))return t;t=t.parentElement}return null}function rhe(e,t){for(var i=e||document.activeElement;i;){if(t.has(i))return i;i=i.parentElement}return null}function W5(e,t){var i=ehe(e,!0);return i.filter(function(a){return t.has(a)})}function Bj(e,t,i){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;if(!e)return null;var c=W5(e,t),u=c.length,d=c.findIndex(function(f){return i===f});return a<0?d===-1?d=u-1:d-=1:a>0&&(d+=1),d=(d+u)%u,c[d]}function ihe(e,t,i,a,c,u,d,f,m,g){var _=y.useRef(),S=y.useRef();S.current=t;var b=function(){Wi.cancel(_.current)};return y.useEffect(function(){return function(){b()}},[]),function(A){var R=A.which;if([].concat(Vj,[Ov,H5,uf,df]).includes(R)){var w,D,x,O=function(){w=new Set,D=new Map,x=new Map;var re=u();return re.forEach(function(oe){var pe=document.querySelector("[data-menu-id='".concat(Dw(a,oe),"']"));pe&&(w.add(pe),x.set(pe,oe),D.set(oe,pe))}),w};O();var P=D.get(t),M=rhe(P,w),F=x.get(M),j=the(e,d(F,!0).length===1,i,R);if(!j&&R!==uf&&R!==df)return;(Vj.includes(R)||[uf,df].includes(R))&&A.preventDefault();var B=function(re){if(re){var oe=re,pe=re.querySelector("a");pe!=null&&pe.getAttribute("href")&&(oe=pe);var ue=x.get(re);f(ue),b(),_.current=Wi(function(){S.current===ue&&oe.focus()})}};if([uf,df].includes(R)||j.sibling||!M){var H;!M||e==="inline"?H=c.current:H=nhe(M);var K,$=W5(H,w);R===uf?K=$[0]:R===df?K=$[$.length-1]:K=Bj(H,w,M,j.offset),B(K)}else if(j.inlineTrigger)m(F);else if(j.offset>0)m(F,!0),b(),_.current=Wi(function(){O();var ee=M.getAttribute("aria-controls"),re=document.getElementById(ee),oe=Bj(re,w);B(oe)},5);else if(j.offset<0){var Z=d(F,!0),z=Z[Z.length-2],G=D.get(z);m(z,!1),B(G)}}g==null||g(A)}}function ohe(e){Promise.resolve().then(e)}var Lw="__RC_UTIL_PATH_SPLIT__",$j=function(t){return t.join(Lw)},ahe=function(t){return t.split(Lw)},B1="rc-menu-more";function she(){var e=y.useState({}),t=Pe(e,2),i=t[1],a=y.useRef(new Map),c=y.useRef(new Map),u=y.useState([]),d=Pe(u,2),f=d[0],m=d[1],g=y.useRef(0),_=y.useRef(!1),S=function(){_.current||i({})},b=y.useCallback(function(P,M){var F=$j(M);c.current.set(F,P),a.current.set(P,F),g.current+=1;var j=g.current;ohe(function(){j===g.current&&S()})},[]),A=y.useCallback(function(P,M){var F=$j(M);c.current.delete(F),a.current.delete(P)},[]),R=y.useCallback(function(P){m(P)},[]),w=y.useCallback(function(P,M){var F=a.current.get(P)||"",j=ahe(F);return M&&f.includes(j[0])&&j.unshift(B1),j},[f]),D=y.useCallback(function(P,M){return P.some(function(F){var j=w(F,!0);return j.includes(M)})},[w]),x=function(){var M=Qe(a.current.keys());return f.length&&M.push(B1),M},O=y.useCallback(function(P){var M="".concat(a.current.get(P)).concat(Lw),F=new Set;return Qe(c.current.keys()).forEach(function(j){j.startsWith(M)&&F.add(c.current.get(j))}),F},[]);return y.useEffect(function(){return function(){_.current=!0}},[]),{registerPath:b,unregisterPath:A,refreshOverflowKeys:R,isSubPathKey:D,getKeyPath:w,getKeys:x,getSubPathKeys:O}}function Cf(e){var t=y.useRef(e);t.current=e;var i=y.useCallback(function(){for(var a,c=arguments.length,u=new Array(c),d=0;d<c;d++)u[d]=arguments[d];return(a=t.current)===null||a===void 0?void 0:a.call.apply(a,[t].concat(u))},[]);return e?i:void 0}var che=Math.random().toFixed(5).toString().slice(2),Hj=0;function lhe(e){var t=bc(e,{value:e}),i=Pe(t,2),a=i[0],c=i[1];return y.useEffect(function(){Hj+=1;var u="".concat(che,"-").concat(Hj);c("rc-menu-uuid-".concat(u))},[]),a}function G5(e,t,i,a){var c=y.useContext(Ts),u=c.activeKey,d=c.onActive,f=c.onInactive,m={active:u===e};return t||(m.onMouseEnter=function(g){i==null||i({key:e,domEvent:g}),d(e)},m.onMouseLeave=function(g){a==null||a({key:e,domEvent:g}),f(e)}),m}function z5(e){var t=y.useContext(Ts),i=t.mode,a=t.rtl,c=t.inlineIndent;if(i!=="inline")return null;var u=e;return a?{paddingRight:u*c}:{paddingLeft:u*c}}function K5(e){var t=e.icon,i=e.props,a=e.children,c;return typeof t=="function"?c=y.createElement(t,Ee({},i)):c=t,c||a||null}var uhe=["item"];function CE(e){var t=e.item,i=fn(e,uhe);return Object.defineProperty(i,"item",{get:function(){return Wo(!1,"`info.item` is deprecated since we will move to function component that not provides React Node instance in future."),t}}),i}var dhe=["title","attribute","elementRef"],hhe=["style","className","eventKey","warnKey","disabled","itemIcon","children","role","onMouseEnter","onMouseLeave","onClick","onKeyDown","onFocus"],phe=["active"],fhe=function(e){Yh(i,e);var t=qh(i);function i(){return za(this,i),t.apply(this,arguments)}return Ka(i,[{key:"render",value:function(){var c=this.props,u=c.title,d=c.attribute,f=c.elementRef,m=fn(c,dhe),g=Yo(m,["eventKey","popupClassName","popupOffset","onTitleClick"]);return Wo(!d,"`attribute` of Menu.Item is deprecated. Please pass attribute directly."),y.createElement(Tc.Item,He({},d,{title:typeof u=="string"?u:void 0},g,{ref:f}))}}]),i}(y.Component),mhe=y.forwardRef(function(e,t){var i,a=e.style,c=e.className,u=e.eventKey;e.warnKey;var d=e.disabled,f=e.itemIcon,m=e.children,g=e.role,_=e.onMouseEnter,S=e.onMouseLeave,b=e.onClick,A=e.onKeyDown,R=e.onFocus,w=fn(e,hhe),D=F5(u),x=y.useContext(Ts),O=x.prefixCls,P=x.onItemClick,M=x.disabled,F=x.overflowDisabled,j=x.itemIcon,B=x.selectedKeys,H=x.onActive,K=y.useContext(kw),$=K._internalRenderMenuItem,Z="".concat(O,"-item"),z=y.useRef(),G=y.useRef(),ee=M||d,re=tw(t,G),oe=rp(u),pe=function(vt){return{key:u,keyPath:Qe(oe).reverse(),item:z.current,domEvent:vt}},ue=f||j,me=G5(u,ee,_,S),fe=me.active,se=fn(me,phe),ae=B.includes(u),de=z5(oe.length),ce=function(vt){if(!ee){var st=pe(vt);b==null||b(CE(st)),P(st)}},we=function(vt){if(A==null||A(vt),vt.which===pt.ENTER){var st=pe(vt);b==null||b(CE(st)),P(st)}},Ie=function(vt){H(u),R==null||R(vt)},$e={};e.role==="option"&&($e["aria-selected"]=ae);var ke=y.createElement(fhe,He({ref:z,elementRef:re,role:g===null?"none":g||"menuitem",tabIndex:d?null:-1,"data-menu-id":F&&D?null:D},w,se,$e,{component:"li","aria-disabled":d,style:Ee(Ee({},de),a),className:Ve(Z,(i={},tt(i,"".concat(Z,"-active"),fe),tt(i,"".concat(Z,"-selected"),ae),tt(i,"".concat(Z,"-disabled"),ee),i),c),onClick:ce,onKeyDown:we,onFocus:Ie}),m,y.createElement(K5,{props:Ee(Ee({},e),{},{isSelected:ae}),icon:ue}));return $&&(ke=$(ke,e,{selected:ae})),ke});function ghe(e,t){var i=e.eventKey,a=b_(),c=rp(i);return y.useEffect(function(){if(a)return a.registerPath(i,c),function(){a.unregisterPath(i,c)}},[c]),a?null:y.createElement(mhe,He({},e,{ref:t}))}const T_=y.forwardRef(ghe);var vhe=["className","children"],Ehe=function(t,i){var a=t.className,c=t.children,u=fn(t,vhe),d=y.useContext(Ts),f=d.prefixCls,m=d.mode,g=d.rtl;return y.createElement("ul",He({className:Ve(f,g&&"".concat(f,"-rtl"),"".concat(f,"-sub"),"".concat(f,"-").concat(m==="inline"?"inline":"vertical"),a),role:"menu"},u,{"data-menu-list":!0,ref:i}),c)},Mw=y.forwardRef(Ehe);Mw.displayName="SubMenuList";var _he=["label","children","key","type"];function Uw(e,t){return Nc(e).map(function(i,a){if(y.isValidElement(i)){var c,u,d=i.key,f=(c=(u=i.props)===null||u===void 0?void 0:u.eventKey)!==null&&c!==void 0?c:d,m=f==null;m&&(f="tmp_key-".concat([].concat(Qe(t),[a]).join("-")));var g={key:f,eventKey:f};return y.cloneElement(i,g)}return i})}function $1(e){return(e||[]).map(function(t,i){if(t&&jn(t)==="object"){var a=t,c=a.label,u=a.children,d=a.key,f=a.type,m=fn(a,_he),g=d??"tmp-".concat(i);return u||f==="group"?f==="group"?y.createElement(I_,He({key:g},m,{title:c}),$1(u)):y.createElement(R_,He({key:g},m,{title:c}),$1(u)):f==="divider"?y.createElement(jw,He({key:g},m)):y.createElement(T_,He({key:g},m),c)}return null}).filter(function(t){return t})}function yhe(e,t,i){var a=e;return t&&(a=$1(t)),Uw(a,i)}var co={adjustX:1,adjustY:1},She={topLeft:{points:["bl","tl"],overflow:co},topRight:{points:["br","tr"],overflow:co},bottomLeft:{points:["tl","bl"],overflow:co},bottomRight:{points:["tr","br"],overflow:co},leftTop:{points:["tr","tl"],overflow:co},leftBottom:{points:["br","bl"],overflow:co},rightTop:{points:["tl","tr"],overflow:co},rightBottom:{points:["bl","br"],overflow:co}},Che={topLeft:{points:["bl","tl"],overflow:co},topRight:{points:["br","tr"],overflow:co},bottomLeft:{points:["tl","bl"],overflow:co},bottomRight:{points:["tr","br"],overflow:co},rightTop:{points:["tr","tl"],overflow:co},rightBottom:{points:["br","bl"],overflow:co},leftTop:{points:["tl","tr"],overflow:co},leftBottom:{points:["bl","br"],overflow:co}};function Y5(e,t,i){if(t)return t;if(i)return i[e]||i.other}var bhe={horizontal:"bottomLeft",vertical:"rightTop","vertical-left":"rightTop","vertical-right":"leftTop"};function The(e){var t=e.prefixCls,i=e.visible,a=e.children,c=e.popup,u=e.popupClassName,d=e.popupOffset,f=e.disabled,m=e.mode,g=e.onVisibleChange,_=y.useContext(Ts),S=_.getPopupContainer,b=_.rtl,A=_.subMenuOpenDelay,R=_.subMenuCloseDelay,w=_.builtinPlacements,D=_.triggerSubMenuAction,x=_.forceSubMenuRender,O=_.rootClassName,P=_.motion,M=_.defaultMotions,F=y.useState(!1),j=Pe(F,2),B=j[0],H=j[1],K=Ee(b?Ee({},Che):Ee({},She),w),$=bhe[m],Z=Y5(m,P,M),z=y.useRef(Z);m!=="inline"&&(z.current=Z);var G=Ee(Ee({},z.current),{},{leavedClassName:"".concat(t,"-hidden"),removeOnLeave:!1,motionAppear:!0}),ee=y.useRef();return y.useEffect(function(){return ee.current=Wi(function(){H(i)}),function(){Wi.cancel(ee.current)}},[i]),y.createElement(w5,{prefixCls:t,popupClassName:Ve("".concat(t,"-popup"),tt({},"".concat(t,"-rtl"),b),u,O),stretch:m==="horizontal"?"minWidth":null,getPopupContainer:S,builtinPlacements:K,popupPlacement:$,popupVisible:B,popup:c,popupAlign:d&&{offset:d},action:f?[]:[D],mouseEnterDelay:A,mouseLeaveDelay:R,onPopupVisibleChange:g,forceRender:x,popupMotion:G},a)}function Rhe(e){var t=e.id,i=e.open,a=e.keyPath,c=e.children,u="inline",d=y.useContext(Ts),f=d.prefixCls,m=d.forceSubMenuRender,g=d.motion,_=d.defaultMotions,S=d.mode,b=y.useRef(!1);b.current=S===u;var A=y.useState(!b.current),R=Pe(A,2),w=R[0],D=R[1],x=b.current?i:!1;y.useEffect(function(){b.current&&D(!1)},[S]);var O=Ee({},Y5(u,g,_));a.length>1&&(O.motionAppear=!1);var P=O.onVisibleChanged;return O.onVisibleChanged=function(M){return!b.current&&!M&&D(!0),P==null?void 0:P(M)},w?null:y.createElement(fm,{mode:u,locked:!b.current},y.createElement(Yu,He({visible:x},O,{forceRender:m,removeOnLeave:!1,leavedClassName:"".concat(f,"-hidden")}),function(M){var F=M.className,j=M.style;return y.createElement(Mw,{id:t,className:F,style:j},c)}))}var Ihe=["style","className","title","eventKey","warnKey","disabled","internalPopupClose","children","itemIcon","expandIcon","popupClassName","popupOffset","onClick","onMouseEnter","onMouseLeave","onTitleClick","onTitleMouseEnter","onTitleMouseLeave"],whe=["active"],Ohe=function(t){var i,a=t.style,c=t.className,u=t.title,d=t.eventKey;t.warnKey;var f=t.disabled,m=t.internalPopupClose,g=t.children,_=t.itemIcon,S=t.expandIcon,b=t.popupClassName,A=t.popupOffset,R=t.onClick,w=t.onMouseEnter,D=t.onMouseLeave,x=t.onTitleClick,O=t.onTitleMouseEnter,P=t.onTitleMouseLeave,M=fn(t,Ihe),F=F5(d),j=y.useContext(Ts),B=j.prefixCls,H=j.mode,K=j.openKeys,$=j.disabled,Z=j.overflowDisabled,z=j.activeKey,G=j.selectedKeys,ee=j.itemIcon,re=j.expandIcon,oe=j.onItemClick,pe=j.onOpenChange,ue=j.onActive,me=y.useContext(kw),fe=me._internalRenderSubMenuItem,se=y.useContext($5),ae=se.isSubPathKey,de=rp(),ce="".concat(B,"-submenu"),we=$||f,Ie=y.useRef(),$e=y.useRef(),ke=_||ee,mt=S||re,vt=K.includes(d),st=!Z&&vt,rt=ae(G,d),ft=G5(d,we,O,P),Ye=ft.active,St=fn(ft,whe),kt=y.useState(!1),Lt=Pe(kt,2),Xe=Lt[0],qe=Lt[1],Ge=function(Jt){we||qe(Jt)},nt=function(Jt){Ge(!0),w==null||w({key:d,domEvent:Jt})},gt=function(Jt){Ge(!1),D==null||D({key:d,domEvent:Jt})},bt=y.useMemo(function(){return Ye||(H!=="inline"?Xe||ae([z],d):!1)},[H,Ye,z,Xe,d,ae]),Ot=z5(de.length),Mt=function(Jt){we||(x==null||x({key:d,domEvent:Jt}),H==="inline"&&pe(d,!vt))},Yt=Cf(function(Xt){R==null||R(CE(Xt)),oe(Xt)}),An=function(Jt){H!=="inline"&&pe(d,Jt)},yi=function(){ue(d)},dr=F&&"".concat(F,"-popup"),Gn=y.createElement("div",He({role:"menuitem",style:Ot,className:"".concat(ce,"-title"),tabIndex:we?null:-1,ref:Ie,title:typeof u=="string"?u:null,"data-menu-id":Z&&F?null:F,"aria-expanded":st,"aria-haspopup":!0,"aria-controls":dr,"aria-disabled":we,onClick:Mt,onFocus:yi},St),u,y.createElement(K5,{icon:H!=="horizontal"?mt:null,props:Ee(Ee({},t),{},{isOpen:st,isSubMenu:!0})},y.createElement("i",{className:"".concat(ce,"-arrow")}))),mn=y.useRef(H);if(H!=="inline"&&de.length>1?mn.current="vertical":mn.current=H,!Z){var xr=mn.current;Gn=y.createElement(The,{mode:xr,prefixCls:ce,visible:!m&&st&&H!=="inline",popupClassName:b,popupOffset:A,popup:y.createElement(fm,{mode:xr==="horizontal"?"vertical":xr},y.createElement(Mw,{id:dr,ref:$e},g)),disabled:we,onVisibleChange:An},Gn)}var Cn=y.createElement(Tc.Item,He({role:"none"},M,{component:"li",style:a,className:Ve(ce,"".concat(ce,"-").concat(H),c,(i={},tt(i,"".concat(ce,"-open"),st),tt(i,"".concat(ce,"-active"),bt),tt(i,"".concat(ce,"-selected"),rt),tt(i,"".concat(ce,"-disabled"),we),i)),onMouseEnter:nt,onMouseLeave:gt}),Gn,!Z&&y.createElement(Rhe,{id:dr,open:st,keyPath:de},g));return fe&&(Cn=fe(Cn,t,{selected:rt,active:bt,open:st,disabled:we})),y.createElement(fm,{onItemClick:Yt,mode:H==="horizontal"?"vertical":H,itemIcon:ke,expandIcon:mt},Cn)};function R_(e){var t=e.eventKey,i=e.children,a=rp(t),c=Uw(i,a),u=b_();y.useEffect(function(){if(u)return u.registerPath(t,a),function(){u.unregisterPath(t,a)}},[a]);var d;return u?d=c:d=y.createElement(Ohe,e,c),y.createElement(B5.Provider,{value:a},d)}var Ahe=["prefixCls","rootClassName","style","className","tabIndex","items","children","direction","id","mode","inlineCollapsed","disabled","disabledOverflow","subMenuOpenDelay","subMenuCloseDelay","forceSubMenuRender","defaultOpenKeys","openKeys","activeKey","defaultActiveFirst","selectable","multiple","defaultSelectedKeys","selectedKeys","onSelect","onDeselect","inlineIndent","motion","defaultMotions","triggerSubMenuAction","builtinPlacements","itemIcon","expandIcon","overflowedIndicator","overflowedIndicatorPopupClassName","getPopupContainer","onClick","onOpenChange","onKeyDown","openAnimation","openTransitionName","_internalRenderMenuItem","_internalRenderSubMenuItem"],th=[],Nhe=y.forwardRef(function(e,t){var i,a,c=e,u=c.prefixCls,d=u===void 0?"rc-menu":u,f=c.rootClassName,m=c.style,g=c.className,_=c.tabIndex,S=_===void 0?0:_,b=c.items,A=c.children,R=c.direction,w=c.id,D=c.mode,x=D===void 0?"vertical":D,O=c.inlineCollapsed,P=c.disabled,M=c.disabledOverflow,F=c.subMenuOpenDelay,j=F===void 0?.1:F,B=c.subMenuCloseDelay,H=B===void 0?.1:B,K=c.forceSubMenuRender,$=c.defaultOpenKeys,Z=c.openKeys,z=c.activeKey,G=c.defaultActiveFirst,ee=c.selectable,re=ee===void 0?!0:ee,oe=c.multiple,pe=oe===void 0?!1:oe,ue=c.defaultSelectedKeys,me=c.selectedKeys,fe=c.onSelect,se=c.onDeselect,ae=c.inlineIndent,de=ae===void 0?24:ae,ce=c.motion,we=c.defaultMotions,Ie=c.triggerSubMenuAction,$e=Ie===void 0?"hover":Ie,ke=c.builtinPlacements,mt=c.itemIcon,vt=c.expandIcon,st=c.overflowedIndicator,rt=st===void 0?"...":st,ft=c.overflowedIndicatorPopupClassName,Ye=c.getPopupContainer,St=c.onClick,kt=c.onOpenChange,Lt=c.onKeyDown;c.openAnimation,c.openTransitionName;var Xe=c._internalRenderMenuItem,qe=c._internalRenderSubMenuItem,Ge=fn(c,Ahe),nt=y.useMemo(function(){return yhe(A,b,th)},[A,b]),gt=y.useState(!1),bt=Pe(gt,2),Ot=bt[0],Mt=bt[1],Yt=y.useRef(),An=lhe(w),yi=R==="rtl",dr=bc($,{value:Z,postState:function(En){return En||th}}),Gn=Pe(dr,2),mn=Gn[0],xr=Gn[1],Cn=function(En){var Nn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;function Yr(){xr(En),kt==null||kt(En)}Nn?Hl.flushSync(Yr):Yr()},Xt=y.useState(mn),Jt=Pe(Xt,2),Ro=Jt[0],qi=Jt[1],br=y.useRef(!1),gn=y.useMemo(function(){return(x==="inline"||x==="vertical")&&O?["vertical",O]:[x,!1]},[x,O]),je=Pe(gn,2),ct=je[0],vn=je[1],jt=ct==="inline",Si=y.useState(ct),Pr=Pe(Si,2),Xn=Pr[0],yt=Pr[1],Qt=y.useState(vn),an=Pe(Qt,2),_r=an[0],ui=an[1];y.useEffect(function(){yt(ct),ui(vn),br.current&&(jt?xr(Ro):Cn(th))},[ct,vn]);var Tr=y.useState(0),Dr=Pe(Tr,2),Pi=Dr[0],Xi=Dr[1],po=Pi>=nt.length-1||Xn!=="horizontal"||M;y.useEffect(function(){jt&&qi(mn)},[mn]),y.useEffect(function(){return br.current=!0,function(){br.current=!1}},[]);var fo=she(),Js=fo.registerPath,zr=fo.unregisterPath,Qs=fo.refreshOverflowKeys,jc=fo.isSubPathKey,Jn=fo.getKeyPath,Fc=fo.getKeys,Di=fo.getSubPathKeys,Vc=y.useMemo(function(){return{registerPath:Js,unregisterPath:zr}},[Js,zr]),Bc=y.useMemo(function(){return{isSubPathKey:jc}},[jc]);y.useEffect(function(){Qs(po?th:nt.slice(Pi+1).map(function(Fn){return Fn.key}))},[Pi,po]);var Xo=bc(z||G&&((i=nt[0])===null||i===void 0?void 0:i.key),{value:z}),Zs=Pe(Xo,2),Xa=Zs[0],Io=Zs[1],$c=Cf(function(Fn){Io(Fn)}),Hc=Cf(function(){Io(void 0)});y.useImperativeHandle(t,function(){return{list:Yt.current,focus:function(En){var Nn,Yr=Xa??((Nn=nt.find(function(Ja){return!Ja.props.disabled}))===null||Nn===void 0?void 0:Nn.key);if(Yr){var kr,mo,Ji;(kr=Yt.current)===null||kr===void 0||(mo=kr.querySelector("li[data-menu-id='".concat(Dw(An,Yr),"']")))===null||mo===void 0||(Ji=mo.focus)===null||Ji===void 0||Ji.call(mo,En)}}}});var Ta=bc(ue||[],{value:me,postState:function(En){return Array.isArray(En)?En:En==null?th:[En]}}),di=Pe(Ta,2),Kr=di[0],Jo=di[1],ec=function(En){if(re){var Nn=En.key,Yr=Kr.includes(Nn),kr;pe?Yr?kr=Kr.filter(function(Ji){return Ji!==Nn}):kr=[].concat(Qe(Kr),[Nn]):kr=[Nn],Jo(kr);var mo=Ee(Ee({},En),{},{selectedKeys:kr});Yr?se==null||se(mo):fe==null||fe(mo)}!pe&&mn.length&&Xn!=="inline"&&Cn(th)},ar=Cf(function(Fn){St==null||St(CE(Fn)),ec(Fn)}),tc=Cf(function(Fn,En){var Nn=mn.filter(function(kr){return kr!==Fn});if(En)Nn.push(Fn);else if(Xn!=="inline"){var Yr=Di(Fn);Nn=Nn.filter(function(kr){return!Yr.has(kr)})}ow(mn,Nn,!0)||Cn(Nn,!0)}),Wc=function(En,Nn){var Yr=Nn??!mn.includes(En);tc(En,Yr)},Ns=ihe(Xn,Xa,yi,An,Yt,Fc,Jn,Io,Wc,Lt);y.useEffect(function(){Mt(!0)},[]);var zl=y.useMemo(function(){return{_internalRenderMenuItem:Xe,_internalRenderSubMenuItem:qe}},[Xe,qe]),Kl=Xn!=="horizontal"||M?nt:nt.map(function(Fn,En){return y.createElement(fm,{key:Fn.key,overflowDisabled:En>Pi},Fn)}),Yl=y.createElement(Tc,He({id:w,ref:Yt,prefixCls:"".concat(d,"-overflow"),component:"ul",itemComponent:T_,className:Ve(d,"".concat(d,"-root"),"".concat(d,"-").concat(Xn),g,(a={},tt(a,"".concat(d,"-inline-collapsed"),_r),tt(a,"".concat(d,"-rtl"),yi),a),f),dir:R,style:m,role:"menu",tabIndex:S,data:Kl,renderRawItem:function(En){return En},renderRawRest:function(En){var Nn=En.length,Yr=Nn?nt.slice(-Nn):null;return y.createElement(R_,{eventKey:B1,title:rt,disabled:po,internalPopupClose:Nn===0,popupClassName:ft},Yr)},maxCount:Xn!=="horizontal"||M?Tc.INVALIDATE:Tc.RESPONSIVE,ssr:"full","data-menu-list":!0,onVisibleChange:function(En){Xi(En)},onKeyDown:Ns},Ge));return y.createElement(kw.Provider,{value:zl},y.createElement(j5.Provider,{value:An},y.createElement(fm,{prefixCls:d,rootClassName:f,mode:Xn,openKeys:mn,rtl:yi,disabled:P,motion:Ot?ce:null,defaultMotions:Ot?we:null,activeKey:Xa,onActive:$c,onInactive:Hc,selectedKeys:Kr,inlineIndent:de,subMenuOpenDelay:j,subMenuCloseDelay:H,forceSubMenuRender:K,builtinPlacements:ke,triggerSubMenuAction:$e,getPopupContainer:Ye,itemIcon:mt,expandIcon:vt,onItemClick:ar,onOpenChange:tc},y.createElement($5.Provider,{value:Bc},Yl),y.createElement("div",{style:{display:"none"},"aria-hidden":!0},y.createElement(V5.Provider,{value:Vc},nt)))))}),xhe=["className","title","eventKey","children"],Phe=["children"],Dhe=function(t){var i=t.className,a=t.title;t.eventKey;var c=t.children,u=fn(t,xhe),d=y.useContext(Ts),f=d.prefixCls,m="".concat(f,"-item-group");return y.createElement("li",He({role:"presentation"},u,{onClick:function(_){return _.stopPropagation()},className:Ve(m,i)}),y.createElement("div",{role:"presentation",className:"".concat(m,"-title"),title:typeof a=="string"?a:void 0},a),y.createElement("ul",{role:"group",className:"".concat(m,"-list")},c))};function I_(e){var t=e.children,i=fn(e,Phe),a=rp(i.eventKey),c=Uw(t,a),u=b_();return u?c:y.createElement(Dhe,Yo(i,["warnKey"]),c)}function jw(e){var t=e.className,i=e.style,a=y.useContext(Ts),c=a.prefixCls,u=b_();return u?null:y.createElement("li",{className:Ve("".concat(c,"-item-divider"),t),style:i})}var xm=Nhe;xm.Item=T_;xm.SubMenu=R_;xm.ItemGroup=I_;xm.Divider=jw;var q5={};Object.defineProperty(q5,"__esModule",{value:!0});var khe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M176 511a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"ellipsis",theme:"outlined"},Lhe=q5.default=khe;function Mhe(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Uhe(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{},a=Object.keys(i);typeof Object.getOwnPropertySymbols=="function"&&(a=a.concat(Object.getOwnPropertySymbols(i).filter(function(c){return Object.getOwnPropertyDescriptor(i,c).enumerable}))),a.forEach(function(c){Mhe(e,c,i[c])})}return e}function jhe(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),i.push.apply(i,a)}return i}function Fhe(e,t){return t=t??{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):jhe(Object(t)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))}),e}var Vhe=function(e,t){return y.createElement(xi,Fhe(Uhe({},e),{ref:t,icon:Lhe}))};const Bhe=y.forwardRef(Vhe),$he=y.createContext({prefixCls:"",firstLevel:!0,inlineCollapsed:!1}),bE=$he;globalThis&&globalThis.__rest;const Hhe=y.createContext(null),Wj=Hhe;var Whe=globalThis&&globalThis.__rest||function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(i[a[c]]=e[a[c]]);return i};const Ghe=e=>{const{prefixCls:t,className:i,dashed:a}=e,c=Whe(e,["prefixCls","className","dashed"]),{getPrefixCls:u}=y.useContext(Hn),d=u("menu",t),f=Ve({[`${d}-item-divider-dashed`]:!!a},i);return y.createElement(jw,Object.assign({className:f},c))},X5=Ghe;var J5={};Object.defineProperty(J5,"__esModule",{value:!0});var zhe={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM104 228a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"bars",theme:"outlined"},Khe=J5.default=zhe;function Yhe(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function qhe(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{},a=Object.keys(i);typeof Object.getOwnPropertySymbols=="function"&&(a=a.concat(Object.getOwnPropertySymbols(i).filter(function(c){return Object.getOwnPropertyDescriptor(i,c).enumerable}))),a.forEach(function(c){Yhe(e,c,i[c])})}return e}function Xhe(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),i.push.apply(i,a)}return i}function Jhe(e,t){return t=t??{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Xhe(Object(t)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))}),e}var Qhe=function(e,t){return y.createElement(xi,Jhe(qhe({},e),{ref:t,icon:Khe}))};const Zhe=y.forwardRef(Qhe);var Q5={};Object.defineProperty(Q5,"__esModule",{value:!0});var epe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 000 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"}}]},name:"left",theme:"outlined"},tpe=Q5.default=epe;function npe(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function rpe(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{},a=Object.keys(i);typeof Object.getOwnPropertySymbols=="function"&&(a=a.concat(Object.getOwnPropertySymbols(i).filter(function(c){return Object.getOwnPropertyDescriptor(i,c).enumerable}))),a.forEach(function(c){npe(e,c,i[c])})}return e}function ipe(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),i.push.apply(i,a)}return i}function ope(e,t){return t=t??{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ipe(Object(t)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))}),e}var ape=function(e,t){return y.createElement(xi,ope(rpe({},e),{ref:t,icon:tpe}))};const Gj=y.forwardRef(ape),spe=e=>!isNaN(parseFloat(e))&&isFinite(e),cpe=spe,lpe=e=>{const{componentCls:t,colorBgContainer:i,colorBgBody:a,colorText:c}=e;return{[`${t}-sider-light`]:{background:i,[`${t}-sider-trigger`]:{color:c,background:i},[`${t}-sider-zero-width-trigger`]:{color:c,background:i,border:`1px solid ${a}`,borderInlineStart:0}}}},upe=lpe,dpe=e=>{const{antCls:t,componentCls:i,colorText:a,colorTextLightSolid:c,colorBgHeader:u,colorBgBody:d,colorBgTrigger:f,layoutHeaderHeight:m,layoutHeaderPaddingInline:g,layoutHeaderColor:_,layoutFooterPadding:S,layoutTriggerHeight:b,layoutZeroTriggerSize:A,motionDurationMid:R,motionDurationSlow:w,fontSize:D,borderRadius:x}=e;return{[i]:Object.assign(Object.assign({display:"flex",flex:"auto",flexDirection:"column",minHeight:0,background:d,"&, *":{boxSizing:"border-box"},[`&${i}-has-sider`]:{flexDirection:"row",[`> ${i}, > ${i}-content`]:{width:0}},[`${i}-header, &${i}-footer`]:{flex:"0 0 auto"},[`${i}-sider`]:{position:"relative",minWidth:0,background:u,transition:`all ${R}, background 0s`,"&-children":{height:"100%",marginTop:-.1,paddingTop:.1,[`${t}-menu${t}-menu-inline-collapsed`]:{width:"auto"}},"&-has-trigger":{paddingBottom:b},"&-right":{order:1},"&-trigger":{position:"fixed",bottom:0,zIndex:1,height:b,color:c,lineHeight:`${b}px`,textAlign:"center",background:f,cursor:"pointer",transition:`all ${R}`},"&-zero-width":{"> *":{overflow:"hidden"},"&-trigger":{position:"absolute",top:m,insetInlineEnd:-A,zIndex:1,width:A,height:A,color:c,fontSize:e.fontSizeXL,display:"flex",alignItems:"center",justifyContent:"center",background:u,borderStartStartRadius:0,borderStartEndRadius:x,borderEndEndRadius:x,borderEndStartRadius:0,cursor:"pointer",transition:`background ${w} ease`,"&::after":{position:"absolute",inset:0,background:"transparent",transition:`all ${w}`,content:'""'},"&:hover::after":{background:"rgba(255, 255, 255, 0.2)"},"&-right":{insetInlineStart:-A,borderStartStartRadius:x,borderStartEndRadius:0,borderEndEndRadius:0,borderEndStartRadius:x}}}}},upe(e)),{"&-rtl":{direction:"rtl"}}),[`${i}-header`]:{height:m,paddingInline:g,color:_,lineHeight:`${m}px`,background:u,[`${t}-menu`]:{lineHeight:"inherit"}},[`${i}-footer`]:{padding:S,color:a,fontSize:D,background:d},[`${i}-content`]:{flex:"auto",minHeight:0}}},Z5=ws("Layout",e=>{const{colorText:t,controlHeightSM:i,controlHeight:a,controlHeightLG:c,marginXXS:u}=e,d=c*1.25,f=Ki(e,{layoutHeaderHeight:a*2,layoutHeaderPaddingInline:d,layoutHeaderColor:t,layoutFooterPadding:`${i}px ${d}px`,layoutTriggerHeight:c+u*2,layoutZeroTriggerSize:c});return[dpe(f)]},e=>{const{colorBgLayout:t}=e;return{colorBgHeader:"#001529",colorBgBody:t,colorBgTrigger:"#002140"}});var e$=globalThis&&globalThis.__rest||function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(i[a[c]]=e[a[c]]);return i};const t$=y.createContext({siderHook:{addSider:()=>null,removeSider:()=>null}});function w_(e){let{suffixCls:t,tagName:i,displayName:a}=e;return c=>y.forwardRef((d,f)=>y.createElement(c,Object.assign({ref:f,suffixCls:t,tagName:i},d)))}const Fw=y.forwardRef((e,t)=>{const{prefixCls:i,suffixCls:a,className:c,tagName:u}=e,d=e$(e,["prefixCls","suffixCls","className","tagName"]),{getPrefixCls:f}=y.useContext(Hn),m=f("layout",i),[g,_]=Z5(m),S=a?`${m}-${a}`:m;return g(y.createElement(u,Object.assign({className:Ve(i||S,c,_),ref:t},d)))}),hpe=y.forwardRef((e,t)=>{const{direction:i}=y.useContext(Hn),[a,c]=y.useState([]),{prefixCls:u,className:d,rootClassName:f,children:m,hasSider:g,tagName:_}=e,S=e$(e,["prefixCls","className","rootClassName","children","hasSider","tagName"]),b=Yo(S,["suffixCls"]),{getPrefixCls:A}=y.useContext(Hn),R=A("layout",u),[w,D]=Z5(R),x=Ve(R,{[`${R}-has-sider`]:typeof g=="boolean"?g:a.length>0,[`${R}-rtl`]:i==="rtl"},d,f,D),O=y.useMemo(()=>({siderHook:{addSider:P=>{c(M=>[].concat(Qe(M),[P]))},removeSider:P=>{c(M=>M.filter(F=>F!==P))}}}),[]);return w(y.createElement(t$.Provider,{value:O},y.createElement(_,Object.assign({ref:t,className:x},b),m)))}),ppe=w_({tagName:"section",displayName:"Layout"})(hpe),fpe=w_({suffixCls:"header",tagName:"header",displayName:"Header"})(Fw),mpe=w_({suffixCls:"footer",tagName:"footer",displayName:"Footer"})(Fw),gpe=w_({suffixCls:"content",tagName:"main",displayName:"Content"})(Fw),vpe=ppe;var Epe=globalThis&&globalThis.__rest||function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(i[a[c]]=e[a[c]]);return i};const zj={xs:"479.98px",sm:"575.98px",md:"767.98px",lg:"991.98px",xl:"1199.98px",xxl:"1599.98px"},Vw=y.createContext({}),_pe=(()=>{let e=0;return function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return e+=1,`${t}${e}`}})(),ype=y.forwardRef((e,t)=>{var{prefixCls:i,className:a,trigger:c,children:u,defaultCollapsed:d=!1,theme:f="dark",style:m={},collapsible:g=!1,reverseArrow:_=!1,width:S=200,collapsedWidth:b=80,zeroWidthTriggerStyle:A,breakpoint:R,onCollapse:w,onBreakpoint:D}=e,x=Epe(e,["prefixCls","className","trigger","children","defaultCollapsed","theme","style","collapsible","reverseArrow","width","collapsedWidth","zeroWidthTriggerStyle","breakpoint","onCollapse","onBreakpoint"]);const{siderHook:O}=y.useContext(t$),[P,M]=y.useState("collapsed"in x?x.collapsed:d),[F,j]=y.useState(!1);y.useEffect(()=>{"collapsed"in x&&M(x.collapsed)},[x.collapsed]);const B=(G,ee)=>{"collapsed"in x||M(G),w==null||w(G,ee)},H=y.useRef();H.current=G=>{j(G.matches),D==null||D(G.matches),P!==G.matches&&B(G.matches,"responsive")},y.useEffect(()=>{function G(re){return H.current(re)}let ee;if(typeof window<"u"){const{matchMedia:re}=window;if(re&&R&&R in zj){ee=re(`(max-width: ${zj[R]})`);try{ee.addEventListener("change",G)}catch{ee.addListener(G)}G(ee)}}return()=>{try{ee==null||ee.removeEventListener("change",G)}catch{ee==null||ee.removeListener(G)}}},[R]),y.useEffect(()=>{const G=_pe("ant-sider-");return O.addSider(G),()=>O.removeSider(G)},[]);const K=()=>{B(!P,"clickTrigger")},{getPrefixCls:$}=y.useContext(Hn),Z=()=>{const G=$("layout-sider",i),ee=Yo(x,["collapsed"]),re=P?b:S,oe=cpe(re)?`${re}px`:String(re),pe=parseFloat(String(b||0))===0?y.createElement("span",{onClick:K,className:Ve(`${G}-zero-width-trigger`,`${G}-zero-width-trigger-${_?"right":"left"}`),style:A},c||y.createElement(Zhe,null)):null,fe={expanded:_?y.createElement(jj,null):y.createElement(Gj,null),collapsed:_?y.createElement(Gj,null):y.createElement(jj,null)}[P?"collapsed":"expanded"],se=c!==null?pe||y.createElement("div",{className:`${G}-trigger`,onClick:K,style:{width:oe}},c||fe):null,ae=Object.assign(Object.assign({},m),{flex:`0 0 ${oe}`,maxWidth:oe,minWidth:oe,width:oe}),de=Ve(G,`${G}-${f}`,{[`${G}-collapsed`]:!!P,[`${G}-has-trigger`]:g&&c!==null&&!pe,[`${G}-below`]:!!F,[`${G}-zero-width`]:parseFloat(oe)===0},a);return y.createElement("aside",Object.assign({className:de},ee,{style:ae,ref:t}),y.createElement("div",{className:`${G}-children`},u),g||F&&pe?se:null)},z=y.useMemo(()=>({siderCollapsed:P}),[P]);return y.createElement(Vw.Provider,{value:z},Z())}),Spe=ype,Cpe=e=>{var t;const{className:i,children:a,icon:c,title:u,danger:d}=e,{prefixCls:f,firstLevel:m,direction:g,disableMenuItemTitleTooltip:_,inlineCollapsed:S}=y.useContext(bE),b=O=>{const P=y.createElement("span",{className:`${f}-title-content`},a);return(!c||jl(a)&&a.type==="span")&&a&&O&&m&&typeof a=="string"?y.createElement("div",{className:`${f}-inline-collapsed-noicon`},a.charAt(0)):P},{siderCollapsed:A}=y.useContext(Vw);let R=u;typeof u>"u"?R=m?a:"":u===!1&&(R="");const w={title:R};!A&&!S&&(w.title=null,w.open=!1);const D=Nc(a).length;let x=y.createElement(T_,Object.assign({},Yo(e,["title","icon","danger"]),{className:Ve({[`${f}-item-danger`]:d,[`${f}-item-only-child`]:(c?D+1:D)===1},i),title:typeof u=="string"?u:void 0}),bs(c,{className:Ve(jl(c)?(t=c.props)===null||t===void 0?void 0:t.className:"",`${f}-item-icon`)}),b(S));return _||(x=y.createElement(pm,Object.assign({},w,{placement:g==="rtl"?"left":"right",overlayClassName:`${f}-inline-collapsed-tooltip`}),x)),x},n$=Cpe,bpe=e=>{var t;const{popupClassName:i,icon:a,title:c,theme:u}=e,d=y.useContext(bE),{prefixCls:f,inlineCollapsed:m,theme:g}=d,_=rp();let S;if(!a)S=m&&!_.length&&c&&typeof c=="string"?y.createElement("div",{className:`${f}-inline-collapsed-noicon`},c.charAt(0)):y.createElement("span",{className:`${f}-title-content`},c);else{const A=jl(c)&&c.type==="span";S=y.createElement(y.Fragment,null,bs(a,{className:Ve(jl(a)?(t=a.props)===null||t===void 0?void 0:t.className:"",`${f}-item-icon`)}),A?c:y.createElement("span",{className:`${f}-title-content`},c))}const b=y.useMemo(()=>Object.assign(Object.assign({},d),{firstLevel:!1}),[d]);return y.createElement(bE.Provider,{value:b},y.createElement(R_,Object.assign({},Yo(e,["icon"]),{title:S,popupClassName:Ve(f,i,`${f}-${u||g}`)})))},r$=bpe;var Tpe=globalThis&&globalThis.__rest||function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(i[a[c]]=e[a[c]]);return i};function H1(e){return(e||[]).map((t,i)=>{if(t&&typeof t=="object"){const a=t,{label:c,children:u,key:d,type:f}=a,m=Tpe(a,["label","children","key","type"]),g=d??`tmp-${i}`;return u||f==="group"?f==="group"?y.createElement(I_,Object.assign({key:g},m,{title:c}),H1(u)):y.createElement(r$,Object.assign({key:g},m,{title:c}),H1(u)):f==="divider"?y.createElement(X5,Object.assign({key:g},m)):y.createElement(n$,Object.assign({key:g},m),c)}return null}).filter(t=>t)}function Rpe(e){return y.useMemo(()=>e&&H1(e),[e])}const Ipe=e=>{const{componentCls:t,motionDurationSlow:i,menuHorizontalHeight:a,colorSplit:c,lineWidth:u,lineType:d,menuItemPaddingInline:f}=e;return{[`${t}-horizontal`]:{lineHeight:`${a}px`,border:0,borderBottom:`${u}px ${d} ${c}`,boxShadow:"none","&::after":{display:"block",clear:"both",height:0,content:'"\\20"'},[`${t}-item, ${t}-submenu`]:{position:"relative",display:"inline-block",verticalAlign:"bottom",paddingInline:f},[`> ${t}-item:hover,
        > ${t}-item-active,
        > ${t}-submenu ${t}-submenu-title:hover`]:{backgroundColor:"transparent"},[`${t}-item, ${t}-submenu-title`]:{transition:[`border-color ${i}`,`background ${i}`].join(",")},[`${t}-submenu-arrow`]:{display:"none"}}}},wpe=Ipe,Ope=e=>{let{componentCls:t,menuArrowOffset:i}=e;return{[`${t}-rtl`]:{direction:"rtl"},[`${t}-submenu-rtl`]:{transformOrigin:"100% 0"},[`${t}-rtl${t}-vertical,
    ${t}-submenu-rtl ${t}-vertical`]:{[`${t}-submenu-arrow`]:{"&::before":{transform:`rotate(-45deg) translateY(-${i})`},"&::after":{transform:`rotate(45deg) translateY(${i})`}}}}},Ape=Ope,Kj=e=>Object.assign({},$B(e)),Npe=(e,t)=>{const{componentCls:i,itemColor:a,itemSelectedColor:c,groupTitleColor:u,itemBg:d,subMenuItemBg:f,itemSelectedBg:m,activeBarHeight:g,activeBarWidth:_,activeBarBorderWidth:S,motionDurationSlow:b,motionEaseInOut:A,motionEaseOut:R,menuItemPaddingInline:w,motionDurationMid:D,itemHoverColor:x,lineType:O,colorSplit:P,itemDisabledColor:M,dangerItemColor:F,dangerItemHoverColor:j,dangerItemSelectedColor:B,dangerItemActiveBg:H,dangerItemSelectedBg:K,itemHoverBg:$,menuSubMenuBg:Z,horizontalItemSelectedColor:z,horizontalItemSelectedBg:G,horizontalItemBorderRadius:ee,horizontalItemHoverBg:re}=e;return{[`${i}-${t}, ${i}-${t} > ${i}`]:{color:a,background:d,[`&${i}-root:focus-visible`]:Object.assign({},Kj(e)),[`${i}-item-group-title`]:{color:u},[`${i}-submenu-selected`]:{[`> ${i}-submenu-title`]:{color:c}},[`${i}-item-disabled, ${i}-submenu-disabled`]:{color:`${M} !important`},[`${i}-item:hover, ${i}-submenu-title:hover`]:{[`&:not(${i}-item-selected):not(${i}-submenu-selected)`]:{color:x}},[`&:not(${i}-horizontal)`]:{[`${i}-item:not(${i}-item-selected)`]:{"&:hover":{backgroundColor:$},"&:active":{backgroundColor:m}},[`${i}-submenu-title`]:{"&:hover":{backgroundColor:$},"&:active":{backgroundColor:m}}},[`${i}-item-danger`]:{color:F,[`&${i}-item:hover`]:{[`&:not(${i}-item-selected):not(${i}-submenu-selected)`]:{color:j}},[`&${i}-item:active`]:{background:H}},[`${i}-item a`]:{"&, &:hover":{color:"inherit"}},[`${i}-item-selected`]:{color:c,[`&${i}-item-danger`]:{color:B},"a, a:hover":{color:"inherit"}},[`& ${i}-item-selected`]:{backgroundColor:m,[`&${i}-item-danger`]:{backgroundColor:K}},[`${i}-item, ${i}-submenu-title`]:{[`&:not(${i}-item-disabled):focus-visible`]:Object.assign({},Kj(e))},[`&${i}-submenu > ${i}`]:{backgroundColor:Z},[`&${i}-popup > ${i}`]:{backgroundColor:d},[`&${i}-horizontal`]:Object.assign(Object.assign({},t==="dark"?{borderBottom:0}:{}),{[`> ${i}-item, > ${i}-submenu`]:{top:S,marginTop:-S,marginBottom:0,borderRadius:ee,"&::after":{position:"absolute",insetInline:w,bottom:0,borderBottom:`${g}px solid transparent`,transition:`border-color ${b} ${A}`,content:'""'},"&:hover, &-active, &-open":{background:re,"&::after":{borderBottomWidth:g,borderBottomColor:z}},"&-selected":{color:z,backgroundColor:G,"&::after":{borderBottomWidth:g,borderBottomColor:z}}}}),[`&${i}-root`]:{[`&${i}-inline, &${i}-vertical`]:{borderInlineEnd:`${S}px ${O} ${P}`}},[`&${i}-inline`]:{[`${i}-sub${i}-inline`]:{background:f},[`${i}-item, ${i}-submenu-title`]:S&&_?{width:`calc(100% + ${S}px)`}:{},[`${i}-item`]:{position:"relative","&::after":{position:"absolute",insetBlock:0,insetInlineEnd:0,borderInlineEnd:`${_}px solid ${c}`,transform:"scaleY(0.0001)",opacity:0,transition:[`transform ${D} ${R}`,`opacity ${D} ${R}`].join(","),content:'""'},[`&${i}-item-danger`]:{"&::after":{borderInlineEndColor:B}}},[`${i}-selected, ${i}-item-selected`]:{"&::after":{transform:"scaleY(1)",opacity:1,transition:[`transform ${D} ${A}`,`opacity ${D} ${A}`].join(",")}}}}}},Yj=Npe,qj=e=>{const{componentCls:t,menuItemHeight:i,itemMarginInline:a,padding:c,menuArrowSize:u,marginXS:d,marginXXS:f}=e,m=c+u+d;return{[`${t}-item`]:{position:"relative",overflow:"hidden"},[`${t}-item, ${t}-submenu-title`]:{height:i,lineHeight:`${i}px`,paddingInline:c,overflow:"hidden",textOverflow:"ellipsis",marginInline:a,marginBlock:f,width:`calc(100% - ${a*2}px)`},[`> ${t}-item,
            > ${t}-submenu > ${t}-submenu-title`]:{height:i,lineHeight:`${i}px`},[`${t}-item-group-list ${t}-submenu-title,
            ${t}-submenu-title`]:{paddingInlineEnd:m}}},xpe=e=>{const{componentCls:t,iconCls:i,menuItemHeight:a,colorTextLightSolid:c,dropdownWidth:u,controlHeightLG:d,motionDurationMid:f,motionEaseOut:m,paddingXL:g,itemMarginInline:_,fontSizeLG:S,motionDurationSlow:b,paddingXS:A,boxShadowSecondary:R}=e,w={height:a,lineHeight:`${a}px`,listStylePosition:"inside",listStyleType:"disc"};return[{[t]:{"&-inline, &-vertical":Object.assign({[`&${t}-root`]:{boxShadow:"none"}},qj(e))},[`${t}-submenu-popup`]:{[`${t}-vertical`]:Object.assign(Object.assign({},qj(e)),{boxShadow:R})}},{[`${t}-submenu-popup ${t}-vertical${t}-sub`]:{minWidth:u,maxHeight:`calc(100vh - ${d*2.5}px)`,padding:"0",overflow:"hidden",borderInlineEnd:0,"&:not([class*='-active'])":{overflowX:"hidden",overflowY:"auto"}}},{[`${t}-inline`]:{width:"100%",[`&${t}-root`]:{[`${t}-item, ${t}-submenu-title`]:{display:"flex",alignItems:"center",transition:[`border-color ${b}`,`background ${b}`,`padding ${f} ${m}`].join(","),[`> ${t}-title-content`]:{flex:"auto",minWidth:0,overflow:"hidden",textOverflow:"ellipsis"},"> *":{flex:"none"}}},[`${t}-sub${t}-inline`]:{padding:0,border:0,borderRadius:0,boxShadow:"none",[`& > ${t}-submenu > ${t}-submenu-title`]:w,[`& ${t}-item-group-title`]:{paddingInlineStart:g}},[`${t}-item`]:w}},{[`${t}-inline-collapsed`]:{width:a*2,[`&${t}-root`]:{[`${t}-item, ${t}-submenu ${t}-submenu-title`]:{[`> ${t}-inline-collapsed-noicon`]:{fontSize:S,textAlign:"center"}}},[`> ${t}-item,
          > ${t}-item-group > ${t}-item-group-list > ${t}-item,
          > ${t}-item-group > ${t}-item-group-list > ${t}-submenu > ${t}-submenu-title,
          > ${t}-submenu > ${t}-submenu-title`]:{insetInlineStart:0,paddingInline:`calc(50% - ${S/2}px - ${_}px)`,textOverflow:"clip",[`
            ${t}-submenu-arrow,
            ${t}-submenu-expand-icon
          `]:{opacity:0},[`${t}-item-icon, ${i}`]:{margin:0,fontSize:S,lineHeight:`${a}px`,"+ span":{display:"inline-block",opacity:0}}},[`${t}-item-icon, ${i}`]:{display:"inline-block"},"&-tooltip":{pointerEvents:"none",[`${t}-item-icon, ${i}`]:{display:"none"},"a, a:hover":{color:c}},[`${t}-item-group-title`]:Object.assign(Object.assign({},mie),{paddingInline:A})}}]},Ppe=xpe,Xj=e=>{const{componentCls:t,fontSize:i,motionDurationSlow:a,motionDurationMid:c,motionEaseInOut:u,motionEaseOut:d,iconCls:f,controlHeightSM:m}=e;return{[`${t}-item, ${t}-submenu-title`]:{position:"relative",display:"block",margin:0,whiteSpace:"nowrap",cursor:"pointer",transition:[`border-color ${a}`,`background ${a}`,`padding ${a} ${u}`].join(","),[`${t}-item-icon, ${f}`]:{minWidth:i,fontSize:i,transition:[`font-size ${c} ${d}`,`margin ${a} ${u}`,`color ${a}`].join(","),"+ span":{marginInlineStart:m-i,opacity:1,transition:[`opacity ${a} ${u}`,`margin ${a}`,`color ${a}`].join(",")}},[`${t}-item-icon`]:Object.assign({},BB()),[`&${t}-item-only-child`]:{[`> ${f}, > ${t}-item-icon`]:{marginInlineEnd:0}}},[`${t}-item-disabled, ${t}-submenu-disabled`]:{background:"none !important",cursor:"not-allowed","&::after":{borderColor:"transparent !important"},a:{color:"inherit !important"},[`> ${t}-submenu-title`]:{color:"inherit !important",cursor:"not-allowed"}}}},Jj=e=>{const{componentCls:t,motionDurationSlow:i,motionEaseInOut:a,borderRadius:c,menuArrowSize:u,menuArrowOffset:d}=e;return{[`${t}-submenu`]:{"&-expand-icon, &-arrow":{position:"absolute",top:"50%",insetInlineEnd:e.margin,width:u,color:"currentcolor",transform:"translateY(-50%)",transition:`transform ${i} ${a}, opacity ${i}`},"&-arrow":{"&::before, &::after":{position:"absolute",width:u*.6,height:u*.15,backgroundColor:"currentcolor",borderRadius:c,transition:[`background ${i} ${a}`,`transform ${i} ${a}`,`top ${i} ${a}`,`color ${i} ${a}`].join(","),content:'""'},"&::before":{transform:`rotate(45deg) translateY(-${d})`},"&::after":{transform:`rotate(-45deg) translateY(${d})`}}}}},Dpe=e=>{const{antCls:t,componentCls:i,fontSize:a,motionDurationSlow:c,motionDurationMid:u,motionEaseInOut:d,lineHeight:f,paddingXS:m,padding:g,colorSplit:_,lineWidth:S,zIndexPopup:b,borderRadiusLG:A,subMenuItemBorderRadius:R,menuArrowSize:w,menuArrowOffset:D,lineType:x,menuPanelMaskInset:O}=e;return[{"":{[`${i}`]:Object.assign(Object.assign({},c1()),{"&-hidden":{display:"none"}})},[`${i}-submenu-hidden`]:{display:"none"}},{[i]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Ku(e)),c1()),{marginBottom:0,paddingInlineStart:0,fontSize:a,lineHeight:0,listStyle:"none",outline:"none",transition:`width ${c} cubic-bezier(0.2, 0, 0, 1) 0s`,"ul, ol":{margin:0,padding:0,listStyle:"none"},"&-overflow":{display:"flex",[`${i}-item`]:{flex:"none"}},[`${i}-item, ${i}-submenu, ${i}-submenu-title`]:{borderRadius:e.itemBorderRadius},[`${i}-item-group-title`]:{padding:`${m}px ${g}px`,fontSize:a,lineHeight:f,transition:`all ${c}`},[`&-horizontal ${i}-submenu`]:{transition:[`border-color ${c} ${d}`,`background ${c} ${d}`].join(",")},[`${i}-submenu, ${i}-submenu-inline`]:{transition:[`border-color ${c} ${d}`,`background ${c} ${d}`,`padding ${u} ${d}`].join(",")},[`${i}-submenu ${i}-sub`]:{cursor:"initial",transition:[`background ${c} ${d}`,`padding ${c} ${d}`].join(",")},[`${i}-title-content`]:{transition:`color ${c}`},[`${i}-item a`]:{"&::before":{position:"absolute",inset:0,backgroundColor:"transparent",content:'""'}},[`${i}-item-divider`]:{overflow:"hidden",lineHeight:0,borderColor:_,borderStyle:x,borderWidth:0,borderTopWidth:S,marginBlock:S,padding:0,"&-dashed":{borderStyle:"dashed"}}}),Xj(e)),{[`${i}-item-group`]:{[`${i}-item-group-list`]:{margin:0,padding:0,[`${i}-item, ${i}-submenu-title`]:{paddingInline:`${a*2}px ${g}px`}}},"&-submenu":{"&-popup":{position:"absolute",zIndex:b,borderRadius:A,boxShadow:"none",transformOrigin:"0 0",[`&${i}-submenu`]:{background:"transparent"},"&::before":{position:"absolute",inset:`${O}px 0 0`,zIndex:-1,width:"100%",height:"100%",opacity:0,content:'""'}},"&-placement-rightTop::before":{top:0,insetInlineStart:O},"\n          &-placement-leftTop,\n          &-placement-bottomRight,\n          ":{transformOrigin:"100% 0"},"\n          &-placement-leftBottom,\n          &-placement-topRight,\n          ":{transformOrigin:"100% 100%"},"\n          &-placement-rightBottom,\n          &-placement-topLeft,\n          ":{transformOrigin:"0 100%"},"\n          &-placement-bottomLeft,\n          &-placement-rightTop,\n          ":{transformOrigin:"0 0"},"\n          &-placement-leftTop,\n          &-placement-leftBottom\n          ":{paddingInlineEnd:e.paddingXS},"\n          &-placement-rightTop,\n          &-placement-rightBottom\n          ":{paddingInlineStart:e.paddingXS},"\n          &-placement-topRight,\n          &-placement-topLeft\n          ":{paddingBottom:e.paddingXS},"\n          &-placement-bottomRight,\n          &-placement-bottomLeft\n          ":{paddingTop:e.paddingXS},[`> ${i}`]:Object.assign(Object.assign(Object.assign({borderRadius:A},Xj(e)),Jj(e)),{[`${i}-item, ${i}-submenu > ${i}-submenu-title`]:{borderRadius:R},[`${i}-submenu-title::after`]:{transition:`transform ${c} ${d}`}})}}),Jj(e)),{[`&-inline-collapsed ${i}-submenu-arrow,
        &-inline ${i}-submenu-arrow`]:{"&::before":{transform:`rotate(-45deg) translateX(${D})`},"&::after":{transform:`rotate(45deg) translateX(-${D})`}},[`${i}-submenu-open${i}-submenu-inline > ${i}-submenu-title > ${i}-submenu-arrow`]:{transform:`translateY(-${w*.2}px)`,"&::after":{transform:`rotate(-45deg) translateX(-${D})`},"&::before":{transform:`rotate(45deg) translateX(${D})`}}})},{[`${t}-layout-header`]:{[i]:{lineHeight:"inherit"}}}]},kpe=(e,t)=>ws("Menu",(a,c)=>{let{overrideComponentToken:u}=c;if(t===!1)return[];const{colorBgElevated:d,colorPrimary:f,colorError:m,colorErrorHover:g,colorTextLightSolid:_,controlHeightLG:S,fontSize:b}=a,A=b/7*5,R=Ki(a,{menuItemHeight:S,menuItemPaddingInline:a.margin,menuArrowSize:A,menuHorizontalHeight:S*1.15,menuArrowOffset:`${A*.25}px`,menuPanelMaskInset:-7,menuSubMenuBg:d}),w=new $i(_).setAlpha(.65).toRgbString(),D=Ki(R,{itemColor:w,itemHoverColor:_,groupTitleColor:w,itemSelectedColor:_,itemBg:"#001529",subMenuItemBg:"#000c17",itemActiveBg:"transparent",itemSelectedBg:f,activeBarWidth:0,activeBarHeight:0,activeBarBorderWidth:0,itemDisabledColor:new $i(_).setAlpha(.25).toRgbString(),dangerItemColor:m,dangerItemHoverColor:g,dangerItemSelectedColor:_,dangerItemActiveBg:m,dangerItemSelectedBg:m,menuSubMenuBg:"#001529",horizontalItemSelectedColor:_,horizontalItemSelectedBg:f},Object.assign({},u));return[Dpe(R),wpe(R),Ppe(R),Yj(R,"light"),Yj(D,"dark"),Ape(R),E5(R),Ij(R,"slide-up"),Ij(R,"slide-down"),v5(R,"zoom-big")]},a=>{const{colorPrimary:c,colorError:u,colorTextDisabled:d,colorErrorBg:f,colorText:m,colorTextDescription:g,colorBgContainer:_,colorFillAlter:S,colorFillContent:b,lineWidth:A,lineWidthBold:R,controlItemBgActive:w,colorBgTextHover:D}=a;return{dropdownWidth:160,zIndexPopup:a.zIndexPopupBase+50,radiusItem:a.borderRadiusLG,itemBorderRadius:a.borderRadiusLG,radiusSubMenuItem:a.borderRadiusSM,subMenuItemBorderRadius:a.borderRadiusSM,colorItemText:m,itemColor:m,colorItemTextHover:m,itemHoverColor:m,colorItemTextHoverHorizontal:c,horizontalItemHoverColor:c,colorGroupTitle:g,groupTitleColor:g,colorItemTextSelected:c,itemSelectedColor:c,colorItemTextSelectedHorizontal:c,horizontalItemSelectedColor:c,colorItemBg:_,itemBg:_,colorItemBgHover:D,itemHoverBg:D,colorItemBgActive:b,itemActiveBg:b,colorSubItemBg:S,subMenuItemBg:S,colorItemBgSelected:w,itemSelectedBg:w,colorItemBgSelectedHorizontal:"transparent",horizontalItemSelectedBg:"transparent",colorActiveBarWidth:0,activeBarWidth:0,colorActiveBarHeight:R,activeBarHeight:R,colorActiveBarBorderSize:A,activeBarBorderWidth:A,colorItemTextDisabled:d,itemDisabledColor:d,colorDangerItemText:u,dangerItemColor:u,colorDangerItemTextHover:u,dangerItemHoverColor:u,colorDangerItemTextSelected:u,dangerItemSelectedColor:u,colorDangerItemBgActive:f,dangerItemActiveBg:f,colorDangerItemBgSelected:f,dangerItemSelectedBg:f,itemMarginInline:a.marginXXS,horizontalItemBorderRadius:0,horizontalItemHoverBg:"transparent"}},{deprecatedTokens:[["colorGroupTitle","groupTitleColor"],["radiusItem","itemBorderRadius"],["radiusSubMenuItem","subMenuItemBorderRadius"],["colorItemText","itemColor"],["colorItemTextHover","itemHoverColor"],["colorItemTextHoverHorizontal","horizontalItemHoverColor"],["colorItemTextSelected","itemSelectedColor"],["colorItemTextSelectedHorizontal","horizontalItemSelectedColor"],["colorItemTextDisabled","itemDisabledColor"],["colorDangerItemText","dangerItemColor"],["colorDangerItemTextHover","dangerItemHoverColor"],["colorDangerItemTextSelected","dangerItemSelectedColor"],["colorDangerItemBgActive","dangerItemActiveBg"],["colorDangerItemBgSelected","dangerItemSelectedBg"],["colorItemBg","itemBg"],["colorItemBgHover","itemHoverBg"],["colorSubItemBg","subMenuItemBg"],["colorItemBgActive","itemActiveBg"],["colorItemBgSelectedHorizontal","horizontalItemSelectedBg"],["colorActiveBarWidth","activeBarWidth"],["colorActiveBarHeight","activeBarHeight"],["colorActiveBarBorderSize","activeBarBorderWidth"]]})(e);var Lpe=globalThis&&globalThis.__rest||function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(i[a[c]]=e[a[c]]);return i};const Mpe=y.forwardRef((e,t)=>{var i,a;const c=y.useContext(Wj),u=c||{},{getPrefixCls:d,getPopupContainer:f,direction:m}=y.useContext(Hn),g=d(),{prefixCls:_,className:S,theme:b="light",expandIcon:A,_internalDisableMenuItemTitleTooltip:R,inlineCollapsed:w,siderCollapsed:D,items:x,children:O,rootClassName:P,mode:M,selectable:F,onClick:j,overflowedIndicatorPopupClassName:B}=e,H=Lpe(e,["prefixCls","className","theme","expandIcon","_internalDisableMenuItemTitleTooltip","inlineCollapsed","siderCollapsed","items","children","rootClassName","mode","selectable","onClick","overflowedIndicatorPopupClassName"]),K=Yo(H,["collapsedWidth"]),$=Rpe(x)||O;(i=u.validator)===null||i===void 0||i.call(u,{mode:M});const Z=gs(function(){var ae;j==null||j.apply(void 0,arguments),(ae=u.onClick)===null||ae===void 0||ae.call(u)}),z=u.mode||M,G=F??u.selectable,ee=y.useMemo(()=>D!==void 0?D:w,[w,D]),re={horizontal:{motionName:`${g}-slide-up`},inline:T1(g),other:{motionName:`${g}-zoom-big`}},oe=d("menu",_||u.prefixCls),[pe,ue]=kpe(oe,!c),me=Ve(`${oe}-${b}`,S);let fe;if(typeof A=="function")fe=A;else{const ae=A||u.expandIcon;fe=bs(ae,{className:Ve(`${oe}-submenu-expand-icon`,(a=ae==null?void 0:ae.props)===null||a===void 0?void 0:a.className)})}const se=y.useMemo(()=>({prefixCls:oe,inlineCollapsed:ee||!1,direction:m,firstLevel:!0,theme:b,mode:z,disableMenuItemTitleTooltip:R}),[oe,ee,m,R,b]);return pe(y.createElement(Wj.Provider,{value:null},y.createElement(bE.Provider,{value:se},y.createElement(xm,Object.assign({getPopupContainer:f,overflowedIndicator:y.createElement(Bhe,null),overflowedIndicatorPopupClassName:Ve(oe,`${oe}-${b}`,B),mode:z,selectable:G,onClick:Z},K,{inlineCollapsed:ee,className:me,prefixCls:oe,direction:m,defaultMotions:re,expandIcon:fe,ref:t,rootClassName:Ve(P,ue)}),$))))}),Upe=Mpe,Pm=y.forwardRef((e,t)=>{const i=y.useRef(null),a=y.useContext(Vw);return y.useImperativeHandle(t,()=>({menu:i.current,focus:c=>{var u;(u=i.current)===null||u===void 0||u.focus(c)}})),y.createElement(Upe,Object.assign({ref:i},e,a))});Pm.Item=n$;Pm.SubMenu=r$;Pm.Divider=X5;Pm.ItemGroup=I_;const jpe=Pm,Fpe=e=>({"&::-moz-placeholder":{opacity:1},"&::placeholder":{color:e,userSelect:"none"},"&:placeholder-shown":{textOverflow:"ellipsis"}}),Bw=e=>({borderColor:e.inputBorderHoverColor,borderInlineEndWidth:e.lineWidth}),W1=e=>({borderColor:e.inputBorderHoverColor,boxShadow:`0 0 0 ${e.controlOutlineWidth}px ${e.controlOutline}`,borderInlineEndWidth:e.lineWidth,outline:0}),i$=e=>({color:e.colorTextDisabled,backgroundColor:e.colorBgContainerDisabled,borderColor:e.colorBorder,boxShadow:"none",cursor:"not-allowed",opacity:1,"&:hover":Object.assign({},Bw(Ki(e,{inputBorderHoverColor:e.colorBorder})))}),o$=e=>{const{inputPaddingVerticalLG:t,fontSizeLG:i,lineHeightLG:a,borderRadiusLG:c,inputPaddingHorizontalLG:u}=e;return{padding:`${t}px ${u}px`,fontSize:i,lineHeight:a,borderRadius:c}},a$=e=>({padding:`${e.inputPaddingVerticalSM}px ${e.controlPaddingHorizontalSM-1}px`,borderRadius:e.borderRadiusSM}),s$=(e,t)=>{const{componentCls:i,colorError:a,colorWarning:c,colorErrorOutline:u,colorWarningOutline:d,colorErrorBorderHover:f,colorWarningBorderHover:m}=e;return{[`&-status-error:not(${t}-disabled):not(${t}-borderless)${t}`]:{borderColor:a,"&:hover":{borderColor:f},"&:focus, &-focused":Object.assign({},W1(Ki(e,{inputBorderActiveColor:a,inputBorderHoverColor:a,controlOutline:u}))),[`${i}-prefix, ${i}-suffix`]:{color:a}},[`&-status-warning:not(${t}-disabled):not(${t}-borderless)${t}`]:{borderColor:c,"&:hover":{borderColor:m},"&:focus, &-focused":Object.assign({},W1(Ki(e,{inputBorderActiveColor:c,inputBorderHoverColor:c,controlOutline:d}))),[`${i}-prefix, ${i}-suffix`]:{color:c}}}},c$=e=>Object.assign(Object.assign({position:"relative",display:"inline-block",width:"100%",minWidth:0,padding:`${e.inputPaddingVertical}px ${e.inputPaddingHorizontal}px`,color:e.colorText,fontSize:e.fontSize,lineHeight:e.lineHeight,backgroundColor:e.colorBgContainer,backgroundImage:"none",borderWidth:e.lineWidth,borderStyle:e.lineType,borderColor:e.colorBorder,borderRadius:e.borderRadius,transition:`all ${e.motionDurationMid}`},Fpe(e.colorTextPlaceholder)),{"&:hover":Object.assign({},Bw(e)),"&:focus, &-focused":Object.assign({},W1(e)),"&-disabled, &[disabled]":Object.assign({},i$(e)),"&-borderless":{"&, &:hover, &:focus, &-focused, &-disabled, &[disabled]":{backgroundColor:"transparent",border:"none",boxShadow:"none"}},"textarea&":{maxWidth:"100%",height:"auto",minHeight:e.controlHeight,lineHeight:e.lineHeight,verticalAlign:"bottom",transition:`all ${e.motionDurationSlow}, height 0s`,resize:"vertical"},"&-lg":Object.assign({},o$(e)),"&-sm":Object.assign({},a$(e)),"&-rtl":{direction:"rtl"},"&-textarea-rtl":{direction:"rtl"}}),Vpe=e=>{const{componentCls:t,antCls:i}=e;return{position:"relative",display:"table",width:"100%",borderCollapse:"separate",borderSpacing:0,"&[class*='col-']":{paddingInlineEnd:e.paddingXS,"&:last-child":{paddingInlineEnd:0}},[`&-lg ${t}, &-lg > ${t}-group-addon`]:Object.assign({},o$(e)),[`&-sm ${t}, &-sm > ${t}-group-addon`]:Object.assign({},a$(e)),[`&-lg ${i}-select-single ${i}-select-selector`]:{height:e.controlHeightLG},[`&-sm ${i}-select-single ${i}-select-selector`]:{height:e.controlHeightSM},[`> ${t}`]:{display:"table-cell","&:not(:first-child):not(:last-child)":{borderRadius:0}},[`${t}-group`]:{"&-addon, &-wrap":{display:"table-cell",width:1,whiteSpace:"nowrap",verticalAlign:"middle","&:not(:first-child):not(:last-child)":{borderRadius:0}},"&-wrap > *":{display:"block !important"},"&-addon":{position:"relative",padding:`0 ${e.inputPaddingHorizontal}px`,color:e.colorText,fontWeight:"normal",fontSize:e.fontSize,textAlign:"center",backgroundColor:e.colorFillAlter,border:`${e.lineWidth}px ${e.lineType} ${e.colorBorder}`,borderRadius:e.borderRadius,transition:`all ${e.motionDurationSlow}`,lineHeight:1,[`${i}-select`]:{margin:`-${e.inputPaddingVertical+1}px -${e.inputPaddingHorizontal}px`,[`&${i}-select-single:not(${i}-select-customize-input)`]:{[`${i}-select-selector`]:{backgroundColor:"inherit",border:`${e.lineWidth}px ${e.lineType} transparent`,boxShadow:"none"}},"&-open, &-focused":{[`${i}-select-selector`]:{color:e.colorPrimary}}},[`${i}-cascader-picker`]:{margin:`-9px -${e.inputPaddingHorizontal}px`,backgroundColor:"transparent",[`${i}-cascader-input`]:{textAlign:"start",border:0,boxShadow:"none"}}},"&-addon:first-child":{borderInlineEnd:0},"&-addon:last-child":{borderInlineStart:0}},[`${t}`]:{width:"100%",marginBottom:0,textAlign:"inherit","&:focus":{zIndex:1,borderInlineEndWidth:1},"&:hover":{zIndex:1,borderInlineEndWidth:1,[`${t}-search-with-button &`]:{zIndex:0}}},[`> ${t}:first-child, ${t}-group-addon:first-child`]:{borderStartEndRadius:0,borderEndEndRadius:0,[`${i}-select ${i}-select-selector`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${t}-affix-wrapper`]:{[`&:not(:first-child) ${t}`]:{borderStartStartRadius:0,borderEndStartRadius:0},[`&:not(:last-child) ${t}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${t}:last-child, ${t}-group-addon:last-child`]:{borderStartStartRadius:0,borderEndStartRadius:0,[`${i}-select ${i}-select-selector`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`${t}-affix-wrapper`]:{"&:not(:last-child)":{borderStartEndRadius:0,borderEndEndRadius:0,[`${t}-search &`]:{borderStartStartRadius:e.borderRadius,borderEndStartRadius:e.borderRadius}},[`&:not(:first-child), ${t}-search &:not(:first-child)`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`&${t}-group-compact`]:Object.assign(Object.assign({display:"block"},c1()),{[`${t}-group-addon, ${t}-group-wrap, > ${t}`]:{"&:not(:first-child):not(:last-child)":{borderInlineEndWidth:e.lineWidth,"&:hover":{zIndex:1},"&:focus":{zIndex:1}}},"& > *":{display:"inline-block",float:"none",verticalAlign:"top",borderRadius:0},[`
        & > ${t}-affix-wrapper,
        & > ${t}-number-affix-wrapper,
        & > ${i}-picker-range
      `]:{display:"inline-flex"},"& > *:not(:last-child)":{marginInlineEnd:-e.lineWidth,borderInlineEndWidth:e.lineWidth},[`${t}`]:{float:"none"},[`& > ${i}-select > ${i}-select-selector,
      & > ${i}-select-auto-complete ${t},
      & > ${i}-cascader-picker ${t},
      & > ${t}-group-wrapper ${t}`]:{borderInlineEndWidth:e.lineWidth,borderRadius:0,"&:hover":{zIndex:1},"&:focus":{zIndex:1}},[`& > ${i}-select-focused`]:{zIndex:1},[`& > ${i}-select > ${i}-select-arrow`]:{zIndex:1},[`& > *:first-child,
      & > ${i}-select:first-child > ${i}-select-selector,
      & > ${i}-select-auto-complete:first-child ${t},
      & > ${i}-cascader-picker:first-child ${t}`]:{borderStartStartRadius:e.borderRadius,borderEndStartRadius:e.borderRadius},[`& > *:last-child,
      & > ${i}-select:last-child > ${i}-select-selector,
      & > ${i}-cascader-picker:last-child ${t},
      & > ${i}-cascader-picker-focused:last-child ${t}`]:{borderInlineEndWidth:e.lineWidth,borderStartEndRadius:e.borderRadius,borderEndEndRadius:e.borderRadius},[`& > ${i}-select-auto-complete ${t}`]:{verticalAlign:"top"},[`${t}-group-wrapper + ${t}-group-wrapper`]:{marginInlineStart:-e.lineWidth,[`${t}-affix-wrapper`]:{borderRadius:0}},[`${t}-group-wrapper:not(:last-child)`]:{[`&${t}-search > ${t}-group`]:{[`& > ${t}-group-addon > ${t}-search-button`]:{borderRadius:0},[`& > ${t}`]:{borderStartStartRadius:e.borderRadius,borderStartEndRadius:0,borderEndEndRadius:0,borderEndStartRadius:e.borderRadius}}}})}},Bpe=e=>{const{componentCls:t,controlHeightSM:i,lineWidth:a}=e,c=16,u=(i-a*2-c)/2;return{[t]:Object.assign(Object.assign(Object.assign(Object.assign({},Ku(e)),c$(e)),s$(e,t)),{'&[type="color"]':{height:e.controlHeight,[`&${t}-lg`]:{height:e.controlHeightLG},[`&${t}-sm`]:{height:i,paddingTop:u,paddingBottom:u}},'&[type="search"]::-webkit-search-cancel-button, &[type="search"]::-webkit-search-decoration':{"-webkit-appearance":"none"}})}},$pe=e=>{const{componentCls:t}=e;return{[`${t}-clear-icon`]:{margin:0,color:e.colorTextQuaternary,fontSize:e.fontSizeIcon,verticalAlign:-1,cursor:"pointer",transition:`color ${e.motionDurationSlow}`,"&:hover":{color:e.colorTextTertiary},"&:active":{color:e.colorText},"&-hidden":{visibility:"hidden"},"&-has-suffix":{margin:`0 ${e.inputAffixPadding}px`}}}},Hpe=e=>{const{componentCls:t,inputAffixPadding:i,colorTextDescription:a,motionDurationSlow:c,colorIcon:u,colorIconHover:d,iconCls:f}=e;return{[`${t}-affix-wrapper`]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},c$(e)),{display:"inline-flex",[`&:not(${t}-affix-wrapper-disabled):hover`]:Object.assign(Object.assign({},Bw(e)),{zIndex:1,[`${t}-search-with-button &`]:{zIndex:0}}),"&-focused, &:focus":{zIndex:1},"&-disabled":{[`${t}[disabled]`]:{background:"transparent"}},[`> input${t}`]:{padding:0,fontSize:"inherit",border:"none",borderRadius:0,outline:"none","&::-ms-reveal":{display:"none"},"&:focus":{boxShadow:"none !important"}},"&::before":{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'},[`${t}`]:{"&-prefix, &-suffix":{display:"flex",flex:"none",alignItems:"center","> *:not(:last-child)":{marginInlineEnd:e.paddingXS}},"&-show-count-suffix":{color:a},"&-show-count-has-suffix":{marginInlineEnd:e.paddingXXS},"&-prefix":{marginInlineEnd:i},"&-suffix":{marginInlineStart:i}}}),$pe(e)),{[`${f}${t}-password-icon`]:{color:u,cursor:"pointer",transition:`all ${c}`,"&:hover":{color:d}}}),s$(e,`${t}-affix-wrapper`))}},Wpe=e=>{const{componentCls:t,colorError:i,colorWarning:a,borderRadiusLG:c,borderRadiusSM:u}=e;return{[`${t}-group`]:Object.assign(Object.assign(Object.assign({},Ku(e)),Vpe(e)),{"&-rtl":{direction:"rtl"},"&-wrapper":{display:"inline-block",width:"100%",textAlign:"start",verticalAlign:"top","&-rtl":{direction:"rtl"},"&-lg":{[`${t}-group-addon`]:{borderRadius:c}},"&-sm":{[`${t}-group-addon`]:{borderRadius:u}},"&-status-error":{[`${t}-group-addon`]:{color:i,borderColor:i}},"&-status-warning":{[`${t}-group-addon`]:{color:a,borderColor:a}},"&-disabled":{[`${t}-group-addon`]:Object.assign({},i$(e))},[`&:not(${t}-compact-first-item):not(${t}-compact-last-item)${t}-compact-item`]:{[`${t}, ${t}-group-addon`]:{borderRadius:0}},[`&:not(${t}-compact-last-item)${t}-compact-first-item`]:{[`${t}, ${t}-group-addon`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&:not(${t}-compact-first-item)${t}-compact-last-item`]:{[`${t}, ${t}-group-addon`]:{borderStartStartRadius:0,borderEndStartRadius:0}}}})}},Gpe=e=>{const{componentCls:t,antCls:i}=e,a=`${t}-search`;return{[a]:{[`${t}`]:{"&:hover, &:focus":{borderColor:e.colorPrimaryHover,[`+ ${t}-group-addon ${a}-button:not(${i}-btn-primary)`]:{borderInlineStartColor:e.colorPrimaryHover}}},[`${t}-affix-wrapper`]:{borderRadius:0},[`${t}-lg`]:{lineHeight:e.lineHeightLG-2e-4},[`> ${t}-group`]:{[`> ${t}-group-addon:last-child`]:{insetInlineStart:-1,padding:0,border:0,[`${a}-button`]:{paddingTop:0,paddingBottom:0,borderStartStartRadius:0,borderStartEndRadius:e.borderRadius,borderEndEndRadius:e.borderRadius,borderEndStartRadius:0},[`${a}-button:not(${i}-btn-primary)`]:{color:e.colorTextDescription,"&:hover":{color:e.colorPrimaryHover},"&:active":{color:e.colorPrimaryActive},[`&${i}-btn-loading::before`]:{insetInlineStart:0,insetInlineEnd:0,insetBlockStart:0,insetBlockEnd:0}}}},[`${a}-button`]:{height:e.controlHeight,"&:hover, &:focus":{zIndex:1}},[`&-large ${a}-button`]:{height:e.controlHeightLG},[`&-small ${a}-button`]:{height:e.controlHeightSM},"&-rtl":{direction:"rtl"},[`&${t}-compact-item`]:{[`&:not(${t}-compact-last-item)`]:{[`${t}-group-addon`]:{[`${t}-search-button`]:{marginInlineEnd:-e.lineWidth,borderRadius:0}}},[`&:not(${t}-compact-first-item)`]:{[`${t},${t}-affix-wrapper`]:{borderRadius:0}},[`> ${t}-group-addon ${t}-search-button,
        > ${t},
        ${t}-affix-wrapper`]:{"&:hover,&:focus,&:active":{zIndex:2}},[`> ${t}-affix-wrapper-focused`]:{zIndex:2}}}}};function l$(e){return Ki(e,{inputAffixPadding:e.paddingXXS,inputPaddingVertical:Math.max(Math.round((e.controlHeight-e.fontSize*e.lineHeight)/2*10)/10-e.lineWidth,3),inputPaddingVerticalLG:Math.ceil((e.controlHeightLG-e.fontSizeLG*e.lineHeightLG)/2*10)/10-e.lineWidth,inputPaddingVerticalSM:Math.max(Math.round((e.controlHeightSM-e.fontSize*e.lineHeight)/2*10)/10-e.lineWidth,0),inputPaddingHorizontal:e.paddingSM-e.lineWidth,inputPaddingHorizontalSM:e.paddingXS-e.lineWidth,inputPaddingHorizontalLG:e.controlPaddingHorizontal-e.lineWidth,inputBorderHoverColor:e.colorPrimaryHover,inputBorderActiveColor:e.colorPrimaryHover})}const zpe=e=>{const{componentCls:t,paddingLG:i}=e,a=`${t}-textarea`;return{[a]:{position:"relative","&-show-count":{[`> ${t}`]:{height:"100%"},[`${t}-data-count`]:{position:"absolute",bottom:-e.fontSize*e.lineHeight,insetInlineEnd:0,color:e.colorTextDescription,whiteSpace:"nowrap",pointerEvents:"none"}},"&-allow-clear":{[`> ${t}`]:{paddingInlineEnd:i}},[`&-affix-wrapper${a}-has-feedback`]:{[`${t}`]:{paddingInlineEnd:i}},[`&-affix-wrapper${t}-affix-wrapper`]:{padding:0,[`> textarea${t}`]:{fontSize:"inherit",border:"none",outline:"none","&:focus":{boxShadow:"none !important"}},[`${t}-suffix`]:{margin:0,"> *:not(:last-child)":{marginInline:0},[`${t}-clear-icon`]:{position:"absolute",insetInlineEnd:e.paddingXS,insetBlockStart:e.paddingXS},[`${a}-suffix`]:{position:"absolute",top:0,insetInlineEnd:e.inputPaddingHorizontal,bottom:0,zIndex:1,display:"inline-flex",alignItems:"center",margin:"auto",pointerEvents:"none"}}}}}},$w=ws("Input",e=>{const t=l$(e);return[Bpe(t),zpe(t),Hpe(t),Wpe(t),Gpe(t),t5(t)]}),Kpe=y.createContext({}),u$=Kpe,Ype=e=>{const{componentCls:t}=e;return{[t]:{display:"flex",flexFlow:"row wrap",minWidth:0,"&::before, &::after":{display:"flex"},"&-no-wrap":{flexWrap:"nowrap"},"&-start":{justifyContent:"flex-start"},"&-center":{justifyContent:"center"},"&-end":{justifyContent:"flex-end"},"&-space-between":{justifyContent:"space-between"},"&-space-around":{justifyContent:"space-around"},"&-space-evenly":{justifyContent:"space-evenly"},"&-top":{alignItems:"flex-start"},"&-middle":{alignItems:"center"},"&-bottom":{alignItems:"flex-end"}}}},qpe=e=>{const{componentCls:t}=e;return{[t]:{position:"relative",maxWidth:"100%",minHeight:1}}},Xpe=(e,t)=>{const{componentCls:i,gridColumns:a}=e,c={};for(let u=a;u>=0;u--)u===0?(c[`${i}${t}-${u}`]={display:"none"},c[`${i}-push-${u}`]={insetInlineStart:"auto"},c[`${i}-pull-${u}`]={insetInlineEnd:"auto"},c[`${i}${t}-push-${u}`]={insetInlineStart:"auto"},c[`${i}${t}-pull-${u}`]={insetInlineEnd:"auto"},c[`${i}${t}-offset-${u}`]={marginInlineStart:0},c[`${i}${t}-order-${u}`]={order:0}):(c[`${i}${t}-${u}`]={display:"block",flex:`0 0 ${u/a*100}%`,maxWidth:`${u/a*100}%`},c[`${i}${t}-push-${u}`]={insetInlineStart:`${u/a*100}%`},c[`${i}${t}-pull-${u}`]={insetInlineEnd:`${u/a*100}%`},c[`${i}${t}-offset-${u}`]={marginInlineStart:`${u/a*100}%`},c[`${i}${t}-order-${u}`]={order:u});return c},G1=(e,t)=>Xpe(e,t),Jpe=(e,t,i)=>({[`@media (min-width: ${t}px)`]:Object.assign({},G1(e,i))}),Qpe=ws("Grid",e=>[Ype(e)]),Zpe=ws("Grid",e=>{const t=Ki(e,{gridColumns:24}),i={"-sm":t.screenSMMin,"-md":t.screenMDMin,"-lg":t.screenLGMin,"-xl":t.screenXLMin,"-xxl":t.screenXXLMin};return[qpe(t),G1(t,""),G1(t,"-xs"),Object.keys(i).map(a=>Jpe(t,i[a],a)).reduce((a,c)=>Object.assign(Object.assign({},a),c),{})]});var efe=globalThis&&globalThis.__rest||function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(i[a[c]]=e[a[c]]);return i};function tfe(e){return typeof e=="number"?`${e} ${e} auto`:/^\d+(\.\d+)?(px|em|rem|%)$/.test(e)?`0 0 ${e}`:e}const nfe=["xs","sm","md","lg","xl","xxl"],rfe=y.forwardRef((e,t)=>{const{getPrefixCls:i,direction:a}=y.useContext(Hn),{gutter:c,wrap:u,supportFlexGap:d}=y.useContext(u$),{prefixCls:f,span:m,order:g,offset:_,push:S,pull:b,className:A,children:R,flex:w,style:D}=e,x=efe(e,["prefixCls","span","order","offset","push","pull","className","children","flex","style"]),O=i("col",f),[P,M]=Zpe(O);let F={};nfe.forEach(H=>{let K={};const $=e[H];typeof $=="number"?K.span=$:typeof $=="object"&&(K=$||{}),delete x[H],F=Object.assign(Object.assign({},F),{[`${O}-${H}-${K.span}`]:K.span!==void 0,[`${O}-${H}-order-${K.order}`]:K.order||K.order===0,[`${O}-${H}-offset-${K.offset}`]:K.offset||K.offset===0,[`${O}-${H}-push-${K.push}`]:K.push||K.push===0,[`${O}-${H}-pull-${K.pull}`]:K.pull||K.pull===0,[`${O}-${H}-flex-${K.flex}`]:K.flex||K.flex==="auto",[`${O}-rtl`]:a==="rtl"})});const j=Ve(O,{[`${O}-${m}`]:m!==void 0,[`${O}-order-${g}`]:g,[`${O}-offset-${_}`]:_,[`${O}-push-${S}`]:S,[`${O}-pull-${b}`]:b},A,F,M),B={};if(c&&c[0]>0){const H=c[0]/2;B.paddingLeft=H,B.paddingRight=H}if(c&&c[1]>0&&!d){const H=c[1]/2;B.paddingTop=H,B.paddingBottom=H}return w&&(B.flex=tfe(w),u===!1&&!B.minWidth&&(B.minWidth=0)),P(y.createElement("div",Object.assign({},x,{style:Object.assign(Object.assign({},B),D),className:j,ref:t}),R))}),d$=rfe,ife=()=>{const[e,t]=y.useState(!1);return y.useEffect(()=>{t(Qce())},[]),e};var ofe=globalThis&&globalThis.__rest||function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(i[a[c]]=e[a[c]]);return i};function Qj(e,t){const[i,a]=y.useState(typeof e=="string"?e:""),c=()=>{if(typeof e=="string"&&a(e),typeof e=="object")for(let u=0;u<hm.length;u++){const d=hm[u];if(!t[d])continue;const f=e[d];if(f!==void 0){a(f);return}}};return y.useEffect(()=>{c()},[JSON.stringify(e),t]),i}const afe=y.forwardRef((e,t)=>{const{prefixCls:i,justify:a,align:c,className:u,style:d,children:f,gutter:m=0,wrap:g}=e,_=ofe(e,["prefixCls","justify","align","className","style","children","gutter","wrap"]),{getPrefixCls:S,direction:b}=y.useContext(Hn),[A,R]=y.useState({xs:!0,sm:!0,md:!0,lg:!0,xl:!0,xxl:!0}),[w,D]=y.useState({xs:!1,sm:!1,md:!1,lg:!1,xl:!1,xxl:!1}),x=Qj(c,w),O=Qj(a,w),P=ife(),M=y.useRef(m),F=mde();y.useEffect(()=>{const ue=F.subscribe(me=>{D(me);const fe=M.current||0;(!Array.isArray(fe)&&typeof fe=="object"||Array.isArray(fe)&&(typeof fe[0]=="object"||typeof fe[1]=="object"))&&R(me)});return()=>F.unsubscribe(ue)},[]);const j=()=>{const ue=[void 0,void 0];return(Array.isArray(m)?m:[m,void 0]).forEach((fe,se)=>{if(typeof fe=="object")for(let ae=0;ae<hm.length;ae++){const de=hm[ae];if(A[de]&&fe[de]!==void 0){ue[se]=fe[de];break}}else ue[se]=fe}),ue},B=S("row",i),[H,K]=Qpe(B),$=j(),Z=Ve(B,{[`${B}-no-wrap`]:g===!1,[`${B}-${O}`]:O,[`${B}-${x}`]:x,[`${B}-rtl`]:b==="rtl"},u,K),z={},G=$[0]!=null&&$[0]>0?$[0]/-2:void 0,ee=$[1]!=null&&$[1]>0?$[1]/-2:void 0;G&&(z.marginLeft=G,z.marginRight=G),P?[,z.rowGap]=$:ee&&(z.marginTop=ee,z.marginBottom=ee);const[re,oe]=$,pe=y.useMemo(()=>({gutter:[re,oe],wrap:g,supportFlexGap:P}),[re,oe,g,P]);return H(y.createElement(u$.Provider,{value:pe},y.createElement("div",Object.assign({},_,{className:Z,style:Object.assign(Object.assign({},z),d),ref:t}),f)))}),sfe=afe,cfe=e=>{const{getPrefixCls:t,direction:i}=y.useContext(Hn),{prefixCls:a,className:c=""}=e,u=t("input-group",a),d=t("input"),[f,m]=$w(d),g=Ve(u,{[`${u}-lg`]:e.size==="large",[`${u}-sm`]:e.size==="small",[`${u}-compact`]:e.compact,[`${u}-rtl`]:i==="rtl"},m,c),_=y.useContext(Dc),S=y.useMemo(()=>Object.assign(Object.assign({},_),{isFormItemInput:!1}),[_]);return f(y.createElement("span",{className:g,style:e.style,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,onFocus:e.onFocus,onBlur:e.onBlur},y.createElement(Dc.Provider,{value:S},e.children)))},lfe=cfe;function nh(e){return!!(e.addonBefore||e.addonAfter)}function Xb(e){return!!(e.prefix||e.suffix||e.allowClear)}function Ff(e,t,i,a){if(i){var c=t;if(t.type==="click"){var u=e.cloneNode(!0);c=Object.create(t,{target:{value:u},currentTarget:{value:u}}),u.value="",i(c);return}if(a!==void 0){c=Object.create(t,{target:{value:e},currentTarget:{value:e}}),e.value=a,i(c);return}i(c)}}function ufe(e,t){if(e){e.focus(t);var i=t||{},a=i.cursor;if(a){var c=e.value.length;switch(a){case"start":e.setSelectionRange(0,0);break;case"end":e.setSelectionRange(c,c);break;default:e.setSelectionRange(0,c)}}}}function z1(e){return typeof e>"u"||e===null?"":String(e)}var h$=function(t){var i,a,c=t.inputElement,u=t.prefixCls,d=t.prefix,f=t.suffix,m=t.addonBefore,g=t.addonAfter,_=t.className,S=t.style,b=t.disabled,A=t.readOnly,R=t.focused,w=t.triggerFocus,D=t.allowClear,x=t.value,O=t.handleReset,P=t.hidden,M=t.classes,F=t.classNames,j=t.dataAttrs,B=t.styles,H=y.useRef(null),K=function(se){var ae;(ae=H.current)!==null&&ae!==void 0&&ae.contains(se.target)&&(w==null||w())},$=function(){var se;if(!D)return null;var ae=!b&&!A&&x,de="".concat(u,"-clear-icon"),ce=jn(D)==="object"&&D!==null&&D!==void 0&&D.clearIcon?D.clearIcon:"â";return ut.createElement("span",{onClick:O,onMouseDown:function(Ie){return Ie.preventDefault()},className:Ve(de,(se={},tt(se,"".concat(de,"-hidden"),!ae),tt(se,"".concat(de,"-has-suffix"),!!f),se)),role:"button",tabIndex:-1},ce)},Z=y.cloneElement(c,{value:x,hidden:P,className:Ve((i=c.props)===null||i===void 0?void 0:i.className,!Xb(t)&&!nh(t)&&_)||null,style:Ee(Ee({},(a=c.props)===null||a===void 0?void 0:a.style),!Xb(t)&&!nh(t)?S:{})});if(Xb(t)){var z,G="".concat(u,"-affix-wrapper"),ee=Ve(G,(z={},tt(z,"".concat(G,"-disabled"),b),tt(z,"".concat(G,"-focused"),R),tt(z,"".concat(G,"-readonly"),A),tt(z,"".concat(G,"-input-with-clear-btn"),f&&D&&x),z),!nh(t)&&_,M==null?void 0:M.affixWrapper),re=(f||D)&&ut.createElement("span",{className:Ve("".concat(u,"-suffix"),F==null?void 0:F.suffix),style:B==null?void 0:B.suffix},$(),f);Z=ut.createElement("span",He({className:ee,style:nh(t)?void 0:S,hidden:!nh(t)&&P,onClick:K},j==null?void 0:j.affixWrapper,{ref:H}),d&&ut.createElement("span",{className:Ve("".concat(u,"-prefix"),F==null?void 0:F.prefix),style:B==null?void 0:B.prefix},d),y.cloneElement(c,{value:x,hidden:null}),re)}if(nh(t)){var oe="".concat(u,"-group"),pe="".concat(oe,"-addon"),ue=Ve("".concat(u,"-wrapper"),oe,M==null?void 0:M.wrapper),me=Ve("".concat(u,"-group-wrapper"),_,M==null?void 0:M.group);return ut.createElement("span",{className:me,style:S,hidden:P},ut.createElement("span",{className:ue},m&&ut.createElement("span",{className:pe},m),y.cloneElement(Z,{hidden:null}),g&&ut.createElement("span",{className:pe},g)))}return Z},dfe=["autoComplete","onChange","onFocus","onBlur","onPressEnter","onKeyDown","prefixCls","disabled","htmlSize","className","maxLength","suffix","showCount","type","classes","classNames","styles"],hfe=y.forwardRef(function(e,t){var i=e.autoComplete,a=e.onChange,c=e.onFocus,u=e.onBlur,d=e.onPressEnter,f=e.onKeyDown,m=e.prefixCls,g=m===void 0?"rc-input":m,_=e.disabled,S=e.htmlSize,b=e.className,A=e.maxLength,R=e.suffix,w=e.showCount,D=e.type,x=D===void 0?"text":D,O=e.classes,P=e.classNames,M=e.styles,F=fn(e,dfe),j=bc(e.defaultValue,{value:e.value}),B=Pe(j,2),H=B[0],K=B[1],$=y.useState(!1),Z=Pe($,2),z=Z[0],G=Z[1],ee=y.useRef(null),re=function(ce){ee.current&&ufe(ee.current,ce)};y.useImperativeHandle(t,function(){return{focus:re,blur:function(){var ce;(ce=ee.current)===null||ce===void 0||ce.blur()},setSelectionRange:function(ce,we,Ie){var $e;($e=ee.current)===null||$e===void 0||$e.setSelectionRange(ce,we,Ie)},select:function(){var ce;(ce=ee.current)===null||ce===void 0||ce.select()},input:ee.current}}),y.useEffect(function(){G(function(de){return de&&_?!1:de})},[_]);var oe=function(ce){e.value===void 0&&K(ce.target.value),ee.current&&Ff(ee.current,ce,a)},pe=function(ce){d&&ce.key==="Enter"&&d(ce),f==null||f(ce)},ue=function(ce){G(!0),c==null||c(ce)},me=function(ce){G(!1),u==null||u(ce)},fe=function(ce){K(""),re(),ee.current&&Ff(ee.current,ce,a)},se=function(){var ce=Yo(e,["prefixCls","onPressEnter","addonBefore","addonAfter","prefix","suffix","allowClear","defaultValue","showCount","classes","htmlSize","styles","classNames"]);return ut.createElement("input",He({autoComplete:i},ce,{onChange:oe,onFocus:ue,onBlur:me,onKeyDown:pe,className:Ve(g,tt({},"".concat(g,"-disabled"),_),P==null?void 0:P.input),style:M==null?void 0:M.input,ref:ee,size:S,type:x}))},ae=function(){var ce=Number(A)>0;if(R||w){var we=z1(H),Ie=Qe(we).length,$e=jn(w)==="object"?w.formatter({value:we,count:Ie,maxLength:A}):"".concat(Ie).concat(ce?" / ".concat(A):"");return ut.createElement(ut.Fragment,null,!!w&&ut.createElement("span",{className:Ve("".concat(g,"-show-count-suffix"),tt({},"".concat(g,"-show-count-has-suffix"),!!R),P==null?void 0:P.count),style:Ee({},M==null?void 0:M.count)},$e),R)}return null};return ut.createElement(h$,He({},F,{prefixCls:g,className:b,inputElement:se(),handleReset:fe,value:z1(H),focused:z,triggerFocus:re,suffix:ae(),disabled:_,classes:O,classNames:P,styles:M}))});function p$(e,t){const i=y.useRef([]),a=()=>{i.current.push(setTimeout(()=>{var c,u,d,f;!((c=e.current)===null||c===void 0)&&c.input&&((u=e.current)===null||u===void 0?void 0:u.input.getAttribute("type"))==="password"&&(!((d=e.current)===null||d===void 0)&&d.input.hasAttribute("value"))&&((f=e.current)===null||f===void 0||f.input.removeAttribute("value"))}))};return y.useEffect(()=>(t&&a(),()=>i.current.forEach(c=>{c&&clearTimeout(c)})),[]),a}function pfe(e){return!!(e.prefix||e.suffix||e.allowClear)}var ffe=globalThis&&globalThis.__rest||function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(i[a[c]]=e[a[c]]);return i};function mfe(e,t){if(!e)return;e.focus(t);const{cursor:i}=t||{};if(i){const a=e.value.length;switch(i){case"start":e.setSelectionRange(0,0);break;case"end":e.setSelectionRange(a,a);break;default:e.setSelectionRange(0,a);break}}}const gfe=y.forwardRef((e,t)=>{const{prefixCls:i,bordered:a=!0,status:c,size:u,disabled:d,onBlur:f,onFocus:m,suffix:g,allowClear:_,addonAfter:S,addonBefore:b,className:A,rootClassName:R,onChange:w,classNames:D}=e,x=ffe(e,["prefixCls","bordered","status","size","disabled","onBlur","onFocus","suffix","allowClear","addonAfter","addonBefore","className","rootClassName","onChange","classNames"]),{getPrefixCls:O,direction:P,input:M}=ut.useContext(Hn),F=O("input",i),j=y.useRef(null),[B,H]=$w(F),{compactSize:K,compactItemClassnames:$}=Tw(F,P),Z=Zh(Ie=>{var $e;return($e=u??K)!==null&&$e!==void 0?$e:Ie}),z=ut.useContext(Rm),G=d??z,{status:ee,hasFeedback:re,feedbackIcon:oe}=y.useContext(Dc),pe=O5(ee,c),ue=pfe(e)||!!re,me=y.useRef(ue);y.useEffect(()=>{ue&&me.current,me.current=ue},[ue]);const fe=p$(j,!0),se=Ie=>{fe(),f==null||f(Ie)},ae=Ie=>{fe(),m==null||m(Ie)},de=Ie=>{fe(),w==null||w(Ie)},ce=(re||g)&&ut.createElement(ut.Fragment,null,g,re&&oe);let we;return typeof _=="object"&&(_!=null&&_.clearIcon)?we=_:_&&(we={clearIcon:ut.createElement(y_,null)}),B(ut.createElement(hfe,Object.assign({ref:Is(t,j),prefixCls:F,autoComplete:M==null?void 0:M.autoComplete},x,{disabled:G,onBlur:se,onFocus:ae,suffix:ce,allowClear:we,className:Ve(A,R,$),onChange:de,addonAfter:S&&ut.createElement(C1,null,ut.createElement(Rj,{override:!0,status:!0},S)),addonBefore:b&&ut.createElement(C1,null,ut.createElement(Rj,{override:!0,status:!0},b)),classNames:Object.assign(Object.assign({},D),{input:Ve({[`${F}-sm`]:Z==="small",[`${F}-lg`]:Z==="large",[`${F}-rtl`]:P==="rtl",[`${F}-borderless`]:!a},!ue&&jf(F,pe),D==null?void 0:D.input,H)}),classes:{affixWrapper:Ve({[`${F}-affix-wrapper-sm`]:Z==="small",[`${F}-affix-wrapper-lg`]:Z==="large",[`${F}-affix-wrapper-rtl`]:P==="rtl",[`${F}-affix-wrapper-borderless`]:!a},jf(`${F}-affix-wrapper`,pe,re),H),wrapper:Ve({[`${F}-group-rtl`]:P==="rtl"},H),group:Ve({[`${F}-group-wrapper-sm`]:Z==="small",[`${F}-group-wrapper-lg`]:Z==="large",[`${F}-group-wrapper-rtl`]:P==="rtl",[`${F}-group-wrapper-disabled`]:G},jf(`${F}-group-wrapper`,pe,re),H)}})))}),Hw=gfe;var f$={};Object.defineProperty(f$,"__esModule",{value:!0});var vfe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2Q889.47 375.11 816.7 305l-50.88 50.88C807.31 395.53 843.45 447.4 874.7 512 791.5 684.2 673.4 766 512 766q-72.67 0-133.87-22.38L323 798.75Q408 838 512 838q288.3 0 430.2-300.3a60.29 60.29 0 000-51.5zm-63.57-320.64L836 122.88a8 8 0 00-11.32 0L715.31 232.2Q624.86 186 512 186q-288.3 0-430.2 300.3a60.3 60.3 0 000 51.5q56.69 119.4 136.5 191.41L112.48 835a8 8 0 000 11.31L155.17 889a8 8 0 0011.31 0l712.15-712.12a8 8 0 000-11.32zM149.3 512C232.6 339.8 350.7 258 512 258c54.54 0 104.13 9.36 149.12 28.39l-70.3 70.3a176 176 0 00-238.13 238.13l-83.42 83.42C223.1 637.49 183.3 582.28 149.3 512zm246.7 0a112.11 112.11 0 01146.2-106.69L401.31 546.2A112 112 0 01396 512z"}},{tag:"path",attrs:{d:"M508 624c-3.46 0-6.87-.16-10.25-.47l-52.82 52.82a176.09 176.09 0 00227.42-227.42l-52.82 52.82c.31 3.38.47 6.79.47 10.25a111.94 111.94 0 01-112 112z"}}]},name:"eye-invisible",theme:"outlined"},Efe=f$.default=vfe;function _fe(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function yfe(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{},a=Object.keys(i);typeof Object.getOwnPropertySymbols=="function"&&(a=a.concat(Object.getOwnPropertySymbols(i).filter(function(c){return Object.getOwnPropertyDescriptor(i,c).enumerable}))),a.forEach(function(c){_fe(e,c,i[c])})}return e}function Sfe(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),i.push.apply(i,a)}return i}function Cfe(e,t){return t=t??{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Sfe(Object(t)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))}),e}var bfe=function(e,t){return y.createElement(xi,Cfe(yfe({},e),{ref:t,icon:Efe}))};const Tfe=y.forwardRef(bfe);var m$={};Object.defineProperty(m$,"__esModule",{value:!0});var Rfe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"}}]},name:"eye",theme:"outlined"},Ife=m$.default=Rfe;function wfe(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Ofe(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{},a=Object.keys(i);typeof Object.getOwnPropertySymbols=="function"&&(a=a.concat(Object.getOwnPropertySymbols(i).filter(function(c){return Object.getOwnPropertyDescriptor(i,c).enumerable}))),a.forEach(function(c){wfe(e,c,i[c])})}return e}function Afe(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),i.push.apply(i,a)}return i}function Nfe(e,t){return t=t??{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Afe(Object(t)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))}),e}var xfe=function(e,t){return y.createElement(xi,Nfe(Ofe({},e),{ref:t,icon:Ife}))};const Pfe=y.forwardRef(xfe);var Dfe=globalThis&&globalThis.__rest||function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(i[a[c]]=e[a[c]]);return i};const kfe=e=>e?y.createElement(Pfe,null):y.createElement(Tfe,null),Lfe={click:"onClick",hover:"onMouseOver"},Mfe=y.forwardRef((e,t)=>{const{visibilityToggle:i=!0}=e,a=typeof i=="object"&&i.visible!==void 0,[c,u]=y.useState(()=>a?i.visible:!1),d=y.useRef(null);y.useEffect(()=>{a&&u(i.visible)},[a,i]);const f=p$(d),m=()=>{const{disabled:F}=e;F||(c&&f(),u(j=>{var B;const H=!j;return typeof i=="object"&&((B=i.onVisibleChange)===null||B===void 0||B.call(i,H)),H}))},g=F=>{const{action:j="click",iconRender:B=kfe}=e,H=Lfe[j]||"",K=B(c),$={[H]:m,className:`${F}-icon`,key:"passwordIcon",onMouseDown:Z=>{Z.preventDefault()},onMouseUp:Z=>{Z.preventDefault()}};return y.cloneElement(y.isValidElement(K)?K:y.createElement("span",null,K),$)},{className:_,prefixCls:S,inputPrefixCls:b,size:A}=e,R=Dfe(e,["className","prefixCls","inputPrefixCls","size"]),{getPrefixCls:w}=y.useContext(Hn),D=w("input",b),x=w("input-password",S),O=i&&g(x),P=Ve(x,_,{[`${x}-${A}`]:!!A}),M=Object.assign(Object.assign({},Yo(R,["suffix","iconRender","visibilityToggle"])),{type:c?"text":"password",className:P,prefixCls:D,suffix:O});return A&&(M.size=A),y.createElement(Hw,Object.assign({ref:Is(t,d)},M))}),Ufe=Mfe;var jfe=globalThis&&globalThis.__rest||function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(i[a[c]]=e[a[c]]);return i};const Ffe=y.forwardRef((e,t)=>{const{prefixCls:i,inputPrefixCls:a,className:c,size:u,suffix:d,enterButton:f=!1,addonAfter:m,loading:g,disabled:_,onSearch:S,onChange:b,onCompositionStart:A,onCompositionEnd:R}=e,w=jfe(e,["prefixCls","inputPrefixCls","className","size","suffix","enterButton","addonAfter","loading","disabled","onSearch","onChange","onCompositionStart","onCompositionEnd"]),{getPrefixCls:D,direction:x}=y.useContext(Hn),O=y.useRef(!1),P=D("input-search",i),M=D("input",a),{compactSize:F}=Tw(P,x),j=Zh(fe=>{var se;return(se=u??F)!==null&&se!==void 0?se:fe}),B=y.useRef(null),H=fe=>{fe&&fe.target&&fe.type==="click"&&S&&S(fe.target.value,fe),b&&b(fe)},K=fe=>{var se;document.activeElement===((se=B.current)===null||se===void 0?void 0:se.input)&&fe.preventDefault()},$=fe=>{var se,ae;S&&S((ae=(se=B.current)===null||se===void 0?void 0:se.input)===null||ae===void 0?void 0:ae.value,fe)},Z=fe=>{O.current||g||$(fe)},z=typeof f=="boolean"?y.createElement(hde,null):null,G=`${P}-button`;let ee;const re=f||{},oe=re.type&&re.type.__ANT_BUTTON===!0;oe||re.type==="button"?ee=bs(re,Object.assign({onMouseDown:K,onClick:fe=>{var se,ae;(ae=(se=re==null?void 0:re.props)===null||se===void 0?void 0:se.onClick)===null||ae===void 0||ae.call(se,fe),$(fe)},key:"enterButton"},oe?{className:G,size:j}:{})):ee=y.createElement(ci,{className:G,type:f?"primary":void 0,size:j,disabled:_,key:"enterButton",onMouseDown:K,onClick:$,loading:g,icon:z},f),m&&(ee=[ee,bs(m,{key:"addonAfter"})]);const pe=Ve(P,{[`${P}-rtl`]:x==="rtl",[`${P}-${j}`]:!!j,[`${P}-with-button`]:!!f},c),ue=fe=>{O.current=!0,A==null||A(fe)},me=fe=>{O.current=!1,R==null||R(fe)};return y.createElement(Hw,Object.assign({ref:Is(B,t),onPressEnter:Z},w,{size:j,onCompositionStart:ue,onCompositionEnd:me,prefixCls:M,addonAfter:ee,suffix:d,onChange:H,className:pe,disabled:_}))}),Vfe=Ffe;var Bfe=`
  min-height:0 !important;
  max-height:none !important;
  height:0 !important;
  visibility:hidden !important;
  overflow:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
  pointer-events: none !important;
`,$fe=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","font-variant","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break","white-space"],Jb={},Ua;function Hfe(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=e.getAttribute("id")||e.getAttribute("data-reactid")||e.getAttribute("name");if(t&&Jb[i])return Jb[i];var a=window.getComputedStyle(e),c=a.getPropertyValue("box-sizing")||a.getPropertyValue("-moz-box-sizing")||a.getPropertyValue("-webkit-box-sizing"),u=parseFloat(a.getPropertyValue("padding-bottom"))+parseFloat(a.getPropertyValue("padding-top")),d=parseFloat(a.getPropertyValue("border-bottom-width"))+parseFloat(a.getPropertyValue("border-top-width")),f=$fe.map(function(g){return"".concat(g,":").concat(a.getPropertyValue(g))}).join(";"),m={sizingStyle:f,paddingSize:u,borderSize:d,boxSizing:c};return t&&i&&(Jb[i]=m),m}function Wfe(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;Ua||(Ua=document.createElement("textarea"),Ua.setAttribute("tab-index","-1"),Ua.setAttribute("aria-hidden","true"),document.body.appendChild(Ua)),e.getAttribute("wrap")?Ua.setAttribute("wrap",e.getAttribute("wrap")):Ua.removeAttribute("wrap");var c=Hfe(e,t),u=c.paddingSize,d=c.borderSize,f=c.boxSizing,m=c.sizingStyle;Ua.setAttribute("style","".concat(m,";").concat(Bfe)),Ua.value=e.value||e.placeholder||"";var g=void 0,_=void 0,S,b=Ua.scrollHeight;if(f==="border-box"?b+=d:f==="content-box"&&(b-=u),i!==null||a!==null){Ua.value=" ";var A=Ua.scrollHeight-u;i!==null&&(g=A*i,f==="border-box"&&(g=g+u+d),b=Math.max(g,b)),a!==null&&(_=A*a,f==="border-box"&&(_=_+u+d),S=b>_?"":"hidden",b=Math.min(_,b))}var R={height:b,overflowY:S,resize:"none"};return g&&(R.minHeight=g),_&&(R.maxHeight=_),R}var Gfe=["prefixCls","onPressEnter","defaultValue","value","autoSize","onResize","className","style","disabled","onChange","onInternalAutoSize"],Qb=0,Zb=1,eT=2,zfe=y.forwardRef(function(e,t){var i=e,a=i.prefixCls;i.onPressEnter;var c=i.defaultValue,u=i.value,d=i.autoSize,f=i.onResize,m=i.className,g=i.style,_=i.disabled,S=i.onChange;i.onInternalAutoSize;var b=fn(i,Gfe),A=bc(c,{value:u,postState:function(ce){return ce??""}}),R=Pe(A,2),w=R[0],D=R[1],x=function(ce){D(ce.target.value),S==null||S(ce)},O=y.useRef();y.useImperativeHandle(t,function(){return{textArea:O.current}});var P=y.useMemo(function(){return d&&jn(d)==="object"?[d.minRows,d.maxRows]:[]},[d]),M=Pe(P,2),F=M[0],j=M[1],B=!!d,H=function(){try{if(document.activeElement===O.current){var ce=O.current,we=ce.selectionStart,Ie=ce.selectionEnd,$e=ce.scrollTop;O.current.setSelectionRange(we,Ie),O.current.scrollTop=$e}}catch{}},K=y.useState(eT),$=Pe(K,2),Z=$[0],z=$[1],G=y.useState(),ee=Pe(G,2),re=ee[0],oe=ee[1],pe=function(){z(Qb)};Or(function(){B&&pe()},[u,F,j,B]),Or(function(){if(Z===Qb)z(Zb);else if(Z===Zb){var de=Wfe(O.current,!1,F,j);z(eT),oe(de)}else H()},[Z]);var ue=y.useRef(),me=function(){Wi.cancel(ue.current)},fe=function(ce){Z===eT&&(f==null||f(ce),d&&(me(),ue.current=Wi(function(){pe()})))};y.useEffect(function(){return me},[]);var se=B?re:null,ae=Ee(Ee({},g),se);return(Z===Qb||Z===Zb)&&(ae.overflowY="hidden",ae.overflowX="hidden"),y.createElement(zu,{onResize:fe,disabled:!(d||f)},y.createElement("textarea",He({},b,{ref:O,style:ae,className:Ve(a,m,tt({},"".concat(a,"-disabled"),_)),disabled:_,value:w,onChange:x})))}),Kfe=["defaultValue","value","onFocus","onBlur","onChange","allowClear","maxLength","onCompositionStart","onCompositionEnd","suffix","prefixCls","classes","showCount","className","style","disabled","hidden","classNames","styles","onResize"];function g$(e,t){return Qe(e||"").slice(0,t).join("")}function Zj(e,t,i,a){var c=i;return e?c=g$(i,a):Qe(t||"").length<i.length&&Qe(i||"").length>a&&(c=t),c}var Yfe=ut.forwardRef(function(e,t){var i,a=e.defaultValue,c=e.value,u=e.onFocus,d=e.onBlur,f=e.onChange,m=e.allowClear,g=e.maxLength,_=e.onCompositionStart,S=e.onCompositionEnd,b=e.suffix,A=e.prefixCls,R=A===void 0?"rc-textarea":A,w=e.classes,D=e.showCount,x=e.className,O=e.style,P=e.disabled,M=e.hidden,F=e.classNames,j=e.styles,B=e.onResize,H=fn(e,Kfe),K=bc(a,{value:c,defaultValue:a}),$=Pe(K,2),Z=$[0],z=$[1],G=y.useRef(null),ee=ut.useState(!1),re=Pe(ee,2),oe=re[0],pe=re[1],ue=ut.useState(!1),me=Pe(ue,2),fe=me[0],se=me[1],ae=ut.useRef(),de=ut.useRef(0),ce=ut.useState(null),we=Pe(ce,2),Ie=we[0],$e=we[1],ke=function(){G.current.textArea.focus()};y.useImperativeHandle(t,function(){return{resizableTextArea:G.current,focus:ke,blur:function(){G.current.textArea.blur()}}}),y.useEffect(function(){pe(function(bt){return!P&&bt})},[P]);var mt=Number(g)>0,vt=function(Ot){se(!0),ae.current=Z,de.current=Ot.currentTarget.selectionStart,_==null||_(Ot)},st=function(Ot){se(!1);var Mt=Ot.currentTarget.value;if(mt){var Yt,An=de.current>=g+1||de.current===((Yt=ae.current)===null||Yt===void 0?void 0:Yt.length);Mt=Zj(An,ae.current,Mt,g)}Mt!==Z&&(z(Mt),Ff(Ot.currentTarget,Ot,f,Mt)),S==null||S(Ot)},rt=function(Ot){var Mt=Ot.target.value;if(!fe&&mt){var Yt=Ot.target.selectionStart>=g+1||Ot.target.selectionStart===Mt.length||!Ot.target.selectionStart;Mt=Zj(Yt,Z,Mt,g)}z(Mt),Ff(Ot.currentTarget,Ot,f,Mt)},ft=function(Ot){var Mt=H.onPressEnter,Yt=H.onKeyDown;Ot.key==="Enter"&&Mt&&Mt(Ot),Yt==null||Yt(Ot)},Ye=function(Ot){pe(!0),u==null||u(Ot)},St=function(Ot){pe(!1),d==null||d(Ot)},kt=function(Ot){z(""),ke(),Ff(G.current.textArea,Ot,f)},Lt=z1(Z);!fe&&mt&&c==null&&(Lt=g$(Lt,g));var Xe=b,qe;if(D){var Ge=Qe(Lt).length;jn(D)==="object"?qe=D.formatter({value:Lt,count:Ge,maxLength:g}):qe="".concat(Ge).concat(mt?" / ".concat(g):""),Xe=ut.createElement(ut.Fragment,null,Xe,ut.createElement("span",{className:Ve("".concat(R,"-data-count"),F==null?void 0:F.count),style:j==null?void 0:j.count},qe))}var nt=function(Ot){B==null||B(Ot),Ie===null?$e("mounted"):Ie==="mounted"&&$e("resized")},gt=ut.createElement(h$,{value:Lt,allowClear:m,handleReset:kt,suffix:Xe,prefixCls:R,classes:{affixWrapper:Ve(w==null?void 0:w.affixWrapper,(i={},tt(i,"".concat(R,"-show-count"),D),tt(i,"".concat(R,"-textarea-allow-clear"),m),i))},disabled:P,focused:oe,className:x,style:Ee(Ee({},O),Ie==="resized"?{height:"auto"}:{}),dataAttrs:{affixWrapper:{"data-count":typeof qe=="string"?qe:void 0}},hidden:M,inputElement:ut.createElement(zfe,He({},H,{onKeyDown:ft,onChange:rt,onFocus:Ye,onBlur:St,onCompositionStart:vt,onCompositionEnd:st,className:F==null?void 0:F.textarea,style:Ee(Ee({},j==null?void 0:j.textarea),{},{resize:O==null?void 0:O.resize}),disabled:P,prefixCls:R,onResize:nt,ref:G}))});return gt}),qfe=globalThis&&globalThis.__rest||function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(i[a[c]]=e[a[c]]);return i};const Xfe=y.forwardRef((e,t)=>{var{prefixCls:i,bordered:a=!0,size:c,disabled:u,status:d,allowClear:f,showCount:m,classNames:g}=e,_=qfe(e,["prefixCls","bordered","size","disabled","status","allowClear","showCount","classNames"]);const{getPrefixCls:S,direction:b}=y.useContext(Hn),A=Zh(c),R=y.useContext(Rm),w=u??R,{status:D,hasFeedback:x,feedbackIcon:O}=y.useContext(Dc),P=O5(D,d),M=y.useRef(null);y.useImperativeHandle(t,()=>{var K;return{resizableTextArea:(K=M.current)===null||K===void 0?void 0:K.resizableTextArea,focus:$=>{var Z,z;mfe((z=(Z=M.current)===null||Z===void 0?void 0:Z.resizableTextArea)===null||z===void 0?void 0:z.textArea,$)},blur:()=>{var $;return($=M.current)===null||$===void 0?void 0:$.blur()}}});const F=S("input",i);let j;typeof f=="object"&&(f!=null&&f.clearIcon)?j=f:f&&(j={clearIcon:y.createElement(y_,null)});const[B,H]=$w(F);return B(y.createElement(Yfe,Object.assign({},_,{disabled:w,allowClear:j,classes:{affixWrapper:Ve(`${F}-textarea-affix-wrapper`,{[`${F}-affix-wrapper-rtl`]:b==="rtl",[`${F}-affix-wrapper-borderless`]:!a,[`${F}-affix-wrapper-sm`]:A==="small",[`${F}-affix-wrapper-lg`]:A==="large",[`${F}-textarea-show-count`]:m},jf(`${F}-affix-wrapper`,P),H)},classNames:Object.assign(Object.assign({},g),{textarea:Ve({[`${F}-borderless`]:!a,[`${F}-sm`]:A==="small",[`${F}-lg`]:A==="large"},jf(F,P),H,g==null?void 0:g.textarea)}),prefixCls:F,suffix:x&&y.createElement("span",{className:`${F}-textarea-suffix`},O),showCount:m,ref:M})))}),v$=Xfe,Dm=Hw;Dm.Group=lfe;Dm.Search=Vfe;Dm.TextArea=v$;Dm.Password=Ufe;const Jfe=Dm;function TE(e){const[t,i]=y.useState(e);return y.useEffect(()=>{const a=setTimeout(()=>{i(e)},e.length?0:10);return()=>{clearTimeout(a)}},[e]),t}const Qfe=e=>{const{componentCls:t}=e,i=`${t}-show-help`,a=`${t}-show-help-item`;return{[i]:{transition:`opacity ${e.motionDurationSlow} ${e.motionEaseInOut}`,"&-appear, &-enter":{opacity:0,"&-active":{opacity:1}},"&-leave":{opacity:1,"&-active":{opacity:0}},[a]:{overflow:"hidden",transition:`height ${e.motionDurationSlow} ${e.motionEaseInOut},
                     opacity ${e.motionDurationSlow} ${e.motionEaseInOut},
                     transform ${e.motionDurationSlow} ${e.motionEaseInOut} !important`,[`&${a}-appear, &${a}-enter`]:{transform:"translateY(-5px)",opacity:0,"&-active":{transform:"translateY(0)",opacity:1}},[`&${a}-leave-active`]:{transform:"translateY(-5px)"}}}}},Zfe=Qfe,eme=e=>({legend:{display:"block",width:"100%",marginBottom:e.marginLG,padding:0,color:e.colorTextDescription,fontSize:e.fontSizeLG,lineHeight:"inherit",border:0,borderBottom:`${e.lineWidth}px ${e.lineType} ${e.colorBorder}`},label:{fontSize:e.fontSize},'input[type="search"]':{boxSizing:"border-box"},'input[type="radio"], input[type="checkbox"]':{lineHeight:"normal"},'input[type="file"]':{display:"block"},'input[type="range"]':{display:"block",width:"100%"},"select[multiple], select[size]":{height:"auto"},"input[type='file']:focus,\n  input[type='radio']:focus,\n  input[type='checkbox']:focus":{outline:0,boxShadow:`0 0 0 ${e.controlOutlineWidth}px ${e.controlOutline}`},output:{display:"block",paddingTop:15,color:e.colorText,fontSize:e.fontSize,lineHeight:e.lineHeight}}),eF=(e,t)=>{const{formItemCls:i}=e;return{[i]:{[`${i}-label > label`]:{height:t},[`${i}-control-input`]:{minHeight:t}}}},tme=e=>{const{componentCls:t}=e;return{[e.componentCls]:Object.assign(Object.assign(Object.assign({},Ku(e)),eme(e)),{[`${t}-text`]:{display:"inline-block",paddingInlineEnd:e.paddingSM},"&-small":Object.assign({},eF(e,e.controlHeightSM)),"&-large":Object.assign({},eF(e,e.controlHeightLG))})}},nme=e=>{const{formItemCls:t,iconCls:i,componentCls:a,rootPrefixCls:c}=e;return{[t]:Object.assign(Object.assign({},Ku(e)),{marginBottom:e.marginLG,verticalAlign:"top","&-with-help":{transition:"none"},[`&-hidden,
        &-hidden.${c}-row`]:{display:"none"},"&-has-warning":{[`${t}-split`]:{color:e.colorError}},"&-has-error":{[`${t}-split`]:{color:e.colorWarning}},[`${t}-label`]:{display:"inline-block",flexGrow:0,overflow:"hidden",whiteSpace:"nowrap",textAlign:"end",verticalAlign:"middle","&-left":{textAlign:"start"},"&-wrap":{overflow:"unset",lineHeight:`${e.lineHeight} - 0.25em`,whiteSpace:"unset"},"> label":{position:"relative",display:"inline-flex",alignItems:"center",maxWidth:"100%",height:e.controlHeight,color:e.colorTextHeading,fontSize:e.fontSize,[`> ${i}`]:{fontSize:e.fontSize,verticalAlign:"top"},[`&${t}-required:not(${t}-required-mark-optional)::before`]:{display:"inline-block",marginInlineEnd:e.marginXXS,color:e.colorError,fontSize:e.fontSize,fontFamily:"SimSun, sans-serif",lineHeight:1,content:'"*"',[`${a}-hide-required-mark &`]:{display:"none"}},[`${t}-optional`]:{display:"inline-block",marginInlineStart:e.marginXXS,color:e.colorTextDescription,[`${a}-hide-required-mark &`]:{display:"none"}},[`${t}-tooltip`]:{color:e.colorTextDescription,cursor:"help",writingMode:"horizontal-tb",marginInlineStart:e.marginXXS},"&::after":{content:'":"',position:"relative",marginBlock:0,marginInlineStart:e.marginXXS/2,marginInlineEnd:e.marginXS},[`&${t}-no-colon::after`]:{content:'" "'}}},[`${t}-control`]:{display:"flex",flexDirection:"column",flexGrow:1,[`&:first-child:not([class^="'${c}-col-'"]):not([class*="' ${c}-col-'"])`]:{width:"100%"},"&-input":{position:"relative",display:"flex",alignItems:"center",minHeight:e.controlHeight,"&-content":{flex:"auto",maxWidth:"100%"}}},[t]:{"&-explain, &-extra":{clear:"both",color:e.colorTextDescription,fontSize:e.fontSize,lineHeight:e.lineHeight},"&-explain-connected":{width:"100%"},"&-extra":{minHeight:e.controlHeightSM,transition:`color ${e.motionDurationMid} ${e.motionEaseOut}`},"&-explain":{"&-error":{color:e.colorError},"&-warning":{color:e.colorWarning}}},[`&-with-help ${t}-explain`]:{height:"auto",opacity:1},[`${t}-feedback-icon`]:{fontSize:e.fontSize,textAlign:"center",visibility:"visible",animationName:Pw,animationDuration:e.motionDurationMid,animationTimingFunction:e.motionEaseOutBack,pointerEvents:"none","&-success":{color:e.colorSuccess},"&-error":{color:e.colorError},"&-warning":{color:e.colorWarning},"&-validating":{color:e.colorPrimary}}})}},rme=e=>{const{componentCls:t,formItemCls:i,rootPrefixCls:a}=e;return{[`${t}-horizontal`]:{[`${i}-label`]:{flexGrow:0},[`${i}-control`]:{flex:"1 1 0",minWidth:0},[`${i}-label.${a}-col-24 + ${i}-control`]:{minWidth:"unset"}}}},ime=e=>{const{componentCls:t,formItemCls:i}=e;return{[`${t}-inline`]:{display:"flex",flexWrap:"wrap",[i]:{flex:"none",marginInlineEnd:e.margin,marginBottom:0,"&-row":{flexWrap:"nowrap"},"&-with-help":{marginBottom:e.marginLG},[`> ${i}-label,
        > ${i}-control`]:{display:"inline-block",verticalAlign:"top"},[`> ${i}-label`]:{flex:"none"},[`${t}-text`]:{display:"inline-block"},[`${i}-has-feedback`]:{display:"inline-block"}}}}},ah=e=>({padding:`0 0 ${e.paddingXS}px`,whiteSpace:"initial",textAlign:"start","> label":{margin:0,"&::after":{display:"none"}}}),ome=e=>{const{componentCls:t,formItemCls:i}=e;return{[`${i} ${i}-label`]:ah(e),[t]:{[i]:{flexWrap:"wrap",[`${i}-label,
          ${i}-control`]:{flex:"0 0 100%",maxWidth:"100%"}}}}},ame=e=>{const{componentCls:t,formItemCls:i,rootPrefixCls:a}=e;return{[`${t}-vertical`]:{[i]:{"&-row":{flexDirection:"column"},"&-label > label":{height:"auto"},[`${t}-item-control`]:{width:"100%"}}},[`${t}-vertical ${i}-label,
      .${a}-col-24${i}-label,
      .${a}-col-xl-24${i}-label`]:ah(e),[`@media (max-width: ${e.screenXSMax}px)`]:[ome(e),{[t]:{[`.${a}-col-xs-24${i}-label`]:ah(e)}}],[`@media (max-width: ${e.screenSMMax}px)`]:{[t]:{[`.${a}-col-sm-24${i}-label`]:ah(e)}},[`@media (max-width: ${e.screenMDMax}px)`]:{[t]:{[`.${a}-col-md-24${i}-label`]:ah(e)}},[`@media (max-width: ${e.screenLGMax}px)`]:{[t]:{[`.${a}-col-lg-24${i}-label`]:ah(e)}}}},Ww=ws("Form",(e,t)=>{let{rootPrefixCls:i}=t;const a=Ki(e,{formItemCls:`${e.componentCls}-item`,rootPrefixCls:i});return[tme(a),nme(a),Zfe(a),rme(a),ime(a),ame(a),E5(a),Pw]}),tF=[];function tT(e,t,i){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;return{key:typeof e=="string"?e:`${t}-${a}`,error:e,errorStatus:i}}function E$(e){let{help:t,helpStatus:i,errors:a=tF,warnings:c=tF,className:u,fieldId:d,onVisibleChanged:f}=e;const{prefixCls:m}=y.useContext(xw),g=`${m}-item-explain`,[,_]=Ww(m),S=y.useMemo(()=>T1(m),[m]),b=TE(a),A=TE(c),R=y.useMemo(()=>t!=null?[tT(t,"help",i)]:[].concat(Qe(b.map((D,x)=>tT(D,"error","error",x))),Qe(A.map((D,x)=>tT(D,"warning","warning",x)))),[t,i,b,A]),w={};return d&&(w.id=`${d}_help`),y.createElement(Yu,{motionDeadline:S.motionDeadline,motionName:`${m}-show-help`,visible:!!R.length,onVisibleChanged:f},D=>{const{className:x,style:O}=D;return y.createElement("div",Object.assign({},w,{className:Ve(g,x,u,_),style:O,role:"alert"}),y.createElement(i6,Object.assign({keys:R},T1(m),{motionName:`${m}-show-help-item`,component:!1}),P=>{const{key:M,error:F,errorStatus:j,className:B,style:H}=P;return y.createElement("div",{key:M,className:Ve(B,{[`${g}-${j}`]:j}),style:H},F)}))})}const sme=["parentNode"],cme="form_item";function Vf(e){return e===void 0||e===!1?[]:Array.isArray(e)?e:[e]}function _$(e,t){if(!e.length)return;const i=e.join("_");return t?`${t}_${i}`:sme.includes(i)?`${cme}_${i}`:i}function nF(e){return Vf(e).join("_")}function y$(e){const[t]=Nw(),i=y.useRef({}),a=y.useMemo(()=>e??Object.assign(Object.assign({},t),{__INTERNAL__:{itemRef:c=>u=>{const d=nF(c);u?i.current[d]=u:delete i.current[d]}},scrollToField:function(c){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const d=Vf(c),f=_$(d,a.__INTERNAL__.name),m=f?document.getElementById(f):null;m&&Ose(m,Object.assign({scrollMode:"if-needed",block:"nearest"},u))},getFieldInstance:c=>{const u=nF(c);return i.current[u]}}),[e,t]);return[a]}var lme=globalThis&&globalThis.__rest||function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(i[a[c]]=e[a[c]]);return i};const ume=(e,t)=>{const i=y.useContext(Rm),{getPrefixCls:a,direction:c,form:u}=y.useContext(Hn),{prefixCls:d,className:f,rootClassName:m,size:g,disabled:_=i,form:S,colon:b,labelAlign:A,labelWrap:R,labelCol:w,wrapperCol:D,hideRequiredMark:x,layout:O="horizontal",scrollToFirstError:P,requiredMark:M,onFinishFailed:F,name:j}=e,B=lme(e,["prefixCls","className","rootClassName","size","disabled","form","colon","labelAlign","labelWrap","labelCol","wrapperCol","hideRequiredMark","layout","scrollToFirstError","requiredMark","onFinishFailed","name"]),H=Zh(g),K=y.useContext(NB),$=y.useMemo(()=>M!==void 0?M:u&&u.requiredMark!==void 0?u.requiredMark:!x,[x,M,u]),Z=b??(u==null?void 0:u.colon),z=a("form",d),[G,ee]=Ww(z),re=Ve(z,{[`${z}-${O}`]:!0,[`${z}-hide-required-mark`]:$===!1,[`${z}-rtl`]:c==="rtl",[`${z}-${H}`]:H},ee,f,m),[oe]=y$(S),{__INTERNAL__:pe}=oe;pe.name=j;const ue=y.useMemo(()=>({name:j,labelAlign:A,labelCol:w,labelWrap:R,wrapperCol:D,vertical:O==="vertical",colon:Z,requiredMark:$,itemRef:pe.itemRef,form:oe}),[j,A,w,D,O,Z,$,oe]);y.useImperativeHandle(t,()=>oe);const me=(se,ae)=>{if(se){let de={block:"nearest"};typeof se=="object"&&(de=se),oe.scrollToField(ae,de)}},fe=se=>{if(F==null||F(se),se.errorFields.length){const ae=se.errorFields[0].name;if(P!==void 0){me(P,ae);return}u&&u.scrollToFirstError!==void 0&&me(u.scrollToFirstError,ae)}};return G(y.createElement(GB,{disabled:_},y.createElement(KB,{size:H},y.createElement(m5,{validateMessages:K},y.createElement(Fl.Provider,{value:ue},y.createElement(np,Object.assign({id:j},B,{name:j,onFinishFailed:fe,form:oe,className:re})))))))},dme=y.forwardRef(ume),hme=dme,S$=()=>{const{status:e,errors:t=[],warnings:i=[]}=y.useContext(Dc);return{status:e,errors:t,warnings:i}};S$.Context=Dc;const pme=S$;function fme(e){const[t,i]=y.useState(e),a=y.useRef(null),c=y.useRef([]),u=y.useRef(!1);y.useEffect(()=>(u.current=!1,()=>{u.current=!0,Wi.cancel(a.current),a.current=null}),[]);function d(f){u.current||(a.current===null&&(c.current=[],a.current=Wi(()=>{a.current=null,i(m=>{let g=m;return c.current.forEach(_=>{g=_(g)}),g})})),c.current.push(f))}return[t,d]}function mme(){const{itemRef:e}=y.useContext(Fl),t=y.useRef({});function i(a,c){const u=c&&typeof c=="object"&&c.ref,d=a.join("_");return(t.current.name!==d||t.current.originRef!==u)&&(t.current.name=d,t.current.originRef=u,t.current.ref=Is(e(a),u)),t.current.ref}return i}const gme=e=>{const{prefixCls:t,status:i,wrapperCol:a,children:c,errors:u,warnings:d,_internalItemRender:f,extra:m,help:g,fieldId:_,marginBottom:S,onErrorVisibleChanged:b}=e,A=`${t}-item`,R=y.useContext(Fl),w=a||R.wrapperCol||{},D=Ve(`${A}-control`,w.className),x=y.useMemo(()=>Object.assign({},R),[R]);delete x.labelCol,delete x.wrapperCol;const O=y.createElement("div",{className:`${A}-control-input`},y.createElement("div",{className:`${A}-control-input-content`},c)),P=y.useMemo(()=>({prefixCls:t,status:i}),[t,i]),M=S!==null||u.length||d.length?y.createElement("div",{style:{display:"flex",flexWrap:"nowrap"}},y.createElement(xw.Provider,{value:P},y.createElement(E$,{fieldId:_,errors:u,warnings:d,help:g,helpStatus:i,className:`${A}-explain-connected`,onVisibleChanged:b})),!!S&&y.createElement("div",{style:{width:0,height:S}})):null,F={};_&&(F.id=`${_}_extra`);const j=m?y.createElement("div",Object.assign({},F,{className:`${A}-extra`}),m):null,B=f&&f.mark==="pro_table_render"&&f.render?f.render(e,{input:O,errorList:M,extra:j}):y.createElement(y.Fragment,null,O,M,j);return y.createElement(Fl.Provider,{value:x},y.createElement(d$,Object.assign({},w,{className:D}),B))},vme=gme;var C$={};Object.defineProperty(C$,"__esModule",{value:!0});var Eme={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M623.6 316.7C593.6 290.4 554 276 512 276s-81.6 14.5-111.6 40.7C369.2 344 352 380.7 352 420v7.6c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V420c0-44.1 43.1-80 96-80s96 35.9 96 80c0 31.1-22 59.6-56.1 72.7-21.2 8.1-39.2 22.3-52.1 40.9-13.1 19-19.9 41.8-19.9 64.9V620c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-22.7a48.3 48.3 0 0130.9-44.8c59-22.7 97.1-74.7 97.1-132.5.1-39.3-17.1-76-48.3-103.3zM472 732a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"question-circle",theme:"outlined"},_me=C$.default=Eme;function yme(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Sme(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{},a=Object.keys(i);typeof Object.getOwnPropertySymbols=="function"&&(a=a.concat(Object.getOwnPropertySymbols(i).filter(function(c){return Object.getOwnPropertyDescriptor(i,c).enumerable}))),a.forEach(function(c){yme(e,c,i[c])})}return e}function Cme(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),i.push.apply(i,a)}return i}function bme(e,t){return t=t??{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Cme(Object(t)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))}),e}var Tme=function(e,t){return y.createElement(xi,bme(Sme({},e),{ref:t,icon:_me}))};const Rme=y.forwardRef(Tme);var Ime=globalThis&&globalThis.__rest||function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(i[a[c]]=e[a[c]]);return i};function wme(e){return e?typeof e=="object"&&!y.isValidElement(e)?e:{title:e}:null}const Ome=e=>{let{prefixCls:t,label:i,htmlFor:a,labelCol:c,labelAlign:u,colon:d,required:f,requiredMark:m,tooltip:g}=e;var _;const[S]=PB("Form"),{vertical:b,labelAlign:A,labelCol:R,labelWrap:w,colon:D}=y.useContext(Fl);if(!i)return null;const x=c||R||{},O=u||A,P=`${t}-item-label`,M=Ve(P,O==="left"&&`${P}-left`,x.className,{[`${P}-wrap`]:!!w});let F=i;const j=d===!0||D!==!1&&d!==!1;j&&!b&&typeof i=="string"&&i.trim()!==""&&(F=i.replace(/[:|ï¼]\s*$/,""));const H=wme(g);if(H){const{icon:$=y.createElement(Rme,null)}=H,Z=Ime(H,["icon"]),z=y.createElement(pm,Object.assign({},Z),y.cloneElement($,{className:`${t}-item-tooltip`,title:""}));F=y.createElement(y.Fragment,null,F,z)}m==="optional"&&!f&&(F=y.createElement(y.Fragment,null,F,y.createElement("span",{className:`${t}-item-optional`,title:""},(S==null?void 0:S.optional)||((_=Bh.Form)===null||_===void 0?void 0:_.optional))));const K=Ve({[`${t}-item-required`]:f,[`${t}-item-required-mark-optional`]:m==="optional",[`${t}-item-no-colon`]:!j});return y.createElement(d$,Object.assign({},x,{className:M}),y.createElement("label",{htmlFor:a,className:K,title:typeof i=="string"?i:""},F))},Ame=Ome;var Nme=globalThis&&globalThis.__rest||function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(i[a[c]]=e[a[c]]);return i};const xme={success:B6,warning:G6,error:y_,validating:X6};function Pme(e){const{prefixCls:t,className:i,rootClassName:a,style:c,help:u,errors:d,warnings:f,validateStatus:m,meta:g,hasFeedback:_,hidden:S,children:b,fieldId:A,required:R,isRequired:w,onSubItemMetaChange:D}=e,x=Nme(e,["prefixCls","className","rootClassName","style","help","errors","warnings","validateStatus","meta","hasFeedback","hidden","children","fieldId","required","isRequired","onSubItemMetaChange"]),O=`${t}-item`,{requiredMark:P}=y.useContext(Fl),M=y.useRef(null),F=TE(d),j=TE(f),B=u!=null,H=!!(B||d.length||f.length),K=!!M.current&&C_(M.current),[$,Z]=y.useState(null);Or(()=>{if(H&&M.current){const pe=getComputedStyle(M.current);Z(parseInt(pe.marginBottom,10))}},[H,K]);const z=pe=>{pe||Z(null)},ee=function(){let pe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,ue="";const me=pe?F:g.errors,fe=pe?j:g.warnings;return m!==void 0?ue=m:g.validating?ue="validating":me.length?ue="error":fe.length?ue="warning":(g.touched||_&&g.validated)&&(ue="success"),ue}(),re=y.useMemo(()=>{let pe;if(_){const ue=ee&&xme[ee];pe=ue?y.createElement("span",{className:Ve(`${O}-feedback-icon`,`${O}-feedback-icon-${ee}`)},y.createElement(ue,null)):null}return{status:ee,errors:d,warnings:f,hasFeedback:_,feedbackIcon:pe,isFormItemInput:!0}},[ee,_]),oe=Ve(O,i,a,{[`${O}-with-help`]:B||F.length||j.length,[`${O}-has-feedback`]:ee&&_,[`${O}-has-success`]:ee==="success",[`${O}-has-warning`]:ee==="warning",[`${O}-has-error`]:ee==="error",[`${O}-is-validating`]:ee==="validating",[`${O}-hidden`]:S});return y.createElement("div",{className:oe,style:c,ref:M},y.createElement(sfe,Object.assign({className:`${O}-row`},Yo(x,["_internalItemRender","colon","dependencies","extra","fieldKey","getValueFromEvent","getValueProps","htmlFor","id","initialValue","isListField","label","labelAlign","labelCol","labelWrap","messageVariables","name","normalize","noStyle","preserve","requiredMark","rules","shouldUpdate","trigger","tooltip","validateFirst","validateTrigger","valuePropName","wrapperCol"])),y.createElement(Ame,Object.assign({htmlFor:A},e,{requiredMark:P,required:R??w,prefixCls:t})),y.createElement(vme,Object.assign({},e,g,{errors:F,warnings:j,prefixCls:t,status:ee,help:u,marginBottom:$,onErrorVisibleChanged:z}),y.createElement(f5.Provider,{value:D},y.createElement(Dc.Provider,{value:re},b)))),!!$&&y.createElement("div",{className:`${O}-margin-offset`,style:{marginBottom:-$}}))}function Dme(e){if(typeof e=="function")return e;const t=Nc(e);return t.length<=1?t[0]:t}const kme="__SPLIT__",Lme=y.memo(e=>{let{children:t}=e;return t},(e,t)=>e.value===t.value&&e.update===t.update&&e.childProps.length===t.childProps.length&&e.childProps.every((i,a)=>i===t.childProps[a]));function Mme(e){return e!=null}function rF(){return{errors:[],warnings:[],touched:!1,validating:!1,name:[],validated:!1}}function Ume(e){const{name:t,noStyle:i,className:a,dependencies:c,prefixCls:u,shouldUpdate:d,rules:f,children:m,required:g,label:_,messageVariables:S,trigger:b="onChange",validateTrigger:A,hidden:R,help:w}=e,{getPrefixCls:D}=y.useContext(Hn),{name:x}=y.useContext(Fl),O=Dme(m),P=typeof O=="function",M=y.useContext(f5),{validateTrigger:F}=y.useContext($u),j=A!==void 0?A:F,B=Mme(t),H=D("form",u),[K,$]=Ww(H),Z=y.useContext(lm),z=y.useRef(),[G,ee]=fme({}),[re,oe]=Mu(()=>rF()),pe=ce=>{const we=Z==null?void 0:Z.getKey(ce.name);if(oe(ce.destroy?rF():ce,!0),i&&w!==!1&&M){let Ie=ce.name;if(ce.destroy)Ie=z.current||Ie;else if(we!==void 0){const[$e,ke]=we;Ie=[$e].concat(Qe(ke)),z.current=Ie}M(ce,Ie)}},ue=(ce,we)=>{ee(Ie=>{const $e=Object.assign({},Ie),mt=[].concat(Qe(ce.name.slice(0,-1)),Qe(we)).join(kme);return ce.destroy?delete $e[mt]:$e[mt]=ce,$e})},[me,fe]=y.useMemo(()=>{const ce=Qe(re.errors),we=Qe(re.warnings);return Object.values(G).forEach(Ie=>{ce.push.apply(ce,Qe(Ie.errors||[])),we.push.apply(we,Qe(Ie.warnings||[]))}),[ce,we]},[G,re.errors,re.warnings]),se=mme();function ae(ce,we,Ie){return i&&!R?ce:y.createElement(Pme,Object.assign({key:"row"},e,{className:Ve(a,$),prefixCls:H,fieldId:we,isRequired:Ie,errors:me,warnings:fe,meta:re,onSubItemMetaChange:ue}),ce)}if(!B&&!P&&!c)return K(ae(O));let de={};return typeof _=="string"?de.label=_:t&&(de.label=String(t)),S&&(de=Object.assign(Object.assign({},de),S)),K(y.createElement(Aw,Object.assign({},e,{messageVariables:de,trigger:b,validateTrigger:j,onMetaChange:pe}),(ce,we,Ie)=>{const $e=Vf(t).length&&we?we.name:[],ke=_$($e,x),mt=g!==void 0?g:!!(f&&f.some(rt=>{if(rt&&typeof rt=="object"&&rt.required&&!rt.warningOnly)return!0;if(typeof rt=="function"){const ft=rt(Ie);return ft&&ft.required&&!ft.warningOnly}return!1})),vt=Object.assign({},ce);let st=null;if(Array.isArray(O)&&B)st=O;else if(!(P&&(!(d||c)||B))){if(!(c&&!P&&!B))if(jl(O)){const rt=Object.assign(Object.assign({},O.props),vt);if(rt.id||(rt.id=ke),w||me.length>0||fe.length>0||e.extra){const St=[];(w||me.length>0)&&St.push(`${ke}_help`),e.extra&&St.push(`${ke}_extra`),rt["aria-describedby"]=St.join(" ")}me.length>0&&(rt["aria-invalid"]="true"),mt&&(rt["aria-required"]="true"),Xh(O)&&(rt.ref=se($e,O)),new Set([].concat(Qe(Vf(b)),Qe(Vf(j)))).forEach(St=>{rt[St]=function(){for(var kt,Lt,Xe,qe,Ge,nt=arguments.length,gt=new Array(nt),bt=0;bt<nt;bt++)gt[bt]=arguments[bt];(Xe=vt[St])===null||Xe===void 0||(kt=Xe).call.apply(kt,[vt].concat(gt)),(Ge=(qe=O.props)[St])===null||Ge===void 0||(Lt=Ge).call.apply(Lt,[qe].concat(gt))}});const Ye=[rt["aria-required"],rt["aria-invalid"],rt["aria-describedby"]];st=y.createElement(Lme,{value:vt[e.valuePropName||"value"],update:O,childProps:Ye},bs(O,rt))}else P&&(d||c)&&!B?st=O(Ie):st=O}return ae(st,ke,mt)}))}const b$=Ume;b$.useStatus=pme;const jme=b$;var Fme=globalThis&&globalThis.__rest||function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(i[a[c]]=e[a[c]]);return i};const Vme=e=>{var{prefixCls:t,children:i}=e,a=Fme(e,["prefixCls","children"]);const{getPrefixCls:c}=y.useContext(Hn),u=c("form",t),d=y.useMemo(()=>({prefixCls:u,status:"error"}),[u]);return y.createElement(u5,Object.assign({},a),(f,m,g)=>y.createElement(xw.Provider,{value:d},i(f.map(_=>Object.assign(Object.assign({},_),{fieldKey:_.key})),m,{errors:g.errors,warnings:g.warnings})))},Bme=Vme;function $me(){const{form:e}=y.useContext(Fl);return e}const Uc=hme;Uc.Item=jme;Uc.List=Bme;Uc.ErrorList=E$;Uc.useForm=y$;Uc.useFormInstance=$me;Uc.useWatch=p5;Uc.Provider=m5;Uc.create=()=>{};const iF=Uc,km=vpe;km.Header=fpe;km.Footer=mpe;km.Content=gpe;km.Sider=Spe;const K1=km;let fs=null,Av=e=>e(),RE=[],IE={};function Hme(){const{prefixCls:e,getContainer:t,rtl:i,maxCount:a,top:c,bottom:u}=IE,d=e??s6().getPrefixCls("notification"),f=(t==null?void 0:t())||document.body;return{prefixCls:d,container:f,rtl:i,maxCount:a,top:c,bottom:u}}const Wme=y.forwardRef((e,t)=>{const[i,a]=y.useState(),[c,u]=y.useState(),[d,f]=y.useState(),[m,g]=y.useState(),[_,S]=y.useState(),[b,A]=y.useState(),[R,w]=C5({prefixCls:i,getContainer:()=>c,maxCount:d,rtl:m,top:_,bottom:b}),D=s6(),x=D.getRootPrefixCls(),O=D.getIconPrefixCls(),P=D.getTheme(),M=()=>{const{prefixCls:F,container:j,maxCount:B,rtl:H,top:K,bottom:$}=Hme();a(F),u(j),f(B),g(H),S(K),A($)};return y.useEffect(M,[]),y.useImperativeHandle(t,()=>{const F=Object.assign({},R);return Object.keys(F).forEach(j=>{F[j]=function(){return M(),R[j].apply(R,arguments)}}),{instance:F,sync:M}}),y.createElement(ep,{prefixCls:x,iconPrefixCls:O,theme:P},w)});function Gw(){if(!fs){const e=document.createDocumentFragment(),t={fragment:e};fs=t,Av(()=>{J6(y.createElement(Wme,{ref:i=>{const{instance:a,sync:c}=i||{};Promise.resolve().then(()=>{!t.instance&&a&&(t.instance=a,t.sync=c,Gw())})}}),e)});return}fs.instance&&(RE.forEach(e=>{switch(e.type){case"open":{Av(()=>{fs.instance.open(Object.assign(Object.assign({},IE),e.config))});break}case"destroy":Av(()=>{fs==null||fs.instance.destroy(e.key)});break}}),RE=[])}function Gme(e){IE=Object.assign(Object.assign({},IE),e),Av(()=>{var t;(t=fs==null?void 0:fs.sync)===null||t===void 0||t.call(fs)})}function T$(e){RE.push({type:"open",config:e}),Gw()}function zme(e){RE.push({type:"destroy",key:e}),Gw()}const Kme=["success","info","warning","error"],Yme={open:T$,destroy:zme,config:Gme,useNotification:Tue,_InternalPanelDoNotUseOrYouWillBeFired:Eue},R$=Yme;Kme.forEach(e=>{R$[e]=t=>T$(Object.assign(Object.assign({},t),{type:e}))});const qme=R$;var I$={};Object.defineProperty(I$,"__esModule",{value:!0});var Xme={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"}}]},name:"copy",theme:"outlined"},Jme=I$.default=Xme;function Qme(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Zme(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{},a=Object.keys(i);typeof Object.getOwnPropertySymbols=="function"&&(a=a.concat(Object.getOwnPropertySymbols(i).filter(function(c){return Object.getOwnPropertyDescriptor(i,c).enumerable}))),a.forEach(function(c){Qme(e,c,i[c])})}return e}function e0e(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),i.push.apply(i,a)}return i}function t0e(e,t){return t=t??{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):e0e(Object(t)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))}),e}var n0e=function(e,t){return y.createElement(xi,t0e(Zme({},e),{ref:t,icon:Jme}))};const r0e=y.forwardRef(n0e);var w$={};Object.defineProperty(w$,"__esModule",{value:!0});var i0e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"},o0e=w$.default=i0e;function a0e(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function s0e(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{},a=Object.keys(i);typeof Object.getOwnPropertySymbols=="function"&&(a=a.concat(Object.getOwnPropertySymbols(i).filter(function(c){return Object.getOwnPropertyDescriptor(i,c).enumerable}))),a.forEach(function(c){a0e(e,c,i[c])})}return e}function c0e(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),i.push.apply(i,a)}return i}function l0e(e,t){return t=t??{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):c0e(Object(t)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))}),e}var u0e=function(e,t){return y.createElement(xi,l0e(s0e({},e),{ref:t,icon:o0e}))};const d0e=y.forwardRef(u0e);var O$={};Object.defineProperty(O$,"__esModule",{value:!0});var h0e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 170h-60c-4.4 0-8 3.6-8 8v518H310v-73c0-6.7-7.8-10.5-13-6.3l-141.9 112a8 8 0 000 12.6l141.9 112c5.3 4.2 13 .4 13-6.3v-75h498c35.3 0 64-28.7 64-64V178c0-4.4-3.6-8-8-8z"}}]},name:"enter",theme:"outlined"},p0e=O$.default=h0e;function f0e(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function m0e(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{},a=Object.keys(i);typeof Object.getOwnPropertySymbols=="function"&&(a=a.concat(Object.getOwnPropertySymbols(i).filter(function(c){return Object.getOwnPropertyDescriptor(i,c).enumerable}))),a.forEach(function(c){f0e(e,c,i[c])})}return e}function g0e(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),i.push.apply(i,a)}return i}function v0e(e,t){return t=t??{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):g0e(Object(t)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))}),e}var E0e=function(e,t){return y.createElement(xi,v0e(m0e({},e),{ref:t,icon:p0e}))};const _0e=y.forwardRef(E0e);var y0e=globalThis&&globalThis.__rest||function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(i[a[c]]=e[a[c]]);return i};const S0e={border:0,background:"transparent",padding:0,lineHeight:"inherit",display:"inline-block"},C0e=y.forwardRef((e,t)=>{const i=g=>{const{keyCode:_}=g;_===pt.ENTER&&g.preventDefault()},a=g=>{const{keyCode:_}=g,{onClick:S}=e;_===pt.ENTER&&S&&S()},{style:c,noStyle:u,disabled:d}=e,f=y0e(e,["style","noStyle","disabled"]);let m={};return u||(m=Object.assign({},S0e)),d&&(m.pointerEvents="none"),m=Object.assign(Object.assign({},m),c),y.createElement("div",Object.assign({role:"button",tabIndex:0,ref:t},f,{onKeyDown:i,onKeyUp:a,style:m}))}),oF=C0e;var b0e=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,i=[],a=0;a<e.rangeCount;a++)i.push(e.getRangeAt(a));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null;break}return e.removeAllRanges(),function(){e.type==="Caret"&&e.removeAllRanges(),e.rangeCount||i.forEach(function(c){e.addRange(c)}),t&&t.focus()}},T0e=b0e,aF={"text/plain":"Text","text/html":"Url",default:"Text"},R0e="Copy to clipboard: #{key}, Enter";function I0e(e){var t=(/mac os x/i.test(navigator.userAgent)?"â":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}function w0e(e,t){var i,a,c,u,d,f,m=!1;t||(t={}),i=t.debug||!1;try{c=T0e(),u=document.createRange(),d=document.getSelection(),f=document.createElement("span"),f.textContent=e,f.ariaHidden="true",f.style.all="unset",f.style.position="fixed",f.style.top=0,f.style.clip="rect(0, 0, 0, 0)",f.style.whiteSpace="pre",f.style.webkitUserSelect="text",f.style.MozUserSelect="text",f.style.msUserSelect="text",f.style.userSelect="text",f.addEventListener("copy",function(_){if(_.stopPropagation(),t.format)if(_.preventDefault(),typeof _.clipboardData>"u"){i&&console.warn("unable to use e.clipboardData"),i&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var S=aF[t.format]||aF.default;window.clipboardData.setData(S,e)}else _.clipboardData.clearData(),_.clipboardData.setData(t.format,e);t.onCopy&&(_.preventDefault(),t.onCopy(_.clipboardData))}),document.body.appendChild(f),u.selectNodeContents(f),d.addRange(u);var g=document.execCommand("copy");if(!g)throw new Error("copy command was unsuccessful");m=!0}catch(_){i&&console.error("unable to copy using execCommand: ",_),i&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),m=!0}catch(S){i&&console.error("unable to copy using clipboardData: ",S),i&&console.error("falling back to prompt"),a=I0e("message"in t?t.message:R0e),window.prompt(a,e)}}finally{d&&(typeof d.removeRange=="function"?d.removeRange(u):d.removeAllRanges()),f&&document.body.removeChild(f),c()}return m}var O0e=w0e;const A0e=Lc(O0e),N0e=(e,t,i,a)=>{const{titleMarginBottom:c,fontWeightStrong:u}=a;return{marginBottom:c,color:i,fontWeight:u,fontSize:e,lineHeight:t}},x0e=e=>{const t=[1,2,3,4,5],i={};return t.forEach(a=>{i[`
      h${a}&,
      div&-h${a},
      div&-h${a} > textarea,
      h${a}
    `]=N0e(e[`fontSizeHeading${a}`],e[`lineHeightHeading${a}`],e.colorTextHeading,e)}),i},P0e=e=>{const{componentCls:t}=e;return{"a&, a":Object.assign(Object.assign({},VB(e)),{textDecoration:e.linkDecoration,"&:active, &:hover":{textDecoration:e.linkHoverDecoration},[`&[disabled], &${t}-disabled`]:{color:e.colorTextDisabled,cursor:"not-allowed","&:active, &:hover":{color:e.colorTextDisabled},"&:active":{pointerEvents:"none"}}})}},D0e=e=>({code:{margin:"0 0.2em",paddingInline:"0.4em",paddingBlock:"0.2em 0.1em",fontSize:"85%",fontFamily:e.fontFamilyCode,background:"rgba(150, 150, 150, 0.1)",border:"1px solid rgba(100, 100, 100, 0.2)",borderRadius:3},kbd:{margin:"0 0.2em",paddingInline:"0.4em",paddingBlock:"0.15em 0.1em",fontSize:"90%",fontFamily:e.fontFamilyCode,background:"rgba(150, 150, 150, 0.06)",border:"1px solid rgba(100, 100, 100, 0.2)",borderBottomWidth:2,borderRadius:3},mark:{padding:0,backgroundColor:eie[2]},"u, ins":{textDecoration:"underline",textDecorationSkipInk:"auto"},"s, del":{textDecoration:"line-through"},strong:{fontWeight:600},"ul, ol":{marginInline:0,marginBlock:"0 1em",padding:0,li:{marginInline:"20px 0",marginBlock:0,paddingInline:"4px 0",paddingBlock:0}},ul:{listStyleType:"circle",ul:{listStyleType:"disc"}},ol:{listStyleType:"decimal"},"pre, blockquote":{margin:"1em 0"},pre:{padding:"0.4em 0.6em",whiteSpace:"pre-wrap",wordWrap:"break-word",background:"rgba(150, 150, 150, 0.1)",border:"1px solid rgba(100, 100, 100, 0.2)",borderRadius:3,fontFamily:e.fontFamilyCode,code:{display:"inline",margin:0,padding:0,fontSize:"inherit",fontFamily:"inherit",background:"transparent",border:0}},blockquote:{paddingInline:"0.6em 0",paddingBlock:0,borderInlineStart:"4px solid rgba(100, 100, 100, 0.2)",opacity:.85}}),k0e=e=>{const{componentCls:t}=e,a=l$(e).inputPaddingVertical+1;return{"&-edit-content":{position:"relative","div&":{insetInlineStart:-e.paddingSM,marginTop:-a,marginBottom:`calc(1em - ${a}px)`},[`${t}-edit-content-confirm`]:{position:"absolute",insetInlineEnd:e.marginXS+2,insetBlockEnd:e.marginXS,color:e.colorTextDescription,fontWeight:"normal",fontSize:e.fontSize,fontStyle:"normal",pointerEvents:"none"},textarea:{margin:"0!important",MozTransition:"none",height:"1em"}}}},L0e=e=>({"&-copy-success":{"\n    &,\n    &:hover,\n    &:focus":{color:e.colorSuccess}}}),M0e=()=>({"\n  a&-ellipsis,\n  span&-ellipsis\n  ":{display:"inline-block",maxWidth:"100%"},"&-single-line":{whiteSpace:"nowrap"},"&-ellipsis-single-line":{overflow:"hidden",textOverflow:"ellipsis","a&, span&":{verticalAlign:"bottom"}},"&-ellipsis-multiple-line":{display:"-webkit-box",overflow:"hidden",WebkitLineClamp:3,WebkitBoxOrient:"vertical"}}),U0e=e=>{const{componentCls:t,titleMarginTop:i}=e;return{[t]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:e.colorText,wordBreak:"break-word",lineHeight:e.lineHeight,[`&${t}-secondary`]:{color:e.colorTextDescription},[`&${t}-success`]:{color:e.colorSuccess},[`&${t}-warning`]:{color:e.colorWarning},[`&${t}-danger`]:{color:e.colorError,"a&:active, a&:focus":{color:e.colorErrorActive},"a&:hover":{color:e.colorErrorHover}},[`&${t}-disabled`]:{color:e.colorTextDisabled,cursor:"not-allowed",userSelect:"none"},"\n        div&,\n        p\n      ":{marginBottom:"1em"}},x0e(e)),{[`
      & + h1${t},
      & + h2${t},
      & + h3${t},
      & + h4${t},
      & + h5${t}
      `]:{marginTop:i},"\n      div,\n      ul,\n      li,\n      p,\n      h1,\n      h2,\n      h3,\n      h4,\n      h5":{"\n        + h1,\n        + h2,\n        + h3,\n        + h4,\n        + h5\n        ":{marginTop:i}}}),D0e(e)),P0e(e)),{[`
        ${t}-expand,
        ${t}-edit,
        ${t}-copy
      `]:Object.assign(Object.assign({},VB(e)),{marginInlineStart:e.marginXXS})}),k0e(e)),L0e(e)),M0e()),{"&-rtl":{direction:"rtl"}})}},A$=ws("Typography",e=>[U0e(e)],e=>({titleMarginTop:"1.2em",titleMarginBottom:"0.5em",fontWeightStrong:e.fontWeightStrong})),j0e=e=>{let{prefixCls:t,"aria-label":i,className:a,style:c,direction:u,maxLength:d,autoSize:f=!0,value:m,onSave:g,onCancel:_,onEnd:S,component:b,enterIcon:A=y.createElement(_0e,null)}=e;const R=y.useRef(null),w=y.useRef(!1),D=y.useRef(),[x,O]=y.useState(m);y.useEffect(()=>{O(m)},[m]),y.useEffect(()=>{if(R.current&&R.current.resizableTextArea){const{textArea:ee}=R.current.resizableTextArea;ee.focus();const{length:re}=ee.value;ee.setSelectionRange(re,re)}},[]);const P=ee=>{let{target:re}=ee;O(re.value.replace(/[\n\r]/g,""))},M=()=>{w.current=!0},F=()=>{w.current=!1},j=ee=>{let{keyCode:re}=ee;w.current||(D.current=re)},B=()=>{g(x.trim())},H=ee=>{let{keyCode:re,ctrlKey:oe,altKey:pe,metaKey:ue,shiftKey:me}=ee;D.current===re&&!w.current&&!oe&&!pe&&!ue&&!me&&(re===pt.ENTER?(B(),S==null||S()):re===pt.ESC&&_())},K=()=>{B()},$=b?`${t}-${b}`:"",[Z,z]=A$(t),G=Ve(t,`${t}-edit-content`,{[`${t}-rtl`]:u==="rtl"},a,$,z);return Z(y.createElement("div",{className:G,style:c},y.createElement(v$,{ref:R,maxLength:d,value:x,onChange:P,onKeyDown:j,onKeyUp:H,onCompositionStart:M,onCompositionEnd:F,onBlur:K,"aria-label":i,rows:1,autoSize:f}),A!==null?bs(A,{className:`${t}-edit-content-confirm`}):null))},F0e=j0e;var V0e=globalThis&&globalThis.__rest||function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(i[a[c]]=e[a[c]]);return i};const B0e=y.forwardRef((e,t)=>{var{prefixCls:i,component:a="article",className:c,rootClassName:u,setContentRef:d,children:f,direction:m}=e,g=V0e(e,["prefixCls","component","className","rootClassName","setContentRef","children","direction"]);const{getPrefixCls:_,direction:S}=y.useContext(Hn),b=m??S;let A=t;d&&(A=Is(t,d));const R=_("typography",i),[w,D]=A$(R),x=Ve(R,{[`${R}-rtl`]:b==="rtl"},c,u,D);return w(y.createElement(a,Object.assign({className:x,ref:A},g),f))}),N$=B0e;function nT(e,t){return y.useMemo(()=>{const i=!!e;return[i,Object.assign(Object.assign({},t),i&&typeof e=="object"?e:null)]},[e])}const $0e=(e,t)=>{const i=y.useRef(!1);y.useEffect(()=>{i.current?e():i.current=!0},t)},H0e=$0e;function x$(e){const t=typeof e;return t==="string"||t==="number"}function W0e(e){let t=0;return e.forEach(i=>{x$(i)?t+=String(i).length:t+=1}),t}function sF(e,t){let i=0;const a=[];for(let c=0;c<e.length;c+=1){if(i===t)return a;const u=e[c],f=x$(u)?String(u).length:1,m=i+f;if(m>t){const g=t-i;return a.push(String(u).slice(0,g)),a}a.push(u),i=m}return e}const G0e=0,Qg=1,cF=2,rT=3,lF=4,z0e=e=>{let{enabledMeasure:t,children:i,text:a,width:c,fontSize:u,rows:d,onEllipsis:f}=e;const[[m,g,_],S]=y.useState([0,0,0]),[b,A]=y.useState(G0e),[R,w]=y.useState(0),D=y.useRef(null),x=y.useRef(null),O=y.useMemo(()=>Nc(a),[a]),P=y.useMemo(()=>W0e(O),[O]),M=y.useMemo(()=>!t||b!==rT?i(O,!1):i(sF(O,g),g<P),[t,b,i,O,g,P]);Or(()=>{t&&c&&u&&P&&(A(Qg),S([0,Math.ceil(P/2),P]))},[t,c,u,a,P,d]),Or(()=>{var H;b===Qg&&w(((H=D.current)===null||H===void 0?void 0:H.offsetHeight)||0)},[b]),Or(()=>{var H,K;if(R){if(b===Qg){const $=((H=x.current)===null||H===void 0?void 0:H.offsetHeight)||0,Z=d*R;$<=Z?(A(lF),f(!1)):A(cF)}else if(b===cF)if(m!==_){const $=((K=x.current)===null||K===void 0?void 0:K.offsetHeight)||0,Z=d*R;let z=m,G=_;m===_-1?G=m:$<=Z?z=g:G=g;const ee=Math.ceil((z+G)/2);S([z,ee,G])}else A(rT),f(!0)}},[b,m,_,d,R]);const F={width:c,whiteSpace:"normal",margin:0,padding:0},j=(H,K,$)=>y.createElement("span",{"aria-hidden":!0,ref:K,style:Object.assign({position:"fixed",display:"block",left:0,top:0,zIndex:-9999,visibility:"hidden",pointerEvents:"none",fontSize:Math.floor(u/2)*2},$)},H),B=(H,K)=>{const $=sF(O,H);return j(i($,!0),K,F)};return y.createElement(y.Fragment,null,M,t&&b!==rT&&b!==lF&&y.createElement(y.Fragment,null,j("lg",D,{wordBreak:"keep-all",whiteSpace:"nowrap"}),b===Qg?j(i(O,!1),x,F):B(g,x)))},K0e=z0e,Y0e=e=>{let{enabledEllipsis:t,isEllipsis:i,children:a,tooltipProps:c}=e;return!(c!=null&&c.title)||!t?a:y.createElement(pm,Object.assign({open:i?void 0:!1},c),a)},q0e=Y0e;var X0e=globalThis&&globalThis.__rest||function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(i[a[c]]=e[a[c]]);return i};function J0e(e,t){let{mark:i,code:a,underline:c,delete:u,strong:d,keyboard:f,italic:m}=e,g=t;function _(S,b){b&&(g=y.createElement(S,{},g))}return _("strong",d),_("u",c),_("del",u),_("code",a),_("mark",i),_("kbd",f),_("i",m),g}function Zg(e,t,i){return e===!0||e===void 0?t:e||i&&t}function uF(e){return e===!1?[!1,!1]:Array.isArray(e)?e:[e]}const Q0e="...",Z0e=y.forwardRef((e,t)=>{var i,a,c;const{prefixCls:u,className:d,style:f,type:m,disabled:g,children:_,ellipsis:S,editable:b,copyable:A,component:R,title:w}=e,D=X0e(e,["prefixCls","className","style","type","disabled","children","ellipsis","editable","copyable","component","title"]),{getPrefixCls:x,direction:O}=y.useContext(Hn),[P]=PB("Text"),M=y.useRef(null),F=y.useRef(null),j=x("typography",u),B=Yo(D,["mark","code","delete","underline","strong","keyboard","italic"]),[H,K]=nT(b),[$,Z]=bc(!1,{value:K.editing}),{triggerType:z=["icon"]}=K,G=je=>{var ct;je&&((ct=K.onStart)===null||ct===void 0||ct.call(K)),Z(je)};H0e(()=>{var je;$||(je=F.current)===null||je===void 0||je.focus()},[$]);const ee=je=>{je==null||je.preventDefault(),G(!0)},re=je=>{var ct;(ct=K.onChange)===null||ct===void 0||ct.call(K,je),G(!1)},oe=()=>{var je;(je=K.onCancel)===null||je===void 0||je.call(K),G(!1)},[pe,ue]=nT(A),[me,fe]=y.useState(!1),se=y.useRef(null),ae={};ue.format&&(ae.format=ue.format);const de=()=>{se.current&&clearTimeout(se.current)},ce=je=>{var ct;je==null||je.preventDefault(),je==null||je.stopPropagation(),A0e(ue.text||String(_)||"",ae),fe(!0),de(),se.current=setTimeout(()=>{fe(!1)},3e3),(ct=ue.onCopy)===null||ct===void 0||ct.call(ue,je)};y.useEffect(()=>de,[]);const[we,Ie]=y.useState(!1),[$e,ke]=y.useState(!1),[mt,vt]=y.useState(!1),[st,rt]=y.useState(!1),[ft,Ye]=y.useState(!1),[St,kt]=y.useState(!0),[Lt,Xe]=nT(S,{expandable:!1}),qe=Lt&&!mt,{rows:Ge=1}=Xe,nt=y.useMemo(()=>!qe||Xe.suffix!==void 0||Xe.onEllipsis||Xe.expandable||H||pe,[qe,Xe,H,pe]);Or(()=>{Lt&&!nt&&(Ie(pj("webkitLineClamp")),ke(pj("textOverflow")))},[nt,Lt]);const gt=y.useMemo(()=>nt?!1:Ge===1?$e:we,[nt,$e,we]),bt=qe&&(gt?ft:st),Ot=qe&&Ge===1&&gt,Mt=qe&&Ge>1&&gt,Yt=je=>{var ct;vt(!0),(ct=Xe.onExpand)===null||ct===void 0||ct.call(Xe,je)},[An,yi]=y.useState(0),[dr,Gn]=y.useState(0),mn=(je,ct)=>{let{offsetWidth:vn}=je;var jt;yi(vn),Gn(parseInt((jt=window.getComputedStyle)===null||jt===void 0?void 0:jt.call(window,ct).fontSize,10)||0)},xr=je=>{var ct;rt(je),st!==je&&((ct=Xe.onEllipsis)===null||ct===void 0||ct.call(Xe,je))};y.useEffect(()=>{const je=M.current;if(Lt&&gt&&je){const ct=Mt?je.offsetHeight<je.scrollHeight:je.offsetWidth<je.scrollWidth;ft!==ct&&Ye(ct)}},[Lt,gt,_,Mt,St]),y.useEffect(()=>{const je=M.current;if(typeof IntersectionObserver>"u"||!je||!gt||!qe)return;const ct=new IntersectionObserver(()=>{kt(!!je.offsetParent)});return ct.observe(je),()=>{ct.disconnect()}},[gt,qe]);let Cn={};Xe.tooltip===!0?Cn={title:(i=K.text)!==null&&i!==void 0?i:_}:y.isValidElement(Xe.tooltip)?Cn={title:Xe.tooltip}:typeof Xe.tooltip=="object"?Cn=Object.assign({title:(a=K.text)!==null&&a!==void 0?a:_},Xe.tooltip):Cn={title:Xe.tooltip};const Xt=y.useMemo(()=>{const je=ct=>["string","number"].includes(typeof ct);if(!(!Lt||gt)){if(je(K.text))return K.text;if(je(_))return _;if(je(w))return w;if(je(Cn.title))return Cn.title}},[Lt,gt,w,Cn.title,bt]);if($)return y.createElement(F0e,{value:(c=K.text)!==null&&c!==void 0?c:typeof _=="string"?_:"",onSave:re,onCancel:oe,onEnd:K.onEnd,prefixCls:j,className:d,style:f,direction:O,component:R,maxLength:K.maxLength,autoSize:K.autoSize,enterIcon:K.enterIcon});const Jt=()=>{const{expandable:je,symbol:ct}=Xe;if(!je)return null;let vn;return ct?vn=ct:vn=P==null?void 0:P.expand,y.createElement("a",{key:"expand",className:`${j}-expand`,onClick:Yt,"aria-label":P==null?void 0:P.expand},vn)},Ro=()=>{if(!H)return;const{icon:je,tooltip:ct}=K,vn=Nc(ct)[0]||(P==null?void 0:P.edit),jt=typeof vn=="string"?vn:"";return z.includes("icon")?y.createElement(pm,{key:"edit",title:ct===!1?"":vn},y.createElement(oF,{ref:F,className:`${j}-edit`,onClick:ee,"aria-label":jt},je||y.createElement(d0e,{role:"button"}))):null},qi=()=>{if(!pe)return;const{tooltips:je,icon:ct}=ue,vn=uF(je),jt=uF(ct),Si=me?Zg(vn[1],P==null?void 0:P.copied):Zg(vn[0],P==null?void 0:P.copy),Pr=me?P==null?void 0:P.copied:P==null?void 0:P.copy,Xn=typeof Si=="string"?Si:Pr;return y.createElement(pm,{key:"copy",title:Si},y.createElement(oF,{className:Ve(`${j}-copy`,me&&`${j}-copy-success`),onClick:ce,"aria-label":Xn},me?Zg(jt[1],y.createElement(ide,null),!0):Zg(jt[0],y.createElement(r0e,null),!0)))},br=je=>[je&&Jt(),Ro(),qi()],gn=je=>[je&&y.createElement("span",{"aria-hidden":!0,key:"ellipsis"},Q0e),Xe.suffix,br(je)];return y.createElement(zu,{onResize:mn,disabled:!qe||gt},je=>y.createElement(q0e,{tooltipProps:Cn,enabledEllipsis:qe,isEllipsis:bt},y.createElement(N$,Object.assign({className:Ve({[`${j}-${m}`]:m,[`${j}-disabled`]:g,[`${j}-ellipsis`]:Lt,[`${j}-single-line`]:qe&&Ge===1,[`${j}-ellipsis-single-line`]:Ot,[`${j}-ellipsis-multiple-line`]:Mt},d),prefixCls:u,style:Object.assign(Object.assign({},f),{WebkitLineClamp:Mt?Ge:void 0}),component:R,ref:Is(je,M,t),direction:O,onClick:z.includes("text")?ee:void 0,"aria-label":Xt==null?void 0:Xt.toString(),title:w},B),y.createElement(K0e,{enabledMeasure:qe&&!gt,text:_,rows:Ge,width:An,fontSize:dr,onEllipsis:xr},(ct,vn)=>{let jt=ct;return ct.length&&vn&&Xt&&(jt=y.createElement("span",{key:"show-content","aria-hidden":!0},jt)),J0e(e,y.createElement(y.Fragment,null,jt,gn(vn)))}))))}),O_=Z0e;var ege=globalThis&&globalThis.__rest||function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(i[a[c]]=e[a[c]]);return i};const tge=y.forwardRef((e,t)=>{var{ellipsis:i,rel:a}=e,c=ege(e,["ellipsis","rel"]);const u=Object.assign(Object.assign({},c),{rel:a===void 0&&c.target==="_blank"?"noopener noreferrer":a});return delete u.navigate,y.createElement(O_,Object.assign({},u,{ref:t,ellipsis:!!i,component:"a"}))}),nge=tge,rge=y.forwardRef((e,t)=>y.createElement(O_,Object.assign({ref:t},e,{component:"div"}))),ige=rge;var oge=globalThis&&globalThis.__rest||function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(i[a[c]]=e[a[c]]);return i};const age=(e,t)=>{var{ellipsis:i}=e,a=oge(e,["ellipsis"]);const c=y.useMemo(()=>i&&typeof i=="object"?Yo(i,["expandable","rows"]):i,[i]);return y.createElement(O_,Object.assign({ref:t},a,{ellipsis:c,component:"span"}))},sge=y.forwardRef(age);var cge=globalThis&&globalThis.__rest||function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(i[a[c]]=e[a[c]]);return i};const lge=[1,2,3,4,5],uge=y.forwardRef((e,t)=>{const{level:i=1}=e,a=cge(e,["level"]);let c;return lge.includes(i)?c=`h${i}`:c="h1",y.createElement(O_,Object.assign({ref:t},a,{component:c}))}),dge=uge,Lm=N$;Lm.Text=sge;Lm.Link=nge;Lm.Title=dge;Lm.Paragraph=ige;const ho=Lm;function P$(e){var t,i,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(i=P$(e[t]))&&(a&&(a+=" "),a+=i);else for(t in e)e[t]&&(a&&(a+=" "),a+=t);return a}function zw(){for(var e,t,i=0,a="";i<arguments.length;)(e=arguments[i++])&&(t=P$(e))&&(a&&(a+=" "),a+=t);return a}const hge=y.forwardRef(({className:e,children:t},i)=>te.jsx("div",{className:zw(e,"b-1 b-solid b-coolgray-6 rd of-hidden relative"),ref:i,style:{width:288,height:216},children:t})),$a=Object.assign(y.forwardRef(({className:e,children:t},i)=>te.jsx("div",{className:zw(e,"flex-1 p-10 p-t-4 flex gap-5"),ref:i,children:t})),{Item:hge}),jr=({children:e})=>te.jsx("div",{className:"h-screen flex flex-col",children:e}),kc=({children:e})=>te.jsx("samp",{className:"z-2 inline-flex items-center gap-1 absolute bottom-0 bg-black c-white px-1 text-sm",children:e}),ev=14,tv=8,iT=8,oT=4;function pge({volumeLevel:e=0,noise:t=.075,...i}){const[a,c]=y.useState(0);return y.useEffect(()=>{if(e&&t){const u=Math.max(0,Math.min(1,t)),d=setInterval(()=>{c(e+Math.random()*u*(Math.random()>.5?1:-1))},50);return()=>clearInterval(d)}},[e,t]),te.jsxs("svg",{fill:"none",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",...i,children:[te.jsx("defs",{children:te.jsx("clipPath",{id:"icon-mic-v-clip",children:te.jsx("rect",{height:ev,rx:tv/2,width:tv,x:iT,y:oT})})}),te.jsx("path",{d:"M0 0h24v24H0z",fill:"#999CA3",opacity:".01"}),te.jsx("rect",{clipPath:"url(#icon-mic-v-clip)",fill:"#fff",height:ev,width:tv,x:iT,y:oT}),te.jsx("path",{d:"M4 16.625h2v-1.25H4v1.25Zm6 4h4v-1.25h-4v1.25Zm8-4h2v-1.25h-2v1.25Zm-4 4A4.625 4.625 0 0 0 18.625 16h-1.25A3.375 3.375 0 0 1 14 19.375v1.25ZM5.375 16A4.625 4.625 0 0 0 10 20.625v-1.25A3.375 3.375 0 0 1 6.625 16h-1.25Z",fill:"#fff"}),te.jsx("g",{clipPath:"url(#icon-mic-v-clip)",children:te.jsx("rect",{fill:"#44AD00",height:ev*2,style:{transform:`translateY(${(1-a)*ev}px)`,transition:"transform .1s"},width:tv,x:iT,y:oT})})]})}const fge=y.memo(function(t){return te.jsxs("svg",{fill:"none",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",...t,children:[te.jsx("path",{d:"m5 5 14 14",stroke:"rgb(225, 225, 225, 0.35)",strokeLinejoin:"round",strokeWidth:"1.25"}),te.jsx("path",{clipRule:"evenodd",d:"M19.277 16.625H20v-1.25h-1.973l1.25 1.25Zm-3.239 2.065.89.89a4.602 4.602 0 0 1-2.716 1.04l-.212.005h-4a4.626 4.626 0 0 1-4.55-3.787l-.033-.213H4v-1.25h2c.345 0 .625.28.625.625a3.375 3.375 0 0 0 3.19 3.37l.185.005h4a3.36 3.36 0 0 0 2.038-.685Zm.587-4.717V8a4.625 4.625 0 0 0-8.5-2.526l.911.91a3.374 3.374 0 0 1 6.281.991H14v1.25h1.375v.75H14v1.25h1.375v.75h-1.348l1.25 1.25h.098v.098l1.25 1.25Zm-2.587 2.717.89.89A4.625 4.625 0 0 1 7.375 14v-3.973l1.25 1.25v.098h.098l1.25 1.25H8.625V14a3.375 3.375 0 0 0 5.413 2.69Z",fill:"rgb(225, 225, 225, 0.35)",fillRule:"evenodd"})]})}),mge=y.memo(function(t){return te.jsxs("svg",{fill:"none",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",...t,children:[te.jsx("circle",{cx:"12",cy:"11",r:"7",stroke:"#fff",strokeLinejoin:"round",strokeWidth:"1.25"}),te.jsx("circle",{cx:"12",cy:"11",r:"3",stroke:"#fff",strokeLinejoin:"round",strokeWidth:"1.25"}),te.jsx("circle",{cx:"14.625",cy:"6.625",fill:"#fff",r:".625"}),te.jsx("path",{d:"M7 18.25a8.004 8.004 0 0 0 10 0",stroke:"#fff",strokeLinejoin:"round",strokeWidth:"1.25"})]})}),gge=y.memo(function(t){return te.jsxs("svg",{fill:"none",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",...t,children:[te.jsx("path",{d:"m5 5 14 14",stroke:"rgb(225, 225, 225, 0.35)",strokeLinejoin:"round",strokeWidth:"1.25"}),te.jsx("path",{clipRule:"evenodd",d:"m15.72 18.373.91.909a8.63 8.63 0 0 1-9.788-.364l-.232-.18.78-.976a7.38 7.38 0 0 0 8.33.61Zm2.434-2.87A7.625 7.625 0 0 0 7.497 4.846l.897.896a6.375 6.375 0 0 1 8.864 8.864l.896.897Zm-3.857 1.446.952.951A7.625 7.625 0 0 1 5.1 7.751l.951.952a6.375 6.375 0 0 0 8.246 8.246Zm.956-4.348a3.625 3.625 0 0 0-4.854-4.854l.964.964a2.378 2.378 0 0 1 2.926 2.926l.964.964Zm-.628-5.351a.625.625 0 1 0 0-1.25.625.625 0 0 0 0 1.25Z",fill:"rgb(225, 225, 225, 0.35)",fillRule:"evenodd"})]})});function So(e,t,i){return e.on(t,i),()=>e.off(t,i)}function vge(e){try{return e()}catch(t){console.error(t)}}function ip(e){return()=>e.forEach(vge)}function Kw(e,t){const i=setTimeout(e,t);return()=>clearTimeout(i)}function D$(){let e,t,i;function a(){if(t){const g=t;t=void 0,g()}}async function c(){if(i){const g=i;i=void 0;try{await g()}catch(_){console.error(_)}}}async function u(g){e=!0,await c();try{i=await g()}catch(_){console.error(_)}e=!1,a()}async function d(){e=!0,await c(),e=!1,a()}function f(g){e?t=()=>u(g):u(g)}function m(){e?t=d:d()}return{run:f,dispose:m}}const Yw=typeof document<"u"?y.useLayoutEffect:y.useEffect;function Ege(e){return e!=null&&typeof e.then=="function"}function Wl(){const e=y.useRef(!1);return y.useEffect(()=>(e.current=!1,()=>{e.current=!0}),[]),e}function _ge(){const e=Wl();function t(i,a){return new Promise(async(c,u)=>{try{const d=await i;e.current||c(d)}catch(d){e.current?a&&a(d):u(d)}})}return y.useCallback(t,[e])}function A_(e){const t=_ge(),[i,a]=y.useState();return Yw(()=>{Ege(e)?t(e).then(a):a(e)},[e,t]),i}function qu(e,t){const i=y.useRef();y.useEffect(()=>{const{run:a,dispose:c}=i.current||(i.current=D$());return a(e),c},t)}function yge(e,t){const i=e.split("."),a=t.split("."),c=Math.max(i.length,a.length);for(let u=0;u<c;u++){const d=parseInt(i[u]||"0"),f=parseInt(a[u]||"0");if(d>f)return 1;if(d<f)return-1}return 0}function k$(e,t,i){const a=y.useRef(i);Yw(()=>{a.current=i},[i]),y.useEffect(()=>{if(e)return So(e,t,(...c)=>{a.current&&a.current(...c)})},[t,e])}const L$=y.createContext(null);function M$({client:e,children:t}){return te.jsx(L$.Provider,{value:e,children:t})}function Sge(e){const t=y.useContext(L$);return e||t}function Ya(e){const t=Sge(e);if(!t)throw new Error("Agora RTC client not found. Should be wrapped in <AgoraRTCProvider value={client} />");return t}const Cge=y.createContext(null);function bge({client:e,children:t}){return te.jsx(Cge.Provider,{value:e,children:t})}function Tge(e){const t=Ya(e),[i,a]=y.useState(t?t.connectionState:"DISCONNECTED");return y.useEffect(()=>{if(t){a(t.connectionState);let c;return ip([So(t,"connection-state-change",u=>{c==null||c(),u==="CONNECTED"?c=Kw(()=>a(u),0):a(u)}),()=>c==null?void 0:c()])}else a("DISCONNECTED")},[t]),i}function qa(e){const t=Ya(e),[i,a]=y.useState(t?t.connectionState==="CONNECTED":!1);return y.useEffect(()=>{if(t){a(t.connectionState==="CONNECTED");let c;return ip([So(t,"connection-state-change",u=>{c==null||c(),c=Kw(()=>a(u==="CONNECTED"),0)}),()=>c==null?void 0:c()])}else a(!1)},[t]),i}function N_(e){const t=Ya(e),[i,a]=y.useState(t==null?void 0:t.uid);return y.useEffect(()=>{if(t)return So(t,"connection-state-change",c=>{if(c==="CONNECTED")return Kw(()=>a(t.uid),0);c==="DISCONNECTED"&&a(void 0)})},[t]),i}class Go extends Error{constructor(i,a){var t=(...args)=>{super(...args);yg(this,"rtcMethod");yg(this,"rtcError");yg(this,"name","AgoraRTCReactException")};t(typeof a=="string"?a:a.message),this.rtcMethod=i,this.rtcError=a}log(i){console[i](this)}}function li(e,t=!0,i){const a=Ya(i),c=qa(i),[u,d]=y.useState(!1),[f,m]=y.useState(0),[g,_]=y.useState(null),S=Wl();return qu(async()=>{if(S.current||(_(null),m(0),d(!1)),t&&a){try{S.current||d(!0);const{appid:b,channel:A,token:R,uid:w}=typeof e=="function"?await e():e,D=await a.join(b,A,R,w);S.current||m(D)}catch(b){console.error(b),S.current||_(new Go("IAgoraRTCClient.join",b))}return S.current||d(!1),()=>{for(const b of a.localTracks)b.isPlaying&&b.stop(),b.close();return a.leave()}}},[t,i]),{data:f,isLoading:u,isConnected:c,error:g}}const dF=()=>({uplink:0,downlink:0,delay:0});function Rge(e){const t=Ya(e),[i,a]=y.useState(dF);return y.useEffect(()=>{if(t)return So(t,"network-quality",c=>a({uplink:c.uplinkNetworkQuality,downlink:c.downlinkNetworkQuality,delay:t.getRTCStats().RTT??0}));a(dF())},[t]),i}function Gl(e,t=!0,i){const a=Ya(i),c=qa(i),u=y.useRef([]),[d,f]=y.useState(!1),[m,g]=y.useState(null),_=Wl();return qu(async()=>{if(_.current||(f(!1),g(null)),!a||!c||!t)return;const S=e.filter(Boolean),b=w=>{const D=yge(Rc.VERSION,"4.18.2")>=0;return D||new Go("usePublish","please check your agora-rtc-sdk-ng version in package.json, it's recommend upgrade to >= 4.18.2").log("warn"),D?a.mode!=="live"||a.role!=="audience":!0},A=w=>u.current.some(D=>D&&D.getTrackId()===w.getTrackId()),R=w=>b()&&w.enabled&&t&&!A(w);for(let w=0;w<S.length;w++){const D=S[w];if(D&&R(D)){try{_.current||f(!0),await a.publish(D)}catch(x){console.error(x),_.current||g(new Go("IAgoraRTCClient.publish",x))}_.current||f(!1)}}u.current=S},[c,t,a,e]),{isLoading:d,error:m}}function op(e=!0,t={ANS:!0,AEC:!0},i){const a=qa(i),[c,u]=y.useState(null),[d,f]=y.useState(!1),[m,g]=y.useState(null),_=Wl();return qu(async()=>{if(_.current||(f(!1),g(null)),a&&e&&!c){try{_.current||f(!0);const S=await Rc.createMicrophoneAudioTrack(t);_.current||u(S)}catch(S){console.error(S),_.current||g(new Go("IAgoraRTC.createMicrophoneAudioTrack",S))}_.current||f(!1)}!a&&!_.current&&u(null)},[a,e]),{localMicrophoneTrack:c,isLoading:d,error:m}}function ap(e=!0,t){const i=qa(t),[a,c]=y.useState(null),[u,d]=y.useState(!1),[f,m]=y.useState(null),g=Wl();return qu(async()=>{if(g.current||(d(!1),m(null)),i&&e&&!a){try{g.current||d(!0);const _=await Rc.createCameraVideoTrack();g.current||c(_)}catch(_){console.error(_),g.current||m(new Go("IAgoraRTC.createCameraVideoTrack",_))}g.current||d(!1)}!i&&!g.current&&c(null)},[i,e]),{localCameraTrack:a,isLoading:u,error:f}}function sp(e,t){const i=Ya(t),[a,c]=y.useState([]),u=qa(),d=y.useRef([]),[f,m]=y.useState(!1),[g,_]=y.useState(null),S=Wl();return qu(async()=>{if(S.current||_(null),!Array.isArray(e)||!u)return;const b=async w=>{if(!w.audioTrack&&e.some(({uid:D})=>w.uid===D)){try{S.current||m(!0),await i.subscribe(w,"audio")}catch(D){console.error(D),S.current||_(new Go("IAgoraRTCClient.subscribe",D))}w.audioTrack&&!d.current.some(D=>D.getUserId()===w.uid)&&d.current.push(w.audioTrack),d.current=d.current.map(D=>w.audioTrack&&D.getUserId()===w.uid&&D.getTrackId()!==w.audioTrack.getTrackId()?w.audioTrack:D),S.current||(c(d.current),m(!1))}},A=async w=>{if(e.some(({uid:D})=>w.uid===D)){S.current||(d.current=d.current.filter(D=>D.getUserId()!==w.uid),c(d.current));try{S.current||m(!0),await i.unsubscribe(w,"audio")}catch(D){console.error(D),S.current||_(new Go("IAgoraRTCClient.unsubscribe",D))}S.current||m(!1)}};e.map(w=>{!w.audioTrack&&w.hasAudio&&b(w)});const R=[];for(let w=0;w<d.current.length;w++){const D=d.current[w];if(!e.some(x=>x.uid===D.getUserId())){const x=i.remoteUsers.find(O=>O.uid===D.getUserId());x&&(R.push({user:x,mediaType:"audio"}),d.current.splice(w,1),w--)}}if(R.length>0){try{S.current||m(!0),await i.massUnsubscribe(R)}catch(w){console.error(w),S.current||_(new Go("IAgoraRTCClient.massUnsubscribe",w))}S.current||(c(d.current.slice()),m(!1))}return ip([So(i,"user-published",(w,D)=>{e.find(x=>x.uid===w.uid)&&D==="audio"&&b(w)}),So(i,"user-unpublished",(w,D)=>{e.find(x=>x.uid===w.uid)&&D==="audio"&&A(w)})])},[u,i,e]),{audioTracks:a,isLoading:f,error:g}}function cp(e,t){const i=Ya(t),[a,c]=y.useState([]),u=qa(),d=y.useRef([]),[f,m]=y.useState(!1),[g,_]=y.useState(null),S=Wl();return qu(async()=>{if(S.current||_(null),!Array.isArray(e)||!u)return;const b=async w=>{if(!w.videoTrack&&e.some(({uid:D})=>w.uid===D)){try{S.current||m(!0),await i.subscribe(w,"video")}catch(D){console.error(D),S.current||_(new Go("IAgoraRTCClient.subscribe",D))}w.videoTrack&&!d.current.some(D=>D.getUserId()===w.uid)&&d.current.push(w.videoTrack),d.current=d.current.map(D=>w.videoTrack&&D.getUserId()===w.uid&&D.getTrackId()!==w.videoTrack.getTrackId()?w.videoTrack:D),S.current||(c(d.current),m(!1))}},A=async w=>{if(e.some(({uid:D})=>w.uid===D)){S.current||(d.current=d.current.filter(D=>D.getUserId()!==w.uid),c(d.current));try{S.current||m(!0),await i.unsubscribe(w,"video")}catch(D){console.error(D),S.current||_(new Go("IAgoraRTCClient.unsubscribe",D))}S.current||m(!1)}};e.map(w=>{!w.videoTrack&&w.hasVideo&&b(w)});const R=[];for(let w=0;w<d.current.length;w++){const D=d.current[w];if(!e.some(x=>x.uid===D.getUserId())){const x=i.remoteUsers.find(O=>O.uid===D.getUserId());x&&(R.push({user:x,mediaType:"video"}),d.current.splice(w,1),w--)}}if(R.length>0){try{S.current||m(!0),await i.massUnsubscribe(R)}catch(w){console.error(w),S.current||_(new Go("IAgoraRTCClient.massUnsubscribe",w))}S.current||(c(d.current.slice()),m(!1))}return ip([So(i,"user-published",(w,D)=>{e.find(x=>x.uid===w.uid)&&D==="video"&&b(w)}),So(i,"user-unpublished",(w,D)=>{e.find(x=>x.uid===w.uid)&&D==="video"&&A(w)})])},[u,i,e]),{videoTracks:a,isLoading:f,error:g}}function hF(e,t,i){const a=Ya(i),c=t==="audio"?"audioTrack":"videoTrack",[u,d]=y.useState(e&&e[c]),f=qa(),m=y.useRef(),[g,_]=y.useState(!1),[S,b]=y.useState(null);return y.useEffect(()=>{if(!e||!f)return;let A=!1;A||b(null);const R=t==="audio"?"hasAudio":"hasVideo",w=e.uid,D=async(P,M)=>{if(P[c]&&a.remoteUsers.some(({uid:F})=>P.uid===F))try{A||_(!0),await a.unsubscribe(P,M)}catch(F){A||b(new Go("IAgoraRTCClient.unsubscribe",F)),console.error(F)}A||(d(void 0),_(!1))},x=async(P,M)=>{try{!P[c]&&a.remoteUsers.some(({uid:F})=>P.uid===F)&&(A||_(!0),await a.subscribe(P,M)),A||d(P[c])}catch(F){A||b(new Go("IAgoraRTCClient.subscribe",F)),console.error(F)}A||_(!1)},O=m.current||(m.current=D$());return!e[c]&&e[R]?O.run(()=>x(e,t)):d(e[c]),ip([()=>{A=!0,O.dispose()},So(a,"user-published",(P,M)=>{P.uid===w&&M===t&&O.run(()=>x(P,t))}),So(a,"user-unpublished",(P,M)=>{P.uid===w&&M===t&&O.run(()=>D(P,t))})])},[f,a,e,t,c]),{track:u,isLoading:g,error:S}}function As(e){const t=Ya(e),[i,a]=y.useState(t?t.remoteUsers:[]);return y.useEffect(()=>{if(t){const c=()=>a(t.remoteUsers.slice());return ip([So(t,"user-joined",c),So(t,"user-left",c),So(t,"user-published",c),So(t,"user-unpublished",c)])}},[t]),i}function U$(e,t,i,a){const c=qa(a),[u,d]=y.useState(null),[f,m]=y.useState(!1),[g,_]=y.useState(null),S=Wl();return qu(async()=>{if(S.current||(m(!1),_(null)),c&&e&&!u){try{S.current||m(!0);const b=await Rc.createScreenVideoTrack(t,i);S.current||d(b)}catch(b){console.error(b),S.current||_(new Go("IAgoraRTC.createScreenVideoTrack",b))}S.current||m(!1)}(!c||!e)&&!S.current&&d(null)},[c,e]),{screenTrack:u,isLoading:f,error:g}}const j$=y.createContext(void 0);function qw(e,t,i){const a=y.useContext(j$);y.useEffect(()=>{if(e)return i&&t?e.play(i):e.stop(),a?(a.onMount(e),()=>a.onUnmount(e)):()=>{e.isPlaying&&e.stop()}},[e,i,t,a])}function Xw(e,t){const i=y.useContext(j$);Yw(()=>{if(e)return t?e.play():e.stop(),i?(i.onMount(e),()=>i.onUnmount(e)):()=>{e.isPlaying&&e.stop()}},[e,t,i])}function x_({track:e,play:t=!1,volume:i,disabled:a,muted:c,children:u}){const d=A_(e);return Xw(d,t),y.useEffect(()=>{d&&i!=null&&d.setVolume(i)},[d,i]),y.useEffect(()=>{d&&a!=null&&d.setEnabled(!a).catch(console.warn)},[a,d]),y.useEffect(()=>{d&&c!=null&&d.setMuted(c).catch(console.warn)},[c,d]),u?te.jsx(te.Fragment,{children:u}):null}const P_={position:"relative",width:"100%",height:"100%",overflow:"hidden",background:"#000"},F$={width:"100%",height:"100%"},Mm={position:"absolute",top:0,left:0,width:"100%",height:"100%",overflow:"hidden",zIndex:2},lp=(e,t)=>y.useMemo(()=>({...e,...t}),[e,t]);function Um({track:e,play:t,disabled:i,muted:a,style:c,...u}){const d=lp(F$,c),[f,m]=y.useState(null),g=A_(e);return qw(g,t,f),y.useEffect(()=>{g&&i!=null&&g.setEnabled(!i).catch(console.warn)},[i,g]),y.useEffect(()=>{g&&a!=null&&g.setMuted(a).catch(console.warn)},[a,g]),te.jsx("div",{...u,ref:m,style:d})}const Ige={width:"100%",height:"100%",background:"#1a1e21 center/cover no-repeat",filter:"blur(16px) brightness(0.4)"},wge={position:"absolute",top:"50%",left:"50%",maxWidth:"50%",maxHeight:"50%",aspectRatio:"1",transform:"translate(-50%, -50%)",borderRadius:"50%",overflow:"hidden",objectFit:"cover"};function D_({cover:e}){return te.jsx("div",{style:Mm,children:typeof e=="string"?te.jsxs(te.Fragment,{children:[te.jsx("div",{style:{...Ige,backgroundImage:`url(${e})`}}),te.jsx("img",{src:e,style:wge})]}):e()})}function V$({micOn:e,cameraOn:t,audioTrack:i,videoTrack:a,playAudio:c,playVideo:u,volume:d,cover:f,children:m,style:g,..._}){const S=lp(P_,g);return u=u??!!t,c=c??!!e,te.jsxs("div",{..._,style:S,children:[te.jsx(Um,{disabled:!t,play:u,track:a}),te.jsx(x_,{disabled:!e,play:c,track:i,volume:d}),f&&!t&&te.jsx(D_,{cover:f}),te.jsx("div",{style:Mm,children:m})]})}function B$({track:e,play:t=!1,playbackDeviceId:i,volume:a,children:c}){return Xw(e,t),y.useEffect(()=>{e&&i!=null&&e.setPlaybackDevice(i).catch(console.warn)},[e,i]),y.useEffect(()=>{e&&a!=null&&e.setVolume(a)},[e,a]),c?te.jsx(te.Fragment,{children:c}):null}function Jw({track:e,play:t,style:i,...a}){const c=lp(F$,i),[u,d]=y.useState(null);return qw(e,t,u),te.jsx("div",{...a,ref:d,style:c})}function Qw({user:e,playVideo:t,playAudio:i,playbackDeviceId:a,volume:c,cover:u,style:d,children:f,...m}){const g=lp(P_,d),{track:_}=hF(e,"video"),{track:S}=hF(e,"audio");return t=t??(e==null?void 0:e.hasVideo),i=i??(e==null?void 0:e.hasAudio),te.jsxs("div",{...m,style:g,children:[te.jsx(Jw,{play:t,track:_}),te.jsx(B$,{play:i,playbackDeviceId:a,track:S,volume:c}),u&&!t&&te.jsx(D_,{cover:u}),te.jsx("div",{style:Mm,children:f})]})}function Oge({track:e,deviceId:t,...i}){const a=A_(e);return y.useEffect(()=>{a&&t!=null&&a.setDevice(t).catch(console.warn)},[t,a]),te.jsx(x_,{track:e,...i})}function Age({track:e,deviceId:t,...i}){const a=A_(e);return y.useEffect(()=>{a&&t!=null&&a.setDevice(t).catch(console.warn)},[t,a]),te.jsx(Um,{track:e,...i})}function Zw({micOn:e,cameraOn:t,audioTrack:i,videoTrack:a,playAudio:c=!1,playVideo:u,micDeviceId:d,cameraDeviceId:f,volume:m,cover:g,children:_,style:S,...b}){const A=lp(P_,S);return u=u??!!t,c=c??!!e,te.jsxs("div",{...b,style:A,children:[te.jsx(Age,{deviceId:f,disabled:!t,play:u,track:a}),te.jsx(Oge,{deviceId:d,disabled:!e,play:c,track:i,volume:m}),g&&!t&&te.jsx(D_,{cover:g}),te.jsx("div",{style:Mm,children:_})]})}function jm({track:e,playVideo:t,cover:i,client:a,style:c,children:u,...d}){var _,S;const f=lp(P_,c),g=(S=(_=Ya(a).remoteUsers)==null?void 0:_.find(b=>b.uid===(e==null?void 0:e.getUserId())))==null?void 0:S.hasVideo;return t=t??g,te.jsxs("div",{...d,style:f,children:[te.jsx(Jw,{play:t,track:e}),i&&!t&&te.jsx(D_,{cover:i}),te.jsx("div",{style:Mm,children:u})]})}const eO=({published:e,total:t})=>te.jsx("div",{className:"p-4 text-xl",children:te.jsxs("span",{className:"inline-flex items-center gap-1 py-2 px-3 rd b-1 b-solid",children:[te.jsx("i",{className:"i-lucide-users"}),te.jsxs("samp",{className:"text-base",children:[e,"/",t]})]})});var tO={exports:{}};tO.exports;(function(e){(function(t,i,a){function c(m){var g=this,_=f();g.next=function(){var S=2091639*g.s0+g.c*23283064365386963e-26;return g.s0=g.s1,g.s1=g.s2,g.s2=S-(g.c=S|0)},g.c=1,g.s0=_(" "),g.s1=_(" "),g.s2=_(" "),g.s0-=_(m),g.s0<0&&(g.s0+=1),g.s1-=_(m),g.s1<0&&(g.s1+=1),g.s2-=_(m),g.s2<0&&(g.s2+=1),_=null}function u(m,g){return g.c=m.c,g.s0=m.s0,g.s1=m.s1,g.s2=m.s2,g}function d(m,g){var _=new c(m),S=g&&g.state,b=_.next;return b.int32=function(){return _.next()*4294967296|0},b.double=function(){return b()+(b()*2097152|0)*11102230246251565e-32},b.quick=b,S&&(typeof S=="object"&&u(S,_),b.state=function(){return u(_,{})}),b}function f(){var m=4022871197,g=function(_){_=String(_);for(var S=0;S<_.length;S++){m+=_.charCodeAt(S);var b=.02519603282416938*m;m=b>>>0,b-=m,b*=m,m=b>>>0,b-=m,m+=b*4294967296}return(m>>>0)*23283064365386963e-26};return g}i&&i.exports?i.exports=d:a&&a.amd?a(function(){return d}):this.alea=d})(wt,e,!1)})(tO);var Nge=tO.exports,nO={exports:{}};nO.exports;(function(e){(function(t,i,a){function c(f){var m=this,g="";m.x=0,m.y=0,m.z=0,m.w=0,m.next=function(){var S=m.x^m.x<<11;return m.x=m.y,m.y=m.z,m.z=m.w,m.w^=m.w>>>19^S^S>>>8},f===(f|0)?m.x=f:g+=f;for(var _=0;_<g.length+64;_++)m.x^=g.charCodeAt(_)|0,m.next()}function u(f,m){return m.x=f.x,m.y=f.y,m.z=f.z,m.w=f.w,m}function d(f,m){var g=new c(f),_=m&&m.state,S=function(){return(g.next()>>>0)/4294967296};return S.double=function(){do var b=g.next()>>>11,A=(g.next()>>>0)/4294967296,R=(b+A)/(1<<21);while(R===0);return R},S.int32=g.next,S.quick=S,_&&(typeof _=="object"&&u(_,g),S.state=function(){return u(g,{})}),S}i&&i.exports?i.exports=d:a&&a.amd?a(function(){return d}):this.xor128=d})(wt,e,!1)})(nO);var xge=nO.exports,rO={exports:{}};rO.exports;(function(e){(function(t,i,a){function c(f){var m=this,g="";m.next=function(){var S=m.x^m.x>>>2;return m.x=m.y,m.y=m.z,m.z=m.w,m.w=m.v,(m.d=m.d+362437|0)+(m.v=m.v^m.v<<4^(S^S<<1))|0},m.x=0,m.y=0,m.z=0,m.w=0,m.v=0,f===(f|0)?m.x=f:g+=f;for(var _=0;_<g.length+64;_++)m.x^=g.charCodeAt(_)|0,_==g.length&&(m.d=m.x<<10^m.x>>>4),m.next()}function u(f,m){return m.x=f.x,m.y=f.y,m.z=f.z,m.w=f.w,m.v=f.v,m.d=f.d,m}function d(f,m){var g=new c(f),_=m&&m.state,S=function(){return(g.next()>>>0)/4294967296};return S.double=function(){do var b=g.next()>>>11,A=(g.next()>>>0)/4294967296,R=(b+A)/(1<<21);while(R===0);return R},S.int32=g.next,S.quick=S,_&&(typeof _=="object"&&u(_,g),S.state=function(){return u(g,{})}),S}i&&i.exports?i.exports=d:a&&a.amd?a(function(){return d}):this.xorwow=d})(wt,e,!1)})(rO);var Pge=rO.exports,iO={exports:{}};iO.exports;(function(e){(function(t,i,a){function c(f){var m=this;m.next=function(){var _=m.x,S=m.i,b,A;return b=_[S],b^=b>>>7,A=b^b<<24,b=_[S+1&7],A^=b^b>>>10,b=_[S+3&7],A^=b^b>>>3,b=_[S+4&7],A^=b^b<<7,b=_[S+7&7],b=b^b<<13,A^=b^b<<9,_[S]=A,m.i=S+1&7,A};function g(_,S){var b,A=[];if(S===(S|0))A[0]=S;else for(S=""+S,b=0;b<S.length;++b)A[b&7]=A[b&7]<<15^S.charCodeAt(b)+A[b+1&7]<<13;for(;A.length<8;)A.push(0);for(b=0;b<8&&A[b]===0;++b);for(b==8?A[7]=-1:A[b],_.x=A,_.i=0,b=256;b>0;--b)_.next()}g(m,f)}function u(f,m){return m.x=f.x.slice(),m.i=f.i,m}function d(f,m){f==null&&(f=+new Date);var g=new c(f),_=m&&m.state,S=function(){return(g.next()>>>0)/4294967296};return S.double=function(){do var b=g.next()>>>11,A=(g.next()>>>0)/4294967296,R=(b+A)/(1<<21);while(R===0);return R},S.int32=g.next,S.quick=S,_&&(_.x&&u(_,g),S.state=function(){return u(g,{})}),S}i&&i.exports?i.exports=d:a&&a.amd?a(function(){return d}):this.xorshift7=d})(wt,e,!1)})(iO);var Dge=iO.exports,oO={exports:{}};oO.exports;(function(e){(function(t,i,a){function c(f){var m=this;m.next=function(){var _=m.w,S=m.X,b=m.i,A,R;return m.w=_=_+1640531527|0,R=S[b+34&127],A=S[b=b+1&127],R^=R<<13,A^=A<<17,R^=R>>>15,A^=A>>>12,R=S[b]=R^A,m.i=b,R+(_^_>>>16)|0};function g(_,S){var b,A,R,w,D,x=[],O=128;for(S===(S|0)?(A=S,S=null):(S=S+"\0",A=0,O=Math.max(O,S.length)),R=0,w=-32;w<O;++w)S&&(A^=S.charCodeAt((w+32)%S.length)),w===0&&(D=A),A^=A<<10,A^=A>>>15,A^=A<<4,A^=A>>>13,w>=0&&(D=D+1640531527|0,b=x[w&127]^=A+D,R=b==0?R+1:0);for(R>=128&&(x[(S&&S.length||0)&127]=-1),R=127,w=4*128;w>0;--w)A=x[R+34&127],b=x[R=R+1&127],A^=A<<13,b^=b<<17,A^=A>>>15,b^=b>>>12,x[R]=A^b;_.w=D,_.X=x,_.i=R}g(m,f)}function u(f,m){return m.i=f.i,m.w=f.w,m.X=f.X.slice(),m}function d(f,m){f==null&&(f=+new Date);var g=new c(f),_=m&&m.state,S=function(){return(g.next()>>>0)/4294967296};return S.double=function(){do var b=g.next()>>>11,A=(g.next()>>>0)/4294967296,R=(b+A)/(1<<21);while(R===0);return R},S.int32=g.next,S.quick=S,_&&(_.X&&u(_,g),S.state=function(){return u(g,{})}),S}i&&i.exports?i.exports=d:a&&a.amd?a(function(){return d}):this.xor4096=d})(wt,e,!1)})(oO);var kge=oO.exports,aO={exports:{}};aO.exports;(function(e){(function(t,i,a){function c(f){var m=this,g="";m.next=function(){var S=m.b,b=m.c,A=m.d,R=m.a;return S=S<<25^S>>>7^b,b=b-A|0,A=A<<24^A>>>8^R,R=R-S|0,m.b=S=S<<20^S>>>12^b,m.c=b=b-A|0,m.d=A<<16^b>>>16^R,m.a=R-S|0},m.a=0,m.b=0,m.c=-1640531527,m.d=1367130551,f===Math.floor(f)?(m.a=f/4294967296|0,m.b=f|0):g+=f;for(var _=0;_<g.length+20;_++)m.b^=g.charCodeAt(_)|0,m.next()}function u(f,m){return m.a=f.a,m.b=f.b,m.c=f.c,m.d=f.d,m}function d(f,m){var g=new c(f),_=m&&m.state,S=function(){return(g.next()>>>0)/4294967296};return S.double=function(){do var b=g.next()>>>11,A=(g.next()>>>0)/4294967296,R=(b+A)/(1<<21);while(R===0);return R},S.int32=g.next,S.quick=S,_&&(typeof _=="object"&&u(_,g),S.state=function(){return u(g,{})}),S}i&&i.exports?i.exports=d:a&&a.amd?a(function(){return d}):this.tychei=d})(wt,e,!1)})(aO);var Lge=aO.exports,$$={exports:{}};(function(e){(function(t,i,a){var c=256,u=6,d=52,f="random",m=a.pow(c,u),g=a.pow(2,d),_=g*2,S=c-1,b;function A(M,F,j){var B=[];F=F==!0?{entropy:!0}:F||{};var H=x(D(F.entropy?[M,P(i)]:M??O(),3),B),K=new R(B),$=function(){for(var Z=K.g(u),z=m,G=0;Z<g;)Z=(Z+G)*c,z*=c,G=K.g(1);for(;Z>=_;)Z/=2,z/=2,G>>>=1;return(Z+G)/z};return $.int32=function(){return K.g(4)|0},$.quick=function(){return K.g(4)/4294967296},$.double=$,x(P(K.S),i),(F.pass||j||function(Z,z,G,ee){return ee&&(ee.S&&w(ee,K),Z.state=function(){return w(K,{})}),G?(a[f]=Z,z):Z})($,H,"global"in F?F.global:this==a,F.state)}function R(M){var F,j=M.length,B=this,H=0,K=B.i=B.j=0,$=B.S=[];for(j||(M=[j++]);H<c;)$[H]=H++;for(H=0;H<c;H++)$[H]=$[K=S&K+M[H%j]+(F=$[H])],$[K]=F;(B.g=function(Z){for(var z,G=0,ee=B.i,re=B.j,oe=B.S;Z--;)z=oe[ee=S&ee+1],G=G*c+oe[S&(oe[ee]=oe[re=S&re+z])+(oe[re]=z)];return B.i=ee,B.j=re,G})(c)}function w(M,F){return F.i=M.i,F.j=M.j,F.S=M.S.slice(),F}function D(M,F){var j=[],B=typeof M,H;if(F&&B=="object")for(H in M)try{j.push(D(M[H],F-1))}catch{}return j.length?j:B=="string"?M:M+"\0"}function x(M,F){for(var j=M+"",B,H=0;H<j.length;)F[S&H]=S&(B^=F[S&H]*19)+j.charCodeAt(H++);return P(F)}function O(){try{var M;return b&&(M=b.randomBytes)||(M=new Uint8Array(c),(t.crypto||t.msCrypto).getRandomValues(M)),P(M)}catch{var F=t.navigator,j=F&&F.plugins;return[+new Date,t,j,t.screen,P(i)]}}function P(M){return String.fromCharCode.apply(0,M)}x(a.random(),i),e.exports?e.exports=A:a["seed"+f]=A})(typeof self<"u"?self:wt,[],Math)})($$);var Mge=$$.exports,Uge=Nge,jge=xge,Fge=Pge,Vge=Dge,Bge=kge,$ge=Lge,Xu=Mge;Xu.alea=Uge;Xu.xor128=jge;Xu.xorwow=Fge;Xu.xorshift7=Vge;Xu.xor4096=Bge;Xu.tychei=$ge;var Hge=Xu;const H$=Lc(Hge);let W$=H$();function Wge(){return W$()}function pF(e){W$=H$(e)}function G$(e,t){const i=Array.isArray(e)?()=>Gge(e):e;return(t==null?void 0:t.length)===void 0?i(0):Array.from({length:t.length},(a,c)=>i(c))}function Gge(e){return e[Math.floor(Wge()*e.length)]}function zge(e,t){return G$(e,t)}var fF={withAccents:{male:["AdriÃ¡n","Ãgir","Ãlvaro","AndrÃ©","AndrÃ©s","Ãrni","AsbjÃ¸rn","BjÃ¶rn","CÃ©sar","DanÃ­el","DavÃ­Ã°","EmÃ­lio","FaÃ±ch","FranÃ§ois","FrantiÅ¡ek","GÃ­sli","GÃ¶tz","GuÃ°jÃ³n","GuÃ°mundur","GÃ¼nter","HalldÃ³r","Hans-JÃ¶rg","Hans-JÃ¼rgen","HÃ¼seyin","IÃ±aki","JÃ¡nos","JesÃºs","JiÅÃ­","JÃ³hann","JÃ³hannes","JokÅ«bas","JÃ³n","JosÃ©","JÃ¶rn","JuliÃ£o","JÃ¼rgen","KristjÃ¡n","MaÃ«l","MagnÃºs","MathÃ©o","MÃ¡tyÃ¡s","MichaÅ","NoÃ«l","NuÃ±ez","Ãlafur","Ãscar","Ãyvind","PÃ¡ll","PaweÅ","PÃ©tur","RamÃ³n","RaÃºl","RenÃ©","RuairÃ­","RubÃ©n","SeÃ¡n","SÃ©rgio","SigurÃ°ur","SÃ¶nke","StefÃ¡n","TomÃ¡Å¡","Ãorsteinn"],female:["Ãdel","AgnÃ¨s","AlÃ­cia","Ãnne","AntÃ³nia","Ãsta","AuÃ°ur","CÃ¤cilia","ChloÃ«","ClaÃºdia","DÃ¶rte","ElÃ­n","ElÃ­sabet","EliÅ¡ka","FrantiÅ¡ka","GlÃ³ria","GraÅ¼yna","GuÃ°bjÃ¶rg","GuÃ°nÃ½","GuÃ°rÃºn","HenriÃ«tte","IngibjÃ¶rg","Ãris","JÃ³hanna","JÃ³na","JÃºlia","KÃ¤te","KatrÃ­n","KolbrÃºn","KristÃ­n","KÅ the","LetÃ­cia","LÃ­dia","LÃºcia","MaÅgorzata","MargrÃ©t","MarÃ­a","MÃ³nica","NatÃ¡lia","ÃlÃ¶f","PatrÃ­cia","RagnheiÃ°ur","RenÃ©e","RuÅ¾ena","SiÃ¢n","SigrÃ­Ã°ur","SigrÃºn","SÃ­lvia","SÃ¸rina","VÄra","VirgÃ­nia","ZoÃ«","ÃÃ³ra","ÃÃ³runn"]},withoutAccents:{male:["Abdul","Abdullahi","Abubakar","Adam","Adamu","Adiy","Ahmad","Ajay","Akira","Alan","Alberto","Alejandro","Aleksander","Aleksandr","Aleksey","Alex","Alexander","Alexey","Ali","Aliyu","Aminu","Amit","Amiyr","Amiyt","Amnuai","Amphon","Anah","Anan","Andreas","Andrew","Andrey","Andri","Andries","Andrzej","Anil","Anthony","Anton","Antonio","Arnar","Artur","Artyom","Arun","Ashok","Atli","Avraham","Bartosz","Bello","Bernd","Bin","Birgir","Bjarni","Blessing","Bongani","Brian","Bunmi","Carlos","Carol","Chan","Chao","Charles","Charoen","Chen","Cheng","Christian","Christopher","Colin","Daniel","Daniyel","Dariusz","David","Denis","Dennis","Diego","Dieter","Dilip","Dinesh","Dmitriy","Dmitry","Einar","Eliyahu","Emmanuel","Evgeniy","Fernando","Fran","Francis","Francisco","Francisco-Javier","Frank","Franz","Gang","Gareth","Gary","George","Gerhard","Graham","Grzegorz","Gunnar","Guy","Haim","Haiyan","Hans","Hans-Ulrich","Haruna","Hassan","Heike","Heinz","Helgi","Helmut","Hendrik","Herbert","Hideo","Hiromi","Hiroshi","Hong","Horst","Hui","Ian","Ibrahim","Idris","Igor","Ilya","Isa","Isaac","Isah","Ivan","Jabulani","Jacek","Jacobus","Jakub","James","Jan","Janusz","Javier","Jean","Jerzy","Jesus","Jason","Jianguo","Jianhua","Jianjun","Jianping","Jin","Joan","Johan","Johannes","John","Jonathan","Jorge","Jose","Jose-Antonio","Jose-Luis","Jose-Manuel","Jose-Maria","Josef","Joseph","Joyce","Juan","Kabiru","Kai","Kamil","Karen","Karl","Karl-Heinz","Katsumi","Kazuo","Kelvin","Kenji","Kenneth","Kevin","Kiran","Kirill","Kiyoshi","Kjartan","Klaus","Ko","Koichi","Koji","Konstantin","Koshi","Krishna","Kristinn","Krzysztof","Kun","Lakshmi","Lan","Laxmi","Lei","Li","Lihua","Lijun","Lilian","Lin","Ling","Liping","Liyor","Luis","Lukasz","Maciej","Mahmood","Maksim","Manfred","Manoj","Manuel","Marcin","Mardkhay","Marek","Mariusz","Mark","Martin","Masami","Masao","Mateusz","Matt","Matthew","Meiyr","Michael","Michal","Miguel","Miguel-Angel","Mikhail","Min","Ming","Mitsuo","Miykhael","Miykhal","Mo","Mohamed","Mohammad","Mohammed","Mohan","Moses","Moshe","Mpho","Muhammad","Muhammed","Mukesh","Musa","Narong","Nathan","Nicola","Nikita","Nikolay","Ning","Nkosinathi","Noam","Oleg","Omer","Otieno","Pablo","Patrick","Paul","Pavel","Pawel","Pedro","Peng","Peter","Petrus","Philip","Pieter","Ping","Piotr","Prasit","Prasoet","Pricha","Pushpa","Qiang","Qing","Radha","Rafael","Ragnar","Raj","Rajendra","Rajesh","Raju","Rakesh","Ram","Ramesh","Raphael","Rattana","Ravi","Richard","Robert","Roman","Rong","Roy","Ryan","Salisu","Saman","Samran","Samuel","Sani","Sanjay","Santosh","Sam","Sammy","Sawat","Sebastian","Sergey","Sergio","Shankar","Shay","Shigeru","Shimon","Shlomo","Shoji","Sibusiso","Simon","Sipho","Sombat","Sombun","Somchai","Somchit","Somkhit","Somkiat","Sommai","Somnuek","Somphon","Somphong","Somsak","Sri","Stefan","Stephen","Steve","Steven","Suman","Sunday","Sunil","Sunthon","Suresh","Sushila","Suwit","Sveinn","Tadashi","Takashi","Takeshi","Tal","Tebogo","Thabo","Thawi","Themba","Thomas","Thulani","Tomasz","Toshio","Udom","Umar","Uriy","Usman","Uwe","Victor","Vijay","Viktor","Vincent","Vinod","Vladimir","Walter","Wanchai","Waraphon","Wei","Werner","Wichai","Wichian","Willem","William","Winai","Wirat","Wirot","Wojciech","Wolfgang","Xiang","Xiaohong","Xiaoli","Xiaoping","Xiaoyan","Xin","Xolani","Yaakv","Yahaya","Yakubu","Yan","Yasuo","Yhudah","Ying","Yisrael","Yong","Yosef","Yoshie","Yoshimi","Yoshio","Yu","Yue","Yukio","Yun","Yuriy","Yusuf","Yuval","Zbigniew","Zhen","Zhiqiang"],female:["Agata","Agnieszka","Aisha","Akira","Aleksandra","Alina","Alyona","Amina","Amnuai","Ana","Ana-Maria","Anah","Anan","Anastasiya","Andrea","Angela","Anita","Ann","Anna","Anong","Antonia","Asha","Barbara","Beata","Berglind","Bin","Birgit","Birna","Blessing","Brigitte","Bunmi","Busisiwe","Carmen","Carol","Caroline","Catherine","Chan","Chanah","Chao","Charoen","Chayah","Chen","Cheng","Christa","Christine","Claire","Claudia","Cristina","Darya","Dolores","Dorota","Edda","Ekaterina","Elena","Elisabeth","Elizabeth","Elke","Emiko","Emma","Erika","Erla","Erna","Ester","Esther","Eunice","Eva","Eugenia","Ewa","Faith","Fatima","Fiona","Fran","Francisca","Fumiko","Galina","Gabra","Gisela","Gita","Grace","Hadiza","Haiyan","Hanna","Haruna","Hauwa","Heike","Helen","Helga","Hildur","Hiroko","Hiromi","Hisako","Hong","Hui","Hulda","Inga","Ingrid","Irina","Isa","Isabel","Isah","Iwona","Jackline","Jan","Jane","Janet","Jean","Jennifer","Jianhua","Jianping","Jin","Joan","Joanna","Johanna","Josefa","Joy","Joyce","Juan","Julie","Justyna","Kai","Kanchana","Karen","Karin","Karolina","Kasia","Katarzyna","Katsumi","Keiko","Kiran","Kiyoko","Kristina","Kseniya","Kun","Lakshmi","Lalita","Lan","Latda","Laura","Laxmi","Leah","Lei","Li","Lihua","Lijun","Lilian","Lilja","Lin","Linda","Lindiwe","Ling","Liping","Lisa","Lucia","Lucy","Lyubov","Lyudmila","Magda","Magdalena","Mali","Manju","Margaret","Maria","Maria-Isabel","Maria-Jose","Maria-Pilar","Marina","Mariya","Marta","Martha","Mary","Maryam","Masako","Masami","Mei","Mercy","Michal","Michiko","Mieko","Min","Mina","Ming","Miriam","Miyoko","Mo","Monika","Mpho","Na","Nadezhda","Nan","Nancy","Natalya","Ngozi","Nicola","Ning","Nittaya","Noam","Nobuko","Nokuthula","Nonhlanhla","Noriko","Nushi","Olga","Omer","Patricia","Paula","Paulina","Peng","Petra","Phonthip","Pilar","Ping","Prani","Purity","Pushpa","Qing","Rachel","Radha","Rattana","Rebecca","Reiko","Rekha","Renate","Rita","Rong","Rosa","Rose","Rut","Ruth","Ryoko","Sabine","Sachiko","Samran","Santosh","Sara","Sarah","Sam","Sammy","Sawat","Shanti","Sharon","Shay","Shizuko","Shoshanah","Sibongile","Sita","Sombat","Sombun","Somchit","Somkhit","Sommai","Somnuek","Somphon","Somphong","Sri","Steinunn","Sukanya","Suman","Sunday","Sunita","Suphaphon","Susan","Susanne","Sushila","Svetlana","Takako","Tamar","Tatyana","Tal","Tebogo","Teruko","Thawi","Tomiko","Toshiko","Unnur","Urai","Urmila","Ursula","Usha","Valentina","Victoria","Wanjiru","Wanphen","Watsana","Wei","Wilai","Xiang","Xiaohong","Xiaoli","Xiaoping","Xiaoyan","Xin","Yael","Yan","Yasuko","Yelena","Yhudiyt","Ying","Yoko","Yong","Yoshie","Yoshiko","Yoshimi","Yu","Yue","Yuko","Yuliya","Yun","Yuval","Zainab","Zandile","Zanele","Zhen"]}};function Kge(e){var t,i;const a=(t=e==null?void 0:e.withAccents)!=null&&t,c=(i=e==null?void 0:e.gender)!=null?i:zge(["male","female"]),u=e==null?void 0:e.locale;return G$(a?u?u==null?void 0:u.withAccents[c]:fF.withAccents[c]:u?u==null?void 0:u.withoutAccents[c]:fF.withoutAccents[c],e)}var Yge={china:["Peking roasted duck","Kung pao chicken","Sweet and sour pork","Hot pot","Dim sum","Dumplings","Ma po tofu","Char siu","Chicken chow mein","Beef chow mein","vegetable chow mein","Chicken fried rice","Beef fried rice","Vegetable fried Rice","Special fried Rice","Sichuan pork","Xiaolongbao","Zhajiangmian","Wonton soup","Sweet and sour pork","Duck spring Rolls","Vegetable spring Rolls","Wonton","Peking duck","Lamb hot pot","Spicy crayfish","Guilin rice noodles","Lanzhou hand-pulled noodles","Steamed crab","Shredded pork with garlic sauce","Red braised pork","Sweet and sour Ribs","Xinjiang","Braised pork with vermicelli"],italy:["Butternut squash risotto","Mushroom risotto","Beetroot risotto","Courgette risotto","Pizza","Gnocchi","Spaghetti bolognese","Spaghetti carbonara","Pesto alla Genovese","Beef lasagne","Vegetable lasagne","Gelato","Prosciutto di Parma","Ribollita","Bagna cauda","Polenta","Tortelli and ravioli","Focaccia","Garlic bread","Arancini","Il tartufo","Panzerotto fritto","Fiorentina","Minestrone","Frico","Arrosticini","Olive ascolante","Fritto misto piemontes","TiramisÃ¹"],india:["Biryani","Dosa","Tandoori chicken","Samosas","Chaat","Plain naan","Garlic naan","Pilau rice","Steamed rice","Chicken madras","Vegetable madras","Chicken vindaloo","Chicken jalfrezi","Chicken roghan josh","Lamb roghan josh","Beef roghan josh","Butter chicken","Dosa","Gulab jamun","Chicken korma","Mutter paneer","Papadum","Paratha","Raita","Saag paneer","Tandoori chicken","Chicken tikka masala","Pakora","Dal","Chapati","Pasanda","Aloo gobi","Kofta","Chicken makhani","Paneer naan","Chana Aloo Curry"],mexico:["Chilaquiles","Pozole","Tacos al pastor","Tostadas","Chiles en nogada","Elote","Enchiladas","Mole","Guacamole","Tamales","Huevos rancheros","Machaca","Discada","Beef Burrito","Chicken Burrito","Pozole de pollo o duajolote","Menudo","Cochinita pibil","Tamale","Quesadilla","Frijoles puercos","Chile en nogada","Esquites","Alegria de amaranto","PipiÃ¡n","Aguachile","Ceviche","Pescado zarandeado","Camarones a la diabla","Birria de chivo","Tlayuda","Guacamole con chapulines","Flautas","Torta Ahogada","Carnitas","Caldo Azteca","Gorditas de Nata"],japan:["Sushi","Udon","Tofu","Tempura","Yakitori","Sashimi","Ramen","Donburi","Natto","Oden","Tamagoyaki","Soba","Tonkatsu","Kashipan","Sukiyaki","Miso soup","Okonomiyaki","Mentaiko","Nikujaga","Unagi no kabayaki","Shabu Shabu","Onigiri","Gyoza","Takoyaki","aiseki ryori","Edamame","Yakisoba","Chawanmushi","Wagashi"],france:["Foie gras","HuÃ®tres","Cassoulet","Poulet basquaise","Escargots au beurre persillÃ©","Mouclade charentaise","Galettes bretonnes","Flemish carbonnade","Quiche lorraine","Raclette","Cheese fondue","Beef fondue","Gratin dauphinois","Tartiflette","Bouillabaisse","Ratatouille","Boeuf bourguignon","Blanquette de veau","Pot-au-feu","Coq-au-vin","Hachis parmentier","Steak tartare","Choucroute","SoufflÃ© au fromage","Cuisses de grenouilles","Soupe Ã  lâoignon","Baguette","Croissant","French cheeses","Fondant au chocolat","Tarte tatin","Macarons","CrÃ¨me brÃ»lÃ©e","Ãle flottante","Profiteroles","Pain au chocolat"],lebanon:["Kibbeh","Kafta","Kanafeh","Hummus","Rice pilaf","Fattoush","Manakish","Tabbouleh","Sfeeha","Fattoush","Labneh","Muhammara","Lahm bi ajin","Kaak","Chanklich","Mssabaha","Shawarma","Kebbe","Falafel","Halewit el jeben","Namoura","Maamoul","Foul mdammas","Balila","Kawarma","Fattouch"],thailand:["Pad kra pao moo","Tom kha gai","Khao Pad","Chicken pad Thai","Vegetable pad Thai","Moo satay","Tom yum goong","Khao niew mamuang","Kai yad sai","Khao soi","Pad see ew","Laab moo","Gaeng panang","Gai pad med ma muang","Som tam","Poh pia tod","Gaeng massaman","Pla kapung nueng manao","Tod mun pla","Gaeng ped","Gaeng garee","Gaeng keow wan","Moo ping","Durian","Sai ooah","Hoy tod","Kuay teow reua","Mu kratha","Kao ka moo","Yam nua"],greece:["Moussaka","Papoutsakia","Pastitsio","Souvlaki","Soutzoukakia","Stifado","Tomatokeftedes","Tzatziki","Kolokithokeftedes","Giouvetsi","Choriatiki","Kleftiko","Gemista","Fasolada","Bougatsa","Tiropita","Spanakopita","Feta Cheese with Honey","Horta","Tirokroketes","Briam","Saganaki","Gigantes","Dolmades","Fasolatha","Koulouri","Loukoumades","Gyros","Galaktoboureko","Baklava"],turkey:["ÅiÅ kebap","DÃ¶ner","KÃ¶fte","Pide","Kumpir","Meze","MantÄ±","Lahmacun","Menemen","ÅiÅ kebap","Ä°skender kebab","Corba","Kuzu tandir","ÃiÄ KÃ¶fte","Pilav","Yaprak sarma","Dolma","Ä°mam bayÄ±ldÄ±","Borek","Durum","Kumpir","Balik ekmek","Simit","Kunefe","Baklava","Lokum","Halva","Mozzaik pasta","GÃ¼llaÃ§","Mercimek KÃ¶ftesi","Haydari","Tursu suyu","Kahvalti","Kazan dibi","Hunkar begendi","Islak burgers","Salep","Yogurtlu kebab"],spain:["Tortilla de patatas","Fabada asturiana","CalÃ§ots","Boquerones al vinagre","Empanada gallega","Paella","Gazpacho","Gachas","Migas","Bocadillo de calamares","Pulpo a feira","Caldo gallego","Lentejas con chorizo","Cocido madrileÃ±o","Cachopo","Caracoles"],venezuela:["PabellÃ³n criollo","Arepa","Mondongo","Empanadas","Quesillo","Chicha andina","TequeÃ±os","Cachapa","Hallaca","Perico","Pasticho","Mandocas","Caraotas negras","Patacones","Dulce de leche","Pan de JamÃ³n"],chile:["Humitas","Empanadas","Porotos con riendas","Completos","Manjar","Cordero al palo","Pastel de choclo","Mote con huesillos","Sopaipillas","Curanto"],argentina:["Milanesas","Empanadas","Pizza fugazeta","Asado","Choripan","Bondiola","Bife de chorizo"],colombia:["Bandeja paisa","Chuleta valluna","Sancocho trifÃ¡sico","Empanada valluna","Salpicon de frutas","Pastel de garbanzo","Ajiaco","Arepas","Arroz de lisa","Sancocho","Pan de bono","Cuchuco","Oblea","Cazuela de mariscos","Pan de yuca","Bollo Limpio","AlmojÃ¡bana","Empanadas","Arroz con Coco","Sopa de mondongo","Cazuela de Mariscos","Arroz con Pollo","Arepa de Huevo","Mote de Queso"],ecuador:["Encebollado","Ceviche","Tigrillo","Bolon de verde","Llapingacho","Mote pillo","Locro de papa","Churrasco"],peru:["Ceviche","Arroz con pollo","Aji de gallina","Llunca de gallina"],"el salvador":["Pupusa","Sopa de patas","Rigua","Flor de izote con huevo","Gallo en chicha"],romania:["Sarmale","Mici","Pomana porcului","CiorbÄ de fasole cu ciolan","CiorbÄ de burtÄ","CiorbÄ rÄdÄuÈeanÄ","PlÄcintÄ cu brÃ¢nzÄ","CiorbÄ de potroace","MÄmÄligÄ cu brÃ¢nzÄ Èi smÃ¢ntÃ¢nÄ","TochiturÄ","Piftie","Iahnie de fasole","SlÄninÄ afumatÄ","CÃ¢rnaÈi afumaÈi","VarzÄ a la Cluj","GulaÈ de cartofi cu afumÄturÄ","Cozonac de casÄ","CiorbÄ ardeleneascÄ de porc","Mucenici moldoveneÈti","SalatÄ de boeuf","Dovleac copt","PapanaÈi cu brÃ¢nzÄ de vacÄ Èi afine","Drob de miel","PÃ¢rjoale moldoveneÈti","ZacuscÄ de vinete","ZacuscÄ de fasole","TurtÄ dulce","ClÄtitele cu gem","ClÄtitele cu brÃ¢nza de vacÄ","BalmoÈ","Cozonac","Chiftele"]},mF;(mF=Object.keys(Yge))==null||mF.length;var gF,qge={olympic:["Archery","Artistic Gymnastics","Artistic Swimming","Athletics","Badminton","Baseball Softball","Basketball","Beach Volleyball","BMX Freestyle","BMX Racing","Boxing","Kayak Flatwater","Kayak Slalom","Diving","Equestrian","Fencing","Football","Golf","Handball","Hockey","Judo","Karate","Marathon Swimming","Modern Pentathlon","Mountain Bike","Rhythmic Gymnastics","Road Cycling","Rowing","Rugby","Sailing","Shooting","Skateboarding","Sport Climbing","Surfing","Swimming","Table Tennis","Taekwondo","Tennis","Track Cycling","Trampoline","Triathlon","Volleyball","Water Polo","Weightlifting","Wrestling"],winterOlympic:["Alpine Skiing","Biathlon","Bobsleigh","Cross-Country Skiing","Curling","Figure Skating","Freestyle Skiing","Ice Hockey","Luge","Nordic Combined","Short Track Speed Skating","Skeleton","Ski Jumping","Snowboard","Speed Skating"],outdoor:["Archery","Athletics","Badminton","Baseball","Basketball","Bowling","Boxing","Camping","Canoeing","Climbing","Cricket","Curling","Cycling","Equestrian","Fencing","Football","Golf","Gymnastics","Handball","Hang Gliding","High Jumping","Hockey","Ice Hockey","Judo","Karate","Kite Flying","Monkey Bars","Motorsports","Netball","Rowing","Rugby","Running","Sailing","Skateboarding","Slide","Snow Skiing","Soccer","Street Hockey","Surfing","Swimming","Table Tennis","Tennis","Trekking","Triathlon","Volleyball","Weightlifting","Wrestling"]};(gF=Object.keys(qge))==null||gF.length;var z$={exports:{}};function Xge(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var aT={exports:{}};const Jge={},Qge=Object.freeze(Object.defineProperty({__proto__:null,default:Jge},Symbol.toStringTag,{value:"Module"})),Zge=SQ(Qge);var vF;function _n(){return vF||(vF=1,function(e,t){(function(i,a){e.exports=a()})(wt,function(){var i=i||function(a,c){var u;if(typeof window<"u"&&window.crypto&&(u=window.crypto),typeof self<"u"&&self.crypto&&(u=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(u=globalThis.crypto),!u&&typeof window<"u"&&window.msCrypto&&(u=window.msCrypto),!u&&typeof wt<"u"&&wt.crypto&&(u=wt.crypto),!u&&typeof Xge=="function")try{u=Zge}catch{}var d=function(){if(u){if(typeof u.getRandomValues=="function")try{return u.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof u.randomBytes=="function")try{return u.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},f=Object.create||function(){function O(){}return function(P){var M;return O.prototype=P,M=new O,O.prototype=null,M}}(),m={},g=m.lib={},_=g.Base=function(){return{extend:function(O){var P=f(this);return O&&P.mixIn(O),(!P.hasOwnProperty("init")||this.init===P.init)&&(P.init=function(){P.$super.init.apply(this,arguments)}),P.init.prototype=P,P.$super=this,P},create:function(){var O=this.extend();return O.init.apply(O,arguments),O},init:function(){},mixIn:function(O){for(var P in O)O.hasOwnProperty(P)&&(this[P]=O[P]);O.hasOwnProperty("toString")&&(this.toString=O.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),S=g.WordArray=_.extend({init:function(O,P){O=this.words=O||[],P!=c?this.sigBytes=P:this.sigBytes=O.length*4},toString:function(O){return(O||A).stringify(this)},concat:function(O){var P=this.words,M=O.words,F=this.sigBytes,j=O.sigBytes;if(this.clamp(),F%4)for(var B=0;B<j;B++){var H=M[B>>>2]>>>24-B%4*8&255;P[F+B>>>2]|=H<<24-(F+B)%4*8}else for(var K=0;K<j;K+=4)P[F+K>>>2]=M[K>>>2];return this.sigBytes+=j,this},clamp:function(){var O=this.words,P=this.sigBytes;O[P>>>2]&=4294967295<<32-P%4*8,O.length=a.ceil(P/4)},clone:function(){var O=_.clone.call(this);return O.words=this.words.slice(0),O},random:function(O){for(var P=[],M=0;M<O;M+=4)P.push(d());return new S.init(P,O)}}),b=m.enc={},A=b.Hex={stringify:function(O){for(var P=O.words,M=O.sigBytes,F=[],j=0;j<M;j++){var B=P[j>>>2]>>>24-j%4*8&255;F.push((B>>>4).toString(16)),F.push((B&15).toString(16))}return F.join("")},parse:function(O){for(var P=O.length,M=[],F=0;F<P;F+=2)M[F>>>3]|=parseInt(O.substr(F,2),16)<<24-F%8*4;return new S.init(M,P/2)}},R=b.Latin1={stringify:function(O){for(var P=O.words,M=O.sigBytes,F=[],j=0;j<M;j++){var B=P[j>>>2]>>>24-j%4*8&255;F.push(String.fromCharCode(B))}return F.join("")},parse:function(O){for(var P=O.length,M=[],F=0;F<P;F++)M[F>>>2]|=(O.charCodeAt(F)&255)<<24-F%4*8;return new S.init(M,P)}},w=b.Utf8={stringify:function(O){try{return decodeURIComponent(escape(R.stringify(O)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(O){return R.parse(unescape(encodeURIComponent(O)))}},D=g.BufferedBlockAlgorithm=_.extend({reset:function(){this._data=new S.init,this._nDataBytes=0},_append:function(O){typeof O=="string"&&(O=w.parse(O)),this._data.concat(O),this._nDataBytes+=O.sigBytes},_process:function(O){var P,M=this._data,F=M.words,j=M.sigBytes,B=this.blockSize,H=B*4,K=j/H;O?K=a.ceil(K):K=a.max((K|0)-this._minBufferSize,0);var $=K*B,Z=a.min($*4,j);if($){for(var z=0;z<$;z+=B)this._doProcessBlock(F,z);P=F.splice(0,$),M.sigBytes-=Z}return new S.init(P,Z)},clone:function(){var O=_.clone.call(this);return O._data=this._data.clone(),O},_minBufferSize:0});g.Hasher=D.extend({cfg:_.extend(),init:function(O){this.cfg=this.cfg.extend(O),this.reset()},reset:function(){D.reset.call(this),this._doReset()},update:function(O){return this._append(O),this._process(),this},finalize:function(O){O&&this._append(O);var P=this._doFinalize();return P},blockSize:16,_createHelper:function(O){return function(P,M){return new O.init(M).finalize(P)}},_createHmacHelper:function(O){return function(P,M){return new x.HMAC.init(O,M).finalize(P)}}});var x=m.algo={};return m}(Math);return i})}(aT)),aT.exports}var sT={exports:{}},EF;function k_(){return EF||(EF=1,function(e,t){(function(i,a){e.exports=a(_n())})(wt,function(i){return function(a){var c=i,u=c.lib,d=u.Base,f=u.WordArray,m=c.x64={};m.Word=d.extend({init:function(g,_){this.high=g,this.low=_}}),m.WordArray=d.extend({init:function(g,_){g=this.words=g||[],_!=a?this.sigBytes=_:this.sigBytes=g.length*8},toX32:function(){for(var g=this.words,_=g.length,S=[],b=0;b<_;b++){var A=g[b];S.push(A.high),S.push(A.low)}return f.create(S,this.sigBytes)},clone:function(){for(var g=d.clone.call(this),_=g.words=this.words.slice(0),S=_.length,b=0;b<S;b++)_[b]=_[b].clone();return g}})}(),i})}(sT)),sT.exports}var cT={exports:{}},_F;function eve(){return _F||(_F=1,function(e,t){(function(i,a){e.exports=a(_n())})(wt,function(i){return function(){if(typeof ArrayBuffer=="function"){var a=i,c=a.lib,u=c.WordArray,d=u.init,f=u.init=function(m){if(m instanceof ArrayBuffer&&(m=new Uint8Array(m)),(m instanceof Int8Array||typeof Uint8ClampedArray<"u"&&m instanceof Uint8ClampedArray||m instanceof Int16Array||m instanceof Uint16Array||m instanceof Int32Array||m instanceof Uint32Array||m instanceof Float32Array||m instanceof Float64Array)&&(m=new Uint8Array(m.buffer,m.byteOffset,m.byteLength)),m instanceof Uint8Array){for(var g=m.byteLength,_=[],S=0;S<g;S++)_[S>>>2]|=m[S]<<24-S%4*8;d.call(this,_,g)}else d.apply(this,arguments)};f.prototype=u}}(),i.lib.WordArray})}(cT)),cT.exports}var lT={exports:{}},yF;function tve(){return yF||(yF=1,function(e,t){(function(i,a){e.exports=a(_n())})(wt,function(i){return function(){var a=i,c=a.lib,u=c.WordArray,d=a.enc;d.Utf16=d.Utf16BE={stringify:function(m){for(var g=m.words,_=m.sigBytes,S=[],b=0;b<_;b+=2){var A=g[b>>>2]>>>16-b%4*8&65535;S.push(String.fromCharCode(A))}return S.join("")},parse:function(m){for(var g=m.length,_=[],S=0;S<g;S++)_[S>>>1]|=m.charCodeAt(S)<<16-S%2*16;return u.create(_,g*2)}},d.Utf16LE={stringify:function(m){for(var g=m.words,_=m.sigBytes,S=[],b=0;b<_;b+=2){var A=f(g[b>>>2]>>>16-b%4*8&65535);S.push(String.fromCharCode(A))}return S.join("")},parse:function(m){for(var g=m.length,_=[],S=0;S<g;S++)_[S>>>1]|=f(m.charCodeAt(S)<<16-S%2*16);return u.create(_,g*2)}};function f(m){return m<<8&4278255360|m>>>8&16711935}}(),i.enc.Utf16})}(lT)),lT.exports}var uT={exports:{}},SF;function up(){return SF||(SF=1,function(e,t){(function(i,a){e.exports=a(_n())})(wt,function(i){return function(){var a=i,c=a.lib,u=c.WordArray,d=a.enc;d.Base64={stringify:function(m){var g=m.words,_=m.sigBytes,S=this._map;m.clamp();for(var b=[],A=0;A<_;A+=3)for(var R=g[A>>>2]>>>24-A%4*8&255,w=g[A+1>>>2]>>>24-(A+1)%4*8&255,D=g[A+2>>>2]>>>24-(A+2)%4*8&255,x=R<<16|w<<8|D,O=0;O<4&&A+O*.75<_;O++)b.push(S.charAt(x>>>6*(3-O)&63));var P=S.charAt(64);if(P)for(;b.length%4;)b.push(P);return b.join("")},parse:function(m){var g=m.length,_=this._map,S=this._reverseMap;if(!S){S=this._reverseMap=[];for(var b=0;b<_.length;b++)S[_.charCodeAt(b)]=b}var A=_.charAt(64);if(A){var R=m.indexOf(A);R!==-1&&(g=R)}return f(m,g,S)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function f(m,g,_){for(var S=[],b=0,A=0;A<g;A++)if(A%4){var R=_[m.charCodeAt(A-1)]<<A%4*2,w=_[m.charCodeAt(A)]>>>6-A%4*2,D=R|w;S[b>>>2]|=D<<24-b%4*8,b++}return u.create(S,b)}}(),i.enc.Base64})}(uT)),uT.exports}var dT={exports:{}},CF;function nve(){return CF||(CF=1,function(e,t){(function(i,a){e.exports=a(_n())})(wt,function(i){return function(){var a=i,c=a.lib,u=c.WordArray,d=a.enc;d.Base64url={stringify:function(m,g=!0){var _=m.words,S=m.sigBytes,b=g?this._safe_map:this._map;m.clamp();for(var A=[],R=0;R<S;R+=3)for(var w=_[R>>>2]>>>24-R%4*8&255,D=_[R+1>>>2]>>>24-(R+1)%4*8&255,x=_[R+2>>>2]>>>24-(R+2)%4*8&255,O=w<<16|D<<8|x,P=0;P<4&&R+P*.75<S;P++)A.push(b.charAt(O>>>6*(3-P)&63));var M=b.charAt(64);if(M)for(;A.length%4;)A.push(M);return A.join("")},parse:function(m,g=!0){var _=m.length,S=g?this._safe_map:this._map,b=this._reverseMap;if(!b){b=this._reverseMap=[];for(var A=0;A<S.length;A++)b[S.charCodeAt(A)]=A}var R=S.charAt(64);if(R){var w=m.indexOf(R);w!==-1&&(_=w)}return f(m,_,b)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function f(m,g,_){for(var S=[],b=0,A=0;A<g;A++)if(A%4){var R=_[m.charCodeAt(A-1)]<<A%4*2,w=_[m.charCodeAt(A)]>>>6-A%4*2,D=R|w;S[b>>>2]|=D<<24-b%4*8,b++}return u.create(S,b)}}(),i.enc.Base64url})}(dT)),dT.exports}var hT={exports:{}},bF;function dp(){return bF||(bF=1,function(e,t){(function(i,a){e.exports=a(_n())})(wt,function(i){return function(a){var c=i,u=c.lib,d=u.WordArray,f=u.Hasher,m=c.algo,g=[];(function(){for(var w=0;w<64;w++)g[w]=a.abs(a.sin(w+1))*4294967296|0})();var _=m.MD5=f.extend({_doReset:function(){this._hash=new d.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(w,D){for(var x=0;x<16;x++){var O=D+x,P=w[O];w[O]=(P<<8|P>>>24)&16711935|(P<<24|P>>>8)&4278255360}var M=this._hash.words,F=w[D+0],j=w[D+1],B=w[D+2],H=w[D+3],K=w[D+4],$=w[D+5],Z=w[D+6],z=w[D+7],G=w[D+8],ee=w[D+9],re=w[D+10],oe=w[D+11],pe=w[D+12],ue=w[D+13],me=w[D+14],fe=w[D+15],se=M[0],ae=M[1],de=M[2],ce=M[3];se=S(se,ae,de,ce,F,7,g[0]),ce=S(ce,se,ae,de,j,12,g[1]),de=S(de,ce,se,ae,B,17,g[2]),ae=S(ae,de,ce,se,H,22,g[3]),se=S(se,ae,de,ce,K,7,g[4]),ce=S(ce,se,ae,de,$,12,g[5]),de=S(de,ce,se,ae,Z,17,g[6]),ae=S(ae,de,ce,se,z,22,g[7]),se=S(se,ae,de,ce,G,7,g[8]),ce=S(ce,se,ae,de,ee,12,g[9]),de=S(de,ce,se,ae,re,17,g[10]),ae=S(ae,de,ce,se,oe,22,g[11]),se=S(se,ae,de,ce,pe,7,g[12]),ce=S(ce,se,ae,de,ue,12,g[13]),de=S(de,ce,se,ae,me,17,g[14]),ae=S(ae,de,ce,se,fe,22,g[15]),se=b(se,ae,de,ce,j,5,g[16]),ce=b(ce,se,ae,de,Z,9,g[17]),de=b(de,ce,se,ae,oe,14,g[18]),ae=b(ae,de,ce,se,F,20,g[19]),se=b(se,ae,de,ce,$,5,g[20]),ce=b(ce,se,ae,de,re,9,g[21]),de=b(de,ce,se,ae,fe,14,g[22]),ae=b(ae,de,ce,se,K,20,g[23]),se=b(se,ae,de,ce,ee,5,g[24]),ce=b(ce,se,ae,de,me,9,g[25]),de=b(de,ce,se,ae,H,14,g[26]),ae=b(ae,de,ce,se,G,20,g[27]),se=b(se,ae,de,ce,ue,5,g[28]),ce=b(ce,se,ae,de,B,9,g[29]),de=b(de,ce,se,ae,z,14,g[30]),ae=b(ae,de,ce,se,pe,20,g[31]),se=A(se,ae,de,ce,$,4,g[32]),ce=A(ce,se,ae,de,G,11,g[33]),de=A(de,ce,se,ae,oe,16,g[34]),ae=A(ae,de,ce,se,me,23,g[35]),se=A(se,ae,de,ce,j,4,g[36]),ce=A(ce,se,ae,de,K,11,g[37]),de=A(de,ce,se,ae,z,16,g[38]),ae=A(ae,de,ce,se,re,23,g[39]),se=A(se,ae,de,ce,ue,4,g[40]),ce=A(ce,se,ae,de,F,11,g[41]),de=A(de,ce,se,ae,H,16,g[42]),ae=A(ae,de,ce,se,Z,23,g[43]),se=A(se,ae,de,ce,ee,4,g[44]),ce=A(ce,se,ae,de,pe,11,g[45]),de=A(de,ce,se,ae,fe,16,g[46]),ae=A(ae,de,ce,se,B,23,g[47]),se=R(se,ae,de,ce,F,6,g[48]),ce=R(ce,se,ae,de,z,10,g[49]),de=R(de,ce,se,ae,me,15,g[50]),ae=R(ae,de,ce,se,$,21,g[51]),se=R(se,ae,de,ce,pe,6,g[52]),ce=R(ce,se,ae,de,H,10,g[53]),de=R(de,ce,se,ae,re,15,g[54]),ae=R(ae,de,ce,se,j,21,g[55]),se=R(se,ae,de,ce,G,6,g[56]),ce=R(ce,se,ae,de,fe,10,g[57]),de=R(de,ce,se,ae,Z,15,g[58]),ae=R(ae,de,ce,se,ue,21,g[59]),se=R(se,ae,de,ce,K,6,g[60]),ce=R(ce,se,ae,de,oe,10,g[61]),de=R(de,ce,se,ae,B,15,g[62]),ae=R(ae,de,ce,se,ee,21,g[63]),M[0]=M[0]+se|0,M[1]=M[1]+ae|0,M[2]=M[2]+de|0,M[3]=M[3]+ce|0},_doFinalize:function(){var w=this._data,D=w.words,x=this._nDataBytes*8,O=w.sigBytes*8;D[O>>>5]|=128<<24-O%32;var P=a.floor(x/4294967296),M=x;D[(O+64>>>9<<4)+15]=(P<<8|P>>>24)&16711935|(P<<24|P>>>8)&4278255360,D[(O+64>>>9<<4)+14]=(M<<8|M>>>24)&16711935|(M<<24|M>>>8)&4278255360,w.sigBytes=(D.length+1)*4,this._process();for(var F=this._hash,j=F.words,B=0;B<4;B++){var H=j[B];j[B]=(H<<8|H>>>24)&16711935|(H<<24|H>>>8)&4278255360}return F},clone:function(){var w=f.clone.call(this);return w._hash=this._hash.clone(),w}});function S(w,D,x,O,P,M,F){var j=w+(D&x|~D&O)+P+F;return(j<<M|j>>>32-M)+D}function b(w,D,x,O,P,M,F){var j=w+(D&O|x&~O)+P+F;return(j<<M|j>>>32-M)+D}function A(w,D,x,O,P,M,F){var j=w+(D^x^O)+P+F;return(j<<M|j>>>32-M)+D}function R(w,D,x,O,P,M,F){var j=w+(x^(D|~O))+P+F;return(j<<M|j>>>32-M)+D}c.MD5=f._createHelper(_),c.HmacMD5=f._createHmacHelper(_)}(Math),i.MD5})}(hT)),hT.exports}var pT={exports:{}},TF;function sO(){return TF||(TF=1,function(e,t){(function(i,a){e.exports=a(_n())})(wt,function(i){return function(){var a=i,c=a.lib,u=c.WordArray,d=c.Hasher,f=a.algo,m=[],g=f.SHA1=d.extend({_doReset:function(){this._hash=new u.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(_,S){for(var b=this._hash.words,A=b[0],R=b[1],w=b[2],D=b[3],x=b[4],O=0;O<80;O++){if(O<16)m[O]=_[S+O]|0;else{var P=m[O-3]^m[O-8]^m[O-14]^m[O-16];m[O]=P<<1|P>>>31}var M=(A<<5|A>>>27)+x+m[O];O<20?M+=(R&w|~R&D)+1518500249:O<40?M+=(R^w^D)+1859775393:O<60?M+=(R&w|R&D|w&D)-1894007588:M+=(R^w^D)-899497514,x=D,D=w,w=R<<30|R>>>2,R=A,A=M}b[0]=b[0]+A|0,b[1]=b[1]+R|0,b[2]=b[2]+w|0,b[3]=b[3]+D|0,b[4]=b[4]+x|0},_doFinalize:function(){var _=this._data,S=_.words,b=this._nDataBytes*8,A=_.sigBytes*8;return S[A>>>5]|=128<<24-A%32,S[(A+64>>>9<<4)+14]=Math.floor(b/4294967296),S[(A+64>>>9<<4)+15]=b,_.sigBytes=S.length*4,this._process(),this._hash},clone:function(){var _=d.clone.call(this);return _._hash=this._hash.clone(),_}});a.SHA1=d._createHelper(g),a.HmacSHA1=d._createHmacHelper(g)}(),i.SHA1})}(pT)),pT.exports}var fT={exports:{}},RF;function K$(){return RF||(RF=1,function(e,t){(function(i,a){e.exports=a(_n())})(wt,function(i){return function(a){var c=i,u=c.lib,d=u.WordArray,f=u.Hasher,m=c.algo,g=[],_=[];(function(){function A(x){for(var O=a.sqrt(x),P=2;P<=O;P++)if(!(x%P))return!1;return!0}function R(x){return(x-(x|0))*4294967296|0}for(var w=2,D=0;D<64;)A(w)&&(D<8&&(g[D]=R(a.pow(w,1/2))),_[D]=R(a.pow(w,1/3)),D++),w++})();var S=[],b=m.SHA256=f.extend({_doReset:function(){this._hash=new d.init(g.slice(0))},_doProcessBlock:function(A,R){for(var w=this._hash.words,D=w[0],x=w[1],O=w[2],P=w[3],M=w[4],F=w[5],j=w[6],B=w[7],H=0;H<64;H++){if(H<16)S[H]=A[R+H]|0;else{var K=S[H-15],$=(K<<25|K>>>7)^(K<<14|K>>>18)^K>>>3,Z=S[H-2],z=(Z<<15|Z>>>17)^(Z<<13|Z>>>19)^Z>>>10;S[H]=$+S[H-7]+z+S[H-16]}var G=M&F^~M&j,ee=D&x^D&O^x&O,re=(D<<30|D>>>2)^(D<<19|D>>>13)^(D<<10|D>>>22),oe=(M<<26|M>>>6)^(M<<21|M>>>11)^(M<<7|M>>>25),pe=B+oe+G+_[H]+S[H],ue=re+ee;B=j,j=F,F=M,M=P+pe|0,P=O,O=x,x=D,D=pe+ue|0}w[0]=w[0]+D|0,w[1]=w[1]+x|0,w[2]=w[2]+O|0,w[3]=w[3]+P|0,w[4]=w[4]+M|0,w[5]=w[5]+F|0,w[6]=w[6]+j|0,w[7]=w[7]+B|0},_doFinalize:function(){var A=this._data,R=A.words,w=this._nDataBytes*8,D=A.sigBytes*8;return R[D>>>5]|=128<<24-D%32,R[(D+64>>>9<<4)+14]=a.floor(w/4294967296),R[(D+64>>>9<<4)+15]=w,A.sigBytes=R.length*4,this._process(),this._hash},clone:function(){var A=f.clone.call(this);return A._hash=this._hash.clone(),A}});c.SHA256=f._createHelper(b),c.HmacSHA256=f._createHmacHelper(b)}(Math),i.SHA256})}(fT)),fT.exports}var mT={exports:{}},IF;function rve(){return IF||(IF=1,function(e,t){(function(i,a,c){e.exports=a(_n(),K$())})(wt,function(i){return function(){var a=i,c=a.lib,u=c.WordArray,d=a.algo,f=d.SHA256,m=d.SHA224=f.extend({_doReset:function(){this._hash=new u.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var g=f._doFinalize.call(this);return g.sigBytes-=4,g}});a.SHA224=f._createHelper(m),a.HmacSHA224=f._createHmacHelper(m)}(),i.SHA224})}(mT)),mT.exports}var gT={exports:{}},wF;function Y$(){return wF||(wF=1,function(e,t){(function(i,a,c){e.exports=a(_n(),k_())})(wt,function(i){return function(){var a=i,c=a.lib,u=c.Hasher,d=a.x64,f=d.Word,m=d.WordArray,g=a.algo;function _(){return f.create.apply(f,arguments)}var S=[_(1116352408,3609767458),_(1899447441,602891725),_(3049323471,3964484399),_(3921009573,2173295548),_(961987163,4081628472),_(1508970993,3053834265),_(2453635748,2937671579),_(2870763221,3664609560),_(3624381080,2734883394),_(310598401,1164996542),_(607225278,1323610764),_(1426881987,3590304994),_(1925078388,4068182383),_(2162078206,991336113),_(2614888103,633803317),_(3248222580,3479774868),_(3835390401,2666613458),_(4022224774,944711139),_(264347078,2341262773),_(604807628,2007800933),_(770255983,1495990901),_(1249150122,1856431235),_(1555081692,3175218132),_(1996064986,2198950837),_(2554220882,3999719339),_(2821834349,766784016),_(2952996808,2566594879),_(3210313671,3203337956),_(3336571891,1034457026),_(3584528711,2466948901),_(113926993,3758326383),_(338241895,168717936),_(666307205,1188179964),_(773529912,1546045734),_(1294757372,1522805485),_(1396182291,2643833823),_(1695183700,2343527390),_(1986661051,1014477480),_(2177026350,1206759142),_(2456956037,344077627),_(2730485921,1290863460),_(2820302411,3158454273),_(3259730800,3505952657),_(3345764771,106217008),_(3516065817,3606008344),_(3600352804,1432725776),_(4094571909,1467031594),_(275423344,851169720),_(430227734,3100823752),_(506948616,1363258195),_(659060556,3750685593),_(883997877,3785050280),_(958139571,3318307427),_(1322822218,3812723403),_(1537002063,2003034995),_(1747873779,3602036899),_(1955562222,1575990012),_(2024104815,1125592928),_(2227730452,2716904306),_(2361852424,442776044),_(2428436474,593698344),_(2756734187,3733110249),_(3204031479,2999351573),_(3329325298,3815920427),_(3391569614,3928383900),_(3515267271,566280711),_(3940187606,3454069534),_(4118630271,4000239992),_(116418474,1914138554),_(174292421,2731055270),_(289380356,3203993006),_(460393269,320620315),_(685471733,587496836),_(852142971,1086792851),_(1017036298,365543100),_(1126000580,2618297676),_(1288033470,3409855158),_(1501505948,4234509866),_(1607167915,987167468),_(1816402316,1246189591)],b=[];(function(){for(var R=0;R<80;R++)b[R]=_()})();var A=g.SHA512=u.extend({_doReset:function(){this._hash=new m.init([new f.init(1779033703,4089235720),new f.init(3144134277,2227873595),new f.init(1013904242,4271175723),new f.init(2773480762,1595750129),new f.init(1359893119,2917565137),new f.init(2600822924,725511199),new f.init(528734635,4215389547),new f.init(1541459225,327033209)])},_doProcessBlock:function(R,w){for(var D=this._hash.words,x=D[0],O=D[1],P=D[2],M=D[3],F=D[4],j=D[5],B=D[6],H=D[7],K=x.high,$=x.low,Z=O.high,z=O.low,G=P.high,ee=P.low,re=M.high,oe=M.low,pe=F.high,ue=F.low,me=j.high,fe=j.low,se=B.high,ae=B.low,de=H.high,ce=H.low,we=K,Ie=$,$e=Z,ke=z,mt=G,vt=ee,st=re,rt=oe,ft=pe,Ye=ue,St=me,kt=fe,Lt=se,Xe=ae,qe=de,Ge=ce,nt=0;nt<80;nt++){var gt,bt,Ot=b[nt];if(nt<16)bt=Ot.high=R[w+nt*2]|0,gt=Ot.low=R[w+nt*2+1]|0;else{var Mt=b[nt-15],Yt=Mt.high,An=Mt.low,yi=(Yt>>>1|An<<31)^(Yt>>>8|An<<24)^Yt>>>7,dr=(An>>>1|Yt<<31)^(An>>>8|Yt<<24)^(An>>>7|Yt<<25),Gn=b[nt-2],mn=Gn.high,xr=Gn.low,Cn=(mn>>>19|xr<<13)^(mn<<3|xr>>>29)^mn>>>6,Xt=(xr>>>19|mn<<13)^(xr<<3|mn>>>29)^(xr>>>6|mn<<26),Jt=b[nt-7],Ro=Jt.high,qi=Jt.low,br=b[nt-16],gn=br.high,je=br.low;gt=dr+qi,bt=yi+Ro+(gt>>>0<dr>>>0?1:0),gt=gt+Xt,bt=bt+Cn+(gt>>>0<Xt>>>0?1:0),gt=gt+je,bt=bt+gn+(gt>>>0<je>>>0?1:0),Ot.high=bt,Ot.low=gt}var ct=ft&St^~ft&Lt,vn=Ye&kt^~Ye&Xe,jt=we&$e^we&mt^$e&mt,Si=Ie&ke^Ie&vt^ke&vt,Pr=(we>>>28|Ie<<4)^(we<<30|Ie>>>2)^(we<<25|Ie>>>7),Xn=(Ie>>>28|we<<4)^(Ie<<30|we>>>2)^(Ie<<25|we>>>7),yt=(ft>>>14|Ye<<18)^(ft>>>18|Ye<<14)^(ft<<23|Ye>>>9),Qt=(Ye>>>14|ft<<18)^(Ye>>>18|ft<<14)^(Ye<<23|ft>>>9),an=S[nt],_r=an.high,ui=an.low,Tr=Ge+Qt,Dr=qe+yt+(Tr>>>0<Ge>>>0?1:0),Tr=Tr+vn,Dr=Dr+ct+(Tr>>>0<vn>>>0?1:0),Tr=Tr+ui,Dr=Dr+_r+(Tr>>>0<ui>>>0?1:0),Tr=Tr+gt,Dr=Dr+bt+(Tr>>>0<gt>>>0?1:0),Pi=Xn+Si,Xi=Pr+jt+(Pi>>>0<Xn>>>0?1:0);qe=Lt,Ge=Xe,Lt=St,Xe=kt,St=ft,kt=Ye,Ye=rt+Tr|0,ft=st+Dr+(Ye>>>0<rt>>>0?1:0)|0,st=mt,rt=vt,mt=$e,vt=ke,$e=we,ke=Ie,Ie=Tr+Pi|0,we=Dr+Xi+(Ie>>>0<Tr>>>0?1:0)|0}$=x.low=$+Ie,x.high=K+we+($>>>0<Ie>>>0?1:0),z=O.low=z+ke,O.high=Z+$e+(z>>>0<ke>>>0?1:0),ee=P.low=ee+vt,P.high=G+mt+(ee>>>0<vt>>>0?1:0),oe=M.low=oe+rt,M.high=re+st+(oe>>>0<rt>>>0?1:0),ue=F.low=ue+Ye,F.high=pe+ft+(ue>>>0<Ye>>>0?1:0),fe=j.low=fe+kt,j.high=me+St+(fe>>>0<kt>>>0?1:0),ae=B.low=ae+Xe,B.high=se+Lt+(ae>>>0<Xe>>>0?1:0),ce=H.low=ce+Ge,H.high=de+qe+(ce>>>0<Ge>>>0?1:0)},_doFinalize:function(){var R=this._data,w=R.words,D=this._nDataBytes*8,x=R.sigBytes*8;w[x>>>5]|=128<<24-x%32,w[(x+128>>>10<<5)+30]=Math.floor(D/4294967296),w[(x+128>>>10<<5)+31]=D,R.sigBytes=w.length*4,this._process();var O=this._hash.toX32();return O},clone:function(){var R=u.clone.call(this);return R._hash=this._hash.clone(),R},blockSize:1024/32});a.SHA512=u._createHelper(A),a.HmacSHA512=u._createHmacHelper(A)}(),i.SHA512})}(gT)),gT.exports}var vT={exports:{}},OF;function ive(){return OF||(OF=1,function(e,t){(function(i,a,c){e.exports=a(_n(),k_(),Y$())})(wt,function(i){return function(){var a=i,c=a.x64,u=c.Word,d=c.WordArray,f=a.algo,m=f.SHA512,g=f.SHA384=m.extend({_doReset:function(){this._hash=new d.init([new u.init(3418070365,3238371032),new u.init(1654270250,914150663),new u.init(2438529370,812702999),new u.init(355462360,4144912697),new u.init(1731405415,4290775857),new u.init(2394180231,1750603025),new u.init(3675008525,1694076839),new u.init(1203062813,3204075428)])},_doFinalize:function(){var _=m._doFinalize.call(this);return _.sigBytes-=16,_}});a.SHA384=m._createHelper(g),a.HmacSHA384=m._createHmacHelper(g)}(),i.SHA384})}(vT)),vT.exports}var ET={exports:{}},AF;function ove(){return AF||(AF=1,function(e,t){(function(i,a,c){e.exports=a(_n(),k_())})(wt,function(i){return function(a){var c=i,u=c.lib,d=u.WordArray,f=u.Hasher,m=c.x64,g=m.Word,_=c.algo,S=[],b=[],A=[];(function(){for(var D=1,x=0,O=0;O<24;O++){S[D+5*x]=(O+1)*(O+2)/2%64;var P=x%5,M=(2*D+3*x)%5;D=P,x=M}for(var D=0;D<5;D++)for(var x=0;x<5;x++)b[D+5*x]=x+(2*D+3*x)%5*5;for(var F=1,j=0;j<24;j++){for(var B=0,H=0,K=0;K<7;K++){if(F&1){var $=(1<<K)-1;$<32?H^=1<<$:B^=1<<$-32}F&128?F=F<<1^113:F<<=1}A[j]=g.create(B,H)}})();var R=[];(function(){for(var D=0;D<25;D++)R[D]=g.create()})();var w=_.SHA3=f.extend({cfg:f.cfg.extend({outputLength:512}),_doReset:function(){for(var D=this._state=[],x=0;x<25;x++)D[x]=new g.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(D,x){for(var O=this._state,P=this.blockSize/2,M=0;M<P;M++){var F=D[x+2*M],j=D[x+2*M+1];F=(F<<8|F>>>24)&16711935|(F<<24|F>>>8)&4278255360,j=(j<<8|j>>>24)&16711935|(j<<24|j>>>8)&4278255360;var B=O[M];B.high^=j,B.low^=F}for(var H=0;H<24;H++){for(var K=0;K<5;K++){for(var $=0,Z=0,z=0;z<5;z++){var B=O[K+5*z];$^=B.high,Z^=B.low}var G=R[K];G.high=$,G.low=Z}for(var K=0;K<5;K++)for(var ee=R[(K+4)%5],re=R[(K+1)%5],oe=re.high,pe=re.low,$=ee.high^(oe<<1|pe>>>31),Z=ee.low^(pe<<1|oe>>>31),z=0;z<5;z++){var B=O[K+5*z];B.high^=$,B.low^=Z}for(var ue=1;ue<25;ue++){var $,Z,B=O[ue],me=B.high,fe=B.low,se=S[ue];se<32?($=me<<se|fe>>>32-se,Z=fe<<se|me>>>32-se):($=fe<<se-32|me>>>64-se,Z=me<<se-32|fe>>>64-se);var ae=R[b[ue]];ae.high=$,ae.low=Z}var de=R[0],ce=O[0];de.high=ce.high,de.low=ce.low;for(var K=0;K<5;K++)for(var z=0;z<5;z++){var ue=K+5*z,B=O[ue],we=R[ue],Ie=R[(K+1)%5+5*z],$e=R[(K+2)%5+5*z];B.high=we.high^~Ie.high&$e.high,B.low=we.low^~Ie.low&$e.low}var B=O[0],ke=A[H];B.high^=ke.high,B.low^=ke.low}},_doFinalize:function(){var D=this._data,x=D.words;this._nDataBytes*8;var O=D.sigBytes*8,P=this.blockSize*32;x[O>>>5]|=1<<24-O%32,x[(a.ceil((O+1)/P)*P>>>5)-1]|=128,D.sigBytes=x.length*4,this._process();for(var M=this._state,F=this.cfg.outputLength/8,j=F/8,B=[],H=0;H<j;H++){var K=M[H],$=K.high,Z=K.low;$=($<<8|$>>>24)&16711935|($<<24|$>>>8)&4278255360,Z=(Z<<8|Z>>>24)&16711935|(Z<<24|Z>>>8)&4278255360,B.push(Z),B.push($)}return new d.init(B,F)},clone:function(){for(var D=f.clone.call(this),x=D._state=this._state.slice(0),O=0;O<25;O++)x[O]=x[O].clone();return D}});c.SHA3=f._createHelper(w),c.HmacSHA3=f._createHmacHelper(w)}(Math),i.SHA3})}(ET)),ET.exports}var _T={exports:{}},NF;function ave(){return NF||(NF=1,function(e,t){(function(i,a){e.exports=a(_n())})(wt,function(i){/** @preserve
			(c) 2012 by CÃ©dric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return function(a){var c=i,u=c.lib,d=u.WordArray,f=u.Hasher,m=c.algo,g=d.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),_=d.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),S=d.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),b=d.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),A=d.create([0,1518500249,1859775393,2400959708,2840853838]),R=d.create([1352829926,1548603684,1836072691,2053994217,0]),w=m.RIPEMD160=f.extend({_doReset:function(){this._hash=d.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(j,B){for(var H=0;H<16;H++){var K=B+H,$=j[K];j[K]=($<<8|$>>>24)&16711935|($<<24|$>>>8)&4278255360}var Z=this._hash.words,z=A.words,G=R.words,ee=g.words,re=_.words,oe=S.words,pe=b.words,ue,me,fe,se,ae,de,ce,we,Ie,$e;de=ue=Z[0],ce=me=Z[1],we=fe=Z[2],Ie=se=Z[3],$e=ae=Z[4];for(var ke,H=0;H<80;H+=1)ke=ue+j[B+ee[H]]|0,H<16?ke+=D(me,fe,se)+z[0]:H<32?ke+=x(me,fe,se)+z[1]:H<48?ke+=O(me,fe,se)+z[2]:H<64?ke+=P(me,fe,se)+z[3]:ke+=M(me,fe,se)+z[4],ke=ke|0,ke=F(ke,oe[H]),ke=ke+ae|0,ue=ae,ae=se,se=F(fe,10),fe=me,me=ke,ke=de+j[B+re[H]]|0,H<16?ke+=M(ce,we,Ie)+G[0]:H<32?ke+=P(ce,we,Ie)+G[1]:H<48?ke+=O(ce,we,Ie)+G[2]:H<64?ke+=x(ce,we,Ie)+G[3]:ke+=D(ce,we,Ie)+G[4],ke=ke|0,ke=F(ke,pe[H]),ke=ke+$e|0,de=$e,$e=Ie,Ie=F(we,10),we=ce,ce=ke;ke=Z[1]+fe+Ie|0,Z[1]=Z[2]+se+$e|0,Z[2]=Z[3]+ae+de|0,Z[3]=Z[4]+ue+ce|0,Z[4]=Z[0]+me+we|0,Z[0]=ke},_doFinalize:function(){var j=this._data,B=j.words,H=this._nDataBytes*8,K=j.sigBytes*8;B[K>>>5]|=128<<24-K%32,B[(K+64>>>9<<4)+14]=(H<<8|H>>>24)&16711935|(H<<24|H>>>8)&4278255360,j.sigBytes=(B.length+1)*4,this._process();for(var $=this._hash,Z=$.words,z=0;z<5;z++){var G=Z[z];Z[z]=(G<<8|G>>>24)&16711935|(G<<24|G>>>8)&4278255360}return $},clone:function(){var j=f.clone.call(this);return j._hash=this._hash.clone(),j}});function D(j,B,H){return j^B^H}function x(j,B,H){return j&B|~j&H}function O(j,B,H){return(j|~B)^H}function P(j,B,H){return j&H|B&~H}function M(j,B,H){return j^(B|~H)}function F(j,B){return j<<B|j>>>32-B}c.RIPEMD160=f._createHelper(w),c.HmacRIPEMD160=f._createHmacHelper(w)}(),i.RIPEMD160})}(_T)),_T.exports}var yT={exports:{}},xF;function cO(){return xF||(xF=1,function(e,t){(function(i,a){e.exports=a(_n())})(wt,function(i){(function(){var a=i,c=a.lib,u=c.Base,d=a.enc,f=d.Utf8,m=a.algo;m.HMAC=u.extend({init:function(g,_){g=this._hasher=new g.init,typeof _=="string"&&(_=f.parse(_));var S=g.blockSize,b=S*4;_.sigBytes>b&&(_=g.finalize(_)),_.clamp();for(var A=this._oKey=_.clone(),R=this._iKey=_.clone(),w=A.words,D=R.words,x=0;x<S;x++)w[x]^=1549556828,D[x]^=909522486;A.sigBytes=R.sigBytes=b,this.reset()},reset:function(){var g=this._hasher;g.reset(),g.update(this._iKey)},update:function(g){return this._hasher.update(g),this},finalize:function(g){var _=this._hasher,S=_.finalize(g);_.reset();var b=_.finalize(this._oKey.clone().concat(S));return b}})})()})}(yT)),yT.exports}var ST={exports:{}},PF;function sve(){return PF||(PF=1,function(e,t){(function(i,a,c){e.exports=a(_n(),sO(),cO())})(wt,function(i){return function(){var a=i,c=a.lib,u=c.Base,d=c.WordArray,f=a.algo,m=f.SHA1,g=f.HMAC,_=f.PBKDF2=u.extend({cfg:u.extend({keySize:128/32,hasher:m,iterations:1}),init:function(S){this.cfg=this.cfg.extend(S)},compute:function(S,b){for(var A=this.cfg,R=g.create(A.hasher,S),w=d.create(),D=d.create([1]),x=w.words,O=D.words,P=A.keySize,M=A.iterations;x.length<P;){var F=R.update(b).finalize(D);R.reset();for(var j=F.words,B=j.length,H=F,K=1;K<M;K++){H=R.finalize(H),R.reset();for(var $=H.words,Z=0;Z<B;Z++)j[Z]^=$[Z]}w.concat(F),O[0]++}return w.sigBytes=P*4,w}});a.PBKDF2=function(S,b,A){return _.create(A).compute(S,b)}}(),i.PBKDF2})}(ST)),ST.exports}var CT={exports:{}},DF;function Ju(){return DF||(DF=1,function(e,t){(function(i,a,c){e.exports=a(_n(),sO(),cO())})(wt,function(i){return function(){var a=i,c=a.lib,u=c.Base,d=c.WordArray,f=a.algo,m=f.MD5,g=f.EvpKDF=u.extend({cfg:u.extend({keySize:128/32,hasher:m,iterations:1}),init:function(_){this.cfg=this.cfg.extend(_)},compute:function(_,S){for(var b,A=this.cfg,R=A.hasher.create(),w=d.create(),D=w.words,x=A.keySize,O=A.iterations;D.length<x;){b&&R.update(b),b=R.update(_).finalize(S),R.reset();for(var P=1;P<O;P++)b=R.finalize(b),R.reset();w.concat(b)}return w.sigBytes=x*4,w}});a.EvpKDF=function(_,S,b){return g.create(b).compute(_,S)}}(),i.EvpKDF})}(CT)),CT.exports}var bT={exports:{}},kF;function Yi(){return kF||(kF=1,function(e,t){(function(i,a,c){e.exports=a(_n(),Ju())})(wt,function(i){i.lib.Cipher||function(a){var c=i,u=c.lib,d=u.Base,f=u.WordArray,m=u.BufferedBlockAlgorithm,g=c.enc;g.Utf8;var _=g.Base64,S=c.algo,b=S.EvpKDF,A=u.Cipher=m.extend({cfg:d.extend(),createEncryptor:function($,Z){return this.create(this._ENC_XFORM_MODE,$,Z)},createDecryptor:function($,Z){return this.create(this._DEC_XFORM_MODE,$,Z)},init:function($,Z,z){this.cfg=this.cfg.extend(z),this._xformMode=$,this._key=Z,this.reset()},reset:function(){m.reset.call(this),this._doReset()},process:function($){return this._append($),this._process()},finalize:function($){$&&this._append($);var Z=this._doFinalize();return Z},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function $(Z){return typeof Z=="string"?K:j}return function(Z){return{encrypt:function(z,G,ee){return $(G).encrypt(Z,z,G,ee)},decrypt:function(z,G,ee){return $(G).decrypt(Z,z,G,ee)}}}}()});u.StreamCipher=A.extend({_doFinalize:function(){var $=this._process(!0);return $},blockSize:1});var R=c.mode={},w=u.BlockCipherMode=d.extend({createEncryptor:function($,Z){return this.Encryptor.create($,Z)},createDecryptor:function($,Z){return this.Decryptor.create($,Z)},init:function($,Z){this._cipher=$,this._iv=Z}}),D=R.CBC=function(){var $=w.extend();$.Encryptor=$.extend({processBlock:function(z,G){var ee=this._cipher,re=ee.blockSize;Z.call(this,z,G,re),ee.encryptBlock(z,G),this._prevBlock=z.slice(G,G+re)}}),$.Decryptor=$.extend({processBlock:function(z,G){var ee=this._cipher,re=ee.blockSize,oe=z.slice(G,G+re);ee.decryptBlock(z,G),Z.call(this,z,G,re),this._prevBlock=oe}});function Z(z,G,ee){var re,oe=this._iv;oe?(re=oe,this._iv=a):re=this._prevBlock;for(var pe=0;pe<ee;pe++)z[G+pe]^=re[pe]}return $}(),x=c.pad={},O=x.Pkcs7={pad:function($,Z){for(var z=Z*4,G=z-$.sigBytes%z,ee=G<<24|G<<16|G<<8|G,re=[],oe=0;oe<G;oe+=4)re.push(ee);var pe=f.create(re,G);$.concat(pe)},unpad:function($){var Z=$.words[$.sigBytes-1>>>2]&255;$.sigBytes-=Z}};u.BlockCipher=A.extend({cfg:A.cfg.extend({mode:D,padding:O}),reset:function(){var $;A.reset.call(this);var Z=this.cfg,z=Z.iv,G=Z.mode;this._xformMode==this._ENC_XFORM_MODE?$=G.createEncryptor:($=G.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==$?this._mode.init(this,z&&z.words):(this._mode=$.call(G,this,z&&z.words),this._mode.__creator=$)},_doProcessBlock:function($,Z){this._mode.processBlock($,Z)},_doFinalize:function(){var $,Z=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(Z.pad(this._data,this.blockSize),$=this._process(!0)):($=this._process(!0),Z.unpad($)),$},blockSize:128/32});var P=u.CipherParams=d.extend({init:function($){this.mixIn($)},toString:function($){return($||this.formatter).stringify(this)}}),M=c.format={},F=M.OpenSSL={stringify:function($){var Z,z=$.ciphertext,G=$.salt;return G?Z=f.create([1398893684,1701076831]).concat(G).concat(z):Z=z,Z.toString(_)},parse:function($){var Z,z=_.parse($),G=z.words;return G[0]==1398893684&&G[1]==1701076831&&(Z=f.create(G.slice(2,4)),G.splice(0,4),z.sigBytes-=16),P.create({ciphertext:z,salt:Z})}},j=u.SerializableCipher=d.extend({cfg:d.extend({format:F}),encrypt:function($,Z,z,G){G=this.cfg.extend(G);var ee=$.createEncryptor(z,G),re=ee.finalize(Z),oe=ee.cfg;return P.create({ciphertext:re,key:z,iv:oe.iv,algorithm:$,mode:oe.mode,padding:oe.padding,blockSize:$.blockSize,formatter:G.format})},decrypt:function($,Z,z,G){G=this.cfg.extend(G),Z=this._parse(Z,G.format);var ee=$.createDecryptor(z,G).finalize(Z.ciphertext);return ee},_parse:function($,Z){return typeof $=="string"?Z.parse($,this):$}}),B=c.kdf={},H=B.OpenSSL={execute:function($,Z,z,G){G||(G=f.random(64/8));var ee=b.create({keySize:Z+z}).compute($,G),re=f.create(ee.words.slice(Z),z*4);return ee.sigBytes=Z*4,P.create({key:ee,iv:re,salt:G})}},K=u.PasswordBasedCipher=j.extend({cfg:j.cfg.extend({kdf:H}),encrypt:function($,Z,z,G){G=this.cfg.extend(G);var ee=G.kdf.execute(z,$.keySize,$.ivSize);G.iv=ee.iv;var re=j.encrypt.call(this,$,Z,ee.key,G);return re.mixIn(ee),re},decrypt:function($,Z,z,G){G=this.cfg.extend(G),Z=this._parse(Z,G.format);var ee=G.kdf.execute(z,$.keySize,$.ivSize,Z.salt);G.iv=ee.iv;var re=j.decrypt.call(this,$,Z,ee.key,G);return re}})}()})}(bT)),bT.exports}var TT={exports:{}},LF;function cve(){return LF||(LF=1,function(e,t){(function(i,a,c){e.exports=a(_n(),Yi())})(wt,function(i){return i.mode.CFB=function(){var a=i.lib.BlockCipherMode.extend();a.Encryptor=a.extend({processBlock:function(u,d){var f=this._cipher,m=f.blockSize;c.call(this,u,d,m,f),this._prevBlock=u.slice(d,d+m)}}),a.Decryptor=a.extend({processBlock:function(u,d){var f=this._cipher,m=f.blockSize,g=u.slice(d,d+m);c.call(this,u,d,m,f),this._prevBlock=g}});function c(u,d,f,m){var g,_=this._iv;_?(g=_.slice(0),this._iv=void 0):g=this._prevBlock,m.encryptBlock(g,0);for(var S=0;S<f;S++)u[d+S]^=g[S]}return a}(),i.mode.CFB})}(TT)),TT.exports}var RT={exports:{}},MF;function lve(){return MF||(MF=1,function(e,t){(function(i,a,c){e.exports=a(_n(),Yi())})(wt,function(i){return i.mode.CTR=function(){var a=i.lib.BlockCipherMode.extend(),c=a.Encryptor=a.extend({processBlock:function(u,d){var f=this._cipher,m=f.blockSize,g=this._iv,_=this._counter;g&&(_=this._counter=g.slice(0),this._iv=void 0);var S=_.slice(0);f.encryptBlock(S,0),_[m-1]=_[m-1]+1|0;for(var b=0;b<m;b++)u[d+b]^=S[b]}});return a.Decryptor=c,a}(),i.mode.CTR})}(RT)),RT.exports}var IT={exports:{}},UF;function uve(){return UF||(UF=1,function(e,t){(function(i,a,c){e.exports=a(_n(),Yi())})(wt,function(i){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return i.mode.CTRGladman=function(){var a=i.lib.BlockCipherMode.extend();function c(f){if((f>>24&255)===255){var m=f>>16&255,g=f>>8&255,_=f&255;m===255?(m=0,g===255?(g=0,_===255?_=0:++_):++g):++m,f=0,f+=m<<16,f+=g<<8,f+=_}else f+=1<<24;return f}function u(f){return(f[0]=c(f[0]))===0&&(f[1]=c(f[1])),f}var d=a.Encryptor=a.extend({processBlock:function(f,m){var g=this._cipher,_=g.blockSize,S=this._iv,b=this._counter;S&&(b=this._counter=S.slice(0),this._iv=void 0),u(b);var A=b.slice(0);g.encryptBlock(A,0);for(var R=0;R<_;R++)f[m+R]^=A[R]}});return a.Decryptor=d,a}(),i.mode.CTRGladman})}(IT)),IT.exports}var wT={exports:{}},jF;function dve(){return jF||(jF=1,function(e,t){(function(i,a,c){e.exports=a(_n(),Yi())})(wt,function(i){return i.mode.OFB=function(){var a=i.lib.BlockCipherMode.extend(),c=a.Encryptor=a.extend({processBlock:function(u,d){var f=this._cipher,m=f.blockSize,g=this._iv,_=this._keystream;g&&(_=this._keystream=g.slice(0),this._iv=void 0),f.encryptBlock(_,0);for(var S=0;S<m;S++)u[d+S]^=_[S]}});return a.Decryptor=c,a}(),i.mode.OFB})}(wT)),wT.exports}var OT={exports:{}},FF;function hve(){return FF||(FF=1,function(e,t){(function(i,a,c){e.exports=a(_n(),Yi())})(wt,function(i){return i.mode.ECB=function(){var a=i.lib.BlockCipherMode.extend();return a.Encryptor=a.extend({processBlock:function(c,u){this._cipher.encryptBlock(c,u)}}),a.Decryptor=a.extend({processBlock:function(c,u){this._cipher.decryptBlock(c,u)}}),a}(),i.mode.ECB})}(OT)),OT.exports}var AT={exports:{}},VF;function pve(){return VF||(VF=1,function(e,t){(function(i,a,c){e.exports=a(_n(),Yi())})(wt,function(i){return i.pad.AnsiX923={pad:function(a,c){var u=a.sigBytes,d=c*4,f=d-u%d,m=u+f-1;a.clamp(),a.words[m>>>2]|=f<<24-m%4*8,a.sigBytes+=f},unpad:function(a){var c=a.words[a.sigBytes-1>>>2]&255;a.sigBytes-=c}},i.pad.Ansix923})}(AT)),AT.exports}var NT={exports:{}},BF;function fve(){return BF||(BF=1,function(e,t){(function(i,a,c){e.exports=a(_n(),Yi())})(wt,function(i){return i.pad.Iso10126={pad:function(a,c){var u=c*4,d=u-a.sigBytes%u;a.concat(i.lib.WordArray.random(d-1)).concat(i.lib.WordArray.create([d<<24],1))},unpad:function(a){var c=a.words[a.sigBytes-1>>>2]&255;a.sigBytes-=c}},i.pad.Iso10126})}(NT)),NT.exports}var xT={exports:{}},$F;function mve(){return $F||($F=1,function(e,t){(function(i,a,c){e.exports=a(_n(),Yi())})(wt,function(i){return i.pad.Iso97971={pad:function(a,c){a.concat(i.lib.WordArray.create([2147483648],1)),i.pad.ZeroPadding.pad(a,c)},unpad:function(a){i.pad.ZeroPadding.unpad(a),a.sigBytes--}},i.pad.Iso97971})}(xT)),xT.exports}var PT={exports:{}},HF;function gve(){return HF||(HF=1,function(e,t){(function(i,a,c){e.exports=a(_n(),Yi())})(wt,function(i){return i.pad.ZeroPadding={pad:function(a,c){var u=c*4;a.clamp(),a.sigBytes+=u-(a.sigBytes%u||u)},unpad:function(a){for(var c=a.words,u=a.sigBytes-1,u=a.sigBytes-1;u>=0;u--)if(c[u>>>2]>>>24-u%4*8&255){a.sigBytes=u+1;break}}},i.pad.ZeroPadding})}(PT)),PT.exports}var DT={exports:{}},WF;function vve(){return WF||(WF=1,function(e,t){(function(i,a,c){e.exports=a(_n(),Yi())})(wt,function(i){return i.pad.NoPadding={pad:function(){},unpad:function(){}},i.pad.NoPadding})}(DT)),DT.exports}var kT={exports:{}},GF;function Eve(){return GF||(GF=1,function(e,t){(function(i,a,c){e.exports=a(_n(),Yi())})(wt,function(i){return function(a){var c=i,u=c.lib,d=u.CipherParams,f=c.enc,m=f.Hex,g=c.format;g.Hex={stringify:function(_){return _.ciphertext.toString(m)},parse:function(_){var S=m.parse(_);return d.create({ciphertext:S})}}}(),i.format.Hex})}(kT)),kT.exports}var LT={exports:{}},zF;function _ve(){return zF||(zF=1,function(e,t){(function(i,a,c){e.exports=a(_n(),up(),dp(),Ju(),Yi())})(wt,function(i){return function(){var a=i,c=a.lib,u=c.BlockCipher,d=a.algo,f=[],m=[],g=[],_=[],S=[],b=[],A=[],R=[],w=[],D=[];(function(){for(var P=[],M=0;M<256;M++)M<128?P[M]=M<<1:P[M]=M<<1^283;for(var F=0,j=0,M=0;M<256;M++){var B=j^j<<1^j<<2^j<<3^j<<4;B=B>>>8^B&255^99,f[F]=B,m[B]=F;var H=P[F],K=P[H],$=P[K],Z=P[B]*257^B*16843008;g[F]=Z<<24|Z>>>8,_[F]=Z<<16|Z>>>16,S[F]=Z<<8|Z>>>24,b[F]=Z;var Z=$*16843009^K*65537^H*257^F*16843008;A[B]=Z<<24|Z>>>8,R[B]=Z<<16|Z>>>16,w[B]=Z<<8|Z>>>24,D[B]=Z,F?(F=H^P[P[P[$^H]]],j^=P[P[j]]):F=j=1}})();var x=[0,1,2,4,8,16,32,64,128,27,54],O=d.AES=u.extend({_doReset:function(){var P;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var M=this._keyPriorReset=this._key,F=M.words,j=M.sigBytes/4,B=this._nRounds=j+6,H=(B+1)*4,K=this._keySchedule=[],$=0;$<H;$++)$<j?K[$]=F[$]:(P=K[$-1],$%j?j>6&&$%j==4&&(P=f[P>>>24]<<24|f[P>>>16&255]<<16|f[P>>>8&255]<<8|f[P&255]):(P=P<<8|P>>>24,P=f[P>>>24]<<24|f[P>>>16&255]<<16|f[P>>>8&255]<<8|f[P&255],P^=x[$/j|0]<<24),K[$]=K[$-j]^P);for(var Z=this._invKeySchedule=[],z=0;z<H;z++){var $=H-z;if(z%4)var P=K[$];else var P=K[$-4];z<4||$<=4?Z[z]=P:Z[z]=A[f[P>>>24]]^R[f[P>>>16&255]]^w[f[P>>>8&255]]^D[f[P&255]]}}},encryptBlock:function(P,M){this._doCryptBlock(P,M,this._keySchedule,g,_,S,b,f)},decryptBlock:function(P,M){var F=P[M+1];P[M+1]=P[M+3],P[M+3]=F,this._doCryptBlock(P,M,this._invKeySchedule,A,R,w,D,m);var F=P[M+1];P[M+1]=P[M+3],P[M+3]=F},_doCryptBlock:function(P,M,F,j,B,H,K,$){for(var Z=this._nRounds,z=P[M]^F[0],G=P[M+1]^F[1],ee=P[M+2]^F[2],re=P[M+3]^F[3],oe=4,pe=1;pe<Z;pe++){var ue=j[z>>>24]^B[G>>>16&255]^H[ee>>>8&255]^K[re&255]^F[oe++],me=j[G>>>24]^B[ee>>>16&255]^H[re>>>8&255]^K[z&255]^F[oe++],fe=j[ee>>>24]^B[re>>>16&255]^H[z>>>8&255]^K[G&255]^F[oe++],se=j[re>>>24]^B[z>>>16&255]^H[G>>>8&255]^K[ee&255]^F[oe++];z=ue,G=me,ee=fe,re=se}var ue=($[z>>>24]<<24|$[G>>>16&255]<<16|$[ee>>>8&255]<<8|$[re&255])^F[oe++],me=($[G>>>24]<<24|$[ee>>>16&255]<<16|$[re>>>8&255]<<8|$[z&255])^F[oe++],fe=($[ee>>>24]<<24|$[re>>>16&255]<<16|$[z>>>8&255]<<8|$[G&255])^F[oe++],se=($[re>>>24]<<24|$[z>>>16&255]<<16|$[G>>>8&255]<<8|$[ee&255])^F[oe++];P[M]=ue,P[M+1]=me,P[M+2]=fe,P[M+3]=se},keySize:256/32});a.AES=u._createHelper(O)}(),i.AES})}(LT)),LT.exports}var MT={exports:{}},KF;function yve(){return KF||(KF=1,function(e,t){(function(i,a,c){e.exports=a(_n(),up(),dp(),Ju(),Yi())})(wt,function(i){return function(){var a=i,c=a.lib,u=c.WordArray,d=c.BlockCipher,f=a.algo,m=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],g=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],_=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],S=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],b=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],A=f.DES=d.extend({_doReset:function(){for(var x=this._key,O=x.words,P=[],M=0;M<56;M++){var F=m[M]-1;P[M]=O[F>>>5]>>>31-F%32&1}for(var j=this._subKeys=[],B=0;B<16;B++){for(var H=j[B]=[],K=_[B],M=0;M<24;M++)H[M/6|0]|=P[(g[M]-1+K)%28]<<31-M%6,H[4+(M/6|0)]|=P[28+(g[M+24]-1+K)%28]<<31-M%6;H[0]=H[0]<<1|H[0]>>>31;for(var M=1;M<7;M++)H[M]=H[M]>>>(M-1)*4+3;H[7]=H[7]<<5|H[7]>>>27}for(var $=this._invSubKeys=[],M=0;M<16;M++)$[M]=j[15-M]},encryptBlock:function(x,O){this._doCryptBlock(x,O,this._subKeys)},decryptBlock:function(x,O){this._doCryptBlock(x,O,this._invSubKeys)},_doCryptBlock:function(x,O,P){this._lBlock=x[O],this._rBlock=x[O+1],R.call(this,4,252645135),R.call(this,16,65535),w.call(this,2,858993459),w.call(this,8,16711935),R.call(this,1,1431655765);for(var M=0;M<16;M++){for(var F=P[M],j=this._lBlock,B=this._rBlock,H=0,K=0;K<8;K++)H|=S[K][((B^F[K])&b[K])>>>0];this._lBlock=B,this._rBlock=j^H}var $=this._lBlock;this._lBlock=this._rBlock,this._rBlock=$,R.call(this,1,1431655765),w.call(this,8,16711935),w.call(this,2,858993459),R.call(this,16,65535),R.call(this,4,252645135),x[O]=this._lBlock,x[O+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function R(x,O){var P=(this._lBlock>>>x^this._rBlock)&O;this._rBlock^=P,this._lBlock^=P<<x}function w(x,O){var P=(this._rBlock>>>x^this._lBlock)&O;this._lBlock^=P,this._rBlock^=P<<x}a.DES=d._createHelper(A);var D=f.TripleDES=d.extend({_doReset:function(){var x=this._key,O=x.words;if(O.length!==2&&O.length!==4&&O.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var P=O.slice(0,2),M=O.length<4?O.slice(0,2):O.slice(2,4),F=O.length<6?O.slice(0,2):O.slice(4,6);this._des1=A.createEncryptor(u.create(P)),this._des2=A.createEncryptor(u.create(M)),this._des3=A.createEncryptor(u.create(F))},encryptBlock:function(x,O){this._des1.encryptBlock(x,O),this._des2.decryptBlock(x,O),this._des3.encryptBlock(x,O)},decryptBlock:function(x,O){this._des3.decryptBlock(x,O),this._des2.encryptBlock(x,O),this._des1.decryptBlock(x,O)},keySize:192/32,ivSize:64/32,blockSize:64/32});a.TripleDES=d._createHelper(D)}(),i.TripleDES})}(MT)),MT.exports}var UT={exports:{}},YF;function Sve(){return YF||(YF=1,function(e,t){(function(i,a,c){e.exports=a(_n(),up(),dp(),Ju(),Yi())})(wt,function(i){return function(){var a=i,c=a.lib,u=c.StreamCipher,d=a.algo,f=d.RC4=u.extend({_doReset:function(){for(var _=this._key,S=_.words,b=_.sigBytes,A=this._S=[],R=0;R<256;R++)A[R]=R;for(var R=0,w=0;R<256;R++){var D=R%b,x=S[D>>>2]>>>24-D%4*8&255;w=(w+A[R]+x)%256;var O=A[R];A[R]=A[w],A[w]=O}this._i=this._j=0},_doProcessBlock:function(_,S){_[S]^=m.call(this)},keySize:256/32,ivSize:0});function m(){for(var _=this._S,S=this._i,b=this._j,A=0,R=0;R<4;R++){S=(S+1)%256,b=(b+_[S])%256;var w=_[S];_[S]=_[b],_[b]=w,A|=_[(_[S]+_[b])%256]<<24-R*8}return this._i=S,this._j=b,A}a.RC4=u._createHelper(f);var g=d.RC4Drop=f.extend({cfg:f.cfg.extend({drop:192}),_doReset:function(){f._doReset.call(this);for(var _=this.cfg.drop;_>0;_--)m.call(this)}});a.RC4Drop=u._createHelper(g)}(),i.RC4})}(UT)),UT.exports}var jT={exports:{}},qF;function Cve(){return qF||(qF=1,function(e,t){(function(i,a,c){e.exports=a(_n(),up(),dp(),Ju(),Yi())})(wt,function(i){return function(){var a=i,c=a.lib,u=c.StreamCipher,d=a.algo,f=[],m=[],g=[],_=d.Rabbit=u.extend({_doReset:function(){for(var b=this._key.words,A=this.cfg.iv,R=0;R<4;R++)b[R]=(b[R]<<8|b[R]>>>24)&16711935|(b[R]<<24|b[R]>>>8)&4278255360;var w=this._X=[b[0],b[3]<<16|b[2]>>>16,b[1],b[0]<<16|b[3]>>>16,b[2],b[1]<<16|b[0]>>>16,b[3],b[2]<<16|b[1]>>>16],D=this._C=[b[2]<<16|b[2]>>>16,b[0]&4294901760|b[1]&65535,b[3]<<16|b[3]>>>16,b[1]&4294901760|b[2]&65535,b[0]<<16|b[0]>>>16,b[2]&4294901760|b[3]&65535,b[1]<<16|b[1]>>>16,b[3]&4294901760|b[0]&65535];this._b=0;for(var R=0;R<4;R++)S.call(this);for(var R=0;R<8;R++)D[R]^=w[R+4&7];if(A){var x=A.words,O=x[0],P=x[1],M=(O<<8|O>>>24)&16711935|(O<<24|O>>>8)&4278255360,F=(P<<8|P>>>24)&16711935|(P<<24|P>>>8)&4278255360,j=M>>>16|F&4294901760,B=F<<16|M&65535;D[0]^=M,D[1]^=j,D[2]^=F,D[3]^=B,D[4]^=M,D[5]^=j,D[6]^=F,D[7]^=B;for(var R=0;R<4;R++)S.call(this)}},_doProcessBlock:function(b,A){var R=this._X;S.call(this),f[0]=R[0]^R[5]>>>16^R[3]<<16,f[1]=R[2]^R[7]>>>16^R[5]<<16,f[2]=R[4]^R[1]>>>16^R[7]<<16,f[3]=R[6]^R[3]>>>16^R[1]<<16;for(var w=0;w<4;w++)f[w]=(f[w]<<8|f[w]>>>24)&16711935|(f[w]<<24|f[w]>>>8)&4278255360,b[A+w]^=f[w]},blockSize:128/32,ivSize:64/32});function S(){for(var b=this._X,A=this._C,R=0;R<8;R++)m[R]=A[R];A[0]=A[0]+1295307597+this._b|0,A[1]=A[1]+3545052371+(A[0]>>>0<m[0]>>>0?1:0)|0,A[2]=A[2]+886263092+(A[1]>>>0<m[1]>>>0?1:0)|0,A[3]=A[3]+1295307597+(A[2]>>>0<m[2]>>>0?1:0)|0,A[4]=A[4]+3545052371+(A[3]>>>0<m[3]>>>0?1:0)|0,A[5]=A[5]+886263092+(A[4]>>>0<m[4]>>>0?1:0)|0,A[6]=A[6]+1295307597+(A[5]>>>0<m[5]>>>0?1:0)|0,A[7]=A[7]+3545052371+(A[6]>>>0<m[6]>>>0?1:0)|0,this._b=A[7]>>>0<m[7]>>>0?1:0;for(var R=0;R<8;R++){var w=b[R]+A[R],D=w&65535,x=w>>>16,O=((D*D>>>17)+D*x>>>15)+x*x,P=((w&4294901760)*w|0)+((w&65535)*w|0);g[R]=O^P}b[0]=g[0]+(g[7]<<16|g[7]>>>16)+(g[6]<<16|g[6]>>>16)|0,b[1]=g[1]+(g[0]<<8|g[0]>>>24)+g[7]|0,b[2]=g[2]+(g[1]<<16|g[1]>>>16)+(g[0]<<16|g[0]>>>16)|0,b[3]=g[3]+(g[2]<<8|g[2]>>>24)+g[1]|0,b[4]=g[4]+(g[3]<<16|g[3]>>>16)+(g[2]<<16|g[2]>>>16)|0,b[5]=g[5]+(g[4]<<8|g[4]>>>24)+g[3]|0,b[6]=g[6]+(g[5]<<16|g[5]>>>16)+(g[4]<<16|g[4]>>>16)|0,b[7]=g[7]+(g[6]<<8|g[6]>>>24)+g[5]|0}a.Rabbit=u._createHelper(_)}(),i.Rabbit})}(jT)),jT.exports}var FT={exports:{}},XF;function bve(){return XF||(XF=1,function(e,t){(function(i,a,c){e.exports=a(_n(),up(),dp(),Ju(),Yi())})(wt,function(i){return function(){var a=i,c=a.lib,u=c.StreamCipher,d=a.algo,f=[],m=[],g=[],_=d.RabbitLegacy=u.extend({_doReset:function(){var b=this._key.words,A=this.cfg.iv,R=this._X=[b[0],b[3]<<16|b[2]>>>16,b[1],b[0]<<16|b[3]>>>16,b[2],b[1]<<16|b[0]>>>16,b[3],b[2]<<16|b[1]>>>16],w=this._C=[b[2]<<16|b[2]>>>16,b[0]&4294901760|b[1]&65535,b[3]<<16|b[3]>>>16,b[1]&4294901760|b[2]&65535,b[0]<<16|b[0]>>>16,b[2]&4294901760|b[3]&65535,b[1]<<16|b[1]>>>16,b[3]&4294901760|b[0]&65535];this._b=0;for(var D=0;D<4;D++)S.call(this);for(var D=0;D<8;D++)w[D]^=R[D+4&7];if(A){var x=A.words,O=x[0],P=x[1],M=(O<<8|O>>>24)&16711935|(O<<24|O>>>8)&4278255360,F=(P<<8|P>>>24)&16711935|(P<<24|P>>>8)&4278255360,j=M>>>16|F&4294901760,B=F<<16|M&65535;w[0]^=M,w[1]^=j,w[2]^=F,w[3]^=B,w[4]^=M,w[5]^=j,w[6]^=F,w[7]^=B;for(var D=0;D<4;D++)S.call(this)}},_doProcessBlock:function(b,A){var R=this._X;S.call(this),f[0]=R[0]^R[5]>>>16^R[3]<<16,f[1]=R[2]^R[7]>>>16^R[5]<<16,f[2]=R[4]^R[1]>>>16^R[7]<<16,f[3]=R[6]^R[3]>>>16^R[1]<<16;for(var w=0;w<4;w++)f[w]=(f[w]<<8|f[w]>>>24)&16711935|(f[w]<<24|f[w]>>>8)&4278255360,b[A+w]^=f[w]},blockSize:128/32,ivSize:64/32});function S(){for(var b=this._X,A=this._C,R=0;R<8;R++)m[R]=A[R];A[0]=A[0]+1295307597+this._b|0,A[1]=A[1]+3545052371+(A[0]>>>0<m[0]>>>0?1:0)|0,A[2]=A[2]+886263092+(A[1]>>>0<m[1]>>>0?1:0)|0,A[3]=A[3]+1295307597+(A[2]>>>0<m[2]>>>0?1:0)|0,A[4]=A[4]+3545052371+(A[3]>>>0<m[3]>>>0?1:0)|0,A[5]=A[5]+886263092+(A[4]>>>0<m[4]>>>0?1:0)|0,A[6]=A[6]+1295307597+(A[5]>>>0<m[5]>>>0?1:0)|0,A[7]=A[7]+3545052371+(A[6]>>>0<m[6]>>>0?1:0)|0,this._b=A[7]>>>0<m[7]>>>0?1:0;for(var R=0;R<8;R++){var w=b[R]+A[R],D=w&65535,x=w>>>16,O=((D*D>>>17)+D*x>>>15)+x*x,P=((w&4294901760)*w|0)+((w&65535)*w|0);g[R]=O^P}b[0]=g[0]+(g[7]<<16|g[7]>>>16)+(g[6]<<16|g[6]>>>16)|0,b[1]=g[1]+(g[0]<<8|g[0]>>>24)+g[7]|0,b[2]=g[2]+(g[1]<<16|g[1]>>>16)+(g[0]<<16|g[0]>>>16)|0,b[3]=g[3]+(g[2]<<8|g[2]>>>24)+g[1]|0,b[4]=g[4]+(g[3]<<16|g[3]>>>16)+(g[2]<<16|g[2]>>>16)|0,b[5]=g[5]+(g[4]<<8|g[4]>>>24)+g[3]|0,b[6]=g[6]+(g[5]<<16|g[5]>>>16)+(g[4]<<16|g[4]>>>16)|0,b[7]=g[7]+(g[6]<<8|g[6]>>>24)+g[5]|0}a.RabbitLegacy=u._createHelper(_)}(),i.RabbitLegacy})}(FT)),FT.exports}(function(e,t){(function(i,a,c){e.exports=a(_n(),k_(),eve(),tve(),up(),nve(),dp(),sO(),K$(),rve(),Y$(),ive(),ove(),ave(),cO(),sve(),Ju(),Yi(),cve(),lve(),uve(),dve(),hve(),pve(),fve(),mve(),gve(),vve(),Eve(),_ve(),yve(),Sve(),Cve(),bve())})(wt,function(i){return i})})(z$);var Tve=z$.exports;const JF=Lc(Tve);let q$="U2FsdGVkX1/nIO3//tPu/+LNS4S4tsxT3MzmKKuvXDxFFYxlol+eYrZkKcLoUBHMNoDedcuF62hF/qfPSSy59Q==";const Rve=10;{const e=JF.AES.decrypt("U2FsdGVkX1/nIO3//tPu/+LNS4S4tsxT3MzmKKuvXDxFFYxlol+eYrZkKcLoUBHMNoDedcuF62hF/qfPSSy59Q==","U2FsdGVkX1/fp5K6GAphzVxz");q$=JSON.parse(e.toString(JF.enc.Utf8))}const at={appId:q$,channel:{}.AGORA_CHANNEL||"test",token:{}.AGORA_TOKEN?{}.AGORA_TOKEN:null,ShareScreenUID:Rve};function Ive(){return[{channel:{}.AGORA_CHANNEL_0||"test0",token:{}.AGORA_TOKEN_0},{channel:{}.AGORA_CHANNEL_1||"test1",token:{}.AGORA_TOKEN_1},{channel:{}.AGORA_CHANNEL_2||"test2",token:{}.AGORA_TOKEN_2},{channel:{}.AGORA_CHANNEL_3||"test3",token:{}.AGORA_TOKEN_3},{channel:{}.AGORA_CHANNEL_4||"test4",token:{}.AGORA_TOKEN_4},{channel:{}.AGORA_CHANNEL_5||"test5",token:{}.AGORA_TOKEN_5},{channel:{}.AGORA_CHANNEL_6||"test6",token:{}.AGORA_TOKEN_6},{channel:{}.AGORA_CHANNEL_7||"test7",token:{}.AGORA_TOKEN_7},{channel:{}.AGORA_CHANNEL_8||"test8",token:{}.AGORA_TOKEN_8},{channel:{}.AGORA_CHANNEL_9||"test9",token:{}.AGORA_TOKEN_9}]}const Rs=e=>{pF(String(e));const t=Kge();return pF(),t},Xs=()=>"https://www.agora.io/en/wp-content/uploads/2022/10/3d-spatial-audio-icon.svg";function L_({micOn:e,cameraOn:t,renderAction:i,renderLocalUser:a,renderRemoteUsers:c}){const u=qa(),d=N_()||0,f=y.useMemo(()=>Rs(d),[d]),m=y.useMemo(()=>Xs(),[]),g=As(),_=g.filter(R=>R.hasAudio||R.hasVideo),S=e||t,{localMicrophoneTrack:b}=op(e),{localCameraTrack:A}=ap(t);return Gl([b,A]),te.jsxs(te.Fragment,{children:[i?i():void 0,te.jsx(eO,{published:_.length+(S?1:0),total:g.length+1}),te.jsxs($a,{children:[u&&(a?a():te.jsx($a.Item,{children:te.jsx(Zw,{audioTrack:b,cameraOn:t,cover:m,micOn:e,videoTrack:A,children:te.jsx(kc,{children:`${f}{${d}}`})})})),c?c():void 0]})]})}const nv=({children:e,clientConfig:t={mode:"rtc",codec:"vp8"}})=>{const[i]=y.useState(()=>Rc.createClient(t));return te.jsx(M$,{client:i,children:e})},qo=({calling:e,micOn:t,cameraOn:i,setMic:a,setCamera:c,setCalling:u})=>te.jsx(te.Fragment,{children:te.jsxs("div",{className:"inset-0 top-a flex justify-center items-center gap-3 px-6 py-3 bg-#21242c c-coolgray-3",children:[te.jsxs("div",{className:"flex-1 flex top-0 left-0 h-full items-center gap-3 px-6 py-3",children:[a&&te.jsx("button",{className:"btn",onClick:()=>a(),children:t?te.jsx(pge,{}):te.jsx(fge,{})}),c&&te.jsx("button",{className:"btn",onClick:()=>c(),children:i?te.jsx(mge,{}):te.jsx(gge,{})})]}),u&&te.jsx("button",{className:zw("btn btn-phone",{"btn-phone-active":e}),onClick:()=>u(),children:e?te.jsx("i",{className:"i-mdi-phone-hangup"}):te.jsx("i",{className:"i-mdi-phone"})})]})}),wve=({screenShareOn:e,screenTrack:t,onCloseScreenShare:i})=>{const[a]=y.useState(()=>Rc.createClient({mode:"rtc",codec:"vp8"})),[c,u]=y.useState(null),[d,f]=y.useState(null);return li({appid:at.appId,channel:at.channel,token:at.token,uid:at.ShareScreenUID},e,a),y.useEffect(()=>{t?Array.isArray(t)?(u(t.filter(m=>m.trackMediaType==="video")[0]),f(t.filter(m=>m.trackMediaType==="audio")[0])):u(t):(f(null),u(null))},[t]),Gl([c,d],e,a),k$(c,"track-ended",()=>{console.log("screen sharing ended"),i&&i()}),te.jsxs(bge,{client:a,children:[e&&c&&te.jsx(Um,{disabled:!e,play:e,style:{width:"300px",height:"300px"},track:c}),d&&te.jsx(x_,{disabled:!e,track:d})]})},QF=e=>{let t;const i=new Set,a=(m,g)=>{const _=typeof m=="function"?m(t):m;if(!Object.is(_,t)){const S=t;t=g??typeof _!="object"?_:Object.assign({},t,_),i.forEach(b=>b(t,S))}},c=()=>t,f={setState:a,getState:c,subscribe:m=>(i.add(m),()=>i.delete(m)),destroy:()=>{i.clear()}};return t=e(a,c,f),f},Ove=e=>e?QF(e):QF;var X$={exports:{}},J$={},Q$={exports:{}},Z$={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $h=y;function Ave(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Nve=typeof Object.is=="function"?Object.is:Ave,xve=$h.useState,Pve=$h.useEffect,Dve=$h.useLayoutEffect,kve=$h.useDebugValue;function Lve(e,t){var i=t(),a=xve({inst:{value:i,getSnapshot:t}}),c=a[0].inst,u=a[1];return Dve(function(){c.value=i,c.getSnapshot=t,VT(c)&&u({inst:c})},[e,i,t]),Pve(function(){return VT(c)&&u({inst:c}),e(function(){VT(c)&&u({inst:c})})},[e]),kve(i),i}function VT(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!Nve(e,i)}catch{return!0}}function Mve(e,t){return t()}var Uve=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Mve:Lve;Z$.useSyncExternalStore=$h.useSyncExternalStore!==void 0?$h.useSyncExternalStore:Uve;Q$.exports=Z$;var jve=Q$.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M_=y,Fve=jve;function Vve(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Bve=typeof Object.is=="function"?Object.is:Vve,$ve=Fve.useSyncExternalStore,Hve=M_.useRef,Wve=M_.useEffect,Gve=M_.useMemo,zve=M_.useDebugValue;J$.useSyncExternalStoreWithSelector=function(e,t,i,a,c){var u=Hve(null);if(u.current===null){var d={hasValue:!1,value:null};u.current=d}else d=u.current;u=Gve(function(){function m(A){if(!g){if(g=!0,_=A,A=a(A),c!==void 0&&d.hasValue){var R=d.value;if(c(R,A))return S=R}return S=A}if(R=S,Bve(_,A))return R;var w=a(A);return c!==void 0&&c(R,w)?R:(_=A,S=w)}var g=!1,_,S,b=i===void 0?null:i;return[function(){return m(t())},b===null?void 0:function(){return m(b())}]},[t,i,a,c]);var f=$ve(e,u[0],u[1]);return Wve(function(){d.hasValue=!0,d.value=f},[f]),zve(f),f};X$.exports=J$;var Kve=X$.exports;const Yve=Lc(Kve),{useSyncExternalStoreWithSelector:qve}=Yve;function Xve(e,t=e.getState,i){const a=qve(e.subscribe,e.getState,e.getServerState||e.getState,t,i);return y.useDebugValue(a),a}const ZF=e=>{const t=typeof e=="function"?Ove(e):e,i=(a,c)=>Xve(t,a,c);return Object.assign(i,t),i},Jve=e=>e?ZF(e):ZF,Qve=at.appId,Zve=Ive(),Bf=Jve((e,t)=>({getRooms:()=>{let{rooms:i}=t();i=Zve.map(({token:a,channel:c})=>{const u=Rc.createClient({mode:"live",codec:"vp8"});return u.join(Qve,c,a||null,null),{channel:c,token:a,client:u}}),e({rooms:i})},selectChannel:async i=>{let{hostRoom:a,localTracks:c}=t();const{rooms:u}=t();if(!i){a&&(c&&a.client.localTracks.length>0&&await a.client.unpublish(c),a.client.setClientRole("audience"),a=null,e({hostRoom:a,localTracks:c}));return}if(a){if(a.client.channelName===i)return;c&&await a.client.unpublish(c),await a.client.setClientRole("audience")}a=u==null?void 0:u.find(d=>d.client.channelName===i),a&&(await a.client.setClientRole("host"),c||(c=await Rc.createMicrophoneAndCameraTracks()),await a.client.publish(c)),e({localTracks:c,hostRoom:a})},dispose:()=>{const{rooms:i,hostRoom:a}=t();if(a==null||a.client.leave(),i)for(const c of i)c.client.leave()}}));var eEe=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function tEe(e){var t=e.defaultInputValue,i=t===void 0?"":t,a=e.defaultMenuIsOpen,c=a===void 0?!1:a,u=e.defaultValue,d=u===void 0?null:u,f=e.inputValue,m=e.menuIsOpen,g=e.onChange,_=e.onInputChange,S=e.onMenuClose,b=e.onMenuOpen,A=e.value,R=fn(e,eEe),w=y.useState(f!==void 0?f:i),D=Pe(w,2),x=D[0],O=D[1],P=y.useState(m!==void 0?m:c),M=Pe(P,2),F=M[0],j=M[1],B=y.useState(A!==void 0?A:d),H=Pe(B,2),K=H[0],$=H[1],Z=y.useCallback(function(ue,me){typeof g=="function"&&g(ue,me),$(ue)},[g]),z=y.useCallback(function(ue,me){var fe;typeof _=="function"&&(fe=_(ue,me)),O(fe!==void 0?fe:ue)},[_]),G=y.useCallback(function(){typeof b=="function"&&b(),j(!0)},[b]),ee=y.useCallback(function(){typeof S=="function"&&S(),j(!1)},[S]),re=f!==void 0?f:x,oe=m!==void 0?m:F,pe=A!==void 0?A:K;return Ee(Ee({},R),{},{inputValue:re,menuIsOpen:oe,onChange:Z,onInputChange:z,onMenuClose:ee,onMenuOpen:G,value:pe})}function nEe(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function rEe(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var iEe=function(){function e(i){var a=this;this._insertTag=function(c){var u;a.tags.length===0?a.insertionPoint?u=a.insertionPoint.nextSibling:a.prepend?u=a.container.firstChild:u=a.before:u=a.tags[a.tags.length-1].nextSibling,a.container.insertBefore(c,u),a.tags.push(c)},this.isSpeedy=i.speedy===void 0?!0:i.speedy,this.tags=[],this.ctr=0,this.nonce=i.nonce,this.key=i.key,this.container=i.container,this.prepend=i.prepend,this.insertionPoint=i.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(a){a.forEach(this._insertTag)},t.insert=function(a){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(rEe(this));var c=this.tags[this.tags.length-1];if(this.isSpeedy){var u=nEe(c);try{u.insertRule(a,u.cssRules.length)}catch{}}else c.appendChild(document.createTextNode(a));this.ctr++},t.flush=function(){this.tags.forEach(function(a){return a.parentNode&&a.parentNode.removeChild(a)}),this.tags=[],this.ctr=0},e}(),so="-ms-",wE="-moz-",wn="-webkit-",eH="comm",lO="rule",uO="decl",oEe="@import",tH="@keyframes",aEe="@layer",sEe=Math.abs,U_=String.fromCharCode,cEe=Object.assign;function lEe(e,t){return Bi(e,0)^45?(((t<<2^Bi(e,0))<<2^Bi(e,1))<<2^Bi(e,2))<<2^Bi(e,3):0}function nH(e){return e.trim()}function uEe(e,t){return(e=t.exec(e))?e[0]:e}function On(e,t,i){return e.replace(t,i)}function Y1(e,t){return e.indexOf(t)}function Bi(e,t){return e.charCodeAt(t)|0}function mm(e,t,i){return e.slice(t,i)}function Ws(e){return e.length}function dO(e){return e.length}function rv(e,t){return t.push(e),e}function dEe(e,t){return e.map(t).join("")}var j_=1,Hh=1,rH=0,Ko=0,ai=0,hp="";function F_(e,t,i,a,c,u,d){return{value:e,root:t,parent:i,type:a,props:c,children:u,line:j_,column:Hh,length:d,return:""}}function hf(e,t){return cEe(F_("",null,null,"",null,null,0),e,{length:-e.length},t)}function hEe(){return ai}function pEe(){return ai=Ko>0?Bi(hp,--Ko):0,Hh--,ai===10&&(Hh=1,j_--),ai}function Ea(){return ai=Ko<rH?Bi(hp,Ko++):0,Hh++,ai===10&&(Hh=1,j_++),ai}function qs(){return Bi(hp,Ko)}function Nv(){return Ko}function Fm(e,t){return mm(hp,e,t)}function gm(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function iH(e){return j_=Hh=1,rH=Ws(hp=e),Ko=0,[]}function oH(e){return hp="",e}function xv(e){return nH(Fm(Ko-1,q1(e===91?e+2:e===40?e+1:e)))}function fEe(e){for(;(ai=qs())&&ai<33;)Ea();return gm(e)>2||gm(ai)>3?"":" "}function mEe(e,t){for(;--t&&Ea()&&!(ai<48||ai>102||ai>57&&ai<65||ai>70&&ai<97););return Fm(e,Nv()+(t<6&&qs()==32&&Ea()==32))}function q1(e){for(;Ea();)switch(ai){case e:return Ko;case 34:case 39:e!==34&&e!==39&&q1(ai);break;case 40:e===41&&q1(e);break;case 92:Ea();break}return Ko}function gEe(e,t){for(;Ea()&&e+ai!==47+10;)if(e+ai===42+42&&qs()===47)break;return"/*"+Fm(t,Ko-1)+"*"+U_(e===47?e:Ea())}function vEe(e){for(;!gm(qs());)Ea();return Fm(e,Ko)}function EEe(e){return oH(Pv("",null,null,null,[""],e=iH(e),0,[0],e))}function Pv(e,t,i,a,c,u,d,f,m){for(var g=0,_=0,S=d,b=0,A=0,R=0,w=1,D=1,x=1,O=0,P="",M=c,F=u,j=a,B=P;D;)switch(R=O,O=Ea()){case 40:if(R!=108&&Bi(B,S-1)==58){Y1(B+=On(xv(O),"&","&\f"),"&\f")!=-1&&(x=-1);break}case 34:case 39:case 91:B+=xv(O);break;case 9:case 10:case 13:case 32:B+=fEe(R);break;case 92:B+=mEe(Nv()-1,7);continue;case 47:switch(qs()){case 42:case 47:rv(_Ee(gEe(Ea(),Nv()),t,i),m);break;default:B+="/"}break;case 123*w:f[g++]=Ws(B)*x;case 125*w:case 59:case 0:switch(O){case 0:case 125:D=0;case 59+_:x==-1&&(B=On(B,/\f/g,"")),A>0&&Ws(B)-S&&rv(A>32?tV(B+";",a,i,S-1):tV(On(B," ","")+";",a,i,S-2),m);break;case 59:B+=";";default:if(rv(j=eV(B,t,i,g,_,c,f,P,M=[],F=[],S),u),O===123)if(_===0)Pv(B,t,j,j,M,u,S,f,F);else switch(b===99&&Bi(B,3)===110?100:b){case 100:case 108:case 109:case 115:Pv(e,j,j,a&&rv(eV(e,j,j,0,0,c,f,P,c,M=[],S),F),c,F,S,f,a?M:F);break;default:Pv(B,j,j,j,[""],F,0,f,F)}}g=_=A=0,w=x=1,P=B="",S=d;break;case 58:S=1+Ws(B),A=R;default:if(w<1){if(O==123)--w;else if(O==125&&w++==0&&pEe()==125)continue}switch(B+=U_(O),O*w){case 38:x=_>0?1:(B+="\f",-1);break;case 44:f[g++]=(Ws(B)-1)*x,x=1;break;case 64:qs()===45&&(B+=xv(Ea())),b=qs(),_=S=Ws(P=B+=vEe(Nv())),O++;break;case 45:R===45&&Ws(B)==2&&(w=0)}}return u}function eV(e,t,i,a,c,u,d,f,m,g,_){for(var S=c-1,b=c===0?u:[""],A=dO(b),R=0,w=0,D=0;R<a;++R)for(var x=0,O=mm(e,S+1,S=sEe(w=d[R])),P=e;x<A;++x)(P=nH(w>0?b[x]+" "+O:On(O,/&\f/g,b[x])))&&(m[D++]=P);return F_(e,t,i,c===0?lO:f,m,g,_)}function _Ee(e,t,i){return F_(e,t,i,eH,U_(hEe()),mm(e,2,-2),0)}function tV(e,t,i,a){return F_(e,t,i,uO,mm(e,0,a),mm(e,a+1,-1),a)}function Nh(e,t){for(var i="",a=dO(e),c=0;c<a;c++)i+=t(e[c],c,e,t)||"";return i}function yEe(e,t,i,a){switch(e.type){case aEe:if(e.children.length)break;case oEe:case uO:return e.return=e.return||e.value;case eH:return"";case tH:return e.return=e.value+"{"+Nh(e.children,a)+"}";case lO:e.value=e.props.join(",")}return Ws(i=Nh(e.children,a))?e.return=e.value+"{"+i+"}":""}function SEe(e){var t=dO(e);return function(i,a,c,u){for(var d="",f=0;f<t;f++)d+=e[f](i,a,c,u)||"";return d}}function CEe(e){return function(t){t.root||(t=t.return)&&e(t)}}function bEe(e){var t=Object.create(null);return function(i){return t[i]===void 0&&(t[i]=e(i)),t[i]}}var TEe=function(t,i,a){for(var c=0,u=0;c=u,u=qs(),c===38&&u===12&&(i[a]=1),!gm(u);)Ea();return Fm(t,Ko)},REe=function(t,i){var a=-1,c=44;do switch(gm(c)){case 0:c===38&&qs()===12&&(i[a]=1),t[a]+=TEe(Ko-1,i,a);break;case 2:t[a]+=xv(c);break;case 4:if(c===44){t[++a]=qs()===58?"&\f":"",i[a]=t[a].length;break}default:t[a]+=U_(c)}while(c=Ea());return t},IEe=function(t,i){return oH(REe(iH(t),i))},nV=new WeakMap,wEe=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var i=t.value,a=t.parent,c=t.column===a.column&&t.line===a.line;a.type!=="rule";)if(a=a.parent,!a)return;if(!(t.props.length===1&&i.charCodeAt(0)!==58&&!nV.get(a))&&!c){nV.set(t,!0);for(var u=[],d=IEe(i,u),f=a.props,m=0,g=0;m<d.length;m++)for(var _=0;_<f.length;_++,g++)t.props[g]=u[m]?d[m].replace(/&\f/g,f[_]):f[_]+" "+d[m]}}},OEe=function(t){if(t.type==="decl"){var i=t.value;i.charCodeAt(0)===108&&i.charCodeAt(2)===98&&(t.return="",t.value="")}};function aH(e,t){switch(lEe(e,t)){case 5103:return wn+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return wn+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return wn+e+wE+e+so+e+e;case 6828:case 4268:return wn+e+so+e+e;case 6165:return wn+e+so+"flex-"+e+e;case 5187:return wn+e+On(e,/(\w+).+(:[^]+)/,wn+"box-$1$2"+so+"flex-$1$2")+e;case 5443:return wn+e+so+"flex-item-"+On(e,/flex-|-self/,"")+e;case 4675:return wn+e+so+"flex-line-pack"+On(e,/align-content|flex-|-self/,"")+e;case 5548:return wn+e+so+On(e,"shrink","negative")+e;case 5292:return wn+e+so+On(e,"basis","preferred-size")+e;case 6060:return wn+"box-"+On(e,"-grow","")+wn+e+so+On(e,"grow","positive")+e;case 4554:return wn+On(e,/([^-])(transform)/g,"$1"+wn+"$2")+e;case 6187:return On(On(On(e,/(zoom-|grab)/,wn+"$1"),/(image-set)/,wn+"$1"),e,"")+e;case 5495:case 3959:return On(e,/(image-set\([^]*)/,wn+"$1$`$1");case 4968:return On(On(e,/(.+:)(flex-)?(.*)/,wn+"box-pack:$3"+so+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+wn+e+e;case 4095:case 3583:case 4068:case 2532:return On(e,/(.+)-inline(.+)/,wn+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Ws(e)-1-t>6)switch(Bi(e,t+1)){case 109:if(Bi(e,t+4)!==45)break;case 102:return On(e,/(.+:)(.+)-([^]+)/,"$1"+wn+"$2-$3$1"+wE+(Bi(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~Y1(e,"stretch")?aH(On(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(Bi(e,t+1)!==115)break;case 6444:switch(Bi(e,Ws(e)-3-(~Y1(e,"!important")&&10))){case 107:return On(e,":",":"+wn)+e;case 101:return On(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+wn+(Bi(e,14)===45?"inline-":"")+"box$3$1"+wn+"$2$3$1"+so+"$2box$3")+e}break;case 5936:switch(Bi(e,t+11)){case 114:return wn+e+so+On(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return wn+e+so+On(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return wn+e+so+On(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return wn+e+so+e+e}return e}var AEe=function(t,i,a,c){if(t.length>-1&&!t.return)switch(t.type){case uO:t.return=aH(t.value,t.length);break;case tH:return Nh([hf(t,{value:On(t.value,"@","@"+wn)})],c);case lO:if(t.length)return dEe(t.props,function(u){switch(uEe(u,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Nh([hf(t,{props:[On(u,/:(read-\w+)/,":"+wE+"$1")]})],c);case"::placeholder":return Nh([hf(t,{props:[On(u,/:(plac\w+)/,":"+wn+"input-$1")]}),hf(t,{props:[On(u,/:(plac\w+)/,":"+wE+"$1")]}),hf(t,{props:[On(u,/:(plac\w+)/,so+"input-$1")]})],c)}return""})}},NEe=[AEe],xEe=function(t){var i=t.key;if(i==="css"){var a=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(a,function(w){var D=w.getAttribute("data-emotion");D.indexOf(" ")!==-1&&(document.head.appendChild(w),w.setAttribute("data-s",""))})}var c=t.stylisPlugins||NEe,u={},d,f=[];d=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+i+' "]'),function(w){for(var D=w.getAttribute("data-emotion").split(" "),x=1;x<D.length;x++)u[D[x]]=!0;f.push(w)});var m,g=[wEe,OEe];{var _,S=[yEe,CEe(function(w){_.insert(w)})],b=SEe(g.concat(c,S)),A=function(D){return Nh(EEe(D),b)};m=function(D,x,O,P){_=O,A(D?D+"{"+x.styles+"}":x.styles),P&&(R.inserted[x.name]=!0)}}var R={key:i,sheet:new iEe({key:i,container:d,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:u,registered:{},insert:m};return R.sheet.hydrate(f),R},sH=ZI,PEe={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},DEe={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},cH={};cH[sH.ForwardRef]=PEe;cH[sH.Memo]=DEe;var kEe=!0;function LEe(e,t,i){var a="";return i.split(" ").forEach(function(c){e[c]!==void 0?t.push(e[c]+";"):a+=c+" "}),a}var lH=function(t,i,a){var c=t.key+"-"+i.name;(a===!1||kEe===!1)&&t.registered[c]===void 0&&(t.registered[c]=i.styles)},MEe=function(t,i,a){lH(t,i,a);var c=t.key+"-"+i.name;if(t.inserted[i.name]===void 0){var u=i;do t.insert(i===u?"."+c:"",u,t.sheet,!0),u=u.next;while(u!==void 0)}};function UEe(e){for(var t=0,i,a=0,c=e.length;c>=4;++a,c-=4)i=e.charCodeAt(a)&255|(e.charCodeAt(++a)&255)<<8|(e.charCodeAt(++a)&255)<<16|(e.charCodeAt(++a)&255)<<24,i=(i&65535)*1540483477+((i>>>16)*59797<<16),i^=i>>>24,t=(i&65535)*1540483477+((i>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(c){case 3:t^=(e.charCodeAt(a+2)&255)<<16;case 2:t^=(e.charCodeAt(a+1)&255)<<8;case 1:t^=e.charCodeAt(a)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var jEe={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},FEe=/[A-Z]|^ms/g,VEe=/_EMO_([^_]+?)_([^]*?)_EMO_/g,uH=function(t){return t.charCodeAt(1)===45},rV=function(t){return t!=null&&typeof t!="boolean"},BT=bEe(function(e){return uH(e)?e:e.replace(FEe,"-$&").toLowerCase()}),iV=function(t,i){switch(t){case"animation":case"animationName":if(typeof i=="string")return i.replace(VEe,function(a,c,u){return Gs={name:c,styles:u,next:Gs},c})}return jEe[t]!==1&&!uH(t)&&typeof i=="number"&&i!==0?i+"px":i};function vm(e,t,i){if(i==null)return"";if(i.__emotion_styles!==void 0)return i;switch(typeof i){case"boolean":return"";case"object":{if(i.anim===1)return Gs={name:i.name,styles:i.styles,next:Gs},i.name;if(i.styles!==void 0){var a=i.next;if(a!==void 0)for(;a!==void 0;)Gs={name:a.name,styles:a.styles,next:Gs},a=a.next;var c=i.styles+";";return c}return BEe(e,t,i)}case"function":{if(e!==void 0){var u=Gs,d=i(e);return Gs=u,vm(e,t,d)}break}}if(t==null)return i;var f=t[i];return f!==void 0?f:i}function BEe(e,t,i){var a="";if(Array.isArray(i))for(var c=0;c<i.length;c++)a+=vm(e,t,i[c])+";";else for(var u in i){var d=i[u];if(typeof d!="object")t!=null&&t[d]!==void 0?a+=u+"{"+t[d]+"}":rV(d)&&(a+=BT(u)+":"+iV(u,d)+";");else if(Array.isArray(d)&&typeof d[0]=="string"&&(t==null||t[d[0]]===void 0))for(var f=0;f<d.length;f++)rV(d[f])&&(a+=BT(u)+":"+iV(u,d[f])+";");else{var m=vm(e,t,d);switch(u){case"animation":case"animationName":{a+=BT(u)+":"+m+";";break}default:a+=u+"{"+m+"}"}}}return a}var oV=/label:\s*([^\s;\n{]+)\s*(;|$)/g,Gs,dH=function(t,i,a){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var c=!0,u="";Gs=void 0;var d=t[0];d==null||d.raw===void 0?(c=!1,u+=vm(a,i,d)):u+=d[0];for(var f=1;f<t.length;f++)u+=vm(a,i,t[f]),c&&(u+=d[f]);oV.lastIndex=0;for(var m="",g;(g=oV.exec(u))!==null;)m+="-"+g[1];var _=UEe(u)+m;return{name:_,styles:u,next:Gs}},$Ee=function(t){return t()},HEe=xh["useInsertionEffect"]?xh["useInsertionEffect"]:!1,WEe=HEe||$Ee,hO={}.hasOwnProperty,hH=y.createContext(typeof HTMLElement<"u"?xEe({key:"css"}):null);hH.Provider;var GEe=function(t){return y.forwardRef(function(i,a){var c=y.useContext(hH);return t(i,c,a)})},zEe=y.createContext({}),X1="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",KEe=function(t,i){var a={};for(var c in i)hO.call(i,c)&&(a[c]=i[c]);return a[X1]=t,a},YEe=function(t){var i=t.cache,a=t.serialized,c=t.isStringTag;return lH(i,a,c),WEe(function(){return MEe(i,a,c)}),null},qEe=GEe(function(e,t,i){var a=e.css;typeof a=="string"&&t.registered[a]!==void 0&&(a=t.registered[a]);var c=e[X1],u=[a],d="";typeof e.className=="string"?d=LEe(t.registered,u,e.className):e.className!=null&&(d=e.className+" ");var f=dH(u,void 0,y.useContext(zEe));d+=t.key+"-"+f.name;var m={};for(var g in e)hO.call(e,g)&&g!=="css"&&g!==X1&&(m[g]=e[g]);return m.ref=i,m.className=d,y.createElement(y.Fragment,null,y.createElement(YEe,{cache:t,serialized:f,isStringTag:typeof c=="string"}),y.createElement(c,m))}),XEe=qEe,At=function(t,i){var a=arguments;if(i==null||!hO.call(i,"css"))return y.createElement.apply(void 0,a);var c=a.length,u=new Array(c);u[0]=XEe,u[1]=KEe(t,i);for(var d=2;d<c;d++)u[d]=a[d];return y.createElement.apply(null,u)};function pO(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return dH(t)}var JEe=function(){var t=pO.apply(void 0,arguments),i="animation-"+t.name;return{name:i,styles:"@keyframes "+i+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};function QEe(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function ZEe(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}const e_e=["top","right","bottom","left"];e_e.reduce((e,t)=>e.concat(t,t+"-start",t+"-end"),[]);function Es(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function pH(e){return Es(e).getComputedStyle(e)}function fH(e){return e instanceof Es(e).Node}function mH(e){return fH(e)?(e.nodeName||"").toLowerCase():"#document"}function fO(e){return e instanceof Es(e).HTMLElement}function aV(e){return typeof ShadowRoot<"u"&&(e instanceof Es(e).ShadowRoot||e instanceof ShadowRoot)}function gH(e){const{overflow:t,overflowX:i,overflowY:a,display:c}=pH(e);return/auto|scroll|overlay|hidden|clip/.test(t+a+i)&&!["inline","contents"].includes(c)}function t_e(){return!(typeof CSS>"u"||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function n_e(e){return["html","body","#document"].includes(mH(e))}const r_e=Math.min,i_e=Math.max,OE=Math.round,iv=Math.floor,AE=e=>({x:e,y:e});function o_e(e){const t=pH(e);let i=parseFloat(t.width)||0,a=parseFloat(t.height)||0;const c=fO(e),u=c?e.offsetWidth:i,d=c?e.offsetHeight:a,f=OE(i)!==u||OE(a)!==d;return f&&(i=u,a=d),{width:i,height:a,$:f}}function J1(e){return e instanceof Es(e).Element}function mO(e){return J1(e)?e:e.contextElement}function $T(e){const t=mO(e);if(!fO(t))return AE(1);const i=t.getBoundingClientRect(),{width:a,height:c,$:u}=o_e(t);let d=(u?OE(i.width):i.width)/a,f=(u?OE(i.height):i.height)/c;return d&&Number.isFinite(d)||(d=1),f&&Number.isFinite(f)||(f=1),{x:d,y:f}}const a_e=AE(0);function s_e(e){const t=Es(e);return t_e()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:a_e}function sV(e,t,i,a){t===void 0&&(t=!1),i===void 0&&(i=!1);const c=e.getBoundingClientRect(),u=mO(e);let d=AE(1);t&&(a?J1(a)&&(d=$T(a)):d=$T(e));const f=function(b,A,R){return A===void 0&&(A=!1),!(!R||A&&R!==Es(b))&&A}(u,i,a)?s_e(u):AE(0);let m=(c.left+f.x)/d.x,g=(c.top+f.y)/d.y,_=c.width/d.x,S=c.height/d.y;if(u){const b=Es(u),A=a&&J1(a)?Es(a):a;let R=b.frameElement;for(;R&&a&&A!==b;){const w=$T(R),D=R.getBoundingClientRect(),x=getComputedStyle(R),O=D.left+(R.clientLeft+parseFloat(x.paddingLeft))*w.x,P=D.top+(R.clientTop+parseFloat(x.paddingTop))*w.y;m*=w.x,g*=w.y,_*=w.x,S*=w.y,m+=O,g+=P,R=Es(R).frameElement}}return ZEe({width:_,height:S,x:m,y:g})}function vH(e){return((fH(e)?e.ownerDocument:e.document)||window.document).documentElement}function c_e(e){if(mH(e)==="html")return e;const t=e.assignedSlot||e.parentNode||aV(e)&&e.host||vH(e);return aV(t)?t.host:t}function EH(e){const t=c_e(e);return n_e(t)?e.ownerDocument?e.ownerDocument.body:e.body:fO(t)&&gH(t)?t:EH(t)}function Q1(e,t){var i;t===void 0&&(t=[]);const a=EH(e),c=a===((i=e.ownerDocument)==null?void 0:i.body),u=Es(a);return c?t.concat(u,u.visualViewport||[],gH(a)?a:[]):t.concat(a,Q1(a))}function l_e(e,t,i,a){a===void 0&&(a={});const{ancestorScroll:c=!0,ancestorResize:u=!0,elementResize:d=typeof ResizeObserver=="function",layoutShift:f=typeof IntersectionObserver=="function",animationFrame:m=!1}=a,g=mO(e),_=c||u?[...g?Q1(g):[],...Q1(t)]:[];_.forEach(D=>{c&&D.addEventListener("scroll",i,{passive:!0}),u&&D.addEventListener("resize",i)});const S=g&&f?function(D,x){let O,P=null;const M=vH(D);function F(){clearTimeout(O),P&&P.disconnect(),P=null}return function j(B,H){B===void 0&&(B=!1),H===void 0&&(H=1),F();const{left:K,top:$,width:Z,height:z}=D.getBoundingClientRect();if(B||x(),!Z||!z)return;const G={rootMargin:-iv($)+"px "+-iv(M.clientWidth-(K+Z))+"px "+-iv(M.clientHeight-($+z))+"px "+-iv(K)+"px",threshold:i_e(0,r_e(1,H))||1};let ee=!0;function re(oe){const pe=oe[0].intersectionRatio;if(pe!==H){if(!ee)return j();pe?j(!1,pe):O=setTimeout(()=>{j(!1,1e-7)},100)}ee=!1}try{P=new IntersectionObserver(re,{...G,root:M.ownerDocument})}catch{P=new IntersectionObserver(re,G)}P.observe(D)}(!0),F}(g,i):null;let b,A=-1,R=null;d&&(R=new ResizeObserver(D=>{let[x]=D;x&&x.target===g&&R&&(R.unobserve(t),cancelAnimationFrame(A),A=requestAnimationFrame(()=>{R&&R.observe(t)})),i()}),g&&!m&&R.observe(g),R.observe(t));let w=m?sV(e):null;return m&&function D(){const x=sV(e);!w||x.x===w.x&&x.y===w.y&&x.width===w.width&&x.height===w.height||i(),w=x,b=requestAnimationFrame(D)}(),i(),()=>{_.forEach(D=>{c&&D.removeEventListener("scroll",i),u&&D.removeEventListener("resize",i)}),S&&S(),R&&R.disconnect(),R=null,m&&cancelAnimationFrame(b)}}var Z1=y.useLayoutEffect,u_e=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],NE=function(){};function d_e(e,t){return t?t[0]==="-"?e+t:e+"__"+t:e}function h_e(e,t){for(var i=arguments.length,a=new Array(i>2?i-2:0),c=2;c<i;c++)a[c-2]=arguments[c];var u=[].concat(a);if(t&&e)for(var d in t)t.hasOwnProperty(d)&&t[d]&&u.push("".concat(d_e(e,d)));return u.filter(function(f){return f}).map(function(f){return String(f).trim()}).join(" ")}var cV=function(t){return S_e(t)?t.filter(Boolean):jn(t)==="object"&&t!==null?[t]:[]},_H=function(t){t.className,t.clearValue,t.cx,t.getStyles,t.getClassNames,t.getValue,t.hasValue,t.isMulti,t.isRtl,t.options,t.selectOption,t.selectProps,t.setValue,t.theme;var i=fn(t,u_e);return Ee({},i)},Ur=function(t,i,a){var c=t.cx,u=t.getStyles,d=t.getClassNames,f=t.className;return{css:u(i,t),className:c(a??{},d(i,t),f)}};function V_(e){return[document.documentElement,document.body,window].indexOf(e)>-1}function p_e(e){return V_(e)?window.innerHeight:e.clientHeight}function yH(e){return V_(e)?window.pageYOffset:e.scrollTop}function xE(e,t){if(V_(e)){window.scrollTo(0,t);return}e.scrollTop=t}function f_e(e){var t=getComputedStyle(e),i=t.position==="absolute",a=/(auto|scroll)/;if(t.position==="fixed")return document.documentElement;for(var c=e;c=c.parentElement;)if(t=getComputedStyle(c),!(i&&t.position==="static")&&a.test(t.overflow+t.overflowY+t.overflowX))return c;return document.documentElement}function m_e(e,t,i,a){return i*((e=e/a-1)*e*e+1)+t}function ov(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:NE,c=yH(e),u=t-c,d=10,f=0;function m(){f+=d;var g=m_e(f,c,u,i);xE(e,g),f<i?window.requestAnimationFrame(m):a(e)}m()}function lV(e,t){var i=e.getBoundingClientRect(),a=t.getBoundingClientRect(),c=t.offsetHeight/3;a.bottom+c>i.bottom?xE(e,Math.min(t.offsetTop+t.clientHeight-e.offsetHeight+c,e.scrollHeight)):a.top-c<i.top&&xE(e,Math.max(t.offsetTop-c,0))}function g_e(e){var t=e.getBoundingClientRect();return{bottom:t.bottom,height:t.height,left:t.left,right:t.right,top:t.top,width:t.width}}function uV(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function v_e(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var SH=!1,E_e={get passive(){return SH=!0}},av=typeof window<"u"?window:{};av.addEventListener&&av.removeEventListener&&(av.addEventListener("p",NE,E_e),av.removeEventListener("p",NE,!1));var __e=SH;function y_e(e){return e!=null}function S_e(e){return Array.isArray(e)}function sv(e,t,i){return e?t:i}var C_e=function(t){for(var i=arguments.length,a=new Array(i>1?i-1:0),c=1;c<i;c++)a[c-1]=arguments[c];var u=Object.entries(t).filter(function(d){var f=Pe(d,1),m=f[0];return!a.includes(m)});return u.reduce(function(d,f){var m=Pe(f,2),g=m[0],_=m[1];return d[g]=_,d},{})};function b_e(e){var t=e.maxHeight,i=e.menuEl,a=e.minHeight,c=e.placement,u=e.shouldScroll,d=e.isFixedPosition,f=e.controlHeight,m=f_e(i),g={placement:"bottom",maxHeight:t};if(!i||!i.offsetParent)return g;var _=m.getBoundingClientRect(),S=_.height,b=i.getBoundingClientRect(),A=b.bottom,R=b.height,w=b.top,D=i.offsetParent.getBoundingClientRect(),x=D.top,O=d?window.innerHeight:p_e(m),P=yH(m),M=parseInt(getComputedStyle(i).marginBottom,10),F=parseInt(getComputedStyle(i).marginTop,10),j=x-F,B=O-w,H=j+P,K=S-P-w,$=A-O+P+M,Z=P+w-F,z=160;switch(c){case"auto":case"bottom":if(B>=R)return{placement:"bottom",maxHeight:t};if(K>=R&&!d)return u&&ov(m,$,z),{placement:"bottom",maxHeight:t};if(!d&&K>=a||d&&B>=a){u&&ov(m,$,z);var G=d?B-M:K-M;return{placement:"bottom",maxHeight:G}}if(c==="auto"||d){var ee=t,re=d?j:H;return re>=a&&(ee=Math.min(re-M-f,t)),{placement:"top",maxHeight:ee}}if(c==="bottom")return u&&xE(m,$),{placement:"bottom",maxHeight:t};break;case"top":if(j>=R)return{placement:"top",maxHeight:t};if(H>=R&&!d)return u&&ov(m,Z,z),{placement:"top",maxHeight:t};if(!d&&H>=a||d&&j>=a){var oe=t;return(!d&&H>=a||d&&j>=a)&&(oe=d?j-F:H-F),u&&ov(m,Z,z),{placement:"top",maxHeight:oe}}return{placement:"bottom",maxHeight:t};default:throw new Error('Invalid placement provided "'.concat(c,'".'))}return g}function T_e(e){var t={bottom:"top",top:"bottom"};return e?t[e]:"bottom"}var CH=function(t){return t==="auto"?"bottom":t},R_e=function(t,i){var a,c=t.placement,u=t.theme,d=u.borderRadius,f=u.spacing,m=u.colors;return Ee((a={label:"menu"},tt(a,T_e(c),"100%"),tt(a,"position","absolute"),tt(a,"width","100%"),tt(a,"zIndex",1),a),i?{}:{backgroundColor:m.neutral0,borderRadius:d,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:f.menuGutter,marginTop:f.menuGutter})},bH=y.createContext(null),I_e=function(t){var i=t.children,a=t.minMenuHeight,c=t.maxMenuHeight,u=t.menuPlacement,d=t.menuPosition,f=t.menuShouldScrollIntoView,m=t.theme,g=y.useContext(bH)||{},_=g.setPortalPlacement,S=y.useRef(null),b=y.useState(c),A=Pe(b,2),R=A[0],w=A[1],D=y.useState(null),x=Pe(D,2),O=x[0],P=x[1],M=m.spacing.controlHeight;return Z1(function(){var F=S.current;if(F){var j=d==="fixed",B=f&&!j,H=b_e({maxHeight:c,menuEl:F,minHeight:a,placement:u,shouldScroll:B,isFixedPosition:j,controlHeight:M});w(H.maxHeight),P(H.placement),_==null||_(H.placement)}},[c,u,d,f,a,_,M]),i({ref:S,placerProps:Ee(Ee({},t),{},{placement:O||CH(u),maxHeight:R})})},w_e=function(t){var i=t.children,a=t.innerRef,c=t.innerProps;return At("div",He({},Ur(t,"menu",{menu:!0}),{ref:a},c),i)},O_e=w_e,A_e=function(t,i){var a=t.maxHeight,c=t.theme.spacing.baseUnit;return Ee({maxHeight:a,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},i?{}:{paddingBottom:c,paddingTop:c})},N_e=function(t){var i=t.children,a=t.innerProps,c=t.innerRef,u=t.isMulti;return At("div",He({},Ur(t,"menuList",{"menu-list":!0,"menu-list--is-multi":u}),{ref:c},a),i)},TH=function(t,i){var a=t.theme,c=a.spacing.baseUnit,u=a.colors;return Ee({textAlign:"center"},i?{}:{color:u.neutral40,padding:"".concat(c*2,"px ").concat(c*3,"px")})},x_e=TH,P_e=TH,RH=function(t){var i=t.children,a=t.innerProps;return At("div",He({},Ur(t,"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),a),i)};RH.defaultProps={children:"No options"};var IH=function(t){var i=t.children,a=t.innerProps;return At("div",He({},Ur(t,"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),a),i)};IH.defaultProps={children:"Loading..."};var D_e=function(t){var i=t.rect,a=t.offset,c=t.position;return{left:i.left,position:c,top:a,width:i.width,zIndex:1}},k_e=function(t){var i=t.appendTo,a=t.children,c=t.controlElement,u=t.innerProps,d=t.menuPlacement,f=t.menuPosition,m=y.useRef(null),g=y.useRef(null),_=y.useState(CH(d)),S=Pe(_,2),b=S[0],A=S[1],R=y.useMemo(function(){return{setPortalPlacement:A}},[]),w=y.useState(null),D=Pe(w,2),x=D[0],O=D[1],P=y.useCallback(function(){if(c){var B=g_e(c),H=f==="fixed"?0:window.pageYOffset,K=B[b]+H;(K!==(x==null?void 0:x.offset)||B.left!==(x==null?void 0:x.rect.left)||B.width!==(x==null?void 0:x.rect.width))&&O({offset:K,rect:B})}},[c,f,b,x==null?void 0:x.offset,x==null?void 0:x.rect.left,x==null?void 0:x.rect.width]);Z1(function(){P()},[P]);var M=y.useCallback(function(){typeof g.current=="function"&&(g.current(),g.current=null),c&&m.current&&(g.current=l_e(c,m.current,P,{elementResize:"ResizeObserver"in window}))},[c,P]);Z1(function(){M()},[M]);var F=y.useCallback(function(B){m.current=B,M()},[M]);if(!i&&f!=="fixed"||!x)return null;var j=At("div",He({ref:F},Ur(Ee(Ee({},t),{},{offset:x.offset,position:f,rect:x.rect}),"menuPortal",{"menu-portal":!0}),u),a);return At(bH.Provider,{value:R},i?Hl.createPortal(j,i):j)},L_e=function(t){var i=t.isDisabled,a=t.isRtl;return{label:"container",direction:a?"rtl":void 0,pointerEvents:i?"none":void 0,position:"relative"}},M_e=function(t){var i=t.children,a=t.innerProps,c=t.isDisabled,u=t.isRtl;return At("div",He({},Ur(t,"container",{"--is-disabled":c,"--is-rtl":u}),a),i)},U_e=function(t,i){var a=t.theme.spacing,c=t.isMulti,u=t.hasValue,d=t.selectProps.controlShouldRenderValue;return Ee({alignItems:"center",display:c&&u&&d?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},i?{}:{padding:"".concat(a.baseUnit/2,"px ").concat(a.baseUnit*2,"px")})},j_e=function(t){var i=t.children,a=t.innerProps,c=t.isMulti,u=t.hasValue;return At("div",He({},Ur(t,"valueContainer",{"value-container":!0,"value-container--is-multi":c,"value-container--has-value":u}),a),i)},F_e=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},V_e=function(t){var i=t.children,a=t.innerProps;return At("div",He({},Ur(t,"indicatorsContainer",{indicators:!0}),a),i)},dV,B_e=["size"],$_e={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},wH=function(t){var i=t.size,a=fn(t,B_e);return At("svg",He({height:i,width:i,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:$_e},a))},gO=function(t){return At(wH,He({size:20},t),At("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},OH=function(t){return At(wH,He({size:20},t),At("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},AH=function(t,i){var a=t.isFocused,c=t.theme,u=c.spacing.baseUnit,d=c.colors;return Ee({label:"indicatorContainer",display:"flex",transition:"color 150ms"},i?{}:{color:a?d.neutral60:d.neutral20,padding:u*2,":hover":{color:a?d.neutral80:d.neutral40}})},H_e=AH,W_e=function(t){var i=t.children,a=t.innerProps;return At("div",He({},Ur(t,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),a),i||At(OH,null))},G_e=AH,z_e=function(t){var i=t.children,a=t.innerProps;return At("div",He({},Ur(t,"clearIndicator",{indicator:!0,"clear-indicator":!0}),a),i||At(gO,null))},K_e=function(t,i){var a=t.isDisabled,c=t.theme,u=c.spacing.baseUnit,d=c.colors;return Ee({label:"indicatorSeparator",alignSelf:"stretch",width:1},i?{}:{backgroundColor:a?d.neutral10:d.neutral20,marginBottom:u*2,marginTop:u*2})},Y_e=function(t){var i=t.innerProps;return At("span",He({},i,Ur(t,"indicatorSeparator",{"indicator-separator":!0})))},q_e=JEe(dV||(dV=QEe([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),X_e=function(t,i){var a=t.isFocused,c=t.size,u=t.theme,d=u.colors,f=u.spacing.baseUnit;return Ee({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:c,lineHeight:1,marginRight:c,textAlign:"center",verticalAlign:"middle"},i?{}:{color:a?d.neutral60:d.neutral20,padding:f*2})},HT=function(t){var i=t.delay,a=t.offset;return At("span",{css:pO({animation:"".concat(q_e," 1s ease-in-out ").concat(i,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:a?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},NH=function(t){var i=t.innerProps,a=t.isRtl;return At("div",He({},Ur(t,"loadingIndicator",{indicator:!0,"loading-indicator":!0}),i),At(HT,{delay:0,offset:a}),At(HT,{delay:160,offset:!0}),At(HT,{delay:320,offset:!a}))};NH.defaultProps={size:4};var J_e=function(t,i){var a=t.isDisabled,c=t.isFocused,u=t.theme,d=u.colors,f=u.borderRadius,m=u.spacing;return Ee({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:m.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},i?{}:{backgroundColor:a?d.neutral5:d.neutral0,borderColor:a?d.neutral10:c?d.primary:d.neutral20,borderRadius:f,borderStyle:"solid",borderWidth:1,boxShadow:c?"0 0 0 1px ".concat(d.primary):void 0,"&:hover":{borderColor:c?d.primary:d.neutral30}})},Q_e=function(t){var i=t.children,a=t.isDisabled,c=t.isFocused,u=t.innerRef,d=t.innerProps,f=t.menuIsOpen;return At("div",He({ref:u},Ur(t,"control",{control:!0,"control--is-disabled":a,"control--is-focused":c,"control--menu-is-open":f}),d),i)},Z_e=Q_e,eye=["data"],tye=function(t,i){var a=t.theme.spacing;return i?{}:{paddingBottom:a.baseUnit*2,paddingTop:a.baseUnit*2}},nye=function(t){var i=t.children,a=t.cx,c=t.getStyles,u=t.getClassNames,d=t.Heading,f=t.headingProps,m=t.innerProps,g=t.label,_=t.theme,S=t.selectProps;return At("div",He({},Ur(t,"group",{group:!0}),m),At(d,He({},f,{selectProps:S,theme:_,getStyles:c,getClassNames:u,cx:a}),g),At("div",null,i))},rye=function(t,i){var a=t.theme,c=a.colors,u=a.spacing;return Ee({label:"group",cursor:"default",display:"block"},i?{}:{color:c.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:u.baseUnit*3,paddingRight:u.baseUnit*3,textTransform:"uppercase"})},iye=function(t){var i=_H(t);i.data;var a=fn(i,eye);return At("div",He({},Ur(t,"groupHeading",{"group-heading":!0}),a))},oye=nye,aye=["innerRef","isDisabled","isHidden","inputClassName"],sye=function(t,i){var a=t.isDisabled,c=t.value,u=t.theme,d=u.spacing,f=u.colors;return Ee(Ee({visibility:a?"hidden":"visible",transform:c?"translateZ(0)":""},cye),i?{}:{margin:d.baseUnit/2,paddingBottom:d.baseUnit/2,paddingTop:d.baseUnit/2,color:f.neutral80})},xH={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},cye={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":Ee({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},xH)},lye=function(t){return Ee({label:"input",color:"inherit",background:0,opacity:t?0:1,width:"100%"},xH)},uye=function(t){var i=t.cx,a=t.value,c=_H(t),u=c.innerRef,d=c.isDisabled,f=c.isHidden,m=c.inputClassName,g=fn(c,aye);return At("div",He({},Ur(t,"input",{"input-container":!0}),{"data-value":a||""}),At("input",He({className:i({input:!0},m),ref:u,style:lye(f),disabled:d},g)))},dye=uye,hye=function(t,i){var a=t.theme,c=a.spacing,u=a.borderRadius,d=a.colors;return Ee({label:"multiValue",display:"flex",minWidth:0},i?{}:{backgroundColor:d.neutral10,borderRadius:u/2,margin:c.baseUnit/2})},pye=function(t,i){var a=t.theme,c=a.borderRadius,u=a.colors,d=t.cropWithEllipsis;return Ee({overflow:"hidden",textOverflow:d||d===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},i?{}:{borderRadius:c/2,color:u.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},fye=function(t,i){var a=t.theme,c=a.spacing,u=a.borderRadius,d=a.colors,f=t.isFocused;return Ee({alignItems:"center",display:"flex"},i?{}:{borderRadius:u/2,backgroundColor:f?d.dangerLight:void 0,paddingLeft:c.baseUnit,paddingRight:c.baseUnit,":hover":{backgroundColor:d.dangerLight,color:d.danger}})},PH=function(t){var i=t.children,a=t.innerProps;return At("div",a,i)},mye=PH,gye=PH;function vye(e){var t=e.children,i=e.innerProps;return At("div",He({role:"button"},i),t||At(gO,{size:14}))}var Eye=function(t){var i=t.children,a=t.components,c=t.data,u=t.innerProps,d=t.isDisabled,f=t.removeProps,m=t.selectProps,g=a.Container,_=a.Label,S=a.Remove;return At(g,{data:c,innerProps:Ee(Ee({},Ur(t,"multiValue",{"multi-value":!0,"multi-value--is-disabled":d})),u),selectProps:m},At(_,{data:c,innerProps:Ee({},Ur(t,"multiValueLabel",{"multi-value__label":!0})),selectProps:m},i),At(S,{data:c,innerProps:Ee(Ee({},Ur(t,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(i||"option")},f),selectProps:m}))},_ye=Eye,yye=function(t,i){var a=t.isDisabled,c=t.isFocused,u=t.isSelected,d=t.theme,f=d.spacing,m=d.colors;return Ee({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},i?{}:{backgroundColor:u?m.primary:c?m.primary25:"transparent",color:a?m.neutral20:u?m.neutral0:"inherit",padding:"".concat(f.baseUnit*2,"px ").concat(f.baseUnit*3,"px"),":active":{backgroundColor:a?void 0:u?m.primary:m.primary50}})},Sye=function(t){var i=t.children,a=t.isDisabled,c=t.isFocused,u=t.isSelected,d=t.innerRef,f=t.innerProps;return At("div",He({},Ur(t,"option",{option:!0,"option--is-disabled":a,"option--is-focused":c,"option--is-selected":u}),{ref:d,"aria-disabled":a},f),i)},Cye=Sye,bye=function(t,i){var a=t.theme,c=a.spacing,u=a.colors;return Ee({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},i?{}:{color:u.neutral50,marginLeft:c.baseUnit/2,marginRight:c.baseUnit/2})},Tye=function(t){var i=t.children,a=t.innerProps;return At("div",He({},Ur(t,"placeholder",{placeholder:!0}),a),i)},Rye=Tye,Iye=function(t,i){var a=t.isDisabled,c=t.theme,u=c.spacing,d=c.colors;return Ee({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},i?{}:{color:a?d.neutral40:d.neutral80,marginLeft:u.baseUnit/2,marginRight:u.baseUnit/2})},wye=function(t){var i=t.children,a=t.isDisabled,c=t.innerProps;return At("div",He({},Ur(t,"singleValue",{"single-value":!0,"single-value--is-disabled":a}),c),i)},Oye=wye,Aye={ClearIndicator:z_e,Control:Z_e,DropdownIndicator:W_e,DownChevron:OH,CrossIcon:gO,Group:oye,GroupHeading:iye,IndicatorsContainer:V_e,IndicatorSeparator:Y_e,Input:dye,LoadingIndicator:NH,Menu:O_e,MenuList:N_e,MenuPortal:k_e,LoadingMessage:IH,NoOptionsMessage:RH,MultiValue:_ye,MultiValueContainer:mye,MultiValueLabel:gye,MultiValueRemove:vye,Option:Cye,Placeholder:Rye,SelectContainer:M_e,SingleValue:Oye,ValueContainer:j_e},Nye=function(t){return Ee(Ee({},Aye),t.components)},hV=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function xye(e,t){return!!(e===t||hV(e)&&hV(t))}function Pye(e,t){if(e.length!==t.length)return!1;for(var i=0;i<e.length;i++)if(!xye(e[i],t[i]))return!1;return!0}function Dye(e,t){t===void 0&&(t=Pye);var i=null;function a(){for(var c=[],u=0;u<arguments.length;u++)c[u]=arguments[u];if(i&&i.lastThis===this&&t(c,i.lastArgs))return i.lastResult;var d=e.apply(this,c);return i={lastResult:d,lastArgs:c,lastThis:this},d}return a.clear=function(){i=null},a}var kye={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},Lye=function(t){return At("span",He({css:kye},t))},pV=Lye,Mye={guidance:function(t){var i=t.isSearchable,a=t.isMulti,c=t.isDisabled,u=t.tabSelectsValue,d=t.context;switch(d){case"menu":return"Use Up and Down to choose options".concat(c?"":", press Enter to select the currently focused option",", press Escape to exit the menu").concat(u?", press Tab to select the option and exit the menu":"",".");case"input":return"".concat(t["aria-label"]||"Select"," is focused ").concat(i?",type to refine list":"",", press Down to open the menu, ").concat(a?" press left to focus selected values":"");case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(t){var i=t.action,a=t.label,c=a===void 0?"":a,u=t.labels,d=t.isDisabled;switch(i){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(c,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(u.length>1?"s":""," ").concat(u.join(","),", selected.");case"select-option":return d?"option ".concat(c," is disabled. Select another option."):"option ".concat(c,", selected.");default:return""}},onFocus:function(t){var i=t.context,a=t.focused,c=t.options,u=t.label,d=u===void 0?"":u,f=t.selectValue,m=t.isDisabled,g=t.isSelected,_=function(R,w){return R&&R.length?"".concat(R.indexOf(w)+1," of ").concat(R.length):""};if(i==="value"&&f)return"value ".concat(d," focused, ").concat(_(f,a),".");if(i==="menu"){var S=m?" disabled":"",b="".concat(g?"selected":"focused").concat(S);return"option ".concat(d," ").concat(b,", ").concat(_(c,a),".")}return""},onFilter:function(t){var i=t.inputValue,a=t.resultsMessage;return"".concat(a).concat(i?" for search term "+i:"",".")}},Uye=function(t){var i=t.ariaSelection,a=t.focusedOption,c=t.focusedValue,u=t.focusableOptions,d=t.isFocused,f=t.selectValue,m=t.selectProps,g=t.id,_=m.ariaLiveMessages,S=m.getOptionLabel,b=m.inputValue,A=m.isMulti,R=m.isOptionDisabled,w=m.isSearchable,D=m.menuIsOpen,x=m.options,O=m.screenReaderStatus,P=m.tabSelectsValue,M=m["aria-label"],F=m["aria-live"],j=y.useMemo(function(){return Ee(Ee({},Mye),_||{})},[_]),B=y.useMemo(function(){var ee="";if(i&&j.onChange){var re=i.option,oe=i.options,pe=i.removedValue,ue=i.removedValues,me=i.value,fe=function($e){return Array.isArray($e)?null:$e},se=pe||re||fe(me),ae=se?S(se):"",de=oe||ue||void 0,ce=de?de.map(S):[],we=Ee({isDisabled:se&&R(se,f),label:ae,labels:ce},i);ee=j.onChange(we)}return ee},[i,j,R,f,S]),H=y.useMemo(function(){var ee="",re=a||c,oe=!!(a&&f&&f.includes(a));if(re&&j.onFocus){var pe={focused:re,label:S(re),isDisabled:R(re,f),isSelected:oe,options:u,context:re===a?"menu":"value",selectValue:f};ee=j.onFocus(pe)}return ee},[a,c,S,R,j,u,f]),K=y.useMemo(function(){var ee="";if(D&&x.length&&j.onFilter){var re=O({count:u.length});ee=j.onFilter({inputValue:b,resultsMessage:re})}return ee},[u,b,D,j,x,O]),$=y.useMemo(function(){var ee="";if(j.guidance){var re=c?"value":D?"menu":"input";ee=j.guidance({"aria-label":M,context:re,isDisabled:a&&R(a,f),isMulti:A,isSearchable:w,tabSelectsValue:P})}return ee},[M,a,c,A,R,w,D,j,f,P]),Z="".concat(H," ").concat(K," ").concat($),z=At(y.Fragment,null,At("span",{id:"aria-selection"},B),At("span",{id:"aria-context"},Z)),G=(i==null?void 0:i.action)==="initial-input-focus";return At(y.Fragment,null,At(pV,{id:g},G&&z),At(pV,{"aria-live":F,"aria-atomic":"false","aria-relevant":"additions text"},d&&!G&&z))},jye=Uye,eI=[{base:"A",letters:"Aâ¶ï¼¡ÃÃÃáº¦áº¤áºªáº¨ÃÄÄáº°áº®áº´áº²È¦Ç ÃÇáº¢ÃÇºÇÈÈáº áº¬áº¶á¸ÄÈºâ±¯"},{base:"AA",letters:"ê²"},{base:"AE",letters:"ÃÇ¼Ç¢"},{base:"AO",letters:"ê´"},{base:"AU",letters:"ê¶"},{base:"AV",letters:"ê¸êº"},{base:"AY",letters:"ê¼"},{base:"B",letters:"Bâ·ï¼¢á¸á¸á¸ÉÆÆ"},{base:"C",letters:"Câ¸ï¼£ÄÄÄÄÃá¸ÆÈ»ê¾"},{base:"D",letters:"Dâ¹ï¼¤á¸Äá¸á¸á¸á¸ÄÆÆÆê¹"},{base:"DZ",letters:"Ç±Ç"},{base:"Dz",letters:"Ç²Ç"},{base:"E",letters:"Eâºï¼¥ÃÃÃá»áº¾á»á»áº¼Äá¸á¸ÄÄÃáººÄÈÈáº¸á»È¨á¸Äá¸á¸ÆÆ"},{base:"F",letters:"Fâ»ï¼¦á¸Æê»"},{base:"G",letters:"Gâ¼ï¼§Ç´Äá¸ ÄÄ Ç¦Ä¢Ç¤Æê ê½ê¾"},{base:"H",letters:"Hâ½ï¼¨Ä¤á¸¢á¸¦Èá¸¤á¸¨á¸ªÄ¦â±§â±µê"},{base:"I",letters:"Iâ¾ï¼©ÃÃÃÄ¨ÄªÄ¬Ä°Ãá¸®á»ÇÈÈá»Ä®á¸¬Æ"},{base:"J",letters:"Jâ¿ï¼ªÄ´É"},{base:"K",letters:"Kâï¼«á¸°Ç¨á¸²Ä¶á¸´Æâ±©êêêê¢"},{base:"L",letters:"Lâï¼¬Ä¿Ä¹Ä½á¸¶á¸¸Ä»á¸¼á¸ºÅÈ½â±¢â± êêê"},{base:"LJ",letters:"Ç"},{base:"Lj",letters:"Ç"},{base:"M",letters:"Mâï¼­á¸¾á¹á¹â±®Æ"},{base:"N",letters:"Nâï¼®Ç¸ÅÃá¹Åá¹Åá¹á¹È Æêê¤"},{base:"NJ",letters:"Ç"},{base:"Nj",letters:"Ç"},{base:"O",letters:"Oâï¼¯ÃÃÃá»á»á»á»Ãá¹È¬á¹Åá¹á¹ÅÈ®È°ÃÈªá»ÅÇÈÈÆ á»á»á» á»á»¢á»á»ÇªÇ¬ÃÇ¾ÆÆêê"},{base:"OI",letters:"Æ¢"},{base:"OO",letters:"ê"},{base:"OU",letters:"È¢"},{base:"P",letters:"Pâï¼°á¹á¹Æ¤â±£êêê"},{base:"Q",letters:"Qâï¼±êêÉ"},{base:"R",letters:"Râï¼²Åá¹ÅÈÈá¹á¹Åá¹Éâ±¤êê¦ê"},{base:"S",letters:"Sâï¼³áºÅá¹¤Åá¹ Å á¹¦á¹¢á¹¨ÈÅâ±¾ê¨ê"},{base:"T",letters:"Tâï¼´á¹ªÅ¤á¹¬ÈÅ¢á¹°á¹®Å¦Æ¬Æ®È¾ê"},{base:"TZ",letters:"ê¨"},{base:"U",letters:"Uâï¼µÃÃÃÅ¨á¹¸Åªá¹ºÅ¬ÃÇÇÇÇá»¦Å®Å°ÇÈÈÆ¯á»ªá»¨á»®á»¬á»°á»¤á¹²Å²á¹¶á¹´É"},{base:"V",letters:"Vâï¼¶á¹¼á¹¾Æ²êÉ"},{base:"VY",letters:"ê "},{base:"W",letters:"Wâï¼·áºáºÅ´áºáºáºâ±²"},{base:"X",letters:"Xâï¼¸áºáº"},{base:"Y",letters:"Yâï¼¹á»²ÃÅ¶á»¸È²áºÅ¸á»¶á»´Æ³Éá»¾"},{base:"Z",letters:"Zâï¼ºÅ¹áºÅ»Å½áºáºÆµÈ¤â±¿â±«ê¢"},{base:"a",letters:"aâï½áºÃ Ã¡Ã¢áº§áº¥áº«áº©Ã£ÄÄáº±áº¯áºµáº³È§Ç¡Ã¤Çáº£Ã¥Ç»ÇÈÈáº¡áº­áº·á¸Äâ±¥É"},{base:"aa",letters:"ê³"},{base:"ae",letters:"Ã¦Ç½Ç£"},{base:"ao",letters:"êµ"},{base:"au",letters:"ê·"},{base:"av",letters:"ê¹ê»"},{base:"ay",letters:"ê½"},{base:"b",letters:"bâï½á¸á¸á¸ÆÆÉ"},{base:"c",letters:"câï½ÄÄÄÄÃ§á¸ÆÈ¼ê¿â"},{base:"d",letters:"dâï½á¸Äá¸á¸á¸á¸ÄÆÉÉêº"},{base:"dz",letters:"Ç³Ç"},{base:"e",letters:"eâï½Ã¨Ã©Ãªá»áº¿á»á»áº½Äá¸á¸ÄÄÃ«áº»ÄÈÈáº¹á»È©á¸Äá¸á¸ÉÉÇ"},{base:"f",letters:"fâï½á¸Æê¼"},{base:"g",letters:"gâï½ÇµÄá¸¡ÄÄ¡Ç§Ä£Ç¥É ê¡áµ¹ê¿"},{base:"h",letters:"hâï½Ä¥á¸£á¸§Èá¸¥á¸©á¸«áºÄ§â±¨â±¶É¥"},{base:"hv",letters:"Æ"},{base:"i",letters:"iâï½Ã¬Ã­Ã®Ä©Ä«Ä­Ã¯á¸¯á»ÇÈÈá»Ä¯á¸­É¨Ä±"},{base:"j",letters:"jâï½ÄµÇ°É"},{base:"k",letters:"kâï½á¸±Ç©á¸³Ä·á¸µÆâ±ªêêêê£"},{base:"l",letters:"lâï½ÅÄºÄ¾á¸·á¸¹Ä¼á¸½á¸»Å¿ÅÆÉ«â±¡êêê"},{base:"lj",letters:"Ç"},{base:"m",letters:"mâï½á¸¿á¹á¹É±É¯"},{base:"n",letters:"nâï½Ç¹ÅÃ±á¹Åá¹Åá¹á¹ÆÉ²Åêê¥"},{base:"nj",letters:"Ç"},{base:"o",letters:"oâï½Ã²Ã³Ã´á»á»á»á»Ãµá¹È­á¹Åá¹á¹ÅÈ¯È±Ã¶È«á»ÅÇÈÈÆ¡á»á»á»¡á»á»£á»á»Ç«Ç­Ã¸Ç¿ÉêêÉµ"},{base:"oi",letters:"Æ£"},{base:"ou",letters:"È£"},{base:"oo",letters:"ê"},{base:"p",letters:"pâï½á¹á¹Æ¥áµ½êêê"},{base:"q",letters:"qâ ï½Éêê"},{base:"r",letters:"râ¡ï½Åá¹ÅÈÈá¹á¹Åá¹ÉÉ½êê§ê"},{base:"s",letters:"sâ¢ï½ÃÅá¹¥Åá¹¡Å¡á¹§á¹£á¹©ÈÅÈ¿ê©êáº"},{base:"t",letters:"tâ£ï½á¹«áºÅ¥á¹­ÈÅ£á¹±á¹¯Å§Æ­Êâ±¦ê"},{base:"tz",letters:"ê©"},{base:"u",letters:"uâ¤ï½Ã¹ÃºÃ»Å©á¹¹Å«á¹»Å­Ã¼ÇÇÇÇá»§Å¯Å±ÇÈÈÆ°á»«á»©á»¯á»­á»±á»¥á¹³Å³á¹·á¹µÊ"},{base:"v",letters:"vâ¥ï½á¹½á¹¿ÊêÊ"},{base:"vy",letters:"ê¡"},{base:"w",letters:"wâ¦ï½áºáºÅµáºáºáºáºâ±³"},{base:"x",letters:"xâ§ï½áºáº"},{base:"y",letters:"yâ¨ï½á»³Ã½Å·á»¹È³áºÃ¿á»·áºá»µÆ´Éá»¿"},{base:"z",letters:"zâ©ï½ÅºáºÅ¼Å¾áºáºÆ¶È¥Éâ±¬ê£"}],Fye=new RegExp("["+eI.map(function(e){return e.letters}).join("")+"]","g"),DH={};for(var WT=0;WT<eI.length;WT++)for(var GT=eI[WT],zT=0;zT<GT.letters.length;zT++)DH[GT.letters[zT]]=GT.base;var kH=function(t){return t.replace(Fye,function(i){return DH[i]})},Vye=Dye(kH),fV=function(t){return t.replace(/^\s+|\s+$/g,"")},Bye=function(t){return"".concat(t.label," ").concat(t.value)},$ye=function(t){return function(i,a){if(i.data.__isNew__)return!0;var c=Ee({ignoreCase:!0,ignoreAccents:!0,stringify:Bye,trim:!0,matchFrom:"any"},t),u=c.ignoreCase,d=c.ignoreAccents,f=c.stringify,m=c.trim,g=c.matchFrom,_=m?fV(a):a,S=m?fV(f(i)):f(i);return u&&(_=_.toLowerCase(),S=S.toLowerCase()),d&&(_=Vye(_),S=kH(S)),g==="start"?S.substr(0,_.length)===_:S.indexOf(_)>-1}},Hye=["innerRef"];function Wye(e){var t=e.innerRef,i=fn(e,Hye),a=C_e(i,"onExited","in","enter","exit","appear");return At("input",He({ref:t},a,{css:pO({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var Gye=function(t){t.preventDefault(),t.stopPropagation()};function zye(e){var t=e.isEnabled,i=e.onBottomArrive,a=e.onBottomLeave,c=e.onTopArrive,u=e.onTopLeave,d=y.useRef(!1),f=y.useRef(!1),m=y.useRef(0),g=y.useRef(null),_=y.useCallback(function(D,x){if(g.current!==null){var O=g.current,P=O.scrollTop,M=O.scrollHeight,F=O.clientHeight,j=g.current,B=x>0,H=M-F-P,K=!1;H>x&&d.current&&(a&&a(D),d.current=!1),B&&f.current&&(u&&u(D),f.current=!1),B&&x>H?(i&&!d.current&&i(D),j.scrollTop=M,K=!0,d.current=!0):!B&&-x>P&&(c&&!f.current&&c(D),j.scrollTop=0,K=!0,f.current=!0),K&&Gye(D)}},[i,a,c,u]),S=y.useCallback(function(D){_(D,D.deltaY)},[_]),b=y.useCallback(function(D){m.current=D.changedTouches[0].clientY},[]),A=y.useCallback(function(D){var x=m.current-D.changedTouches[0].clientY;_(D,x)},[_]),R=y.useCallback(function(D){if(D){var x=__e?{passive:!1}:!1;D.addEventListener("wheel",S,x),D.addEventListener("touchstart",b,x),D.addEventListener("touchmove",A,x)}},[A,b,S]),w=y.useCallback(function(D){D&&(D.removeEventListener("wheel",S,!1),D.removeEventListener("touchstart",b,!1),D.removeEventListener("touchmove",A,!1))},[A,b,S]);return y.useEffect(function(){if(t){var D=g.current;return R(D),function(){w(D)}}},[t,R,w]),function(D){g.current=D}}var mV=["boxSizing","height","overflow","paddingRight","position"],gV={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function vV(e){e.preventDefault()}function EV(e){e.stopPropagation()}function _V(){var e=this.scrollTop,t=this.scrollHeight,i=e+this.offsetHeight;e===0?this.scrollTop=1:i===t&&(this.scrollTop=e-1)}function yV(){return"ontouchstart"in window||navigator.maxTouchPoints}var SV=!!(typeof window<"u"&&window.document&&window.document.createElement),pf=0,rh={capture:!1,passive:!1};function Kye(e){var t=e.isEnabled,i=e.accountForScrollbars,a=i===void 0?!0:i,c=y.useRef({}),u=y.useRef(null),d=y.useCallback(function(m){if(SV){var g=document.body,_=g&&g.style;if(a&&mV.forEach(function(R){var w=_&&_[R];c.current[R]=w}),a&&pf<1){var S=parseInt(c.current.paddingRight,10)||0,b=document.body?document.body.clientWidth:0,A=window.innerWidth-b+S||0;Object.keys(gV).forEach(function(R){var w=gV[R];_&&(_[R]=w)}),_&&(_.paddingRight="".concat(A,"px"))}g&&yV()&&(g.addEventListener("touchmove",vV,rh),m&&(m.addEventListener("touchstart",_V,rh),m.addEventListener("touchmove",EV,rh))),pf+=1}},[a]),f=y.useCallback(function(m){if(SV){var g=document.body,_=g&&g.style;pf=Math.max(pf-1,0),a&&pf<1&&mV.forEach(function(S){var b=c.current[S];_&&(_[S]=b)}),g&&yV()&&(g.removeEventListener("touchmove",vV,rh),m&&(m.removeEventListener("touchstart",_V,rh),m.removeEventListener("touchmove",EV,rh)))}},[a]);return y.useEffect(function(){if(t){var m=u.current;return d(m),function(){f(m)}}},[t,d,f]),function(m){u.current=m}}var Yye=function(){return document.activeElement&&document.activeElement.blur()},qye={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function Xye(e){var t=e.children,i=e.lockEnabled,a=e.captureEnabled,c=a===void 0?!0:a,u=e.onBottomArrive,d=e.onBottomLeave,f=e.onTopArrive,m=e.onTopLeave,g=zye({isEnabled:c,onBottomArrive:u,onBottomLeave:d,onTopArrive:f,onTopLeave:m}),_=Kye({isEnabled:i}),S=function(A){g(A),_(A)};return At(y.Fragment,null,i&&At("div",{onClick:Yye,css:qye}),t(S))}var Jye={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},Qye=function(t){var i=t.name,a=t.onFocus;return At("input",{required:!0,name:i,tabIndex:-1,"aria-hidden":"true",onFocus:a,css:Jye,value:"",onChange:function(){}})},Zye=Qye,eSe=function(t){return t.label},tSe=function(t){return t.label},nSe=function(t){return t.value},rSe=function(t){return!!t.isDisabled},iSe={clearIndicator:G_e,container:L_e,control:J_e,dropdownIndicator:H_e,group:tye,groupHeading:rye,indicatorsContainer:F_e,indicatorSeparator:K_e,input:sye,loadingIndicator:X_e,loadingMessage:P_e,menu:R_e,menuList:A_e,menuPortal:D_e,multiValue:hye,multiValueLabel:pye,multiValueRemove:fye,noOptionsMessage:x_e,option:yye,placeholder:bye,singleValue:Iye,valueContainer:U_e},oSe={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},aSe=4,LH=4,sSe=38,cSe=LH*2,lSe={baseUnit:LH,controlHeight:sSe,menuGutter:cSe},KT={borderRadius:aSe,colors:oSe,spacing:lSe},uSe={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:uV(),captureMenuScroll:!uV(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:$ye(),formatGroupLabel:eSe,getOptionLabel:tSe,getOptionValue:nSe,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:rSe,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!v_e(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(t){var i=t.count;return"".concat(i," result").concat(i!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function CV(e,t,i,a){var c=FH(e,t,i),u=VH(e,t,i),d=jH(e,t),f=PE(e,t);return{type:"option",data:t,isDisabled:c,isSelected:u,label:d,value:f,index:a}}function MH(e,t){return e.options.map(function(i,a){if("options"in i){var c=i.options.map(function(d,f){return CV(e,d,t,f)}).filter(function(d){return bV(e,d)});return c.length>0?{type:"group",data:i,options:c,index:a}:void 0}var u=CV(e,i,t,a);return bV(e,u)?u:void 0}).filter(y_e)}function UH(e){return e.reduce(function(t,i){return i.type==="group"?t.push.apply(t,Qe(i.options.map(function(a){return a.data}))):t.push(i.data),t},[])}function dSe(e,t){return UH(MH(e,t))}function bV(e,t){var i=e.inputValue,a=i===void 0?"":i,c=t.data,u=t.isSelected,d=t.label,f=t.value;return(!$H(e)||!u)&&BH(e,{label:d,value:f,data:c},a)}function hSe(e,t){var i=e.focusedValue,a=e.selectValue,c=a.indexOf(i);if(c>-1){var u=t.indexOf(i);if(u>-1)return i;if(c<t.length)return t[c]}return null}function pSe(e,t){var i=e.focusedOption;return i&&t.indexOf(i)>-1?i:t[0]}var jH=function(t,i){return t.getOptionLabel(i)},PE=function(t,i){return t.getOptionValue(i)};function FH(e,t,i){return typeof e.isOptionDisabled=="function"?e.isOptionDisabled(t,i):!1}function VH(e,t,i){if(i.indexOf(t)>-1)return!0;if(typeof e.isOptionSelected=="function")return e.isOptionSelected(t,i);var a=PE(e,t);return i.some(function(c){return PE(e,c)===a})}function BH(e,t,i){return e.filterOption?e.filterOption(t,i):!0}var $H=function(t){var i=t.hideSelectedOptions,a=t.isMulti;return i===void 0?a:i},fSe=1,HH=function(e){Yh(i,e);var t=qh(i);function i(a){var c;if(za(this,i),c=t.call(this,a),c.state={ariaSelection:null,focusedOption:null,focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0},c.blockOptionHover=!1,c.isComposing=!1,c.commonProps=void 0,c.initialTouchX=0,c.initialTouchY=0,c.instancePrefix="",c.openAfterFocus=!1,c.scrollToFocusedOptionOnUpdate=!1,c.userIsDragging=void 0,c.controlRef=null,c.getControlRef=function(f){c.controlRef=f},c.focusedOptionRef=null,c.getFocusedOptionRef=function(f){c.focusedOptionRef=f},c.menuListRef=null,c.getMenuListRef=function(f){c.menuListRef=f},c.inputRef=null,c.getInputRef=function(f){c.inputRef=f},c.focus=c.focusInput,c.blur=c.blurInput,c.onChange=function(f,m){var g=c.props,_=g.onChange,S=g.name;m.name=S,c.ariaOnChange(f,m),_(f,m)},c.setValue=function(f,m,g){var _=c.props,S=_.closeMenuOnSelect,b=_.isMulti,A=_.inputValue;c.onInputChange("",{action:"set-value",prevInputValue:A}),S&&(c.setState({inputIsHiddenAfterUpdate:!b}),c.onMenuClose()),c.setState({clearFocusValueOnUpdate:!0}),c.onChange(f,{action:m,option:g})},c.selectOption=function(f){var m=c.props,g=m.blurInputOnSelect,_=m.isMulti,S=m.name,b=c.state.selectValue,A=_&&c.isOptionSelected(f,b),R=c.isOptionDisabled(f,b);if(A){var w=c.getOptionValue(f);c.setValue(b.filter(function(D){return c.getOptionValue(D)!==w}),"deselect-option",f)}else if(!R)_?c.setValue([].concat(Qe(b),[f]),"select-option",f):c.setValue(f,"select-option");else{c.ariaOnChange(f,{action:"select-option",option:f,name:S});return}g&&c.blurInput()},c.removeValue=function(f){var m=c.props.isMulti,g=c.state.selectValue,_=c.getOptionValue(f),S=g.filter(function(A){return c.getOptionValue(A)!==_}),b=sv(m,S,S[0]||null);c.onChange(b,{action:"remove-value",removedValue:f}),c.focusInput()},c.clearValue=function(){var f=c.state.selectValue;c.onChange(sv(c.props.isMulti,[],null),{action:"clear",removedValues:f})},c.popValue=function(){var f=c.props.isMulti,m=c.state.selectValue,g=m[m.length-1],_=m.slice(0,m.length-1),S=sv(f,_,_[0]||null);c.onChange(S,{action:"pop-value",removedValue:g})},c.getValue=function(){return c.state.selectValue},c.cx=function(){for(var f=arguments.length,m=new Array(f),g=0;g<f;g++)m[g]=arguments[g];return h_e.apply(void 0,[c.props.classNamePrefix].concat(m))},c.getOptionLabel=function(f){return jH(c.props,f)},c.getOptionValue=function(f){return PE(c.props,f)},c.getStyles=function(f,m){var g=c.props.unstyled,_=iSe[f](m,g);_.boxSizing="border-box";var S=c.props.styles[f];return S?S(_,m):_},c.getClassNames=function(f,m){var g,_;return(g=(_=c.props.classNames)[f])===null||g===void 0?void 0:g.call(_,m)},c.getElementId=function(f){return"".concat(c.instancePrefix,"-").concat(f)},c.getComponents=function(){return Nye(c.props)},c.buildCategorizedOptions=function(){return MH(c.props,c.state.selectValue)},c.getCategorizedOptions=function(){return c.props.menuIsOpen?c.buildCategorizedOptions():[]},c.buildFocusableOptions=function(){return UH(c.buildCategorizedOptions())},c.getFocusableOptions=function(){return c.props.menuIsOpen?c.buildFocusableOptions():[]},c.ariaOnChange=function(f,m){c.setState({ariaSelection:Ee({value:f},m)})},c.onMenuMouseDown=function(f){f.button===0&&(f.stopPropagation(),f.preventDefault(),c.focusInput())},c.onMenuMouseMove=function(f){c.blockOptionHover=!1},c.onControlMouseDown=function(f){if(!f.defaultPrevented){var m=c.props.openMenuOnClick;c.state.isFocused?c.props.menuIsOpen?f.target.tagName!=="INPUT"&&f.target.tagName!=="TEXTAREA"&&c.onMenuClose():m&&c.openMenu("first"):(m&&(c.openAfterFocus=!0),c.focusInput()),f.target.tagName!=="INPUT"&&f.target.tagName!=="TEXTAREA"&&f.preventDefault()}},c.onDropdownIndicatorMouseDown=function(f){if(!(f&&f.type==="mousedown"&&f.button!==0)&&!c.props.isDisabled){var m=c.props,g=m.isMulti,_=m.menuIsOpen;c.focusInput(),_?(c.setState({inputIsHiddenAfterUpdate:!g}),c.onMenuClose()):c.openMenu("first"),f.preventDefault()}},c.onClearIndicatorMouseDown=function(f){f&&f.type==="mousedown"&&f.button!==0||(c.clearValue(),f.preventDefault(),c.openAfterFocus=!1,f.type==="touchend"?c.focusInput():setTimeout(function(){return c.focusInput()}))},c.onScroll=function(f){typeof c.props.closeMenuOnScroll=="boolean"?f.target instanceof HTMLElement&&V_(f.target)&&c.props.onMenuClose():typeof c.props.closeMenuOnScroll=="function"&&c.props.closeMenuOnScroll(f)&&c.props.onMenuClose()},c.onCompositionStart=function(){c.isComposing=!0},c.onCompositionEnd=function(){c.isComposing=!1},c.onTouchStart=function(f){var m=f.touches,g=m&&m.item(0);g&&(c.initialTouchX=g.clientX,c.initialTouchY=g.clientY,c.userIsDragging=!1)},c.onTouchMove=function(f){var m=f.touches,g=m&&m.item(0);if(g){var _=Math.abs(g.clientX-c.initialTouchX),S=Math.abs(g.clientY-c.initialTouchY),b=5;c.userIsDragging=_>b||S>b}},c.onTouchEnd=function(f){c.userIsDragging||(c.controlRef&&!c.controlRef.contains(f.target)&&c.menuListRef&&!c.menuListRef.contains(f.target)&&c.blurInput(),c.initialTouchX=0,c.initialTouchY=0)},c.onControlTouchEnd=function(f){c.userIsDragging||c.onControlMouseDown(f)},c.onClearIndicatorTouchEnd=function(f){c.userIsDragging||c.onClearIndicatorMouseDown(f)},c.onDropdownIndicatorTouchEnd=function(f){c.userIsDragging||c.onDropdownIndicatorMouseDown(f)},c.handleInputChange=function(f){var m=c.props.inputValue,g=f.currentTarget.value;c.setState({inputIsHiddenAfterUpdate:!1}),c.onInputChange(g,{action:"input-change",prevInputValue:m}),c.props.menuIsOpen||c.onMenuOpen()},c.onInputFocus=function(f){c.props.onFocus&&c.props.onFocus(f),c.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(c.openAfterFocus||c.props.openMenuOnFocus)&&c.openMenu("first"),c.openAfterFocus=!1},c.onInputBlur=function(f){var m=c.props.inputValue;if(c.menuListRef&&c.menuListRef.contains(document.activeElement)){c.inputRef.focus();return}c.props.onBlur&&c.props.onBlur(f),c.onInputChange("",{action:"input-blur",prevInputValue:m}),c.onMenuClose(),c.setState({focusedValue:null,isFocused:!1})},c.onOptionHover=function(f){c.blockOptionHover||c.state.focusedOption===f||c.setState({focusedOption:f})},c.shouldHideSelectedOptions=function(){return $H(c.props)},c.onValueInputFocus=function(f){f.preventDefault(),f.stopPropagation(),c.focus()},c.onKeyDown=function(f){var m=c.props,g=m.isMulti,_=m.backspaceRemovesValue,S=m.escapeClearsValue,b=m.inputValue,A=m.isClearable,R=m.isDisabled,w=m.menuIsOpen,D=m.onKeyDown,x=m.tabSelectsValue,O=m.openMenuOnFocus,P=c.state,M=P.focusedOption,F=P.focusedValue,j=P.selectValue;if(!R&&!(typeof D=="function"&&(D(f),f.defaultPrevented))){switch(c.blockOptionHover=!0,f.key){case"ArrowLeft":if(!g||b)return;c.focusValue("previous");break;case"ArrowRight":if(!g||b)return;c.focusValue("next");break;case"Delete":case"Backspace":if(b)return;if(F)c.removeValue(F);else{if(!_)return;g?c.popValue():A&&c.clearValue()}break;case"Tab":if(c.isComposing||f.shiftKey||!w||!x||!M||O&&c.isOptionSelected(M,j))return;c.selectOption(M);break;case"Enter":if(f.keyCode===229)break;if(w){if(!M||c.isComposing)return;c.selectOption(M);break}return;case"Escape":w?(c.setState({inputIsHiddenAfterUpdate:!1}),c.onInputChange("",{action:"menu-close",prevInputValue:b}),c.onMenuClose()):A&&S&&c.clearValue();break;case" ":if(b)return;if(!w){c.openMenu("first");break}if(!M)return;c.selectOption(M);break;case"ArrowUp":w?c.focusOption("up"):c.openMenu("last");break;case"ArrowDown":w?c.focusOption("down"):c.openMenu("first");break;case"PageUp":if(!w)return;c.focusOption("pageup");break;case"PageDown":if(!w)return;c.focusOption("pagedown");break;case"Home":if(!w)return;c.focusOption("first");break;case"End":if(!w)return;c.focusOption("last");break;default:return}f.preventDefault()}},c.instancePrefix="react-select-"+(c.props.instanceId||++fSe),c.state.selectValue=cV(a.value),a.menuIsOpen&&c.state.selectValue.length){var u=c.buildFocusableOptions(),d=u.indexOf(c.state.selectValue[0]);c.state.focusedOption=u[d]}return c}return Ka(i,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&lV(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(c){var u=this.props,d=u.isDisabled,f=u.menuIsOpen,m=this.state.isFocused;(m&&!d&&c.isDisabled||m&&f&&!c.menuIsOpen)&&this.focusInput(),m&&d&&!c.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!m&&!d&&c.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(lV(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(c,u){this.props.onInputChange(c,u)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(c){var u=this,d=this.state,f=d.selectValue,m=d.isFocused,g=this.buildFocusableOptions(),_=c==="first"?0:g.length-1;if(!this.props.isMulti){var S=g.indexOf(f[0]);S>-1&&(_=S)}this.scrollToFocusedOptionOnUpdate=!(m&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:g[_]},function(){return u.onMenuOpen()})}},{key:"focusValue",value:function(c){var u=this.state,d=u.selectValue,f=u.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var m=d.indexOf(f);f||(m=-1);var g=d.length-1,_=-1;if(d.length){switch(c){case"previous":m===0?_=0:m===-1?_=g:_=m-1;break;case"next":m>-1&&m<g&&(_=m+1);break}this.setState({inputIsHidden:_!==-1,focusedValue:d[_]})}}}},{key:"focusOption",value:function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",u=this.props.pageSize,d=this.state.focusedOption,f=this.getFocusableOptions();if(f.length){var m=0,g=f.indexOf(d);d||(g=-1),c==="up"?m=g>0?g-1:f.length-1:c==="down"?m=(g+1)%f.length:c==="pageup"?(m=g-u,m<0&&(m=0)):c==="pagedown"?(m=g+u,m>f.length-1&&(m=f.length-1)):c==="last"&&(m=f.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:f[m],focusedValue:null})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(KT):Ee(Ee({},KT),this.props.theme):KT}},{key:"getCommonProps",value:function(){var c=this.clearValue,u=this.cx,d=this.getStyles,f=this.getClassNames,m=this.getValue,g=this.selectOption,_=this.setValue,S=this.props,b=S.isMulti,A=S.isRtl,R=S.options,w=this.hasValue();return{clearValue:c,cx:u,getStyles:d,getClassNames:f,getValue:m,hasValue:w,isMulti:b,isRtl:A,options:R,selectOption:g,selectProps:S,setValue:_,theme:this.getTheme()}}},{key:"hasValue",value:function(){var c=this.state.selectValue;return c.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var c=this.props,u=c.isClearable,d=c.isMulti;return u===void 0?d:u}},{key:"isOptionDisabled",value:function(c,u){return FH(this.props,c,u)}},{key:"isOptionSelected",value:function(c,u){return VH(this.props,c,u)}},{key:"filterOption",value:function(c,u){return BH(this.props,c,u)}},{key:"formatOptionLabel",value:function(c,u){if(typeof this.props.formatOptionLabel=="function"){var d=this.props.inputValue,f=this.state.selectValue;return this.props.formatOptionLabel(c,{context:u,inputValue:d,selectValue:f})}else return this.getOptionLabel(c)}},{key:"formatGroupLabel",value:function(c){return this.props.formatGroupLabel(c)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var c=this.props,u=c.isDisabled,d=c.isSearchable,f=c.inputId,m=c.inputValue,g=c.tabIndex,_=c.form,S=c.menuIsOpen,b=c.required,A=this.getComponents(),R=A.Input,w=this.state,D=w.inputIsHidden,x=w.ariaSelection,O=this.commonProps,P=f||this.getElementId("input"),M=Ee(Ee(Ee({"aria-autocomplete":"list","aria-expanded":S,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":b,role:"combobox"},S&&{"aria-controls":this.getElementId("listbox"),"aria-owns":this.getElementId("listbox")}),!d&&{"aria-readonly":!0}),this.hasValue()?(x==null?void 0:x.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return d?y.createElement(R,He({},O,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:P,innerRef:this.getInputRef,isDisabled:u,isHidden:D,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:g,form:_,type:"text",value:m},M)):y.createElement(Wye,He({id:P,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:NE,onFocus:this.onInputFocus,disabled:u,tabIndex:g,inputMode:"none",form:_,value:""},M))}},{key:"renderPlaceholderOrValue",value:function(){var c=this,u=this.getComponents(),d=u.MultiValue,f=u.MultiValueContainer,m=u.MultiValueLabel,g=u.MultiValueRemove,_=u.SingleValue,S=u.Placeholder,b=this.commonProps,A=this.props,R=A.controlShouldRenderValue,w=A.isDisabled,D=A.isMulti,x=A.inputValue,O=A.placeholder,P=this.state,M=P.selectValue,F=P.focusedValue,j=P.isFocused;if(!this.hasValue()||!R)return x?null:y.createElement(S,He({},b,{key:"placeholder",isDisabled:w,isFocused:j,innerProps:{id:this.getElementId("placeholder")}}),O);if(D)return M.map(function(H,K){var $=H===F,Z="".concat(c.getOptionLabel(H),"-").concat(c.getOptionValue(H));return y.createElement(d,He({},b,{components:{Container:f,Label:m,Remove:g},isFocused:$,isDisabled:w,key:Z,index:K,removeProps:{onClick:function(){return c.removeValue(H)},onTouchEnd:function(){return c.removeValue(H)},onMouseDown:function(G){G.preventDefault()}},data:H}),c.formatOptionLabel(H,"value"))});if(x)return null;var B=M[0];return y.createElement(_,He({},b,{data:B,isDisabled:w}),this.formatOptionLabel(B,"value"))}},{key:"renderClearIndicator",value:function(){var c=this.getComponents(),u=c.ClearIndicator,d=this.commonProps,f=this.props,m=f.isDisabled,g=f.isLoading,_=this.state.isFocused;if(!this.isClearable()||!u||m||!this.hasValue()||g)return null;var S={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return y.createElement(u,He({},d,{innerProps:S,isFocused:_}))}},{key:"renderLoadingIndicator",value:function(){var c=this.getComponents(),u=c.LoadingIndicator,d=this.commonProps,f=this.props,m=f.isDisabled,g=f.isLoading,_=this.state.isFocused;if(!u||!g)return null;var S={"aria-hidden":"true"};return y.createElement(u,He({},d,{innerProps:S,isDisabled:m,isFocused:_}))}},{key:"renderIndicatorSeparator",value:function(){var c=this.getComponents(),u=c.DropdownIndicator,d=c.IndicatorSeparator;if(!u||!d)return null;var f=this.commonProps,m=this.props.isDisabled,g=this.state.isFocused;return y.createElement(d,He({},f,{isDisabled:m,isFocused:g}))}},{key:"renderDropdownIndicator",value:function(){var c=this.getComponents(),u=c.DropdownIndicator;if(!u)return null;var d=this.commonProps,f=this.props.isDisabled,m=this.state.isFocused,g={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return y.createElement(u,He({},d,{innerProps:g,isDisabled:f,isFocused:m}))}},{key:"renderMenu",value:function(){var c=this,u=this.getComponents(),d=u.Group,f=u.GroupHeading,m=u.Menu,g=u.MenuList,_=u.MenuPortal,S=u.LoadingMessage,b=u.NoOptionsMessage,A=u.Option,R=this.commonProps,w=this.state.focusedOption,D=this.props,x=D.captureMenuScroll,O=D.inputValue,P=D.isLoading,M=D.loadingMessage,F=D.minMenuHeight,j=D.maxMenuHeight,B=D.menuIsOpen,H=D.menuPlacement,K=D.menuPosition,$=D.menuPortalTarget,Z=D.menuShouldBlockScroll,z=D.menuShouldScrollIntoView,G=D.noOptionsMessage,ee=D.onMenuScrollToTop,re=D.onMenuScrollToBottom;if(!B)return null;var oe=function(de,ce){var we=de.type,Ie=de.data,$e=de.isDisabled,ke=de.isSelected,mt=de.label,vt=de.value,st=w===Ie,rt=$e?void 0:function(){return c.onOptionHover(Ie)},ft=$e?void 0:function(){return c.selectOption(Ie)},Ye="".concat(c.getElementId("option"),"-").concat(ce),St={id:Ye,onClick:ft,onMouseMove:rt,onMouseOver:rt,tabIndex:-1};return y.createElement(A,He({},R,{innerProps:St,data:Ie,isDisabled:$e,isSelected:ke,key:Ye,label:mt,type:we,value:vt,isFocused:st,innerRef:st?c.getFocusedOptionRef:void 0}),c.formatOptionLabel(de.data,"menu"))},pe;if(this.hasOptions())pe=this.getCategorizedOptions().map(function(ae){if(ae.type==="group"){var de=ae.data,ce=ae.options,we=ae.index,Ie="".concat(c.getElementId("group"),"-").concat(we),$e="".concat(Ie,"-heading");return y.createElement(d,He({},R,{key:Ie,data:de,options:ce,Heading:f,headingProps:{id:$e,data:ae.data},label:c.formatGroupLabel(ae.data)}),ae.options.map(function(ke){return oe(ke,"".concat(we,"-").concat(ke.index))}))}else if(ae.type==="option")return oe(ae,"".concat(ae.index))});else if(P){var ue=M({inputValue:O});if(ue===null)return null;pe=y.createElement(S,R,ue)}else{var me=G({inputValue:O});if(me===null)return null;pe=y.createElement(b,R,me)}var fe={minMenuHeight:F,maxMenuHeight:j,menuPlacement:H,menuPosition:K,menuShouldScrollIntoView:z},se=y.createElement(I_e,He({},R,fe),function(ae){var de=ae.ref,ce=ae.placerProps,we=ce.placement,Ie=ce.maxHeight;return y.createElement(m,He({},R,fe,{innerRef:de,innerProps:{onMouseDown:c.onMenuMouseDown,onMouseMove:c.onMenuMouseMove,id:c.getElementId("listbox")},isLoading:P,placement:we}),y.createElement(Xye,{captureEnabled:x,onTopArrive:ee,onBottomArrive:re,lockEnabled:Z},function($e){return y.createElement(g,He({},R,{innerRef:function(mt){c.getMenuListRef(mt),$e(mt)},isLoading:P,maxHeight:Ie,focusedOption:w}),pe)}))});return $||K==="fixed"?y.createElement(_,He({},R,{appendTo:$,controlElement:this.controlRef,menuPlacement:H,menuPosition:K}),se):se}},{key:"renderFormField",value:function(){var c=this,u=this.props,d=u.delimiter,f=u.isDisabled,m=u.isMulti,g=u.name,_=u.required,S=this.state.selectValue;if(_&&!this.hasValue()&&!f)return y.createElement(Zye,{name:g,onFocus:this.onValueInputFocus});if(!(!g||f))if(m)if(d){var b=S.map(function(w){return c.getOptionValue(w)}).join(d);return y.createElement("input",{name:g,type:"hidden",value:b})}else{var A=S.length>0?S.map(function(w,D){return y.createElement("input",{key:"i-".concat(D),name:g,type:"hidden",value:c.getOptionValue(w)})}):y.createElement("input",{name:g,type:"hidden",value:""});return y.createElement("div",null,A)}else{var R=S[0]?this.getOptionValue(S[0]):"";return y.createElement("input",{name:g,type:"hidden",value:R})}}},{key:"renderLiveRegion",value:function(){var c=this.commonProps,u=this.state,d=u.ariaSelection,f=u.focusedOption,m=u.focusedValue,g=u.isFocused,_=u.selectValue,S=this.getFocusableOptions();return y.createElement(jye,He({},c,{id:this.getElementId("live-region"),ariaSelection:d,focusedOption:f,focusedValue:m,isFocused:g,selectValue:_,focusableOptions:S}))}},{key:"render",value:function(){var c=this.getComponents(),u=c.Control,d=c.IndicatorsContainer,f=c.SelectContainer,m=c.ValueContainer,g=this.props,_=g.className,S=g.id,b=g.isDisabled,A=g.menuIsOpen,R=this.state.isFocused,w=this.commonProps=this.getCommonProps();return y.createElement(f,He({},w,{className:_,innerProps:{id:S,onKeyDown:this.onKeyDown},isDisabled:b,isFocused:R}),this.renderLiveRegion(),y.createElement(u,He({},w,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:b,isFocused:R,menuIsOpen:A}),y.createElement(m,He({},w,{isDisabled:b}),this.renderPlaceholderOrValue(),this.renderInput()),y.createElement(d,He({},w,{isDisabled:b}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(c,u){var d=u.prevProps,f=u.clearFocusValueOnUpdate,m=u.inputIsHiddenAfterUpdate,g=u.ariaSelection,_=u.isFocused,S=u.prevWasFocused,b=c.options,A=c.value,R=c.menuIsOpen,w=c.inputValue,D=c.isMulti,x=cV(A),O={};if(d&&(A!==d.value||b!==d.options||R!==d.menuIsOpen||w!==d.inputValue)){var P=R?dSe(c,x):[],M=f?hSe(u,x):null,F=pSe(u,P);O={selectValue:x,focusedOption:F,focusedValue:M,clearFocusValueOnUpdate:!1}}var j=m!=null&&c!==d?{inputIsHidden:m,inputIsHiddenAfterUpdate:void 0}:{},B=g,H=_&&S;return _&&!H&&(B={value:sv(D,x,x[0]||null),options:x,action:"initial-input-focus"},H=!S),(g==null?void 0:g.action)==="initial-input-focus"&&(B=null),Ee(Ee(Ee({},O),j),{},{prevProps:c,ariaSelection:B,prevWasFocused:H})}}]),i}(y.Component);HH.defaultProps=uSe;var mSe=y.forwardRef(function(e,t){var i=tEe(e);return y.createElement(HH,He({ref:t},i))}),gSe=mSe;const{Title:vSe,Paragraph:ESe}=ho,_Se=y.memo(function({label:t}){const a=As().filter(m=>m.hasAudio||m.hasVideo),c=Bf(m=>m.localTracks),u=Bf(m=>m.hostRoom),d=qa(),f=Ya();return te.jsxs("div",{className:"room-selector-item",children:[te.jsx("i",{className:"i-mdi-chat-processing-outline text-5 color-zinc"}),te.jsx("code",{className:"bg-rose color-white px-2 rounded",children:t}),d&&c&&f.uid&&(u==null?void 0:u.client.channelName)===f.channelName&&te.jsxs("div",{className:"user",children:[te.jsx(V$,{audioTrack:c[0],cameraOn:!0,micOn:!0,videoTrack:c[1]}),te.jsx("div",{className:"mask"}),te.jsx("label",{className:"label",children:Rs(f.uid)})]},f.uid),te.jsx(te.Fragment,{children:a.map(m=>te.jsxs("div",{className:"user",children:[te.jsx(Qw,{user:m}),te.jsx("div",{className:"mask"}),te.jsx("label",{className:"label",children:Rs(m.uid)})]},m.uid))})]})}),ySe=({innerProps:e,isDisabled:t,label:i,data:a})=>{const{client:c}=a.value;return t?null:te.jsx("div",{...e,children:te.jsx(M$,{client:c,children:te.jsx(_Se,{label:i})})})},SSe=()=>{const e=Bf(d=>d.getRooms),[t,i]=y.useState(!1);y.useEffect(()=>{e()},[]);const a=Bf(d=>d.rooms),c=Bf(d=>d.selectChannel),u=y.useMemo(()=>a==null?void 0:a.map(d=>({label:d.channel.replace(/[^0-9]*/,"Room"),value:d})),[a]);return te.jsx(jr,{children:t?te.jsx("div",{className:"max-w-lg p-10",children:te.jsx(gSe,{components:{Option:ySe},isMulti:!1,menuIsOpen:!0,onChange:d=>{var f;return c((f=d==null?void 0:d.value)==null?void 0:f.channel)},options:u})}):te.jsxs("div",{className:"h-screen p-3",children:[te.jsx(vSe,{children:"multi-channel"}),te.jsx(ESe,{children:"This is multi-channel example. By create multi Agora Client. You can join multi-channel"}),te.jsx("div",{className:"text-xl",children:te.jsx(ci,{onClick:()=>i(!0),type:"primary",children:"show demo"})})]})})};function WH({videoTracks:e}){return te.jsx(te.Fragment,{children:e.map(t=>te.jsxs($a.Item,{children:[te.jsx(jm,{cover:Xs(),track:t},t.getUserId()),te.jsx(kc,{children:`${Rs(t.getUserId())}{${t.getUserId()}}`})]},t.getUserId()))})}const CSe=()=>{const[e,t]=y.useState(!1);li({appid:at.appId,channel:at.channel,token:at.token},e);const[i,a]=y.useState(!1),[c,u]=y.useState(!1),[d,f]=y.useState(!1),{screenTrack:m,error:g}=U$(d,{},"auto");y.useEffect(()=>{f(!1)},[g]);const _=As(),{videoTracks:S}=cp(_.filter(A=>A.uid!==at.ShareScreenUID)),{audioTracks:b}=sp(_.filter(A=>A.uid!==at.ShareScreenUID));return b.map(A=>A.play()),te.jsxs(jr,{children:[te.jsx("div",{className:"h-screen p-3",children:e&&te.jsxs(te.Fragment,{children:[te.jsx(ci,{onClick:()=>f(A=>!A),type:"primary",children:d?"stop share screen":"start share screen"}),d&&te.jsx(wve,{onCloseScreenShare:()=>{f(!1)},screenShareOn:d,screenTrack:m}),te.jsx(L_,{cameraOn:c,micOn:i,renderRemoteUsers:()=>te.jsx(WH,{videoTracks:S})})]})}),te.jsx(qo,{calling:e,cameraOn:c,micOn:i,setCalling:()=>{t(A=>!A),f(!1)},setCamera:()=>{u(A=>!A)},setMic:()=>{a(A=>!A)}})]})};const{Title:bSe,Paragraph:TSe,Text:RSe}=ho,ISe=()=>{const[e,t]=y.useState(!1);li({appid:at.appId,channel:at.channel,token:at.token},e);const[i,a]=y.useState(!1),[c,u]=y.useState(!1),d=As(),[f,m]=y.useState(!0),{videoTracks:g}=cp(f?d:d.filter((A,R)=>R==0)),{audioTracks:_}=sp(d);_.map(A=>A.play());const S=()=>te.jsx("div",{className:"p-4 text-xl",children:te.jsx(ci,{onClick:()=>m(A=>!A),type:"primary",children:`switch to layout ${f?2:1}`})}),b=()=>te.jsx(te.Fragment,{children:f?te.jsx(wSe,{videoTracks:g}):te.jsx(OSe,{videoTracks:g})});return te.jsxs(jr,{children:[e?te.jsx(L_,{cameraOn:c,micOn:i,renderAction:S,renderRemoteUsers:b}):te.jsxs("div",{className:"h-screen p-3",children:[te.jsx(bSe,{children:"SwitchLayout"}),te.jsxs(TSe,{children:["By using ",te.jsx(RSe,{keyboard:!0,children:"useRemoteVideoTracks"})," hook to dynamically switch the camera track, this will not generate a new track, but only dynamically subscribe and unsubscribe the track according to your needs."]})]}),te.jsx(qo,{calling:e,cameraOn:c,micOn:i,setCalling:()=>{t(A=>!A)},setCamera:()=>{u(A=>!A)},setMic:()=>{a(A=>!A)}})]})};function wSe({videoTracks:e}){return te.jsx(te.Fragment,{children:e.map(t=>te.jsxs($a.Item,{children:[te.jsx(jm,{cover:Xs(),track:t},t.getUserId()),te.jsx(kc,{children:`Layout1 ${Rs(t.getUserId())}{${t.getUserId()}}`})]},t.getUserId()))})}function OSe({videoTracks:e}){return te.jsx(te.Fragment,{children:e.map(t=>te.jsxs($a.Item,{children:[te.jsx(jm,{cover:Xs(),track:t},t.getUserId()),te.jsx(kc,{children:`Layout2 ${Rs(t.getUserId())}{${t.getUserId()}}`})]},t.getUserId()))})}const GH=[{label:"switch-layout",component:ISe},{label:"multi-channel",component:SSe},{label:"share-screen",component:CSe}],ASe=()=>{const[e,t]=y.useState(!1);li({appid:at.appId,channel:at.channel,token:at.token},e);const[i,a]=y.useState(!1),[c,u]=y.useState(!1),d=As(),{videoTracks:f}=cp(d),{audioTracks:m}=sp(d);return m.map(g=>g.play()),te.jsxs(jr,{children:[e?te.jsx(L_,{cameraOn:c,micOn:i,renderRemoteUsers:()=>te.jsx(WH,{videoTracks:f})}):te.jsx(jr,{}),te.jsx(qo,{calling:e,cameraOn:c,micOn:i,setCalling:()=>{t(g=>!g)},setCamera:()=>{u(g=>!g)},setMic:()=>{a(g=>!g)}})]})},zH=[{label:"overview",component:ASe}],{Title:NSe,Paragraph:YT}=ho,xSe=()=>{li({appid:at.appId,channel:at.channel,token:at.token},!0);const[e,t]=y.useState(!1),[i,a]=y.useState(),{localMicrophoneTrack:c}=op(e);return Gl([c]),y.useEffect(()=>{c&&a({muted:c.muted,isPlaying:c.isPlaying,enabled:c.enabled})},[e,c]),te.jsxs(jr,{children:[te.jsxs("div",{className:"h-screen p-3",children:[te.jsx(NSe,{children:"local audio track status"}),i&&te.jsxs(te.Fragment,{children:[te.jsx(YT,{children:`muted: ${i==null?void 0:i.muted}`}),te.jsx(YT,{children:`isPlaying: ${i.isPlaying}`}),te.jsx(YT,{children:`enabled: ${i==null?void 0:i.enabled}`})]}),te.jsx(x_,{disabled:!e,track:c})]}),te.jsx(qo,{micOn:e,setMic:()=>{t(u=>!u)}})]})},{Title:PSe}=ho,DSe=()=>{li({appid:at.appId,channel:at.channel,token:at.token},!0);const[e,t]=y.useState(!1),[i,a]=y.useState(!1),[c,u]=y.useState(!1),[d,f]=y.useState(!1),{localMicrophoneTrack:m}=op(e),{localCameraTrack:g}=ap(i);return Gl([m,g]),te.jsxs(jr,{children:[te.jsxs("div",{className:"h-screen p-3 overflow-auto",children:[te.jsx(PSe,{children:"local user status"}),te.jsxs(ci,{className:"m-2",onClick:()=>{f(_=>!_)},type:d?"primary":"default",children:["playAudio : ",JSON.stringify(d)]}),te.jsxs(ci,{className:"m-2",onClick:()=>{u(_=>!_)},type:c?"primary":"default",children:["playVideo : ",JSON.stringify(c)]}),te.jsx(ci,{className:"m-2",onClick:()=>{u(!0),a(!1)},type:"primary",children:"cameraOn=false playVideo=true"}),te.jsx(ci,{className:"m-2",onClick:()=>{u(!1),a(!0)},type:"primary",children:"cameraOn=true playVideo=false"}),te.jsx(V$,{audioTrack:m,cameraOn:i,className:"m-2",micOn:e,playAudio:d,playVideo:c,style:{width:"300px",height:"300px"},videoTrack:g})]}),te.jsx(qo,{cameraOn:i,micOn:e,setCamera:()=>{a(_=>!_)},setMic:()=>{t(_=>!_)}})]})},{Title:kSe}=ho,LSe=()=>{li({appid:at.appId,channel:at.channel,token:at.token},!0);const[e,t]=y.useState(!1),{localCameraTrack:i}=ap();return Gl([i]),te.jsxs(jr,{children:[te.jsxs("div",{className:"h-screen p-3",children:[te.jsx(kSe,{children:"local video track"}),te.jsx(Um,{disabled:!e,play:e,style:{width:"300px",height:"300px"},track:i})]}),te.jsx(qo,{cameraOn:e,setCamera:()=>{t(a=>!a)}})]})},{Title:MSe}=ho,USe=()=>{const[e,t]=y.useState(!1);li({appid:at.appId,channel:at.channel,token:at.token},e);const[i,a]=y.useState(),c=As(),{audioTracks:u}=sp(c);return y.useEffect(()=>{if(u&&u.length>0){const d=[];u.map(f=>{d.push({isPlay:f.isPlaying,id:f.getTrackId(),track:f})}),a(d)}else a([])},[u]),y.useEffect(()=>{e||a([])},[e]),te.jsxs(jr,{children:[te.jsxs("div",{className:"h-screen p-3",children:[te.jsx(MSe,{children:"remote audio track status"}),i&&i.length>0&&i.map(d=>te.jsxs("div",{children:[te.jsx("div",{className:"p-4 text-xl",children:te.jsx(ci,{onClick:()=>{d.isPlay=!d.isPlay,a([...i])},type:"primary",children:"switch this remote audio track play status"})}),d.isPlay,te.jsx(B$,{play:d.isPlay,track:d.track})]},d.id))]}),te.jsx(qo,{calling:e,setCalling:()=>{t(d=>!d)}})]})},{Title:jSe}=ho,FSe=()=>{const[e,t]=y.useState(!1),i=y.useMemo(()=>Xs(),[]);li({appid:at.appId,channel:at.channel,token:at.token},e);const[a,c]=y.useState(),u=As();return y.useEffect(()=>{if(u.length>0){const d=[];u.map(f=>{d.push({playVideo:!0,playAudio:!0,id:f.uid,user:f})}),c(d)}else c([])},[u]),y.useEffect(()=>{e||c([])},[e]),te.jsxs(jr,{children:[te.jsxs("div",{className:"h-screen p-3",children:[te.jsx(jSe,{children:"RemoteUser"}),a&&a.length>0&&a.map(d=>te.jsxs("div",{children:[te.jsxs("div",{className:"text-xl",children:[te.jsx(ci,{className:"m-2",onClick:()=>{d.playVideo=!d.playVideo,c([...a])},type:d.playVideo?"default":"primary",children:`${d.playVideo?"stop":"play"} RemoteUser Video`}),te.jsx(ci,{className:"m-2",onClick:()=>{d.playAudio=!d.playAudio,c([...a])},type:d.playAudio?"default":"primary",children:`${d.playAudio?"stop":"play"} RemoteUser Audio`})]}),te.jsx("div",{className:"p-4 text-xl",children:te.jsx(Qw,{cover:i,playAudio:d.playAudio,playVideo:d.playVideo,style:{width:"150px",height:"100px"},user:d.user})})]},d.id))]}),te.jsx(qo,{calling:e,setCalling:()=>{t(d=>!d)}})]})},{Title:VSe}=ho,BSe=()=>{const[e,t]=y.useState(!1);li({appid:at.appId,channel:at.channel,token:at.token},e);const[i,a]=y.useState(),c=As(),{videoTracks:u}=cp(c);return y.useEffect(()=>{if(u&&u.length>0){const d=[];u.map(f=>{d.push({isPlay:!0,id:f.getTrackId(),track:f})}),a(d)}else a([])},[u]),y.useEffect(()=>{e||a([])},[e]),te.jsxs(jr,{children:[te.jsxs("div",{className:"h-screen p-3",children:[te.jsx(VSe,{children:"remote video track status"}),i&&i.length>0&&i.map(d=>te.jsxs("div",{children:[te.jsx("div",{className:"p-4 text-xl",children:te.jsx(ci,{onClick:()=>{d.isPlay=!d.isPlay,a([...i])},type:"primary",children:"switch this remote video track play status"})}),te.jsx("div",{className:"p-4 text-xl",children:te.jsx(Jw,{play:d.isPlay,style:{width:"150px",height:"100px"},track:d.track})})]},d.id))]}),te.jsx(qo,{calling:e,setCalling:()=>{t(d=>!d)}})]})},KH=[{label:"LocalAudioTrack",component:xSe},{label:"RemoteAudioTrack",component:USe},{label:"LocalVideoTrack",component:LSe},{label:"RemoteVideoTrack",component:BSe},{label:"LocalUser",component:DSe},{label:"RemoteUser",component:FSe}],{Title:$Se}=ho,HSe=()=>{li({appid:at.appId,channel:at.channel,token:at.token},!0);const[e,t]=y.useState(!1),{localMicrophoneTrack:i}=op();return Xw(i,e),te.jsxs(jr,{children:[te.jsx("div",{className:"h-screen p-3",children:te.jsx($Se,{children:"useAutoPlayAudioTrack"})}),te.jsx(qo,{micOn:e,setMic:()=>{t(a=>!a)}})]})},{Title:WSe}=ho,GSe=()=>{li({appid:at.appId,channel:at.channel,token:at.token},!0);const[e,t]=y.useState(!1),i=y.useRef(null),{localCameraTrack:a}=ap();return qw(a,e,i.current),te.jsxs(jr,{children:[te.jsxs("div",{className:"h-screen p-3",children:[te.jsx(WSe,{children:"useAutoPlayVideoTrack"}),te.jsx("div",{className:"p-4 text-xl",children:te.jsx("div",{ref:c=>i.current=c,style:{width:"150px",height:"100px"}})})]}),te.jsx(qo,{cameraOn:e,setCamera:()=>{t(c=>!c)}})]})},{Title:zSe,Paragraph:qT,Text:KSe}=ho,YSe=()=>{const[e,t]=y.useState(!1),i=Tge();return li({appid:at.appId,channel:at.channel,token:at.token},e),te.jsx(jr,{children:te.jsxs("div",{className:"h-screen p-3",children:[te.jsx(zSe,{children:"useConnectionState"}),te.jsxs(qT,{children:["By using ",te.jsx(KSe,{keyboard:!0,children:"useConnectionState"})," hook to get the current connection state of the client."]}),te.jsx(qT,{children:`result: ${i}`}),te.jsxs(qT,{children:[te.jsx(ci,{className:"m-1",onClick:()=>t(!0),type:"primary",children:"Join"}),te.jsx(ci,{className:"m-1",onClick:()=>t(!1),type:"default",children:"Leave"})]})]})})},{Title:qSe,Paragraph:XT,Text:XSe}=ho,JSe=()=>{const[e,t]=y.useState(!1),i=N_();return li({appid:at.appId,channel:at.channel,token:at.token},e),te.jsx(jr,{children:te.jsxs("div",{className:"h-screen p-3",children:[te.jsx(qSe,{children:"useCurrentUID"}),te.jsxs(XT,{children:["By using ",te.jsx(XSe,{keyboard:!0,children:"useCurrentUID"})," hook to get the UID of the current user."]}),te.jsx(XT,{children:`result: ${i}`}),te.jsxs(XT,{children:[te.jsx(ci,{className:"m-1",onClick:()=>t(!0),type:"primary",children:"Join"}),te.jsx(ci,{className:"m-1",onClick:()=>t(!1),type:"default",children:"Leave"})]})]})})},{Title:QSe,Paragraph:JT,Text:ZSe}=ho,eCe=()=>{const[e,t]=y.useState(!1),i=qa();return li({appid:at.appId,channel:at.channel,token:at.token},e),te.jsx(jr,{children:te.jsxs("div",{className:"h-screen p-3",children:[te.jsx(QSe,{children:"useIsConnected"}),te.jsxs(JT,{children:["By using ",te.jsx(ZSe,{keyboard:!0,children:"useIsConnected"})," hook to determines whether the client is successfully connected to Agora server."]}),te.jsx(JT,{children:`result: ${i}`}),te.jsxs(JT,{children:[te.jsx(ci,{className:"m-1",onClick:()=>t(!0),type:"primary",children:"Join"}),te.jsx(ci,{className:"m-1",onClick:()=>t(!1),type:"default",children:"Leave"})]})]})})},{Title:tCe,Paragraph:TV,Text:ff}=ho,nCe=()=>{const[e,t]=y.useState(!1),{data:i,isLoading:a,isConnected:c,error:u}=li({appid:at.appId,channel:at.channel,token:at.token},e),[d,f]=y.useState(!1),[m,g]=y.useState(!1),_=As(),{videoTracks:S}=cp(_),{audioTracks:b}=sp(_);b.map(R=>R.play());const A=()=>te.jsx(te.Fragment,{children:S.map(R=>te.jsxs($a.Item,{children:[te.jsx(jm,{cover:Xs(),track:R},R.getUserId()),te.jsx(kc,{children:`${Rs(R.getUserId())}{${R.getUserId()}}`})]},R.getUserId()))});return te.jsxs(jr,{children:[te.jsxs("div",{className:"h-screen p-3",children:[te.jsx(tCe,{children:"UseJoin"}),te.jsxs(TV,{children:["By using ",te.jsx(ff,{keyboard:!0,children:"UseJoin"})," hook to join room."]}),te.jsxs(TV,{children:["You can do some actions like fetching token before calling join.",te.jsx("br",{}),"Below is the returned data."]}),te.jsxs(ff,{children:["data: ",i]}),te.jsxs(ff,{className:"pl-3",children:["isLoading: ",`${a}`]}),te.jsxs(ff,{className:"pl-3",children:["isConnected: ",`${c}`]}),te.jsxs(ff,{className:"pl-3",children:["error: ",`${JSON.stringify(u)}`]})]}),e&&te.jsx(L_,{cameraOn:m,micOn:d,renderRemoteUsers:A}),te.jsx(qo,{calling:e,cameraOn:m,micOn:d,setCalling:()=>{t(R=>!R)},setCamera:()=>{g(R=>!R)},setMic:()=>{f(R=>!R)}})]})},{Title:rCe}=ho,iCe=()=>{const[e,t]=y.useState(!1),[i,a]=y.useState(null),[c,u]=y.useState(null);li({appid:at.appId,channel:at.channel,token:at.token,uid:at.ShareScreenUID},e);const{screenTrack:d,error:f}=U$(e,{},"auto");return y.useEffect(()=>{d?Array.isArray(d)?(a(d.filter(m=>m.trackMediaType==="video")[0]),u(d.filter(m=>m.trackMediaType==="audio")[0])):a(d):(u(null),a(null))},[d]),Gl([i,c],e),y.useEffect(()=>{t(!1)},[f]),k$(i,"track-ended",()=>{console.log("screen sharing ended"),t(!1)}),te.jsx(jr,{children:te.jsxs("div",{className:"h-screen p-3",children:[te.jsx(rCe,{children:"useLocalScreenTrack"}),te.jsx(ci,{onClick:()=>t(m=>!m),type:"primary",children:e?"stop share screen":"start share screen"}),e&&i&&te.jsx(Um,{disabled:!e,play:e,style:{width:"600px",height:"400px"},track:i})]})})},{Title:oCe,Paragraph:aCe}=ho,sCe=()=>{const e=Rge();return li({appid:at.appId,channel:at.channel,token:at.token},!0),te.jsx(jr,{children:te.jsxs("div",{className:"h-screen p-3",children:[te.jsx(oCe,{children:"useNetworkQuality"}),te.jsx(aCe,{children:`result: ${JSON.stringify(e)}`})]})})},cCe=()=>{const[e,t]=y.useState(!1),i=N_()||0,a=y.useMemo(()=>Rs(i),[i]),c=y.useMemo(()=>Xs(),[]),{isConnected:u}=li({appid:at.appId,channel:at.channel,token:at.token},e),[d,f]=y.useState(!1),[m,g]=y.useState(!1),{localMicrophoneTrack:_}=op(d),{localCameraTrack:S}=ap(m);Gl([_,S]);const b=As(),A=b.filter(x=>x.hasAudio||x.hasVideo),{videoTracks:R}=cp(b),{audioTracks:w}=sp(b);w.map(x=>x.play());const D=()=>te.jsx(te.Fragment,{children:R.map(x=>te.jsxs($a.Item,{children:[te.jsx(jm,{cover:Xs(),track:x},x.getUserId()),te.jsx(kc,{children:`Layout1 ${Rs(x.getUserId())}{${x.getUserId()}}`})]},x.getUserId()))});return te.jsxs(jr,{children:[te.jsxs(te.Fragment,{children:[te.jsx(eO,{published:A.length+(d||m?1:0),total:b.length+1}),te.jsxs($a,{children:[u&&te.jsx($a.Item,{children:te.jsx(Zw,{audioTrack:_,cameraOn:m,cover:c,micOn:d,videoTrack:S,children:te.jsx(kc,{children:`${a}{${i}}`})})}),D?D():void 0]})]}),te.jsx(qo,{calling:e,cameraOn:m,micOn:d,setCalling:()=>t(x=>!x),setCamera:()=>{g(x=>!x)},setMic:()=>{f(x=>!x)}})]})},lCe=()=>{const[e,t]=y.useState(!1),i=qa(),a=N_()||0,c=y.useMemo(()=>Rs(a),[a]),u=y.useMemo(()=>Xs(),[]);li({appid:at.appId,channel:at.channel,token:at.token},e);const[d,f]=y.useState(!1),[m,g]=y.useState(!1),{localMicrophoneTrack:_}=op(d),{localCameraTrack:S}=ap(m);Gl([_,S]);const b=As(),A=b.filter(R=>R.hasAudio||R.hasVideo);return te.jsxs(jr,{children:[te.jsxs(te.Fragment,{children:[te.jsx(eO,{published:A.length+(d||m?1:0),total:b.length+1}),te.jsxs($a,{children:[i&&te.jsx($a.Item,{children:te.jsx(Zw,{audioTrack:_,cameraOn:m,cover:u,micOn:d,videoTrack:S,children:te.jsx(kc,{children:`${c}{${a}}`})})}),b.map(R=>te.jsxs($a.Item,{children:[te.jsx(Qw,{cover:Xs(),user:R}),te.jsx(kc,{children:`${Rs(R.uid)}{${R.uid}}`})]},R.uid))]})]}),te.jsx(qo,{calling:e,cameraOn:m,micOn:d,setCalling:()=>t(R=>!R),setCamera:()=>{g(R=>!R)},setMic:()=>{f(R=>!R)}})]})},YH=[{label:"useJoin",component:nCe},{label:"usePublish",component:cCe},{label:"useRemoteUsers",component:lCe},{label:"useConnectionState",component:YSe},{label:"useIsConnected",component:eCe},{label:"useCurrentUID",component:JSe},{label:"useAutoPlayAudioTrack",component:HSe},{label:"useAutoPlayVideoTrack",component:GSe},{label:"useNetworkQuality",component:sCe},{label:"useLocalScreenTrack",component:iCe}],RV=()=>{const[e,t]=y.useState(at.channel),i=m=>{t(m.target.value)},[a,c]=qme.useNotification(),u=m=>{a[m]({message:"Configuration Saved",description:"Go to other pages and try it now!"})},d=()=>{at.channel=e,u("success")},f={wrapperCol:{span:14,offset:4}};return te.jsxs(jr,{children:[c,te.jsx("div",{className:"p-4",children:te.jsx(iF.Item,{label:"Channel Name",children:te.jsx(Jfe,{onChange:i,style:{width:"200px"},value:e})})}),te.jsx(iF.Item,{...f,children:te.jsx(ci,{onClick:d,type:"primary",children:"Save configuration"})})]})},{Content:uCe,Sider:dCe}=K1,Vi=["Basic","Hooks","Components","Advanced","Setting"],hCe=[{label:Vi[0],key:Vi[0],children:zH.map(e=>({key:`/${Vi[0]}/${e.label}`,label:e.label}))},{label:Vi[1],key:Vi[1],children:YH.map(e=>({key:`/${Vi[1]}/${e.label}`,label:e.label}))},{label:Vi[2],key:Vi[2],children:KH.map(e=>({key:`/${Vi[2]}/${e.label}`,label:e.label}))},{label:Vi[3],key:Vi[3],children:GH.map(e=>({key:`/${Vi[3]}/${e.label}`,label:e.label}))},{label:"settings",key:"/setting"}];function pCe(){const[e,t]=y.useState(!1),[i,a]=y.useState([window.location.hash.slice(1).split("/")[1]]),c=d=>{const f=d.find(m=>i.indexOf(m)===-1);f&&Vi.indexOf(f)===-1?a(d):a(f?[f]:[])},u=Cte();return te.jsx(te.Fragment,{children:te.jsxs(K1,{children:[te.jsx(dCe,{collapsed:e,collapsible:!0,onCollapse:d=>t(d),style:{overflow:"auto",height:"100vh",position:"fixed",left:0,top:0,bottom:0},children:te.jsx(jpe,{items:hCe,mode:"inline",onClick:d=>{u(d.key)},onOpenChange:c,openKeys:i,selectedKeys:[window.location.hash.slice(1)],theme:"dark"})}),te.jsx(K1,{style:{marginLeft:e?80:200},children:te.jsxs(uCe,{children:[te.jsxs(Ute,{children:[te.jsx(bu,{Component:()=>te.jsx(RV,{}),path:"/*"}),te.jsx(bu,{Component:()=>te.jsx(RV,{}),path:"/setting"}),zH.map(({label:d,component:f})=>{const m=f;return te.jsx(bu,{Component:()=>te.jsx(nv,{children:te.jsx(m,{})}),path:`/${Vi[0]}/${d}`},d)}),YH.map(({label:d,component:f})=>{const m=f;return te.jsx(bu,{Component:()=>te.jsx(nv,{children:te.jsx(m,{})}),path:`/${Vi[1]}/${d}`},d)}),KH.map(({label:d,component:f})=>{const m=f;return te.jsx(bu,{Component:()=>te.jsx(nv,{children:te.jsx(m,{})}),path:`/${Vi[2]}/${d}`},d)}),GH.map(({label:d,component:f})=>{const m=f;return te.jsx(bu,{Component:()=>te.jsx(nv,{children:te.jsx(m,{})}),path:`/${Vi[3]}/${d}`},d)})]}),te.jsx("a",{"aria-label":"View source on GitHub",className:"github-corner",href:"https://github.com/AgoraIO-Extensions/agora-rtc-react",rel:"noreferrer",target:"_blank",children:te.jsxs("svg",{"aria-hidden":"true",className:"github-corner-svg",height:"80",viewBox:"0 0 250 250",width:"80",children:[te.jsx("path",{d:"M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"}),te.jsx("path",{className:"github-corner-svg-arm",d:"M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2",fill:"currentColor"}),te.jsx("path",{className:"github-corner-svg-body",d:"M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z",fill:"currentColor"})]})})]})})]})})}Rc.setLogLevel(2);QT.createRoot(document.getElementById("root")).render(te.jsx(y.StrictMode,{children:te.jsx(Fte,{children:te.jsx(pCe,{})})}));
